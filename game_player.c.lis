1     0000              MODULE game_player_c
2     0000              LINE -1, "game_player.c"
-1    0000              
0     0000              
1     0000              ;--------------------------------------------------------
2     0000              ; File Created by SDCC : free open source ANSI-C Compiler
3     0000              ; Version 3.6.5 #9958 (Mac OS X i386)
4     0000              ;--------------------------------------------------------
5     0000              ; Processed by Z88DK
6     0000              ;--------------------------------------------------------
7     0000              
8     0000              	EXTERN __divschar
9     0000              	EXTERN __divschar_callee
10    0000              	EXTERN __divsint
11    0000              	EXTERN __divsint_callee
12    0000              	EXTERN __divslong
13    0000              	EXTERN __divslong_callee
14    0000              	EXTERN __divslonglong
15    0000              	EXTERN __divslonglong_callee
16    0000              	EXTERN __divsuchar
17    0000              	EXTERN __divsuchar_callee
18    0000              	EXTERN __divuchar
19    0000              	EXTERN __divuchar_callee
20    0000              	EXTERN __divuint
21    0000              	EXTERN __divuint_callee
22    0000              	EXTERN __divulong
23    0000              	EXTERN __divulong_callee
24    0000              	EXTERN __divulonglong
25    0000              	EXTERN __divulonglong_callee
26    0000              	EXTERN __divuschar
27    0000              	EXTERN __divuschar_callee
28    0000              	EXTERN __modschar
29    0000              	EXTERN __modschar_callee
30    0000              	EXTERN __modsint
31    0000              	EXTERN __modsint_callee
32    0000              	EXTERN __modslong
33    0000              	EXTERN __modslong_callee
34    0000              	EXTERN __modslonglong
35    0000              	EXTERN __modslonglong_callee
36    0000              	EXTERN __modsuchar
37    0000              	EXTERN __modsuchar_callee
38    0000              	EXTERN __moduchar
39    0000              	EXTERN __moduchar_callee
40    0000              	EXTERN __moduint
41    0000              	EXTERN __moduint_callee
42    0000              	EXTERN __modulong
43    0000              	EXTERN __modulong_callee
44    0000              	EXTERN __modulonglong
45    0000              	EXTERN __modulonglong_callee
46    0000              	EXTERN __moduschar
47    0000              	EXTERN __moduschar_callee
48    0000              	EXTERN __mulint
49    0000              	EXTERN __mulint_callee
50    0000              	EXTERN __mullong
51    0000              	EXTERN __mullong_callee
52    0000              	EXTERN __mullonglong
53    0000              	EXTERN __mullonglong_callee
54    0000              	EXTERN __mulschar
55    0000              	EXTERN __mulschar_callee
56    0000              	EXTERN __mulsuchar
57    0000              	EXTERN __mulsuchar_callee
58    0000              	EXTERN __muluschar
59    0000              	EXTERN __muluschar_callee
60    0000              	EXTERN __rlslonglong
61    0000              	EXTERN __rlslonglong_callee
62    0000              	EXTERN __rlulonglong
63    0000              	EXTERN __rlulonglong_callee
64    0000              	EXTERN __rrslonglong
65    0000              	EXTERN __rrslonglong_callee
66    0000              	EXTERN __rrulonglong
67    0000              	EXTERN __rrulonglong_callee
68    0000              	EXTERN ___sdcc_call_hl
69    0000              	EXTERN ___sdcc_call_iy
70    0000              	EXTERN ___sdcc_enter_ix
71    0000              	EXTERN _banked_call
72    0000              	EXTERN _banked_ret
73    0000              	EXTERN ___fs2schar
74    0000              	EXTERN ___fs2schar_callee
75    0000              	EXTERN ___fs2sint
76    0000              	EXTERN ___fs2sint_callee
77    0000              	EXTERN ___fs2slong
78    0000              	EXTERN ___fs2slong_callee
79    0000              	EXTERN ___fs2slonglong
80    0000              	EXTERN ___fs2slonglong_callee
81    0000              	EXTERN ___fs2uchar
82    0000              	EXTERN ___fs2uchar_callee
83    0000              	EXTERN ___fs2uint
84    0000              	EXTERN ___fs2uint_callee
85    0000              	EXTERN ___fs2ulong
86    0000              	EXTERN ___fs2ulong_callee
87    0000              	EXTERN ___fs2ulonglong
88    0000              	EXTERN ___fs2ulonglong_callee
89    0000              	EXTERN ___fsadd
90    0000              	EXTERN ___fsadd_callee
91    0000              	EXTERN ___fsdiv
92    0000              	EXTERN ___fsdiv_callee
93    0000              	EXTERN ___fseq
94    0000              	EXTERN ___fseq_callee
95    0000              	EXTERN ___fsgt
96    0000              	EXTERN ___fsgt_callee
97    0000              	EXTERN ___fslt
98    0000              	EXTERN ___fslt_callee
99    0000              	EXTERN ___fsmul
100   0000              	EXTERN ___fsmul_callee
101   0000              	EXTERN ___fsneq
102   0000              	EXTERN ___fsneq_callee
103   0000              	EXTERN ___fssub
104   0000              	EXTERN ___fssub_callee
105   0000              	EXTERN ___schar2fs
106   0000              	EXTERN ___schar2fs_callee
107   0000              	EXTERN ___sint2fs
108   0000              	EXTERN ___sint2fs_callee
109   0000              	EXTERN ___slong2fs
110   0000              	EXTERN ___slong2fs_callee
111   0000              	EXTERN ___slonglong2fs
112   0000              	EXTERN ___slonglong2fs_callee
113   0000              	EXTERN ___uchar2fs
114   0000              	EXTERN ___uchar2fs_callee
115   0000              	EXTERN ___uint2fs
116   0000              	EXTERN ___uint2fs_callee
117   0000              	EXTERN ___ulong2fs
118   0000              	EXTERN ___ulong2fs_callee
119   0000              	EXTERN ___ulonglong2fs
120   0000              	EXTERN ___ulonglong2fs_callee
121   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
122   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
123   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
126   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
127   0000              	EXTERN ____sdcc_4_ldi_save_bc
128   0000              	EXTERN ____sdcc_4_push_hlix
129   0000              	EXTERN ____sdcc_4_push_mhl
130   0000              	EXTERN ____sdcc_lib_setmem_hl
131   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
132   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
133   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
134   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
135   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
136   0000              	EXTERN ____sdcc_ll_add_deix_hlix
137   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
138   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
139   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
140   0000              	EXTERN ____sdcc_ll_asr_hlix_a
141   0000              	EXTERN ____sdcc_ll_asr_mbc_a
142   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
143   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
144   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
145   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
146   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
147   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
148   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
149   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
150   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
151   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
152   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
153   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
155   0000              	EXTERN ____sdcc_ll_push_hlix
156   0000              	EXTERN ____sdcc_ll_push_mhl
157   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
158   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
159   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
160   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
161   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
162   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
163   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
164   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
165   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
166   0000              	EXTERN ____sdcc_load_debc_deix
167   0000              	EXTERN ____sdcc_load_dehl_deix
168   0000              	EXTERN ____sdcc_load_debc_mhl
169   0000              	EXTERN ____sdcc_load_hlde_mhl
170   0000              	EXTERN ____sdcc_store_dehl_bcix
171   0000              	EXTERN ____sdcc_store_debc_hlix
172   0000              	EXTERN ____sdcc_store_debc_mhl
173   0000              	EXTERN ____sdcc_cpu_pop_ei
174   0000              	EXTERN ____sdcc_cpu_pop_ei_jp
175   0000              	EXTERN ____sdcc_cpu_push_di
176   0000              	EXTERN ____sdcc_outi
177   0000              	EXTERN ____sdcc_outi_128
178   0000              	EXTERN ____sdcc_outi_256
179   0000              	EXTERN ____sdcc_ldi
180   0000              	EXTERN ____sdcc_ldi_128
181   0000              	EXTERN ____sdcc_ldi_256
182   0000              	EXTERN ____sdcc_4_copy_srcd_hlix_dst_deix
183   0000              	EXTERN ____sdcc_4_and_src_mbc_mhl_dst_deix
184   0000              	EXTERN ____sdcc_4_or_src_mbc_mhl_dst_deix
185   0000              	EXTERN ____sdcc_4_xor_src_mbc_mhl_dst_deix
186   0000              	EXTERN ____sdcc_4_or_src_dehl_dst_bcix
187   0000              	EXTERN ____sdcc_4_xor_src_dehl_dst_bcix
188   0000              	EXTERN ____sdcc_4_and_src_dehl_dst_bcix
189   0000              	EXTERN ____sdcc_4_xor_src_mbc_mhl_dst_debc
190   0000              	EXTERN ____sdcc_4_or_src_mbc_mhl_dst_debc
191   0000              	EXTERN ____sdcc_4_and_src_mbc_mhl_dst_debc
192   0000              	EXTERN ____sdcc_4_cpl_src_mhl_dst_debc
193   0000              	EXTERN ____sdcc_4_xor_src_debc_mhl_dst_debc
194   0000              	EXTERN ____sdcc_4_or_src_debc_mhl_dst_debc
195   0000              	EXTERN ____sdcc_4_and_src_debc_mhl_dst_debc
196   0000              	EXTERN ____sdcc_4_and_src_debc_hlix_dst_debc
197   0000              	EXTERN ____sdcc_4_or_src_debc_hlix_dst_debc
198   0000              	EXTERN ____sdcc_4_xor_src_debc_hlix_dst_debc
199   0000              
200   0000              ;--------------------------------------------------------
201   0000              ; Public variables in this module
202   0000              ;--------------------------------------------------------
203   0000              	GLOBAL _player_check_map
204   0000              	GLOBAL _player_1up
205   0000              	GLOBAL _player_action_jump
206   0000              	GLOBAL _player_action_fire
207   0000              	GLOBAL _player_init
208   0000              	GLOBAL _player_turn
209   0000              	GLOBAL _player_move
210   0000              	GLOBAL _player_check_input
211   0000              	GLOBAL _player_move_input
212   0000              	GLOBAL _player_fix_walk_lin
213   0000              	GLOBAL _player_fire
214   0000              	GLOBAL _player_collision
215   0000              	GLOBAL _player_pick_mushroom
216   0000              	GLOBAL _player_check_stairs_vertical
217   0000              	GLOBAL _player_check_stairs
218   0000              	GLOBAL _player_anim_stairs
219   0000              	GLOBAL _player_tile
220   0000              	GLOBAL _player_pick_item
221   0000              	GLOBAL _player_hit_platform
222   0000              	GLOBAL _player_hit_platform_clear
223   0000              	GLOBAL _player_score_add
224   0000              	GLOBAL _player_check_floor
225   0000              	GLOBAL _player_gasta_brick
226   0000              	GLOBAL _player_move_jump
227   0000              	GLOBAL _player_open_door
228   0000              	GLOBAL _player_lost_life
229   0000              	GLOBAL _player_damage
230   0000              ;--------------------------------------------------------
231   0000              ; Externals used
232   0000              ;--------------------------------------------------------
233   0000              	GLOBAL _ulltoa_callee
234   0000              	GLOBAL _ulltoa
235   0000              	GLOBAL _strtoull_callee
236   0000              	GLOBAL _strtoull
237   0000              	GLOBAL _strtoll_callee
238   0000              	GLOBAL _strtoll
239   0000              	GLOBAL _lltoa_callee
240   0000              	GLOBAL _lltoa
241   0000              	GLOBAL _llabs_callee
242   0000              	GLOBAL _llabs
243   0000              	GLOBAL __lldivu__callee
244   0000              	GLOBAL __lldivu_
245   0000              	GLOBAL __lldiv__callee
246   0000              	GLOBAL __lldiv_
247   0000              	GLOBAL _atoll_callee
248   0000              	GLOBAL _atoll
249   0000              	GLOBAL _realloc_unlocked_callee
250   0000              	GLOBAL _realloc_unlocked
251   0000              	GLOBAL _malloc_unlocked_fastcall
252   0000              	GLOBAL _malloc_unlocked
253   0000              	GLOBAL _free_unlocked_fastcall
254   0000              	GLOBAL _free_unlocked
255   0000              	GLOBAL _calloc_unlocked_callee
256   0000              	GLOBAL _calloc_unlocked
257   0000              	GLOBAL _aligned_alloc_unlocked_callee
258   0000              	GLOBAL _aligned_alloc_unlocked
259   0000              	GLOBAL _realloc_callee
260   0000              	GLOBAL _realloc
261   0000              	GLOBAL _malloc_fastcall
262   0000              	GLOBAL _malloc
263   0000              	GLOBAL _free_fastcall
264   0000              	GLOBAL _free
265   0000              	GLOBAL _calloc_callee
266   0000              	GLOBAL _calloc
267   0000              	GLOBAL _aligned_alloc_callee
268   0000              	GLOBAL _aligned_alloc
269   0000              	GLOBAL _utoa_callee
270   0000              	GLOBAL _utoa
271   0000              	GLOBAL _ultoa_callee
272   0000              	GLOBAL _ultoa
273   0000              	GLOBAL _system_fastcall
274   0000              	GLOBAL _system
275   0000              	GLOBAL _strtoul_callee
276   0000              	GLOBAL _strtoul
277   0000              	GLOBAL _strtol_callee
278   0000              	GLOBAL _strtol
279   0000              	GLOBAL _strtof_callee
280   0000              	GLOBAL _strtof
281   0000              	GLOBAL _strtod_callee
282   0000              	GLOBAL _strtod
283   0000              	GLOBAL _srand_fastcall
284   0000              	GLOBAL _srand
285   0000              	GLOBAL _rand
286   0000              	GLOBAL _quick_exit_fastcall
287   0000              	GLOBAL _quick_exit
288   0000              	GLOBAL _qsort_callee
289   0000              	GLOBAL _qsort
290   0000              	GLOBAL _ltoa_callee
291   0000              	GLOBAL _ltoa
292   0000              	GLOBAL _labs_fastcall
293   0000              	GLOBAL _labs
294   0000              	GLOBAL _itoa_callee
295   0000              	GLOBAL _itoa
296   0000              	GLOBAL _ftoh_callee
297   0000              	GLOBAL _ftoh
298   0000              	GLOBAL _ftog_callee
299   0000              	GLOBAL _ftog
300   0000              	GLOBAL _ftoe_callee
301   0000              	GLOBAL _ftoe
302   0000              	GLOBAL _ftoa_callee
303   0000              	GLOBAL _ftoa
304   0000              	GLOBAL _exit_fastcall
305   0000              	GLOBAL _exit
306   0000              	GLOBAL _dtoh_callee
307   0000              	GLOBAL _dtoh
308   0000              	GLOBAL _dtog_callee
309   0000              	GLOBAL _dtog
310   0000              	GLOBAL _dtoe_callee
311   0000              	GLOBAL _dtoe
312   0000              	GLOBAL _dtoa_callee
313   0000              	GLOBAL _dtoa
314   0000              	GLOBAL _bsearch_callee
315   0000              	GLOBAL _bsearch
316   0000              	GLOBAL _atol_fastcall
317   0000              	GLOBAL _atol
318   0000              	GLOBAL _atoi_fastcall
319   0000              	GLOBAL _atoi
320   0000              	GLOBAL _atof_fastcall
321   0000              	GLOBAL _atof
322   0000              	GLOBAL _atexit_fastcall
323   0000              	GLOBAL _atexit
324   0000              	GLOBAL _at_quick_exit_fastcall
325   0000              	GLOBAL _at_quick_exit
326   0000              	GLOBAL _abs_fastcall
327   0000              	GLOBAL _abs
328   0000              	GLOBAL _abort
329   0000              	GLOBAL __strtou__callee
330   0000              	GLOBAL __strtou_
331   0000              	GLOBAL __strtoi__callee
332   0000              	GLOBAL __strtoi_
333   0000              	GLOBAL __random_uniform_xor_8__fastcall
334   0000              	GLOBAL __random_uniform_xor_8_
335   0000              	GLOBAL __random_uniform_xor_32__fastcall
336   0000              	GLOBAL __random_uniform_xor_32_
337   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
338   0000              	GLOBAL __random_uniform_cmwc_8_
339   0000              	GLOBAL __shellsort__callee
340   0000              	GLOBAL __shellsort_
341   0000              	GLOBAL __quicksort__callee
342   0000              	GLOBAL __quicksort_
343   0000              	GLOBAL __insertion_sort__callee
344   0000              	GLOBAL __insertion_sort_
345   0000              	GLOBAL __ldivu__callee
346   0000              	GLOBAL __ldivu_
347   0000              	GLOBAL __ldiv__callee
348   0000              	GLOBAL __ldiv_
349   0000              	GLOBAL __divu__callee
350   0000              	GLOBAL __divu_
351   0000              	GLOBAL __div__callee
352   0000              	GLOBAL __div_
353   0000              	GLOBAL _NIRVANAP_drawTW_raw_callee
354   0000              	GLOBAL _NIRVANAP_drawTW_raw
355   0000              	GLOBAL _NIRVANAP_drawTW_callee
356   0000              	GLOBAL _NIRVANAP_drawTW
357   0000              	GLOBAL _NIRVANAP_drawW_raw_callee
358   0000              	GLOBAL _NIRVANAP_drawW_raw
359   0000              	GLOBAL _NIRVANAP_drawW_callee
360   0000              	GLOBAL _NIRVANAP_drawW
361   0000              	GLOBAL _NIRVANAP_spriteT_callee
362   0000              	GLOBAL _NIRVANAP_spriteT
363   0000              	GLOBAL _NIRVANAP_fillC_callee
364   0000              	GLOBAL _NIRVANAP_fillC
365   0000              	GLOBAL _NIRVANAP_readC_callee
366   0000              	GLOBAL _NIRVANAP_readC
367   0000              	GLOBAL _NIRVANAP_paintC_callee
368   0000              	GLOBAL _NIRVANAP_paintC
369   0000              	GLOBAL _NIRVANAP_printC_callee
370   0000              	GLOBAL _NIRVANAP_printC
371   0000              	GLOBAL _NIRVANAP_fillT_raw_callee
372   0000              	GLOBAL _NIRVANAP_fillT_raw
373   0000              	GLOBAL _NIRVANAP_fillT_callee
374   0000              	GLOBAL _NIRVANAP_fillT
375   0000              	GLOBAL _NIRVANAP_drawT_raw_callee
376   0000              	GLOBAL _NIRVANAP_drawT_raw
377   0000              	GLOBAL _NIRVANAP_drawT_callee
378   0000              	GLOBAL _NIRVANAP_drawT
379   0000              	GLOBAL _NIRVANAP_stop
380   0000              	GLOBAL _NIRVANAP_start
381   0000              	GLOBAL _debug3
382   0000              	GLOBAL _debug2
383   0000              	GLOBAL _debug
384   0000              	GLOBAL _zx_print_str
385   0000              	GLOBAL _zx_print_int
386   0000              	GLOBAL _zx_print_chr
387   0000              	GLOBAL _zx_print_bonus_time
388   0000              	GLOBAL _zx_isr
389   0000              	GLOBAL _z80_otdr_callee
390   0000              	GLOBAL _z80_otdr
391   0000              	GLOBAL _z80_otir_callee
392   0000              	GLOBAL _z80_otir
393   0000              	GLOBAL _z80_outp_callee
394   0000              	GLOBAL _z80_outp
395   0000              	GLOBAL _z80_indr_callee
396   0000              	GLOBAL _z80_indr
397   0000              	GLOBAL _z80_inir_callee
398   0000              	GLOBAL _z80_inir
399   0000              	GLOBAL _z80_inp_fastcall
400   0000              	GLOBAL _z80_inp
401   0000              	GLOBAL _z80_set_int_state_fastcall
402   0000              	GLOBAL _z80_set_int_state
403   0000              	GLOBAL _z80_get_int_state
404   0000              	GLOBAL _z80_delay_tstate_fastcall
405   0000              	GLOBAL _z80_delay_tstate
406   0000              	GLOBAL _z80_delay_ms_fastcall
407   0000              	GLOBAL _z80_delay_ms
408   0000              	GLOBAL _im2_remove_generic_callback_callee
409   0000              	GLOBAL _im2_remove_generic_callback
410   0000              	GLOBAL _im2_prepend_generic_callback_callee
411   0000              	GLOBAL _im2_prepend_generic_callback
412   0000              	GLOBAL _im2_append_generic_callback_callee
413   0000              	GLOBAL _im2_append_generic_callback
414   0000              	GLOBAL _im2_create_generic_isr_8080_callee
415   0000              	GLOBAL _im2_create_generic_isr_8080
416   0000              	GLOBAL _im2_create_generic_isr_callee
417   0000              	GLOBAL _im2_create_generic_isr
418   0000              	GLOBAL _im2_install_isr_callee
419   0000              	GLOBAL _im2_install_isr
420   0000              	GLOBAL _im2_init_fastcall
421   0000              	GLOBAL _im2_init
422   0000              	GLOBAL _intrinsic_swap_word_32_fastcall
423   0000              	GLOBAL _intrinsic_swap_word_32
424   0000              	GLOBAL _intrinsic_swap_endian_32_fastcall
425   0000              	GLOBAL _intrinsic_swap_endian_32
426   0000              	GLOBAL _intrinsic_swap_endian_16_fastcall
427   0000              	GLOBAL _intrinsic_swap_endian_16
428   0000              	GLOBAL _intrinsic_return_de
429   0000              	GLOBAL _intrinsic_return_bc
430   0000              	GLOBAL _intrinsic_exx
431   0000              	GLOBAL _intrinsic_ex_de_hl
432   0000              	GLOBAL _intrinsic_nop
433   0000              	GLOBAL _intrinsic_im_2
434   0000              	GLOBAL _intrinsic_im_1
435   0000              	GLOBAL _intrinsic_im_0
436   0000              	GLOBAL _intrinsic_retn
437   0000              	GLOBAL _intrinsic_reti
438   0000              	GLOBAL _intrinsic_halt
439   0000              	GLOBAL _intrinsic_ei
440   0000              	GLOBAL _intrinsic_di
441   0000              	GLOBAL _intrinsic_stub
442   0000              	GLOBAL _intrinsic_outi
443   0000              	GLOBAL _intrinsic_ldi
444   0000              	GLOBAL _zx_pattern_fill_callee
445   0000              	GLOBAL _zx_pattern_fill
446   0000              	GLOBAL _zx_saddrpup_fastcall
447   0000              	GLOBAL _zx_saddrpup
448   0000              	GLOBAL _zx_saddrpright_callee
449   0000              	GLOBAL _zx_saddrpright
450   0000              	GLOBAL _zx_saddrpleft_callee
451   0000              	GLOBAL _zx_saddrpleft
452   0000              	GLOBAL _zx_saddrpdown_fastcall
453   0000              	GLOBAL _zx_saddrpdown
454   0000              	GLOBAL _zx_saddrcup_fastcall
455   0000              	GLOBAL _zx_saddrcup
456   0000              	GLOBAL _zx_saddrcright_fastcall
457   0000              	GLOBAL _zx_saddrcright
458   0000              	GLOBAL _zx_saddrcleft_fastcall
459   0000              	GLOBAL _zx_saddrcleft
460   0000              	GLOBAL _zx_saddrcdown_fastcall
461   0000              	GLOBAL _zx_saddrcdown
462   0000              	GLOBAL _zx_saddr2py_fastcall
463   0000              	GLOBAL _zx_saddr2py
464   0000              	GLOBAL _zx_saddr2px_fastcall
465   0000              	GLOBAL _zx_saddr2px
466   0000              	GLOBAL _zx_saddr2cy_fastcall
467   0000              	GLOBAL _zx_saddr2cy
468   0000              	GLOBAL _zx_saddr2cx_fastcall
469   0000              	GLOBAL _zx_saddr2cx
470   0000              	GLOBAL _zx_saddr2aaddr_fastcall
471   0000              	GLOBAL _zx_saddr2aaddr
472   0000              	GLOBAL _zx_py2saddr_fastcall
473   0000              	GLOBAL _zx_py2saddr
474   0000              	GLOBAL _zx_py2aaddr_fastcall
475   0000              	GLOBAL _zx_py2aaddr
476   0000              	GLOBAL _zx_pxy2saddr_callee
477   0000              	GLOBAL _zx_pxy2saddr
478   0000              	GLOBAL _zx_pxy2aaddr_callee
479   0000              	GLOBAL _zx_pxy2aaddr
480   0000              	GLOBAL _zx_px2bitmask_fastcall
481   0000              	GLOBAL _zx_px2bitmask
482   0000              	GLOBAL _zx_cy2saddr_fastcall
483   0000              	GLOBAL _zx_cy2saddr
484   0000              	GLOBAL _zx_cy2aaddr_fastcall
485   0000              	GLOBAL _zx_cy2aaddr
486   0000              	GLOBAL _zx_cxy2saddr_callee
487   0000              	GLOBAL _zx_cxy2saddr
488   0000              	GLOBAL _zx_cxy2aaddr_callee
489   0000              	GLOBAL _zx_cxy2aaddr
490   0000              	GLOBAL _zx_bitmask2px_fastcall
491   0000              	GLOBAL _zx_bitmask2px
492   0000              	GLOBAL _zx_aaddrcup_fastcall
493   0000              	GLOBAL _zx_aaddrcup
494   0000              	GLOBAL _zx_aaddrcright_fastcall
495   0000              	GLOBAL _zx_aaddrcright
496   0000              	GLOBAL _zx_aaddrcleft_fastcall
497   0000              	GLOBAL _zx_aaddrcleft
498   0000              	GLOBAL _zx_aaddrcdown_fastcall
499   0000              	GLOBAL _zx_aaddrcdown
500   0000              	GLOBAL _zx_aaddr2saddr_fastcall
501   0000              	GLOBAL _zx_aaddr2saddr
502   0000              	GLOBAL _zx_aaddr2py_fastcall
503   0000              	GLOBAL _zx_aaddr2py
504   0000              	GLOBAL _zx_aaddr2px_fastcall
505   0000              	GLOBAL _zx_aaddr2px
506   0000              	GLOBAL _zx_aaddr2cy_fastcall
507   0000              	GLOBAL _zx_aaddr2cy
508   0000              	GLOBAL _zx_aaddr2cx_fastcall
509   0000              	GLOBAL _zx_aaddr2cx
510   0000              	GLOBAL _zx_visit_wc_pix_callee
511   0000              	GLOBAL _zx_visit_wc_pix
512   0000              	GLOBAL _zx_visit_wc_attr_callee
513   0000              	GLOBAL _zx_visit_wc_attr
514   0000              	GLOBAL _zx_scroll_wc_up_pix_callee
515   0000              	GLOBAL _zx_scroll_wc_up_pix
516   0000              	GLOBAL _zx_scroll_wc_up_attr_callee
517   0000              	GLOBAL _zx_scroll_wc_up_attr
518   0000              	GLOBAL _zx_scroll_wc_up_callee
519   0000              	GLOBAL _zx_scroll_wc_up
520   0000              	GLOBAL _zx_scroll_up_pix_callee
521   0000              	GLOBAL _zx_scroll_up_pix
522   0000              	GLOBAL _zx_scroll_up_attr_callee
523   0000              	GLOBAL _zx_scroll_up_attr
524   0000              	GLOBAL _zx_scroll_up_callee
525   0000              	GLOBAL _zx_scroll_up
526   0000              	GLOBAL _zx_cls_wc_pix_callee
527   0000              	GLOBAL _zx_cls_wc_pix
528   0000              	GLOBAL _zx_cls_wc_attr_callee
529   0000              	GLOBAL _zx_cls_wc_attr
530   0000              	GLOBAL _zx_cls_wc_callee
531   0000              	GLOBAL _zx_cls_wc
532   0000              	GLOBAL _zx_cls_pix_fastcall
533   0000              	GLOBAL _zx_cls_pix
534   0000              	GLOBAL _zx_cls_attr_fastcall
535   0000              	GLOBAL _zx_cls_attr
536   0000              	GLOBAL _zx_cls_fastcall
537   0000              	GLOBAL _zx_cls
538   0000              	GLOBAL _zx_border_fastcall
539   0000              	GLOBAL _zx_border
540   0000              	GLOBAL _zx_tape_verify_block_callee
541   0000              	GLOBAL _zx_tape_verify_block
542   0000              	GLOBAL _zx_tape_save_block_callee
543   0000              	GLOBAL _zx_tape_save_block
544   0000              	GLOBAL _zx_tape_load_block_callee
545   0000              	GLOBAL _zx_tape_load_block
546   0000              	GLOBAL _spr_destroy
547   0000              	GLOBAL _spr_colision_boss
548   0000              	GLOBAL _spr_colision_b
549   0000              	GLOBAL _spr_unflattenP1
550   0000              	GLOBAL _spr_flatten
551   0000              	GLOBAL _spr_btile_paint_back
552   0000              	GLOBAL _spr_bullet_explode
553   0000              	GLOBAL _spr_init_effects
554   0000              	GLOBAL _spr_turn_horizontal
555   0000              	GLOBAL _spr_bullets_play
556   0000              	GLOBAL _spr_play_anim
557   0000              	GLOBAL _spr_add_anim
558   0000              	GLOBAL _spr_clear_scr
559   0000              	GLOBAL _spr_page_map
560   0000              	GLOBAL _spr_page_down
561   0000              	GLOBAL _spr_page_up
562   0000              	GLOBAL _spr_page_right
563   0000              	GLOBAL _spr_page_left
564   0000              	GLOBAL _spr_tile_paint
565   0000              	GLOBAL _spr_draw_index
566   0000              	GLOBAL _spr_brick_anim
567   0000              	GLOBAL _spr_back_repaint
568   0000              	GLOBAL _spr_tile_dir
569   0000              	GLOBAL _spr_tile
570   0000              	GLOBAL _spr_paint_player
571   0000              	GLOBAL _spr_paint
572   0000              	GLOBAL _spr_move_left
573   0000              	GLOBAL _spr_move_right
574   0000              	GLOBAL _spr_move_horizontal
575   0000              	GLOBAL _spr_move_down
576   0000              	GLOBAL _spr_move_up
577   0000              	GLOBAL _spr_set_right
578   0000              	GLOBAL _spr_set_left
579   0000              	GLOBAL _spr_set_down
580   0000              	GLOBAL _spr_set_up
581   0000              	GLOBAL _spr_calc_index
582   0000              	GLOBAL _spr_chktime
583   0000              	GLOBAL _game_match_back_strict
584   0000              	GLOBAL _game_match_back
585   0000              	GLOBAL _game_attribs
586   0000              	GLOBAL _game_boss_clear
587   0000              	GLOBAL _game_boss_kill
588   0000              	GLOBAL _game_obj_clear
589   0000              	GLOBAL _game_obj_chk
590   0000              	GLOBAL _game_obj_set
591   0000              	GLOBAL _game_shoot_fire_boss
592   0000              	GLOBAL _game_shoot_fire
593   0000              	GLOBAL _game_add_enemy
594   0000              	GLOBAL _game_print_header
595   0000              	GLOBAL _game_check_time
596   0000              	GLOBAL _game_rotate_attrib_osd
597   0000              	GLOBAL _game_rotate_attrib
598   0000              	GLOBAL _game_colour_message
599   0000              	GLOBAL _game_paint_attrib
600   0000              	GLOBAL _game_print_score
601   0000              	GLOBAL _game_check_cell
602   0000              	GLOBAL _game_check_map
603   0000              	GLOBAL _game_loop
604   0000              	GLOBAL _game_round_init
605   0000              	GLOBAL _game_set_checkpoint
606   0000              	GLOBAL _game_start_timer
607   0000              	GLOBAL _game_update_stats
608   0000              	GLOBAL _game_print_footer
609   0000              	GLOBAL _game_fill_row
610   0000              	GLOBAL _game_fps
611   0000              	GLOBAL _game_respawn
612   0000              	GLOBAL _game_draw_screen
613   0000              	GLOBAL _boss_draw_frame
614   0000              	GLOBAL _boss_draw
615   0000              	GLOBAL _boss_turn
616   0000              	GLOBAL _enemy_avoid_dead
617   0000              	GLOBAL _enemy_avoid_fall
618   0000              	GLOBAL _enemy_kill
619   0000              	GLOBAL _enemy_respawn
620   0000              	GLOBAL _enemy_init
621   0000              	GLOBAL _enemy_move
622   0000              	GLOBAL _enemy_turn
623   0000              	GLOBAL _enemy_static
624   0000              	GLOBAL _enemy_walk
625   0000              	GLOBAL _enemy_horizontal
626   0000              	GLOBAL _enemy_vertical
627   0000              	GLOBAL _ay_reset
628   0000              	GLOBAL _ay_song_stop
629   0000              	GLOBAL _ay_song_play
630   0000              	GLOBAL _ay_fx_stop
631   0000              	GLOBAL _ay_fx_play
632   0000              	GLOBAL _ay_is_playing
633   0000              	GLOBAL _audio_menu
634   0000              	GLOBAL _audio_game_end
635   0000              	GLOBAL _audio_level_complete
636   0000              	GLOBAL _audio_level_start
637   0000              	GLOBAL _audio_lotr_lose_a_life
638   0000              	GLOBAL _audio_pierto_abierta
639   0000              	GLOBAL _audio_sin_mana
640   0000              	GLOBAL _audio_magia1
641   0000              	GLOBAL _audio_coin
642   0000              	GLOBAL _audio_golpe
643   0000              	GLOBAL _audio_salto
644   0000              	GLOBAL _audio_efecto
645   0000              	GLOBAL _audio_disparo2
646   0000              	GLOBAL _audio_disparo1
647   0000              	GLOBAL _audio_explosion1
648   0000              	GLOBAL _audio_explosion
649   0000              	GLOBAL _test_func
650   0000              	GLOBAL _test_proc
651   0000              	GLOBAL _in_mouse_kempston_wheel_delta
652   0000              	GLOBAL _in_mouse_kempston_wheel
653   0000              	GLOBAL _in_mouse_kempston_callee
654   0000              	GLOBAL _in_mouse_kempston
655   0000              	GLOBAL _in_mouse_kempston_setpos_callee
656   0000              	GLOBAL _in_mouse_kempston_setpos
657   0000              	GLOBAL _in_mouse_kempston_reset
658   0000              	GLOBAL _in_mouse_kempston_init
659   0000              	GLOBAL _in_mouse_amx_wheel_delta
660   0000              	GLOBAL _in_mouse_amx_wheel
661   0000              	GLOBAL _in_mouse_amx_callee
662   0000              	GLOBAL _in_mouse_amx
663   0000              	GLOBAL _in_mouse_amx_setpos_callee
664   0000              	GLOBAL _in_mouse_amx_setpos
665   0000              	GLOBAL _in_mouse_amx_reset
666   0000              	GLOBAL _in_mouse_amx_init_callee
667   0000              	GLOBAL _in_mouse_amx_init
668   0000              	GLOBAL _in_stick_sinclair2
669   0000              	GLOBAL _in_stick_sinclair1
670   0000              	GLOBAL _in_stick_kempston
671   0000              	GLOBAL _in_stick_fuller
672   0000              	GLOBAL _in_stick_cursor
673   0000              	GLOBAL _in_stick_keyboard_fastcall
674   0000              	GLOBAL _in_stick_keyboard
675   0000              	GLOBAL _in_wait_nokey
676   0000              	GLOBAL _in_wait_key
677   0000              	GLOBAL _in_test_key
678   0000              	GLOBAL _in_pause_fastcall
679   0000              	GLOBAL _in_pause
680   0000              	GLOBAL _in_key_scancode_fastcall
681   0000              	GLOBAL _in_key_scancode
682   0000              	GLOBAL _in_key_pressed_fastcall
683   0000              	GLOBAL _in_key_pressed
684   0000              	GLOBAL _in_inkey
685   0000              	GLOBAL _NIRVANAP_CHAR_TABLE
686   0000              	GLOBAL _NIRVANAP_WIDE_IMAGES
687   0000              	GLOBAL _NIRVANAP_TILE_IMAGES
688   0000              	GLOBAL _NIRVANAP_HOLE
689   0000              	GLOBAL _NIRVANAP_ISR_HOOK
690   0000              	GLOBAL _scan_map
691   0000              	GLOBAL _key_map
692   0000              	GLOBAL _player_lvl_table
693   0000              	GLOBAL _stp_row
694   0000              	GLOBAL _stp_col
695   0000              	GLOBAL _stp_tile
696   0000              	GLOBAL _map_paper_last_a
697   0000              	GLOBAL _map_paper_last
698   0000              	GLOBAL _map_paper_clr
699   0000              	GLOBAL _map_paper
700   0000              	GLOBAL _draw_count
701   0000              	GLOBAL _g_player_hit_right
702   0000              	GLOBAL _g_player_hit_left
703   0000              	GLOBAL _bullet_count
704   0000              	GLOBAL _spr_hack
705   0000              	GLOBAL _boss_stat
706   0000              	GLOBAL _boss_time_fire
707   0000              	GLOBAL _boss_time
708   0000              	GLOBAL _boss_tile
709   0000              	GLOBAL _boss_inc
710   0000              	GLOBAL _boss_col
711   0000              	GLOBAL _boss_lin
712   0000              	GLOBAL _bullet
713   0000              	GLOBAL _bullet_vel
714   0000              	GLOBAL _bullet_frames
715   0000              	GLOBAL _bullet_colint
716   0000              	GLOBAL _bullet_dir
717   0000              	GLOBAL _bullet_tile
718   0000              	GLOBAL _bullet_col
719   0000              	GLOBAL _bullet_lin
720   0000              	GLOBAL _bullet_col0
721   0000              	GLOBAL _bullet_lin0
722   0000              	GLOBAL _bullet_max
723   0000              	GLOBAL _bullet_class
724   0000              	GLOBAL _mush_class
725   0000              	GLOBAL _mush_index
726   0000              	GLOBAL _anim_count
727   0000              	GLOBAL _anim_respanwn
728   0000              	GLOBAL _anim_loop
729   0000              	GLOBAL _anim_end
730   0000              	GLOBAL _anim_int
731   0000              	GLOBAL _anim_tile
732   0000              	GLOBAL _anim_col
733   0000              	GLOBAL _anim_lin
734   0000              	GLOBAL _map_heigth
735   0000              	GLOBAL _map_width
736   0000              	GLOBAL _scr_curr
737   0000              	GLOBAL _sprite_kind
738   0000              	GLOBAL _scr_obj1
739   0000              	GLOBAL _scr_obj0
740   0000              	GLOBAL _scr_map
741   0000              	GLOBAL _sprite_speed_alt
742   0000              	GLOBAL _spr_init
743   0000              	GLOBAL _spr_map_tile
744   0000              	GLOBAL _sprite_frames
745   0000              	GLOBAL _sprite_speed
746   0000              	GLOBAL _screen_ink
747   0000              	GLOBAL _screen_paper
748   0000              	GLOBAL _player_onstair
749   0000              	GLOBAL _game_start_scr
750   0000              	GLOBAL _game_respawn_tile
751   0000              	GLOBAL _game_respawn_index
752   0000              	GLOBAL _game_respawn_time
753   0000              	GLOBAL _game_score_top
754   0000              	GLOBAL _player_coins
755   0000              	GLOBAL _player_lives
756   0000              	GLOBAL _game_over
757   0000              	GLOBAL _game_sound
758   0000              	GLOBAL _game_inf_lives
759   0000              	GLOBAL _game_inmune
760   0000              	GLOBAL _sprite_curr_index
761   0000              	GLOBAL _spr_count
762   0000              	GLOBAL _bullet_time
763   0000              	GLOBAL _anim_time
764   0000              	GLOBAL _frame_time
765   0000              	GLOBAL _curr_time
766   0000              	GLOBAL _s_state
767   0000              	GLOBAL _attrib_osd
768   0000              	GLOBAL _attrib_hl
769   0000              	GLOBAL _attrib
770   0000              	GLOBAL _zx_val_asm
771   0000              	GLOBAL _enemies
772   0000              	GLOBAL _tmp_ui
773   0000              	GLOBAL _tmp_sc
774   0000              	GLOBAL _tmp_uc
775   0000              	GLOBAL _tmp1
776   0000              	GLOBAL _tmp0
777   0000              	GLOBAL _tmp
778   0000              	GLOBAL _index1
779   0000              	GLOBAL _index0
780   0000              	GLOBAL _loop_count
781   0000              	GLOBAL _s_class
782   0000              	GLOBAL _s_col1
783   0000              	GLOBAL _s_col0
784   0000              	GLOBAL _s_lin1
785   0000              	GLOBAL _s_lin0
786   0000              	GLOBAL _s_tile1
787   0000              	GLOBAL _s_tile0
788   0000              	GLOBAL _player_brick_time
789   0000              	GLOBAL _player_hit_count
790   0000              	GLOBAL _game_debug
791   0000              	GLOBAL _sprite_horizontal_check
792   0000              	GLOBAL _sprite_on_air
793   0000              	GLOBAL _sprite
794   0000              	GLOBAL _fps
795   0000              	GLOBAL _menu_curr_sel
796   0000              	GLOBAL _game_control_mode
797   0000              	GLOBAL _game_respawn_curr_time
798   0000              	GLOBAL _game_round_up
799   0000              	GLOBAL _game_mush_count
800   0000              	GLOBAL _game_boss_fix
801   0000              	GLOBAL _game_boss_hit
802   0000              	GLOBAL _game_boss_alive
803   0000              	GLOBAL _game_boss
804   0000              	GLOBAL _game_world
805   0000              	GLOBAL _game_gravity
806   0000              	GLOBAL _player_onfire
807   0000              	GLOBAL _player_anim_stair
808   0000              	GLOBAL _player_hit_time
809   0000              	GLOBAL _game_checkpoint_scr
810   0000              	GLOBAL _game_checkpoint_lin
811   0000              	GLOBAL _game_checkpoint_col
812   0000              	GLOBAL _player_lin_scr
813   0000              	GLOBAL _player_col_scr
814   0000              	GLOBAL _player_lvl
815   0000              	GLOBAL _player_int
816   0000              	GLOBAL _player_str
817   0000              	GLOBAL _player_max_vita
818   0000              	GLOBAL _player_max_mana
819   0000              	GLOBAL _player_vita
820   0000              	GLOBAL _player_mana
821   0000              	GLOBAL _player_keys
822   0000              	GLOBAL _player_vel_inc
823   0000              	GLOBAL _player_vel_y1
824   0000              	GLOBAL _player_vel_y0
825   0000              	GLOBAL _player_vel_y
826   0000              	GLOBAL _player_vel_x
827   0000              	GLOBAL _player_score
828   0000              	GLOBAL _last_time
829   0000              	GLOBAL _spr_timer
830   0000              	GLOBAL _jump_lin
831   0000              	GLOBAL _player_hit_col
832   0000              	GLOBAL _player_hit_lin
833   0000              	GLOBAL _colint
834   0000              	GLOBAL _col
835   0000              	GLOBAL _tbuffer
836   0000              	GLOBAL _lin
837   0000              	GLOBAL _tile
838   0000              	GLOBAL _state_a
839   0000              	GLOBAL _state
840   0000              	GLOBAL _class
841   0000              	GLOBAL _dirs_alt
842   0000              	GLOBAL _dirs
843   0000              	GLOBAL _k2
844   0000              	GLOBAL _k1
845   0000              	GLOBAL _joyfunc2
846   0000              	GLOBAL _joyfunc1
847   0000              	GLOBAL _btiles
848   0000              	GLOBAL _spec128
849   0000              	GLOBAL _GLOBAL_ZX_PORT_7FFD
850   0000              	GLOBAL _GLOBAL_ZX_PORT_1FFD
851   0000              	GLOBAL _GLOBAL_ZX_PORT_FE
852   0000              	GLOBAL _ay_song_06_ciel
853   0000              	GLOBAL _ay_song_04_sunflower
854   0000              	GLOBAL _ay_song_04_lotr_level_start
855   0000              	GLOBAL _ay_song_04_lotr_level_complete
856   0000              	GLOBAL _ay_song_04_lotr_lose_a_life
857   0000              	GLOBAL _ay_song_04_lotr
858   0000              	GLOBAL _ay_fx_06_explosion1
859   0000              	GLOBAL _ay_fx_06_efecto
860   0000              	GLOBAL _ay_fx_06_disparo2
861   0000              	GLOBAL _ay_fx_06_disparo1
862   0000              	GLOBAL _ay_fx_04_sin_mana
863   0000              	GLOBAL _ay_fx_04_salto
864   0000              	GLOBAL _ay_fx_04_pierto_abierta
865   0000              	GLOBAL _ay_fx_04_magia1
866   0000              	GLOBAL _ay_fx_04_golpe
867   0000              	GLOBAL _ay_fx_04_explosion
868   0000              	GLOBAL _ay_fx_04_dano_por_toque
869   0000              	GLOBAL _ay_fx_04_coin
870   0000              	GLOBAL _world0_h
871   0000              	GLOBAL _world0_w
872   0000              	GLOBAL _world0
873   0000              	GLOBAL _paper0
874   0000              	GLOBAL _lenght0
875   0000              	GLOBAL _start_scr0
876   0000              ;--------------------------------------------------------
877   0000              ; special function registers
878   0000              ;--------------------------------------------------------
879   0000              defc _IO_FE	=	0x00fe
880   0000              defc _IO_1FFD	=	0x1ffd
881   0000              defc _IO_7FFD	=	0x7ffd
882   0000              ;--------------------------------------------------------
883   0000              ; ram data
884   0000              ;--------------------------------------------------------
885   0000              	SECTION bss_compiler
886   0000              ;--------------------------------------------------------
887   0000              ; ram data
888   0000              ;--------------------------------------------------------
889   0000              
890   0000              IF 0
891   0000              
892   0000              ; .area _INITIALIZED removed by z88dk
893   0000              
894   0000              
895   0000              ENDIF
896   0000              
897   0000              ;--------------------------------------------------------
898   0000              ; absolute external ram data
899   0000              ;--------------------------------------------------------
900   0000              	SECTION IGNORE
901   0000              ;--------------------------------------------------------
902   0000              ; global & static initialisations
903   0000              ;--------------------------------------------------------
904   0000              	SECTION code_crt_init
905   0000              ;--------------------------------------------------------
906   0000              ; Home
907   0000              ;--------------------------------------------------------
908   0000              	SECTION IGNORE
909   0000              ;--------------------------------------------------------
910   0000              ; code
911   0000              ;--------------------------------------------------------
912   0000              	SECTION code_compiler
913   0000              ;	---------------------------------
914   0000              ; Function player_init
915   0000              ; ---------------------------------
916   0000              _player_init:
917   0000  CD 00 00    	call	___sdcc_enter_ix
918   0003  21 07 00    	ld	hl, +(_class + 0x0007)
919   0006  36 00       	ld	(hl),0x00
920   0008  21 07 00    	ld	hl, +(_tile + 0x0007)
921   000B  DD 7E 06    	ld	a,(ix+6)
922   000E  77          	ld	(hl), a
923   000F  21 07 00    	ld	hl, +(_lin + 0x0007)
924   0012  DD 7E 04    	ld	a,(ix+4)
925   0015  77          	ld	(hl), a
926   0016  21 07 00    	ld	hl, +(_col + 0x0007)
927   0019  DD 7E 05    	ld	a,(ix+5)
928   001C  77          	ld	(hl), a
929   001D  21 07 00    	ld	hl, +(_colint + 0x0007)
930   0020  36 00       	ld	(hl),0x00
931   0022  21 07 00    	ld	hl, +(_state + 0x0007)
932   0025  36 00       	ld	(hl),0x00
933   0027  01 07 00    	ld	bc,_state_a+7
934   002A  AF          	xor	a, a
935   002B  02          	ld	(bc), a
936   002C  21 07 00    	ld	hl, +(_jump_lin + 0x0007)
937   002F  DD 7E 04    	ld	a,(ix+4)
938   0032  77          	ld	(hl), a
939   0033  ED 5B 00 00 	ld	de,(_curr_time)
940   0037  ED 53 0E 00 	ld	(_last_time + 0x000e),de
941   003B  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
942   003E  36 00       	ld	(hl),0x00
943   0040  0A          	ld	a, (bc)
944   0041  F6 11       	or	a,+(0x01|0x10)
945   0043  02          	ld	(bc),a
946   0044  21 00 00    	ld	hl,_player_hit_col
947   0047  36 00       	ld	(hl),0x00
948   0049  21 00 00    	ld	hl,_player_hit_lin
949   004C  36 00       	ld	(hl),0x00
950   004E  21 00 00    	ld	hl,_player_onstair
951   0051  36 00       	ld	(hl),0x00
952   0053  21 00 00    	ld	hl,_player_onfire
953   0056  36 00       	ld	(hl),0x00
954   0058  DD 66 05    	ld	h,(ix+5)
955   005B  DD 6E 04    	ld	l,(ix+4)
956   005E  E5          	push	hl
957   005F  DD 56 06    	ld	d,(ix+6)
958   0062  1E 07       	ld	e,0x07
959   0064  D5          	push	de
960   0065  CD 00 00    	call	_NIRVANAP_spriteT_callee
961   0068  DD E1       	pop	ix
962   006A  C9          	ret
963   006B              	SECTION code_compiler
964   006B              ;	---------------------------------
965   006B              ; Function player_turn
966   006B              ; ---------------------------------
967   006B              _player_turn:
968   006B  21 00 00    	ld	hl,_sprite
969   006E  CD 00 00    	call	_spr_chktime
970   0071  7D          	ld	a, l
971   0072  B7          	or	a, a
972   0073  C8          	ret	Z
973   0074  21 00 00    	ld	hl,_k1
974   0077  E5          	push	hl
975   0078  2A 00 00    	ld	hl,(_joyfunc1)
976   007B  CD 00 00    	call	___sdcc_call_hl
977   007E  F1          	pop	af
978   007F  7D          	ld	a,l
979   0080  32 00 00    	ld	(_dirs),a
980   0083  21 00 00    	ld	hl,_k2
981   0086  E5          	push	hl
982   0087  2A 00 00    	ld	hl,(_joyfunc2)
983   008A  CD 00 00    	call	___sdcc_call_hl
984   008D  F1          	pop	af
985   008E  7D          	ld	a,l
986   008F  32 00 00    	ld	(_dirs_alt),a
987   0092  3A 07 00    	ld	a,(_lin + 0x0007)
988   0095  32 00 00    	ld	(_s_lin0),a
989   0098  3A 07 00    	ld	a,(_col + 0x0007)
990   009B  32 00 00    	ld	(_s_col0),a
991   009E  3A 07 00    	ld	a,(_state + 0x0007)
992   00A1  32 00 00    	ld	(_s_state),a
993   00A4  21 00 00    	ld	hl,_s_class
994   00A7  36 00       	ld	(hl),0x00
995   00A9  CD B6 00    	call	_player_move
996   00AC  CD F0 03    	call	_player_collision
997   00AF  3A 00 00    	ld	a,(_s_state)
998   00B2  32 07 00    	ld	((_state + 0x0007)),a
999   00B5  C9          	ret
1000  00B6              	SECTION code_compiler
1001  00B6              ;	---------------------------------
1002  00B6              ; Function player_move
1003  00B6              ; ---------------------------------
1004  00B6              _player_move:
1005  00B6  CD AA 03    	call	_player_fire
1006  00B9  21 00 00    	ld	hl,_s_state
1007  00BC  CB 46       	bit	0, (hl)
1008  00BE  20 07       	jr	NZ,l_player_move_00105
1009  00C0  21 00 00    	ld	hl,_s_state
1010  00C3  CB 4E       	bit	1, (hl)
1011  00C5  28 0A       	jr	Z,l_player_move_00106
1012  00C7              l_player_move_00105:
1013  00C7  21 00 00    	ld	hl,_sprite_on_air
1014  00CA  36 01       	ld	(hl),0x01
1015  00CC  CD 41 0E    	call	_player_move_jump
1016  00CF  18 17       	jr	l_player_move_00107
1017  00D1              l_player_move_00106:
1018  00D1  21 00 00    	ld	hl,_sprite_on_air
1019  00D4  36 00       	ld	(hl),0x00
1020  00D6  3A 00 00    	ld	a,(_player_onfire)
1021  00D9  B7          	or	a, a
1022  00DA  20 03       	jr	NZ,l_player_move_00102
1023  00DC  CD 35 02    	call	_player_move_input
1024  00DF              l_player_move_00102:
1025  00DF  3A 00 00    	ld	a,(_player_onstair)
1026  00E2  B7          	or	a, a
1027  00E3  20 03       	jr	NZ,l_player_move_00107
1028  00E5  CD C1 0C    	call	_player_check_floor
1029  00E8              l_player_move_00107:
1030  00E8  3A 00 00    	ld	a,(_player_onfire)
1031  00EB  B7          	or	a, a
1032  00EC  20 0C       	jr	NZ,l_player_move_00116
1033  00EE  CD 00 00    	call	_spr_paint_player
1034  00F1  7D          	ld	a, l
1035  00F2  B7          	or	a, a
1036  00F3  28 39       	jr	Z,l_player_move_00117
1037  00F5  CD 52 07    	call	_player_check_map
1038  00F8  18 34       	jr	l_player_move_00117
1039  00FA              l_player_move_00116:
1040  00FA  CD 00 00    	call	_spr_back_repaint
1041  00FD  3A 07 00    	ld	a,(_state_a + 0x0007)
1042  0100  CB 67       	bit	4, a
1043  0102  28 10       	jr	Z,l_player_move_00112
1044  0104  21 07 00    	ld	hl,+(_col + 0x0007)
1045  0107  46          	ld	b, (hl)
1046  0108  21 07 00    	ld	hl,+(_lin + 0x0007)
1047  010B  4E          	ld	c, (hl)
1048  010C  C5          	push	bc
1049  010D  21 07 D0    	ld	hl,0xd007
1050  0110  E5          	push	hl
1051  0111  CD 00 00    	call	_NIRVANAP_spriteT_callee
1052  0114              l_player_move_00112:
1053  0114  3A 07 00    	ld	a,(_state_a + 0x0007)
1054  0117  CB 5F       	bit	3, a
1055  0119  28 10       	jr	Z,l_player_move_00114
1056  011B  21 07 00    	ld	hl,+(_col + 0x0007)
1057  011E  56          	ld	d, (hl)
1058  011F  21 07 00    	ld	hl,+(_lin + 0x0007)
1059  0122  5E          	ld	e, (hl)
1060  0123  D5          	push	de
1061  0124  21 07 D1    	ld	hl,0xd107
1062  0127  E5          	push	hl
1063  0128  CD 00 00    	call	_NIRVANAP_spriteT_callee
1064  012B              l_player_move_00114:
1065  012B  CD 52 07    	call	_player_check_map
1066  012E              l_player_move_00117:
1067  012E  3A 00 00    	ld	a,(_player_hit_lin)
1068  0131  B7          	or	a, a
1069  0132  28 03       	jr	Z,l_player_move_00119
1070  0134  CD 25 0C    	call	_player_hit_platform_clear
1071  0137              l_player_move_00119:
1072  0137  2E 00       	ld	l,0x00
1073  0139  C9          	ret
1074  013A              	SECTION code_compiler
1075  013A              ;	---------------------------------
1076  013A              ; Function player_check_input
1077  013A              ; ---------------------------------
1078  013A              _player_check_input:
1079  013A  21 00 00    	ld	hl,_dirs
1080  013D  CB 56       	bit	2, (hl)
1081  013F  28 0C       	jr	Z,l_player_check_input_00102
1082  0141  21 00 00    	ld	hl,_dirs
1083  0144  CB 5E       	bit	3, (hl)
1084  0146  28 05       	jr	Z,l_player_check_input_00102
1085  0148  21 00 00    	ld	hl,_dirs
1086  014B  36 00       	ld	(hl),0x00
1087  014D              l_player_check_input_00102:
1088  014D  21 00 00    	ld	hl,_dirs
1089  0150  7E          	ld	a, (hl)
1090  0151  CB 07       	rlc	a
1091  0153  E6 01       	and	a,0x01
1092  0155  CB 47       	bit	0, a
1093  0157  20 28       	jr	NZ,l_player_check_input_00107
1094  0159  CB 56       	bit	2, (hl)
1095  015B  20 24       	jr	NZ,l_player_check_input_00107
1096  015D  21 00 00    	ld	hl,_dirs
1097  0160  CB 5E       	bit	3, (hl)
1098  0162  20 1D       	jr	NZ,l_player_check_input_00107
1099  0164  21 00 00    	ld	hl,_dirs
1100  0167  CB 46       	bit	0, (hl)
1101  0169  20 16       	jr	NZ,l_player_check_input_00107
1102  016B  21 00 00    	ld	hl,_dirs
1103  016E  CB 4E       	bit	1, (hl)
1104  0170  20 0F       	jr	NZ,l_player_check_input_00107
1105  0172  3A 00 00    	ld	a,(_dirs_alt)
1106  0175  CB 07       	rlc	a
1107  0177  E6 01       	and	a,0x01
1108  0179  CB 47       	bit	0, a
1109  017B  20 04       	jr	NZ,l_player_check_input_00107
1110  017D  2E 00       	ld	l,0x00
1111  017F  18 02       	jr	l_player_check_input_00108
1112  0181              l_player_check_input_00107:
1113  0181  2E 01       	ld	l,0x01
1114  0183              l_player_check_input_00108:
1115  0183  C9          	ret
1116  0184              	SECTION code_compiler
1117  0184              ;	---------------------------------
1118  0184              ; Function player_action_fire
1119  0184              ; ---------------------------------
1120  0184              _player_action_fire:
1121  0184  3A 00 00    	ld	a,(_game_control_mode)
1122  0187  B7          	or	a, a
1123  0188  28 1C       	jr	Z,l_player_action_fire_00101
1124  018A  21 00 00    	ld	hl,_dirs
1125  018D  7E          	ld	a, (hl)
1126  018E  CB 07       	rlc	a
1127  0190  E6 01       	and	a,0x01
1128  0192  4F          	ld	c, a
1129  0193  7E          	ld	a, (hl)
1130  0194  E6 01       	and	a,0x01
1131  0196  47          	ld	b, a
1132  0197  3A 00 00    	ld	a,(_game_control_mode)
1133  019A  3D          	dec	a
1134  019B  28 11       	jr	Z,l_player_action_fire_00102
1135  019D  3A 00 00    	ld	a,(_game_control_mode)
1136  01A0  D6 02       	sub	a,0x02
1137  01A2  28 1A       	jr	Z,l_player_action_fire_00103
1138  01A4  18 36       	jr	l_player_action_fire_00107
1139  01A6              l_player_action_fire_00101:
1140  01A6  3A 00 00    	ld	a,(_dirs_alt)
1141  01A9  E6 80       	and	a,0x80
1142  01AB  6F          	ld	l, a
1143  01AC  18 30       	jr	l_player_action_fire_00108
1144  01AE              l_player_action_fire_00102:
1145  01AE  CB 41       	bit	0, c
1146  01B0  28 04       	jr	Z,l_player_action_fire_00110
1147  01B2  78          	ld	a, b
1148  01B3  B7          	or	a, a
1149  01B4  28 04       	jr	Z,l_player_action_fire_00111
1150  01B6              l_player_action_fire_00110:
1151  01B6  2E 00       	ld	l,0x00
1152  01B8  18 02       	jr	l_player_action_fire_00112
1153  01BA              l_player_action_fire_00111:
1154  01BA  2E 01       	ld	l,0x01
1155  01BC              l_player_action_fire_00112:
1156  01BC  18 20       	jr	l_player_action_fire_00108
1157  01BE              l_player_action_fire_00103:
1158  01BE  3A 00 00    	ld	a,(_player_onstair)
1159  01C1  B7          	or	a, a
1160  01C2  28 10       	jr	Z,l_player_action_fire_00105
1161  01C4  CB 41       	bit	0, c
1162  01C6  28 04       	jr	Z,l_player_action_fire_00113
1163  01C8  78          	ld	a, b
1164  01C9  B7          	or	a, a
1165  01CA  28 04       	jr	Z,l_player_action_fire_00114
1166  01CC              l_player_action_fire_00113:
1167  01CC  2E 00       	ld	l,0x00
1168  01CE  18 02       	jr	l_player_action_fire_00115
1169  01D0              l_player_action_fire_00114:
1170  01D0  2E 01       	ld	l,0x01
1171  01D2              l_player_action_fire_00115:
1172  01D2  18 0A       	jr	l_player_action_fire_00108
1173  01D4              l_player_action_fire_00105:
1174  01D4  3A 00 00    	ld	a,(_dirs)
1175  01D7  E6 80       	and	a,0x80
1176  01D9  6F          	ld	l, a
1177  01DA  18 02       	jr	l_player_action_fire_00108
1178  01DC              l_player_action_fire_00107:
1179  01DC  2E 00       	ld	l,0x00
1180  01DE              l_player_action_fire_00108:
1181  01DE  C9          	ret
1182  01DF              	SECTION code_compiler
1183  01DF              ;	---------------------------------
1184  01DF              ; Function player_action_jump
1185  01DF              ; ---------------------------------
1186  01DF              _player_action_jump:
1187  01DF  3A 00 00    	ld	a,(_game_control_mode)
1188  01E2  B7          	or	a, a
1189  01E3  28 1C       	jr	Z,l_player_action_jump_00101
1190  01E5  21 00 00    	ld	hl,_dirs
1191  01E8  7E          	ld	a, (hl)
1192  01E9  CB 07       	rlc	a
1193  01EB  E6 01       	and	a,0x01
1194  01ED  4F          	ld	c, a
1195  01EE  7E          	ld	a, (hl)
1196  01EF  E6 01       	and	a,0x01
1197  01F1  47          	ld	b, a
1198  01F2  3A 00 00    	ld	a,(_game_control_mode)
1199  01F5  3D          	dec	a
1200  01F6  28 11       	jr	Z,l_player_action_jump_00102
1201  01F8  3A 00 00    	ld	a,(_game_control_mode)
1202  01FB  D6 02       	sub	a,0x02
1203  01FD  28 1A       	jr	Z,l_player_action_jump_00103
1204  01FF  18 31       	jr	l_player_action_jump_00107
1205  0201              l_player_action_jump_00101:
1206  0201  3A 00 00    	ld	a,(_dirs)
1207  0204  E6 80       	and	a,0x80
1208  0206  6F          	ld	l, a
1209  0207  18 2B       	jr	l_player_action_jump_00108
1210  0209              l_player_action_jump_00102:
1211  0209  CB 41       	bit	0, c
1212  020B  28 04       	jr	Z,l_player_action_jump_00110
1213  020D  78          	ld	a, b
1214  020E  B7          	or	a, a
1215  020F  20 04       	jr	NZ,l_player_action_jump_00111
1216  0211              l_player_action_jump_00110:
1217  0211  2E 00       	ld	l,0x00
1218  0213  18 02       	jr	l_player_action_jump_00112
1219  0215              l_player_action_jump_00111:
1220  0215  2E 01       	ld	l,0x01
1221  0217              l_player_action_jump_00112:
1222  0217  18 1B       	jr	l_player_action_jump_00108
1223  0219              l_player_action_jump_00103:
1224  0219  3A 00 00    	ld	a,(_player_onstair)
1225  021C  B7          	or	a, a
1226  021D  28 10       	jr	Z,l_player_action_jump_00105
1227  021F  CB 41       	bit	0, c
1228  0221  28 04       	jr	Z,l_player_action_jump_00113
1229  0223  78          	ld	a, b
1230  0224  B7          	or	a, a
1231  0225  20 04       	jr	NZ,l_player_action_jump_00114
1232  0227              l_player_action_jump_00113:
1233  0227  2E 00       	ld	l,0x00
1234  0229  18 02       	jr	l_player_action_jump_00115
1235  022B              l_player_action_jump_00114:
1236  022B  2E 01       	ld	l,0x01
1237  022D              l_player_action_jump_00115:
1238  022D  18 05       	jr	l_player_action_jump_00108
1239  022F              l_player_action_jump_00105:
1240  022F  68          	ld	l, b
1241  0230  18 02       	jr	l_player_action_jump_00108
1242  0232              l_player_action_jump_00107:
1243  0232  2E 00       	ld	l,0x00
1244  0234              l_player_action_jump_00108:
1245  0234  C9          	ret
1246  0235              	SECTION code_compiler
1247  0235              ;	---------------------------------
1248  0235              ; Function player_move_input
1249  0235              ; ---------------------------------
1250  0235              _player_move_input:
1251  0235  CD 3A 01    	call	_player_check_input
1252  0238  7D          	ld	a, l
1253  0239  B7          	or	a, a
1254  023A  CA 6A 03    	jp	Z, l_player_move_input_00142
1255  023D  CD DF 01    	call	_player_action_jump
1256  0240  7D          	ld	a, l
1257  0241  B7          	or	a, a
1258  0242  28 37       	jr	Z,l_player_move_input_00102
1259  0244  21 00 00    	ld	hl,_player_vel_inc
1260  0247  36 01       	ld	(hl),0x01
1261  0249  CD 00 00    	call	_audio_salto
1262  024C  21 00 00    	ld	hl,_player_onstair
1263  024F  36 00       	ld	(hl),0x00
1264  0251  21 00 00    	ld	hl,_s_state
1265  0254  CD 00 00    	call	_spr_set_up
1266  0257  3A 07 00    	ld	a,(_lin + 0x0007)
1267  025A  32 07 00    	ld	(_jump_lin+7),a
1268  025D  3A 00 00    	ld	a,(_s_state)
1269  0260  32 07 00    	ld	((_state + 0x0007)),a
1270  0263  21 64 08    	ld	hl,0x0864
1271  0266  E5          	push	hl
1272  0267  CD 31 07    	call	_player_tile
1273  026A  F1          	pop	af
1274  026B  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
1275  026E  36 02       	ld	(hl),0x02
1276  0270  3A 00 00    	ld	a,(_player_vel_y0)
1277  0273  32 00 00    	ld	(_player_vel_y),a
1278  0276  2E 01       	ld	l,0x01
1279  0278  C3 90 03    	jp	l_player_move_input_00144
1280  027B              l_player_move_input_00102:
1281  027B  21 00 00    	ld	hl,_dirs
1282  027E  CB 5E       	bit	3, (hl)
1283  0280  28 20       	jr	Z,l_player_move_input_00106
1284  0282  CD 91 03    	call	_player_fix_walk_lin
1285  0285  21 00 00    	ld	hl,_s_state
1286  0288  CD 00 00    	call	_spr_set_right
1287  028B  01 07 00    	ld	bc,_state_a+7
1288  028E  0A          	ld	a, (bc)
1289  028F  F6 10       	or	a,0x10
1290  0291  E6 F7       	and	a,0xf7
1291  0293  02          	ld	(bc),a
1292  0294  3A 00 00    	ld	a,(_player_onstair)
1293  0297  B7          	or	a, a
1294  0298  28 05       	jr	Z,l_player_move_input_00104
1295  029A  2E 00       	ld	l,0x00
1296  029C  CD 89 06    	call	_player_check_stairs
1297  029F              l_player_move_input_00104:
1298  029F  CD 00 00    	call	_spr_move_horizontal
1299  02A2              l_player_move_input_00106:
1300  02A2  21 00 00    	ld	hl,_dirs
1301  02A5  CB 56       	bit	2, (hl)
1302  02A7  28 20       	jr	Z,l_player_move_input_00110
1303  02A9  CD 91 03    	call	_player_fix_walk_lin
1304  02AC  21 00 00    	ld	hl,_s_state
1305  02AF  CD 00 00    	call	_spr_set_left
1306  02B2  01 07 00    	ld	bc,_state_a+7
1307  02B5  0A          	ld	a, (bc)
1308  02B6  F6 08       	or	a,0x08
1309  02B8  E6 EF       	and	a,0xef
1310  02BA  02          	ld	(bc),a
1311  02BB  3A 00 00    	ld	a,(_player_onstair)
1312  02BE  B7          	or	a, a
1313  02BF  28 05       	jr	Z,l_player_move_input_00108
1314  02C1  2E 00       	ld	l,0x00
1315  02C3  CD 89 06    	call	_player_check_stairs
1316  02C6              l_player_move_input_00108:
1317  02C6  CD 00 00    	call	_spr_move_horizontal
1318  02C9              l_player_move_input_00110:
1319  02C9  21 00 00    	ld	hl,_dirs
1320  02CC  CB 46       	bit	0, (hl)
1321  02CE  28 39       	jr	Z,l_player_move_input_00122
1322  02D0  2E 00       	ld	l,0x00
1323  02D2  CD 89 06    	call	_player_check_stairs
1324  02D5  3A 00 00    	ld	a,(_player_onstair)
1325  02D8  B7          	or	a, a
1326  02D9  20 10       	jr	NZ,l_player_move_input_00114
1327  02DB  2E 01       	ld	l,0x01
1328  02DD  CD 89 06    	call	_player_check_stairs
1329  02E0  3A 00 00    	ld	a,(_player_onstair)
1330  02E3  B7          	or	a, a
1331  02E4  20 05       	jr	NZ,l_player_move_input_00114
1332  02E6  2E FE       	ld	l,0xfe
1333  02E8  CD E9 05    	call	_player_check_stairs_vertical
1334  02EB              l_player_move_input_00114:
1335  02EB  3A 00 00    	ld	a,(_player_onstair)
1336  02EE  B7          	or	a, a
1337  02EF  28 05       	jr	Z,l_player_move_input_00119
1338  02F1  CD 00 00    	call	_spr_move_up
1339  02F4  18 13       	jr	l_player_move_input_00122
1340  02F6              l_player_move_input_00119:
1341  02F6  21 00 00    	ld	hl,_dirs
1342  02F9  CB 5E       	bit	3, (hl)
1343  02FB  20 0C       	jr	NZ,l_player_move_input_00122
1344  02FD  21 00 00    	ld	hl,_dirs
1345  0300  CB 56       	bit	2, (hl)
1346  0302  20 05       	jr	NZ,l_player_move_input_00122
1347  0304  2E 00       	ld	l,0x00
1348  0306  C3 90 03    	jp	l_player_move_input_00144
1349  0309              l_player_move_input_00122:
1350  0309  21 00 00    	ld	hl,_dirs
1351  030C  CB 4E       	bit	1, (hl)
1352  030E  28 38       	jr	Z,l_player_move_input_00134
1353  0310  2E 00       	ld	l,0x00
1354  0312  CD 89 06    	call	_player_check_stairs
1355  0315  3A 00 00    	ld	a,(_player_onstair)
1356  0318  B7          	or	a, a
1357  0319  20 10       	jr	NZ,l_player_move_input_00126
1358  031B  2E 01       	ld	l,0x01
1359  031D  CD 89 06    	call	_player_check_stairs
1360  0320  3A 00 00    	ld	a,(_player_onstair)
1361  0323  B7          	or	a, a
1362  0324  20 05       	jr	NZ,l_player_move_input_00126
1363  0326  2E 12       	ld	l,0x12
1364  0328  CD E9 05    	call	_player_check_stairs_vertical
1365  032B              l_player_move_input_00126:
1366  032B  3A 00 00    	ld	a,(_player_onstair)
1367  032E  B7          	or	a, a
1368  032F  28 05       	jr	Z,l_player_move_input_00131
1369  0331  CD 00 00    	call	_spr_move_down
1370  0334  18 12       	jr	l_player_move_input_00134
1371  0336              l_player_move_input_00131:
1372  0336  21 00 00    	ld	hl,_dirs
1373  0339  CB 5E       	bit	3, (hl)
1374  033B  20 0B       	jr	NZ,l_player_move_input_00134
1375  033D  21 00 00    	ld	hl,_dirs
1376  0340  CB 56       	bit	2, (hl)
1377  0342  20 04       	jr	NZ,l_player_move_input_00134
1378  0344  2E 00       	ld	l,0x00
1379  0346  18 48       	jr	l_player_move_input_00144
1380  0348              l_player_move_input_00134:
1381  0348  3A 00 00    	ld	a,(_s_state)
1382  034B  32 07 00    	ld	((_state + 0x0007)),a
1383  034E  3A 00 00    	ld	a,(_player_onstair)
1384  0351  B7          	or	a, a
1385  0352  28 0A       	jr	Z,l_player_move_input_00136
1386  0354  21 72 00    	ld	hl,0x0072
1387  0357  E5          	push	hl
1388  0358  CD 31 07    	call	_player_tile
1389  035B  F1          	pop	af
1390  035C  18 08       	jr	l_player_move_input_00137
1391  035E              l_player_move_input_00136:
1392  035E  21 60 08    	ld	hl,0x0860
1393  0361  E5          	push	hl
1394  0362  CD 31 07    	call	_player_tile
1395  0365  F1          	pop	af
1396  0366              l_player_move_input_00137:
1397  0366  2E 01       	ld	l,0x01
1398  0368  18 26       	jr	l_player_move_input_00144
1399  036A              l_player_move_input_00142:
1400  036A  21 07 00    	ld	hl, +(_colint + 0x0007)
1401  036D  36 00       	ld	(hl),0x00
1402  036F  3A 00 00    	ld	a,(_player_onstair)
1403  0372  B7          	or	a, a
1404  0373  28 0A       	jr	Z,l_player_move_input_00139
1405  0375  21 72 00    	ld	hl,0x0072
1406  0378  E5          	push	hl
1407  0379  CD 31 07    	call	_player_tile
1408  037C  F1          	pop	af
1409  037D  18 08       	jr	l_player_move_input_00140
1410  037F              l_player_move_input_00139:
1411  037F  21 70 01    	ld	hl,0x0170
1412  0382  E5          	push	hl
1413  0383  CD 31 07    	call	_player_tile
1414  0386  F1          	pop	af
1415  0387              l_player_move_input_00140:
1416  0387  21 00 00    	ld	hl,_s_state
1417  038A  7E          	ld	a,(hl)
1418  038B  E6 F3       	and	a,+(0xf7&0xfb)
1419  038D  77          	ld	(hl),a
1420  038E  2E 00       	ld	l,0x00
1421  0390              l_player_move_input_00144:
1422  0390  C9          	ret
1423  0391              	SECTION code_compiler
1424  0391              ;	---------------------------------
1425  0391              ; Function player_fix_walk_lin
1426  0391              ; ---------------------------------
1427  0391              _player_fix_walk_lin:
1428  0391  3A 00 00    	ld	a,(_player_onstair)
1429  0394  B7          	or	a, a
1430  0395  C0          	ret	NZ
1431  0396  01 07 00    	ld	bc,_lin+7
1432  0399  3A 00 00    	ld	a,(_s_lin0)
1433  039C  07          	rlca
1434  039D  07          	rlca
1435  039E  07          	rlca
1436  039F  07          	rlca
1437  03A0  E6 0F       	and	a,0x0f
1438  03A2  07          	rlca
1439  03A3  07          	rlca
1440  03A4  07          	rlca
1441  03A5  07          	rlca
1442  03A6  E6 F0       	and	a,0xf0
1443  03A8  02          	ld	(bc), a
1444  03A9  C9          	ret
1445  03AA              	SECTION code_compiler
1446  03AA              ;	---------------------------------
1447  03AA              ; Function player_fire
1448  03AA              ; ---------------------------------
1449  03AA              _player_fire:
1450  03AA  CD 84 01    	call	_player_action_fire
1451  03AD  4D          	ld	c, l
1452  03AE  21 00 00    	ld	hl,_player_onfire
1453  03B1  71          	ld	(hl), c
1454  03B2  3A 07 00    	ld	a,(_bullet_col + 0x0007)
1455  03B5  3C          	inc	a
1456  03B6  20 37       	jr	NZ,l_player_fire_00113
1457  03B8  7E          	ld	a, (hl)
1458  03B9  B7          	or	a, a
1459  03BA  28 33       	jr	Z,l_player_fire_00113
1460  03BC  21 00 00    	ld	hl,_player_mana
1461  03BF  7E          	ld	a, (hl)
1462  03C0  B7          	or	a, a
1463  03C1  28 29       	jr	Z,l_player_fire_00107
1464  03C3  3E 05       	ld	a,0x05
1465  03C5  96          	sub	a, (hl)
1466  03C6  30 0F       	jr	NC,l_player_fire_00104
1467  03C8  3A 00 00    	ld	a,(_game_inmune)
1468  03CB  B7          	or	a, a
1469  03CC  20 0E       	jr	NZ,l_player_fire_00105
1470  03CE  21 00 00    	ld	hl,_player_mana
1471  03D1  7E          	ld	a, (hl)
1472  03D2  C6 FB       	add	a,0xfb
1473  03D4  77          	ld	(hl), a
1474  03D5  18 05       	jr	l_player_fire_00105
1475  03D7              l_player_fire_00104:
1476  03D7  21 00 00    	ld	hl,_player_mana
1477  03DA  36 00       	ld	(hl),0x00
1478  03DC              l_player_fire_00105:
1479  03DC  CD 00 00    	call	_game_update_stats
1480  03DF  CD 00 00    	call	_audio_disparo1
1481  03E2  21 07 78    	ld	hl,0x7807
1482  03E5  E5          	push	hl
1483  03E6  CD 00 00    	call	_game_shoot_fire
1484  03E9  F1          	pop	af
1485  03EA  18 03       	jr	l_player_fire_00113
1486  03EC              l_player_fire_00107:
1487  03EC  CD 00 00    	call	_audio_sin_mana
1488  03EF              l_player_fire_00113:
1489  03EF  C9          	ret
1490  03F0              	SECTION code_compiler
1491  03F0              ;	---------------------------------
1492  03F0              ; Function player_collision
1493  03F0              ; ---------------------------------
1494  03F0              _player_collision:
1495  03F0  3E 1E       	ld	a,0x1e
1496  03F2  F5          	push	af
1497  03F3  33          	inc	sp
1498  03F4  21 00 00    	ld	hl,_player_hit_time
1499  03F7  E5          	push	hl
1500  03F8  CD 00 00    	call	_game_check_time
1501  03FB  F1          	pop	af
1502  03FC  33          	inc	sp
1503  03FD  7D          	ld	a, l
1504  03FE  B7          	or	a, a
1505  03FF  CA 9D 05    	jp	Z, l_player_collision_00136
1506  0402  21 00 00    	ld	hl,_sprite
1507  0405  36 00       	ld	(hl),0x00
1508  0407  3A 07 00    	ld	a,(_col + 7)
1509  040A  32 00 00    	ld	(_s_col1),a
1510  040D  3A 07 00    	ld	a,(_lin + 7)
1511  0410  32 00 00    	ld	(_s_lin1),a
1512  0413  C6 08       	add	a,0x08
1513  0415  4F          	ld	c, a
1514  0416  3A 00 00    	ld	a, (_s_col1)
1515  0419  47          	ld	b,a
1516  041A  C5          	push	bc
1517  041B  CD 00 00    	call	_spr_calc_index
1518  041E  F1          	pop	af
1519  041F  4D          	ld	c, l
1520  0420  21 00 00    	ld	hl,_sprite_curr_index
1521  0423  71          	ld	(hl), c
1522  0424  3E 00       	ld	a, +((_scr_map) & 0xFF)
1523  0426  86          	add	a, (hl)
1524  0427  4F          	ld	c, a
1525  0428  3E 00       	ld	a, +((_scr_map) / 256)
1526  042A  CE 00       	adc	a,0x00
1527  042C  47          	ld	b, a
1528  042D  0A          	ld	a, (bc)
1529  042E  4F          	ld	c,a
1530  042F  D6 15       	sub	a,0x15
1531  0431  20 2B       	jr	NZ,l_player_collision_00104
1532  0433  21 00 00    	ld	hl,_s_state
1533  0436  CB 46       	bit	0, (hl)
1534  0438  20 24       	jr	NZ,l_player_collision_00104
1535  043A  3A 00 00    	ld	a,(_game_checkpoint_scr)
1536  043D  21 00 00    	ld	hl,_scr_curr
1537  0440  96          	sub	a, (hl)
1538  0441  28 16       	jr	Z,l_player_collision_00102
1539  0443  C5          	push	bc
1540  0444  CD 00 00    	call	_audio_efecto
1541  0447  C1          	pop	bc
1542  0448  2E 07       	ld	l,0x07
1543  044A  CD 00 00    	call	_zx_border_fastcall
1544  044D  3A 00 00    	ld	a,(_s_col1)
1545  0450  32 00 00    	ld	(_player_col_scr),a
1546  0453  3A 00 00    	ld	a,(_s_lin1)
1547  0456  32 00 00    	ld	(_player_lin_scr),a
1548  0459              l_player_collision_00102:
1549  0459  C5          	push	bc
1550  045A  CD 00 00    	call	_game_set_checkpoint
1551  045D  C1          	pop	bc
1552  045E              l_player_collision_00104:
1553  045E  3E 2F       	ld	a,0x2f
1554  0460  91          	sub	a, c
1555  0461  30 5D       	jr	NC,l_player_collision_00157
1556  0463  79          	ld	a,c
1557  0464  FE 3A       	cp	a,0x3a
1558  0466  30 58       	jr	NC,l_player_collision_00157
1559  0468  D6 39       	sub	a,0x39
1560  046A  20 2A       	jr	NZ,l_player_collision_00111
1561  046C  CD 00 00    	call	_audio_level_complete
1562  046F  21 00 00    	ld	hl,___str_0
1563  0472  E5          	push	hl
1564  0473  21 0C 08    	ld	hl,0x080c
1565  0476  E5          	push	hl
1566  0477  CD 00 00    	call	_zx_print_str
1567  047A  AF          	xor	a, a
1568  047B  F5          	push	af
1569  047C  33          	inc	sp
1570  047D  21 E8 03    	ld	hl,0x03e8
1571  0480  E5          	push	hl
1572  0481  21 08 17    	ld	hl,0x1708
1573  0484  E5          	push	hl
1574  0485  3E 0C       	ld	a,0x0c
1575  0487  F5          	push	af
1576  0488  33          	inc	sp
1577  0489  CD 00 00    	call	_game_colour_message
1578  048C  F1          	pop	af
1579  048D  F1          	pop	af
1580  048E  F1          	pop	af
1581  048F  21 00 00    	ld	hl,_game_round_up
1582  0492  36 01       	ld	(hl),0x01
1583  0494  18 2A       	jr	l_player_collision_00157
1584  0496              l_player_collision_00111:
1585  0496  3A 00 00    	ld	a,(_game_inmune)
1586  0499  B7          	or	a, a
1587  049A  20 10       	jr	NZ,l_player_collision_00107
1588  049C  3E 82       	ld	a,0x82
1589  049E  21 00 00    	ld	hl,_s_lin1
1590  04A1  96          	sub	a, (hl)
1591  04A2  30 08       	jr	NC,l_player_collision_00107
1592  04A4  CD 5A 10    	call	_player_lost_life
1593  04A7  2E 00       	ld	l,0x00
1594  04A9  C3 9F 05    	jp	l_player_collision_00137
1595  04AC              l_player_collision_00107:
1596  04AC  21 00 00    	ld	hl,_s_state
1597  04AF  CB E6       	set	4, (hl)
1598  04B1  2E 06       	ld	l,0x06
1599  04B3  CD 00 00    	call	_zx_border_fastcall
1600  04B6  2E 32       	ld	l,0x32
1601  04B8  CD A8 11    	call	_player_damage
1602  04BB  2E 01       	ld	l,0x01
1603  04BD  C3 9F 05    	jp	l_player_collision_00137
1604  04C0              l_player_collision_00157:
1605  04C0              l_player_collision_00132:
1606  04C0  21 00 00    	ld	hl,_sprite
1607  04C3  7E          	ld	a, (hl)
1608  04C4  D6 07       	sub	a,0x07
1609  04C6  D2 98 05    	jp	NC, l_player_collision_00134
1610  04C9  4E          	ld	c,(hl)
1611  04CA  06 00       	ld	b,0x00
1612  04CC  21 00 00    	ld	hl,_class
1613  04CF  09          	add	hl,bc
1614  04D0  7E          	ld	a,(hl)
1615  04D1  32 00 00    	ld	(_s_class),a
1616  04D4  B7          	or	a, a
1617  04D5  CA 91 05    	jp	Z, l_player_collision_00131
1618  04D8  2A 00 00    	ld	hl,(_sprite)
1619  04DB  26 00       	ld	h,0x00
1620  04DD  01 00 00    	ld	bc,_col
1621  04E0  09          	add	hl,bc
1622  04E1  4E          	ld	c,(hl)
1623  04E2  06 00       	ld	b,0x00
1624  04E4  3A 00 00    	ld	a,(_s_col1)
1625  04E7  5F          	ld	e,a
1626  04E8  16 00       	ld	d,0x00
1627  04EA  79          	ld	a, c
1628  04EB  93          	sub	a, e
1629  04EC  6F          	ld	l, a
1630  04ED  78          	ld	a, b
1631  04EE  9A          	sbc	a, d
1632  04EF  67          	ld	h, a
1633  04F0  CD 00 00    	call	_abs_fastcall
1634  04F3  7D          	ld	a,l
1635  04F4  D6 02       	sub	a,0x02
1636  04F6  7C          	ld	a,h
1637  04F7  17          	rla
1638  04F8  3F          	ccf
1639  04F9  1F          	rra
1640  04FA  DE 80       	sbc	a,0x80
1641  04FC  D2 91 05    	jp	NC, l_player_collision_00131
1642  04FF  2A 00 00    	ld	hl,(_sprite)
1643  0502  26 00       	ld	h,0x00
1644  0504  01 00 00    	ld	bc,_lin
1645  0507  09          	add	hl,bc
1646  0508  4E          	ld	c,(hl)
1647  0509  06 00       	ld	b,0x00
1648  050B  3A 00 00    	ld	a,(_s_lin1)
1649  050E  5F          	ld	e,a
1650  050F  16 00       	ld	d,0x00
1651  0511  79          	ld	a, c
1652  0512  93          	sub	a, e
1653  0513  6F          	ld	l, a
1654  0514  78          	ld	a, b
1655  0515  9A          	sbc	a, d
1656  0516  67          	ld	h, a
1657  0517  CD 00 00    	call	_abs_fastcall
1658  051A  7D          	ld	a,l
1659  051B  D6 0E       	sub	a,0x0e
1660  051D  7C          	ld	a,h
1661  051E  17          	rla
1662  051F  3F          	ccf
1663  0520  1F          	rra
1664  0521  DE 80       	sbc	a,0x80
1665  0523  30 6C       	jr	NC,l_player_collision_00131
1666  0525  3A 00 00    	ld	a,(_s_class)
1667  0528  D6 06       	sub	a,0x06
1668  052A  20 1D       	jr	NZ,l_player_collision_00119
1669  052C  21 00 00    	ld	hl,_player_vita
1670  052F  7E          	ld	a, (hl)
1671  0530  C6 32       	add	a,0x32
1672  0532  77          	ld	(hl), a
1673  0533  3A 00 00    	ld	a,(_player_max_vita)
1674  0536  21 00 00    	ld	hl,_player_vita
1675  0539  96          	sub	a, (hl)
1676  053A  30 06       	jr	NC,l_player_collision_00117
1677  053C  3A 00 00    	ld	a,(_player_max_vita)
1678  053F  32 00 00    	ld	(_player_vita),a
1679  0542              l_player_collision_00117:
1680  0542  CD A0 05    	call	_player_pick_mushroom
1681  0545  2E 00       	ld	l,0x00
1682  0547  18 56       	jr	l_player_collision_00137
1683  0549              l_player_collision_00119:
1684  0549  3A 00 00    	ld	a,(_s_class)
1685  054C  D6 07       	sub	a,0x07
1686  054E  20 1D       	jr	NZ,l_player_collision_00123
1687  0550  21 00 00    	ld	hl,_player_mana
1688  0553  7E          	ld	a, (hl)
1689  0554  C6 32       	add	a,0x32
1690  0556  77          	ld	(hl), a
1691  0557  3A 00 00    	ld	a,(_player_max_mana)
1692  055A  21 00 00    	ld	hl,_player_mana
1693  055D  96          	sub	a, (hl)
1694  055E  30 06       	jr	NC,l_player_collision_00121
1695  0560  3A 00 00    	ld	a,(_player_max_mana)
1696  0563  32 00 00    	ld	(_player_mana),a
1697  0566              l_player_collision_00121:
1698  0566  CD A0 05    	call	_player_pick_mushroom
1699  0569  2E 00       	ld	l,0x00
1700  056B  18 32       	jr	l_player_collision_00137
1701  056D              l_player_collision_00123:
1702  056D  3A 00 00    	ld	a,(_s_class)
1703  0570  D6 08       	sub	a,0x08
1704  0572  20 0A       	jr	NZ,l_player_collision_00125
1705  0574  CD A0 05    	call	_player_pick_mushroom
1706  0577  CD B7 05    	call	_player_1up
1707  057A  2E 00       	ld	l,0x00
1708  057C  18 21       	jr	l_player_collision_00137
1709  057E              l_player_collision_00125:
1710  057E  21 00 00    	ld	hl,_s_state
1711  0581  CB E6       	set	4, (hl)
1712  0583  2E 02       	ld	l,0x02
1713  0585  CD 00 00    	call	_zx_border_fastcall
1714  0588  2E 14       	ld	l,0x14
1715  058A  CD A8 11    	call	_player_damage
1716  058D  2E 01       	ld	l,0x01
1717  058F  18 0E       	jr	l_player_collision_00137
1718  0591              l_player_collision_00131:
1719  0591  21 00 00    	ld	hl,_sprite
1720  0594  34          	inc	(hl)
1721  0595  C3 C0 04    	jp	l_player_collision_00132
1722  0598              l_player_collision_00134:
1723  0598  21 00 00    	ld	hl,_s_state
1724  059B  CB A6       	res	4, (hl)
1725  059D              l_player_collision_00136:
1726  059D  2E 00       	ld	l,0x00
1727  059F              l_player_collision_00137:
1728  059F  C9          	ret
1729  05A0              	SECTION rodata_compiler
1730  0000              ___str_0:
1731  0000  52 4F 55 4E 44 20 43 4F 4D 50 4C 45 54 45 21 
                        	DEFM "ROUND COMPLETE!"
1732  000F  00          	DEFB 0x00
1733  0010              	SECTION code_compiler
1734  05A0              ;	---------------------------------
1735  05A0              ; Function player_pick_mushroom
1736  05A0              ; ---------------------------------
1737  05A0              _player_pick_mushroom:
1738  05A0  CD 00 00    	call	_audio_magia1
1739  05A3  21 01 00    	ld	hl,0x0001
1740  05A6  CD 54 0C    	call	_player_score_add
1741  05A9  CD 00 00    	call	_game_update_stats
1742  05AC  2A 00 00    	ld	hl,(_sprite)
1743  05AF  CD 00 00    	call	_spr_destroy
1744  05B2  21 00 00    	ld	hl,_game_mush_count
1745  05B5  35          	dec	(hl)
1746  05B6  C9          	ret
1747  05B7              	SECTION code_compiler
1748  05B7              ;	---------------------------------
1749  05B7              ; Function player_1up
1750  05B7              ; ---------------------------------
1751  05B7              _player_1up:
1752  05B7  21 00 00    	ld	hl,_player_lives
1753  05BA  7E          	ld	a, (hl)
1754  05BB  D6 64       	sub	a,0x64
1755  05BD  D0          	ret	NC
1756  05BE  34          	inc	(hl)
1757  05BF  CD 00 00    	call	_spr_flatten
1758  05C2  21 10 00    	ld	hl,___str_1
1759  05C5  E5          	push	hl
1760  05C6  21 0C 0C    	ld	hl,0x0c0c
1761  05C9  E5          	push	hl
1762  05CA  CD 00 00    	call	_zx_print_str
1763  05CD  AF          	xor	a, a
1764  05CE  F5          	push	af
1765  05CF  33          	inc	sp
1766  05D0  21 19 00    	ld	hl,0x0019
1767  05D3  E5          	push	hl
1768  05D4  21 0C 11    	ld	hl,0x110c
1769  05D7  E5          	push	hl
1770  05D8  3E 0C       	ld	a,0x0c
1771  05DA  F5          	push	af
1772  05DB  33          	inc	sp
1773  05DC  CD 00 00    	call	_game_colour_message
1774  05DF  F1          	pop	af
1775  05E0  F1          	pop	af
1776  05E1  F1          	pop	af
1777  05E2  CD 00 00    	call	_game_update_stats
1778  05E5  CD 00 00    	call	_spr_unflattenP1
1779  05E8  C9          	ret
1780  05E9              	SECTION rodata_compiler
1781  0010              ___str_1:
1782  0010  31 20 55 50 21 
                        	DEFM "1 UP!"
1783  0015  00          	DEFB 0x00
1784  0016              	SECTION code_compiler
1785  05E9              ;	---------------------------------
1786  05E9              ; Function player_check_stairs_vertical
1787  05E9              ; ---------------------------------
1788  05E9              _player_check_stairs_vertical:
1789  05E9  CD 00 00    	call	___sdcc_enter_ix
1790  05EC  3B          	dec	sp
1791  05ED  4D          	ld	c, l
1792  05EE  21 07 00    	ld	hl,+(_col + 0x0007)
1793  05F1  46          	ld	b, (hl)
1794  05F2  CB 40       	bit	0, b
1795  05F4  20 2A       	jr	NZ,l_player_check_stairs_vertical_00102
1796  05F6  3A 07 00    	ld	a,(_lin + 0x0007)
1797  05F9  81          	add	a, c
1798  05FA  4F          	ld	c,a
1799  05FB  C5          	push	bc
1800  05FC  CD 00 00    	call	_spr_calc_index
1801  05FF  F1          	pop	af
1802  0600  7D          	ld	a,l
1803  0601  32 00 00    	ld	(_sprite_curr_index),a
1804  0604  4F          	ld	c,a
1805  0605  06 00       	ld	b,0x00
1806  0607  21 00 00    	ld	hl,_scr_map
1807  060A  09          	add	hl,bc
1808  060B  7E          	ld	a,(hl)
1809  060C  4F          	ld	c,a
1810  060D  D6 44       	sub	a,0x44
1811  060F  38 05       	jr	C,l_player_check_stairs_vertical_00110
1812  0611  3E 47       	ld	a,0x47
1813  0613  91          	sub	a, c
1814  0614  30 04       	jr	NC,l_player_check_stairs_vertical_00111
1815  0616              l_player_check_stairs_vertical_00110:
1816  0616  1E 00       	ld	e,0x00
1817  0618  18 02       	jr	l_player_check_stairs_vertical_00112
1818  061A              l_player_check_stairs_vertical_00111:
1819  061A  1E 01       	ld	e,0x01
1820  061C              l_player_check_stairs_vertical_00112:
1821  061C  0E 00       	ld	c,0x00
1822  061E  18 52       	jr	l_player_check_stairs_vertical_00103
1823  0620              l_player_check_stairs_vertical_00102:
1824  0620  78          	ld	a, b
1825  0621  91          	sub	a, c
1826  0622  57          	ld	d, a
1827  0623  3A 07 00    	ld	a,(_lin + 0x0007)
1828  0626  81          	add	a, c
1829  0627  47          	ld	b, a
1830  0628  C5          	push	bc
1831  0629  58          	ld	e,b
1832  062A  D5          	push	de
1833  062B  CD 00 00    	call	_spr_calc_index
1834  062E  F1          	pop	af
1835  062F  C1          	pop	bc
1836  0630  7D          	ld	a,l
1837  0631  32 00 00    	ld	(_sprite_curr_index),a
1838  0634  5F          	ld	e,a
1839  0635  16 00       	ld	d,0x00
1840  0637  21 00 00    	ld	hl,_scr_map
1841  063A  19          	add	hl,de
1842  063B  7E          	ld	a,(hl)
1843  063C  47          	ld	b,a
1844  063D  D6 44       	sub	a,0x44
1845  063F  38 05       	jr	C,l_player_check_stairs_vertical_00113
1846  0641  3E 47       	ld	a,0x47
1847  0643  90          	sub	a, b
1848  0644  30 04       	jr	NC,l_player_check_stairs_vertical_00114
1849  0646              l_player_check_stairs_vertical_00113:
1850  0646  1E 00       	ld	e,0x00
1851  0648  18 02       	jr	l_player_check_stairs_vertical_00115
1852  064A              l_player_check_stairs_vertical_00114:
1853  064A  1E 01       	ld	e,0x01
1854  064C              l_player_check_stairs_vertical_00115:
1855  064C  3A 07 00    	ld	a,(_col + 0x0007)
1856  064F  91          	sub	a, c
1857  0650  47          	ld	b, a
1858  0651  3A 07 00    	ld	a,(_lin + 0x0007)
1859  0654  81          	add	a, c
1860  0655  57          	ld	d, a
1861  0656  D5          	push	de
1862  0657  4A          	ld	c, d
1863  0658  C5          	push	bc
1864  0659  CD 00 00    	call	_spr_calc_index
1865  065C  F1          	pop	af
1866  065D  D1          	pop	de
1867  065E  7D          	ld	a,l
1868  065F  32 00 00    	ld	(_sprite_curr_index),a
1869  0662  7B          	ld	a, e
1870  0663  D6 44       	sub	a,0x44
1871  0665  38 05       	jr	C,l_player_check_stairs_vertical_00116
1872  0667  3E 47       	ld	a,0x47
1873  0669  93          	sub	a, e
1874  066A  30 04       	jr	NC,l_player_check_stairs_vertical_00117
1875  066C              l_player_check_stairs_vertical_00116:
1876  066C  0E 00       	ld	c,0x00
1877  066E  18 02       	jr	l_player_check_stairs_vertical_00118
1878  0670              l_player_check_stairs_vertical_00117:
1879  0670  0E 01       	ld	c,0x01
1880  0672              l_player_check_stairs_vertical_00118:
1881  0672              l_player_check_stairs_vertical_00103:
1882  0672  7B          	ld	a, e
1883  0673  B7          	or	a,a
1884  0674  20 03       	jr	NZ,l_player_check_stairs_vertical_00104
1885  0676  B1          	or	a,c
1886  0677  28 07       	jr	Z,l_player_check_stairs_vertical_00105
1887  0679              l_player_check_stairs_vertical_00104:
1888  0679  21 00 00    	ld	hl,_player_onstair
1889  067C  36 01       	ld	(hl),0x01
1890  067E  18 05       	jr	l_player_check_stairs_vertical_00108
1891  0680              l_player_check_stairs_vertical_00105:
1892  0680  21 00 00    	ld	hl,_player_onstair
1893  0683  36 00       	ld	(hl),0x00
1894  0685              l_player_check_stairs_vertical_00108:
1895  0685  33          	inc	sp
1896  0686  DD E1       	pop	ix
1897  0688  C9          	ret
1898  0689              	SECTION code_compiler
1899  0689              ;	---------------------------------
1900  0689              ; Function player_check_stairs
1901  0689              ; ---------------------------------
1902  0689              _player_check_stairs:
1903  0689  CD 00 00    	call	___sdcc_enter_ix
1904  068C  3B          	dec	sp
1905  068D  45          	ld	b, l
1906  068E  3A 07 00    	ld	a,(_col + 0x0007)
1907  0691  4F          	ld	c,a
1908  0692  80          	add	a, b
1909  0693  57          	ld	d, a
1910  0694  3A 07 00    	ld	a,(_lin + 0x0007)
1911  0697  C5          	push	bc
1912  0698  5F          	ld	e,a
1913  0699  D5          	push	de
1914  069A  CD 00 00    	call	_spr_calc_index
1915  069D  F1          	pop	af
1916  069E  C1          	pop	bc
1917  069F  7D          	ld	a,l
1918  06A0  32 00 00    	ld	(_sprite_curr_index),a
1919  06A3  5F          	ld	e,a
1920  06A4  16 00       	ld	d,0x00
1921  06A6  21 00 00    	ld	hl,_scr_map
1922  06A9  19          	add	hl,de
1923  06AA  7E          	ld	a,(hl)
1924  06AB  4F          	ld	c,a
1925  06AC  D6 44       	sub	a,0x44
1926  06AE  38 05       	jr	C,l_player_check_stairs_00111
1927  06B0  3E 47       	ld	a,0x47
1928  06B2  91          	sub	a, c
1929  06B3  30 04       	jr	NC,l_player_check_stairs_00112
1930  06B5              l_player_check_stairs_00111:
1931  06B5  0E 00       	ld	c,0x00
1932  06B7  18 02       	jr	l_player_check_stairs_00113
1933  06B9              l_player_check_stairs_00112:
1934  06B9  0E 01       	ld	c,0x01
1935  06BB              l_player_check_stairs_00113:
1936  06BB  3A 07 00    	ld	a,(_col + 0x0007)
1937  06BE  80          	add	a, b
1938  06BF  57          	ld	d, a
1939  06C0  3A 07 00    	ld	a,(_lin + 0x0007)
1940  06C3  C6 0F       	add	a,0x0f
1941  06C5  47          	ld	b, a
1942  06C6  C5          	push	bc
1943  06C7  58          	ld	e,b
1944  06C8  D5          	push	de
1945  06C9  CD 00 00    	call	_spr_calc_index
1946  06CC  F1          	pop	af
1947  06CD  C1          	pop	bc
1948  06CE  7D          	ld	a,l
1949  06CF  32 00 00    	ld	(_sprite_curr_index),a
1950  06D2  5F          	ld	e,a
1951  06D3  16 00       	ld	d,0x00
1952  06D5  21 00 00    	ld	hl,_scr_map
1953  06D8  19          	add	hl,de
1954  06D9  7E          	ld	a,(hl)
1955  06DA  47          	ld	b,a
1956  06DB  D6 44       	sub	a,0x44
1957  06DD  38 05       	jr	C,l_player_check_stairs_00114
1958  06DF  3E 47       	ld	a,0x47
1959  06E1  90          	sub	a, b
1960  06E2  30 04       	jr	NC,l_player_check_stairs_00115
1961  06E4              l_player_check_stairs_00114:
1962  06E4  06 00       	ld	b,0x00
1963  06E6  18 02       	jr	l_player_check_stairs_00116
1964  06E8              l_player_check_stairs_00115:
1965  06E8  06 01       	ld	b,0x01
1966  06EA              l_player_check_stairs_00116:
1967  06EA  79          	ld	a, c
1968  06EB  B7          	or	a,a
1969  06EC  20 03       	jr	NZ,l_player_check_stairs_00105
1970  06EE  B0          	or	a,b
1971  06EF  28 13       	jr	Z,l_player_check_stairs_00106
1972  06F1              l_player_check_stairs_00105:
1973  06F1  21 00 00    	ld	hl,_player_onstair
1974  06F4  7E          	ld	a, (hl)
1975  06F5  B7          	or	a, a
1976  06F6  20 1D       	jr	NZ,l_player_check_stairs_00109
1977  06F8  36 01       	ld	(hl),0x01
1978  06FA  21 72 00    	ld	hl,0x0072
1979  06FD  E5          	push	hl
1980  06FE  CD 31 07    	call	_player_tile
1981  0701  F1          	pop	af
1982  0702  18 11       	jr	l_player_check_stairs_00109
1983  0704              l_player_check_stairs_00106:
1984  0704  21 00 00    	ld	hl,_player_onstair
1985  0707  7E          	ld	a, (hl)
1986  0708  B7          	or	a, a
1987  0709  28 0A       	jr	Z,l_player_check_stairs_00109
1988  070B  36 00       	ld	(hl),0x00
1989  070D  21 60 08    	ld	hl,0x0860
1990  0710  E5          	push	hl
1991  0711  CD 31 07    	call	_player_tile
1992  0714  F1          	pop	af
1993  0715              l_player_check_stairs_00109:
1994  0715  33          	inc	sp
1995  0716  DD E1       	pop	ix
1996  0718  C9          	ret
1997  0719              	SECTION code_compiler
1998  0719              ;	---------------------------------
1999  0719              ; Function player_anim_stairs
2000  0719              ; ---------------------------------
2001  0719              _player_anim_stairs:
2002  0719  21 00 00    	ld	hl,_player_anim_stair
2003  071C  34          	inc	(hl)
2004  071D  3E 01       	ld	a,0x01
2005  071F  96          	sub	a, (hl)
2006  0720  30 02       	jr	NC,l_player_anim_stairs_00102
2007  0722  36 00       	ld	(hl),0x00
2008  0724              l_player_anim_stairs_00102:
2009  0724  3A 07 00    	ld	a,(_tile + 0x0007)
2010  0727  21 00 00    	ld	hl,_player_anim_stair
2011  072A  86          	add	a, (hl)
2012  072B  C6 04       	add	a,0x04
2013  072D  32 00 00    	ld	(_s_tile1),a
2014  0730  C9          	ret
2015  0731              	SECTION code_compiler
2016  0731              ;	---------------------------------
2017  0731              ; Function player_tile
2018  0731              ; ---------------------------------
2019  0731              _player_tile:
2020  0731  CD 00 00    	call	___sdcc_enter_ix
2021  0734  21 05 00    	ld	hl,0x0005
2022  0737  39          	add	hl, sp
2023  0738  EB          	ex	de,hl
2024  0739  21 04 00    	ld	hl,0x0004
2025  073C  39          	add	hl, sp
2026  073D  4D          	ld	c, l
2027  073E  44          	ld	b, h
2028  073F  D5          	push	de
2029  0740  21 00 00    	ld	hl,_sprite
2030  0743  E5          	push	hl
2031  0744  C5          	push	bc
2032  0745  CD 00 00    	call	_spr_tile_dir
2033  0748  F1          	pop	af
2034  0749  F1          	pop	af
2035  074A  F1          	pop	af
2036  074B  7D          	ld	a,l
2037  074C  32 07 00    	ld	((_tile + 0x0007)),a
2038  074F  DD E1       	pop	ix
2039  0751  C9          	ret
2040  0752              	SECTION code_compiler
2041  0752              ;	---------------------------------
2042  0752              ; Function player_check_map
2043  0752              ; ---------------------------------
2044  0752              _player_check_map:
2045  0752  21 07 00    	ld	hl,+(_col + 0x0007)
2046  0755  56          	ld	d, (hl)
2047  0756  21 07 00    	ld	hl,+(_lin + 0x0007)
2048  0759  5E          	ld	e, (hl)
2049  075A  D5          	push	de
2050  075B  CD 00 00    	call	_spr_calc_index
2051  075E  F1          	pop	af
2052  075F  7D          	ld	a,l
2053  0760  32 00 00    	ld	(_sprite_curr_index),a
2054  0763  CD AC 07    	call	_player_pick_item
2055  0766  21 07 00    	ld	hl,+(_col + 0x0007)
2056  0769  46          	ld	b, (hl)
2057  076A  3A 07 00    	ld	a,(_lin + 0x0007)
2058  076D  E6 0F       	and	a,0x0f
2059  076F  4F          	ld	c, a
2060  0770  CB 40       	bit	0, b
2061  0772  20 10       	jr	NZ,l_player_check_map_00108
2062  0774  79          	ld	a, c
2063  0775  B7          	or	a, a
2064  0776  28 33       	jr	Z,l_player_check_map_00110
2065  0778  21 00 00    	ld	hl,_sprite_curr_index
2066  077B  7E          	ld	a, (hl)
2067  077C  C6 10       	add	a,0x10
2068  077E  77          	ld	(hl), a
2069  077F  CD AC 07    	call	_player_pick_item
2070  0782  18 27       	jr	l_player_check_map_00110
2071  0784              l_player_check_map_00108:
2072  0784  21 00 00    	ld	hl,_sprite_curr_index
2073  0787  46          	ld	b, (hl)
2074  0788  04          	inc	b
2075  0789  79          	ld	a, c
2076  078A  B7          	or	a, a
2077  078B  20 06       	jr	NZ,l_player_check_map_00105
2078  078D  70          	ld	(hl), b
2079  078E  CD AC 07    	call	_player_pick_item
2080  0791  18 18       	jr	l_player_check_map_00110
2081  0793              l_player_check_map_00105:
2082  0793  21 00 00    	ld	hl,_sprite_curr_index
2083  0796  70          	ld	(hl), b
2084  0797  CD AC 07    	call	_player_pick_item
2085  079A  21 00 00    	ld	hl,_sprite_curr_index
2086  079D  7E          	ld	a, (hl)
2087  079E  C6 0F       	add	a,0x0f
2088  07A0  77          	ld	(hl), a
2089  07A1  CD AC 07    	call	_player_pick_item
2090  07A4  21 00 00    	ld	hl,_sprite_curr_index
2091  07A7  34          	inc	(hl)
2092  07A8  CD AC 07    	call	_player_pick_item
2093  07AB              l_player_check_map_00110:
2094  07AB  C9          	ret
2095  07AC              	SECTION code_compiler
2096  07AC              ;	---------------------------------
2097  07AC              ; Function player_pick_item
2098  07AC              ; ---------------------------------
2099  07AC              _player_pick_item:
2100  07AC  CD 00 00    	call	___sdcc_enter_ix
2101  07AF  3B          	dec	sp
2102  07B0  01 00 00    	ld	bc,_scr_map+0
2103  07B3  2A 00 00    	ld	hl,(_sprite_curr_index)
2104  07B6  26 00       	ld	h,0x00
2105  07B8  09          	add	hl,bc
2106  07B9  7E          	ld	a,(hl)
2107  07BA  DD 77 FF    	ld	(ix-1),a
2108  07BD  D6 24       	sub	a,0x24
2109  07BF  DA 52 09    	jp	C, l_player_pick_item_00131
2110  07C2  3E 2F       	ld	a,0x2f
2111  07C4  DD 96 FF    	sub	a,(ix-1)
2112  07C7  DA 52 09    	jp	C, l_player_pick_item_00131
2113  07CA  CD 00 00    	call	_ay_reset
2114  07CD  79          	ld	a, c
2115  07CE  21 00 00    	ld	hl,_sprite_curr_index
2116  07D1  86          	add	a, (hl)
2117  07D2  4F          	ld	c, a
2118  07D3  78          	ld	a, b
2119  07D4  CE 00       	adc	a,0x00
2120  07D6  47          	ld	b, a
2121  07D7  5E          	ld	e, (hl)
2122  07D8  16 00       	ld	d,0x00
2123  07DA  C5          	push	bc
2124  07DB  EB          	ex	de,hl
2125  07DC  CD 00 00    	call	_game_match_back
2126  07DF  C1          	pop	bc
2127  07E0  7D          	ld	a,l
2128  07E1  02          	ld	(bc), a
2129  07E2  2A 00 00    	ld	hl,(_sprite_curr_index)
2130  07E5  26 00       	ld	h,0x00
2131  07E7  CD 00 00    	call	_game_obj_set
2132  07EA  3A 00 00    	ld	a,(_sprite_curr_index)
2133  07ED  07          	rlca
2134  07EE  07          	rlca
2135  07EF  07          	rlca
2136  07F0  07          	rlca
2137  07F1  E6 0F       	and	a,0x0f
2138  07F3  07          	rlca
2139  07F4  07          	rlca
2140  07F5  07          	rlca
2141  07F6  07          	rlca
2142  07F7  E6 F0       	and	a,0xf0
2143  07F9  32 00 00    	ld	(_s_lin1),a
2144  07FC  3A 00 00    	ld	a,(_sprite_curr_index)
2145  07FF  E6 0F       	and	a,0x0f
2146  0801  87          	add	a, a
2147  0802  32 00 00    	ld	(_s_col1),a
2148  0805  21 00 00    	ld	hl,0x0000
2149  0808  E5          	push	hl
2150  0809  21 84 03    	ld	hl,0x0384
2151  080C  E5          	push	hl
2152  080D  F5          	push	af
2153  080E  33          	inc	sp
2154  080F  3A 00 00    	ld	a,(_s_lin1)
2155  0812  F5          	push	af
2156  0813  33          	inc	sp
2157  0814  CD 00 00    	call	_spr_add_anim
2158  0817  F1          	pop	af
2159  0818  F1          	pop	af
2160  0819  F1          	pop	af
2161  081A  DD 7E FF    	ld	a,(ix-1)
2162  081D  D6 24       	sub	a,0x24
2163  081F  DA 52 09    	jp	C, l_player_pick_item_00131
2164  0822  3E 2F       	ld	a,0x2f
2165  0824  DD 96 FF    	sub	a,(ix-1)
2166  0827  DA 52 09    	jp	C, l_player_pick_item_00131
2167  082A  DD 7E FF    	ld	a,(ix-1)
2168  082D  C6 DC       	add	a,0xdc
2169  082F  4F          	ld	c, a
2170  0830  06 00       	ld	b,0x00
2171  0832  21 39 08    	ld	hl,l_player_pick_item_00177
2172  0835  09          	add	hl, bc
2173  0836  09          	add	hl, bc
2174  0837  09          	add	hl, bc
2175  0838  E9          	jp	(hl)
2176  0839              l_player_pick_item_00177:
2177  0839  C3 5D 08    	jp	l_player_pick_item_00101
2178  083C  C3 6B 08    	jp	l_player_pick_item_00102
2179  083F  C3 79 08    	jp	l_player_pick_item_00103
2180  0842  C3 87 08    	jp	l_player_pick_item_00104
2181  0845  C3 95 08    	jp	l_player_pick_item_00105
2182  0848  C3 C2 08    	jp	l_player_pick_item_00109
2183  084B  C3 DC 08    	jp	l_player_pick_item_00112
2184  084E  C3 F4 08    	jp	l_player_pick_item_00115
2185  0851  C3 0C 09    	jp	l_player_pick_item_00118
2186  0854  C3 24 09    	jp	l_player_pick_item_00121
2187  0857  C3 3C 09    	jp	l_player_pick_item_00124
2188  085A  C3 B6 08    	jp	l_player_pick_item_00108
2189  085D              l_player_pick_item_00101:
2190  085D  CD 00 00    	call	_audio_efecto
2191  0860  21 00 00    	ld	hl,_player_keys
2192  0863  36 01       	ld	(hl),0x01
2193  0865  CD 00 00    	call	_game_update_stats
2194  0868  C3 52 09    	jp	l_player_pick_item_00131
2195  086B              l_player_pick_item_00102:
2196  086B  CD 00 00    	call	_audio_efecto
2197  086E  21 01 00    	ld	hl, +(_player_keys + 0x0001)
2198  0871  36 01       	ld	(hl),0x01
2199  0873  CD 00 00    	call	_game_update_stats
2200  0876  C3 52 09    	jp	l_player_pick_item_00131
2201  0879              l_player_pick_item_00103:
2202  0879  CD 00 00    	call	_audio_efecto
2203  087C  21 02 00    	ld	hl, +(_player_keys + 0x0002)
2204  087F  36 01       	ld	(hl),0x01
2205  0881  CD 00 00    	call	_game_update_stats
2206  0884  C3 52 09    	jp	l_player_pick_item_00131
2207  0887              l_player_pick_item_00104:
2208  0887  CD 00 00    	call	_audio_efecto
2209  088A  21 03 00    	ld	hl, +(_player_keys + 0x0003)
2210  088D  36 01       	ld	(hl),0x01
2211  088F  CD 00 00    	call	_game_update_stats
2212  0892  C3 52 09    	jp	l_player_pick_item_00131
2213  0895              l_player_pick_item_00105:
2214  0895  CD 00 00    	call	_audio_coin
2215  0898  21 01 00    	ld	hl,0x0001
2216  089B  CD 54 0C    	call	_player_score_add
2217  089E  21 00 00    	ld	hl,_player_coins
2218  08A1  7E          	ld	a,(hl)
2219  08A2  3C          	inc	a
2220  08A3  77          	ld	(hl),a
2221  08A4  D6 64       	sub	a,0x64
2222  08A6  20 08       	jr	NZ,l_player_pick_item_00107
2223  08A8  CD B7 05    	call	_player_1up
2224  08AB  21 00 00    	ld	hl,_player_coins
2225  08AE  36 00       	ld	(hl),0x00
2226  08B0              l_player_pick_item_00107:
2227  08B0  CD 00 00    	call	_game_update_stats
2228  08B3  C3 52 09    	jp	l_player_pick_item_00131
2229  08B6              l_player_pick_item_00108:
2230  08B6  CD 00 00    	call	_audio_magia1
2231  08B9  21 0A 00    	ld	hl,0x000a
2232  08BC  CD 54 0C    	call	_player_score_add
2233  08BF  C3 52 09    	jp	l_player_pick_item_00131
2234  08C2              l_player_pick_item_00109:
2235  08C2  CD 00 00    	call	_audio_efecto
2236  08C5  21 00 00    	ld	hl,_player_str
2237  08C8  34          	inc	(hl)
2238  08C9  21 00 00    	ld	hl,_player_max_vita
2239  08CC  7E          	ld	a, (hl)
2240  08CD  D6 C8       	sub	a,0xc8
2241  08CF  D2 52 09    	jp	NC, l_player_pick_item_00131
2242  08D2  7E          	ld	a, (hl)
2243  08D3  C6 0A       	add	a,0x0a
2244  08D5  77          	ld	(hl), a
2245  08D6  CD 00 00    	call	_game_update_stats
2246  08D9  C3 52 09    	jp	l_player_pick_item_00131
2247  08DC              l_player_pick_item_00112:
2248  08DC  CD 00 00    	call	_audio_efecto
2249  08DF  21 00 00    	ld	hl,_player_str
2250  08E2  34          	inc	(hl)
2251  08E3  21 00 00    	ld	hl,_player_max_vita
2252  08E6  7E          	ld	a, (hl)
2253  08E7  D6 C8       	sub	a,0xc8
2254  08E9  30 67       	jr	NC,l_player_pick_item_00131
2255  08EB  7E          	ld	a, (hl)
2256  08EC  C6 0A       	add	a,0x0a
2257  08EE  77          	ld	(hl), a
2258  08EF  CD 00 00    	call	_game_update_stats
2259  08F2  18 5E       	jr	l_player_pick_item_00131
2260  08F4              l_player_pick_item_00115:
2261  08F4  CD 00 00    	call	_audio_efecto
2262  08F7  21 00 00    	ld	hl,_player_str
2263  08FA  34          	inc	(hl)
2264  08FB  21 00 00    	ld	hl,_player_max_vita
2265  08FE  7E          	ld	a, (hl)
2266  08FF  D6 C8       	sub	a,0xc8
2267  0901  30 4F       	jr	NC,l_player_pick_item_00131
2268  0903  7E          	ld	a, (hl)
2269  0904  C6 0A       	add	a,0x0a
2270  0906  77          	ld	(hl), a
2271  0907  CD 00 00    	call	_game_update_stats
2272  090A  18 46       	jr	l_player_pick_item_00131
2273  090C              l_player_pick_item_00118:
2274  090C  CD 00 00    	call	_audio_efecto
2275  090F  21 00 00    	ld	hl,_player_int
2276  0912  34          	inc	(hl)
2277  0913  21 00 00    	ld	hl,_player_max_mana
2278  0916  7E          	ld	a, (hl)
2279  0917  D6 C8       	sub	a,0xc8
2280  0919  30 37       	jr	NC,l_player_pick_item_00131
2281  091B  7E          	ld	a, (hl)
2282  091C  C6 0A       	add	a,0x0a
2283  091E  77          	ld	(hl), a
2284  091F  CD 00 00    	call	_game_update_stats
2285  0922  18 2E       	jr	l_player_pick_item_00131
2286  0924              l_player_pick_item_00121:
2287  0924  CD 00 00    	call	_audio_efecto
2288  0927  21 00 00    	ld	hl,_player_int
2289  092A  34          	inc	(hl)
2290  092B  21 00 00    	ld	hl,_player_max_mana
2291  092E  7E          	ld	a, (hl)
2292  092F  D6 C8       	sub	a,0xc8
2293  0931  30 1F       	jr	NC,l_player_pick_item_00131
2294  0933  7E          	ld	a, (hl)
2295  0934  C6 0A       	add	a,0x0a
2296  0936  77          	ld	(hl), a
2297  0937  CD 00 00    	call	_game_update_stats
2298  093A  18 16       	jr	l_player_pick_item_00131
2299  093C              l_player_pick_item_00124:
2300  093C  CD 00 00    	call	_audio_efecto
2301  093F  21 00 00    	ld	hl,_player_int
2302  0942  34          	inc	(hl)
2303  0943  21 00 00    	ld	hl,_player_max_mana
2304  0946  7E          	ld	a, (hl)
2305  0947  D6 C8       	sub	a,0xc8
2306  0949  30 07       	jr	NC,l_player_pick_item_00131
2307  094B  7E          	ld	a, (hl)
2308  094C  C6 0A       	add	a,0x0a
2309  094E  77          	ld	(hl), a
2310  094F  CD 00 00    	call	_game_update_stats
2311  0952              l_player_pick_item_00131:
2312  0952  33          	inc	sp
2313  0953  DD E1       	pop	ix
2314  0955  C9          	ret
2315  0956              	SECTION code_compiler
2316  0956              ;	---------------------------------
2317  0956              ; Function player_hit_platform
2318  0956              ; ---------------------------------
2319  0956              _player_hit_platform:
2320  0956  CD 00 00    	call	___sdcc_enter_ix
2321  0959  F5          	push	af
2322  095A  3B          	dec	sp
2323  095B  3A 00 00    	ld	a,(_player_hit_lin)
2324  095E  B7          	or	a, a
2325  095F  C2 1E 0C    	jp	NZ, l_player_hit_platform_00147
2326  0962  01 07 00    	ld	bc,_lin+7
2327  0965  0A          	ld	a, (bc)
2328  0966  5F          	ld	e, a
2329  0967  3E 10       	ld	a,0x10
2330  0969  93          	sub	a, e
2331  096A  D2 1E 0C    	jp	NC, l_player_hit_platform_00147
2332  096D  2A 00 00    	ld	hl,(_index1)
2333  0970  11 00 00    	ld	de,_scr_map
2334  0973  19          	add	hl,de
2335  0974  7E          	ld	a,(hl)
2336  0975  EB          	ex	de,hl
2337  0976  FE 45       	cp	a,0x45
2338  0978  DA 1E 0C    	jp	C,l_player_hit_platform_00147
2339  097B  D6 4D       	sub	a,0x4d
2340  097D  20 42       	jr	NZ,l_player_hit_platform_00102
2341  097F  2A 00 00    	ld	hl,(_index1)
2342  0982  D5          	push	de
2343  0983  CD 00 00    	call	_game_match_back
2344  0986  D1          	pop	de
2345  0987  7D          	ld	a,l
2346  0988  12          	ld	(de), a
2347  0989  2A 00 00    	ld	hl,(_index1)
2348  098C  CD 00 00    	call	_game_obj_set
2349  098F  CD 00 00    	call	_audio_explosion
2350  0992  21 00 00    	ld	hl,_index1
2351  0995  7E          	ld	a, (hl)
2352  0996  E6 0F       	and	a,0x0f
2353  0998  87          	add	a, a
2354  0999  57          	ld	d, a
2355  099A  4E          	ld	c, (hl)
2356  099B  23          	inc	hl
2357  099C  5E          	ld	e, (hl)
2358  099D  06 04       	ld	b,0x04
2359  099F  79          	ld	a,c
2360  09A0              l_player_hit_platform_00260:
2361  09A0  CB 3B       	srl	e
2362  09A2  1F          	rra
2363  09A3  10 FB       	djnz	l_player_hit_platform_00260
2364  09A5  07          	rlca
2365  09A6  07          	rlca
2366  09A7  07          	rlca
2367  09A8  07          	rlca
2368  09A9  E6 F0       	and	a,0xf0
2369  09AB  47          	ld	b, a
2370  09AC  21 00 00    	ld	hl,0x0000
2371  09AF  E5          	push	hl
2372  09B0  21 87 03    	ld	hl,0x0387
2373  09B3  E5          	push	hl
2374  09B4  58          	ld	e,b
2375  09B5  D5          	push	de
2376  09B6  CD 00 00    	call	_spr_add_anim
2377  09B9  F1          	pop	af
2378  09BA  F1          	pop	af
2379  09BB  F1          	pop	af
2380  09BC  2E 01       	ld	l,0x01
2381  09BE  C3 20 0C    	jp	l_player_hit_platform_00150
2382  09C1              l_player_hit_platform_00102:
2383  09C1  ED 5B 00 00 	ld	de,(_curr_time)
2384  09C5  ED 53 0E 00 	ld	(_spr_timer + 0x000e),de
2385  09C9  0A          	ld	a, (bc)
2386  09CA  5F          	ld	e, a
2387  09CB  16 00       	ld	d,0x00
2388  09CD  21 F8 FF    	ld	hl,0xfff8
2389  09D0  19          	add	hl,de
2390  09D1  EB          	ex	de,hl
2391  09D2  7B          	ld	a,e
2392  09D3  1E 04       	ld	e,0x04
2393  09D5              l_player_hit_platform_00261:
2394  09D5  CB 2A       	sra	d
2395  09D7  1F          	rra
2396  09D8  1D          	dec	e
2397  09D9  20 FA       	jr	NZ,l_player_hit_platform_00261
2398  09DB  07          	rlca
2399  09DC  07          	rlca
2400  09DD  07          	rlca
2401  09DE  07          	rlca
2402  09DF  E6 F0       	and	a,0xf0
2403  09E1  C6 08       	add	a,0x08
2404  09E3  32 00 00    	ld	(_player_hit_lin),a
2405  09E6  21 07 00    	ld	hl,+(_col + 0x0007)
2406  09E9  5E          	ld	e, (hl)
2407  09EA  CB 43       	bit	0, e
2408  09EC  20 06       	jr	NZ,l_player_hit_platform_00113
2409  09EE  21 00 00    	ld	hl,_player_hit_col
2410  09F1  73          	ld	(hl), e
2411  09F2  18 2C       	jr	l_player_hit_platform_00114
2412  09F4              l_player_hit_platform_00113:
2413  09F4  2A 07 00    	ld	hl,(_state + 0x0007)
2414  09F7  53          	ld	d, e
2415  09F8  14          	inc	d
2416  09F9  1D          	dec	e
2417  09FA  CB 5D       	bit	3, l
2418  09FC  28 12       	jr	Z,l_player_hit_platform_00110
2419  09FE  3A 00 00    	ld	a,(_g_player_hit_right)
2420  0A01  B7          	or	a, a
2421  0A02  28 06       	jr	Z,l_player_hit_platform_00104
2422  0A04  21 00 00    	ld	hl,_player_hit_col
2423  0A07  72          	ld	(hl), d
2424  0A08  18 16       	jr	l_player_hit_platform_00114
2425  0A0A              l_player_hit_platform_00104:
2426  0A0A  21 00 00    	ld	hl,_player_hit_col
2427  0A0D  73          	ld	(hl), e
2428  0A0E  18 10       	jr	l_player_hit_platform_00114
2429  0A10              l_player_hit_platform_00110:
2430  0A10  3A 00 00    	ld	a,(_g_player_hit_left)
2431  0A13  B7          	or	a, a
2432  0A14  28 06       	jr	Z,l_player_hit_platform_00107
2433  0A16  21 00 00    	ld	hl,_player_hit_col
2434  0A19  73          	ld	(hl), e
2435  0A1A  18 04       	jr	l_player_hit_platform_00114
2436  0A1C              l_player_hit_platform_00107:
2437  0A1C  21 00 00    	ld	hl,_player_hit_col
2438  0A1F  72          	ld	(hl), d
2439  0A20              l_player_hit_platform_00114:
2440  0A20  11 00 00    	ld	de,_scr_map
2441  0A23  2A 00 00    	ld	hl,(_index1)
2442  0A26  19          	add	hl,de
2443  0A27  7E          	ld	a,(hl)
2444  0A28  FE 5A       	cp	a,0x5a
2445  0A2A  28 05       	jr	Z,l_player_hit_platform_00141
2446  0A2C  D6 5D       	sub	a,0x5d
2447  0A2E  C2 ED 0B    	jp	NZ,l_player_hit_platform_00142
2448  0A31              l_player_hit_platform_00141:
2449  0A31  3A 00 00    	ld	a,(_game_boss)
2450  0A34  B7          	or	a, a
2451  0A35  28 0B       	jr	Z,l_player_hit_platform_00176
2452  0A37  3A 00 00    	ld	a,(_game_mush_count)
2453  0A3A  B7          	or	a, a
2454  0A3B  28 05       	jr	Z,l_player_hit_platform_00176
2455  0A3D  2E 00       	ld	l,0x00
2456  0A3F  C3 20 0C    	jp	l_player_hit_platform_00150
2457  0A42              l_player_hit_platform_00176:
2458  0A42  DD 36 FD 00 	ld	(ix-3),0x00
2459  0A46              l_player_hit_platform_00138:
2460  0A46  DD 7E FD    	ld	a,(ix-3)
2461  0A49  D6 07       	sub	a,0x07
2462  0A4B  D2 ED 0B    	jp	NC, l_player_hit_platform_00142
2463  0A4E  3E 00       	ld	a, +((_mush_index) & 0xFF)
2464  0A50  DD 86 FD    	add	a,(ix-3)
2465  0A53  6F          	ld	l, a
2466  0A54  3E 00       	ld	a, +((_mush_index) / 256)
2467  0A56  CE 00       	adc	a,0x00
2468  0A58  67          	ld	h, a
2469  0A59  5E          	ld	e, (hl)
2470  0A5A  16 00       	ld	d,0x00
2471  0A5C  21 00 00    	ld	hl,_index1
2472  0A5F  7E          	ld	a, (hl)
2473  0A60  93          	sub	a, e
2474  0A61  C2 E7 0B    	jp	NZ,l_player_hit_platform_00137
2475  0A64  23          	inc	hl
2476  0A65  7E          	ld	a, (hl)
2477  0A66  92          	sub	a, d
2478  0A67  C2 E7 0B    	jp	NZ,l_player_hit_platform_00137
2479  0A6A  0A          	ld	a, (bc)
2480  0A6B  07          	rlca
2481  0A6C  07          	rlca
2482  0A6D  07          	rlca
2483  0A6E  07          	rlca
2484  0A6F  E6 0F       	and	a,0x0f
2485  0A71  07          	rlca
2486  0A72  07          	rlca
2487  0A73  07          	rlca
2488  0A74  07          	rlca
2489  0A75  E6 F0       	and	a,0xf0
2490  0A77  C6 E0       	add	a,0xe0
2491  0A79  32 00 00    	ld	(_s_lin1),a
2492  0A7C  3A 00 00    	ld	a,(_player_hit_col)
2493  0A7F  CB 3F       	srl	a
2494  0A81  87          	add	a, a
2495  0A82  32 00 00    	ld	(_s_col1),a
2496  0A85  1E 00       	ld	e,0x00
2497  0A87              l_player_hit_platform_00120:
2498  0A87  7B          	ld	a, e
2499  0A88  D6 07       	sub	a,0x07
2500  0A8A  30 21       	jr	NC,l_player_hit_platform_00122
2501  0A8C  16 00       	ld	d,0x00
2502  0A8E  21 00 00    	ld	hl,_mush_index
2503  0A91  19          	add	hl, de
2504  0A92  56          	ld	d, (hl)
2505  0A93  DD 72 FE    	ld	(ix-2),d
2506  0A96  DD 36 FF 00 	ld	(ix-1),0x00
2507  0A9A  21 00 00    	ld	hl,_index1
2508  0A9D  7E          	ld	a, (hl)
2509  0A9E  DD 96 FE    	sub	a,(ix-2)
2510  0AA1  20 07       	jr	NZ,l_player_hit_platform_00270
2511  0AA3  23          	inc	hl
2512  0AA4  7E          	ld	a, (hl)
2513  0AA5  DD 96 FF    	sub	a,(ix-1)
2514  0AA8  28 03       	jr	Z,l_player_hit_platform_00122
2515  0AAA              l_player_hit_platform_00270:
2516  0AAA  1C          	inc	e
2517  0AAB  18 DA       	jr	l_player_hit_platform_00120
2518  0AAD              l_player_hit_platform_00122:
2519  0AAD  16 00       	ld	d,0x00
2520  0AAF  21 00 00    	ld	hl,_mush_class
2521  0AB2  19          	add	hl, de
2522  0AB3  7E          	ld	a, (hl)
2523  0AB4  FE 79       	cp	a,0x79
2524  0AB6  28 18       	jr	Z,l_player_hit_platform_00123
2525  0AB8  FE 7A       	cp	a,0x7a
2526  0ABA  28 31       	jr	Z,l_player_hit_platform_00124
2527  0ABC  FE 7B       	cp	a,0x7b
2528  0ABE  28 65       	jr	Z,l_player_hit_platform_00126
2529  0AC0  FE 7C       	cp	a,0x7c
2530  0AC2  28 45       	jr	Z,l_player_hit_platform_00125
2531  0AC4  FE 7D       	cp	a,0x7d
2532  0AC6  CA 5D 0B    	jp	Z,l_player_hit_platform_00128
2533  0AC9  D6 7E       	sub	a,0x7e
2534  0ACB  28 74       	jr	Z,l_player_hit_platform_00127
2535  0ACD  C3 77 0B    	jp	l_player_hit_platform_00129
2536  0AD0              l_player_hit_platform_00123:
2537  0AD0  2E 02       	ld	l,0x02
2538  0AD2  CD 00 00    	call	_zx_border_fastcall
2539  0AD5  3A 00 00    	ld	a,(_s_col1)
2540  0AD8  C5          	push	bc
2541  0AD9  21 06 FF    	ld	hl,0xff06
2542  0ADC  E5          	push	hl
2543  0ADD  F5          	push	af
2544  0ADE  33          	inc	sp
2545  0ADF  3A 00 00    	ld	a,(_s_lin1)
2546  0AE2  F5          	push	af
2547  0AE3  33          	inc	sp
2548  0AE4  CD 00 00    	call	_enemy_init
2549  0AE7  F1          	pop	af
2550  0AE8  F1          	pop	af
2551  0AE9  C1          	pop	bc
2552  0AEA  C3 77 0B    	jp	l_player_hit_platform_00129
2553  0AED              l_player_hit_platform_00124:
2554  0AED  2E 02       	ld	l,0x02
2555  0AEF  CD 00 00    	call	_zx_border_fastcall
2556  0AF2  3A 00 00    	ld	a,(_s_col1)
2557  0AF5  C5          	push	bc
2558  0AF6  21 06 01    	ld	hl,0x0106
2559  0AF9  E5          	push	hl
2560  0AFA  F5          	push	af
2561  0AFB  33          	inc	sp
2562  0AFC  3A 00 00    	ld	a,(_s_lin1)
2563  0AFF  F5          	push	af
2564  0B00  33          	inc	sp
2565  0B01  CD 00 00    	call	_enemy_init
2566  0B04  F1          	pop	af
2567  0B05  F1          	pop	af
2568  0B06  C1          	pop	bc
2569  0B07  18 6E       	jr	l_player_hit_platform_00129
2570  0B09              l_player_hit_platform_00125:
2571  0B09  2E 01       	ld	l,0x01
2572  0B0B  CD 00 00    	call	_zx_border_fastcall
2573  0B0E  3A 00 00    	ld	a,(_s_col1)
2574  0B11  C5          	push	bc
2575  0B12  21 07 01    	ld	hl,0x0107
2576  0B15  E5          	push	hl
2577  0B16  F5          	push	af
2578  0B17  33          	inc	sp
2579  0B18  3A 00 00    	ld	a,(_s_lin1)
2580  0B1B  F5          	push	af
2581  0B1C  33          	inc	sp
2582  0B1D  CD 00 00    	call	_enemy_init
2583  0B20  F1          	pop	af
2584  0B21  F1          	pop	af
2585  0B22  C1          	pop	bc
2586  0B23  18 52       	jr	l_player_hit_platform_00129
2587  0B25              l_player_hit_platform_00126:
2588  0B25  2E 01       	ld	l,0x01
2589  0B27  CD 00 00    	call	_zx_border_fastcall
2590  0B2A  3A 00 00    	ld	a,(_s_col1)
2591  0B2D  C5          	push	bc
2592  0B2E  21 07 FF    	ld	hl,0xff07
2593  0B31  E5          	push	hl
2594  0B32  F5          	push	af
2595  0B33  33          	inc	sp
2596  0B34  3A 00 00    	ld	a,(_s_lin1)
2597  0B37  F5          	push	af
2598  0B38  33          	inc	sp
2599  0B39  CD 00 00    	call	_enemy_init
2600  0B3C  F1          	pop	af
2601  0B3D  F1          	pop	af
2602  0B3E  C1          	pop	bc
2603  0B3F  18 36       	jr	l_player_hit_platform_00129
2604  0B41              l_player_hit_platform_00127:
2605  0B41  2E 04       	ld	l,0x04
2606  0B43  CD 00 00    	call	_zx_border_fastcall
2607  0B46  3A 00 00    	ld	a,(_s_col1)
2608  0B49  C5          	push	bc
2609  0B4A  21 08 01    	ld	hl,0x0108
2610  0B4D  E5          	push	hl
2611  0B4E  F5          	push	af
2612  0B4F  33          	inc	sp
2613  0B50  3A 00 00    	ld	a,(_s_lin1)
2614  0B53  F5          	push	af
2615  0B54  33          	inc	sp
2616  0B55  CD 00 00    	call	_enemy_init
2617  0B58  F1          	pop	af
2618  0B59  F1          	pop	af
2619  0B5A  C1          	pop	bc
2620  0B5B  18 1A       	jr	l_player_hit_platform_00129
2621  0B5D              l_player_hit_platform_00128:
2622  0B5D  2E 04       	ld	l,0x04
2623  0B5F  CD 00 00    	call	_zx_border_fastcall
2624  0B62  3A 00 00    	ld	a,(_s_col1)
2625  0B65  C5          	push	bc
2626  0B66  21 08 FF    	ld	hl,0xff08
2627  0B69  E5          	push	hl
2628  0B6A  F5          	push	af
2629  0B6B  33          	inc	sp
2630  0B6C  3A 00 00    	ld	a,(_s_lin1)
2631  0B6F  F5          	push	af
2632  0B70  33          	inc	sp
2633  0B71  CD 00 00    	call	_enemy_init
2634  0B74  F1          	pop	af
2635  0B75  F1          	pop	af
2636  0B76  C1          	pop	bc
2637  0B77              l_player_hit_platform_00129:
2638  0B77  21 00 00    	ld	hl,_game_mush_count
2639  0B7A  34          	inc	(hl)
2640  0B7B  3A 00 00    	ld	a,(_game_boss)
2641  0B7E  B7          	or	a, a
2642  0B7F  20 66       	jr	NZ,l_player_hit_platform_00137
2643  0B81  3A 00 00    	ld	a,(_index1)
2644  0B84  C6 F0       	add	a,0xf0
2645  0B86  32 00 00    	ld	(_index0),a
2646  0B89  3A 01 00    	ld	a,(_index1 + 1)
2647  0B8C  CE FF       	adc	a,0xff
2648  0B8E  21 01 00    	ld	hl,_index0 + 1
2649  0B91  77          	ld	(hl), a
2650  0B92  3E 00       	ld	a, +((_scr_map) & 0xFF)
2651  0B94  2B          	dec	hl
2652  0B95  86          	add	a, (hl)
2653  0B96  5F          	ld	e, a
2654  0B97  3E 00       	ld	a, +((_scr_map) / 256)
2655  0B99  23          	inc	hl
2656  0B9A  8E          	adc	a, (hl)
2657  0B9B  57          	ld	d, a
2658  0B9C  C5          	push	bc
2659  0B9D  D5          	push	de
2660  0B9E  2B          	dec	hl
2661  0B9F  7E          	ld	a, (hl)
2662  0BA0  23          	inc	hl
2663  0BA1  66          	ld	h, (hl)
2664  0BA2  6F          	ld	l, a
2665  0BA3  CD 00 00    	call	_game_match_back
2666  0BA6  D1          	pop	de
2667  0BA7  C1          	pop	bc
2668  0BA8  7D          	ld	a,l
2669  0BA9  12          	ld	(de), a
2670  0BAA  11 00 00    	ld	de,_scr_map
2671  0BAD  2A 00 00    	ld	hl,(_index1)
2672  0BB0  19          	add	hl,de
2673  0BB1  7E          	ld	a,(hl)
2674  0BB2  EB          	ex	de,hl
2675  0BB3  FE 5A       	cp	a,0x5a
2676  0BB5  28 04       	jr	Z,l_player_hit_platform_00130
2677  0BB7  D6 5D       	sub	a,0x5d
2678  0BB9  20 05       	jr	NZ,l_player_hit_platform_00131
2679  0BBB              l_player_hit_platform_00130:
2680  0BBB  3E 4F       	ld	a,0x4f
2681  0BBD  12          	ld	(de), a
2682  0BBE  18 03       	jr	l_player_hit_platform_00132
2683  0BC0              l_player_hit_platform_00131:
2684  0BC0  3E 54       	ld	a,0x54
2685  0BC2  12          	ld	(de), a
2686  0BC3              l_player_hit_platform_00132:
2687  0BC3  2A 00 00    	ld	hl,(_index1)
2688  0BC6  11 F0 FF    	ld	de,0xfff0
2689  0BC9  19          	add	hl,de
2690  0BCA  EB          	ex	de,hl
2691  0BCB  21 01 00    	ld	hl,_index1 + 1
2692  0BCE  C5          	push	bc
2693  0BCF  EB          	ex	de,hl
2694  0BD0  CD 00 00    	call	_game_obj_set
2695  0BD3  C1          	pop	bc
2696  0BD4  3A 00 00    	ld	a,(_s_lin1)
2697  0BD7  C6 10       	add	a,0x10
2698  0BD9  57          	ld	d, a
2699  0BDA  3A 00 00    	ld	a,(_s_col1)
2700  0BDD  C5          	push	bc
2701  0BDE  F5          	push	af
2702  0BDF  33          	inc	sp
2703  0BE0  1E 4F       	ld	e,0x4f
2704  0BE2  D5          	push	de
2705  0BE3  CD 00 00    	call	_NIRVANAP_drawT_callee
2706  0BE6  C1          	pop	bc
2707  0BE7              l_player_hit_platform_00137:
2708  0BE7  DD 34 FD    	inc	(ix-3)
2709  0BEA  C3 46 0A    	jp	l_player_hit_platform_00138
2710  0BED              l_player_hit_platform_00142:
2711  0BED  CD 00 00    	call	_audio_golpe
2712  0BF0  2E 01       	ld	l,0x01
2713  0BF2  CD 00 00    	call	_spr_brick_anim
2714  0BF5  2A FF FF    	ld	hl,(_player_hit_col - 1)
2715  0BF8  3A 00 00    	ld	a,(_player_hit_lin)
2716  0BFB  6F          	ld	l,a
2717  0BFC  E5          	push	hl
2718  0BFD  CD 00 00    	call	_spr_calc_index
2719  0C00  F1          	pop	af
2720  0C01  22 00 00    	ld	(_index1),hl
2721  0C04  3E 10       	ld	a,0x10
2722  0C06  21 00 00    	ld	hl,_index1
2723  0C09  BE          	cp	a, (hl)
2724  0C0A  3E 00       	ld	a,0x00
2725  0C0C  23          	inc	hl
2726  0C0D  9E          	sbc	a, (hl)
2727  0C0E  30 0A       	jr	NC,l_player_hit_platform_00145
2728  0C10  2B          	dec	hl
2729  0C11  7E          	ld	a, (hl)
2730  0C12  C6 F0       	add	a,0xf0
2731  0C14  32 00 00    	ld	(_sprite_curr_index),a
2732  0C17  CD AC 07    	call	_player_pick_item
2733  0C1A              l_player_hit_platform_00145:
2734  0C1A  2E 01       	ld	l,0x01
2735  0C1C  18 02       	jr	l_player_hit_platform_00150
2736  0C1E              l_player_hit_platform_00147:
2737  0C1E  2E 00       	ld	l,0x00
2738  0C20              l_player_hit_platform_00150:
2739  0C20  DD F9       	ld	sp, ix
2740  0C22  DD E1       	pop	ix
2741  0C24  C9          	ret
2742  0C25              	SECTION code_compiler
2743  0C25              ;	---------------------------------
2744  0C25              ; Function player_hit_platform_clear
2745  0C25              ; ---------------------------------
2746  0C25              _player_hit_platform_clear:
2747  0C25  3E 04       	ld	a,0x04
2748  0C27  F5          	push	af
2749  0C28  33          	inc	sp
2750  0C29  21 0E 00    	ld	hl, +(_spr_timer + 0x000e)
2751  0C2C  E5          	push	hl
2752  0C2D  CD 00 00    	call	_game_check_time
2753  0C30  F1          	pop	af
2754  0C31  33          	inc	sp
2755  0C32  7D          	ld	a, l
2756  0C33  B7          	or	a, a
2757  0C34  C8          	ret	Z
2758  0C35  2A FF FF    	ld	hl,(_player_hit_col - 1)
2759  0C38  3A 00 00    	ld	a,(_player_hit_lin)
2760  0C3B  6F          	ld	l,a
2761  0C3C  E5          	push	hl
2762  0C3D  CD 00 00    	call	_spr_calc_index
2763  0C40  F1          	pop	af
2764  0C41  22 00 00    	ld	(_index1),hl
2765  0C44  2E 00       	ld	l,0x00
2766  0C46  CD 00 00    	call	_spr_brick_anim
2767  0C49  21 00 00    	ld	hl,_player_hit_lin
2768  0C4C  36 00       	ld	(hl),0x00
2769  0C4E  21 00 00    	ld	hl,_player_hit_col
2770  0C51  36 00       	ld	(hl),0x00
2771  0C53  C9          	ret
2772  0C54              	SECTION code_compiler
2773  0C54              ;	---------------------------------
2774  0C54              ; Function player_score_add
2775  0C54              ; ---------------------------------
2776  0C54              _player_score_add:
2777  0C54  ED 4B 00 00 	ld	bc,(_player_score)
2778  0C58  09          	add	hl,bc
2779  0C59  22 00 00    	ld	(_player_score),hl
2780  0C5C  21 00 00    	ld	hl,_player_lvl
2781  0C5F  7E          	ld	a, (hl)
2782  0C60  D6 0A       	sub	a,0x0a
2783  0C62  30 45       	jr	NC,l_player_score_add_00104
2784  0C64  01 00 00    	ld	bc,_player_lvl_table+0
2785  0C67  6E          	ld	l,(hl)
2786  0C68  26 00       	ld	h,0x00
2787  0C6A  29          	add	hl, hl
2788  0C6B  09          	add	hl, bc
2789  0C6C  4E          	ld	c, (hl)
2790  0C6D  23          	inc	hl
2791  0C6E  46          	ld	b, (hl)
2792  0C6F  21 00 00    	ld	hl,_player_score
2793  0C72  7E          	ld	a, (hl)
2794  0C73  91          	sub	a, c
2795  0C74  23          	inc	hl
2796  0C75  7E          	ld	a, (hl)
2797  0C76  98          	sbc	a, b
2798  0C77  38 30       	jr	C,l_player_score_add_00104
2799  0C79  21 00 00    	ld	hl,_player_lvl
2800  0C7C  34          	inc	(hl)
2801  0C7D  CD 00 00    	call	_game_update_stats
2802  0C80  CD 00 00    	call	_spr_flatten
2803  0C83  CD 00 00    	call	_audio_efecto
2804  0C86  21 16 00    	ld	hl,___str_2
2805  0C89  E5          	push	hl
2806  0C8A  21 0C 0C    	ld	hl,0x0c0c
2807  0C8D  E5          	push	hl
2808  0C8E  CD 00 00    	call	_zx_print_str
2809  0C91  AF          	xor	a, a
2810  0C92  F5          	push	af
2811  0C93  33          	inc	sp
2812  0C94  21 3C 00    	ld	hl,0x003c
2813  0C97  E5          	push	hl
2814  0C98  21 0C 15    	ld	hl,0x150c
2815  0C9B  E5          	push	hl
2816  0C9C  3E 0C       	ld	a,0x0c
2817  0C9E  F5          	push	af
2818  0C9F  33          	inc	sp
2819  0CA0  CD 00 00    	call	_game_colour_message
2820  0CA3  F1          	pop	af
2821  0CA4  F1          	pop	af
2822  0CA5  F1          	pop	af
2823  0CA6  CD 00 00    	call	_spr_unflattenP1
2824  0CA9              l_player_score_add_00104:
2825  0CA9  3A 00 00    	ld	a,(_game_score_top)
2826  0CAC  21 00 00    	ld	hl,_player_score
2827  0CAF  96          	sub	a, (hl)
2828  0CB0  3A 01 00    	ld	a,(_game_score_top + 1)
2829  0CB3  23          	inc	hl
2830  0CB4  9E          	sbc	a, (hl)
2831  0CB5  30 06       	jr	NC,l_player_score_add_00106
2832  0CB7  2A 00 00    	ld	hl,(_player_score)
2833  0CBA  22 00 00    	ld	(_game_score_top),hl
2834  0CBD              l_player_score_add_00106:
2835  0CBD  CD 00 00    	call	_game_print_score
2836  0CC0  C9          	ret
2837  0CC1              	SECTION rodata_compiler
2838  0016              ___str_2:
2839  0016  4C 45 56 45 4C 20 55 50 21 
                        	DEFM "LEVEL UP!"
2840  001F  00          	DEFB 0x00
2841  0020              	SECTION code_compiler
2842  0CC1              ;	---------------------------------
2843  0CC1              ; Function player_check_floor
2844  0CC1              ; ---------------------------------
2845  0CC1              _player_check_floor:
2846  0CC1  CD 00 00    	call	___sdcc_enter_ix
2847  0CC4  F5          	push	af
2848  0CC5  F5          	push	af
2849  0CC6  F5          	push	af
2850  0CC7  21 07 00    	ld	hl,+(_col + 0x0007)
2851  0CCA  56          	ld	d, (hl)
2852  0CCB  3A 07 00    	ld	a,(_lin + 0x0007)
2853  0CCE  C6 10       	add	a,0x10
2854  0CD0  5F          	ld	e, a
2855  0CD1  D5          	push	de
2856  0CD2  CD 00 00    	call	_spr_calc_index
2857  0CD5  F1          	pop	af
2858  0CD6  DD 75 FC    	ld	(ix-4),l
2859  0CD9  DD 74 FD    	ld	(ix-3),h
2860  0CDC  01 00 00    	ld	bc,_scr_map+0
2861  0CDF  79          	ld	a, c
2862  0CE0  DD 86 FC    	add	a,(ix-4)
2863  0CE3  DD 77 FE    	ld	(ix-2),a
2864  0CE6  78          	ld	a, b
2865  0CE7  DD 8E FD    	adc	a,(ix-3)
2866  0CEA  DD 6E FE    	ld	l,(ix-2)
2867  0CED  DD 77 FF    	ld	(ix-1),a
2868  0CF0  67          	ld	h,a
2869  0CF1  7E          	ld	a, (hl)
2870  0CF2  DD 77 FB    	ld	(ix-5),a
2871  0CF5  DD 6E FC    	ld	l,(ix-4)
2872  0CF8  DD 66 FD    	ld	h,(ix-3)
2873  0CFB  23          	inc	hl
2874  0CFC  09          	add	hl,bc
2875  0CFD  3A 00 00    	ld	a,(_s_lin0)
2876  0D00  D6 90       	sub	a,0x90
2877  0D02  4D          	ld	c,l
2878  0D03  44          	ld	b,h
2879  0D04  20 26       	jr	NZ,l_player_check_floor_00108
2880  0D06  3A 00 00    	ld	a,(_map_heigth)
2881  0D09  C5          	push	bc
2882  0D0A  F5          	push	af
2883  0D0B  33          	inc	sp
2884  0D0C  3A 00 00    	ld	a,(_scr_curr)
2885  0D0F  F5          	push	af
2886  0D10  33          	inc	sp
2887  0D11  CD 00 00    	call	__divuchar_callee
2888  0D14  C1          	pop	bc
2889  0D15  7D          	ld	a,l
2890  0D16  3C          	inc	a
2891  0D17  32 00 00    	ld	(_tmp1),a
2892  0D1A  21 00 00    	ld	hl,_map_heigth
2893  0D1D  96          	sub	a, (hl)
2894  0D1E  30 06       	jr	NC,l_player_check_floor_00102
2895  0D20  DD 36 FB 00 	ld	(ix-5),0x00
2896  0D24  18 16       	jr	l_player_check_floor_00109
2897  0D26              l_player_check_floor_00102:
2898  0D26  DD 36 FB 48 	ld	(ix-5),0x48
2899  0D2A  18 10       	jr	l_player_check_floor_00109
2900  0D2C              l_player_check_floor_00108:
2901  0D2C  3A 07 00    	ld	a,(_col + 0x0007)
2902  0D2F  0F          	rrca
2903  0D30  38 06       	jr	C,l_player_check_floor_00105
2904  0D32  DD 36 FA 00 	ld	(ix-6),0x00
2905  0D36  18 04       	jr	l_player_check_floor_00109
2906  0D38              l_player_check_floor_00105:
2907  0D38  0A          	ld	a, (bc)
2908  0D39  DD 77 FA    	ld	(ix-6),a
2909  0D3C              l_player_check_floor_00109:
2910  0D3C  DD 7E FB    	ld	a,(ix-5)
2911  0D3F  D6 3A       	sub	a,0x3a
2912  0D41  38 07       	jr	C,l_player_check_floor_00132
2913  0D43  DD 7E FB    	ld	a,(ix-5)
2914  0D46  D6 60       	sub	a,0x60
2915  0D48  38 32       	jr	C,l_player_check_floor_00128
2916  0D4A              l_player_check_floor_00132:
2917  0D4A  DD 7E FA    	ld	a,(ix-6)
2918  0D4D  D6 3A       	sub	a,0x3a
2919  0D4F  38 07       	jr	C,l_player_check_floor_00127
2920  0D51  DD 7E FA    	ld	a,(ix-6)
2921  0D54  D6 60       	sub	a,0x60
2922  0D56  38 24       	jr	C,l_player_check_floor_00128
2923  0D58              l_player_check_floor_00127:
2924  0D58  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
2925  0D5B  36 02       	ld	(hl),0x02
2926  0D5D  21 00 00    	ld	hl,_s_state
2927  0D60  CB CE       	set	1, (hl)
2928  0D62  2E 00       	ld	l,0x00
2929  0D64  CD 89 06    	call	_player_check_stairs
2930  0D67  3A 00 00    	ld	a,(_player_onstair)
2931  0D6A  B7          	or	a, a
2932  0D6B  C2 12 0E    	jp	NZ, l_player_check_floor_00133
2933  0D6E  3A 00 00    	ld	a,(_s_lin0)
2934  0D71  D6 90       	sub	a,0x90
2935  0D73  C2 12 0E    	jp	NZ,l_player_check_floor_00133
2936  0D76  CD 00 00    	call	_spr_page_down
2937  0D79  C3 12 0E    	jp	l_player_check_floor_00133
2938  0D7C              l_player_check_floor_00128:
2939  0D7C  C5          	push	bc
2940  0D7D  3E 10       	ld	a,0x10
2941  0D7F  F5          	push	af
2942  0D80  33          	inc	sp
2943  0D81  21 00 00    	ld	hl,_player_brick_time
2944  0D84  E5          	push	hl
2945  0D85  CD 00 00    	call	_game_check_time
2946  0D88  F1          	pop	af
2947  0D89  33          	inc	sp
2948  0D8A  C1          	pop	bc
2949  0D8B  7D          	ld	a,l
2950  0D8C  B7          	or	a, a
2951  0D8D  CA 12 0E    	jp	Z, l_player_check_floor_00133
2952  0D90  2A 00 00    	ld	hl,(_curr_time)
2953  0D93  22 00 00    	ld	(_player_brick_time),hl
2954  0D96  DD 7E FB    	ld	a,(ix-5)
2955  0D99  D6 40       	sub	a,0x40
2956  0D9B  20 18       	jr	NZ,l_player_check_floor_00114
2957  0D9D  C5          	push	bc
2958  0D9E  DD 6E FC    	ld	l,(ix-4)
2959  0DA1  DD 66 FD    	ld	h,(ix-3)
2960  0DA4  CD 00 00    	call	_game_match_back
2961  0DA7  C1          	pop	bc
2962  0DA8  5D          	ld	e,l
2963  0DA9  DD 6E FE    	ld	l,(ix-2)
2964  0DAC  DD 66 FF    	ld	h,(ix-1)
2965  0DAF  73          	ld	(hl), e
2966  0DB0  C5          	push	bc
2967  0DB1  CD 17 0E    	call	_player_gasta_brick
2968  0DB4  C1          	pop	bc
2969  0DB5              l_player_check_floor_00114:
2970  0DB5  DD 7E FB    	ld	a,(ix-5)
2971  0DB8  D6 3F       	sub	a,0x3f
2972  0DBA  20 0D       	jr	NZ,l_player_check_floor_00116
2973  0DBC  DD 6E FE    	ld	l,(ix-2)
2974  0DBF  DD 66 FF    	ld	h,(ix-1)
2975  0DC2  36 40       	ld	(hl),0x40
2976  0DC4  C5          	push	bc
2977  0DC5  CD 17 0E    	call	_player_gasta_brick
2978  0DC8  C1          	pop	bc
2979  0DC9              l_player_check_floor_00116:
2980  0DC9  DD 7E FB    	ld	a,(ix-5)
2981  0DCC  D6 3E       	sub	a,0x3e
2982  0DCE  20 0D       	jr	NZ,l_player_check_floor_00118
2983  0DD0  DD 6E FE    	ld	l,(ix-2)
2984  0DD3  DD 66 FF    	ld	h,(ix-1)
2985  0DD6  36 3F       	ld	(hl),0x3f
2986  0DD8  C5          	push	bc
2987  0DD9  CD 17 0E    	call	_player_gasta_brick
2988  0DDC  C1          	pop	bc
2989  0DDD              l_player_check_floor_00118:
2990  0DDD  DD 7E FA    	ld	a,(ix-6)
2991  0DE0  D6 40       	sub	a,0x40
2992  0DE2  20 12       	jr	NZ,l_player_check_floor_00120
2993  0DE4  C5          	push	bc
2994  0DE5  DD 6E FC    	ld	l,(ix-4)
2995  0DE8  DD 66 FD    	ld	h,(ix-3)
2996  0DEB  CD 00 00    	call	_game_match_back
2997  0DEE  C1          	pop	bc
2998  0DEF  7D          	ld	a,l
2999  0DF0  02          	ld	(bc), a
3000  0DF1  C5          	push	bc
3001  0DF2  CD 17 0E    	call	_player_gasta_brick
3002  0DF5  C1          	pop	bc
3003  0DF6              l_player_check_floor_00120:
3004  0DF6  DD 7E FA    	ld	a,(ix-6)
3005  0DF9  D6 3F       	sub	a,0x3f
3006  0DFB  20 08       	jr	NZ,l_player_check_floor_00122
3007  0DFD  3E 40       	ld	a,0x40
3008  0DFF  02          	ld	(bc), a
3009  0E00  C5          	push	bc
3010  0E01  CD 17 0E    	call	_player_gasta_brick
3011  0E04  C1          	pop	bc
3012  0E05              l_player_check_floor_00122:
3013  0E05  DD 7E FA    	ld	a,(ix-6)
3014  0E08  D6 3E       	sub	a,0x3e
3015  0E0A  20 06       	jr	NZ,l_player_check_floor_00133
3016  0E0C  3E 3F       	ld	a,0x3f
3017  0E0E  02          	ld	(bc), a
3018  0E0F  CD 17 0E    	call	_player_gasta_brick
3019  0E12              l_player_check_floor_00133:
3020  0E12  DD F9       	ld	sp, ix
3021  0E14  DD E1       	pop	ix
3022  0E16  C9          	ret
3023  0E17              	SECTION code_compiler
3024  0E17              ;	---------------------------------
3025  0E17              ; Function player_gasta_brick
3026  0E17              ; ---------------------------------
3027  0E17              _player_gasta_brick:
3028  0E17  3A 00 00    	ld	a,(_s_lin0)
3029  0E1A  32 00 00    	ld	(_s_lin1),a
3030  0E1D  3A 00 00    	ld	a,(_s_col0)
3031  0E20  32 00 00    	ld	(_s_col1),a
3032  0E23  3A 07 00    	ld	a,(_lin + 0x0007)
3033  0E26  C6 10       	add	a,0x10
3034  0E28  32 00 00    	ld	(_s_lin0),a
3035  0E2B  3A 07 00    	ld	a,(_col + 0x0007)
3036  0E2E  32 00 00    	ld	(_s_col0),a
3037  0E31  CD 00 00    	call	_spr_back_repaint
3038  0E34  3A 00 00    	ld	a,(_s_lin1)
3039  0E37  32 00 00    	ld	(_s_lin0),a
3040  0E3A  3A 00 00    	ld	a,(_s_col1)
3041  0E3D  32 00 00    	ld	(_s_col0),a
3042  0E40  C9          	ret
3043  0E41              	SECTION code_compiler
3044  0E41              ;	---------------------------------
3045  0E41              ; Function player_move_jump
3046  0E41              ; ---------------------------------
3047  0E41              _player_move_jump:
3048  0E41  21 00 00    	ld	hl,_game_gravity
3049  0E44  4E          	ld	c, (hl)
3050  0E45  21 00 00    	ld	hl,_player_vel_y
3051  0E48  7E          	ld	a, (hl)
3052  0E49  81          	add	a, c
3053  0E4A  77          	ld	(hl), a
3054  0E4B  3A 00 00    	ld	a,(_player_vel_inc)
3055  0E4E  B7          	or	a, a
3056  0E4F  28 27       	jr	Z,l_player_move_jump_00106
3057  0E51  3A 00 00    	ld	a,(_player_vel_y1)
3058  0E54  21 00 00    	ld	hl,_player_vel_y
3059  0E57  96          	sub	a, (hl)
3060  0E58  E2 5D 0E    	jp	PO, l_player_move_jump_00243
3061  0E5B  EE 80       	xor	a,0x80
3062  0E5D              l_player_move_jump_00243:
3063  0E5D  F2 78 0E    	jp	P, l_player_move_jump_00106
3064  0E60  3A 00 00    	ld	a,(_player_vel_y)
3065  0E63  CB 7F       	bit	7, a
3066  0E65  28 11       	jr	Z,l_player_move_jump_00106
3067  0E67  CD DF 01    	call	_player_action_jump
3068  0E6A  7D          	ld	a, l
3069  0E6B  B7          	or	a, a
3070  0E6C  20 0A       	jr	NZ,l_player_move_jump_00106
3071  0E6E  21 00 00    	ld	hl,_player_vel_y
3072  0E71  36 00       	ld	(hl),0x00
3073  0E73  21 00 00    	ld	hl,_player_vel_inc
3074  0E76  36 00       	ld	(hl),0x00
3075  0E78              l_player_move_jump_00106:
3076  0E78  3E 78       	ld	a,0x78
3077  0E7A  21 00 00    	ld	hl,_player_vel_y
3078  0E7D  96          	sub	a, (hl)
3079  0E7E  E2 83 0E    	jp	PO, l_player_move_jump_00244
3080  0E81  EE 80       	xor	a,0x80
3081  0E83              l_player_move_jump_00244:
3082  0E83  F2 8B 0E    	jp	P, l_player_move_jump_00108
3083  0E86  21 00 00    	ld	hl,_player_vel_y
3084  0E89  36 78       	ld	(hl),0x78
3085  0E8B              l_player_move_jump_00108:
3086  0E8B  21 00 00    	ld	hl,_player_vel_y
3087  0E8E  7E          	ld	a, (hl)
3088  0E8F  EE 80       	xor	a,0x80
3089  0E91  D6 08       	sub	a,0x08
3090  0E93  30 02       	jr	NC,l_player_move_jump_00110
3091  0E95  36 88       	ld	(hl),0x88
3092  0E97              l_player_move_jump_00110:
3093  0E97  3A 00 00    	ld	a,(_player_vel_y)
3094  0E9A  4F          	ld	c,a
3095  0E9B  17          	rla
3096  0E9C  9F          	sbc	a, a
3097  0E9D  47          	ld	b, a
3098  0E9E  CB 41       	bit	0,c
3099  0EA0  21 00 00    	ld	hl,_s_lin1
3100  0EA3  71          	ld	(hl),c
3101  0EA4  28 04       	jr	Z,l_player_move_jump_00112
3102  0EA6  21 00 00    	ld	hl,_s_lin1
3103  0EA9  35          	dec	(hl)
3104  0EAA              l_player_move_jump_00112:
3105  0EAA  3A 07 00    	ld	a,(_lin + 0x0007)
3106  0EAD  21 00 00    	ld	hl,_s_lin1
3107  0EB0  86          	add	a, (hl)
3108  0EB1  77          	ld	(hl), a
3109  0EB2  CB 78       	bit	7, b
3110  0EB4  28 5C       	jr	Z,l_player_move_jump_00138
3111  0EB6  21 00 00    	ld	hl,_s_state
3112  0EB9  CD 00 00    	call	_spr_set_up
3113  0EBC  3E 90       	ld	a,0x90
3114  0EBE  21 00 00    	ld	hl,_s_lin1
3115  0EC1  96          	sub	a, (hl)
3116  0EC2  30 11       	jr	NC,l_player_move_jump_00117
3117  0EC4  CD 00 00    	call	_spr_page_up
3118  0EC7  7D          	ld	a, l
3119  0EC8  B7          	or	a, a
3120  0EC9  28 05       	jr	Z,l_player_move_jump_00114
3121  0ECB  2E 00       	ld	l,0x00
3122  0ECD  C3 C9 0F    	jp	l_player_move_jump_00149
3123  0ED0              l_player_move_jump_00114:
3124  0ED0  21 00 00    	ld	hl,_s_lin1
3125  0ED3  36 00       	ld	(hl),0x00
3126  0ED5              l_player_move_jump_00117:
3127  0ED5  21 07 00    	ld	hl,+(_col + 0x0007)
3128  0ED8  46          	ld	b, (hl)
3129  0ED9  C5          	push	bc
3130  0EDA  33          	inc	sp
3131  0EDB  3A 00 00    	ld	a,(_s_lin1)
3132  0EDE  F5          	push	af
3133  0EDF  33          	inc	sp
3134  0EE0  CD 00 00    	call	_game_check_map
3135  0EE3  F1          	pop	af
3136  0EE4  7C          	ld	a,h
3137  0EE5  B5          	or	a,l
3138  0EE6  28 21       	jr	Z,l_player_move_jump_00121
3139  0EE8  CD 56 09    	call	_player_hit_platform
3140  0EEB  7D          	ld	a, l
3141  0EEC  B7          	or	a, a
3142  0EED  28 12       	jr	Z,l_player_move_jump_00119
3143  0EEF  3A 07 00    	ld	a,(_lin + 0x0007)
3144  0EF2  07          	rlca
3145  0EF3  07          	rlca
3146  0EF4  07          	rlca
3147  0EF5  07          	rlca
3148  0EF6  E6 0F       	and	a,0x0f
3149  0EF8  07          	rlca
3150  0EF9  07          	rlca
3151  0EFA  07          	rlca
3152  0EFB  07          	rlca
3153  0EFC  E6 F0       	and	a,0xf0
3154  0EFE  32 07 00    	ld	((_lin + 0x0007)),a
3155  0F01              l_player_move_jump_00119:
3156  0F01  21 00 00    	ld	hl,_player_vel_y
3157  0F04  36 00       	ld	(hl),0x00
3158  0F06  C3 91 0F    	jp	l_player_move_jump_00139
3159  0F09              l_player_move_jump_00121:
3160  0F09  3A 00 00    	ld	a,(_s_lin1)
3161  0F0C  32 07 00    	ld	((_lin + 0x0007)),a
3162  0F0F  C3 91 0F    	jp	l_player_move_jump_00139
3163  0F12              l_player_move_jump_00138:
3164  0F12  21 00 00    	ld	hl,_s_state
3165  0F15  CD 00 00    	call	_spr_set_down
3166  0F18  3E 90       	ld	a,0x90
3167  0F1A  21 00 00    	ld	hl,_s_lin1
3168  0F1D  96          	sub	a, (hl)
3169  0F1E  30 11       	jr	NC,l_player_move_jump_00127
3170  0F20  CD 00 00    	call	_spr_page_down
3171  0F23  7D          	ld	a, l
3172  0F24  B7          	or	a, a
3173  0F25  28 05       	jr	Z,l_player_move_jump_00124
3174  0F27  2E 00       	ld	l,0x00
3175  0F29  C3 C9 0F    	jp	l_player_move_jump_00149
3176  0F2C              l_player_move_jump_00124:
3177  0F2C  21 00 00    	ld	hl,_s_lin1
3178  0F2F  36 90       	ld	(hl),0x90
3179  0F31              l_player_move_jump_00127:
3180  0F31  21 07 00    	ld	hl,+(_col + 0x0007)
3181  0F34  56          	ld	d, (hl)
3182  0F35  3A 00 00    	ld	a,(_s_lin1)
3183  0F38  C6 10       	add	a,0x10
3184  0F3A  5F          	ld	e, a
3185  0F3B  D5          	push	de
3186  0F3C  CD 00 00    	call	_game_check_map
3187  0F3F  F1          	pop	af
3188  0F40  7C          	ld	a,h
3189  0F41  B5          	or	a,l
3190  0F42  28 47       	jr	Z,l_player_move_jump_00135
3191  0F44  2E 00       	ld	l,0x00
3192  0F46  CD 89 06    	call	_player_check_stairs
3193  0F49  3A 00 00    	ld	a,(_player_onstair)
3194  0F4C  B7          	or	a, a
3195  0F4D  20 05       	jr	NZ,l_player_move_jump_00129
3196  0F4F  2E 01       	ld	l,0x01
3197  0F51  CD 89 06    	call	_player_check_stairs
3198  0F54              l_player_move_jump_00129:
3199  0F54  3A 00 00    	ld	a,(_player_onstair)
3200  0F57  B7          	or	a, a
3201  0F58  20 12       	jr	NZ,l_player_move_jump_00131
3202  0F5A  3A 00 00    	ld	a,(_s_lin1)
3203  0F5D  07          	rlca
3204  0F5E  07          	rlca
3205  0F5F  07          	rlca
3206  0F60  07          	rlca
3207  0F61  E6 0F       	and	a,0x0f
3208  0F63  07          	rlca
3209  0F64  07          	rlca
3210  0F65  07          	rlca
3211  0F66  07          	rlca
3212  0F67  E6 F0       	and	a,0xf0
3213  0F69  32 07 00    	ld	((_lin + 0x0007)),a
3214  0F6C              l_player_move_jump_00131:
3215  0F6C  21 00 00    	ld	hl,_player_vel_y
3216  0F6F  36 00       	ld	(hl),0x00
3217  0F71  21 00 00    	ld	hl,_s_state
3218  0F74  7E          	ld	a,(hl)
3219  0F75  E6 FC       	and	a,+(0xfd&0xfe)
3220  0F77  77          	ld	(hl),a
3221  0F78  3A 07 00    	ld	a,(_lin + 0x0007)
3222  0F7B  D6 90       	sub	a,0x90
3223  0F7D  38 03       	jr	C,l_player_move_jump_00133
3224  0F7F  CD 00 00    	call	_spr_page_down
3225  0F82              l_player_move_jump_00133:
3226  0F82  21 07 00    	ld	hl, +(_colint + 0x0007)
3227  0F85  36 00       	ld	(hl),0x00
3228  0F87  2E 01       	ld	l,0x01
3229  0F89  18 3E       	jr	l_player_move_jump_00149
3230  0F8B              l_player_move_jump_00135:
3231  0F8B  3A 00 00    	ld	a,(_s_lin1)
3232  0F8E  32 07 00    	ld	((_lin + 0x0007)),a
3233  0F91              l_player_move_jump_00139:
3234  0F91  21 00 00    	ld	hl,_s_state
3235  0F94  CB 5E       	bit	3, (hl)
3236  0F96  20 21       	jr	NZ,l_player_move_jump_00145
3237  0F98  21 00 00    	ld	hl,_s_state
3238  0F9B  CB 56       	bit	2, (hl)
3239  0F9D  20 1A       	jr	NZ,l_player_move_jump_00145
3240  0F9F  21 00 00    	ld	hl,_dirs
3241  0FA2  CB 56       	bit	2, (hl)
3242  0FA4  28 06       	jr	Z,l_player_move_jump_00141
3243  0FA6  21 00 00    	ld	hl,_s_state
3244  0FA9  CD 00 00    	call	_spr_set_left
3245  0FAC              l_player_move_jump_00141:
3246  0FAC  21 00 00    	ld	hl,_dirs
3247  0FAF  CB 5E       	bit	3, (hl)
3248  0FB1  28 06       	jr	Z,l_player_move_jump_00145
3249  0FB3  21 00 00    	ld	hl,_s_state
3250  0FB6  CD 00 00    	call	_spr_set_right
3251  0FB9              l_player_move_jump_00145:
3252  0FB9  CD 00 00    	call	_spr_move_horizontal
3253  0FBC  7D          	ld	a, l
3254  0FBD  B7          	or	a, a
3255  0FBE  28 07       	jr	Z,l_player_move_jump_00148
3256  0FC0  21 00 00    	ld	hl,_s_state
3257  0FC3  7E          	ld	a,(hl)
3258  0FC4  E6 F3       	and	a,+(0xf7&0xfb)
3259  0FC6  77          	ld	(hl),a
3260  0FC7              l_player_move_jump_00148:
3261  0FC7  2E 00       	ld	l,0x00
3262  0FC9              l_player_move_jump_00149:
3263  0FC9  C9          	ret
3264  0FCA              	SECTION code_compiler
3265  0FCA              ;	---------------------------------
3266  0FCA              ; Function player_open_door
3267  0FCA              ; ---------------------------------
3268  0FCA              _player_open_door:
3269  0FCA  CD 00 00    	call	___sdcc_enter_ix
3270  0FCD  0E 00       	ld	c,0x00
3271  0FCF  DD 7E 06    	ld	a,(ix+6)
3272  0FD2  D6 48       	sub	a,0x48
3273  0FD4  28 17       	jr	Z,l_player_open_door_00101
3274  0FD6  DD 7E 06    	ld	a,(ix+6)
3275  0FD9  D6 49       	sub	a,0x49
3276  0FDB  28 1F       	jr	Z,l_player_open_door_00104
3277  0FDD  DD 7E 06    	ld	a,(ix+6)
3278  0FE0  D6 4A       	sub	a,0x4a
3279  0FE2  28 27       	jr	Z,l_player_open_door_00107
3280  0FE4  DD 7E 06    	ld	a,(ix+6)
3281  0FE7  D6 4B       	sub	a,0x4b
3282  0FE9  28 2F       	jr	Z,l_player_open_door_00110
3283  0FEB  18 3A       	jr	l_player_open_door_00113
3284  0FED              l_player_open_door_00101:
3285  0FED  3A 00 00    	ld	a,(_player_keys)
3286  0FF0  B7          	or	a, a
3287  0FF1  28 34       	jr	Z,l_player_open_door_00113
3288  0FF3  2E 07       	ld	l,0x07
3289  0FF5  CD 00 00    	call	_zx_border_fastcall
3290  0FF8  0E 01       	ld	c,0x01
3291  0FFA  18 2B       	jr	l_player_open_door_00113
3292  0FFC              l_player_open_door_00104:
3293  0FFC  3A 01 00    	ld	a,(_player_keys + 0x0001)
3294  0FFF  B7          	or	a, a
3295  1000  28 25       	jr	Z,l_player_open_door_00113
3296  1002  2E 02       	ld	l,0x02
3297  1004  CD 00 00    	call	_zx_border_fastcall
3298  1007  0E 01       	ld	c,0x01
3299  1009  18 1C       	jr	l_player_open_door_00113
3300  100B              l_player_open_door_00107:
3301  100B  3A 02 00    	ld	a,(_player_keys + 0x0002)
3302  100E  B7          	or	a, a
3303  100F  28 16       	jr	Z,l_player_open_door_00113
3304  1011  2E 04       	ld	l,0x04
3305  1013  CD 00 00    	call	_zx_border_fastcall
3306  1016  0E 01       	ld	c,0x01
3307  1018  18 0D       	jr	l_player_open_door_00113
3308  101A              l_player_open_door_00110:
3309  101A  3A 03 00    	ld	a,(_player_keys + 0x0003)
3310  101D  B7          	or	a, a
3311  101E  28 07       	jr	Z,l_player_open_door_00113
3312  1020  2E 05       	ld	l,0x05
3313  1022  CD 00 00    	call	_zx_border_fastcall
3314  1025  0E 01       	ld	c,0x01
3315  1027              l_player_open_door_00113:
3316  1027  79          	ld	a, c
3317  1028  B7          	or	a, a
3318  1029  20 06       	jr	NZ,l_player_open_door_00114
3319  102B  3A 00 00    	ld	a,(_game_inmune)
3320  102E  B7          	or	a, a
3321  102F  28 23       	jr	Z,l_player_open_door_00115
3322  1031              l_player_open_door_00114:
3323  1031  CD 00 00    	call	_audio_pierto_abierta
3324  1034  3E 00       	ld	a, +((_scr_map) & 0xFF)
3325  1036  DD 86 04    	add	a,(ix+4)
3326  1039  4F          	ld	c, a
3327  103A  3E 00       	ld	a, +((_scr_map) / 256)
3328  103C  DD 8E 05    	adc	a,(ix+5)
3329  103F  47          	ld	b, a
3330  1040  AF          	xor	a, a
3331  1041  02          	ld	(bc), a
3332  1042  DD 6E 04    	ld	l,(ix+4)
3333  1045  DD 66 05    	ld	h,(ix+5)
3334  1048  CD 00 00    	call	_game_obj_set
3335  104B  21 04 00    	ld	hl,0x0004
3336  104E  39          	add	hl, sp
3337  104F  CD 00 00    	call	_spr_draw_index
3338  1052  18 03       	jr	l_player_open_door_00118
3339  1054              l_player_open_door_00115:
3340  1054  CD 00 00    	call	_audio_sin_mana
3341  1057              l_player_open_door_00118:
3342  1057  DD E1       	pop	ix
3343  1059  C9          	ret
3344  105A              	SECTION code_compiler
3345  105A              ;	---------------------------------
3346  105A              ; Function player_lost_life
3347  105A              ; ---------------------------------
3348  105A              _player_lost_life:
3349  105A  CD 00 00    	call	___sdcc_enter_ix
3350  105D  3B          	dec	sp
3351  105E  21 00 00    	ld	hl,_player_vita
3352  1061  36 00       	ld	(hl),0x00
3353  1063  CD 00 00    	call	_game_update_stats
3354  1066  3A 07 00    	ld	a,(_lin + 0x0007)
3355  1069  32 00 00    	ld	(_s_lin0),a
3356  106C  3A 07 00    	ld	a,(_col + 0x0007)
3357  106F  32 00 00    	ld	(_s_col0),a
3358  1072  CD 00 00    	call	_spr_init_effects
3359  1075  06 00       	ld	b,0x00
3360  1077              l_player_lost_life_00117:
3361  1077  C5          	push	bc
3362  1078  21 00 00    	ld	hl,0x0000
3363  107B  E5          	push	hl
3364  107C  AF          	xor	a, a
3365  107D  48          	ld	c,b
3366  107E  47          	ld	b,a
3367  107F  C5          	push	bc
3368  1080  CD 00 00    	call	_NIRVANAP_spriteT_callee
3369  1083  C1          	pop	bc
3370  1084  04          	inc	b
3371  1085  3E 07       	ld	a,0x07
3372  1087  90          	sub	a, b
3373  1088  30 ED       	jr	NC,l_player_lost_life_00117
3374  108A  CD 00 00    	call	_audio_explosion
3375  108D  3A 00 00    	ld	a,(_s_lin0)
3376  1090  C6 F0       	add	a,0xf0
3377  1092  47          	ld	b, a
3378  1093  3A 00 00    	ld	a,(_s_col0)
3379  1096  21 00 00    	ld	hl,0x0000
3380  1099  E5          	push	hl
3381  109A  21 87 03    	ld	hl,0x0387
3382  109D  E5          	push	hl
3383  109E  48          	ld	c,b
3384  109F  47          	ld	b,a
3385  10A0  C5          	push	bc
3386  10A1  CD 00 00    	call	_spr_add_anim
3387  10A4  F1          	pop	af
3388  10A5  F1          	pop	af
3389  10A6  F1          	pop	af
3390  10A7  21 00 00    	ld	hl,_s_col0
3391  10AA  46          	ld	b, (hl)
3392  10AB  05          	dec	b
3393  10AC  05          	dec	b
3394  10AD  21 00 00    	ld	hl,0x0000
3395  10B0  E5          	push	hl
3396  10B1  21 87 03    	ld	hl,0x0387
3397  10B4  E5          	push	hl
3398  10B5  C5          	push	bc
3399  10B6  33          	inc	sp
3400  10B7  3A 00 00    	ld	a,(_s_lin0)
3401  10BA  F5          	push	af
3402  10BB  33          	inc	sp
3403  10BC  CD 00 00    	call	_spr_add_anim
3404  10BF  F1          	pop	af
3405  10C0  F1          	pop	af
3406  10C1  21 00 00    	ld	hl,0x0000
3407  10C4  E3          	ex	(sp),hl
3408  10C5  3A 00 00    	ld	a,(_s_col0)
3409  10C8  21 87 03    	ld	hl,0x0387
3410  10CB  E5          	push	hl
3411  10CC  F5          	push	af
3412  10CD  33          	inc	sp
3413  10CE  3A 00 00    	ld	a,(_s_lin0)
3414  10D1  F5          	push	af
3415  10D2  33          	inc	sp
3416  10D3  CD 00 00    	call	_spr_add_anim
3417  10D6  F1          	pop	af
3418  10D7  F1          	pop	af
3419  10D8  F1          	pop	af
3420  10D9  21 00 00    	ld	hl,_s_col0
3421  10DC  46          	ld	b, (hl)
3422  10DD  04          	inc	b
3423  10DE  04          	inc	b
3424  10DF  21 00 00    	ld	hl,0x0000
3425  10E2  E5          	push	hl
3426  10E3  21 87 03    	ld	hl,0x0387
3427  10E6  E5          	push	hl
3428  10E7  C5          	push	bc
3429  10E8  33          	inc	sp
3430  10E9  3A 00 00    	ld	a,(_s_lin0)
3431  10EC  F5          	push	af
3432  10ED  33          	inc	sp
3433  10EE  CD 00 00    	call	_spr_add_anim
3434  10F1  F1          	pop	af
3435  10F2  F1          	pop	af
3436  10F3  F1          	pop	af
3437  10F4  3A 00 00    	ld	a,(_s_lin0)
3438  10F7  C6 10       	add	a,0x10
3439  10F9  47          	ld	b, a
3440  10FA  3A 00 00    	ld	a,(_s_col0)
3441  10FD  21 00 00    	ld	hl,0x0000
3442  1100  E5          	push	hl
3443  1101  21 87 03    	ld	hl,0x0387
3444  1104  E5          	push	hl
3445  1105  48          	ld	c,b
3446  1106  47          	ld	b,a
3447  1107  C5          	push	bc
3448  1108  CD 00 00    	call	_spr_add_anim
3449  110B  F1          	pop	af
3450  110C  F1          	pop	af
3451  110D  F1          	pop	af
3452  110E  2E 00       	ld	l,0x00
3453  1110  CD 00 00    	call	_zx_border_fastcall
3454  1113  DD 36 FF 01 	ld	(ix-1),0x01
3455  1117  2A 00 00    	ld	hl,(_curr_time)
3456  111A  22 00 00    	ld	(_anim_time),hl
3457  111D              l_player_lost_life_00107:
3458  111D  DD 7E FF    	ld	a,(ix-1)
3459  1120  B7          	or	a, a
3460  1121  28 28       	jr	Z,l_player_lost_life_00109
3461  1123  3E 0C       	ld	a,0x0c
3462  1125  F5          	push	af
3463  1126  33          	inc	sp
3464  1127  21 00 00    	ld	hl,_anim_time
3465  112A  E5          	push	hl
3466  112B  CD 00 00    	call	_game_check_time
3467  112E  F1          	pop	af
3468  112F  33          	inc	sp
3469  1130  7D          	ld	a, l
3470  1131  B7          	or	a, a
3471  1132  28 E9       	jr	Z,l_player_lost_life_00107
3472  1134  2A 00 00    	ld	hl,(_curr_time)
3473  1137  22 00 00    	ld	(_anim_time),hl
3474  113A  3A 00 00    	ld	a,(_anim_count)
3475  113D  B7          	or	a,a
3476  113E  28 05       	jr	Z,l_player_lost_life_00103
3477  1140  CD 00 00    	call	_spr_play_anim
3478  1143  18 D8       	jr	l_player_lost_life_00107
3479  1145              l_player_lost_life_00103:
3480  1145  DD 36 FF 00 	ld	(ix-1),0x00
3481  1149  18 D2       	jr	l_player_lost_life_00107
3482  114B              l_player_lost_life_00109:
3483  114B  CD 00 00    	call	_audio_lotr_lose_a_life
3484  114E  3A 00 00    	ld	a,(_game_boss)
3485  1151  B7          	or	a, a
3486  1152  28 0F       	jr	Z,l_player_lost_life_00111
3487  1154  3A 00 00    	ld	a,(_boss_lin)
3488  1157  32 00 00    	ld	(_s_lin1),a
3489  115A  3A 00 00    	ld	a,(_boss_col)
3490  115D  32 00 00    	ld	(_s_col1),a
3491  1160  CD 00 00    	call	_boss_draw
3492  1163              l_player_lost_life_00111:
3493  1163  3A 00 00    	ld	a,(_game_inf_lives)
3494  1166  B7          	or	a, a
3495  1167  20 04       	jr	NZ,l_player_lost_life_00113
3496  1169  21 00 00    	ld	hl,_player_lives
3497  116C  35          	dec	(hl)
3498  116D              l_player_lost_life_00113:
3499  116D  21 00 00    	ld	hl,_player_mana
3500  1170  36 64       	ld	(hl),0x64
3501  1172  21 00 00    	ld	hl,_player_vita
3502  1175  36 64       	ld	(hl),0x64
3503  1177  3A 00 00    	ld	a,(_player_lives)
3504  117A  B7          	or	a, a
3505  117B  28 1D       	jr	Z,l_player_lost_life_00115
3506  117D  21 F4 01    	ld	hl,0x01f4
3507  1180  CD 00 00    	call	_z80_delay_ms_fastcall
3508  1183  3A 00 00    	ld	a,(_game_checkpoint_col)
3509  1186  32 00 00    	ld	(_player_col_scr),a
3510  1189  3A 00 00    	ld	a,(_game_checkpoint_lin)
3511  118C  32 00 00    	ld	(_player_lin_scr),a
3512  118F  3A 00 00    	ld	a,(_game_checkpoint_scr)
3513  1192  32 00 00    	ld	(_scr_curr),a
3514  1195  CD 00 00    	call	_game_round_init
3515  1198  18 0A       	jr	l_player_lost_life_00119
3516  119A              l_player_lost_life_00115:
3517  119A  21 00 00    	ld	hl,_player_lives
3518  119D  36 00       	ld	(hl),0x00
3519  119F  21 00 00    	ld	hl,_game_over
3520  11A2  36 01       	ld	(hl),0x01
3521  11A4              l_player_lost_life_00119:
3522  11A4  33          	inc	sp
3523  11A5  DD E1       	pop	ix
3524  11A7  C9          	ret
3525  11A8              	SECTION code_compiler
3526  11A8              ;	---------------------------------
3527  11A8              ; Function player_damage
3528  11A8              ; ---------------------------------
3529  11A8              _player_damage:
3530  11A8  7D          	ld	a,l
3531  11A9  4D          	ld	c,l
3532  11AA  21 00 00    	ld	hl,_player_vita
3533  11AD  96          	sub	a, (hl)
3534  11AE  30 1A       	jr	NC,l_player_damage_00104
3535  11B0  3A 00 00    	ld	a,(_game_inmune)
3536  11B3  B7          	or	a, a
3537  11B4  20 06       	jr	NZ,l_player_damage_00102
3538  11B6  21 00 00    	ld	hl,_player_vita
3539  11B9  7E          	ld	a, (hl)
3540  11BA  91          	sub	a, c
3541  11BB  77          	ld	(hl), a
3542  11BC              l_player_damage_00102:
3543  11BC  2A 00 00    	ld	hl,(_curr_time)
3544  11BF  22 00 00    	ld	(_player_hit_time),hl
3545  11C2  CD 00 00    	call	_audio_golpe
3546  11C5  CD 00 00    	call	_game_update_stats
3547  11C8  18 03       	jr	l_player_damage_00106
3548  11CA              l_player_damage_00104:
3549  11CA  CD 5A 10    	call	_player_lost_life
3550  11CD              l_player_damage_00106:
3551  11CD  C9          	ret
3552  11CE              	SECTION IGNORE
3553  0000              
