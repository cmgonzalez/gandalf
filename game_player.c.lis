1     0000              MODULE game_player_c
2     0000              LINE -1, "game_player.c"
-1    0000              
0     0000              
1     0000              ;--------------------------------------------------------
2     0000              ; File Created by SDCC : free open source ANSI-C Compiler
3     0000              ; Version 3.6.5 #9958 (Mac OS X i386)
4     0000              ;--------------------------------------------------------
5     0000              ; Processed by Z88DK
6     0000              ;--------------------------------------------------------
7     0000              
8     0000              	EXTERN __divschar
9     0000              	EXTERN __divschar_callee
10    0000              	EXTERN __divsint
11    0000              	EXTERN __divsint_callee
12    0000              	EXTERN __divslong
13    0000              	EXTERN __divslong_callee
14    0000              	EXTERN __divslonglong
15    0000              	EXTERN __divslonglong_callee
16    0000              	EXTERN __divsuchar
17    0000              	EXTERN __divsuchar_callee
18    0000              	EXTERN __divuchar
19    0000              	EXTERN __divuchar_callee
20    0000              	EXTERN __divuint
21    0000              	EXTERN __divuint_callee
22    0000              	EXTERN __divulong
23    0000              	EXTERN __divulong_callee
24    0000              	EXTERN __divulonglong
25    0000              	EXTERN __divulonglong_callee
26    0000              	EXTERN __divuschar
27    0000              	EXTERN __divuschar_callee
28    0000              	EXTERN __modschar
29    0000              	EXTERN __modschar_callee
30    0000              	EXTERN __modsint
31    0000              	EXTERN __modsint_callee
32    0000              	EXTERN __modslong
33    0000              	EXTERN __modslong_callee
34    0000              	EXTERN __modslonglong
35    0000              	EXTERN __modslonglong_callee
36    0000              	EXTERN __modsuchar
37    0000              	EXTERN __modsuchar_callee
38    0000              	EXTERN __moduchar
39    0000              	EXTERN __moduchar_callee
40    0000              	EXTERN __moduint
41    0000              	EXTERN __moduint_callee
42    0000              	EXTERN __modulong
43    0000              	EXTERN __modulong_callee
44    0000              	EXTERN __modulonglong
45    0000              	EXTERN __modulonglong_callee
46    0000              	EXTERN __moduschar
47    0000              	EXTERN __moduschar_callee
48    0000              	EXTERN __mulint
49    0000              	EXTERN __mulint_callee
50    0000              	EXTERN __mullong
51    0000              	EXTERN __mullong_callee
52    0000              	EXTERN __mullonglong
53    0000              	EXTERN __mullonglong_callee
54    0000              	EXTERN __mulschar
55    0000              	EXTERN __mulschar_callee
56    0000              	EXTERN __mulsuchar
57    0000              	EXTERN __mulsuchar_callee
58    0000              	EXTERN __muluschar
59    0000              	EXTERN __muluschar_callee
60    0000              	EXTERN __rlslonglong
61    0000              	EXTERN __rlslonglong_callee
62    0000              	EXTERN __rlulonglong
63    0000              	EXTERN __rlulonglong_callee
64    0000              	EXTERN __rrslonglong
65    0000              	EXTERN __rrslonglong_callee
66    0000              	EXTERN __rrulonglong
67    0000              	EXTERN __rrulonglong_callee
68    0000              	EXTERN ___sdcc_call_hl
69    0000              	EXTERN ___sdcc_call_iy
70    0000              	EXTERN ___sdcc_enter_ix
71    0000              	EXTERN _banked_call
72    0000              	EXTERN _banked_ret
73    0000              	EXTERN ___fs2schar
74    0000              	EXTERN ___fs2schar_callee
75    0000              	EXTERN ___fs2sint
76    0000              	EXTERN ___fs2sint_callee
77    0000              	EXTERN ___fs2slong
78    0000              	EXTERN ___fs2slong_callee
79    0000              	EXTERN ___fs2slonglong
80    0000              	EXTERN ___fs2slonglong_callee
81    0000              	EXTERN ___fs2uchar
82    0000              	EXTERN ___fs2uchar_callee
83    0000              	EXTERN ___fs2uint
84    0000              	EXTERN ___fs2uint_callee
85    0000              	EXTERN ___fs2ulong
86    0000              	EXTERN ___fs2ulong_callee
87    0000              	EXTERN ___fs2ulonglong
88    0000              	EXTERN ___fs2ulonglong_callee
89    0000              	EXTERN ___fsadd
90    0000              	EXTERN ___fsadd_callee
91    0000              	EXTERN ___fsdiv
92    0000              	EXTERN ___fsdiv_callee
93    0000              	EXTERN ___fseq
94    0000              	EXTERN ___fseq_callee
95    0000              	EXTERN ___fsgt
96    0000              	EXTERN ___fsgt_callee
97    0000              	EXTERN ___fslt
98    0000              	EXTERN ___fslt_callee
99    0000              	EXTERN ___fsmul
100   0000              	EXTERN ___fsmul_callee
101   0000              	EXTERN ___fsneq
102   0000              	EXTERN ___fsneq_callee
103   0000              	EXTERN ___fssub
104   0000              	EXTERN ___fssub_callee
105   0000              	EXTERN ___schar2fs
106   0000              	EXTERN ___schar2fs_callee
107   0000              	EXTERN ___sint2fs
108   0000              	EXTERN ___sint2fs_callee
109   0000              	EXTERN ___slong2fs
110   0000              	EXTERN ___slong2fs_callee
111   0000              	EXTERN ___slonglong2fs
112   0000              	EXTERN ___slonglong2fs_callee
113   0000              	EXTERN ___uchar2fs
114   0000              	EXTERN ___uchar2fs_callee
115   0000              	EXTERN ___uint2fs
116   0000              	EXTERN ___uint2fs_callee
117   0000              	EXTERN ___ulong2fs
118   0000              	EXTERN ___ulong2fs_callee
119   0000              	EXTERN ___ulonglong2fs
120   0000              	EXTERN ___ulonglong2fs_callee
121   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
122   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
123   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
126   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
127   0000              	EXTERN ____sdcc_4_ldi_save_bc
128   0000              	EXTERN ____sdcc_4_push_hlix
129   0000              	EXTERN ____sdcc_4_push_mhl
130   0000              	EXTERN ____sdcc_lib_setmem_hl
131   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
132   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
133   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
134   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
135   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
136   0000              	EXTERN ____sdcc_ll_add_deix_hlix
137   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
138   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
139   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
140   0000              	EXTERN ____sdcc_ll_asr_hlix_a
141   0000              	EXTERN ____sdcc_ll_asr_mbc_a
142   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
143   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
144   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
145   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
146   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
147   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
148   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
149   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
150   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
151   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
152   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
153   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
155   0000              	EXTERN ____sdcc_ll_push_hlix
156   0000              	EXTERN ____sdcc_ll_push_mhl
157   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
158   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
159   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
160   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
161   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
162   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
163   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
164   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
165   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
166   0000              	EXTERN ____sdcc_load_debc_deix
167   0000              	EXTERN ____sdcc_load_dehl_deix
168   0000              	EXTERN ____sdcc_load_debc_mhl
169   0000              	EXTERN ____sdcc_load_hlde_mhl
170   0000              	EXTERN ____sdcc_store_dehl_bcix
171   0000              	EXTERN ____sdcc_store_debc_hlix
172   0000              	EXTERN ____sdcc_store_debc_mhl
173   0000              	EXTERN ____sdcc_cpu_pop_ei
174   0000              	EXTERN ____sdcc_cpu_pop_ei_jp
175   0000              	EXTERN ____sdcc_cpu_push_di
176   0000              	EXTERN ____sdcc_outi
177   0000              	EXTERN ____sdcc_outi_128
178   0000              	EXTERN ____sdcc_outi_256
179   0000              	EXTERN ____sdcc_ldi
180   0000              	EXTERN ____sdcc_ldi_128
181   0000              	EXTERN ____sdcc_ldi_256
182   0000              	EXTERN ____sdcc_4_copy_srcd_hlix_dst_deix
183   0000              	EXTERN ____sdcc_4_and_src_mbc_mhl_dst_deix
184   0000              	EXTERN ____sdcc_4_or_src_mbc_mhl_dst_deix
185   0000              	EXTERN ____sdcc_4_xor_src_mbc_mhl_dst_deix
186   0000              	EXTERN ____sdcc_4_or_src_dehl_dst_bcix
187   0000              	EXTERN ____sdcc_4_xor_src_dehl_dst_bcix
188   0000              	EXTERN ____sdcc_4_and_src_dehl_dst_bcix
189   0000              	EXTERN ____sdcc_4_xor_src_mbc_mhl_dst_debc
190   0000              	EXTERN ____sdcc_4_or_src_mbc_mhl_dst_debc
191   0000              	EXTERN ____sdcc_4_and_src_mbc_mhl_dst_debc
192   0000              	EXTERN ____sdcc_4_cpl_src_mhl_dst_debc
193   0000              	EXTERN ____sdcc_4_xor_src_debc_mhl_dst_debc
194   0000              	EXTERN ____sdcc_4_or_src_debc_mhl_dst_debc
195   0000              	EXTERN ____sdcc_4_and_src_debc_mhl_dst_debc
196   0000              	EXTERN ____sdcc_4_and_src_debc_hlix_dst_debc
197   0000              	EXTERN ____sdcc_4_or_src_debc_hlix_dst_debc
198   0000              	EXTERN ____sdcc_4_xor_src_debc_hlix_dst_debc
199   0000              
200   0000              ;--------------------------------------------------------
201   0000              ; Public variables in this module
202   0000              ;--------------------------------------------------------
203   0000              	GLOBAL _player_check_map
204   0000              	GLOBAL _player_1up
205   0000              	GLOBAL _player_init
206   0000              	GLOBAL _player_turn
207   0000              	GLOBAL _player_move
208   0000              	GLOBAL _player_check_input
209   0000              	GLOBAL _player_action_fire
210   0000              	GLOBAL _player_action_jump
211   0000              	GLOBAL _player_move_input
212   0000              	GLOBAL _player_fix_walk_lin
213   0000              	GLOBAL _player_fire
214   0000              	GLOBAL _player_collision
215   0000              	GLOBAL _player_pick_mushroom
216   0000              	GLOBAL _player_check_stairs_vertical
217   0000              	GLOBAL _player_check_stairs
218   0000              	GLOBAL _player_anim_stairs
219   0000              	GLOBAL _player_tile
220   0000              	GLOBAL _player_pick_item
221   0000              	GLOBAL _player_hit_platform
222   0000              	GLOBAL _player_hit_platform_clear
223   0000              	GLOBAL _player_score_add
224   0000              	GLOBAL _player_check_floor
225   0000              	GLOBAL _player_gasta_brick
226   0000              	GLOBAL _player_move_jump
227   0000              	GLOBAL _player_open_door
228   0000              	GLOBAL _player_lost_life
229   0000              	GLOBAL _player_damage
230   0000              ;--------------------------------------------------------
231   0000              ; Externals used
232   0000              ;--------------------------------------------------------
233   0000              	GLOBAL _ulltoa_callee
234   0000              	GLOBAL _ulltoa
235   0000              	GLOBAL _strtoull_callee
236   0000              	GLOBAL _strtoull
237   0000              	GLOBAL _strtoll_callee
238   0000              	GLOBAL _strtoll
239   0000              	GLOBAL _lltoa_callee
240   0000              	GLOBAL _lltoa
241   0000              	GLOBAL _llabs_callee
242   0000              	GLOBAL _llabs
243   0000              	GLOBAL __lldivu__callee
244   0000              	GLOBAL __lldivu_
245   0000              	GLOBAL __lldiv__callee
246   0000              	GLOBAL __lldiv_
247   0000              	GLOBAL _atoll_callee
248   0000              	GLOBAL _atoll
249   0000              	GLOBAL _realloc_unlocked_callee
250   0000              	GLOBAL _realloc_unlocked
251   0000              	GLOBAL _malloc_unlocked_fastcall
252   0000              	GLOBAL _malloc_unlocked
253   0000              	GLOBAL _free_unlocked_fastcall
254   0000              	GLOBAL _free_unlocked
255   0000              	GLOBAL _calloc_unlocked_callee
256   0000              	GLOBAL _calloc_unlocked
257   0000              	GLOBAL _aligned_alloc_unlocked_callee
258   0000              	GLOBAL _aligned_alloc_unlocked
259   0000              	GLOBAL _realloc_callee
260   0000              	GLOBAL _realloc
261   0000              	GLOBAL _malloc_fastcall
262   0000              	GLOBAL _malloc
263   0000              	GLOBAL _free_fastcall
264   0000              	GLOBAL _free
265   0000              	GLOBAL _calloc_callee
266   0000              	GLOBAL _calloc
267   0000              	GLOBAL _aligned_alloc_callee
268   0000              	GLOBAL _aligned_alloc
269   0000              	GLOBAL _utoa_callee
270   0000              	GLOBAL _utoa
271   0000              	GLOBAL _ultoa_callee
272   0000              	GLOBAL _ultoa
273   0000              	GLOBAL _system_fastcall
274   0000              	GLOBAL _system
275   0000              	GLOBAL _strtoul_callee
276   0000              	GLOBAL _strtoul
277   0000              	GLOBAL _strtol_callee
278   0000              	GLOBAL _strtol
279   0000              	GLOBAL _strtof_callee
280   0000              	GLOBAL _strtof
281   0000              	GLOBAL _strtod_callee
282   0000              	GLOBAL _strtod
283   0000              	GLOBAL _srand_fastcall
284   0000              	GLOBAL _srand
285   0000              	GLOBAL _rand
286   0000              	GLOBAL _quick_exit_fastcall
287   0000              	GLOBAL _quick_exit
288   0000              	GLOBAL _qsort_callee
289   0000              	GLOBAL _qsort
290   0000              	GLOBAL _ltoa_callee
291   0000              	GLOBAL _ltoa
292   0000              	GLOBAL _labs_fastcall
293   0000              	GLOBAL _labs
294   0000              	GLOBAL _itoa_callee
295   0000              	GLOBAL _itoa
296   0000              	GLOBAL _ftoh_callee
297   0000              	GLOBAL _ftoh
298   0000              	GLOBAL _ftog_callee
299   0000              	GLOBAL _ftog
300   0000              	GLOBAL _ftoe_callee
301   0000              	GLOBAL _ftoe
302   0000              	GLOBAL _ftoa_callee
303   0000              	GLOBAL _ftoa
304   0000              	GLOBAL _exit_fastcall
305   0000              	GLOBAL _exit
306   0000              	GLOBAL _dtoh_callee
307   0000              	GLOBAL _dtoh
308   0000              	GLOBAL _dtog_callee
309   0000              	GLOBAL _dtog
310   0000              	GLOBAL _dtoe_callee
311   0000              	GLOBAL _dtoe
312   0000              	GLOBAL _dtoa_callee
313   0000              	GLOBAL _dtoa
314   0000              	GLOBAL _bsearch_callee
315   0000              	GLOBAL _bsearch
316   0000              	GLOBAL _atol_fastcall
317   0000              	GLOBAL _atol
318   0000              	GLOBAL _atoi_fastcall
319   0000              	GLOBAL _atoi
320   0000              	GLOBAL _atof_fastcall
321   0000              	GLOBAL _atof
322   0000              	GLOBAL _atexit_fastcall
323   0000              	GLOBAL _atexit
324   0000              	GLOBAL _at_quick_exit_fastcall
325   0000              	GLOBAL _at_quick_exit
326   0000              	GLOBAL _abs_fastcall
327   0000              	GLOBAL _abs
328   0000              	GLOBAL _abort
329   0000              	GLOBAL __strtou__callee
330   0000              	GLOBAL __strtou_
331   0000              	GLOBAL __strtoi__callee
332   0000              	GLOBAL __strtoi_
333   0000              	GLOBAL __random_uniform_xor_8__fastcall
334   0000              	GLOBAL __random_uniform_xor_8_
335   0000              	GLOBAL __random_uniform_xor_32__fastcall
336   0000              	GLOBAL __random_uniform_xor_32_
337   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
338   0000              	GLOBAL __random_uniform_cmwc_8_
339   0000              	GLOBAL __shellsort__callee
340   0000              	GLOBAL __shellsort_
341   0000              	GLOBAL __quicksort__callee
342   0000              	GLOBAL __quicksort_
343   0000              	GLOBAL __insertion_sort__callee
344   0000              	GLOBAL __insertion_sort_
345   0000              	GLOBAL __ldivu__callee
346   0000              	GLOBAL __ldivu_
347   0000              	GLOBAL __ldiv__callee
348   0000              	GLOBAL __ldiv_
349   0000              	GLOBAL __divu__callee
350   0000              	GLOBAL __divu_
351   0000              	GLOBAL __div__callee
352   0000              	GLOBAL __div_
353   0000              	GLOBAL _NIRVANAP_drawTW_raw_callee
354   0000              	GLOBAL _NIRVANAP_drawTW_raw
355   0000              	GLOBAL _NIRVANAP_drawTW_callee
356   0000              	GLOBAL _NIRVANAP_drawTW
357   0000              	GLOBAL _NIRVANAP_drawW_raw_callee
358   0000              	GLOBAL _NIRVANAP_drawW_raw
359   0000              	GLOBAL _NIRVANAP_drawW_callee
360   0000              	GLOBAL _NIRVANAP_drawW
361   0000              	GLOBAL _NIRVANAP_spriteT_callee
362   0000              	GLOBAL _NIRVANAP_spriteT
363   0000              	GLOBAL _NIRVANAP_fillC_callee
364   0000              	GLOBAL _NIRVANAP_fillC
365   0000              	GLOBAL _NIRVANAP_readC_callee
366   0000              	GLOBAL _NIRVANAP_readC
367   0000              	GLOBAL _NIRVANAP_paintC_callee
368   0000              	GLOBAL _NIRVANAP_paintC
369   0000              	GLOBAL _NIRVANAP_printC_callee
370   0000              	GLOBAL _NIRVANAP_printC
371   0000              	GLOBAL _NIRVANAP_fillT_raw_callee
372   0000              	GLOBAL _NIRVANAP_fillT_raw
373   0000              	GLOBAL _NIRVANAP_fillT_callee
374   0000              	GLOBAL _NIRVANAP_fillT
375   0000              	GLOBAL _NIRVANAP_drawT_raw_callee
376   0000              	GLOBAL _NIRVANAP_drawT_raw
377   0000              	GLOBAL _NIRVANAP_drawT_callee
378   0000              	GLOBAL _NIRVANAP_drawT
379   0000              	GLOBAL _NIRVANAP_stop
380   0000              	GLOBAL _NIRVANAP_start
381   0000              	GLOBAL _debug3
382   0000              	GLOBAL _debug2
383   0000              	GLOBAL _debug
384   0000              	GLOBAL _zx_print_str
385   0000              	GLOBAL _zx_print_int
386   0000              	GLOBAL _zx_print_chr
387   0000              	GLOBAL _zx_print_bonus_time
388   0000              	GLOBAL _zx_isr
389   0000              	GLOBAL _z80_otdr_callee
390   0000              	GLOBAL _z80_otdr
391   0000              	GLOBAL _z80_otir_callee
392   0000              	GLOBAL _z80_otir
393   0000              	GLOBAL _z80_outp_callee
394   0000              	GLOBAL _z80_outp
395   0000              	GLOBAL _z80_indr_callee
396   0000              	GLOBAL _z80_indr
397   0000              	GLOBAL _z80_inir_callee
398   0000              	GLOBAL _z80_inir
399   0000              	GLOBAL _z80_inp_fastcall
400   0000              	GLOBAL _z80_inp
401   0000              	GLOBAL _z80_set_int_state_fastcall
402   0000              	GLOBAL _z80_set_int_state
403   0000              	GLOBAL _z80_get_int_state
404   0000              	GLOBAL _z80_delay_tstate_fastcall
405   0000              	GLOBAL _z80_delay_tstate
406   0000              	GLOBAL _z80_delay_ms_fastcall
407   0000              	GLOBAL _z80_delay_ms
408   0000              	GLOBAL _im2_remove_generic_callback_callee
409   0000              	GLOBAL _im2_remove_generic_callback
410   0000              	GLOBAL _im2_prepend_generic_callback_callee
411   0000              	GLOBAL _im2_prepend_generic_callback
412   0000              	GLOBAL _im2_append_generic_callback_callee
413   0000              	GLOBAL _im2_append_generic_callback
414   0000              	GLOBAL _im2_create_generic_isr_8080_callee
415   0000              	GLOBAL _im2_create_generic_isr_8080
416   0000              	GLOBAL _im2_create_generic_isr_callee
417   0000              	GLOBAL _im2_create_generic_isr
418   0000              	GLOBAL _im2_install_isr_callee
419   0000              	GLOBAL _im2_install_isr
420   0000              	GLOBAL _im2_init_fastcall
421   0000              	GLOBAL _im2_init
422   0000              	GLOBAL _intrinsic_swap_word_32_fastcall
423   0000              	GLOBAL _intrinsic_swap_word_32
424   0000              	GLOBAL _intrinsic_swap_endian_32_fastcall
425   0000              	GLOBAL _intrinsic_swap_endian_32
426   0000              	GLOBAL _intrinsic_swap_endian_16_fastcall
427   0000              	GLOBAL _intrinsic_swap_endian_16
428   0000              	GLOBAL _intrinsic_return_de
429   0000              	GLOBAL _intrinsic_return_bc
430   0000              	GLOBAL _intrinsic_exx
431   0000              	GLOBAL _intrinsic_ex_de_hl
432   0000              	GLOBAL _intrinsic_nop
433   0000              	GLOBAL _intrinsic_im_2
434   0000              	GLOBAL _intrinsic_im_1
435   0000              	GLOBAL _intrinsic_im_0
436   0000              	GLOBAL _intrinsic_retn
437   0000              	GLOBAL _intrinsic_reti
438   0000              	GLOBAL _intrinsic_halt
439   0000              	GLOBAL _intrinsic_ei
440   0000              	GLOBAL _intrinsic_di
441   0000              	GLOBAL _intrinsic_stub
442   0000              	GLOBAL _intrinsic_outi
443   0000              	GLOBAL _intrinsic_ldi
444   0000              	GLOBAL _zx_pattern_fill_callee
445   0000              	GLOBAL _zx_pattern_fill
446   0000              	GLOBAL _zx_saddrpup_fastcall
447   0000              	GLOBAL _zx_saddrpup
448   0000              	GLOBAL _zx_saddrpright_callee
449   0000              	GLOBAL _zx_saddrpright
450   0000              	GLOBAL _zx_saddrpleft_callee
451   0000              	GLOBAL _zx_saddrpleft
452   0000              	GLOBAL _zx_saddrpdown_fastcall
453   0000              	GLOBAL _zx_saddrpdown
454   0000              	GLOBAL _zx_saddrcup_fastcall
455   0000              	GLOBAL _zx_saddrcup
456   0000              	GLOBAL _zx_saddrcright_fastcall
457   0000              	GLOBAL _zx_saddrcright
458   0000              	GLOBAL _zx_saddrcleft_fastcall
459   0000              	GLOBAL _zx_saddrcleft
460   0000              	GLOBAL _zx_saddrcdown_fastcall
461   0000              	GLOBAL _zx_saddrcdown
462   0000              	GLOBAL _zx_saddr2py_fastcall
463   0000              	GLOBAL _zx_saddr2py
464   0000              	GLOBAL _zx_saddr2px_fastcall
465   0000              	GLOBAL _zx_saddr2px
466   0000              	GLOBAL _zx_saddr2cy_fastcall
467   0000              	GLOBAL _zx_saddr2cy
468   0000              	GLOBAL _zx_saddr2cx_fastcall
469   0000              	GLOBAL _zx_saddr2cx
470   0000              	GLOBAL _zx_saddr2aaddr_fastcall
471   0000              	GLOBAL _zx_saddr2aaddr
472   0000              	GLOBAL _zx_py2saddr_fastcall
473   0000              	GLOBAL _zx_py2saddr
474   0000              	GLOBAL _zx_py2aaddr_fastcall
475   0000              	GLOBAL _zx_py2aaddr
476   0000              	GLOBAL _zx_pxy2saddr_callee
477   0000              	GLOBAL _zx_pxy2saddr
478   0000              	GLOBAL _zx_pxy2aaddr_callee
479   0000              	GLOBAL _zx_pxy2aaddr
480   0000              	GLOBAL _zx_px2bitmask_fastcall
481   0000              	GLOBAL _zx_px2bitmask
482   0000              	GLOBAL _zx_cy2saddr_fastcall
483   0000              	GLOBAL _zx_cy2saddr
484   0000              	GLOBAL _zx_cy2aaddr_fastcall
485   0000              	GLOBAL _zx_cy2aaddr
486   0000              	GLOBAL _zx_cxy2saddr_callee
487   0000              	GLOBAL _zx_cxy2saddr
488   0000              	GLOBAL _zx_cxy2aaddr_callee
489   0000              	GLOBAL _zx_cxy2aaddr
490   0000              	GLOBAL _zx_bitmask2px_fastcall
491   0000              	GLOBAL _zx_bitmask2px
492   0000              	GLOBAL _zx_aaddrcup_fastcall
493   0000              	GLOBAL _zx_aaddrcup
494   0000              	GLOBAL _zx_aaddrcright_fastcall
495   0000              	GLOBAL _zx_aaddrcright
496   0000              	GLOBAL _zx_aaddrcleft_fastcall
497   0000              	GLOBAL _zx_aaddrcleft
498   0000              	GLOBAL _zx_aaddrcdown_fastcall
499   0000              	GLOBAL _zx_aaddrcdown
500   0000              	GLOBAL _zx_aaddr2saddr_fastcall
501   0000              	GLOBAL _zx_aaddr2saddr
502   0000              	GLOBAL _zx_aaddr2py_fastcall
503   0000              	GLOBAL _zx_aaddr2py
504   0000              	GLOBAL _zx_aaddr2px_fastcall
505   0000              	GLOBAL _zx_aaddr2px
506   0000              	GLOBAL _zx_aaddr2cy_fastcall
507   0000              	GLOBAL _zx_aaddr2cy
508   0000              	GLOBAL _zx_aaddr2cx_fastcall
509   0000              	GLOBAL _zx_aaddr2cx
510   0000              	GLOBAL _zx_visit_wc_pix_callee
511   0000              	GLOBAL _zx_visit_wc_pix
512   0000              	GLOBAL _zx_visit_wc_attr_callee
513   0000              	GLOBAL _zx_visit_wc_attr
514   0000              	GLOBAL _zx_scroll_wc_up_pix_callee
515   0000              	GLOBAL _zx_scroll_wc_up_pix
516   0000              	GLOBAL _zx_scroll_wc_up_attr_callee
517   0000              	GLOBAL _zx_scroll_wc_up_attr
518   0000              	GLOBAL _zx_scroll_wc_up_callee
519   0000              	GLOBAL _zx_scroll_wc_up
520   0000              	GLOBAL _zx_scroll_up_pix_callee
521   0000              	GLOBAL _zx_scroll_up_pix
522   0000              	GLOBAL _zx_scroll_up_attr_callee
523   0000              	GLOBAL _zx_scroll_up_attr
524   0000              	GLOBAL _zx_scroll_up_callee
525   0000              	GLOBAL _zx_scroll_up
526   0000              	GLOBAL _zx_cls_wc_pix_callee
527   0000              	GLOBAL _zx_cls_wc_pix
528   0000              	GLOBAL _zx_cls_wc_attr_callee
529   0000              	GLOBAL _zx_cls_wc_attr
530   0000              	GLOBAL _zx_cls_wc_callee
531   0000              	GLOBAL _zx_cls_wc
532   0000              	GLOBAL _zx_cls_pix_fastcall
533   0000              	GLOBAL _zx_cls_pix
534   0000              	GLOBAL _zx_cls_attr_fastcall
535   0000              	GLOBAL _zx_cls_attr
536   0000              	GLOBAL _zx_cls_fastcall
537   0000              	GLOBAL _zx_cls
538   0000              	GLOBAL _zx_border_fastcall
539   0000              	GLOBAL _zx_border
540   0000              	GLOBAL _zx_tape_verify_block_callee
541   0000              	GLOBAL _zx_tape_verify_block
542   0000              	GLOBAL _zx_tape_save_block_callee
543   0000              	GLOBAL _zx_tape_save_block
544   0000              	GLOBAL _zx_tape_load_block_callee
545   0000              	GLOBAL _zx_tape_load_block
546   0000              	GLOBAL _spr_destroy
547   0000              	GLOBAL _spr_colision_boss
548   0000              	GLOBAL _spr_colision_b
549   0000              	GLOBAL _spr_unflattenP1
550   0000              	GLOBAL _spr_flatten
551   0000              	GLOBAL _spr_btile_paint_back
552   0000              	GLOBAL _spr_bullet_explode
553   0000              	GLOBAL _spr_init_effects
554   0000              	GLOBAL _spr_turn_horizontal
555   0000              	GLOBAL _spr_bullets_play
556   0000              	GLOBAL _spr_play_anim
557   0000              	GLOBAL _spr_add_anim
558   0000              	GLOBAL _spr_clear_scr
559   0000              	GLOBAL _spr_page_map
560   0000              	GLOBAL _spr_page_down
561   0000              	GLOBAL _spr_page_up
562   0000              	GLOBAL _spr_page_right
563   0000              	GLOBAL _spr_page_left
564   0000              	GLOBAL _spr_tile_paint
565   0000              	GLOBAL _spr_draw_index
566   0000              	GLOBAL _spr_brick_anim
567   0000              	GLOBAL _spr_back_repaint
568   0000              	GLOBAL _spr_tile_dir
569   0000              	GLOBAL _spr_tile
570   0000              	GLOBAL _spr_paint_player
571   0000              	GLOBAL _spr_paint
572   0000              	GLOBAL _spr_move_left
573   0000              	GLOBAL _spr_move_right
574   0000              	GLOBAL _spr_move_horizontal
575   0000              	GLOBAL _spr_move_down
576   0000              	GLOBAL _spr_move_up
577   0000              	GLOBAL _spr_set_right
578   0000              	GLOBAL _spr_set_left
579   0000              	GLOBAL _spr_set_down
580   0000              	GLOBAL _spr_set_up
581   0000              	GLOBAL _spr_calc_index
582   0000              	GLOBAL _spr_chktime
583   0000              	GLOBAL _game_match_back_strict
584   0000              	GLOBAL _game_match_back
585   0000              	GLOBAL _game_attribs
586   0000              	GLOBAL _game_boss_clear
587   0000              	GLOBAL _game_boss_kill
588   0000              	GLOBAL _game_obj_clear
589   0000              	GLOBAL _game_obj_chk
590   0000              	GLOBAL _game_obj_set
591   0000              	GLOBAL _game_shoot_fire_boss
592   0000              	GLOBAL _game_shoot_fire
593   0000              	GLOBAL _game_add_enemy
594   0000              	GLOBAL _game_print_header
595   0000              	GLOBAL _game_check_time
596   0000              	GLOBAL _game_rotate_attrib_osd
597   0000              	GLOBAL _game_rotate_attrib
598   0000              	GLOBAL _game_colour_message
599   0000              	GLOBAL _game_paint_attrib
600   0000              	GLOBAL _game_print_score
601   0000              	GLOBAL _game_check_cell
602   0000              	GLOBAL _game_check_map
603   0000              	GLOBAL _game_loop
604   0000              	GLOBAL _game_round_init
605   0000              	GLOBAL _game_set_checkpoint
606   0000              	GLOBAL _game_start_timer
607   0000              	GLOBAL _game_update_stats
608   0000              	GLOBAL _game_print_footer
609   0000              	GLOBAL _game_fill_row
610   0000              	GLOBAL _game_cls
611   0000              	GLOBAL _game_fps
612   0000              	GLOBAL _game_respawn
613   0000              	GLOBAL _game_draw_screen
614   0000              	GLOBAL _boss_draw_frame
615   0000              	GLOBAL _boss_draw
616   0000              	GLOBAL _boss_turn
617   0000              	GLOBAL _enemy_avoid_dead
618   0000              	GLOBAL _enemy_avoid_fall
619   0000              	GLOBAL _enemy_kill
620   0000              	GLOBAL _enemy_respawn
621   0000              	GLOBAL _enemy_init
622   0000              	GLOBAL _enemy_move
623   0000              	GLOBAL _enemy_turn
624   0000              	GLOBAL _enemy_static
625   0000              	GLOBAL _enemy_walk
626   0000              	GLOBAL _enemy_horizontal
627   0000              	GLOBAL _enemy_vertical
628   0000              	GLOBAL _ay_reset
629   0000              	GLOBAL _ay_song_stop
630   0000              	GLOBAL _ay_song_play
631   0000              	GLOBAL _ay_fx_stop
632   0000              	GLOBAL _ay_fx_play
633   0000              	GLOBAL _ay_is_playing
634   0000              	GLOBAL _audio_levelup
635   0000              	GLOBAL _audio_checkpoint
636   0000              	GLOBAL _audio_menu
637   0000              	GLOBAL _audio_game_end
638   0000              	GLOBAL _audio_level_complete
639   0000              	GLOBAL _audio_level_start
640   0000              	GLOBAL _audio_lotr_lose_a_life
641   0000              	GLOBAL _audio_mushroom
642   0000              	GLOBAL _audio_puerta
643   0000              	GLOBAL _audio_sin_mana
644   0000              	GLOBAL _audio_magic1
645   0000              	GLOBAL _audio_coin
646   0000              	GLOBAL _audio_golpe
647   0000              	GLOBAL _audio_salto
648   0000              	GLOBAL _audio_efecto
649   0000              	GLOBAL _audio_disparo2
650   0000              	GLOBAL _audio_disparo1
651   0000              	GLOBAL _audio_explosion1
652   0000              	GLOBAL _audio_explosion
653   0000              	GLOBAL _audio_ingame
654   0000              	GLOBAL _test_func
655   0000              	GLOBAL _test_proc
656   0000              	GLOBAL _in_mouse_kempston_wheel_delta
657   0000              	GLOBAL _in_mouse_kempston_wheel
658   0000              	GLOBAL _in_mouse_kempston_callee
659   0000              	GLOBAL _in_mouse_kempston
660   0000              	GLOBAL _in_mouse_kempston_setpos_callee
661   0000              	GLOBAL _in_mouse_kempston_setpos
662   0000              	GLOBAL _in_mouse_kempston_reset
663   0000              	GLOBAL _in_mouse_kempston_init
664   0000              	GLOBAL _in_mouse_amx_wheel_delta
665   0000              	GLOBAL _in_mouse_amx_wheel
666   0000              	GLOBAL _in_mouse_amx_callee
667   0000              	GLOBAL _in_mouse_amx
668   0000              	GLOBAL _in_mouse_amx_setpos_callee
669   0000              	GLOBAL _in_mouse_amx_setpos
670   0000              	GLOBAL _in_mouse_amx_reset
671   0000              	GLOBAL _in_mouse_amx_init_callee
672   0000              	GLOBAL _in_mouse_amx_init
673   0000              	GLOBAL _in_stick_sinclair2
674   0000              	GLOBAL _in_stick_sinclair1
675   0000              	GLOBAL _in_stick_kempston
676   0000              	GLOBAL _in_stick_fuller
677   0000              	GLOBAL _in_stick_cursor
678   0000              	GLOBAL _in_stick_keyboard_fastcall
679   0000              	GLOBAL _in_stick_keyboard
680   0000              	GLOBAL _in_wait_nokey
681   0000              	GLOBAL _in_wait_key
682   0000              	GLOBAL _in_test_key
683   0000              	GLOBAL _in_pause_fastcall
684   0000              	GLOBAL _in_pause
685   0000              	GLOBAL _in_key_scancode_fastcall
686   0000              	GLOBAL _in_key_scancode
687   0000              	GLOBAL _in_key_pressed_fastcall
688   0000              	GLOBAL _in_key_pressed
689   0000              	GLOBAL _in_inkey
690   0000              	GLOBAL _NIRVANAP_CHAR_TABLE
691   0000              	GLOBAL _NIRVANAP_WIDE_IMAGES
692   0000              	GLOBAL _NIRVANAP_TILE_IMAGES
693   0000              	GLOBAL _NIRVANAP_HOLE
694   0000              	GLOBAL _NIRVANAP_ISR_HOOK
695   0000              	GLOBAL _scan_map
696   0000              	GLOBAL _key_map
697   0000              	GLOBAL _player_lvl_table
698   0000              	GLOBAL _stp_row
699   0000              	GLOBAL _stp_col
700   0000              	GLOBAL _stp_tile
701   0000              	GLOBAL _map_paper_last_a
702   0000              	GLOBAL _map_paper_last
703   0000              	GLOBAL _map_paper_clr
704   0000              	GLOBAL _map_paper
705   0000              	GLOBAL _draw_count
706   0000              	GLOBAL _g_player_hit_right
707   0000              	GLOBAL _g_player_hit_left
708   0000              	GLOBAL _bullet_count
709   0000              	GLOBAL _spr_hack
710   0000              	GLOBAL _boss_stat
711   0000              	GLOBAL _boss_time_fire
712   0000              	GLOBAL _boss_time
713   0000              	GLOBAL _boss_tile
714   0000              	GLOBAL _boss_inc
715   0000              	GLOBAL _boss_col
716   0000              	GLOBAL _boss_lin
717   0000              	GLOBAL _bullet
718   0000              	GLOBAL _bullet_vel
719   0000              	GLOBAL _bullet_frames
720   0000              	GLOBAL _bullet_colint
721   0000              	GLOBAL _bullet_dir
722   0000              	GLOBAL _bullet_tile
723   0000              	GLOBAL _bullet_col
724   0000              	GLOBAL _bullet_lin
725   0000              	GLOBAL _bullet_col0
726   0000              	GLOBAL _bullet_lin0
727   0000              	GLOBAL _bullet_max
728   0000              	GLOBAL _bullet_class
729   0000              	GLOBAL _mush_class
730   0000              	GLOBAL _mush_index
731   0000              	GLOBAL _anim_count
732   0000              	GLOBAL _anim_respanwn
733   0000              	GLOBAL _anim_loop
734   0000              	GLOBAL _anim_end
735   0000              	GLOBAL _anim_int
736   0000              	GLOBAL _anim_tile
737   0000              	GLOBAL _anim_col
738   0000              	GLOBAL _anim_lin
739   0000              	GLOBAL _map_heigth
740   0000              	GLOBAL _map_width
741   0000              	GLOBAL _scr_curr
742   0000              	GLOBAL _sprite_kind
743   0000              	GLOBAL _scr_obj1
744   0000              	GLOBAL _scr_obj0
745   0000              	GLOBAL _scr_map
746   0000              	GLOBAL _sprite_speed_alt
747   0000              	GLOBAL _spr_init
748   0000              	GLOBAL _spr_map_tile
749   0000              	GLOBAL _sprite_frames
750   0000              	GLOBAL _sprite_speed
751   0000              	GLOBAL _screen_ink
752   0000              	GLOBAL _screen_paper
753   0000              	GLOBAL _player_onstair
754   0000              	GLOBAL _game_start_scr
755   0000              	GLOBAL _game_respawn_tile
756   0000              	GLOBAL _game_respawn_index
757   0000              	GLOBAL _game_respawn_time
758   0000              	GLOBAL _game_score_top
759   0000              	GLOBAL _player_coins
760   0000              	GLOBAL _player_lives
761   0000              	GLOBAL _game_over
762   0000              	GLOBAL _game_sound
763   0000              	GLOBAL _game_inf_lives
764   0000              	GLOBAL _game_inmune
765   0000              	GLOBAL _sprite_curr_index
766   0000              	GLOBAL _spr_count
767   0000              	GLOBAL _bullet_time
768   0000              	GLOBAL _anim_time
769   0000              	GLOBAL _frame_time
770   0000              	GLOBAL _curr_time
771   0000              	GLOBAL _s_state
772   0000              	GLOBAL _attrib_osd
773   0000              	GLOBAL _attrib_hl
774   0000              	GLOBAL _attrib
775   0000              	GLOBAL _zx_val_asm
776   0000              	GLOBAL _enemies
777   0000              	GLOBAL _tmp_ui
778   0000              	GLOBAL _tmp_sc
779   0000              	GLOBAL _tmp_uc
780   0000              	GLOBAL _tmp1
781   0000              	GLOBAL _tmp0
782   0000              	GLOBAL _tmp
783   0000              	GLOBAL _index1
784   0000              	GLOBAL _index0
785   0000              	GLOBAL _loop_count
786   0000              	GLOBAL _s_class
787   0000              	GLOBAL _s_col1
788   0000              	GLOBAL _s_col0
789   0000              	GLOBAL _s_lin1
790   0000              	GLOBAL _s_lin0
791   0000              	GLOBAL _s_tile1
792   0000              	GLOBAL _s_tile0
793   0000              	GLOBAL _player_brick_time
794   0000              	GLOBAL _player_hit_count
795   0000              	GLOBAL _game_debug
796   0000              	GLOBAL _sprite_horizontal_check
797   0000              	GLOBAL _sprite_on_air
798   0000              	GLOBAL _sprite
799   0000              	GLOBAL _fps
800   0000              	GLOBAL _menu_curr_sel
801   0000              	GLOBAL _game_control_fire_lock
802   0000              	GLOBAL _game_control_mode
803   0000              	GLOBAL _game_respawn_curr_time
804   0000              	GLOBAL _game_round_up
805   0000              	GLOBAL _game_mush_count
806   0000              	GLOBAL _game_song_play
807   0000              	GLOBAL _game_boss_fix
808   0000              	GLOBAL _game_boss_hit
809   0000              	GLOBAL _game_boss_alive
810   0000              	GLOBAL _game_boss
811   0000              	GLOBAL _game_world
812   0000              	GLOBAL _game_gravity
813   0000              	GLOBAL _player_onfire
814   0000              	GLOBAL _player_anim_stair
815   0000              	GLOBAL _player_hit_time
816   0000              	GLOBAL _game_checkpoint_scr
817   0000              	GLOBAL _game_checkpoint_lin
818   0000              	GLOBAL _game_checkpoint_col
819   0000              	GLOBAL _player_jump_check
820   0000              	GLOBAL _player_lin_scr
821   0000              	GLOBAL _player_col_scr
822   0000              	GLOBAL _player_lvl
823   0000              	GLOBAL _player_int
824   0000              	GLOBAL _player_str
825   0000              	GLOBAL _player_max_vita
826   0000              	GLOBAL _player_max_mana
827   0000              	GLOBAL _player_vita
828   0000              	GLOBAL _player_mana
829   0000              	GLOBAL _player_keys
830   0000              	GLOBAL _player_vel_inc
831   0000              	GLOBAL _player_vel_y1
832   0000              	GLOBAL _player_vel_y0
833   0000              	GLOBAL _player_vel_y
834   0000              	GLOBAL _player_vel_x
835   0000              	GLOBAL _player_score
836   0000              	GLOBAL _last_time
837   0000              	GLOBAL _spr_timer
838   0000              	GLOBAL _jump_lin
839   0000              	GLOBAL _player_hit_col
840   0000              	GLOBAL _player_hit_lin
841   0000              	GLOBAL _colint
842   0000              	GLOBAL _col
843   0000              	GLOBAL _tbuffer
844   0000              	GLOBAL _lin
845   0000              	GLOBAL _tile
846   0000              	GLOBAL _state_a
847   0000              	GLOBAL _state
848   0000              	GLOBAL _class
849   0000              	GLOBAL _dirs_alt
850   0000              	GLOBAL _dirs
851   0000              	GLOBAL _k2
852   0000              	GLOBAL _k1
853   0000              	GLOBAL _joyfunc2
854   0000              	GLOBAL _joyfunc1
855   0000              	GLOBAL _btiles
856   0000              	GLOBAL _spec128
857   0000              	GLOBAL _GLOBAL_ZX_PORT_7FFD
858   0000              	GLOBAL _GLOBAL_ZX_PORT_1FFD
859   0000              	GLOBAL _GLOBAL_ZX_PORT_FE
860   0000              	GLOBAL _ay_song_04_ciel
861   0000              	GLOBAL _ay_song_04_lotr_level_start
862   0000              	GLOBAL _ay_song_04_lotr_level_complete
863   0000              	GLOBAL _ay_song_04_lotr_lose_a_life
864   0000              	GLOBAL _ay_song_06_sunflower
865   0000              	GLOBAL _ay_song_06_lotr
866   0000              	GLOBAL _ay_fx_04_explosion1
867   0000              	GLOBAL _ay_fx_04_efecto
868   0000              	GLOBAL _ay_fx_04_disparo2
869   0000              	GLOBAL _ay_fx_04_disparo1
870   0000              	GLOBAL _ay_fx_04_checkpoint
871   0000              	GLOBAL _ay_fx_04_levelup
872   0000              	GLOBAL _ay_fx_04_mushroom
873   0000              	GLOBAL _ay_fx_04_magic
874   0000              	GLOBAL _ay_fx_04_sin_mana
875   0000              	GLOBAL _ay_fx_04_salto
876   0000              	GLOBAL _ay_fx_04_puerta
877   0000              	GLOBAL _ay_fx_04_magic1
878   0000              	GLOBAL _ay_fx_04_golpe
879   0000              	GLOBAL _ay_fx_04_explosion
880   0000              	GLOBAL _ay_fx_04_dano_por_toque
881   0000              	GLOBAL _ay_fx_04_coin
882   0000              	GLOBAL _world0_h
883   0000              	GLOBAL _world0_w
884   0000              	GLOBAL _world0
885   0000              	GLOBAL _paper0
886   0000              	GLOBAL _lenght0
887   0000              	GLOBAL _start_scr0
888   0000              ;--------------------------------------------------------
889   0000              ; special function registers
890   0000              ;--------------------------------------------------------
891   0000              defc _IO_FE	=	0x00fe
892   0000              defc _IO_1FFD	=	0x1ffd
893   0000              defc _IO_7FFD	=	0x7ffd
894   0000              ;--------------------------------------------------------
895   0000              ; ram data
896   0000              ;--------------------------------------------------------
897   0000              	SECTION bss_compiler
898   0000              ;--------------------------------------------------------
899   0000              ; ram data
900   0000              ;--------------------------------------------------------
901   0000              
902   0000              IF 0
903   0000              
904   0000              ; .area _INITIALIZED removed by z88dk
905   0000              
906   0000              
907   0000              ENDIF
908   0000              
909   0000              ;--------------------------------------------------------
910   0000              ; absolute external ram data
911   0000              ;--------------------------------------------------------
912   0000              	SECTION IGNORE
913   0000              ;--------------------------------------------------------
914   0000              ; global & static initialisations
915   0000              ;--------------------------------------------------------
916   0000              	SECTION code_crt_init
917   0000              ;--------------------------------------------------------
918   0000              ; Home
919   0000              ;--------------------------------------------------------
920   0000              	SECTION IGNORE
921   0000              ;--------------------------------------------------------
922   0000              ; code
923   0000              ;--------------------------------------------------------
924   0000              	SECTION code_compiler
925   0000              ;	---------------------------------
926   0000              ; Function player_init
927   0000              ; ---------------------------------
928   0000              _player_init:
929   0000  CD 00 00    	call	___sdcc_enter_ix
930   0003  21 07 00    	ld	hl, +(_class + 0x0007)
931   0006  36 00       	ld	(hl),0x00
932   0008  21 07 00    	ld	hl, +(_tile + 0x0007)
933   000B  DD 7E 06    	ld	a,(ix+6)
934   000E  77          	ld	(hl), a
935   000F  21 07 00    	ld	hl, +(_lin + 0x0007)
936   0012  DD 7E 04    	ld	a,(ix+4)
937   0015  77          	ld	(hl), a
938   0016  21 07 00    	ld	hl, +(_col + 0x0007)
939   0019  DD 7E 05    	ld	a,(ix+5)
940   001C  77          	ld	(hl), a
941   001D  21 07 00    	ld	hl, +(_colint + 0x0007)
942   0020  36 00       	ld	(hl),0x00
943   0022  21 07 00    	ld	hl, +(_state + 0x0007)
944   0025  36 00       	ld	(hl),0x00
945   0027  01 07 00    	ld	bc,_state_a+7
946   002A  AF          	xor	a, a
947   002B  02          	ld	(bc), a
948   002C  21 07 00    	ld	hl, +(_jump_lin + 0x0007)
949   002F  DD 7E 04    	ld	a,(ix+4)
950   0032  77          	ld	(hl), a
951   0033  ED 5B 00 00 	ld	de,(_curr_time)
952   0037  ED 53 0E 00 	ld	(_last_time + 0x000e),de
953   003B  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
954   003E  36 00       	ld	(hl),0x00
955   0040  0A          	ld	a, (bc)
956   0041  F6 11       	or	a,+(0x01|0x10)
957   0043  02          	ld	(bc),a
958   0044  21 00 00    	ld	hl,_player_hit_col
959   0047  36 00       	ld	(hl),0x00
960   0049  21 00 00    	ld	hl,_player_hit_lin
961   004C  36 00       	ld	(hl),0x00
962   004E  21 00 00    	ld	hl,_player_onstair
963   0051  36 00       	ld	(hl),0x00
964   0053  21 00 00    	ld	hl,_player_onfire
965   0056  36 00       	ld	(hl),0x00
966   0058  DD 66 05    	ld	h,(ix+5)
967   005B  DD 6E 04    	ld	l,(ix+4)
968   005E  E5          	push	hl
969   005F  DD 56 06    	ld	d,(ix+6)
970   0062  1E 07       	ld	e,0x07
971   0064  D5          	push	de
972   0065  CD 00 00    	call	_NIRVANAP_spriteT_callee
973   0068  DD E1       	pop	ix
974   006A  C9          	ret
975   006B              	SECTION code_compiler
976   006B              ;	---------------------------------
977   006B              ; Function player_turn
978   006B              ; ---------------------------------
979   006B              _player_turn:
980   006B  21 00 00    	ld	hl,_sprite
981   006E  CD 00 00    	call	_spr_chktime
982   0071  7D          	ld	a, l
983   0072  B7          	or	a, a
984   0073  C8          	ret	Z
985   0074  21 00 00    	ld	hl,_k1
986   0077  E5          	push	hl
987   0078  2A 00 00    	ld	hl,(_joyfunc1)
988   007B  CD 00 00    	call	___sdcc_call_hl
989   007E  F1          	pop	af
990   007F  7D          	ld	a,l
991   0080  32 00 00    	ld	(_dirs),a
992   0083  21 00 00    	ld	hl,_k2
993   0086  E5          	push	hl
994   0087  2A 00 00    	ld	hl,(_joyfunc2)
995   008A  CD 00 00    	call	___sdcc_call_hl
996   008D  F1          	pop	af
997   008E  7D          	ld	a,l
998   008F  32 00 00    	ld	(_dirs_alt),a
999   0092  3A 07 00    	ld	a,(_lin + 0x0007)
1000  0095  32 00 00    	ld	(_s_lin0),a
1001  0098  3A 07 00    	ld	a,(_col + 0x0007)
1002  009B  32 00 00    	ld	(_s_col0),a
1003  009E  3A 07 00    	ld	a,(_state + 0x0007)
1004  00A1  32 00 00    	ld	(_s_state),a
1005  00A4  21 00 00    	ld	hl,_s_class
1006  00A7  36 00       	ld	(hl),0x00
1007  00A9  CD B6 00    	call	_player_move
1008  00AC  CD FD 03    	call	_player_collision
1009  00AF  3A 00 00    	ld	a,(_s_state)
1010  00B2  32 07 00    	ld	((_state + 0x0007)),a
1011  00B5  C9          	ret
1012  00B6              	SECTION code_compiler
1013  00B6              ;	---------------------------------
1014  00B6              ; Function player_move
1015  00B6              ; ---------------------------------
1016  00B6              _player_move:
1017  00B6  CD B7 03    	call	_player_fire
1018  00B9  21 00 00    	ld	hl,_s_state
1019  00BC  CB 46       	bit	0, (hl)
1020  00BE  20 07       	jr	NZ,l_player_move_00105
1021  00C0  21 00 00    	ld	hl,_s_state
1022  00C3  CB 4E       	bit	1, (hl)
1023  00C5  28 0A       	jr	Z,l_player_move_00106
1024  00C7              l_player_move_00105:
1025  00C7  21 00 00    	ld	hl,_sprite_on_air
1026  00CA  36 01       	ld	(hl),0x01
1027  00CC  CD 26 0E    	call	_player_move_jump
1028  00CF  18 17       	jr	l_player_move_00107
1029  00D1              l_player_move_00106:
1030  00D1  21 00 00    	ld	hl,_sprite_on_air
1031  00D4  36 00       	ld	(hl),0x00
1032  00D6  3A 00 00    	ld	a,(_player_onfire)
1033  00D9  B7          	or	a, a
1034  00DA  20 03       	jr	NZ,l_player_move_00102
1035  00DC  CD 42 02    	call	_player_move_input
1036  00DF              l_player_move_00102:
1037  00DF  3A 00 00    	ld	a,(_player_onstair)
1038  00E2  B7          	or	a, a
1039  00E3  20 03       	jr	NZ,l_player_move_00107
1040  00E5  CD AE 0C    	call	_player_check_floor
1041  00E8              l_player_move_00107:
1042  00E8  3A 00 00    	ld	a,(_player_onfire)
1043  00EB  B7          	or	a, a
1044  00EC  20 0C       	jr	NZ,l_player_move_00116
1045  00EE  CD 00 00    	call	_spr_paint_player
1046  00F1  7D          	ld	a, l
1047  00F2  B7          	or	a, a
1048  00F3  28 39       	jr	Z,l_player_move_00117
1049  00F5  CD 57 07    	call	_player_check_map
1050  00F8  18 34       	jr	l_player_move_00117
1051  00FA              l_player_move_00116:
1052  00FA  CD 00 00    	call	_spr_back_repaint
1053  00FD  3A 07 00    	ld	a,(_state_a + 0x0007)
1054  0100  CB 67       	bit	4, a
1055  0102  28 10       	jr	Z,l_player_move_00112
1056  0104  21 07 00    	ld	hl,+(_col + 0x0007)
1057  0107  46          	ld	b, (hl)
1058  0108  21 07 00    	ld	hl,+(_lin + 0x0007)
1059  010B  4E          	ld	c, (hl)
1060  010C  C5          	push	bc
1061  010D  21 07 D0    	ld	hl,0xd007
1062  0110  E5          	push	hl
1063  0111  CD 00 00    	call	_NIRVANAP_spriteT_callee
1064  0114              l_player_move_00112:
1065  0114  3A 07 00    	ld	a,(_state_a + 0x0007)
1066  0117  CB 5F       	bit	3, a
1067  0119  28 10       	jr	Z,l_player_move_00114
1068  011B  21 07 00    	ld	hl,+(_col + 0x0007)
1069  011E  56          	ld	d, (hl)
1070  011F  21 07 00    	ld	hl,+(_lin + 0x0007)
1071  0122  5E          	ld	e, (hl)
1072  0123  D5          	push	de
1073  0124  21 07 D1    	ld	hl,0xd107
1074  0127  E5          	push	hl
1075  0128  CD 00 00    	call	_NIRVANAP_spriteT_callee
1076  012B              l_player_move_00114:
1077  012B  CD 57 07    	call	_player_check_map
1078  012E              l_player_move_00117:
1079  012E  3A 00 00    	ld	a,(_player_hit_lin)
1080  0131  B7          	or	a, a
1081  0132  28 03       	jr	Z,l_player_move_00119
1082  0134  CD 12 0C    	call	_player_hit_platform_clear
1083  0137              l_player_move_00119:
1084  0137  2E 00       	ld	l,0x00
1085  0139  C9          	ret
1086  013A              	SECTION code_compiler
1087  013A              ;	---------------------------------
1088  013A              ; Function player_check_input
1089  013A              ; ---------------------------------
1090  013A              _player_check_input:
1091  013A  21 00 00    	ld	hl,_dirs
1092  013D  CB 56       	bit	2, (hl)
1093  013F  28 0C       	jr	Z,l_player_check_input_00102
1094  0141  21 00 00    	ld	hl,_dirs
1095  0144  CB 5E       	bit	3, (hl)
1096  0146  28 05       	jr	Z,l_player_check_input_00102
1097  0148  21 00 00    	ld	hl,_dirs
1098  014B  36 00       	ld	(hl),0x00
1099  014D              l_player_check_input_00102:
1100  014D  21 00 00    	ld	hl,_dirs
1101  0150  CB 7E       	bit	7, (hl)
1102  0152  20 29       	jr	NZ,l_player_check_input_00104
1103  0154  21 00 00    	ld	hl,_dirs
1104  0157  CB 56       	bit	2, (hl)
1105  0159  20 22       	jr	NZ,l_player_check_input_00104
1106  015B  21 00 00    	ld	hl,_dirs
1107  015E  CB 5E       	bit	3, (hl)
1108  0160  20 1B       	jr	NZ,l_player_check_input_00104
1109  0162  21 00 00    	ld	hl,_dirs
1110  0165  CB 46       	bit	0, (hl)
1111  0167  20 14       	jr	NZ,l_player_check_input_00104
1112  0169  21 00 00    	ld	hl,_dirs
1113  016C  CB 4E       	bit	1, (hl)
1114  016E  20 0D       	jr	NZ,l_player_check_input_00104
1115  0170  3A 00 00    	ld	a,(_game_control_mode)
1116  0173  B7          	or	a, a
1117  0174  20 0B       	jr	NZ,l_player_check_input_00105
1118  0176  21 00 00    	ld	hl,_dirs_alt
1119  0179  CB 7E       	bit	7, (hl)
1120  017B  28 04       	jr	Z,l_player_check_input_00105
1121  017D              l_player_check_input_00104:
1122  017D  2E 01       	ld	l,0x01
1123  017F  18 07       	jr	l_player_check_input_00113
1124  0181              l_player_check_input_00105:
1125  0181  21 00 00    	ld	hl,_game_control_fire_lock
1126  0184  36 00       	ld	(hl),0x00
1127  0186  2E 00       	ld	l,0x00
1128  0188              l_player_check_input_00113:
1129  0188  C9          	ret
1130  0189              	SECTION code_compiler
1131  0189              ;	---------------------------------
1132  0189              ; Function player_action_fire
1133  0189              ; ---------------------------------
1134  0189              _player_action_fire:
1135  0189  3A 00 00    	ld	a,(_game_control_mode)
1136  018C  B7          	or	a, a
1137  018D  28 1C       	jr	Z,l_player_action_fire_00101
1138  018F  21 00 00    	ld	hl,_dirs
1139  0192  7E          	ld	a, (hl)
1140  0193  CB 07       	rlc	a
1141  0195  E6 01       	and	a,0x01
1142  0197  4F          	ld	c, a
1143  0198  7E          	ld	a, (hl)
1144  0199  E6 01       	and	a,0x01
1145  019B  47          	ld	b, a
1146  019C  3A 00 00    	ld	a,(_game_control_mode)
1147  019F  3D          	dec	a
1148  01A0  28 11       	jr	Z,l_player_action_fire_00102
1149  01A2  3A 00 00    	ld	a,(_game_control_mode)
1150  01A5  D6 02       	sub	a,0x02
1151  01A7  28 1A       	jr	Z,l_player_action_fire_00103
1152  01A9  18 3C       	jr	l_player_action_fire_00109
1153  01AB              l_player_action_fire_00101:
1154  01AB  3A 00 00    	ld	a,(_dirs_alt)
1155  01AE  E6 80       	and	a,0x80
1156  01B0  6F          	ld	l, a
1157  01B1  18 36       	jr	l_player_action_fire_00110
1158  01B3              l_player_action_fire_00102:
1159  01B3  CB 41       	bit	0, c
1160  01B5  28 04       	jr	Z,l_player_action_fire_00112
1161  01B7  78          	ld	a, b
1162  01B8  B7          	or	a, a
1163  01B9  28 04       	jr	Z,l_player_action_fire_00113
1164  01BB              l_player_action_fire_00112:
1165  01BB  2E 00       	ld	l,0x00
1166  01BD  18 02       	jr	l_player_action_fire_00114
1167  01BF              l_player_action_fire_00113:
1168  01BF  2E 01       	ld	l,0x01
1169  01C1              l_player_action_fire_00114:
1170  01C1  18 26       	jr	l_player_action_fire_00110
1171  01C3              l_player_action_fire_00103:
1172  01C3  3A 00 00    	ld	a,(_game_control_fire_lock)
1173  01C6  B7          	or	a, a
1174  01C7  20 1E       	jr	NZ,l_player_action_fire_00109
1175  01C9  3A 00 00    	ld	a,(_player_onstair)
1176  01CC  B7          	or	a, a
1177  01CD  28 10       	jr	Z,l_player_action_fire_00105
1178  01CF  CB 41       	bit	0, c
1179  01D1  28 04       	jr	Z,l_player_action_fire_00115
1180  01D3  78          	ld	a, b
1181  01D4  B7          	or	a, a
1182  01D5  28 04       	jr	Z,l_player_action_fire_00116
1183  01D7              l_player_action_fire_00115:
1184  01D7  2E 00       	ld	l,0x00
1185  01D9  18 02       	jr	l_player_action_fire_00117
1186  01DB              l_player_action_fire_00116:
1187  01DB  2E 01       	ld	l,0x01
1188  01DD              l_player_action_fire_00117:
1189  01DD  18 0A       	jr	l_player_action_fire_00110
1190  01DF              l_player_action_fire_00105:
1191  01DF  3A 00 00    	ld	a,(_dirs)
1192  01E2  E6 80       	and	a,0x80
1193  01E4  6F          	ld	l, a
1194  01E5  18 02       	jr	l_player_action_fire_00110
1195  01E7              l_player_action_fire_00109:
1196  01E7  2E 00       	ld	l,0x00
1197  01E9              l_player_action_fire_00110:
1198  01E9  C9          	ret
1199  01EA              	SECTION code_compiler
1200  01EA              ;	---------------------------------
1201  01EA              ; Function player_action_jump
1202  01EA              ; ---------------------------------
1203  01EA              _player_action_jump:
1204  01EA  3A 00 00    	ld	a,(_dirs)
1205  01ED  E6 80       	and	a,0x80
1206  01EF  4F          	ld	c, a
1207  01F0  3A 00 00    	ld	a,(_game_control_mode)
1208  01F3  B7          	or	a, a
1209  01F4  28 15       	jr	Z,l_player_action_jump_00101
1210  01F6  3A 00 00    	ld	a,(_dirs)
1211  01F9  E6 01       	and	a,0x01
1212  01FB  47          	ld	b, a
1213  01FC  3A 00 00    	ld	a,(_game_control_mode)
1214  01FF  3D          	dec	a
1215  0200  28 0C       	jr	Z,l_player_action_jump_00102
1216  0202  3A 00 00    	ld	a,(_game_control_mode)
1217  0205  D6 02       	sub	a,0x02
1218  0207  28 1C       	jr	Z,l_player_action_jump_00103
1219  0209  18 34       	jr	l_player_action_jump_00110
1220  020B              l_player_action_jump_00101:
1221  020B  69          	ld	l, c
1222  020C  18 33       	jr	l_player_action_jump_00111
1223  020E              l_player_action_jump_00102:
1224  020E  3A 00 00    	ld	a,(_dirs)
1225  0211  CB 07       	rlc	a
1226  0213  E6 01       	and	a,0x01
1227  0215  CB 47       	bit	0, a
1228  0217  28 04       	jr	Z,l_player_action_jump_00113
1229  0219  78          	ld	a, b
1230  021A  B7          	or	a, a
1231  021B  20 04       	jr	NZ,l_player_action_jump_00114
1232  021D              l_player_action_jump_00113:
1233  021D  2E 00       	ld	l,0x00
1234  021F  18 02       	jr	l_player_action_jump_00115
1235  0221              l_player_action_jump_00114:
1236  0221  2E 01       	ld	l,0x01
1237  0223              l_player_action_jump_00115:
1238  0223  18 1C       	jr	l_player_action_jump_00111
1239  0225              l_player_action_jump_00103:
1240  0225  3A 00 00    	ld	a,(_player_onstair)
1241  0228  B7          	or	a, a
1242  0229  28 11       	jr	Z,l_player_action_jump_00108
1243  022B  79          	ld	a, c
1244  022C  B7          	or	a, a
1245  022D  28 10       	jr	Z,l_player_action_jump_00110
1246  022F  78          	ld	a, b
1247  0230  B7          	or	a, a
1248  0231  28 0C       	jr	Z,l_player_action_jump_00110
1249  0233  21 00 00    	ld	hl,_game_control_fire_lock
1250  0236  36 01       	ld	(hl),0x01
1251  0238  2E 01       	ld	l,0x01
1252  023A  18 05       	jr	l_player_action_jump_00111
1253  023C              l_player_action_jump_00108:
1254  023C  68          	ld	l, b
1255  023D  18 02       	jr	l_player_action_jump_00111
1256  023F              l_player_action_jump_00110:
1257  023F  2E 00       	ld	l,0x00
1258  0241              l_player_action_jump_00111:
1259  0241  C9          	ret
1260  0242              	SECTION code_compiler
1261  0242              ;	---------------------------------
1262  0242              ; Function player_move_input
1263  0242              ; ---------------------------------
1264  0242              _player_move_input:
1265  0242  CD 3A 01    	call	_player_check_input
1266  0245  7D          	ld	a, l
1267  0246  B7          	or	a, a
1268  0247  CA 77 03    	jp	Z, l_player_move_input_00142
1269  024A  CD EA 01    	call	_player_action_jump
1270  024D  7D          	ld	a, l
1271  024E  B7          	or	a, a
1272  024F  28 37       	jr	Z,l_player_move_input_00102
1273  0251  21 00 00    	ld	hl,_player_vel_inc
1274  0254  36 01       	ld	(hl),0x01
1275  0256  CD 00 00    	call	_audio_salto
1276  0259  21 00 00    	ld	hl,_player_onstair
1277  025C  36 00       	ld	(hl),0x00
1278  025E  21 00 00    	ld	hl,_s_state
1279  0261  CD 00 00    	call	_spr_set_up
1280  0264  3A 07 00    	ld	a,(_lin + 0x0007)
1281  0267  32 07 00    	ld	(_jump_lin+7),a
1282  026A  3A 00 00    	ld	a,(_s_state)
1283  026D  32 07 00    	ld	((_state + 0x0007)),a
1284  0270  21 64 08    	ld	hl,0x0864
1285  0273  E5          	push	hl
1286  0274  CD 36 07    	call	_player_tile
1287  0277  F1          	pop	af
1288  0278  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
1289  027B  36 02       	ld	(hl),0x02
1290  027D  3A 00 00    	ld	a,(_player_vel_y0)
1291  0280  32 00 00    	ld	(_player_vel_y),a
1292  0283  2E 01       	ld	l,0x01
1293  0285  C3 9D 03    	jp	l_player_move_input_00144
1294  0288              l_player_move_input_00102:
1295  0288  21 00 00    	ld	hl,_dirs
1296  028B  CB 5E       	bit	3, (hl)
1297  028D  28 20       	jr	Z,l_player_move_input_00106
1298  028F  CD 9E 03    	call	_player_fix_walk_lin
1299  0292  21 00 00    	ld	hl,_s_state
1300  0295  CD 00 00    	call	_spr_set_right
1301  0298  01 07 00    	ld	bc,_state_a+7
1302  029B  0A          	ld	a, (bc)
1303  029C  F6 10       	or	a,0x10
1304  029E  E6 F7       	and	a,0xf7
1305  02A0  02          	ld	(bc),a
1306  02A1  3A 00 00    	ld	a,(_player_onstair)
1307  02A4  B7          	or	a, a
1308  02A5  28 05       	jr	Z,l_player_move_input_00104
1309  02A7  2E 00       	ld	l,0x00
1310  02A9  CD 8E 06    	call	_player_check_stairs
1311  02AC              l_player_move_input_00104:
1312  02AC  CD 00 00    	call	_spr_move_horizontal
1313  02AF              l_player_move_input_00106:
1314  02AF  21 00 00    	ld	hl,_dirs
1315  02B2  CB 56       	bit	2, (hl)
1316  02B4  28 20       	jr	Z,l_player_move_input_00110
1317  02B6  CD 9E 03    	call	_player_fix_walk_lin
1318  02B9  21 00 00    	ld	hl,_s_state
1319  02BC  CD 00 00    	call	_spr_set_left
1320  02BF  01 07 00    	ld	bc,_state_a+7
1321  02C2  0A          	ld	a, (bc)
1322  02C3  F6 08       	or	a,0x08
1323  02C5  E6 EF       	and	a,0xef
1324  02C7  02          	ld	(bc),a
1325  02C8  3A 00 00    	ld	a,(_player_onstair)
1326  02CB  B7          	or	a, a
1327  02CC  28 05       	jr	Z,l_player_move_input_00108
1328  02CE  2E 00       	ld	l,0x00
1329  02D0  CD 8E 06    	call	_player_check_stairs
1330  02D3              l_player_move_input_00108:
1331  02D3  CD 00 00    	call	_spr_move_horizontal
1332  02D6              l_player_move_input_00110:
1333  02D6  21 00 00    	ld	hl,_dirs
1334  02D9  CB 46       	bit	0, (hl)
1335  02DB  28 39       	jr	Z,l_player_move_input_00122
1336  02DD  2E 00       	ld	l,0x00
1337  02DF  CD 8E 06    	call	_player_check_stairs
1338  02E2  3A 00 00    	ld	a,(_player_onstair)
1339  02E5  B7          	or	a, a
1340  02E6  20 10       	jr	NZ,l_player_move_input_00114
1341  02E8  2E 01       	ld	l,0x01
1342  02EA  CD 8E 06    	call	_player_check_stairs
1343  02ED  3A 00 00    	ld	a,(_player_onstair)
1344  02F0  B7          	or	a, a
1345  02F1  20 05       	jr	NZ,l_player_move_input_00114
1346  02F3  2E FE       	ld	l,0xfe
1347  02F5  CD EF 05    	call	_player_check_stairs_vertical
1348  02F8              l_player_move_input_00114:
1349  02F8  3A 00 00    	ld	a,(_player_onstair)
1350  02FB  B7          	or	a, a
1351  02FC  28 05       	jr	Z,l_player_move_input_00119
1352  02FE  CD 00 00    	call	_spr_move_up
1353  0301  18 13       	jr	l_player_move_input_00122
1354  0303              l_player_move_input_00119:
1355  0303  21 00 00    	ld	hl,_dirs
1356  0306  CB 5E       	bit	3, (hl)
1357  0308  20 0C       	jr	NZ,l_player_move_input_00122
1358  030A  21 00 00    	ld	hl,_dirs
1359  030D  CB 56       	bit	2, (hl)
1360  030F  20 05       	jr	NZ,l_player_move_input_00122
1361  0311  2E 00       	ld	l,0x00
1362  0313  C3 9D 03    	jp	l_player_move_input_00144
1363  0316              l_player_move_input_00122:
1364  0316  21 00 00    	ld	hl,_dirs
1365  0319  CB 4E       	bit	1, (hl)
1366  031B  28 38       	jr	Z,l_player_move_input_00134
1367  031D  2E 00       	ld	l,0x00
1368  031F  CD 8E 06    	call	_player_check_stairs
1369  0322  3A 00 00    	ld	a,(_player_onstair)
1370  0325  B7          	or	a, a
1371  0326  20 10       	jr	NZ,l_player_move_input_00126
1372  0328  2E 01       	ld	l,0x01
1373  032A  CD 8E 06    	call	_player_check_stairs
1374  032D  3A 00 00    	ld	a,(_player_onstair)
1375  0330  B7          	or	a, a
1376  0331  20 05       	jr	NZ,l_player_move_input_00126
1377  0333  2E 12       	ld	l,0x12
1378  0335  CD EF 05    	call	_player_check_stairs_vertical
1379  0338              l_player_move_input_00126:
1380  0338  3A 00 00    	ld	a,(_player_onstair)
1381  033B  B7          	or	a, a
1382  033C  28 05       	jr	Z,l_player_move_input_00131
1383  033E  CD 00 00    	call	_spr_move_down
1384  0341  18 12       	jr	l_player_move_input_00134
1385  0343              l_player_move_input_00131:
1386  0343  21 00 00    	ld	hl,_dirs
1387  0346  CB 5E       	bit	3, (hl)
1388  0348  20 0B       	jr	NZ,l_player_move_input_00134
1389  034A  21 00 00    	ld	hl,_dirs
1390  034D  CB 56       	bit	2, (hl)
1391  034F  20 04       	jr	NZ,l_player_move_input_00134
1392  0351  2E 00       	ld	l,0x00
1393  0353  18 48       	jr	l_player_move_input_00144
1394  0355              l_player_move_input_00134:
1395  0355  3A 00 00    	ld	a,(_s_state)
1396  0358  32 07 00    	ld	((_state + 0x0007)),a
1397  035B  3A 00 00    	ld	a,(_player_onstair)
1398  035E  B7          	or	a, a
1399  035F  28 0A       	jr	Z,l_player_move_input_00136
1400  0361  21 72 00    	ld	hl,0x0072
1401  0364  E5          	push	hl
1402  0365  CD 36 07    	call	_player_tile
1403  0368  F1          	pop	af
1404  0369  18 08       	jr	l_player_move_input_00137
1405  036B              l_player_move_input_00136:
1406  036B  21 60 08    	ld	hl,0x0860
1407  036E  E5          	push	hl
1408  036F  CD 36 07    	call	_player_tile
1409  0372  F1          	pop	af
1410  0373              l_player_move_input_00137:
1411  0373  2E 01       	ld	l,0x01
1412  0375  18 26       	jr	l_player_move_input_00144
1413  0377              l_player_move_input_00142:
1414  0377  21 07 00    	ld	hl, +(_colint + 0x0007)
1415  037A  36 00       	ld	(hl),0x00
1416  037C  3A 00 00    	ld	a,(_player_onstair)
1417  037F  B7          	or	a, a
1418  0380  28 0A       	jr	Z,l_player_move_input_00139
1419  0382  21 72 00    	ld	hl,0x0072
1420  0385  E5          	push	hl
1421  0386  CD 36 07    	call	_player_tile
1422  0389  F1          	pop	af
1423  038A  18 08       	jr	l_player_move_input_00140
1424  038C              l_player_move_input_00139:
1425  038C  21 70 01    	ld	hl,0x0170
1426  038F  E5          	push	hl
1427  0390  CD 36 07    	call	_player_tile
1428  0393  F1          	pop	af
1429  0394              l_player_move_input_00140:
1430  0394  21 00 00    	ld	hl,_s_state
1431  0397  7E          	ld	a,(hl)
1432  0398  E6 F3       	and	a,+(0xf7&0xfb)
1433  039A  77          	ld	(hl),a
1434  039B  2E 00       	ld	l,0x00
1435  039D              l_player_move_input_00144:
1436  039D  C9          	ret
1437  039E              	SECTION code_compiler
1438  039E              ;	---------------------------------
1439  039E              ; Function player_fix_walk_lin
1440  039E              ; ---------------------------------
1441  039E              _player_fix_walk_lin:
1442  039E  3A 00 00    	ld	a,(_player_onstair)
1443  03A1  B7          	or	a, a
1444  03A2  C0          	ret	NZ
1445  03A3  01 07 00    	ld	bc,_lin+7
1446  03A6  3A 00 00    	ld	a,(_s_lin0)
1447  03A9  07          	rlca
1448  03AA  07          	rlca
1449  03AB  07          	rlca
1450  03AC  07          	rlca
1451  03AD  E6 0F       	and	a,0x0f
1452  03AF  07          	rlca
1453  03B0  07          	rlca
1454  03B1  07          	rlca
1455  03B2  07          	rlca
1456  03B3  E6 F0       	and	a,0xf0
1457  03B5  02          	ld	(bc), a
1458  03B6  C9          	ret
1459  03B7              	SECTION code_compiler
1460  03B7              ;	---------------------------------
1461  03B7              ; Function player_fire
1462  03B7              ; ---------------------------------
1463  03B7              _player_fire:
1464  03B7  CD 89 01    	call	_player_action_fire
1465  03BA  4D          	ld	c, l
1466  03BB  21 00 00    	ld	hl,_player_onfire
1467  03BE  71          	ld	(hl), c
1468  03BF  3A 07 00    	ld	a,(_bullet_col + 0x0007)
1469  03C2  3C          	inc	a
1470  03C3  20 37       	jr	NZ,l_player_fire_00113
1471  03C5  7E          	ld	a, (hl)
1472  03C6  B7          	or	a, a
1473  03C7  28 33       	jr	Z,l_player_fire_00113
1474  03C9  21 00 00    	ld	hl,_player_mana
1475  03CC  7E          	ld	a, (hl)
1476  03CD  B7          	or	a, a
1477  03CE  28 29       	jr	Z,l_player_fire_00107
1478  03D0  3E 05       	ld	a,0x05
1479  03D2  96          	sub	a, (hl)
1480  03D3  30 0F       	jr	NC,l_player_fire_00104
1481  03D5  3A 00 00    	ld	a,(_game_inmune)
1482  03D8  B7          	or	a, a
1483  03D9  20 0E       	jr	NZ,l_player_fire_00105
1484  03DB  21 00 00    	ld	hl,_player_mana
1485  03DE  7E          	ld	a, (hl)
1486  03DF  C6 FB       	add	a,0xfb
1487  03E1  77          	ld	(hl), a
1488  03E2  18 05       	jr	l_player_fire_00105
1489  03E4              l_player_fire_00104:
1490  03E4  21 00 00    	ld	hl,_player_mana
1491  03E7  36 00       	ld	(hl),0x00
1492  03E9              l_player_fire_00105:
1493  03E9  CD 00 00    	call	_game_update_stats
1494  03EC  CD 00 00    	call	_audio_disparo1
1495  03EF  21 07 78    	ld	hl,0x7807
1496  03F2  E5          	push	hl
1497  03F3  CD 00 00    	call	_game_shoot_fire
1498  03F6  F1          	pop	af
1499  03F7  18 03       	jr	l_player_fire_00113
1500  03F9              l_player_fire_00107:
1501  03F9  CD 00 00    	call	_audio_sin_mana
1502  03FC              l_player_fire_00113:
1503  03FC  C9          	ret
1504  03FD              	SECTION code_compiler
1505  03FD              ;	---------------------------------
1506  03FD              ; Function player_collision
1507  03FD              ; ---------------------------------
1508  03FD              _player_collision:
1509  03FD  3E 1E       	ld	a,0x1e
1510  03FF  F5          	push	af
1511  0400  33          	inc	sp
1512  0401  21 00 00    	ld	hl,_player_hit_time
1513  0404  E5          	push	hl
1514  0405  CD 00 00    	call	_game_check_time
1515  0408  F1          	pop	af
1516  0409  33          	inc	sp
1517  040A  7D          	ld	a, l
1518  040B  B7          	or	a, a
1519  040C  CA A3 05    	jp	Z, l_player_collision_00135
1520  040F  21 00 00    	ld	hl,_sprite
1521  0412  36 00       	ld	(hl),0x00
1522  0414  3A 07 00    	ld	a,(_col + 7)
1523  0417  32 00 00    	ld	(_s_col1),a
1524  041A  3A 07 00    	ld	a,(_lin + 7)
1525  041D  32 00 00    	ld	(_s_lin1),a
1526  0420  C6 08       	add	a,0x08
1527  0422  4F          	ld	c, a
1528  0423  3A 00 00    	ld	a, (_s_col1)
1529  0426  47          	ld	b,a
1530  0427  C5          	push	bc
1531  0428  CD 00 00    	call	_spr_calc_index
1532  042B  F1          	pop	af
1533  042C  4D          	ld	c, l
1534  042D  21 00 00    	ld	hl,_sprite_curr_index
1535  0430  71          	ld	(hl), c
1536  0431  3E 00       	ld	a, +((_scr_map) & 0xFF)
1537  0433  86          	add	a, (hl)
1538  0434  4F          	ld	c, a
1539  0435  3E 00       	ld	a, +((_scr_map) / 256)
1540  0437  CE 00       	adc	a,0x00
1541  0439  47          	ld	b, a
1542  043A  0A          	ld	a, (bc)
1543  043B  4F          	ld	c,a
1544  043C  D6 15       	sub	a,0x15
1545  043E  20 24       	jr	NZ,l_player_collision_00104
1546  0440  3A 00 00    	ld	a,(_game_checkpoint_scr)
1547  0443  21 00 00    	ld	hl,_scr_curr
1548  0446  96          	sub	a, (hl)
1549  0447  28 16       	jr	Z,l_player_collision_00102
1550  0449  C5          	push	bc
1551  044A  CD 00 00    	call	_audio_checkpoint
1552  044D  C1          	pop	bc
1553  044E  2E 07       	ld	l,0x07
1554  0450  CD 00 00    	call	_zx_border_fastcall
1555  0453  3A 00 00    	ld	a,(_s_col1)
1556  0456  32 00 00    	ld	(_player_col_scr),a
1557  0459  3A 00 00    	ld	a,(_s_lin1)
1558  045C  32 00 00    	ld	(_player_lin_scr),a
1559  045F              l_player_collision_00102:
1560  045F  C5          	push	bc
1561  0460  CD 00 00    	call	_game_set_checkpoint
1562  0463  C1          	pop	bc
1563  0464              l_player_collision_00104:
1564  0464  3E 2F       	ld	a,0x2f
1565  0466  91          	sub	a, c
1566  0467  30 5D       	jr	NC,l_player_collision_00155
1567  0469  79          	ld	a,c
1568  046A  FE 3A       	cp	a,0x3a
1569  046C  30 58       	jr	NC,l_player_collision_00155
1570  046E  D6 39       	sub	a,0x39
1571  0470  20 2A       	jr	NZ,l_player_collision_00110
1572  0472  CD 00 00    	call	_audio_level_complete
1573  0475  21 00 00    	ld	hl,___str_0
1574  0478  E5          	push	hl
1575  0479  21 0C 08    	ld	hl,0x080c
1576  047C  E5          	push	hl
1577  047D  CD 00 00    	call	_zx_print_str
1578  0480  AF          	xor	a, a
1579  0481  F5          	push	af
1580  0482  33          	inc	sp
1581  0483  21 E8 03    	ld	hl,0x03e8
1582  0486  E5          	push	hl
1583  0487  21 08 17    	ld	hl,0x1708
1584  048A  E5          	push	hl
1585  048B  3E 0C       	ld	a,0x0c
1586  048D  F5          	push	af
1587  048E  33          	inc	sp
1588  048F  CD 00 00    	call	_game_colour_message
1589  0492  F1          	pop	af
1590  0493  F1          	pop	af
1591  0494  F1          	pop	af
1592  0495  21 00 00    	ld	hl,_game_round_up
1593  0498  36 01       	ld	(hl),0x01
1594  049A  18 2A       	jr	l_player_collision_00155
1595  049C              l_player_collision_00110:
1596  049C  3A 00 00    	ld	a,(_game_inmune)
1597  049F  B7          	or	a, a
1598  04A0  20 10       	jr	NZ,l_player_collision_00106
1599  04A2  3E 82       	ld	a,0x82
1600  04A4  21 00 00    	ld	hl,_s_lin1
1601  04A7  96          	sub	a, (hl)
1602  04A8  30 08       	jr	NC,l_player_collision_00106
1603  04AA  CD 49 10    	call	_player_lost_life
1604  04AD  2E 00       	ld	l,0x00
1605  04AF  C3 A5 05    	jp	l_player_collision_00136
1606  04B2              l_player_collision_00106:
1607  04B2  21 00 00    	ld	hl,_s_state
1608  04B5  CB E6       	set	4, (hl)
1609  04B7  2E 06       	ld	l,0x06
1610  04B9  CD 00 00    	call	_zx_border_fastcall
1611  04BC  2E 32       	ld	l,0x32
1612  04BE  CD 9A 11    	call	_player_damage
1613  04C1  2E 01       	ld	l,0x01
1614  04C3  C3 A5 05    	jp	l_player_collision_00136
1615  04C6              l_player_collision_00155:
1616  04C6              l_player_collision_00131:
1617  04C6  21 00 00    	ld	hl,_sprite
1618  04C9  7E          	ld	a, (hl)
1619  04CA  D6 07       	sub	a,0x07
1620  04CC  D2 9E 05    	jp	NC, l_player_collision_00133
1621  04CF  4E          	ld	c,(hl)
1622  04D0  06 00       	ld	b,0x00
1623  04D2  21 00 00    	ld	hl,_class
1624  04D5  09          	add	hl,bc
1625  04D6  7E          	ld	a,(hl)
1626  04D7  32 00 00    	ld	(_s_class),a
1627  04DA  B7          	or	a, a
1628  04DB  CA 97 05    	jp	Z, l_player_collision_00130
1629  04DE  2A 00 00    	ld	hl,(_sprite)
1630  04E1  26 00       	ld	h,0x00
1631  04E3  01 00 00    	ld	bc,_col
1632  04E6  09          	add	hl,bc
1633  04E7  4E          	ld	c,(hl)
1634  04E8  06 00       	ld	b,0x00
1635  04EA  3A 00 00    	ld	a,(_s_col1)
1636  04ED  5F          	ld	e,a
1637  04EE  16 00       	ld	d,0x00
1638  04F0  79          	ld	a, c
1639  04F1  93          	sub	a, e
1640  04F2  6F          	ld	l, a
1641  04F3  78          	ld	a, b
1642  04F4  9A          	sbc	a, d
1643  04F5  67          	ld	h, a
1644  04F6  CD 00 00    	call	_abs_fastcall
1645  04F9  7D          	ld	a,l
1646  04FA  D6 02       	sub	a,0x02
1647  04FC  7C          	ld	a,h
1648  04FD  17          	rla
1649  04FE  3F          	ccf
1650  04FF  1F          	rra
1651  0500  DE 80       	sbc	a,0x80
1652  0502  D2 97 05    	jp	NC, l_player_collision_00130
1653  0505  2A 00 00    	ld	hl,(_sprite)
1654  0508  26 00       	ld	h,0x00
1655  050A  01 00 00    	ld	bc,_lin
1656  050D  09          	add	hl,bc
1657  050E  4E          	ld	c,(hl)
1658  050F  06 00       	ld	b,0x00
1659  0511  3A 00 00    	ld	a,(_s_lin1)
1660  0514  5F          	ld	e,a
1661  0515  16 00       	ld	d,0x00
1662  0517  79          	ld	a, c
1663  0518  93          	sub	a, e
1664  0519  6F          	ld	l, a
1665  051A  78          	ld	a, b
1666  051B  9A          	sbc	a, d
1667  051C  67          	ld	h, a
1668  051D  CD 00 00    	call	_abs_fastcall
1669  0520  7D          	ld	a,l
1670  0521  D6 0E       	sub	a,0x0e
1671  0523  7C          	ld	a,h
1672  0524  17          	rla
1673  0525  3F          	ccf
1674  0526  1F          	rra
1675  0527  DE 80       	sbc	a,0x80
1676  0529  30 6C       	jr	NC,l_player_collision_00130
1677  052B  3A 00 00    	ld	a,(_s_class)
1678  052E  D6 06       	sub	a,0x06
1679  0530  20 1D       	jr	NZ,l_player_collision_00118
1680  0532  21 00 00    	ld	hl,_player_vita
1681  0535  7E          	ld	a, (hl)
1682  0536  C6 32       	add	a,0x32
1683  0538  77          	ld	(hl), a
1684  0539  3A 00 00    	ld	a,(_player_max_vita)
1685  053C  21 00 00    	ld	hl,_player_vita
1686  053F  96          	sub	a, (hl)
1687  0540  30 06       	jr	NC,l_player_collision_00116
1688  0542  3A 00 00    	ld	a,(_player_max_vita)
1689  0545  32 00 00    	ld	(_player_vita),a
1690  0548              l_player_collision_00116:
1691  0548  CD A6 05    	call	_player_pick_mushroom
1692  054B  2E 00       	ld	l,0x00
1693  054D  18 56       	jr	l_player_collision_00136
1694  054F              l_player_collision_00118:
1695  054F  3A 00 00    	ld	a,(_s_class)
1696  0552  D6 07       	sub	a,0x07
1697  0554  20 1D       	jr	NZ,l_player_collision_00122
1698  0556  21 00 00    	ld	hl,_player_mana
1699  0559  7E          	ld	a, (hl)
1700  055A  C6 32       	add	a,0x32
1701  055C  77          	ld	(hl), a
1702  055D  3A 00 00    	ld	a,(_player_max_mana)
1703  0560  21 00 00    	ld	hl,_player_mana
1704  0563  96          	sub	a, (hl)
1705  0564  30 06       	jr	NC,l_player_collision_00120
1706  0566  3A 00 00    	ld	a,(_player_max_mana)
1707  0569  32 00 00    	ld	(_player_mana),a
1708  056C              l_player_collision_00120:
1709  056C  CD A6 05    	call	_player_pick_mushroom
1710  056F  2E 00       	ld	l,0x00
1711  0571  18 32       	jr	l_player_collision_00136
1712  0573              l_player_collision_00122:
1713  0573  3A 00 00    	ld	a,(_s_class)
1714  0576  D6 08       	sub	a,0x08
1715  0578  20 0A       	jr	NZ,l_player_collision_00124
1716  057A  CD A6 05    	call	_player_pick_mushroom
1717  057D  CD BD 05    	call	_player_1up
1718  0580  2E 00       	ld	l,0x00
1719  0582  18 21       	jr	l_player_collision_00136
1720  0584              l_player_collision_00124:
1721  0584  21 00 00    	ld	hl,_s_state
1722  0587  CB E6       	set	4, (hl)
1723  0589  2E 02       	ld	l,0x02
1724  058B  CD 00 00    	call	_zx_border_fastcall
1725  058E  2E 14       	ld	l,0x14
1726  0590  CD 9A 11    	call	_player_damage
1727  0593  2E 01       	ld	l,0x01
1728  0595  18 0E       	jr	l_player_collision_00136
1729  0597              l_player_collision_00130:
1730  0597  21 00 00    	ld	hl,_sprite
1731  059A  34          	inc	(hl)
1732  059B  C3 C6 04    	jp	l_player_collision_00131
1733  059E              l_player_collision_00133:
1734  059E  21 00 00    	ld	hl,_s_state
1735  05A1  CB A6       	res	4, (hl)
1736  05A3              l_player_collision_00135:
1737  05A3  2E 00       	ld	l,0x00
1738  05A5              l_player_collision_00136:
1739  05A5  C9          	ret
1740  05A6              	SECTION rodata_compiler
1741  0000              ___str_0:
1742  0000  52 4F 55 4E 44 20 43 4F 4D 50 4C 45 54 45 21 
                        	DEFM "ROUND COMPLETE!"
1743  000F  00          	DEFB 0x00
1744  0010              	SECTION code_compiler
1745  05A6              ;	---------------------------------
1746  05A6              ; Function player_pick_mushroom
1747  05A6              ; ---------------------------------
1748  05A6              _player_pick_mushroom:
1749  05A6  CD 00 00    	call	_audio_magic1
1750  05A9  21 01 00    	ld	hl,0x0001
1751  05AC  CD 41 0C    	call	_player_score_add
1752  05AF  CD 00 00    	call	_game_update_stats
1753  05B2  2A 00 00    	ld	hl,(_sprite)
1754  05B5  CD 00 00    	call	_spr_destroy
1755  05B8  21 00 00    	ld	hl,_game_mush_count
1756  05BB  35          	dec	(hl)
1757  05BC  C9          	ret
1758  05BD              	SECTION code_compiler
1759  05BD              ;	---------------------------------
1760  05BD              ; Function player_1up
1761  05BD              ; ---------------------------------
1762  05BD              _player_1up:
1763  05BD  21 00 00    	ld	hl,_player_lives
1764  05C0  7E          	ld	a, (hl)
1765  05C1  D6 64       	sub	a,0x64
1766  05C3  D0          	ret	NC
1767  05C4  34          	inc	(hl)
1768  05C5  CD 00 00    	call	_spr_flatten
1769  05C8  21 10 00    	ld	hl,___str_1
1770  05CB  E5          	push	hl
1771  05CC  21 0C 0C    	ld	hl,0x0c0c
1772  05CF  E5          	push	hl
1773  05D0  CD 00 00    	call	_zx_print_str
1774  05D3  AF          	xor	a, a
1775  05D4  F5          	push	af
1776  05D5  33          	inc	sp
1777  05D6  21 19 00    	ld	hl,0x0019
1778  05D9  E5          	push	hl
1779  05DA  21 0C 11    	ld	hl,0x110c
1780  05DD  E5          	push	hl
1781  05DE  3E 0C       	ld	a,0x0c
1782  05E0  F5          	push	af
1783  05E1  33          	inc	sp
1784  05E2  CD 00 00    	call	_game_colour_message
1785  05E5  F1          	pop	af
1786  05E6  F1          	pop	af
1787  05E7  F1          	pop	af
1788  05E8  CD 00 00    	call	_game_update_stats
1789  05EB  CD 00 00    	call	_spr_unflattenP1
1790  05EE  C9          	ret
1791  05EF              	SECTION rodata_compiler
1792  0010              ___str_1:
1793  0010  31 20 55 50 21 
                        	DEFM "1 UP!"
1794  0015  00          	DEFB 0x00
1795  0016              	SECTION code_compiler
1796  05EF              ;	---------------------------------
1797  05EF              ; Function player_check_stairs_vertical
1798  05EF              ; ---------------------------------
1799  05EF              _player_check_stairs_vertical:
1800  05EF  CD 00 00    	call	___sdcc_enter_ix
1801  05F2  3B          	dec	sp
1802  05F3  4D          	ld	c, l
1803  05F4  21 07 00    	ld	hl,+(_col + 0x0007)
1804  05F7  46          	ld	b, (hl)
1805  05F8  CB 40       	bit	0, b
1806  05FA  20 2A       	jr	NZ,l_player_check_stairs_vertical_00102
1807  05FC  3A 07 00    	ld	a,(_lin + 0x0007)
1808  05FF  81          	add	a, c
1809  0600  4F          	ld	c,a
1810  0601  C5          	push	bc
1811  0602  CD 00 00    	call	_spr_calc_index
1812  0605  F1          	pop	af
1813  0606  7D          	ld	a,l
1814  0607  32 00 00    	ld	(_sprite_curr_index),a
1815  060A  4F          	ld	c,a
1816  060B  06 00       	ld	b,0x00
1817  060D  21 00 00    	ld	hl,_scr_map
1818  0610  09          	add	hl,bc
1819  0611  7E          	ld	a,(hl)
1820  0612  4F          	ld	c,a
1821  0613  D6 44       	sub	a,0x44
1822  0615  38 05       	jr	C,l_player_check_stairs_vertical_00110
1823  0617  3E 47       	ld	a,0x47
1824  0619  91          	sub	a, c
1825  061A  30 04       	jr	NC,l_player_check_stairs_vertical_00111
1826  061C              l_player_check_stairs_vertical_00110:
1827  061C  06 00       	ld	b,0x00
1828  061E  18 02       	jr	l_player_check_stairs_vertical_00112
1829  0620              l_player_check_stairs_vertical_00111:
1830  0620  06 01       	ld	b,0x01
1831  0622              l_player_check_stairs_vertical_00112:
1832  0622  0E 00       	ld	c,0x00
1833  0624  18 51       	jr	l_player_check_stairs_vertical_00103
1834  0626              l_player_check_stairs_vertical_00102:
1835  0626  78          	ld	a, b
1836  0627  91          	sub	a, c
1837  0628  57          	ld	d, a
1838  0629  3A 07 00    	ld	a,(_lin + 0x0007)
1839  062C  81          	add	a, c
1840  062D  47          	ld	b, a
1841  062E  C5          	push	bc
1842  062F  58          	ld	e,b
1843  0630  D5          	push	de
1844  0631  CD 00 00    	call	_spr_calc_index
1845  0634  F1          	pop	af
1846  0635  C1          	pop	bc
1847  0636  7D          	ld	a,l
1848  0637  32 00 00    	ld	(_sprite_curr_index),a
1849  063A  5F          	ld	e,a
1850  063B  16 00       	ld	d,0x00
1851  063D  21 00 00    	ld	hl,_scr_map
1852  0640  19          	add	hl,de
1853  0641  7E          	ld	a,(hl)
1854  0642  47          	ld	b,a
1855  0643  D6 44       	sub	a,0x44
1856  0645  38 05       	jr	C,l_player_check_stairs_vertical_00113
1857  0647  3E 47       	ld	a,0x47
1858  0649  90          	sub	a, b
1859  064A  30 04       	jr	NC,l_player_check_stairs_vertical_00114
1860  064C              l_player_check_stairs_vertical_00113:
1861  064C  06 00       	ld	b,0x00
1862  064E  18 02       	jr	l_player_check_stairs_vertical_00115
1863  0650              l_player_check_stairs_vertical_00114:
1864  0650  06 01       	ld	b,0x01
1865  0652              l_player_check_stairs_vertical_00115:
1866  0652  3A 07 00    	ld	a,(_col + 0x0007)
1867  0655  91          	sub	a, c
1868  0656  57          	ld	d, a
1869  0657  3A 07 00    	ld	a,(_lin + 0x0007)
1870  065A  81          	add	a, c
1871  065B  C5          	push	bc
1872  065C  5F          	ld	e,a
1873  065D  D5          	push	de
1874  065E  CD 00 00    	call	_spr_calc_index
1875  0661  F1          	pop	af
1876  0662  C1          	pop	bc
1877  0663  7D          	ld	a,l
1878  0664  32 00 00    	ld	(_sprite_curr_index),a
1879  0667  78          	ld	a, b
1880  0668  D6 44       	sub	a,0x44
1881  066A  38 05       	jr	C,l_player_check_stairs_vertical_00116
1882  066C  3E 47       	ld	a,0x47
1883  066E  90          	sub	a, b
1884  066F  30 04       	jr	NC,l_player_check_stairs_vertical_00117
1885  0671              l_player_check_stairs_vertical_00116:
1886  0671  0E 00       	ld	c,0x00
1887  0673  18 02       	jr	l_player_check_stairs_vertical_00118
1888  0675              l_player_check_stairs_vertical_00117:
1889  0675  0E 01       	ld	c,0x01
1890  0677              l_player_check_stairs_vertical_00118:
1891  0677              l_player_check_stairs_vertical_00103:
1892  0677  78          	ld	a, b
1893  0678  B7          	or	a,a
1894  0679  20 03       	jr	NZ,l_player_check_stairs_vertical_00104
1895  067B  B1          	or	a,c
1896  067C  28 07       	jr	Z,l_player_check_stairs_vertical_00105
1897  067E              l_player_check_stairs_vertical_00104:
1898  067E  21 00 00    	ld	hl,_player_onstair
1899  0681  36 01       	ld	(hl),0x01
1900  0683  18 05       	jr	l_player_check_stairs_vertical_00108
1901  0685              l_player_check_stairs_vertical_00105:
1902  0685  21 00 00    	ld	hl,_player_onstair
1903  0688  36 00       	ld	(hl),0x00
1904  068A              l_player_check_stairs_vertical_00108:
1905  068A  33          	inc	sp
1906  068B  DD E1       	pop	ix
1907  068D  C9          	ret
1908  068E              	SECTION code_compiler
1909  068E              ;	---------------------------------
1910  068E              ; Function player_check_stairs
1911  068E              ; ---------------------------------
1912  068E              _player_check_stairs:
1913  068E  CD 00 00    	call	___sdcc_enter_ix
1914  0691  3B          	dec	sp
1915  0692  45          	ld	b, l
1916  0693  3A 07 00    	ld	a,(_col + 0x0007)
1917  0696  4F          	ld	c,a
1918  0697  80          	add	a, b
1919  0698  57          	ld	d, a
1920  0699  3A 07 00    	ld	a,(_lin + 0x0007)
1921  069C  C5          	push	bc
1922  069D  5F          	ld	e,a
1923  069E  D5          	push	de
1924  069F  CD 00 00    	call	_spr_calc_index
1925  06A2  F1          	pop	af
1926  06A3  C1          	pop	bc
1927  06A4  7D          	ld	a,l
1928  06A5  32 00 00    	ld	(_sprite_curr_index),a
1929  06A8  5F          	ld	e,a
1930  06A9  16 00       	ld	d,0x00
1931  06AB  21 00 00    	ld	hl,_scr_map
1932  06AE  19          	add	hl,de
1933  06AF  7E          	ld	a,(hl)
1934  06B0  4F          	ld	c,a
1935  06B1  D6 44       	sub	a,0x44
1936  06B3  38 05       	jr	C,l_player_check_stairs_00111
1937  06B5  3E 47       	ld	a,0x47
1938  06B7  91          	sub	a, c
1939  06B8  30 04       	jr	NC,l_player_check_stairs_00112
1940  06BA              l_player_check_stairs_00111:
1941  06BA  0E 00       	ld	c,0x00
1942  06BC  18 02       	jr	l_player_check_stairs_00113
1943  06BE              l_player_check_stairs_00112:
1944  06BE  0E 01       	ld	c,0x01
1945  06C0              l_player_check_stairs_00113:
1946  06C0  3A 07 00    	ld	a,(_col + 0x0007)
1947  06C3  80          	add	a, b
1948  06C4  57          	ld	d, a
1949  06C5  3A 07 00    	ld	a,(_lin + 0x0007)
1950  06C8  C6 0F       	add	a,0x0f
1951  06CA  47          	ld	b, a
1952  06CB  C5          	push	bc
1953  06CC  58          	ld	e,b
1954  06CD  D5          	push	de
1955  06CE  CD 00 00    	call	_spr_calc_index
1956  06D1  F1          	pop	af
1957  06D2  C1          	pop	bc
1958  06D3  7D          	ld	a,l
1959  06D4  32 00 00    	ld	(_sprite_curr_index),a
1960  06D7  5F          	ld	e,a
1961  06D8  16 00       	ld	d,0x00
1962  06DA  21 00 00    	ld	hl,_scr_map
1963  06DD  19          	add	hl,de
1964  06DE  7E          	ld	a,(hl)
1965  06DF  47          	ld	b,a
1966  06E0  D6 44       	sub	a,0x44
1967  06E2  38 05       	jr	C,l_player_check_stairs_00114
1968  06E4  3E 47       	ld	a,0x47
1969  06E6  90          	sub	a, b
1970  06E7  30 04       	jr	NC,l_player_check_stairs_00115
1971  06E9              l_player_check_stairs_00114:
1972  06E9  06 00       	ld	b,0x00
1973  06EB  18 02       	jr	l_player_check_stairs_00116
1974  06ED              l_player_check_stairs_00115:
1975  06ED  06 01       	ld	b,0x01
1976  06EF              l_player_check_stairs_00116:
1977  06EF  79          	ld	a, c
1978  06F0  B7          	or	a,a
1979  06F1  20 03       	jr	NZ,l_player_check_stairs_00105
1980  06F3  B0          	or	a,b
1981  06F4  28 13       	jr	Z,l_player_check_stairs_00106
1982  06F6              l_player_check_stairs_00105:
1983  06F6  21 00 00    	ld	hl,_player_onstair
1984  06F9  7E          	ld	a, (hl)
1985  06FA  B7          	or	a, a
1986  06FB  20 1D       	jr	NZ,l_player_check_stairs_00109
1987  06FD  36 01       	ld	(hl),0x01
1988  06FF  21 72 00    	ld	hl,0x0072
1989  0702  E5          	push	hl
1990  0703  CD 36 07    	call	_player_tile
1991  0706  F1          	pop	af
1992  0707  18 11       	jr	l_player_check_stairs_00109
1993  0709              l_player_check_stairs_00106:
1994  0709  21 00 00    	ld	hl,_player_onstair
1995  070C  7E          	ld	a, (hl)
1996  070D  B7          	or	a, a
1997  070E  28 0A       	jr	Z,l_player_check_stairs_00109
1998  0710  36 00       	ld	(hl),0x00
1999  0712  21 60 08    	ld	hl,0x0860
2000  0715  E5          	push	hl
2001  0716  CD 36 07    	call	_player_tile
2002  0719  F1          	pop	af
2003  071A              l_player_check_stairs_00109:
2004  071A  33          	inc	sp
2005  071B  DD E1       	pop	ix
2006  071D  C9          	ret
2007  071E              	SECTION code_compiler
2008  071E              ;	---------------------------------
2009  071E              ; Function player_anim_stairs
2010  071E              ; ---------------------------------
2011  071E              _player_anim_stairs:
2012  071E  21 00 00    	ld	hl,_player_anim_stair
2013  0721  34          	inc	(hl)
2014  0722  3E 01       	ld	a,0x01
2015  0724  96          	sub	a, (hl)
2016  0725  30 02       	jr	NC,l_player_anim_stairs_00102
2017  0727  36 00       	ld	(hl),0x00
2018  0729              l_player_anim_stairs_00102:
2019  0729  3A 07 00    	ld	a,(_tile + 0x0007)
2020  072C  21 00 00    	ld	hl,_player_anim_stair
2021  072F  86          	add	a, (hl)
2022  0730  C6 04       	add	a,0x04
2023  0732  32 00 00    	ld	(_s_tile1),a
2024  0735  C9          	ret
2025  0736              	SECTION code_compiler
2026  0736              ;	---------------------------------
2027  0736              ; Function player_tile
2028  0736              ; ---------------------------------
2029  0736              _player_tile:
2030  0736  CD 00 00    	call	___sdcc_enter_ix
2031  0739  21 05 00    	ld	hl,0x0005
2032  073C  39          	add	hl, sp
2033  073D  EB          	ex	de,hl
2034  073E  21 04 00    	ld	hl,0x0004
2035  0741  39          	add	hl, sp
2036  0742  4D          	ld	c, l
2037  0743  44          	ld	b, h
2038  0744  D5          	push	de
2039  0745  21 00 00    	ld	hl,_sprite
2040  0748  E5          	push	hl
2041  0749  C5          	push	bc
2042  074A  CD 00 00    	call	_spr_tile_dir
2043  074D  F1          	pop	af
2044  074E  F1          	pop	af
2045  074F  F1          	pop	af
2046  0750  7D          	ld	a,l
2047  0751  32 07 00    	ld	((_tile + 0x0007)),a
2048  0754  DD E1       	pop	ix
2049  0756  C9          	ret
2050  0757              	SECTION code_compiler
2051  0757              ;	---------------------------------
2052  0757              ; Function player_check_map
2053  0757              ; ---------------------------------
2054  0757              _player_check_map:
2055  0757  21 07 00    	ld	hl,+(_col + 0x0007)
2056  075A  56          	ld	d, (hl)
2057  075B  21 07 00    	ld	hl,+(_lin + 0x0007)
2058  075E  5E          	ld	e, (hl)
2059  075F  D5          	push	de
2060  0760  CD 00 00    	call	_spr_calc_index
2061  0763  F1          	pop	af
2062  0764  7D          	ld	a,l
2063  0765  32 00 00    	ld	(_sprite_curr_index),a
2064  0768  CD B1 07    	call	_player_pick_item
2065  076B  21 07 00    	ld	hl,+(_col + 0x0007)
2066  076E  46          	ld	b, (hl)
2067  076F  3A 07 00    	ld	a,(_lin + 0x0007)
2068  0772  E6 0F       	and	a,0x0f
2069  0774  4F          	ld	c, a
2070  0775  CB 40       	bit	0, b
2071  0777  20 10       	jr	NZ,l_player_check_map_00108
2072  0779  79          	ld	a, c
2073  077A  B7          	or	a, a
2074  077B  28 33       	jr	Z,l_player_check_map_00110
2075  077D  21 00 00    	ld	hl,_sprite_curr_index
2076  0780  7E          	ld	a, (hl)
2077  0781  C6 10       	add	a,0x10
2078  0783  77          	ld	(hl), a
2079  0784  CD B1 07    	call	_player_pick_item
2080  0787  18 27       	jr	l_player_check_map_00110
2081  0789              l_player_check_map_00108:
2082  0789  21 00 00    	ld	hl,_sprite_curr_index
2083  078C  46          	ld	b, (hl)
2084  078D  04          	inc	b
2085  078E  79          	ld	a, c
2086  078F  B7          	or	a, a
2087  0790  20 06       	jr	NZ,l_player_check_map_00105
2088  0792  70          	ld	(hl), b
2089  0793  CD B1 07    	call	_player_pick_item
2090  0796  18 18       	jr	l_player_check_map_00110
2091  0798              l_player_check_map_00105:
2092  0798  21 00 00    	ld	hl,_sprite_curr_index
2093  079B  70          	ld	(hl), b
2094  079C  CD B1 07    	call	_player_pick_item
2095  079F  21 00 00    	ld	hl,_sprite_curr_index
2096  07A2  7E          	ld	a, (hl)
2097  07A3  C6 0F       	add	a,0x0f
2098  07A5  77          	ld	(hl), a
2099  07A6  CD B1 07    	call	_player_pick_item
2100  07A9  21 00 00    	ld	hl,_sprite_curr_index
2101  07AC  34          	inc	(hl)
2102  07AD  CD B1 07    	call	_player_pick_item
2103  07B0              l_player_check_map_00110:
2104  07B0  C9          	ret
2105  07B1              	SECTION code_compiler
2106  07B1              ;	---------------------------------
2107  07B1              ; Function player_pick_item
2108  07B1              ; ---------------------------------
2109  07B1              _player_pick_item:
2110  07B1  CD 00 00    	call	___sdcc_enter_ix
2111  07B4  F5          	push	af
2112  07B5  3B          	dec	sp
2113  07B6  2A 00 00    	ld	hl,(_sprite_curr_index)
2114  07B9  26 00       	ld	h,0x00
2115  07BB  01 00 00    	ld	bc,_scr_map
2116  07BE  09          	add	hl,bc
2117  07BF  7E          	ld	a,(hl)
2118  07C0  4D          	ld	c,l
2119  07C1  44          	ld	b,h
2120  07C2  21 00 00    	ld	hl,_sprite_curr_index
2121  07C5  DD 77 FD    	ld	(ix-3),a
2122  07C8  D6 24       	sub	a,0x24
2123  07CA  3E 00       	ld	a,0x00
2124  07CC  17          	rla
2125  07CD  DD 77 FF    	ld	(ix-1),a
2126  07D0  CB 47       	bit	0,a
2127  07D2  C2 5E 09    	jp	NZ, l_player_pick_item_00131
2128  07D5  3E 2F       	ld	a,0x2f
2129  07D7  DD 96 FD    	sub	a,(ix-3)
2130  07DA  3E 00       	ld	a,0x00
2131  07DC  17          	rla
2132  07DD  DD 77 FE    	ld	(ix-2),a
2133  07E0  CB 47       	bit	0,a
2134  07E2  C2 5E 09    	jp	NZ, l_player_pick_item_00131
2135  07E5  5E          	ld	e, (hl)
2136  07E6  16 00       	ld	d,0x00
2137  07E8  C5          	push	bc
2138  07E9  EB          	ex	de,hl
2139  07EA  CD 00 00    	call	_game_match_back
2140  07ED  C1          	pop	bc
2141  07EE  7D          	ld	a,l
2142  07EF  02          	ld	(bc), a
2143  07F0  2A 00 00    	ld	hl,(_sprite_curr_index)
2144  07F3  26 00       	ld	h,0x00
2145  07F5  CD 00 00    	call	_game_obj_set
2146  07F8  3A 00 00    	ld	a,(_sprite_curr_index)
2147  07FB  07          	rlca
2148  07FC  07          	rlca
2149  07FD  07          	rlca
2150  07FE  07          	rlca
2151  07FF  E6 0F       	and	a,0x0f
2152  0801  07          	rlca
2153  0802  07          	rlca
2154  0803  07          	rlca
2155  0804  07          	rlca
2156  0805  E6 F0       	and	a,0xf0
2157  0807  32 00 00    	ld	(_s_lin1),a
2158  080A  3A 00 00    	ld	a,(_sprite_curr_index)
2159  080D  E6 0F       	and	a,0x0f
2160  080F  87          	add	a, a
2161  0810  32 00 00    	ld	(_s_col1),a
2162  0813  21 00 00    	ld	hl,0x0000
2163  0816  E5          	push	hl
2164  0817  21 84 03    	ld	hl,0x0384
2165  081A  E5          	push	hl
2166  081B  F5          	push	af
2167  081C  33          	inc	sp
2168  081D  3A 00 00    	ld	a,(_s_lin1)
2169  0820  F5          	push	af
2170  0821  33          	inc	sp
2171  0822  CD 00 00    	call	_spr_add_anim
2172  0825  F1          	pop	af
2173  0826  F1          	pop	af
2174  0827  F1          	pop	af
2175  0828  DD CB FF 46 	bit	0,(ix-1)
2176  082C  C2 5E 09    	jp	NZ, l_player_pick_item_00131
2177  082F  DD CB FE 46 	bit	0,(ix-2)
2178  0833  C2 5E 09    	jp	NZ, l_player_pick_item_00131
2179  0836  DD 7E FD    	ld	a,(ix-3)
2180  0839  C6 DC       	add	a,0xdc
2181  083B  4F          	ld	c, a
2182  083C  06 00       	ld	b,0x00
2183  083E  21 45 08    	ld	hl,l_player_pick_item_00177
2184  0841  09          	add	hl, bc
2185  0842  09          	add	hl, bc
2186  0843  09          	add	hl, bc
2187  0844  E9          	jp	(hl)
2188  0845              l_player_pick_item_00177:
2189  0845  C3 69 08    	jp	l_player_pick_item_00101
2190  0848  C3 77 08    	jp	l_player_pick_item_00102
2191  084B  C3 85 08    	jp	l_player_pick_item_00103
2192  084E  C3 93 08    	jp	l_player_pick_item_00104
2193  0851  C3 A1 08    	jp	l_player_pick_item_00105
2194  0854  C3 CE 08    	jp	l_player_pick_item_00109
2195  0857  C3 E8 08    	jp	l_player_pick_item_00112
2196  085A  C3 00 09    	jp	l_player_pick_item_00115
2197  085D  C3 18 09    	jp	l_player_pick_item_00118
2198  0860  C3 30 09    	jp	l_player_pick_item_00121
2199  0863  C3 48 09    	jp	l_player_pick_item_00124
2200  0866  C3 C2 08    	jp	l_player_pick_item_00108
2201  0869              l_player_pick_item_00101:
2202  0869  CD 00 00    	call	_audio_efecto
2203  086C  21 00 00    	ld	hl,_player_keys
2204  086F  36 01       	ld	(hl),0x01
2205  0871  CD 00 00    	call	_game_update_stats
2206  0874  C3 5E 09    	jp	l_player_pick_item_00131
2207  0877              l_player_pick_item_00102:
2208  0877  CD 00 00    	call	_audio_efecto
2209  087A  21 01 00    	ld	hl, +(_player_keys + 0x0001)
2210  087D  36 01       	ld	(hl),0x01
2211  087F  CD 00 00    	call	_game_update_stats
2212  0882  C3 5E 09    	jp	l_player_pick_item_00131
2213  0885              l_player_pick_item_00103:
2214  0885  CD 00 00    	call	_audio_efecto
2215  0888  21 02 00    	ld	hl, +(_player_keys + 0x0002)
2216  088B  36 01       	ld	(hl),0x01
2217  088D  CD 00 00    	call	_game_update_stats
2218  0890  C3 5E 09    	jp	l_player_pick_item_00131
2219  0893              l_player_pick_item_00104:
2220  0893  CD 00 00    	call	_audio_efecto
2221  0896  21 03 00    	ld	hl, +(_player_keys + 0x0003)
2222  0899  36 01       	ld	(hl),0x01
2223  089B  CD 00 00    	call	_game_update_stats
2224  089E  C3 5E 09    	jp	l_player_pick_item_00131
2225  08A1              l_player_pick_item_00105:
2226  08A1  CD 00 00    	call	_audio_coin
2227  08A4  21 01 00    	ld	hl,0x0001
2228  08A7  CD 41 0C    	call	_player_score_add
2229  08AA  21 00 00    	ld	hl,_player_coins
2230  08AD  7E          	ld	a,(hl)
2231  08AE  3C          	inc	a
2232  08AF  77          	ld	(hl),a
2233  08B0  D6 64       	sub	a,0x64
2234  08B2  20 08       	jr	NZ,l_player_pick_item_00107
2235  08B4  CD BD 05    	call	_player_1up
2236  08B7  21 00 00    	ld	hl,_player_coins
2237  08BA  36 00       	ld	(hl),0x00
2238  08BC              l_player_pick_item_00107:
2239  08BC  CD 00 00    	call	_game_update_stats
2240  08BF  C3 5E 09    	jp	l_player_pick_item_00131
2241  08C2              l_player_pick_item_00108:
2242  08C2  CD 00 00    	call	_audio_magic1
2243  08C5  21 0A 00    	ld	hl,0x000a
2244  08C8  CD 41 0C    	call	_player_score_add
2245  08CB  C3 5E 09    	jp	l_player_pick_item_00131
2246  08CE              l_player_pick_item_00109:
2247  08CE  CD 00 00    	call	_audio_efecto
2248  08D1  21 00 00    	ld	hl,_player_str
2249  08D4  34          	inc	(hl)
2250  08D5  21 00 00    	ld	hl,_player_max_vita
2251  08D8  7E          	ld	a, (hl)
2252  08D9  D6 C8       	sub	a,0xc8
2253  08DB  D2 5E 09    	jp	NC, l_player_pick_item_00131
2254  08DE  7E          	ld	a, (hl)
2255  08DF  C6 0A       	add	a,0x0a
2256  08E1  77          	ld	(hl), a
2257  08E2  CD 00 00    	call	_game_update_stats
2258  08E5  C3 5E 09    	jp	l_player_pick_item_00131
2259  08E8              l_player_pick_item_00112:
2260  08E8  CD 00 00    	call	_audio_efecto
2261  08EB  21 00 00    	ld	hl,_player_str
2262  08EE  34          	inc	(hl)
2263  08EF  21 00 00    	ld	hl,_player_max_vita
2264  08F2  7E          	ld	a, (hl)
2265  08F3  D6 C8       	sub	a,0xc8
2266  08F5  30 67       	jr	NC,l_player_pick_item_00131
2267  08F7  7E          	ld	a, (hl)
2268  08F8  C6 0A       	add	a,0x0a
2269  08FA  77          	ld	(hl), a
2270  08FB  CD 00 00    	call	_game_update_stats
2271  08FE  18 5E       	jr	l_player_pick_item_00131
2272  0900              l_player_pick_item_00115:
2273  0900  CD 00 00    	call	_audio_efecto
2274  0903  21 00 00    	ld	hl,_player_str
2275  0906  34          	inc	(hl)
2276  0907  21 00 00    	ld	hl,_player_max_vita
2277  090A  7E          	ld	a, (hl)
2278  090B  D6 C8       	sub	a,0xc8
2279  090D  30 4F       	jr	NC,l_player_pick_item_00131
2280  090F  7E          	ld	a, (hl)
2281  0910  C6 0A       	add	a,0x0a
2282  0912  77          	ld	(hl), a
2283  0913  CD 00 00    	call	_game_update_stats
2284  0916  18 46       	jr	l_player_pick_item_00131
2285  0918              l_player_pick_item_00118:
2286  0918  CD 00 00    	call	_audio_efecto
2287  091B  21 00 00    	ld	hl,_player_int
2288  091E  34          	inc	(hl)
2289  091F  21 00 00    	ld	hl,_player_max_mana
2290  0922  7E          	ld	a, (hl)
2291  0923  D6 C8       	sub	a,0xc8
2292  0925  30 37       	jr	NC,l_player_pick_item_00131
2293  0927  7E          	ld	a, (hl)
2294  0928  C6 0A       	add	a,0x0a
2295  092A  77          	ld	(hl), a
2296  092B  CD 00 00    	call	_game_update_stats
2297  092E  18 2E       	jr	l_player_pick_item_00131
2298  0930              l_player_pick_item_00121:
2299  0930  CD 00 00    	call	_audio_efecto
2300  0933  21 00 00    	ld	hl,_player_int
2301  0936  34          	inc	(hl)
2302  0937  21 00 00    	ld	hl,_player_max_mana
2303  093A  7E          	ld	a, (hl)
2304  093B  D6 C8       	sub	a,0xc8
2305  093D  30 1F       	jr	NC,l_player_pick_item_00131
2306  093F  7E          	ld	a, (hl)
2307  0940  C6 0A       	add	a,0x0a
2308  0942  77          	ld	(hl), a
2309  0943  CD 00 00    	call	_game_update_stats
2310  0946  18 16       	jr	l_player_pick_item_00131
2311  0948              l_player_pick_item_00124:
2312  0948  CD 00 00    	call	_audio_efecto
2313  094B  21 00 00    	ld	hl,_player_int
2314  094E  34          	inc	(hl)
2315  094F  21 00 00    	ld	hl,_player_max_mana
2316  0952  7E          	ld	a, (hl)
2317  0953  D6 C8       	sub	a,0xc8
2318  0955  30 07       	jr	NC,l_player_pick_item_00131
2319  0957  7E          	ld	a, (hl)
2320  0958  C6 0A       	add	a,0x0a
2321  095A  77          	ld	(hl), a
2322  095B  CD 00 00    	call	_game_update_stats
2323  095E              l_player_pick_item_00131:
2324  095E  DD F9       	ld	sp, ix
2325  0960  DD E1       	pop	ix
2326  0962  C9          	ret
2327  0963              	SECTION code_compiler
2328  0963              ;	---------------------------------
2329  0963              ; Function player_hit_platform
2330  0963              ; ---------------------------------
2331  0963              _player_hit_platform:
2332  0963  CD 00 00    	call	___sdcc_enter_ix
2333  0966  3B          	dec	sp
2334  0967  3A 00 00    	ld	a,(_player_hit_lin)
2335  096A  B7          	or	a, a
2336  096B  C2 0C 0C    	jp	NZ, l_player_hit_platform_00148
2337  096E  21 07 00    	ld	hl,+(_lin + 0x0007)
2338  0971  4E          	ld	c, (hl)
2339  0972  3E 10       	ld	a,0x10
2340  0974  91          	sub	a, c
2341  0975  D2 0C 0C    	jp	NC, l_player_hit_platform_00148
2342  0978  2A 00 00    	ld	hl,(_index1)
2343  097B  01 00 00    	ld	bc,_scr_map
2344  097E  09          	add	hl,bc
2345  097F  7E          	ld	a,(hl)
2346  0980  FE 45       	cp	a,0x45
2347  0982  DA 0C 0C    	jp	C,l_player_hit_platform_00148
2348  0985  D6 4D       	sub	a,0x4d
2349  0987  20 42       	jr	NZ,l_player_hit_platform_00102
2350  0989  E5          	push	hl
2351  098A  2A 00 00    	ld	hl,(_index1)
2352  098D  CD 00 00    	call	_game_match_back
2353  0990  C1          	pop	bc
2354  0991  7D          	ld	a,l
2355  0992  02          	ld	(bc), a
2356  0993  2A 00 00    	ld	hl,(_index1)
2357  0996  CD 00 00    	call	_game_obj_set
2358  0999  CD 00 00    	call	_audio_explosion
2359  099C  21 00 00    	ld	hl,_index1
2360  099F  7E          	ld	a, (hl)
2361  09A0  E6 0F       	and	a,0x0f
2362  09A2  87          	add	a, a
2363  09A3  57          	ld	d, a
2364  09A4  4E          	ld	c, (hl)
2365  09A5  23          	inc	hl
2366  09A6  5E          	ld	e, (hl)
2367  09A7  06 04       	ld	b,0x04
2368  09A9  79          	ld	a,c
2369  09AA              l_player_hit_platform_00261:
2370  09AA  CB 3B       	srl	e
2371  09AC  1F          	rra
2372  09AD  10 FB       	djnz	l_player_hit_platform_00261
2373  09AF  07          	rlca
2374  09B0  07          	rlca
2375  09B1  07          	rlca
2376  09B2  07          	rlca
2377  09B3  E6 F0       	and	a,0xf0
2378  09B5  47          	ld	b, a
2379  09B6  21 00 00    	ld	hl,0x0000
2380  09B9  E5          	push	hl
2381  09BA  21 87 03    	ld	hl,0x0387
2382  09BD  E5          	push	hl
2383  09BE  58          	ld	e,b
2384  09BF  D5          	push	de
2385  09C0  CD 00 00    	call	_spr_add_anim
2386  09C3  F1          	pop	af
2387  09C4  F1          	pop	af
2388  09C5  F1          	pop	af
2389  09C6  2E 01       	ld	l,0x01
2390  09C8  C3 0E 0C    	jp	l_player_hit_platform_00151
2391  09CB              l_player_hit_platform_00102:
2392  09CB  2A 00 00    	ld	hl,(_curr_time)
2393  09CE  22 0E 00    	ld	(_spr_timer + 0x000e),hl
2394  09D1  3A 07 00    	ld	a,(_lin + 0x0007)
2395  09D4  06 00       	ld	b,0x00
2396  09D6  C6 F8       	add	a,0xf8
2397  09D8  4F          	ld	c, a
2398  09D9  78          	ld	a, b
2399  09DA  CE FF       	adc	a,0xff
2400  09DC  5F          	ld	e, a
2401  09DD  06 04       	ld	b,0x04
2402  09DF              l_player_hit_platform_00262:
2403  09DF  CB 2B       	sra	e
2404  09E1  CB 19       	rr	c
2405  09E3  10 FA       	djnz	l_player_hit_platform_00262
2406  09E5  79          	ld	a, c
2407  09E6  07          	rlca
2408  09E7  07          	rlca
2409  09E8  07          	rlca
2410  09E9  07          	rlca
2411  09EA  E6 F0       	and	a,0xf0
2412  09EC  C6 08       	add	a,0x08
2413  09EE  32 00 00    	ld	(_player_hit_lin),a
2414  09F1  21 07 00    	ld	hl,+(_col + 0x0007)
2415  09F4  4E          	ld	c, (hl)
2416  09F5  CB 41       	bit	0, c
2417  09F7  20 06       	jr	NZ,l_player_hit_platform_00113
2418  09F9  21 00 00    	ld	hl,_player_hit_col
2419  09FC  71          	ld	(hl), c
2420  09FD  18 2D       	jr	l_player_hit_platform_00114
2421  09FF              l_player_hit_platform_00113:
2422  09FF  21 07 00    	ld	hl,+(_state + 0x0007)
2423  0A02  5E          	ld	e, (hl)
2424  0A03  41          	ld	b, c
2425  0A04  04          	inc	b
2426  0A05  0D          	dec	c
2427  0A06  CB 5B       	bit	3, e
2428  0A08  28 12       	jr	Z,l_player_hit_platform_00110
2429  0A0A  3A 00 00    	ld	a,(_g_player_hit_right)
2430  0A0D  B7          	or	a, a
2431  0A0E  28 06       	jr	Z,l_player_hit_platform_00104
2432  0A10  21 00 00    	ld	hl,_player_hit_col
2433  0A13  70          	ld	(hl), b
2434  0A14  18 16       	jr	l_player_hit_platform_00114
2435  0A16              l_player_hit_platform_00104:
2436  0A16  21 00 00    	ld	hl,_player_hit_col
2437  0A19  71          	ld	(hl), c
2438  0A1A  18 10       	jr	l_player_hit_platform_00114
2439  0A1C              l_player_hit_platform_00110:
2440  0A1C  3A 00 00    	ld	a,(_g_player_hit_left)
2441  0A1F  B7          	or	a, a
2442  0A20  28 06       	jr	Z,l_player_hit_platform_00107
2443  0A22  21 00 00    	ld	hl,_player_hit_col
2444  0A25  71          	ld	(hl), c
2445  0A26  18 04       	jr	l_player_hit_platform_00114
2446  0A28              l_player_hit_platform_00107:
2447  0A28  21 00 00    	ld	hl,_player_hit_col
2448  0A2B  70          	ld	(hl), b
2449  0A2C              l_player_hit_platform_00114:
2450  0A2C  01 00 00    	ld	bc,_scr_map
2451  0A2F  2A 00 00    	ld	hl,(_index1)
2452  0A32  09          	add	hl,bc
2453  0A33  7E          	ld	a,(hl)
2454  0A34  FE 5A       	cp	a,0x5a
2455  0A36  28 05       	jr	Z,l_player_hit_platform_00141
2456  0A38  D6 5D       	sub	a,0x5d
2457  0A3A  C2 DB 0B    	jp	NZ,l_player_hit_platform_00142
2458  0A3D              l_player_hit_platform_00141:
2459  0A3D  3A 00 00    	ld	a,(_game_boss)
2460  0A40  B7          	or	a, a
2461  0A41  28 0B       	jr	Z,l_player_hit_platform_00177
2462  0A43  3A 00 00    	ld	a,(_game_mush_count)
2463  0A46  B7          	or	a, a
2464  0A47  28 05       	jr	Z,l_player_hit_platform_00177
2465  0A49  2E 00       	ld	l,0x00
2466  0A4B  C3 0E 0C    	jp	l_player_hit_platform_00151
2467  0A4E              l_player_hit_platform_00177:
2468  0A4E  DD 36 FF 00 	ld	(ix-1),0x00
2469  0A52              l_player_hit_platform_00138:
2470  0A52  DD 7E FF    	ld	a,(ix-1)
2471  0A55  D6 07       	sub	a,0x07
2472  0A57  D2 DE 0B    	jp	NC, l_player_hit_platform_00143
2473  0A5A  3E 00       	ld	a, +((_mush_index) & 0xFF)
2474  0A5C  DD 86 FF    	add	a,(ix-1)
2475  0A5F  6F          	ld	l, a
2476  0A60  3E 00       	ld	a, +((_mush_index) / 256)
2477  0A62  CE 00       	adc	a,0x00
2478  0A64  67          	ld	h, a
2479  0A65  4E          	ld	c, (hl)
2480  0A66  06 00       	ld	b,0x00
2481  0A68  2A 00 00    	ld	hl,(_index1)
2482  0A6B  AF          	xor	a,a
2483  0A6C  ED 42       	sbc	hl,bc
2484  0A6E  C2 D5 0B    	jp	NZ,l_player_hit_platform_00137
2485  0A71  3A 07 00    	ld	a,(_lin + 0x0007)
2486  0A74  07          	rlca
2487  0A75  07          	rlca
2488  0A76  07          	rlca
2489  0A77  07          	rlca
2490  0A78  E6 0F       	and	a,0x0f
2491  0A7A  07          	rlca
2492  0A7B  07          	rlca
2493  0A7C  07          	rlca
2494  0A7D  07          	rlca
2495  0A7E  E6 F0       	and	a,0xf0
2496  0A80  C6 E0       	add	a,0xe0
2497  0A82  32 00 00    	ld	(_s_lin1),a
2498  0A85  3A 00 00    	ld	a,(_player_hit_col)
2499  0A88  CB 3F       	srl	a
2500  0A8A  87          	add	a, a
2501  0A8B  32 00 00    	ld	(_s_col1),a
2502  0A8E  0E 00       	ld	c,0x00
2503  0A90              l_player_hit_platform_00120:
2504  0A90  79          	ld	a, c
2505  0A91  D6 07       	sub	a,0x07
2506  0A93  30 18       	jr	NC,l_player_hit_platform_00122
2507  0A95  06 00       	ld	b,0x00
2508  0A97  21 00 00    	ld	hl,_mush_index
2509  0A9A  09          	add	hl, bc
2510  0A9B  46          	ld	b, (hl)
2511  0A9C  1E 00       	ld	e,0x00
2512  0A9E  21 00 00    	ld	hl,_index1
2513  0AA1  7E          	ld	a, (hl)
2514  0AA2  90          	sub	a, b
2515  0AA3  20 05       	jr	NZ,l_player_hit_platform_00271
2516  0AA5  23          	inc	hl
2517  0AA6  7E          	ld	a, (hl)
2518  0AA7  93          	sub	a, e
2519  0AA8  28 03       	jr	Z,l_player_hit_platform_00122
2520  0AAA              l_player_hit_platform_00271:
2521  0AAA  0C          	inc	c
2522  0AAB  18 E3       	jr	l_player_hit_platform_00120
2523  0AAD              l_player_hit_platform_00122:
2524  0AAD  06 00       	ld	b,0x00
2525  0AAF  21 00 00    	ld	hl,_mush_class
2526  0AB2  09          	add	hl, bc
2527  0AB3  7E          	ld	a, (hl)
2528  0AB4  FE 79       	cp	a,0x79
2529  0AB6  28 18       	jr	Z,l_player_hit_platform_00123
2530  0AB8  FE 7A       	cp	a,0x7a
2531  0ABA  28 2F       	jr	Z,l_player_hit_platform_00124
2532  0ABC  FE 7B       	cp	a,0x7b
2533  0ABE  28 5F       	jr	Z,l_player_hit_platform_00126
2534  0AC0  FE 7C       	cp	a,0x7c
2535  0AC2  28 41       	jr	Z,l_player_hit_platform_00125
2536  0AC4  FE 7D       	cp	a,0x7d
2537  0AC6  CA 53 0B    	jp	Z,l_player_hit_platform_00128
2538  0AC9  D6 7E       	sub	a,0x7e
2539  0ACB  28 6C       	jr	Z,l_player_hit_platform_00127
2540  0ACD  C3 6B 0B    	jp	l_player_hit_platform_00129
2541  0AD0              l_player_hit_platform_00123:
2542  0AD0  2E 02       	ld	l,0x02
2543  0AD2  CD 00 00    	call	_zx_border_fastcall
2544  0AD5  3A 00 00    	ld	a,(_s_col1)
2545  0AD8  21 06 FF    	ld	hl,0xff06
2546  0ADB  E5          	push	hl
2547  0ADC  F5          	push	af
2548  0ADD  33          	inc	sp
2549  0ADE  3A 00 00    	ld	a,(_s_lin1)
2550  0AE1  F5          	push	af
2551  0AE2  33          	inc	sp
2552  0AE3  CD 00 00    	call	_enemy_init
2553  0AE6  F1          	pop	af
2554  0AE7  F1          	pop	af
2555  0AE8  C3 6B 0B    	jp	l_player_hit_platform_00129
2556  0AEB              l_player_hit_platform_00124:
2557  0AEB  2E 02       	ld	l,0x02
2558  0AED  CD 00 00    	call	_zx_border_fastcall
2559  0AF0  3A 00 00    	ld	a,(_s_col1)
2560  0AF3  21 06 01    	ld	hl,0x0106
2561  0AF6  E5          	push	hl
2562  0AF7  F5          	push	af
2563  0AF8  33          	inc	sp
2564  0AF9  3A 00 00    	ld	a,(_s_lin1)
2565  0AFC  F5          	push	af
2566  0AFD  33          	inc	sp
2567  0AFE  CD 00 00    	call	_enemy_init
2568  0B01  F1          	pop	af
2569  0B02  F1          	pop	af
2570  0B03  18 66       	jr	l_player_hit_platform_00129
2571  0B05              l_player_hit_platform_00125:
2572  0B05  2E 01       	ld	l,0x01
2573  0B07  CD 00 00    	call	_zx_border_fastcall
2574  0B0A  3A 00 00    	ld	a,(_s_col1)
2575  0B0D  21 07 01    	ld	hl,0x0107
2576  0B10  E5          	push	hl
2577  0B11  F5          	push	af
2578  0B12  33          	inc	sp
2579  0B13  3A 00 00    	ld	a,(_s_lin1)
2580  0B16  F5          	push	af
2581  0B17  33          	inc	sp
2582  0B18  CD 00 00    	call	_enemy_init
2583  0B1B  F1          	pop	af
2584  0B1C  F1          	pop	af
2585  0B1D  18 4C       	jr	l_player_hit_platform_00129
2586  0B1F              l_player_hit_platform_00126:
2587  0B1F  2E 01       	ld	l,0x01
2588  0B21  CD 00 00    	call	_zx_border_fastcall
2589  0B24  3A 00 00    	ld	a,(_s_col1)
2590  0B27  21 07 FF    	ld	hl,0xff07
2591  0B2A  E5          	push	hl
2592  0B2B  F5          	push	af
2593  0B2C  33          	inc	sp
2594  0B2D  3A 00 00    	ld	a,(_s_lin1)
2595  0B30  F5          	push	af
2596  0B31  33          	inc	sp
2597  0B32  CD 00 00    	call	_enemy_init
2598  0B35  F1          	pop	af
2599  0B36  F1          	pop	af
2600  0B37  18 32       	jr	l_player_hit_platform_00129
2601  0B39              l_player_hit_platform_00127:
2602  0B39  2E 04       	ld	l,0x04
2603  0B3B  CD 00 00    	call	_zx_border_fastcall
2604  0B3E  3A 00 00    	ld	a,(_s_col1)
2605  0B41  21 08 01    	ld	hl,0x0108
2606  0B44  E5          	push	hl
2607  0B45  F5          	push	af
2608  0B46  33          	inc	sp
2609  0B47  3A 00 00    	ld	a,(_s_lin1)
2610  0B4A  F5          	push	af
2611  0B4B  33          	inc	sp
2612  0B4C  CD 00 00    	call	_enemy_init
2613  0B4F  F1          	pop	af
2614  0B50  F1          	pop	af
2615  0B51  18 18       	jr	l_player_hit_platform_00129
2616  0B53              l_player_hit_platform_00128:
2617  0B53  2E 04       	ld	l,0x04
2618  0B55  CD 00 00    	call	_zx_border_fastcall
2619  0B58  3A 00 00    	ld	a,(_s_col1)
2620  0B5B  21 08 FF    	ld	hl,0xff08
2621  0B5E  E5          	push	hl
2622  0B5F  F5          	push	af
2623  0B60  33          	inc	sp
2624  0B61  3A 00 00    	ld	a,(_s_lin1)
2625  0B64  F5          	push	af
2626  0B65  33          	inc	sp
2627  0B66  CD 00 00    	call	_enemy_init
2628  0B69  F1          	pop	af
2629  0B6A  F1          	pop	af
2630  0B6B              l_player_hit_platform_00129:
2631  0B6B  CD 00 00    	call	_audio_mushroom
2632  0B6E  21 00 00    	ld	hl,_game_mush_count
2633  0B71  34          	inc	(hl)
2634  0B72  3A 00 00    	ld	a,(_game_boss)
2635  0B75  B7          	or	a, a
2636  0B76  20 5D       	jr	NZ,l_player_hit_platform_00137
2637  0B78  3A 00 00    	ld	a,(_index1)
2638  0B7B  C6 F0       	add	a,0xf0
2639  0B7D  32 00 00    	ld	(_index0),a
2640  0B80  3A 01 00    	ld	a,(_index1 + 1)
2641  0B83  CE FF       	adc	a,0xff
2642  0B85  21 01 00    	ld	hl,_index0 + 1
2643  0B88  77          	ld	(hl), a
2644  0B89  3E 00       	ld	a, +((_scr_map) & 0xFF)
2645  0B8B  2B          	dec	hl
2646  0B8C  86          	add	a, (hl)
2647  0B8D  4F          	ld	c, a
2648  0B8E  3E 00       	ld	a, +((_scr_map) / 256)
2649  0B90  23          	inc	hl
2650  0B91  8E          	adc	a, (hl)
2651  0B92  47          	ld	b, a
2652  0B93  C5          	push	bc
2653  0B94  2B          	dec	hl
2654  0B95  7E          	ld	a, (hl)
2655  0B96  23          	inc	hl
2656  0B97  66          	ld	h, (hl)
2657  0B98  6F          	ld	l, a
2658  0B99  CD 00 00    	call	_game_match_back
2659  0B9C  C1          	pop	bc
2660  0B9D  7D          	ld	a,l
2661  0B9E  02          	ld	(bc), a
2662  0B9F  01 00 00    	ld	bc,_scr_map
2663  0BA2  2A 00 00    	ld	hl,(_index1)
2664  0BA5  09          	add	hl,bc
2665  0BA6  7E          	ld	a,(hl)
2666  0BA7  FE 5A       	cp	a,0x5a
2667  0BA9  4D          	ld	c,l
2668  0BAA  44          	ld	b,h
2669  0BAB  28 04       	jr	Z,l_player_hit_platform_00130
2670  0BAD  D6 5D       	sub	a,0x5d
2671  0BAF  20 05       	jr	NZ,l_player_hit_platform_00131
2672  0BB1              l_player_hit_platform_00130:
2673  0BB1  3E 4F       	ld	a,0x4f
2674  0BB3  02          	ld	(bc), a
2675  0BB4  18 03       	jr	l_player_hit_platform_00132
2676  0BB6              l_player_hit_platform_00131:
2677  0BB6  3E 54       	ld	a,0x54
2678  0BB8  02          	ld	(bc), a
2679  0BB9              l_player_hit_platform_00132:
2680  0BB9  2A 00 00    	ld	hl,(_index1)
2681  0BBC  01 F0 FF    	ld	bc,0xfff0
2682  0BBF  09          	add	hl,bc
2683  0BC0  CD 00 00    	call	_game_obj_set
2684  0BC3  3A 00 00    	ld	a,(_s_lin1)
2685  0BC6  C6 10       	add	a,0x10
2686  0BC8  4F          	ld	c, a
2687  0BC9  3A 00 00    	ld	a, (_s_col1)
2688  0BCC  47          	ld	b,a
2689  0BCD  C5          	push	bc
2690  0BCE  3E 4F       	ld	a,0x4f
2691  0BD0  F5          	push	af
2692  0BD1  33          	inc	sp
2693  0BD2  CD 00 00    	call	_NIRVANAP_drawT_callee
2694  0BD5              l_player_hit_platform_00137:
2695  0BD5  DD 34 FF    	inc	(ix-1)
2696  0BD8  C3 52 0A    	jp	l_player_hit_platform_00138
2697  0BDB              l_player_hit_platform_00142:
2698  0BDB  CD 00 00    	call	_audio_golpe
2699  0BDE              l_player_hit_platform_00143:
2700  0BDE  2E 01       	ld	l,0x01
2701  0BE0  CD 00 00    	call	_spr_brick_anim
2702  0BE3  2A FF FF    	ld	hl,(_player_hit_col - 1)
2703  0BE6  3A 00 00    	ld	a,(_player_hit_lin)
2704  0BE9  6F          	ld	l,a
2705  0BEA  E5          	push	hl
2706  0BEB  CD 00 00    	call	_spr_calc_index
2707  0BEE  F1          	pop	af
2708  0BEF  22 00 00    	ld	(_index1),hl
2709  0BF2  3E 10       	ld	a,0x10
2710  0BF4  21 00 00    	ld	hl,_index1
2711  0BF7  BE          	cp	a, (hl)
2712  0BF8  3E 00       	ld	a,0x00
2713  0BFA  23          	inc	hl
2714  0BFB  9E          	sbc	a, (hl)
2715  0BFC  30 0A       	jr	NC,l_player_hit_platform_00146
2716  0BFE  2B          	dec	hl
2717  0BFF  7E          	ld	a, (hl)
2718  0C00  C6 F0       	add	a,0xf0
2719  0C02  32 00 00    	ld	(_sprite_curr_index),a
2720  0C05  CD B1 07    	call	_player_pick_item
2721  0C08              l_player_hit_platform_00146:
2722  0C08  2E 01       	ld	l,0x01
2723  0C0A  18 02       	jr	l_player_hit_platform_00151
2724  0C0C              l_player_hit_platform_00148:
2725  0C0C  2E 00       	ld	l,0x00
2726  0C0E              l_player_hit_platform_00151:
2727  0C0E  33          	inc	sp
2728  0C0F  DD E1       	pop	ix
2729  0C11  C9          	ret
2730  0C12              	SECTION code_compiler
2731  0C12              ;	---------------------------------
2732  0C12              ; Function player_hit_platform_clear
2733  0C12              ; ---------------------------------
2734  0C12              _player_hit_platform_clear:
2735  0C12  3E 04       	ld	a,0x04
2736  0C14  F5          	push	af
2737  0C15  33          	inc	sp
2738  0C16  21 0E 00    	ld	hl, +(_spr_timer + 0x000e)
2739  0C19  E5          	push	hl
2740  0C1A  CD 00 00    	call	_game_check_time
2741  0C1D  F1          	pop	af
2742  0C1E  33          	inc	sp
2743  0C1F  7D          	ld	a, l
2744  0C20  B7          	or	a, a
2745  0C21  C8          	ret	Z
2746  0C22  2A FF FF    	ld	hl,(_player_hit_col - 1)
2747  0C25  3A 00 00    	ld	a,(_player_hit_lin)
2748  0C28  6F          	ld	l,a
2749  0C29  E5          	push	hl
2750  0C2A  CD 00 00    	call	_spr_calc_index
2751  0C2D  F1          	pop	af
2752  0C2E  22 00 00    	ld	(_index1),hl
2753  0C31  2E 00       	ld	l,0x00
2754  0C33  CD 00 00    	call	_spr_brick_anim
2755  0C36  21 00 00    	ld	hl,_player_hit_lin
2756  0C39  36 00       	ld	(hl),0x00
2757  0C3B  21 00 00    	ld	hl,_player_hit_col
2758  0C3E  36 00       	ld	(hl),0x00
2759  0C40  C9          	ret
2760  0C41              	SECTION code_compiler
2761  0C41              ;	---------------------------------
2762  0C41              ; Function player_score_add
2763  0C41              ; ---------------------------------
2764  0C41              _player_score_add:
2765  0C41  ED 4B 00 00 	ld	bc,(_player_score)
2766  0C45  09          	add	hl,bc
2767  0C46  22 00 00    	ld	(_player_score),hl
2768  0C49  21 00 00    	ld	hl,_player_lvl
2769  0C4C  7E          	ld	a, (hl)
2770  0C4D  D6 0A       	sub	a,0x0a
2771  0C4F  30 45       	jr	NC,l_player_score_add_00104
2772  0C51  01 00 00    	ld	bc,_player_lvl_table+0
2773  0C54  6E          	ld	l,(hl)
2774  0C55  26 00       	ld	h,0x00
2775  0C57  29          	add	hl, hl
2776  0C58  09          	add	hl, bc
2777  0C59  4E          	ld	c, (hl)
2778  0C5A  23          	inc	hl
2779  0C5B  46          	ld	b, (hl)
2780  0C5C  21 00 00    	ld	hl,_player_score
2781  0C5F  7E          	ld	a, (hl)
2782  0C60  91          	sub	a, c
2783  0C61  23          	inc	hl
2784  0C62  7E          	ld	a, (hl)
2785  0C63  98          	sbc	a, b
2786  0C64  38 30       	jr	C,l_player_score_add_00104
2787  0C66  21 00 00    	ld	hl,_player_lvl
2788  0C69  34          	inc	(hl)
2789  0C6A  CD 00 00    	call	_game_update_stats
2790  0C6D  CD 00 00    	call	_spr_flatten
2791  0C70  CD 00 00    	call	_audio_levelup
2792  0C73  21 16 00    	ld	hl,___str_2
2793  0C76  E5          	push	hl
2794  0C77  21 0C 0C    	ld	hl,0x0c0c
2795  0C7A  E5          	push	hl
2796  0C7B  CD 00 00    	call	_zx_print_str
2797  0C7E  AF          	xor	a, a
2798  0C7F  F5          	push	af
2799  0C80  33          	inc	sp
2800  0C81  21 3C 00    	ld	hl,0x003c
2801  0C84  E5          	push	hl
2802  0C85  21 0C 15    	ld	hl,0x150c
2803  0C88  E5          	push	hl
2804  0C89  3E 0C       	ld	a,0x0c
2805  0C8B  F5          	push	af
2806  0C8C  33          	inc	sp
2807  0C8D  CD 00 00    	call	_game_colour_message
2808  0C90  F1          	pop	af
2809  0C91  F1          	pop	af
2810  0C92  F1          	pop	af
2811  0C93  CD 00 00    	call	_spr_unflattenP1
2812  0C96              l_player_score_add_00104:
2813  0C96  3A 00 00    	ld	a,(_game_score_top)
2814  0C99  21 00 00    	ld	hl,_player_score
2815  0C9C  96          	sub	a, (hl)
2816  0C9D  3A 01 00    	ld	a,(_game_score_top + 1)
2817  0CA0  23          	inc	hl
2818  0CA1  9E          	sbc	a, (hl)
2819  0CA2  30 06       	jr	NC,l_player_score_add_00106
2820  0CA4  2A 00 00    	ld	hl,(_player_score)
2821  0CA7  22 00 00    	ld	(_game_score_top),hl
2822  0CAA              l_player_score_add_00106:
2823  0CAA  CD 00 00    	call	_game_print_score
2824  0CAD  C9          	ret
2825  0CAE              	SECTION rodata_compiler
2826  0016              ___str_2:
2827  0016  4C 45 56 45 4C 20 55 50 21 
                        	DEFM "LEVEL UP!"
2828  001F  00          	DEFB 0x00
2829  0020              	SECTION code_compiler
2830  0CAE              ;	---------------------------------
2831  0CAE              ; Function player_check_floor
2832  0CAE              ; ---------------------------------
2833  0CAE              _player_check_floor:
2834  0CAE  CD 00 00    	call	___sdcc_enter_ix
2835  0CB1  F5          	push	af
2836  0CB2  F5          	push	af
2837  0CB3  F5          	push	af
2838  0CB4  21 07 00    	ld	hl,+(_col + 0x0007)
2839  0CB7  56          	ld	d, (hl)
2840  0CB8  3A 07 00    	ld	a,(_lin + 0x0007)
2841  0CBB  C6 10       	add	a,0x10
2842  0CBD  5F          	ld	e, a
2843  0CBE  D5          	push	de
2844  0CBF  CD 00 00    	call	_spr_calc_index
2845  0CC2  F1          	pop	af
2846  0CC3  DD 75 FC    	ld	(ix-4),l
2847  0CC6  DD 74 FD    	ld	(ix-3),h
2848  0CC9  11 00 00    	ld	de,_scr_map+0
2849  0CCC  7B          	ld	a, e
2850  0CCD  DD 86 FC    	add	a,(ix-4)
2851  0CD0  4F          	ld	c, a
2852  0CD1  7A          	ld	a, d
2853  0CD2  DD 8E FD    	adc	a,(ix-3)
2854  0CD5  47          	ld	b, a
2855  0CD6  0A          	ld	a, (bc)
2856  0CD7  DD 77 FB    	ld	(ix-5),a
2857  0CDA  DD 6E FC    	ld	l,(ix-4)
2858  0CDD  DD 66 FD    	ld	h,(ix-3)
2859  0CE0  23          	inc	hl
2860  0CE1  19          	add	hl,de
2861  0CE2  DD 75 FE    	ld	(ix-2),l
2862  0CE5  DD 74 FF    	ld	(ix-1),h
2863  0CE8  3A 00 00    	ld	a,(_s_lin0)
2864  0CEB  D6 90       	sub	a,0x90
2865  0CED  20 26       	jr	NZ,l_player_check_floor_00108
2866  0CEF  3A 00 00    	ld	a,(_map_heigth)
2867  0CF2  C5          	push	bc
2868  0CF3  F5          	push	af
2869  0CF4  33          	inc	sp
2870  0CF5  3A 00 00    	ld	a,(_scr_curr)
2871  0CF8  F5          	push	af
2872  0CF9  33          	inc	sp
2873  0CFA  CD 00 00    	call	__divuchar_callee
2874  0CFD  C1          	pop	bc
2875  0CFE  7D          	ld	a,l
2876  0CFF  3C          	inc	a
2877  0D00  32 00 00    	ld	(_tmp1),a
2878  0D03  21 00 00    	ld	hl,_map_heigth
2879  0D06  96          	sub	a, (hl)
2880  0D07  30 06       	jr	NC,l_player_check_floor_00102
2881  0D09  DD 36 FB 00 	ld	(ix-5),0x00
2882  0D0D  18 1C       	jr	l_player_check_floor_00109
2883  0D0F              l_player_check_floor_00102:
2884  0D0F  DD 36 FB 48 	ld	(ix-5),0x48
2885  0D13  18 16       	jr	l_player_check_floor_00109
2886  0D15              l_player_check_floor_00108:
2887  0D15  3A 07 00    	ld	a,(_col + 0x0007)
2888  0D18  0F          	rrca
2889  0D19  38 06       	jr	C,l_player_check_floor_00105
2890  0D1B  DD 36 FA 00 	ld	(ix-6),0x00
2891  0D1F  18 0A       	jr	l_player_check_floor_00109
2892  0D21              l_player_check_floor_00105:
2893  0D21  DD 6E FE    	ld	l,(ix-2)
2894  0D24  DD 66 FF    	ld	h,(ix-1)
2895  0D27  7E          	ld	a, (hl)
2896  0D28  DD 77 FA    	ld	(ix-6),a
2897  0D2B              l_player_check_floor_00109:
2898  0D2B  DD 7E FB    	ld	a,(ix-5)
2899  0D2E  D6 3A       	sub	a,0x3a
2900  0D30  38 07       	jr	C,l_player_check_floor_00132
2901  0D32  DD 7E FB    	ld	a,(ix-5)
2902  0D35  D6 60       	sub	a,0x60
2903  0D37  38 32       	jr	C,l_player_check_floor_00128
2904  0D39              l_player_check_floor_00132:
2905  0D39  DD 7E FA    	ld	a,(ix-6)
2906  0D3C  D6 3A       	sub	a,0x3a
2907  0D3E  38 07       	jr	C,l_player_check_floor_00127
2908  0D40  DD 7E FA    	ld	a,(ix-6)
2909  0D43  D6 60       	sub	a,0x60
2910  0D45  38 24       	jr	C,l_player_check_floor_00128
2911  0D47              l_player_check_floor_00127:
2912  0D47  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
2913  0D4A  36 02       	ld	(hl),0x02
2914  0D4C  21 00 00    	ld	hl,_s_state
2915  0D4F  CB CE       	set	1, (hl)
2916  0D51  2E 00       	ld	l,0x00
2917  0D53  CD 8E 06    	call	_player_check_stairs
2918  0D56  3A 00 00    	ld	a,(_player_onstair)
2919  0D59  B7          	or	a, a
2920  0D5A  C2 F7 0D    	jp	NZ, l_player_check_floor_00133
2921  0D5D  3A 00 00    	ld	a,(_s_lin0)
2922  0D60  D6 90       	sub	a,0x90
2923  0D62  C2 F7 0D    	jp	NZ,l_player_check_floor_00133
2924  0D65  CD 00 00    	call	_spr_page_down
2925  0D68  C3 F7 0D    	jp	l_player_check_floor_00133
2926  0D6B              l_player_check_floor_00128:
2927  0D6B  C5          	push	bc
2928  0D6C  3E 10       	ld	a,0x10
2929  0D6E  F5          	push	af
2930  0D6F  33          	inc	sp
2931  0D70  21 00 00    	ld	hl,_player_brick_time
2932  0D73  E5          	push	hl
2933  0D74  CD 00 00    	call	_game_check_time
2934  0D77  F1          	pop	af
2935  0D78  33          	inc	sp
2936  0D79  C1          	pop	bc
2937  0D7A  7D          	ld	a,l
2938  0D7B  B7          	or	a, a
2939  0D7C  CA F7 0D    	jp	Z, l_player_check_floor_00133
2940  0D7F  2A 00 00    	ld	hl,(_curr_time)
2941  0D82  22 00 00    	ld	(_player_brick_time),hl
2942  0D85  DD 7E FB    	ld	a,(ix-5)
2943  0D88  D6 40       	sub	a,0x40
2944  0D8A  20 12       	jr	NZ,l_player_check_floor_00114
2945  0D8C  C5          	push	bc
2946  0D8D  DD 6E FC    	ld	l,(ix-4)
2947  0D90  DD 66 FD    	ld	h,(ix-3)
2948  0D93  CD 00 00    	call	_game_match_back
2949  0D96  C1          	pop	bc
2950  0D97  7D          	ld	a,l
2951  0D98  02          	ld	(bc), a
2952  0D99  C5          	push	bc
2953  0D9A  CD FC 0D    	call	_player_gasta_brick
2954  0D9D  C1          	pop	bc
2955  0D9E              l_player_check_floor_00114:
2956  0D9E  DD 7E FB    	ld	a,(ix-5)
2957  0DA1  D6 3F       	sub	a,0x3f
2958  0DA3  20 08       	jr	NZ,l_player_check_floor_00116
2959  0DA5  3E 40       	ld	a,0x40
2960  0DA7  02          	ld	(bc), a
2961  0DA8  C5          	push	bc
2962  0DA9  CD FC 0D    	call	_player_gasta_brick
2963  0DAC  C1          	pop	bc
2964  0DAD              l_player_check_floor_00116:
2965  0DAD  DD 7E FB    	ld	a,(ix-5)
2966  0DB0  D6 3E       	sub	a,0x3e
2967  0DB2  20 06       	jr	NZ,l_player_check_floor_00118
2968  0DB4  3E 3F       	ld	a,0x3f
2969  0DB6  02          	ld	(bc), a
2970  0DB7  CD FC 0D    	call	_player_gasta_brick
2971  0DBA              l_player_check_floor_00118:
2972  0DBA  DD 7E FA    	ld	a,(ix-6)
2973  0DBD  D6 40       	sub	a,0x40
2974  0DBF  20 12       	jr	NZ,l_player_check_floor_00120
2975  0DC1  C1          	pop	bc
2976  0DC2  E1          	pop	hl
2977  0DC3  E5          	push	hl
2978  0DC4  C5          	push	bc
2979  0DC5  CD 00 00    	call	_game_match_back
2980  0DC8  4D          	ld	c, l
2981  0DC9  DD 6E FE    	ld	l,(ix-2)
2982  0DCC  DD 66 FF    	ld	h,(ix-1)
2983  0DCF  71          	ld	(hl), c
2984  0DD0  CD FC 0D    	call	_player_gasta_brick
2985  0DD3              l_player_check_floor_00120:
2986  0DD3  DD 7E FA    	ld	a,(ix-6)
2987  0DD6  D6 3F       	sub	a,0x3f
2988  0DD8  20 0B       	jr	NZ,l_player_check_floor_00122
2989  0DDA  DD 6E FE    	ld	l,(ix-2)
2990  0DDD  DD 66 FF    	ld	h,(ix-1)
2991  0DE0  36 40       	ld	(hl),0x40
2992  0DE2  CD FC 0D    	call	_player_gasta_brick
2993  0DE5              l_player_check_floor_00122:
2994  0DE5  DD 7E FA    	ld	a,(ix-6)
2995  0DE8  D6 3E       	sub	a,0x3e
2996  0DEA  20 0B       	jr	NZ,l_player_check_floor_00133
2997  0DEC  DD 6E FE    	ld	l,(ix-2)
2998  0DEF  DD 66 FF    	ld	h,(ix-1)
2999  0DF2  36 3F       	ld	(hl),0x3f
3000  0DF4  CD FC 0D    	call	_player_gasta_brick
3001  0DF7              l_player_check_floor_00133:
3002  0DF7  DD F9       	ld	sp, ix
3003  0DF9  DD E1       	pop	ix
3004  0DFB  C9          	ret
3005  0DFC              	SECTION code_compiler
3006  0DFC              ;	---------------------------------
3007  0DFC              ; Function player_gasta_brick
3008  0DFC              ; ---------------------------------
3009  0DFC              _player_gasta_brick:
3010  0DFC  3A 00 00    	ld	a,(_s_lin0)
3011  0DFF  32 00 00    	ld	(_s_lin1),a
3012  0E02  3A 00 00    	ld	a,(_s_col0)
3013  0E05  32 00 00    	ld	(_s_col1),a
3014  0E08  3A 07 00    	ld	a,(_lin + 0x0007)
3015  0E0B  C6 10       	add	a,0x10
3016  0E0D  32 00 00    	ld	(_s_lin0),a
3017  0E10  3A 07 00    	ld	a,(_col + 0x0007)
3018  0E13  32 00 00    	ld	(_s_col0),a
3019  0E16  CD 00 00    	call	_spr_back_repaint
3020  0E19  3A 00 00    	ld	a,(_s_lin1)
3021  0E1C  32 00 00    	ld	(_s_lin0),a
3022  0E1F  3A 00 00    	ld	a,(_s_col1)
3023  0E22  32 00 00    	ld	(_s_col0),a
3024  0E25  C9          	ret
3025  0E26              	SECTION code_compiler
3026  0E26              ;	---------------------------------
3027  0E26              ; Function player_move_jump
3028  0E26              ; ---------------------------------
3029  0E26              _player_move_jump:
3030  0E26  21 00 00    	ld	hl,_game_gravity
3031  0E29  4E          	ld	c, (hl)
3032  0E2A  21 00 00    	ld	hl,_player_vel_y
3033  0E2D  7E          	ld	a, (hl)
3034  0E2E  81          	add	a, c
3035  0E2F  77          	ld	(hl), a
3036  0E30  3A 00 00    	ld	a,(_player_vel_inc)
3037  0E33  B7          	or	a, a
3038  0E34  28 27       	jr	Z,l_player_move_jump_00106
3039  0E36  3A 00 00    	ld	a,(_player_vel_y1)
3040  0E39  21 00 00    	ld	hl,_player_vel_y
3041  0E3C  96          	sub	a, (hl)
3042  0E3D  E2 42 0E    	jp	PO, l_player_move_jump_00243
3043  0E40  EE 80       	xor	a,0x80
3044  0E42              l_player_move_jump_00243:
3045  0E42  F2 5D 0E    	jp	P, l_player_move_jump_00106
3046  0E45  3A 00 00    	ld	a,(_player_vel_y)
3047  0E48  CB 7F       	bit	7, a
3048  0E4A  28 11       	jr	Z,l_player_move_jump_00106
3049  0E4C  CD EA 01    	call	_player_action_jump
3050  0E4F  7D          	ld	a, l
3051  0E50  B7          	or	a, a
3052  0E51  20 0A       	jr	NZ,l_player_move_jump_00106
3053  0E53  21 00 00    	ld	hl,_player_vel_y
3054  0E56  36 00       	ld	(hl),0x00
3055  0E58  21 00 00    	ld	hl,_player_vel_inc
3056  0E5B  36 00       	ld	(hl),0x00
3057  0E5D              l_player_move_jump_00106:
3058  0E5D  3E 78       	ld	a,0x78
3059  0E5F  21 00 00    	ld	hl,_player_vel_y
3060  0E62  96          	sub	a, (hl)
3061  0E63  E2 68 0E    	jp	PO, l_player_move_jump_00244
3062  0E66  EE 80       	xor	a,0x80
3063  0E68              l_player_move_jump_00244:
3064  0E68  F2 70 0E    	jp	P, l_player_move_jump_00108
3065  0E6B  21 00 00    	ld	hl,_player_vel_y
3066  0E6E  36 78       	ld	(hl),0x78
3067  0E70              l_player_move_jump_00108:
3068  0E70  21 00 00    	ld	hl,_player_vel_y
3069  0E73  7E          	ld	a, (hl)
3070  0E74  EE 80       	xor	a,0x80
3071  0E76  D6 08       	sub	a,0x08
3072  0E78  30 02       	jr	NC,l_player_move_jump_00110
3073  0E7A  36 88       	ld	(hl),0x88
3074  0E7C              l_player_move_jump_00110:
3075  0E7C  3A 00 00    	ld	a,(_player_vel_y)
3076  0E7F  4F          	ld	c,a
3077  0E80  17          	rla
3078  0E81  9F          	sbc	a, a
3079  0E82  47          	ld	b, a
3080  0E83  CB 41       	bit	0,c
3081  0E85  21 00 00    	ld	hl,_s_lin1
3082  0E88  71          	ld	(hl),c
3083  0E89  28 04       	jr	Z,l_player_move_jump_00112
3084  0E8B  21 00 00    	ld	hl,_s_lin1
3085  0E8E  35          	dec	(hl)
3086  0E8F              l_player_move_jump_00112:
3087  0E8F  3A 07 00    	ld	a,(_lin + 0x0007)
3088  0E92  21 00 00    	ld	hl,_s_lin1
3089  0E95  86          	add	a, (hl)
3090  0E96  77          	ld	(hl), a
3091  0E97  CB 78       	bit	7, b
3092  0E99  28 5C       	jr	Z,l_player_move_jump_00138
3093  0E9B  21 00 00    	ld	hl,_s_state
3094  0E9E  CD 00 00    	call	_spr_set_up
3095  0EA1  3E 90       	ld	a,0x90
3096  0EA3  21 00 00    	ld	hl,_s_lin1
3097  0EA6  96          	sub	a, (hl)
3098  0EA7  30 11       	jr	NC,l_player_move_jump_00117
3099  0EA9  CD 00 00    	call	_spr_page_up
3100  0EAC  7D          	ld	a, l
3101  0EAD  B7          	or	a, a
3102  0EAE  28 05       	jr	Z,l_player_move_jump_00114
3103  0EB0  2E 00       	ld	l,0x00
3104  0EB2  C3 B8 0F    	jp	l_player_move_jump_00149
3105  0EB5              l_player_move_jump_00114:
3106  0EB5  21 00 00    	ld	hl,_s_lin1
3107  0EB8  36 00       	ld	(hl),0x00
3108  0EBA              l_player_move_jump_00117:
3109  0EBA  21 07 00    	ld	hl,+(_col + 0x0007)
3110  0EBD  46          	ld	b, (hl)
3111  0EBE  C5          	push	bc
3112  0EBF  33          	inc	sp
3113  0EC0  3A 00 00    	ld	a,(_s_lin1)
3114  0EC3  F5          	push	af
3115  0EC4  33          	inc	sp
3116  0EC5  CD 00 00    	call	_game_check_map
3117  0EC8  F1          	pop	af
3118  0EC9  7C          	ld	a,h
3119  0ECA  B5          	or	a,l
3120  0ECB  28 21       	jr	Z,l_player_move_jump_00121
3121  0ECD  CD 63 09    	call	_player_hit_platform
3122  0ED0  7D          	ld	a, l
3123  0ED1  B7          	or	a, a
3124  0ED2  28 12       	jr	Z,l_player_move_jump_00119
3125  0ED4  3A 07 00    	ld	a,(_lin + 0x0007)
3126  0ED7  07          	rlca
3127  0ED8  07          	rlca
3128  0ED9  07          	rlca
3129  0EDA  07          	rlca
3130  0EDB  E6 0F       	and	a,0x0f
3131  0EDD  07          	rlca
3132  0EDE  07          	rlca
3133  0EDF  07          	rlca
3134  0EE0  07          	rlca
3135  0EE1  E6 F0       	and	a,0xf0
3136  0EE3  32 07 00    	ld	((_lin + 0x0007)),a
3137  0EE6              l_player_move_jump_00119:
3138  0EE6  21 00 00    	ld	hl,_player_vel_y
3139  0EE9  36 00       	ld	(hl),0x00
3140  0EEB  C3 76 0F    	jp	l_player_move_jump_00139
3141  0EEE              l_player_move_jump_00121:
3142  0EEE  3A 00 00    	ld	a,(_s_lin1)
3143  0EF1  32 07 00    	ld	((_lin + 0x0007)),a
3144  0EF4  C3 76 0F    	jp	l_player_move_jump_00139
3145  0EF7              l_player_move_jump_00138:
3146  0EF7  21 00 00    	ld	hl,_s_state
3147  0EFA  CD 00 00    	call	_spr_set_down
3148  0EFD  3E 90       	ld	a,0x90
3149  0EFF  21 00 00    	ld	hl,_s_lin1
3150  0F02  96          	sub	a, (hl)
3151  0F03  30 11       	jr	NC,l_player_move_jump_00127
3152  0F05  CD 00 00    	call	_spr_page_down
3153  0F08  7D          	ld	a, l
3154  0F09  B7          	or	a, a
3155  0F0A  28 05       	jr	Z,l_player_move_jump_00124
3156  0F0C  2E 00       	ld	l,0x00
3157  0F0E  C3 B8 0F    	jp	l_player_move_jump_00149
3158  0F11              l_player_move_jump_00124:
3159  0F11  21 00 00    	ld	hl,_s_lin1
3160  0F14  36 90       	ld	(hl),0x90
3161  0F16              l_player_move_jump_00127:
3162  0F16  21 07 00    	ld	hl,+(_col + 0x0007)
3163  0F19  56          	ld	d, (hl)
3164  0F1A  3A 00 00    	ld	a,(_s_lin1)
3165  0F1D  C6 10       	add	a,0x10
3166  0F1F  5F          	ld	e, a
3167  0F20  D5          	push	de
3168  0F21  CD 00 00    	call	_game_check_map
3169  0F24  F1          	pop	af
3170  0F25  7C          	ld	a,h
3171  0F26  B5          	or	a,l
3172  0F27  28 47       	jr	Z,l_player_move_jump_00135
3173  0F29  2E 00       	ld	l,0x00
3174  0F2B  CD 8E 06    	call	_player_check_stairs
3175  0F2E  3A 00 00    	ld	a,(_player_onstair)
3176  0F31  B7          	or	a, a
3177  0F32  20 05       	jr	NZ,l_player_move_jump_00129
3178  0F34  2E 01       	ld	l,0x01
3179  0F36  CD 8E 06    	call	_player_check_stairs
3180  0F39              l_player_move_jump_00129:
3181  0F39  3A 00 00    	ld	a,(_player_onstair)
3182  0F3C  B7          	or	a, a
3183  0F3D  20 12       	jr	NZ,l_player_move_jump_00131
3184  0F3F  3A 00 00    	ld	a,(_s_lin1)
3185  0F42  07          	rlca
3186  0F43  07          	rlca
3187  0F44  07          	rlca
3188  0F45  07          	rlca
3189  0F46  E6 0F       	and	a,0x0f
3190  0F48  07          	rlca
3191  0F49  07          	rlca
3192  0F4A  07          	rlca
3193  0F4B  07          	rlca
3194  0F4C  E6 F0       	and	a,0xf0
3195  0F4E  32 07 00    	ld	((_lin + 0x0007)),a
3196  0F51              l_player_move_jump_00131:
3197  0F51  21 00 00    	ld	hl,_player_vel_y
3198  0F54  36 00       	ld	(hl),0x00
3199  0F56  21 00 00    	ld	hl,_s_state
3200  0F59  7E          	ld	a,(hl)
3201  0F5A  E6 FC       	and	a,+(0xfd&0xfe)
3202  0F5C  77          	ld	(hl),a
3203  0F5D  3A 07 00    	ld	a,(_lin + 0x0007)
3204  0F60  D6 90       	sub	a,0x90
3205  0F62  38 03       	jr	C,l_player_move_jump_00133
3206  0F64  CD 00 00    	call	_spr_page_down
3207  0F67              l_player_move_jump_00133:
3208  0F67  21 07 00    	ld	hl, +(_colint + 0x0007)
3209  0F6A  36 00       	ld	(hl),0x00
3210  0F6C  2E 01       	ld	l,0x01
3211  0F6E  18 48       	jr	l_player_move_jump_00149
3212  0F70              l_player_move_jump_00135:
3213  0F70  3A 00 00    	ld	a,(_s_lin1)
3214  0F73  32 07 00    	ld	((_lin + 0x0007)),a
3215  0F76              l_player_move_jump_00139:
3216  0F76  21 00 00    	ld	hl,_s_state
3217  0F79  CB 5E       	bit	3, (hl)
3218  0F7B  20 21       	jr	NZ,l_player_move_jump_00145
3219  0F7D  21 00 00    	ld	hl,_s_state
3220  0F80  CB 56       	bit	2, (hl)
3221  0F82  20 1A       	jr	NZ,l_player_move_jump_00145
3222  0F84  21 00 00    	ld	hl,_dirs
3223  0F87  CB 56       	bit	2, (hl)
3224  0F89  28 06       	jr	Z,l_player_move_jump_00141
3225  0F8B  21 00 00    	ld	hl,_s_state
3226  0F8E  CD 00 00    	call	_spr_set_left
3227  0F91              l_player_move_jump_00141:
3228  0F91  21 00 00    	ld	hl,_dirs
3229  0F94  CB 5E       	bit	3, (hl)
3230  0F96  28 06       	jr	Z,l_player_move_jump_00145
3231  0F98  21 00 00    	ld	hl,_s_state
3232  0F9B  CD 00 00    	call	_spr_set_right
3233  0F9E              l_player_move_jump_00145:
3234  0F9E  21 00 00    	ld	hl,_player_jump_check
3235  0FA1  36 01       	ld	(hl),0x01
3236  0FA3  CD 00 00    	call	_spr_move_horizontal
3237  0FA6  7D          	ld	a, l
3238  0FA7  B7          	or	a, a
3239  0FA8  28 07       	jr	Z,l_player_move_jump_00148
3240  0FAA  21 00 00    	ld	hl,_s_state
3241  0FAD  7E          	ld	a,(hl)
3242  0FAE  E6 F3       	and	a,+(0xf7&0xfb)
3243  0FB0  77          	ld	(hl),a
3244  0FB1              l_player_move_jump_00148:
3245  0FB1  21 00 00    	ld	hl,_player_jump_check
3246  0FB4  36 00       	ld	(hl),0x00
3247  0FB6  2E 00       	ld	l,0x00
3248  0FB8              l_player_move_jump_00149:
3249  0FB8  C9          	ret
3250  0FB9              	SECTION code_compiler
3251  0FB9              ;	---------------------------------
3252  0FB9              ; Function player_open_door
3253  0FB9              ; ---------------------------------
3254  0FB9              _player_open_door:
3255  0FB9  CD 00 00    	call	___sdcc_enter_ix
3256  0FBC  0E 00       	ld	c,0x00
3257  0FBE  DD 7E 06    	ld	a,(ix+6)
3258  0FC1  D6 48       	sub	a,0x48
3259  0FC3  28 17       	jr	Z,l_player_open_door_00101
3260  0FC5  DD 7E 06    	ld	a,(ix+6)
3261  0FC8  D6 49       	sub	a,0x49
3262  0FCA  28 1F       	jr	Z,l_player_open_door_00104
3263  0FCC  DD 7E 06    	ld	a,(ix+6)
3264  0FCF  D6 4A       	sub	a,0x4a
3265  0FD1  28 27       	jr	Z,l_player_open_door_00107
3266  0FD3  DD 7E 06    	ld	a,(ix+6)
3267  0FD6  D6 4B       	sub	a,0x4b
3268  0FD8  28 2F       	jr	Z,l_player_open_door_00110
3269  0FDA  18 3A       	jr	l_player_open_door_00113
3270  0FDC              l_player_open_door_00101:
3271  0FDC  3A 00 00    	ld	a,(_player_keys)
3272  0FDF  B7          	or	a, a
3273  0FE0  28 34       	jr	Z,l_player_open_door_00113
3274  0FE2  2E 07       	ld	l,0x07
3275  0FE4  CD 00 00    	call	_zx_border_fastcall
3276  0FE7  0E 01       	ld	c,0x01
3277  0FE9  18 2B       	jr	l_player_open_door_00113
3278  0FEB              l_player_open_door_00104:
3279  0FEB  3A 01 00    	ld	a,(_player_keys + 0x0001)
3280  0FEE  B7          	or	a, a
3281  0FEF  28 25       	jr	Z,l_player_open_door_00113
3282  0FF1  2E 02       	ld	l,0x02
3283  0FF3  CD 00 00    	call	_zx_border_fastcall
3284  0FF6  0E 01       	ld	c,0x01
3285  0FF8  18 1C       	jr	l_player_open_door_00113
3286  0FFA              l_player_open_door_00107:
3287  0FFA  3A 02 00    	ld	a,(_player_keys + 0x0002)
3288  0FFD  B7          	or	a, a
3289  0FFE  28 16       	jr	Z,l_player_open_door_00113
3290  1000  2E 04       	ld	l,0x04
3291  1002  CD 00 00    	call	_zx_border_fastcall
3292  1005  0E 01       	ld	c,0x01
3293  1007  18 0D       	jr	l_player_open_door_00113
3294  1009              l_player_open_door_00110:
3295  1009  3A 03 00    	ld	a,(_player_keys + 0x0003)
3296  100C  B7          	or	a, a
3297  100D  28 07       	jr	Z,l_player_open_door_00113
3298  100F  2E 05       	ld	l,0x05
3299  1011  CD 00 00    	call	_zx_border_fastcall
3300  1014  0E 01       	ld	c,0x01
3301  1016              l_player_open_door_00113:
3302  1016  79          	ld	a, c
3303  1017  B7          	or	a, a
3304  1018  20 06       	jr	NZ,l_player_open_door_00114
3305  101A  3A 00 00    	ld	a,(_game_inmune)
3306  101D  B7          	or	a, a
3307  101E  28 23       	jr	Z,l_player_open_door_00115
3308  1020              l_player_open_door_00114:
3309  1020  CD 00 00    	call	_audio_puerta
3310  1023  3E 00       	ld	a, +((_scr_map) & 0xFF)
3311  1025  DD 86 04    	add	a,(ix+4)
3312  1028  4F          	ld	c, a
3313  1029  3E 00       	ld	a, +((_scr_map) / 256)
3314  102B  DD 8E 05    	adc	a,(ix+5)
3315  102E  47          	ld	b, a
3316  102F  AF          	xor	a, a
3317  1030  02          	ld	(bc), a
3318  1031  DD 6E 04    	ld	l,(ix+4)
3319  1034  DD 66 05    	ld	h,(ix+5)
3320  1037  CD 00 00    	call	_game_obj_set
3321  103A  21 04 00    	ld	hl,0x0004
3322  103D  39          	add	hl, sp
3323  103E  CD 00 00    	call	_spr_draw_index
3324  1041  18 03       	jr	l_player_open_door_00118
3325  1043              l_player_open_door_00115:
3326  1043  CD 00 00    	call	_audio_sin_mana
3327  1046              l_player_open_door_00118:
3328  1046  DD E1       	pop	ix
3329  1048  C9          	ret
3330  1049              	SECTION code_compiler
3331  1049              ;	---------------------------------
3332  1049              ; Function player_lost_life
3333  1049              ; ---------------------------------
3334  1049              _player_lost_life:
3335  1049  CD 00 00    	call	___sdcc_enter_ix
3336  104C  3B          	dec	sp
3337  104D  21 00 00    	ld	hl,_player_vita
3338  1050  36 00       	ld	(hl),0x00
3339  1052  CD 00 00    	call	_game_update_stats
3340  1055  3A 07 00    	ld	a,(_lin + 0x0007)
3341  1058  32 00 00    	ld	(_s_lin0),a
3342  105B  3A 07 00    	ld	a,(_col + 0x0007)
3343  105E  32 00 00    	ld	(_s_col0),a
3344  1061  CD 00 00    	call	_spr_init_effects
3345  1064  06 00       	ld	b,0x00
3346  1066              l_player_lost_life_00117:
3347  1066  C5          	push	bc
3348  1067  21 00 00    	ld	hl,0x0000
3349  106A  E5          	push	hl
3350  106B  AF          	xor	a, a
3351  106C  48          	ld	c,b
3352  106D  47          	ld	b,a
3353  106E  C5          	push	bc
3354  106F  CD 00 00    	call	_NIRVANAP_spriteT_callee
3355  1072  C1          	pop	bc
3356  1073  04          	inc	b
3357  1074  3E 07       	ld	a,0x07
3358  1076  90          	sub	a, b
3359  1077  30 ED       	jr	NC,l_player_lost_life_00117
3360  1079  CD 00 00    	call	_ay_reset
3361  107C  CD 00 00    	call	_audio_explosion
3362  107F  3A 00 00    	ld	a,(_s_lin0)
3363  1082  C6 F0       	add	a,0xf0
3364  1084  47          	ld	b, a
3365  1085  3A 00 00    	ld	a,(_s_col0)
3366  1088  21 00 00    	ld	hl,0x0000
3367  108B  E5          	push	hl
3368  108C  21 87 03    	ld	hl,0x0387
3369  108F  E5          	push	hl
3370  1090  48          	ld	c,b
3371  1091  47          	ld	b,a
3372  1092  C5          	push	bc
3373  1093  CD 00 00    	call	_spr_add_anim
3374  1096  F1          	pop	af
3375  1097  F1          	pop	af
3376  1098  F1          	pop	af
3377  1099  21 00 00    	ld	hl,_s_col0
3378  109C  46          	ld	b, (hl)
3379  109D  05          	dec	b
3380  109E  05          	dec	b
3381  109F  21 00 00    	ld	hl,0x0000
3382  10A2  E5          	push	hl
3383  10A3  21 87 03    	ld	hl,0x0387
3384  10A6  E5          	push	hl
3385  10A7  C5          	push	bc
3386  10A8  33          	inc	sp
3387  10A9  3A 00 00    	ld	a,(_s_lin0)
3388  10AC  F5          	push	af
3389  10AD  33          	inc	sp
3390  10AE  CD 00 00    	call	_spr_add_anim
3391  10B1  F1          	pop	af
3392  10B2  F1          	pop	af
3393  10B3  21 00 00    	ld	hl,0x0000
3394  10B6  E3          	ex	(sp),hl
3395  10B7  3A 00 00    	ld	a,(_s_col0)
3396  10BA  21 87 03    	ld	hl,0x0387
3397  10BD  E5          	push	hl
3398  10BE  F5          	push	af
3399  10BF  33          	inc	sp
3400  10C0  3A 00 00    	ld	a,(_s_lin0)
3401  10C3  F5          	push	af
3402  10C4  33          	inc	sp
3403  10C5  CD 00 00    	call	_spr_add_anim
3404  10C8  F1          	pop	af
3405  10C9  F1          	pop	af
3406  10CA  F1          	pop	af
3407  10CB  21 00 00    	ld	hl,_s_col0
3408  10CE  46          	ld	b, (hl)
3409  10CF  04          	inc	b
3410  10D0  04          	inc	b
3411  10D1  21 00 00    	ld	hl,0x0000
3412  10D4  E5          	push	hl
3413  10D5  21 87 03    	ld	hl,0x0387
3414  10D8  E5          	push	hl
3415  10D9  C5          	push	bc
3416  10DA  33          	inc	sp
3417  10DB  3A 00 00    	ld	a,(_s_lin0)
3418  10DE  F5          	push	af
3419  10DF  33          	inc	sp
3420  10E0  CD 00 00    	call	_spr_add_anim
3421  10E3  F1          	pop	af
3422  10E4  F1          	pop	af
3423  10E5  F1          	pop	af
3424  10E6  3A 00 00    	ld	a,(_s_lin0)
3425  10E9  C6 10       	add	a,0x10
3426  10EB  47          	ld	b, a
3427  10EC  3A 00 00    	ld	a,(_s_col0)
3428  10EF  21 00 00    	ld	hl,0x0000
3429  10F2  E5          	push	hl
3430  10F3  21 87 03    	ld	hl,0x0387
3431  10F6  E5          	push	hl
3432  10F7  48          	ld	c,b
3433  10F8  47          	ld	b,a
3434  10F9  C5          	push	bc
3435  10FA  CD 00 00    	call	_spr_add_anim
3436  10FD  F1          	pop	af
3437  10FE  F1          	pop	af
3438  10FF  F1          	pop	af
3439  1100  2E 00       	ld	l,0x00
3440  1102  CD 00 00    	call	_zx_border_fastcall
3441  1105  DD 36 FF 01 	ld	(ix-1),0x01
3442  1109  2A 00 00    	ld	hl,(_curr_time)
3443  110C  22 00 00    	ld	(_anim_time),hl
3444  110F              l_player_lost_life_00107:
3445  110F  DD 7E FF    	ld	a,(ix-1)
3446  1112  B7          	or	a, a
3447  1113  28 28       	jr	Z,l_player_lost_life_00109
3448  1115  3E 0C       	ld	a,0x0c
3449  1117  F5          	push	af
3450  1118  33          	inc	sp
3451  1119  21 00 00    	ld	hl,_anim_time
3452  111C  E5          	push	hl
3453  111D  CD 00 00    	call	_game_check_time
3454  1120  F1          	pop	af
3455  1121  33          	inc	sp
3456  1122  7D          	ld	a, l
3457  1123  B7          	or	a, a
3458  1124  28 E9       	jr	Z,l_player_lost_life_00107
3459  1126  2A 00 00    	ld	hl,(_curr_time)
3460  1129  22 00 00    	ld	(_anim_time),hl
3461  112C  3A 00 00    	ld	a,(_anim_count)
3462  112F  B7          	or	a,a
3463  1130  28 05       	jr	Z,l_player_lost_life_00103
3464  1132  CD 00 00    	call	_spr_play_anim
3465  1135  18 D8       	jr	l_player_lost_life_00107
3466  1137              l_player_lost_life_00103:
3467  1137  DD 36 FF 00 	ld	(ix-1),0x00
3468  113B  18 D2       	jr	l_player_lost_life_00107
3469  113D              l_player_lost_life_00109:
3470  113D  CD 00 00    	call	_audio_lotr_lose_a_life
3471  1140  3A 00 00    	ld	a,(_game_boss)
3472  1143  B7          	or	a, a
3473  1144  28 0F       	jr	Z,l_player_lost_life_00111
3474  1146  3A 00 00    	ld	a,(_boss_lin)
3475  1149  32 00 00    	ld	(_s_lin1),a
3476  114C  3A 00 00    	ld	a,(_boss_col)
3477  114F  32 00 00    	ld	(_s_col1),a
3478  1152  CD 00 00    	call	_boss_draw
3479  1155              l_player_lost_life_00111:
3480  1155  3A 00 00    	ld	a,(_game_inf_lives)
3481  1158  B7          	or	a, a
3482  1159  20 04       	jr	NZ,l_player_lost_life_00113
3483  115B  21 00 00    	ld	hl,_player_lives
3484  115E  35          	dec	(hl)
3485  115F              l_player_lost_life_00113:
3486  115F  21 00 00    	ld	hl,_player_mana
3487  1162  36 64       	ld	(hl),0x64
3488  1164  21 00 00    	ld	hl,_player_vita
3489  1167  36 64       	ld	(hl),0x64
3490  1169  3A 00 00    	ld	a,(_player_lives)
3491  116C  B7          	or	a, a
3492  116D  28 1D       	jr	Z,l_player_lost_life_00115
3493  116F  21 F4 01    	ld	hl,0x01f4
3494  1172  CD 00 00    	call	_z80_delay_ms_fastcall
3495  1175  3A 00 00    	ld	a,(_game_checkpoint_col)
3496  1178  32 00 00    	ld	(_player_col_scr),a
3497  117B  3A 00 00    	ld	a,(_game_checkpoint_lin)
3498  117E  32 00 00    	ld	(_player_lin_scr),a
3499  1181  3A 00 00    	ld	a,(_game_checkpoint_scr)
3500  1184  32 00 00    	ld	(_scr_curr),a
3501  1187  CD 00 00    	call	_game_round_init
3502  118A  18 0A       	jr	l_player_lost_life_00119
3503  118C              l_player_lost_life_00115:
3504  118C  21 00 00    	ld	hl,_player_lives
3505  118F  36 00       	ld	(hl),0x00
3506  1191  21 00 00    	ld	hl,_game_over
3507  1194  36 01       	ld	(hl),0x01
3508  1196              l_player_lost_life_00119:
3509  1196  33          	inc	sp
3510  1197  DD E1       	pop	ix
3511  1199  C9          	ret
3512  119A              	SECTION code_compiler
3513  119A              ;	---------------------------------
3514  119A              ; Function player_damage
3515  119A              ; ---------------------------------
3516  119A              _player_damage:
3517  119A  7D          	ld	a,l
3518  119B  4D          	ld	c,l
3519  119C  21 00 00    	ld	hl,_player_vita
3520  119F  96          	sub	a, (hl)
3521  11A0  30 1A       	jr	NC,l_player_damage_00104
3522  11A2  3A 00 00    	ld	a,(_game_inmune)
3523  11A5  B7          	or	a, a
3524  11A6  20 06       	jr	NZ,l_player_damage_00102
3525  11A8  21 00 00    	ld	hl,_player_vita
3526  11AB  7E          	ld	a, (hl)
3527  11AC  91          	sub	a, c
3528  11AD  77          	ld	(hl), a
3529  11AE              l_player_damage_00102:
3530  11AE  2A 00 00    	ld	hl,(_curr_time)
3531  11B1  22 00 00    	ld	(_player_hit_time),hl
3532  11B4  CD 00 00    	call	_audio_golpe
3533  11B7  CD 00 00    	call	_game_update_stats
3534  11BA  18 03       	jr	l_player_damage_00106
3535  11BC              l_player_damage_00104:
3536  11BC  CD 49 10    	call	_player_lost_life
3537  11BF              l_player_damage_00106:
3538  11BF  C9          	ret
3539  11C0              	SECTION IGNORE
3540  0000              
