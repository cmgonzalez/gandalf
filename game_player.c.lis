1     0000              MODULE game_player_c
2     0000              
3     0000              ;--------------------------------------------------------
4     0000              ; File Created by SDCC : free open source ANSI-C Compiler
5     0000              ; Version 3.6.5 #9958 (Mac OS X i386)
6     0000              ;--------------------------------------------------------
7     0000              ; Processed by Z88DK
8     0000              ;--------------------------------------------------------
9     0000              
10    0000              	EXTERN __divschar
11    0000              	EXTERN __divschar_callee
12    0000              	EXTERN __divsint
13    0000              	EXTERN __divsint_callee
14    0000              	EXTERN __divslong
15    0000              	EXTERN __divslong_callee
16    0000              	EXTERN __divslonglong
17    0000              	EXTERN __divslonglong_callee
18    0000              	EXTERN __divsuchar
19    0000              	EXTERN __divsuchar_callee
20    0000              	EXTERN __divuchar
21    0000              	EXTERN __divuchar_callee
22    0000              	EXTERN __divuint
23    0000              	EXTERN __divuint_callee
24    0000              	EXTERN __divulong
25    0000              	EXTERN __divulong_callee
26    0000              	EXTERN __divulonglong
27    0000              	EXTERN __divulonglong_callee
28    0000              	EXTERN __divuschar
29    0000              	EXTERN __divuschar_callee
30    0000              	EXTERN __modschar
31    0000              	EXTERN __modschar_callee
32    0000              	EXTERN __modsint
33    0000              	EXTERN __modsint_callee
34    0000              	EXTERN __modslong
35    0000              	EXTERN __modslong_callee
36    0000              	EXTERN __modslonglong
37    0000              	EXTERN __modslonglong_callee
38    0000              	EXTERN __modsuchar
39    0000              	EXTERN __modsuchar_callee
40    0000              	EXTERN __moduchar
41    0000              	EXTERN __moduchar_callee
42    0000              	EXTERN __moduint
43    0000              	EXTERN __moduint_callee
44    0000              	EXTERN __modulong
45    0000              	EXTERN __modulong_callee
46    0000              	EXTERN __modulonglong
47    0000              	EXTERN __modulonglong_callee
48    0000              	EXTERN __moduschar
49    0000              	EXTERN __moduschar_callee
50    0000              	EXTERN __mulint
51    0000              	EXTERN __mulint_callee
52    0000              	EXTERN __mullong
53    0000              	EXTERN __mullong_callee
54    0000              	EXTERN __mullonglong
55    0000              	EXTERN __mullonglong_callee
56    0000              	EXTERN __mulschar
57    0000              	EXTERN __mulschar_callee
58    0000              	EXTERN __mulsuchar
59    0000              	EXTERN __mulsuchar_callee
60    0000              	EXTERN __muluschar
61    0000              	EXTERN __muluschar_callee
62    0000              	EXTERN __rlslonglong
63    0000              	EXTERN __rlslonglong_callee
64    0000              	EXTERN __rlulonglong
65    0000              	EXTERN __rlulonglong_callee
66    0000              	EXTERN __rrslonglong
67    0000              	EXTERN __rrslonglong_callee
68    0000              	EXTERN __rrulonglong
69    0000              	EXTERN __rrulonglong_callee
70    0000              	EXTERN ___sdcc_call_hl
71    0000              	EXTERN ___sdcc_call_iy
72    0000              	EXTERN ___sdcc_enter_ix
73    0000              	EXTERN _banked_call
74    0000              	EXTERN _banked_ret
75    0000              	EXTERN ___fs2schar
76    0000              	EXTERN ___fs2schar_callee
77    0000              	EXTERN ___fs2sint
78    0000              	EXTERN ___fs2sint_callee
79    0000              	EXTERN ___fs2slong
80    0000              	EXTERN ___fs2slong_callee
81    0000              	EXTERN ___fs2slonglong
82    0000              	EXTERN ___fs2slonglong_callee
83    0000              	EXTERN ___fs2uchar
84    0000              	EXTERN ___fs2uchar_callee
85    0000              	EXTERN ___fs2uint
86    0000              	EXTERN ___fs2uint_callee
87    0000              	EXTERN ___fs2ulong
88    0000              	EXTERN ___fs2ulong_callee
89    0000              	EXTERN ___fs2ulonglong
90    0000              	EXTERN ___fs2ulonglong_callee
91    0000              	EXTERN ___fsadd
92    0000              	EXTERN ___fsadd_callee
93    0000              	EXTERN ___fsdiv
94    0000              	EXTERN ___fsdiv_callee
95    0000              	EXTERN ___fseq
96    0000              	EXTERN ___fseq_callee
97    0000              	EXTERN ___fsgt
98    0000              	EXTERN ___fsgt_callee
99    0000              	EXTERN ___fslt
100   0000              	EXTERN ___fslt_callee
101   0000              	EXTERN ___fsmul
102   0000              	EXTERN ___fsmul_callee
103   0000              	EXTERN ___fsneq
104   0000              	EXTERN ___fsneq_callee
105   0000              	EXTERN ___fssub
106   0000              	EXTERN ___fssub_callee
107   0000              	EXTERN ___schar2fs
108   0000              	EXTERN ___schar2fs_callee
109   0000              	EXTERN ___sint2fs
110   0000              	EXTERN ___sint2fs_callee
111   0000              	EXTERN ___slong2fs
112   0000              	EXTERN ___slong2fs_callee
113   0000              	EXTERN ___slonglong2fs
114   0000              	EXTERN ___slonglong2fs_callee
115   0000              	EXTERN ___uchar2fs
116   0000              	EXTERN ___uchar2fs_callee
117   0000              	EXTERN ___uint2fs
118   0000              	EXTERN ___uint2fs_callee
119   0000              	EXTERN ___ulong2fs
120   0000              	EXTERN ___ulong2fs_callee
121   0000              	EXTERN ___ulonglong2fs
122   0000              	EXTERN ___ulonglong2fs_callee
123   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
126   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
127   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
128   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
129   0000              	EXTERN ____sdcc_4_ldi_save_bc
130   0000              	EXTERN ____sdcc_4_push_hlix
131   0000              	EXTERN ____sdcc_4_push_mhl
132   0000              	EXTERN ____sdcc_lib_setmem_hl
133   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
134   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
135   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
136   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
137   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
138   0000              	EXTERN ____sdcc_ll_add_deix_hlix
139   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
140   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
141   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
142   0000              	EXTERN ____sdcc_ll_asr_hlix_a
143   0000              	EXTERN ____sdcc_ll_asr_mbc_a
144   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
145   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
146   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
147   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
148   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
149   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
150   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
151   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
152   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
153   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
155   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
156   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
157   0000              	EXTERN ____sdcc_ll_push_hlix
158   0000              	EXTERN ____sdcc_ll_push_mhl
159   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
160   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
161   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
162   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
163   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
164   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
165   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
166   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
167   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
168   0000              	EXTERN ____sdcc_load_debc_deix
169   0000              	EXTERN ____sdcc_load_dehl_deix
170   0000              	EXTERN ____sdcc_load_debc_mhl
171   0000              	EXTERN ____sdcc_load_hlde_mhl
172   0000              	EXTERN ____sdcc_store_dehl_bcix
173   0000              	EXTERN ____sdcc_store_debc_hlix
174   0000              	EXTERN ____sdcc_store_debc_mhl
175   0000              	EXTERN ____sdcc_cpu_pop_ei
176   0000              	EXTERN ____sdcc_cpu_pop_ei_jp
177   0000              	EXTERN ____sdcc_cpu_push_di
178   0000              	EXTERN ____sdcc_outi
179   0000              	EXTERN ____sdcc_outi_128
180   0000              	EXTERN ____sdcc_outi_256
181   0000              	EXTERN ____sdcc_ldi
182   0000              	EXTERN ____sdcc_ldi_128
183   0000              	EXTERN ____sdcc_ldi_256
184   0000              
185   0000              ;--------------------------------------------------------
186   0000              ; Public variables in this module
187   0000              ;--------------------------------------------------------
188   0000              	GLOBAL _player_check_map
189   0000              	GLOBAL _player_1up
190   0000              	GLOBAL _player_init
191   0000              	GLOBAL _player_turn
192   0000              	GLOBAL _player_move
193   0000              	GLOBAL _player_check_input
194   0000              	GLOBAL _player_move_input
195   0000              	GLOBAL _player_fix_walk_lin
196   0000              	GLOBAL _player_fire
197   0000              	GLOBAL _player_collision
198   0000              	GLOBAL _player_pick_mushroom
199   0000              	GLOBAL _player_check_stairs_vertical
200   0000              	GLOBAL _player_check_stairs
201   0000              	GLOBAL _player_tile
202   0000              	GLOBAL _player_pick_item
203   0000              	GLOBAL _player_hit_platform
204   0000              	GLOBAL _player_hit_platform_clear
205   0000              	GLOBAL _player_score_add
206   0000              	GLOBAL _player_check_floor
207   0000              	GLOBAL _player_gasta_brick
208   0000              	GLOBAL _player_move_jump
209   0000              	GLOBAL _player_open_door
210   0000              	GLOBAL _player_lost_life
211   0000              	GLOBAL _player_hit
212   0000              ;--------------------------------------------------------
213   0000              ; Externals used
214   0000              ;--------------------------------------------------------
215   0000              	GLOBAL _ulltoa_callee
216   0000              	GLOBAL _ulltoa
217   0000              	GLOBAL _strtoull_callee
218   0000              	GLOBAL _strtoull
219   0000              	GLOBAL _strtoll_callee
220   0000              	GLOBAL _strtoll
221   0000              	GLOBAL _lltoa_callee
222   0000              	GLOBAL _lltoa
223   0000              	GLOBAL _llabs_callee
224   0000              	GLOBAL _llabs
225   0000              	GLOBAL __lldivu__callee
226   0000              	GLOBAL __lldivu_
227   0000              	GLOBAL __lldiv__callee
228   0000              	GLOBAL __lldiv_
229   0000              	GLOBAL _atoll_callee
230   0000              	GLOBAL _atoll
231   0000              	GLOBAL _realloc_unlocked_callee
232   0000              	GLOBAL _realloc_unlocked
233   0000              	GLOBAL _malloc_unlocked_fastcall
234   0000              	GLOBAL _malloc_unlocked
235   0000              	GLOBAL _free_unlocked_fastcall
236   0000              	GLOBAL _free_unlocked
237   0000              	GLOBAL _calloc_unlocked_callee
238   0000              	GLOBAL _calloc_unlocked
239   0000              	GLOBAL _aligned_alloc_unlocked_callee
240   0000              	GLOBAL _aligned_alloc_unlocked
241   0000              	GLOBAL _realloc_callee
242   0000              	GLOBAL _realloc
243   0000              	GLOBAL _malloc_fastcall
244   0000              	GLOBAL _malloc
245   0000              	GLOBAL _free_fastcall
246   0000              	GLOBAL _free
247   0000              	GLOBAL _calloc_callee
248   0000              	GLOBAL _calloc
249   0000              	GLOBAL _aligned_alloc_callee
250   0000              	GLOBAL _aligned_alloc
251   0000              	GLOBAL _utoa_callee
252   0000              	GLOBAL _utoa
253   0000              	GLOBAL _ultoa_callee
254   0000              	GLOBAL _ultoa
255   0000              	GLOBAL _system_fastcall
256   0000              	GLOBAL _system
257   0000              	GLOBAL _strtoul_callee
258   0000              	GLOBAL _strtoul
259   0000              	GLOBAL _strtol_callee
260   0000              	GLOBAL _strtol
261   0000              	GLOBAL _strtof_callee
262   0000              	GLOBAL _strtof
263   0000              	GLOBAL _strtod_callee
264   0000              	GLOBAL _strtod
265   0000              	GLOBAL _srand_fastcall
266   0000              	GLOBAL _srand
267   0000              	GLOBAL _rand
268   0000              	GLOBAL _quick_exit_fastcall
269   0000              	GLOBAL _quick_exit
270   0000              	GLOBAL _qsort_callee
271   0000              	GLOBAL _qsort
272   0000              	GLOBAL _ltoa_callee
273   0000              	GLOBAL _ltoa
274   0000              	GLOBAL _labs_fastcall
275   0000              	GLOBAL _labs
276   0000              	GLOBAL _itoa_callee
277   0000              	GLOBAL _itoa
278   0000              	GLOBAL _ftoh_callee
279   0000              	GLOBAL _ftoh
280   0000              	GLOBAL _ftog_callee
281   0000              	GLOBAL _ftog
282   0000              	GLOBAL _ftoe_callee
283   0000              	GLOBAL _ftoe
284   0000              	GLOBAL _ftoa_callee
285   0000              	GLOBAL _ftoa
286   0000              	GLOBAL _exit_fastcall
287   0000              	GLOBAL _exit
288   0000              	GLOBAL _dtoh_callee
289   0000              	GLOBAL _dtoh
290   0000              	GLOBAL _dtog_callee
291   0000              	GLOBAL _dtog
292   0000              	GLOBAL _dtoe_callee
293   0000              	GLOBAL _dtoe
294   0000              	GLOBAL _dtoa_callee
295   0000              	GLOBAL _dtoa
296   0000              	GLOBAL _bsearch_callee
297   0000              	GLOBAL _bsearch
298   0000              	GLOBAL _atol_fastcall
299   0000              	GLOBAL _atol
300   0000              	GLOBAL _atoi_fastcall
301   0000              	GLOBAL _atoi
302   0000              	GLOBAL _atof_fastcall
303   0000              	GLOBAL _atof
304   0000              	GLOBAL _atexit_fastcall
305   0000              	GLOBAL _atexit
306   0000              	GLOBAL _at_quick_exit_fastcall
307   0000              	GLOBAL _at_quick_exit
308   0000              	GLOBAL _abs_fastcall
309   0000              	GLOBAL _abs
310   0000              	GLOBAL _abort
311   0000              	GLOBAL __strtou__callee
312   0000              	GLOBAL __strtou_
313   0000              	GLOBAL __strtoi__callee
314   0000              	GLOBAL __strtoi_
315   0000              	GLOBAL __random_uniform_xor_8__fastcall
316   0000              	GLOBAL __random_uniform_xor_8_
317   0000              	GLOBAL __random_uniform_xor_32__fastcall
318   0000              	GLOBAL __random_uniform_xor_32_
319   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
320   0000              	GLOBAL __random_uniform_cmwc_8_
321   0000              	GLOBAL __shellsort__callee
322   0000              	GLOBAL __shellsort_
323   0000              	GLOBAL __quicksort__callee
324   0000              	GLOBAL __quicksort_
325   0000              	GLOBAL __insertion_sort__callee
326   0000              	GLOBAL __insertion_sort_
327   0000              	GLOBAL __ldivu__callee
328   0000              	GLOBAL __ldivu_
329   0000              	GLOBAL __ldiv__callee
330   0000              	GLOBAL __ldiv_
331   0000              	GLOBAL __divu__callee
332   0000              	GLOBAL __divu_
333   0000              	GLOBAL __div__callee
334   0000              	GLOBAL __div_
335   0000              	GLOBAL _NIRVANAP_drawTW_raw_callee
336   0000              	GLOBAL _NIRVANAP_drawTW_raw
337   0000              	GLOBAL _NIRVANAP_drawTW_callee
338   0000              	GLOBAL _NIRVANAP_drawTW
339   0000              	GLOBAL _NIRVANAP_drawW_raw_callee
340   0000              	GLOBAL _NIRVANAP_drawW_raw
341   0000              	GLOBAL _NIRVANAP_drawW_callee
342   0000              	GLOBAL _NIRVANAP_drawW
343   0000              	GLOBAL _NIRVANAP_spriteT_callee
344   0000              	GLOBAL _NIRVANAP_spriteT
345   0000              	GLOBAL _NIRVANAP_fillC_callee
346   0000              	GLOBAL _NIRVANAP_fillC
347   0000              	GLOBAL _NIRVANAP_readC_callee
348   0000              	GLOBAL _NIRVANAP_readC
349   0000              	GLOBAL _NIRVANAP_paintC_callee
350   0000              	GLOBAL _NIRVANAP_paintC
351   0000              	GLOBAL _NIRVANAP_printC_callee
352   0000              	GLOBAL _NIRVANAP_printC
353   0000              	GLOBAL _NIRVANAP_fillT_raw_callee
354   0000              	GLOBAL _NIRVANAP_fillT_raw
355   0000              	GLOBAL _NIRVANAP_fillT_callee
356   0000              	GLOBAL _NIRVANAP_fillT
357   0000              	GLOBAL _NIRVANAP_drawT_raw_callee
358   0000              	GLOBAL _NIRVANAP_drawT_raw
359   0000              	GLOBAL _NIRVANAP_drawT_callee
360   0000              	GLOBAL _NIRVANAP_drawT
361   0000              	GLOBAL _NIRVANAP_stop
362   0000              	GLOBAL _NIRVANAP_start
363   0000              	GLOBAL _debug3
364   0000              	GLOBAL _debug2
365   0000              	GLOBAL _debug
366   0000              	GLOBAL _zx_print_str
367   0000              	GLOBAL _zx_print_int
368   0000              	GLOBAL _zx_print_chr
369   0000              	GLOBAL _zx_print_bonus_time
370   0000              	GLOBAL _zx_isr
371   0000              	GLOBAL _z80_otdr_callee
372   0000              	GLOBAL _z80_otdr
373   0000              	GLOBAL _z80_otir_callee
374   0000              	GLOBAL _z80_otir
375   0000              	GLOBAL _z80_outp_callee
376   0000              	GLOBAL _z80_outp
377   0000              	GLOBAL _z80_indr_callee
378   0000              	GLOBAL _z80_indr
379   0000              	GLOBAL _z80_inir_callee
380   0000              	GLOBAL _z80_inir
381   0000              	GLOBAL _z80_inp_fastcall
382   0000              	GLOBAL _z80_inp
383   0000              	GLOBAL _z80_set_int_state_fastcall
384   0000              	GLOBAL _z80_set_int_state
385   0000              	GLOBAL _z80_get_int_state
386   0000              	GLOBAL _z80_delay_tstate_fastcall
387   0000              	GLOBAL _z80_delay_tstate
388   0000              	GLOBAL _z80_delay_ms_fastcall
389   0000              	GLOBAL _z80_delay_ms
390   0000              	GLOBAL _im2_remove_generic_callback_callee
391   0000              	GLOBAL _im2_remove_generic_callback
392   0000              	GLOBAL _im2_prepend_generic_callback_callee
393   0000              	GLOBAL _im2_prepend_generic_callback
394   0000              	GLOBAL _im2_append_generic_callback_callee
395   0000              	GLOBAL _im2_append_generic_callback
396   0000              	GLOBAL _im2_create_generic_isr_8080_callee
397   0000              	GLOBAL _im2_create_generic_isr_8080
398   0000              	GLOBAL _im2_create_generic_isr_callee
399   0000              	GLOBAL _im2_create_generic_isr
400   0000              	GLOBAL _im2_install_isr_callee
401   0000              	GLOBAL _im2_install_isr
402   0000              	GLOBAL _im2_init_fastcall
403   0000              	GLOBAL _im2_init
404   0000              	GLOBAL _intrinsic_swap_word_32_fastcall
405   0000              	GLOBAL _intrinsic_swap_word_32
406   0000              	GLOBAL _intrinsic_swap_endian_32_fastcall
407   0000              	GLOBAL _intrinsic_swap_endian_32
408   0000              	GLOBAL _intrinsic_swap_endian_16_fastcall
409   0000              	GLOBAL _intrinsic_swap_endian_16
410   0000              	GLOBAL _intrinsic_return_de
411   0000              	GLOBAL _intrinsic_return_bc
412   0000              	GLOBAL _intrinsic_exx
413   0000              	GLOBAL _intrinsic_ex_de_hl
414   0000              	GLOBAL _intrinsic_nop
415   0000              	GLOBAL _intrinsic_im_2
416   0000              	GLOBAL _intrinsic_im_1
417   0000              	GLOBAL _intrinsic_im_0
418   0000              	GLOBAL _intrinsic_retn
419   0000              	GLOBAL _intrinsic_reti
420   0000              	GLOBAL _intrinsic_halt
421   0000              	GLOBAL _intrinsic_ei
422   0000              	GLOBAL _intrinsic_di
423   0000              	GLOBAL _intrinsic_stub
424   0000              	GLOBAL _intrinsic_outi
425   0000              	GLOBAL _intrinsic_ldi
426   0000              	GLOBAL _zx_pattern_fill_callee
427   0000              	GLOBAL _zx_pattern_fill
428   0000              	GLOBAL _zx_saddrpup_fastcall
429   0000              	GLOBAL _zx_saddrpup
430   0000              	GLOBAL _zx_saddrpright_callee
431   0000              	GLOBAL _zx_saddrpright
432   0000              	GLOBAL _zx_saddrpleft_callee
433   0000              	GLOBAL _zx_saddrpleft
434   0000              	GLOBAL _zx_saddrpdown_fastcall
435   0000              	GLOBAL _zx_saddrpdown
436   0000              	GLOBAL _zx_saddrcup_fastcall
437   0000              	GLOBAL _zx_saddrcup
438   0000              	GLOBAL _zx_saddrcright_fastcall
439   0000              	GLOBAL _zx_saddrcright
440   0000              	GLOBAL _zx_saddrcleft_fastcall
441   0000              	GLOBAL _zx_saddrcleft
442   0000              	GLOBAL _zx_saddrcdown_fastcall
443   0000              	GLOBAL _zx_saddrcdown
444   0000              	GLOBAL _zx_saddr2py_fastcall
445   0000              	GLOBAL _zx_saddr2py
446   0000              	GLOBAL _zx_saddr2px_fastcall
447   0000              	GLOBAL _zx_saddr2px
448   0000              	GLOBAL _zx_saddr2cy_fastcall
449   0000              	GLOBAL _zx_saddr2cy
450   0000              	GLOBAL _zx_saddr2cx_fastcall
451   0000              	GLOBAL _zx_saddr2cx
452   0000              	GLOBAL _zx_saddr2aaddr_fastcall
453   0000              	GLOBAL _zx_saddr2aaddr
454   0000              	GLOBAL _zx_py2saddr_fastcall
455   0000              	GLOBAL _zx_py2saddr
456   0000              	GLOBAL _zx_py2aaddr_fastcall
457   0000              	GLOBAL _zx_py2aaddr
458   0000              	GLOBAL _zx_pxy2saddr_callee
459   0000              	GLOBAL _zx_pxy2saddr
460   0000              	GLOBAL _zx_pxy2aaddr_callee
461   0000              	GLOBAL _zx_pxy2aaddr
462   0000              	GLOBAL _zx_px2bitmask_fastcall
463   0000              	GLOBAL _zx_px2bitmask
464   0000              	GLOBAL _zx_cy2saddr_fastcall
465   0000              	GLOBAL _zx_cy2saddr
466   0000              	GLOBAL _zx_cy2aaddr_fastcall
467   0000              	GLOBAL _zx_cy2aaddr
468   0000              	GLOBAL _zx_cxy2saddr_callee
469   0000              	GLOBAL _zx_cxy2saddr
470   0000              	GLOBAL _zx_cxy2aaddr_callee
471   0000              	GLOBAL _zx_cxy2aaddr
472   0000              	GLOBAL _zx_bitmask2px_fastcall
473   0000              	GLOBAL _zx_bitmask2px
474   0000              	GLOBAL _zx_aaddrcup_fastcall
475   0000              	GLOBAL _zx_aaddrcup
476   0000              	GLOBAL _zx_aaddrcright_fastcall
477   0000              	GLOBAL _zx_aaddrcright
478   0000              	GLOBAL _zx_aaddrcleft_fastcall
479   0000              	GLOBAL _zx_aaddrcleft
480   0000              	GLOBAL _zx_aaddrcdown_fastcall
481   0000              	GLOBAL _zx_aaddrcdown
482   0000              	GLOBAL _zx_aaddr2saddr_fastcall
483   0000              	GLOBAL _zx_aaddr2saddr
484   0000              	GLOBAL _zx_aaddr2py_fastcall
485   0000              	GLOBAL _zx_aaddr2py
486   0000              	GLOBAL _zx_aaddr2px_fastcall
487   0000              	GLOBAL _zx_aaddr2px
488   0000              	GLOBAL _zx_aaddr2cy_fastcall
489   0000              	GLOBAL _zx_aaddr2cy
490   0000              	GLOBAL _zx_aaddr2cx_fastcall
491   0000              	GLOBAL _zx_aaddr2cx
492   0000              	GLOBAL _zx_visit_wc_pix_callee
493   0000              	GLOBAL _zx_visit_wc_pix
494   0000              	GLOBAL _zx_visit_wc_attr_callee
495   0000              	GLOBAL _zx_visit_wc_attr
496   0000              	GLOBAL _zx_scroll_wc_up_pix_callee
497   0000              	GLOBAL _zx_scroll_wc_up_pix
498   0000              	GLOBAL _zx_scroll_wc_up_attr_callee
499   0000              	GLOBAL _zx_scroll_wc_up_attr
500   0000              	GLOBAL _zx_scroll_wc_up_callee
501   0000              	GLOBAL _zx_scroll_wc_up
502   0000              	GLOBAL _zx_scroll_up_pix_callee
503   0000              	GLOBAL _zx_scroll_up_pix
504   0000              	GLOBAL _zx_scroll_up_attr_callee
505   0000              	GLOBAL _zx_scroll_up_attr
506   0000              	GLOBAL _zx_scroll_up_callee
507   0000              	GLOBAL _zx_scroll_up
508   0000              	GLOBAL _zx_cls_wc_pix_callee
509   0000              	GLOBAL _zx_cls_wc_pix
510   0000              	GLOBAL _zx_cls_wc_attr_callee
511   0000              	GLOBAL _zx_cls_wc_attr
512   0000              	GLOBAL _zx_cls_wc_callee
513   0000              	GLOBAL _zx_cls_wc
514   0000              	GLOBAL _zx_cls_pix_fastcall
515   0000              	GLOBAL _zx_cls_pix
516   0000              	GLOBAL _zx_cls_attr_fastcall
517   0000              	GLOBAL _zx_cls_attr
518   0000              	GLOBAL _zx_cls_fastcall
519   0000              	GLOBAL _zx_cls
520   0000              	GLOBAL _zx_border_fastcall
521   0000              	GLOBAL _zx_border
522   0000              	GLOBAL _spr_colision_b2
523   0000              	GLOBAL _spr_colision_b
524   0000              	GLOBAL _spr_flatten
525   0000              	GLOBAL _spr_btile_paint_back
526   0000              	GLOBAL _spr_bullet_explode
527   0000              	GLOBAL _spr_init_anim_bullets
528   0000              	GLOBAL _spr_turn_horizontal
529   0000              	GLOBAL _spr_play_bullets
530   0000              	GLOBAL _spr_play_anim
531   0000              	GLOBAL _spr_add_anim
532   0000              	GLOBAL _spr_clear_scr
533   0000              	GLOBAL _spr_page_map
534   0000              	GLOBAL _spr_page_down
535   0000              	GLOBAL _spr_page_up
536   0000              	GLOBAL _spr_page_right
537   0000              	GLOBAL _spr_page_left
538   0000              	GLOBAL _spr_tile_paint
539   0000              	GLOBAL _spr_calc_hor
540   0000              	GLOBAL _spr_draw_index
541   0000              	GLOBAL _spr_brick_anim
542   0000              	GLOBAL _spr_back_repaint
543   0000              	GLOBAL _spr_tile
544   0000              	GLOBAL _spr_destroy
545   0000              	GLOBAL _spr_tile_dir
546   0000              	GLOBAL _spr_redraw
547   0000              	GLOBAL _spr_move_left
548   0000              	GLOBAL _spr_move_right
549   0000              	GLOBAL _spr_move_horizontal
550   0000              	GLOBAL _spr_move_down
551   0000              	GLOBAL _spr_move_up
552   0000              	GLOBAL _spr_calc_index
553   0000              	GLOBAL _spr_chktime
554   0000              	GLOBAL _menu_define_key
555   0000              	GLOBAL _menu_redefine
556   0000              	GLOBAL _menu_main_print
557   0000              	GLOBAL _menu_main
558   0000              	GLOBAL _game_match_back
559   0000              	GLOBAL _game_attribs
560   0000              	GLOBAL _game_boss_clear
561   0000              	GLOBAL _game_obj_clear
562   0000              	GLOBAL _game_obj_chk
563   0000              	GLOBAL _game_obj_set
564   0000              	GLOBAL _game_shoot_fire_boss
565   0000              	GLOBAL _game_shoot_fire
566   0000              	GLOBAL _game_add_enemy
567   0000              	GLOBAL _game_print_header
568   0000              	GLOBAL _game_check_time
569   0000              	GLOBAL _game_rotate_attrib_osd
570   0000              	GLOBAL _game_rotate_attrib
571   0000              	GLOBAL _game_colour_message
572   0000              	GLOBAL _game_paint_attrib_lin_osd
573   0000              	GLOBAL _game_paint_attrib_lin_h
574   0000              	GLOBAL _game_paint_attrib_lin
575   0000              	GLOBAL _game_print_score
576   0000              	GLOBAL _game_check_cell
577   0000              	GLOBAL _game_check_map
578   0000              	GLOBAL _game_loop
579   0000              	GLOBAL _game_round_init
580   0000              	GLOBAL _game_start_timer
581   0000              	GLOBAL _game_update_stats
582   0000              	GLOBAL _game_print_footer
583   0000              	GLOBAL _game_fill_row
584   0000              	GLOBAL _game_fps
585   0000              	GLOBAL _game_respawn
586   0000              	GLOBAL _game_draw_screen
587   0000              	GLOBAL _boss_turn
588   0000              	GLOBAL _enemy_avoid_dead
589   0000              	GLOBAL _enemy_avoid_fall
590   0000              	GLOBAL _enemy_respawn
591   0000              	GLOBAL _enemy_init
592   0000              	GLOBAL _enemy_move
593   0000              	GLOBAL _enemy_turn
594   0000              	GLOBAL _enemy_static
595   0000              	GLOBAL _enemy_walk
596   0000              	GLOBAL _enemy_horizontal
597   0000              	GLOBAL _enemy_vertical
598   0000              	GLOBAL _ay_fx_play
599   0000              	GLOBAL _ay_midi_play
600   0000              	GLOBAL _ay_is_playing
601   0000              	GLOBAL _ay_reset
602   0000              	GLOBAL _test_func
603   0000              	GLOBAL _test_proc
604   0000              	GLOBAL _in_mouse_kempston_wheel_delta
605   0000              	GLOBAL _in_mouse_kempston_wheel
606   0000              	GLOBAL _in_mouse_kempston_callee
607   0000              	GLOBAL _in_mouse_kempston
608   0000              	GLOBAL _in_mouse_kempston_setpos_callee
609   0000              	GLOBAL _in_mouse_kempston_setpos
610   0000              	GLOBAL _in_mouse_kempston_reset
611   0000              	GLOBAL _in_mouse_kempston_init
612   0000              	GLOBAL _in_mouse_amx_wheel_delta
613   0000              	GLOBAL _in_mouse_amx_wheel
614   0000              	GLOBAL _in_mouse_amx_callee
615   0000              	GLOBAL _in_mouse_amx
616   0000              	GLOBAL _in_mouse_amx_setpos_callee
617   0000              	GLOBAL _in_mouse_amx_setpos
618   0000              	GLOBAL _in_mouse_amx_reset
619   0000              	GLOBAL _in_mouse_amx_init_callee
620   0000              	GLOBAL _in_mouse_amx_init
621   0000              	GLOBAL _in_stick_sinclair2
622   0000              	GLOBAL _in_stick_sinclair1
623   0000              	GLOBAL _in_stick_kempston
624   0000              	GLOBAL _in_stick_fuller
625   0000              	GLOBAL _in_stick_cursor
626   0000              	GLOBAL _in_stick_keyboard_fastcall
627   0000              	GLOBAL _in_stick_keyboard
628   0000              	GLOBAL _in_wait_nokey
629   0000              	GLOBAL _in_wait_key
630   0000              	GLOBAL _in_test_key
631   0000              	GLOBAL _in_pause_fastcall
632   0000              	GLOBAL _in_pause
633   0000              	GLOBAL _in_key_scancode_fastcall
634   0000              	GLOBAL _in_key_scancode
635   0000              	GLOBAL _in_key_pressed_fastcall
636   0000              	GLOBAL _in_key_pressed
637   0000              	GLOBAL _in_inkey
638   0000              	GLOBAL _NIRVANAP_CHAR_TABLE
639   0000              	GLOBAL _NIRVANAP_WIDE_IMAGES
640   0000              	GLOBAL _NIRVANAP_TILE_IMAGES
641   0000              	GLOBAL _NIRVANAP_HOLE
642   0000              	GLOBAL _NIRVANAP_ISR_HOOK
643   0000              	GLOBAL _scan_map
644   0000              	GLOBAL _key_map
645   0000              	GLOBAL _player_lvl_table
646   0000              	GLOBAL _map_paper_last
647   0000              	GLOBAL _map_paper_clr
648   0000              	GLOBAL _map_paper
649   0000              	GLOBAL _draw_count
650   0000              	GLOBAL _g_player_hit_right
651   0000              	GLOBAL _g_player_hit_left
652   0000              	GLOBAL _bullet_count
653   0000              	GLOBAL _spr_hack
654   0000              	GLOBAL _boss_stat
655   0000              	GLOBAL _boss_time_fire
656   0000              	GLOBAL _boss_time
657   0000              	GLOBAL _boss_tile
658   0000              	GLOBAL _boss_inc
659   0000              	GLOBAL _boss_col
660   0000              	GLOBAL _boss_lin
661   0000              	GLOBAL _bullet
662   0000              	GLOBAL _bullet_vel
663   0000              	GLOBAL _bullet_frames
664   0000              	GLOBAL _bullet_colint
665   0000              	GLOBAL _bullet_dir
666   0000              	GLOBAL _bullet_tile
667   0000              	GLOBAL _bullet_col
668   0000              	GLOBAL _bullet_lin
669   0000              	GLOBAL _bullet_col0
670   0000              	GLOBAL _bullet_lin0
671   0000              	GLOBAL _bullet_max
672   0000              	GLOBAL _bullet_class
673   0000              	GLOBAL _mush_class
674   0000              	GLOBAL _mush_index
675   0000              	GLOBAL _anim_count
676   0000              	GLOBAL _anim_respanwn
677   0000              	GLOBAL _anim_loop
678   0000              	GLOBAL _anim_end
679   0000              	GLOBAL _anim_int
680   0000              	GLOBAL _anim_tile
681   0000              	GLOBAL _anim_col
682   0000              	GLOBAL _anim_lin
683   0000              	GLOBAL _map_heigth
684   0000              	GLOBAL _map_width
685   0000              	GLOBAL _scr_curr
686   0000              	GLOBAL _scr_obj1
687   0000              	GLOBAL _scr_obj0
688   0000              	GLOBAL _scr_map
689   0000              	GLOBAL _sprite_speed_alt
690   0000              	GLOBAL _spr_init
691   0000              	GLOBAL _spr_map_tile
692   0000              	GLOBAL _sprite_frames
693   0000              	GLOBAL _sprite_speed
694   0000              	GLOBAL _screen_ink
695   0000              	GLOBAL _screen_paper
696   0000              	GLOBAL _player_onstair
697   0000              	GLOBAL _game_start_scr
698   0000              	GLOBAL _game_respawn_tile
699   0000              	GLOBAL _game_respawn_index
700   0000              	GLOBAL _game_respawn_time
701   0000              	GLOBAL _game_score_top
702   0000              	GLOBAL _player_coins
703   0000              	GLOBAL _player_lives
704   0000              	GLOBAL _game_over
705   0000              	GLOBAL _game_sound
706   0000              	GLOBAL _game_inmune
707   0000              	GLOBAL _game_god_mode
708   0000              	GLOBAL _sprite_curr_index
709   0000              	GLOBAL _spr_count
710   0000              	GLOBAL _bullet_time
711   0000              	GLOBAL _anim_time
712   0000              	GLOBAL _frame_time
713   0000              	GLOBAL _curr_time
714   0000              	GLOBAL _s_state
715   0000              	GLOBAL _attrib_osd
716   0000              	GLOBAL _attrib_hl
717   0000              	GLOBAL _attrib
718   0000              	GLOBAL _zx_val_asm
719   0000              	GLOBAL _enemies
720   0000              	GLOBAL _tmp_ui
721   0000              	GLOBAL _tmp_sc
722   0000              	GLOBAL _tmp_uc
723   0000              	GLOBAL _tmp1
724   0000              	GLOBAL _tmp0
725   0000              	GLOBAL _tmp
726   0000              	GLOBAL _index1
727   0000              	GLOBAL _index0
728   0000              	GLOBAL _loop_count
729   0000              	GLOBAL _s_col1
730   0000              	GLOBAL _s_col0
731   0000              	GLOBAL _s_lin1
732   0000              	GLOBAL _s_lin0
733   0000              	GLOBAL _s_tile1
734   0000              	GLOBAL _s_tile0
735   0000              	GLOBAL _player_brick_time
736   0000              	GLOBAL _player_hit_count
737   0000              	GLOBAL _sprite_horizontal_check
738   0000              	GLOBAL _sprite_on_air
739   0000              	GLOBAL _sprite
740   0000              	GLOBAL _fps
741   0000              	GLOBAL _game_2buttons
742   0000              	GLOBAL _game_respawn_curr_time
743   0000              	GLOBAL _game_worldup
744   0000              	GLOBAL _game_mush_count
745   0000              	GLOBAL _game_boss_fix
746   0000              	GLOBAL _game_boss_hit
747   0000              	GLOBAL _game_boss_alive
748   0000              	GLOBAL _game_boss
749   0000              	GLOBAL _game_world
750   0000              	GLOBAL _game_gravity
751   0000              	GLOBAL _player_onfire
752   0000              	GLOBAL _player_anim_stair
753   0000              	GLOBAL _player_hit_time
754   0000              	GLOBAL _player_lin_scr
755   0000              	GLOBAL _player_col_scr
756   0000              	GLOBAL _player_lvl
757   0000              	GLOBAL _player_int
758   0000              	GLOBAL _player_str
759   0000              	GLOBAL _player_max_vita
760   0000              	GLOBAL _player_max_mana
761   0000              	GLOBAL _player_vita
762   0000              	GLOBAL _player_mana
763   0000              	GLOBAL _player_keys
764   0000              	GLOBAL _player_vel_inc
765   0000              	GLOBAL _player_vel_y1
766   0000              	GLOBAL _player_vel_y0
767   0000              	GLOBAL _player_vel_y
768   0000              	GLOBAL _player_vel_x
769   0000              	GLOBAL _player_score
770   0000              	GLOBAL _last_time
771   0000              	GLOBAL _player_slide
772   0000              	GLOBAL _spr_timer
773   0000              	GLOBAL _jump_lin
774   0000              	GLOBAL _player_hit_col
775   0000              	GLOBAL _player_hit_lin
776   0000              	GLOBAL _colint
777   0000              	GLOBAL _col
778   0000              	GLOBAL _lin
779   0000              	GLOBAL _tile
780   0000              	GLOBAL _state_a
781   0000              	GLOBAL _state
782   0000              	GLOBAL _class
783   0000              	GLOBAL _tbuffer
784   0000              	GLOBAL _dirs_alt
785   0000              	GLOBAL _dirs
786   0000              	GLOBAL _k2
787   0000              	GLOBAL _k1
788   0000              	GLOBAL _joyfunc2
789   0000              	GLOBAL _joyfunc1
790   0000              	GLOBAL _btiles
791   0000              	GLOBAL _spec128
792   0000              	GLOBAL _GLOBAL_ZX_PORT_7FFD
793   0000              	GLOBAL _GLOBAL_ZX_PORT_1FFD
794   0000              	GLOBAL _GLOBAL_ZX_PORT_FE
795   0000              	GLOBAL _ay_effect_20
796   0000              	GLOBAL _ay_effect_19
797   0000              	GLOBAL _ay_effect_18
798   0000              	GLOBAL _ay_effect_17
799   0000              	GLOBAL _ay_effect_16
800   0000              	GLOBAL _ay_effect_15
801   0000              	GLOBAL _ay_effect_14
802   0000              	GLOBAL _ay_effect_13
803   0000              	GLOBAL _ay_effect_12
804   0000              	GLOBAL _ay_effect_11
805   0000              	GLOBAL _ay_effect_10
806   0000              	GLOBAL _ay_effect_09
807   0000              	GLOBAL _ay_effect_08
808   0000              	GLOBAL _ay_effect_07
809   0000              	GLOBAL _ay_effect_06
810   0000              	GLOBAL _ay_effect_05
811   0000              	GLOBAL _ay_effect_04
812   0000              	GLOBAL _ay_effect_03
813   0000              	GLOBAL _ay_effect_02
814   0000              	GLOBAL _ay_effect_01
815   0000              	GLOBAL _pb_midi_phase_1
816   0000              	GLOBAL _pb_midi_title
817   0000              	GLOBAL _control_method
818   0000              	GLOBAL _world0_h
819   0000              	GLOBAL _world0_w
820   0000              	GLOBAL _world0
821   0000              	GLOBAL _paper0
822   0000              	GLOBAL _lenght0
823   0000              	GLOBAL _start_scr0
824   0000              ;--------------------------------------------------------
825   0000              ; special function registers
826   0000              ;--------------------------------------------------------
827   0000              defc _IO_FE	=	0x00fe
828   0000              defc _IO_1FFD	=	0x1ffd
829   0000              defc _IO_7FFD	=	0x7ffd
830   0000              ;--------------------------------------------------------
831   0000              ; ram data
832   0000              ;--------------------------------------------------------
833   0000              	SECTION bss_compiler
834   0000              ;--------------------------------------------------------
835   0000              ; ram data
836   0000              ;--------------------------------------------------------
837   0000              
838   0000              IF 0
839   0000              
840   0000              ; .area _INITIALIZED removed by z88dk
841   0000              
842   0000              
843   0000              ENDIF
844   0000              
845   0000              ;--------------------------------------------------------
846   0000              ; absolute external ram data
847   0000              ;--------------------------------------------------------
848   0000              	SECTION IGNORE
849   0000              ;--------------------------------------------------------
850   0000              ; global & static initialisations
851   0000              ;--------------------------------------------------------
852   0000              	SECTION code_crt_init
853   0000              ;--------------------------------------------------------
854   0000              ; Home
855   0000              ;--------------------------------------------------------
856   0000              	SECTION IGNORE
857   0000              ;--------------------------------------------------------
858   0000              ; code
859   0000              ;--------------------------------------------------------
860   0000              	SECTION code_compiler
861   0000              ;	---------------------------------
862   0000              ; Function player_init
863   0000              ; ---------------------------------
864   0000              _player_init:
865   0000  CD 00 00    	call	___sdcc_enter_ix
866   0003  21 07 00    	ld	hl, +(_class + 0x0007)
867   0006  36 00       	ld	(hl),0x00
868   0008  21 07 00    	ld	hl, +(_tile + 0x0007)
869   000B  DD 7E 06    	ld	a,(ix+6)
870   000E  77          	ld	(hl), a
871   000F  21 07 00    	ld	hl, +(_lin + 0x0007)
872   0012  DD 7E 04    	ld	a,(ix+4)
873   0015  77          	ld	(hl), a
874   0016  21 07 00    	ld	hl, +(_col + 0x0007)
875   0019  DD 7E 05    	ld	a,(ix+5)
876   001C  77          	ld	(hl), a
877   001D  21 07 00    	ld	hl, +(_colint + 0x0007)
878   0020  36 00       	ld	(hl),0x00
879   0022  21 07 00    	ld	hl, +(_state + 0x0007)
880   0025  36 00       	ld	(hl),0x00
881   0027  01 07 00    	ld	bc,_state_a+7
882   002A  AF          	xor	a, a
883   002B  02          	ld	(bc), a
884   002C  21 07 00    	ld	hl, +(_jump_lin + 0x0007)
885   002F  DD 7E 04    	ld	a,(ix+4)
886   0032  77          	ld	(hl), a
887   0033  ED 5B 00 00 	ld	de,(_curr_time)
888   0037  ED 53 0E 00 	ld	(_last_time + 0x000e),de
889   003B  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
890   003E  36 00       	ld	(hl),0x00
891   0040  0A          	ld	a, (bc)
892   0041  F6 11       	or	a,+(0x01|0x10)
893   0043  02          	ld	(bc),a
894   0044  21 00 00    	ld	hl,_player_hit_col
895   0047  36 00       	ld	(hl),0x00
896   0049  21 00 00    	ld	hl,_player_hit_lin
897   004C  36 00       	ld	(hl),0x00
898   004E  21 00 00    	ld	hl,_player_slide
899   0051  36 00       	ld	(hl),0x00
900   0053  21 00 00    	ld	hl,_player_onstair
901   0056  36 00       	ld	(hl),0x00
902   0058  21 00 00    	ld	hl,_player_onfire
903   005B  36 00       	ld	(hl),0x00
904   005D  DD 66 05    	ld	h,(ix+5)
905   0060  DD 6E 04    	ld	l,(ix+4)
906   0063  E5          	push	hl
907   0064  DD 56 06    	ld	d,(ix+6)
908   0067  1E 07       	ld	e,0x07
909   0069  D5          	push	de
910   006A  CD 00 00    	call	_NIRVANAP_spriteT_callee
911   006D  DD E1       	pop	ix
912   006F  C9          	ret
913   0070              	SECTION code_compiler
914   0070              ;	---------------------------------
915   0070              ; Function player_turn
916   0070              ; ---------------------------------
917   0070              _player_turn:
918   0070  21 00 00    	ld	hl,_sprite
919   0073  CD 00 00    	call	_spr_chktime
920   0076  7D          	ld	a, l
921   0077  B7          	or	a, a
922   0078  C8          	ret	Z
923   0079  21 00 00    	ld	hl,_k1
924   007C  E5          	push	hl
925   007D  2A 00 00    	ld	hl,(_joyfunc1)
926   0080  CD 00 00    	call	___sdcc_call_hl
927   0083  F1          	pop	af
928   0084  7D          	ld	a,l
929   0085  32 00 00    	ld	(_dirs),a
930   0088  21 00 00    	ld	hl,_k2
931   008B  E5          	push	hl
932   008C  2A 00 00    	ld	hl,(_joyfunc2)
933   008F  CD 00 00    	call	___sdcc_call_hl
934   0092  F1          	pop	af
935   0093  7D          	ld	a,l
936   0094  32 00 00    	ld	(_dirs_alt),a
937   0097  CD 9D 00    	call	_player_move
938   009A  C3 D6 03    	jp  _player_collision
939   009D              	SECTION code_compiler
940   009D              ;	---------------------------------
941   009D              ; Function player_move
942   009D              ; ---------------------------------
943   009D              _player_move:
944   009D  3A 07 00    	ld	a,(_lin + 0x0007)
945   00A0  32 00 00    	ld	(_s_lin0),a
946   00A3  3A 07 00    	ld	a,(_col + 0x0007)
947   00A6  32 00 00    	ld	(_s_col0),a
948   00A9  21 07 00    	ld	hl,+(_tile + 0x0007)
949   00AC  4E          	ld	c, (hl)
950   00AD  21 07 00    	ld	hl,+(_colint + 0x0007)
951   00B0  46          	ld	b, (hl)
952   00B1  79          	ld	a, c
953   00B2  80          	add	a, b
954   00B3  32 00 00    	ld	(_s_tile0),a
955   00B6  3A 07 00    	ld	a,(_state + 0x0007)
956   00B9  32 00 00    	ld	(_s_state),a
957   00BC  21 00 00    	ld	hl,_s_state
958   00BF  CB 46       	bit	0, (hl)
959   00C1  20 07       	jr	NZ,l_player_move_00113
960   00C3  21 00 00    	ld	hl,_s_state
961   00C6  CB 4E       	bit	1, (hl)
962   00C8  28 49       	jr	Z,l_player_move_00114
963   00CA              l_player_move_00113:
964   00CA  CD 49 03    	call	_player_fire
965   00CD  3A 00 00    	ld	a,(_player_vel_y)
966   00D0  21 00 00    	ld	hl,_player_vel_y1
967   00D3  96          	sub	a, (hl)
968   00D4  E2 D9 00    	jp	PO, l_player_move_00162
969   00D7  EE 80       	xor	a,0x80
970   00D9              l_player_move_00162:
971   00D9  F2 FC 00    	jp	P, l_player_move_00106
972   00DC  21 00 00    	ld	hl,_dirs
973   00DF  CB 56       	bit	2, (hl)
974   00E1  28 09       	jr	Z,l_player_move_00102
975   00E3  21 00 00    	ld	hl,_s_state
976   00E6  7E          	ld	a,(hl)
977   00E7  F6 08       	or	a,0x08
978   00E9  E6 FB       	and	a,0xfb
979   00EB  77          	ld	(hl),a
980   00EC              l_player_move_00102:
981   00EC  21 00 00    	ld	hl,_dirs
982   00EF  CB 4E       	bit	1, (hl)
983   00F1  28 09       	jr	Z,l_player_move_00106
984   00F3  21 00 00    	ld	hl,_s_state
985   00F6  7E          	ld	a,(hl)
986   00F7  F6 04       	or	a,0x04
987   00F9  E6 F7       	and	a,0xf7
988   00FB  77          	ld	(hl),a
989   00FC              l_player_move_00106:
990   00FC  CD D2 0D    	call	_player_move_jump
991   00FF  7D          	ld	a, l
992   0100  B7          	or	a, a
993   0101  28 1C       	jr	Z,l_player_move_00115
994   0103  3A 00 00    	ld	a,(_player_onstair)
995   0106  B7          	or	a, a
996   0107  20 16       	jr	NZ,l_player_move_00115
997   0109  21 60 08    	ld	hl,0x0860
998   010C  E5          	push	hl
999   010D  CD BD 06    	call	_player_tile
1000  0110  F1          	pop	af
1001  0111  18 0C       	jr	l_player_move_00115
1002  0113              l_player_move_00114:
1003  0113  CD 85 01    	call	_player_move_input
1004  0116  3A 00 00    	ld	a,(_player_onstair)
1005  0119  B7          	or	a, a
1006  011A  20 03       	jr	NZ,l_player_move_00115
1007  011C  CD 4D 0C    	call	_player_check_floor
1008  011F              l_player_move_00115:
1009  011F  CD 00 00    	call	_spr_redraw
1010  0122  7D          	ld	a, l
1011  0123  B7          	or	a, a
1012  0124  28 03       	jr	Z,l_player_move_00118
1013  0126  CD D8 06    	call	_player_check_map
1014  0129              l_player_move_00118:
1015  0129  3A 00 00    	ld	a,(_player_hit_lin)
1016  012C  B7          	or	a, a
1017  012D  28 03       	jr	Z,l_player_move_00120
1018  012F  CD AF 0B    	call	_player_hit_platform_clear
1019  0132              l_player_move_00120:
1020  0132  3A 00 00    	ld	a,(_s_state)
1021  0135  32 07 00    	ld	((_state + 0x0007)),a
1022  0138  2E 00       	ld	l,0x00
1023  013A  C9          	ret
1024  013B              	SECTION code_compiler
1025  013B              ;	---------------------------------
1026  013B              ; Function player_check_input
1027  013B              ; ---------------------------------
1028  013B              _player_check_input:
1029  013B  21 00 00    	ld	hl,_dirs
1030  013E  CB 56       	bit	2, (hl)
1031  0140  28 0C       	jr	Z,l_player_check_input_00102
1032  0142  21 00 00    	ld	hl,_dirs
1033  0145  CB 5E       	bit	3, (hl)
1034  0147  28 05       	jr	Z,l_player_check_input_00102
1035  0149  21 00 00    	ld	hl,_dirs
1036  014C  36 00       	ld	(hl),0x00
1037  014E              l_player_check_input_00102:
1038  014E  21 00 00    	ld	hl,_dirs
1039  0151  7E          	ld	a, (hl)
1040  0152  CB 07       	rlc	a
1041  0154  E6 01       	and	a,0x01
1042  0156  CB 47       	bit	0, a
1043  0158  20 28       	jr	NZ,l_player_check_input_00107
1044  015A  CB 56       	bit	2, (hl)
1045  015C  20 24       	jr	NZ,l_player_check_input_00107
1046  015E  21 00 00    	ld	hl,_dirs
1047  0161  CB 5E       	bit	3, (hl)
1048  0163  20 1D       	jr	NZ,l_player_check_input_00107
1049  0165  21 00 00    	ld	hl,_dirs
1050  0168  CB 46       	bit	0, (hl)
1051  016A  20 16       	jr	NZ,l_player_check_input_00107
1052  016C  21 00 00    	ld	hl,_dirs
1053  016F  CB 4E       	bit	1, (hl)
1054  0171  20 0F       	jr	NZ,l_player_check_input_00107
1055  0173  3A 00 00    	ld	a,(_dirs_alt)
1056  0176  CB 07       	rlc	a
1057  0178  E6 01       	and	a,0x01
1058  017A  CB 47       	bit	0, a
1059  017C  20 04       	jr	NZ,l_player_check_input_00107
1060  017E  2E 00       	ld	l,0x00
1061  0180  18 02       	jr	l_player_check_input_00108
1062  0182              l_player_check_input_00107:
1063  0182  2E 01       	ld	l,0x01
1064  0184              l_player_check_input_00108:
1065  0184  C9          	ret
1066  0185              	SECTION code_compiler
1067  0185              ;	---------------------------------
1068  0185              ; Function player_move_input
1069  0185              ; ---------------------------------
1070  0185              _player_move_input:
1071  0185  CD 3B 01    	call	_player_check_input
1072  0188  7D          	ld	a, l
1073  0189  B7          	or	a, a
1074  018A  CA 09 03    	jp	Z, l_player_move_input_00149
1075  018D  CD 49 03    	call	_player_fire
1076  0190  7D          	ld	a, l
1077  0191  B7          	or	a, a
1078  0192  28 0A       	jr	Z,l_player_move_input_00102
1079  0194  21 00 00    	ld	hl,_dirs
1080  0197  36 00       	ld	(hl),0x00
1081  0199  2E 00       	ld	l,0x00
1082  019B  C3 2F 03    	jp	l_player_move_input_00151
1083  019E              l_player_move_input_00102:
1084  019E  3A 00 00    	ld	a,(_game_2buttons)
1085  01A1  B7          	or	a, a
1086  01A2  28 07       	jr	Z,l_player_move_input_00104
1087  01A4  3A 00 00    	ld	a,(_dirs)
1088  01A7  E6 80       	and	a,0x80
1089  01A9  18 16       	jr	l_player_move_input_00105
1090  01AB              l_player_move_input_00104:
1091  01AB  21 00 00    	ld	hl,_dirs
1092  01AE  7E          	ld	a, (hl)
1093  01AF  CB 07       	rlc	a
1094  01B1  E6 01       	and	a,0x01
1095  01B3  CB 47       	bit	0, a
1096  01B5  28 04       	jr	Z,l_player_move_input_00153
1097  01B7  CB 46       	bit	0, (hl)
1098  01B9  20 04       	jr	NZ,l_player_move_input_00154
1099  01BB              l_player_move_input_00153:
1100  01BB  3E 00       	ld	a,0x00
1101  01BD  18 02       	jr	l_player_move_input_00155
1102  01BF              l_player_move_input_00154:
1103  01BF  3E 01       	ld	a,0x01
1104  01C1              l_player_move_input_00155:
1105  01C1              l_player_move_input_00105:
1106  01C1  B7          	or	a, a
1107  01C2  28 4A       	jr	Z,l_player_move_input_00109
1108  01C4  21 00 00    	ld	hl,_player_vel_inc
1109  01C7  36 01       	ld	(hl),0x01
1110  01C9  CD 00 00    	call	_ay_is_playing
1111  01CC  7D          	ld	a, l
1112  01CD  D6 03       	sub	a,0x03
1113  01CF  28 06       	jr	Z,l_player_move_input_00107
1114  01D1  21 00 00    	ld	hl,_ay_effect_03
1115  01D4  CD 00 00    	call	_ay_fx_play
1116  01D7              l_player_move_input_00107:
1117  01D7  21 00 00    	ld	hl,_player_onstair
1118  01DA  36 00       	ld	(hl),0x00
1119  01DC  21 00 00    	ld	hl,_s_state
1120  01DF  7E          	ld	a,(hl)
1121  01E0  F6 01       	or	a,0x01
1122  01E2  E6 FD       	and	a,0xfd
1123  01E4  77          	ld	(hl),a
1124  01E5  3A 07 00    	ld	a,(_lin + 0x0007)
1125  01E8  32 07 00    	ld	((_jump_lin + 0x0007)),a
1126  01EB  3A 00 00    	ld	a,(_s_state)
1127  01EE  32 07 00    	ld	((_state + 0x0007)),a
1128  01F1  21 64 08    	ld	hl,0x0864
1129  01F4  E5          	push	hl
1130  01F5  CD BD 06    	call	_player_tile
1131  01F8  F1          	pop	af
1132  01F9  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
1133  01FC  36 02       	ld	(hl),0x02
1134  01FE  21 00 00    	ld	hl,_player_slide
1135  0201  36 00       	ld	(hl),0x00
1136  0203  3A 00 00    	ld	a,(_player_vel_y0)
1137  0206  32 00 00    	ld	(_player_vel_y),a
1138  0209  2E 01       	ld	l,0x01
1139  020B  C3 2F 03    	jp	l_player_move_input_00151
1140  020E              l_player_move_input_00109:
1141  020E  21 00 00    	ld	hl,_dirs
1142  0211  CB 5E       	bit	3, (hl)
1143  0213  28 23       	jr	Z,l_player_move_input_00113
1144  0215  CD 30 03    	call	_player_fix_walk_lin
1145  0218  21 00 00    	ld	hl,_s_state
1146  021B  7E          	ld	a,(hl)
1147  021C  F6 04       	or	a,0x04
1148  021E  E6 F7       	and	a,0xf7
1149  0220  77          	ld	(hl),a
1150  0221  01 07 00    	ld	bc,_state_a+7
1151  0224  0A          	ld	a, (bc)
1152  0225  F6 10       	or	a,0x10
1153  0227  E6 F7       	and	a,0xf7
1154  0229  02          	ld	(bc),a
1155  022A  3A 00 00    	ld	a,(_player_onstair)
1156  022D  B7          	or	a, a
1157  022E  28 05       	jr	Z,l_player_move_input_00111
1158  0230  2E 00       	ld	l,0x00
1159  0232  CD 2B 06    	call	_player_check_stairs
1160  0235              l_player_move_input_00111:
1161  0235  CD 00 00    	call	_spr_move_horizontal
1162  0238              l_player_move_input_00113:
1163  0238  21 00 00    	ld	hl,_dirs
1164  023B  CB 56       	bit	2, (hl)
1165  023D  28 23       	jr	Z,l_player_move_input_00117
1166  023F  CD 30 03    	call	_player_fix_walk_lin
1167  0242  21 00 00    	ld	hl,_s_state
1168  0245  7E          	ld	a,(hl)
1169  0246  F6 08       	or	a,0x08
1170  0248  E6 FB       	and	a,0xfb
1171  024A  77          	ld	(hl),a
1172  024B  01 07 00    	ld	bc,_state_a+7
1173  024E  0A          	ld	a, (bc)
1174  024F  F6 08       	or	a,0x08
1175  0251  E6 EF       	and	a,0xef
1176  0253  02          	ld	(bc),a
1177  0254  3A 00 00    	ld	a,(_player_onstair)
1178  0257  B7          	or	a, a
1179  0258  28 05       	jr	Z,l_player_move_input_00115
1180  025A  2E 00       	ld	l,0x00
1181  025C  CD 2B 06    	call	_player_check_stairs
1182  025F              l_player_move_input_00115:
1183  025F  CD 00 00    	call	_spr_move_horizontal
1184  0262              l_player_move_input_00117:
1185  0262  21 00 00    	ld	hl,_dirs
1186  0265  CB 46       	bit	0, (hl)
1187  0267  28 3C       	jr	Z,l_player_move_input_00129
1188  0269  2E 00       	ld	l,0x00
1189  026B  CD 2B 06    	call	_player_check_stairs
1190  026E  3A 00 00    	ld	a,(_player_onstair)
1191  0271  B7          	or	a, a
1192  0272  20 13       	jr	NZ,l_player_move_input_00121
1193  0274  2E 01       	ld	l,0x01
1194  0276  CD 2B 06    	call	_player_check_stairs
1195  0279  3A 00 00    	ld	a,(_player_onstair)
1196  027C  B7          	or	a, a
1197  027D  20 08       	jr	NZ,l_player_move_input_00121
1198  027F  3E FE       	ld	a,0xfe
1199  0281  F5          	push	af
1200  0282  33          	inc	sp
1201  0283  CD 82 05    	call	_player_check_stairs_vertical
1202  0286  33          	inc	sp
1203  0287              l_player_move_input_00121:
1204  0287  3A 00 00    	ld	a,(_player_onstair)
1205  028A  B7          	or	a, a
1206  028B  28 05       	jr	Z,l_player_move_input_00126
1207  028D  CD 00 00    	call	_spr_move_up
1208  0290  18 13       	jr	l_player_move_input_00129
1209  0292              l_player_move_input_00126:
1210  0292  21 00 00    	ld	hl,_dirs
1211  0295  CB 5E       	bit	3, (hl)
1212  0297  20 0C       	jr	NZ,l_player_move_input_00129
1213  0299  21 00 00    	ld	hl,_dirs
1214  029C  CB 56       	bit	2, (hl)
1215  029E  20 05       	jr	NZ,l_player_move_input_00129
1216  02A0  2E 00       	ld	l,0x00
1217  02A2  C3 2F 03    	jp	l_player_move_input_00151
1218  02A5              l_player_move_input_00129:
1219  02A5  21 00 00    	ld	hl,_dirs
1220  02A8  CB 4E       	bit	1, (hl)
1221  02AA  28 3B       	jr	Z,l_player_move_input_00141
1222  02AC  2E 00       	ld	l,0x00
1223  02AE  CD 2B 06    	call	_player_check_stairs
1224  02B1  3A 00 00    	ld	a,(_player_onstair)
1225  02B4  B7          	or	a, a
1226  02B5  20 13       	jr	NZ,l_player_move_input_00133
1227  02B7  2E 01       	ld	l,0x01
1228  02B9  CD 2B 06    	call	_player_check_stairs
1229  02BC  3A 00 00    	ld	a,(_player_onstair)
1230  02BF  B7          	or	a, a
1231  02C0  20 08       	jr	NZ,l_player_move_input_00133
1232  02C2  3E 12       	ld	a,0x12
1233  02C4  F5          	push	af
1234  02C5  33          	inc	sp
1235  02C6  CD 82 05    	call	_player_check_stairs_vertical
1236  02C9  33          	inc	sp
1237  02CA              l_player_move_input_00133:
1238  02CA  3A 00 00    	ld	a,(_player_onstair)
1239  02CD  B7          	or	a, a
1240  02CE  28 05       	jr	Z,l_player_move_input_00138
1241  02D0  CD 00 00    	call	_spr_move_down
1242  02D3  18 12       	jr	l_player_move_input_00141
1243  02D5              l_player_move_input_00138:
1244  02D5  21 00 00    	ld	hl,_dirs
1245  02D8  CB 5E       	bit	3, (hl)
1246  02DA  20 0B       	jr	NZ,l_player_move_input_00141
1247  02DC  21 00 00    	ld	hl,_dirs
1248  02DF  CB 56       	bit	2, (hl)
1249  02E1  20 04       	jr	NZ,l_player_move_input_00141
1250  02E3  2E 00       	ld	l,0x00
1251  02E5  18 48       	jr	l_player_move_input_00151
1252  02E7              l_player_move_input_00141:
1253  02E7  3A 00 00    	ld	a,(_s_state)
1254  02EA  32 07 00    	ld	((_state + 0x0007)),a
1255  02ED  3A 00 00    	ld	a,(_player_onstair)
1256  02F0  B7          	or	a, a
1257  02F1  28 0A       	jr	Z,l_player_move_input_00143
1258  02F3  21 72 00    	ld	hl,0x0072
1259  02F6  E5          	push	hl
1260  02F7  CD BD 06    	call	_player_tile
1261  02FA  F1          	pop	af
1262  02FB  18 08       	jr	l_player_move_input_00144
1263  02FD              l_player_move_input_00143:
1264  02FD  21 60 08    	ld	hl,0x0860
1265  0300  E5          	push	hl
1266  0301  CD BD 06    	call	_player_tile
1267  0304  F1          	pop	af
1268  0305              l_player_move_input_00144:
1269  0305  2E 01       	ld	l,0x01
1270  0307  18 26       	jr	l_player_move_input_00151
1271  0309              l_player_move_input_00149:
1272  0309  21 07 00    	ld	hl, +(_colint + 0x0007)
1273  030C  36 00       	ld	(hl),0x00
1274  030E  3A 00 00    	ld	a,(_player_onstair)
1275  0311  B7          	or	a, a
1276  0312  28 0A       	jr	Z,l_player_move_input_00146
1277  0314  21 72 00    	ld	hl,0x0072
1278  0317  E5          	push	hl
1279  0318  CD BD 06    	call	_player_tile
1280  031B  F1          	pop	af
1281  031C  18 08       	jr	l_player_move_input_00147
1282  031E              l_player_move_input_00146:
1283  031E  21 70 01    	ld	hl,0x0170
1284  0321  E5          	push	hl
1285  0322  CD BD 06    	call	_player_tile
1286  0325  F1          	pop	af
1287  0326              l_player_move_input_00147:
1288  0326  21 00 00    	ld	hl,_s_state
1289  0329  7E          	ld	a,(hl)
1290  032A  E6 F3       	and	a,+(0xf7&0xfb)
1291  032C  77          	ld	(hl),a
1292  032D  2E 00       	ld	l,0x00
1293  032F              l_player_move_input_00151:
1294  032F  C9          	ret
1295  0330              	SECTION code_compiler
1296  0330              ;	---------------------------------
1297  0330              ; Function player_fix_walk_lin
1298  0330              ; ---------------------------------
1299  0330              _player_fix_walk_lin:
1300  0330  3A 00 00    	ld	a,(_player_onstair)
1301  0333  B7          	or	a, a
1302  0334  C0          	ret	NZ
1303  0335  01 07 00    	ld	bc,_lin+7
1304  0338  3A 00 00    	ld	a,(_s_lin0)
1305  033B  07          	rlca
1306  033C  07          	rlca
1307  033D  07          	rlca
1308  033E  07          	rlca
1309  033F  E6 0F       	and	a,0x0f
1310  0341  07          	rlca
1311  0342  07          	rlca
1312  0343  07          	rlca
1313  0344  07          	rlca
1314  0345  E6 F0       	and	a,0xf0
1315  0347  02          	ld	(bc), a
1316  0348  C9          	ret
1317  0349              	SECTION code_compiler
1318  0349              ;	---------------------------------
1319  0349              ; Function player_fire
1320  0349              ; ---------------------------------
1321  0349              _player_fire:
1322  0349  CD 00 00    	call	___sdcc_enter_ix
1323  034C  3B          	dec	sp
1324  034D  3A 00 00    	ld	a,(_game_2buttons)
1325  0350  B7          	or	a, a
1326  0351  28 0A       	jr	Z,l_player_fire_00102
1327  0353  3A 00 00    	ld	a,(_dirs_alt)
1328  0356  E6 80       	and	a,0x80
1329  0358  32 00 00    	ld	(_player_onfire),a
1330  035B  18 1A       	jr	l_player_fire_00103
1331  035D              l_player_fire_00102:
1332  035D  21 00 00    	ld	hl,_dirs
1333  0360  7E          	ld	a, (hl)
1334  0361  CB 07       	rlc	a
1335  0363  E6 01       	and	a,0x01
1336  0365  CB 47       	bit	0, a
1337  0367  28 04       	jr	Z,l_player_fire_00119
1338  0369  CB 46       	bit	0, (hl)
1339  036B  28 04       	jr	Z,l_player_fire_00120
1340  036D              l_player_fire_00119:
1341  036D  0E 00       	ld	c,0x00
1342  036F  18 02       	jr	l_player_fire_00121
1343  0371              l_player_fire_00120:
1344  0371  0E 01       	ld	c,0x01
1345  0373              l_player_fire_00121:
1346  0373  21 00 00    	ld	hl,_player_onfire
1347  0376  71          	ld	(hl), c
1348  0377              l_player_fire_00103:
1349  0377  3A 00 00    	ld	a,(_player_onfire)
1350  037A  B7          	or	a, a
1351  037B  28 53       	jr	Z,l_player_fire_00116
1352  037D  3A 07 00    	ld	a,(_tile + 0x0007)
1353  0380  FE 70       	cp	a,0x70
1354  0382  28 04       	jr	Z,l_player_fire_00104
1355  0384  D6 71       	sub	a,0x71
1356  0386  20 0D       	jr	NZ,l_player_fire_00105
1357  0388              l_player_fire_00104:
1358  0388  21 60 08    	ld	hl,0x0860
1359  038B  E5          	push	hl
1360  038C  CD BD 06    	call	_player_tile
1361  038F  F1          	pop	af
1362  0390  21 07 00    	ld	hl, +(_colint + 0x0007)
1363  0393  36 00       	ld	(hl),0x00
1364  0395              l_player_fire_00105:
1365  0395  21 00 00    	ld	hl,_player_mana
1366  0398  7E          	ld	a, (hl)
1367  0399  B7          	or	a, a
1368  039A  28 30       	jr	Z,l_player_fire_00113
1369  039C  3A 07 00    	ld	a,(_bullet_col + 0x0007)
1370  039F  3C          	inc	a
1371  03A0  20 2A       	jr	NZ,l_player_fire_00113
1372  03A2  3E 05       	ld	a,0x05
1373  03A4  96          	sub	a, (hl)
1374  03A5  30 0F       	jr	NC,l_player_fire_00110
1375  03A7  3A 00 00    	ld	a,(_game_god_mode)
1376  03AA  B7          	or	a, a
1377  03AB  20 0E       	jr	NZ,l_player_fire_00111
1378  03AD  21 00 00    	ld	hl,_player_mana
1379  03B0  7E          	ld	a, (hl)
1380  03B1  C6 FB       	add	a,0xfb
1381  03B3  77          	ld	(hl), a
1382  03B4  18 05       	jr	l_player_fire_00111
1383  03B6              l_player_fire_00110:
1384  03B6  21 00 00    	ld	hl,_player_mana
1385  03B9  36 00       	ld	(hl),0x00
1386  03BB              l_player_fire_00111:
1387  03BB  CD 00 00    	call	_game_update_stats
1388  03BE  21 00 00    	ld	hl,_ay_effect_05
1389  03C1  CD 00 00    	call	_ay_fx_play
1390  03C4  21 07 78    	ld	hl,0x7807
1391  03C7  E5          	push	hl
1392  03C8  CD 00 00    	call	_game_shoot_fire
1393  03CB  F1          	pop	af
1394  03CC              l_player_fire_00113:
1395  03CC  2E 01       	ld	l,0x01
1396  03CE  18 02       	jr	l_player_fire_00117
1397  03D0              l_player_fire_00116:
1398  03D0  2E 00       	ld	l,0x00
1399  03D2              l_player_fire_00117:
1400  03D2  33          	inc	sp
1401  03D3  DD E1       	pop	ix
1402  03D5  C9          	ret
1403  03D6              	SECTION code_compiler
1404  03D6              ;	---------------------------------
1405  03D6              ; Function player_collision
1406  03D6              ; ---------------------------------
1407  03D6              _player_collision:
1408  03D6  21 19 00    	ld	hl,0x0019
1409  03D9  E5          	push	hl
1410  03DA  2A 00 00    	ld	hl,(_player_hit_time)
1411  03DD  E5          	push	hl
1412  03DE  CD 00 00    	call	_game_check_time
1413  03E1  F1          	pop	af
1414  03E2  F1          	pop	af
1415  03E3  7D          	ld	a,l
1416  03E4  B7          	or	a,a
1417  03E5  CA 2E 05    	jp	Z, l_player_collision_00132
1418  03E8  21 00 00    	ld	hl,_sprite
1419  03EB  36 00       	ld	(hl),0x00
1420  03ED  3A 07 00    	ld	a,(_col + 7)
1421  03F0  32 00 00    	ld	(_s_col1),a
1422  03F3  3A 07 00    	ld	a,(_lin + 7)
1423  03F6  32 00 00    	ld	(_s_lin1),a
1424  03F9  C6 08       	add	a,0x08
1425  03FB  4F          	ld	c, a
1426  03FC  3A 00 00    	ld	a, (_s_col1)
1427  03FF  47          	ld	b,a
1428  0400  C5          	push	bc
1429  0401  CD 00 00    	call	_spr_calc_index
1430  0404  F1          	pop	af
1431  0405  7D          	ld	a,l
1432  0406  32 00 00    	ld	(_sprite_curr_index),a
1433  0409  4F          	ld	c,a
1434  040A  06 00       	ld	b,0x00
1435  040C  21 00 00    	ld	hl,_scr_map
1436  040F  09          	add	hl,bc
1437  0410  4E          	ld	c, (hl)
1438  0411  3E 2F       	ld	a,0x2f
1439  0413  91          	sub	a, c
1440  0414  30 3C       	jr	NC,l_player_collision_00128
1441  0416  79          	ld	a,c
1442  0417  FE 3A       	cp	a,0x3a
1443  0419  30 37       	jr	NC,l_player_collision_00128
1444  041B  D6 39       	sub	a,0x39
1445  041D  20 07       	jr	NZ,l_player_collision_00107
1446  041F  21 00 00    	ld	hl,_game_worldup
1447  0422  36 01       	ld	(hl),0x01
1448  0424  18 2C       	jr	l_player_collision_00128
1449  0426              l_player_collision_00107:
1450  0426  3A 00 00    	ld	a,(_game_god_mode)
1451  0429  B7          	or	a, a
1452  042A  20 16       	jr	NZ,l_player_collision_00102
1453  042C  3A 00 00    	ld	a,(_game_inmune)
1454  042F  B7          	or	a, a
1455  0430  20 10       	jr	NZ,l_player_collision_00102
1456  0432  3E 82       	ld	a,0x82
1457  0434  21 00 00    	ld	hl,_s_lin1
1458  0437  96          	sub	a, (hl)
1459  0438  30 08       	jr	NC,l_player_collision_00102
1460  043A  CD 30 10    	call	_player_lost_life
1461  043D  2E 00       	ld	l,0x00
1462  043F  C3 30 05    	jp	l_player_collision_00133
1463  0442              l_player_collision_00102:
1464  0442  21 00 00    	ld	hl,_ay_effect_06
1465  0445  CD 00 00    	call	_ay_fx_play
1466  0448  2E 06       	ld	l,0x06
1467  044A  CD 00 00    	call	_zx_border_fastcall
1468  044D  2E 32       	ld	l,0x32
1469  044F  CD A0 11    	call	_player_hit
1470  0452              l_player_collision_00128:
1471  0452  21 00 00    	ld	hl,_sprite
1472  0455  7E          	ld	a, (hl)
1473  0456  D6 07       	sub	a,0x07
1474  0458  D2 2E 05    	jp	NC, l_player_collision_00132
1475  045B  3E 00       	ld	a, +((_class) & 0xFF)
1476  045D  86          	add	a, (hl)
1477  045E  4F          	ld	c, a
1478  045F  3E 00       	ld	a, +((_class) / 256)
1479  0461  CE 00       	adc	a,0x00
1480  0463  47          	ld	b, a
1481  0464  0A          	ld	a, (bc)
1482  0465  B7          	or	a, a
1483  0466  CA 27 05    	jp	Z, l_player_collision_00127
1484  0469  4E          	ld	c,(hl)
1485  046A  06 00       	ld	b,0x00
1486  046C  21 00 00    	ld	hl,_col
1487  046F  09          	add	hl,bc
1488  0470  4E          	ld	c, (hl)
1489  0471  06 00       	ld	b,0x00
1490  0473  3A 00 00    	ld	a,(_s_col1)
1491  0476  5F          	ld	e,a
1492  0477  16 00       	ld	d,0x00
1493  0479  79          	ld	a, c
1494  047A  93          	sub	a, e
1495  047B  6F          	ld	l, a
1496  047C  78          	ld	a, b
1497  047D  9A          	sbc	a, d
1498  047E  67          	ld	h, a
1499  047F  CD 00 00    	call	_abs_fastcall
1500  0482  7D          	ld	a,l
1501  0483  D6 02       	sub	a,0x02
1502  0485  7C          	ld	a,h
1503  0486  17          	rla
1504  0487  3F          	ccf
1505  0488  1F          	rra
1506  0489  DE 80       	sbc	a,0x80
1507  048B  D2 27 05    	jp	NC, l_player_collision_00127
1508  048E  2A 00 00    	ld	hl,(_sprite)
1509  0491  26 00       	ld	h,0x00
1510  0493  01 00 00    	ld	bc,_lin
1511  0496  09          	add	hl,bc
1512  0497  4E          	ld	c,(hl)
1513  0498  06 00       	ld	b,0x00
1514  049A  3A 00 00    	ld	a,(_s_lin1)
1515  049D  5F          	ld	e,a
1516  049E  16 00       	ld	d,0x00
1517  04A0  79          	ld	a, c
1518  04A1  93          	sub	a, e
1519  04A2  6F          	ld	l, a
1520  04A3  78          	ld	a, b
1521  04A4  9A          	sbc	a, d
1522  04A5  67          	ld	h, a
1523  04A6  CD 00 00    	call	_abs_fastcall
1524  04A9  7D          	ld	a,l
1525  04AA  D6 0E       	sub	a,0x0e
1526  04AC  7C          	ld	a,h
1527  04AD  17          	rla
1528  04AE  3F          	ccf
1529  04AF  1F          	rra
1530  04B0  DE 80       	sbc	a,0x80
1531  04B2  30 73       	jr	NC,l_player_collision_00127
1532  04B4  2A 00 00    	ld	hl,(_sprite)
1533  04B7  26 00       	ld	h,0x00
1534  04B9  01 00 00    	ld	bc,_class
1535  04BC  09          	add	hl,bc
1536  04BD  7E          	ld	a,(hl)
1537  04BE  FE 06       	cp	a,0x06
1538  04C0  28 05       	jr	Z,l_player_collision_00206
1539  04C2  21 00 00    	ld	hl,_sprite
1540  04C5  18 1D       	jr	l_player_collision_00115
1541  04C7              l_player_collision_00206:
1542  04C7  21 00 00    	ld	hl,_player_vita
1543  04CA  7E          	ld	a, (hl)
1544  04CB  C6 19       	add	a,0x19
1545  04CD  77          	ld	(hl), a
1546  04CE  3A 00 00    	ld	a,(_player_max_vita)
1547  04D1  21 00 00    	ld	hl,_player_vita
1548  04D4  96          	sub	a, (hl)
1549  04D5  30 06       	jr	NC,l_player_collision_00113
1550  04D7  3A 00 00    	ld	a,(_player_max_vita)
1551  04DA  32 00 00    	ld	(_player_vita),a
1552  04DD              l_player_collision_00113:
1553  04DD  CD 31 05    	call	_player_pick_mushroom
1554  04E0  2E 00       	ld	l,0x00
1555  04E2  18 4C       	jr	l_player_collision_00133
1556  04E4              l_player_collision_00115:
1557  04E4  FE 07       	cp	a,0x07
1558  04E6  20 1D       	jr	NZ,l_player_collision_00119
1559  04E8  21 00 00    	ld	hl,_player_mana
1560  04EB  7E          	ld	a, (hl)
1561  04EC  C6 19       	add	a,0x19
1562  04EE  77          	ld	(hl), a
1563  04EF  3A 00 00    	ld	a,(_player_max_mana)
1564  04F2  21 00 00    	ld	hl,_player_mana
1565  04F5  96          	sub	a, (hl)
1566  04F6  30 06       	jr	NC,l_player_collision_00117
1567  04F8  3A 00 00    	ld	a,(_player_max_mana)
1568  04FB  32 00 00    	ld	(_player_mana),a
1569  04FE              l_player_collision_00117:
1570  04FE  CD 31 05    	call	_player_pick_mushroom
1571  0501  2E 00       	ld	l,0x00
1572  0503  18 2B       	jr	l_player_collision_00133
1573  0505              l_player_collision_00119:
1574  0505  D6 08       	sub	a,0x08
1575  0507  20 0A       	jr	NZ,l_player_collision_00121
1576  0509  CD 4B 05    	call	_player_1up
1577  050C  CD 31 05    	call	_player_pick_mushroom
1578  050F  2E 00       	ld	l,0x00
1579  0511  18 1D       	jr	l_player_collision_00133
1580  0513              l_player_collision_00121:
1581  0513  21 00 00    	ld	hl,_ay_effect_06
1582  0516  CD 00 00    	call	_ay_fx_play
1583  0519  2E 02       	ld	l,0x02
1584  051B  CD 00 00    	call	_zx_border_fastcall
1585  051E  2E 14       	ld	l,0x14
1586  0520  CD A0 11    	call	_player_hit
1587  0523  2E 01       	ld	l,0x01
1588  0525  18 09       	jr	l_player_collision_00133
1589  0527              l_player_collision_00127:
1590  0527  21 00 00    	ld	hl,_sprite
1591  052A  34          	inc	(hl)
1592  052B  C3 52 04    	jp	l_player_collision_00128
1593  052E              l_player_collision_00132:
1594  052E  2E 00       	ld	l,0x00
1595  0530              l_player_collision_00133:
1596  0530  C9          	ret
1597  0531              	SECTION code_compiler
1598  0531              ;	---------------------------------
1599  0531              ; Function player_pick_mushroom
1600  0531              ; ---------------------------------
1601  0531              _player_pick_mushroom:
1602  0531  21 00 00    	ld	hl,_ay_effect_12
1603  0534  CD 00 00    	call	_ay_fx_play
1604  0537  21 01 00    	ld	hl,0x0001
1605  053A  CD DE 0B    	call	_player_score_add
1606  053D  CD 00 00    	call	_game_update_stats
1607  0540  2A 00 00    	ld	hl,(_sprite)
1608  0543  CD 00 00    	call	_spr_destroy
1609  0546  21 00 00    	ld	hl,_game_mush_count
1610  0549  35          	dec	(hl)
1611  054A  C9          	ret
1612  054B              	SECTION code_compiler
1613  054B              ;	---------------------------------
1614  054B              ; Function player_1up
1615  054B              ; ---------------------------------
1616  054B              _player_1up:
1617  054B  21 00 00    	ld	hl,_player_lives
1618  054E  7E          	ld	a, (hl)
1619  054F  D6 FF       	sub	a,0xff
1620  0551  D0          	ret	NC
1621  0552  34          	inc	(hl)
1622  0553  CD 00 00    	call	_spr_flatten
1623  0556  21 00 00    	ld	hl,___str_0
1624  0559  E5          	push	hl
1625  055A  21 0C 0C    	ld	hl,0x0c0c
1626  055D  E5          	push	hl
1627  055E  CD 00 00    	call	_zx_print_str
1628  0561  AF          	xor	a, a
1629  0562  F5          	push	af
1630  0563  33          	inc	sp
1631  0564  21 19 00    	ld	hl,0x0019
1632  0567  E5          	push	hl
1633  0568  21 0C 15    	ld	hl,0x150c
1634  056B  E5          	push	hl
1635  056C  3E 0C       	ld	a,0x0c
1636  056E  F5          	push	af
1637  056F  33          	inc	sp
1638  0570  CD 00 00    	call	_game_colour_message
1639  0573  F1          	pop	af
1640  0574  F1          	pop	af
1641  0575  F1          	pop	af
1642  0576  CD 00 00    	call	_game_update_stats
1643  0579  21 00 00    	ld	hl,_sprite
1644  057C  36 07       	ld	(hl),0x07
1645  057E  CD 00 00    	call	_spr_redraw
1646  0581  C9          	ret
1647  0582              	SECTION rodata_compiler
1648  0000              ___str_0:
1649  0000  31 20 55 50 21 
                        	DEFM "1 UP!"
1650  0005  00          	DEFB 0x00
1651  0006              	SECTION code_compiler
1652  0582              ;	---------------------------------
1653  0582              ; Function player_check_stairs_vertical
1654  0582              ; ---------------------------------
1655  0582              _player_check_stairs_vertical:
1656  0582  CD 00 00    	call	___sdcc_enter_ix
1657  0585  3B          	dec	sp
1658  0586  21 07 00    	ld	hl,+(_col + 0x0007)
1659  0589  4E          	ld	c, (hl)
1660  058A  CB 41       	bit	0, c
1661  058C  20 2F       	jr	NZ,l_player_check_stairs_vertical_00102
1662  058E  3A 07 00    	ld	a,(_lin + 0x0007)
1663  0591  DD 86 04    	add	a,(ix+4)
1664  0594  47          	ld	b, a
1665  0595  79          	ld	a, c
1666  0596  48          	ld	c,b
1667  0597  47          	ld	b,a
1668  0598  C5          	push	bc
1669  0599  CD 00 00    	call	_spr_calc_index
1670  059C  F1          	pop	af
1671  059D  7D          	ld	a,l
1672  059E  32 00 00    	ld	(_sprite_curr_index),a
1673  05A1  4F          	ld	c,a
1674  05A2  06 00       	ld	b,0x00
1675  05A4  21 00 00    	ld	hl,_scr_map
1676  05A7  09          	add	hl,bc
1677  05A8  7E          	ld	a,(hl)
1678  05A9  4F          	ld	c,a
1679  05AA  D6 44       	sub	a,0x44
1680  05AC  38 05       	jr	C,l_player_check_stairs_vertical_00110
1681  05AE  3E 47       	ld	a,0x47
1682  05B0  91          	sub	a, c
1683  05B1  30 04       	jr	NC,l_player_check_stairs_vertical_00111
1684  05B3              l_player_check_stairs_vertical_00110:
1685  05B3  1E 00       	ld	e,0x00
1686  05B5  18 02       	jr	l_player_check_stairs_vertical_00112
1687  05B7              l_player_check_stairs_vertical_00111:
1688  05B7  1E 01       	ld	e,0x01
1689  05B9              l_player_check_stairs_vertical_00112:
1690  05B9  0E 00       	ld	c,0x00
1691  05BB  18 57       	jr	l_player_check_stairs_vertical_00103
1692  05BD              l_player_check_stairs_vertical_00102:
1693  05BD  79          	ld	a, c
1694  05BE  DD 96 04    	sub	a,(ix+4)
1695  05C1  57          	ld	d, a
1696  05C2  01 07 00    	ld	bc,_lin+7
1697  05C5  0A          	ld	a, (bc)
1698  05C6  DD 86 04    	add	a,(ix+4)
1699  05C9  C5          	push	bc
1700  05CA  5F          	ld	e,a
1701  05CB  D5          	push	de
1702  05CC  CD 00 00    	call	_spr_calc_index
1703  05CF  F1          	pop	af
1704  05D0  C1          	pop	bc
1705  05D1  7D          	ld	a,l
1706  05D2  32 00 00    	ld	(_sprite_curr_index),a
1707  05D5  5F          	ld	e,a
1708  05D6  16 00       	ld	d,0x00
1709  05D8  21 00 00    	ld	hl,_scr_map
1710  05DB  19          	add	hl,de
1711  05DC  7E          	ld	a,(hl)
1712  05DD  5F          	ld	e,a
1713  05DE  D6 44       	sub	a,0x44
1714  05E0  38 05       	jr	C,l_player_check_stairs_vertical_00113
1715  05E2  3E 47       	ld	a,0x47
1716  05E4  93          	sub	a, e
1717  05E5  30 04       	jr	NC,l_player_check_stairs_vertical_00114
1718  05E7              l_player_check_stairs_vertical_00113:
1719  05E7  1E 00       	ld	e,0x00
1720  05E9  18 02       	jr	l_player_check_stairs_vertical_00115
1721  05EB              l_player_check_stairs_vertical_00114:
1722  05EB  1E 01       	ld	e,0x01
1723  05ED              l_player_check_stairs_vertical_00115:
1724  05ED  3A 07 00    	ld	a,(_col + 0x0007)
1725  05F0  DD 96 04    	sub	a,(ix+4)
1726  05F3  57          	ld	d, a
1727  05F4  0A          	ld	a, (bc)
1728  05F5  DD 86 04    	add	a,(ix+4)
1729  05F8  D5          	push	de
1730  05F9  5F          	ld	e,a
1731  05FA  D5          	push	de
1732  05FB  CD 00 00    	call	_spr_calc_index
1733  05FE  F1          	pop	af
1734  05FF  D1          	pop	de
1735  0600  7D          	ld	a,l
1736  0601  32 00 00    	ld	(_sprite_curr_index),a
1737  0604  7B          	ld	a, e
1738  0605  D6 44       	sub	a,0x44
1739  0607  38 05       	jr	C,l_player_check_stairs_vertical_00116
1740  0609  3E 47       	ld	a,0x47
1741  060B  93          	sub	a, e
1742  060C  30 04       	jr	NC,l_player_check_stairs_vertical_00117
1743  060E              l_player_check_stairs_vertical_00116:
1744  060E  0E 00       	ld	c,0x00
1745  0610  18 02       	jr	l_player_check_stairs_vertical_00118
1746  0612              l_player_check_stairs_vertical_00117:
1747  0612  0E 01       	ld	c,0x01
1748  0614              l_player_check_stairs_vertical_00118:
1749  0614              l_player_check_stairs_vertical_00103:
1750  0614  7B          	ld	a, e
1751  0615  B7          	or	a,a
1752  0616  20 03       	jr	NZ,l_player_check_stairs_vertical_00104
1753  0618  B1          	or	a,c
1754  0619  28 07       	jr	Z,l_player_check_stairs_vertical_00105
1755  061B              l_player_check_stairs_vertical_00104:
1756  061B  21 00 00    	ld	hl,_player_onstair
1757  061E  36 01       	ld	(hl),0x01
1758  0620  18 05       	jr	l_player_check_stairs_vertical_00108
1759  0622              l_player_check_stairs_vertical_00105:
1760  0622  21 00 00    	ld	hl,_player_onstair
1761  0625  36 00       	ld	(hl),0x00
1762  0627              l_player_check_stairs_vertical_00108:
1763  0627  33          	inc	sp
1764  0628  DD E1       	pop	ix
1765  062A  C9          	ret
1766  062B              	SECTION code_compiler
1767  062B              ;	---------------------------------
1768  062B              ; Function player_check_stairs
1769  062B              ; ---------------------------------
1770  062B              _player_check_stairs:
1771  062B  CD 00 00    	call	___sdcc_enter_ix
1772  062E  3B          	dec	sp
1773  062F  5D          	ld	e, l
1774  0630  3A 07 00    	ld	a,(_col + 0x0007)
1775  0633  83          	add	a, e
1776  0634  4F          	ld	c, a
1777  0635  21 07 00    	ld	hl,+(_lin + 0x0007)
1778  0638  46          	ld	b, (hl)
1779  0639  D5          	push	de
1780  063A  79          	ld	a, c
1781  063B  48          	ld	c,b
1782  063C  47          	ld	b,a
1783  063D  C5          	push	bc
1784  063E  CD 00 00    	call	_spr_calc_index
1785  0641  F1          	pop	af
1786  0642  D1          	pop	de
1787  0643  7D          	ld	a,l
1788  0644  32 00 00    	ld	(_sprite_curr_index),a
1789  0647  4F          	ld	c,a
1790  0648  06 00       	ld	b,0x00
1791  064A  21 00 00    	ld	hl,_scr_map
1792  064D  09          	add	hl,bc
1793  064E  7E          	ld	a,(hl)
1794  064F  4F          	ld	c,a
1795  0650  D6 44       	sub	a,0x44
1796  0652  38 05       	jr	C,l_player_check_stairs_00111
1797  0654  3E 47       	ld	a,0x47
1798  0656  91          	sub	a, c
1799  0657  30 04       	jr	NC,l_player_check_stairs_00112
1800  0659              l_player_check_stairs_00111:
1801  0659  0E 00       	ld	c,0x00
1802  065B  18 02       	jr	l_player_check_stairs_00113
1803  065D              l_player_check_stairs_00112:
1804  065D  0E 01       	ld	c,0x01
1805  065F              l_player_check_stairs_00113:
1806  065F  3A 07 00    	ld	a,(_col + 0x0007)
1807  0662  83          	add	a, e
1808  0663  57          	ld	d, a
1809  0664  3A 07 00    	ld	a,(_lin + 0x0007)
1810  0667  C6 0F       	add	a,0x0f
1811  0669  47          	ld	b, a
1812  066A  C5          	push	bc
1813  066B  58          	ld	e,b
1814  066C  D5          	push	de
1815  066D  CD 00 00    	call	_spr_calc_index
1816  0670  F1          	pop	af
1817  0671  C1          	pop	bc
1818  0672  7D          	ld	a,l
1819  0673  32 00 00    	ld	(_sprite_curr_index),a
1820  0676  5F          	ld	e,a
1821  0677  16 00       	ld	d,0x00
1822  0679  21 00 00    	ld	hl,_scr_map
1823  067C  19          	add	hl,de
1824  067D  7E          	ld	a,(hl)
1825  067E  47          	ld	b,a
1826  067F  D6 44       	sub	a,0x44
1827  0681  38 05       	jr	C,l_player_check_stairs_00114
1828  0683  3E 47       	ld	a,0x47
1829  0685  90          	sub	a, b
1830  0686  30 04       	jr	NC,l_player_check_stairs_00115
1831  0688              l_player_check_stairs_00114:
1832  0688  06 00       	ld	b,0x00
1833  068A  18 02       	jr	l_player_check_stairs_00116
1834  068C              l_player_check_stairs_00115:
1835  068C  06 01       	ld	b,0x01
1836  068E              l_player_check_stairs_00116:
1837  068E  79          	ld	a, c
1838  068F  B7          	or	a,a
1839  0690  20 03       	jr	NZ,l_player_check_stairs_00105
1840  0692  B0          	or	a,b
1841  0693  28 13       	jr	Z,l_player_check_stairs_00106
1842  0695              l_player_check_stairs_00105:
1843  0695  21 00 00    	ld	hl,_player_onstair
1844  0698  7E          	ld	a, (hl)
1845  0699  B7          	or	a, a
1846  069A  20 1D       	jr	NZ,l_player_check_stairs_00109
1847  069C  36 01       	ld	(hl),0x01
1848  069E  21 72 00    	ld	hl,0x0072
1849  06A1  E5          	push	hl
1850  06A2  CD BD 06    	call	_player_tile
1851  06A5  F1          	pop	af
1852  06A6  18 11       	jr	l_player_check_stairs_00109
1853  06A8              l_player_check_stairs_00106:
1854  06A8  21 00 00    	ld	hl,_player_onstair
1855  06AB  7E          	ld	a, (hl)
1856  06AC  B7          	or	a, a
1857  06AD  28 0A       	jr	Z,l_player_check_stairs_00109
1858  06AF  36 00       	ld	(hl),0x00
1859  06B1  21 60 08    	ld	hl,0x0860
1860  06B4  E5          	push	hl
1861  06B5  CD BD 06    	call	_player_tile
1862  06B8  F1          	pop	af
1863  06B9              l_player_check_stairs_00109:
1864  06B9  33          	inc	sp
1865  06BA  DD E1       	pop	ix
1866  06BC  C9          	ret
1867  06BD              	SECTION code_compiler
1868  06BD              ;	---------------------------------
1869  06BD              ; Function player_tile
1870  06BD              ; ---------------------------------
1871  06BD              _player_tile:
1872  06BD  CD 00 00    	call	___sdcc_enter_ix
1873  06C0  DD 7E 05    	ld	a,(ix+5)
1874  06C3  F5          	push	af
1875  06C4  33          	inc	sp
1876  06C5  2A FF FF    	ld	hl,(_sprite-1)
1877  06C8  DD 6E 04    	ld	l,(ix+4)
1878  06CB  E5          	push	hl
1879  06CC  CD 00 00    	call	_spr_tile_dir
1880  06CF  F1          	pop	af
1881  06D0  33          	inc	sp
1882  06D1  7D          	ld	a,l
1883  06D2  32 07 00    	ld	((_tile + 0x0007)),a
1884  06D5  DD E1       	pop	ix
1885  06D7  C9          	ret
1886  06D8              	SECTION code_compiler
1887  06D8              ;	---------------------------------
1888  06D8              ; Function player_check_map
1889  06D8              ; ---------------------------------
1890  06D8              _player_check_map:
1891  06D8  21 07 00    	ld	hl,+(_col + 0x0007)
1892  06DB  46          	ld	b, (hl)
1893  06DC  21 07 00    	ld	hl,+(_lin + 0x0007)
1894  06DF  4E          	ld	c, (hl)
1895  06E0  C5          	push	bc
1896  06E1  CD 00 00    	call	_spr_calc_index
1897  06E4  F1          	pop	af
1898  06E5  7D          	ld	a,l
1899  06E6  32 00 00    	ld	(_sprite_curr_index),a
1900  06E9  21 07 00    	ld	hl,+(_col + 0x0007)
1901  06EC  4E          	ld	c, (hl)
1902  06ED  3A 07 00    	ld	a,(_lin + 0x0007)
1903  06F0  E6 0F       	and	a,0x0f
1904  06F2  CB 41       	bit	0, c
1905  06F4  20 17       	jr	NZ,l_player_check_map_00108
1906  06F6  B7          	or	a, a
1907  06F7  20 05       	jr	NZ,l_player_check_map_00102
1908  06F9  CD 38 07    	call	_player_pick_item
1909  06FC  18 39       	jr	l_player_check_map_00110
1910  06FE              l_player_check_map_00102:
1911  06FE  CD 38 07    	call	_player_pick_item
1912  0701  21 00 00    	ld	hl,_sprite_curr_index
1913  0704  7E          	ld	a, (hl)
1914  0705  C6 10       	add	a,0x10
1915  0707  77          	ld	(hl), a
1916  0708  CD 38 07    	call	_player_pick_item
1917  070B  18 2A       	jr	l_player_check_map_00110
1918  070D              l_player_check_map_00108:
1919  070D  B7          	or	a, a
1920  070E  20 0C       	jr	NZ,l_player_check_map_00105
1921  0710  CD 38 07    	call	_player_pick_item
1922  0713  21 00 00    	ld	hl,_sprite_curr_index
1923  0716  34          	inc	(hl)
1924  0717  CD 38 07    	call	_player_pick_item
1925  071A  18 1B       	jr	l_player_check_map_00110
1926  071C              l_player_check_map_00105:
1927  071C  CD 38 07    	call	_player_pick_item
1928  071F  21 00 00    	ld	hl,_sprite_curr_index
1929  0722  34          	inc	(hl)
1930  0723  CD 38 07    	call	_player_pick_item
1931  0726  21 00 00    	ld	hl,_sprite_curr_index
1932  0729  7E          	ld	a, (hl)
1933  072A  C6 0F       	add	a,0x0f
1934  072C  77          	ld	(hl), a
1935  072D  CD 38 07    	call	_player_pick_item
1936  0730  21 00 00    	ld	hl,_sprite_curr_index
1937  0733  34          	inc	(hl)
1938  0734  CD 38 07    	call	_player_pick_item
1939  0737              l_player_check_map_00110:
1940  0737  C9          	ret
1941  0738              	SECTION code_compiler
1942  0738              ;	---------------------------------
1943  0738              ; Function player_pick_item
1944  0738              ; ---------------------------------
1945  0738              _player_pick_item:
1946  0738  CD 00 00    	call	___sdcc_enter_ix
1947  073B  3B          	dec	sp
1948  073C  2A 00 00    	ld	hl,(_sprite_curr_index)
1949  073F  26 00       	ld	h,0x00
1950  0741  01 00 00    	ld	bc,_scr_map
1951  0744  09          	add	hl,bc
1952  0745  7E          	ld	a,(hl)
1953  0746  DD 77 FF    	ld	(ix-1),a
1954  0749  D6 24       	sub	a,0x24
1955  074B  DA 05 09    	jp	C, l_player_pick_item_00131
1956  074E  3E 2F       	ld	a,0x2f
1957  0750  DD 96 FF    	sub	a,(ix-1)
1958  0753  DA 05 09    	jp	C, l_player_pick_item_00131
1959  0756  CD 00 00    	call	_ay_reset
1960  0759  2A 00 00    	ld	hl,(_sprite_curr_index)
1961  075C  26 00       	ld	h,0x00
1962  075E  01 00 00    	ld	bc,_scr_map
1963  0761  09          	add	hl,bc
1964  0762  3A 00 00    	ld	a,(_sprite_curr_index)
1965  0765  5F          	ld	e,a
1966  0766  16 00       	ld	d,0x00
1967  0768  E5          	push	hl
1968  0769  D5          	push	de
1969  076A  CD 00 00    	call	_game_match_back
1970  076D  F1          	pop	af
1971  076E  C1          	pop	bc
1972  076F  7D          	ld	a,l
1973  0770  02          	ld	(bc), a
1974  0771  2A 00 00    	ld	hl,(_sprite_curr_index)
1975  0774  26 00       	ld	h,0x00
1976  0776  CD 00 00    	call	_game_obj_set
1977  0779  3A 00 00    	ld	a,(_sprite_curr_index)
1978  077C  07          	rlca
1979  077D  07          	rlca
1980  077E  07          	rlca
1981  077F  07          	rlca
1982  0780  E6 0F       	and	a,0x0f
1983  0782  07          	rlca
1984  0783  07          	rlca
1985  0784  07          	rlca
1986  0785  07          	rlca
1987  0786  E6 F0       	and	a,0xf0
1988  0788  32 00 00    	ld	(_s_lin1),a
1989  078B  3A 00 00    	ld	a,(_sprite_curr_index)
1990  078E  E6 0F       	and	a,0x0f
1991  0790  87          	add	a, a
1992  0791  32 00 00    	ld	(_s_col1),a
1993  0794  21 00 00    	ld	hl,0x0000
1994  0797  E5          	push	hl
1995  0798  21 84 03    	ld	hl,0x0384
1996  079B  E5          	push	hl
1997  079C  F5          	push	af
1998  079D  33          	inc	sp
1999  079E  3A 00 00    	ld	a,(_s_lin1)
2000  07A1  F5          	push	af
2001  07A2  33          	inc	sp
2002  07A3  CD 00 00    	call	_spr_add_anim
2003  07A6  F1          	pop	af
2004  07A7  F1          	pop	af
2005  07A8  F1          	pop	af
2006  07A9  DD 7E FF    	ld	a,(ix-1)
2007  07AC  D6 24       	sub	a,0x24
2008  07AE  DA 05 09    	jp	C, l_player_pick_item_00131
2009  07B1  3E 2F       	ld	a,0x2f
2010  07B3  DD 96 FF    	sub	a,(ix-1)
2011  07B6  DA 05 09    	jp	C, l_player_pick_item_00131
2012  07B9  DD 7E FF    	ld	a,(ix-1)
2013  07BC  C6 DC       	add	a,0xdc
2014  07BE  4F          	ld	c, a
2015  07BF  06 00       	ld	b,0x00
2016  07C1  21 C8 07    	ld	hl,l_player_pick_item_00177
2017  07C4  09          	add	hl, bc
2018  07C5  09          	add	hl, bc
2019  07C6  09          	add	hl, bc
2020  07C7  E9          	jp	(hl)
2021  07C8              l_player_pick_item_00177:
2022  07C8  C3 EC 07    	jp	l_player_pick_item_00101
2023  07CB  C3 FD 07    	jp	l_player_pick_item_00102
2024  07CE  C3 0E 08    	jp	l_player_pick_item_00103
2025  07D1  C3 1F 08    	jp	l_player_pick_item_00104
2026  07D4  C3 30 08    	jp	l_player_pick_item_00105
2027  07D7  C3 63 08    	jp	l_player_pick_item_00109
2028  07DA  C3 80 08    	jp	l_player_pick_item_00112
2029  07DD  C3 9B 08    	jp	l_player_pick_item_00115
2030  07E0  C3 B6 08    	jp	l_player_pick_item_00118
2031  07E3  C3 D1 08    	jp	l_player_pick_item_00121
2032  07E6  C3 EC 08    	jp	l_player_pick_item_00124
2033  07E9  C3 54 08    	jp	l_player_pick_item_00108
2034  07EC              l_player_pick_item_00101:
2035  07EC  21 00 00    	ld	hl,_ay_effect_09
2036  07EF  CD 00 00    	call	_ay_fx_play
2037  07F2  21 00 00    	ld	hl,_player_keys
2038  07F5  36 01       	ld	(hl),0x01
2039  07F7  CD 00 00    	call	_game_update_stats
2040  07FA  C3 05 09    	jp	l_player_pick_item_00131
2041  07FD              l_player_pick_item_00102:
2042  07FD  21 00 00    	ld	hl,_ay_effect_09
2043  0800  CD 00 00    	call	_ay_fx_play
2044  0803  21 01 00    	ld	hl, +(_player_keys + 0x0001)
2045  0806  36 01       	ld	(hl),0x01
2046  0808  CD 00 00    	call	_game_update_stats
2047  080B  C3 05 09    	jp	l_player_pick_item_00131
2048  080E              l_player_pick_item_00103:
2049  080E  21 00 00    	ld	hl,_ay_effect_09
2050  0811  CD 00 00    	call	_ay_fx_play
2051  0814  21 02 00    	ld	hl, +(_player_keys + 0x0002)
2052  0817  36 01       	ld	(hl),0x01
2053  0819  CD 00 00    	call	_game_update_stats
2054  081C  C3 05 09    	jp	l_player_pick_item_00131
2055  081F              l_player_pick_item_00104:
2056  081F  21 00 00    	ld	hl,_ay_effect_09
2057  0822  CD 00 00    	call	_ay_fx_play
2058  0825  21 03 00    	ld	hl, +(_player_keys + 0x0003)
2059  0828  36 01       	ld	(hl),0x01
2060  082A  CD 00 00    	call	_game_update_stats
2061  082D  C3 05 09    	jp	l_player_pick_item_00131
2062  0830              l_player_pick_item_00105:
2063  0830  21 00 00    	ld	hl,_ay_effect_10
2064  0833  CD 00 00    	call	_ay_fx_play
2065  0836  21 01 00    	ld	hl,0x0001
2066  0839  CD DE 0B    	call	_player_score_add
2067  083C  21 00 00    	ld	hl,_player_coins
2068  083F  7E          	ld	a,(hl)
2069  0840  3C          	inc	a
2070  0841  77          	ld	(hl),a
2071  0842  D6 64       	sub	a,0x64
2072  0844  20 08       	jr	NZ,l_player_pick_item_00107
2073  0846  CD 4B 05    	call	_player_1up
2074  0849  21 00 00    	ld	hl,_player_coins
2075  084C  36 00       	ld	(hl),0x00
2076  084E              l_player_pick_item_00107:
2077  084E  CD 00 00    	call	_game_update_stats
2078  0851  C3 05 09    	jp	l_player_pick_item_00131
2079  0854              l_player_pick_item_00108:
2080  0854  21 00 00    	ld	hl,_ay_effect_10
2081  0857  CD 00 00    	call	_ay_fx_play
2082  085A  21 0A 00    	ld	hl,0x000a
2083  085D  CD DE 0B    	call	_player_score_add
2084  0860  C3 05 09    	jp	l_player_pick_item_00131
2085  0863              l_player_pick_item_00109:
2086  0863  21 00 00    	ld	hl,_ay_effect_09
2087  0866  CD 00 00    	call	_ay_fx_play
2088  0869  21 00 00    	ld	hl,_player_str
2089  086C  34          	inc	(hl)
2090  086D  21 00 00    	ld	hl,_player_max_vita
2091  0870  7E          	ld	a, (hl)
2092  0871  D6 C8       	sub	a,0xc8
2093  0873  D2 05 09    	jp	NC, l_player_pick_item_00131
2094  0876  7E          	ld	a, (hl)
2095  0877  C6 0A       	add	a,0x0a
2096  0879  77          	ld	(hl), a
2097  087A  CD 00 00    	call	_game_update_stats
2098  087D  C3 05 09    	jp	l_player_pick_item_00131
2099  0880              l_player_pick_item_00112:
2100  0880  21 00 00    	ld	hl,_ay_effect_09
2101  0883  CD 00 00    	call	_ay_fx_play
2102  0886  21 00 00    	ld	hl,_player_str
2103  0889  34          	inc	(hl)
2104  088A  21 00 00    	ld	hl,_player_max_vita
2105  088D  7E          	ld	a, (hl)
2106  088E  D6 C8       	sub	a,0xc8
2107  0890  30 73       	jr	NC,l_player_pick_item_00131
2108  0892  7E          	ld	a, (hl)
2109  0893  C6 0A       	add	a,0x0a
2110  0895  77          	ld	(hl), a
2111  0896  CD 00 00    	call	_game_update_stats
2112  0899  18 6A       	jr	l_player_pick_item_00131
2113  089B              l_player_pick_item_00115:
2114  089B  21 00 00    	ld	hl,_ay_effect_09
2115  089E  CD 00 00    	call	_ay_fx_play
2116  08A1  21 00 00    	ld	hl,_player_str
2117  08A4  34          	inc	(hl)
2118  08A5  21 00 00    	ld	hl,_player_max_vita
2119  08A8  7E          	ld	a, (hl)
2120  08A9  D6 C8       	sub	a,0xc8
2121  08AB  30 58       	jr	NC,l_player_pick_item_00131
2122  08AD  7E          	ld	a, (hl)
2123  08AE  C6 0A       	add	a,0x0a
2124  08B0  77          	ld	(hl), a
2125  08B1  CD 00 00    	call	_game_update_stats
2126  08B4  18 4F       	jr	l_player_pick_item_00131
2127  08B6              l_player_pick_item_00118:
2128  08B6  21 00 00    	ld	hl,_ay_effect_09
2129  08B9  CD 00 00    	call	_ay_fx_play
2130  08BC  21 00 00    	ld	hl,_player_int
2131  08BF  34          	inc	(hl)
2132  08C0  21 00 00    	ld	hl,_player_max_mana
2133  08C3  7E          	ld	a, (hl)
2134  08C4  D6 C8       	sub	a,0xc8
2135  08C6  30 3D       	jr	NC,l_player_pick_item_00131
2136  08C8  7E          	ld	a, (hl)
2137  08C9  C6 0A       	add	a,0x0a
2138  08CB  77          	ld	(hl), a
2139  08CC  CD 00 00    	call	_game_update_stats
2140  08CF  18 34       	jr	l_player_pick_item_00131
2141  08D1              l_player_pick_item_00121:
2142  08D1  21 00 00    	ld	hl,_ay_effect_09
2143  08D4  CD 00 00    	call	_ay_fx_play
2144  08D7  21 00 00    	ld	hl,_player_int
2145  08DA  34          	inc	(hl)
2146  08DB  21 00 00    	ld	hl,_player_max_mana
2147  08DE  7E          	ld	a, (hl)
2148  08DF  D6 C8       	sub	a,0xc8
2149  08E1  30 22       	jr	NC,l_player_pick_item_00131
2150  08E3  7E          	ld	a, (hl)
2151  08E4  C6 0A       	add	a,0x0a
2152  08E6  77          	ld	(hl), a
2153  08E7  CD 00 00    	call	_game_update_stats
2154  08EA  18 19       	jr	l_player_pick_item_00131
2155  08EC              l_player_pick_item_00124:
2156  08EC  21 00 00    	ld	hl,_ay_effect_09
2157  08EF  CD 00 00    	call	_ay_fx_play
2158  08F2  21 00 00    	ld	hl,_player_int
2159  08F5  34          	inc	(hl)
2160  08F6  21 00 00    	ld	hl,_player_max_mana
2161  08F9  7E          	ld	a, (hl)
2162  08FA  D6 C8       	sub	a,0xc8
2163  08FC  30 07       	jr	NC,l_player_pick_item_00131
2164  08FE  7E          	ld	a, (hl)
2165  08FF  C6 0A       	add	a,0x0a
2166  0901  77          	ld	(hl), a
2167  0902  CD 00 00    	call	_game_update_stats
2168  0905              l_player_pick_item_00131:
2169  0905  33          	inc	sp
2170  0906  DD E1       	pop	ix
2171  0908  C9          	ret
2172  0909              	SECTION code_compiler
2173  0909              ;	---------------------------------
2174  0909              ; Function player_hit_platform
2175  0909              ; ---------------------------------
2176  0909              _player_hit_platform:
2177  0909  CD 00 00    	call	___sdcc_enter_ix
2178  090C  F5          	push	af
2179  090D  3A 00 00    	ld	a,(_player_hit_lin)
2180  0910  B7          	or	a, a
2181  0911  C2 A9 0B    	jp	NZ, l_player_hit_platform_00145
2182  0914  21 07 00    	ld	hl,+(_lin + 0x0007)
2183  0917  4E          	ld	c, (hl)
2184  0918  3E 10       	ld	a,0x10
2185  091A  91          	sub	a, c
2186  091B  D2 A9 0B    	jp	NC, l_player_hit_platform_00145
2187  091E  01 00 00    	ld	bc,_scr_map
2188  0921  2A 00 00    	ld	hl,(_index1)
2189  0924  09          	add	hl,bc
2190  0925  7E          	ld	a,(hl)
2191  0926  D6 45       	sub	a,0x45
2192  0928  DA A9 0B    	jp	C, l_player_hit_platform_00145
2193  092B  2A 00 00    	ld	hl,(_curr_time)
2194  092E  22 0E 00    	ld	(_spr_timer + 0x000e),hl
2195  0931  2A 07 00    	ld	hl,(_lin + 0x0007)
2196  0934  26 00       	ld	h,0x00
2197  0936  01 F8 FF    	ld	bc,0xfff8
2198  0939  09          	add	hl,bc
2199  093A  EB          	ex	de,hl
2200  093B  06 04       	ld	b,0x04
2201  093D              l_player_hit_platform_00250:
2202  093D  CB 2A       	sra	d
2203  093F  CB 1B       	rr	e
2204  0941  10 FA       	djnz	l_player_hit_platform_00250
2205  0943  7B          	ld	a, e
2206  0944  07          	rlca
2207  0945  07          	rlca
2208  0946  07          	rlca
2209  0947  07          	rlca
2210  0948  E6 F0       	and	a,0xf0
2211  094A  C6 08       	add	a,0x08
2212  094C  32 00 00    	ld	(_player_hit_lin),a
2213  094F  21 07 00    	ld	hl,+(_col + 0x0007)
2214  0952  4E          	ld	c, (hl)
2215  0953  CB 41       	bit	0, c
2216  0955  20 06       	jr	NZ,l_player_hit_platform_00111
2217  0957  21 00 00    	ld	hl,_player_hit_col
2218  095A  71          	ld	(hl), c
2219  095B  18 2D       	jr	l_player_hit_platform_00112
2220  095D              l_player_hit_platform_00111:
2221  095D  21 07 00    	ld	hl,+(_state + 0x0007)
2222  0960  5E          	ld	e, (hl)
2223  0961  41          	ld	b, c
2224  0962  04          	inc	b
2225  0963  0D          	dec	c
2226  0964  CB 5B       	bit	3, e
2227  0966  28 12       	jr	Z,l_player_hit_platform_00108
2228  0968  3A 00 00    	ld	a,(_g_player_hit_right)
2229  096B  B7          	or	a, a
2230  096C  28 06       	jr	Z,l_player_hit_platform_00102
2231  096E  21 00 00    	ld	hl,_player_hit_col
2232  0971  70          	ld	(hl), b
2233  0972  18 16       	jr	l_player_hit_platform_00112
2234  0974              l_player_hit_platform_00102:
2235  0974  21 00 00    	ld	hl,_player_hit_col
2236  0977  71          	ld	(hl), c
2237  0978  18 10       	jr	l_player_hit_platform_00112
2238  097A              l_player_hit_platform_00108:
2239  097A  3A 00 00    	ld	a,(_g_player_hit_left)
2240  097D  B7          	or	a, a
2241  097E  28 06       	jr	Z,l_player_hit_platform_00105
2242  0980  21 00 00    	ld	hl,_player_hit_col
2243  0983  71          	ld	(hl), c
2244  0984  18 04       	jr	l_player_hit_platform_00112
2245  0986              l_player_hit_platform_00105:
2246  0986  21 00 00    	ld	hl,_player_hit_col
2247  0989  70          	ld	(hl), b
2248  098A              l_player_hit_platform_00112:
2249  098A  2A 00 00    	ld	hl,(_index1)
2250  098D  01 00 00    	ld	bc,_scr_map
2251  0990  09          	add	hl,bc
2252  0991  7E          	ld	a,(hl)
2253  0992  FE 4D       	cp	a,0x4d
2254  0994  20 43       	jr	NZ,l_player_hit_platform_00114
2255  0996  E5          	push	hl
2256  0997  2A 00 00    	ld	hl,(_index1)
2257  099A  E5          	push	hl
2258  099B  CD 00 00    	call	_game_match_back
2259  099E  F1          	pop	af
2260  099F  C1          	pop	bc
2261  09A0  7D          	ld	a,l
2262  09A1  02          	ld	(bc), a
2263  09A2  2A 00 00    	ld	hl,(_index1)
2264  09A5  CD 00 00    	call	_game_obj_set
2265  09A8  21 00 00    	ld	hl,_index1
2266  09AB  7E          	ld	a, (hl)
2267  09AC  E6 0F       	and	a,0x0f
2268  09AE  87          	add	a, a
2269  09AF  4F          	ld	c, a
2270  09B0  23          	inc	hl
2271  09B1  56          	ld	d,(hl)
2272  09B2  2B          	dec	hl
2273  09B3  7E          	ld	a, (hl)
2274  09B4  06 04       	ld	b,0x04
2275  09B6              l_player_hit_platform_00256:
2276  09B6  CB 3A       	srl	d
2277  09B8  1F          	rra
2278  09B9  10 FB       	djnz	l_player_hit_platform_00256
2279  09BB  07          	rlca
2280  09BC  07          	rlca
2281  09BD  07          	rlca
2282  09BE  07          	rlca
2283  09BF  E6 F0       	and	a,0xf0
2284  09C1  47          	ld	b, a
2285  09C2  21 00 00    	ld	hl,0x0000
2286  09C5  E5          	push	hl
2287  09C6  21 87 03    	ld	hl,0x0387
2288  09C9  E5          	push	hl
2289  09CA  79          	ld	a, c
2290  09CB  48          	ld	c,b
2291  09CC  47          	ld	b,a
2292  09CD  C5          	push	bc
2293  09CE  CD 00 00    	call	_spr_add_anim
2294  09D1  F1          	pop	af
2295  09D2  F1          	pop	af
2296  09D3  F1          	pop	af
2297  09D4  2E 01       	ld	l,0x01
2298  09D6  C3 AB 0B    	jp	l_player_hit_platform_00148
2299  09D9              l_player_hit_platform_00114:
2300  09D9  FE 5C       	cp	a,0x5c
2301  09DB  28 05       	jr	Z,l_player_hit_platform_00141
2302  09DD  D6 5D       	sub	a,0x5d
2303  09DF  C2 9A 0B    	jp	NZ,l_player_hit_platform_00142
2304  09E2              l_player_hit_platform_00141:
2305  09E2  21 00 00    	ld	hl,_tmp0
2306  09E5  36 00       	ld	(hl),0x00
2307  09E7  3A 00 00    	ld	a,(_game_boss)
2308  09EA  B7          	or	a, a
2309  09EB  28 0B       	jr	Z,l_player_hit_platform_00174
2310  09ED  3A 00 00    	ld	a,(_game_mush_count)
2311  09F0  B7          	or	a, a
2312  09F1  28 05       	jr	Z,l_player_hit_platform_00174
2313  09F3  2E 00       	ld	l,0x00
2314  09F5  C3 AB 0B    	jp	l_player_hit_platform_00148
2315  09F8              l_player_hit_platform_00174:
2316  09F8              l_player_hit_platform_00138:
2317  09F8  21 00 00    	ld	hl,_tmp0
2318  09FB  7E          	ld	a, (hl)
2319  09FC  D6 07       	sub	a,0x07
2320  09FE  D2 9A 0B    	jp	NC, l_player_hit_platform_00142
2321  0A01  4E          	ld	c,(hl)
2322  0A02  06 00       	ld	b,0x00
2323  0A04  21 00 00    	ld	hl,_mush_index
2324  0A07  09          	add	hl,bc
2325  0A08  4E          	ld	c, (hl)
2326  0A09  06 00       	ld	b,0x00
2327  0A0B  2A 00 00    	ld	hl,(_index1)
2328  0A0E  AF          	xor	a,a
2329  0A0F  ED 42       	sbc	hl,bc
2330  0A11  C2 93 0B    	jp	NZ,l_player_hit_platform_00137
2331  0A14  3A 07 00    	ld	a,(_lin + 0x0007)
2332  0A17  07          	rlca
2333  0A18  07          	rlca
2334  0A19  07          	rlca
2335  0A1A  07          	rlca
2336  0A1B  E6 0F       	and	a,0x0f
2337  0A1D  07          	rlca
2338  0A1E  07          	rlca
2339  0A1F  07          	rlca
2340  0A20  07          	rlca
2341  0A21  E6 F0       	and	a,0xf0
2342  0A23  C6 E0       	add	a,0xe0
2343  0A25  32 00 00    	ld	(_s_lin1),a
2344  0A28  3A 07 00    	ld	a,(_col + 0x0007)
2345  0A2B  CB 3F       	srl	a
2346  0A2D  87          	add	a, a
2347  0A2E  32 00 00    	ld	(_s_col1),a
2348  0A31  21 00 00    	ld	hl,_tmp
2349  0A34  36 00       	ld	(hl),0x00
2350  0A36              l_player_hit_platform_00120:
2351  0A36  21 00 00    	ld	hl,_tmp
2352  0A39  7E          	ld	a, (hl)
2353  0A3A  D6 07       	sub	a,0x07
2354  0A3C  30 1C       	jr	NC,l_player_hit_platform_00122
2355  0A3E  4E          	ld	c,(hl)
2356  0A3F  06 00       	ld	b,0x00
2357  0A41  21 00 00    	ld	hl,_mush_index
2358  0A44  09          	add	hl,bc
2359  0A45  4E          	ld	c, (hl)
2360  0A46  06 00       	ld	b,0x00
2361  0A48  21 00 00    	ld	hl,_index1
2362  0A4B  7E          	ld	a, (hl)
2363  0A4C  91          	sub	a, c
2364  0A4D  20 05       	jr	NZ,l_player_hit_platform_00262
2365  0A4F  23          	inc	hl
2366  0A50  7E          	ld	a, (hl)
2367  0A51  90          	sub	a, b
2368  0A52  28 06       	jr	Z,l_player_hit_platform_00122
2369  0A54              l_player_hit_platform_00262:
2370  0A54  21 00 00    	ld	hl,_tmp
2371  0A57  34          	inc	(hl)
2372  0A58  18 DC       	jr	l_player_hit_platform_00120
2373  0A5A              l_player_hit_platform_00122:
2374  0A5A  21 00 00    	ld	hl,_ay_effect_07
2375  0A5D  CD 00 00    	call	_ay_fx_play
2376  0A60  2A 00 00    	ld	hl,(_tmp)
2377  0A63  26 00       	ld	h,0x00
2378  0A65  01 00 00    	ld	bc,_mush_class
2379  0A68  09          	add	hl,bc
2380  0A69  7E          	ld	a,(hl)
2381  0A6A  FE 78       	cp	a,0x78
2382  0A6C  28 18       	jr	Z,l_player_hit_platform_00123
2383  0A6E  FE 79       	cp	a,0x79
2384  0A70  28 2F       	jr	Z,l_player_hit_platform_00124
2385  0A72  FE 7A       	cp	a,0x7a
2386  0A74  28 5F       	jr	Z,l_player_hit_platform_00126
2387  0A76  FE 7B       	cp	a,0x7b
2388  0A78  28 41       	jr	Z,l_player_hit_platform_00125
2389  0A7A  FE 7C       	cp	a,0x7c
2390  0A7C  CA 09 0B    	jp	Z,l_player_hit_platform_00128
2391  0A7F  D6 7D       	sub	a,0x7d
2392  0A81  28 6C       	jr	Z,l_player_hit_platform_00127
2393  0A83  C3 21 0B    	jp	l_player_hit_platform_00129
2394  0A86              l_player_hit_platform_00123:
2395  0A86  2E 02       	ld	l,0x02
2396  0A88  CD 00 00    	call	_zx_border_fastcall
2397  0A8B  3A 00 00    	ld	a,(_s_col1)
2398  0A8E  21 06 FF    	ld	hl,0xff06
2399  0A91  E5          	push	hl
2400  0A92  F5          	push	af
2401  0A93  33          	inc	sp
2402  0A94  3A 00 00    	ld	a,(_s_lin1)
2403  0A97  F5          	push	af
2404  0A98  33          	inc	sp
2405  0A99  CD 00 00    	call	_enemy_init
2406  0A9C  F1          	pop	af
2407  0A9D  F1          	pop	af
2408  0A9E  C3 21 0B    	jp	l_player_hit_platform_00129
2409  0AA1              l_player_hit_platform_00124:
2410  0AA1  2E 02       	ld	l,0x02
2411  0AA3  CD 00 00    	call	_zx_border_fastcall
2412  0AA6  3A 00 00    	ld	a,(_s_col1)
2413  0AA9  21 06 01    	ld	hl,0x0106
2414  0AAC  E5          	push	hl
2415  0AAD  F5          	push	af
2416  0AAE  33          	inc	sp
2417  0AAF  3A 00 00    	ld	a,(_s_lin1)
2418  0AB2  F5          	push	af
2419  0AB3  33          	inc	sp
2420  0AB4  CD 00 00    	call	_enemy_init
2421  0AB7  F1          	pop	af
2422  0AB8  F1          	pop	af
2423  0AB9  18 66       	jr	l_player_hit_platform_00129
2424  0ABB              l_player_hit_platform_00125:
2425  0ABB  2E 01       	ld	l,0x01
2426  0ABD  CD 00 00    	call	_zx_border_fastcall
2427  0AC0  3A 00 00    	ld	a,(_s_col1)
2428  0AC3  21 07 01    	ld	hl,0x0107
2429  0AC6  E5          	push	hl
2430  0AC7  F5          	push	af
2431  0AC8  33          	inc	sp
2432  0AC9  3A 00 00    	ld	a,(_s_lin1)
2433  0ACC  F5          	push	af
2434  0ACD  33          	inc	sp
2435  0ACE  CD 00 00    	call	_enemy_init
2436  0AD1  F1          	pop	af
2437  0AD2  F1          	pop	af
2438  0AD3  18 4C       	jr	l_player_hit_platform_00129
2439  0AD5              l_player_hit_platform_00126:
2440  0AD5  2E 01       	ld	l,0x01
2441  0AD7  CD 00 00    	call	_zx_border_fastcall
2442  0ADA  3A 00 00    	ld	a,(_s_col1)
2443  0ADD  21 07 FF    	ld	hl,0xff07
2444  0AE0  E5          	push	hl
2445  0AE1  F5          	push	af
2446  0AE2  33          	inc	sp
2447  0AE3  3A 00 00    	ld	a,(_s_lin1)
2448  0AE6  F5          	push	af
2449  0AE7  33          	inc	sp
2450  0AE8  CD 00 00    	call	_enemy_init
2451  0AEB  F1          	pop	af
2452  0AEC  F1          	pop	af
2453  0AED  18 32       	jr	l_player_hit_platform_00129
2454  0AEF              l_player_hit_platform_00127:
2455  0AEF  2E 04       	ld	l,0x04
2456  0AF1  CD 00 00    	call	_zx_border_fastcall
2457  0AF4  3A 00 00    	ld	a,(_s_col1)
2458  0AF7  21 08 01    	ld	hl,0x0108
2459  0AFA  E5          	push	hl
2460  0AFB  F5          	push	af
2461  0AFC  33          	inc	sp
2462  0AFD  3A 00 00    	ld	a,(_s_lin1)
2463  0B00  F5          	push	af
2464  0B01  33          	inc	sp
2465  0B02  CD 00 00    	call	_enemy_init
2466  0B05  F1          	pop	af
2467  0B06  F1          	pop	af
2468  0B07  18 18       	jr	l_player_hit_platform_00129
2469  0B09              l_player_hit_platform_00128:
2470  0B09  2E 04       	ld	l,0x04
2471  0B0B  CD 00 00    	call	_zx_border_fastcall
2472  0B0E  3A 00 00    	ld	a,(_s_col1)
2473  0B11  21 08 FF    	ld	hl,0xff08
2474  0B14  E5          	push	hl
2475  0B15  F5          	push	af
2476  0B16  33          	inc	sp
2477  0B17  3A 00 00    	ld	a,(_s_lin1)
2478  0B1A  F5          	push	af
2479  0B1B  33          	inc	sp
2480  0B1C  CD 00 00    	call	_enemy_init
2481  0B1F  F1          	pop	af
2482  0B20  F1          	pop	af
2483  0B21              l_player_hit_platform_00129:
2484  0B21  21 00 00    	ld	hl,_game_mush_count
2485  0B24  34          	inc	(hl)
2486  0B25  3A 00 00    	ld	a,(_game_boss)
2487  0B28  B7          	or	a, a
2488  0B29  20 68       	jr	NZ,l_player_hit_platform_00137
2489  0B2B  3A 00 00    	ld	a,(_index1)
2490  0B2E  C6 F0       	add	a,0xf0
2491  0B30  32 00 00    	ld	(_index0),a
2492  0B33  3A 01 00    	ld	a,(_index1 + 1)
2493  0B36  CE FF       	adc	a,0xff
2494  0B38  21 01 00    	ld	hl,_index0 + 1
2495  0B3B  77          	ld	(hl), a
2496  0B3C  3E 00       	ld	a, +((_scr_map) & 0xFF)
2497  0B3E  2B          	dec	hl
2498  0B3F  86          	add	a, (hl)
2499  0B40  4F          	ld	c, a
2500  0B41  3E 00       	ld	a, +((_scr_map) / 256)
2501  0B43  23          	inc	hl
2502  0B44  8E          	adc	a, (hl)
2503  0B45  47          	ld	b, a
2504  0B46  C5          	push	bc
2505  0B47  46          	ld	b,(hl)
2506  0B48  2B          	dec	hl
2507  0B49  4E          	ld	c,(hl)
2508  0B4A  C5          	push	bc
2509  0B4B  CD 00 00    	call	_game_match_back
2510  0B4E  F1          	pop	af
2511  0B4F  C1          	pop	bc
2512  0B50  7D          	ld	a,l
2513  0B51  02          	ld	(bc), a
2514  0B52  3E 00       	ld	a, +((_scr_map) & 0xFF)
2515  0B54  21 00 00    	ld	hl,_index1
2516  0B57  86          	add	a, (hl)
2517  0B58  DD 77 FE    	ld	(ix-2),a
2518  0B5B  3E 00       	ld	a, +((_scr_map) / 256)
2519  0B5D  23          	inc	hl
2520  0B5E  8E          	adc	a, (hl)
2521  0B5F  DD 77 FF    	ld	(ix-1),a
2522  0B62  E1          	pop	hl
2523  0B63  7E          	ld	a,(hl)
2524  0B64  E5          	push	hl
2525  0B65  FE 5C       	cp	a,0x5c
2526  0B67  28 04       	jr	Z,l_player_hit_platform_00130
2527  0B69  D6 5D       	sub	a,0x5d
2528  0B6B  20 06       	jr	NZ,l_player_hit_platform_00131
2529  0B6D              l_player_hit_platform_00130:
2530  0B6D  E1          	pop	hl
2531  0B6E  E5          	push	hl
2532  0B6F  36 4F       	ld	(hl),0x4f
2533  0B71  18 04       	jr	l_player_hit_platform_00132
2534  0B73              l_player_hit_platform_00131:
2535  0B73  E1          	pop	hl
2536  0B74  E5          	push	hl
2537  0B75  36 54       	ld	(hl),0x54
2538  0B77              l_player_hit_platform_00132:
2539  0B77  2A 00 00    	ld	hl,(_index1)
2540  0B7A  01 F0 FF    	ld	bc,0xfff0
2541  0B7D  09          	add	hl,bc
2542  0B7E  CD 00 00    	call	_game_obj_set
2543  0B81  3A 00 00    	ld	a,(_s_lin1)
2544  0B84  C6 10       	add	a,0x10
2545  0B86  4F          	ld	c, a
2546  0B87  3A 00 00    	ld	a, (_s_col1)
2547  0B8A  47          	ld	b,a
2548  0B8B  C5          	push	bc
2549  0B8C  3E 4F       	ld	a,0x4f
2550  0B8E  F5          	push	af
2551  0B8F  33          	inc	sp
2552  0B90  CD 00 00    	call	_NIRVANAP_drawT_callee
2553  0B93              l_player_hit_platform_00137:
2554  0B93  21 00 00    	ld	hl,_tmp0
2555  0B96  34          	inc	(hl)
2556  0B97  C3 F8 09    	jp	l_player_hit_platform_00138
2557  0B9A              l_player_hit_platform_00142:
2558  0B9A  21 00 00    	ld	hl,_ay_effect_02
2559  0B9D  CD 00 00    	call	_ay_fx_play
2560  0BA0  2E 01       	ld	l,0x01
2561  0BA2  CD 00 00    	call	_spr_brick_anim
2562  0BA5  2E 01       	ld	l,0x01
2563  0BA7  18 02       	jr	l_player_hit_platform_00148
2564  0BA9              l_player_hit_platform_00145:
2565  0BA9  2E 00       	ld	l,0x00
2566  0BAB              l_player_hit_platform_00148:
2567  0BAB  F1          	pop	af
2568  0BAC  DD E1       	pop	ix
2569  0BAE  C9          	ret
2570  0BAF              	SECTION code_compiler
2571  0BAF              ;	---------------------------------
2572  0BAF              ; Function player_hit_platform_clear
2573  0BAF              ; ---------------------------------
2574  0BAF              _player_hit_platform_clear:
2575  0BAF  01 04 00    	ld	bc,0x0004
2576  0BB2  C5          	push	bc
2577  0BB3  2A 0E 00    	ld	hl,(_spr_timer + 0x000e)
2578  0BB6  E5          	push	hl
2579  0BB7  CD 00 00    	call	_game_check_time
2580  0BBA  F1          	pop	af
2581  0BBB  F1          	pop	af
2582  0BBC  7D          	ld	a, l
2583  0BBD  B7          	or	a, a
2584  0BBE  C8          	ret	Z
2585  0BBF  2A FF FF    	ld	hl,(_player_hit_col - 1)
2586  0BC2  3A 00 00    	ld	a,(_player_hit_lin)
2587  0BC5  6F          	ld	l,a
2588  0BC6  E5          	push	hl
2589  0BC7  CD 00 00    	call	_spr_calc_index
2590  0BCA  F1          	pop	af
2591  0BCB  22 00 00    	ld	(_index1),hl
2592  0BCE  2E 00       	ld	l,0x00
2593  0BD0  CD 00 00    	call	_spr_brick_anim
2594  0BD3  21 00 00    	ld	hl,_player_hit_lin
2595  0BD6  36 00       	ld	(hl),0x00
2596  0BD8  21 00 00    	ld	hl,_player_hit_col
2597  0BDB  36 00       	ld	(hl),0x00
2598  0BDD  C9          	ret
2599  0BDE              	SECTION code_compiler
2600  0BDE              ;	---------------------------------
2601  0BDE              ; Function player_score_add
2602  0BDE              ; ---------------------------------
2603  0BDE              _player_score_add:
2604  0BDE  ED 4B 00 00 	ld	bc,(_player_score)
2605  0BE2  09          	add	hl,bc
2606  0BE3  22 00 00    	ld	(_player_score),hl
2607  0BE6  21 00 00    	ld	hl,_player_lvl
2608  0BE9  7E          	ld	a, (hl)
2609  0BEA  D6 14       	sub	a,0x14
2610  0BEC  30 47       	jr	NC,l_player_score_add_00104
2611  0BEE  01 00 00    	ld	bc,_player_lvl_table+0
2612  0BF1  6E          	ld	l,(hl)
2613  0BF2  26 00       	ld	h,0x00
2614  0BF4  29          	add	hl, hl
2615  0BF5  09          	add	hl, bc
2616  0BF6  4E          	ld	c, (hl)
2617  0BF7  23          	inc	hl
2618  0BF8  46          	ld	b, (hl)
2619  0BF9  21 00 00    	ld	hl,_player_score
2620  0BFC  7E          	ld	a, (hl)
2621  0BFD  91          	sub	a, c
2622  0BFE  23          	inc	hl
2623  0BFF  7E          	ld	a, (hl)
2624  0C00  98          	sbc	a, b
2625  0C01  38 32       	jr	C,l_player_score_add_00104
2626  0C03  21 00 00    	ld	hl,_player_lvl
2627  0C06  34          	inc	(hl)
2628  0C07  CD 00 00    	call	_game_update_stats
2629  0C0A  CD 00 00    	call	_spr_flatten
2630  0C0D  21 06 00    	ld	hl,___str_1
2631  0C10  E5          	push	hl
2632  0C11  21 0C 0C    	ld	hl,0x0c0c
2633  0C14  E5          	push	hl
2634  0C15  CD 00 00    	call	_zx_print_str
2635  0C18  AF          	xor	a, a
2636  0C19  F5          	push	af
2637  0C1A  33          	inc	sp
2638  0C1B  21 3C 00    	ld	hl,0x003c
2639  0C1E  E5          	push	hl
2640  0C1F  21 0C 15    	ld	hl,0x150c
2641  0C22  E5          	push	hl
2642  0C23  3E 0C       	ld	a,0x0c
2643  0C25  F5          	push	af
2644  0C26  33          	inc	sp
2645  0C27  CD 00 00    	call	_game_colour_message
2646  0C2A  F1          	pop	af
2647  0C2B  F1          	pop	af
2648  0C2C  F1          	pop	af
2649  0C2D  21 00 00    	ld	hl,_sprite
2650  0C30  36 07       	ld	(hl),0x07
2651  0C32  CD 00 00    	call	_spr_redraw
2652  0C35              l_player_score_add_00104:
2653  0C35  3A 00 00    	ld	a,(_game_score_top)
2654  0C38  21 00 00    	ld	hl,_player_score
2655  0C3B  96          	sub	a, (hl)
2656  0C3C  3A 01 00    	ld	a,(_game_score_top + 1)
2657  0C3F  23          	inc	hl
2658  0C40  9E          	sbc	a, (hl)
2659  0C41  30 06       	jr	NC,l_player_score_add_00106
2660  0C43  2A 00 00    	ld	hl,(_player_score)
2661  0C46  22 00 00    	ld	(_game_score_top),hl
2662  0C49              l_player_score_add_00106:
2663  0C49  CD 00 00    	call	_game_print_score
2664  0C4C  C9          	ret
2665  0C4D              	SECTION rodata_compiler
2666  0006              ___str_1:
2667  0006  4C 45 56 45 4C 20 55 50 21 
                        	DEFM "LEVEL UP!"
2668  000F  00          	DEFB 0x00
2669  0010              	SECTION code_compiler
2670  0C4D              ;	---------------------------------
2671  0C4D              ; Function player_check_floor
2672  0C4D              ; ---------------------------------
2673  0C4D              _player_check_floor:
2674  0C4D  CD 00 00    	call	___sdcc_enter_ix
2675  0C50  F5          	push	af
2676  0C51  F5          	push	af
2677  0C52  F5          	push	af
2678  0C53  11 07 00    	ld	de,_col+7
2679  0C56  1A          	ld	a, (de)
2680  0C57  47          	ld	b, a
2681  0C58  3A 07 00    	ld	a,(_lin + 0x0007)
2682  0C5B  C6 10       	add	a,0x10
2683  0C5D  D5          	push	de
2684  0C5E  4F          	ld	c,a
2685  0C5F  C5          	push	bc
2686  0C60  CD 00 00    	call	_spr_calc_index
2687  0C63  F1          	pop	af
2688  0C64  D1          	pop	de
2689  0C65  DD 75 FC    	ld	(ix-4),l
2690  0C68  DD 74 FD    	ld	(ix-3),h
2691  0C6B  01 00 00    	ld	bc,_scr_map+0
2692  0C6E  79          	ld	a, c
2693  0C6F  DD 86 FC    	add	a,(ix-4)
2694  0C72  DD 77 FE    	ld	(ix-2),a
2695  0C75  78          	ld	a, b
2696  0C76  DD 8E FD    	adc	a,(ix-3)
2697  0C79  DD 6E FE    	ld	l,(ix-2)
2698  0C7C  DD 77 FF    	ld	(ix-1),a
2699  0C7F  67          	ld	h,a
2700  0C80  7E          	ld	a, (hl)
2701  0C81  DD 77 FB    	ld	(ix-5),a
2702  0C84  DD 6E FC    	ld	l,(ix-4)
2703  0C87  DD 66 FD    	ld	h,(ix-3)
2704  0C8A  23          	inc	hl
2705  0C8B  09          	add	hl,bc
2706  0C8C  3A 00 00    	ld	a,(_s_lin0)
2707  0C8F  D6 90       	sub	a,0x90
2708  0C91  4D          	ld	c,l
2709  0C92  44          	ld	b,h
2710  0C93  20 26       	jr	NZ,l_player_check_floor_00108
2711  0C95  3A 00 00    	ld	a,(_map_heigth)
2712  0C98  C5          	push	bc
2713  0C99  F5          	push	af
2714  0C9A  33          	inc	sp
2715  0C9B  3A 00 00    	ld	a,(_scr_curr)
2716  0C9E  F5          	push	af
2717  0C9F  33          	inc	sp
2718  0CA0  CD 00 00    	call	__divuchar_callee
2719  0CA3  C1          	pop	bc
2720  0CA4  7D          	ld	a,l
2721  0CA5  3C          	inc	a
2722  0CA6  32 00 00    	ld	(_tmp1),a
2723  0CA9  21 00 00    	ld	hl,_map_heigth
2724  0CAC  96          	sub	a, (hl)
2725  0CAD  30 06       	jr	NC,l_player_check_floor_00102
2726  0CAF  DD 36 FB 00 	ld	(ix-5),0x00
2727  0CB3  18 14       	jr	l_player_check_floor_00109
2728  0CB5              l_player_check_floor_00102:
2729  0CB5  DD 36 FB 48 	ld	(ix-5),0x48
2730  0CB9  18 0E       	jr	l_player_check_floor_00109
2731  0CBB              l_player_check_floor_00108:
2732  0CBB  1A          	ld	a, (de)
2733  0CBC  0F          	rrca
2734  0CBD  38 06       	jr	C,l_player_check_floor_00105
2735  0CBF  DD 36 FA 00 	ld	(ix-6),0x00
2736  0CC3  18 04       	jr	l_player_check_floor_00109
2737  0CC5              l_player_check_floor_00105:
2738  0CC5  0A          	ld	a, (bc)
2739  0CC6  DD 77 FA    	ld	(ix-6),a
2740  0CC9              l_player_check_floor_00109:
2741  0CC9  DD 7E FB    	ld	a,(ix-5)
2742  0CCC  D6 3A       	sub	a,0x3a
2743  0CCE  38 07       	jr	C,l_player_check_floor_00132
2744  0CD0  DD 7E FB    	ld	a,(ix-5)
2745  0CD3  D6 60       	sub	a,0x60
2746  0CD5  38 32       	jr	C,l_player_check_floor_00128
2747  0CD7              l_player_check_floor_00132:
2748  0CD7  DD 7E FA    	ld	a,(ix-6)
2749  0CDA  D6 3A       	sub	a,0x3a
2750  0CDC  38 07       	jr	C,l_player_check_floor_00127
2751  0CDE  DD 7E FA    	ld	a,(ix-6)
2752  0CE1  D6 60       	sub	a,0x60
2753  0CE3  38 24       	jr	C,l_player_check_floor_00128
2754  0CE5              l_player_check_floor_00127:
2755  0CE5  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
2756  0CE8  36 02       	ld	(hl),0x02
2757  0CEA  21 00 00    	ld	hl,_s_state
2758  0CED  CB CE       	set	1, (hl)
2759  0CEF  2E 00       	ld	l,0x00
2760  0CF1  CD 2B 06    	call	_player_check_stairs
2761  0CF4  3A 00 00    	ld	a,(_player_onstair)
2762  0CF7  B7          	or	a, a
2763  0CF8  C2 A3 0D    	jp	NZ, l_player_check_floor_00133
2764  0CFB  3A 00 00    	ld	a,(_s_lin0)
2765  0CFE  D6 90       	sub	a,0x90
2766  0D00  C2 A3 0D    	jp	NZ,l_player_check_floor_00133
2767  0D03  CD 00 00    	call	_spr_page_down
2768  0D06  C3 A3 0D    	jp	l_player_check_floor_00133
2769  0D09              l_player_check_floor_00128:
2770  0D09  C5          	push	bc
2771  0D0A  21 10 00    	ld	hl,0x0010
2772  0D0D  E5          	push	hl
2773  0D0E  2A 00 00    	ld	hl,(_player_brick_time)
2774  0D11  E5          	push	hl
2775  0D12  CD 00 00    	call	_game_check_time
2776  0D15  F1          	pop	af
2777  0D16  F1          	pop	af
2778  0D17  C1          	pop	bc
2779  0D18  7D          	ld	a,l
2780  0D19  B7          	or	a, a
2781  0D1A  CA A3 0D    	jp	Z, l_player_check_floor_00133
2782  0D1D  2A 00 00    	ld	hl,(_curr_time)
2783  0D20  22 00 00    	ld	(_player_brick_time),hl
2784  0D23  DD 7E FB    	ld	a,(ix-5)
2785  0D26  D6 40       	sub	a,0x40
2786  0D28  20 1A       	jr	NZ,l_player_check_floor_00114
2787  0D2A  C5          	push	bc
2788  0D2B  DD 6E FC    	ld	l,(ix-4)
2789  0D2E  DD 66 FD    	ld	h,(ix-3)
2790  0D31  E5          	push	hl
2791  0D32  CD 00 00    	call	_game_match_back
2792  0D35  F1          	pop	af
2793  0D36  C1          	pop	bc
2794  0D37  5D          	ld	e,l
2795  0D38  DD 6E FE    	ld	l,(ix-2)
2796  0D3B  DD 66 FF    	ld	h,(ix-1)
2797  0D3E  73          	ld	(hl), e
2798  0D3F  C5          	push	bc
2799  0D40  CD A8 0D    	call	_player_gasta_brick
2800  0D43  C1          	pop	bc
2801  0D44              l_player_check_floor_00114:
2802  0D44  DD 7E FB    	ld	a,(ix-5)
2803  0D47  D6 3F       	sub	a,0x3f
2804  0D49  20 0D       	jr	NZ,l_player_check_floor_00116
2805  0D4B  DD 6E FE    	ld	l,(ix-2)
2806  0D4E  DD 66 FF    	ld	h,(ix-1)
2807  0D51  36 40       	ld	(hl),0x40
2808  0D53  C5          	push	bc
2809  0D54  CD A8 0D    	call	_player_gasta_brick
2810  0D57  C1          	pop	bc
2811  0D58              l_player_check_floor_00116:
2812  0D58  DD 7E FB    	ld	a,(ix-5)
2813  0D5B  D6 3E       	sub	a,0x3e
2814  0D5D  20 0D       	jr	NZ,l_player_check_floor_00118
2815  0D5F  DD 6E FE    	ld	l,(ix-2)
2816  0D62  DD 66 FF    	ld	h,(ix-1)
2817  0D65  36 3F       	ld	(hl),0x3f
2818  0D67  C5          	push	bc
2819  0D68  CD A8 0D    	call	_player_gasta_brick
2820  0D6B  C1          	pop	bc
2821  0D6C              l_player_check_floor_00118:
2822  0D6C  DD 7E FA    	ld	a,(ix-6)
2823  0D6F  D6 40       	sub	a,0x40
2824  0D71  20 14       	jr	NZ,l_player_check_floor_00120
2825  0D73  C5          	push	bc
2826  0D74  DD 6E FC    	ld	l,(ix-4)
2827  0D77  DD 66 FD    	ld	h,(ix-3)
2828  0D7A  E5          	push	hl
2829  0D7B  CD 00 00    	call	_game_match_back
2830  0D7E  F1          	pop	af
2831  0D7F  C1          	pop	bc
2832  0D80  7D          	ld	a,l
2833  0D81  02          	ld	(bc), a
2834  0D82  C5          	push	bc
2835  0D83  CD A8 0D    	call	_player_gasta_brick
2836  0D86  C1          	pop	bc
2837  0D87              l_player_check_floor_00120:
2838  0D87  DD 7E FA    	ld	a,(ix-6)
2839  0D8A  D6 3F       	sub	a,0x3f
2840  0D8C  20 08       	jr	NZ,l_player_check_floor_00122
2841  0D8E  3E 40       	ld	a,0x40
2842  0D90  02          	ld	(bc), a
2843  0D91  C5          	push	bc
2844  0D92  CD A8 0D    	call	_player_gasta_brick
2845  0D95  C1          	pop	bc
2846  0D96              l_player_check_floor_00122:
2847  0D96  DD 7E FA    	ld	a,(ix-6)
2848  0D99  D6 3E       	sub	a,0x3e
2849  0D9B  20 06       	jr	NZ,l_player_check_floor_00133
2850  0D9D  3E 3F       	ld	a,0x3f
2851  0D9F  02          	ld	(bc), a
2852  0DA0  CD A8 0D    	call	_player_gasta_brick
2853  0DA3              l_player_check_floor_00133:
2854  0DA3  DD F9       	ld	sp, ix
2855  0DA5  DD E1       	pop	ix
2856  0DA7  C9          	ret
2857  0DA8              	SECTION code_compiler
2858  0DA8              ;	---------------------------------
2859  0DA8              ; Function player_gasta_brick
2860  0DA8              ; ---------------------------------
2861  0DA8              _player_gasta_brick:
2862  0DA8  3A 00 00    	ld	a,(_s_lin0)
2863  0DAB  32 00 00    	ld	(_s_lin1),a
2864  0DAE  3A 00 00    	ld	a,(_s_col0)
2865  0DB1  32 00 00    	ld	(_s_col1),a
2866  0DB4  3A 07 00    	ld	a,(_lin + 0x0007)
2867  0DB7  C6 10       	add	a,0x10
2868  0DB9  32 00 00    	ld	(_s_lin0),a
2869  0DBC  3A 07 00    	ld	a,(_col + 0x0007)
2870  0DBF  32 00 00    	ld	(_s_col0),a
2871  0DC2  CD 00 00    	call	_spr_back_repaint
2872  0DC5  3A 00 00    	ld	a,(_s_lin1)
2873  0DC8  32 00 00    	ld	(_s_lin0),a
2874  0DCB  3A 00 00    	ld	a,(_s_col1)
2875  0DCE  32 00 00    	ld	(_s_col0),a
2876  0DD1  C9          	ret
2877  0DD2              	SECTION code_compiler
2878  0DD2              ;	---------------------------------
2879  0DD2              ; Function player_move_jump
2880  0DD2              ; ---------------------------------
2881  0DD2              _player_move_jump:
2882  0DD2  21 00 00    	ld	hl,_game_gravity
2883  0DD5  4E          	ld	c, (hl)
2884  0DD6  21 00 00    	ld	hl,_player_vel_y
2885  0DD9  7E          	ld	a, (hl)
2886  0DDA  81          	add	a, c
2887  0DDB  77          	ld	(hl), a
2888  0DDC  21 00 00    	ld	hl,_sprite_on_air
2889  0DDF  36 01       	ld	(hl),0x01
2890  0DE1  3A 00 00    	ld	a,(_player_vel_inc)
2891  0DE4  B7          	or	a, a
2892  0DE5  28 4A       	jr	Z,l_player_move_jump_00109
2893  0DE7  3A 00 00    	ld	a,(_dirs)
2894  0DEA  CB 07       	rlc	a
2895  0DEC  E6 01       	and	a,0x01
2896  0DEE  4F          	ld	c, a
2897  0DEF  3A 00 00    	ld	a,(_game_2buttons)
2898  0DF2  B7          	or	a, a
2899  0DF3  28 06       	jr	Z,l_player_move_jump_00102
2900  0DF5  79          	ld	a, c
2901  0DF6  EE 01       	xor	a,0x01
2902  0DF8  4F          	ld	c, a
2903  0DF9  18 15       	jr	l_player_move_jump_00103
2904  0DFB              l_player_move_jump_00102:
2905  0DFB  CB 41       	bit	0, c
2906  0DFD  28 07       	jr	Z,l_player_move_jump_00154
2907  0DFF  21 00 00    	ld	hl,_dirs
2908  0E02  CB 46       	bit	0, (hl)
2909  0E04  20 04       	jr	NZ,l_player_move_jump_00155
2910  0E06              l_player_move_jump_00154:
2911  0E06  0E 00       	ld	c,0x00
2912  0E08  18 02       	jr	l_player_move_jump_00156
2913  0E0A              l_player_move_jump_00155:
2914  0E0A  0E 01       	ld	c,0x01
2915  0E0C              l_player_move_jump_00156:
2916  0E0C  79          	ld	a, c
2917  0E0D  EE 01       	xor	a,0x01
2918  0E0F  4F          	ld	c, a
2919  0E10              l_player_move_jump_00103:
2920  0E10  79          	ld	a, c
2921  0E11  B7          	or	a, a
2922  0E12  28 1D       	jr	Z,l_player_move_jump_00109
2923  0E14  3A 00 00    	ld	a,(_player_vel_y1)
2924  0E17  21 00 00    	ld	hl,_player_vel_y
2925  0E1A  96          	sub	a, (hl)
2926  0E1B  E2 20 0E    	jp	PO, l_player_move_jump_00259
2927  0E1E  EE 80       	xor	a,0x80
2928  0E20              l_player_move_jump_00259:
2929  0E20  F2 31 0E    	jp	P, l_player_move_jump_00109
2930  0E23  21 00 00    	ld	hl,_player_vel_y
2931  0E26  CB 7E       	bit	7,(hl)
2932  0E28  28 07       	jr	Z,l_player_move_jump_00109
2933  0E2A  36 00       	ld	(hl),0x00
2934  0E2C  21 00 00    	ld	hl,_player_vel_inc
2935  0E2F  36 00       	ld	(hl),0x00
2936  0E31              l_player_move_jump_00109:
2937  0E31  3E 78       	ld	a,0x78
2938  0E33  21 00 00    	ld	hl,_player_vel_y
2939  0E36  96          	sub	a, (hl)
2940  0E37  E2 3C 0E    	jp	PO, l_player_move_jump_00260
2941  0E3A  EE 80       	xor	a,0x80
2942  0E3C              l_player_move_jump_00260:
2943  0E3C  F2 44 0E    	jp	P, l_player_move_jump_00111
2944  0E3F  21 00 00    	ld	hl,_player_vel_y
2945  0E42  36 78       	ld	(hl),0x78
2946  0E44              l_player_move_jump_00111:
2947  0E44  21 00 00    	ld	hl,_player_vel_y
2948  0E47  7E          	ld	a, (hl)
2949  0E48  EE 80       	xor	a,0x80
2950  0E4A  D6 08       	sub	a,0x08
2951  0E4C  30 02       	jr	NC,l_player_move_jump_00113
2952  0E4E  36 88       	ld	(hl),0x88
2953  0E50              l_player_move_jump_00113:
2954  0E50  3A 00 00    	ld	a,(_player_vel_y)
2955  0E53  47          	ld	b,a
2956  0E54  17          	rla
2957  0E55  9F          	sbc	a, a
2958  0E56  5F          	ld	e, a
2959  0E57  CB 40       	bit	0,b
2960  0E59  21 00 00    	ld	hl,_s_lin1
2961  0E5C  70          	ld	(hl),b
2962  0E5D  28 04       	jr	Z,l_player_move_jump_00115
2963  0E5F  21 00 00    	ld	hl,_s_lin1
2964  0E62  35          	dec	(hl)
2965  0E63              l_player_move_jump_00115:
2966  0E63  3A 07 00    	ld	a,(_lin + 0x0007)
2967  0E66  21 00 00    	ld	hl,_s_lin1
2968  0E69  86          	add	a, (hl)
2969  0E6A  77          	ld	(hl), a
2970  0E6B  3E 90       	ld	a,0x90
2971  0E6D  96          	sub	a, (hl)
2972  0E6E  3E 00       	ld	a,0x00
2973  0E70  17          	rla
2974  0E71  4F          	ld	c, a
2975  0E72  CB 7B       	bit	7, e
2976  0E74  28 5B       	jr	Z,l_player_move_jump_00141
2977  0E76  21 00 00    	ld	hl,_s_state
2978  0E79  7E          	ld	a,(hl)
2979  0E7A  F6 01       	or	a,0x01
2980  0E7C  E6 FD       	and	a,0xfd
2981  0E7E  77          	ld	(hl),a
2982  0E7F  79          	ld	a, c
2983  0E80  B7          	or	a, a
2984  0E81  28 11       	jr	Z,l_player_move_jump_00120
2985  0E83  CD 00 00    	call	_spr_page_up
2986  0E86  7D          	ld	a, l
2987  0E87  B7          	or	a, a
2988  0E88  28 05       	jr	Z,l_player_move_jump_00117
2989  0E8A  2E 00       	ld	l,0x00
2990  0E8C  C3 90 0F    	jp	l_player_move_jump_00152
2991  0E8F              l_player_move_jump_00117:
2992  0E8F  21 00 00    	ld	hl,_s_lin1
2993  0E92  36 00       	ld	(hl),0x00
2994  0E94              l_player_move_jump_00120:
2995  0E94  21 07 00    	ld	hl,+(_col + 0x0007)
2996  0E97  46          	ld	b, (hl)
2997  0E98  C5          	push	bc
2998  0E99  33          	inc	sp
2999  0E9A  3A 00 00    	ld	a,(_s_lin1)
3000  0E9D  F5          	push	af
3001  0E9E  33          	inc	sp
3002  0E9F  CD 00 00    	call	_game_check_map
3003  0EA2  F1          	pop	af
3004  0EA3  7C          	ld	a,h
3005  0EA4  B5          	or	a,l
3006  0EA5  28 21       	jr	Z,l_player_move_jump_00124
3007  0EA7  CD 09 09    	call	_player_hit_platform
3008  0EAA  7D          	ld	a, l
3009  0EAB  B7          	or	a, a
3010  0EAC  28 12       	jr	Z,l_player_move_jump_00122
3011  0EAE  3A 07 00    	ld	a,(_lin + 0x0007)
3012  0EB1  07          	rlca
3013  0EB2  07          	rlca
3014  0EB3  07          	rlca
3015  0EB4  07          	rlca
3016  0EB5  E6 0F       	and	a,0x0f
3017  0EB7  07          	rlca
3018  0EB8  07          	rlca
3019  0EB9  07          	rlca
3020  0EBA  07          	rlca
3021  0EBB  E6 F0       	and	a,0xf0
3022  0EBD  32 07 00    	ld	((_lin + 0x0007)),a
3023  0EC0              l_player_move_jump_00122:
3024  0EC0  21 00 00    	ld	hl,_player_vel_y
3025  0EC3  36 00       	ld	(hl),0x00
3026  0EC5  C3 52 0F    	jp	l_player_move_jump_00142
3027  0EC8              l_player_move_jump_00124:
3028  0EC8  3A 00 00    	ld	a,(_s_lin1)
3029  0ECB  32 07 00    	ld	((_lin + 0x0007)),a
3030  0ECE  C3 52 0F    	jp	l_player_move_jump_00142
3031  0ED1              l_player_move_jump_00141:
3032  0ED1  21 00 00    	ld	hl,_s_state
3033  0ED4  7E          	ld	a,(hl)
3034  0ED5  F6 02       	or	a,0x02
3035  0ED7  E6 FE       	and	a,0xfe
3036  0ED9  77          	ld	(hl),a
3037  0EDA  79          	ld	a, c
3038  0EDB  B7          	or	a, a
3039  0EDC  28 11       	jr	Z,l_player_move_jump_00130
3040  0EDE  CD 00 00    	call	_spr_page_down
3041  0EE1  7D          	ld	a, l
3042  0EE2  B7          	or	a, a
3043  0EE3  28 05       	jr	Z,l_player_move_jump_00127
3044  0EE5  2E 00       	ld	l,0x00
3045  0EE7  C3 90 0F    	jp	l_player_move_jump_00152
3046  0EEA              l_player_move_jump_00127:
3047  0EEA  21 00 00    	ld	hl,_s_lin1
3048  0EED  36 90       	ld	(hl),0x90
3049  0EEF              l_player_move_jump_00130:
3050  0EEF  21 07 00    	ld	hl,+(_col + 0x0007)
3051  0EF2  4E          	ld	c, (hl)
3052  0EF3  3A 00 00    	ld	a,(_s_lin1)
3053  0EF6  C6 10       	add	a,0x10
3054  0EF8  47          	ld	b, a
3055  0EF9  79          	ld	a, c
3056  0EFA  48          	ld	c,b
3057  0EFB  47          	ld	b,a
3058  0EFC  C5          	push	bc
3059  0EFD  CD 00 00    	call	_game_check_map
3060  0F00  F1          	pop	af
3061  0F01  7C          	ld	a,h
3062  0F02  B5          	or	a,l
3063  0F03  28 47       	jr	Z,l_player_move_jump_00138
3064  0F05  2E 00       	ld	l,0x00
3065  0F07  CD 2B 06    	call	_player_check_stairs
3066  0F0A  3A 00 00    	ld	a,(_player_onstair)
3067  0F0D  B7          	or	a, a
3068  0F0E  20 05       	jr	NZ,l_player_move_jump_00132
3069  0F10  2E 01       	ld	l,0x01
3070  0F12  CD 2B 06    	call	_player_check_stairs
3071  0F15              l_player_move_jump_00132:
3072  0F15  3A 00 00    	ld	a,(_player_onstair)
3073  0F18  B7          	or	a, a
3074  0F19  20 12       	jr	NZ,l_player_move_jump_00134
3075  0F1B  3A 00 00    	ld	a,(_s_lin1)
3076  0F1E  07          	rlca
3077  0F1F  07          	rlca
3078  0F20  07          	rlca
3079  0F21  07          	rlca
3080  0F22  E6 0F       	and	a,0x0f
3081  0F24  07          	rlca
3082  0F25  07          	rlca
3083  0F26  07          	rlca
3084  0F27  07          	rlca
3085  0F28  E6 F0       	and	a,0xf0
3086  0F2A  32 07 00    	ld	((_lin + 0x0007)),a
3087  0F2D              l_player_move_jump_00134:
3088  0F2D  21 00 00    	ld	hl,_player_vel_y
3089  0F30  36 00       	ld	(hl),0x00
3090  0F32  21 00 00    	ld	hl,_s_state
3091  0F35  7E          	ld	a,(hl)
3092  0F36  E6 FC       	and	a,+(0xfd&0xfe)
3093  0F38  77          	ld	(hl),a
3094  0F39  3A 07 00    	ld	a,(_lin + 0x0007)
3095  0F3C  D6 90       	sub	a,0x90
3096  0F3E  38 03       	jr	C,l_player_move_jump_00136
3097  0F40  CD 00 00    	call	_spr_page_down
3098  0F43              l_player_move_jump_00136:
3099  0F43  21 07 00    	ld	hl, +(_colint + 0x0007)
3100  0F46  36 00       	ld	(hl),0x00
3101  0F48  2E 01       	ld	l,0x01
3102  0F4A  18 44       	jr	l_player_move_jump_00152
3103  0F4C              l_player_move_jump_00138:
3104  0F4C  3A 00 00    	ld	a,(_s_lin1)
3105  0F4F  32 07 00    	ld	((_lin + 0x0007)),a
3106  0F52              l_player_move_jump_00142:
3107  0F52  21 00 00    	ld	hl,_s_state
3108  0F55  CB 5E       	bit	3, (hl)
3109  0F57  20 27       	jr	NZ,l_player_move_jump_00148
3110  0F59  21 00 00    	ld	hl,_s_state
3111  0F5C  CB 56       	bit	2, (hl)
3112  0F5E  20 20       	jr	NZ,l_player_move_jump_00148
3113  0F60  21 00 00    	ld	hl,_dirs
3114  0F63  CB 56       	bit	2, (hl)
3115  0F65  28 09       	jr	Z,l_player_move_jump_00144
3116  0F67  21 00 00    	ld	hl,_s_state
3117  0F6A  7E          	ld	a,(hl)
3118  0F6B  F6 08       	or	a,0x08
3119  0F6D  E6 FB       	and	a,0xfb
3120  0F6F  77          	ld	(hl),a
3121  0F70              l_player_move_jump_00144:
3122  0F70  21 00 00    	ld	hl,_dirs
3123  0F73  CB 5E       	bit	3, (hl)
3124  0F75  28 09       	jr	Z,l_player_move_jump_00148
3125  0F77  21 00 00    	ld	hl,_s_state
3126  0F7A  7E          	ld	a,(hl)
3127  0F7B  F6 04       	or	a,0x04
3128  0F7D  E6 F7       	and	a,0xf7
3129  0F7F  77          	ld	(hl),a
3130  0F80              l_player_move_jump_00148:
3131  0F80  CD 00 00    	call	_spr_move_horizontal
3132  0F83  7D          	ld	a, l
3133  0F84  B7          	or	a, a
3134  0F85  28 07       	jr	Z,l_player_move_jump_00151
3135  0F87  21 00 00    	ld	hl,_s_state
3136  0F8A  7E          	ld	a,(hl)
3137  0F8B  E6 F3       	and	a,+(0xf7&0xfb)
3138  0F8D  77          	ld	(hl),a
3139  0F8E              l_player_move_jump_00151:
3140  0F8E  2E 00       	ld	l,0x00
3141  0F90              l_player_move_jump_00152:
3142  0F90  C9          	ret
3143  0F91              	SECTION code_compiler
3144  0F91              ;	---------------------------------
3145  0F91              ; Function player_open_door
3146  0F91              ; ---------------------------------
3147  0F91              _player_open_door:
3148  0F91  CD 00 00    	call	___sdcc_enter_ix
3149  0F94  0E 00       	ld	c,0x00
3150  0F96  21 00 00    	ld	hl,_ay_effect_05
3151  0F99  CD 00 00    	call	_ay_fx_play
3152  0F9C  DD 7E 06    	ld	a,(ix+6)
3153  0F9F  D6 48       	sub	a,0x48
3154  0FA1  28 17       	jr	Z,l_player_open_door_00101
3155  0FA3  DD 7E 06    	ld	a,(ix+6)
3156  0FA6  D6 49       	sub	a,0x49
3157  0FA8  28 1F       	jr	Z,l_player_open_door_00104
3158  0FAA  DD 7E 06    	ld	a,(ix+6)
3159  0FAD  D6 4A       	sub	a,0x4a
3160  0FAF  28 27       	jr	Z,l_player_open_door_00107
3161  0FB1  DD 7E 06    	ld	a,(ix+6)
3162  0FB4  D6 4B       	sub	a,0x4b
3163  0FB6  28 2F       	jr	Z,l_player_open_door_00110
3164  0FB8  18 3A       	jr	l_player_open_door_00113
3165  0FBA              l_player_open_door_00101:
3166  0FBA  3A 00 00    	ld	a,(_player_keys)
3167  0FBD  B7          	or	a, a
3168  0FBE  28 34       	jr	Z,l_player_open_door_00113
3169  0FC0  2E 07       	ld	l,0x07
3170  0FC2  CD 00 00    	call	_zx_border_fastcall
3171  0FC5  0E 01       	ld	c,0x01
3172  0FC7  18 2B       	jr	l_player_open_door_00113
3173  0FC9              l_player_open_door_00104:
3174  0FC9  3A 01 00    	ld	a,(_player_keys + 0x0001)
3175  0FCC  B7          	or	a, a
3176  0FCD  28 25       	jr	Z,l_player_open_door_00113
3177  0FCF  2E 02       	ld	l,0x02
3178  0FD1  CD 00 00    	call	_zx_border_fastcall
3179  0FD4  0E 01       	ld	c,0x01
3180  0FD6  18 1C       	jr	l_player_open_door_00113
3181  0FD8              l_player_open_door_00107:
3182  0FD8  3A 02 00    	ld	a,(_player_keys + 0x0002)
3183  0FDB  B7          	or	a, a
3184  0FDC  28 16       	jr	Z,l_player_open_door_00113
3185  0FDE  2E 04       	ld	l,0x04
3186  0FE0  CD 00 00    	call	_zx_border_fastcall
3187  0FE3  0E 01       	ld	c,0x01
3188  0FE5  18 0D       	jr	l_player_open_door_00113
3189  0FE7              l_player_open_door_00110:
3190  0FE7  3A 03 00    	ld	a,(_player_keys + 0x0003)
3191  0FEA  B7          	or	a, a
3192  0FEB  28 07       	jr	Z,l_player_open_door_00113
3193  0FED  2E 05       	ld	l,0x05
3194  0FEF  CD 00 00    	call	_zx_border_fastcall
3195  0FF2  0E 01       	ld	c,0x01
3196  0FF4              l_player_open_door_00113:
3197  0FF4  79          	ld	a, c
3198  0FF5  B7          	or	a, a
3199  0FF6  20 06       	jr	NZ,l_player_open_door_00114
3200  0FF8  3A 00 00    	ld	a,(_game_inmune)
3201  0FFB  B7          	or	a, a
3202  0FFC  28 2F       	jr	Z,l_player_open_door_00117
3203  0FFE              l_player_open_door_00114:
3204  0FFE  3E 00       	ld	a, +((_scr_map) & 0xFF)
3205  1000  DD 86 04    	add	a,(ix+4)
3206  1003  4F          	ld	c, a
3207  1004  3E 00       	ld	a, +((_scr_map) / 256)
3208  1006  DD 8E 05    	adc	a,(ix+5)
3209  1009  47          	ld	b, a
3210  100A  C5          	push	bc
3211  100B  DD 6E 04    	ld	l,(ix+4)
3212  100E  DD 66 05    	ld	h,(ix+5)
3213  1011  E5          	push	hl
3214  1012  CD 00 00    	call	_game_match_back
3215  1015  F1          	pop	af
3216  1016  C1          	pop	bc
3217  1017  7D          	ld	a,l
3218  1018  02          	ld	(bc), a
3219  1019  DD 6E 04    	ld	l,(ix+4)
3220  101C  DD 66 05    	ld	h,(ix+5)
3221  101F  CD 00 00    	call	_game_obj_set
3222  1022  DD 6E 04    	ld	l,(ix+4)
3223  1025  DD 66 05    	ld	h,(ix+5)
3224  1028  E5          	push	hl
3225  1029  CD 00 00    	call	_spr_draw_index
3226  102C  F1          	pop	af
3227  102D              l_player_open_door_00117:
3228  102D  DD E1       	pop	ix
3229  102F  C9          	ret
3230  1030              	SECTION code_compiler
3231  1030              ;	---------------------------------
3232  1030              ; Function player_lost_life
3233  1030              ; ---------------------------------
3234  1030              _player_lost_life:
3235  1030  CD 00 00    	call	___sdcc_enter_ix
3236  1033  3B          	dec	sp
3237  1034  21 00 00    	ld	hl,_ay_effect_18
3238  1037  CD 00 00    	call	_ay_fx_play
3239  103A  21 00 00    	ld	hl,_player_vita
3240  103D  36 00       	ld	(hl),0x00
3241  103F  CD 00 00    	call	_game_update_stats
3242  1042  3A 07 00    	ld	a,(_lin + 0x0007)
3243  1045  32 00 00    	ld	(_s_lin0),a
3244  1048  3A 07 00    	ld	a,(_col + 0x0007)
3245  104B  32 00 00    	ld	(_s_col0),a
3246  104E  CD 00 00    	call	_spr_init_anim_bullets
3247  1051  01 00 00    	ld	bc,_anim_lin+0
3248  1054  16 00       	ld	d,0x00
3249  1056              l_player_lost_life_00116:
3250  1056  C5          	push	bc
3251  1057  D5          	push	de
3252  1058  21 00 00    	ld	hl,0x0000
3253  105B  E5          	push	hl
3254  105C  AF          	xor	a, a
3255  105D  5A          	ld	e,d
3256  105E  57          	ld	d,a
3257  105F  D5          	push	de
3258  1060  CD 00 00    	call	_NIRVANAP_spriteT_callee
3259  1063  D1          	pop	de
3260  1064  C1          	pop	bc
3261  1065  6A          	ld	l,d
3262  1066  26 00       	ld	h,0x00
3263  1068  09          	add	hl, bc
3264  1069  36 FF       	ld	(hl),0xff
3265  106B  14          	inc	d
3266  106C  7A          	ld	a, d
3267  106D  D6 08       	sub	a,0x08
3268  106F  38 E5       	jr	C,l_player_lost_life_00116
3269  1071  21 00 00    	ld	hl,_anim_count
3270  1074  36 00       	ld	(hl),0x00
3271  1076  76          	halt
3272  1077  3A 00 00    	ld	a,(_s_lin0)
3273  107A  C6 F0       	add	a,0xf0
3274  107C  47          	ld	b, a
3275  107D  3A 00 00    	ld	a,(_s_col0)
3276  1080  21 00 00    	ld	hl,0x0000
3277  1083  E5          	push	hl
3278  1084  21 87 03    	ld	hl,0x0387
3279  1087  E5          	push	hl
3280  1088  48          	ld	c,b
3281  1089  47          	ld	b,a
3282  108A  C5          	push	bc
3283  108B  CD 00 00    	call	_spr_add_anim
3284  108E  F1          	pop	af
3285  108F  F1          	pop	af
3286  1090  F1          	pop	af
3287  1091  21 00 00    	ld	hl,_s_col0
3288  1094  46          	ld	b, (hl)
3289  1095  05          	dec	b
3290  1096  05          	dec	b
3291  1097  21 00 00    	ld	hl,0x0000
3292  109A  E5          	push	hl
3293  109B  21 87 03    	ld	hl,0x0387
3294  109E  E5          	push	hl
3295  109F  C5          	push	bc
3296  10A0  33          	inc	sp
3297  10A1  3A 00 00    	ld	a,(_s_lin0)
3298  10A4  F5          	push	af
3299  10A5  33          	inc	sp
3300  10A6  CD 00 00    	call	_spr_add_anim
3301  10A9  F1          	pop	af
3302  10AA  F1          	pop	af
3303  10AB  21 00 00    	ld	hl,0x0000
3304  10AE  E3          	ex	(sp),hl
3305  10AF  3A 00 00    	ld	a,(_s_col0)
3306  10B2  21 87 03    	ld	hl,0x0387
3307  10B5  E5          	push	hl
3308  10B6  F5          	push	af
3309  10B7  33          	inc	sp
3310  10B8  3A 00 00    	ld	a,(_s_lin0)
3311  10BB  F5          	push	af
3312  10BC  33          	inc	sp
3313  10BD  CD 00 00    	call	_spr_add_anim
3314  10C0  F1          	pop	af
3315  10C1  F1          	pop	af
3316  10C2  F1          	pop	af
3317  10C3  21 00 00    	ld	hl,_s_col0
3318  10C6  46          	ld	b, (hl)
3319  10C7  04          	inc	b
3320  10C8  04          	inc	b
3321  10C9  21 00 00    	ld	hl,0x0000
3322  10CC  E5          	push	hl
3323  10CD  21 87 03    	ld	hl,0x0387
3324  10D0  E5          	push	hl
3325  10D1  C5          	push	bc
3326  10D2  33          	inc	sp
3327  10D3  3A 00 00    	ld	a,(_s_lin0)
3328  10D6  F5          	push	af
3329  10D7  33          	inc	sp
3330  10D8  CD 00 00    	call	_spr_add_anim
3331  10DB  F1          	pop	af
3332  10DC  F1          	pop	af
3333  10DD  F1          	pop	af
3334  10DE  3A 00 00    	ld	a,(_s_lin0)
3335  10E1  C6 10       	add	a,0x10
3336  10E3  47          	ld	b, a
3337  10E4  3A 00 00    	ld	a,(_s_col0)
3338  10E7  21 00 00    	ld	hl,0x0000
3339  10EA  E5          	push	hl
3340  10EB  21 87 03    	ld	hl,0x0387
3341  10EE  E5          	push	hl
3342  10EF  48          	ld	c,b
3343  10F0  47          	ld	b,a
3344  10F1  C5          	push	bc
3345  10F2  CD 00 00    	call	_spr_add_anim
3346  10F5  F1          	pop	af
3347  10F6  F1          	pop	af
3348  10F7  F1          	pop	af
3349  10F8  2E 00       	ld	l,0x00
3350  10FA  CD 00 00    	call	_zx_border_fastcall
3351  10FD  DD 36 FF 01 	ld	(ix-1),0x01
3352  1101  2A 00 00    	ld	hl,(_curr_time)
3353  1104  22 00 00    	ld	(_anim_time),hl
3354  1107              l_player_lost_life_00107:
3355  1107  DD 7E FF    	ld	a,(ix-1)
3356  110A  B7          	or	a, a
3357  110B  28 28       	jr	Z,l_player_lost_life_00109
3358  110D  21 0C 00    	ld	hl,0x000c
3359  1110  E5          	push	hl
3360  1111  2A 00 00    	ld	hl,(_anim_time)
3361  1114  E5          	push	hl
3362  1115  CD 00 00    	call	_game_check_time
3363  1118  F1          	pop	af
3364  1119  F1          	pop	af
3365  111A  7D          	ld	a, l
3366  111B  B7          	or	a, a
3367  111C  28 E9       	jr	Z,l_player_lost_life_00107
3368  111E  2A 00 00    	ld	hl,(_curr_time)
3369  1121  22 00 00    	ld	(_anim_time),hl
3370  1124  3A 00 00    	ld	a,(_anim_count)
3371  1127  B7          	or	a,a
3372  1128  28 05       	jr	Z,l_player_lost_life_00103
3373  112A  CD 00 00    	call	_spr_play_anim
3374  112D  18 D8       	jr	l_player_lost_life_00107
3375  112F              l_player_lost_life_00103:
3376  112F  DD 36 FF 00 	ld	(ix-1),0x00
3377  1133  18 D2       	jr	l_player_lost_life_00107
3378  1135              l_player_lost_life_00109:
3379  1135  21 00 00    	ld	hl,_sprite
3380  1138  36 00       	ld	(hl),0x00
3381  113A              l_player_lost_life_00118:
3382  113A  3A 07 00    	ld	a,(_class + 0x0007)
3383  113D  B7          	or	a, a
3384  113E  28 1F       	jr	Z,l_player_lost_life_00111
3385  1140  21 07 00    	ld	hl,+(_col + 0x0007)
3386  1143  4E          	ld	c, (hl)
3387  1144  21 07 00    	ld	hl,+(_lin + 0x0007)
3388  1147  56          	ld	d, (hl)
3389  1148  21 07 00    	ld	hl,+(_tile + 0x0007)
3390  114B  5E          	ld	e, (hl)
3391  114C  21 07 00    	ld	hl,+(_colint + 0x0007)
3392  114F  46          	ld	b, (hl)
3393  1150  7B          	ld	a, e
3394  1151  80          	add	a, b
3395  1152  5F          	ld	e, a
3396  1153  79          	ld	a, c
3397  1154  F5          	push	af
3398  1155  33          	inc	sp
3399  1156  3A 00 00    	ld	a,(_sprite)
3400  1159  D5          	push	de
3401  115A  F5          	push	af
3402  115B  33          	inc	sp
3403  115C  CD 00 00    	call	_NIRVANAP_spriteT_callee
3404  115F              l_player_lost_life_00111:
3405  115F  21 07 00    	ld	hl, +(_class + 0x0007)
3406  1162  36 00       	ld	(hl),0x00
3407  1164  21 07 00    	ld	hl, +(_bullet_col + 0x0007)
3408  1167  36 FF       	ld	(hl),0xff
3409  1169  21 00 00    	ld	hl,_sprite
3410  116C  7E          	ld	a,(hl)
3411  116D  3C          	inc	a
3412  116E  77          	ld	(hl),a
3413  116F  D6 07       	sub	a,0x07
3414  1171  38 C7       	jr	C,l_player_lost_life_00118
3415  1173  21 00 00    	ld	hl,_player_lives
3416  1176  35          	dec	(hl)
3417  1177  21 00 00    	ld	hl,_player_mana
3418  117A  36 64       	ld	(hl),0x64
3419  117C  21 00 00    	ld	hl,_player_vita
3420  117F  36 64       	ld	(hl),0x64
3421  1181  3A 00 00    	ld	a,(_player_lives)
3422  1184  B7          	or	a, a
3423  1185  28 0B       	jr	Z,l_player_lost_life_00114
3424  1187  21 F4 01    	ld	hl,0x01f4
3425  118A  CD 00 00    	call	_z80_delay_ms_fastcall
3426  118D  CD 00 00    	call	_game_round_init
3427  1190  18 0A       	jr	l_player_lost_life_00120
3428  1192              l_player_lost_life_00114:
3429  1192  21 00 00    	ld	hl,_player_lives
3430  1195  36 00       	ld	(hl),0x00
3431  1197  21 00 00    	ld	hl,_game_over
3432  119A  36 01       	ld	(hl),0x01
3433  119C              l_player_lost_life_00120:
3434  119C  33          	inc	sp
3435  119D  DD E1       	pop	ix
3436  119F  C9          	ret
3437  11A0              	SECTION code_compiler
3438  11A0              ;	---------------------------------
3439  11A0              ; Function player_hit
3440  11A0              ; ---------------------------------
3441  11A0              _player_hit:
3442  11A0  7D          	ld	a,l
3443  11A1  4D          	ld	c,l
3444  11A2  21 00 00    	ld	hl,_player_vita
3445  11A5  96          	sub	a, (hl)
3446  11A6  30 17       	jr	NC,l_player_hit_00104
3447  11A8  3A 00 00    	ld	a,(_game_inmune)
3448  11AB  B7          	or	a, a
3449  11AC  20 06       	jr	NZ,l_player_hit_00102
3450  11AE  21 00 00    	ld	hl,_player_vita
3451  11B1  7E          	ld	a, (hl)
3452  11B2  91          	sub	a, c
3453  11B3  77          	ld	(hl), a
3454  11B4              l_player_hit_00102:
3455  11B4  2A 00 00    	ld	hl,(_curr_time)
3456  11B7  22 00 00    	ld	(_player_hit_time),hl
3457  11BA  CD 00 00    	call	_game_update_stats
3458  11BD  18 03       	jr	l_player_hit_00106
3459  11BF              l_player_hit_00104:
3460  11BF  CD 30 10    	call	_player_lost_life
3461  11C2              l_player_hit_00106:
3462  11C2  C9          	ret
3463  11C3              	SECTION IGNORE
3464  0000              
