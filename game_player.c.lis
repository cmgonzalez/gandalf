1     0000              MODULE game_player_c
2     0000              
3     0000              ;--------------------------------------------------------
4     0000              ; File Created by SDCC : free open source ANSI-C Compiler
5     0000              ; Version 3.6.5 #9958 (Mac OS X i386)
6     0000              ;--------------------------------------------------------
7     0000              ; Processed by Z88DK
8     0000              ;--------------------------------------------------------
9     0000              
10    0000              	EXTERN __divschar
11    0000              	EXTERN __divschar_callee
12    0000              	EXTERN __divsint
13    0000              	EXTERN __divsint_callee
14    0000              	EXTERN __divslong
15    0000              	EXTERN __divslong_callee
16    0000              	EXTERN __divslonglong
17    0000              	EXTERN __divslonglong_callee
18    0000              	EXTERN __divsuchar
19    0000              	EXTERN __divsuchar_callee
20    0000              	EXTERN __divuchar
21    0000              	EXTERN __divuchar_callee
22    0000              	EXTERN __divuint
23    0000              	EXTERN __divuint_callee
24    0000              	EXTERN __divulong
25    0000              	EXTERN __divulong_callee
26    0000              	EXTERN __divulonglong
27    0000              	EXTERN __divulonglong_callee
28    0000              	EXTERN __divuschar
29    0000              	EXTERN __divuschar_callee
30    0000              	EXTERN __modschar
31    0000              	EXTERN __modschar_callee
32    0000              	EXTERN __modsint
33    0000              	EXTERN __modsint_callee
34    0000              	EXTERN __modslong
35    0000              	EXTERN __modslong_callee
36    0000              	EXTERN __modslonglong
37    0000              	EXTERN __modslonglong_callee
38    0000              	EXTERN __modsuchar
39    0000              	EXTERN __modsuchar_callee
40    0000              	EXTERN __moduchar
41    0000              	EXTERN __moduchar_callee
42    0000              	EXTERN __moduint
43    0000              	EXTERN __moduint_callee
44    0000              	EXTERN __modulong
45    0000              	EXTERN __modulong_callee
46    0000              	EXTERN __modulonglong
47    0000              	EXTERN __modulonglong_callee
48    0000              	EXTERN __moduschar
49    0000              	EXTERN __moduschar_callee
50    0000              	EXTERN __mulint
51    0000              	EXTERN __mulint_callee
52    0000              	EXTERN __mullong
53    0000              	EXTERN __mullong_callee
54    0000              	EXTERN __mullonglong
55    0000              	EXTERN __mullonglong_callee
56    0000              	EXTERN __mulschar
57    0000              	EXTERN __mulschar_callee
58    0000              	EXTERN __mulsuchar
59    0000              	EXTERN __mulsuchar_callee
60    0000              	EXTERN __muluschar
61    0000              	EXTERN __muluschar_callee
62    0000              	EXTERN __rlslonglong
63    0000              	EXTERN __rlslonglong_callee
64    0000              	EXTERN __rlulonglong
65    0000              	EXTERN __rlulonglong_callee
66    0000              	EXTERN __rrslonglong
67    0000              	EXTERN __rrslonglong_callee
68    0000              	EXTERN __rrulonglong
69    0000              	EXTERN __rrulonglong_callee
70    0000              	EXTERN ___sdcc_call_hl
71    0000              	EXTERN ___sdcc_call_iy
72    0000              	EXTERN ___sdcc_enter_ix
73    0000              	EXTERN _banked_call
74    0000              	EXTERN _banked_ret
75    0000              	EXTERN ___fs2schar
76    0000              	EXTERN ___fs2schar_callee
77    0000              	EXTERN ___fs2sint
78    0000              	EXTERN ___fs2sint_callee
79    0000              	EXTERN ___fs2slong
80    0000              	EXTERN ___fs2slong_callee
81    0000              	EXTERN ___fs2slonglong
82    0000              	EXTERN ___fs2slonglong_callee
83    0000              	EXTERN ___fs2uchar
84    0000              	EXTERN ___fs2uchar_callee
85    0000              	EXTERN ___fs2uint
86    0000              	EXTERN ___fs2uint_callee
87    0000              	EXTERN ___fs2ulong
88    0000              	EXTERN ___fs2ulong_callee
89    0000              	EXTERN ___fs2ulonglong
90    0000              	EXTERN ___fs2ulonglong_callee
91    0000              	EXTERN ___fsadd
92    0000              	EXTERN ___fsadd_callee
93    0000              	EXTERN ___fsdiv
94    0000              	EXTERN ___fsdiv_callee
95    0000              	EXTERN ___fseq
96    0000              	EXTERN ___fseq_callee
97    0000              	EXTERN ___fsgt
98    0000              	EXTERN ___fsgt_callee
99    0000              	EXTERN ___fslt
100   0000              	EXTERN ___fslt_callee
101   0000              	EXTERN ___fsmul
102   0000              	EXTERN ___fsmul_callee
103   0000              	EXTERN ___fsneq
104   0000              	EXTERN ___fsneq_callee
105   0000              	EXTERN ___fssub
106   0000              	EXTERN ___fssub_callee
107   0000              	EXTERN ___schar2fs
108   0000              	EXTERN ___schar2fs_callee
109   0000              	EXTERN ___sint2fs
110   0000              	EXTERN ___sint2fs_callee
111   0000              	EXTERN ___slong2fs
112   0000              	EXTERN ___slong2fs_callee
113   0000              	EXTERN ___slonglong2fs
114   0000              	EXTERN ___slonglong2fs_callee
115   0000              	EXTERN ___uchar2fs
116   0000              	EXTERN ___uchar2fs_callee
117   0000              	EXTERN ___uint2fs
118   0000              	EXTERN ___uint2fs_callee
119   0000              	EXTERN ___ulong2fs
120   0000              	EXTERN ___ulong2fs_callee
121   0000              	EXTERN ___ulonglong2fs
122   0000              	EXTERN ___ulonglong2fs_callee
123   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
126   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
127   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
128   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
129   0000              	EXTERN ____sdcc_4_ldi_save_bc
130   0000              	EXTERN ____sdcc_4_push_hlix
131   0000              	EXTERN ____sdcc_4_push_mhl
132   0000              	EXTERN ____sdcc_lib_setmem_hl
133   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
134   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
135   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
136   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
137   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
138   0000              	EXTERN ____sdcc_ll_add_deix_hlix
139   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
140   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
141   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
142   0000              	EXTERN ____sdcc_ll_asr_hlix_a
143   0000              	EXTERN ____sdcc_ll_asr_mbc_a
144   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
145   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
146   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
147   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
148   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
149   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
150   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
151   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
152   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
153   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
155   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
156   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
157   0000              	EXTERN ____sdcc_ll_push_hlix
158   0000              	EXTERN ____sdcc_ll_push_mhl
159   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
160   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
161   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
162   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
163   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
164   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
165   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
166   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
167   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
168   0000              	EXTERN ____sdcc_load_debc_deix
169   0000              	EXTERN ____sdcc_load_dehl_deix
170   0000              	EXTERN ____sdcc_load_debc_mhl
171   0000              	EXTERN ____sdcc_load_hlde_mhl
172   0000              	EXTERN ____sdcc_store_dehl_bcix
173   0000              	EXTERN ____sdcc_store_debc_hlix
174   0000              	EXTERN ____sdcc_store_debc_mhl
175   0000              	EXTERN ____sdcc_cpu_pop_ei
176   0000              	EXTERN ____sdcc_cpu_pop_ei_jp
177   0000              	EXTERN ____sdcc_cpu_push_di
178   0000              	EXTERN ____sdcc_outi
179   0000              	EXTERN ____sdcc_outi_128
180   0000              	EXTERN ____sdcc_outi_256
181   0000              	EXTERN ____sdcc_ldi
182   0000              	EXTERN ____sdcc_ldi_128
183   0000              	EXTERN ____sdcc_ldi_256
184   0000              
185   0000              ;--------------------------------------------------------
186   0000              ; Public variables in this module
187   0000              ;--------------------------------------------------------
188   0000              	GLOBAL _player_check_map
189   0000              	GLOBAL _player_1up
190   0000              	GLOBAL _player_fix_walk_lin
191   0000              	GLOBAL _player_init
192   0000              	GLOBAL _player_turn
193   0000              	GLOBAL _player_move
194   0000              	GLOBAL _player_check_input
195   0000              	GLOBAL _player_move_input
196   0000              	GLOBAL _player_fire
197   0000              	GLOBAL _player_collision
198   0000              	GLOBAL _player_kill
199   0000              	GLOBAL _player_check_stairs_vertical
200   0000              	GLOBAL _player_check_stairs
201   0000              	GLOBAL _player_tile
202   0000              	GLOBAL _player_pick_item
203   0000              	GLOBAL _player_hit_platform
204   0000              	GLOBAL _player_hit_platform_clear
205   0000              	GLOBAL _player_score_add
206   0000              	GLOBAL _player_check_floor
207   0000              	GLOBAL _player_gasta_brick
208   0000              	GLOBAL _player_move_jump
209   0000              	GLOBAL _player_open_door
210   0000              	GLOBAL _player_lost_life
211   0000              	GLOBAL _player_hit
212   0000              ;--------------------------------------------------------
213   0000              ; Externals used
214   0000              ;--------------------------------------------------------
215   0000              	GLOBAL _ulltoa_callee
216   0000              	GLOBAL _ulltoa
217   0000              	GLOBAL _strtoull_callee
218   0000              	GLOBAL _strtoull
219   0000              	GLOBAL _strtoll_callee
220   0000              	GLOBAL _strtoll
221   0000              	GLOBAL _lltoa_callee
222   0000              	GLOBAL _lltoa
223   0000              	GLOBAL _llabs_callee
224   0000              	GLOBAL _llabs
225   0000              	GLOBAL __lldivu__callee
226   0000              	GLOBAL __lldivu_
227   0000              	GLOBAL __lldiv__callee
228   0000              	GLOBAL __lldiv_
229   0000              	GLOBAL _atoll_callee
230   0000              	GLOBAL _atoll
231   0000              	GLOBAL _realloc_unlocked_callee
232   0000              	GLOBAL _realloc_unlocked
233   0000              	GLOBAL _malloc_unlocked_fastcall
234   0000              	GLOBAL _malloc_unlocked
235   0000              	GLOBAL _free_unlocked_fastcall
236   0000              	GLOBAL _free_unlocked
237   0000              	GLOBAL _calloc_unlocked_callee
238   0000              	GLOBAL _calloc_unlocked
239   0000              	GLOBAL _aligned_alloc_unlocked_callee
240   0000              	GLOBAL _aligned_alloc_unlocked
241   0000              	GLOBAL _realloc_callee
242   0000              	GLOBAL _realloc
243   0000              	GLOBAL _malloc_fastcall
244   0000              	GLOBAL _malloc
245   0000              	GLOBAL _free_fastcall
246   0000              	GLOBAL _free
247   0000              	GLOBAL _calloc_callee
248   0000              	GLOBAL _calloc
249   0000              	GLOBAL _aligned_alloc_callee
250   0000              	GLOBAL _aligned_alloc
251   0000              	GLOBAL _utoa_callee
252   0000              	GLOBAL _utoa
253   0000              	GLOBAL _ultoa_callee
254   0000              	GLOBAL _ultoa
255   0000              	GLOBAL _system_fastcall
256   0000              	GLOBAL _system
257   0000              	GLOBAL _strtoul_callee
258   0000              	GLOBAL _strtoul
259   0000              	GLOBAL _strtol_callee
260   0000              	GLOBAL _strtol
261   0000              	GLOBAL _strtof_callee
262   0000              	GLOBAL _strtof
263   0000              	GLOBAL _strtod_callee
264   0000              	GLOBAL _strtod
265   0000              	GLOBAL _srand_fastcall
266   0000              	GLOBAL _srand
267   0000              	GLOBAL _rand
268   0000              	GLOBAL _quick_exit_fastcall
269   0000              	GLOBAL _quick_exit
270   0000              	GLOBAL _qsort_callee
271   0000              	GLOBAL _qsort
272   0000              	GLOBAL _ltoa_callee
273   0000              	GLOBAL _ltoa
274   0000              	GLOBAL _labs_fastcall
275   0000              	GLOBAL _labs
276   0000              	GLOBAL _itoa_callee
277   0000              	GLOBAL _itoa
278   0000              	GLOBAL _ftoh_callee
279   0000              	GLOBAL _ftoh
280   0000              	GLOBAL _ftog_callee
281   0000              	GLOBAL _ftog
282   0000              	GLOBAL _ftoe_callee
283   0000              	GLOBAL _ftoe
284   0000              	GLOBAL _ftoa_callee
285   0000              	GLOBAL _ftoa
286   0000              	GLOBAL _exit_fastcall
287   0000              	GLOBAL _exit
288   0000              	GLOBAL _dtoh_callee
289   0000              	GLOBAL _dtoh
290   0000              	GLOBAL _dtog_callee
291   0000              	GLOBAL _dtog
292   0000              	GLOBAL _dtoe_callee
293   0000              	GLOBAL _dtoe
294   0000              	GLOBAL _dtoa_callee
295   0000              	GLOBAL _dtoa
296   0000              	GLOBAL _bsearch_callee
297   0000              	GLOBAL _bsearch
298   0000              	GLOBAL _atol_fastcall
299   0000              	GLOBAL _atol
300   0000              	GLOBAL _atoi_fastcall
301   0000              	GLOBAL _atoi
302   0000              	GLOBAL _atof_fastcall
303   0000              	GLOBAL _atof
304   0000              	GLOBAL _atexit_fastcall
305   0000              	GLOBAL _atexit
306   0000              	GLOBAL _at_quick_exit_fastcall
307   0000              	GLOBAL _at_quick_exit
308   0000              	GLOBAL _abs_fastcall
309   0000              	GLOBAL _abs
310   0000              	GLOBAL _abort
311   0000              	GLOBAL __strtou__callee
312   0000              	GLOBAL __strtou_
313   0000              	GLOBAL __strtoi__callee
314   0000              	GLOBAL __strtoi_
315   0000              	GLOBAL __random_uniform_xor_8__fastcall
316   0000              	GLOBAL __random_uniform_xor_8_
317   0000              	GLOBAL __random_uniform_xor_32__fastcall
318   0000              	GLOBAL __random_uniform_xor_32_
319   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
320   0000              	GLOBAL __random_uniform_cmwc_8_
321   0000              	GLOBAL __shellsort__callee
322   0000              	GLOBAL __shellsort_
323   0000              	GLOBAL __quicksort__callee
324   0000              	GLOBAL __quicksort_
325   0000              	GLOBAL __insertion_sort__callee
326   0000              	GLOBAL __insertion_sort_
327   0000              	GLOBAL __ldivu__callee
328   0000              	GLOBAL __ldivu_
329   0000              	GLOBAL __ldiv__callee
330   0000              	GLOBAL __ldiv_
331   0000              	GLOBAL __divu__callee
332   0000              	GLOBAL __divu_
333   0000              	GLOBAL __div__callee
334   0000              	GLOBAL __div_
335   0000              	GLOBAL _NIRVANAP_drawTW_raw_callee
336   0000              	GLOBAL _NIRVANAP_drawTW_raw
337   0000              	GLOBAL _NIRVANAP_drawTW_callee
338   0000              	GLOBAL _NIRVANAP_drawTW
339   0000              	GLOBAL _NIRVANAP_drawW_raw_callee
340   0000              	GLOBAL _NIRVANAP_drawW_raw
341   0000              	GLOBAL _NIRVANAP_drawW_callee
342   0000              	GLOBAL _NIRVANAP_drawW
343   0000              	GLOBAL _NIRVANAP_spriteT_callee
344   0000              	GLOBAL _NIRVANAP_spriteT
345   0000              	GLOBAL _NIRVANAP_fillC_callee
346   0000              	GLOBAL _NIRVANAP_fillC
347   0000              	GLOBAL _NIRVANAP_readC_callee
348   0000              	GLOBAL _NIRVANAP_readC
349   0000              	GLOBAL _NIRVANAP_paintC_callee
350   0000              	GLOBAL _NIRVANAP_paintC
351   0000              	GLOBAL _NIRVANAP_printC_callee
352   0000              	GLOBAL _NIRVANAP_printC
353   0000              	GLOBAL _NIRVANAP_fillT_raw_callee
354   0000              	GLOBAL _NIRVANAP_fillT_raw
355   0000              	GLOBAL _NIRVANAP_fillT_callee
356   0000              	GLOBAL _NIRVANAP_fillT
357   0000              	GLOBAL _NIRVANAP_drawT_raw_callee
358   0000              	GLOBAL _NIRVANAP_drawT_raw
359   0000              	GLOBAL _NIRVANAP_drawT_callee
360   0000              	GLOBAL _NIRVANAP_drawT
361   0000              	GLOBAL _NIRVANAP_stop
362   0000              	GLOBAL _NIRVANAP_start
363   0000              	GLOBAL _debug3
364   0000              	GLOBAL _debug2
365   0000              	GLOBAL _debug
366   0000              	GLOBAL _zx_print_str
367   0000              	GLOBAL _zx_print_int
368   0000              	GLOBAL _zx_print_chr
369   0000              	GLOBAL _zx_print_bonus_time
370   0000              	GLOBAL _zx_isr
371   0000              	GLOBAL _z80_otdr_callee
372   0000              	GLOBAL _z80_otdr
373   0000              	GLOBAL _z80_otir_callee
374   0000              	GLOBAL _z80_otir
375   0000              	GLOBAL _z80_outp_callee
376   0000              	GLOBAL _z80_outp
377   0000              	GLOBAL _z80_indr_callee
378   0000              	GLOBAL _z80_indr
379   0000              	GLOBAL _z80_inir_callee
380   0000              	GLOBAL _z80_inir
381   0000              	GLOBAL _z80_inp_fastcall
382   0000              	GLOBAL _z80_inp
383   0000              	GLOBAL _z80_set_int_state_fastcall
384   0000              	GLOBAL _z80_set_int_state
385   0000              	GLOBAL _z80_get_int_state
386   0000              	GLOBAL _z80_delay_tstate_fastcall
387   0000              	GLOBAL _z80_delay_tstate
388   0000              	GLOBAL _z80_delay_ms_fastcall
389   0000              	GLOBAL _z80_delay_ms
390   0000              	GLOBAL _im2_remove_generic_callback_callee
391   0000              	GLOBAL _im2_remove_generic_callback
392   0000              	GLOBAL _im2_prepend_generic_callback_callee
393   0000              	GLOBAL _im2_prepend_generic_callback
394   0000              	GLOBAL _im2_append_generic_callback_callee
395   0000              	GLOBAL _im2_append_generic_callback
396   0000              	GLOBAL _im2_create_generic_isr_8080_callee
397   0000              	GLOBAL _im2_create_generic_isr_8080
398   0000              	GLOBAL _im2_create_generic_isr_callee
399   0000              	GLOBAL _im2_create_generic_isr
400   0000              	GLOBAL _im2_install_isr_callee
401   0000              	GLOBAL _im2_install_isr
402   0000              	GLOBAL _im2_init_fastcall
403   0000              	GLOBAL _im2_init
404   0000              	GLOBAL _intrinsic_swap_word_32_fastcall
405   0000              	GLOBAL _intrinsic_swap_word_32
406   0000              	GLOBAL _intrinsic_swap_endian_32_fastcall
407   0000              	GLOBAL _intrinsic_swap_endian_32
408   0000              	GLOBAL _intrinsic_swap_endian_16_fastcall
409   0000              	GLOBAL _intrinsic_swap_endian_16
410   0000              	GLOBAL _intrinsic_return_de
411   0000              	GLOBAL _intrinsic_return_bc
412   0000              	GLOBAL _intrinsic_exx
413   0000              	GLOBAL _intrinsic_ex_de_hl
414   0000              	GLOBAL _intrinsic_nop
415   0000              	GLOBAL _intrinsic_im_2
416   0000              	GLOBAL _intrinsic_im_1
417   0000              	GLOBAL _intrinsic_im_0
418   0000              	GLOBAL _intrinsic_retn
419   0000              	GLOBAL _intrinsic_reti
420   0000              	GLOBAL _intrinsic_halt
421   0000              	GLOBAL _intrinsic_ei
422   0000              	GLOBAL _intrinsic_di
423   0000              	GLOBAL _intrinsic_stub
424   0000              	GLOBAL _intrinsic_outi
425   0000              	GLOBAL _intrinsic_ldi
426   0000              	GLOBAL _zx_pattern_fill_callee
427   0000              	GLOBAL _zx_pattern_fill
428   0000              	GLOBAL _zx_saddrpup_fastcall
429   0000              	GLOBAL _zx_saddrpup
430   0000              	GLOBAL _zx_saddrpright_callee
431   0000              	GLOBAL _zx_saddrpright
432   0000              	GLOBAL _zx_saddrpleft_callee
433   0000              	GLOBAL _zx_saddrpleft
434   0000              	GLOBAL _zx_saddrpdown_fastcall
435   0000              	GLOBAL _zx_saddrpdown
436   0000              	GLOBAL _zx_saddrcup_fastcall
437   0000              	GLOBAL _zx_saddrcup
438   0000              	GLOBAL _zx_saddrcright_fastcall
439   0000              	GLOBAL _zx_saddrcright
440   0000              	GLOBAL _zx_saddrcleft_fastcall
441   0000              	GLOBAL _zx_saddrcleft
442   0000              	GLOBAL _zx_saddrcdown_fastcall
443   0000              	GLOBAL _zx_saddrcdown
444   0000              	GLOBAL _zx_saddr2py_fastcall
445   0000              	GLOBAL _zx_saddr2py
446   0000              	GLOBAL _zx_saddr2px_fastcall
447   0000              	GLOBAL _zx_saddr2px
448   0000              	GLOBAL _zx_saddr2cy_fastcall
449   0000              	GLOBAL _zx_saddr2cy
450   0000              	GLOBAL _zx_saddr2cx_fastcall
451   0000              	GLOBAL _zx_saddr2cx
452   0000              	GLOBAL _zx_saddr2aaddr_fastcall
453   0000              	GLOBAL _zx_saddr2aaddr
454   0000              	GLOBAL _zx_py2saddr_fastcall
455   0000              	GLOBAL _zx_py2saddr
456   0000              	GLOBAL _zx_py2aaddr_fastcall
457   0000              	GLOBAL _zx_py2aaddr
458   0000              	GLOBAL _zx_pxy2saddr_callee
459   0000              	GLOBAL _zx_pxy2saddr
460   0000              	GLOBAL _zx_pxy2aaddr_callee
461   0000              	GLOBAL _zx_pxy2aaddr
462   0000              	GLOBAL _zx_px2bitmask_fastcall
463   0000              	GLOBAL _zx_px2bitmask
464   0000              	GLOBAL _zx_cy2saddr_fastcall
465   0000              	GLOBAL _zx_cy2saddr
466   0000              	GLOBAL _zx_cy2aaddr_fastcall
467   0000              	GLOBAL _zx_cy2aaddr
468   0000              	GLOBAL _zx_cxy2saddr_callee
469   0000              	GLOBAL _zx_cxy2saddr
470   0000              	GLOBAL _zx_cxy2aaddr_callee
471   0000              	GLOBAL _zx_cxy2aaddr
472   0000              	GLOBAL _zx_bitmask2px_fastcall
473   0000              	GLOBAL _zx_bitmask2px
474   0000              	GLOBAL _zx_aaddrcup_fastcall
475   0000              	GLOBAL _zx_aaddrcup
476   0000              	GLOBAL _zx_aaddrcright_fastcall
477   0000              	GLOBAL _zx_aaddrcright
478   0000              	GLOBAL _zx_aaddrcleft_fastcall
479   0000              	GLOBAL _zx_aaddrcleft
480   0000              	GLOBAL _zx_aaddrcdown_fastcall
481   0000              	GLOBAL _zx_aaddrcdown
482   0000              	GLOBAL _zx_aaddr2saddr_fastcall
483   0000              	GLOBAL _zx_aaddr2saddr
484   0000              	GLOBAL _zx_aaddr2py_fastcall
485   0000              	GLOBAL _zx_aaddr2py
486   0000              	GLOBAL _zx_aaddr2px_fastcall
487   0000              	GLOBAL _zx_aaddr2px
488   0000              	GLOBAL _zx_aaddr2cy_fastcall
489   0000              	GLOBAL _zx_aaddr2cy
490   0000              	GLOBAL _zx_aaddr2cx_fastcall
491   0000              	GLOBAL _zx_aaddr2cx
492   0000              	GLOBAL _zx_visit_wc_pix_callee
493   0000              	GLOBAL _zx_visit_wc_pix
494   0000              	GLOBAL _zx_visit_wc_attr_callee
495   0000              	GLOBAL _zx_visit_wc_attr
496   0000              	GLOBAL _zx_scroll_wc_up_pix_callee
497   0000              	GLOBAL _zx_scroll_wc_up_pix
498   0000              	GLOBAL _zx_scroll_wc_up_attr_callee
499   0000              	GLOBAL _zx_scroll_wc_up_attr
500   0000              	GLOBAL _zx_scroll_wc_up_callee
501   0000              	GLOBAL _zx_scroll_wc_up
502   0000              	GLOBAL _zx_scroll_up_pix_callee
503   0000              	GLOBAL _zx_scroll_up_pix
504   0000              	GLOBAL _zx_scroll_up_attr_callee
505   0000              	GLOBAL _zx_scroll_up_attr
506   0000              	GLOBAL _zx_scroll_up_callee
507   0000              	GLOBAL _zx_scroll_up
508   0000              	GLOBAL _zx_cls_wc_pix_callee
509   0000              	GLOBAL _zx_cls_wc_pix
510   0000              	GLOBAL _zx_cls_wc_attr_callee
511   0000              	GLOBAL _zx_cls_wc_attr
512   0000              	GLOBAL _zx_cls_wc_callee
513   0000              	GLOBAL _zx_cls_wc
514   0000              	GLOBAL _zx_cls_pix_fastcall
515   0000              	GLOBAL _zx_cls_pix
516   0000              	GLOBAL _zx_cls_attr_fastcall
517   0000              	GLOBAL _zx_cls_attr
518   0000              	GLOBAL _zx_cls_fastcall
519   0000              	GLOBAL _zx_cls
520   0000              	GLOBAL _zx_border_fastcall
521   0000              	GLOBAL _zx_border
522   0000              	GLOBAL _spr_btile_paint_back
523   0000              	GLOBAL _spr_explode_bullet
524   0000              	GLOBAL _spr_init_anim_bullets
525   0000              	GLOBAL _spr_turn_horizontal
526   0000              	GLOBAL _spr_play_bullets
527   0000              	GLOBAL _spr_play_anim
528   0000              	GLOBAL _spr_add_anim
529   0000              	GLOBAL _spr_clear_scr
530   0000              	GLOBAL _spr_page_map
531   0000              	GLOBAL _spr_page_down
532   0000              	GLOBAL _spr_page_up
533   0000              	GLOBAL _spr_page_right
534   0000              	GLOBAL _spr_page_left
535   0000              	GLOBAL _spr_tile_paint
536   0000              	GLOBAL _spr_calc_hor
537   0000              	GLOBAL _spr_draw_row
538   0000              	GLOBAL _spr_draw_index
539   0000              	GLOBAL _spr_brick_anim
540   0000              	GLOBAL _spr_back_repaint
541   0000              	GLOBAL _spr_tile
542   0000              	GLOBAL _spr_destroy
543   0000              	GLOBAL _spr_tile_dir
544   0000              	GLOBAL _spr_redraw
545   0000              	GLOBAL _spr_move_left
546   0000              	GLOBAL _spr_move_right
547   0000              	GLOBAL _spr_move_horizontal
548   0000              	GLOBAL _spr_move_down
549   0000              	GLOBAL _spr_move_up
550   0000              	GLOBAL _spr_calc_index
551   0000              	GLOBAL _spr_chktime
552   0000              	GLOBAL _sound_hit_brick
553   0000              	GLOBAL _sound_hit_enemy
554   0000              	GLOBAL _sound_kill
555   0000              	GLOBAL _sound_enter_enemy
556   0000              	GLOBAL _sound_coin
557   0000              	GLOBAL _sound_jump
558   0000              	GLOBAL _sound_slide
559   0000              	GLOBAL _player_player_hit_pow
560   0000              	GLOBAL _game_match_back
561   0000              	GLOBAL _game_attribs
562   0000              	GLOBAL _game_boss_clear
563   0000              	GLOBAL _game_obj_clear
564   0000              	GLOBAL _game_obj_chk
565   0000              	GLOBAL _game_obj_set
566   0000              	GLOBAL _game_shoot_fire_boss
567   0000              	GLOBAL _game_shoot_fire
568   0000              	GLOBAL _game_add_enemy
569   0000              	GLOBAL _game_print_header
570   0000              	GLOBAL _game_phase_print_score_back
571   0000              	GLOBAL _game_check_time
572   0000              	GLOBAL _game_rotate_attrib_osd
573   0000              	GLOBAL _game_rotate_attrib
574   0000              	GLOBAL _game_colour_message
575   0000              	GLOBAL _game_paint_attrib_lin_osd
576   0000              	GLOBAL _game_paint_attrib_lin_h
577   0000              	GLOBAL _game_paint_attrib_lin
578   0000              	GLOBAL _game_paint_attrib
579   0000              	GLOBAL _game_print_score
580   0000              	GLOBAL _game_unfreeze_all
581   0000              	GLOBAL _game_freeze_all
582   0000              	GLOBAL _game_freeze
583   0000              	GLOBAL _game_enemy_add_get_index
584   0000              	GLOBAL _game_check_cell
585   0000              	GLOBAL _game_check_map
586   0000              	GLOBAL _game_loop
587   0000              	GLOBAL _game_round_init
588   0000              	GLOBAL _game_start_timer
589   0000              	GLOBAL _game_tick
590   0000              	GLOBAL _game_update_stats
591   0000              	GLOBAL _game_print_footer
592   0000              	GLOBAL _game_fill_row
593   0000              	GLOBAL _game_fps
594   0000              	GLOBAL _game_respawn
595   0000              	GLOBAL _game_draw_screen
596   0000              	GLOBAL _boss_turn
597   0000              	GLOBAL _enemy_avoid_dead
598   0000              	GLOBAL _enemy_avoid_fall
599   0000              	GLOBAL _enemy_respawn
600   0000              	GLOBAL _enemy_init
601   0000              	GLOBAL _enemy_move
602   0000              	GLOBAL _enemy_turn
603   0000              	GLOBAL _enemy_hit
604   0000              	GLOBAL _enemy_coin1
605   0000              	GLOBAL _enemy_static
606   0000              	GLOBAL _enemy_walk
607   0000              	GLOBAL _enemy_horizontal
608   0000              	GLOBAL _enemy_vertical
609   0000              	GLOBAL _ay_fx_play
610   0000              	GLOBAL _ay_midi_play
611   0000              	GLOBAL _ay_is_playing
612   0000              	GLOBAL _ay_reset
613   0000              	GLOBAL _test_func
614   0000              	GLOBAL _test_proc
615   0000              	GLOBAL _in_mouse_kempston_wheel_delta
616   0000              	GLOBAL _in_mouse_kempston_wheel
617   0000              	GLOBAL _in_mouse_kempston_callee
618   0000              	GLOBAL _in_mouse_kempston
619   0000              	GLOBAL _in_mouse_kempston_setpos_callee
620   0000              	GLOBAL _in_mouse_kempston_setpos
621   0000              	GLOBAL _in_mouse_kempston_reset
622   0000              	GLOBAL _in_mouse_kempston_init
623   0000              	GLOBAL _in_mouse_amx_wheel_delta
624   0000              	GLOBAL _in_mouse_amx_wheel
625   0000              	GLOBAL _in_mouse_amx_callee
626   0000              	GLOBAL _in_mouse_amx
627   0000              	GLOBAL _in_mouse_amx_setpos_callee
628   0000              	GLOBAL _in_mouse_amx_setpos
629   0000              	GLOBAL _in_mouse_amx_reset
630   0000              	GLOBAL _in_mouse_amx_init_callee
631   0000              	GLOBAL _in_mouse_amx_init
632   0000              	GLOBAL _in_stick_sinclair2
633   0000              	GLOBAL _in_stick_sinclair1
634   0000              	GLOBAL _in_stick_kempston
635   0000              	GLOBAL _in_stick_fuller
636   0000              	GLOBAL _in_stick_cursor
637   0000              	GLOBAL _in_stick_keyboard_fastcall
638   0000              	GLOBAL _in_stick_keyboard
639   0000              	GLOBAL _in_wait_nokey
640   0000              	GLOBAL _in_wait_key
641   0000              	GLOBAL _in_test_key
642   0000              	GLOBAL _in_pause_fastcall
643   0000              	GLOBAL _in_pause
644   0000              	GLOBAL _in_key_scancode_fastcall
645   0000              	GLOBAL _in_key_scancode
646   0000              	GLOBAL _in_key_pressed_fastcall
647   0000              	GLOBAL _in_key_pressed
648   0000              	GLOBAL _in_inkey
649   0000              	GLOBAL _NIRVANAP_CHAR_TABLE
650   0000              	GLOBAL _NIRVANAP_WIDE_IMAGES
651   0000              	GLOBAL _NIRVANAP_TILE_IMAGES
652   0000              	GLOBAL _NIRVANAP_HOLE
653   0000              	GLOBAL _NIRVANAP_ISR_HOOK
654   0000              	GLOBAL _player_lvl_table
655   0000              	GLOBAL _map_paper_last
656   0000              	GLOBAL _map_paper_clr
657   0000              	GLOBAL _map_paper
658   0000              	GLOBAL _draw_count
659   0000              	GLOBAL _g_player_hit_right
660   0000              	GLOBAL _g_player_hit_left
661   0000              	GLOBAL _joynames
662   0000              	GLOBAL _initials
663   0000              	GLOBAL _bullet_count
664   0000              	GLOBAL _spr_hack
665   0000              	GLOBAL _boss_stat
666   0000              	GLOBAL _boss_time_fire
667   0000              	GLOBAL _boss_time
668   0000              	GLOBAL _boss_tile
669   0000              	GLOBAL _boss_inc
670   0000              	GLOBAL _boss_col
671   0000              	GLOBAL _boss_lin
672   0000              	GLOBAL _bullet_vel
673   0000              	GLOBAL _bullet_frames
674   0000              	GLOBAL _bullet_colint
675   0000              	GLOBAL _bullet_dir
676   0000              	GLOBAL _bullet_tile
677   0000              	GLOBAL _bullet_col
678   0000              	GLOBAL _bullet_lin
679   0000              	GLOBAL _bullet_col0
680   0000              	GLOBAL _bullet_lin0
681   0000              	GLOBAL _bullet_max
682   0000              	GLOBAL _bullet_class
683   0000              	GLOBAL _mush_class
684   0000              	GLOBAL _mush_index
685   0000              	GLOBAL _anim_count
686   0000              	GLOBAL _anim_respanwn
687   0000              	GLOBAL _anim_loop
688   0000              	GLOBAL _anim_end
689   0000              	GLOBAL _anim_int
690   0000              	GLOBAL _anim_tile
691   0000              	GLOBAL _anim_col
692   0000              	GLOBAL _anim_lin
693   0000              	GLOBAL _map_heigth
694   0000              	GLOBAL _map_width
695   0000              	GLOBAL _scr_curr
696   0000              	GLOBAL _scr_obj1
697   0000              	GLOBAL _scr_obj0
698   0000              	GLOBAL _scr_map
699   0000              	GLOBAL _sprite_speed_alt
700   0000              	GLOBAL _sprite_frames
701   0000              	GLOBAL _sprite_speed
702   0000              	GLOBAL _screen_ink
703   0000              	GLOBAL _screen_paper
704   0000              	GLOBAL _player_onstair
705   0000              	GLOBAL _game_start_scr
706   0000              	GLOBAL _game_respawn_tile
707   0000              	GLOBAL _game_respawn_index
708   0000              	GLOBAL _game_respawn_time
709   0000              	GLOBAL _game_menu_sel
710   0000              	GLOBAL _game_score_top
711   0000              	GLOBAL _player_coins
712   0000              	GLOBAL _player_lives
713   0000              	GLOBAL _game_over
714   0000              	GLOBAL _game_sound
715   0000              	GLOBAL _game_inmune
716   0000              	GLOBAL _game_god_mode
717   0000              	GLOBAL _game_two_player
718   0000              	GLOBAL _game_brick_tile
719   0000              	GLOBAL _sprite_curr_index
720   0000              	GLOBAL _spr_count
721   0000              	GLOBAL _bullet_time
722   0000              	GLOBAL _anim_time
723   0000              	GLOBAL _frame_time
724   0000              	GLOBAL _entry_time
725   0000              	GLOBAL _curr_time
726   0000              	GLOBAL _s_state
727   0000              	GLOBAL _attrib_osd
728   0000              	GLOBAL _attrib_hl
729   0000              	GLOBAL _attrib
730   0000              	GLOBAL _zx_val_asm
731   0000              	GLOBAL _enemies
732   0000              	GLOBAL _tmp_ui
733   0000              	GLOBAL _tmp_sc
734   0000              	GLOBAL _tmp_uc
735   0000              	GLOBAL _tmp1
736   0000              	GLOBAL _tmp0
737   0000              	GLOBAL _tmp
738   0000              	GLOBAL _index1
739   0000              	GLOBAL _index0
740   0000              	GLOBAL _loop_count
741   0000              	GLOBAL _s_col1
742   0000              	GLOBAL _s_col0
743   0000              	GLOBAL _s_lin1
744   0000              	GLOBAL _s_lin0
745   0000              	GLOBAL _s_tile1
746   0000              	GLOBAL _s_tile0
747   0000              	GLOBAL _player_brick_time
748   0000              	GLOBAL _player_hit_count
749   0000              	GLOBAL _sprite_horizontal_check
750   0000              	GLOBAL _sprite_on_air
751   0000              	GLOBAL _sprite
752   0000              	GLOBAL _fps
753   0000              	GLOBAL _game_respawn_curr_time
754   0000              	GLOBAL _game_worldup
755   0000              	GLOBAL _game_mush_count
756   0000              	GLOBAL _game_boss_fix
757   0000              	GLOBAL _game_boss_hit
758   0000              	GLOBAL _game_boss_alive
759   0000              	GLOBAL _game_boss
760   0000              	GLOBAL _game_world
761   0000              	GLOBAL _game_gravity
762   0000              	GLOBAL _player_anim_stair
763   0000              	GLOBAL _player_hit_time
764   0000              	GLOBAL _player_lin_scr
765   0000              	GLOBAL _player_col_scr
766   0000              	GLOBAL _player_lvl
767   0000              	GLOBAL _player_int
768   0000              	GLOBAL _player_str
769   0000              	GLOBAL _player_max_vita
770   0000              	GLOBAL _player_max_mana
771   0000              	GLOBAL _player_vita
772   0000              	GLOBAL _player_mana
773   0000              	GLOBAL _player_keys
774   0000              	GLOBAL _player_vel_inc
775   0000              	GLOBAL _player_vel_y1
776   0000              	GLOBAL _player_vel_y0
777   0000              	GLOBAL _player_vel_y
778   0000              	GLOBAL _player_vel_x
779   0000              	GLOBAL _player_joy
780   0000              	GLOBAL _player_score
781   0000              	GLOBAL _last_time
782   0000              	GLOBAL _player_slide
783   0000              	GLOBAL _spr_timer
784   0000              	GLOBAL _jump_lin
785   0000              	GLOBAL _player_hit_col
786   0000              	GLOBAL _player_hit_lin
787   0000              	GLOBAL _colint
788   0000              	GLOBAL _col
789   0000              	GLOBAL _lin
790   0000              	GLOBAL _tile
791   0000              	GLOBAL _state_a
792   0000              	GLOBAL _state
793   0000              	GLOBAL _class
794   0000              	GLOBAL _tbuffer
795   0000              	GLOBAL _dirs
796   0000              	GLOBAL _k1
797   0000              	GLOBAL _joyfunc1
798   0000              	GLOBAL _btiles
799   0000              	GLOBAL _spec128
800   0000              	GLOBAL _GLOBAL_ZX_PORT_7FFD
801   0000              	GLOBAL _GLOBAL_ZX_PORT_1FFD
802   0000              	GLOBAL _GLOBAL_ZX_PORT_FE
803   0000              	GLOBAL _ay_effect_20
804   0000              	GLOBAL _ay_effect_19
805   0000              	GLOBAL _ay_effect_18
806   0000              	GLOBAL _ay_effect_17
807   0000              	GLOBAL _ay_effect_16
808   0000              	GLOBAL _ay_effect_15
809   0000              	GLOBAL _ay_effect_14
810   0000              	GLOBAL _ay_effect_13
811   0000              	GLOBAL _ay_effect_12
812   0000              	GLOBAL _ay_effect_11
813   0000              	GLOBAL _ay_effect_10
814   0000              	GLOBAL _ay_effect_09
815   0000              	GLOBAL _ay_effect_08
816   0000              	GLOBAL _ay_effect_07
817   0000              	GLOBAL _ay_effect_06
818   0000              	GLOBAL _ay_effect_05
819   0000              	GLOBAL _ay_effect_04
820   0000              	GLOBAL _ay_effect_03
821   0000              	GLOBAL _ay_effect_02
822   0000              	GLOBAL _ay_effect_01
823   0000              	GLOBAL _pb_midi_phase_1
824   0000              	GLOBAL _pb_midi_title
825   0000              	GLOBAL _control_method
826   0000              	GLOBAL _world1_h
827   0000              	GLOBAL _world1_w
828   0000              	GLOBAL _world1
829   0000              	GLOBAL _paper1
830   0000              	GLOBAL _lenght1
831   0000              	GLOBAL _start_scr1
832   0000              	GLOBAL _world0_h
833   0000              	GLOBAL _world0_w
834   0000              	GLOBAL _world0
835   0000              	GLOBAL _paper0
836   0000              	GLOBAL _lenght0
837   0000              	GLOBAL _start_scr0
838   0000              ;--------------------------------------------------------
839   0000              ; special function registers
840   0000              ;--------------------------------------------------------
841   0000              defc _IO_FE	=	0x00fe
842   0000              defc _IO_1FFD	=	0x1ffd
843   0000              defc _IO_7FFD	=	0x7ffd
844   0000              ;--------------------------------------------------------
845   0000              ; ram data
846   0000              ;--------------------------------------------------------
847   0000              	SECTION bss_compiler
848   0000              ;--------------------------------------------------------
849   0000              ; ram data
850   0000              ;--------------------------------------------------------
851   0000              
852   0000              IF 0
853   0000              
854   0000              ; .area _INITIALIZED removed by z88dk
855   0000              
856   0000              
857   0000              ENDIF
858   0000              
859   0000              ;--------------------------------------------------------
860   0000              ; absolute external ram data
861   0000              ;--------------------------------------------------------
862   0000              	SECTION IGNORE
863   0000              ;--------------------------------------------------------
864   0000              ; global & static initialisations
865   0000              ;--------------------------------------------------------
866   0000              	SECTION code_crt_init
867   0000              ;--------------------------------------------------------
868   0000              ; Home
869   0000              ;--------------------------------------------------------
870   0000              	SECTION IGNORE
871   0000              ;--------------------------------------------------------
872   0000              ; code
873   0000              ;--------------------------------------------------------
874   0000              	SECTION code_compiler
875   0000              ;	---------------------------------
876   0000              ; Function player_init
877   0000              ; ---------------------------------
878   0000              _player_init:
879   0000  CD 00 00    	call	___sdcc_enter_ix
880   0003  21 07 00    	ld	hl, +(_class + 0x0007)
881   0006  36 00       	ld	(hl),0x00
882   0008  21 07 00    	ld	hl, +(_tile + 0x0007)
883   000B  DD 7E 06    	ld	a,(ix+6)
884   000E  77          	ld	(hl), a
885   000F  21 07 00    	ld	hl, +(_lin + 0x0007)
886   0012  DD 7E 04    	ld	a,(ix+4)
887   0015  77          	ld	(hl), a
888   0016  21 07 00    	ld	hl, +(_col + 0x0007)
889   0019  DD 7E 05    	ld	a,(ix+5)
890   001C  77          	ld	(hl), a
891   001D  21 07 00    	ld	hl, +(_colint + 0x0007)
892   0020  36 00       	ld	(hl),0x00
893   0022  21 07 00    	ld	hl, +(_state + 0x0007)
894   0025  36 00       	ld	(hl),0x00
895   0027  01 07 00    	ld	bc,_state_a+7
896   002A  AF          	xor	a, a
897   002B  02          	ld	(bc), a
898   002C  21 07 00    	ld	hl, +(_jump_lin + 0x0007)
899   002F  DD 7E 04    	ld	a,(ix+4)
900   0032  77          	ld	(hl), a
901   0033  ED 5B 00 00 	ld	de,(_curr_time)
902   0037  ED 53 0E 00 	ld	(_last_time + 0x000e),de
903   003B  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
904   003E  36 00       	ld	(hl),0x00
905   0040  0A          	ld	a, (bc)
906   0041  F6 11       	or	a,+(0x01|0x10)
907   0043  02          	ld	(bc),a
908   0044  21 00 00    	ld	hl,_player_hit_col
909   0047  36 00       	ld	(hl),0x00
910   0049  21 00 00    	ld	hl,_player_hit_lin
911   004C  36 00       	ld	(hl),0x00
912   004E  21 00 00    	ld	hl,_player_slide
913   0051  36 00       	ld	(hl),0x00
914   0053  DD 66 05    	ld	h,(ix+5)
915   0056  DD 6E 04    	ld	l,(ix+4)
916   0059  E5          	push	hl
917   005A  DD 56 06    	ld	d,(ix+6)
918   005D  1E 07       	ld	e,0x07
919   005F  D5          	push	de
920   0060  CD 00 00    	call	_NIRVANAP_spriteT_callee
921   0063  DD E1       	pop	ix
922   0065  C9          	ret
923   0066              	SECTION code_compiler
924   0066              ;	---------------------------------
925   0066              ; Function player_turn
926   0066              ; ---------------------------------
927   0066              _player_turn:
928   0066  21 00 00    	ld	hl,_sprite
929   0069  CD 00 00    	call	_spr_chktime
930   006C  7D          	ld	a, l
931   006D  B7          	or	a, a
932   006E  C8          	ret	Z
933   006F  21 00 00    	ld	hl,_k1
934   0072  E5          	push	hl
935   0073  2A 00 00    	ld	hl,(_joyfunc1)
936   0076  CD 00 00    	call	___sdcc_call_hl
937   0079  F1          	pop	af
938   007A  7D          	ld	a,l
939   007B  32 00 00    	ld	(_dirs),a
940   007E  CD 84 00    	call	_player_move
941   0081  C3 66 03    	jp  _player_collision
942   0084              	SECTION code_compiler
943   0084              ;	---------------------------------
944   0084              ; Function player_move
945   0084              ; ---------------------------------
946   0084              _player_move:
947   0084  3A 07 00    	ld	a,(_lin + 0x0007)
948   0087  32 00 00    	ld	(_s_lin0),a
949   008A  3A 07 00    	ld	a,(_col + 0x0007)
950   008D  32 00 00    	ld	(_s_col0),a
951   0090  21 07 00    	ld	hl,+(_tile + 0x0007)
952   0093  4E          	ld	c, (hl)
953   0094  21 07 00    	ld	hl,+(_colint + 0x0007)
954   0097  46          	ld	b, (hl)
955   0098  79          	ld	a, c
956   0099  80          	add	a, b
957   009A  32 00 00    	ld	(_s_tile0),a
958   009D  3A 07 00    	ld	a,(_state + 0x0007)
959   00A0  32 00 00    	ld	(_s_state),a
960   00A3  21 00 00    	ld	hl,_s_state
961   00A6  CB 46       	bit	0, (hl)
962   00A8  20 07       	jr	NZ,l_player_move_00113
963   00AA  21 00 00    	ld	hl,_s_state
964   00AD  CB 4E       	bit	1, (hl)
965   00AF  28 49       	jr	Z,l_player_move_00114
966   00B1              l_player_move_00113:
967   00B1  CD 1D 03    	call	_player_fire
968   00B4  3A 00 00    	ld	a,(_player_vel_y)
969   00B7  21 00 00    	ld	hl,_player_vel_y1
970   00BA  96          	sub	a, (hl)
971   00BB  E2 C0 00    	jp	PO, l_player_move_00162
972   00BE  EE 80       	xor	a,0x80
973   00C0              l_player_move_00162:
974   00C0  F2 E3 00    	jp	P, l_player_move_00106
975   00C3  21 00 00    	ld	hl,_dirs
976   00C6  CB 56       	bit	2, (hl)
977   00C8  28 09       	jr	Z,l_player_move_00102
978   00CA  21 00 00    	ld	hl,_s_state
979   00CD  7E          	ld	a,(hl)
980   00CE  F6 08       	or	a,0x08
981   00D0  E6 FB       	and	a,0xfb
982   00D2  77          	ld	(hl),a
983   00D3              l_player_move_00102:
984   00D3  21 00 00    	ld	hl,_dirs
985   00D6  CB 4E       	bit	1, (hl)
986   00D8  28 09       	jr	Z,l_player_move_00106
987   00DA  21 00 00    	ld	hl,_s_state
988   00DD  7E          	ld	a,(hl)
989   00DE  F6 04       	or	a,0x04
990   00E0  E6 F7       	and	a,0xf7
991   00E2  77          	ld	(hl),a
992   00E3              l_player_move_00106:
993   00E3  CD 82 0D    	call	_player_move_jump
994   00E6  7D          	ld	a, l
995   00E7  B7          	or	a, a
996   00E8  28 1C       	jr	Z,l_player_move_00115
997   00EA  3A 00 00    	ld	a,(_player_onstair)
998   00ED  B7          	or	a, a
999   00EE  20 16       	jr	NZ,l_player_move_00115
1000  00F0  21 60 08    	ld	hl,0x0860
1001  00F3  E5          	push	hl
1002  00F4  CD BB 06    	call	_player_tile
1003  00F7  F1          	pop	af
1004  00F8  18 0C       	jr	l_player_move_00115
1005  00FA              l_player_move_00114:
1006  00FA  CD 61 01    	call	_player_move_input
1007  00FD  3A 00 00    	ld	a,(_player_onstair)
1008  0100  B7          	or	a, a
1009  0101  20 03       	jr	NZ,l_player_move_00115
1010  0103  CD FD 0B    	call	_player_check_floor
1011  0106              l_player_move_00115:
1012  0106  CD 00 00    	call	_spr_redraw
1013  0109  7D          	ld	a, l
1014  010A  B7          	or	a, a
1015  010B  28 03       	jr	Z,l_player_move_00118
1016  010D  CD D6 06    	call	_player_check_map
1017  0110              l_player_move_00118:
1018  0110  3A 00 00    	ld	a,(_player_hit_lin)
1019  0113  B7          	or	a, a
1020  0114  28 03       	jr	Z,l_player_move_00120
1021  0116  CD 6A 0B    	call	_player_hit_platform_clear
1022  0119              l_player_move_00120:
1023  0119  3A 00 00    	ld	a,(_s_state)
1024  011C  32 07 00    	ld	((_state + 0x0007)),a
1025  011F  2E 00       	ld	l,0x00
1026  0121  C9          	ret
1027  0122              	SECTION code_compiler
1028  0122              ;	---------------------------------
1029  0122              ; Function player_check_input
1030  0122              ; ---------------------------------
1031  0122              _player_check_input:
1032  0122  21 00 00    	ld	hl,_dirs
1033  0125  CB 56       	bit	2, (hl)
1034  0127  28 0C       	jr	Z,l_player_check_input_00102
1035  0129  21 00 00    	ld	hl,_dirs
1036  012C  CB 5E       	bit	3, (hl)
1037  012E  28 05       	jr	Z,l_player_check_input_00102
1038  0130  21 00 00    	ld	hl,_dirs
1039  0133  36 00       	ld	(hl),0x00
1040  0135              l_player_check_input_00102:
1041  0135  21 00 00    	ld	hl,_dirs
1042  0138  7E          	ld	a, (hl)
1043  0139  CB 07       	rlc	a
1044  013B  E6 01       	and	a,0x01
1045  013D  CB 47       	bit	0, a
1046  013F  20 1D       	jr	NZ,l_player_check_input_00107
1047  0141  CB 56       	bit	2, (hl)
1048  0143  20 19       	jr	NZ,l_player_check_input_00107
1049  0145  21 00 00    	ld	hl,_dirs
1050  0148  CB 5E       	bit	3, (hl)
1051  014A  20 12       	jr	NZ,l_player_check_input_00107
1052  014C  21 00 00    	ld	hl,_dirs
1053  014F  CB 46       	bit	0, (hl)
1054  0151  20 0B       	jr	NZ,l_player_check_input_00107
1055  0153  21 00 00    	ld	hl,_dirs
1056  0156  CB 4E       	bit	1, (hl)
1057  0158  20 04       	jr	NZ,l_player_check_input_00107
1058  015A  2E 00       	ld	l,0x00
1059  015C  18 02       	jr	l_player_check_input_00108
1060  015E              l_player_check_input_00107:
1061  015E  2E 01       	ld	l,0x01
1062  0160              l_player_check_input_00108:
1063  0160  C9          	ret
1064  0161              	SECTION code_compiler
1065  0161              ;	---------------------------------
1066  0161              ; Function player_move_input
1067  0161              ; ---------------------------------
1068  0161              _player_move_input:
1069  0161  CD 22 01    	call	_player_check_input
1070  0164  7D          	ld	a, l
1071  0165  B7          	or	a, a
1072  0166  CA D0 02    	jp	Z, l_player_move_input_00147
1073  0169  CD 1D 03    	call	_player_fire
1074  016C  7D          	ld	a, l
1075  016D  B7          	or	a, a
1076  016E  28 0A       	jr	Z,l_player_move_input_00102
1077  0170  21 00 00    	ld	hl,_dirs
1078  0173  36 00       	ld	(hl),0x00
1079  0175  2E 00       	ld	l,0x00
1080  0177  C3 F6 02    	jp	l_player_move_input_00149
1081  017A              l_player_move_input_00102:
1082  017A  21 00 00    	ld	hl,_dirs
1083  017D  CB 7E       	bit	7, (hl)
1084  017F  28 54       	jr	Z,l_player_move_input_00106
1085  0181  21 00 00    	ld	hl,_dirs
1086  0184  CB 46       	bit	0, (hl)
1087  0186  28 4D       	jr	Z,l_player_move_input_00106
1088  0188  21 00 00    	ld	hl,_player_vel_inc
1089  018B  36 01       	ld	(hl),0x01
1090  018D  CD 00 00    	call	_ay_is_playing
1091  0190  7D          	ld	a, l
1092  0191  D6 03       	sub	a,0x03
1093  0193  28 06       	jr	Z,l_player_move_input_00104
1094  0195  21 00 00    	ld	hl,_ay_effect_03
1095  0198  CD 00 00    	call	_ay_fx_play
1096  019B              l_player_move_input_00104:
1097  019B  21 00 00    	ld	hl,_player_onstair
1098  019E  36 00       	ld	(hl),0x00
1099  01A0  CD 00 00    	call	_sound_jump
1100  01A3  21 00 00    	ld	hl,_s_state
1101  01A6  7E          	ld	a,(hl)
1102  01A7  F6 01       	or	a,0x01
1103  01A9  E6 FD       	and	a,0xfd
1104  01AB  77          	ld	(hl),a
1105  01AC  3A 07 00    	ld	a,(_lin + 0x0007)
1106  01AF  32 07 00    	ld	((_jump_lin + 0x0007)),a
1107  01B2  3A 00 00    	ld	a,(_s_state)
1108  01B5  32 07 00    	ld	((_state + 0x0007)),a
1109  01B8  21 64 08    	ld	hl,0x0864
1110  01BB  E5          	push	hl
1111  01BC  CD BB 06    	call	_player_tile
1112  01BF  F1          	pop	af
1113  01C0  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
1114  01C3  36 02       	ld	(hl),0x02
1115  01C5  21 00 00    	ld	hl,_player_slide
1116  01C8  36 00       	ld	(hl),0x00
1117  01CA  3A 00 00    	ld	a,(_player_vel_y0)
1118  01CD  32 00 00    	ld	(_player_vel_y),a
1119  01D0  2E 01       	ld	l,0x01
1120  01D2  C3 F6 02    	jp	l_player_move_input_00149
1121  01D5              l_player_move_input_00106:
1122  01D5  21 00 00    	ld	hl,_dirs
1123  01D8  CB 5E       	bit	3, (hl)
1124  01DA  28 23       	jr	Z,l_player_move_input_00111
1125  01DC  CD F7 02    	call	_player_fix_walk_lin
1126  01DF  21 00 00    	ld	hl,_s_state
1127  01E2  7E          	ld	a,(hl)
1128  01E3  F6 04       	or	a,0x04
1129  01E5  E6 F7       	and	a,0xf7
1130  01E7  77          	ld	(hl),a
1131  01E8  01 07 00    	ld	bc,_state_a+7
1132  01EB  0A          	ld	a, (bc)
1133  01EC  F6 10       	or	a,0x10
1134  01EE  E6 F7       	and	a,0xf7
1135  01F0  02          	ld	(bc),a
1136  01F1  3A 00 00    	ld	a,(_player_onstair)
1137  01F4  B7          	or	a, a
1138  01F5  28 05       	jr	Z,l_player_move_input_00109
1139  01F7  2E 00       	ld	l,0x00
1140  01F9  CD 29 06    	call	_player_check_stairs
1141  01FC              l_player_move_input_00109:
1142  01FC  CD 00 00    	call	_spr_move_horizontal
1143  01FF              l_player_move_input_00111:
1144  01FF  21 00 00    	ld	hl,_dirs
1145  0202  CB 56       	bit	2, (hl)
1146  0204  28 23       	jr	Z,l_player_move_input_00115
1147  0206  CD F7 02    	call	_player_fix_walk_lin
1148  0209  21 00 00    	ld	hl,_s_state
1149  020C  7E          	ld	a,(hl)
1150  020D  F6 08       	or	a,0x08
1151  020F  E6 FB       	and	a,0xfb
1152  0211  77          	ld	(hl),a
1153  0212  01 07 00    	ld	bc,_state_a+7
1154  0215  0A          	ld	a, (bc)
1155  0216  F6 08       	or	a,0x08
1156  0218  E6 EF       	and	a,0xef
1157  021A  02          	ld	(bc),a
1158  021B  3A 00 00    	ld	a,(_player_onstair)
1159  021E  B7          	or	a, a
1160  021F  28 05       	jr	Z,l_player_move_input_00113
1161  0221  2E 00       	ld	l,0x00
1162  0223  CD 29 06    	call	_player_check_stairs
1163  0226              l_player_move_input_00113:
1164  0226  CD 00 00    	call	_spr_move_horizontal
1165  0229              l_player_move_input_00115:
1166  0229  21 00 00    	ld	hl,_dirs
1167  022C  CB 46       	bit	0, (hl)
1168  022E  28 3C       	jr	Z,l_player_move_input_00127
1169  0230  2E 00       	ld	l,0x00
1170  0232  CD 29 06    	call	_player_check_stairs
1171  0235  3A 00 00    	ld	a,(_player_onstair)
1172  0238  B7          	or	a, a
1173  0239  20 13       	jr	NZ,l_player_move_input_00119
1174  023B  2E 01       	ld	l,0x01
1175  023D  CD 29 06    	call	_player_check_stairs
1176  0240  3A 00 00    	ld	a,(_player_onstair)
1177  0243  B7          	or	a, a
1178  0244  20 08       	jr	NZ,l_player_move_input_00119
1179  0246  3E FE       	ld	a,0xfe
1180  0248  F5          	push	af
1181  0249  33          	inc	sp
1182  024A  CD 80 05    	call	_player_check_stairs_vertical
1183  024D  33          	inc	sp
1184  024E              l_player_move_input_00119:
1185  024E  3A 00 00    	ld	a,(_player_onstair)
1186  0251  B7          	or	a, a
1187  0252  28 05       	jr	Z,l_player_move_input_00124
1188  0254  CD 00 00    	call	_spr_move_up
1189  0257  18 13       	jr	l_player_move_input_00127
1190  0259              l_player_move_input_00124:
1191  0259  21 00 00    	ld	hl,_dirs
1192  025C  CB 5E       	bit	3, (hl)
1193  025E  20 0C       	jr	NZ,l_player_move_input_00127
1194  0260  21 00 00    	ld	hl,_dirs
1195  0263  CB 56       	bit	2, (hl)
1196  0265  20 05       	jr	NZ,l_player_move_input_00127
1197  0267  2E 00       	ld	l,0x00
1198  0269  C3 F6 02    	jp	l_player_move_input_00149
1199  026C              l_player_move_input_00127:
1200  026C  21 00 00    	ld	hl,_dirs
1201  026F  CB 4E       	bit	1, (hl)
1202  0271  28 3B       	jr	Z,l_player_move_input_00139
1203  0273  2E 00       	ld	l,0x00
1204  0275  CD 29 06    	call	_player_check_stairs
1205  0278  3A 00 00    	ld	a,(_player_onstair)
1206  027B  B7          	or	a, a
1207  027C  20 13       	jr	NZ,l_player_move_input_00131
1208  027E  2E 01       	ld	l,0x01
1209  0280  CD 29 06    	call	_player_check_stairs
1210  0283  3A 00 00    	ld	a,(_player_onstair)
1211  0286  B7          	or	a, a
1212  0287  20 08       	jr	NZ,l_player_move_input_00131
1213  0289  3E 12       	ld	a,0x12
1214  028B  F5          	push	af
1215  028C  33          	inc	sp
1216  028D  CD 80 05    	call	_player_check_stairs_vertical
1217  0290  33          	inc	sp
1218  0291              l_player_move_input_00131:
1219  0291  3A 00 00    	ld	a,(_player_onstair)
1220  0294  B7          	or	a, a
1221  0295  28 05       	jr	Z,l_player_move_input_00136
1222  0297  CD 00 00    	call	_spr_move_down
1223  029A  18 12       	jr	l_player_move_input_00139
1224  029C              l_player_move_input_00136:
1225  029C  21 00 00    	ld	hl,_dirs
1226  029F  CB 5E       	bit	3, (hl)
1227  02A1  20 0B       	jr	NZ,l_player_move_input_00139
1228  02A3  21 00 00    	ld	hl,_dirs
1229  02A6  CB 56       	bit	2, (hl)
1230  02A8  20 04       	jr	NZ,l_player_move_input_00139
1231  02AA  2E 00       	ld	l,0x00
1232  02AC  18 48       	jr	l_player_move_input_00149
1233  02AE              l_player_move_input_00139:
1234  02AE  3A 00 00    	ld	a,(_s_state)
1235  02B1  32 07 00    	ld	((_state + 0x0007)),a
1236  02B4  3A 00 00    	ld	a,(_player_onstair)
1237  02B7  B7          	or	a, a
1238  02B8  28 0A       	jr	Z,l_player_move_input_00141
1239  02BA  21 72 00    	ld	hl,0x0072
1240  02BD  E5          	push	hl
1241  02BE  CD BB 06    	call	_player_tile
1242  02C1  F1          	pop	af
1243  02C2  18 08       	jr	l_player_move_input_00142
1244  02C4              l_player_move_input_00141:
1245  02C4  21 60 08    	ld	hl,0x0860
1246  02C7  E5          	push	hl
1247  02C8  CD BB 06    	call	_player_tile
1248  02CB  F1          	pop	af
1249  02CC              l_player_move_input_00142:
1250  02CC  2E 01       	ld	l,0x01
1251  02CE  18 26       	jr	l_player_move_input_00149
1252  02D0              l_player_move_input_00147:
1253  02D0  21 07 00    	ld	hl, +(_colint + 0x0007)
1254  02D3  36 00       	ld	(hl),0x00
1255  02D5  3A 00 00    	ld	a,(_player_onstair)
1256  02D8  B7          	or	a, a
1257  02D9  28 0A       	jr	Z,l_player_move_input_00144
1258  02DB  21 72 00    	ld	hl,0x0072
1259  02DE  E5          	push	hl
1260  02DF  CD BB 06    	call	_player_tile
1261  02E2  F1          	pop	af
1262  02E3  18 08       	jr	l_player_move_input_00145
1263  02E5              l_player_move_input_00144:
1264  02E5  21 70 01    	ld	hl,0x0170
1265  02E8  E5          	push	hl
1266  02E9  CD BB 06    	call	_player_tile
1267  02EC  F1          	pop	af
1268  02ED              l_player_move_input_00145:
1269  02ED  21 00 00    	ld	hl,_s_state
1270  02F0  7E          	ld	a,(hl)
1271  02F1  E6 F3       	and	a,+(0xf7&0xfb)
1272  02F3  77          	ld	(hl),a
1273  02F4  2E 00       	ld	l,0x00
1274  02F6              l_player_move_input_00149:
1275  02F6  C9          	ret
1276  02F7              	SECTION code_compiler
1277  02F7              ;	---------------------------------
1278  02F7              ; Function player_fix_walk_lin
1279  02F7              ; ---------------------------------
1280  02F7              _player_fix_walk_lin:
1281  02F7  3A 00 00    	ld	a,(_player_onstair)
1282  02FA  B7          	or	a, a
1283  02FB  C0          	ret	NZ
1284  02FC  3A 00 00    	ld	a,(_s_lin0)
1285  02FF  07          	rlca
1286  0300  07          	rlca
1287  0301  07          	rlca
1288  0302  07          	rlca
1289  0303  E6 0F       	and	a,0x0f
1290  0305  07          	rlca
1291  0306  07          	rlca
1292  0307  07          	rlca
1293  0308  07          	rlca
1294  0309  E6 F0       	and	a,0xf0
1295  030B  32 00 00    	ld	(_s_lin1),a
1296  030E  3A 00 00    	ld	a,(_s_lin0)
1297  0311  21 00 00    	ld	hl,_s_lin1
1298  0314  96          	sub	a, (hl)
1299  0315  C8          	ret	Z
1300  0316  3A 00 00    	ld	a,(_s_lin1)
1301  0319  32 07 00    	ld	((_lin + 0x0007)),a
1302  031C  C9          	ret
1303  031D              	SECTION code_compiler
1304  031D              ;	---------------------------------
1305  031D              ; Function player_fire
1306  031D              ; ---------------------------------
1307  031D              _player_fire:
1308  031D  21 00 00    	ld	hl,_dirs
1309  0320  CB 7E       	bit	7, (hl)
1310  0322  28 3F       	jr	Z,l_player_fire_00110
1311  0324  21 00 00    	ld	hl,_dirs
1312  0327  CB 46       	bit	0, (hl)
1313  0329  20 38       	jr	NZ,l_player_fire_00110
1314  032B  21 00 00    	ld	hl,_player_mana
1315  032E  7E          	ld	a, (hl)
1316  032F  B7          	or	a, a
1317  0330  28 2D       	jr	Z,l_player_fire_00107
1318  0332  3A 07 00    	ld	a,(_bullet_col + 0x0007)
1319  0335  3C          	inc	a
1320  0336  20 27       	jr	NZ,l_player_fire_00107
1321  0338  3E 05       	ld	a,0x05
1322  033A  96          	sub	a, (hl)
1323  033B  30 12       	jr	NC,l_player_fire_00104
1324  033D  CD 00 00    	call	_sound_hit_enemy
1325  0340  3A 00 00    	ld	a,(_game_god_mode)
1326  0343  B7          	or	a, a
1327  0344  20 0E       	jr	NZ,l_player_fire_00105
1328  0346  21 00 00    	ld	hl,_player_mana
1329  0349  7E          	ld	a, (hl)
1330  034A  C6 FB       	add	a,0xfb
1331  034C  77          	ld	(hl), a
1332  034D  18 05       	jr	l_player_fire_00105
1333  034F              l_player_fire_00104:
1334  034F  21 00 00    	ld	hl,_player_mana
1335  0352  36 00       	ld	(hl),0x00
1336  0354              l_player_fire_00105:
1337  0354  CD 00 00    	call	_game_update_stats
1338  0357  21 07 78    	ld	hl,0x7807
1339  035A  E5          	push	hl
1340  035B  CD 00 00    	call	_game_shoot_fire
1341  035E  F1          	pop	af
1342  035F              l_player_fire_00107:
1343  035F  2E 01       	ld	l,0x01
1344  0361  18 02       	jr	l_player_fire_00112
1345  0363              l_player_fire_00110:
1346  0363  2E 00       	ld	l,0x00
1347  0365              l_player_fire_00112:
1348  0365  C9          	ret
1349  0366              	SECTION code_compiler
1350  0366              ;	---------------------------------
1351  0366              ; Function player_collision
1352  0366              ; ---------------------------------
1353  0366              _player_collision:
1354  0366  CD 00 00    	call	___sdcc_enter_ix
1355  0369  F5          	push	af
1356  036A  21 19 00    	ld	hl,0x0019
1357  036D  E5          	push	hl
1358  036E  2A 00 00    	ld	hl,(_player_hit_time)
1359  0371  E5          	push	hl
1360  0372  CD 00 00    	call	_game_check_time
1361  0375  F1          	pop	af
1362  0376  F1          	pop	af
1363  0377  7D          	ld	a, l
1364  0378  B7          	or	a, a
1365  0379  CA E7 04    	jp	Z, l_player_collision_00127
1366  037C  21 00 00    	ld	hl,_sprite
1367  037F  36 00       	ld	(hl),0x00
1368  0381  01 00 00    	ld	bc,_col+0
1369  0384  3A 07 00    	ld	a,(_col + 7)
1370  0387  32 00 00    	ld	(_s_col1),a
1371  038A  3A 07 00    	ld	a,(_lin + 7)
1372  038D  32 00 00    	ld	(_s_lin1),a
1373  0390  C6 08       	add	a,0x08
1374  0392  57          	ld	d, a
1375  0393  3A 00 00    	ld	a,(_s_col1)
1376  0396  C5          	push	bc
1377  0397  5A          	ld	e,d
1378  0398  57          	ld	d,a
1379  0399  D5          	push	de
1380  039A  CD 00 00    	call	_spr_calc_index
1381  039D  F1          	pop	af
1382  039E  C1          	pop	bc
1383  039F  7D          	ld	a,l
1384  03A0  32 00 00    	ld	(_sprite_curr_index),a
1385  03A3  5F          	ld	e,a
1386  03A4  16 00       	ld	d,0x00
1387  03A6  21 00 00    	ld	hl,_scr_map
1388  03A9  19          	add	hl,de
1389  03AA  5E          	ld	e, (hl)
1390  03AB  3E 2F       	ld	a,0x2f
1391  03AD  93          	sub	a, e
1392  03AE  30 1C       	jr	NC,l_player_collision_00123
1393  03B0  7B          	ld	a,e
1394  03B1  FE 3C       	cp	a,0x3c
1395  03B3  30 17       	jr	NC,l_player_collision_00123
1396  03B5  D6 39       	sub	a,0x39
1397  03B7  20 07       	jr	NZ,l_player_collision_00102
1398  03B9  21 00 00    	ld	hl,_game_worldup
1399  03BC  36 01       	ld	(hl),0x01
1400  03BE  18 0C       	jr	l_player_collision_00123
1401  03C0              l_player_collision_00102:
1402  03C0  2E 06       	ld	l,0x06
1403  03C2  CD 00 00    	call	_zx_border_fastcall
1404  03C5  C5          	push	bc
1405  03C6  2E 32       	ld	l,0x32
1406  03C8  CD A2 11    	call	_player_hit
1407  03CB  C1          	pop	bc
1408  03CC              l_player_collision_00123:
1409  03CC  21 00 00    	ld	hl,_sprite
1410  03CF  7E          	ld	a, (hl)
1411  03D0  D6 07       	sub	a,0x07
1412  03D2  D2 E7 04    	jp	NC, l_player_collision_00127
1413  03D5  3E 00       	ld	a, +((_class) & 0xFF)
1414  03D7  86          	add	a, (hl)
1415  03D8  5F          	ld	e, a
1416  03D9  3E 00       	ld	a, +((_class) / 256)
1417  03DB  CE 00       	adc	a,0x00
1418  03DD  57          	ld	d, a
1419  03DE  1A          	ld	a, (de)
1420  03DF  B7          	or	a, a
1421  03E0  CA E0 04    	jp	Z, l_player_collision_00122
1422  03E3  79          	ld	a, c
1423  03E4  86          	add	a, (hl)
1424  03E5  5F          	ld	e, a
1425  03E6  78          	ld	a, b
1426  03E7  CE 00       	adc	a,0x00
1427  03E9  57          	ld	d, a
1428  03EA  1A          	ld	a, (de)
1429  03EB  DD 77 FE    	ld	(ix-2),a
1430  03EE  DD 36 FF 00 	ld	(ix-1),0x00
1431  03F2  3A 00 00    	ld	a,(_s_col1)
1432  03F5  5F          	ld	e,a
1433  03F6  16 00       	ld	d,0x00
1434  03F8  DD 7E FE    	ld	a,(ix-2)
1435  03FB  93          	sub	a, e
1436  03FC  6F          	ld	l, a
1437  03FD  DD 7E FF    	ld	a,(ix-1)
1438  0400  9A          	sbc	a, d
1439  0401  67          	ld	h, a
1440  0402  CD 00 00    	call	_abs_fastcall
1441  0405  EB          	ex	de,hl
1442  0406  7B          	ld	a, e
1443  0407  D6 02       	sub	a,0x02
1444  0409  7A          	ld	a, d
1445  040A  17          	rla
1446  040B  3F          	ccf
1447  040C  1F          	rra
1448  040D  DE 80       	sbc	a,0x80
1449  040F  D2 E0 04    	jp	NC, l_player_collision_00122
1450  0412  2A 00 00    	ld	hl,(_sprite)
1451  0415  26 00       	ld	h,0x00
1452  0417  11 00 00    	ld	de,_lin
1453  041A  19          	add	hl,de
1454  041B  7E          	ld	a,(hl)
1455  041C  DD 77 FE    	ld	(ix-2),a
1456  041F  DD 36 FF 00 	ld	(ix-1),0x00
1457  0423  3A 00 00    	ld	a,(_s_lin1)
1458  0426  5F          	ld	e,a
1459  0427  16 00       	ld	d,0x00
1460  0429  DD 7E FE    	ld	a,(ix-2)
1461  042C  93          	sub	a, e
1462  042D  6F          	ld	l, a
1463  042E  DD 7E FF    	ld	a,(ix-1)
1464  0431  9A          	sbc	a, d
1465  0432  67          	ld	h, a
1466  0433  CD 00 00    	call	_abs_fastcall
1467  0436  EB          	ex	de,hl
1468  0437  7B          	ld	a, e
1469  0438  D6 0E       	sub	a,0x0e
1470  043A  7A          	ld	a, d
1471  043B  17          	rla
1472  043C  3F          	ccf
1473  043D  1F          	rra
1474  043E  DE 80       	sbc	a,0x80
1475  0440  D2 E0 04    	jp	NC, l_player_collision_00122
1476  0443  2A 00 00    	ld	hl,(_sprite)
1477  0446  26 00       	ld	h,0x00
1478  0448  01 00 00    	ld	bc,_class
1479  044B  09          	add	hl,bc
1480  044C  7E          	ld	a,(hl)
1481  044D  FE 06       	cp	a,0x06
1482  044F  28 05       	jr	Z,l_player_collision_00189
1483  0451  21 00 00    	ld	hl,_sprite
1484  0454  18 2D       	jr	l_player_collision_00110
1485  0456              l_player_collision_00189:
1486  0456  21 00 00    	ld	hl,_player_vita
1487  0459  7E          	ld	a, (hl)
1488  045A  C6 19       	add	a,0x19
1489  045C  77          	ld	(hl), a
1490  045D  3A 00 00    	ld	a,(_player_max_vita)
1491  0460  21 00 00    	ld	hl,_player_vita
1492  0463  96          	sub	a, (hl)
1493  0464  30 06       	jr	NC,l_player_collision_00108
1494  0466  3A 00 00    	ld	a,(_player_max_vita)
1495  0469  32 00 00    	ld	(_player_vita),a
1496  046C              l_player_collision_00108:
1497  046C  21 01 00    	ld	hl,0x0001
1498  046F  CD 99 0B    	call	_player_score_add
1499  0472  CD 00 00    	call	_game_update_stats
1500  0475  2A 00 00    	ld	hl,(_sprite)
1501  0478  CD 00 00    	call	_spr_destroy
1502  047B  21 00 00    	ld	hl,_game_mush_count
1503  047E  35          	dec	(hl)
1504  047F  2E 00       	ld	l,0x00
1505  0481  18 66       	jr	l_player_collision_00128
1506  0483              l_player_collision_00110:
1507  0483  FE 07       	cp	a,0x07
1508  0485  20 2D       	jr	NZ,l_player_collision_00114
1509  0487  21 00 00    	ld	hl,_player_mana
1510  048A  7E          	ld	a, (hl)
1511  048B  C6 19       	add	a,0x19
1512  048D  77          	ld	(hl), a
1513  048E  3A 00 00    	ld	a,(_player_max_mana)
1514  0491  21 00 00    	ld	hl,_player_mana
1515  0494  96          	sub	a, (hl)
1516  0495  30 06       	jr	NC,l_player_collision_00112
1517  0497  3A 00 00    	ld	a,(_player_max_mana)
1518  049A  32 00 00    	ld	(_player_mana),a
1519  049D              l_player_collision_00112:
1520  049D  21 01 00    	ld	hl,0x0001
1521  04A0  CD 99 0B    	call	_player_score_add
1522  04A3  CD 00 00    	call	_game_update_stats
1523  04A6  2A 00 00    	ld	hl,(_sprite)
1524  04A9  CD 00 00    	call	_spr_destroy
1525  04AC  21 00 00    	ld	hl,_game_mush_count
1526  04AF  35          	dec	(hl)
1527  04B0  2E 00       	ld	l,0x00
1528  04B2  18 35       	jr	l_player_collision_00128
1529  04B4              l_player_collision_00114:
1530  04B4  D6 08       	sub	a,0x08
1531  04B6  20 1A       	jr	NZ,l_player_collision_00116
1532  04B8  CD ED 04    	call	_player_1up
1533  04BB  21 01 00    	ld	hl,0x0001
1534  04BE  CD 99 0B    	call	_player_score_add
1535  04C1  CD 00 00    	call	_game_update_stats
1536  04C4  2A 00 00    	ld	hl,(_sprite)
1537  04C7  CD 00 00    	call	_spr_destroy
1538  04CA  21 00 00    	ld	hl,_game_mush_count
1539  04CD  35          	dec	(hl)
1540  04CE  2E 00       	ld	l,0x00
1541  04D0  18 17       	jr	l_player_collision_00128
1542  04D2              l_player_collision_00116:
1543  04D2  2E 02       	ld	l,0x02
1544  04D4  CD 00 00    	call	_zx_border_fastcall
1545  04D7  2E 14       	ld	l,0x14
1546  04D9  CD A2 11    	call	_player_hit
1547  04DC  2E 01       	ld	l,0x01
1548  04DE  18 09       	jr	l_player_collision_00128
1549  04E0              l_player_collision_00122:
1550  04E0  21 00 00    	ld	hl,_sprite
1551  04E3  34          	inc	(hl)
1552  04E4  C3 CC 03    	jp	l_player_collision_00123
1553  04E7              l_player_collision_00127:
1554  04E7  2E 00       	ld	l,0x00
1555  04E9              l_player_collision_00128:
1556  04E9  F1          	pop	af
1557  04EA  DD E1       	pop	ix
1558  04EC  C9          	ret
1559  04ED              	SECTION code_compiler
1560  04ED              ;	---------------------------------
1561  04ED              ; Function player_1up
1562  04ED              ; ---------------------------------
1563  04ED              _player_1up:
1564  04ED  21 00 00    	ld	hl,_player_lives
1565  04F0  7E          	ld	a, (hl)
1566  04F1  D6 FF       	sub	a,0xff
1567  04F3  D0          	ret	NC
1568  04F4  34          	inc	(hl)
1569  04F5  21 00 00    	ld	hl,___str_0
1570  04F8  E5          	push	hl
1571  04F9  21 0C 0C    	ld	hl,0x0c0c
1572  04FC  E5          	push	hl
1573  04FD  CD 00 00    	call	_zx_print_str
1574  0500  AF          	xor	a, a
1575  0501  F5          	push	af
1576  0502  33          	inc	sp
1577  0503  21 19 00    	ld	hl,0x0019
1578  0506  E5          	push	hl
1579  0507  21 0C 15    	ld	hl,0x150c
1580  050A  E5          	push	hl
1581  050B  3E 0C       	ld	a,0x0c
1582  050D  F5          	push	af
1583  050E  33          	inc	sp
1584  050F  CD 00 00    	call	_game_colour_message
1585  0512  F1          	pop	af
1586  0513  F1          	pop	af
1587  0514  F1          	pop	af
1588  0515  CD 00 00    	call	_game_update_stats
1589  0518  C9          	ret
1590  0519              	SECTION rodata_compiler
1591  0000              ___str_0:
1592  0000  31 20 55 50 21 
                        	DEFM "1 UP!"
1593  0005  00          	DEFB 0x00
1594  0006              	SECTION code_compiler
1595  0519              ;	---------------------------------
1596  0519              ; Function player_kill
1597  0519              ; ---------------------------------
1598  0519              _player_kill:
1599  0519  01 07 00    	ld	bc,_state+7
1600  051C  0A          	ld	a, (bc)
1601  051D  CB 6F       	bit	5, a
1602  051F  20 5E       	jr	NZ,l_player_kill_00109
1603  0521  C5          	push	bc
1604  0522  CD 00 00    	call	_sound_hit_brick
1605  0525  C1          	pop	bc
1606  0526  0A          	ld	a, (bc)
1607  0527  F6 20       	or	a,0x20
1608  0529  5F          	ld	e,a
1609  052A  02          	ld	(bc), a
1610  052B  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
1611  052E  36 03       	ld	(hl),0x03
1612  0530  CB 53       	bit	2, e
1613  0532  28 07       	jr	Z,l_player_kill_00102
1614  0534  21 07 00    	ld	hl, +(_tile + 0x0007)
1615  0537  36 4C       	ld	(hl),0x4c
1616  0539  18 05       	jr	l_player_kill_00103
1617  053B              l_player_kill_00102:
1618  053B  21 07 00    	ld	hl, +(_tile + 0x0007)
1619  053E  36 54       	ld	(hl),0x54
1620  0540              l_player_kill_00103:
1621  0540  CD 6A 0B    	call	_player_hit_platform_clear
1622  0543  21 07 00    	ld	hl,+(_col + 0x0007)
1623  0546  5E          	ld	e, (hl)
1624  0547  21 07 00    	ld	hl,+(_lin + 0x0007)
1625  054A  4E          	ld	c, (hl)
1626  054B  21 07 00    	ld	hl,+(_tile + 0x0007)
1627  054E  46          	ld	b, (hl)
1628  054F  7B          	ld	a, e
1629  0550  F5          	push	af
1630  0551  33          	inc	sp
1631  0552  79          	ld	a, c
1632  0553  48          	ld	c,b
1633  0554  47          	ld	b,a
1634  0555  3A 00 00    	ld	a,(_sprite)
1635  0558  C5          	push	bc
1636  0559  F5          	push	af
1637  055A  33          	inc	sp
1638  055B  CD 00 00    	call	_NIRVANAP_spriteT_callee
1639  055E  2A 00 00    	ld	hl,(_curr_time)
1640  0561  22 0E 00    	ld	(_spr_timer + 0x000e),hl
1641  0564  3A 00 00    	ld	a,(_sprite)
1642  0567  D6 07       	sub	a,0x07
1643  0569  20 0B       	jr	NZ,l_player_kill_00105
1644  056B  01 07 00    	ld	bc,_state_a+7
1645  056E  0A          	ld	a, (bc)
1646  056F  F6 08       	or	a,0x08
1647  0571  E6 EF       	and	a,0xef
1648  0573  02          	ld	(bc),a
1649  0574  18 09       	jr	l_player_kill_00109
1650  0576              l_player_kill_00105:
1651  0576  01 07 00    	ld	bc,_state_a+7
1652  0579  0A          	ld	a, (bc)
1653  057A  F6 10       	or	a,0x10
1654  057C  E6 F7       	and	a,0xf7
1655  057E  02          	ld	(bc),a
1656  057F              l_player_kill_00109:
1657  057F  C9          	ret
1658  0580              	SECTION code_compiler
1659  0580              ;	---------------------------------
1660  0580              ; Function player_check_stairs_vertical
1661  0580              ; ---------------------------------
1662  0580              _player_check_stairs_vertical:
1663  0580  CD 00 00    	call	___sdcc_enter_ix
1664  0583  3B          	dec	sp
1665  0584  21 07 00    	ld	hl,+(_col + 0x0007)
1666  0587  4E          	ld	c, (hl)
1667  0588  CB 41       	bit	0, c
1668  058A  20 2F       	jr	NZ,l_player_check_stairs_vertical_00102
1669  058C  3A 07 00    	ld	a,(_lin + 0x0007)
1670  058F  DD 86 04    	add	a,(ix+4)
1671  0592  47          	ld	b, a
1672  0593  79          	ld	a, c
1673  0594  48          	ld	c,b
1674  0595  47          	ld	b,a
1675  0596  C5          	push	bc
1676  0597  CD 00 00    	call	_spr_calc_index
1677  059A  F1          	pop	af
1678  059B  7D          	ld	a,l
1679  059C  32 00 00    	ld	(_sprite_curr_index),a
1680  059F  4F          	ld	c,a
1681  05A0  06 00       	ld	b,0x00
1682  05A2  21 00 00    	ld	hl,_scr_map
1683  05A5  09          	add	hl,bc
1684  05A6  7E          	ld	a,(hl)
1685  05A7  4F          	ld	c,a
1686  05A8  D6 44       	sub	a,0x44
1687  05AA  38 05       	jr	C,l_player_check_stairs_vertical_00110
1688  05AC  3E 47       	ld	a,0x47
1689  05AE  91          	sub	a, c
1690  05AF  30 04       	jr	NC,l_player_check_stairs_vertical_00111
1691  05B1              l_player_check_stairs_vertical_00110:
1692  05B1  1E 00       	ld	e,0x00
1693  05B3  18 02       	jr	l_player_check_stairs_vertical_00112
1694  05B5              l_player_check_stairs_vertical_00111:
1695  05B5  1E 01       	ld	e,0x01
1696  05B7              l_player_check_stairs_vertical_00112:
1697  05B7  0E 00       	ld	c,0x00
1698  05B9  18 57       	jr	l_player_check_stairs_vertical_00103
1699  05BB              l_player_check_stairs_vertical_00102:
1700  05BB  79          	ld	a, c
1701  05BC  DD 96 04    	sub	a,(ix+4)
1702  05BF  57          	ld	d, a
1703  05C0  01 07 00    	ld	bc,_lin+7
1704  05C3  0A          	ld	a, (bc)
1705  05C4  DD 86 04    	add	a,(ix+4)
1706  05C7  C5          	push	bc
1707  05C8  5F          	ld	e,a
1708  05C9  D5          	push	de
1709  05CA  CD 00 00    	call	_spr_calc_index
1710  05CD  F1          	pop	af
1711  05CE  C1          	pop	bc
1712  05CF  7D          	ld	a,l
1713  05D0  32 00 00    	ld	(_sprite_curr_index),a
1714  05D3  5F          	ld	e,a
1715  05D4  16 00       	ld	d,0x00
1716  05D6  21 00 00    	ld	hl,_scr_map
1717  05D9  19          	add	hl,de
1718  05DA  7E          	ld	a,(hl)
1719  05DB  5F          	ld	e,a
1720  05DC  D6 44       	sub	a,0x44
1721  05DE  38 05       	jr	C,l_player_check_stairs_vertical_00113
1722  05E0  3E 47       	ld	a,0x47
1723  05E2  93          	sub	a, e
1724  05E3  30 04       	jr	NC,l_player_check_stairs_vertical_00114
1725  05E5              l_player_check_stairs_vertical_00113:
1726  05E5  1E 00       	ld	e,0x00
1727  05E7  18 02       	jr	l_player_check_stairs_vertical_00115
1728  05E9              l_player_check_stairs_vertical_00114:
1729  05E9  1E 01       	ld	e,0x01
1730  05EB              l_player_check_stairs_vertical_00115:
1731  05EB  3A 07 00    	ld	a,(_col + 0x0007)
1732  05EE  DD 96 04    	sub	a,(ix+4)
1733  05F1  57          	ld	d, a
1734  05F2  0A          	ld	a, (bc)
1735  05F3  DD 86 04    	add	a,(ix+4)
1736  05F6  D5          	push	de
1737  05F7  5F          	ld	e,a
1738  05F8  D5          	push	de
1739  05F9  CD 00 00    	call	_spr_calc_index
1740  05FC  F1          	pop	af
1741  05FD  D1          	pop	de
1742  05FE  7D          	ld	a,l
1743  05FF  32 00 00    	ld	(_sprite_curr_index),a
1744  0602  7B          	ld	a, e
1745  0603  D6 44       	sub	a,0x44
1746  0605  38 05       	jr	C,l_player_check_stairs_vertical_00116
1747  0607  3E 47       	ld	a,0x47
1748  0609  93          	sub	a, e
1749  060A  30 04       	jr	NC,l_player_check_stairs_vertical_00117
1750  060C              l_player_check_stairs_vertical_00116:
1751  060C  0E 00       	ld	c,0x00
1752  060E  18 02       	jr	l_player_check_stairs_vertical_00118
1753  0610              l_player_check_stairs_vertical_00117:
1754  0610  0E 01       	ld	c,0x01
1755  0612              l_player_check_stairs_vertical_00118:
1756  0612              l_player_check_stairs_vertical_00103:
1757  0612  7B          	ld	a, e
1758  0613  B7          	or	a,a
1759  0614  20 03       	jr	NZ,l_player_check_stairs_vertical_00104
1760  0616  B1          	or	a,c
1761  0617  28 07       	jr	Z,l_player_check_stairs_vertical_00105
1762  0619              l_player_check_stairs_vertical_00104:
1763  0619  21 00 00    	ld	hl,_player_onstair
1764  061C  36 01       	ld	(hl),0x01
1765  061E  18 05       	jr	l_player_check_stairs_vertical_00108
1766  0620              l_player_check_stairs_vertical_00105:
1767  0620  21 00 00    	ld	hl,_player_onstair
1768  0623  36 00       	ld	(hl),0x00
1769  0625              l_player_check_stairs_vertical_00108:
1770  0625  33          	inc	sp
1771  0626  DD E1       	pop	ix
1772  0628  C9          	ret
1773  0629              	SECTION code_compiler
1774  0629              ;	---------------------------------
1775  0629              ; Function player_check_stairs
1776  0629              ; ---------------------------------
1777  0629              _player_check_stairs:
1778  0629  CD 00 00    	call	___sdcc_enter_ix
1779  062C  3B          	dec	sp
1780  062D  5D          	ld	e, l
1781  062E  3A 07 00    	ld	a,(_col + 0x0007)
1782  0631  83          	add	a, e
1783  0632  4F          	ld	c, a
1784  0633  21 07 00    	ld	hl,+(_lin + 0x0007)
1785  0636  46          	ld	b, (hl)
1786  0637  D5          	push	de
1787  0638  79          	ld	a, c
1788  0639  48          	ld	c,b
1789  063A  47          	ld	b,a
1790  063B  C5          	push	bc
1791  063C  CD 00 00    	call	_spr_calc_index
1792  063F  F1          	pop	af
1793  0640  D1          	pop	de
1794  0641  7D          	ld	a,l
1795  0642  32 00 00    	ld	(_sprite_curr_index),a
1796  0645  4F          	ld	c,a
1797  0646  06 00       	ld	b,0x00
1798  0648  21 00 00    	ld	hl,_scr_map
1799  064B  09          	add	hl,bc
1800  064C  7E          	ld	a,(hl)
1801  064D  4F          	ld	c,a
1802  064E  D6 44       	sub	a,0x44
1803  0650  38 05       	jr	C,l_player_check_stairs_00111
1804  0652  3E 47       	ld	a,0x47
1805  0654  91          	sub	a, c
1806  0655  30 04       	jr	NC,l_player_check_stairs_00112
1807  0657              l_player_check_stairs_00111:
1808  0657  0E 00       	ld	c,0x00
1809  0659  18 02       	jr	l_player_check_stairs_00113
1810  065B              l_player_check_stairs_00112:
1811  065B  0E 01       	ld	c,0x01
1812  065D              l_player_check_stairs_00113:
1813  065D  3A 07 00    	ld	a,(_col + 0x0007)
1814  0660  83          	add	a, e
1815  0661  57          	ld	d, a
1816  0662  3A 07 00    	ld	a,(_lin + 0x0007)
1817  0665  C6 0F       	add	a,0x0f
1818  0667  47          	ld	b, a
1819  0668  C5          	push	bc
1820  0669  58          	ld	e,b
1821  066A  D5          	push	de
1822  066B  CD 00 00    	call	_spr_calc_index
1823  066E  F1          	pop	af
1824  066F  C1          	pop	bc
1825  0670  7D          	ld	a,l
1826  0671  32 00 00    	ld	(_sprite_curr_index),a
1827  0674  5F          	ld	e,a
1828  0675  16 00       	ld	d,0x00
1829  0677  21 00 00    	ld	hl,_scr_map
1830  067A  19          	add	hl,de
1831  067B  7E          	ld	a,(hl)
1832  067C  47          	ld	b,a
1833  067D  D6 44       	sub	a,0x44
1834  067F  38 05       	jr	C,l_player_check_stairs_00114
1835  0681  3E 47       	ld	a,0x47
1836  0683  90          	sub	a, b
1837  0684  30 04       	jr	NC,l_player_check_stairs_00115
1838  0686              l_player_check_stairs_00114:
1839  0686  06 00       	ld	b,0x00
1840  0688  18 02       	jr	l_player_check_stairs_00116
1841  068A              l_player_check_stairs_00115:
1842  068A  06 01       	ld	b,0x01
1843  068C              l_player_check_stairs_00116:
1844  068C  79          	ld	a, c
1845  068D  B7          	or	a,a
1846  068E  20 03       	jr	NZ,l_player_check_stairs_00105
1847  0690  B0          	or	a,b
1848  0691  28 13       	jr	Z,l_player_check_stairs_00106
1849  0693              l_player_check_stairs_00105:
1850  0693  21 00 00    	ld	hl,_player_onstair
1851  0696  7E          	ld	a, (hl)
1852  0697  B7          	or	a, a
1853  0698  20 1D       	jr	NZ,l_player_check_stairs_00109
1854  069A  36 01       	ld	(hl),0x01
1855  069C  21 72 00    	ld	hl,0x0072
1856  069F  E5          	push	hl
1857  06A0  CD BB 06    	call	_player_tile
1858  06A3  F1          	pop	af
1859  06A4  18 11       	jr	l_player_check_stairs_00109
1860  06A6              l_player_check_stairs_00106:
1861  06A6  21 00 00    	ld	hl,_player_onstair
1862  06A9  7E          	ld	a, (hl)
1863  06AA  B7          	or	a, a
1864  06AB  28 0A       	jr	Z,l_player_check_stairs_00109
1865  06AD  36 00       	ld	(hl),0x00
1866  06AF  21 60 08    	ld	hl,0x0860
1867  06B2  E5          	push	hl
1868  06B3  CD BB 06    	call	_player_tile
1869  06B6  F1          	pop	af
1870  06B7              l_player_check_stairs_00109:
1871  06B7  33          	inc	sp
1872  06B8  DD E1       	pop	ix
1873  06BA  C9          	ret
1874  06BB              	SECTION code_compiler
1875  06BB              ;	---------------------------------
1876  06BB              ; Function player_tile
1877  06BB              ; ---------------------------------
1878  06BB              _player_tile:
1879  06BB  CD 00 00    	call	___sdcc_enter_ix
1880  06BE  DD 7E 05    	ld	a,(ix+5)
1881  06C1  F5          	push	af
1882  06C2  33          	inc	sp
1883  06C3  2A FF FF    	ld	hl,(_sprite-1)
1884  06C6  DD 6E 04    	ld	l,(ix+4)
1885  06C9  E5          	push	hl
1886  06CA  CD 00 00    	call	_spr_tile_dir
1887  06CD  F1          	pop	af
1888  06CE  33          	inc	sp
1889  06CF  7D          	ld	a,l
1890  06D0  32 07 00    	ld	((_tile + 0x0007)),a
1891  06D3  DD E1       	pop	ix
1892  06D5  C9          	ret
1893  06D6              	SECTION code_compiler
1894  06D6              ;	---------------------------------
1895  06D6              ; Function player_check_map
1896  06D6              ; ---------------------------------
1897  06D6              _player_check_map:
1898  06D6  21 07 00    	ld	hl,+(_col + 0x0007)
1899  06D9  46          	ld	b, (hl)
1900  06DA  21 07 00    	ld	hl,+(_lin + 0x0007)
1901  06DD  4E          	ld	c, (hl)
1902  06DE  C5          	push	bc
1903  06DF  CD 00 00    	call	_spr_calc_index
1904  06E2  F1          	pop	af
1905  06E3  7D          	ld	a,l
1906  06E4  32 00 00    	ld	(_sprite_curr_index),a
1907  06E7  21 07 00    	ld	hl,+(_col + 0x0007)
1908  06EA  4E          	ld	c, (hl)
1909  06EB  3A 07 00    	ld	a,(_lin + 0x0007)
1910  06EE  E6 0F       	and	a,0x0f
1911  06F0  CB 41       	bit	0, c
1912  06F2  20 17       	jr	NZ,l_player_check_map_00108
1913  06F4  B7          	or	a, a
1914  06F5  20 05       	jr	NZ,l_player_check_map_00102
1915  06F7  CD 36 07    	call	_player_pick_item
1916  06FA  18 39       	jr	l_player_check_map_00110
1917  06FC              l_player_check_map_00102:
1918  06FC  CD 36 07    	call	_player_pick_item
1919  06FF  21 00 00    	ld	hl,_sprite_curr_index
1920  0702  7E          	ld	a, (hl)
1921  0703  C6 10       	add	a,0x10
1922  0705  77          	ld	(hl), a
1923  0706  CD 36 07    	call	_player_pick_item
1924  0709  18 2A       	jr	l_player_check_map_00110
1925  070B              l_player_check_map_00108:
1926  070B  B7          	or	a, a
1927  070C  20 0C       	jr	NZ,l_player_check_map_00105
1928  070E  CD 36 07    	call	_player_pick_item
1929  0711  21 00 00    	ld	hl,_sprite_curr_index
1930  0714  34          	inc	(hl)
1931  0715  CD 36 07    	call	_player_pick_item
1932  0718  18 1B       	jr	l_player_check_map_00110
1933  071A              l_player_check_map_00105:
1934  071A  CD 36 07    	call	_player_pick_item
1935  071D  21 00 00    	ld	hl,_sprite_curr_index
1936  0720  34          	inc	(hl)
1937  0721  CD 36 07    	call	_player_pick_item
1938  0724  21 00 00    	ld	hl,_sprite_curr_index
1939  0727  7E          	ld	a, (hl)
1940  0728  C6 0F       	add	a,0x0f
1941  072A  77          	ld	(hl), a
1942  072B  CD 36 07    	call	_player_pick_item
1943  072E  21 00 00    	ld	hl,_sprite_curr_index
1944  0731  34          	inc	(hl)
1945  0732  CD 36 07    	call	_player_pick_item
1946  0735              l_player_check_map_00110:
1947  0735  C9          	ret
1948  0736              	SECTION code_compiler
1949  0736              ;	---------------------------------
1950  0736              ; Function player_pick_item
1951  0736              ; ---------------------------------
1952  0736              _player_pick_item:
1953  0736  CD 00 00    	call	___sdcc_enter_ix
1954  0739  3B          	dec	sp
1955  073A  2A 00 00    	ld	hl,(_sprite_curr_index)
1956  073D  26 00       	ld	h,0x00
1957  073F  01 00 00    	ld	bc,_scr_map
1958  0742  09          	add	hl,bc
1959  0743  7E          	ld	a,(hl)
1960  0744  DD 77 FF    	ld	(ix-1),a
1961  0747  D6 24       	sub	a,0x24
1962  0749  DA C5 08    	jp	C, l_player_pick_item_00131
1963  074C  3E 2F       	ld	a,0x2f
1964  074E  DD 96 FF    	sub	a,(ix-1)
1965  0751  DA C5 08    	jp	C, l_player_pick_item_00131
1966  0754  CD 00 00    	call	_ay_reset
1967  0757  21 00 00    	ld	hl,_ay_effect_10
1968  075A  CD 00 00    	call	_ay_fx_play
1969  075D  CD 00 00    	call	_sound_coin
1970  0760  2A 00 00    	ld	hl,(_sprite_curr_index)
1971  0763  26 00       	ld	h,0x00
1972  0765  01 00 00    	ld	bc,_scr_map
1973  0768  09          	add	hl,bc
1974  0769  3A 00 00    	ld	a,(_sprite_curr_index)
1975  076C  5F          	ld	e,a
1976  076D  16 00       	ld	d,0x00
1977  076F  E5          	push	hl
1978  0770  D5          	push	de
1979  0771  CD 00 00    	call	_game_match_back
1980  0774  F1          	pop	af
1981  0775  C1          	pop	bc
1982  0776  7D          	ld	a,l
1983  0777  02          	ld	(bc), a
1984  0778  3A 00 00    	ld	a,(_sprite_curr_index)
1985  077B  4F          	ld	c,a
1986  077C  06 00       	ld	b,0x00
1987  077E  C5          	push	bc
1988  077F  CD 00 00    	call	_game_obj_set
1989  0782  F1          	pop	af
1990  0783  3A 00 00    	ld	a,(_sprite_curr_index)
1991  0786  07          	rlca
1992  0787  07          	rlca
1993  0788  07          	rlca
1994  0789  07          	rlca
1995  078A  E6 0F       	and	a,0x0f
1996  078C  07          	rlca
1997  078D  07          	rlca
1998  078E  07          	rlca
1999  078F  07          	rlca
2000  0790  E6 F0       	and	a,0xf0
2001  0792  32 00 00    	ld	(_s_lin1),a
2002  0795  3A 00 00    	ld	a,(_sprite_curr_index)
2003  0798  E6 0F       	and	a,0x0f
2004  079A  87          	add	a, a
2005  079B  32 00 00    	ld	(_s_col1),a
2006  079E  21 00 00    	ld	hl,0x0000
2007  07A1  E5          	push	hl
2008  07A2  21 84 03    	ld	hl,0x0384
2009  07A5  E5          	push	hl
2010  07A6  F5          	push	af
2011  07A7  33          	inc	sp
2012  07A8  3A 00 00    	ld	a,(_s_lin1)
2013  07AB  F5          	push	af
2014  07AC  33          	inc	sp
2015  07AD  CD 00 00    	call	_spr_add_anim
2016  07B0  F1          	pop	af
2017  07B1  F1          	pop	af
2018  07B2  F1          	pop	af
2019  07B3  DD 7E FF    	ld	a,(ix-1)
2020  07B6  D6 24       	sub	a,0x24
2021  07B8  DA C5 08    	jp	C, l_player_pick_item_00131
2022  07BB  3E 2F       	ld	a,0x2f
2023  07BD  DD 96 FF    	sub	a,(ix-1)
2024  07C0  DA C5 08    	jp	C, l_player_pick_item_00131
2025  07C3  DD 7E FF    	ld	a,(ix-1)
2026  07C6  C6 DC       	add	a,0xdc
2027  07C8  4F          	ld	c, a
2028  07C9  06 00       	ld	b,0x00
2029  07CB  21 D2 07    	ld	hl,l_player_pick_item_00177
2030  07CE  09          	add	hl, bc
2031  07CF  09          	add	hl, bc
2032  07D0  09          	add	hl, bc
2033  07D1  E9          	jp	(hl)
2034  07D2              l_player_pick_item_00177:
2035  07D2  C3 F6 07    	jp	l_player_pick_item_00101
2036  07D5  C3 01 08    	jp	l_player_pick_item_00102
2037  07D8  C3 0C 08    	jp	l_player_pick_item_00103
2038  07DB  C3 17 08    	jp	l_player_pick_item_00104
2039  07DE  C3 22 08    	jp	l_player_pick_item_00105
2040  07E1  C3 49 08    	jp	l_player_pick_item_00109
2041  07E4  C3 5E 08    	jp	l_player_pick_item_00112
2042  07E7  C3 73 08    	jp	l_player_pick_item_00115
2043  07EA  C3 88 08    	jp	l_player_pick_item_00118
2044  07ED  C3 9D 08    	jp	l_player_pick_item_00121
2045  07F0  C3 B2 08    	jp	l_player_pick_item_00124
2046  07F3  C3 40 08    	jp	l_player_pick_item_00108
2047  07F6              l_player_pick_item_00101:
2048  07F6  21 00 00    	ld	hl,_player_keys
2049  07F9  36 01       	ld	(hl),0x01
2050  07FB  CD 00 00    	call	_game_update_stats
2051  07FE  C3 C5 08    	jp	l_player_pick_item_00131
2052  0801              l_player_pick_item_00102:
2053  0801  21 01 00    	ld	hl, +(_player_keys + 0x0001)
2054  0804  36 01       	ld	(hl),0x01
2055  0806  CD 00 00    	call	_game_update_stats
2056  0809  C3 C5 08    	jp	l_player_pick_item_00131
2057  080C              l_player_pick_item_00103:
2058  080C  21 02 00    	ld	hl, +(_player_keys + 0x0002)
2059  080F  36 01       	ld	(hl),0x01
2060  0811  CD 00 00    	call	_game_update_stats
2061  0814  C3 C5 08    	jp	l_player_pick_item_00131
2062  0817              l_player_pick_item_00104:
2063  0817  21 03 00    	ld	hl, +(_player_keys + 0x0003)
2064  081A  36 01       	ld	(hl),0x01
2065  081C  CD 00 00    	call	_game_update_stats
2066  081F  C3 C5 08    	jp	l_player_pick_item_00131
2067  0822              l_player_pick_item_00105:
2068  0822  21 01 00    	ld	hl,0x0001
2069  0825  CD 99 0B    	call	_player_score_add
2070  0828  21 00 00    	ld	hl,_player_coins
2071  082B  7E          	ld	a,(hl)
2072  082C  3C          	inc	a
2073  082D  77          	ld	(hl),a
2074  082E  D6 64       	sub	a,0x64
2075  0830  20 08       	jr	NZ,l_player_pick_item_00107
2076  0832  CD ED 04    	call	_player_1up
2077  0835  21 00 00    	ld	hl,_player_coins
2078  0838  36 00       	ld	(hl),0x00
2079  083A              l_player_pick_item_00107:
2080  083A  CD 00 00    	call	_game_update_stats
2081  083D  C3 C5 08    	jp	l_player_pick_item_00131
2082  0840              l_player_pick_item_00108:
2083  0840  21 0A 00    	ld	hl,0x000a
2084  0843  CD 99 0B    	call	_player_score_add
2085  0846  C3 C5 08    	jp	l_player_pick_item_00131
2086  0849              l_player_pick_item_00109:
2087  0849  21 00 00    	ld	hl,_player_str
2088  084C  34          	inc	(hl)
2089  084D  21 00 00    	ld	hl,_player_max_vita
2090  0850  7E          	ld	a, (hl)
2091  0851  D6 C8       	sub	a,0xc8
2092  0853  30 70       	jr	NC,l_player_pick_item_00131
2093  0855  7E          	ld	a, (hl)
2094  0856  C6 0A       	add	a,0x0a
2095  0858  77          	ld	(hl), a
2096  0859  CD 00 00    	call	_game_update_stats
2097  085C  18 67       	jr	l_player_pick_item_00131
2098  085E              l_player_pick_item_00112:
2099  085E  21 00 00    	ld	hl,_player_str
2100  0861  34          	inc	(hl)
2101  0862  21 00 00    	ld	hl,_player_max_vita
2102  0865  7E          	ld	a, (hl)
2103  0866  D6 C8       	sub	a,0xc8
2104  0868  30 5B       	jr	NC,l_player_pick_item_00131
2105  086A  7E          	ld	a, (hl)
2106  086B  C6 0A       	add	a,0x0a
2107  086D  77          	ld	(hl), a
2108  086E  CD 00 00    	call	_game_update_stats
2109  0871  18 52       	jr	l_player_pick_item_00131
2110  0873              l_player_pick_item_00115:
2111  0873  21 00 00    	ld	hl,_player_str
2112  0876  34          	inc	(hl)
2113  0877  21 00 00    	ld	hl,_player_max_vita
2114  087A  7E          	ld	a, (hl)
2115  087B  D6 C8       	sub	a,0xc8
2116  087D  30 46       	jr	NC,l_player_pick_item_00131
2117  087F  7E          	ld	a, (hl)
2118  0880  C6 0A       	add	a,0x0a
2119  0882  77          	ld	(hl), a
2120  0883  CD 00 00    	call	_game_update_stats
2121  0886  18 3D       	jr	l_player_pick_item_00131
2122  0888              l_player_pick_item_00118:
2123  0888  21 00 00    	ld	hl,_player_int
2124  088B  34          	inc	(hl)
2125  088C  21 00 00    	ld	hl,_player_max_mana
2126  088F  7E          	ld	a, (hl)
2127  0890  D6 C8       	sub	a,0xc8
2128  0892  30 31       	jr	NC,l_player_pick_item_00131
2129  0894  7E          	ld	a, (hl)
2130  0895  C6 0A       	add	a,0x0a
2131  0897  77          	ld	(hl), a
2132  0898  CD 00 00    	call	_game_update_stats
2133  089B  18 28       	jr	l_player_pick_item_00131
2134  089D              l_player_pick_item_00121:
2135  089D  21 00 00    	ld	hl,_player_int
2136  08A0  34          	inc	(hl)
2137  08A1  21 00 00    	ld	hl,_player_max_mana
2138  08A4  7E          	ld	a, (hl)
2139  08A5  D6 C8       	sub	a,0xc8
2140  08A7  30 1C       	jr	NC,l_player_pick_item_00131
2141  08A9  7E          	ld	a, (hl)
2142  08AA  C6 0A       	add	a,0x0a
2143  08AC  77          	ld	(hl), a
2144  08AD  CD 00 00    	call	_game_update_stats
2145  08B0  18 13       	jr	l_player_pick_item_00131
2146  08B2              l_player_pick_item_00124:
2147  08B2  21 00 00    	ld	hl,_player_int
2148  08B5  34          	inc	(hl)
2149  08B6  21 00 00    	ld	hl,_player_max_mana
2150  08B9  7E          	ld	a, (hl)
2151  08BA  D6 C8       	sub	a,0xc8
2152  08BC  30 07       	jr	NC,l_player_pick_item_00131
2153  08BE  7E          	ld	a, (hl)
2154  08BF  C6 0A       	add	a,0x0a
2155  08C1  77          	ld	(hl), a
2156  08C2  CD 00 00    	call	_game_update_stats
2157  08C5              l_player_pick_item_00131:
2158  08C5  33          	inc	sp
2159  08C6  DD E1       	pop	ix
2160  08C8  C9          	ret
2161  08C9              	SECTION code_compiler
2162  08C9              ;	---------------------------------
2163  08C9              ; Function player_hit_platform
2164  08C9              ; ---------------------------------
2165  08C9              _player_hit_platform:
2166  08C9  CD 00 00    	call	___sdcc_enter_ix
2167  08CC  F5          	push	af
2168  08CD  3A 00 00    	ld	a,(_player_hit_lin)
2169  08D0  B7          	or	a, a
2170  08D1  C2 64 0B    	jp	NZ, l_player_hit_platform_00145
2171  08D4  21 07 00    	ld	hl,+(_lin + 0x0007)
2172  08D7  4E          	ld	c, (hl)
2173  08D8  3E 10       	ld	a,0x10
2174  08DA  91          	sub	a, c
2175  08DB  D2 64 0B    	jp	NC, l_player_hit_platform_00145
2176  08DE  01 00 00    	ld	bc,_scr_map
2177  08E1  2A 00 00    	ld	hl,(_index1)
2178  08E4  09          	add	hl,bc
2179  08E5  7E          	ld	a,(hl)
2180  08E6  D6 45       	sub	a,0x45
2181  08E8  DA 64 0B    	jp	C, l_player_hit_platform_00145
2182  08EB  2A 00 00    	ld	hl,(_curr_time)
2183  08EE  22 0E 00    	ld	(_spr_timer + 0x000e),hl
2184  08F1  2A 07 00    	ld	hl,(_lin + 0x0007)
2185  08F4  26 00       	ld	h,0x00
2186  08F6  01 F8 FF    	ld	bc,0xfff8
2187  08F9  09          	add	hl,bc
2188  08FA  EB          	ex	de,hl
2189  08FB  06 04       	ld	b,0x04
2190  08FD              l_player_hit_platform_00250:
2191  08FD  CB 2A       	sra	d
2192  08FF  CB 1B       	rr	e
2193  0901  10 FA       	djnz	l_player_hit_platform_00250
2194  0903  7B          	ld	a, e
2195  0904  07          	rlca
2196  0905  07          	rlca
2197  0906  07          	rlca
2198  0907  07          	rlca
2199  0908  E6 F0       	and	a,0xf0
2200  090A  C6 08       	add	a,0x08
2201  090C  32 00 00    	ld	(_player_hit_lin),a
2202  090F  21 07 00    	ld	hl,+(_col + 0x0007)
2203  0912  4E          	ld	c, (hl)
2204  0913  CB 41       	bit	0, c
2205  0915  20 06       	jr	NZ,l_player_hit_platform_00111
2206  0917  21 00 00    	ld	hl,_player_hit_col
2207  091A  71          	ld	(hl), c
2208  091B  18 2D       	jr	l_player_hit_platform_00112
2209  091D              l_player_hit_platform_00111:
2210  091D  21 07 00    	ld	hl,+(_state + 0x0007)
2211  0920  5E          	ld	e, (hl)
2212  0921  41          	ld	b, c
2213  0922  04          	inc	b
2214  0923  0D          	dec	c
2215  0924  CB 5B       	bit	3, e
2216  0926  28 12       	jr	Z,l_player_hit_platform_00108
2217  0928  3A 00 00    	ld	a,(_g_player_hit_right)
2218  092B  B7          	or	a, a
2219  092C  28 06       	jr	Z,l_player_hit_platform_00102
2220  092E  21 00 00    	ld	hl,_player_hit_col
2221  0931  70          	ld	(hl), b
2222  0932  18 16       	jr	l_player_hit_platform_00112
2223  0934              l_player_hit_platform_00102:
2224  0934  21 00 00    	ld	hl,_player_hit_col
2225  0937  71          	ld	(hl), c
2226  0938  18 10       	jr	l_player_hit_platform_00112
2227  093A              l_player_hit_platform_00108:
2228  093A  3A 00 00    	ld	a,(_g_player_hit_left)
2229  093D  B7          	or	a, a
2230  093E  28 06       	jr	Z,l_player_hit_platform_00105
2231  0940  21 00 00    	ld	hl,_player_hit_col
2232  0943  71          	ld	(hl), c
2233  0944  18 04       	jr	l_player_hit_platform_00112
2234  0946              l_player_hit_platform_00105:
2235  0946  21 00 00    	ld	hl,_player_hit_col
2236  0949  70          	ld	(hl), b
2237  094A              l_player_hit_platform_00112:
2238  094A  2A 00 00    	ld	hl,(_index1)
2239  094D  01 00 00    	ld	bc,_scr_map
2240  0950  09          	add	hl,bc
2241  0951  7E          	ld	a,(hl)
2242  0952  FE 4D       	cp	a,0x4d
2243  0954  20 45       	jr	NZ,l_player_hit_platform_00114
2244  0956  E5          	push	hl
2245  0957  2A 00 00    	ld	hl,(_index1)
2246  095A  E5          	push	hl
2247  095B  CD 00 00    	call	_game_match_back
2248  095E  F1          	pop	af
2249  095F  C1          	pop	bc
2250  0960  7D          	ld	a,l
2251  0961  02          	ld	(bc), a
2252  0962  2A 00 00    	ld	hl,(_index1)
2253  0965  E5          	push	hl
2254  0966  CD 00 00    	call	_game_obj_set
2255  0969  F1          	pop	af
2256  096A  21 00 00    	ld	hl,_index1
2257  096D  7E          	ld	a, (hl)
2258  096E  E6 0F       	and	a,0x0f
2259  0970  87          	add	a, a
2260  0971  4F          	ld	c, a
2261  0972  23          	inc	hl
2262  0973  56          	ld	d,(hl)
2263  0974  2B          	dec	hl
2264  0975  7E          	ld	a, (hl)
2265  0976  06 04       	ld	b,0x04
2266  0978              l_player_hit_platform_00256:
2267  0978  CB 3A       	srl	d
2268  097A  1F          	rra
2269  097B  10 FB       	djnz	l_player_hit_platform_00256
2270  097D  07          	rlca
2271  097E  07          	rlca
2272  097F  07          	rlca
2273  0980  07          	rlca
2274  0981  E6 F0       	and	a,0xf0
2275  0983  47          	ld	b, a
2276  0984  21 00 00    	ld	hl,0x0000
2277  0987  E5          	push	hl
2278  0988  21 87 03    	ld	hl,0x0387
2279  098B  E5          	push	hl
2280  098C  79          	ld	a, c
2281  098D  48          	ld	c,b
2282  098E  47          	ld	b,a
2283  098F  C5          	push	bc
2284  0990  CD 00 00    	call	_spr_add_anim
2285  0993  F1          	pop	af
2286  0994  F1          	pop	af
2287  0995  F1          	pop	af
2288  0996  2E 01       	ld	l,0x01
2289  0998  C3 66 0B    	jp	l_player_hit_platform_00148
2290  099B              l_player_hit_platform_00114:
2291  099B  FE 5C       	cp	a,0x5c
2292  099D  28 05       	jr	Z,l_player_hit_platform_00141
2293  099F  D6 5D       	sub	a,0x5d
2294  09A1  C2 58 0B    	jp	NZ,l_player_hit_platform_00142
2295  09A4              l_player_hit_platform_00141:
2296  09A4  21 00 00    	ld	hl,_tmp0
2297  09A7  36 00       	ld	(hl),0x00
2298  09A9  3A 00 00    	ld	a,(_game_boss)
2299  09AC  B7          	or	a, a
2300  09AD  28 0B       	jr	Z,l_player_hit_platform_00174
2301  09AF  3A 00 00    	ld	a,(_game_mush_count)
2302  09B2  B7          	or	a, a
2303  09B3  28 05       	jr	Z,l_player_hit_platform_00174
2304  09B5  2E 00       	ld	l,0x00
2305  09B7  C3 66 0B    	jp	l_player_hit_platform_00148
2306  09BA              l_player_hit_platform_00174:
2307  09BA              l_player_hit_platform_00138:
2308  09BA  21 00 00    	ld	hl,_tmp0
2309  09BD  7E          	ld	a, (hl)
2310  09BE  D6 07       	sub	a,0x07
2311  09C0  D2 58 0B    	jp	NC, l_player_hit_platform_00142
2312  09C3  4E          	ld	c,(hl)
2313  09C4  06 00       	ld	b,0x00
2314  09C6  21 00 00    	ld	hl,_mush_index
2315  09C9  09          	add	hl,bc
2316  09CA  4E          	ld	c, (hl)
2317  09CB  06 00       	ld	b,0x00
2318  09CD  2A 00 00    	ld	hl,(_index1)
2319  09D0  AF          	xor	a,a
2320  09D1  ED 42       	sbc	hl,bc
2321  09D3  C2 51 0B    	jp	NZ,l_player_hit_platform_00137
2322  09D6  3A 07 00    	ld	a,(_lin + 0x0007)
2323  09D9  07          	rlca
2324  09DA  07          	rlca
2325  09DB  07          	rlca
2326  09DC  07          	rlca
2327  09DD  E6 0F       	and	a,0x0f
2328  09DF  07          	rlca
2329  09E0  07          	rlca
2330  09E1  07          	rlca
2331  09E2  07          	rlca
2332  09E3  E6 F0       	and	a,0xf0
2333  09E5  C6 E0       	add	a,0xe0
2334  09E7  32 00 00    	ld	(_s_lin1),a
2335  09EA  3A 07 00    	ld	a,(_col + 0x0007)
2336  09ED  CB 3F       	srl	a
2337  09EF  87          	add	a, a
2338  09F0  32 00 00    	ld	(_s_col1),a
2339  09F3  21 00 00    	ld	hl,_tmp
2340  09F6  36 00       	ld	(hl),0x00
2341  09F8              l_player_hit_platform_00120:
2342  09F8  21 00 00    	ld	hl,_tmp
2343  09FB  7E          	ld	a, (hl)
2344  09FC  D6 07       	sub	a,0x07
2345  09FE  30 1C       	jr	NC,l_player_hit_platform_00122
2346  0A00  4E          	ld	c,(hl)
2347  0A01  06 00       	ld	b,0x00
2348  0A03  21 00 00    	ld	hl,_mush_index
2349  0A06  09          	add	hl,bc
2350  0A07  4E          	ld	c, (hl)
2351  0A08  06 00       	ld	b,0x00
2352  0A0A  21 00 00    	ld	hl,_index1
2353  0A0D  7E          	ld	a, (hl)
2354  0A0E  91          	sub	a, c
2355  0A0F  20 05       	jr	NZ,l_player_hit_platform_00262
2356  0A11  23          	inc	hl
2357  0A12  7E          	ld	a, (hl)
2358  0A13  90          	sub	a, b
2359  0A14  28 06       	jr	Z,l_player_hit_platform_00122
2360  0A16              l_player_hit_platform_00262:
2361  0A16  21 00 00    	ld	hl,_tmp
2362  0A19  34          	inc	(hl)
2363  0A1A  18 DC       	jr	l_player_hit_platform_00120
2364  0A1C              l_player_hit_platform_00122:
2365  0A1C  2A 00 00    	ld	hl,(_tmp)
2366  0A1F  26 00       	ld	h,0x00
2367  0A21  01 00 00    	ld	bc,_mush_class
2368  0A24  09          	add	hl,bc
2369  0A25  7E          	ld	a,(hl)
2370  0A26  FE 78       	cp	a,0x78
2371  0A28  28 18       	jr	Z,l_player_hit_platform_00123
2372  0A2A  FE 79       	cp	a,0x79
2373  0A2C  28 2F       	jr	Z,l_player_hit_platform_00124
2374  0A2E  FE 7A       	cp	a,0x7a
2375  0A30  28 5F       	jr	Z,l_player_hit_platform_00126
2376  0A32  FE 7B       	cp	a,0x7b
2377  0A34  28 41       	jr	Z,l_player_hit_platform_00125
2378  0A36  FE 7C       	cp	a,0x7c
2379  0A38  CA C5 0A    	jp	Z,l_player_hit_platform_00128
2380  0A3B  D6 7D       	sub	a,0x7d
2381  0A3D  28 6C       	jr	Z,l_player_hit_platform_00127
2382  0A3F  C3 DD 0A    	jp	l_player_hit_platform_00129
2383  0A42              l_player_hit_platform_00123:
2384  0A42  2E 02       	ld	l,0x02
2385  0A44  CD 00 00    	call	_zx_border_fastcall
2386  0A47  3A 00 00    	ld	a,(_s_col1)
2387  0A4A  21 06 FF    	ld	hl,0xff06
2388  0A4D  E5          	push	hl
2389  0A4E  F5          	push	af
2390  0A4F  33          	inc	sp
2391  0A50  3A 00 00    	ld	a,(_s_lin1)
2392  0A53  F5          	push	af
2393  0A54  33          	inc	sp
2394  0A55  CD 00 00    	call	_enemy_init
2395  0A58  F1          	pop	af
2396  0A59  F1          	pop	af
2397  0A5A  C3 DD 0A    	jp	l_player_hit_platform_00129
2398  0A5D              l_player_hit_platform_00124:
2399  0A5D  2E 02       	ld	l,0x02
2400  0A5F  CD 00 00    	call	_zx_border_fastcall
2401  0A62  3A 00 00    	ld	a,(_s_col1)
2402  0A65  21 06 01    	ld	hl,0x0106
2403  0A68  E5          	push	hl
2404  0A69  F5          	push	af
2405  0A6A  33          	inc	sp
2406  0A6B  3A 00 00    	ld	a,(_s_lin1)
2407  0A6E  F5          	push	af
2408  0A6F  33          	inc	sp
2409  0A70  CD 00 00    	call	_enemy_init
2410  0A73  F1          	pop	af
2411  0A74  F1          	pop	af
2412  0A75  18 66       	jr	l_player_hit_platform_00129
2413  0A77              l_player_hit_platform_00125:
2414  0A77  2E 01       	ld	l,0x01
2415  0A79  CD 00 00    	call	_zx_border_fastcall
2416  0A7C  3A 00 00    	ld	a,(_s_col1)
2417  0A7F  21 07 01    	ld	hl,0x0107
2418  0A82  E5          	push	hl
2419  0A83  F5          	push	af
2420  0A84  33          	inc	sp
2421  0A85  3A 00 00    	ld	a,(_s_lin1)
2422  0A88  F5          	push	af
2423  0A89  33          	inc	sp
2424  0A8A  CD 00 00    	call	_enemy_init
2425  0A8D  F1          	pop	af
2426  0A8E  F1          	pop	af
2427  0A8F  18 4C       	jr	l_player_hit_platform_00129
2428  0A91              l_player_hit_platform_00126:
2429  0A91  2E 01       	ld	l,0x01
2430  0A93  CD 00 00    	call	_zx_border_fastcall
2431  0A96  3A 00 00    	ld	a,(_s_col1)
2432  0A99  21 07 FF    	ld	hl,0xff07
2433  0A9C  E5          	push	hl
2434  0A9D  F5          	push	af
2435  0A9E  33          	inc	sp
2436  0A9F  3A 00 00    	ld	a,(_s_lin1)
2437  0AA2  F5          	push	af
2438  0AA3  33          	inc	sp
2439  0AA4  CD 00 00    	call	_enemy_init
2440  0AA7  F1          	pop	af
2441  0AA8  F1          	pop	af
2442  0AA9  18 32       	jr	l_player_hit_platform_00129
2443  0AAB              l_player_hit_platform_00127:
2444  0AAB  2E 04       	ld	l,0x04
2445  0AAD  CD 00 00    	call	_zx_border_fastcall
2446  0AB0  3A 00 00    	ld	a,(_s_col1)
2447  0AB3  21 08 01    	ld	hl,0x0108
2448  0AB6  E5          	push	hl
2449  0AB7  F5          	push	af
2450  0AB8  33          	inc	sp
2451  0AB9  3A 00 00    	ld	a,(_s_lin1)
2452  0ABC  F5          	push	af
2453  0ABD  33          	inc	sp
2454  0ABE  CD 00 00    	call	_enemy_init
2455  0AC1  F1          	pop	af
2456  0AC2  F1          	pop	af
2457  0AC3  18 18       	jr	l_player_hit_platform_00129
2458  0AC5              l_player_hit_platform_00128:
2459  0AC5  2E 04       	ld	l,0x04
2460  0AC7  CD 00 00    	call	_zx_border_fastcall
2461  0ACA  3A 00 00    	ld	a,(_s_col1)
2462  0ACD  21 08 FF    	ld	hl,0xff08
2463  0AD0  E5          	push	hl
2464  0AD1  F5          	push	af
2465  0AD2  33          	inc	sp
2466  0AD3  3A 00 00    	ld	a,(_s_lin1)
2467  0AD6  F5          	push	af
2468  0AD7  33          	inc	sp
2469  0AD8  CD 00 00    	call	_enemy_init
2470  0ADB  F1          	pop	af
2471  0ADC  F1          	pop	af
2472  0ADD              l_player_hit_platform_00129:
2473  0ADD  21 00 00    	ld	hl,_game_mush_count
2474  0AE0  34          	inc	(hl)
2475  0AE1  3A 00 00    	ld	a,(_game_boss)
2476  0AE4  B7          	or	a, a
2477  0AE5  20 6A       	jr	NZ,l_player_hit_platform_00137
2478  0AE7  3A 00 00    	ld	a,(_index1)
2479  0AEA  C6 F0       	add	a,0xf0
2480  0AEC  32 00 00    	ld	(_index0),a
2481  0AEF  3A 01 00    	ld	a,(_index1 + 1)
2482  0AF2  CE FF       	adc	a,0xff
2483  0AF4  21 01 00    	ld	hl,_index0 + 1
2484  0AF7  77          	ld	(hl), a
2485  0AF8  3E 00       	ld	a, +((_scr_map) & 0xFF)
2486  0AFA  2B          	dec	hl
2487  0AFB  86          	add	a, (hl)
2488  0AFC  4F          	ld	c, a
2489  0AFD  3E 00       	ld	a, +((_scr_map) / 256)
2490  0AFF  23          	inc	hl
2491  0B00  8E          	adc	a, (hl)
2492  0B01  47          	ld	b, a
2493  0B02  C5          	push	bc
2494  0B03  46          	ld	b,(hl)
2495  0B04  2B          	dec	hl
2496  0B05  4E          	ld	c,(hl)
2497  0B06  C5          	push	bc
2498  0B07  CD 00 00    	call	_game_match_back
2499  0B0A  F1          	pop	af
2500  0B0B  C1          	pop	bc
2501  0B0C  7D          	ld	a,l
2502  0B0D  02          	ld	(bc), a
2503  0B0E  3E 00       	ld	a, +((_scr_map) & 0xFF)
2504  0B10  21 00 00    	ld	hl,_index1
2505  0B13  86          	add	a, (hl)
2506  0B14  DD 77 FE    	ld	(ix-2),a
2507  0B17  3E 00       	ld	a, +((_scr_map) / 256)
2508  0B19  23          	inc	hl
2509  0B1A  8E          	adc	a, (hl)
2510  0B1B  DD 77 FF    	ld	(ix-1),a
2511  0B1E  E1          	pop	hl
2512  0B1F  7E          	ld	a,(hl)
2513  0B20  E5          	push	hl
2514  0B21  FE 5C       	cp	a,0x5c
2515  0B23  28 04       	jr	Z,l_player_hit_platform_00130
2516  0B25  D6 5D       	sub	a,0x5d
2517  0B27  20 06       	jr	NZ,l_player_hit_platform_00131
2518  0B29              l_player_hit_platform_00130:
2519  0B29  E1          	pop	hl
2520  0B2A  E5          	push	hl
2521  0B2B  36 4F       	ld	(hl),0x4f
2522  0B2D  18 04       	jr	l_player_hit_platform_00132
2523  0B2F              l_player_hit_platform_00131:
2524  0B2F  E1          	pop	hl
2525  0B30  E5          	push	hl
2526  0B31  36 54       	ld	(hl),0x54
2527  0B33              l_player_hit_platform_00132:
2528  0B33  2A 00 00    	ld	hl,(_index1)
2529  0B36  01 F0 FF    	ld	bc,0xfff0
2530  0B39  09          	add	hl,bc
2531  0B3A  E5          	push	hl
2532  0B3B  CD 00 00    	call	_game_obj_set
2533  0B3E  F1          	pop	af
2534  0B3F  3A 00 00    	ld	a,(_s_lin1)
2535  0B42  C6 10       	add	a,0x10
2536  0B44  4F          	ld	c, a
2537  0B45  3A 00 00    	ld	a, (_s_col1)
2538  0B48  47          	ld	b,a
2539  0B49  C5          	push	bc
2540  0B4A  3E 4F       	ld	a,0x4f
2541  0B4C  F5          	push	af
2542  0B4D  33          	inc	sp
2543  0B4E  CD 00 00    	call	_NIRVANAP_drawT_callee
2544  0B51              l_player_hit_platform_00137:
2545  0B51  21 00 00    	ld	hl,_tmp0
2546  0B54  34          	inc	(hl)
2547  0B55  C3 BA 09    	jp	l_player_hit_platform_00138
2548  0B58              l_player_hit_platform_00142:
2549  0B58  2E 01       	ld	l,0x01
2550  0B5A  CD 00 00    	call	_spr_brick_anim
2551  0B5D  CD 00 00    	call	_sound_hit_brick
2552  0B60  2E 01       	ld	l,0x01
2553  0B62  18 02       	jr	l_player_hit_platform_00148
2554  0B64              l_player_hit_platform_00145:
2555  0B64  2E 00       	ld	l,0x00
2556  0B66              l_player_hit_platform_00148:
2557  0B66  F1          	pop	af
2558  0B67  DD E1       	pop	ix
2559  0B69  C9          	ret
2560  0B6A              	SECTION code_compiler
2561  0B6A              ;	---------------------------------
2562  0B6A              ; Function player_hit_platform_clear
2563  0B6A              ; ---------------------------------
2564  0B6A              _player_hit_platform_clear:
2565  0B6A  01 04 00    	ld	bc,0x0004
2566  0B6D  C5          	push	bc
2567  0B6E  2A 0E 00    	ld	hl,(_spr_timer + 0x000e)
2568  0B71  E5          	push	hl
2569  0B72  CD 00 00    	call	_game_check_time
2570  0B75  F1          	pop	af
2571  0B76  F1          	pop	af
2572  0B77  7D          	ld	a, l
2573  0B78  B7          	or	a, a
2574  0B79  C8          	ret	Z
2575  0B7A  2A FF FF    	ld	hl,(_player_hit_col - 1)
2576  0B7D  3A 00 00    	ld	a,(_player_hit_lin)
2577  0B80  6F          	ld	l,a
2578  0B81  E5          	push	hl
2579  0B82  CD 00 00    	call	_spr_calc_index
2580  0B85  F1          	pop	af
2581  0B86  22 00 00    	ld	(_index1),hl
2582  0B89  2E 00       	ld	l,0x00
2583  0B8B  CD 00 00    	call	_spr_brick_anim
2584  0B8E  21 00 00    	ld	hl,_player_hit_lin
2585  0B91  36 00       	ld	(hl),0x00
2586  0B93  21 00 00    	ld	hl,_player_hit_col
2587  0B96  36 00       	ld	(hl),0x00
2588  0B98  C9          	ret
2589  0B99              	SECTION code_compiler
2590  0B99              ;	---------------------------------
2591  0B99              ; Function player_score_add
2592  0B99              ; ---------------------------------
2593  0B99              _player_score_add:
2594  0B99  ED 4B 00 00 	ld	bc,(_player_score)
2595  0B9D  09          	add	hl,bc
2596  0B9E  22 00 00    	ld	(_player_score),hl
2597  0BA1  21 00 00    	ld	hl,_player_lvl
2598  0BA4  7E          	ld	a, (hl)
2599  0BA5  D6 14       	sub	a,0x14
2600  0BA7  30 3C       	jr	NC,l_player_score_add_00104
2601  0BA9  01 00 00    	ld	bc,_player_lvl_table+0
2602  0BAC  6E          	ld	l,(hl)
2603  0BAD  26 00       	ld	h,0x00
2604  0BAF  29          	add	hl, hl
2605  0BB0  09          	add	hl, bc
2606  0BB1  4E          	ld	c, (hl)
2607  0BB2  23          	inc	hl
2608  0BB3  46          	ld	b, (hl)
2609  0BB4  21 00 00    	ld	hl,_player_score
2610  0BB7  7E          	ld	a, (hl)
2611  0BB8  91          	sub	a, c
2612  0BB9  23          	inc	hl
2613  0BBA  7E          	ld	a, (hl)
2614  0BBB  98          	sbc	a, b
2615  0BBC  38 27       	jr	C,l_player_score_add_00104
2616  0BBE  21 00 00    	ld	hl,_player_lvl
2617  0BC1  34          	inc	(hl)
2618  0BC2  21 06 00    	ld	hl,___str_1
2619  0BC5  E5          	push	hl
2620  0BC6  21 0C 0C    	ld	hl,0x0c0c
2621  0BC9  E5          	push	hl
2622  0BCA  CD 00 00    	call	_zx_print_str
2623  0BCD  AF          	xor	a, a
2624  0BCE  F5          	push	af
2625  0BCF  33          	inc	sp
2626  0BD0  21 19 00    	ld	hl,0x0019
2627  0BD3  E5          	push	hl
2628  0BD4  21 0C 15    	ld	hl,0x150c
2629  0BD7  E5          	push	hl
2630  0BD8  3E 0C       	ld	a,0x0c
2631  0BDA  F5          	push	af
2632  0BDB  33          	inc	sp
2633  0BDC  CD 00 00    	call	_game_colour_message
2634  0BDF  F1          	pop	af
2635  0BE0  F1          	pop	af
2636  0BE1  F1          	pop	af
2637  0BE2  CD 00 00    	call	_game_update_stats
2638  0BE5              l_player_score_add_00104:
2639  0BE5  3A 00 00    	ld	a,(_game_score_top)
2640  0BE8  21 00 00    	ld	hl,_player_score
2641  0BEB  96          	sub	a, (hl)
2642  0BEC  3A 01 00    	ld	a,(_game_score_top + 1)
2643  0BEF  23          	inc	hl
2644  0BF0  9E          	sbc	a, (hl)
2645  0BF1  30 06       	jr	NC,l_player_score_add_00106
2646  0BF3  2A 00 00    	ld	hl,(_player_score)
2647  0BF6  22 00 00    	ld	(_game_score_top),hl
2648  0BF9              l_player_score_add_00106:
2649  0BF9  CD 00 00    	call	_game_print_score
2650  0BFC  C9          	ret
2651  0BFD              	SECTION rodata_compiler
2652  0006              ___str_1:
2653  0006  4C 45 56 45 4C 20 55 50 21 
                        	DEFM "LEVEL UP!"
2654  000F  00          	DEFB 0x00
2655  0010              	SECTION code_compiler
2656  0BFD              ;	---------------------------------
2657  0BFD              ; Function player_check_floor
2658  0BFD              ; ---------------------------------
2659  0BFD              _player_check_floor:
2660  0BFD  CD 00 00    	call	___sdcc_enter_ix
2661  0C00  F5          	push	af
2662  0C01  F5          	push	af
2663  0C02  F5          	push	af
2664  0C03  11 07 00    	ld	de,_col+7
2665  0C06  1A          	ld	a, (de)
2666  0C07  47          	ld	b, a
2667  0C08  3A 07 00    	ld	a,(_lin + 0x0007)
2668  0C0B  C6 10       	add	a,0x10
2669  0C0D  D5          	push	de
2670  0C0E  4F          	ld	c,a
2671  0C0F  C5          	push	bc
2672  0C10  CD 00 00    	call	_spr_calc_index
2673  0C13  F1          	pop	af
2674  0C14  D1          	pop	de
2675  0C15  DD 75 FC    	ld	(ix-4),l
2676  0C18  DD 74 FD    	ld	(ix-3),h
2677  0C1B  01 00 00    	ld	bc,_scr_map+0
2678  0C1E  79          	ld	a, c
2679  0C1F  DD 86 FC    	add	a,(ix-4)
2680  0C22  DD 77 FE    	ld	(ix-2),a
2681  0C25  78          	ld	a, b
2682  0C26  DD 8E FD    	adc	a,(ix-3)
2683  0C29  DD 6E FE    	ld	l,(ix-2)
2684  0C2C  DD 77 FF    	ld	(ix-1),a
2685  0C2F  67          	ld	h,a
2686  0C30  7E          	ld	a, (hl)
2687  0C31  DD 77 FB    	ld	(ix-5),a
2688  0C34  DD 6E FC    	ld	l,(ix-4)
2689  0C37  DD 66 FD    	ld	h,(ix-3)
2690  0C3A  23          	inc	hl
2691  0C3B  09          	add	hl,bc
2692  0C3C  3A 00 00    	ld	a,(_s_lin0)
2693  0C3F  D6 90       	sub	a,0x90
2694  0C41  4D          	ld	c,l
2695  0C42  44          	ld	b,h
2696  0C43  20 26       	jr	NZ,l_player_check_floor_00108
2697  0C45  3A 00 00    	ld	a,(_map_heigth)
2698  0C48  C5          	push	bc
2699  0C49  F5          	push	af
2700  0C4A  33          	inc	sp
2701  0C4B  3A 00 00    	ld	a,(_scr_curr)
2702  0C4E  F5          	push	af
2703  0C4F  33          	inc	sp
2704  0C50  CD 00 00    	call	__divuchar_callee
2705  0C53  C1          	pop	bc
2706  0C54  7D          	ld	a,l
2707  0C55  3C          	inc	a
2708  0C56  32 00 00    	ld	(_tmp1),a
2709  0C59  21 00 00    	ld	hl,_map_heigth
2710  0C5C  96          	sub	a, (hl)
2711  0C5D  30 06       	jr	NC,l_player_check_floor_00102
2712  0C5F  DD 36 FB 00 	ld	(ix-5),0x00
2713  0C63  18 14       	jr	l_player_check_floor_00109
2714  0C65              l_player_check_floor_00102:
2715  0C65  DD 36 FB 48 	ld	(ix-5),0x48
2716  0C69  18 0E       	jr	l_player_check_floor_00109
2717  0C6B              l_player_check_floor_00108:
2718  0C6B  1A          	ld	a, (de)
2719  0C6C  0F          	rrca
2720  0C6D  38 06       	jr	C,l_player_check_floor_00105
2721  0C6F  DD 36 FA 00 	ld	(ix-6),0x00
2722  0C73  18 04       	jr	l_player_check_floor_00109
2723  0C75              l_player_check_floor_00105:
2724  0C75  0A          	ld	a, (bc)
2725  0C76  DD 77 FA    	ld	(ix-6),a
2726  0C79              l_player_check_floor_00109:
2727  0C79  DD 7E FB    	ld	a,(ix-5)
2728  0C7C  D6 3C       	sub	a,0x3c
2729  0C7E  38 07       	jr	C,l_player_check_floor_00132
2730  0C80  DD 7E FB    	ld	a,(ix-5)
2731  0C83  D6 60       	sub	a,0x60
2732  0C85  38 32       	jr	C,l_player_check_floor_00128
2733  0C87              l_player_check_floor_00132:
2734  0C87  DD 7E FA    	ld	a,(ix-6)
2735  0C8A  D6 3C       	sub	a,0x3c
2736  0C8C  38 07       	jr	C,l_player_check_floor_00127
2737  0C8E  DD 7E FA    	ld	a,(ix-6)
2738  0C91  D6 60       	sub	a,0x60
2739  0C93  38 24       	jr	C,l_player_check_floor_00128
2740  0C95              l_player_check_floor_00127:
2741  0C95  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
2742  0C98  36 02       	ld	(hl),0x02
2743  0C9A  21 00 00    	ld	hl,_s_state
2744  0C9D  CB CE       	set	1, (hl)
2745  0C9F  2E 00       	ld	l,0x00
2746  0CA1  CD 29 06    	call	_player_check_stairs
2747  0CA4  3A 00 00    	ld	a,(_player_onstair)
2748  0CA7  B7          	or	a, a
2749  0CA8  C2 53 0D    	jp	NZ, l_player_check_floor_00133
2750  0CAB  3A 00 00    	ld	a,(_s_lin0)
2751  0CAE  D6 90       	sub	a,0x90
2752  0CB0  C2 53 0D    	jp	NZ,l_player_check_floor_00133
2753  0CB3  CD 00 00    	call	_spr_page_down
2754  0CB6  C3 53 0D    	jp	l_player_check_floor_00133
2755  0CB9              l_player_check_floor_00128:
2756  0CB9  C5          	push	bc
2757  0CBA  21 10 00    	ld	hl,0x0010
2758  0CBD  E5          	push	hl
2759  0CBE  2A 00 00    	ld	hl,(_player_brick_time)
2760  0CC1  E5          	push	hl
2761  0CC2  CD 00 00    	call	_game_check_time
2762  0CC5  F1          	pop	af
2763  0CC6  F1          	pop	af
2764  0CC7  C1          	pop	bc
2765  0CC8  7D          	ld	a,l
2766  0CC9  B7          	or	a, a
2767  0CCA  CA 53 0D    	jp	Z, l_player_check_floor_00133
2768  0CCD  2A 00 00    	ld	hl,(_curr_time)
2769  0CD0  22 00 00    	ld	(_player_brick_time),hl
2770  0CD3  DD 7E FB    	ld	a,(ix-5)
2771  0CD6  D6 40       	sub	a,0x40
2772  0CD8  20 1A       	jr	NZ,l_player_check_floor_00114
2773  0CDA  C5          	push	bc
2774  0CDB  DD 6E FC    	ld	l,(ix-4)
2775  0CDE  DD 66 FD    	ld	h,(ix-3)
2776  0CE1  E5          	push	hl
2777  0CE2  CD 00 00    	call	_game_match_back
2778  0CE5  F1          	pop	af
2779  0CE6  C1          	pop	bc
2780  0CE7  5D          	ld	e,l
2781  0CE8  DD 6E FE    	ld	l,(ix-2)
2782  0CEB  DD 66 FF    	ld	h,(ix-1)
2783  0CEE  73          	ld	(hl), e
2784  0CEF  C5          	push	bc
2785  0CF0  CD 58 0D    	call	_player_gasta_brick
2786  0CF3  C1          	pop	bc
2787  0CF4              l_player_check_floor_00114:
2788  0CF4  DD 7E FB    	ld	a,(ix-5)
2789  0CF7  D6 3F       	sub	a,0x3f
2790  0CF9  20 0D       	jr	NZ,l_player_check_floor_00116
2791  0CFB  DD 6E FE    	ld	l,(ix-2)
2792  0CFE  DD 66 FF    	ld	h,(ix-1)
2793  0D01  36 40       	ld	(hl),0x40
2794  0D03  C5          	push	bc
2795  0D04  CD 58 0D    	call	_player_gasta_brick
2796  0D07  C1          	pop	bc
2797  0D08              l_player_check_floor_00116:
2798  0D08  DD 7E FB    	ld	a,(ix-5)
2799  0D0B  D6 3E       	sub	a,0x3e
2800  0D0D  20 0D       	jr	NZ,l_player_check_floor_00118
2801  0D0F  DD 6E FE    	ld	l,(ix-2)
2802  0D12  DD 66 FF    	ld	h,(ix-1)
2803  0D15  36 3F       	ld	(hl),0x3f
2804  0D17  C5          	push	bc
2805  0D18  CD 58 0D    	call	_player_gasta_brick
2806  0D1B  C1          	pop	bc
2807  0D1C              l_player_check_floor_00118:
2808  0D1C  DD 7E FA    	ld	a,(ix-6)
2809  0D1F  D6 40       	sub	a,0x40
2810  0D21  20 14       	jr	NZ,l_player_check_floor_00120
2811  0D23  C5          	push	bc
2812  0D24  DD 6E FC    	ld	l,(ix-4)
2813  0D27  DD 66 FD    	ld	h,(ix-3)
2814  0D2A  E5          	push	hl
2815  0D2B  CD 00 00    	call	_game_match_back
2816  0D2E  F1          	pop	af
2817  0D2F  C1          	pop	bc
2818  0D30  7D          	ld	a,l
2819  0D31  02          	ld	(bc), a
2820  0D32  C5          	push	bc
2821  0D33  CD 58 0D    	call	_player_gasta_brick
2822  0D36  C1          	pop	bc
2823  0D37              l_player_check_floor_00120:
2824  0D37  DD 7E FA    	ld	a,(ix-6)
2825  0D3A  D6 3F       	sub	a,0x3f
2826  0D3C  20 08       	jr	NZ,l_player_check_floor_00122
2827  0D3E  3E 40       	ld	a,0x40
2828  0D40  02          	ld	(bc), a
2829  0D41  C5          	push	bc
2830  0D42  CD 58 0D    	call	_player_gasta_brick
2831  0D45  C1          	pop	bc
2832  0D46              l_player_check_floor_00122:
2833  0D46  DD 7E FA    	ld	a,(ix-6)
2834  0D49  D6 3E       	sub	a,0x3e
2835  0D4B  20 06       	jr	NZ,l_player_check_floor_00133
2836  0D4D  3E 3F       	ld	a,0x3f
2837  0D4F  02          	ld	(bc), a
2838  0D50  CD 58 0D    	call	_player_gasta_brick
2839  0D53              l_player_check_floor_00133:
2840  0D53  DD F9       	ld	sp, ix
2841  0D55  DD E1       	pop	ix
2842  0D57  C9          	ret
2843  0D58              	SECTION code_compiler
2844  0D58              ;	---------------------------------
2845  0D58              ; Function player_gasta_brick
2846  0D58              ; ---------------------------------
2847  0D58              _player_gasta_brick:
2848  0D58  3A 00 00    	ld	a,(_s_lin0)
2849  0D5B  32 00 00    	ld	(_s_lin1),a
2850  0D5E  3A 00 00    	ld	a,(_s_col0)
2851  0D61  32 00 00    	ld	(_s_col1),a
2852  0D64  3A 07 00    	ld	a,(_lin + 0x0007)
2853  0D67  C6 10       	add	a,0x10
2854  0D69  32 00 00    	ld	(_s_lin0),a
2855  0D6C  3A 07 00    	ld	a,(_col + 0x0007)
2856  0D6F  32 00 00    	ld	(_s_col0),a
2857  0D72  CD 00 00    	call	_spr_back_repaint
2858  0D75  3A 00 00    	ld	a,(_s_lin1)
2859  0D78  32 00 00    	ld	(_s_lin0),a
2860  0D7B  3A 00 00    	ld	a,(_s_col1)
2861  0D7E  32 00 00    	ld	(_s_col0),a
2862  0D81  C9          	ret
2863  0D82              	SECTION code_compiler
2864  0D82              ;	---------------------------------
2865  0D82              ; Function player_move_jump
2866  0D82              ; ---------------------------------
2867  0D82              _player_move_jump:
2868  0D82  CD 00 00    	call	___sdcc_enter_ix
2869  0D85  F5          	push	af
2870  0D86  21 00 00    	ld	hl,_game_gravity
2871  0D89  4E          	ld	c, (hl)
2872  0D8A  21 00 00    	ld	hl,_player_vel_y
2873  0D8D  7E          	ld	a, (hl)
2874  0D8E  81          	add	a, c
2875  0D8F  77          	ld	(hl), a
2876  0D90  21 00 00    	ld	hl,_sprite_on_air
2877  0D93  36 01       	ld	(hl),0x01
2878  0D95  3A 00 00    	ld	a,(_player_vel_inc)
2879  0D98  B7          	or	a, a
2880  0D99  28 2B       	jr	Z,l_player_move_jump_00107
2881  0D9B  21 00 00    	ld	hl,_dirs
2882  0D9E  CB 7E       	bit	7, (hl)
2883  0DA0  28 07       	jr	Z,l_player_move_jump_00104
2884  0DA2  21 00 00    	ld	hl,_dirs
2885  0DA5  CB 46       	bit	0, (hl)
2886  0DA7  20 1D       	jr	NZ,l_player_move_jump_00107
2887  0DA9              l_player_move_jump_00104:
2888  0DA9  3A 00 00    	ld	a,(_player_vel_y1)
2889  0DAC  21 00 00    	ld	hl,_player_vel_y
2890  0DAF  96          	sub	a, (hl)
2891  0DB0  E2 B5 0D    	jp	PO, l_player_move_jump_00269
2892  0DB3  EE 80       	xor	a,0x80
2893  0DB5              l_player_move_jump_00269:
2894  0DB5  F2 C6 0D    	jp	P, l_player_move_jump_00107
2895  0DB8  21 00 00    	ld	hl,_player_vel_y
2896  0DBB  CB 7E       	bit	7,(hl)
2897  0DBD  28 07       	jr	Z,l_player_move_jump_00107
2898  0DBF  36 00       	ld	(hl),0x00
2899  0DC1  21 00 00    	ld	hl,_player_vel_inc
2900  0DC4  36 00       	ld	(hl),0x00
2901  0DC6              l_player_move_jump_00107:
2902  0DC6  3E 78       	ld	a,0x78
2903  0DC8  21 00 00    	ld	hl,_player_vel_y
2904  0DCB  96          	sub	a, (hl)
2905  0DCC  E2 D1 0D    	jp	PO, l_player_move_jump_00270
2906  0DCF  EE 80       	xor	a,0x80
2907  0DD1              l_player_move_jump_00270:
2908  0DD1  F2 D9 0D    	jp	P, l_player_move_jump_00109
2909  0DD4  21 00 00    	ld	hl,_player_vel_y
2910  0DD7  36 78       	ld	(hl),0x78
2911  0DD9              l_player_move_jump_00109:
2912  0DD9  21 00 00    	ld	hl,_player_vel_y
2913  0DDC  7E          	ld	a, (hl)
2914  0DDD  EE 80       	xor	a,0x80
2915  0DDF  D6 08       	sub	a,0x08
2916  0DE1  30 02       	jr	NC,l_player_move_jump_00111
2917  0DE3  36 88       	ld	(hl),0x88
2918  0DE5              l_player_move_jump_00111:
2919  0DE5  21 00 00    	ld	hl,_player_vel_y
2920  0DE8  7E          	ld	a, (hl)
2921  0DE9  DD 77 FE    	ld	(ix-2),a
2922  0DEC  7E          	ld	a, (hl)
2923  0DED  17          	rla
2924  0DEE  9F          	sbc	a, a
2925  0DEF  DD 77 FF    	ld	(ix-1),a
2926  0DF2  DD 7E FE    	ld	a,(ix-2)
2927  0DF5  CB 47       	bit	0,a
2928  0DF7  32 00 00    	ld	(_s_lin1),a
2929  0DFA  28 04       	jr	Z,l_player_move_jump_00113
2930  0DFC  21 00 00    	ld	hl,_s_lin1
2931  0DFF  35          	dec	(hl)
2932  0E00              l_player_move_jump_00113:
2933  0E00  3A 07 00    	ld	a,(_lin + 0x0007)
2934  0E03  21 00 00    	ld	hl,_s_lin1
2935  0E06  86          	add	a, (hl)
2936  0E07  77          	ld	(hl), a
2937  0E08  3E 90       	ld	a,0x90
2938  0E0A  96          	sub	a, (hl)
2939  0E0B  30 2B       	jr	NC,l_player_move_jump_00124
2940  0E0D  3E C8       	ld	a,0xc8
2941  0E0F  96          	sub	a, (hl)
2942  0E10  30 13       	jr	NC,l_player_move_jump_00121
2943  0E12  CD 00 00    	call	_spr_page_up
2944  0E15  7D          	ld	a, l
2945  0E16  B7          	or	a, a
2946  0E17  28 05       	jr	Z,l_player_move_jump_00115
2947  0E19  2E 00       	ld	l,0x00
2948  0E1B  C3 A1 0F    	jp	l_player_move_jump_00160
2949  0E1E              l_player_move_jump_00115:
2950  0E1E  21 00 00    	ld	hl,_s_lin1
2951  0E21  36 00       	ld	(hl),0x00
2952  0E23  18 13       	jr	l_player_move_jump_00124
2953  0E25              l_player_move_jump_00121:
2954  0E25  CD 00 00    	call	_spr_page_down
2955  0E28  7D          	ld	a, l
2956  0E29  B7          	or	a, a
2957  0E2A  28 07       	jr	Z,l_player_move_jump_00118
2958  0E2C  21 00 00    	ld	hl,_s_lin1
2959  0E2F  36 10       	ld	(hl),0x10
2960  0E31  18 05       	jr	l_player_move_jump_00124
2961  0E33              l_player_move_jump_00118:
2962  0E33  21 00 00    	ld	hl,_s_lin1
2963  0E36  36 90       	ld	(hl),0x90
2964  0E38              l_player_move_jump_00124:
2965  0E38  3A 00 00    	ld	a,(_s_lin0)
2966  0E3B  07          	rlca
2967  0E3C  07          	rlca
2968  0E3D  07          	rlca
2969  0E3E  07          	rlca
2970  0E3F  E6 0F       	and	a,0x0f
2971  0E41  4F          	ld	c, a
2972  0E42  DD CB FF 7E 	bit	7,(ix-1)
2973  0E46  28 62       	jr	Z,l_player_move_jump_00149
2974  0E48  21 00 00    	ld	hl,_s_state
2975  0E4B  7E          	ld	a,(hl)
2976  0E4C  F6 01       	or	a,0x01
2977  0E4E  E6 FD       	and	a,0xfd
2978  0E50  77          	ld	(hl),a
2979  0E51  21 00 00    	ld	hl,_s_lin1
2980  0E54  46          	ld	b, (hl)
2981  0E55  79          	ld	a, c
2982  0E56  90          	sub	a, b
2983  0E57  20 04       	jr	NZ,l_player_move_jump_00272
2984  0E59  3E 01       	ld	a,0x01
2985  0E5B  18 01       	jr	l_player_move_jump_00273
2986  0E5D              l_player_move_jump_00272:
2987  0E5D  AF          	xor	a,a
2988  0E5E              l_player_move_jump_00273:
2989  0E5E  EE 01       	xor	a,0x01
2990  0E60  4F          	ld	c,a
2991  0E61  B7          	or	a, a
2992  0E62  28 3D       	jr	Z,l_player_move_jump_00131
2993  0E64  21 07 00    	ld	hl,+(_col + 0x0007)
2994  0E67  46          	ld	b, (hl)
2995  0E68  C5          	push	bc
2996  0E69  33          	inc	sp
2997  0E6A  3A 00 00    	ld	a,(_s_lin1)
2998  0E6D  F5          	push	af
2999  0E6E  33          	inc	sp
3000  0E6F  CD 00 00    	call	_game_check_map
3001  0E72  F1          	pop	af
3002  0E73  7C          	ld	a,h
3003  0E74  B5          	or	a,l
3004  0E75  28 21       	jr	Z,l_player_move_jump_00128
3005  0E77  CD C9 08    	call	_player_hit_platform
3006  0E7A  7D          	ld	a, l
3007  0E7B  B7          	or	a, a
3008  0E7C  28 12       	jr	Z,l_player_move_jump_00126
3009  0E7E  3A 07 00    	ld	a,(_lin + 0x0007)
3010  0E81  07          	rlca
3011  0E82  07          	rlca
3012  0E83  07          	rlca
3013  0E84  07          	rlca
3014  0E85  E6 0F       	and	a,0x0f
3015  0E87  07          	rlca
3016  0E88  07          	rlca
3017  0E89  07          	rlca
3018  0E8A  07          	rlca
3019  0E8B  E6 F0       	and	a,0xf0
3020  0E8D  32 07 00    	ld	((_lin + 0x0007)),a
3021  0E90              l_player_move_jump_00126:
3022  0E90  21 00 00    	ld	hl,_player_vel_y
3023  0E93  36 00       	ld	(hl),0x00
3024  0E95  C3 63 0F    	jp	l_player_move_jump_00150
3025  0E98              l_player_move_jump_00128:
3026  0E98  3A 00 00    	ld	a,(_s_lin1)
3027  0E9B  32 07 00    	ld	((_lin + 0x0007)),a
3028  0E9E  C3 63 0F    	jp	l_player_move_jump_00150
3029  0EA1              l_player_move_jump_00131:
3030  0EA1  3A 00 00    	ld	a,(_s_lin1)
3031  0EA4  32 07 00    	ld	((_lin + 0x0007)),a
3032  0EA7  C3 63 0F    	jp	l_player_move_jump_00150
3033  0EAA              l_player_move_jump_00149:
3034  0EAA  21 00 00    	ld	hl,_s_state
3035  0EAD  7E          	ld	a,(hl)
3036  0EAE  F6 02       	or	a,0x02
3037  0EB0  E6 FE       	and	a,0xfe
3038  0EB2  77          	ld	(hl),a
3039  0EB3  21 00 00    	ld	hl,_s_lin1
3040  0EB6  7E          	ld	a, (hl)
3041  0EB7  C6 10       	add	a,0x10
3042  0EB9  77          	ld	(hl),a
3043  0EBA  47          	ld	b,a
3044  0EBB  79          	ld	a, c
3045  0EBC  90          	sub	a, b
3046  0EBD  20 04       	jr	NZ,l_player_move_jump_00274
3047  0EBF  3E 01       	ld	a,0x01
3048  0EC1  18 01       	jr	l_player_move_jump_00275
3049  0EC3              l_player_move_jump_00274:
3050  0EC3  AF          	xor	a,a
3051  0EC4              l_player_move_jump_00275:
3052  0EC4  EE 01       	xor	a,0x01
3053  0EC6  4F          	ld	c,a
3054  0EC7  B7          	or	a, a
3055  0EC8  CA 56 0F    	jp	Z, l_player_move_jump_00146
3056  0ECB  21 07 00    	ld	hl,+(_col + 0x0007)
3057  0ECE  46          	ld	b, (hl)
3058  0ECF  C5          	push	bc
3059  0ED0  33          	inc	sp
3060  0ED1  3A 00 00    	ld	a,(_s_lin1)
3061  0ED4  F5          	push	af
3062  0ED5  33          	inc	sp
3063  0ED6  CD 00 00    	call	_game_check_map
3064  0ED9  F1          	pop	af
3065  0EDA  45          	ld	b, l
3066  0EDB  5C          	ld	e, h
3067  0EDC  21 00 00    	ld	hl,_s_lin1
3068  0EDF  7E          	ld	a, (hl)
3069  0EE0  C6 F0       	add	a,0xf0
3070  0EE2  4F          	ld	c, a
3071  0EE3  7B          	ld	a, e
3072  0EE4  B0          	or	a,b
3073  0EE5  28 63       	jr	Z,l_player_move_jump_00143
3074  0EE7  71          	ld	(hl), c
3075  0EE8  2E 00       	ld	l,0x00
3076  0EEA  CD 29 06    	call	_player_check_stairs
3077  0EED  3A 00 00    	ld	a,(_player_onstair)
3078  0EF0  B7          	or	a, a
3079  0EF1  20 05       	jr	NZ,l_player_move_jump_00134
3080  0EF3  2E 01       	ld	l,0x01
3081  0EF5  CD 29 06    	call	_player_check_stairs
3082  0EF8              l_player_move_jump_00134:
3083  0EF8  3A 00 00    	ld	a,(_player_onstair)
3084  0EFB  B7          	or	a, a
3085  0EFC  20 2D       	jr	NZ,l_player_move_jump_00139
3086  0EFE  21 00 00    	ld	hl,_s_lin1
3087  0F01  7E          	ld	a, (hl)
3088  0F02  07          	rlca
3089  0F03  07          	rlca
3090  0F04  07          	rlca
3091  0F05  07          	rlca
3092  0F06  E6 0F       	and	a,0x0f
3093  0F08  07          	rlca
3094  0F09  07          	rlca
3095  0F0A  07          	rlca
3096  0F0B  07          	rlca
3097  0F0C  E6 F0       	and	a,0xf0
3098  0F0E  77          	ld	(hl), a
3099  0F0F  21 07 00    	ld	hl,+(_lin + 0x0007)
3100  0F12  4E          	ld	c, (hl)
3101  0F13  21 00 00    	ld	hl,_s_lin1
3102  0F16  7E          	ld	a, (hl)
3103  0F17  91          	sub	a, c
3104  0F18  30 0B       	jr	NC,l_player_move_jump_00136
3105  0F1A  7E          	ld	a, (hl)
3106  0F1B  C6 10       	add	a,0x10
3107  0F1D  32 07 00    	ld	((_lin + 0x0007)),a
3108  0F20  2E 00       	ld	l,0x00
3109  0F22  C3 A1 0F    	jp	l_player_move_jump_00160
3110  0F25              l_player_move_jump_00136:
3111  0F25  3A 00 00    	ld	a,(_s_lin1)
3112  0F28  32 07 00    	ld	((_lin + 0x0007)),a
3113  0F2B              l_player_move_jump_00139:
3114  0F2B  21 00 00    	ld	hl,_player_vel_y
3115  0F2E  36 00       	ld	(hl),0x00
3116  0F30  21 00 00    	ld	hl,_s_state
3117  0F33  7E          	ld	a,(hl)
3118  0F34  E6 FC       	and	a,+(0xfd&0xfe)
3119  0F36  77          	ld	(hl),a
3120  0F37  3A 07 00    	ld	a,(_lin + 0x0007)
3121  0F3A  D6 90       	sub	a,0x90
3122  0F3C  38 03       	jr	C,l_player_move_jump_00141
3123  0F3E  CD 00 00    	call	_spr_page_down
3124  0F41              l_player_move_jump_00141:
3125  0F41  21 07 00    	ld	hl, +(_colint + 0x0007)
3126  0F44  36 00       	ld	(hl),0x00
3127  0F46  2E 01       	ld	l,0x01
3128  0F48  18 57       	jr	l_player_move_jump_00160
3129  0F4A              l_player_move_jump_00143:
3130  0F4A  21 00 00    	ld	hl,_s_lin1
3131  0F4D  71          	ld	(hl), c
3132  0F4E  3A 00 00    	ld	a,(_s_lin1)
3133  0F51  32 07 00    	ld	((_lin + 0x0007)),a
3134  0F54  18 0D       	jr	l_player_move_jump_00150
3135  0F56              l_player_move_jump_00146:
3136  0F56  21 00 00    	ld	hl,_s_lin1
3137  0F59  7E          	ld	a, (hl)
3138  0F5A  C6 F0       	add	a,0xf0
3139  0F5C  77          	ld	(hl), a
3140  0F5D  3A 00 00    	ld	a,(_s_lin1)
3141  0F60  32 07 00    	ld	((_lin + 0x0007)),a
3142  0F63              l_player_move_jump_00150:
3143  0F63  21 00 00    	ld	hl,_s_state
3144  0F66  CB 5E       	bit	3, (hl)
3145  0F68  20 27       	jr	NZ,l_player_move_jump_00156
3146  0F6A  21 00 00    	ld	hl,_s_state
3147  0F6D  CB 56       	bit	2, (hl)
3148  0F6F  20 20       	jr	NZ,l_player_move_jump_00156
3149  0F71  21 00 00    	ld	hl,_dirs
3150  0F74  CB 56       	bit	2, (hl)
3151  0F76  28 09       	jr	Z,l_player_move_jump_00152
3152  0F78  21 00 00    	ld	hl,_s_state
3153  0F7B  7E          	ld	a,(hl)
3154  0F7C  F6 08       	or	a,0x08
3155  0F7E  E6 FB       	and	a,0xfb
3156  0F80  77          	ld	(hl),a
3157  0F81              l_player_move_jump_00152:
3158  0F81  21 00 00    	ld	hl,_dirs
3159  0F84  CB 5E       	bit	3, (hl)
3160  0F86  28 09       	jr	Z,l_player_move_jump_00156
3161  0F88  21 00 00    	ld	hl,_s_state
3162  0F8B  7E          	ld	a,(hl)
3163  0F8C  F6 04       	or	a,0x04
3164  0F8E  E6 F7       	and	a,0xf7
3165  0F90  77          	ld	(hl),a
3166  0F91              l_player_move_jump_00156:
3167  0F91  CD 00 00    	call	_spr_move_horizontal
3168  0F94  7D          	ld	a, l
3169  0F95  B7          	or	a, a
3170  0F96  28 07       	jr	Z,l_player_move_jump_00159
3171  0F98  21 00 00    	ld	hl,_s_state
3172  0F9B  7E          	ld	a,(hl)
3173  0F9C  E6 F3       	and	a,+(0xf7&0xfb)
3174  0F9E  77          	ld	(hl),a
3175  0F9F              l_player_move_jump_00159:
3176  0F9F  2E 00       	ld	l,0x00
3177  0FA1              l_player_move_jump_00160:
3178  0FA1  F1          	pop	af
3179  0FA2  DD E1       	pop	ix
3180  0FA4  C9          	ret
3181  0FA5              	SECTION code_compiler
3182  0FA5              ;	---------------------------------
3183  0FA5              ; Function player_open_door
3184  0FA5              ; ---------------------------------
3185  0FA5              _player_open_door:
3186  0FA5  CD 00 00    	call	___sdcc_enter_ix
3187  0FA8  0E 00       	ld	c,0x00
3188  0FAA  DD 7E 06    	ld	a,(ix+6)
3189  0FAD  D6 48       	sub	a,0x48
3190  0FAF  28 17       	jr	Z,l_player_open_door_00101
3191  0FB1  DD 7E 06    	ld	a,(ix+6)
3192  0FB4  D6 49       	sub	a,0x49
3193  0FB6  28 1F       	jr	Z,l_player_open_door_00104
3194  0FB8  DD 7E 06    	ld	a,(ix+6)
3195  0FBB  D6 4A       	sub	a,0x4a
3196  0FBD  28 27       	jr	Z,l_player_open_door_00107
3197  0FBF  DD 7E 06    	ld	a,(ix+6)
3198  0FC2  D6 4B       	sub	a,0x4b
3199  0FC4  28 2F       	jr	Z,l_player_open_door_00110
3200  0FC6  18 3A       	jr	l_player_open_door_00113
3201  0FC8              l_player_open_door_00101:
3202  0FC8  3A 00 00    	ld	a,(_player_keys)
3203  0FCB  B7          	or	a, a
3204  0FCC  28 34       	jr	Z,l_player_open_door_00113
3205  0FCE  2E 07       	ld	l,0x07
3206  0FD0  CD 00 00    	call	_zx_border_fastcall
3207  0FD3  0E 01       	ld	c,0x01
3208  0FD5  18 2B       	jr	l_player_open_door_00113
3209  0FD7              l_player_open_door_00104:
3210  0FD7  3A 01 00    	ld	a,(_player_keys + 0x0001)
3211  0FDA  B7          	or	a, a
3212  0FDB  28 25       	jr	Z,l_player_open_door_00113
3213  0FDD  2E 02       	ld	l,0x02
3214  0FDF  CD 00 00    	call	_zx_border_fastcall
3215  0FE2  0E 01       	ld	c,0x01
3216  0FE4  18 1C       	jr	l_player_open_door_00113
3217  0FE6              l_player_open_door_00107:
3218  0FE6  3A 02 00    	ld	a,(_player_keys + 0x0002)
3219  0FE9  B7          	or	a, a
3220  0FEA  28 16       	jr	Z,l_player_open_door_00113
3221  0FEC  2E 04       	ld	l,0x04
3222  0FEE  CD 00 00    	call	_zx_border_fastcall
3223  0FF1  0E 01       	ld	c,0x01
3224  0FF3  18 0D       	jr	l_player_open_door_00113
3225  0FF5              l_player_open_door_00110:
3226  0FF5  3A 03 00    	ld	a,(_player_keys + 0x0003)
3227  0FF8  B7          	or	a, a
3228  0FF9  28 07       	jr	Z,l_player_open_door_00113
3229  0FFB  2E 05       	ld	l,0x05
3230  0FFD  CD 00 00    	call	_zx_border_fastcall
3231  1000  0E 01       	ld	c,0x01
3232  1002              l_player_open_door_00113:
3233  1002  79          	ld	a, c
3234  1003  B7          	or	a, a
3235  1004  20 06       	jr	NZ,l_player_open_door_00114
3236  1006  3A 00 00    	ld	a,(_game_inmune)
3237  1009  B7          	or	a, a
3238  100A  28 31       	jr	Z,l_player_open_door_00117
3239  100C              l_player_open_door_00114:
3240  100C  3E 00       	ld	a, +((_scr_map) & 0xFF)
3241  100E  DD 86 04    	add	a,(ix+4)
3242  1011  4F          	ld	c, a
3243  1012  3E 00       	ld	a, +((_scr_map) / 256)
3244  1014  DD 8E 05    	adc	a,(ix+5)
3245  1017  47          	ld	b, a
3246  1018  C5          	push	bc
3247  1019  DD 6E 04    	ld	l,(ix+4)
3248  101C  DD 66 05    	ld	h,(ix+5)
3249  101F  E5          	push	hl
3250  1020  CD 00 00    	call	_game_match_back
3251  1023  F1          	pop	af
3252  1024  C1          	pop	bc
3253  1025  7D          	ld	a,l
3254  1026  02          	ld	(bc), a
3255  1027  DD 6E 04    	ld	l,(ix+4)
3256  102A  DD 66 05    	ld	h,(ix+5)
3257  102D  E5          	push	hl
3258  102E  CD 00 00    	call	_game_obj_set
3259  1031  F1          	pop	af
3260  1032  DD 6E 04    	ld	l,(ix+4)
3261  1035  DD 66 05    	ld	h,(ix+5)
3262  1038  E5          	push	hl
3263  1039  CD 00 00    	call	_spr_draw_index
3264  103C  F1          	pop	af
3265  103D              l_player_open_door_00117:
3266  103D  DD E1       	pop	ix
3267  103F  C9          	ret
3268  1040              	SECTION code_compiler
3269  1040              ;	---------------------------------
3270  1040              ; Function player_lost_life
3271  1040              ; ---------------------------------
3272  1040              _player_lost_life:
3273  1040  CD 00 00    	call	___sdcc_enter_ix
3274  1043  3B          	dec	sp
3275  1044  3A 07 00    	ld	a,(_lin + 0x0007)
3276  1047  32 00 00    	ld	(_s_lin0),a
3277  104A  3A 07 00    	ld	a,(_col + 0x0007)
3278  104D  32 00 00    	ld	(_s_col0),a
3279  1050  CD 00 00    	call	_spr_init_anim_bullets
3280  1053  01 00 00    	ld	bc,_anim_lin+0
3281  1056  16 00       	ld	d,0x00
3282  1058              l_player_lost_life_00116:
3283  1058  C5          	push	bc
3284  1059  D5          	push	de
3285  105A  21 00 00    	ld	hl,0x0000
3286  105D  E5          	push	hl
3287  105E  AF          	xor	a, a
3288  105F  5A          	ld	e,d
3289  1060  57          	ld	d,a
3290  1061  D5          	push	de
3291  1062  CD 00 00    	call	_NIRVANAP_spriteT_callee
3292  1065  D1          	pop	de
3293  1066  C1          	pop	bc
3294  1067  6A          	ld	l,d
3295  1068  26 00       	ld	h,0x00
3296  106A  09          	add	hl, bc
3297  106B  36 FF       	ld	(hl),0xff
3298  106D  14          	inc	d
3299  106E  7A          	ld	a, d
3300  106F  D6 08       	sub	a,0x08
3301  1071  38 E5       	jr	C,l_player_lost_life_00116
3302  1073  21 00 00    	ld	hl,_anim_count
3303  1076  36 00       	ld	(hl),0x00
3304  1078  76          	halt
3305  1079  3A 00 00    	ld	a,(_s_lin0)
3306  107C  C6 F0       	add	a,0xf0
3307  107E  47          	ld	b, a
3308  107F  3A 00 00    	ld	a,(_s_col0)
3309  1082  21 00 00    	ld	hl,0x0000
3310  1085  E5          	push	hl
3311  1086  21 87 03    	ld	hl,0x0387
3312  1089  E5          	push	hl
3313  108A  48          	ld	c,b
3314  108B  47          	ld	b,a
3315  108C  C5          	push	bc
3316  108D  CD 00 00    	call	_spr_add_anim
3317  1090  F1          	pop	af
3318  1091  F1          	pop	af
3319  1092  F1          	pop	af
3320  1093  21 00 00    	ld	hl,_s_col0
3321  1096  46          	ld	b, (hl)
3322  1097  05          	dec	b
3323  1098  05          	dec	b
3324  1099  21 00 00    	ld	hl,0x0000
3325  109C  E5          	push	hl
3326  109D  21 87 03    	ld	hl,0x0387
3327  10A0  E5          	push	hl
3328  10A1  C5          	push	bc
3329  10A2  33          	inc	sp
3330  10A3  3A 00 00    	ld	a,(_s_lin0)
3331  10A6  F5          	push	af
3332  10A7  33          	inc	sp
3333  10A8  CD 00 00    	call	_spr_add_anim
3334  10AB  F1          	pop	af
3335  10AC  F1          	pop	af
3336  10AD  21 00 00    	ld	hl,0x0000
3337  10B0  E3          	ex	(sp),hl
3338  10B1  3A 00 00    	ld	a,(_s_col0)
3339  10B4  21 87 03    	ld	hl,0x0387
3340  10B7  E5          	push	hl
3341  10B8  F5          	push	af
3342  10B9  33          	inc	sp
3343  10BA  3A 00 00    	ld	a,(_s_lin0)
3344  10BD  F5          	push	af
3345  10BE  33          	inc	sp
3346  10BF  CD 00 00    	call	_spr_add_anim
3347  10C2  F1          	pop	af
3348  10C3  F1          	pop	af
3349  10C4  F1          	pop	af
3350  10C5  21 00 00    	ld	hl,_s_col0
3351  10C8  46          	ld	b, (hl)
3352  10C9  04          	inc	b
3353  10CA  04          	inc	b
3354  10CB  21 00 00    	ld	hl,0x0000
3355  10CE  E5          	push	hl
3356  10CF  21 87 03    	ld	hl,0x0387
3357  10D2  E5          	push	hl
3358  10D3  C5          	push	bc
3359  10D4  33          	inc	sp
3360  10D5  3A 00 00    	ld	a,(_s_lin0)
3361  10D8  F5          	push	af
3362  10D9  33          	inc	sp
3363  10DA  CD 00 00    	call	_spr_add_anim
3364  10DD  F1          	pop	af
3365  10DE  F1          	pop	af
3366  10DF  F1          	pop	af
3367  10E0  3A 00 00    	ld	a,(_s_lin0)
3368  10E3  C6 10       	add	a,0x10
3369  10E5  47          	ld	b, a
3370  10E6  3A 00 00    	ld	a,(_s_col0)
3371  10E9  21 00 00    	ld	hl,0x0000
3372  10EC  E5          	push	hl
3373  10ED  21 87 03    	ld	hl,0x0387
3374  10F0  E5          	push	hl
3375  10F1  48          	ld	c,b
3376  10F2  47          	ld	b,a
3377  10F3  C5          	push	bc
3378  10F4  CD 00 00    	call	_spr_add_anim
3379  10F7  F1          	pop	af
3380  10F8  F1          	pop	af
3381  10F9  F1          	pop	af
3382  10FA  2E 00       	ld	l,0x00
3383  10FC  CD 00 00    	call	_zx_border_fastcall
3384  10FF  DD 36 FF 01 	ld	(ix-1),0x01
3385  1103  2A 00 00    	ld	hl,(_curr_time)
3386  1106  22 00 00    	ld	(_anim_time),hl
3387  1109              l_player_lost_life_00107:
3388  1109  DD 7E FF    	ld	a,(ix-1)
3389  110C  B7          	or	a, a
3390  110D  28 28       	jr	Z,l_player_lost_life_00109
3391  110F  21 0C 00    	ld	hl,0x000c
3392  1112  E5          	push	hl
3393  1113  2A 00 00    	ld	hl,(_anim_time)
3394  1116  E5          	push	hl
3395  1117  CD 00 00    	call	_game_check_time
3396  111A  F1          	pop	af
3397  111B  F1          	pop	af
3398  111C  7D          	ld	a, l
3399  111D  B7          	or	a, a
3400  111E  28 E9       	jr	Z,l_player_lost_life_00107
3401  1120  2A 00 00    	ld	hl,(_curr_time)
3402  1123  22 00 00    	ld	(_anim_time),hl
3403  1126  3A 00 00    	ld	a,(_anim_count)
3404  1129  B7          	or	a,a
3405  112A  28 05       	jr	Z,l_player_lost_life_00103
3406  112C  CD 00 00    	call	_spr_play_anim
3407  112F  18 D8       	jr	l_player_lost_life_00107
3408  1131              l_player_lost_life_00103:
3409  1131  DD 36 FF 00 	ld	(ix-1),0x00
3410  1135  18 D2       	jr	l_player_lost_life_00107
3411  1137              l_player_lost_life_00109:
3412  1137  21 00 00    	ld	hl,_sprite
3413  113A  36 00       	ld	(hl),0x00
3414  113C              l_player_lost_life_00118:
3415  113C  3A 07 00    	ld	a,(_class + 0x0007)
3416  113F  B7          	or	a, a
3417  1140  28 1F       	jr	Z,l_player_lost_life_00111
3418  1142  21 07 00    	ld	hl,+(_col + 0x0007)
3419  1145  4E          	ld	c, (hl)
3420  1146  21 07 00    	ld	hl,+(_lin + 0x0007)
3421  1149  56          	ld	d, (hl)
3422  114A  21 07 00    	ld	hl,+(_tile + 0x0007)
3423  114D  5E          	ld	e, (hl)
3424  114E  21 07 00    	ld	hl,+(_colint + 0x0007)
3425  1151  46          	ld	b, (hl)
3426  1152  7B          	ld	a, e
3427  1153  80          	add	a, b
3428  1154  5F          	ld	e, a
3429  1155  79          	ld	a, c
3430  1156  F5          	push	af
3431  1157  33          	inc	sp
3432  1158  3A 00 00    	ld	a,(_sprite)
3433  115B  D5          	push	de
3434  115C  F5          	push	af
3435  115D  33          	inc	sp
3436  115E  CD 00 00    	call	_NIRVANAP_spriteT_callee
3437  1161              l_player_lost_life_00111:
3438  1161  21 07 00    	ld	hl, +(_class + 0x0007)
3439  1164  36 00       	ld	(hl),0x00
3440  1166  21 07 00    	ld	hl, +(_bullet_col + 0x0007)
3441  1169  36 FF       	ld	(hl),0xff
3442  116B  21 00 00    	ld	hl,_sprite
3443  116E  7E          	ld	a,(hl)
3444  116F  3C          	inc	a
3445  1170  77          	ld	(hl),a
3446  1171  D6 07       	sub	a,0x07
3447  1173  38 C7       	jr	C,l_player_lost_life_00118
3448  1175  21 00 00    	ld	hl,_player_lives
3449  1178  35          	dec	(hl)
3450  1179  21 00 00    	ld	hl,_player_mana
3451  117C  36 64       	ld	(hl),0x64
3452  117E  21 00 00    	ld	hl,_player_vita
3453  1181  36 64       	ld	(hl),0x64
3454  1183  3A 00 00    	ld	a,(_player_lives)
3455  1186  B7          	or	a, a
3456  1187  28 0B       	jr	Z,l_player_lost_life_00114
3457  1189  21 F4 01    	ld	hl,0x01f4
3458  118C  CD 00 00    	call	_z80_delay_ms_fastcall
3459  118F  CD 00 00    	call	_game_round_init
3460  1192  18 0A       	jr	l_player_lost_life_00120
3461  1194              l_player_lost_life_00114:
3462  1194  21 00 00    	ld	hl,_player_lives
3463  1197  36 00       	ld	(hl),0x00
3464  1199  21 00 00    	ld	hl,_game_over
3465  119C  36 01       	ld	(hl),0x01
3466  119E              l_player_lost_life_00120:
3467  119E  33          	inc	sp
3468  119F  DD E1       	pop	ix
3469  11A1  C9          	ret
3470  11A2              	SECTION code_compiler
3471  11A2              ;	---------------------------------
3472  11A2              ; Function player_hit
3473  11A2              ; ---------------------------------
3474  11A2              _player_hit:
3475  11A2  7D          	ld	a,l
3476  11A3  4D          	ld	c,l
3477  11A4  21 00 00    	ld	hl,_player_vita
3478  11A7  96          	sub	a, (hl)
3479  11A8  30 17       	jr	NC,l_player_hit_00104
3480  11AA  3A 00 00    	ld	a,(_game_inmune)
3481  11AD  B7          	or	a, a
3482  11AE  20 06       	jr	NZ,l_player_hit_00102
3483  11B0  21 00 00    	ld	hl,_player_vita
3484  11B3  7E          	ld	a, (hl)
3485  11B4  91          	sub	a, c
3486  11B5  77          	ld	(hl), a
3487  11B6              l_player_hit_00102:
3488  11B6  2A 00 00    	ld	hl,(_curr_time)
3489  11B9  22 00 00    	ld	(_player_hit_time),hl
3490  11BC  CD 00 00    	call	_game_update_stats
3491  11BF  18 0B       	jr	l_player_hit_00106
3492  11C1              l_player_hit_00104:
3493  11C1  21 00 00    	ld	hl,_player_vita
3494  11C4  36 00       	ld	(hl),0x00
3495  11C6  CD 00 00    	call	_game_update_stats
3496  11C9  CD 40 10    	call	_player_lost_life
3497  11CC              l_player_hit_00106:
3498  11CC  C9          	ret
3499  11CD              	SECTION IGNORE
3500  0000              
