1     0000              MODULE game_player_c
2     0000              
3     0000              ;--------------------------------------------------------
4     0000              ; File Created by SDCC : free open source ANSI-C Compiler
5     0000              ; Version 3.6.5 #9958 (Mac OS X i386)
6     0000              ;--------------------------------------------------------
7     0000              ; Processed by Z88DK
8     0000              ;--------------------------------------------------------
9     0000              
10    0000              	EXTERN __divschar
11    0000              	EXTERN __divschar_callee
12    0000              	EXTERN __divsint
13    0000              	EXTERN __divsint_callee
14    0000              	EXTERN __divslong
15    0000              	EXTERN __divslong_callee
16    0000              	EXTERN __divslonglong
17    0000              	EXTERN __divslonglong_callee
18    0000              	EXTERN __divsuchar
19    0000              	EXTERN __divsuchar_callee
20    0000              	EXTERN __divuchar
21    0000              	EXTERN __divuchar_callee
22    0000              	EXTERN __divuint
23    0000              	EXTERN __divuint_callee
24    0000              	EXTERN __divulong
25    0000              	EXTERN __divulong_callee
26    0000              	EXTERN __divulonglong
27    0000              	EXTERN __divulonglong_callee
28    0000              	EXTERN __divuschar
29    0000              	EXTERN __divuschar_callee
30    0000              	EXTERN __modschar
31    0000              	EXTERN __modschar_callee
32    0000              	EXTERN __modsint
33    0000              	EXTERN __modsint_callee
34    0000              	EXTERN __modslong
35    0000              	EXTERN __modslong_callee
36    0000              	EXTERN __modslonglong
37    0000              	EXTERN __modslonglong_callee
38    0000              	EXTERN __modsuchar
39    0000              	EXTERN __modsuchar_callee
40    0000              	EXTERN __moduchar
41    0000              	EXTERN __moduchar_callee
42    0000              	EXTERN __moduint
43    0000              	EXTERN __moduint_callee
44    0000              	EXTERN __modulong
45    0000              	EXTERN __modulong_callee
46    0000              	EXTERN __modulonglong
47    0000              	EXTERN __modulonglong_callee
48    0000              	EXTERN __moduschar
49    0000              	EXTERN __moduschar_callee
50    0000              	EXTERN __mulint
51    0000              	EXTERN __mulint_callee
52    0000              	EXTERN __mullong
53    0000              	EXTERN __mullong_callee
54    0000              	EXTERN __mullonglong
55    0000              	EXTERN __mullonglong_callee
56    0000              	EXTERN __mulschar
57    0000              	EXTERN __mulschar_callee
58    0000              	EXTERN __mulsuchar
59    0000              	EXTERN __mulsuchar_callee
60    0000              	EXTERN __muluschar
61    0000              	EXTERN __muluschar_callee
62    0000              	EXTERN __rlslonglong
63    0000              	EXTERN __rlslonglong_callee
64    0000              	EXTERN __rlulonglong
65    0000              	EXTERN __rlulonglong_callee
66    0000              	EXTERN __rrslonglong
67    0000              	EXTERN __rrslonglong_callee
68    0000              	EXTERN __rrulonglong
69    0000              	EXTERN __rrulonglong_callee
70    0000              	EXTERN ___sdcc_call_hl
71    0000              	EXTERN ___sdcc_call_iy
72    0000              	EXTERN ___sdcc_enter_ix
73    0000              	EXTERN _banked_call
74    0000              	EXTERN _banked_ret
75    0000              	EXTERN ___fs2schar
76    0000              	EXTERN ___fs2schar_callee
77    0000              	EXTERN ___fs2sint
78    0000              	EXTERN ___fs2sint_callee
79    0000              	EXTERN ___fs2slong
80    0000              	EXTERN ___fs2slong_callee
81    0000              	EXTERN ___fs2slonglong
82    0000              	EXTERN ___fs2slonglong_callee
83    0000              	EXTERN ___fs2uchar
84    0000              	EXTERN ___fs2uchar_callee
85    0000              	EXTERN ___fs2uint
86    0000              	EXTERN ___fs2uint_callee
87    0000              	EXTERN ___fs2ulong
88    0000              	EXTERN ___fs2ulong_callee
89    0000              	EXTERN ___fs2ulonglong
90    0000              	EXTERN ___fs2ulonglong_callee
91    0000              	EXTERN ___fsadd
92    0000              	EXTERN ___fsadd_callee
93    0000              	EXTERN ___fsdiv
94    0000              	EXTERN ___fsdiv_callee
95    0000              	EXTERN ___fseq
96    0000              	EXTERN ___fseq_callee
97    0000              	EXTERN ___fsgt
98    0000              	EXTERN ___fsgt_callee
99    0000              	EXTERN ___fslt
100   0000              	EXTERN ___fslt_callee
101   0000              	EXTERN ___fsmul
102   0000              	EXTERN ___fsmul_callee
103   0000              	EXTERN ___fsneq
104   0000              	EXTERN ___fsneq_callee
105   0000              	EXTERN ___fssub
106   0000              	EXTERN ___fssub_callee
107   0000              	EXTERN ___schar2fs
108   0000              	EXTERN ___schar2fs_callee
109   0000              	EXTERN ___sint2fs
110   0000              	EXTERN ___sint2fs_callee
111   0000              	EXTERN ___slong2fs
112   0000              	EXTERN ___slong2fs_callee
113   0000              	EXTERN ___slonglong2fs
114   0000              	EXTERN ___slonglong2fs_callee
115   0000              	EXTERN ___uchar2fs
116   0000              	EXTERN ___uchar2fs_callee
117   0000              	EXTERN ___uint2fs
118   0000              	EXTERN ___uint2fs_callee
119   0000              	EXTERN ___ulong2fs
120   0000              	EXTERN ___ulong2fs_callee
121   0000              	EXTERN ___ulonglong2fs
122   0000              	EXTERN ___ulonglong2fs_callee
123   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
126   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
127   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
128   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
129   0000              	EXTERN ____sdcc_4_ldi_save_bc
130   0000              	EXTERN ____sdcc_4_push_hlix
131   0000              	EXTERN ____sdcc_4_push_mhl
132   0000              	EXTERN ____sdcc_lib_setmem_hl
133   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
134   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
135   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
136   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
137   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
138   0000              	EXTERN ____sdcc_ll_add_deix_hlix
139   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
140   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
141   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
142   0000              	EXTERN ____sdcc_ll_asr_hlix_a
143   0000              	EXTERN ____sdcc_ll_asr_mbc_a
144   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
145   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
146   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
147   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
148   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
149   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
150   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
151   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
152   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
153   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
155   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
156   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
157   0000              	EXTERN ____sdcc_ll_push_hlix
158   0000              	EXTERN ____sdcc_ll_push_mhl
159   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
160   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
161   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
162   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
163   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
164   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
165   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
166   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
167   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
168   0000              	EXTERN ____sdcc_load_debc_deix
169   0000              	EXTERN ____sdcc_load_dehl_deix
170   0000              	EXTERN ____sdcc_load_debc_mhl
171   0000              	EXTERN ____sdcc_load_hlde_mhl
172   0000              	EXTERN ____sdcc_store_dehl_bcix
173   0000              	EXTERN ____sdcc_store_debc_hlix
174   0000              	EXTERN ____sdcc_store_debc_mhl
175   0000              	EXTERN ____sdcc_cpu_pop_ei
176   0000              	EXTERN ____sdcc_cpu_pop_ei_jp
177   0000              	EXTERN ____sdcc_cpu_push_di
178   0000              	EXTERN ____sdcc_outi
179   0000              	EXTERN ____sdcc_outi_128
180   0000              	EXTERN ____sdcc_outi_256
181   0000              	EXTERN ____sdcc_ldi
182   0000              	EXTERN ____sdcc_ldi_128
183   0000              	EXTERN ____sdcc_ldi_256
184   0000              
185   0000              ;--------------------------------------------------------
186   0000              ; Public variables in this module
187   0000              ;--------------------------------------------------------
188   0000              	GLOBAL _player_check_map
189   0000              	GLOBAL _player_init
190   0000              	GLOBAL _player_check_input
191   0000              	GLOBAL _player_collision
192   0000              	GLOBAL _player_kill
193   0000              	GLOBAL _player_restart
194   0000              	GLOBAL _player_lost_life
195   0000              	GLOBAL _player_turn
196   0000              	GLOBAL _player_move
197   0000              	GLOBAL _player_check_stairs_down
198   0000              	GLOBAL _player_check_stairs
199   0000              	GLOBAL _player_tile
200   0000              	GLOBAL _player_move_input
201   0000              	GLOBAL _player_fire
202   0000              	GLOBAL _player_pick_item
203   0000              	GLOBAL _player_hit_platform
204   0000              	GLOBAL _player_hit_platform_clear
205   0000              	GLOBAL _player_score_add
206   0000              	GLOBAL _player_check_floor
207   0000              	GLOBAL _player_move_jump
208   0000              	GLOBAL _player_open_door
209   0000              ;--------------------------------------------------------
210   0000              ; Externals used
211   0000              ;--------------------------------------------------------
212   0000              	GLOBAL _ulltoa_callee
213   0000              	GLOBAL _ulltoa
214   0000              	GLOBAL _strtoull_callee
215   0000              	GLOBAL _strtoull
216   0000              	GLOBAL _strtoll_callee
217   0000              	GLOBAL _strtoll
218   0000              	GLOBAL _lltoa_callee
219   0000              	GLOBAL _lltoa
220   0000              	GLOBAL _llabs_callee
221   0000              	GLOBAL _llabs
222   0000              	GLOBAL __lldivu__callee
223   0000              	GLOBAL __lldivu_
224   0000              	GLOBAL __lldiv__callee
225   0000              	GLOBAL __lldiv_
226   0000              	GLOBAL _atoll_callee
227   0000              	GLOBAL _atoll
228   0000              	GLOBAL _realloc_unlocked_callee
229   0000              	GLOBAL _realloc_unlocked
230   0000              	GLOBAL _malloc_unlocked_fastcall
231   0000              	GLOBAL _malloc_unlocked
232   0000              	GLOBAL _free_unlocked_fastcall
233   0000              	GLOBAL _free_unlocked
234   0000              	GLOBAL _calloc_unlocked_callee
235   0000              	GLOBAL _calloc_unlocked
236   0000              	GLOBAL _aligned_alloc_unlocked_callee
237   0000              	GLOBAL _aligned_alloc_unlocked
238   0000              	GLOBAL _realloc_callee
239   0000              	GLOBAL _realloc
240   0000              	GLOBAL _malloc_fastcall
241   0000              	GLOBAL _malloc
242   0000              	GLOBAL _free_fastcall
243   0000              	GLOBAL _free
244   0000              	GLOBAL _calloc_callee
245   0000              	GLOBAL _calloc
246   0000              	GLOBAL _aligned_alloc_callee
247   0000              	GLOBAL _aligned_alloc
248   0000              	GLOBAL _utoa_callee
249   0000              	GLOBAL _utoa
250   0000              	GLOBAL _ultoa_callee
251   0000              	GLOBAL _ultoa
252   0000              	GLOBAL _system_fastcall
253   0000              	GLOBAL _system
254   0000              	GLOBAL _strtoul_callee
255   0000              	GLOBAL _strtoul
256   0000              	GLOBAL _strtol_callee
257   0000              	GLOBAL _strtol
258   0000              	GLOBAL _strtof_callee
259   0000              	GLOBAL _strtof
260   0000              	GLOBAL _strtod_callee
261   0000              	GLOBAL _strtod
262   0000              	GLOBAL _srand_fastcall
263   0000              	GLOBAL _srand
264   0000              	GLOBAL _rand
265   0000              	GLOBAL _quick_exit_fastcall
266   0000              	GLOBAL _quick_exit
267   0000              	GLOBAL _qsort_callee
268   0000              	GLOBAL _qsort
269   0000              	GLOBAL _ltoa_callee
270   0000              	GLOBAL _ltoa
271   0000              	GLOBAL _labs_fastcall
272   0000              	GLOBAL _labs
273   0000              	GLOBAL _itoa_callee
274   0000              	GLOBAL _itoa
275   0000              	GLOBAL _ftoh_callee
276   0000              	GLOBAL _ftoh
277   0000              	GLOBAL _ftog_callee
278   0000              	GLOBAL _ftog
279   0000              	GLOBAL _ftoe_callee
280   0000              	GLOBAL _ftoe
281   0000              	GLOBAL _ftoa_callee
282   0000              	GLOBAL _ftoa
283   0000              	GLOBAL _exit_fastcall
284   0000              	GLOBAL _exit
285   0000              	GLOBAL _dtoh_callee
286   0000              	GLOBAL _dtoh
287   0000              	GLOBAL _dtog_callee
288   0000              	GLOBAL _dtog
289   0000              	GLOBAL _dtoe_callee
290   0000              	GLOBAL _dtoe
291   0000              	GLOBAL _dtoa_callee
292   0000              	GLOBAL _dtoa
293   0000              	GLOBAL _bsearch_callee
294   0000              	GLOBAL _bsearch
295   0000              	GLOBAL _atol_fastcall
296   0000              	GLOBAL _atol
297   0000              	GLOBAL _atoi_fastcall
298   0000              	GLOBAL _atoi
299   0000              	GLOBAL _atof_fastcall
300   0000              	GLOBAL _atof
301   0000              	GLOBAL _atexit_fastcall
302   0000              	GLOBAL _atexit
303   0000              	GLOBAL _at_quick_exit_fastcall
304   0000              	GLOBAL _at_quick_exit
305   0000              	GLOBAL _abs_fastcall
306   0000              	GLOBAL _abs
307   0000              	GLOBAL _abort
308   0000              	GLOBAL __strtou__callee
309   0000              	GLOBAL __strtou_
310   0000              	GLOBAL __strtoi__callee
311   0000              	GLOBAL __strtoi_
312   0000              	GLOBAL __random_uniform_xor_8__fastcall
313   0000              	GLOBAL __random_uniform_xor_8_
314   0000              	GLOBAL __random_uniform_xor_32__fastcall
315   0000              	GLOBAL __random_uniform_xor_32_
316   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
317   0000              	GLOBAL __random_uniform_cmwc_8_
318   0000              	GLOBAL __shellsort__callee
319   0000              	GLOBAL __shellsort_
320   0000              	GLOBAL __quicksort__callee
321   0000              	GLOBAL __quicksort_
322   0000              	GLOBAL __insertion_sort__callee
323   0000              	GLOBAL __insertion_sort_
324   0000              	GLOBAL __ldivu__callee
325   0000              	GLOBAL __ldivu_
326   0000              	GLOBAL __ldiv__callee
327   0000              	GLOBAL __ldiv_
328   0000              	GLOBAL __divu__callee
329   0000              	GLOBAL __divu_
330   0000              	GLOBAL __div__callee
331   0000              	GLOBAL __div_
332   0000              	GLOBAL _NIRVANAP_drawTW_raw_callee
333   0000              	GLOBAL _NIRVANAP_drawTW_raw
334   0000              	GLOBAL _NIRVANAP_drawTW_callee
335   0000              	GLOBAL _NIRVANAP_drawTW
336   0000              	GLOBAL _NIRVANAP_drawW_raw_callee
337   0000              	GLOBAL _NIRVANAP_drawW_raw
338   0000              	GLOBAL _NIRVANAP_drawW_callee
339   0000              	GLOBAL _NIRVANAP_drawW
340   0000              	GLOBAL _NIRVANAP_spriteT_callee
341   0000              	GLOBAL _NIRVANAP_spriteT
342   0000              	GLOBAL _NIRVANAP_fillC_callee
343   0000              	GLOBAL _NIRVANAP_fillC
344   0000              	GLOBAL _NIRVANAP_readC_callee
345   0000              	GLOBAL _NIRVANAP_readC
346   0000              	GLOBAL _NIRVANAP_paintC_callee
347   0000              	GLOBAL _NIRVANAP_paintC
348   0000              	GLOBAL _NIRVANAP_printC_callee
349   0000              	GLOBAL _NIRVANAP_printC
350   0000              	GLOBAL _NIRVANAP_fillT_raw_callee
351   0000              	GLOBAL _NIRVANAP_fillT_raw
352   0000              	GLOBAL _NIRVANAP_fillT_callee
353   0000              	GLOBAL _NIRVANAP_fillT
354   0000              	GLOBAL _NIRVANAP_drawT_raw_callee
355   0000              	GLOBAL _NIRVANAP_drawT_raw
356   0000              	GLOBAL _NIRVANAP_drawT_callee
357   0000              	GLOBAL _NIRVANAP_drawT
358   0000              	GLOBAL _NIRVANAP_stop
359   0000              	GLOBAL _NIRVANAP_start
360   0000              	GLOBAL _debug3
361   0000              	GLOBAL _debug2
362   0000              	GLOBAL _debug
363   0000              	GLOBAL _zx_print_str
364   0000              	GLOBAL _zx_print_int
365   0000              	GLOBAL _zx_print_chr
366   0000              	GLOBAL _zx_print_bonus_time
367   0000              	GLOBAL _zx_isr
368   0000              	GLOBAL _z80_otdr_callee
369   0000              	GLOBAL _z80_otdr
370   0000              	GLOBAL _z80_otir_callee
371   0000              	GLOBAL _z80_otir
372   0000              	GLOBAL _z80_outp_callee
373   0000              	GLOBAL _z80_outp
374   0000              	GLOBAL _z80_indr_callee
375   0000              	GLOBAL _z80_indr
376   0000              	GLOBAL _z80_inir_callee
377   0000              	GLOBAL _z80_inir
378   0000              	GLOBAL _z80_inp_fastcall
379   0000              	GLOBAL _z80_inp
380   0000              	GLOBAL _z80_set_int_state_fastcall
381   0000              	GLOBAL _z80_set_int_state
382   0000              	GLOBAL _z80_get_int_state
383   0000              	GLOBAL _z80_delay_tstate_fastcall
384   0000              	GLOBAL _z80_delay_tstate
385   0000              	GLOBAL _z80_delay_ms_fastcall
386   0000              	GLOBAL _z80_delay_ms
387   0000              	GLOBAL _im2_remove_generic_callback_callee
388   0000              	GLOBAL _im2_remove_generic_callback
389   0000              	GLOBAL _im2_prepend_generic_callback_callee
390   0000              	GLOBAL _im2_prepend_generic_callback
391   0000              	GLOBAL _im2_append_generic_callback_callee
392   0000              	GLOBAL _im2_append_generic_callback
393   0000              	GLOBAL _im2_create_generic_isr_8080_callee
394   0000              	GLOBAL _im2_create_generic_isr_8080
395   0000              	GLOBAL _im2_create_generic_isr_callee
396   0000              	GLOBAL _im2_create_generic_isr
397   0000              	GLOBAL _im2_install_isr_callee
398   0000              	GLOBAL _im2_install_isr
399   0000              	GLOBAL _im2_init_fastcall
400   0000              	GLOBAL _im2_init
401   0000              	GLOBAL _intrinsic_swap_word_32_fastcall
402   0000              	GLOBAL _intrinsic_swap_word_32
403   0000              	GLOBAL _intrinsic_swap_endian_32_fastcall
404   0000              	GLOBAL _intrinsic_swap_endian_32
405   0000              	GLOBAL _intrinsic_swap_endian_16_fastcall
406   0000              	GLOBAL _intrinsic_swap_endian_16
407   0000              	GLOBAL _intrinsic_return_de
408   0000              	GLOBAL _intrinsic_return_bc
409   0000              	GLOBAL _intrinsic_exx
410   0000              	GLOBAL _intrinsic_ex_de_hl
411   0000              	GLOBAL _intrinsic_nop
412   0000              	GLOBAL _intrinsic_im_2
413   0000              	GLOBAL _intrinsic_im_1
414   0000              	GLOBAL _intrinsic_im_0
415   0000              	GLOBAL _intrinsic_retn
416   0000              	GLOBAL _intrinsic_reti
417   0000              	GLOBAL _intrinsic_halt
418   0000              	GLOBAL _intrinsic_ei
419   0000              	GLOBAL _intrinsic_di
420   0000              	GLOBAL _intrinsic_stub
421   0000              	GLOBAL _intrinsic_outi
422   0000              	GLOBAL _intrinsic_ldi
423   0000              	GLOBAL _zx_pattern_fill_callee
424   0000              	GLOBAL _zx_pattern_fill
425   0000              	GLOBAL _zx_saddrpup_fastcall
426   0000              	GLOBAL _zx_saddrpup
427   0000              	GLOBAL _zx_saddrpright_callee
428   0000              	GLOBAL _zx_saddrpright
429   0000              	GLOBAL _zx_saddrpleft_callee
430   0000              	GLOBAL _zx_saddrpleft
431   0000              	GLOBAL _zx_saddrpdown_fastcall
432   0000              	GLOBAL _zx_saddrpdown
433   0000              	GLOBAL _zx_saddrcup_fastcall
434   0000              	GLOBAL _zx_saddrcup
435   0000              	GLOBAL _zx_saddrcright_fastcall
436   0000              	GLOBAL _zx_saddrcright
437   0000              	GLOBAL _zx_saddrcleft_fastcall
438   0000              	GLOBAL _zx_saddrcleft
439   0000              	GLOBAL _zx_saddrcdown_fastcall
440   0000              	GLOBAL _zx_saddrcdown
441   0000              	GLOBAL _zx_saddr2py_fastcall
442   0000              	GLOBAL _zx_saddr2py
443   0000              	GLOBAL _zx_saddr2px_fastcall
444   0000              	GLOBAL _zx_saddr2px
445   0000              	GLOBAL _zx_saddr2cy_fastcall
446   0000              	GLOBAL _zx_saddr2cy
447   0000              	GLOBAL _zx_saddr2cx_fastcall
448   0000              	GLOBAL _zx_saddr2cx
449   0000              	GLOBAL _zx_saddr2aaddr_fastcall
450   0000              	GLOBAL _zx_saddr2aaddr
451   0000              	GLOBAL _zx_py2saddr_fastcall
452   0000              	GLOBAL _zx_py2saddr
453   0000              	GLOBAL _zx_py2aaddr_fastcall
454   0000              	GLOBAL _zx_py2aaddr
455   0000              	GLOBAL _zx_pxy2saddr_callee
456   0000              	GLOBAL _zx_pxy2saddr
457   0000              	GLOBAL _zx_pxy2aaddr_callee
458   0000              	GLOBAL _zx_pxy2aaddr
459   0000              	GLOBAL _zx_px2bitmask_fastcall
460   0000              	GLOBAL _zx_px2bitmask
461   0000              	GLOBAL _zx_cy2saddr_fastcall
462   0000              	GLOBAL _zx_cy2saddr
463   0000              	GLOBAL _zx_cy2aaddr_fastcall
464   0000              	GLOBAL _zx_cy2aaddr
465   0000              	GLOBAL _zx_cxy2saddr_callee
466   0000              	GLOBAL _zx_cxy2saddr
467   0000              	GLOBAL _zx_cxy2aaddr_callee
468   0000              	GLOBAL _zx_cxy2aaddr
469   0000              	GLOBAL _zx_bitmask2px_fastcall
470   0000              	GLOBAL _zx_bitmask2px
471   0000              	GLOBAL _zx_aaddrcup_fastcall
472   0000              	GLOBAL _zx_aaddrcup
473   0000              	GLOBAL _zx_aaddrcright_fastcall
474   0000              	GLOBAL _zx_aaddrcright
475   0000              	GLOBAL _zx_aaddrcleft_fastcall
476   0000              	GLOBAL _zx_aaddrcleft
477   0000              	GLOBAL _zx_aaddrcdown_fastcall
478   0000              	GLOBAL _zx_aaddrcdown
479   0000              	GLOBAL _zx_aaddr2saddr_fastcall
480   0000              	GLOBAL _zx_aaddr2saddr
481   0000              	GLOBAL _zx_aaddr2py_fastcall
482   0000              	GLOBAL _zx_aaddr2py
483   0000              	GLOBAL _zx_aaddr2px_fastcall
484   0000              	GLOBAL _zx_aaddr2px
485   0000              	GLOBAL _zx_aaddr2cy_fastcall
486   0000              	GLOBAL _zx_aaddr2cy
487   0000              	GLOBAL _zx_aaddr2cx_fastcall
488   0000              	GLOBAL _zx_aaddr2cx
489   0000              	GLOBAL _zx_visit_wc_pix_callee
490   0000              	GLOBAL _zx_visit_wc_pix
491   0000              	GLOBAL _zx_visit_wc_attr_callee
492   0000              	GLOBAL _zx_visit_wc_attr
493   0000              	GLOBAL _zx_scroll_wc_up_pix_callee
494   0000              	GLOBAL _zx_scroll_wc_up_pix
495   0000              	GLOBAL _zx_scroll_wc_up_attr_callee
496   0000              	GLOBAL _zx_scroll_wc_up_attr
497   0000              	GLOBAL _zx_scroll_wc_up_callee
498   0000              	GLOBAL _zx_scroll_wc_up
499   0000              	GLOBAL _zx_scroll_up_pix_callee
500   0000              	GLOBAL _zx_scroll_up_pix
501   0000              	GLOBAL _zx_scroll_up_attr_callee
502   0000              	GLOBAL _zx_scroll_up_attr
503   0000              	GLOBAL _zx_scroll_up_callee
504   0000              	GLOBAL _zx_scroll_up
505   0000              	GLOBAL _zx_cls_wc_pix_callee
506   0000              	GLOBAL _zx_cls_wc_pix
507   0000              	GLOBAL _zx_cls_wc_attr_callee
508   0000              	GLOBAL _zx_cls_wc_attr
509   0000              	GLOBAL _zx_cls_wc_callee
510   0000              	GLOBAL _zx_cls_wc
511   0000              	GLOBAL _zx_cls_pix_fastcall
512   0000              	GLOBAL _zx_cls_pix
513   0000              	GLOBAL _zx_cls_attr_fastcall
514   0000              	GLOBAL _zx_cls_attr
515   0000              	GLOBAL _zx_cls_fastcall
516   0000              	GLOBAL _zx_cls
517   0000              	GLOBAL _zx_border_fastcall
518   0000              	GLOBAL _zx_border
519   0000              	GLOBAL _spr_btile_paint_back
520   0000              	GLOBAL _spr_explode_bullet
521   0000              	GLOBAL _spr_init_anim_bullets
522   0000              	GLOBAL _spr_turn_horizontal
523   0000              	GLOBAL _spr_play_bullets
524   0000              	GLOBAL _spr_play_anim
525   0000              	GLOBAL _spr_add_anim
526   0000              	GLOBAL _spr_page_map
527   0000              	GLOBAL _spr_page_right
528   0000              	GLOBAL _spr_page_left
529   0000              	GLOBAL _spr_tile_paint
530   0000              	GLOBAL _spr_calc_hor
531   0000              	GLOBAL _spr_draw_row
532   0000              	GLOBAL _spr_draw_index
533   0000              	GLOBAL _spr_draw_clear
534   0000              	GLOBAL _spr_brick_anim
535   0000              	GLOBAL _spr_back_repaint
536   0000              	GLOBAL _spr_tile
537   0000              	GLOBAL _spr_destroy
538   0000              	GLOBAL _spr_tile_dir
539   0000              	GLOBAL _spr_redraw
540   0000              	GLOBAL _spr_move_left
541   0000              	GLOBAL _spr_move_right
542   0000              	GLOBAL _spr_move_horizontal
543   0000              	GLOBAL _spr_move_down
544   0000              	GLOBAL _spr_move_up
545   0000              	GLOBAL _spr_calc_index
546   0000              	GLOBAL _spr_chktime
547   0000              	GLOBAL _sound_hit_brick
548   0000              	GLOBAL _sound_hit_enemy
549   0000              	GLOBAL _sound_kill
550   0000              	GLOBAL _sound_enter_enemy
551   0000              	GLOBAL _sound_coin
552   0000              	GLOBAL _sound_jump
553   0000              	GLOBAL _sound_slide
554   0000              	GLOBAL _player_player_hit_pow
555   0000              	GLOBAL _game_shoot_fire
556   0000              	GLOBAL _game_add_enemy
557   0000              	GLOBAL _game_joystick_set_menu
558   0000              	GLOBAL _game_joystick_set
559   0000              	GLOBAL _game_joystick_change
560   0000              	GLOBAL _game_print_header
561   0000              	GLOBAL _game_end
562   0000              	GLOBAL _game_phase_print_score_back
563   0000              	GLOBAL _game_check_time
564   0000              	GLOBAL _game_rotate_attrib
565   0000              	GLOBAL _game_colour_message
566   0000              	GLOBAL _game_paint_attrib_lin_h
567   0000              	GLOBAL _game_paint_attrib_lin
568   0000              	GLOBAL _game_paint_attrib
569   0000              	GLOBAL _game_print_score
570   0000              	GLOBAL _game_unfreeze_all
571   0000              	GLOBAL _game_freeze_all
572   0000              	GLOBAL _game_freeze
573   0000              	GLOBAL _game_enemy_add_get_index
574   0000              	GLOBAL _game_check_cell
575   0000              	GLOBAL _game_check_map
576   0000              	GLOBAL _game_loop
577   0000              	GLOBAL _game_phase_init
578   0000              	GLOBAL _game_start_timer
579   0000              	GLOBAL _game_tick
580   0000              	GLOBAL _game_print_lives
581   0000              	GLOBAL _game_print_footer
582   0000              	GLOBAL _game_fill_row
583   0000              	GLOBAL _game_draw_screen
584   0000              	GLOBAL _enemy_avoid_fall_dead
585   0000              	GLOBAL _enemy_avoid_fall
586   0000              	GLOBAL _enemy_kill
587   0000              	GLOBAL _enemy_init
588   0000              	GLOBAL _enemy_move
589   0000              	GLOBAL _enemy_turn
590   0000              	GLOBAL _enemy_hit
591   0000              	GLOBAL _enemy_coin1
592   0000              	GLOBAL _enemy_static
593   0000              	GLOBAL _enemy_walk
594   0000              	GLOBAL _enemy_horizontal
595   0000              	GLOBAL _enemy_vertical
596   0000              	GLOBAL _ay_fx_play
597   0000              	GLOBAL _ay_midi_play
598   0000              	GLOBAL _ay_is_playing
599   0000              	GLOBAL _ay_reset
600   0000              	GLOBAL _test_func
601   0000              	GLOBAL _test_proc
602   0000              	GLOBAL _in_mouse_kempston_wheel_delta
603   0000              	GLOBAL _in_mouse_kempston_wheel
604   0000              	GLOBAL _in_mouse_kempston_callee
605   0000              	GLOBAL _in_mouse_kempston
606   0000              	GLOBAL _in_mouse_kempston_setpos_callee
607   0000              	GLOBAL _in_mouse_kempston_setpos
608   0000              	GLOBAL _in_mouse_kempston_reset
609   0000              	GLOBAL _in_mouse_kempston_init
610   0000              	GLOBAL _in_mouse_amx_wheel_delta
611   0000              	GLOBAL _in_mouse_amx_wheel
612   0000              	GLOBAL _in_mouse_amx_callee
613   0000              	GLOBAL _in_mouse_amx
614   0000              	GLOBAL _in_mouse_amx_setpos_callee
615   0000              	GLOBAL _in_mouse_amx_setpos
616   0000              	GLOBAL _in_mouse_amx_reset
617   0000              	GLOBAL _in_mouse_amx_init_callee
618   0000              	GLOBAL _in_mouse_amx_init
619   0000              	GLOBAL _in_stick_sinclair2
620   0000              	GLOBAL _in_stick_sinclair1
621   0000              	GLOBAL _in_stick_kempston
622   0000              	GLOBAL _in_stick_fuller
623   0000              	GLOBAL _in_stick_cursor
624   0000              	GLOBAL _in_stick_keyboard_fastcall
625   0000              	GLOBAL _in_stick_keyboard
626   0000              	GLOBAL _in_wait_nokey
627   0000              	GLOBAL _in_wait_key
628   0000              	GLOBAL _in_test_key
629   0000              	GLOBAL _in_pause_fastcall
630   0000              	GLOBAL _in_pause
631   0000              	GLOBAL _in_key_scancode_fastcall
632   0000              	GLOBAL _in_key_scancode
633   0000              	GLOBAL _in_key_pressed_fastcall
634   0000              	GLOBAL _in_key_pressed
635   0000              	GLOBAL _in_inkey
636   0000              	GLOBAL _NIRVANAP_CHAR_TABLE
637   0000              	GLOBAL _NIRVANAP_WIDE_IMAGES
638   0000              	GLOBAL _NIRVANAP_TILE_IMAGES
639   0000              	GLOBAL _NIRVANAP_HOLE
640   0000              	GLOBAL _NIRVANAP_ISR_HOOK
641   0000              	GLOBAL _map_paper_last
642   0000              	GLOBAL _map_paper_clr
643   0000              	GLOBAL _map_paper
644   0000              	GLOBAL _draw_count
645   0000              	GLOBAL _g_player_hit_right
646   0000              	GLOBAL _g_player_hit_left
647   0000              	GLOBAL _joynames
648   0000              	GLOBAL _initials
649   0000              	GLOBAL _bullet_count
650   0000              	GLOBAL _bullet_frames
651   0000              	GLOBAL _bullet_colint
652   0000              	GLOBAL _bullet_dir
653   0000              	GLOBAL _bullet_tile
654   0000              	GLOBAL _bullet_col
655   0000              	GLOBAL _bullet_lin
656   0000              	GLOBAL _anim_count
657   0000              	GLOBAL _anim_respanwn
658   0000              	GLOBAL _anim_loop
659   0000              	GLOBAL _anim_end
660   0000              	GLOBAL _anim_int
661   0000              	GLOBAL _anim_tile
662   0000              	GLOBAL _anim_col
663   0000              	GLOBAL _anim_lin
664   0000              	GLOBAL _phase_curr
665   0000              	GLOBAL _map_heigth
666   0000              	GLOBAL _map_width
667   0000              	GLOBAL _scr_curr
668   0000              	GLOBAL _scr_obj
669   0000              	GLOBAL _scr_map
670   0000              	GLOBAL _sprite_speed_alt
671   0000              	GLOBAL _sprite_frames
672   0000              	GLOBAL _sprite_speed
673   0000              	GLOBAL _screen_ink
674   0000              	GLOBAL _screen_paper
675   0000              	GLOBAL _player_over_stair
676   0000              	GLOBAL _game_respawning
677   0000              	GLOBAL _game_respawn_tile
678   0000              	GLOBAL _game_respawn_index
679   0000              	GLOBAL _game_menu_sel
680   0000              	GLOBAL _game_score_top
681   0000              	GLOBAL _player_lives
682   0000              	GLOBAL _game_over
683   0000              	GLOBAL _game_sound
684   0000              	GLOBAL _game_inmune
685   0000              	GLOBAL _game_god_mode
686   0000              	GLOBAL _game_two_player
687   0000              	GLOBAL _game_brick_tile
688   0000              	GLOBAL _sprite_curr_index
689   0000              	GLOBAL _spr_count
690   0000              	GLOBAL _bullet_time
691   0000              	GLOBAL _anim_time
692   0000              	GLOBAL _frame_time
693   0000              	GLOBAL _entry_time
694   0000              	GLOBAL _curr_time
695   0000              	GLOBAL _s_state
696   0000              	GLOBAL _attrib_hl
697   0000              	GLOBAL _attrib
698   0000              	GLOBAL _zx_val_asm
699   0000              	GLOBAL _enemies
700   0000              	GLOBAL _tmp_ui
701   0000              	GLOBAL _tmp_sc
702   0000              	GLOBAL _tmp_uc
703   0000              	GLOBAL _tmp1
704   0000              	GLOBAL _tmp0
705   0000              	GLOBAL _tmp
706   0000              	GLOBAL _index1
707   0000              	GLOBAL _index0
708   0000              	GLOBAL _loop_count
709   0000              	GLOBAL _s_col1
710   0000              	GLOBAL _s_col0
711   0000              	GLOBAL _s_lin1
712   0000              	GLOBAL _s_lin0
713   0000              	GLOBAL _s_tile1
714   0000              	GLOBAL _s_tile0
715   0000              	GLOBAL _player_hit_count
716   0000              	GLOBAL _sprite_horizontal_check
717   0000              	GLOBAL _sprite_on_air
718   0000              	GLOBAL _sprite
719   0000              	GLOBAL _game_gravity
720   0000              	GLOBAL _player_keys
721   0000              	GLOBAL _player_vel_inc
722   0000              	GLOBAL _player_vel_y1
723   0000              	GLOBAL _player_vel_y0
724   0000              	GLOBAL _player_vel_y
725   0000              	GLOBAL _player_vel_x
726   0000              	GLOBAL _player_joy
727   0000              	GLOBAL _player_score
728   0000              	GLOBAL _last_time
729   0000              	GLOBAL _player_slide
730   0000              	GLOBAL _spr_timer
731   0000              	GLOBAL _jump_lin
732   0000              	GLOBAL _player_hit_col
733   0000              	GLOBAL _player_hit_lin
734   0000              	GLOBAL _colint
735   0000              	GLOBAL _col
736   0000              	GLOBAL _lin
737   0000              	GLOBAL _tile
738   0000              	GLOBAL _state_a
739   0000              	GLOBAL _state
740   0000              	GLOBAL _class
741   0000              	GLOBAL _tbuffer
742   0000              	GLOBAL _dirs
743   0000              	GLOBAL _k1
744   0000              	GLOBAL _joyfunc1
745   0000              	GLOBAL _btiles
746   0000              	GLOBAL _spec128
747   0000              	GLOBAL _GLOBAL_ZX_PORT_7FFD
748   0000              	GLOBAL _GLOBAL_ZX_PORT_1FFD
749   0000              	GLOBAL _GLOBAL_ZX_PORT_FE
750   0000              	GLOBAL _ay_effect_20
751   0000              	GLOBAL _ay_effect_19
752   0000              	GLOBAL _ay_effect_18
753   0000              	GLOBAL _ay_effect_17
754   0000              	GLOBAL _ay_effect_16
755   0000              	GLOBAL _ay_effect_15
756   0000              	GLOBAL _ay_effect_14
757   0000              	GLOBAL _ay_effect_13
758   0000              	GLOBAL _ay_effect_12
759   0000              	GLOBAL _ay_effect_11
760   0000              	GLOBAL _ay_effect_10
761   0000              	GLOBAL _ay_effect_09
762   0000              	GLOBAL _ay_effect_08
763   0000              	GLOBAL _ay_effect_07
764   0000              	GLOBAL _ay_effect_06
765   0000              	GLOBAL _ay_effect_05
766   0000              	GLOBAL _ay_effect_04
767   0000              	GLOBAL _ay_effect_03
768   0000              	GLOBAL _ay_effect_02
769   0000              	GLOBAL _ay_effect_01
770   0000              	GLOBAL _pb_midi_phase_1
771   0000              	GLOBAL _pb_midi_title
772   0000              	GLOBAL _control_method
773   0000              	GLOBAL _scr_7
774   0000              	GLOBAL _scr_6
775   0000              	GLOBAL _scr_5
776   0000              	GLOBAL _scr_4
777   0000              	GLOBAL _scr_3
778   0000              	GLOBAL _scr_2
779   0000              	GLOBAL _scr_1
780   0000              	GLOBAL _scr_0
781   0000              ;--------------------------------------------------------
782   0000              ; special function registers
783   0000              ;--------------------------------------------------------
784   0000              defc _IO_FE	=	0x00fe
785   0000              defc _IO_1FFD	=	0x1ffd
786   0000              defc _IO_7FFD	=	0x7ffd
787   0000              ;--------------------------------------------------------
788   0000              ; ram data
789   0000              ;--------------------------------------------------------
790   0000              	SECTION bss_compiler
791   0000              ;--------------------------------------------------------
792   0000              ; ram data
793   0000              ;--------------------------------------------------------
794   0000              
795   0000              IF 0
796   0000              
797   0000              ; .area _INITIALIZED removed by z88dk
798   0000              
799   0000              
800   0000              ENDIF
801   0000              
802   0000              ;--------------------------------------------------------
803   0000              ; absolute external ram data
804   0000              ;--------------------------------------------------------
805   0000              	SECTION IGNORE
806   0000              ;--------------------------------------------------------
807   0000              ; global & static initialisations
808   0000              ;--------------------------------------------------------
809   0000              	SECTION code_crt_init
810   0000              ;--------------------------------------------------------
811   0000              ; Home
812   0000              ;--------------------------------------------------------
813   0000              	SECTION IGNORE
814   0000              ;--------------------------------------------------------
815   0000              ; code
816   0000              ;--------------------------------------------------------
817   0000              	SECTION code_compiler
818   0000              ;	---------------------------------
819   0000              ; Function player_init
820   0000              ; ---------------------------------
821   0000              _player_init:
822   0000  CD 00 00    	call	___sdcc_enter_ix
823   0003  F5          	push	af
824   0004  3E 00       	ld	a, +((_class) & 0xFF)
825   0006  DD 86 04    	add	a,(ix+4)
826   0009  4F          	ld	c, a
827   000A  3E 00       	ld	a, +((_class) / 256)
828   000C  CE 00       	adc	a,0x00
829   000E  47          	ld	b, a
830   000F  AF          	xor	a, a
831   0010  02          	ld	(bc), a
832   0011  3E 00       	ld	a, +((_tile) & 0xFF)
833   0013  DD 86 04    	add	a,(ix+4)
834   0016  4F          	ld	c, a
835   0017  3E 00       	ld	a, +((_tile) / 256)
836   0019  CE 00       	adc	a,0x00
837   001B  47          	ld	b, a
838   001C  DD 7E 07    	ld	a,(ix+7)
839   001F  02          	ld	(bc), a
840   0020  3E 00       	ld	a, +((_lin) & 0xFF)
841   0022  DD 86 04    	add	a,(ix+4)
842   0025  4F          	ld	c, a
843   0026  3E 00       	ld	a, +((_lin) / 256)
844   0028  CE 00       	adc	a,0x00
845   002A  47          	ld	b, a
846   002B  DD 7E 05    	ld	a,(ix+5)
847   002E  02          	ld	(bc), a
848   002F  3E 00       	ld	a, +((_col) & 0xFF)
849   0031  DD 86 04    	add	a,(ix+4)
850   0034  4F          	ld	c, a
851   0035  3E 00       	ld	a, +((_col) / 256)
852   0037  CE 00       	adc	a,0x00
853   0039  47          	ld	b, a
854   003A  DD 7E 06    	ld	a,(ix+6)
855   003D  02          	ld	(bc), a
856   003E  3E 00       	ld	a, +((_colint) & 0xFF)
857   0040  DD 86 04    	add	a,(ix+4)
858   0043  4F          	ld	c, a
859   0044  3E 00       	ld	a, +((_colint) / 256)
860   0046  CE 00       	adc	a,0x00
861   0048  47          	ld	b, a
862   0049  AF          	xor	a, a
863   004A  02          	ld	(bc), a
864   004B  3E 00       	ld	a, +((_state) & 0xFF)
865   004D  DD 86 04    	add	a,(ix+4)
866   0050  4F          	ld	c, a
867   0051  3E 00       	ld	a, +((_state) / 256)
868   0053  CE 00       	adc	a,0x00
869   0055  47          	ld	b, a
870   0056  AF          	xor	a, a
871   0057  02          	ld	(bc), a
872   0058  3E 00       	ld	a, +((_state_a) & 0xFF)
873   005A  DD 86 04    	add	a,(ix+4)
874   005D  4F          	ld	c, a
875   005E  3E 00       	ld	a, +((_state_a) / 256)
876   0060  CE 00       	adc	a,0x00
877   0062  47          	ld	b, a
878   0063  AF          	xor	a, a
879   0064  02          	ld	(bc), a
880   0065  3E 00       	ld	a, +((_jump_lin) & 0xFF)
881   0067  DD 86 04    	add	a,(ix+4)
882   006A  5F          	ld	e, a
883   006B  3E 00       	ld	a, +((_jump_lin) / 256)
884   006D  CE 00       	adc	a,0x00
885   006F  57          	ld	d, a
886   0070  DD 7E 05    	ld	a,(ix+5)
887   0073  12          	ld	(de), a
888   0074  DD 6E 04    	ld	l,(ix+4)
889   0077  26 00       	ld	h,0x00
890   0079  29          	add	hl,hl
891   007A  11 00 00    	ld	de,_last_time
892   007D  19          	add	hl, de
893   007E  E3          	ex	(sp), hl
894   007F  E1          	pop	hl
895   0080  ED 5B 00 00 	ld	de,(_curr_time)
896   0084  E5          	push	hl
897   0085  73          	ld	(hl), e
898   0086  23          	inc	hl
899   0087  72          	ld	(hl), d
900   0088  3E 00       	ld	a, +((_sprite_speed_alt) & 0xFF)
901   008A  DD 86 04    	add	a,(ix+4)
902   008D  5F          	ld	e, a
903   008E  3E 00       	ld	a, +((_sprite_speed_alt) / 256)
904   0090  CE 00       	adc	a,0x00
905   0092  57          	ld	d, a
906   0093  AF          	xor	a, a
907   0094  12          	ld	(de), a
908   0095  0A          	ld	a, (bc)
909   0096  F6 11       	or	a,+(0x01|0x10)
910   0098  02          	ld	(bc),a
911   0099  21 00 00    	ld	hl,_player_hit_col
912   009C  36 00       	ld	(hl),0x00
913   009E  21 00 00    	ld	hl,_player_hit_lin
914   00A1  36 00       	ld	(hl),0x00
915   00A3  21 00 00    	ld	hl,_player_slide
916   00A6  36 00       	ld	(hl),0x00
917   00A8  DD 66 06    	ld	h,(ix+6)
918   00AB  DD 6E 05    	ld	l,(ix+5)
919   00AE  E5          	push	hl
920   00AF  DD 66 07    	ld	h,(ix+7)
921   00B2  DD 6E 04    	ld	l,(ix+4)
922   00B5  E5          	push	hl
923   00B6  CD 00 00    	call	_NIRVANAP_spriteT_callee
924   00B9  F1          	pop	af
925   00BA  DD E1       	pop	ix
926   00BC  C9          	ret
927   00BD              	SECTION code_compiler
928   00BD              ;	---------------------------------
929   00BD              ; Function player_check_input
930   00BD              ; ---------------------------------
931   00BD              _player_check_input:
932   00BD  21 00 00    	ld	hl,_dirs
933   00C0  CB 56       	bit	2, (hl)
934   00C2  28 0C       	jr	Z,l_player_check_input_00102
935   00C4  21 00 00    	ld	hl,_dirs
936   00C7  CB 5E       	bit	3, (hl)
937   00C9  28 05       	jr	Z,l_player_check_input_00102
938   00CB  21 00 00    	ld	hl,_dirs
939   00CE  36 00       	ld	(hl),0x00
940   00D0              l_player_check_input_00102:
941   00D0  21 00 00    	ld	hl,_dirs
942   00D3  7E          	ld	a, (hl)
943   00D4  CB 07       	rlc	a
944   00D6  E6 01       	and	a,0x01
945   00D8  CB 47       	bit	0, a
946   00DA  20 1D       	jr	NZ,l_player_check_input_00107
947   00DC  CB 56       	bit	2, (hl)
948   00DE  20 19       	jr	NZ,l_player_check_input_00107
949   00E0  21 00 00    	ld	hl,_dirs
950   00E3  CB 5E       	bit	3, (hl)
951   00E5  20 12       	jr	NZ,l_player_check_input_00107
952   00E7  21 00 00    	ld	hl,_dirs
953   00EA  CB 46       	bit	0, (hl)
954   00EC  20 0B       	jr	NZ,l_player_check_input_00107
955   00EE  21 00 00    	ld	hl,_dirs
956   00F1  CB 4E       	bit	1, (hl)
957   00F3  20 04       	jr	NZ,l_player_check_input_00107
958   00F5  2E 00       	ld	l,0x00
959   00F7  18 02       	jr	l_player_check_input_00108
960   00F9              l_player_check_input_00107:
961   00F9  2E 01       	ld	l,0x01
962   00FB              l_player_check_input_00108:
963   00FB  C9          	ret
964   00FC              	SECTION code_compiler
965   00FC              ;	---------------------------------
966   00FC              ; Function player_collision
967   00FC              ; ---------------------------------
968   00FC              _player_collision:
969   00FC  21 00 00    	ld	hl,_sprite
970   00FF  36 00       	ld	(hl),0x00
971   0101  3A 07 00    	ld	a,(_col + 7)
972   0104  32 00 00    	ld	(_s_col1),a
973   0107  3A 07 00    	ld	a,(_lin + 7)
974   010A  32 00 00    	ld	(_s_lin1),a
975   010D              l_player_collision_00107:
976   010D  21 00 00    	ld	hl,_sprite
977   0110  7E          	ld	a, (hl)
978   0111  D6 07       	sub	a,0x07
979   0113  30 66       	jr	NC,l_player_collision_00109
980   0115  3E 00       	ld	a, +((_class) & 0xFF)
981   0117  86          	add	a, (hl)
982   0118  4F          	ld	c, a
983   0119  3E 00       	ld	a, +((_class) / 256)
984   011B  CE 00       	adc	a,0x00
985   011D  47          	ld	b, a
986   011E  0A          	ld	a, (bc)
987   011F  B7          	or	a, a
988   0120  28 53       	jr	Z,l_player_collision_00106
989   0122  4E          	ld	c,(hl)
990   0123  06 00       	ld	b,0x00
991   0125  21 00 00    	ld	hl,_col
992   0128  09          	add	hl,bc
993   0129  4E          	ld	c, (hl)
994   012A  06 00       	ld	b,0x00
995   012C  3A 00 00    	ld	a,(_s_col1)
996   012F  5F          	ld	e,a
997   0130  16 00       	ld	d,0x00
998   0132  79          	ld	a, c
999   0133  93          	sub	a, e
1000  0134  6F          	ld	l, a
1001  0135  78          	ld	a, b
1002  0136  9A          	sbc	a, d
1003  0137  67          	ld	h, a
1004  0138  CD 00 00    	call	_abs_fastcall
1005  013B  7D          	ld	a,l
1006  013C  D6 02       	sub	a,0x02
1007  013E  7C          	ld	a,h
1008  013F  17          	rla
1009  0140  3F          	ccf
1010  0141  1F          	rra
1011  0142  DE 80       	sbc	a,0x80
1012  0144  30 2F       	jr	NC,l_player_collision_00106
1013  0146  2A 00 00    	ld	hl,(_sprite)
1014  0149  26 00       	ld	h,0x00
1015  014B  01 00 00    	ld	bc,_lin
1016  014E  09          	add	hl,bc
1017  014F  4E          	ld	c,(hl)
1018  0150  06 00       	ld	b,0x00
1019  0152  3A 00 00    	ld	a,(_s_lin1)
1020  0155  5F          	ld	e,a
1021  0156  16 00       	ld	d,0x00
1022  0158  79          	ld	a, c
1023  0159  93          	sub	a, e
1024  015A  6F          	ld	l, a
1025  015B  78          	ld	a, b
1026  015C  9A          	sbc	a, d
1027  015D  67          	ld	h, a
1028  015E  CD 00 00    	call	_abs_fastcall
1029  0161  7D          	ld	a,l
1030  0162  D6 0E       	sub	a,0x0e
1031  0164  7C          	ld	a,h
1032  0165  17          	rla
1033  0166  3F          	ccf
1034  0167  1F          	rra
1035  0168  DE 80       	sbc	a,0x80
1036  016A  30 09       	jr	NC,l_player_collision_00106
1037  016C  2E 02       	ld	l,0x02
1038  016E  CD 00 00    	call	_zx_border_fastcall
1039  0171  2E 01       	ld	l,0x01
1040  0173  18 08       	jr	l_player_collision_00110
1041  0175              l_player_collision_00106:
1042  0175  21 00 00    	ld	hl,_sprite
1043  0178  34          	inc	(hl)
1044  0179  18 92       	jr	l_player_collision_00107
1045  017B              l_player_collision_00109:
1046  017B  2E 00       	ld	l,0x00
1047  017D              l_player_collision_00110:
1048  017D  C9          	ret
1049  017E              	SECTION code_compiler
1050  017E              ;	---------------------------------
1051  017E              ; Function player_kill
1052  017E              ; ---------------------------------
1053  017E              _player_kill:
1054  017E  01 00 00    	ld	bc,_state+0
1055  0181  2A 00 00    	ld	hl,(_sprite)
1056  0184  26 00       	ld	h,0x00
1057  0186  09          	add	hl,bc
1058  0187  CB 6E       	bit	5,(hl)
1059  0189  C2 50 02    	jp	NZ,l_player_kill_00109
1060  018C  C5          	push	bc
1061  018D  CD 00 00    	call	_sound_hit_brick
1062  0190  C1          	pop	bc
1063  0191  79          	ld	a, c
1064  0192  21 00 00    	ld	hl,_sprite
1065  0195  86          	add	a, (hl)
1066  0196  5F          	ld	e, a
1067  0197  78          	ld	a, b
1068  0198  CE 00       	adc	a,0x00
1069  019A  57          	ld	d, a
1070  019B  1A          	ld	a, (de)
1071  019C  F6 20       	or	a,0x20
1072  019E  12          	ld	(de), a
1073  019F  3E 00       	ld	a, +((_sprite_speed_alt) & 0xFF)
1074  01A1  86          	add	a, (hl)
1075  01A2  5F          	ld	e, a
1076  01A3  3E 00       	ld	a, +((_sprite_speed_alt) / 256)
1077  01A5  CE 00       	adc	a,0x00
1078  01A7  57          	ld	d, a
1079  01A8  3E 03       	ld	a,0x03
1080  01AA  12          	ld	(de), a
1081  01AB  79          	ld	a, c
1082  01AC  86          	add	a, (hl)
1083  01AD  4F          	ld	c, a
1084  01AE  78          	ld	a, b
1085  01AF  CE 00       	adc	a,0x00
1086  01B1  47          	ld	b, a
1087  01B2  0A          	ld	a, (bc)
1088  01B3  CB 57       	bit	2, a
1089  01B5  28 0D       	jr	Z,l_player_kill_00102
1090  01B7  2A 00 00    	ld	hl,(_sprite)
1091  01BA  26 00       	ld	h,0x00
1092  01BC  01 00 00    	ld	bc,_tile
1093  01BF  09          	add	hl,bc
1094  01C0  36 40       	ld	(hl),0x40
1095  01C2  18 0B       	jr	l_player_kill_00103
1096  01C4              l_player_kill_00102:
1097  01C4  2A 00 00    	ld	hl,(_sprite)
1098  01C7  26 00       	ld	h,0x00
1099  01C9  01 00 00    	ld	bc,_tile
1100  01CC  09          	add	hl,bc
1101  01CD  36 48       	ld	(hl),0x48
1102  01CF              l_player_kill_00103:
1103  01CF  CD DA 08    	call	_player_hit_platform_clear
1104  01D2  2A 00 00    	ld	hl,(_sprite)
1105  01D5  26 00       	ld	h,0x00
1106  01D7  01 00 00    	ld	bc,_col
1107  01DA  09          	add	hl,bc
1108  01DB  4E          	ld	c, (hl)
1109  01DC  2A 00 00    	ld	hl,(_sprite)
1110  01DF  26 00       	ld	h,0x00
1111  01E1  11 00 00    	ld	de,_lin
1112  01E4  19          	add	hl,de
1113  01E5  46          	ld	b, (hl)
1114  01E6  2A 00 00    	ld	hl,(_sprite)
1115  01E9  26 00       	ld	h,0x00
1116  01EB  11 00 00    	ld	de,_tile
1117  01EE  19          	add	hl,de
1118  01EF  56          	ld	d, (hl)
1119  01F0  79          	ld	a,c
1120  01F1  21 00 00    	ld	hl,_sprite
1121  01F4  F5          	push	af
1122  01F5  33          	inc	sp
1123  01F6  4A          	ld	c, d
1124  01F7  7E          	ld	a,(hl)
1125  01F8  C5          	push	bc
1126  01F9  F5          	push	af
1127  01FA  33          	inc	sp
1128  01FB  CD 00 00    	call	_NIRVANAP_spriteT_callee
1129  01FE  01 00 00    	ld	bc,_spr_timer+0
1130  0201  2A 00 00    	ld	hl,(_sprite)
1131  0204  26 00       	ld	h,0x00
1132  0206  29          	add	hl, hl
1133  0207  09          	add	hl,bc
1134  0208  ED 5B 00 00 	ld	de,(_curr_time)
1135  020C  73          	ld	(hl),e
1136  020D  23          	inc	hl
1137  020E  72          	ld	(hl),d
1138  020F  3A 00 00    	ld	a,(_sprite)
1139  0212  D6 07       	sub	a,0x07
1140  0214  20 1E       	jr	NZ,l_player_kill_00105
1141  0216  01 00 00    	ld	bc,_state_a+0
1142  0219  79          	ld	a, c
1143  021A  21 00 00    	ld	hl,_sprite
1144  021D  86          	add	a, (hl)
1145  021E  5F          	ld	e, a
1146  021F  78          	ld	a, b
1147  0220  CE 00       	adc	a,0x00
1148  0222  57          	ld	d, a
1149  0223  1A          	ld	a, (de)
1150  0224  F6 08       	or	a,0x08
1151  0226  12          	ld	(de), a
1152  0227  79          	ld	a, c
1153  0228  86          	add	a, (hl)
1154  0229  4F          	ld	c, a
1155  022A  78          	ld	a, b
1156  022B  CE 00       	adc	a,0x00
1157  022D  47          	ld	b, a
1158  022E  0A          	ld	a, (bc)
1159  022F  E6 EF       	and	a,0xef
1160  0231  02          	ld	(bc), a
1161  0232  18 1C       	jr	l_player_kill_00109
1162  0234              l_player_kill_00105:
1163  0234  01 00 00    	ld	bc,_state_a+0
1164  0237  79          	ld	a, c
1165  0238  21 00 00    	ld	hl,_sprite
1166  023B  86          	add	a, (hl)
1167  023C  5F          	ld	e, a
1168  023D  78          	ld	a, b
1169  023E  CE 00       	adc	a,0x00
1170  0240  57          	ld	d, a
1171  0241  1A          	ld	a, (de)
1172  0242  F6 10       	or	a,0x10
1173  0244  12          	ld	(de), a
1174  0245  79          	ld	a, c
1175  0246  86          	add	a, (hl)
1176  0247  4F          	ld	c, a
1177  0248  78          	ld	a, b
1178  0249  CE 00       	adc	a,0x00
1179  024B  47          	ld	b, a
1180  024C  0A          	ld	a, (bc)
1181  024D  E6 F7       	and	a,0xf7
1182  024F  02          	ld	(bc), a
1183  0250              l_player_kill_00109:
1184  0250  C9          	ret
1185  0251              	SECTION code_compiler
1186  0251              ;	---------------------------------
1187  0251              ; Function player_restart
1188  0251              ; ---------------------------------
1189  0251              _player_restart:
1190  0251  CD 00 00    	call	___sdcc_enter_ix
1191  0254  F5          	push	af
1192  0255  4D          	ld	c, l
1193  0256  21 00 00    	ld	hl,_ay_effect_15
1194  0259  CD 00 00    	call	_ay_fx_play
1195  025C  C5          	push	bc
1196  025D  21 0E 64    	ld	hl,0x640e
1197  0260  E5          	push	hl
1198  0261  21 07 00    	ld	hl,0x0007
1199  0264  E5          	push	hl
1200  0265  CD 00 00    	call	_player_init
1201  0268  F1          	pop	af
1202  0269  F1          	pop	af
1203  026A  C1          	pop	bc
1204  026B  11 00 00    	ld	de,_state+0
1205  026E  69          	ld	l,c
1206  026F  26 00       	ld	h,0x00
1207  0271  19          	add	hl, de
1208  0272  CB E6       	set	4, (hl)
1209  0274  11 00 00    	ld	de,_state_a+0
1210  0277  69          	ld	l,c
1211  0278  26 00       	ld	h,0x00
1212  027A  19          	add	hl, de
1213  027B  CB C6       	set	0, (hl)
1214  027D  11 00 00    	ld	de,_spr_timer+0
1215  0280  69          	ld	l, c
1216  0281  26 00       	ld	h,0x00
1217  0283  29          	add	hl, hl
1218  0284  19          	add	hl,de
1219  0285  E3          	ex	(sp), hl
1220  0286  E1          	pop	hl
1221  0287  ED 5B 00 00 	ld	de,(_curr_time)
1222  028B  E5          	push	hl
1223  028C  73          	ld	(hl), e
1224  028D  23          	inc	hl
1225  028E  72          	ld	(hl), d
1226  028F  11 00 00    	ld	de,_sprite_speed_alt+0
1227  0292  69          	ld	l,c
1228  0293  26 00       	ld	h,0x00
1229  0295  19          	add	hl, de
1230  0296  F1          	pop	af
1231  0297  36 08       	ld	(hl),0x08
1232  0299  DD E1       	pop	ix
1233  029B  C9          	ret
1234  029C              	SECTION code_compiler
1235  029C              ;	---------------------------------
1236  029C              ; Function player_lost_life
1237  029C              ; ---------------------------------
1238  029C              _player_lost_life:
1239  029C  CD 00 00    	call	_sound_hit_enemy
1240  029F  21 00 00    	ld	hl,_player_lives
1241  02A2  35          	dec (hl)
1242  02A3  20 09       	jr	NZ,l_player_lost_life_00102
1243  02A5  21 00 00    	ld	hl,_game_over
1244  02A8  36 01       	ld	(hl),0x01
1245  02AA  2E 00       	ld	l,0x00
1246  02AC  18 05       	jr	l_player_lost_life_00103
1247  02AE              l_player_lost_life_00102:
1248  02AE  CD 00 00    	call	_game_print_lives
1249  02B1  2E 01       	ld	l,0x01
1250  02B3              l_player_lost_life_00103:
1251  02B3  C9          	ret
1252  02B4              	SECTION code_compiler
1253  02B4              ;	---------------------------------
1254  02B4              ; Function player_turn
1255  02B4              ; ---------------------------------
1256  02B4              _player_turn:
1257  02B4  2A 00 00    	ld	hl,(_sprite)
1258  02B7  26 00       	ld	h,0x00
1259  02B9  01 00 00    	ld	bc,_class
1260  02BC  09          	add	hl,bc
1261  02BD  7E          	ld	a,(hl)
1262  02BE  B7          	or	a, a
1263  02BF  C0          	ret	NZ
1264  02C0  3A 00 00    	ld	a,(_player_lives)
1265  02C3  B7          	or	a, a
1266  02C4  C8          	ret	Z
1267  02C5  21 00 00    	ld	hl,_sprite
1268  02C8  CD 00 00    	call	_spr_chktime
1269  02CB  7D          	ld	a, l
1270  02CC  B7          	or	a, a
1271  02CD  C8          	ret	Z
1272  02CE  21 00 00    	ld	hl,_k1
1273  02D1  E5          	push	hl
1274  02D2  2A 00 00    	ld	hl,(_joyfunc1)
1275  02D5  CD 00 00    	call	___sdcc_call_hl
1276  02D8  F1          	pop	af
1277  02D9  7D          	ld	a,l
1278  02DA  32 00 00    	ld	(_dirs),a
1279  02DD  CD E3 02    	call	_player_move
1280  02E0  C3 FC 00    	jp  _player_collision
1281  02E3              	SECTION code_compiler
1282  02E3              ;	---------------------------------
1283  02E3              ; Function player_move
1284  02E3              ; ---------------------------------
1285  02E3              _player_move:
1286  02E3  2A 00 00    	ld	hl,(_sprite)
1287  02E6  26 00       	ld	h,0x00
1288  02E8  01 00 00    	ld	bc,_lin
1289  02EB  09          	add	hl,bc
1290  02EC  7E          	ld	a,(hl)
1291  02ED  32 00 00    	ld	(_s_lin0),a
1292  02F0  2A 00 00    	ld	hl,(_sprite)
1293  02F3  26 00       	ld	h,0x00
1294  02F5  01 00 00    	ld	bc,_col
1295  02F8  09          	add	hl,bc
1296  02F9  7E          	ld	a,(hl)
1297  02FA  32 00 00    	ld	(_s_col0),a
1298  02FD  2A 00 00    	ld	hl,(_sprite)
1299  0300  26 00       	ld	h,0x00
1300  0302  01 00 00    	ld	bc,_tile
1301  0305  09          	add	hl,bc
1302  0306  4E          	ld	c, (hl)
1303  0307  3A 00 00    	ld	a,(_sprite)
1304  030A  5F          	ld	e,a
1305  030B  16 00       	ld	d,0x00
1306  030D  21 00 00    	ld	hl,_colint
1307  0310  19          	add	hl,de
1308  0311  7E          	ld	a,(hl)
1309  0312  81          	add	a,c
1310  0313  32 00 00    	ld	(_s_tile0),a
1311  0316  2A 00 00    	ld	hl,(_sprite)
1312  0319  26 00       	ld	h,0x00
1313  031B  01 00 00    	ld	bc,_state
1314  031E  09          	add	hl,bc
1315  031F  7E          	ld	a,(hl)
1316  0320  CB 47       	bit	0,a
1317  0322  32 00 00    	ld	(_s_state),a
1318  0325  20 07       	jr	NZ,l_player_move_00113
1319  0327  21 00 00    	ld	hl,_s_state
1320  032A  CB 4E       	bit	1, (hl)
1321  032C  28 46       	jr	Z,l_player_move_00114
1322  032E              l_player_move_00113:
1323  032E  CD 72 06    	call	_player_fire
1324  0331  3A 00 00    	ld	a,(_player_vel_y)
1325  0334  21 00 00    	ld	hl,_player_vel_y1
1326  0337  96          	sub	a, (hl)
1327  0338  E2 3D 03    	jp	PO, l_player_move_00162
1328  033B  EE 80       	xor	a,0x80
1329  033D              l_player_move_00162:
1330  033D  F2 60 03    	jp	P, l_player_move_00106
1331  0340  21 00 00    	ld	hl,_dirs
1332  0343  CB 56       	bit	2, (hl)
1333  0345  28 09       	jr	Z,l_player_move_00102
1334  0347  21 00 00    	ld	hl,_s_state
1335  034A  7E          	ld	a,(hl)
1336  034B  F6 08       	or	a,0x08
1337  034D  E6 FB       	and	a,0xfb
1338  034F  77          	ld	(hl),a
1339  0350              l_player_move_00102:
1340  0350  21 00 00    	ld	hl,_dirs
1341  0353  CB 4E       	bit	1, (hl)
1342  0355  28 09       	jr	Z,l_player_move_00106
1343  0357  21 00 00    	ld	hl,_s_state
1344  035A  7E          	ld	a,(hl)
1345  035B  F6 04       	or	a,0x04
1346  035D  E6 F7       	and	a,0xf7
1347  035F  77          	ld	(hl),a
1348  0360              l_player_move_00106:
1349  0360  CD AF 09    	call	_player_move_jump
1350  0363  7D          	ld	a, l
1351  0364  B7          	or	a, a
1352  0365  28 2E       	jr	Z,l_player_move_00115
1353  0367  3A 00 00    	ld	a,(_player_over_stair)
1354  036A  B7          	or	a, a
1355  036B  20 28       	jr	NZ,l_player_move_00115
1356  036D  2E 54       	ld	l,0x54
1357  036F  CD A6 04    	call	_player_tile
1358  0372  18 21       	jr	l_player_move_00115
1359  0374              l_player_move_00114:
1360  0374  CD FC 04    	call	_player_move_input
1361  0377  7D          	ld	a, l
1362  0378  B7          	or	a, a
1363  0379  20 17       	jr	NZ,l_player_move_00112
1364  037B  2A 00 00    	ld	hl,(_sprite)
1365  037E  26 00       	ld	h,0x00
1366  0380  01 00 00    	ld	bc,_colint
1367  0383  09          	add	hl,bc
1368  0384  AF          	xor	a,a
1369  0385  77          	ld	(hl),a
1370  0386  2E 64       	ld	l,0x64
1371  0388  CD A6 04    	call	_player_tile
1372  038B  21 00 00    	ld	hl,_s_state
1373  038E  7E          	ld	a,(hl)
1374  038F  E6 F3       	and	a,+(0xf7&0xfb)
1375  0391  77          	ld	(hl),a
1376  0392              l_player_move_00112:
1377  0392  CD 33 09    	call	_player_check_floor
1378  0395              l_player_move_00115:
1379  0395  CD 00 00    	call	_spr_redraw
1380  0398  7D          	ld	a, l
1381  0399  B7          	or	a, a
1382  039A  28 03       	jr	Z,l_player_move_00118
1383  039C  CD 8F 06    	call	_player_check_map
1384  039F              l_player_move_00118:
1385  039F  3A 00 00    	ld	a,(_player_hit_lin)
1386  03A2  B7          	or	a, a
1387  03A3  28 03       	jr	Z,l_player_move_00120
1388  03A5  CD DA 08    	call	_player_hit_platform_clear
1389  03A8              l_player_move_00120:
1390  03A8  2A 00 00    	ld	hl,(_sprite)
1391  03AB  26 00       	ld	h,0x00
1392  03AD  01 00 00    	ld	bc,_state
1393  03B0  09          	add	hl,bc
1394  03B1  3A 00 00    	ld	a,(_s_state)
1395  03B4  77          	ld	(hl),a
1396  03B5  2E 00       	ld	l,0x00
1397  03B7  C9          	ret
1398  03B8              	SECTION code_compiler
1399  03B8              ;	---------------------------------
1400  03B8              ; Function player_check_stairs_down
1401  03B8              ; ---------------------------------
1402  03B8              _player_check_stairs_down:
1403  03B8  CD 00 00    	call	___sdcc_enter_ix
1404  03BB  3B          	dec	sp
1405  03BC  2A 00 00    	ld	hl,(_sprite)
1406  03BF  26 00       	ld	h,0x00
1407  03C1  5D          	ld	e,l
1408  03C2  01 00 00    	ld	bc,_col
1409  03C5  09          	add	hl,bc
1410  03C6  46          	ld	b,(hl)
1411  03C7  16 00       	ld	d,0x00
1412  03C9  21 00 00    	ld	hl,_lin
1413  03CC  19          	add	hl,de
1414  03CD  7E          	ld	a,(hl)
1415  03CE  C6 10       	add	a,0x10
1416  03D0  4F          	ld	c,a
1417  03D1  C5          	push	bc
1418  03D2  CD 00 00    	call	_spr_calc_index
1419  03D5  F1          	pop	af
1420  03D6  7D          	ld	a,l
1421  03D7  32 00 00    	ld	(_sprite_curr_index),a
1422  03DA  4F          	ld	c,a
1423  03DB  06 00       	ld	b,0x00
1424  03DD  21 00 00    	ld	hl,_scr_map
1425  03E0  09          	add	hl,bc
1426  03E1  7E          	ld	a,(hl)
1427  03E2  4F          	ld	c,a
1428  03E3  D6 38       	sub	a,0x38
1429  03E5  38 05       	jr	C,l_player_check_stairs_down_00105
1430  03E7  3E 3C       	ld	a,0x3c
1431  03E9  91          	sub	a, c
1432  03EA  30 04       	jr	NC,l_player_check_stairs_down_00106
1433  03EC              l_player_check_stairs_down_00105:
1434  03EC  3E 00       	ld	a,0x00
1435  03EE  18 02       	jr	l_player_check_stairs_down_00107
1436  03F0              l_player_check_stairs_down_00106:
1437  03F0  3E 01       	ld	a,0x01
1438  03F2              l_player_check_stairs_down_00107:
1439  03F2  B7          	or	a, a
1440  03F3  28 05       	jr	Z,l_player_check_stairs_down_00103
1441  03F5  21 00 00    	ld	hl,_player_over_stair
1442  03F8  36 01       	ld	(hl),0x01
1443  03FA              l_player_check_stairs_down_00103:
1444  03FA  33          	inc	sp
1445  03FB  DD E1       	pop	ix
1446  03FD  C9          	ret
1447  03FE              	SECTION code_compiler
1448  03FE              ;	---------------------------------
1449  03FE              ; Function player_check_stairs
1450  03FE              ; ---------------------------------
1451  03FE              _player_check_stairs:
1452  03FE  CD 00 00    	call	___sdcc_enter_ix
1453  0401  3B          	dec	sp
1454  0402  5D          	ld	e, l
1455  0403  2A 00 00    	ld	hl,(_sprite)
1456  0406  26 00       	ld	h,0x00
1457  0408  01 00 00    	ld	bc,_col
1458  040B  09          	add	hl,bc
1459  040C  7E          	ld	a,(hl)
1460  040D  83          	add	a,e
1461  040E  57          	ld	d,a
1462  040F  2A 00 00    	ld	hl,(_sprite)
1463  0412  26 00       	ld	h,0x00
1464  0414  01 00 00    	ld	bc,_lin
1465  0417  09          	add	hl,bc
1466  0418  46          	ld	b, (hl)
1467  0419  D5          	push	de
1468  041A  58          	ld	e,b
1469  041B  D5          	push	de
1470  041C  CD 00 00    	call	_spr_calc_index
1471  041F  F1          	pop	af
1472  0420  D1          	pop	de
1473  0421  7D          	ld	a,l
1474  0422  32 00 00    	ld	(_sprite_curr_index),a
1475  0425  4F          	ld	c,a
1476  0426  06 00       	ld	b,0x00
1477  0428  21 00 00    	ld	hl,_scr_map
1478  042B  09          	add	hl,bc
1479  042C  7E          	ld	a,(hl)
1480  042D  4F          	ld	c,a
1481  042E  D6 38       	sub	a,0x38
1482  0430  38 05       	jr	C,l_player_check_stairs_00111
1483  0432  3E 3C       	ld	a,0x3c
1484  0434  91          	sub	a, c
1485  0435  30 04       	jr	NC,l_player_check_stairs_00112
1486  0437              l_player_check_stairs_00111:
1487  0437  0E 00       	ld	c,0x00
1488  0439  18 02       	jr	l_player_check_stairs_00113
1489  043B              l_player_check_stairs_00112:
1490  043B  0E 01       	ld	c,0x01
1491  043D              l_player_check_stairs_00113:
1492  043D  3E 00       	ld	a, +((_col) & 0xFF)
1493  043F  21 00 00    	ld	hl,_sprite
1494  0442  86          	add	a, (hl)
1495  0443  6F          	ld	l, a
1496  0444  3E 00       	ld	a, +((_col) / 256)
1497  0446  CE 00       	adc	a,0x00
1498  0448  67          	ld	h, a
1499  0449  7E          	ld	a, (hl)
1500  044A  83          	add	a, e
1501  044B  47          	ld	b, a
1502  044C  2A 00 00    	ld	hl,(_sprite)
1503  044F  26 00       	ld	h,0x00
1504  0451  11 00 00    	ld	de,_lin
1505  0454  19          	add	hl,de
1506  0455  7E          	ld	a,(hl)
1507  0456  C6 0F       	add	a,0x0f
1508  0458  57          	ld	d, a
1509  0459  C5          	push	bc
1510  045A  4A          	ld	c, d
1511  045B  C5          	push	bc
1512  045C  CD 00 00    	call	_spr_calc_index
1513  045F  F1          	pop	af
1514  0460  C1          	pop	bc
1515  0461  7D          	ld	a,l
1516  0462  32 00 00    	ld	(_sprite_curr_index),a
1517  0465  5F          	ld	e,a
1518  0466  16 00       	ld	d,0x00
1519  0468  21 00 00    	ld	hl,_scr_map
1520  046B  19          	add	hl,de
1521  046C  7E          	ld	a,(hl)
1522  046D  47          	ld	b,a
1523  046E  D6 38       	sub	a,0x38
1524  0470  38 05       	jr	C,l_player_check_stairs_00114
1525  0472  3E 3C       	ld	a,0x3c
1526  0474  90          	sub	a, b
1527  0475  30 04       	jr	NC,l_player_check_stairs_00115
1528  0477              l_player_check_stairs_00114:
1529  0477  06 00       	ld	b,0x00
1530  0479  18 02       	jr	l_player_check_stairs_00116
1531  047B              l_player_check_stairs_00115:
1532  047B  06 01       	ld	b,0x01
1533  047D              l_player_check_stairs_00116:
1534  047D  79          	ld	a, c
1535  047E  B7          	or	a,a
1536  047F  20 03       	jr	NZ,l_player_check_stairs_00105
1537  0481  B0          	or	a,b
1538  0482  28 10       	jr	Z,l_player_check_stairs_00106
1539  0484              l_player_check_stairs_00105:
1540  0484  21 00 00    	ld	hl,_player_over_stair
1541  0487  7E          	ld	a, (hl)
1542  0488  B7          	or	a, a
1543  0489  20 17       	jr	NZ,l_player_check_stairs_00109
1544  048B  36 01       	ld	(hl),0x01
1545  048D  2E 66       	ld	l,0x66
1546  048F  CD A6 04    	call	_player_tile
1547  0492  18 0E       	jr	l_player_check_stairs_00109
1548  0494              l_player_check_stairs_00106:
1549  0494  21 00 00    	ld	hl,_player_over_stair
1550  0497  7E          	ld	a, (hl)
1551  0498  B7          	or	a, a
1552  0499  28 07       	jr	Z,l_player_check_stairs_00109
1553  049B  36 00       	ld	(hl),0x00
1554  049D  2E 54       	ld	l,0x54
1555  049F  CD A6 04    	call	_player_tile
1556  04A2              l_player_check_stairs_00109:
1557  04A2  33          	inc	sp
1558  04A3  DD E1       	pop	ix
1559  04A5  C9          	ret
1560  04A6              	SECTION code_compiler
1561  04A6              ;	---------------------------------
1562  04A6              ; Function player_tile
1563  04A6              ; ---------------------------------
1564  04A6              _player_tile:
1565  04A6  45          	ld	b, l
1566  04A7  3A 00 00    	ld	a,(_player_over_stair)
1567  04AA  B7          	or	a, a
1568  04AB  28 0D       	jr	Z,l_player_tile_00105
1569  04AD  2A 00 00    	ld	hl,(_sprite)
1570  04B0  26 00       	ld	h,0x00
1571  04B2  01 00 00    	ld	bc,_tile
1572  04B5  09          	add	hl,bc
1573  04B6  36 66       	ld	(hl),0x66
1574  04B8  18 41       	jr	l_player_tile_00107
1575  04BA              l_player_tile_00105:
1576  04BA  78          	ld	a, b
1577  04BB  D6 64       	sub	a,0x64
1578  04BD  20 1F       	jr	NZ,l_player_tile_00102
1579  04BF  2A 00 00    	ld	hl,(_sprite)
1580  04C2  26 00       	ld	h,0x00
1581  04C4  11 00 00    	ld	de,_tile
1582  04C7  19          	add	hl,de
1583  04C8  E5          	push	hl
1584  04C9  3E 01       	ld	a,0x01
1585  04CB  21 00 00    	ld	hl,_sprite
1586  04CE  F5          	push	af
1587  04CF  33          	inc	sp
1588  04D0  7E          	ld	a, (hl)
1589  04D1  48          	ld	c,b
1590  04D2  47          	ld	b,a
1591  04D3  C5          	push	bc
1592  04D4  CD 00 00    	call	_spr_tile_dir
1593  04D7  F1          	pop	af
1594  04D8  33          	inc	sp
1595  04D9  D1          	pop	de
1596  04DA  7D          	ld	a,l
1597  04DB  12          	ld	(de), a
1598  04DC  18 1D       	jr	l_player_tile_00107
1599  04DE              l_player_tile_00102:
1600  04DE  2A 00 00    	ld	hl,(_sprite)
1601  04E1  26 00       	ld	h,0x00
1602  04E3  11 00 00    	ld	de,_tile
1603  04E6  19          	add	hl,de
1604  04E7  E5          	push	hl
1605  04E8  3E 08       	ld	a,0x08
1606  04EA  21 00 00    	ld	hl,_sprite
1607  04ED  F5          	push	af
1608  04EE  33          	inc	sp
1609  04EF  7E          	ld	a, (hl)
1610  04F0  48          	ld	c,b
1611  04F1  47          	ld	b,a
1612  04F2  C5          	push	bc
1613  04F3  CD 00 00    	call	_spr_tile_dir
1614  04F6  F1          	pop	af
1615  04F7  33          	inc	sp
1616  04F8  D1          	pop	de
1617  04F9  7D          	ld	a,l
1618  04FA  12          	ld	(de), a
1619  04FB              l_player_tile_00107:
1620  04FB  C9          	ret
1621  04FC              	SECTION code_compiler
1622  04FC              ;	---------------------------------
1623  04FC              ; Function player_move_input
1624  04FC              ; ---------------------------------
1625  04FC              _player_move_input:
1626  04FC  CD BD 00    	call	_player_check_input
1627  04FF  7D          	ld	a, l
1628  0500  B7          	or	a, a
1629  0501  CA 6F 06    	jp	Z, l_player_move_input_00136
1630  0504  CD 72 06    	call	_player_fire
1631  0507  7D          	ld	a, l
1632  0508  B7          	or	a, a
1633  0509  28 0A       	jr	Z,l_player_move_input_00102
1634  050B  21 00 00    	ld	hl,_dirs
1635  050E  36 00       	ld	(hl),0x00
1636  0510  2E 00       	ld	l,0x00
1637  0512  C3 71 06    	jp	l_player_move_input_00137
1638  0515              l_player_move_input_00102:
1639  0515  21 00 00    	ld	hl,_dirs
1640  0518  CB 7E       	bit	7, (hl)
1641  051A  28 67       	jr	Z,l_player_move_input_00106
1642  051C  21 00 00    	ld	hl,_player_vel_inc
1643  051F  36 01       	ld	(hl),0x01
1644  0521  CD 00 00    	call	_ay_is_playing
1645  0524  7D          	ld	a, l
1646  0525  D6 03       	sub	a,0x03
1647  0527  28 06       	jr	Z,l_player_move_input_00104
1648  0529  21 00 00    	ld	hl,_ay_effect_03
1649  052C  CD 00 00    	call	_ay_fx_play
1650  052F              l_player_move_input_00104:
1651  052F  21 00 00    	ld	hl,_player_over_stair
1652  0532  36 00       	ld	(hl),0x00
1653  0534  CD 00 00    	call	_sound_jump
1654  0537  21 00 00    	ld	hl,_s_state
1655  053A  7E          	ld	a,(hl)
1656  053B  F6 01       	or	a,0x01
1657  053D  E6 FD       	and	a,0xfd
1658  053F  77          	ld	(hl),a
1659  0540  2A 00 00    	ld	hl,(_sprite)
1660  0543  26 00       	ld	h,0x00
1661  0545  01 00 00    	ld	bc,_jump_lin
1662  0548  09          	add	hl,bc
1663  0549  4D          	ld	c,l
1664  054A  44          	ld	b,h
1665  054B  2A 00 00    	ld	hl,(_sprite)
1666  054E  26 00       	ld	h,0x00
1667  0550  11 00 00    	ld	de,_lin
1668  0553  19          	add	hl,de
1669  0554  7E          	ld	a,(hl)
1670  0555  02          	ld	(bc),a
1671  0556  2A 00 00    	ld	hl,(_sprite)
1672  0559  26 00       	ld	h,0x00
1673  055B  01 00 00    	ld	bc,_state
1674  055E  09          	add	hl,bc
1675  055F  3A 00 00    	ld	a,(_s_state)
1676  0562  77          	ld	(hl),a
1677  0563  2E 58       	ld	l,0x58
1678  0565  CD A6 04    	call	_player_tile
1679  0568  2A 00 00    	ld	hl,(_sprite)
1680  056B  26 00       	ld	h,0x00
1681  056D  01 00 00    	ld	bc,_sprite_speed_alt
1682  0570  09          	add	hl,bc
1683  0571  36 02       	ld	(hl),0x02
1684  0573  21 00 00    	ld	hl,_player_slide
1685  0576  36 00       	ld	(hl),0x00
1686  0578  3A 00 00    	ld	a,(_player_vel_y0)
1687  057B  32 00 00    	ld	(_player_vel_y),a
1688  057E  2E 01       	ld	l,0x01
1689  0580  C3 71 06    	jp	l_player_move_input_00137
1690  0583              l_player_move_input_00106:
1691  0583  21 00 00    	ld	hl,_dirs
1692  0586  CB 5E       	bit	3, (hl)
1693  0588  28 33       	jr	Z,l_player_move_input_00110
1694  058A  21 00 00    	ld	hl,_s_state
1695  058D  7E          	ld	a,(hl)
1696  058E  F6 04       	or	a,0x04
1697  0590  E6 F7       	and	a,0xf7
1698  0592  77          	ld	(hl),a
1699  0593  01 00 00    	ld	bc,_state_a+0
1700  0596  79          	ld	a, c
1701  0597  21 00 00    	ld	hl,_sprite
1702  059A  86          	add	a, (hl)
1703  059B  5F          	ld	e, a
1704  059C  78          	ld	a, b
1705  059D  CE 00       	adc	a,0x00
1706  059F  57          	ld	d, a
1707  05A0  1A          	ld	a, (de)
1708  05A1  F6 10       	or	a,0x10
1709  05A3  12          	ld	(de), a
1710  05A4  79          	ld	a, c
1711  05A5  86          	add	a, (hl)
1712  05A6  4F          	ld	c, a
1713  05A7  78          	ld	a, b
1714  05A8  CE 00       	adc	a,0x00
1715  05AA  47          	ld	b, a
1716  05AB  0A          	ld	a, (bc)
1717  05AC  E6 F7       	and	a,0xf7
1718  05AE  02          	ld	(bc), a
1719  05AF  3A 00 00    	ld	a,(_player_over_stair)
1720  05B2  B7          	or	a, a
1721  05B3  28 05       	jr	Z,l_player_move_input_00108
1722  05B5  2E 00       	ld	l,0x00
1723  05B7  CD FE 03    	call	_player_check_stairs
1724  05BA              l_player_move_input_00108:
1725  05BA  CD 00 00    	call	_spr_move_horizontal
1726  05BD              l_player_move_input_00110:
1727  05BD  21 00 00    	ld	hl,_dirs
1728  05C0  CB 56       	bit	2, (hl)
1729  05C2  28 33       	jr	Z,l_player_move_input_00114
1730  05C4  21 00 00    	ld	hl,_s_state
1731  05C7  7E          	ld	a,(hl)
1732  05C8  F6 08       	or	a,0x08
1733  05CA  E6 FB       	and	a,0xfb
1734  05CC  77          	ld	(hl),a
1735  05CD  01 00 00    	ld	bc,_state_a+0
1736  05D0  79          	ld	a, c
1737  05D1  21 00 00    	ld	hl,_sprite
1738  05D4  86          	add	a, (hl)
1739  05D5  5F          	ld	e, a
1740  05D6  78          	ld	a, b
1741  05D7  CE 00       	adc	a,0x00
1742  05D9  57          	ld	d, a
1743  05DA  1A          	ld	a, (de)
1744  05DB  F6 08       	or	a,0x08
1745  05DD  12          	ld	(de), a
1746  05DE  79          	ld	a, c
1747  05DF  86          	add	a, (hl)
1748  05E0  4F          	ld	c, a
1749  05E1  78          	ld	a, b
1750  05E2  CE 00       	adc	a,0x00
1751  05E4  47          	ld	b, a
1752  05E5  0A          	ld	a, (bc)
1753  05E6  E6 EF       	and	a,0xef
1754  05E8  02          	ld	(bc), a
1755  05E9  3A 00 00    	ld	a,(_player_over_stair)
1756  05EC  B7          	or	a, a
1757  05ED  28 05       	jr	Z,l_player_move_input_00112
1758  05EF  2E 00       	ld	l,0x00
1759  05F1  CD FE 03    	call	_player_check_stairs
1760  05F4              l_player_move_input_00112:
1761  05F4  CD 00 00    	call	_spr_move_horizontal
1762  05F7              l_player_move_input_00114:
1763  05F7  21 00 00    	ld	hl,_dirs
1764  05FA  CB 46       	bit	0, (hl)
1765  05FC  28 2B       	jr	Z,l_player_move_input_00124
1766  05FE  2E 00       	ld	l,0x00
1767  0600  CD FE 03    	call	_player_check_stairs
1768  0603  3A 00 00    	ld	a,(_player_over_stair)
1769  0606  B7          	or	a, a
1770  0607  28 0E       	jr	Z,l_player_move_input_00121
1771  0609  CD 00 00    	call	_spr_move_up
1772  060C  7D          	ld	a, l
1773  060D  B7          	or	a, a
1774  060E  28 19       	jr	Z,l_player_move_input_00124
1775  0610  21 00 00    	ld	hl,_player_over_stair
1776  0613  36 00       	ld	(hl),0x00
1777  0615  18 12       	jr	l_player_move_input_00124
1778  0617              l_player_move_input_00121:
1779  0617  21 00 00    	ld	hl,_dirs
1780  061A  CB 5E       	bit	3, (hl)
1781  061C  20 0B       	jr	NZ,l_player_move_input_00124
1782  061E  21 00 00    	ld	hl,_dirs
1783  0621  CB 56       	bit	2, (hl)
1784  0623  20 04       	jr	NZ,l_player_move_input_00124
1785  0625  2E 00       	ld	l,0x00
1786  0627  18 48       	jr	l_player_move_input_00137
1787  0629              l_player_move_input_00124:
1788  0629  21 00 00    	ld	hl,_dirs
1789  062C  CB 4E       	bit	1, (hl)
1790  062E  28 29       	jr	Z,l_player_move_input_00134
1791  0630  CD B8 03    	call	_player_check_stairs_down
1792  0633  3A 00 00    	ld	a,(_player_over_stair)
1793  0636  B7          	or	a, a
1794  0637  28 0E       	jr	Z,l_player_move_input_00131
1795  0639  CD 00 00    	call	_spr_move_down
1796  063C  7D          	ld	a, l
1797  063D  B7          	or	a, a
1798  063E  28 19       	jr	Z,l_player_move_input_00134
1799  0640  21 00 00    	ld	hl,_player_over_stair
1800  0643  36 00       	ld	(hl),0x00
1801  0645  18 12       	jr	l_player_move_input_00134
1802  0647              l_player_move_input_00131:
1803  0647  21 00 00    	ld	hl,_dirs
1804  064A  CB 5E       	bit	3, (hl)
1805  064C  20 0B       	jr	NZ,l_player_move_input_00134
1806  064E  21 00 00    	ld	hl,_dirs
1807  0651  CB 56       	bit	2, (hl)
1808  0653  20 04       	jr	NZ,l_player_move_input_00134
1809  0655  2E 00       	ld	l,0x00
1810  0657  18 18       	jr	l_player_move_input_00137
1811  0659              l_player_move_input_00134:
1812  0659  2A 00 00    	ld	hl,(_sprite)
1813  065C  26 00       	ld	h,0x00
1814  065E  01 00 00    	ld	bc,_state
1815  0661  09          	add	hl,bc
1816  0662  3A 00 00    	ld	a,(_s_state)
1817  0665  77          	ld	(hl),a
1818  0666  2E 54       	ld	l,0x54
1819  0668  CD A6 04    	call	_player_tile
1820  066B  2E 01       	ld	l,0x01
1821  066D  18 02       	jr	l_player_move_input_00137
1822  066F              l_player_move_input_00136:
1823  066F  2E 00       	ld	l,0x00
1824  0671              l_player_move_input_00137:
1825  0671  C9          	ret
1826  0672              	SECTION code_compiler
1827  0672              ;	---------------------------------
1828  0672              ; Function player_fire
1829  0672              ; ---------------------------------
1830  0672              _player_fire:
1831  0672  21 00 00    	ld	hl,_dirs
1832  0675  CB 7E       	bit	7, (hl)
1833  0677  28 13       	jr	Z,l_player_fire_00102
1834  0679  21 00 00    	ld	hl,_dirs
1835  067C  CB 4E       	bit	1, (hl)
1836  067E  28 0C       	jr	Z,l_player_fire_00102
1837  0680  21 07 70    	ld	hl,0x7007
1838  0683  E5          	push	hl
1839  0684  CD 00 00    	call	_game_shoot_fire
1840  0687  F1          	pop	af
1841  0688  2E 01       	ld	l,0x01
1842  068A  18 02       	jr	l_player_fire_00104
1843  068C              l_player_fire_00102:
1844  068C  2E 00       	ld	l,0x00
1845  068E              l_player_fire_00104:
1846  068E  C9          	ret
1847  068F              	SECTION code_compiler
1848  068F              ;	---------------------------------
1849  068F              ; Function player_check_map
1850  068F              ; ---------------------------------
1851  068F              _player_check_map:
1852  068F  2A 00 00    	ld	hl,(_sprite)
1853  0692  26 00       	ld	h,0x00
1854  0694  5D          	ld	e,l
1855  0695  01 00 00    	ld	bc,_col
1856  0698  09          	add	hl,bc
1857  0699  46          	ld	b,(hl)
1858  069A  16 00       	ld	d,0x00
1859  069C  21 00 00    	ld	hl,_lin
1860  069F  19          	add	hl,de
1861  06A0  4E          	ld	c, (hl)
1862  06A1  C5          	push	bc
1863  06A2  CD 00 00    	call	_spr_calc_index
1864  06A5  F1          	pop	af
1865  06A6  7D          	ld	a,l
1866  06A7  32 00 00    	ld	(_sprite_curr_index),a
1867  06AA  2A 00 00    	ld	hl,(_sprite)
1868  06AD  26 00       	ld	h,0x00
1869  06AF  01 00 00    	ld	bc,_col
1870  06B2  09          	add	hl,bc
1871  06B3  4E          	ld	c, (hl)
1872  06B4  3A 00 00    	ld	a,(_sprite)
1873  06B7  5F          	ld	e,a
1874  06B8  16 00       	ld	d,0x00
1875  06BA  21 00 00    	ld	hl,_lin
1876  06BD  19          	add	hl,de
1877  06BE  7E          	ld	a,(hl)
1878  06BF  E6 0F       	and	a,0x0f
1879  06C1  CB 41       	bit	0, c
1880  06C3  20 17       	jr	NZ,l_player_check_map_00108
1881  06C5  B7          	or	a, a
1882  06C6  20 05       	jr	NZ,l_player_check_map_00102
1883  06C8  CD 07 07    	call	_player_pick_item
1884  06CB  18 39       	jr	l_player_check_map_00110
1885  06CD              l_player_check_map_00102:
1886  06CD  CD 07 07    	call	_player_pick_item
1887  06D0  21 00 00    	ld	hl,_sprite_curr_index
1888  06D3  7E          	ld	a, (hl)
1889  06D4  C6 10       	add	a,0x10
1890  06D6  77          	ld	(hl), a
1891  06D7  CD 07 07    	call	_player_pick_item
1892  06DA  18 2A       	jr	l_player_check_map_00110
1893  06DC              l_player_check_map_00108:
1894  06DC  B7          	or	a, a
1895  06DD  20 0C       	jr	NZ,l_player_check_map_00105
1896  06DF  CD 07 07    	call	_player_pick_item
1897  06E2  21 00 00    	ld	hl,_sprite_curr_index
1898  06E5  34          	inc	(hl)
1899  06E6  CD 07 07    	call	_player_pick_item
1900  06E9  18 1B       	jr	l_player_check_map_00110
1901  06EB              l_player_check_map_00105:
1902  06EB  CD 07 07    	call	_player_pick_item
1903  06EE  21 00 00    	ld	hl,_sprite_curr_index
1904  06F1  34          	inc	(hl)
1905  06F2  CD 07 07    	call	_player_pick_item
1906  06F5  21 00 00    	ld	hl,_sprite_curr_index
1907  06F8  7E          	ld	a, (hl)
1908  06F9  C6 0F       	add	a,0x0f
1909  06FB  77          	ld	(hl), a
1910  06FC  CD 07 07    	call	_player_pick_item
1911  06FF  21 00 00    	ld	hl,_sprite_curr_index
1912  0702  34          	inc	(hl)
1913  0703  CD 07 07    	call	_player_pick_item
1914  0706              l_player_check_map_00110:
1915  0706  C9          	ret
1916  0707              	SECTION code_compiler
1917  0707              ;	---------------------------------
1918  0707              ; Function player_pick_item
1919  0707              ; ---------------------------------
1920  0707              _player_pick_item:
1921  0707  CD 00 00    	call	___sdcc_enter_ix
1922  070A  2A 00 00    	ld	hl,(_sprite_curr_index)
1923  070D  F5          	push	af
1924  070E  26 00       	ld	h,0x00
1925  0710  01 00 00    	ld	bc,_scr_map
1926  0713  09          	add	hl,bc
1927  0714  4E          	ld	c,(hl)
1928  0715  3E 27       	ld	a,0x27
1929  0717  91          	sub	a, c
1930  0718  3E 00       	ld	a,0x00
1931  071A  17          	rla
1932  071B  47          	ld	b, a
1933  071C  79          	ld	a, c
1934  071D  D6 18       	sub	a,0x18
1935  071F  DA 0E 08    	jp	C, l_player_pick_item_00107
1936  0722  CB 40       	bit	0, b
1937  0724  C2 0E 08    	jp	NZ, l_player_pick_item_00107
1938  0727  CD 00 00    	call	_ay_reset
1939  072A  21 00 00    	ld	hl,_ay_effect_10
1940  072D  CD 00 00    	call	_ay_fx_play
1941  0730  C5          	push	bc
1942  0731  CD 00 00    	call	_sound_coin
1943  0734  C1          	pop	bc
1944  0735  2A 00 00    	ld	hl,(_sprite_curr_index)
1945  0738  26 00       	ld	h,0x00
1946  073A  11 00 00    	ld	de,_scr_map
1947  073D  19          	add	hl,de
1948  073E  AF          	xor	a,a
1949  073F  77          	ld	(hl),a
1950  0740  3A 00 00    	ld	a,(_sprite_curr_index)
1951  0743  5F          	ld	e,a
1952  0744  16 00       	ld	d,0x00
1953  0746  21 00 00    	ld	hl,_scr_obj
1954  0749  19          	add	hl,de
1955  074A  7E          	ld	a,(hl)
1956  074B  EB          	ex	de,hl
1957  074C  DD 77 FF    	ld	(ix-1),a
1958  074F  3A 00 00    	ld	a,(_scr_curr)
1959  0752  DD 36 FE 01 	ld	(ix-2),0x01
1960  0756  3C          	inc	a
1961  0757  18 04       	jr	l_player_pick_item_00153
1962  0759              l_player_pick_item_00152:
1963  0759  DD CB FE 26 	sla	(ix-2)
1964  075D              l_player_pick_item_00153:
1965  075D  3D          	dec	a
1966  075E  20 F9       	jr	NZ,l_player_pick_item_00152
1967  0760  DD 7E FF    	ld	a,(ix-1)
1968  0763  DD B6 FE    	or	a,(ix-2)
1969  0766  12          	ld	(de), a
1970  0767  3A 00 00    	ld	a,(_sprite_curr_index)
1971  076A  07          	rlca
1972  076B  07          	rlca
1973  076C  07          	rlca
1974  076D  07          	rlca
1975  076E  E6 0F       	and	a,0x0f
1976  0770  07          	rlca
1977  0771  07          	rlca
1978  0772  07          	rlca
1979  0773  07          	rlca
1980  0774  E6 F0       	and	a,0xf0
1981  0776  32 00 00    	ld	(_s_lin1),a
1982  0779  3A 00 00    	ld	a,(_sprite_curr_index)
1983  077C  E6 0F       	and	a,0x0f
1984  077E  87          	add	a, a
1985  077F  32 00 00    	ld	(_s_col1),a
1986  0782  C5          	push	bc
1987  0783  21 00 00    	ld	hl,0x0000
1988  0786  E5          	push	hl
1989  0787  21 78 03    	ld	hl,0x0378
1990  078A  E5          	push	hl
1991  078B  F5          	push	af
1992  078C  33          	inc	sp
1993  078D  3A 00 00    	ld	a,(_s_lin1)
1994  0790  F5          	push	af
1995  0791  33          	inc	sp
1996  0792  CD 00 00    	call	_spr_add_anim
1997  0795  F1          	pop	af
1998  0796  F1          	pop	af
1999  0797  F1          	pop	af
2000  0798  C1          	pop	bc
2001  0799  79          	ld	a,c
2002  079A  FE 1C       	cp	a,0x1c
2003  079C  28 0E       	jr	Z,l_player_pick_item_00101
2004  079E  FE 1D       	cp	a,0x1d
2005  07A0  28 23       	jr	Z,l_player_pick_item_00102
2006  07A2  FE 1E       	cp	a,0x1e
2007  07A4  28 38       	jr	Z,l_player_pick_item_00103
2008  07A6  D6 1F       	sub	a,0x1f
2009  07A8  28 4D       	jr	Z,l_player_pick_item_00104
2010  07AA  18 62       	jr	l_player_pick_item_00107
2011  07AC              l_player_pick_item_00101:
2012  07AC  21 00 00    	ld	hl,_player_keys
2013  07AF  36 01       	ld	(hl),0x01
2014  07B1  21 00 00    	ld	hl,_screen_ink
2015  07B4  36 07       	ld	(hl),0x07
2016  07B6  C5          	push	bc
2017  07B7  21 00 00    	ld	hl,___str_0
2018  07BA  E5          	push	hl
2019  07BB  21 16 03    	ld	hl,0x0316
2020  07BE  E5          	push	hl
2021  07BF  CD 00 00    	call	_zx_print_str
2022  07C2  C1          	pop	bc
2023  07C3  18 49       	jr	l_player_pick_item_00107
2024  07C5              l_player_pick_item_00102:
2025  07C5  21 01 00    	ld	hl, +(_player_keys + 0x0001)
2026  07C8  36 01       	ld	(hl),0x01
2027  07CA  21 00 00    	ld	hl,_screen_ink
2028  07CD  36 02       	ld	(hl),0x02
2029  07CF  C5          	push	bc
2030  07D0  21 00 00    	ld	hl,___str_0
2031  07D3  E5          	push	hl
2032  07D4  21 16 04    	ld	hl,0x0416
2033  07D7  E5          	push	hl
2034  07D8  CD 00 00    	call	_zx_print_str
2035  07DB  C1          	pop	bc
2036  07DC  18 30       	jr	l_player_pick_item_00107
2037  07DE              l_player_pick_item_00103:
2038  07DE  21 02 00    	ld	hl, +(_player_keys + 0x0002)
2039  07E1  36 01       	ld	(hl),0x01
2040  07E3  21 00 00    	ld	hl,_screen_ink
2041  07E6  36 04       	ld	(hl),0x04
2042  07E8  C5          	push	bc
2043  07E9  21 00 00    	ld	hl,___str_0
2044  07EC  E5          	push	hl
2045  07ED  21 16 05    	ld	hl,0x0516
2046  07F0  E5          	push	hl
2047  07F1  CD 00 00    	call	_zx_print_str
2048  07F4  C1          	pop	bc
2049  07F5  18 17       	jr	l_player_pick_item_00107
2050  07F7              l_player_pick_item_00104:
2051  07F7  21 03 00    	ld	hl, +(_player_keys + 0x0003)
2052  07FA  36 01       	ld	(hl),0x01
2053  07FC  21 00 00    	ld	hl,_screen_ink
2054  07FF  36 05       	ld	(hl),0x05
2055  0801  C5          	push	bc
2056  0802  21 00 00    	ld	hl,___str_0
2057  0805  E5          	push	hl
2058  0806  21 16 06    	ld	hl,0x0616
2059  0809  E5          	push	hl
2060  080A  CD 00 00    	call	_zx_print_str
2061  080D  C1          	pop	bc
2062  080E              l_player_pick_item_00107:
2063  080E  CB 40       	bit	0, b
2064  0810  28 11       	jr	Z,l_player_pick_item_00114
2065  0812  79          	ld	a, c
2066  0813  D6 30       	sub	a,0x30
2067  0815  30 0C       	jr	NC,l_player_pick_item_00114
2068  0817  3A 07 00    	ld	a,(_lin + 0x0007)
2069  081A  E6 03       	and	a,0x03
2070  081C  28 05       	jr	Z,l_player_pick_item_00114
2071  081E  2E 06       	ld	l,0x06
2072  0820  CD 00 00    	call	_zx_border_fastcall
2073  0823              l_player_pick_item_00114:
2074  0823  F1          	pop	af
2075  0824  DD E1       	pop	ix
2076  0826  C9          	ret
2077  0827              	SECTION rodata_compiler
2078  0000              ___str_0:
2079  0000  5D          	DEFM "]"
2080  0001  00          	DEFB 0x00
2081  0002              	SECTION code_compiler
2082  0827              ;	---------------------------------
2083  0827              ; Function player_hit_platform
2084  0827              ; ---------------------------------
2085  0827              _player_hit_platform:
2086  0827  3A 00 00    	ld	a,(_player_hit_lin)
2087  082A  B7          	or	a, a
2088  082B  C2 D7 08    	jp	NZ, l_player_hit_platform_00114
2089  082E  2A 00 00    	ld	hl,(_sprite)
2090  0831  26 00       	ld	h,0x00
2091  0833  01 00 00    	ld	bc,_lin
2092  0836  09          	add	hl,bc
2093  0837  4E          	ld	c,(hl)
2094  0838  3E 10       	ld	a,0x10
2095  083A  91          	sub	a, c
2096  083B  D2 D7 08    	jp	NC, l_player_hit_platform_00114
2097  083E  01 00 00    	ld	bc,_scr_map
2098  0841  2A 00 00    	ld	hl,(_index1)
2099  0844  09          	add	hl,bc
2100  0845  7E          	ld	a,(hl)
2101  0846  D6 45       	sub	a,0x45
2102  0848  DA D7 08    	jp	C, l_player_hit_platform_00114
2103  084B  01 00 00    	ld	bc,_spr_timer+0
2104  084E  2A 00 00    	ld	hl,(_sprite)
2105  0851  26 00       	ld	h,0x00
2106  0853  29          	add	hl, hl
2107  0854  09          	add	hl,bc
2108  0855  ED 5B 00 00 	ld	de,(_curr_time)
2109  0859  73          	ld	(hl),e
2110  085A  23          	inc	hl
2111  085B  72          	ld	(hl),d
2112  085C  2A 00 00    	ld	hl,(_sprite)
2113  085F  26 00       	ld	h,0x00
2114  0861  01 00 00    	ld	bc,_lin
2115  0864  09          	add	hl,bc
2116  0865  4E          	ld	c,(hl)
2117  0866  06 00       	ld	b,0x00
2118  0868  79          	ld	a, c
2119  0869  C6 F8       	add	a,0xf8
2120  086B  4F          	ld	c, a
2121  086C  78          	ld	a, b
2122  086D  CE FF       	adc	a,0xff
2123  086F  5F          	ld	e, a
2124  0870  06 04       	ld	b,0x04
2125  0872              l_player_hit_platform_00147:
2126  0872  CB 2B       	sra	e
2127  0874  CB 19       	rr	c
2128  0876  10 FA       	djnz	l_player_hit_platform_00147
2129  0878  79          	ld	a, c
2130  0879  07          	rlca
2131  087A  07          	rlca
2132  087B  07          	rlca
2133  087C  07          	rlca
2134  087D  E6 F0       	and	a,0xf0
2135  087F  C6 08       	add	a,0x08
2136  0881  32 00 00    	ld	(_player_hit_lin),a
2137  0884  2A 00 00    	ld	hl,(_sprite)
2138  0887  26 00       	ld	h,0x00
2139  0889  01 00 00    	ld	bc,_col
2140  088C  09          	add	hl,bc
2141  088D  4E          	ld	c,(hl)
2142  088E  CB 41       	bit	0,c
2143  0890  20 06       	jr	NZ,l_player_hit_platform_00111
2144  0892  21 00 00    	ld	hl,_player_hit_col
2145  0895  71          	ld	(hl), c
2146  0896  18 33       	jr	l_player_hit_platform_00112
2147  0898              l_player_hit_platform_00111:
2148  0898  2A 00 00    	ld	hl,(_sprite)
2149  089B  26 00       	ld	h,0x00
2150  089D  11 00 00    	ld	de,_state
2151  08A0  19          	add	hl,de
2152  08A1  5E          	ld	e, (hl)
2153  08A2  41          	ld	b, c
2154  08A3  04          	inc	b
2155  08A4  0D          	dec	c
2156  08A5  CB 5B       	bit	3, e
2157  08A7  28 12       	jr	Z,l_player_hit_platform_00108
2158  08A9  3A 00 00    	ld	a,(_g_player_hit_right)
2159  08AC  B7          	or	a, a
2160  08AD  28 06       	jr	Z,l_player_hit_platform_00102
2161  08AF  21 00 00    	ld	hl,_player_hit_col
2162  08B2  70          	ld	(hl), b
2163  08B3  18 16       	jr	l_player_hit_platform_00112
2164  08B5              l_player_hit_platform_00102:
2165  08B5  21 00 00    	ld	hl,_player_hit_col
2166  08B8  71          	ld	(hl), c
2167  08B9  18 10       	jr	l_player_hit_platform_00112
2168  08BB              l_player_hit_platform_00108:
2169  08BB  3A 00 00    	ld	a,(_g_player_hit_left)
2170  08BE  B7          	or	a, a
2171  08BF  28 06       	jr	Z,l_player_hit_platform_00105
2172  08C1  21 00 00    	ld	hl,_player_hit_col
2173  08C4  71          	ld	(hl), c
2174  08C5  18 04       	jr	l_player_hit_platform_00112
2175  08C7              l_player_hit_platform_00105:
2176  08C7  21 00 00    	ld	hl,_player_hit_col
2177  08CA  70          	ld	(hl), b
2178  08CB              l_player_hit_platform_00112:
2179  08CB  2E 01       	ld	l,0x01
2180  08CD  CD 00 00    	call	_spr_brick_anim
2181  08D0  CD 00 00    	call	_sound_hit_brick
2182  08D3  2E 01       	ld	l,0x01
2183  08D5  18 02       	jr	l_player_hit_platform_00117
2184  08D7              l_player_hit_platform_00114:
2185  08D7  2E 00       	ld	l,0x00
2186  08D9              l_player_hit_platform_00117:
2187  08D9  C9          	ret
2188  08DA              	SECTION code_compiler
2189  08DA              ;	---------------------------------
2190  08DA              ; Function player_hit_platform_clear
2191  08DA              ; ---------------------------------
2192  08DA              _player_hit_platform_clear:
2193  08DA  2A 00 00    	ld	hl,(_sprite)
2194  08DD  26 00       	ld	h,0x00
2195  08DF  29          	add	hl, hl
2196  08E0  11 00 00    	ld	de,_spr_timer
2197  08E3  19          	add	hl, de
2198  08E4  4E          	ld	c, (hl)
2199  08E5  23          	inc	hl
2200  08E6  46          	ld	b, (hl)
2201  08E7  21 04 00    	ld	hl,0x0004
2202  08EA  E5          	push	hl
2203  08EB  C5          	push	bc
2204  08EC  CD 00 00    	call	_game_check_time
2205  08EF  F1          	pop	af
2206  08F0  F1          	pop	af
2207  08F1  7D          	ld	a, l
2208  08F2  B7          	or	a, a
2209  08F3  C8          	ret	Z
2210  08F4  2A FF FF    	ld	hl,(_player_hit_col - 1)
2211  08F7  3A 00 00    	ld	a,(_player_hit_lin)
2212  08FA  6F          	ld	l,a
2213  08FB  E5          	push	hl
2214  08FC  CD 00 00    	call	_spr_calc_index
2215  08FF  F1          	pop	af
2216  0900  22 00 00    	ld	(_index1),hl
2217  0903  2E 00       	ld	l,0x00
2218  0905  CD 00 00    	call	_spr_brick_anim
2219  0908  21 00 00    	ld	hl,_player_hit_lin
2220  090B  36 00       	ld	(hl),0x00
2221  090D  21 00 00    	ld	hl,_player_hit_col
2222  0910  36 00       	ld	(hl),0x00
2223  0912  C9          	ret
2224  0913              	SECTION code_compiler
2225  0913              ;	---------------------------------
2226  0913              ; Function player_score_add
2227  0913              ; ---------------------------------
2228  0913              _player_score_add:
2229  0913  ED 4B 00 00 	ld	bc,(_player_score)
2230  0917  09          	add	hl,bc
2231  0918  22 00 00    	ld	(_player_score),hl
2232  091B  3A 00 00    	ld	a,(_game_score_top)
2233  091E  21 00 00    	ld	hl,_player_score
2234  0921  96          	sub	a, (hl)
2235  0922  3A 01 00    	ld	a,(_game_score_top + 1)
2236  0925  23          	inc	hl
2237  0926  9E          	sbc	a, (hl)
2238  0927  D2 00 00    	jp	NC,_game_print_score
2239  092A  2A 00 00    	ld	hl,(_player_score)
2240  092D  22 00 00    	ld	(_game_score_top),hl
2241  0930  C3 00 00    	jp  _game_print_score
2242  0933              	SECTION code_compiler
2243  0933              ;	---------------------------------
2244  0933              ; Function player_check_floor
2245  0933              ; ---------------------------------
2246  0933              _player_check_floor:
2247  0933  CD 00 00    	call	___sdcc_enter_ix
2248  0936  3B          	dec	sp
2249  0937  2A 00 00    	ld	hl,(_sprite)
2250  093A  26 00       	ld	h,0x00
2251  093C  01 00 00    	ld	bc,_col
2252  093F  09          	add	hl,bc
2253  0940  56          	ld	d, (hl)
2254  0941  2A 00 00    	ld	hl,(_sprite)
2255  0944  26 00       	ld	h,0x00
2256  0946  01 00 00    	ld	bc,_lin
2257  0949  09          	add	hl,bc
2258  094A  7E          	ld	a,(hl)
2259  094B  C6 10       	add	a,0x10
2260  094D  5F          	ld	e, a
2261  094E  D5          	push	de
2262  094F  CD 00 00    	call	_spr_calc_index
2263  0952  F1          	pop	af
2264  0953  4D          	ld	c, l
2265  0954  44          	ld	b, h
2266  0955  21 00 00    	ld	hl,_scr_map
2267  0958  09          	add	hl, bc
2268  0959  7E          	ld	a, (hl)
2269  095A  DD 77 FF    	ld	(ix-1),a
2270  095D  2A 00 00    	ld	hl,(_sprite)
2271  0960  26 00       	ld	h,0x00
2272  0962  11 00 00    	ld	de,_col
2273  0965  19          	add	hl,de
2274  0966  7E          	ld	a,(hl)
2275  0967  0F          	rrca
2276  0968  38 04       	jr	C,l_player_check_floor_00102
2277  096A  0E 01       	ld	c,0x01
2278  096C  18 06       	jr	l_player_check_floor_00103
2279  096E              l_player_check_floor_00102:
2280  096E  03          	inc	bc
2281  096F  21 00 00    	ld	hl,_scr_map
2282  0972  09          	add	hl, bc
2283  0973  4E          	ld	c, (hl)
2284  0974              l_player_check_floor_00103:
2285  0974  3A 00 00    	ld	a,(_s_lin0)
2286  0977  D6 90       	sub	a,0x90
2287  0979  20 04       	jr	NZ,l_player_check_floor_00105
2288  097B  DD 36 FF 3C 	ld	(ix-1),0x3c
2289  097F              l_player_check_floor_00105:
2290  097F  DD 7E FF    	ld	a,(ix-1)
2291  0982  D6 30       	sub	a,0x30
2292  0984  38 07       	jr	C,l_player_check_floor_00110
2293  0986  DD 7E FF    	ld	a,(ix-1)
2294  0989  D6 54       	sub	a,0x54
2295  098B  38 1E       	jr	C,l_player_check_floor_00111
2296  098D              l_player_check_floor_00110:
2297  098D  79          	ld	a,c
2298  098E  FE 30       	cp	a,0x30
2299  0990  38 04       	jr	C,l_player_check_floor_00106
2300  0992  D6 54       	sub	a,0x54
2301  0994  38 15       	jr	C,l_player_check_floor_00111
2302  0996              l_player_check_floor_00106:
2303  0996  2A 00 00    	ld	hl,(_sprite)
2304  0999  26 00       	ld	h,0x00
2305  099B  01 00 00    	ld	bc,_sprite_speed_alt
2306  099E  09          	add	hl,bc
2307  099F  36 02       	ld	(hl),0x02
2308  09A1  21 00 00    	ld	hl,_s_state
2309  09A4  CB CE       	set	1, (hl)
2310  09A6  2E 00       	ld	l,0x00
2311  09A8  CD FE 03    	call	_player_check_stairs
2312  09AB              l_player_check_floor_00111:
2313  09AB  33          	inc	sp
2314  09AC  DD E1       	pop	ix
2315  09AE  C9          	ret
2316  09AF              	SECTION code_compiler
2317  09AF              ;	---------------------------------
2318  09AF              ; Function player_move_jump
2319  09AF              ; ---------------------------------
2320  09AF              _player_move_jump:
2321  09AF  CD 00 00    	call	___sdcc_enter_ix
2322  09B2  3B          	dec	sp
2323  09B3  21 00 00    	ld	hl,_game_gravity
2324  09B6  4E          	ld	c, (hl)
2325  09B7  21 00 00    	ld	hl,_player_vel_y
2326  09BA  7E          	ld	a, (hl)
2327  09BB  81          	add	a, c
2328  09BC  77          	ld	(hl), a
2329  09BD  21 00 00    	ld	hl,_sprite_on_air
2330  09C0  36 01       	ld	(hl),0x01
2331  09C2  3A 00 00    	ld	a,(_player_vel_inc)
2332  09C5  B7          	or	a, a
2333  09C6  28 24       	jr	Z,l_player_move_jump_00106
2334  09C8  21 00 00    	ld	hl,_dirs
2335  09CB  CB 7E       	bit	7, (hl)
2336  09CD  20 1D       	jr	NZ,l_player_move_jump_00106
2337  09CF  3A 00 00    	ld	a,(_player_vel_y1)
2338  09D2  21 00 00    	ld	hl,_player_vel_y
2339  09D5  96          	sub	a, (hl)
2340  09D6  E2 DB 09    	jp	PO, l_player_move_jump_00247
2341  09D9  EE 80       	xor	a,0x80
2342  09DB              l_player_move_jump_00247:
2343  09DB  F2 EC 09    	jp	P, l_player_move_jump_00106
2344  09DE  21 00 00    	ld	hl,_player_vel_y
2345  09E1  CB 7E       	bit	7,(hl)
2346  09E3  28 07       	jr	Z,l_player_move_jump_00106
2347  09E5  36 00       	ld	(hl),0x00
2348  09E7  21 00 00    	ld	hl,_player_vel_inc
2349  09EA  36 00       	ld	(hl),0x00
2350  09EC              l_player_move_jump_00106:
2351  09EC  3E 78       	ld	a,0x78
2352  09EE  21 00 00    	ld	hl,_player_vel_y
2353  09F1  96          	sub	a, (hl)
2354  09F2  E2 F7 09    	jp	PO, l_player_move_jump_00248
2355  09F5  EE 80       	xor	a,0x80
2356  09F7              l_player_move_jump_00248:
2357  09F7  F2 FF 09    	jp	P, l_player_move_jump_00108
2358  09FA  21 00 00    	ld	hl,_player_vel_y
2359  09FD  36 78       	ld	(hl),0x78
2360  09FF              l_player_move_jump_00108:
2361  09FF  21 00 00    	ld	hl,_player_vel_y
2362  0A02  7E          	ld	a, (hl)
2363  0A03  EE 80       	xor	a,0x80
2364  0A05  D6 08       	sub	a,0x08
2365  0A07  30 02       	jr	NC,l_player_move_jump_00110
2366  0A09  36 88       	ld	(hl),0x88
2367  0A0B              l_player_move_jump_00110:
2368  0A0B  3A 00 00    	ld	a,(_player_vel_y)
2369  0A0E  5F          	ld	e,a
2370  0A0F  17          	rla
2371  0A10  9F          	sbc	a, a
2372  0A11  57          	ld	d, a
2373  0A12  CB 43       	bit	0,e
2374  0A14  21 00 00    	ld	hl,_s_lin1
2375  0A17  73          	ld	(hl),e
2376  0A18  28 04       	jr	Z,l_player_move_jump_00112
2377  0A1A  21 00 00    	ld	hl,_s_lin1
2378  0A1D  35          	dec	(hl)
2379  0A1E              l_player_move_jump_00112:
2380  0A1E  2A 00 00    	ld	hl,(_sprite)
2381  0A21  26 00       	ld	h,0x00
2382  0A23  01 00 00    	ld	bc,_lin
2383  0A26  09          	add	hl,bc
2384  0A27  7E          	ld	a,(hl)
2385  0A28  DD 77 FF    	ld	(ix-1),a
2386  0A2B  4D          	ld	c,l
2387  0A2C  44          	ld	b,h
2388  0A2D  21 00 00    	ld	hl,_s_lin1
2389  0A30  86          	add	a, (hl)
2390  0A31  77          	ld	(hl), a
2391  0A32  3E 90       	ld	a,0x90
2392  0A34  96          	sub	a, (hl)
2393  0A35  30 0E       	jr	NC,l_player_move_jump_00117
2394  0A37  3E C8       	ld	a,0xc8
2395  0A39  96          	sub	a, (hl)
2396  0A3A  30 04       	jr	NC,l_player_move_jump_00114
2397  0A3C  36 00       	ld	(hl),0x00
2398  0A3E  18 05       	jr	l_player_move_jump_00117
2399  0A40              l_player_move_jump_00114:
2400  0A40  21 00 00    	ld	hl,_s_lin1
2401  0A43  36 90       	ld	(hl),0x90
2402  0A45              l_player_move_jump_00117:
2403  0A45  3A 00 00    	ld	a,(_s_lin0)
2404  0A48  07          	rlca
2405  0A49  07          	rlca
2406  0A4A  07          	rlca
2407  0A4B  07          	rlca
2408  0A4C  E6 0F       	and	a,0x0f
2409  0A4E  DD 77 FF    	ld	(ix-1),a
2410  0A51  CB 7A       	bit	7, d
2411  0A53  28 73       	jr	Z,l_player_move_jump_00140
2412  0A55  21 00 00    	ld	hl,_s_state
2413  0A58  7E          	ld	a,(hl)
2414  0A59  F6 01       	or	a,0x01
2415  0A5B  E6 FD       	and	a,0xfd
2416  0A5D  77          	ld	(hl),a
2417  0A5E  21 00 00    	ld	hl,_s_lin1
2418  0A61  DD 7E FF    	ld	a,(ix-1)
2419  0A64  96          	sub	a,(hl)
2420  0A65  20 04       	jr	NZ,l_player_move_jump_00250
2421  0A67  3E 01       	ld	a,0x01
2422  0A69  18 01       	jr	l_player_move_jump_00251
2423  0A6B              l_player_move_jump_00250:
2424  0A6B  AF          	xor	a,a
2425  0A6C              l_player_move_jump_00251:
2426  0A6C  EE 01       	xor	a,0x01
2427  0A6E  28 51       	jr	Z,l_player_move_jump_00124
2428  0A70  2A 00 00    	ld	hl,(_sprite)
2429  0A73  26 00       	ld	h,0x00
2430  0A75  01 00 00    	ld	bc,_col
2431  0A78  09          	add	hl,bc
2432  0A79  7E          	ld	a,(hl)
2433  0A7A  F5          	push	af
2434  0A7B  33          	inc	sp
2435  0A7C  3A 00 00    	ld	a,(_s_lin1)
2436  0A7F  F5          	push	af
2437  0A80  33          	inc	sp
2438  0A81  CD 00 00    	call	_game_check_map
2439  0A84  F1          	pop	af
2440  0A85  7C          	ld	a,h
2441  0A86  B5          	or	a,l
2442  0A87  28 28       	jr	Z,l_player_move_jump_00121
2443  0A89  CD 27 08    	call	_player_hit_platform
2444  0A8C  7D          	ld	a, l
2445  0A8D  B7          	or	a, a
2446  0A8E  28 19       	jr	Z,l_player_move_jump_00119
2447  0A90  2A 00 00    	ld	hl,(_sprite)
2448  0A93  26 00       	ld	h,0x00
2449  0A95  01 00 00    	ld	bc,_lin
2450  0A98  09          	add	hl,bc
2451  0A99  7E          	ld	a,(hl)
2452  0A9A  4D          	ld	c,l
2453  0A9B  44          	ld	b,h
2454  0A9C  07          	rlca
2455  0A9D  07          	rlca
2456  0A9E  07          	rlca
2457  0A9F  07          	rlca
2458  0AA0  E6 0F       	and	a,0x0f
2459  0AA2  07          	rlca
2460  0AA3  07          	rlca
2461  0AA4  07          	rlca
2462  0AA5  07          	rlca
2463  0AA6  E6 F0       	and	a,0xf0
2464  0AA8  02          	ld	(bc), a
2465  0AA9              l_player_move_jump_00119:
2466  0AA9  21 00 00    	ld	hl,_player_vel_y
2467  0AAC  36 00       	ld	(hl),0x00
2468  0AAE  C3 88 0B    	jp	l_player_move_jump_00141
2469  0AB1              l_player_move_jump_00121:
2470  0AB1  2A 00 00    	ld	hl,(_sprite)
2471  0AB4  26 00       	ld	h,0x00
2472  0AB6  01 00 00    	ld	bc,_lin
2473  0AB9  09          	add	hl,bc
2474  0ABA  3A 00 00    	ld	a,(_s_lin1)
2475  0ABD  77          	ld	(hl),a
2476  0ABE  C3 88 0B    	jp	l_player_move_jump_00141
2477  0AC1              l_player_move_jump_00124:
2478  0AC1  3A 00 00    	ld	a,(_s_lin1)
2479  0AC4  02          	ld	(bc), a
2480  0AC5  C3 88 0B    	jp	l_player_move_jump_00141
2481  0AC8              l_player_move_jump_00140:
2482  0AC8  21 00 00    	ld	hl,_s_state
2483  0ACB  7E          	ld	a,(hl)
2484  0ACC  F6 02       	or	a,0x02
2485  0ACE  E6 FE       	and	a,0xfe
2486  0AD0  77          	ld	(hl),a
2487  0AD1  21 00 00    	ld	hl,_s_lin1
2488  0AD4  7E          	ld	a, (hl)
2489  0AD5  C6 10       	add	a,0x10
2490  0AD7  77          	ld	(hl), a
2491  0AD8  DD 7E FF    	ld	a,(ix-1)
2492  0ADB  96          	sub	a,(hl)
2493  0ADC  20 04       	jr	NZ,l_player_move_jump_00252
2494  0ADE  3E 01       	ld	a,0x01
2495  0AE0  18 01       	jr	l_player_move_jump_00253
2496  0AE2              l_player_move_jump_00252:
2497  0AE2  AF          	xor	a,a
2498  0AE3              l_player_move_jump_00253:
2499  0AE3  EE 01       	xor	a,0x01
2500  0AE5  CA 80 0B    	jp	Z, l_player_move_jump_00137
2501  0AE8  2A 00 00    	ld	hl,(_sprite)
2502  0AEB  26 00       	ld	h,0x00
2503  0AED  01 00 00    	ld	bc,_col
2504  0AF0  09          	add	hl,bc
2505  0AF1  7E          	ld	a,(hl)
2506  0AF2  F5          	push	af
2507  0AF3  33          	inc	sp
2508  0AF4  3A 00 00    	ld	a,(_s_lin1)
2509  0AF7  F5          	push	af
2510  0AF8  33          	inc	sp
2511  0AF9  CD 00 00    	call	_game_check_map
2512  0AFC  F1          	pop	af
2513  0AFD  45          	ld	b, l
2514  0AFE  5C          	ld	e, h
2515  0AFF  21 00 00    	ld	hl,_s_lin1
2516  0B02  7E          	ld	a, (hl)
2517  0B03  C6 F0       	add	a,0xf0
2518  0B05  4F          	ld	c, a
2519  0B06  7B          	ld	a, e
2520  0B07  B0          	or	a,b
2521  0B08  28 63       	jr	Z,l_player_move_jump_00134
2522  0B0A  71          	ld	(hl), c
2523  0B0B  2E 00       	ld	l,0x00
2524  0B0D  CD FE 03    	call	_player_check_stairs
2525  0B10  3A 00 00    	ld	a,(_player_over_stair)
2526  0B13  B7          	or	a, a
2527  0B14  20 05       	jr	NZ,l_player_move_jump_00127
2528  0B16  2E 01       	ld	l,0x01
2529  0B18  CD FE 03    	call	_player_check_stairs
2530  0B1B              l_player_move_jump_00127:
2531  0B1B  3A 00 00    	ld	a,(_player_over_stair)
2532  0B1E  B7          	or	a, a
2533  0B1F  20 31       	jr	NZ,l_player_move_jump_00132
2534  0B21  21 00 00    	ld	hl,_s_lin1
2535  0B24  7E          	ld	a, (hl)
2536  0B25  07          	rlca
2537  0B26  07          	rlca
2538  0B27  07          	rlca
2539  0B28  07          	rlca
2540  0B29  E6 0F       	and	a,0x0f
2541  0B2B  07          	rlca
2542  0B2C  07          	rlca
2543  0B2D  07          	rlca
2544  0B2E  07          	rlca
2545  0B2F  E6 F0       	and	a,0xf0
2546  0B31  77          	ld	(hl), a
2547  0B32  2A 00 00    	ld	hl,(_sprite)
2548  0B35  26 00       	ld	h,0x00
2549  0B37  01 00 00    	ld	bc,_lin
2550  0B3A  09          	add	hl,bc
2551  0B3B  5E          	ld	e,(hl)
2552  0B3C  4D          	ld	c,l
2553  0B3D  44          	ld	b,h
2554  0B3E  21 00 00    	ld	hl,_s_lin1
2555  0B41  7E          	ld	a, (hl)
2556  0B42  93          	sub	a, e
2557  0B43  30 09       	jr	NC,l_player_move_jump_00129
2558  0B45  7E          	ld	a, (hl)
2559  0B46  C6 10       	add	a,0x10
2560  0B48  02          	ld	(bc), a
2561  0B49  2E 00       	ld	l,0x00
2562  0B4B  C3 D0 0B    	jp	l_player_move_jump_00151
2563  0B4E              l_player_move_jump_00129:
2564  0B4E  3A 00 00    	ld	a,(_s_lin1)
2565  0B51  02          	ld	(bc), a
2566  0B52              l_player_move_jump_00132:
2567  0B52  21 00 00    	ld	hl,_player_vel_y
2568  0B55  36 00       	ld	(hl),0x00
2569  0B57  21 00 00    	ld	hl,_s_state
2570  0B5A  7E          	ld	a,(hl)
2571  0B5B  E6 FC       	and	a,+(0xfd&0xfe)
2572  0B5D  77          	ld	(hl),a
2573  0B5E  2A 00 00    	ld	hl,(_sprite)
2574  0B61  26 00       	ld	h,0x00
2575  0B63  01 00 00    	ld	bc,_colint
2576  0B66  09          	add	hl,bc
2577  0B67  AF          	xor	a,a
2578  0B68  77          	ld	(hl),a
2579  0B69  2E 01       	ld	l,0x01
2580  0B6B  18 63       	jr	l_player_move_jump_00151
2581  0B6D              l_player_move_jump_00134:
2582  0B6D  21 00 00    	ld	hl,_s_lin1
2583  0B70  71          	ld	(hl), c
2584  0B71  2A 00 00    	ld	hl,(_sprite)
2585  0B74  26 00       	ld	h,0x00
2586  0B76  01 00 00    	ld	bc,_lin
2587  0B79  09          	add	hl,bc
2588  0B7A  3A 00 00    	ld	a,(_s_lin1)
2589  0B7D  77          	ld	(hl),a
2590  0B7E  18 08       	jr	l_player_move_jump_00141
2591  0B80              l_player_move_jump_00137:
2592  0B80  21 00 00    	ld	hl,_s_lin1
2593  0B83  7E          	ld	a, (hl)
2594  0B84  C6 F0       	add	a,0xf0
2595  0B86  77          	ld	(hl),a
2596  0B87  02          	ld	(bc), a
2597  0B88              l_player_move_jump_00141:
2598  0B88  21 00 00    	ld	hl,_s_state
2599  0B8B  CB 5E       	bit	3, (hl)
2600  0B8D  20 27       	jr	NZ,l_player_move_jump_00147
2601  0B8F  21 00 00    	ld	hl,_s_state
2602  0B92  CB 56       	bit	2, (hl)
2603  0B94  20 20       	jr	NZ,l_player_move_jump_00147
2604  0B96  21 00 00    	ld	hl,_dirs
2605  0B99  CB 56       	bit	2, (hl)
2606  0B9B  28 09       	jr	Z,l_player_move_jump_00143
2607  0B9D  21 00 00    	ld	hl,_s_state
2608  0BA0  7E          	ld	a,(hl)
2609  0BA1  F6 08       	or	a,0x08
2610  0BA3  E6 FB       	and	a,0xfb
2611  0BA5  77          	ld	(hl),a
2612  0BA6              l_player_move_jump_00143:
2613  0BA6  21 00 00    	ld	hl,_dirs
2614  0BA9  CB 5E       	bit	3, (hl)
2615  0BAB  28 09       	jr	Z,l_player_move_jump_00147
2616  0BAD  21 00 00    	ld	hl,_s_state
2617  0BB0  7E          	ld	a,(hl)
2618  0BB1  F6 04       	or	a,0x04
2619  0BB3  E6 F7       	and	a,0xf7
2620  0BB5  77          	ld	(hl),a
2621  0BB6              l_player_move_jump_00147:
2622  0BB6  21 00 00    	ld	hl,_sprite_horizontal_check
2623  0BB9  36 01       	ld	(hl),0x01
2624  0BBB  CD 00 00    	call	_spr_move_horizontal
2625  0BBE  7D          	ld	a, l
2626  0BBF  B7          	or	a, a
2627  0BC0  28 07       	jr	Z,l_player_move_jump_00150
2628  0BC2  21 00 00    	ld	hl,_s_state
2629  0BC5  7E          	ld	a,(hl)
2630  0BC6  E6 F3       	and	a,+(0xf7&0xfb)
2631  0BC8  77          	ld	(hl),a
2632  0BC9              l_player_move_jump_00150:
2633  0BC9  21 00 00    	ld	hl,_sprite_horizontal_check
2634  0BCC  36 00       	ld	(hl),0x00
2635  0BCE  2E 00       	ld	l,0x00
2636  0BD0              l_player_move_jump_00151:
2637  0BD0  33          	inc	sp
2638  0BD1  DD E1       	pop	ix
2639  0BD3  C9          	ret
2640  0BD4              	SECTION code_compiler
2641  0BD4              ;	---------------------------------
2642  0BD4              ; Function player_open_door
2643  0BD4              ; ---------------------------------
2644  0BD4              _player_open_door:
2645  0BD4  CD 00 00    	call	___sdcc_enter_ix
2646  0BD7  0E 00       	ld	c,0x00
2647  0BD9  DD 7E 06    	ld	a,(ix+6)
2648  0BDC  D6 3C       	sub	a,0x3c
2649  0BDE  28 17       	jr	Z,l_player_open_door_00101
2650  0BE0  DD 7E 06    	ld	a,(ix+6)
2651  0BE3  D6 3D       	sub	a,0x3d
2652  0BE5  28 1F       	jr	Z,l_player_open_door_00104
2653  0BE7  DD 7E 06    	ld	a,(ix+6)
2654  0BEA  D6 3E       	sub	a,0x3e
2655  0BEC  28 27       	jr	Z,l_player_open_door_00107
2656  0BEE  DD 7E 06    	ld	a,(ix+6)
2657  0BF1  D6 3F       	sub	a,0x3f
2658  0BF3  28 2F       	jr	Z,l_player_open_door_00110
2659  0BF5  18 3A       	jr	l_player_open_door_00113
2660  0BF7              l_player_open_door_00101:
2661  0BF7  3A 00 00    	ld	a,(_player_keys)
2662  0BFA  B7          	or	a, a
2663  0BFB  28 34       	jr	Z,l_player_open_door_00113
2664  0BFD  2E 07       	ld	l,0x07
2665  0BFF  CD 00 00    	call	_zx_border_fastcall
2666  0C02  0E 01       	ld	c,0x01
2667  0C04  18 2B       	jr	l_player_open_door_00113
2668  0C06              l_player_open_door_00104:
2669  0C06  3A 01 00    	ld	a,(_player_keys + 0x0001)
2670  0C09  B7          	or	a, a
2671  0C0A  28 25       	jr	Z,l_player_open_door_00113
2672  0C0C  2E 02       	ld	l,0x02
2673  0C0E  CD 00 00    	call	_zx_border_fastcall
2674  0C11  0E 01       	ld	c,0x01
2675  0C13  18 1C       	jr	l_player_open_door_00113
2676  0C15              l_player_open_door_00107:
2677  0C15  3A 02 00    	ld	a,(_player_keys + 0x0002)
2678  0C18  B7          	or	a, a
2679  0C19  28 16       	jr	Z,l_player_open_door_00113
2680  0C1B  2E 04       	ld	l,0x04
2681  0C1D  CD 00 00    	call	_zx_border_fastcall
2682  0C20  0E 01       	ld	c,0x01
2683  0C22  18 0D       	jr	l_player_open_door_00113
2684  0C24              l_player_open_door_00110:
2685  0C24  3A 03 00    	ld	a,(_player_keys + 0x0003)
2686  0C27  B7          	or	a, a
2687  0C28  28 07       	jr	Z,l_player_open_door_00113
2688  0C2A  2E 05       	ld	l,0x05
2689  0C2C  CD 00 00    	call	_zx_border_fastcall
2690  0C2F  0E 01       	ld	c,0x01
2691  0C31              l_player_open_door_00113:
2692  0C31  79          	ld	a, c
2693  0C32  B7          	or	a, a
2694  0C33  28 37       	jr	Z,l_player_open_door_00116
2695  0C35  3E 00       	ld	a, +((_scr_map) & 0xFF)
2696  0C37  DD 86 04    	add	a,(ix+4)
2697  0C3A  4F          	ld	c, a
2698  0C3B  3E 00       	ld	a, +((_scr_map) / 256)
2699  0C3D  DD 8E 05    	adc	a,(ix+5)
2700  0C40  47          	ld	b, a
2701  0C41  AF          	xor	a, a
2702  0C42  02          	ld	(bc), a
2703  0C43  3E 00       	ld	a, +((_scr_obj) & 0xFF)
2704  0C45  DD 86 04    	add	a,(ix+4)
2705  0C48  4F          	ld	c, a
2706  0C49  3E 00       	ld	a, +((_scr_obj) / 256)
2707  0C4B  DD 8E 05    	adc	a,(ix+5)
2708  0C4E  47          	ld	b, a
2709  0C4F  0A          	ld	a, (bc)
2710  0C50  5F          	ld	e, a
2711  0C51  3A 00 00    	ld	a,(_scr_curr)
2712  0C54  3C          	inc	a
2713  0C55  16 01       	ld	d,0x01
2714  0C57  18 02       	jr	l_player_open_door_00159
2715  0C59              l_player_open_door_00158:
2716  0C59  CB 22       	sla	d
2717  0C5B              l_player_open_door_00159:
2718  0C5B  3D          	dec	a
2719  0C5C  20 FB       	jr	NZ,l_player_open_door_00158
2720  0C5E  7B          	ld	a, e
2721  0C5F  B2          	or	a, d
2722  0C60  02          	ld	(bc), a
2723  0C61  DD 6E 04    	ld	l,(ix+4)
2724  0C64  DD 66 05    	ld	h,(ix+5)
2725  0C67  E5          	push	hl
2726  0C68  CD 00 00    	call	_spr_draw_index
2727  0C6B  F1          	pop	af
2728  0C6C              l_player_open_door_00116:
2729  0C6C  DD E1       	pop	ix
2730  0C6E  C9          	ret
2731  0C6F              	SECTION IGNORE
2732  0000              
