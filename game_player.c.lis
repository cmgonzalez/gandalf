1     0000              MODULE game_player_c
2     0000              
3     0000              ;--------------------------------------------------------
4     0000              ; File Created by SDCC : free open source ANSI-C Compiler
5     0000              ; Version 3.6.5 #9958 (Mac OS X i386)
6     0000              ;--------------------------------------------------------
7     0000              ; Processed by Z88DK
8     0000              ;--------------------------------------------------------
9     0000              
10    0000              	EXTERN __divschar
11    0000              	EXTERN __divschar_callee
12    0000              	EXTERN __divsint
13    0000              	EXTERN __divsint_callee
14    0000              	EXTERN __divslong
15    0000              	EXTERN __divslong_callee
16    0000              	EXTERN __divslonglong
17    0000              	EXTERN __divslonglong_callee
18    0000              	EXTERN __divsuchar
19    0000              	EXTERN __divsuchar_callee
20    0000              	EXTERN __divuchar
21    0000              	EXTERN __divuchar_callee
22    0000              	EXTERN __divuint
23    0000              	EXTERN __divuint_callee
24    0000              	EXTERN __divulong
25    0000              	EXTERN __divulong_callee
26    0000              	EXTERN __divulonglong
27    0000              	EXTERN __divulonglong_callee
28    0000              	EXTERN __divuschar
29    0000              	EXTERN __divuschar_callee
30    0000              	EXTERN __modschar
31    0000              	EXTERN __modschar_callee
32    0000              	EXTERN __modsint
33    0000              	EXTERN __modsint_callee
34    0000              	EXTERN __modslong
35    0000              	EXTERN __modslong_callee
36    0000              	EXTERN __modslonglong
37    0000              	EXTERN __modslonglong_callee
38    0000              	EXTERN __modsuchar
39    0000              	EXTERN __modsuchar_callee
40    0000              	EXTERN __moduchar
41    0000              	EXTERN __moduchar_callee
42    0000              	EXTERN __moduint
43    0000              	EXTERN __moduint_callee
44    0000              	EXTERN __modulong
45    0000              	EXTERN __modulong_callee
46    0000              	EXTERN __modulonglong
47    0000              	EXTERN __modulonglong_callee
48    0000              	EXTERN __moduschar
49    0000              	EXTERN __moduschar_callee
50    0000              	EXTERN __mulint
51    0000              	EXTERN __mulint_callee
52    0000              	EXTERN __mullong
53    0000              	EXTERN __mullong_callee
54    0000              	EXTERN __mullonglong
55    0000              	EXTERN __mullonglong_callee
56    0000              	EXTERN __mulschar
57    0000              	EXTERN __mulschar_callee
58    0000              	EXTERN __mulsuchar
59    0000              	EXTERN __mulsuchar_callee
60    0000              	EXTERN __muluschar
61    0000              	EXTERN __muluschar_callee
62    0000              	EXTERN __rlslonglong
63    0000              	EXTERN __rlslonglong_callee
64    0000              	EXTERN __rlulonglong
65    0000              	EXTERN __rlulonglong_callee
66    0000              	EXTERN __rrslonglong
67    0000              	EXTERN __rrslonglong_callee
68    0000              	EXTERN __rrulonglong
69    0000              	EXTERN __rrulonglong_callee
70    0000              	EXTERN ___sdcc_call_hl
71    0000              	EXTERN ___sdcc_call_iy
72    0000              	EXTERN ___sdcc_enter_ix
73    0000              	EXTERN _banked_call
74    0000              	EXTERN _banked_ret
75    0000              	EXTERN ___fs2schar
76    0000              	EXTERN ___fs2schar_callee
77    0000              	EXTERN ___fs2sint
78    0000              	EXTERN ___fs2sint_callee
79    0000              	EXTERN ___fs2slong
80    0000              	EXTERN ___fs2slong_callee
81    0000              	EXTERN ___fs2slonglong
82    0000              	EXTERN ___fs2slonglong_callee
83    0000              	EXTERN ___fs2uchar
84    0000              	EXTERN ___fs2uchar_callee
85    0000              	EXTERN ___fs2uint
86    0000              	EXTERN ___fs2uint_callee
87    0000              	EXTERN ___fs2ulong
88    0000              	EXTERN ___fs2ulong_callee
89    0000              	EXTERN ___fs2ulonglong
90    0000              	EXTERN ___fs2ulonglong_callee
91    0000              	EXTERN ___fsadd
92    0000              	EXTERN ___fsadd_callee
93    0000              	EXTERN ___fsdiv
94    0000              	EXTERN ___fsdiv_callee
95    0000              	EXTERN ___fseq
96    0000              	EXTERN ___fseq_callee
97    0000              	EXTERN ___fsgt
98    0000              	EXTERN ___fsgt_callee
99    0000              	EXTERN ___fslt
100   0000              	EXTERN ___fslt_callee
101   0000              	EXTERN ___fsmul
102   0000              	EXTERN ___fsmul_callee
103   0000              	EXTERN ___fsneq
104   0000              	EXTERN ___fsneq_callee
105   0000              	EXTERN ___fssub
106   0000              	EXTERN ___fssub_callee
107   0000              	EXTERN ___schar2fs
108   0000              	EXTERN ___schar2fs_callee
109   0000              	EXTERN ___sint2fs
110   0000              	EXTERN ___sint2fs_callee
111   0000              	EXTERN ___slong2fs
112   0000              	EXTERN ___slong2fs_callee
113   0000              	EXTERN ___slonglong2fs
114   0000              	EXTERN ___slonglong2fs_callee
115   0000              	EXTERN ___uchar2fs
116   0000              	EXTERN ___uchar2fs_callee
117   0000              	EXTERN ___uint2fs
118   0000              	EXTERN ___uint2fs_callee
119   0000              	EXTERN ___ulong2fs
120   0000              	EXTERN ___ulong2fs_callee
121   0000              	EXTERN ___ulonglong2fs
122   0000              	EXTERN ___ulonglong2fs_callee
123   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
126   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
127   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
128   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
129   0000              	EXTERN ____sdcc_4_ldi_save_bc
130   0000              	EXTERN ____sdcc_4_push_hlix
131   0000              	EXTERN ____sdcc_4_push_mhl
132   0000              	EXTERN ____sdcc_lib_setmem_hl
133   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
134   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
135   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
136   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
137   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
138   0000              	EXTERN ____sdcc_ll_add_deix_hlix
139   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
140   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
141   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
142   0000              	EXTERN ____sdcc_ll_asr_hlix_a
143   0000              	EXTERN ____sdcc_ll_asr_mbc_a
144   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
145   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
146   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
147   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
148   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
149   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
150   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
151   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
152   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
153   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
155   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
156   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
157   0000              	EXTERN ____sdcc_ll_push_hlix
158   0000              	EXTERN ____sdcc_ll_push_mhl
159   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
160   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
161   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
162   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
163   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
164   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
165   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
166   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
167   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
168   0000              	EXTERN ____sdcc_load_debc_deix
169   0000              	EXTERN ____sdcc_load_dehl_deix
170   0000              	EXTERN ____sdcc_load_debc_mhl
171   0000              	EXTERN ____sdcc_load_hlde_mhl
172   0000              	EXTERN ____sdcc_store_dehl_bcix
173   0000              	EXTERN ____sdcc_store_debc_hlix
174   0000              	EXTERN ____sdcc_store_debc_mhl
175   0000              	EXTERN ____sdcc_cpu_pop_ei
176   0000              	EXTERN ____sdcc_cpu_pop_ei_jp
177   0000              	EXTERN ____sdcc_cpu_push_di
178   0000              	EXTERN ____sdcc_outi
179   0000              	EXTERN ____sdcc_outi_128
180   0000              	EXTERN ____sdcc_outi_256
181   0000              	EXTERN ____sdcc_ldi
182   0000              	EXTERN ____sdcc_ldi_128
183   0000              	EXTERN ____sdcc_ldi_256
184   0000              
185   0000              ;--------------------------------------------------------
186   0000              ; Public variables in this module
187   0000              ;--------------------------------------------------------
188   0000              	GLOBAL _player_check_map
189   0000              	GLOBAL _player_init
190   0000              	GLOBAL _player_check_input
191   0000              	GLOBAL _player_collision
192   0000              	GLOBAL _player_kill
193   0000              	GLOBAL _player_restart
194   0000              	GLOBAL _player_turn
195   0000              	GLOBAL _player_move
196   0000              	GLOBAL _player_check_stairs_down
197   0000              	GLOBAL _player_check_stairs
198   0000              	GLOBAL _player_tile
199   0000              	GLOBAL _player_move_input
200   0000              	GLOBAL _player_fire
201   0000              	GLOBAL _player_pick_item
202   0000              	GLOBAL _player_hit_platform
203   0000              	GLOBAL _player_hit_platform_clear
204   0000              	GLOBAL _player_score_add
205   0000              	GLOBAL _player_check_floor
206   0000              	GLOBAL _player_move_jump
207   0000              	GLOBAL _player_open_door
208   0000              	GLOBAL _player_lost_life
209   0000              	GLOBAL _player_hit
210   0000              ;--------------------------------------------------------
211   0000              ; Externals used
212   0000              ;--------------------------------------------------------
213   0000              	GLOBAL _ulltoa_callee
214   0000              	GLOBAL _ulltoa
215   0000              	GLOBAL _strtoull_callee
216   0000              	GLOBAL _strtoull
217   0000              	GLOBAL _strtoll_callee
218   0000              	GLOBAL _strtoll
219   0000              	GLOBAL _lltoa_callee
220   0000              	GLOBAL _lltoa
221   0000              	GLOBAL _llabs_callee
222   0000              	GLOBAL _llabs
223   0000              	GLOBAL __lldivu__callee
224   0000              	GLOBAL __lldivu_
225   0000              	GLOBAL __lldiv__callee
226   0000              	GLOBAL __lldiv_
227   0000              	GLOBAL _atoll_callee
228   0000              	GLOBAL _atoll
229   0000              	GLOBAL _realloc_unlocked_callee
230   0000              	GLOBAL _realloc_unlocked
231   0000              	GLOBAL _malloc_unlocked_fastcall
232   0000              	GLOBAL _malloc_unlocked
233   0000              	GLOBAL _free_unlocked_fastcall
234   0000              	GLOBAL _free_unlocked
235   0000              	GLOBAL _calloc_unlocked_callee
236   0000              	GLOBAL _calloc_unlocked
237   0000              	GLOBAL _aligned_alloc_unlocked_callee
238   0000              	GLOBAL _aligned_alloc_unlocked
239   0000              	GLOBAL _realloc_callee
240   0000              	GLOBAL _realloc
241   0000              	GLOBAL _malloc_fastcall
242   0000              	GLOBAL _malloc
243   0000              	GLOBAL _free_fastcall
244   0000              	GLOBAL _free
245   0000              	GLOBAL _calloc_callee
246   0000              	GLOBAL _calloc
247   0000              	GLOBAL _aligned_alloc_callee
248   0000              	GLOBAL _aligned_alloc
249   0000              	GLOBAL _utoa_callee
250   0000              	GLOBAL _utoa
251   0000              	GLOBAL _ultoa_callee
252   0000              	GLOBAL _ultoa
253   0000              	GLOBAL _system_fastcall
254   0000              	GLOBAL _system
255   0000              	GLOBAL _strtoul_callee
256   0000              	GLOBAL _strtoul
257   0000              	GLOBAL _strtol_callee
258   0000              	GLOBAL _strtol
259   0000              	GLOBAL _strtof_callee
260   0000              	GLOBAL _strtof
261   0000              	GLOBAL _strtod_callee
262   0000              	GLOBAL _strtod
263   0000              	GLOBAL _srand_fastcall
264   0000              	GLOBAL _srand
265   0000              	GLOBAL _rand
266   0000              	GLOBAL _quick_exit_fastcall
267   0000              	GLOBAL _quick_exit
268   0000              	GLOBAL _qsort_callee
269   0000              	GLOBAL _qsort
270   0000              	GLOBAL _ltoa_callee
271   0000              	GLOBAL _ltoa
272   0000              	GLOBAL _labs_fastcall
273   0000              	GLOBAL _labs
274   0000              	GLOBAL _itoa_callee
275   0000              	GLOBAL _itoa
276   0000              	GLOBAL _ftoh_callee
277   0000              	GLOBAL _ftoh
278   0000              	GLOBAL _ftog_callee
279   0000              	GLOBAL _ftog
280   0000              	GLOBAL _ftoe_callee
281   0000              	GLOBAL _ftoe
282   0000              	GLOBAL _ftoa_callee
283   0000              	GLOBAL _ftoa
284   0000              	GLOBAL _exit_fastcall
285   0000              	GLOBAL _exit
286   0000              	GLOBAL _dtoh_callee
287   0000              	GLOBAL _dtoh
288   0000              	GLOBAL _dtog_callee
289   0000              	GLOBAL _dtog
290   0000              	GLOBAL _dtoe_callee
291   0000              	GLOBAL _dtoe
292   0000              	GLOBAL _dtoa_callee
293   0000              	GLOBAL _dtoa
294   0000              	GLOBAL _bsearch_callee
295   0000              	GLOBAL _bsearch
296   0000              	GLOBAL _atol_fastcall
297   0000              	GLOBAL _atol
298   0000              	GLOBAL _atoi_fastcall
299   0000              	GLOBAL _atoi
300   0000              	GLOBAL _atof_fastcall
301   0000              	GLOBAL _atof
302   0000              	GLOBAL _atexit_fastcall
303   0000              	GLOBAL _atexit
304   0000              	GLOBAL _at_quick_exit_fastcall
305   0000              	GLOBAL _at_quick_exit
306   0000              	GLOBAL _abs_fastcall
307   0000              	GLOBAL _abs
308   0000              	GLOBAL _abort
309   0000              	GLOBAL __strtou__callee
310   0000              	GLOBAL __strtou_
311   0000              	GLOBAL __strtoi__callee
312   0000              	GLOBAL __strtoi_
313   0000              	GLOBAL __random_uniform_xor_8__fastcall
314   0000              	GLOBAL __random_uniform_xor_8_
315   0000              	GLOBAL __random_uniform_xor_32__fastcall
316   0000              	GLOBAL __random_uniform_xor_32_
317   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
318   0000              	GLOBAL __random_uniform_cmwc_8_
319   0000              	GLOBAL __shellsort__callee
320   0000              	GLOBAL __shellsort_
321   0000              	GLOBAL __quicksort__callee
322   0000              	GLOBAL __quicksort_
323   0000              	GLOBAL __insertion_sort__callee
324   0000              	GLOBAL __insertion_sort_
325   0000              	GLOBAL __ldivu__callee
326   0000              	GLOBAL __ldivu_
327   0000              	GLOBAL __ldiv__callee
328   0000              	GLOBAL __ldiv_
329   0000              	GLOBAL __divu__callee
330   0000              	GLOBAL __divu_
331   0000              	GLOBAL __div__callee
332   0000              	GLOBAL __div_
333   0000              	GLOBAL _NIRVANAP_drawTW_raw_callee
334   0000              	GLOBAL _NIRVANAP_drawTW_raw
335   0000              	GLOBAL _NIRVANAP_drawTW_callee
336   0000              	GLOBAL _NIRVANAP_drawTW
337   0000              	GLOBAL _NIRVANAP_drawW_raw_callee
338   0000              	GLOBAL _NIRVANAP_drawW_raw
339   0000              	GLOBAL _NIRVANAP_drawW_callee
340   0000              	GLOBAL _NIRVANAP_drawW
341   0000              	GLOBAL _NIRVANAP_spriteT_callee
342   0000              	GLOBAL _NIRVANAP_spriteT
343   0000              	GLOBAL _NIRVANAP_fillC_callee
344   0000              	GLOBAL _NIRVANAP_fillC
345   0000              	GLOBAL _NIRVANAP_readC_callee
346   0000              	GLOBAL _NIRVANAP_readC
347   0000              	GLOBAL _NIRVANAP_paintC_callee
348   0000              	GLOBAL _NIRVANAP_paintC
349   0000              	GLOBAL _NIRVANAP_printC_callee
350   0000              	GLOBAL _NIRVANAP_printC
351   0000              	GLOBAL _NIRVANAP_fillT_raw_callee
352   0000              	GLOBAL _NIRVANAP_fillT_raw
353   0000              	GLOBAL _NIRVANAP_fillT_callee
354   0000              	GLOBAL _NIRVANAP_fillT
355   0000              	GLOBAL _NIRVANAP_drawT_raw_callee
356   0000              	GLOBAL _NIRVANAP_drawT_raw
357   0000              	GLOBAL _NIRVANAP_drawT_callee
358   0000              	GLOBAL _NIRVANAP_drawT
359   0000              	GLOBAL _NIRVANAP_stop
360   0000              	GLOBAL _NIRVANAP_start
361   0000              	GLOBAL _debug3
362   0000              	GLOBAL _debug2
363   0000              	GLOBAL _debug
364   0000              	GLOBAL _zx_print_str
365   0000              	GLOBAL _zx_print_int
366   0000              	GLOBAL _zx_print_chr
367   0000              	GLOBAL _zx_print_bonus_time
368   0000              	GLOBAL _zx_isr
369   0000              	GLOBAL _z80_otdr_callee
370   0000              	GLOBAL _z80_otdr
371   0000              	GLOBAL _z80_otir_callee
372   0000              	GLOBAL _z80_otir
373   0000              	GLOBAL _z80_outp_callee
374   0000              	GLOBAL _z80_outp
375   0000              	GLOBAL _z80_indr_callee
376   0000              	GLOBAL _z80_indr
377   0000              	GLOBAL _z80_inir_callee
378   0000              	GLOBAL _z80_inir
379   0000              	GLOBAL _z80_inp_fastcall
380   0000              	GLOBAL _z80_inp
381   0000              	GLOBAL _z80_set_int_state_fastcall
382   0000              	GLOBAL _z80_set_int_state
383   0000              	GLOBAL _z80_get_int_state
384   0000              	GLOBAL _z80_delay_tstate_fastcall
385   0000              	GLOBAL _z80_delay_tstate
386   0000              	GLOBAL _z80_delay_ms_fastcall
387   0000              	GLOBAL _z80_delay_ms
388   0000              	GLOBAL _im2_remove_generic_callback_callee
389   0000              	GLOBAL _im2_remove_generic_callback
390   0000              	GLOBAL _im2_prepend_generic_callback_callee
391   0000              	GLOBAL _im2_prepend_generic_callback
392   0000              	GLOBAL _im2_append_generic_callback_callee
393   0000              	GLOBAL _im2_append_generic_callback
394   0000              	GLOBAL _im2_create_generic_isr_8080_callee
395   0000              	GLOBAL _im2_create_generic_isr_8080
396   0000              	GLOBAL _im2_create_generic_isr_callee
397   0000              	GLOBAL _im2_create_generic_isr
398   0000              	GLOBAL _im2_install_isr_callee
399   0000              	GLOBAL _im2_install_isr
400   0000              	GLOBAL _im2_init_fastcall
401   0000              	GLOBAL _im2_init
402   0000              	GLOBAL _intrinsic_swap_word_32_fastcall
403   0000              	GLOBAL _intrinsic_swap_word_32
404   0000              	GLOBAL _intrinsic_swap_endian_32_fastcall
405   0000              	GLOBAL _intrinsic_swap_endian_32
406   0000              	GLOBAL _intrinsic_swap_endian_16_fastcall
407   0000              	GLOBAL _intrinsic_swap_endian_16
408   0000              	GLOBAL _intrinsic_return_de
409   0000              	GLOBAL _intrinsic_return_bc
410   0000              	GLOBAL _intrinsic_exx
411   0000              	GLOBAL _intrinsic_ex_de_hl
412   0000              	GLOBAL _intrinsic_nop
413   0000              	GLOBAL _intrinsic_im_2
414   0000              	GLOBAL _intrinsic_im_1
415   0000              	GLOBAL _intrinsic_im_0
416   0000              	GLOBAL _intrinsic_retn
417   0000              	GLOBAL _intrinsic_reti
418   0000              	GLOBAL _intrinsic_halt
419   0000              	GLOBAL _intrinsic_ei
420   0000              	GLOBAL _intrinsic_di
421   0000              	GLOBAL _intrinsic_stub
422   0000              	GLOBAL _intrinsic_outi
423   0000              	GLOBAL _intrinsic_ldi
424   0000              	GLOBAL _zx_pattern_fill_callee
425   0000              	GLOBAL _zx_pattern_fill
426   0000              	GLOBAL _zx_saddrpup_fastcall
427   0000              	GLOBAL _zx_saddrpup
428   0000              	GLOBAL _zx_saddrpright_callee
429   0000              	GLOBAL _zx_saddrpright
430   0000              	GLOBAL _zx_saddrpleft_callee
431   0000              	GLOBAL _zx_saddrpleft
432   0000              	GLOBAL _zx_saddrpdown_fastcall
433   0000              	GLOBAL _zx_saddrpdown
434   0000              	GLOBAL _zx_saddrcup_fastcall
435   0000              	GLOBAL _zx_saddrcup
436   0000              	GLOBAL _zx_saddrcright_fastcall
437   0000              	GLOBAL _zx_saddrcright
438   0000              	GLOBAL _zx_saddrcleft_fastcall
439   0000              	GLOBAL _zx_saddrcleft
440   0000              	GLOBAL _zx_saddrcdown_fastcall
441   0000              	GLOBAL _zx_saddrcdown
442   0000              	GLOBAL _zx_saddr2py_fastcall
443   0000              	GLOBAL _zx_saddr2py
444   0000              	GLOBAL _zx_saddr2px_fastcall
445   0000              	GLOBAL _zx_saddr2px
446   0000              	GLOBAL _zx_saddr2cy_fastcall
447   0000              	GLOBAL _zx_saddr2cy
448   0000              	GLOBAL _zx_saddr2cx_fastcall
449   0000              	GLOBAL _zx_saddr2cx
450   0000              	GLOBAL _zx_saddr2aaddr_fastcall
451   0000              	GLOBAL _zx_saddr2aaddr
452   0000              	GLOBAL _zx_py2saddr_fastcall
453   0000              	GLOBAL _zx_py2saddr
454   0000              	GLOBAL _zx_py2aaddr_fastcall
455   0000              	GLOBAL _zx_py2aaddr
456   0000              	GLOBAL _zx_pxy2saddr_callee
457   0000              	GLOBAL _zx_pxy2saddr
458   0000              	GLOBAL _zx_pxy2aaddr_callee
459   0000              	GLOBAL _zx_pxy2aaddr
460   0000              	GLOBAL _zx_px2bitmask_fastcall
461   0000              	GLOBAL _zx_px2bitmask
462   0000              	GLOBAL _zx_cy2saddr_fastcall
463   0000              	GLOBAL _zx_cy2saddr
464   0000              	GLOBAL _zx_cy2aaddr_fastcall
465   0000              	GLOBAL _zx_cy2aaddr
466   0000              	GLOBAL _zx_cxy2saddr_callee
467   0000              	GLOBAL _zx_cxy2saddr
468   0000              	GLOBAL _zx_cxy2aaddr_callee
469   0000              	GLOBAL _zx_cxy2aaddr
470   0000              	GLOBAL _zx_bitmask2px_fastcall
471   0000              	GLOBAL _zx_bitmask2px
472   0000              	GLOBAL _zx_aaddrcup_fastcall
473   0000              	GLOBAL _zx_aaddrcup
474   0000              	GLOBAL _zx_aaddrcright_fastcall
475   0000              	GLOBAL _zx_aaddrcright
476   0000              	GLOBAL _zx_aaddrcleft_fastcall
477   0000              	GLOBAL _zx_aaddrcleft
478   0000              	GLOBAL _zx_aaddrcdown_fastcall
479   0000              	GLOBAL _zx_aaddrcdown
480   0000              	GLOBAL _zx_aaddr2saddr_fastcall
481   0000              	GLOBAL _zx_aaddr2saddr
482   0000              	GLOBAL _zx_aaddr2py_fastcall
483   0000              	GLOBAL _zx_aaddr2py
484   0000              	GLOBAL _zx_aaddr2px_fastcall
485   0000              	GLOBAL _zx_aaddr2px
486   0000              	GLOBAL _zx_aaddr2cy_fastcall
487   0000              	GLOBAL _zx_aaddr2cy
488   0000              	GLOBAL _zx_aaddr2cx_fastcall
489   0000              	GLOBAL _zx_aaddr2cx
490   0000              	GLOBAL _zx_visit_wc_pix_callee
491   0000              	GLOBAL _zx_visit_wc_pix
492   0000              	GLOBAL _zx_visit_wc_attr_callee
493   0000              	GLOBAL _zx_visit_wc_attr
494   0000              	GLOBAL _zx_scroll_wc_up_pix_callee
495   0000              	GLOBAL _zx_scroll_wc_up_pix
496   0000              	GLOBAL _zx_scroll_wc_up_attr_callee
497   0000              	GLOBAL _zx_scroll_wc_up_attr
498   0000              	GLOBAL _zx_scroll_wc_up_callee
499   0000              	GLOBAL _zx_scroll_wc_up
500   0000              	GLOBAL _zx_scroll_up_pix_callee
501   0000              	GLOBAL _zx_scroll_up_pix
502   0000              	GLOBAL _zx_scroll_up_attr_callee
503   0000              	GLOBAL _zx_scroll_up_attr
504   0000              	GLOBAL _zx_scroll_up_callee
505   0000              	GLOBAL _zx_scroll_up
506   0000              	GLOBAL _zx_cls_wc_pix_callee
507   0000              	GLOBAL _zx_cls_wc_pix
508   0000              	GLOBAL _zx_cls_wc_attr_callee
509   0000              	GLOBAL _zx_cls_wc_attr
510   0000              	GLOBAL _zx_cls_wc_callee
511   0000              	GLOBAL _zx_cls_wc
512   0000              	GLOBAL _zx_cls_pix_fastcall
513   0000              	GLOBAL _zx_cls_pix
514   0000              	GLOBAL _zx_cls_attr_fastcall
515   0000              	GLOBAL _zx_cls_attr
516   0000              	GLOBAL _zx_cls_fastcall
517   0000              	GLOBAL _zx_cls
518   0000              	GLOBAL _zx_border_fastcall
519   0000              	GLOBAL _zx_border
520   0000              	GLOBAL _spr_btile_paint_back
521   0000              	GLOBAL _spr_explode_bullet
522   0000              	GLOBAL _spr_init_anim_bullets
523   0000              	GLOBAL _spr_turn_horizontal
524   0000              	GLOBAL _spr_play_bullets
525   0000              	GLOBAL _spr_play_anim
526   0000              	GLOBAL _spr_add_anim
527   0000              	GLOBAL _spr_page_map
528   0000              	GLOBAL _spr_page_right
529   0000              	GLOBAL _spr_page_left
530   0000              	GLOBAL _spr_tile_paint
531   0000              	GLOBAL _spr_calc_hor
532   0000              	GLOBAL _spr_draw_row
533   0000              	GLOBAL _spr_draw_index
534   0000              	GLOBAL _spr_draw_clear
535   0000              	GLOBAL _spr_brick_anim
536   0000              	GLOBAL _spr_back_repaint
537   0000              	GLOBAL _spr_tile
538   0000              	GLOBAL _spr_destroy
539   0000              	GLOBAL _spr_tile_dir
540   0000              	GLOBAL _spr_redraw
541   0000              	GLOBAL _spr_move_left
542   0000              	GLOBAL _spr_move_right
543   0000              	GLOBAL _spr_move_horizontal
544   0000              	GLOBAL _spr_move_down
545   0000              	GLOBAL _spr_move_up
546   0000              	GLOBAL _spr_calc_index
547   0000              	GLOBAL _spr_chktime
548   0000              	GLOBAL _sound_hit_brick
549   0000              	GLOBAL _sound_hit_enemy
550   0000              	GLOBAL _sound_kill
551   0000              	GLOBAL _sound_enter_enemy
552   0000              	GLOBAL _sound_coin
553   0000              	GLOBAL _sound_jump
554   0000              	GLOBAL _sound_slide
555   0000              	GLOBAL _player_player_hit_pow
556   0000              	GLOBAL _game_obj_clear
557   0000              	GLOBAL _game_obj_chk
558   0000              	GLOBAL _game_obj_set
559   0000              	GLOBAL _game_shoot_fire
560   0000              	GLOBAL _game_add_enemy
561   0000              	GLOBAL _game_joystick_set_menu
562   0000              	GLOBAL _game_joystick_set
563   0000              	GLOBAL _game_joystick_change
564   0000              	GLOBAL _game_print_header
565   0000              	GLOBAL _game_end
566   0000              	GLOBAL _game_phase_print_score_back
567   0000              	GLOBAL _game_check_time
568   0000              	GLOBAL _game_rotate_attrib
569   0000              	GLOBAL _game_colour_message
570   0000              	GLOBAL _game_paint_attrib_lin_h
571   0000              	GLOBAL _game_paint_attrib_lin
572   0000              	GLOBAL _game_paint_attrib
573   0000              	GLOBAL _game_print_score
574   0000              	GLOBAL _game_unfreeze_all
575   0000              	GLOBAL _game_freeze_all
576   0000              	GLOBAL _game_freeze
577   0000              	GLOBAL _game_enemy_add_get_index
578   0000              	GLOBAL _game_check_cell
579   0000              	GLOBAL _game_check_map
580   0000              	GLOBAL _game_loop
581   0000              	GLOBAL _game_round_init
582   0000              	GLOBAL _game_start_timer
583   0000              	GLOBAL _game_tick
584   0000              	GLOBAL _game_update_stats
585   0000              	GLOBAL _game_print_footer
586   0000              	GLOBAL _game_fill_row
587   0000              	GLOBAL _game_draw_screen
588   0000              	GLOBAL _enemy_avoid_fall_dead
589   0000              	GLOBAL _enemy_avoid_fall
590   0000              	GLOBAL _enemy_respawn
591   0000              	GLOBAL _enemy_init
592   0000              	GLOBAL _enemy_move
593   0000              	GLOBAL _enemy_turn
594   0000              	GLOBAL _enemy_hit
595   0000              	GLOBAL _enemy_coin1
596   0000              	GLOBAL _enemy_static
597   0000              	GLOBAL _enemy_walk
598   0000              	GLOBAL _enemy_horizontal
599   0000              	GLOBAL _enemy_vertical
600   0000              	GLOBAL _ay_fx_play
601   0000              	GLOBAL _ay_midi_play
602   0000              	GLOBAL _ay_is_playing
603   0000              	GLOBAL _ay_reset
604   0000              	GLOBAL _test_func
605   0000              	GLOBAL _test_proc
606   0000              	GLOBAL _in_mouse_kempston_wheel_delta
607   0000              	GLOBAL _in_mouse_kempston_wheel
608   0000              	GLOBAL _in_mouse_kempston_callee
609   0000              	GLOBAL _in_mouse_kempston
610   0000              	GLOBAL _in_mouse_kempston_setpos_callee
611   0000              	GLOBAL _in_mouse_kempston_setpos
612   0000              	GLOBAL _in_mouse_kempston_reset
613   0000              	GLOBAL _in_mouse_kempston_init
614   0000              	GLOBAL _in_mouse_amx_wheel_delta
615   0000              	GLOBAL _in_mouse_amx_wheel
616   0000              	GLOBAL _in_mouse_amx_callee
617   0000              	GLOBAL _in_mouse_amx
618   0000              	GLOBAL _in_mouse_amx_setpos_callee
619   0000              	GLOBAL _in_mouse_amx_setpos
620   0000              	GLOBAL _in_mouse_amx_reset
621   0000              	GLOBAL _in_mouse_amx_init_callee
622   0000              	GLOBAL _in_mouse_amx_init
623   0000              	GLOBAL _in_stick_sinclair2
624   0000              	GLOBAL _in_stick_sinclair1
625   0000              	GLOBAL _in_stick_kempston
626   0000              	GLOBAL _in_stick_fuller
627   0000              	GLOBAL _in_stick_cursor
628   0000              	GLOBAL _in_stick_keyboard_fastcall
629   0000              	GLOBAL _in_stick_keyboard
630   0000              	GLOBAL _in_wait_nokey
631   0000              	GLOBAL _in_wait_key
632   0000              	GLOBAL _in_test_key
633   0000              	GLOBAL _in_pause_fastcall
634   0000              	GLOBAL _in_pause
635   0000              	GLOBAL _in_key_scancode_fastcall
636   0000              	GLOBAL _in_key_scancode
637   0000              	GLOBAL _in_key_pressed_fastcall
638   0000              	GLOBAL _in_key_pressed
639   0000              	GLOBAL _in_inkey
640   0000              	GLOBAL _NIRVANAP_CHAR_TABLE
641   0000              	GLOBAL _NIRVANAP_WIDE_IMAGES
642   0000              	GLOBAL _NIRVANAP_TILE_IMAGES
643   0000              	GLOBAL _NIRVANAP_HOLE
644   0000              	GLOBAL _NIRVANAP_ISR_HOOK
645   0000              	GLOBAL _player_lvl_table
646   0000              	GLOBAL _map_paper_last
647   0000              	GLOBAL _map_paper_clr
648   0000              	GLOBAL _map_paper
649   0000              	GLOBAL _draw_count
650   0000              	GLOBAL _g_player_hit_right
651   0000              	GLOBAL _g_player_hit_left
652   0000              	GLOBAL _joynames
653   0000              	GLOBAL _initials
654   0000              	GLOBAL _bullet_count
655   0000              	GLOBAL _bullet_vel
656   0000              	GLOBAL _bullet_frames
657   0000              	GLOBAL _bullet_colint
658   0000              	GLOBAL _bullet_dir
659   0000              	GLOBAL _bullet_tile
660   0000              	GLOBAL _bullet_col
661   0000              	GLOBAL _bullet_lin
662   0000              	GLOBAL _bullet_col0
663   0000              	GLOBAL _bullet_lin0
664   0000              	GLOBAL _bullet_max
665   0000              	GLOBAL _bullet_class
666   0000              	GLOBAL _mush_class
667   0000              	GLOBAL _mush_index
668   0000              	GLOBAL _anim_count
669   0000              	GLOBAL _anim_respanwn
670   0000              	GLOBAL _anim_loop
671   0000              	GLOBAL _anim_end
672   0000              	GLOBAL _anim_int
673   0000              	GLOBAL _anim_tile
674   0000              	GLOBAL _anim_col
675   0000              	GLOBAL _anim_lin
676   0000              	GLOBAL _map_heigth
677   0000              	GLOBAL _map_width
678   0000              	GLOBAL _scr_curr
679   0000              	GLOBAL _scr_obj1
680   0000              	GLOBAL _scr_obj0
681   0000              	GLOBAL _scr_map
682   0000              	GLOBAL _sprite_speed_alt
683   0000              	GLOBAL _sprite_frames
684   0000              	GLOBAL _sprite_speed
685   0000              	GLOBAL _screen_ink
686   0000              	GLOBAL _screen_paper
687   0000              	GLOBAL _player_over_stair
688   0000              	GLOBAL _game_start_scr
689   0000              	GLOBAL _game_respawn_tile
690   0000              	GLOBAL _game_respawn_index
691   0000              	GLOBAL _game_respawn_time
692   0000              	GLOBAL _game_menu_sel
693   0000              	GLOBAL _game_score_top
694   0000              	GLOBAL _player_lives
695   0000              	GLOBAL _game_over
696   0000              	GLOBAL _game_sound
697   0000              	GLOBAL _game_inmune
698   0000              	GLOBAL _game_god_mode
699   0000              	GLOBAL _game_two_player
700   0000              	GLOBAL _game_brick_tile
701   0000              	GLOBAL _sprite_curr_index
702   0000              	GLOBAL _spr_count
703   0000              	GLOBAL _bullet_time
704   0000              	GLOBAL _anim_time
705   0000              	GLOBAL _frame_time
706   0000              	GLOBAL _entry_time
707   0000              	GLOBAL _curr_time
708   0000              	GLOBAL _s_state
709   0000              	GLOBAL _attrib_hl
710   0000              	GLOBAL _attrib
711   0000              	GLOBAL _zx_val_asm
712   0000              	GLOBAL _enemies
713   0000              	GLOBAL _tmp_ui
714   0000              	GLOBAL _tmp_sc
715   0000              	GLOBAL _tmp_uc
716   0000              	GLOBAL _tmp1
717   0000              	GLOBAL _tmp0
718   0000              	GLOBAL _tmp
719   0000              	GLOBAL _index1
720   0000              	GLOBAL _index0
721   0000              	GLOBAL _loop_count
722   0000              	GLOBAL _s_col1
723   0000              	GLOBAL _s_col0
724   0000              	GLOBAL _s_lin1
725   0000              	GLOBAL _s_lin0
726   0000              	GLOBAL _s_tile1
727   0000              	GLOBAL _s_tile0
728   0000              	GLOBAL _player_hit_count
729   0000              	GLOBAL _sprite_horizontal_check
730   0000              	GLOBAL _sprite_on_air
731   0000              	GLOBAL _sprite
732   0000              	GLOBAL _game_respawn_curr_time
733   0000              	GLOBAL _game_world
734   0000              	GLOBAL _game_gravity
735   0000              	GLOBAL _player_hit_time
736   0000              	GLOBAL _player_lin_scr
737   0000              	GLOBAL _player_col_scr
738   0000              	GLOBAL _player_lvl
739   0000              	GLOBAL _player_int
740   0000              	GLOBAL _player_str
741   0000              	GLOBAL _player_max_vita
742   0000              	GLOBAL _player_max_mana
743   0000              	GLOBAL _player_vita
744   0000              	GLOBAL _player_mana
745   0000              	GLOBAL _player_keys
746   0000              	GLOBAL _player_vel_inc
747   0000              	GLOBAL _player_vel_y1
748   0000              	GLOBAL _player_vel_y0
749   0000              	GLOBAL _player_vel_y
750   0000              	GLOBAL _player_vel_x
751   0000              	GLOBAL _player_joy
752   0000              	GLOBAL _player_score
753   0000              	GLOBAL _last_time
754   0000              	GLOBAL _player_slide
755   0000              	GLOBAL _spr_timer
756   0000              	GLOBAL _jump_lin
757   0000              	GLOBAL _player_hit_col
758   0000              	GLOBAL _player_hit_lin
759   0000              	GLOBAL _colint
760   0000              	GLOBAL _col
761   0000              	GLOBAL _lin
762   0000              	GLOBAL _tile
763   0000              	GLOBAL _state_a
764   0000              	GLOBAL _state
765   0000              	GLOBAL _class
766   0000              	GLOBAL _tbuffer
767   0000              	GLOBAL _dirs
768   0000              	GLOBAL _k1
769   0000              	GLOBAL _joyfunc1
770   0000              	GLOBAL _btiles
771   0000              	GLOBAL _spec128
772   0000              	GLOBAL _GLOBAL_ZX_PORT_7FFD
773   0000              	GLOBAL _GLOBAL_ZX_PORT_1FFD
774   0000              	GLOBAL _GLOBAL_ZX_PORT_FE
775   0000              	GLOBAL _ay_effect_20
776   0000              	GLOBAL _ay_effect_19
777   0000              	GLOBAL _ay_effect_18
778   0000              	GLOBAL _ay_effect_17
779   0000              	GLOBAL _ay_effect_16
780   0000              	GLOBAL _ay_effect_15
781   0000              	GLOBAL _ay_effect_14
782   0000              	GLOBAL _ay_effect_13
783   0000              	GLOBAL _ay_effect_12
784   0000              	GLOBAL _ay_effect_11
785   0000              	GLOBAL _ay_effect_10
786   0000              	GLOBAL _ay_effect_09
787   0000              	GLOBAL _ay_effect_08
788   0000              	GLOBAL _ay_effect_07
789   0000              	GLOBAL _ay_effect_06
790   0000              	GLOBAL _ay_effect_05
791   0000              	GLOBAL _ay_effect_04
792   0000              	GLOBAL _ay_effect_03
793   0000              	GLOBAL _ay_effect_02
794   0000              	GLOBAL _ay_effect_01
795   0000              	GLOBAL _pb_midi_phase_1
796   0000              	GLOBAL _pb_midi_title
797   0000              	GLOBAL _control_method
798   0000              	GLOBAL _world0
799   0000              	GLOBAL _lenght0
800   0000              	GLOBAL _start_scr0
801   0000              ;--------------------------------------------------------
802   0000              ; special function registers
803   0000              ;--------------------------------------------------------
804   0000              defc _IO_FE	=	0x00fe
805   0000              defc _IO_1FFD	=	0x1ffd
806   0000              defc _IO_7FFD	=	0x7ffd
807   0000              ;--------------------------------------------------------
808   0000              ; ram data
809   0000              ;--------------------------------------------------------
810   0000              	SECTION bss_compiler
811   0000              ;--------------------------------------------------------
812   0000              ; ram data
813   0000              ;--------------------------------------------------------
814   0000              
815   0000              IF 0
816   0000              
817   0000              ; .area _INITIALIZED removed by z88dk
818   0000              
819   0000              
820   0000              ENDIF
821   0000              
822   0000              ;--------------------------------------------------------
823   0000              ; absolute external ram data
824   0000              ;--------------------------------------------------------
825   0000              	SECTION IGNORE
826   0000              ;--------------------------------------------------------
827   0000              ; global & static initialisations
828   0000              ;--------------------------------------------------------
829   0000              	SECTION code_crt_init
830   0000              ;--------------------------------------------------------
831   0000              ; Home
832   0000              ;--------------------------------------------------------
833   0000              	SECTION IGNORE
834   0000              ;--------------------------------------------------------
835   0000              ; code
836   0000              ;--------------------------------------------------------
837   0000              	SECTION code_compiler
838   0000              ;	---------------------------------
839   0000              ; Function player_init
840   0000              ; ---------------------------------
841   0000              _player_init:
842   0000  CD 00 00    	call	___sdcc_enter_ix
843   0003  F5          	push	af
844   0004  3E 00       	ld	a, +((_class) & 0xFF)
845   0006  DD 86 04    	add	a,(ix+4)
846   0009  4F          	ld	c, a
847   000A  3E 00       	ld	a, +((_class) / 256)
848   000C  CE 00       	adc	a,0x00
849   000E  47          	ld	b, a
850   000F  AF          	xor	a, a
851   0010  02          	ld	(bc), a
852   0011  3E 00       	ld	a, +((_tile) & 0xFF)
853   0013  DD 86 04    	add	a,(ix+4)
854   0016  4F          	ld	c, a
855   0017  3E 00       	ld	a, +((_tile) / 256)
856   0019  CE 00       	adc	a,0x00
857   001B  47          	ld	b, a
858   001C  DD 7E 07    	ld	a,(ix+7)
859   001F  02          	ld	(bc), a
860   0020  3E 00       	ld	a, +((_lin) & 0xFF)
861   0022  DD 86 04    	add	a,(ix+4)
862   0025  4F          	ld	c, a
863   0026  3E 00       	ld	a, +((_lin) / 256)
864   0028  CE 00       	adc	a,0x00
865   002A  47          	ld	b, a
866   002B  DD 7E 05    	ld	a,(ix+5)
867   002E  02          	ld	(bc), a
868   002F  3E 00       	ld	a, +((_col) & 0xFF)
869   0031  DD 86 04    	add	a,(ix+4)
870   0034  4F          	ld	c, a
871   0035  3E 00       	ld	a, +((_col) / 256)
872   0037  CE 00       	adc	a,0x00
873   0039  47          	ld	b, a
874   003A  DD 7E 06    	ld	a,(ix+6)
875   003D  02          	ld	(bc), a
876   003E  3E 00       	ld	a, +((_colint) & 0xFF)
877   0040  DD 86 04    	add	a,(ix+4)
878   0043  4F          	ld	c, a
879   0044  3E 00       	ld	a, +((_colint) / 256)
880   0046  CE 00       	adc	a,0x00
881   0048  47          	ld	b, a
882   0049  AF          	xor	a, a
883   004A  02          	ld	(bc), a
884   004B  3E 00       	ld	a, +((_state) & 0xFF)
885   004D  DD 86 04    	add	a,(ix+4)
886   0050  4F          	ld	c, a
887   0051  3E 00       	ld	a, +((_state) / 256)
888   0053  CE 00       	adc	a,0x00
889   0055  47          	ld	b, a
890   0056  AF          	xor	a, a
891   0057  02          	ld	(bc), a
892   0058  3E 00       	ld	a, +((_state_a) & 0xFF)
893   005A  DD 86 04    	add	a,(ix+4)
894   005D  4F          	ld	c, a
895   005E  3E 00       	ld	a, +((_state_a) / 256)
896   0060  CE 00       	adc	a,0x00
897   0062  47          	ld	b, a
898   0063  AF          	xor	a, a
899   0064  02          	ld	(bc), a
900   0065  3E 00       	ld	a, +((_jump_lin) & 0xFF)
901   0067  DD 86 04    	add	a,(ix+4)
902   006A  5F          	ld	e, a
903   006B  3E 00       	ld	a, +((_jump_lin) / 256)
904   006D  CE 00       	adc	a,0x00
905   006F  57          	ld	d, a
906   0070  DD 7E 05    	ld	a,(ix+5)
907   0073  12          	ld	(de), a
908   0074  DD 6E 04    	ld	l,(ix+4)
909   0077  26 00       	ld	h,0x00
910   0079  29          	add	hl,hl
911   007A  11 00 00    	ld	de,_last_time
912   007D  19          	add	hl, de
913   007E  E3          	ex	(sp), hl
914   007F  E1          	pop	hl
915   0080  ED 5B 00 00 	ld	de,(_curr_time)
916   0084  E5          	push	hl
917   0085  73          	ld	(hl), e
918   0086  23          	inc	hl
919   0087  72          	ld	(hl), d
920   0088  3E 00       	ld	a, +((_sprite_speed_alt) & 0xFF)
921   008A  DD 86 04    	add	a,(ix+4)
922   008D  5F          	ld	e, a
923   008E  3E 00       	ld	a, +((_sprite_speed_alt) / 256)
924   0090  CE 00       	adc	a,0x00
925   0092  57          	ld	d, a
926   0093  AF          	xor	a, a
927   0094  12          	ld	(de), a
928   0095  0A          	ld	a, (bc)
929   0096  F6 11       	or	a,+(0x01|0x10)
930   0098  02          	ld	(bc),a
931   0099  21 00 00    	ld	hl,_player_hit_col
932   009C  36 00       	ld	(hl),0x00
933   009E  21 00 00    	ld	hl,_player_hit_lin
934   00A1  36 00       	ld	(hl),0x00
935   00A3  21 00 00    	ld	hl,_player_slide
936   00A6  36 00       	ld	(hl),0x00
937   00A8  DD 66 06    	ld	h,(ix+6)
938   00AB  DD 6E 05    	ld	l,(ix+5)
939   00AE  E5          	push	hl
940   00AF  DD 66 07    	ld	h,(ix+7)
941   00B2  DD 6E 04    	ld	l,(ix+4)
942   00B5  E5          	push	hl
943   00B6  CD 00 00    	call	_NIRVANAP_spriteT_callee
944   00B9  F1          	pop	af
945   00BA  DD E1       	pop	ix
946   00BC  C9          	ret
947   00BD              	SECTION code_compiler
948   00BD              ;	---------------------------------
949   00BD              ; Function player_check_input
950   00BD              ; ---------------------------------
951   00BD              _player_check_input:
952   00BD  21 00 00    	ld	hl,_dirs
953   00C0  CB 56       	bit	2, (hl)
954   00C2  28 0C       	jr	Z,l_player_check_input_00102
955   00C4  21 00 00    	ld	hl,_dirs
956   00C7  CB 5E       	bit	3, (hl)
957   00C9  28 05       	jr	Z,l_player_check_input_00102
958   00CB  21 00 00    	ld	hl,_dirs
959   00CE  36 00       	ld	(hl),0x00
960   00D0              l_player_check_input_00102:
961   00D0  21 00 00    	ld	hl,_dirs
962   00D3  7E          	ld	a, (hl)
963   00D4  CB 07       	rlc	a
964   00D6  E6 01       	and	a,0x01
965   00D8  CB 47       	bit	0, a
966   00DA  20 1D       	jr	NZ,l_player_check_input_00107
967   00DC  CB 56       	bit	2, (hl)
968   00DE  20 19       	jr	NZ,l_player_check_input_00107
969   00E0  21 00 00    	ld	hl,_dirs
970   00E3  CB 5E       	bit	3, (hl)
971   00E5  20 12       	jr	NZ,l_player_check_input_00107
972   00E7  21 00 00    	ld	hl,_dirs
973   00EA  CB 46       	bit	0, (hl)
974   00EC  20 0B       	jr	NZ,l_player_check_input_00107
975   00EE  21 00 00    	ld	hl,_dirs
976   00F1  CB 4E       	bit	1, (hl)
977   00F3  20 04       	jr	NZ,l_player_check_input_00107
978   00F5  2E 00       	ld	l,0x00
979   00F7  18 02       	jr	l_player_check_input_00108
980   00F9              l_player_check_input_00107:
981   00F9  2E 01       	ld	l,0x01
982   00FB              l_player_check_input_00108:
983   00FB  C9          	ret
984   00FC              	SECTION code_compiler
985   00FC              ;	---------------------------------
986   00FC              ; Function player_collision
987   00FC              ; ---------------------------------
988   00FC              _player_collision:
989   00FC  21 19 00    	ld	hl,0x0019
990   00FF  E5          	push	hl
991   0100  2A 00 00    	ld	hl,(_player_hit_time)
992   0103  E5          	push	hl
993   0104  CD 00 00    	call	_game_check_time
994   0107  F1          	pop	af
995   0108  F1          	pop	af
996   0109  7D          	ld	a, l
997   010A  B7          	or	a, a
998   010B  CA 42 02    	jp	Z, l_player_collision_00124
999   010E  21 00 00    	ld	hl,_sprite
1000  0111  36 00       	ld	(hl),0x00
1001  0113  3A 07 00    	ld	a,(_col + 7)
1002  0116  32 00 00    	ld	(_s_col1),a
1003  0119  3A 07 00    	ld	a,(_lin + 7)
1004  011C  32 00 00    	ld	(_s_lin1),a
1005  011F  C6 08       	add	a,0x08
1006  0121  4F          	ld	c, a
1007  0122  3A 00 00    	ld	a, (_s_col1)
1008  0125  47          	ld	b,a
1009  0126  C5          	push	bc
1010  0127  CD 00 00    	call	_spr_calc_index
1011  012A  F1          	pop	af
1012  012B  7D          	ld	a,l
1013  012C  32 00 00    	ld	(_sprite_curr_index),a
1014  012F  4F          	ld	c,a
1015  0130  06 00       	ld	b,0x00
1016  0132  21 00 00    	ld	hl,_scr_map
1017  0135  09          	add	hl,bc
1018  0136  4E          	ld	c, (hl)
1019  0137  3E 2F       	ld	a,0x2f
1020  0139  91          	sub	a, c
1021  013A  30 0F       	jr	NC,l_player_collision_00120
1022  013C  79          	ld	a, c
1023  013D  D6 3C       	sub	a,0x3c
1024  013F  30 0A       	jr	NC,l_player_collision_00120
1025  0141  2E 06       	ld	l,0x06
1026  0143  CD 00 00    	call	_zx_border_fastcall
1027  0146  2E 32       	ld	l,0x32
1028  0148  CD F5 10    	call	_player_hit
1029  014B              l_player_collision_00120:
1030  014B  21 00 00    	ld	hl,_sprite
1031  014E  7E          	ld	a, (hl)
1032  014F  D6 07       	sub	a,0x07
1033  0151  D2 42 02    	jp	NC, l_player_collision_00124
1034  0154  3E 00       	ld	a, +((_class) & 0xFF)
1035  0156  86          	add	a, (hl)
1036  0157  4F          	ld	c, a
1037  0158  3E 00       	ld	a, +((_class) / 256)
1038  015A  CE 00       	adc	a,0x00
1039  015C  47          	ld	b, a
1040  015D  0A          	ld	a, (bc)
1041  015E  B7          	or	a, a
1042  015F  CA 3B 02    	jp	Z, l_player_collision_00119
1043  0162  4E          	ld	c,(hl)
1044  0163  06 00       	ld	b,0x00
1045  0165  21 00 00    	ld	hl,_col
1046  0168  09          	add	hl,bc
1047  0169  4E          	ld	c, (hl)
1048  016A  06 00       	ld	b,0x00
1049  016C  3A 00 00    	ld	a,(_s_col1)
1050  016F  5F          	ld	e,a
1051  0170  16 00       	ld	d,0x00
1052  0172  79          	ld	a, c
1053  0173  93          	sub	a, e
1054  0174  6F          	ld	l, a
1055  0175  78          	ld	a, b
1056  0176  9A          	sbc	a, d
1057  0177  67          	ld	h, a
1058  0178  CD 00 00    	call	_abs_fastcall
1059  017B  7D          	ld	a,l
1060  017C  D6 02       	sub	a,0x02
1061  017E  7C          	ld	a,h
1062  017F  17          	rla
1063  0180  3F          	ccf
1064  0181  1F          	rra
1065  0182  DE 80       	sbc	a,0x80
1066  0184  D2 3B 02    	jp	NC, l_player_collision_00119
1067  0187  2A 00 00    	ld	hl,(_sprite)
1068  018A  26 00       	ld	h,0x00
1069  018C  01 00 00    	ld	bc,_lin
1070  018F  09          	add	hl,bc
1071  0190  4E          	ld	c,(hl)
1072  0191  06 00       	ld	b,0x00
1073  0193  3A 00 00    	ld	a,(_s_lin1)
1074  0196  5F          	ld	e,a
1075  0197  16 00       	ld	d,0x00
1076  0199  79          	ld	a, c
1077  019A  93          	sub	a, e
1078  019B  6F          	ld	l, a
1079  019C  78          	ld	a, b
1080  019D  9A          	sbc	a, d
1081  019E  67          	ld	h, a
1082  019F  CD 00 00    	call	_abs_fastcall
1083  01A2  7D          	ld	a,l
1084  01A3  D6 0E       	sub	a,0x0e
1085  01A5  7C          	ld	a,h
1086  01A6  17          	rla
1087  01A7  3F          	ccf
1088  01A8  1F          	rra
1089  01A9  DE 80       	sbc	a,0x80
1090  01AB  D2 3B 02    	jp	NC, l_player_collision_00119
1091  01AE  2A 00 00    	ld	hl,(_sprite)
1092  01B1  26 00       	ld	h,0x00
1093  01B3  01 00 00    	ld	bc,_class
1094  01B6  09          	add	hl,bc
1095  01B7  7E          	ld	a,(hl)
1096  01B8  FE 06       	cp	a,0x06
1097  01BA  20 29       	jr	NZ,l_player_collision_00107
1098  01BC  21 00 00    	ld	hl,_player_vita
1099  01BF  7E          	ld	a, (hl)
1100  01C0  C6 19       	add	a,0x19
1101  01C2  77          	ld	(hl), a
1102  01C3  3A 00 00    	ld	a,(_player_max_vita)
1103  01C6  21 00 00    	ld	hl,_player_vita
1104  01C9  96          	sub	a, (hl)
1105  01CA  30 06       	jr	NC,l_player_collision_00105
1106  01CC  3A 00 00    	ld	a,(_player_max_vita)
1107  01CF  32 00 00    	ld	(_player_vita),a
1108  01D2              l_player_collision_00105:
1109  01D2  21 01 00    	ld	hl,0x0001
1110  01D5  CD FD 0B    	call	_player_score_add
1111  01D8  CD 00 00    	call	_game_update_stats
1112  01DB  2A 00 00    	ld	hl,(_sprite)
1113  01DE  CD 00 00    	call	_spr_destroy
1114  01E1  2E 00       	ld	l,0x00
1115  01E3  18 5F       	jr	l_player_collision_00125
1116  01E5              l_player_collision_00107:
1117  01E5  FE 07       	cp	a,0x07
1118  01E7  20 29       	jr	NZ,l_player_collision_00111
1119  01E9  21 00 00    	ld	hl,_player_mana
1120  01EC  7E          	ld	a, (hl)
1121  01ED  C6 19       	add	a,0x19
1122  01EF  77          	ld	(hl), a
1123  01F0  3A 00 00    	ld	a,(_player_max_mana)
1124  01F3  21 00 00    	ld	hl,_player_mana
1125  01F6  96          	sub	a, (hl)
1126  01F7  30 06       	jr	NC,l_player_collision_00109
1127  01F9  3A 00 00    	ld	a,(_player_max_mana)
1128  01FC  32 00 00    	ld	(_player_mana),a
1129  01FF              l_player_collision_00109:
1130  01FF  21 01 00    	ld	hl,0x0001
1131  0202  CD FD 0B    	call	_player_score_add
1132  0205  CD 00 00    	call	_game_update_stats
1133  0208  2A 00 00    	ld	hl,(_sprite)
1134  020B  CD 00 00    	call	_spr_destroy
1135  020E  2E 00       	ld	l,0x00
1136  0210  18 32       	jr	l_player_collision_00125
1137  0212              l_player_collision_00111:
1138  0212  D6 08       	sub	a,0x08
1139  0214  20 17       	jr	NZ,l_player_collision_00113
1140  0216  21 00 00    	ld	hl,_player_lives
1141  0219  34          	inc	(hl)
1142  021A  21 01 00    	ld	hl,0x0001
1143  021D  CD FD 0B    	call	_player_score_add
1144  0220  CD 00 00    	call	_game_update_stats
1145  0223  2A 00 00    	ld	hl,(_sprite)
1146  0226  CD 00 00    	call	_spr_destroy
1147  0229  2E 00       	ld	l,0x00
1148  022B  18 17       	jr	l_player_collision_00125
1149  022D              l_player_collision_00113:
1150  022D  2E 02       	ld	l,0x02
1151  022F  CD 00 00    	call	_zx_border_fastcall
1152  0232  2E 14       	ld	l,0x14
1153  0234  CD F5 10    	call	_player_hit
1154  0237  2E 01       	ld	l,0x01
1155  0239  18 09       	jr	l_player_collision_00125
1156  023B              l_player_collision_00119:
1157  023B  21 00 00    	ld	hl,_sprite
1158  023E  34          	inc	(hl)
1159  023F  C3 4B 01    	jp	l_player_collision_00120
1160  0242              l_player_collision_00124:
1161  0242  2E 00       	ld	l,0x00
1162  0244              l_player_collision_00125:
1163  0244  C9          	ret
1164  0245              	SECTION code_compiler
1165  0245              ;	---------------------------------
1166  0245              ; Function player_kill
1167  0245              ; ---------------------------------
1168  0245              _player_kill:
1169  0245  01 00 00    	ld	bc,_state+0
1170  0248  2A 00 00    	ld	hl,(_sprite)
1171  024B  26 00       	ld	h,0x00
1172  024D  09          	add	hl,bc
1173  024E  CB 6E       	bit	5,(hl)
1174  0250  C2 17 03    	jp	NZ,l_player_kill_00109
1175  0253  C5          	push	bc
1176  0254  CD 00 00    	call	_sound_hit_brick
1177  0257  C1          	pop	bc
1178  0258  79          	ld	a, c
1179  0259  21 00 00    	ld	hl,_sprite
1180  025C  86          	add	a, (hl)
1181  025D  5F          	ld	e, a
1182  025E  78          	ld	a, b
1183  025F  CE 00       	adc	a,0x00
1184  0261  57          	ld	d, a
1185  0262  1A          	ld	a, (de)
1186  0263  F6 20       	or	a,0x20
1187  0265  12          	ld	(de), a
1188  0266  3E 00       	ld	a, +((_sprite_speed_alt) & 0xFF)
1189  0268  86          	add	a, (hl)
1190  0269  5F          	ld	e, a
1191  026A  3E 00       	ld	a, +((_sprite_speed_alt) / 256)
1192  026C  CE 00       	adc	a,0x00
1193  026E  57          	ld	d, a
1194  026F  3E 03       	ld	a,0x03
1195  0271  12          	ld	(de), a
1196  0272  79          	ld	a, c
1197  0273  86          	add	a, (hl)
1198  0274  4F          	ld	c, a
1199  0275  78          	ld	a, b
1200  0276  CE 00       	adc	a,0x00
1201  0278  47          	ld	b, a
1202  0279  0A          	ld	a, (bc)
1203  027A  CB 57       	bit	2, a
1204  027C  28 0D       	jr	Z,l_player_kill_00102
1205  027E  2A 00 00    	ld	hl,(_sprite)
1206  0281  26 00       	ld	h,0x00
1207  0283  01 00 00    	ld	bc,_tile
1208  0286  09          	add	hl,bc
1209  0287  36 4C       	ld	(hl),0x4c
1210  0289  18 0B       	jr	l_player_kill_00103
1211  028B              l_player_kill_00102:
1212  028B  2A 00 00    	ld	hl,(_sprite)
1213  028E  26 00       	ld	h,0x00
1214  0290  01 00 00    	ld	bc,_tile
1215  0293  09          	add	hl,bc
1216  0294  36 54       	ld	(hl),0x54
1217  0296              l_player_kill_00103:
1218  0296  CD C4 0B    	call	_player_hit_platform_clear
1219  0299  2A 00 00    	ld	hl,(_sprite)
1220  029C  26 00       	ld	h,0x00
1221  029E  01 00 00    	ld	bc,_col
1222  02A1  09          	add	hl,bc
1223  02A2  4E          	ld	c, (hl)
1224  02A3  2A 00 00    	ld	hl,(_sprite)
1225  02A6  26 00       	ld	h,0x00
1226  02A8  11 00 00    	ld	de,_lin
1227  02AB  19          	add	hl,de
1228  02AC  46          	ld	b, (hl)
1229  02AD  2A 00 00    	ld	hl,(_sprite)
1230  02B0  26 00       	ld	h,0x00
1231  02B2  11 00 00    	ld	de,_tile
1232  02B5  19          	add	hl,de
1233  02B6  56          	ld	d, (hl)
1234  02B7  79          	ld	a,c
1235  02B8  21 00 00    	ld	hl,_sprite
1236  02BB  F5          	push	af
1237  02BC  33          	inc	sp
1238  02BD  4A          	ld	c, d
1239  02BE  7E          	ld	a,(hl)
1240  02BF  C5          	push	bc
1241  02C0  F5          	push	af
1242  02C1  33          	inc	sp
1243  02C2  CD 00 00    	call	_NIRVANAP_spriteT_callee
1244  02C5  01 00 00    	ld	bc,_spr_timer+0
1245  02C8  2A 00 00    	ld	hl,(_sprite)
1246  02CB  26 00       	ld	h,0x00
1247  02CD  29          	add	hl, hl
1248  02CE  09          	add	hl,bc
1249  02CF  ED 5B 00 00 	ld	de,(_curr_time)
1250  02D3  73          	ld	(hl),e
1251  02D4  23          	inc	hl
1252  02D5  72          	ld	(hl),d
1253  02D6  3A 00 00    	ld	a,(_sprite)
1254  02D9  D6 07       	sub	a,0x07
1255  02DB  20 1E       	jr	NZ,l_player_kill_00105
1256  02DD  01 00 00    	ld	bc,_state_a+0
1257  02E0  79          	ld	a, c
1258  02E1  21 00 00    	ld	hl,_sprite
1259  02E4  86          	add	a, (hl)
1260  02E5  5F          	ld	e, a
1261  02E6  78          	ld	a, b
1262  02E7  CE 00       	adc	a,0x00
1263  02E9  57          	ld	d, a
1264  02EA  1A          	ld	a, (de)
1265  02EB  F6 08       	or	a,0x08
1266  02ED  12          	ld	(de), a
1267  02EE  79          	ld	a, c
1268  02EF  86          	add	a, (hl)
1269  02F0  4F          	ld	c, a
1270  02F1  78          	ld	a, b
1271  02F2  CE 00       	adc	a,0x00
1272  02F4  47          	ld	b, a
1273  02F5  0A          	ld	a, (bc)
1274  02F6  E6 EF       	and	a,0xef
1275  02F8  02          	ld	(bc), a
1276  02F9  18 1C       	jr	l_player_kill_00109
1277  02FB              l_player_kill_00105:
1278  02FB  01 00 00    	ld	bc,_state_a+0
1279  02FE  79          	ld	a, c
1280  02FF  21 00 00    	ld	hl,_sprite
1281  0302  86          	add	a, (hl)
1282  0303  5F          	ld	e, a
1283  0304  78          	ld	a, b
1284  0305  CE 00       	adc	a,0x00
1285  0307  57          	ld	d, a
1286  0308  1A          	ld	a, (de)
1287  0309  F6 10       	or	a,0x10
1288  030B  12          	ld	(de), a
1289  030C  79          	ld	a, c
1290  030D  86          	add	a, (hl)
1291  030E  4F          	ld	c, a
1292  030F  78          	ld	a, b
1293  0310  CE 00       	adc	a,0x00
1294  0312  47          	ld	b, a
1295  0313  0A          	ld	a, (bc)
1296  0314  E6 F7       	and	a,0xf7
1297  0316  02          	ld	(bc), a
1298  0317              l_player_kill_00109:
1299  0317  C9          	ret
1300  0318              	SECTION code_compiler
1301  0318              ;	---------------------------------
1302  0318              ; Function player_restart
1303  0318              ; ---------------------------------
1304  0318              _player_restart:
1305  0318  CD 00 00    	call	___sdcc_enter_ix
1306  031B  F5          	push	af
1307  031C  4D          	ld	c, l
1308  031D  21 00 00    	ld	hl,_ay_effect_15
1309  0320  CD 00 00    	call	_ay_fx_play
1310  0323  C5          	push	bc
1311  0324  21 0E 70    	ld	hl,0x700e
1312  0327  E5          	push	hl
1313  0328  21 07 00    	ld	hl,0x0007
1314  032B  E5          	push	hl
1315  032C  CD 00 00    	call	_player_init
1316  032F  F1          	pop	af
1317  0330  F1          	pop	af
1318  0331  C1          	pop	bc
1319  0332  11 00 00    	ld	de,_state+0
1320  0335  69          	ld	l,c
1321  0336  26 00       	ld	h,0x00
1322  0338  19          	add	hl, de
1323  0339  CB E6       	set	4, (hl)
1324  033B  11 00 00    	ld	de,_state_a+0
1325  033E  69          	ld	l,c
1326  033F  26 00       	ld	h,0x00
1327  0341  19          	add	hl, de
1328  0342  CB C6       	set	0, (hl)
1329  0344  11 00 00    	ld	de,_spr_timer+0
1330  0347  69          	ld	l, c
1331  0348  26 00       	ld	h,0x00
1332  034A  29          	add	hl, hl
1333  034B  19          	add	hl,de
1334  034C  E3          	ex	(sp), hl
1335  034D  E1          	pop	hl
1336  034E  ED 5B 00 00 	ld	de,(_curr_time)
1337  0352  E5          	push	hl
1338  0353  73          	ld	(hl), e
1339  0354  23          	inc	hl
1340  0355  72          	ld	(hl), d
1341  0356  11 00 00    	ld	de,_sprite_speed_alt+0
1342  0359  69          	ld	l,c
1343  035A  26 00       	ld	h,0x00
1344  035C  19          	add	hl, de
1345  035D  F1          	pop	af
1346  035E  36 08       	ld	(hl),0x08
1347  0360  DD E1       	pop	ix
1348  0362  C9          	ret
1349  0363              	SECTION code_compiler
1350  0363              ;	---------------------------------
1351  0363              ; Function player_turn
1352  0363              ; ---------------------------------
1353  0363              _player_turn:
1354  0363  21 00 00    	ld	hl,_sprite
1355  0366  CD 00 00    	call	_spr_chktime
1356  0369  7D          	ld	a, l
1357  036A  B7          	or	a, a
1358  036B  C8          	ret	Z
1359  036C  21 00 00    	ld	hl,_k1
1360  036F  E5          	push	hl
1361  0370  2A 00 00    	ld	hl,(_joyfunc1)
1362  0373  CD 00 00    	call	___sdcc_call_hl
1363  0376  F1          	pop	af
1364  0377  7D          	ld	a,l
1365  0378  32 00 00    	ld	(_dirs),a
1366  037B  CD 81 03    	call	_player_move
1367  037E  C3 FC 00    	jp  _player_collision
1368  0381              	SECTION code_compiler
1369  0381              ;	---------------------------------
1370  0381              ; Function player_move
1371  0381              ; ---------------------------------
1372  0381              _player_move:
1373  0381  2A 00 00    	ld	hl,(_sprite)
1374  0384  26 00       	ld	h,0x00
1375  0386  01 00 00    	ld	bc,_lin
1376  0389  09          	add	hl,bc
1377  038A  7E          	ld	a,(hl)
1378  038B  32 00 00    	ld	(_s_lin0),a
1379  038E  2A 00 00    	ld	hl,(_sprite)
1380  0391  26 00       	ld	h,0x00
1381  0393  01 00 00    	ld	bc,_col
1382  0396  09          	add	hl,bc
1383  0397  7E          	ld	a,(hl)
1384  0398  32 00 00    	ld	(_s_col0),a
1385  039B  2A 00 00    	ld	hl,(_sprite)
1386  039E  26 00       	ld	h,0x00
1387  03A0  01 00 00    	ld	bc,_tile
1388  03A3  09          	add	hl,bc
1389  03A4  4E          	ld	c, (hl)
1390  03A5  3A 00 00    	ld	a,(_sprite)
1391  03A8  5F          	ld	e,a
1392  03A9  16 00       	ld	d,0x00
1393  03AB  21 00 00    	ld	hl,_colint
1394  03AE  19          	add	hl,de
1395  03AF  7E          	ld	a,(hl)
1396  03B0  81          	add	a,c
1397  03B1  32 00 00    	ld	(_s_tile0),a
1398  03B4  2A 00 00    	ld	hl,(_sprite)
1399  03B7  26 00       	ld	h,0x00
1400  03B9  01 00 00    	ld	bc,_state
1401  03BC  09          	add	hl,bc
1402  03BD  7E          	ld	a,(hl)
1403  03BE  CB 47       	bit	0,a
1404  03C0  32 00 00    	ld	(_s_state),a
1405  03C3  20 07       	jr	NZ,l_player_move_00113
1406  03C5  21 00 00    	ld	hl,_s_state
1407  03C8  CB 4E       	bit	1, (hl)
1408  03CA  28 46       	jr	Z,l_player_move_00114
1409  03CC              l_player_move_00113:
1410  03CC  CD 10 07    	call	_player_fire
1411  03CF  3A 00 00    	ld	a,(_player_vel_y)
1412  03D2  21 00 00    	ld	hl,_player_vel_y1
1413  03D5  96          	sub	a, (hl)
1414  03D6  E2 DB 03    	jp	PO, l_player_move_00162
1415  03D9  EE 80       	xor	a,0x80
1416  03DB              l_player_move_00162:
1417  03DB  F2 FE 03    	jp	P, l_player_move_00106
1418  03DE  21 00 00    	ld	hl,_dirs
1419  03E1  CB 56       	bit	2, (hl)
1420  03E3  28 09       	jr	Z,l_player_move_00102
1421  03E5  21 00 00    	ld	hl,_s_state
1422  03E8  7E          	ld	a,(hl)
1423  03E9  F6 08       	or	a,0x08
1424  03EB  E6 FB       	and	a,0xfb
1425  03ED  77          	ld	(hl),a
1426  03EE              l_player_move_00102:
1427  03EE  21 00 00    	ld	hl,_dirs
1428  03F1  CB 4E       	bit	1, (hl)
1429  03F3  28 09       	jr	Z,l_player_move_00106
1430  03F5  21 00 00    	ld	hl,_s_state
1431  03F8  7E          	ld	a,(hl)
1432  03F9  F6 04       	or	a,0x04
1433  03FB  E6 F7       	and	a,0xf7
1434  03FD  77          	ld	(hl),a
1435  03FE              l_player_move_00106:
1436  03FE  CD DD 0C    	call	_player_move_jump
1437  0401  7D          	ld	a, l
1438  0402  B7          	or	a, a
1439  0403  28 2E       	jr	Z,l_player_move_00115
1440  0405  3A 00 00    	ld	a,(_player_over_stair)
1441  0408  B7          	or	a, a
1442  0409  20 28       	jr	NZ,l_player_move_00115
1443  040B  2E 60       	ld	l,0x60
1444  040D  CD 44 05    	call	_player_tile
1445  0410  18 21       	jr	l_player_move_00115
1446  0412              l_player_move_00114:
1447  0412  CD 9A 05    	call	_player_move_input
1448  0415  7D          	ld	a, l
1449  0416  B7          	or	a, a
1450  0417  20 17       	jr	NZ,l_player_move_00112
1451  0419  2A 00 00    	ld	hl,(_sprite)
1452  041C  26 00       	ld	h,0x00
1453  041E  01 00 00    	ld	bc,_colint
1454  0421  09          	add	hl,bc
1455  0422  AF          	xor	a,a
1456  0423  77          	ld	(hl),a
1457  0424  2E 70       	ld	l,0x70
1458  0426  CD 44 05    	call	_player_tile
1459  0429  21 00 00    	ld	hl,_s_state
1460  042C  7E          	ld	a,(hl)
1461  042D  E6 F3       	and	a,+(0xf7&0xfb)
1462  042F  77          	ld	(hl),a
1463  0430              l_player_move_00112:
1464  0430  CD 61 0C    	call	_player_check_floor
1465  0433              l_player_move_00115:
1466  0433  CD 00 00    	call	_spr_redraw
1467  0436  7D          	ld	a, l
1468  0437  B7          	or	a, a
1469  0438  28 03       	jr	Z,l_player_move_00118
1470  043A  CD 53 07    	call	_player_check_map
1471  043D              l_player_move_00118:
1472  043D  3A 00 00    	ld	a,(_player_hit_lin)
1473  0440  B7          	or	a, a
1474  0441  28 03       	jr	Z,l_player_move_00120
1475  0443  CD C4 0B    	call	_player_hit_platform_clear
1476  0446              l_player_move_00120:
1477  0446  2A 00 00    	ld	hl,(_sprite)
1478  0449  26 00       	ld	h,0x00
1479  044B  01 00 00    	ld	bc,_state
1480  044E  09          	add	hl,bc
1481  044F  3A 00 00    	ld	a,(_s_state)
1482  0452  77          	ld	(hl),a
1483  0453  2E 00       	ld	l,0x00
1484  0455  C9          	ret
1485  0456              	SECTION code_compiler
1486  0456              ;	---------------------------------
1487  0456              ; Function player_check_stairs_down
1488  0456              ; ---------------------------------
1489  0456              _player_check_stairs_down:
1490  0456  CD 00 00    	call	___sdcc_enter_ix
1491  0459  3B          	dec	sp
1492  045A  2A 00 00    	ld	hl,(_sprite)
1493  045D  26 00       	ld	h,0x00
1494  045F  5D          	ld	e,l
1495  0460  01 00 00    	ld	bc,_col
1496  0463  09          	add	hl,bc
1497  0464  46          	ld	b,(hl)
1498  0465  16 00       	ld	d,0x00
1499  0467  21 00 00    	ld	hl,_lin
1500  046A  19          	add	hl,de
1501  046B  7E          	ld	a,(hl)
1502  046C  C6 10       	add	a,0x10
1503  046E  4F          	ld	c,a
1504  046F  C5          	push	bc
1505  0470  CD 00 00    	call	_spr_calc_index
1506  0473  F1          	pop	af
1507  0474  7D          	ld	a,l
1508  0475  32 00 00    	ld	(_sprite_curr_index),a
1509  0478  4F          	ld	c,a
1510  0479  06 00       	ld	b,0x00
1511  047B  21 00 00    	ld	hl,_scr_map
1512  047E  09          	add	hl,bc
1513  047F  7E          	ld	a,(hl)
1514  0480  4F          	ld	c,a
1515  0481  D6 44       	sub	a,0x44
1516  0483  38 05       	jr	C,l_player_check_stairs_down_00105
1517  0485  3E 47       	ld	a,0x47
1518  0487  91          	sub	a, c
1519  0488  30 04       	jr	NC,l_player_check_stairs_down_00106
1520  048A              l_player_check_stairs_down_00105:
1521  048A  3E 00       	ld	a,0x00
1522  048C  18 02       	jr	l_player_check_stairs_down_00107
1523  048E              l_player_check_stairs_down_00106:
1524  048E  3E 01       	ld	a,0x01
1525  0490              l_player_check_stairs_down_00107:
1526  0490  B7          	or	a, a
1527  0491  28 05       	jr	Z,l_player_check_stairs_down_00103
1528  0493  21 00 00    	ld	hl,_player_over_stair
1529  0496  36 01       	ld	(hl),0x01
1530  0498              l_player_check_stairs_down_00103:
1531  0498  33          	inc	sp
1532  0499  DD E1       	pop	ix
1533  049B  C9          	ret
1534  049C              	SECTION code_compiler
1535  049C              ;	---------------------------------
1536  049C              ; Function player_check_stairs
1537  049C              ; ---------------------------------
1538  049C              _player_check_stairs:
1539  049C  CD 00 00    	call	___sdcc_enter_ix
1540  049F  3B          	dec	sp
1541  04A0  5D          	ld	e, l
1542  04A1  2A 00 00    	ld	hl,(_sprite)
1543  04A4  26 00       	ld	h,0x00
1544  04A6  01 00 00    	ld	bc,_col
1545  04A9  09          	add	hl,bc
1546  04AA  7E          	ld	a,(hl)
1547  04AB  83          	add	a,e
1548  04AC  57          	ld	d,a
1549  04AD  2A 00 00    	ld	hl,(_sprite)
1550  04B0  26 00       	ld	h,0x00
1551  04B2  01 00 00    	ld	bc,_lin
1552  04B5  09          	add	hl,bc
1553  04B6  46          	ld	b, (hl)
1554  04B7  D5          	push	de
1555  04B8  58          	ld	e,b
1556  04B9  D5          	push	de
1557  04BA  CD 00 00    	call	_spr_calc_index
1558  04BD  F1          	pop	af
1559  04BE  D1          	pop	de
1560  04BF  7D          	ld	a,l
1561  04C0  32 00 00    	ld	(_sprite_curr_index),a
1562  04C3  4F          	ld	c,a
1563  04C4  06 00       	ld	b,0x00
1564  04C6  21 00 00    	ld	hl,_scr_map
1565  04C9  09          	add	hl,bc
1566  04CA  7E          	ld	a,(hl)
1567  04CB  4F          	ld	c,a
1568  04CC  D6 44       	sub	a,0x44
1569  04CE  38 05       	jr	C,l_player_check_stairs_00111
1570  04D0  3E 47       	ld	a,0x47
1571  04D2  91          	sub	a, c
1572  04D3  30 04       	jr	NC,l_player_check_stairs_00112
1573  04D5              l_player_check_stairs_00111:
1574  04D5  0E 00       	ld	c,0x00
1575  04D7  18 02       	jr	l_player_check_stairs_00113
1576  04D9              l_player_check_stairs_00112:
1577  04D9  0E 01       	ld	c,0x01
1578  04DB              l_player_check_stairs_00113:
1579  04DB  3E 00       	ld	a, +((_col) & 0xFF)
1580  04DD  21 00 00    	ld	hl,_sprite
1581  04E0  86          	add	a, (hl)
1582  04E1  6F          	ld	l, a
1583  04E2  3E 00       	ld	a, +((_col) / 256)
1584  04E4  CE 00       	adc	a,0x00
1585  04E6  67          	ld	h, a
1586  04E7  7E          	ld	a, (hl)
1587  04E8  83          	add	a, e
1588  04E9  47          	ld	b, a
1589  04EA  2A 00 00    	ld	hl,(_sprite)
1590  04ED  26 00       	ld	h,0x00
1591  04EF  11 00 00    	ld	de,_lin
1592  04F2  19          	add	hl,de
1593  04F3  7E          	ld	a,(hl)
1594  04F4  C6 0F       	add	a,0x0f
1595  04F6  57          	ld	d, a
1596  04F7  C5          	push	bc
1597  04F8  4A          	ld	c, d
1598  04F9  C5          	push	bc
1599  04FA  CD 00 00    	call	_spr_calc_index
1600  04FD  F1          	pop	af
1601  04FE  C1          	pop	bc
1602  04FF  7D          	ld	a,l
1603  0500  32 00 00    	ld	(_sprite_curr_index),a
1604  0503  5F          	ld	e,a
1605  0504  16 00       	ld	d,0x00
1606  0506  21 00 00    	ld	hl,_scr_map
1607  0509  19          	add	hl,de
1608  050A  7E          	ld	a,(hl)
1609  050B  47          	ld	b,a
1610  050C  D6 44       	sub	a,0x44
1611  050E  38 05       	jr	C,l_player_check_stairs_00114
1612  0510  3E 47       	ld	a,0x47
1613  0512  90          	sub	a, b
1614  0513  30 04       	jr	NC,l_player_check_stairs_00115
1615  0515              l_player_check_stairs_00114:
1616  0515  06 00       	ld	b,0x00
1617  0517  18 02       	jr	l_player_check_stairs_00116
1618  0519              l_player_check_stairs_00115:
1619  0519  06 01       	ld	b,0x01
1620  051B              l_player_check_stairs_00116:
1621  051B  79          	ld	a, c
1622  051C  B7          	or	a,a
1623  051D  20 03       	jr	NZ,l_player_check_stairs_00105
1624  051F  B0          	or	a,b
1625  0520  28 10       	jr	Z,l_player_check_stairs_00106
1626  0522              l_player_check_stairs_00105:
1627  0522  21 00 00    	ld	hl,_player_over_stair
1628  0525  7E          	ld	a, (hl)
1629  0526  B7          	or	a, a
1630  0527  20 17       	jr	NZ,l_player_check_stairs_00109
1631  0529  36 01       	ld	(hl),0x01
1632  052B  2E 72       	ld	l,0x72
1633  052D  CD 44 05    	call	_player_tile
1634  0530  18 0E       	jr	l_player_check_stairs_00109
1635  0532              l_player_check_stairs_00106:
1636  0532  21 00 00    	ld	hl,_player_over_stair
1637  0535  7E          	ld	a, (hl)
1638  0536  B7          	or	a, a
1639  0537  28 07       	jr	Z,l_player_check_stairs_00109
1640  0539  36 00       	ld	(hl),0x00
1641  053B  2E 60       	ld	l,0x60
1642  053D  CD 44 05    	call	_player_tile
1643  0540              l_player_check_stairs_00109:
1644  0540  33          	inc	sp
1645  0541  DD E1       	pop	ix
1646  0543  C9          	ret
1647  0544              	SECTION code_compiler
1648  0544              ;	---------------------------------
1649  0544              ; Function player_tile
1650  0544              ; ---------------------------------
1651  0544              _player_tile:
1652  0544  45          	ld	b, l
1653  0545  3A 00 00    	ld	a,(_player_over_stair)
1654  0548  B7          	or	a, a
1655  0549  28 0D       	jr	Z,l_player_tile_00105
1656  054B  2A 00 00    	ld	hl,(_sprite)
1657  054E  26 00       	ld	h,0x00
1658  0550  01 00 00    	ld	bc,_tile
1659  0553  09          	add	hl,bc
1660  0554  36 72       	ld	(hl),0x72
1661  0556  18 41       	jr	l_player_tile_00107
1662  0558              l_player_tile_00105:
1663  0558  78          	ld	a, b
1664  0559  D6 70       	sub	a,0x70
1665  055B  20 1F       	jr	NZ,l_player_tile_00102
1666  055D  2A 00 00    	ld	hl,(_sprite)
1667  0560  26 00       	ld	h,0x00
1668  0562  11 00 00    	ld	de,_tile
1669  0565  19          	add	hl,de
1670  0566  E5          	push	hl
1671  0567  3E 01       	ld	a,0x01
1672  0569  21 00 00    	ld	hl,_sprite
1673  056C  F5          	push	af
1674  056D  33          	inc	sp
1675  056E  7E          	ld	a, (hl)
1676  056F  48          	ld	c,b
1677  0570  47          	ld	b,a
1678  0571  C5          	push	bc
1679  0572  CD 00 00    	call	_spr_tile_dir
1680  0575  F1          	pop	af
1681  0576  33          	inc	sp
1682  0577  D1          	pop	de
1683  0578  7D          	ld	a,l
1684  0579  12          	ld	(de), a
1685  057A  18 1D       	jr	l_player_tile_00107
1686  057C              l_player_tile_00102:
1687  057C  2A 00 00    	ld	hl,(_sprite)
1688  057F  26 00       	ld	h,0x00
1689  0581  11 00 00    	ld	de,_tile
1690  0584  19          	add	hl,de
1691  0585  E5          	push	hl
1692  0586  3E 08       	ld	a,0x08
1693  0588  21 00 00    	ld	hl,_sprite
1694  058B  F5          	push	af
1695  058C  33          	inc	sp
1696  058D  7E          	ld	a, (hl)
1697  058E  48          	ld	c,b
1698  058F  47          	ld	b,a
1699  0590  C5          	push	bc
1700  0591  CD 00 00    	call	_spr_tile_dir
1701  0594  F1          	pop	af
1702  0595  33          	inc	sp
1703  0596  D1          	pop	de
1704  0597  7D          	ld	a,l
1705  0598  12          	ld	(de), a
1706  0599              l_player_tile_00107:
1707  0599  C9          	ret
1708  059A              	SECTION code_compiler
1709  059A              ;	---------------------------------
1710  059A              ; Function player_move_input
1711  059A              ; ---------------------------------
1712  059A              _player_move_input:
1713  059A  CD BD 00    	call	_player_check_input
1714  059D  7D          	ld	a, l
1715  059E  B7          	or	a, a
1716  059F  CA 0D 07    	jp	Z, l_player_move_input_00136
1717  05A2  CD 10 07    	call	_player_fire
1718  05A5  7D          	ld	a, l
1719  05A6  B7          	or	a, a
1720  05A7  28 0A       	jr	Z,l_player_move_input_00102
1721  05A9  21 00 00    	ld	hl,_dirs
1722  05AC  36 00       	ld	(hl),0x00
1723  05AE  2E 00       	ld	l,0x00
1724  05B0  C3 0F 07    	jp	l_player_move_input_00137
1725  05B3              l_player_move_input_00102:
1726  05B3  21 00 00    	ld	hl,_dirs
1727  05B6  CB 7E       	bit	7, (hl)
1728  05B8  28 67       	jr	Z,l_player_move_input_00106
1729  05BA  21 00 00    	ld	hl,_player_vel_inc
1730  05BD  36 01       	ld	(hl),0x01
1731  05BF  CD 00 00    	call	_ay_is_playing
1732  05C2  7D          	ld	a, l
1733  05C3  D6 03       	sub	a,0x03
1734  05C5  28 06       	jr	Z,l_player_move_input_00104
1735  05C7  21 00 00    	ld	hl,_ay_effect_03
1736  05CA  CD 00 00    	call	_ay_fx_play
1737  05CD              l_player_move_input_00104:
1738  05CD  21 00 00    	ld	hl,_player_over_stair
1739  05D0  36 00       	ld	(hl),0x00
1740  05D2  CD 00 00    	call	_sound_jump
1741  05D5  21 00 00    	ld	hl,_s_state
1742  05D8  7E          	ld	a,(hl)
1743  05D9  F6 01       	or	a,0x01
1744  05DB  E6 FD       	and	a,0xfd
1745  05DD  77          	ld	(hl),a
1746  05DE  2A 00 00    	ld	hl,(_sprite)
1747  05E1  26 00       	ld	h,0x00
1748  05E3  01 00 00    	ld	bc,_jump_lin
1749  05E6  09          	add	hl,bc
1750  05E7  4D          	ld	c,l
1751  05E8  44          	ld	b,h
1752  05E9  2A 00 00    	ld	hl,(_sprite)
1753  05EC  26 00       	ld	h,0x00
1754  05EE  11 00 00    	ld	de,_lin
1755  05F1  19          	add	hl,de
1756  05F2  7E          	ld	a,(hl)
1757  05F3  02          	ld	(bc),a
1758  05F4  2A 00 00    	ld	hl,(_sprite)
1759  05F7  26 00       	ld	h,0x00
1760  05F9  01 00 00    	ld	bc,_state
1761  05FC  09          	add	hl,bc
1762  05FD  3A 00 00    	ld	a,(_s_state)
1763  0600  77          	ld	(hl),a
1764  0601  2E 64       	ld	l,0x64
1765  0603  CD 44 05    	call	_player_tile
1766  0606  2A 00 00    	ld	hl,(_sprite)
1767  0609  26 00       	ld	h,0x00
1768  060B  01 00 00    	ld	bc,_sprite_speed_alt
1769  060E  09          	add	hl,bc
1770  060F  36 02       	ld	(hl),0x02
1771  0611  21 00 00    	ld	hl,_player_slide
1772  0614  36 00       	ld	(hl),0x00
1773  0616  3A 00 00    	ld	a,(_player_vel_y0)
1774  0619  32 00 00    	ld	(_player_vel_y),a
1775  061C  2E 01       	ld	l,0x01
1776  061E  C3 0F 07    	jp	l_player_move_input_00137
1777  0621              l_player_move_input_00106:
1778  0621  21 00 00    	ld	hl,_dirs
1779  0624  CB 5E       	bit	3, (hl)
1780  0626  28 33       	jr	Z,l_player_move_input_00110
1781  0628  21 00 00    	ld	hl,_s_state
1782  062B  7E          	ld	a,(hl)
1783  062C  F6 04       	or	a,0x04
1784  062E  E6 F7       	and	a,0xf7
1785  0630  77          	ld	(hl),a
1786  0631  01 00 00    	ld	bc,_state_a+0
1787  0634  79          	ld	a, c
1788  0635  21 00 00    	ld	hl,_sprite
1789  0638  86          	add	a, (hl)
1790  0639  5F          	ld	e, a
1791  063A  78          	ld	a, b
1792  063B  CE 00       	adc	a,0x00
1793  063D  57          	ld	d, a
1794  063E  1A          	ld	a, (de)
1795  063F  F6 10       	or	a,0x10
1796  0641  12          	ld	(de), a
1797  0642  79          	ld	a, c
1798  0643  86          	add	a, (hl)
1799  0644  4F          	ld	c, a
1800  0645  78          	ld	a, b
1801  0646  CE 00       	adc	a,0x00
1802  0648  47          	ld	b, a
1803  0649  0A          	ld	a, (bc)
1804  064A  E6 F7       	and	a,0xf7
1805  064C  02          	ld	(bc), a
1806  064D  3A 00 00    	ld	a,(_player_over_stair)
1807  0650  B7          	or	a, a
1808  0651  28 05       	jr	Z,l_player_move_input_00108
1809  0653  2E 00       	ld	l,0x00
1810  0655  CD 9C 04    	call	_player_check_stairs
1811  0658              l_player_move_input_00108:
1812  0658  CD 00 00    	call	_spr_move_horizontal
1813  065B              l_player_move_input_00110:
1814  065B  21 00 00    	ld	hl,_dirs
1815  065E  CB 56       	bit	2, (hl)
1816  0660  28 33       	jr	Z,l_player_move_input_00114
1817  0662  21 00 00    	ld	hl,_s_state
1818  0665  7E          	ld	a,(hl)
1819  0666  F6 08       	or	a,0x08
1820  0668  E6 FB       	and	a,0xfb
1821  066A  77          	ld	(hl),a
1822  066B  01 00 00    	ld	bc,_state_a+0
1823  066E  79          	ld	a, c
1824  066F  21 00 00    	ld	hl,_sprite
1825  0672  86          	add	a, (hl)
1826  0673  5F          	ld	e, a
1827  0674  78          	ld	a, b
1828  0675  CE 00       	adc	a,0x00
1829  0677  57          	ld	d, a
1830  0678  1A          	ld	a, (de)
1831  0679  F6 08       	or	a,0x08
1832  067B  12          	ld	(de), a
1833  067C  79          	ld	a, c
1834  067D  86          	add	a, (hl)
1835  067E  4F          	ld	c, a
1836  067F  78          	ld	a, b
1837  0680  CE 00       	adc	a,0x00
1838  0682  47          	ld	b, a
1839  0683  0A          	ld	a, (bc)
1840  0684  E6 EF       	and	a,0xef
1841  0686  02          	ld	(bc), a
1842  0687  3A 00 00    	ld	a,(_player_over_stair)
1843  068A  B7          	or	a, a
1844  068B  28 05       	jr	Z,l_player_move_input_00112
1845  068D  2E 00       	ld	l,0x00
1846  068F  CD 9C 04    	call	_player_check_stairs
1847  0692              l_player_move_input_00112:
1848  0692  CD 00 00    	call	_spr_move_horizontal
1849  0695              l_player_move_input_00114:
1850  0695  21 00 00    	ld	hl,_dirs
1851  0698  CB 46       	bit	0, (hl)
1852  069A  28 2B       	jr	Z,l_player_move_input_00124
1853  069C  2E 00       	ld	l,0x00
1854  069E  CD 9C 04    	call	_player_check_stairs
1855  06A1  3A 00 00    	ld	a,(_player_over_stair)
1856  06A4  B7          	or	a, a
1857  06A5  28 0E       	jr	Z,l_player_move_input_00121
1858  06A7  CD 00 00    	call	_spr_move_up
1859  06AA  7D          	ld	a, l
1860  06AB  B7          	or	a, a
1861  06AC  28 19       	jr	Z,l_player_move_input_00124
1862  06AE  21 00 00    	ld	hl,_player_over_stair
1863  06B1  36 00       	ld	(hl),0x00
1864  06B3  18 12       	jr	l_player_move_input_00124
1865  06B5              l_player_move_input_00121:
1866  06B5  21 00 00    	ld	hl,_dirs
1867  06B8  CB 5E       	bit	3, (hl)
1868  06BA  20 0B       	jr	NZ,l_player_move_input_00124
1869  06BC  21 00 00    	ld	hl,_dirs
1870  06BF  CB 56       	bit	2, (hl)
1871  06C1  20 04       	jr	NZ,l_player_move_input_00124
1872  06C3  2E 00       	ld	l,0x00
1873  06C5  18 48       	jr	l_player_move_input_00137
1874  06C7              l_player_move_input_00124:
1875  06C7  21 00 00    	ld	hl,_dirs
1876  06CA  CB 4E       	bit	1, (hl)
1877  06CC  28 29       	jr	Z,l_player_move_input_00134
1878  06CE  CD 56 04    	call	_player_check_stairs_down
1879  06D1  3A 00 00    	ld	a,(_player_over_stair)
1880  06D4  B7          	or	a, a
1881  06D5  28 0E       	jr	Z,l_player_move_input_00131
1882  06D7  CD 00 00    	call	_spr_move_down
1883  06DA  7D          	ld	a, l
1884  06DB  B7          	or	a, a
1885  06DC  28 19       	jr	Z,l_player_move_input_00134
1886  06DE  21 00 00    	ld	hl,_player_over_stair
1887  06E1  36 00       	ld	(hl),0x00
1888  06E3  18 12       	jr	l_player_move_input_00134
1889  06E5              l_player_move_input_00131:
1890  06E5  21 00 00    	ld	hl,_dirs
1891  06E8  CB 5E       	bit	3, (hl)
1892  06EA  20 0B       	jr	NZ,l_player_move_input_00134
1893  06EC  21 00 00    	ld	hl,_dirs
1894  06EF  CB 56       	bit	2, (hl)
1895  06F1  20 04       	jr	NZ,l_player_move_input_00134
1896  06F3  2E 00       	ld	l,0x00
1897  06F5  18 18       	jr	l_player_move_input_00137
1898  06F7              l_player_move_input_00134:
1899  06F7  2A 00 00    	ld	hl,(_sprite)
1900  06FA  26 00       	ld	h,0x00
1901  06FC  01 00 00    	ld	bc,_state
1902  06FF  09          	add	hl,bc
1903  0700  3A 00 00    	ld	a,(_s_state)
1904  0703  77          	ld	(hl),a
1905  0704  2E 60       	ld	l,0x60
1906  0706  CD 44 05    	call	_player_tile
1907  0709  2E 01       	ld	l,0x01
1908  070B  18 02       	jr	l_player_move_input_00137
1909  070D              l_player_move_input_00136:
1910  070D  2E 00       	ld	l,0x00
1911  070F              l_player_move_input_00137:
1912  070F  C9          	ret
1913  0710              	SECTION code_compiler
1914  0710              ;	---------------------------------
1915  0710              ; Function player_fire
1916  0710              ; ---------------------------------
1917  0710              _player_fire:
1918  0710  21 00 00    	ld	hl,_dirs
1919  0713  CB 7E       	bit	7, (hl)
1920  0715  28 39       	jr	Z,l_player_fire_00108
1921  0717  21 00 00    	ld	hl,_dirs
1922  071A  CB 4E       	bit	1, (hl)
1923  071C  28 32       	jr	Z,l_player_fire_00108
1924  071E  21 00 00    	ld	hl,_player_mana
1925  0721  7E          	ld	a, (hl)
1926  0722  B7          	or	a, a
1927  0723  28 27       	jr	Z,l_player_fire_00105
1928  0725  3A 07 00    	ld	a,(_bullet_col + 0x0007)
1929  0728  3C          	inc	a
1930  0729  20 21       	jr	NZ,l_player_fire_00105
1931  072B  3E 05       	ld	a,0x05
1932  072D  96          	sub	a, (hl)
1933  072E  30 0C       	jr	NC,l_player_fire_00102
1934  0730  CD 00 00    	call	_sound_hit_enemy
1935  0733  21 00 00    	ld	hl,_player_mana
1936  0736  7E          	ld	a, (hl)
1937  0737  C6 FB       	add	a,0xfb
1938  0739  77          	ld	(hl), a
1939  073A  18 05       	jr	l_player_fire_00103
1940  073C              l_player_fire_00102:
1941  073C  21 00 00    	ld	hl,_player_mana
1942  073F  36 00       	ld	(hl),0x00
1943  0741              l_player_fire_00103:
1944  0741  CD 00 00    	call	_game_update_stats
1945  0744  21 07 78    	ld	hl,0x7807
1946  0747  E5          	push	hl
1947  0748  CD 00 00    	call	_game_shoot_fire
1948  074B  F1          	pop	af
1949  074C              l_player_fire_00105:
1950  074C  2E 01       	ld	l,0x01
1951  074E  18 02       	jr	l_player_fire_00110
1952  0750              l_player_fire_00108:
1953  0750  2E 00       	ld	l,0x00
1954  0752              l_player_fire_00110:
1955  0752  C9          	ret
1956  0753              	SECTION code_compiler
1957  0753              ;	---------------------------------
1958  0753              ; Function player_check_map
1959  0753              ; ---------------------------------
1960  0753              _player_check_map:
1961  0753  2A 00 00    	ld	hl,(_sprite)
1962  0756  26 00       	ld	h,0x00
1963  0758  5D          	ld	e,l
1964  0759  01 00 00    	ld	bc,_col
1965  075C  09          	add	hl,bc
1966  075D  46          	ld	b,(hl)
1967  075E  16 00       	ld	d,0x00
1968  0760  21 00 00    	ld	hl,_lin
1969  0763  19          	add	hl,de
1970  0764  4E          	ld	c, (hl)
1971  0765  C5          	push	bc
1972  0766  CD 00 00    	call	_spr_calc_index
1973  0769  F1          	pop	af
1974  076A  7D          	ld	a,l
1975  076B  32 00 00    	ld	(_sprite_curr_index),a
1976  076E  2A 00 00    	ld	hl,(_sprite)
1977  0771  26 00       	ld	h,0x00
1978  0773  01 00 00    	ld	bc,_col
1979  0776  09          	add	hl,bc
1980  0777  4E          	ld	c, (hl)
1981  0778  3A 00 00    	ld	a,(_sprite)
1982  077B  5F          	ld	e,a
1983  077C  16 00       	ld	d,0x00
1984  077E  21 00 00    	ld	hl,_lin
1985  0781  19          	add	hl,de
1986  0782  7E          	ld	a,(hl)
1987  0783  E6 0F       	and	a,0x0f
1988  0785  CB 41       	bit	0, c
1989  0787  20 17       	jr	NZ,l_player_check_map_00108
1990  0789  B7          	or	a, a
1991  078A  20 05       	jr	NZ,l_player_check_map_00102
1992  078C  CD CB 07    	call	_player_pick_item
1993  078F  18 39       	jr	l_player_check_map_00110
1994  0791              l_player_check_map_00102:
1995  0791  CD CB 07    	call	_player_pick_item
1996  0794  21 00 00    	ld	hl,_sprite_curr_index
1997  0797  7E          	ld	a, (hl)
1998  0798  C6 10       	add	a,0x10
1999  079A  77          	ld	(hl), a
2000  079B  CD CB 07    	call	_player_pick_item
2001  079E  18 2A       	jr	l_player_check_map_00110
2002  07A0              l_player_check_map_00108:
2003  07A0  B7          	or	a, a
2004  07A1  20 0C       	jr	NZ,l_player_check_map_00105
2005  07A3  CD CB 07    	call	_player_pick_item
2006  07A6  21 00 00    	ld	hl,_sprite_curr_index
2007  07A9  34          	inc	(hl)
2008  07AA  CD CB 07    	call	_player_pick_item
2009  07AD  18 1B       	jr	l_player_check_map_00110
2010  07AF              l_player_check_map_00105:
2011  07AF  CD CB 07    	call	_player_pick_item
2012  07B2  21 00 00    	ld	hl,_sprite_curr_index
2013  07B5  34          	inc	(hl)
2014  07B6  CD CB 07    	call	_player_pick_item
2015  07B9  21 00 00    	ld	hl,_sprite_curr_index
2016  07BC  7E          	ld	a, (hl)
2017  07BD  C6 0F       	add	a,0x0f
2018  07BF  77          	ld	(hl), a
2019  07C0  CD CB 07    	call	_player_pick_item
2020  07C3  21 00 00    	ld	hl,_sprite_curr_index
2021  07C6  34          	inc	(hl)
2022  07C7  CD CB 07    	call	_player_pick_item
2023  07CA              l_player_check_map_00110:
2024  07CA  C9          	ret
2025  07CB              	SECTION code_compiler
2026  07CB              ;	---------------------------------
2027  07CB              ; Function player_pick_item
2028  07CB              ; ---------------------------------
2029  07CB              _player_pick_item:
2030  07CB  2A 00 00    	ld	hl,(_sprite_curr_index)
2031  07CE  26 00       	ld	h,0x00
2032  07D0  01 00 00    	ld	bc,_scr_map
2033  07D3  09          	add	hl,bc
2034  07D4  7E          	ld	a,(hl)
2035  07D5  4F          	ld	c,a
2036  07D6  D6 24       	sub	a,0x24
2037  07D8  DA 44 09    	jp	C,l_player_pick_item_00117
2038  07DB  3E 2F       	ld	a,0x2f
2039  07DD  91          	sub	a,c
2040  07DE  DA 44 09    	jp	C,l_player_pick_item_00117
2041  07E1  44          	ld	b,h
2042  07E2  CD 00 00    	call	_ay_reset
2043  07E5  21 00 00    	ld	hl,_ay_effect_10
2044  07E8  CD 00 00    	call	_ay_fx_play
2045  07EB  C5          	push	bc
2046  07EC  CD 00 00    	call	_sound_coin
2047  07EF  C1          	pop	bc
2048  07F0  2A 00 00    	ld	hl,(_sprite_curr_index)
2049  07F3  26 00       	ld	h,0x00
2050  07F5  11 00 00    	ld	de,_scr_map
2051  07F8  19          	add	hl,de
2052  07F9  AF          	xor	a,a
2053  07FA  77          	ld	(hl),a
2054  07FB  3A 00 00    	ld	a,(_sprite_curr_index)
2055  07FE  5F          	ld	e,a
2056  07FF  16 00       	ld	d,0x00
2057  0801  C5          	push	bc
2058  0802  D5          	push	de
2059  0803  CD 00 00    	call	_game_obj_set
2060  0806  F1          	pop	af
2061  0807  C1          	pop	bc
2062  0808  3A 00 00    	ld	a,(_sprite_curr_index)
2063  080B  07          	rlca
2064  080C  07          	rlca
2065  080D  07          	rlca
2066  080E  07          	rlca
2067  080F  E6 0F       	and	a,0x0f
2068  0811  07          	rlca
2069  0812  07          	rlca
2070  0813  07          	rlca
2071  0814  07          	rlca
2072  0815  E6 F0       	and	a,0xf0
2073  0817  32 00 00    	ld	(_s_lin1),a
2074  081A  3A 00 00    	ld	a,(_sprite_curr_index)
2075  081D  E6 0F       	and	a,0x0f
2076  081F  87          	add	a, a
2077  0820  32 00 00    	ld	(_s_col1),a
2078  0823  C5          	push	bc
2079  0824  21 00 00    	ld	hl,0x0000
2080  0827  E5          	push	hl
2081  0828  21 84 03    	ld	hl,0x0384
2082  082B  E5          	push	hl
2083  082C  F5          	push	af
2084  082D  33          	inc	sp
2085  082E  3A 00 00    	ld	a,(_s_lin1)
2086  0831  F5          	push	af
2087  0832  33          	inc	sp
2088  0833  CD 00 00    	call	_spr_add_anim
2089  0836  F1          	pop	af
2090  0837  F1          	pop	af
2091  0838  F1          	pop	af
2092  0839  C1          	pop	bc
2093  083A  79          	ld	a, c
2094  083B  D6 24       	sub	a,0x24
2095  083D  DA 44 09    	jp	C, l_player_pick_item_00117
2096  0840  3E 2F       	ld	a,0x2f
2097  0842  91          	sub	a, c
2098  0843  DA 44 09    	jp	C, l_player_pick_item_00117
2099  0846  79          	ld	a, c
2100  0847  C6 DC       	add	a,0xdc
2101  0849  4F          	ld	c, a
2102  084A  06 00       	ld	b,0x00
2103  084C  21 53 08    	ld	hl,l_player_pick_item_00135
2104  084F  09          	add	hl, bc
2105  0850  09          	add	hl, bc
2106  0851  09          	add	hl, bc
2107  0852  E9          	jp	(hl)
2108  0853              l_player_pick_item_00135:
2109  0853  C3 77 08    	jp	l_player_pick_item_00101
2110  0856  C3 8F 08    	jp	l_player_pick_item_00102
2111  0859  C3 A7 08    	jp	l_player_pick_item_00103
2112  085C  C3 BF 08    	jp	l_player_pick_item_00104
2113  085F  C3 D6 08    	jp	l_player_pick_item_00105
2114  0862  C3 E6 08    	jp	l_player_pick_item_00107
2115  0865  C3 F6 08    	jp	l_player_pick_item_00108
2116  0868  C3 06 09    	jp	l_player_pick_item_00109
2117  086B  C3 16 09    	jp	l_player_pick_item_00110
2118  086E  C3 26 09    	jp	l_player_pick_item_00111
2119  0871  C3 36 09    	jp	l_player_pick_item_00112
2120  0874  C3 DE 08    	jp	l_player_pick_item_00106
2121  0877              l_player_pick_item_00101:
2122  0877  21 00 00    	ld	hl,_player_keys
2123  087A  36 01       	ld	(hl),0x01
2124  087C  21 00 00    	ld	hl,_screen_ink
2125  087F  36 07       	ld	(hl),0x07
2126  0881  21 00 00    	ld	hl,___str_0
2127  0884  E5          	push	hl
2128  0885  21 14 14    	ld	hl,0x1414
2129  0888  E5          	push	hl
2130  0889  CD 00 00    	call	_zx_print_str
2131  088C  C3 44 09    	jp	l_player_pick_item_00117
2132  088F              l_player_pick_item_00102:
2133  088F  21 01 00    	ld	hl, +(_player_keys + 0x0001)
2134  0892  36 01       	ld	(hl),0x01
2135  0894  21 00 00    	ld	hl,_screen_ink
2136  0897  36 02       	ld	(hl),0x02
2137  0899  21 00 00    	ld	hl,___str_0
2138  089C  E5          	push	hl
2139  089D  21 14 15    	ld	hl,0x1514
2140  08A0  E5          	push	hl
2141  08A1  CD 00 00    	call	_zx_print_str
2142  08A4  C3 44 09    	jp	l_player_pick_item_00117
2143  08A7              l_player_pick_item_00103:
2144  08A7  21 02 00    	ld	hl, +(_player_keys + 0x0002)
2145  08AA  36 01       	ld	(hl),0x01
2146  08AC  21 00 00    	ld	hl,_screen_ink
2147  08AF  36 04       	ld	(hl),0x04
2148  08B1  21 00 00    	ld	hl,___str_0
2149  08B4  E5          	push	hl
2150  08B5  21 14 16    	ld	hl,0x1614
2151  08B8  E5          	push	hl
2152  08B9  CD 00 00    	call	_zx_print_str
2153  08BC  C3 44 09    	jp	l_player_pick_item_00117
2154  08BF              l_player_pick_item_00104:
2155  08BF  21 03 00    	ld	hl, +(_player_keys + 0x0003)
2156  08C2  36 01       	ld	(hl),0x01
2157  08C4  21 00 00    	ld	hl,_screen_ink
2158  08C7  36 05       	ld	(hl),0x05
2159  08C9  21 00 00    	ld	hl,___str_0
2160  08CC  E5          	push	hl
2161  08CD  21 14 17    	ld	hl,0x1714
2162  08D0  E5          	push	hl
2163  08D1  CD 00 00    	call	_zx_print_str
2164  08D4  18 6E       	jr	l_player_pick_item_00117
2165  08D6              l_player_pick_item_00105:
2166  08D6  21 01 00    	ld	hl,0x0001
2167  08D9  CD FD 0B    	call	_player_score_add
2168  08DC  18 66       	jr	l_player_pick_item_00117
2169  08DE              l_player_pick_item_00106:
2170  08DE  21 0A 00    	ld	hl,0x000a
2171  08E1  CD FD 0B    	call	_player_score_add
2172  08E4  18 5E       	jr	l_player_pick_item_00117
2173  08E6              l_player_pick_item_00107:
2174  08E6  21 00 00    	ld	hl,_player_str
2175  08E9  34          	inc	(hl)
2176  08EA  21 00 00    	ld	hl,_player_max_vita
2177  08ED  7E          	ld	a, (hl)
2178  08EE  C6 0A       	add	a,0x0a
2179  08F0  77          	ld	(hl), a
2180  08F1  CD 00 00    	call	_game_update_stats
2181  08F4  18 4E       	jr	l_player_pick_item_00117
2182  08F6              l_player_pick_item_00108:
2183  08F6  21 00 00    	ld	hl,_player_str
2184  08F9  34          	inc	(hl)
2185  08FA  21 00 00    	ld	hl,_player_max_vita
2186  08FD  7E          	ld	a, (hl)
2187  08FE  C6 0A       	add	a,0x0a
2188  0900  77          	ld	(hl), a
2189  0901  CD 00 00    	call	_game_update_stats
2190  0904  18 3E       	jr	l_player_pick_item_00117
2191  0906              l_player_pick_item_00109:
2192  0906  21 00 00    	ld	hl,_player_str
2193  0909  34          	inc	(hl)
2194  090A  21 00 00    	ld	hl,_player_max_vita
2195  090D  7E          	ld	a, (hl)
2196  090E  C6 0A       	add	a,0x0a
2197  0910  77          	ld	(hl), a
2198  0911  CD 00 00    	call	_game_update_stats
2199  0914  18 2E       	jr	l_player_pick_item_00117
2200  0916              l_player_pick_item_00110:
2201  0916  21 00 00    	ld	hl,_player_int
2202  0919  34          	inc	(hl)
2203  091A  21 00 00    	ld	hl,_player_max_mana
2204  091D  7E          	ld	a, (hl)
2205  091E  C6 0A       	add	a,0x0a
2206  0920  77          	ld	(hl), a
2207  0921  CD 00 00    	call	_game_update_stats
2208  0924  18 1E       	jr	l_player_pick_item_00117
2209  0926              l_player_pick_item_00111:
2210  0926  21 00 00    	ld	hl,_player_int
2211  0929  34          	inc	(hl)
2212  092A  21 00 00    	ld	hl,_player_max_mana
2213  092D  7E          	ld	a, (hl)
2214  092E  C6 0A       	add	a,0x0a
2215  0930  77          	ld	(hl), a
2216  0931  CD 00 00    	call	_game_update_stats
2217  0934  18 0E       	jr	l_player_pick_item_00117
2218  0936              l_player_pick_item_00112:
2219  0936  21 00 00    	ld	hl,_player_int
2220  0939  34          	inc	(hl)
2221  093A  21 00 00    	ld	hl,_player_max_mana
2222  093D  7E          	ld	a, (hl)
2223  093E  C6 0A       	add	a,0x0a
2224  0940  77          	ld	(hl), a
2225  0941  CD 00 00    	call	_game_update_stats
2226  0944              l_player_pick_item_00117:
2227  0944  C9          	ret
2228  0945              	SECTION rodata_compiler
2229  0000              ___str_0:
2230  0000  5D          	DEFM "]"
2231  0001  00          	DEFB 0x00
2232  0002              	SECTION code_compiler
2233  0945              ;	---------------------------------
2234  0945              ; Function player_hit_platform
2235  0945              ; ---------------------------------
2236  0945              _player_hit_platform:
2237  0945  3A 00 00    	ld	a,(_player_hit_lin)
2238  0948  B7          	or	a, a
2239  0949  C2 C1 0B    	jp	NZ, l_player_hit_platform_00139
2240  094C  2A 00 00    	ld	hl,(_sprite)
2241  094F  26 00       	ld	h,0x00
2242  0951  01 00 00    	ld	bc,_lin
2243  0954  09          	add	hl,bc
2244  0955  4E          	ld	c,(hl)
2245  0956  3E 10       	ld	a,0x10
2246  0958  91          	sub	a, c
2247  0959  D2 C1 0B    	jp	NC, l_player_hit_platform_00139
2248  095C  01 00 00    	ld	bc,_scr_map
2249  095F  2A 00 00    	ld	hl,(_index1)
2250  0962  09          	add	hl,bc
2251  0963  7E          	ld	a,(hl)
2252  0964  D6 45       	sub	a,0x45
2253  0966  DA C1 0B    	jp	C, l_player_hit_platform_00139
2254  0969  01 00 00    	ld	bc,_spr_timer+0
2255  096C  2A 00 00    	ld	hl,(_sprite)
2256  096F  26 00       	ld	h,0x00
2257  0971  29          	add	hl, hl
2258  0972  09          	add	hl,bc
2259  0973  ED 5B 00 00 	ld	de,(_curr_time)
2260  0977  73          	ld	(hl),e
2261  0978  23          	inc	hl
2262  0979  72          	ld	(hl),d
2263  097A  2A 00 00    	ld	hl,(_sprite)
2264  097D  26 00       	ld	h,0x00
2265  097F  01 00 00    	ld	bc,_lin
2266  0982  09          	add	hl,bc
2267  0983  4E          	ld	c,(hl)
2268  0984  06 00       	ld	b,0x00
2269  0986  79          	ld	a, c
2270  0987  C6 F8       	add	a,0xf8
2271  0989  4F          	ld	c, a
2272  098A  78          	ld	a, b
2273  098B  CE FF       	adc	a,0xff
2274  098D  5F          	ld	e, a
2275  098E  06 04       	ld	b,0x04
2276  0990              l_player_hit_platform_00232:
2277  0990  CB 2B       	sra	e
2278  0992  CB 19       	rr	c
2279  0994  10 FA       	djnz	l_player_hit_platform_00232
2280  0996  79          	ld	a, c
2281  0997  07          	rlca
2282  0998  07          	rlca
2283  0999  07          	rlca
2284  099A  07          	rlca
2285  099B  E6 F0       	and	a,0xf0
2286  099D  C6 08       	add	a,0x08
2287  099F  32 00 00    	ld	(_player_hit_lin),a
2288  09A2  2A 00 00    	ld	hl,(_sprite)
2289  09A5  26 00       	ld	h,0x00
2290  09A7  01 00 00    	ld	bc,_col
2291  09AA  09          	add	hl,bc
2292  09AB  4E          	ld	c,(hl)
2293  09AC  CB 41       	bit	0,c
2294  09AE  20 06       	jr	NZ,l_player_hit_platform_00111
2295  09B0  21 00 00    	ld	hl,_player_hit_col
2296  09B3  71          	ld	(hl), c
2297  09B4  18 33       	jr	l_player_hit_platform_00112
2298  09B6              l_player_hit_platform_00111:
2299  09B6  2A 00 00    	ld	hl,(_sprite)
2300  09B9  26 00       	ld	h,0x00
2301  09BB  11 00 00    	ld	de,_state
2302  09BE  19          	add	hl,de
2303  09BF  5E          	ld	e, (hl)
2304  09C0  41          	ld	b, c
2305  09C1  04          	inc	b
2306  09C2  0D          	dec	c
2307  09C3  CB 5B       	bit	3, e
2308  09C5  28 12       	jr	Z,l_player_hit_platform_00108
2309  09C7  3A 00 00    	ld	a,(_g_player_hit_right)
2310  09CA  B7          	or	a, a
2311  09CB  28 06       	jr	Z,l_player_hit_platform_00102
2312  09CD  21 00 00    	ld	hl,_player_hit_col
2313  09D0  70          	ld	(hl), b
2314  09D1  18 16       	jr	l_player_hit_platform_00112
2315  09D3              l_player_hit_platform_00102:
2316  09D3  21 00 00    	ld	hl,_player_hit_col
2317  09D6  71          	ld	(hl), c
2318  09D7  18 10       	jr	l_player_hit_platform_00112
2319  09D9              l_player_hit_platform_00108:
2320  09D9  3A 00 00    	ld	a,(_g_player_hit_left)
2321  09DC  B7          	or	a, a
2322  09DD  28 06       	jr	Z,l_player_hit_platform_00105
2323  09DF  21 00 00    	ld	hl,_player_hit_col
2324  09E2  71          	ld	(hl), c
2325  09E3  18 04       	jr	l_player_hit_platform_00112
2326  09E5              l_player_hit_platform_00105:
2327  09E5  21 00 00    	ld	hl,_player_hit_col
2328  09E8  70          	ld	(hl), b
2329  09E9              l_player_hit_platform_00112:
2330  09E9  01 00 00    	ld	bc,_scr_map
2331  09EC  2A 00 00    	ld	hl,(_index1)
2332  09EF  09          	add	hl,bc
2333  09F0  7E          	ld	a,(hl)
2334  09F1  FE 4D       	cp	a,0x4d
2335  09F3  20 39       	jr	NZ,l_player_hit_platform_00114
2336  09F5  AF          	xor	a,a
2337  09F6  77          	ld	(hl),a
2338  09F7  2A 00 00    	ld	hl,(_index0)
2339  09FA  E5          	push	hl
2340  09FB  CD 00 00    	call	_game_obj_set
2341  09FE  F1          	pop	af
2342  09FF  21 00 00    	ld	hl,_index1
2343  0A02  7E          	ld	a, (hl)
2344  0A03  E6 0F       	and	a,0x0f
2345  0A05  87          	add	a, a
2346  0A06  57          	ld	d, a
2347  0A07  4E          	ld	c, (hl)
2348  0A08  23          	inc	hl
2349  0A09  5E          	ld	e, (hl)
2350  0A0A  06 04       	ld	b,0x04
2351  0A0C  79          	ld	a,c
2352  0A0D              l_player_hit_platform_00238:
2353  0A0D  CB 3B       	srl	e
2354  0A0F  1F          	rra
2355  0A10  10 FB       	djnz	l_player_hit_platform_00238
2356  0A12  07          	rlca
2357  0A13  07          	rlca
2358  0A14  07          	rlca
2359  0A15  07          	rlca
2360  0A16  E6 F0       	and	a,0xf0
2361  0A18  47          	ld	b, a
2362  0A19  21 00 00    	ld	hl,0x0000
2363  0A1C  E5          	push	hl
2364  0A1D  21 87 03    	ld	hl,0x0387
2365  0A20  E5          	push	hl
2366  0A21  58          	ld	e,b
2367  0A22  D5          	push	de
2368  0A23  CD 00 00    	call	_spr_add_anim
2369  0A26  F1          	pop	af
2370  0A27  F1          	pop	af
2371  0A28  F1          	pop	af
2372  0A29  2E 01       	ld	l,0x01
2373  0A2B  C3 C3 0B    	jp	l_player_hit_platform_00142
2374  0A2E              l_player_hit_platform_00114:
2375  0A2E  FE 5C       	cp	a,0x5c
2376  0A30  28 05       	jr	Z,l_player_hit_platform_00135
2377  0A32  D6 5D       	sub	a,0x5d
2378  0A34  C2 B5 0B    	jp	NZ,l_player_hit_platform_00136
2379  0A37              l_player_hit_platform_00135:
2380  0A37  21 00 00    	ld	hl,_tmp0
2381  0A3A  36 00       	ld	(hl),0x00
2382  0A3C              l_player_hit_platform_00132:
2383  0A3C  21 00 00    	ld	hl,_tmp0
2384  0A3F  7E          	ld	a, (hl)
2385  0A40  D6 07       	sub	a,0x07
2386  0A42  D2 B5 0B    	jp	NC, l_player_hit_platform_00136
2387  0A45  4E          	ld	c,(hl)
2388  0A46  06 00       	ld	b,0x00
2389  0A48  21 00 00    	ld	hl,_mush_index
2390  0A4B  09          	add	hl,bc
2391  0A4C  4E          	ld	c, (hl)
2392  0A4D  06 00       	ld	b,0x00
2393  0A4F  2A 00 00    	ld	hl,(_index1)
2394  0A52  AF          	xor	a,a
2395  0A53  ED 42       	sbc	hl,bc
2396  0A55  C2 AE 0B    	jp	NZ,l_player_hit_platform_00131
2397  0A58  2A 00 00    	ld	hl,(_sprite)
2398  0A5B  26 00       	ld	h,0x00
2399  0A5D  01 00 00    	ld	bc,_lin
2400  0A60  09          	add	hl,bc
2401  0A61  7E          	ld	a,(hl)
2402  0A62  07          	rlca
2403  0A63  07          	rlca
2404  0A64  07          	rlca
2405  0A65  07          	rlca
2406  0A66  E6 0F       	and	a,0x0f
2407  0A68  07          	rlca
2408  0A69  07          	rlca
2409  0A6A  07          	rlca
2410  0A6B  07          	rlca
2411  0A6C  E6 F0       	and	a,0xf0
2412  0A6E  C6 E0       	add	a,0xe0
2413  0A70  32 00 00    	ld	(_s_lin1),a
2414  0A73  2A 00 00    	ld	hl,(_sprite)
2415  0A76  26 00       	ld	h,0x00
2416  0A78  01 00 00    	ld	bc,_col
2417  0A7B  09          	add	hl,bc
2418  0A7C  7E          	ld	a,(hl)
2419  0A7D  CB 3F       	srl	a
2420  0A7F  87          	add	a, a
2421  0A80  32 00 00    	ld	(_s_col1),a
2422  0A83  21 00 00    	ld	hl,_tmp
2423  0A86  36 00       	ld	(hl),0x00
2424  0A88              l_player_hit_platform_00117:
2425  0A88  21 00 00    	ld	hl,_tmp
2426  0A8B  7E          	ld	a, (hl)
2427  0A8C  D6 07       	sub	a,0x07
2428  0A8E  30 1C       	jr	NC,l_player_hit_platform_00119
2429  0A90  4E          	ld	c,(hl)
2430  0A91  06 00       	ld	b,0x00
2431  0A93  21 00 00    	ld	hl,_mush_index
2432  0A96  09          	add	hl,bc
2433  0A97  4E          	ld	c, (hl)
2434  0A98  06 00       	ld	b,0x00
2435  0A9A  21 00 00    	ld	hl,_index1
2436  0A9D  7E          	ld	a, (hl)
2437  0A9E  91          	sub	a, c
2438  0A9F  20 05       	jr	NZ,l_player_hit_platform_00244
2439  0AA1  23          	inc	hl
2440  0AA2  7E          	ld	a, (hl)
2441  0AA3  90          	sub	a, b
2442  0AA4  28 06       	jr	Z,l_player_hit_platform_00119
2443  0AA6              l_player_hit_platform_00244:
2444  0AA6  21 00 00    	ld	hl,_tmp
2445  0AA9  34          	inc	(hl)
2446  0AAA  18 DC       	jr	l_player_hit_platform_00117
2447  0AAC              l_player_hit_platform_00119:
2448  0AAC  2A 00 00    	ld	hl,(_tmp)
2449  0AAF  26 00       	ld	h,0x00
2450  0AB1  01 00 00    	ld	bc,_mush_class
2451  0AB4  09          	add	hl,bc
2452  0AB5  7E          	ld	a,(hl)
2453  0AB6  FE 78       	cp	a,0x78
2454  0AB8  28 18       	jr	Z,l_player_hit_platform_00120
2455  0ABA  FE 79       	cp	a,0x79
2456  0ABC  28 2F       	jr	Z,l_player_hit_platform_00121
2457  0ABE  FE 7A       	cp	a,0x7a
2458  0AC0  28 5F       	jr	Z,l_player_hit_platform_00123
2459  0AC2  FE 7B       	cp	a,0x7b
2460  0AC4  28 41       	jr	Z,l_player_hit_platform_00122
2461  0AC6  FE 7C       	cp	a,0x7c
2462  0AC8  CA 55 0B    	jp	Z,l_player_hit_platform_00125
2463  0ACB  D6 7D       	sub	a,0x7d
2464  0ACD  28 6C       	jr	Z,l_player_hit_platform_00124
2465  0ACF  C3 6D 0B    	jp	l_player_hit_platform_00126
2466  0AD2              l_player_hit_platform_00120:
2467  0AD2  2E 02       	ld	l,0x02
2468  0AD4  CD 00 00    	call	_zx_border_fastcall
2469  0AD7  3A 00 00    	ld	a,(_s_col1)
2470  0ADA  21 06 FF    	ld	hl,0xff06
2471  0ADD  E5          	push	hl
2472  0ADE  F5          	push	af
2473  0ADF  33          	inc	sp
2474  0AE0  3A 00 00    	ld	a,(_s_lin1)
2475  0AE3  F5          	push	af
2476  0AE4  33          	inc	sp
2477  0AE5  CD 00 00    	call	_enemy_init
2478  0AE8  F1          	pop	af
2479  0AE9  F1          	pop	af
2480  0AEA  C3 6D 0B    	jp	l_player_hit_platform_00126
2481  0AED              l_player_hit_platform_00121:
2482  0AED  2E 02       	ld	l,0x02
2483  0AEF  CD 00 00    	call	_zx_border_fastcall
2484  0AF2  3A 00 00    	ld	a,(_s_col1)
2485  0AF5  21 06 01    	ld	hl,0x0106
2486  0AF8  E5          	push	hl
2487  0AF9  F5          	push	af
2488  0AFA  33          	inc	sp
2489  0AFB  3A 00 00    	ld	a,(_s_lin1)
2490  0AFE  F5          	push	af
2491  0AFF  33          	inc	sp
2492  0B00  CD 00 00    	call	_enemy_init
2493  0B03  F1          	pop	af
2494  0B04  F1          	pop	af
2495  0B05  18 66       	jr	l_player_hit_platform_00126
2496  0B07              l_player_hit_platform_00122:
2497  0B07  2E 01       	ld	l,0x01
2498  0B09  CD 00 00    	call	_zx_border_fastcall
2499  0B0C  3A 00 00    	ld	a,(_s_col1)
2500  0B0F  21 07 01    	ld	hl,0x0107
2501  0B12  E5          	push	hl
2502  0B13  F5          	push	af
2503  0B14  33          	inc	sp
2504  0B15  3A 00 00    	ld	a,(_s_lin1)
2505  0B18  F5          	push	af
2506  0B19  33          	inc	sp
2507  0B1A  CD 00 00    	call	_enemy_init
2508  0B1D  F1          	pop	af
2509  0B1E  F1          	pop	af
2510  0B1F  18 4C       	jr	l_player_hit_platform_00126
2511  0B21              l_player_hit_platform_00123:
2512  0B21  2E 01       	ld	l,0x01
2513  0B23  CD 00 00    	call	_zx_border_fastcall
2514  0B26  3A 00 00    	ld	a,(_s_col1)
2515  0B29  21 07 FF    	ld	hl,0xff07
2516  0B2C  E5          	push	hl
2517  0B2D  F5          	push	af
2518  0B2E  33          	inc	sp
2519  0B2F  3A 00 00    	ld	a,(_s_lin1)
2520  0B32  F5          	push	af
2521  0B33  33          	inc	sp
2522  0B34  CD 00 00    	call	_enemy_init
2523  0B37  F1          	pop	af
2524  0B38  F1          	pop	af
2525  0B39  18 32       	jr	l_player_hit_platform_00126
2526  0B3B              l_player_hit_platform_00124:
2527  0B3B  2E 04       	ld	l,0x04
2528  0B3D  CD 00 00    	call	_zx_border_fastcall
2529  0B40  3A 00 00    	ld	a,(_s_col1)
2530  0B43  21 08 01    	ld	hl,0x0108
2531  0B46  E5          	push	hl
2532  0B47  F5          	push	af
2533  0B48  33          	inc	sp
2534  0B49  3A 00 00    	ld	a,(_s_lin1)
2535  0B4C  F5          	push	af
2536  0B4D  33          	inc	sp
2537  0B4E  CD 00 00    	call	_enemy_init
2538  0B51  F1          	pop	af
2539  0B52  F1          	pop	af
2540  0B53  18 18       	jr	l_player_hit_platform_00126
2541  0B55              l_player_hit_platform_00125:
2542  0B55  2E 04       	ld	l,0x04
2543  0B57  CD 00 00    	call	_zx_border_fastcall
2544  0B5A  3A 00 00    	ld	a,(_s_col1)
2545  0B5D  21 08 FF    	ld	hl,0xff08
2546  0B60  E5          	push	hl
2547  0B61  F5          	push	af
2548  0B62  33          	inc	sp
2549  0B63  3A 00 00    	ld	a,(_s_lin1)
2550  0B66  F5          	push	af
2551  0B67  33          	inc	sp
2552  0B68  CD 00 00    	call	_enemy_init
2553  0B6B  F1          	pop	af
2554  0B6C  F1          	pop	af
2555  0B6D              l_player_hit_platform_00126:
2556  0B6D  2A 00 00    	ld	hl,(_index1)
2557  0B70  01 F0 FF    	ld	bc,0xfff0
2558  0B73  09          	add	hl,bc
2559  0B74  01 00 00    	ld	bc,_scr_map
2560  0B77  09          	add	hl,bc
2561  0B78  36 00       	ld	(hl),0x00
2562  0B7A  01 00 00    	ld	bc,_scr_map
2563  0B7D  2A 00 00    	ld	hl,(_index1)
2564  0B80  09          	add	hl,bc
2565  0B81  7E          	ld	a,(hl)
2566  0B82  D6 5C       	sub	a,0x5c
2567  0B84  4D          	ld	c,l
2568  0B85  44          	ld	b,h
2569  0B86  20 05       	jr	NZ,l_player_hit_platform_00128
2570  0B88  3E 4F       	ld	a,0x4f
2571  0B8A  02          	ld	(bc), a
2572  0B8B  18 03       	jr	l_player_hit_platform_00129
2573  0B8D              l_player_hit_platform_00128:
2574  0B8D  3E 54       	ld	a,0x54
2575  0B8F  02          	ld	(bc), a
2576  0B90              l_player_hit_platform_00129:
2577  0B90  2A 00 00    	ld	hl,(_index1)
2578  0B93  01 F0 FF    	ld	bc,0xfff0
2579  0B96  09          	add	hl,bc
2580  0B97  E5          	push	hl
2581  0B98  CD 00 00    	call	_game_obj_set
2582  0B9B  F1          	pop	af
2583  0B9C  3A 00 00    	ld	a,(_s_lin1)
2584  0B9F  C6 10       	add	a,0x10
2585  0BA1  4F          	ld	c, a
2586  0BA2  3A 00 00    	ld	a, (_s_col1)
2587  0BA5  47          	ld	b,a
2588  0BA6  C5          	push	bc
2589  0BA7  3E 4F       	ld	a,0x4f
2590  0BA9  F5          	push	af
2591  0BAA  33          	inc	sp
2592  0BAB  CD 00 00    	call	_NIRVANAP_drawT_callee
2593  0BAE              l_player_hit_platform_00131:
2594  0BAE  21 00 00    	ld	hl,_tmp0
2595  0BB1  34          	inc	(hl)
2596  0BB2  C3 3C 0A    	jp	l_player_hit_platform_00132
2597  0BB5              l_player_hit_platform_00136:
2598  0BB5  2E 01       	ld	l,0x01
2599  0BB7  CD 00 00    	call	_spr_brick_anim
2600  0BBA  CD 00 00    	call	_sound_hit_brick
2601  0BBD  2E 01       	ld	l,0x01
2602  0BBF  18 02       	jr	l_player_hit_platform_00142
2603  0BC1              l_player_hit_platform_00139:
2604  0BC1  2E 00       	ld	l,0x00
2605  0BC3              l_player_hit_platform_00142:
2606  0BC3  C9          	ret
2607  0BC4              	SECTION code_compiler
2608  0BC4              ;	---------------------------------
2609  0BC4              ; Function player_hit_platform_clear
2610  0BC4              ; ---------------------------------
2611  0BC4              _player_hit_platform_clear:
2612  0BC4  2A 00 00    	ld	hl,(_sprite)
2613  0BC7  26 00       	ld	h,0x00
2614  0BC9  29          	add	hl, hl
2615  0BCA  11 00 00    	ld	de,_spr_timer
2616  0BCD  19          	add	hl, de
2617  0BCE  4E          	ld	c, (hl)
2618  0BCF  23          	inc	hl
2619  0BD0  46          	ld	b, (hl)
2620  0BD1  21 04 00    	ld	hl,0x0004
2621  0BD4  E5          	push	hl
2622  0BD5  C5          	push	bc
2623  0BD6  CD 00 00    	call	_game_check_time
2624  0BD9  F1          	pop	af
2625  0BDA  F1          	pop	af
2626  0BDB  7D          	ld	a, l
2627  0BDC  B7          	or	a, a
2628  0BDD  C8          	ret	Z
2629  0BDE  2A FF FF    	ld	hl,(_player_hit_col - 1)
2630  0BE1  3A 00 00    	ld	a,(_player_hit_lin)
2631  0BE4  6F          	ld	l,a
2632  0BE5  E5          	push	hl
2633  0BE6  CD 00 00    	call	_spr_calc_index
2634  0BE9  F1          	pop	af
2635  0BEA  22 00 00    	ld	(_index1),hl
2636  0BED  2E 00       	ld	l,0x00
2637  0BEF  CD 00 00    	call	_spr_brick_anim
2638  0BF2  21 00 00    	ld	hl,_player_hit_lin
2639  0BF5  36 00       	ld	(hl),0x00
2640  0BF7  21 00 00    	ld	hl,_player_hit_col
2641  0BFA  36 00       	ld	(hl),0x00
2642  0BFC  C9          	ret
2643  0BFD              	SECTION code_compiler
2644  0BFD              ;	---------------------------------
2645  0BFD              ; Function player_score_add
2646  0BFD              ; ---------------------------------
2647  0BFD              _player_score_add:
2648  0BFD  ED 4B 00 00 	ld	bc,(_player_score)
2649  0C01  09          	add	hl,bc
2650  0C02  22 00 00    	ld	(_player_score),hl
2651  0C05  21 00 00    	ld	hl,_player_lvl
2652  0C08  7E          	ld	a, (hl)
2653  0C09  D6 14       	sub	a,0x14
2654  0C0B  30 3C       	jr	NC,l_player_score_add_00104
2655  0C0D  01 00 00    	ld	bc,_player_lvl_table+0
2656  0C10  6E          	ld	l,(hl)
2657  0C11  26 00       	ld	h,0x00
2658  0C13  29          	add	hl, hl
2659  0C14  09          	add	hl, bc
2660  0C15  4E          	ld	c, (hl)
2661  0C16  23          	inc	hl
2662  0C17  46          	ld	b, (hl)
2663  0C18  21 00 00    	ld	hl,_player_score
2664  0C1B  7E          	ld	a, (hl)
2665  0C1C  91          	sub	a, c
2666  0C1D  23          	inc	hl
2667  0C1E  7E          	ld	a, (hl)
2668  0C1F  98          	sbc	a, b
2669  0C20  38 27       	jr	C,l_player_score_add_00104
2670  0C22  21 00 00    	ld	hl,_player_lvl
2671  0C25  34          	inc	(hl)
2672  0C26  21 02 00    	ld	hl,___str_1
2673  0C29  E5          	push	hl
2674  0C2A  21 0C 0C    	ld	hl,0x0c0c
2675  0C2D  E5          	push	hl
2676  0C2E  CD 00 00    	call	_zx_print_str
2677  0C31  AF          	xor	a, a
2678  0C32  F5          	push	af
2679  0C33  33          	inc	sp
2680  0C34  21 19 00    	ld	hl,0x0019
2681  0C37  E5          	push	hl
2682  0C38  21 0C 15    	ld	hl,0x150c
2683  0C3B  E5          	push	hl
2684  0C3C  3E 0C       	ld	a,0x0c
2685  0C3E  F5          	push	af
2686  0C3F  33          	inc	sp
2687  0C40  CD 00 00    	call	_game_colour_message
2688  0C43  F1          	pop	af
2689  0C44  F1          	pop	af
2690  0C45  F1          	pop	af
2691  0C46  CD 00 00    	call	_game_update_stats
2692  0C49              l_player_score_add_00104:
2693  0C49  3A 00 00    	ld	a,(_game_score_top)
2694  0C4C  21 00 00    	ld	hl,_player_score
2695  0C4F  96          	sub	a, (hl)
2696  0C50  3A 01 00    	ld	a,(_game_score_top + 1)
2697  0C53  23          	inc	hl
2698  0C54  9E          	sbc	a, (hl)
2699  0C55  30 06       	jr	NC,l_player_score_add_00106
2700  0C57  2A 00 00    	ld	hl,(_player_score)
2701  0C5A  22 00 00    	ld	(_game_score_top),hl
2702  0C5D              l_player_score_add_00106:
2703  0C5D  CD 00 00    	call	_game_print_score
2704  0C60  C9          	ret
2705  0C61              	SECTION rodata_compiler
2706  0002              ___str_1:
2707  0002  4C 45 56 45 4C 20 55 50 21 
                        	DEFM "LEVEL UP!"
2708  000B  00          	DEFB 0x00
2709  000C              	SECTION code_compiler
2710  0C61              ;	---------------------------------
2711  0C61              ; Function player_check_floor
2712  0C61              ; ---------------------------------
2713  0C61              _player_check_floor:
2714  0C61  CD 00 00    	call	___sdcc_enter_ix
2715  0C64  3B          	dec	sp
2716  0C65  2A 00 00    	ld	hl,(_sprite)
2717  0C68  26 00       	ld	h,0x00
2718  0C6A  01 00 00    	ld	bc,_col
2719  0C6D  09          	add	hl,bc
2720  0C6E  56          	ld	d, (hl)
2721  0C6F  2A 00 00    	ld	hl,(_sprite)
2722  0C72  26 00       	ld	h,0x00
2723  0C74  01 00 00    	ld	bc,_lin
2724  0C77  09          	add	hl,bc
2725  0C78  7E          	ld	a,(hl)
2726  0C79  C6 10       	add	a,0x10
2727  0C7B  5F          	ld	e, a
2728  0C7C  D5          	push	de
2729  0C7D  CD 00 00    	call	_spr_calc_index
2730  0C80  F1          	pop	af
2731  0C81  4D          	ld	c, l
2732  0C82  44          	ld	b, h
2733  0C83  21 00 00    	ld	hl,_scr_map
2734  0C86  09          	add	hl, bc
2735  0C87  7E          	ld	a, (hl)
2736  0C88  DD 77 FF    	ld	(ix-1),a
2737  0C8B  2A 00 00    	ld	hl,(_sprite)
2738  0C8E  26 00       	ld	h,0x00
2739  0C90  11 00 00    	ld	de,_col
2740  0C93  19          	add	hl,de
2741  0C94  7E          	ld	a,(hl)
2742  0C95  0F          	rrca
2743  0C96  38 04       	jr	C,l_player_check_floor_00102
2744  0C98  0E 01       	ld	c,0x01
2745  0C9A  18 06       	jr	l_player_check_floor_00103
2746  0C9C              l_player_check_floor_00102:
2747  0C9C  03          	inc	bc
2748  0C9D  21 00 00    	ld	hl,_scr_map
2749  0CA0  09          	add	hl, bc
2750  0CA1  4E          	ld	c, (hl)
2751  0CA2              l_player_check_floor_00103:
2752  0CA2  3A 00 00    	ld	a,(_s_lin0)
2753  0CA5  D6 90       	sub	a,0x90
2754  0CA7  20 04       	jr	NZ,l_player_check_floor_00105
2755  0CA9  DD 36 FF 48 	ld	(ix-1),0x48
2756  0CAD              l_player_check_floor_00105:
2757  0CAD  DD 7E FF    	ld	a,(ix-1)
2758  0CB0  D6 3C       	sub	a,0x3c
2759  0CB2  38 07       	jr	C,l_player_check_floor_00110
2760  0CB4  DD 7E FF    	ld	a,(ix-1)
2761  0CB7  D6 60       	sub	a,0x60
2762  0CB9  38 1E       	jr	C,l_player_check_floor_00111
2763  0CBB              l_player_check_floor_00110:
2764  0CBB  79          	ld	a,c
2765  0CBC  FE 3C       	cp	a,0x3c
2766  0CBE  38 04       	jr	C,l_player_check_floor_00106
2767  0CC0  D6 60       	sub	a,0x60
2768  0CC2  38 15       	jr	C,l_player_check_floor_00111
2769  0CC4              l_player_check_floor_00106:
2770  0CC4  2A 00 00    	ld	hl,(_sprite)
2771  0CC7  26 00       	ld	h,0x00
2772  0CC9  01 00 00    	ld	bc,_sprite_speed_alt
2773  0CCC  09          	add	hl,bc
2774  0CCD  36 02       	ld	(hl),0x02
2775  0CCF  21 00 00    	ld	hl,_s_state
2776  0CD2  CB CE       	set	1, (hl)
2777  0CD4  2E 00       	ld	l,0x00
2778  0CD6  CD 9C 04    	call	_player_check_stairs
2779  0CD9              l_player_check_floor_00111:
2780  0CD9  33          	inc	sp
2781  0CDA  DD E1       	pop	ix
2782  0CDC  C9          	ret
2783  0CDD              	SECTION code_compiler
2784  0CDD              ;	---------------------------------
2785  0CDD              ; Function player_move_jump
2786  0CDD              ; ---------------------------------
2787  0CDD              _player_move_jump:
2788  0CDD  CD 00 00    	call	___sdcc_enter_ix
2789  0CE0  3B          	dec	sp
2790  0CE1  21 00 00    	ld	hl,_game_gravity
2791  0CE4  4E          	ld	c, (hl)
2792  0CE5  21 00 00    	ld	hl,_player_vel_y
2793  0CE8  7E          	ld	a, (hl)
2794  0CE9  81          	add	a, c
2795  0CEA  77          	ld	(hl), a
2796  0CEB  21 00 00    	ld	hl,_sprite_on_air
2797  0CEE  36 01       	ld	(hl),0x01
2798  0CF0  3A 00 00    	ld	a,(_player_vel_inc)
2799  0CF3  B7          	or	a, a
2800  0CF4  28 24       	jr	Z,l_player_move_jump_00106
2801  0CF6  21 00 00    	ld	hl,_dirs
2802  0CF9  CB 7E       	bit	7, (hl)
2803  0CFB  20 1D       	jr	NZ,l_player_move_jump_00106
2804  0CFD  3A 00 00    	ld	a,(_player_vel_y1)
2805  0D00  21 00 00    	ld	hl,_player_vel_y
2806  0D03  96          	sub	a, (hl)
2807  0D04  E2 09 0D    	jp	PO, l_player_move_jump_00247
2808  0D07  EE 80       	xor	a,0x80
2809  0D09              l_player_move_jump_00247:
2810  0D09  F2 1A 0D    	jp	P, l_player_move_jump_00106
2811  0D0C  21 00 00    	ld	hl,_player_vel_y
2812  0D0F  CB 7E       	bit	7,(hl)
2813  0D11  28 07       	jr	Z,l_player_move_jump_00106
2814  0D13  36 00       	ld	(hl),0x00
2815  0D15  21 00 00    	ld	hl,_player_vel_inc
2816  0D18  36 00       	ld	(hl),0x00
2817  0D1A              l_player_move_jump_00106:
2818  0D1A  3E 78       	ld	a,0x78
2819  0D1C  21 00 00    	ld	hl,_player_vel_y
2820  0D1F  96          	sub	a, (hl)
2821  0D20  E2 25 0D    	jp	PO, l_player_move_jump_00248
2822  0D23  EE 80       	xor	a,0x80
2823  0D25              l_player_move_jump_00248:
2824  0D25  F2 2D 0D    	jp	P, l_player_move_jump_00108
2825  0D28  21 00 00    	ld	hl,_player_vel_y
2826  0D2B  36 78       	ld	(hl),0x78
2827  0D2D              l_player_move_jump_00108:
2828  0D2D  21 00 00    	ld	hl,_player_vel_y
2829  0D30  7E          	ld	a, (hl)
2830  0D31  EE 80       	xor	a,0x80
2831  0D33  D6 08       	sub	a,0x08
2832  0D35  30 02       	jr	NC,l_player_move_jump_00110
2833  0D37  36 88       	ld	(hl),0x88
2834  0D39              l_player_move_jump_00110:
2835  0D39  3A 00 00    	ld	a,(_player_vel_y)
2836  0D3C  5F          	ld	e,a
2837  0D3D  17          	rla
2838  0D3E  9F          	sbc	a, a
2839  0D3F  57          	ld	d, a
2840  0D40  CB 43       	bit	0,e
2841  0D42  21 00 00    	ld	hl,_s_lin1
2842  0D45  73          	ld	(hl),e
2843  0D46  28 04       	jr	Z,l_player_move_jump_00112
2844  0D48  21 00 00    	ld	hl,_s_lin1
2845  0D4B  35          	dec	(hl)
2846  0D4C              l_player_move_jump_00112:
2847  0D4C  2A 00 00    	ld	hl,(_sprite)
2848  0D4F  26 00       	ld	h,0x00
2849  0D51  01 00 00    	ld	bc,_lin
2850  0D54  09          	add	hl,bc
2851  0D55  7E          	ld	a,(hl)
2852  0D56  DD 77 FF    	ld	(ix-1),a
2853  0D59  4D          	ld	c,l
2854  0D5A  44          	ld	b,h
2855  0D5B  21 00 00    	ld	hl,_s_lin1
2856  0D5E  86          	add	a, (hl)
2857  0D5F  77          	ld	(hl), a
2858  0D60  3E 90       	ld	a,0x90
2859  0D62  96          	sub	a, (hl)
2860  0D63  30 0E       	jr	NC,l_player_move_jump_00117
2861  0D65  3E C8       	ld	a,0xc8
2862  0D67  96          	sub	a, (hl)
2863  0D68  30 04       	jr	NC,l_player_move_jump_00114
2864  0D6A  36 00       	ld	(hl),0x00
2865  0D6C  18 05       	jr	l_player_move_jump_00117
2866  0D6E              l_player_move_jump_00114:
2867  0D6E  21 00 00    	ld	hl,_s_lin1
2868  0D71  36 90       	ld	(hl),0x90
2869  0D73              l_player_move_jump_00117:
2870  0D73  3A 00 00    	ld	a,(_s_lin0)
2871  0D76  07          	rlca
2872  0D77  07          	rlca
2873  0D78  07          	rlca
2874  0D79  07          	rlca
2875  0D7A  E6 0F       	and	a,0x0f
2876  0D7C  DD 77 FF    	ld	(ix-1),a
2877  0D7F  CB 7A       	bit	7, d
2878  0D81  28 73       	jr	Z,l_player_move_jump_00140
2879  0D83  21 00 00    	ld	hl,_s_state
2880  0D86  7E          	ld	a,(hl)
2881  0D87  F6 01       	or	a,0x01
2882  0D89  E6 FD       	and	a,0xfd
2883  0D8B  77          	ld	(hl),a
2884  0D8C  21 00 00    	ld	hl,_s_lin1
2885  0D8F  DD 7E FF    	ld	a,(ix-1)
2886  0D92  96          	sub	a,(hl)
2887  0D93  20 04       	jr	NZ,l_player_move_jump_00250
2888  0D95  3E 01       	ld	a,0x01
2889  0D97  18 01       	jr	l_player_move_jump_00251
2890  0D99              l_player_move_jump_00250:
2891  0D99  AF          	xor	a,a
2892  0D9A              l_player_move_jump_00251:
2893  0D9A  EE 01       	xor	a,0x01
2894  0D9C  28 51       	jr	Z,l_player_move_jump_00124
2895  0D9E  2A 00 00    	ld	hl,(_sprite)
2896  0DA1  26 00       	ld	h,0x00
2897  0DA3  01 00 00    	ld	bc,_col
2898  0DA6  09          	add	hl,bc
2899  0DA7  7E          	ld	a,(hl)
2900  0DA8  F5          	push	af
2901  0DA9  33          	inc	sp
2902  0DAA  3A 00 00    	ld	a,(_s_lin1)
2903  0DAD  F5          	push	af
2904  0DAE  33          	inc	sp
2905  0DAF  CD 00 00    	call	_game_check_map
2906  0DB2  F1          	pop	af
2907  0DB3  7C          	ld	a,h
2908  0DB4  B5          	or	a,l
2909  0DB5  28 28       	jr	Z,l_player_move_jump_00121
2910  0DB7  CD 45 09    	call	_player_hit_platform
2911  0DBA  7D          	ld	a, l
2912  0DBB  B7          	or	a, a
2913  0DBC  28 19       	jr	Z,l_player_move_jump_00119
2914  0DBE  2A 00 00    	ld	hl,(_sprite)
2915  0DC1  26 00       	ld	h,0x00
2916  0DC3  01 00 00    	ld	bc,_lin
2917  0DC6  09          	add	hl,bc
2918  0DC7  7E          	ld	a,(hl)
2919  0DC8  4D          	ld	c,l
2920  0DC9  44          	ld	b,h
2921  0DCA  07          	rlca
2922  0DCB  07          	rlca
2923  0DCC  07          	rlca
2924  0DCD  07          	rlca
2925  0DCE  E6 0F       	and	a,0x0f
2926  0DD0  07          	rlca
2927  0DD1  07          	rlca
2928  0DD2  07          	rlca
2929  0DD3  07          	rlca
2930  0DD4  E6 F0       	and	a,0xf0
2931  0DD6  02          	ld	(bc), a
2932  0DD7              l_player_move_jump_00119:
2933  0DD7  21 00 00    	ld	hl,_player_vel_y
2934  0DDA  36 00       	ld	(hl),0x00
2935  0DDC  C3 B6 0E    	jp	l_player_move_jump_00141
2936  0DDF              l_player_move_jump_00121:
2937  0DDF  2A 00 00    	ld	hl,(_sprite)
2938  0DE2  26 00       	ld	h,0x00
2939  0DE4  01 00 00    	ld	bc,_lin
2940  0DE7  09          	add	hl,bc
2941  0DE8  3A 00 00    	ld	a,(_s_lin1)
2942  0DEB  77          	ld	(hl),a
2943  0DEC  C3 B6 0E    	jp	l_player_move_jump_00141
2944  0DEF              l_player_move_jump_00124:
2945  0DEF  3A 00 00    	ld	a,(_s_lin1)
2946  0DF2  02          	ld	(bc), a
2947  0DF3  C3 B6 0E    	jp	l_player_move_jump_00141
2948  0DF6              l_player_move_jump_00140:
2949  0DF6  21 00 00    	ld	hl,_s_state
2950  0DF9  7E          	ld	a,(hl)
2951  0DFA  F6 02       	or	a,0x02
2952  0DFC  E6 FE       	and	a,0xfe
2953  0DFE  77          	ld	(hl),a
2954  0DFF  21 00 00    	ld	hl,_s_lin1
2955  0E02  7E          	ld	a, (hl)
2956  0E03  C6 10       	add	a,0x10
2957  0E05  77          	ld	(hl), a
2958  0E06  DD 7E FF    	ld	a,(ix-1)
2959  0E09  96          	sub	a,(hl)
2960  0E0A  20 04       	jr	NZ,l_player_move_jump_00252
2961  0E0C  3E 01       	ld	a,0x01
2962  0E0E  18 01       	jr	l_player_move_jump_00253
2963  0E10              l_player_move_jump_00252:
2964  0E10  AF          	xor	a,a
2965  0E11              l_player_move_jump_00253:
2966  0E11  EE 01       	xor	a,0x01
2967  0E13  CA AE 0E    	jp	Z, l_player_move_jump_00137
2968  0E16  2A 00 00    	ld	hl,(_sprite)
2969  0E19  26 00       	ld	h,0x00
2970  0E1B  01 00 00    	ld	bc,_col
2971  0E1E  09          	add	hl,bc
2972  0E1F  7E          	ld	a,(hl)
2973  0E20  F5          	push	af
2974  0E21  33          	inc	sp
2975  0E22  3A 00 00    	ld	a,(_s_lin1)
2976  0E25  F5          	push	af
2977  0E26  33          	inc	sp
2978  0E27  CD 00 00    	call	_game_check_map
2979  0E2A  F1          	pop	af
2980  0E2B  45          	ld	b, l
2981  0E2C  5C          	ld	e, h
2982  0E2D  21 00 00    	ld	hl,_s_lin1
2983  0E30  7E          	ld	a, (hl)
2984  0E31  C6 F0       	add	a,0xf0
2985  0E33  4F          	ld	c, a
2986  0E34  7B          	ld	a, e
2987  0E35  B0          	or	a,b
2988  0E36  28 63       	jr	Z,l_player_move_jump_00134
2989  0E38  71          	ld	(hl), c
2990  0E39  2E 00       	ld	l,0x00
2991  0E3B  CD 9C 04    	call	_player_check_stairs
2992  0E3E  3A 00 00    	ld	a,(_player_over_stair)
2993  0E41  B7          	or	a, a
2994  0E42  20 05       	jr	NZ,l_player_move_jump_00127
2995  0E44  2E 01       	ld	l,0x01
2996  0E46  CD 9C 04    	call	_player_check_stairs
2997  0E49              l_player_move_jump_00127:
2998  0E49  3A 00 00    	ld	a,(_player_over_stair)
2999  0E4C  B7          	or	a, a
3000  0E4D  20 31       	jr	NZ,l_player_move_jump_00132
3001  0E4F  21 00 00    	ld	hl,_s_lin1
3002  0E52  7E          	ld	a, (hl)
3003  0E53  07          	rlca
3004  0E54  07          	rlca
3005  0E55  07          	rlca
3006  0E56  07          	rlca
3007  0E57  E6 0F       	and	a,0x0f
3008  0E59  07          	rlca
3009  0E5A  07          	rlca
3010  0E5B  07          	rlca
3011  0E5C  07          	rlca
3012  0E5D  E6 F0       	and	a,0xf0
3013  0E5F  77          	ld	(hl), a
3014  0E60  2A 00 00    	ld	hl,(_sprite)
3015  0E63  26 00       	ld	h,0x00
3016  0E65  01 00 00    	ld	bc,_lin
3017  0E68  09          	add	hl,bc
3018  0E69  5E          	ld	e,(hl)
3019  0E6A  4D          	ld	c,l
3020  0E6B  44          	ld	b,h
3021  0E6C  21 00 00    	ld	hl,_s_lin1
3022  0E6F  7E          	ld	a, (hl)
3023  0E70  93          	sub	a, e
3024  0E71  30 09       	jr	NC,l_player_move_jump_00129
3025  0E73  7E          	ld	a, (hl)
3026  0E74  C6 10       	add	a,0x10
3027  0E76  02          	ld	(bc), a
3028  0E77  2E 00       	ld	l,0x00
3029  0E79  C3 F4 0E    	jp	l_player_move_jump_00151
3030  0E7C              l_player_move_jump_00129:
3031  0E7C  3A 00 00    	ld	a,(_s_lin1)
3032  0E7F  02          	ld	(bc), a
3033  0E80              l_player_move_jump_00132:
3034  0E80  21 00 00    	ld	hl,_player_vel_y
3035  0E83  36 00       	ld	(hl),0x00
3036  0E85  21 00 00    	ld	hl,_s_state
3037  0E88  7E          	ld	a,(hl)
3038  0E89  E6 FC       	and	a,+(0xfd&0xfe)
3039  0E8B  77          	ld	(hl),a
3040  0E8C  2A 00 00    	ld	hl,(_sprite)
3041  0E8F  26 00       	ld	h,0x00
3042  0E91  01 00 00    	ld	bc,_colint
3043  0E94  09          	add	hl,bc
3044  0E95  AF          	xor	a,a
3045  0E96  77          	ld	(hl),a
3046  0E97  2E 01       	ld	l,0x01
3047  0E99  18 59       	jr	l_player_move_jump_00151
3048  0E9B              l_player_move_jump_00134:
3049  0E9B  21 00 00    	ld	hl,_s_lin1
3050  0E9E  71          	ld	(hl), c
3051  0E9F  2A 00 00    	ld	hl,(_sprite)
3052  0EA2  26 00       	ld	h,0x00
3053  0EA4  01 00 00    	ld	bc,_lin
3054  0EA7  09          	add	hl,bc
3055  0EA8  3A 00 00    	ld	a,(_s_lin1)
3056  0EAB  77          	ld	(hl),a
3057  0EAC  18 08       	jr	l_player_move_jump_00141
3058  0EAE              l_player_move_jump_00137:
3059  0EAE  21 00 00    	ld	hl,_s_lin1
3060  0EB1  7E          	ld	a, (hl)
3061  0EB2  C6 F0       	add	a,0xf0
3062  0EB4  77          	ld	(hl),a
3063  0EB5  02          	ld	(bc), a
3064  0EB6              l_player_move_jump_00141:
3065  0EB6  21 00 00    	ld	hl,_s_state
3066  0EB9  CB 5E       	bit	3, (hl)
3067  0EBB  20 27       	jr	NZ,l_player_move_jump_00147
3068  0EBD  21 00 00    	ld	hl,_s_state
3069  0EC0  CB 56       	bit	2, (hl)
3070  0EC2  20 20       	jr	NZ,l_player_move_jump_00147
3071  0EC4  21 00 00    	ld	hl,_dirs
3072  0EC7  CB 56       	bit	2, (hl)
3073  0EC9  28 09       	jr	Z,l_player_move_jump_00143
3074  0ECB  21 00 00    	ld	hl,_s_state
3075  0ECE  7E          	ld	a,(hl)
3076  0ECF  F6 08       	or	a,0x08
3077  0ED1  E6 FB       	and	a,0xfb
3078  0ED3  77          	ld	(hl),a
3079  0ED4              l_player_move_jump_00143:
3080  0ED4  21 00 00    	ld	hl,_dirs
3081  0ED7  CB 5E       	bit	3, (hl)
3082  0ED9  28 09       	jr	Z,l_player_move_jump_00147
3083  0EDB  21 00 00    	ld	hl,_s_state
3084  0EDE  7E          	ld	a,(hl)
3085  0EDF  F6 04       	or	a,0x04
3086  0EE1  E6 F7       	and	a,0xf7
3087  0EE3  77          	ld	(hl),a
3088  0EE4              l_player_move_jump_00147:
3089  0EE4  CD 00 00    	call	_spr_move_horizontal
3090  0EE7  7D          	ld	a, l
3091  0EE8  B7          	or	a, a
3092  0EE9  28 07       	jr	Z,l_player_move_jump_00150
3093  0EEB  21 00 00    	ld	hl,_s_state
3094  0EEE  7E          	ld	a,(hl)
3095  0EEF  E6 F3       	and	a,+(0xf7&0xfb)
3096  0EF1  77          	ld	(hl),a
3097  0EF2              l_player_move_jump_00150:
3098  0EF2  2E 00       	ld	l,0x00
3099  0EF4              l_player_move_jump_00151:
3100  0EF4  33          	inc	sp
3101  0EF5  DD E1       	pop	ix
3102  0EF7  C9          	ret
3103  0EF8              	SECTION code_compiler
3104  0EF8              ;	---------------------------------
3105  0EF8              ; Function player_open_door
3106  0EF8              ; ---------------------------------
3107  0EF8              _player_open_door:
3108  0EF8  CD 00 00    	call	___sdcc_enter_ix
3109  0EFB  0E 00       	ld	c,0x00
3110  0EFD  DD 7E 06    	ld	a,(ix+6)
3111  0F00  D6 48       	sub	a,0x48
3112  0F02  28 17       	jr	Z,l_player_open_door_00101
3113  0F04  DD 7E 06    	ld	a,(ix+6)
3114  0F07  D6 49       	sub	a,0x49
3115  0F09  28 1F       	jr	Z,l_player_open_door_00104
3116  0F0B  DD 7E 06    	ld	a,(ix+6)
3117  0F0E  D6 4A       	sub	a,0x4a
3118  0F10  28 27       	jr	Z,l_player_open_door_00107
3119  0F12  DD 7E 06    	ld	a,(ix+6)
3120  0F15  D6 4B       	sub	a,0x4b
3121  0F17  28 2F       	jr	Z,l_player_open_door_00110
3122  0F19  18 3A       	jr	l_player_open_door_00113
3123  0F1B              l_player_open_door_00101:
3124  0F1B  3A 00 00    	ld	a,(_player_keys)
3125  0F1E  B7          	or	a, a
3126  0F1F  28 34       	jr	Z,l_player_open_door_00113
3127  0F21  2E 07       	ld	l,0x07
3128  0F23  CD 00 00    	call	_zx_border_fastcall
3129  0F26  0E 01       	ld	c,0x01
3130  0F28  18 2B       	jr	l_player_open_door_00113
3131  0F2A              l_player_open_door_00104:
3132  0F2A  3A 01 00    	ld	a,(_player_keys + 0x0001)
3133  0F2D  B7          	or	a, a
3134  0F2E  28 25       	jr	Z,l_player_open_door_00113
3135  0F30  2E 02       	ld	l,0x02
3136  0F32  CD 00 00    	call	_zx_border_fastcall
3137  0F35  0E 01       	ld	c,0x01
3138  0F37  18 1C       	jr	l_player_open_door_00113
3139  0F39              l_player_open_door_00107:
3140  0F39  3A 02 00    	ld	a,(_player_keys + 0x0002)
3141  0F3C  B7          	or	a, a
3142  0F3D  28 16       	jr	Z,l_player_open_door_00113
3143  0F3F  2E 04       	ld	l,0x04
3144  0F41  CD 00 00    	call	_zx_border_fastcall
3145  0F44  0E 01       	ld	c,0x01
3146  0F46  18 0D       	jr	l_player_open_door_00113
3147  0F48              l_player_open_door_00110:
3148  0F48  3A 03 00    	ld	a,(_player_keys + 0x0003)
3149  0F4B  B7          	or	a, a
3150  0F4C  28 07       	jr	Z,l_player_open_door_00113
3151  0F4E  2E 05       	ld	l,0x05
3152  0F50  CD 00 00    	call	_zx_border_fastcall
3153  0F53  0E 01       	ld	c,0x01
3154  0F55              l_player_open_door_00113:
3155  0F55  79          	ld	a, c
3156  0F56  B7          	or	a, a
3157  0F57  20 06       	jr	NZ,l_player_open_door_00114
3158  0F59  3A 00 00    	ld	a,(_game_inmune)
3159  0F5C  B7          	or	a, a
3160  0F5D  28 24       	jr	Z,l_player_open_door_00117
3161  0F5F              l_player_open_door_00114:
3162  0F5F  3E 00       	ld	a, +((_scr_map) & 0xFF)
3163  0F61  DD 86 04    	add	a,(ix+4)
3164  0F64  4F          	ld	c, a
3165  0F65  3E 00       	ld	a, +((_scr_map) / 256)
3166  0F67  DD 8E 05    	adc	a,(ix+5)
3167  0F6A  47          	ld	b, a
3168  0F6B  AF          	xor	a, a
3169  0F6C  02          	ld	(bc), a
3170  0F6D  DD 6E 04    	ld	l,(ix+4)
3171  0F70  DD 66 05    	ld	h,(ix+5)
3172  0F73  E5          	push	hl
3173  0F74  CD 00 00    	call	_game_obj_set
3174  0F77  F1          	pop	af
3175  0F78  DD 6E 04    	ld	l,(ix+4)
3176  0F7B  DD 66 05    	ld	h,(ix+5)
3177  0F7E  E5          	push	hl
3178  0F7F  CD 00 00    	call	_spr_draw_index
3179  0F82  F1          	pop	af
3180  0F83              l_player_open_door_00117:
3181  0F83  DD E1       	pop	ix
3182  0F85  C9          	ret
3183  0F86              	SECTION code_compiler
3184  0F86              ;	---------------------------------
3185  0F86              ; Function player_lost_life
3186  0F86              ; ---------------------------------
3187  0F86              _player_lost_life:
3188  0F86  CD 00 00    	call	___sdcc_enter_ix
3189  0F89  3B          	dec	sp
3190  0F8A  3A 07 00    	ld	a,(_lin + 7)
3191  0F8D  32 00 00    	ld	(_s_lin0),a
3192  0F90  3A 07 00    	ld	a,(_col + 7)
3193  0F93  32 00 00    	ld	(_s_col0),a
3194  0F96  CD 00 00    	call	_spr_init_anim_bullets
3195  0F99  06 00       	ld	b,0x00
3196  0F9B              l_player_lost_life_00115:
3197  0F9B  C5          	push	bc
3198  0F9C  21 00 00    	ld	hl,0x0000
3199  0F9F  E5          	push	hl
3200  0FA0  AF          	xor	a, a
3201  0FA1  48          	ld	c,b
3202  0FA2  47          	ld	b,a
3203  0FA3  C5          	push	bc
3204  0FA4  CD 00 00    	call	_NIRVANAP_spriteT_callee
3205  0FA7  C1          	pop	bc
3206  0FA8  04          	inc	b
3207  0FA9  78          	ld	a, b
3208  0FAA  D6 08       	sub	a,0x08
3209  0FAC  38 ED       	jr	C,l_player_lost_life_00115
3210  0FAE  76          	halt
3211  0FAF  3A 00 00    	ld	a,(_s_lin0)
3212  0FB2  C6 F0       	add	a,0xf0
3213  0FB4  47          	ld	b, a
3214  0FB5  3A 00 00    	ld	a,(_s_col0)
3215  0FB8  21 00 00    	ld	hl,0x0000
3216  0FBB  E5          	push	hl
3217  0FBC  21 87 03    	ld	hl,0x0387
3218  0FBF  E5          	push	hl
3219  0FC0  48          	ld	c,b
3220  0FC1  47          	ld	b,a
3221  0FC2  C5          	push	bc
3222  0FC3  CD 00 00    	call	_spr_add_anim
3223  0FC6  F1          	pop	af
3224  0FC7  F1          	pop	af
3225  0FC8  F1          	pop	af
3226  0FC9  21 00 00    	ld	hl,_s_col0
3227  0FCC  46          	ld	b, (hl)
3228  0FCD  05          	dec	b
3229  0FCE  05          	dec	b
3230  0FCF  21 00 00    	ld	hl,0x0000
3231  0FD2  E5          	push	hl
3232  0FD3  21 87 03    	ld	hl,0x0387
3233  0FD6  E5          	push	hl
3234  0FD7  C5          	push	bc
3235  0FD8  33          	inc	sp
3236  0FD9  3A 00 00    	ld	a,(_s_lin0)
3237  0FDC  F5          	push	af
3238  0FDD  33          	inc	sp
3239  0FDE  CD 00 00    	call	_spr_add_anim
3240  0FE1  F1          	pop	af
3241  0FE2  F1          	pop	af
3242  0FE3  21 00 00    	ld	hl,0x0000
3243  0FE6  E3          	ex	(sp),hl
3244  0FE7  3A 00 00    	ld	a,(_s_col0)
3245  0FEA  21 87 03    	ld	hl,0x0387
3246  0FED  E5          	push	hl
3247  0FEE  F5          	push	af
3248  0FEF  33          	inc	sp
3249  0FF0  3A 00 00    	ld	a,(_s_lin0)
3250  0FF3  F5          	push	af
3251  0FF4  33          	inc	sp
3252  0FF5  CD 00 00    	call	_spr_add_anim
3253  0FF8  F1          	pop	af
3254  0FF9  F1          	pop	af
3255  0FFA  F1          	pop	af
3256  0FFB  21 00 00    	ld	hl,_s_col0
3257  0FFE  46          	ld	b, (hl)
3258  0FFF  04          	inc	b
3259  1000  04          	inc	b
3260  1001  21 00 00    	ld	hl,0x0000
3261  1004  E5          	push	hl
3262  1005  21 87 03    	ld	hl,0x0387
3263  1008  E5          	push	hl
3264  1009  C5          	push	bc
3265  100A  33          	inc	sp
3266  100B  3A 00 00    	ld	a,(_s_lin0)
3267  100E  F5          	push	af
3268  100F  33          	inc	sp
3269  1010  CD 00 00    	call	_spr_add_anim
3270  1013  F1          	pop	af
3271  1014  F1          	pop	af
3272  1015  F1          	pop	af
3273  1016  3A 00 00    	ld	a,(_s_lin0)
3274  1019  C6 10       	add	a,0x10
3275  101B  47          	ld	b, a
3276  101C  3A 00 00    	ld	a,(_s_col0)
3277  101F  21 00 00    	ld	hl,0x0000
3278  1022  E5          	push	hl
3279  1023  21 87 03    	ld	hl,0x0387
3280  1026  E5          	push	hl
3281  1027  48          	ld	c,b
3282  1028  47          	ld	b,a
3283  1029  C5          	push	bc
3284  102A  CD 00 00    	call	_spr_add_anim
3285  102D  F1          	pop	af
3286  102E  F1          	pop	af
3287  102F  F1          	pop	af
3288  1030  2E 00       	ld	l,0x00
3289  1032  CD 00 00    	call	_zx_border_fastcall
3290  1035  21 00 00    	ld	hl,_tmp
3291  1038  36 01       	ld	(hl),0x01
3292  103A              l_player_lost_life_00107:
3293  103A  3A 00 00    	ld	a,(_tmp)
3294  103D  B7          	or	a, a
3295  103E  28 2F       	jr	Z,l_player_lost_life_00109
3296  1040  21 06 00    	ld	hl,0x0006
3297  1043  E5          	push	hl
3298  1044  2A 00 00    	ld	hl,(_anim_time)
3299  1047  E5          	push	hl
3300  1048  CD 00 00    	call	_game_check_time
3301  104B  F1          	pop	af
3302  104C  F1          	pop	af
3303  104D  7D          	ld	a, l
3304  104E  B7          	or	a, a
3305  104F  28 16       	jr	Z,l_player_lost_life_00106
3306  1051  2A 00 00    	ld	hl,(_curr_time)
3307  1054  22 00 00    	ld	(_anim_time),hl
3308  1057  3A 00 00    	ld	a,(_anim_count)
3309  105A  B7          	or	a,a
3310  105B  28 05       	jr	Z,l_player_lost_life_00103
3311  105D  CD 00 00    	call	_spr_play_anim
3312  1060  18 05       	jr	l_player_lost_life_00106
3313  1062              l_player_lost_life_00103:
3314  1062  21 00 00    	ld	hl,_tmp
3315  1065  36 00       	ld	(hl),0x00
3316  1067              l_player_lost_life_00106:
3317  1067  21 05 00    	ld	hl,0x0005
3318  106A  CD 00 00    	call	_z80_delay_ms_fastcall
3319  106D  18 CB       	jr	l_player_lost_life_00107
3320  106F              l_player_lost_life_00109:
3321  106F  21 00 00    	ld	hl,_sprite
3322  1072  36 00       	ld	(hl),0x00
3323  1074              l_player_lost_life_00117:
3324  1074  2A 00 00    	ld	hl,(_sprite)
3325  1077  26 00       	ld	h,0x00
3326  1079  01 00 00    	ld	bc,_class
3327  107C  09          	add	hl,bc
3328  107D  7E          	ld	a,(hl)
3329  107E  B7          	or	a,a
3330  107F  28 41       	jr	Z,l_player_lost_life_00111
3331  1081  2A 00 00    	ld	hl,(_sprite)
3332  1084  26 00       	ld	h,0x00
3333  1086  01 00 00    	ld	bc,_col
3334  1089  09          	add	hl,bc
3335  108A  4E          	ld	c, (hl)
3336  108B  2A 00 00    	ld	hl,(_sprite)
3337  108E  26 00       	ld	h,0x00
3338  1090  11 00 00    	ld	de,_lin
3339  1093  19          	add	hl,de
3340  1094  46          	ld	b, (hl)
3341  1095  2A 00 00    	ld	hl,(_sprite)
3342  1098  26 00       	ld	h,0x00
3343  109A  11 00 00    	ld	de,_tile
3344  109D  19          	add	hl,de
3345  109E  7E          	ld	a,(hl)
3346  109F  21 00 00    	ld	hl,_sprite
3347  10A2  DD 77 FF    	ld	(ix-1),a
3348  10A5  3E 00       	ld	a, +((_colint) & 0xFF)
3349  10A7  86          	add	a, (hl)
3350  10A8  5F          	ld	e, a
3351  10A9  3E 00       	ld	a, +((_colint) / 256)
3352  10AB  CE 00       	adc	a,0x00
3353  10AD  57          	ld	d, a
3354  10AE  1A          	ld	a, (de)
3355  10AF  5F          	ld	e, a
3356  10B0  DD 7E FF    	ld	a,(ix-1)
3357  10B3  83          	add	a, e
3358  10B4  5F          	ld	e, a
3359  10B5  79          	ld	a, c
3360  10B6  48          	ld	c,b
3361  10B7  47          	ld	b,a
3362  10B8  C5          	push	bc
3363  10B9  7B          	ld	a, e
3364  10BA  F5          	push	af
3365  10BB  33          	inc	sp
3366  10BC  7E          	ld	a, (hl)
3367  10BD  F5          	push	af
3368  10BE  33          	inc	sp
3369  10BF  CD 00 00    	call	_NIRVANAP_spriteT_callee
3370  10C2              l_player_lost_life_00111:
3371  10C2  2A 00 00    	ld	hl,(_sprite)
3372  10C5  26 00       	ld	h,0x00
3373  10C7  01 00 00    	ld	bc,_class
3374  10CA  09          	add	hl,bc
3375  10CB  AF          	xor	a,a
3376  10CC  77          	ld	(hl),a
3377  10CD  2A 00 00    	ld	hl,(_sprite)
3378  10D0  26 00       	ld	h,0x00
3379  10D2  01 00 00    	ld	bc,_bullet_col
3380  10D5  09          	add	hl,bc
3381  10D6  36 FF       	ld	(hl),0xff
3382  10D8  21 00 00    	ld	hl,_sprite
3383  10DB  7E          	ld	a,(hl)
3384  10DC  3C          	inc	a
3385  10DD  77          	ld	(hl),a
3386  10DE  D6 07       	sub	a,0x07
3387  10E0  38 92       	jr	C,l_player_lost_life_00117
3388  10E2  3A 00 00    	ld	a,(_player_lives)
3389  10E5  B7          	or	a, a
3390  10E6  28 09       	jr	Z,l_player_lost_life_00119
3391  10E8  21 F4 01    	ld	hl,0x01f4
3392  10EB  CD 00 00    	call	_z80_delay_ms_fastcall
3393  10EE  CD 00 00    	call	_game_round_init
3394  10F1              l_player_lost_life_00119:
3395  10F1  33          	inc	sp
3396  10F2  DD E1       	pop	ix
3397  10F4  C9          	ret
3398  10F5              	SECTION code_compiler
3399  10F5              ;	---------------------------------
3400  10F5              ; Function player_hit
3401  10F5              ; ---------------------------------
3402  10F5              _player_hit:
3403  10F5  7D          	ld	a,l
3404  10F6  4D          	ld	c,l
3405  10F7  21 00 00    	ld	hl,_player_vita
3406  10FA  96          	sub	a, (hl)
3407  10FB  30 17       	jr	NC,l_player_hit_00107
3408  10FD  3A 00 00    	ld	a,(_game_inmune)
3409  1100  B7          	or	a, a
3410  1101  20 06       	jr	NZ,l_player_hit_00102
3411  1103  21 00 00    	ld	hl,_player_vita
3412  1106  7E          	ld	a, (hl)
3413  1107  91          	sub	a, c
3414  1108  77          	ld	(hl), a
3415  1109              l_player_hit_00102:
3416  1109  2A 00 00    	ld	hl,(_curr_time)
3417  110C  22 00 00    	ld	(_player_hit_time),hl
3418  110F  CD 00 00    	call	_game_update_stats
3419  1112  18 2C       	jr	l_player_hit_00109
3420  1114              l_player_hit_00107:
3421  1114  21 00 00    	ld	hl,_player_vita
3422  1117  36 00       	ld	(hl),0x00
3423  1119  CD 00 00    	call	_game_update_stats
3424  111C  CD 86 0F    	call	_player_lost_life
3425  111F  21 00 00    	ld	hl,_player_lives
3426  1122  7E          	ld	a, (hl)
3427  1123  B7          	or	a, a
3428  1124  28 10       	jr	Z,l_player_hit_00104
3429  1126  35          	dec	(hl)
3430  1127  21 00 00    	ld	hl,_player_mana
3431  112A  36 64       	ld	(hl),0x64
3432  112C  21 00 00    	ld	hl,_player_vita
3433  112F  36 64       	ld	(hl),0x64
3434  1131  CD 00 00    	call	_game_update_stats
3435  1134  18 0A       	jr	l_player_hit_00109
3436  1136              l_player_hit_00104:
3437  1136  21 00 00    	ld	hl,_player_lives
3438  1139  36 00       	ld	(hl),0x00
3439  113B  21 00 00    	ld	hl,_game_over
3440  113E  36 01       	ld	(hl),0x01
3441  1140              l_player_hit_00109:
3442  1140  C9          	ret
3443  1141              	SECTION IGNORE
3444  0000              
