1     0000              MODULE game_player_c
2     0000              
3     0000              ;--------------------------------------------------------
4     0000              ; File Created by SDCC : free open source ANSI-C Compiler
5     0000              ; Version 3.6.5 #9958 (Mac OS X i386)
6     0000              ;--------------------------------------------------------
7     0000              ; Processed by Z88DK
8     0000              ;--------------------------------------------------------
9     0000              
10    0000              	EXTERN __divschar
11    0000              	EXTERN __divschar_callee
12    0000              	EXTERN __divsint
13    0000              	EXTERN __divsint_callee
14    0000              	EXTERN __divslong
15    0000              	EXTERN __divslong_callee
16    0000              	EXTERN __divslonglong
17    0000              	EXTERN __divslonglong_callee
18    0000              	EXTERN __divsuchar
19    0000              	EXTERN __divsuchar_callee
20    0000              	EXTERN __divuchar
21    0000              	EXTERN __divuchar_callee
22    0000              	EXTERN __divuint
23    0000              	EXTERN __divuint_callee
24    0000              	EXTERN __divulong
25    0000              	EXTERN __divulong_callee
26    0000              	EXTERN __divulonglong
27    0000              	EXTERN __divulonglong_callee
28    0000              	EXTERN __divuschar
29    0000              	EXTERN __divuschar_callee
30    0000              	EXTERN __modschar
31    0000              	EXTERN __modschar_callee
32    0000              	EXTERN __modsint
33    0000              	EXTERN __modsint_callee
34    0000              	EXTERN __modslong
35    0000              	EXTERN __modslong_callee
36    0000              	EXTERN __modslonglong
37    0000              	EXTERN __modslonglong_callee
38    0000              	EXTERN __modsuchar
39    0000              	EXTERN __modsuchar_callee
40    0000              	EXTERN __moduchar
41    0000              	EXTERN __moduchar_callee
42    0000              	EXTERN __moduint
43    0000              	EXTERN __moduint_callee
44    0000              	EXTERN __modulong
45    0000              	EXTERN __modulong_callee
46    0000              	EXTERN __modulonglong
47    0000              	EXTERN __modulonglong_callee
48    0000              	EXTERN __moduschar
49    0000              	EXTERN __moduschar_callee
50    0000              	EXTERN __mulint
51    0000              	EXTERN __mulint_callee
52    0000              	EXTERN __mullong
53    0000              	EXTERN __mullong_callee
54    0000              	EXTERN __mullonglong
55    0000              	EXTERN __mullonglong_callee
56    0000              	EXTERN __mulschar
57    0000              	EXTERN __mulschar_callee
58    0000              	EXTERN __mulsuchar
59    0000              	EXTERN __mulsuchar_callee
60    0000              	EXTERN __muluschar
61    0000              	EXTERN __muluschar_callee
62    0000              	EXTERN __rlslonglong
63    0000              	EXTERN __rlslonglong_callee
64    0000              	EXTERN __rlulonglong
65    0000              	EXTERN __rlulonglong_callee
66    0000              	EXTERN __rrslonglong
67    0000              	EXTERN __rrslonglong_callee
68    0000              	EXTERN __rrulonglong
69    0000              	EXTERN __rrulonglong_callee
70    0000              	EXTERN ___sdcc_call_hl
71    0000              	EXTERN ___sdcc_call_iy
72    0000              	EXTERN ___sdcc_enter_ix
73    0000              	EXTERN _banked_call
74    0000              	EXTERN _banked_ret
75    0000              	EXTERN ___fs2schar
76    0000              	EXTERN ___fs2schar_callee
77    0000              	EXTERN ___fs2sint
78    0000              	EXTERN ___fs2sint_callee
79    0000              	EXTERN ___fs2slong
80    0000              	EXTERN ___fs2slong_callee
81    0000              	EXTERN ___fs2slonglong
82    0000              	EXTERN ___fs2slonglong_callee
83    0000              	EXTERN ___fs2uchar
84    0000              	EXTERN ___fs2uchar_callee
85    0000              	EXTERN ___fs2uint
86    0000              	EXTERN ___fs2uint_callee
87    0000              	EXTERN ___fs2ulong
88    0000              	EXTERN ___fs2ulong_callee
89    0000              	EXTERN ___fs2ulonglong
90    0000              	EXTERN ___fs2ulonglong_callee
91    0000              	EXTERN ___fsadd
92    0000              	EXTERN ___fsadd_callee
93    0000              	EXTERN ___fsdiv
94    0000              	EXTERN ___fsdiv_callee
95    0000              	EXTERN ___fseq
96    0000              	EXTERN ___fseq_callee
97    0000              	EXTERN ___fsgt
98    0000              	EXTERN ___fsgt_callee
99    0000              	EXTERN ___fslt
100   0000              	EXTERN ___fslt_callee
101   0000              	EXTERN ___fsmul
102   0000              	EXTERN ___fsmul_callee
103   0000              	EXTERN ___fsneq
104   0000              	EXTERN ___fsneq_callee
105   0000              	EXTERN ___fssub
106   0000              	EXTERN ___fssub_callee
107   0000              	EXTERN ___schar2fs
108   0000              	EXTERN ___schar2fs_callee
109   0000              	EXTERN ___sint2fs
110   0000              	EXTERN ___sint2fs_callee
111   0000              	EXTERN ___slong2fs
112   0000              	EXTERN ___slong2fs_callee
113   0000              	EXTERN ___slonglong2fs
114   0000              	EXTERN ___slonglong2fs_callee
115   0000              	EXTERN ___uchar2fs
116   0000              	EXTERN ___uchar2fs_callee
117   0000              	EXTERN ___uint2fs
118   0000              	EXTERN ___uint2fs_callee
119   0000              	EXTERN ___ulong2fs
120   0000              	EXTERN ___ulong2fs_callee
121   0000              	EXTERN ___ulonglong2fs
122   0000              	EXTERN ___ulonglong2fs_callee
123   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
126   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
127   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
128   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
129   0000              	EXTERN ____sdcc_4_ldi_save_bc
130   0000              	EXTERN ____sdcc_4_push_hlix
131   0000              	EXTERN ____sdcc_4_push_mhl
132   0000              	EXTERN ____sdcc_lib_setmem_hl
133   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
134   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
135   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
136   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
137   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
138   0000              	EXTERN ____sdcc_ll_add_deix_hlix
139   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
140   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
141   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
142   0000              	EXTERN ____sdcc_ll_asr_hlix_a
143   0000              	EXTERN ____sdcc_ll_asr_mbc_a
144   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
145   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
146   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
147   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
148   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
149   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
150   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
151   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
152   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
153   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
155   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
156   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
157   0000              	EXTERN ____sdcc_ll_push_hlix
158   0000              	EXTERN ____sdcc_ll_push_mhl
159   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
160   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
161   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
162   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
163   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
164   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
165   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
166   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
167   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
168   0000              	EXTERN ____sdcc_load_debc_deix
169   0000              	EXTERN ____sdcc_load_dehl_deix
170   0000              	EXTERN ____sdcc_load_debc_mhl
171   0000              	EXTERN ____sdcc_load_hlde_mhl
172   0000              	EXTERN ____sdcc_store_dehl_bcix
173   0000              	EXTERN ____sdcc_store_debc_hlix
174   0000              	EXTERN ____sdcc_store_debc_mhl
175   0000              	EXTERN ____sdcc_cpu_pop_ei
176   0000              	EXTERN ____sdcc_cpu_pop_ei_jp
177   0000              	EXTERN ____sdcc_cpu_push_di
178   0000              	EXTERN ____sdcc_outi
179   0000              	EXTERN ____sdcc_outi_128
180   0000              	EXTERN ____sdcc_outi_256
181   0000              	EXTERN ____sdcc_ldi
182   0000              	EXTERN ____sdcc_ldi_128
183   0000              	EXTERN ____sdcc_ldi_256
184   0000              
185   0000              ;--------------------------------------------------------
186   0000              ; Public variables in this module
187   0000              ;--------------------------------------------------------
188   0000              	GLOBAL _player_check_map
189   0000              	GLOBAL _player_init
190   0000              	GLOBAL _player_check_input
191   0000              	GLOBAL _player_collision
192   0000              	GLOBAL _player_kill
193   0000              	GLOBAL _player_restart
194   0000              	GLOBAL _player_turn
195   0000              	GLOBAL _player_move
196   0000              	GLOBAL _player_check_stairs_down
197   0000              	GLOBAL _player_check_stairs
198   0000              	GLOBAL _player_tile
199   0000              	GLOBAL _player_move_input
200   0000              	GLOBAL _player_fire
201   0000              	GLOBAL _player_pick_item
202   0000              	GLOBAL _player_hit_platform
203   0000              	GLOBAL _player_hit_platform_clear
204   0000              	GLOBAL _player_score_add
205   0000              	GLOBAL _player_check_floor
206   0000              	GLOBAL _player_move_jump
207   0000              	GLOBAL _player_open_door
208   0000              	GLOBAL _player_lost_life
209   0000              	GLOBAL _player_hit
210   0000              ;--------------------------------------------------------
211   0000              ; Externals used
212   0000              ;--------------------------------------------------------
213   0000              	GLOBAL _ulltoa_callee
214   0000              	GLOBAL _ulltoa
215   0000              	GLOBAL _strtoull_callee
216   0000              	GLOBAL _strtoull
217   0000              	GLOBAL _strtoll_callee
218   0000              	GLOBAL _strtoll
219   0000              	GLOBAL _lltoa_callee
220   0000              	GLOBAL _lltoa
221   0000              	GLOBAL _llabs_callee
222   0000              	GLOBAL _llabs
223   0000              	GLOBAL __lldivu__callee
224   0000              	GLOBAL __lldivu_
225   0000              	GLOBAL __lldiv__callee
226   0000              	GLOBAL __lldiv_
227   0000              	GLOBAL _atoll_callee
228   0000              	GLOBAL _atoll
229   0000              	GLOBAL _realloc_unlocked_callee
230   0000              	GLOBAL _realloc_unlocked
231   0000              	GLOBAL _malloc_unlocked_fastcall
232   0000              	GLOBAL _malloc_unlocked
233   0000              	GLOBAL _free_unlocked_fastcall
234   0000              	GLOBAL _free_unlocked
235   0000              	GLOBAL _calloc_unlocked_callee
236   0000              	GLOBAL _calloc_unlocked
237   0000              	GLOBAL _aligned_alloc_unlocked_callee
238   0000              	GLOBAL _aligned_alloc_unlocked
239   0000              	GLOBAL _realloc_callee
240   0000              	GLOBAL _realloc
241   0000              	GLOBAL _malloc_fastcall
242   0000              	GLOBAL _malloc
243   0000              	GLOBAL _free_fastcall
244   0000              	GLOBAL _free
245   0000              	GLOBAL _calloc_callee
246   0000              	GLOBAL _calloc
247   0000              	GLOBAL _aligned_alloc_callee
248   0000              	GLOBAL _aligned_alloc
249   0000              	GLOBAL _utoa_callee
250   0000              	GLOBAL _utoa
251   0000              	GLOBAL _ultoa_callee
252   0000              	GLOBAL _ultoa
253   0000              	GLOBAL _system_fastcall
254   0000              	GLOBAL _system
255   0000              	GLOBAL _strtoul_callee
256   0000              	GLOBAL _strtoul
257   0000              	GLOBAL _strtol_callee
258   0000              	GLOBAL _strtol
259   0000              	GLOBAL _strtof_callee
260   0000              	GLOBAL _strtof
261   0000              	GLOBAL _strtod_callee
262   0000              	GLOBAL _strtod
263   0000              	GLOBAL _srand_fastcall
264   0000              	GLOBAL _srand
265   0000              	GLOBAL _rand
266   0000              	GLOBAL _quick_exit_fastcall
267   0000              	GLOBAL _quick_exit
268   0000              	GLOBAL _qsort_callee
269   0000              	GLOBAL _qsort
270   0000              	GLOBAL _ltoa_callee
271   0000              	GLOBAL _ltoa
272   0000              	GLOBAL _labs_fastcall
273   0000              	GLOBAL _labs
274   0000              	GLOBAL _itoa_callee
275   0000              	GLOBAL _itoa
276   0000              	GLOBAL _ftoh_callee
277   0000              	GLOBAL _ftoh
278   0000              	GLOBAL _ftog_callee
279   0000              	GLOBAL _ftog
280   0000              	GLOBAL _ftoe_callee
281   0000              	GLOBAL _ftoe
282   0000              	GLOBAL _ftoa_callee
283   0000              	GLOBAL _ftoa
284   0000              	GLOBAL _exit_fastcall
285   0000              	GLOBAL _exit
286   0000              	GLOBAL _dtoh_callee
287   0000              	GLOBAL _dtoh
288   0000              	GLOBAL _dtog_callee
289   0000              	GLOBAL _dtog
290   0000              	GLOBAL _dtoe_callee
291   0000              	GLOBAL _dtoe
292   0000              	GLOBAL _dtoa_callee
293   0000              	GLOBAL _dtoa
294   0000              	GLOBAL _bsearch_callee
295   0000              	GLOBAL _bsearch
296   0000              	GLOBAL _atol_fastcall
297   0000              	GLOBAL _atol
298   0000              	GLOBAL _atoi_fastcall
299   0000              	GLOBAL _atoi
300   0000              	GLOBAL _atof_fastcall
301   0000              	GLOBAL _atof
302   0000              	GLOBAL _atexit_fastcall
303   0000              	GLOBAL _atexit
304   0000              	GLOBAL _at_quick_exit_fastcall
305   0000              	GLOBAL _at_quick_exit
306   0000              	GLOBAL _abs_fastcall
307   0000              	GLOBAL _abs
308   0000              	GLOBAL _abort
309   0000              	GLOBAL __strtou__callee
310   0000              	GLOBAL __strtou_
311   0000              	GLOBAL __strtoi__callee
312   0000              	GLOBAL __strtoi_
313   0000              	GLOBAL __random_uniform_xor_8__fastcall
314   0000              	GLOBAL __random_uniform_xor_8_
315   0000              	GLOBAL __random_uniform_xor_32__fastcall
316   0000              	GLOBAL __random_uniform_xor_32_
317   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
318   0000              	GLOBAL __random_uniform_cmwc_8_
319   0000              	GLOBAL __shellsort__callee
320   0000              	GLOBAL __shellsort_
321   0000              	GLOBAL __quicksort__callee
322   0000              	GLOBAL __quicksort_
323   0000              	GLOBAL __insertion_sort__callee
324   0000              	GLOBAL __insertion_sort_
325   0000              	GLOBAL __ldivu__callee
326   0000              	GLOBAL __ldivu_
327   0000              	GLOBAL __ldiv__callee
328   0000              	GLOBAL __ldiv_
329   0000              	GLOBAL __divu__callee
330   0000              	GLOBAL __divu_
331   0000              	GLOBAL __div__callee
332   0000              	GLOBAL __div_
333   0000              	GLOBAL _NIRVANAP_drawTW_raw_callee
334   0000              	GLOBAL _NIRVANAP_drawTW_raw
335   0000              	GLOBAL _NIRVANAP_drawTW_callee
336   0000              	GLOBAL _NIRVANAP_drawTW
337   0000              	GLOBAL _NIRVANAP_drawW_raw_callee
338   0000              	GLOBAL _NIRVANAP_drawW_raw
339   0000              	GLOBAL _NIRVANAP_drawW_callee
340   0000              	GLOBAL _NIRVANAP_drawW
341   0000              	GLOBAL _NIRVANAP_spriteT_callee
342   0000              	GLOBAL _NIRVANAP_spriteT
343   0000              	GLOBAL _NIRVANAP_fillC_callee
344   0000              	GLOBAL _NIRVANAP_fillC
345   0000              	GLOBAL _NIRVANAP_readC_callee
346   0000              	GLOBAL _NIRVANAP_readC
347   0000              	GLOBAL _NIRVANAP_paintC_callee
348   0000              	GLOBAL _NIRVANAP_paintC
349   0000              	GLOBAL _NIRVANAP_printC_callee
350   0000              	GLOBAL _NIRVANAP_printC
351   0000              	GLOBAL _NIRVANAP_fillT_raw_callee
352   0000              	GLOBAL _NIRVANAP_fillT_raw
353   0000              	GLOBAL _NIRVANAP_fillT_callee
354   0000              	GLOBAL _NIRVANAP_fillT
355   0000              	GLOBAL _NIRVANAP_drawT_raw_callee
356   0000              	GLOBAL _NIRVANAP_drawT_raw
357   0000              	GLOBAL _NIRVANAP_drawT_callee
358   0000              	GLOBAL _NIRVANAP_drawT
359   0000              	GLOBAL _NIRVANAP_stop
360   0000              	GLOBAL _NIRVANAP_start
361   0000              	GLOBAL _debug3
362   0000              	GLOBAL _debug2
363   0000              	GLOBAL _debug
364   0000              	GLOBAL _zx_print_str
365   0000              	GLOBAL _zx_print_int
366   0000              	GLOBAL _zx_print_chr
367   0000              	GLOBAL _zx_print_bonus_time
368   0000              	GLOBAL _zx_isr
369   0000              	GLOBAL _z80_otdr_callee
370   0000              	GLOBAL _z80_otdr
371   0000              	GLOBAL _z80_otir_callee
372   0000              	GLOBAL _z80_otir
373   0000              	GLOBAL _z80_outp_callee
374   0000              	GLOBAL _z80_outp
375   0000              	GLOBAL _z80_indr_callee
376   0000              	GLOBAL _z80_indr
377   0000              	GLOBAL _z80_inir_callee
378   0000              	GLOBAL _z80_inir
379   0000              	GLOBAL _z80_inp_fastcall
380   0000              	GLOBAL _z80_inp
381   0000              	GLOBAL _z80_set_int_state_fastcall
382   0000              	GLOBAL _z80_set_int_state
383   0000              	GLOBAL _z80_get_int_state
384   0000              	GLOBAL _z80_delay_tstate_fastcall
385   0000              	GLOBAL _z80_delay_tstate
386   0000              	GLOBAL _z80_delay_ms_fastcall
387   0000              	GLOBAL _z80_delay_ms
388   0000              	GLOBAL _im2_remove_generic_callback_callee
389   0000              	GLOBAL _im2_remove_generic_callback
390   0000              	GLOBAL _im2_prepend_generic_callback_callee
391   0000              	GLOBAL _im2_prepend_generic_callback
392   0000              	GLOBAL _im2_append_generic_callback_callee
393   0000              	GLOBAL _im2_append_generic_callback
394   0000              	GLOBAL _im2_create_generic_isr_8080_callee
395   0000              	GLOBAL _im2_create_generic_isr_8080
396   0000              	GLOBAL _im2_create_generic_isr_callee
397   0000              	GLOBAL _im2_create_generic_isr
398   0000              	GLOBAL _im2_install_isr_callee
399   0000              	GLOBAL _im2_install_isr
400   0000              	GLOBAL _im2_init_fastcall
401   0000              	GLOBAL _im2_init
402   0000              	GLOBAL _intrinsic_swap_word_32_fastcall
403   0000              	GLOBAL _intrinsic_swap_word_32
404   0000              	GLOBAL _intrinsic_swap_endian_32_fastcall
405   0000              	GLOBAL _intrinsic_swap_endian_32
406   0000              	GLOBAL _intrinsic_swap_endian_16_fastcall
407   0000              	GLOBAL _intrinsic_swap_endian_16
408   0000              	GLOBAL _intrinsic_return_de
409   0000              	GLOBAL _intrinsic_return_bc
410   0000              	GLOBAL _intrinsic_exx
411   0000              	GLOBAL _intrinsic_ex_de_hl
412   0000              	GLOBAL _intrinsic_nop
413   0000              	GLOBAL _intrinsic_im_2
414   0000              	GLOBAL _intrinsic_im_1
415   0000              	GLOBAL _intrinsic_im_0
416   0000              	GLOBAL _intrinsic_retn
417   0000              	GLOBAL _intrinsic_reti
418   0000              	GLOBAL _intrinsic_halt
419   0000              	GLOBAL _intrinsic_ei
420   0000              	GLOBAL _intrinsic_di
421   0000              	GLOBAL _intrinsic_stub
422   0000              	GLOBAL _intrinsic_outi
423   0000              	GLOBAL _intrinsic_ldi
424   0000              	GLOBAL _zx_pattern_fill_callee
425   0000              	GLOBAL _zx_pattern_fill
426   0000              	GLOBAL _zx_saddrpup_fastcall
427   0000              	GLOBAL _zx_saddrpup
428   0000              	GLOBAL _zx_saddrpright_callee
429   0000              	GLOBAL _zx_saddrpright
430   0000              	GLOBAL _zx_saddrpleft_callee
431   0000              	GLOBAL _zx_saddrpleft
432   0000              	GLOBAL _zx_saddrpdown_fastcall
433   0000              	GLOBAL _zx_saddrpdown
434   0000              	GLOBAL _zx_saddrcup_fastcall
435   0000              	GLOBAL _zx_saddrcup
436   0000              	GLOBAL _zx_saddrcright_fastcall
437   0000              	GLOBAL _zx_saddrcright
438   0000              	GLOBAL _zx_saddrcleft_fastcall
439   0000              	GLOBAL _zx_saddrcleft
440   0000              	GLOBAL _zx_saddrcdown_fastcall
441   0000              	GLOBAL _zx_saddrcdown
442   0000              	GLOBAL _zx_saddr2py_fastcall
443   0000              	GLOBAL _zx_saddr2py
444   0000              	GLOBAL _zx_saddr2px_fastcall
445   0000              	GLOBAL _zx_saddr2px
446   0000              	GLOBAL _zx_saddr2cy_fastcall
447   0000              	GLOBAL _zx_saddr2cy
448   0000              	GLOBAL _zx_saddr2cx_fastcall
449   0000              	GLOBAL _zx_saddr2cx
450   0000              	GLOBAL _zx_saddr2aaddr_fastcall
451   0000              	GLOBAL _zx_saddr2aaddr
452   0000              	GLOBAL _zx_py2saddr_fastcall
453   0000              	GLOBAL _zx_py2saddr
454   0000              	GLOBAL _zx_py2aaddr_fastcall
455   0000              	GLOBAL _zx_py2aaddr
456   0000              	GLOBAL _zx_pxy2saddr_callee
457   0000              	GLOBAL _zx_pxy2saddr
458   0000              	GLOBAL _zx_pxy2aaddr_callee
459   0000              	GLOBAL _zx_pxy2aaddr
460   0000              	GLOBAL _zx_px2bitmask_fastcall
461   0000              	GLOBAL _zx_px2bitmask
462   0000              	GLOBAL _zx_cy2saddr_fastcall
463   0000              	GLOBAL _zx_cy2saddr
464   0000              	GLOBAL _zx_cy2aaddr_fastcall
465   0000              	GLOBAL _zx_cy2aaddr
466   0000              	GLOBAL _zx_cxy2saddr_callee
467   0000              	GLOBAL _zx_cxy2saddr
468   0000              	GLOBAL _zx_cxy2aaddr_callee
469   0000              	GLOBAL _zx_cxy2aaddr
470   0000              	GLOBAL _zx_bitmask2px_fastcall
471   0000              	GLOBAL _zx_bitmask2px
472   0000              	GLOBAL _zx_aaddrcup_fastcall
473   0000              	GLOBAL _zx_aaddrcup
474   0000              	GLOBAL _zx_aaddrcright_fastcall
475   0000              	GLOBAL _zx_aaddrcright
476   0000              	GLOBAL _zx_aaddrcleft_fastcall
477   0000              	GLOBAL _zx_aaddrcleft
478   0000              	GLOBAL _zx_aaddrcdown_fastcall
479   0000              	GLOBAL _zx_aaddrcdown
480   0000              	GLOBAL _zx_aaddr2saddr_fastcall
481   0000              	GLOBAL _zx_aaddr2saddr
482   0000              	GLOBAL _zx_aaddr2py_fastcall
483   0000              	GLOBAL _zx_aaddr2py
484   0000              	GLOBAL _zx_aaddr2px_fastcall
485   0000              	GLOBAL _zx_aaddr2px
486   0000              	GLOBAL _zx_aaddr2cy_fastcall
487   0000              	GLOBAL _zx_aaddr2cy
488   0000              	GLOBAL _zx_aaddr2cx_fastcall
489   0000              	GLOBAL _zx_aaddr2cx
490   0000              	GLOBAL _zx_visit_wc_pix_callee
491   0000              	GLOBAL _zx_visit_wc_pix
492   0000              	GLOBAL _zx_visit_wc_attr_callee
493   0000              	GLOBAL _zx_visit_wc_attr
494   0000              	GLOBAL _zx_scroll_wc_up_pix_callee
495   0000              	GLOBAL _zx_scroll_wc_up_pix
496   0000              	GLOBAL _zx_scroll_wc_up_attr_callee
497   0000              	GLOBAL _zx_scroll_wc_up_attr
498   0000              	GLOBAL _zx_scroll_wc_up_callee
499   0000              	GLOBAL _zx_scroll_wc_up
500   0000              	GLOBAL _zx_scroll_up_pix_callee
501   0000              	GLOBAL _zx_scroll_up_pix
502   0000              	GLOBAL _zx_scroll_up_attr_callee
503   0000              	GLOBAL _zx_scroll_up_attr
504   0000              	GLOBAL _zx_scroll_up_callee
505   0000              	GLOBAL _zx_scroll_up
506   0000              	GLOBAL _zx_cls_wc_pix_callee
507   0000              	GLOBAL _zx_cls_wc_pix
508   0000              	GLOBAL _zx_cls_wc_attr_callee
509   0000              	GLOBAL _zx_cls_wc_attr
510   0000              	GLOBAL _zx_cls_wc_callee
511   0000              	GLOBAL _zx_cls_wc
512   0000              	GLOBAL _zx_cls_pix_fastcall
513   0000              	GLOBAL _zx_cls_pix
514   0000              	GLOBAL _zx_cls_attr_fastcall
515   0000              	GLOBAL _zx_cls_attr
516   0000              	GLOBAL _zx_cls_fastcall
517   0000              	GLOBAL _zx_cls
518   0000              	GLOBAL _zx_border_fastcall
519   0000              	GLOBAL _zx_border
520   0000              	GLOBAL _spr_btile_paint_back
521   0000              	GLOBAL _spr_explode_bullet
522   0000              	GLOBAL _spr_init_anim_bullets
523   0000              	GLOBAL _spr_turn_horizontal
524   0000              	GLOBAL _spr_play_bullets
525   0000              	GLOBAL _spr_play_anim
526   0000              	GLOBAL _spr_add_anim
527   0000              	GLOBAL _spr_page_map
528   0000              	GLOBAL _spr_page_right
529   0000              	GLOBAL _spr_page_left
530   0000              	GLOBAL _spr_tile_paint
531   0000              	GLOBAL _spr_calc_hor
532   0000              	GLOBAL _spr_draw_row
533   0000              	GLOBAL _spr_draw_index
534   0000              	GLOBAL _spr_draw_clear
535   0000              	GLOBAL _spr_brick_anim
536   0000              	GLOBAL _spr_back_repaint
537   0000              	GLOBAL _spr_tile
538   0000              	GLOBAL _spr_destroy
539   0000              	GLOBAL _spr_tile_dir
540   0000              	GLOBAL _spr_redraw
541   0000              	GLOBAL _spr_move_left
542   0000              	GLOBAL _spr_move_right
543   0000              	GLOBAL _spr_move_horizontal
544   0000              	GLOBAL _spr_move_down
545   0000              	GLOBAL _spr_move_up
546   0000              	GLOBAL _spr_calc_index
547   0000              	GLOBAL _spr_chktime
548   0000              	GLOBAL _sound_hit_brick
549   0000              	GLOBAL _sound_hit_enemy
550   0000              	GLOBAL _sound_kill
551   0000              	GLOBAL _sound_enter_enemy
552   0000              	GLOBAL _sound_coin
553   0000              	GLOBAL _sound_jump
554   0000              	GLOBAL _sound_slide
555   0000              	GLOBAL _player_player_hit_pow
556   0000              	GLOBAL _game_obj_chk
557   0000              	GLOBAL _game_obj_set
558   0000              	GLOBAL _game_shoot_fire
559   0000              	GLOBAL _game_add_enemy
560   0000              	GLOBAL _game_joystick_set_menu
561   0000              	GLOBAL _game_joystick_set
562   0000              	GLOBAL _game_joystick_change
563   0000              	GLOBAL _game_print_header
564   0000              	GLOBAL _game_end
565   0000              	GLOBAL _game_phase_print_score_back
566   0000              	GLOBAL _game_check_time
567   0000              	GLOBAL _game_rotate_attrib
568   0000              	GLOBAL _game_colour_message
569   0000              	GLOBAL _game_paint_attrib_lin_h
570   0000              	GLOBAL _game_paint_attrib_lin
571   0000              	GLOBAL _game_paint_attrib
572   0000              	GLOBAL _game_print_score
573   0000              	GLOBAL _game_unfreeze_all
574   0000              	GLOBAL _game_freeze_all
575   0000              	GLOBAL _game_freeze
576   0000              	GLOBAL _game_enemy_add_get_index
577   0000              	GLOBAL _game_check_cell
578   0000              	GLOBAL _game_check_map
579   0000              	GLOBAL _game_loop
580   0000              	GLOBAL _game_round_init
581   0000              	GLOBAL _game_start_timer
582   0000              	GLOBAL _game_tick
583   0000              	GLOBAL _game_update_stats
584   0000              	GLOBAL _game_print_footer
585   0000              	GLOBAL _game_fill_row
586   0000              	GLOBAL _game_draw_screen
587   0000              	GLOBAL _enemy_avoid_fall_dead
588   0000              	GLOBAL _enemy_avoid_fall
589   0000              	GLOBAL _enemy_respawn
590   0000              	GLOBAL _enemy_init
591   0000              	GLOBAL _enemy_move
592   0000              	GLOBAL _enemy_turn
593   0000              	GLOBAL _enemy_hit
594   0000              	GLOBAL _enemy_coin1
595   0000              	GLOBAL _enemy_static
596   0000              	GLOBAL _enemy_walk
597   0000              	GLOBAL _enemy_horizontal
598   0000              	GLOBAL _enemy_vertical
599   0000              	GLOBAL _ay_fx_play
600   0000              	GLOBAL _ay_midi_play
601   0000              	GLOBAL _ay_is_playing
602   0000              	GLOBAL _ay_reset
603   0000              	GLOBAL _test_func
604   0000              	GLOBAL _test_proc
605   0000              	GLOBAL _in_mouse_kempston_wheel_delta
606   0000              	GLOBAL _in_mouse_kempston_wheel
607   0000              	GLOBAL _in_mouse_kempston_callee
608   0000              	GLOBAL _in_mouse_kempston
609   0000              	GLOBAL _in_mouse_kempston_setpos_callee
610   0000              	GLOBAL _in_mouse_kempston_setpos
611   0000              	GLOBAL _in_mouse_kempston_reset
612   0000              	GLOBAL _in_mouse_kempston_init
613   0000              	GLOBAL _in_mouse_amx_wheel_delta
614   0000              	GLOBAL _in_mouse_amx_wheel
615   0000              	GLOBAL _in_mouse_amx_callee
616   0000              	GLOBAL _in_mouse_amx
617   0000              	GLOBAL _in_mouse_amx_setpos_callee
618   0000              	GLOBAL _in_mouse_amx_setpos
619   0000              	GLOBAL _in_mouse_amx_reset
620   0000              	GLOBAL _in_mouse_amx_init_callee
621   0000              	GLOBAL _in_mouse_amx_init
622   0000              	GLOBAL _in_stick_sinclair2
623   0000              	GLOBAL _in_stick_sinclair1
624   0000              	GLOBAL _in_stick_kempston
625   0000              	GLOBAL _in_stick_fuller
626   0000              	GLOBAL _in_stick_cursor
627   0000              	GLOBAL _in_stick_keyboard_fastcall
628   0000              	GLOBAL _in_stick_keyboard
629   0000              	GLOBAL _in_wait_nokey
630   0000              	GLOBAL _in_wait_key
631   0000              	GLOBAL _in_test_key
632   0000              	GLOBAL _in_pause_fastcall
633   0000              	GLOBAL _in_pause
634   0000              	GLOBAL _in_key_scancode_fastcall
635   0000              	GLOBAL _in_key_scancode
636   0000              	GLOBAL _in_key_pressed_fastcall
637   0000              	GLOBAL _in_key_pressed
638   0000              	GLOBAL _in_inkey
639   0000              	GLOBAL _NIRVANAP_CHAR_TABLE
640   0000              	GLOBAL _NIRVANAP_WIDE_IMAGES
641   0000              	GLOBAL _NIRVANAP_TILE_IMAGES
642   0000              	GLOBAL _NIRVANAP_HOLE
643   0000              	GLOBAL _NIRVANAP_ISR_HOOK
644   0000              	GLOBAL _map_paper_last
645   0000              	GLOBAL _map_paper_clr
646   0000              	GLOBAL _map_paper
647   0000              	GLOBAL _draw_count
648   0000              	GLOBAL _g_player_hit_right
649   0000              	GLOBAL _g_player_hit_left
650   0000              	GLOBAL _joynames
651   0000              	GLOBAL _initials
652   0000              	GLOBAL _bullet_count
653   0000              	GLOBAL _bullet_frames
654   0000              	GLOBAL _bullet_colint
655   0000              	GLOBAL _bullet_dir
656   0000              	GLOBAL _bullet_tile
657   0000              	GLOBAL _bullet_col
658   0000              	GLOBAL _bullet_lin
659   0000              	GLOBAL _mush_class
660   0000              	GLOBAL _mush_index
661   0000              	GLOBAL _anim_count
662   0000              	GLOBAL _anim_respanwn
663   0000              	GLOBAL _anim_loop
664   0000              	GLOBAL _anim_end
665   0000              	GLOBAL _anim_int
666   0000              	GLOBAL _anim_tile
667   0000              	GLOBAL _anim_col
668   0000              	GLOBAL _anim_lin
669   0000              	GLOBAL _phase_curr
670   0000              	GLOBAL _map_heigth
671   0000              	GLOBAL _map_width
672   0000              	GLOBAL _scr_curr
673   0000              	GLOBAL _scr_obj1
674   0000              	GLOBAL _scr_obj0
675   0000              	GLOBAL _scr_map
676   0000              	GLOBAL _sprite_speed_alt
677   0000              	GLOBAL _sprite_frames
678   0000              	GLOBAL _sprite_speed
679   0000              	GLOBAL _screen_ink
680   0000              	GLOBAL _screen_paper
681   0000              	GLOBAL _player_over_stair
682   0000              	GLOBAL _game_start_scr
683   0000              	GLOBAL _game_respawning
684   0000              	GLOBAL _game_respawn_tile
685   0000              	GLOBAL _game_respawn_index
686   0000              	GLOBAL _game_menu_sel
687   0000              	GLOBAL _game_score_top
688   0000              	GLOBAL _player_lives
689   0000              	GLOBAL _game_over
690   0000              	GLOBAL _game_sound
691   0000              	GLOBAL _game_inmune
692   0000              	GLOBAL _game_god_mode
693   0000              	GLOBAL _game_two_player
694   0000              	GLOBAL _game_brick_tile
695   0000              	GLOBAL _sprite_curr_index
696   0000              	GLOBAL _spr_count
697   0000              	GLOBAL _bullet_time
698   0000              	GLOBAL _anim_time
699   0000              	GLOBAL _frame_time
700   0000              	GLOBAL _entry_time
701   0000              	GLOBAL _curr_time
702   0000              	GLOBAL _s_state
703   0000              	GLOBAL _attrib_hl
704   0000              	GLOBAL _attrib
705   0000              	GLOBAL _zx_val_asm
706   0000              	GLOBAL _enemies
707   0000              	GLOBAL _tmp_ui
708   0000              	GLOBAL _tmp_sc
709   0000              	GLOBAL _tmp_uc
710   0000              	GLOBAL _tmp1
711   0000              	GLOBAL _tmp0
712   0000              	GLOBAL _tmp
713   0000              	GLOBAL _index1
714   0000              	GLOBAL _index0
715   0000              	GLOBAL _loop_count
716   0000              	GLOBAL _s_col1
717   0000              	GLOBAL _s_col0
718   0000              	GLOBAL _s_lin1
719   0000              	GLOBAL _s_lin0
720   0000              	GLOBAL _s_tile1
721   0000              	GLOBAL _s_tile0
722   0000              	GLOBAL _player_hit_count
723   0000              	GLOBAL _sprite_horizontal_check
724   0000              	GLOBAL _sprite_on_air
725   0000              	GLOBAL _sprite
726   0000              	GLOBAL _game_gravity
727   0000              	GLOBAL _player_hit_time
728   0000              	GLOBAL _player_int
729   0000              	GLOBAL _player_dex
730   0000              	GLOBAL _player_str
731   0000              	GLOBAL _player_vita
732   0000              	GLOBAL _player_mana
733   0000              	GLOBAL _player_keys
734   0000              	GLOBAL _player_vel_inc
735   0000              	GLOBAL _player_vel_y1
736   0000              	GLOBAL _player_vel_y0
737   0000              	GLOBAL _player_vel_y
738   0000              	GLOBAL _player_vel_x
739   0000              	GLOBAL _player_joy
740   0000              	GLOBAL _player_score
741   0000              	GLOBAL _last_time
742   0000              	GLOBAL _player_slide
743   0000              	GLOBAL _spr_timer
744   0000              	GLOBAL _jump_lin
745   0000              	GLOBAL _player_hit_col
746   0000              	GLOBAL _player_hit_lin
747   0000              	GLOBAL _colint
748   0000              	GLOBAL _col
749   0000              	GLOBAL _lin
750   0000              	GLOBAL _tile
751   0000              	GLOBAL _state_a
752   0000              	GLOBAL _state
753   0000              	GLOBAL _class
754   0000              	GLOBAL _tbuffer
755   0000              	GLOBAL _dirs
756   0000              	GLOBAL _k1
757   0000              	GLOBAL _joyfunc1
758   0000              	GLOBAL _btiles
759   0000              	GLOBAL _spec128
760   0000              	GLOBAL _GLOBAL_ZX_PORT_7FFD
761   0000              	GLOBAL _GLOBAL_ZX_PORT_1FFD
762   0000              	GLOBAL _GLOBAL_ZX_PORT_FE
763   0000              	GLOBAL _ay_effect_20
764   0000              	GLOBAL _ay_effect_19
765   0000              	GLOBAL _ay_effect_18
766   0000              	GLOBAL _ay_effect_17
767   0000              	GLOBAL _ay_effect_16
768   0000              	GLOBAL _ay_effect_15
769   0000              	GLOBAL _ay_effect_14
770   0000              	GLOBAL _ay_effect_13
771   0000              	GLOBAL _ay_effect_12
772   0000              	GLOBAL _ay_effect_11
773   0000              	GLOBAL _ay_effect_10
774   0000              	GLOBAL _ay_effect_09
775   0000              	GLOBAL _ay_effect_08
776   0000              	GLOBAL _ay_effect_07
777   0000              	GLOBAL _ay_effect_06
778   0000              	GLOBAL _ay_effect_05
779   0000              	GLOBAL _ay_effect_04
780   0000              	GLOBAL _ay_effect_03
781   0000              	GLOBAL _ay_effect_02
782   0000              	GLOBAL _ay_effect_01
783   0000              	GLOBAL _pb_midi_phase_1
784   0000              	GLOBAL _pb_midi_title
785   0000              	GLOBAL _control_method
786   0000              	GLOBAL _world0
787   0000              	GLOBAL _lenght0
788   0000              	GLOBAL _start_scr0
789   0000              ;--------------------------------------------------------
790   0000              ; special function registers
791   0000              ;--------------------------------------------------------
792   0000              defc _IO_FE	=	0x00fe
793   0000              defc _IO_1FFD	=	0x1ffd
794   0000              defc _IO_7FFD	=	0x7ffd
795   0000              ;--------------------------------------------------------
796   0000              ; ram data
797   0000              ;--------------------------------------------------------
798   0000              	SECTION bss_compiler
799   0000              ;--------------------------------------------------------
800   0000              ; ram data
801   0000              ;--------------------------------------------------------
802   0000              
803   0000              IF 0
804   0000              
805   0000              ; .area _INITIALIZED removed by z88dk
806   0000              
807   0000              
808   0000              ENDIF
809   0000              
810   0000              ;--------------------------------------------------------
811   0000              ; absolute external ram data
812   0000              ;--------------------------------------------------------
813   0000              	SECTION IGNORE
814   0000              ;--------------------------------------------------------
815   0000              ; global & static initialisations
816   0000              ;--------------------------------------------------------
817   0000              	SECTION code_crt_init
818   0000              ;--------------------------------------------------------
819   0000              ; Home
820   0000              ;--------------------------------------------------------
821   0000              	SECTION IGNORE
822   0000              ;--------------------------------------------------------
823   0000              ; code
824   0000              ;--------------------------------------------------------
825   0000              	SECTION code_compiler
826   0000              ;	---------------------------------
827   0000              ; Function player_init
828   0000              ; ---------------------------------
829   0000              _player_init:
830   0000  CD 00 00    	call	___sdcc_enter_ix
831   0003  F5          	push	af
832   0004  3E 00       	ld	a, +((_class) & 0xFF)
833   0006  DD 86 04    	add	a,(ix+4)
834   0009  4F          	ld	c, a
835   000A  3E 00       	ld	a, +((_class) / 256)
836   000C  CE 00       	adc	a,0x00
837   000E  47          	ld	b, a
838   000F  AF          	xor	a, a
839   0010  02          	ld	(bc), a
840   0011  3E 00       	ld	a, +((_tile) & 0xFF)
841   0013  DD 86 04    	add	a,(ix+4)
842   0016  4F          	ld	c, a
843   0017  3E 00       	ld	a, +((_tile) / 256)
844   0019  CE 00       	adc	a,0x00
845   001B  47          	ld	b, a
846   001C  DD 7E 07    	ld	a,(ix+7)
847   001F  02          	ld	(bc), a
848   0020  3E 00       	ld	a, +((_lin) & 0xFF)
849   0022  DD 86 04    	add	a,(ix+4)
850   0025  4F          	ld	c, a
851   0026  3E 00       	ld	a, +((_lin) / 256)
852   0028  CE 00       	adc	a,0x00
853   002A  47          	ld	b, a
854   002B  DD 7E 05    	ld	a,(ix+5)
855   002E  02          	ld	(bc), a
856   002F  3E 00       	ld	a, +((_col) & 0xFF)
857   0031  DD 86 04    	add	a,(ix+4)
858   0034  4F          	ld	c, a
859   0035  3E 00       	ld	a, +((_col) / 256)
860   0037  CE 00       	adc	a,0x00
861   0039  47          	ld	b, a
862   003A  DD 7E 06    	ld	a,(ix+6)
863   003D  02          	ld	(bc), a
864   003E  3E 00       	ld	a, +((_colint) & 0xFF)
865   0040  DD 86 04    	add	a,(ix+4)
866   0043  4F          	ld	c, a
867   0044  3E 00       	ld	a, +((_colint) / 256)
868   0046  CE 00       	adc	a,0x00
869   0048  47          	ld	b, a
870   0049  AF          	xor	a, a
871   004A  02          	ld	(bc), a
872   004B  3E 00       	ld	a, +((_state) & 0xFF)
873   004D  DD 86 04    	add	a,(ix+4)
874   0050  4F          	ld	c, a
875   0051  3E 00       	ld	a, +((_state) / 256)
876   0053  CE 00       	adc	a,0x00
877   0055  47          	ld	b, a
878   0056  AF          	xor	a, a
879   0057  02          	ld	(bc), a
880   0058  3E 00       	ld	a, +((_state_a) & 0xFF)
881   005A  DD 86 04    	add	a,(ix+4)
882   005D  4F          	ld	c, a
883   005E  3E 00       	ld	a, +((_state_a) / 256)
884   0060  CE 00       	adc	a,0x00
885   0062  47          	ld	b, a
886   0063  AF          	xor	a, a
887   0064  02          	ld	(bc), a
888   0065  3E 00       	ld	a, +((_jump_lin) & 0xFF)
889   0067  DD 86 04    	add	a,(ix+4)
890   006A  5F          	ld	e, a
891   006B  3E 00       	ld	a, +((_jump_lin) / 256)
892   006D  CE 00       	adc	a,0x00
893   006F  57          	ld	d, a
894   0070  DD 7E 05    	ld	a,(ix+5)
895   0073  12          	ld	(de), a
896   0074  DD 6E 04    	ld	l,(ix+4)
897   0077  26 00       	ld	h,0x00
898   0079  29          	add	hl,hl
899   007A  11 00 00    	ld	de,_last_time
900   007D  19          	add	hl, de
901   007E  E3          	ex	(sp), hl
902   007F  E1          	pop	hl
903   0080  ED 5B 00 00 	ld	de,(_curr_time)
904   0084  E5          	push	hl
905   0085  73          	ld	(hl), e
906   0086  23          	inc	hl
907   0087  72          	ld	(hl), d
908   0088  3E 00       	ld	a, +((_sprite_speed_alt) & 0xFF)
909   008A  DD 86 04    	add	a,(ix+4)
910   008D  5F          	ld	e, a
911   008E  3E 00       	ld	a, +((_sprite_speed_alt) / 256)
912   0090  CE 00       	adc	a,0x00
913   0092  57          	ld	d, a
914   0093  AF          	xor	a, a
915   0094  12          	ld	(de), a
916   0095  0A          	ld	a, (bc)
917   0096  F6 11       	or	a,+(0x01|0x10)
918   0098  02          	ld	(bc),a
919   0099  21 00 00    	ld	hl,_player_hit_col
920   009C  36 00       	ld	(hl),0x00
921   009E  21 00 00    	ld	hl,_player_hit_lin
922   00A1  36 00       	ld	(hl),0x00
923   00A3  21 00 00    	ld	hl,_player_slide
924   00A6  36 00       	ld	(hl),0x00
925   00A8  DD 66 06    	ld	h,(ix+6)
926   00AB  DD 6E 05    	ld	l,(ix+5)
927   00AE  E5          	push	hl
928   00AF  DD 66 07    	ld	h,(ix+7)
929   00B2  DD 6E 04    	ld	l,(ix+4)
930   00B5  E5          	push	hl
931   00B6  CD 00 00    	call	_NIRVANAP_spriteT_callee
932   00B9  F1          	pop	af
933   00BA  DD E1       	pop	ix
934   00BC  C9          	ret
935   00BD              	SECTION code_compiler
936   00BD              ;	---------------------------------
937   00BD              ; Function player_check_input
938   00BD              ; ---------------------------------
939   00BD              _player_check_input:
940   00BD  21 00 00    	ld	hl,_dirs
941   00C0  CB 56       	bit	2, (hl)
942   00C2  28 0C       	jr	Z,l_player_check_input_00102
943   00C4  21 00 00    	ld	hl,_dirs
944   00C7  CB 5E       	bit	3, (hl)
945   00C9  28 05       	jr	Z,l_player_check_input_00102
946   00CB  21 00 00    	ld	hl,_dirs
947   00CE  36 00       	ld	(hl),0x00
948   00D0              l_player_check_input_00102:
949   00D0  21 00 00    	ld	hl,_dirs
950   00D3  7E          	ld	a, (hl)
951   00D4  CB 07       	rlc	a
952   00D6  E6 01       	and	a,0x01
953   00D8  CB 47       	bit	0, a
954   00DA  20 1D       	jr	NZ,l_player_check_input_00107
955   00DC  CB 56       	bit	2, (hl)
956   00DE  20 19       	jr	NZ,l_player_check_input_00107
957   00E0  21 00 00    	ld	hl,_dirs
958   00E3  CB 5E       	bit	3, (hl)
959   00E5  20 12       	jr	NZ,l_player_check_input_00107
960   00E7  21 00 00    	ld	hl,_dirs
961   00EA  CB 46       	bit	0, (hl)
962   00EC  20 0B       	jr	NZ,l_player_check_input_00107
963   00EE  21 00 00    	ld	hl,_dirs
964   00F1  CB 4E       	bit	1, (hl)
965   00F3  20 04       	jr	NZ,l_player_check_input_00107
966   00F5  2E 00       	ld	l,0x00
967   00F7  18 02       	jr	l_player_check_input_00108
968   00F9              l_player_check_input_00107:
969   00F9  2E 01       	ld	l,0x01
970   00FB              l_player_check_input_00108:
971   00FB  C9          	ret
972   00FC              	SECTION code_compiler
973   00FC              ;	---------------------------------
974   00FC              ; Function player_collision
975   00FC              ; ---------------------------------
976   00FC              _player_collision:
977   00FC  21 19 00    	ld	hl,0x0019
978   00FF  E5          	push	hl
979   0100  2A 00 00    	ld	hl,(_player_hit_time)
980   0103  E5          	push	hl
981   0104  CD 00 00    	call	_game_check_time
982   0107  F1          	pop	af
983   0108  F1          	pop	af
984   0109  7D          	ld	a, l
985   010A  B7          	or	a, a
986   010B  CA E5 01    	jp	Z, l_player_collision_00117
987   010E  21 00 00    	ld	hl,_sprite
988   0111  36 00       	ld	(hl),0x00
989   0113  3A 07 00    	ld	a,(_col + 7)
990   0116  32 00 00    	ld	(_s_col1),a
991   0119  3A 07 00    	ld	a,(_lin + 7)
992   011C  32 00 00    	ld	(_s_lin1),a
993   011F              l_player_collision_00113:
994   011F  21 00 00    	ld	hl,_sprite
995   0122  7E          	ld	a, (hl)
996   0123  D6 07       	sub	a,0x07
997   0125  D2 E5 01    	jp	NC, l_player_collision_00117
998   0128  3E 00       	ld	a, +((_class) & 0xFF)
999   012A  86          	add	a, (hl)
1000  012B  4F          	ld	c, a
1001  012C  3E 00       	ld	a, +((_class) / 256)
1002  012E  CE 00       	adc	a,0x00
1003  0130  47          	ld	b, a
1004  0131  0A          	ld	a, (bc)
1005  0132  B7          	or	a, a
1006  0133  CA DE 01    	jp	Z, l_player_collision_00112
1007  0136  4E          	ld	c,(hl)
1008  0137  06 00       	ld	b,0x00
1009  0139  21 00 00    	ld	hl,_col
1010  013C  09          	add	hl,bc
1011  013D  4E          	ld	c, (hl)
1012  013E  06 00       	ld	b,0x00
1013  0140  3A 00 00    	ld	a,(_s_col1)
1014  0143  5F          	ld	e,a
1015  0144  16 00       	ld	d,0x00
1016  0146  79          	ld	a, c
1017  0147  93          	sub	a, e
1018  0148  6F          	ld	l, a
1019  0149  78          	ld	a, b
1020  014A  9A          	sbc	a, d
1021  014B  67          	ld	h, a
1022  014C  CD 00 00    	call	_abs_fastcall
1023  014F  7D          	ld	a,l
1024  0150  D6 02       	sub	a,0x02
1025  0152  7C          	ld	a,h
1026  0153  17          	rla
1027  0154  3F          	ccf
1028  0155  1F          	rra
1029  0156  DE 80       	sbc	a,0x80
1030  0158  D2 DE 01    	jp	NC, l_player_collision_00112
1031  015B  2A 00 00    	ld	hl,(_sprite)
1032  015E  26 00       	ld	h,0x00
1033  0160  01 00 00    	ld	bc,_lin
1034  0163  09          	add	hl,bc
1035  0164  4E          	ld	c,(hl)
1036  0165  06 00       	ld	b,0x00
1037  0167  3A 00 00    	ld	a,(_s_lin1)
1038  016A  5F          	ld	e,a
1039  016B  16 00       	ld	d,0x00
1040  016D  79          	ld	a, c
1041  016E  93          	sub	a, e
1042  016F  6F          	ld	l, a
1043  0170  78          	ld	a, b
1044  0171  9A          	sbc	a, d
1045  0172  67          	ld	h, a
1046  0173  CD 00 00    	call	_abs_fastcall
1047  0176  7D          	ld	a,l
1048  0177  D6 0E       	sub	a,0x0e
1049  0179  7C          	ld	a,h
1050  017A  17          	rla
1051  017B  3F          	ccf
1052  017C  1F          	rra
1053  017D  DE 80       	sbc	a,0x80
1054  017F  30 5D       	jr	NC,l_player_collision_00112
1055  0181  2A 00 00    	ld	hl,(_sprite)
1056  0184  26 00       	ld	h,0x00
1057  0186  01 00 00    	ld	bc,_class
1058  0189  09          	add	hl,bc
1059  018A  7E          	ld	a,(hl)
1060  018B  FE 06       	cp	a,0x06
1061  018D  20 14       	jr	NZ,l_player_collision_00102
1062  018F  21 00 00    	ld	hl,_player_vita
1063  0192  7E          	ld	a, (hl)
1064  0193  C6 14       	add	a,0x14
1065  0195  77          	ld	(hl), a
1066  0196  CD 00 00    	call	_game_update_stats
1067  0199  2A 00 00    	ld	hl,(_sprite)
1068  019C  CD 00 00    	call	_spr_destroy
1069  019F  2E 00       	ld	l,0x00
1070  01A1  18 44       	jr	l_player_collision_00118
1071  01A3              l_player_collision_00102:
1072  01A3  FE 07       	cp	a,0x07
1073  01A5  20 14       	jr	NZ,l_player_collision_00104
1074  01A7  21 00 00    	ld	hl,_player_mana
1075  01AA  7E          	ld	a, (hl)
1076  01AB  C6 14       	add	a,0x14
1077  01AD  77          	ld	(hl), a
1078  01AE  CD 00 00    	call	_game_update_stats
1079  01B1  2A 00 00    	ld	hl,(_sprite)
1080  01B4  CD 00 00    	call	_spr_destroy
1081  01B7  2E 00       	ld	l,0x00
1082  01B9  18 2C       	jr	l_player_collision_00118
1083  01BB              l_player_collision_00104:
1084  01BB  D6 08       	sub	a,0x08
1085  01BD  20 11       	jr	NZ,l_player_collision_00106
1086  01BF  21 00 00    	ld	hl,_player_lives
1087  01C2  34          	inc	(hl)
1088  01C3  CD 00 00    	call	_game_update_stats
1089  01C6  2A 00 00    	ld	hl,(_sprite)
1090  01C9  CD 00 00    	call	_spr_destroy
1091  01CC  2E 00       	ld	l,0x00
1092  01CE  18 17       	jr	l_player_collision_00118
1093  01D0              l_player_collision_00106:
1094  01D0  2E 02       	ld	l,0x02
1095  01D2  CD 00 00    	call	_zx_border_fastcall
1096  01D5  2E 14       	ld	l,0x14
1097  01D7  CD 54 0F    	call	_player_hit
1098  01DA  2E 01       	ld	l,0x01
1099  01DC  18 09       	jr	l_player_collision_00118
1100  01DE              l_player_collision_00112:
1101  01DE  21 00 00    	ld	hl,_sprite
1102  01E1  34          	inc	(hl)
1103  01E2  C3 1F 01    	jp	l_player_collision_00113
1104  01E5              l_player_collision_00117:
1105  01E5  2E 00       	ld	l,0x00
1106  01E7              l_player_collision_00118:
1107  01E7  C9          	ret
1108  01E8              	SECTION code_compiler
1109  01E8              ;	---------------------------------
1110  01E8              ; Function player_kill
1111  01E8              ; ---------------------------------
1112  01E8              _player_kill:
1113  01E8  01 00 00    	ld	bc,_state+0
1114  01EB  2A 00 00    	ld	hl,(_sprite)
1115  01EE  26 00       	ld	h,0x00
1116  01F0  09          	add	hl,bc
1117  01F1  CB 6E       	bit	5,(hl)
1118  01F3  C2 BA 02    	jp	NZ,l_player_kill_00109
1119  01F6  C5          	push	bc
1120  01F7  CD 00 00    	call	_sound_hit_brick
1121  01FA  C1          	pop	bc
1122  01FB  79          	ld	a, c
1123  01FC  21 00 00    	ld	hl,_sprite
1124  01FF  86          	add	a, (hl)
1125  0200  5F          	ld	e, a
1126  0201  78          	ld	a, b
1127  0202  CE 00       	adc	a,0x00
1128  0204  57          	ld	d, a
1129  0205  1A          	ld	a, (de)
1130  0206  F6 20       	or	a,0x20
1131  0208  12          	ld	(de), a
1132  0209  3E 00       	ld	a, +((_sprite_speed_alt) & 0xFF)
1133  020B  86          	add	a, (hl)
1134  020C  5F          	ld	e, a
1135  020D  3E 00       	ld	a, +((_sprite_speed_alt) / 256)
1136  020F  CE 00       	adc	a,0x00
1137  0211  57          	ld	d, a
1138  0212  3E 03       	ld	a,0x03
1139  0214  12          	ld	(de), a
1140  0215  79          	ld	a, c
1141  0216  86          	add	a, (hl)
1142  0217  4F          	ld	c, a
1143  0218  78          	ld	a, b
1144  0219  CE 00       	adc	a,0x00
1145  021B  47          	ld	b, a
1146  021C  0A          	ld	a, (bc)
1147  021D  CB 57       	bit	2, a
1148  021F  28 0D       	jr	Z,l_player_kill_00102
1149  0221  2A 00 00    	ld	hl,(_sprite)
1150  0224  26 00       	ld	h,0x00
1151  0226  01 00 00    	ld	bc,_tile
1152  0229  09          	add	hl,bc
1153  022A  36 40       	ld	(hl),0x40
1154  022C  18 0B       	jr	l_player_kill_00103
1155  022E              l_player_kill_00102:
1156  022E  2A 00 00    	ld	hl,(_sprite)
1157  0231  26 00       	ld	h,0x00
1158  0233  01 00 00    	ld	bc,_tile
1159  0236  09          	add	hl,bc
1160  0237  36 48       	ld	(hl),0x48
1161  0239              l_player_kill_00103:
1162  0239  CD C1 0A    	call	_player_hit_platform_clear
1163  023C  2A 00 00    	ld	hl,(_sprite)
1164  023F  26 00       	ld	h,0x00
1165  0241  01 00 00    	ld	bc,_col
1166  0244  09          	add	hl,bc
1167  0245  4E          	ld	c, (hl)
1168  0246  2A 00 00    	ld	hl,(_sprite)
1169  0249  26 00       	ld	h,0x00
1170  024B  11 00 00    	ld	de,_lin
1171  024E  19          	add	hl,de
1172  024F  46          	ld	b, (hl)
1173  0250  2A 00 00    	ld	hl,(_sprite)
1174  0253  26 00       	ld	h,0x00
1175  0255  11 00 00    	ld	de,_tile
1176  0258  19          	add	hl,de
1177  0259  56          	ld	d, (hl)
1178  025A  79          	ld	a,c
1179  025B  21 00 00    	ld	hl,_sprite
1180  025E  F5          	push	af
1181  025F  33          	inc	sp
1182  0260  4A          	ld	c, d
1183  0261  7E          	ld	a,(hl)
1184  0262  C5          	push	bc
1185  0263  F5          	push	af
1186  0264  33          	inc	sp
1187  0265  CD 00 00    	call	_NIRVANAP_spriteT_callee
1188  0268  01 00 00    	ld	bc,_spr_timer+0
1189  026B  2A 00 00    	ld	hl,(_sprite)
1190  026E  26 00       	ld	h,0x00
1191  0270  29          	add	hl, hl
1192  0271  09          	add	hl,bc
1193  0272  ED 5B 00 00 	ld	de,(_curr_time)
1194  0276  73          	ld	(hl),e
1195  0277  23          	inc	hl
1196  0278  72          	ld	(hl),d
1197  0279  3A 00 00    	ld	a,(_sprite)
1198  027C  D6 07       	sub	a,0x07
1199  027E  20 1E       	jr	NZ,l_player_kill_00105
1200  0280  01 00 00    	ld	bc,_state_a+0
1201  0283  79          	ld	a, c
1202  0284  21 00 00    	ld	hl,_sprite
1203  0287  86          	add	a, (hl)
1204  0288  5F          	ld	e, a
1205  0289  78          	ld	a, b
1206  028A  CE 00       	adc	a,0x00
1207  028C  57          	ld	d, a
1208  028D  1A          	ld	a, (de)
1209  028E  F6 08       	or	a,0x08
1210  0290  12          	ld	(de), a
1211  0291  79          	ld	a, c
1212  0292  86          	add	a, (hl)
1213  0293  4F          	ld	c, a
1214  0294  78          	ld	a, b
1215  0295  CE 00       	adc	a,0x00
1216  0297  47          	ld	b, a
1217  0298  0A          	ld	a, (bc)
1218  0299  E6 EF       	and	a,0xef
1219  029B  02          	ld	(bc), a
1220  029C  18 1C       	jr	l_player_kill_00109
1221  029E              l_player_kill_00105:
1222  029E  01 00 00    	ld	bc,_state_a+0
1223  02A1  79          	ld	a, c
1224  02A2  21 00 00    	ld	hl,_sprite
1225  02A5  86          	add	a, (hl)
1226  02A6  5F          	ld	e, a
1227  02A7  78          	ld	a, b
1228  02A8  CE 00       	adc	a,0x00
1229  02AA  57          	ld	d, a
1230  02AB  1A          	ld	a, (de)
1231  02AC  F6 10       	or	a,0x10
1232  02AE  12          	ld	(de), a
1233  02AF  79          	ld	a, c
1234  02B0  86          	add	a, (hl)
1235  02B1  4F          	ld	c, a
1236  02B2  78          	ld	a, b
1237  02B3  CE 00       	adc	a,0x00
1238  02B5  47          	ld	b, a
1239  02B6  0A          	ld	a, (bc)
1240  02B7  E6 F7       	and	a,0xf7
1241  02B9  02          	ld	(bc), a
1242  02BA              l_player_kill_00109:
1243  02BA  C9          	ret
1244  02BB              	SECTION code_compiler
1245  02BB              ;	---------------------------------
1246  02BB              ; Function player_restart
1247  02BB              ; ---------------------------------
1248  02BB              _player_restart:
1249  02BB  CD 00 00    	call	___sdcc_enter_ix
1250  02BE  F5          	push	af
1251  02BF  4D          	ld	c, l
1252  02C0  21 00 00    	ld	hl,_ay_effect_15
1253  02C3  CD 00 00    	call	_ay_fx_play
1254  02C6  C5          	push	bc
1255  02C7  21 0E 64    	ld	hl,0x640e
1256  02CA  E5          	push	hl
1257  02CB  21 07 00    	ld	hl,0x0007
1258  02CE  E5          	push	hl
1259  02CF  CD 00 00    	call	_player_init
1260  02D2  F1          	pop	af
1261  02D3  F1          	pop	af
1262  02D4  C1          	pop	bc
1263  02D5  11 00 00    	ld	de,_state+0
1264  02D8  69          	ld	l,c
1265  02D9  26 00       	ld	h,0x00
1266  02DB  19          	add	hl, de
1267  02DC  CB E6       	set	4, (hl)
1268  02DE  11 00 00    	ld	de,_state_a+0
1269  02E1  69          	ld	l,c
1270  02E2  26 00       	ld	h,0x00
1271  02E4  19          	add	hl, de
1272  02E5  CB C6       	set	0, (hl)
1273  02E7  11 00 00    	ld	de,_spr_timer+0
1274  02EA  69          	ld	l, c
1275  02EB  26 00       	ld	h,0x00
1276  02ED  29          	add	hl, hl
1277  02EE  19          	add	hl,de
1278  02EF  E3          	ex	(sp), hl
1279  02F0  E1          	pop	hl
1280  02F1  ED 5B 00 00 	ld	de,(_curr_time)
1281  02F5  E5          	push	hl
1282  02F6  73          	ld	(hl), e
1283  02F7  23          	inc	hl
1284  02F8  72          	ld	(hl), d
1285  02F9  11 00 00    	ld	de,_sprite_speed_alt+0
1286  02FC  69          	ld	l,c
1287  02FD  26 00       	ld	h,0x00
1288  02FF  19          	add	hl, de
1289  0300  F1          	pop	af
1290  0301  36 08       	ld	(hl),0x08
1291  0303  DD E1       	pop	ix
1292  0305  C9          	ret
1293  0306              	SECTION code_compiler
1294  0306              ;	---------------------------------
1295  0306              ; Function player_turn
1296  0306              ; ---------------------------------
1297  0306              _player_turn:
1298  0306  2A 00 00    	ld	hl,(_sprite)
1299  0309  26 00       	ld	h,0x00
1300  030B  01 00 00    	ld	bc,_class
1301  030E  09          	add	hl,bc
1302  030F  7E          	ld	a,(hl)
1303  0310  B7          	or	a, a
1304  0311  C0          	ret	NZ
1305  0312  3A 00 00    	ld	a,(_player_lives)
1306  0315  B7          	or	a, a
1307  0316  C8          	ret	Z
1308  0317  21 00 00    	ld	hl,_sprite
1309  031A  CD 00 00    	call	_spr_chktime
1310  031D  7D          	ld	a, l
1311  031E  B7          	or	a, a
1312  031F  C8          	ret	Z
1313  0320  21 00 00    	ld	hl,_k1
1314  0323  E5          	push	hl
1315  0324  2A 00 00    	ld	hl,(_joyfunc1)
1316  0327  CD 00 00    	call	___sdcc_call_hl
1317  032A  F1          	pop	af
1318  032B  7D          	ld	a,l
1319  032C  32 00 00    	ld	(_dirs),a
1320  032F  CD 35 03    	call	_player_move
1321  0332  C3 FC 00    	jp  _player_collision
1322  0335              	SECTION code_compiler
1323  0335              ;	---------------------------------
1324  0335              ; Function player_move
1325  0335              ; ---------------------------------
1326  0335              _player_move:
1327  0335  2A 00 00    	ld	hl,(_sprite)
1328  0338  26 00       	ld	h,0x00
1329  033A  01 00 00    	ld	bc,_lin
1330  033D  09          	add	hl,bc
1331  033E  7E          	ld	a,(hl)
1332  033F  32 00 00    	ld	(_s_lin0),a
1333  0342  2A 00 00    	ld	hl,(_sprite)
1334  0345  26 00       	ld	h,0x00
1335  0347  01 00 00    	ld	bc,_col
1336  034A  09          	add	hl,bc
1337  034B  7E          	ld	a,(hl)
1338  034C  32 00 00    	ld	(_s_col0),a
1339  034F  2A 00 00    	ld	hl,(_sprite)
1340  0352  26 00       	ld	h,0x00
1341  0354  01 00 00    	ld	bc,_tile
1342  0357  09          	add	hl,bc
1343  0358  4E          	ld	c, (hl)
1344  0359  3A 00 00    	ld	a,(_sprite)
1345  035C  5F          	ld	e,a
1346  035D  16 00       	ld	d,0x00
1347  035F  21 00 00    	ld	hl,_colint
1348  0362  19          	add	hl,de
1349  0363  7E          	ld	a,(hl)
1350  0364  81          	add	a,c
1351  0365  32 00 00    	ld	(_s_tile0),a
1352  0368  2A 00 00    	ld	hl,(_sprite)
1353  036B  26 00       	ld	h,0x00
1354  036D  01 00 00    	ld	bc,_state
1355  0370  09          	add	hl,bc
1356  0371  7E          	ld	a,(hl)
1357  0372  CB 47       	bit	0,a
1358  0374  32 00 00    	ld	(_s_state),a
1359  0377  20 07       	jr	NZ,l_player_move_00113
1360  0379  21 00 00    	ld	hl,_s_state
1361  037C  CB 4E       	bit	1, (hl)
1362  037E  28 46       	jr	Z,l_player_move_00114
1363  0380              l_player_move_00113:
1364  0380  CD C4 06    	call	_player_fire
1365  0383  3A 00 00    	ld	a,(_player_vel_y)
1366  0386  21 00 00    	ld	hl,_player_vel_y1
1367  0389  96          	sub	a, (hl)
1368  038A  E2 8F 03    	jp	PO, l_player_move_00162
1369  038D  EE 80       	xor	a,0x80
1370  038F              l_player_move_00162:
1371  038F  F2 B2 03    	jp	P, l_player_move_00106
1372  0392  21 00 00    	ld	hl,_dirs
1373  0395  CB 56       	bit	2, (hl)
1374  0397  28 09       	jr	Z,l_player_move_00102
1375  0399  21 00 00    	ld	hl,_s_state
1376  039C  7E          	ld	a,(hl)
1377  039D  F6 08       	or	a,0x08
1378  039F  E6 FB       	and	a,0xfb
1379  03A1  77          	ld	(hl),a
1380  03A2              l_player_move_00102:
1381  03A2  21 00 00    	ld	hl,_dirs
1382  03A5  CB 4E       	bit	1, (hl)
1383  03A7  28 09       	jr	Z,l_player_move_00106
1384  03A9  21 00 00    	ld	hl,_s_state
1385  03AC  7E          	ld	a,(hl)
1386  03AD  F6 04       	or	a,0x04
1387  03AF  E6 F7       	and	a,0xf7
1388  03B1  77          	ld	(hl),a
1389  03B2              l_player_move_00106:
1390  03B2  CD 96 0B    	call	_player_move_jump
1391  03B5  7D          	ld	a, l
1392  03B6  B7          	or	a, a
1393  03B7  28 2E       	jr	Z,l_player_move_00115
1394  03B9  3A 00 00    	ld	a,(_player_over_stair)
1395  03BC  B7          	or	a, a
1396  03BD  20 28       	jr	NZ,l_player_move_00115
1397  03BF  2E 54       	ld	l,0x54
1398  03C1  CD F8 04    	call	_player_tile
1399  03C4  18 21       	jr	l_player_move_00115
1400  03C6              l_player_move_00114:
1401  03C6  CD 4E 05    	call	_player_move_input
1402  03C9  7D          	ld	a, l
1403  03CA  B7          	or	a, a
1404  03CB  20 17       	jr	NZ,l_player_move_00112
1405  03CD  2A 00 00    	ld	hl,(_sprite)
1406  03D0  26 00       	ld	h,0x00
1407  03D2  01 00 00    	ld	bc,_colint
1408  03D5  09          	add	hl,bc
1409  03D6  AF          	xor	a,a
1410  03D7  77          	ld	(hl),a
1411  03D8  2E 64       	ld	l,0x64
1412  03DA  CD F8 04    	call	_player_tile
1413  03DD  21 00 00    	ld	hl,_s_state
1414  03E0  7E          	ld	a,(hl)
1415  03E1  E6 F3       	and	a,+(0xf7&0xfb)
1416  03E3  77          	ld	(hl),a
1417  03E4              l_player_move_00112:
1418  03E4  CD 1A 0B    	call	_player_check_floor
1419  03E7              l_player_move_00115:
1420  03E7  CD 00 00    	call	_spr_redraw
1421  03EA  7D          	ld	a, l
1422  03EB  B7          	or	a, a
1423  03EC  28 03       	jr	Z,l_player_move_00118
1424  03EE  CD 01 07    	call	_player_check_map
1425  03F1              l_player_move_00118:
1426  03F1  3A 00 00    	ld	a,(_player_hit_lin)
1427  03F4  B7          	or	a, a
1428  03F5  28 03       	jr	Z,l_player_move_00120
1429  03F7  CD C1 0A    	call	_player_hit_platform_clear
1430  03FA              l_player_move_00120:
1431  03FA  2A 00 00    	ld	hl,(_sprite)
1432  03FD  26 00       	ld	h,0x00
1433  03FF  01 00 00    	ld	bc,_state
1434  0402  09          	add	hl,bc
1435  0403  3A 00 00    	ld	a,(_s_state)
1436  0406  77          	ld	(hl),a
1437  0407  2E 00       	ld	l,0x00
1438  0409  C9          	ret
1439  040A              	SECTION code_compiler
1440  040A              ;	---------------------------------
1441  040A              ; Function player_check_stairs_down
1442  040A              ; ---------------------------------
1443  040A              _player_check_stairs_down:
1444  040A  CD 00 00    	call	___sdcc_enter_ix
1445  040D  3B          	dec	sp
1446  040E  2A 00 00    	ld	hl,(_sprite)
1447  0411  26 00       	ld	h,0x00
1448  0413  5D          	ld	e,l
1449  0414  01 00 00    	ld	bc,_col
1450  0417  09          	add	hl,bc
1451  0418  46          	ld	b,(hl)
1452  0419  16 00       	ld	d,0x00
1453  041B  21 00 00    	ld	hl,_lin
1454  041E  19          	add	hl,de
1455  041F  7E          	ld	a,(hl)
1456  0420  C6 10       	add	a,0x10
1457  0422  4F          	ld	c,a
1458  0423  C5          	push	bc
1459  0424  CD 00 00    	call	_spr_calc_index
1460  0427  F1          	pop	af
1461  0428  7D          	ld	a,l
1462  0429  32 00 00    	ld	(_sprite_curr_index),a
1463  042C  4F          	ld	c,a
1464  042D  06 00       	ld	b,0x00
1465  042F  21 00 00    	ld	hl,_scr_map
1466  0432  09          	add	hl,bc
1467  0433  7E          	ld	a,(hl)
1468  0434  4F          	ld	c,a
1469  0435  D6 38       	sub	a,0x38
1470  0437  38 05       	jr	C,l_player_check_stairs_down_00105
1471  0439  3E 3C       	ld	a,0x3c
1472  043B  91          	sub	a, c
1473  043C  30 04       	jr	NC,l_player_check_stairs_down_00106
1474  043E              l_player_check_stairs_down_00105:
1475  043E  3E 00       	ld	a,0x00
1476  0440  18 02       	jr	l_player_check_stairs_down_00107
1477  0442              l_player_check_stairs_down_00106:
1478  0442  3E 01       	ld	a,0x01
1479  0444              l_player_check_stairs_down_00107:
1480  0444  B7          	or	a, a
1481  0445  28 05       	jr	Z,l_player_check_stairs_down_00103
1482  0447  21 00 00    	ld	hl,_player_over_stair
1483  044A  36 01       	ld	(hl),0x01
1484  044C              l_player_check_stairs_down_00103:
1485  044C  33          	inc	sp
1486  044D  DD E1       	pop	ix
1487  044F  C9          	ret
1488  0450              	SECTION code_compiler
1489  0450              ;	---------------------------------
1490  0450              ; Function player_check_stairs
1491  0450              ; ---------------------------------
1492  0450              _player_check_stairs:
1493  0450  CD 00 00    	call	___sdcc_enter_ix
1494  0453  3B          	dec	sp
1495  0454  5D          	ld	e, l
1496  0455  2A 00 00    	ld	hl,(_sprite)
1497  0458  26 00       	ld	h,0x00
1498  045A  01 00 00    	ld	bc,_col
1499  045D  09          	add	hl,bc
1500  045E  7E          	ld	a,(hl)
1501  045F  83          	add	a,e
1502  0460  57          	ld	d,a
1503  0461  2A 00 00    	ld	hl,(_sprite)
1504  0464  26 00       	ld	h,0x00
1505  0466  01 00 00    	ld	bc,_lin
1506  0469  09          	add	hl,bc
1507  046A  46          	ld	b, (hl)
1508  046B  D5          	push	de
1509  046C  58          	ld	e,b
1510  046D  D5          	push	de
1511  046E  CD 00 00    	call	_spr_calc_index
1512  0471  F1          	pop	af
1513  0472  D1          	pop	de
1514  0473  7D          	ld	a,l
1515  0474  32 00 00    	ld	(_sprite_curr_index),a
1516  0477  4F          	ld	c,a
1517  0478  06 00       	ld	b,0x00
1518  047A  21 00 00    	ld	hl,_scr_map
1519  047D  09          	add	hl,bc
1520  047E  7E          	ld	a,(hl)
1521  047F  4F          	ld	c,a
1522  0480  D6 38       	sub	a,0x38
1523  0482  38 05       	jr	C,l_player_check_stairs_00111
1524  0484  3E 3C       	ld	a,0x3c
1525  0486  91          	sub	a, c
1526  0487  30 04       	jr	NC,l_player_check_stairs_00112
1527  0489              l_player_check_stairs_00111:
1528  0489  0E 00       	ld	c,0x00
1529  048B  18 02       	jr	l_player_check_stairs_00113
1530  048D              l_player_check_stairs_00112:
1531  048D  0E 01       	ld	c,0x01
1532  048F              l_player_check_stairs_00113:
1533  048F  3E 00       	ld	a, +((_col) & 0xFF)
1534  0491  21 00 00    	ld	hl,_sprite
1535  0494  86          	add	a, (hl)
1536  0495  6F          	ld	l, a
1537  0496  3E 00       	ld	a, +((_col) / 256)
1538  0498  CE 00       	adc	a,0x00
1539  049A  67          	ld	h, a
1540  049B  7E          	ld	a, (hl)
1541  049C  83          	add	a, e
1542  049D  47          	ld	b, a
1543  049E  2A 00 00    	ld	hl,(_sprite)
1544  04A1  26 00       	ld	h,0x00
1545  04A3  11 00 00    	ld	de,_lin
1546  04A6  19          	add	hl,de
1547  04A7  7E          	ld	a,(hl)
1548  04A8  C6 0F       	add	a,0x0f
1549  04AA  57          	ld	d, a
1550  04AB  C5          	push	bc
1551  04AC  4A          	ld	c, d
1552  04AD  C5          	push	bc
1553  04AE  CD 00 00    	call	_spr_calc_index
1554  04B1  F1          	pop	af
1555  04B2  C1          	pop	bc
1556  04B3  7D          	ld	a,l
1557  04B4  32 00 00    	ld	(_sprite_curr_index),a
1558  04B7  5F          	ld	e,a
1559  04B8  16 00       	ld	d,0x00
1560  04BA  21 00 00    	ld	hl,_scr_map
1561  04BD  19          	add	hl,de
1562  04BE  7E          	ld	a,(hl)
1563  04BF  47          	ld	b,a
1564  04C0  D6 38       	sub	a,0x38
1565  04C2  38 05       	jr	C,l_player_check_stairs_00114
1566  04C4  3E 3C       	ld	a,0x3c
1567  04C6  90          	sub	a, b
1568  04C7  30 04       	jr	NC,l_player_check_stairs_00115
1569  04C9              l_player_check_stairs_00114:
1570  04C9  06 00       	ld	b,0x00
1571  04CB  18 02       	jr	l_player_check_stairs_00116
1572  04CD              l_player_check_stairs_00115:
1573  04CD  06 01       	ld	b,0x01
1574  04CF              l_player_check_stairs_00116:
1575  04CF  79          	ld	a, c
1576  04D0  B7          	or	a,a
1577  04D1  20 03       	jr	NZ,l_player_check_stairs_00105
1578  04D3  B0          	or	a,b
1579  04D4  28 10       	jr	Z,l_player_check_stairs_00106
1580  04D6              l_player_check_stairs_00105:
1581  04D6  21 00 00    	ld	hl,_player_over_stair
1582  04D9  7E          	ld	a, (hl)
1583  04DA  B7          	or	a, a
1584  04DB  20 17       	jr	NZ,l_player_check_stairs_00109
1585  04DD  36 01       	ld	(hl),0x01
1586  04DF  2E 66       	ld	l,0x66
1587  04E1  CD F8 04    	call	_player_tile
1588  04E4  18 0E       	jr	l_player_check_stairs_00109
1589  04E6              l_player_check_stairs_00106:
1590  04E6  21 00 00    	ld	hl,_player_over_stair
1591  04E9  7E          	ld	a, (hl)
1592  04EA  B7          	or	a, a
1593  04EB  28 07       	jr	Z,l_player_check_stairs_00109
1594  04ED  36 00       	ld	(hl),0x00
1595  04EF  2E 54       	ld	l,0x54
1596  04F1  CD F8 04    	call	_player_tile
1597  04F4              l_player_check_stairs_00109:
1598  04F4  33          	inc	sp
1599  04F5  DD E1       	pop	ix
1600  04F7  C9          	ret
1601  04F8              	SECTION code_compiler
1602  04F8              ;	---------------------------------
1603  04F8              ; Function player_tile
1604  04F8              ; ---------------------------------
1605  04F8              _player_tile:
1606  04F8  45          	ld	b, l
1607  04F9  3A 00 00    	ld	a,(_player_over_stair)
1608  04FC  B7          	or	a, a
1609  04FD  28 0D       	jr	Z,l_player_tile_00105
1610  04FF  2A 00 00    	ld	hl,(_sprite)
1611  0502  26 00       	ld	h,0x00
1612  0504  01 00 00    	ld	bc,_tile
1613  0507  09          	add	hl,bc
1614  0508  36 66       	ld	(hl),0x66
1615  050A  18 41       	jr	l_player_tile_00107
1616  050C              l_player_tile_00105:
1617  050C  78          	ld	a, b
1618  050D  D6 64       	sub	a,0x64
1619  050F  20 1F       	jr	NZ,l_player_tile_00102
1620  0511  2A 00 00    	ld	hl,(_sprite)
1621  0514  26 00       	ld	h,0x00
1622  0516  11 00 00    	ld	de,_tile
1623  0519  19          	add	hl,de
1624  051A  E5          	push	hl
1625  051B  3E 01       	ld	a,0x01
1626  051D  21 00 00    	ld	hl,_sprite
1627  0520  F5          	push	af
1628  0521  33          	inc	sp
1629  0522  7E          	ld	a, (hl)
1630  0523  48          	ld	c,b
1631  0524  47          	ld	b,a
1632  0525  C5          	push	bc
1633  0526  CD 00 00    	call	_spr_tile_dir
1634  0529  F1          	pop	af
1635  052A  33          	inc	sp
1636  052B  D1          	pop	de
1637  052C  7D          	ld	a,l
1638  052D  12          	ld	(de), a
1639  052E  18 1D       	jr	l_player_tile_00107
1640  0530              l_player_tile_00102:
1641  0530  2A 00 00    	ld	hl,(_sprite)
1642  0533  26 00       	ld	h,0x00
1643  0535  11 00 00    	ld	de,_tile
1644  0538  19          	add	hl,de
1645  0539  E5          	push	hl
1646  053A  3E 08       	ld	a,0x08
1647  053C  21 00 00    	ld	hl,_sprite
1648  053F  F5          	push	af
1649  0540  33          	inc	sp
1650  0541  7E          	ld	a, (hl)
1651  0542  48          	ld	c,b
1652  0543  47          	ld	b,a
1653  0544  C5          	push	bc
1654  0545  CD 00 00    	call	_spr_tile_dir
1655  0548  F1          	pop	af
1656  0549  33          	inc	sp
1657  054A  D1          	pop	de
1658  054B  7D          	ld	a,l
1659  054C  12          	ld	(de), a
1660  054D              l_player_tile_00107:
1661  054D  C9          	ret
1662  054E              	SECTION code_compiler
1663  054E              ;	---------------------------------
1664  054E              ; Function player_move_input
1665  054E              ; ---------------------------------
1666  054E              _player_move_input:
1667  054E  CD BD 00    	call	_player_check_input
1668  0551  7D          	ld	a, l
1669  0552  B7          	or	a, a
1670  0553  CA C1 06    	jp	Z, l_player_move_input_00136
1671  0556  CD C4 06    	call	_player_fire
1672  0559  7D          	ld	a, l
1673  055A  B7          	or	a, a
1674  055B  28 0A       	jr	Z,l_player_move_input_00102
1675  055D  21 00 00    	ld	hl,_dirs
1676  0560  36 00       	ld	(hl),0x00
1677  0562  2E 00       	ld	l,0x00
1678  0564  C3 C3 06    	jp	l_player_move_input_00137
1679  0567              l_player_move_input_00102:
1680  0567  21 00 00    	ld	hl,_dirs
1681  056A  CB 7E       	bit	7, (hl)
1682  056C  28 67       	jr	Z,l_player_move_input_00106
1683  056E  21 00 00    	ld	hl,_player_vel_inc
1684  0571  36 01       	ld	(hl),0x01
1685  0573  CD 00 00    	call	_ay_is_playing
1686  0576  7D          	ld	a, l
1687  0577  D6 03       	sub	a,0x03
1688  0579  28 06       	jr	Z,l_player_move_input_00104
1689  057B  21 00 00    	ld	hl,_ay_effect_03
1690  057E  CD 00 00    	call	_ay_fx_play
1691  0581              l_player_move_input_00104:
1692  0581  21 00 00    	ld	hl,_player_over_stair
1693  0584  36 00       	ld	(hl),0x00
1694  0586  CD 00 00    	call	_sound_jump
1695  0589  21 00 00    	ld	hl,_s_state
1696  058C  7E          	ld	a,(hl)
1697  058D  F6 01       	or	a,0x01
1698  058F  E6 FD       	and	a,0xfd
1699  0591  77          	ld	(hl),a
1700  0592  2A 00 00    	ld	hl,(_sprite)
1701  0595  26 00       	ld	h,0x00
1702  0597  01 00 00    	ld	bc,_jump_lin
1703  059A  09          	add	hl,bc
1704  059B  4D          	ld	c,l
1705  059C  44          	ld	b,h
1706  059D  2A 00 00    	ld	hl,(_sprite)
1707  05A0  26 00       	ld	h,0x00
1708  05A2  11 00 00    	ld	de,_lin
1709  05A5  19          	add	hl,de
1710  05A6  7E          	ld	a,(hl)
1711  05A7  02          	ld	(bc),a
1712  05A8  2A 00 00    	ld	hl,(_sprite)
1713  05AB  26 00       	ld	h,0x00
1714  05AD  01 00 00    	ld	bc,_state
1715  05B0  09          	add	hl,bc
1716  05B1  3A 00 00    	ld	a,(_s_state)
1717  05B4  77          	ld	(hl),a
1718  05B5  2E 58       	ld	l,0x58
1719  05B7  CD F8 04    	call	_player_tile
1720  05BA  2A 00 00    	ld	hl,(_sprite)
1721  05BD  26 00       	ld	h,0x00
1722  05BF  01 00 00    	ld	bc,_sprite_speed_alt
1723  05C2  09          	add	hl,bc
1724  05C3  36 02       	ld	(hl),0x02
1725  05C5  21 00 00    	ld	hl,_player_slide
1726  05C8  36 00       	ld	(hl),0x00
1727  05CA  3A 00 00    	ld	a,(_player_vel_y0)
1728  05CD  32 00 00    	ld	(_player_vel_y),a
1729  05D0  2E 01       	ld	l,0x01
1730  05D2  C3 C3 06    	jp	l_player_move_input_00137
1731  05D5              l_player_move_input_00106:
1732  05D5  21 00 00    	ld	hl,_dirs
1733  05D8  CB 5E       	bit	3, (hl)
1734  05DA  28 33       	jr	Z,l_player_move_input_00110
1735  05DC  21 00 00    	ld	hl,_s_state
1736  05DF  7E          	ld	a,(hl)
1737  05E0  F6 04       	or	a,0x04
1738  05E2  E6 F7       	and	a,0xf7
1739  05E4  77          	ld	(hl),a
1740  05E5  01 00 00    	ld	bc,_state_a+0
1741  05E8  79          	ld	a, c
1742  05E9  21 00 00    	ld	hl,_sprite
1743  05EC  86          	add	a, (hl)
1744  05ED  5F          	ld	e, a
1745  05EE  78          	ld	a, b
1746  05EF  CE 00       	adc	a,0x00
1747  05F1  57          	ld	d, a
1748  05F2  1A          	ld	a, (de)
1749  05F3  F6 10       	or	a,0x10
1750  05F5  12          	ld	(de), a
1751  05F6  79          	ld	a, c
1752  05F7  86          	add	a, (hl)
1753  05F8  4F          	ld	c, a
1754  05F9  78          	ld	a, b
1755  05FA  CE 00       	adc	a,0x00
1756  05FC  47          	ld	b, a
1757  05FD  0A          	ld	a, (bc)
1758  05FE  E6 F7       	and	a,0xf7
1759  0600  02          	ld	(bc), a
1760  0601  3A 00 00    	ld	a,(_player_over_stair)
1761  0604  B7          	or	a, a
1762  0605  28 05       	jr	Z,l_player_move_input_00108
1763  0607  2E 00       	ld	l,0x00
1764  0609  CD 50 04    	call	_player_check_stairs
1765  060C              l_player_move_input_00108:
1766  060C  CD 00 00    	call	_spr_move_horizontal
1767  060F              l_player_move_input_00110:
1768  060F  21 00 00    	ld	hl,_dirs
1769  0612  CB 56       	bit	2, (hl)
1770  0614  28 33       	jr	Z,l_player_move_input_00114
1771  0616  21 00 00    	ld	hl,_s_state
1772  0619  7E          	ld	a,(hl)
1773  061A  F6 08       	or	a,0x08
1774  061C  E6 FB       	and	a,0xfb
1775  061E  77          	ld	(hl),a
1776  061F  01 00 00    	ld	bc,_state_a+0
1777  0622  79          	ld	a, c
1778  0623  21 00 00    	ld	hl,_sprite
1779  0626  86          	add	a, (hl)
1780  0627  5F          	ld	e, a
1781  0628  78          	ld	a, b
1782  0629  CE 00       	adc	a,0x00
1783  062B  57          	ld	d, a
1784  062C  1A          	ld	a, (de)
1785  062D  F6 08       	or	a,0x08
1786  062F  12          	ld	(de), a
1787  0630  79          	ld	a, c
1788  0631  86          	add	a, (hl)
1789  0632  4F          	ld	c, a
1790  0633  78          	ld	a, b
1791  0634  CE 00       	adc	a,0x00
1792  0636  47          	ld	b, a
1793  0637  0A          	ld	a, (bc)
1794  0638  E6 EF       	and	a,0xef
1795  063A  02          	ld	(bc), a
1796  063B  3A 00 00    	ld	a,(_player_over_stair)
1797  063E  B7          	or	a, a
1798  063F  28 05       	jr	Z,l_player_move_input_00112
1799  0641  2E 00       	ld	l,0x00
1800  0643  CD 50 04    	call	_player_check_stairs
1801  0646              l_player_move_input_00112:
1802  0646  CD 00 00    	call	_spr_move_horizontal
1803  0649              l_player_move_input_00114:
1804  0649  21 00 00    	ld	hl,_dirs
1805  064C  CB 46       	bit	0, (hl)
1806  064E  28 2B       	jr	Z,l_player_move_input_00124
1807  0650  2E 00       	ld	l,0x00
1808  0652  CD 50 04    	call	_player_check_stairs
1809  0655  3A 00 00    	ld	a,(_player_over_stair)
1810  0658  B7          	or	a, a
1811  0659  28 0E       	jr	Z,l_player_move_input_00121
1812  065B  CD 00 00    	call	_spr_move_up
1813  065E  7D          	ld	a, l
1814  065F  B7          	or	a, a
1815  0660  28 19       	jr	Z,l_player_move_input_00124
1816  0662  21 00 00    	ld	hl,_player_over_stair
1817  0665  36 00       	ld	(hl),0x00
1818  0667  18 12       	jr	l_player_move_input_00124
1819  0669              l_player_move_input_00121:
1820  0669  21 00 00    	ld	hl,_dirs
1821  066C  CB 5E       	bit	3, (hl)
1822  066E  20 0B       	jr	NZ,l_player_move_input_00124
1823  0670  21 00 00    	ld	hl,_dirs
1824  0673  CB 56       	bit	2, (hl)
1825  0675  20 04       	jr	NZ,l_player_move_input_00124
1826  0677  2E 00       	ld	l,0x00
1827  0679  18 48       	jr	l_player_move_input_00137
1828  067B              l_player_move_input_00124:
1829  067B  21 00 00    	ld	hl,_dirs
1830  067E  CB 4E       	bit	1, (hl)
1831  0680  28 29       	jr	Z,l_player_move_input_00134
1832  0682  CD 0A 04    	call	_player_check_stairs_down
1833  0685  3A 00 00    	ld	a,(_player_over_stair)
1834  0688  B7          	or	a, a
1835  0689  28 0E       	jr	Z,l_player_move_input_00131
1836  068B  CD 00 00    	call	_spr_move_down
1837  068E  7D          	ld	a, l
1838  068F  B7          	or	a, a
1839  0690  28 19       	jr	Z,l_player_move_input_00134
1840  0692  21 00 00    	ld	hl,_player_over_stair
1841  0695  36 00       	ld	(hl),0x00
1842  0697  18 12       	jr	l_player_move_input_00134
1843  0699              l_player_move_input_00131:
1844  0699  21 00 00    	ld	hl,_dirs
1845  069C  CB 5E       	bit	3, (hl)
1846  069E  20 0B       	jr	NZ,l_player_move_input_00134
1847  06A0  21 00 00    	ld	hl,_dirs
1848  06A3  CB 56       	bit	2, (hl)
1849  06A5  20 04       	jr	NZ,l_player_move_input_00134
1850  06A7  2E 00       	ld	l,0x00
1851  06A9  18 18       	jr	l_player_move_input_00137
1852  06AB              l_player_move_input_00134:
1853  06AB  2A 00 00    	ld	hl,(_sprite)
1854  06AE  26 00       	ld	h,0x00
1855  06B0  01 00 00    	ld	bc,_state
1856  06B3  09          	add	hl,bc
1857  06B4  3A 00 00    	ld	a,(_s_state)
1858  06B7  77          	ld	(hl),a
1859  06B8  2E 54       	ld	l,0x54
1860  06BA  CD F8 04    	call	_player_tile
1861  06BD  2E 01       	ld	l,0x01
1862  06BF  18 02       	jr	l_player_move_input_00137
1863  06C1              l_player_move_input_00136:
1864  06C1  2E 00       	ld	l,0x00
1865  06C3              l_player_move_input_00137:
1866  06C3  C9          	ret
1867  06C4              	SECTION code_compiler
1868  06C4              ;	---------------------------------
1869  06C4              ; Function player_fire
1870  06C4              ; ---------------------------------
1871  06C4              _player_fire:
1872  06C4  21 00 00    	ld	hl,_dirs
1873  06C7  CB 7E       	bit	7, (hl)
1874  06C9  28 33       	jr	Z,l_player_fire_00108
1875  06CB  21 00 00    	ld	hl,_dirs
1876  06CE  CB 4E       	bit	1, (hl)
1877  06D0  28 2C       	jr	Z,l_player_fire_00108
1878  06D2  21 00 00    	ld	hl,_player_mana
1879  06D5  7E          	ld	a, (hl)
1880  06D6  B7          	or	a, a
1881  06D7  28 21       	jr	Z,l_player_fire_00105
1882  06D9  3A 07 00    	ld	a,(_bullet_col + 0x0007)
1883  06DC  3C          	inc	a
1884  06DD  20 1B       	jr	NZ,l_player_fire_00105
1885  06DF  3E 05       	ld	a,0x05
1886  06E1  96          	sub	a, (hl)
1887  06E2  30 06       	jr	NC,l_player_fire_00102
1888  06E4  7E          	ld	a, (hl)
1889  06E5  C6 FB       	add	a,0xfb
1890  06E7  77          	ld	(hl), a
1891  06E8  18 05       	jr	l_player_fire_00103
1892  06EA              l_player_fire_00102:
1893  06EA  21 00 00    	ld	hl,_player_mana
1894  06ED  36 00       	ld	(hl),0x00
1895  06EF              l_player_fire_00103:
1896  06EF  CD 00 00    	call	_game_update_stats
1897  06F2  21 07 70    	ld	hl,0x7007
1898  06F5  E5          	push	hl
1899  06F6  CD 00 00    	call	_game_shoot_fire
1900  06F9  F1          	pop	af
1901  06FA              l_player_fire_00105:
1902  06FA  2E 01       	ld	l,0x01
1903  06FC  18 02       	jr	l_player_fire_00110
1904  06FE              l_player_fire_00108:
1905  06FE  2E 00       	ld	l,0x00
1906  0700              l_player_fire_00110:
1907  0700  C9          	ret
1908  0701              	SECTION code_compiler
1909  0701              ;	---------------------------------
1910  0701              ; Function player_check_map
1911  0701              ; ---------------------------------
1912  0701              _player_check_map:
1913  0701  2A 00 00    	ld	hl,(_sprite)
1914  0704  26 00       	ld	h,0x00
1915  0706  5D          	ld	e,l
1916  0707  01 00 00    	ld	bc,_col
1917  070A  09          	add	hl,bc
1918  070B  46          	ld	b,(hl)
1919  070C  16 00       	ld	d,0x00
1920  070E  21 00 00    	ld	hl,_lin
1921  0711  19          	add	hl,de
1922  0712  4E          	ld	c, (hl)
1923  0713  C5          	push	bc
1924  0714  CD 00 00    	call	_spr_calc_index
1925  0717  F1          	pop	af
1926  0718  7D          	ld	a,l
1927  0719  32 00 00    	ld	(_sprite_curr_index),a
1928  071C  2A 00 00    	ld	hl,(_sprite)
1929  071F  26 00       	ld	h,0x00
1930  0721  01 00 00    	ld	bc,_col
1931  0724  09          	add	hl,bc
1932  0725  4E          	ld	c, (hl)
1933  0726  3A 00 00    	ld	a,(_sprite)
1934  0729  5F          	ld	e,a
1935  072A  16 00       	ld	d,0x00
1936  072C  21 00 00    	ld	hl,_lin
1937  072F  19          	add	hl,de
1938  0730  7E          	ld	a,(hl)
1939  0731  E6 0F       	and	a,0x0f
1940  0733  CB 41       	bit	0, c
1941  0735  20 17       	jr	NZ,l_player_check_map_00108
1942  0737  B7          	or	a, a
1943  0738  20 05       	jr	NZ,l_player_check_map_00102
1944  073A  CD 79 07    	call	_player_pick_item
1945  073D  18 39       	jr	l_player_check_map_00110
1946  073F              l_player_check_map_00102:
1947  073F  CD 79 07    	call	_player_pick_item
1948  0742  21 00 00    	ld	hl,_sprite_curr_index
1949  0745  7E          	ld	a, (hl)
1950  0746  C6 10       	add	a,0x10
1951  0748  77          	ld	(hl), a
1952  0749  CD 79 07    	call	_player_pick_item
1953  074C  18 2A       	jr	l_player_check_map_00110
1954  074E              l_player_check_map_00108:
1955  074E  B7          	or	a, a
1956  074F  20 0C       	jr	NZ,l_player_check_map_00105
1957  0751  CD 79 07    	call	_player_pick_item
1958  0754  21 00 00    	ld	hl,_sprite_curr_index
1959  0757  34          	inc	(hl)
1960  0758  CD 79 07    	call	_player_pick_item
1961  075B  18 1B       	jr	l_player_check_map_00110
1962  075D              l_player_check_map_00105:
1963  075D  CD 79 07    	call	_player_pick_item
1964  0760  21 00 00    	ld	hl,_sprite_curr_index
1965  0763  34          	inc	(hl)
1966  0764  CD 79 07    	call	_player_pick_item
1967  0767  21 00 00    	ld	hl,_sprite_curr_index
1968  076A  7E          	ld	a, (hl)
1969  076B  C6 0F       	add	a,0x0f
1970  076D  77          	ld	(hl), a
1971  076E  CD 79 07    	call	_player_pick_item
1972  0771  21 00 00    	ld	hl,_sprite_curr_index
1973  0774  34          	inc	(hl)
1974  0775  CD 79 07    	call	_player_pick_item
1975  0778              l_player_check_map_00110:
1976  0778  C9          	ret
1977  0779              	SECTION code_compiler
1978  0779              ;	---------------------------------
1979  0779              ; Function player_pick_item
1980  0779              ; ---------------------------------
1981  0779              _player_pick_item:
1982  0779  2A 00 00    	ld	hl,(_sprite_curr_index)
1983  077C  26 00       	ld	h,0x00
1984  077E  01 00 00    	ld	bc,_scr_map
1985  0781  09          	add	hl,bc
1986  0782  4E          	ld	c,(hl)
1987  0783  3E 27       	ld	a,0x27
1988  0785  91          	sub	a, c
1989  0786  3E 00       	ld	a,0x00
1990  0788  17          	rla
1991  0789  47          	ld	b, a
1992  078A  79          	ld	a, c
1993  078B  D6 20       	sub	a,0x20
1994  078D  DA 62 08    	jp	C, l_player_pick_item_00107
1995  0790  CB 40       	bit	0, b
1996  0792  C2 62 08    	jp	NZ, l_player_pick_item_00107
1997  0795  CD 00 00    	call	_ay_reset
1998  0798  21 00 00    	ld	hl,_ay_effect_10
1999  079B  CD 00 00    	call	_ay_fx_play
2000  079E  C5          	push	bc
2001  079F  CD 00 00    	call	_sound_coin
2002  07A2  C1          	pop	bc
2003  07A3  2A 00 00    	ld	hl,(_sprite_curr_index)
2004  07A6  26 00       	ld	h,0x00
2005  07A8  11 00 00    	ld	de,_scr_map
2006  07AB  19          	add	hl,de
2007  07AC  AF          	xor	a,a
2008  07AD  77          	ld	(hl),a
2009  07AE  3A 00 00    	ld	a,(_sprite_curr_index)
2010  07B1  5F          	ld	e,a
2011  07B2  16 00       	ld	d,0x00
2012  07B4  C5          	push	bc
2013  07B5  D5          	push	de
2014  07B6  CD 00 00    	call	_game_obj_set
2015  07B9  F1          	pop	af
2016  07BA  C1          	pop	bc
2017  07BB  3A 00 00    	ld	a,(_sprite_curr_index)
2018  07BE  07          	rlca
2019  07BF  07          	rlca
2020  07C0  07          	rlca
2021  07C1  07          	rlca
2022  07C2  E6 0F       	and	a,0x0f
2023  07C4  07          	rlca
2024  07C5  07          	rlca
2025  07C6  07          	rlca
2026  07C7  07          	rlca
2027  07C8  E6 F0       	and	a,0xf0
2028  07CA  32 00 00    	ld	(_s_lin1),a
2029  07CD  3A 00 00    	ld	a,(_sprite_curr_index)
2030  07D0  E6 0F       	and	a,0x0f
2031  07D2  87          	add	a, a
2032  07D3  32 00 00    	ld	(_s_col1),a
2033  07D6  C5          	push	bc
2034  07D7  21 00 00    	ld	hl,0x0000
2035  07DA  E5          	push	hl
2036  07DB  21 78 03    	ld	hl,0x0378
2037  07DE  E5          	push	hl
2038  07DF  F5          	push	af
2039  07E0  33          	inc	sp
2040  07E1  3A 00 00    	ld	a,(_s_lin1)
2041  07E4  F5          	push	af
2042  07E5  33          	inc	sp
2043  07E6  CD 00 00    	call	_spr_add_anim
2044  07E9  F1          	pop	af
2045  07EA  F1          	pop	af
2046  07EB  F1          	pop	af
2047  07EC  C1          	pop	bc
2048  07ED  79          	ld	a,c
2049  07EE  FE 1C       	cp	a,0x1c
2050  07F0  28 0E       	jr	Z,l_player_pick_item_00101
2051  07F2  FE 1D       	cp	a,0x1d
2052  07F4  28 23       	jr	Z,l_player_pick_item_00102
2053  07F6  FE 1E       	cp	a,0x1e
2054  07F8  28 38       	jr	Z,l_player_pick_item_00103
2055  07FA  D6 1F       	sub	a,0x1f
2056  07FC  28 4D       	jr	Z,l_player_pick_item_00104
2057  07FE  18 62       	jr	l_player_pick_item_00107
2058  0800              l_player_pick_item_00101:
2059  0800  21 00 00    	ld	hl,_player_keys
2060  0803  36 01       	ld	(hl),0x01
2061  0805  21 00 00    	ld	hl,_screen_ink
2062  0808  36 07       	ld	(hl),0x07
2063  080A  C5          	push	bc
2064  080B  21 00 00    	ld	hl,___str_0
2065  080E  E5          	push	hl
2066  080F  21 16 03    	ld	hl,0x0316
2067  0812  E5          	push	hl
2068  0813  CD 00 00    	call	_zx_print_str
2069  0816  C1          	pop	bc
2070  0817  18 49       	jr	l_player_pick_item_00107
2071  0819              l_player_pick_item_00102:
2072  0819  21 01 00    	ld	hl, +(_player_keys + 0x0001)
2073  081C  36 01       	ld	(hl),0x01
2074  081E  21 00 00    	ld	hl,_screen_ink
2075  0821  36 02       	ld	(hl),0x02
2076  0823  C5          	push	bc
2077  0824  21 00 00    	ld	hl,___str_0
2078  0827  E5          	push	hl
2079  0828  21 16 04    	ld	hl,0x0416
2080  082B  E5          	push	hl
2081  082C  CD 00 00    	call	_zx_print_str
2082  082F  C1          	pop	bc
2083  0830  18 30       	jr	l_player_pick_item_00107
2084  0832              l_player_pick_item_00103:
2085  0832  21 02 00    	ld	hl, +(_player_keys + 0x0002)
2086  0835  36 01       	ld	(hl),0x01
2087  0837  21 00 00    	ld	hl,_screen_ink
2088  083A  36 04       	ld	(hl),0x04
2089  083C  C5          	push	bc
2090  083D  21 00 00    	ld	hl,___str_0
2091  0840  E5          	push	hl
2092  0841  21 16 05    	ld	hl,0x0516
2093  0844  E5          	push	hl
2094  0845  CD 00 00    	call	_zx_print_str
2095  0848  C1          	pop	bc
2096  0849  18 17       	jr	l_player_pick_item_00107
2097  084B              l_player_pick_item_00104:
2098  084B  21 03 00    	ld	hl, +(_player_keys + 0x0003)
2099  084E  36 01       	ld	(hl),0x01
2100  0850  21 00 00    	ld	hl,_screen_ink
2101  0853  36 05       	ld	(hl),0x05
2102  0855  C5          	push	bc
2103  0856  21 00 00    	ld	hl,___str_0
2104  0859  E5          	push	hl
2105  085A  21 16 06    	ld	hl,0x0616
2106  085D  E5          	push	hl
2107  085E  CD 00 00    	call	_zx_print_str
2108  0861  C1          	pop	bc
2109  0862              l_player_pick_item_00107:
2110  0862  CB 40       	bit	0, b
2111  0864  C8          	ret	Z
2112  0865  79          	ld	a, c
2113  0866  D6 30       	sub	a,0x30
2114  0868  D0          	ret	NC
2115  0869  3A 07 00    	ld	a,(_lin + 0x0007)
2116  086C  E6 03       	and	a,0x03
2117  086E  C8          	ret	Z
2118  086F  2E 06       	ld	l,0x06
2119  0871  CD 00 00    	call	_zx_border_fastcall
2120  0874  2E 32       	ld	l,0x32
2121  0876  CD 54 0F    	call	_player_hit
2122  0879  C9          	ret
2123  087A              	SECTION rodata_compiler
2124  0000              ___str_0:
2125  0000  5D          	DEFM "]"
2126  0001  00          	DEFB 0x00
2127  0002              	SECTION code_compiler
2128  087A              ;	---------------------------------
2129  087A              ; Function player_hit_platform
2130  087A              ; ---------------------------------
2131  087A              _player_hit_platform:
2132  087A  3A 00 00    	ld	a,(_player_hit_lin)
2133  087D  B7          	or	a, a
2134  087E  C2 BE 0A    	jp	NZ, l_player_hit_platform_00137
2135  0881  2A 00 00    	ld	hl,(_sprite)
2136  0884  26 00       	ld	h,0x00
2137  0886  01 00 00    	ld	bc,_lin
2138  0889  09          	add	hl,bc
2139  088A  4E          	ld	c,(hl)
2140  088B  3E 10       	ld	a,0x10
2141  088D  91          	sub	a, c
2142  088E  D2 BE 0A    	jp	NC, l_player_hit_platform_00137
2143  0891  01 00 00    	ld	bc,_scr_map
2144  0894  2A 00 00    	ld	hl,(_index1)
2145  0897  09          	add	hl,bc
2146  0898  7E          	ld	a,(hl)
2147  0899  D6 45       	sub	a,0x45
2148  089B  DA BE 0A    	jp	C, l_player_hit_platform_00137
2149  089E  01 00 00    	ld	bc,_spr_timer+0
2150  08A1  2A 00 00    	ld	hl,(_sprite)
2151  08A4  26 00       	ld	h,0x00
2152  08A6  29          	add	hl, hl
2153  08A7  09          	add	hl,bc
2154  08A8  ED 5B 00 00 	ld	de,(_curr_time)
2155  08AC  73          	ld	(hl),e
2156  08AD  23          	inc	hl
2157  08AE  72          	ld	(hl),d
2158  08AF  2A 00 00    	ld	hl,(_sprite)
2159  08B2  26 00       	ld	h,0x00
2160  08B4  01 00 00    	ld	bc,_lin
2161  08B7  09          	add	hl,bc
2162  08B8  4E          	ld	c,(hl)
2163  08B9  06 00       	ld	b,0x00
2164  08BB  79          	ld	a, c
2165  08BC  C6 F8       	add	a,0xf8
2166  08BE  4F          	ld	c, a
2167  08BF  78          	ld	a, b
2168  08C0  CE FF       	adc	a,0xff
2169  08C2  5F          	ld	e, a
2170  08C3  06 04       	ld	b,0x04
2171  08C5              l_player_hit_platform_00226:
2172  08C5  CB 2B       	sra	e
2173  08C7  CB 19       	rr	c
2174  08C9  10 FA       	djnz	l_player_hit_platform_00226
2175  08CB  79          	ld	a, c
2176  08CC  07          	rlca
2177  08CD  07          	rlca
2178  08CE  07          	rlca
2179  08CF  07          	rlca
2180  08D0  E6 F0       	and	a,0xf0
2181  08D2  C6 08       	add	a,0x08
2182  08D4  32 00 00    	ld	(_player_hit_lin),a
2183  08D7  2A 00 00    	ld	hl,(_sprite)
2184  08DA  26 00       	ld	h,0x00
2185  08DC  01 00 00    	ld	bc,_col
2186  08DF  09          	add	hl,bc
2187  08E0  4E          	ld	c,(hl)
2188  08E1  CB 41       	bit	0,c
2189  08E3  20 06       	jr	NZ,l_player_hit_platform_00111
2190  08E5  21 00 00    	ld	hl,_player_hit_col
2191  08E8  71          	ld	(hl), c
2192  08E9  18 33       	jr	l_player_hit_platform_00112
2193  08EB              l_player_hit_platform_00111:
2194  08EB  2A 00 00    	ld	hl,(_sprite)
2195  08EE  26 00       	ld	h,0x00
2196  08F0  11 00 00    	ld	de,_state
2197  08F3  19          	add	hl,de
2198  08F4  5E          	ld	e, (hl)
2199  08F5  41          	ld	b, c
2200  08F6  04          	inc	b
2201  08F7  0D          	dec	c
2202  08F8  CB 5B       	bit	3, e
2203  08FA  28 12       	jr	Z,l_player_hit_platform_00108
2204  08FC  3A 00 00    	ld	a,(_g_player_hit_right)
2205  08FF  B7          	or	a, a
2206  0900  28 06       	jr	Z,l_player_hit_platform_00102
2207  0902  21 00 00    	ld	hl,_player_hit_col
2208  0905  70          	ld	(hl), b
2209  0906  18 16       	jr	l_player_hit_platform_00112
2210  0908              l_player_hit_platform_00102:
2211  0908  21 00 00    	ld	hl,_player_hit_col
2212  090B  71          	ld	(hl), c
2213  090C  18 10       	jr	l_player_hit_platform_00112
2214  090E              l_player_hit_platform_00108:
2215  090E  3A 00 00    	ld	a,(_g_player_hit_left)
2216  0911  B7          	or	a, a
2217  0912  28 06       	jr	Z,l_player_hit_platform_00105
2218  0914  21 00 00    	ld	hl,_player_hit_col
2219  0917  71          	ld	(hl), c
2220  0918  18 04       	jr	l_player_hit_platform_00112
2221  091A              l_player_hit_platform_00105:
2222  091A  21 00 00    	ld	hl,_player_hit_col
2223  091D  70          	ld	(hl), b
2224  091E              l_player_hit_platform_00112:
2225  091E  01 00 00    	ld	bc,_scr_map
2226  0921  2A 00 00    	ld	hl,(_index1)
2227  0924  09          	add	hl,bc
2228  0925  7E          	ld	a,(hl)
2229  0926  FE 4B       	cp	a,0x4b
2230  0928  28 05       	jr	Z,l_player_hit_platform_00133
2231  092A  D6 4C       	sub	a,0x4c
2232  092C  C2 B2 0A    	jp	NZ,l_player_hit_platform_00134
2233  092F              l_player_hit_platform_00133:
2234  092F  2E 01       	ld	l,0x01
2235  0931  CD 00 00    	call	_zx_border_fastcall
2236  0934  21 00 00    	ld	hl,_tmp0
2237  0937  36 00       	ld	(hl),0x00
2238  0939              l_player_hit_platform_00130:
2239  0939  21 00 00    	ld	hl,_tmp0
2240  093C  7E          	ld	a, (hl)
2241  093D  D6 07       	sub	a,0x07
2242  093F  D2 B2 0A    	jp	NC, l_player_hit_platform_00134
2243  0942  4E          	ld	c,(hl)
2244  0943  06 00       	ld	b,0x00
2245  0945  21 00 00    	ld	hl,_mush_index
2246  0948  09          	add	hl,bc
2247  0949  4E          	ld	c, (hl)
2248  094A  06 00       	ld	b,0x00
2249  094C  2A 00 00    	ld	hl,(_index1)
2250  094F  AF          	xor	a,a
2251  0950  ED 42       	sbc	hl,bc
2252  0952  C2 AB 0A    	jp	NZ,l_player_hit_platform_00129
2253  0955  2A 00 00    	ld	hl,(_sprite)
2254  0958  26 00       	ld	h,0x00
2255  095A  01 00 00    	ld	bc,_lin
2256  095D  09          	add	hl,bc
2257  095E  7E          	ld	a,(hl)
2258  095F  07          	rlca
2259  0960  07          	rlca
2260  0961  07          	rlca
2261  0962  07          	rlca
2262  0963  E6 0F       	and	a,0x0f
2263  0965  07          	rlca
2264  0966  07          	rlca
2265  0967  07          	rlca
2266  0968  07          	rlca
2267  0969  E6 F0       	and	a,0xf0
2268  096B  C6 E0       	add	a,0xe0
2269  096D  32 00 00    	ld	(_s_lin1),a
2270  0970  2A 00 00    	ld	hl,(_sprite)
2271  0973  26 00       	ld	h,0x00
2272  0975  01 00 00    	ld	bc,_col
2273  0978  09          	add	hl,bc
2274  0979  7E          	ld	a,(hl)
2275  097A  CB 3F       	srl	a
2276  097C  87          	add	a, a
2277  097D  32 00 00    	ld	(_s_col1),a
2278  0980  21 00 00    	ld	hl,_tmp
2279  0983  36 00       	ld	(hl),0x00
2280  0985              l_player_hit_platform_00115:
2281  0985  21 00 00    	ld	hl,_tmp
2282  0988  7E          	ld	a, (hl)
2283  0989  D6 07       	sub	a,0x07
2284  098B  30 1C       	jr	NC,l_player_hit_platform_00117
2285  098D  4E          	ld	c,(hl)
2286  098E  06 00       	ld	b,0x00
2287  0990  21 00 00    	ld	hl,_mush_index
2288  0993  09          	add	hl,bc
2289  0994  4E          	ld	c, (hl)
2290  0995  06 00       	ld	b,0x00
2291  0997  21 00 00    	ld	hl,_index1
2292  099A  7E          	ld	a, (hl)
2293  099B  91          	sub	a, c
2294  099C  20 05       	jr	NZ,l_player_hit_platform_00235
2295  099E  23          	inc	hl
2296  099F  7E          	ld	a, (hl)
2297  09A0  90          	sub	a, b
2298  09A1  28 06       	jr	Z,l_player_hit_platform_00117
2299  09A3              l_player_hit_platform_00235:
2300  09A3  21 00 00    	ld	hl,_tmp
2301  09A6  34          	inc	(hl)
2302  09A7  18 DC       	jr	l_player_hit_platform_00115
2303  09A9              l_player_hit_platform_00117:
2304  09A9  2A 00 00    	ld	hl,(_tmp)
2305  09AC  26 00       	ld	h,0x00
2306  09AE  01 00 00    	ld	bc,_mush_class
2307  09B1  09          	add	hl,bc
2308  09B2  7E          	ld	a,(hl)
2309  09B3  FE 78       	cp	a,0x78
2310  09B5  28 18       	jr	Z,l_player_hit_platform_00118
2311  09B7  FE 79       	cp	a,0x79
2312  09B9  28 2F       	jr	Z,l_player_hit_platform_00119
2313  09BB  FE 7A       	cp	a,0x7a
2314  09BD  28 5F       	jr	Z,l_player_hit_platform_00121
2315  09BF  FE 7B       	cp	a,0x7b
2316  09C1  28 41       	jr	Z,l_player_hit_platform_00120
2317  09C3  FE 7C       	cp	a,0x7c
2318  09C5  CA 52 0A    	jp	Z,l_player_hit_platform_00123
2319  09C8  D6 7D       	sub	a,0x7d
2320  09CA  28 6C       	jr	Z,l_player_hit_platform_00122
2321  09CC  C3 6A 0A    	jp	l_player_hit_platform_00124
2322  09CF              l_player_hit_platform_00118:
2323  09CF  2E 02       	ld	l,0x02
2324  09D1  CD 00 00    	call	_zx_border_fastcall
2325  09D4  3A 00 00    	ld	a,(_s_col1)
2326  09D7  21 06 FF    	ld	hl,0xff06
2327  09DA  E5          	push	hl
2328  09DB  F5          	push	af
2329  09DC  33          	inc	sp
2330  09DD  3A 00 00    	ld	a,(_s_lin1)
2331  09E0  F5          	push	af
2332  09E1  33          	inc	sp
2333  09E2  CD 00 00    	call	_enemy_init
2334  09E5  F1          	pop	af
2335  09E6  F1          	pop	af
2336  09E7  C3 6A 0A    	jp	l_player_hit_platform_00124
2337  09EA              l_player_hit_platform_00119:
2338  09EA  2E 02       	ld	l,0x02
2339  09EC  CD 00 00    	call	_zx_border_fastcall
2340  09EF  3A 00 00    	ld	a,(_s_col1)
2341  09F2  21 06 01    	ld	hl,0x0106
2342  09F5  E5          	push	hl
2343  09F6  F5          	push	af
2344  09F7  33          	inc	sp
2345  09F8  3A 00 00    	ld	a,(_s_lin1)
2346  09FB  F5          	push	af
2347  09FC  33          	inc	sp
2348  09FD  CD 00 00    	call	_enemy_init
2349  0A00  F1          	pop	af
2350  0A01  F1          	pop	af
2351  0A02  18 66       	jr	l_player_hit_platform_00124
2352  0A04              l_player_hit_platform_00120:
2353  0A04  2E 01       	ld	l,0x01
2354  0A06  CD 00 00    	call	_zx_border_fastcall
2355  0A09  3A 00 00    	ld	a,(_s_col1)
2356  0A0C  21 07 01    	ld	hl,0x0107
2357  0A0F  E5          	push	hl
2358  0A10  F5          	push	af
2359  0A11  33          	inc	sp
2360  0A12  3A 00 00    	ld	a,(_s_lin1)
2361  0A15  F5          	push	af
2362  0A16  33          	inc	sp
2363  0A17  CD 00 00    	call	_enemy_init
2364  0A1A  F1          	pop	af
2365  0A1B  F1          	pop	af
2366  0A1C  18 4C       	jr	l_player_hit_platform_00124
2367  0A1E              l_player_hit_platform_00121:
2368  0A1E  2E 01       	ld	l,0x01
2369  0A20  CD 00 00    	call	_zx_border_fastcall
2370  0A23  3A 00 00    	ld	a,(_s_col1)
2371  0A26  21 07 FF    	ld	hl,0xff07
2372  0A29  E5          	push	hl
2373  0A2A  F5          	push	af
2374  0A2B  33          	inc	sp
2375  0A2C  3A 00 00    	ld	a,(_s_lin1)
2376  0A2F  F5          	push	af
2377  0A30  33          	inc	sp
2378  0A31  CD 00 00    	call	_enemy_init
2379  0A34  F1          	pop	af
2380  0A35  F1          	pop	af
2381  0A36  18 32       	jr	l_player_hit_platform_00124
2382  0A38              l_player_hit_platform_00122:
2383  0A38  2E 04       	ld	l,0x04
2384  0A3A  CD 00 00    	call	_zx_border_fastcall
2385  0A3D  3A 00 00    	ld	a,(_s_col1)
2386  0A40  21 08 01    	ld	hl,0x0108
2387  0A43  E5          	push	hl
2388  0A44  F5          	push	af
2389  0A45  33          	inc	sp
2390  0A46  3A 00 00    	ld	a,(_s_lin1)
2391  0A49  F5          	push	af
2392  0A4A  33          	inc	sp
2393  0A4B  CD 00 00    	call	_enemy_init
2394  0A4E  F1          	pop	af
2395  0A4F  F1          	pop	af
2396  0A50  18 18       	jr	l_player_hit_platform_00124
2397  0A52              l_player_hit_platform_00123:
2398  0A52  2E 04       	ld	l,0x04
2399  0A54  CD 00 00    	call	_zx_border_fastcall
2400  0A57  3A 00 00    	ld	a,(_s_col1)
2401  0A5A  21 08 FF    	ld	hl,0xff08
2402  0A5D  E5          	push	hl
2403  0A5E  F5          	push	af
2404  0A5F  33          	inc	sp
2405  0A60  3A 00 00    	ld	a,(_s_lin1)
2406  0A63  F5          	push	af
2407  0A64  33          	inc	sp
2408  0A65  CD 00 00    	call	_enemy_init
2409  0A68  F1          	pop	af
2410  0A69  F1          	pop	af
2411  0A6A              l_player_hit_platform_00124:
2412  0A6A  2A 00 00    	ld	hl,(_index1)
2413  0A6D  01 F0 FF    	ld	bc,0xfff0
2414  0A70  09          	add	hl,bc
2415  0A71  01 00 00    	ld	bc,_scr_map
2416  0A74  09          	add	hl,bc
2417  0A75  36 00       	ld	(hl),0x00
2418  0A77  01 00 00    	ld	bc,_scr_map
2419  0A7A  2A 00 00    	ld	hl,(_index1)
2420  0A7D  09          	add	hl,bc
2421  0A7E  7E          	ld	a,(hl)
2422  0A7F  D6 4B       	sub	a,0x4b
2423  0A81  4D          	ld	c,l
2424  0A82  44          	ld	b,h
2425  0A83  20 05       	jr	NZ,l_player_hit_platform_00126
2426  0A85  3E 44       	ld	a,0x44
2427  0A87  02          	ld	(bc), a
2428  0A88  18 03       	jr	l_player_hit_platform_00127
2429  0A8A              l_player_hit_platform_00126:
2430  0A8A  3E 46       	ld	a,0x46
2431  0A8C  02          	ld	(bc), a
2432  0A8D              l_player_hit_platform_00127:
2433  0A8D  2A 00 00    	ld	hl,(_index1)
2434  0A90  01 F0 FF    	ld	bc,0xfff0
2435  0A93  09          	add	hl,bc
2436  0A94  E5          	push	hl
2437  0A95  CD 00 00    	call	_game_obj_set
2438  0A98  F1          	pop	af
2439  0A99  3A 00 00    	ld	a,(_s_lin1)
2440  0A9C  C6 10       	add	a,0x10
2441  0A9E  4F          	ld	c, a
2442  0A9F  3A 00 00    	ld	a, (_s_col1)
2443  0AA2  47          	ld	b,a
2444  0AA3  C5          	push	bc
2445  0AA4  3E 44       	ld	a,0x44
2446  0AA6  F5          	push	af
2447  0AA7  33          	inc	sp
2448  0AA8  CD 00 00    	call	_NIRVANAP_drawT_callee
2449  0AAB              l_player_hit_platform_00129:
2450  0AAB  21 00 00    	ld	hl,_tmp0
2451  0AAE  34          	inc	(hl)
2452  0AAF  C3 39 09    	jp	l_player_hit_platform_00130
2453  0AB2              l_player_hit_platform_00134:
2454  0AB2  2E 01       	ld	l,0x01
2455  0AB4  CD 00 00    	call	_spr_brick_anim
2456  0AB7  CD 00 00    	call	_sound_hit_brick
2457  0ABA  2E 01       	ld	l,0x01
2458  0ABC  18 02       	jr	l_player_hit_platform_00140
2459  0ABE              l_player_hit_platform_00137:
2460  0ABE  2E 00       	ld	l,0x00
2461  0AC0              l_player_hit_platform_00140:
2462  0AC0  C9          	ret
2463  0AC1              	SECTION code_compiler
2464  0AC1              ;	---------------------------------
2465  0AC1              ; Function player_hit_platform_clear
2466  0AC1              ; ---------------------------------
2467  0AC1              _player_hit_platform_clear:
2468  0AC1  2A 00 00    	ld	hl,(_sprite)
2469  0AC4  26 00       	ld	h,0x00
2470  0AC6  29          	add	hl, hl
2471  0AC7  11 00 00    	ld	de,_spr_timer
2472  0ACA  19          	add	hl, de
2473  0ACB  4E          	ld	c, (hl)
2474  0ACC  23          	inc	hl
2475  0ACD  46          	ld	b, (hl)
2476  0ACE  21 04 00    	ld	hl,0x0004
2477  0AD1  E5          	push	hl
2478  0AD2  C5          	push	bc
2479  0AD3  CD 00 00    	call	_game_check_time
2480  0AD6  F1          	pop	af
2481  0AD7  F1          	pop	af
2482  0AD8  7D          	ld	a, l
2483  0AD9  B7          	or	a, a
2484  0ADA  C8          	ret	Z
2485  0ADB  2A FF FF    	ld	hl,(_player_hit_col - 1)
2486  0ADE  3A 00 00    	ld	a,(_player_hit_lin)
2487  0AE1  6F          	ld	l,a
2488  0AE2  E5          	push	hl
2489  0AE3  CD 00 00    	call	_spr_calc_index
2490  0AE6  F1          	pop	af
2491  0AE7  22 00 00    	ld	(_index1),hl
2492  0AEA  2E 00       	ld	l,0x00
2493  0AEC  CD 00 00    	call	_spr_brick_anim
2494  0AEF  21 00 00    	ld	hl,_player_hit_lin
2495  0AF2  36 00       	ld	(hl),0x00
2496  0AF4  21 00 00    	ld	hl,_player_hit_col
2497  0AF7  36 00       	ld	(hl),0x00
2498  0AF9  C9          	ret
2499  0AFA              	SECTION code_compiler
2500  0AFA              ;	---------------------------------
2501  0AFA              ; Function player_score_add
2502  0AFA              ; ---------------------------------
2503  0AFA              _player_score_add:
2504  0AFA  ED 4B 00 00 	ld	bc,(_player_score)
2505  0AFE  09          	add	hl,bc
2506  0AFF  22 00 00    	ld	(_player_score),hl
2507  0B02  3A 00 00    	ld	a,(_game_score_top)
2508  0B05  21 00 00    	ld	hl,_player_score
2509  0B08  96          	sub	a, (hl)
2510  0B09  3A 01 00    	ld	a,(_game_score_top + 1)
2511  0B0C  23          	inc	hl
2512  0B0D  9E          	sbc	a, (hl)
2513  0B0E  D2 00 00    	jp	NC,_game_print_score
2514  0B11  2A 00 00    	ld	hl,(_player_score)
2515  0B14  22 00 00    	ld	(_game_score_top),hl
2516  0B17  C3 00 00    	jp  _game_print_score
2517  0B1A              	SECTION code_compiler
2518  0B1A              ;	---------------------------------
2519  0B1A              ; Function player_check_floor
2520  0B1A              ; ---------------------------------
2521  0B1A              _player_check_floor:
2522  0B1A  CD 00 00    	call	___sdcc_enter_ix
2523  0B1D  3B          	dec	sp
2524  0B1E  2A 00 00    	ld	hl,(_sprite)
2525  0B21  26 00       	ld	h,0x00
2526  0B23  01 00 00    	ld	bc,_col
2527  0B26  09          	add	hl,bc
2528  0B27  56          	ld	d, (hl)
2529  0B28  2A 00 00    	ld	hl,(_sprite)
2530  0B2B  26 00       	ld	h,0x00
2531  0B2D  01 00 00    	ld	bc,_lin
2532  0B30  09          	add	hl,bc
2533  0B31  7E          	ld	a,(hl)
2534  0B32  C6 10       	add	a,0x10
2535  0B34  5F          	ld	e, a
2536  0B35  D5          	push	de
2537  0B36  CD 00 00    	call	_spr_calc_index
2538  0B39  F1          	pop	af
2539  0B3A  4D          	ld	c, l
2540  0B3B  44          	ld	b, h
2541  0B3C  21 00 00    	ld	hl,_scr_map
2542  0B3F  09          	add	hl, bc
2543  0B40  7E          	ld	a, (hl)
2544  0B41  DD 77 FF    	ld	(ix-1),a
2545  0B44  2A 00 00    	ld	hl,(_sprite)
2546  0B47  26 00       	ld	h,0x00
2547  0B49  11 00 00    	ld	de,_col
2548  0B4C  19          	add	hl,de
2549  0B4D  7E          	ld	a,(hl)
2550  0B4E  0F          	rrca
2551  0B4F  38 04       	jr	C,l_player_check_floor_00102
2552  0B51  0E 01       	ld	c,0x01
2553  0B53  18 06       	jr	l_player_check_floor_00103
2554  0B55              l_player_check_floor_00102:
2555  0B55  03          	inc	bc
2556  0B56  21 00 00    	ld	hl,_scr_map
2557  0B59  09          	add	hl, bc
2558  0B5A  4E          	ld	c, (hl)
2559  0B5B              l_player_check_floor_00103:
2560  0B5B  3A 00 00    	ld	a,(_s_lin0)
2561  0B5E  D6 90       	sub	a,0x90
2562  0B60  20 04       	jr	NZ,l_player_check_floor_00105
2563  0B62  DD 36 FF 3C 	ld	(ix-1),0x3c
2564  0B66              l_player_check_floor_00105:
2565  0B66  DD 7E FF    	ld	a,(ix-1)
2566  0B69  D6 30       	sub	a,0x30
2567  0B6B  38 07       	jr	C,l_player_check_floor_00110
2568  0B6D  DD 7E FF    	ld	a,(ix-1)
2569  0B70  D6 54       	sub	a,0x54
2570  0B72  38 1E       	jr	C,l_player_check_floor_00111
2571  0B74              l_player_check_floor_00110:
2572  0B74  79          	ld	a,c
2573  0B75  FE 30       	cp	a,0x30
2574  0B77  38 04       	jr	C,l_player_check_floor_00106
2575  0B79  D6 54       	sub	a,0x54
2576  0B7B  38 15       	jr	C,l_player_check_floor_00111
2577  0B7D              l_player_check_floor_00106:
2578  0B7D  2A 00 00    	ld	hl,(_sprite)
2579  0B80  26 00       	ld	h,0x00
2580  0B82  01 00 00    	ld	bc,_sprite_speed_alt
2581  0B85  09          	add	hl,bc
2582  0B86  36 02       	ld	(hl),0x02
2583  0B88  21 00 00    	ld	hl,_s_state
2584  0B8B  CB CE       	set	1, (hl)
2585  0B8D  2E 00       	ld	l,0x00
2586  0B8F  CD 50 04    	call	_player_check_stairs
2587  0B92              l_player_check_floor_00111:
2588  0B92  33          	inc	sp
2589  0B93  DD E1       	pop	ix
2590  0B95  C9          	ret
2591  0B96              	SECTION code_compiler
2592  0B96              ;	---------------------------------
2593  0B96              ; Function player_move_jump
2594  0B96              ; ---------------------------------
2595  0B96              _player_move_jump:
2596  0B96  CD 00 00    	call	___sdcc_enter_ix
2597  0B99  3B          	dec	sp
2598  0B9A  21 00 00    	ld	hl,_game_gravity
2599  0B9D  4E          	ld	c, (hl)
2600  0B9E  21 00 00    	ld	hl,_player_vel_y
2601  0BA1  7E          	ld	a, (hl)
2602  0BA2  81          	add	a, c
2603  0BA3  77          	ld	(hl), a
2604  0BA4  21 00 00    	ld	hl,_sprite_on_air
2605  0BA7  36 01       	ld	(hl),0x01
2606  0BA9  3A 00 00    	ld	a,(_player_vel_inc)
2607  0BAC  B7          	or	a, a
2608  0BAD  28 24       	jr	Z,l_player_move_jump_00106
2609  0BAF  21 00 00    	ld	hl,_dirs
2610  0BB2  CB 7E       	bit	7, (hl)
2611  0BB4  20 1D       	jr	NZ,l_player_move_jump_00106
2612  0BB6  3A 00 00    	ld	a,(_player_vel_y1)
2613  0BB9  21 00 00    	ld	hl,_player_vel_y
2614  0BBC  96          	sub	a, (hl)
2615  0BBD  E2 C2 0B    	jp	PO, l_player_move_jump_00247
2616  0BC0  EE 80       	xor	a,0x80
2617  0BC2              l_player_move_jump_00247:
2618  0BC2  F2 D3 0B    	jp	P, l_player_move_jump_00106
2619  0BC5  21 00 00    	ld	hl,_player_vel_y
2620  0BC8  CB 7E       	bit	7,(hl)
2621  0BCA  28 07       	jr	Z,l_player_move_jump_00106
2622  0BCC  36 00       	ld	(hl),0x00
2623  0BCE  21 00 00    	ld	hl,_player_vel_inc
2624  0BD1  36 00       	ld	(hl),0x00
2625  0BD3              l_player_move_jump_00106:
2626  0BD3  3E 78       	ld	a,0x78
2627  0BD5  21 00 00    	ld	hl,_player_vel_y
2628  0BD8  96          	sub	a, (hl)
2629  0BD9  E2 DE 0B    	jp	PO, l_player_move_jump_00248
2630  0BDC  EE 80       	xor	a,0x80
2631  0BDE              l_player_move_jump_00248:
2632  0BDE  F2 E6 0B    	jp	P, l_player_move_jump_00108
2633  0BE1  21 00 00    	ld	hl,_player_vel_y
2634  0BE4  36 78       	ld	(hl),0x78
2635  0BE6              l_player_move_jump_00108:
2636  0BE6  21 00 00    	ld	hl,_player_vel_y
2637  0BE9  7E          	ld	a, (hl)
2638  0BEA  EE 80       	xor	a,0x80
2639  0BEC  D6 08       	sub	a,0x08
2640  0BEE  30 02       	jr	NC,l_player_move_jump_00110
2641  0BF0  36 88       	ld	(hl),0x88
2642  0BF2              l_player_move_jump_00110:
2643  0BF2  3A 00 00    	ld	a,(_player_vel_y)
2644  0BF5  5F          	ld	e,a
2645  0BF6  17          	rla
2646  0BF7  9F          	sbc	a, a
2647  0BF8  57          	ld	d, a
2648  0BF9  CB 43       	bit	0,e
2649  0BFB  21 00 00    	ld	hl,_s_lin1
2650  0BFE  73          	ld	(hl),e
2651  0BFF  28 04       	jr	Z,l_player_move_jump_00112
2652  0C01  21 00 00    	ld	hl,_s_lin1
2653  0C04  35          	dec	(hl)
2654  0C05              l_player_move_jump_00112:
2655  0C05  2A 00 00    	ld	hl,(_sprite)
2656  0C08  26 00       	ld	h,0x00
2657  0C0A  01 00 00    	ld	bc,_lin
2658  0C0D  09          	add	hl,bc
2659  0C0E  7E          	ld	a,(hl)
2660  0C0F  DD 77 FF    	ld	(ix-1),a
2661  0C12  4D          	ld	c,l
2662  0C13  44          	ld	b,h
2663  0C14  21 00 00    	ld	hl,_s_lin1
2664  0C17  86          	add	a, (hl)
2665  0C18  77          	ld	(hl), a
2666  0C19  3E 90       	ld	a,0x90
2667  0C1B  96          	sub	a, (hl)
2668  0C1C  30 0E       	jr	NC,l_player_move_jump_00117
2669  0C1E  3E C8       	ld	a,0xc8
2670  0C20  96          	sub	a, (hl)
2671  0C21  30 04       	jr	NC,l_player_move_jump_00114
2672  0C23  36 00       	ld	(hl),0x00
2673  0C25  18 05       	jr	l_player_move_jump_00117
2674  0C27              l_player_move_jump_00114:
2675  0C27  21 00 00    	ld	hl,_s_lin1
2676  0C2A  36 90       	ld	(hl),0x90
2677  0C2C              l_player_move_jump_00117:
2678  0C2C  3A 00 00    	ld	a,(_s_lin0)
2679  0C2F  07          	rlca
2680  0C30  07          	rlca
2681  0C31  07          	rlca
2682  0C32  07          	rlca
2683  0C33  E6 0F       	and	a,0x0f
2684  0C35  DD 77 FF    	ld	(ix-1),a
2685  0C38  CB 7A       	bit	7, d
2686  0C3A  28 73       	jr	Z,l_player_move_jump_00140
2687  0C3C  21 00 00    	ld	hl,_s_state
2688  0C3F  7E          	ld	a,(hl)
2689  0C40  F6 01       	or	a,0x01
2690  0C42  E6 FD       	and	a,0xfd
2691  0C44  77          	ld	(hl),a
2692  0C45  21 00 00    	ld	hl,_s_lin1
2693  0C48  DD 7E FF    	ld	a,(ix-1)
2694  0C4B  96          	sub	a,(hl)
2695  0C4C  20 04       	jr	NZ,l_player_move_jump_00250
2696  0C4E  3E 01       	ld	a,0x01
2697  0C50  18 01       	jr	l_player_move_jump_00251
2698  0C52              l_player_move_jump_00250:
2699  0C52  AF          	xor	a,a
2700  0C53              l_player_move_jump_00251:
2701  0C53  EE 01       	xor	a,0x01
2702  0C55  28 51       	jr	Z,l_player_move_jump_00124
2703  0C57  2A 00 00    	ld	hl,(_sprite)
2704  0C5A  26 00       	ld	h,0x00
2705  0C5C  01 00 00    	ld	bc,_col
2706  0C5F  09          	add	hl,bc
2707  0C60  7E          	ld	a,(hl)
2708  0C61  F5          	push	af
2709  0C62  33          	inc	sp
2710  0C63  3A 00 00    	ld	a,(_s_lin1)
2711  0C66  F5          	push	af
2712  0C67  33          	inc	sp
2713  0C68  CD 00 00    	call	_game_check_map
2714  0C6B  F1          	pop	af
2715  0C6C  7C          	ld	a,h
2716  0C6D  B5          	or	a,l
2717  0C6E  28 28       	jr	Z,l_player_move_jump_00121
2718  0C70  CD 7A 08    	call	_player_hit_platform
2719  0C73  7D          	ld	a, l
2720  0C74  B7          	or	a, a
2721  0C75  28 19       	jr	Z,l_player_move_jump_00119
2722  0C77  2A 00 00    	ld	hl,(_sprite)
2723  0C7A  26 00       	ld	h,0x00
2724  0C7C  01 00 00    	ld	bc,_lin
2725  0C7F  09          	add	hl,bc
2726  0C80  7E          	ld	a,(hl)
2727  0C81  4D          	ld	c,l
2728  0C82  44          	ld	b,h
2729  0C83  07          	rlca
2730  0C84  07          	rlca
2731  0C85  07          	rlca
2732  0C86  07          	rlca
2733  0C87  E6 0F       	and	a,0x0f
2734  0C89  07          	rlca
2735  0C8A  07          	rlca
2736  0C8B  07          	rlca
2737  0C8C  07          	rlca
2738  0C8D  E6 F0       	and	a,0xf0
2739  0C8F  02          	ld	(bc), a
2740  0C90              l_player_move_jump_00119:
2741  0C90  21 00 00    	ld	hl,_player_vel_y
2742  0C93  36 00       	ld	(hl),0x00
2743  0C95  C3 6F 0D    	jp	l_player_move_jump_00141
2744  0C98              l_player_move_jump_00121:
2745  0C98  2A 00 00    	ld	hl,(_sprite)
2746  0C9B  26 00       	ld	h,0x00
2747  0C9D  01 00 00    	ld	bc,_lin
2748  0CA0  09          	add	hl,bc
2749  0CA1  3A 00 00    	ld	a,(_s_lin1)
2750  0CA4  77          	ld	(hl),a
2751  0CA5  C3 6F 0D    	jp	l_player_move_jump_00141
2752  0CA8              l_player_move_jump_00124:
2753  0CA8  3A 00 00    	ld	a,(_s_lin1)
2754  0CAB  02          	ld	(bc), a
2755  0CAC  C3 6F 0D    	jp	l_player_move_jump_00141
2756  0CAF              l_player_move_jump_00140:
2757  0CAF  21 00 00    	ld	hl,_s_state
2758  0CB2  7E          	ld	a,(hl)
2759  0CB3  F6 02       	or	a,0x02
2760  0CB5  E6 FE       	and	a,0xfe
2761  0CB7  77          	ld	(hl),a
2762  0CB8  21 00 00    	ld	hl,_s_lin1
2763  0CBB  7E          	ld	a, (hl)
2764  0CBC  C6 10       	add	a,0x10
2765  0CBE  77          	ld	(hl), a
2766  0CBF  DD 7E FF    	ld	a,(ix-1)
2767  0CC2  96          	sub	a,(hl)
2768  0CC3  20 04       	jr	NZ,l_player_move_jump_00252
2769  0CC5  3E 01       	ld	a,0x01
2770  0CC7  18 01       	jr	l_player_move_jump_00253
2771  0CC9              l_player_move_jump_00252:
2772  0CC9  AF          	xor	a,a
2773  0CCA              l_player_move_jump_00253:
2774  0CCA  EE 01       	xor	a,0x01
2775  0CCC  CA 67 0D    	jp	Z, l_player_move_jump_00137
2776  0CCF  2A 00 00    	ld	hl,(_sprite)
2777  0CD2  26 00       	ld	h,0x00
2778  0CD4  01 00 00    	ld	bc,_col
2779  0CD7  09          	add	hl,bc
2780  0CD8  7E          	ld	a,(hl)
2781  0CD9  F5          	push	af
2782  0CDA  33          	inc	sp
2783  0CDB  3A 00 00    	ld	a,(_s_lin1)
2784  0CDE  F5          	push	af
2785  0CDF  33          	inc	sp
2786  0CE0  CD 00 00    	call	_game_check_map
2787  0CE3  F1          	pop	af
2788  0CE4  45          	ld	b, l
2789  0CE5  5C          	ld	e, h
2790  0CE6  21 00 00    	ld	hl,_s_lin1
2791  0CE9  7E          	ld	a, (hl)
2792  0CEA  C6 F0       	add	a,0xf0
2793  0CEC  4F          	ld	c, a
2794  0CED  7B          	ld	a, e
2795  0CEE  B0          	or	a,b
2796  0CEF  28 63       	jr	Z,l_player_move_jump_00134
2797  0CF1  71          	ld	(hl), c
2798  0CF2  2E 00       	ld	l,0x00
2799  0CF4  CD 50 04    	call	_player_check_stairs
2800  0CF7  3A 00 00    	ld	a,(_player_over_stair)
2801  0CFA  B7          	or	a, a
2802  0CFB  20 05       	jr	NZ,l_player_move_jump_00127
2803  0CFD  2E 01       	ld	l,0x01
2804  0CFF  CD 50 04    	call	_player_check_stairs
2805  0D02              l_player_move_jump_00127:
2806  0D02  3A 00 00    	ld	a,(_player_over_stair)
2807  0D05  B7          	or	a, a
2808  0D06  20 31       	jr	NZ,l_player_move_jump_00132
2809  0D08  21 00 00    	ld	hl,_s_lin1
2810  0D0B  7E          	ld	a, (hl)
2811  0D0C  07          	rlca
2812  0D0D  07          	rlca
2813  0D0E  07          	rlca
2814  0D0F  07          	rlca
2815  0D10  E6 0F       	and	a,0x0f
2816  0D12  07          	rlca
2817  0D13  07          	rlca
2818  0D14  07          	rlca
2819  0D15  07          	rlca
2820  0D16  E6 F0       	and	a,0xf0
2821  0D18  77          	ld	(hl), a
2822  0D19  2A 00 00    	ld	hl,(_sprite)
2823  0D1C  26 00       	ld	h,0x00
2824  0D1E  01 00 00    	ld	bc,_lin
2825  0D21  09          	add	hl,bc
2826  0D22  5E          	ld	e,(hl)
2827  0D23  4D          	ld	c,l
2828  0D24  44          	ld	b,h
2829  0D25  21 00 00    	ld	hl,_s_lin1
2830  0D28  7E          	ld	a, (hl)
2831  0D29  93          	sub	a, e
2832  0D2A  30 09       	jr	NC,l_player_move_jump_00129
2833  0D2C  7E          	ld	a, (hl)
2834  0D2D  C6 10       	add	a,0x10
2835  0D2F  02          	ld	(bc), a
2836  0D30  2E 00       	ld	l,0x00
2837  0D32  C3 B7 0D    	jp	l_player_move_jump_00151
2838  0D35              l_player_move_jump_00129:
2839  0D35  3A 00 00    	ld	a,(_s_lin1)
2840  0D38  02          	ld	(bc), a
2841  0D39              l_player_move_jump_00132:
2842  0D39  21 00 00    	ld	hl,_player_vel_y
2843  0D3C  36 00       	ld	(hl),0x00
2844  0D3E  21 00 00    	ld	hl,_s_state
2845  0D41  7E          	ld	a,(hl)
2846  0D42  E6 FC       	and	a,+(0xfd&0xfe)
2847  0D44  77          	ld	(hl),a
2848  0D45  2A 00 00    	ld	hl,(_sprite)
2849  0D48  26 00       	ld	h,0x00
2850  0D4A  01 00 00    	ld	bc,_colint
2851  0D4D  09          	add	hl,bc
2852  0D4E  AF          	xor	a,a
2853  0D4F  77          	ld	(hl),a
2854  0D50  2E 01       	ld	l,0x01
2855  0D52  18 63       	jr	l_player_move_jump_00151
2856  0D54              l_player_move_jump_00134:
2857  0D54  21 00 00    	ld	hl,_s_lin1
2858  0D57  71          	ld	(hl), c
2859  0D58  2A 00 00    	ld	hl,(_sprite)
2860  0D5B  26 00       	ld	h,0x00
2861  0D5D  01 00 00    	ld	bc,_lin
2862  0D60  09          	add	hl,bc
2863  0D61  3A 00 00    	ld	a,(_s_lin1)
2864  0D64  77          	ld	(hl),a
2865  0D65  18 08       	jr	l_player_move_jump_00141
2866  0D67              l_player_move_jump_00137:
2867  0D67  21 00 00    	ld	hl,_s_lin1
2868  0D6A  7E          	ld	a, (hl)
2869  0D6B  C6 F0       	add	a,0xf0
2870  0D6D  77          	ld	(hl),a
2871  0D6E  02          	ld	(bc), a
2872  0D6F              l_player_move_jump_00141:
2873  0D6F  21 00 00    	ld	hl,_s_state
2874  0D72  CB 5E       	bit	3, (hl)
2875  0D74  20 27       	jr	NZ,l_player_move_jump_00147
2876  0D76  21 00 00    	ld	hl,_s_state
2877  0D79  CB 56       	bit	2, (hl)
2878  0D7B  20 20       	jr	NZ,l_player_move_jump_00147
2879  0D7D  21 00 00    	ld	hl,_dirs
2880  0D80  CB 56       	bit	2, (hl)
2881  0D82  28 09       	jr	Z,l_player_move_jump_00143
2882  0D84  21 00 00    	ld	hl,_s_state
2883  0D87  7E          	ld	a,(hl)
2884  0D88  F6 08       	or	a,0x08
2885  0D8A  E6 FB       	and	a,0xfb
2886  0D8C  77          	ld	(hl),a
2887  0D8D              l_player_move_jump_00143:
2888  0D8D  21 00 00    	ld	hl,_dirs
2889  0D90  CB 5E       	bit	3, (hl)
2890  0D92  28 09       	jr	Z,l_player_move_jump_00147
2891  0D94  21 00 00    	ld	hl,_s_state
2892  0D97  7E          	ld	a,(hl)
2893  0D98  F6 04       	or	a,0x04
2894  0D9A  E6 F7       	and	a,0xf7
2895  0D9C  77          	ld	(hl),a
2896  0D9D              l_player_move_jump_00147:
2897  0D9D  21 00 00    	ld	hl,_sprite_horizontal_check
2898  0DA0  36 01       	ld	(hl),0x01
2899  0DA2  CD 00 00    	call	_spr_move_horizontal
2900  0DA5  7D          	ld	a, l
2901  0DA6  B7          	or	a, a
2902  0DA7  28 07       	jr	Z,l_player_move_jump_00150
2903  0DA9  21 00 00    	ld	hl,_s_state
2904  0DAC  7E          	ld	a,(hl)
2905  0DAD  E6 F3       	and	a,+(0xf7&0xfb)
2906  0DAF  77          	ld	(hl),a
2907  0DB0              l_player_move_jump_00150:
2908  0DB0  21 00 00    	ld	hl,_sprite_horizontal_check
2909  0DB3  36 00       	ld	(hl),0x00
2910  0DB5  2E 00       	ld	l,0x00
2911  0DB7              l_player_move_jump_00151:
2912  0DB7  33          	inc	sp
2913  0DB8  DD E1       	pop	ix
2914  0DBA  C9          	ret
2915  0DBB              	SECTION code_compiler
2916  0DBB              ;	---------------------------------
2917  0DBB              ; Function player_open_door
2918  0DBB              ; ---------------------------------
2919  0DBB              _player_open_door:
2920  0DBB  CD 00 00    	call	___sdcc_enter_ix
2921  0DBE  0E 00       	ld	c,0x00
2922  0DC0  DD 7E 06    	ld	a,(ix+6)
2923  0DC3  D6 3C       	sub	a,0x3c
2924  0DC5  28 17       	jr	Z,l_player_open_door_00101
2925  0DC7  DD 7E 06    	ld	a,(ix+6)
2926  0DCA  D6 3D       	sub	a,0x3d
2927  0DCC  28 1F       	jr	Z,l_player_open_door_00104
2928  0DCE  DD 7E 06    	ld	a,(ix+6)
2929  0DD1  D6 3E       	sub	a,0x3e
2930  0DD3  28 27       	jr	Z,l_player_open_door_00107
2931  0DD5  DD 7E 06    	ld	a,(ix+6)
2932  0DD8  D6 3F       	sub	a,0x3f
2933  0DDA  28 2F       	jr	Z,l_player_open_door_00110
2934  0DDC  18 3A       	jr	l_player_open_door_00113
2935  0DDE              l_player_open_door_00101:
2936  0DDE  3A 00 00    	ld	a,(_player_keys)
2937  0DE1  B7          	or	a, a
2938  0DE2  28 34       	jr	Z,l_player_open_door_00113
2939  0DE4  2E 07       	ld	l,0x07
2940  0DE6  CD 00 00    	call	_zx_border_fastcall
2941  0DE9  0E 01       	ld	c,0x01
2942  0DEB  18 2B       	jr	l_player_open_door_00113
2943  0DED              l_player_open_door_00104:
2944  0DED  3A 01 00    	ld	a,(_player_keys + 0x0001)
2945  0DF0  B7          	or	a, a
2946  0DF1  28 25       	jr	Z,l_player_open_door_00113
2947  0DF3  2E 02       	ld	l,0x02
2948  0DF5  CD 00 00    	call	_zx_border_fastcall
2949  0DF8  0E 01       	ld	c,0x01
2950  0DFA  18 1C       	jr	l_player_open_door_00113
2951  0DFC              l_player_open_door_00107:
2952  0DFC  3A 02 00    	ld	a,(_player_keys + 0x0002)
2953  0DFF  B7          	or	a, a
2954  0E00  28 16       	jr	Z,l_player_open_door_00113
2955  0E02  2E 04       	ld	l,0x04
2956  0E04  CD 00 00    	call	_zx_border_fastcall
2957  0E07  0E 01       	ld	c,0x01
2958  0E09  18 0D       	jr	l_player_open_door_00113
2959  0E0B              l_player_open_door_00110:
2960  0E0B  3A 03 00    	ld	a,(_player_keys + 0x0003)
2961  0E0E  B7          	or	a, a
2962  0E0F  28 07       	jr	Z,l_player_open_door_00113
2963  0E11  2E 05       	ld	l,0x05
2964  0E13  CD 00 00    	call	_zx_border_fastcall
2965  0E16  0E 01       	ld	c,0x01
2966  0E18              l_player_open_door_00113:
2967  0E18  79          	ld	a, c
2968  0E19  B7          	or	a, a
2969  0E1A  20 06       	jr	NZ,l_player_open_door_00114
2970  0E1C  3A 00 00    	ld	a,(_game_inmune)
2971  0E1F  B7          	or	a, a
2972  0E20  28 24       	jr	Z,l_player_open_door_00117
2973  0E22              l_player_open_door_00114:
2974  0E22  3E 00       	ld	a, +((_scr_map) & 0xFF)
2975  0E24  DD 86 04    	add	a,(ix+4)
2976  0E27  4F          	ld	c, a
2977  0E28  3E 00       	ld	a, +((_scr_map) / 256)
2978  0E2A  DD 8E 05    	adc	a,(ix+5)
2979  0E2D  47          	ld	b, a
2980  0E2E  AF          	xor	a, a
2981  0E2F  02          	ld	(bc), a
2982  0E30  DD 6E 04    	ld	l,(ix+4)
2983  0E33  DD 66 05    	ld	h,(ix+5)
2984  0E36  E5          	push	hl
2985  0E37  CD 00 00    	call	_game_obj_set
2986  0E3A  F1          	pop	af
2987  0E3B  DD 6E 04    	ld	l,(ix+4)
2988  0E3E  DD 66 05    	ld	h,(ix+5)
2989  0E41  E5          	push	hl
2990  0E42  CD 00 00    	call	_spr_draw_index
2991  0E45  F1          	pop	af
2992  0E46              l_player_open_door_00117:
2993  0E46  DD E1       	pop	ix
2994  0E48  C9          	ret
2995  0E49              	SECTION code_compiler
2996  0E49              ;	---------------------------------
2997  0E49              ; Function player_lost_life
2998  0E49              ; ---------------------------------
2999  0E49              _player_lost_life:
3000  0E49  3A 07 00    	ld	a,(_lin + 0x0007)
3001  0E4C  32 00 00    	ld	(_s_lin0),a
3002  0E4F  3A 07 00    	ld	a,(_col + 0x0007)
3003  0E52  32 00 00    	ld	(_s_col0),a
3004  0E55  CD 00 00    	call	_spr_init_anim_bullets
3005  0E58  01 00 00    	ld	bc,_class+0
3006  0E5B  16 00       	ld	d,0x00
3007  0E5D              l_player_lost_life_00114:
3008  0E5D  C5          	push	bc
3009  0E5E  D5          	push	de
3010  0E5F  21 00 00    	ld	hl,0x0000
3011  0E62  E5          	push	hl
3012  0E63  AF          	xor	a, a
3013  0E64  5A          	ld	e,d
3014  0E65  57          	ld	d,a
3015  0E66  D5          	push	de
3016  0E67  CD 00 00    	call	_NIRVANAP_spriteT_callee
3017  0E6A  D1          	pop	de
3018  0E6B  C1          	pop	bc
3019  0E6C  6A          	ld	l,d
3020  0E6D  26 00       	ld	h,0x00
3021  0E6F  09          	add	hl, bc
3022  0E70  36 00       	ld	(hl),0x00
3023  0E72  14          	inc	d
3024  0E73  7A          	ld	a, d
3025  0E74  D6 08       	sub	a,0x08
3026  0E76  38 E5       	jr	C,l_player_lost_life_00114
3027  0E78  76          	halt
3028  0E79  3A 00 00    	ld	a,(_s_lin0)
3029  0E7C  C6 F0       	add	a,0xf0
3030  0E7E  47          	ld	b, a
3031  0E7F  3A 00 00    	ld	a,(_s_col0)
3032  0E82  21 00 00    	ld	hl,0x0000
3033  0E85  E5          	push	hl
3034  0E86  21 7B 03    	ld	hl,0x037b
3035  0E89  E5          	push	hl
3036  0E8A  48          	ld	c,b
3037  0E8B  47          	ld	b,a
3038  0E8C  C5          	push	bc
3039  0E8D  CD 00 00    	call	_spr_add_anim
3040  0E90  F1          	pop	af
3041  0E91  F1          	pop	af
3042  0E92  F1          	pop	af
3043  0E93  21 00 00    	ld	hl,_s_col0
3044  0E96  7E          	ld	a, (hl)
3045  0E97  D6 02       	sub	a,0x02
3046  0E99  38 18       	jr	C,l_player_lost_life_00103
3047  0E9B  46          	ld	b, (hl)
3048  0E9C  05          	dec	b
3049  0E9D  05          	dec	b
3050  0E9E  21 00 00    	ld	hl,0x0000
3051  0EA1  E5          	push	hl
3052  0EA2  21 7B 03    	ld	hl,0x037b
3053  0EA5  E5          	push	hl
3054  0EA6  C5          	push	bc
3055  0EA7  33          	inc	sp
3056  0EA8  3A 00 00    	ld	a,(_s_lin0)
3057  0EAB  F5          	push	af
3058  0EAC  33          	inc	sp
3059  0EAD  CD 00 00    	call	_spr_add_anim
3060  0EB0  F1          	pop	af
3061  0EB1  F1          	pop	af
3062  0EB2  F1          	pop	af
3063  0EB3              l_player_lost_life_00103:
3064  0EB3  3A 00 00    	ld	a,(_s_col0)
3065  0EB6  21 00 00    	ld	hl,0x0000
3066  0EB9  E5          	push	hl
3067  0EBA  21 7B 03    	ld	hl,0x037b
3068  0EBD  E5          	push	hl
3069  0EBE  F5          	push	af
3070  0EBF  33          	inc	sp
3071  0EC0  3A 00 00    	ld	a,(_s_lin0)
3072  0EC3  F5          	push	af
3073  0EC4  33          	inc	sp
3074  0EC5  CD 00 00    	call	_spr_add_anim
3075  0EC8  F1          	pop	af
3076  0EC9  F1          	pop	af
3077  0ECA  F1          	pop	af
3078  0ECB  21 00 00    	ld	hl,_s_col0
3079  0ECE  7E          	ld	a, (hl)
3080  0ECF  D6 1E       	sub	a,0x1e
3081  0ED1  30 18       	jr	NC,l_player_lost_life_00105
3082  0ED3  46          	ld	b, (hl)
3083  0ED4  04          	inc	b
3084  0ED5  04          	inc	b
3085  0ED6  21 00 00    	ld	hl,0x0000
3086  0ED9  E5          	push	hl
3087  0EDA  21 7B 03    	ld	hl,0x037b
3088  0EDD  E5          	push	hl
3089  0EDE  C5          	push	bc
3090  0EDF  33          	inc	sp
3091  0EE0  3A 00 00    	ld	a,(_s_lin0)
3092  0EE3  F5          	push	af
3093  0EE4  33          	inc	sp
3094  0EE5  CD 00 00    	call	_spr_add_anim
3095  0EE8  F1          	pop	af
3096  0EE9  F1          	pop	af
3097  0EEA  F1          	pop	af
3098  0EEB              l_player_lost_life_00105:
3099  0EEB  3A 00 00    	ld	a,(_s_lin0)
3100  0EEE  C6 10       	add	a,0x10
3101  0EF0  47          	ld	b, a
3102  0EF1  3A 00 00    	ld	a,(_s_col0)
3103  0EF4  21 00 00    	ld	hl,0x0000
3104  0EF7  E5          	push	hl
3105  0EF8  21 7B 03    	ld	hl,0x037b
3106  0EFB  E5          	push	hl
3107  0EFC  48          	ld	c,b
3108  0EFD  47          	ld	b,a
3109  0EFE  C5          	push	bc
3110  0EFF  CD 00 00    	call	_spr_add_anim
3111  0F02  F1          	pop	af
3112  0F03  F1          	pop	af
3113  0F04  F1          	pop	af
3114  0F05  2E 00       	ld	l,0x00
3115  0F07  CD 00 00    	call	_zx_border_fastcall
3116  0F0A  21 00 00    	ld	hl,_tmp
3117  0F0D  36 01       	ld	(hl),0x01
3118  0F0F              l_player_lost_life_00111:
3119  0F0F  3A 00 00    	ld	a,(_tmp)
3120  0F12  B7          	or	a, a
3121  0F13  28 2F       	jr	Z,l_player_lost_life_00113
3122  0F15  21 06 00    	ld	hl,0x0006
3123  0F18  E5          	push	hl
3124  0F19  2A 00 00    	ld	hl,(_anim_time)
3125  0F1C  E5          	push	hl
3126  0F1D  CD 00 00    	call	_game_check_time
3127  0F20  F1          	pop	af
3128  0F21  F1          	pop	af
3129  0F22  7D          	ld	a, l
3130  0F23  B7          	or	a, a
3131  0F24  28 16       	jr	Z,l_player_lost_life_00110
3132  0F26  2A 00 00    	ld	hl,(_curr_time)
3133  0F29  22 00 00    	ld	(_anim_time),hl
3134  0F2C  3A 00 00    	ld	a,(_anim_count)
3135  0F2F  B7          	or	a,a
3136  0F30  28 05       	jr	Z,l_player_lost_life_00107
3137  0F32  CD 00 00    	call	_spr_play_anim
3138  0F35  18 05       	jr	l_player_lost_life_00110
3139  0F37              l_player_lost_life_00107:
3140  0F37  21 00 00    	ld	hl,_tmp
3141  0F3A  36 00       	ld	(hl),0x00
3142  0F3C              l_player_lost_life_00110:
3143  0F3C  21 05 00    	ld	hl,0x0005
3144  0F3F  CD 00 00    	call	_z80_delay_ms_fastcall
3145  0F42  18 CB       	jr	l_player_lost_life_00111
3146  0F44              l_player_lost_life_00113:
3147  0F44  21 F4 01    	ld	hl,0x01f4
3148  0F47  CD 00 00    	call	_z80_delay_ms_fastcall
3149  0F4A  3A 00 00    	ld	a,(_game_start_scr)
3150  0F4D  32 00 00    	ld	(_scr_curr),a
3151  0F50  CD 00 00    	call	_game_round_init
3152  0F53  C9          	ret
3153  0F54              	SECTION code_compiler
3154  0F54              ;	---------------------------------
3155  0F54              ; Function player_hit
3156  0F54              ; ---------------------------------
3157  0F54              _player_hit:
3158  0F54  7D          	ld	a,l
3159  0F55  4D          	ld	c,l
3160  0F56  21 00 00    	ld	hl,_player_vita
3161  0F59  96          	sub	a, (hl)
3162  0F5A  30 17       	jr	NC,l_player_hit_00107
3163  0F5C  3A 00 00    	ld	a,(_game_inmune)
3164  0F5F  B7          	or	a, a
3165  0F60  20 06       	jr	NZ,l_player_hit_00102
3166  0F62  21 00 00    	ld	hl,_player_vita
3167  0F65  7E          	ld	a, (hl)
3168  0F66  91          	sub	a, c
3169  0F67  77          	ld	(hl), a
3170  0F68              l_player_hit_00102:
3171  0F68  2A 00 00    	ld	hl,(_curr_time)
3172  0F6B  22 00 00    	ld	(_player_hit_time),hl
3173  0F6E  CD 00 00    	call	_game_update_stats
3174  0F71  18 1F       	jr	l_player_hit_00109
3175  0F73              l_player_hit_00107:
3176  0F73  21 00 00    	ld	hl,_player_vita
3177  0F76  36 00       	ld	(hl),0x00
3178  0F78  CD 49 0E    	call	_player_lost_life
3179  0F7B  21 00 00    	ld	hl,_player_lives
3180  0F7E  7E          	ld	a, (hl)
3181  0F7F  B7          	or	a, a
3182  0F80  28 06       	jr	Z,l_player_hit_00104
3183  0F82  35          	dec	(hl)
3184  0F83  CD 00 00    	call	_game_update_stats
3185  0F86  18 0A       	jr	l_player_hit_00109
3186  0F88              l_player_hit_00104:
3187  0F88  21 00 00    	ld	hl,_player_lives
3188  0F8B  36 00       	ld	(hl),0x00
3189  0F8D  21 00 00    	ld	hl,_game_over
3190  0F90  36 01       	ld	(hl),0x01
3191  0F92              l_player_hit_00109:
3192  0F92  C9          	ret
3193  0F93              	SECTION IGNORE
3194  0000              
