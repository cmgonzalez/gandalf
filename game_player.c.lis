1     0000              MODULE game_player_c
2     0000              LINE -1, "game_player.c"
-1    0000              
0     0000              
1     0000              ;--------------------------------------------------------
2     0000              ; File Created by SDCC : free open source ANSI-C Compiler
3     0000              ; Version 3.6.5 #9958 (Mac OS X i386)
4     0000              ;--------------------------------------------------------
5     0000              ; Processed by Z88DK
6     0000              ;--------------------------------------------------------
7     0000              
8     0000              	EXTERN __divschar
9     0000              	EXTERN __divschar_callee
10    0000              	EXTERN __divsint
11    0000              	EXTERN __divsint_callee
12    0000              	EXTERN __divslong
13    0000              	EXTERN __divslong_callee
14    0000              	EXTERN __divslonglong
15    0000              	EXTERN __divslonglong_callee
16    0000              	EXTERN __divsuchar
17    0000              	EXTERN __divsuchar_callee
18    0000              	EXTERN __divuchar
19    0000              	EXTERN __divuchar_callee
20    0000              	EXTERN __divuint
21    0000              	EXTERN __divuint_callee
22    0000              	EXTERN __divulong
23    0000              	EXTERN __divulong_callee
24    0000              	EXTERN __divulonglong
25    0000              	EXTERN __divulonglong_callee
26    0000              	EXTERN __divuschar
27    0000              	EXTERN __divuschar_callee
28    0000              	EXTERN __modschar
29    0000              	EXTERN __modschar_callee
30    0000              	EXTERN __modsint
31    0000              	EXTERN __modsint_callee
32    0000              	EXTERN __modslong
33    0000              	EXTERN __modslong_callee
34    0000              	EXTERN __modslonglong
35    0000              	EXTERN __modslonglong_callee
36    0000              	EXTERN __modsuchar
37    0000              	EXTERN __modsuchar_callee
38    0000              	EXTERN __moduchar
39    0000              	EXTERN __moduchar_callee
40    0000              	EXTERN __moduint
41    0000              	EXTERN __moduint_callee
42    0000              	EXTERN __modulong
43    0000              	EXTERN __modulong_callee
44    0000              	EXTERN __modulonglong
45    0000              	EXTERN __modulonglong_callee
46    0000              	EXTERN __moduschar
47    0000              	EXTERN __moduschar_callee
48    0000              	EXTERN __mulint
49    0000              	EXTERN __mulint_callee
50    0000              	EXTERN __mullong
51    0000              	EXTERN __mullong_callee
52    0000              	EXTERN __mullonglong
53    0000              	EXTERN __mullonglong_callee
54    0000              	EXTERN __mulschar
55    0000              	EXTERN __mulschar_callee
56    0000              	EXTERN __mulsuchar
57    0000              	EXTERN __mulsuchar_callee
58    0000              	EXTERN __muluschar
59    0000              	EXTERN __muluschar_callee
60    0000              	EXTERN __rlslonglong
61    0000              	EXTERN __rlslonglong_callee
62    0000              	EXTERN __rlulonglong
63    0000              	EXTERN __rlulonglong_callee
64    0000              	EXTERN __rrslonglong
65    0000              	EXTERN __rrslonglong_callee
66    0000              	EXTERN __rrulonglong
67    0000              	EXTERN __rrulonglong_callee
68    0000              	EXTERN ___sdcc_call_hl
69    0000              	EXTERN ___sdcc_call_iy
70    0000              	EXTERN ___sdcc_enter_ix
71    0000              	EXTERN _banked_call
72    0000              	EXTERN _banked_ret
73    0000              	EXTERN ___fs2schar
74    0000              	EXTERN ___fs2schar_callee
75    0000              	EXTERN ___fs2sint
76    0000              	EXTERN ___fs2sint_callee
77    0000              	EXTERN ___fs2slong
78    0000              	EXTERN ___fs2slong_callee
79    0000              	EXTERN ___fs2slonglong
80    0000              	EXTERN ___fs2slonglong_callee
81    0000              	EXTERN ___fs2uchar
82    0000              	EXTERN ___fs2uchar_callee
83    0000              	EXTERN ___fs2uint
84    0000              	EXTERN ___fs2uint_callee
85    0000              	EXTERN ___fs2ulong
86    0000              	EXTERN ___fs2ulong_callee
87    0000              	EXTERN ___fs2ulonglong
88    0000              	EXTERN ___fs2ulonglong_callee
89    0000              	EXTERN ___fsadd
90    0000              	EXTERN ___fsadd_callee
91    0000              	EXTERN ___fsdiv
92    0000              	EXTERN ___fsdiv_callee
93    0000              	EXTERN ___fseq
94    0000              	EXTERN ___fseq_callee
95    0000              	EXTERN ___fsgt
96    0000              	EXTERN ___fsgt_callee
97    0000              	EXTERN ___fslt
98    0000              	EXTERN ___fslt_callee
99    0000              	EXTERN ___fsmul
100   0000              	EXTERN ___fsmul_callee
101   0000              	EXTERN ___fsneq
102   0000              	EXTERN ___fsneq_callee
103   0000              	EXTERN ___fssub
104   0000              	EXTERN ___fssub_callee
105   0000              	EXTERN ___schar2fs
106   0000              	EXTERN ___schar2fs_callee
107   0000              	EXTERN ___sint2fs
108   0000              	EXTERN ___sint2fs_callee
109   0000              	EXTERN ___slong2fs
110   0000              	EXTERN ___slong2fs_callee
111   0000              	EXTERN ___slonglong2fs
112   0000              	EXTERN ___slonglong2fs_callee
113   0000              	EXTERN ___uchar2fs
114   0000              	EXTERN ___uchar2fs_callee
115   0000              	EXTERN ___uint2fs
116   0000              	EXTERN ___uint2fs_callee
117   0000              	EXTERN ___ulong2fs
118   0000              	EXTERN ___ulong2fs_callee
119   0000              	EXTERN ___ulonglong2fs
120   0000              	EXTERN ___ulonglong2fs_callee
121   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
122   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
123   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
126   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
127   0000              	EXTERN ____sdcc_4_ldi_save_bc
128   0000              	EXTERN ____sdcc_4_push_hlix
129   0000              	EXTERN ____sdcc_4_push_mhl
130   0000              	EXTERN ____sdcc_lib_setmem_hl
131   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
132   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
133   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
134   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
135   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
136   0000              	EXTERN ____sdcc_ll_add_deix_hlix
137   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
138   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
139   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
140   0000              	EXTERN ____sdcc_ll_asr_hlix_a
141   0000              	EXTERN ____sdcc_ll_asr_mbc_a
142   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
143   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
144   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
145   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
146   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
147   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
148   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
149   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
150   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
151   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
152   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
153   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
155   0000              	EXTERN ____sdcc_ll_push_hlix
156   0000              	EXTERN ____sdcc_ll_push_mhl
157   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
158   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
159   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
160   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
161   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
162   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
163   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
164   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
165   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
166   0000              	EXTERN ____sdcc_load_debc_deix
167   0000              	EXTERN ____sdcc_load_dehl_deix
168   0000              	EXTERN ____sdcc_load_debc_mhl
169   0000              	EXTERN ____sdcc_load_hlde_mhl
170   0000              	EXTERN ____sdcc_store_dehl_bcix
171   0000              	EXTERN ____sdcc_store_debc_hlix
172   0000              	EXTERN ____sdcc_store_debc_mhl
173   0000              	EXTERN ____sdcc_cpu_pop_ei
174   0000              	EXTERN ____sdcc_cpu_pop_ei_jp
175   0000              	EXTERN ____sdcc_cpu_push_di
176   0000              	EXTERN ____sdcc_outi
177   0000              	EXTERN ____sdcc_outi_128
178   0000              	EXTERN ____sdcc_outi_256
179   0000              	EXTERN ____sdcc_ldi
180   0000              	EXTERN ____sdcc_ldi_128
181   0000              	EXTERN ____sdcc_ldi_256
182   0000              	EXTERN ____sdcc_4_copy_srcd_hlix_dst_deix
183   0000              	EXTERN ____sdcc_4_and_src_mbc_mhl_dst_deix
184   0000              	EXTERN ____sdcc_4_or_src_mbc_mhl_dst_deix
185   0000              	EXTERN ____sdcc_4_xor_src_mbc_mhl_dst_deix
186   0000              	EXTERN ____sdcc_4_or_src_dehl_dst_bcix
187   0000              	EXTERN ____sdcc_4_xor_src_dehl_dst_bcix
188   0000              	EXTERN ____sdcc_4_and_src_dehl_dst_bcix
189   0000              	EXTERN ____sdcc_4_xor_src_mbc_mhl_dst_debc
190   0000              	EXTERN ____sdcc_4_or_src_mbc_mhl_dst_debc
191   0000              	EXTERN ____sdcc_4_and_src_mbc_mhl_dst_debc
192   0000              	EXTERN ____sdcc_4_cpl_src_mhl_dst_debc
193   0000              	EXTERN ____sdcc_4_xor_src_debc_mhl_dst_debc
194   0000              	EXTERN ____sdcc_4_or_src_debc_mhl_dst_debc
195   0000              	EXTERN ____sdcc_4_and_src_debc_mhl_dst_debc
196   0000              	EXTERN ____sdcc_4_and_src_debc_hlix_dst_debc
197   0000              	EXTERN ____sdcc_4_or_src_debc_hlix_dst_debc
198   0000              	EXTERN ____sdcc_4_xor_src_debc_hlix_dst_debc
199   0000              
200   0000              ;--------------------------------------------------------
201   0000              ; Public variables in this module
202   0000              ;--------------------------------------------------------
203   0000              	GLOBAL _player_check_map
204   0000              	GLOBAL _player_1up
205   0000              	GLOBAL _player_init
206   0000              	GLOBAL _player_turn
207   0000              	GLOBAL _player_move
208   0000              	GLOBAL _player_check_input
209   0000              	GLOBAL _player_move_input
210   0000              	GLOBAL _player_fix_walk_lin
211   0000              	GLOBAL _player_fire
212   0000              	GLOBAL _player_collision
213   0000              	GLOBAL _player_pick_mushroom
214   0000              	GLOBAL _player_check_stairs_vertical
215   0000              	GLOBAL _player_check_stairs
216   0000              	GLOBAL _player_anim_stairs
217   0000              	GLOBAL _player_tile
218   0000              	GLOBAL _player_pick_item
219   0000              	GLOBAL _player_hit_platform
220   0000              	GLOBAL _player_hit_platform_clear
221   0000              	GLOBAL _player_score_add
222   0000              	GLOBAL _player_check_floor
223   0000              	GLOBAL _player_gasta_brick
224   0000              	GLOBAL _player_move_jump
225   0000              	GLOBAL _player_open_door
226   0000              	GLOBAL _player_lost_life
227   0000              	GLOBAL _player_damage
228   0000              ;--------------------------------------------------------
229   0000              ; Externals used
230   0000              ;--------------------------------------------------------
231   0000              	GLOBAL _ulltoa_callee
232   0000              	GLOBAL _ulltoa
233   0000              	GLOBAL _strtoull_callee
234   0000              	GLOBAL _strtoull
235   0000              	GLOBAL _strtoll_callee
236   0000              	GLOBAL _strtoll
237   0000              	GLOBAL _lltoa_callee
238   0000              	GLOBAL _lltoa
239   0000              	GLOBAL _llabs_callee
240   0000              	GLOBAL _llabs
241   0000              	GLOBAL __lldivu__callee
242   0000              	GLOBAL __lldivu_
243   0000              	GLOBAL __lldiv__callee
244   0000              	GLOBAL __lldiv_
245   0000              	GLOBAL _atoll_callee
246   0000              	GLOBAL _atoll
247   0000              	GLOBAL _realloc_unlocked_callee
248   0000              	GLOBAL _realloc_unlocked
249   0000              	GLOBAL _malloc_unlocked_fastcall
250   0000              	GLOBAL _malloc_unlocked
251   0000              	GLOBAL _free_unlocked_fastcall
252   0000              	GLOBAL _free_unlocked
253   0000              	GLOBAL _calloc_unlocked_callee
254   0000              	GLOBAL _calloc_unlocked
255   0000              	GLOBAL _aligned_alloc_unlocked_callee
256   0000              	GLOBAL _aligned_alloc_unlocked
257   0000              	GLOBAL _realloc_callee
258   0000              	GLOBAL _realloc
259   0000              	GLOBAL _malloc_fastcall
260   0000              	GLOBAL _malloc
261   0000              	GLOBAL _free_fastcall
262   0000              	GLOBAL _free
263   0000              	GLOBAL _calloc_callee
264   0000              	GLOBAL _calloc
265   0000              	GLOBAL _aligned_alloc_callee
266   0000              	GLOBAL _aligned_alloc
267   0000              	GLOBAL _utoa_callee
268   0000              	GLOBAL _utoa
269   0000              	GLOBAL _ultoa_callee
270   0000              	GLOBAL _ultoa
271   0000              	GLOBAL _system_fastcall
272   0000              	GLOBAL _system
273   0000              	GLOBAL _strtoul_callee
274   0000              	GLOBAL _strtoul
275   0000              	GLOBAL _strtol_callee
276   0000              	GLOBAL _strtol
277   0000              	GLOBAL _strtof_callee
278   0000              	GLOBAL _strtof
279   0000              	GLOBAL _strtod_callee
280   0000              	GLOBAL _strtod
281   0000              	GLOBAL _srand_fastcall
282   0000              	GLOBAL _srand
283   0000              	GLOBAL _rand
284   0000              	GLOBAL _quick_exit_fastcall
285   0000              	GLOBAL _quick_exit
286   0000              	GLOBAL _qsort_callee
287   0000              	GLOBAL _qsort
288   0000              	GLOBAL _ltoa_callee
289   0000              	GLOBAL _ltoa
290   0000              	GLOBAL _labs_fastcall
291   0000              	GLOBAL _labs
292   0000              	GLOBAL _itoa_callee
293   0000              	GLOBAL _itoa
294   0000              	GLOBAL _ftoh_callee
295   0000              	GLOBAL _ftoh
296   0000              	GLOBAL _ftog_callee
297   0000              	GLOBAL _ftog
298   0000              	GLOBAL _ftoe_callee
299   0000              	GLOBAL _ftoe
300   0000              	GLOBAL _ftoa_callee
301   0000              	GLOBAL _ftoa
302   0000              	GLOBAL _exit_fastcall
303   0000              	GLOBAL _exit
304   0000              	GLOBAL _dtoh_callee
305   0000              	GLOBAL _dtoh
306   0000              	GLOBAL _dtog_callee
307   0000              	GLOBAL _dtog
308   0000              	GLOBAL _dtoe_callee
309   0000              	GLOBAL _dtoe
310   0000              	GLOBAL _dtoa_callee
311   0000              	GLOBAL _dtoa
312   0000              	GLOBAL _bsearch_callee
313   0000              	GLOBAL _bsearch
314   0000              	GLOBAL _atol_fastcall
315   0000              	GLOBAL _atol
316   0000              	GLOBAL _atoi_fastcall
317   0000              	GLOBAL _atoi
318   0000              	GLOBAL _atof_fastcall
319   0000              	GLOBAL _atof
320   0000              	GLOBAL _atexit_fastcall
321   0000              	GLOBAL _atexit
322   0000              	GLOBAL _at_quick_exit_fastcall
323   0000              	GLOBAL _at_quick_exit
324   0000              	GLOBAL _abs_fastcall
325   0000              	GLOBAL _abs
326   0000              	GLOBAL _abort
327   0000              	GLOBAL __strtou__callee
328   0000              	GLOBAL __strtou_
329   0000              	GLOBAL __strtoi__callee
330   0000              	GLOBAL __strtoi_
331   0000              	GLOBAL __random_uniform_xor_8__fastcall
332   0000              	GLOBAL __random_uniform_xor_8_
333   0000              	GLOBAL __random_uniform_xor_32__fastcall
334   0000              	GLOBAL __random_uniform_xor_32_
335   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
336   0000              	GLOBAL __random_uniform_cmwc_8_
337   0000              	GLOBAL __shellsort__callee
338   0000              	GLOBAL __shellsort_
339   0000              	GLOBAL __quicksort__callee
340   0000              	GLOBAL __quicksort_
341   0000              	GLOBAL __insertion_sort__callee
342   0000              	GLOBAL __insertion_sort_
343   0000              	GLOBAL __ldivu__callee
344   0000              	GLOBAL __ldivu_
345   0000              	GLOBAL __ldiv__callee
346   0000              	GLOBAL __ldiv_
347   0000              	GLOBAL __divu__callee
348   0000              	GLOBAL __divu_
349   0000              	GLOBAL __div__callee
350   0000              	GLOBAL __div_
351   0000              	GLOBAL _NIRVANAP_drawTW_raw_callee
352   0000              	GLOBAL _NIRVANAP_drawTW_raw
353   0000              	GLOBAL _NIRVANAP_drawTW_callee
354   0000              	GLOBAL _NIRVANAP_drawTW
355   0000              	GLOBAL _NIRVANAP_drawW_raw_callee
356   0000              	GLOBAL _NIRVANAP_drawW_raw
357   0000              	GLOBAL _NIRVANAP_drawW_callee
358   0000              	GLOBAL _NIRVANAP_drawW
359   0000              	GLOBAL _NIRVANAP_spriteT_callee
360   0000              	GLOBAL _NIRVANAP_spriteT
361   0000              	GLOBAL _NIRVANAP_fillC_callee
362   0000              	GLOBAL _NIRVANAP_fillC
363   0000              	GLOBAL _NIRVANAP_readC_callee
364   0000              	GLOBAL _NIRVANAP_readC
365   0000              	GLOBAL _NIRVANAP_paintC_callee
366   0000              	GLOBAL _NIRVANAP_paintC
367   0000              	GLOBAL _NIRVANAP_printC_callee
368   0000              	GLOBAL _NIRVANAP_printC
369   0000              	GLOBAL _NIRVANAP_fillT_raw_callee
370   0000              	GLOBAL _NIRVANAP_fillT_raw
371   0000              	GLOBAL _NIRVANAP_fillT_callee
372   0000              	GLOBAL _NIRVANAP_fillT
373   0000              	GLOBAL _NIRVANAP_drawT_raw_callee
374   0000              	GLOBAL _NIRVANAP_drawT_raw
375   0000              	GLOBAL _NIRVANAP_drawT_callee
376   0000              	GLOBAL _NIRVANAP_drawT
377   0000              	GLOBAL _NIRVANAP_stop
378   0000              	GLOBAL _NIRVANAP_start
379   0000              	GLOBAL _debug3
380   0000              	GLOBAL _debug2
381   0000              	GLOBAL _debug
382   0000              	GLOBAL _zx_print_str
383   0000              	GLOBAL _zx_print_int
384   0000              	GLOBAL _zx_print_chr
385   0000              	GLOBAL _zx_print_bonus_time
386   0000              	GLOBAL _zx_isr
387   0000              	GLOBAL _z80_otdr_callee
388   0000              	GLOBAL _z80_otdr
389   0000              	GLOBAL _z80_otir_callee
390   0000              	GLOBAL _z80_otir
391   0000              	GLOBAL _z80_outp_callee
392   0000              	GLOBAL _z80_outp
393   0000              	GLOBAL _z80_indr_callee
394   0000              	GLOBAL _z80_indr
395   0000              	GLOBAL _z80_inir_callee
396   0000              	GLOBAL _z80_inir
397   0000              	GLOBAL _z80_inp_fastcall
398   0000              	GLOBAL _z80_inp
399   0000              	GLOBAL _z80_set_int_state_fastcall
400   0000              	GLOBAL _z80_set_int_state
401   0000              	GLOBAL _z80_get_int_state
402   0000              	GLOBAL _z80_delay_tstate_fastcall
403   0000              	GLOBAL _z80_delay_tstate
404   0000              	GLOBAL _z80_delay_ms_fastcall
405   0000              	GLOBAL _z80_delay_ms
406   0000              	GLOBAL _im2_remove_generic_callback_callee
407   0000              	GLOBAL _im2_remove_generic_callback
408   0000              	GLOBAL _im2_prepend_generic_callback_callee
409   0000              	GLOBAL _im2_prepend_generic_callback
410   0000              	GLOBAL _im2_append_generic_callback_callee
411   0000              	GLOBAL _im2_append_generic_callback
412   0000              	GLOBAL _im2_create_generic_isr_8080_callee
413   0000              	GLOBAL _im2_create_generic_isr_8080
414   0000              	GLOBAL _im2_create_generic_isr_callee
415   0000              	GLOBAL _im2_create_generic_isr
416   0000              	GLOBAL _im2_install_isr_callee
417   0000              	GLOBAL _im2_install_isr
418   0000              	GLOBAL _im2_init_fastcall
419   0000              	GLOBAL _im2_init
420   0000              	GLOBAL _intrinsic_swap_word_32_fastcall
421   0000              	GLOBAL _intrinsic_swap_word_32
422   0000              	GLOBAL _intrinsic_swap_endian_32_fastcall
423   0000              	GLOBAL _intrinsic_swap_endian_32
424   0000              	GLOBAL _intrinsic_swap_endian_16_fastcall
425   0000              	GLOBAL _intrinsic_swap_endian_16
426   0000              	GLOBAL _intrinsic_return_de
427   0000              	GLOBAL _intrinsic_return_bc
428   0000              	GLOBAL _intrinsic_exx
429   0000              	GLOBAL _intrinsic_ex_de_hl
430   0000              	GLOBAL _intrinsic_nop
431   0000              	GLOBAL _intrinsic_im_2
432   0000              	GLOBAL _intrinsic_im_1
433   0000              	GLOBAL _intrinsic_im_0
434   0000              	GLOBAL _intrinsic_retn
435   0000              	GLOBAL _intrinsic_reti
436   0000              	GLOBAL _intrinsic_halt
437   0000              	GLOBAL _intrinsic_ei
438   0000              	GLOBAL _intrinsic_di
439   0000              	GLOBAL _intrinsic_stub
440   0000              	GLOBAL _intrinsic_outi
441   0000              	GLOBAL _intrinsic_ldi
442   0000              	GLOBAL _zx_pattern_fill_callee
443   0000              	GLOBAL _zx_pattern_fill
444   0000              	GLOBAL _zx_saddrpup_fastcall
445   0000              	GLOBAL _zx_saddrpup
446   0000              	GLOBAL _zx_saddrpright_callee
447   0000              	GLOBAL _zx_saddrpright
448   0000              	GLOBAL _zx_saddrpleft_callee
449   0000              	GLOBAL _zx_saddrpleft
450   0000              	GLOBAL _zx_saddrpdown_fastcall
451   0000              	GLOBAL _zx_saddrpdown
452   0000              	GLOBAL _zx_saddrcup_fastcall
453   0000              	GLOBAL _zx_saddrcup
454   0000              	GLOBAL _zx_saddrcright_fastcall
455   0000              	GLOBAL _zx_saddrcright
456   0000              	GLOBAL _zx_saddrcleft_fastcall
457   0000              	GLOBAL _zx_saddrcleft
458   0000              	GLOBAL _zx_saddrcdown_fastcall
459   0000              	GLOBAL _zx_saddrcdown
460   0000              	GLOBAL _zx_saddr2py_fastcall
461   0000              	GLOBAL _zx_saddr2py
462   0000              	GLOBAL _zx_saddr2px_fastcall
463   0000              	GLOBAL _zx_saddr2px
464   0000              	GLOBAL _zx_saddr2cy_fastcall
465   0000              	GLOBAL _zx_saddr2cy
466   0000              	GLOBAL _zx_saddr2cx_fastcall
467   0000              	GLOBAL _zx_saddr2cx
468   0000              	GLOBAL _zx_saddr2aaddr_fastcall
469   0000              	GLOBAL _zx_saddr2aaddr
470   0000              	GLOBAL _zx_py2saddr_fastcall
471   0000              	GLOBAL _zx_py2saddr
472   0000              	GLOBAL _zx_py2aaddr_fastcall
473   0000              	GLOBAL _zx_py2aaddr
474   0000              	GLOBAL _zx_pxy2saddr_callee
475   0000              	GLOBAL _zx_pxy2saddr
476   0000              	GLOBAL _zx_pxy2aaddr_callee
477   0000              	GLOBAL _zx_pxy2aaddr
478   0000              	GLOBAL _zx_px2bitmask_fastcall
479   0000              	GLOBAL _zx_px2bitmask
480   0000              	GLOBAL _zx_cy2saddr_fastcall
481   0000              	GLOBAL _zx_cy2saddr
482   0000              	GLOBAL _zx_cy2aaddr_fastcall
483   0000              	GLOBAL _zx_cy2aaddr
484   0000              	GLOBAL _zx_cxy2saddr_callee
485   0000              	GLOBAL _zx_cxy2saddr
486   0000              	GLOBAL _zx_cxy2aaddr_callee
487   0000              	GLOBAL _zx_cxy2aaddr
488   0000              	GLOBAL _zx_bitmask2px_fastcall
489   0000              	GLOBAL _zx_bitmask2px
490   0000              	GLOBAL _zx_aaddrcup_fastcall
491   0000              	GLOBAL _zx_aaddrcup
492   0000              	GLOBAL _zx_aaddrcright_fastcall
493   0000              	GLOBAL _zx_aaddrcright
494   0000              	GLOBAL _zx_aaddrcleft_fastcall
495   0000              	GLOBAL _zx_aaddrcleft
496   0000              	GLOBAL _zx_aaddrcdown_fastcall
497   0000              	GLOBAL _zx_aaddrcdown
498   0000              	GLOBAL _zx_aaddr2saddr_fastcall
499   0000              	GLOBAL _zx_aaddr2saddr
500   0000              	GLOBAL _zx_aaddr2py_fastcall
501   0000              	GLOBAL _zx_aaddr2py
502   0000              	GLOBAL _zx_aaddr2px_fastcall
503   0000              	GLOBAL _zx_aaddr2px
504   0000              	GLOBAL _zx_aaddr2cy_fastcall
505   0000              	GLOBAL _zx_aaddr2cy
506   0000              	GLOBAL _zx_aaddr2cx_fastcall
507   0000              	GLOBAL _zx_aaddr2cx
508   0000              	GLOBAL _zx_visit_wc_pix_callee
509   0000              	GLOBAL _zx_visit_wc_pix
510   0000              	GLOBAL _zx_visit_wc_attr_callee
511   0000              	GLOBAL _zx_visit_wc_attr
512   0000              	GLOBAL _zx_scroll_wc_up_pix_callee
513   0000              	GLOBAL _zx_scroll_wc_up_pix
514   0000              	GLOBAL _zx_scroll_wc_up_attr_callee
515   0000              	GLOBAL _zx_scroll_wc_up_attr
516   0000              	GLOBAL _zx_scroll_wc_up_callee
517   0000              	GLOBAL _zx_scroll_wc_up
518   0000              	GLOBAL _zx_scroll_up_pix_callee
519   0000              	GLOBAL _zx_scroll_up_pix
520   0000              	GLOBAL _zx_scroll_up_attr_callee
521   0000              	GLOBAL _zx_scroll_up_attr
522   0000              	GLOBAL _zx_scroll_up_callee
523   0000              	GLOBAL _zx_scroll_up
524   0000              	GLOBAL _zx_cls_wc_pix_callee
525   0000              	GLOBAL _zx_cls_wc_pix
526   0000              	GLOBAL _zx_cls_wc_attr_callee
527   0000              	GLOBAL _zx_cls_wc_attr
528   0000              	GLOBAL _zx_cls_wc_callee
529   0000              	GLOBAL _zx_cls_wc
530   0000              	GLOBAL _zx_cls_pix_fastcall
531   0000              	GLOBAL _zx_cls_pix
532   0000              	GLOBAL _zx_cls_attr_fastcall
533   0000              	GLOBAL _zx_cls_attr
534   0000              	GLOBAL _zx_cls_fastcall
535   0000              	GLOBAL _zx_cls
536   0000              	GLOBAL _zx_border_fastcall
537   0000              	GLOBAL _zx_border
538   0000              	GLOBAL _zx_tape_verify_block_callee
539   0000              	GLOBAL _zx_tape_verify_block
540   0000              	GLOBAL _zx_tape_save_block_callee
541   0000              	GLOBAL _zx_tape_save_block
542   0000              	GLOBAL _zx_tape_load_block_callee
543   0000              	GLOBAL _zx_tape_load_block
544   0000              	GLOBAL _spr_destroy
545   0000              	GLOBAL _spr_colision_boss
546   0000              	GLOBAL _spr_colision_b
547   0000              	GLOBAL _spr_unflattenP1
548   0000              	GLOBAL _spr_flatten
549   0000              	GLOBAL _spr_btile_paint_back
550   0000              	GLOBAL _spr_bullet_explode
551   0000              	GLOBAL _spr_init_effects
552   0000              	GLOBAL _spr_turn_horizontal
553   0000              	GLOBAL _spr_bullets_play
554   0000              	GLOBAL _spr_play_anim
555   0000              	GLOBAL _spr_add_anim
556   0000              	GLOBAL _spr_clear_scr
557   0000              	GLOBAL _spr_page_map
558   0000              	GLOBAL _spr_page_down
559   0000              	GLOBAL _spr_page_up
560   0000              	GLOBAL _spr_page_right
561   0000              	GLOBAL _spr_page_left
562   0000              	GLOBAL _spr_tile_paint
563   0000              	GLOBAL _spr_draw_index
564   0000              	GLOBAL _spr_brick_anim
565   0000              	GLOBAL _spr_back_repaint
566   0000              	GLOBAL _spr_tile_dir
567   0000              	GLOBAL _spr_tile
568   0000              	GLOBAL _spr_paint_player
569   0000              	GLOBAL _spr_paint
570   0000              	GLOBAL _spr_move_left
571   0000              	GLOBAL _spr_move_right
572   0000              	GLOBAL _spr_move_horizontal
573   0000              	GLOBAL _spr_move_down
574   0000              	GLOBAL _spr_move_up
575   0000              	GLOBAL _spr_set_right
576   0000              	GLOBAL _spr_set_left
577   0000              	GLOBAL _spr_set_down
578   0000              	GLOBAL _spr_set_up
579   0000              	GLOBAL _spr_calc_index
580   0000              	GLOBAL _spr_chktime
581   0000              	GLOBAL _game_match_back
582   0000              	GLOBAL _game_attribs
583   0000              	GLOBAL _game_boss_clear
584   0000              	GLOBAL _game_boss_kill
585   0000              	GLOBAL _game_obj_clear
586   0000              	GLOBAL _game_obj_chk
587   0000              	GLOBAL _game_obj_set
588   0000              	GLOBAL _game_shoot_fire_boss
589   0000              	GLOBAL _game_shoot_fire
590   0000              	GLOBAL _game_add_enemy
591   0000              	GLOBAL _game_print_header
592   0000              	GLOBAL _game_check_time
593   0000              	GLOBAL _game_rotate_attrib_osd
594   0000              	GLOBAL _game_rotate_attrib
595   0000              	GLOBAL _game_colour_message
596   0000              	GLOBAL _game_paint_attrib
597   0000              	GLOBAL _game_print_score
598   0000              	GLOBAL _game_check_cell
599   0000              	GLOBAL _game_check_map
600   0000              	GLOBAL _game_loop
601   0000              	GLOBAL _game_round_init
602   0000              	GLOBAL _game_set_checkpoint
603   0000              	GLOBAL _game_start_timer
604   0000              	GLOBAL _game_update_stats
605   0000              	GLOBAL _game_print_footer
606   0000              	GLOBAL _game_fill_row
607   0000              	GLOBAL _game_fps
608   0000              	GLOBAL _game_respawn
609   0000              	GLOBAL _game_draw_screen
610   0000              	GLOBAL _boss_draw_frame
611   0000              	GLOBAL _boss_draw
612   0000              	GLOBAL _boss_turn
613   0000              	GLOBAL _enemy_avoid_dead
614   0000              	GLOBAL _enemy_avoid_fall
615   0000              	GLOBAL _enemy_kill
616   0000              	GLOBAL _enemy_respawn
617   0000              	GLOBAL _enemy_init
618   0000              	GLOBAL _enemy_move
619   0000              	GLOBAL _enemy_turn
620   0000              	GLOBAL _enemy_static
621   0000              	GLOBAL _enemy_walk
622   0000              	GLOBAL _enemy_horizontal
623   0000              	GLOBAL _enemy_vertical
624   0000              	GLOBAL _ay_reset
625   0000              	GLOBAL _ay_song_stop
626   0000              	GLOBAL _ay_song_play
627   0000              	GLOBAL _ay_fx_stop
628   0000              	GLOBAL _ay_fx_play
629   0000              	GLOBAL _ay_is_playing
630   0000              	GLOBAL _audio_menu
631   0000              	GLOBAL _audio_game_end
632   0000              	GLOBAL _audio_level_complete
633   0000              	GLOBAL _audio_level_start
634   0000              	GLOBAL _audio_lotr_lose_a_life
635   0000              	GLOBAL _audio_pierto_abierta
636   0000              	GLOBAL _audio_sin_mana
637   0000              	GLOBAL _audio_magia1
638   0000              	GLOBAL _audio_coin
639   0000              	GLOBAL _audio_golpe
640   0000              	GLOBAL _audio_salto
641   0000              	GLOBAL _audio_efecto
642   0000              	GLOBAL _audio_disparo2
643   0000              	GLOBAL _audio_disparo1
644   0000              	GLOBAL _audio_explosion1
645   0000              	GLOBAL _audio_explosion
646   0000              	GLOBAL _test_func
647   0000              	GLOBAL _test_proc
648   0000              	GLOBAL _in_mouse_kempston_wheel_delta
649   0000              	GLOBAL _in_mouse_kempston_wheel
650   0000              	GLOBAL _in_mouse_kempston_callee
651   0000              	GLOBAL _in_mouse_kempston
652   0000              	GLOBAL _in_mouse_kempston_setpos_callee
653   0000              	GLOBAL _in_mouse_kempston_setpos
654   0000              	GLOBAL _in_mouse_kempston_reset
655   0000              	GLOBAL _in_mouse_kempston_init
656   0000              	GLOBAL _in_mouse_amx_wheel_delta
657   0000              	GLOBAL _in_mouse_amx_wheel
658   0000              	GLOBAL _in_mouse_amx_callee
659   0000              	GLOBAL _in_mouse_amx
660   0000              	GLOBAL _in_mouse_amx_setpos_callee
661   0000              	GLOBAL _in_mouse_amx_setpos
662   0000              	GLOBAL _in_mouse_amx_reset
663   0000              	GLOBAL _in_mouse_amx_init_callee
664   0000              	GLOBAL _in_mouse_amx_init
665   0000              	GLOBAL _in_stick_sinclair2
666   0000              	GLOBAL _in_stick_sinclair1
667   0000              	GLOBAL _in_stick_kempston
668   0000              	GLOBAL _in_stick_fuller
669   0000              	GLOBAL _in_stick_cursor
670   0000              	GLOBAL _in_stick_keyboard_fastcall
671   0000              	GLOBAL _in_stick_keyboard
672   0000              	GLOBAL _in_wait_nokey
673   0000              	GLOBAL _in_wait_key
674   0000              	GLOBAL _in_test_key
675   0000              	GLOBAL _in_pause_fastcall
676   0000              	GLOBAL _in_pause
677   0000              	GLOBAL _in_key_scancode_fastcall
678   0000              	GLOBAL _in_key_scancode
679   0000              	GLOBAL _in_key_pressed_fastcall
680   0000              	GLOBAL _in_key_pressed
681   0000              	GLOBAL _in_inkey
682   0000              	GLOBAL _NIRVANAP_CHAR_TABLE
683   0000              	GLOBAL _NIRVANAP_WIDE_IMAGES
684   0000              	GLOBAL _NIRVANAP_TILE_IMAGES
685   0000              	GLOBAL _NIRVANAP_HOLE
686   0000              	GLOBAL _NIRVANAP_ISR_HOOK
687   0000              	GLOBAL _scan_map
688   0000              	GLOBAL _key_map
689   0000              	GLOBAL _player_lvl_table
690   0000              	GLOBAL _stp_row
691   0000              	GLOBAL _stp_col
692   0000              	GLOBAL _stp_tile
693   0000              	GLOBAL _map_paper_last_a
694   0000              	GLOBAL _map_paper_last
695   0000              	GLOBAL _map_paper_clr
696   0000              	GLOBAL _map_paper
697   0000              	GLOBAL _draw_count
698   0000              	GLOBAL _g_player_hit_right
699   0000              	GLOBAL _g_player_hit_left
700   0000              	GLOBAL _bullet_count
701   0000              	GLOBAL _spr_hack
702   0000              	GLOBAL _boss_stat
703   0000              	GLOBAL _boss_time_fire
704   0000              	GLOBAL _boss_time
705   0000              	GLOBAL _boss_tile
706   0000              	GLOBAL _boss_inc
707   0000              	GLOBAL _boss_col
708   0000              	GLOBAL _boss_lin
709   0000              	GLOBAL _bullet
710   0000              	GLOBAL _bullet_vel
711   0000              	GLOBAL _bullet_frames
712   0000              	GLOBAL _bullet_colint
713   0000              	GLOBAL _bullet_dir
714   0000              	GLOBAL _bullet_tile
715   0000              	GLOBAL _bullet_col
716   0000              	GLOBAL _bullet_lin
717   0000              	GLOBAL _bullet_col0
718   0000              	GLOBAL _bullet_lin0
719   0000              	GLOBAL _bullet_max
720   0000              	GLOBAL _bullet_class
721   0000              	GLOBAL _mush_class
722   0000              	GLOBAL _mush_index
723   0000              	GLOBAL _anim_count
724   0000              	GLOBAL _anim_respanwn
725   0000              	GLOBAL _anim_loop
726   0000              	GLOBAL _anim_end
727   0000              	GLOBAL _anim_int
728   0000              	GLOBAL _anim_tile
729   0000              	GLOBAL _anim_col
730   0000              	GLOBAL _anim_lin
731   0000              	GLOBAL _map_heigth
732   0000              	GLOBAL _map_width
733   0000              	GLOBAL _scr_curr
734   0000              	GLOBAL _sprite_kind
735   0000              	GLOBAL _scr_obj1
736   0000              	GLOBAL _scr_obj0
737   0000              	GLOBAL _scr_map
738   0000              	GLOBAL _sprite_speed_alt
739   0000              	GLOBAL _spr_init
740   0000              	GLOBAL _spr_map_tile
741   0000              	GLOBAL _sprite_frames
742   0000              	GLOBAL _sprite_speed
743   0000              	GLOBAL _screen_ink
744   0000              	GLOBAL _screen_paper
745   0000              	GLOBAL _player_onstair
746   0000              	GLOBAL _game_start_scr
747   0000              	GLOBAL _game_respawn_tile
748   0000              	GLOBAL _game_respawn_index
749   0000              	GLOBAL _game_respawn_time
750   0000              	GLOBAL _game_score_top
751   0000              	GLOBAL _player_coins
752   0000              	GLOBAL _player_lives
753   0000              	GLOBAL _game_over
754   0000              	GLOBAL _game_sound
755   0000              	GLOBAL _game_inf_lives
756   0000              	GLOBAL _game_inmune
757   0000              	GLOBAL _sprite_curr_index
758   0000              	GLOBAL _spr_count
759   0000              	GLOBAL _bullet_time
760   0000              	GLOBAL _anim_time
761   0000              	GLOBAL _frame_time
762   0000              	GLOBAL _curr_time
763   0000              	GLOBAL _s_state
764   0000              	GLOBAL _attrib_osd
765   0000              	GLOBAL _attrib_hl
766   0000              	GLOBAL _attrib
767   0000              	GLOBAL _zx_val_asm
768   0000              	GLOBAL _enemies
769   0000              	GLOBAL _tmp_ui
770   0000              	GLOBAL _tmp_sc
771   0000              	GLOBAL _tmp_uc
772   0000              	GLOBAL _tmp1
773   0000              	GLOBAL _tmp0
774   0000              	GLOBAL _tmp
775   0000              	GLOBAL _index1
776   0000              	GLOBAL _index0
777   0000              	GLOBAL _loop_count
778   0000              	GLOBAL _s_class
779   0000              	GLOBAL _s_col1
780   0000              	GLOBAL _s_col0
781   0000              	GLOBAL _s_lin1
782   0000              	GLOBAL _s_lin0
783   0000              	GLOBAL _s_tile1
784   0000              	GLOBAL _s_tile0
785   0000              	GLOBAL _player_brick_time
786   0000              	GLOBAL _player_hit_count
787   0000              	GLOBAL _game_debug
788   0000              	GLOBAL _sprite_horizontal_check
789   0000              	GLOBAL _sprite_on_air
790   0000              	GLOBAL _sprite
791   0000              	GLOBAL _fps
792   0000              	GLOBAL _menu_curr_sel
793   0000              	GLOBAL _game_2buttons
794   0000              	GLOBAL _game_respawn_curr_time
795   0000              	GLOBAL _game_round_up
796   0000              	GLOBAL _game_mush_count
797   0000              	GLOBAL _game_boss_fix
798   0000              	GLOBAL _game_boss_hit
799   0000              	GLOBAL _game_boss_alive
800   0000              	GLOBAL _game_boss
801   0000              	GLOBAL _game_world
802   0000              	GLOBAL _game_gravity
803   0000              	GLOBAL _player_onfire
804   0000              	GLOBAL _player_anim_stair
805   0000              	GLOBAL _player_hit_time
806   0000              	GLOBAL _game_checkpoint_scr
807   0000              	GLOBAL _game_checkpoint_lin
808   0000              	GLOBAL _game_checkpoint_col
809   0000              	GLOBAL _player_lin_scr
810   0000              	GLOBAL _player_col_scr
811   0000              	GLOBAL _player_lvl
812   0000              	GLOBAL _player_int
813   0000              	GLOBAL _player_str
814   0000              	GLOBAL _player_max_vita
815   0000              	GLOBAL _player_max_mana
816   0000              	GLOBAL _player_vita
817   0000              	GLOBAL _player_mana
818   0000              	GLOBAL _player_keys
819   0000              	GLOBAL _player_vel_inc
820   0000              	GLOBAL _player_vel_y1
821   0000              	GLOBAL _player_vel_y0
822   0000              	GLOBAL _player_vel_y
823   0000              	GLOBAL _player_vel_x
824   0000              	GLOBAL _player_score
825   0000              	GLOBAL _last_time
826   0000              	GLOBAL _spr_timer
827   0000              	GLOBAL _jump_lin
828   0000              	GLOBAL _player_hit_col
829   0000              	GLOBAL _player_hit_lin
830   0000              	GLOBAL _colint
831   0000              	GLOBAL _col
832   0000              	GLOBAL _tbuffer
833   0000              	GLOBAL _lin
834   0000              	GLOBAL _tile
835   0000              	GLOBAL _state_a
836   0000              	GLOBAL _state
837   0000              	GLOBAL _class
838   0000              	GLOBAL _dirs_alt
839   0000              	GLOBAL _dirs
840   0000              	GLOBAL _k2
841   0000              	GLOBAL _k1
842   0000              	GLOBAL _joyfunc2
843   0000              	GLOBAL _joyfunc1
844   0000              	GLOBAL _btiles
845   0000              	GLOBAL _spec128
846   0000              	GLOBAL _GLOBAL_ZX_PORT_7FFD
847   0000              	GLOBAL _GLOBAL_ZX_PORT_1FFD
848   0000              	GLOBAL _GLOBAL_ZX_PORT_FE
849   0000              	GLOBAL _ay_song_06_ciel
850   0000              	GLOBAL _ay_song_04_sunflower
851   0000              	GLOBAL _ay_song_04_lotr_level_start
852   0000              	GLOBAL _ay_song_04_lotr_level_complete
853   0000              	GLOBAL _ay_song_04_lotr_lose_a_life
854   0000              	GLOBAL _ay_song_04_lotr
855   0000              	GLOBAL _ay_fx_06_explosion1
856   0000              	GLOBAL _ay_fx_06_efecto
857   0000              	GLOBAL _ay_fx_06_disparo2
858   0000              	GLOBAL _ay_fx_06_disparo1
859   0000              	GLOBAL _ay_fx_04_sin_mana
860   0000              	GLOBAL _ay_fx_04_salto
861   0000              	GLOBAL _ay_fx_04_pierto_abierta
862   0000              	GLOBAL _ay_fx_04_magia1
863   0000              	GLOBAL _ay_fx_04_golpe
864   0000              	GLOBAL _ay_fx_04_explosion
865   0000              	GLOBAL _ay_fx_04_dano_por_toque
866   0000              	GLOBAL _ay_fx_04_coin
867   0000              	GLOBAL _world0_h
868   0000              	GLOBAL _world0_w
869   0000              	GLOBAL _world0
870   0000              	GLOBAL _paper0
871   0000              	GLOBAL _lenght0
872   0000              	GLOBAL _start_scr0
873   0000              ;--------------------------------------------------------
874   0000              ; special function registers
875   0000              ;--------------------------------------------------------
876   0000              defc _IO_FE	=	0x00fe
877   0000              defc _IO_1FFD	=	0x1ffd
878   0000              defc _IO_7FFD	=	0x7ffd
879   0000              ;--------------------------------------------------------
880   0000              ; ram data
881   0000              ;--------------------------------------------------------
882   0000              	SECTION bss_compiler
883   0000              ;--------------------------------------------------------
884   0000              ; ram data
885   0000              ;--------------------------------------------------------
886   0000              
887   0000              IF 0
888   0000              
889   0000              ; .area _INITIALIZED removed by z88dk
890   0000              
891   0000              
892   0000              ENDIF
893   0000              
894   0000              ;--------------------------------------------------------
895   0000              ; absolute external ram data
896   0000              ;--------------------------------------------------------
897   0000              	SECTION IGNORE
898   0000              ;--------------------------------------------------------
899   0000              ; global & static initialisations
900   0000              ;--------------------------------------------------------
901   0000              	SECTION code_crt_init
902   0000              ;--------------------------------------------------------
903   0000              ; Home
904   0000              ;--------------------------------------------------------
905   0000              	SECTION IGNORE
906   0000              ;--------------------------------------------------------
907   0000              ; code
908   0000              ;--------------------------------------------------------
909   0000              	SECTION code_compiler
910   0000              ;	---------------------------------
911   0000              ; Function player_init
912   0000              ; ---------------------------------
913   0000              _player_init:
914   0000  CD 00 00    	call	___sdcc_enter_ix
915   0003  21 07 00    	ld	hl, +(_class + 0x0007)
916   0006  36 00       	ld	(hl),0x00
917   0008  21 07 00    	ld	hl, +(_tile + 0x0007)
918   000B  DD 7E 06    	ld	a,(ix+6)
919   000E  77          	ld	(hl), a
920   000F  21 07 00    	ld	hl, +(_lin + 0x0007)
921   0012  DD 7E 04    	ld	a,(ix+4)
922   0015  77          	ld	(hl), a
923   0016  21 07 00    	ld	hl, +(_col + 0x0007)
924   0019  DD 7E 05    	ld	a,(ix+5)
925   001C  77          	ld	(hl), a
926   001D  21 07 00    	ld	hl, +(_colint + 0x0007)
927   0020  36 00       	ld	(hl),0x00
928   0022  21 07 00    	ld	hl, +(_state + 0x0007)
929   0025  36 00       	ld	(hl),0x00
930   0027  01 07 00    	ld	bc,_state_a+7
931   002A  AF          	xor	a, a
932   002B  02          	ld	(bc), a
933   002C  21 07 00    	ld	hl, +(_jump_lin + 0x0007)
934   002F  DD 7E 04    	ld	a,(ix+4)
935   0032  77          	ld	(hl), a
936   0033  ED 5B 00 00 	ld	de,(_curr_time)
937   0037  ED 53 0E 00 	ld	(_last_time + 0x000e),de
938   003B  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
939   003E  36 00       	ld	(hl),0x00
940   0040  0A          	ld	a, (bc)
941   0041  F6 11       	or	a,+(0x01|0x10)
942   0043  02          	ld	(bc),a
943   0044  21 00 00    	ld	hl,_player_hit_col
944   0047  36 00       	ld	(hl),0x00
945   0049  21 00 00    	ld	hl,_player_hit_lin
946   004C  36 00       	ld	(hl),0x00
947   004E  21 00 00    	ld	hl,_player_onstair
948   0051  36 00       	ld	(hl),0x00
949   0053  21 00 00    	ld	hl,_player_onfire
950   0056  36 00       	ld	(hl),0x00
951   0058  DD 66 05    	ld	h,(ix+5)
952   005B  DD 6E 04    	ld	l,(ix+4)
953   005E  E5          	push	hl
954   005F  DD 56 06    	ld	d,(ix+6)
955   0062  1E 07       	ld	e,0x07
956   0064  D5          	push	de
957   0065  CD 00 00    	call	_NIRVANAP_spriteT_callee
958   0068  DD E1       	pop	ix
959   006A  C9          	ret
960   006B              	SECTION code_compiler
961   006B              ;	---------------------------------
962   006B              ; Function player_turn
963   006B              ; ---------------------------------
964   006B              _player_turn:
965   006B  21 00 00    	ld	hl,_sprite
966   006E  CD 00 00    	call	_spr_chktime
967   0071  7D          	ld	a, l
968   0072  B7          	or	a, a
969   0073  C8          	ret	Z
970   0074  21 00 00    	ld	hl,_k1
971   0077  E5          	push	hl
972   0078  2A 00 00    	ld	hl,(_joyfunc1)
973   007B  CD 00 00    	call	___sdcc_call_hl
974   007E  F1          	pop	af
975   007F  7D          	ld	a,l
976   0080  32 00 00    	ld	(_dirs),a
977   0083  21 00 00    	ld	hl,_k2
978   0086  E5          	push	hl
979   0087  2A 00 00    	ld	hl,(_joyfunc2)
980   008A  CD 00 00    	call	___sdcc_call_hl
981   008D  F1          	pop	af
982   008E  7D          	ld	a,l
983   008F  32 00 00    	ld	(_dirs_alt),a
984   0092  3A 07 00    	ld	a,(_lin + 0x0007)
985   0095  32 00 00    	ld	(_s_lin0),a
986   0098  3A 07 00    	ld	a,(_col + 0x0007)
987   009B  32 00 00    	ld	(_s_col0),a
988   009E  3A 07 00    	ld	a,(_state + 0x0007)
989   00A1  32 00 00    	ld	(_s_state),a
990   00A4  21 00 00    	ld	hl,_s_class
991   00A7  36 00       	ld	(hl),0x00
992   00A9  CD B6 00    	call	_player_move
993   00AC  CD 8E 03    	call	_player_collision
994   00AF  3A 00 00    	ld	a,(_s_state)
995   00B2  32 07 00    	ld	((_state + 0x0007)),a
996   00B5  C9          	ret
997   00B6              	SECTION code_compiler
998   00B6              ;	---------------------------------
999   00B6              ; Function player_move
1000  00B6              ; ---------------------------------
1001  00B6              _player_move:
1002  00B6  CD 18 03    	call	_player_fire
1003  00B9  21 00 00    	ld	hl,_s_state
1004  00BC  CB 46       	bit	0, (hl)
1005  00BE  20 07       	jr	NZ,l_player_move_00105
1006  00C0  21 00 00    	ld	hl,_s_state
1007  00C3  CB 4E       	bit	1, (hl)
1008  00C5  28 0A       	jr	Z,l_player_move_00106
1009  00C7              l_player_move_00105:
1010  00C7  21 00 00    	ld	hl,_sprite_on_air
1011  00CA  36 01       	ld	(hl),0x01
1012  00CC  CD F0 0D    	call	_player_move_jump
1013  00CF  18 17       	jr	l_player_move_00107
1014  00D1              l_player_move_00106:
1015  00D1  21 00 00    	ld	hl,_sprite_on_air
1016  00D4  36 00       	ld	(hl),0x00
1017  00D6  3A 00 00    	ld	a,(_player_onfire)
1018  00D9  B7          	or	a, a
1019  00DA  20 03       	jr	NZ,l_player_move_00102
1020  00DC  CD 84 01    	call	_player_move_input
1021  00DF              l_player_move_00102:
1022  00DF  3A 00 00    	ld	a,(_player_onstair)
1023  00E2  B7          	or	a, a
1024  00E3  20 03       	jr	NZ,l_player_move_00107
1025  00E5  CD 70 0C    	call	_player_check_floor
1026  00E8              l_player_move_00107:
1027  00E8  3A 00 00    	ld	a,(_player_onfire)
1028  00EB  B7          	or	a, a
1029  00EC  20 0C       	jr	NZ,l_player_move_00116
1030  00EE  CD 00 00    	call	_spr_paint_player
1031  00F1  7D          	ld	a, l
1032  00F2  B7          	or	a, a
1033  00F3  28 39       	jr	Z,l_player_move_00117
1034  00F5  CD FD 06    	call	_player_check_map
1035  00F8  18 34       	jr	l_player_move_00117
1036  00FA              l_player_move_00116:
1037  00FA  CD 00 00    	call	_spr_back_repaint
1038  00FD  3A 07 00    	ld	a,(_state_a + 0x0007)
1039  0100  CB 67       	bit	4, a
1040  0102  28 10       	jr	Z,l_player_move_00112
1041  0104  21 07 00    	ld	hl,+(_col + 0x0007)
1042  0107  46          	ld	b, (hl)
1043  0108  21 07 00    	ld	hl,+(_lin + 0x0007)
1044  010B  4E          	ld	c, (hl)
1045  010C  C5          	push	bc
1046  010D  21 07 D0    	ld	hl,0xd007
1047  0110  E5          	push	hl
1048  0111  CD 00 00    	call	_NIRVANAP_spriteT_callee
1049  0114              l_player_move_00112:
1050  0114  3A 07 00    	ld	a,(_state_a + 0x0007)
1051  0117  CB 5F       	bit	3, a
1052  0119  28 10       	jr	Z,l_player_move_00114
1053  011B  21 07 00    	ld	hl,+(_col + 0x0007)
1054  011E  56          	ld	d, (hl)
1055  011F  21 07 00    	ld	hl,+(_lin + 0x0007)
1056  0122  5E          	ld	e, (hl)
1057  0123  D5          	push	de
1058  0124  21 07 D1    	ld	hl,0xd107
1059  0127  E5          	push	hl
1060  0128  CD 00 00    	call	_NIRVANAP_spriteT_callee
1061  012B              l_player_move_00114:
1062  012B  CD FD 06    	call	_player_check_map
1063  012E              l_player_move_00117:
1064  012E  3A 00 00    	ld	a,(_player_hit_lin)
1065  0131  B7          	or	a, a
1066  0132  28 03       	jr	Z,l_player_move_00119
1067  0134  CD D4 0B    	call	_player_hit_platform_clear
1068  0137              l_player_move_00119:
1069  0137  2E 00       	ld	l,0x00
1070  0139  C9          	ret
1071  013A              	SECTION code_compiler
1072  013A              ;	---------------------------------
1073  013A              ; Function player_check_input
1074  013A              ; ---------------------------------
1075  013A              _player_check_input:
1076  013A  21 00 00    	ld	hl,_dirs
1077  013D  CB 56       	bit	2, (hl)
1078  013F  28 0C       	jr	Z,l_player_check_input_00102
1079  0141  21 00 00    	ld	hl,_dirs
1080  0144  CB 5E       	bit	3, (hl)
1081  0146  28 05       	jr	Z,l_player_check_input_00102
1082  0148  21 00 00    	ld	hl,_dirs
1083  014B  36 00       	ld	(hl),0x00
1084  014D              l_player_check_input_00102:
1085  014D  21 00 00    	ld	hl,_dirs
1086  0150  7E          	ld	a, (hl)
1087  0151  CB 07       	rlc	a
1088  0153  E6 01       	and	a,0x01
1089  0155  CB 47       	bit	0, a
1090  0157  20 28       	jr	NZ,l_player_check_input_00107
1091  0159  CB 56       	bit	2, (hl)
1092  015B  20 24       	jr	NZ,l_player_check_input_00107
1093  015D  21 00 00    	ld	hl,_dirs
1094  0160  CB 5E       	bit	3, (hl)
1095  0162  20 1D       	jr	NZ,l_player_check_input_00107
1096  0164  21 00 00    	ld	hl,_dirs
1097  0167  CB 46       	bit	0, (hl)
1098  0169  20 16       	jr	NZ,l_player_check_input_00107
1099  016B  21 00 00    	ld	hl,_dirs
1100  016E  CB 4E       	bit	1, (hl)
1101  0170  20 0F       	jr	NZ,l_player_check_input_00107
1102  0172  3A 00 00    	ld	a,(_dirs_alt)
1103  0175  CB 07       	rlc	a
1104  0177  E6 01       	and	a,0x01
1105  0179  CB 47       	bit	0, a
1106  017B  20 04       	jr	NZ,l_player_check_input_00107
1107  017D  2E 00       	ld	l,0x00
1108  017F  18 02       	jr	l_player_check_input_00108
1109  0181              l_player_check_input_00107:
1110  0181  2E 01       	ld	l,0x01
1111  0183              l_player_check_input_00108:
1112  0183  C9          	ret
1113  0184              	SECTION code_compiler
1114  0184              ;	---------------------------------
1115  0184              ; Function player_move_input
1116  0184              ; ---------------------------------
1117  0184              _player_move_input:
1118  0184  CD 3A 01    	call	_player_check_input
1119  0187  7D          	ld	a, l
1120  0188  B7          	or	a, a
1121  0189  CA D8 02    	jp	Z, l_player_move_input_00145
1122  018C  3A 00 00    	ld	a,(_game_2buttons)
1123  018F  B7          	or	a, a
1124  0190  28 07       	jr	Z,l_player_move_input_00102
1125  0192  3A 00 00    	ld	a,(_dirs)
1126  0195  E6 80       	and	a,0x80
1127  0197  18 16       	jr	l_player_move_input_00103
1128  0199              l_player_move_input_00102:
1129  0199  21 00 00    	ld	hl,_dirs
1130  019C  7E          	ld	a, (hl)
1131  019D  CB 07       	rlc	a
1132  019F  E6 01       	and	a,0x01
1133  01A1  CB 47       	bit	0, a
1134  01A3  28 04       	jr	Z,l_player_move_input_00149
1135  01A5  CB 46       	bit	0, (hl)
1136  01A7  20 04       	jr	NZ,l_player_move_input_00150
1137  01A9              l_player_move_input_00149:
1138  01A9  3E 00       	ld	a,0x00
1139  01AB  18 02       	jr	l_player_move_input_00151
1140  01AD              l_player_move_input_00150:
1141  01AD  3E 01       	ld	a,0x01
1142  01AF              l_player_move_input_00151:
1143  01AF              l_player_move_input_00103:
1144  01AF  B7          	or	a, a
1145  01B0  28 37       	jr	Z,l_player_move_input_00105
1146  01B2  21 00 00    	ld	hl,_player_vel_inc
1147  01B5  36 01       	ld	(hl),0x01
1148  01B7  CD 00 00    	call	_audio_salto
1149  01BA  21 00 00    	ld	hl,_player_onstair
1150  01BD  36 00       	ld	(hl),0x00
1151  01BF  21 00 00    	ld	hl,_s_state
1152  01C2  CD 00 00    	call	_spr_set_up
1153  01C5  3A 07 00    	ld	a,(_lin + 0x0007)
1154  01C8  32 07 00    	ld	(_jump_lin+7),a
1155  01CB  3A 00 00    	ld	a,(_s_state)
1156  01CE  32 07 00    	ld	((_state + 0x0007)),a
1157  01D1  21 64 08    	ld	hl,0x0864
1158  01D4  E5          	push	hl
1159  01D5  CD DC 06    	call	_player_tile
1160  01D8  F1          	pop	af
1161  01D9  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
1162  01DC  36 02       	ld	(hl),0x02
1163  01DE  3A 00 00    	ld	a,(_player_vel_y0)
1164  01E1  32 00 00    	ld	(_player_vel_y),a
1165  01E4  2E 01       	ld	l,0x01
1166  01E6  C3 FE 02    	jp	l_player_move_input_00147
1167  01E9              l_player_move_input_00105:
1168  01E9  21 00 00    	ld	hl,_dirs
1169  01EC  CB 5E       	bit	3, (hl)
1170  01EE  28 20       	jr	Z,l_player_move_input_00109
1171  01F0  CD FF 02    	call	_player_fix_walk_lin
1172  01F3  21 00 00    	ld	hl,_s_state
1173  01F6  CD 00 00    	call	_spr_set_right
1174  01F9  01 07 00    	ld	bc,_state_a+7
1175  01FC  0A          	ld	a, (bc)
1176  01FD  F6 10       	or	a,0x10
1177  01FF  E6 F7       	and	a,0xf7
1178  0201  02          	ld	(bc),a
1179  0202  3A 00 00    	ld	a,(_player_onstair)
1180  0205  B7          	or	a, a
1181  0206  28 05       	jr	Z,l_player_move_input_00107
1182  0208  2E 00       	ld	l,0x00
1183  020A  CD 34 06    	call	_player_check_stairs
1184  020D              l_player_move_input_00107:
1185  020D  CD 00 00    	call	_spr_move_horizontal
1186  0210              l_player_move_input_00109:
1187  0210  21 00 00    	ld	hl,_dirs
1188  0213  CB 56       	bit	2, (hl)
1189  0215  28 20       	jr	Z,l_player_move_input_00113
1190  0217  CD FF 02    	call	_player_fix_walk_lin
1191  021A  21 00 00    	ld	hl,_s_state
1192  021D  CD 00 00    	call	_spr_set_left
1193  0220  01 07 00    	ld	bc,_state_a+7
1194  0223  0A          	ld	a, (bc)
1195  0224  F6 08       	or	a,0x08
1196  0226  E6 EF       	and	a,0xef
1197  0228  02          	ld	(bc),a
1198  0229  3A 00 00    	ld	a,(_player_onstair)
1199  022C  B7          	or	a, a
1200  022D  28 05       	jr	Z,l_player_move_input_00111
1201  022F  2E 00       	ld	l,0x00
1202  0231  CD 34 06    	call	_player_check_stairs
1203  0234              l_player_move_input_00111:
1204  0234  CD 00 00    	call	_spr_move_horizontal
1205  0237              l_player_move_input_00113:
1206  0237  21 00 00    	ld	hl,_dirs
1207  023A  CB 46       	bit	0, (hl)
1208  023C  28 39       	jr	Z,l_player_move_input_00125
1209  023E  2E 00       	ld	l,0x00
1210  0240  CD 34 06    	call	_player_check_stairs
1211  0243  3A 00 00    	ld	a,(_player_onstair)
1212  0246  B7          	or	a, a
1213  0247  20 10       	jr	NZ,l_player_move_input_00117
1214  0249  2E 01       	ld	l,0x01
1215  024B  CD 34 06    	call	_player_check_stairs
1216  024E  3A 00 00    	ld	a,(_player_onstair)
1217  0251  B7          	or	a, a
1218  0252  20 05       	jr	NZ,l_player_move_input_00117
1219  0254  2E FE       	ld	l,0xfe
1220  0256  CD 87 05    	call	_player_check_stairs_vertical
1221  0259              l_player_move_input_00117:
1222  0259  3A 00 00    	ld	a,(_player_onstair)
1223  025C  B7          	or	a, a
1224  025D  28 05       	jr	Z,l_player_move_input_00122
1225  025F  CD 00 00    	call	_spr_move_up
1226  0262  18 13       	jr	l_player_move_input_00125
1227  0264              l_player_move_input_00122:
1228  0264  21 00 00    	ld	hl,_dirs
1229  0267  CB 5E       	bit	3, (hl)
1230  0269  20 0C       	jr	NZ,l_player_move_input_00125
1231  026B  21 00 00    	ld	hl,_dirs
1232  026E  CB 56       	bit	2, (hl)
1233  0270  20 05       	jr	NZ,l_player_move_input_00125
1234  0272  2E 00       	ld	l,0x00
1235  0274  C3 FE 02    	jp	l_player_move_input_00147
1236  0277              l_player_move_input_00125:
1237  0277  21 00 00    	ld	hl,_dirs
1238  027A  CB 4E       	bit	1, (hl)
1239  027C  28 38       	jr	Z,l_player_move_input_00137
1240  027E  2E 00       	ld	l,0x00
1241  0280  CD 34 06    	call	_player_check_stairs
1242  0283  3A 00 00    	ld	a,(_player_onstair)
1243  0286  B7          	or	a, a
1244  0287  20 10       	jr	NZ,l_player_move_input_00129
1245  0289  2E 01       	ld	l,0x01
1246  028B  CD 34 06    	call	_player_check_stairs
1247  028E  3A 00 00    	ld	a,(_player_onstair)
1248  0291  B7          	or	a, a
1249  0292  20 05       	jr	NZ,l_player_move_input_00129
1250  0294  2E 12       	ld	l,0x12
1251  0296  CD 87 05    	call	_player_check_stairs_vertical
1252  0299              l_player_move_input_00129:
1253  0299  3A 00 00    	ld	a,(_player_onstair)
1254  029C  B7          	or	a, a
1255  029D  28 05       	jr	Z,l_player_move_input_00134
1256  029F  CD 00 00    	call	_spr_move_down
1257  02A2  18 12       	jr	l_player_move_input_00137
1258  02A4              l_player_move_input_00134:
1259  02A4  21 00 00    	ld	hl,_dirs
1260  02A7  CB 5E       	bit	3, (hl)
1261  02A9  20 0B       	jr	NZ,l_player_move_input_00137
1262  02AB  21 00 00    	ld	hl,_dirs
1263  02AE  CB 56       	bit	2, (hl)
1264  02B0  20 04       	jr	NZ,l_player_move_input_00137
1265  02B2  2E 00       	ld	l,0x00
1266  02B4  18 48       	jr	l_player_move_input_00147
1267  02B6              l_player_move_input_00137:
1268  02B6  3A 00 00    	ld	a,(_s_state)
1269  02B9  32 07 00    	ld	((_state + 0x0007)),a
1270  02BC  3A 00 00    	ld	a,(_player_onstair)
1271  02BF  B7          	or	a, a
1272  02C0  28 0A       	jr	Z,l_player_move_input_00139
1273  02C2  21 72 00    	ld	hl,0x0072
1274  02C5  E5          	push	hl
1275  02C6  CD DC 06    	call	_player_tile
1276  02C9  F1          	pop	af
1277  02CA  18 08       	jr	l_player_move_input_00140
1278  02CC              l_player_move_input_00139:
1279  02CC  21 60 08    	ld	hl,0x0860
1280  02CF  E5          	push	hl
1281  02D0  CD DC 06    	call	_player_tile
1282  02D3  F1          	pop	af
1283  02D4              l_player_move_input_00140:
1284  02D4  2E 01       	ld	l,0x01
1285  02D6  18 26       	jr	l_player_move_input_00147
1286  02D8              l_player_move_input_00145:
1287  02D8  21 07 00    	ld	hl, +(_colint + 0x0007)
1288  02DB  36 00       	ld	(hl),0x00
1289  02DD  3A 00 00    	ld	a,(_player_onstair)
1290  02E0  B7          	or	a, a
1291  02E1  28 0A       	jr	Z,l_player_move_input_00142
1292  02E3  21 72 00    	ld	hl,0x0072
1293  02E6  E5          	push	hl
1294  02E7  CD DC 06    	call	_player_tile
1295  02EA  F1          	pop	af
1296  02EB  18 08       	jr	l_player_move_input_00143
1297  02ED              l_player_move_input_00142:
1298  02ED  21 70 01    	ld	hl,0x0170
1299  02F0  E5          	push	hl
1300  02F1  CD DC 06    	call	_player_tile
1301  02F4  F1          	pop	af
1302  02F5              l_player_move_input_00143:
1303  02F5  21 00 00    	ld	hl,_s_state
1304  02F8  7E          	ld	a,(hl)
1305  02F9  E6 F3       	and	a,+(0xf7&0xfb)
1306  02FB  77          	ld	(hl),a
1307  02FC  2E 00       	ld	l,0x00
1308  02FE              l_player_move_input_00147:
1309  02FE  C9          	ret
1310  02FF              	SECTION code_compiler
1311  02FF              ;	---------------------------------
1312  02FF              ; Function player_fix_walk_lin
1313  02FF              ; ---------------------------------
1314  02FF              _player_fix_walk_lin:
1315  02FF  3A 00 00    	ld	a,(_player_onstair)
1316  0302  B7          	or	a, a
1317  0303  C0          	ret	NZ
1318  0304  01 07 00    	ld	bc,_lin+7
1319  0307  3A 00 00    	ld	a,(_s_lin0)
1320  030A  07          	rlca
1321  030B  07          	rlca
1322  030C  07          	rlca
1323  030D  07          	rlca
1324  030E  E6 0F       	and	a,0x0f
1325  0310  07          	rlca
1326  0311  07          	rlca
1327  0312  07          	rlca
1328  0313  07          	rlca
1329  0314  E6 F0       	and	a,0xf0
1330  0316  02          	ld	(bc), a
1331  0317  C9          	ret
1332  0318              	SECTION code_compiler
1333  0318              ;	---------------------------------
1334  0318              ; Function player_fire
1335  0318              ; ---------------------------------
1336  0318              _player_fire:
1337  0318  CD 00 00    	call	___sdcc_enter_ix
1338  031B  3B          	dec	sp
1339  031C  21 00 00    	ld	hl,_player_onfire
1340  031F  36 00       	ld	(hl),0x00
1341  0321  3A 00 00    	ld	a,(_game_2buttons)
1342  0324  B7          	or	a, a
1343  0325  28 0A       	jr	Z,l_player_fire_00102
1344  0327  3A 00 00    	ld	a,(_dirs_alt)
1345  032A  E6 80       	and	a,0x80
1346  032C  32 00 00    	ld	(_player_onfire),a
1347  032F  18 1A       	jr	l_player_fire_00103
1348  0331              l_player_fire_00102:
1349  0331  21 00 00    	ld	hl,_dirs
1350  0334  7E          	ld	a, (hl)
1351  0335  CB 07       	rlc	a
1352  0337  E6 01       	and	a,0x01
1353  0339  CB 47       	bit	0, a
1354  033B  28 04       	jr	Z,l_player_fire_00118
1355  033D  CB 46       	bit	0, (hl)
1356  033F  28 04       	jr	Z,l_player_fire_00119
1357  0341              l_player_fire_00118:
1358  0341  0E 00       	ld	c,0x00
1359  0343  18 02       	jr	l_player_fire_00120
1360  0345              l_player_fire_00119:
1361  0345  0E 01       	ld	c,0x01
1362  0347              l_player_fire_00120:
1363  0347  21 00 00    	ld	hl,_player_onfire
1364  034A  71          	ld	(hl), c
1365  034B              l_player_fire_00103:
1366  034B  3A 07 00    	ld	a,(_bullet_col + 0x0007)
1367  034E  3C          	inc	a
1368  034F  20 39       	jr	NZ,l_player_fire_00116
1369  0351  3A 00 00    	ld	a,(_player_onfire)
1370  0354  B7          	or	a, a
1371  0355  28 33       	jr	Z,l_player_fire_00116
1372  0357  21 00 00    	ld	hl,_player_mana
1373  035A  7E          	ld	a, (hl)
1374  035B  B7          	or	a, a
1375  035C  28 29       	jr	Z,l_player_fire_00110
1376  035E  3E 05       	ld	a,0x05
1377  0360  96          	sub	a, (hl)
1378  0361  30 0F       	jr	NC,l_player_fire_00107
1379  0363  3A 00 00    	ld	a,(_game_inmune)
1380  0366  B7          	or	a, a
1381  0367  20 0E       	jr	NZ,l_player_fire_00108
1382  0369  21 00 00    	ld	hl,_player_mana
1383  036C  7E          	ld	a, (hl)
1384  036D  C6 FB       	add	a,0xfb
1385  036F  77          	ld	(hl), a
1386  0370  18 05       	jr	l_player_fire_00108
1387  0372              l_player_fire_00107:
1388  0372  21 00 00    	ld	hl,_player_mana
1389  0375  36 00       	ld	(hl),0x00
1390  0377              l_player_fire_00108:
1391  0377  CD 00 00    	call	_game_update_stats
1392  037A  CD 00 00    	call	_audio_disparo1
1393  037D  21 07 78    	ld	hl,0x7807
1394  0380  E5          	push	hl
1395  0381  CD 00 00    	call	_game_shoot_fire
1396  0384  F1          	pop	af
1397  0385  18 03       	jr	l_player_fire_00116
1398  0387              l_player_fire_00110:
1399  0387  CD 00 00    	call	_audio_sin_mana
1400  038A              l_player_fire_00116:
1401  038A  33          	inc	sp
1402  038B  DD E1       	pop	ix
1403  038D  C9          	ret
1404  038E              	SECTION code_compiler
1405  038E              ;	---------------------------------
1406  038E              ; Function player_collision
1407  038E              ; ---------------------------------
1408  038E              _player_collision:
1409  038E  3E 1E       	ld	a,0x1e
1410  0390  F5          	push	af
1411  0391  33          	inc	sp
1412  0392  21 00 00    	ld	hl,_player_hit_time
1413  0395  E5          	push	hl
1414  0396  CD 00 00    	call	_game_check_time
1415  0399  F1          	pop	af
1416  039A  33          	inc	sp
1417  039B  7D          	ld	a, l
1418  039C  B7          	or	a, a
1419  039D  CA 3B 05    	jp	Z, l_player_collision_00136
1420  03A0  21 00 00    	ld	hl,_sprite
1421  03A3  36 00       	ld	(hl),0x00
1422  03A5  3A 07 00    	ld	a,(_col + 7)
1423  03A8  32 00 00    	ld	(_s_col1),a
1424  03AB  3A 07 00    	ld	a,(_lin + 7)
1425  03AE  32 00 00    	ld	(_s_lin1),a
1426  03B1  C6 08       	add	a,0x08
1427  03B3  4F          	ld	c, a
1428  03B4  3A 00 00    	ld	a, (_s_col1)
1429  03B7  47          	ld	b,a
1430  03B8  C5          	push	bc
1431  03B9  CD 00 00    	call	_spr_calc_index
1432  03BC  F1          	pop	af
1433  03BD  4D          	ld	c, l
1434  03BE  21 00 00    	ld	hl,_sprite_curr_index
1435  03C1  71          	ld	(hl), c
1436  03C2  3E 00       	ld	a, +((_scr_map) & 0xFF)
1437  03C4  86          	add	a, (hl)
1438  03C5  4F          	ld	c, a
1439  03C6  3E 00       	ld	a, +((_scr_map) / 256)
1440  03C8  CE 00       	adc	a,0x00
1441  03CA  47          	ld	b, a
1442  03CB  0A          	ld	a, (bc)
1443  03CC  4F          	ld	c,a
1444  03CD  D6 15       	sub	a,0x15
1445  03CF  20 2B       	jr	NZ,l_player_collision_00104
1446  03D1  21 00 00    	ld	hl,_s_state
1447  03D4  CB 46       	bit	0, (hl)
1448  03D6  20 24       	jr	NZ,l_player_collision_00104
1449  03D8  3A 00 00    	ld	a,(_game_checkpoint_scr)
1450  03DB  21 00 00    	ld	hl,_scr_curr
1451  03DE  96          	sub	a, (hl)
1452  03DF  28 16       	jr	Z,l_player_collision_00102
1453  03E1  C5          	push	bc
1454  03E2  CD 00 00    	call	_audio_efecto
1455  03E5  C1          	pop	bc
1456  03E6  2E 07       	ld	l,0x07
1457  03E8  CD 00 00    	call	_zx_border_fastcall
1458  03EB  3A 00 00    	ld	a,(_s_col1)
1459  03EE  32 00 00    	ld	(_player_col_scr),a
1460  03F1  3A 00 00    	ld	a,(_s_lin1)
1461  03F4  32 00 00    	ld	(_player_lin_scr),a
1462  03F7              l_player_collision_00102:
1463  03F7  C5          	push	bc
1464  03F8  CD 00 00    	call	_game_set_checkpoint
1465  03FB  C1          	pop	bc
1466  03FC              l_player_collision_00104:
1467  03FC  3E 2F       	ld	a,0x2f
1468  03FE  91          	sub	a, c
1469  03FF  30 5D       	jr	NC,l_player_collision_00157
1470  0401  79          	ld	a,c
1471  0402  FE 3A       	cp	a,0x3a
1472  0404  30 58       	jr	NC,l_player_collision_00157
1473  0406  D6 39       	sub	a,0x39
1474  0408  20 2A       	jr	NZ,l_player_collision_00111
1475  040A  CD 00 00    	call	_audio_level_complete
1476  040D  21 00 00    	ld	hl,___str_0
1477  0410  E5          	push	hl
1478  0411  21 0C 08    	ld	hl,0x080c
1479  0414  E5          	push	hl
1480  0415  CD 00 00    	call	_zx_print_str
1481  0418  AF          	xor	a, a
1482  0419  F5          	push	af
1483  041A  33          	inc	sp
1484  041B  21 E8 03    	ld	hl,0x03e8
1485  041E  E5          	push	hl
1486  041F  21 08 17    	ld	hl,0x1708
1487  0422  E5          	push	hl
1488  0423  3E 0C       	ld	a,0x0c
1489  0425  F5          	push	af
1490  0426  33          	inc	sp
1491  0427  CD 00 00    	call	_game_colour_message
1492  042A  F1          	pop	af
1493  042B  F1          	pop	af
1494  042C  F1          	pop	af
1495  042D  21 00 00    	ld	hl,_game_round_up
1496  0430  36 01       	ld	(hl),0x01
1497  0432  18 2A       	jr	l_player_collision_00157
1498  0434              l_player_collision_00111:
1499  0434  3A 00 00    	ld	a,(_game_inmune)
1500  0437  B7          	or	a, a
1501  0438  20 10       	jr	NZ,l_player_collision_00107
1502  043A  3E 82       	ld	a,0x82
1503  043C  21 00 00    	ld	hl,_s_lin1
1504  043F  96          	sub	a, (hl)
1505  0440  30 08       	jr	NC,l_player_collision_00107
1506  0442  CD 2C 10    	call	_player_lost_life
1507  0445  2E 00       	ld	l,0x00
1508  0447  C3 3D 05    	jp	l_player_collision_00137
1509  044A              l_player_collision_00107:
1510  044A  21 00 00    	ld	hl,_s_state
1511  044D  CB E6       	set	4, (hl)
1512  044F  2E 06       	ld	l,0x06
1513  0451  CD 00 00    	call	_zx_border_fastcall
1514  0454  2E 32       	ld	l,0x32
1515  0456  CD 7A 11    	call	_player_damage
1516  0459  2E 01       	ld	l,0x01
1517  045B  C3 3D 05    	jp	l_player_collision_00137
1518  045E              l_player_collision_00157:
1519  045E              l_player_collision_00132:
1520  045E  21 00 00    	ld	hl,_sprite
1521  0461  7E          	ld	a, (hl)
1522  0462  D6 07       	sub	a,0x07
1523  0464  D2 36 05    	jp	NC, l_player_collision_00134
1524  0467  4E          	ld	c,(hl)
1525  0468  06 00       	ld	b,0x00
1526  046A  21 00 00    	ld	hl,_class
1527  046D  09          	add	hl,bc
1528  046E  7E          	ld	a,(hl)
1529  046F  32 00 00    	ld	(_s_class),a
1530  0472  B7          	or	a, a
1531  0473  CA 2F 05    	jp	Z, l_player_collision_00131
1532  0476  2A 00 00    	ld	hl,(_sprite)
1533  0479  26 00       	ld	h,0x00
1534  047B  01 00 00    	ld	bc,_col
1535  047E  09          	add	hl,bc
1536  047F  4E          	ld	c,(hl)
1537  0480  06 00       	ld	b,0x00
1538  0482  3A 00 00    	ld	a,(_s_col1)
1539  0485  5F          	ld	e,a
1540  0486  16 00       	ld	d,0x00
1541  0488  79          	ld	a, c
1542  0489  93          	sub	a, e
1543  048A  6F          	ld	l, a
1544  048B  78          	ld	a, b
1545  048C  9A          	sbc	a, d
1546  048D  67          	ld	h, a
1547  048E  CD 00 00    	call	_abs_fastcall
1548  0491  7D          	ld	a,l
1549  0492  D6 02       	sub	a,0x02
1550  0494  7C          	ld	a,h
1551  0495  17          	rla
1552  0496  3F          	ccf
1553  0497  1F          	rra
1554  0498  DE 80       	sbc	a,0x80
1555  049A  D2 2F 05    	jp	NC, l_player_collision_00131
1556  049D  2A 00 00    	ld	hl,(_sprite)
1557  04A0  26 00       	ld	h,0x00
1558  04A2  01 00 00    	ld	bc,_lin
1559  04A5  09          	add	hl,bc
1560  04A6  4E          	ld	c,(hl)
1561  04A7  06 00       	ld	b,0x00
1562  04A9  3A 00 00    	ld	a,(_s_lin1)
1563  04AC  5F          	ld	e,a
1564  04AD  16 00       	ld	d,0x00
1565  04AF  79          	ld	a, c
1566  04B0  93          	sub	a, e
1567  04B1  6F          	ld	l, a
1568  04B2  78          	ld	a, b
1569  04B3  9A          	sbc	a, d
1570  04B4  67          	ld	h, a
1571  04B5  CD 00 00    	call	_abs_fastcall
1572  04B8  7D          	ld	a,l
1573  04B9  D6 0E       	sub	a,0x0e
1574  04BB  7C          	ld	a,h
1575  04BC  17          	rla
1576  04BD  3F          	ccf
1577  04BE  1F          	rra
1578  04BF  DE 80       	sbc	a,0x80
1579  04C1  30 6C       	jr	NC,l_player_collision_00131
1580  04C3  3A 00 00    	ld	a,(_s_class)
1581  04C6  D6 06       	sub	a,0x06
1582  04C8  20 1D       	jr	NZ,l_player_collision_00119
1583  04CA  21 00 00    	ld	hl,_player_vita
1584  04CD  7E          	ld	a, (hl)
1585  04CE  C6 32       	add	a,0x32
1586  04D0  77          	ld	(hl), a
1587  04D1  3A 00 00    	ld	a,(_player_max_vita)
1588  04D4  21 00 00    	ld	hl,_player_vita
1589  04D7  96          	sub	a, (hl)
1590  04D8  30 06       	jr	NC,l_player_collision_00117
1591  04DA  3A 00 00    	ld	a,(_player_max_vita)
1592  04DD  32 00 00    	ld	(_player_vita),a
1593  04E0              l_player_collision_00117:
1594  04E0  CD 3E 05    	call	_player_pick_mushroom
1595  04E3  2E 00       	ld	l,0x00
1596  04E5  18 56       	jr	l_player_collision_00137
1597  04E7              l_player_collision_00119:
1598  04E7  3A 00 00    	ld	a,(_s_class)
1599  04EA  D6 07       	sub	a,0x07
1600  04EC  20 1D       	jr	NZ,l_player_collision_00123
1601  04EE  21 00 00    	ld	hl,_player_mana
1602  04F1  7E          	ld	a, (hl)
1603  04F2  C6 32       	add	a,0x32
1604  04F4  77          	ld	(hl), a
1605  04F5  3A 00 00    	ld	a,(_player_max_mana)
1606  04F8  21 00 00    	ld	hl,_player_mana
1607  04FB  96          	sub	a, (hl)
1608  04FC  30 06       	jr	NC,l_player_collision_00121
1609  04FE  3A 00 00    	ld	a,(_player_max_mana)
1610  0501  32 00 00    	ld	(_player_mana),a
1611  0504              l_player_collision_00121:
1612  0504  CD 3E 05    	call	_player_pick_mushroom
1613  0507  2E 00       	ld	l,0x00
1614  0509  18 32       	jr	l_player_collision_00137
1615  050B              l_player_collision_00123:
1616  050B  3A 00 00    	ld	a,(_s_class)
1617  050E  D6 08       	sub	a,0x08
1618  0510  20 0A       	jr	NZ,l_player_collision_00125
1619  0512  CD 3E 05    	call	_player_pick_mushroom
1620  0515  CD 55 05    	call	_player_1up
1621  0518  2E 00       	ld	l,0x00
1622  051A  18 21       	jr	l_player_collision_00137
1623  051C              l_player_collision_00125:
1624  051C  21 00 00    	ld	hl,_s_state
1625  051F  CB E6       	set	4, (hl)
1626  0521  2E 02       	ld	l,0x02
1627  0523  CD 00 00    	call	_zx_border_fastcall
1628  0526  2E 14       	ld	l,0x14
1629  0528  CD 7A 11    	call	_player_damage
1630  052B  2E 01       	ld	l,0x01
1631  052D  18 0E       	jr	l_player_collision_00137
1632  052F              l_player_collision_00131:
1633  052F  21 00 00    	ld	hl,_sprite
1634  0532  34          	inc	(hl)
1635  0533  C3 5E 04    	jp	l_player_collision_00132
1636  0536              l_player_collision_00134:
1637  0536  21 00 00    	ld	hl,_s_state
1638  0539  CB A6       	res	4, (hl)
1639  053B              l_player_collision_00136:
1640  053B  2E 00       	ld	l,0x00
1641  053D              l_player_collision_00137:
1642  053D  C9          	ret
1643  053E              	SECTION rodata_compiler
1644  0000              ___str_0:
1645  0000  52 4F 55 4E 44 20 43 4F 4D 50 4C 45 54 45 21 
                        	DEFM "ROUND COMPLETE!"
1646  000F  00          	DEFB 0x00
1647  0010              	SECTION code_compiler
1648  053E              ;	---------------------------------
1649  053E              ; Function player_pick_mushroom
1650  053E              ; ---------------------------------
1651  053E              _player_pick_mushroom:
1652  053E  CD 00 00    	call	_audio_magia1
1653  0541  21 01 00    	ld	hl,0x0001
1654  0544  CD 03 0C    	call	_player_score_add
1655  0547  CD 00 00    	call	_game_update_stats
1656  054A  2A 00 00    	ld	hl,(_sprite)
1657  054D  CD 00 00    	call	_spr_destroy
1658  0550  21 00 00    	ld	hl,_game_mush_count
1659  0553  35          	dec	(hl)
1660  0554  C9          	ret
1661  0555              	SECTION code_compiler
1662  0555              ;	---------------------------------
1663  0555              ; Function player_1up
1664  0555              ; ---------------------------------
1665  0555              _player_1up:
1666  0555  21 00 00    	ld	hl,_player_lives
1667  0558  7E          	ld	a, (hl)
1668  0559  D6 64       	sub	a,0x64
1669  055B  D0          	ret	NC
1670  055C  34          	inc	(hl)
1671  055D  CD 00 00    	call	_spr_flatten
1672  0560  21 10 00    	ld	hl,___str_1
1673  0563  E5          	push	hl
1674  0564  21 0C 0C    	ld	hl,0x0c0c
1675  0567  E5          	push	hl
1676  0568  CD 00 00    	call	_zx_print_str
1677  056B  AF          	xor	a, a
1678  056C  F5          	push	af
1679  056D  33          	inc	sp
1680  056E  21 19 00    	ld	hl,0x0019
1681  0571  E5          	push	hl
1682  0572  21 0C 11    	ld	hl,0x110c
1683  0575  E5          	push	hl
1684  0576  3E 0C       	ld	a,0x0c
1685  0578  F5          	push	af
1686  0579  33          	inc	sp
1687  057A  CD 00 00    	call	_game_colour_message
1688  057D  F1          	pop	af
1689  057E  F1          	pop	af
1690  057F  F1          	pop	af
1691  0580  CD 00 00    	call	_game_update_stats
1692  0583  CD 00 00    	call	_spr_unflattenP1
1693  0586  C9          	ret
1694  0587              	SECTION rodata_compiler
1695  0010              ___str_1:
1696  0010  31 20 55 50 21 
                        	DEFM "1 UP!"
1697  0015  00          	DEFB 0x00
1698  0016              	SECTION code_compiler
1699  0587              ;	---------------------------------
1700  0587              ; Function player_check_stairs_vertical
1701  0587              ; ---------------------------------
1702  0587              _player_check_stairs_vertical:
1703  0587  CD 00 00    	call	___sdcc_enter_ix
1704  058A  F5          	push	af
1705  058B  DD 75 FE    	ld	(ix-2),l
1706  058E  21 07 00    	ld	hl,+(_col + 0x0007)
1707  0591  4E          	ld	c, (hl)
1708  0592  CB 41       	bit	0, c
1709  0594  20 2F       	jr	NZ,l_player_check_stairs_vertical_00102
1710  0596  3A 07 00    	ld	a,(_lin + 0x0007)
1711  0599  DD 86 FE    	add	a,(ix-2)
1712  059C  47          	ld	b, a
1713  059D  79          	ld	a, c
1714  059E  48          	ld	c,b
1715  059F  47          	ld	b,a
1716  05A0  C5          	push	bc
1717  05A1  CD 00 00    	call	_spr_calc_index
1718  05A4  F1          	pop	af
1719  05A5  7D          	ld	a,l
1720  05A6  32 00 00    	ld	(_sprite_curr_index),a
1721  05A9  4F          	ld	c,a
1722  05AA  06 00       	ld	b,0x00
1723  05AC  21 00 00    	ld	hl,_scr_map
1724  05AF  09          	add	hl,bc
1725  05B0  7E          	ld	a,(hl)
1726  05B1  4F          	ld	c,a
1727  05B2  D6 44       	sub	a,0x44
1728  05B4  38 05       	jr	C,l_player_check_stairs_vertical_00110
1729  05B6  3E 47       	ld	a,0x47
1730  05B8  91          	sub	a, c
1731  05B9  30 04       	jr	NC,l_player_check_stairs_vertical_00111
1732  05BB              l_player_check_stairs_vertical_00110:
1733  05BB  1E 00       	ld	e,0x00
1734  05BD  18 02       	jr	l_player_check_stairs_vertical_00112
1735  05BF              l_player_check_stairs_vertical_00111:
1736  05BF  1E 01       	ld	e,0x01
1737  05C1              l_player_check_stairs_vertical_00112:
1738  05C1  0E 00       	ld	c,0x00
1739  05C3  18 58       	jr	l_player_check_stairs_vertical_00103
1740  05C5              l_player_check_stairs_vertical_00102:
1741  05C5  79          	ld	a, c
1742  05C6  DD 96 FE    	sub	a,(ix-2)
1743  05C9  57          	ld	d, a
1744  05CA  01 07 00    	ld	bc,_lin+7
1745  05CD  0A          	ld	a, (bc)
1746  05CE  DD 86 FE    	add	a,(ix-2)
1747  05D1  C5          	push	bc
1748  05D2  5F          	ld	e,a
1749  05D3  D5          	push	de
1750  05D4  CD 00 00    	call	_spr_calc_index
1751  05D7  F1          	pop	af
1752  05D8  C1          	pop	bc
1753  05D9  7D          	ld	a,l
1754  05DA  32 00 00    	ld	(_sprite_curr_index),a
1755  05DD  5F          	ld	e,a
1756  05DE  16 00       	ld	d,0x00
1757  05E0  21 00 00    	ld	hl,_scr_map
1758  05E3  19          	add	hl,de
1759  05E4  7E          	ld	a,(hl)
1760  05E5  5F          	ld	e,a
1761  05E6  D6 44       	sub	a,0x44
1762  05E8  38 05       	jr	C,l_player_check_stairs_vertical_00113
1763  05EA  3E 47       	ld	a,0x47
1764  05EC  93          	sub	a, e
1765  05ED  30 04       	jr	NC,l_player_check_stairs_vertical_00114
1766  05EF              l_player_check_stairs_vertical_00113:
1767  05EF  1E 00       	ld	e,0x00
1768  05F1  18 02       	jr	l_player_check_stairs_vertical_00115
1769  05F3              l_player_check_stairs_vertical_00114:
1770  05F3  1E 01       	ld	e,0x01
1771  05F5              l_player_check_stairs_vertical_00115:
1772  05F5  3A 07 00    	ld	a,(_col + 0x0007)
1773  05F8  DD 96 FE    	sub	a,(ix-2)
1774  05FB  57          	ld	d, a
1775  05FC  0A          	ld	a, (bc)
1776  05FD  DD 86 FE    	add	a,(ix-2)
1777  0600  47          	ld	b, a
1778  0601  D5          	push	de
1779  0602  58          	ld	e,b
1780  0603  D5          	push	de
1781  0604  CD 00 00    	call	_spr_calc_index
1782  0607  F1          	pop	af
1783  0608  D1          	pop	de
1784  0609  7D          	ld	a,l
1785  060A  32 00 00    	ld	(_sprite_curr_index),a
1786  060D  7B          	ld	a, e
1787  060E  D6 44       	sub	a,0x44
1788  0610  38 05       	jr	C,l_player_check_stairs_vertical_00116
1789  0612  3E 47       	ld	a,0x47
1790  0614  93          	sub	a, e
1791  0615  30 04       	jr	NC,l_player_check_stairs_vertical_00117
1792  0617              l_player_check_stairs_vertical_00116:
1793  0617  0E 00       	ld	c,0x00
1794  0619  18 02       	jr	l_player_check_stairs_vertical_00118
1795  061B              l_player_check_stairs_vertical_00117:
1796  061B  0E 01       	ld	c,0x01
1797  061D              l_player_check_stairs_vertical_00118:
1798  061D              l_player_check_stairs_vertical_00103:
1799  061D  7B          	ld	a, e
1800  061E  B7          	or	a,a
1801  061F  20 03       	jr	NZ,l_player_check_stairs_vertical_00104
1802  0621  B1          	or	a,c
1803  0622  28 07       	jr	Z,l_player_check_stairs_vertical_00105
1804  0624              l_player_check_stairs_vertical_00104:
1805  0624  21 00 00    	ld	hl,_player_onstair
1806  0627  36 01       	ld	(hl),0x01
1807  0629  18 05       	jr	l_player_check_stairs_vertical_00108
1808  062B              l_player_check_stairs_vertical_00105:
1809  062B  21 00 00    	ld	hl,_player_onstair
1810  062E  36 00       	ld	(hl),0x00
1811  0630              l_player_check_stairs_vertical_00108:
1812  0630  F1          	pop	af
1813  0631  DD E1       	pop	ix
1814  0633  C9          	ret
1815  0634              	SECTION code_compiler
1816  0634              ;	---------------------------------
1817  0634              ; Function player_check_stairs
1818  0634              ; ---------------------------------
1819  0634              _player_check_stairs:
1820  0634  CD 00 00    	call	___sdcc_enter_ix
1821  0637  3B          	dec	sp
1822  0638  45          	ld	b, l
1823  0639  3A 07 00    	ld	a,(_col + 0x0007)
1824  063C  4F          	ld	c,a
1825  063D  80          	add	a, b
1826  063E  57          	ld	d, a
1827  063F  3A 07 00    	ld	a,(_lin + 0x0007)
1828  0642  C5          	push	bc
1829  0643  5F          	ld	e,a
1830  0644  D5          	push	de
1831  0645  CD 00 00    	call	_spr_calc_index
1832  0648  F1          	pop	af
1833  0649  C1          	pop	bc
1834  064A  7D          	ld	a,l
1835  064B  32 00 00    	ld	(_sprite_curr_index),a
1836  064E  5F          	ld	e,a
1837  064F  16 00       	ld	d,0x00
1838  0651  21 00 00    	ld	hl,_scr_map
1839  0654  19          	add	hl,de
1840  0655  7E          	ld	a,(hl)
1841  0656  4F          	ld	c,a
1842  0657  D6 44       	sub	a,0x44
1843  0659  38 05       	jr	C,l_player_check_stairs_00111
1844  065B  3E 47       	ld	a,0x47
1845  065D  91          	sub	a, c
1846  065E  30 04       	jr	NC,l_player_check_stairs_00112
1847  0660              l_player_check_stairs_00111:
1848  0660  0E 00       	ld	c,0x00
1849  0662  18 02       	jr	l_player_check_stairs_00113
1850  0664              l_player_check_stairs_00112:
1851  0664  0E 01       	ld	c,0x01
1852  0666              l_player_check_stairs_00113:
1853  0666  3A 07 00    	ld	a,(_col + 0x0007)
1854  0669  80          	add	a, b
1855  066A  57          	ld	d, a
1856  066B  3A 07 00    	ld	a,(_lin + 0x0007)
1857  066E  C6 0F       	add	a,0x0f
1858  0670  47          	ld	b, a
1859  0671  C5          	push	bc
1860  0672  58          	ld	e,b
1861  0673  D5          	push	de
1862  0674  CD 00 00    	call	_spr_calc_index
1863  0677  F1          	pop	af
1864  0678  C1          	pop	bc
1865  0679  7D          	ld	a,l
1866  067A  32 00 00    	ld	(_sprite_curr_index),a
1867  067D  5F          	ld	e,a
1868  067E  16 00       	ld	d,0x00
1869  0680  21 00 00    	ld	hl,_scr_map
1870  0683  19          	add	hl,de
1871  0684  7E          	ld	a,(hl)
1872  0685  47          	ld	b,a
1873  0686  D6 44       	sub	a,0x44
1874  0688  38 05       	jr	C,l_player_check_stairs_00114
1875  068A  3E 47       	ld	a,0x47
1876  068C  90          	sub	a, b
1877  068D  30 04       	jr	NC,l_player_check_stairs_00115
1878  068F              l_player_check_stairs_00114:
1879  068F  06 00       	ld	b,0x00
1880  0691  18 02       	jr	l_player_check_stairs_00116
1881  0693              l_player_check_stairs_00115:
1882  0693  06 01       	ld	b,0x01
1883  0695              l_player_check_stairs_00116:
1884  0695  79          	ld	a, c
1885  0696  B7          	or	a,a
1886  0697  20 03       	jr	NZ,l_player_check_stairs_00105
1887  0699  B0          	or	a,b
1888  069A  28 13       	jr	Z,l_player_check_stairs_00106
1889  069C              l_player_check_stairs_00105:
1890  069C  21 00 00    	ld	hl,_player_onstair
1891  069F  7E          	ld	a, (hl)
1892  06A0  B7          	or	a, a
1893  06A1  20 1D       	jr	NZ,l_player_check_stairs_00109
1894  06A3  36 01       	ld	(hl),0x01
1895  06A5  21 72 00    	ld	hl,0x0072
1896  06A8  E5          	push	hl
1897  06A9  CD DC 06    	call	_player_tile
1898  06AC  F1          	pop	af
1899  06AD  18 11       	jr	l_player_check_stairs_00109
1900  06AF              l_player_check_stairs_00106:
1901  06AF  21 00 00    	ld	hl,_player_onstair
1902  06B2  7E          	ld	a, (hl)
1903  06B3  B7          	or	a, a
1904  06B4  28 0A       	jr	Z,l_player_check_stairs_00109
1905  06B6  36 00       	ld	(hl),0x00
1906  06B8  21 60 08    	ld	hl,0x0860
1907  06BB  E5          	push	hl
1908  06BC  CD DC 06    	call	_player_tile
1909  06BF  F1          	pop	af
1910  06C0              l_player_check_stairs_00109:
1911  06C0  33          	inc	sp
1912  06C1  DD E1       	pop	ix
1913  06C3  C9          	ret
1914  06C4              	SECTION code_compiler
1915  06C4              ;	---------------------------------
1916  06C4              ; Function player_anim_stairs
1917  06C4              ; ---------------------------------
1918  06C4              _player_anim_stairs:
1919  06C4  21 00 00    	ld	hl,_player_anim_stair
1920  06C7  34          	inc	(hl)
1921  06C8  3E 01       	ld	a,0x01
1922  06CA  96          	sub	a, (hl)
1923  06CB  30 02       	jr	NC,l_player_anim_stairs_00102
1924  06CD  36 00       	ld	(hl),0x00
1925  06CF              l_player_anim_stairs_00102:
1926  06CF  3A 07 00    	ld	a,(_tile + 0x0007)
1927  06D2  21 00 00    	ld	hl,_player_anim_stair
1928  06D5  86          	add	a, (hl)
1929  06D6  C6 04       	add	a,0x04
1930  06D8  32 00 00    	ld	(_s_tile1),a
1931  06DB  C9          	ret
1932  06DC              	SECTION code_compiler
1933  06DC              ;	---------------------------------
1934  06DC              ; Function player_tile
1935  06DC              ; ---------------------------------
1936  06DC              _player_tile:
1937  06DC  CD 00 00    	call	___sdcc_enter_ix
1938  06DF  21 05 00    	ld	hl,0x0005
1939  06E2  39          	add	hl, sp
1940  06E3  EB          	ex	de,hl
1941  06E4  21 04 00    	ld	hl,0x0004
1942  06E7  39          	add	hl, sp
1943  06E8  4D          	ld	c, l
1944  06E9  44          	ld	b, h
1945  06EA  D5          	push	de
1946  06EB  21 00 00    	ld	hl,_sprite
1947  06EE  E5          	push	hl
1948  06EF  C5          	push	bc
1949  06F0  CD 00 00    	call	_spr_tile_dir
1950  06F3  F1          	pop	af
1951  06F4  F1          	pop	af
1952  06F5  F1          	pop	af
1953  06F6  7D          	ld	a,l
1954  06F7  32 07 00    	ld	((_tile + 0x0007)),a
1955  06FA  DD E1       	pop	ix
1956  06FC  C9          	ret
1957  06FD              	SECTION code_compiler
1958  06FD              ;	---------------------------------
1959  06FD              ; Function player_check_map
1960  06FD              ; ---------------------------------
1961  06FD              _player_check_map:
1962  06FD  21 07 00    	ld	hl,+(_col + 0x0007)
1963  0700  56          	ld	d, (hl)
1964  0701  21 07 00    	ld	hl,+(_lin + 0x0007)
1965  0704  5E          	ld	e, (hl)
1966  0705  D5          	push	de
1967  0706  CD 00 00    	call	_spr_calc_index
1968  0709  F1          	pop	af
1969  070A  7D          	ld	a,l
1970  070B  32 00 00    	ld	(_sprite_curr_index),a
1971  070E  CD 57 07    	call	_player_pick_item
1972  0711  21 07 00    	ld	hl,+(_col + 0x0007)
1973  0714  46          	ld	b, (hl)
1974  0715  3A 07 00    	ld	a,(_lin + 0x0007)
1975  0718  E6 0F       	and	a,0x0f
1976  071A  4F          	ld	c, a
1977  071B  CB 40       	bit	0, b
1978  071D  20 10       	jr	NZ,l_player_check_map_00108
1979  071F  79          	ld	a, c
1980  0720  B7          	or	a, a
1981  0721  28 33       	jr	Z,l_player_check_map_00110
1982  0723  21 00 00    	ld	hl,_sprite_curr_index
1983  0726  7E          	ld	a, (hl)
1984  0727  C6 10       	add	a,0x10
1985  0729  77          	ld	(hl), a
1986  072A  CD 57 07    	call	_player_pick_item
1987  072D  18 27       	jr	l_player_check_map_00110
1988  072F              l_player_check_map_00108:
1989  072F  21 00 00    	ld	hl,_sprite_curr_index
1990  0732  46          	ld	b, (hl)
1991  0733  04          	inc	b
1992  0734  79          	ld	a, c
1993  0735  B7          	or	a, a
1994  0736  20 06       	jr	NZ,l_player_check_map_00105
1995  0738  70          	ld	(hl), b
1996  0739  CD 57 07    	call	_player_pick_item
1997  073C  18 18       	jr	l_player_check_map_00110
1998  073E              l_player_check_map_00105:
1999  073E  21 00 00    	ld	hl,_sprite_curr_index
2000  0741  70          	ld	(hl), b
2001  0742  CD 57 07    	call	_player_pick_item
2002  0745  21 00 00    	ld	hl,_sprite_curr_index
2003  0748  7E          	ld	a, (hl)
2004  0749  C6 0F       	add	a,0x0f
2005  074B  77          	ld	(hl), a
2006  074C  CD 57 07    	call	_player_pick_item
2007  074F  21 00 00    	ld	hl,_sprite_curr_index
2008  0752  34          	inc	(hl)
2009  0753  CD 57 07    	call	_player_pick_item
2010  0756              l_player_check_map_00110:
2011  0756  C9          	ret
2012  0757              	SECTION code_compiler
2013  0757              ;	---------------------------------
2014  0757              ; Function player_pick_item
2015  0757              ; ---------------------------------
2016  0757              _player_pick_item:
2017  0757  CD 00 00    	call	___sdcc_enter_ix
2018  075A  3B          	dec	sp
2019  075B  2A 00 00    	ld	hl,(_sprite_curr_index)
2020  075E  26 00       	ld	h,0x00
2021  0760  01 00 00    	ld	bc,_scr_map
2022  0763  09          	add	hl,bc
2023  0764  7E          	ld	a,(hl)
2024  0765  DD 77 FF    	ld	(ix-1),a
2025  0768  D6 24       	sub	a,0x24
2026  076A  DA 01 09    	jp	C, l_player_pick_item_00131
2027  076D  3E 2F       	ld	a,0x2f
2028  076F  DD 96 FF    	sub	a,(ix-1)
2029  0772  DA 01 09    	jp	C, l_player_pick_item_00131
2030  0775  CD 00 00    	call	_ay_reset
2031  0778  2A 00 00    	ld	hl,(_sprite_curr_index)
2032  077B  26 00       	ld	h,0x00
2033  077D  01 00 00    	ld	bc,_scr_map
2034  0780  09          	add	hl,bc
2035  0781  4D          	ld	c,l
2036  0782  44          	ld	b,h
2037  0783  21 00 00    	ld	hl,_sprite_curr_index
2038  0786  5E          	ld	e, (hl)
2039  0787  16 00       	ld	d,0x00
2040  0789  C5          	push	bc
2041  078A  EB          	ex	de,hl
2042  078B  CD 00 00    	call	_game_match_back
2043  078E  C1          	pop	bc
2044  078F  7D          	ld	a,l
2045  0790  02          	ld	(bc), a
2046  0791  2A 00 00    	ld	hl,(_sprite_curr_index)
2047  0794  26 00       	ld	h,0x00
2048  0796  CD 00 00    	call	_game_obj_set
2049  0799  3A 00 00    	ld	a,(_sprite_curr_index)
2050  079C  07          	rlca
2051  079D  07          	rlca
2052  079E  07          	rlca
2053  079F  07          	rlca
2054  07A0  E6 0F       	and	a,0x0f
2055  07A2  07          	rlca
2056  07A3  07          	rlca
2057  07A4  07          	rlca
2058  07A5  07          	rlca
2059  07A6  E6 F0       	and	a,0xf0
2060  07A8  32 00 00    	ld	(_s_lin1),a
2061  07AB  3A 00 00    	ld	a,(_sprite_curr_index)
2062  07AE  E6 0F       	and	a,0x0f
2063  07B0  87          	add	a, a
2064  07B1  32 00 00    	ld	(_s_col1),a
2065  07B4  21 00 00    	ld	hl,0x0000
2066  07B7  E5          	push	hl
2067  07B8  21 84 03    	ld	hl,0x0384
2068  07BB  E5          	push	hl
2069  07BC  F5          	push	af
2070  07BD  33          	inc	sp
2071  07BE  3A 00 00    	ld	a,(_s_lin1)
2072  07C1  F5          	push	af
2073  07C2  33          	inc	sp
2074  07C3  CD 00 00    	call	_spr_add_anim
2075  07C6  F1          	pop	af
2076  07C7  F1          	pop	af
2077  07C8  F1          	pop	af
2078  07C9  DD 7E FF    	ld	a,(ix-1)
2079  07CC  D6 24       	sub	a,0x24
2080  07CE  DA 01 09    	jp	C, l_player_pick_item_00131
2081  07D1  3E 2F       	ld	a,0x2f
2082  07D3  DD 96 FF    	sub	a,(ix-1)
2083  07D6  DA 01 09    	jp	C, l_player_pick_item_00131
2084  07D9  DD 7E FF    	ld	a,(ix-1)
2085  07DC  C6 DC       	add	a,0xdc
2086  07DE  4F          	ld	c, a
2087  07DF  06 00       	ld	b,0x00
2088  07E1  21 E8 07    	ld	hl,l_player_pick_item_00177
2089  07E4  09          	add	hl, bc
2090  07E5  09          	add	hl, bc
2091  07E6  09          	add	hl, bc
2092  07E7  E9          	jp	(hl)
2093  07E8              l_player_pick_item_00177:
2094  07E8  C3 0C 08    	jp	l_player_pick_item_00101
2095  07EB  C3 1A 08    	jp	l_player_pick_item_00102
2096  07EE  C3 28 08    	jp	l_player_pick_item_00103
2097  07F1  C3 36 08    	jp	l_player_pick_item_00104
2098  07F4  C3 44 08    	jp	l_player_pick_item_00105
2099  07F7  C3 71 08    	jp	l_player_pick_item_00109
2100  07FA  C3 8B 08    	jp	l_player_pick_item_00112
2101  07FD  C3 A3 08    	jp	l_player_pick_item_00115
2102  0800  C3 BB 08    	jp	l_player_pick_item_00118
2103  0803  C3 D3 08    	jp	l_player_pick_item_00121
2104  0806  C3 EB 08    	jp	l_player_pick_item_00124
2105  0809  C3 65 08    	jp	l_player_pick_item_00108
2106  080C              l_player_pick_item_00101:
2107  080C  CD 00 00    	call	_audio_efecto
2108  080F  21 00 00    	ld	hl,_player_keys
2109  0812  36 01       	ld	(hl),0x01
2110  0814  CD 00 00    	call	_game_update_stats
2111  0817  C3 01 09    	jp	l_player_pick_item_00131
2112  081A              l_player_pick_item_00102:
2113  081A  CD 00 00    	call	_audio_efecto
2114  081D  21 01 00    	ld	hl, +(_player_keys + 0x0001)
2115  0820  36 01       	ld	(hl),0x01
2116  0822  CD 00 00    	call	_game_update_stats
2117  0825  C3 01 09    	jp	l_player_pick_item_00131
2118  0828              l_player_pick_item_00103:
2119  0828  CD 00 00    	call	_audio_efecto
2120  082B  21 02 00    	ld	hl, +(_player_keys + 0x0002)
2121  082E  36 01       	ld	(hl),0x01
2122  0830  CD 00 00    	call	_game_update_stats
2123  0833  C3 01 09    	jp	l_player_pick_item_00131
2124  0836              l_player_pick_item_00104:
2125  0836  CD 00 00    	call	_audio_efecto
2126  0839  21 03 00    	ld	hl, +(_player_keys + 0x0003)
2127  083C  36 01       	ld	(hl),0x01
2128  083E  CD 00 00    	call	_game_update_stats
2129  0841  C3 01 09    	jp	l_player_pick_item_00131
2130  0844              l_player_pick_item_00105:
2131  0844  CD 00 00    	call	_audio_coin
2132  0847  21 01 00    	ld	hl,0x0001
2133  084A  CD 03 0C    	call	_player_score_add
2134  084D  21 00 00    	ld	hl,_player_coins
2135  0850  7E          	ld	a,(hl)
2136  0851  3C          	inc	a
2137  0852  77          	ld	(hl),a
2138  0853  D6 64       	sub	a,0x64
2139  0855  20 08       	jr	NZ,l_player_pick_item_00107
2140  0857  CD 55 05    	call	_player_1up
2141  085A  21 00 00    	ld	hl,_player_coins
2142  085D  36 00       	ld	(hl),0x00
2143  085F              l_player_pick_item_00107:
2144  085F  CD 00 00    	call	_game_update_stats
2145  0862  C3 01 09    	jp	l_player_pick_item_00131
2146  0865              l_player_pick_item_00108:
2147  0865  CD 00 00    	call	_audio_magia1
2148  0868  21 0A 00    	ld	hl,0x000a
2149  086B  CD 03 0C    	call	_player_score_add
2150  086E  C3 01 09    	jp	l_player_pick_item_00131
2151  0871              l_player_pick_item_00109:
2152  0871  CD 00 00    	call	_audio_efecto
2153  0874  21 00 00    	ld	hl,_player_str
2154  0877  34          	inc	(hl)
2155  0878  21 00 00    	ld	hl,_player_max_vita
2156  087B  7E          	ld	a, (hl)
2157  087C  D6 C8       	sub	a,0xc8
2158  087E  D2 01 09    	jp	NC, l_player_pick_item_00131
2159  0881  7E          	ld	a, (hl)
2160  0882  C6 0A       	add	a,0x0a
2161  0884  77          	ld	(hl), a
2162  0885  CD 00 00    	call	_game_update_stats
2163  0888  C3 01 09    	jp	l_player_pick_item_00131
2164  088B              l_player_pick_item_00112:
2165  088B  CD 00 00    	call	_audio_efecto
2166  088E  21 00 00    	ld	hl,_player_str
2167  0891  34          	inc	(hl)
2168  0892  21 00 00    	ld	hl,_player_max_vita
2169  0895  7E          	ld	a, (hl)
2170  0896  D6 C8       	sub	a,0xc8
2171  0898  30 67       	jr	NC,l_player_pick_item_00131
2172  089A  7E          	ld	a, (hl)
2173  089B  C6 0A       	add	a,0x0a
2174  089D  77          	ld	(hl), a
2175  089E  CD 00 00    	call	_game_update_stats
2176  08A1  18 5E       	jr	l_player_pick_item_00131
2177  08A3              l_player_pick_item_00115:
2178  08A3  CD 00 00    	call	_audio_efecto
2179  08A6  21 00 00    	ld	hl,_player_str
2180  08A9  34          	inc	(hl)
2181  08AA  21 00 00    	ld	hl,_player_max_vita
2182  08AD  7E          	ld	a, (hl)
2183  08AE  D6 C8       	sub	a,0xc8
2184  08B0  30 4F       	jr	NC,l_player_pick_item_00131
2185  08B2  7E          	ld	a, (hl)
2186  08B3  C6 0A       	add	a,0x0a
2187  08B5  77          	ld	(hl), a
2188  08B6  CD 00 00    	call	_game_update_stats
2189  08B9  18 46       	jr	l_player_pick_item_00131
2190  08BB              l_player_pick_item_00118:
2191  08BB  CD 00 00    	call	_audio_efecto
2192  08BE  21 00 00    	ld	hl,_player_int
2193  08C1  34          	inc	(hl)
2194  08C2  21 00 00    	ld	hl,_player_max_mana
2195  08C5  7E          	ld	a, (hl)
2196  08C6  D6 C8       	sub	a,0xc8
2197  08C8  30 37       	jr	NC,l_player_pick_item_00131
2198  08CA  7E          	ld	a, (hl)
2199  08CB  C6 0A       	add	a,0x0a
2200  08CD  77          	ld	(hl), a
2201  08CE  CD 00 00    	call	_game_update_stats
2202  08D1  18 2E       	jr	l_player_pick_item_00131
2203  08D3              l_player_pick_item_00121:
2204  08D3  CD 00 00    	call	_audio_efecto
2205  08D6  21 00 00    	ld	hl,_player_int
2206  08D9  34          	inc	(hl)
2207  08DA  21 00 00    	ld	hl,_player_max_mana
2208  08DD  7E          	ld	a, (hl)
2209  08DE  D6 C8       	sub	a,0xc8
2210  08E0  30 1F       	jr	NC,l_player_pick_item_00131
2211  08E2  7E          	ld	a, (hl)
2212  08E3  C6 0A       	add	a,0x0a
2213  08E5  77          	ld	(hl), a
2214  08E6  CD 00 00    	call	_game_update_stats
2215  08E9  18 16       	jr	l_player_pick_item_00131
2216  08EB              l_player_pick_item_00124:
2217  08EB  CD 00 00    	call	_audio_efecto
2218  08EE  21 00 00    	ld	hl,_player_int
2219  08F1  34          	inc	(hl)
2220  08F2  21 00 00    	ld	hl,_player_max_mana
2221  08F5  7E          	ld	a, (hl)
2222  08F6  D6 C8       	sub	a,0xc8
2223  08F8  30 07       	jr	NC,l_player_pick_item_00131
2224  08FA  7E          	ld	a, (hl)
2225  08FB  C6 0A       	add	a,0x0a
2226  08FD  77          	ld	(hl), a
2227  08FE  CD 00 00    	call	_game_update_stats
2228  0901              l_player_pick_item_00131:
2229  0901  33          	inc	sp
2230  0902  DD E1       	pop	ix
2231  0904  C9          	ret
2232  0905              	SECTION code_compiler
2233  0905              ;	---------------------------------
2234  0905              ; Function player_hit_platform
2235  0905              ; ---------------------------------
2236  0905              _player_hit_platform:
2237  0905  CD 00 00    	call	___sdcc_enter_ix
2238  0908  F5          	push	af
2239  0909  3B          	dec	sp
2240  090A  3A 00 00    	ld	a,(_player_hit_lin)
2241  090D  B7          	or	a, a
2242  090E  C2 CD 0B    	jp	NZ, l_player_hit_platform_00147
2243  0911  01 07 00    	ld	bc,_lin+7
2244  0914  0A          	ld	a, (bc)
2245  0915  5F          	ld	e, a
2246  0916  3E 10       	ld	a,0x10
2247  0918  93          	sub	a, e
2248  0919  D2 CD 0B    	jp	NC, l_player_hit_platform_00147
2249  091C  2A 00 00    	ld	hl,(_index1)
2250  091F  11 00 00    	ld	de,_scr_map
2251  0922  19          	add	hl,de
2252  0923  7E          	ld	a,(hl)
2253  0924  EB          	ex	de,hl
2254  0925  FE 45       	cp	a,0x45
2255  0927  DA CD 0B    	jp	C,l_player_hit_platform_00147
2256  092A  D6 4D       	sub	a,0x4d
2257  092C  20 42       	jr	NZ,l_player_hit_platform_00102
2258  092E  2A 00 00    	ld	hl,(_index1)
2259  0931  D5          	push	de
2260  0932  CD 00 00    	call	_game_match_back
2261  0935  D1          	pop	de
2262  0936  7D          	ld	a,l
2263  0937  12          	ld	(de), a
2264  0938  2A 00 00    	ld	hl,(_index1)
2265  093B  CD 00 00    	call	_game_obj_set
2266  093E  CD 00 00    	call	_audio_explosion
2267  0941  21 00 00    	ld	hl,_index1
2268  0944  7E          	ld	a, (hl)
2269  0945  E6 0F       	and	a,0x0f
2270  0947  87          	add	a, a
2271  0948  57          	ld	d, a
2272  0949  4E          	ld	c, (hl)
2273  094A  23          	inc	hl
2274  094B  5E          	ld	e, (hl)
2275  094C  06 04       	ld	b,0x04
2276  094E  79          	ld	a,c
2277  094F              l_player_hit_platform_00260:
2278  094F  CB 3B       	srl	e
2279  0951  1F          	rra
2280  0952  10 FB       	djnz	l_player_hit_platform_00260
2281  0954  07          	rlca
2282  0955  07          	rlca
2283  0956  07          	rlca
2284  0957  07          	rlca
2285  0958  E6 F0       	and	a,0xf0
2286  095A  47          	ld	b, a
2287  095B  21 00 00    	ld	hl,0x0000
2288  095E  E5          	push	hl
2289  095F  21 87 03    	ld	hl,0x0387
2290  0962  E5          	push	hl
2291  0963  58          	ld	e,b
2292  0964  D5          	push	de
2293  0965  CD 00 00    	call	_spr_add_anim
2294  0968  F1          	pop	af
2295  0969  F1          	pop	af
2296  096A  F1          	pop	af
2297  096B  2E 01       	ld	l,0x01
2298  096D  C3 CF 0B    	jp	l_player_hit_platform_00150
2299  0970              l_player_hit_platform_00102:
2300  0970  ED 5B 00 00 	ld	de,(_curr_time)
2301  0974  ED 53 0E 00 	ld	(_spr_timer + 0x000e),de
2302  0978  0A          	ld	a, (bc)
2303  0979  5F          	ld	e, a
2304  097A  16 00       	ld	d,0x00
2305  097C  21 F8 FF    	ld	hl,0xfff8
2306  097F  19          	add	hl,de
2307  0980  EB          	ex	de,hl
2308  0981  7B          	ld	a,e
2309  0982  1E 04       	ld	e,0x04
2310  0984              l_player_hit_platform_00261:
2311  0984  CB 2A       	sra	d
2312  0986  1F          	rra
2313  0987  1D          	dec	e
2314  0988  20 FA       	jr	NZ,l_player_hit_platform_00261
2315  098A  07          	rlca
2316  098B  07          	rlca
2317  098C  07          	rlca
2318  098D  07          	rlca
2319  098E  E6 F0       	and	a,0xf0
2320  0990  C6 08       	add	a,0x08
2321  0992  32 00 00    	ld	(_player_hit_lin),a
2322  0995  21 07 00    	ld	hl,+(_col + 0x0007)
2323  0998  5E          	ld	e, (hl)
2324  0999  CB 43       	bit	0, e
2325  099B  20 06       	jr	NZ,l_player_hit_platform_00113
2326  099D  21 00 00    	ld	hl,_player_hit_col
2327  09A0  73          	ld	(hl), e
2328  09A1  18 2C       	jr	l_player_hit_platform_00114
2329  09A3              l_player_hit_platform_00113:
2330  09A3  2A 07 00    	ld	hl,(_state + 0x0007)
2331  09A6  53          	ld	d, e
2332  09A7  14          	inc	d
2333  09A8  1D          	dec	e
2334  09A9  CB 5D       	bit	3, l
2335  09AB  28 12       	jr	Z,l_player_hit_platform_00110
2336  09AD  3A 00 00    	ld	a,(_g_player_hit_right)
2337  09B0  B7          	or	a, a
2338  09B1  28 06       	jr	Z,l_player_hit_platform_00104
2339  09B3  21 00 00    	ld	hl,_player_hit_col
2340  09B6  72          	ld	(hl), d
2341  09B7  18 16       	jr	l_player_hit_platform_00114
2342  09B9              l_player_hit_platform_00104:
2343  09B9  21 00 00    	ld	hl,_player_hit_col
2344  09BC  73          	ld	(hl), e
2345  09BD  18 10       	jr	l_player_hit_platform_00114
2346  09BF              l_player_hit_platform_00110:
2347  09BF  3A 00 00    	ld	a,(_g_player_hit_left)
2348  09C2  B7          	or	a, a
2349  09C3  28 06       	jr	Z,l_player_hit_platform_00107
2350  09C5  21 00 00    	ld	hl,_player_hit_col
2351  09C8  73          	ld	(hl), e
2352  09C9  18 04       	jr	l_player_hit_platform_00114
2353  09CB              l_player_hit_platform_00107:
2354  09CB  21 00 00    	ld	hl,_player_hit_col
2355  09CE  72          	ld	(hl), d
2356  09CF              l_player_hit_platform_00114:
2357  09CF  11 00 00    	ld	de,_scr_map
2358  09D2  2A 00 00    	ld	hl,(_index1)
2359  09D5  19          	add	hl,de
2360  09D6  7E          	ld	a,(hl)
2361  09D7  FE 5A       	cp	a,0x5a
2362  09D9  28 05       	jr	Z,l_player_hit_platform_00141
2363  09DB  D6 5D       	sub	a,0x5d
2364  09DD  C2 9C 0B    	jp	NZ,l_player_hit_platform_00142
2365  09E0              l_player_hit_platform_00141:
2366  09E0  3A 00 00    	ld	a,(_game_boss)
2367  09E3  B7          	or	a, a
2368  09E4  28 0B       	jr	Z,l_player_hit_platform_00176
2369  09E6  3A 00 00    	ld	a,(_game_mush_count)
2370  09E9  B7          	or	a, a
2371  09EA  28 05       	jr	Z,l_player_hit_platform_00176
2372  09EC  2E 00       	ld	l,0x00
2373  09EE  C3 CF 0B    	jp	l_player_hit_platform_00150
2374  09F1              l_player_hit_platform_00176:
2375  09F1  DD 36 FD 00 	ld	(ix-3),0x00
2376  09F5              l_player_hit_platform_00138:
2377  09F5  DD 7E FD    	ld	a,(ix-3)
2378  09F8  D6 07       	sub	a,0x07
2379  09FA  D2 9C 0B    	jp	NC, l_player_hit_platform_00142
2380  09FD  3E 00       	ld	a, +((_mush_index) & 0xFF)
2381  09FF  DD 86 FD    	add	a,(ix-3)
2382  0A02  6F          	ld	l, a
2383  0A03  3E 00       	ld	a, +((_mush_index) / 256)
2384  0A05  CE 00       	adc	a,0x00
2385  0A07  67          	ld	h, a
2386  0A08  5E          	ld	e, (hl)
2387  0A09  16 00       	ld	d,0x00
2388  0A0B  21 00 00    	ld	hl,_index1
2389  0A0E  7E          	ld	a, (hl)
2390  0A0F  93          	sub	a, e
2391  0A10  C2 96 0B    	jp	NZ,l_player_hit_platform_00137
2392  0A13  23          	inc	hl
2393  0A14  7E          	ld	a, (hl)
2394  0A15  92          	sub	a, d
2395  0A16  C2 96 0B    	jp	NZ,l_player_hit_platform_00137
2396  0A19  0A          	ld	a, (bc)
2397  0A1A  07          	rlca
2398  0A1B  07          	rlca
2399  0A1C  07          	rlca
2400  0A1D  07          	rlca
2401  0A1E  E6 0F       	and	a,0x0f
2402  0A20  07          	rlca
2403  0A21  07          	rlca
2404  0A22  07          	rlca
2405  0A23  07          	rlca
2406  0A24  E6 F0       	and	a,0xf0
2407  0A26  C6 E0       	add	a,0xe0
2408  0A28  32 00 00    	ld	(_s_lin1),a
2409  0A2B  3A 00 00    	ld	a,(_player_hit_col)
2410  0A2E  CB 3F       	srl	a
2411  0A30  87          	add	a, a
2412  0A31  32 00 00    	ld	(_s_col1),a
2413  0A34  1E 00       	ld	e,0x00
2414  0A36              l_player_hit_platform_00120:
2415  0A36  7B          	ld	a, e
2416  0A37  D6 07       	sub	a,0x07
2417  0A39  30 21       	jr	NC,l_player_hit_platform_00122
2418  0A3B  16 00       	ld	d,0x00
2419  0A3D  21 00 00    	ld	hl,_mush_index
2420  0A40  19          	add	hl, de
2421  0A41  56          	ld	d, (hl)
2422  0A42  DD 72 FE    	ld	(ix-2),d
2423  0A45  DD 36 FF 00 	ld	(ix-1),0x00
2424  0A49  21 00 00    	ld	hl,_index1
2425  0A4C  7E          	ld	a, (hl)
2426  0A4D  DD 96 FE    	sub	a,(ix-2)
2427  0A50  20 07       	jr	NZ,l_player_hit_platform_00270
2428  0A52  23          	inc	hl
2429  0A53  7E          	ld	a, (hl)
2430  0A54  DD 96 FF    	sub	a,(ix-1)
2431  0A57  28 03       	jr	Z,l_player_hit_platform_00122
2432  0A59              l_player_hit_platform_00270:
2433  0A59  1C          	inc	e
2434  0A5A  18 DA       	jr	l_player_hit_platform_00120
2435  0A5C              l_player_hit_platform_00122:
2436  0A5C  16 00       	ld	d,0x00
2437  0A5E  21 00 00    	ld	hl,_mush_class
2438  0A61  19          	add	hl, de
2439  0A62  7E          	ld	a, (hl)
2440  0A63  FE 79       	cp	a,0x79
2441  0A65  28 18       	jr	Z,l_player_hit_platform_00123
2442  0A67  FE 7A       	cp	a,0x7a
2443  0A69  28 31       	jr	Z,l_player_hit_platform_00124
2444  0A6B  FE 7B       	cp	a,0x7b
2445  0A6D  28 65       	jr	Z,l_player_hit_platform_00126
2446  0A6F  FE 7C       	cp	a,0x7c
2447  0A71  28 45       	jr	Z,l_player_hit_platform_00125
2448  0A73  FE 7D       	cp	a,0x7d
2449  0A75  CA 0C 0B    	jp	Z,l_player_hit_platform_00128
2450  0A78  D6 7E       	sub	a,0x7e
2451  0A7A  28 74       	jr	Z,l_player_hit_platform_00127
2452  0A7C  C3 26 0B    	jp	l_player_hit_platform_00129
2453  0A7F              l_player_hit_platform_00123:
2454  0A7F  2E 02       	ld	l,0x02
2455  0A81  CD 00 00    	call	_zx_border_fastcall
2456  0A84  3A 00 00    	ld	a,(_s_col1)
2457  0A87  C5          	push	bc
2458  0A88  21 06 FF    	ld	hl,0xff06
2459  0A8B  E5          	push	hl
2460  0A8C  F5          	push	af
2461  0A8D  33          	inc	sp
2462  0A8E  3A 00 00    	ld	a,(_s_lin1)
2463  0A91  F5          	push	af
2464  0A92  33          	inc	sp
2465  0A93  CD 00 00    	call	_enemy_init
2466  0A96  F1          	pop	af
2467  0A97  F1          	pop	af
2468  0A98  C1          	pop	bc
2469  0A99  C3 26 0B    	jp	l_player_hit_platform_00129
2470  0A9C              l_player_hit_platform_00124:
2471  0A9C  2E 02       	ld	l,0x02
2472  0A9E  CD 00 00    	call	_zx_border_fastcall
2473  0AA1  3A 00 00    	ld	a,(_s_col1)
2474  0AA4  C5          	push	bc
2475  0AA5  21 06 01    	ld	hl,0x0106
2476  0AA8  E5          	push	hl
2477  0AA9  F5          	push	af
2478  0AAA  33          	inc	sp
2479  0AAB  3A 00 00    	ld	a,(_s_lin1)
2480  0AAE  F5          	push	af
2481  0AAF  33          	inc	sp
2482  0AB0  CD 00 00    	call	_enemy_init
2483  0AB3  F1          	pop	af
2484  0AB4  F1          	pop	af
2485  0AB5  C1          	pop	bc
2486  0AB6  18 6E       	jr	l_player_hit_platform_00129
2487  0AB8              l_player_hit_platform_00125:
2488  0AB8  2E 01       	ld	l,0x01
2489  0ABA  CD 00 00    	call	_zx_border_fastcall
2490  0ABD  3A 00 00    	ld	a,(_s_col1)
2491  0AC0  C5          	push	bc
2492  0AC1  21 07 01    	ld	hl,0x0107
2493  0AC4  E5          	push	hl
2494  0AC5  F5          	push	af
2495  0AC6  33          	inc	sp
2496  0AC7  3A 00 00    	ld	a,(_s_lin1)
2497  0ACA  F5          	push	af
2498  0ACB  33          	inc	sp
2499  0ACC  CD 00 00    	call	_enemy_init
2500  0ACF  F1          	pop	af
2501  0AD0  F1          	pop	af
2502  0AD1  C1          	pop	bc
2503  0AD2  18 52       	jr	l_player_hit_platform_00129
2504  0AD4              l_player_hit_platform_00126:
2505  0AD4  2E 01       	ld	l,0x01
2506  0AD6  CD 00 00    	call	_zx_border_fastcall
2507  0AD9  3A 00 00    	ld	a,(_s_col1)
2508  0ADC  C5          	push	bc
2509  0ADD  21 07 FF    	ld	hl,0xff07
2510  0AE0  E5          	push	hl
2511  0AE1  F5          	push	af
2512  0AE2  33          	inc	sp
2513  0AE3  3A 00 00    	ld	a,(_s_lin1)
2514  0AE6  F5          	push	af
2515  0AE7  33          	inc	sp
2516  0AE8  CD 00 00    	call	_enemy_init
2517  0AEB  F1          	pop	af
2518  0AEC  F1          	pop	af
2519  0AED  C1          	pop	bc
2520  0AEE  18 36       	jr	l_player_hit_platform_00129
2521  0AF0              l_player_hit_platform_00127:
2522  0AF0  2E 04       	ld	l,0x04
2523  0AF2  CD 00 00    	call	_zx_border_fastcall
2524  0AF5  3A 00 00    	ld	a,(_s_col1)
2525  0AF8  C5          	push	bc
2526  0AF9  21 08 01    	ld	hl,0x0108
2527  0AFC  E5          	push	hl
2528  0AFD  F5          	push	af
2529  0AFE  33          	inc	sp
2530  0AFF  3A 00 00    	ld	a,(_s_lin1)
2531  0B02  F5          	push	af
2532  0B03  33          	inc	sp
2533  0B04  CD 00 00    	call	_enemy_init
2534  0B07  F1          	pop	af
2535  0B08  F1          	pop	af
2536  0B09  C1          	pop	bc
2537  0B0A  18 1A       	jr	l_player_hit_platform_00129
2538  0B0C              l_player_hit_platform_00128:
2539  0B0C  2E 04       	ld	l,0x04
2540  0B0E  CD 00 00    	call	_zx_border_fastcall
2541  0B11  3A 00 00    	ld	a,(_s_col1)
2542  0B14  C5          	push	bc
2543  0B15  21 08 FF    	ld	hl,0xff08
2544  0B18  E5          	push	hl
2545  0B19  F5          	push	af
2546  0B1A  33          	inc	sp
2547  0B1B  3A 00 00    	ld	a,(_s_lin1)
2548  0B1E  F5          	push	af
2549  0B1F  33          	inc	sp
2550  0B20  CD 00 00    	call	_enemy_init
2551  0B23  F1          	pop	af
2552  0B24  F1          	pop	af
2553  0B25  C1          	pop	bc
2554  0B26              l_player_hit_platform_00129:
2555  0B26  21 00 00    	ld	hl,_game_mush_count
2556  0B29  34          	inc	(hl)
2557  0B2A  3A 00 00    	ld	a,(_game_boss)
2558  0B2D  B7          	or	a, a
2559  0B2E  20 66       	jr	NZ,l_player_hit_platform_00137
2560  0B30  3A 00 00    	ld	a,(_index1)
2561  0B33  C6 F0       	add	a,0xf0
2562  0B35  32 00 00    	ld	(_index0),a
2563  0B38  3A 01 00    	ld	a,(_index1 + 1)
2564  0B3B  CE FF       	adc	a,0xff
2565  0B3D  21 01 00    	ld	hl,_index0 + 1
2566  0B40  77          	ld	(hl), a
2567  0B41  3E 00       	ld	a, +((_scr_map) & 0xFF)
2568  0B43  2B          	dec	hl
2569  0B44  86          	add	a, (hl)
2570  0B45  5F          	ld	e, a
2571  0B46  3E 00       	ld	a, +((_scr_map) / 256)
2572  0B48  23          	inc	hl
2573  0B49  8E          	adc	a, (hl)
2574  0B4A  57          	ld	d, a
2575  0B4B  C5          	push	bc
2576  0B4C  D5          	push	de
2577  0B4D  2B          	dec	hl
2578  0B4E  7E          	ld	a, (hl)
2579  0B4F  23          	inc	hl
2580  0B50  66          	ld	h, (hl)
2581  0B51  6F          	ld	l, a
2582  0B52  CD 00 00    	call	_game_match_back
2583  0B55  D1          	pop	de
2584  0B56  C1          	pop	bc
2585  0B57  7D          	ld	a,l
2586  0B58  12          	ld	(de), a
2587  0B59  11 00 00    	ld	de,_scr_map
2588  0B5C  2A 00 00    	ld	hl,(_index1)
2589  0B5F  19          	add	hl,de
2590  0B60  7E          	ld	a,(hl)
2591  0B61  EB          	ex	de,hl
2592  0B62  FE 5A       	cp	a,0x5a
2593  0B64  28 04       	jr	Z,l_player_hit_platform_00130
2594  0B66  D6 5D       	sub	a,0x5d
2595  0B68  20 05       	jr	NZ,l_player_hit_platform_00131
2596  0B6A              l_player_hit_platform_00130:
2597  0B6A  3E 4F       	ld	a,0x4f
2598  0B6C  12          	ld	(de), a
2599  0B6D  18 03       	jr	l_player_hit_platform_00132
2600  0B6F              l_player_hit_platform_00131:
2601  0B6F  3E 54       	ld	a,0x54
2602  0B71  12          	ld	(de), a
2603  0B72              l_player_hit_platform_00132:
2604  0B72  2A 00 00    	ld	hl,(_index1)
2605  0B75  11 F0 FF    	ld	de,0xfff0
2606  0B78  19          	add	hl,de
2607  0B79  EB          	ex	de,hl
2608  0B7A  21 01 00    	ld	hl,_index1 + 1
2609  0B7D  C5          	push	bc
2610  0B7E  EB          	ex	de,hl
2611  0B7F  CD 00 00    	call	_game_obj_set
2612  0B82  C1          	pop	bc
2613  0B83  3A 00 00    	ld	a,(_s_lin1)
2614  0B86  C6 10       	add	a,0x10
2615  0B88  57          	ld	d, a
2616  0B89  3A 00 00    	ld	a,(_s_col1)
2617  0B8C  C5          	push	bc
2618  0B8D  F5          	push	af
2619  0B8E  33          	inc	sp
2620  0B8F  1E 4F       	ld	e,0x4f
2621  0B91  D5          	push	de
2622  0B92  CD 00 00    	call	_NIRVANAP_drawT_callee
2623  0B95  C1          	pop	bc
2624  0B96              l_player_hit_platform_00137:
2625  0B96  DD 34 FD    	inc	(ix-3)
2626  0B99  C3 F5 09    	jp	l_player_hit_platform_00138
2627  0B9C              l_player_hit_platform_00142:
2628  0B9C  CD 00 00    	call	_audio_golpe
2629  0B9F  2E 01       	ld	l,0x01
2630  0BA1  CD 00 00    	call	_spr_brick_anim
2631  0BA4  2A FF FF    	ld	hl,(_player_hit_col - 1)
2632  0BA7  3A 00 00    	ld	a,(_player_hit_lin)
2633  0BAA  6F          	ld	l,a
2634  0BAB  E5          	push	hl
2635  0BAC  CD 00 00    	call	_spr_calc_index
2636  0BAF  F1          	pop	af
2637  0BB0  22 00 00    	ld	(_index1),hl
2638  0BB3  3E 10       	ld	a,0x10
2639  0BB5  21 00 00    	ld	hl,_index1
2640  0BB8  BE          	cp	a, (hl)
2641  0BB9  3E 00       	ld	a,0x00
2642  0BBB  23          	inc	hl
2643  0BBC  9E          	sbc	a, (hl)
2644  0BBD  30 0A       	jr	NC,l_player_hit_platform_00145
2645  0BBF  2B          	dec	hl
2646  0BC0  7E          	ld	a, (hl)
2647  0BC1  C6 F0       	add	a,0xf0
2648  0BC3  32 00 00    	ld	(_sprite_curr_index),a
2649  0BC6  CD 57 07    	call	_player_pick_item
2650  0BC9              l_player_hit_platform_00145:
2651  0BC9  2E 01       	ld	l,0x01
2652  0BCB  18 02       	jr	l_player_hit_platform_00150
2653  0BCD              l_player_hit_platform_00147:
2654  0BCD  2E 00       	ld	l,0x00
2655  0BCF              l_player_hit_platform_00150:
2656  0BCF  DD F9       	ld	sp, ix
2657  0BD1  DD E1       	pop	ix
2658  0BD3  C9          	ret
2659  0BD4              	SECTION code_compiler
2660  0BD4              ;	---------------------------------
2661  0BD4              ; Function player_hit_platform_clear
2662  0BD4              ; ---------------------------------
2663  0BD4              _player_hit_platform_clear:
2664  0BD4  3E 04       	ld	a,0x04
2665  0BD6  F5          	push	af
2666  0BD7  33          	inc	sp
2667  0BD8  21 0E 00    	ld	hl, +(_spr_timer + 0x000e)
2668  0BDB  E5          	push	hl
2669  0BDC  CD 00 00    	call	_game_check_time
2670  0BDF  F1          	pop	af
2671  0BE0  33          	inc	sp
2672  0BE1  7D          	ld	a, l
2673  0BE2  B7          	or	a, a
2674  0BE3  C8          	ret	Z
2675  0BE4  2A FF FF    	ld	hl,(_player_hit_col - 1)
2676  0BE7  3A 00 00    	ld	a,(_player_hit_lin)
2677  0BEA  6F          	ld	l,a
2678  0BEB  E5          	push	hl
2679  0BEC  CD 00 00    	call	_spr_calc_index
2680  0BEF  F1          	pop	af
2681  0BF0  22 00 00    	ld	(_index1),hl
2682  0BF3  2E 00       	ld	l,0x00
2683  0BF5  CD 00 00    	call	_spr_brick_anim
2684  0BF8  21 00 00    	ld	hl,_player_hit_lin
2685  0BFB  36 00       	ld	(hl),0x00
2686  0BFD  21 00 00    	ld	hl,_player_hit_col
2687  0C00  36 00       	ld	(hl),0x00
2688  0C02  C9          	ret
2689  0C03              	SECTION code_compiler
2690  0C03              ;	---------------------------------
2691  0C03              ; Function player_score_add
2692  0C03              ; ---------------------------------
2693  0C03              _player_score_add:
2694  0C03  ED 4B 00 00 	ld	bc,(_player_score)
2695  0C07  09          	add	hl,bc
2696  0C08  22 00 00    	ld	(_player_score),hl
2697  0C0B  21 00 00    	ld	hl,_player_lvl
2698  0C0E  7E          	ld	a, (hl)
2699  0C0F  D6 0A       	sub	a,0x0a
2700  0C11  30 45       	jr	NC,l_player_score_add_00104
2701  0C13  01 00 00    	ld	bc,_player_lvl_table+0
2702  0C16  6E          	ld	l,(hl)
2703  0C17  26 00       	ld	h,0x00
2704  0C19  29          	add	hl, hl
2705  0C1A  09          	add	hl, bc
2706  0C1B  4E          	ld	c, (hl)
2707  0C1C  23          	inc	hl
2708  0C1D  46          	ld	b, (hl)
2709  0C1E  21 00 00    	ld	hl,_player_score
2710  0C21  7E          	ld	a, (hl)
2711  0C22  91          	sub	a, c
2712  0C23  23          	inc	hl
2713  0C24  7E          	ld	a, (hl)
2714  0C25  98          	sbc	a, b
2715  0C26  38 30       	jr	C,l_player_score_add_00104
2716  0C28  21 00 00    	ld	hl,_player_lvl
2717  0C2B  34          	inc	(hl)
2718  0C2C  CD 00 00    	call	_game_update_stats
2719  0C2F  CD 00 00    	call	_spr_flatten
2720  0C32  CD 00 00    	call	_audio_efecto
2721  0C35  21 16 00    	ld	hl,___str_2
2722  0C38  E5          	push	hl
2723  0C39  21 0C 0C    	ld	hl,0x0c0c
2724  0C3C  E5          	push	hl
2725  0C3D  CD 00 00    	call	_zx_print_str
2726  0C40  AF          	xor	a, a
2727  0C41  F5          	push	af
2728  0C42  33          	inc	sp
2729  0C43  21 3C 00    	ld	hl,0x003c
2730  0C46  E5          	push	hl
2731  0C47  21 0C 15    	ld	hl,0x150c
2732  0C4A  E5          	push	hl
2733  0C4B  3E 0C       	ld	a,0x0c
2734  0C4D  F5          	push	af
2735  0C4E  33          	inc	sp
2736  0C4F  CD 00 00    	call	_game_colour_message
2737  0C52  F1          	pop	af
2738  0C53  F1          	pop	af
2739  0C54  F1          	pop	af
2740  0C55  CD 00 00    	call	_spr_unflattenP1
2741  0C58              l_player_score_add_00104:
2742  0C58  3A 00 00    	ld	a,(_game_score_top)
2743  0C5B  21 00 00    	ld	hl,_player_score
2744  0C5E  96          	sub	a, (hl)
2745  0C5F  3A 01 00    	ld	a,(_game_score_top + 1)
2746  0C62  23          	inc	hl
2747  0C63  9E          	sbc	a, (hl)
2748  0C64  30 06       	jr	NC,l_player_score_add_00106
2749  0C66  2A 00 00    	ld	hl,(_player_score)
2750  0C69  22 00 00    	ld	(_game_score_top),hl
2751  0C6C              l_player_score_add_00106:
2752  0C6C  CD 00 00    	call	_game_print_score
2753  0C6F  C9          	ret
2754  0C70              	SECTION rodata_compiler
2755  0016              ___str_2:
2756  0016  4C 45 56 45 4C 20 55 50 21 
                        	DEFM "LEVEL UP!"
2757  001F  00          	DEFB 0x00
2758  0020              	SECTION code_compiler
2759  0C70              ;	---------------------------------
2760  0C70              ; Function player_check_floor
2761  0C70              ; ---------------------------------
2762  0C70              _player_check_floor:
2763  0C70  CD 00 00    	call	___sdcc_enter_ix
2764  0C73  F5          	push	af
2765  0C74  F5          	push	af
2766  0C75  F5          	push	af
2767  0C76  21 07 00    	ld	hl,+(_col + 0x0007)
2768  0C79  56          	ld	d, (hl)
2769  0C7A  3A 07 00    	ld	a,(_lin + 0x0007)
2770  0C7D  C6 10       	add	a,0x10
2771  0C7F  5F          	ld	e, a
2772  0C80  D5          	push	de
2773  0C81  CD 00 00    	call	_spr_calc_index
2774  0C84  F1          	pop	af
2775  0C85  DD 75 FC    	ld	(ix-4),l
2776  0C88  DD 74 FD    	ld	(ix-3),h
2777  0C8B  01 00 00    	ld	bc,_scr_map+0
2778  0C8E  79          	ld	a, c
2779  0C8F  DD 86 FC    	add	a,(ix-4)
2780  0C92  DD 77 FE    	ld	(ix-2),a
2781  0C95  78          	ld	a, b
2782  0C96  DD 8E FD    	adc	a,(ix-3)
2783  0C99  DD 6E FE    	ld	l,(ix-2)
2784  0C9C  DD 77 FF    	ld	(ix-1),a
2785  0C9F  67          	ld	h,a
2786  0CA0  7E          	ld	a, (hl)
2787  0CA1  DD 77 FB    	ld	(ix-5),a
2788  0CA4  DD 6E FC    	ld	l,(ix-4)
2789  0CA7  DD 66 FD    	ld	h,(ix-3)
2790  0CAA  23          	inc	hl
2791  0CAB  09          	add	hl,bc
2792  0CAC  3A 00 00    	ld	a,(_s_lin0)
2793  0CAF  D6 90       	sub	a,0x90
2794  0CB1  4D          	ld	c,l
2795  0CB2  44          	ld	b,h
2796  0CB3  20 26       	jr	NZ,l_player_check_floor_00108
2797  0CB5  3A 00 00    	ld	a,(_map_heigth)
2798  0CB8  C5          	push	bc
2799  0CB9  F5          	push	af
2800  0CBA  33          	inc	sp
2801  0CBB  3A 00 00    	ld	a,(_scr_curr)
2802  0CBE  F5          	push	af
2803  0CBF  33          	inc	sp
2804  0CC0  CD 00 00    	call	__divuchar_callee
2805  0CC3  C1          	pop	bc
2806  0CC4  7D          	ld	a,l
2807  0CC5  3C          	inc	a
2808  0CC6  32 00 00    	ld	(_tmp1),a
2809  0CC9  21 00 00    	ld	hl,_map_heigth
2810  0CCC  96          	sub	a, (hl)
2811  0CCD  30 06       	jr	NC,l_player_check_floor_00102
2812  0CCF  DD 36 FB 00 	ld	(ix-5),0x00
2813  0CD3  18 16       	jr	l_player_check_floor_00109
2814  0CD5              l_player_check_floor_00102:
2815  0CD5  DD 36 FB 48 	ld	(ix-5),0x48
2816  0CD9  18 10       	jr	l_player_check_floor_00109
2817  0CDB              l_player_check_floor_00108:
2818  0CDB  3A 07 00    	ld	a,(_col + 0x0007)
2819  0CDE  0F          	rrca
2820  0CDF  38 06       	jr	C,l_player_check_floor_00105
2821  0CE1  DD 36 FA 00 	ld	(ix-6),0x00
2822  0CE5  18 04       	jr	l_player_check_floor_00109
2823  0CE7              l_player_check_floor_00105:
2824  0CE7  0A          	ld	a, (bc)
2825  0CE8  DD 77 FA    	ld	(ix-6),a
2826  0CEB              l_player_check_floor_00109:
2827  0CEB  DD 7E FB    	ld	a,(ix-5)
2828  0CEE  D6 3A       	sub	a,0x3a
2829  0CF0  38 07       	jr	C,l_player_check_floor_00132
2830  0CF2  DD 7E FB    	ld	a,(ix-5)
2831  0CF5  D6 60       	sub	a,0x60
2832  0CF7  38 32       	jr	C,l_player_check_floor_00128
2833  0CF9              l_player_check_floor_00132:
2834  0CF9  DD 7E FA    	ld	a,(ix-6)
2835  0CFC  D6 3A       	sub	a,0x3a
2836  0CFE  38 07       	jr	C,l_player_check_floor_00127
2837  0D00  DD 7E FA    	ld	a,(ix-6)
2838  0D03  D6 60       	sub	a,0x60
2839  0D05  38 24       	jr	C,l_player_check_floor_00128
2840  0D07              l_player_check_floor_00127:
2841  0D07  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
2842  0D0A  36 02       	ld	(hl),0x02
2843  0D0C  21 00 00    	ld	hl,_s_state
2844  0D0F  CB CE       	set	1, (hl)
2845  0D11  2E 00       	ld	l,0x00
2846  0D13  CD 34 06    	call	_player_check_stairs
2847  0D16  3A 00 00    	ld	a,(_player_onstair)
2848  0D19  B7          	or	a, a
2849  0D1A  C2 C1 0D    	jp	NZ, l_player_check_floor_00133
2850  0D1D  3A 00 00    	ld	a,(_s_lin0)
2851  0D20  D6 90       	sub	a,0x90
2852  0D22  C2 C1 0D    	jp	NZ,l_player_check_floor_00133
2853  0D25  CD 00 00    	call	_spr_page_down
2854  0D28  C3 C1 0D    	jp	l_player_check_floor_00133
2855  0D2B              l_player_check_floor_00128:
2856  0D2B  C5          	push	bc
2857  0D2C  3E 10       	ld	a,0x10
2858  0D2E  F5          	push	af
2859  0D2F  33          	inc	sp
2860  0D30  21 00 00    	ld	hl,_player_brick_time
2861  0D33  E5          	push	hl
2862  0D34  CD 00 00    	call	_game_check_time
2863  0D37  F1          	pop	af
2864  0D38  33          	inc	sp
2865  0D39  C1          	pop	bc
2866  0D3A  7D          	ld	a,l
2867  0D3B  B7          	or	a, a
2868  0D3C  CA C1 0D    	jp	Z, l_player_check_floor_00133
2869  0D3F  2A 00 00    	ld	hl,(_curr_time)
2870  0D42  22 00 00    	ld	(_player_brick_time),hl
2871  0D45  DD 7E FB    	ld	a,(ix-5)
2872  0D48  D6 40       	sub	a,0x40
2873  0D4A  20 18       	jr	NZ,l_player_check_floor_00114
2874  0D4C  C5          	push	bc
2875  0D4D  DD 6E FC    	ld	l,(ix-4)
2876  0D50  DD 66 FD    	ld	h,(ix-3)
2877  0D53  CD 00 00    	call	_game_match_back
2878  0D56  C1          	pop	bc
2879  0D57  5D          	ld	e,l
2880  0D58  DD 6E FE    	ld	l,(ix-2)
2881  0D5B  DD 66 FF    	ld	h,(ix-1)
2882  0D5E  73          	ld	(hl), e
2883  0D5F  C5          	push	bc
2884  0D60  CD C6 0D    	call	_player_gasta_brick
2885  0D63  C1          	pop	bc
2886  0D64              l_player_check_floor_00114:
2887  0D64  DD 7E FB    	ld	a,(ix-5)
2888  0D67  D6 3F       	sub	a,0x3f
2889  0D69  20 0D       	jr	NZ,l_player_check_floor_00116
2890  0D6B  DD 6E FE    	ld	l,(ix-2)
2891  0D6E  DD 66 FF    	ld	h,(ix-1)
2892  0D71  36 40       	ld	(hl),0x40
2893  0D73  C5          	push	bc
2894  0D74  CD C6 0D    	call	_player_gasta_brick
2895  0D77  C1          	pop	bc
2896  0D78              l_player_check_floor_00116:
2897  0D78  DD 7E FB    	ld	a,(ix-5)
2898  0D7B  D6 3E       	sub	a,0x3e
2899  0D7D  20 0D       	jr	NZ,l_player_check_floor_00118
2900  0D7F  DD 6E FE    	ld	l,(ix-2)
2901  0D82  DD 66 FF    	ld	h,(ix-1)
2902  0D85  36 3F       	ld	(hl),0x3f
2903  0D87  C5          	push	bc
2904  0D88  CD C6 0D    	call	_player_gasta_brick
2905  0D8B  C1          	pop	bc
2906  0D8C              l_player_check_floor_00118:
2907  0D8C  DD 7E FA    	ld	a,(ix-6)
2908  0D8F  D6 40       	sub	a,0x40
2909  0D91  20 12       	jr	NZ,l_player_check_floor_00120
2910  0D93  C5          	push	bc
2911  0D94  DD 6E FC    	ld	l,(ix-4)
2912  0D97  DD 66 FD    	ld	h,(ix-3)
2913  0D9A  CD 00 00    	call	_game_match_back
2914  0D9D  C1          	pop	bc
2915  0D9E  7D          	ld	a,l
2916  0D9F  02          	ld	(bc), a
2917  0DA0  C5          	push	bc
2918  0DA1  CD C6 0D    	call	_player_gasta_brick
2919  0DA4  C1          	pop	bc
2920  0DA5              l_player_check_floor_00120:
2921  0DA5  DD 7E FA    	ld	a,(ix-6)
2922  0DA8  D6 3F       	sub	a,0x3f
2923  0DAA  20 08       	jr	NZ,l_player_check_floor_00122
2924  0DAC  3E 40       	ld	a,0x40
2925  0DAE  02          	ld	(bc), a
2926  0DAF  C5          	push	bc
2927  0DB0  CD C6 0D    	call	_player_gasta_brick
2928  0DB3  C1          	pop	bc
2929  0DB4              l_player_check_floor_00122:
2930  0DB4  DD 7E FA    	ld	a,(ix-6)
2931  0DB7  D6 3E       	sub	a,0x3e
2932  0DB9  20 06       	jr	NZ,l_player_check_floor_00133
2933  0DBB  3E 3F       	ld	a,0x3f
2934  0DBD  02          	ld	(bc), a
2935  0DBE  CD C6 0D    	call	_player_gasta_brick
2936  0DC1              l_player_check_floor_00133:
2937  0DC1  DD F9       	ld	sp, ix
2938  0DC3  DD E1       	pop	ix
2939  0DC5  C9          	ret
2940  0DC6              	SECTION code_compiler
2941  0DC6              ;	---------------------------------
2942  0DC6              ; Function player_gasta_brick
2943  0DC6              ; ---------------------------------
2944  0DC6              _player_gasta_brick:
2945  0DC6  3A 00 00    	ld	a,(_s_lin0)
2946  0DC9  32 00 00    	ld	(_s_lin1),a
2947  0DCC  3A 00 00    	ld	a,(_s_col0)
2948  0DCF  32 00 00    	ld	(_s_col1),a
2949  0DD2  3A 07 00    	ld	a,(_lin + 0x0007)
2950  0DD5  C6 10       	add	a,0x10
2951  0DD7  32 00 00    	ld	(_s_lin0),a
2952  0DDA  3A 07 00    	ld	a,(_col + 0x0007)
2953  0DDD  32 00 00    	ld	(_s_col0),a
2954  0DE0  CD 00 00    	call	_spr_back_repaint
2955  0DE3  3A 00 00    	ld	a,(_s_lin1)
2956  0DE6  32 00 00    	ld	(_s_lin0),a
2957  0DE9  3A 00 00    	ld	a,(_s_col1)
2958  0DEC  32 00 00    	ld	(_s_col0),a
2959  0DEF  C9          	ret
2960  0DF0              	SECTION code_compiler
2961  0DF0              ;	---------------------------------
2962  0DF0              ; Function player_move_jump
2963  0DF0              ; ---------------------------------
2964  0DF0              _player_move_jump:
2965  0DF0  21 00 00    	ld	hl,_game_gravity
2966  0DF3  4E          	ld	c, (hl)
2967  0DF4  21 00 00    	ld	hl,_player_vel_y
2968  0DF7  7E          	ld	a, (hl)
2969  0DF8  81          	add	a, c
2970  0DF9  77          	ld	(hl), a
2971  0DFA  3A 00 00    	ld	a,(_player_vel_inc)
2972  0DFD  B7          	or	a, a
2973  0DFE  28 4A       	jr	Z,l_player_move_jump_00109
2974  0E00  3A 00 00    	ld	a,(_dirs)
2975  0E03  CB 07       	rlc	a
2976  0E05  E6 01       	and	a,0x01
2977  0E07  4F          	ld	c, a
2978  0E08  3A 00 00    	ld	a,(_game_2buttons)
2979  0E0B  B7          	or	a, a
2980  0E0C  28 06       	jr	Z,l_player_move_jump_00102
2981  0E0E  79          	ld	a, c
2982  0E0F  EE 01       	xor	a,0x01
2983  0E11  4F          	ld	c, a
2984  0E12  18 15       	jr	l_player_move_jump_00103
2985  0E14              l_player_move_jump_00102:
2986  0E14  CB 41       	bit	0, c
2987  0E16  28 07       	jr	Z,l_player_move_jump_00154
2988  0E18  21 00 00    	ld	hl,_dirs
2989  0E1B  CB 46       	bit	0, (hl)
2990  0E1D  20 04       	jr	NZ,l_player_move_jump_00155
2991  0E1F              l_player_move_jump_00154:
2992  0E1F  0E 00       	ld	c,0x00
2993  0E21  18 02       	jr	l_player_move_jump_00156
2994  0E23              l_player_move_jump_00155:
2995  0E23  0E 01       	ld	c,0x01
2996  0E25              l_player_move_jump_00156:
2997  0E25  79          	ld	a, c
2998  0E26  EE 01       	xor	a,0x01
2999  0E28  4F          	ld	c, a
3000  0E29              l_player_move_jump_00103:
3001  0E29  79          	ld	a, c
3002  0E2A  B7          	or	a, a
3003  0E2B  28 1D       	jr	Z,l_player_move_jump_00109
3004  0E2D  3A 00 00    	ld	a,(_player_vel_y1)
3005  0E30  21 00 00    	ld	hl,_player_vel_y
3006  0E33  96          	sub	a, (hl)
3007  0E34  E2 39 0E    	jp	PO, l_player_move_jump_00259
3008  0E37  EE 80       	xor	a,0x80
3009  0E39              l_player_move_jump_00259:
3010  0E39  F2 4A 0E    	jp	P, l_player_move_jump_00109
3011  0E3C  21 00 00    	ld	hl,_player_vel_y
3012  0E3F  CB 7E       	bit	7,(hl)
3013  0E41  28 07       	jr	Z,l_player_move_jump_00109
3014  0E43  36 00       	ld	(hl),0x00
3015  0E45  21 00 00    	ld	hl,_player_vel_inc
3016  0E48  36 00       	ld	(hl),0x00
3017  0E4A              l_player_move_jump_00109:
3018  0E4A  3E 78       	ld	a,0x78
3019  0E4C  21 00 00    	ld	hl,_player_vel_y
3020  0E4F  96          	sub	a, (hl)
3021  0E50  E2 55 0E    	jp	PO, l_player_move_jump_00260
3022  0E53  EE 80       	xor	a,0x80
3023  0E55              l_player_move_jump_00260:
3024  0E55  F2 5D 0E    	jp	P, l_player_move_jump_00111
3025  0E58  21 00 00    	ld	hl,_player_vel_y
3026  0E5B  36 78       	ld	(hl),0x78
3027  0E5D              l_player_move_jump_00111:
3028  0E5D  21 00 00    	ld	hl,_player_vel_y
3029  0E60  7E          	ld	a, (hl)
3030  0E61  EE 80       	xor	a,0x80
3031  0E63  D6 08       	sub	a,0x08
3032  0E65  30 02       	jr	NC,l_player_move_jump_00113
3033  0E67  36 88       	ld	(hl),0x88
3034  0E69              l_player_move_jump_00113:
3035  0E69  3A 00 00    	ld	a,(_player_vel_y)
3036  0E6C  4F          	ld	c,a
3037  0E6D  17          	rla
3038  0E6E  9F          	sbc	a, a
3039  0E6F  47          	ld	b, a
3040  0E70  CB 41       	bit	0,c
3041  0E72  21 00 00    	ld	hl,_s_lin1
3042  0E75  71          	ld	(hl),c
3043  0E76  28 04       	jr	Z,l_player_move_jump_00115
3044  0E78  21 00 00    	ld	hl,_s_lin1
3045  0E7B  35          	dec	(hl)
3046  0E7C              l_player_move_jump_00115:
3047  0E7C  3A 07 00    	ld	a,(_lin + 0x0007)
3048  0E7F  21 00 00    	ld	hl,_s_lin1
3049  0E82  86          	add	a, (hl)
3050  0E83  77          	ld	(hl), a
3051  0E84  CB 78       	bit	7, b
3052  0E86  28 5C       	jr	Z,l_player_move_jump_00141
3053  0E88  21 00 00    	ld	hl,_s_state
3054  0E8B  CD 00 00    	call	_spr_set_up
3055  0E8E  3E 90       	ld	a,0x90
3056  0E90  21 00 00    	ld	hl,_s_lin1
3057  0E93  96          	sub	a, (hl)
3058  0E94  30 11       	jr	NC,l_player_move_jump_00120
3059  0E96  CD 00 00    	call	_spr_page_up
3060  0E99  7D          	ld	a, l
3061  0E9A  B7          	or	a, a
3062  0E9B  28 05       	jr	Z,l_player_move_jump_00117
3063  0E9D  2E 00       	ld	l,0x00
3064  0E9F  C3 9B 0F    	jp	l_player_move_jump_00152
3065  0EA2              l_player_move_jump_00117:
3066  0EA2  21 00 00    	ld	hl,_s_lin1
3067  0EA5  36 00       	ld	(hl),0x00
3068  0EA7              l_player_move_jump_00120:
3069  0EA7  21 07 00    	ld	hl,+(_col + 0x0007)
3070  0EAA  46          	ld	b, (hl)
3071  0EAB  C5          	push	bc
3072  0EAC  33          	inc	sp
3073  0EAD  3A 00 00    	ld	a,(_s_lin1)
3074  0EB0  F5          	push	af
3075  0EB1  33          	inc	sp
3076  0EB2  CD 00 00    	call	_game_check_map
3077  0EB5  F1          	pop	af
3078  0EB6  7C          	ld	a,h
3079  0EB7  B5          	or	a,l
3080  0EB8  28 21       	jr	Z,l_player_move_jump_00124
3081  0EBA  CD 05 09    	call	_player_hit_platform
3082  0EBD  7D          	ld	a, l
3083  0EBE  B7          	or	a, a
3084  0EBF  28 12       	jr	Z,l_player_move_jump_00122
3085  0EC1  3A 07 00    	ld	a,(_lin + 0x0007)
3086  0EC4  07          	rlca
3087  0EC5  07          	rlca
3088  0EC6  07          	rlca
3089  0EC7  07          	rlca
3090  0EC8  E6 0F       	and	a,0x0f
3091  0ECA  07          	rlca
3092  0ECB  07          	rlca
3093  0ECC  07          	rlca
3094  0ECD  07          	rlca
3095  0ECE  E6 F0       	and	a,0xf0
3096  0ED0  32 07 00    	ld	((_lin + 0x0007)),a
3097  0ED3              l_player_move_jump_00122:
3098  0ED3  21 00 00    	ld	hl,_player_vel_y
3099  0ED6  36 00       	ld	(hl),0x00
3100  0ED8  C3 63 0F    	jp	l_player_move_jump_00142
3101  0EDB              l_player_move_jump_00124:
3102  0EDB  3A 00 00    	ld	a,(_s_lin1)
3103  0EDE  32 07 00    	ld	((_lin + 0x0007)),a
3104  0EE1  C3 63 0F    	jp	l_player_move_jump_00142
3105  0EE4              l_player_move_jump_00141:
3106  0EE4  21 00 00    	ld	hl,_s_state
3107  0EE7  CD 00 00    	call	_spr_set_down
3108  0EEA  3E 90       	ld	a,0x90
3109  0EEC  21 00 00    	ld	hl,_s_lin1
3110  0EEF  96          	sub	a, (hl)
3111  0EF0  30 11       	jr	NC,l_player_move_jump_00130
3112  0EF2  CD 00 00    	call	_spr_page_down
3113  0EF5  7D          	ld	a, l
3114  0EF6  B7          	or	a, a
3115  0EF7  28 05       	jr	Z,l_player_move_jump_00127
3116  0EF9  2E 00       	ld	l,0x00
3117  0EFB  C3 9B 0F    	jp	l_player_move_jump_00152
3118  0EFE              l_player_move_jump_00127:
3119  0EFE  21 00 00    	ld	hl,_s_lin1
3120  0F01  36 90       	ld	(hl),0x90
3121  0F03              l_player_move_jump_00130:
3122  0F03  21 07 00    	ld	hl,+(_col + 0x0007)
3123  0F06  56          	ld	d, (hl)
3124  0F07  3A 00 00    	ld	a,(_s_lin1)
3125  0F0A  C6 10       	add	a,0x10
3126  0F0C  5F          	ld	e, a
3127  0F0D  D5          	push	de
3128  0F0E  CD 00 00    	call	_game_check_map
3129  0F11  F1          	pop	af
3130  0F12  7C          	ld	a,h
3131  0F13  B5          	or	a,l
3132  0F14  28 47       	jr	Z,l_player_move_jump_00138
3133  0F16  2E 00       	ld	l,0x00
3134  0F18  CD 34 06    	call	_player_check_stairs
3135  0F1B  3A 00 00    	ld	a,(_player_onstair)
3136  0F1E  B7          	or	a, a
3137  0F1F  20 05       	jr	NZ,l_player_move_jump_00132
3138  0F21  2E 01       	ld	l,0x01
3139  0F23  CD 34 06    	call	_player_check_stairs
3140  0F26              l_player_move_jump_00132:
3141  0F26  3A 00 00    	ld	a,(_player_onstair)
3142  0F29  B7          	or	a, a
3143  0F2A  20 12       	jr	NZ,l_player_move_jump_00134
3144  0F2C  3A 00 00    	ld	a,(_s_lin1)
3145  0F2F  07          	rlca
3146  0F30  07          	rlca
3147  0F31  07          	rlca
3148  0F32  07          	rlca
3149  0F33  E6 0F       	and	a,0x0f
3150  0F35  07          	rlca
3151  0F36  07          	rlca
3152  0F37  07          	rlca
3153  0F38  07          	rlca
3154  0F39  E6 F0       	and	a,0xf0
3155  0F3B  32 07 00    	ld	((_lin + 0x0007)),a
3156  0F3E              l_player_move_jump_00134:
3157  0F3E  21 00 00    	ld	hl,_player_vel_y
3158  0F41  36 00       	ld	(hl),0x00
3159  0F43  21 00 00    	ld	hl,_s_state
3160  0F46  7E          	ld	a,(hl)
3161  0F47  E6 FC       	and	a,+(0xfd&0xfe)
3162  0F49  77          	ld	(hl),a
3163  0F4A  3A 07 00    	ld	a,(_lin + 0x0007)
3164  0F4D  D6 90       	sub	a,0x90
3165  0F4F  38 03       	jr	C,l_player_move_jump_00136
3166  0F51  CD 00 00    	call	_spr_page_down
3167  0F54              l_player_move_jump_00136:
3168  0F54  21 07 00    	ld	hl, +(_colint + 0x0007)
3169  0F57  36 00       	ld	(hl),0x00
3170  0F59  2E 01       	ld	l,0x01
3171  0F5B  18 3E       	jr	l_player_move_jump_00152
3172  0F5D              l_player_move_jump_00138:
3173  0F5D  3A 00 00    	ld	a,(_s_lin1)
3174  0F60  32 07 00    	ld	((_lin + 0x0007)),a
3175  0F63              l_player_move_jump_00142:
3176  0F63  21 00 00    	ld	hl,_s_state
3177  0F66  CB 5E       	bit	3, (hl)
3178  0F68  20 21       	jr	NZ,l_player_move_jump_00148
3179  0F6A  21 00 00    	ld	hl,_s_state
3180  0F6D  CB 56       	bit	2, (hl)
3181  0F6F  20 1A       	jr	NZ,l_player_move_jump_00148
3182  0F71  21 00 00    	ld	hl,_dirs
3183  0F74  CB 56       	bit	2, (hl)
3184  0F76  28 06       	jr	Z,l_player_move_jump_00144
3185  0F78  21 00 00    	ld	hl,_s_state
3186  0F7B  CD 00 00    	call	_spr_set_left
3187  0F7E              l_player_move_jump_00144:
3188  0F7E  21 00 00    	ld	hl,_dirs
3189  0F81  CB 5E       	bit	3, (hl)
3190  0F83  28 06       	jr	Z,l_player_move_jump_00148
3191  0F85  21 00 00    	ld	hl,_s_state
3192  0F88  CD 00 00    	call	_spr_set_right
3193  0F8B              l_player_move_jump_00148:
3194  0F8B  CD 00 00    	call	_spr_move_horizontal
3195  0F8E  7D          	ld	a, l
3196  0F8F  B7          	or	a, a
3197  0F90  28 07       	jr	Z,l_player_move_jump_00151
3198  0F92  21 00 00    	ld	hl,_s_state
3199  0F95  7E          	ld	a,(hl)
3200  0F96  E6 F3       	and	a,+(0xf7&0xfb)
3201  0F98  77          	ld	(hl),a
3202  0F99              l_player_move_jump_00151:
3203  0F99  2E 00       	ld	l,0x00
3204  0F9B              l_player_move_jump_00152:
3205  0F9B  C9          	ret
3206  0F9C              	SECTION code_compiler
3207  0F9C              ;	---------------------------------
3208  0F9C              ; Function player_open_door
3209  0F9C              ; ---------------------------------
3210  0F9C              _player_open_door:
3211  0F9C  CD 00 00    	call	___sdcc_enter_ix
3212  0F9F  0E 00       	ld	c,0x00
3213  0FA1  DD 7E 06    	ld	a,(ix+6)
3214  0FA4  D6 48       	sub	a,0x48
3215  0FA6  28 17       	jr	Z,l_player_open_door_00101
3216  0FA8  DD 7E 06    	ld	a,(ix+6)
3217  0FAB  D6 49       	sub	a,0x49
3218  0FAD  28 1F       	jr	Z,l_player_open_door_00104
3219  0FAF  DD 7E 06    	ld	a,(ix+6)
3220  0FB2  D6 4A       	sub	a,0x4a
3221  0FB4  28 27       	jr	Z,l_player_open_door_00107
3222  0FB6  DD 7E 06    	ld	a,(ix+6)
3223  0FB9  D6 4B       	sub	a,0x4b
3224  0FBB  28 2F       	jr	Z,l_player_open_door_00110
3225  0FBD  18 3A       	jr	l_player_open_door_00113
3226  0FBF              l_player_open_door_00101:
3227  0FBF  3A 00 00    	ld	a,(_player_keys)
3228  0FC2  B7          	or	a, a
3229  0FC3  28 34       	jr	Z,l_player_open_door_00113
3230  0FC5  2E 07       	ld	l,0x07
3231  0FC7  CD 00 00    	call	_zx_border_fastcall
3232  0FCA  0E 01       	ld	c,0x01
3233  0FCC  18 2B       	jr	l_player_open_door_00113
3234  0FCE              l_player_open_door_00104:
3235  0FCE  3A 01 00    	ld	a,(_player_keys + 0x0001)
3236  0FD1  B7          	or	a, a
3237  0FD2  28 25       	jr	Z,l_player_open_door_00113
3238  0FD4  2E 02       	ld	l,0x02
3239  0FD6  CD 00 00    	call	_zx_border_fastcall
3240  0FD9  0E 01       	ld	c,0x01
3241  0FDB  18 1C       	jr	l_player_open_door_00113
3242  0FDD              l_player_open_door_00107:
3243  0FDD  3A 02 00    	ld	a,(_player_keys + 0x0002)
3244  0FE0  B7          	or	a, a
3245  0FE1  28 16       	jr	Z,l_player_open_door_00113
3246  0FE3  2E 04       	ld	l,0x04
3247  0FE5  CD 00 00    	call	_zx_border_fastcall
3248  0FE8  0E 01       	ld	c,0x01
3249  0FEA  18 0D       	jr	l_player_open_door_00113
3250  0FEC              l_player_open_door_00110:
3251  0FEC  3A 03 00    	ld	a,(_player_keys + 0x0003)
3252  0FEF  B7          	or	a, a
3253  0FF0  28 07       	jr	Z,l_player_open_door_00113
3254  0FF2  2E 05       	ld	l,0x05
3255  0FF4  CD 00 00    	call	_zx_border_fastcall
3256  0FF7  0E 01       	ld	c,0x01
3257  0FF9              l_player_open_door_00113:
3258  0FF9  79          	ld	a, c
3259  0FFA  B7          	or	a, a
3260  0FFB  20 06       	jr	NZ,l_player_open_door_00114
3261  0FFD  3A 00 00    	ld	a,(_game_inmune)
3262  1000  B7          	or	a, a
3263  1001  28 23       	jr	Z,l_player_open_door_00115
3264  1003              l_player_open_door_00114:
3265  1003  CD 00 00    	call	_audio_pierto_abierta
3266  1006  3E 00       	ld	a, +((_scr_map) & 0xFF)
3267  1008  DD 86 04    	add	a,(ix+4)
3268  100B  4F          	ld	c, a
3269  100C  3E 00       	ld	a, +((_scr_map) / 256)
3270  100E  DD 8E 05    	adc	a,(ix+5)
3271  1011  47          	ld	b, a
3272  1012  AF          	xor	a, a
3273  1013  02          	ld	(bc), a
3274  1014  DD 6E 04    	ld	l,(ix+4)
3275  1017  DD 66 05    	ld	h,(ix+5)
3276  101A  CD 00 00    	call	_game_obj_set
3277  101D  21 04 00    	ld	hl,0x0004
3278  1020  39          	add	hl, sp
3279  1021  CD 00 00    	call	_spr_draw_index
3280  1024  18 03       	jr	l_player_open_door_00118
3281  1026              l_player_open_door_00115:
3282  1026  CD 00 00    	call	_audio_sin_mana
3283  1029              l_player_open_door_00118:
3284  1029  DD E1       	pop	ix
3285  102B  C9          	ret
3286  102C              	SECTION code_compiler
3287  102C              ;	---------------------------------
3288  102C              ; Function player_lost_life
3289  102C              ; ---------------------------------
3290  102C              _player_lost_life:
3291  102C  CD 00 00    	call	___sdcc_enter_ix
3292  102F  3B          	dec	sp
3293  1030  21 00 00    	ld	hl,_player_vita
3294  1033  36 00       	ld	(hl),0x00
3295  1035  CD 00 00    	call	_game_update_stats
3296  1038  3A 07 00    	ld	a,(_lin + 0x0007)
3297  103B  32 00 00    	ld	(_s_lin0),a
3298  103E  3A 07 00    	ld	a,(_col + 0x0007)
3299  1041  32 00 00    	ld	(_s_col0),a
3300  1044  CD 00 00    	call	_spr_init_effects
3301  1047  06 00       	ld	b,0x00
3302  1049              l_player_lost_life_00117:
3303  1049  C5          	push	bc
3304  104A  21 00 00    	ld	hl,0x0000
3305  104D  E5          	push	hl
3306  104E  AF          	xor	a, a
3307  104F  48          	ld	c,b
3308  1050  47          	ld	b,a
3309  1051  C5          	push	bc
3310  1052  CD 00 00    	call	_NIRVANAP_spriteT_callee
3311  1055  C1          	pop	bc
3312  1056  04          	inc	b
3313  1057  3E 07       	ld	a,0x07
3314  1059  90          	sub	a, b
3315  105A  30 ED       	jr	NC,l_player_lost_life_00117
3316  105C  CD 00 00    	call	_audio_explosion
3317  105F  3A 00 00    	ld	a,(_s_lin0)
3318  1062  C6 F0       	add	a,0xf0
3319  1064  47          	ld	b, a
3320  1065  3A 00 00    	ld	a,(_s_col0)
3321  1068  21 00 00    	ld	hl,0x0000
3322  106B  E5          	push	hl
3323  106C  21 87 03    	ld	hl,0x0387
3324  106F  E5          	push	hl
3325  1070  48          	ld	c,b
3326  1071  47          	ld	b,a
3327  1072  C5          	push	bc
3328  1073  CD 00 00    	call	_spr_add_anim
3329  1076  F1          	pop	af
3330  1077  F1          	pop	af
3331  1078  F1          	pop	af
3332  1079  21 00 00    	ld	hl,_s_col0
3333  107C  46          	ld	b, (hl)
3334  107D  05          	dec	b
3335  107E  05          	dec	b
3336  107F  21 00 00    	ld	hl,0x0000
3337  1082  E5          	push	hl
3338  1083  21 87 03    	ld	hl,0x0387
3339  1086  E5          	push	hl
3340  1087  C5          	push	bc
3341  1088  33          	inc	sp
3342  1089  3A 00 00    	ld	a,(_s_lin0)
3343  108C  F5          	push	af
3344  108D  33          	inc	sp
3345  108E  CD 00 00    	call	_spr_add_anim
3346  1091  F1          	pop	af
3347  1092  F1          	pop	af
3348  1093  21 00 00    	ld	hl,0x0000
3349  1096  E3          	ex	(sp),hl
3350  1097  3A 00 00    	ld	a,(_s_col0)
3351  109A  21 87 03    	ld	hl,0x0387
3352  109D  E5          	push	hl
3353  109E  F5          	push	af
3354  109F  33          	inc	sp
3355  10A0  3A 00 00    	ld	a,(_s_lin0)
3356  10A3  F5          	push	af
3357  10A4  33          	inc	sp
3358  10A5  CD 00 00    	call	_spr_add_anim
3359  10A8  F1          	pop	af
3360  10A9  F1          	pop	af
3361  10AA  F1          	pop	af
3362  10AB  21 00 00    	ld	hl,_s_col0
3363  10AE  46          	ld	b, (hl)
3364  10AF  04          	inc	b
3365  10B0  04          	inc	b
3366  10B1  21 00 00    	ld	hl,0x0000
3367  10B4  E5          	push	hl
3368  10B5  21 87 03    	ld	hl,0x0387
3369  10B8  E5          	push	hl
3370  10B9  C5          	push	bc
3371  10BA  33          	inc	sp
3372  10BB  3A 00 00    	ld	a,(_s_lin0)
3373  10BE  F5          	push	af
3374  10BF  33          	inc	sp
3375  10C0  CD 00 00    	call	_spr_add_anim
3376  10C3  F1          	pop	af
3377  10C4  F1          	pop	af
3378  10C5  F1          	pop	af
3379  10C6  3A 00 00    	ld	a,(_s_lin0)
3380  10C9  C6 10       	add	a,0x10
3381  10CB  47          	ld	b, a
3382  10CC  3A 00 00    	ld	a,(_s_col0)
3383  10CF  21 00 00    	ld	hl,0x0000
3384  10D2  E5          	push	hl
3385  10D3  21 87 03    	ld	hl,0x0387
3386  10D6  E5          	push	hl
3387  10D7  48          	ld	c,b
3388  10D8  47          	ld	b,a
3389  10D9  C5          	push	bc
3390  10DA  CD 00 00    	call	_spr_add_anim
3391  10DD  F1          	pop	af
3392  10DE  F1          	pop	af
3393  10DF  F1          	pop	af
3394  10E0  2E 00       	ld	l,0x00
3395  10E2  CD 00 00    	call	_zx_border_fastcall
3396  10E5  DD 36 FF 01 	ld	(ix-1),0x01
3397  10E9  2A 00 00    	ld	hl,(_curr_time)
3398  10EC  22 00 00    	ld	(_anim_time),hl
3399  10EF              l_player_lost_life_00107:
3400  10EF  DD 7E FF    	ld	a,(ix-1)
3401  10F2  B7          	or	a, a
3402  10F3  28 28       	jr	Z,l_player_lost_life_00109
3403  10F5  3E 0C       	ld	a,0x0c
3404  10F7  F5          	push	af
3405  10F8  33          	inc	sp
3406  10F9  21 00 00    	ld	hl,_anim_time
3407  10FC  E5          	push	hl
3408  10FD  CD 00 00    	call	_game_check_time
3409  1100  F1          	pop	af
3410  1101  33          	inc	sp
3411  1102  7D          	ld	a, l
3412  1103  B7          	or	a, a
3413  1104  28 E9       	jr	Z,l_player_lost_life_00107
3414  1106  2A 00 00    	ld	hl,(_curr_time)
3415  1109  22 00 00    	ld	(_anim_time),hl
3416  110C  3A 00 00    	ld	a,(_anim_count)
3417  110F  B7          	or	a,a
3418  1110  28 05       	jr	Z,l_player_lost_life_00103
3419  1112  CD 00 00    	call	_spr_play_anim
3420  1115  18 D8       	jr	l_player_lost_life_00107
3421  1117              l_player_lost_life_00103:
3422  1117  DD 36 FF 00 	ld	(ix-1),0x00
3423  111B  18 D2       	jr	l_player_lost_life_00107
3424  111D              l_player_lost_life_00109:
3425  111D  CD 00 00    	call	_audio_lotr_lose_a_life
3426  1120  3A 00 00    	ld	a,(_game_boss)
3427  1123  B7          	or	a, a
3428  1124  28 0F       	jr	Z,l_player_lost_life_00111
3429  1126  3A 00 00    	ld	a,(_boss_lin)
3430  1129  32 00 00    	ld	(_s_lin1),a
3431  112C  3A 00 00    	ld	a,(_boss_col)
3432  112F  32 00 00    	ld	(_s_col1),a
3433  1132  CD 00 00    	call	_boss_draw
3434  1135              l_player_lost_life_00111:
3435  1135  3A 00 00    	ld	a,(_game_inf_lives)
3436  1138  B7          	or	a, a
3437  1139  20 04       	jr	NZ,l_player_lost_life_00113
3438  113B  21 00 00    	ld	hl,_player_lives
3439  113E  35          	dec	(hl)
3440  113F              l_player_lost_life_00113:
3441  113F  21 00 00    	ld	hl,_player_mana
3442  1142  36 64       	ld	(hl),0x64
3443  1144  21 00 00    	ld	hl,_player_vita
3444  1147  36 64       	ld	(hl),0x64
3445  1149  3A 00 00    	ld	a,(_player_lives)
3446  114C  B7          	or	a, a
3447  114D  28 1D       	jr	Z,l_player_lost_life_00115
3448  114F  21 F4 01    	ld	hl,0x01f4
3449  1152  CD 00 00    	call	_z80_delay_ms_fastcall
3450  1155  3A 00 00    	ld	a,(_game_checkpoint_col)
3451  1158  32 00 00    	ld	(_player_col_scr),a
3452  115B  3A 00 00    	ld	a,(_game_checkpoint_lin)
3453  115E  32 00 00    	ld	(_player_lin_scr),a
3454  1161  3A 00 00    	ld	a,(_game_checkpoint_scr)
3455  1164  32 00 00    	ld	(_scr_curr),a
3456  1167  CD 00 00    	call	_game_round_init
3457  116A  18 0A       	jr	l_player_lost_life_00119
3458  116C              l_player_lost_life_00115:
3459  116C  21 00 00    	ld	hl,_player_lives
3460  116F  36 00       	ld	(hl),0x00
3461  1171  21 00 00    	ld	hl,_game_over
3462  1174  36 01       	ld	(hl),0x01
3463  1176              l_player_lost_life_00119:
3464  1176  33          	inc	sp
3465  1177  DD E1       	pop	ix
3466  1179  C9          	ret
3467  117A              	SECTION code_compiler
3468  117A              ;	---------------------------------
3469  117A              ; Function player_damage
3470  117A              ; ---------------------------------
3471  117A              _player_damage:
3472  117A  7D          	ld	a,l
3473  117B  4D          	ld	c,l
3474  117C  21 00 00    	ld	hl,_player_vita
3475  117F  96          	sub	a, (hl)
3476  1180  30 1A       	jr	NC,l_player_damage_00104
3477  1182  3A 00 00    	ld	a,(_game_inmune)
3478  1185  B7          	or	a, a
3479  1186  20 06       	jr	NZ,l_player_damage_00102
3480  1188  21 00 00    	ld	hl,_player_vita
3481  118B  7E          	ld	a, (hl)
3482  118C  91          	sub	a, c
3483  118D  77          	ld	(hl), a
3484  118E              l_player_damage_00102:
3485  118E  2A 00 00    	ld	hl,(_curr_time)
3486  1191  22 00 00    	ld	(_player_hit_time),hl
3487  1194  CD 00 00    	call	_audio_golpe
3488  1197  CD 00 00    	call	_game_update_stats
3489  119A  18 03       	jr	l_player_damage_00106
3490  119C              l_player_damage_00104:
3491  119C  CD 2C 10    	call	_player_lost_life
3492  119F              l_player_damage_00106:
3493  119F  C9          	ret
3494  11A0              	SECTION IGNORE
3495  0000              
