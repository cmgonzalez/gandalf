1     0000              MODULE game_player_c
2     0000              LINE -1, "game_player.c"
-1    0000              
0     0000              
1     0000              ;--------------------------------------------------------
2     0000              ; File Created by SDCC : free open source ANSI-C Compiler
3     0000              ; Version 3.6.5 #9958 (Mac OS X i386)
4     0000              ;--------------------------------------------------------
5     0000              ; Processed by Z88DK
6     0000              ;--------------------------------------------------------
7     0000              
8     0000              	EXTERN __divschar
9     0000              	EXTERN __divschar_callee
10    0000              	EXTERN __divsint
11    0000              	EXTERN __divsint_callee
12    0000              	EXTERN __divslong
13    0000              	EXTERN __divslong_callee
14    0000              	EXTERN __divslonglong
15    0000              	EXTERN __divslonglong_callee
16    0000              	EXTERN __divsuchar
17    0000              	EXTERN __divsuchar_callee
18    0000              	EXTERN __divuchar
19    0000              	EXTERN __divuchar_callee
20    0000              	EXTERN __divuint
21    0000              	EXTERN __divuint_callee
22    0000              	EXTERN __divulong
23    0000              	EXTERN __divulong_callee
24    0000              	EXTERN __divulonglong
25    0000              	EXTERN __divulonglong_callee
26    0000              	EXTERN __divuschar
27    0000              	EXTERN __divuschar_callee
28    0000              	EXTERN __modschar
29    0000              	EXTERN __modschar_callee
30    0000              	EXTERN __modsint
31    0000              	EXTERN __modsint_callee
32    0000              	EXTERN __modslong
33    0000              	EXTERN __modslong_callee
34    0000              	EXTERN __modslonglong
35    0000              	EXTERN __modslonglong_callee
36    0000              	EXTERN __modsuchar
37    0000              	EXTERN __modsuchar_callee
38    0000              	EXTERN __moduchar
39    0000              	EXTERN __moduchar_callee
40    0000              	EXTERN __moduint
41    0000              	EXTERN __moduint_callee
42    0000              	EXTERN __modulong
43    0000              	EXTERN __modulong_callee
44    0000              	EXTERN __modulonglong
45    0000              	EXTERN __modulonglong_callee
46    0000              	EXTERN __moduschar
47    0000              	EXTERN __moduschar_callee
48    0000              	EXTERN __mulint
49    0000              	EXTERN __mulint_callee
50    0000              	EXTERN __mullong
51    0000              	EXTERN __mullong_callee
52    0000              	EXTERN __mullonglong
53    0000              	EXTERN __mullonglong_callee
54    0000              	EXTERN __mulschar
55    0000              	EXTERN __mulschar_callee
56    0000              	EXTERN __mulsuchar
57    0000              	EXTERN __mulsuchar_callee
58    0000              	EXTERN __muluschar
59    0000              	EXTERN __muluschar_callee
60    0000              	EXTERN __rlslonglong
61    0000              	EXTERN __rlslonglong_callee
62    0000              	EXTERN __rlulonglong
63    0000              	EXTERN __rlulonglong_callee
64    0000              	EXTERN __rrslonglong
65    0000              	EXTERN __rrslonglong_callee
66    0000              	EXTERN __rrulonglong
67    0000              	EXTERN __rrulonglong_callee
68    0000              	EXTERN ___sdcc_call_hl
69    0000              	EXTERN ___sdcc_call_iy
70    0000              	EXTERN ___sdcc_enter_ix
71    0000              	EXTERN _banked_call
72    0000              	EXTERN _banked_ret
73    0000              	EXTERN ___fs2schar
74    0000              	EXTERN ___fs2schar_callee
75    0000              	EXTERN ___fs2sint
76    0000              	EXTERN ___fs2sint_callee
77    0000              	EXTERN ___fs2slong
78    0000              	EXTERN ___fs2slong_callee
79    0000              	EXTERN ___fs2slonglong
80    0000              	EXTERN ___fs2slonglong_callee
81    0000              	EXTERN ___fs2uchar
82    0000              	EXTERN ___fs2uchar_callee
83    0000              	EXTERN ___fs2uint
84    0000              	EXTERN ___fs2uint_callee
85    0000              	EXTERN ___fs2ulong
86    0000              	EXTERN ___fs2ulong_callee
87    0000              	EXTERN ___fs2ulonglong
88    0000              	EXTERN ___fs2ulonglong_callee
89    0000              	EXTERN ___fsadd
90    0000              	EXTERN ___fsadd_callee
91    0000              	EXTERN ___fsdiv
92    0000              	EXTERN ___fsdiv_callee
93    0000              	EXTERN ___fseq
94    0000              	EXTERN ___fseq_callee
95    0000              	EXTERN ___fsgt
96    0000              	EXTERN ___fsgt_callee
97    0000              	EXTERN ___fslt
98    0000              	EXTERN ___fslt_callee
99    0000              	EXTERN ___fsmul
100   0000              	EXTERN ___fsmul_callee
101   0000              	EXTERN ___fsneq
102   0000              	EXTERN ___fsneq_callee
103   0000              	EXTERN ___fssub
104   0000              	EXTERN ___fssub_callee
105   0000              	EXTERN ___schar2fs
106   0000              	EXTERN ___schar2fs_callee
107   0000              	EXTERN ___sint2fs
108   0000              	EXTERN ___sint2fs_callee
109   0000              	EXTERN ___slong2fs
110   0000              	EXTERN ___slong2fs_callee
111   0000              	EXTERN ___slonglong2fs
112   0000              	EXTERN ___slonglong2fs_callee
113   0000              	EXTERN ___uchar2fs
114   0000              	EXTERN ___uchar2fs_callee
115   0000              	EXTERN ___uint2fs
116   0000              	EXTERN ___uint2fs_callee
117   0000              	EXTERN ___ulong2fs
118   0000              	EXTERN ___ulong2fs_callee
119   0000              	EXTERN ___ulonglong2fs
120   0000              	EXTERN ___ulonglong2fs_callee
121   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
122   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
123   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
126   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
127   0000              	EXTERN ____sdcc_4_ldi_save_bc
128   0000              	EXTERN ____sdcc_4_push_hlix
129   0000              	EXTERN ____sdcc_4_push_mhl
130   0000              	EXTERN ____sdcc_lib_setmem_hl
131   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
132   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
133   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
134   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
135   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
136   0000              	EXTERN ____sdcc_ll_add_deix_hlix
137   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
138   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
139   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
140   0000              	EXTERN ____sdcc_ll_asr_hlix_a
141   0000              	EXTERN ____sdcc_ll_asr_mbc_a
142   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
143   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
144   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
145   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
146   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
147   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
148   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
149   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
150   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
151   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
152   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
153   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
155   0000              	EXTERN ____sdcc_ll_push_hlix
156   0000              	EXTERN ____sdcc_ll_push_mhl
157   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
158   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
159   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
160   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
161   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
162   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
163   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
164   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
165   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
166   0000              	EXTERN ____sdcc_load_debc_deix
167   0000              	EXTERN ____sdcc_load_dehl_deix
168   0000              	EXTERN ____sdcc_load_debc_mhl
169   0000              	EXTERN ____sdcc_load_hlde_mhl
170   0000              	EXTERN ____sdcc_store_dehl_bcix
171   0000              	EXTERN ____sdcc_store_debc_hlix
172   0000              	EXTERN ____sdcc_store_debc_mhl
173   0000              	EXTERN ____sdcc_cpu_pop_ei
174   0000              	EXTERN ____sdcc_cpu_pop_ei_jp
175   0000              	EXTERN ____sdcc_cpu_push_di
176   0000              	EXTERN ____sdcc_outi
177   0000              	EXTERN ____sdcc_outi_128
178   0000              	EXTERN ____sdcc_outi_256
179   0000              	EXTERN ____sdcc_ldi
180   0000              	EXTERN ____sdcc_ldi_128
181   0000              	EXTERN ____sdcc_ldi_256
182   0000              	EXTERN ____sdcc_4_copy_srcd_hlix_dst_deix
183   0000              	EXTERN ____sdcc_4_and_src_mbc_mhl_dst_deix
184   0000              	EXTERN ____sdcc_4_or_src_mbc_mhl_dst_deix
185   0000              	EXTERN ____sdcc_4_xor_src_mbc_mhl_dst_deix
186   0000              	EXTERN ____sdcc_4_or_src_dehl_dst_bcix
187   0000              	EXTERN ____sdcc_4_xor_src_dehl_dst_bcix
188   0000              	EXTERN ____sdcc_4_and_src_dehl_dst_bcix
189   0000              	EXTERN ____sdcc_4_xor_src_mbc_mhl_dst_debc
190   0000              	EXTERN ____sdcc_4_or_src_mbc_mhl_dst_debc
191   0000              	EXTERN ____sdcc_4_and_src_mbc_mhl_dst_debc
192   0000              	EXTERN ____sdcc_4_cpl_src_mhl_dst_debc
193   0000              	EXTERN ____sdcc_4_xor_src_debc_mhl_dst_debc
194   0000              	EXTERN ____sdcc_4_or_src_debc_mhl_dst_debc
195   0000              	EXTERN ____sdcc_4_and_src_debc_mhl_dst_debc
196   0000              	EXTERN ____sdcc_4_and_src_debc_hlix_dst_debc
197   0000              	EXTERN ____sdcc_4_or_src_debc_hlix_dst_debc
198   0000              	EXTERN ____sdcc_4_xor_src_debc_hlix_dst_debc
199   0000              
200   0000              ;--------------------------------------------------------
201   0000              ; Public variables in this module
202   0000              ;--------------------------------------------------------
203   0000              	GLOBAL _player_check_map
204   0000              	GLOBAL _player_1up
205   0000              	GLOBAL _player_init
206   0000              	GLOBAL _player_turn
207   0000              	GLOBAL _player_move
208   0000              	GLOBAL _player_check_input
209   0000              	GLOBAL _player_action_fire
210   0000              	GLOBAL _player_action_jump
211   0000              	GLOBAL _player_move_input
212   0000              	GLOBAL _player_fix_walk_lin
213   0000              	GLOBAL _player_fire
214   0000              	GLOBAL _player_collision
215   0000              	GLOBAL _player_pick_mushroom
216   0000              	GLOBAL _player_check_stairs_vertical
217   0000              	GLOBAL _player_check_stairs
218   0000              	GLOBAL _player_anim_stairs
219   0000              	GLOBAL _player_tile
220   0000              	GLOBAL _player_pick_item
221   0000              	GLOBAL _player_hit_platform
222   0000              	GLOBAL _player_hit_platform_clear
223   0000              	GLOBAL _player_score_add
224   0000              	GLOBAL _player_check_floor
225   0000              	GLOBAL _player_gasta_brick
226   0000              	GLOBAL _player_move_jump
227   0000              	GLOBAL _player_open_door
228   0000              	GLOBAL _player_lost_life
229   0000              	GLOBAL _player_damage
230   0000              ;--------------------------------------------------------
231   0000              ; Externals used
232   0000              ;--------------------------------------------------------
233   0000              	GLOBAL _ulltoa_callee
234   0000              	GLOBAL _ulltoa
235   0000              	GLOBAL _strtoull_callee
236   0000              	GLOBAL _strtoull
237   0000              	GLOBAL _strtoll_callee
238   0000              	GLOBAL _strtoll
239   0000              	GLOBAL _lltoa_callee
240   0000              	GLOBAL _lltoa
241   0000              	GLOBAL _llabs_callee
242   0000              	GLOBAL _llabs
243   0000              	GLOBAL __lldivu__callee
244   0000              	GLOBAL __lldivu_
245   0000              	GLOBAL __lldiv__callee
246   0000              	GLOBAL __lldiv_
247   0000              	GLOBAL _atoll_callee
248   0000              	GLOBAL _atoll
249   0000              	GLOBAL _realloc_unlocked_callee
250   0000              	GLOBAL _realloc_unlocked
251   0000              	GLOBAL _malloc_unlocked_fastcall
252   0000              	GLOBAL _malloc_unlocked
253   0000              	GLOBAL _free_unlocked_fastcall
254   0000              	GLOBAL _free_unlocked
255   0000              	GLOBAL _calloc_unlocked_callee
256   0000              	GLOBAL _calloc_unlocked
257   0000              	GLOBAL _aligned_alloc_unlocked_callee
258   0000              	GLOBAL _aligned_alloc_unlocked
259   0000              	GLOBAL _realloc_callee
260   0000              	GLOBAL _realloc
261   0000              	GLOBAL _malloc_fastcall
262   0000              	GLOBAL _malloc
263   0000              	GLOBAL _free_fastcall
264   0000              	GLOBAL _free
265   0000              	GLOBAL _calloc_callee
266   0000              	GLOBAL _calloc
267   0000              	GLOBAL _aligned_alloc_callee
268   0000              	GLOBAL _aligned_alloc
269   0000              	GLOBAL _utoa_callee
270   0000              	GLOBAL _utoa
271   0000              	GLOBAL _ultoa_callee
272   0000              	GLOBAL _ultoa
273   0000              	GLOBAL _system_fastcall
274   0000              	GLOBAL _system
275   0000              	GLOBAL _strtoul_callee
276   0000              	GLOBAL _strtoul
277   0000              	GLOBAL _strtol_callee
278   0000              	GLOBAL _strtol
279   0000              	GLOBAL _strtof_callee
280   0000              	GLOBAL _strtof
281   0000              	GLOBAL _strtod_callee
282   0000              	GLOBAL _strtod
283   0000              	GLOBAL _srand_fastcall
284   0000              	GLOBAL _srand
285   0000              	GLOBAL _rand
286   0000              	GLOBAL _quick_exit_fastcall
287   0000              	GLOBAL _quick_exit
288   0000              	GLOBAL _qsort_callee
289   0000              	GLOBAL _qsort
290   0000              	GLOBAL _ltoa_callee
291   0000              	GLOBAL _ltoa
292   0000              	GLOBAL _labs_fastcall
293   0000              	GLOBAL _labs
294   0000              	GLOBAL _itoa_callee
295   0000              	GLOBAL _itoa
296   0000              	GLOBAL _ftoh_callee
297   0000              	GLOBAL _ftoh
298   0000              	GLOBAL _ftog_callee
299   0000              	GLOBAL _ftog
300   0000              	GLOBAL _ftoe_callee
301   0000              	GLOBAL _ftoe
302   0000              	GLOBAL _ftoa_callee
303   0000              	GLOBAL _ftoa
304   0000              	GLOBAL _exit_fastcall
305   0000              	GLOBAL _exit
306   0000              	GLOBAL _dtoh_callee
307   0000              	GLOBAL _dtoh
308   0000              	GLOBAL _dtog_callee
309   0000              	GLOBAL _dtog
310   0000              	GLOBAL _dtoe_callee
311   0000              	GLOBAL _dtoe
312   0000              	GLOBAL _dtoa_callee
313   0000              	GLOBAL _dtoa
314   0000              	GLOBAL _bsearch_callee
315   0000              	GLOBAL _bsearch
316   0000              	GLOBAL _atol_fastcall
317   0000              	GLOBAL _atol
318   0000              	GLOBAL _atoi_fastcall
319   0000              	GLOBAL _atoi
320   0000              	GLOBAL _atof_fastcall
321   0000              	GLOBAL _atof
322   0000              	GLOBAL _atexit_fastcall
323   0000              	GLOBAL _atexit
324   0000              	GLOBAL _at_quick_exit_fastcall
325   0000              	GLOBAL _at_quick_exit
326   0000              	GLOBAL _abs_fastcall
327   0000              	GLOBAL _abs
328   0000              	GLOBAL _abort
329   0000              	GLOBAL __strtou__callee
330   0000              	GLOBAL __strtou_
331   0000              	GLOBAL __strtoi__callee
332   0000              	GLOBAL __strtoi_
333   0000              	GLOBAL __random_uniform_xor_8__fastcall
334   0000              	GLOBAL __random_uniform_xor_8_
335   0000              	GLOBAL __random_uniform_xor_32__fastcall
336   0000              	GLOBAL __random_uniform_xor_32_
337   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
338   0000              	GLOBAL __random_uniform_cmwc_8_
339   0000              	GLOBAL __shellsort__callee
340   0000              	GLOBAL __shellsort_
341   0000              	GLOBAL __quicksort__callee
342   0000              	GLOBAL __quicksort_
343   0000              	GLOBAL __insertion_sort__callee
344   0000              	GLOBAL __insertion_sort_
345   0000              	GLOBAL __ldivu__callee
346   0000              	GLOBAL __ldivu_
347   0000              	GLOBAL __ldiv__callee
348   0000              	GLOBAL __ldiv_
349   0000              	GLOBAL __divu__callee
350   0000              	GLOBAL __divu_
351   0000              	GLOBAL __div__callee
352   0000              	GLOBAL __div_
353   0000              	GLOBAL _NIRVANAP_drawTW_raw_callee
354   0000              	GLOBAL _NIRVANAP_drawTW_raw
355   0000              	GLOBAL _NIRVANAP_drawTW_callee
356   0000              	GLOBAL _NIRVANAP_drawTW
357   0000              	GLOBAL _NIRVANAP_drawW_raw_callee
358   0000              	GLOBAL _NIRVANAP_drawW_raw
359   0000              	GLOBAL _NIRVANAP_drawW_callee
360   0000              	GLOBAL _NIRVANAP_drawW
361   0000              	GLOBAL _NIRVANAP_spriteT_callee
362   0000              	GLOBAL _NIRVANAP_spriteT
363   0000              	GLOBAL _NIRVANAP_fillC_callee
364   0000              	GLOBAL _NIRVANAP_fillC
365   0000              	GLOBAL _NIRVANAP_readC_callee
366   0000              	GLOBAL _NIRVANAP_readC
367   0000              	GLOBAL _NIRVANAP_paintC_callee
368   0000              	GLOBAL _NIRVANAP_paintC
369   0000              	GLOBAL _NIRVANAP_printC_callee
370   0000              	GLOBAL _NIRVANAP_printC
371   0000              	GLOBAL _NIRVANAP_fillT_raw_callee
372   0000              	GLOBAL _NIRVANAP_fillT_raw
373   0000              	GLOBAL _NIRVANAP_fillT_callee
374   0000              	GLOBAL _NIRVANAP_fillT
375   0000              	GLOBAL _NIRVANAP_drawT_raw_callee
376   0000              	GLOBAL _NIRVANAP_drawT_raw
377   0000              	GLOBAL _NIRVANAP_drawT_callee
378   0000              	GLOBAL _NIRVANAP_drawT
379   0000              	GLOBAL _NIRVANAP_stop
380   0000              	GLOBAL _NIRVANAP_start
381   0000              	GLOBAL _debug3
382   0000              	GLOBAL _debug2
383   0000              	GLOBAL _debug
384   0000              	GLOBAL _zx_print_str
385   0000              	GLOBAL _zx_print_int
386   0000              	GLOBAL _zx_print_chr
387   0000              	GLOBAL _zx_print_bonus_time
388   0000              	GLOBAL _zx_isr
389   0000              	GLOBAL _z80_otdr_callee
390   0000              	GLOBAL _z80_otdr
391   0000              	GLOBAL _z80_otir_callee
392   0000              	GLOBAL _z80_otir
393   0000              	GLOBAL _z80_outp_callee
394   0000              	GLOBAL _z80_outp
395   0000              	GLOBAL _z80_indr_callee
396   0000              	GLOBAL _z80_indr
397   0000              	GLOBAL _z80_inir_callee
398   0000              	GLOBAL _z80_inir
399   0000              	GLOBAL _z80_inp_fastcall
400   0000              	GLOBAL _z80_inp
401   0000              	GLOBAL _z80_set_int_state_fastcall
402   0000              	GLOBAL _z80_set_int_state
403   0000              	GLOBAL _z80_get_int_state
404   0000              	GLOBAL _z80_delay_tstate_fastcall
405   0000              	GLOBAL _z80_delay_tstate
406   0000              	GLOBAL _z80_delay_ms_fastcall
407   0000              	GLOBAL _z80_delay_ms
408   0000              	GLOBAL _im2_remove_generic_callback_callee
409   0000              	GLOBAL _im2_remove_generic_callback
410   0000              	GLOBAL _im2_prepend_generic_callback_callee
411   0000              	GLOBAL _im2_prepend_generic_callback
412   0000              	GLOBAL _im2_append_generic_callback_callee
413   0000              	GLOBAL _im2_append_generic_callback
414   0000              	GLOBAL _im2_create_generic_isr_8080_callee
415   0000              	GLOBAL _im2_create_generic_isr_8080
416   0000              	GLOBAL _im2_create_generic_isr_callee
417   0000              	GLOBAL _im2_create_generic_isr
418   0000              	GLOBAL _im2_install_isr_callee
419   0000              	GLOBAL _im2_install_isr
420   0000              	GLOBAL _im2_init_fastcall
421   0000              	GLOBAL _im2_init
422   0000              	GLOBAL _intrinsic_swap_word_32_fastcall
423   0000              	GLOBAL _intrinsic_swap_word_32
424   0000              	GLOBAL _intrinsic_swap_endian_32_fastcall
425   0000              	GLOBAL _intrinsic_swap_endian_32
426   0000              	GLOBAL _intrinsic_swap_endian_16_fastcall
427   0000              	GLOBAL _intrinsic_swap_endian_16
428   0000              	GLOBAL _intrinsic_return_de
429   0000              	GLOBAL _intrinsic_return_bc
430   0000              	GLOBAL _intrinsic_exx
431   0000              	GLOBAL _intrinsic_ex_de_hl
432   0000              	GLOBAL _intrinsic_nop
433   0000              	GLOBAL _intrinsic_im_2
434   0000              	GLOBAL _intrinsic_im_1
435   0000              	GLOBAL _intrinsic_im_0
436   0000              	GLOBAL _intrinsic_retn
437   0000              	GLOBAL _intrinsic_reti
438   0000              	GLOBAL _intrinsic_halt
439   0000              	GLOBAL _intrinsic_ei
440   0000              	GLOBAL _intrinsic_di
441   0000              	GLOBAL _intrinsic_stub
442   0000              	GLOBAL _intrinsic_outi
443   0000              	GLOBAL _intrinsic_ldi
444   0000              	GLOBAL _zx_pattern_fill_callee
445   0000              	GLOBAL _zx_pattern_fill
446   0000              	GLOBAL _zx_saddrpup_fastcall
447   0000              	GLOBAL _zx_saddrpup
448   0000              	GLOBAL _zx_saddrpright_callee
449   0000              	GLOBAL _zx_saddrpright
450   0000              	GLOBAL _zx_saddrpleft_callee
451   0000              	GLOBAL _zx_saddrpleft
452   0000              	GLOBAL _zx_saddrpdown_fastcall
453   0000              	GLOBAL _zx_saddrpdown
454   0000              	GLOBAL _zx_saddrcup_fastcall
455   0000              	GLOBAL _zx_saddrcup
456   0000              	GLOBAL _zx_saddrcright_fastcall
457   0000              	GLOBAL _zx_saddrcright
458   0000              	GLOBAL _zx_saddrcleft_fastcall
459   0000              	GLOBAL _zx_saddrcleft
460   0000              	GLOBAL _zx_saddrcdown_fastcall
461   0000              	GLOBAL _zx_saddrcdown
462   0000              	GLOBAL _zx_saddr2py_fastcall
463   0000              	GLOBAL _zx_saddr2py
464   0000              	GLOBAL _zx_saddr2px_fastcall
465   0000              	GLOBAL _zx_saddr2px
466   0000              	GLOBAL _zx_saddr2cy_fastcall
467   0000              	GLOBAL _zx_saddr2cy
468   0000              	GLOBAL _zx_saddr2cx_fastcall
469   0000              	GLOBAL _zx_saddr2cx
470   0000              	GLOBAL _zx_saddr2aaddr_fastcall
471   0000              	GLOBAL _zx_saddr2aaddr
472   0000              	GLOBAL _zx_py2saddr_fastcall
473   0000              	GLOBAL _zx_py2saddr
474   0000              	GLOBAL _zx_py2aaddr_fastcall
475   0000              	GLOBAL _zx_py2aaddr
476   0000              	GLOBAL _zx_pxy2saddr_callee
477   0000              	GLOBAL _zx_pxy2saddr
478   0000              	GLOBAL _zx_pxy2aaddr_callee
479   0000              	GLOBAL _zx_pxy2aaddr
480   0000              	GLOBAL _zx_px2bitmask_fastcall
481   0000              	GLOBAL _zx_px2bitmask
482   0000              	GLOBAL _zx_cy2saddr_fastcall
483   0000              	GLOBAL _zx_cy2saddr
484   0000              	GLOBAL _zx_cy2aaddr_fastcall
485   0000              	GLOBAL _zx_cy2aaddr
486   0000              	GLOBAL _zx_cxy2saddr_callee
487   0000              	GLOBAL _zx_cxy2saddr
488   0000              	GLOBAL _zx_cxy2aaddr_callee
489   0000              	GLOBAL _zx_cxy2aaddr
490   0000              	GLOBAL _zx_bitmask2px_fastcall
491   0000              	GLOBAL _zx_bitmask2px
492   0000              	GLOBAL _zx_aaddrcup_fastcall
493   0000              	GLOBAL _zx_aaddrcup
494   0000              	GLOBAL _zx_aaddrcright_fastcall
495   0000              	GLOBAL _zx_aaddrcright
496   0000              	GLOBAL _zx_aaddrcleft_fastcall
497   0000              	GLOBAL _zx_aaddrcleft
498   0000              	GLOBAL _zx_aaddrcdown_fastcall
499   0000              	GLOBAL _zx_aaddrcdown
500   0000              	GLOBAL _zx_aaddr2saddr_fastcall
501   0000              	GLOBAL _zx_aaddr2saddr
502   0000              	GLOBAL _zx_aaddr2py_fastcall
503   0000              	GLOBAL _zx_aaddr2py
504   0000              	GLOBAL _zx_aaddr2px_fastcall
505   0000              	GLOBAL _zx_aaddr2px
506   0000              	GLOBAL _zx_aaddr2cy_fastcall
507   0000              	GLOBAL _zx_aaddr2cy
508   0000              	GLOBAL _zx_aaddr2cx_fastcall
509   0000              	GLOBAL _zx_aaddr2cx
510   0000              	GLOBAL _zx_visit_wc_pix_callee
511   0000              	GLOBAL _zx_visit_wc_pix
512   0000              	GLOBAL _zx_visit_wc_attr_callee
513   0000              	GLOBAL _zx_visit_wc_attr
514   0000              	GLOBAL _zx_scroll_wc_up_pix_callee
515   0000              	GLOBAL _zx_scroll_wc_up_pix
516   0000              	GLOBAL _zx_scroll_wc_up_attr_callee
517   0000              	GLOBAL _zx_scroll_wc_up_attr
518   0000              	GLOBAL _zx_scroll_wc_up_callee
519   0000              	GLOBAL _zx_scroll_wc_up
520   0000              	GLOBAL _zx_scroll_up_pix_callee
521   0000              	GLOBAL _zx_scroll_up_pix
522   0000              	GLOBAL _zx_scroll_up_attr_callee
523   0000              	GLOBAL _zx_scroll_up_attr
524   0000              	GLOBAL _zx_scroll_up_callee
525   0000              	GLOBAL _zx_scroll_up
526   0000              	GLOBAL _zx_cls_wc_pix_callee
527   0000              	GLOBAL _zx_cls_wc_pix
528   0000              	GLOBAL _zx_cls_wc_attr_callee
529   0000              	GLOBAL _zx_cls_wc_attr
530   0000              	GLOBAL _zx_cls_wc_callee
531   0000              	GLOBAL _zx_cls_wc
532   0000              	GLOBAL _zx_cls_pix_fastcall
533   0000              	GLOBAL _zx_cls_pix
534   0000              	GLOBAL _zx_cls_attr_fastcall
535   0000              	GLOBAL _zx_cls_attr
536   0000              	GLOBAL _zx_cls_fastcall
537   0000              	GLOBAL _zx_cls
538   0000              	GLOBAL _zx_border_fastcall
539   0000              	GLOBAL _zx_border
540   0000              	GLOBAL _zx_tape_verify_block_callee
541   0000              	GLOBAL _zx_tape_verify_block
542   0000              	GLOBAL _zx_tape_save_block_callee
543   0000              	GLOBAL _zx_tape_save_block
544   0000              	GLOBAL _zx_tape_load_block_callee
545   0000              	GLOBAL _zx_tape_load_block
546   0000              	GLOBAL _spr_destroy
547   0000              	GLOBAL _spr_colision_boss
548   0000              	GLOBAL _spr_colision_b
549   0000              	GLOBAL _spr_unflattenP1
550   0000              	GLOBAL _spr_flatten
551   0000              	GLOBAL _spr_btile_paint_back
552   0000              	GLOBAL _spr_bullet_explode
553   0000              	GLOBAL _spr_init_effects
554   0000              	GLOBAL _spr_turn_horizontal
555   0000              	GLOBAL _spr_bullets_play
556   0000              	GLOBAL _spr_play_anim
557   0000              	GLOBAL _spr_add_anim
558   0000              	GLOBAL _spr_clear_scr
559   0000              	GLOBAL _spr_page_map
560   0000              	GLOBAL _spr_page_down
561   0000              	GLOBAL _spr_page_up
562   0000              	GLOBAL _spr_page_right
563   0000              	GLOBAL _spr_page_left
564   0000              	GLOBAL _spr_tile_paint
565   0000              	GLOBAL _spr_draw_index
566   0000              	GLOBAL _spr_brick_anim
567   0000              	GLOBAL _spr_back_repaint
568   0000              	GLOBAL _spr_tile_dir
569   0000              	GLOBAL _spr_tile
570   0000              	GLOBAL _spr_paint_player
571   0000              	GLOBAL _spr_paint
572   0000              	GLOBAL _spr_move_left
573   0000              	GLOBAL _spr_move_right
574   0000              	GLOBAL _spr_move_horizontal
575   0000              	GLOBAL _spr_move_down
576   0000              	GLOBAL _spr_move_up
577   0000              	GLOBAL _spr_set_right
578   0000              	GLOBAL _spr_set_left
579   0000              	GLOBAL _spr_set_down
580   0000              	GLOBAL _spr_set_up
581   0000              	GLOBAL _spr_calc_index
582   0000              	GLOBAL _spr_chktime
583   0000              	GLOBAL _game_match_back_strict
584   0000              	GLOBAL _game_match_back
585   0000              	GLOBAL _game_attribs
586   0000              	GLOBAL _game_boss_clear
587   0000              	GLOBAL _game_boss_kill
588   0000              	GLOBAL _game_obj_clear
589   0000              	GLOBAL _game_obj_chk
590   0000              	GLOBAL _game_obj_set
591   0000              	GLOBAL _game_shoot_fire_boss
592   0000              	GLOBAL _game_shoot_fire
593   0000              	GLOBAL _game_add_enemy
594   0000              	GLOBAL _game_print_header
595   0000              	GLOBAL _game_check_time
596   0000              	GLOBAL _game_rotate_attrib_osd
597   0000              	GLOBAL _game_rotate_attrib
598   0000              	GLOBAL _game_colour_message
599   0000              	GLOBAL _game_paint_attrib
600   0000              	GLOBAL _game_print_score
601   0000              	GLOBAL _game_check_cell
602   0000              	GLOBAL _game_check_map
603   0000              	GLOBAL _game_loop
604   0000              	GLOBAL _game_round_init
605   0000              	GLOBAL _game_set_checkpoint
606   0000              	GLOBAL _game_start_timer
607   0000              	GLOBAL _game_update_stats
608   0000              	GLOBAL _game_print_footer
609   0000              	GLOBAL _game_fill_row
610   0000              	GLOBAL _game_cls
611   0000              	GLOBAL _game_fps
612   0000              	GLOBAL _game_respawn
613   0000              	GLOBAL _game_draw_screen
614   0000              	GLOBAL _boss_draw_frame
615   0000              	GLOBAL _boss_draw
616   0000              	GLOBAL _boss_turn
617   0000              	GLOBAL _enemy_avoid_dead
618   0000              	GLOBAL _enemy_avoid_fall
619   0000              	GLOBAL _enemy_kill
620   0000              	GLOBAL _enemy_respawn
621   0000              	GLOBAL _enemy_init
622   0000              	GLOBAL _enemy_move
623   0000              	GLOBAL _enemy_turn
624   0000              	GLOBAL _enemy_static
625   0000              	GLOBAL _enemy_walk
626   0000              	GLOBAL _enemy_horizontal
627   0000              	GLOBAL _enemy_vertical
628   0000              	GLOBAL _ay_reset
629   0000              	GLOBAL _ay_song_stop
630   0000              	GLOBAL _ay_song_play
631   0000              	GLOBAL _ay_fx_stop
632   0000              	GLOBAL _ay_fx_play
633   0000              	GLOBAL _ay_is_playing
634   0000              	GLOBAL _audio_levelup
635   0000              	GLOBAL _audio_checkpoint
636   0000              	GLOBAL _audio_menu
637   0000              	GLOBAL _audio_game_end
638   0000              	GLOBAL _audio_level_complete
639   0000              	GLOBAL _audio_level_start
640   0000              	GLOBAL _audio_lotr_lose_a_life
641   0000              	GLOBAL _audio_mushroom
642   0000              	GLOBAL _audio_puerta
643   0000              	GLOBAL _audio_sin_mana
644   0000              	GLOBAL _audio_magic1
645   0000              	GLOBAL _audio_coin
646   0000              	GLOBAL _audio_golpe
647   0000              	GLOBAL _audio_salto
648   0000              	GLOBAL _audio_efecto
649   0000              	GLOBAL _audio_disparo_fire
650   0000              	GLOBAL _audio_disparo_axe
651   0000              	GLOBAL _audio_disparo2
652   0000              	GLOBAL _audio_disparo1
653   0000              	GLOBAL _audio_respawn
654   0000              	GLOBAL _audio_explosion1
655   0000              	GLOBAL _audio_explosion
656   0000              	GLOBAL _audio_ingame
657   0000              	GLOBAL _test_func
658   0000              	GLOBAL _test_proc
659   0000              	GLOBAL _in_mouse_kempston_wheel_delta
660   0000              	GLOBAL _in_mouse_kempston_wheel
661   0000              	GLOBAL _in_mouse_kempston_callee
662   0000              	GLOBAL _in_mouse_kempston
663   0000              	GLOBAL _in_mouse_kempston_setpos_callee
664   0000              	GLOBAL _in_mouse_kempston_setpos
665   0000              	GLOBAL _in_mouse_kempston_reset
666   0000              	GLOBAL _in_mouse_kempston_init
667   0000              	GLOBAL _in_mouse_amx_wheel_delta
668   0000              	GLOBAL _in_mouse_amx_wheel
669   0000              	GLOBAL _in_mouse_amx_callee
670   0000              	GLOBAL _in_mouse_amx
671   0000              	GLOBAL _in_mouse_amx_setpos_callee
672   0000              	GLOBAL _in_mouse_amx_setpos
673   0000              	GLOBAL _in_mouse_amx_reset
674   0000              	GLOBAL _in_mouse_amx_init_callee
675   0000              	GLOBAL _in_mouse_amx_init
676   0000              	GLOBAL _in_stick_sinclair2
677   0000              	GLOBAL _in_stick_sinclair1
678   0000              	GLOBAL _in_stick_kempston
679   0000              	GLOBAL _in_stick_fuller
680   0000              	GLOBAL _in_stick_cursor
681   0000              	GLOBAL _in_stick_keyboard_fastcall
682   0000              	GLOBAL _in_stick_keyboard
683   0000              	GLOBAL _in_wait_nokey
684   0000              	GLOBAL _in_wait_key
685   0000              	GLOBAL _in_test_key
686   0000              	GLOBAL _in_pause_fastcall
687   0000              	GLOBAL _in_pause
688   0000              	GLOBAL _in_key_scancode_fastcall
689   0000              	GLOBAL _in_key_scancode
690   0000              	GLOBAL _in_key_pressed_fastcall
691   0000              	GLOBAL _in_key_pressed
692   0000              	GLOBAL _in_inkey
693   0000              	GLOBAL _NIRVANAP_CHAR_TABLE
694   0000              	GLOBAL _NIRVANAP_WIDE_IMAGES
695   0000              	GLOBAL _NIRVANAP_TILE_IMAGES
696   0000              	GLOBAL _NIRVANAP_HOLE
697   0000              	GLOBAL _NIRVANAP_ISR_HOOK
698   0000              	GLOBAL _scan_map
699   0000              	GLOBAL _key_map
700   0000              	GLOBAL _player_lvl_table
701   0000              	GLOBAL _stp_row
702   0000              	GLOBAL _stp_col
703   0000              	GLOBAL _stp_tile
704   0000              	GLOBAL _map_paper_last_a
705   0000              	GLOBAL _map_paper_last
706   0000              	GLOBAL _map_paper_clr
707   0000              	GLOBAL _map_paper
708   0000              	GLOBAL _draw_count
709   0000              	GLOBAL _g_player_hit_right
710   0000              	GLOBAL _g_player_hit_left
711   0000              	GLOBAL _bullet_count
712   0000              	GLOBAL _boss_stat
713   0000              	GLOBAL _boss_time_fire
714   0000              	GLOBAL _boss_time
715   0000              	GLOBAL _boss_tile
716   0000              	GLOBAL _boss_inc
717   0000              	GLOBAL _boss_col
718   0000              	GLOBAL _boss_lin
719   0000              	GLOBAL _bullet
720   0000              	GLOBAL _bullet_vel
721   0000              	GLOBAL _bullet_frames
722   0000              	GLOBAL _bullet_colint
723   0000              	GLOBAL _bullet_dir
724   0000              	GLOBAL _bullet_tile
725   0000              	GLOBAL _bullet_col
726   0000              	GLOBAL _bullet_lin
727   0000              	GLOBAL _bullet_col0
728   0000              	GLOBAL _bullet_lin0
729   0000              	GLOBAL _bullet_max
730   0000              	GLOBAL _bullet_class
731   0000              	GLOBAL _mush_class
732   0000              	GLOBAL _mush_index
733   0000              	GLOBAL _anim_count
734   0000              	GLOBAL _anim_respanwn
735   0000              	GLOBAL _anim_loop
736   0000              	GLOBAL _anim_end
737   0000              	GLOBAL _anim_int
738   0000              	GLOBAL _anim_tile
739   0000              	GLOBAL _anim_col
740   0000              	GLOBAL _anim_lin
741   0000              	GLOBAL _map_heigth
742   0000              	GLOBAL _map_width
743   0000              	GLOBAL _scr_curr
744   0000              	GLOBAL _sprite_kind
745   0000              	GLOBAL _scr_obj1
746   0000              	GLOBAL _scr_obj0
747   0000              	GLOBAL _scr_map
748   0000              	GLOBAL _spr_init
749   0000              	GLOBAL _spr_map_tile
750   0000              	GLOBAL _sprite_frames
751   0000              	GLOBAL _sprite_base_speed
752   0000              	GLOBAL _sprite_speed
753   0000              	GLOBAL _screen_ink
754   0000              	GLOBAL _screen_paper
755   0000              	GLOBAL _player_onstair
756   0000              	GLOBAL _game_start_scr
757   0000              	GLOBAL _game_respawn_tile
758   0000              	GLOBAL _game_respawn_index
759   0000              	GLOBAL _game_respawn_time
760   0000              	GLOBAL _game_score_top
761   0000              	GLOBAL _player_coins
762   0000              	GLOBAL _player_lives
763   0000              	GLOBAL _game_over
764   0000              	GLOBAL _game_sound
765   0000              	GLOBAL _game_inf_lives
766   0000              	GLOBAL _game_inmune
767   0000              	GLOBAL _sprite_curr_index
768   0000              	GLOBAL _spr_count
769   0000              	GLOBAL _bullet_time
770   0000              	GLOBAL _anim_time
771   0000              	GLOBAL _frame_time
772   0000              	GLOBAL _curr_time
773   0000              	GLOBAL _s_state
774   0000              	GLOBAL _attrib_osd
775   0000              	GLOBAL _attrib_hl
776   0000              	GLOBAL _attrib
777   0000              	GLOBAL _zx_val_asm
778   0000              	GLOBAL _enemies
779   0000              	GLOBAL _tmp_ui
780   0000              	GLOBAL _tmp_sc
781   0000              	GLOBAL _tmp_uc
782   0000              	GLOBAL _tmp1
783   0000              	GLOBAL _tmp0
784   0000              	GLOBAL _tmp
785   0000              	GLOBAL _index1
786   0000              	GLOBAL _index0
787   0000              	GLOBAL _loop_count
788   0000              	GLOBAL _s_class
789   0000              	GLOBAL _s_col1
790   0000              	GLOBAL _s_col0
791   0000              	GLOBAL _s_lin1
792   0000              	GLOBAL _s_lin0
793   0000              	GLOBAL _s_tile1
794   0000              	GLOBAL _s_tile0
795   0000              	GLOBAL _player_brick_time
796   0000              	GLOBAL _player_hit_count
797   0000              	GLOBAL _game_debug
798   0000              	GLOBAL _sprite_horizontal_check
799   0000              	GLOBAL _sprite_on_air
800   0000              	GLOBAL _sprite
801   0000              	GLOBAL _fps
802   0000              	GLOBAL _menu_curr_sel
803   0000              	GLOBAL _game_control_jump_lock
804   0000              	GLOBAL _game_control_fire_lock
805   0000              	GLOBAL _game_control_mode
806   0000              	GLOBAL _game_respawn_curr_time
807   0000              	GLOBAL _game_round_up
808   0000              	GLOBAL _game_mush_count
809   0000              	GLOBAL _game_song_play_start
810   0000              	GLOBAL _game_song_play
811   0000              	GLOBAL _game_boss_fix
812   0000              	GLOBAL _game_boss_hit
813   0000              	GLOBAL _game_boss_alive
814   0000              	GLOBAL _game_boss
815   0000              	GLOBAL _game_world
816   0000              	GLOBAL _game_gravity
817   0000              	GLOBAL _player_onfire
818   0000              	GLOBAL _player_anim_stair
819   0000              	GLOBAL _player_hit
820   0000              	GLOBAL _player_hit_time
821   0000              	GLOBAL _game_checkpoint_scr
822   0000              	GLOBAL _game_checkpoint_lin
823   0000              	GLOBAL _game_checkpoint_col
824   0000              	GLOBAL _player_jump_check
825   0000              	GLOBAL _player_lin_scr
826   0000              	GLOBAL _player_col_scr
827   0000              	GLOBAL _player_lvl
828   0000              	GLOBAL _player_int
829   0000              	GLOBAL _player_str
830   0000              	GLOBAL _player_max_vita
831   0000              	GLOBAL _player_max_mana
832   0000              	GLOBAL _player_vita
833   0000              	GLOBAL _player_mana
834   0000              	GLOBAL _player_keys
835   0000              	GLOBAL _player_vel_inc
836   0000              	GLOBAL _player_vel_y1
837   0000              	GLOBAL _player_vel_y0
838   0000              	GLOBAL _player_vel_y
839   0000              	GLOBAL _player_vel_x
840   0000              	GLOBAL _player_score
841   0000              	GLOBAL _last_time
842   0000              	GLOBAL _spr_timer
843   0000              	GLOBAL _jump_lin
844   0000              	GLOBAL _player_hit_col
845   0000              	GLOBAL _player_hit_lin
846   0000              	GLOBAL _colint
847   0000              	GLOBAL _col
848   0000              	GLOBAL _tbuffer
849   0000              	GLOBAL _lin
850   0000              	GLOBAL _tile
851   0000              	GLOBAL _state_a
852   0000              	GLOBAL _state
853   0000              	GLOBAL _class
854   0000              	GLOBAL _dirs_alt
855   0000              	GLOBAL _dirs
856   0000              	GLOBAL _k2
857   0000              	GLOBAL _k1
858   0000              	GLOBAL _joyfunc2
859   0000              	GLOBAL _joyfunc1
860   0000              	GLOBAL _btiles
861   0000              	GLOBAL _spec128
862   0000              	GLOBAL _GLOBAL_ZX_PORT_7FFD
863   0000              	GLOBAL _GLOBAL_ZX_PORT_1FFD
864   0000              	GLOBAL _GLOBAL_ZX_PORT_FE
865   0000              	GLOBAL _ay_fx_06_disparo_fire
866   0000              	GLOBAL _ay_fx_06_disparo_axe
867   0000              	GLOBAL _ay_fx_06_respawn
868   0000              	GLOBAL _ay_fx_06_explosion1
869   0000              	GLOBAL _ay_fx_06_efecto
870   0000              	GLOBAL _ay_fx_06_disparo2
871   0000              	GLOBAL _ay_fx_06_disparo1
872   0000              	GLOBAL _ay_fx_06_checkpoint
873   0000              	GLOBAL _ay_fx_06_levelup
874   0000              	GLOBAL _ay_fx_06_mushroom
875   0000              	GLOBAL _ay_fx_06_magic
876   0000              	GLOBAL _ay_fx_06_sin_mana
877   0000              	GLOBAL _ay_fx_06_salto
878   0000              	GLOBAL _ay_fx_06_puerta
879   0000              	GLOBAL _ay_fx_06_magic1
880   0000              	GLOBAL _ay_fx_06_golpe
881   0000              	GLOBAL _ay_fx_06_explosion
882   0000              	GLOBAL _ay_fx_06_dano_por_toque
883   0000              	GLOBAL _ay_fx_06_coin
884   0000              	GLOBAL _ay_song_06_lotr_level_start
885   0000              	GLOBAL _ay_song_06_lotr_level_complete
886   0000              	GLOBAL _ay_song_06_lotr_lose_a_life
887   0000              	GLOBAL _ay_song_04_doom
888   0000              	GLOBAL _ay_song_04_luna
889   0000              	GLOBAL _ay_song_04_ciel
890   0000              	GLOBAL _ay_song_04_hope
891   0000              	GLOBAL _ay_song_03_regis
892   0000              	GLOBAL _ay_song_03_sunflower
893   0000              	GLOBAL _ay_song_03_lotr
894   0000              	GLOBAL _world0_h
895   0000              	GLOBAL _world0_w
896   0000              	GLOBAL _world0
897   0000              	GLOBAL _paper0
898   0000              	GLOBAL _lenght0
899   0000              	GLOBAL _start_scr0
900   0000              ;--------------------------------------------------------
901   0000              ; special function registers
902   0000              ;--------------------------------------------------------
903   0000              defc _IO_FE	=	0x00fe
904   0000              defc _IO_1FFD	=	0x1ffd
905   0000              defc _IO_7FFD	=	0x7ffd
906   0000              ;--------------------------------------------------------
907   0000              ; ram data
908   0000              ;--------------------------------------------------------
909   0000              	SECTION bss_compiler
910   0000              ;--------------------------------------------------------
911   0000              ; ram data
912   0000              ;--------------------------------------------------------
913   0000              
914   0000              IF 0
915   0000              
916   0000              ; .area _INITIALIZED removed by z88dk
917   0000              
918   0000              
919   0000              ENDIF
920   0000              
921   0000              ;--------------------------------------------------------
922   0000              ; absolute external ram data
923   0000              ;--------------------------------------------------------
924   0000              	SECTION IGNORE
925   0000              ;--------------------------------------------------------
926   0000              ; global & static initialisations
927   0000              ;--------------------------------------------------------
928   0000              	SECTION code_crt_init
929   0000              ;--------------------------------------------------------
930   0000              ; Home
931   0000              ;--------------------------------------------------------
932   0000              	SECTION IGNORE
933   0000              ;--------------------------------------------------------
934   0000              ; code
935   0000              ;--------------------------------------------------------
936   0000              	SECTION code_compiler
937   0000              ;	---------------------------------
938   0000              ; Function player_init
939   0000              ; ---------------------------------
940   0000              _player_init:
941   0000  CD 00 00    	call	___sdcc_enter_ix
942   0003  21 07 00    	ld	hl, +(_class + 0x0007)
943   0006  36 FF       	ld	(hl),0xff
944   0008  3A 00 00    	ld	a,(_sprite_base_speed)
945   000B  32 07 00    	ld	(_sprite_speed+7),a
946   000E  21 07 00    	ld	hl, +(_tile + 0x0007)
947   0011  DD 7E 06    	ld	a,(ix+6)
948   0014  77          	ld	(hl), a
949   0015  21 07 00    	ld	hl, +(_lin + 0x0007)
950   0018  DD 7E 04    	ld	a,(ix+4)
951   001B  77          	ld	(hl), a
952   001C  21 07 00    	ld	hl, +(_col + 0x0007)
953   001F  DD 7E 05    	ld	a,(ix+5)
954   0022  77          	ld	(hl), a
955   0023  21 07 00    	ld	hl, +(_colint + 0x0007)
956   0026  36 00       	ld	(hl),0x00
957   0028  21 07 00    	ld	hl, +(_state + 0x0007)
958   002B  36 00       	ld	(hl),0x00
959   002D  01 07 00    	ld	bc,_state_a+7
960   0030  AF          	xor	a, a
961   0031  02          	ld	(bc), a
962   0032  21 07 00    	ld	hl, +(_jump_lin + 0x0007)
963   0035  DD 7E 04    	ld	a,(ix+4)
964   0038  77          	ld	(hl), a
965   0039  ED 5B 00 00 	ld	de,(_curr_time)
966   003D  ED 53 0E 00 	ld	(_last_time + 0x000e),de
967   0041  0A          	ld	a, (bc)
968   0042  F6 11       	or	a,+(0x01|0x10)
969   0044  02          	ld	(bc),a
970   0045  21 00 00    	ld	hl,_player_hit_col
971   0048  36 00       	ld	(hl),0x00
972   004A  21 00 00    	ld	hl,_player_hit_lin
973   004D  36 00       	ld	(hl),0x00
974   004F  21 00 00    	ld	hl,_player_onstair
975   0052  36 00       	ld	(hl),0x00
976   0054  21 00 00    	ld	hl,_player_onfire
977   0057  36 00       	ld	(hl),0x00
978   0059  DD 66 05    	ld	h,(ix+5)
979   005C  DD 6E 04    	ld	l,(ix+4)
980   005F  E5          	push	hl
981   0060  DD 56 06    	ld	d,(ix+6)
982   0063  1E 07       	ld	e,0x07
983   0065  D5          	push	de
984   0066  CD 00 00    	call	_NIRVANAP_spriteT_callee
985   0069  DD E1       	pop	ix
986   006B  C9          	ret
987   006C              	SECTION code_compiler
988   006C              ;	---------------------------------
989   006C              ; Function player_turn
990   006C              ; ---------------------------------
991   006C              _player_turn:
992   006C  21 00 00    	ld	hl,_sprite
993   006F  CD 00 00    	call	_spr_chktime
994   0072  7D          	ld	a, l
995   0073  B7          	or	a, a
996   0074  C8          	ret	Z
997   0075  21 00 00    	ld	hl,_k1
998   0078  E5          	push	hl
999   0079  2A 00 00    	ld	hl,(_joyfunc1)
1000  007C  CD 00 00    	call	___sdcc_call_hl
1001  007F  F1          	pop	af
1002  0080  7D          	ld	a,l
1003  0081  32 00 00    	ld	(_dirs),a
1004  0084  21 00 00    	ld	hl,_k2
1005  0087  E5          	push	hl
1006  0088  2A 00 00    	ld	hl,(_joyfunc2)
1007  008B  CD 00 00    	call	___sdcc_call_hl
1008  008E  F1          	pop	af
1009  008F  7D          	ld	a,l
1010  0090  32 00 00    	ld	(_dirs_alt),a
1011  0093  3A 07 00    	ld	a,(_lin + 0x0007)
1012  0096  32 00 00    	ld	(_s_lin0),a
1013  0099  3A 07 00    	ld	a,(_col + 0x0007)
1014  009C  32 00 00    	ld	(_s_col0),a
1015  009F  3A 07 00    	ld	a,(_state + 0x0007)
1016  00A2  32 00 00    	ld	(_s_state),a
1017  00A5  21 00 00    	ld	hl,_s_class
1018  00A8  36 00       	ld	(hl),0x00
1019  00AA  CD B7 00    	call	_player_move
1020  00AD  CD 2D 04    	call	_player_collision
1021  00B0  3A 00 00    	ld	a,(_s_state)
1022  00B3  32 07 00    	ld	((_state + 0x0007)),a
1023  00B6  C9          	ret
1024  00B7              	SECTION code_compiler
1025  00B7              ;	---------------------------------
1026  00B7              ; Function player_move
1027  00B7              ; ---------------------------------
1028  00B7              _player_move:
1029  00B7  CD E7 03    	call	_player_fire
1030  00BA  21 00 00    	ld	hl,_s_state
1031  00BD  CB 46       	bit	0,(hl)
1032  00BF  20 04       	jr	NZ,l_player_move_00105
1033  00C1  CB 4E       	bit	1, (hl)
1034  00C3  28 0A       	jr	Z,l_player_move_00106
1035  00C5              l_player_move_00105:
1036  00C5  21 00 00    	ld	hl,_sprite_on_air
1037  00C8  36 01       	ld	(hl),0x01
1038  00CA  CD 25 0E    	call	_player_move_jump
1039  00CD  18 17       	jr	l_player_move_00107
1040  00CF              l_player_move_00106:
1041  00CF  21 00 00    	ld	hl,_sprite_on_air
1042  00D2  36 00       	ld	(hl),0x00
1043  00D4  3A 00 00    	ld	a,(_player_onfire)
1044  00D7  B7          	or	a, a
1045  00D8  20 03       	jr	NZ,l_player_move_00102
1046  00DA  CD 4F 02    	call	_player_move_input
1047  00DD              l_player_move_00102:
1048  00DD  3A 00 00    	ld	a,(_player_onstair)
1049  00E0  B7          	or	a, a
1050  00E1  20 03       	jr	NZ,l_player_move_00107
1051  00E3  CD B4 0C    	call	_player_check_floor
1052  00E6              l_player_move_00107:
1053  00E6  3A 00 00    	ld	a,(_player_onfire)
1054  00E9  B7          	or	a, a
1055  00EA  20 0C       	jr	NZ,l_player_move_00116
1056  00EC  CD 00 00    	call	_spr_paint_player
1057  00EF  7D          	ld	a, l
1058  00F0  B7          	or	a, a
1059  00F1  28 39       	jr	Z,l_player_move_00117
1060  00F3  CD 8C 07    	call	_player_check_map
1061  00F6  18 34       	jr	l_player_move_00117
1062  00F8              l_player_move_00116:
1063  00F8  CD 00 00    	call	_spr_back_repaint
1064  00FB  3A 07 00    	ld	a,(_state_a + 0x0007)
1065  00FE  CB 67       	bit	4, a
1066  0100  28 10       	jr	Z,l_player_move_00112
1067  0102  21 07 00    	ld	hl,+(_col + 0x0007)
1068  0105  46          	ld	b, (hl)
1069  0106  21 07 00    	ld	hl,+(_lin + 0x0007)
1070  0109  4E          	ld	c, (hl)
1071  010A  C5          	push	bc
1072  010B  21 07 D0    	ld	hl,0xd007
1073  010E  E5          	push	hl
1074  010F  CD 00 00    	call	_NIRVANAP_spriteT_callee
1075  0112              l_player_move_00112:
1076  0112  3A 07 00    	ld	a,(_state_a + 0x0007)
1077  0115  CB 5F       	bit	3, a
1078  0117  28 10       	jr	Z,l_player_move_00114
1079  0119  21 07 00    	ld	hl,+(_col + 0x0007)
1080  011C  56          	ld	d, (hl)
1081  011D  21 07 00    	ld	hl,+(_lin + 0x0007)
1082  0120  5E          	ld	e, (hl)
1083  0121  D5          	push	de
1084  0122  21 07 D1    	ld	hl,0xd107
1085  0125  E5          	push	hl
1086  0126  CD 00 00    	call	_NIRVANAP_spriteT_callee
1087  0129              l_player_move_00114:
1088  0129  CD 8C 07    	call	_player_check_map
1089  012C              l_player_move_00117:
1090  012C  3A 00 00    	ld	a,(_player_hit_lin)
1091  012F  B7          	or	a, a
1092  0130  28 03       	jr	Z,l_player_move_00119
1093  0132  CD 18 0C    	call	_player_hit_platform_clear
1094  0135              l_player_move_00119:
1095  0135  2E 00       	ld	l,0x00
1096  0137  C9          	ret
1097  0138              	SECTION code_compiler
1098  0138              ;	---------------------------------
1099  0138              ; Function player_check_input
1100  0138              ; ---------------------------------
1101  0138              _player_check_input:
1102  0138  21 00 00    	ld	hl,_dirs
1103  013B  CB 56       	bit	2,(hl)
1104  013D  28 06       	jr	Z,l_player_check_input_00102
1105  013F  CB 5E       	bit	3,(hl)
1106  0141  28 02       	jr	Z,l_player_check_input_00102
1107  0143  36 00       	ld	(hl),0x00
1108  0145              l_player_check_input_00102:
1109  0145  21 00 00    	ld	hl,_dirs
1110  0148  CB 7E       	bit	7, (hl)
1111  014A  28 04       	jr	Z,l_player_check_input_00105
1112  014C  2E 01       	ld	l,0x01
1113  014E  18 40       	jr	l_player_check_input_00115
1114  0150              l_player_check_input_00105:
1115  0150  21 00 00    	ld	hl,_dirs
1116  0153  CB 46       	bit	0, (hl)
1117  0155  28 04       	jr	Z,l_player_check_input_00107
1118  0157  2E 01       	ld	l,0x01
1119  0159  18 35       	jr	l_player_check_input_00115
1120  015B              l_player_check_input_00107:
1121  015B  21 00 00    	ld	hl,_dirs
1122  015E  CB 56       	bit	2,(hl)
1123  0160  20 08       	jr	NZ,l_player_check_input_00108
1124  0162  CB 5E       	bit	3,(hl)
1125  0164  20 04       	jr	NZ,l_player_check_input_00108
1126  0166  CB 4E       	bit	1, (hl)
1127  0168  28 09       	jr	Z,l_player_check_input_00109
1128  016A              l_player_check_input_00108:
1129  016A  21 00 00    	ld	hl,_game_control_jump_lock
1130  016D  36 00       	ld	(hl),0x00
1131  016F  2E 01       	ld	l,0x01
1132  0171  18 1D       	jr	l_player_check_input_00115
1133  0173              l_player_check_input_00109:
1134  0173  3A 00 00    	ld	a,(_game_control_mode)
1135  0176  B7          	or	a, a
1136  0177  20 0B       	jr	NZ,l_player_check_input_00113
1137  0179  21 00 00    	ld	hl,_dirs_alt
1138  017C  CB 7E       	bit	7, (hl)
1139  017E  28 04       	jr	Z,l_player_check_input_00113
1140  0180  2E 01       	ld	l,0x01
1141  0182  18 0C       	jr	l_player_check_input_00115
1142  0184              l_player_check_input_00113:
1143  0184  21 00 00    	ld	hl,_game_control_fire_lock
1144  0187  36 00       	ld	(hl),0x00
1145  0189  21 00 00    	ld	hl,_game_control_jump_lock
1146  018C  36 00       	ld	(hl),0x00
1147  018E  2E 00       	ld	l,0x00
1148  0190              l_player_check_input_00115:
1149  0190  C9          	ret
1150  0191              	SECTION code_compiler
1151  0191              ;	---------------------------------
1152  0191              ; Function player_action_fire
1153  0191              ; ---------------------------------
1154  0191              _player_action_fire:
1155  0191  3A 00 00    	ld	a,(_game_control_mode)
1156  0194  B7          	or	a, a
1157  0195  28 1C       	jr	Z,l_player_action_fire_00101
1158  0197  21 00 00    	ld	hl,_dirs
1159  019A  7E          	ld	a, (hl)
1160  019B  CB 07       	rlc	a
1161  019D  E6 01       	and	a,0x01
1162  019F  4F          	ld	c, a
1163  01A0  7E          	ld	a, (hl)
1164  01A1  E6 01       	and	a,0x01
1165  01A3  47          	ld	b, a
1166  01A4  3A 00 00    	ld	a,(_game_control_mode)
1167  01A7  3D          	dec	a
1168  01A8  28 11       	jr	Z,l_player_action_fire_00102
1169  01AA  3A 00 00    	ld	a,(_game_control_mode)
1170  01AD  D6 02       	sub	a,0x02
1171  01AF  28 1A       	jr	Z,l_player_action_fire_00103
1172  01B1  18 3C       	jr	l_player_action_fire_00109
1173  01B3              l_player_action_fire_00101:
1174  01B3  3A 00 00    	ld	a,(_dirs_alt)
1175  01B6  E6 80       	and	a,0x80
1176  01B8  6F          	ld	l, a
1177  01B9  18 36       	jr	l_player_action_fire_00110
1178  01BB              l_player_action_fire_00102:
1179  01BB  CB 41       	bit	0, c
1180  01BD  28 04       	jr	Z,l_player_action_fire_00112
1181  01BF  78          	ld	a, b
1182  01C0  B7          	or	a, a
1183  01C1  28 04       	jr	Z,l_player_action_fire_00113
1184  01C3              l_player_action_fire_00112:
1185  01C3  2E 00       	ld	l,0x00
1186  01C5  18 02       	jr	l_player_action_fire_00114
1187  01C7              l_player_action_fire_00113:
1188  01C7  2E 01       	ld	l,0x01
1189  01C9              l_player_action_fire_00114:
1190  01C9  18 26       	jr	l_player_action_fire_00110
1191  01CB              l_player_action_fire_00103:
1192  01CB  3A 00 00    	ld	a,(_game_control_fire_lock)
1193  01CE  B7          	or	a, a
1194  01CF  20 1E       	jr	NZ,l_player_action_fire_00109
1195  01D1  3A 00 00    	ld	a,(_player_onstair)
1196  01D4  B7          	or	a, a
1197  01D5  28 10       	jr	Z,l_player_action_fire_00105
1198  01D7  CB 41       	bit	0, c
1199  01D9  28 04       	jr	Z,l_player_action_fire_00115
1200  01DB  78          	ld	a, b
1201  01DC  B7          	or	a, a
1202  01DD  28 04       	jr	Z,l_player_action_fire_00116
1203  01DF              l_player_action_fire_00115:
1204  01DF  2E 00       	ld	l,0x00
1205  01E1  18 02       	jr	l_player_action_fire_00117
1206  01E3              l_player_action_fire_00116:
1207  01E3  2E 01       	ld	l,0x01
1208  01E5              l_player_action_fire_00117:
1209  01E5  18 0A       	jr	l_player_action_fire_00110
1210  01E7              l_player_action_fire_00105:
1211  01E7  3A 00 00    	ld	a,(_dirs)
1212  01EA  E6 80       	and	a,0x80
1213  01EC  6F          	ld	l, a
1214  01ED  18 02       	jr	l_player_action_fire_00110
1215  01EF              l_player_action_fire_00109:
1216  01EF  2E 00       	ld	l,0x00
1217  01F1              l_player_action_fire_00110:
1218  01F1  C9          	ret
1219  01F2              	SECTION code_compiler
1220  01F2              ;	---------------------------------
1221  01F2              ; Function player_action_jump
1222  01F2              ; ---------------------------------
1223  01F2              _player_action_jump:
1224  01F2  3A 00 00    	ld	a,(_dirs)
1225  01F5  E6 80       	and	a,0x80
1226  01F7  4F          	ld	c, a
1227  01F8  3A 00 00    	ld	a,(_game_control_mode)
1228  01FB  B7          	or	a, a
1229  01FC  28 15       	jr	Z,l_player_action_jump_00101
1230  01FE  3A 00 00    	ld	a,(_dirs)
1231  0201  E6 01       	and	a,0x01
1232  0203  47          	ld	b, a
1233  0204  3A 00 00    	ld	a,(_game_control_mode)
1234  0207  3D          	dec	a
1235  0208  28 11       	jr	Z,l_player_action_jump_00104
1236  020A  3A 00 00    	ld	a,(_game_control_mode)
1237  020D  D6 02       	sub	a,0x02
1238  020F  28 21       	jr	Z,l_player_action_jump_00105
1239  0211  18 39       	jr	l_player_action_jump_00114
1240  0213              l_player_action_jump_00101:
1241  0213  79          	ld	a, c
1242  0214  B7          	or	a, a
1243  0215  28 35       	jr	Z,l_player_action_jump_00114
1244  0217  2E 01       	ld	l,0x01
1245  0219  18 33       	jr	l_player_action_jump_00115
1246  021B              l_player_action_jump_00104:
1247  021B  3A 00 00    	ld	a,(_dirs)
1248  021E  CB 07       	rlc	a
1249  0220  E6 01       	and	a,0x01
1250  0222  CB 47       	bit	0, a
1251  0224  28 04       	jr	Z,l_player_action_jump_00117
1252  0226  78          	ld	a, b
1253  0227  B7          	or	a, a
1254  0228  20 04       	jr	NZ,l_player_action_jump_00118
1255  022A              l_player_action_jump_00117:
1256  022A  2E 00       	ld	l,0x00
1257  022C  18 02       	jr	l_player_action_jump_00119
1258  022E              l_player_action_jump_00118:
1259  022E  2E 01       	ld	l,0x01
1260  0230              l_player_action_jump_00119:
1261  0230  18 1C       	jr	l_player_action_jump_00115
1262  0232              l_player_action_jump_00105:
1263  0232  3A 00 00    	ld	a,(_player_onstair)
1264  0235  B7          	or	a, a
1265  0236  28 0C       	jr	Z,l_player_action_jump_00112
1266  0238  79          	ld	a, c
1267  0239  B7          	or	a, a
1268  023A  28 10       	jr	Z,l_player_action_jump_00114
1269  023C  78          	ld	a, b
1270  023D  B7          	or	a, a
1271  023E  28 0C       	jr	Z,l_player_action_jump_00114
1272  0240  2E 01       	ld	l,0x01
1273  0242  18 0A       	jr	l_player_action_jump_00115
1274  0244              l_player_action_jump_00112:
1275  0244  78          	ld	a, b
1276  0245  B7          	or	a, a
1277  0246  28 04       	jr	Z,l_player_action_jump_00114
1278  0248  2E 01       	ld	l,0x01
1279  024A  18 02       	jr	l_player_action_jump_00115
1280  024C              l_player_action_jump_00114:
1281  024C  2E 00       	ld	l,0x00
1282  024E              l_player_action_jump_00115:
1283  024E  C9          	ret
1284  024F              	SECTION code_compiler
1285  024F              ;	---------------------------------
1286  024F              ; Function player_move_input
1287  024F              ; ---------------------------------
1288  024F              _player_move_input:
1289  024F  CD 38 01    	call	_player_check_input
1290  0252  7D          	ld	a, l
1291  0253  B7          	or	a, a
1292  0254  CA A7 03    	jp	Z, l_player_move_input_00150
1293  0257  3A 00 00    	ld	a,(_game_control_jump_lock)
1294  025A  B7          	or	a, a
1295  025B  20 61       	jr	NZ,l_player_move_input_00109
1296  025D  CD F2 01    	call	_player_action_jump
1297  0260  7D          	ld	a, l
1298  0261  B7          	or	a, a
1299  0262  28 5A       	jr	Z,l_player_move_input_00109
1300  0264  21 00 00    	ld	hl,_game_control_jump_lock
1301  0267  36 01       	ld	(hl),0x01
1302  0269  21 00 00    	ld	hl,_player_vel_inc
1303  026C  36 01       	ld	(hl),0x01
1304  026E  CD 00 00    	call	_audio_salto
1305  0271  21 00 00    	ld	hl,_player_onstair
1306  0274  36 00       	ld	(hl),0x00
1307  0276  21 00 00    	ld	hl,_s_state
1308  0279  CD 00 00    	call	_spr_set_up
1309  027C  3A 07 00    	ld	a,(_lin + 0x0007)
1310  027F  32 07 00    	ld	(_jump_lin+7),a
1311  0282  3A 00 00    	ld	a,(_s_state)
1312  0285  32 07 00    	ld	((_state + 0x0007)),a
1313  0288  21 64 08    	ld	hl,0x0864
1314  028B  E5          	push	hl
1315  028C  CD 6B 07    	call	_player_tile
1316  028F  E3          	ex	(sp),hl
1317  0290  E1          	pop	hl
1318  0291  3A 00 00    	ld	a,(_player_vel_y0)
1319  0294  32 00 00    	ld	(_player_vel_y),a
1320  0297  21 00 00    	ld	hl,_dirs
1321  029A  CB 56       	bit	2,(hl)
1322  029C  20 1B       	jr	NZ,l_player_move_input_00106
1323  029E  CB 5E       	bit	3, (hl)
1324  02A0  20 17       	jr	NZ,l_player_move_input_00106
1325  02A2  01 07 00    	ld	bc,_state_a+7
1326  02A5  0A          	ld	a, (bc)
1327  02A6  CB 5F       	bit	3, a
1328  02A8  28 05       	jr	Z,l_player_move_input_00102
1329  02AA  21 07 00    	ld	hl, +(_colint + 0x0007)
1330  02AD  36 02       	ld	(hl),0x02
1331  02AF              l_player_move_input_00102:
1332  02AF  0A          	ld	a, (bc)
1333  02B0  CB 67       	bit	4, a
1334  02B2  28 05       	jr	Z,l_player_move_input_00106
1335  02B4  21 07 00    	ld	hl, +(_colint + 0x0007)
1336  02B7  36 01       	ld	(hl),0x01
1337  02B9              l_player_move_input_00106:
1338  02B9  2E 01       	ld	l,0x01
1339  02BB  C3 CD 03    	jp	l_player_move_input_00152
1340  02BE              l_player_move_input_00109:
1341  02BE  21 00 00    	ld	hl,_dirs
1342  02C1  CB 5E       	bit	3, (hl)
1343  02C3  28 20       	jr	Z,l_player_move_input_00114
1344  02C5  CD CE 03    	call	_player_fix_walk_lin
1345  02C8  21 00 00    	ld	hl,_s_state
1346  02CB  CD 00 00    	call	_spr_set_right
1347  02CE  01 07 00    	ld	bc,_state_a+7
1348  02D1  0A          	ld	a, (bc)
1349  02D2  F6 10       	or	a,0x10
1350  02D4  E6 F7       	and	a,0xf7
1351  02D6  02          	ld	(bc),a
1352  02D7  3A 00 00    	ld	a,(_player_onstair)
1353  02DA  B7          	or	a, a
1354  02DB  28 05       	jr	Z,l_player_move_input_00112
1355  02DD  2E 00       	ld	l,0x00
1356  02DF  CD C3 06    	call	_player_check_stairs
1357  02E2              l_player_move_input_00112:
1358  02E2  CD 00 00    	call	_spr_move_horizontal
1359  02E5              l_player_move_input_00114:
1360  02E5  21 00 00    	ld	hl,_dirs
1361  02E8  CB 56       	bit	2, (hl)
1362  02EA  28 20       	jr	Z,l_player_move_input_00118
1363  02EC  CD CE 03    	call	_player_fix_walk_lin
1364  02EF  21 00 00    	ld	hl,_s_state
1365  02F2  CD 00 00    	call	_spr_set_left
1366  02F5  01 07 00    	ld	bc,_state_a+7
1367  02F8  0A          	ld	a, (bc)
1368  02F9  F6 08       	or	a,0x08
1369  02FB  E6 EF       	and	a,0xef
1370  02FD  02          	ld	(bc),a
1371  02FE  3A 00 00    	ld	a,(_player_onstair)
1372  0301  B7          	or	a, a
1373  0302  28 05       	jr	Z,l_player_move_input_00116
1374  0304  2E 00       	ld	l,0x00
1375  0306  CD C3 06    	call	_player_check_stairs
1376  0309              l_player_move_input_00116:
1377  0309  CD 00 00    	call	_spr_move_horizontal
1378  030C              l_player_move_input_00118:
1379  030C  21 00 00    	ld	hl,_dirs
1380  030F  CB 46       	bit	0, (hl)
1381  0311  28 36       	jr	Z,l_player_move_input_00130
1382  0313  2E 00       	ld	l,0x00
1383  0315  CD C3 06    	call	_player_check_stairs
1384  0318  3A 00 00    	ld	a,(_player_onstair)
1385  031B  B7          	or	a, a
1386  031C  20 10       	jr	NZ,l_player_move_input_00122
1387  031E  2E 01       	ld	l,0x01
1388  0320  CD C3 06    	call	_player_check_stairs
1389  0323  3A 00 00    	ld	a,(_player_onstair)
1390  0326  B7          	or	a, a
1391  0327  20 05       	jr	NZ,l_player_move_input_00122
1392  0329  2E FE       	ld	l,0xfe
1393  032B  CD 24 06    	call	_player_check_stairs_vertical
1394  032E              l_player_move_input_00122:
1395  032E  3A 00 00    	ld	a,(_player_onstair)
1396  0331  B7          	or	a, a
1397  0332  28 05       	jr	Z,l_player_move_input_00127
1398  0334  CD 00 00    	call	_spr_move_up
1399  0337  18 10       	jr	l_player_move_input_00130
1400  0339              l_player_move_input_00127:
1401  0339  21 00 00    	ld	hl,_dirs
1402  033C  CB 5E       	bit	3,(hl)
1403  033E  20 09       	jr	NZ,l_player_move_input_00130
1404  0340  CB 56       	bit	2, (hl)
1405  0342  20 05       	jr	NZ,l_player_move_input_00130
1406  0344  2E 00       	ld	l,0x00
1407  0346  C3 CD 03    	jp	l_player_move_input_00152
1408  0349              l_player_move_input_00130:
1409  0349  21 00 00    	ld	hl,_dirs
1410  034C  CB 4E       	bit	1, (hl)
1411  034E  28 35       	jr	Z,l_player_move_input_00142
1412  0350  2E 00       	ld	l,0x00
1413  0352  CD C3 06    	call	_player_check_stairs
1414  0355  3A 00 00    	ld	a,(_player_onstair)
1415  0358  B7          	or	a, a
1416  0359  20 10       	jr	NZ,l_player_move_input_00134
1417  035B  2E 01       	ld	l,0x01
1418  035D  CD C3 06    	call	_player_check_stairs
1419  0360  3A 00 00    	ld	a,(_player_onstair)
1420  0363  B7          	or	a, a
1421  0364  20 05       	jr	NZ,l_player_move_input_00134
1422  0366  2E 12       	ld	l,0x12
1423  0368  CD 24 06    	call	_player_check_stairs_vertical
1424  036B              l_player_move_input_00134:
1425  036B  3A 00 00    	ld	a,(_player_onstair)
1426  036E  B7          	or	a, a
1427  036F  28 05       	jr	Z,l_player_move_input_00139
1428  0371  CD 00 00    	call	_spr_move_down
1429  0374  18 0F       	jr	l_player_move_input_00142
1430  0376              l_player_move_input_00139:
1431  0376  21 00 00    	ld	hl,_dirs
1432  0379  CB 5E       	bit	3,(hl)
1433  037B  20 08       	jr	NZ,l_player_move_input_00142
1434  037D  CB 56       	bit	2, (hl)
1435  037F  20 04       	jr	NZ,l_player_move_input_00142
1436  0381  2E 00       	ld	l,0x00
1437  0383  18 48       	jr	l_player_move_input_00152
1438  0385              l_player_move_input_00142:
1439  0385  3A 00 00    	ld	a,(_s_state)
1440  0388  32 07 00    	ld	((_state + 0x0007)),a
1441  038B  3A 00 00    	ld	a,(_player_onstair)
1442  038E  B7          	or	a, a
1443  038F  28 0A       	jr	Z,l_player_move_input_00144
1444  0391  21 72 00    	ld	hl,0x0072
1445  0394  E5          	push	hl
1446  0395  CD 6B 07    	call	_player_tile
1447  0398  F1          	pop	af
1448  0399  18 08       	jr	l_player_move_input_00145
1449  039B              l_player_move_input_00144:
1450  039B  21 60 08    	ld	hl,0x0860
1451  039E  E5          	push	hl
1452  039F  CD 6B 07    	call	_player_tile
1453  03A2  F1          	pop	af
1454  03A3              l_player_move_input_00145:
1455  03A3  2E 01       	ld	l,0x01
1456  03A5  18 26       	jr	l_player_move_input_00152
1457  03A7              l_player_move_input_00150:
1458  03A7  21 07 00    	ld	hl, +(_colint + 0x0007)
1459  03AA  36 00       	ld	(hl),0x00
1460  03AC  3A 00 00    	ld	a,(_player_onstair)
1461  03AF  B7          	or	a, a
1462  03B0  28 0A       	jr	Z,l_player_move_input_00147
1463  03B2  21 72 00    	ld	hl,0x0072
1464  03B5  E5          	push	hl
1465  03B6  CD 6B 07    	call	_player_tile
1466  03B9  F1          	pop	af
1467  03BA  18 08       	jr	l_player_move_input_00148
1468  03BC              l_player_move_input_00147:
1469  03BC  21 70 01    	ld	hl,0x0170
1470  03BF  E5          	push	hl
1471  03C0  CD 6B 07    	call	_player_tile
1472  03C3  F1          	pop	af
1473  03C4              l_player_move_input_00148:
1474  03C4  21 00 00    	ld	hl,_s_state
1475  03C7  7E          	ld	a,(hl)
1476  03C8  E6 F3       	and	a,+(0xf7&0xfb)
1477  03CA  77          	ld	(hl),a
1478  03CB  2E 00       	ld	l,0x00
1479  03CD              l_player_move_input_00152:
1480  03CD  C9          	ret
1481  03CE              	SECTION code_compiler
1482  03CE              ;	---------------------------------
1483  03CE              ; Function player_fix_walk_lin
1484  03CE              ; ---------------------------------
1485  03CE              _player_fix_walk_lin:
1486  03CE  3A 00 00    	ld	a,(_player_onstair)
1487  03D1  B7          	or	a, a
1488  03D2  C0          	ret	NZ
1489  03D3  01 07 00    	ld	bc,_lin+7
1490  03D6  3A 00 00    	ld	a,(_s_lin0)
1491  03D9  07          	rlca
1492  03DA  07          	rlca
1493  03DB  07          	rlca
1494  03DC  07          	rlca
1495  03DD  E6 0F       	and	a,0x0f
1496  03DF  07          	rlca
1497  03E0  07          	rlca
1498  03E1  07          	rlca
1499  03E2  07          	rlca
1500  03E3  E6 F0       	and	a,0xf0
1501  03E5  02          	ld	(bc), a
1502  03E6  C9          	ret
1503  03E7              	SECTION code_compiler
1504  03E7              ;	---------------------------------
1505  03E7              ; Function player_fire
1506  03E7              ; ---------------------------------
1507  03E7              _player_fire:
1508  03E7  CD 91 01    	call	_player_action_fire
1509  03EA  4D          	ld	c, l
1510  03EB  21 00 00    	ld	hl,_player_onfire
1511  03EE  71          	ld	(hl), c
1512  03EF  3A 07 00    	ld	a,(_bullet_col + 0x0007)
1513  03F2  3C          	inc	a
1514  03F3  20 37       	jr	NZ,l_player_fire_00113
1515  03F5  7E          	ld	a, (hl)
1516  03F6  B7          	or	a, a
1517  03F7  28 33       	jr	Z,l_player_fire_00113
1518  03F9  21 00 00    	ld	hl,_player_mana
1519  03FC  7E          	ld	a, (hl)
1520  03FD  B7          	or	a, a
1521  03FE  28 29       	jr	Z,l_player_fire_00107
1522  0400  3E 05       	ld	a,0x05
1523  0402  96          	sub	a, (hl)
1524  0403  30 0F       	jr	NC,l_player_fire_00104
1525  0405  3A 00 00    	ld	a,(_game_inmune)
1526  0408  B7          	or	a, a
1527  0409  20 0E       	jr	NZ,l_player_fire_00105
1528  040B  21 00 00    	ld	hl,_player_mana
1529  040E  7E          	ld	a, (hl)
1530  040F  C6 FB       	add	a,0xfb
1531  0411  77          	ld	(hl), a
1532  0412  18 05       	jr	l_player_fire_00105
1533  0414              l_player_fire_00104:
1534  0414  21 00 00    	ld	hl,_player_mana
1535  0417  36 00       	ld	(hl),0x00
1536  0419              l_player_fire_00105:
1537  0419  CD 00 00    	call	_game_update_stats
1538  041C  CD 00 00    	call	_audio_disparo1
1539  041F  21 07 78    	ld	hl,0x7807
1540  0422  E5          	push	hl
1541  0423  CD 00 00    	call	_game_shoot_fire
1542  0426  F1          	pop	af
1543  0427  18 03       	jr	l_player_fire_00113
1544  0429              l_player_fire_00107:
1545  0429  CD 00 00    	call	_audio_sin_mana
1546  042C              l_player_fire_00113:
1547  042C  C9          	ret
1548  042D              	SECTION code_compiler
1549  042D              ;	---------------------------------
1550  042D              ; Function player_collision
1551  042D              ; ---------------------------------
1552  042D              _player_collision:
1553  042D  3E 1E       	ld	a,0x1e
1554  042F  F5          	push	af
1555  0430  33          	inc	sp
1556  0431  21 00 00    	ld	hl,_player_hit_time
1557  0434  E5          	push	hl
1558  0435  CD 00 00    	call	_game_check_time
1559  0438  F1          	pop	af
1560  0439  33          	inc	sp
1561  043A  7D          	ld	a, l
1562  043B  B7          	or	a, a
1563  043C  CA D8 05    	jp	Z, l_player_collision_00135
1564  043F  21 00 00    	ld	hl,_player_hit
1565  0442  36 00       	ld	(hl),0x00
1566  0444  21 00 00    	ld	hl,_sprite
1567  0447  36 00       	ld	(hl),0x00
1568  0449  3A 07 00    	ld	a,(_col + 7)
1569  044C  32 00 00    	ld	(_s_col1),a
1570  044F  3A 07 00    	ld	a,(_lin + 7)
1571  0452  32 00 00    	ld	(_s_lin1),a
1572  0455  C6 08       	add	a,0x08
1573  0457  4F          	ld	c, a
1574  0458  3A 00 00    	ld	a, (_s_col1)
1575  045B  47          	ld	b,a
1576  045C  C5          	push	bc
1577  045D  CD 00 00    	call	_spr_calc_index
1578  0460  F1          	pop	af
1579  0461  4D          	ld	c, l
1580  0462  21 00 00    	ld	hl,_sprite_curr_index
1581  0465  71          	ld	(hl), c
1582  0466  3E 00       	ld	a, +((_scr_map) & 0xFF)
1583  0468  86          	add	a, (hl)
1584  0469  4F          	ld	c, a
1585  046A  3E 00       	ld	a, +((_scr_map) / 256)
1586  046C  CE 00       	adc	a,0x00
1587  046E  47          	ld	b, a
1588  046F  0A          	ld	a, (bc)
1589  0470  4F          	ld	c,a
1590  0471  D6 15       	sub	a,0x15
1591  0473  20 2E       	jr	NZ,l_player_collision_00104
1592  0475  3A 00 00    	ld	a,(_game_checkpoint_scr)
1593  0478  21 00 00    	ld	hl,_scr_curr
1594  047B  96          	sub	a, (hl)
1595  047C  28 20       	jr	Z,l_player_collision_00102
1596  047E  C5          	push	bc
1597  047F  CD 00 00    	call	_audio_checkpoint
1598  0482  C1          	pop	bc
1599  0483  3A 00 00    	ld	a,(_sprite_curr_index)
1600  0486  E6 0F       	and	a,0x0f
1601  0488  87          	add	a, a
1602  0489  32 00 00    	ld	(_player_col_scr),a
1603  048C  3A 00 00    	ld	a,(_sprite_curr_index)
1604  048F  07          	rlca
1605  0490  07          	rlca
1606  0491  07          	rlca
1607  0492  07          	rlca
1608  0493  E6 0F       	and	a,0x0f
1609  0495  07          	rlca
1610  0496  07          	rlca
1611  0497  07          	rlca
1612  0498  07          	rlca
1613  0499  E6 F0       	and	a,0xf0
1614  049B  32 00 00    	ld	(_player_lin_scr),a
1615  049E              l_player_collision_00102:
1616  049E  C5          	push	bc
1617  049F  CD 00 00    	call	_game_set_checkpoint
1618  04A2  C1          	pop	bc
1619  04A3              l_player_collision_00104:
1620  04A3  3E 2F       	ld	a,0x2f
1621  04A5  91          	sub	a, c
1622  04A6  30 58       	jr	NC,l_player_collision_00155
1623  04A8  79          	ld	a,c
1624  04A9  FE 3A       	cp	a,0x3a
1625  04AB  30 53       	jr	NC,l_player_collision_00155
1626  04AD  D6 39       	sub	a,0x39
1627  04AF  20 2A       	jr	NZ,l_player_collision_00110
1628  04B1  CD 00 00    	call	_audio_level_complete
1629  04B4  21 00 00    	ld	hl,___str_0
1630  04B7  E5          	push	hl
1631  04B8  21 0C 08    	ld	hl,0x080c
1632  04BB  E5          	push	hl
1633  04BC  CD 00 00    	call	_zx_print_str
1634  04BF  AF          	xor	a, a
1635  04C0  F5          	push	af
1636  04C1  33          	inc	sp
1637  04C2  21 E8 03    	ld	hl,0x03e8
1638  04C5  E5          	push	hl
1639  04C6  21 08 17    	ld	hl,0x1708
1640  04C9  E5          	push	hl
1641  04CA  3E 0C       	ld	a,0x0c
1642  04CC  F5          	push	af
1643  04CD  33          	inc	sp
1644  04CE  CD 00 00    	call	_game_colour_message
1645  04D1  F1          	pop	af
1646  04D2  F1          	pop	af
1647  04D3  F1          	pop	af
1648  04D4  21 00 00    	ld	hl,_game_round_up
1649  04D7  36 01       	ld	(hl),0x01
1650  04D9  18 25       	jr	l_player_collision_00155
1651  04DB              l_player_collision_00110:
1652  04DB  3A 00 00    	ld	a,(_game_inmune)
1653  04DE  B7          	or	a, a
1654  04DF  20 10       	jr	NZ,l_player_collision_00106
1655  04E1  3E 82       	ld	a,0x82
1656  04E3  21 00 00    	ld	hl,_s_lin1
1657  04E6  96          	sub	a, (hl)
1658  04E7  30 08       	jr	NC,l_player_collision_00106
1659  04E9  CD 2F 10    	call	_player_lost_life
1660  04EC  2E 00       	ld	l,0x00
1661  04EE  C3 DA 05    	jp	l_player_collision_00136
1662  04F1              l_player_collision_00106:
1663  04F1  21 00 00    	ld	hl,_s_state
1664  04F4  CB E6       	set	4, (hl)
1665  04F6  2E 32       	ld	l,0x32
1666  04F8  CD 75 11    	call	_player_damage
1667  04FB  2E 01       	ld	l,0x01
1668  04FD  C3 DA 05    	jp	l_player_collision_00136
1669  0500              l_player_collision_00155:
1670  0500              l_player_collision_00131:
1671  0500  21 00 00    	ld	hl,_sprite
1672  0503  7E          	ld	a, (hl)
1673  0504  D6 07       	sub	a,0x07
1674  0506  D2 D3 05    	jp	NC, l_player_collision_00133
1675  0509  4E          	ld	c,(hl)
1676  050A  06 00       	ld	b,0x00
1677  050C  21 00 00    	ld	hl,_class
1678  050F  09          	add	hl,bc
1679  0510  7E          	ld	a,(hl)
1680  0511  32 00 00    	ld	(_s_class),a
1681  0514  B7          	or	a, a
1682  0515  CA CC 05    	jp	Z, l_player_collision_00130
1683  0518  2A 00 00    	ld	hl,(_sprite)
1684  051B  26 00       	ld	h,0x00
1685  051D  01 00 00    	ld	bc,_col
1686  0520  09          	add	hl,bc
1687  0521  4E          	ld	c,(hl)
1688  0522  06 00       	ld	b,0x00
1689  0524  3A 00 00    	ld	a,(_s_col1)
1690  0527  5F          	ld	e,a
1691  0528  16 00       	ld	d,0x00
1692  052A  79          	ld	a, c
1693  052B  93          	sub	a, e
1694  052C  6F          	ld	l, a
1695  052D  78          	ld	a, b
1696  052E  9A          	sbc	a, d
1697  052F  67          	ld	h, a
1698  0530  CD 00 00    	call	_abs_fastcall
1699  0533  7D          	ld	a,l
1700  0534  D6 02       	sub	a,0x02
1701  0536  7C          	ld	a,h
1702  0537  17          	rla
1703  0538  3F          	ccf
1704  0539  1F          	rra
1705  053A  DE 80       	sbc	a,0x80
1706  053C  D2 CC 05    	jp	NC, l_player_collision_00130
1707  053F  2A 00 00    	ld	hl,(_sprite)
1708  0542  26 00       	ld	h,0x00
1709  0544  01 00 00    	ld	bc,_lin
1710  0547  09          	add	hl,bc
1711  0548  4E          	ld	c,(hl)
1712  0549  06 00       	ld	b,0x00
1713  054B  3A 00 00    	ld	a,(_s_lin1)
1714  054E  5F          	ld	e,a
1715  054F  16 00       	ld	d,0x00
1716  0551  79          	ld	a, c
1717  0552  93          	sub	a, e
1718  0553  6F          	ld	l, a
1719  0554  78          	ld	a, b
1720  0555  9A          	sbc	a, d
1721  0556  67          	ld	h, a
1722  0557  CD 00 00    	call	_abs_fastcall
1723  055A  7D          	ld	a,l
1724  055B  D6 0E       	sub	a,0x0e
1725  055D  7C          	ld	a,h
1726  055E  17          	rla
1727  055F  3F          	ccf
1728  0560  1F          	rra
1729  0561  DE 80       	sbc	a,0x80
1730  0563  30 67       	jr	NC,l_player_collision_00130
1731  0565  3A 00 00    	ld	a,(_s_class)
1732  0568  D6 06       	sub	a,0x06
1733  056A  20 1D       	jr	NZ,l_player_collision_00118
1734  056C  21 00 00    	ld	hl,_player_vita
1735  056F  7E          	ld	a, (hl)
1736  0570  C6 32       	add	a,0x32
1737  0572  77          	ld	(hl), a
1738  0573  3A 00 00    	ld	a,(_player_max_vita)
1739  0576  21 00 00    	ld	hl,_player_vita
1740  0579  96          	sub	a, (hl)
1741  057A  30 06       	jr	NC,l_player_collision_00116
1742  057C  3A 00 00    	ld	a,(_player_max_vita)
1743  057F  32 00 00    	ld	(_player_vita),a
1744  0582              l_player_collision_00116:
1745  0582  CD DB 05    	call	_player_pick_mushroom
1746  0585  2E 00       	ld	l,0x00
1747  0587  18 51       	jr	l_player_collision_00136
1748  0589              l_player_collision_00118:
1749  0589  3A 00 00    	ld	a,(_s_class)
1750  058C  D6 07       	sub	a,0x07
1751  058E  20 1D       	jr	NZ,l_player_collision_00122
1752  0590  21 00 00    	ld	hl,_player_mana
1753  0593  7E          	ld	a, (hl)
1754  0594  C6 32       	add	a,0x32
1755  0596  77          	ld	(hl), a
1756  0597  3A 00 00    	ld	a,(_player_max_mana)
1757  059A  21 00 00    	ld	hl,_player_mana
1758  059D  96          	sub	a, (hl)
1759  059E  30 06       	jr	NC,l_player_collision_00120
1760  05A0  3A 00 00    	ld	a,(_player_max_mana)
1761  05A3  32 00 00    	ld	(_player_mana),a
1762  05A6              l_player_collision_00120:
1763  05A6  CD DB 05    	call	_player_pick_mushroom
1764  05A9  2E 00       	ld	l,0x00
1765  05AB  18 2D       	jr	l_player_collision_00136
1766  05AD              l_player_collision_00122:
1767  05AD  3A 00 00    	ld	a,(_s_class)
1768  05B0  D6 08       	sub	a,0x08
1769  05B2  20 0A       	jr	NZ,l_player_collision_00124
1770  05B4  CD DB 05    	call	_player_pick_mushroom
1771  05B7  CD F2 05    	call	_player_1up
1772  05BA  2E 00       	ld	l,0x00
1773  05BC  18 1C       	jr	l_player_collision_00136
1774  05BE              l_player_collision_00124:
1775  05BE  21 00 00    	ld	hl,_s_state
1776  05C1  CB E6       	set	4, (hl)
1777  05C3  2E 14       	ld	l,0x14
1778  05C5  CD 75 11    	call	_player_damage
1779  05C8  2E 01       	ld	l,0x01
1780  05CA  18 0E       	jr	l_player_collision_00136
1781  05CC              l_player_collision_00130:
1782  05CC  21 00 00    	ld	hl,_sprite
1783  05CF  34          	inc	(hl)
1784  05D0  C3 00 05    	jp	l_player_collision_00131
1785  05D3              l_player_collision_00133:
1786  05D3  21 00 00    	ld	hl,_s_state
1787  05D6  CB A6       	res	4, (hl)
1788  05D8              l_player_collision_00135:
1789  05D8  2E 00       	ld	l,0x00
1790  05DA              l_player_collision_00136:
1791  05DA  C9          	ret
1792  05DB              	SECTION rodata_compiler
1793  0000              ___str_0:
1794  0000  52 4F 55 4E 44 20 43 4F 4D 50 4C 45 54 45 21 
                        	DEFM "ROUND COMPLETE!"
1795  000F  00          	DEFB 0x00
1796  0010              	SECTION code_compiler
1797  05DB              ;	---------------------------------
1798  05DB              ; Function player_pick_mushroom
1799  05DB              ; ---------------------------------
1800  05DB              _player_pick_mushroom:
1801  05DB  CD 00 00    	call	_audio_magic1
1802  05DE  21 01 00    	ld	hl,0x0001
1803  05E1  CD 47 0C    	call	_player_score_add
1804  05E4  CD 00 00    	call	_game_update_stats
1805  05E7  2A 00 00    	ld	hl,(_sprite)
1806  05EA  CD 00 00    	call	_spr_destroy
1807  05ED  21 00 00    	ld	hl,_game_mush_count
1808  05F0  35          	dec	(hl)
1809  05F1  C9          	ret
1810  05F2              	SECTION code_compiler
1811  05F2              ;	---------------------------------
1812  05F2              ; Function player_1up
1813  05F2              ; ---------------------------------
1814  05F2              _player_1up:
1815  05F2  21 00 00    	ld	hl,_player_lives
1816  05F5  7E          	ld	a, (hl)
1817  05F6  D6 64       	sub	a,0x64
1818  05F8  D0          	ret	NC
1819  05F9  34          	inc	(hl)
1820  05FA  CD 00 00    	call	_spr_flatten
1821  05FD  21 10 00    	ld	hl,___str_1
1822  0600  E5          	push	hl
1823  0601  21 0C 0C    	ld	hl,0x0c0c
1824  0604  E5          	push	hl
1825  0605  CD 00 00    	call	_zx_print_str
1826  0608  AF          	xor	a, a
1827  0609  F5          	push	af
1828  060A  33          	inc	sp
1829  060B  21 19 00    	ld	hl,0x0019
1830  060E  E5          	push	hl
1831  060F  21 0C 11    	ld	hl,0x110c
1832  0612  E5          	push	hl
1833  0613  3E 0C       	ld	a,0x0c
1834  0615  F5          	push	af
1835  0616  33          	inc	sp
1836  0617  CD 00 00    	call	_game_colour_message
1837  061A  F1          	pop	af
1838  061B  F1          	pop	af
1839  061C  F1          	pop	af
1840  061D  CD 00 00    	call	_game_update_stats
1841  0620  CD 00 00    	call	_spr_unflattenP1
1842  0623  C9          	ret
1843  0624              	SECTION rodata_compiler
1844  0010              ___str_1:
1845  0010  31 20 55 50 21 
                        	DEFM "1 UP!"
1846  0015  00          	DEFB 0x00
1847  0016              	SECTION code_compiler
1848  0624              ;	---------------------------------
1849  0624              ; Function player_check_stairs_vertical
1850  0624              ; ---------------------------------
1851  0624              _player_check_stairs_vertical:
1852  0624  CD 00 00    	call	___sdcc_enter_ix
1853  0627  3B          	dec	sp
1854  0628  4D          	ld	c, l
1855  0629  21 07 00    	ld	hl,+(_col + 0x0007)
1856  062C  46          	ld	b, (hl)
1857  062D  CB 40       	bit	0, b
1858  062F  20 2A       	jr	NZ,l_player_check_stairs_vertical_00102
1859  0631  3A 07 00    	ld	a,(_lin + 0x0007)
1860  0634  81          	add	a, c
1861  0635  4F          	ld	c,a
1862  0636  C5          	push	bc
1863  0637  CD 00 00    	call	_spr_calc_index
1864  063A  F1          	pop	af
1865  063B  7D          	ld	a,l
1866  063C  32 00 00    	ld	(_sprite_curr_index),a
1867  063F  4F          	ld	c,a
1868  0640  06 00       	ld	b,0x00
1869  0642  21 00 00    	ld	hl,_scr_map
1870  0645  09          	add	hl,bc
1871  0646  7E          	ld	a,(hl)
1872  0647  4F          	ld	c,a
1873  0648  D6 44       	sub	a,0x44
1874  064A  38 05       	jr	C,l_player_check_stairs_vertical_00110
1875  064C  3E 47       	ld	a,0x47
1876  064E  91          	sub	a, c
1877  064F  30 04       	jr	NC,l_player_check_stairs_vertical_00111
1878  0651              l_player_check_stairs_vertical_00110:
1879  0651  06 00       	ld	b,0x00
1880  0653  18 02       	jr	l_player_check_stairs_vertical_00112
1881  0655              l_player_check_stairs_vertical_00111:
1882  0655  06 01       	ld	b,0x01
1883  0657              l_player_check_stairs_vertical_00112:
1884  0657  0E 00       	ld	c,0x00
1885  0659  18 51       	jr	l_player_check_stairs_vertical_00103
1886  065B              l_player_check_stairs_vertical_00102:
1887  065B  78          	ld	a, b
1888  065C  91          	sub	a, c
1889  065D  57          	ld	d, a
1890  065E  3A 07 00    	ld	a,(_lin + 0x0007)
1891  0661  81          	add	a, c
1892  0662  47          	ld	b, a
1893  0663  C5          	push	bc
1894  0664  58          	ld	e,b
1895  0665  D5          	push	de
1896  0666  CD 00 00    	call	_spr_calc_index
1897  0669  F1          	pop	af
1898  066A  C1          	pop	bc
1899  066B  7D          	ld	a,l
1900  066C  32 00 00    	ld	(_sprite_curr_index),a
1901  066F  5F          	ld	e,a
1902  0670  16 00       	ld	d,0x00
1903  0672  21 00 00    	ld	hl,_scr_map
1904  0675  19          	add	hl,de
1905  0676  7E          	ld	a,(hl)
1906  0677  47          	ld	b,a
1907  0678  D6 44       	sub	a,0x44
1908  067A  38 05       	jr	C,l_player_check_stairs_vertical_00113
1909  067C  3E 47       	ld	a,0x47
1910  067E  90          	sub	a, b
1911  067F  30 04       	jr	NC,l_player_check_stairs_vertical_00114
1912  0681              l_player_check_stairs_vertical_00113:
1913  0681  06 00       	ld	b,0x00
1914  0683  18 02       	jr	l_player_check_stairs_vertical_00115
1915  0685              l_player_check_stairs_vertical_00114:
1916  0685  06 01       	ld	b,0x01
1917  0687              l_player_check_stairs_vertical_00115:
1918  0687  3A 07 00    	ld	a,(_col + 0x0007)
1919  068A  91          	sub	a, c
1920  068B  57          	ld	d, a
1921  068C  3A 07 00    	ld	a,(_lin + 0x0007)
1922  068F  81          	add	a, c
1923  0690  C5          	push	bc
1924  0691  5F          	ld	e,a
1925  0692  D5          	push	de
1926  0693  CD 00 00    	call	_spr_calc_index
1927  0696  F1          	pop	af
1928  0697  C1          	pop	bc
1929  0698  7D          	ld	a,l
1930  0699  32 00 00    	ld	(_sprite_curr_index),a
1931  069C  78          	ld	a, b
1932  069D  D6 44       	sub	a,0x44
1933  069F  38 05       	jr	C,l_player_check_stairs_vertical_00116
1934  06A1  3E 47       	ld	a,0x47
1935  06A3  90          	sub	a, b
1936  06A4  30 04       	jr	NC,l_player_check_stairs_vertical_00117
1937  06A6              l_player_check_stairs_vertical_00116:
1938  06A6  0E 00       	ld	c,0x00
1939  06A8  18 02       	jr	l_player_check_stairs_vertical_00118
1940  06AA              l_player_check_stairs_vertical_00117:
1941  06AA  0E 01       	ld	c,0x01
1942  06AC              l_player_check_stairs_vertical_00118:
1943  06AC              l_player_check_stairs_vertical_00103:
1944  06AC  78          	ld	a, b
1945  06AD  B7          	or	a,a
1946  06AE  20 03       	jr	NZ,l_player_check_stairs_vertical_00104
1947  06B0  B1          	or	a,c
1948  06B1  28 07       	jr	Z,l_player_check_stairs_vertical_00105
1949  06B3              l_player_check_stairs_vertical_00104:
1950  06B3  21 00 00    	ld	hl,_player_onstair
1951  06B6  36 01       	ld	(hl),0x01
1952  06B8  18 05       	jr	l_player_check_stairs_vertical_00108
1953  06BA              l_player_check_stairs_vertical_00105:
1954  06BA  21 00 00    	ld	hl,_player_onstair
1955  06BD  36 00       	ld	(hl),0x00
1956  06BF              l_player_check_stairs_vertical_00108:
1957  06BF  33          	inc	sp
1958  06C0  DD E1       	pop	ix
1959  06C2  C9          	ret
1960  06C3              	SECTION code_compiler
1961  06C3              ;	---------------------------------
1962  06C3              ; Function player_check_stairs
1963  06C3              ; ---------------------------------
1964  06C3              _player_check_stairs:
1965  06C3  CD 00 00    	call	___sdcc_enter_ix
1966  06C6  3B          	dec	sp
1967  06C7  45          	ld	b, l
1968  06C8  3A 07 00    	ld	a,(_col + 0x0007)
1969  06CB  4F          	ld	c,a
1970  06CC  80          	add	a, b
1971  06CD  57          	ld	d, a
1972  06CE  3A 07 00    	ld	a,(_lin + 0x0007)
1973  06D1  C5          	push	bc
1974  06D2  5F          	ld	e,a
1975  06D3  D5          	push	de
1976  06D4  CD 00 00    	call	_spr_calc_index
1977  06D7  F1          	pop	af
1978  06D8  C1          	pop	bc
1979  06D9  7D          	ld	a,l
1980  06DA  32 00 00    	ld	(_sprite_curr_index),a
1981  06DD  5F          	ld	e,a
1982  06DE  16 00       	ld	d,0x00
1983  06E0  21 00 00    	ld	hl,_scr_map
1984  06E3  19          	add	hl,de
1985  06E4  7E          	ld	a,(hl)
1986  06E5  4F          	ld	c,a
1987  06E6  D6 44       	sub	a,0x44
1988  06E8  38 05       	jr	C,l_player_check_stairs_00111
1989  06EA  3E 47       	ld	a,0x47
1990  06EC  91          	sub	a, c
1991  06ED  30 04       	jr	NC,l_player_check_stairs_00112
1992  06EF              l_player_check_stairs_00111:
1993  06EF  0E 00       	ld	c,0x00
1994  06F1  18 02       	jr	l_player_check_stairs_00113
1995  06F3              l_player_check_stairs_00112:
1996  06F3  0E 01       	ld	c,0x01
1997  06F5              l_player_check_stairs_00113:
1998  06F5  3A 07 00    	ld	a,(_col + 0x0007)
1999  06F8  80          	add	a, b
2000  06F9  57          	ld	d, a
2001  06FA  3A 07 00    	ld	a,(_lin + 0x0007)
2002  06FD  C6 0F       	add	a,0x0f
2003  06FF  47          	ld	b, a
2004  0700  C5          	push	bc
2005  0701  58          	ld	e,b
2006  0702  D5          	push	de
2007  0703  CD 00 00    	call	_spr_calc_index
2008  0706  F1          	pop	af
2009  0707  C1          	pop	bc
2010  0708  7D          	ld	a,l
2011  0709  32 00 00    	ld	(_sprite_curr_index),a
2012  070C  5F          	ld	e,a
2013  070D  16 00       	ld	d,0x00
2014  070F  21 00 00    	ld	hl,_scr_map
2015  0712  19          	add	hl,de
2016  0713  7E          	ld	a,(hl)
2017  0714  47          	ld	b,a
2018  0715  D6 44       	sub	a,0x44
2019  0717  38 05       	jr	C,l_player_check_stairs_00114
2020  0719  3E 47       	ld	a,0x47
2021  071B  90          	sub	a, b
2022  071C  30 04       	jr	NC,l_player_check_stairs_00115
2023  071E              l_player_check_stairs_00114:
2024  071E  06 00       	ld	b,0x00
2025  0720  18 02       	jr	l_player_check_stairs_00116
2026  0722              l_player_check_stairs_00115:
2027  0722  06 01       	ld	b,0x01
2028  0724              l_player_check_stairs_00116:
2029  0724  79          	ld	a, c
2030  0725  B7          	or	a,a
2031  0726  20 03       	jr	NZ,l_player_check_stairs_00105
2032  0728  B0          	or	a,b
2033  0729  28 13       	jr	Z,l_player_check_stairs_00106
2034  072B              l_player_check_stairs_00105:
2035  072B  21 00 00    	ld	hl,_player_onstair
2036  072E  7E          	ld	a, (hl)
2037  072F  B7          	or	a, a
2038  0730  20 1D       	jr	NZ,l_player_check_stairs_00109
2039  0732  36 01       	ld	(hl),0x01
2040  0734  21 72 00    	ld	hl,0x0072
2041  0737  E5          	push	hl
2042  0738  CD 6B 07    	call	_player_tile
2043  073B  F1          	pop	af
2044  073C  18 11       	jr	l_player_check_stairs_00109
2045  073E              l_player_check_stairs_00106:
2046  073E  21 00 00    	ld	hl,_player_onstair
2047  0741  7E          	ld	a, (hl)
2048  0742  B7          	or	a, a
2049  0743  28 0A       	jr	Z,l_player_check_stairs_00109
2050  0745  36 00       	ld	(hl),0x00
2051  0747  21 60 08    	ld	hl,0x0860
2052  074A  E5          	push	hl
2053  074B  CD 6B 07    	call	_player_tile
2054  074E  F1          	pop	af
2055  074F              l_player_check_stairs_00109:
2056  074F  33          	inc	sp
2057  0750  DD E1       	pop	ix
2058  0752  C9          	ret
2059  0753              	SECTION code_compiler
2060  0753              ;	---------------------------------
2061  0753              ; Function player_anim_stairs
2062  0753              ; ---------------------------------
2063  0753              _player_anim_stairs:
2064  0753  21 00 00    	ld	hl,_player_anim_stair
2065  0756  34          	inc	(hl)
2066  0757  3E 01       	ld	a,0x01
2067  0759  96          	sub	a, (hl)
2068  075A  30 02       	jr	NC,l_player_anim_stairs_00102
2069  075C  36 00       	ld	(hl),0x00
2070  075E              l_player_anim_stairs_00102:
2071  075E  3A 07 00    	ld	a,(_tile + 0x0007)
2072  0761  21 00 00    	ld	hl,_player_anim_stair
2073  0764  86          	add	a, (hl)
2074  0765  C6 04       	add	a,0x04
2075  0767  32 00 00    	ld	(_s_tile1),a
2076  076A  C9          	ret
2077  076B              	SECTION code_compiler
2078  076B              ;	---------------------------------
2079  076B              ; Function player_tile
2080  076B              ; ---------------------------------
2081  076B              _player_tile:
2082  076B  CD 00 00    	call	___sdcc_enter_ix
2083  076E  21 05 00    	ld	hl,0x0005
2084  0771  39          	add	hl, sp
2085  0772  EB          	ex	de,hl
2086  0773  21 04 00    	ld	hl,0x0004
2087  0776  39          	add	hl, sp
2088  0777  4D          	ld	c, l
2089  0778  44          	ld	b, h
2090  0779  D5          	push	de
2091  077A  21 00 00    	ld	hl,_sprite
2092  077D  E5          	push	hl
2093  077E  C5          	push	bc
2094  077F  CD 00 00    	call	_spr_tile_dir
2095  0782  F1          	pop	af
2096  0783  F1          	pop	af
2097  0784  F1          	pop	af
2098  0785  7D          	ld	a,l
2099  0786  32 07 00    	ld	((_tile + 0x0007)),a
2100  0789  DD E1       	pop	ix
2101  078B  C9          	ret
2102  078C              	SECTION code_compiler
2103  078C              ;	---------------------------------
2104  078C              ; Function player_check_map
2105  078C              ; ---------------------------------
2106  078C              _player_check_map:
2107  078C  21 07 00    	ld	hl,+(_col + 0x0007)
2108  078F  56          	ld	d, (hl)
2109  0790  21 07 00    	ld	hl,+(_lin + 0x0007)
2110  0793  5E          	ld	e, (hl)
2111  0794  D5          	push	de
2112  0795  CD 00 00    	call	_spr_calc_index
2113  0798  F1          	pop	af
2114  0799  7D          	ld	a,l
2115  079A  32 00 00    	ld	(_sprite_curr_index),a
2116  079D  CD E6 07    	call	_player_pick_item
2117  07A0  21 07 00    	ld	hl,+(_col + 0x0007)
2118  07A3  46          	ld	b, (hl)
2119  07A4  3A 07 00    	ld	a,(_lin + 0x0007)
2120  07A7  E6 0F       	and	a,0x0f
2121  07A9  4F          	ld	c, a
2122  07AA  CB 40       	bit	0, b
2123  07AC  20 10       	jr	NZ,l_player_check_map_00108
2124  07AE  79          	ld	a, c
2125  07AF  B7          	or	a, a
2126  07B0  28 33       	jr	Z,l_player_check_map_00110
2127  07B2  21 00 00    	ld	hl,_sprite_curr_index
2128  07B5  7E          	ld	a, (hl)
2129  07B6  C6 10       	add	a,0x10
2130  07B8  77          	ld	(hl), a
2131  07B9  CD E6 07    	call	_player_pick_item
2132  07BC  18 27       	jr	l_player_check_map_00110
2133  07BE              l_player_check_map_00108:
2134  07BE  21 00 00    	ld	hl,_sprite_curr_index
2135  07C1  46          	ld	b, (hl)
2136  07C2  04          	inc	b
2137  07C3  79          	ld	a, c
2138  07C4  B7          	or	a, a
2139  07C5  20 06       	jr	NZ,l_player_check_map_00105
2140  07C7  70          	ld	(hl), b
2141  07C8  CD E6 07    	call	_player_pick_item
2142  07CB  18 18       	jr	l_player_check_map_00110
2143  07CD              l_player_check_map_00105:
2144  07CD  21 00 00    	ld	hl,_sprite_curr_index
2145  07D0  70          	ld	(hl), b
2146  07D1  CD E6 07    	call	_player_pick_item
2147  07D4  21 00 00    	ld	hl,_sprite_curr_index
2148  07D7  7E          	ld	a, (hl)
2149  07D8  C6 0F       	add	a,0x0f
2150  07DA  77          	ld	(hl), a
2151  07DB  CD E6 07    	call	_player_pick_item
2152  07DE  21 00 00    	ld	hl,_sprite_curr_index
2153  07E1  34          	inc	(hl)
2154  07E2  CD E6 07    	call	_player_pick_item
2155  07E5              l_player_check_map_00110:
2156  07E5  C9          	ret
2157  07E6              	SECTION code_compiler
2158  07E6              ;	---------------------------------
2159  07E6              ; Function player_pick_item
2160  07E6              ; ---------------------------------
2161  07E6              _player_pick_item:
2162  07E6  CD 00 00    	call	___sdcc_enter_ix
2163  07E9  F5          	push	af
2164  07EA  3B          	dec	sp
2165  07EB  2A 00 00    	ld	hl,(_sprite_curr_index)
2166  07EE  26 00       	ld	h,0x00
2167  07F0  01 00 00    	ld	bc,_scr_map
2168  07F3  09          	add	hl,bc
2169  07F4  7E          	ld	a,(hl)
2170  07F5  4D          	ld	c,l
2171  07F6  44          	ld	b,h
2172  07F7  21 00 00    	ld	hl,_sprite_curr_index
2173  07FA  DD 77 FD    	ld	(ix-3),a
2174  07FD  D6 24       	sub	a,0x24
2175  07FF  3E 00       	ld	a,0x00
2176  0801  17          	rla
2177  0802  DD 77 FF    	ld	(ix-1),a
2178  0805  CB 47       	bit	0,a
2179  0807  C2 91 09    	jp	NZ, l_player_pick_item_00131
2180  080A  3E 2F       	ld	a,0x2f
2181  080C  DD 96 FD    	sub	a,(ix-3)
2182  080F  3E 00       	ld	a,0x00
2183  0811  17          	rla
2184  0812  DD 77 FE    	ld	(ix-2),a
2185  0815  CB 47       	bit	0,a
2186  0817  C2 91 09    	jp	NZ, l_player_pick_item_00131
2187  081A  5E          	ld	e, (hl)
2188  081B  16 00       	ld	d,0x00
2189  081D  C5          	push	bc
2190  081E  EB          	ex	de,hl
2191  081F  CD 00 00    	call	_game_match_back
2192  0822  C1          	pop	bc
2193  0823  7D          	ld	a,l
2194  0824  02          	ld	(bc), a
2195  0825  2A 00 00    	ld	hl,(_sprite_curr_index)
2196  0828  26 00       	ld	h,0x00
2197  082A  CD 00 00    	call	_game_obj_set
2198  082D  3A 00 00    	ld	a,(_sprite_curr_index)
2199  0830  07          	rlca
2200  0831  07          	rlca
2201  0832  07          	rlca
2202  0833  07          	rlca
2203  0834  E6 0F       	and	a,0x0f
2204  0836  07          	rlca
2205  0837  07          	rlca
2206  0838  07          	rlca
2207  0839  07          	rlca
2208  083A  E6 F0       	and	a,0xf0
2209  083C  32 00 00    	ld	(_s_lin1),a
2210  083F  3A 00 00    	ld	a,(_sprite_curr_index)
2211  0842  E6 0F       	and	a,0x0f
2212  0844  87          	add	a, a
2213  0845  32 00 00    	ld	(_s_col1),a
2214  0848  21 00 00    	ld	hl,0x0000
2215  084B  E5          	push	hl
2216  084C  21 84 03    	ld	hl,0x0384
2217  084F  E5          	push	hl
2218  0850  2A 00 00    	ld	hl,(_s_lin1)
2219  0853  67          	ld	h,a
2220  0854  E5          	push	hl
2221  0855  CD 00 00    	call	_spr_add_anim
2222  0858  F1          	pop	af
2223  0859  F1          	pop	af
2224  085A  F1          	pop	af
2225  085B  DD CB FF 46 	bit	0,(ix-1)
2226  085F  C2 91 09    	jp	NZ, l_player_pick_item_00131
2227  0862  DD CB FE 46 	bit	0,(ix-2)
2228  0866  C2 91 09    	jp	NZ, l_player_pick_item_00131
2229  0869  DD 7E FD    	ld	a,(ix-3)
2230  086C  C6 DC       	add	a,0xdc
2231  086E  4F          	ld	c, a
2232  086F  06 00       	ld	b,0x00
2233  0871  21 78 08    	ld	hl,l_player_pick_item_00177
2234  0874  09          	add	hl, bc
2235  0875  09          	add	hl, bc
2236  0876  09          	add	hl, bc
2237  0877  E9          	jp	(hl)
2238  0878              l_player_pick_item_00177:
2239  0878  C3 9C 08    	jp	l_player_pick_item_00101
2240  087B  C3 AA 08    	jp	l_player_pick_item_00102
2241  087E  C3 B8 08    	jp	l_player_pick_item_00103
2242  0881  C3 C6 08    	jp	l_player_pick_item_00104
2243  0884  C3 D4 08    	jp	l_player_pick_item_00105
2244  0887  C3 01 09    	jp	l_player_pick_item_00109
2245  088A  C3 1B 09    	jp	l_player_pick_item_00112
2246  088D  C3 33 09    	jp	l_player_pick_item_00115
2247  0890  C3 4B 09    	jp	l_player_pick_item_00118
2248  0893  C3 63 09    	jp	l_player_pick_item_00121
2249  0896  C3 7B 09    	jp	l_player_pick_item_00124
2250  0899  C3 F5 08    	jp	l_player_pick_item_00108
2251  089C              l_player_pick_item_00101:
2252  089C  CD 00 00    	call	_audio_efecto
2253  089F  21 00 00    	ld	hl,_player_keys
2254  08A2  36 01       	ld	(hl),0x01
2255  08A4  CD 00 00    	call	_game_update_stats
2256  08A7  C3 91 09    	jp	l_player_pick_item_00131
2257  08AA              l_player_pick_item_00102:
2258  08AA  CD 00 00    	call	_audio_efecto
2259  08AD  21 01 00    	ld	hl, +(_player_keys + 0x0001)
2260  08B0  36 01       	ld	(hl),0x01
2261  08B2  CD 00 00    	call	_game_update_stats
2262  08B5  C3 91 09    	jp	l_player_pick_item_00131
2263  08B8              l_player_pick_item_00103:
2264  08B8  CD 00 00    	call	_audio_efecto
2265  08BB  21 02 00    	ld	hl, +(_player_keys + 0x0002)
2266  08BE  36 01       	ld	(hl),0x01
2267  08C0  CD 00 00    	call	_game_update_stats
2268  08C3  C3 91 09    	jp	l_player_pick_item_00131
2269  08C6              l_player_pick_item_00104:
2270  08C6  CD 00 00    	call	_audio_efecto
2271  08C9  21 03 00    	ld	hl, +(_player_keys + 0x0003)
2272  08CC  36 01       	ld	(hl),0x01
2273  08CE  CD 00 00    	call	_game_update_stats
2274  08D1  C3 91 09    	jp	l_player_pick_item_00131
2275  08D4              l_player_pick_item_00105:
2276  08D4  CD 00 00    	call	_audio_coin
2277  08D7  21 01 00    	ld	hl,0x0001
2278  08DA  CD 47 0C    	call	_player_score_add
2279  08DD  21 00 00    	ld	hl,_player_coins
2280  08E0  7E          	ld	a,(hl)
2281  08E1  3C          	inc	a
2282  08E2  77          	ld	(hl),a
2283  08E3  D6 64       	sub	a,0x64
2284  08E5  20 08       	jr	NZ,l_player_pick_item_00107
2285  08E7  CD F2 05    	call	_player_1up
2286  08EA  21 00 00    	ld	hl,_player_coins
2287  08ED  36 00       	ld	(hl),0x00
2288  08EF              l_player_pick_item_00107:
2289  08EF  CD 00 00    	call	_game_update_stats
2290  08F2  C3 91 09    	jp	l_player_pick_item_00131
2291  08F5              l_player_pick_item_00108:
2292  08F5  CD 00 00    	call	_audio_magic1
2293  08F8  21 0A 00    	ld	hl,0x000a
2294  08FB  CD 47 0C    	call	_player_score_add
2295  08FE  C3 91 09    	jp	l_player_pick_item_00131
2296  0901              l_player_pick_item_00109:
2297  0901  CD 00 00    	call	_audio_efecto
2298  0904  21 00 00    	ld	hl,_player_str
2299  0907  34          	inc	(hl)
2300  0908  21 00 00    	ld	hl,_player_max_vita
2301  090B  7E          	ld	a, (hl)
2302  090C  D6 C8       	sub	a,0xc8
2303  090E  D2 91 09    	jp	NC, l_player_pick_item_00131
2304  0911  7E          	ld	a, (hl)
2305  0912  C6 0A       	add	a,0x0a
2306  0914  77          	ld	(hl), a
2307  0915  CD 00 00    	call	_game_update_stats
2308  0918  C3 91 09    	jp	l_player_pick_item_00131
2309  091B              l_player_pick_item_00112:
2310  091B  CD 00 00    	call	_audio_efecto
2311  091E  21 00 00    	ld	hl,_player_str
2312  0921  34          	inc	(hl)
2313  0922  21 00 00    	ld	hl,_player_max_vita
2314  0925  7E          	ld	a, (hl)
2315  0926  D6 C8       	sub	a,0xc8
2316  0928  30 67       	jr	NC,l_player_pick_item_00131
2317  092A  7E          	ld	a, (hl)
2318  092B  C6 0A       	add	a,0x0a
2319  092D  77          	ld	(hl), a
2320  092E  CD 00 00    	call	_game_update_stats
2321  0931  18 5E       	jr	l_player_pick_item_00131
2322  0933              l_player_pick_item_00115:
2323  0933  CD 00 00    	call	_audio_efecto
2324  0936  21 00 00    	ld	hl,_player_str
2325  0939  34          	inc	(hl)
2326  093A  21 00 00    	ld	hl,_player_max_vita
2327  093D  7E          	ld	a, (hl)
2328  093E  D6 C8       	sub	a,0xc8
2329  0940  30 4F       	jr	NC,l_player_pick_item_00131
2330  0942  7E          	ld	a, (hl)
2331  0943  C6 0A       	add	a,0x0a
2332  0945  77          	ld	(hl), a
2333  0946  CD 00 00    	call	_game_update_stats
2334  0949  18 46       	jr	l_player_pick_item_00131
2335  094B              l_player_pick_item_00118:
2336  094B  CD 00 00    	call	_audio_efecto
2337  094E  21 00 00    	ld	hl,_player_int
2338  0951  34          	inc	(hl)
2339  0952  21 00 00    	ld	hl,_player_max_mana
2340  0955  7E          	ld	a, (hl)
2341  0956  D6 C8       	sub	a,0xc8
2342  0958  30 37       	jr	NC,l_player_pick_item_00131
2343  095A  7E          	ld	a, (hl)
2344  095B  C6 0A       	add	a,0x0a
2345  095D  77          	ld	(hl), a
2346  095E  CD 00 00    	call	_game_update_stats
2347  0961  18 2E       	jr	l_player_pick_item_00131
2348  0963              l_player_pick_item_00121:
2349  0963  CD 00 00    	call	_audio_efecto
2350  0966  21 00 00    	ld	hl,_player_int
2351  0969  34          	inc	(hl)
2352  096A  21 00 00    	ld	hl,_player_max_mana
2353  096D  7E          	ld	a, (hl)
2354  096E  D6 C8       	sub	a,0xc8
2355  0970  30 1F       	jr	NC,l_player_pick_item_00131
2356  0972  7E          	ld	a, (hl)
2357  0973  C6 0A       	add	a,0x0a
2358  0975  77          	ld	(hl), a
2359  0976  CD 00 00    	call	_game_update_stats
2360  0979  18 16       	jr	l_player_pick_item_00131
2361  097B              l_player_pick_item_00124:
2362  097B  CD 00 00    	call	_audio_efecto
2363  097E  21 00 00    	ld	hl,_player_int
2364  0981  34          	inc	(hl)
2365  0982  21 00 00    	ld	hl,_player_max_mana
2366  0985  7E          	ld	a, (hl)
2367  0986  D6 C8       	sub	a,0xc8
2368  0988  30 07       	jr	NC,l_player_pick_item_00131
2369  098A  7E          	ld	a, (hl)
2370  098B  C6 0A       	add	a,0x0a
2371  098D  77          	ld	(hl), a
2372  098E  CD 00 00    	call	_game_update_stats
2373  0991              l_player_pick_item_00131:
2374  0991  DD F9       	ld	sp, ix
2375  0993  DD E1       	pop	ix
2376  0995  C9          	ret
2377  0996              	SECTION code_compiler
2378  0996              ;	---------------------------------
2379  0996              ; Function player_hit_platform
2380  0996              ; ---------------------------------
2381  0996              _player_hit_platform:
2382  0996  CD 00 00    	call	___sdcc_enter_ix
2383  0999  3B          	dec	sp
2384  099A  3A 00 00    	ld	a,(_player_hit_lin)
2385  099D  B7          	or	a, a
2386  099E  C2 12 0C    	jp	NZ, l_player_hit_platform_00148
2387  09A1  21 07 00    	ld	hl,+(_lin + 0x0007)
2388  09A4  4E          	ld	c, (hl)
2389  09A5  3E 10       	ld	a,0x10
2390  09A7  91          	sub	a, c
2391  09A8  D2 12 0C    	jp	NC, l_player_hit_platform_00148
2392  09AB  2A 00 00    	ld	hl,(_index1)
2393  09AE  01 00 00    	ld	bc,_scr_map
2394  09B1  09          	add	hl,bc
2395  09B2  7E          	ld	a,(hl)
2396  09B3  FE 45       	cp	a,0x45
2397  09B5  DA 12 0C    	jp	C,l_player_hit_platform_00148
2398  09B8  D6 4D       	sub	a,0x4d
2399  09BA  20 42       	jr	NZ,l_player_hit_platform_00102
2400  09BC  E5          	push	hl
2401  09BD  2A 00 00    	ld	hl,(_index1)
2402  09C0  CD 00 00    	call	_game_match_back
2403  09C3  C1          	pop	bc
2404  09C4  7D          	ld	a,l
2405  09C5  02          	ld	(bc), a
2406  09C6  2A 00 00    	ld	hl,(_index1)
2407  09C9  CD 00 00    	call	_game_obj_set
2408  09CC  CD 00 00    	call	_audio_explosion
2409  09CF  21 00 00    	ld	hl,_index1
2410  09D2  7E          	ld	a, (hl)
2411  09D3  E6 0F       	and	a,0x0f
2412  09D5  87          	add	a, a
2413  09D6  57          	ld	d, a
2414  09D7  4E          	ld	c, (hl)
2415  09D8  23          	inc	hl
2416  09D9  5E          	ld	e, (hl)
2417  09DA  06 04       	ld	b,0x04
2418  09DC  79          	ld	a,c
2419  09DD              l_player_hit_platform_00261:
2420  09DD  CB 3B       	srl	e
2421  09DF  1F          	rra
2422  09E0  10 FB       	djnz	l_player_hit_platform_00261
2423  09E2  07          	rlca
2424  09E3  07          	rlca
2425  09E4  07          	rlca
2426  09E5  07          	rlca
2427  09E6  E6 F0       	and	a,0xf0
2428  09E8  47          	ld	b, a
2429  09E9  21 00 00    	ld	hl,0x0000
2430  09EC  E5          	push	hl
2431  09ED  21 87 03    	ld	hl,0x0387
2432  09F0  E5          	push	hl
2433  09F1  58          	ld	e,b
2434  09F2  D5          	push	de
2435  09F3  CD 00 00    	call	_spr_add_anim
2436  09F6  F1          	pop	af
2437  09F7  F1          	pop	af
2438  09F8  F1          	pop	af
2439  09F9  2E 01       	ld	l,0x01
2440  09FB  C3 14 0C    	jp	l_player_hit_platform_00151
2441  09FE              l_player_hit_platform_00102:
2442  09FE  2A 00 00    	ld	hl,(_curr_time)
2443  0A01  22 0E 00    	ld	(_spr_timer + 0x000e),hl
2444  0A04  3A 07 00    	ld	a,(_lin + 0x0007)
2445  0A07  06 00       	ld	b,0x00
2446  0A09  C6 F8       	add	a,0xf8
2447  0A0B  4F          	ld	c, a
2448  0A0C  78          	ld	a, b
2449  0A0D  CE FF       	adc	a,0xff
2450  0A0F  5F          	ld	e, a
2451  0A10  06 04       	ld	b,0x04
2452  0A12              l_player_hit_platform_00262:
2453  0A12  CB 2B       	sra	e
2454  0A14  CB 19       	rr	c
2455  0A16  10 FA       	djnz	l_player_hit_platform_00262
2456  0A18  79          	ld	a, c
2457  0A19  07          	rlca
2458  0A1A  07          	rlca
2459  0A1B  07          	rlca
2460  0A1C  07          	rlca
2461  0A1D  E6 F0       	and	a,0xf0
2462  0A1F  C6 08       	add	a,0x08
2463  0A21  32 00 00    	ld	(_player_hit_lin),a
2464  0A24  21 07 00    	ld	hl,+(_col + 0x0007)
2465  0A27  4E          	ld	c, (hl)
2466  0A28  CB 41       	bit	0, c
2467  0A2A  20 06       	jr	NZ,l_player_hit_platform_00113
2468  0A2C  21 00 00    	ld	hl,_player_hit_col
2469  0A2F  71          	ld	(hl), c
2470  0A30  18 2D       	jr	l_player_hit_platform_00114
2471  0A32              l_player_hit_platform_00113:
2472  0A32  21 07 00    	ld	hl,+(_state + 0x0007)
2473  0A35  5E          	ld	e, (hl)
2474  0A36  41          	ld	b, c
2475  0A37  04          	inc	b
2476  0A38  0D          	dec	c
2477  0A39  CB 5B       	bit	3, e
2478  0A3B  28 12       	jr	Z,l_player_hit_platform_00110
2479  0A3D  3A 00 00    	ld	a,(_g_player_hit_right)
2480  0A40  B7          	or	a, a
2481  0A41  28 06       	jr	Z,l_player_hit_platform_00104
2482  0A43  21 00 00    	ld	hl,_player_hit_col
2483  0A46  70          	ld	(hl), b
2484  0A47  18 16       	jr	l_player_hit_platform_00114
2485  0A49              l_player_hit_platform_00104:
2486  0A49  21 00 00    	ld	hl,_player_hit_col
2487  0A4C  71          	ld	(hl), c
2488  0A4D  18 10       	jr	l_player_hit_platform_00114
2489  0A4F              l_player_hit_platform_00110:
2490  0A4F  3A 00 00    	ld	a,(_g_player_hit_left)
2491  0A52  B7          	or	a, a
2492  0A53  28 06       	jr	Z,l_player_hit_platform_00107
2493  0A55  21 00 00    	ld	hl,_player_hit_col
2494  0A58  71          	ld	(hl), c
2495  0A59  18 04       	jr	l_player_hit_platform_00114
2496  0A5B              l_player_hit_platform_00107:
2497  0A5B  21 00 00    	ld	hl,_player_hit_col
2498  0A5E  70          	ld	(hl), b
2499  0A5F              l_player_hit_platform_00114:
2500  0A5F  01 00 00    	ld	bc,_scr_map
2501  0A62  2A 00 00    	ld	hl,(_index1)
2502  0A65  09          	add	hl,bc
2503  0A66  7E          	ld	a,(hl)
2504  0A67  FE 58       	cp	a,0x58
2505  0A69  28 05       	jr	Z,l_player_hit_platform_00141
2506  0A6B  D6 5D       	sub	a,0x5d
2507  0A6D  C2 E1 0B    	jp	NZ,l_player_hit_platform_00142
2508  0A70              l_player_hit_platform_00141:
2509  0A70  3A 00 00    	ld	a,(_game_boss)
2510  0A73  B7          	or	a, a
2511  0A74  28 0B       	jr	Z,l_player_hit_platform_00177
2512  0A76  3A 00 00    	ld	a,(_game_mush_count)
2513  0A79  B7          	or	a, a
2514  0A7A  28 05       	jr	Z,l_player_hit_platform_00177
2515  0A7C  2E 00       	ld	l,0x00
2516  0A7E  C3 14 0C    	jp	l_player_hit_platform_00151
2517  0A81              l_player_hit_platform_00177:
2518  0A81  DD 36 FF 00 	ld	(ix-1),0x00
2519  0A85              l_player_hit_platform_00138:
2520  0A85  DD 7E FF    	ld	a,(ix-1)
2521  0A88  D6 07       	sub	a,0x07
2522  0A8A  D2 E4 0B    	jp	NC, l_player_hit_platform_00143
2523  0A8D  3E 00       	ld	a, +((_mush_index) & 0xFF)
2524  0A8F  DD 86 FF    	add	a,(ix-1)
2525  0A92  6F          	ld	l, a
2526  0A93  3E 00       	ld	a, +((_mush_index) / 256)
2527  0A95  CE 00       	adc	a,0x00
2528  0A97  67          	ld	h, a
2529  0A98  4E          	ld	c, (hl)
2530  0A99  06 00       	ld	b,0x00
2531  0A9B  2A 00 00    	ld	hl,(_index1)
2532  0A9E  AF          	xor	a,a
2533  0A9F  ED 42       	sbc	hl,bc
2534  0AA1  C2 DB 0B    	jp	NZ,l_player_hit_platform_00137
2535  0AA4  3A 07 00    	ld	a,(_lin + 0x0007)
2536  0AA7  07          	rlca
2537  0AA8  07          	rlca
2538  0AA9  07          	rlca
2539  0AAA  07          	rlca
2540  0AAB  E6 0F       	and	a,0x0f
2541  0AAD  07          	rlca
2542  0AAE  07          	rlca
2543  0AAF  07          	rlca
2544  0AB0  07          	rlca
2545  0AB1  E6 F0       	and	a,0xf0
2546  0AB3  C6 E0       	add	a,0xe0
2547  0AB5  32 00 00    	ld	(_s_lin1),a
2548  0AB8  3A 00 00    	ld	a,(_player_hit_col)
2549  0ABB  CB 3F       	srl	a
2550  0ABD  87          	add	a, a
2551  0ABE  32 00 00    	ld	(_s_col1),a
2552  0AC1  0E 00       	ld	c,0x00
2553  0AC3              l_player_hit_platform_00120:
2554  0AC3  79          	ld	a, c
2555  0AC4  D6 07       	sub	a,0x07
2556  0AC6  30 18       	jr	NC,l_player_hit_platform_00122
2557  0AC8  06 00       	ld	b,0x00
2558  0ACA  21 00 00    	ld	hl,_mush_index
2559  0ACD  09          	add	hl, bc
2560  0ACE  46          	ld	b, (hl)
2561  0ACF  1E 00       	ld	e,0x00
2562  0AD1  21 00 00    	ld	hl,_index1
2563  0AD4  7E          	ld	a, (hl)
2564  0AD5  90          	sub	a, b
2565  0AD6  20 05       	jr	NZ,l_player_hit_platform_00271
2566  0AD8  23          	inc	hl
2567  0AD9  7E          	ld	a, (hl)
2568  0ADA  93          	sub	a, e
2569  0ADB  28 03       	jr	Z,l_player_hit_platform_00122
2570  0ADD              l_player_hit_platform_00271:
2571  0ADD  0C          	inc	c
2572  0ADE  18 E3       	jr	l_player_hit_platform_00120
2573  0AE0              l_player_hit_platform_00122:
2574  0AE0  06 00       	ld	b,0x00
2575  0AE2  21 00 00    	ld	hl,_mush_class
2576  0AE5  09          	add	hl, bc
2577  0AE6  7E          	ld	a, (hl)
2578  0AE7  FE 79       	cp	a,0x79
2579  0AE9  28 16       	jr	Z,l_player_hit_platform_00123
2580  0AEB  FE 7A       	cp	a,0x7a
2581  0AED  28 25       	jr	Z,l_player_hit_platform_00124
2582  0AEF  FE 7B       	cp	a,0x7b
2583  0AF1  28 47       	jr	Z,l_player_hit_platform_00126
2584  0AF3  FE 7C       	cp	a,0x7c
2585  0AF5  28 30       	jr	Z,l_player_hit_platform_00125
2586  0AF7  FE 7D       	cp	a,0x7d
2587  0AF9  28 65       	jr	Z,l_player_hit_platform_00128
2588  0AFB  D6 7E       	sub	a,0x7e
2589  0AFD  28 4E       	jr	Z,l_player_hit_platform_00127
2590  0AFF  18 70       	jr	l_player_hit_platform_00129
2591  0B01              l_player_hit_platform_00123:
2592  0B01  3A 00 00    	ld	a,(_s_col1)
2593  0B04  21 06 FF    	ld	hl,0xff06
2594  0B07  E5          	push	hl
2595  0B08  2A 00 00    	ld	hl,(_s_lin1)
2596  0B0B  67          	ld	h,a
2597  0B0C  E5          	push	hl
2598  0B0D  CD 00 00    	call	_enemy_init
2599  0B10  F1          	pop	af
2600  0B11  F1          	pop	af
2601  0B12  18 5D       	jr	l_player_hit_platform_00129
2602  0B14              l_player_hit_platform_00124:
2603  0B14  3A 00 00    	ld	a,(_s_col1)
2604  0B17  21 06 01    	ld	hl,0x0106
2605  0B1A  E5          	push	hl
2606  0B1B  2A 00 00    	ld	hl,(_s_lin1)
2607  0B1E  67          	ld	h,a
2608  0B1F  E5          	push	hl
2609  0B20  CD 00 00    	call	_enemy_init
2610  0B23  F1          	pop	af
2611  0B24  F1          	pop	af
2612  0B25  18 4A       	jr	l_player_hit_platform_00129
2613  0B27              l_player_hit_platform_00125:
2614  0B27  3A 00 00    	ld	a,(_s_col1)
2615  0B2A  21 07 01    	ld	hl,0x0107
2616  0B2D  E5          	push	hl
2617  0B2E  2A 00 00    	ld	hl,(_s_lin1)
2618  0B31  67          	ld	h,a
2619  0B32  E5          	push	hl
2620  0B33  CD 00 00    	call	_enemy_init
2621  0B36  F1          	pop	af
2622  0B37  F1          	pop	af
2623  0B38  18 37       	jr	l_player_hit_platform_00129
2624  0B3A              l_player_hit_platform_00126:
2625  0B3A  3A 00 00    	ld	a,(_s_col1)
2626  0B3D  21 07 FF    	ld	hl,0xff07
2627  0B40  E5          	push	hl
2628  0B41  2A 00 00    	ld	hl,(_s_lin1)
2629  0B44  67          	ld	h,a
2630  0B45  E5          	push	hl
2631  0B46  CD 00 00    	call	_enemy_init
2632  0B49  F1          	pop	af
2633  0B4A  F1          	pop	af
2634  0B4B  18 24       	jr	l_player_hit_platform_00129
2635  0B4D              l_player_hit_platform_00127:
2636  0B4D  3A 00 00    	ld	a,(_s_col1)
2637  0B50  21 08 01    	ld	hl,0x0108
2638  0B53  E5          	push	hl
2639  0B54  2A 00 00    	ld	hl,(_s_lin1)
2640  0B57  67          	ld	h,a
2641  0B58  E5          	push	hl
2642  0B59  CD 00 00    	call	_enemy_init
2643  0B5C  F1          	pop	af
2644  0B5D  F1          	pop	af
2645  0B5E  18 11       	jr	l_player_hit_platform_00129
2646  0B60              l_player_hit_platform_00128:
2647  0B60  3A 00 00    	ld	a,(_s_col1)
2648  0B63  21 08 FF    	ld	hl,0xff08
2649  0B66  E5          	push	hl
2650  0B67  2A 00 00    	ld	hl,(_s_lin1)
2651  0B6A  67          	ld	h,a
2652  0B6B  E5          	push	hl
2653  0B6C  CD 00 00    	call	_enemy_init
2654  0B6F  F1          	pop	af
2655  0B70  F1          	pop	af
2656  0B71              l_player_hit_platform_00129:
2657  0B71  CD 00 00    	call	_audio_mushroom
2658  0B74  21 00 00    	ld	hl,_game_mush_count
2659  0B77  34          	inc	(hl)
2660  0B78  3A 00 00    	ld	a,(_game_boss)
2661  0B7B  B7          	or	a, a
2662  0B7C  20 5D       	jr	NZ,l_player_hit_platform_00137
2663  0B7E  3A 00 00    	ld	a,(_index1)
2664  0B81  C6 F0       	add	a,0xf0
2665  0B83  32 00 00    	ld	(_index0),a
2666  0B86  3A 01 00    	ld	a,(_index1 + 1)
2667  0B89  CE FF       	adc	a,0xff
2668  0B8B  21 01 00    	ld	hl,_index0 + 1
2669  0B8E  77          	ld	(hl), a
2670  0B8F  3E 00       	ld	a, +((_scr_map) & 0xFF)
2671  0B91  2B          	dec	hl
2672  0B92  86          	add	a, (hl)
2673  0B93  4F          	ld	c, a
2674  0B94  3E 00       	ld	a, +((_scr_map) / 256)
2675  0B96  23          	inc	hl
2676  0B97  8E          	adc	a, (hl)
2677  0B98  47          	ld	b, a
2678  0B99  C5          	push	bc
2679  0B9A  2B          	dec	hl
2680  0B9B  7E          	ld	a, (hl)
2681  0B9C  23          	inc	hl
2682  0B9D  66          	ld	h, (hl)
2683  0B9E  6F          	ld	l, a
2684  0B9F  CD 00 00    	call	_game_match_back
2685  0BA2  C1          	pop	bc
2686  0BA3  7D          	ld	a,l
2687  0BA4  02          	ld	(bc), a
2688  0BA5  01 00 00    	ld	bc,_scr_map
2689  0BA8  2A 00 00    	ld	hl,(_index1)
2690  0BAB  09          	add	hl,bc
2691  0BAC  7E          	ld	a,(hl)
2692  0BAD  FE 58       	cp	a,0x58
2693  0BAF  4D          	ld	c,l
2694  0BB0  44          	ld	b,h
2695  0BB1  28 04       	jr	Z,l_player_hit_platform_00130
2696  0BB3  D6 5D       	sub	a,0x5d
2697  0BB5  20 05       	jr	NZ,l_player_hit_platform_00131
2698  0BB7              l_player_hit_platform_00130:
2699  0BB7  3E 4F       	ld	a,0x4f
2700  0BB9  02          	ld	(bc), a
2701  0BBA  18 03       	jr	l_player_hit_platform_00132
2702  0BBC              l_player_hit_platform_00131:
2703  0BBC  3E 54       	ld	a,0x54
2704  0BBE  02          	ld	(bc), a
2705  0BBF              l_player_hit_platform_00132:
2706  0BBF  2A 00 00    	ld	hl,(_index1)
2707  0BC2  01 F0 FF    	ld	bc,0xfff0
2708  0BC5  09          	add	hl,bc
2709  0BC6  CD 00 00    	call	_game_obj_set
2710  0BC9  3A 00 00    	ld	a,(_s_lin1)
2711  0BCC  C6 10       	add	a,0x10
2712  0BCE  4F          	ld	c, a
2713  0BCF  3A 00 00    	ld	a, (_s_col1)
2714  0BD2  47          	ld	b,a
2715  0BD3  C5          	push	bc
2716  0BD4  3E 4F       	ld	a,0x4f
2717  0BD6  F5          	push	af
2718  0BD7  33          	inc	sp
2719  0BD8  CD 00 00    	call	_NIRVANAP_drawT_callee
2720  0BDB              l_player_hit_platform_00137:
2721  0BDB  DD 34 FF    	inc	(ix-1)
2722  0BDE  C3 85 0A    	jp	l_player_hit_platform_00138
2723  0BE1              l_player_hit_platform_00142:
2724  0BE1  CD 00 00    	call	_audio_golpe
2725  0BE4              l_player_hit_platform_00143:
2726  0BE4  2E 01       	ld	l,0x01
2727  0BE6  CD 00 00    	call	_spr_brick_anim
2728  0BE9  2A FF FF    	ld	hl,(_player_hit_col - 1)
2729  0BEC  3A 00 00    	ld	a,(_player_hit_lin)
2730  0BEF  6F          	ld	l,a
2731  0BF0  E5          	push	hl
2732  0BF1  CD 00 00    	call	_spr_calc_index
2733  0BF4  F1          	pop	af
2734  0BF5  22 00 00    	ld	(_index1),hl
2735  0BF8  3E 10       	ld	a,0x10
2736  0BFA  21 00 00    	ld	hl,_index1
2737  0BFD  BE          	cp	a, (hl)
2738  0BFE  3E 00       	ld	a,0x00
2739  0C00  23          	inc	hl
2740  0C01  9E          	sbc	a, (hl)
2741  0C02  30 0A       	jr	NC,l_player_hit_platform_00146
2742  0C04  2B          	dec	hl
2743  0C05  7E          	ld	a, (hl)
2744  0C06  C6 F0       	add	a,0xf0
2745  0C08  32 00 00    	ld	(_sprite_curr_index),a
2746  0C0B  CD E6 07    	call	_player_pick_item
2747  0C0E              l_player_hit_platform_00146:
2748  0C0E  2E 01       	ld	l,0x01
2749  0C10  18 02       	jr	l_player_hit_platform_00151
2750  0C12              l_player_hit_platform_00148:
2751  0C12  2E 00       	ld	l,0x00
2752  0C14              l_player_hit_platform_00151:
2753  0C14  33          	inc	sp
2754  0C15  DD E1       	pop	ix
2755  0C17  C9          	ret
2756  0C18              	SECTION code_compiler
2757  0C18              ;	---------------------------------
2758  0C18              ; Function player_hit_platform_clear
2759  0C18              ; ---------------------------------
2760  0C18              _player_hit_platform_clear:
2761  0C18  3E 04       	ld	a,0x04
2762  0C1A  F5          	push	af
2763  0C1B  33          	inc	sp
2764  0C1C  21 0E 00    	ld	hl, +(_spr_timer + 0x000e)
2765  0C1F  E5          	push	hl
2766  0C20  CD 00 00    	call	_game_check_time
2767  0C23  F1          	pop	af
2768  0C24  33          	inc	sp
2769  0C25  7D          	ld	a, l
2770  0C26  B7          	or	a, a
2771  0C27  C8          	ret	Z
2772  0C28  2A FF FF    	ld	hl,(_player_hit_col - 1)
2773  0C2B  3A 00 00    	ld	a,(_player_hit_lin)
2774  0C2E  6F          	ld	l,a
2775  0C2F  E5          	push	hl
2776  0C30  CD 00 00    	call	_spr_calc_index
2777  0C33  F1          	pop	af
2778  0C34  22 00 00    	ld	(_index1),hl
2779  0C37  2E 00       	ld	l,0x00
2780  0C39  CD 00 00    	call	_spr_brick_anim
2781  0C3C  21 00 00    	ld	hl,_player_hit_lin
2782  0C3F  36 00       	ld	(hl),0x00
2783  0C41  21 00 00    	ld	hl,_player_hit_col
2784  0C44  36 00       	ld	(hl),0x00
2785  0C46  C9          	ret
2786  0C47              	SECTION code_compiler
2787  0C47              ;	---------------------------------
2788  0C47              ; Function player_score_add
2789  0C47              ; ---------------------------------
2790  0C47              _player_score_add:
2791  0C47  ED 4B 00 00 	ld	bc,(_player_score)
2792  0C4B  09          	add	hl,bc
2793  0C4C  22 00 00    	ld	(_player_score),hl
2794  0C4F  21 00 00    	ld	hl,_player_lvl
2795  0C52  7E          	ld	a, (hl)
2796  0C53  D6 0A       	sub	a,0x0a
2797  0C55  30 45       	jr	NC,l_player_score_add_00104
2798  0C57  01 00 00    	ld	bc,_player_lvl_table+0
2799  0C5A  6E          	ld	l,(hl)
2800  0C5B  26 00       	ld	h,0x00
2801  0C5D  29          	add	hl, hl
2802  0C5E  09          	add	hl, bc
2803  0C5F  4E          	ld	c, (hl)
2804  0C60  23          	inc	hl
2805  0C61  46          	ld	b, (hl)
2806  0C62  21 00 00    	ld	hl,_player_score
2807  0C65  7E          	ld	a, (hl)
2808  0C66  91          	sub	a, c
2809  0C67  23          	inc	hl
2810  0C68  7E          	ld	a, (hl)
2811  0C69  98          	sbc	a, b
2812  0C6A  38 30       	jr	C,l_player_score_add_00104
2813  0C6C  21 00 00    	ld	hl,_player_lvl
2814  0C6F  34          	inc	(hl)
2815  0C70  CD 00 00    	call	_game_update_stats
2816  0C73  CD 00 00    	call	_spr_flatten
2817  0C76  CD 00 00    	call	_audio_levelup
2818  0C79  21 16 00    	ld	hl,___str_2
2819  0C7C  E5          	push	hl
2820  0C7D  21 0C 0C    	ld	hl,0x0c0c
2821  0C80  E5          	push	hl
2822  0C81  CD 00 00    	call	_zx_print_str
2823  0C84  AF          	xor	a, a
2824  0C85  F5          	push	af
2825  0C86  33          	inc	sp
2826  0C87  21 3C 00    	ld	hl,0x003c
2827  0C8A  E5          	push	hl
2828  0C8B  21 0C 15    	ld	hl,0x150c
2829  0C8E  E5          	push	hl
2830  0C8F  3E 0C       	ld	a,0x0c
2831  0C91  F5          	push	af
2832  0C92  33          	inc	sp
2833  0C93  CD 00 00    	call	_game_colour_message
2834  0C96  F1          	pop	af
2835  0C97  F1          	pop	af
2836  0C98  F1          	pop	af
2837  0C99  CD 00 00    	call	_spr_unflattenP1
2838  0C9C              l_player_score_add_00104:
2839  0C9C  3A 00 00    	ld	a,(_game_score_top)
2840  0C9F  21 00 00    	ld	hl,_player_score
2841  0CA2  96          	sub	a, (hl)
2842  0CA3  3A 01 00    	ld	a,(_game_score_top + 1)
2843  0CA6  23          	inc	hl
2844  0CA7  9E          	sbc	a, (hl)
2845  0CA8  30 06       	jr	NC,l_player_score_add_00106
2846  0CAA  2A 00 00    	ld	hl,(_player_score)
2847  0CAD  22 00 00    	ld	(_game_score_top),hl
2848  0CB0              l_player_score_add_00106:
2849  0CB0  CD 00 00    	call	_game_print_score
2850  0CB3  C9          	ret
2851  0CB4              	SECTION rodata_compiler
2852  0016              ___str_2:
2853  0016  4C 45 56 45 4C 20 55 50 21 
                        	DEFM "LEVEL UP!"
2854  001F  00          	DEFB 0x00
2855  0020              	SECTION code_compiler
2856  0CB4              ;	---------------------------------
2857  0CB4              ; Function player_check_floor
2858  0CB4              ; ---------------------------------
2859  0CB4              _player_check_floor:
2860  0CB4  CD 00 00    	call	___sdcc_enter_ix
2861  0CB7  F5          	push	af
2862  0CB8  F5          	push	af
2863  0CB9  F5          	push	af
2864  0CBA  21 07 00    	ld	hl,+(_col + 0x0007)
2865  0CBD  56          	ld	d, (hl)
2866  0CBE  3A 07 00    	ld	a,(_lin + 0x0007)
2867  0CC1  C6 10       	add	a,0x10
2868  0CC3  5F          	ld	e, a
2869  0CC4  D5          	push	de
2870  0CC5  CD 00 00    	call	_spr_calc_index
2871  0CC8  F1          	pop	af
2872  0CC9  DD 75 FC    	ld	(ix-4),l
2873  0CCC  DD 74 FD    	ld	(ix-3),h
2874  0CCF  11 00 00    	ld	de,_scr_map+0
2875  0CD2  7B          	ld	a, e
2876  0CD3  DD 86 FC    	add	a,(ix-4)
2877  0CD6  4F          	ld	c, a
2878  0CD7  7A          	ld	a, d
2879  0CD8  DD 8E FD    	adc	a,(ix-3)
2880  0CDB  47          	ld	b, a
2881  0CDC  0A          	ld	a, (bc)
2882  0CDD  DD 77 FB    	ld	(ix-5),a
2883  0CE0  DD 6E FC    	ld	l,(ix-4)
2884  0CE3  DD 66 FD    	ld	h,(ix-3)
2885  0CE6  23          	inc	hl
2886  0CE7  19          	add	hl,de
2887  0CE8  DD 75 FE    	ld	(ix-2),l
2888  0CEB  DD 74 FF    	ld	(ix-1),h
2889  0CEE  3A 00 00    	ld	a,(_s_lin0)
2890  0CF1  D6 90       	sub	a,0x90
2891  0CF3  20 24       	jr	NZ,l_player_check_floor_00108
2892  0CF5  3A 00 00    	ld	a,(_map_heigth)
2893  0CF8  2A 00 00    	ld	hl,(_scr_curr)
2894  0CFB  C5          	push	bc
2895  0CFC  67          	ld	h,a
2896  0CFD  E5          	push	hl
2897  0CFE  CD 00 00    	call	__divuchar_callee
2898  0D01  C1          	pop	bc
2899  0D02  7D          	ld	a,l
2900  0D03  3C          	inc	a
2901  0D04  32 00 00    	ld	(_tmp1),a
2902  0D07  21 00 00    	ld	hl,_map_heigth
2903  0D0A  96          	sub	a, (hl)
2904  0D0B  30 06       	jr	NC,l_player_check_floor_00102
2905  0D0D  DD 36 FB 00 	ld	(ix-5),0x00
2906  0D11  18 1C       	jr	l_player_check_floor_00109
2907  0D13              l_player_check_floor_00102:
2908  0D13  DD 36 FB 48 	ld	(ix-5),0x48
2909  0D17  18 16       	jr	l_player_check_floor_00109
2910  0D19              l_player_check_floor_00108:
2911  0D19  3A 07 00    	ld	a,(_col + 0x0007)
2912  0D1C  0F          	rrca
2913  0D1D  38 06       	jr	C,l_player_check_floor_00105
2914  0D1F  DD 36 FA 00 	ld	(ix-6),0x00
2915  0D23  18 0A       	jr	l_player_check_floor_00109
2916  0D25              l_player_check_floor_00105:
2917  0D25  DD 6E FE    	ld	l,(ix-2)
2918  0D28  DD 66 FF    	ld	h,(ix-1)
2919  0D2B  7E          	ld	a, (hl)
2920  0D2C  DD 77 FA    	ld	(ix-6),a
2921  0D2F              l_player_check_floor_00109:
2922  0D2F  DD 7E FB    	ld	a,(ix-5)
2923  0D32  D6 3A       	sub	a,0x3a
2924  0D34  38 07       	jr	C,l_player_check_floor_00132
2925  0D36  DD 7E FB    	ld	a,(ix-5)
2926  0D39  D6 60       	sub	a,0x60
2927  0D3B  38 2D       	jr	C,l_player_check_floor_00128
2928  0D3D              l_player_check_floor_00132:
2929  0D3D  DD 7E FA    	ld	a,(ix-6)
2930  0D40  D6 3A       	sub	a,0x3a
2931  0D42  38 07       	jr	C,l_player_check_floor_00127
2932  0D44  DD 7E FA    	ld	a,(ix-6)
2933  0D47  D6 60       	sub	a,0x60
2934  0D49  38 1F       	jr	C,l_player_check_floor_00128
2935  0D4B              l_player_check_floor_00127:
2936  0D4B  21 00 00    	ld	hl,_s_state
2937  0D4E  CB CE       	set	1, (hl)
2938  0D50  2E 00       	ld	l,0x00
2939  0D52  CD C3 06    	call	_player_check_stairs
2940  0D55  3A 00 00    	ld	a,(_player_onstair)
2941  0D58  B7          	or	a, a
2942  0D59  C2 F6 0D    	jp	NZ, l_player_check_floor_00133
2943  0D5C  3A 00 00    	ld	a,(_s_lin0)
2944  0D5F  D6 90       	sub	a,0x90
2945  0D61  C2 F6 0D    	jp	NZ,l_player_check_floor_00133
2946  0D64  CD 00 00    	call	_spr_page_down
2947  0D67  C3 F6 0D    	jp	l_player_check_floor_00133
2948  0D6A              l_player_check_floor_00128:
2949  0D6A  C5          	push	bc
2950  0D6B  3E 10       	ld	a,0x10
2951  0D6D  F5          	push	af
2952  0D6E  33          	inc	sp
2953  0D6F  21 00 00    	ld	hl,_player_brick_time
2954  0D72  E5          	push	hl
2955  0D73  CD 00 00    	call	_game_check_time
2956  0D76  F1          	pop	af
2957  0D77  33          	inc	sp
2958  0D78  C1          	pop	bc
2959  0D79  7D          	ld	a,l
2960  0D7A  B7          	or	a, a
2961  0D7B  CA F6 0D    	jp	Z, l_player_check_floor_00133
2962  0D7E  2A 00 00    	ld	hl,(_curr_time)
2963  0D81  22 00 00    	ld	(_player_brick_time),hl
2964  0D84  DD 7E FB    	ld	a,(ix-5)
2965  0D87  D6 40       	sub	a,0x40
2966  0D89  20 12       	jr	NZ,l_player_check_floor_00114
2967  0D8B  C5          	push	bc
2968  0D8C  DD 6E FC    	ld	l,(ix-4)
2969  0D8F  DD 66 FD    	ld	h,(ix-3)
2970  0D92  CD 00 00    	call	_game_match_back
2971  0D95  C1          	pop	bc
2972  0D96  7D          	ld	a,l
2973  0D97  02          	ld	(bc), a
2974  0D98  C5          	push	bc
2975  0D99  CD FB 0D    	call	_player_gasta_brick
2976  0D9C  C1          	pop	bc
2977  0D9D              l_player_check_floor_00114:
2978  0D9D  DD 7E FB    	ld	a,(ix-5)
2979  0DA0  D6 3F       	sub	a,0x3f
2980  0DA2  20 08       	jr	NZ,l_player_check_floor_00116
2981  0DA4  3E 40       	ld	a,0x40
2982  0DA6  02          	ld	(bc), a
2983  0DA7  C5          	push	bc
2984  0DA8  CD FB 0D    	call	_player_gasta_brick
2985  0DAB  C1          	pop	bc
2986  0DAC              l_player_check_floor_00116:
2987  0DAC  DD 7E FB    	ld	a,(ix-5)
2988  0DAF  D6 3E       	sub	a,0x3e
2989  0DB1  20 06       	jr	NZ,l_player_check_floor_00118
2990  0DB3  3E 3F       	ld	a,0x3f
2991  0DB5  02          	ld	(bc), a
2992  0DB6  CD FB 0D    	call	_player_gasta_brick
2993  0DB9              l_player_check_floor_00118:
2994  0DB9  DD 7E FA    	ld	a,(ix-6)
2995  0DBC  D6 40       	sub	a,0x40
2996  0DBE  20 12       	jr	NZ,l_player_check_floor_00120
2997  0DC0  C1          	pop	bc
2998  0DC1  E1          	pop	hl
2999  0DC2  E5          	push	hl
3000  0DC3  C5          	push	bc
3001  0DC4  CD 00 00    	call	_game_match_back
3002  0DC7  4D          	ld	c, l
3003  0DC8  DD 6E FE    	ld	l,(ix-2)
3004  0DCB  DD 66 FF    	ld	h,(ix-1)
3005  0DCE  71          	ld	(hl), c
3006  0DCF  CD FB 0D    	call	_player_gasta_brick
3007  0DD2              l_player_check_floor_00120:
3008  0DD2  DD 7E FA    	ld	a,(ix-6)
3009  0DD5  D6 3F       	sub	a,0x3f
3010  0DD7  20 0B       	jr	NZ,l_player_check_floor_00122
3011  0DD9  DD 6E FE    	ld	l,(ix-2)
3012  0DDC  DD 66 FF    	ld	h,(ix-1)
3013  0DDF  36 40       	ld	(hl),0x40
3014  0DE1  CD FB 0D    	call	_player_gasta_brick
3015  0DE4              l_player_check_floor_00122:
3016  0DE4  DD 7E FA    	ld	a,(ix-6)
3017  0DE7  D6 3E       	sub	a,0x3e
3018  0DE9  20 0B       	jr	NZ,l_player_check_floor_00133
3019  0DEB  DD 6E FE    	ld	l,(ix-2)
3020  0DEE  DD 66 FF    	ld	h,(ix-1)
3021  0DF1  36 3F       	ld	(hl),0x3f
3022  0DF3  CD FB 0D    	call	_player_gasta_brick
3023  0DF6              l_player_check_floor_00133:
3024  0DF6  DD F9       	ld	sp, ix
3025  0DF8  DD E1       	pop	ix
3026  0DFA  C9          	ret
3027  0DFB              	SECTION code_compiler
3028  0DFB              ;	---------------------------------
3029  0DFB              ; Function player_gasta_brick
3030  0DFB              ; ---------------------------------
3031  0DFB              _player_gasta_brick:
3032  0DFB  3A 00 00    	ld	a,(_s_lin0)
3033  0DFE  32 00 00    	ld	(_s_lin1),a
3034  0E01  3A 00 00    	ld	a,(_s_col0)
3035  0E04  32 00 00    	ld	(_s_col1),a
3036  0E07  3A 07 00    	ld	a,(_lin + 0x0007)
3037  0E0A  C6 10       	add	a,0x10
3038  0E0C  32 00 00    	ld	(_s_lin0),a
3039  0E0F  3A 07 00    	ld	a,(_col + 0x0007)
3040  0E12  32 00 00    	ld	(_s_col0),a
3041  0E15  CD 00 00    	call	_spr_back_repaint
3042  0E18  3A 00 00    	ld	a,(_s_lin1)
3043  0E1B  32 00 00    	ld	(_s_lin0),a
3044  0E1E  3A 00 00    	ld	a,(_s_col1)
3045  0E21  32 00 00    	ld	(_s_col0),a
3046  0E24  C9          	ret
3047  0E25              	SECTION code_compiler
3048  0E25              ;	---------------------------------
3049  0E25              ; Function player_move_jump
3050  0E25              ; ---------------------------------
3051  0E25              _player_move_jump:
3052  0E25  21 00 00    	ld	hl,_game_gravity
3053  0E28  4E          	ld	c, (hl)
3054  0E29  21 00 00    	ld	hl,_player_vel_y
3055  0E2C  7E          	ld	a, (hl)
3056  0E2D  81          	add	a, c
3057  0E2E  77          	ld	(hl), a
3058  0E2F  3A 00 00    	ld	a,(_player_vel_inc)
3059  0E32  B7          	or	a, a
3060  0E33  28 27       	jr	Z,l_player_move_jump_00106
3061  0E35  3A 00 00    	ld	a,(_player_vel_y1)
3062  0E38  21 00 00    	ld	hl,_player_vel_y
3063  0E3B  96          	sub	a, (hl)
3064  0E3C  E2 41 0E    	jp	PO, l_player_move_jump_00243
3065  0E3F  EE 80       	xor	a,0x80
3066  0E41              l_player_move_jump_00243:
3067  0E41  F2 5C 0E    	jp	P, l_player_move_jump_00106
3068  0E44  3A 00 00    	ld	a,(_player_vel_y)
3069  0E47  CB 7F       	bit	7, a
3070  0E49  28 11       	jr	Z,l_player_move_jump_00106
3071  0E4B  CD F2 01    	call	_player_action_jump
3072  0E4E  7D          	ld	a, l
3073  0E4F  B7          	or	a, a
3074  0E50  20 0A       	jr	NZ,l_player_move_jump_00106
3075  0E52  21 00 00    	ld	hl,_player_vel_y
3076  0E55  36 00       	ld	(hl),0x00
3077  0E57  21 00 00    	ld	hl,_player_vel_inc
3078  0E5A  36 00       	ld	(hl),0x00
3079  0E5C              l_player_move_jump_00106:
3080  0E5C  3E 78       	ld	a,0x78
3081  0E5E  21 00 00    	ld	hl,_player_vel_y
3082  0E61  96          	sub	a, (hl)
3083  0E62  E2 67 0E    	jp	PO, l_player_move_jump_00244
3084  0E65  EE 80       	xor	a,0x80
3085  0E67              l_player_move_jump_00244:
3086  0E67  F2 6F 0E    	jp	P, l_player_move_jump_00108
3087  0E6A  21 00 00    	ld	hl,_player_vel_y
3088  0E6D  36 78       	ld	(hl),0x78
3089  0E6F              l_player_move_jump_00108:
3090  0E6F  21 00 00    	ld	hl,_player_vel_y
3091  0E72  7E          	ld	a, (hl)
3092  0E73  EE 80       	xor	a,0x80
3093  0E75  D6 08       	sub	a,0x08
3094  0E77  30 02       	jr	NC,l_player_move_jump_00110
3095  0E79  36 88       	ld	(hl),0x88
3096  0E7B              l_player_move_jump_00110:
3097  0E7B  3A 00 00    	ld	a,(_player_vel_y)
3098  0E7E  4F          	ld	c,a
3099  0E7F  17          	rla
3100  0E80  9F          	sbc	a, a
3101  0E81  47          	ld	b, a
3102  0E82  CB 41       	bit	0,c
3103  0E84  21 00 00    	ld	hl,_s_lin1
3104  0E87  71          	ld	(hl),c
3105  0E88  28 04       	jr	Z,l_player_move_jump_00112
3106  0E8A  21 00 00    	ld	hl,_s_lin1
3107  0E8D  35          	dec	(hl)
3108  0E8E              l_player_move_jump_00112:
3109  0E8E  3A 07 00    	ld	a,(_lin + 0x0007)
3110  0E91  21 00 00    	ld	hl,_s_lin1
3111  0E94  86          	add	a, (hl)
3112  0E95  77          	ld	(hl), a
3113  0E96  CB 78       	bit	7, b
3114  0E98  28 5A       	jr	Z,l_player_move_jump_00138
3115  0E9A  21 00 00    	ld	hl,_s_state
3116  0E9D  CD 00 00    	call	_spr_set_up
3117  0EA0  3E 90       	ld	a,0x90
3118  0EA2  21 00 00    	ld	hl,_s_lin1
3119  0EA5  96          	sub	a, (hl)
3120  0EA6  30 11       	jr	NC,l_player_move_jump_00117
3121  0EA8  CD 00 00    	call	_spr_page_up
3122  0EAB  7D          	ld	a, l
3123  0EAC  B7          	or	a, a
3124  0EAD  28 05       	jr	Z,l_player_move_jump_00114
3125  0EAF  2E 00       	ld	l,0x00
3126  0EB1  C3 B2 0F    	jp	l_player_move_jump_00149
3127  0EB4              l_player_move_jump_00114:
3128  0EB4  21 00 00    	ld	hl,_s_lin1
3129  0EB7  36 00       	ld	(hl),0x00
3130  0EB9              l_player_move_jump_00117:
3131  0EB9  21 07 00    	ld	hl,+(_col + 0x0007)
3132  0EBC  46          	ld	b, (hl)
3133  0EBD  3A 00 00    	ld	a,(_s_lin1)
3134  0EC0  4F          	ld	c,a
3135  0EC1  C5          	push	bc
3136  0EC2  CD 00 00    	call	_game_check_map
3137  0EC5  F1          	pop	af
3138  0EC6  7C          	ld	a,h
3139  0EC7  B5          	or	a,l
3140  0EC8  28 21       	jr	Z,l_player_move_jump_00121
3141  0ECA  CD 96 09    	call	_player_hit_platform
3142  0ECD  7D          	ld	a, l
3143  0ECE  B7          	or	a, a
3144  0ECF  28 12       	jr	Z,l_player_move_jump_00119
3145  0ED1  3A 07 00    	ld	a,(_lin + 0x0007)
3146  0ED4  07          	rlca
3147  0ED5  07          	rlca
3148  0ED6  07          	rlca
3149  0ED7  07          	rlca
3150  0ED8  E6 0F       	and	a,0x0f
3151  0EDA  07          	rlca
3152  0EDB  07          	rlca
3153  0EDC  07          	rlca
3154  0EDD  07          	rlca
3155  0EDE  E6 F0       	and	a,0xf0
3156  0EE0  32 07 00    	ld	((_lin + 0x0007)),a
3157  0EE3              l_player_move_jump_00119:
3158  0EE3  21 00 00    	ld	hl,_player_vel_y
3159  0EE6  36 00       	ld	(hl),0x00
3160  0EE8  C3 73 0F    	jp	l_player_move_jump_00139
3161  0EEB              l_player_move_jump_00121:
3162  0EEB  3A 00 00    	ld	a,(_s_lin1)
3163  0EEE  32 07 00    	ld	((_lin + 0x0007)),a
3164  0EF1  C3 73 0F    	jp	l_player_move_jump_00139
3165  0EF4              l_player_move_jump_00138:
3166  0EF4  21 00 00    	ld	hl,_s_state
3167  0EF7  CD 00 00    	call	_spr_set_down
3168  0EFA  3E 90       	ld	a,0x90
3169  0EFC  21 00 00    	ld	hl,_s_lin1
3170  0EFF  96          	sub	a, (hl)
3171  0F00  30 11       	jr	NC,l_player_move_jump_00127
3172  0F02  CD 00 00    	call	_spr_page_down
3173  0F05  7D          	ld	a, l
3174  0F06  B7          	or	a, a
3175  0F07  28 05       	jr	Z,l_player_move_jump_00124
3176  0F09  2E 00       	ld	l,0x00
3177  0F0B  C3 B2 0F    	jp	l_player_move_jump_00149
3178  0F0E              l_player_move_jump_00124:
3179  0F0E  21 00 00    	ld	hl,_s_lin1
3180  0F11  36 90       	ld	(hl),0x90
3181  0F13              l_player_move_jump_00127:
3182  0F13  21 07 00    	ld	hl,+(_col + 0x0007)
3183  0F16  56          	ld	d, (hl)
3184  0F17  3A 00 00    	ld	a,(_s_lin1)
3185  0F1A  C6 10       	add	a,0x10
3186  0F1C  5F          	ld	e, a
3187  0F1D  D5          	push	de
3188  0F1E  CD 00 00    	call	_game_check_map
3189  0F21  F1          	pop	af
3190  0F22  7C          	ld	a,h
3191  0F23  B5          	or	a,l
3192  0F24  28 47       	jr	Z,l_player_move_jump_00135
3193  0F26  2E 00       	ld	l,0x00
3194  0F28  CD C3 06    	call	_player_check_stairs
3195  0F2B  3A 00 00    	ld	a,(_player_onstair)
3196  0F2E  B7          	or	a, a
3197  0F2F  20 05       	jr	NZ,l_player_move_jump_00129
3198  0F31  2E 01       	ld	l,0x01
3199  0F33  CD C3 06    	call	_player_check_stairs
3200  0F36              l_player_move_jump_00129:
3201  0F36  3A 00 00    	ld	a,(_player_onstair)
3202  0F39  B7          	or	a, a
3203  0F3A  20 12       	jr	NZ,l_player_move_jump_00131
3204  0F3C  3A 00 00    	ld	a,(_s_lin1)
3205  0F3F  07          	rlca
3206  0F40  07          	rlca
3207  0F41  07          	rlca
3208  0F42  07          	rlca
3209  0F43  E6 0F       	and	a,0x0f
3210  0F45  07          	rlca
3211  0F46  07          	rlca
3212  0F47  07          	rlca
3213  0F48  07          	rlca
3214  0F49  E6 F0       	and	a,0xf0
3215  0F4B  32 07 00    	ld	((_lin + 0x0007)),a
3216  0F4E              l_player_move_jump_00131:
3217  0F4E  21 00 00    	ld	hl,_player_vel_y
3218  0F51  36 00       	ld	(hl),0x00
3219  0F53  21 00 00    	ld	hl,_s_state
3220  0F56  7E          	ld	a,(hl)
3221  0F57  E6 FC       	and	a,+(0xfd&0xfe)
3222  0F59  77          	ld	(hl),a
3223  0F5A  3A 07 00    	ld	a,(_lin + 0x0007)
3224  0F5D  D6 90       	sub	a,0x90
3225  0F5F  38 03       	jr	C,l_player_move_jump_00133
3226  0F61  CD 00 00    	call	_spr_page_down
3227  0F64              l_player_move_jump_00133:
3228  0F64  21 07 00    	ld	hl, +(_colint + 0x0007)
3229  0F67  36 00       	ld	(hl),0x00
3230  0F69  2E 01       	ld	l,0x01
3231  0F6B  18 45       	jr	l_player_move_jump_00149
3232  0F6D              l_player_move_jump_00135:
3233  0F6D  3A 00 00    	ld	a,(_s_lin1)
3234  0F70  32 07 00    	ld	((_lin + 0x0007)),a
3235  0F73              l_player_move_jump_00139:
3236  0F73  21 00 00    	ld	hl,_s_state
3237  0F76  CB 5E       	bit	3,(hl)
3238  0F78  20 1E       	jr	NZ,l_player_move_jump_00145
3239  0F7A  CB 56       	bit	2, (hl)
3240  0F7C  20 1A       	jr	NZ,l_player_move_jump_00145
3241  0F7E  21 00 00    	ld	hl,_dirs
3242  0F81  CB 56       	bit	2, (hl)
3243  0F83  28 06       	jr	Z,l_player_move_jump_00141
3244  0F85  21 00 00    	ld	hl,_s_state
3245  0F88  CD 00 00    	call	_spr_set_left
3246  0F8B              l_player_move_jump_00141:
3247  0F8B  21 00 00    	ld	hl,_dirs
3248  0F8E  CB 5E       	bit	3, (hl)
3249  0F90  28 06       	jr	Z,l_player_move_jump_00145
3250  0F92  21 00 00    	ld	hl,_s_state
3251  0F95  CD 00 00    	call	_spr_set_right
3252  0F98              l_player_move_jump_00145:
3253  0F98  21 00 00    	ld	hl,_player_jump_check
3254  0F9B  36 01       	ld	(hl),0x01
3255  0F9D  CD 00 00    	call	_spr_move_horizontal
3256  0FA0  7D          	ld	a, l
3257  0FA1  B7          	or	a, a
3258  0FA2  28 07       	jr	Z,l_player_move_jump_00148
3259  0FA4  21 00 00    	ld	hl,_s_state
3260  0FA7  7E          	ld	a,(hl)
3261  0FA8  E6 F3       	and	a,+(0xf7&0xfb)
3262  0FAA  77          	ld	(hl),a
3263  0FAB              l_player_move_jump_00148:
3264  0FAB  21 00 00    	ld	hl,_player_jump_check
3265  0FAE  36 00       	ld	(hl),0x00
3266  0FB0  2E 00       	ld	l,0x00
3267  0FB2              l_player_move_jump_00149:
3268  0FB2  C9          	ret
3269  0FB3              	SECTION code_compiler
3270  0FB3              ;	---------------------------------
3271  0FB3              ; Function player_open_door
3272  0FB3              ; ---------------------------------
3273  0FB3              _player_open_door:
3274  0FB3  CD 00 00    	call	___sdcc_enter_ix
3275  0FB6  0E 00       	ld	c,0x00
3276  0FB8  DD 7E 06    	ld	a,(ix+6)
3277  0FBB  D6 48       	sub	a,0x48
3278  0FBD  28 17       	jr	Z,l_player_open_door_00101
3279  0FBF  DD 7E 06    	ld	a,(ix+6)
3280  0FC2  D6 49       	sub	a,0x49
3281  0FC4  28 1A       	jr	Z,l_player_open_door_00104
3282  0FC6  DD 7E 06    	ld	a,(ix+6)
3283  0FC9  D6 4A       	sub	a,0x4a
3284  0FCB  28 1D       	jr	Z,l_player_open_door_00107
3285  0FCD  DD 7E 06    	ld	a,(ix+6)
3286  0FD0  D6 4B       	sub	a,0x4b
3287  0FD2  28 20       	jr	Z,l_player_open_door_00110
3288  0FD4  18 26       	jr	l_player_open_door_00113
3289  0FD6              l_player_open_door_00101:
3290  0FD6  3A 00 00    	ld	a,(_player_keys)
3291  0FD9  B7          	or	a, a
3292  0FDA  28 20       	jr	Z,l_player_open_door_00113
3293  0FDC  0E 01       	ld	c,0x01
3294  0FDE  18 1C       	jr	l_player_open_door_00113
3295  0FE0              l_player_open_door_00104:
3296  0FE0  3A 01 00    	ld	a,(_player_keys + 0x0001)
3297  0FE3  B7          	or	a, a
3298  0FE4  28 16       	jr	Z,l_player_open_door_00113
3299  0FE6  0E 01       	ld	c,0x01
3300  0FE8  18 12       	jr	l_player_open_door_00113
3301  0FEA              l_player_open_door_00107:
3302  0FEA  3A 02 00    	ld	a,(_player_keys + 0x0002)
3303  0FED  B7          	or	a, a
3304  0FEE  28 0C       	jr	Z,l_player_open_door_00113
3305  0FF0  0E 01       	ld	c,0x01
3306  0FF2  18 08       	jr	l_player_open_door_00113
3307  0FF4              l_player_open_door_00110:
3308  0FF4  3A 03 00    	ld	a,(_player_keys + 0x0003)
3309  0FF7  B7          	or	a, a
3310  0FF8  28 02       	jr	Z,l_player_open_door_00113
3311  0FFA  0E 01       	ld	c,0x01
3312  0FFC              l_player_open_door_00113:
3313  0FFC  79          	ld	a, c
3314  0FFD  B7          	or	a, a
3315  0FFE  20 06       	jr	NZ,l_player_open_door_00114
3316  1000  3A 00 00    	ld	a,(_game_inmune)
3317  1003  B7          	or	a, a
3318  1004  28 23       	jr	Z,l_player_open_door_00115
3319  1006              l_player_open_door_00114:
3320  1006  CD 00 00    	call	_audio_puerta
3321  1009  3E 00       	ld	a, +((_scr_map) & 0xFF)
3322  100B  DD 86 04    	add	a,(ix+4)
3323  100E  4F          	ld	c, a
3324  100F  3E 00       	ld	a, +((_scr_map) / 256)
3325  1011  DD 8E 05    	adc	a,(ix+5)
3326  1014  47          	ld	b, a
3327  1015  AF          	xor	a, a
3328  1016  02          	ld	(bc), a
3329  1017  DD 6E 04    	ld	l,(ix+4)
3330  101A  DD 66 05    	ld	h,(ix+5)
3331  101D  CD 00 00    	call	_game_obj_set
3332  1020  21 04 00    	ld	hl,0x0004
3333  1023  39          	add	hl, sp
3334  1024  CD 00 00    	call	_spr_draw_index
3335  1027  18 03       	jr	l_player_open_door_00118
3336  1029              l_player_open_door_00115:
3337  1029  CD 00 00    	call	_audio_sin_mana
3338  102C              l_player_open_door_00118:
3339  102C  DD E1       	pop	ix
3340  102E  C9          	ret
3341  102F              	SECTION code_compiler
3342  102F              ;	---------------------------------
3343  102F              ; Function player_lost_life
3344  102F              ; ---------------------------------
3345  102F              _player_lost_life:
3346  102F  CD 00 00    	call	___sdcc_enter_ix
3347  1032  3B          	dec	sp
3348  1033  21 00 00    	ld	hl,_player_vita
3349  1036  36 00       	ld	(hl),0x00
3350  1038  CD 00 00    	call	_game_update_stats
3351  103B  3A 07 00    	ld	a,(_lin + 0x0007)
3352  103E  32 00 00    	ld	(_s_lin0),a
3353  1041  3A 07 00    	ld	a,(_col + 0x0007)
3354  1044  32 00 00    	ld	(_s_col0),a
3355  1047  CD 00 00    	call	_spr_init_effects
3356  104A  06 00       	ld	b,0x00
3357  104C              l_player_lost_life_00117:
3358  104C  C5          	push	bc
3359  104D  21 00 00    	ld	hl,0x0000
3360  1050  E5          	push	hl
3361  1051  AF          	xor	a, a
3362  1052  48          	ld	c,b
3363  1053  47          	ld	b,a
3364  1054  C5          	push	bc
3365  1055  CD 00 00    	call	_NIRVANAP_spriteT_callee
3366  1058  C1          	pop	bc
3367  1059  04          	inc	b
3368  105A  3E 07       	ld	a,0x07
3369  105C  90          	sub	a, b
3370  105D  30 ED       	jr	NC,l_player_lost_life_00117
3371  105F  CD 00 00    	call	_ay_reset
3372  1062  CD 00 00    	call	_audio_explosion
3373  1065  3A 00 00    	ld	a,(_s_lin0)
3374  1068  C6 F0       	add	a,0xf0
3375  106A  47          	ld	b, a
3376  106B  3A 00 00    	ld	a,(_s_col0)
3377  106E  21 00 00    	ld	hl,0x0000
3378  1071  E5          	push	hl
3379  1072  21 87 03    	ld	hl,0x0387
3380  1075  E5          	push	hl
3381  1076  48          	ld	c,b
3382  1077  47          	ld	b,a
3383  1078  C5          	push	bc
3384  1079  CD 00 00    	call	_spr_add_anim
3385  107C  F1          	pop	af
3386  107D  F1          	pop	af
3387  107E  F1          	pop	af
3388  107F  21 00 00    	ld	hl,_s_col0
3389  1082  46          	ld	b, (hl)
3390  1083  05          	dec	b
3391  1084  05          	dec	b
3392  1085  3A 00 00    	ld	a,(_s_lin0)
3393  1088  21 00 00    	ld	hl,0x0000
3394  108B  E5          	push	hl
3395  108C  21 87 03    	ld	hl,0x0387
3396  108F  E5          	push	hl
3397  1090  4F          	ld	c,a
3398  1091  C5          	push	bc
3399  1092  CD 00 00    	call	_spr_add_anim
3400  1095  F1          	pop	af
3401  1096  F1          	pop	af
3402  1097  21 00 00    	ld	hl,0x0000
3403  109A  E3          	ex	(sp),hl
3404  109B  3A 00 00    	ld	a,(_s_col0)
3405  109E  21 87 03    	ld	hl,0x0387
3406  10A1  E5          	push	hl
3407  10A2  2A 00 00    	ld	hl,(_s_lin0)
3408  10A5  67          	ld	h,a
3409  10A6  E5          	push	hl
3410  10A7  CD 00 00    	call	_spr_add_anim
3411  10AA  F1          	pop	af
3412  10AB  F1          	pop	af
3413  10AC  F1          	pop	af
3414  10AD  21 00 00    	ld	hl,_s_col0
3415  10B0  46          	ld	b, (hl)
3416  10B1  04          	inc	b
3417  10B2  04          	inc	b
3418  10B3  3A 00 00    	ld	a,(_s_lin0)
3419  10B6  21 00 00    	ld	hl,0x0000
3420  10B9  E5          	push	hl
3421  10BA  21 87 03    	ld	hl,0x0387
3422  10BD  E5          	push	hl
3423  10BE  4F          	ld	c,a
3424  10BF  C5          	push	bc
3425  10C0  CD 00 00    	call	_spr_add_anim
3426  10C3  F1          	pop	af
3427  10C4  F1          	pop	af
3428  10C5  F1          	pop	af
3429  10C6  3A 00 00    	ld	a,(_s_lin0)
3430  10C9  C6 10       	add	a,0x10
3431  10CB  47          	ld	b, a
3432  10CC  3A 00 00    	ld	a,(_s_col0)
3433  10CF  21 00 00    	ld	hl,0x0000
3434  10D2  E5          	push	hl
3435  10D3  21 87 03    	ld	hl,0x0387
3436  10D6  E5          	push	hl
3437  10D7  48          	ld	c,b
3438  10D8  47          	ld	b,a
3439  10D9  C5          	push	bc
3440  10DA  CD 00 00    	call	_spr_add_anim
3441  10DD  F1          	pop	af
3442  10DE  F1          	pop	af
3443  10DF  F1          	pop	af
3444  10E0  DD 36 FF 01 	ld	(ix-1),0x01
3445  10E4  2A 00 00    	ld	hl,(_curr_time)
3446  10E7  22 00 00    	ld	(_anim_time),hl
3447  10EA              l_player_lost_life_00107:
3448  10EA  DD 7E FF    	ld	a,(ix-1)
3449  10ED  B7          	or	a, a
3450  10EE  28 28       	jr	Z,l_player_lost_life_00109
3451  10F0  3E 0C       	ld	a,0x0c
3452  10F2  F5          	push	af
3453  10F3  33          	inc	sp
3454  10F4  21 00 00    	ld	hl,_anim_time
3455  10F7  E5          	push	hl
3456  10F8  CD 00 00    	call	_game_check_time
3457  10FB  F1          	pop	af
3458  10FC  33          	inc	sp
3459  10FD  7D          	ld	a, l
3460  10FE  B7          	or	a, a
3461  10FF  28 E9       	jr	Z,l_player_lost_life_00107
3462  1101  2A 00 00    	ld	hl,(_curr_time)
3463  1104  22 00 00    	ld	(_anim_time),hl
3464  1107  3A 00 00    	ld	a,(_anim_count)
3465  110A  B7          	or	a,a
3466  110B  28 05       	jr	Z,l_player_lost_life_00103
3467  110D  CD 00 00    	call	_spr_play_anim
3468  1110  18 D8       	jr	l_player_lost_life_00107
3469  1112              l_player_lost_life_00103:
3470  1112  DD 36 FF 00 	ld	(ix-1),0x00
3471  1116  18 D2       	jr	l_player_lost_life_00107
3472  1118              l_player_lost_life_00109:
3473  1118  CD 00 00    	call	_audio_lotr_lose_a_life
3474  111B  3A 00 00    	ld	a,(_game_boss)
3475  111E  B7          	or	a, a
3476  111F  28 0F       	jr	Z,l_player_lost_life_00111
3477  1121  3A 00 00    	ld	a,(_boss_lin)
3478  1124  32 00 00    	ld	(_s_lin1),a
3479  1127  3A 00 00    	ld	a,(_boss_col)
3480  112A  32 00 00    	ld	(_s_col1),a
3481  112D  CD 00 00    	call	_boss_draw
3482  1130              l_player_lost_life_00111:
3483  1130  3A 00 00    	ld	a,(_game_inf_lives)
3484  1133  B7          	or	a, a
3485  1134  20 04       	jr	NZ,l_player_lost_life_00113
3486  1136  21 00 00    	ld	hl,_player_lives
3487  1139  35          	dec	(hl)
3488  113A              l_player_lost_life_00113:
3489  113A  21 00 00    	ld	hl,_player_mana
3490  113D  36 64       	ld	(hl),0x64
3491  113F  21 00 00    	ld	hl,_player_vita
3492  1142  36 64       	ld	(hl),0x64
3493  1144  3A 00 00    	ld	a,(_player_lives)
3494  1147  B7          	or	a, a
3495  1148  28 1D       	jr	Z,l_player_lost_life_00115
3496  114A  21 F4 01    	ld	hl,0x01f4
3497  114D  CD 00 00    	call	_z80_delay_ms_fastcall
3498  1150  3A 00 00    	ld	a,(_game_checkpoint_col)
3499  1153  32 00 00    	ld	(_player_col_scr),a
3500  1156  3A 00 00    	ld	a,(_game_checkpoint_lin)
3501  1159  32 00 00    	ld	(_player_lin_scr),a
3502  115C  3A 00 00    	ld	a,(_game_checkpoint_scr)
3503  115F  32 00 00    	ld	(_scr_curr),a
3504  1162  CD 00 00    	call	_game_round_init
3505  1165  18 0A       	jr	l_player_lost_life_00119
3506  1167              l_player_lost_life_00115:
3507  1167  21 00 00    	ld	hl,_player_lives
3508  116A  36 00       	ld	(hl),0x00
3509  116C  21 00 00    	ld	hl,_game_over
3510  116F  36 01       	ld	(hl),0x01
3511  1171              l_player_lost_life_00119:
3512  1171  33          	inc	sp
3513  1172  DD E1       	pop	ix
3514  1174  C9          	ret
3515  1175              	SECTION code_compiler
3516  1175              ;	---------------------------------
3517  1175              ; Function player_damage
3518  1175              ; ---------------------------------
3519  1175              _player_damage:
3520  1175  7D          	ld	a,l
3521  1176  4D          	ld	c,l
3522  1177  21 00 00    	ld	hl,_player_vita
3523  117A  96          	sub	a, (hl)
3524  117B  30 1F       	jr	NC,l_player_damage_00104
3525  117D  3A 00 00    	ld	a,(_game_inmune)
3526  1180  B7          	or	a, a
3527  1181  20 06       	jr	NZ,l_player_damage_00102
3528  1183  21 00 00    	ld	hl,_player_vita
3529  1186  7E          	ld	a, (hl)
3530  1187  91          	sub	a, c
3531  1188  77          	ld	(hl), a
3532  1189              l_player_damage_00102:
3533  1189  2A 00 00    	ld	hl,(_curr_time)
3534  118C  22 00 00    	ld	(_player_hit_time),hl
3535  118F  21 00 00    	ld	hl,_player_hit
3536  1192  36 01       	ld	(hl),0x01
3537  1194  CD 00 00    	call	_audio_golpe
3538  1197  CD 00 00    	call	_game_update_stats
3539  119A  18 03       	jr	l_player_damage_00106
3540  119C              l_player_damage_00104:
3541  119C  CD 2F 10    	call	_player_lost_life
3542  119F              l_player_damage_00106:
3543  119F  C9          	ret
3544  11A0              	SECTION IGNORE
3545  0000              
