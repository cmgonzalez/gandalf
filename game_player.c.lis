1     0000              MODULE game_player_c
2     0000              
3     0000              ;--------------------------------------------------------
4     0000              ; File Created by SDCC : free open source ANSI-C Compiler
5     0000              ; Version 3.6.5 #9958 (Mac OS X i386)
6     0000              ;--------------------------------------------------------
7     0000              ; Processed by Z88DK
8     0000              ;--------------------------------------------------------
9     0000              
10    0000              	EXTERN __divschar
11    0000              	EXTERN __divschar_callee
12    0000              	EXTERN __divsint
13    0000              	EXTERN __divsint_callee
14    0000              	EXTERN __divslong
15    0000              	EXTERN __divslong_callee
16    0000              	EXTERN __divslonglong
17    0000              	EXTERN __divslonglong_callee
18    0000              	EXTERN __divsuchar
19    0000              	EXTERN __divsuchar_callee
20    0000              	EXTERN __divuchar
21    0000              	EXTERN __divuchar_callee
22    0000              	EXTERN __divuint
23    0000              	EXTERN __divuint_callee
24    0000              	EXTERN __divulong
25    0000              	EXTERN __divulong_callee
26    0000              	EXTERN __divulonglong
27    0000              	EXTERN __divulonglong_callee
28    0000              	EXTERN __divuschar
29    0000              	EXTERN __divuschar_callee
30    0000              	EXTERN __modschar
31    0000              	EXTERN __modschar_callee
32    0000              	EXTERN __modsint
33    0000              	EXTERN __modsint_callee
34    0000              	EXTERN __modslong
35    0000              	EXTERN __modslong_callee
36    0000              	EXTERN __modslonglong
37    0000              	EXTERN __modslonglong_callee
38    0000              	EXTERN __modsuchar
39    0000              	EXTERN __modsuchar_callee
40    0000              	EXTERN __moduchar
41    0000              	EXTERN __moduchar_callee
42    0000              	EXTERN __moduint
43    0000              	EXTERN __moduint_callee
44    0000              	EXTERN __modulong
45    0000              	EXTERN __modulong_callee
46    0000              	EXTERN __modulonglong
47    0000              	EXTERN __modulonglong_callee
48    0000              	EXTERN __moduschar
49    0000              	EXTERN __moduschar_callee
50    0000              	EXTERN __mulint
51    0000              	EXTERN __mulint_callee
52    0000              	EXTERN __mullong
53    0000              	EXTERN __mullong_callee
54    0000              	EXTERN __mullonglong
55    0000              	EXTERN __mullonglong_callee
56    0000              	EXTERN __mulschar
57    0000              	EXTERN __mulschar_callee
58    0000              	EXTERN __mulsuchar
59    0000              	EXTERN __mulsuchar_callee
60    0000              	EXTERN __muluschar
61    0000              	EXTERN __muluschar_callee
62    0000              	EXTERN __rlslonglong
63    0000              	EXTERN __rlslonglong_callee
64    0000              	EXTERN __rlulonglong
65    0000              	EXTERN __rlulonglong_callee
66    0000              	EXTERN __rrslonglong
67    0000              	EXTERN __rrslonglong_callee
68    0000              	EXTERN __rrulonglong
69    0000              	EXTERN __rrulonglong_callee
70    0000              	EXTERN ___sdcc_call_hl
71    0000              	EXTERN ___sdcc_call_iy
72    0000              	EXTERN ___sdcc_enter_ix
73    0000              	EXTERN _banked_call
74    0000              	EXTERN _banked_ret
75    0000              	EXTERN ___fs2schar
76    0000              	EXTERN ___fs2schar_callee
77    0000              	EXTERN ___fs2sint
78    0000              	EXTERN ___fs2sint_callee
79    0000              	EXTERN ___fs2slong
80    0000              	EXTERN ___fs2slong_callee
81    0000              	EXTERN ___fs2slonglong
82    0000              	EXTERN ___fs2slonglong_callee
83    0000              	EXTERN ___fs2uchar
84    0000              	EXTERN ___fs2uchar_callee
85    0000              	EXTERN ___fs2uint
86    0000              	EXTERN ___fs2uint_callee
87    0000              	EXTERN ___fs2ulong
88    0000              	EXTERN ___fs2ulong_callee
89    0000              	EXTERN ___fs2ulonglong
90    0000              	EXTERN ___fs2ulonglong_callee
91    0000              	EXTERN ___fsadd
92    0000              	EXTERN ___fsadd_callee
93    0000              	EXTERN ___fsdiv
94    0000              	EXTERN ___fsdiv_callee
95    0000              	EXTERN ___fseq
96    0000              	EXTERN ___fseq_callee
97    0000              	EXTERN ___fsgt
98    0000              	EXTERN ___fsgt_callee
99    0000              	EXTERN ___fslt
100   0000              	EXTERN ___fslt_callee
101   0000              	EXTERN ___fsmul
102   0000              	EXTERN ___fsmul_callee
103   0000              	EXTERN ___fsneq
104   0000              	EXTERN ___fsneq_callee
105   0000              	EXTERN ___fssub
106   0000              	EXTERN ___fssub_callee
107   0000              	EXTERN ___schar2fs
108   0000              	EXTERN ___schar2fs_callee
109   0000              	EXTERN ___sint2fs
110   0000              	EXTERN ___sint2fs_callee
111   0000              	EXTERN ___slong2fs
112   0000              	EXTERN ___slong2fs_callee
113   0000              	EXTERN ___slonglong2fs
114   0000              	EXTERN ___slonglong2fs_callee
115   0000              	EXTERN ___uchar2fs
116   0000              	EXTERN ___uchar2fs_callee
117   0000              	EXTERN ___uint2fs
118   0000              	EXTERN ___uint2fs_callee
119   0000              	EXTERN ___ulong2fs
120   0000              	EXTERN ___ulong2fs_callee
121   0000              	EXTERN ___ulonglong2fs
122   0000              	EXTERN ___ulonglong2fs_callee
123   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
126   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
127   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
128   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
129   0000              	EXTERN ____sdcc_4_ldi_save_bc
130   0000              	EXTERN ____sdcc_4_push_hlix
131   0000              	EXTERN ____sdcc_4_push_mhl
132   0000              	EXTERN ____sdcc_lib_setmem_hl
133   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
134   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
135   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
136   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
137   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
138   0000              	EXTERN ____sdcc_ll_add_deix_hlix
139   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
140   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
141   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
142   0000              	EXTERN ____sdcc_ll_asr_hlix_a
143   0000              	EXTERN ____sdcc_ll_asr_mbc_a
144   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
145   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
146   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
147   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
148   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
149   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
150   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
151   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
152   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
153   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
155   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
156   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
157   0000              	EXTERN ____sdcc_ll_push_hlix
158   0000              	EXTERN ____sdcc_ll_push_mhl
159   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
160   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
161   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
162   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
163   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
164   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
165   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
166   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
167   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
168   0000              	EXTERN ____sdcc_load_debc_deix
169   0000              	EXTERN ____sdcc_load_dehl_deix
170   0000              	EXTERN ____sdcc_load_debc_mhl
171   0000              	EXTERN ____sdcc_load_hlde_mhl
172   0000              	EXTERN ____sdcc_store_dehl_bcix
173   0000              	EXTERN ____sdcc_store_debc_hlix
174   0000              	EXTERN ____sdcc_store_debc_mhl
175   0000              	EXTERN ____sdcc_cpu_pop_ei
176   0000              	EXTERN ____sdcc_cpu_pop_ei_jp
177   0000              	EXTERN ____sdcc_cpu_push_di
178   0000              	EXTERN ____sdcc_outi
179   0000              	EXTERN ____sdcc_outi_128
180   0000              	EXTERN ____sdcc_outi_256
181   0000              	EXTERN ____sdcc_ldi
182   0000              	EXTERN ____sdcc_ldi_128
183   0000              	EXTERN ____sdcc_ldi_256
184   0000              
185   0000              ;--------------------------------------------------------
186   0000              ; Public variables in this module
187   0000              ;--------------------------------------------------------
188   0000              	GLOBAL _player_check_map
189   0000              	GLOBAL _player_fix_walk_lin
190   0000              	GLOBAL _player_init
191   0000              	GLOBAL _player_check_input
192   0000              	GLOBAL _player_collision
193   0000              	GLOBAL _player_kill
194   0000              	GLOBAL _player_turn
195   0000              	GLOBAL _player_move
196   0000              	GLOBAL _player_check_stairs_down
197   0000              	GLOBAL _player_check_stairs
198   0000              	GLOBAL _player_tile
199   0000              	GLOBAL _player_move_input
200   0000              	GLOBAL _player_fire
201   0000              	GLOBAL _player_pick_item
202   0000              	GLOBAL _player_hit_platform
203   0000              	GLOBAL _player_hit_platform_clear
204   0000              	GLOBAL _player_score_add
205   0000              	GLOBAL _player_check_floor
206   0000              	GLOBAL _player_gasta_brick
207   0000              	GLOBAL _player_move_jump
208   0000              	GLOBAL _player_open_door
209   0000              	GLOBAL _player_lost_life
210   0000              	GLOBAL _player_hit
211   0000              ;--------------------------------------------------------
212   0000              ; Externals used
213   0000              ;--------------------------------------------------------
214   0000              	GLOBAL _ulltoa_callee
215   0000              	GLOBAL _ulltoa
216   0000              	GLOBAL _strtoull_callee
217   0000              	GLOBAL _strtoull
218   0000              	GLOBAL _strtoll_callee
219   0000              	GLOBAL _strtoll
220   0000              	GLOBAL _lltoa_callee
221   0000              	GLOBAL _lltoa
222   0000              	GLOBAL _llabs_callee
223   0000              	GLOBAL _llabs
224   0000              	GLOBAL __lldivu__callee
225   0000              	GLOBAL __lldivu_
226   0000              	GLOBAL __lldiv__callee
227   0000              	GLOBAL __lldiv_
228   0000              	GLOBAL _atoll_callee
229   0000              	GLOBAL _atoll
230   0000              	GLOBAL _realloc_unlocked_callee
231   0000              	GLOBAL _realloc_unlocked
232   0000              	GLOBAL _malloc_unlocked_fastcall
233   0000              	GLOBAL _malloc_unlocked
234   0000              	GLOBAL _free_unlocked_fastcall
235   0000              	GLOBAL _free_unlocked
236   0000              	GLOBAL _calloc_unlocked_callee
237   0000              	GLOBAL _calloc_unlocked
238   0000              	GLOBAL _aligned_alloc_unlocked_callee
239   0000              	GLOBAL _aligned_alloc_unlocked
240   0000              	GLOBAL _realloc_callee
241   0000              	GLOBAL _realloc
242   0000              	GLOBAL _malloc_fastcall
243   0000              	GLOBAL _malloc
244   0000              	GLOBAL _free_fastcall
245   0000              	GLOBAL _free
246   0000              	GLOBAL _calloc_callee
247   0000              	GLOBAL _calloc
248   0000              	GLOBAL _aligned_alloc_callee
249   0000              	GLOBAL _aligned_alloc
250   0000              	GLOBAL _utoa_callee
251   0000              	GLOBAL _utoa
252   0000              	GLOBAL _ultoa_callee
253   0000              	GLOBAL _ultoa
254   0000              	GLOBAL _system_fastcall
255   0000              	GLOBAL _system
256   0000              	GLOBAL _strtoul_callee
257   0000              	GLOBAL _strtoul
258   0000              	GLOBAL _strtol_callee
259   0000              	GLOBAL _strtol
260   0000              	GLOBAL _strtof_callee
261   0000              	GLOBAL _strtof
262   0000              	GLOBAL _strtod_callee
263   0000              	GLOBAL _strtod
264   0000              	GLOBAL _srand_fastcall
265   0000              	GLOBAL _srand
266   0000              	GLOBAL _rand
267   0000              	GLOBAL _quick_exit_fastcall
268   0000              	GLOBAL _quick_exit
269   0000              	GLOBAL _qsort_callee
270   0000              	GLOBAL _qsort
271   0000              	GLOBAL _ltoa_callee
272   0000              	GLOBAL _ltoa
273   0000              	GLOBAL _labs_fastcall
274   0000              	GLOBAL _labs
275   0000              	GLOBAL _itoa_callee
276   0000              	GLOBAL _itoa
277   0000              	GLOBAL _ftoh_callee
278   0000              	GLOBAL _ftoh
279   0000              	GLOBAL _ftog_callee
280   0000              	GLOBAL _ftog
281   0000              	GLOBAL _ftoe_callee
282   0000              	GLOBAL _ftoe
283   0000              	GLOBAL _ftoa_callee
284   0000              	GLOBAL _ftoa
285   0000              	GLOBAL _exit_fastcall
286   0000              	GLOBAL _exit
287   0000              	GLOBAL _dtoh_callee
288   0000              	GLOBAL _dtoh
289   0000              	GLOBAL _dtog_callee
290   0000              	GLOBAL _dtog
291   0000              	GLOBAL _dtoe_callee
292   0000              	GLOBAL _dtoe
293   0000              	GLOBAL _dtoa_callee
294   0000              	GLOBAL _dtoa
295   0000              	GLOBAL _bsearch_callee
296   0000              	GLOBAL _bsearch
297   0000              	GLOBAL _atol_fastcall
298   0000              	GLOBAL _atol
299   0000              	GLOBAL _atoi_fastcall
300   0000              	GLOBAL _atoi
301   0000              	GLOBAL _atof_fastcall
302   0000              	GLOBAL _atof
303   0000              	GLOBAL _atexit_fastcall
304   0000              	GLOBAL _atexit
305   0000              	GLOBAL _at_quick_exit_fastcall
306   0000              	GLOBAL _at_quick_exit
307   0000              	GLOBAL _abs_fastcall
308   0000              	GLOBAL _abs
309   0000              	GLOBAL _abort
310   0000              	GLOBAL __strtou__callee
311   0000              	GLOBAL __strtou_
312   0000              	GLOBAL __strtoi__callee
313   0000              	GLOBAL __strtoi_
314   0000              	GLOBAL __random_uniform_xor_8__fastcall
315   0000              	GLOBAL __random_uniform_xor_8_
316   0000              	GLOBAL __random_uniform_xor_32__fastcall
317   0000              	GLOBAL __random_uniform_xor_32_
318   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
319   0000              	GLOBAL __random_uniform_cmwc_8_
320   0000              	GLOBAL __shellsort__callee
321   0000              	GLOBAL __shellsort_
322   0000              	GLOBAL __quicksort__callee
323   0000              	GLOBAL __quicksort_
324   0000              	GLOBAL __insertion_sort__callee
325   0000              	GLOBAL __insertion_sort_
326   0000              	GLOBAL __ldivu__callee
327   0000              	GLOBAL __ldivu_
328   0000              	GLOBAL __ldiv__callee
329   0000              	GLOBAL __ldiv_
330   0000              	GLOBAL __divu__callee
331   0000              	GLOBAL __divu_
332   0000              	GLOBAL __div__callee
333   0000              	GLOBAL __div_
334   0000              	GLOBAL _NIRVANAP_drawTW_raw_callee
335   0000              	GLOBAL _NIRVANAP_drawTW_raw
336   0000              	GLOBAL _NIRVANAP_drawTW_callee
337   0000              	GLOBAL _NIRVANAP_drawTW
338   0000              	GLOBAL _NIRVANAP_drawW_raw_callee
339   0000              	GLOBAL _NIRVANAP_drawW_raw
340   0000              	GLOBAL _NIRVANAP_drawW_callee
341   0000              	GLOBAL _NIRVANAP_drawW
342   0000              	GLOBAL _NIRVANAP_spriteT_callee
343   0000              	GLOBAL _NIRVANAP_spriteT
344   0000              	GLOBAL _NIRVANAP_fillC_callee
345   0000              	GLOBAL _NIRVANAP_fillC
346   0000              	GLOBAL _NIRVANAP_readC_callee
347   0000              	GLOBAL _NIRVANAP_readC
348   0000              	GLOBAL _NIRVANAP_paintC_callee
349   0000              	GLOBAL _NIRVANAP_paintC
350   0000              	GLOBAL _NIRVANAP_printC_callee
351   0000              	GLOBAL _NIRVANAP_printC
352   0000              	GLOBAL _NIRVANAP_fillT_raw_callee
353   0000              	GLOBAL _NIRVANAP_fillT_raw
354   0000              	GLOBAL _NIRVANAP_fillT_callee
355   0000              	GLOBAL _NIRVANAP_fillT
356   0000              	GLOBAL _NIRVANAP_drawT_raw_callee
357   0000              	GLOBAL _NIRVANAP_drawT_raw
358   0000              	GLOBAL _NIRVANAP_drawT_callee
359   0000              	GLOBAL _NIRVANAP_drawT
360   0000              	GLOBAL _NIRVANAP_stop
361   0000              	GLOBAL _NIRVANAP_start
362   0000              	GLOBAL _debug3
363   0000              	GLOBAL _debug2
364   0000              	GLOBAL _debug
365   0000              	GLOBAL _zx_print_str
366   0000              	GLOBAL _zx_print_int
367   0000              	GLOBAL _zx_print_chr
368   0000              	GLOBAL _zx_print_bonus_time
369   0000              	GLOBAL _zx_isr
370   0000              	GLOBAL _z80_otdr_callee
371   0000              	GLOBAL _z80_otdr
372   0000              	GLOBAL _z80_otir_callee
373   0000              	GLOBAL _z80_otir
374   0000              	GLOBAL _z80_outp_callee
375   0000              	GLOBAL _z80_outp
376   0000              	GLOBAL _z80_indr_callee
377   0000              	GLOBAL _z80_indr
378   0000              	GLOBAL _z80_inir_callee
379   0000              	GLOBAL _z80_inir
380   0000              	GLOBAL _z80_inp_fastcall
381   0000              	GLOBAL _z80_inp
382   0000              	GLOBAL _z80_set_int_state_fastcall
383   0000              	GLOBAL _z80_set_int_state
384   0000              	GLOBAL _z80_get_int_state
385   0000              	GLOBAL _z80_delay_tstate_fastcall
386   0000              	GLOBAL _z80_delay_tstate
387   0000              	GLOBAL _z80_delay_ms_fastcall
388   0000              	GLOBAL _z80_delay_ms
389   0000              	GLOBAL _im2_remove_generic_callback_callee
390   0000              	GLOBAL _im2_remove_generic_callback
391   0000              	GLOBAL _im2_prepend_generic_callback_callee
392   0000              	GLOBAL _im2_prepend_generic_callback
393   0000              	GLOBAL _im2_append_generic_callback_callee
394   0000              	GLOBAL _im2_append_generic_callback
395   0000              	GLOBAL _im2_create_generic_isr_8080_callee
396   0000              	GLOBAL _im2_create_generic_isr_8080
397   0000              	GLOBAL _im2_create_generic_isr_callee
398   0000              	GLOBAL _im2_create_generic_isr
399   0000              	GLOBAL _im2_install_isr_callee
400   0000              	GLOBAL _im2_install_isr
401   0000              	GLOBAL _im2_init_fastcall
402   0000              	GLOBAL _im2_init
403   0000              	GLOBAL _intrinsic_swap_word_32_fastcall
404   0000              	GLOBAL _intrinsic_swap_word_32
405   0000              	GLOBAL _intrinsic_swap_endian_32_fastcall
406   0000              	GLOBAL _intrinsic_swap_endian_32
407   0000              	GLOBAL _intrinsic_swap_endian_16_fastcall
408   0000              	GLOBAL _intrinsic_swap_endian_16
409   0000              	GLOBAL _intrinsic_return_de
410   0000              	GLOBAL _intrinsic_return_bc
411   0000              	GLOBAL _intrinsic_exx
412   0000              	GLOBAL _intrinsic_ex_de_hl
413   0000              	GLOBAL _intrinsic_nop
414   0000              	GLOBAL _intrinsic_im_2
415   0000              	GLOBAL _intrinsic_im_1
416   0000              	GLOBAL _intrinsic_im_0
417   0000              	GLOBAL _intrinsic_retn
418   0000              	GLOBAL _intrinsic_reti
419   0000              	GLOBAL _intrinsic_halt
420   0000              	GLOBAL _intrinsic_ei
421   0000              	GLOBAL _intrinsic_di
422   0000              	GLOBAL _intrinsic_stub
423   0000              	GLOBAL _intrinsic_outi
424   0000              	GLOBAL _intrinsic_ldi
425   0000              	GLOBAL _zx_pattern_fill_callee
426   0000              	GLOBAL _zx_pattern_fill
427   0000              	GLOBAL _zx_saddrpup_fastcall
428   0000              	GLOBAL _zx_saddrpup
429   0000              	GLOBAL _zx_saddrpright_callee
430   0000              	GLOBAL _zx_saddrpright
431   0000              	GLOBAL _zx_saddrpleft_callee
432   0000              	GLOBAL _zx_saddrpleft
433   0000              	GLOBAL _zx_saddrpdown_fastcall
434   0000              	GLOBAL _zx_saddrpdown
435   0000              	GLOBAL _zx_saddrcup_fastcall
436   0000              	GLOBAL _zx_saddrcup
437   0000              	GLOBAL _zx_saddrcright_fastcall
438   0000              	GLOBAL _zx_saddrcright
439   0000              	GLOBAL _zx_saddrcleft_fastcall
440   0000              	GLOBAL _zx_saddrcleft
441   0000              	GLOBAL _zx_saddrcdown_fastcall
442   0000              	GLOBAL _zx_saddrcdown
443   0000              	GLOBAL _zx_saddr2py_fastcall
444   0000              	GLOBAL _zx_saddr2py
445   0000              	GLOBAL _zx_saddr2px_fastcall
446   0000              	GLOBAL _zx_saddr2px
447   0000              	GLOBAL _zx_saddr2cy_fastcall
448   0000              	GLOBAL _zx_saddr2cy
449   0000              	GLOBAL _zx_saddr2cx_fastcall
450   0000              	GLOBAL _zx_saddr2cx
451   0000              	GLOBAL _zx_saddr2aaddr_fastcall
452   0000              	GLOBAL _zx_saddr2aaddr
453   0000              	GLOBAL _zx_py2saddr_fastcall
454   0000              	GLOBAL _zx_py2saddr
455   0000              	GLOBAL _zx_py2aaddr_fastcall
456   0000              	GLOBAL _zx_py2aaddr
457   0000              	GLOBAL _zx_pxy2saddr_callee
458   0000              	GLOBAL _zx_pxy2saddr
459   0000              	GLOBAL _zx_pxy2aaddr_callee
460   0000              	GLOBAL _zx_pxy2aaddr
461   0000              	GLOBAL _zx_px2bitmask_fastcall
462   0000              	GLOBAL _zx_px2bitmask
463   0000              	GLOBAL _zx_cy2saddr_fastcall
464   0000              	GLOBAL _zx_cy2saddr
465   0000              	GLOBAL _zx_cy2aaddr_fastcall
466   0000              	GLOBAL _zx_cy2aaddr
467   0000              	GLOBAL _zx_cxy2saddr_callee
468   0000              	GLOBAL _zx_cxy2saddr
469   0000              	GLOBAL _zx_cxy2aaddr_callee
470   0000              	GLOBAL _zx_cxy2aaddr
471   0000              	GLOBAL _zx_bitmask2px_fastcall
472   0000              	GLOBAL _zx_bitmask2px
473   0000              	GLOBAL _zx_aaddrcup_fastcall
474   0000              	GLOBAL _zx_aaddrcup
475   0000              	GLOBAL _zx_aaddrcright_fastcall
476   0000              	GLOBAL _zx_aaddrcright
477   0000              	GLOBAL _zx_aaddrcleft_fastcall
478   0000              	GLOBAL _zx_aaddrcleft
479   0000              	GLOBAL _zx_aaddrcdown_fastcall
480   0000              	GLOBAL _zx_aaddrcdown
481   0000              	GLOBAL _zx_aaddr2saddr_fastcall
482   0000              	GLOBAL _zx_aaddr2saddr
483   0000              	GLOBAL _zx_aaddr2py_fastcall
484   0000              	GLOBAL _zx_aaddr2py
485   0000              	GLOBAL _zx_aaddr2px_fastcall
486   0000              	GLOBAL _zx_aaddr2px
487   0000              	GLOBAL _zx_aaddr2cy_fastcall
488   0000              	GLOBAL _zx_aaddr2cy
489   0000              	GLOBAL _zx_aaddr2cx_fastcall
490   0000              	GLOBAL _zx_aaddr2cx
491   0000              	GLOBAL _zx_visit_wc_pix_callee
492   0000              	GLOBAL _zx_visit_wc_pix
493   0000              	GLOBAL _zx_visit_wc_attr_callee
494   0000              	GLOBAL _zx_visit_wc_attr
495   0000              	GLOBAL _zx_scroll_wc_up_pix_callee
496   0000              	GLOBAL _zx_scroll_wc_up_pix
497   0000              	GLOBAL _zx_scroll_wc_up_attr_callee
498   0000              	GLOBAL _zx_scroll_wc_up_attr
499   0000              	GLOBAL _zx_scroll_wc_up_callee
500   0000              	GLOBAL _zx_scroll_wc_up
501   0000              	GLOBAL _zx_scroll_up_pix_callee
502   0000              	GLOBAL _zx_scroll_up_pix
503   0000              	GLOBAL _zx_scroll_up_attr_callee
504   0000              	GLOBAL _zx_scroll_up_attr
505   0000              	GLOBAL _zx_scroll_up_callee
506   0000              	GLOBAL _zx_scroll_up
507   0000              	GLOBAL _zx_cls_wc_pix_callee
508   0000              	GLOBAL _zx_cls_wc_pix
509   0000              	GLOBAL _zx_cls_wc_attr_callee
510   0000              	GLOBAL _zx_cls_wc_attr
511   0000              	GLOBAL _zx_cls_wc_callee
512   0000              	GLOBAL _zx_cls_wc
513   0000              	GLOBAL _zx_cls_pix_fastcall
514   0000              	GLOBAL _zx_cls_pix
515   0000              	GLOBAL _zx_cls_attr_fastcall
516   0000              	GLOBAL _zx_cls_attr
517   0000              	GLOBAL _zx_cls_fastcall
518   0000              	GLOBAL _zx_cls
519   0000              	GLOBAL _zx_border_fastcall
520   0000              	GLOBAL _zx_border
521   0000              	GLOBAL _spr_btile_paint_back
522   0000              	GLOBAL _spr_explode_bullet
523   0000              	GLOBAL _spr_init_anim_bullets
524   0000              	GLOBAL _spr_turn_horizontal
525   0000              	GLOBAL _spr_play_bullets
526   0000              	GLOBAL _spr_play_anim
527   0000              	GLOBAL _spr_add_anim
528   0000              	GLOBAL _spr_page_map
529   0000              	GLOBAL _spr_page_down
530   0000              	GLOBAL _spr_page_up
531   0000              	GLOBAL _spr_page_right
532   0000              	GLOBAL _spr_page_left
533   0000              	GLOBAL _spr_tile_paint
534   0000              	GLOBAL _spr_calc_hor
535   0000              	GLOBAL _spr_draw_row
536   0000              	GLOBAL _spr_draw_index
537   0000              	GLOBAL _spr_brick_anim
538   0000              	GLOBAL _spr_back_repaint
539   0000              	GLOBAL _spr_tile
540   0000              	GLOBAL _spr_destroy
541   0000              	GLOBAL _spr_tile_dir
542   0000              	GLOBAL _spr_redraw
543   0000              	GLOBAL _spr_move_left
544   0000              	GLOBAL _spr_move_right
545   0000              	GLOBAL _spr_move_horizontal
546   0000              	GLOBAL _spr_move_down
547   0000              	GLOBAL _spr_move_up
548   0000              	GLOBAL _spr_calc_index
549   0000              	GLOBAL _spr_chktime
550   0000              	GLOBAL _sound_hit_brick
551   0000              	GLOBAL _sound_hit_enemy
552   0000              	GLOBAL _sound_kill
553   0000              	GLOBAL _sound_enter_enemy
554   0000              	GLOBAL _sound_coin
555   0000              	GLOBAL _sound_jump
556   0000              	GLOBAL _sound_slide
557   0000              	GLOBAL _player_player_hit_pow
558   0000              	GLOBAL _game_attribs
559   0000              	GLOBAL _game_boss_clear
560   0000              	GLOBAL _game_obj_clear
561   0000              	GLOBAL _game_obj_chk
562   0000              	GLOBAL _game_obj_set
563   0000              	GLOBAL _game_shoot_fire_boss
564   0000              	GLOBAL _game_shoot_fire
565   0000              	GLOBAL _game_add_enemy
566   0000              	GLOBAL _game_joystick_set_menu
567   0000              	GLOBAL _game_joystick_set
568   0000              	GLOBAL _game_joystick_change
569   0000              	GLOBAL _game_print_header
570   0000              	GLOBAL _game_end
571   0000              	GLOBAL _game_phase_print_score_back
572   0000              	GLOBAL _game_check_time
573   0000              	GLOBAL _game_rotate_attrib
574   0000              	GLOBAL _game_colour_message
575   0000              	GLOBAL _game_paint_attrib_lin_h
576   0000              	GLOBAL _game_paint_attrib_lin
577   0000              	GLOBAL _game_paint_attrib
578   0000              	GLOBAL _game_print_score
579   0000              	GLOBAL _game_unfreeze_all
580   0000              	GLOBAL _game_freeze_all
581   0000              	GLOBAL _game_freeze
582   0000              	GLOBAL _game_enemy_add_get_index
583   0000              	GLOBAL _game_check_cell
584   0000              	GLOBAL _game_check_map
585   0000              	GLOBAL _game_loop
586   0000              	GLOBAL _game_round_init
587   0000              	GLOBAL _game_start_timer
588   0000              	GLOBAL _game_tick
589   0000              	GLOBAL _game_update_stats
590   0000              	GLOBAL _game_print_footer
591   0000              	GLOBAL _game_fill_row
592   0000              	GLOBAL _game_fps
593   0000              	GLOBAL _game_respawn
594   0000              	GLOBAL _game_draw_screen
595   0000              	GLOBAL _boss_turn
596   0000              	GLOBAL _enemy_avoid_dead
597   0000              	GLOBAL _enemy_avoid_fall
598   0000              	GLOBAL _enemy_respawn
599   0000              	GLOBAL _enemy_init
600   0000              	GLOBAL _enemy_move
601   0000              	GLOBAL _enemy_turn
602   0000              	GLOBAL _enemy_hit
603   0000              	GLOBAL _enemy_coin1
604   0000              	GLOBAL _enemy_static
605   0000              	GLOBAL _enemy_walk
606   0000              	GLOBAL _enemy_horizontal
607   0000              	GLOBAL _enemy_vertical
608   0000              	GLOBAL _ay_fx_play
609   0000              	GLOBAL _ay_midi_play
610   0000              	GLOBAL _ay_is_playing
611   0000              	GLOBAL _ay_reset
612   0000              	GLOBAL _test_func
613   0000              	GLOBAL _test_proc
614   0000              	GLOBAL _in_mouse_kempston_wheel_delta
615   0000              	GLOBAL _in_mouse_kempston_wheel
616   0000              	GLOBAL _in_mouse_kempston_callee
617   0000              	GLOBAL _in_mouse_kempston
618   0000              	GLOBAL _in_mouse_kempston_setpos_callee
619   0000              	GLOBAL _in_mouse_kempston_setpos
620   0000              	GLOBAL _in_mouse_kempston_reset
621   0000              	GLOBAL _in_mouse_kempston_init
622   0000              	GLOBAL _in_mouse_amx_wheel_delta
623   0000              	GLOBAL _in_mouse_amx_wheel
624   0000              	GLOBAL _in_mouse_amx_callee
625   0000              	GLOBAL _in_mouse_amx
626   0000              	GLOBAL _in_mouse_amx_setpos_callee
627   0000              	GLOBAL _in_mouse_amx_setpos
628   0000              	GLOBAL _in_mouse_amx_reset
629   0000              	GLOBAL _in_mouse_amx_init_callee
630   0000              	GLOBAL _in_mouse_amx_init
631   0000              	GLOBAL _in_stick_sinclair2
632   0000              	GLOBAL _in_stick_sinclair1
633   0000              	GLOBAL _in_stick_kempston
634   0000              	GLOBAL _in_stick_fuller
635   0000              	GLOBAL _in_stick_cursor
636   0000              	GLOBAL _in_stick_keyboard_fastcall
637   0000              	GLOBAL _in_stick_keyboard
638   0000              	GLOBAL _in_wait_nokey
639   0000              	GLOBAL _in_wait_key
640   0000              	GLOBAL _in_test_key
641   0000              	GLOBAL _in_pause_fastcall
642   0000              	GLOBAL _in_pause
643   0000              	GLOBAL _in_key_scancode_fastcall
644   0000              	GLOBAL _in_key_scancode
645   0000              	GLOBAL _in_key_pressed_fastcall
646   0000              	GLOBAL _in_key_pressed
647   0000              	GLOBAL _in_inkey
648   0000              	GLOBAL _NIRVANAP_CHAR_TABLE
649   0000              	GLOBAL _NIRVANAP_WIDE_IMAGES
650   0000              	GLOBAL _NIRVANAP_TILE_IMAGES
651   0000              	GLOBAL _NIRVANAP_HOLE
652   0000              	GLOBAL _NIRVANAP_ISR_HOOK
653   0000              	GLOBAL _player_lvl_table
654   0000              	GLOBAL _map_paper_last
655   0000              	GLOBAL _map_paper_clr
656   0000              	GLOBAL _map_paper
657   0000              	GLOBAL _draw_count
658   0000              	GLOBAL _g_player_hit_right
659   0000              	GLOBAL _g_player_hit_left
660   0000              	GLOBAL _joynames
661   0000              	GLOBAL _initials
662   0000              	GLOBAL _bullet_count
663   0000              	GLOBAL _spr_hack
664   0000              	GLOBAL _boss_stat
665   0000              	GLOBAL _boss_time_fire
666   0000              	GLOBAL _boss_time
667   0000              	GLOBAL _boss_tile
668   0000              	GLOBAL _boss_inc
669   0000              	GLOBAL _boss_col
670   0000              	GLOBAL _boss_lin
671   0000              	GLOBAL _bullet_vel
672   0000              	GLOBAL _bullet_frames
673   0000              	GLOBAL _bullet_colint
674   0000              	GLOBAL _bullet_dir
675   0000              	GLOBAL _bullet_tile
676   0000              	GLOBAL _bullet_col
677   0000              	GLOBAL _bullet_lin
678   0000              	GLOBAL _bullet_col0
679   0000              	GLOBAL _bullet_lin0
680   0000              	GLOBAL _bullet_max
681   0000              	GLOBAL _bullet_class
682   0000              	GLOBAL _mush_class
683   0000              	GLOBAL _mush_index
684   0000              	GLOBAL _anim_count
685   0000              	GLOBAL _anim_respanwn
686   0000              	GLOBAL _anim_loop
687   0000              	GLOBAL _anim_end
688   0000              	GLOBAL _anim_int
689   0000              	GLOBAL _anim_tile
690   0000              	GLOBAL _anim_col
691   0000              	GLOBAL _anim_lin
692   0000              	GLOBAL _map_heigth
693   0000              	GLOBAL _map_width
694   0000              	GLOBAL _scr_curr
695   0000              	GLOBAL _scr_obj1
696   0000              	GLOBAL _scr_obj0
697   0000              	GLOBAL _scr_map
698   0000              	GLOBAL _sprite_speed_alt
699   0000              	GLOBAL _sprite_frames
700   0000              	GLOBAL _sprite_speed
701   0000              	GLOBAL _screen_ink
702   0000              	GLOBAL _screen_paper
703   0000              	GLOBAL _player_over_stair
704   0000              	GLOBAL _game_start_scr
705   0000              	GLOBAL _game_respawn_tile
706   0000              	GLOBAL _game_respawn_index
707   0000              	GLOBAL _game_respawn_time
708   0000              	GLOBAL _game_menu_sel
709   0000              	GLOBAL _game_score_top
710   0000              	GLOBAL _player_lives
711   0000              	GLOBAL _game_over
712   0000              	GLOBAL _game_sound
713   0000              	GLOBAL _game_inmune
714   0000              	GLOBAL _game_god_mode
715   0000              	GLOBAL _game_two_player
716   0000              	GLOBAL _game_brick_tile
717   0000              	GLOBAL _sprite_curr_index
718   0000              	GLOBAL _spr_count
719   0000              	GLOBAL _bullet_time
720   0000              	GLOBAL _anim_time
721   0000              	GLOBAL _frame_time
722   0000              	GLOBAL _entry_time
723   0000              	GLOBAL _curr_time
724   0000              	GLOBAL _s_state
725   0000              	GLOBAL _attrib_hl
726   0000              	GLOBAL _attrib
727   0000              	GLOBAL _zx_val_asm
728   0000              	GLOBAL _enemies
729   0000              	GLOBAL _tmp_ui
730   0000              	GLOBAL _tmp_sc
731   0000              	GLOBAL _tmp_uc
732   0000              	GLOBAL _tmp1
733   0000              	GLOBAL _tmp0
734   0000              	GLOBAL _tmp
735   0000              	GLOBAL _index1
736   0000              	GLOBAL _index0
737   0000              	GLOBAL _loop_count
738   0000              	GLOBAL _s_col1
739   0000              	GLOBAL _s_col0
740   0000              	GLOBAL _s_lin1
741   0000              	GLOBAL _s_lin0
742   0000              	GLOBAL _s_tile1
743   0000              	GLOBAL _s_tile0
744   0000              	GLOBAL _player_brick_time
745   0000              	GLOBAL _player_hit_count
746   0000              	GLOBAL _sprite_horizontal_check
747   0000              	GLOBAL _sprite_on_air
748   0000              	GLOBAL _sprite
749   0000              	GLOBAL _fps
750   0000              	GLOBAL _game_respawn_curr_time
751   0000              	GLOBAL _game_worldup
752   0000              	GLOBAL _game_mush_count
753   0000              	GLOBAL _game_boss_fix
754   0000              	GLOBAL _game_boss_hit
755   0000              	GLOBAL _game_boss_alive
756   0000              	GLOBAL _game_boss
757   0000              	GLOBAL _game_world
758   0000              	GLOBAL _game_gravity
759   0000              	GLOBAL _player_anim_stair
760   0000              	GLOBAL _player_hit_time
761   0000              	GLOBAL _player_lin_scr
762   0000              	GLOBAL _player_col_scr
763   0000              	GLOBAL _player_lvl
764   0000              	GLOBAL _player_int
765   0000              	GLOBAL _player_str
766   0000              	GLOBAL _player_max_vita
767   0000              	GLOBAL _player_max_mana
768   0000              	GLOBAL _player_vita
769   0000              	GLOBAL _player_mana
770   0000              	GLOBAL _player_keys
771   0000              	GLOBAL _player_vel_inc
772   0000              	GLOBAL _player_vel_y1
773   0000              	GLOBAL _player_vel_y0
774   0000              	GLOBAL _player_vel_y
775   0000              	GLOBAL _player_vel_x
776   0000              	GLOBAL _player_joy
777   0000              	GLOBAL _player_score
778   0000              	GLOBAL _last_time
779   0000              	GLOBAL _player_slide
780   0000              	GLOBAL _spr_timer
781   0000              	GLOBAL _jump_lin
782   0000              	GLOBAL _player_hit_col
783   0000              	GLOBAL _player_hit_lin
784   0000              	GLOBAL _colint
785   0000              	GLOBAL _col
786   0000              	GLOBAL _lin
787   0000              	GLOBAL _tile
788   0000              	GLOBAL _state_a
789   0000              	GLOBAL _state
790   0000              	GLOBAL _class
791   0000              	GLOBAL _tbuffer
792   0000              	GLOBAL _dirs
793   0000              	GLOBAL _k1
794   0000              	GLOBAL _joyfunc1
795   0000              	GLOBAL _btiles
796   0000              	GLOBAL _spec128
797   0000              	GLOBAL _GLOBAL_ZX_PORT_7FFD
798   0000              	GLOBAL _GLOBAL_ZX_PORT_1FFD
799   0000              	GLOBAL _GLOBAL_ZX_PORT_FE
800   0000              	GLOBAL _ay_effect_20
801   0000              	GLOBAL _ay_effect_19
802   0000              	GLOBAL _ay_effect_18
803   0000              	GLOBAL _ay_effect_17
804   0000              	GLOBAL _ay_effect_16
805   0000              	GLOBAL _ay_effect_15
806   0000              	GLOBAL _ay_effect_14
807   0000              	GLOBAL _ay_effect_13
808   0000              	GLOBAL _ay_effect_12
809   0000              	GLOBAL _ay_effect_11
810   0000              	GLOBAL _ay_effect_10
811   0000              	GLOBAL _ay_effect_09
812   0000              	GLOBAL _ay_effect_08
813   0000              	GLOBAL _ay_effect_07
814   0000              	GLOBAL _ay_effect_06
815   0000              	GLOBAL _ay_effect_05
816   0000              	GLOBAL _ay_effect_04
817   0000              	GLOBAL _ay_effect_03
818   0000              	GLOBAL _ay_effect_02
819   0000              	GLOBAL _ay_effect_01
820   0000              	GLOBAL _pb_midi_phase_1
821   0000              	GLOBAL _pb_midi_title
822   0000              	GLOBAL _control_method
823   0000              	GLOBAL _world1_h
824   0000              	GLOBAL _world1_w
825   0000              	GLOBAL _world1
826   0000              	GLOBAL _paper1
827   0000              	GLOBAL _lenght1
828   0000              	GLOBAL _start_scr1
829   0000              	GLOBAL _world0_h
830   0000              	GLOBAL _world0_w
831   0000              	GLOBAL _world0
832   0000              	GLOBAL _paper0
833   0000              	GLOBAL _lenght0
834   0000              	GLOBAL _start_scr0
835   0000              ;--------------------------------------------------------
836   0000              ; special function registers
837   0000              ;--------------------------------------------------------
838   0000              defc _IO_FE	=	0x00fe
839   0000              defc _IO_1FFD	=	0x1ffd
840   0000              defc _IO_7FFD	=	0x7ffd
841   0000              ;--------------------------------------------------------
842   0000              ; ram data
843   0000              ;--------------------------------------------------------
844   0000              	SECTION bss_compiler
845   0000              ;--------------------------------------------------------
846   0000              ; ram data
847   0000              ;--------------------------------------------------------
848   0000              
849   0000              IF 0
850   0000              
851   0000              ; .area _INITIALIZED removed by z88dk
852   0000              
853   0000              
854   0000              ENDIF
855   0000              
856   0000              ;--------------------------------------------------------
857   0000              ; absolute external ram data
858   0000              ;--------------------------------------------------------
859   0000              	SECTION IGNORE
860   0000              ;--------------------------------------------------------
861   0000              ; global & static initialisations
862   0000              ;--------------------------------------------------------
863   0000              	SECTION code_crt_init
864   0000              ;--------------------------------------------------------
865   0000              ; Home
866   0000              ;--------------------------------------------------------
867   0000              	SECTION IGNORE
868   0000              ;--------------------------------------------------------
869   0000              ; code
870   0000              ;--------------------------------------------------------
871   0000              	SECTION code_compiler
872   0000              ;	---------------------------------
873   0000              ; Function player_init
874   0000              ; ---------------------------------
875   0000              _player_init:
876   0000  CD 00 00    	call	___sdcc_enter_ix
877   0003  21 07 00    	ld	hl, +(_class + 0x0007)
878   0006  36 00       	ld	(hl),0x00
879   0008  21 07 00    	ld	hl, +(_tile + 0x0007)
880   000B  DD 7E 06    	ld	a,(ix+6)
881   000E  77          	ld	(hl), a
882   000F  21 07 00    	ld	hl, +(_lin + 0x0007)
883   0012  DD 7E 04    	ld	a,(ix+4)
884   0015  77          	ld	(hl), a
885   0016  21 07 00    	ld	hl, +(_col + 0x0007)
886   0019  DD 7E 05    	ld	a,(ix+5)
887   001C  77          	ld	(hl), a
888   001D  21 07 00    	ld	hl, +(_colint + 0x0007)
889   0020  36 00       	ld	(hl),0x00
890   0022  21 07 00    	ld	hl, +(_state + 0x0007)
891   0025  36 00       	ld	(hl),0x00
892   0027  01 07 00    	ld	bc,_state_a+7
893   002A  AF          	xor	a, a
894   002B  02          	ld	(bc), a
895   002C  21 07 00    	ld	hl, +(_jump_lin + 0x0007)
896   002F  DD 7E 04    	ld	a,(ix+4)
897   0032  77          	ld	(hl), a
898   0033  ED 5B 00 00 	ld	de,(_curr_time)
899   0037  ED 53 0E 00 	ld	(_last_time + 0x000e),de
900   003B  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
901   003E  36 00       	ld	(hl),0x00
902   0040  0A          	ld	a, (bc)
903   0041  F6 11       	or	a,+(0x01|0x10)
904   0043  02          	ld	(bc),a
905   0044  21 00 00    	ld	hl,_player_hit_col
906   0047  36 00       	ld	(hl),0x00
907   0049  21 00 00    	ld	hl,_player_hit_lin
908   004C  36 00       	ld	(hl),0x00
909   004E  21 00 00    	ld	hl,_player_slide
910   0051  36 00       	ld	(hl),0x00
911   0053  DD 66 05    	ld	h,(ix+5)
912   0056  DD 6E 04    	ld	l,(ix+4)
913   0059  E5          	push	hl
914   005A  DD 56 06    	ld	d,(ix+6)
915   005D  1E 07       	ld	e,0x07
916   005F  D5          	push	de
917   0060  CD 00 00    	call	_NIRVANAP_spriteT_callee
918   0063  DD E1       	pop	ix
919   0065  C9          	ret
920   0066              	SECTION code_compiler
921   0066              ;	---------------------------------
922   0066              ; Function player_check_input
923   0066              ; ---------------------------------
924   0066              _player_check_input:
925   0066  21 00 00    	ld	hl,_dirs
926   0069  CB 56       	bit	2, (hl)
927   006B  28 0C       	jr	Z,l_player_check_input_00102
928   006D  21 00 00    	ld	hl,_dirs
929   0070  CB 5E       	bit	3, (hl)
930   0072  28 05       	jr	Z,l_player_check_input_00102
931   0074  21 00 00    	ld	hl,_dirs
932   0077  36 00       	ld	(hl),0x00
933   0079              l_player_check_input_00102:
934   0079  21 00 00    	ld	hl,_dirs
935   007C  7E          	ld	a, (hl)
936   007D  CB 07       	rlc	a
937   007F  E6 01       	and	a,0x01
938   0081  CB 47       	bit	0, a
939   0083  20 1D       	jr	NZ,l_player_check_input_00107
940   0085  CB 56       	bit	2, (hl)
941   0087  20 19       	jr	NZ,l_player_check_input_00107
942   0089  21 00 00    	ld	hl,_dirs
943   008C  CB 5E       	bit	3, (hl)
944   008E  20 12       	jr	NZ,l_player_check_input_00107
945   0090  21 00 00    	ld	hl,_dirs
946   0093  CB 46       	bit	0, (hl)
947   0095  20 0B       	jr	NZ,l_player_check_input_00107
948   0097  21 00 00    	ld	hl,_dirs
949   009A  CB 4E       	bit	1, (hl)
950   009C  20 04       	jr	NZ,l_player_check_input_00107
951   009E  2E 00       	ld	l,0x00
952   00A0  18 02       	jr	l_player_check_input_00108
953   00A2              l_player_check_input_00107:
954   00A2  2E 01       	ld	l,0x01
955   00A4              l_player_check_input_00108:
956   00A4  C9          	ret
957   00A5              	SECTION code_compiler
958   00A5              ;	---------------------------------
959   00A5              ; Function player_collision
960   00A5              ; ---------------------------------
961   00A5              _player_collision:
962   00A5  21 19 00    	ld	hl,0x0019
963   00A8  E5          	push	hl
964   00A9  2A 00 00    	ld	hl,(_player_hit_time)
965   00AC  E5          	push	hl
966   00AD  CD 00 00    	call	_game_check_time
967   00B0  F1          	pop	af
968   00B1  F1          	pop	af
969   00B2  7D          	ld	a, l
970   00B3  B7          	or	a, a
971   00B4  CA DE 01    	jp	Z, l_player_collision_00124
972   00B7  21 00 00    	ld	hl,_sprite
973   00BA  36 00       	ld	(hl),0x00
974   00BC  3A 07 00    	ld	a,(_col + 0x0007)
975   00BF  32 00 00    	ld	(_s_col1),a
976   00C2  3A 07 00    	ld	a,(_lin + 0x0007)
977   00C5  32 00 00    	ld	(_s_lin1),a
978   00C8  C6 08       	add	a,0x08
979   00CA  4F          	ld	c, a
980   00CB  3A 00 00    	ld	a, (_s_col1)
981   00CE  47          	ld	b,a
982   00CF  C5          	push	bc
983   00D0  CD 00 00    	call	_spr_calc_index
984   00D3  F1          	pop	af
985   00D4  7D          	ld	a,l
986   00D5  32 00 00    	ld	(_sprite_curr_index),a
987   00D8  4F          	ld	c,a
988   00D9  06 00       	ld	b,0x00
989   00DB  21 00 00    	ld	hl,_scr_map
990   00DE  09          	add	hl,bc
991   00DF  4E          	ld	c, (hl)
992   00E0  3E 2F       	ld	a,0x2f
993   00E2  91          	sub	a, c
994   00E3  30 0F       	jr	NC,l_player_collision_00120
995   00E5  79          	ld	a, c
996   00E6  D6 3C       	sub	a,0x3c
997   00E8  30 0A       	jr	NC,l_player_collision_00120
998   00EA  2E 06       	ld	l,0x06
999   00EC  CD 00 00    	call	_zx_border_fastcall
1000  00EF  2E 32       	ld	l,0x32
1001  00F1  CD 04 10    	call	_player_hit
1002  00F4              l_player_collision_00120:
1003  00F4  3A 00 00    	ld	a,(_sprite)
1004  00F7  D6 07       	sub	a,0x07
1005  00F9  D2 DE 01    	jp	NC, l_player_collision_00124
1006  00FC  3A 07 00    	ld	a,(_class + 0x0007)
1007  00FF  B7          	or	a, a
1008  0100  CA D7 01    	jp	Z, l_player_collision_00119
1009  0103  3A 07 00    	ld	a,(_col + 0x0007)
1010  0106  4F          	ld	c,a
1011  0107  06 00       	ld	b,0x00
1012  0109  3A 00 00    	ld	a,(_s_col1)
1013  010C  5F          	ld	e,a
1014  010D  16 00       	ld	d,0x00
1015  010F  79          	ld	a, c
1016  0110  93          	sub	a, e
1017  0111  6F          	ld	l, a
1018  0112  78          	ld	a, b
1019  0113  9A          	sbc	a, d
1020  0114  67          	ld	h, a
1021  0115  CD 00 00    	call	_abs_fastcall
1022  0118  7D          	ld	a,l
1023  0119  D6 02       	sub	a,0x02
1024  011B  7C          	ld	a,h
1025  011C  17          	rla
1026  011D  3F          	ccf
1027  011E  1F          	rra
1028  011F  DE 80       	sbc	a,0x80
1029  0121  D2 D7 01    	jp	NC, l_player_collision_00119
1030  0124  3A 07 00    	ld	a,(_lin + 0x0007)
1031  0127  4F          	ld	c,a
1032  0128  06 00       	ld	b,0x00
1033  012A  3A 00 00    	ld	a,(_s_lin1)
1034  012D  5F          	ld	e,a
1035  012E  16 00       	ld	d,0x00
1036  0130  79          	ld	a, c
1037  0131  93          	sub	a, e
1038  0132  6F          	ld	l, a
1039  0133  78          	ld	a, b
1040  0134  9A          	sbc	a, d
1041  0135  67          	ld	h, a
1042  0136  CD 00 00    	call	_abs_fastcall
1043  0139  7D          	ld	a,l
1044  013A  D6 0E       	sub	a,0x0e
1045  013C  7C          	ld	a,h
1046  013D  17          	rla
1047  013E  3F          	ccf
1048  013F  1F          	rra
1049  0140  DE 80       	sbc	a,0x80
1050  0142  D2 D7 01    	jp	NC, l_player_collision_00119
1051  0145  3A 07 00    	ld	a,(_class + 0x0007)
1052  0148  FE 06       	cp	a,0x06
1053  014A  20 2D       	jr	NZ,l_player_collision_00107
1054  014C  21 00 00    	ld	hl,_player_vita
1055  014F  7E          	ld	a, (hl)
1056  0150  C6 19       	add	a,0x19
1057  0152  77          	ld	(hl), a
1058  0153  3A 00 00    	ld	a,(_player_max_vita)
1059  0156  21 00 00    	ld	hl,_player_vita
1060  0159  96          	sub	a, (hl)
1061  015A  30 06       	jr	NC,l_player_collision_00105
1062  015C  3A 00 00    	ld	a,(_player_max_vita)
1063  015F  32 00 00    	ld	(_player_vita),a
1064  0162              l_player_collision_00105:
1065  0162  21 01 00    	ld	hl,0x0001
1066  0165  CD 5B 0A    	call	_player_score_add
1067  0168  CD 00 00    	call	_game_update_stats
1068  016B  2A 00 00    	ld	hl,(_sprite)
1069  016E  CD 00 00    	call	_spr_destroy
1070  0171  21 00 00    	ld	hl,_game_mush_count
1071  0174  35          	dec	(hl)
1072  0175  2E 00       	ld	l,0x00
1073  0177  18 67       	jr	l_player_collision_00125
1074  0179              l_player_collision_00107:
1075  0179  FE 07       	cp	a,0x07
1076  017B  20 2D       	jr	NZ,l_player_collision_00111
1077  017D  21 00 00    	ld	hl,_player_mana
1078  0180  7E          	ld	a, (hl)
1079  0181  C6 19       	add	a,0x19
1080  0183  77          	ld	(hl), a
1081  0184  3A 00 00    	ld	a,(_player_max_mana)
1082  0187  21 00 00    	ld	hl,_player_mana
1083  018A  96          	sub	a, (hl)
1084  018B  30 06       	jr	NC,l_player_collision_00109
1085  018D  3A 00 00    	ld	a,(_player_max_mana)
1086  0190  32 00 00    	ld	(_player_mana),a
1087  0193              l_player_collision_00109:
1088  0193  21 01 00    	ld	hl,0x0001
1089  0196  CD 5B 0A    	call	_player_score_add
1090  0199  CD 00 00    	call	_game_update_stats
1091  019C  2A 00 00    	ld	hl,(_sprite)
1092  019F  CD 00 00    	call	_spr_destroy
1093  01A2  21 00 00    	ld	hl,_game_mush_count
1094  01A5  35          	dec	(hl)
1095  01A6  2E 00       	ld	l,0x00
1096  01A8  18 36       	jr	l_player_collision_00125
1097  01AA              l_player_collision_00111:
1098  01AA  D6 08       	sub	a,0x08
1099  01AC  20 1B       	jr	NZ,l_player_collision_00113
1100  01AE  21 00 00    	ld	hl,_player_lives
1101  01B1  34          	inc	(hl)
1102  01B2  21 01 00    	ld	hl,0x0001
1103  01B5  CD 5B 0A    	call	_player_score_add
1104  01B8  CD 00 00    	call	_game_update_stats
1105  01BB  2A 00 00    	ld	hl,(_sprite)
1106  01BE  CD 00 00    	call	_spr_destroy
1107  01C1  21 00 00    	ld	hl,_game_mush_count
1108  01C4  35          	dec	(hl)
1109  01C5  2E 00       	ld	l,0x00
1110  01C7  18 17       	jr	l_player_collision_00125
1111  01C9              l_player_collision_00113:
1112  01C9  2E 02       	ld	l,0x02
1113  01CB  CD 00 00    	call	_zx_border_fastcall
1114  01CE  2E 14       	ld	l,0x14
1115  01D0  CD 04 10    	call	_player_hit
1116  01D3  2E 01       	ld	l,0x01
1117  01D5  18 09       	jr	l_player_collision_00125
1118  01D7              l_player_collision_00119:
1119  01D7  21 00 00    	ld	hl,_sprite
1120  01DA  34          	inc	(hl)
1121  01DB  C3 F4 00    	jp	l_player_collision_00120
1122  01DE              l_player_collision_00124:
1123  01DE  2E 00       	ld	l,0x00
1124  01E0              l_player_collision_00125:
1125  01E0  C9          	ret
1126  01E1              	SECTION code_compiler
1127  01E1              ;	---------------------------------
1128  01E1              ; Function player_kill
1129  01E1              ; ---------------------------------
1130  01E1              _player_kill:
1131  01E1  01 07 00    	ld	bc,_state+7
1132  01E4  0A          	ld	a, (bc)
1133  01E5  CB 6F       	bit	5, a
1134  01E7  20 5E       	jr	NZ,l_player_kill_00109
1135  01E9  C5          	push	bc
1136  01EA  CD 00 00    	call	_sound_hit_brick
1137  01ED  C1          	pop	bc
1138  01EE  0A          	ld	a, (bc)
1139  01EF  F6 20       	or	a,0x20
1140  01F1  5F          	ld	e,a
1141  01F2  02          	ld	(bc), a
1142  01F3  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
1143  01F6  36 03       	ld	(hl),0x03
1144  01F8  CB 53       	bit	2, e
1145  01FA  28 07       	jr	Z,l_player_kill_00102
1146  01FC  21 07 00    	ld	hl, +(_tile + 0x0007)
1147  01FF  36 4C       	ld	(hl),0x4c
1148  0201  18 05       	jr	l_player_kill_00103
1149  0203              l_player_kill_00102:
1150  0203  21 07 00    	ld	hl, +(_tile + 0x0007)
1151  0206  36 54       	ld	(hl),0x54
1152  0208              l_player_kill_00103:
1153  0208  CD 2C 0A    	call	_player_hit_platform_clear
1154  020B  21 07 00    	ld	hl,+(_col + 0x0007)
1155  020E  5E          	ld	e, (hl)
1156  020F  21 07 00    	ld	hl,+(_lin + 0x0007)
1157  0212  4E          	ld	c, (hl)
1158  0213  21 07 00    	ld	hl,+(_tile + 0x0007)
1159  0216  46          	ld	b, (hl)
1160  0217  7B          	ld	a, e
1161  0218  F5          	push	af
1162  0219  33          	inc	sp
1163  021A  79          	ld	a, c
1164  021B  48          	ld	c,b
1165  021C  47          	ld	b,a
1166  021D  3A 00 00    	ld	a,(_sprite)
1167  0220  C5          	push	bc
1168  0221  F5          	push	af
1169  0222  33          	inc	sp
1170  0223  CD 00 00    	call	_NIRVANAP_spriteT_callee
1171  0226  2A 00 00    	ld	hl,(_curr_time)
1172  0229  22 0E 00    	ld	(_spr_timer + 0x000e),hl
1173  022C  3A 00 00    	ld	a,(_sprite)
1174  022F  D6 07       	sub	a,0x07
1175  0231  20 0B       	jr	NZ,l_player_kill_00105
1176  0233  01 07 00    	ld	bc,_state_a+7
1177  0236  0A          	ld	a, (bc)
1178  0237  F6 08       	or	a,0x08
1179  0239  E6 EF       	and	a,0xef
1180  023B  02          	ld	(bc),a
1181  023C  18 09       	jr	l_player_kill_00109
1182  023E              l_player_kill_00105:
1183  023E  01 07 00    	ld	bc,_state_a+7
1184  0241  0A          	ld	a, (bc)
1185  0242  F6 10       	or	a,0x10
1186  0244  E6 F7       	and	a,0xf7
1187  0246  02          	ld	(bc),a
1188  0247              l_player_kill_00109:
1189  0247  C9          	ret
1190  0248              	SECTION code_compiler
1191  0248              ;	---------------------------------
1192  0248              ; Function player_turn
1193  0248              ; ---------------------------------
1194  0248              _player_turn:
1195  0248  21 00 00    	ld	hl,_sprite
1196  024B  CD 00 00    	call	_spr_chktime
1197  024E  7D          	ld	a, l
1198  024F  B7          	or	a, a
1199  0250  C8          	ret	Z
1200  0251  21 00 00    	ld	hl,_k1
1201  0254  E5          	push	hl
1202  0255  2A 00 00    	ld	hl,(_joyfunc1)
1203  0258  CD 00 00    	call	___sdcc_call_hl
1204  025B  F1          	pop	af
1205  025C  7D          	ld	a,l
1206  025D  32 00 00    	ld	(_dirs),a
1207  0260  CD 66 02    	call	_player_move
1208  0263  C3 A5 00    	jp  _player_collision
1209  0266              	SECTION code_compiler
1210  0266              ;	---------------------------------
1211  0266              ; Function player_move
1212  0266              ; ---------------------------------
1213  0266              _player_move:
1214  0266  3A 07 00    	ld	a,(_lin + 0x0007)
1215  0269  32 00 00    	ld	(_s_lin0),a
1216  026C  3A 07 00    	ld	a,(_col + 0x0007)
1217  026F  32 00 00    	ld	(_s_col0),a
1218  0272  21 07 00    	ld	hl,+(_tile + 0x0007)
1219  0275  4E          	ld	c, (hl)
1220  0276  21 07 00    	ld	hl,+(_colint + 0x0007)
1221  0279  46          	ld	b, (hl)
1222  027A  79          	ld	a, c
1223  027B  80          	add	a, b
1224  027C  32 00 00    	ld	(_s_tile0),a
1225  027F  3A 07 00    	ld	a,(_state + 0x0007)
1226  0282  32 00 00    	ld	(_s_state),a
1227  0285  21 00 00    	ld	hl,_s_state
1228  0288  CB 46       	bit	0, (hl)
1229  028A  20 07       	jr	NZ,l_player_move_00111
1230  028C  21 00 00    	ld	hl,_s_state
1231  028F  CB 4E       	bit	1, (hl)
1232  0291  28 49       	jr	Z,l_player_move_00112
1233  0293              l_player_move_00111:
1234  0293  CD A4 05    	call	_player_fire
1235  0296  3A 00 00    	ld	a,(_player_vel_y)
1236  0299  21 00 00    	ld	hl,_player_vel_y1
1237  029C  96          	sub	a, (hl)
1238  029D  E2 A2 02    	jp	PO, l_player_move_00156
1239  02A0  EE 80       	xor	a,0x80
1240  02A2              l_player_move_00156:
1241  02A2  F2 C5 02    	jp	P, l_player_move_00106
1242  02A5  21 00 00    	ld	hl,_dirs
1243  02A8  CB 56       	bit	2, (hl)
1244  02AA  28 09       	jr	Z,l_player_move_00102
1245  02AC  21 00 00    	ld	hl,_s_state
1246  02AF  7E          	ld	a,(hl)
1247  02B0  F6 08       	or	a,0x08
1248  02B2  E6 FB       	and	a,0xfb
1249  02B4  77          	ld	(hl),a
1250  02B5              l_player_move_00102:
1251  02B5  21 00 00    	ld	hl,_dirs
1252  02B8  CB 4E       	bit	1, (hl)
1253  02BA  28 09       	jr	Z,l_player_move_00106
1254  02BC  21 00 00    	ld	hl,_s_state
1255  02BF  7E          	ld	a,(hl)
1256  02C0  F6 04       	or	a,0x04
1257  02C2  E6 F7       	and	a,0xf7
1258  02C4  77          	ld	(hl),a
1259  02C5              l_player_move_00106:
1260  02C5  CD 16 0C    	call	_player_move_jump
1261  02C8  7D          	ld	a, l
1262  02C9  B7          	or	a, a
1263  02CA  28 16       	jr	Z,l_player_move_00113
1264  02CC  3A 00 00    	ld	a,(_player_over_stair)
1265  02CF  B7          	or	a, a
1266  02D0  20 10       	jr	NZ,l_player_move_00113
1267  02D2  21 60 08    	ld	hl,0x0860
1268  02D5  E5          	push	hl
1269  02D6  CD D2 03    	call	_player_tile
1270  02D9  F1          	pop	af
1271  02DA  18 06       	jr	l_player_move_00113
1272  02DC              l_player_move_00112:
1273  02DC  CD ED 03    	call	_player_move_input
1274  02DF  CD BF 0A    	call	_player_check_floor
1275  02E2              l_player_move_00113:
1276  02E2  CD 00 00    	call	_spr_redraw
1277  02E5  7D          	ld	a, l
1278  02E6  B7          	or	a, a
1279  02E7  28 03       	jr	Z,l_player_move_00116
1280  02E9  CD ED 05    	call	_player_check_map
1281  02EC              l_player_move_00116:
1282  02EC  3A 00 00    	ld	a,(_player_hit_lin)
1283  02EF  B7          	or	a, a
1284  02F0  28 03       	jr	Z,l_player_move_00118
1285  02F2  CD 2C 0A    	call	_player_hit_platform_clear
1286  02F5              l_player_move_00118:
1287  02F5  3A 00 00    	ld	a,(_s_state)
1288  02F8  32 07 00    	ld	((_state + 0x0007)),a
1289  02FB  2E 00       	ld	l,0x00
1290  02FD  C9          	ret
1291  02FE              	SECTION code_compiler
1292  02FE              ;	---------------------------------
1293  02FE              ; Function player_check_stairs_down
1294  02FE              ; ---------------------------------
1295  02FE              _player_check_stairs_down:
1296  02FE  CD 00 00    	call	___sdcc_enter_ix
1297  0301  3B          	dec	sp
1298  0302  3A 07 00    	ld	a,(_col + 0x0007)
1299  0305  DD 86 04    	add	a,(ix+4)
1300  0308  47          	ld	b, a
1301  0309  3A 07 00    	ld	a,(_lin + 0x0007)
1302  030C  C6 10       	add	a,0x10
1303  030E  4F          	ld	c,a
1304  030F  C5          	push	bc
1305  0310  CD 00 00    	call	_spr_calc_index
1306  0313  F1          	pop	af
1307  0314  7D          	ld	a,l
1308  0315  32 00 00    	ld	(_sprite_curr_index),a
1309  0318  4F          	ld	c,a
1310  0319  06 00       	ld	b,0x00
1311  031B  21 00 00    	ld	hl,_scr_map
1312  031E  09          	add	hl,bc
1313  031F  7E          	ld	a,(hl)
1314  0320  4F          	ld	c,a
1315  0321  D6 44       	sub	a,0x44
1316  0323  38 05       	jr	C,l_player_check_stairs_down_00107
1317  0325  3E 47       	ld	a,0x47
1318  0327  91          	sub	a, c
1319  0328  30 04       	jr	NC,l_player_check_stairs_down_00108
1320  032A              l_player_check_stairs_down_00107:
1321  032A  3E 00       	ld	a,0x00
1322  032C  18 02       	jr	l_player_check_stairs_down_00109
1323  032E              l_player_check_stairs_down_00108:
1324  032E  3E 01       	ld	a,0x01
1325  0330              l_player_check_stairs_down_00109:
1326  0330  B7          	or	a, a
1327  0331  28 09       	jr	Z,l_player_check_stairs_down_00105
1328  0333  21 00 00    	ld	hl,_player_over_stair
1329  0336  7E          	ld	a, (hl)
1330  0337  B7          	or	a, a
1331  0338  20 02       	jr	NZ,l_player_check_stairs_down_00105
1332  033A  36 01       	ld	(hl),0x01
1333  033C              l_player_check_stairs_down_00105:
1334  033C  33          	inc	sp
1335  033D  DD E1       	pop	ix
1336  033F  C9          	ret
1337  0340              	SECTION code_compiler
1338  0340              ;	---------------------------------
1339  0340              ; Function player_check_stairs
1340  0340              ; ---------------------------------
1341  0340              _player_check_stairs:
1342  0340  CD 00 00    	call	___sdcc_enter_ix
1343  0343  3B          	dec	sp
1344  0344  5D          	ld	e, l
1345  0345  3A 07 00    	ld	a,(_col + 0x0007)
1346  0348  83          	add	a, e
1347  0349  4F          	ld	c, a
1348  034A  21 07 00    	ld	hl,+(_lin + 0x0007)
1349  034D  46          	ld	b, (hl)
1350  034E  D5          	push	de
1351  034F  79          	ld	a, c
1352  0350  48          	ld	c,b
1353  0351  47          	ld	b,a
1354  0352  C5          	push	bc
1355  0353  CD 00 00    	call	_spr_calc_index
1356  0356  F1          	pop	af
1357  0357  D1          	pop	de
1358  0358  7D          	ld	a,l
1359  0359  32 00 00    	ld	(_sprite_curr_index),a
1360  035C  4F          	ld	c,a
1361  035D  06 00       	ld	b,0x00
1362  035F  21 00 00    	ld	hl,_scr_map
1363  0362  09          	add	hl,bc
1364  0363  7E          	ld	a,(hl)
1365  0364  4F          	ld	c,a
1366  0365  D6 44       	sub	a,0x44
1367  0367  38 05       	jr	C,l_player_check_stairs_00111
1368  0369  3E 47       	ld	a,0x47
1369  036B  91          	sub	a, c
1370  036C  30 04       	jr	NC,l_player_check_stairs_00112
1371  036E              l_player_check_stairs_00111:
1372  036E  0E 00       	ld	c,0x00
1373  0370  18 02       	jr	l_player_check_stairs_00113
1374  0372              l_player_check_stairs_00112:
1375  0372  0E 01       	ld	c,0x01
1376  0374              l_player_check_stairs_00113:
1377  0374  3A 07 00    	ld	a,(_col + 0x0007)
1378  0377  83          	add	a, e
1379  0378  57          	ld	d, a
1380  0379  3A 07 00    	ld	a,(_lin + 0x0007)
1381  037C  C6 0F       	add	a,0x0f
1382  037E  47          	ld	b, a
1383  037F  C5          	push	bc
1384  0380  58          	ld	e,b
1385  0381  D5          	push	de
1386  0382  CD 00 00    	call	_spr_calc_index
1387  0385  F1          	pop	af
1388  0386  C1          	pop	bc
1389  0387  7D          	ld	a,l
1390  0388  32 00 00    	ld	(_sprite_curr_index),a
1391  038B  5F          	ld	e,a
1392  038C  16 00       	ld	d,0x00
1393  038E  21 00 00    	ld	hl,_scr_map
1394  0391  19          	add	hl,de
1395  0392  7E          	ld	a,(hl)
1396  0393  47          	ld	b,a
1397  0394  D6 44       	sub	a,0x44
1398  0396  38 05       	jr	C,l_player_check_stairs_00114
1399  0398  3E 47       	ld	a,0x47
1400  039A  90          	sub	a, b
1401  039B  30 04       	jr	NC,l_player_check_stairs_00115
1402  039D              l_player_check_stairs_00114:
1403  039D  06 00       	ld	b,0x00
1404  039F  18 02       	jr	l_player_check_stairs_00116
1405  03A1              l_player_check_stairs_00115:
1406  03A1  06 01       	ld	b,0x01
1407  03A3              l_player_check_stairs_00116:
1408  03A3  79          	ld	a, c
1409  03A4  B7          	or	a,a
1410  03A5  20 03       	jr	NZ,l_player_check_stairs_00105
1411  03A7  B0          	or	a,b
1412  03A8  28 13       	jr	Z,l_player_check_stairs_00106
1413  03AA              l_player_check_stairs_00105:
1414  03AA  21 00 00    	ld	hl,_player_over_stair
1415  03AD  7E          	ld	a, (hl)
1416  03AE  B7          	or	a, a
1417  03AF  20 1D       	jr	NZ,l_player_check_stairs_00109
1418  03B1  36 01       	ld	(hl),0x01
1419  03B3  21 72 00    	ld	hl,0x0072
1420  03B6  E5          	push	hl
1421  03B7  CD D2 03    	call	_player_tile
1422  03BA  F1          	pop	af
1423  03BB  18 11       	jr	l_player_check_stairs_00109
1424  03BD              l_player_check_stairs_00106:
1425  03BD  21 00 00    	ld	hl,_player_over_stair
1426  03C0  7E          	ld	a, (hl)
1427  03C1  B7          	or	a, a
1428  03C2  28 0A       	jr	Z,l_player_check_stairs_00109
1429  03C4  36 00       	ld	(hl),0x00
1430  03C6  21 60 08    	ld	hl,0x0860
1431  03C9  E5          	push	hl
1432  03CA  CD D2 03    	call	_player_tile
1433  03CD  F1          	pop	af
1434  03CE              l_player_check_stairs_00109:
1435  03CE  33          	inc	sp
1436  03CF  DD E1       	pop	ix
1437  03D1  C9          	ret
1438  03D2              	SECTION code_compiler
1439  03D2              ;	---------------------------------
1440  03D2              ; Function player_tile
1441  03D2              ; ---------------------------------
1442  03D2              _player_tile:
1443  03D2  CD 00 00    	call	___sdcc_enter_ix
1444  03D5  DD 7E 05    	ld	a,(ix+5)
1445  03D8  F5          	push	af
1446  03D9  33          	inc	sp
1447  03DA  2A FF FF    	ld	hl,(_sprite-1)
1448  03DD  DD 6E 04    	ld	l,(ix+4)
1449  03E0  E5          	push	hl
1450  03E1  CD 00 00    	call	_spr_tile_dir
1451  03E4  F1          	pop	af
1452  03E5  33          	inc	sp
1453  03E6  7D          	ld	a,l
1454  03E7  32 07 00    	ld	((_tile + 0x0007)),a
1455  03EA  DD E1       	pop	ix
1456  03EC  C9          	ret
1457  03ED              	SECTION code_compiler
1458  03ED              ;	---------------------------------
1459  03ED              ; Function player_move_input
1460  03ED              ; ---------------------------------
1461  03ED              _player_move_input:
1462  03ED  CD 66 00    	call	_player_check_input
1463  03F0  7D          	ld	a, l
1464  03F1  B7          	or	a, a
1465  03F2  CA 57 05    	jp	Z, l_player_move_input_00147
1466  03F5  CD A4 05    	call	_player_fire
1467  03F8  7D          	ld	a, l
1468  03F9  B7          	or	a, a
1469  03FA  28 0A       	jr	Z,l_player_move_input_00102
1470  03FC  21 00 00    	ld	hl,_dirs
1471  03FF  36 00       	ld	(hl),0x00
1472  0401  2E 00       	ld	l,0x00
1473  0403  C3 7D 05    	jp	l_player_move_input_00149
1474  0406              l_player_move_input_00102:
1475  0406  21 00 00    	ld	hl,_dirs
1476  0409  CB 7E       	bit	7, (hl)
1477  040B  28 54       	jr	Z,l_player_move_input_00106
1478  040D  21 00 00    	ld	hl,_dirs
1479  0410  CB 46       	bit	0, (hl)
1480  0412  28 4D       	jr	Z,l_player_move_input_00106
1481  0414  21 00 00    	ld	hl,_player_vel_inc
1482  0417  36 01       	ld	(hl),0x01
1483  0419  CD 00 00    	call	_ay_is_playing
1484  041C  7D          	ld	a, l
1485  041D  D6 03       	sub	a,0x03
1486  041F  28 06       	jr	Z,l_player_move_input_00104
1487  0421  21 00 00    	ld	hl,_ay_effect_03
1488  0424  CD 00 00    	call	_ay_fx_play
1489  0427              l_player_move_input_00104:
1490  0427  21 00 00    	ld	hl,_player_over_stair
1491  042A  36 00       	ld	(hl),0x00
1492  042C  CD 00 00    	call	_sound_jump
1493  042F  21 00 00    	ld	hl,_s_state
1494  0432  7E          	ld	a,(hl)
1495  0433  F6 01       	or	a,0x01
1496  0435  E6 FD       	and	a,0xfd
1497  0437  77          	ld	(hl),a
1498  0438  3A 07 00    	ld	a,(_lin + 0x0007)
1499  043B  32 07 00    	ld	((_jump_lin + 0x0007)),a
1500  043E  3A 00 00    	ld	a,(_s_state)
1501  0441  32 07 00    	ld	((_state + 0x0007)),a
1502  0444  21 64 08    	ld	hl,0x0864
1503  0447  E5          	push	hl
1504  0448  CD D2 03    	call	_player_tile
1505  044B  F1          	pop	af
1506  044C  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
1507  044F  36 02       	ld	(hl),0x02
1508  0451  21 00 00    	ld	hl,_player_slide
1509  0454  36 00       	ld	(hl),0x00
1510  0456  3A 00 00    	ld	a,(_player_vel_y0)
1511  0459  32 00 00    	ld	(_player_vel_y),a
1512  045C  2E 01       	ld	l,0x01
1513  045E  C3 7D 05    	jp	l_player_move_input_00149
1514  0461              l_player_move_input_00106:
1515  0461  21 00 00    	ld	hl,_dirs
1516  0464  CB 5E       	bit	3, (hl)
1517  0466  28 23       	jr	Z,l_player_move_input_00111
1518  0468  CD 7E 05    	call	_player_fix_walk_lin
1519  046B  21 00 00    	ld	hl,_s_state
1520  046E  7E          	ld	a,(hl)
1521  046F  F6 04       	or	a,0x04
1522  0471  E6 F7       	and	a,0xf7
1523  0473  77          	ld	(hl),a
1524  0474  01 07 00    	ld	bc,_state_a+7
1525  0477  0A          	ld	a, (bc)
1526  0478  F6 10       	or	a,0x10
1527  047A  E6 F7       	and	a,0xf7
1528  047C  02          	ld	(bc),a
1529  047D  3A 00 00    	ld	a,(_player_over_stair)
1530  0480  B7          	or	a, a
1531  0481  28 05       	jr	Z,l_player_move_input_00109
1532  0483  2E 00       	ld	l,0x00
1533  0485  CD 40 03    	call	_player_check_stairs
1534  0488              l_player_move_input_00109:
1535  0488  CD 00 00    	call	_spr_move_horizontal
1536  048B              l_player_move_input_00111:
1537  048B  21 00 00    	ld	hl,_dirs
1538  048E  CB 56       	bit	2, (hl)
1539  0490  28 23       	jr	Z,l_player_move_input_00115
1540  0492  CD 7E 05    	call	_player_fix_walk_lin
1541  0495  21 00 00    	ld	hl,_s_state
1542  0498  7E          	ld	a,(hl)
1543  0499  F6 08       	or	a,0x08
1544  049B  E6 FB       	and	a,0xfb
1545  049D  77          	ld	(hl),a
1546  049E  01 07 00    	ld	bc,_state_a+7
1547  04A1  0A          	ld	a, (bc)
1548  04A2  F6 08       	or	a,0x08
1549  04A4  E6 EF       	and	a,0xef
1550  04A6  02          	ld	(bc),a
1551  04A7  3A 00 00    	ld	a,(_player_over_stair)
1552  04AA  B7          	or	a, a
1553  04AB  28 05       	jr	Z,l_player_move_input_00113
1554  04AD  2E 00       	ld	l,0x00
1555  04AF  CD 40 03    	call	_player_check_stairs
1556  04B2              l_player_move_input_00113:
1557  04B2  CD 00 00    	call	_spr_move_horizontal
1558  04B5              l_player_move_input_00115:
1559  04B5  21 00 00    	ld	hl,_dirs
1560  04B8  CB 46       	bit	0, (hl)
1561  04BA  28 37       	jr	Z,l_player_move_input_00127
1562  04BC  2E 00       	ld	l,0x00
1563  04BE  CD 40 03    	call	_player_check_stairs
1564  04C1  3A 00 00    	ld	a,(_player_over_stair)
1565  04C4  B7          	or	a, a
1566  04C5  20 05       	jr	NZ,l_player_move_input_00117
1567  04C7  2E 01       	ld	l,0x01
1568  04C9  CD 40 03    	call	_player_check_stairs
1569  04CC              l_player_move_input_00117:
1570  04CC  3A 00 00    	ld	a,(_player_over_stair)
1571  04CF  B7          	or	a, a
1572  04D0  28 0E       	jr	Z,l_player_move_input_00124
1573  04D2  CD 00 00    	call	_spr_move_up
1574  04D5  7D          	ld	a, l
1575  04D6  B7          	or	a, a
1576  04D7  28 1A       	jr	Z,l_player_move_input_00127
1577  04D9  21 00 00    	ld	hl,_player_over_stair
1578  04DC  36 00       	ld	(hl),0x00
1579  04DE  18 13       	jr	l_player_move_input_00127
1580  04E0              l_player_move_input_00124:
1581  04E0  21 00 00    	ld	hl,_dirs
1582  04E3  CB 5E       	bit	3, (hl)
1583  04E5  20 0C       	jr	NZ,l_player_move_input_00127
1584  04E7  21 00 00    	ld	hl,_dirs
1585  04EA  CB 56       	bit	2, (hl)
1586  04EC  20 05       	jr	NZ,l_player_move_input_00127
1587  04EE  2E 00       	ld	l,0x00
1588  04F0  C3 7D 05    	jp	l_player_move_input_00149
1589  04F3              l_player_move_input_00127:
1590  04F3  21 00 00    	ld	hl,_dirs
1591  04F6  CB 4E       	bit	1, (hl)
1592  04F8  28 3B       	jr	Z,l_player_move_input_00139
1593  04FA  AF          	xor	a, a
1594  04FB  F5          	push	af
1595  04FC  33          	inc	sp
1596  04FD  CD FE 02    	call	_player_check_stairs_down
1597  0500  33          	inc	sp
1598  0501  3A 00 00    	ld	a,(_player_over_stair)
1599  0504  B7          	or	a, a
1600  0505  20 08       	jr	NZ,l_player_move_input_00129
1601  0507  3E 01       	ld	a,0x01
1602  0509  F5          	push	af
1603  050A  33          	inc	sp
1604  050B  CD FE 02    	call	_player_check_stairs_down
1605  050E  33          	inc	sp
1606  050F              l_player_move_input_00129:
1607  050F  3A 00 00    	ld	a,(_player_over_stair)
1608  0512  B7          	or	a, a
1609  0513  28 0E       	jr	Z,l_player_move_input_00136
1610  0515  CD 00 00    	call	_spr_move_down
1611  0518  7D          	ld	a, l
1612  0519  B7          	or	a, a
1613  051A  28 19       	jr	Z,l_player_move_input_00139
1614  051C  21 00 00    	ld	hl,_player_over_stair
1615  051F  36 00       	ld	(hl),0x00
1616  0521  18 12       	jr	l_player_move_input_00139
1617  0523              l_player_move_input_00136:
1618  0523  21 00 00    	ld	hl,_dirs
1619  0526  CB 5E       	bit	3, (hl)
1620  0528  20 0B       	jr	NZ,l_player_move_input_00139
1621  052A  21 00 00    	ld	hl,_dirs
1622  052D  CB 56       	bit	2, (hl)
1623  052F  20 04       	jr	NZ,l_player_move_input_00139
1624  0531  2E 00       	ld	l,0x00
1625  0533  18 48       	jr	l_player_move_input_00149
1626  0535              l_player_move_input_00139:
1627  0535  3A 00 00    	ld	a,(_s_state)
1628  0538  32 07 00    	ld	((_state + 0x0007)),a
1629  053B  3A 00 00    	ld	a,(_player_over_stair)
1630  053E  B7          	or	a, a
1631  053F  28 0A       	jr	Z,l_player_move_input_00141
1632  0541  21 72 00    	ld	hl,0x0072
1633  0544  E5          	push	hl
1634  0545  CD D2 03    	call	_player_tile
1635  0548  F1          	pop	af
1636  0549  18 08       	jr	l_player_move_input_00142
1637  054B              l_player_move_input_00141:
1638  054B  21 60 08    	ld	hl,0x0860
1639  054E  E5          	push	hl
1640  054F  CD D2 03    	call	_player_tile
1641  0552  F1          	pop	af
1642  0553              l_player_move_input_00142:
1643  0553  2E 01       	ld	l,0x01
1644  0555  18 26       	jr	l_player_move_input_00149
1645  0557              l_player_move_input_00147:
1646  0557  21 07 00    	ld	hl, +(_colint + 0x0007)
1647  055A  36 00       	ld	(hl),0x00
1648  055C  3A 00 00    	ld	a,(_player_over_stair)
1649  055F  B7          	or	a, a
1650  0560  28 0A       	jr	Z,l_player_move_input_00144
1651  0562  21 72 00    	ld	hl,0x0072
1652  0565  E5          	push	hl
1653  0566  CD D2 03    	call	_player_tile
1654  0569  F1          	pop	af
1655  056A  18 08       	jr	l_player_move_input_00145
1656  056C              l_player_move_input_00144:
1657  056C  21 70 01    	ld	hl,0x0170
1658  056F  E5          	push	hl
1659  0570  CD D2 03    	call	_player_tile
1660  0573  F1          	pop	af
1661  0574              l_player_move_input_00145:
1662  0574  21 00 00    	ld	hl,_s_state
1663  0577  7E          	ld	a,(hl)
1664  0578  E6 F3       	and	a,+(0xf7&0xfb)
1665  057A  77          	ld	(hl),a
1666  057B  2E 00       	ld	l,0x00
1667  057D              l_player_move_input_00149:
1668  057D  C9          	ret
1669  057E              	SECTION code_compiler
1670  057E              ;	---------------------------------
1671  057E              ; Function player_fix_walk_lin
1672  057E              ; ---------------------------------
1673  057E              _player_fix_walk_lin:
1674  057E  3A 00 00    	ld	a,(_player_over_stair)
1675  0581  B7          	or	a, a
1676  0582  C0          	ret	NZ
1677  0583  3A 00 00    	ld	a,(_s_lin0)
1678  0586  07          	rlca
1679  0587  07          	rlca
1680  0588  07          	rlca
1681  0589  07          	rlca
1682  058A  E6 0F       	and	a,0x0f
1683  058C  07          	rlca
1684  058D  07          	rlca
1685  058E  07          	rlca
1686  058F  07          	rlca
1687  0590  E6 F0       	and	a,0xf0
1688  0592  32 00 00    	ld	(_s_lin1),a
1689  0595  3A 00 00    	ld	a,(_s_lin0)
1690  0598  21 00 00    	ld	hl,_s_lin1
1691  059B  96          	sub	a, (hl)
1692  059C  C8          	ret	Z
1693  059D  3A 00 00    	ld	a,(_s_lin1)
1694  05A0  32 07 00    	ld	((_lin + 0x0007)),a
1695  05A3  C9          	ret
1696  05A4              	SECTION code_compiler
1697  05A4              ;	---------------------------------
1698  05A4              ; Function player_fire
1699  05A4              ; ---------------------------------
1700  05A4              _player_fire:
1701  05A4  21 00 00    	ld	hl,_dirs
1702  05A7  CB 7E       	bit	7, (hl)
1703  05A9  28 3F       	jr	Z,l_player_fire_00110
1704  05AB  21 00 00    	ld	hl,_dirs
1705  05AE  CB 46       	bit	0, (hl)
1706  05B0  20 38       	jr	NZ,l_player_fire_00110
1707  05B2  21 00 00    	ld	hl,_player_mana
1708  05B5  7E          	ld	a, (hl)
1709  05B6  B7          	or	a, a
1710  05B7  28 2D       	jr	Z,l_player_fire_00107
1711  05B9  3A 07 00    	ld	a,(_bullet_col + 0x0007)
1712  05BC  3C          	inc	a
1713  05BD  20 27       	jr	NZ,l_player_fire_00107
1714  05BF  3E 05       	ld	a,0x05
1715  05C1  96          	sub	a, (hl)
1716  05C2  30 12       	jr	NC,l_player_fire_00104
1717  05C4  CD 00 00    	call	_sound_hit_enemy
1718  05C7  3A 00 00    	ld	a,(_game_god_mode)
1719  05CA  B7          	or	a, a
1720  05CB  20 0E       	jr	NZ,l_player_fire_00105
1721  05CD  21 00 00    	ld	hl,_player_mana
1722  05D0  7E          	ld	a, (hl)
1723  05D1  C6 FB       	add	a,0xfb
1724  05D3  77          	ld	(hl), a
1725  05D4  18 05       	jr	l_player_fire_00105
1726  05D6              l_player_fire_00104:
1727  05D6  21 00 00    	ld	hl,_player_mana
1728  05D9  36 00       	ld	(hl),0x00
1729  05DB              l_player_fire_00105:
1730  05DB  CD 00 00    	call	_game_update_stats
1731  05DE  21 07 78    	ld	hl,0x7807
1732  05E1  E5          	push	hl
1733  05E2  CD 00 00    	call	_game_shoot_fire
1734  05E5  F1          	pop	af
1735  05E6              l_player_fire_00107:
1736  05E6  2E 01       	ld	l,0x01
1737  05E8  18 02       	jr	l_player_fire_00112
1738  05EA              l_player_fire_00110:
1739  05EA  2E 00       	ld	l,0x00
1740  05EC              l_player_fire_00112:
1741  05EC  C9          	ret
1742  05ED              	SECTION code_compiler
1743  05ED              ;	---------------------------------
1744  05ED              ; Function player_check_map
1745  05ED              ; ---------------------------------
1746  05ED              _player_check_map:
1747  05ED  21 07 00    	ld	hl,+(_col + 0x0007)
1748  05F0  46          	ld	b, (hl)
1749  05F1  21 07 00    	ld	hl,+(_lin + 0x0007)
1750  05F4  4E          	ld	c, (hl)
1751  05F5  C5          	push	bc
1752  05F6  CD 00 00    	call	_spr_calc_index
1753  05F9  F1          	pop	af
1754  05FA  7D          	ld	a,l
1755  05FB  32 00 00    	ld	(_sprite_curr_index),a
1756  05FE  21 07 00    	ld	hl,+(_col + 0x0007)
1757  0601  4E          	ld	c, (hl)
1758  0602  3A 07 00    	ld	a,(_lin + 0x0007)
1759  0605  E6 0F       	and	a,0x0f
1760  0607  CB 41       	bit	0, c
1761  0609  20 17       	jr	NZ,l_player_check_map_00108
1762  060B  B7          	or	a, a
1763  060C  20 05       	jr	NZ,l_player_check_map_00102
1764  060E  CD 4D 06    	call	_player_pick_item
1765  0611  18 39       	jr	l_player_check_map_00110
1766  0613              l_player_check_map_00102:
1767  0613  CD 4D 06    	call	_player_pick_item
1768  0616  21 00 00    	ld	hl,_sprite_curr_index
1769  0619  7E          	ld	a, (hl)
1770  061A  C6 10       	add	a,0x10
1771  061C  77          	ld	(hl), a
1772  061D  CD 4D 06    	call	_player_pick_item
1773  0620  18 2A       	jr	l_player_check_map_00110
1774  0622              l_player_check_map_00108:
1775  0622  B7          	or	a, a
1776  0623  20 0C       	jr	NZ,l_player_check_map_00105
1777  0625  CD 4D 06    	call	_player_pick_item
1778  0628  21 00 00    	ld	hl,_sprite_curr_index
1779  062B  34          	inc	(hl)
1780  062C  CD 4D 06    	call	_player_pick_item
1781  062F  18 1B       	jr	l_player_check_map_00110
1782  0631              l_player_check_map_00105:
1783  0631  CD 4D 06    	call	_player_pick_item
1784  0634  21 00 00    	ld	hl,_sprite_curr_index
1785  0637  34          	inc	(hl)
1786  0638  CD 4D 06    	call	_player_pick_item
1787  063B  21 00 00    	ld	hl,_sprite_curr_index
1788  063E  7E          	ld	a, (hl)
1789  063F  C6 0F       	add	a,0x0f
1790  0641  77          	ld	(hl), a
1791  0642  CD 4D 06    	call	_player_pick_item
1792  0645  21 00 00    	ld	hl,_sprite_curr_index
1793  0648  34          	inc	(hl)
1794  0649  CD 4D 06    	call	_player_pick_item
1795  064C              l_player_check_map_00110:
1796  064C  C9          	ret
1797  064D              	SECTION code_compiler
1798  064D              ;	---------------------------------
1799  064D              ; Function player_pick_item
1800  064D              ; ---------------------------------
1801  064D              _player_pick_item:
1802  064D  2A 00 00    	ld	hl,(_sprite_curr_index)
1803  0650  26 00       	ld	h,0x00
1804  0652  01 00 00    	ld	bc,_scr_map
1805  0655  09          	add	hl,bc
1806  0656  7E          	ld	a,(hl)
1807  0657  4F          	ld	c,a
1808  0658  D6 24       	sub	a,0x24
1809  065A  DA B2 07    	jp	C,l_player_pick_item_00129
1810  065D  3E 2F       	ld	a,0x2f
1811  065F  91          	sub	a,c
1812  0660  DA B2 07    	jp	C,l_player_pick_item_00129
1813  0663  44          	ld	b,h
1814  0664  CD 00 00    	call	_ay_reset
1815  0667  21 00 00    	ld	hl,_ay_effect_10
1816  066A  CD 00 00    	call	_ay_fx_play
1817  066D  C5          	push	bc
1818  066E  CD 00 00    	call	_sound_coin
1819  0671  C1          	pop	bc
1820  0672  2A 00 00    	ld	hl,(_sprite_curr_index)
1821  0675  26 00       	ld	h,0x00
1822  0677  11 00 00    	ld	de,_scr_map
1823  067A  19          	add	hl,de
1824  067B  AF          	xor	a,a
1825  067C  77          	ld	(hl),a
1826  067D  3A 00 00    	ld	a,(_sprite_curr_index)
1827  0680  5F          	ld	e,a
1828  0681  16 00       	ld	d,0x00
1829  0683  C5          	push	bc
1830  0684  D5          	push	de
1831  0685  CD 00 00    	call	_game_obj_set
1832  0688  F1          	pop	af
1833  0689  C1          	pop	bc
1834  068A  3A 00 00    	ld	a,(_sprite_curr_index)
1835  068D  07          	rlca
1836  068E  07          	rlca
1837  068F  07          	rlca
1838  0690  07          	rlca
1839  0691  E6 0F       	and	a,0x0f
1840  0693  07          	rlca
1841  0694  07          	rlca
1842  0695  07          	rlca
1843  0696  07          	rlca
1844  0697  E6 F0       	and	a,0xf0
1845  0699  32 00 00    	ld	(_s_lin1),a
1846  069C  3A 00 00    	ld	a,(_sprite_curr_index)
1847  069F  E6 0F       	and	a,0x0f
1848  06A1  87          	add	a, a
1849  06A2  32 00 00    	ld	(_s_col1),a
1850  06A5  C5          	push	bc
1851  06A6  21 00 00    	ld	hl,0x0000
1852  06A9  E5          	push	hl
1853  06AA  21 84 03    	ld	hl,0x0384
1854  06AD  E5          	push	hl
1855  06AE  F5          	push	af
1856  06AF  33          	inc	sp
1857  06B0  3A 00 00    	ld	a,(_s_lin1)
1858  06B3  F5          	push	af
1859  06B4  33          	inc	sp
1860  06B5  CD 00 00    	call	_spr_add_anim
1861  06B8  F1          	pop	af
1862  06B9  F1          	pop	af
1863  06BA  F1          	pop	af
1864  06BB  C1          	pop	bc
1865  06BC  79          	ld	a, c
1866  06BD  D6 24       	sub	a,0x24
1867  06BF  DA B2 07    	jp	C, l_player_pick_item_00129
1868  06C2  3E 2F       	ld	a,0x2f
1869  06C4  91          	sub	a, c
1870  06C5  DA B2 07    	jp	C, l_player_pick_item_00129
1871  06C8  79          	ld	a, c
1872  06C9  C6 DC       	add	a,0xdc
1873  06CB  4F          	ld	c, a
1874  06CC  06 00       	ld	b,0x00
1875  06CE  21 D5 06    	ld	hl,l_player_pick_item_00171
1876  06D1  09          	add	hl, bc
1877  06D2  09          	add	hl, bc
1878  06D3  09          	add	hl, bc
1879  06D4  E9          	jp	(hl)
1880  06D5              l_player_pick_item_00171:
1881  06D5  C3 F9 06    	jp	l_player_pick_item_00101
1882  06D8  C3 04 07    	jp	l_player_pick_item_00102
1883  06DB  C3 0F 07    	jp	l_player_pick_item_00103
1884  06DE  C3 1A 07    	jp	l_player_pick_item_00104
1885  06E1  C3 25 07    	jp	l_player_pick_item_00105
1886  06E4  C3 37 07    	jp	l_player_pick_item_00107
1887  06E7  C3 4C 07    	jp	l_player_pick_item_00110
1888  06EA  C3 61 07    	jp	l_player_pick_item_00113
1889  06ED  C3 76 07    	jp	l_player_pick_item_00116
1890  06F0  C3 8B 07    	jp	l_player_pick_item_00119
1891  06F3  C3 A0 07    	jp	l_player_pick_item_00122
1892  06F6  C3 2E 07    	jp	l_player_pick_item_00106
1893  06F9              l_player_pick_item_00101:
1894  06F9  21 00 00    	ld	hl,_player_keys
1895  06FC  36 01       	ld	(hl),0x01
1896  06FE  CD 00 00    	call	_game_update_stats
1897  0701  C3 B2 07    	jp	l_player_pick_item_00129
1898  0704              l_player_pick_item_00102:
1899  0704  21 01 00    	ld	hl, +(_player_keys + 0x0001)
1900  0707  36 01       	ld	(hl),0x01
1901  0709  CD 00 00    	call	_game_update_stats
1902  070C  C3 B2 07    	jp	l_player_pick_item_00129
1903  070F              l_player_pick_item_00103:
1904  070F  21 02 00    	ld	hl, +(_player_keys + 0x0002)
1905  0712  36 01       	ld	(hl),0x01
1906  0714  CD 00 00    	call	_game_update_stats
1907  0717  C3 B2 07    	jp	l_player_pick_item_00129
1908  071A              l_player_pick_item_00104:
1909  071A  21 03 00    	ld	hl, +(_player_keys + 0x0003)
1910  071D  36 01       	ld	(hl),0x01
1911  071F  CD 00 00    	call	_game_update_stats
1912  0722  C3 B2 07    	jp	l_player_pick_item_00129
1913  0725              l_player_pick_item_00105:
1914  0725  21 01 00    	ld	hl,0x0001
1915  0728  CD 5B 0A    	call	_player_score_add
1916  072B  C3 B2 07    	jp	l_player_pick_item_00129
1917  072E              l_player_pick_item_00106:
1918  072E  21 0A 00    	ld	hl,0x000a
1919  0731  CD 5B 0A    	call	_player_score_add
1920  0734  C3 B2 07    	jp	l_player_pick_item_00129
1921  0737              l_player_pick_item_00107:
1922  0737  21 00 00    	ld	hl,_player_str
1923  073A  34          	inc	(hl)
1924  073B  21 00 00    	ld	hl,_player_max_vita
1925  073E  7E          	ld	a, (hl)
1926  073F  D6 C8       	sub	a,0xc8
1927  0741  30 6F       	jr	NC,l_player_pick_item_00129
1928  0743  7E          	ld	a, (hl)
1929  0744  C6 0A       	add	a,0x0a
1930  0746  77          	ld	(hl), a
1931  0747  CD 00 00    	call	_game_update_stats
1932  074A  18 66       	jr	l_player_pick_item_00129
1933  074C              l_player_pick_item_00110:
1934  074C  21 00 00    	ld	hl,_player_str
1935  074F  34          	inc	(hl)
1936  0750  21 00 00    	ld	hl,_player_max_vita
1937  0753  7E          	ld	a, (hl)
1938  0754  D6 C8       	sub	a,0xc8
1939  0756  30 5A       	jr	NC,l_player_pick_item_00129
1940  0758  7E          	ld	a, (hl)
1941  0759  C6 0A       	add	a,0x0a
1942  075B  77          	ld	(hl), a
1943  075C  CD 00 00    	call	_game_update_stats
1944  075F  18 51       	jr	l_player_pick_item_00129
1945  0761              l_player_pick_item_00113:
1946  0761  21 00 00    	ld	hl,_player_str
1947  0764  34          	inc	(hl)
1948  0765  21 00 00    	ld	hl,_player_max_vita
1949  0768  7E          	ld	a, (hl)
1950  0769  D6 C8       	sub	a,0xc8
1951  076B  30 45       	jr	NC,l_player_pick_item_00129
1952  076D  7E          	ld	a, (hl)
1953  076E  C6 0A       	add	a,0x0a
1954  0770  77          	ld	(hl), a
1955  0771  CD 00 00    	call	_game_update_stats
1956  0774  18 3C       	jr	l_player_pick_item_00129
1957  0776              l_player_pick_item_00116:
1958  0776  21 00 00    	ld	hl,_player_int
1959  0779  34          	inc	(hl)
1960  077A  21 00 00    	ld	hl,_player_max_mana
1961  077D  7E          	ld	a, (hl)
1962  077E  D6 C8       	sub	a,0xc8
1963  0780  30 30       	jr	NC,l_player_pick_item_00129
1964  0782  7E          	ld	a, (hl)
1965  0783  C6 0A       	add	a,0x0a
1966  0785  77          	ld	(hl), a
1967  0786  CD 00 00    	call	_game_update_stats
1968  0789  18 27       	jr	l_player_pick_item_00129
1969  078B              l_player_pick_item_00119:
1970  078B  21 00 00    	ld	hl,_player_int
1971  078E  34          	inc	(hl)
1972  078F  21 00 00    	ld	hl,_player_max_mana
1973  0792  7E          	ld	a, (hl)
1974  0793  D6 C8       	sub	a,0xc8
1975  0795  30 1B       	jr	NC,l_player_pick_item_00129
1976  0797  7E          	ld	a, (hl)
1977  0798  C6 0A       	add	a,0x0a
1978  079A  77          	ld	(hl), a
1979  079B  CD 00 00    	call	_game_update_stats
1980  079E  18 12       	jr	l_player_pick_item_00129
1981  07A0              l_player_pick_item_00122:
1982  07A0  21 00 00    	ld	hl,_player_int
1983  07A3  34          	inc	(hl)
1984  07A4  21 00 00    	ld	hl,_player_max_mana
1985  07A7  7E          	ld	a, (hl)
1986  07A8  D6 C8       	sub	a,0xc8
1987  07AA  D0          	ret	NC
1988  07AB  7E          	ld	a, (hl)
1989  07AC  C6 0A       	add	a,0x0a
1990  07AE  77          	ld	(hl), a
1991  07AF  CD 00 00    	call	_game_update_stats
1992  07B2              l_player_pick_item_00129:
1993  07B2  C9          	ret
1994  07B3              	SECTION code_compiler
1995  07B3              ;	---------------------------------
1996  07B3              ; Function player_hit_platform
1997  07B3              ; ---------------------------------
1998  07B3              _player_hit_platform:
1999  07B3  CD 00 00    	call	___sdcc_enter_ix
2000  07B6  F5          	push	af
2001  07B7  3A 00 00    	ld	a,(_player_hit_lin)
2002  07BA  B7          	or	a, a
2003  07BB  C2 26 0A    	jp	NZ, l_player_hit_platform_00144
2004  07BE  21 07 00    	ld	hl,+(_lin + 0x0007)
2005  07C1  4E          	ld	c, (hl)
2006  07C2  3E 10       	ld	a,0x10
2007  07C4  91          	sub	a, c
2008  07C5  D2 26 0A    	jp	NC, l_player_hit_platform_00144
2009  07C8  01 00 00    	ld	bc,_scr_map
2010  07CB  2A 00 00    	ld	hl,(_index1)
2011  07CE  09          	add	hl,bc
2012  07CF  7E          	ld	a,(hl)
2013  07D0  D6 45       	sub	a,0x45
2014  07D2  DA 26 0A    	jp	C, l_player_hit_platform_00144
2015  07D5  2A 00 00    	ld	hl,(_curr_time)
2016  07D8  22 0E 00    	ld	(_spr_timer + 0x000e),hl
2017  07DB  2A 07 00    	ld	hl,(_lin + 0x0007)
2018  07DE  26 00       	ld	h,0x00
2019  07E0  01 F8 FF    	ld	bc,0xfff8
2020  07E3  09          	add	hl,bc
2021  07E4  EB          	ex	de,hl
2022  07E5  06 04       	ld	b,0x04
2023  07E7              l_player_hit_platform_00249:
2024  07E7  CB 2A       	sra	d
2025  07E9  CB 1B       	rr	e
2026  07EB  10 FA       	djnz	l_player_hit_platform_00249
2027  07ED  7B          	ld	a, e
2028  07EE  07          	rlca
2029  07EF  07          	rlca
2030  07F0  07          	rlca
2031  07F1  07          	rlca
2032  07F2  E6 F0       	and	a,0xf0
2033  07F4  C6 08       	add	a,0x08
2034  07F6  32 00 00    	ld	(_player_hit_lin),a
2035  07F9  21 07 00    	ld	hl,+(_col + 0x0007)
2036  07FC  4E          	ld	c, (hl)
2037  07FD  CB 41       	bit	0, c
2038  07FF  20 06       	jr	NZ,l_player_hit_platform_00111
2039  0801  21 00 00    	ld	hl,_player_hit_col
2040  0804  71          	ld	(hl), c
2041  0805  18 2D       	jr	l_player_hit_platform_00112
2042  0807              l_player_hit_platform_00111:
2043  0807  21 07 00    	ld	hl,+(_state + 0x0007)
2044  080A  5E          	ld	e, (hl)
2045  080B  41          	ld	b, c
2046  080C  04          	inc	b
2047  080D  0D          	dec	c
2048  080E  CB 5B       	bit	3, e
2049  0810  28 12       	jr	Z,l_player_hit_platform_00108
2050  0812  3A 00 00    	ld	a,(_g_player_hit_right)
2051  0815  B7          	or	a, a
2052  0816  28 06       	jr	Z,l_player_hit_platform_00102
2053  0818  21 00 00    	ld	hl,_player_hit_col
2054  081B  70          	ld	(hl), b
2055  081C  18 16       	jr	l_player_hit_platform_00112
2056  081E              l_player_hit_platform_00102:
2057  081E  21 00 00    	ld	hl,_player_hit_col
2058  0821  71          	ld	(hl), c
2059  0822  18 10       	jr	l_player_hit_platform_00112
2060  0824              l_player_hit_platform_00108:
2061  0824  3A 00 00    	ld	a,(_g_player_hit_left)
2062  0827  B7          	or	a, a
2063  0828  28 06       	jr	Z,l_player_hit_platform_00105
2064  082A  21 00 00    	ld	hl,_player_hit_col
2065  082D  71          	ld	(hl), c
2066  082E  18 04       	jr	l_player_hit_platform_00112
2067  0830              l_player_hit_platform_00105:
2068  0830  21 00 00    	ld	hl,_player_hit_col
2069  0833  70          	ld	(hl), b
2070  0834              l_player_hit_platform_00112:
2071  0834  01 00 00    	ld	bc,_scr_map
2072  0837  2A 00 00    	ld	hl,(_index1)
2073  083A  09          	add	hl,bc
2074  083B  7E          	ld	a,(hl)
2075  083C  FE 4D       	cp	a,0x4d
2076  083E  20 3B       	jr	NZ,l_player_hit_platform_00114
2077  0840  AF          	xor	a,a
2078  0841  77          	ld	(hl),a
2079  0842  2A 00 00    	ld	hl,(_index0)
2080  0845  E5          	push	hl
2081  0846  CD 00 00    	call	_game_obj_set
2082  0849  F1          	pop	af
2083  084A  21 00 00    	ld	hl,_index1
2084  084D  7E          	ld	a, (hl)
2085  084E  E6 0F       	and	a,0x0f
2086  0850  87          	add	a, a
2087  0851  4F          	ld	c, a
2088  0852  23          	inc	hl
2089  0853  56          	ld	d,(hl)
2090  0854  2B          	dec	hl
2091  0855  7E          	ld	a, (hl)
2092  0856  06 04       	ld	b,0x04
2093  0858              l_player_hit_platform_00255:
2094  0858  CB 3A       	srl	d
2095  085A  1F          	rra
2096  085B  10 FB       	djnz	l_player_hit_platform_00255
2097  085D  07          	rlca
2098  085E  07          	rlca
2099  085F  07          	rlca
2100  0860  07          	rlca
2101  0861  E6 F0       	and	a,0xf0
2102  0863  47          	ld	b, a
2103  0864  21 00 00    	ld	hl,0x0000
2104  0867  E5          	push	hl
2105  0868  21 87 03    	ld	hl,0x0387
2106  086B  E5          	push	hl
2107  086C  79          	ld	a, c
2108  086D  48          	ld	c,b
2109  086E  47          	ld	b,a
2110  086F  C5          	push	bc
2111  0870  CD 00 00    	call	_spr_add_anim
2112  0873  F1          	pop	af
2113  0874  F1          	pop	af
2114  0875  F1          	pop	af
2115  0876  2E 01       	ld	l,0x01
2116  0878  C3 28 0A    	jp	l_player_hit_platform_00147
2117  087B              l_player_hit_platform_00114:
2118  087B  FE 5C       	cp	a,0x5c
2119  087D  28 05       	jr	Z,l_player_hit_platform_00140
2120  087F  D6 5D       	sub	a,0x5d
2121  0881  C2 1A 0A    	jp	NZ,l_player_hit_platform_00141
2122  0884              l_player_hit_platform_00140:
2123  0884  21 00 00    	ld	hl,_tmp0
2124  0887  36 00       	ld	(hl),0x00
2125  0889  3A 00 00    	ld	a,(_game_boss)
2126  088C  B7          	or	a, a
2127  088D  28 0B       	jr	Z,l_player_hit_platform_00173
2128  088F  3A 00 00    	ld	a,(_game_mush_count)
2129  0892  B7          	or	a, a
2130  0893  28 05       	jr	Z,l_player_hit_platform_00173
2131  0895  2E 00       	ld	l,0x00
2132  0897  C3 28 0A    	jp	l_player_hit_platform_00147
2133  089A              l_player_hit_platform_00173:
2134  089A              l_player_hit_platform_00137:
2135  089A  21 00 00    	ld	hl,_tmp0
2136  089D  7E          	ld	a, (hl)
2137  089E  D6 07       	sub	a,0x07
2138  08A0  D2 1A 0A    	jp	NC, l_player_hit_platform_00141
2139  08A3  4E          	ld	c,(hl)
2140  08A4  06 00       	ld	b,0x00
2141  08A6  21 00 00    	ld	hl,_mush_index
2142  08A9  09          	add	hl,bc
2143  08AA  4E          	ld	c, (hl)
2144  08AB  06 00       	ld	b,0x00
2145  08AD  2A 00 00    	ld	hl,(_index1)
2146  08B0  AF          	xor	a,a
2147  08B1  ED 42       	sbc	hl,bc
2148  08B3  C2 13 0A    	jp	NZ,l_player_hit_platform_00136
2149  08B6  3A 07 00    	ld	a,(_lin + 0x0007)
2150  08B9  07          	rlca
2151  08BA  07          	rlca
2152  08BB  07          	rlca
2153  08BC  07          	rlca
2154  08BD  E6 0F       	and	a,0x0f
2155  08BF  07          	rlca
2156  08C0  07          	rlca
2157  08C1  07          	rlca
2158  08C2  07          	rlca
2159  08C3  E6 F0       	and	a,0xf0
2160  08C5  C6 E0       	add	a,0xe0
2161  08C7  32 00 00    	ld	(_s_lin1),a
2162  08CA  3A 07 00    	ld	a,(_col + 0x0007)
2163  08CD  CB 3F       	srl	a
2164  08CF  87          	add	a, a
2165  08D0  32 00 00    	ld	(_s_col1),a
2166  08D3  21 00 00    	ld	hl,_tmp
2167  08D6  36 00       	ld	(hl),0x00
2168  08D8              l_player_hit_platform_00120:
2169  08D8  21 00 00    	ld	hl,_tmp
2170  08DB  7E          	ld	a, (hl)
2171  08DC  D6 07       	sub	a,0x07
2172  08DE  30 1C       	jr	NC,l_player_hit_platform_00122
2173  08E0  4E          	ld	c,(hl)
2174  08E1  06 00       	ld	b,0x00
2175  08E3  21 00 00    	ld	hl,_mush_index
2176  08E6  09          	add	hl,bc
2177  08E7  4E          	ld	c, (hl)
2178  08E8  06 00       	ld	b,0x00
2179  08EA  21 00 00    	ld	hl,_index1
2180  08ED  7E          	ld	a, (hl)
2181  08EE  91          	sub	a, c
2182  08EF  20 05       	jr	NZ,l_player_hit_platform_00261
2183  08F1  23          	inc	hl
2184  08F2  7E          	ld	a, (hl)
2185  08F3  90          	sub	a, b
2186  08F4  28 06       	jr	Z,l_player_hit_platform_00122
2187  08F6              l_player_hit_platform_00261:
2188  08F6  21 00 00    	ld	hl,_tmp
2189  08F9  34          	inc	(hl)
2190  08FA  18 DC       	jr	l_player_hit_platform_00120
2191  08FC              l_player_hit_platform_00122:
2192  08FC  2A 00 00    	ld	hl,(_tmp)
2193  08FF  26 00       	ld	h,0x00
2194  0901  01 00 00    	ld	bc,_mush_class
2195  0904  09          	add	hl,bc
2196  0905  7E          	ld	a,(hl)
2197  0906  FE 78       	cp	a,0x78
2198  0908  28 18       	jr	Z,l_player_hit_platform_00123
2199  090A  FE 79       	cp	a,0x79
2200  090C  28 2F       	jr	Z,l_player_hit_platform_00124
2201  090E  FE 7A       	cp	a,0x7a
2202  0910  28 5F       	jr	Z,l_player_hit_platform_00126
2203  0912  FE 7B       	cp	a,0x7b
2204  0914  28 41       	jr	Z,l_player_hit_platform_00125
2205  0916  FE 7C       	cp	a,0x7c
2206  0918  CA A5 09    	jp	Z,l_player_hit_platform_00128
2207  091B  D6 7D       	sub	a,0x7d
2208  091D  28 6C       	jr	Z,l_player_hit_platform_00127
2209  091F  C3 BD 09    	jp	l_player_hit_platform_00129
2210  0922              l_player_hit_platform_00123:
2211  0922  2E 02       	ld	l,0x02
2212  0924  CD 00 00    	call	_zx_border_fastcall
2213  0927  3A 00 00    	ld	a,(_s_col1)
2214  092A  21 06 FF    	ld	hl,0xff06
2215  092D  E5          	push	hl
2216  092E  F5          	push	af
2217  092F  33          	inc	sp
2218  0930  3A 00 00    	ld	a,(_s_lin1)
2219  0933  F5          	push	af
2220  0934  33          	inc	sp
2221  0935  CD 00 00    	call	_enemy_init
2222  0938  F1          	pop	af
2223  0939  F1          	pop	af
2224  093A  C3 BD 09    	jp	l_player_hit_platform_00129
2225  093D              l_player_hit_platform_00124:
2226  093D  2E 02       	ld	l,0x02
2227  093F  CD 00 00    	call	_zx_border_fastcall
2228  0942  3A 00 00    	ld	a,(_s_col1)
2229  0945  21 06 01    	ld	hl,0x0106
2230  0948  E5          	push	hl
2231  0949  F5          	push	af
2232  094A  33          	inc	sp
2233  094B  3A 00 00    	ld	a,(_s_lin1)
2234  094E  F5          	push	af
2235  094F  33          	inc	sp
2236  0950  CD 00 00    	call	_enemy_init
2237  0953  F1          	pop	af
2238  0954  F1          	pop	af
2239  0955  18 66       	jr	l_player_hit_platform_00129
2240  0957              l_player_hit_platform_00125:
2241  0957  2E 01       	ld	l,0x01
2242  0959  CD 00 00    	call	_zx_border_fastcall
2243  095C  3A 00 00    	ld	a,(_s_col1)
2244  095F  21 07 01    	ld	hl,0x0107
2245  0962  E5          	push	hl
2246  0963  F5          	push	af
2247  0964  33          	inc	sp
2248  0965  3A 00 00    	ld	a,(_s_lin1)
2249  0968  F5          	push	af
2250  0969  33          	inc	sp
2251  096A  CD 00 00    	call	_enemy_init
2252  096D  F1          	pop	af
2253  096E  F1          	pop	af
2254  096F  18 4C       	jr	l_player_hit_platform_00129
2255  0971              l_player_hit_platform_00126:
2256  0971  2E 01       	ld	l,0x01
2257  0973  CD 00 00    	call	_zx_border_fastcall
2258  0976  3A 00 00    	ld	a,(_s_col1)
2259  0979  21 07 FF    	ld	hl,0xff07
2260  097C  E5          	push	hl
2261  097D  F5          	push	af
2262  097E  33          	inc	sp
2263  097F  3A 00 00    	ld	a,(_s_lin1)
2264  0982  F5          	push	af
2265  0983  33          	inc	sp
2266  0984  CD 00 00    	call	_enemy_init
2267  0987  F1          	pop	af
2268  0988  F1          	pop	af
2269  0989  18 32       	jr	l_player_hit_platform_00129
2270  098B              l_player_hit_platform_00127:
2271  098B  2E 04       	ld	l,0x04
2272  098D  CD 00 00    	call	_zx_border_fastcall
2273  0990  3A 00 00    	ld	a,(_s_col1)
2274  0993  21 08 01    	ld	hl,0x0108
2275  0996  E5          	push	hl
2276  0997  F5          	push	af
2277  0998  33          	inc	sp
2278  0999  3A 00 00    	ld	a,(_s_lin1)
2279  099C  F5          	push	af
2280  099D  33          	inc	sp
2281  099E  CD 00 00    	call	_enemy_init
2282  09A1  F1          	pop	af
2283  09A2  F1          	pop	af
2284  09A3  18 18       	jr	l_player_hit_platform_00129
2285  09A5              l_player_hit_platform_00128:
2286  09A5  2E 04       	ld	l,0x04
2287  09A7  CD 00 00    	call	_zx_border_fastcall
2288  09AA  3A 00 00    	ld	a,(_s_col1)
2289  09AD  21 08 FF    	ld	hl,0xff08
2290  09B0  E5          	push	hl
2291  09B1  F5          	push	af
2292  09B2  33          	inc	sp
2293  09B3  3A 00 00    	ld	a,(_s_lin1)
2294  09B6  F5          	push	af
2295  09B7  33          	inc	sp
2296  09B8  CD 00 00    	call	_enemy_init
2297  09BB  F1          	pop	af
2298  09BC  F1          	pop	af
2299  09BD              l_player_hit_platform_00129:
2300  09BD  21 00 00    	ld	hl,_game_mush_count
2301  09C0  34          	inc	(hl)
2302  09C1  3A 00 00    	ld	a,(_game_boss)
2303  09C4  B7          	or	a, a
2304  09C5  20 4C       	jr	NZ,l_player_hit_platform_00136
2305  09C7  2A 00 00    	ld	hl,(_index1)
2306  09CA  01 F0 FF    	ld	bc,0xfff0
2307  09CD  09          	add	hl,bc
2308  09CE  01 00 00    	ld	bc,_scr_map
2309  09D1  09          	add	hl,bc
2310  09D2  36 00       	ld	(hl),0x00
2311  09D4  3E 00       	ld	a, +((_scr_map) & 0xFF)
2312  09D6  21 00 00    	ld	hl,_index1
2313  09D9  86          	add	a, (hl)
2314  09DA  DD 77 FE    	ld	(ix-2),a
2315  09DD  3E 00       	ld	a, +((_scr_map) / 256)
2316  09DF  23          	inc	hl
2317  09E0  8E          	adc	a, (hl)
2318  09E1  DD 77 FF    	ld	(ix-1),a
2319  09E4  E1          	pop	hl
2320  09E5  7E          	ld	a,(hl)
2321  09E6  E5          	push	hl
2322  09E7  D6 5C       	sub	a,0x5c
2323  09E9  20 06       	jr	NZ,l_player_hit_platform_00131
2324  09EB  E1          	pop	hl
2325  09EC  E5          	push	hl
2326  09ED  36 4F       	ld	(hl),0x4f
2327  09EF  18 04       	jr	l_player_hit_platform_00132
2328  09F1              l_player_hit_platform_00131:
2329  09F1  E1          	pop	hl
2330  09F2  E5          	push	hl
2331  09F3  36 54       	ld	(hl),0x54
2332  09F5              l_player_hit_platform_00132:
2333  09F5  2A 00 00    	ld	hl,(_index1)
2334  09F8  01 F0 FF    	ld	bc,0xfff0
2335  09FB  09          	add	hl,bc
2336  09FC  E5          	push	hl
2337  09FD  CD 00 00    	call	_game_obj_set
2338  0A00  F1          	pop	af
2339  0A01  3A 00 00    	ld	a,(_s_lin1)
2340  0A04  C6 10       	add	a,0x10
2341  0A06  4F          	ld	c, a
2342  0A07  3A 00 00    	ld	a, (_s_col1)
2343  0A0A  47          	ld	b,a
2344  0A0B  C5          	push	bc
2345  0A0C  3E 4F       	ld	a,0x4f
2346  0A0E  F5          	push	af
2347  0A0F  33          	inc	sp
2348  0A10  CD 00 00    	call	_NIRVANAP_drawT_callee
2349  0A13              l_player_hit_platform_00136:
2350  0A13  21 00 00    	ld	hl,_tmp0
2351  0A16  34          	inc	(hl)
2352  0A17  C3 9A 08    	jp	l_player_hit_platform_00137
2353  0A1A              l_player_hit_platform_00141:
2354  0A1A  2E 01       	ld	l,0x01
2355  0A1C  CD 00 00    	call	_spr_brick_anim
2356  0A1F  CD 00 00    	call	_sound_hit_brick
2357  0A22  2E 01       	ld	l,0x01
2358  0A24  18 02       	jr	l_player_hit_platform_00147
2359  0A26              l_player_hit_platform_00144:
2360  0A26  2E 00       	ld	l,0x00
2361  0A28              l_player_hit_platform_00147:
2362  0A28  F1          	pop	af
2363  0A29  DD E1       	pop	ix
2364  0A2B  C9          	ret
2365  0A2C              	SECTION code_compiler
2366  0A2C              ;	---------------------------------
2367  0A2C              ; Function player_hit_platform_clear
2368  0A2C              ; ---------------------------------
2369  0A2C              _player_hit_platform_clear:
2370  0A2C  01 04 00    	ld	bc,0x0004
2371  0A2F  C5          	push	bc
2372  0A30  2A 0E 00    	ld	hl,(_spr_timer + 0x000e)
2373  0A33  E5          	push	hl
2374  0A34  CD 00 00    	call	_game_check_time
2375  0A37  F1          	pop	af
2376  0A38  F1          	pop	af
2377  0A39  7D          	ld	a, l
2378  0A3A  B7          	or	a, a
2379  0A3B  C8          	ret	Z
2380  0A3C  2A FF FF    	ld	hl,(_player_hit_col - 1)
2381  0A3F  3A 00 00    	ld	a,(_player_hit_lin)
2382  0A42  6F          	ld	l,a
2383  0A43  E5          	push	hl
2384  0A44  CD 00 00    	call	_spr_calc_index
2385  0A47  F1          	pop	af
2386  0A48  22 00 00    	ld	(_index1),hl
2387  0A4B  2E 00       	ld	l,0x00
2388  0A4D  CD 00 00    	call	_spr_brick_anim
2389  0A50  21 00 00    	ld	hl,_player_hit_lin
2390  0A53  36 00       	ld	(hl),0x00
2391  0A55  21 00 00    	ld	hl,_player_hit_col
2392  0A58  36 00       	ld	(hl),0x00
2393  0A5A  C9          	ret
2394  0A5B              	SECTION code_compiler
2395  0A5B              ;	---------------------------------
2396  0A5B              ; Function player_score_add
2397  0A5B              ; ---------------------------------
2398  0A5B              _player_score_add:
2399  0A5B  ED 4B 00 00 	ld	bc,(_player_score)
2400  0A5F  09          	add	hl,bc
2401  0A60  22 00 00    	ld	(_player_score),hl
2402  0A63  21 00 00    	ld	hl,_player_lvl
2403  0A66  7E          	ld	a, (hl)
2404  0A67  D6 14       	sub	a,0x14
2405  0A69  30 3C       	jr	NC,l_player_score_add_00104
2406  0A6B  01 00 00    	ld	bc,_player_lvl_table+0
2407  0A6E  6E          	ld	l,(hl)
2408  0A6F  26 00       	ld	h,0x00
2409  0A71  29          	add	hl, hl
2410  0A72  09          	add	hl, bc
2411  0A73  4E          	ld	c, (hl)
2412  0A74  23          	inc	hl
2413  0A75  46          	ld	b, (hl)
2414  0A76  21 00 00    	ld	hl,_player_score
2415  0A79  7E          	ld	a, (hl)
2416  0A7A  91          	sub	a, c
2417  0A7B  23          	inc	hl
2418  0A7C  7E          	ld	a, (hl)
2419  0A7D  98          	sbc	a, b
2420  0A7E  38 27       	jr	C,l_player_score_add_00104
2421  0A80  21 00 00    	ld	hl,_player_lvl
2422  0A83  34          	inc	(hl)
2423  0A84  21 00 00    	ld	hl,___str_0
2424  0A87  E5          	push	hl
2425  0A88  21 0C 0C    	ld	hl,0x0c0c
2426  0A8B  E5          	push	hl
2427  0A8C  CD 00 00    	call	_zx_print_str
2428  0A8F  AF          	xor	a, a
2429  0A90  F5          	push	af
2430  0A91  33          	inc	sp
2431  0A92  21 19 00    	ld	hl,0x0019
2432  0A95  E5          	push	hl
2433  0A96  21 0C 15    	ld	hl,0x150c
2434  0A99  E5          	push	hl
2435  0A9A  3E 0C       	ld	a,0x0c
2436  0A9C  F5          	push	af
2437  0A9D  33          	inc	sp
2438  0A9E  CD 00 00    	call	_game_colour_message
2439  0AA1  F1          	pop	af
2440  0AA2  F1          	pop	af
2441  0AA3  F1          	pop	af
2442  0AA4  CD 00 00    	call	_game_update_stats
2443  0AA7              l_player_score_add_00104:
2444  0AA7  3A 00 00    	ld	a,(_game_score_top)
2445  0AAA  21 00 00    	ld	hl,_player_score
2446  0AAD  96          	sub	a, (hl)
2447  0AAE  3A 01 00    	ld	a,(_game_score_top + 1)
2448  0AB1  23          	inc	hl
2449  0AB2  9E          	sbc	a, (hl)
2450  0AB3  30 06       	jr	NC,l_player_score_add_00106
2451  0AB5  2A 00 00    	ld	hl,(_player_score)
2452  0AB8  22 00 00    	ld	(_game_score_top),hl
2453  0ABB              l_player_score_add_00106:
2454  0ABB  CD 00 00    	call	_game_print_score
2455  0ABE  C9          	ret
2456  0ABF              	SECTION rodata_compiler
2457  0000              ___str_0:
2458  0000  4C 45 56 45 4C 20 55 50 21 
                        	DEFM "LEVEL UP!"
2459  0009  00          	DEFB 0x00
2460  000A              	SECTION code_compiler
2461  0ABF              ;	---------------------------------
2462  0ABF              ; Function player_check_floor
2463  0ABF              ; ---------------------------------
2464  0ABF              _player_check_floor:
2465  0ABF  CD 00 00    	call	___sdcc_enter_ix
2466  0AC2  F5          	push	af
2467  0AC3  F5          	push	af
2468  0AC4  11 07 00    	ld	de,_col+7
2469  0AC7  1A          	ld	a, (de)
2470  0AC8  47          	ld	b, a
2471  0AC9  3A 07 00    	ld	a,(_lin + 0x0007)
2472  0ACC  C6 10       	add	a,0x10
2473  0ACE  D5          	push	de
2474  0ACF  4F          	ld	c,a
2475  0AD0  C5          	push	bc
2476  0AD1  CD 00 00    	call	_spr_calc_index
2477  0AD4  F1          	pop	af
2478  0AD5  D1          	pop	de
2479  0AD6  4D          	ld	c,l
2480  0AD7  44          	ld	b,h
2481  0AD8  21 00 00    	ld	hl,_scr_map
2482  0ADB  09          	add	hl,bc
2483  0ADC  DD 75 FE    	ld	(ix-2),l
2484  0ADF  DD 74 FF    	ld	(ix-1),h
2485  0AE2  7E          	ld	a, (hl)
2486  0AE3  DD 77 FD    	ld	(ix-3),a
2487  0AE6  03          	inc	bc
2488  0AE7  21 00 00    	ld	hl,_scr_map
2489  0AEA  09          	add	hl,bc
2490  0AEB  3A 00 00    	ld	a,(_s_lin0)
2491  0AEE  D6 90       	sub	a,0x90
2492  0AF0  4D          	ld	c,l
2493  0AF1  44          	ld	b,h
2494  0AF2  20 26       	jr	NZ,l_player_check_floor_00108
2495  0AF4  3A 00 00    	ld	a,(_map_heigth)
2496  0AF7  C5          	push	bc
2497  0AF8  F5          	push	af
2498  0AF9  33          	inc	sp
2499  0AFA  3A 00 00    	ld	a,(_scr_curr)
2500  0AFD  F5          	push	af
2501  0AFE  33          	inc	sp
2502  0AFF  CD 00 00    	call	__divuchar_callee
2503  0B02  C1          	pop	bc
2504  0B03  7D          	ld	a,l
2505  0B04  3C          	inc	a
2506  0B05  32 00 00    	ld	(_tmp1),a
2507  0B08  21 00 00    	ld	hl,_map_heigth
2508  0B0B  96          	sub	a, (hl)
2509  0B0C  30 06       	jr	NC,l_player_check_floor_00102
2510  0B0E  DD 36 FD 00 	ld	(ix-3),0x00
2511  0B12  18 14       	jr	l_player_check_floor_00109
2512  0B14              l_player_check_floor_00102:
2513  0B14  DD 36 FD 48 	ld	(ix-3),0x48
2514  0B18  18 0E       	jr	l_player_check_floor_00109
2515  0B1A              l_player_check_floor_00108:
2516  0B1A  1A          	ld	a, (de)
2517  0B1B  0F          	rrca
2518  0B1C  38 06       	jr	C,l_player_check_floor_00105
2519  0B1E  DD 36 FC 00 	ld	(ix-4),0x00
2520  0B22  18 04       	jr	l_player_check_floor_00109
2521  0B24              l_player_check_floor_00105:
2522  0B24  0A          	ld	a, (bc)
2523  0B25  DD 77 FC    	ld	(ix-4),a
2524  0B28              l_player_check_floor_00109:
2525  0B28  DD 7E FD    	ld	a,(ix-3)
2526  0B2B  D6 3C       	sub	a,0x3c
2527  0B2D  38 07       	jr	C,l_player_check_floor_00132
2528  0B2F  DD 7E FD    	ld	a,(ix-3)
2529  0B32  D6 60       	sub	a,0x60
2530  0B34  38 32       	jr	C,l_player_check_floor_00128
2531  0B36              l_player_check_floor_00132:
2532  0B36  DD 7E FC    	ld	a,(ix-4)
2533  0B39  D6 3C       	sub	a,0x3c
2534  0B3B  38 07       	jr	C,l_player_check_floor_00127
2535  0B3D  DD 7E FC    	ld	a,(ix-4)
2536  0B40  D6 60       	sub	a,0x60
2537  0B42  38 24       	jr	C,l_player_check_floor_00128
2538  0B44              l_player_check_floor_00127:
2539  0B44  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
2540  0B47  36 02       	ld	(hl),0x02
2541  0B49  21 00 00    	ld	hl,_s_state
2542  0B4C  CB CE       	set	1, (hl)
2543  0B4E  2E 00       	ld	l,0x00
2544  0B50  CD 40 03    	call	_player_check_stairs
2545  0B53  3A 00 00    	ld	a,(_player_over_stair)
2546  0B56  B7          	or	a, a
2547  0B57  C2 E7 0B    	jp	NZ, l_player_check_floor_00133
2548  0B5A  3A 00 00    	ld	a,(_s_lin0)
2549  0B5D  D6 90       	sub	a,0x90
2550  0B5F  C2 E7 0B    	jp	NZ,l_player_check_floor_00133
2551  0B62  CD 00 00    	call	_spr_page_down
2552  0B65  C3 E7 0B    	jp	l_player_check_floor_00133
2553  0B68              l_player_check_floor_00128:
2554  0B68  C5          	push	bc
2555  0B69  21 10 00    	ld	hl,0x0010
2556  0B6C  E5          	push	hl
2557  0B6D  2A 00 00    	ld	hl,(_player_brick_time)
2558  0B70  E5          	push	hl
2559  0B71  CD 00 00    	call	_game_check_time
2560  0B74  F1          	pop	af
2561  0B75  F1          	pop	af
2562  0B76  C1          	pop	bc
2563  0B77  7D          	ld	a,l
2564  0B78  B7          	or	a, a
2565  0B79  28 6C       	jr	Z,l_player_check_floor_00133
2566  0B7B  2A 00 00    	ld	hl,(_curr_time)
2567  0B7E  22 00 00    	ld	(_player_brick_time),hl
2568  0B81  DD 7E FD    	ld	a,(ix-3)
2569  0B84  D6 40       	sub	a,0x40
2570  0B86  20 0D       	jr	NZ,l_player_check_floor_00114
2571  0B88  DD 6E FE    	ld	l,(ix-2)
2572  0B8B  DD 66 FF    	ld	h,(ix-1)
2573  0B8E  36 00       	ld	(hl),0x00
2574  0B90  C5          	push	bc
2575  0B91  CD EC 0B    	call	_player_gasta_brick
2576  0B94  C1          	pop	bc
2577  0B95              l_player_check_floor_00114:
2578  0B95  DD 7E FD    	ld	a,(ix-3)
2579  0B98  D6 3F       	sub	a,0x3f
2580  0B9A  20 0D       	jr	NZ,l_player_check_floor_00116
2581  0B9C  DD 6E FE    	ld	l,(ix-2)
2582  0B9F  DD 66 FF    	ld	h,(ix-1)
2583  0BA2  36 40       	ld	(hl),0x40
2584  0BA4  C5          	push	bc
2585  0BA5  CD EC 0B    	call	_player_gasta_brick
2586  0BA8  C1          	pop	bc
2587  0BA9              l_player_check_floor_00116:
2588  0BA9  DD 7E FD    	ld	a,(ix-3)
2589  0BAC  D6 3E       	sub	a,0x3e
2590  0BAE  20 0D       	jr	NZ,l_player_check_floor_00118
2591  0BB0  DD 6E FE    	ld	l,(ix-2)
2592  0BB3  DD 66 FF    	ld	h,(ix-1)
2593  0BB6  36 3F       	ld	(hl),0x3f
2594  0BB8  C5          	push	bc
2595  0BB9  CD EC 0B    	call	_player_gasta_brick
2596  0BBC  C1          	pop	bc
2597  0BBD              l_player_check_floor_00118:
2598  0BBD  DD 7E FC    	ld	a,(ix-4)
2599  0BC0  D6 40       	sub	a,0x40
2600  0BC2  20 07       	jr	NZ,l_player_check_floor_00120
2601  0BC4  AF          	xor	a, a
2602  0BC5  02          	ld	(bc), a
2603  0BC6  C5          	push	bc
2604  0BC7  CD EC 0B    	call	_player_gasta_brick
2605  0BCA  C1          	pop	bc
2606  0BCB              l_player_check_floor_00120:
2607  0BCB  DD 7E FC    	ld	a,(ix-4)
2608  0BCE  D6 3F       	sub	a,0x3f
2609  0BD0  20 08       	jr	NZ,l_player_check_floor_00122
2610  0BD2  3E 40       	ld	a,0x40
2611  0BD4  02          	ld	(bc), a
2612  0BD5  C5          	push	bc
2613  0BD6  CD EC 0B    	call	_player_gasta_brick
2614  0BD9  C1          	pop	bc
2615  0BDA              l_player_check_floor_00122:
2616  0BDA  DD 7E FC    	ld	a,(ix-4)
2617  0BDD  D6 3E       	sub	a,0x3e
2618  0BDF  20 06       	jr	NZ,l_player_check_floor_00133
2619  0BE1  3E 3F       	ld	a,0x3f
2620  0BE3  02          	ld	(bc), a
2621  0BE4  CD EC 0B    	call	_player_gasta_brick
2622  0BE7              l_player_check_floor_00133:
2623  0BE7  DD F9       	ld	sp, ix
2624  0BE9  DD E1       	pop	ix
2625  0BEB  C9          	ret
2626  0BEC              	SECTION code_compiler
2627  0BEC              ;	---------------------------------
2628  0BEC              ; Function player_gasta_brick
2629  0BEC              ; ---------------------------------
2630  0BEC              _player_gasta_brick:
2631  0BEC  3A 00 00    	ld	a,(_s_lin0)
2632  0BEF  32 00 00    	ld	(_s_lin1),a
2633  0BF2  3A 00 00    	ld	a,(_s_col0)
2634  0BF5  32 00 00    	ld	(_s_col1),a
2635  0BF8  3A 07 00    	ld	a,(_lin + 0x0007)
2636  0BFB  C6 10       	add	a,0x10
2637  0BFD  32 00 00    	ld	(_s_lin0),a
2638  0C00  3A 07 00    	ld	a,(_col + 0x0007)
2639  0C03  32 00 00    	ld	(_s_col0),a
2640  0C06  CD 00 00    	call	_spr_back_repaint
2641  0C09  3A 00 00    	ld	a,(_s_lin1)
2642  0C0C  32 00 00    	ld	(_s_lin0),a
2643  0C0F  3A 00 00    	ld	a,(_s_col1)
2644  0C12  32 00 00    	ld	(_s_col0),a
2645  0C15  C9          	ret
2646  0C16              	SECTION code_compiler
2647  0C16              ;	---------------------------------
2648  0C16              ; Function player_move_jump
2649  0C16              ; ---------------------------------
2650  0C16              _player_move_jump:
2651  0C16  CD 00 00    	call	___sdcc_enter_ix
2652  0C19  F5          	push	af
2653  0C1A  21 00 00    	ld	hl,_game_gravity
2654  0C1D  4E          	ld	c, (hl)
2655  0C1E  21 00 00    	ld	hl,_player_vel_y
2656  0C21  7E          	ld	a, (hl)
2657  0C22  81          	add	a, c
2658  0C23  77          	ld	(hl), a
2659  0C24  21 00 00    	ld	hl,_sprite_on_air
2660  0C27  36 01       	ld	(hl),0x01
2661  0C29  3A 00 00    	ld	a,(_player_vel_inc)
2662  0C2C  B7          	or	a, a
2663  0C2D  28 2B       	jr	Z,l_player_move_jump_00107
2664  0C2F  21 00 00    	ld	hl,_dirs
2665  0C32  CB 7E       	bit	7, (hl)
2666  0C34  28 07       	jr	Z,l_player_move_jump_00104
2667  0C36  21 00 00    	ld	hl,_dirs
2668  0C39  CB 46       	bit	0, (hl)
2669  0C3B  20 1D       	jr	NZ,l_player_move_jump_00107
2670  0C3D              l_player_move_jump_00104:
2671  0C3D  3A 00 00    	ld	a,(_player_vel_y1)
2672  0C40  21 00 00    	ld	hl,_player_vel_y
2673  0C43  96          	sub	a, (hl)
2674  0C44  E2 49 0C    	jp	PO, l_player_move_jump_00263
2675  0C47  EE 80       	xor	a,0x80
2676  0C49              l_player_move_jump_00263:
2677  0C49  F2 5A 0C    	jp	P, l_player_move_jump_00107
2678  0C4C  21 00 00    	ld	hl,_player_vel_y
2679  0C4F  CB 7E       	bit	7,(hl)
2680  0C51  28 07       	jr	Z,l_player_move_jump_00107
2681  0C53  36 00       	ld	(hl),0x00
2682  0C55  21 00 00    	ld	hl,_player_vel_inc
2683  0C58  36 00       	ld	(hl),0x00
2684  0C5A              l_player_move_jump_00107:
2685  0C5A  3E 78       	ld	a,0x78
2686  0C5C  21 00 00    	ld	hl,_player_vel_y
2687  0C5F  96          	sub	a, (hl)
2688  0C60  E2 65 0C    	jp	PO, l_player_move_jump_00264
2689  0C63  EE 80       	xor	a,0x80
2690  0C65              l_player_move_jump_00264:
2691  0C65  F2 6D 0C    	jp	P, l_player_move_jump_00109
2692  0C68  21 00 00    	ld	hl,_player_vel_y
2693  0C6B  36 78       	ld	(hl),0x78
2694  0C6D              l_player_move_jump_00109:
2695  0C6D  21 00 00    	ld	hl,_player_vel_y
2696  0C70  7E          	ld	a, (hl)
2697  0C71  EE 80       	xor	a,0x80
2698  0C73  D6 08       	sub	a,0x08
2699  0C75  30 02       	jr	NC,l_player_move_jump_00111
2700  0C77  36 88       	ld	(hl),0x88
2701  0C79              l_player_move_jump_00111:
2702  0C79  21 00 00    	ld	hl,_player_vel_y
2703  0C7C  7E          	ld	a, (hl)
2704  0C7D  DD 77 FE    	ld	(ix-2),a
2705  0C80  7E          	ld	a, (hl)
2706  0C81  17          	rla
2707  0C82  9F          	sbc	a, a
2708  0C83  DD 77 FF    	ld	(ix-1),a
2709  0C86  DD 7E FE    	ld	a,(ix-2)
2710  0C89  CB 47       	bit	0,a
2711  0C8B  32 00 00    	ld	(_s_lin1),a
2712  0C8E  28 04       	jr	Z,l_player_move_jump_00113
2713  0C90  21 00 00    	ld	hl,_s_lin1
2714  0C93  35          	dec	(hl)
2715  0C94              l_player_move_jump_00113:
2716  0C94  3A 07 00    	ld	a,(_lin + 0x0007)
2717  0C97  21 00 00    	ld	hl,_s_lin1
2718  0C9A  86          	add	a, (hl)
2719  0C9B  77          	ld	(hl), a
2720  0C9C  3E 90       	ld	a,0x90
2721  0C9E  96          	sub	a, (hl)
2722  0C9F  30 2B       	jr	NC,l_player_move_jump_00124
2723  0CA1  3E C8       	ld	a,0xc8
2724  0CA3  96          	sub	a, (hl)
2725  0CA4  30 13       	jr	NC,l_player_move_jump_00121
2726  0CA6  CD 00 00    	call	_spr_page_up
2727  0CA9  7D          	ld	a, l
2728  0CAA  B7          	or	a, a
2729  0CAB  28 05       	jr	Z,l_player_move_jump_00115
2730  0CAD  2E 00       	ld	l,0x00
2731  0CAF  C3 2A 0E    	jp	l_player_move_jump_00158
2732  0CB2              l_player_move_jump_00115:
2733  0CB2  21 00 00    	ld	hl,_s_lin1
2734  0CB5  36 00       	ld	(hl),0x00
2735  0CB7  18 13       	jr	l_player_move_jump_00124
2736  0CB9              l_player_move_jump_00121:
2737  0CB9  CD 00 00    	call	_spr_page_down
2738  0CBC  7D          	ld	a, l
2739  0CBD  B7          	or	a, a
2740  0CBE  28 07       	jr	Z,l_player_move_jump_00118
2741  0CC0  21 00 00    	ld	hl,_s_lin1
2742  0CC3  36 10       	ld	(hl),0x10
2743  0CC5  18 05       	jr	l_player_move_jump_00124
2744  0CC7              l_player_move_jump_00118:
2745  0CC7  21 00 00    	ld	hl,_s_lin1
2746  0CCA  36 90       	ld	(hl),0x90
2747  0CCC              l_player_move_jump_00124:
2748  0CCC  3A 00 00    	ld	a,(_s_lin0)
2749  0CCF  07          	rlca
2750  0CD0  07          	rlca
2751  0CD1  07          	rlca
2752  0CD2  07          	rlca
2753  0CD3  E6 0F       	and	a,0x0f
2754  0CD5  4F          	ld	c, a
2755  0CD6  DD CB FF 7E 	bit	7,(ix-1)
2756  0CDA  28 62       	jr	Z,l_player_move_jump_00147
2757  0CDC  21 00 00    	ld	hl,_s_state
2758  0CDF  7E          	ld	a,(hl)
2759  0CE0  F6 01       	or	a,0x01
2760  0CE2  E6 FD       	and	a,0xfd
2761  0CE4  77          	ld	(hl),a
2762  0CE5  21 00 00    	ld	hl,_s_lin1
2763  0CE8  46          	ld	b, (hl)
2764  0CE9  79          	ld	a, c
2765  0CEA  90          	sub	a, b
2766  0CEB  20 04       	jr	NZ,l_player_move_jump_00266
2767  0CED  3E 01       	ld	a,0x01
2768  0CEF  18 01       	jr	l_player_move_jump_00267
2769  0CF1              l_player_move_jump_00266:
2770  0CF1  AF          	xor	a,a
2771  0CF2              l_player_move_jump_00267:
2772  0CF2  EE 01       	xor	a,0x01
2773  0CF4  4F          	ld	c,a
2774  0CF5  B7          	or	a, a
2775  0CF6  28 3D       	jr	Z,l_player_move_jump_00131
2776  0CF8  21 07 00    	ld	hl,+(_col + 0x0007)
2777  0CFB  46          	ld	b, (hl)
2778  0CFC  C5          	push	bc
2779  0CFD  33          	inc	sp
2780  0CFE  3A 00 00    	ld	a,(_s_lin1)
2781  0D01  F5          	push	af
2782  0D02  33          	inc	sp
2783  0D03  CD 00 00    	call	_game_check_map
2784  0D06  F1          	pop	af
2785  0D07  7C          	ld	a,h
2786  0D08  B5          	or	a,l
2787  0D09  28 21       	jr	Z,l_player_move_jump_00128
2788  0D0B  CD B3 07    	call	_player_hit_platform
2789  0D0E  7D          	ld	a, l
2790  0D0F  B7          	or	a, a
2791  0D10  28 12       	jr	Z,l_player_move_jump_00126
2792  0D12  3A 07 00    	ld	a,(_lin + 0x0007)
2793  0D15  07          	rlca
2794  0D16  07          	rlca
2795  0D17  07          	rlca
2796  0D18  07          	rlca
2797  0D19  E6 0F       	and	a,0x0f
2798  0D1B  07          	rlca
2799  0D1C  07          	rlca
2800  0D1D  07          	rlca
2801  0D1E  07          	rlca
2802  0D1F  E6 F0       	and	a,0xf0
2803  0D21  32 07 00    	ld	((_lin + 0x0007)),a
2804  0D24              l_player_move_jump_00126:
2805  0D24  21 00 00    	ld	hl,_player_vel_y
2806  0D27  36 00       	ld	(hl),0x00
2807  0D29  C3 EC 0D    	jp	l_player_move_jump_00148
2808  0D2C              l_player_move_jump_00128:
2809  0D2C  3A 00 00    	ld	a,(_s_lin1)
2810  0D2F  32 07 00    	ld	((_lin + 0x0007)),a
2811  0D32  C3 EC 0D    	jp	l_player_move_jump_00148
2812  0D35              l_player_move_jump_00131:
2813  0D35  3A 00 00    	ld	a,(_s_lin1)
2814  0D38  32 07 00    	ld	((_lin + 0x0007)),a
2815  0D3B  C3 EC 0D    	jp	l_player_move_jump_00148
2816  0D3E              l_player_move_jump_00147:
2817  0D3E  21 00 00    	ld	hl,_s_state
2818  0D41  7E          	ld	a,(hl)
2819  0D42  F6 02       	or	a,0x02
2820  0D44  E6 FE       	and	a,0xfe
2821  0D46  77          	ld	(hl),a
2822  0D47  21 00 00    	ld	hl,_s_lin1
2823  0D4A  7E          	ld	a, (hl)
2824  0D4B  C6 10       	add	a,0x10
2825  0D4D  77          	ld	(hl),a
2826  0D4E  47          	ld	b,a
2827  0D4F  79          	ld	a, c
2828  0D50  90          	sub	a, b
2829  0D51  20 04       	jr	NZ,l_player_move_jump_00268
2830  0D53  3E 01       	ld	a,0x01
2831  0D55  18 01       	jr	l_player_move_jump_00269
2832  0D57              l_player_move_jump_00268:
2833  0D57  AF          	xor	a,a
2834  0D58              l_player_move_jump_00269:
2835  0D58  EE 01       	xor	a,0x01
2836  0D5A  4F          	ld	c,a
2837  0D5B  B7          	or	a, a
2838  0D5C  CA DF 0D    	jp	Z, l_player_move_jump_00144
2839  0D5F  21 07 00    	ld	hl,+(_col + 0x0007)
2840  0D62  46          	ld	b, (hl)
2841  0D63  C5          	push	bc
2842  0D64  33          	inc	sp
2843  0D65  3A 00 00    	ld	a,(_s_lin1)
2844  0D68  F5          	push	af
2845  0D69  33          	inc	sp
2846  0D6A  CD 00 00    	call	_game_check_map
2847  0D6D  F1          	pop	af
2848  0D6E  45          	ld	b, l
2849  0D6F  5C          	ld	e, h
2850  0D70  21 00 00    	ld	hl,_s_lin1
2851  0D73  7E          	ld	a, (hl)
2852  0D74  C6 F0       	add	a,0xf0
2853  0D76  4F          	ld	c, a
2854  0D77  7B          	ld	a, e
2855  0D78  B0          	or	a,b
2856  0D79  28 58       	jr	Z,l_player_move_jump_00141
2857  0D7B  71          	ld	(hl), c
2858  0D7C  2E 00       	ld	l,0x00
2859  0D7E  CD 40 03    	call	_player_check_stairs
2860  0D81  3A 00 00    	ld	a,(_player_over_stair)
2861  0D84  B7          	or	a, a
2862  0D85  20 05       	jr	NZ,l_player_move_jump_00134
2863  0D87  2E 01       	ld	l,0x01
2864  0D89  CD 40 03    	call	_player_check_stairs
2865  0D8C              l_player_move_jump_00134:
2866  0D8C  3A 00 00    	ld	a,(_player_over_stair)
2867  0D8F  B7          	or	a, a
2868  0D90  20 2C       	jr	NZ,l_player_move_jump_00139
2869  0D92  21 00 00    	ld	hl,_s_lin1
2870  0D95  7E          	ld	a, (hl)
2871  0D96  07          	rlca
2872  0D97  07          	rlca
2873  0D98  07          	rlca
2874  0D99  07          	rlca
2875  0D9A  E6 0F       	and	a,0x0f
2876  0D9C  07          	rlca
2877  0D9D  07          	rlca
2878  0D9E  07          	rlca
2879  0D9F  07          	rlca
2880  0DA0  E6 F0       	and	a,0xf0
2881  0DA2  77          	ld	(hl), a
2882  0DA3  21 07 00    	ld	hl,+(_lin + 0x0007)
2883  0DA6  4E          	ld	c, (hl)
2884  0DA7  21 00 00    	ld	hl,_s_lin1
2885  0DAA  7E          	ld	a, (hl)
2886  0DAB  91          	sub	a, c
2887  0DAC  30 0A       	jr	NC,l_player_move_jump_00136
2888  0DAE  7E          	ld	a, (hl)
2889  0DAF  C6 10       	add	a,0x10
2890  0DB1  32 07 00    	ld	((_lin + 0x0007)),a
2891  0DB4  2E 00       	ld	l,0x00
2892  0DB6  18 72       	jr	l_player_move_jump_00158
2893  0DB8              l_player_move_jump_00136:
2894  0DB8  3A 00 00    	ld	a,(_s_lin1)
2895  0DBB  32 07 00    	ld	((_lin + 0x0007)),a
2896  0DBE              l_player_move_jump_00139:
2897  0DBE  21 00 00    	ld	hl,_player_vel_y
2898  0DC1  36 00       	ld	(hl),0x00
2899  0DC3  21 00 00    	ld	hl,_s_state
2900  0DC6  7E          	ld	a,(hl)
2901  0DC7  E6 FC       	and	a,+(0xfd&0xfe)
2902  0DC9  77          	ld	(hl),a
2903  0DCA  21 07 00    	ld	hl, +(_colint + 0x0007)
2904  0DCD  36 00       	ld	(hl),0x00
2905  0DCF  2E 01       	ld	l,0x01
2906  0DD1  18 57       	jr	l_player_move_jump_00158
2907  0DD3              l_player_move_jump_00141:
2908  0DD3  21 00 00    	ld	hl,_s_lin1
2909  0DD6  71          	ld	(hl), c
2910  0DD7  3A 00 00    	ld	a,(_s_lin1)
2911  0DDA  32 07 00    	ld	((_lin + 0x0007)),a
2912  0DDD  18 0D       	jr	l_player_move_jump_00148
2913  0DDF              l_player_move_jump_00144:
2914  0DDF  21 00 00    	ld	hl,_s_lin1
2915  0DE2  7E          	ld	a, (hl)
2916  0DE3  C6 F0       	add	a,0xf0
2917  0DE5  77          	ld	(hl), a
2918  0DE6  3A 00 00    	ld	a,(_s_lin1)
2919  0DE9  32 07 00    	ld	((_lin + 0x0007)),a
2920  0DEC              l_player_move_jump_00148:
2921  0DEC  21 00 00    	ld	hl,_s_state
2922  0DEF  CB 5E       	bit	3, (hl)
2923  0DF1  20 27       	jr	NZ,l_player_move_jump_00154
2924  0DF3  21 00 00    	ld	hl,_s_state
2925  0DF6  CB 56       	bit	2, (hl)
2926  0DF8  20 20       	jr	NZ,l_player_move_jump_00154
2927  0DFA  21 00 00    	ld	hl,_dirs
2928  0DFD  CB 56       	bit	2, (hl)
2929  0DFF  28 09       	jr	Z,l_player_move_jump_00150
2930  0E01  21 00 00    	ld	hl,_s_state
2931  0E04  7E          	ld	a,(hl)
2932  0E05  F6 08       	or	a,0x08
2933  0E07  E6 FB       	and	a,0xfb
2934  0E09  77          	ld	(hl),a
2935  0E0A              l_player_move_jump_00150:
2936  0E0A  21 00 00    	ld	hl,_dirs
2937  0E0D  CB 5E       	bit	3, (hl)
2938  0E0F  28 09       	jr	Z,l_player_move_jump_00154
2939  0E11  21 00 00    	ld	hl,_s_state
2940  0E14  7E          	ld	a,(hl)
2941  0E15  F6 04       	or	a,0x04
2942  0E17  E6 F7       	and	a,0xf7
2943  0E19  77          	ld	(hl),a
2944  0E1A              l_player_move_jump_00154:
2945  0E1A  CD 00 00    	call	_spr_move_horizontal
2946  0E1D  7D          	ld	a, l
2947  0E1E  B7          	or	a, a
2948  0E1F  28 07       	jr	Z,l_player_move_jump_00157
2949  0E21  21 00 00    	ld	hl,_s_state
2950  0E24  7E          	ld	a,(hl)
2951  0E25  E6 F3       	and	a,+(0xf7&0xfb)
2952  0E27  77          	ld	(hl),a
2953  0E28              l_player_move_jump_00157:
2954  0E28  2E 00       	ld	l,0x00
2955  0E2A              l_player_move_jump_00158:
2956  0E2A  F1          	pop	af
2957  0E2B  DD E1       	pop	ix
2958  0E2D  C9          	ret
2959  0E2E              	SECTION code_compiler
2960  0E2E              ;	---------------------------------
2961  0E2E              ; Function player_open_door
2962  0E2E              ; ---------------------------------
2963  0E2E              _player_open_door:
2964  0E2E  CD 00 00    	call	___sdcc_enter_ix
2965  0E31  0E 00       	ld	c,0x00
2966  0E33  DD 7E 06    	ld	a,(ix+6)
2967  0E36  D6 48       	sub	a,0x48
2968  0E38  28 17       	jr	Z,l_player_open_door_00101
2969  0E3A  DD 7E 06    	ld	a,(ix+6)
2970  0E3D  D6 49       	sub	a,0x49
2971  0E3F  28 1F       	jr	Z,l_player_open_door_00104
2972  0E41  DD 7E 06    	ld	a,(ix+6)
2973  0E44  D6 4A       	sub	a,0x4a
2974  0E46  28 27       	jr	Z,l_player_open_door_00107
2975  0E48  DD 7E 06    	ld	a,(ix+6)
2976  0E4B  D6 4B       	sub	a,0x4b
2977  0E4D  28 2F       	jr	Z,l_player_open_door_00110
2978  0E4F  18 3A       	jr	l_player_open_door_00113
2979  0E51              l_player_open_door_00101:
2980  0E51  3A 00 00    	ld	a,(_player_keys)
2981  0E54  B7          	or	a, a
2982  0E55  28 34       	jr	Z,l_player_open_door_00113
2983  0E57  2E 07       	ld	l,0x07
2984  0E59  CD 00 00    	call	_zx_border_fastcall
2985  0E5C  0E 01       	ld	c,0x01
2986  0E5E  18 2B       	jr	l_player_open_door_00113
2987  0E60              l_player_open_door_00104:
2988  0E60  3A 01 00    	ld	a,(_player_keys + 0x0001)
2989  0E63  B7          	or	a, a
2990  0E64  28 25       	jr	Z,l_player_open_door_00113
2991  0E66  2E 02       	ld	l,0x02
2992  0E68  CD 00 00    	call	_zx_border_fastcall
2993  0E6B  0E 01       	ld	c,0x01
2994  0E6D  18 1C       	jr	l_player_open_door_00113
2995  0E6F              l_player_open_door_00107:
2996  0E6F  3A 02 00    	ld	a,(_player_keys + 0x0002)
2997  0E72  B7          	or	a, a
2998  0E73  28 16       	jr	Z,l_player_open_door_00113
2999  0E75  2E 04       	ld	l,0x04
3000  0E77  CD 00 00    	call	_zx_border_fastcall
3001  0E7A  0E 01       	ld	c,0x01
3002  0E7C  18 0D       	jr	l_player_open_door_00113
3003  0E7E              l_player_open_door_00110:
3004  0E7E  3A 03 00    	ld	a,(_player_keys + 0x0003)
3005  0E81  B7          	or	a, a
3006  0E82  28 07       	jr	Z,l_player_open_door_00113
3007  0E84  2E 05       	ld	l,0x05
3008  0E86  CD 00 00    	call	_zx_border_fastcall
3009  0E89  0E 01       	ld	c,0x01
3010  0E8B              l_player_open_door_00113:
3011  0E8B  79          	ld	a, c
3012  0E8C  B7          	or	a, a
3013  0E8D  20 06       	jr	NZ,l_player_open_door_00114
3014  0E8F  3A 00 00    	ld	a,(_game_inmune)
3015  0E92  B7          	or	a, a
3016  0E93  28 24       	jr	Z,l_player_open_door_00117
3017  0E95              l_player_open_door_00114:
3018  0E95  3E 00       	ld	a, +((_scr_map) & 0xFF)
3019  0E97  DD 86 04    	add	a,(ix+4)
3020  0E9A  4F          	ld	c, a
3021  0E9B  3E 00       	ld	a, +((_scr_map) / 256)
3022  0E9D  DD 8E 05    	adc	a,(ix+5)
3023  0EA0  47          	ld	b, a
3024  0EA1  AF          	xor	a, a
3025  0EA2  02          	ld	(bc), a
3026  0EA3  DD 6E 04    	ld	l,(ix+4)
3027  0EA6  DD 66 05    	ld	h,(ix+5)
3028  0EA9  E5          	push	hl
3029  0EAA  CD 00 00    	call	_game_obj_set
3030  0EAD  F1          	pop	af
3031  0EAE  DD 6E 04    	ld	l,(ix+4)
3032  0EB1  DD 66 05    	ld	h,(ix+5)
3033  0EB4  E5          	push	hl
3034  0EB5  CD 00 00    	call	_spr_draw_index
3035  0EB8  F1          	pop	af
3036  0EB9              l_player_open_door_00117:
3037  0EB9  DD E1       	pop	ix
3038  0EBB  C9          	ret
3039  0EBC              	SECTION code_compiler
3040  0EBC              ;	---------------------------------
3041  0EBC              ; Function player_lost_life
3042  0EBC              ; ---------------------------------
3043  0EBC              _player_lost_life:
3044  0EBC  CD 00 00    	call	___sdcc_enter_ix
3045  0EBF  3B          	dec	sp
3046  0EC0  3A 07 00    	ld	a,(_lin + 0x0007)
3047  0EC3  32 00 00    	ld	(_s_lin0),a
3048  0EC6  3A 07 00    	ld	a,(_col + 0x0007)
3049  0EC9  32 00 00    	ld	(_s_col0),a
3050  0ECC  CD 00 00    	call	_spr_init_anim_bullets
3051  0ECF  01 00 00    	ld	bc,_anim_lin+0
3052  0ED2  16 00       	ld	d,0x00
3053  0ED4              l_player_lost_life_00115:
3054  0ED4  C5          	push	bc
3055  0ED5  D5          	push	de
3056  0ED6  21 00 00    	ld	hl,0x0000
3057  0ED9  E5          	push	hl
3058  0EDA  AF          	xor	a, a
3059  0EDB  5A          	ld	e,d
3060  0EDC  57          	ld	d,a
3061  0EDD  D5          	push	de
3062  0EDE  CD 00 00    	call	_NIRVANAP_spriteT_callee
3063  0EE1  D1          	pop	de
3064  0EE2  C1          	pop	bc
3065  0EE3  6A          	ld	l,d
3066  0EE4  26 00       	ld	h,0x00
3067  0EE6  09          	add	hl, bc
3068  0EE7  36 FF       	ld	(hl),0xff
3069  0EE9  14          	inc	d
3070  0EEA  7A          	ld	a, d
3071  0EEB  D6 08       	sub	a,0x08
3072  0EED  38 E5       	jr	C,l_player_lost_life_00115
3073  0EEF  21 00 00    	ld	hl,_anim_count
3074  0EF2  36 00       	ld	(hl),0x00
3075  0EF4  76          	halt
3076  0EF5  3A 00 00    	ld	a,(_s_lin0)
3077  0EF8  C6 F0       	add	a,0xf0
3078  0EFA  47          	ld	b, a
3079  0EFB  3A 00 00    	ld	a,(_s_col0)
3080  0EFE  21 00 00    	ld	hl,0x0000
3081  0F01  E5          	push	hl
3082  0F02  21 87 03    	ld	hl,0x0387
3083  0F05  E5          	push	hl
3084  0F06  48          	ld	c,b
3085  0F07  47          	ld	b,a
3086  0F08  C5          	push	bc
3087  0F09  CD 00 00    	call	_spr_add_anim
3088  0F0C  F1          	pop	af
3089  0F0D  F1          	pop	af
3090  0F0E  F1          	pop	af
3091  0F0F  21 00 00    	ld	hl,_s_col0
3092  0F12  46          	ld	b, (hl)
3093  0F13  05          	dec	b
3094  0F14  05          	dec	b
3095  0F15  21 00 00    	ld	hl,0x0000
3096  0F18  E5          	push	hl
3097  0F19  21 87 03    	ld	hl,0x0387
3098  0F1C  E5          	push	hl
3099  0F1D  C5          	push	bc
3100  0F1E  33          	inc	sp
3101  0F1F  3A 00 00    	ld	a,(_s_lin0)
3102  0F22  F5          	push	af
3103  0F23  33          	inc	sp
3104  0F24  CD 00 00    	call	_spr_add_anim
3105  0F27  F1          	pop	af
3106  0F28  F1          	pop	af
3107  0F29  21 00 00    	ld	hl,0x0000
3108  0F2C  E3          	ex	(sp),hl
3109  0F2D  3A 00 00    	ld	a,(_s_col0)
3110  0F30  21 87 03    	ld	hl,0x0387
3111  0F33  E5          	push	hl
3112  0F34  F5          	push	af
3113  0F35  33          	inc	sp
3114  0F36  3A 00 00    	ld	a,(_s_lin0)
3115  0F39  F5          	push	af
3116  0F3A  33          	inc	sp
3117  0F3B  CD 00 00    	call	_spr_add_anim
3118  0F3E  F1          	pop	af
3119  0F3F  F1          	pop	af
3120  0F40  F1          	pop	af
3121  0F41  21 00 00    	ld	hl,_s_col0
3122  0F44  46          	ld	b, (hl)
3123  0F45  04          	inc	b
3124  0F46  04          	inc	b
3125  0F47  21 00 00    	ld	hl,0x0000
3126  0F4A  E5          	push	hl
3127  0F4B  21 87 03    	ld	hl,0x0387
3128  0F4E  E5          	push	hl
3129  0F4F  C5          	push	bc
3130  0F50  33          	inc	sp
3131  0F51  3A 00 00    	ld	a,(_s_lin0)
3132  0F54  F5          	push	af
3133  0F55  33          	inc	sp
3134  0F56  CD 00 00    	call	_spr_add_anim
3135  0F59  F1          	pop	af
3136  0F5A  F1          	pop	af
3137  0F5B  F1          	pop	af
3138  0F5C  3A 00 00    	ld	a,(_s_lin0)
3139  0F5F  C6 10       	add	a,0x10
3140  0F61  47          	ld	b, a
3141  0F62  3A 00 00    	ld	a,(_s_col0)
3142  0F65  21 00 00    	ld	hl,0x0000
3143  0F68  E5          	push	hl
3144  0F69  21 87 03    	ld	hl,0x0387
3145  0F6C  E5          	push	hl
3146  0F6D  48          	ld	c,b
3147  0F6E  47          	ld	b,a
3148  0F6F  C5          	push	bc
3149  0F70  CD 00 00    	call	_spr_add_anim
3150  0F73  F1          	pop	af
3151  0F74  F1          	pop	af
3152  0F75  F1          	pop	af
3153  0F76  2E 00       	ld	l,0x00
3154  0F78  CD 00 00    	call	_zx_border_fastcall
3155  0F7B  DD 36 FF 01 	ld	(ix-1),0x01
3156  0F7F  2A 00 00    	ld	hl,(_curr_time)
3157  0F82  22 00 00    	ld	(_anim_time),hl
3158  0F85              l_player_lost_life_00107:
3159  0F85  DD 7E FF    	ld	a,(ix-1)
3160  0F88  B7          	or	a, a
3161  0F89  28 28       	jr	Z,l_player_lost_life_00109
3162  0F8B  21 0C 00    	ld	hl,0x000c
3163  0F8E  E5          	push	hl
3164  0F8F  2A 00 00    	ld	hl,(_anim_time)
3165  0F92  E5          	push	hl
3166  0F93  CD 00 00    	call	_game_check_time
3167  0F96  F1          	pop	af
3168  0F97  F1          	pop	af
3169  0F98  7D          	ld	a, l
3170  0F99  B7          	or	a, a
3171  0F9A  28 E9       	jr	Z,l_player_lost_life_00107
3172  0F9C  2A 00 00    	ld	hl,(_curr_time)
3173  0F9F  22 00 00    	ld	(_anim_time),hl
3174  0FA2  3A 00 00    	ld	a,(_anim_count)
3175  0FA5  B7          	or	a,a
3176  0FA6  28 05       	jr	Z,l_player_lost_life_00103
3177  0FA8  CD 00 00    	call	_spr_play_anim
3178  0FAB  18 D8       	jr	l_player_lost_life_00107
3179  0FAD              l_player_lost_life_00103:
3180  0FAD  DD 36 FF 00 	ld	(ix-1),0x00
3181  0FB1  18 D2       	jr	l_player_lost_life_00107
3182  0FB3              l_player_lost_life_00109:
3183  0FB3  21 00 00    	ld	hl,_sprite
3184  0FB6  36 00       	ld	(hl),0x00
3185  0FB8              l_player_lost_life_00117:
3186  0FB8  3A 07 00    	ld	a,(_class + 0x0007)
3187  0FBB  B7          	or	a, a
3188  0FBC  28 1F       	jr	Z,l_player_lost_life_00111
3189  0FBE  21 07 00    	ld	hl,+(_col + 0x0007)
3190  0FC1  4E          	ld	c, (hl)
3191  0FC2  21 07 00    	ld	hl,+(_lin + 0x0007)
3192  0FC5  56          	ld	d, (hl)
3193  0FC6  21 07 00    	ld	hl,+(_tile + 0x0007)
3194  0FC9  5E          	ld	e, (hl)
3195  0FCA  21 07 00    	ld	hl,+(_colint + 0x0007)
3196  0FCD  46          	ld	b, (hl)
3197  0FCE  7B          	ld	a, e
3198  0FCF  80          	add	a, b
3199  0FD0  5F          	ld	e, a
3200  0FD1  79          	ld	a, c
3201  0FD2  F5          	push	af
3202  0FD3  33          	inc	sp
3203  0FD4  3A 00 00    	ld	a,(_sprite)
3204  0FD7  D5          	push	de
3205  0FD8  F5          	push	af
3206  0FD9  33          	inc	sp
3207  0FDA  CD 00 00    	call	_NIRVANAP_spriteT_callee
3208  0FDD              l_player_lost_life_00111:
3209  0FDD  21 07 00    	ld	hl, +(_class + 0x0007)
3210  0FE0  36 00       	ld	(hl),0x00
3211  0FE2  21 07 00    	ld	hl, +(_bullet_col + 0x0007)
3212  0FE5  36 FF       	ld	(hl),0xff
3213  0FE7  21 00 00    	ld	hl,_sprite
3214  0FEA  7E          	ld	a,(hl)
3215  0FEB  3C          	inc	a
3216  0FEC  77          	ld	(hl),a
3217  0FED  D6 07       	sub	a,0x07
3218  0FEF  38 C7       	jr	C,l_player_lost_life_00117
3219  0FF1  3A 00 00    	ld	a,(_player_lives)
3220  0FF4  B7          	or	a, a
3221  0FF5  28 09       	jr	Z,l_player_lost_life_00119
3222  0FF7  21 F4 01    	ld	hl,0x01f4
3223  0FFA  CD 00 00    	call	_z80_delay_ms_fastcall
3224  0FFD  CD 00 00    	call	_game_round_init
3225  1000              l_player_lost_life_00119:
3226  1000  33          	inc	sp
3227  1001  DD E1       	pop	ix
3228  1003  C9          	ret
3229  1004              	SECTION code_compiler
3230  1004              ;	---------------------------------
3231  1004              ; Function player_hit
3232  1004              ; ---------------------------------
3233  1004              _player_hit:
3234  1004  7D          	ld	a,l
3235  1005  4D          	ld	c,l
3236  1006  21 00 00    	ld	hl,_player_vita
3237  1009  96          	sub	a, (hl)
3238  100A  30 17       	jr	NC,l_player_hit_00107
3239  100C  3A 00 00    	ld	a,(_game_inmune)
3240  100F  B7          	or	a, a
3241  1010  20 06       	jr	NZ,l_player_hit_00102
3242  1012  21 00 00    	ld	hl,_player_vita
3243  1015  7E          	ld	a, (hl)
3244  1016  91          	sub	a, c
3245  1017  77          	ld	(hl), a
3246  1018              l_player_hit_00102:
3247  1018  2A 00 00    	ld	hl,(_curr_time)
3248  101B  22 00 00    	ld	(_player_hit_time),hl
3249  101E  CD 00 00    	call	_game_update_stats
3250  1021  18 2C       	jr	l_player_hit_00109
3251  1023              l_player_hit_00107:
3252  1023  21 00 00    	ld	hl,_player_vita
3253  1026  36 00       	ld	(hl),0x00
3254  1028  CD 00 00    	call	_game_update_stats
3255  102B  CD BC 0E    	call	_player_lost_life
3256  102E  21 00 00    	ld	hl,_player_lives
3257  1031  7E          	ld	a, (hl)
3258  1032  B7          	or	a, a
3259  1033  28 10       	jr	Z,l_player_hit_00104
3260  1035  35          	dec	(hl)
3261  1036  21 00 00    	ld	hl,_player_mana
3262  1039  36 64       	ld	(hl),0x64
3263  103B  21 00 00    	ld	hl,_player_vita
3264  103E  36 64       	ld	(hl),0x64
3265  1040  CD 00 00    	call	_game_update_stats
3266  1043  18 0A       	jr	l_player_hit_00109
3267  1045              l_player_hit_00104:
3268  1045  21 00 00    	ld	hl,_player_lives
3269  1048  36 00       	ld	(hl),0x00
3270  104A  21 00 00    	ld	hl,_game_over
3271  104D  36 01       	ld	(hl),0x01
3272  104F              l_player_hit_00109:
3273  104F  C9          	ret
3274  1050              	SECTION IGNORE
3275  0000              
