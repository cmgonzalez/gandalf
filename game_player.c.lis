1     0000              MODULE game_player_c
2     0000              
3     0000              ;--------------------------------------------------------
4     0000              ; File Created by SDCC : free open source ANSI-C Compiler
5     0000              ; Version 3.6.5 #9958 (Mac OS X i386)
6     0000              ;--------------------------------------------------------
7     0000              ; Processed by Z88DK
8     0000              ;--------------------------------------------------------
9     0000              
10    0000              	EXTERN __divschar
11    0000              	EXTERN __divschar_callee
12    0000              	EXTERN __divsint
13    0000              	EXTERN __divsint_callee
14    0000              	EXTERN __divslong
15    0000              	EXTERN __divslong_callee
16    0000              	EXTERN __divslonglong
17    0000              	EXTERN __divslonglong_callee
18    0000              	EXTERN __divsuchar
19    0000              	EXTERN __divsuchar_callee
20    0000              	EXTERN __divuchar
21    0000              	EXTERN __divuchar_callee
22    0000              	EXTERN __divuint
23    0000              	EXTERN __divuint_callee
24    0000              	EXTERN __divulong
25    0000              	EXTERN __divulong_callee
26    0000              	EXTERN __divulonglong
27    0000              	EXTERN __divulonglong_callee
28    0000              	EXTERN __divuschar
29    0000              	EXTERN __divuschar_callee
30    0000              	EXTERN __modschar
31    0000              	EXTERN __modschar_callee
32    0000              	EXTERN __modsint
33    0000              	EXTERN __modsint_callee
34    0000              	EXTERN __modslong
35    0000              	EXTERN __modslong_callee
36    0000              	EXTERN __modslonglong
37    0000              	EXTERN __modslonglong_callee
38    0000              	EXTERN __modsuchar
39    0000              	EXTERN __modsuchar_callee
40    0000              	EXTERN __moduchar
41    0000              	EXTERN __moduchar_callee
42    0000              	EXTERN __moduint
43    0000              	EXTERN __moduint_callee
44    0000              	EXTERN __modulong
45    0000              	EXTERN __modulong_callee
46    0000              	EXTERN __modulonglong
47    0000              	EXTERN __modulonglong_callee
48    0000              	EXTERN __moduschar
49    0000              	EXTERN __moduschar_callee
50    0000              	EXTERN __mulint
51    0000              	EXTERN __mulint_callee
52    0000              	EXTERN __mullong
53    0000              	EXTERN __mullong_callee
54    0000              	EXTERN __mullonglong
55    0000              	EXTERN __mullonglong_callee
56    0000              	EXTERN __mulschar
57    0000              	EXTERN __mulschar_callee
58    0000              	EXTERN __mulsuchar
59    0000              	EXTERN __mulsuchar_callee
60    0000              	EXTERN __muluschar
61    0000              	EXTERN __muluschar_callee
62    0000              	EXTERN __rlslonglong
63    0000              	EXTERN __rlslonglong_callee
64    0000              	EXTERN __rlulonglong
65    0000              	EXTERN __rlulonglong_callee
66    0000              	EXTERN __rrslonglong
67    0000              	EXTERN __rrslonglong_callee
68    0000              	EXTERN __rrulonglong
69    0000              	EXTERN __rrulonglong_callee
70    0000              	EXTERN ___sdcc_call_hl
71    0000              	EXTERN ___sdcc_call_iy
72    0000              	EXTERN ___sdcc_enter_ix
73    0000              	EXTERN _banked_call
74    0000              	EXTERN _banked_ret
75    0000              	EXTERN ___fs2schar
76    0000              	EXTERN ___fs2schar_callee
77    0000              	EXTERN ___fs2sint
78    0000              	EXTERN ___fs2sint_callee
79    0000              	EXTERN ___fs2slong
80    0000              	EXTERN ___fs2slong_callee
81    0000              	EXTERN ___fs2slonglong
82    0000              	EXTERN ___fs2slonglong_callee
83    0000              	EXTERN ___fs2uchar
84    0000              	EXTERN ___fs2uchar_callee
85    0000              	EXTERN ___fs2uint
86    0000              	EXTERN ___fs2uint_callee
87    0000              	EXTERN ___fs2ulong
88    0000              	EXTERN ___fs2ulong_callee
89    0000              	EXTERN ___fs2ulonglong
90    0000              	EXTERN ___fs2ulonglong_callee
91    0000              	EXTERN ___fsadd
92    0000              	EXTERN ___fsadd_callee
93    0000              	EXTERN ___fsdiv
94    0000              	EXTERN ___fsdiv_callee
95    0000              	EXTERN ___fseq
96    0000              	EXTERN ___fseq_callee
97    0000              	EXTERN ___fsgt
98    0000              	EXTERN ___fsgt_callee
99    0000              	EXTERN ___fslt
100   0000              	EXTERN ___fslt_callee
101   0000              	EXTERN ___fsmul
102   0000              	EXTERN ___fsmul_callee
103   0000              	EXTERN ___fsneq
104   0000              	EXTERN ___fsneq_callee
105   0000              	EXTERN ___fssub
106   0000              	EXTERN ___fssub_callee
107   0000              	EXTERN ___schar2fs
108   0000              	EXTERN ___schar2fs_callee
109   0000              	EXTERN ___sint2fs
110   0000              	EXTERN ___sint2fs_callee
111   0000              	EXTERN ___slong2fs
112   0000              	EXTERN ___slong2fs_callee
113   0000              	EXTERN ___slonglong2fs
114   0000              	EXTERN ___slonglong2fs_callee
115   0000              	EXTERN ___uchar2fs
116   0000              	EXTERN ___uchar2fs_callee
117   0000              	EXTERN ___uint2fs
118   0000              	EXTERN ___uint2fs_callee
119   0000              	EXTERN ___ulong2fs
120   0000              	EXTERN ___ulong2fs_callee
121   0000              	EXTERN ___ulonglong2fs
122   0000              	EXTERN ___ulonglong2fs_callee
123   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
126   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
127   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
128   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
129   0000              	EXTERN ____sdcc_4_ldi_save_bc
130   0000              	EXTERN ____sdcc_4_push_hlix
131   0000              	EXTERN ____sdcc_4_push_mhl
132   0000              	EXTERN ____sdcc_lib_setmem_hl
133   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
134   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
135   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
136   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
137   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
138   0000              	EXTERN ____sdcc_ll_add_deix_hlix
139   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
140   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
141   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
142   0000              	EXTERN ____sdcc_ll_asr_hlix_a
143   0000              	EXTERN ____sdcc_ll_asr_mbc_a
144   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
145   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
146   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
147   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
148   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
149   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
150   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
151   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
152   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
153   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
155   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
156   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
157   0000              	EXTERN ____sdcc_ll_push_hlix
158   0000              	EXTERN ____sdcc_ll_push_mhl
159   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
160   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
161   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
162   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
163   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
164   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
165   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
166   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
167   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
168   0000              	EXTERN ____sdcc_load_debc_deix
169   0000              	EXTERN ____sdcc_load_dehl_deix
170   0000              	EXTERN ____sdcc_load_debc_mhl
171   0000              	EXTERN ____sdcc_load_hlde_mhl
172   0000              	EXTERN ____sdcc_store_dehl_bcix
173   0000              	EXTERN ____sdcc_store_debc_hlix
174   0000              	EXTERN ____sdcc_store_debc_mhl
175   0000              	EXTERN ____sdcc_cpu_pop_ei
176   0000              	EXTERN ____sdcc_cpu_pop_ei_jp
177   0000              	EXTERN ____sdcc_cpu_push_di
178   0000              	EXTERN ____sdcc_outi
179   0000              	EXTERN ____sdcc_outi_128
180   0000              	EXTERN ____sdcc_outi_256
181   0000              	EXTERN ____sdcc_ldi
182   0000              	EXTERN ____sdcc_ldi_128
183   0000              	EXTERN ____sdcc_ldi_256
184   0000              
185   0000              ;--------------------------------------------------------
186   0000              ; Public variables in this module
187   0000              ;--------------------------------------------------------
188   0000              	GLOBAL _player_check_map
189   0000              	GLOBAL _player_init
190   0000              	GLOBAL _player_check_input
191   0000              	GLOBAL _player_collision
192   0000              	GLOBAL _player_kill
193   0000              	GLOBAL _player_restart
194   0000              	GLOBAL _player_turn
195   0000              	GLOBAL _player_move
196   0000              	GLOBAL _player_check_stairs_down
197   0000              	GLOBAL _player_check_stairs
198   0000              	GLOBAL _player_tile
199   0000              	GLOBAL _player_move_input
200   0000              	GLOBAL _player_fire
201   0000              	GLOBAL _player_pick_item
202   0000              	GLOBAL _player_hit_platform
203   0000              	GLOBAL _player_hit_platform_clear
204   0000              	GLOBAL _player_score_add
205   0000              	GLOBAL _player_check_floor
206   0000              	GLOBAL _player_move_jump
207   0000              	GLOBAL _player_open_door
208   0000              	GLOBAL _player_lost_life
209   0000              	GLOBAL _player_hit
210   0000              ;--------------------------------------------------------
211   0000              ; Externals used
212   0000              ;--------------------------------------------------------
213   0000              	GLOBAL _ulltoa_callee
214   0000              	GLOBAL _ulltoa
215   0000              	GLOBAL _strtoull_callee
216   0000              	GLOBAL _strtoull
217   0000              	GLOBAL _strtoll_callee
218   0000              	GLOBAL _strtoll
219   0000              	GLOBAL _lltoa_callee
220   0000              	GLOBAL _lltoa
221   0000              	GLOBAL _llabs_callee
222   0000              	GLOBAL _llabs
223   0000              	GLOBAL __lldivu__callee
224   0000              	GLOBAL __lldivu_
225   0000              	GLOBAL __lldiv__callee
226   0000              	GLOBAL __lldiv_
227   0000              	GLOBAL _atoll_callee
228   0000              	GLOBAL _atoll
229   0000              	GLOBAL _realloc_unlocked_callee
230   0000              	GLOBAL _realloc_unlocked
231   0000              	GLOBAL _malloc_unlocked_fastcall
232   0000              	GLOBAL _malloc_unlocked
233   0000              	GLOBAL _free_unlocked_fastcall
234   0000              	GLOBAL _free_unlocked
235   0000              	GLOBAL _calloc_unlocked_callee
236   0000              	GLOBAL _calloc_unlocked
237   0000              	GLOBAL _aligned_alloc_unlocked_callee
238   0000              	GLOBAL _aligned_alloc_unlocked
239   0000              	GLOBAL _realloc_callee
240   0000              	GLOBAL _realloc
241   0000              	GLOBAL _malloc_fastcall
242   0000              	GLOBAL _malloc
243   0000              	GLOBAL _free_fastcall
244   0000              	GLOBAL _free
245   0000              	GLOBAL _calloc_callee
246   0000              	GLOBAL _calloc
247   0000              	GLOBAL _aligned_alloc_callee
248   0000              	GLOBAL _aligned_alloc
249   0000              	GLOBAL _utoa_callee
250   0000              	GLOBAL _utoa
251   0000              	GLOBAL _ultoa_callee
252   0000              	GLOBAL _ultoa
253   0000              	GLOBAL _system_fastcall
254   0000              	GLOBAL _system
255   0000              	GLOBAL _strtoul_callee
256   0000              	GLOBAL _strtoul
257   0000              	GLOBAL _strtol_callee
258   0000              	GLOBAL _strtol
259   0000              	GLOBAL _strtof_callee
260   0000              	GLOBAL _strtof
261   0000              	GLOBAL _strtod_callee
262   0000              	GLOBAL _strtod
263   0000              	GLOBAL _srand_fastcall
264   0000              	GLOBAL _srand
265   0000              	GLOBAL _rand
266   0000              	GLOBAL _quick_exit_fastcall
267   0000              	GLOBAL _quick_exit
268   0000              	GLOBAL _qsort_callee
269   0000              	GLOBAL _qsort
270   0000              	GLOBAL _ltoa_callee
271   0000              	GLOBAL _ltoa
272   0000              	GLOBAL _labs_fastcall
273   0000              	GLOBAL _labs
274   0000              	GLOBAL _itoa_callee
275   0000              	GLOBAL _itoa
276   0000              	GLOBAL _ftoh_callee
277   0000              	GLOBAL _ftoh
278   0000              	GLOBAL _ftog_callee
279   0000              	GLOBAL _ftog
280   0000              	GLOBAL _ftoe_callee
281   0000              	GLOBAL _ftoe
282   0000              	GLOBAL _ftoa_callee
283   0000              	GLOBAL _ftoa
284   0000              	GLOBAL _exit_fastcall
285   0000              	GLOBAL _exit
286   0000              	GLOBAL _dtoh_callee
287   0000              	GLOBAL _dtoh
288   0000              	GLOBAL _dtog_callee
289   0000              	GLOBAL _dtog
290   0000              	GLOBAL _dtoe_callee
291   0000              	GLOBAL _dtoe
292   0000              	GLOBAL _dtoa_callee
293   0000              	GLOBAL _dtoa
294   0000              	GLOBAL _bsearch_callee
295   0000              	GLOBAL _bsearch
296   0000              	GLOBAL _atol_fastcall
297   0000              	GLOBAL _atol
298   0000              	GLOBAL _atoi_fastcall
299   0000              	GLOBAL _atoi
300   0000              	GLOBAL _atof_fastcall
301   0000              	GLOBAL _atof
302   0000              	GLOBAL _atexit_fastcall
303   0000              	GLOBAL _atexit
304   0000              	GLOBAL _at_quick_exit_fastcall
305   0000              	GLOBAL _at_quick_exit
306   0000              	GLOBAL _abs_fastcall
307   0000              	GLOBAL _abs
308   0000              	GLOBAL _abort
309   0000              	GLOBAL __strtou__callee
310   0000              	GLOBAL __strtou_
311   0000              	GLOBAL __strtoi__callee
312   0000              	GLOBAL __strtoi_
313   0000              	GLOBAL __random_uniform_xor_8__fastcall
314   0000              	GLOBAL __random_uniform_xor_8_
315   0000              	GLOBAL __random_uniform_xor_32__fastcall
316   0000              	GLOBAL __random_uniform_xor_32_
317   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
318   0000              	GLOBAL __random_uniform_cmwc_8_
319   0000              	GLOBAL __shellsort__callee
320   0000              	GLOBAL __shellsort_
321   0000              	GLOBAL __quicksort__callee
322   0000              	GLOBAL __quicksort_
323   0000              	GLOBAL __insertion_sort__callee
324   0000              	GLOBAL __insertion_sort_
325   0000              	GLOBAL __ldivu__callee
326   0000              	GLOBAL __ldivu_
327   0000              	GLOBAL __ldiv__callee
328   0000              	GLOBAL __ldiv_
329   0000              	GLOBAL __divu__callee
330   0000              	GLOBAL __divu_
331   0000              	GLOBAL __div__callee
332   0000              	GLOBAL __div_
333   0000              	GLOBAL _NIRVANAP_drawTW_raw_callee
334   0000              	GLOBAL _NIRVANAP_drawTW_raw
335   0000              	GLOBAL _NIRVANAP_drawTW_callee
336   0000              	GLOBAL _NIRVANAP_drawTW
337   0000              	GLOBAL _NIRVANAP_drawW_raw_callee
338   0000              	GLOBAL _NIRVANAP_drawW_raw
339   0000              	GLOBAL _NIRVANAP_drawW_callee
340   0000              	GLOBAL _NIRVANAP_drawW
341   0000              	GLOBAL _NIRVANAP_spriteT_callee
342   0000              	GLOBAL _NIRVANAP_spriteT
343   0000              	GLOBAL _NIRVANAP_fillC_callee
344   0000              	GLOBAL _NIRVANAP_fillC
345   0000              	GLOBAL _NIRVANAP_readC_callee
346   0000              	GLOBAL _NIRVANAP_readC
347   0000              	GLOBAL _NIRVANAP_paintC_callee
348   0000              	GLOBAL _NIRVANAP_paintC
349   0000              	GLOBAL _NIRVANAP_printC_callee
350   0000              	GLOBAL _NIRVANAP_printC
351   0000              	GLOBAL _NIRVANAP_fillT_raw_callee
352   0000              	GLOBAL _NIRVANAP_fillT_raw
353   0000              	GLOBAL _NIRVANAP_fillT_callee
354   0000              	GLOBAL _NIRVANAP_fillT
355   0000              	GLOBAL _NIRVANAP_drawT_raw_callee
356   0000              	GLOBAL _NIRVANAP_drawT_raw
357   0000              	GLOBAL _NIRVANAP_drawT_callee
358   0000              	GLOBAL _NIRVANAP_drawT
359   0000              	GLOBAL _NIRVANAP_stop
360   0000              	GLOBAL _NIRVANAP_start
361   0000              	GLOBAL _debug3
362   0000              	GLOBAL _debug2
363   0000              	GLOBAL _debug
364   0000              	GLOBAL _zx_print_str
365   0000              	GLOBAL _zx_print_int
366   0000              	GLOBAL _zx_print_chr
367   0000              	GLOBAL _zx_print_bonus_time
368   0000              	GLOBAL _zx_isr
369   0000              	GLOBAL _z80_otdr_callee
370   0000              	GLOBAL _z80_otdr
371   0000              	GLOBAL _z80_otir_callee
372   0000              	GLOBAL _z80_otir
373   0000              	GLOBAL _z80_outp_callee
374   0000              	GLOBAL _z80_outp
375   0000              	GLOBAL _z80_indr_callee
376   0000              	GLOBAL _z80_indr
377   0000              	GLOBAL _z80_inir_callee
378   0000              	GLOBAL _z80_inir
379   0000              	GLOBAL _z80_inp_fastcall
380   0000              	GLOBAL _z80_inp
381   0000              	GLOBAL _z80_set_int_state_fastcall
382   0000              	GLOBAL _z80_set_int_state
383   0000              	GLOBAL _z80_get_int_state
384   0000              	GLOBAL _z80_delay_tstate_fastcall
385   0000              	GLOBAL _z80_delay_tstate
386   0000              	GLOBAL _z80_delay_ms_fastcall
387   0000              	GLOBAL _z80_delay_ms
388   0000              	GLOBAL _im2_remove_generic_callback_callee
389   0000              	GLOBAL _im2_remove_generic_callback
390   0000              	GLOBAL _im2_prepend_generic_callback_callee
391   0000              	GLOBAL _im2_prepend_generic_callback
392   0000              	GLOBAL _im2_append_generic_callback_callee
393   0000              	GLOBAL _im2_append_generic_callback
394   0000              	GLOBAL _im2_create_generic_isr_8080_callee
395   0000              	GLOBAL _im2_create_generic_isr_8080
396   0000              	GLOBAL _im2_create_generic_isr_callee
397   0000              	GLOBAL _im2_create_generic_isr
398   0000              	GLOBAL _im2_install_isr_callee
399   0000              	GLOBAL _im2_install_isr
400   0000              	GLOBAL _im2_init_fastcall
401   0000              	GLOBAL _im2_init
402   0000              	GLOBAL _intrinsic_swap_word_32_fastcall
403   0000              	GLOBAL _intrinsic_swap_word_32
404   0000              	GLOBAL _intrinsic_swap_endian_32_fastcall
405   0000              	GLOBAL _intrinsic_swap_endian_32
406   0000              	GLOBAL _intrinsic_swap_endian_16_fastcall
407   0000              	GLOBAL _intrinsic_swap_endian_16
408   0000              	GLOBAL _intrinsic_return_de
409   0000              	GLOBAL _intrinsic_return_bc
410   0000              	GLOBAL _intrinsic_exx
411   0000              	GLOBAL _intrinsic_ex_de_hl
412   0000              	GLOBAL _intrinsic_nop
413   0000              	GLOBAL _intrinsic_im_2
414   0000              	GLOBAL _intrinsic_im_1
415   0000              	GLOBAL _intrinsic_im_0
416   0000              	GLOBAL _intrinsic_retn
417   0000              	GLOBAL _intrinsic_reti
418   0000              	GLOBAL _intrinsic_halt
419   0000              	GLOBAL _intrinsic_ei
420   0000              	GLOBAL _intrinsic_di
421   0000              	GLOBAL _intrinsic_stub
422   0000              	GLOBAL _intrinsic_outi
423   0000              	GLOBAL _intrinsic_ldi
424   0000              	GLOBAL _zx_pattern_fill_callee
425   0000              	GLOBAL _zx_pattern_fill
426   0000              	GLOBAL _zx_saddrpup_fastcall
427   0000              	GLOBAL _zx_saddrpup
428   0000              	GLOBAL _zx_saddrpright_callee
429   0000              	GLOBAL _zx_saddrpright
430   0000              	GLOBAL _zx_saddrpleft_callee
431   0000              	GLOBAL _zx_saddrpleft
432   0000              	GLOBAL _zx_saddrpdown_fastcall
433   0000              	GLOBAL _zx_saddrpdown
434   0000              	GLOBAL _zx_saddrcup_fastcall
435   0000              	GLOBAL _zx_saddrcup
436   0000              	GLOBAL _zx_saddrcright_fastcall
437   0000              	GLOBAL _zx_saddrcright
438   0000              	GLOBAL _zx_saddrcleft_fastcall
439   0000              	GLOBAL _zx_saddrcleft
440   0000              	GLOBAL _zx_saddrcdown_fastcall
441   0000              	GLOBAL _zx_saddrcdown
442   0000              	GLOBAL _zx_saddr2py_fastcall
443   0000              	GLOBAL _zx_saddr2py
444   0000              	GLOBAL _zx_saddr2px_fastcall
445   0000              	GLOBAL _zx_saddr2px
446   0000              	GLOBAL _zx_saddr2cy_fastcall
447   0000              	GLOBAL _zx_saddr2cy
448   0000              	GLOBAL _zx_saddr2cx_fastcall
449   0000              	GLOBAL _zx_saddr2cx
450   0000              	GLOBAL _zx_saddr2aaddr_fastcall
451   0000              	GLOBAL _zx_saddr2aaddr
452   0000              	GLOBAL _zx_py2saddr_fastcall
453   0000              	GLOBAL _zx_py2saddr
454   0000              	GLOBAL _zx_py2aaddr_fastcall
455   0000              	GLOBAL _zx_py2aaddr
456   0000              	GLOBAL _zx_pxy2saddr_callee
457   0000              	GLOBAL _zx_pxy2saddr
458   0000              	GLOBAL _zx_pxy2aaddr_callee
459   0000              	GLOBAL _zx_pxy2aaddr
460   0000              	GLOBAL _zx_px2bitmask_fastcall
461   0000              	GLOBAL _zx_px2bitmask
462   0000              	GLOBAL _zx_cy2saddr_fastcall
463   0000              	GLOBAL _zx_cy2saddr
464   0000              	GLOBAL _zx_cy2aaddr_fastcall
465   0000              	GLOBAL _zx_cy2aaddr
466   0000              	GLOBAL _zx_cxy2saddr_callee
467   0000              	GLOBAL _zx_cxy2saddr
468   0000              	GLOBAL _zx_cxy2aaddr_callee
469   0000              	GLOBAL _zx_cxy2aaddr
470   0000              	GLOBAL _zx_bitmask2px_fastcall
471   0000              	GLOBAL _zx_bitmask2px
472   0000              	GLOBAL _zx_aaddrcup_fastcall
473   0000              	GLOBAL _zx_aaddrcup
474   0000              	GLOBAL _zx_aaddrcright_fastcall
475   0000              	GLOBAL _zx_aaddrcright
476   0000              	GLOBAL _zx_aaddrcleft_fastcall
477   0000              	GLOBAL _zx_aaddrcleft
478   0000              	GLOBAL _zx_aaddrcdown_fastcall
479   0000              	GLOBAL _zx_aaddrcdown
480   0000              	GLOBAL _zx_aaddr2saddr_fastcall
481   0000              	GLOBAL _zx_aaddr2saddr
482   0000              	GLOBAL _zx_aaddr2py_fastcall
483   0000              	GLOBAL _zx_aaddr2py
484   0000              	GLOBAL _zx_aaddr2px_fastcall
485   0000              	GLOBAL _zx_aaddr2px
486   0000              	GLOBAL _zx_aaddr2cy_fastcall
487   0000              	GLOBAL _zx_aaddr2cy
488   0000              	GLOBAL _zx_aaddr2cx_fastcall
489   0000              	GLOBAL _zx_aaddr2cx
490   0000              	GLOBAL _zx_visit_wc_pix_callee
491   0000              	GLOBAL _zx_visit_wc_pix
492   0000              	GLOBAL _zx_visit_wc_attr_callee
493   0000              	GLOBAL _zx_visit_wc_attr
494   0000              	GLOBAL _zx_scroll_wc_up_pix_callee
495   0000              	GLOBAL _zx_scroll_wc_up_pix
496   0000              	GLOBAL _zx_scroll_wc_up_attr_callee
497   0000              	GLOBAL _zx_scroll_wc_up_attr
498   0000              	GLOBAL _zx_scroll_wc_up_callee
499   0000              	GLOBAL _zx_scroll_wc_up
500   0000              	GLOBAL _zx_scroll_up_pix_callee
501   0000              	GLOBAL _zx_scroll_up_pix
502   0000              	GLOBAL _zx_scroll_up_attr_callee
503   0000              	GLOBAL _zx_scroll_up_attr
504   0000              	GLOBAL _zx_scroll_up_callee
505   0000              	GLOBAL _zx_scroll_up
506   0000              	GLOBAL _zx_cls_wc_pix_callee
507   0000              	GLOBAL _zx_cls_wc_pix
508   0000              	GLOBAL _zx_cls_wc_attr_callee
509   0000              	GLOBAL _zx_cls_wc_attr
510   0000              	GLOBAL _zx_cls_wc_callee
511   0000              	GLOBAL _zx_cls_wc
512   0000              	GLOBAL _zx_cls_pix_fastcall
513   0000              	GLOBAL _zx_cls_pix
514   0000              	GLOBAL _zx_cls_attr_fastcall
515   0000              	GLOBAL _zx_cls_attr
516   0000              	GLOBAL _zx_cls_fastcall
517   0000              	GLOBAL _zx_cls
518   0000              	GLOBAL _zx_border_fastcall
519   0000              	GLOBAL _zx_border
520   0000              	GLOBAL _spr_btile_paint_back
521   0000              	GLOBAL _spr_explode_bullet
522   0000              	GLOBAL _spr_init_anim_bullets
523   0000              	GLOBAL _spr_turn_horizontal
524   0000              	GLOBAL _spr_play_bullets
525   0000              	GLOBAL _spr_play_anim
526   0000              	GLOBAL _spr_add_anim
527   0000              	GLOBAL _spr_page_map
528   0000              	GLOBAL _spr_page_right
529   0000              	GLOBAL _spr_page_left
530   0000              	GLOBAL _spr_tile_paint
531   0000              	GLOBAL _spr_calc_hor
532   0000              	GLOBAL _spr_draw_row
533   0000              	GLOBAL _spr_draw_index
534   0000              	GLOBAL _spr_draw_clear
535   0000              	GLOBAL _spr_brick_anim
536   0000              	GLOBAL _spr_back_repaint
537   0000              	GLOBAL _spr_tile
538   0000              	GLOBAL _spr_destroy
539   0000              	GLOBAL _spr_tile_dir
540   0000              	GLOBAL _spr_redraw
541   0000              	GLOBAL _spr_move_left
542   0000              	GLOBAL _spr_move_right
543   0000              	GLOBAL _spr_move_horizontal
544   0000              	GLOBAL _spr_move_down
545   0000              	GLOBAL _spr_move_up
546   0000              	GLOBAL _spr_calc_index
547   0000              	GLOBAL _spr_chktime
548   0000              	GLOBAL _sound_hit_brick
549   0000              	GLOBAL _sound_hit_enemy
550   0000              	GLOBAL _sound_kill
551   0000              	GLOBAL _sound_enter_enemy
552   0000              	GLOBAL _sound_coin
553   0000              	GLOBAL _sound_jump
554   0000              	GLOBAL _sound_slide
555   0000              	GLOBAL _player_player_hit_pow
556   0000              	GLOBAL _game_obj_chk
557   0000              	GLOBAL _game_obj_set
558   0000              	GLOBAL _game_shoot_fire
559   0000              	GLOBAL _game_add_enemy
560   0000              	GLOBAL _game_joystick_set_menu
561   0000              	GLOBAL _game_joystick_set
562   0000              	GLOBAL _game_joystick_change
563   0000              	GLOBAL _game_print_header
564   0000              	GLOBAL _game_end
565   0000              	GLOBAL _game_phase_print_score_back
566   0000              	GLOBAL _game_check_time
567   0000              	GLOBAL _game_rotate_attrib
568   0000              	GLOBAL _game_colour_message
569   0000              	GLOBAL _game_paint_attrib_lin_h
570   0000              	GLOBAL _game_paint_attrib_lin
571   0000              	GLOBAL _game_paint_attrib
572   0000              	GLOBAL _game_print_score
573   0000              	GLOBAL _game_unfreeze_all
574   0000              	GLOBAL _game_freeze_all
575   0000              	GLOBAL _game_freeze
576   0000              	GLOBAL _game_enemy_add_get_index
577   0000              	GLOBAL _game_check_cell
578   0000              	GLOBAL _game_check_map
579   0000              	GLOBAL _game_loop
580   0000              	GLOBAL _game_round_init
581   0000              	GLOBAL _game_start_timer
582   0000              	GLOBAL _game_tick
583   0000              	GLOBAL _game_update_stats
584   0000              	GLOBAL _game_print_footer
585   0000              	GLOBAL _game_fill_row
586   0000              	GLOBAL _game_draw_screen
587   0000              	GLOBAL _enemy_avoid_fall_dead
588   0000              	GLOBAL _enemy_avoid_fall
589   0000              	GLOBAL _enemy_respawn
590   0000              	GLOBAL _enemy_init
591   0000              	GLOBAL _enemy_move
592   0000              	GLOBAL _enemy_turn
593   0000              	GLOBAL _enemy_hit
594   0000              	GLOBAL _enemy_coin1
595   0000              	GLOBAL _enemy_static
596   0000              	GLOBAL _enemy_walk
597   0000              	GLOBAL _enemy_horizontal
598   0000              	GLOBAL _enemy_vertical
599   0000              	GLOBAL _ay_fx_play
600   0000              	GLOBAL _ay_midi_play
601   0000              	GLOBAL _ay_is_playing
602   0000              	GLOBAL _ay_reset
603   0000              	GLOBAL _test_func
604   0000              	GLOBAL _test_proc
605   0000              	GLOBAL _in_mouse_kempston_wheel_delta
606   0000              	GLOBAL _in_mouse_kempston_wheel
607   0000              	GLOBAL _in_mouse_kempston_callee
608   0000              	GLOBAL _in_mouse_kempston
609   0000              	GLOBAL _in_mouse_kempston_setpos_callee
610   0000              	GLOBAL _in_mouse_kempston_setpos
611   0000              	GLOBAL _in_mouse_kempston_reset
612   0000              	GLOBAL _in_mouse_kempston_init
613   0000              	GLOBAL _in_mouse_amx_wheel_delta
614   0000              	GLOBAL _in_mouse_amx_wheel
615   0000              	GLOBAL _in_mouse_amx_callee
616   0000              	GLOBAL _in_mouse_amx
617   0000              	GLOBAL _in_mouse_amx_setpos_callee
618   0000              	GLOBAL _in_mouse_amx_setpos
619   0000              	GLOBAL _in_mouse_amx_reset
620   0000              	GLOBAL _in_mouse_amx_init_callee
621   0000              	GLOBAL _in_mouse_amx_init
622   0000              	GLOBAL _in_stick_sinclair2
623   0000              	GLOBAL _in_stick_sinclair1
624   0000              	GLOBAL _in_stick_kempston
625   0000              	GLOBAL _in_stick_fuller
626   0000              	GLOBAL _in_stick_cursor
627   0000              	GLOBAL _in_stick_keyboard_fastcall
628   0000              	GLOBAL _in_stick_keyboard
629   0000              	GLOBAL _in_wait_nokey
630   0000              	GLOBAL _in_wait_key
631   0000              	GLOBAL _in_test_key
632   0000              	GLOBAL _in_pause_fastcall
633   0000              	GLOBAL _in_pause
634   0000              	GLOBAL _in_key_scancode_fastcall
635   0000              	GLOBAL _in_key_scancode
636   0000              	GLOBAL _in_key_pressed_fastcall
637   0000              	GLOBAL _in_key_pressed
638   0000              	GLOBAL _in_inkey
639   0000              	GLOBAL _NIRVANAP_CHAR_TABLE
640   0000              	GLOBAL _NIRVANAP_WIDE_IMAGES
641   0000              	GLOBAL _NIRVANAP_TILE_IMAGES
642   0000              	GLOBAL _NIRVANAP_HOLE
643   0000              	GLOBAL _NIRVANAP_ISR_HOOK
644   0000              	GLOBAL _map_paper_last
645   0000              	GLOBAL _map_paper_clr
646   0000              	GLOBAL _map_paper
647   0000              	GLOBAL _draw_count
648   0000              	GLOBAL _g_player_hit_right
649   0000              	GLOBAL _g_player_hit_left
650   0000              	GLOBAL _joynames
651   0000              	GLOBAL _initials
652   0000              	GLOBAL _bullet_count
653   0000              	GLOBAL _bullet_frames
654   0000              	GLOBAL _bullet_colint
655   0000              	GLOBAL _bullet_dir
656   0000              	GLOBAL _bullet_tile
657   0000              	GLOBAL _bullet_col
658   0000              	GLOBAL _bullet_lin
659   0000              	GLOBAL _mush_class
660   0000              	GLOBAL _mush_index
661   0000              	GLOBAL _anim_count
662   0000              	GLOBAL _anim_respanwn
663   0000              	GLOBAL _anim_loop
664   0000              	GLOBAL _anim_end
665   0000              	GLOBAL _anim_int
666   0000              	GLOBAL _anim_tile
667   0000              	GLOBAL _anim_col
668   0000              	GLOBAL _anim_lin
669   0000              	GLOBAL _phase_curr
670   0000              	GLOBAL _map_heigth
671   0000              	GLOBAL _map_width
672   0000              	GLOBAL _scr_curr
673   0000              	GLOBAL _scr_obj1
674   0000              	GLOBAL _scr_obj0
675   0000              	GLOBAL _scr_map
676   0000              	GLOBAL _sprite_speed_alt
677   0000              	GLOBAL _sprite_frames
678   0000              	GLOBAL _sprite_speed
679   0000              	GLOBAL _screen_ink
680   0000              	GLOBAL _screen_paper
681   0000              	GLOBAL _player_over_stair
682   0000              	GLOBAL _game_start_scr
683   0000              	GLOBAL _game_respawning
684   0000              	GLOBAL _game_respawn_tile
685   0000              	GLOBAL _game_respawn_index
686   0000              	GLOBAL _game_menu_sel
687   0000              	GLOBAL _game_score_top
688   0000              	GLOBAL _player_lives
689   0000              	GLOBAL _game_over
690   0000              	GLOBAL _game_sound
691   0000              	GLOBAL _game_inmune
692   0000              	GLOBAL _game_god_mode
693   0000              	GLOBAL _game_two_player
694   0000              	GLOBAL _game_brick_tile
695   0000              	GLOBAL _sprite_curr_index
696   0000              	GLOBAL _spr_count
697   0000              	GLOBAL _bullet_time
698   0000              	GLOBAL _anim_time
699   0000              	GLOBAL _frame_time
700   0000              	GLOBAL _entry_time
701   0000              	GLOBAL _curr_time
702   0000              	GLOBAL _s_state
703   0000              	GLOBAL _attrib_hl
704   0000              	GLOBAL _attrib
705   0000              	GLOBAL _zx_val_asm
706   0000              	GLOBAL _enemies
707   0000              	GLOBAL _tmp_ui
708   0000              	GLOBAL _tmp_sc
709   0000              	GLOBAL _tmp_uc
710   0000              	GLOBAL _tmp1
711   0000              	GLOBAL _tmp0
712   0000              	GLOBAL _tmp
713   0000              	GLOBAL _index1
714   0000              	GLOBAL _index0
715   0000              	GLOBAL _loop_count
716   0000              	GLOBAL _s_col1
717   0000              	GLOBAL _s_col0
718   0000              	GLOBAL _s_lin1
719   0000              	GLOBAL _s_lin0
720   0000              	GLOBAL _s_tile1
721   0000              	GLOBAL _s_tile0
722   0000              	GLOBAL _player_hit_count
723   0000              	GLOBAL _sprite_horizontal_check
724   0000              	GLOBAL _sprite_on_air
725   0000              	GLOBAL _sprite
726   0000              	GLOBAL _game_gravity
727   0000              	GLOBAL _player_hit_time
728   0000              	GLOBAL _player_int
729   0000              	GLOBAL _player_dex
730   0000              	GLOBAL _player_str
731   0000              	GLOBAL _player_vita
732   0000              	GLOBAL _player_mana
733   0000              	GLOBAL _player_keys
734   0000              	GLOBAL _player_vel_inc
735   0000              	GLOBAL _player_vel_y1
736   0000              	GLOBAL _player_vel_y0
737   0000              	GLOBAL _player_vel_y
738   0000              	GLOBAL _player_vel_x
739   0000              	GLOBAL _player_joy
740   0000              	GLOBAL _player_score
741   0000              	GLOBAL _last_time
742   0000              	GLOBAL _player_slide
743   0000              	GLOBAL _spr_timer
744   0000              	GLOBAL _jump_lin
745   0000              	GLOBAL _player_hit_col
746   0000              	GLOBAL _player_hit_lin
747   0000              	GLOBAL _colint
748   0000              	GLOBAL _col
749   0000              	GLOBAL _lin
750   0000              	GLOBAL _tile
751   0000              	GLOBAL _state_a
752   0000              	GLOBAL _state
753   0000              	GLOBAL _class
754   0000              	GLOBAL _tbuffer
755   0000              	GLOBAL _dirs
756   0000              	GLOBAL _k1
757   0000              	GLOBAL _joyfunc1
758   0000              	GLOBAL _btiles
759   0000              	GLOBAL _spec128
760   0000              	GLOBAL _GLOBAL_ZX_PORT_7FFD
761   0000              	GLOBAL _GLOBAL_ZX_PORT_1FFD
762   0000              	GLOBAL _GLOBAL_ZX_PORT_FE
763   0000              	GLOBAL _ay_effect_20
764   0000              	GLOBAL _ay_effect_19
765   0000              	GLOBAL _ay_effect_18
766   0000              	GLOBAL _ay_effect_17
767   0000              	GLOBAL _ay_effect_16
768   0000              	GLOBAL _ay_effect_15
769   0000              	GLOBAL _ay_effect_14
770   0000              	GLOBAL _ay_effect_13
771   0000              	GLOBAL _ay_effect_12
772   0000              	GLOBAL _ay_effect_11
773   0000              	GLOBAL _ay_effect_10
774   0000              	GLOBAL _ay_effect_09
775   0000              	GLOBAL _ay_effect_08
776   0000              	GLOBAL _ay_effect_07
777   0000              	GLOBAL _ay_effect_06
778   0000              	GLOBAL _ay_effect_05
779   0000              	GLOBAL _ay_effect_04
780   0000              	GLOBAL _ay_effect_03
781   0000              	GLOBAL _ay_effect_02
782   0000              	GLOBAL _ay_effect_01
783   0000              	GLOBAL _pb_midi_phase_1
784   0000              	GLOBAL _pb_midi_title
785   0000              	GLOBAL _control_method
786   0000              	GLOBAL _world0
787   0000              	GLOBAL _lenght0
788   0000              	GLOBAL _start_scr0
789   0000              ;--------------------------------------------------------
790   0000              ; special function registers
791   0000              ;--------------------------------------------------------
792   0000              defc _IO_FE	=	0x00fe
793   0000              defc _IO_1FFD	=	0x1ffd
794   0000              defc _IO_7FFD	=	0x7ffd
795   0000              ;--------------------------------------------------------
796   0000              ; ram data
797   0000              ;--------------------------------------------------------
798   0000              	SECTION bss_compiler
799   0000              ;--------------------------------------------------------
800   0000              ; ram data
801   0000              ;--------------------------------------------------------
802   0000              
803   0000              IF 0
804   0000              
805   0000              ; .area _INITIALIZED removed by z88dk
806   0000              
807   0000              
808   0000              ENDIF
809   0000              
810   0000              ;--------------------------------------------------------
811   0000              ; absolute external ram data
812   0000              ;--------------------------------------------------------
813   0000              	SECTION IGNORE
814   0000              ;--------------------------------------------------------
815   0000              ; global & static initialisations
816   0000              ;--------------------------------------------------------
817   0000              	SECTION code_crt_init
818   0000              ;--------------------------------------------------------
819   0000              ; Home
820   0000              ;--------------------------------------------------------
821   0000              	SECTION IGNORE
822   0000              ;--------------------------------------------------------
823   0000              ; code
824   0000              ;--------------------------------------------------------
825   0000              	SECTION code_compiler
826   0000              ;	---------------------------------
827   0000              ; Function player_init
828   0000              ; ---------------------------------
829   0000              _player_init:
830   0000  CD 00 00    	call	___sdcc_enter_ix
831   0003  F5          	push	af
832   0004  3E 00       	ld	a, +((_class) & 0xFF)
833   0006  DD 86 04    	add	a,(ix+4)
834   0009  4F          	ld	c, a
835   000A  3E 00       	ld	a, +((_class) / 256)
836   000C  CE 00       	adc	a,0x00
837   000E  47          	ld	b, a
838   000F  AF          	xor	a, a
839   0010  02          	ld	(bc), a
840   0011  3E 00       	ld	a, +((_tile) & 0xFF)
841   0013  DD 86 04    	add	a,(ix+4)
842   0016  4F          	ld	c, a
843   0017  3E 00       	ld	a, +((_tile) / 256)
844   0019  CE 00       	adc	a,0x00
845   001B  47          	ld	b, a
846   001C  DD 7E 07    	ld	a,(ix+7)
847   001F  02          	ld	(bc), a
848   0020  3E 00       	ld	a, +((_lin) & 0xFF)
849   0022  DD 86 04    	add	a,(ix+4)
850   0025  4F          	ld	c, a
851   0026  3E 00       	ld	a, +((_lin) / 256)
852   0028  CE 00       	adc	a,0x00
853   002A  47          	ld	b, a
854   002B  DD 7E 05    	ld	a,(ix+5)
855   002E  02          	ld	(bc), a
856   002F  3E 00       	ld	a, +((_col) & 0xFF)
857   0031  DD 86 04    	add	a,(ix+4)
858   0034  4F          	ld	c, a
859   0035  3E 00       	ld	a, +((_col) / 256)
860   0037  CE 00       	adc	a,0x00
861   0039  47          	ld	b, a
862   003A  DD 7E 06    	ld	a,(ix+6)
863   003D  02          	ld	(bc), a
864   003E  3E 00       	ld	a, +((_colint) & 0xFF)
865   0040  DD 86 04    	add	a,(ix+4)
866   0043  4F          	ld	c, a
867   0044  3E 00       	ld	a, +((_colint) / 256)
868   0046  CE 00       	adc	a,0x00
869   0048  47          	ld	b, a
870   0049  AF          	xor	a, a
871   004A  02          	ld	(bc), a
872   004B  3E 00       	ld	a, +((_state) & 0xFF)
873   004D  DD 86 04    	add	a,(ix+4)
874   0050  4F          	ld	c, a
875   0051  3E 00       	ld	a, +((_state) / 256)
876   0053  CE 00       	adc	a,0x00
877   0055  47          	ld	b, a
878   0056  AF          	xor	a, a
879   0057  02          	ld	(bc), a
880   0058  3E 00       	ld	a, +((_state_a) & 0xFF)
881   005A  DD 86 04    	add	a,(ix+4)
882   005D  4F          	ld	c, a
883   005E  3E 00       	ld	a, +((_state_a) / 256)
884   0060  CE 00       	adc	a,0x00
885   0062  47          	ld	b, a
886   0063  AF          	xor	a, a
887   0064  02          	ld	(bc), a
888   0065  3E 00       	ld	a, +((_jump_lin) & 0xFF)
889   0067  DD 86 04    	add	a,(ix+4)
890   006A  5F          	ld	e, a
891   006B  3E 00       	ld	a, +((_jump_lin) / 256)
892   006D  CE 00       	adc	a,0x00
893   006F  57          	ld	d, a
894   0070  DD 7E 05    	ld	a,(ix+5)
895   0073  12          	ld	(de), a
896   0074  DD 6E 04    	ld	l,(ix+4)
897   0077  26 00       	ld	h,0x00
898   0079  29          	add	hl,hl
899   007A  11 00 00    	ld	de,_last_time
900   007D  19          	add	hl, de
901   007E  E3          	ex	(sp), hl
902   007F  E1          	pop	hl
903   0080  ED 5B 00 00 	ld	de,(_curr_time)
904   0084  E5          	push	hl
905   0085  73          	ld	(hl), e
906   0086  23          	inc	hl
907   0087  72          	ld	(hl), d
908   0088  3E 00       	ld	a, +((_sprite_speed_alt) & 0xFF)
909   008A  DD 86 04    	add	a,(ix+4)
910   008D  5F          	ld	e, a
911   008E  3E 00       	ld	a, +((_sprite_speed_alt) / 256)
912   0090  CE 00       	adc	a,0x00
913   0092  57          	ld	d, a
914   0093  AF          	xor	a, a
915   0094  12          	ld	(de), a
916   0095  0A          	ld	a, (bc)
917   0096  F6 11       	or	a,+(0x01|0x10)
918   0098  02          	ld	(bc),a
919   0099  21 00 00    	ld	hl,_player_hit_col
920   009C  36 00       	ld	(hl),0x00
921   009E  21 00 00    	ld	hl,_player_hit_lin
922   00A1  36 00       	ld	(hl),0x00
923   00A3  21 00 00    	ld	hl,_player_slide
924   00A6  36 00       	ld	(hl),0x00
925   00A8  DD 66 06    	ld	h,(ix+6)
926   00AB  DD 6E 05    	ld	l,(ix+5)
927   00AE  E5          	push	hl
928   00AF  DD 66 07    	ld	h,(ix+7)
929   00B2  DD 6E 04    	ld	l,(ix+4)
930   00B5  E5          	push	hl
931   00B6  CD 00 00    	call	_NIRVANAP_spriteT_callee
932   00B9  F1          	pop	af
933   00BA  DD E1       	pop	ix
934   00BC  C9          	ret
935   00BD              	SECTION code_compiler
936   00BD              ;	---------------------------------
937   00BD              ; Function player_check_input
938   00BD              ; ---------------------------------
939   00BD              _player_check_input:
940   00BD  21 00 00    	ld	hl,_dirs
941   00C0  CB 56       	bit	2, (hl)
942   00C2  28 0C       	jr	Z,l_player_check_input_00102
943   00C4  21 00 00    	ld	hl,_dirs
944   00C7  CB 5E       	bit	3, (hl)
945   00C9  28 05       	jr	Z,l_player_check_input_00102
946   00CB  21 00 00    	ld	hl,_dirs
947   00CE  36 00       	ld	(hl),0x00
948   00D0              l_player_check_input_00102:
949   00D0  21 00 00    	ld	hl,_dirs
950   00D3  7E          	ld	a, (hl)
951   00D4  CB 07       	rlc	a
952   00D6  E6 01       	and	a,0x01
953   00D8  CB 47       	bit	0, a
954   00DA  20 1D       	jr	NZ,l_player_check_input_00107
955   00DC  CB 56       	bit	2, (hl)
956   00DE  20 19       	jr	NZ,l_player_check_input_00107
957   00E0  21 00 00    	ld	hl,_dirs
958   00E3  CB 5E       	bit	3, (hl)
959   00E5  20 12       	jr	NZ,l_player_check_input_00107
960   00E7  21 00 00    	ld	hl,_dirs
961   00EA  CB 46       	bit	0, (hl)
962   00EC  20 0B       	jr	NZ,l_player_check_input_00107
963   00EE  21 00 00    	ld	hl,_dirs
964   00F1  CB 4E       	bit	1, (hl)
965   00F3  20 04       	jr	NZ,l_player_check_input_00107
966   00F5  2E 00       	ld	l,0x00
967   00F7  18 02       	jr	l_player_check_input_00108
968   00F9              l_player_check_input_00107:
969   00F9  2E 01       	ld	l,0x01
970   00FB              l_player_check_input_00108:
971   00FB  C9          	ret
972   00FC              	SECTION code_compiler
973   00FC              ;	---------------------------------
974   00FC              ; Function player_collision
975   00FC              ; ---------------------------------
976   00FC              _player_collision:
977   00FC  21 19 00    	ld	hl,0x0019
978   00FF  E5          	push	hl
979   0100  2A 00 00    	ld	hl,(_player_hit_time)
980   0103  E5          	push	hl
981   0104  CD 00 00    	call	_game_check_time
982   0107  F1          	pop	af
983   0108  F1          	pop	af
984   0109  7D          	ld	a, l
985   010A  B7          	or	a, a
986   010B  CA 11 02    	jp	Z, l_player_collision_00120
987   010E  21 00 00    	ld	hl,_sprite
988   0111  36 00       	ld	(hl),0x00
989   0113  3A 07 00    	ld	a,(_col + 7)
990   0116  32 00 00    	ld	(_s_col1),a
991   0119  3A 07 00    	ld	a,(_lin + 7)
992   011C  32 00 00    	ld	(_s_lin1),a
993   011F  C6 08       	add	a,0x08
994   0121  4F          	ld	c, a
995   0122  3A 00 00    	ld	a, (_s_col1)
996   0125  47          	ld	b,a
997   0126  C5          	push	bc
998   0127  CD 00 00    	call	_spr_calc_index
999   012A  F1          	pop	af
1000  012B  7D          	ld	a,l
1001  012C  32 00 00    	ld	(_sprite_curr_index),a
1002  012F  4F          	ld	c,a
1003  0130  06 00       	ld	b,0x00
1004  0132  21 00 00    	ld	hl,_scr_map
1005  0135  09          	add	hl,bc
1006  0136  4E          	ld	c, (hl)
1007  0137  3E 2F       	ld	a,0x2f
1008  0139  91          	sub	a, c
1009  013A  30 0F       	jr	NC,l_player_collision_00116
1010  013C  79          	ld	a, c
1011  013D  D6 3C       	sub	a,0x3c
1012  013F  30 0A       	jr	NC,l_player_collision_00116
1013  0141  2E 06       	ld	l,0x06
1014  0143  CD 00 00    	call	_zx_border_fastcall
1015  0146  2E 32       	ld	l,0x32
1016  0148  CD 4B 0F    	call	_player_hit
1017  014B              l_player_collision_00116:
1018  014B  21 00 00    	ld	hl,_sprite
1019  014E  7E          	ld	a, (hl)
1020  014F  D6 07       	sub	a,0x07
1021  0151  D2 11 02    	jp	NC, l_player_collision_00120
1022  0154  3E 00       	ld	a, +((_class) & 0xFF)
1023  0156  86          	add	a, (hl)
1024  0157  4F          	ld	c, a
1025  0158  3E 00       	ld	a, +((_class) / 256)
1026  015A  CE 00       	adc	a,0x00
1027  015C  47          	ld	b, a
1028  015D  0A          	ld	a, (bc)
1029  015E  B7          	or	a, a
1030  015F  CA 0A 02    	jp	Z, l_player_collision_00115
1031  0162  4E          	ld	c,(hl)
1032  0163  06 00       	ld	b,0x00
1033  0165  21 00 00    	ld	hl,_col
1034  0168  09          	add	hl,bc
1035  0169  4E          	ld	c, (hl)
1036  016A  06 00       	ld	b,0x00
1037  016C  3A 00 00    	ld	a,(_s_col1)
1038  016F  5F          	ld	e,a
1039  0170  16 00       	ld	d,0x00
1040  0172  79          	ld	a, c
1041  0173  93          	sub	a, e
1042  0174  6F          	ld	l, a
1043  0175  78          	ld	a, b
1044  0176  9A          	sbc	a, d
1045  0177  67          	ld	h, a
1046  0178  CD 00 00    	call	_abs_fastcall
1047  017B  7D          	ld	a,l
1048  017C  D6 02       	sub	a,0x02
1049  017E  7C          	ld	a,h
1050  017F  17          	rla
1051  0180  3F          	ccf
1052  0181  1F          	rra
1053  0182  DE 80       	sbc	a,0x80
1054  0184  D2 0A 02    	jp	NC, l_player_collision_00115
1055  0187  2A 00 00    	ld	hl,(_sprite)
1056  018A  26 00       	ld	h,0x00
1057  018C  01 00 00    	ld	bc,_lin
1058  018F  09          	add	hl,bc
1059  0190  4E          	ld	c,(hl)
1060  0191  06 00       	ld	b,0x00
1061  0193  3A 00 00    	ld	a,(_s_lin1)
1062  0196  5F          	ld	e,a
1063  0197  16 00       	ld	d,0x00
1064  0199  79          	ld	a, c
1065  019A  93          	sub	a, e
1066  019B  6F          	ld	l, a
1067  019C  78          	ld	a, b
1068  019D  9A          	sbc	a, d
1069  019E  67          	ld	h, a
1070  019F  CD 00 00    	call	_abs_fastcall
1071  01A2  7D          	ld	a,l
1072  01A3  D6 0E       	sub	a,0x0e
1073  01A5  7C          	ld	a,h
1074  01A6  17          	rla
1075  01A7  3F          	ccf
1076  01A8  1F          	rra
1077  01A9  DE 80       	sbc	a,0x80
1078  01AB  30 5D       	jr	NC,l_player_collision_00115
1079  01AD  2A 00 00    	ld	hl,(_sprite)
1080  01B0  26 00       	ld	h,0x00
1081  01B2  01 00 00    	ld	bc,_class
1082  01B5  09          	add	hl,bc
1083  01B6  7E          	ld	a,(hl)
1084  01B7  FE 06       	cp	a,0x06
1085  01B9  20 14       	jr	NZ,l_player_collision_00105
1086  01BB  21 00 00    	ld	hl,_player_vita
1087  01BE  7E          	ld	a, (hl)
1088  01BF  C6 14       	add	a,0x14
1089  01C1  77          	ld	(hl), a
1090  01C2  CD 00 00    	call	_game_update_stats
1091  01C5  2A 00 00    	ld	hl,(_sprite)
1092  01C8  CD 00 00    	call	_spr_destroy
1093  01CB  2E 00       	ld	l,0x00
1094  01CD  18 44       	jr	l_player_collision_00121
1095  01CF              l_player_collision_00105:
1096  01CF  FE 07       	cp	a,0x07
1097  01D1  20 14       	jr	NZ,l_player_collision_00107
1098  01D3  21 00 00    	ld	hl,_player_mana
1099  01D6  7E          	ld	a, (hl)
1100  01D7  C6 14       	add	a,0x14
1101  01D9  77          	ld	(hl), a
1102  01DA  CD 00 00    	call	_game_update_stats
1103  01DD  2A 00 00    	ld	hl,(_sprite)
1104  01E0  CD 00 00    	call	_spr_destroy
1105  01E3  2E 00       	ld	l,0x00
1106  01E5  18 2C       	jr	l_player_collision_00121
1107  01E7              l_player_collision_00107:
1108  01E7  D6 08       	sub	a,0x08
1109  01E9  20 11       	jr	NZ,l_player_collision_00109
1110  01EB  21 00 00    	ld	hl,_player_lives
1111  01EE  34          	inc	(hl)
1112  01EF  CD 00 00    	call	_game_update_stats
1113  01F2  2A 00 00    	ld	hl,(_sprite)
1114  01F5  CD 00 00    	call	_spr_destroy
1115  01F8  2E 00       	ld	l,0x00
1116  01FA  18 17       	jr	l_player_collision_00121
1117  01FC              l_player_collision_00109:
1118  01FC  2E 02       	ld	l,0x02
1119  01FE  CD 00 00    	call	_zx_border_fastcall
1120  0201  2E 14       	ld	l,0x14
1121  0203  CD 4B 0F    	call	_player_hit
1122  0206  2E 01       	ld	l,0x01
1123  0208  18 09       	jr	l_player_collision_00121
1124  020A              l_player_collision_00115:
1125  020A  21 00 00    	ld	hl,_sprite
1126  020D  34          	inc	(hl)
1127  020E  C3 4B 01    	jp	l_player_collision_00116
1128  0211              l_player_collision_00120:
1129  0211  2E 00       	ld	l,0x00
1130  0213              l_player_collision_00121:
1131  0213  C9          	ret
1132  0214              	SECTION code_compiler
1133  0214              ;	---------------------------------
1134  0214              ; Function player_kill
1135  0214              ; ---------------------------------
1136  0214              _player_kill:
1137  0214  01 00 00    	ld	bc,_state+0
1138  0217  2A 00 00    	ld	hl,(_sprite)
1139  021A  26 00       	ld	h,0x00
1140  021C  09          	add	hl,bc
1141  021D  CB 6E       	bit	5,(hl)
1142  021F  C2 E6 02    	jp	NZ,l_player_kill_00109
1143  0222  C5          	push	bc
1144  0223  CD 00 00    	call	_sound_hit_brick
1145  0226  C1          	pop	bc
1146  0227  79          	ld	a, c
1147  0228  21 00 00    	ld	hl,_sprite
1148  022B  86          	add	a, (hl)
1149  022C  5F          	ld	e, a
1150  022D  78          	ld	a, b
1151  022E  CE 00       	adc	a,0x00
1152  0230  57          	ld	d, a
1153  0231  1A          	ld	a, (de)
1154  0232  F6 20       	or	a,0x20
1155  0234  12          	ld	(de), a
1156  0235  3E 00       	ld	a, +((_sprite_speed_alt) & 0xFF)
1157  0237  86          	add	a, (hl)
1158  0238  5F          	ld	e, a
1159  0239  3E 00       	ld	a, +((_sprite_speed_alt) / 256)
1160  023B  CE 00       	adc	a,0x00
1161  023D  57          	ld	d, a
1162  023E  3E 03       	ld	a,0x03
1163  0240  12          	ld	(de), a
1164  0241  79          	ld	a, c
1165  0242  86          	add	a, (hl)
1166  0243  4F          	ld	c, a
1167  0244  78          	ld	a, b
1168  0245  CE 00       	adc	a,0x00
1169  0247  47          	ld	b, a
1170  0248  0A          	ld	a, (bc)
1171  0249  CB 57       	bit	2, a
1172  024B  28 0D       	jr	Z,l_player_kill_00102
1173  024D  2A 00 00    	ld	hl,(_sprite)
1174  0250  26 00       	ld	h,0x00
1175  0252  01 00 00    	ld	bc,_tile
1176  0255  09          	add	hl,bc
1177  0256  36 4C       	ld	(hl),0x4c
1178  0258  18 0B       	jr	l_player_kill_00103
1179  025A              l_player_kill_00102:
1180  025A  2A 00 00    	ld	hl,(_sprite)
1181  025D  26 00       	ld	h,0x00
1182  025F  01 00 00    	ld	bc,_tile
1183  0262  09          	add	hl,bc
1184  0263  36 54       	ld	(hl),0x54
1185  0265              l_player_kill_00103:
1186  0265  CD B8 0A    	call	_player_hit_platform_clear
1187  0268  2A 00 00    	ld	hl,(_sprite)
1188  026B  26 00       	ld	h,0x00
1189  026D  01 00 00    	ld	bc,_col
1190  0270  09          	add	hl,bc
1191  0271  4E          	ld	c, (hl)
1192  0272  2A 00 00    	ld	hl,(_sprite)
1193  0275  26 00       	ld	h,0x00
1194  0277  11 00 00    	ld	de,_lin
1195  027A  19          	add	hl,de
1196  027B  46          	ld	b, (hl)
1197  027C  2A 00 00    	ld	hl,(_sprite)
1198  027F  26 00       	ld	h,0x00
1199  0281  11 00 00    	ld	de,_tile
1200  0284  19          	add	hl,de
1201  0285  56          	ld	d, (hl)
1202  0286  79          	ld	a,c
1203  0287  21 00 00    	ld	hl,_sprite
1204  028A  F5          	push	af
1205  028B  33          	inc	sp
1206  028C  4A          	ld	c, d
1207  028D  7E          	ld	a,(hl)
1208  028E  C5          	push	bc
1209  028F  F5          	push	af
1210  0290  33          	inc	sp
1211  0291  CD 00 00    	call	_NIRVANAP_spriteT_callee
1212  0294  01 00 00    	ld	bc,_spr_timer+0
1213  0297  2A 00 00    	ld	hl,(_sprite)
1214  029A  26 00       	ld	h,0x00
1215  029C  29          	add	hl, hl
1216  029D  09          	add	hl,bc
1217  029E  ED 5B 00 00 	ld	de,(_curr_time)
1218  02A2  73          	ld	(hl),e
1219  02A3  23          	inc	hl
1220  02A4  72          	ld	(hl),d
1221  02A5  3A 00 00    	ld	a,(_sprite)
1222  02A8  D6 07       	sub	a,0x07
1223  02AA  20 1E       	jr	NZ,l_player_kill_00105
1224  02AC  01 00 00    	ld	bc,_state_a+0
1225  02AF  79          	ld	a, c
1226  02B0  21 00 00    	ld	hl,_sprite
1227  02B3  86          	add	a, (hl)
1228  02B4  5F          	ld	e, a
1229  02B5  78          	ld	a, b
1230  02B6  CE 00       	adc	a,0x00
1231  02B8  57          	ld	d, a
1232  02B9  1A          	ld	a, (de)
1233  02BA  F6 08       	or	a,0x08
1234  02BC  12          	ld	(de), a
1235  02BD  79          	ld	a, c
1236  02BE  86          	add	a, (hl)
1237  02BF  4F          	ld	c, a
1238  02C0  78          	ld	a, b
1239  02C1  CE 00       	adc	a,0x00
1240  02C3  47          	ld	b, a
1241  02C4  0A          	ld	a, (bc)
1242  02C5  E6 EF       	and	a,0xef
1243  02C7  02          	ld	(bc), a
1244  02C8  18 1C       	jr	l_player_kill_00109
1245  02CA              l_player_kill_00105:
1246  02CA  01 00 00    	ld	bc,_state_a+0
1247  02CD  79          	ld	a, c
1248  02CE  21 00 00    	ld	hl,_sprite
1249  02D1  86          	add	a, (hl)
1250  02D2  5F          	ld	e, a
1251  02D3  78          	ld	a, b
1252  02D4  CE 00       	adc	a,0x00
1253  02D6  57          	ld	d, a
1254  02D7  1A          	ld	a, (de)
1255  02D8  F6 10       	or	a,0x10
1256  02DA  12          	ld	(de), a
1257  02DB  79          	ld	a, c
1258  02DC  86          	add	a, (hl)
1259  02DD  4F          	ld	c, a
1260  02DE  78          	ld	a, b
1261  02DF  CE 00       	adc	a,0x00
1262  02E1  47          	ld	b, a
1263  02E2  0A          	ld	a, (bc)
1264  02E3  E6 F7       	and	a,0xf7
1265  02E5  02          	ld	(bc), a
1266  02E6              l_player_kill_00109:
1267  02E6  C9          	ret
1268  02E7              	SECTION code_compiler
1269  02E7              ;	---------------------------------
1270  02E7              ; Function player_restart
1271  02E7              ; ---------------------------------
1272  02E7              _player_restart:
1273  02E7  CD 00 00    	call	___sdcc_enter_ix
1274  02EA  F5          	push	af
1275  02EB  4D          	ld	c, l
1276  02EC  21 00 00    	ld	hl,_ay_effect_15
1277  02EF  CD 00 00    	call	_ay_fx_play
1278  02F2  C5          	push	bc
1279  02F3  21 0E 70    	ld	hl,0x700e
1280  02F6  E5          	push	hl
1281  02F7  21 07 00    	ld	hl,0x0007
1282  02FA  E5          	push	hl
1283  02FB  CD 00 00    	call	_player_init
1284  02FE  F1          	pop	af
1285  02FF  F1          	pop	af
1286  0300  C1          	pop	bc
1287  0301  11 00 00    	ld	de,_state+0
1288  0304  69          	ld	l,c
1289  0305  26 00       	ld	h,0x00
1290  0307  19          	add	hl, de
1291  0308  CB E6       	set	4, (hl)
1292  030A  11 00 00    	ld	de,_state_a+0
1293  030D  69          	ld	l,c
1294  030E  26 00       	ld	h,0x00
1295  0310  19          	add	hl, de
1296  0311  CB C6       	set	0, (hl)
1297  0313  11 00 00    	ld	de,_spr_timer+0
1298  0316  69          	ld	l, c
1299  0317  26 00       	ld	h,0x00
1300  0319  29          	add	hl, hl
1301  031A  19          	add	hl,de
1302  031B  E3          	ex	(sp), hl
1303  031C  E1          	pop	hl
1304  031D  ED 5B 00 00 	ld	de,(_curr_time)
1305  0321  E5          	push	hl
1306  0322  73          	ld	(hl), e
1307  0323  23          	inc	hl
1308  0324  72          	ld	(hl), d
1309  0325  11 00 00    	ld	de,_sprite_speed_alt+0
1310  0328  69          	ld	l,c
1311  0329  26 00       	ld	h,0x00
1312  032B  19          	add	hl, de
1313  032C  F1          	pop	af
1314  032D  36 08       	ld	(hl),0x08
1315  032F  DD E1       	pop	ix
1316  0331  C9          	ret
1317  0332              	SECTION code_compiler
1318  0332              ;	---------------------------------
1319  0332              ; Function player_turn
1320  0332              ; ---------------------------------
1321  0332              _player_turn:
1322  0332  3A 00 00    	ld	a,(_player_lives)
1323  0335  B7          	or	a, a
1324  0336  C8          	ret	Z
1325  0337  21 00 00    	ld	hl,_sprite
1326  033A  CD 00 00    	call	_spr_chktime
1327  033D  7D          	ld	a, l
1328  033E  B7          	or	a, a
1329  033F  C8          	ret	Z
1330  0340  21 00 00    	ld	hl,_k1
1331  0343  E5          	push	hl
1332  0344  2A 00 00    	ld	hl,(_joyfunc1)
1333  0347  CD 00 00    	call	___sdcc_call_hl
1334  034A  F1          	pop	af
1335  034B  7D          	ld	a,l
1336  034C  32 00 00    	ld	(_dirs),a
1337  034F  CD 55 03    	call	_player_move
1338  0352  C3 FC 00    	jp  _player_collision
1339  0355              	SECTION code_compiler
1340  0355              ;	---------------------------------
1341  0355              ; Function player_move
1342  0355              ; ---------------------------------
1343  0355              _player_move:
1344  0355  2A 00 00    	ld	hl,(_sprite)
1345  0358  26 00       	ld	h,0x00
1346  035A  01 00 00    	ld	bc,_lin
1347  035D  09          	add	hl,bc
1348  035E  7E          	ld	a,(hl)
1349  035F  32 00 00    	ld	(_s_lin0),a
1350  0362  2A 00 00    	ld	hl,(_sprite)
1351  0365  26 00       	ld	h,0x00
1352  0367  01 00 00    	ld	bc,_col
1353  036A  09          	add	hl,bc
1354  036B  7E          	ld	a,(hl)
1355  036C  32 00 00    	ld	(_s_col0),a
1356  036F  2A 00 00    	ld	hl,(_sprite)
1357  0372  26 00       	ld	h,0x00
1358  0374  01 00 00    	ld	bc,_tile
1359  0377  09          	add	hl,bc
1360  0378  4E          	ld	c, (hl)
1361  0379  3A 00 00    	ld	a,(_sprite)
1362  037C  5F          	ld	e,a
1363  037D  16 00       	ld	d,0x00
1364  037F  21 00 00    	ld	hl,_colint
1365  0382  19          	add	hl,de
1366  0383  7E          	ld	a,(hl)
1367  0384  81          	add	a,c
1368  0385  32 00 00    	ld	(_s_tile0),a
1369  0388  2A 00 00    	ld	hl,(_sprite)
1370  038B  26 00       	ld	h,0x00
1371  038D  01 00 00    	ld	bc,_state
1372  0390  09          	add	hl,bc
1373  0391  7E          	ld	a,(hl)
1374  0392  CB 47       	bit	0,a
1375  0394  32 00 00    	ld	(_s_state),a
1376  0397  20 07       	jr	NZ,l_player_move_00113
1377  0399  21 00 00    	ld	hl,_s_state
1378  039C  CB 4E       	bit	1, (hl)
1379  039E  28 46       	jr	Z,l_player_move_00114
1380  03A0              l_player_move_00113:
1381  03A0  CD E4 06    	call	_player_fire
1382  03A3  3A 00 00    	ld	a,(_player_vel_y)
1383  03A6  21 00 00    	ld	hl,_player_vel_y1
1384  03A9  96          	sub	a, (hl)
1385  03AA  E2 AF 03    	jp	PO, l_player_move_00162
1386  03AD  EE 80       	xor	a,0x80
1387  03AF              l_player_move_00162:
1388  03AF  F2 D2 03    	jp	P, l_player_move_00106
1389  03B2  21 00 00    	ld	hl,_dirs
1390  03B5  CB 56       	bit	2, (hl)
1391  03B7  28 09       	jr	Z,l_player_move_00102
1392  03B9  21 00 00    	ld	hl,_s_state
1393  03BC  7E          	ld	a,(hl)
1394  03BD  F6 08       	or	a,0x08
1395  03BF  E6 FB       	and	a,0xfb
1396  03C1  77          	ld	(hl),a
1397  03C2              l_player_move_00102:
1398  03C2  21 00 00    	ld	hl,_dirs
1399  03C5  CB 4E       	bit	1, (hl)
1400  03C7  28 09       	jr	Z,l_player_move_00106
1401  03C9  21 00 00    	ld	hl,_s_state
1402  03CC  7E          	ld	a,(hl)
1403  03CD  F6 04       	or	a,0x04
1404  03CF  E6 F7       	and	a,0xf7
1405  03D1  77          	ld	(hl),a
1406  03D2              l_player_move_00106:
1407  03D2  CD 8D 0B    	call	_player_move_jump
1408  03D5  7D          	ld	a, l
1409  03D6  B7          	or	a, a
1410  03D7  28 2E       	jr	Z,l_player_move_00115
1411  03D9  3A 00 00    	ld	a,(_player_over_stair)
1412  03DC  B7          	or	a, a
1413  03DD  20 28       	jr	NZ,l_player_move_00115
1414  03DF  2E 60       	ld	l,0x60
1415  03E1  CD 18 05    	call	_player_tile
1416  03E4  18 21       	jr	l_player_move_00115
1417  03E6              l_player_move_00114:
1418  03E6  CD 6E 05    	call	_player_move_input
1419  03E9  7D          	ld	a, l
1420  03EA  B7          	or	a, a
1421  03EB  20 17       	jr	NZ,l_player_move_00112
1422  03ED  2A 00 00    	ld	hl,(_sprite)
1423  03F0  26 00       	ld	h,0x00
1424  03F2  01 00 00    	ld	bc,_colint
1425  03F5  09          	add	hl,bc
1426  03F6  AF          	xor	a,a
1427  03F7  77          	ld	(hl),a
1428  03F8  2E 70       	ld	l,0x70
1429  03FA  CD 18 05    	call	_player_tile
1430  03FD  21 00 00    	ld	hl,_s_state
1431  0400  7E          	ld	a,(hl)
1432  0401  E6 F3       	and	a,+(0xf7&0xfb)
1433  0403  77          	ld	(hl),a
1434  0404              l_player_move_00112:
1435  0404  CD 11 0B    	call	_player_check_floor
1436  0407              l_player_move_00115:
1437  0407  CD 00 00    	call	_spr_redraw
1438  040A  7D          	ld	a, l
1439  040B  B7          	or	a, a
1440  040C  28 03       	jr	Z,l_player_move_00118
1441  040E  CD 21 07    	call	_player_check_map
1442  0411              l_player_move_00118:
1443  0411  3A 00 00    	ld	a,(_player_hit_lin)
1444  0414  B7          	or	a, a
1445  0415  28 03       	jr	Z,l_player_move_00120
1446  0417  CD B8 0A    	call	_player_hit_platform_clear
1447  041A              l_player_move_00120:
1448  041A  2A 00 00    	ld	hl,(_sprite)
1449  041D  26 00       	ld	h,0x00
1450  041F  01 00 00    	ld	bc,_state
1451  0422  09          	add	hl,bc
1452  0423  3A 00 00    	ld	a,(_s_state)
1453  0426  77          	ld	(hl),a
1454  0427  2E 00       	ld	l,0x00
1455  0429  C9          	ret
1456  042A              	SECTION code_compiler
1457  042A              ;	---------------------------------
1458  042A              ; Function player_check_stairs_down
1459  042A              ; ---------------------------------
1460  042A              _player_check_stairs_down:
1461  042A  CD 00 00    	call	___sdcc_enter_ix
1462  042D  3B          	dec	sp
1463  042E  2A 00 00    	ld	hl,(_sprite)
1464  0431  26 00       	ld	h,0x00
1465  0433  5D          	ld	e,l
1466  0434  01 00 00    	ld	bc,_col
1467  0437  09          	add	hl,bc
1468  0438  46          	ld	b,(hl)
1469  0439  16 00       	ld	d,0x00
1470  043B  21 00 00    	ld	hl,_lin
1471  043E  19          	add	hl,de
1472  043F  7E          	ld	a,(hl)
1473  0440  C6 10       	add	a,0x10
1474  0442  4F          	ld	c,a
1475  0443  C5          	push	bc
1476  0444  CD 00 00    	call	_spr_calc_index
1477  0447  F1          	pop	af
1478  0448  7D          	ld	a,l
1479  0449  32 00 00    	ld	(_sprite_curr_index),a
1480  044C  4F          	ld	c,a
1481  044D  06 00       	ld	b,0x00
1482  044F  21 00 00    	ld	hl,_scr_map
1483  0452  09          	add	hl,bc
1484  0453  7E          	ld	a,(hl)
1485  0454  4F          	ld	c,a
1486  0455  D6 44       	sub	a,0x44
1487  0457  38 05       	jr	C,l_player_check_stairs_down_00105
1488  0459  3E 47       	ld	a,0x47
1489  045B  91          	sub	a, c
1490  045C  30 04       	jr	NC,l_player_check_stairs_down_00106
1491  045E              l_player_check_stairs_down_00105:
1492  045E  3E 00       	ld	a,0x00
1493  0460  18 02       	jr	l_player_check_stairs_down_00107
1494  0462              l_player_check_stairs_down_00106:
1495  0462  3E 01       	ld	a,0x01
1496  0464              l_player_check_stairs_down_00107:
1497  0464  B7          	or	a, a
1498  0465  28 05       	jr	Z,l_player_check_stairs_down_00103
1499  0467  21 00 00    	ld	hl,_player_over_stair
1500  046A  36 01       	ld	(hl),0x01
1501  046C              l_player_check_stairs_down_00103:
1502  046C  33          	inc	sp
1503  046D  DD E1       	pop	ix
1504  046F  C9          	ret
1505  0470              	SECTION code_compiler
1506  0470              ;	---------------------------------
1507  0470              ; Function player_check_stairs
1508  0470              ; ---------------------------------
1509  0470              _player_check_stairs:
1510  0470  CD 00 00    	call	___sdcc_enter_ix
1511  0473  3B          	dec	sp
1512  0474  5D          	ld	e, l
1513  0475  2A 00 00    	ld	hl,(_sprite)
1514  0478  26 00       	ld	h,0x00
1515  047A  01 00 00    	ld	bc,_col
1516  047D  09          	add	hl,bc
1517  047E  7E          	ld	a,(hl)
1518  047F  83          	add	a,e
1519  0480  57          	ld	d,a
1520  0481  2A 00 00    	ld	hl,(_sprite)
1521  0484  26 00       	ld	h,0x00
1522  0486  01 00 00    	ld	bc,_lin
1523  0489  09          	add	hl,bc
1524  048A  46          	ld	b, (hl)
1525  048B  D5          	push	de
1526  048C  58          	ld	e,b
1527  048D  D5          	push	de
1528  048E  CD 00 00    	call	_spr_calc_index
1529  0491  F1          	pop	af
1530  0492  D1          	pop	de
1531  0493  7D          	ld	a,l
1532  0494  32 00 00    	ld	(_sprite_curr_index),a
1533  0497  4F          	ld	c,a
1534  0498  06 00       	ld	b,0x00
1535  049A  21 00 00    	ld	hl,_scr_map
1536  049D  09          	add	hl,bc
1537  049E  7E          	ld	a,(hl)
1538  049F  4F          	ld	c,a
1539  04A0  D6 44       	sub	a,0x44
1540  04A2  38 05       	jr	C,l_player_check_stairs_00111
1541  04A4  3E 47       	ld	a,0x47
1542  04A6  91          	sub	a, c
1543  04A7  30 04       	jr	NC,l_player_check_stairs_00112
1544  04A9              l_player_check_stairs_00111:
1545  04A9  0E 00       	ld	c,0x00
1546  04AB  18 02       	jr	l_player_check_stairs_00113
1547  04AD              l_player_check_stairs_00112:
1548  04AD  0E 01       	ld	c,0x01
1549  04AF              l_player_check_stairs_00113:
1550  04AF  3E 00       	ld	a, +((_col) & 0xFF)
1551  04B1  21 00 00    	ld	hl,_sprite
1552  04B4  86          	add	a, (hl)
1553  04B5  6F          	ld	l, a
1554  04B6  3E 00       	ld	a, +((_col) / 256)
1555  04B8  CE 00       	adc	a,0x00
1556  04BA  67          	ld	h, a
1557  04BB  7E          	ld	a, (hl)
1558  04BC  83          	add	a, e
1559  04BD  47          	ld	b, a
1560  04BE  2A 00 00    	ld	hl,(_sprite)
1561  04C1  26 00       	ld	h,0x00
1562  04C3  11 00 00    	ld	de,_lin
1563  04C6  19          	add	hl,de
1564  04C7  7E          	ld	a,(hl)
1565  04C8  C6 0F       	add	a,0x0f
1566  04CA  57          	ld	d, a
1567  04CB  C5          	push	bc
1568  04CC  4A          	ld	c, d
1569  04CD  C5          	push	bc
1570  04CE  CD 00 00    	call	_spr_calc_index
1571  04D1  F1          	pop	af
1572  04D2  C1          	pop	bc
1573  04D3  7D          	ld	a,l
1574  04D4  32 00 00    	ld	(_sprite_curr_index),a
1575  04D7  5F          	ld	e,a
1576  04D8  16 00       	ld	d,0x00
1577  04DA  21 00 00    	ld	hl,_scr_map
1578  04DD  19          	add	hl,de
1579  04DE  7E          	ld	a,(hl)
1580  04DF  47          	ld	b,a
1581  04E0  D6 44       	sub	a,0x44
1582  04E2  38 05       	jr	C,l_player_check_stairs_00114
1583  04E4  3E 47       	ld	a,0x47
1584  04E6  90          	sub	a, b
1585  04E7  30 04       	jr	NC,l_player_check_stairs_00115
1586  04E9              l_player_check_stairs_00114:
1587  04E9  06 00       	ld	b,0x00
1588  04EB  18 02       	jr	l_player_check_stairs_00116
1589  04ED              l_player_check_stairs_00115:
1590  04ED  06 01       	ld	b,0x01
1591  04EF              l_player_check_stairs_00116:
1592  04EF  79          	ld	a, c
1593  04F0  B7          	or	a,a
1594  04F1  20 03       	jr	NZ,l_player_check_stairs_00105
1595  04F3  B0          	or	a,b
1596  04F4  28 10       	jr	Z,l_player_check_stairs_00106
1597  04F6              l_player_check_stairs_00105:
1598  04F6  21 00 00    	ld	hl,_player_over_stair
1599  04F9  7E          	ld	a, (hl)
1600  04FA  B7          	or	a, a
1601  04FB  20 17       	jr	NZ,l_player_check_stairs_00109
1602  04FD  36 01       	ld	(hl),0x01
1603  04FF  2E 72       	ld	l,0x72
1604  0501  CD 18 05    	call	_player_tile
1605  0504  18 0E       	jr	l_player_check_stairs_00109
1606  0506              l_player_check_stairs_00106:
1607  0506  21 00 00    	ld	hl,_player_over_stair
1608  0509  7E          	ld	a, (hl)
1609  050A  B7          	or	a, a
1610  050B  28 07       	jr	Z,l_player_check_stairs_00109
1611  050D  36 00       	ld	(hl),0x00
1612  050F  2E 60       	ld	l,0x60
1613  0511  CD 18 05    	call	_player_tile
1614  0514              l_player_check_stairs_00109:
1615  0514  33          	inc	sp
1616  0515  DD E1       	pop	ix
1617  0517  C9          	ret
1618  0518              	SECTION code_compiler
1619  0518              ;	---------------------------------
1620  0518              ; Function player_tile
1621  0518              ; ---------------------------------
1622  0518              _player_tile:
1623  0518  45          	ld	b, l
1624  0519  3A 00 00    	ld	a,(_player_over_stair)
1625  051C  B7          	or	a, a
1626  051D  28 0D       	jr	Z,l_player_tile_00105
1627  051F  2A 00 00    	ld	hl,(_sprite)
1628  0522  26 00       	ld	h,0x00
1629  0524  01 00 00    	ld	bc,_tile
1630  0527  09          	add	hl,bc
1631  0528  36 72       	ld	(hl),0x72
1632  052A  18 41       	jr	l_player_tile_00107
1633  052C              l_player_tile_00105:
1634  052C  78          	ld	a, b
1635  052D  D6 70       	sub	a,0x70
1636  052F  20 1F       	jr	NZ,l_player_tile_00102
1637  0531  2A 00 00    	ld	hl,(_sprite)
1638  0534  26 00       	ld	h,0x00
1639  0536  11 00 00    	ld	de,_tile
1640  0539  19          	add	hl,de
1641  053A  E5          	push	hl
1642  053B  3E 01       	ld	a,0x01
1643  053D  21 00 00    	ld	hl,_sprite
1644  0540  F5          	push	af
1645  0541  33          	inc	sp
1646  0542  7E          	ld	a, (hl)
1647  0543  48          	ld	c,b
1648  0544  47          	ld	b,a
1649  0545  C5          	push	bc
1650  0546  CD 00 00    	call	_spr_tile_dir
1651  0549  F1          	pop	af
1652  054A  33          	inc	sp
1653  054B  D1          	pop	de
1654  054C  7D          	ld	a,l
1655  054D  12          	ld	(de), a
1656  054E  18 1D       	jr	l_player_tile_00107
1657  0550              l_player_tile_00102:
1658  0550  2A 00 00    	ld	hl,(_sprite)
1659  0553  26 00       	ld	h,0x00
1660  0555  11 00 00    	ld	de,_tile
1661  0558  19          	add	hl,de
1662  0559  E5          	push	hl
1663  055A  3E 08       	ld	a,0x08
1664  055C  21 00 00    	ld	hl,_sprite
1665  055F  F5          	push	af
1666  0560  33          	inc	sp
1667  0561  7E          	ld	a, (hl)
1668  0562  48          	ld	c,b
1669  0563  47          	ld	b,a
1670  0564  C5          	push	bc
1671  0565  CD 00 00    	call	_spr_tile_dir
1672  0568  F1          	pop	af
1673  0569  33          	inc	sp
1674  056A  D1          	pop	de
1675  056B  7D          	ld	a,l
1676  056C  12          	ld	(de), a
1677  056D              l_player_tile_00107:
1678  056D  C9          	ret
1679  056E              	SECTION code_compiler
1680  056E              ;	---------------------------------
1681  056E              ; Function player_move_input
1682  056E              ; ---------------------------------
1683  056E              _player_move_input:
1684  056E  CD BD 00    	call	_player_check_input
1685  0571  7D          	ld	a, l
1686  0572  B7          	or	a, a
1687  0573  CA E1 06    	jp	Z, l_player_move_input_00136
1688  0576  CD E4 06    	call	_player_fire
1689  0579  7D          	ld	a, l
1690  057A  B7          	or	a, a
1691  057B  28 0A       	jr	Z,l_player_move_input_00102
1692  057D  21 00 00    	ld	hl,_dirs
1693  0580  36 00       	ld	(hl),0x00
1694  0582  2E 00       	ld	l,0x00
1695  0584  C3 E3 06    	jp	l_player_move_input_00137
1696  0587              l_player_move_input_00102:
1697  0587  21 00 00    	ld	hl,_dirs
1698  058A  CB 7E       	bit	7, (hl)
1699  058C  28 67       	jr	Z,l_player_move_input_00106
1700  058E  21 00 00    	ld	hl,_player_vel_inc
1701  0591  36 01       	ld	(hl),0x01
1702  0593  CD 00 00    	call	_ay_is_playing
1703  0596  7D          	ld	a, l
1704  0597  D6 03       	sub	a,0x03
1705  0599  28 06       	jr	Z,l_player_move_input_00104
1706  059B  21 00 00    	ld	hl,_ay_effect_03
1707  059E  CD 00 00    	call	_ay_fx_play
1708  05A1              l_player_move_input_00104:
1709  05A1  21 00 00    	ld	hl,_player_over_stair
1710  05A4  36 00       	ld	(hl),0x00
1711  05A6  CD 00 00    	call	_sound_jump
1712  05A9  21 00 00    	ld	hl,_s_state
1713  05AC  7E          	ld	a,(hl)
1714  05AD  F6 01       	or	a,0x01
1715  05AF  E6 FD       	and	a,0xfd
1716  05B1  77          	ld	(hl),a
1717  05B2  2A 00 00    	ld	hl,(_sprite)
1718  05B5  26 00       	ld	h,0x00
1719  05B7  01 00 00    	ld	bc,_jump_lin
1720  05BA  09          	add	hl,bc
1721  05BB  4D          	ld	c,l
1722  05BC  44          	ld	b,h
1723  05BD  2A 00 00    	ld	hl,(_sprite)
1724  05C0  26 00       	ld	h,0x00
1725  05C2  11 00 00    	ld	de,_lin
1726  05C5  19          	add	hl,de
1727  05C6  7E          	ld	a,(hl)
1728  05C7  02          	ld	(bc),a
1729  05C8  2A 00 00    	ld	hl,(_sprite)
1730  05CB  26 00       	ld	h,0x00
1731  05CD  01 00 00    	ld	bc,_state
1732  05D0  09          	add	hl,bc
1733  05D1  3A 00 00    	ld	a,(_s_state)
1734  05D4  77          	ld	(hl),a
1735  05D5  2E 64       	ld	l,0x64
1736  05D7  CD 18 05    	call	_player_tile
1737  05DA  2A 00 00    	ld	hl,(_sprite)
1738  05DD  26 00       	ld	h,0x00
1739  05DF  01 00 00    	ld	bc,_sprite_speed_alt
1740  05E2  09          	add	hl,bc
1741  05E3  36 02       	ld	(hl),0x02
1742  05E5  21 00 00    	ld	hl,_player_slide
1743  05E8  36 00       	ld	(hl),0x00
1744  05EA  3A 00 00    	ld	a,(_player_vel_y0)
1745  05ED  32 00 00    	ld	(_player_vel_y),a
1746  05F0  2E 01       	ld	l,0x01
1747  05F2  C3 E3 06    	jp	l_player_move_input_00137
1748  05F5              l_player_move_input_00106:
1749  05F5  21 00 00    	ld	hl,_dirs
1750  05F8  CB 5E       	bit	3, (hl)
1751  05FA  28 33       	jr	Z,l_player_move_input_00110
1752  05FC  21 00 00    	ld	hl,_s_state
1753  05FF  7E          	ld	a,(hl)
1754  0600  F6 04       	or	a,0x04
1755  0602  E6 F7       	and	a,0xf7
1756  0604  77          	ld	(hl),a
1757  0605  01 00 00    	ld	bc,_state_a+0
1758  0608  79          	ld	a, c
1759  0609  21 00 00    	ld	hl,_sprite
1760  060C  86          	add	a, (hl)
1761  060D  5F          	ld	e, a
1762  060E  78          	ld	a, b
1763  060F  CE 00       	adc	a,0x00
1764  0611  57          	ld	d, a
1765  0612  1A          	ld	a, (de)
1766  0613  F6 10       	or	a,0x10
1767  0615  12          	ld	(de), a
1768  0616  79          	ld	a, c
1769  0617  86          	add	a, (hl)
1770  0618  4F          	ld	c, a
1771  0619  78          	ld	a, b
1772  061A  CE 00       	adc	a,0x00
1773  061C  47          	ld	b, a
1774  061D  0A          	ld	a, (bc)
1775  061E  E6 F7       	and	a,0xf7
1776  0620  02          	ld	(bc), a
1777  0621  3A 00 00    	ld	a,(_player_over_stair)
1778  0624  B7          	or	a, a
1779  0625  28 05       	jr	Z,l_player_move_input_00108
1780  0627  2E 00       	ld	l,0x00
1781  0629  CD 70 04    	call	_player_check_stairs
1782  062C              l_player_move_input_00108:
1783  062C  CD 00 00    	call	_spr_move_horizontal
1784  062F              l_player_move_input_00110:
1785  062F  21 00 00    	ld	hl,_dirs
1786  0632  CB 56       	bit	2, (hl)
1787  0634  28 33       	jr	Z,l_player_move_input_00114
1788  0636  21 00 00    	ld	hl,_s_state
1789  0639  7E          	ld	a,(hl)
1790  063A  F6 08       	or	a,0x08
1791  063C  E6 FB       	and	a,0xfb
1792  063E  77          	ld	(hl),a
1793  063F  01 00 00    	ld	bc,_state_a+0
1794  0642  79          	ld	a, c
1795  0643  21 00 00    	ld	hl,_sprite
1796  0646  86          	add	a, (hl)
1797  0647  5F          	ld	e, a
1798  0648  78          	ld	a, b
1799  0649  CE 00       	adc	a,0x00
1800  064B  57          	ld	d, a
1801  064C  1A          	ld	a, (de)
1802  064D  F6 08       	or	a,0x08
1803  064F  12          	ld	(de), a
1804  0650  79          	ld	a, c
1805  0651  86          	add	a, (hl)
1806  0652  4F          	ld	c, a
1807  0653  78          	ld	a, b
1808  0654  CE 00       	adc	a,0x00
1809  0656  47          	ld	b, a
1810  0657  0A          	ld	a, (bc)
1811  0658  E6 EF       	and	a,0xef
1812  065A  02          	ld	(bc), a
1813  065B  3A 00 00    	ld	a,(_player_over_stair)
1814  065E  B7          	or	a, a
1815  065F  28 05       	jr	Z,l_player_move_input_00112
1816  0661  2E 00       	ld	l,0x00
1817  0663  CD 70 04    	call	_player_check_stairs
1818  0666              l_player_move_input_00112:
1819  0666  CD 00 00    	call	_spr_move_horizontal
1820  0669              l_player_move_input_00114:
1821  0669  21 00 00    	ld	hl,_dirs
1822  066C  CB 46       	bit	0, (hl)
1823  066E  28 2B       	jr	Z,l_player_move_input_00124
1824  0670  2E 00       	ld	l,0x00
1825  0672  CD 70 04    	call	_player_check_stairs
1826  0675  3A 00 00    	ld	a,(_player_over_stair)
1827  0678  B7          	or	a, a
1828  0679  28 0E       	jr	Z,l_player_move_input_00121
1829  067B  CD 00 00    	call	_spr_move_up
1830  067E  7D          	ld	a, l
1831  067F  B7          	or	a, a
1832  0680  28 19       	jr	Z,l_player_move_input_00124
1833  0682  21 00 00    	ld	hl,_player_over_stair
1834  0685  36 00       	ld	(hl),0x00
1835  0687  18 12       	jr	l_player_move_input_00124
1836  0689              l_player_move_input_00121:
1837  0689  21 00 00    	ld	hl,_dirs
1838  068C  CB 5E       	bit	3, (hl)
1839  068E  20 0B       	jr	NZ,l_player_move_input_00124
1840  0690  21 00 00    	ld	hl,_dirs
1841  0693  CB 56       	bit	2, (hl)
1842  0695  20 04       	jr	NZ,l_player_move_input_00124
1843  0697  2E 00       	ld	l,0x00
1844  0699  18 48       	jr	l_player_move_input_00137
1845  069B              l_player_move_input_00124:
1846  069B  21 00 00    	ld	hl,_dirs
1847  069E  CB 4E       	bit	1, (hl)
1848  06A0  28 29       	jr	Z,l_player_move_input_00134
1849  06A2  CD 2A 04    	call	_player_check_stairs_down
1850  06A5  3A 00 00    	ld	a,(_player_over_stair)
1851  06A8  B7          	or	a, a
1852  06A9  28 0E       	jr	Z,l_player_move_input_00131
1853  06AB  CD 00 00    	call	_spr_move_down
1854  06AE  7D          	ld	a, l
1855  06AF  B7          	or	a, a
1856  06B0  28 19       	jr	Z,l_player_move_input_00134
1857  06B2  21 00 00    	ld	hl,_player_over_stair
1858  06B5  36 00       	ld	(hl),0x00
1859  06B7  18 12       	jr	l_player_move_input_00134
1860  06B9              l_player_move_input_00131:
1861  06B9  21 00 00    	ld	hl,_dirs
1862  06BC  CB 5E       	bit	3, (hl)
1863  06BE  20 0B       	jr	NZ,l_player_move_input_00134
1864  06C0  21 00 00    	ld	hl,_dirs
1865  06C3  CB 56       	bit	2, (hl)
1866  06C5  20 04       	jr	NZ,l_player_move_input_00134
1867  06C7  2E 00       	ld	l,0x00
1868  06C9  18 18       	jr	l_player_move_input_00137
1869  06CB              l_player_move_input_00134:
1870  06CB  2A 00 00    	ld	hl,(_sprite)
1871  06CE  26 00       	ld	h,0x00
1872  06D0  01 00 00    	ld	bc,_state
1873  06D3  09          	add	hl,bc
1874  06D4  3A 00 00    	ld	a,(_s_state)
1875  06D7  77          	ld	(hl),a
1876  06D8  2E 60       	ld	l,0x60
1877  06DA  CD 18 05    	call	_player_tile
1878  06DD  2E 01       	ld	l,0x01
1879  06DF  18 02       	jr	l_player_move_input_00137
1880  06E1              l_player_move_input_00136:
1881  06E1  2E 00       	ld	l,0x00
1882  06E3              l_player_move_input_00137:
1883  06E3  C9          	ret
1884  06E4              	SECTION code_compiler
1885  06E4              ;	---------------------------------
1886  06E4              ; Function player_fire
1887  06E4              ; ---------------------------------
1888  06E4              _player_fire:
1889  06E4  21 00 00    	ld	hl,_dirs
1890  06E7  CB 7E       	bit	7, (hl)
1891  06E9  28 33       	jr	Z,l_player_fire_00108
1892  06EB  21 00 00    	ld	hl,_dirs
1893  06EE  CB 4E       	bit	1, (hl)
1894  06F0  28 2C       	jr	Z,l_player_fire_00108
1895  06F2  21 00 00    	ld	hl,_player_mana
1896  06F5  7E          	ld	a, (hl)
1897  06F6  B7          	or	a, a
1898  06F7  28 21       	jr	Z,l_player_fire_00105
1899  06F9  3A 07 00    	ld	a,(_bullet_col + 0x0007)
1900  06FC  3C          	inc	a
1901  06FD  20 1B       	jr	NZ,l_player_fire_00105
1902  06FF  3E 05       	ld	a,0x05
1903  0701  96          	sub	a, (hl)
1904  0702  30 06       	jr	NC,l_player_fire_00102
1905  0704  7E          	ld	a, (hl)
1906  0705  C6 FB       	add	a,0xfb
1907  0707  77          	ld	(hl), a
1908  0708  18 05       	jr	l_player_fire_00103
1909  070A              l_player_fire_00102:
1910  070A  21 00 00    	ld	hl,_player_mana
1911  070D  36 00       	ld	(hl),0x00
1912  070F              l_player_fire_00103:
1913  070F  CD 00 00    	call	_game_update_stats
1914  0712  21 07 78    	ld	hl,0x7807
1915  0715  E5          	push	hl
1916  0716  CD 00 00    	call	_game_shoot_fire
1917  0719  F1          	pop	af
1918  071A              l_player_fire_00105:
1919  071A  2E 01       	ld	l,0x01
1920  071C  18 02       	jr	l_player_fire_00110
1921  071E              l_player_fire_00108:
1922  071E  2E 00       	ld	l,0x00
1923  0720              l_player_fire_00110:
1924  0720  C9          	ret
1925  0721              	SECTION code_compiler
1926  0721              ;	---------------------------------
1927  0721              ; Function player_check_map
1928  0721              ; ---------------------------------
1929  0721              _player_check_map:
1930  0721  2A 00 00    	ld	hl,(_sprite)
1931  0724  26 00       	ld	h,0x00
1932  0726  5D          	ld	e,l
1933  0727  01 00 00    	ld	bc,_col
1934  072A  09          	add	hl,bc
1935  072B  46          	ld	b,(hl)
1936  072C  16 00       	ld	d,0x00
1937  072E  21 00 00    	ld	hl,_lin
1938  0731  19          	add	hl,de
1939  0732  4E          	ld	c, (hl)
1940  0733  C5          	push	bc
1941  0734  CD 00 00    	call	_spr_calc_index
1942  0737  F1          	pop	af
1943  0738  7D          	ld	a,l
1944  0739  32 00 00    	ld	(_sprite_curr_index),a
1945  073C  2A 00 00    	ld	hl,(_sprite)
1946  073F  26 00       	ld	h,0x00
1947  0741  01 00 00    	ld	bc,_col
1948  0744  09          	add	hl,bc
1949  0745  4E          	ld	c, (hl)
1950  0746  3A 00 00    	ld	a,(_sprite)
1951  0749  5F          	ld	e,a
1952  074A  16 00       	ld	d,0x00
1953  074C  21 00 00    	ld	hl,_lin
1954  074F  19          	add	hl,de
1955  0750  7E          	ld	a,(hl)
1956  0751  E6 0F       	and	a,0x0f
1957  0753  CB 41       	bit	0, c
1958  0755  20 17       	jr	NZ,l_player_check_map_00108
1959  0757  B7          	or	a, a
1960  0758  20 05       	jr	NZ,l_player_check_map_00102
1961  075A  CD 99 07    	call	_player_pick_item
1962  075D  18 39       	jr	l_player_check_map_00110
1963  075F              l_player_check_map_00102:
1964  075F  CD 99 07    	call	_player_pick_item
1965  0762  21 00 00    	ld	hl,_sprite_curr_index
1966  0765  7E          	ld	a, (hl)
1967  0766  C6 10       	add	a,0x10
1968  0768  77          	ld	(hl), a
1969  0769  CD 99 07    	call	_player_pick_item
1970  076C  18 2A       	jr	l_player_check_map_00110
1971  076E              l_player_check_map_00108:
1972  076E  B7          	or	a, a
1973  076F  20 0C       	jr	NZ,l_player_check_map_00105
1974  0771  CD 99 07    	call	_player_pick_item
1975  0774  21 00 00    	ld	hl,_sprite_curr_index
1976  0777  34          	inc	(hl)
1977  0778  CD 99 07    	call	_player_pick_item
1978  077B  18 1B       	jr	l_player_check_map_00110
1979  077D              l_player_check_map_00105:
1980  077D  CD 99 07    	call	_player_pick_item
1981  0780  21 00 00    	ld	hl,_sprite_curr_index
1982  0783  34          	inc	(hl)
1983  0784  CD 99 07    	call	_player_pick_item
1984  0787  21 00 00    	ld	hl,_sprite_curr_index
1985  078A  7E          	ld	a, (hl)
1986  078B  C6 0F       	add	a,0x0f
1987  078D  77          	ld	(hl), a
1988  078E  CD 99 07    	call	_player_pick_item
1989  0791  21 00 00    	ld	hl,_sprite_curr_index
1990  0794  34          	inc	(hl)
1991  0795  CD 99 07    	call	_player_pick_item
1992  0798              l_player_check_map_00110:
1993  0798  C9          	ret
1994  0799              	SECTION code_compiler
1995  0799              ;	---------------------------------
1996  0799              ; Function player_pick_item
1997  0799              ; ---------------------------------
1998  0799              _player_pick_item:
1999  0799  2A 00 00    	ld	hl,(_sprite_curr_index)
2000  079C  26 00       	ld	h,0x00
2001  079E  01 00 00    	ld	bc,_scr_map
2002  07A1  09          	add	hl,bc
2003  07A2  7E          	ld	a,(hl)
2004  07A3  4F          	ld	c,a
2005  07A4  D6 24       	sub	a,0x24
2006  07A6  DA 75 08    	jp	C,l_player_pick_item_00109
2007  07A9  3E 2F       	ld	a,0x2f
2008  07AB  91          	sub	a,c
2009  07AC  DA 75 08    	jp	C,l_player_pick_item_00109
2010  07AF  44          	ld	b,h
2011  07B0  CD 00 00    	call	_ay_reset
2012  07B3  21 00 00    	ld	hl,_ay_effect_10
2013  07B6  CD 00 00    	call	_ay_fx_play
2014  07B9  C5          	push	bc
2015  07BA  CD 00 00    	call	_sound_coin
2016  07BD  C1          	pop	bc
2017  07BE  2A 00 00    	ld	hl,(_sprite_curr_index)
2018  07C1  26 00       	ld	h,0x00
2019  07C3  11 00 00    	ld	de,_scr_map
2020  07C6  19          	add	hl,de
2021  07C7  AF          	xor	a,a
2022  07C8  77          	ld	(hl),a
2023  07C9  3A 00 00    	ld	a,(_sprite_curr_index)
2024  07CC  5F          	ld	e,a
2025  07CD  16 00       	ld	d,0x00
2026  07CF  C5          	push	bc
2027  07D0  D5          	push	de
2028  07D1  CD 00 00    	call	_game_obj_set
2029  07D4  F1          	pop	af
2030  07D5  C1          	pop	bc
2031  07D6  3A 00 00    	ld	a,(_sprite_curr_index)
2032  07D9  07          	rlca
2033  07DA  07          	rlca
2034  07DB  07          	rlca
2035  07DC  07          	rlca
2036  07DD  E6 0F       	and	a,0x0f
2037  07DF  07          	rlca
2038  07E0  07          	rlca
2039  07E1  07          	rlca
2040  07E2  07          	rlca
2041  07E3  E6 F0       	and	a,0xf0
2042  07E5  32 00 00    	ld	(_s_lin1),a
2043  07E8  3A 00 00    	ld	a,(_sprite_curr_index)
2044  07EB  E6 0F       	and	a,0x0f
2045  07ED  87          	add	a, a
2046  07EE  32 00 00    	ld	(_s_col1),a
2047  07F1  C5          	push	bc
2048  07F2  21 00 00    	ld	hl,0x0000
2049  07F5  E5          	push	hl
2050  07F6  21 84 03    	ld	hl,0x0384
2051  07F9  E5          	push	hl
2052  07FA  F5          	push	af
2053  07FB  33          	inc	sp
2054  07FC  3A 00 00    	ld	a,(_s_lin1)
2055  07FF  F5          	push	af
2056  0800  33          	inc	sp
2057  0801  CD 00 00    	call	_spr_add_anim
2058  0804  F1          	pop	af
2059  0805  F1          	pop	af
2060  0806  F1          	pop	af
2061  0807  C1          	pop	bc
2062  0808  79          	ld	a,c
2063  0809  FE 24       	cp	a,0x24
2064  080B  28 0E       	jr	Z,l_player_pick_item_00101
2065  080D  FE 25       	cp	a,0x25
2066  080F  28 21       	jr	Z,l_player_pick_item_00102
2067  0811  FE 26       	cp	a,0x26
2068  0813  28 34       	jr	Z,l_player_pick_item_00103
2069  0815  D6 27       	sub	a,0x27
2070  0817  28 47       	jr	Z,l_player_pick_item_00104
2071  0819  18 5A       	jr	l_player_pick_item_00109
2072  081B              l_player_pick_item_00101:
2073  081B  21 00 00    	ld	hl,_player_keys
2074  081E  36 01       	ld	(hl),0x01
2075  0820  21 00 00    	ld	hl,_screen_ink
2076  0823  36 07       	ld	(hl),0x07
2077  0825  21 00 00    	ld	hl,___str_0
2078  0828  E5          	push	hl
2079  0829  21 16 03    	ld	hl,0x0316
2080  082C  E5          	push	hl
2081  082D  CD 00 00    	call	_zx_print_str
2082  0830  18 43       	jr	l_player_pick_item_00109
2083  0832              l_player_pick_item_00102:
2084  0832  21 01 00    	ld	hl, +(_player_keys + 0x0001)
2085  0835  36 01       	ld	(hl),0x01
2086  0837  21 00 00    	ld	hl,_screen_ink
2087  083A  36 02       	ld	(hl),0x02
2088  083C  21 00 00    	ld	hl,___str_0
2089  083F  E5          	push	hl
2090  0840  21 16 04    	ld	hl,0x0416
2091  0843  E5          	push	hl
2092  0844  CD 00 00    	call	_zx_print_str
2093  0847  18 2C       	jr	l_player_pick_item_00109
2094  0849              l_player_pick_item_00103:
2095  0849  21 02 00    	ld	hl, +(_player_keys + 0x0002)
2096  084C  36 01       	ld	(hl),0x01
2097  084E  21 00 00    	ld	hl,_screen_ink
2098  0851  36 04       	ld	(hl),0x04
2099  0853  21 00 00    	ld	hl,___str_0
2100  0856  E5          	push	hl
2101  0857  21 16 05    	ld	hl,0x0516
2102  085A  E5          	push	hl
2103  085B  CD 00 00    	call	_zx_print_str
2104  085E  18 15       	jr	l_player_pick_item_00109
2105  0860              l_player_pick_item_00104:
2106  0860  21 03 00    	ld	hl, +(_player_keys + 0x0003)
2107  0863  36 01       	ld	(hl),0x01
2108  0865  21 00 00    	ld	hl,_screen_ink
2109  0868  36 05       	ld	(hl),0x05
2110  086A  21 00 00    	ld	hl,___str_0
2111  086D  E5          	push	hl
2112  086E  21 16 06    	ld	hl,0x0616
2113  0871  E5          	push	hl
2114  0872  CD 00 00    	call	_zx_print_str
2115  0875              l_player_pick_item_00109:
2116  0875  C9          	ret
2117  0876              	SECTION rodata_compiler
2118  0000              ___str_0:
2119  0000  5D          	DEFM "]"
2120  0001  00          	DEFB 0x00
2121  0002              	SECTION code_compiler
2122  0876              ;	---------------------------------
2123  0876              ; Function player_hit_platform
2124  0876              ; ---------------------------------
2125  0876              _player_hit_platform:
2126  0876  3A 00 00    	ld	a,(_player_hit_lin)
2127  0879  B7          	or	a, a
2128  087A  C2 B5 0A    	jp	NZ, l_player_hit_platform_00137
2129  087D  2A 00 00    	ld	hl,(_sprite)
2130  0880  26 00       	ld	h,0x00
2131  0882  01 00 00    	ld	bc,_lin
2132  0885  09          	add	hl,bc
2133  0886  4E          	ld	c,(hl)
2134  0887  3E 10       	ld	a,0x10
2135  0889  91          	sub	a, c
2136  088A  D2 B5 0A    	jp	NC, l_player_hit_platform_00137
2137  088D  01 00 00    	ld	bc,_scr_map
2138  0890  2A 00 00    	ld	hl,(_index1)
2139  0893  09          	add	hl,bc
2140  0894  7E          	ld	a,(hl)
2141  0895  D6 45       	sub	a,0x45
2142  0897  DA B5 0A    	jp	C, l_player_hit_platform_00137
2143  089A  01 00 00    	ld	bc,_spr_timer+0
2144  089D  2A 00 00    	ld	hl,(_sprite)
2145  08A0  26 00       	ld	h,0x00
2146  08A2  29          	add	hl, hl
2147  08A3  09          	add	hl,bc
2148  08A4  ED 5B 00 00 	ld	de,(_curr_time)
2149  08A8  73          	ld	(hl),e
2150  08A9  23          	inc	hl
2151  08AA  72          	ld	(hl),d
2152  08AB  2A 00 00    	ld	hl,(_sprite)
2153  08AE  26 00       	ld	h,0x00
2154  08B0  01 00 00    	ld	bc,_lin
2155  08B3  09          	add	hl,bc
2156  08B4  4E          	ld	c,(hl)
2157  08B5  06 00       	ld	b,0x00
2158  08B7  79          	ld	a, c
2159  08B8  C6 F8       	add	a,0xf8
2160  08BA  4F          	ld	c, a
2161  08BB  78          	ld	a, b
2162  08BC  CE FF       	adc	a,0xff
2163  08BE  5F          	ld	e, a
2164  08BF  06 04       	ld	b,0x04
2165  08C1              l_player_hit_platform_00226:
2166  08C1  CB 2B       	sra	e
2167  08C3  CB 19       	rr	c
2168  08C5  10 FA       	djnz	l_player_hit_platform_00226
2169  08C7  79          	ld	a, c
2170  08C8  07          	rlca
2171  08C9  07          	rlca
2172  08CA  07          	rlca
2173  08CB  07          	rlca
2174  08CC  E6 F0       	and	a,0xf0
2175  08CE  C6 08       	add	a,0x08
2176  08D0  32 00 00    	ld	(_player_hit_lin),a
2177  08D3  2A 00 00    	ld	hl,(_sprite)
2178  08D6  26 00       	ld	h,0x00
2179  08D8  01 00 00    	ld	bc,_col
2180  08DB  09          	add	hl,bc
2181  08DC  4E          	ld	c,(hl)
2182  08DD  CB 41       	bit	0,c
2183  08DF  20 06       	jr	NZ,l_player_hit_platform_00111
2184  08E1  21 00 00    	ld	hl,_player_hit_col
2185  08E4  71          	ld	(hl), c
2186  08E5  18 33       	jr	l_player_hit_platform_00112
2187  08E7              l_player_hit_platform_00111:
2188  08E7  2A 00 00    	ld	hl,(_sprite)
2189  08EA  26 00       	ld	h,0x00
2190  08EC  11 00 00    	ld	de,_state
2191  08EF  19          	add	hl,de
2192  08F0  5E          	ld	e, (hl)
2193  08F1  41          	ld	b, c
2194  08F2  04          	inc	b
2195  08F3  0D          	dec	c
2196  08F4  CB 5B       	bit	3, e
2197  08F6  28 12       	jr	Z,l_player_hit_platform_00108
2198  08F8  3A 00 00    	ld	a,(_g_player_hit_right)
2199  08FB  B7          	or	a, a
2200  08FC  28 06       	jr	Z,l_player_hit_platform_00102
2201  08FE  21 00 00    	ld	hl,_player_hit_col
2202  0901  70          	ld	(hl), b
2203  0902  18 16       	jr	l_player_hit_platform_00112
2204  0904              l_player_hit_platform_00102:
2205  0904  21 00 00    	ld	hl,_player_hit_col
2206  0907  71          	ld	(hl), c
2207  0908  18 10       	jr	l_player_hit_platform_00112
2208  090A              l_player_hit_platform_00108:
2209  090A  3A 00 00    	ld	a,(_g_player_hit_left)
2210  090D  B7          	or	a, a
2211  090E  28 06       	jr	Z,l_player_hit_platform_00105
2212  0910  21 00 00    	ld	hl,_player_hit_col
2213  0913  71          	ld	(hl), c
2214  0914  18 04       	jr	l_player_hit_platform_00112
2215  0916              l_player_hit_platform_00105:
2216  0916  21 00 00    	ld	hl,_player_hit_col
2217  0919  70          	ld	(hl), b
2218  091A              l_player_hit_platform_00112:
2219  091A  01 00 00    	ld	bc,_scr_map
2220  091D  2A 00 00    	ld	hl,(_index1)
2221  0920  09          	add	hl,bc
2222  0921  7E          	ld	a,(hl)
2223  0922  FE 5C       	cp	a,0x5c
2224  0924  28 05       	jr	Z,l_player_hit_platform_00133
2225  0926  D6 5D       	sub	a,0x5d
2226  0928  C2 A9 0A    	jp	NZ,l_player_hit_platform_00134
2227  092B              l_player_hit_platform_00133:
2228  092B  21 00 00    	ld	hl,_tmp0
2229  092E  36 00       	ld	(hl),0x00
2230  0930              l_player_hit_platform_00130:
2231  0930  21 00 00    	ld	hl,_tmp0
2232  0933  7E          	ld	a, (hl)
2233  0934  D6 07       	sub	a,0x07
2234  0936  D2 A9 0A    	jp	NC, l_player_hit_platform_00134
2235  0939  4E          	ld	c,(hl)
2236  093A  06 00       	ld	b,0x00
2237  093C  21 00 00    	ld	hl,_mush_index
2238  093F  09          	add	hl,bc
2239  0940  4E          	ld	c, (hl)
2240  0941  06 00       	ld	b,0x00
2241  0943  2A 00 00    	ld	hl,(_index1)
2242  0946  AF          	xor	a,a
2243  0947  ED 42       	sbc	hl,bc
2244  0949  C2 A2 0A    	jp	NZ,l_player_hit_platform_00129
2245  094C  2A 00 00    	ld	hl,(_sprite)
2246  094F  26 00       	ld	h,0x00
2247  0951  01 00 00    	ld	bc,_lin
2248  0954  09          	add	hl,bc
2249  0955  7E          	ld	a,(hl)
2250  0956  07          	rlca
2251  0957  07          	rlca
2252  0958  07          	rlca
2253  0959  07          	rlca
2254  095A  E6 0F       	and	a,0x0f
2255  095C  07          	rlca
2256  095D  07          	rlca
2257  095E  07          	rlca
2258  095F  07          	rlca
2259  0960  E6 F0       	and	a,0xf0
2260  0962  C6 E0       	add	a,0xe0
2261  0964  32 00 00    	ld	(_s_lin1),a
2262  0967  2A 00 00    	ld	hl,(_sprite)
2263  096A  26 00       	ld	h,0x00
2264  096C  01 00 00    	ld	bc,_col
2265  096F  09          	add	hl,bc
2266  0970  7E          	ld	a,(hl)
2267  0971  CB 3F       	srl	a
2268  0973  87          	add	a, a
2269  0974  32 00 00    	ld	(_s_col1),a
2270  0977  21 00 00    	ld	hl,_tmp
2271  097A  36 00       	ld	(hl),0x00
2272  097C              l_player_hit_platform_00115:
2273  097C  21 00 00    	ld	hl,_tmp
2274  097F  7E          	ld	a, (hl)
2275  0980  D6 07       	sub	a,0x07
2276  0982  30 1C       	jr	NC,l_player_hit_platform_00117
2277  0984  4E          	ld	c,(hl)
2278  0985  06 00       	ld	b,0x00
2279  0987  21 00 00    	ld	hl,_mush_index
2280  098A  09          	add	hl,bc
2281  098B  4E          	ld	c, (hl)
2282  098C  06 00       	ld	b,0x00
2283  098E  21 00 00    	ld	hl,_index1
2284  0991  7E          	ld	a, (hl)
2285  0992  91          	sub	a, c
2286  0993  20 05       	jr	NZ,l_player_hit_platform_00235
2287  0995  23          	inc	hl
2288  0996  7E          	ld	a, (hl)
2289  0997  90          	sub	a, b
2290  0998  28 06       	jr	Z,l_player_hit_platform_00117
2291  099A              l_player_hit_platform_00235:
2292  099A  21 00 00    	ld	hl,_tmp
2293  099D  34          	inc	(hl)
2294  099E  18 DC       	jr	l_player_hit_platform_00115
2295  09A0              l_player_hit_platform_00117:
2296  09A0  2A 00 00    	ld	hl,(_tmp)
2297  09A3  26 00       	ld	h,0x00
2298  09A5  01 00 00    	ld	bc,_mush_class
2299  09A8  09          	add	hl,bc
2300  09A9  7E          	ld	a,(hl)
2301  09AA  FE 78       	cp	a,0x78
2302  09AC  28 18       	jr	Z,l_player_hit_platform_00118
2303  09AE  FE 79       	cp	a,0x79
2304  09B0  28 2F       	jr	Z,l_player_hit_platform_00119
2305  09B2  FE 7A       	cp	a,0x7a
2306  09B4  28 5F       	jr	Z,l_player_hit_platform_00121
2307  09B6  FE 7B       	cp	a,0x7b
2308  09B8  28 41       	jr	Z,l_player_hit_platform_00120
2309  09BA  FE 7C       	cp	a,0x7c
2310  09BC  CA 49 0A    	jp	Z,l_player_hit_platform_00123
2311  09BF  D6 7D       	sub	a,0x7d
2312  09C1  28 6C       	jr	Z,l_player_hit_platform_00122
2313  09C3  C3 61 0A    	jp	l_player_hit_platform_00124
2314  09C6              l_player_hit_platform_00118:
2315  09C6  2E 02       	ld	l,0x02
2316  09C8  CD 00 00    	call	_zx_border_fastcall
2317  09CB  3A 00 00    	ld	a,(_s_col1)
2318  09CE  21 06 FF    	ld	hl,0xff06
2319  09D1  E5          	push	hl
2320  09D2  F5          	push	af
2321  09D3  33          	inc	sp
2322  09D4  3A 00 00    	ld	a,(_s_lin1)
2323  09D7  F5          	push	af
2324  09D8  33          	inc	sp
2325  09D9  CD 00 00    	call	_enemy_init
2326  09DC  F1          	pop	af
2327  09DD  F1          	pop	af
2328  09DE  C3 61 0A    	jp	l_player_hit_platform_00124
2329  09E1              l_player_hit_platform_00119:
2330  09E1  2E 02       	ld	l,0x02
2331  09E3  CD 00 00    	call	_zx_border_fastcall
2332  09E6  3A 00 00    	ld	a,(_s_col1)
2333  09E9  21 06 01    	ld	hl,0x0106
2334  09EC  E5          	push	hl
2335  09ED  F5          	push	af
2336  09EE  33          	inc	sp
2337  09EF  3A 00 00    	ld	a,(_s_lin1)
2338  09F2  F5          	push	af
2339  09F3  33          	inc	sp
2340  09F4  CD 00 00    	call	_enemy_init
2341  09F7  F1          	pop	af
2342  09F8  F1          	pop	af
2343  09F9  18 66       	jr	l_player_hit_platform_00124
2344  09FB              l_player_hit_platform_00120:
2345  09FB  2E 01       	ld	l,0x01
2346  09FD  CD 00 00    	call	_zx_border_fastcall
2347  0A00  3A 00 00    	ld	a,(_s_col1)
2348  0A03  21 07 01    	ld	hl,0x0107
2349  0A06  E5          	push	hl
2350  0A07  F5          	push	af
2351  0A08  33          	inc	sp
2352  0A09  3A 00 00    	ld	a,(_s_lin1)
2353  0A0C  F5          	push	af
2354  0A0D  33          	inc	sp
2355  0A0E  CD 00 00    	call	_enemy_init
2356  0A11  F1          	pop	af
2357  0A12  F1          	pop	af
2358  0A13  18 4C       	jr	l_player_hit_platform_00124
2359  0A15              l_player_hit_platform_00121:
2360  0A15  2E 01       	ld	l,0x01
2361  0A17  CD 00 00    	call	_zx_border_fastcall
2362  0A1A  3A 00 00    	ld	a,(_s_col1)
2363  0A1D  21 07 FF    	ld	hl,0xff07
2364  0A20  E5          	push	hl
2365  0A21  F5          	push	af
2366  0A22  33          	inc	sp
2367  0A23  3A 00 00    	ld	a,(_s_lin1)
2368  0A26  F5          	push	af
2369  0A27  33          	inc	sp
2370  0A28  CD 00 00    	call	_enemy_init
2371  0A2B  F1          	pop	af
2372  0A2C  F1          	pop	af
2373  0A2D  18 32       	jr	l_player_hit_platform_00124
2374  0A2F              l_player_hit_platform_00122:
2375  0A2F  2E 04       	ld	l,0x04
2376  0A31  CD 00 00    	call	_zx_border_fastcall
2377  0A34  3A 00 00    	ld	a,(_s_col1)
2378  0A37  21 08 01    	ld	hl,0x0108
2379  0A3A  E5          	push	hl
2380  0A3B  F5          	push	af
2381  0A3C  33          	inc	sp
2382  0A3D  3A 00 00    	ld	a,(_s_lin1)
2383  0A40  F5          	push	af
2384  0A41  33          	inc	sp
2385  0A42  CD 00 00    	call	_enemy_init
2386  0A45  F1          	pop	af
2387  0A46  F1          	pop	af
2388  0A47  18 18       	jr	l_player_hit_platform_00124
2389  0A49              l_player_hit_platform_00123:
2390  0A49  2E 04       	ld	l,0x04
2391  0A4B  CD 00 00    	call	_zx_border_fastcall
2392  0A4E  3A 00 00    	ld	a,(_s_col1)
2393  0A51  21 08 FF    	ld	hl,0xff08
2394  0A54  E5          	push	hl
2395  0A55  F5          	push	af
2396  0A56  33          	inc	sp
2397  0A57  3A 00 00    	ld	a,(_s_lin1)
2398  0A5A  F5          	push	af
2399  0A5B  33          	inc	sp
2400  0A5C  CD 00 00    	call	_enemy_init
2401  0A5F  F1          	pop	af
2402  0A60  F1          	pop	af
2403  0A61              l_player_hit_platform_00124:
2404  0A61  2A 00 00    	ld	hl,(_index1)
2405  0A64  01 F0 FF    	ld	bc,0xfff0
2406  0A67  09          	add	hl,bc
2407  0A68  01 00 00    	ld	bc,_scr_map
2408  0A6B  09          	add	hl,bc
2409  0A6C  36 00       	ld	(hl),0x00
2410  0A6E  01 00 00    	ld	bc,_scr_map
2411  0A71  2A 00 00    	ld	hl,(_index1)
2412  0A74  09          	add	hl,bc
2413  0A75  7E          	ld	a,(hl)
2414  0A76  D6 5C       	sub	a,0x5c
2415  0A78  4D          	ld	c,l
2416  0A79  44          	ld	b,h
2417  0A7A  20 05       	jr	NZ,l_player_hit_platform_00126
2418  0A7C  3E 4F       	ld	a,0x4f
2419  0A7E  02          	ld	(bc), a
2420  0A7F  18 03       	jr	l_player_hit_platform_00127
2421  0A81              l_player_hit_platform_00126:
2422  0A81  3E 54       	ld	a,0x54
2423  0A83  02          	ld	(bc), a
2424  0A84              l_player_hit_platform_00127:
2425  0A84  2A 00 00    	ld	hl,(_index1)
2426  0A87  01 F0 FF    	ld	bc,0xfff0
2427  0A8A  09          	add	hl,bc
2428  0A8B  E5          	push	hl
2429  0A8C  CD 00 00    	call	_game_obj_set
2430  0A8F  F1          	pop	af
2431  0A90  3A 00 00    	ld	a,(_s_lin1)
2432  0A93  C6 10       	add	a,0x10
2433  0A95  4F          	ld	c, a
2434  0A96  3A 00 00    	ld	a, (_s_col1)
2435  0A99  47          	ld	b,a
2436  0A9A  C5          	push	bc
2437  0A9B  3E 4F       	ld	a,0x4f
2438  0A9D  F5          	push	af
2439  0A9E  33          	inc	sp
2440  0A9F  CD 00 00    	call	_NIRVANAP_drawT_callee
2441  0AA2              l_player_hit_platform_00129:
2442  0AA2  21 00 00    	ld	hl,_tmp0
2443  0AA5  34          	inc	(hl)
2444  0AA6  C3 30 09    	jp	l_player_hit_platform_00130
2445  0AA9              l_player_hit_platform_00134:
2446  0AA9  2E 01       	ld	l,0x01
2447  0AAB  CD 00 00    	call	_spr_brick_anim
2448  0AAE  CD 00 00    	call	_sound_hit_brick
2449  0AB1  2E 01       	ld	l,0x01
2450  0AB3  18 02       	jr	l_player_hit_platform_00140
2451  0AB5              l_player_hit_platform_00137:
2452  0AB5  2E 00       	ld	l,0x00
2453  0AB7              l_player_hit_platform_00140:
2454  0AB7  C9          	ret
2455  0AB8              	SECTION code_compiler
2456  0AB8              ;	---------------------------------
2457  0AB8              ; Function player_hit_platform_clear
2458  0AB8              ; ---------------------------------
2459  0AB8              _player_hit_platform_clear:
2460  0AB8  2A 00 00    	ld	hl,(_sprite)
2461  0ABB  26 00       	ld	h,0x00
2462  0ABD  29          	add	hl, hl
2463  0ABE  11 00 00    	ld	de,_spr_timer
2464  0AC1  19          	add	hl, de
2465  0AC2  4E          	ld	c, (hl)
2466  0AC3  23          	inc	hl
2467  0AC4  46          	ld	b, (hl)
2468  0AC5  21 04 00    	ld	hl,0x0004
2469  0AC8  E5          	push	hl
2470  0AC9  C5          	push	bc
2471  0ACA  CD 00 00    	call	_game_check_time
2472  0ACD  F1          	pop	af
2473  0ACE  F1          	pop	af
2474  0ACF  7D          	ld	a, l
2475  0AD0  B7          	or	a, a
2476  0AD1  C8          	ret	Z
2477  0AD2  2A FF FF    	ld	hl,(_player_hit_col - 1)
2478  0AD5  3A 00 00    	ld	a,(_player_hit_lin)
2479  0AD8  6F          	ld	l,a
2480  0AD9  E5          	push	hl
2481  0ADA  CD 00 00    	call	_spr_calc_index
2482  0ADD  F1          	pop	af
2483  0ADE  22 00 00    	ld	(_index1),hl
2484  0AE1  2E 00       	ld	l,0x00
2485  0AE3  CD 00 00    	call	_spr_brick_anim
2486  0AE6  21 00 00    	ld	hl,_player_hit_lin
2487  0AE9  36 00       	ld	(hl),0x00
2488  0AEB  21 00 00    	ld	hl,_player_hit_col
2489  0AEE  36 00       	ld	(hl),0x00
2490  0AF0  C9          	ret
2491  0AF1              	SECTION code_compiler
2492  0AF1              ;	---------------------------------
2493  0AF1              ; Function player_score_add
2494  0AF1              ; ---------------------------------
2495  0AF1              _player_score_add:
2496  0AF1  ED 4B 00 00 	ld	bc,(_player_score)
2497  0AF5  09          	add	hl,bc
2498  0AF6  22 00 00    	ld	(_player_score),hl
2499  0AF9  3A 00 00    	ld	a,(_game_score_top)
2500  0AFC  21 00 00    	ld	hl,_player_score
2501  0AFF  96          	sub	a, (hl)
2502  0B00  3A 01 00    	ld	a,(_game_score_top + 1)
2503  0B03  23          	inc	hl
2504  0B04  9E          	sbc	a, (hl)
2505  0B05  D2 00 00    	jp	NC,_game_print_score
2506  0B08  2A 00 00    	ld	hl,(_player_score)
2507  0B0B  22 00 00    	ld	(_game_score_top),hl
2508  0B0E  C3 00 00    	jp  _game_print_score
2509  0B11              	SECTION code_compiler
2510  0B11              ;	---------------------------------
2511  0B11              ; Function player_check_floor
2512  0B11              ; ---------------------------------
2513  0B11              _player_check_floor:
2514  0B11  CD 00 00    	call	___sdcc_enter_ix
2515  0B14  3B          	dec	sp
2516  0B15  2A 00 00    	ld	hl,(_sprite)
2517  0B18  26 00       	ld	h,0x00
2518  0B1A  01 00 00    	ld	bc,_col
2519  0B1D  09          	add	hl,bc
2520  0B1E  56          	ld	d, (hl)
2521  0B1F  2A 00 00    	ld	hl,(_sprite)
2522  0B22  26 00       	ld	h,0x00
2523  0B24  01 00 00    	ld	bc,_lin
2524  0B27  09          	add	hl,bc
2525  0B28  7E          	ld	a,(hl)
2526  0B29  C6 10       	add	a,0x10
2527  0B2B  5F          	ld	e, a
2528  0B2C  D5          	push	de
2529  0B2D  CD 00 00    	call	_spr_calc_index
2530  0B30  F1          	pop	af
2531  0B31  4D          	ld	c, l
2532  0B32  44          	ld	b, h
2533  0B33  21 00 00    	ld	hl,_scr_map
2534  0B36  09          	add	hl, bc
2535  0B37  7E          	ld	a, (hl)
2536  0B38  DD 77 FF    	ld	(ix-1),a
2537  0B3B  2A 00 00    	ld	hl,(_sprite)
2538  0B3E  26 00       	ld	h,0x00
2539  0B40  11 00 00    	ld	de,_col
2540  0B43  19          	add	hl,de
2541  0B44  7E          	ld	a,(hl)
2542  0B45  0F          	rrca
2543  0B46  38 04       	jr	C,l_player_check_floor_00102
2544  0B48  0E 01       	ld	c,0x01
2545  0B4A  18 06       	jr	l_player_check_floor_00103
2546  0B4C              l_player_check_floor_00102:
2547  0B4C  03          	inc	bc
2548  0B4D  21 00 00    	ld	hl,_scr_map
2549  0B50  09          	add	hl, bc
2550  0B51  4E          	ld	c, (hl)
2551  0B52              l_player_check_floor_00103:
2552  0B52  3A 00 00    	ld	a,(_s_lin0)
2553  0B55  D6 90       	sub	a,0x90
2554  0B57  20 04       	jr	NZ,l_player_check_floor_00105
2555  0B59  DD 36 FF 48 	ld	(ix-1),0x48
2556  0B5D              l_player_check_floor_00105:
2557  0B5D  DD 7E FF    	ld	a,(ix-1)
2558  0B60  D6 3C       	sub	a,0x3c
2559  0B62  38 07       	jr	C,l_player_check_floor_00110
2560  0B64  DD 7E FF    	ld	a,(ix-1)
2561  0B67  D6 60       	sub	a,0x60
2562  0B69  38 1E       	jr	C,l_player_check_floor_00111
2563  0B6B              l_player_check_floor_00110:
2564  0B6B  79          	ld	a,c
2565  0B6C  FE 3C       	cp	a,0x3c
2566  0B6E  38 04       	jr	C,l_player_check_floor_00106
2567  0B70  D6 60       	sub	a,0x60
2568  0B72  38 15       	jr	C,l_player_check_floor_00111
2569  0B74              l_player_check_floor_00106:
2570  0B74  2A 00 00    	ld	hl,(_sprite)
2571  0B77  26 00       	ld	h,0x00
2572  0B79  01 00 00    	ld	bc,_sprite_speed_alt
2573  0B7C  09          	add	hl,bc
2574  0B7D  36 02       	ld	(hl),0x02
2575  0B7F  21 00 00    	ld	hl,_s_state
2576  0B82  CB CE       	set	1, (hl)
2577  0B84  2E 00       	ld	l,0x00
2578  0B86  CD 70 04    	call	_player_check_stairs
2579  0B89              l_player_check_floor_00111:
2580  0B89  33          	inc	sp
2581  0B8A  DD E1       	pop	ix
2582  0B8C  C9          	ret
2583  0B8D              	SECTION code_compiler
2584  0B8D              ;	---------------------------------
2585  0B8D              ; Function player_move_jump
2586  0B8D              ; ---------------------------------
2587  0B8D              _player_move_jump:
2588  0B8D  CD 00 00    	call	___sdcc_enter_ix
2589  0B90  3B          	dec	sp
2590  0B91  21 00 00    	ld	hl,_game_gravity
2591  0B94  4E          	ld	c, (hl)
2592  0B95  21 00 00    	ld	hl,_player_vel_y
2593  0B98  7E          	ld	a, (hl)
2594  0B99  81          	add	a, c
2595  0B9A  77          	ld	(hl), a
2596  0B9B  21 00 00    	ld	hl,_sprite_on_air
2597  0B9E  36 01       	ld	(hl),0x01
2598  0BA0  3A 00 00    	ld	a,(_player_vel_inc)
2599  0BA3  B7          	or	a, a
2600  0BA4  28 24       	jr	Z,l_player_move_jump_00106
2601  0BA6  21 00 00    	ld	hl,_dirs
2602  0BA9  CB 7E       	bit	7, (hl)
2603  0BAB  20 1D       	jr	NZ,l_player_move_jump_00106
2604  0BAD  3A 00 00    	ld	a,(_player_vel_y1)
2605  0BB0  21 00 00    	ld	hl,_player_vel_y
2606  0BB3  96          	sub	a, (hl)
2607  0BB4  E2 B9 0B    	jp	PO, l_player_move_jump_00247
2608  0BB7  EE 80       	xor	a,0x80
2609  0BB9              l_player_move_jump_00247:
2610  0BB9  F2 CA 0B    	jp	P, l_player_move_jump_00106
2611  0BBC  21 00 00    	ld	hl,_player_vel_y
2612  0BBF  CB 7E       	bit	7,(hl)
2613  0BC1  28 07       	jr	Z,l_player_move_jump_00106
2614  0BC3  36 00       	ld	(hl),0x00
2615  0BC5  21 00 00    	ld	hl,_player_vel_inc
2616  0BC8  36 00       	ld	(hl),0x00
2617  0BCA              l_player_move_jump_00106:
2618  0BCA  3E 78       	ld	a,0x78
2619  0BCC  21 00 00    	ld	hl,_player_vel_y
2620  0BCF  96          	sub	a, (hl)
2621  0BD0  E2 D5 0B    	jp	PO, l_player_move_jump_00248
2622  0BD3  EE 80       	xor	a,0x80
2623  0BD5              l_player_move_jump_00248:
2624  0BD5  F2 DD 0B    	jp	P, l_player_move_jump_00108
2625  0BD8  21 00 00    	ld	hl,_player_vel_y
2626  0BDB  36 78       	ld	(hl),0x78
2627  0BDD              l_player_move_jump_00108:
2628  0BDD  21 00 00    	ld	hl,_player_vel_y
2629  0BE0  7E          	ld	a, (hl)
2630  0BE1  EE 80       	xor	a,0x80
2631  0BE3  D6 08       	sub	a,0x08
2632  0BE5  30 02       	jr	NC,l_player_move_jump_00110
2633  0BE7  36 88       	ld	(hl),0x88
2634  0BE9              l_player_move_jump_00110:
2635  0BE9  3A 00 00    	ld	a,(_player_vel_y)
2636  0BEC  5F          	ld	e,a
2637  0BED  17          	rla
2638  0BEE  9F          	sbc	a, a
2639  0BEF  57          	ld	d, a
2640  0BF0  CB 43       	bit	0,e
2641  0BF2  21 00 00    	ld	hl,_s_lin1
2642  0BF5  73          	ld	(hl),e
2643  0BF6  28 04       	jr	Z,l_player_move_jump_00112
2644  0BF8  21 00 00    	ld	hl,_s_lin1
2645  0BFB  35          	dec	(hl)
2646  0BFC              l_player_move_jump_00112:
2647  0BFC  2A 00 00    	ld	hl,(_sprite)
2648  0BFF  26 00       	ld	h,0x00
2649  0C01  01 00 00    	ld	bc,_lin
2650  0C04  09          	add	hl,bc
2651  0C05  7E          	ld	a,(hl)
2652  0C06  DD 77 FF    	ld	(ix-1),a
2653  0C09  4D          	ld	c,l
2654  0C0A  44          	ld	b,h
2655  0C0B  21 00 00    	ld	hl,_s_lin1
2656  0C0E  86          	add	a, (hl)
2657  0C0F  77          	ld	(hl), a
2658  0C10  3E 90       	ld	a,0x90
2659  0C12  96          	sub	a, (hl)
2660  0C13  30 0E       	jr	NC,l_player_move_jump_00117
2661  0C15  3E C8       	ld	a,0xc8
2662  0C17  96          	sub	a, (hl)
2663  0C18  30 04       	jr	NC,l_player_move_jump_00114
2664  0C1A  36 00       	ld	(hl),0x00
2665  0C1C  18 05       	jr	l_player_move_jump_00117
2666  0C1E              l_player_move_jump_00114:
2667  0C1E  21 00 00    	ld	hl,_s_lin1
2668  0C21  36 90       	ld	(hl),0x90
2669  0C23              l_player_move_jump_00117:
2670  0C23  3A 00 00    	ld	a,(_s_lin0)
2671  0C26  07          	rlca
2672  0C27  07          	rlca
2673  0C28  07          	rlca
2674  0C29  07          	rlca
2675  0C2A  E6 0F       	and	a,0x0f
2676  0C2C  DD 77 FF    	ld	(ix-1),a
2677  0C2F  CB 7A       	bit	7, d
2678  0C31  28 73       	jr	Z,l_player_move_jump_00140
2679  0C33  21 00 00    	ld	hl,_s_state
2680  0C36  7E          	ld	a,(hl)
2681  0C37  F6 01       	or	a,0x01
2682  0C39  E6 FD       	and	a,0xfd
2683  0C3B  77          	ld	(hl),a
2684  0C3C  21 00 00    	ld	hl,_s_lin1
2685  0C3F  DD 7E FF    	ld	a,(ix-1)
2686  0C42  96          	sub	a,(hl)
2687  0C43  20 04       	jr	NZ,l_player_move_jump_00250
2688  0C45  3E 01       	ld	a,0x01
2689  0C47  18 01       	jr	l_player_move_jump_00251
2690  0C49              l_player_move_jump_00250:
2691  0C49  AF          	xor	a,a
2692  0C4A              l_player_move_jump_00251:
2693  0C4A  EE 01       	xor	a,0x01
2694  0C4C  28 51       	jr	Z,l_player_move_jump_00124
2695  0C4E  2A 00 00    	ld	hl,(_sprite)
2696  0C51  26 00       	ld	h,0x00
2697  0C53  01 00 00    	ld	bc,_col
2698  0C56  09          	add	hl,bc
2699  0C57  7E          	ld	a,(hl)
2700  0C58  F5          	push	af
2701  0C59  33          	inc	sp
2702  0C5A  3A 00 00    	ld	a,(_s_lin1)
2703  0C5D  F5          	push	af
2704  0C5E  33          	inc	sp
2705  0C5F  CD 00 00    	call	_game_check_map
2706  0C62  F1          	pop	af
2707  0C63  7C          	ld	a,h
2708  0C64  B5          	or	a,l
2709  0C65  28 28       	jr	Z,l_player_move_jump_00121
2710  0C67  CD 76 08    	call	_player_hit_platform
2711  0C6A  7D          	ld	a, l
2712  0C6B  B7          	or	a, a
2713  0C6C  28 19       	jr	Z,l_player_move_jump_00119
2714  0C6E  2A 00 00    	ld	hl,(_sprite)
2715  0C71  26 00       	ld	h,0x00
2716  0C73  01 00 00    	ld	bc,_lin
2717  0C76  09          	add	hl,bc
2718  0C77  7E          	ld	a,(hl)
2719  0C78  4D          	ld	c,l
2720  0C79  44          	ld	b,h
2721  0C7A  07          	rlca
2722  0C7B  07          	rlca
2723  0C7C  07          	rlca
2724  0C7D  07          	rlca
2725  0C7E  E6 0F       	and	a,0x0f
2726  0C80  07          	rlca
2727  0C81  07          	rlca
2728  0C82  07          	rlca
2729  0C83  07          	rlca
2730  0C84  E6 F0       	and	a,0xf0
2731  0C86  02          	ld	(bc), a
2732  0C87              l_player_move_jump_00119:
2733  0C87  21 00 00    	ld	hl,_player_vel_y
2734  0C8A  36 00       	ld	(hl),0x00
2735  0C8C  C3 66 0D    	jp	l_player_move_jump_00141
2736  0C8F              l_player_move_jump_00121:
2737  0C8F  2A 00 00    	ld	hl,(_sprite)
2738  0C92  26 00       	ld	h,0x00
2739  0C94  01 00 00    	ld	bc,_lin
2740  0C97  09          	add	hl,bc
2741  0C98  3A 00 00    	ld	a,(_s_lin1)
2742  0C9B  77          	ld	(hl),a
2743  0C9C  C3 66 0D    	jp	l_player_move_jump_00141
2744  0C9F              l_player_move_jump_00124:
2745  0C9F  3A 00 00    	ld	a,(_s_lin1)
2746  0CA2  02          	ld	(bc), a
2747  0CA3  C3 66 0D    	jp	l_player_move_jump_00141
2748  0CA6              l_player_move_jump_00140:
2749  0CA6  21 00 00    	ld	hl,_s_state
2750  0CA9  7E          	ld	a,(hl)
2751  0CAA  F6 02       	or	a,0x02
2752  0CAC  E6 FE       	and	a,0xfe
2753  0CAE  77          	ld	(hl),a
2754  0CAF  21 00 00    	ld	hl,_s_lin1
2755  0CB2  7E          	ld	a, (hl)
2756  0CB3  C6 10       	add	a,0x10
2757  0CB5  77          	ld	(hl), a
2758  0CB6  DD 7E FF    	ld	a,(ix-1)
2759  0CB9  96          	sub	a,(hl)
2760  0CBA  20 04       	jr	NZ,l_player_move_jump_00252
2761  0CBC  3E 01       	ld	a,0x01
2762  0CBE  18 01       	jr	l_player_move_jump_00253
2763  0CC0              l_player_move_jump_00252:
2764  0CC0  AF          	xor	a,a
2765  0CC1              l_player_move_jump_00253:
2766  0CC1  EE 01       	xor	a,0x01
2767  0CC3  CA 5E 0D    	jp	Z, l_player_move_jump_00137
2768  0CC6  2A 00 00    	ld	hl,(_sprite)
2769  0CC9  26 00       	ld	h,0x00
2770  0CCB  01 00 00    	ld	bc,_col
2771  0CCE  09          	add	hl,bc
2772  0CCF  7E          	ld	a,(hl)
2773  0CD0  F5          	push	af
2774  0CD1  33          	inc	sp
2775  0CD2  3A 00 00    	ld	a,(_s_lin1)
2776  0CD5  F5          	push	af
2777  0CD6  33          	inc	sp
2778  0CD7  CD 00 00    	call	_game_check_map
2779  0CDA  F1          	pop	af
2780  0CDB  45          	ld	b, l
2781  0CDC  5C          	ld	e, h
2782  0CDD  21 00 00    	ld	hl,_s_lin1
2783  0CE0  7E          	ld	a, (hl)
2784  0CE1  C6 F0       	add	a,0xf0
2785  0CE3  4F          	ld	c, a
2786  0CE4  7B          	ld	a, e
2787  0CE5  B0          	or	a,b
2788  0CE6  28 63       	jr	Z,l_player_move_jump_00134
2789  0CE8  71          	ld	(hl), c
2790  0CE9  2E 00       	ld	l,0x00
2791  0CEB  CD 70 04    	call	_player_check_stairs
2792  0CEE  3A 00 00    	ld	a,(_player_over_stair)
2793  0CF1  B7          	or	a, a
2794  0CF2  20 05       	jr	NZ,l_player_move_jump_00127
2795  0CF4  2E 01       	ld	l,0x01
2796  0CF6  CD 70 04    	call	_player_check_stairs
2797  0CF9              l_player_move_jump_00127:
2798  0CF9  3A 00 00    	ld	a,(_player_over_stair)
2799  0CFC  B7          	or	a, a
2800  0CFD  20 31       	jr	NZ,l_player_move_jump_00132
2801  0CFF  21 00 00    	ld	hl,_s_lin1
2802  0D02  7E          	ld	a, (hl)
2803  0D03  07          	rlca
2804  0D04  07          	rlca
2805  0D05  07          	rlca
2806  0D06  07          	rlca
2807  0D07  E6 0F       	and	a,0x0f
2808  0D09  07          	rlca
2809  0D0A  07          	rlca
2810  0D0B  07          	rlca
2811  0D0C  07          	rlca
2812  0D0D  E6 F0       	and	a,0xf0
2813  0D0F  77          	ld	(hl), a
2814  0D10  2A 00 00    	ld	hl,(_sprite)
2815  0D13  26 00       	ld	h,0x00
2816  0D15  01 00 00    	ld	bc,_lin
2817  0D18  09          	add	hl,bc
2818  0D19  5E          	ld	e,(hl)
2819  0D1A  4D          	ld	c,l
2820  0D1B  44          	ld	b,h
2821  0D1C  21 00 00    	ld	hl,_s_lin1
2822  0D1F  7E          	ld	a, (hl)
2823  0D20  93          	sub	a, e
2824  0D21  30 09       	jr	NC,l_player_move_jump_00129
2825  0D23  7E          	ld	a, (hl)
2826  0D24  C6 10       	add	a,0x10
2827  0D26  02          	ld	(bc), a
2828  0D27  2E 00       	ld	l,0x00
2829  0D29  C3 AE 0D    	jp	l_player_move_jump_00151
2830  0D2C              l_player_move_jump_00129:
2831  0D2C  3A 00 00    	ld	a,(_s_lin1)
2832  0D2F  02          	ld	(bc), a
2833  0D30              l_player_move_jump_00132:
2834  0D30  21 00 00    	ld	hl,_player_vel_y
2835  0D33  36 00       	ld	(hl),0x00
2836  0D35  21 00 00    	ld	hl,_s_state
2837  0D38  7E          	ld	a,(hl)
2838  0D39  E6 FC       	and	a,+(0xfd&0xfe)
2839  0D3B  77          	ld	(hl),a
2840  0D3C  2A 00 00    	ld	hl,(_sprite)
2841  0D3F  26 00       	ld	h,0x00
2842  0D41  01 00 00    	ld	bc,_colint
2843  0D44  09          	add	hl,bc
2844  0D45  AF          	xor	a,a
2845  0D46  77          	ld	(hl),a
2846  0D47  2E 01       	ld	l,0x01
2847  0D49  18 63       	jr	l_player_move_jump_00151
2848  0D4B              l_player_move_jump_00134:
2849  0D4B  21 00 00    	ld	hl,_s_lin1
2850  0D4E  71          	ld	(hl), c
2851  0D4F  2A 00 00    	ld	hl,(_sprite)
2852  0D52  26 00       	ld	h,0x00
2853  0D54  01 00 00    	ld	bc,_lin
2854  0D57  09          	add	hl,bc
2855  0D58  3A 00 00    	ld	a,(_s_lin1)
2856  0D5B  77          	ld	(hl),a
2857  0D5C  18 08       	jr	l_player_move_jump_00141
2858  0D5E              l_player_move_jump_00137:
2859  0D5E  21 00 00    	ld	hl,_s_lin1
2860  0D61  7E          	ld	a, (hl)
2861  0D62  C6 F0       	add	a,0xf0
2862  0D64  77          	ld	(hl),a
2863  0D65  02          	ld	(bc), a
2864  0D66              l_player_move_jump_00141:
2865  0D66  21 00 00    	ld	hl,_s_state
2866  0D69  CB 5E       	bit	3, (hl)
2867  0D6B  20 27       	jr	NZ,l_player_move_jump_00147
2868  0D6D  21 00 00    	ld	hl,_s_state
2869  0D70  CB 56       	bit	2, (hl)
2870  0D72  20 20       	jr	NZ,l_player_move_jump_00147
2871  0D74  21 00 00    	ld	hl,_dirs
2872  0D77  CB 56       	bit	2, (hl)
2873  0D79  28 09       	jr	Z,l_player_move_jump_00143
2874  0D7B  21 00 00    	ld	hl,_s_state
2875  0D7E  7E          	ld	a,(hl)
2876  0D7F  F6 08       	or	a,0x08
2877  0D81  E6 FB       	and	a,0xfb
2878  0D83  77          	ld	(hl),a
2879  0D84              l_player_move_jump_00143:
2880  0D84  21 00 00    	ld	hl,_dirs
2881  0D87  CB 5E       	bit	3, (hl)
2882  0D89  28 09       	jr	Z,l_player_move_jump_00147
2883  0D8B  21 00 00    	ld	hl,_s_state
2884  0D8E  7E          	ld	a,(hl)
2885  0D8F  F6 04       	or	a,0x04
2886  0D91  E6 F7       	and	a,0xf7
2887  0D93  77          	ld	(hl),a
2888  0D94              l_player_move_jump_00147:
2889  0D94  21 00 00    	ld	hl,_sprite_horizontal_check
2890  0D97  36 01       	ld	(hl),0x01
2891  0D99  CD 00 00    	call	_spr_move_horizontal
2892  0D9C  7D          	ld	a, l
2893  0D9D  B7          	or	a, a
2894  0D9E  28 07       	jr	Z,l_player_move_jump_00150
2895  0DA0  21 00 00    	ld	hl,_s_state
2896  0DA3  7E          	ld	a,(hl)
2897  0DA4  E6 F3       	and	a,+(0xf7&0xfb)
2898  0DA6  77          	ld	(hl),a
2899  0DA7              l_player_move_jump_00150:
2900  0DA7  21 00 00    	ld	hl,_sprite_horizontal_check
2901  0DAA  36 00       	ld	(hl),0x00
2902  0DAC  2E 00       	ld	l,0x00
2903  0DAE              l_player_move_jump_00151:
2904  0DAE  33          	inc	sp
2905  0DAF  DD E1       	pop	ix
2906  0DB1  C9          	ret
2907  0DB2              	SECTION code_compiler
2908  0DB2              ;	---------------------------------
2909  0DB2              ; Function player_open_door
2910  0DB2              ; ---------------------------------
2911  0DB2              _player_open_door:
2912  0DB2  CD 00 00    	call	___sdcc_enter_ix
2913  0DB5  0E 00       	ld	c,0x00
2914  0DB7  DD 7E 06    	ld	a,(ix+6)
2915  0DBA  D6 48       	sub	a,0x48
2916  0DBC  28 17       	jr	Z,l_player_open_door_00101
2917  0DBE  DD 7E 06    	ld	a,(ix+6)
2918  0DC1  D6 49       	sub	a,0x49
2919  0DC3  28 1F       	jr	Z,l_player_open_door_00104
2920  0DC5  DD 7E 06    	ld	a,(ix+6)
2921  0DC8  D6 4A       	sub	a,0x4a
2922  0DCA  28 27       	jr	Z,l_player_open_door_00107
2923  0DCC  DD 7E 06    	ld	a,(ix+6)
2924  0DCF  D6 4B       	sub	a,0x4b
2925  0DD1  28 2F       	jr	Z,l_player_open_door_00110
2926  0DD3  18 3A       	jr	l_player_open_door_00113
2927  0DD5              l_player_open_door_00101:
2928  0DD5  3A 00 00    	ld	a,(_player_keys)
2929  0DD8  B7          	or	a, a
2930  0DD9  28 34       	jr	Z,l_player_open_door_00113
2931  0DDB  2E 07       	ld	l,0x07
2932  0DDD  CD 00 00    	call	_zx_border_fastcall
2933  0DE0  0E 01       	ld	c,0x01
2934  0DE2  18 2B       	jr	l_player_open_door_00113
2935  0DE4              l_player_open_door_00104:
2936  0DE4  3A 01 00    	ld	a,(_player_keys + 0x0001)
2937  0DE7  B7          	or	a, a
2938  0DE8  28 25       	jr	Z,l_player_open_door_00113
2939  0DEA  2E 02       	ld	l,0x02
2940  0DEC  CD 00 00    	call	_zx_border_fastcall
2941  0DEF  0E 01       	ld	c,0x01
2942  0DF1  18 1C       	jr	l_player_open_door_00113
2943  0DF3              l_player_open_door_00107:
2944  0DF3  3A 02 00    	ld	a,(_player_keys + 0x0002)
2945  0DF6  B7          	or	a, a
2946  0DF7  28 16       	jr	Z,l_player_open_door_00113
2947  0DF9  2E 04       	ld	l,0x04
2948  0DFB  CD 00 00    	call	_zx_border_fastcall
2949  0DFE  0E 01       	ld	c,0x01
2950  0E00  18 0D       	jr	l_player_open_door_00113
2951  0E02              l_player_open_door_00110:
2952  0E02  3A 03 00    	ld	a,(_player_keys + 0x0003)
2953  0E05  B7          	or	a, a
2954  0E06  28 07       	jr	Z,l_player_open_door_00113
2955  0E08  2E 05       	ld	l,0x05
2956  0E0A  CD 00 00    	call	_zx_border_fastcall
2957  0E0D  0E 01       	ld	c,0x01
2958  0E0F              l_player_open_door_00113:
2959  0E0F  79          	ld	a, c
2960  0E10  B7          	or	a, a
2961  0E11  20 06       	jr	NZ,l_player_open_door_00114
2962  0E13  3A 00 00    	ld	a,(_game_inmune)
2963  0E16  B7          	or	a, a
2964  0E17  28 24       	jr	Z,l_player_open_door_00117
2965  0E19              l_player_open_door_00114:
2966  0E19  3E 00       	ld	a, +((_scr_map) & 0xFF)
2967  0E1B  DD 86 04    	add	a,(ix+4)
2968  0E1E  4F          	ld	c, a
2969  0E1F  3E 00       	ld	a, +((_scr_map) / 256)
2970  0E21  DD 8E 05    	adc	a,(ix+5)
2971  0E24  47          	ld	b, a
2972  0E25  AF          	xor	a, a
2973  0E26  02          	ld	(bc), a
2974  0E27  DD 6E 04    	ld	l,(ix+4)
2975  0E2A  DD 66 05    	ld	h,(ix+5)
2976  0E2D  E5          	push	hl
2977  0E2E  CD 00 00    	call	_game_obj_set
2978  0E31  F1          	pop	af
2979  0E32  DD 6E 04    	ld	l,(ix+4)
2980  0E35  DD 66 05    	ld	h,(ix+5)
2981  0E38  E5          	push	hl
2982  0E39  CD 00 00    	call	_spr_draw_index
2983  0E3C  F1          	pop	af
2984  0E3D              l_player_open_door_00117:
2985  0E3D  DD E1       	pop	ix
2986  0E3F  C9          	ret
2987  0E40              	SECTION code_compiler
2988  0E40              ;	---------------------------------
2989  0E40              ; Function player_lost_life
2990  0E40              ; ---------------------------------
2991  0E40              _player_lost_life:
2992  0E40  3A 07 00    	ld	a,(_lin + 0x0007)
2993  0E43  32 00 00    	ld	(_s_lin0),a
2994  0E46  3A 07 00    	ld	a,(_col + 0x0007)
2995  0E49  32 00 00    	ld	(_s_col0),a
2996  0E4C  CD 00 00    	call	_spr_init_anim_bullets
2997  0E4F  01 00 00    	ld	bc,_class+0
2998  0E52  16 00       	ld	d,0x00
2999  0E54              l_player_lost_life_00114:
3000  0E54  C5          	push	bc
3001  0E55  D5          	push	de
3002  0E56  21 00 00    	ld	hl,0x0000
3003  0E59  E5          	push	hl
3004  0E5A  AF          	xor	a, a
3005  0E5B  5A          	ld	e,d
3006  0E5C  57          	ld	d,a
3007  0E5D  D5          	push	de
3008  0E5E  CD 00 00    	call	_NIRVANAP_spriteT_callee
3009  0E61  D1          	pop	de
3010  0E62  C1          	pop	bc
3011  0E63  6A          	ld	l,d
3012  0E64  26 00       	ld	h,0x00
3013  0E66  09          	add	hl, bc
3014  0E67  36 00       	ld	(hl),0x00
3015  0E69  14          	inc	d
3016  0E6A  7A          	ld	a, d
3017  0E6B  D6 08       	sub	a,0x08
3018  0E6D  38 E5       	jr	C,l_player_lost_life_00114
3019  0E6F  76          	halt
3020  0E70  3A 00 00    	ld	a,(_s_lin0)
3021  0E73  C6 F0       	add	a,0xf0
3022  0E75  47          	ld	b, a
3023  0E76  3A 00 00    	ld	a,(_s_col0)
3024  0E79  21 00 00    	ld	hl,0x0000
3025  0E7C  E5          	push	hl
3026  0E7D  21 87 03    	ld	hl,0x0387
3027  0E80  E5          	push	hl
3028  0E81  48          	ld	c,b
3029  0E82  47          	ld	b,a
3030  0E83  C5          	push	bc
3031  0E84  CD 00 00    	call	_spr_add_anim
3032  0E87  F1          	pop	af
3033  0E88  F1          	pop	af
3034  0E89  F1          	pop	af
3035  0E8A  21 00 00    	ld	hl,_s_col0
3036  0E8D  7E          	ld	a, (hl)
3037  0E8E  D6 02       	sub	a,0x02
3038  0E90  38 18       	jr	C,l_player_lost_life_00103
3039  0E92  46          	ld	b, (hl)
3040  0E93  05          	dec	b
3041  0E94  05          	dec	b
3042  0E95  21 00 00    	ld	hl,0x0000
3043  0E98  E5          	push	hl
3044  0E99  21 87 03    	ld	hl,0x0387
3045  0E9C  E5          	push	hl
3046  0E9D  C5          	push	bc
3047  0E9E  33          	inc	sp
3048  0E9F  3A 00 00    	ld	a,(_s_lin0)
3049  0EA2  F5          	push	af
3050  0EA3  33          	inc	sp
3051  0EA4  CD 00 00    	call	_spr_add_anim
3052  0EA7  F1          	pop	af
3053  0EA8  F1          	pop	af
3054  0EA9  F1          	pop	af
3055  0EAA              l_player_lost_life_00103:
3056  0EAA  3A 00 00    	ld	a,(_s_col0)
3057  0EAD  21 00 00    	ld	hl,0x0000
3058  0EB0  E5          	push	hl
3059  0EB1  21 87 03    	ld	hl,0x0387
3060  0EB4  E5          	push	hl
3061  0EB5  F5          	push	af
3062  0EB6  33          	inc	sp
3063  0EB7  3A 00 00    	ld	a,(_s_lin0)
3064  0EBA  F5          	push	af
3065  0EBB  33          	inc	sp
3066  0EBC  CD 00 00    	call	_spr_add_anim
3067  0EBF  F1          	pop	af
3068  0EC0  F1          	pop	af
3069  0EC1  F1          	pop	af
3070  0EC2  21 00 00    	ld	hl,_s_col0
3071  0EC5  7E          	ld	a, (hl)
3072  0EC6  D6 1E       	sub	a,0x1e
3073  0EC8  30 18       	jr	NC,l_player_lost_life_00105
3074  0ECA  46          	ld	b, (hl)
3075  0ECB  04          	inc	b
3076  0ECC  04          	inc	b
3077  0ECD  21 00 00    	ld	hl,0x0000
3078  0ED0  E5          	push	hl
3079  0ED1  21 87 03    	ld	hl,0x0387
3080  0ED4  E5          	push	hl
3081  0ED5  C5          	push	bc
3082  0ED6  33          	inc	sp
3083  0ED7  3A 00 00    	ld	a,(_s_lin0)
3084  0EDA  F5          	push	af
3085  0EDB  33          	inc	sp
3086  0EDC  CD 00 00    	call	_spr_add_anim
3087  0EDF  F1          	pop	af
3088  0EE0  F1          	pop	af
3089  0EE1  F1          	pop	af
3090  0EE2              l_player_lost_life_00105:
3091  0EE2  3A 00 00    	ld	a,(_s_lin0)
3092  0EE5  C6 10       	add	a,0x10
3093  0EE7  47          	ld	b, a
3094  0EE8  3A 00 00    	ld	a,(_s_col0)
3095  0EEB  21 00 00    	ld	hl,0x0000
3096  0EEE  E5          	push	hl
3097  0EEF  21 87 03    	ld	hl,0x0387
3098  0EF2  E5          	push	hl
3099  0EF3  48          	ld	c,b
3100  0EF4  47          	ld	b,a
3101  0EF5  C5          	push	bc
3102  0EF6  CD 00 00    	call	_spr_add_anim
3103  0EF9  F1          	pop	af
3104  0EFA  F1          	pop	af
3105  0EFB  F1          	pop	af
3106  0EFC  2E 00       	ld	l,0x00
3107  0EFE  CD 00 00    	call	_zx_border_fastcall
3108  0F01  21 00 00    	ld	hl,_tmp
3109  0F04  36 01       	ld	(hl),0x01
3110  0F06              l_player_lost_life_00111:
3111  0F06  3A 00 00    	ld	a,(_tmp)
3112  0F09  B7          	or	a, a
3113  0F0A  28 2F       	jr	Z,l_player_lost_life_00113
3114  0F0C  21 06 00    	ld	hl,0x0006
3115  0F0F  E5          	push	hl
3116  0F10  2A 00 00    	ld	hl,(_anim_time)
3117  0F13  E5          	push	hl
3118  0F14  CD 00 00    	call	_game_check_time
3119  0F17  F1          	pop	af
3120  0F18  F1          	pop	af
3121  0F19  7D          	ld	a, l
3122  0F1A  B7          	or	a, a
3123  0F1B  28 16       	jr	Z,l_player_lost_life_00110
3124  0F1D  2A 00 00    	ld	hl,(_curr_time)
3125  0F20  22 00 00    	ld	(_anim_time),hl
3126  0F23  3A 00 00    	ld	a,(_anim_count)
3127  0F26  B7          	or	a,a
3128  0F27  28 05       	jr	Z,l_player_lost_life_00107
3129  0F29  CD 00 00    	call	_spr_play_anim
3130  0F2C  18 05       	jr	l_player_lost_life_00110
3131  0F2E              l_player_lost_life_00107:
3132  0F2E  21 00 00    	ld	hl,_tmp
3133  0F31  36 00       	ld	(hl),0x00
3134  0F33              l_player_lost_life_00110:
3135  0F33  21 05 00    	ld	hl,0x0005
3136  0F36  CD 00 00    	call	_z80_delay_ms_fastcall
3137  0F39  18 CB       	jr	l_player_lost_life_00111
3138  0F3B              l_player_lost_life_00113:
3139  0F3B  21 F4 01    	ld	hl,0x01f4
3140  0F3E  CD 00 00    	call	_z80_delay_ms_fastcall
3141  0F41  3A 00 00    	ld	a,(_game_start_scr)
3142  0F44  32 00 00    	ld	(_scr_curr),a
3143  0F47  CD 00 00    	call	_game_round_init
3144  0F4A  C9          	ret
3145  0F4B              	SECTION code_compiler
3146  0F4B              ;	---------------------------------
3147  0F4B              ; Function player_hit
3148  0F4B              ; ---------------------------------
3149  0F4B              _player_hit:
3150  0F4B  7D          	ld	a,l
3151  0F4C  4D          	ld	c,l
3152  0F4D  21 00 00    	ld	hl,_player_vita
3153  0F50  96          	sub	a, (hl)
3154  0F51  30 17       	jr	NC,l_player_hit_00107
3155  0F53  3A 00 00    	ld	a,(_game_inmune)
3156  0F56  B7          	or	a, a
3157  0F57  20 06       	jr	NZ,l_player_hit_00102
3158  0F59  21 00 00    	ld	hl,_player_vita
3159  0F5C  7E          	ld	a, (hl)
3160  0F5D  91          	sub	a, c
3161  0F5E  77          	ld	(hl), a
3162  0F5F              l_player_hit_00102:
3163  0F5F  2A 00 00    	ld	hl,(_curr_time)
3164  0F62  22 00 00    	ld	(_player_hit_time),hl
3165  0F65  CD 00 00    	call	_game_update_stats
3166  0F68  18 1F       	jr	l_player_hit_00109
3167  0F6A              l_player_hit_00107:
3168  0F6A  21 00 00    	ld	hl,_player_vita
3169  0F6D  36 00       	ld	(hl),0x00
3170  0F6F  CD 00 00    	call	_game_update_stats
3171  0F72  CD 40 0E    	call	_player_lost_life
3172  0F75  21 00 00    	ld	hl,_player_lives
3173  0F78  7E          	ld	a, (hl)
3174  0F79  B7          	or	a, a
3175  0F7A  28 03       	jr	Z,l_player_hit_00104
3176  0F7C  35          	dec	(hl)
3177  0F7D  18 0A       	jr	l_player_hit_00109
3178  0F7F              l_player_hit_00104:
3179  0F7F  21 00 00    	ld	hl,_player_lives
3180  0F82  36 00       	ld	(hl),0x00
3181  0F84  21 00 00    	ld	hl,_game_over
3182  0F87  36 01       	ld	(hl),0x01
3183  0F89              l_player_hit_00109:
3184  0F89  C9          	ret
3185  0F8A              	SECTION IGNORE
3186  0000              
