1     0000              MODULE game_player_c
2     0000              LINE -1, "game_player.c"
-1    0000              
0     0000              
1     0000              ;--------------------------------------------------------
2     0000              ; File Created by SDCC : free open source ANSI-C Compiler
3     0000              ; Version 3.6.5 #9958 (Mac OS X i386)
4     0000              ;--------------------------------------------------------
5     0000              ; Processed by Z88DK
6     0000              ;--------------------------------------------------------
7     0000              
8     0000              	EXTERN __divschar
9     0000              	EXTERN __divschar_callee
10    0000              	EXTERN __divsint
11    0000              	EXTERN __divsint_callee
12    0000              	EXTERN __divslong
13    0000              	EXTERN __divslong_callee
14    0000              	EXTERN __divslonglong
15    0000              	EXTERN __divslonglong_callee
16    0000              	EXTERN __divsuchar
17    0000              	EXTERN __divsuchar_callee
18    0000              	EXTERN __divuchar
19    0000              	EXTERN __divuchar_callee
20    0000              	EXTERN __divuint
21    0000              	EXTERN __divuint_callee
22    0000              	EXTERN __divulong
23    0000              	EXTERN __divulong_callee
24    0000              	EXTERN __divulonglong
25    0000              	EXTERN __divulonglong_callee
26    0000              	EXTERN __divuschar
27    0000              	EXTERN __divuschar_callee
28    0000              	EXTERN __modschar
29    0000              	EXTERN __modschar_callee
30    0000              	EXTERN __modsint
31    0000              	EXTERN __modsint_callee
32    0000              	EXTERN __modslong
33    0000              	EXTERN __modslong_callee
34    0000              	EXTERN __modslonglong
35    0000              	EXTERN __modslonglong_callee
36    0000              	EXTERN __modsuchar
37    0000              	EXTERN __modsuchar_callee
38    0000              	EXTERN __moduchar
39    0000              	EXTERN __moduchar_callee
40    0000              	EXTERN __moduint
41    0000              	EXTERN __moduint_callee
42    0000              	EXTERN __modulong
43    0000              	EXTERN __modulong_callee
44    0000              	EXTERN __modulonglong
45    0000              	EXTERN __modulonglong_callee
46    0000              	EXTERN __moduschar
47    0000              	EXTERN __moduschar_callee
48    0000              	EXTERN __mulint
49    0000              	EXTERN __mulint_callee
50    0000              	EXTERN __mullong
51    0000              	EXTERN __mullong_callee
52    0000              	EXTERN __mullonglong
53    0000              	EXTERN __mullonglong_callee
54    0000              	EXTERN __mulschar
55    0000              	EXTERN __mulschar_callee
56    0000              	EXTERN __mulsuchar
57    0000              	EXTERN __mulsuchar_callee
58    0000              	EXTERN __muluschar
59    0000              	EXTERN __muluschar_callee
60    0000              	EXTERN __rlslonglong
61    0000              	EXTERN __rlslonglong_callee
62    0000              	EXTERN __rlulonglong
63    0000              	EXTERN __rlulonglong_callee
64    0000              	EXTERN __rrslonglong
65    0000              	EXTERN __rrslonglong_callee
66    0000              	EXTERN __rrulonglong
67    0000              	EXTERN __rrulonglong_callee
68    0000              	EXTERN ___sdcc_call_hl
69    0000              	EXTERN ___sdcc_call_iy
70    0000              	EXTERN ___sdcc_enter_ix
71    0000              	EXTERN _banked_call
72    0000              	EXTERN _banked_ret
73    0000              	EXTERN ___fs2schar
74    0000              	EXTERN ___fs2schar_callee
75    0000              	EXTERN ___fs2sint
76    0000              	EXTERN ___fs2sint_callee
77    0000              	EXTERN ___fs2slong
78    0000              	EXTERN ___fs2slong_callee
79    0000              	EXTERN ___fs2slonglong
80    0000              	EXTERN ___fs2slonglong_callee
81    0000              	EXTERN ___fs2uchar
82    0000              	EXTERN ___fs2uchar_callee
83    0000              	EXTERN ___fs2uint
84    0000              	EXTERN ___fs2uint_callee
85    0000              	EXTERN ___fs2ulong
86    0000              	EXTERN ___fs2ulong_callee
87    0000              	EXTERN ___fs2ulonglong
88    0000              	EXTERN ___fs2ulonglong_callee
89    0000              	EXTERN ___fsadd
90    0000              	EXTERN ___fsadd_callee
91    0000              	EXTERN ___fsdiv
92    0000              	EXTERN ___fsdiv_callee
93    0000              	EXTERN ___fseq
94    0000              	EXTERN ___fseq_callee
95    0000              	EXTERN ___fsgt
96    0000              	EXTERN ___fsgt_callee
97    0000              	EXTERN ___fslt
98    0000              	EXTERN ___fslt_callee
99    0000              	EXTERN ___fsmul
100   0000              	EXTERN ___fsmul_callee
101   0000              	EXTERN ___fsneq
102   0000              	EXTERN ___fsneq_callee
103   0000              	EXTERN ___fssub
104   0000              	EXTERN ___fssub_callee
105   0000              	EXTERN ___schar2fs
106   0000              	EXTERN ___schar2fs_callee
107   0000              	EXTERN ___sint2fs
108   0000              	EXTERN ___sint2fs_callee
109   0000              	EXTERN ___slong2fs
110   0000              	EXTERN ___slong2fs_callee
111   0000              	EXTERN ___slonglong2fs
112   0000              	EXTERN ___slonglong2fs_callee
113   0000              	EXTERN ___uchar2fs
114   0000              	EXTERN ___uchar2fs_callee
115   0000              	EXTERN ___uint2fs
116   0000              	EXTERN ___uint2fs_callee
117   0000              	EXTERN ___ulong2fs
118   0000              	EXTERN ___ulong2fs_callee
119   0000              	EXTERN ___ulonglong2fs
120   0000              	EXTERN ___ulonglong2fs_callee
121   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
122   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
123   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
126   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
127   0000              	EXTERN ____sdcc_4_ldi_save_bc
128   0000              	EXTERN ____sdcc_4_push_hlix
129   0000              	EXTERN ____sdcc_4_push_mhl
130   0000              	EXTERN ____sdcc_lib_setmem_hl
131   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
132   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
133   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
134   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
135   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
136   0000              	EXTERN ____sdcc_ll_add_deix_hlix
137   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
138   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
139   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
140   0000              	EXTERN ____sdcc_ll_asr_hlix_a
141   0000              	EXTERN ____sdcc_ll_asr_mbc_a
142   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
143   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
144   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
145   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
146   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
147   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
148   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
149   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
150   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
151   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
152   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
153   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
155   0000              	EXTERN ____sdcc_ll_push_hlix
156   0000              	EXTERN ____sdcc_ll_push_mhl
157   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
158   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
159   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
160   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
161   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
162   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
163   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
164   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
165   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
166   0000              	EXTERN ____sdcc_load_debc_deix
167   0000              	EXTERN ____sdcc_load_dehl_deix
168   0000              	EXTERN ____sdcc_load_debc_mhl
169   0000              	EXTERN ____sdcc_load_hlde_mhl
170   0000              	EXTERN ____sdcc_store_dehl_bcix
171   0000              	EXTERN ____sdcc_store_debc_hlix
172   0000              	EXTERN ____sdcc_store_debc_mhl
173   0000              	EXTERN ____sdcc_cpu_pop_ei
174   0000              	EXTERN ____sdcc_cpu_pop_ei_jp
175   0000              	EXTERN ____sdcc_cpu_push_di
176   0000              	EXTERN ____sdcc_outi
177   0000              	EXTERN ____sdcc_outi_128
178   0000              	EXTERN ____sdcc_outi_256
179   0000              	EXTERN ____sdcc_ldi
180   0000              	EXTERN ____sdcc_ldi_128
181   0000              	EXTERN ____sdcc_ldi_256
182   0000              	EXTERN ____sdcc_4_copy_srcd_hlix_dst_deix
183   0000              	EXTERN ____sdcc_4_and_src_mbc_mhl_dst_deix
184   0000              	EXTERN ____sdcc_4_or_src_mbc_mhl_dst_deix
185   0000              	EXTERN ____sdcc_4_xor_src_mbc_mhl_dst_deix
186   0000              	EXTERN ____sdcc_4_or_src_dehl_dst_bcix
187   0000              	EXTERN ____sdcc_4_xor_src_dehl_dst_bcix
188   0000              	EXTERN ____sdcc_4_and_src_dehl_dst_bcix
189   0000              	EXTERN ____sdcc_4_xor_src_mbc_mhl_dst_debc
190   0000              	EXTERN ____sdcc_4_or_src_mbc_mhl_dst_debc
191   0000              	EXTERN ____sdcc_4_and_src_mbc_mhl_dst_debc
192   0000              	EXTERN ____sdcc_4_cpl_src_mhl_dst_debc
193   0000              	EXTERN ____sdcc_4_xor_src_debc_mhl_dst_debc
194   0000              	EXTERN ____sdcc_4_or_src_debc_mhl_dst_debc
195   0000              	EXTERN ____sdcc_4_and_src_debc_mhl_dst_debc
196   0000              	EXTERN ____sdcc_4_and_src_debc_hlix_dst_debc
197   0000              	EXTERN ____sdcc_4_or_src_debc_hlix_dst_debc
198   0000              	EXTERN ____sdcc_4_xor_src_debc_hlix_dst_debc
199   0000              
200   0000              ;--------------------------------------------------------
201   0000              ; Public variables in this module
202   0000              ;--------------------------------------------------------
203   0000              	GLOBAL _player_check_map
204   0000              	GLOBAL _player_1up
205   0000              	GLOBAL _player_init
206   0000              	GLOBAL _player_turn
207   0000              	GLOBAL _player_move
208   0000              	GLOBAL _player_check_input
209   0000              	GLOBAL _player_move_input
210   0000              	GLOBAL _player_fix_walk_lin
211   0000              	GLOBAL _player_fire
212   0000              	GLOBAL _player_collision
213   0000              	GLOBAL _player_pick_mushroom
214   0000              	GLOBAL _player_check_stairs_vertical
215   0000              	GLOBAL _player_check_stairs
216   0000              	GLOBAL _player_anim_tile
217   0000              	GLOBAL _player_tile
218   0000              	GLOBAL _player_pick_item
219   0000              	GLOBAL _player_hit_platform
220   0000              	GLOBAL _player_hit_platform_clear
221   0000              	GLOBAL _player_score_add
222   0000              	GLOBAL _player_check_floor
223   0000              	GLOBAL _player_gasta_brick
224   0000              	GLOBAL _player_move_jump
225   0000              	GLOBAL _player_open_door
226   0000              	GLOBAL _player_lost_life
227   0000              	GLOBAL _player_damage
228   0000              ;--------------------------------------------------------
229   0000              ; Externals used
230   0000              ;--------------------------------------------------------
231   0000              	GLOBAL _ulltoa_callee
232   0000              	GLOBAL _ulltoa
233   0000              	GLOBAL _strtoull_callee
234   0000              	GLOBAL _strtoull
235   0000              	GLOBAL _strtoll_callee
236   0000              	GLOBAL _strtoll
237   0000              	GLOBAL _lltoa_callee
238   0000              	GLOBAL _lltoa
239   0000              	GLOBAL _llabs_callee
240   0000              	GLOBAL _llabs
241   0000              	GLOBAL __lldivu__callee
242   0000              	GLOBAL __lldivu_
243   0000              	GLOBAL __lldiv__callee
244   0000              	GLOBAL __lldiv_
245   0000              	GLOBAL _atoll_callee
246   0000              	GLOBAL _atoll
247   0000              	GLOBAL _realloc_unlocked_callee
248   0000              	GLOBAL _realloc_unlocked
249   0000              	GLOBAL _malloc_unlocked_fastcall
250   0000              	GLOBAL _malloc_unlocked
251   0000              	GLOBAL _free_unlocked_fastcall
252   0000              	GLOBAL _free_unlocked
253   0000              	GLOBAL _calloc_unlocked_callee
254   0000              	GLOBAL _calloc_unlocked
255   0000              	GLOBAL _aligned_alloc_unlocked_callee
256   0000              	GLOBAL _aligned_alloc_unlocked
257   0000              	GLOBAL _realloc_callee
258   0000              	GLOBAL _realloc
259   0000              	GLOBAL _malloc_fastcall
260   0000              	GLOBAL _malloc
261   0000              	GLOBAL _free_fastcall
262   0000              	GLOBAL _free
263   0000              	GLOBAL _calloc_callee
264   0000              	GLOBAL _calloc
265   0000              	GLOBAL _aligned_alloc_callee
266   0000              	GLOBAL _aligned_alloc
267   0000              	GLOBAL _utoa_callee
268   0000              	GLOBAL _utoa
269   0000              	GLOBAL _ultoa_callee
270   0000              	GLOBAL _ultoa
271   0000              	GLOBAL _system_fastcall
272   0000              	GLOBAL _system
273   0000              	GLOBAL _strtoul_callee
274   0000              	GLOBAL _strtoul
275   0000              	GLOBAL _strtol_callee
276   0000              	GLOBAL _strtol
277   0000              	GLOBAL _strtof_callee
278   0000              	GLOBAL _strtof
279   0000              	GLOBAL _strtod_callee
280   0000              	GLOBAL _strtod
281   0000              	GLOBAL _srand_fastcall
282   0000              	GLOBAL _srand
283   0000              	GLOBAL _rand
284   0000              	GLOBAL _quick_exit_fastcall
285   0000              	GLOBAL _quick_exit
286   0000              	GLOBAL _qsort_callee
287   0000              	GLOBAL _qsort
288   0000              	GLOBAL _ltoa_callee
289   0000              	GLOBAL _ltoa
290   0000              	GLOBAL _labs_fastcall
291   0000              	GLOBAL _labs
292   0000              	GLOBAL _itoa_callee
293   0000              	GLOBAL _itoa
294   0000              	GLOBAL _ftoh_callee
295   0000              	GLOBAL _ftoh
296   0000              	GLOBAL _ftog_callee
297   0000              	GLOBAL _ftog
298   0000              	GLOBAL _ftoe_callee
299   0000              	GLOBAL _ftoe
300   0000              	GLOBAL _ftoa_callee
301   0000              	GLOBAL _ftoa
302   0000              	GLOBAL _exit_fastcall
303   0000              	GLOBAL _exit
304   0000              	GLOBAL _dtoh_callee
305   0000              	GLOBAL _dtoh
306   0000              	GLOBAL _dtog_callee
307   0000              	GLOBAL _dtog
308   0000              	GLOBAL _dtoe_callee
309   0000              	GLOBAL _dtoe
310   0000              	GLOBAL _dtoa_callee
311   0000              	GLOBAL _dtoa
312   0000              	GLOBAL _bsearch_callee
313   0000              	GLOBAL _bsearch
314   0000              	GLOBAL _atol_fastcall
315   0000              	GLOBAL _atol
316   0000              	GLOBAL _atoi_fastcall
317   0000              	GLOBAL _atoi
318   0000              	GLOBAL _atof_fastcall
319   0000              	GLOBAL _atof
320   0000              	GLOBAL _atexit_fastcall
321   0000              	GLOBAL _atexit
322   0000              	GLOBAL _at_quick_exit_fastcall
323   0000              	GLOBAL _at_quick_exit
324   0000              	GLOBAL _abs_fastcall
325   0000              	GLOBAL _abs
326   0000              	GLOBAL _abort
327   0000              	GLOBAL __strtou__callee
328   0000              	GLOBAL __strtou_
329   0000              	GLOBAL __strtoi__callee
330   0000              	GLOBAL __strtoi_
331   0000              	GLOBAL __random_uniform_xor_8__fastcall
332   0000              	GLOBAL __random_uniform_xor_8_
333   0000              	GLOBAL __random_uniform_xor_32__fastcall
334   0000              	GLOBAL __random_uniform_xor_32_
335   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
336   0000              	GLOBAL __random_uniform_cmwc_8_
337   0000              	GLOBAL __shellsort__callee
338   0000              	GLOBAL __shellsort_
339   0000              	GLOBAL __quicksort__callee
340   0000              	GLOBAL __quicksort_
341   0000              	GLOBAL __insertion_sort__callee
342   0000              	GLOBAL __insertion_sort_
343   0000              	GLOBAL __ldivu__callee
344   0000              	GLOBAL __ldivu_
345   0000              	GLOBAL __ldiv__callee
346   0000              	GLOBAL __ldiv_
347   0000              	GLOBAL __divu__callee
348   0000              	GLOBAL __divu_
349   0000              	GLOBAL __div__callee
350   0000              	GLOBAL __div_
351   0000              	GLOBAL _NIRVANAP_drawTW_raw_callee
352   0000              	GLOBAL _NIRVANAP_drawTW_raw
353   0000              	GLOBAL _NIRVANAP_drawTW_callee
354   0000              	GLOBAL _NIRVANAP_drawTW
355   0000              	GLOBAL _NIRVANAP_drawW_raw_callee
356   0000              	GLOBAL _NIRVANAP_drawW_raw
357   0000              	GLOBAL _NIRVANAP_drawW_callee
358   0000              	GLOBAL _NIRVANAP_drawW
359   0000              	GLOBAL _NIRVANAP_spriteT_callee
360   0000              	GLOBAL _NIRVANAP_spriteT
361   0000              	GLOBAL _NIRVANAP_fillC_callee
362   0000              	GLOBAL _NIRVANAP_fillC
363   0000              	GLOBAL _NIRVANAP_readC_callee
364   0000              	GLOBAL _NIRVANAP_readC
365   0000              	GLOBAL _NIRVANAP_paintC_callee
366   0000              	GLOBAL _NIRVANAP_paintC
367   0000              	GLOBAL _NIRVANAP_printC_callee
368   0000              	GLOBAL _NIRVANAP_printC
369   0000              	GLOBAL _NIRVANAP_fillT_raw_callee
370   0000              	GLOBAL _NIRVANAP_fillT_raw
371   0000              	GLOBAL _NIRVANAP_fillT_callee
372   0000              	GLOBAL _NIRVANAP_fillT
373   0000              	GLOBAL _NIRVANAP_drawT_raw_callee
374   0000              	GLOBAL _NIRVANAP_drawT_raw
375   0000              	GLOBAL _NIRVANAP_drawT_callee
376   0000              	GLOBAL _NIRVANAP_drawT
377   0000              	GLOBAL _NIRVANAP_stop
378   0000              	GLOBAL _NIRVANAP_start
379   0000              	GLOBAL _debug3
380   0000              	GLOBAL _debug2
381   0000              	GLOBAL _debug
382   0000              	GLOBAL _zx_print_str
383   0000              	GLOBAL _zx_print_int
384   0000              	GLOBAL _zx_print_chr
385   0000              	GLOBAL _zx_print_bonus_time
386   0000              	GLOBAL _zx_isr
387   0000              	GLOBAL _z80_otdr_callee
388   0000              	GLOBAL _z80_otdr
389   0000              	GLOBAL _z80_otir_callee
390   0000              	GLOBAL _z80_otir
391   0000              	GLOBAL _z80_outp_callee
392   0000              	GLOBAL _z80_outp
393   0000              	GLOBAL _z80_indr_callee
394   0000              	GLOBAL _z80_indr
395   0000              	GLOBAL _z80_inir_callee
396   0000              	GLOBAL _z80_inir
397   0000              	GLOBAL _z80_inp_fastcall
398   0000              	GLOBAL _z80_inp
399   0000              	GLOBAL _z80_set_int_state_fastcall
400   0000              	GLOBAL _z80_set_int_state
401   0000              	GLOBAL _z80_get_int_state
402   0000              	GLOBAL _z80_delay_tstate_fastcall
403   0000              	GLOBAL _z80_delay_tstate
404   0000              	GLOBAL _z80_delay_ms_fastcall
405   0000              	GLOBAL _z80_delay_ms
406   0000              	GLOBAL _im2_remove_generic_callback_callee
407   0000              	GLOBAL _im2_remove_generic_callback
408   0000              	GLOBAL _im2_prepend_generic_callback_callee
409   0000              	GLOBAL _im2_prepend_generic_callback
410   0000              	GLOBAL _im2_append_generic_callback_callee
411   0000              	GLOBAL _im2_append_generic_callback
412   0000              	GLOBAL _im2_create_generic_isr_8080_callee
413   0000              	GLOBAL _im2_create_generic_isr_8080
414   0000              	GLOBAL _im2_create_generic_isr_callee
415   0000              	GLOBAL _im2_create_generic_isr
416   0000              	GLOBAL _im2_install_isr_callee
417   0000              	GLOBAL _im2_install_isr
418   0000              	GLOBAL _im2_init_fastcall
419   0000              	GLOBAL _im2_init
420   0000              	GLOBAL _intrinsic_swap_word_32_fastcall
421   0000              	GLOBAL _intrinsic_swap_word_32
422   0000              	GLOBAL _intrinsic_swap_endian_32_fastcall
423   0000              	GLOBAL _intrinsic_swap_endian_32
424   0000              	GLOBAL _intrinsic_swap_endian_16_fastcall
425   0000              	GLOBAL _intrinsic_swap_endian_16
426   0000              	GLOBAL _intrinsic_return_de
427   0000              	GLOBAL _intrinsic_return_bc
428   0000              	GLOBAL _intrinsic_exx
429   0000              	GLOBAL _intrinsic_ex_de_hl
430   0000              	GLOBAL _intrinsic_nop
431   0000              	GLOBAL _intrinsic_im_2
432   0000              	GLOBAL _intrinsic_im_1
433   0000              	GLOBAL _intrinsic_im_0
434   0000              	GLOBAL _intrinsic_retn
435   0000              	GLOBAL _intrinsic_reti
436   0000              	GLOBAL _intrinsic_halt
437   0000              	GLOBAL _intrinsic_ei
438   0000              	GLOBAL _intrinsic_di
439   0000              	GLOBAL _intrinsic_stub
440   0000              	GLOBAL _intrinsic_outi
441   0000              	GLOBAL _intrinsic_ldi
442   0000              	GLOBAL _zx_pattern_fill_callee
443   0000              	GLOBAL _zx_pattern_fill
444   0000              	GLOBAL _zx_saddrpup_fastcall
445   0000              	GLOBAL _zx_saddrpup
446   0000              	GLOBAL _zx_saddrpright_callee
447   0000              	GLOBAL _zx_saddrpright
448   0000              	GLOBAL _zx_saddrpleft_callee
449   0000              	GLOBAL _zx_saddrpleft
450   0000              	GLOBAL _zx_saddrpdown_fastcall
451   0000              	GLOBAL _zx_saddrpdown
452   0000              	GLOBAL _zx_saddrcup_fastcall
453   0000              	GLOBAL _zx_saddrcup
454   0000              	GLOBAL _zx_saddrcright_fastcall
455   0000              	GLOBAL _zx_saddrcright
456   0000              	GLOBAL _zx_saddrcleft_fastcall
457   0000              	GLOBAL _zx_saddrcleft
458   0000              	GLOBAL _zx_saddrcdown_fastcall
459   0000              	GLOBAL _zx_saddrcdown
460   0000              	GLOBAL _zx_saddr2py_fastcall
461   0000              	GLOBAL _zx_saddr2py
462   0000              	GLOBAL _zx_saddr2px_fastcall
463   0000              	GLOBAL _zx_saddr2px
464   0000              	GLOBAL _zx_saddr2cy_fastcall
465   0000              	GLOBAL _zx_saddr2cy
466   0000              	GLOBAL _zx_saddr2cx_fastcall
467   0000              	GLOBAL _zx_saddr2cx
468   0000              	GLOBAL _zx_saddr2aaddr_fastcall
469   0000              	GLOBAL _zx_saddr2aaddr
470   0000              	GLOBAL _zx_py2saddr_fastcall
471   0000              	GLOBAL _zx_py2saddr
472   0000              	GLOBAL _zx_py2aaddr_fastcall
473   0000              	GLOBAL _zx_py2aaddr
474   0000              	GLOBAL _zx_pxy2saddr_callee
475   0000              	GLOBAL _zx_pxy2saddr
476   0000              	GLOBAL _zx_pxy2aaddr_callee
477   0000              	GLOBAL _zx_pxy2aaddr
478   0000              	GLOBAL _zx_px2bitmask_fastcall
479   0000              	GLOBAL _zx_px2bitmask
480   0000              	GLOBAL _zx_cy2saddr_fastcall
481   0000              	GLOBAL _zx_cy2saddr
482   0000              	GLOBAL _zx_cy2aaddr_fastcall
483   0000              	GLOBAL _zx_cy2aaddr
484   0000              	GLOBAL _zx_cxy2saddr_callee
485   0000              	GLOBAL _zx_cxy2saddr
486   0000              	GLOBAL _zx_cxy2aaddr_callee
487   0000              	GLOBAL _zx_cxy2aaddr
488   0000              	GLOBAL _zx_bitmask2px_fastcall
489   0000              	GLOBAL _zx_bitmask2px
490   0000              	GLOBAL _zx_aaddrcup_fastcall
491   0000              	GLOBAL _zx_aaddrcup
492   0000              	GLOBAL _zx_aaddrcright_fastcall
493   0000              	GLOBAL _zx_aaddrcright
494   0000              	GLOBAL _zx_aaddrcleft_fastcall
495   0000              	GLOBAL _zx_aaddrcleft
496   0000              	GLOBAL _zx_aaddrcdown_fastcall
497   0000              	GLOBAL _zx_aaddrcdown
498   0000              	GLOBAL _zx_aaddr2saddr_fastcall
499   0000              	GLOBAL _zx_aaddr2saddr
500   0000              	GLOBAL _zx_aaddr2py_fastcall
501   0000              	GLOBAL _zx_aaddr2py
502   0000              	GLOBAL _zx_aaddr2px_fastcall
503   0000              	GLOBAL _zx_aaddr2px
504   0000              	GLOBAL _zx_aaddr2cy_fastcall
505   0000              	GLOBAL _zx_aaddr2cy
506   0000              	GLOBAL _zx_aaddr2cx_fastcall
507   0000              	GLOBAL _zx_aaddr2cx
508   0000              	GLOBAL _zx_visit_wc_pix_callee
509   0000              	GLOBAL _zx_visit_wc_pix
510   0000              	GLOBAL _zx_visit_wc_attr_callee
511   0000              	GLOBAL _zx_visit_wc_attr
512   0000              	GLOBAL _zx_scroll_wc_up_pix_callee
513   0000              	GLOBAL _zx_scroll_wc_up_pix
514   0000              	GLOBAL _zx_scroll_wc_up_attr_callee
515   0000              	GLOBAL _zx_scroll_wc_up_attr
516   0000              	GLOBAL _zx_scroll_wc_up_callee
517   0000              	GLOBAL _zx_scroll_wc_up
518   0000              	GLOBAL _zx_scroll_up_pix_callee
519   0000              	GLOBAL _zx_scroll_up_pix
520   0000              	GLOBAL _zx_scroll_up_attr_callee
521   0000              	GLOBAL _zx_scroll_up_attr
522   0000              	GLOBAL _zx_scroll_up_callee
523   0000              	GLOBAL _zx_scroll_up
524   0000              	GLOBAL _zx_cls_wc_pix_callee
525   0000              	GLOBAL _zx_cls_wc_pix
526   0000              	GLOBAL _zx_cls_wc_attr_callee
527   0000              	GLOBAL _zx_cls_wc_attr
528   0000              	GLOBAL _zx_cls_wc_callee
529   0000              	GLOBAL _zx_cls_wc
530   0000              	GLOBAL _zx_cls_pix_fastcall
531   0000              	GLOBAL _zx_cls_pix
532   0000              	GLOBAL _zx_cls_attr_fastcall
533   0000              	GLOBAL _zx_cls_attr
534   0000              	GLOBAL _zx_cls_fastcall
535   0000              	GLOBAL _zx_cls
536   0000              	GLOBAL _zx_border_fastcall
537   0000              	GLOBAL _zx_border
538   0000              	GLOBAL _zx_tape_verify_block_callee
539   0000              	GLOBAL _zx_tape_verify_block
540   0000              	GLOBAL _zx_tape_save_block_callee
541   0000              	GLOBAL _zx_tape_save_block
542   0000              	GLOBAL _zx_tape_load_block_callee
543   0000              	GLOBAL _zx_tape_load_block
544   0000              	GLOBAL _spr_destroy
545   0000              	GLOBAL _spr_colision_boss
546   0000              	GLOBAL _spr_colision_b
547   0000              	GLOBAL _spr_unflatten
548   0000              	GLOBAL _spr_flatten
549   0000              	GLOBAL _spr_btile_paint_back
550   0000              	GLOBAL _spr_bullet_explode
551   0000              	GLOBAL _spr_init_effects
552   0000              	GLOBAL _spr_turn_horizontal
553   0000              	GLOBAL _spr_bullets_play
554   0000              	GLOBAL _spr_play_anim
555   0000              	GLOBAL _spr_add_anim
556   0000              	GLOBAL _spr_clear_scr
557   0000              	GLOBAL _spr_page_map
558   0000              	GLOBAL _spr_page_down
559   0000              	GLOBAL _spr_page_up
560   0000              	GLOBAL _spr_page_right
561   0000              	GLOBAL _spr_page_left
562   0000              	GLOBAL _spr_tile_paint
563   0000              	GLOBAL _spr_draw_index
564   0000              	GLOBAL _spr_brick_anim
565   0000              	GLOBAL _spr_back_repaint
566   0000              	GLOBAL _spr_tile_dir
567   0000              	GLOBAL _spr_tile
568   0000              	GLOBAL _spr_redraw_player
569   0000              	GLOBAL _spr_redraw
570   0000              	GLOBAL _spr_move_left
571   0000              	GLOBAL _spr_move_right
572   0000              	GLOBAL _spr_move_horizontal
573   0000              	GLOBAL _spr_move_down
574   0000              	GLOBAL _spr_move_up
575   0000              	GLOBAL _spr_set_right
576   0000              	GLOBAL _spr_set_left
577   0000              	GLOBAL _spr_set_down
578   0000              	GLOBAL _spr_set_up
579   0000              	GLOBAL _spr_calc_index
580   0000              	GLOBAL _spr_chktime
581   0000              	GLOBAL _audio_menu
582   0000              	GLOBAL _audio_game_end
583   0000              	GLOBAL _audio_level_complete
584   0000              	GLOBAL _audio_level_start
585   0000              	GLOBAL _audio_lotr_lose_a_life
586   0000              	GLOBAL _audio_pierto_abierta
587   0000              	GLOBAL _audio_sin_mana
588   0000              	GLOBAL _audio_magia1
589   0000              	GLOBAL _audio_coin
590   0000              	GLOBAL _audio_golpe
591   0000              	GLOBAL _audio_salto
592   0000              	GLOBAL _audio_efecto
593   0000              	GLOBAL _audio_disparo2
594   0000              	GLOBAL _audio_disparo1
595   0000              	GLOBAL _audio_explosion1
596   0000              	GLOBAL _audio_explosion
597   0000              	GLOBAL _game_match_back
598   0000              	GLOBAL _game_attribs
599   0000              	GLOBAL _game_boss_clear
600   0000              	GLOBAL _game_boss_kill
601   0000              	GLOBAL _game_obj_clear
602   0000              	GLOBAL _game_obj_chk
603   0000              	GLOBAL _game_obj_set
604   0000              	GLOBAL _game_shoot_fire_boss
605   0000              	GLOBAL _game_shoot_fire
606   0000              	GLOBAL _game_add_enemy
607   0000              	GLOBAL _game_print_header
608   0000              	GLOBAL _game_check_time
609   0000              	GLOBAL _game_rotate_attrib_osd
610   0000              	GLOBAL _game_rotate_attrib
611   0000              	GLOBAL _game_colour_message
612   0000              	GLOBAL _game_paint_attrib
613   0000              	GLOBAL _game_print_score
614   0000              	GLOBAL _game_check_cell
615   0000              	GLOBAL _game_check_map
616   0000              	GLOBAL _game_loop
617   0000              	GLOBAL _game_round_init
618   0000              	GLOBAL _game_set_checkpoint
619   0000              	GLOBAL _game_start_timer
620   0000              	GLOBAL _game_update_stats
621   0000              	GLOBAL _game_print_footer
622   0000              	GLOBAL _game_fill_row
623   0000              	GLOBAL _game_fps
624   0000              	GLOBAL _game_respawn
625   0000              	GLOBAL _game_draw_screen
626   0000              	GLOBAL _boss_draw_frame
627   0000              	GLOBAL _boss_draw
628   0000              	GLOBAL _boss_turn
629   0000              	GLOBAL _enemy_avoid_dead
630   0000              	GLOBAL _enemy_avoid_fall
631   0000              	GLOBAL _enemy_kill
632   0000              	GLOBAL _enemy_respawn
633   0000              	GLOBAL _enemy_init
634   0000              	GLOBAL _enemy_move
635   0000              	GLOBAL _enemy_turn
636   0000              	GLOBAL _enemy_static
637   0000              	GLOBAL _enemy_walk
638   0000              	GLOBAL _enemy_horizontal
639   0000              	GLOBAL _enemy_vertical
640   0000              	GLOBAL _ay_reset
641   0000              	GLOBAL _ay_song_stop
642   0000              	GLOBAL _ay_song_play
643   0000              	GLOBAL _ay_fx_stop
644   0000              	GLOBAL _ay_fx_play
645   0000              	GLOBAL _ay_is_playing
646   0000              	GLOBAL _test_func
647   0000              	GLOBAL _test_proc
648   0000              	GLOBAL _in_mouse_kempston_wheel_delta
649   0000              	GLOBAL _in_mouse_kempston_wheel
650   0000              	GLOBAL _in_mouse_kempston_callee
651   0000              	GLOBAL _in_mouse_kempston
652   0000              	GLOBAL _in_mouse_kempston_setpos_callee
653   0000              	GLOBAL _in_mouse_kempston_setpos
654   0000              	GLOBAL _in_mouse_kempston_reset
655   0000              	GLOBAL _in_mouse_kempston_init
656   0000              	GLOBAL _in_mouse_amx_wheel_delta
657   0000              	GLOBAL _in_mouse_amx_wheel
658   0000              	GLOBAL _in_mouse_amx_callee
659   0000              	GLOBAL _in_mouse_amx
660   0000              	GLOBAL _in_mouse_amx_setpos_callee
661   0000              	GLOBAL _in_mouse_amx_setpos
662   0000              	GLOBAL _in_mouse_amx_reset
663   0000              	GLOBAL _in_mouse_amx_init_callee
664   0000              	GLOBAL _in_mouse_amx_init
665   0000              	GLOBAL _in_stick_sinclair2
666   0000              	GLOBAL _in_stick_sinclair1
667   0000              	GLOBAL _in_stick_kempston
668   0000              	GLOBAL _in_stick_fuller
669   0000              	GLOBAL _in_stick_cursor
670   0000              	GLOBAL _in_stick_keyboard_fastcall
671   0000              	GLOBAL _in_stick_keyboard
672   0000              	GLOBAL _in_wait_nokey
673   0000              	GLOBAL _in_wait_key
674   0000              	GLOBAL _in_test_key
675   0000              	GLOBAL _in_pause_fastcall
676   0000              	GLOBAL _in_pause
677   0000              	GLOBAL _in_key_scancode_fastcall
678   0000              	GLOBAL _in_key_scancode
679   0000              	GLOBAL _in_key_pressed_fastcall
680   0000              	GLOBAL _in_key_pressed
681   0000              	GLOBAL _in_inkey
682   0000              	GLOBAL _NIRVANAP_CHAR_TABLE
683   0000              	GLOBAL _NIRVANAP_WIDE_IMAGES
684   0000              	GLOBAL _NIRVANAP_TILE_IMAGES
685   0000              	GLOBAL _NIRVANAP_HOLE
686   0000              	GLOBAL _NIRVANAP_ISR_HOOK
687   0000              	GLOBAL _scan_map
688   0000              	GLOBAL _key_map
689   0000              	GLOBAL _player_lvl_table
690   0000              	GLOBAL _stp_row
691   0000              	GLOBAL _stp_col
692   0000              	GLOBAL _stp_tile
693   0000              	GLOBAL _map_paper_last_a
694   0000              	GLOBAL _map_paper_last
695   0000              	GLOBAL _map_paper_clr
696   0000              	GLOBAL _map_paper
697   0000              	GLOBAL _draw_count
698   0000              	GLOBAL _g_player_hit_right
699   0000              	GLOBAL _g_player_hit_left
700   0000              	GLOBAL _bullet_count
701   0000              	GLOBAL _spr_hack
702   0000              	GLOBAL _boss_stat
703   0000              	GLOBAL _boss_time_fire
704   0000              	GLOBAL _boss_time
705   0000              	GLOBAL _boss_tile
706   0000              	GLOBAL _boss_inc
707   0000              	GLOBAL _boss_col
708   0000              	GLOBAL _boss_lin
709   0000              	GLOBAL _bullet
710   0000              	GLOBAL _bullet_vel
711   0000              	GLOBAL _bullet_frames
712   0000              	GLOBAL _bullet_colint
713   0000              	GLOBAL _bullet_dir
714   0000              	GLOBAL _bullet_tile
715   0000              	GLOBAL _bullet_col
716   0000              	GLOBAL _bullet_lin
717   0000              	GLOBAL _bullet_col0
718   0000              	GLOBAL _bullet_lin0
719   0000              	GLOBAL _bullet_max
720   0000              	GLOBAL _bullet_class
721   0000              	GLOBAL _mush_class
722   0000              	GLOBAL _mush_index
723   0000              	GLOBAL _anim_count
724   0000              	GLOBAL _anim_respanwn
725   0000              	GLOBAL _anim_loop
726   0000              	GLOBAL _anim_end
727   0000              	GLOBAL _anim_int
728   0000              	GLOBAL _anim_tile
729   0000              	GLOBAL _anim_col
730   0000              	GLOBAL _anim_lin
731   0000              	GLOBAL _map_heigth
732   0000              	GLOBAL _map_width
733   0000              	GLOBAL _scr_curr
734   0000              	GLOBAL _sprite_kind
735   0000              	GLOBAL _scr_obj1
736   0000              	GLOBAL _scr_obj0
737   0000              	GLOBAL _scr_map
738   0000              	GLOBAL _sprite_speed_alt
739   0000              	GLOBAL _spr_init
740   0000              	GLOBAL _spr_map_tile
741   0000              	GLOBAL _sprite_frames
742   0000              	GLOBAL _sprite_speed
743   0000              	GLOBAL _screen_ink
744   0000              	GLOBAL _screen_paper
745   0000              	GLOBAL _player_onstair
746   0000              	GLOBAL _game_start_scr
747   0000              	GLOBAL _game_respawn_tile
748   0000              	GLOBAL _game_respawn_index
749   0000              	GLOBAL _game_respawn_time
750   0000              	GLOBAL _game_score_top
751   0000              	GLOBAL _player_coins
752   0000              	GLOBAL _player_lives
753   0000              	GLOBAL _game_over
754   0000              	GLOBAL _game_sound
755   0000              	GLOBAL _game_inf_lives
756   0000              	GLOBAL _game_inmune
757   0000              	GLOBAL _sprite_curr_index
758   0000              	GLOBAL _spr_count
759   0000              	GLOBAL _bullet_time
760   0000              	GLOBAL _anim_time
761   0000              	GLOBAL _frame_time
762   0000              	GLOBAL _curr_time
763   0000              	GLOBAL _s_state
764   0000              	GLOBAL _attrib_osd
765   0000              	GLOBAL _attrib_hl
766   0000              	GLOBAL _attrib
767   0000              	GLOBAL _zx_val_asm
768   0000              	GLOBAL _enemies
769   0000              	GLOBAL _tmp_ui
770   0000              	GLOBAL _tmp_sc
771   0000              	GLOBAL _tmp_uc
772   0000              	GLOBAL _tmp1
773   0000              	GLOBAL _tmp0
774   0000              	GLOBAL _tmp
775   0000              	GLOBAL _index1
776   0000              	GLOBAL _index0
777   0000              	GLOBAL _loop_count
778   0000              	GLOBAL _s_class
779   0000              	GLOBAL _s_col1
780   0000              	GLOBAL _s_col0
781   0000              	GLOBAL _s_lin1
782   0000              	GLOBAL _s_lin0
783   0000              	GLOBAL _s_tile1
784   0000              	GLOBAL _s_tile0
785   0000              	GLOBAL _player_brick_time
786   0000              	GLOBAL _player_hit_count
787   0000              	GLOBAL _game_debug
788   0000              	GLOBAL _sprite_horizontal_check
789   0000              	GLOBAL _sprite_on_air
790   0000              	GLOBAL _sprite
791   0000              	GLOBAL _fps
792   0000              	GLOBAL _menu_curr_sel
793   0000              	GLOBAL _game_2buttons
794   0000              	GLOBAL _game_respawn_curr_time
795   0000              	GLOBAL _game_round_up
796   0000              	GLOBAL _game_mush_count
797   0000              	GLOBAL _game_boss_fix
798   0000              	GLOBAL _game_boss_hit
799   0000              	GLOBAL _game_boss_alive
800   0000              	GLOBAL _game_boss
801   0000              	GLOBAL _game_world
802   0000              	GLOBAL _game_gravity
803   0000              	GLOBAL _player_onfire
804   0000              	GLOBAL _player_anim_stair
805   0000              	GLOBAL _player_hit_time
806   0000              	GLOBAL _game_checkpoint_scr
807   0000              	GLOBAL _game_checkpoint_lin
808   0000              	GLOBAL _game_checkpoint_col
809   0000              	GLOBAL _player_lin_scr
810   0000              	GLOBAL _player_col_scr
811   0000              	GLOBAL _player_lvl
812   0000              	GLOBAL _player_int
813   0000              	GLOBAL _player_str
814   0000              	GLOBAL _player_max_vita
815   0000              	GLOBAL _player_max_mana
816   0000              	GLOBAL _player_vita
817   0000              	GLOBAL _player_mana
818   0000              	GLOBAL _player_keys
819   0000              	GLOBAL _player_vel_inc
820   0000              	GLOBAL _player_vel_y1
821   0000              	GLOBAL _player_vel_y0
822   0000              	GLOBAL _player_vel_y
823   0000              	GLOBAL _player_vel_x
824   0000              	GLOBAL _player_score
825   0000              	GLOBAL _last_time
826   0000              	GLOBAL _spr_timer
827   0000              	GLOBAL _jump_lin
828   0000              	GLOBAL _player_hit_col
829   0000              	GLOBAL _player_hit_lin
830   0000              	GLOBAL _colint
831   0000              	GLOBAL _col
832   0000              	GLOBAL _tbuffer
833   0000              	GLOBAL _lin
834   0000              	GLOBAL _tile
835   0000              	GLOBAL _state_a
836   0000              	GLOBAL _state
837   0000              	GLOBAL _class
838   0000              	GLOBAL _dirs_alt
839   0000              	GLOBAL _dirs
840   0000              	GLOBAL _k2
841   0000              	GLOBAL _k1
842   0000              	GLOBAL _joyfunc2
843   0000              	GLOBAL _joyfunc1
844   0000              	GLOBAL _btiles
845   0000              	GLOBAL _spec128
846   0000              	GLOBAL _GLOBAL_ZX_PORT_7FFD
847   0000              	GLOBAL _GLOBAL_ZX_PORT_1FFD
848   0000              	GLOBAL _GLOBAL_ZX_PORT_FE
849   0000              	GLOBAL _ay_song_06_ciel
850   0000              	GLOBAL _ay_song_04_sunflower
851   0000              	GLOBAL _ay_song_04_lotr_level_start
852   0000              	GLOBAL _ay_song_04_lotr_level_complete
853   0000              	GLOBAL _ay_song_04_lotr_lose_a_life
854   0000              	GLOBAL _ay_song_04_lotr
855   0000              	GLOBAL _ay_fx_06_explosion1
856   0000              	GLOBAL _ay_fx_06_efecto
857   0000              	GLOBAL _ay_fx_06_disparo2
858   0000              	GLOBAL _ay_fx_06_disparo1
859   0000              	GLOBAL _ay_fx_04_sin_mana
860   0000              	GLOBAL _ay_fx_04_salto
861   0000              	GLOBAL _ay_fx_04_pierto_abierta
862   0000              	GLOBAL _ay_fx_04_magia1
863   0000              	GLOBAL _ay_fx_04_golpe
864   0000              	GLOBAL _ay_fx_04_explosion
865   0000              	GLOBAL _ay_fx_04_dano_por_toque
866   0000              	GLOBAL _ay_fx_04_coin
867   0000              	GLOBAL _world0_h
868   0000              	GLOBAL _world0_w
869   0000              	GLOBAL _world0
870   0000              	GLOBAL _paper0
871   0000              	GLOBAL _lenght0
872   0000              	GLOBAL _start_scr0
873   0000              ;--------------------------------------------------------
874   0000              ; special function registers
875   0000              ;--------------------------------------------------------
876   0000              defc _IO_FE	=	0x00fe
877   0000              defc _IO_1FFD	=	0x1ffd
878   0000              defc _IO_7FFD	=	0x7ffd
879   0000              ;--------------------------------------------------------
880   0000              ; ram data
881   0000              ;--------------------------------------------------------
882   0000              	SECTION bss_compiler
883   0000              ;--------------------------------------------------------
884   0000              ; ram data
885   0000              ;--------------------------------------------------------
886   0000              
887   0000              IF 0
888   0000              
889   0000              ; .area _INITIALIZED removed by z88dk
890   0000              
891   0000              
892   0000              ENDIF
893   0000              
894   0000              ;--------------------------------------------------------
895   0000              ; absolute external ram data
896   0000              ;--------------------------------------------------------
897   0000              	SECTION IGNORE
898   0000              ;--------------------------------------------------------
899   0000              ; global & static initialisations
900   0000              ;--------------------------------------------------------
901   0000              	SECTION code_crt_init
902   0000              ;--------------------------------------------------------
903   0000              ; Home
904   0000              ;--------------------------------------------------------
905   0000              	SECTION IGNORE
906   0000              ;--------------------------------------------------------
907   0000              ; code
908   0000              ;--------------------------------------------------------
909   0000              	SECTION code_compiler
910   0000              ;	---------------------------------
911   0000              ; Function player_init
912   0000              ; ---------------------------------
913   0000              _player_init:
914   0000  CD 00 00    	call	___sdcc_enter_ix
915   0003  21 07 00    	ld	hl, +(_class + 0x0007)
916   0006  36 00       	ld	(hl),0x00
917   0008  21 07 00    	ld	hl, +(_tile + 0x0007)
918   000B  DD 7E 06    	ld	a,(ix+6)
919   000E  77          	ld	(hl), a
920   000F  21 07 00    	ld	hl, +(_lin + 0x0007)
921   0012  DD 7E 04    	ld	a,(ix+4)
922   0015  77          	ld	(hl), a
923   0016  21 07 00    	ld	hl, +(_col + 0x0007)
924   0019  DD 7E 05    	ld	a,(ix+5)
925   001C  77          	ld	(hl), a
926   001D  21 07 00    	ld	hl, +(_colint + 0x0007)
927   0020  36 00       	ld	(hl),0x00
928   0022  21 07 00    	ld	hl, +(_state + 0x0007)
929   0025  36 00       	ld	(hl),0x00
930   0027  01 07 00    	ld	bc,_state_a+7
931   002A  AF          	xor	a, a
932   002B  02          	ld	(bc), a
933   002C  21 07 00    	ld	hl, +(_jump_lin + 0x0007)
934   002F  DD 7E 04    	ld	a,(ix+4)
935   0032  77          	ld	(hl), a
936   0033  ED 5B 00 00 	ld	de,(_curr_time)
937   0037  ED 53 0E 00 	ld	(_last_time + 0x000e),de
938   003B  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
939   003E  36 00       	ld	(hl),0x00
940   0040  0A          	ld	a, (bc)
941   0041  F6 11       	or	a,+(0x01|0x10)
942   0043  02          	ld	(bc),a
943   0044  21 00 00    	ld	hl,_player_hit_col
944   0047  36 00       	ld	(hl),0x00
945   0049  21 00 00    	ld	hl,_player_hit_lin
946   004C  36 00       	ld	(hl),0x00
947   004E  21 00 00    	ld	hl,_player_onstair
948   0051  36 00       	ld	(hl),0x00
949   0053  21 00 00    	ld	hl,_player_onfire
950   0056  36 00       	ld	(hl),0x00
951   0058  DD 66 05    	ld	h,(ix+5)
952   005B  DD 6E 04    	ld	l,(ix+4)
953   005E  E5          	push	hl
954   005F  DD 56 06    	ld	d,(ix+6)
955   0062  1E 07       	ld	e,0x07
956   0064  D5          	push	de
957   0065  CD 00 00    	call	_NIRVANAP_spriteT_callee
958   0068  DD E1       	pop	ix
959   006A  C9          	ret
960   006B              	SECTION code_compiler
961   006B              ;	---------------------------------
962   006B              ; Function player_turn
963   006B              ; ---------------------------------
964   006B              _player_turn:
965   006B  21 00 00    	ld	hl,_sprite
966   006E  CD 00 00    	call	_spr_chktime
967   0071  7D          	ld	a, l
968   0072  B7          	or	a, a
969   0073  C8          	ret	Z
970   0074  21 00 00    	ld	hl,_k1
971   0077  E5          	push	hl
972   0078  2A 00 00    	ld	hl,(_joyfunc1)
973   007B  CD 00 00    	call	___sdcc_call_hl
974   007E  F1          	pop	af
975   007F  7D          	ld	a,l
976   0080  32 00 00    	ld	(_dirs),a
977   0083  21 00 00    	ld	hl,_k2
978   0086  E5          	push	hl
979   0087  2A 00 00    	ld	hl,(_joyfunc2)
980   008A  CD 00 00    	call	___sdcc_call_hl
981   008D  F1          	pop	af
982   008E  7D          	ld	a,l
983   008F  32 00 00    	ld	(_dirs_alt),a
984   0092  3A 07 00    	ld	a,(_lin + 0x0007)
985   0095  32 00 00    	ld	(_s_lin0),a
986   0098  3A 07 00    	ld	a,(_col + 0x0007)
987   009B  32 00 00    	ld	(_s_col0),a
988   009E  3A 07 00    	ld	a,(_state + 0x0007)
989   00A1  32 00 00    	ld	(_s_state),a
990   00A4  21 00 00    	ld	hl,_s_class
991   00A7  36 00       	ld	(hl),0x00
992   00A9  CD B6 00    	call	_player_move
993   00AC  CD A7 03    	call	_player_collision
994   00AF  3A 00 00    	ld	a,(_s_state)
995   00B2  32 07 00    	ld	((_state + 0x0007)),a
996   00B5  C9          	ret
997   00B6              	SECTION code_compiler
998   00B6              ;	---------------------------------
999   00B6              ; Function player_move
1000  00B6              ; ---------------------------------
1001  00B6              _player_move:
1002  00B6  21 00 00    	ld	hl,_s_state
1003  00B9  CB 46       	bit	0, (hl)
1004  00BB  20 07       	jr	NZ,l_player_move_00113
1005  00BD  21 00 00    	ld	hl,_s_state
1006  00C0  CB 4E       	bit	1, (hl)
1007  00C2  28 43       	jr	Z,l_player_move_00114
1008  00C4              l_player_move_00113:
1009  00C4  CD 18 03    	call	_player_fire
1010  00C7  3A 00 00    	ld	a,(_player_vel_y)
1011  00CA  21 00 00    	ld	hl,_player_vel_y1
1012  00CD  96          	sub	a, (hl)
1013  00CE  E2 D3 00    	jp	PO, l_player_move_00162
1014  00D1  EE 80       	xor	a,0x80
1015  00D3              l_player_move_00162:
1016  00D3  F2 F0 00    	jp	P, l_player_move_00106
1017  00D6  21 00 00    	ld	hl,_dirs
1018  00D9  CB 56       	bit	2, (hl)
1019  00DB  28 06       	jr	Z,l_player_move_00102
1020  00DD  21 00 00    	ld	hl,_s_state
1021  00E0  CD 00 00    	call	_spr_set_left
1022  00E3              l_player_move_00102:
1023  00E3  21 00 00    	ld	hl,_dirs
1024  00E6  CB 4E       	bit	1, (hl)
1025  00E8  28 06       	jr	Z,l_player_move_00106
1026  00EA  21 00 00    	ld	hl,_s_state
1027  00ED  CD 00 00    	call	_spr_set_right
1028  00F0              l_player_move_00106:
1029  00F0  CD EC 0D    	call	_player_move_jump
1030  00F3  7D          	ld	a, l
1031  00F4  B7          	or	a, a
1032  00F5  28 1C       	jr	Z,l_player_move_00115
1033  00F7  3A 00 00    	ld	a,(_player_onstair)
1034  00FA  B7          	or	a, a
1035  00FB  20 16       	jr	NZ,l_player_move_00115
1036  00FD  21 60 08    	ld	hl,0x0860
1037  0100  E5          	push	hl
1038  0101  CD 14 07    	call	_player_tile
1039  0104  F1          	pop	af
1040  0105  18 0C       	jr	l_player_move_00115
1041  0107              l_player_move_00114:
1042  0107  CD 73 01    	call	_player_move_input
1043  010A  3A 00 00    	ld	a,(_player_onstair)
1044  010D  B7          	or	a, a
1045  010E  20 03       	jr	NZ,l_player_move_00115
1046  0110  CD 7C 0C    	call	_player_check_floor
1047  0113              l_player_move_00115:
1048  0113  CD 00 00    	call	_spr_redraw_player
1049  0116  7D          	ld	a, l
1050  0117  B7          	or	a, a
1051  0118  28 03       	jr	Z,l_player_move_00118
1052  011A  CD 35 07    	call	_player_check_map
1053  011D              l_player_move_00118:
1054  011D  3A 00 00    	ld	a,(_player_hit_lin)
1055  0120  B7          	or	a, a
1056  0121  28 03       	jr	Z,l_player_move_00120
1057  0123  CD E0 0B    	call	_player_hit_platform_clear
1058  0126              l_player_move_00120:
1059  0126  2E 00       	ld	l,0x00
1060  0128  C9          	ret
1061  0129              	SECTION code_compiler
1062  0129              ;	---------------------------------
1063  0129              ; Function player_check_input
1064  0129              ; ---------------------------------
1065  0129              _player_check_input:
1066  0129  21 00 00    	ld	hl,_dirs
1067  012C  CB 56       	bit	2, (hl)
1068  012E  28 0C       	jr	Z,l_player_check_input_00102
1069  0130  21 00 00    	ld	hl,_dirs
1070  0133  CB 5E       	bit	3, (hl)
1071  0135  28 05       	jr	Z,l_player_check_input_00102
1072  0137  21 00 00    	ld	hl,_dirs
1073  013A  36 00       	ld	(hl),0x00
1074  013C              l_player_check_input_00102:
1075  013C  21 00 00    	ld	hl,_dirs
1076  013F  7E          	ld	a, (hl)
1077  0140  CB 07       	rlc	a
1078  0142  E6 01       	and	a,0x01
1079  0144  CB 47       	bit	0, a
1080  0146  20 28       	jr	NZ,l_player_check_input_00107
1081  0148  CB 56       	bit	2, (hl)
1082  014A  20 24       	jr	NZ,l_player_check_input_00107
1083  014C  21 00 00    	ld	hl,_dirs
1084  014F  CB 5E       	bit	3, (hl)
1085  0151  20 1D       	jr	NZ,l_player_check_input_00107
1086  0153  21 00 00    	ld	hl,_dirs
1087  0156  CB 46       	bit	0, (hl)
1088  0158  20 16       	jr	NZ,l_player_check_input_00107
1089  015A  21 00 00    	ld	hl,_dirs
1090  015D  CB 4E       	bit	1, (hl)
1091  015F  20 0F       	jr	NZ,l_player_check_input_00107
1092  0161  3A 00 00    	ld	a,(_dirs_alt)
1093  0164  CB 07       	rlc	a
1094  0166  E6 01       	and	a,0x01
1095  0168  CB 47       	bit	0, a
1096  016A  20 04       	jr	NZ,l_player_check_input_00107
1097  016C  2E 00       	ld	l,0x00
1098  016E  18 02       	jr	l_player_check_input_00108
1099  0170              l_player_check_input_00107:
1100  0170  2E 01       	ld	l,0x01
1101  0172              l_player_check_input_00108:
1102  0172  C9          	ret
1103  0173              	SECTION code_compiler
1104  0173              ;	---------------------------------
1105  0173              ; Function player_move_input
1106  0173              ; ---------------------------------
1107  0173              _player_move_input:
1108  0173  CD 29 01    	call	_player_check_input
1109  0176  7D          	ld	a, l
1110  0177  B7          	or	a, a
1111  0178  CA D8 02    	jp	Z, l_player_move_input_00147
1112  017B  CD 18 03    	call	_player_fire
1113  017E  7D          	ld	a, l
1114  017F  B7          	or	a, a
1115  0180  28 0A       	jr	Z,l_player_move_input_00102
1116  0182  21 00 00    	ld	hl,_dirs
1117  0185  36 00       	ld	(hl),0x00
1118  0187  2E 00       	ld	l,0x00
1119  0189  C3 FE 02    	jp	l_player_move_input_00149
1120  018C              l_player_move_input_00102:
1121  018C  3A 00 00    	ld	a,(_game_2buttons)
1122  018F  B7          	or	a, a
1123  0190  28 07       	jr	Z,l_player_move_input_00104
1124  0192  3A 00 00    	ld	a,(_dirs)
1125  0195  E6 80       	and	a,0x80
1126  0197  18 16       	jr	l_player_move_input_00105
1127  0199              l_player_move_input_00104:
1128  0199  21 00 00    	ld	hl,_dirs
1129  019C  7E          	ld	a, (hl)
1130  019D  CB 07       	rlc	a
1131  019F  E6 01       	and	a,0x01
1132  01A1  CB 47       	bit	0, a
1133  01A3  28 04       	jr	Z,l_player_move_input_00151
1134  01A5  CB 46       	bit	0, (hl)
1135  01A7  20 04       	jr	NZ,l_player_move_input_00152
1136  01A9              l_player_move_input_00151:
1137  01A9  3E 00       	ld	a,0x00
1138  01AB  18 02       	jr	l_player_move_input_00153
1139  01AD              l_player_move_input_00152:
1140  01AD  3E 01       	ld	a,0x01
1141  01AF              l_player_move_input_00153:
1142  01AF              l_player_move_input_00105:
1143  01AF  B7          	or	a, a
1144  01B0  28 37       	jr	Z,l_player_move_input_00107
1145  01B2  21 00 00    	ld	hl,_player_vel_inc
1146  01B5  36 01       	ld	(hl),0x01
1147  01B7  CD 00 00    	call	_audio_salto
1148  01BA  21 00 00    	ld	hl,_player_onstair
1149  01BD  36 00       	ld	(hl),0x00
1150  01BF  21 00 00    	ld	hl,_s_state
1151  01C2  CD 00 00    	call	_spr_set_up
1152  01C5  3A 07 00    	ld	a,(_lin + 0x0007)
1153  01C8  32 07 00    	ld	(_jump_lin+7),a
1154  01CB  3A 00 00    	ld	a,(_s_state)
1155  01CE  32 07 00    	ld	((_state + 0x0007)),a
1156  01D1  21 64 08    	ld	hl,0x0864
1157  01D4  E5          	push	hl
1158  01D5  CD 14 07    	call	_player_tile
1159  01D8  F1          	pop	af
1160  01D9  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
1161  01DC  36 02       	ld	(hl),0x02
1162  01DE  3A 00 00    	ld	a,(_player_vel_y0)
1163  01E1  32 00 00    	ld	(_player_vel_y),a
1164  01E4  2E 01       	ld	l,0x01
1165  01E6  C3 FE 02    	jp	l_player_move_input_00149
1166  01E9              l_player_move_input_00107:
1167  01E9  21 00 00    	ld	hl,_dirs
1168  01EC  CB 5E       	bit	3, (hl)
1169  01EE  28 20       	jr	Z,l_player_move_input_00111
1170  01F0  CD FF 02    	call	_player_fix_walk_lin
1171  01F3  21 00 00    	ld	hl,_s_state
1172  01F6  CD 00 00    	call	_spr_set_right
1173  01F9  01 07 00    	ld	bc,_state_a+7
1174  01FC  0A          	ld	a, (bc)
1175  01FD  F6 10       	or	a,0x10
1176  01FF  E6 F7       	and	a,0xf7
1177  0201  02          	ld	(bc),a
1178  0202  3A 00 00    	ld	a,(_player_onstair)
1179  0205  B7          	or	a, a
1180  0206  28 05       	jr	Z,l_player_move_input_00109
1181  0208  2E 00       	ld	l,0x00
1182  020A  CD 40 06    	call	_player_check_stairs
1183  020D              l_player_move_input_00109:
1184  020D  CD 00 00    	call	_spr_move_horizontal
1185  0210              l_player_move_input_00111:
1186  0210  21 00 00    	ld	hl,_dirs
1187  0213  CB 56       	bit	2, (hl)
1188  0215  28 20       	jr	Z,l_player_move_input_00115
1189  0217  CD FF 02    	call	_player_fix_walk_lin
1190  021A  21 00 00    	ld	hl,_s_state
1191  021D  CD 00 00    	call	_spr_set_left
1192  0220  01 07 00    	ld	bc,_state_a+7
1193  0223  0A          	ld	a, (bc)
1194  0224  F6 08       	or	a,0x08
1195  0226  E6 EF       	and	a,0xef
1196  0228  02          	ld	(bc),a
1197  0229  3A 00 00    	ld	a,(_player_onstair)
1198  022C  B7          	or	a, a
1199  022D  28 05       	jr	Z,l_player_move_input_00113
1200  022F  2E 00       	ld	l,0x00
1201  0231  CD 40 06    	call	_player_check_stairs
1202  0234              l_player_move_input_00113:
1203  0234  CD 00 00    	call	_spr_move_horizontal
1204  0237              l_player_move_input_00115:
1205  0237  21 00 00    	ld	hl,_dirs
1206  023A  CB 46       	bit	0, (hl)
1207  023C  28 39       	jr	Z,l_player_move_input_00127
1208  023E  2E 00       	ld	l,0x00
1209  0240  CD 40 06    	call	_player_check_stairs
1210  0243  3A 00 00    	ld	a,(_player_onstair)
1211  0246  B7          	or	a, a
1212  0247  20 10       	jr	NZ,l_player_move_input_00119
1213  0249  2E 01       	ld	l,0x01
1214  024B  CD 40 06    	call	_player_check_stairs
1215  024E  3A 00 00    	ld	a,(_player_onstair)
1216  0251  B7          	or	a, a
1217  0252  20 05       	jr	NZ,l_player_move_input_00119
1218  0254  2E FE       	ld	l,0xfe
1219  0256  CD A0 05    	call	_player_check_stairs_vertical
1220  0259              l_player_move_input_00119:
1221  0259  3A 00 00    	ld	a,(_player_onstair)
1222  025C  B7          	or	a, a
1223  025D  28 05       	jr	Z,l_player_move_input_00124
1224  025F  CD 00 00    	call	_spr_move_up
1225  0262  18 13       	jr	l_player_move_input_00127
1226  0264              l_player_move_input_00124:
1227  0264  21 00 00    	ld	hl,_dirs
1228  0267  CB 5E       	bit	3, (hl)
1229  0269  20 0C       	jr	NZ,l_player_move_input_00127
1230  026B  21 00 00    	ld	hl,_dirs
1231  026E  CB 56       	bit	2, (hl)
1232  0270  20 05       	jr	NZ,l_player_move_input_00127
1233  0272  2E 00       	ld	l,0x00
1234  0274  C3 FE 02    	jp	l_player_move_input_00149
1235  0277              l_player_move_input_00127:
1236  0277  21 00 00    	ld	hl,_dirs
1237  027A  CB 4E       	bit	1, (hl)
1238  027C  28 38       	jr	Z,l_player_move_input_00139
1239  027E  2E 00       	ld	l,0x00
1240  0280  CD 40 06    	call	_player_check_stairs
1241  0283  3A 00 00    	ld	a,(_player_onstair)
1242  0286  B7          	or	a, a
1243  0287  20 10       	jr	NZ,l_player_move_input_00131
1244  0289  2E 01       	ld	l,0x01
1245  028B  CD 40 06    	call	_player_check_stairs
1246  028E  3A 00 00    	ld	a,(_player_onstair)
1247  0291  B7          	or	a, a
1248  0292  20 05       	jr	NZ,l_player_move_input_00131
1249  0294  2E 12       	ld	l,0x12
1250  0296  CD A0 05    	call	_player_check_stairs_vertical
1251  0299              l_player_move_input_00131:
1252  0299  3A 00 00    	ld	a,(_player_onstair)
1253  029C  B7          	or	a, a
1254  029D  28 05       	jr	Z,l_player_move_input_00136
1255  029F  CD 00 00    	call	_spr_move_down
1256  02A2  18 12       	jr	l_player_move_input_00139
1257  02A4              l_player_move_input_00136:
1258  02A4  21 00 00    	ld	hl,_dirs
1259  02A7  CB 5E       	bit	3, (hl)
1260  02A9  20 0B       	jr	NZ,l_player_move_input_00139
1261  02AB  21 00 00    	ld	hl,_dirs
1262  02AE  CB 56       	bit	2, (hl)
1263  02B0  20 04       	jr	NZ,l_player_move_input_00139
1264  02B2  2E 00       	ld	l,0x00
1265  02B4  18 48       	jr	l_player_move_input_00149
1266  02B6              l_player_move_input_00139:
1267  02B6  3A 00 00    	ld	a,(_s_state)
1268  02B9  32 07 00    	ld	((_state + 0x0007)),a
1269  02BC  3A 00 00    	ld	a,(_player_onstair)
1270  02BF  B7          	or	a, a
1271  02C0  28 0A       	jr	Z,l_player_move_input_00141
1272  02C2  21 72 00    	ld	hl,0x0072
1273  02C5  E5          	push	hl
1274  02C6  CD 14 07    	call	_player_tile
1275  02C9  F1          	pop	af
1276  02CA  18 08       	jr	l_player_move_input_00142
1277  02CC              l_player_move_input_00141:
1278  02CC  21 60 08    	ld	hl,0x0860
1279  02CF  E5          	push	hl
1280  02D0  CD 14 07    	call	_player_tile
1281  02D3  F1          	pop	af
1282  02D4              l_player_move_input_00142:
1283  02D4  2E 01       	ld	l,0x01
1284  02D6  18 26       	jr	l_player_move_input_00149
1285  02D8              l_player_move_input_00147:
1286  02D8  21 07 00    	ld	hl, +(_colint + 0x0007)
1287  02DB  36 00       	ld	(hl),0x00
1288  02DD  3A 00 00    	ld	a,(_player_onstair)
1289  02E0  B7          	or	a, a
1290  02E1  28 0A       	jr	Z,l_player_move_input_00144
1291  02E3  21 72 00    	ld	hl,0x0072
1292  02E6  E5          	push	hl
1293  02E7  CD 14 07    	call	_player_tile
1294  02EA  F1          	pop	af
1295  02EB  18 08       	jr	l_player_move_input_00145
1296  02ED              l_player_move_input_00144:
1297  02ED  21 70 01    	ld	hl,0x0170
1298  02F0  E5          	push	hl
1299  02F1  CD 14 07    	call	_player_tile
1300  02F4  F1          	pop	af
1301  02F5              l_player_move_input_00145:
1302  02F5  21 00 00    	ld	hl,_s_state
1303  02F8  7E          	ld	a,(hl)
1304  02F9  E6 F3       	and	a,+(0xf7&0xfb)
1305  02FB  77          	ld	(hl),a
1306  02FC  2E 00       	ld	l,0x00
1307  02FE              l_player_move_input_00149:
1308  02FE  C9          	ret
1309  02FF              	SECTION code_compiler
1310  02FF              ;	---------------------------------
1311  02FF              ; Function player_fix_walk_lin
1312  02FF              ; ---------------------------------
1313  02FF              _player_fix_walk_lin:
1314  02FF  3A 00 00    	ld	a,(_player_onstair)
1315  0302  B7          	or	a, a
1316  0303  C0          	ret	NZ
1317  0304  01 07 00    	ld	bc,_lin+7
1318  0307  3A 00 00    	ld	a,(_s_lin0)
1319  030A  07          	rlca
1320  030B  07          	rlca
1321  030C  07          	rlca
1322  030D  07          	rlca
1323  030E  E6 0F       	and	a,0x0f
1324  0310  07          	rlca
1325  0311  07          	rlca
1326  0312  07          	rlca
1327  0313  07          	rlca
1328  0314  E6 F0       	and	a,0xf0
1329  0316  02          	ld	(bc), a
1330  0317  C9          	ret
1331  0318              	SECTION code_compiler
1332  0318              ;	---------------------------------
1333  0318              ; Function player_fire
1334  0318              ; ---------------------------------
1335  0318              _player_fire:
1336  0318  CD 00 00    	call	___sdcc_enter_ix
1337  031B  3B          	dec	sp
1338  031C  3A 00 00    	ld	a,(_game_2buttons)
1339  031F  B7          	or	a, a
1340  0320  28 0A       	jr	Z,l_player_fire_00102
1341  0322  3A 00 00    	ld	a,(_dirs_alt)
1342  0325  E6 80       	and	a,0x80
1343  0327  32 00 00    	ld	(_player_onfire),a
1344  032A  18 1A       	jr	l_player_fire_00103
1345  032C              l_player_fire_00102:
1346  032C  21 00 00    	ld	hl,_dirs
1347  032F  7E          	ld	a, (hl)
1348  0330  CB 07       	rlc	a
1349  0332  E6 01       	and	a,0x01
1350  0334  CB 47       	bit	0, a
1351  0336  28 04       	jr	Z,l_player_fire_00120
1352  0338  CB 46       	bit	0, (hl)
1353  033A  28 04       	jr	Z,l_player_fire_00121
1354  033C              l_player_fire_00120:
1355  033C  0E 00       	ld	c,0x00
1356  033E  18 02       	jr	l_player_fire_00122
1357  0340              l_player_fire_00121:
1358  0340  0E 01       	ld	c,0x01
1359  0342              l_player_fire_00122:
1360  0342  21 00 00    	ld	hl,_player_onfire
1361  0345  71          	ld	(hl), c
1362  0346              l_player_fire_00103:
1363  0346  3A 00 00    	ld	a,(_player_onfire)
1364  0349  B7          	or	a, a
1365  034A  28 55       	jr	Z,l_player_fire_00117
1366  034C  3A 07 00    	ld	a,(_tile + 0x0007)
1367  034F  FE 70       	cp	a,0x70
1368  0351  28 04       	jr	Z,l_player_fire_00104
1369  0353  D6 71       	sub	a,0x71
1370  0355  20 0D       	jr	NZ,l_player_fire_00105
1371  0357              l_player_fire_00104:
1372  0357  21 60 08    	ld	hl,0x0860
1373  035A  E5          	push	hl
1374  035B  CD 14 07    	call	_player_tile
1375  035E  F1          	pop	af
1376  035F  21 07 00    	ld	hl, +(_colint + 0x0007)
1377  0362  36 00       	ld	(hl),0x00
1378  0364              l_player_fire_00105:
1379  0364  21 00 00    	ld	hl,_player_mana
1380  0367  7E          	ld	a, (hl)
1381  0368  B7          	or	a, a
1382  0369  28 2F       	jr	Z,l_player_fire_00113
1383  036B  3A 07 00    	ld	a,(_bullet_col + 0x0007)
1384  036E  3C          	inc	a
1385  036F  20 29       	jr	NZ,l_player_fire_00113
1386  0371  3E 05       	ld	a,0x05
1387  0373  96          	sub	a, (hl)
1388  0374  30 0F       	jr	NC,l_player_fire_00110
1389  0376  3A 00 00    	ld	a,(_game_inmune)
1390  0379  B7          	or	a, a
1391  037A  20 0E       	jr	NZ,l_player_fire_00111
1392  037C  21 00 00    	ld	hl,_player_mana
1393  037F  7E          	ld	a, (hl)
1394  0380  C6 FB       	add	a,0xfb
1395  0382  77          	ld	(hl), a
1396  0383  18 05       	jr	l_player_fire_00111
1397  0385              l_player_fire_00110:
1398  0385  21 00 00    	ld	hl,_player_mana
1399  0388  36 00       	ld	(hl),0x00
1400  038A              l_player_fire_00111:
1401  038A  CD 00 00    	call	_game_update_stats
1402  038D  CD 00 00    	call	_audio_disparo1
1403  0390  21 07 78    	ld	hl,0x7807
1404  0393  E5          	push	hl
1405  0394  CD 00 00    	call	_game_shoot_fire
1406  0397  F1          	pop	af
1407  0398  18 03       	jr	l_player_fire_00114
1408  039A              l_player_fire_00113:
1409  039A  CD 00 00    	call	_audio_sin_mana
1410  039D              l_player_fire_00114:
1411  039D  2E 01       	ld	l,0x01
1412  039F  18 02       	jr	l_player_fire_00118
1413  03A1              l_player_fire_00117:
1414  03A1  2E 00       	ld	l,0x00
1415  03A3              l_player_fire_00118:
1416  03A3  33          	inc	sp
1417  03A4  DD E1       	pop	ix
1418  03A6  C9          	ret
1419  03A7              	SECTION code_compiler
1420  03A7              ;	---------------------------------
1421  03A7              ; Function player_collision
1422  03A7              ; ---------------------------------
1423  03A7              _player_collision:
1424  03A7  3E 1E       	ld	a,0x1e
1425  03A9  F5          	push	af
1426  03AA  33          	inc	sp
1427  03AB  21 00 00    	ld	hl,_player_hit_time
1428  03AE  E5          	push	hl
1429  03AF  CD 00 00    	call	_game_check_time
1430  03B2  F1          	pop	af
1431  03B3  33          	inc	sp
1432  03B4  7D          	ld	a, l
1433  03B5  B7          	or	a, a
1434  03B6  CA 54 05    	jp	Z, l_player_collision_00136
1435  03B9  21 00 00    	ld	hl,_sprite
1436  03BC  36 00       	ld	(hl),0x00
1437  03BE  3A 07 00    	ld	a,(_col + 7)
1438  03C1  32 00 00    	ld	(_s_col1),a
1439  03C4  3A 07 00    	ld	a,(_lin + 7)
1440  03C7  32 00 00    	ld	(_s_lin1),a
1441  03CA  C6 08       	add	a,0x08
1442  03CC  4F          	ld	c, a
1443  03CD  3A 00 00    	ld	a, (_s_col1)
1444  03D0  47          	ld	b,a
1445  03D1  C5          	push	bc
1446  03D2  CD 00 00    	call	_spr_calc_index
1447  03D5  F1          	pop	af
1448  03D6  4D          	ld	c, l
1449  03D7  21 00 00    	ld	hl,_sprite_curr_index
1450  03DA  71          	ld	(hl), c
1451  03DB  3E 00       	ld	a, +((_scr_map) & 0xFF)
1452  03DD  86          	add	a, (hl)
1453  03DE  4F          	ld	c, a
1454  03DF  3E 00       	ld	a, +((_scr_map) / 256)
1455  03E1  CE 00       	adc	a,0x00
1456  03E3  47          	ld	b, a
1457  03E4  0A          	ld	a, (bc)
1458  03E5  4F          	ld	c,a
1459  03E6  D6 15       	sub	a,0x15
1460  03E8  20 2B       	jr	NZ,l_player_collision_00104
1461  03EA  21 00 00    	ld	hl,_s_state
1462  03ED  CB 46       	bit	0, (hl)
1463  03EF  20 24       	jr	NZ,l_player_collision_00104
1464  03F1  3A 00 00    	ld	a,(_game_checkpoint_scr)
1465  03F4  21 00 00    	ld	hl,_scr_curr
1466  03F7  96          	sub	a, (hl)
1467  03F8  28 16       	jr	Z,l_player_collision_00102
1468  03FA  C5          	push	bc
1469  03FB  CD 00 00    	call	_audio_efecto
1470  03FE  C1          	pop	bc
1471  03FF  2E 07       	ld	l,0x07
1472  0401  CD 00 00    	call	_zx_border_fastcall
1473  0404  3A 00 00    	ld	a,(_s_col1)
1474  0407  32 00 00    	ld	(_player_col_scr),a
1475  040A  3A 00 00    	ld	a,(_s_lin1)
1476  040D  32 00 00    	ld	(_player_lin_scr),a
1477  0410              l_player_collision_00102:
1478  0410  C5          	push	bc
1479  0411  CD 00 00    	call	_game_set_checkpoint
1480  0414  C1          	pop	bc
1481  0415              l_player_collision_00104:
1482  0415  3E 2F       	ld	a,0x2f
1483  0417  91          	sub	a, c
1484  0418  30 5D       	jr	NC,l_player_collision_00157
1485  041A  79          	ld	a,c
1486  041B  FE 3A       	cp	a,0x3a
1487  041D  30 58       	jr	NC,l_player_collision_00157
1488  041F  D6 39       	sub	a,0x39
1489  0421  20 2A       	jr	NZ,l_player_collision_00111
1490  0423  CD 00 00    	call	_audio_level_complete
1491  0426  21 00 00    	ld	hl,___str_0
1492  0429  E5          	push	hl
1493  042A  21 0C 08    	ld	hl,0x080c
1494  042D  E5          	push	hl
1495  042E  CD 00 00    	call	_zx_print_str
1496  0431  AF          	xor	a, a
1497  0432  F5          	push	af
1498  0433  33          	inc	sp
1499  0434  21 E8 03    	ld	hl,0x03e8
1500  0437  E5          	push	hl
1501  0438  21 08 17    	ld	hl,0x1708
1502  043B  E5          	push	hl
1503  043C  3E 0C       	ld	a,0x0c
1504  043E  F5          	push	af
1505  043F  33          	inc	sp
1506  0440  CD 00 00    	call	_game_colour_message
1507  0443  F1          	pop	af
1508  0444  F1          	pop	af
1509  0445  F1          	pop	af
1510  0446  21 00 00    	ld	hl,_game_round_up
1511  0449  36 01       	ld	(hl),0x01
1512  044B  18 2A       	jr	l_player_collision_00157
1513  044D              l_player_collision_00111:
1514  044D  3A 00 00    	ld	a,(_game_inmune)
1515  0450  B7          	or	a, a
1516  0451  20 10       	jr	NZ,l_player_collision_00107
1517  0453  3E 82       	ld	a,0x82
1518  0455  21 00 00    	ld	hl,_s_lin1
1519  0458  96          	sub	a, (hl)
1520  0459  30 08       	jr	NC,l_player_collision_00107
1521  045B  CD 2D 10    	call	_player_lost_life
1522  045E  2E 00       	ld	l,0x00
1523  0460  C3 56 05    	jp	l_player_collision_00137
1524  0463              l_player_collision_00107:
1525  0463  21 00 00    	ld	hl,_s_state
1526  0466  CB E6       	set	4, (hl)
1527  0468  2E 06       	ld	l,0x06
1528  046A  CD 00 00    	call	_zx_border_fastcall
1529  046D  2E 32       	ld	l,0x32
1530  046F  CD BD 11    	call	_player_damage
1531  0472  2E 01       	ld	l,0x01
1532  0474  C3 56 05    	jp	l_player_collision_00137
1533  0477              l_player_collision_00157:
1534  0477              l_player_collision_00132:
1535  0477  21 00 00    	ld	hl,_sprite
1536  047A  7E          	ld	a, (hl)
1537  047B  D6 07       	sub	a,0x07
1538  047D  D2 4F 05    	jp	NC, l_player_collision_00134
1539  0480  4E          	ld	c,(hl)
1540  0481  06 00       	ld	b,0x00
1541  0483  21 00 00    	ld	hl,_class
1542  0486  09          	add	hl,bc
1543  0487  7E          	ld	a,(hl)
1544  0488  32 00 00    	ld	(_s_class),a
1545  048B  B7          	or	a, a
1546  048C  CA 48 05    	jp	Z, l_player_collision_00131
1547  048F  2A 00 00    	ld	hl,(_sprite)
1548  0492  26 00       	ld	h,0x00
1549  0494  01 00 00    	ld	bc,_col
1550  0497  09          	add	hl,bc
1551  0498  4E          	ld	c,(hl)
1552  0499  06 00       	ld	b,0x00
1553  049B  3A 00 00    	ld	a,(_s_col1)
1554  049E  5F          	ld	e,a
1555  049F  16 00       	ld	d,0x00
1556  04A1  79          	ld	a, c
1557  04A2  93          	sub	a, e
1558  04A3  6F          	ld	l, a
1559  04A4  78          	ld	a, b
1560  04A5  9A          	sbc	a, d
1561  04A6  67          	ld	h, a
1562  04A7  CD 00 00    	call	_abs_fastcall
1563  04AA  7D          	ld	a,l
1564  04AB  D6 02       	sub	a,0x02
1565  04AD  7C          	ld	a,h
1566  04AE  17          	rla
1567  04AF  3F          	ccf
1568  04B0  1F          	rra
1569  04B1  DE 80       	sbc	a,0x80
1570  04B3  D2 48 05    	jp	NC, l_player_collision_00131
1571  04B6  2A 00 00    	ld	hl,(_sprite)
1572  04B9  26 00       	ld	h,0x00
1573  04BB  01 00 00    	ld	bc,_lin
1574  04BE  09          	add	hl,bc
1575  04BF  4E          	ld	c,(hl)
1576  04C0  06 00       	ld	b,0x00
1577  04C2  3A 00 00    	ld	a,(_s_lin1)
1578  04C5  5F          	ld	e,a
1579  04C6  16 00       	ld	d,0x00
1580  04C8  79          	ld	a, c
1581  04C9  93          	sub	a, e
1582  04CA  6F          	ld	l, a
1583  04CB  78          	ld	a, b
1584  04CC  9A          	sbc	a, d
1585  04CD  67          	ld	h, a
1586  04CE  CD 00 00    	call	_abs_fastcall
1587  04D1  7D          	ld	a,l
1588  04D2  D6 0E       	sub	a,0x0e
1589  04D4  7C          	ld	a,h
1590  04D5  17          	rla
1591  04D6  3F          	ccf
1592  04D7  1F          	rra
1593  04D8  DE 80       	sbc	a,0x80
1594  04DA  30 6C       	jr	NC,l_player_collision_00131
1595  04DC  3A 00 00    	ld	a,(_s_class)
1596  04DF  D6 06       	sub	a,0x06
1597  04E1  20 1D       	jr	NZ,l_player_collision_00119
1598  04E3  21 00 00    	ld	hl,_player_vita
1599  04E6  7E          	ld	a, (hl)
1600  04E7  C6 32       	add	a,0x32
1601  04E9  77          	ld	(hl), a
1602  04EA  3A 00 00    	ld	a,(_player_max_vita)
1603  04ED  21 00 00    	ld	hl,_player_vita
1604  04F0  96          	sub	a, (hl)
1605  04F1  30 06       	jr	NC,l_player_collision_00117
1606  04F3  3A 00 00    	ld	a,(_player_max_vita)
1607  04F6  32 00 00    	ld	(_player_vita),a
1608  04F9              l_player_collision_00117:
1609  04F9  CD 57 05    	call	_player_pick_mushroom
1610  04FC  2E 00       	ld	l,0x00
1611  04FE  18 56       	jr	l_player_collision_00137
1612  0500              l_player_collision_00119:
1613  0500  3A 00 00    	ld	a,(_s_class)
1614  0503  D6 07       	sub	a,0x07
1615  0505  20 1D       	jr	NZ,l_player_collision_00123
1616  0507  21 00 00    	ld	hl,_player_mana
1617  050A  7E          	ld	a, (hl)
1618  050B  C6 32       	add	a,0x32
1619  050D  77          	ld	(hl), a
1620  050E  3A 00 00    	ld	a,(_player_max_mana)
1621  0511  21 00 00    	ld	hl,_player_mana
1622  0514  96          	sub	a, (hl)
1623  0515  30 06       	jr	NC,l_player_collision_00121
1624  0517  3A 00 00    	ld	a,(_player_max_mana)
1625  051A  32 00 00    	ld	(_player_mana),a
1626  051D              l_player_collision_00121:
1627  051D  CD 57 05    	call	_player_pick_mushroom
1628  0520  2E 00       	ld	l,0x00
1629  0522  18 32       	jr	l_player_collision_00137
1630  0524              l_player_collision_00123:
1631  0524  3A 00 00    	ld	a,(_s_class)
1632  0527  D6 08       	sub	a,0x08
1633  0529  20 0A       	jr	NZ,l_player_collision_00125
1634  052B  CD 57 05    	call	_player_pick_mushroom
1635  052E  CD 6E 05    	call	_player_1up
1636  0531  2E 00       	ld	l,0x00
1637  0533  18 21       	jr	l_player_collision_00137
1638  0535              l_player_collision_00125:
1639  0535  21 00 00    	ld	hl,_s_state
1640  0538  CB E6       	set	4, (hl)
1641  053A  2E 02       	ld	l,0x02
1642  053C  CD 00 00    	call	_zx_border_fastcall
1643  053F  2E 14       	ld	l,0x14
1644  0541  CD BD 11    	call	_player_damage
1645  0544  2E 01       	ld	l,0x01
1646  0546  18 0E       	jr	l_player_collision_00137
1647  0548              l_player_collision_00131:
1648  0548  21 00 00    	ld	hl,_sprite
1649  054B  34          	inc	(hl)
1650  054C  C3 77 04    	jp	l_player_collision_00132
1651  054F              l_player_collision_00134:
1652  054F  21 00 00    	ld	hl,_s_state
1653  0552  CB A6       	res	4, (hl)
1654  0554              l_player_collision_00136:
1655  0554  2E 00       	ld	l,0x00
1656  0556              l_player_collision_00137:
1657  0556  C9          	ret
1658  0557              	SECTION rodata_compiler
1659  0000              ___str_0:
1660  0000  52 4F 55 4E 44 20 43 4F 4D 50 4C 45 54 45 21 
                        	DEFM "ROUND COMPLETE!"
1661  000F  00          	DEFB 0x00
1662  0010              	SECTION code_compiler
1663  0557              ;	---------------------------------
1664  0557              ; Function player_pick_mushroom
1665  0557              ; ---------------------------------
1666  0557              _player_pick_mushroom:
1667  0557  CD 00 00    	call	_audio_magia1
1668  055A  21 01 00    	ld	hl,0x0001
1669  055D  CD 0F 0C    	call	_player_score_add
1670  0560  CD 00 00    	call	_game_update_stats
1671  0563  2A 00 00    	ld	hl,(_sprite)
1672  0566  CD 00 00    	call	_spr_destroy
1673  0569  21 00 00    	ld	hl,_game_mush_count
1674  056C  35          	dec	(hl)
1675  056D  C9          	ret
1676  056E              	SECTION code_compiler
1677  056E              ;	---------------------------------
1678  056E              ; Function player_1up
1679  056E              ; ---------------------------------
1680  056E              _player_1up:
1681  056E  21 00 00    	ld	hl,_player_lives
1682  0571  7E          	ld	a, (hl)
1683  0572  D6 64       	sub	a,0x64
1684  0574  D0          	ret	NC
1685  0575  34          	inc	(hl)
1686  0576  CD 00 00    	call	_spr_flatten
1687  0579  21 10 00    	ld	hl,___str_1
1688  057C  E5          	push	hl
1689  057D  21 0C 0C    	ld	hl,0x0c0c
1690  0580  E5          	push	hl
1691  0581  CD 00 00    	call	_zx_print_str
1692  0584  AF          	xor	a, a
1693  0585  F5          	push	af
1694  0586  33          	inc	sp
1695  0587  21 19 00    	ld	hl,0x0019
1696  058A  E5          	push	hl
1697  058B  21 0C 11    	ld	hl,0x110c
1698  058E  E5          	push	hl
1699  058F  3E 0C       	ld	a,0x0c
1700  0591  F5          	push	af
1701  0592  33          	inc	sp
1702  0593  CD 00 00    	call	_game_colour_message
1703  0596  F1          	pop	af
1704  0597  F1          	pop	af
1705  0598  F1          	pop	af
1706  0599  CD 00 00    	call	_game_update_stats
1707  059C  CD 00 00    	call	_spr_unflatten
1708  059F  C9          	ret
1709  05A0              	SECTION rodata_compiler
1710  0010              ___str_1:
1711  0010  31 20 55 50 21 
                        	DEFM "1 UP!"
1712  0015  00          	DEFB 0x00
1713  0016              	SECTION code_compiler
1714  05A0              ;	---------------------------------
1715  05A0              ; Function player_check_stairs_vertical
1716  05A0              ; ---------------------------------
1717  05A0              _player_check_stairs_vertical:
1718  05A0  CD 00 00    	call	___sdcc_enter_ix
1719  05A3  3B          	dec	sp
1720  05A4  4D          	ld	c, l
1721  05A5  21 07 00    	ld	hl,+(_col + 0x0007)
1722  05A8  46          	ld	b, (hl)
1723  05A9  CB 40       	bit	0, b
1724  05AB  20 2A       	jr	NZ,l_player_check_stairs_vertical_00102
1725  05AD  3A 07 00    	ld	a,(_lin + 0x0007)
1726  05B0  81          	add	a, c
1727  05B1  4F          	ld	c,a
1728  05B2  C5          	push	bc
1729  05B3  CD 00 00    	call	_spr_calc_index
1730  05B6  F1          	pop	af
1731  05B7  7D          	ld	a,l
1732  05B8  32 00 00    	ld	(_sprite_curr_index),a
1733  05BB  4F          	ld	c,a
1734  05BC  06 00       	ld	b,0x00
1735  05BE  21 00 00    	ld	hl,_scr_map
1736  05C1  09          	add	hl,bc
1737  05C2  7E          	ld	a,(hl)
1738  05C3  4F          	ld	c,a
1739  05C4  D6 44       	sub	a,0x44
1740  05C6  38 05       	jr	C,l_player_check_stairs_vertical_00110
1741  05C8  3E 47       	ld	a,0x47
1742  05CA  91          	sub	a, c
1743  05CB  30 04       	jr	NC,l_player_check_stairs_vertical_00111
1744  05CD              l_player_check_stairs_vertical_00110:
1745  05CD  1E 00       	ld	e,0x00
1746  05CF  18 02       	jr	l_player_check_stairs_vertical_00112
1747  05D1              l_player_check_stairs_vertical_00111:
1748  05D1  1E 01       	ld	e,0x01
1749  05D3              l_player_check_stairs_vertical_00112:
1750  05D3  0E 00       	ld	c,0x00
1751  05D5  18 52       	jr	l_player_check_stairs_vertical_00103
1752  05D7              l_player_check_stairs_vertical_00102:
1753  05D7  78          	ld	a, b
1754  05D8  91          	sub	a, c
1755  05D9  57          	ld	d, a
1756  05DA  3A 07 00    	ld	a,(_lin + 0x0007)
1757  05DD  81          	add	a, c
1758  05DE  47          	ld	b, a
1759  05DF  C5          	push	bc
1760  05E0  58          	ld	e,b
1761  05E1  D5          	push	de
1762  05E2  CD 00 00    	call	_spr_calc_index
1763  05E5  F1          	pop	af
1764  05E6  C1          	pop	bc
1765  05E7  7D          	ld	a,l
1766  05E8  32 00 00    	ld	(_sprite_curr_index),a
1767  05EB  5F          	ld	e,a
1768  05EC  16 00       	ld	d,0x00
1769  05EE  21 00 00    	ld	hl,_scr_map
1770  05F1  19          	add	hl,de
1771  05F2  7E          	ld	a,(hl)
1772  05F3  47          	ld	b,a
1773  05F4  D6 44       	sub	a,0x44
1774  05F6  38 05       	jr	C,l_player_check_stairs_vertical_00113
1775  05F8  3E 47       	ld	a,0x47
1776  05FA  90          	sub	a, b
1777  05FB  30 04       	jr	NC,l_player_check_stairs_vertical_00114
1778  05FD              l_player_check_stairs_vertical_00113:
1779  05FD  1E 00       	ld	e,0x00
1780  05FF  18 02       	jr	l_player_check_stairs_vertical_00115
1781  0601              l_player_check_stairs_vertical_00114:
1782  0601  1E 01       	ld	e,0x01
1783  0603              l_player_check_stairs_vertical_00115:
1784  0603  3A 07 00    	ld	a,(_col + 0x0007)
1785  0606  91          	sub	a, c
1786  0607  47          	ld	b, a
1787  0608  3A 07 00    	ld	a,(_lin + 0x0007)
1788  060B  81          	add	a, c
1789  060C  57          	ld	d, a
1790  060D  D5          	push	de
1791  060E  4A          	ld	c, d
1792  060F  C5          	push	bc
1793  0610  CD 00 00    	call	_spr_calc_index
1794  0613  F1          	pop	af
1795  0614  D1          	pop	de
1796  0615  7D          	ld	a,l
1797  0616  32 00 00    	ld	(_sprite_curr_index),a
1798  0619  7B          	ld	a, e
1799  061A  D6 44       	sub	a,0x44
1800  061C  38 05       	jr	C,l_player_check_stairs_vertical_00116
1801  061E  3E 47       	ld	a,0x47
1802  0620  93          	sub	a, e
1803  0621  30 04       	jr	NC,l_player_check_stairs_vertical_00117
1804  0623              l_player_check_stairs_vertical_00116:
1805  0623  0E 00       	ld	c,0x00
1806  0625  18 02       	jr	l_player_check_stairs_vertical_00118
1807  0627              l_player_check_stairs_vertical_00117:
1808  0627  0E 01       	ld	c,0x01
1809  0629              l_player_check_stairs_vertical_00118:
1810  0629              l_player_check_stairs_vertical_00103:
1811  0629  7B          	ld	a, e
1812  062A  B7          	or	a,a
1813  062B  20 03       	jr	NZ,l_player_check_stairs_vertical_00104
1814  062D  B1          	or	a,c
1815  062E  28 07       	jr	Z,l_player_check_stairs_vertical_00105
1816  0630              l_player_check_stairs_vertical_00104:
1817  0630  21 00 00    	ld	hl,_player_onstair
1818  0633  36 01       	ld	(hl),0x01
1819  0635  18 05       	jr	l_player_check_stairs_vertical_00108
1820  0637              l_player_check_stairs_vertical_00105:
1821  0637  21 00 00    	ld	hl,_player_onstair
1822  063A  36 00       	ld	(hl),0x00
1823  063C              l_player_check_stairs_vertical_00108:
1824  063C  33          	inc	sp
1825  063D  DD E1       	pop	ix
1826  063F  C9          	ret
1827  0640              	SECTION code_compiler
1828  0640              ;	---------------------------------
1829  0640              ; Function player_check_stairs
1830  0640              ; ---------------------------------
1831  0640              _player_check_stairs:
1832  0640  CD 00 00    	call	___sdcc_enter_ix
1833  0643  3B          	dec	sp
1834  0644  45          	ld	b, l
1835  0645  3A 07 00    	ld	a,(_col + 0x0007)
1836  0648  4F          	ld	c,a
1837  0649  80          	add	a, b
1838  064A  57          	ld	d, a
1839  064B  3A 07 00    	ld	a,(_lin + 0x0007)
1840  064E  C5          	push	bc
1841  064F  5F          	ld	e,a
1842  0650  D5          	push	de
1843  0651  CD 00 00    	call	_spr_calc_index
1844  0654  F1          	pop	af
1845  0655  C1          	pop	bc
1846  0656  7D          	ld	a,l
1847  0657  32 00 00    	ld	(_sprite_curr_index),a
1848  065A  5F          	ld	e,a
1849  065B  16 00       	ld	d,0x00
1850  065D  21 00 00    	ld	hl,_scr_map
1851  0660  19          	add	hl,de
1852  0661  7E          	ld	a,(hl)
1853  0662  4F          	ld	c,a
1854  0663  D6 44       	sub	a,0x44
1855  0665  38 05       	jr	C,l_player_check_stairs_00111
1856  0667  3E 47       	ld	a,0x47
1857  0669  91          	sub	a, c
1858  066A  30 04       	jr	NC,l_player_check_stairs_00112
1859  066C              l_player_check_stairs_00111:
1860  066C  0E 00       	ld	c,0x00
1861  066E  18 02       	jr	l_player_check_stairs_00113
1862  0670              l_player_check_stairs_00112:
1863  0670  0E 01       	ld	c,0x01
1864  0672              l_player_check_stairs_00113:
1865  0672  3A 07 00    	ld	a,(_col + 0x0007)
1866  0675  80          	add	a, b
1867  0676  57          	ld	d, a
1868  0677  3A 07 00    	ld	a,(_lin + 0x0007)
1869  067A  C6 0F       	add	a,0x0f
1870  067C  47          	ld	b, a
1871  067D  C5          	push	bc
1872  067E  58          	ld	e,b
1873  067F  D5          	push	de
1874  0680  CD 00 00    	call	_spr_calc_index
1875  0683  F1          	pop	af
1876  0684  C1          	pop	bc
1877  0685  7D          	ld	a,l
1878  0686  32 00 00    	ld	(_sprite_curr_index),a
1879  0689  5F          	ld	e,a
1880  068A  16 00       	ld	d,0x00
1881  068C  21 00 00    	ld	hl,_scr_map
1882  068F  19          	add	hl,de
1883  0690  7E          	ld	a,(hl)
1884  0691  47          	ld	b,a
1885  0692  D6 44       	sub	a,0x44
1886  0694  38 05       	jr	C,l_player_check_stairs_00114
1887  0696  3E 47       	ld	a,0x47
1888  0698  90          	sub	a, b
1889  0699  30 04       	jr	NC,l_player_check_stairs_00115
1890  069B              l_player_check_stairs_00114:
1891  069B  06 00       	ld	b,0x00
1892  069D  18 02       	jr	l_player_check_stairs_00116
1893  069F              l_player_check_stairs_00115:
1894  069F  06 01       	ld	b,0x01
1895  06A1              l_player_check_stairs_00116:
1896  06A1  79          	ld	a, c
1897  06A2  B7          	or	a,a
1898  06A3  20 03       	jr	NZ,l_player_check_stairs_00105
1899  06A5  B0          	or	a,b
1900  06A6  28 13       	jr	Z,l_player_check_stairs_00106
1901  06A8              l_player_check_stairs_00105:
1902  06A8  21 00 00    	ld	hl,_player_onstair
1903  06AB  7E          	ld	a, (hl)
1904  06AC  B7          	or	a, a
1905  06AD  20 1D       	jr	NZ,l_player_check_stairs_00109
1906  06AF  36 01       	ld	(hl),0x01
1907  06B1  21 72 00    	ld	hl,0x0072
1908  06B4  E5          	push	hl
1909  06B5  CD 14 07    	call	_player_tile
1910  06B8  F1          	pop	af
1911  06B9  18 11       	jr	l_player_check_stairs_00109
1912  06BB              l_player_check_stairs_00106:
1913  06BB  21 00 00    	ld	hl,_player_onstair
1914  06BE  7E          	ld	a, (hl)
1915  06BF  B7          	or	a, a
1916  06C0  28 0A       	jr	Z,l_player_check_stairs_00109
1917  06C2  36 00       	ld	(hl),0x00
1918  06C4  21 60 08    	ld	hl,0x0860
1919  06C7  E5          	push	hl
1920  06C8  CD 14 07    	call	_player_tile
1921  06CB  F1          	pop	af
1922  06CC              l_player_check_stairs_00109:
1923  06CC  33          	inc	sp
1924  06CD  DD E1       	pop	ix
1925  06CF  C9          	ret
1926  06D0              	SECTION code_compiler
1927  06D0              ;	---------------------------------
1928  06D0              ; Function player_anim_tile
1929  06D0              ; ---------------------------------
1930  06D0              _player_anim_tile:
1931  06D0  21 07 00    	ld	hl,+(_tile + 0x0007)
1932  06D3  4E          	ld	c, (hl)
1933  06D4  21 07 00    	ld	hl,+(_colint + 0x0007)
1934  06D7  46          	ld	b, (hl)
1935  06D8  79          	ld	a, c
1936  06D9  80          	add	a, b
1937  06DA  32 00 00    	ld	(_s_tile1),a
1938  06DD  3A 00 00    	ld	a,(_player_onstair)
1939  06E0  B7          	or	a, a
1940  06E1  28 17       	jr	Z,l_player_anim_tile_00109
1941  06E3  21 00 00    	ld	hl,_player_anim_stair
1942  06E6  34          	inc	(hl)
1943  06E7  3E 01       	ld	a,0x01
1944  06E9  96          	sub	a, (hl)
1945  06EA  30 02       	jr	NC,l_player_anim_tile_00102
1946  06EC  36 00       	ld	(hl),0x00
1947  06EE              l_player_anim_tile_00102:
1948  06EE  79          	ld	a, c
1949  06EF  21 00 00    	ld	hl,_player_anim_stair
1950  06F2  86          	add	a, (hl)
1951  06F3  C6 04       	add	a,0x04
1952  06F5  32 00 00    	ld	(_s_tile1),a
1953  06F8  18 19       	jr	l_player_anim_tile_00111
1954  06FA              l_player_anim_tile_00109:
1955  06FA  3A 00 00    	ld	a,(_player_onfire)
1956  06FD  B7          	or	a, a
1957  06FE  28 13       	jr	Z,l_player_anim_tile_00111
1958  0700  21 00 00    	ld	hl,_s_state
1959  0703  CB 56       	bit	2, (hl)
1960  0705  28 07       	jr	Z,l_player_anim_tile_00104
1961  0707  21 00 00    	ld	hl,_s_tile1
1962  070A  36 60       	ld	(hl),0x60
1963  070C  18 05       	jr	l_player_anim_tile_00111
1964  070E              l_player_anim_tile_00104:
1965  070E  21 00 00    	ld	hl,_s_tile1
1966  0711  36 68       	ld	(hl),0x68
1967  0713              l_player_anim_tile_00111:
1968  0713  C9          	ret
1969  0714              	SECTION code_compiler
1970  0714              ;	---------------------------------
1971  0714              ; Function player_tile
1972  0714              ; ---------------------------------
1973  0714              _player_tile:
1974  0714  CD 00 00    	call	___sdcc_enter_ix
1975  0717  21 05 00    	ld	hl,0x0005
1976  071A  39          	add	hl, sp
1977  071B  EB          	ex	de,hl
1978  071C  21 04 00    	ld	hl,0x0004
1979  071F  39          	add	hl, sp
1980  0720  4D          	ld	c, l
1981  0721  44          	ld	b, h
1982  0722  D5          	push	de
1983  0723  21 00 00    	ld	hl,_sprite
1984  0726  E5          	push	hl
1985  0727  C5          	push	bc
1986  0728  CD 00 00    	call	_spr_tile_dir
1987  072B  F1          	pop	af
1988  072C  F1          	pop	af
1989  072D  F1          	pop	af
1990  072E  7D          	ld	a,l
1991  072F  32 07 00    	ld	((_tile + 0x0007)),a
1992  0732  DD E1       	pop	ix
1993  0734  C9          	ret
1994  0735              	SECTION code_compiler
1995  0735              ;	---------------------------------
1996  0735              ; Function player_check_map
1997  0735              ; ---------------------------------
1998  0735              _player_check_map:
1999  0735  21 07 00    	ld	hl,+(_col + 0x0007)
2000  0738  46          	ld	b, (hl)
2001  0739  21 07 00    	ld	hl,+(_lin + 0x0007)
2002  073C  4E          	ld	c, (hl)
2003  073D  C5          	push	bc
2004  073E  CD 00 00    	call	_spr_calc_index
2005  0741  F1          	pop	af
2006  0742  7D          	ld	a,l
2007  0743  32 00 00    	ld	(_sprite_curr_index),a
2008  0746  21 07 00    	ld	hl,+(_col + 0x0007)
2009  0749  4E          	ld	c, (hl)
2010  074A  3A 07 00    	ld	a,(_lin + 0x0007)
2011  074D  E6 0F       	and	a,0x0f
2012  074F  CB 41       	bit	0, c
2013  0751  20 17       	jr	NZ,l_player_check_map_00108
2014  0753  B7          	or	a, a
2015  0754  20 05       	jr	NZ,l_player_check_map_00102
2016  0756  CD 95 07    	call	_player_pick_item
2017  0759  18 39       	jr	l_player_check_map_00110
2018  075B              l_player_check_map_00102:
2019  075B  CD 95 07    	call	_player_pick_item
2020  075E  21 00 00    	ld	hl,_sprite_curr_index
2021  0761  7E          	ld	a, (hl)
2022  0762  C6 10       	add	a,0x10
2023  0764  77          	ld	(hl), a
2024  0765  CD 95 07    	call	_player_pick_item
2025  0768  18 2A       	jr	l_player_check_map_00110
2026  076A              l_player_check_map_00108:
2027  076A  B7          	or	a, a
2028  076B  20 0C       	jr	NZ,l_player_check_map_00105
2029  076D  CD 95 07    	call	_player_pick_item
2030  0770  21 00 00    	ld	hl,_sprite_curr_index
2031  0773  34          	inc	(hl)
2032  0774  CD 95 07    	call	_player_pick_item
2033  0777  18 1B       	jr	l_player_check_map_00110
2034  0779              l_player_check_map_00105:
2035  0779  CD 95 07    	call	_player_pick_item
2036  077C  21 00 00    	ld	hl,_sprite_curr_index
2037  077F  34          	inc	(hl)
2038  0780  CD 95 07    	call	_player_pick_item
2039  0783  21 00 00    	ld	hl,_sprite_curr_index
2040  0786  7E          	ld	a, (hl)
2041  0787  C6 0F       	add	a,0x0f
2042  0789  77          	ld	(hl), a
2043  078A  CD 95 07    	call	_player_pick_item
2044  078D  21 00 00    	ld	hl,_sprite_curr_index
2045  0790  34          	inc	(hl)
2046  0791  CD 95 07    	call	_player_pick_item
2047  0794              l_player_check_map_00110:
2048  0794  C9          	ret
2049  0795              	SECTION code_compiler
2050  0795              ;	---------------------------------
2051  0795              ; Function player_pick_item
2052  0795              ; ---------------------------------
2053  0795              _player_pick_item:
2054  0795  CD 00 00    	call	___sdcc_enter_ix
2055  0798  3B          	dec	sp
2056  0799  01 00 00    	ld	bc,_scr_map+0
2057  079C  2A 00 00    	ld	hl,(_sprite_curr_index)
2058  079F  26 00       	ld	h,0x00
2059  07A1  09          	add	hl,bc
2060  07A2  7E          	ld	a,(hl)
2061  07A3  DD 77 FF    	ld	(ix-1),a
2062  07A6  D6 24       	sub	a,0x24
2063  07A8  DA 3B 09    	jp	C, l_player_pick_item_00131
2064  07AB  3E 2F       	ld	a,0x2f
2065  07AD  DD 96 FF    	sub	a,(ix-1)
2066  07B0  DA 3B 09    	jp	C, l_player_pick_item_00131
2067  07B3  CD 00 00    	call	_ay_reset
2068  07B6  79          	ld	a, c
2069  07B7  21 00 00    	ld	hl,_sprite_curr_index
2070  07BA  86          	add	a, (hl)
2071  07BB  4F          	ld	c, a
2072  07BC  78          	ld	a, b
2073  07BD  CE 00       	adc	a,0x00
2074  07BF  47          	ld	b, a
2075  07C0  5E          	ld	e, (hl)
2076  07C1  16 00       	ld	d,0x00
2077  07C3  C5          	push	bc
2078  07C4  EB          	ex	de,hl
2079  07C5  CD 00 00    	call	_game_match_back
2080  07C8  C1          	pop	bc
2081  07C9  7D          	ld	a,l
2082  07CA  02          	ld	(bc), a
2083  07CB  2A 00 00    	ld	hl,(_sprite_curr_index)
2084  07CE  26 00       	ld	h,0x00
2085  07D0  CD 00 00    	call	_game_obj_set
2086  07D3  3A 00 00    	ld	a,(_sprite_curr_index)
2087  07D6  07          	rlca
2088  07D7  07          	rlca
2089  07D8  07          	rlca
2090  07D9  07          	rlca
2091  07DA  E6 0F       	and	a,0x0f
2092  07DC  07          	rlca
2093  07DD  07          	rlca
2094  07DE  07          	rlca
2095  07DF  07          	rlca
2096  07E0  E6 F0       	and	a,0xf0
2097  07E2  32 00 00    	ld	(_s_lin1),a
2098  07E5  3A 00 00    	ld	a,(_sprite_curr_index)
2099  07E8  E6 0F       	and	a,0x0f
2100  07EA  87          	add	a, a
2101  07EB  32 00 00    	ld	(_s_col1),a
2102  07EE  21 00 00    	ld	hl,0x0000
2103  07F1  E5          	push	hl
2104  07F2  21 84 03    	ld	hl,0x0384
2105  07F5  E5          	push	hl
2106  07F6  F5          	push	af
2107  07F7  33          	inc	sp
2108  07F8  3A 00 00    	ld	a,(_s_lin1)
2109  07FB  F5          	push	af
2110  07FC  33          	inc	sp
2111  07FD  CD 00 00    	call	_spr_add_anim
2112  0800  F1          	pop	af
2113  0801  F1          	pop	af
2114  0802  F1          	pop	af
2115  0803  DD 7E FF    	ld	a,(ix-1)
2116  0806  D6 24       	sub	a,0x24
2117  0808  DA 3B 09    	jp	C, l_player_pick_item_00131
2118  080B  3E 2F       	ld	a,0x2f
2119  080D  DD 96 FF    	sub	a,(ix-1)
2120  0810  DA 3B 09    	jp	C, l_player_pick_item_00131
2121  0813  DD 7E FF    	ld	a,(ix-1)
2122  0816  C6 DC       	add	a,0xdc
2123  0818  4F          	ld	c, a
2124  0819  06 00       	ld	b,0x00
2125  081B  21 22 08    	ld	hl,l_player_pick_item_00177
2126  081E  09          	add	hl, bc
2127  081F  09          	add	hl, bc
2128  0820  09          	add	hl, bc
2129  0821  E9          	jp	(hl)
2130  0822              l_player_pick_item_00177:
2131  0822  C3 46 08    	jp	l_player_pick_item_00101
2132  0825  C3 54 08    	jp	l_player_pick_item_00102
2133  0828  C3 62 08    	jp	l_player_pick_item_00103
2134  082B  C3 70 08    	jp	l_player_pick_item_00104
2135  082E  C3 7E 08    	jp	l_player_pick_item_00105
2136  0831  C3 AB 08    	jp	l_player_pick_item_00109
2137  0834  C3 C5 08    	jp	l_player_pick_item_00112
2138  0837  C3 DD 08    	jp	l_player_pick_item_00115
2139  083A  C3 F5 08    	jp	l_player_pick_item_00118
2140  083D  C3 0D 09    	jp	l_player_pick_item_00121
2141  0840  C3 25 09    	jp	l_player_pick_item_00124
2142  0843  C3 9F 08    	jp	l_player_pick_item_00108
2143  0846              l_player_pick_item_00101:
2144  0846  CD 00 00    	call	_audio_efecto
2145  0849  21 00 00    	ld	hl,_player_keys
2146  084C  36 01       	ld	(hl),0x01
2147  084E  CD 00 00    	call	_game_update_stats
2148  0851  C3 3B 09    	jp	l_player_pick_item_00131
2149  0854              l_player_pick_item_00102:
2150  0854  CD 00 00    	call	_audio_efecto
2151  0857  21 01 00    	ld	hl, +(_player_keys + 0x0001)
2152  085A  36 01       	ld	(hl),0x01
2153  085C  CD 00 00    	call	_game_update_stats
2154  085F  C3 3B 09    	jp	l_player_pick_item_00131
2155  0862              l_player_pick_item_00103:
2156  0862  CD 00 00    	call	_audio_efecto
2157  0865  21 02 00    	ld	hl, +(_player_keys + 0x0002)
2158  0868  36 01       	ld	(hl),0x01
2159  086A  CD 00 00    	call	_game_update_stats
2160  086D  C3 3B 09    	jp	l_player_pick_item_00131
2161  0870              l_player_pick_item_00104:
2162  0870  CD 00 00    	call	_audio_efecto
2163  0873  21 03 00    	ld	hl, +(_player_keys + 0x0003)
2164  0876  36 01       	ld	(hl),0x01
2165  0878  CD 00 00    	call	_game_update_stats
2166  087B  C3 3B 09    	jp	l_player_pick_item_00131
2167  087E              l_player_pick_item_00105:
2168  087E  CD 00 00    	call	_audio_coin
2169  0881  21 01 00    	ld	hl,0x0001
2170  0884  CD 0F 0C    	call	_player_score_add
2171  0887  21 00 00    	ld	hl,_player_coins
2172  088A  7E          	ld	a,(hl)
2173  088B  3C          	inc	a
2174  088C  77          	ld	(hl),a
2175  088D  D6 64       	sub	a,0x64
2176  088F  20 08       	jr	NZ,l_player_pick_item_00107
2177  0891  CD 6E 05    	call	_player_1up
2178  0894  21 00 00    	ld	hl,_player_coins
2179  0897  36 00       	ld	(hl),0x00
2180  0899              l_player_pick_item_00107:
2181  0899  CD 00 00    	call	_game_update_stats
2182  089C  C3 3B 09    	jp	l_player_pick_item_00131
2183  089F              l_player_pick_item_00108:
2184  089F  CD 00 00    	call	_audio_magia1
2185  08A2  21 0A 00    	ld	hl,0x000a
2186  08A5  CD 0F 0C    	call	_player_score_add
2187  08A8  C3 3B 09    	jp	l_player_pick_item_00131
2188  08AB              l_player_pick_item_00109:
2189  08AB  CD 00 00    	call	_audio_efecto
2190  08AE  21 00 00    	ld	hl,_player_str
2191  08B1  34          	inc	(hl)
2192  08B2  21 00 00    	ld	hl,_player_max_vita
2193  08B5  7E          	ld	a, (hl)
2194  08B6  D6 C8       	sub	a,0xc8
2195  08B8  D2 3B 09    	jp	NC, l_player_pick_item_00131
2196  08BB  7E          	ld	a, (hl)
2197  08BC  C6 0A       	add	a,0x0a
2198  08BE  77          	ld	(hl), a
2199  08BF  CD 00 00    	call	_game_update_stats
2200  08C2  C3 3B 09    	jp	l_player_pick_item_00131
2201  08C5              l_player_pick_item_00112:
2202  08C5  CD 00 00    	call	_audio_efecto
2203  08C8  21 00 00    	ld	hl,_player_str
2204  08CB  34          	inc	(hl)
2205  08CC  21 00 00    	ld	hl,_player_max_vita
2206  08CF  7E          	ld	a, (hl)
2207  08D0  D6 C8       	sub	a,0xc8
2208  08D2  30 67       	jr	NC,l_player_pick_item_00131
2209  08D4  7E          	ld	a, (hl)
2210  08D5  C6 0A       	add	a,0x0a
2211  08D7  77          	ld	(hl), a
2212  08D8  CD 00 00    	call	_game_update_stats
2213  08DB  18 5E       	jr	l_player_pick_item_00131
2214  08DD              l_player_pick_item_00115:
2215  08DD  CD 00 00    	call	_audio_efecto
2216  08E0  21 00 00    	ld	hl,_player_str
2217  08E3  34          	inc	(hl)
2218  08E4  21 00 00    	ld	hl,_player_max_vita
2219  08E7  7E          	ld	a, (hl)
2220  08E8  D6 C8       	sub	a,0xc8
2221  08EA  30 4F       	jr	NC,l_player_pick_item_00131
2222  08EC  7E          	ld	a, (hl)
2223  08ED  C6 0A       	add	a,0x0a
2224  08EF  77          	ld	(hl), a
2225  08F0  CD 00 00    	call	_game_update_stats
2226  08F3  18 46       	jr	l_player_pick_item_00131
2227  08F5              l_player_pick_item_00118:
2228  08F5  CD 00 00    	call	_audio_efecto
2229  08F8  21 00 00    	ld	hl,_player_int
2230  08FB  34          	inc	(hl)
2231  08FC  21 00 00    	ld	hl,_player_max_mana
2232  08FF  7E          	ld	a, (hl)
2233  0900  D6 C8       	sub	a,0xc8
2234  0902  30 37       	jr	NC,l_player_pick_item_00131
2235  0904  7E          	ld	a, (hl)
2236  0905  C6 0A       	add	a,0x0a
2237  0907  77          	ld	(hl), a
2238  0908  CD 00 00    	call	_game_update_stats
2239  090B  18 2E       	jr	l_player_pick_item_00131
2240  090D              l_player_pick_item_00121:
2241  090D  CD 00 00    	call	_audio_efecto
2242  0910  21 00 00    	ld	hl,_player_int
2243  0913  34          	inc	(hl)
2244  0914  21 00 00    	ld	hl,_player_max_mana
2245  0917  7E          	ld	a, (hl)
2246  0918  D6 C8       	sub	a,0xc8
2247  091A  30 1F       	jr	NC,l_player_pick_item_00131
2248  091C  7E          	ld	a, (hl)
2249  091D  C6 0A       	add	a,0x0a
2250  091F  77          	ld	(hl), a
2251  0920  CD 00 00    	call	_game_update_stats
2252  0923  18 16       	jr	l_player_pick_item_00131
2253  0925              l_player_pick_item_00124:
2254  0925  CD 00 00    	call	_audio_efecto
2255  0928  21 00 00    	ld	hl,_player_int
2256  092B  34          	inc	(hl)
2257  092C  21 00 00    	ld	hl,_player_max_mana
2258  092F  7E          	ld	a, (hl)
2259  0930  D6 C8       	sub	a,0xc8
2260  0932  30 07       	jr	NC,l_player_pick_item_00131
2261  0934  7E          	ld	a, (hl)
2262  0935  C6 0A       	add	a,0x0a
2263  0937  77          	ld	(hl), a
2264  0938  CD 00 00    	call	_game_update_stats
2265  093B              l_player_pick_item_00131:
2266  093B  33          	inc	sp
2267  093C  DD E1       	pop	ix
2268  093E  C9          	ret
2269  093F              	SECTION code_compiler
2270  093F              ;	---------------------------------
2271  093F              ; Function player_hit_platform
2272  093F              ; ---------------------------------
2273  093F              _player_hit_platform:
2274  093F  CD 00 00    	call	___sdcc_enter_ix
2275  0942  F5          	push	af
2276  0943  F5          	push	af
2277  0944  3A 00 00    	ld	a,(_player_hit_lin)
2278  0947  B7          	or	a, a
2279  0948  C2 D9 0B    	jp	NZ, l_player_hit_platform_00145
2280  094B  21 07 00    	ld	hl,+(_lin + 0x0007)
2281  094E  4E          	ld	c, (hl)
2282  094F  3E 10       	ld	a,0x10
2283  0951  91          	sub	a, c
2284  0952  D2 D9 0B    	jp	NC, l_player_hit_platform_00145
2285  0955  01 00 00    	ld	bc,_scr_map
2286  0958  2A 00 00    	ld	hl,(_index1)
2287  095B  09          	add	hl,bc
2288  095C  7E          	ld	a,(hl)
2289  095D  D6 45       	sub	a,0x45
2290  095F  DA D9 0B    	jp	C, l_player_hit_platform_00145
2291  0962  2A 00 00    	ld	hl,(_curr_time)
2292  0965  22 0E 00    	ld	(_spr_timer + 0x000e),hl
2293  0968  3A 07 00    	ld	a,(_lin + 0x0007)
2294  096B  DD 77 FD    	ld	(ix-3),a
2295  096E  DD 77 FE    	ld	(ix-2),a
2296  0971  DD 36 FF 00 	ld	(ix-1),0x00
2297  0975  C6 F8       	add	a,0xf8
2298  0977  DD 77 FE    	ld	(ix-2),a
2299  097A  DD 7E FF    	ld	a,(ix-1)
2300  097D  CE FF       	adc	a,0xff
2301  097F  DD 77 FF    	ld	(ix-1),a
2302  0982  06 04       	ld	b,0x04
2303  0984  DD 4E FF    	ld	c,(ix-1)
2304  0987  DD 7E FE    	ld	a,(ix-2)
2305  098A              l_player_hit_platform_00252:
2306  098A  CB 29       	sra	c
2307  098C  1F          	rra
2308  098D  10 FB       	djnz	l_player_hit_platform_00252
2309  098F  DD 71 FF    	ld	(ix-1),c
2310  0992  DD 77 FE    	ld	(ix-2),a
2311  0995  07          	rlca
2312  0996  07          	rlca
2313  0997  07          	rlca
2314  0998  07          	rlca
2315  0999  E6 F0       	and	a,0xf0
2316  099B  C6 08       	add	a,0x08
2317  099D  32 00 00    	ld	(_player_hit_lin),a
2318  09A0  21 07 00    	ld	hl,+(_col + 0x0007)
2319  09A3  4E          	ld	c, (hl)
2320  09A4  CB 41       	bit	0, c
2321  09A6  20 06       	jr	NZ,l_player_hit_platform_00111
2322  09A8  21 00 00    	ld	hl,_player_hit_col
2323  09AB  71          	ld	(hl), c
2324  09AC  18 2D       	jr	l_player_hit_platform_00112
2325  09AE              l_player_hit_platform_00111:
2326  09AE  21 07 00    	ld	hl,+(_state + 0x0007)
2327  09B1  5E          	ld	e, (hl)
2328  09B2  41          	ld	b, c
2329  09B3  04          	inc	b
2330  09B4  0D          	dec	c
2331  09B5  CB 5B       	bit	3, e
2332  09B7  28 12       	jr	Z,l_player_hit_platform_00108
2333  09B9  3A 00 00    	ld	a,(_g_player_hit_right)
2334  09BC  B7          	or	a, a
2335  09BD  28 06       	jr	Z,l_player_hit_platform_00102
2336  09BF  21 00 00    	ld	hl,_player_hit_col
2337  09C2  70          	ld	(hl), b
2338  09C3  18 16       	jr	l_player_hit_platform_00112
2339  09C5              l_player_hit_platform_00102:
2340  09C5  21 00 00    	ld	hl,_player_hit_col
2341  09C8  71          	ld	(hl), c
2342  09C9  18 10       	jr	l_player_hit_platform_00112
2343  09CB              l_player_hit_platform_00108:
2344  09CB  3A 00 00    	ld	a,(_g_player_hit_left)
2345  09CE  B7          	or	a, a
2346  09CF  28 06       	jr	Z,l_player_hit_platform_00105
2347  09D1  21 00 00    	ld	hl,_player_hit_col
2348  09D4  71          	ld	(hl), c
2349  09D5  18 04       	jr	l_player_hit_platform_00112
2350  09D7              l_player_hit_platform_00105:
2351  09D7  21 00 00    	ld	hl,_player_hit_col
2352  09DA  70          	ld	(hl), b
2353  09DB              l_player_hit_platform_00112:
2354  09DB  2A 00 00    	ld	hl,(_index1)
2355  09DE  01 00 00    	ld	bc,_scr_map
2356  09E1  09          	add	hl,bc
2357  09E2  7E          	ld	a,(hl)
2358  09E3  FE 4D       	cp	a,0x4d
2359  09E5  20 42       	jr	NZ,l_player_hit_platform_00114
2360  09E7  E5          	push	hl
2361  09E8  2A 00 00    	ld	hl,(_index1)
2362  09EB  CD 00 00    	call	_game_match_back
2363  09EE  C1          	pop	bc
2364  09EF  7D          	ld	a,l
2365  09F0  02          	ld	(bc), a
2366  09F1  2A 00 00    	ld	hl,(_index1)
2367  09F4  CD 00 00    	call	_game_obj_set
2368  09F7  CD 00 00    	call	_audio_explosion
2369  09FA  21 00 00    	ld	hl,_index1
2370  09FD  7E          	ld	a, (hl)
2371  09FE  E6 0F       	and	a,0x0f
2372  0A00  87          	add	a, a
2373  0A01  57          	ld	d, a
2374  0A02  4E          	ld	c, (hl)
2375  0A03  23          	inc	hl
2376  0A04  5E          	ld	e, (hl)
2377  0A05  06 04       	ld	b,0x04
2378  0A07  79          	ld	a,c
2379  0A08              l_player_hit_platform_00258:
2380  0A08  CB 3B       	srl	e
2381  0A0A  1F          	rra
2382  0A0B  10 FB       	djnz	l_player_hit_platform_00258
2383  0A0D  07          	rlca
2384  0A0E  07          	rlca
2385  0A0F  07          	rlca
2386  0A10  07          	rlca
2387  0A11  E6 F0       	and	a,0xf0
2388  0A13  47          	ld	b, a
2389  0A14  21 00 00    	ld	hl,0x0000
2390  0A17  E5          	push	hl
2391  0A18  21 87 03    	ld	hl,0x0387
2392  0A1B  E5          	push	hl
2393  0A1C  58          	ld	e,b
2394  0A1D  D5          	push	de
2395  0A1E  CD 00 00    	call	_spr_add_anim
2396  0A21  F1          	pop	af
2397  0A22  F1          	pop	af
2398  0A23  F1          	pop	af
2399  0A24  2E 01       	ld	l,0x01
2400  0A26  C3 DB 0B    	jp	l_player_hit_platform_00148
2401  0A29              l_player_hit_platform_00114:
2402  0A29  FE 5A       	cp	a,0x5a
2403  0A2B  28 05       	jr	Z,l_player_hit_platform_00141
2404  0A2D  D6 5D       	sub	a,0x5d
2405  0A2F  C2 CD 0B    	jp	NZ,l_player_hit_platform_00142
2406  0A32              l_player_hit_platform_00141:
2407  0A32  3A 00 00    	ld	a,(_game_boss)
2408  0A35  B7          	or	a, a
2409  0A36  28 0B       	jr	Z,l_player_hit_platform_00174
2410  0A38  3A 00 00    	ld	a,(_game_mush_count)
2411  0A3B  B7          	or	a, a
2412  0A3C  28 05       	jr	Z,l_player_hit_platform_00174
2413  0A3E  2E 00       	ld	l,0x00
2414  0A40  C3 DB 0B    	jp	l_player_hit_platform_00148
2415  0A43              l_player_hit_platform_00174:
2416  0A43  DD 36 FC 00 	ld	(ix-4),0x00
2417  0A47              l_player_hit_platform_00138:
2418  0A47  DD 7E FC    	ld	a,(ix-4)
2419  0A4A  D6 07       	sub	a,0x07
2420  0A4C  D2 CD 0B    	jp	NC, l_player_hit_platform_00142
2421  0A4F  3E 00       	ld	a, +((_mush_index) & 0xFF)
2422  0A51  DD 86 FC    	add	a,(ix-4)
2423  0A54  6F          	ld	l, a
2424  0A55  3E 00       	ld	a, +((_mush_index) / 256)
2425  0A57  CE 00       	adc	a,0x00
2426  0A59  67          	ld	h, a
2427  0A5A  4E          	ld	c, (hl)
2428  0A5B  06 00       	ld	b,0x00
2429  0A5D  2A 00 00    	ld	hl,(_index1)
2430  0A60  AF          	xor	a,a
2431  0A61  ED 42       	sbc	hl,bc
2432  0A63  C2 C7 0B    	jp	NZ,l_player_hit_platform_00137
2433  0A66  3A 07 00    	ld	a,(_lin + 0x0007)
2434  0A69  07          	rlca
2435  0A6A  07          	rlca
2436  0A6B  07          	rlca
2437  0A6C  07          	rlca
2438  0A6D  E6 0F       	and	a,0x0f
2439  0A6F  07          	rlca
2440  0A70  07          	rlca
2441  0A71  07          	rlca
2442  0A72  07          	rlca
2443  0A73  E6 F0       	and	a,0xf0
2444  0A75  C6 E0       	add	a,0xe0
2445  0A77  32 00 00    	ld	(_s_lin1),a
2446  0A7A  3A 00 00    	ld	a,(_player_hit_col)
2447  0A7D  CB 3F       	srl	a
2448  0A7F  87          	add	a, a
2449  0A80  32 00 00    	ld	(_s_col1),a
2450  0A83  0E 00       	ld	c,0x00
2451  0A85              l_player_hit_platform_00120:
2452  0A85  79          	ld	a, c
2453  0A86  D6 07       	sub	a,0x07
2454  0A88  30 18       	jr	NC,l_player_hit_platform_00122
2455  0A8A  06 00       	ld	b,0x00
2456  0A8C  21 00 00    	ld	hl,_mush_index
2457  0A8F  09          	add	hl, bc
2458  0A90  46          	ld	b, (hl)
2459  0A91  1E 00       	ld	e,0x00
2460  0A93  21 00 00    	ld	hl,_index1
2461  0A96  7E          	ld	a, (hl)
2462  0A97  90          	sub	a, b
2463  0A98  20 05       	jr	NZ,l_player_hit_platform_00264
2464  0A9A  23          	inc	hl
2465  0A9B  7E          	ld	a, (hl)
2466  0A9C  93          	sub	a, e
2467  0A9D  28 03       	jr	Z,l_player_hit_platform_00122
2468  0A9F              l_player_hit_platform_00264:
2469  0A9F  0C          	inc	c
2470  0AA0  18 E3       	jr	l_player_hit_platform_00120
2471  0AA2              l_player_hit_platform_00122:
2472  0AA2  06 00       	ld	b,0x00
2473  0AA4  21 00 00    	ld	hl,_mush_class
2474  0AA7  09          	add	hl, bc
2475  0AA8  7E          	ld	a, (hl)
2476  0AA9  FE 79       	cp	a,0x79
2477  0AAB  28 18       	jr	Z,l_player_hit_platform_00123
2478  0AAD  FE 7A       	cp	a,0x7a
2479  0AAF  28 2F       	jr	Z,l_player_hit_platform_00124
2480  0AB1  FE 7B       	cp	a,0x7b
2481  0AB3  28 5F       	jr	Z,l_player_hit_platform_00126
2482  0AB5  FE 7C       	cp	a,0x7c
2483  0AB7  28 41       	jr	Z,l_player_hit_platform_00125
2484  0AB9  FE 7D       	cp	a,0x7d
2485  0ABB  CA 48 0B    	jp	Z,l_player_hit_platform_00128
2486  0ABE  D6 7E       	sub	a,0x7e
2487  0AC0  28 6C       	jr	Z,l_player_hit_platform_00127
2488  0AC2  C3 60 0B    	jp	l_player_hit_platform_00129
2489  0AC5              l_player_hit_platform_00123:
2490  0AC5  2E 02       	ld	l,0x02
2491  0AC7  CD 00 00    	call	_zx_border_fastcall
2492  0ACA  3A 00 00    	ld	a,(_s_col1)
2493  0ACD  21 06 FF    	ld	hl,0xff06
2494  0AD0  E5          	push	hl
2495  0AD1  F5          	push	af
2496  0AD2  33          	inc	sp
2497  0AD3  3A 00 00    	ld	a,(_s_lin1)
2498  0AD6  F5          	push	af
2499  0AD7  33          	inc	sp
2500  0AD8  CD 00 00    	call	_enemy_init
2501  0ADB  F1          	pop	af
2502  0ADC  F1          	pop	af
2503  0ADD  C3 60 0B    	jp	l_player_hit_platform_00129
2504  0AE0              l_player_hit_platform_00124:
2505  0AE0  2E 02       	ld	l,0x02
2506  0AE2  CD 00 00    	call	_zx_border_fastcall
2507  0AE5  3A 00 00    	ld	a,(_s_col1)
2508  0AE8  21 06 01    	ld	hl,0x0106
2509  0AEB  E5          	push	hl
2510  0AEC  F5          	push	af
2511  0AED  33          	inc	sp
2512  0AEE  3A 00 00    	ld	a,(_s_lin1)
2513  0AF1  F5          	push	af
2514  0AF2  33          	inc	sp
2515  0AF3  CD 00 00    	call	_enemy_init
2516  0AF6  F1          	pop	af
2517  0AF7  F1          	pop	af
2518  0AF8  18 66       	jr	l_player_hit_platform_00129
2519  0AFA              l_player_hit_platform_00125:
2520  0AFA  2E 01       	ld	l,0x01
2521  0AFC  CD 00 00    	call	_zx_border_fastcall
2522  0AFF  3A 00 00    	ld	a,(_s_col1)
2523  0B02  21 07 01    	ld	hl,0x0107
2524  0B05  E5          	push	hl
2525  0B06  F5          	push	af
2526  0B07  33          	inc	sp
2527  0B08  3A 00 00    	ld	a,(_s_lin1)
2528  0B0B  F5          	push	af
2529  0B0C  33          	inc	sp
2530  0B0D  CD 00 00    	call	_enemy_init
2531  0B10  F1          	pop	af
2532  0B11  F1          	pop	af
2533  0B12  18 4C       	jr	l_player_hit_platform_00129
2534  0B14              l_player_hit_platform_00126:
2535  0B14  2E 01       	ld	l,0x01
2536  0B16  CD 00 00    	call	_zx_border_fastcall
2537  0B19  3A 00 00    	ld	a,(_s_col1)
2538  0B1C  21 07 FF    	ld	hl,0xff07
2539  0B1F  E5          	push	hl
2540  0B20  F5          	push	af
2541  0B21  33          	inc	sp
2542  0B22  3A 00 00    	ld	a,(_s_lin1)
2543  0B25  F5          	push	af
2544  0B26  33          	inc	sp
2545  0B27  CD 00 00    	call	_enemy_init
2546  0B2A  F1          	pop	af
2547  0B2B  F1          	pop	af
2548  0B2C  18 32       	jr	l_player_hit_platform_00129
2549  0B2E              l_player_hit_platform_00127:
2550  0B2E  2E 04       	ld	l,0x04
2551  0B30  CD 00 00    	call	_zx_border_fastcall
2552  0B33  3A 00 00    	ld	a,(_s_col1)
2553  0B36  21 08 01    	ld	hl,0x0108
2554  0B39  E5          	push	hl
2555  0B3A  F5          	push	af
2556  0B3B  33          	inc	sp
2557  0B3C  3A 00 00    	ld	a,(_s_lin1)
2558  0B3F  F5          	push	af
2559  0B40  33          	inc	sp
2560  0B41  CD 00 00    	call	_enemy_init
2561  0B44  F1          	pop	af
2562  0B45  F1          	pop	af
2563  0B46  18 18       	jr	l_player_hit_platform_00129
2564  0B48              l_player_hit_platform_00128:
2565  0B48  2E 04       	ld	l,0x04
2566  0B4A  CD 00 00    	call	_zx_border_fastcall
2567  0B4D  3A 00 00    	ld	a,(_s_col1)
2568  0B50  21 08 FF    	ld	hl,0xff08
2569  0B53  E5          	push	hl
2570  0B54  F5          	push	af
2571  0B55  33          	inc	sp
2572  0B56  3A 00 00    	ld	a,(_s_lin1)
2573  0B59  F5          	push	af
2574  0B5A  33          	inc	sp
2575  0B5B  CD 00 00    	call	_enemy_init
2576  0B5E  F1          	pop	af
2577  0B5F  F1          	pop	af
2578  0B60              l_player_hit_platform_00129:
2579  0B60  21 00 00    	ld	hl,_game_mush_count
2580  0B63  34          	inc	(hl)
2581  0B64  3A 00 00    	ld	a,(_game_boss)
2582  0B67  B7          	or	a, a
2583  0B68  20 5D       	jr	NZ,l_player_hit_platform_00137
2584  0B6A  3A 00 00    	ld	a,(_index1)
2585  0B6D  C6 F0       	add	a,0xf0
2586  0B6F  32 00 00    	ld	(_index0),a
2587  0B72  3A 01 00    	ld	a,(_index1 + 1)
2588  0B75  CE FF       	adc	a,0xff
2589  0B77  21 01 00    	ld	hl,_index0 + 1
2590  0B7A  77          	ld	(hl), a
2591  0B7B  3E 00       	ld	a, +((_scr_map) & 0xFF)
2592  0B7D  2B          	dec	hl
2593  0B7E  86          	add	a, (hl)
2594  0B7F  4F          	ld	c, a
2595  0B80  3E 00       	ld	a, +((_scr_map) / 256)
2596  0B82  23          	inc	hl
2597  0B83  8E          	adc	a, (hl)
2598  0B84  47          	ld	b, a
2599  0B85  C5          	push	bc
2600  0B86  2B          	dec	hl
2601  0B87  7E          	ld	a, (hl)
2602  0B88  23          	inc	hl
2603  0B89  66          	ld	h, (hl)
2604  0B8A  6F          	ld	l, a
2605  0B8B  CD 00 00    	call	_game_match_back
2606  0B8E  C1          	pop	bc
2607  0B8F  7D          	ld	a,l
2608  0B90  02          	ld	(bc), a
2609  0B91  01 00 00    	ld	bc,_scr_map
2610  0B94  2A 00 00    	ld	hl,(_index1)
2611  0B97  09          	add	hl,bc
2612  0B98  7E          	ld	a,(hl)
2613  0B99  FE 5A       	cp	a,0x5a
2614  0B9B  4D          	ld	c,l
2615  0B9C  44          	ld	b,h
2616  0B9D  28 04       	jr	Z,l_player_hit_platform_00130
2617  0B9F  D6 5D       	sub	a,0x5d
2618  0BA1  20 05       	jr	NZ,l_player_hit_platform_00131
2619  0BA3              l_player_hit_platform_00130:
2620  0BA3  3E 4F       	ld	a,0x4f
2621  0BA5  02          	ld	(bc), a
2622  0BA6  18 03       	jr	l_player_hit_platform_00132
2623  0BA8              l_player_hit_platform_00131:
2624  0BA8  3E 54       	ld	a,0x54
2625  0BAA  02          	ld	(bc), a
2626  0BAB              l_player_hit_platform_00132:
2627  0BAB  2A 00 00    	ld	hl,(_index1)
2628  0BAE  01 F0 FF    	ld	bc,0xfff0
2629  0BB1  09          	add	hl,bc
2630  0BB2  CD 00 00    	call	_game_obj_set
2631  0BB5  3A 00 00    	ld	a,(_s_lin1)
2632  0BB8  C6 10       	add	a,0x10
2633  0BBA  4F          	ld	c, a
2634  0BBB  3A 00 00    	ld	a, (_s_col1)
2635  0BBE  47          	ld	b,a
2636  0BBF  C5          	push	bc
2637  0BC0  3E 4F       	ld	a,0x4f
2638  0BC2  F5          	push	af
2639  0BC3  33          	inc	sp
2640  0BC4  CD 00 00    	call	_NIRVANAP_drawT_callee
2641  0BC7              l_player_hit_platform_00137:
2642  0BC7  DD 34 FC    	inc	(ix-4)
2643  0BCA  C3 47 0A    	jp	l_player_hit_platform_00138
2644  0BCD              l_player_hit_platform_00142:
2645  0BCD  CD 00 00    	call	_audio_golpe
2646  0BD0  2E 01       	ld	l,0x01
2647  0BD2  CD 00 00    	call	_spr_brick_anim
2648  0BD5  2E 01       	ld	l,0x01
2649  0BD7  18 02       	jr	l_player_hit_platform_00148
2650  0BD9              l_player_hit_platform_00145:
2651  0BD9  2E 00       	ld	l,0x00
2652  0BDB              l_player_hit_platform_00148:
2653  0BDB  DD F9       	ld	sp, ix
2654  0BDD  DD E1       	pop	ix
2655  0BDF  C9          	ret
2656  0BE0              	SECTION code_compiler
2657  0BE0              ;	---------------------------------
2658  0BE0              ; Function player_hit_platform_clear
2659  0BE0              ; ---------------------------------
2660  0BE0              _player_hit_platform_clear:
2661  0BE0  3E 04       	ld	a,0x04
2662  0BE2  F5          	push	af
2663  0BE3  33          	inc	sp
2664  0BE4  21 0E 00    	ld	hl, +(_spr_timer + 0x000e)
2665  0BE7  E5          	push	hl
2666  0BE8  CD 00 00    	call	_game_check_time
2667  0BEB  F1          	pop	af
2668  0BEC  33          	inc	sp
2669  0BED  7D          	ld	a, l
2670  0BEE  B7          	or	a, a
2671  0BEF  C8          	ret	Z
2672  0BF0  2A FF FF    	ld	hl,(_player_hit_col - 1)
2673  0BF3  3A 00 00    	ld	a,(_player_hit_lin)
2674  0BF6  6F          	ld	l,a
2675  0BF7  E5          	push	hl
2676  0BF8  CD 00 00    	call	_spr_calc_index
2677  0BFB  F1          	pop	af
2678  0BFC  22 00 00    	ld	(_index1),hl
2679  0BFF  2E 00       	ld	l,0x00
2680  0C01  CD 00 00    	call	_spr_brick_anim
2681  0C04  21 00 00    	ld	hl,_player_hit_lin
2682  0C07  36 00       	ld	(hl),0x00
2683  0C09  21 00 00    	ld	hl,_player_hit_col
2684  0C0C  36 00       	ld	(hl),0x00
2685  0C0E  C9          	ret
2686  0C0F              	SECTION code_compiler
2687  0C0F              ;	---------------------------------
2688  0C0F              ; Function player_score_add
2689  0C0F              ; ---------------------------------
2690  0C0F              _player_score_add:
2691  0C0F  ED 4B 00 00 	ld	bc,(_player_score)
2692  0C13  09          	add	hl,bc
2693  0C14  22 00 00    	ld	(_player_score),hl
2694  0C17  21 00 00    	ld	hl,_player_lvl
2695  0C1A  7E          	ld	a, (hl)
2696  0C1B  D6 0A       	sub	a,0x0a
2697  0C1D  30 45       	jr	NC,l_player_score_add_00104
2698  0C1F  01 00 00    	ld	bc,_player_lvl_table+0
2699  0C22  6E          	ld	l,(hl)
2700  0C23  26 00       	ld	h,0x00
2701  0C25  29          	add	hl, hl
2702  0C26  09          	add	hl, bc
2703  0C27  4E          	ld	c, (hl)
2704  0C28  23          	inc	hl
2705  0C29  46          	ld	b, (hl)
2706  0C2A  21 00 00    	ld	hl,_player_score
2707  0C2D  7E          	ld	a, (hl)
2708  0C2E  91          	sub	a, c
2709  0C2F  23          	inc	hl
2710  0C30  7E          	ld	a, (hl)
2711  0C31  98          	sbc	a, b
2712  0C32  38 30       	jr	C,l_player_score_add_00104
2713  0C34  21 00 00    	ld	hl,_player_lvl
2714  0C37  34          	inc	(hl)
2715  0C38  CD 00 00    	call	_game_update_stats
2716  0C3B  CD 00 00    	call	_spr_flatten
2717  0C3E  CD 00 00    	call	_audio_efecto
2718  0C41  21 16 00    	ld	hl,___str_2
2719  0C44  E5          	push	hl
2720  0C45  21 0C 0C    	ld	hl,0x0c0c
2721  0C48  E5          	push	hl
2722  0C49  CD 00 00    	call	_zx_print_str
2723  0C4C  AF          	xor	a, a
2724  0C4D  F5          	push	af
2725  0C4E  33          	inc	sp
2726  0C4F  21 3C 00    	ld	hl,0x003c
2727  0C52  E5          	push	hl
2728  0C53  21 0C 15    	ld	hl,0x150c
2729  0C56  E5          	push	hl
2730  0C57  3E 0C       	ld	a,0x0c
2731  0C59  F5          	push	af
2732  0C5A  33          	inc	sp
2733  0C5B  CD 00 00    	call	_game_colour_message
2734  0C5E  F1          	pop	af
2735  0C5F  F1          	pop	af
2736  0C60  F1          	pop	af
2737  0C61  CD 00 00    	call	_spr_unflatten
2738  0C64              l_player_score_add_00104:
2739  0C64  3A 00 00    	ld	a,(_game_score_top)
2740  0C67  21 00 00    	ld	hl,_player_score
2741  0C6A  96          	sub	a, (hl)
2742  0C6B  3A 01 00    	ld	a,(_game_score_top + 1)
2743  0C6E  23          	inc	hl
2744  0C6F  9E          	sbc	a, (hl)
2745  0C70  30 06       	jr	NC,l_player_score_add_00106
2746  0C72  2A 00 00    	ld	hl,(_player_score)
2747  0C75  22 00 00    	ld	(_game_score_top),hl
2748  0C78              l_player_score_add_00106:
2749  0C78  CD 00 00    	call	_game_print_score
2750  0C7B  C9          	ret
2751  0C7C              	SECTION rodata_compiler
2752  0016              ___str_2:
2753  0016  4C 45 56 45 4C 20 55 50 21 
                        	DEFM "LEVEL UP!"
2754  001F  00          	DEFB 0x00
2755  0020              	SECTION code_compiler
2756  0C7C              ;	---------------------------------
2757  0C7C              ; Function player_check_floor
2758  0C7C              ; ---------------------------------
2759  0C7C              _player_check_floor:
2760  0C7C  CD 00 00    	call	___sdcc_enter_ix
2761  0C7F  F5          	push	af
2762  0C80  F5          	push	af
2763  0C81  F5          	push	af
2764  0C82  21 07 00    	ld	hl,+(_col + 0x0007)
2765  0C85  56          	ld	d, (hl)
2766  0C86  3A 07 00    	ld	a,(_lin + 0x0007)
2767  0C89  C6 10       	add	a,0x10
2768  0C8B  5F          	ld	e, a
2769  0C8C  D5          	push	de
2770  0C8D  CD 00 00    	call	_spr_calc_index
2771  0C90  F1          	pop	af
2772  0C91  D1          	pop	de
2773  0C92  E5          	push	hl
2774  0C93  01 00 00    	ld	bc,_scr_map+0
2775  0C96  79          	ld	a, c
2776  0C97  DD 86 FA    	add	a,(ix-6)
2777  0C9A  DD 77 FE    	ld	(ix-2),a
2778  0C9D  78          	ld	a, b
2779  0C9E  DD 8E FB    	adc	a,(ix-5)
2780  0CA1  DD 6E FE    	ld	l,(ix-2)
2781  0CA4  DD 77 FF    	ld	(ix-1),a
2782  0CA7  67          	ld	h,a
2783  0CA8  7E          	ld	a, (hl)
2784  0CA9  DD 77 FD    	ld	(ix-3),a
2785  0CAC  E1          	pop	hl
2786  0CAD  E5          	push	hl
2787  0CAE  23          	inc	hl
2788  0CAF  09          	add	hl,bc
2789  0CB0  3A 00 00    	ld	a,(_s_lin0)
2790  0CB3  D6 90       	sub	a,0x90
2791  0CB5  4D          	ld	c,l
2792  0CB6  44          	ld	b,h
2793  0CB7  20 26       	jr	NZ,l_player_check_floor_00108
2794  0CB9  3A 00 00    	ld	a,(_map_heigth)
2795  0CBC  C5          	push	bc
2796  0CBD  F5          	push	af
2797  0CBE  33          	inc	sp
2798  0CBF  3A 00 00    	ld	a,(_scr_curr)
2799  0CC2  F5          	push	af
2800  0CC3  33          	inc	sp
2801  0CC4  CD 00 00    	call	__divuchar_callee
2802  0CC7  C1          	pop	bc
2803  0CC8  7D          	ld	a,l
2804  0CC9  3C          	inc	a
2805  0CCA  32 00 00    	ld	(_tmp1),a
2806  0CCD  21 00 00    	ld	hl,_map_heigth
2807  0CD0  96          	sub	a, (hl)
2808  0CD1  30 06       	jr	NC,l_player_check_floor_00102
2809  0CD3  DD 36 FD 00 	ld	(ix-3),0x00
2810  0CD7  18 16       	jr	l_player_check_floor_00109
2811  0CD9              l_player_check_floor_00102:
2812  0CD9  DD 36 FD 48 	ld	(ix-3),0x48
2813  0CDD  18 10       	jr	l_player_check_floor_00109
2814  0CDF              l_player_check_floor_00108:
2815  0CDF  3A 07 00    	ld	a,(_col + 0x0007)
2816  0CE2  0F          	rrca
2817  0CE3  38 06       	jr	C,l_player_check_floor_00105
2818  0CE5  DD 36 FC 00 	ld	(ix-4),0x00
2819  0CE9  18 04       	jr	l_player_check_floor_00109
2820  0CEB              l_player_check_floor_00105:
2821  0CEB  0A          	ld	a, (bc)
2822  0CEC  DD 77 FC    	ld	(ix-4),a
2823  0CEF              l_player_check_floor_00109:
2824  0CEF  DD 7E FD    	ld	a,(ix-3)
2825  0CF2  D6 3A       	sub	a,0x3a
2826  0CF4  38 07       	jr	C,l_player_check_floor_00132
2827  0CF6  DD 7E FD    	ld	a,(ix-3)
2828  0CF9  D6 60       	sub	a,0x60
2829  0CFB  38 32       	jr	C,l_player_check_floor_00128
2830  0CFD              l_player_check_floor_00132:
2831  0CFD  DD 7E FC    	ld	a,(ix-4)
2832  0D00  D6 3A       	sub	a,0x3a
2833  0D02  38 07       	jr	C,l_player_check_floor_00127
2834  0D04  DD 7E FC    	ld	a,(ix-4)
2835  0D07  D6 60       	sub	a,0x60
2836  0D09  38 24       	jr	C,l_player_check_floor_00128
2837  0D0B              l_player_check_floor_00127:
2838  0D0B  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
2839  0D0E  36 02       	ld	(hl),0x02
2840  0D10  21 00 00    	ld	hl,_s_state
2841  0D13  CB CE       	set	1, (hl)
2842  0D15  2E 00       	ld	l,0x00
2843  0D17  CD 40 06    	call	_player_check_stairs
2844  0D1A  3A 00 00    	ld	a,(_player_onstair)
2845  0D1D  B7          	or	a, a
2846  0D1E  C2 BD 0D    	jp	NZ, l_player_check_floor_00133
2847  0D21  3A 00 00    	ld	a,(_s_lin0)
2848  0D24  D6 90       	sub	a,0x90
2849  0D26  C2 BD 0D    	jp	NZ,l_player_check_floor_00133
2850  0D29  CD 00 00    	call	_spr_page_down
2851  0D2C  C3 BD 0D    	jp	l_player_check_floor_00133
2852  0D2F              l_player_check_floor_00128:
2853  0D2F  C5          	push	bc
2854  0D30  3E 10       	ld	a,0x10
2855  0D32  F5          	push	af
2856  0D33  33          	inc	sp
2857  0D34  21 00 00    	ld	hl,_player_brick_time
2858  0D37  E5          	push	hl
2859  0D38  CD 00 00    	call	_game_check_time
2860  0D3B  F1          	pop	af
2861  0D3C  33          	inc	sp
2862  0D3D  C1          	pop	bc
2863  0D3E  7D          	ld	a,l
2864  0D3F  B7          	or	a, a
2865  0D40  CA BD 0D    	jp	Z, l_player_check_floor_00133
2866  0D43  2A 00 00    	ld	hl,(_curr_time)
2867  0D46  22 00 00    	ld	(_player_brick_time),hl
2868  0D49  DD 7E FD    	ld	a,(ix-3)
2869  0D4C  D6 40       	sub	a,0x40
2870  0D4E  20 14       	jr	NZ,l_player_check_floor_00114
2871  0D50  E1          	pop	hl
2872  0D51  E5          	push	hl
2873  0D52  C5          	push	bc
2874  0D53  CD 00 00    	call	_game_match_back
2875  0D56  C1          	pop	bc
2876  0D57  5D          	ld	e,l
2877  0D58  DD 6E FE    	ld	l,(ix-2)
2878  0D5B  DD 66 FF    	ld	h,(ix-1)
2879  0D5E  73          	ld	(hl), e
2880  0D5F  C5          	push	bc
2881  0D60  CD C2 0D    	call	_player_gasta_brick
2882  0D63  C1          	pop	bc
2883  0D64              l_player_check_floor_00114:
2884  0D64  DD 7E FD    	ld	a,(ix-3)
2885  0D67  D6 3F       	sub	a,0x3f
2886  0D69  20 0D       	jr	NZ,l_player_check_floor_00116
2887  0D6B  DD 6E FE    	ld	l,(ix-2)
2888  0D6E  DD 66 FF    	ld	h,(ix-1)
2889  0D71  36 40       	ld	(hl),0x40
2890  0D73  C5          	push	bc
2891  0D74  CD C2 0D    	call	_player_gasta_brick
2892  0D77  C1          	pop	bc
2893  0D78              l_player_check_floor_00116:
2894  0D78  DD 7E FD    	ld	a,(ix-3)
2895  0D7B  D6 3E       	sub	a,0x3e
2896  0D7D  20 0D       	jr	NZ,l_player_check_floor_00118
2897  0D7F  DD 6E FE    	ld	l,(ix-2)
2898  0D82  DD 66 FF    	ld	h,(ix-1)
2899  0D85  36 3F       	ld	(hl),0x3f
2900  0D87  C5          	push	bc
2901  0D88  CD C2 0D    	call	_player_gasta_brick
2902  0D8B  C1          	pop	bc
2903  0D8C              l_player_check_floor_00118:
2904  0D8C  DD 7E FC    	ld	a,(ix-4)
2905  0D8F  D6 40       	sub	a,0x40
2906  0D91  20 0E       	jr	NZ,l_player_check_floor_00120
2907  0D93  E1          	pop	hl
2908  0D94  E5          	push	hl
2909  0D95  C5          	push	bc
2910  0D96  CD 00 00    	call	_game_match_back
2911  0D99  C1          	pop	bc
2912  0D9A  7D          	ld	a,l
2913  0D9B  02          	ld	(bc), a
2914  0D9C  C5          	push	bc
2915  0D9D  CD C2 0D    	call	_player_gasta_brick
2916  0DA0  C1          	pop	bc
2917  0DA1              l_player_check_floor_00120:
2918  0DA1  DD 7E FC    	ld	a,(ix-4)
2919  0DA4  D6 3F       	sub	a,0x3f
2920  0DA6  20 08       	jr	NZ,l_player_check_floor_00122
2921  0DA8  3E 40       	ld	a,0x40
2922  0DAA  02          	ld	(bc), a
2923  0DAB  C5          	push	bc
2924  0DAC  CD C2 0D    	call	_player_gasta_brick
2925  0DAF  C1          	pop	bc
2926  0DB0              l_player_check_floor_00122:
2927  0DB0  DD 7E FC    	ld	a,(ix-4)
2928  0DB3  D6 3E       	sub	a,0x3e
2929  0DB5  20 06       	jr	NZ,l_player_check_floor_00133
2930  0DB7  3E 3F       	ld	a,0x3f
2931  0DB9  02          	ld	(bc), a
2932  0DBA  CD C2 0D    	call	_player_gasta_brick
2933  0DBD              l_player_check_floor_00133:
2934  0DBD  DD F9       	ld	sp, ix
2935  0DBF  DD E1       	pop	ix
2936  0DC1  C9          	ret
2937  0DC2              	SECTION code_compiler
2938  0DC2              ;	---------------------------------
2939  0DC2              ; Function player_gasta_brick
2940  0DC2              ; ---------------------------------
2941  0DC2              _player_gasta_brick:
2942  0DC2  3A 00 00    	ld	a,(_s_lin0)
2943  0DC5  32 00 00    	ld	(_s_lin1),a
2944  0DC8  3A 00 00    	ld	a,(_s_col0)
2945  0DCB  32 00 00    	ld	(_s_col1),a
2946  0DCE  3A 07 00    	ld	a,(_lin + 0x0007)
2947  0DD1  C6 10       	add	a,0x10
2948  0DD3  32 00 00    	ld	(_s_lin0),a
2949  0DD6  3A 07 00    	ld	a,(_col + 0x0007)
2950  0DD9  32 00 00    	ld	(_s_col0),a
2951  0DDC  CD 00 00    	call	_spr_back_repaint
2952  0DDF  3A 00 00    	ld	a,(_s_lin1)
2953  0DE2  32 00 00    	ld	(_s_lin0),a
2954  0DE5  3A 00 00    	ld	a,(_s_col1)
2955  0DE8  32 00 00    	ld	(_s_col0),a
2956  0DEB  C9          	ret
2957  0DEC              	SECTION code_compiler
2958  0DEC              ;	---------------------------------
2959  0DEC              ; Function player_move_jump
2960  0DEC              ; ---------------------------------
2961  0DEC              _player_move_jump:
2962  0DEC  21 00 00    	ld	hl,_game_gravity
2963  0DEF  4E          	ld	c, (hl)
2964  0DF0  21 00 00    	ld	hl,_player_vel_y
2965  0DF3  7E          	ld	a, (hl)
2966  0DF4  81          	add	a, c
2967  0DF5  77          	ld	(hl), a
2968  0DF6  21 00 00    	ld	hl,_sprite_on_air
2969  0DF9  36 01       	ld	(hl),0x01
2970  0DFB  3A 00 00    	ld	a,(_player_vel_inc)
2971  0DFE  B7          	or	a, a
2972  0DFF  28 4A       	jr	Z,l_player_move_jump_00109
2973  0E01  3A 00 00    	ld	a,(_dirs)
2974  0E04  CB 07       	rlc	a
2975  0E06  E6 01       	and	a,0x01
2976  0E08  4F          	ld	c, a
2977  0E09  3A 00 00    	ld	a,(_game_2buttons)
2978  0E0C  B7          	or	a, a
2979  0E0D  28 06       	jr	Z,l_player_move_jump_00102
2980  0E0F  79          	ld	a, c
2981  0E10  EE 01       	xor	a,0x01
2982  0E12  4F          	ld	c, a
2983  0E13  18 15       	jr	l_player_move_jump_00103
2984  0E15              l_player_move_jump_00102:
2985  0E15  CB 41       	bit	0, c
2986  0E17  28 07       	jr	Z,l_player_move_jump_00154
2987  0E19  21 00 00    	ld	hl,_dirs
2988  0E1C  CB 46       	bit	0, (hl)
2989  0E1E  20 04       	jr	NZ,l_player_move_jump_00155
2990  0E20              l_player_move_jump_00154:
2991  0E20  0E 00       	ld	c,0x00
2992  0E22  18 02       	jr	l_player_move_jump_00156
2993  0E24              l_player_move_jump_00155:
2994  0E24  0E 01       	ld	c,0x01
2995  0E26              l_player_move_jump_00156:
2996  0E26  79          	ld	a, c
2997  0E27  EE 01       	xor	a,0x01
2998  0E29  4F          	ld	c, a
2999  0E2A              l_player_move_jump_00103:
3000  0E2A  79          	ld	a, c
3001  0E2B  B7          	or	a, a
3002  0E2C  28 1D       	jr	Z,l_player_move_jump_00109
3003  0E2E  3A 00 00    	ld	a,(_player_vel_y1)
3004  0E31  21 00 00    	ld	hl,_player_vel_y
3005  0E34  96          	sub	a, (hl)
3006  0E35  E2 3A 0E    	jp	PO, l_player_move_jump_00259
3007  0E38  EE 80       	xor	a,0x80
3008  0E3A              l_player_move_jump_00259:
3009  0E3A  F2 4B 0E    	jp	P, l_player_move_jump_00109
3010  0E3D  21 00 00    	ld	hl,_player_vel_y
3011  0E40  CB 7E       	bit	7,(hl)
3012  0E42  28 07       	jr	Z,l_player_move_jump_00109
3013  0E44  36 00       	ld	(hl),0x00
3014  0E46  21 00 00    	ld	hl,_player_vel_inc
3015  0E49  36 00       	ld	(hl),0x00
3016  0E4B              l_player_move_jump_00109:
3017  0E4B  3E 78       	ld	a,0x78
3018  0E4D  21 00 00    	ld	hl,_player_vel_y
3019  0E50  96          	sub	a, (hl)
3020  0E51  E2 56 0E    	jp	PO, l_player_move_jump_00260
3021  0E54  EE 80       	xor	a,0x80
3022  0E56              l_player_move_jump_00260:
3023  0E56  F2 5E 0E    	jp	P, l_player_move_jump_00111
3024  0E59  21 00 00    	ld	hl,_player_vel_y
3025  0E5C  36 78       	ld	(hl),0x78
3026  0E5E              l_player_move_jump_00111:
3027  0E5E  21 00 00    	ld	hl,_player_vel_y
3028  0E61  7E          	ld	a, (hl)
3029  0E62  EE 80       	xor	a,0x80
3030  0E64  D6 08       	sub	a,0x08
3031  0E66  30 02       	jr	NC,l_player_move_jump_00113
3032  0E68  36 88       	ld	(hl),0x88
3033  0E6A              l_player_move_jump_00113:
3034  0E6A  3A 00 00    	ld	a,(_player_vel_y)
3035  0E6D  4F          	ld	c,a
3036  0E6E  17          	rla
3037  0E6F  9F          	sbc	a, a
3038  0E70  47          	ld	b, a
3039  0E71  CB 41       	bit	0,c
3040  0E73  21 00 00    	ld	hl,_s_lin1
3041  0E76  71          	ld	(hl),c
3042  0E77  28 04       	jr	Z,l_player_move_jump_00115
3043  0E79  21 00 00    	ld	hl,_s_lin1
3044  0E7C  35          	dec	(hl)
3045  0E7D              l_player_move_jump_00115:
3046  0E7D  3A 07 00    	ld	a,(_lin + 0x0007)
3047  0E80  21 00 00    	ld	hl,_s_lin1
3048  0E83  86          	add	a, (hl)
3049  0E84  77          	ld	(hl), a
3050  0E85  CB 78       	bit	7, b
3051  0E87  28 5C       	jr	Z,l_player_move_jump_00141
3052  0E89  21 00 00    	ld	hl,_s_state
3053  0E8C  CD 00 00    	call	_spr_set_up
3054  0E8F  3E 90       	ld	a,0x90
3055  0E91  21 00 00    	ld	hl,_s_lin1
3056  0E94  96          	sub	a, (hl)
3057  0E95  30 11       	jr	NC,l_player_move_jump_00120
3058  0E97  CD 00 00    	call	_spr_page_up
3059  0E9A  7D          	ld	a, l
3060  0E9B  B7          	or	a, a
3061  0E9C  28 05       	jr	Z,l_player_move_jump_00117
3062  0E9E  2E 00       	ld	l,0x00
3063  0EA0  C3 9C 0F    	jp	l_player_move_jump_00152
3064  0EA3              l_player_move_jump_00117:
3065  0EA3  21 00 00    	ld	hl,_s_lin1
3066  0EA6  36 00       	ld	(hl),0x00
3067  0EA8              l_player_move_jump_00120:
3068  0EA8  21 07 00    	ld	hl,+(_col + 0x0007)
3069  0EAB  46          	ld	b, (hl)
3070  0EAC  C5          	push	bc
3071  0EAD  33          	inc	sp
3072  0EAE  3A 00 00    	ld	a,(_s_lin1)
3073  0EB1  F5          	push	af
3074  0EB2  33          	inc	sp
3075  0EB3  CD 00 00    	call	_game_check_map
3076  0EB6  F1          	pop	af
3077  0EB7  7C          	ld	a,h
3078  0EB8  B5          	or	a,l
3079  0EB9  28 21       	jr	Z,l_player_move_jump_00124
3080  0EBB  CD 3F 09    	call	_player_hit_platform
3081  0EBE  7D          	ld	a, l
3082  0EBF  B7          	or	a, a
3083  0EC0  28 12       	jr	Z,l_player_move_jump_00122
3084  0EC2  3A 07 00    	ld	a,(_lin + 0x0007)
3085  0EC5  07          	rlca
3086  0EC6  07          	rlca
3087  0EC7  07          	rlca
3088  0EC8  07          	rlca
3089  0EC9  E6 0F       	and	a,0x0f
3090  0ECB  07          	rlca
3091  0ECC  07          	rlca
3092  0ECD  07          	rlca
3093  0ECE  07          	rlca
3094  0ECF  E6 F0       	and	a,0xf0
3095  0ED1  32 07 00    	ld	((_lin + 0x0007)),a
3096  0ED4              l_player_move_jump_00122:
3097  0ED4  21 00 00    	ld	hl,_player_vel_y
3098  0ED7  36 00       	ld	(hl),0x00
3099  0ED9  C3 64 0F    	jp	l_player_move_jump_00142
3100  0EDC              l_player_move_jump_00124:
3101  0EDC  3A 00 00    	ld	a,(_s_lin1)
3102  0EDF  32 07 00    	ld	((_lin + 0x0007)),a
3103  0EE2  C3 64 0F    	jp	l_player_move_jump_00142
3104  0EE5              l_player_move_jump_00141:
3105  0EE5  21 00 00    	ld	hl,_s_state
3106  0EE8  CD 00 00    	call	_spr_set_down
3107  0EEB  3E 90       	ld	a,0x90
3108  0EED  21 00 00    	ld	hl,_s_lin1
3109  0EF0  96          	sub	a, (hl)
3110  0EF1  30 11       	jr	NC,l_player_move_jump_00130
3111  0EF3  CD 00 00    	call	_spr_page_down
3112  0EF6  7D          	ld	a, l
3113  0EF7  B7          	or	a, a
3114  0EF8  28 05       	jr	Z,l_player_move_jump_00127
3115  0EFA  2E 00       	ld	l,0x00
3116  0EFC  C3 9C 0F    	jp	l_player_move_jump_00152
3117  0EFF              l_player_move_jump_00127:
3118  0EFF  21 00 00    	ld	hl,_s_lin1
3119  0F02  36 90       	ld	(hl),0x90
3120  0F04              l_player_move_jump_00130:
3121  0F04  21 07 00    	ld	hl,+(_col + 0x0007)
3122  0F07  56          	ld	d, (hl)
3123  0F08  3A 00 00    	ld	a,(_s_lin1)
3124  0F0B  C6 10       	add	a,0x10
3125  0F0D  5F          	ld	e, a
3126  0F0E  D5          	push	de
3127  0F0F  CD 00 00    	call	_game_check_map
3128  0F12  F1          	pop	af
3129  0F13  7C          	ld	a,h
3130  0F14  B5          	or	a,l
3131  0F15  28 47       	jr	Z,l_player_move_jump_00138
3132  0F17  2E 00       	ld	l,0x00
3133  0F19  CD 40 06    	call	_player_check_stairs
3134  0F1C  3A 00 00    	ld	a,(_player_onstair)
3135  0F1F  B7          	or	a, a
3136  0F20  20 05       	jr	NZ,l_player_move_jump_00132
3137  0F22  2E 01       	ld	l,0x01
3138  0F24  CD 40 06    	call	_player_check_stairs
3139  0F27              l_player_move_jump_00132:
3140  0F27  3A 00 00    	ld	a,(_player_onstair)
3141  0F2A  B7          	or	a, a
3142  0F2B  20 12       	jr	NZ,l_player_move_jump_00134
3143  0F2D  3A 00 00    	ld	a,(_s_lin1)
3144  0F30  07          	rlca
3145  0F31  07          	rlca
3146  0F32  07          	rlca
3147  0F33  07          	rlca
3148  0F34  E6 0F       	and	a,0x0f
3149  0F36  07          	rlca
3150  0F37  07          	rlca
3151  0F38  07          	rlca
3152  0F39  07          	rlca
3153  0F3A  E6 F0       	and	a,0xf0
3154  0F3C  32 07 00    	ld	((_lin + 0x0007)),a
3155  0F3F              l_player_move_jump_00134:
3156  0F3F  21 00 00    	ld	hl,_player_vel_y
3157  0F42  36 00       	ld	(hl),0x00
3158  0F44  21 00 00    	ld	hl,_s_state
3159  0F47  7E          	ld	a,(hl)
3160  0F48  E6 FC       	and	a,+(0xfd&0xfe)
3161  0F4A  77          	ld	(hl),a
3162  0F4B  3A 07 00    	ld	a,(_lin + 0x0007)
3163  0F4E  D6 90       	sub	a,0x90
3164  0F50  38 03       	jr	C,l_player_move_jump_00136
3165  0F52  CD 00 00    	call	_spr_page_down
3166  0F55              l_player_move_jump_00136:
3167  0F55  21 07 00    	ld	hl, +(_colint + 0x0007)
3168  0F58  36 00       	ld	(hl),0x00
3169  0F5A  2E 01       	ld	l,0x01
3170  0F5C  18 3E       	jr	l_player_move_jump_00152
3171  0F5E              l_player_move_jump_00138:
3172  0F5E  3A 00 00    	ld	a,(_s_lin1)
3173  0F61  32 07 00    	ld	((_lin + 0x0007)),a
3174  0F64              l_player_move_jump_00142:
3175  0F64  21 00 00    	ld	hl,_s_state
3176  0F67  CB 5E       	bit	3, (hl)
3177  0F69  20 21       	jr	NZ,l_player_move_jump_00148
3178  0F6B  21 00 00    	ld	hl,_s_state
3179  0F6E  CB 56       	bit	2, (hl)
3180  0F70  20 1A       	jr	NZ,l_player_move_jump_00148
3181  0F72  21 00 00    	ld	hl,_dirs
3182  0F75  CB 56       	bit	2, (hl)
3183  0F77  28 06       	jr	Z,l_player_move_jump_00144
3184  0F79  21 00 00    	ld	hl,_s_state
3185  0F7C  CD 00 00    	call	_spr_set_left
3186  0F7F              l_player_move_jump_00144:
3187  0F7F  21 00 00    	ld	hl,_dirs
3188  0F82  CB 5E       	bit	3, (hl)
3189  0F84  28 06       	jr	Z,l_player_move_jump_00148
3190  0F86  21 00 00    	ld	hl,_s_state
3191  0F89  CD 00 00    	call	_spr_set_right
3192  0F8C              l_player_move_jump_00148:
3193  0F8C  CD 00 00    	call	_spr_move_horizontal
3194  0F8F  7D          	ld	a, l
3195  0F90  B7          	or	a, a
3196  0F91  28 07       	jr	Z,l_player_move_jump_00151
3197  0F93  21 00 00    	ld	hl,_s_state
3198  0F96  7E          	ld	a,(hl)
3199  0F97  E6 F3       	and	a,+(0xf7&0xfb)
3200  0F99  77          	ld	(hl),a
3201  0F9A              l_player_move_jump_00151:
3202  0F9A  2E 00       	ld	l,0x00
3203  0F9C              l_player_move_jump_00152:
3204  0F9C  C9          	ret
3205  0F9D              	SECTION code_compiler
3206  0F9D              ;	---------------------------------
3207  0F9D              ; Function player_open_door
3208  0F9D              ; ---------------------------------
3209  0F9D              _player_open_door:
3210  0F9D  CD 00 00    	call	___sdcc_enter_ix
3211  0FA0  0E 00       	ld	c,0x00
3212  0FA2  DD 7E 06    	ld	a,(ix+6)
3213  0FA5  D6 48       	sub	a,0x48
3214  0FA7  28 17       	jr	Z,l_player_open_door_00101
3215  0FA9  DD 7E 06    	ld	a,(ix+6)
3216  0FAC  D6 49       	sub	a,0x49
3217  0FAE  28 1F       	jr	Z,l_player_open_door_00104
3218  0FB0  DD 7E 06    	ld	a,(ix+6)
3219  0FB3  D6 4A       	sub	a,0x4a
3220  0FB5  28 27       	jr	Z,l_player_open_door_00107
3221  0FB7  DD 7E 06    	ld	a,(ix+6)
3222  0FBA  D6 4B       	sub	a,0x4b
3223  0FBC  28 2F       	jr	Z,l_player_open_door_00110
3224  0FBE  18 3A       	jr	l_player_open_door_00113
3225  0FC0              l_player_open_door_00101:
3226  0FC0  3A 00 00    	ld	a,(_player_keys)
3227  0FC3  B7          	or	a, a
3228  0FC4  28 34       	jr	Z,l_player_open_door_00113
3229  0FC6  2E 07       	ld	l,0x07
3230  0FC8  CD 00 00    	call	_zx_border_fastcall
3231  0FCB  0E 01       	ld	c,0x01
3232  0FCD  18 2B       	jr	l_player_open_door_00113
3233  0FCF              l_player_open_door_00104:
3234  0FCF  3A 01 00    	ld	a,(_player_keys + 0x0001)
3235  0FD2  B7          	or	a, a
3236  0FD3  28 25       	jr	Z,l_player_open_door_00113
3237  0FD5  2E 02       	ld	l,0x02
3238  0FD7  CD 00 00    	call	_zx_border_fastcall
3239  0FDA  0E 01       	ld	c,0x01
3240  0FDC  18 1C       	jr	l_player_open_door_00113
3241  0FDE              l_player_open_door_00107:
3242  0FDE  3A 02 00    	ld	a,(_player_keys + 0x0002)
3243  0FE1  B7          	or	a, a
3244  0FE2  28 16       	jr	Z,l_player_open_door_00113
3245  0FE4  2E 04       	ld	l,0x04
3246  0FE6  CD 00 00    	call	_zx_border_fastcall
3247  0FE9  0E 01       	ld	c,0x01
3248  0FEB  18 0D       	jr	l_player_open_door_00113
3249  0FED              l_player_open_door_00110:
3250  0FED  3A 03 00    	ld	a,(_player_keys + 0x0003)
3251  0FF0  B7          	or	a, a
3252  0FF1  28 07       	jr	Z,l_player_open_door_00113
3253  0FF3  2E 05       	ld	l,0x05
3254  0FF5  CD 00 00    	call	_zx_border_fastcall
3255  0FF8  0E 01       	ld	c,0x01
3256  0FFA              l_player_open_door_00113:
3257  0FFA  79          	ld	a, c
3258  0FFB  B7          	or	a, a
3259  0FFC  20 06       	jr	NZ,l_player_open_door_00114
3260  0FFE  3A 00 00    	ld	a,(_game_inmune)
3261  1001  B7          	or	a, a
3262  1002  28 23       	jr	Z,l_player_open_door_00115
3263  1004              l_player_open_door_00114:
3264  1004  CD 00 00    	call	_audio_pierto_abierta
3265  1007  3E 00       	ld	a, +((_scr_map) & 0xFF)
3266  1009  DD 86 04    	add	a,(ix+4)
3267  100C  4F          	ld	c, a
3268  100D  3E 00       	ld	a, +((_scr_map) / 256)
3269  100F  DD 8E 05    	adc	a,(ix+5)
3270  1012  47          	ld	b, a
3271  1013  AF          	xor	a, a
3272  1014  02          	ld	(bc), a
3273  1015  DD 6E 04    	ld	l,(ix+4)
3274  1018  DD 66 05    	ld	h,(ix+5)
3275  101B  CD 00 00    	call	_game_obj_set
3276  101E  21 04 00    	ld	hl,0x0004
3277  1021  39          	add	hl, sp
3278  1022  CD 00 00    	call	_spr_draw_index
3279  1025  18 03       	jr	l_player_open_door_00118
3280  1027              l_player_open_door_00115:
3281  1027  CD 00 00    	call	_audio_sin_mana
3282  102A              l_player_open_door_00118:
3283  102A  DD E1       	pop	ix
3284  102C  C9          	ret
3285  102D              	SECTION code_compiler
3286  102D              ;	---------------------------------
3287  102D              ; Function player_lost_life
3288  102D              ; ---------------------------------
3289  102D              _player_lost_life:
3290  102D  CD 00 00    	call	___sdcc_enter_ix
3291  1030  F5          	push	af
3292  1031  21 00 00    	ld	hl,_player_vita
3293  1034  36 00       	ld	(hl),0x00
3294  1036  CD 00 00    	call	_game_update_stats
3295  1039  3A 07 00    	ld	a,(_lin + 7)
3296  103C  32 00 00    	ld	(_s_lin0),a
3297  103F  3A 07 00    	ld	a,(_col + 7)
3298  1042  32 00 00    	ld	(_s_col0),a
3299  1045  CD 00 00    	call	_spr_init_effects
3300  1048  06 00       	ld	b,0x00
3301  104A              l_player_lost_life_00121:
3302  104A  C5          	push	bc
3303  104B  21 00 00    	ld	hl,0x0000
3304  104E  E5          	push	hl
3305  104F  AF          	xor	a, a
3306  1050  48          	ld	c,b
3307  1051  47          	ld	b,a
3308  1052  C5          	push	bc
3309  1053  CD 00 00    	call	_NIRVANAP_spriteT_callee
3310  1056  C1          	pop	bc
3311  1057  04          	inc	b
3312  1058  3E 07       	ld	a,0x07
3313  105A  90          	sub	a, b
3314  105B  30 ED       	jr	NC,l_player_lost_life_00121
3315  105D  CD 00 00    	call	_audio_explosion
3316  1060  3A 00 00    	ld	a,(_s_lin0)
3317  1063  C6 F0       	add	a,0xf0
3318  1065  47          	ld	b, a
3319  1066  3A 00 00    	ld	a,(_s_col0)
3320  1069  21 00 00    	ld	hl,0x0000
3321  106C  E5          	push	hl
3322  106D  21 87 03    	ld	hl,0x0387
3323  1070  E5          	push	hl
3324  1071  48          	ld	c,b
3325  1072  47          	ld	b,a
3326  1073  C5          	push	bc
3327  1074  CD 00 00    	call	_spr_add_anim
3328  1077  F1          	pop	af
3329  1078  F1          	pop	af
3330  1079  F1          	pop	af
3331  107A  21 00 00    	ld	hl,_s_col0
3332  107D  46          	ld	b, (hl)
3333  107E  05          	dec	b
3334  107F  05          	dec	b
3335  1080  21 00 00    	ld	hl,0x0000
3336  1083  E5          	push	hl
3337  1084  21 87 03    	ld	hl,0x0387
3338  1087  E5          	push	hl
3339  1088  C5          	push	bc
3340  1089  33          	inc	sp
3341  108A  3A 00 00    	ld	a,(_s_lin0)
3342  108D  F5          	push	af
3343  108E  33          	inc	sp
3344  108F  CD 00 00    	call	_spr_add_anim
3345  1092  F1          	pop	af
3346  1093  F1          	pop	af
3347  1094  21 00 00    	ld	hl,0x0000
3348  1097  E3          	ex	(sp),hl
3349  1098  3A 00 00    	ld	a,(_s_col0)
3350  109B  21 87 03    	ld	hl,0x0387
3351  109E  E5          	push	hl
3352  109F  F5          	push	af
3353  10A0  33          	inc	sp
3354  10A1  3A 00 00    	ld	a,(_s_lin0)
3355  10A4  F5          	push	af
3356  10A5  33          	inc	sp
3357  10A6  CD 00 00    	call	_spr_add_anim
3358  10A9  F1          	pop	af
3359  10AA  F1          	pop	af
3360  10AB  F1          	pop	af
3361  10AC  21 00 00    	ld	hl,_s_col0
3362  10AF  46          	ld	b, (hl)
3363  10B0  04          	inc	b
3364  10B1  04          	inc	b
3365  10B2  21 00 00    	ld	hl,0x0000
3366  10B5  E5          	push	hl
3367  10B6  21 87 03    	ld	hl,0x0387
3368  10B9  E5          	push	hl
3369  10BA  C5          	push	bc
3370  10BB  33          	inc	sp
3371  10BC  3A 00 00    	ld	a,(_s_lin0)
3372  10BF  F5          	push	af
3373  10C0  33          	inc	sp
3374  10C1  CD 00 00    	call	_spr_add_anim
3375  10C4  F1          	pop	af
3376  10C5  F1          	pop	af
3377  10C6  F1          	pop	af
3378  10C7  3A 00 00    	ld	a,(_s_lin0)
3379  10CA  C6 10       	add	a,0x10
3380  10CC  47          	ld	b, a
3381  10CD  3A 00 00    	ld	a,(_s_col0)
3382  10D0  21 00 00    	ld	hl,0x0000
3383  10D3  E5          	push	hl
3384  10D4  21 87 03    	ld	hl,0x0387
3385  10D7  E5          	push	hl
3386  10D8  48          	ld	c,b
3387  10D9  47          	ld	b,a
3388  10DA  C5          	push	bc
3389  10DB  CD 00 00    	call	_spr_add_anim
3390  10DE  F1          	pop	af
3391  10DF  F1          	pop	af
3392  10E0  F1          	pop	af
3393  10E1  2E 00       	ld	l,0x00
3394  10E3  CD 00 00    	call	_zx_border_fastcall
3395  10E6  DD 36 FE 01 	ld	(ix-2),0x01
3396  10EA  2A 00 00    	ld	hl,(_curr_time)
3397  10ED  22 00 00    	ld	(_anim_time),hl
3398  10F0              l_player_lost_life_00107:
3399  10F0  DD 7E FE    	ld	a,(ix-2)
3400  10F3  B7          	or	a, a
3401  10F4  28 28       	jr	Z,l_player_lost_life_00109
3402  10F6  3E 0C       	ld	a,0x0c
3403  10F8  F5          	push	af
3404  10F9  33          	inc	sp
3405  10FA  21 00 00    	ld	hl,_anim_time
3406  10FD  E5          	push	hl
3407  10FE  CD 00 00    	call	_game_check_time
3408  1101  F1          	pop	af
3409  1102  33          	inc	sp
3410  1103  7D          	ld	a, l
3411  1104  B7          	or	a, a
3412  1105  28 E9       	jr	Z,l_player_lost_life_00107
3413  1107  2A 00 00    	ld	hl,(_curr_time)
3414  110A  22 00 00    	ld	(_anim_time),hl
3415  110D  3A 00 00    	ld	a,(_anim_count)
3416  1110  B7          	or	a,a
3417  1111  28 05       	jr	Z,l_player_lost_life_00103
3418  1113  CD 00 00    	call	_spr_play_anim
3419  1116  18 D8       	jr	l_player_lost_life_00107
3420  1118              l_player_lost_life_00103:
3421  1118  DD 36 FE 00 	ld	(ix-2),0x00
3422  111C  18 D2       	jr	l_player_lost_life_00107
3423  111E              l_player_lost_life_00109:
3424  111E  CD 00 00    	call	_audio_lotr_lose_a_life
3425  1121  3A 00 00    	ld	a,(_game_boss)
3426  1124  B7          	or	a, a
3427  1125  28 11       	jr	Z,l_player_lost_life_00135
3428  1127  3A 00 00    	ld	a,(_boss_lin)
3429  112A  32 00 00    	ld	(_s_lin1),a
3430  112D  3A 00 00    	ld	a,(_boss_col)
3431  1130  32 00 00    	ld	(_s_col1),a
3432  1133  CD 00 00    	call	_boss_draw
3433  1136  18 40       	jr	l_player_lost_life_00115
3434  1138              l_player_lost_life_00135:
3435  1138  0E 00       	ld	c,0x00
3436  113A              l_player_lost_life_00123:
3437  113A  06 00       	ld	b,0x00
3438  113C  21 00 00    	ld	hl,_class
3439  113F  09          	add	hl, bc
3440  1140  7E          	ld	a, (hl)
3441  1141  B7          	or	a, a
3442  1142  28 2E       	jr	Z,l_player_lost_life_00124
3443  1144  06 00       	ld	b,0x00
3444  1146  21 00 00    	ld	hl,_col
3445  1149  09          	add	hl, bc
3446  114A  5E          	ld	e, (hl)
3447  114B  06 00       	ld	b,0x00
3448  114D  21 00 00    	ld	hl,_lin
3449  1150  09          	add	hl, bc
3450  1151  56          	ld	d, (hl)
3451  1152  06 00       	ld	b,0x00
3452  1154  21 00 00    	ld	hl,_tile
3453  1157  09          	add	hl, bc
3454  1158  7E          	ld	a, (hl)
3455  1159  DD 77 FF    	ld	(ix-1),a
3456  115C  06 00       	ld	b,0x00
3457  115E  21 00 00    	ld	hl,_colint
3458  1161  09          	add	hl, bc
3459  1162  6E          	ld	l, (hl)
3460  1163  DD 7E FF    	ld	a,(ix-1)
3461  1166  85          	add	a, l
3462  1167  47          	ld	b, a
3463  1168  C5          	push	bc
3464  1169  7B          	ld	a, e
3465  116A  5A          	ld	e,d
3466  116B  57          	ld	d,a
3467  116C  D5          	push	de
3468  116D  C5          	push	bc
3469  116E  CD 00 00    	call	_NIRVANAP_spriteT_callee
3470  1171  C1          	pop	bc
3471  1172              l_player_lost_life_00124:
3472  1172  0C          	inc	c
3473  1173  79          	ld	a, c
3474  1174  D6 07       	sub	a,0x07
3475  1176  38 C2       	jr	C,l_player_lost_life_00123
3476  1178              l_player_lost_life_00115:
3477  1178  3A 00 00    	ld	a,(_game_inf_lives)
3478  117B  B7          	or	a, a
3479  117C  20 04       	jr	NZ,l_player_lost_life_00117
3480  117E  21 00 00    	ld	hl,_player_lives
3481  1181  35          	dec	(hl)
3482  1182              l_player_lost_life_00117:
3483  1182  21 00 00    	ld	hl,_player_mana
3484  1185  36 64       	ld	(hl),0x64
3485  1187  21 00 00    	ld	hl,_player_vita
3486  118A  36 64       	ld	(hl),0x64
3487  118C  3A 00 00    	ld	a,(_player_lives)
3488  118F  B7          	or	a, a
3489  1190  28 1D       	jr	Z,l_player_lost_life_00119
3490  1192  21 F4 01    	ld	hl,0x01f4
3491  1195  CD 00 00    	call	_z80_delay_ms_fastcall
3492  1198  3A 00 00    	ld	a,(_game_checkpoint_col)
3493  119B  32 00 00    	ld	(_player_col_scr),a
3494  119E  3A 00 00    	ld	a,(_game_checkpoint_lin)
3495  11A1  32 00 00    	ld	(_player_lin_scr),a
3496  11A4  3A 00 00    	ld	a,(_game_checkpoint_scr)
3497  11A7  32 00 00    	ld	(_scr_curr),a
3498  11AA  CD 00 00    	call	_game_round_init
3499  11AD  18 0A       	jr	l_player_lost_life_00125
3500  11AF              l_player_lost_life_00119:
3501  11AF  21 00 00    	ld	hl,_player_lives
3502  11B2  36 00       	ld	(hl),0x00
3503  11B4  21 00 00    	ld	hl,_game_over
3504  11B7  36 01       	ld	(hl),0x01
3505  11B9              l_player_lost_life_00125:
3506  11B9  F1          	pop	af
3507  11BA  DD E1       	pop	ix
3508  11BC  C9          	ret
3509  11BD              	SECTION code_compiler
3510  11BD              ;	---------------------------------
3511  11BD              ; Function player_damage
3512  11BD              ; ---------------------------------
3513  11BD              _player_damage:
3514  11BD  7D          	ld	a,l
3515  11BE  4D          	ld	c,l
3516  11BF  21 00 00    	ld	hl,_player_vita
3517  11C2  96          	sub	a, (hl)
3518  11C3  30 1A       	jr	NC,l_player_damage_00104
3519  11C5  3A 00 00    	ld	a,(_game_inmune)
3520  11C8  B7          	or	a, a
3521  11C9  20 06       	jr	NZ,l_player_damage_00102
3522  11CB  21 00 00    	ld	hl,_player_vita
3523  11CE  7E          	ld	a, (hl)
3524  11CF  91          	sub	a, c
3525  11D0  77          	ld	(hl), a
3526  11D1              l_player_damage_00102:
3527  11D1  2A 00 00    	ld	hl,(_curr_time)
3528  11D4  22 00 00    	ld	(_player_hit_time),hl
3529  11D7  CD 00 00    	call	_audio_golpe
3530  11DA  CD 00 00    	call	_game_update_stats
3531  11DD  18 03       	jr	l_player_damage_00106
3532  11DF              l_player_damage_00104:
3533  11DF  CD 2D 10    	call	_player_lost_life
3534  11E2              l_player_damage_00106:
3535  11E2  C9          	ret
3536  11E3              	SECTION IGNORE
3537  0000              
