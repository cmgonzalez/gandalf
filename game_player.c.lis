1     0000              MODULE game_player_c
2     0000              
3     0000              ;--------------------------------------------------------
4     0000              ; File Created by SDCC : free open source ANSI-C Compiler
5     0000              ; Version 3.6.5 #9958 (Mac OS X i386)
6     0000              ;--------------------------------------------------------
7     0000              ; Processed by Z88DK
8     0000              ;--------------------------------------------------------
9     0000              
10    0000              	EXTERN __divschar
11    0000              	EXTERN __divschar_callee
12    0000              	EXTERN __divsint
13    0000              	EXTERN __divsint_callee
14    0000              	EXTERN __divslong
15    0000              	EXTERN __divslong_callee
16    0000              	EXTERN __divslonglong
17    0000              	EXTERN __divslonglong_callee
18    0000              	EXTERN __divsuchar
19    0000              	EXTERN __divsuchar_callee
20    0000              	EXTERN __divuchar
21    0000              	EXTERN __divuchar_callee
22    0000              	EXTERN __divuint
23    0000              	EXTERN __divuint_callee
24    0000              	EXTERN __divulong
25    0000              	EXTERN __divulong_callee
26    0000              	EXTERN __divulonglong
27    0000              	EXTERN __divulonglong_callee
28    0000              	EXTERN __divuschar
29    0000              	EXTERN __divuschar_callee
30    0000              	EXTERN __modschar
31    0000              	EXTERN __modschar_callee
32    0000              	EXTERN __modsint
33    0000              	EXTERN __modsint_callee
34    0000              	EXTERN __modslong
35    0000              	EXTERN __modslong_callee
36    0000              	EXTERN __modslonglong
37    0000              	EXTERN __modslonglong_callee
38    0000              	EXTERN __modsuchar
39    0000              	EXTERN __modsuchar_callee
40    0000              	EXTERN __moduchar
41    0000              	EXTERN __moduchar_callee
42    0000              	EXTERN __moduint
43    0000              	EXTERN __moduint_callee
44    0000              	EXTERN __modulong
45    0000              	EXTERN __modulong_callee
46    0000              	EXTERN __modulonglong
47    0000              	EXTERN __modulonglong_callee
48    0000              	EXTERN __moduschar
49    0000              	EXTERN __moduschar_callee
50    0000              	EXTERN __mulint
51    0000              	EXTERN __mulint_callee
52    0000              	EXTERN __mullong
53    0000              	EXTERN __mullong_callee
54    0000              	EXTERN __mullonglong
55    0000              	EXTERN __mullonglong_callee
56    0000              	EXTERN __mulschar
57    0000              	EXTERN __mulschar_callee
58    0000              	EXTERN __mulsuchar
59    0000              	EXTERN __mulsuchar_callee
60    0000              	EXTERN __muluschar
61    0000              	EXTERN __muluschar_callee
62    0000              	EXTERN __rlslonglong
63    0000              	EXTERN __rlslonglong_callee
64    0000              	EXTERN __rlulonglong
65    0000              	EXTERN __rlulonglong_callee
66    0000              	EXTERN __rrslonglong
67    0000              	EXTERN __rrslonglong_callee
68    0000              	EXTERN __rrulonglong
69    0000              	EXTERN __rrulonglong_callee
70    0000              	EXTERN ___sdcc_call_hl
71    0000              	EXTERN ___sdcc_call_iy
72    0000              	EXTERN ___sdcc_enter_ix
73    0000              	EXTERN _banked_call
74    0000              	EXTERN _banked_ret
75    0000              	EXTERN ___fs2schar
76    0000              	EXTERN ___fs2schar_callee
77    0000              	EXTERN ___fs2sint
78    0000              	EXTERN ___fs2sint_callee
79    0000              	EXTERN ___fs2slong
80    0000              	EXTERN ___fs2slong_callee
81    0000              	EXTERN ___fs2slonglong
82    0000              	EXTERN ___fs2slonglong_callee
83    0000              	EXTERN ___fs2uchar
84    0000              	EXTERN ___fs2uchar_callee
85    0000              	EXTERN ___fs2uint
86    0000              	EXTERN ___fs2uint_callee
87    0000              	EXTERN ___fs2ulong
88    0000              	EXTERN ___fs2ulong_callee
89    0000              	EXTERN ___fs2ulonglong
90    0000              	EXTERN ___fs2ulonglong_callee
91    0000              	EXTERN ___fsadd
92    0000              	EXTERN ___fsadd_callee
93    0000              	EXTERN ___fsdiv
94    0000              	EXTERN ___fsdiv_callee
95    0000              	EXTERN ___fseq
96    0000              	EXTERN ___fseq_callee
97    0000              	EXTERN ___fsgt
98    0000              	EXTERN ___fsgt_callee
99    0000              	EXTERN ___fslt
100   0000              	EXTERN ___fslt_callee
101   0000              	EXTERN ___fsmul
102   0000              	EXTERN ___fsmul_callee
103   0000              	EXTERN ___fsneq
104   0000              	EXTERN ___fsneq_callee
105   0000              	EXTERN ___fssub
106   0000              	EXTERN ___fssub_callee
107   0000              	EXTERN ___schar2fs
108   0000              	EXTERN ___schar2fs_callee
109   0000              	EXTERN ___sint2fs
110   0000              	EXTERN ___sint2fs_callee
111   0000              	EXTERN ___slong2fs
112   0000              	EXTERN ___slong2fs_callee
113   0000              	EXTERN ___slonglong2fs
114   0000              	EXTERN ___slonglong2fs_callee
115   0000              	EXTERN ___uchar2fs
116   0000              	EXTERN ___uchar2fs_callee
117   0000              	EXTERN ___uint2fs
118   0000              	EXTERN ___uint2fs_callee
119   0000              	EXTERN ___ulong2fs
120   0000              	EXTERN ___ulong2fs_callee
121   0000              	EXTERN ___ulonglong2fs
122   0000              	EXTERN ___ulonglong2fs_callee
123   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
126   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
127   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
128   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
129   0000              	EXTERN ____sdcc_4_ldi_save_bc
130   0000              	EXTERN ____sdcc_4_push_hlix
131   0000              	EXTERN ____sdcc_4_push_mhl
132   0000              	EXTERN ____sdcc_lib_setmem_hl
133   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
134   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
135   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
136   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
137   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
138   0000              	EXTERN ____sdcc_ll_add_deix_hlix
139   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
140   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
141   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
142   0000              	EXTERN ____sdcc_ll_asr_hlix_a
143   0000              	EXTERN ____sdcc_ll_asr_mbc_a
144   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
145   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
146   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
147   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
148   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
149   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
150   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
151   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
152   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
153   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
155   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
156   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
157   0000              	EXTERN ____sdcc_ll_push_hlix
158   0000              	EXTERN ____sdcc_ll_push_mhl
159   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
160   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
161   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
162   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
163   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
164   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
165   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
166   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
167   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
168   0000              	EXTERN ____sdcc_load_debc_deix
169   0000              	EXTERN ____sdcc_load_dehl_deix
170   0000              	EXTERN ____sdcc_load_debc_mhl
171   0000              	EXTERN ____sdcc_load_hlde_mhl
172   0000              	EXTERN ____sdcc_store_dehl_bcix
173   0000              	EXTERN ____sdcc_store_debc_hlix
174   0000              	EXTERN ____sdcc_store_debc_mhl
175   0000              	EXTERN ____sdcc_cpu_pop_ei
176   0000              	EXTERN ____sdcc_cpu_pop_ei_jp
177   0000              	EXTERN ____sdcc_cpu_push_di
178   0000              	EXTERN ____sdcc_outi
179   0000              	EXTERN ____sdcc_outi_128
180   0000              	EXTERN ____sdcc_outi_256
181   0000              	EXTERN ____sdcc_ldi
182   0000              	EXTERN ____sdcc_ldi_128
183   0000              	EXTERN ____sdcc_ldi_256
184   0000              
185   0000              ;--------------------------------------------------------
186   0000              ; Public variables in this module
187   0000              ;--------------------------------------------------------
188   0000              	GLOBAL _player_check_map
189   0000              	GLOBAL _player_init
190   0000              	GLOBAL _player_check_input
191   0000              	GLOBAL _player_collision
192   0000              	GLOBAL _player_kill
193   0000              	GLOBAL _player_restart
194   0000              	GLOBAL _player_turn
195   0000              	GLOBAL _player_move
196   0000              	GLOBAL _player_check_stairs_down
197   0000              	GLOBAL _player_check_stairs
198   0000              	GLOBAL _player_tile
199   0000              	GLOBAL _player_move_input
200   0000              	GLOBAL _player_fire
201   0000              	GLOBAL _player_pick_item
202   0000              	GLOBAL _player_hit_platform
203   0000              	GLOBAL _player_hit_platform_clear
204   0000              	GLOBAL _player_score_add
205   0000              	GLOBAL _player_check_floor
206   0000              	GLOBAL _player_move_jump
207   0000              	GLOBAL _player_open_door
208   0000              	GLOBAL _player_lost_life
209   0000              	GLOBAL _player_hit
210   0000              ;--------------------------------------------------------
211   0000              ; Externals used
212   0000              ;--------------------------------------------------------
213   0000              	GLOBAL _ulltoa_callee
214   0000              	GLOBAL _ulltoa
215   0000              	GLOBAL _strtoull_callee
216   0000              	GLOBAL _strtoull
217   0000              	GLOBAL _strtoll_callee
218   0000              	GLOBAL _strtoll
219   0000              	GLOBAL _lltoa_callee
220   0000              	GLOBAL _lltoa
221   0000              	GLOBAL _llabs_callee
222   0000              	GLOBAL _llabs
223   0000              	GLOBAL __lldivu__callee
224   0000              	GLOBAL __lldivu_
225   0000              	GLOBAL __lldiv__callee
226   0000              	GLOBAL __lldiv_
227   0000              	GLOBAL _atoll_callee
228   0000              	GLOBAL _atoll
229   0000              	GLOBAL _realloc_unlocked_callee
230   0000              	GLOBAL _realloc_unlocked
231   0000              	GLOBAL _malloc_unlocked_fastcall
232   0000              	GLOBAL _malloc_unlocked
233   0000              	GLOBAL _free_unlocked_fastcall
234   0000              	GLOBAL _free_unlocked
235   0000              	GLOBAL _calloc_unlocked_callee
236   0000              	GLOBAL _calloc_unlocked
237   0000              	GLOBAL _aligned_alloc_unlocked_callee
238   0000              	GLOBAL _aligned_alloc_unlocked
239   0000              	GLOBAL _realloc_callee
240   0000              	GLOBAL _realloc
241   0000              	GLOBAL _malloc_fastcall
242   0000              	GLOBAL _malloc
243   0000              	GLOBAL _free_fastcall
244   0000              	GLOBAL _free
245   0000              	GLOBAL _calloc_callee
246   0000              	GLOBAL _calloc
247   0000              	GLOBAL _aligned_alloc_callee
248   0000              	GLOBAL _aligned_alloc
249   0000              	GLOBAL _utoa_callee
250   0000              	GLOBAL _utoa
251   0000              	GLOBAL _ultoa_callee
252   0000              	GLOBAL _ultoa
253   0000              	GLOBAL _system_fastcall
254   0000              	GLOBAL _system
255   0000              	GLOBAL _strtoul_callee
256   0000              	GLOBAL _strtoul
257   0000              	GLOBAL _strtol_callee
258   0000              	GLOBAL _strtol
259   0000              	GLOBAL _strtof_callee
260   0000              	GLOBAL _strtof
261   0000              	GLOBAL _strtod_callee
262   0000              	GLOBAL _strtod
263   0000              	GLOBAL _srand_fastcall
264   0000              	GLOBAL _srand
265   0000              	GLOBAL _rand
266   0000              	GLOBAL _quick_exit_fastcall
267   0000              	GLOBAL _quick_exit
268   0000              	GLOBAL _qsort_callee
269   0000              	GLOBAL _qsort
270   0000              	GLOBAL _ltoa_callee
271   0000              	GLOBAL _ltoa
272   0000              	GLOBAL _labs_fastcall
273   0000              	GLOBAL _labs
274   0000              	GLOBAL _itoa_callee
275   0000              	GLOBAL _itoa
276   0000              	GLOBAL _ftoh_callee
277   0000              	GLOBAL _ftoh
278   0000              	GLOBAL _ftog_callee
279   0000              	GLOBAL _ftog
280   0000              	GLOBAL _ftoe_callee
281   0000              	GLOBAL _ftoe
282   0000              	GLOBAL _ftoa_callee
283   0000              	GLOBAL _ftoa
284   0000              	GLOBAL _exit_fastcall
285   0000              	GLOBAL _exit
286   0000              	GLOBAL _dtoh_callee
287   0000              	GLOBAL _dtoh
288   0000              	GLOBAL _dtog_callee
289   0000              	GLOBAL _dtog
290   0000              	GLOBAL _dtoe_callee
291   0000              	GLOBAL _dtoe
292   0000              	GLOBAL _dtoa_callee
293   0000              	GLOBAL _dtoa
294   0000              	GLOBAL _bsearch_callee
295   0000              	GLOBAL _bsearch
296   0000              	GLOBAL _atol_fastcall
297   0000              	GLOBAL _atol
298   0000              	GLOBAL _atoi_fastcall
299   0000              	GLOBAL _atoi
300   0000              	GLOBAL _atof_fastcall
301   0000              	GLOBAL _atof
302   0000              	GLOBAL _atexit_fastcall
303   0000              	GLOBAL _atexit
304   0000              	GLOBAL _at_quick_exit_fastcall
305   0000              	GLOBAL _at_quick_exit
306   0000              	GLOBAL _abs_fastcall
307   0000              	GLOBAL _abs
308   0000              	GLOBAL _abort
309   0000              	GLOBAL __strtou__callee
310   0000              	GLOBAL __strtou_
311   0000              	GLOBAL __strtoi__callee
312   0000              	GLOBAL __strtoi_
313   0000              	GLOBAL __random_uniform_xor_8__fastcall
314   0000              	GLOBAL __random_uniform_xor_8_
315   0000              	GLOBAL __random_uniform_xor_32__fastcall
316   0000              	GLOBAL __random_uniform_xor_32_
317   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
318   0000              	GLOBAL __random_uniform_cmwc_8_
319   0000              	GLOBAL __shellsort__callee
320   0000              	GLOBAL __shellsort_
321   0000              	GLOBAL __quicksort__callee
322   0000              	GLOBAL __quicksort_
323   0000              	GLOBAL __insertion_sort__callee
324   0000              	GLOBAL __insertion_sort_
325   0000              	GLOBAL __ldivu__callee
326   0000              	GLOBAL __ldivu_
327   0000              	GLOBAL __ldiv__callee
328   0000              	GLOBAL __ldiv_
329   0000              	GLOBAL __divu__callee
330   0000              	GLOBAL __divu_
331   0000              	GLOBAL __div__callee
332   0000              	GLOBAL __div_
333   0000              	GLOBAL _NIRVANAP_drawTW_raw_callee
334   0000              	GLOBAL _NIRVANAP_drawTW_raw
335   0000              	GLOBAL _NIRVANAP_drawTW_callee
336   0000              	GLOBAL _NIRVANAP_drawTW
337   0000              	GLOBAL _NIRVANAP_drawW_raw_callee
338   0000              	GLOBAL _NIRVANAP_drawW_raw
339   0000              	GLOBAL _NIRVANAP_drawW_callee
340   0000              	GLOBAL _NIRVANAP_drawW
341   0000              	GLOBAL _NIRVANAP_spriteT_callee
342   0000              	GLOBAL _NIRVANAP_spriteT
343   0000              	GLOBAL _NIRVANAP_fillC_callee
344   0000              	GLOBAL _NIRVANAP_fillC
345   0000              	GLOBAL _NIRVANAP_readC_callee
346   0000              	GLOBAL _NIRVANAP_readC
347   0000              	GLOBAL _NIRVANAP_paintC_callee
348   0000              	GLOBAL _NIRVANAP_paintC
349   0000              	GLOBAL _NIRVANAP_printC_callee
350   0000              	GLOBAL _NIRVANAP_printC
351   0000              	GLOBAL _NIRVANAP_fillT_raw_callee
352   0000              	GLOBAL _NIRVANAP_fillT_raw
353   0000              	GLOBAL _NIRVANAP_fillT_callee
354   0000              	GLOBAL _NIRVANAP_fillT
355   0000              	GLOBAL _NIRVANAP_drawT_raw_callee
356   0000              	GLOBAL _NIRVANAP_drawT_raw
357   0000              	GLOBAL _NIRVANAP_drawT_callee
358   0000              	GLOBAL _NIRVANAP_drawT
359   0000              	GLOBAL _NIRVANAP_stop
360   0000              	GLOBAL _NIRVANAP_start
361   0000              	GLOBAL _debug3
362   0000              	GLOBAL _debug2
363   0000              	GLOBAL _debug
364   0000              	GLOBAL _zx_print_str
365   0000              	GLOBAL _zx_print_int
366   0000              	GLOBAL _zx_print_chr
367   0000              	GLOBAL _zx_print_bonus_time
368   0000              	GLOBAL _zx_isr
369   0000              	GLOBAL _z80_otdr_callee
370   0000              	GLOBAL _z80_otdr
371   0000              	GLOBAL _z80_otir_callee
372   0000              	GLOBAL _z80_otir
373   0000              	GLOBAL _z80_outp_callee
374   0000              	GLOBAL _z80_outp
375   0000              	GLOBAL _z80_indr_callee
376   0000              	GLOBAL _z80_indr
377   0000              	GLOBAL _z80_inir_callee
378   0000              	GLOBAL _z80_inir
379   0000              	GLOBAL _z80_inp_fastcall
380   0000              	GLOBAL _z80_inp
381   0000              	GLOBAL _z80_set_int_state_fastcall
382   0000              	GLOBAL _z80_set_int_state
383   0000              	GLOBAL _z80_get_int_state
384   0000              	GLOBAL _z80_delay_tstate_fastcall
385   0000              	GLOBAL _z80_delay_tstate
386   0000              	GLOBAL _z80_delay_ms_fastcall
387   0000              	GLOBAL _z80_delay_ms
388   0000              	GLOBAL _im2_remove_generic_callback_callee
389   0000              	GLOBAL _im2_remove_generic_callback
390   0000              	GLOBAL _im2_prepend_generic_callback_callee
391   0000              	GLOBAL _im2_prepend_generic_callback
392   0000              	GLOBAL _im2_append_generic_callback_callee
393   0000              	GLOBAL _im2_append_generic_callback
394   0000              	GLOBAL _im2_create_generic_isr_8080_callee
395   0000              	GLOBAL _im2_create_generic_isr_8080
396   0000              	GLOBAL _im2_create_generic_isr_callee
397   0000              	GLOBAL _im2_create_generic_isr
398   0000              	GLOBAL _im2_install_isr_callee
399   0000              	GLOBAL _im2_install_isr
400   0000              	GLOBAL _im2_init_fastcall
401   0000              	GLOBAL _im2_init
402   0000              	GLOBAL _intrinsic_swap_word_32_fastcall
403   0000              	GLOBAL _intrinsic_swap_word_32
404   0000              	GLOBAL _intrinsic_swap_endian_32_fastcall
405   0000              	GLOBAL _intrinsic_swap_endian_32
406   0000              	GLOBAL _intrinsic_swap_endian_16_fastcall
407   0000              	GLOBAL _intrinsic_swap_endian_16
408   0000              	GLOBAL _intrinsic_return_de
409   0000              	GLOBAL _intrinsic_return_bc
410   0000              	GLOBAL _intrinsic_exx
411   0000              	GLOBAL _intrinsic_ex_de_hl
412   0000              	GLOBAL _intrinsic_nop
413   0000              	GLOBAL _intrinsic_im_2
414   0000              	GLOBAL _intrinsic_im_1
415   0000              	GLOBAL _intrinsic_im_0
416   0000              	GLOBAL _intrinsic_retn
417   0000              	GLOBAL _intrinsic_reti
418   0000              	GLOBAL _intrinsic_halt
419   0000              	GLOBAL _intrinsic_ei
420   0000              	GLOBAL _intrinsic_di
421   0000              	GLOBAL _intrinsic_stub
422   0000              	GLOBAL _intrinsic_outi
423   0000              	GLOBAL _intrinsic_ldi
424   0000              	GLOBAL _zx_pattern_fill_callee
425   0000              	GLOBAL _zx_pattern_fill
426   0000              	GLOBAL _zx_saddrpup_fastcall
427   0000              	GLOBAL _zx_saddrpup
428   0000              	GLOBAL _zx_saddrpright_callee
429   0000              	GLOBAL _zx_saddrpright
430   0000              	GLOBAL _zx_saddrpleft_callee
431   0000              	GLOBAL _zx_saddrpleft
432   0000              	GLOBAL _zx_saddrpdown_fastcall
433   0000              	GLOBAL _zx_saddrpdown
434   0000              	GLOBAL _zx_saddrcup_fastcall
435   0000              	GLOBAL _zx_saddrcup
436   0000              	GLOBAL _zx_saddrcright_fastcall
437   0000              	GLOBAL _zx_saddrcright
438   0000              	GLOBAL _zx_saddrcleft_fastcall
439   0000              	GLOBAL _zx_saddrcleft
440   0000              	GLOBAL _zx_saddrcdown_fastcall
441   0000              	GLOBAL _zx_saddrcdown
442   0000              	GLOBAL _zx_saddr2py_fastcall
443   0000              	GLOBAL _zx_saddr2py
444   0000              	GLOBAL _zx_saddr2px_fastcall
445   0000              	GLOBAL _zx_saddr2px
446   0000              	GLOBAL _zx_saddr2cy_fastcall
447   0000              	GLOBAL _zx_saddr2cy
448   0000              	GLOBAL _zx_saddr2cx_fastcall
449   0000              	GLOBAL _zx_saddr2cx
450   0000              	GLOBAL _zx_saddr2aaddr_fastcall
451   0000              	GLOBAL _zx_saddr2aaddr
452   0000              	GLOBAL _zx_py2saddr_fastcall
453   0000              	GLOBAL _zx_py2saddr
454   0000              	GLOBAL _zx_py2aaddr_fastcall
455   0000              	GLOBAL _zx_py2aaddr
456   0000              	GLOBAL _zx_pxy2saddr_callee
457   0000              	GLOBAL _zx_pxy2saddr
458   0000              	GLOBAL _zx_pxy2aaddr_callee
459   0000              	GLOBAL _zx_pxy2aaddr
460   0000              	GLOBAL _zx_px2bitmask_fastcall
461   0000              	GLOBAL _zx_px2bitmask
462   0000              	GLOBAL _zx_cy2saddr_fastcall
463   0000              	GLOBAL _zx_cy2saddr
464   0000              	GLOBAL _zx_cy2aaddr_fastcall
465   0000              	GLOBAL _zx_cy2aaddr
466   0000              	GLOBAL _zx_cxy2saddr_callee
467   0000              	GLOBAL _zx_cxy2saddr
468   0000              	GLOBAL _zx_cxy2aaddr_callee
469   0000              	GLOBAL _zx_cxy2aaddr
470   0000              	GLOBAL _zx_bitmask2px_fastcall
471   0000              	GLOBAL _zx_bitmask2px
472   0000              	GLOBAL _zx_aaddrcup_fastcall
473   0000              	GLOBAL _zx_aaddrcup
474   0000              	GLOBAL _zx_aaddrcright_fastcall
475   0000              	GLOBAL _zx_aaddrcright
476   0000              	GLOBAL _zx_aaddrcleft_fastcall
477   0000              	GLOBAL _zx_aaddrcleft
478   0000              	GLOBAL _zx_aaddrcdown_fastcall
479   0000              	GLOBAL _zx_aaddrcdown
480   0000              	GLOBAL _zx_aaddr2saddr_fastcall
481   0000              	GLOBAL _zx_aaddr2saddr
482   0000              	GLOBAL _zx_aaddr2py_fastcall
483   0000              	GLOBAL _zx_aaddr2py
484   0000              	GLOBAL _zx_aaddr2px_fastcall
485   0000              	GLOBAL _zx_aaddr2px
486   0000              	GLOBAL _zx_aaddr2cy_fastcall
487   0000              	GLOBAL _zx_aaddr2cy
488   0000              	GLOBAL _zx_aaddr2cx_fastcall
489   0000              	GLOBAL _zx_aaddr2cx
490   0000              	GLOBAL _zx_visit_wc_pix_callee
491   0000              	GLOBAL _zx_visit_wc_pix
492   0000              	GLOBAL _zx_visit_wc_attr_callee
493   0000              	GLOBAL _zx_visit_wc_attr
494   0000              	GLOBAL _zx_scroll_wc_up_pix_callee
495   0000              	GLOBAL _zx_scroll_wc_up_pix
496   0000              	GLOBAL _zx_scroll_wc_up_attr_callee
497   0000              	GLOBAL _zx_scroll_wc_up_attr
498   0000              	GLOBAL _zx_scroll_wc_up_callee
499   0000              	GLOBAL _zx_scroll_wc_up
500   0000              	GLOBAL _zx_scroll_up_pix_callee
501   0000              	GLOBAL _zx_scroll_up_pix
502   0000              	GLOBAL _zx_scroll_up_attr_callee
503   0000              	GLOBAL _zx_scroll_up_attr
504   0000              	GLOBAL _zx_scroll_up_callee
505   0000              	GLOBAL _zx_scroll_up
506   0000              	GLOBAL _zx_cls_wc_pix_callee
507   0000              	GLOBAL _zx_cls_wc_pix
508   0000              	GLOBAL _zx_cls_wc_attr_callee
509   0000              	GLOBAL _zx_cls_wc_attr
510   0000              	GLOBAL _zx_cls_wc_callee
511   0000              	GLOBAL _zx_cls_wc
512   0000              	GLOBAL _zx_cls_pix_fastcall
513   0000              	GLOBAL _zx_cls_pix
514   0000              	GLOBAL _zx_cls_attr_fastcall
515   0000              	GLOBAL _zx_cls_attr
516   0000              	GLOBAL _zx_cls_fastcall
517   0000              	GLOBAL _zx_cls
518   0000              	GLOBAL _zx_border_fastcall
519   0000              	GLOBAL _zx_border
520   0000              	GLOBAL _spr_btile_paint_back
521   0000              	GLOBAL _spr_explode_bullet
522   0000              	GLOBAL _spr_init_anim_bullets
523   0000              	GLOBAL _spr_turn_horizontal
524   0000              	GLOBAL _spr_play_bullets
525   0000              	GLOBAL _spr_play_anim
526   0000              	GLOBAL _spr_add_anim
527   0000              	GLOBAL _spr_page_map
528   0000              	GLOBAL _spr_page_right
529   0000              	GLOBAL _spr_page_left
530   0000              	GLOBAL _spr_tile_paint
531   0000              	GLOBAL _spr_calc_hor
532   0000              	GLOBAL _spr_draw_row
533   0000              	GLOBAL _spr_draw_index
534   0000              	GLOBAL _spr_draw_clear
535   0000              	GLOBAL _spr_brick_anim
536   0000              	GLOBAL _spr_back_repaint
537   0000              	GLOBAL _spr_tile
538   0000              	GLOBAL _spr_destroy
539   0000              	GLOBAL _spr_tile_dir
540   0000              	GLOBAL _spr_redraw
541   0000              	GLOBAL _spr_move_left
542   0000              	GLOBAL _spr_move_right
543   0000              	GLOBAL _spr_move_horizontal
544   0000              	GLOBAL _spr_move_down
545   0000              	GLOBAL _spr_move_up
546   0000              	GLOBAL _spr_calc_index
547   0000              	GLOBAL _spr_chktime
548   0000              	GLOBAL _sound_hit_brick
549   0000              	GLOBAL _sound_hit_enemy
550   0000              	GLOBAL _sound_kill
551   0000              	GLOBAL _sound_enter_enemy
552   0000              	GLOBAL _sound_coin
553   0000              	GLOBAL _sound_jump
554   0000              	GLOBAL _sound_slide
555   0000              	GLOBAL _player_player_hit_pow
556   0000              	GLOBAL _game_obj_chk
557   0000              	GLOBAL _game_obj_set
558   0000              	GLOBAL _game_shoot_fire
559   0000              	GLOBAL _game_add_enemy
560   0000              	GLOBAL _game_joystick_set_menu
561   0000              	GLOBAL _game_joystick_set
562   0000              	GLOBAL _game_joystick_change
563   0000              	GLOBAL _game_print_header
564   0000              	GLOBAL _game_end
565   0000              	GLOBAL _game_phase_print_score_back
566   0000              	GLOBAL _game_check_time
567   0000              	GLOBAL _game_rotate_attrib
568   0000              	GLOBAL _game_colour_message
569   0000              	GLOBAL _game_paint_attrib_lin_h
570   0000              	GLOBAL _game_paint_attrib_lin
571   0000              	GLOBAL _game_paint_attrib
572   0000              	GLOBAL _game_print_score
573   0000              	GLOBAL _game_unfreeze_all
574   0000              	GLOBAL _game_freeze_all
575   0000              	GLOBAL _game_freeze
576   0000              	GLOBAL _game_enemy_add_get_index
577   0000              	GLOBAL _game_check_cell
578   0000              	GLOBAL _game_check_map
579   0000              	GLOBAL _game_loop
580   0000              	GLOBAL _game_round_init
581   0000              	GLOBAL _game_start_timer
582   0000              	GLOBAL _game_tick
583   0000              	GLOBAL _game_update_stats
584   0000              	GLOBAL _game_print_footer
585   0000              	GLOBAL _game_fill_row
586   0000              	GLOBAL _game_draw_screen
587   0000              	GLOBAL _enemy_avoid_fall_dead
588   0000              	GLOBAL _enemy_avoid_fall
589   0000              	GLOBAL _enemy_kill
590   0000              	GLOBAL _enemy_respawn
591   0000              	GLOBAL _enemy_init
592   0000              	GLOBAL _enemy_move
593   0000              	GLOBAL _enemy_turn
594   0000              	GLOBAL _enemy_hit
595   0000              	GLOBAL _enemy_coin1
596   0000              	GLOBAL _enemy_static
597   0000              	GLOBAL _enemy_walk
598   0000              	GLOBAL _enemy_horizontal
599   0000              	GLOBAL _enemy_vertical
600   0000              	GLOBAL _ay_fx_play
601   0000              	GLOBAL _ay_midi_play
602   0000              	GLOBAL _ay_is_playing
603   0000              	GLOBAL _ay_reset
604   0000              	GLOBAL _test_func
605   0000              	GLOBAL _test_proc
606   0000              	GLOBAL _in_mouse_kempston_wheel_delta
607   0000              	GLOBAL _in_mouse_kempston_wheel
608   0000              	GLOBAL _in_mouse_kempston_callee
609   0000              	GLOBAL _in_mouse_kempston
610   0000              	GLOBAL _in_mouse_kempston_setpos_callee
611   0000              	GLOBAL _in_mouse_kempston_setpos
612   0000              	GLOBAL _in_mouse_kempston_reset
613   0000              	GLOBAL _in_mouse_kempston_init
614   0000              	GLOBAL _in_mouse_amx_wheel_delta
615   0000              	GLOBAL _in_mouse_amx_wheel
616   0000              	GLOBAL _in_mouse_amx_callee
617   0000              	GLOBAL _in_mouse_amx
618   0000              	GLOBAL _in_mouse_amx_setpos_callee
619   0000              	GLOBAL _in_mouse_amx_setpos
620   0000              	GLOBAL _in_mouse_amx_reset
621   0000              	GLOBAL _in_mouse_amx_init_callee
622   0000              	GLOBAL _in_mouse_amx_init
623   0000              	GLOBAL _in_stick_sinclair2
624   0000              	GLOBAL _in_stick_sinclair1
625   0000              	GLOBAL _in_stick_kempston
626   0000              	GLOBAL _in_stick_fuller
627   0000              	GLOBAL _in_stick_cursor
628   0000              	GLOBAL _in_stick_keyboard_fastcall
629   0000              	GLOBAL _in_stick_keyboard
630   0000              	GLOBAL _in_wait_nokey
631   0000              	GLOBAL _in_wait_key
632   0000              	GLOBAL _in_test_key
633   0000              	GLOBAL _in_pause_fastcall
634   0000              	GLOBAL _in_pause
635   0000              	GLOBAL _in_key_scancode_fastcall
636   0000              	GLOBAL _in_key_scancode
637   0000              	GLOBAL _in_key_pressed_fastcall
638   0000              	GLOBAL _in_key_pressed
639   0000              	GLOBAL _in_inkey
640   0000              	GLOBAL _NIRVANAP_CHAR_TABLE
641   0000              	GLOBAL _NIRVANAP_WIDE_IMAGES
642   0000              	GLOBAL _NIRVANAP_TILE_IMAGES
643   0000              	GLOBAL _NIRVANAP_HOLE
644   0000              	GLOBAL _NIRVANAP_ISR_HOOK
645   0000              	GLOBAL _map_paper_last
646   0000              	GLOBAL _map_paper_clr
647   0000              	GLOBAL _map_paper
648   0000              	GLOBAL _draw_count
649   0000              	GLOBAL _g_player_hit_right
650   0000              	GLOBAL _g_player_hit_left
651   0000              	GLOBAL _joynames
652   0000              	GLOBAL _initials
653   0000              	GLOBAL _bullet_count
654   0000              	GLOBAL _bullet_frames
655   0000              	GLOBAL _bullet_colint
656   0000              	GLOBAL _bullet_dir
657   0000              	GLOBAL _bullet_tile
658   0000              	GLOBAL _bullet_col
659   0000              	GLOBAL _bullet_lin
660   0000              	GLOBAL _mush_class
661   0000              	GLOBAL _mush_index
662   0000              	GLOBAL _anim_count
663   0000              	GLOBAL _anim_respanwn
664   0000              	GLOBAL _anim_loop
665   0000              	GLOBAL _anim_end
666   0000              	GLOBAL _anim_int
667   0000              	GLOBAL _anim_tile
668   0000              	GLOBAL _anim_col
669   0000              	GLOBAL _anim_lin
670   0000              	GLOBAL _phase_curr
671   0000              	GLOBAL _map_heigth
672   0000              	GLOBAL _map_width
673   0000              	GLOBAL _scr_curr
674   0000              	GLOBAL _scr_obj1
675   0000              	GLOBAL _scr_obj0
676   0000              	GLOBAL _scr_map
677   0000              	GLOBAL _sprite_speed_alt
678   0000              	GLOBAL _sprite_frames
679   0000              	GLOBAL _sprite_speed
680   0000              	GLOBAL _screen_ink
681   0000              	GLOBAL _screen_paper
682   0000              	GLOBAL _player_over_stair
683   0000              	GLOBAL _game_start_scr
684   0000              	GLOBAL _game_respawning
685   0000              	GLOBAL _game_respawn_tile
686   0000              	GLOBAL _game_respawn_index
687   0000              	GLOBAL _game_menu_sel
688   0000              	GLOBAL _game_score_top
689   0000              	GLOBAL _player_lives
690   0000              	GLOBAL _game_over
691   0000              	GLOBAL _game_sound
692   0000              	GLOBAL _game_inmune
693   0000              	GLOBAL _game_god_mode
694   0000              	GLOBAL _game_two_player
695   0000              	GLOBAL _game_brick_tile
696   0000              	GLOBAL _sprite_curr_index
697   0000              	GLOBAL _spr_count
698   0000              	GLOBAL _bullet_time
699   0000              	GLOBAL _anim_time
700   0000              	GLOBAL _frame_time
701   0000              	GLOBAL _entry_time
702   0000              	GLOBAL _curr_time
703   0000              	GLOBAL _s_state
704   0000              	GLOBAL _attrib_hl
705   0000              	GLOBAL _attrib
706   0000              	GLOBAL _zx_val_asm
707   0000              	GLOBAL _enemies
708   0000              	GLOBAL _tmp_ui
709   0000              	GLOBAL _tmp_sc
710   0000              	GLOBAL _tmp_uc
711   0000              	GLOBAL _tmp1
712   0000              	GLOBAL _tmp0
713   0000              	GLOBAL _tmp
714   0000              	GLOBAL _index1
715   0000              	GLOBAL _index0
716   0000              	GLOBAL _loop_count
717   0000              	GLOBAL _s_col1
718   0000              	GLOBAL _s_col0
719   0000              	GLOBAL _s_lin1
720   0000              	GLOBAL _s_lin0
721   0000              	GLOBAL _s_tile1
722   0000              	GLOBAL _s_tile0
723   0000              	GLOBAL _player_hit_count
724   0000              	GLOBAL _sprite_horizontal_check
725   0000              	GLOBAL _sprite_on_air
726   0000              	GLOBAL _sprite
727   0000              	GLOBAL _game_gravity
728   0000              	GLOBAL _player_hit_time
729   0000              	GLOBAL _player_int
730   0000              	GLOBAL _player_dex
731   0000              	GLOBAL _player_str
732   0000              	GLOBAL _player_vita
733   0000              	GLOBAL _player_mana
734   0000              	GLOBAL _player_keys
735   0000              	GLOBAL _player_vel_inc
736   0000              	GLOBAL _player_vel_y1
737   0000              	GLOBAL _player_vel_y0
738   0000              	GLOBAL _player_vel_y
739   0000              	GLOBAL _player_vel_x
740   0000              	GLOBAL _player_joy
741   0000              	GLOBAL _player_score
742   0000              	GLOBAL _last_time
743   0000              	GLOBAL _player_slide
744   0000              	GLOBAL _spr_timer
745   0000              	GLOBAL _jump_lin
746   0000              	GLOBAL _player_hit_col
747   0000              	GLOBAL _player_hit_lin
748   0000              	GLOBAL _colint
749   0000              	GLOBAL _col
750   0000              	GLOBAL _lin
751   0000              	GLOBAL _tile
752   0000              	GLOBAL _state_a
753   0000              	GLOBAL _state
754   0000              	GLOBAL _class
755   0000              	GLOBAL _tbuffer
756   0000              	GLOBAL _dirs
757   0000              	GLOBAL _k1
758   0000              	GLOBAL _joyfunc1
759   0000              	GLOBAL _btiles
760   0000              	GLOBAL _spec128
761   0000              	GLOBAL _GLOBAL_ZX_PORT_7FFD
762   0000              	GLOBAL _GLOBAL_ZX_PORT_1FFD
763   0000              	GLOBAL _GLOBAL_ZX_PORT_FE
764   0000              	GLOBAL _ay_effect_20
765   0000              	GLOBAL _ay_effect_19
766   0000              	GLOBAL _ay_effect_18
767   0000              	GLOBAL _ay_effect_17
768   0000              	GLOBAL _ay_effect_16
769   0000              	GLOBAL _ay_effect_15
770   0000              	GLOBAL _ay_effect_14
771   0000              	GLOBAL _ay_effect_13
772   0000              	GLOBAL _ay_effect_12
773   0000              	GLOBAL _ay_effect_11
774   0000              	GLOBAL _ay_effect_10
775   0000              	GLOBAL _ay_effect_09
776   0000              	GLOBAL _ay_effect_08
777   0000              	GLOBAL _ay_effect_07
778   0000              	GLOBAL _ay_effect_06
779   0000              	GLOBAL _ay_effect_05
780   0000              	GLOBAL _ay_effect_04
781   0000              	GLOBAL _ay_effect_03
782   0000              	GLOBAL _ay_effect_02
783   0000              	GLOBAL _ay_effect_01
784   0000              	GLOBAL _pb_midi_phase_1
785   0000              	GLOBAL _pb_midi_title
786   0000              	GLOBAL _control_method
787   0000              	GLOBAL _world0
788   0000              	GLOBAL _lenght0
789   0000              	GLOBAL _start_scr0
790   0000              ;--------------------------------------------------------
791   0000              ; special function registers
792   0000              ;--------------------------------------------------------
793   0000              defc _IO_FE	=	0x00fe
794   0000              defc _IO_1FFD	=	0x1ffd
795   0000              defc _IO_7FFD	=	0x7ffd
796   0000              ;--------------------------------------------------------
797   0000              ; ram data
798   0000              ;--------------------------------------------------------
799   0000              	SECTION bss_compiler
800   0000              ;--------------------------------------------------------
801   0000              ; ram data
802   0000              ;--------------------------------------------------------
803   0000              
804   0000              IF 0
805   0000              
806   0000              ; .area _INITIALIZED removed by z88dk
807   0000              
808   0000              
809   0000              ENDIF
810   0000              
811   0000              ;--------------------------------------------------------
812   0000              ; absolute external ram data
813   0000              ;--------------------------------------------------------
814   0000              	SECTION IGNORE
815   0000              ;--------------------------------------------------------
816   0000              ; global & static initialisations
817   0000              ;--------------------------------------------------------
818   0000              	SECTION code_crt_init
819   0000              ;--------------------------------------------------------
820   0000              ; Home
821   0000              ;--------------------------------------------------------
822   0000              	SECTION IGNORE
823   0000              ;--------------------------------------------------------
824   0000              ; code
825   0000              ;--------------------------------------------------------
826   0000              	SECTION code_compiler
827   0000              ;	---------------------------------
828   0000              ; Function player_init
829   0000              ; ---------------------------------
830   0000              _player_init:
831   0000  CD 00 00    	call	___sdcc_enter_ix
832   0003  F5          	push	af
833   0004  3E 00       	ld	a, +((_class) & 0xFF)
834   0006  DD 86 04    	add	a,(ix+4)
835   0009  4F          	ld	c, a
836   000A  3E 00       	ld	a, +((_class) / 256)
837   000C  CE 00       	adc	a,0x00
838   000E  47          	ld	b, a
839   000F  AF          	xor	a, a
840   0010  02          	ld	(bc), a
841   0011  3E 00       	ld	a, +((_tile) & 0xFF)
842   0013  DD 86 04    	add	a,(ix+4)
843   0016  4F          	ld	c, a
844   0017  3E 00       	ld	a, +((_tile) / 256)
845   0019  CE 00       	adc	a,0x00
846   001B  47          	ld	b, a
847   001C  DD 7E 07    	ld	a,(ix+7)
848   001F  02          	ld	(bc), a
849   0020  3E 00       	ld	a, +((_lin) & 0xFF)
850   0022  DD 86 04    	add	a,(ix+4)
851   0025  4F          	ld	c, a
852   0026  3E 00       	ld	a, +((_lin) / 256)
853   0028  CE 00       	adc	a,0x00
854   002A  47          	ld	b, a
855   002B  DD 7E 05    	ld	a,(ix+5)
856   002E  02          	ld	(bc), a
857   002F  3E 00       	ld	a, +((_col) & 0xFF)
858   0031  DD 86 04    	add	a,(ix+4)
859   0034  4F          	ld	c, a
860   0035  3E 00       	ld	a, +((_col) / 256)
861   0037  CE 00       	adc	a,0x00
862   0039  47          	ld	b, a
863   003A  DD 7E 06    	ld	a,(ix+6)
864   003D  02          	ld	(bc), a
865   003E  3E 00       	ld	a, +((_colint) & 0xFF)
866   0040  DD 86 04    	add	a,(ix+4)
867   0043  4F          	ld	c, a
868   0044  3E 00       	ld	a, +((_colint) / 256)
869   0046  CE 00       	adc	a,0x00
870   0048  47          	ld	b, a
871   0049  AF          	xor	a, a
872   004A  02          	ld	(bc), a
873   004B  3E 00       	ld	a, +((_state) & 0xFF)
874   004D  DD 86 04    	add	a,(ix+4)
875   0050  4F          	ld	c, a
876   0051  3E 00       	ld	a, +((_state) / 256)
877   0053  CE 00       	adc	a,0x00
878   0055  47          	ld	b, a
879   0056  AF          	xor	a, a
880   0057  02          	ld	(bc), a
881   0058  3E 00       	ld	a, +((_state_a) & 0xFF)
882   005A  DD 86 04    	add	a,(ix+4)
883   005D  4F          	ld	c, a
884   005E  3E 00       	ld	a, +((_state_a) / 256)
885   0060  CE 00       	adc	a,0x00
886   0062  47          	ld	b, a
887   0063  AF          	xor	a, a
888   0064  02          	ld	(bc), a
889   0065  3E 00       	ld	a, +((_jump_lin) & 0xFF)
890   0067  DD 86 04    	add	a,(ix+4)
891   006A  5F          	ld	e, a
892   006B  3E 00       	ld	a, +((_jump_lin) / 256)
893   006D  CE 00       	adc	a,0x00
894   006F  57          	ld	d, a
895   0070  DD 7E 05    	ld	a,(ix+5)
896   0073  12          	ld	(de), a
897   0074  DD 6E 04    	ld	l,(ix+4)
898   0077  26 00       	ld	h,0x00
899   0079  29          	add	hl,hl
900   007A  11 00 00    	ld	de,_last_time
901   007D  19          	add	hl, de
902   007E  E3          	ex	(sp), hl
903   007F  E1          	pop	hl
904   0080  ED 5B 00 00 	ld	de,(_curr_time)
905   0084  E5          	push	hl
906   0085  73          	ld	(hl), e
907   0086  23          	inc	hl
908   0087  72          	ld	(hl), d
909   0088  3E 00       	ld	a, +((_sprite_speed_alt) & 0xFF)
910   008A  DD 86 04    	add	a,(ix+4)
911   008D  5F          	ld	e, a
912   008E  3E 00       	ld	a, +((_sprite_speed_alt) / 256)
913   0090  CE 00       	adc	a,0x00
914   0092  57          	ld	d, a
915   0093  AF          	xor	a, a
916   0094  12          	ld	(de), a
917   0095  0A          	ld	a, (bc)
918   0096  F6 11       	or	a,+(0x01|0x10)
919   0098  02          	ld	(bc),a
920   0099  21 00 00    	ld	hl,_player_hit_col
921   009C  36 00       	ld	(hl),0x00
922   009E  21 00 00    	ld	hl,_player_hit_lin
923   00A1  36 00       	ld	(hl),0x00
924   00A3  21 00 00    	ld	hl,_player_slide
925   00A6  36 00       	ld	(hl),0x00
926   00A8  DD 66 06    	ld	h,(ix+6)
927   00AB  DD 6E 05    	ld	l,(ix+5)
928   00AE  E5          	push	hl
929   00AF  DD 66 07    	ld	h,(ix+7)
930   00B2  DD 6E 04    	ld	l,(ix+4)
931   00B5  E5          	push	hl
932   00B6  CD 00 00    	call	_NIRVANAP_spriteT_callee
933   00B9  F1          	pop	af
934   00BA  DD E1       	pop	ix
935   00BC  C9          	ret
936   00BD              	SECTION code_compiler
937   00BD              ;	---------------------------------
938   00BD              ; Function player_check_input
939   00BD              ; ---------------------------------
940   00BD              _player_check_input:
941   00BD  21 00 00    	ld	hl,_dirs
942   00C0  CB 56       	bit	2, (hl)
943   00C2  28 0C       	jr	Z,l_player_check_input_00102
944   00C4  21 00 00    	ld	hl,_dirs
945   00C7  CB 5E       	bit	3, (hl)
946   00C9  28 05       	jr	Z,l_player_check_input_00102
947   00CB  21 00 00    	ld	hl,_dirs
948   00CE  36 00       	ld	(hl),0x00
949   00D0              l_player_check_input_00102:
950   00D0  21 00 00    	ld	hl,_dirs
951   00D3  7E          	ld	a, (hl)
952   00D4  CB 07       	rlc	a
953   00D6  E6 01       	and	a,0x01
954   00D8  CB 47       	bit	0, a
955   00DA  20 1D       	jr	NZ,l_player_check_input_00107
956   00DC  CB 56       	bit	2, (hl)
957   00DE  20 19       	jr	NZ,l_player_check_input_00107
958   00E0  21 00 00    	ld	hl,_dirs
959   00E3  CB 5E       	bit	3, (hl)
960   00E5  20 12       	jr	NZ,l_player_check_input_00107
961   00E7  21 00 00    	ld	hl,_dirs
962   00EA  CB 46       	bit	0, (hl)
963   00EC  20 0B       	jr	NZ,l_player_check_input_00107
964   00EE  21 00 00    	ld	hl,_dirs
965   00F1  CB 4E       	bit	1, (hl)
966   00F3  20 04       	jr	NZ,l_player_check_input_00107
967   00F5  2E 00       	ld	l,0x00
968   00F7  18 02       	jr	l_player_check_input_00108
969   00F9              l_player_check_input_00107:
970   00F9  2E 01       	ld	l,0x01
971   00FB              l_player_check_input_00108:
972   00FB  C9          	ret
973   00FC              	SECTION code_compiler
974   00FC              ;	---------------------------------
975   00FC              ; Function player_collision
976   00FC              ; ---------------------------------
977   00FC              _player_collision:
978   00FC  21 19 00    	ld	hl,0x0019
979   00FF  E5          	push	hl
980   0100  2A 00 00    	ld	hl,(_player_hit_time)
981   0103  E5          	push	hl
982   0104  CD 00 00    	call	_game_check_time
983   0107  F1          	pop	af
984   0108  F1          	pop	af
985   0109  7D          	ld	a, l
986   010A  B7          	or	a, a
987   010B  CA 92 01    	jp	Z, l_player_collision_00111
988   010E  21 00 00    	ld	hl,_sprite
989   0111  36 00       	ld	(hl),0x00
990   0113  3A 07 00    	ld	a,(_col + 7)
991   0116  32 00 00    	ld	(_s_col1),a
992   0119  3A 07 00    	ld	a,(_lin + 7)
993   011C  32 00 00    	ld	(_s_lin1),a
994   011F              l_player_collision_00107:
995   011F  21 00 00    	ld	hl,_sprite
996   0122  7E          	ld	a, (hl)
997   0123  D6 07       	sub	a,0x07
998   0125  30 6B       	jr	NC,l_player_collision_00111
999   0127  3E 00       	ld	a, +((_class) & 0xFF)
1000  0129  86          	add	a, (hl)
1001  012A  4F          	ld	c, a
1002  012B  3E 00       	ld	a, +((_class) / 256)
1003  012D  CE 00       	adc	a,0x00
1004  012F  47          	ld	b, a
1005  0130  0A          	ld	a, (bc)
1006  0131  B7          	or	a, a
1007  0132  28 58       	jr	Z,l_player_collision_00106
1008  0134  4E          	ld	c,(hl)
1009  0135  06 00       	ld	b,0x00
1010  0137  21 00 00    	ld	hl,_col
1011  013A  09          	add	hl,bc
1012  013B  4E          	ld	c, (hl)
1013  013C  06 00       	ld	b,0x00
1014  013E  3A 00 00    	ld	a,(_s_col1)
1015  0141  5F          	ld	e,a
1016  0142  16 00       	ld	d,0x00
1017  0144  79          	ld	a, c
1018  0145  93          	sub	a, e
1019  0146  6F          	ld	l, a
1020  0147  78          	ld	a, b
1021  0148  9A          	sbc	a, d
1022  0149  67          	ld	h, a
1023  014A  CD 00 00    	call	_abs_fastcall
1024  014D  7D          	ld	a,l
1025  014E  D6 02       	sub	a,0x02
1026  0150  7C          	ld	a,h
1027  0151  17          	rla
1028  0152  3F          	ccf
1029  0153  1F          	rra
1030  0154  DE 80       	sbc	a,0x80
1031  0156  30 34       	jr	NC,l_player_collision_00106
1032  0158  2A 00 00    	ld	hl,(_sprite)
1033  015B  26 00       	ld	h,0x00
1034  015D  01 00 00    	ld	bc,_lin
1035  0160  09          	add	hl,bc
1036  0161  4E          	ld	c,(hl)
1037  0162  06 00       	ld	b,0x00
1038  0164  3A 00 00    	ld	a,(_s_lin1)
1039  0167  5F          	ld	e,a
1040  0168  16 00       	ld	d,0x00
1041  016A  79          	ld	a, c
1042  016B  93          	sub	a, e
1043  016C  6F          	ld	l, a
1044  016D  78          	ld	a, b
1045  016E  9A          	sbc	a, d
1046  016F  67          	ld	h, a
1047  0170  CD 00 00    	call	_abs_fastcall
1048  0173  7D          	ld	a,l
1049  0174  D6 0E       	sub	a,0x0e
1050  0176  7C          	ld	a,h
1051  0177  17          	rla
1052  0178  3F          	ccf
1053  0179  1F          	rra
1054  017A  DE 80       	sbc	a,0x80
1055  017C  30 0E       	jr	NC,l_player_collision_00106
1056  017E  2E 02       	ld	l,0x02
1057  0180  CD 00 00    	call	_zx_border_fastcall
1058  0183  2E 14       	ld	l,0x14
1059  0185  CD 01 0F    	call	_player_hit
1060  0188  2E 01       	ld	l,0x01
1061  018A  18 08       	jr	l_player_collision_00112
1062  018C              l_player_collision_00106:
1063  018C  21 00 00    	ld	hl,_sprite
1064  018F  34          	inc	(hl)
1065  0190  18 8D       	jr	l_player_collision_00107
1066  0192              l_player_collision_00111:
1067  0192  2E 00       	ld	l,0x00
1068  0194              l_player_collision_00112:
1069  0194  C9          	ret
1070  0195              	SECTION code_compiler
1071  0195              ;	---------------------------------
1072  0195              ; Function player_kill
1073  0195              ; ---------------------------------
1074  0195              _player_kill:
1075  0195  01 00 00    	ld	bc,_state+0
1076  0198  2A 00 00    	ld	hl,(_sprite)
1077  019B  26 00       	ld	h,0x00
1078  019D  09          	add	hl,bc
1079  019E  CB 6E       	bit	5,(hl)
1080  01A0  C2 67 02    	jp	NZ,l_player_kill_00109
1081  01A3  C5          	push	bc
1082  01A4  CD 00 00    	call	_sound_hit_brick
1083  01A7  C1          	pop	bc
1084  01A8  79          	ld	a, c
1085  01A9  21 00 00    	ld	hl,_sprite
1086  01AC  86          	add	a, (hl)
1087  01AD  5F          	ld	e, a
1088  01AE  78          	ld	a, b
1089  01AF  CE 00       	adc	a,0x00
1090  01B1  57          	ld	d, a
1091  01B2  1A          	ld	a, (de)
1092  01B3  F6 20       	or	a,0x20
1093  01B5  12          	ld	(de), a
1094  01B6  3E 00       	ld	a, +((_sprite_speed_alt) & 0xFF)
1095  01B8  86          	add	a, (hl)
1096  01B9  5F          	ld	e, a
1097  01BA  3E 00       	ld	a, +((_sprite_speed_alt) / 256)
1098  01BC  CE 00       	adc	a,0x00
1099  01BE  57          	ld	d, a
1100  01BF  3E 03       	ld	a,0x03
1101  01C1  12          	ld	(de), a
1102  01C2  79          	ld	a, c
1103  01C3  86          	add	a, (hl)
1104  01C4  4F          	ld	c, a
1105  01C5  78          	ld	a, b
1106  01C6  CE 00       	adc	a,0x00
1107  01C8  47          	ld	b, a
1108  01C9  0A          	ld	a, (bc)
1109  01CA  CB 57       	bit	2, a
1110  01CC  28 0D       	jr	Z,l_player_kill_00102
1111  01CE  2A 00 00    	ld	hl,(_sprite)
1112  01D1  26 00       	ld	h,0x00
1113  01D3  01 00 00    	ld	bc,_tile
1114  01D6  09          	add	hl,bc
1115  01D7  36 40       	ld	(hl),0x40
1116  01D9  18 0B       	jr	l_player_kill_00103
1117  01DB              l_player_kill_00102:
1118  01DB  2A 00 00    	ld	hl,(_sprite)
1119  01DE  26 00       	ld	h,0x00
1120  01E0  01 00 00    	ld	bc,_tile
1121  01E3  09          	add	hl,bc
1122  01E4  36 48       	ld	(hl),0x48
1123  01E6              l_player_kill_00103:
1124  01E6  CD 6E 0A    	call	_player_hit_platform_clear
1125  01E9  2A 00 00    	ld	hl,(_sprite)
1126  01EC  26 00       	ld	h,0x00
1127  01EE  01 00 00    	ld	bc,_col
1128  01F1  09          	add	hl,bc
1129  01F2  4E          	ld	c, (hl)
1130  01F3  2A 00 00    	ld	hl,(_sprite)
1131  01F6  26 00       	ld	h,0x00
1132  01F8  11 00 00    	ld	de,_lin
1133  01FB  19          	add	hl,de
1134  01FC  46          	ld	b, (hl)
1135  01FD  2A 00 00    	ld	hl,(_sprite)
1136  0200  26 00       	ld	h,0x00
1137  0202  11 00 00    	ld	de,_tile
1138  0205  19          	add	hl,de
1139  0206  56          	ld	d, (hl)
1140  0207  79          	ld	a,c
1141  0208  21 00 00    	ld	hl,_sprite
1142  020B  F5          	push	af
1143  020C  33          	inc	sp
1144  020D  4A          	ld	c, d
1145  020E  7E          	ld	a,(hl)
1146  020F  C5          	push	bc
1147  0210  F5          	push	af
1148  0211  33          	inc	sp
1149  0212  CD 00 00    	call	_NIRVANAP_spriteT_callee
1150  0215  01 00 00    	ld	bc,_spr_timer+0
1151  0218  2A 00 00    	ld	hl,(_sprite)
1152  021B  26 00       	ld	h,0x00
1153  021D  29          	add	hl, hl
1154  021E  09          	add	hl,bc
1155  021F  ED 5B 00 00 	ld	de,(_curr_time)
1156  0223  73          	ld	(hl),e
1157  0224  23          	inc	hl
1158  0225  72          	ld	(hl),d
1159  0226  3A 00 00    	ld	a,(_sprite)
1160  0229  D6 07       	sub	a,0x07
1161  022B  20 1E       	jr	NZ,l_player_kill_00105
1162  022D  01 00 00    	ld	bc,_state_a+0
1163  0230  79          	ld	a, c
1164  0231  21 00 00    	ld	hl,_sprite
1165  0234  86          	add	a, (hl)
1166  0235  5F          	ld	e, a
1167  0236  78          	ld	a, b
1168  0237  CE 00       	adc	a,0x00
1169  0239  57          	ld	d, a
1170  023A  1A          	ld	a, (de)
1171  023B  F6 08       	or	a,0x08
1172  023D  12          	ld	(de), a
1173  023E  79          	ld	a, c
1174  023F  86          	add	a, (hl)
1175  0240  4F          	ld	c, a
1176  0241  78          	ld	a, b
1177  0242  CE 00       	adc	a,0x00
1178  0244  47          	ld	b, a
1179  0245  0A          	ld	a, (bc)
1180  0246  E6 EF       	and	a,0xef
1181  0248  02          	ld	(bc), a
1182  0249  18 1C       	jr	l_player_kill_00109
1183  024B              l_player_kill_00105:
1184  024B  01 00 00    	ld	bc,_state_a+0
1185  024E  79          	ld	a, c
1186  024F  21 00 00    	ld	hl,_sprite
1187  0252  86          	add	a, (hl)
1188  0253  5F          	ld	e, a
1189  0254  78          	ld	a, b
1190  0255  CE 00       	adc	a,0x00
1191  0257  57          	ld	d, a
1192  0258  1A          	ld	a, (de)
1193  0259  F6 10       	or	a,0x10
1194  025B  12          	ld	(de), a
1195  025C  79          	ld	a, c
1196  025D  86          	add	a, (hl)
1197  025E  4F          	ld	c, a
1198  025F  78          	ld	a, b
1199  0260  CE 00       	adc	a,0x00
1200  0262  47          	ld	b, a
1201  0263  0A          	ld	a, (bc)
1202  0264  E6 F7       	and	a,0xf7
1203  0266  02          	ld	(bc), a
1204  0267              l_player_kill_00109:
1205  0267  C9          	ret
1206  0268              	SECTION code_compiler
1207  0268              ;	---------------------------------
1208  0268              ; Function player_restart
1209  0268              ; ---------------------------------
1210  0268              _player_restart:
1211  0268  CD 00 00    	call	___sdcc_enter_ix
1212  026B  F5          	push	af
1213  026C  4D          	ld	c, l
1214  026D  21 00 00    	ld	hl,_ay_effect_15
1215  0270  CD 00 00    	call	_ay_fx_play
1216  0273  C5          	push	bc
1217  0274  21 0E 64    	ld	hl,0x640e
1218  0277  E5          	push	hl
1219  0278  21 07 00    	ld	hl,0x0007
1220  027B  E5          	push	hl
1221  027C  CD 00 00    	call	_player_init
1222  027F  F1          	pop	af
1223  0280  F1          	pop	af
1224  0281  C1          	pop	bc
1225  0282  11 00 00    	ld	de,_state+0
1226  0285  69          	ld	l,c
1227  0286  26 00       	ld	h,0x00
1228  0288  19          	add	hl, de
1229  0289  CB E6       	set	4, (hl)
1230  028B  11 00 00    	ld	de,_state_a+0
1231  028E  69          	ld	l,c
1232  028F  26 00       	ld	h,0x00
1233  0291  19          	add	hl, de
1234  0292  CB C6       	set	0, (hl)
1235  0294  11 00 00    	ld	de,_spr_timer+0
1236  0297  69          	ld	l, c
1237  0298  26 00       	ld	h,0x00
1238  029A  29          	add	hl, hl
1239  029B  19          	add	hl,de
1240  029C  E3          	ex	(sp), hl
1241  029D  E1          	pop	hl
1242  029E  ED 5B 00 00 	ld	de,(_curr_time)
1243  02A2  E5          	push	hl
1244  02A3  73          	ld	(hl), e
1245  02A4  23          	inc	hl
1246  02A5  72          	ld	(hl), d
1247  02A6  11 00 00    	ld	de,_sprite_speed_alt+0
1248  02A9  69          	ld	l,c
1249  02AA  26 00       	ld	h,0x00
1250  02AC  19          	add	hl, de
1251  02AD  F1          	pop	af
1252  02AE  36 08       	ld	(hl),0x08
1253  02B0  DD E1       	pop	ix
1254  02B2  C9          	ret
1255  02B3              	SECTION code_compiler
1256  02B3              ;	---------------------------------
1257  02B3              ; Function player_turn
1258  02B3              ; ---------------------------------
1259  02B3              _player_turn:
1260  02B3  2A 00 00    	ld	hl,(_sprite)
1261  02B6  26 00       	ld	h,0x00
1262  02B8  01 00 00    	ld	bc,_class
1263  02BB  09          	add	hl,bc
1264  02BC  7E          	ld	a,(hl)
1265  02BD  B7          	or	a, a
1266  02BE  C0          	ret	NZ
1267  02BF  3A 00 00    	ld	a,(_player_lives)
1268  02C2  B7          	or	a, a
1269  02C3  C8          	ret	Z
1270  02C4  21 00 00    	ld	hl,_sprite
1271  02C7  CD 00 00    	call	_spr_chktime
1272  02CA  7D          	ld	a, l
1273  02CB  B7          	or	a, a
1274  02CC  C8          	ret	Z
1275  02CD  21 00 00    	ld	hl,_k1
1276  02D0  E5          	push	hl
1277  02D1  2A 00 00    	ld	hl,(_joyfunc1)
1278  02D4  CD 00 00    	call	___sdcc_call_hl
1279  02D7  F1          	pop	af
1280  02D8  7D          	ld	a,l
1281  02D9  32 00 00    	ld	(_dirs),a
1282  02DC  CD E2 02    	call	_player_move
1283  02DF  C3 FC 00    	jp  _player_collision
1284  02E2              	SECTION code_compiler
1285  02E2              ;	---------------------------------
1286  02E2              ; Function player_move
1287  02E2              ; ---------------------------------
1288  02E2              _player_move:
1289  02E2  2A 00 00    	ld	hl,(_sprite)
1290  02E5  26 00       	ld	h,0x00
1291  02E7  01 00 00    	ld	bc,_lin
1292  02EA  09          	add	hl,bc
1293  02EB  7E          	ld	a,(hl)
1294  02EC  32 00 00    	ld	(_s_lin0),a
1295  02EF  2A 00 00    	ld	hl,(_sprite)
1296  02F2  26 00       	ld	h,0x00
1297  02F4  01 00 00    	ld	bc,_col
1298  02F7  09          	add	hl,bc
1299  02F8  7E          	ld	a,(hl)
1300  02F9  32 00 00    	ld	(_s_col0),a
1301  02FC  2A 00 00    	ld	hl,(_sprite)
1302  02FF  26 00       	ld	h,0x00
1303  0301  01 00 00    	ld	bc,_tile
1304  0304  09          	add	hl,bc
1305  0305  4E          	ld	c, (hl)
1306  0306  3A 00 00    	ld	a,(_sprite)
1307  0309  5F          	ld	e,a
1308  030A  16 00       	ld	d,0x00
1309  030C  21 00 00    	ld	hl,_colint
1310  030F  19          	add	hl,de
1311  0310  7E          	ld	a,(hl)
1312  0311  81          	add	a,c
1313  0312  32 00 00    	ld	(_s_tile0),a
1314  0315  2A 00 00    	ld	hl,(_sprite)
1315  0318  26 00       	ld	h,0x00
1316  031A  01 00 00    	ld	bc,_state
1317  031D  09          	add	hl,bc
1318  031E  7E          	ld	a,(hl)
1319  031F  CB 47       	bit	0,a
1320  0321  32 00 00    	ld	(_s_state),a
1321  0324  20 07       	jr	NZ,l_player_move_00113
1322  0326  21 00 00    	ld	hl,_s_state
1323  0329  CB 4E       	bit	1, (hl)
1324  032B  28 46       	jr	Z,l_player_move_00114
1325  032D              l_player_move_00113:
1326  032D  CD 71 06    	call	_player_fire
1327  0330  3A 00 00    	ld	a,(_player_vel_y)
1328  0333  21 00 00    	ld	hl,_player_vel_y1
1329  0336  96          	sub	a, (hl)
1330  0337  E2 3C 03    	jp	PO, l_player_move_00162
1331  033A  EE 80       	xor	a,0x80
1332  033C              l_player_move_00162:
1333  033C  F2 5F 03    	jp	P, l_player_move_00106
1334  033F  21 00 00    	ld	hl,_dirs
1335  0342  CB 56       	bit	2, (hl)
1336  0344  28 09       	jr	Z,l_player_move_00102
1337  0346  21 00 00    	ld	hl,_s_state
1338  0349  7E          	ld	a,(hl)
1339  034A  F6 08       	or	a,0x08
1340  034C  E6 FB       	and	a,0xfb
1341  034E  77          	ld	(hl),a
1342  034F              l_player_move_00102:
1343  034F  21 00 00    	ld	hl,_dirs
1344  0352  CB 4E       	bit	1, (hl)
1345  0354  28 09       	jr	Z,l_player_move_00106
1346  0356  21 00 00    	ld	hl,_s_state
1347  0359  7E          	ld	a,(hl)
1348  035A  F6 04       	or	a,0x04
1349  035C  E6 F7       	and	a,0xf7
1350  035E  77          	ld	(hl),a
1351  035F              l_player_move_00106:
1352  035F  CD 43 0B    	call	_player_move_jump
1353  0362  7D          	ld	a, l
1354  0363  B7          	or	a, a
1355  0364  28 2E       	jr	Z,l_player_move_00115
1356  0366  3A 00 00    	ld	a,(_player_over_stair)
1357  0369  B7          	or	a, a
1358  036A  20 28       	jr	NZ,l_player_move_00115
1359  036C  2E 54       	ld	l,0x54
1360  036E  CD A5 04    	call	_player_tile
1361  0371  18 21       	jr	l_player_move_00115
1362  0373              l_player_move_00114:
1363  0373  CD FB 04    	call	_player_move_input
1364  0376  7D          	ld	a, l
1365  0377  B7          	or	a, a
1366  0378  20 17       	jr	NZ,l_player_move_00112
1367  037A  2A 00 00    	ld	hl,(_sprite)
1368  037D  26 00       	ld	h,0x00
1369  037F  01 00 00    	ld	bc,_colint
1370  0382  09          	add	hl,bc
1371  0383  AF          	xor	a,a
1372  0384  77          	ld	(hl),a
1373  0385  2E 64       	ld	l,0x64
1374  0387  CD A5 04    	call	_player_tile
1375  038A  21 00 00    	ld	hl,_s_state
1376  038D  7E          	ld	a,(hl)
1377  038E  E6 F3       	and	a,+(0xf7&0xfb)
1378  0390  77          	ld	(hl),a
1379  0391              l_player_move_00112:
1380  0391  CD C7 0A    	call	_player_check_floor
1381  0394              l_player_move_00115:
1382  0394  CD 00 00    	call	_spr_redraw
1383  0397  7D          	ld	a, l
1384  0398  B7          	or	a, a
1385  0399  28 03       	jr	Z,l_player_move_00118
1386  039B  CD AE 06    	call	_player_check_map
1387  039E              l_player_move_00118:
1388  039E  3A 00 00    	ld	a,(_player_hit_lin)
1389  03A1  B7          	or	a, a
1390  03A2  28 03       	jr	Z,l_player_move_00120
1391  03A4  CD 6E 0A    	call	_player_hit_platform_clear
1392  03A7              l_player_move_00120:
1393  03A7  2A 00 00    	ld	hl,(_sprite)
1394  03AA  26 00       	ld	h,0x00
1395  03AC  01 00 00    	ld	bc,_state
1396  03AF  09          	add	hl,bc
1397  03B0  3A 00 00    	ld	a,(_s_state)
1398  03B3  77          	ld	(hl),a
1399  03B4  2E 00       	ld	l,0x00
1400  03B6  C9          	ret
1401  03B7              	SECTION code_compiler
1402  03B7              ;	---------------------------------
1403  03B7              ; Function player_check_stairs_down
1404  03B7              ; ---------------------------------
1405  03B7              _player_check_stairs_down:
1406  03B7  CD 00 00    	call	___sdcc_enter_ix
1407  03BA  3B          	dec	sp
1408  03BB  2A 00 00    	ld	hl,(_sprite)
1409  03BE  26 00       	ld	h,0x00
1410  03C0  5D          	ld	e,l
1411  03C1  01 00 00    	ld	bc,_col
1412  03C4  09          	add	hl,bc
1413  03C5  46          	ld	b,(hl)
1414  03C6  16 00       	ld	d,0x00
1415  03C8  21 00 00    	ld	hl,_lin
1416  03CB  19          	add	hl,de
1417  03CC  7E          	ld	a,(hl)
1418  03CD  C6 10       	add	a,0x10
1419  03CF  4F          	ld	c,a
1420  03D0  C5          	push	bc
1421  03D1  CD 00 00    	call	_spr_calc_index
1422  03D4  F1          	pop	af
1423  03D5  7D          	ld	a,l
1424  03D6  32 00 00    	ld	(_sprite_curr_index),a
1425  03D9  4F          	ld	c,a
1426  03DA  06 00       	ld	b,0x00
1427  03DC  21 00 00    	ld	hl,_scr_map
1428  03DF  09          	add	hl,bc
1429  03E0  7E          	ld	a,(hl)
1430  03E1  4F          	ld	c,a
1431  03E2  D6 38       	sub	a,0x38
1432  03E4  38 05       	jr	C,l_player_check_stairs_down_00105
1433  03E6  3E 3C       	ld	a,0x3c
1434  03E8  91          	sub	a, c
1435  03E9  30 04       	jr	NC,l_player_check_stairs_down_00106
1436  03EB              l_player_check_stairs_down_00105:
1437  03EB  3E 00       	ld	a,0x00
1438  03ED  18 02       	jr	l_player_check_stairs_down_00107
1439  03EF              l_player_check_stairs_down_00106:
1440  03EF  3E 01       	ld	a,0x01
1441  03F1              l_player_check_stairs_down_00107:
1442  03F1  B7          	or	a, a
1443  03F2  28 05       	jr	Z,l_player_check_stairs_down_00103
1444  03F4  21 00 00    	ld	hl,_player_over_stair
1445  03F7  36 01       	ld	(hl),0x01
1446  03F9              l_player_check_stairs_down_00103:
1447  03F9  33          	inc	sp
1448  03FA  DD E1       	pop	ix
1449  03FC  C9          	ret
1450  03FD              	SECTION code_compiler
1451  03FD              ;	---------------------------------
1452  03FD              ; Function player_check_stairs
1453  03FD              ; ---------------------------------
1454  03FD              _player_check_stairs:
1455  03FD  CD 00 00    	call	___sdcc_enter_ix
1456  0400  3B          	dec	sp
1457  0401  5D          	ld	e, l
1458  0402  2A 00 00    	ld	hl,(_sprite)
1459  0405  26 00       	ld	h,0x00
1460  0407  01 00 00    	ld	bc,_col
1461  040A  09          	add	hl,bc
1462  040B  7E          	ld	a,(hl)
1463  040C  83          	add	a,e
1464  040D  57          	ld	d,a
1465  040E  2A 00 00    	ld	hl,(_sprite)
1466  0411  26 00       	ld	h,0x00
1467  0413  01 00 00    	ld	bc,_lin
1468  0416  09          	add	hl,bc
1469  0417  46          	ld	b, (hl)
1470  0418  D5          	push	de
1471  0419  58          	ld	e,b
1472  041A  D5          	push	de
1473  041B  CD 00 00    	call	_spr_calc_index
1474  041E  F1          	pop	af
1475  041F  D1          	pop	de
1476  0420  7D          	ld	a,l
1477  0421  32 00 00    	ld	(_sprite_curr_index),a
1478  0424  4F          	ld	c,a
1479  0425  06 00       	ld	b,0x00
1480  0427  21 00 00    	ld	hl,_scr_map
1481  042A  09          	add	hl,bc
1482  042B  7E          	ld	a,(hl)
1483  042C  4F          	ld	c,a
1484  042D  D6 38       	sub	a,0x38
1485  042F  38 05       	jr	C,l_player_check_stairs_00111
1486  0431  3E 3C       	ld	a,0x3c
1487  0433  91          	sub	a, c
1488  0434  30 04       	jr	NC,l_player_check_stairs_00112
1489  0436              l_player_check_stairs_00111:
1490  0436  0E 00       	ld	c,0x00
1491  0438  18 02       	jr	l_player_check_stairs_00113
1492  043A              l_player_check_stairs_00112:
1493  043A  0E 01       	ld	c,0x01
1494  043C              l_player_check_stairs_00113:
1495  043C  3E 00       	ld	a, +((_col) & 0xFF)
1496  043E  21 00 00    	ld	hl,_sprite
1497  0441  86          	add	a, (hl)
1498  0442  6F          	ld	l, a
1499  0443  3E 00       	ld	a, +((_col) / 256)
1500  0445  CE 00       	adc	a,0x00
1501  0447  67          	ld	h, a
1502  0448  7E          	ld	a, (hl)
1503  0449  83          	add	a, e
1504  044A  47          	ld	b, a
1505  044B  2A 00 00    	ld	hl,(_sprite)
1506  044E  26 00       	ld	h,0x00
1507  0450  11 00 00    	ld	de,_lin
1508  0453  19          	add	hl,de
1509  0454  7E          	ld	a,(hl)
1510  0455  C6 0F       	add	a,0x0f
1511  0457  57          	ld	d, a
1512  0458  C5          	push	bc
1513  0459  4A          	ld	c, d
1514  045A  C5          	push	bc
1515  045B  CD 00 00    	call	_spr_calc_index
1516  045E  F1          	pop	af
1517  045F  C1          	pop	bc
1518  0460  7D          	ld	a,l
1519  0461  32 00 00    	ld	(_sprite_curr_index),a
1520  0464  5F          	ld	e,a
1521  0465  16 00       	ld	d,0x00
1522  0467  21 00 00    	ld	hl,_scr_map
1523  046A  19          	add	hl,de
1524  046B  7E          	ld	a,(hl)
1525  046C  47          	ld	b,a
1526  046D  D6 38       	sub	a,0x38
1527  046F  38 05       	jr	C,l_player_check_stairs_00114
1528  0471  3E 3C       	ld	a,0x3c
1529  0473  90          	sub	a, b
1530  0474  30 04       	jr	NC,l_player_check_stairs_00115
1531  0476              l_player_check_stairs_00114:
1532  0476  06 00       	ld	b,0x00
1533  0478  18 02       	jr	l_player_check_stairs_00116
1534  047A              l_player_check_stairs_00115:
1535  047A  06 01       	ld	b,0x01
1536  047C              l_player_check_stairs_00116:
1537  047C  79          	ld	a, c
1538  047D  B7          	or	a,a
1539  047E  20 03       	jr	NZ,l_player_check_stairs_00105
1540  0480  B0          	or	a,b
1541  0481  28 10       	jr	Z,l_player_check_stairs_00106
1542  0483              l_player_check_stairs_00105:
1543  0483  21 00 00    	ld	hl,_player_over_stair
1544  0486  7E          	ld	a, (hl)
1545  0487  B7          	or	a, a
1546  0488  20 17       	jr	NZ,l_player_check_stairs_00109
1547  048A  36 01       	ld	(hl),0x01
1548  048C  2E 66       	ld	l,0x66
1549  048E  CD A5 04    	call	_player_tile
1550  0491  18 0E       	jr	l_player_check_stairs_00109
1551  0493              l_player_check_stairs_00106:
1552  0493  21 00 00    	ld	hl,_player_over_stair
1553  0496  7E          	ld	a, (hl)
1554  0497  B7          	or	a, a
1555  0498  28 07       	jr	Z,l_player_check_stairs_00109
1556  049A  36 00       	ld	(hl),0x00
1557  049C  2E 54       	ld	l,0x54
1558  049E  CD A5 04    	call	_player_tile
1559  04A1              l_player_check_stairs_00109:
1560  04A1  33          	inc	sp
1561  04A2  DD E1       	pop	ix
1562  04A4  C9          	ret
1563  04A5              	SECTION code_compiler
1564  04A5              ;	---------------------------------
1565  04A5              ; Function player_tile
1566  04A5              ; ---------------------------------
1567  04A5              _player_tile:
1568  04A5  45          	ld	b, l
1569  04A6  3A 00 00    	ld	a,(_player_over_stair)
1570  04A9  B7          	or	a, a
1571  04AA  28 0D       	jr	Z,l_player_tile_00105
1572  04AC  2A 00 00    	ld	hl,(_sprite)
1573  04AF  26 00       	ld	h,0x00
1574  04B1  01 00 00    	ld	bc,_tile
1575  04B4  09          	add	hl,bc
1576  04B5  36 66       	ld	(hl),0x66
1577  04B7  18 41       	jr	l_player_tile_00107
1578  04B9              l_player_tile_00105:
1579  04B9  78          	ld	a, b
1580  04BA  D6 64       	sub	a,0x64
1581  04BC  20 1F       	jr	NZ,l_player_tile_00102
1582  04BE  2A 00 00    	ld	hl,(_sprite)
1583  04C1  26 00       	ld	h,0x00
1584  04C3  11 00 00    	ld	de,_tile
1585  04C6  19          	add	hl,de
1586  04C7  E5          	push	hl
1587  04C8  3E 01       	ld	a,0x01
1588  04CA  21 00 00    	ld	hl,_sprite
1589  04CD  F5          	push	af
1590  04CE  33          	inc	sp
1591  04CF  7E          	ld	a, (hl)
1592  04D0  48          	ld	c,b
1593  04D1  47          	ld	b,a
1594  04D2  C5          	push	bc
1595  04D3  CD 00 00    	call	_spr_tile_dir
1596  04D6  F1          	pop	af
1597  04D7  33          	inc	sp
1598  04D8  D1          	pop	de
1599  04D9  7D          	ld	a,l
1600  04DA  12          	ld	(de), a
1601  04DB  18 1D       	jr	l_player_tile_00107
1602  04DD              l_player_tile_00102:
1603  04DD  2A 00 00    	ld	hl,(_sprite)
1604  04E0  26 00       	ld	h,0x00
1605  04E2  11 00 00    	ld	de,_tile
1606  04E5  19          	add	hl,de
1607  04E6  E5          	push	hl
1608  04E7  3E 08       	ld	a,0x08
1609  04E9  21 00 00    	ld	hl,_sprite
1610  04EC  F5          	push	af
1611  04ED  33          	inc	sp
1612  04EE  7E          	ld	a, (hl)
1613  04EF  48          	ld	c,b
1614  04F0  47          	ld	b,a
1615  04F1  C5          	push	bc
1616  04F2  CD 00 00    	call	_spr_tile_dir
1617  04F5  F1          	pop	af
1618  04F6  33          	inc	sp
1619  04F7  D1          	pop	de
1620  04F8  7D          	ld	a,l
1621  04F9  12          	ld	(de), a
1622  04FA              l_player_tile_00107:
1623  04FA  C9          	ret
1624  04FB              	SECTION code_compiler
1625  04FB              ;	---------------------------------
1626  04FB              ; Function player_move_input
1627  04FB              ; ---------------------------------
1628  04FB              _player_move_input:
1629  04FB  CD BD 00    	call	_player_check_input
1630  04FE  7D          	ld	a, l
1631  04FF  B7          	or	a, a
1632  0500  CA 6E 06    	jp	Z, l_player_move_input_00136
1633  0503  CD 71 06    	call	_player_fire
1634  0506  7D          	ld	a, l
1635  0507  B7          	or	a, a
1636  0508  28 0A       	jr	Z,l_player_move_input_00102
1637  050A  21 00 00    	ld	hl,_dirs
1638  050D  36 00       	ld	(hl),0x00
1639  050F  2E 00       	ld	l,0x00
1640  0511  C3 70 06    	jp	l_player_move_input_00137
1641  0514              l_player_move_input_00102:
1642  0514  21 00 00    	ld	hl,_dirs
1643  0517  CB 7E       	bit	7, (hl)
1644  0519  28 67       	jr	Z,l_player_move_input_00106
1645  051B  21 00 00    	ld	hl,_player_vel_inc
1646  051E  36 01       	ld	(hl),0x01
1647  0520  CD 00 00    	call	_ay_is_playing
1648  0523  7D          	ld	a, l
1649  0524  D6 03       	sub	a,0x03
1650  0526  28 06       	jr	Z,l_player_move_input_00104
1651  0528  21 00 00    	ld	hl,_ay_effect_03
1652  052B  CD 00 00    	call	_ay_fx_play
1653  052E              l_player_move_input_00104:
1654  052E  21 00 00    	ld	hl,_player_over_stair
1655  0531  36 00       	ld	(hl),0x00
1656  0533  CD 00 00    	call	_sound_jump
1657  0536  21 00 00    	ld	hl,_s_state
1658  0539  7E          	ld	a,(hl)
1659  053A  F6 01       	or	a,0x01
1660  053C  E6 FD       	and	a,0xfd
1661  053E  77          	ld	(hl),a
1662  053F  2A 00 00    	ld	hl,(_sprite)
1663  0542  26 00       	ld	h,0x00
1664  0544  01 00 00    	ld	bc,_jump_lin
1665  0547  09          	add	hl,bc
1666  0548  4D          	ld	c,l
1667  0549  44          	ld	b,h
1668  054A  2A 00 00    	ld	hl,(_sprite)
1669  054D  26 00       	ld	h,0x00
1670  054F  11 00 00    	ld	de,_lin
1671  0552  19          	add	hl,de
1672  0553  7E          	ld	a,(hl)
1673  0554  02          	ld	(bc),a
1674  0555  2A 00 00    	ld	hl,(_sprite)
1675  0558  26 00       	ld	h,0x00
1676  055A  01 00 00    	ld	bc,_state
1677  055D  09          	add	hl,bc
1678  055E  3A 00 00    	ld	a,(_s_state)
1679  0561  77          	ld	(hl),a
1680  0562  2E 58       	ld	l,0x58
1681  0564  CD A5 04    	call	_player_tile
1682  0567  2A 00 00    	ld	hl,(_sprite)
1683  056A  26 00       	ld	h,0x00
1684  056C  01 00 00    	ld	bc,_sprite_speed_alt
1685  056F  09          	add	hl,bc
1686  0570  36 02       	ld	(hl),0x02
1687  0572  21 00 00    	ld	hl,_player_slide
1688  0575  36 00       	ld	(hl),0x00
1689  0577  3A 00 00    	ld	a,(_player_vel_y0)
1690  057A  32 00 00    	ld	(_player_vel_y),a
1691  057D  2E 01       	ld	l,0x01
1692  057F  C3 70 06    	jp	l_player_move_input_00137
1693  0582              l_player_move_input_00106:
1694  0582  21 00 00    	ld	hl,_dirs
1695  0585  CB 5E       	bit	3, (hl)
1696  0587  28 33       	jr	Z,l_player_move_input_00110
1697  0589  21 00 00    	ld	hl,_s_state
1698  058C  7E          	ld	a,(hl)
1699  058D  F6 04       	or	a,0x04
1700  058F  E6 F7       	and	a,0xf7
1701  0591  77          	ld	(hl),a
1702  0592  01 00 00    	ld	bc,_state_a+0
1703  0595  79          	ld	a, c
1704  0596  21 00 00    	ld	hl,_sprite
1705  0599  86          	add	a, (hl)
1706  059A  5F          	ld	e, a
1707  059B  78          	ld	a, b
1708  059C  CE 00       	adc	a,0x00
1709  059E  57          	ld	d, a
1710  059F  1A          	ld	a, (de)
1711  05A0  F6 10       	or	a,0x10
1712  05A2  12          	ld	(de), a
1713  05A3  79          	ld	a, c
1714  05A4  86          	add	a, (hl)
1715  05A5  4F          	ld	c, a
1716  05A6  78          	ld	a, b
1717  05A7  CE 00       	adc	a,0x00
1718  05A9  47          	ld	b, a
1719  05AA  0A          	ld	a, (bc)
1720  05AB  E6 F7       	and	a,0xf7
1721  05AD  02          	ld	(bc), a
1722  05AE  3A 00 00    	ld	a,(_player_over_stair)
1723  05B1  B7          	or	a, a
1724  05B2  28 05       	jr	Z,l_player_move_input_00108
1725  05B4  2E 00       	ld	l,0x00
1726  05B6  CD FD 03    	call	_player_check_stairs
1727  05B9              l_player_move_input_00108:
1728  05B9  CD 00 00    	call	_spr_move_horizontal
1729  05BC              l_player_move_input_00110:
1730  05BC  21 00 00    	ld	hl,_dirs
1731  05BF  CB 56       	bit	2, (hl)
1732  05C1  28 33       	jr	Z,l_player_move_input_00114
1733  05C3  21 00 00    	ld	hl,_s_state
1734  05C6  7E          	ld	a,(hl)
1735  05C7  F6 08       	or	a,0x08
1736  05C9  E6 FB       	and	a,0xfb
1737  05CB  77          	ld	(hl),a
1738  05CC  01 00 00    	ld	bc,_state_a+0
1739  05CF  79          	ld	a, c
1740  05D0  21 00 00    	ld	hl,_sprite
1741  05D3  86          	add	a, (hl)
1742  05D4  5F          	ld	e, a
1743  05D5  78          	ld	a, b
1744  05D6  CE 00       	adc	a,0x00
1745  05D8  57          	ld	d, a
1746  05D9  1A          	ld	a, (de)
1747  05DA  F6 08       	or	a,0x08
1748  05DC  12          	ld	(de), a
1749  05DD  79          	ld	a, c
1750  05DE  86          	add	a, (hl)
1751  05DF  4F          	ld	c, a
1752  05E0  78          	ld	a, b
1753  05E1  CE 00       	adc	a,0x00
1754  05E3  47          	ld	b, a
1755  05E4  0A          	ld	a, (bc)
1756  05E5  E6 EF       	and	a,0xef
1757  05E7  02          	ld	(bc), a
1758  05E8  3A 00 00    	ld	a,(_player_over_stair)
1759  05EB  B7          	or	a, a
1760  05EC  28 05       	jr	Z,l_player_move_input_00112
1761  05EE  2E 00       	ld	l,0x00
1762  05F0  CD FD 03    	call	_player_check_stairs
1763  05F3              l_player_move_input_00112:
1764  05F3  CD 00 00    	call	_spr_move_horizontal
1765  05F6              l_player_move_input_00114:
1766  05F6  21 00 00    	ld	hl,_dirs
1767  05F9  CB 46       	bit	0, (hl)
1768  05FB  28 2B       	jr	Z,l_player_move_input_00124
1769  05FD  2E 00       	ld	l,0x00
1770  05FF  CD FD 03    	call	_player_check_stairs
1771  0602  3A 00 00    	ld	a,(_player_over_stair)
1772  0605  B7          	or	a, a
1773  0606  28 0E       	jr	Z,l_player_move_input_00121
1774  0608  CD 00 00    	call	_spr_move_up
1775  060B  7D          	ld	a, l
1776  060C  B7          	or	a, a
1777  060D  28 19       	jr	Z,l_player_move_input_00124
1778  060F  21 00 00    	ld	hl,_player_over_stair
1779  0612  36 00       	ld	(hl),0x00
1780  0614  18 12       	jr	l_player_move_input_00124
1781  0616              l_player_move_input_00121:
1782  0616  21 00 00    	ld	hl,_dirs
1783  0619  CB 5E       	bit	3, (hl)
1784  061B  20 0B       	jr	NZ,l_player_move_input_00124
1785  061D  21 00 00    	ld	hl,_dirs
1786  0620  CB 56       	bit	2, (hl)
1787  0622  20 04       	jr	NZ,l_player_move_input_00124
1788  0624  2E 00       	ld	l,0x00
1789  0626  18 48       	jr	l_player_move_input_00137
1790  0628              l_player_move_input_00124:
1791  0628  21 00 00    	ld	hl,_dirs
1792  062B  CB 4E       	bit	1, (hl)
1793  062D  28 29       	jr	Z,l_player_move_input_00134
1794  062F  CD B7 03    	call	_player_check_stairs_down
1795  0632  3A 00 00    	ld	a,(_player_over_stair)
1796  0635  B7          	or	a, a
1797  0636  28 0E       	jr	Z,l_player_move_input_00131
1798  0638  CD 00 00    	call	_spr_move_down
1799  063B  7D          	ld	a, l
1800  063C  B7          	or	a, a
1801  063D  28 19       	jr	Z,l_player_move_input_00134
1802  063F  21 00 00    	ld	hl,_player_over_stair
1803  0642  36 00       	ld	(hl),0x00
1804  0644  18 12       	jr	l_player_move_input_00134
1805  0646              l_player_move_input_00131:
1806  0646  21 00 00    	ld	hl,_dirs
1807  0649  CB 5E       	bit	3, (hl)
1808  064B  20 0B       	jr	NZ,l_player_move_input_00134
1809  064D  21 00 00    	ld	hl,_dirs
1810  0650  CB 56       	bit	2, (hl)
1811  0652  20 04       	jr	NZ,l_player_move_input_00134
1812  0654  2E 00       	ld	l,0x00
1813  0656  18 18       	jr	l_player_move_input_00137
1814  0658              l_player_move_input_00134:
1815  0658  2A 00 00    	ld	hl,(_sprite)
1816  065B  26 00       	ld	h,0x00
1817  065D  01 00 00    	ld	bc,_state
1818  0660  09          	add	hl,bc
1819  0661  3A 00 00    	ld	a,(_s_state)
1820  0664  77          	ld	(hl),a
1821  0665  2E 54       	ld	l,0x54
1822  0667  CD A5 04    	call	_player_tile
1823  066A  2E 01       	ld	l,0x01
1824  066C  18 02       	jr	l_player_move_input_00137
1825  066E              l_player_move_input_00136:
1826  066E  2E 00       	ld	l,0x00
1827  0670              l_player_move_input_00137:
1828  0670  C9          	ret
1829  0671              	SECTION code_compiler
1830  0671              ;	---------------------------------
1831  0671              ; Function player_fire
1832  0671              ; ---------------------------------
1833  0671              _player_fire:
1834  0671  21 00 00    	ld	hl,_dirs
1835  0674  CB 7E       	bit	7, (hl)
1836  0676  28 33       	jr	Z,l_player_fire_00108
1837  0678  21 00 00    	ld	hl,_dirs
1838  067B  CB 4E       	bit	1, (hl)
1839  067D  28 2C       	jr	Z,l_player_fire_00108
1840  067F  21 00 00    	ld	hl,_player_mana
1841  0682  7E          	ld	a, (hl)
1842  0683  B7          	or	a, a
1843  0684  28 21       	jr	Z,l_player_fire_00105
1844  0686  3A 07 00    	ld	a,(_bullet_col + 0x0007)
1845  0689  3C          	inc	a
1846  068A  20 1B       	jr	NZ,l_player_fire_00105
1847  068C  3E 05       	ld	a,0x05
1848  068E  96          	sub	a, (hl)
1849  068F  30 06       	jr	NC,l_player_fire_00102
1850  0691  7E          	ld	a, (hl)
1851  0692  C6 FB       	add	a,0xfb
1852  0694  77          	ld	(hl), a
1853  0695  18 05       	jr	l_player_fire_00103
1854  0697              l_player_fire_00102:
1855  0697  21 00 00    	ld	hl,_player_mana
1856  069A  36 00       	ld	(hl),0x00
1857  069C              l_player_fire_00103:
1858  069C  CD 00 00    	call	_game_update_stats
1859  069F  21 07 70    	ld	hl,0x7007
1860  06A2  E5          	push	hl
1861  06A3  CD 00 00    	call	_game_shoot_fire
1862  06A6  F1          	pop	af
1863  06A7              l_player_fire_00105:
1864  06A7  2E 01       	ld	l,0x01
1865  06A9  18 02       	jr	l_player_fire_00110
1866  06AB              l_player_fire_00108:
1867  06AB  2E 00       	ld	l,0x00
1868  06AD              l_player_fire_00110:
1869  06AD  C9          	ret
1870  06AE              	SECTION code_compiler
1871  06AE              ;	---------------------------------
1872  06AE              ; Function player_check_map
1873  06AE              ; ---------------------------------
1874  06AE              _player_check_map:
1875  06AE  2A 00 00    	ld	hl,(_sprite)
1876  06B1  26 00       	ld	h,0x00
1877  06B3  5D          	ld	e,l
1878  06B4  01 00 00    	ld	bc,_col
1879  06B7  09          	add	hl,bc
1880  06B8  46          	ld	b,(hl)
1881  06B9  16 00       	ld	d,0x00
1882  06BB  21 00 00    	ld	hl,_lin
1883  06BE  19          	add	hl,de
1884  06BF  4E          	ld	c, (hl)
1885  06C0  C5          	push	bc
1886  06C1  CD 00 00    	call	_spr_calc_index
1887  06C4  F1          	pop	af
1888  06C5  7D          	ld	a,l
1889  06C6  32 00 00    	ld	(_sprite_curr_index),a
1890  06C9  2A 00 00    	ld	hl,(_sprite)
1891  06CC  26 00       	ld	h,0x00
1892  06CE  01 00 00    	ld	bc,_col
1893  06D1  09          	add	hl,bc
1894  06D2  4E          	ld	c, (hl)
1895  06D3  3A 00 00    	ld	a,(_sprite)
1896  06D6  5F          	ld	e,a
1897  06D7  16 00       	ld	d,0x00
1898  06D9  21 00 00    	ld	hl,_lin
1899  06DC  19          	add	hl,de
1900  06DD  7E          	ld	a,(hl)
1901  06DE  E6 0F       	and	a,0x0f
1902  06E0  CB 41       	bit	0, c
1903  06E2  20 17       	jr	NZ,l_player_check_map_00108
1904  06E4  B7          	or	a, a
1905  06E5  20 05       	jr	NZ,l_player_check_map_00102
1906  06E7  CD 26 07    	call	_player_pick_item
1907  06EA  18 39       	jr	l_player_check_map_00110
1908  06EC              l_player_check_map_00102:
1909  06EC  CD 26 07    	call	_player_pick_item
1910  06EF  21 00 00    	ld	hl,_sprite_curr_index
1911  06F2  7E          	ld	a, (hl)
1912  06F3  C6 10       	add	a,0x10
1913  06F5  77          	ld	(hl), a
1914  06F6  CD 26 07    	call	_player_pick_item
1915  06F9  18 2A       	jr	l_player_check_map_00110
1916  06FB              l_player_check_map_00108:
1917  06FB  B7          	or	a, a
1918  06FC  20 0C       	jr	NZ,l_player_check_map_00105
1919  06FE  CD 26 07    	call	_player_pick_item
1920  0701  21 00 00    	ld	hl,_sprite_curr_index
1921  0704  34          	inc	(hl)
1922  0705  CD 26 07    	call	_player_pick_item
1923  0708  18 1B       	jr	l_player_check_map_00110
1924  070A              l_player_check_map_00105:
1925  070A  CD 26 07    	call	_player_pick_item
1926  070D  21 00 00    	ld	hl,_sprite_curr_index
1927  0710  34          	inc	(hl)
1928  0711  CD 26 07    	call	_player_pick_item
1929  0714  21 00 00    	ld	hl,_sprite_curr_index
1930  0717  7E          	ld	a, (hl)
1931  0718  C6 0F       	add	a,0x0f
1932  071A  77          	ld	(hl), a
1933  071B  CD 26 07    	call	_player_pick_item
1934  071E  21 00 00    	ld	hl,_sprite_curr_index
1935  0721  34          	inc	(hl)
1936  0722  CD 26 07    	call	_player_pick_item
1937  0725              l_player_check_map_00110:
1938  0725  C9          	ret
1939  0726              	SECTION code_compiler
1940  0726              ;	---------------------------------
1941  0726              ; Function player_pick_item
1942  0726              ; ---------------------------------
1943  0726              _player_pick_item:
1944  0726  2A 00 00    	ld	hl,(_sprite_curr_index)
1945  0729  26 00       	ld	h,0x00
1946  072B  01 00 00    	ld	bc,_scr_map
1947  072E  09          	add	hl,bc
1948  072F  4E          	ld	c,(hl)
1949  0730  3E 27       	ld	a,0x27
1950  0732  91          	sub	a, c
1951  0733  3E 00       	ld	a,0x00
1952  0735  17          	rla
1953  0736  47          	ld	b, a
1954  0737  79          	ld	a, c
1955  0738  D6 20       	sub	a,0x20
1956  073A  DA 0F 08    	jp	C, l_player_pick_item_00107
1957  073D  CB 40       	bit	0, b
1958  073F  C2 0F 08    	jp	NZ, l_player_pick_item_00107
1959  0742  CD 00 00    	call	_ay_reset
1960  0745  21 00 00    	ld	hl,_ay_effect_10
1961  0748  CD 00 00    	call	_ay_fx_play
1962  074B  C5          	push	bc
1963  074C  CD 00 00    	call	_sound_coin
1964  074F  C1          	pop	bc
1965  0750  2A 00 00    	ld	hl,(_sprite_curr_index)
1966  0753  26 00       	ld	h,0x00
1967  0755  11 00 00    	ld	de,_scr_map
1968  0758  19          	add	hl,de
1969  0759  AF          	xor	a,a
1970  075A  77          	ld	(hl),a
1971  075B  3A 00 00    	ld	a,(_sprite_curr_index)
1972  075E  5F          	ld	e,a
1973  075F  16 00       	ld	d,0x00
1974  0761  C5          	push	bc
1975  0762  D5          	push	de
1976  0763  CD 00 00    	call	_game_obj_set
1977  0766  F1          	pop	af
1978  0767  C1          	pop	bc
1979  0768  3A 00 00    	ld	a,(_sprite_curr_index)
1980  076B  07          	rlca
1981  076C  07          	rlca
1982  076D  07          	rlca
1983  076E  07          	rlca
1984  076F  E6 0F       	and	a,0x0f
1985  0771  07          	rlca
1986  0772  07          	rlca
1987  0773  07          	rlca
1988  0774  07          	rlca
1989  0775  E6 F0       	and	a,0xf0
1990  0777  32 00 00    	ld	(_s_lin1),a
1991  077A  3A 00 00    	ld	a,(_sprite_curr_index)
1992  077D  E6 0F       	and	a,0x0f
1993  077F  87          	add	a, a
1994  0780  32 00 00    	ld	(_s_col1),a
1995  0783  C5          	push	bc
1996  0784  21 00 00    	ld	hl,0x0000
1997  0787  E5          	push	hl
1998  0788  21 78 03    	ld	hl,0x0378
1999  078B  E5          	push	hl
2000  078C  F5          	push	af
2001  078D  33          	inc	sp
2002  078E  3A 00 00    	ld	a,(_s_lin1)
2003  0791  F5          	push	af
2004  0792  33          	inc	sp
2005  0793  CD 00 00    	call	_spr_add_anim
2006  0796  F1          	pop	af
2007  0797  F1          	pop	af
2008  0798  F1          	pop	af
2009  0799  C1          	pop	bc
2010  079A  79          	ld	a,c
2011  079B  FE 1C       	cp	a,0x1c
2012  079D  28 0E       	jr	Z,l_player_pick_item_00101
2013  079F  FE 1D       	cp	a,0x1d
2014  07A1  28 23       	jr	Z,l_player_pick_item_00102
2015  07A3  FE 1E       	cp	a,0x1e
2016  07A5  28 38       	jr	Z,l_player_pick_item_00103
2017  07A7  D6 1F       	sub	a,0x1f
2018  07A9  28 4D       	jr	Z,l_player_pick_item_00104
2019  07AB  18 62       	jr	l_player_pick_item_00107
2020  07AD              l_player_pick_item_00101:
2021  07AD  21 00 00    	ld	hl,_player_keys
2022  07B0  36 01       	ld	(hl),0x01
2023  07B2  21 00 00    	ld	hl,_screen_ink
2024  07B5  36 07       	ld	(hl),0x07
2025  07B7  C5          	push	bc
2026  07B8  21 00 00    	ld	hl,___str_0
2027  07BB  E5          	push	hl
2028  07BC  21 16 03    	ld	hl,0x0316
2029  07BF  E5          	push	hl
2030  07C0  CD 00 00    	call	_zx_print_str
2031  07C3  C1          	pop	bc
2032  07C4  18 49       	jr	l_player_pick_item_00107
2033  07C6              l_player_pick_item_00102:
2034  07C6  21 01 00    	ld	hl, +(_player_keys + 0x0001)
2035  07C9  36 01       	ld	(hl),0x01
2036  07CB  21 00 00    	ld	hl,_screen_ink
2037  07CE  36 02       	ld	(hl),0x02
2038  07D0  C5          	push	bc
2039  07D1  21 00 00    	ld	hl,___str_0
2040  07D4  E5          	push	hl
2041  07D5  21 16 04    	ld	hl,0x0416
2042  07D8  E5          	push	hl
2043  07D9  CD 00 00    	call	_zx_print_str
2044  07DC  C1          	pop	bc
2045  07DD  18 30       	jr	l_player_pick_item_00107
2046  07DF              l_player_pick_item_00103:
2047  07DF  21 02 00    	ld	hl, +(_player_keys + 0x0002)
2048  07E2  36 01       	ld	(hl),0x01
2049  07E4  21 00 00    	ld	hl,_screen_ink
2050  07E7  36 04       	ld	(hl),0x04
2051  07E9  C5          	push	bc
2052  07EA  21 00 00    	ld	hl,___str_0
2053  07ED  E5          	push	hl
2054  07EE  21 16 05    	ld	hl,0x0516
2055  07F1  E5          	push	hl
2056  07F2  CD 00 00    	call	_zx_print_str
2057  07F5  C1          	pop	bc
2058  07F6  18 17       	jr	l_player_pick_item_00107
2059  07F8              l_player_pick_item_00104:
2060  07F8  21 03 00    	ld	hl, +(_player_keys + 0x0003)
2061  07FB  36 01       	ld	(hl),0x01
2062  07FD  21 00 00    	ld	hl,_screen_ink
2063  0800  36 05       	ld	(hl),0x05
2064  0802  C5          	push	bc
2065  0803  21 00 00    	ld	hl,___str_0
2066  0806  E5          	push	hl
2067  0807  21 16 06    	ld	hl,0x0616
2068  080A  E5          	push	hl
2069  080B  CD 00 00    	call	_zx_print_str
2070  080E  C1          	pop	bc
2071  080F              l_player_pick_item_00107:
2072  080F  CB 40       	bit	0, b
2073  0811  C8          	ret	Z
2074  0812  79          	ld	a, c
2075  0813  D6 30       	sub	a,0x30
2076  0815  D0          	ret	NC
2077  0816  3A 07 00    	ld	a,(_lin + 0x0007)
2078  0819  E6 03       	and	a,0x03
2079  081B  C8          	ret	Z
2080  081C  2E 06       	ld	l,0x06
2081  081E  CD 00 00    	call	_zx_border_fastcall
2082  0821  2E 32       	ld	l,0x32
2083  0823  CD 01 0F    	call	_player_hit
2084  0826  C9          	ret
2085  0827              	SECTION rodata_compiler
2086  0000              ___str_0:
2087  0000  5D          	DEFM "]"
2088  0001  00          	DEFB 0x00
2089  0002              	SECTION code_compiler
2090  0827              ;	---------------------------------
2091  0827              ; Function player_hit_platform
2092  0827              ; ---------------------------------
2093  0827              _player_hit_platform:
2094  0827  3A 00 00    	ld	a,(_player_hit_lin)
2095  082A  B7          	or	a, a
2096  082B  C2 6B 0A    	jp	NZ, l_player_hit_platform_00137
2097  082E  2A 00 00    	ld	hl,(_sprite)
2098  0831  26 00       	ld	h,0x00
2099  0833  01 00 00    	ld	bc,_lin
2100  0836  09          	add	hl,bc
2101  0837  4E          	ld	c,(hl)
2102  0838  3E 10       	ld	a,0x10
2103  083A  91          	sub	a, c
2104  083B  D2 6B 0A    	jp	NC, l_player_hit_platform_00137
2105  083E  01 00 00    	ld	bc,_scr_map
2106  0841  2A 00 00    	ld	hl,(_index1)
2107  0844  09          	add	hl,bc
2108  0845  7E          	ld	a,(hl)
2109  0846  D6 45       	sub	a,0x45
2110  0848  DA 6B 0A    	jp	C, l_player_hit_platform_00137
2111  084B  01 00 00    	ld	bc,_spr_timer+0
2112  084E  2A 00 00    	ld	hl,(_sprite)
2113  0851  26 00       	ld	h,0x00
2114  0853  29          	add	hl, hl
2115  0854  09          	add	hl,bc
2116  0855  ED 5B 00 00 	ld	de,(_curr_time)
2117  0859  73          	ld	(hl),e
2118  085A  23          	inc	hl
2119  085B  72          	ld	(hl),d
2120  085C  2A 00 00    	ld	hl,(_sprite)
2121  085F  26 00       	ld	h,0x00
2122  0861  01 00 00    	ld	bc,_lin
2123  0864  09          	add	hl,bc
2124  0865  4E          	ld	c,(hl)
2125  0866  06 00       	ld	b,0x00
2126  0868  79          	ld	a, c
2127  0869  C6 F8       	add	a,0xf8
2128  086B  4F          	ld	c, a
2129  086C  78          	ld	a, b
2130  086D  CE FF       	adc	a,0xff
2131  086F  5F          	ld	e, a
2132  0870  06 04       	ld	b,0x04
2133  0872              l_player_hit_platform_00226:
2134  0872  CB 2B       	sra	e
2135  0874  CB 19       	rr	c
2136  0876  10 FA       	djnz	l_player_hit_platform_00226
2137  0878  79          	ld	a, c
2138  0879  07          	rlca
2139  087A  07          	rlca
2140  087B  07          	rlca
2141  087C  07          	rlca
2142  087D  E6 F0       	and	a,0xf0
2143  087F  C6 08       	add	a,0x08
2144  0881  32 00 00    	ld	(_player_hit_lin),a
2145  0884  2A 00 00    	ld	hl,(_sprite)
2146  0887  26 00       	ld	h,0x00
2147  0889  01 00 00    	ld	bc,_col
2148  088C  09          	add	hl,bc
2149  088D  4E          	ld	c,(hl)
2150  088E  CB 41       	bit	0,c
2151  0890  20 06       	jr	NZ,l_player_hit_platform_00111
2152  0892  21 00 00    	ld	hl,_player_hit_col
2153  0895  71          	ld	(hl), c
2154  0896  18 33       	jr	l_player_hit_platform_00112
2155  0898              l_player_hit_platform_00111:
2156  0898  2A 00 00    	ld	hl,(_sprite)
2157  089B  26 00       	ld	h,0x00
2158  089D  11 00 00    	ld	de,_state
2159  08A0  19          	add	hl,de
2160  08A1  5E          	ld	e, (hl)
2161  08A2  41          	ld	b, c
2162  08A3  04          	inc	b
2163  08A4  0D          	dec	c
2164  08A5  CB 5B       	bit	3, e
2165  08A7  28 12       	jr	Z,l_player_hit_platform_00108
2166  08A9  3A 00 00    	ld	a,(_g_player_hit_right)
2167  08AC  B7          	or	a, a
2168  08AD  28 06       	jr	Z,l_player_hit_platform_00102
2169  08AF  21 00 00    	ld	hl,_player_hit_col
2170  08B2  70          	ld	(hl), b
2171  08B3  18 16       	jr	l_player_hit_platform_00112
2172  08B5              l_player_hit_platform_00102:
2173  08B5  21 00 00    	ld	hl,_player_hit_col
2174  08B8  71          	ld	(hl), c
2175  08B9  18 10       	jr	l_player_hit_platform_00112
2176  08BB              l_player_hit_platform_00108:
2177  08BB  3A 00 00    	ld	a,(_g_player_hit_left)
2178  08BE  B7          	or	a, a
2179  08BF  28 06       	jr	Z,l_player_hit_platform_00105
2180  08C1  21 00 00    	ld	hl,_player_hit_col
2181  08C4  71          	ld	(hl), c
2182  08C5  18 04       	jr	l_player_hit_platform_00112
2183  08C7              l_player_hit_platform_00105:
2184  08C7  21 00 00    	ld	hl,_player_hit_col
2185  08CA  70          	ld	(hl), b
2186  08CB              l_player_hit_platform_00112:
2187  08CB  01 00 00    	ld	bc,_scr_map
2188  08CE  2A 00 00    	ld	hl,(_index1)
2189  08D1  09          	add	hl,bc
2190  08D2  7E          	ld	a,(hl)
2191  08D3  FE 4B       	cp	a,0x4b
2192  08D5  28 05       	jr	Z,l_player_hit_platform_00133
2193  08D7  D6 4C       	sub	a,0x4c
2194  08D9  C2 5F 0A    	jp	NZ,l_player_hit_platform_00134
2195  08DC              l_player_hit_platform_00133:
2196  08DC  2E 01       	ld	l,0x01
2197  08DE  CD 00 00    	call	_zx_border_fastcall
2198  08E1  21 00 00    	ld	hl,_tmp0
2199  08E4  36 00       	ld	(hl),0x00
2200  08E6              l_player_hit_platform_00130:
2201  08E6  21 00 00    	ld	hl,_tmp0
2202  08E9  7E          	ld	a, (hl)
2203  08EA  D6 07       	sub	a,0x07
2204  08EC  D2 5F 0A    	jp	NC, l_player_hit_platform_00134
2205  08EF  4E          	ld	c,(hl)
2206  08F0  06 00       	ld	b,0x00
2207  08F2  21 00 00    	ld	hl,_mush_index
2208  08F5  09          	add	hl,bc
2209  08F6  4E          	ld	c, (hl)
2210  08F7  06 00       	ld	b,0x00
2211  08F9  2A 00 00    	ld	hl,(_index1)
2212  08FC  AF          	xor	a,a
2213  08FD  ED 42       	sbc	hl,bc
2214  08FF  C2 58 0A    	jp	NZ,l_player_hit_platform_00129
2215  0902  2A 00 00    	ld	hl,(_sprite)
2216  0905  26 00       	ld	h,0x00
2217  0907  01 00 00    	ld	bc,_lin
2218  090A  09          	add	hl,bc
2219  090B  7E          	ld	a,(hl)
2220  090C  07          	rlca
2221  090D  07          	rlca
2222  090E  07          	rlca
2223  090F  07          	rlca
2224  0910  E6 0F       	and	a,0x0f
2225  0912  07          	rlca
2226  0913  07          	rlca
2227  0914  07          	rlca
2228  0915  07          	rlca
2229  0916  E6 F0       	and	a,0xf0
2230  0918  C6 E0       	add	a,0xe0
2231  091A  32 00 00    	ld	(_s_lin1),a
2232  091D  2A 00 00    	ld	hl,(_sprite)
2233  0920  26 00       	ld	h,0x00
2234  0922  01 00 00    	ld	bc,_col
2235  0925  09          	add	hl,bc
2236  0926  7E          	ld	a,(hl)
2237  0927  CB 3F       	srl	a
2238  0929  87          	add	a, a
2239  092A  32 00 00    	ld	(_s_col1),a
2240  092D  21 00 00    	ld	hl,_tmp
2241  0930  36 00       	ld	(hl),0x00
2242  0932              l_player_hit_platform_00115:
2243  0932  21 00 00    	ld	hl,_tmp
2244  0935  7E          	ld	a, (hl)
2245  0936  D6 07       	sub	a,0x07
2246  0938  30 1C       	jr	NC,l_player_hit_platform_00117
2247  093A  4E          	ld	c,(hl)
2248  093B  06 00       	ld	b,0x00
2249  093D  21 00 00    	ld	hl,_mush_index
2250  0940  09          	add	hl,bc
2251  0941  4E          	ld	c, (hl)
2252  0942  06 00       	ld	b,0x00
2253  0944  21 00 00    	ld	hl,_index1
2254  0947  7E          	ld	a, (hl)
2255  0948  91          	sub	a, c
2256  0949  20 05       	jr	NZ,l_player_hit_platform_00235
2257  094B  23          	inc	hl
2258  094C  7E          	ld	a, (hl)
2259  094D  90          	sub	a, b
2260  094E  28 06       	jr	Z,l_player_hit_platform_00117
2261  0950              l_player_hit_platform_00235:
2262  0950  21 00 00    	ld	hl,_tmp
2263  0953  34          	inc	(hl)
2264  0954  18 DC       	jr	l_player_hit_platform_00115
2265  0956              l_player_hit_platform_00117:
2266  0956  2A 00 00    	ld	hl,(_tmp)
2267  0959  26 00       	ld	h,0x00
2268  095B  01 00 00    	ld	bc,_mush_class
2269  095E  09          	add	hl,bc
2270  095F  7E          	ld	a,(hl)
2271  0960  FE 78       	cp	a,0x78
2272  0962  28 18       	jr	Z,l_player_hit_platform_00118
2273  0964  FE 79       	cp	a,0x79
2274  0966  28 2F       	jr	Z,l_player_hit_platform_00119
2275  0968  FE 7A       	cp	a,0x7a
2276  096A  28 5F       	jr	Z,l_player_hit_platform_00121
2277  096C  FE 7B       	cp	a,0x7b
2278  096E  28 41       	jr	Z,l_player_hit_platform_00120
2279  0970  FE 7C       	cp	a,0x7c
2280  0972  CA FF 09    	jp	Z,l_player_hit_platform_00123
2281  0975  D6 7D       	sub	a,0x7d
2282  0977  28 6C       	jr	Z,l_player_hit_platform_00122
2283  0979  C3 17 0A    	jp	l_player_hit_platform_00124
2284  097C              l_player_hit_platform_00118:
2285  097C  2E 02       	ld	l,0x02
2286  097E  CD 00 00    	call	_zx_border_fastcall
2287  0981  3A 00 00    	ld	a,(_s_col1)
2288  0984  21 08 FF    	ld	hl,0xff08
2289  0987  E5          	push	hl
2290  0988  F5          	push	af
2291  0989  33          	inc	sp
2292  098A  3A 00 00    	ld	a,(_s_lin1)
2293  098D  F5          	push	af
2294  098E  33          	inc	sp
2295  098F  CD 00 00    	call	_enemy_init
2296  0992  F1          	pop	af
2297  0993  F1          	pop	af
2298  0994  C3 17 0A    	jp	l_player_hit_platform_00124
2299  0997              l_player_hit_platform_00119:
2300  0997  2E 02       	ld	l,0x02
2301  0999  CD 00 00    	call	_zx_border_fastcall
2302  099C  3A 00 00    	ld	a,(_s_col1)
2303  099F  21 08 01    	ld	hl,0x0108
2304  09A2  E5          	push	hl
2305  09A3  F5          	push	af
2306  09A4  33          	inc	sp
2307  09A5  3A 00 00    	ld	a,(_s_lin1)
2308  09A8  F5          	push	af
2309  09A9  33          	inc	sp
2310  09AA  CD 00 00    	call	_enemy_init
2311  09AD  F1          	pop	af
2312  09AE  F1          	pop	af
2313  09AF  18 66       	jr	l_player_hit_platform_00124
2314  09B1              l_player_hit_platform_00120:
2315  09B1  2E 01       	ld	l,0x01
2316  09B3  CD 00 00    	call	_zx_border_fastcall
2317  09B6  3A 00 00    	ld	a,(_s_col1)
2318  09B9  21 07 01    	ld	hl,0x0107
2319  09BC  E5          	push	hl
2320  09BD  F5          	push	af
2321  09BE  33          	inc	sp
2322  09BF  3A 00 00    	ld	a,(_s_lin1)
2323  09C2  F5          	push	af
2324  09C3  33          	inc	sp
2325  09C4  CD 00 00    	call	_enemy_init
2326  09C7  F1          	pop	af
2327  09C8  F1          	pop	af
2328  09C9  18 4C       	jr	l_player_hit_platform_00124
2329  09CB              l_player_hit_platform_00121:
2330  09CB  2E 01       	ld	l,0x01
2331  09CD  CD 00 00    	call	_zx_border_fastcall
2332  09D0  3A 00 00    	ld	a,(_s_col1)
2333  09D3  21 07 FF    	ld	hl,0xff07
2334  09D6  E5          	push	hl
2335  09D7  F5          	push	af
2336  09D8  33          	inc	sp
2337  09D9  3A 00 00    	ld	a,(_s_lin1)
2338  09DC  F5          	push	af
2339  09DD  33          	inc	sp
2340  09DE  CD 00 00    	call	_enemy_init
2341  09E1  F1          	pop	af
2342  09E2  F1          	pop	af
2343  09E3  18 32       	jr	l_player_hit_platform_00124
2344  09E5              l_player_hit_platform_00122:
2345  09E5  2E 05       	ld	l,0x05
2346  09E7  CD 00 00    	call	_zx_border_fastcall
2347  09EA  3A 00 00    	ld	a,(_s_col1)
2348  09ED  21 06 01    	ld	hl,0x0106
2349  09F0  E5          	push	hl
2350  09F1  F5          	push	af
2351  09F2  33          	inc	sp
2352  09F3  3A 00 00    	ld	a,(_s_lin1)
2353  09F6  F5          	push	af
2354  09F7  33          	inc	sp
2355  09F8  CD 00 00    	call	_enemy_init
2356  09FB  F1          	pop	af
2357  09FC  F1          	pop	af
2358  09FD  18 18       	jr	l_player_hit_platform_00124
2359  09FF              l_player_hit_platform_00123:
2360  09FF  2E 05       	ld	l,0x05
2361  0A01  CD 00 00    	call	_zx_border_fastcall
2362  0A04  3A 00 00    	ld	a,(_s_col1)
2363  0A07  21 06 FF    	ld	hl,0xff06
2364  0A0A  E5          	push	hl
2365  0A0B  F5          	push	af
2366  0A0C  33          	inc	sp
2367  0A0D  3A 00 00    	ld	a,(_s_lin1)
2368  0A10  F5          	push	af
2369  0A11  33          	inc	sp
2370  0A12  CD 00 00    	call	_enemy_init
2371  0A15  F1          	pop	af
2372  0A16  F1          	pop	af
2373  0A17              l_player_hit_platform_00124:
2374  0A17  2A 00 00    	ld	hl,(_index1)
2375  0A1A  01 F0 FF    	ld	bc,0xfff0
2376  0A1D  09          	add	hl,bc
2377  0A1E  01 00 00    	ld	bc,_scr_map
2378  0A21  09          	add	hl,bc
2379  0A22  36 00       	ld	(hl),0x00
2380  0A24  01 00 00    	ld	bc,_scr_map
2381  0A27  2A 00 00    	ld	hl,(_index1)
2382  0A2A  09          	add	hl,bc
2383  0A2B  7E          	ld	a,(hl)
2384  0A2C  D6 4B       	sub	a,0x4b
2385  0A2E  4D          	ld	c,l
2386  0A2F  44          	ld	b,h
2387  0A30  20 05       	jr	NZ,l_player_hit_platform_00126
2388  0A32  3E 44       	ld	a,0x44
2389  0A34  02          	ld	(bc), a
2390  0A35  18 03       	jr	l_player_hit_platform_00127
2391  0A37              l_player_hit_platform_00126:
2392  0A37  3E 46       	ld	a,0x46
2393  0A39  02          	ld	(bc), a
2394  0A3A              l_player_hit_platform_00127:
2395  0A3A  2A 00 00    	ld	hl,(_index1)
2396  0A3D  01 F0 FF    	ld	bc,0xfff0
2397  0A40  09          	add	hl,bc
2398  0A41  E5          	push	hl
2399  0A42  CD 00 00    	call	_game_obj_set
2400  0A45  F1          	pop	af
2401  0A46  3A 00 00    	ld	a,(_s_lin1)
2402  0A49  C6 10       	add	a,0x10
2403  0A4B  4F          	ld	c, a
2404  0A4C  3A 00 00    	ld	a, (_s_col1)
2405  0A4F  47          	ld	b,a
2406  0A50  C5          	push	bc
2407  0A51  3E 44       	ld	a,0x44
2408  0A53  F5          	push	af
2409  0A54  33          	inc	sp
2410  0A55  CD 00 00    	call	_NIRVANAP_drawT_callee
2411  0A58              l_player_hit_platform_00129:
2412  0A58  21 00 00    	ld	hl,_tmp0
2413  0A5B  34          	inc	(hl)
2414  0A5C  C3 E6 08    	jp	l_player_hit_platform_00130
2415  0A5F              l_player_hit_platform_00134:
2416  0A5F  2E 01       	ld	l,0x01
2417  0A61  CD 00 00    	call	_spr_brick_anim
2418  0A64  CD 00 00    	call	_sound_hit_brick
2419  0A67  2E 01       	ld	l,0x01
2420  0A69  18 02       	jr	l_player_hit_platform_00140
2421  0A6B              l_player_hit_platform_00137:
2422  0A6B  2E 00       	ld	l,0x00
2423  0A6D              l_player_hit_platform_00140:
2424  0A6D  C9          	ret
2425  0A6E              	SECTION code_compiler
2426  0A6E              ;	---------------------------------
2427  0A6E              ; Function player_hit_platform_clear
2428  0A6E              ; ---------------------------------
2429  0A6E              _player_hit_platform_clear:
2430  0A6E  2A 00 00    	ld	hl,(_sprite)
2431  0A71  26 00       	ld	h,0x00
2432  0A73  29          	add	hl, hl
2433  0A74  11 00 00    	ld	de,_spr_timer
2434  0A77  19          	add	hl, de
2435  0A78  4E          	ld	c, (hl)
2436  0A79  23          	inc	hl
2437  0A7A  46          	ld	b, (hl)
2438  0A7B  21 04 00    	ld	hl,0x0004
2439  0A7E  E5          	push	hl
2440  0A7F  C5          	push	bc
2441  0A80  CD 00 00    	call	_game_check_time
2442  0A83  F1          	pop	af
2443  0A84  F1          	pop	af
2444  0A85  7D          	ld	a, l
2445  0A86  B7          	or	a, a
2446  0A87  C8          	ret	Z
2447  0A88  2A FF FF    	ld	hl,(_player_hit_col - 1)
2448  0A8B  3A 00 00    	ld	a,(_player_hit_lin)
2449  0A8E  6F          	ld	l,a
2450  0A8F  E5          	push	hl
2451  0A90  CD 00 00    	call	_spr_calc_index
2452  0A93  F1          	pop	af
2453  0A94  22 00 00    	ld	(_index1),hl
2454  0A97  2E 00       	ld	l,0x00
2455  0A99  CD 00 00    	call	_spr_brick_anim
2456  0A9C  21 00 00    	ld	hl,_player_hit_lin
2457  0A9F  36 00       	ld	(hl),0x00
2458  0AA1  21 00 00    	ld	hl,_player_hit_col
2459  0AA4  36 00       	ld	(hl),0x00
2460  0AA6  C9          	ret
2461  0AA7              	SECTION code_compiler
2462  0AA7              ;	---------------------------------
2463  0AA7              ; Function player_score_add
2464  0AA7              ; ---------------------------------
2465  0AA7              _player_score_add:
2466  0AA7  ED 4B 00 00 	ld	bc,(_player_score)
2467  0AAB  09          	add	hl,bc
2468  0AAC  22 00 00    	ld	(_player_score),hl
2469  0AAF  3A 00 00    	ld	a,(_game_score_top)
2470  0AB2  21 00 00    	ld	hl,_player_score
2471  0AB5  96          	sub	a, (hl)
2472  0AB6  3A 01 00    	ld	a,(_game_score_top + 1)
2473  0AB9  23          	inc	hl
2474  0ABA  9E          	sbc	a, (hl)
2475  0ABB  D2 00 00    	jp	NC,_game_print_score
2476  0ABE  2A 00 00    	ld	hl,(_player_score)
2477  0AC1  22 00 00    	ld	(_game_score_top),hl
2478  0AC4  C3 00 00    	jp  _game_print_score
2479  0AC7              	SECTION code_compiler
2480  0AC7              ;	---------------------------------
2481  0AC7              ; Function player_check_floor
2482  0AC7              ; ---------------------------------
2483  0AC7              _player_check_floor:
2484  0AC7  CD 00 00    	call	___sdcc_enter_ix
2485  0ACA  3B          	dec	sp
2486  0ACB  2A 00 00    	ld	hl,(_sprite)
2487  0ACE  26 00       	ld	h,0x00
2488  0AD0  01 00 00    	ld	bc,_col
2489  0AD3  09          	add	hl,bc
2490  0AD4  56          	ld	d, (hl)
2491  0AD5  2A 00 00    	ld	hl,(_sprite)
2492  0AD8  26 00       	ld	h,0x00
2493  0ADA  01 00 00    	ld	bc,_lin
2494  0ADD  09          	add	hl,bc
2495  0ADE  7E          	ld	a,(hl)
2496  0ADF  C6 10       	add	a,0x10
2497  0AE1  5F          	ld	e, a
2498  0AE2  D5          	push	de
2499  0AE3  CD 00 00    	call	_spr_calc_index
2500  0AE6  F1          	pop	af
2501  0AE7  4D          	ld	c, l
2502  0AE8  44          	ld	b, h
2503  0AE9  21 00 00    	ld	hl,_scr_map
2504  0AEC  09          	add	hl, bc
2505  0AED  7E          	ld	a, (hl)
2506  0AEE  DD 77 FF    	ld	(ix-1),a
2507  0AF1  2A 00 00    	ld	hl,(_sprite)
2508  0AF4  26 00       	ld	h,0x00
2509  0AF6  11 00 00    	ld	de,_col
2510  0AF9  19          	add	hl,de
2511  0AFA  7E          	ld	a,(hl)
2512  0AFB  0F          	rrca
2513  0AFC  38 04       	jr	C,l_player_check_floor_00102
2514  0AFE  0E 01       	ld	c,0x01
2515  0B00  18 06       	jr	l_player_check_floor_00103
2516  0B02              l_player_check_floor_00102:
2517  0B02  03          	inc	bc
2518  0B03  21 00 00    	ld	hl,_scr_map
2519  0B06  09          	add	hl, bc
2520  0B07  4E          	ld	c, (hl)
2521  0B08              l_player_check_floor_00103:
2522  0B08  3A 00 00    	ld	a,(_s_lin0)
2523  0B0B  D6 90       	sub	a,0x90
2524  0B0D  20 04       	jr	NZ,l_player_check_floor_00105
2525  0B0F  DD 36 FF 3C 	ld	(ix-1),0x3c
2526  0B13              l_player_check_floor_00105:
2527  0B13  DD 7E FF    	ld	a,(ix-1)
2528  0B16  D6 30       	sub	a,0x30
2529  0B18  38 07       	jr	C,l_player_check_floor_00110
2530  0B1A  DD 7E FF    	ld	a,(ix-1)
2531  0B1D  D6 54       	sub	a,0x54
2532  0B1F  38 1E       	jr	C,l_player_check_floor_00111
2533  0B21              l_player_check_floor_00110:
2534  0B21  79          	ld	a,c
2535  0B22  FE 30       	cp	a,0x30
2536  0B24  38 04       	jr	C,l_player_check_floor_00106
2537  0B26  D6 54       	sub	a,0x54
2538  0B28  38 15       	jr	C,l_player_check_floor_00111
2539  0B2A              l_player_check_floor_00106:
2540  0B2A  2A 00 00    	ld	hl,(_sprite)
2541  0B2D  26 00       	ld	h,0x00
2542  0B2F  01 00 00    	ld	bc,_sprite_speed_alt
2543  0B32  09          	add	hl,bc
2544  0B33  36 02       	ld	(hl),0x02
2545  0B35  21 00 00    	ld	hl,_s_state
2546  0B38  CB CE       	set	1, (hl)
2547  0B3A  2E 00       	ld	l,0x00
2548  0B3C  CD FD 03    	call	_player_check_stairs
2549  0B3F              l_player_check_floor_00111:
2550  0B3F  33          	inc	sp
2551  0B40  DD E1       	pop	ix
2552  0B42  C9          	ret
2553  0B43              	SECTION code_compiler
2554  0B43              ;	---------------------------------
2555  0B43              ; Function player_move_jump
2556  0B43              ; ---------------------------------
2557  0B43              _player_move_jump:
2558  0B43  CD 00 00    	call	___sdcc_enter_ix
2559  0B46  3B          	dec	sp
2560  0B47  21 00 00    	ld	hl,_game_gravity
2561  0B4A  4E          	ld	c, (hl)
2562  0B4B  21 00 00    	ld	hl,_player_vel_y
2563  0B4E  7E          	ld	a, (hl)
2564  0B4F  81          	add	a, c
2565  0B50  77          	ld	(hl), a
2566  0B51  21 00 00    	ld	hl,_sprite_on_air
2567  0B54  36 01       	ld	(hl),0x01
2568  0B56  3A 00 00    	ld	a,(_player_vel_inc)
2569  0B59  B7          	or	a, a
2570  0B5A  28 24       	jr	Z,l_player_move_jump_00106
2571  0B5C  21 00 00    	ld	hl,_dirs
2572  0B5F  CB 7E       	bit	7, (hl)
2573  0B61  20 1D       	jr	NZ,l_player_move_jump_00106
2574  0B63  3A 00 00    	ld	a,(_player_vel_y1)
2575  0B66  21 00 00    	ld	hl,_player_vel_y
2576  0B69  96          	sub	a, (hl)
2577  0B6A  E2 6F 0B    	jp	PO, l_player_move_jump_00247
2578  0B6D  EE 80       	xor	a,0x80
2579  0B6F              l_player_move_jump_00247:
2580  0B6F  F2 80 0B    	jp	P, l_player_move_jump_00106
2581  0B72  21 00 00    	ld	hl,_player_vel_y
2582  0B75  CB 7E       	bit	7,(hl)
2583  0B77  28 07       	jr	Z,l_player_move_jump_00106
2584  0B79  36 00       	ld	(hl),0x00
2585  0B7B  21 00 00    	ld	hl,_player_vel_inc
2586  0B7E  36 00       	ld	(hl),0x00
2587  0B80              l_player_move_jump_00106:
2588  0B80  3E 78       	ld	a,0x78
2589  0B82  21 00 00    	ld	hl,_player_vel_y
2590  0B85  96          	sub	a, (hl)
2591  0B86  E2 8B 0B    	jp	PO, l_player_move_jump_00248
2592  0B89  EE 80       	xor	a,0x80
2593  0B8B              l_player_move_jump_00248:
2594  0B8B  F2 93 0B    	jp	P, l_player_move_jump_00108
2595  0B8E  21 00 00    	ld	hl,_player_vel_y
2596  0B91  36 78       	ld	(hl),0x78
2597  0B93              l_player_move_jump_00108:
2598  0B93  21 00 00    	ld	hl,_player_vel_y
2599  0B96  7E          	ld	a, (hl)
2600  0B97  EE 80       	xor	a,0x80
2601  0B99  D6 08       	sub	a,0x08
2602  0B9B  30 02       	jr	NC,l_player_move_jump_00110
2603  0B9D  36 88       	ld	(hl),0x88
2604  0B9F              l_player_move_jump_00110:
2605  0B9F  3A 00 00    	ld	a,(_player_vel_y)
2606  0BA2  5F          	ld	e,a
2607  0BA3  17          	rla
2608  0BA4  9F          	sbc	a, a
2609  0BA5  57          	ld	d, a
2610  0BA6  CB 43       	bit	0,e
2611  0BA8  21 00 00    	ld	hl,_s_lin1
2612  0BAB  73          	ld	(hl),e
2613  0BAC  28 04       	jr	Z,l_player_move_jump_00112
2614  0BAE  21 00 00    	ld	hl,_s_lin1
2615  0BB1  35          	dec	(hl)
2616  0BB2              l_player_move_jump_00112:
2617  0BB2  2A 00 00    	ld	hl,(_sprite)
2618  0BB5  26 00       	ld	h,0x00
2619  0BB7  01 00 00    	ld	bc,_lin
2620  0BBA  09          	add	hl,bc
2621  0BBB  7E          	ld	a,(hl)
2622  0BBC  DD 77 FF    	ld	(ix-1),a
2623  0BBF  4D          	ld	c,l
2624  0BC0  44          	ld	b,h
2625  0BC1  21 00 00    	ld	hl,_s_lin1
2626  0BC4  86          	add	a, (hl)
2627  0BC5  77          	ld	(hl), a
2628  0BC6  3E 90       	ld	a,0x90
2629  0BC8  96          	sub	a, (hl)
2630  0BC9  30 0E       	jr	NC,l_player_move_jump_00117
2631  0BCB  3E C8       	ld	a,0xc8
2632  0BCD  96          	sub	a, (hl)
2633  0BCE  30 04       	jr	NC,l_player_move_jump_00114
2634  0BD0  36 00       	ld	(hl),0x00
2635  0BD2  18 05       	jr	l_player_move_jump_00117
2636  0BD4              l_player_move_jump_00114:
2637  0BD4  21 00 00    	ld	hl,_s_lin1
2638  0BD7  36 90       	ld	(hl),0x90
2639  0BD9              l_player_move_jump_00117:
2640  0BD9  3A 00 00    	ld	a,(_s_lin0)
2641  0BDC  07          	rlca
2642  0BDD  07          	rlca
2643  0BDE  07          	rlca
2644  0BDF  07          	rlca
2645  0BE0  E6 0F       	and	a,0x0f
2646  0BE2  DD 77 FF    	ld	(ix-1),a
2647  0BE5  CB 7A       	bit	7, d
2648  0BE7  28 73       	jr	Z,l_player_move_jump_00140
2649  0BE9  21 00 00    	ld	hl,_s_state
2650  0BEC  7E          	ld	a,(hl)
2651  0BED  F6 01       	or	a,0x01
2652  0BEF  E6 FD       	and	a,0xfd
2653  0BF1  77          	ld	(hl),a
2654  0BF2  21 00 00    	ld	hl,_s_lin1
2655  0BF5  DD 7E FF    	ld	a,(ix-1)
2656  0BF8  96          	sub	a,(hl)
2657  0BF9  20 04       	jr	NZ,l_player_move_jump_00250
2658  0BFB  3E 01       	ld	a,0x01
2659  0BFD  18 01       	jr	l_player_move_jump_00251
2660  0BFF              l_player_move_jump_00250:
2661  0BFF  AF          	xor	a,a
2662  0C00              l_player_move_jump_00251:
2663  0C00  EE 01       	xor	a,0x01
2664  0C02  28 51       	jr	Z,l_player_move_jump_00124
2665  0C04  2A 00 00    	ld	hl,(_sprite)
2666  0C07  26 00       	ld	h,0x00
2667  0C09  01 00 00    	ld	bc,_col
2668  0C0C  09          	add	hl,bc
2669  0C0D  7E          	ld	a,(hl)
2670  0C0E  F5          	push	af
2671  0C0F  33          	inc	sp
2672  0C10  3A 00 00    	ld	a,(_s_lin1)
2673  0C13  F5          	push	af
2674  0C14  33          	inc	sp
2675  0C15  CD 00 00    	call	_game_check_map
2676  0C18  F1          	pop	af
2677  0C19  7C          	ld	a,h
2678  0C1A  B5          	or	a,l
2679  0C1B  28 28       	jr	Z,l_player_move_jump_00121
2680  0C1D  CD 27 08    	call	_player_hit_platform
2681  0C20  7D          	ld	a, l
2682  0C21  B7          	or	a, a
2683  0C22  28 19       	jr	Z,l_player_move_jump_00119
2684  0C24  2A 00 00    	ld	hl,(_sprite)
2685  0C27  26 00       	ld	h,0x00
2686  0C29  01 00 00    	ld	bc,_lin
2687  0C2C  09          	add	hl,bc
2688  0C2D  7E          	ld	a,(hl)
2689  0C2E  4D          	ld	c,l
2690  0C2F  44          	ld	b,h
2691  0C30  07          	rlca
2692  0C31  07          	rlca
2693  0C32  07          	rlca
2694  0C33  07          	rlca
2695  0C34  E6 0F       	and	a,0x0f
2696  0C36  07          	rlca
2697  0C37  07          	rlca
2698  0C38  07          	rlca
2699  0C39  07          	rlca
2700  0C3A  E6 F0       	and	a,0xf0
2701  0C3C  02          	ld	(bc), a
2702  0C3D              l_player_move_jump_00119:
2703  0C3D  21 00 00    	ld	hl,_player_vel_y
2704  0C40  36 00       	ld	(hl),0x00
2705  0C42  C3 1C 0D    	jp	l_player_move_jump_00141
2706  0C45              l_player_move_jump_00121:
2707  0C45  2A 00 00    	ld	hl,(_sprite)
2708  0C48  26 00       	ld	h,0x00
2709  0C4A  01 00 00    	ld	bc,_lin
2710  0C4D  09          	add	hl,bc
2711  0C4E  3A 00 00    	ld	a,(_s_lin1)
2712  0C51  77          	ld	(hl),a
2713  0C52  C3 1C 0D    	jp	l_player_move_jump_00141
2714  0C55              l_player_move_jump_00124:
2715  0C55  3A 00 00    	ld	a,(_s_lin1)
2716  0C58  02          	ld	(bc), a
2717  0C59  C3 1C 0D    	jp	l_player_move_jump_00141
2718  0C5C              l_player_move_jump_00140:
2719  0C5C  21 00 00    	ld	hl,_s_state
2720  0C5F  7E          	ld	a,(hl)
2721  0C60  F6 02       	or	a,0x02
2722  0C62  E6 FE       	and	a,0xfe
2723  0C64  77          	ld	(hl),a
2724  0C65  21 00 00    	ld	hl,_s_lin1
2725  0C68  7E          	ld	a, (hl)
2726  0C69  C6 10       	add	a,0x10
2727  0C6B  77          	ld	(hl), a
2728  0C6C  DD 7E FF    	ld	a,(ix-1)
2729  0C6F  96          	sub	a,(hl)
2730  0C70  20 04       	jr	NZ,l_player_move_jump_00252
2731  0C72  3E 01       	ld	a,0x01
2732  0C74  18 01       	jr	l_player_move_jump_00253
2733  0C76              l_player_move_jump_00252:
2734  0C76  AF          	xor	a,a
2735  0C77              l_player_move_jump_00253:
2736  0C77  EE 01       	xor	a,0x01
2737  0C79  CA 14 0D    	jp	Z, l_player_move_jump_00137
2738  0C7C  2A 00 00    	ld	hl,(_sprite)
2739  0C7F  26 00       	ld	h,0x00
2740  0C81  01 00 00    	ld	bc,_col
2741  0C84  09          	add	hl,bc
2742  0C85  7E          	ld	a,(hl)
2743  0C86  F5          	push	af
2744  0C87  33          	inc	sp
2745  0C88  3A 00 00    	ld	a,(_s_lin1)
2746  0C8B  F5          	push	af
2747  0C8C  33          	inc	sp
2748  0C8D  CD 00 00    	call	_game_check_map
2749  0C90  F1          	pop	af
2750  0C91  45          	ld	b, l
2751  0C92  5C          	ld	e, h
2752  0C93  21 00 00    	ld	hl,_s_lin1
2753  0C96  7E          	ld	a, (hl)
2754  0C97  C6 F0       	add	a,0xf0
2755  0C99  4F          	ld	c, a
2756  0C9A  7B          	ld	a, e
2757  0C9B  B0          	or	a,b
2758  0C9C  28 63       	jr	Z,l_player_move_jump_00134
2759  0C9E  71          	ld	(hl), c
2760  0C9F  2E 00       	ld	l,0x00
2761  0CA1  CD FD 03    	call	_player_check_stairs
2762  0CA4  3A 00 00    	ld	a,(_player_over_stair)
2763  0CA7  B7          	or	a, a
2764  0CA8  20 05       	jr	NZ,l_player_move_jump_00127
2765  0CAA  2E 01       	ld	l,0x01
2766  0CAC  CD FD 03    	call	_player_check_stairs
2767  0CAF              l_player_move_jump_00127:
2768  0CAF  3A 00 00    	ld	a,(_player_over_stair)
2769  0CB2  B7          	or	a, a
2770  0CB3  20 31       	jr	NZ,l_player_move_jump_00132
2771  0CB5  21 00 00    	ld	hl,_s_lin1
2772  0CB8  7E          	ld	a, (hl)
2773  0CB9  07          	rlca
2774  0CBA  07          	rlca
2775  0CBB  07          	rlca
2776  0CBC  07          	rlca
2777  0CBD  E6 0F       	and	a,0x0f
2778  0CBF  07          	rlca
2779  0CC0  07          	rlca
2780  0CC1  07          	rlca
2781  0CC2  07          	rlca
2782  0CC3  E6 F0       	and	a,0xf0
2783  0CC5  77          	ld	(hl), a
2784  0CC6  2A 00 00    	ld	hl,(_sprite)
2785  0CC9  26 00       	ld	h,0x00
2786  0CCB  01 00 00    	ld	bc,_lin
2787  0CCE  09          	add	hl,bc
2788  0CCF  5E          	ld	e,(hl)
2789  0CD0  4D          	ld	c,l
2790  0CD1  44          	ld	b,h
2791  0CD2  21 00 00    	ld	hl,_s_lin1
2792  0CD5  7E          	ld	a, (hl)
2793  0CD6  93          	sub	a, e
2794  0CD7  30 09       	jr	NC,l_player_move_jump_00129
2795  0CD9  7E          	ld	a, (hl)
2796  0CDA  C6 10       	add	a,0x10
2797  0CDC  02          	ld	(bc), a
2798  0CDD  2E 00       	ld	l,0x00
2799  0CDF  C3 64 0D    	jp	l_player_move_jump_00151
2800  0CE2              l_player_move_jump_00129:
2801  0CE2  3A 00 00    	ld	a,(_s_lin1)
2802  0CE5  02          	ld	(bc), a
2803  0CE6              l_player_move_jump_00132:
2804  0CE6  21 00 00    	ld	hl,_player_vel_y
2805  0CE9  36 00       	ld	(hl),0x00
2806  0CEB  21 00 00    	ld	hl,_s_state
2807  0CEE  7E          	ld	a,(hl)
2808  0CEF  E6 FC       	and	a,+(0xfd&0xfe)
2809  0CF1  77          	ld	(hl),a
2810  0CF2  2A 00 00    	ld	hl,(_sprite)
2811  0CF5  26 00       	ld	h,0x00
2812  0CF7  01 00 00    	ld	bc,_colint
2813  0CFA  09          	add	hl,bc
2814  0CFB  AF          	xor	a,a
2815  0CFC  77          	ld	(hl),a
2816  0CFD  2E 01       	ld	l,0x01
2817  0CFF  18 63       	jr	l_player_move_jump_00151
2818  0D01              l_player_move_jump_00134:
2819  0D01  21 00 00    	ld	hl,_s_lin1
2820  0D04  71          	ld	(hl), c
2821  0D05  2A 00 00    	ld	hl,(_sprite)
2822  0D08  26 00       	ld	h,0x00
2823  0D0A  01 00 00    	ld	bc,_lin
2824  0D0D  09          	add	hl,bc
2825  0D0E  3A 00 00    	ld	a,(_s_lin1)
2826  0D11  77          	ld	(hl),a
2827  0D12  18 08       	jr	l_player_move_jump_00141
2828  0D14              l_player_move_jump_00137:
2829  0D14  21 00 00    	ld	hl,_s_lin1
2830  0D17  7E          	ld	a, (hl)
2831  0D18  C6 F0       	add	a,0xf0
2832  0D1A  77          	ld	(hl),a
2833  0D1B  02          	ld	(bc), a
2834  0D1C              l_player_move_jump_00141:
2835  0D1C  21 00 00    	ld	hl,_s_state
2836  0D1F  CB 5E       	bit	3, (hl)
2837  0D21  20 27       	jr	NZ,l_player_move_jump_00147
2838  0D23  21 00 00    	ld	hl,_s_state
2839  0D26  CB 56       	bit	2, (hl)
2840  0D28  20 20       	jr	NZ,l_player_move_jump_00147
2841  0D2A  21 00 00    	ld	hl,_dirs
2842  0D2D  CB 56       	bit	2, (hl)
2843  0D2F  28 09       	jr	Z,l_player_move_jump_00143
2844  0D31  21 00 00    	ld	hl,_s_state
2845  0D34  7E          	ld	a,(hl)
2846  0D35  F6 08       	or	a,0x08
2847  0D37  E6 FB       	and	a,0xfb
2848  0D39  77          	ld	(hl),a
2849  0D3A              l_player_move_jump_00143:
2850  0D3A  21 00 00    	ld	hl,_dirs
2851  0D3D  CB 5E       	bit	3, (hl)
2852  0D3F  28 09       	jr	Z,l_player_move_jump_00147
2853  0D41  21 00 00    	ld	hl,_s_state
2854  0D44  7E          	ld	a,(hl)
2855  0D45  F6 04       	or	a,0x04
2856  0D47  E6 F7       	and	a,0xf7
2857  0D49  77          	ld	(hl),a
2858  0D4A              l_player_move_jump_00147:
2859  0D4A  21 00 00    	ld	hl,_sprite_horizontal_check
2860  0D4D  36 01       	ld	(hl),0x01
2861  0D4F  CD 00 00    	call	_spr_move_horizontal
2862  0D52  7D          	ld	a, l
2863  0D53  B7          	or	a, a
2864  0D54  28 07       	jr	Z,l_player_move_jump_00150
2865  0D56  21 00 00    	ld	hl,_s_state
2866  0D59  7E          	ld	a,(hl)
2867  0D5A  E6 F3       	and	a,+(0xf7&0xfb)
2868  0D5C  77          	ld	(hl),a
2869  0D5D              l_player_move_jump_00150:
2870  0D5D  21 00 00    	ld	hl,_sprite_horizontal_check
2871  0D60  36 00       	ld	(hl),0x00
2872  0D62  2E 00       	ld	l,0x00
2873  0D64              l_player_move_jump_00151:
2874  0D64  33          	inc	sp
2875  0D65  DD E1       	pop	ix
2876  0D67  C9          	ret
2877  0D68              	SECTION code_compiler
2878  0D68              ;	---------------------------------
2879  0D68              ; Function player_open_door
2880  0D68              ; ---------------------------------
2881  0D68              _player_open_door:
2882  0D68  CD 00 00    	call	___sdcc_enter_ix
2883  0D6B  0E 00       	ld	c,0x00
2884  0D6D  DD 7E 06    	ld	a,(ix+6)
2885  0D70  D6 3C       	sub	a,0x3c
2886  0D72  28 17       	jr	Z,l_player_open_door_00101
2887  0D74  DD 7E 06    	ld	a,(ix+6)
2888  0D77  D6 3D       	sub	a,0x3d
2889  0D79  28 1F       	jr	Z,l_player_open_door_00104
2890  0D7B  DD 7E 06    	ld	a,(ix+6)
2891  0D7E  D6 3E       	sub	a,0x3e
2892  0D80  28 27       	jr	Z,l_player_open_door_00107
2893  0D82  DD 7E 06    	ld	a,(ix+6)
2894  0D85  D6 3F       	sub	a,0x3f
2895  0D87  28 2F       	jr	Z,l_player_open_door_00110
2896  0D89  18 3A       	jr	l_player_open_door_00113
2897  0D8B              l_player_open_door_00101:
2898  0D8B  3A 00 00    	ld	a,(_player_keys)
2899  0D8E  B7          	or	a, a
2900  0D8F  28 34       	jr	Z,l_player_open_door_00113
2901  0D91  2E 07       	ld	l,0x07
2902  0D93  CD 00 00    	call	_zx_border_fastcall
2903  0D96  0E 01       	ld	c,0x01
2904  0D98  18 2B       	jr	l_player_open_door_00113
2905  0D9A              l_player_open_door_00104:
2906  0D9A  3A 01 00    	ld	a,(_player_keys + 0x0001)
2907  0D9D  B7          	or	a, a
2908  0D9E  28 25       	jr	Z,l_player_open_door_00113
2909  0DA0  2E 02       	ld	l,0x02
2910  0DA2  CD 00 00    	call	_zx_border_fastcall
2911  0DA5  0E 01       	ld	c,0x01
2912  0DA7  18 1C       	jr	l_player_open_door_00113
2913  0DA9              l_player_open_door_00107:
2914  0DA9  3A 02 00    	ld	a,(_player_keys + 0x0002)
2915  0DAC  B7          	or	a, a
2916  0DAD  28 16       	jr	Z,l_player_open_door_00113
2917  0DAF  2E 04       	ld	l,0x04
2918  0DB1  CD 00 00    	call	_zx_border_fastcall
2919  0DB4  0E 01       	ld	c,0x01
2920  0DB6  18 0D       	jr	l_player_open_door_00113
2921  0DB8              l_player_open_door_00110:
2922  0DB8  3A 03 00    	ld	a,(_player_keys + 0x0003)
2923  0DBB  B7          	or	a, a
2924  0DBC  28 07       	jr	Z,l_player_open_door_00113
2925  0DBE  2E 05       	ld	l,0x05
2926  0DC0  CD 00 00    	call	_zx_border_fastcall
2927  0DC3  0E 01       	ld	c,0x01
2928  0DC5              l_player_open_door_00113:
2929  0DC5  79          	ld	a, c
2930  0DC6  B7          	or	a, a
2931  0DC7  20 06       	jr	NZ,l_player_open_door_00114
2932  0DC9  3A 00 00    	ld	a,(_game_inmune)
2933  0DCC  B7          	or	a, a
2934  0DCD  28 24       	jr	Z,l_player_open_door_00117
2935  0DCF              l_player_open_door_00114:
2936  0DCF  3E 00       	ld	a, +((_scr_map) & 0xFF)
2937  0DD1  DD 86 04    	add	a,(ix+4)
2938  0DD4  4F          	ld	c, a
2939  0DD5  3E 00       	ld	a, +((_scr_map) / 256)
2940  0DD7  DD 8E 05    	adc	a,(ix+5)
2941  0DDA  47          	ld	b, a
2942  0DDB  AF          	xor	a, a
2943  0DDC  02          	ld	(bc), a
2944  0DDD  DD 6E 04    	ld	l,(ix+4)
2945  0DE0  DD 66 05    	ld	h,(ix+5)
2946  0DE3  E5          	push	hl
2947  0DE4  CD 00 00    	call	_game_obj_set
2948  0DE7  F1          	pop	af
2949  0DE8  DD 6E 04    	ld	l,(ix+4)
2950  0DEB  DD 66 05    	ld	h,(ix+5)
2951  0DEE  E5          	push	hl
2952  0DEF  CD 00 00    	call	_spr_draw_index
2953  0DF2  F1          	pop	af
2954  0DF3              l_player_open_door_00117:
2955  0DF3  DD E1       	pop	ix
2956  0DF5  C9          	ret
2957  0DF6              	SECTION code_compiler
2958  0DF6              ;	---------------------------------
2959  0DF6              ; Function player_lost_life
2960  0DF6              ; ---------------------------------
2961  0DF6              _player_lost_life:
2962  0DF6  3A 07 00    	ld	a,(_lin + 0x0007)
2963  0DF9  32 00 00    	ld	(_s_lin0),a
2964  0DFC  3A 07 00    	ld	a,(_col + 0x0007)
2965  0DFF  32 00 00    	ld	(_s_col0),a
2966  0E02  CD 00 00    	call	_spr_init_anim_bullets
2967  0E05  01 00 00    	ld	bc,_class+0
2968  0E08  16 00       	ld	d,0x00
2969  0E0A              l_player_lost_life_00114:
2970  0E0A  C5          	push	bc
2971  0E0B  D5          	push	de
2972  0E0C  21 00 00    	ld	hl,0x0000
2973  0E0F  E5          	push	hl
2974  0E10  AF          	xor	a, a
2975  0E11  5A          	ld	e,d
2976  0E12  57          	ld	d,a
2977  0E13  D5          	push	de
2978  0E14  CD 00 00    	call	_NIRVANAP_spriteT_callee
2979  0E17  D1          	pop	de
2980  0E18  C1          	pop	bc
2981  0E19  6A          	ld	l,d
2982  0E1A  26 00       	ld	h,0x00
2983  0E1C  09          	add	hl, bc
2984  0E1D  36 00       	ld	(hl),0x00
2985  0E1F  14          	inc	d
2986  0E20  7A          	ld	a, d
2987  0E21  D6 08       	sub	a,0x08
2988  0E23  38 E5       	jr	C,l_player_lost_life_00114
2989  0E25  76          	halt
2990  0E26  3A 00 00    	ld	a,(_s_lin0)
2991  0E29  C6 F0       	add	a,0xf0
2992  0E2B  47          	ld	b, a
2993  0E2C  3A 00 00    	ld	a,(_s_col0)
2994  0E2F  21 00 00    	ld	hl,0x0000
2995  0E32  E5          	push	hl
2996  0E33  21 7B 03    	ld	hl,0x037b
2997  0E36  E5          	push	hl
2998  0E37  48          	ld	c,b
2999  0E38  47          	ld	b,a
3000  0E39  C5          	push	bc
3001  0E3A  CD 00 00    	call	_spr_add_anim
3002  0E3D  F1          	pop	af
3003  0E3E  F1          	pop	af
3004  0E3F  F1          	pop	af
3005  0E40  21 00 00    	ld	hl,_s_col0
3006  0E43  7E          	ld	a, (hl)
3007  0E44  D6 02       	sub	a,0x02
3008  0E46  38 18       	jr	C,l_player_lost_life_00103
3009  0E48  46          	ld	b, (hl)
3010  0E49  05          	dec	b
3011  0E4A  05          	dec	b
3012  0E4B  21 00 00    	ld	hl,0x0000
3013  0E4E  E5          	push	hl
3014  0E4F  21 7B 03    	ld	hl,0x037b
3015  0E52  E5          	push	hl
3016  0E53  C5          	push	bc
3017  0E54  33          	inc	sp
3018  0E55  3A 00 00    	ld	a,(_s_lin0)
3019  0E58  F5          	push	af
3020  0E59  33          	inc	sp
3021  0E5A  CD 00 00    	call	_spr_add_anim
3022  0E5D  F1          	pop	af
3023  0E5E  F1          	pop	af
3024  0E5F  F1          	pop	af
3025  0E60              l_player_lost_life_00103:
3026  0E60  3A 00 00    	ld	a,(_s_col0)
3027  0E63  21 00 00    	ld	hl,0x0000
3028  0E66  E5          	push	hl
3029  0E67  21 7B 03    	ld	hl,0x037b
3030  0E6A  E5          	push	hl
3031  0E6B  F5          	push	af
3032  0E6C  33          	inc	sp
3033  0E6D  3A 00 00    	ld	a,(_s_lin0)
3034  0E70  F5          	push	af
3035  0E71  33          	inc	sp
3036  0E72  CD 00 00    	call	_spr_add_anim
3037  0E75  F1          	pop	af
3038  0E76  F1          	pop	af
3039  0E77  F1          	pop	af
3040  0E78  21 00 00    	ld	hl,_s_col0
3041  0E7B  7E          	ld	a, (hl)
3042  0E7C  D6 1E       	sub	a,0x1e
3043  0E7E  30 18       	jr	NC,l_player_lost_life_00105
3044  0E80  46          	ld	b, (hl)
3045  0E81  04          	inc	b
3046  0E82  04          	inc	b
3047  0E83  21 00 00    	ld	hl,0x0000
3048  0E86  E5          	push	hl
3049  0E87  21 7B 03    	ld	hl,0x037b
3050  0E8A  E5          	push	hl
3051  0E8B  C5          	push	bc
3052  0E8C  33          	inc	sp
3053  0E8D  3A 00 00    	ld	a,(_s_lin0)
3054  0E90  F5          	push	af
3055  0E91  33          	inc	sp
3056  0E92  CD 00 00    	call	_spr_add_anim
3057  0E95  F1          	pop	af
3058  0E96  F1          	pop	af
3059  0E97  F1          	pop	af
3060  0E98              l_player_lost_life_00105:
3061  0E98  3A 00 00    	ld	a,(_s_lin0)
3062  0E9B  C6 10       	add	a,0x10
3063  0E9D  47          	ld	b, a
3064  0E9E  3A 00 00    	ld	a,(_s_col0)
3065  0EA1  21 00 00    	ld	hl,0x0000
3066  0EA4  E5          	push	hl
3067  0EA5  21 7B 03    	ld	hl,0x037b
3068  0EA8  E5          	push	hl
3069  0EA9  48          	ld	c,b
3070  0EAA  47          	ld	b,a
3071  0EAB  C5          	push	bc
3072  0EAC  CD 00 00    	call	_spr_add_anim
3073  0EAF  F1          	pop	af
3074  0EB0  F1          	pop	af
3075  0EB1  F1          	pop	af
3076  0EB2  2E 00       	ld	l,0x00
3077  0EB4  CD 00 00    	call	_zx_border_fastcall
3078  0EB7  21 00 00    	ld	hl,_tmp
3079  0EBA  36 01       	ld	(hl),0x01
3080  0EBC              l_player_lost_life_00111:
3081  0EBC  3A 00 00    	ld	a,(_tmp)
3082  0EBF  B7          	or	a, a
3083  0EC0  28 2F       	jr	Z,l_player_lost_life_00113
3084  0EC2  21 06 00    	ld	hl,0x0006
3085  0EC5  E5          	push	hl
3086  0EC6  2A 00 00    	ld	hl,(_anim_time)
3087  0EC9  E5          	push	hl
3088  0ECA  CD 00 00    	call	_game_check_time
3089  0ECD  F1          	pop	af
3090  0ECE  F1          	pop	af
3091  0ECF  7D          	ld	a, l
3092  0ED0  B7          	or	a, a
3093  0ED1  28 16       	jr	Z,l_player_lost_life_00110
3094  0ED3  2A 00 00    	ld	hl,(_curr_time)
3095  0ED6  22 00 00    	ld	(_anim_time),hl
3096  0ED9  3A 00 00    	ld	a,(_anim_count)
3097  0EDC  B7          	or	a,a
3098  0EDD  28 05       	jr	Z,l_player_lost_life_00107
3099  0EDF  CD 00 00    	call	_spr_play_anim
3100  0EE2  18 05       	jr	l_player_lost_life_00110
3101  0EE4              l_player_lost_life_00107:
3102  0EE4  21 00 00    	ld	hl,_tmp
3103  0EE7  36 00       	ld	(hl),0x00
3104  0EE9              l_player_lost_life_00110:
3105  0EE9  21 05 00    	ld	hl,0x0005
3106  0EEC  CD 00 00    	call	_z80_delay_ms_fastcall
3107  0EEF  18 CB       	jr	l_player_lost_life_00111
3108  0EF1              l_player_lost_life_00113:
3109  0EF1  21 F4 01    	ld	hl,0x01f4
3110  0EF4  CD 00 00    	call	_z80_delay_ms_fastcall
3111  0EF7  3A 00 00    	ld	a,(_game_start_scr)
3112  0EFA  32 00 00    	ld	(_scr_curr),a
3113  0EFD  CD 00 00    	call	_game_round_init
3114  0F00  C9          	ret
3115  0F01              	SECTION code_compiler
3116  0F01              ;	---------------------------------
3117  0F01              ; Function player_hit
3118  0F01              ; ---------------------------------
3119  0F01              _player_hit:
3120  0F01  7D          	ld	a,l
3121  0F02  4D          	ld	c,l
3122  0F03  21 00 00    	ld	hl,_player_vita
3123  0F06  96          	sub	a, (hl)
3124  0F07  30 17       	jr	NC,l_player_hit_00107
3125  0F09  3A 00 00    	ld	a,(_game_inmune)
3126  0F0C  B7          	or	a, a
3127  0F0D  20 06       	jr	NZ,l_player_hit_00102
3128  0F0F  21 00 00    	ld	hl,_player_vita
3129  0F12  7E          	ld	a, (hl)
3130  0F13  91          	sub	a, c
3131  0F14  77          	ld	(hl), a
3132  0F15              l_player_hit_00102:
3133  0F15  2A 00 00    	ld	hl,(_curr_time)
3134  0F18  22 00 00    	ld	(_player_hit_time),hl
3135  0F1B  CD 00 00    	call	_game_update_stats
3136  0F1E  18 1F       	jr	l_player_hit_00109
3137  0F20              l_player_hit_00107:
3138  0F20  21 00 00    	ld	hl,_player_vita
3139  0F23  36 00       	ld	(hl),0x00
3140  0F25  CD F6 0D    	call	_player_lost_life
3141  0F28  21 00 00    	ld	hl,_player_lives
3142  0F2B  7E          	ld	a, (hl)
3143  0F2C  B7          	or	a, a
3144  0F2D  28 06       	jr	Z,l_player_hit_00104
3145  0F2F  35          	dec	(hl)
3146  0F30  CD 00 00    	call	_game_update_stats
3147  0F33  18 0A       	jr	l_player_hit_00109
3148  0F35              l_player_hit_00104:
3149  0F35  21 00 00    	ld	hl,_player_lives
3150  0F38  36 00       	ld	(hl),0x00
3151  0F3A  21 00 00    	ld	hl,_game_over
3152  0F3D  36 01       	ld	(hl),0x01
3153  0F3F              l_player_hit_00109:
3154  0F3F  C9          	ret
3155  0F40              	SECTION IGNORE
3156  0000              
