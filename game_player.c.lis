1     0000              MODULE game_player_c
2     0000              LINE -1, "game_player.c"
-1    0000              
0     0000              
1     0000              ;--------------------------------------------------------
2     0000              ; File Created by SDCC : free open source ANSI-C Compiler
3     0000              ; Version 3.6.5 #9958 (Mac OS X i386)
4     0000              ;--------------------------------------------------------
5     0000              ; Processed by Z88DK
6     0000              ;--------------------------------------------------------
7     0000              
8     0000              	EXTERN __divschar
9     0000              	EXTERN __divschar_callee
10    0000              	EXTERN __divsint
11    0000              	EXTERN __divsint_callee
12    0000              	EXTERN __divslong
13    0000              	EXTERN __divslong_callee
14    0000              	EXTERN __divslonglong
15    0000              	EXTERN __divslonglong_callee
16    0000              	EXTERN __divsuchar
17    0000              	EXTERN __divsuchar_callee
18    0000              	EXTERN __divuchar
19    0000              	EXTERN __divuchar_callee
20    0000              	EXTERN __divuint
21    0000              	EXTERN __divuint_callee
22    0000              	EXTERN __divulong
23    0000              	EXTERN __divulong_callee
24    0000              	EXTERN __divulonglong
25    0000              	EXTERN __divulonglong_callee
26    0000              	EXTERN __divuschar
27    0000              	EXTERN __divuschar_callee
28    0000              	EXTERN __modschar
29    0000              	EXTERN __modschar_callee
30    0000              	EXTERN __modsint
31    0000              	EXTERN __modsint_callee
32    0000              	EXTERN __modslong
33    0000              	EXTERN __modslong_callee
34    0000              	EXTERN __modslonglong
35    0000              	EXTERN __modslonglong_callee
36    0000              	EXTERN __modsuchar
37    0000              	EXTERN __modsuchar_callee
38    0000              	EXTERN __moduchar
39    0000              	EXTERN __moduchar_callee
40    0000              	EXTERN __moduint
41    0000              	EXTERN __moduint_callee
42    0000              	EXTERN __modulong
43    0000              	EXTERN __modulong_callee
44    0000              	EXTERN __modulonglong
45    0000              	EXTERN __modulonglong_callee
46    0000              	EXTERN __moduschar
47    0000              	EXTERN __moduschar_callee
48    0000              	EXTERN __mulint
49    0000              	EXTERN __mulint_callee
50    0000              	EXTERN __mullong
51    0000              	EXTERN __mullong_callee
52    0000              	EXTERN __mullonglong
53    0000              	EXTERN __mullonglong_callee
54    0000              	EXTERN __mulschar
55    0000              	EXTERN __mulschar_callee
56    0000              	EXTERN __mulsuchar
57    0000              	EXTERN __mulsuchar_callee
58    0000              	EXTERN __muluschar
59    0000              	EXTERN __muluschar_callee
60    0000              	EXTERN __rlslonglong
61    0000              	EXTERN __rlslonglong_callee
62    0000              	EXTERN __rlulonglong
63    0000              	EXTERN __rlulonglong_callee
64    0000              	EXTERN __rrslonglong
65    0000              	EXTERN __rrslonglong_callee
66    0000              	EXTERN __rrulonglong
67    0000              	EXTERN __rrulonglong_callee
68    0000              	EXTERN ___sdcc_call_hl
69    0000              	EXTERN ___sdcc_call_iy
70    0000              	EXTERN ___sdcc_enter_ix
71    0000              	EXTERN _banked_call
72    0000              	EXTERN _banked_ret
73    0000              	EXTERN ___fs2schar
74    0000              	EXTERN ___fs2schar_callee
75    0000              	EXTERN ___fs2sint
76    0000              	EXTERN ___fs2sint_callee
77    0000              	EXTERN ___fs2slong
78    0000              	EXTERN ___fs2slong_callee
79    0000              	EXTERN ___fs2slonglong
80    0000              	EXTERN ___fs2slonglong_callee
81    0000              	EXTERN ___fs2uchar
82    0000              	EXTERN ___fs2uchar_callee
83    0000              	EXTERN ___fs2uint
84    0000              	EXTERN ___fs2uint_callee
85    0000              	EXTERN ___fs2ulong
86    0000              	EXTERN ___fs2ulong_callee
87    0000              	EXTERN ___fs2ulonglong
88    0000              	EXTERN ___fs2ulonglong_callee
89    0000              	EXTERN ___fsadd
90    0000              	EXTERN ___fsadd_callee
91    0000              	EXTERN ___fsdiv
92    0000              	EXTERN ___fsdiv_callee
93    0000              	EXTERN ___fseq
94    0000              	EXTERN ___fseq_callee
95    0000              	EXTERN ___fsgt
96    0000              	EXTERN ___fsgt_callee
97    0000              	EXTERN ___fslt
98    0000              	EXTERN ___fslt_callee
99    0000              	EXTERN ___fsmul
100   0000              	EXTERN ___fsmul_callee
101   0000              	EXTERN ___fsneq
102   0000              	EXTERN ___fsneq_callee
103   0000              	EXTERN ___fssub
104   0000              	EXTERN ___fssub_callee
105   0000              	EXTERN ___schar2fs
106   0000              	EXTERN ___schar2fs_callee
107   0000              	EXTERN ___sint2fs
108   0000              	EXTERN ___sint2fs_callee
109   0000              	EXTERN ___slong2fs
110   0000              	EXTERN ___slong2fs_callee
111   0000              	EXTERN ___slonglong2fs
112   0000              	EXTERN ___slonglong2fs_callee
113   0000              	EXTERN ___uchar2fs
114   0000              	EXTERN ___uchar2fs_callee
115   0000              	EXTERN ___uint2fs
116   0000              	EXTERN ___uint2fs_callee
117   0000              	EXTERN ___ulong2fs
118   0000              	EXTERN ___ulong2fs_callee
119   0000              	EXTERN ___ulonglong2fs
120   0000              	EXTERN ___ulonglong2fs_callee
121   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
122   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
123   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
126   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
127   0000              	EXTERN ____sdcc_4_ldi_save_bc
128   0000              	EXTERN ____sdcc_4_push_hlix
129   0000              	EXTERN ____sdcc_4_push_mhl
130   0000              	EXTERN ____sdcc_lib_setmem_hl
131   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
132   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
133   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
134   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
135   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
136   0000              	EXTERN ____sdcc_ll_add_deix_hlix
137   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
138   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
139   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
140   0000              	EXTERN ____sdcc_ll_asr_hlix_a
141   0000              	EXTERN ____sdcc_ll_asr_mbc_a
142   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
143   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
144   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
145   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
146   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
147   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
148   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
149   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
150   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
151   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
152   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
153   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
155   0000              	EXTERN ____sdcc_ll_push_hlix
156   0000              	EXTERN ____sdcc_ll_push_mhl
157   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
158   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
159   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
160   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
161   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
162   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
163   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
164   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
165   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
166   0000              	EXTERN ____sdcc_load_debc_deix
167   0000              	EXTERN ____sdcc_load_dehl_deix
168   0000              	EXTERN ____sdcc_load_debc_mhl
169   0000              	EXTERN ____sdcc_load_hlde_mhl
170   0000              	EXTERN ____sdcc_store_dehl_bcix
171   0000              	EXTERN ____sdcc_store_debc_hlix
172   0000              	EXTERN ____sdcc_store_debc_mhl
173   0000              	EXTERN ____sdcc_cpu_pop_ei
174   0000              	EXTERN ____sdcc_cpu_pop_ei_jp
175   0000              	EXTERN ____sdcc_cpu_push_di
176   0000              	EXTERN ____sdcc_outi
177   0000              	EXTERN ____sdcc_outi_128
178   0000              	EXTERN ____sdcc_outi_256
179   0000              	EXTERN ____sdcc_ldi
180   0000              	EXTERN ____sdcc_ldi_128
181   0000              	EXTERN ____sdcc_ldi_256
182   0000              	EXTERN ____sdcc_4_copy_srcd_hlix_dst_deix
183   0000              	EXTERN ____sdcc_4_and_src_mbc_mhl_dst_deix
184   0000              	EXTERN ____sdcc_4_or_src_mbc_mhl_dst_deix
185   0000              	EXTERN ____sdcc_4_xor_src_mbc_mhl_dst_deix
186   0000              	EXTERN ____sdcc_4_or_src_dehl_dst_bcix
187   0000              	EXTERN ____sdcc_4_xor_src_dehl_dst_bcix
188   0000              	EXTERN ____sdcc_4_and_src_dehl_dst_bcix
189   0000              	EXTERN ____sdcc_4_xor_src_mbc_mhl_dst_debc
190   0000              	EXTERN ____sdcc_4_or_src_mbc_mhl_dst_debc
191   0000              	EXTERN ____sdcc_4_and_src_mbc_mhl_dst_debc
192   0000              	EXTERN ____sdcc_4_cpl_src_mhl_dst_debc
193   0000              	EXTERN ____sdcc_4_xor_src_debc_mhl_dst_debc
194   0000              	EXTERN ____sdcc_4_or_src_debc_mhl_dst_debc
195   0000              	EXTERN ____sdcc_4_and_src_debc_mhl_dst_debc
196   0000              	EXTERN ____sdcc_4_and_src_debc_hlix_dst_debc
197   0000              	EXTERN ____sdcc_4_or_src_debc_hlix_dst_debc
198   0000              	EXTERN ____sdcc_4_xor_src_debc_hlix_dst_debc
199   0000              
200   0000              ;--------------------------------------------------------
201   0000              ; Public variables in this module
202   0000              ;--------------------------------------------------------
203   0000              	GLOBAL _player_check_map
204   0000              	GLOBAL _player_1up
205   0000              	GLOBAL _player_init
206   0000              	GLOBAL _player_turn
207   0000              	GLOBAL _player_move
208   0000              	GLOBAL _player_check_input
209   0000              	GLOBAL _player_move_input
210   0000              	GLOBAL _player_fix_walk_lin
211   0000              	GLOBAL _player_fire
212   0000              	GLOBAL _player_collision
213   0000              	GLOBAL _player_pick_mushroom
214   0000              	GLOBAL _player_check_stairs_vertical
215   0000              	GLOBAL _player_check_stairs
216   0000              	GLOBAL _player_anim_tile
217   0000              	GLOBAL _player_tile
218   0000              	GLOBAL _player_pick_item
219   0000              	GLOBAL _player_hit_platform
220   0000              	GLOBAL _player_hit_platform_clear
221   0000              	GLOBAL _player_score_add
222   0000              	GLOBAL _player_check_floor
223   0000              	GLOBAL _player_gasta_brick
224   0000              	GLOBAL _player_move_jump
225   0000              	GLOBAL _player_open_door
226   0000              	GLOBAL _player_lost_life
227   0000              	GLOBAL _player_hit
228   0000              ;--------------------------------------------------------
229   0000              ; Externals used
230   0000              ;--------------------------------------------------------
231   0000              	GLOBAL _ulltoa_callee
232   0000              	GLOBAL _ulltoa
233   0000              	GLOBAL _strtoull_callee
234   0000              	GLOBAL _strtoull
235   0000              	GLOBAL _strtoll_callee
236   0000              	GLOBAL _strtoll
237   0000              	GLOBAL _lltoa_callee
238   0000              	GLOBAL _lltoa
239   0000              	GLOBAL _llabs_callee
240   0000              	GLOBAL _llabs
241   0000              	GLOBAL __lldivu__callee
242   0000              	GLOBAL __lldivu_
243   0000              	GLOBAL __lldiv__callee
244   0000              	GLOBAL __lldiv_
245   0000              	GLOBAL _atoll_callee
246   0000              	GLOBAL _atoll
247   0000              	GLOBAL _realloc_unlocked_callee
248   0000              	GLOBAL _realloc_unlocked
249   0000              	GLOBAL _malloc_unlocked_fastcall
250   0000              	GLOBAL _malloc_unlocked
251   0000              	GLOBAL _free_unlocked_fastcall
252   0000              	GLOBAL _free_unlocked
253   0000              	GLOBAL _calloc_unlocked_callee
254   0000              	GLOBAL _calloc_unlocked
255   0000              	GLOBAL _aligned_alloc_unlocked_callee
256   0000              	GLOBAL _aligned_alloc_unlocked
257   0000              	GLOBAL _realloc_callee
258   0000              	GLOBAL _realloc
259   0000              	GLOBAL _malloc_fastcall
260   0000              	GLOBAL _malloc
261   0000              	GLOBAL _free_fastcall
262   0000              	GLOBAL _free
263   0000              	GLOBAL _calloc_callee
264   0000              	GLOBAL _calloc
265   0000              	GLOBAL _aligned_alloc_callee
266   0000              	GLOBAL _aligned_alloc
267   0000              	GLOBAL _utoa_callee
268   0000              	GLOBAL _utoa
269   0000              	GLOBAL _ultoa_callee
270   0000              	GLOBAL _ultoa
271   0000              	GLOBAL _system_fastcall
272   0000              	GLOBAL _system
273   0000              	GLOBAL _strtoul_callee
274   0000              	GLOBAL _strtoul
275   0000              	GLOBAL _strtol_callee
276   0000              	GLOBAL _strtol
277   0000              	GLOBAL _strtof_callee
278   0000              	GLOBAL _strtof
279   0000              	GLOBAL _strtod_callee
280   0000              	GLOBAL _strtod
281   0000              	GLOBAL _srand_fastcall
282   0000              	GLOBAL _srand
283   0000              	GLOBAL _rand
284   0000              	GLOBAL _quick_exit_fastcall
285   0000              	GLOBAL _quick_exit
286   0000              	GLOBAL _qsort_callee
287   0000              	GLOBAL _qsort
288   0000              	GLOBAL _ltoa_callee
289   0000              	GLOBAL _ltoa
290   0000              	GLOBAL _labs_fastcall
291   0000              	GLOBAL _labs
292   0000              	GLOBAL _itoa_callee
293   0000              	GLOBAL _itoa
294   0000              	GLOBAL _ftoh_callee
295   0000              	GLOBAL _ftoh
296   0000              	GLOBAL _ftog_callee
297   0000              	GLOBAL _ftog
298   0000              	GLOBAL _ftoe_callee
299   0000              	GLOBAL _ftoe
300   0000              	GLOBAL _ftoa_callee
301   0000              	GLOBAL _ftoa
302   0000              	GLOBAL _exit_fastcall
303   0000              	GLOBAL _exit
304   0000              	GLOBAL _dtoh_callee
305   0000              	GLOBAL _dtoh
306   0000              	GLOBAL _dtog_callee
307   0000              	GLOBAL _dtog
308   0000              	GLOBAL _dtoe_callee
309   0000              	GLOBAL _dtoe
310   0000              	GLOBAL _dtoa_callee
311   0000              	GLOBAL _dtoa
312   0000              	GLOBAL _bsearch_callee
313   0000              	GLOBAL _bsearch
314   0000              	GLOBAL _atol_fastcall
315   0000              	GLOBAL _atol
316   0000              	GLOBAL _atoi_fastcall
317   0000              	GLOBAL _atoi
318   0000              	GLOBAL _atof_fastcall
319   0000              	GLOBAL _atof
320   0000              	GLOBAL _atexit_fastcall
321   0000              	GLOBAL _atexit
322   0000              	GLOBAL _at_quick_exit_fastcall
323   0000              	GLOBAL _at_quick_exit
324   0000              	GLOBAL _abs_fastcall
325   0000              	GLOBAL _abs
326   0000              	GLOBAL _abort
327   0000              	GLOBAL __strtou__callee
328   0000              	GLOBAL __strtou_
329   0000              	GLOBAL __strtoi__callee
330   0000              	GLOBAL __strtoi_
331   0000              	GLOBAL __random_uniform_xor_8__fastcall
332   0000              	GLOBAL __random_uniform_xor_8_
333   0000              	GLOBAL __random_uniform_xor_32__fastcall
334   0000              	GLOBAL __random_uniform_xor_32_
335   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
336   0000              	GLOBAL __random_uniform_cmwc_8_
337   0000              	GLOBAL __shellsort__callee
338   0000              	GLOBAL __shellsort_
339   0000              	GLOBAL __quicksort__callee
340   0000              	GLOBAL __quicksort_
341   0000              	GLOBAL __insertion_sort__callee
342   0000              	GLOBAL __insertion_sort_
343   0000              	GLOBAL __ldivu__callee
344   0000              	GLOBAL __ldivu_
345   0000              	GLOBAL __ldiv__callee
346   0000              	GLOBAL __ldiv_
347   0000              	GLOBAL __divu__callee
348   0000              	GLOBAL __divu_
349   0000              	GLOBAL __div__callee
350   0000              	GLOBAL __div_
351   0000              	GLOBAL _NIRVANAP_drawTW_raw_callee
352   0000              	GLOBAL _NIRVANAP_drawTW_raw
353   0000              	GLOBAL _NIRVANAP_drawTW_callee
354   0000              	GLOBAL _NIRVANAP_drawTW
355   0000              	GLOBAL _NIRVANAP_drawW_raw_callee
356   0000              	GLOBAL _NIRVANAP_drawW_raw
357   0000              	GLOBAL _NIRVANAP_drawW_callee
358   0000              	GLOBAL _NIRVANAP_drawW
359   0000              	GLOBAL _NIRVANAP_spriteT_callee
360   0000              	GLOBAL _NIRVANAP_spriteT
361   0000              	GLOBAL _NIRVANAP_fillC_callee
362   0000              	GLOBAL _NIRVANAP_fillC
363   0000              	GLOBAL _NIRVANAP_readC_callee
364   0000              	GLOBAL _NIRVANAP_readC
365   0000              	GLOBAL _NIRVANAP_paintC_callee
366   0000              	GLOBAL _NIRVANAP_paintC
367   0000              	GLOBAL _NIRVANAP_printC_callee
368   0000              	GLOBAL _NIRVANAP_printC
369   0000              	GLOBAL _NIRVANAP_fillT_raw_callee
370   0000              	GLOBAL _NIRVANAP_fillT_raw
371   0000              	GLOBAL _NIRVANAP_fillT_callee
372   0000              	GLOBAL _NIRVANAP_fillT
373   0000              	GLOBAL _NIRVANAP_drawT_raw_callee
374   0000              	GLOBAL _NIRVANAP_drawT_raw
375   0000              	GLOBAL _NIRVANAP_drawT_callee
376   0000              	GLOBAL _NIRVANAP_drawT
377   0000              	GLOBAL _NIRVANAP_stop
378   0000              	GLOBAL _NIRVANAP_start
379   0000              	GLOBAL _debug3
380   0000              	GLOBAL _debug2
381   0000              	GLOBAL _debug
382   0000              	GLOBAL _zx_print_str
383   0000              	GLOBAL _zx_print_int
384   0000              	GLOBAL _zx_print_chr
385   0000              	GLOBAL _zx_print_bonus_time
386   0000              	GLOBAL _zx_isr
387   0000              	GLOBAL _z80_otdr_callee
388   0000              	GLOBAL _z80_otdr
389   0000              	GLOBAL _z80_otir_callee
390   0000              	GLOBAL _z80_otir
391   0000              	GLOBAL _z80_outp_callee
392   0000              	GLOBAL _z80_outp
393   0000              	GLOBAL _z80_indr_callee
394   0000              	GLOBAL _z80_indr
395   0000              	GLOBAL _z80_inir_callee
396   0000              	GLOBAL _z80_inir
397   0000              	GLOBAL _z80_inp_fastcall
398   0000              	GLOBAL _z80_inp
399   0000              	GLOBAL _z80_set_int_state_fastcall
400   0000              	GLOBAL _z80_set_int_state
401   0000              	GLOBAL _z80_get_int_state
402   0000              	GLOBAL _z80_delay_tstate_fastcall
403   0000              	GLOBAL _z80_delay_tstate
404   0000              	GLOBAL _z80_delay_ms_fastcall
405   0000              	GLOBAL _z80_delay_ms
406   0000              	GLOBAL _im2_remove_generic_callback_callee
407   0000              	GLOBAL _im2_remove_generic_callback
408   0000              	GLOBAL _im2_prepend_generic_callback_callee
409   0000              	GLOBAL _im2_prepend_generic_callback
410   0000              	GLOBAL _im2_append_generic_callback_callee
411   0000              	GLOBAL _im2_append_generic_callback
412   0000              	GLOBAL _im2_create_generic_isr_8080_callee
413   0000              	GLOBAL _im2_create_generic_isr_8080
414   0000              	GLOBAL _im2_create_generic_isr_callee
415   0000              	GLOBAL _im2_create_generic_isr
416   0000              	GLOBAL _im2_install_isr_callee
417   0000              	GLOBAL _im2_install_isr
418   0000              	GLOBAL _im2_init_fastcall
419   0000              	GLOBAL _im2_init
420   0000              	GLOBAL _intrinsic_swap_word_32_fastcall
421   0000              	GLOBAL _intrinsic_swap_word_32
422   0000              	GLOBAL _intrinsic_swap_endian_32_fastcall
423   0000              	GLOBAL _intrinsic_swap_endian_32
424   0000              	GLOBAL _intrinsic_swap_endian_16_fastcall
425   0000              	GLOBAL _intrinsic_swap_endian_16
426   0000              	GLOBAL _intrinsic_return_de
427   0000              	GLOBAL _intrinsic_return_bc
428   0000              	GLOBAL _intrinsic_exx
429   0000              	GLOBAL _intrinsic_ex_de_hl
430   0000              	GLOBAL _intrinsic_nop
431   0000              	GLOBAL _intrinsic_im_2
432   0000              	GLOBAL _intrinsic_im_1
433   0000              	GLOBAL _intrinsic_im_0
434   0000              	GLOBAL _intrinsic_retn
435   0000              	GLOBAL _intrinsic_reti
436   0000              	GLOBAL _intrinsic_halt
437   0000              	GLOBAL _intrinsic_ei
438   0000              	GLOBAL _intrinsic_di
439   0000              	GLOBAL _intrinsic_stub
440   0000              	GLOBAL _intrinsic_outi
441   0000              	GLOBAL _intrinsic_ldi
442   0000              	GLOBAL _zx_pattern_fill_callee
443   0000              	GLOBAL _zx_pattern_fill
444   0000              	GLOBAL _zx_saddrpup_fastcall
445   0000              	GLOBAL _zx_saddrpup
446   0000              	GLOBAL _zx_saddrpright_callee
447   0000              	GLOBAL _zx_saddrpright
448   0000              	GLOBAL _zx_saddrpleft_callee
449   0000              	GLOBAL _zx_saddrpleft
450   0000              	GLOBAL _zx_saddrpdown_fastcall
451   0000              	GLOBAL _zx_saddrpdown
452   0000              	GLOBAL _zx_saddrcup_fastcall
453   0000              	GLOBAL _zx_saddrcup
454   0000              	GLOBAL _zx_saddrcright_fastcall
455   0000              	GLOBAL _zx_saddrcright
456   0000              	GLOBAL _zx_saddrcleft_fastcall
457   0000              	GLOBAL _zx_saddrcleft
458   0000              	GLOBAL _zx_saddrcdown_fastcall
459   0000              	GLOBAL _zx_saddrcdown
460   0000              	GLOBAL _zx_saddr2py_fastcall
461   0000              	GLOBAL _zx_saddr2py
462   0000              	GLOBAL _zx_saddr2px_fastcall
463   0000              	GLOBAL _zx_saddr2px
464   0000              	GLOBAL _zx_saddr2cy_fastcall
465   0000              	GLOBAL _zx_saddr2cy
466   0000              	GLOBAL _zx_saddr2cx_fastcall
467   0000              	GLOBAL _zx_saddr2cx
468   0000              	GLOBAL _zx_saddr2aaddr_fastcall
469   0000              	GLOBAL _zx_saddr2aaddr
470   0000              	GLOBAL _zx_py2saddr_fastcall
471   0000              	GLOBAL _zx_py2saddr
472   0000              	GLOBAL _zx_py2aaddr_fastcall
473   0000              	GLOBAL _zx_py2aaddr
474   0000              	GLOBAL _zx_pxy2saddr_callee
475   0000              	GLOBAL _zx_pxy2saddr
476   0000              	GLOBAL _zx_pxy2aaddr_callee
477   0000              	GLOBAL _zx_pxy2aaddr
478   0000              	GLOBAL _zx_px2bitmask_fastcall
479   0000              	GLOBAL _zx_px2bitmask
480   0000              	GLOBAL _zx_cy2saddr_fastcall
481   0000              	GLOBAL _zx_cy2saddr
482   0000              	GLOBAL _zx_cy2aaddr_fastcall
483   0000              	GLOBAL _zx_cy2aaddr
484   0000              	GLOBAL _zx_cxy2saddr_callee
485   0000              	GLOBAL _zx_cxy2saddr
486   0000              	GLOBAL _zx_cxy2aaddr_callee
487   0000              	GLOBAL _zx_cxy2aaddr
488   0000              	GLOBAL _zx_bitmask2px_fastcall
489   0000              	GLOBAL _zx_bitmask2px
490   0000              	GLOBAL _zx_aaddrcup_fastcall
491   0000              	GLOBAL _zx_aaddrcup
492   0000              	GLOBAL _zx_aaddrcright_fastcall
493   0000              	GLOBAL _zx_aaddrcright
494   0000              	GLOBAL _zx_aaddrcleft_fastcall
495   0000              	GLOBAL _zx_aaddrcleft
496   0000              	GLOBAL _zx_aaddrcdown_fastcall
497   0000              	GLOBAL _zx_aaddrcdown
498   0000              	GLOBAL _zx_aaddr2saddr_fastcall
499   0000              	GLOBAL _zx_aaddr2saddr
500   0000              	GLOBAL _zx_aaddr2py_fastcall
501   0000              	GLOBAL _zx_aaddr2py
502   0000              	GLOBAL _zx_aaddr2px_fastcall
503   0000              	GLOBAL _zx_aaddr2px
504   0000              	GLOBAL _zx_aaddr2cy_fastcall
505   0000              	GLOBAL _zx_aaddr2cy
506   0000              	GLOBAL _zx_aaddr2cx_fastcall
507   0000              	GLOBAL _zx_aaddr2cx
508   0000              	GLOBAL _zx_visit_wc_pix_callee
509   0000              	GLOBAL _zx_visit_wc_pix
510   0000              	GLOBAL _zx_visit_wc_attr_callee
511   0000              	GLOBAL _zx_visit_wc_attr
512   0000              	GLOBAL _zx_scroll_wc_up_pix_callee
513   0000              	GLOBAL _zx_scroll_wc_up_pix
514   0000              	GLOBAL _zx_scroll_wc_up_attr_callee
515   0000              	GLOBAL _zx_scroll_wc_up_attr
516   0000              	GLOBAL _zx_scroll_wc_up_callee
517   0000              	GLOBAL _zx_scroll_wc_up
518   0000              	GLOBAL _zx_scroll_up_pix_callee
519   0000              	GLOBAL _zx_scroll_up_pix
520   0000              	GLOBAL _zx_scroll_up_attr_callee
521   0000              	GLOBAL _zx_scroll_up_attr
522   0000              	GLOBAL _zx_scroll_up_callee
523   0000              	GLOBAL _zx_scroll_up
524   0000              	GLOBAL _zx_cls_wc_pix_callee
525   0000              	GLOBAL _zx_cls_wc_pix
526   0000              	GLOBAL _zx_cls_wc_attr_callee
527   0000              	GLOBAL _zx_cls_wc_attr
528   0000              	GLOBAL _zx_cls_wc_callee
529   0000              	GLOBAL _zx_cls_wc
530   0000              	GLOBAL _zx_cls_pix_fastcall
531   0000              	GLOBAL _zx_cls_pix
532   0000              	GLOBAL _zx_cls_attr_fastcall
533   0000              	GLOBAL _zx_cls_attr
534   0000              	GLOBAL _zx_cls_fastcall
535   0000              	GLOBAL _zx_cls
536   0000              	GLOBAL _zx_border_fastcall
537   0000              	GLOBAL _zx_border
538   0000              	GLOBAL _zx_tape_verify_block_callee
539   0000              	GLOBAL _zx_tape_verify_block
540   0000              	GLOBAL _zx_tape_save_block_callee
541   0000              	GLOBAL _zx_tape_save_block
542   0000              	GLOBAL _zx_tape_load_block_callee
543   0000              	GLOBAL _zx_tape_load_block
544   0000              	GLOBAL _spr_colision_boss
545   0000              	GLOBAL _spr_colision_b
546   0000              	GLOBAL _spr_unflatten
547   0000              	GLOBAL _spr_flatten
548   0000              	GLOBAL _spr_btile_paint_back
549   0000              	GLOBAL _spr_bullet_explode
550   0000              	GLOBAL _spr_init_effects
551   0000              	GLOBAL _spr_turn_horizontal
552   0000              	GLOBAL _spr_bullets_play
553   0000              	GLOBAL _spr_play_anim
554   0000              	GLOBAL _spr_add_anim
555   0000              	GLOBAL _spr_clear_scr
556   0000              	GLOBAL _spr_page_map
557   0000              	GLOBAL _spr_page_down
558   0000              	GLOBAL _spr_page_up
559   0000              	GLOBAL _spr_page_right
560   0000              	GLOBAL _spr_page_left
561   0000              	GLOBAL _spr_tile_paint
562   0000              	GLOBAL _spr_draw_index
563   0000              	GLOBAL _spr_brick_anim
564   0000              	GLOBAL _spr_back_repaint
565   0000              	GLOBAL _spr_tile
566   0000              	GLOBAL _spr_destroy
567   0000              	GLOBAL _spr_tile_dir
568   0000              	GLOBAL _spr_redraw
569   0000              	GLOBAL _spr_move_left
570   0000              	GLOBAL _spr_move_right
571   0000              	GLOBAL _spr_move_horizontal
572   0000              	GLOBAL _spr_move_down
573   0000              	GLOBAL _spr_move_up
574   0000              	GLOBAL _spr_set_right
575   0000              	GLOBAL _spr_set_left
576   0000              	GLOBAL _spr_set_down
577   0000              	GLOBAL _spr_set_up
578   0000              	GLOBAL _spr_calc_index
579   0000              	GLOBAL _spr_chktime
580   0000              	GLOBAL _menu_define_key
581   0000              	GLOBAL _menu_redefine
582   0000              	GLOBAL _menu_main_print
583   0000              	GLOBAL _menu_main
584   0000              	GLOBAL _game_match_back
585   0000              	GLOBAL _game_attribs
586   0000              	GLOBAL _game_boss_clear
587   0000              	GLOBAL _game_boss_kill
588   0000              	GLOBAL _game_obj_clear
589   0000              	GLOBAL _game_obj_chk
590   0000              	GLOBAL _game_obj_set
591   0000              	GLOBAL _game_shoot_fire_boss
592   0000              	GLOBAL _game_shoot_fire
593   0000              	GLOBAL _game_add_enemy
594   0000              	GLOBAL _game_print_header
595   0000              	GLOBAL _game_check_time
596   0000              	GLOBAL _game_rotate_attrib_osd
597   0000              	GLOBAL _game_rotate_attrib
598   0000              	GLOBAL _game_colour_message
599   0000              	GLOBAL _game_paint_attrib
600   0000              	GLOBAL _game_print_score
601   0000              	GLOBAL _game_check_cell
602   0000              	GLOBAL _game_check_map
603   0000              	GLOBAL _game_loop
604   0000              	GLOBAL _game_round_init
605   0000              	GLOBAL _game_set_checkpoint
606   0000              	GLOBAL _game_start_timer
607   0000              	GLOBAL _game_update_stats
608   0000              	GLOBAL _game_print_footer
609   0000              	GLOBAL _game_fill_row
610   0000              	GLOBAL _game_fps
611   0000              	GLOBAL _game_respawn
612   0000              	GLOBAL _game_draw_screen
613   0000              	GLOBAL _boss_draw_frame
614   0000              	GLOBAL _boss_draw
615   0000              	GLOBAL _boss_turn
616   0000              	GLOBAL _enemy_avoid_dead
617   0000              	GLOBAL _enemy_avoid_fall
618   0000              	GLOBAL _enemy_kill
619   0000              	GLOBAL _enemy_respawn
620   0000              	GLOBAL _enemy_init
621   0000              	GLOBAL _enemy_move
622   0000              	GLOBAL _enemy_turn
623   0000              	GLOBAL _enemy_static
624   0000              	GLOBAL _enemy_walk
625   0000              	GLOBAL _enemy_horizontal
626   0000              	GLOBAL _enemy_vertical
627   0000              	GLOBAL _ay_reset
628   0000              	GLOBAL _ay_song_stop
629   0000              	GLOBAL _ay_song_play
630   0000              	GLOBAL _ay_fx_stop
631   0000              	GLOBAL _ay_fx_play
632   0000              	GLOBAL _ay_is_playing
633   0000              	GLOBAL _test_func
634   0000              	GLOBAL _test_proc
635   0000              	GLOBAL _in_mouse_kempston_wheel_delta
636   0000              	GLOBAL _in_mouse_kempston_wheel
637   0000              	GLOBAL _in_mouse_kempston_callee
638   0000              	GLOBAL _in_mouse_kempston
639   0000              	GLOBAL _in_mouse_kempston_setpos_callee
640   0000              	GLOBAL _in_mouse_kempston_setpos
641   0000              	GLOBAL _in_mouse_kempston_reset
642   0000              	GLOBAL _in_mouse_kempston_init
643   0000              	GLOBAL _in_mouse_amx_wheel_delta
644   0000              	GLOBAL _in_mouse_amx_wheel
645   0000              	GLOBAL _in_mouse_amx_callee
646   0000              	GLOBAL _in_mouse_amx
647   0000              	GLOBAL _in_mouse_amx_setpos_callee
648   0000              	GLOBAL _in_mouse_amx_setpos
649   0000              	GLOBAL _in_mouse_amx_reset
650   0000              	GLOBAL _in_mouse_amx_init_callee
651   0000              	GLOBAL _in_mouse_amx_init
652   0000              	GLOBAL _in_stick_sinclair2
653   0000              	GLOBAL _in_stick_sinclair1
654   0000              	GLOBAL _in_stick_kempston
655   0000              	GLOBAL _in_stick_fuller
656   0000              	GLOBAL _in_stick_cursor
657   0000              	GLOBAL _in_stick_keyboard_fastcall
658   0000              	GLOBAL _in_stick_keyboard
659   0000              	GLOBAL _in_wait_nokey
660   0000              	GLOBAL _in_wait_key
661   0000              	GLOBAL _in_test_key
662   0000              	GLOBAL _in_pause_fastcall
663   0000              	GLOBAL _in_pause
664   0000              	GLOBAL _in_key_scancode_fastcall
665   0000              	GLOBAL _in_key_scancode
666   0000              	GLOBAL _in_key_pressed_fastcall
667   0000              	GLOBAL _in_key_pressed
668   0000              	GLOBAL _in_inkey
669   0000              	GLOBAL _NIRVANAP_CHAR_TABLE
670   0000              	GLOBAL _NIRVANAP_WIDE_IMAGES
671   0000              	GLOBAL _NIRVANAP_TILE_IMAGES
672   0000              	GLOBAL _NIRVANAP_HOLE
673   0000              	GLOBAL _NIRVANAP_ISR_HOOK
674   0000              	GLOBAL _scan_map
675   0000              	GLOBAL _key_map
676   0000              	GLOBAL _player_lvl_table
677   0000              	GLOBAL _stp_row
678   0000              	GLOBAL _stp_col
679   0000              	GLOBAL _stp_tile
680   0000              	GLOBAL _map_paper_last_a
681   0000              	GLOBAL _map_paper_last
682   0000              	GLOBAL _map_paper_clr
683   0000              	GLOBAL _map_paper
684   0000              	GLOBAL _draw_count
685   0000              	GLOBAL _g_player_hit_right
686   0000              	GLOBAL _g_player_hit_left
687   0000              	GLOBAL _bullet_count
688   0000              	GLOBAL _spr_hack
689   0000              	GLOBAL _boss_stat
690   0000              	GLOBAL _boss_time_fire
691   0000              	GLOBAL _boss_time
692   0000              	GLOBAL _boss_tile
693   0000              	GLOBAL _boss_inc
694   0000              	GLOBAL _boss_col
695   0000              	GLOBAL _boss_lin
696   0000              	GLOBAL _bullet
697   0000              	GLOBAL _bullet_vel
698   0000              	GLOBAL _bullet_frames
699   0000              	GLOBAL _bullet_colint
700   0000              	GLOBAL _bullet_dir
701   0000              	GLOBAL _bullet_tile
702   0000              	GLOBAL _bullet_col
703   0000              	GLOBAL _bullet_lin
704   0000              	GLOBAL _bullet_col0
705   0000              	GLOBAL _bullet_lin0
706   0000              	GLOBAL _bullet_max
707   0000              	GLOBAL _bullet_class
708   0000              	GLOBAL _mush_class
709   0000              	GLOBAL _mush_index
710   0000              	GLOBAL _anim_count
711   0000              	GLOBAL _anim_respanwn
712   0000              	GLOBAL _anim_loop
713   0000              	GLOBAL _anim_end
714   0000              	GLOBAL _anim_int
715   0000              	GLOBAL _anim_tile
716   0000              	GLOBAL _anim_col
717   0000              	GLOBAL _anim_lin
718   0000              	GLOBAL _map_heigth
719   0000              	GLOBAL _map_width
720   0000              	GLOBAL _scr_curr
721   0000              	GLOBAL _sprite_kind
722   0000              	GLOBAL _scr_obj1
723   0000              	GLOBAL _scr_obj0
724   0000              	GLOBAL _scr_map
725   0000              	GLOBAL _sprite_speed_alt
726   0000              	GLOBAL _spr_init
727   0000              	GLOBAL _spr_map_tile
728   0000              	GLOBAL _sprite_frames
729   0000              	GLOBAL _sprite_speed
730   0000              	GLOBAL _screen_ink
731   0000              	GLOBAL _screen_paper
732   0000              	GLOBAL _player_onstair
733   0000              	GLOBAL _game_start_scr
734   0000              	GLOBAL _game_respawn_tile
735   0000              	GLOBAL _game_respawn_index
736   0000              	GLOBAL _game_respawn_time
737   0000              	GLOBAL _game_score_top
738   0000              	GLOBAL _player_coins
739   0000              	GLOBAL _player_lives
740   0000              	GLOBAL _game_over
741   0000              	GLOBAL _game_sound
742   0000              	GLOBAL _game_inf_lives
743   0000              	GLOBAL _game_inmune
744   0000              	GLOBAL _sprite_curr_index
745   0000              	GLOBAL _spr_count
746   0000              	GLOBAL _bullet_time
747   0000              	GLOBAL _anim_time
748   0000              	GLOBAL _frame_time
749   0000              	GLOBAL _curr_time
750   0000              	GLOBAL _s_state
751   0000              	GLOBAL _attrib_osd
752   0000              	GLOBAL _attrib_hl
753   0000              	GLOBAL _attrib
754   0000              	GLOBAL _zx_val_asm
755   0000              	GLOBAL _enemies
756   0000              	GLOBAL _tmp_ui
757   0000              	GLOBAL _tmp_sc
758   0000              	GLOBAL _tmp_uc
759   0000              	GLOBAL _tmp1
760   0000              	GLOBAL _tmp0
761   0000              	GLOBAL _tmp
762   0000              	GLOBAL _index1
763   0000              	GLOBAL _index0
764   0000              	GLOBAL _loop_count
765   0000              	GLOBAL _s_class
766   0000              	GLOBAL _s_col1
767   0000              	GLOBAL _s_col0
768   0000              	GLOBAL _s_lin1
769   0000              	GLOBAL _s_lin0
770   0000              	GLOBAL _s_tile1
771   0000              	GLOBAL _s_tile0
772   0000              	GLOBAL _player_brick_time
773   0000              	GLOBAL _player_hit_count
774   0000              	GLOBAL _game_show_fps
775   0000              	GLOBAL _sprite_horizontal_check
776   0000              	GLOBAL _sprite_on_air
777   0000              	GLOBAL _sprite
778   0000              	GLOBAL _fps
779   0000              	GLOBAL _game_2buttons
780   0000              	GLOBAL _game_respawn_curr_time
781   0000              	GLOBAL _game_worldup
782   0000              	GLOBAL _game_mush_count
783   0000              	GLOBAL _game_boss_fix
784   0000              	GLOBAL _game_boss_hit
785   0000              	GLOBAL _game_boss_alive
786   0000              	GLOBAL _game_boss
787   0000              	GLOBAL _game_world
788   0000              	GLOBAL _game_gravity
789   0000              	GLOBAL _player_onfire
790   0000              	GLOBAL _player_anim_stair
791   0000              	GLOBAL _player_hit_time
792   0000              	GLOBAL _game_checkpoint_scr
793   0000              	GLOBAL _game_checkpoint_lin
794   0000              	GLOBAL _game_checkpoint_col
795   0000              	GLOBAL _player_lin_scr
796   0000              	GLOBAL _player_col_scr
797   0000              	GLOBAL _player_lvl
798   0000              	GLOBAL _player_int
799   0000              	GLOBAL _player_str
800   0000              	GLOBAL _player_max_vita
801   0000              	GLOBAL _player_max_mana
802   0000              	GLOBAL _player_vita
803   0000              	GLOBAL _player_mana
804   0000              	GLOBAL _player_keys
805   0000              	GLOBAL _player_vel_inc
806   0000              	GLOBAL _player_vel_y1
807   0000              	GLOBAL _player_vel_y0
808   0000              	GLOBAL _player_vel_y
809   0000              	GLOBAL _player_vel_x
810   0000              	GLOBAL _player_score
811   0000              	GLOBAL _last_time
812   0000              	GLOBAL _spr_timer
813   0000              	GLOBAL _jump_lin
814   0000              	GLOBAL _player_hit_col
815   0000              	GLOBAL _player_hit_lin
816   0000              	GLOBAL _colint
817   0000              	GLOBAL _col
818   0000              	GLOBAL _tbuffer
819   0000              	GLOBAL _lin
820   0000              	GLOBAL _tile
821   0000              	GLOBAL _state_a
822   0000              	GLOBAL _state
823   0000              	GLOBAL _class
824   0000              	GLOBAL _dirs_alt
825   0000              	GLOBAL _dirs
826   0000              	GLOBAL _k2
827   0000              	GLOBAL _k1
828   0000              	GLOBAL _joyfunc2
829   0000              	GLOBAL _joyfunc1
830   0000              	GLOBAL _btiles
831   0000              	GLOBAL _spec128
832   0000              	GLOBAL _GLOBAL_ZX_PORT_7FFD
833   0000              	GLOBAL _GLOBAL_ZX_PORT_1FFD
834   0000              	GLOBAL _GLOBAL_ZX_PORT_FE
835   0000              	GLOBAL _ay_song_06_ciel
836   0000              	GLOBAL _ay_song_04_sunflower
837   0000              	GLOBAL _ay_song_04_lotr_level_start
838   0000              	GLOBAL _ay_song_04_lotr_level_complete
839   0000              	GLOBAL _ay_song_04_lotr_lose_a_life
840   0000              	GLOBAL _ay_song_04_lotr
841   0000              	GLOBAL _ay_fx_06_explosion1
842   0000              	GLOBAL _ay_fx_06_efecto
843   0000              	GLOBAL _ay_fx_06_disparo2
844   0000              	GLOBAL _ay_fx_06_disparo1
845   0000              	GLOBAL _ay_fx_04_sin_mana
846   0000              	GLOBAL _ay_fx_04_salto
847   0000              	GLOBAL _ay_fx_04_pierto_abierta
848   0000              	GLOBAL _ay_fx_04_magia1
849   0000              	GLOBAL _ay_fx_04_golpe
850   0000              	GLOBAL _ay_fx_04_explosion
851   0000              	GLOBAL _ay_fx_04_dano_por_toque
852   0000              	GLOBAL _ay_fx_04_coin
853   0000              	GLOBAL _world0_h
854   0000              	GLOBAL _world0_w
855   0000              	GLOBAL _world0
856   0000              	GLOBAL _paper0
857   0000              	GLOBAL _lenght0
858   0000              	GLOBAL _start_scr0
859   0000              ;--------------------------------------------------------
860   0000              ; special function registers
861   0000              ;--------------------------------------------------------
862   0000              defc _IO_FE	=	0x00fe
863   0000              defc _IO_1FFD	=	0x1ffd
864   0000              defc _IO_7FFD	=	0x7ffd
865   0000              ;--------------------------------------------------------
866   0000              ; ram data
867   0000              ;--------------------------------------------------------
868   0000              	SECTION bss_compiler
869   0000              ;--------------------------------------------------------
870   0000              ; ram data
871   0000              ;--------------------------------------------------------
872   0000              
873   0000              IF 0
874   0000              
875   0000              ; .area _INITIALIZED removed by z88dk
876   0000              
877   0000              
878   0000              ENDIF
879   0000              
880   0000              ;--------------------------------------------------------
881   0000              ; absolute external ram data
882   0000              ;--------------------------------------------------------
883   0000              	SECTION IGNORE
884   0000              ;--------------------------------------------------------
885   0000              ; global & static initialisations
886   0000              ;--------------------------------------------------------
887   0000              	SECTION code_crt_init
888   0000              ;--------------------------------------------------------
889   0000              ; Home
890   0000              ;--------------------------------------------------------
891   0000              	SECTION IGNORE
892   0000              ;--------------------------------------------------------
893   0000              ; code
894   0000              ;--------------------------------------------------------
895   0000              	SECTION code_compiler
896   0000              ;	---------------------------------
897   0000              ; Function player_init
898   0000              ; ---------------------------------
899   0000              _player_init:
900   0000  CD 00 00    	call	___sdcc_enter_ix
901   0003  21 07 00    	ld	hl, +(_class + 0x0007)
902   0006  36 00       	ld	(hl),0x00
903   0008  21 07 00    	ld	hl, +(_tile + 0x0007)
904   000B  DD 7E 06    	ld	a,(ix+6)
905   000E  77          	ld	(hl), a
906   000F  21 07 00    	ld	hl, +(_lin + 0x0007)
907   0012  DD 7E 04    	ld	a,(ix+4)
908   0015  77          	ld	(hl), a
909   0016  21 07 00    	ld	hl, +(_col + 0x0007)
910   0019  DD 7E 05    	ld	a,(ix+5)
911   001C  77          	ld	(hl), a
912   001D  21 07 00    	ld	hl, +(_colint + 0x0007)
913   0020  36 00       	ld	(hl),0x00
914   0022  21 07 00    	ld	hl, +(_state + 0x0007)
915   0025  36 00       	ld	(hl),0x00
916   0027  01 07 00    	ld	bc,_state_a+7
917   002A  AF          	xor	a, a
918   002B  02          	ld	(bc), a
919   002C  21 07 00    	ld	hl, +(_jump_lin + 0x0007)
920   002F  DD 7E 04    	ld	a,(ix+4)
921   0032  77          	ld	(hl), a
922   0033  ED 5B 00 00 	ld	de,(_curr_time)
923   0037  ED 53 0E 00 	ld	(_last_time + 0x000e),de
924   003B  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
925   003E  36 00       	ld	(hl),0x00
926   0040  0A          	ld	a, (bc)
927   0041  F6 11       	or	a,+(0x01|0x10)
928   0043  02          	ld	(bc),a
929   0044  21 00 00    	ld	hl,_player_hit_col
930   0047  36 00       	ld	(hl),0x00
931   0049  21 00 00    	ld	hl,_player_hit_lin
932   004C  36 00       	ld	(hl),0x00
933   004E  21 00 00    	ld	hl,_player_onstair
934   0051  36 00       	ld	(hl),0x00
935   0053  21 00 00    	ld	hl,_player_onfire
936   0056  36 00       	ld	(hl),0x00
937   0058  DD 66 05    	ld	h,(ix+5)
938   005B  DD 6E 04    	ld	l,(ix+4)
939   005E  E5          	push	hl
940   005F  DD 56 06    	ld	d,(ix+6)
941   0062  1E 07       	ld	e,0x07
942   0064  D5          	push	de
943   0065  CD 00 00    	call	_NIRVANAP_spriteT_callee
944   0068  DD E1       	pop	ix
945   006A  C9          	ret
946   006B              	SECTION code_compiler
947   006B              ;	---------------------------------
948   006B              ; Function player_turn
949   006B              ; ---------------------------------
950   006B              _player_turn:
951   006B  21 00 00    	ld	hl,_sprite
952   006E  CD 00 00    	call	_spr_chktime
953   0071  7D          	ld	a, l
954   0072  B7          	or	a, a
955   0073  C8          	ret	Z
956   0074  21 00 00    	ld	hl,_k1
957   0077  E5          	push	hl
958   0078  2A 00 00    	ld	hl,(_joyfunc1)
959   007B  CD 00 00    	call	___sdcc_call_hl
960   007E  F1          	pop	af
961   007F  7D          	ld	a,l
962   0080  32 00 00    	ld	(_dirs),a
963   0083  21 00 00    	ld	hl,_k2
964   0086  E5          	push	hl
965   0087  2A 00 00    	ld	hl,(_joyfunc2)
966   008A  CD 00 00    	call	___sdcc_call_hl
967   008D  F1          	pop	af
968   008E  7D          	ld	a,l
969   008F  32 00 00    	ld	(_dirs_alt),a
970   0092  21 00 00    	ld	hl,_s_class
971   0095  36 00       	ld	(hl),0x00
972   0097  CD 9D 00    	call	_player_move
973   009A  C3 C4 03    	jp  _player_collision
974   009D              	SECTION code_compiler
975   009D              ;	---------------------------------
976   009D              ; Function player_move
977   009D              ; ---------------------------------
978   009D              _player_move:
979   009D  3A 07 00    	ld	a,(_lin + 0x0007)
980   00A0  32 00 00    	ld	(_s_lin0),a
981   00A3  3A 07 00    	ld	a,(_col + 0x0007)
982   00A6  32 00 00    	ld	(_s_col0),a
983   00A9  3A 07 00    	ld	a,(_state + 0x0007)
984   00AC  32 00 00    	ld	(_s_state),a
985   00AF  21 00 00    	ld	hl,_s_state
986   00B2  CB 46       	bit	0, (hl)
987   00B4  20 07       	jr	NZ,l_player_move_00113
988   00B6  21 00 00    	ld	hl,_s_state
989   00B9  CB 4E       	bit	1, (hl)
990   00BB  28 43       	jr	Z,l_player_move_00114
991   00BD              l_player_move_00113:
992   00BD  CD 1F 03    	call	_player_fire
993   00C0  3A 00 00    	ld	a,(_player_vel_y)
994   00C3  21 00 00    	ld	hl,_player_vel_y1
995   00C6  96          	sub	a, (hl)
996   00C7  E2 CC 00    	jp	PO, l_player_move_00162
997   00CA  EE 80       	xor	a,0x80
998   00CC              l_player_move_00162:
999   00CC  F2 E9 00    	jp	P, l_player_move_00106
1000  00CF  21 00 00    	ld	hl,_dirs
1001  00D2  CB 56       	bit	2, (hl)
1002  00D4  28 06       	jr	Z,l_player_move_00102
1003  00D6  21 00 00    	ld	hl,_s_state
1004  00D9  CD 00 00    	call	_spr_set_left
1005  00DC              l_player_move_00102:
1006  00DC  21 00 00    	ld	hl,_dirs
1007  00DF  CB 4E       	bit	1, (hl)
1008  00E1  28 06       	jr	Z,l_player_move_00106
1009  00E3  21 00 00    	ld	hl,_s_state
1010  00E6  CD 00 00    	call	_spr_set_right
1011  00E9              l_player_move_00106:
1012  00E9  CD 6F 0E    	call	_player_move_jump
1013  00EC  7D          	ld	a, l
1014  00ED  B7          	or	a, a
1015  00EE  28 1C       	jr	Z,l_player_move_00115
1016  00F0  3A 00 00    	ld	a,(_player_onstair)
1017  00F3  B7          	or	a, a
1018  00F4  20 16       	jr	NZ,l_player_move_00115
1019  00F6  21 60 08    	ld	hl,0x0860
1020  00F9  E5          	push	hl
1021  00FA  CD 37 07    	call	_player_tile
1022  00FD  F1          	pop	af
1023  00FE  18 0C       	jr	l_player_move_00115
1024  0100              l_player_move_00114:
1025  0100  CD 72 01    	call	_player_move_input
1026  0103  3A 00 00    	ld	a,(_player_onstair)
1027  0106  B7          	or	a, a
1028  0107  20 03       	jr	NZ,l_player_move_00115
1029  0109  CD FF 0C    	call	_player_check_floor
1030  010C              l_player_move_00115:
1031  010C  CD 00 00    	call	_spr_redraw
1032  010F  7D          	ld	a, l
1033  0110  B7          	or	a, a
1034  0111  28 03       	jr	Z,l_player_move_00118
1035  0113  CD 58 07    	call	_player_check_map
1036  0116              l_player_move_00118:
1037  0116  3A 00 00    	ld	a,(_player_hit_lin)
1038  0119  B7          	or	a, a
1039  011A  28 03       	jr	Z,l_player_move_00120
1040  011C  CD 5B 0C    	call	_player_hit_platform_clear
1041  011F              l_player_move_00120:
1042  011F  3A 00 00    	ld	a,(_s_state)
1043  0122  32 07 00    	ld	((_state + 0x0007)),a
1044  0125  2E 00       	ld	l,0x00
1045  0127  C9          	ret
1046  0128              	SECTION code_compiler
1047  0128              ;	---------------------------------
1048  0128              ; Function player_check_input
1049  0128              ; ---------------------------------
1050  0128              _player_check_input:
1051  0128  21 00 00    	ld	hl,_dirs
1052  012B  CB 56       	bit	2, (hl)
1053  012D  28 0C       	jr	Z,l_player_check_input_00102
1054  012F  21 00 00    	ld	hl,_dirs
1055  0132  CB 5E       	bit	3, (hl)
1056  0134  28 05       	jr	Z,l_player_check_input_00102
1057  0136  21 00 00    	ld	hl,_dirs
1058  0139  36 00       	ld	(hl),0x00
1059  013B              l_player_check_input_00102:
1060  013B  21 00 00    	ld	hl,_dirs
1061  013E  7E          	ld	a, (hl)
1062  013F  CB 07       	rlc	a
1063  0141  E6 01       	and	a,0x01
1064  0143  CB 47       	bit	0, a
1065  0145  20 28       	jr	NZ,l_player_check_input_00107
1066  0147  CB 56       	bit	2, (hl)
1067  0149  20 24       	jr	NZ,l_player_check_input_00107
1068  014B  21 00 00    	ld	hl,_dirs
1069  014E  CB 5E       	bit	3, (hl)
1070  0150  20 1D       	jr	NZ,l_player_check_input_00107
1071  0152  21 00 00    	ld	hl,_dirs
1072  0155  CB 46       	bit	0, (hl)
1073  0157  20 16       	jr	NZ,l_player_check_input_00107
1074  0159  21 00 00    	ld	hl,_dirs
1075  015C  CB 4E       	bit	1, (hl)
1076  015E  20 0F       	jr	NZ,l_player_check_input_00107
1077  0160  3A 00 00    	ld	a,(_dirs_alt)
1078  0163  CB 07       	rlc	a
1079  0165  E6 01       	and	a,0x01
1080  0167  CB 47       	bit	0, a
1081  0169  20 04       	jr	NZ,l_player_check_input_00107
1082  016B  2E 00       	ld	l,0x00
1083  016D  18 02       	jr	l_player_check_input_00108
1084  016F              l_player_check_input_00107:
1085  016F  2E 01       	ld	l,0x01
1086  0171              l_player_check_input_00108:
1087  0171  C9          	ret
1088  0172              	SECTION code_compiler
1089  0172              ;	---------------------------------
1090  0172              ; Function player_move_input
1091  0172              ; ---------------------------------
1092  0172              _player_move_input:
1093  0172  CD 28 01    	call	_player_check_input
1094  0175  7D          	ld	a, l
1095  0176  B7          	or	a, a
1096  0177  CA DF 02    	jp	Z, l_player_move_input_00147
1097  017A  CD 1F 03    	call	_player_fire
1098  017D  7D          	ld	a, l
1099  017E  B7          	or	a, a
1100  017F  28 0A       	jr	Z,l_player_move_input_00102
1101  0181  21 00 00    	ld	hl,_dirs
1102  0184  36 00       	ld	(hl),0x00
1103  0186  2E 00       	ld	l,0x00
1104  0188  C3 05 03    	jp	l_player_move_input_00149
1105  018B              l_player_move_input_00102:
1106  018B  3A 00 00    	ld	a,(_game_2buttons)
1107  018E  B7          	or	a, a
1108  018F  28 07       	jr	Z,l_player_move_input_00104
1109  0191  3A 00 00    	ld	a,(_dirs)
1110  0194  E6 80       	and	a,0x80
1111  0196  18 16       	jr	l_player_move_input_00105
1112  0198              l_player_move_input_00104:
1113  0198  21 00 00    	ld	hl,_dirs
1114  019B  7E          	ld	a, (hl)
1115  019C  CB 07       	rlc	a
1116  019E  E6 01       	and	a,0x01
1117  01A0  CB 47       	bit	0, a
1118  01A2  28 04       	jr	Z,l_player_move_input_00151
1119  01A4  CB 46       	bit	0, (hl)
1120  01A6  20 04       	jr	NZ,l_player_move_input_00152
1121  01A8              l_player_move_input_00151:
1122  01A8  3E 00       	ld	a,0x00
1123  01AA  18 02       	jr	l_player_move_input_00153
1124  01AC              l_player_move_input_00152:
1125  01AC  3E 01       	ld	a,0x01
1126  01AE              l_player_move_input_00153:
1127  01AE              l_player_move_input_00105:
1128  01AE  B7          	or	a, a
1129  01AF  28 3F       	jr	Z,l_player_move_input_00107
1130  01B1  21 00 00    	ld	hl,_player_vel_inc
1131  01B4  36 01       	ld	(hl),0x01
1132  01B6  21 00 00    	ld	hl,_ay_fx_04_salto
1133  01B9  E5          	push	hl
1134  01BA  21 01 04    	ld	hl,0x0401
1135  01BD  E5          	push	hl
1136  01BE  CD 00 00    	call	_ay_song_play
1137  01C1  21 00 00    	ld	hl,_player_onstair
1138  01C4  36 00       	ld	(hl),0x00
1139  01C6  21 00 00    	ld	hl,_s_state
1140  01C9  CD 00 00    	call	_spr_set_up
1141  01CC  3A 07 00    	ld	a,(_lin + 0x0007)
1142  01CF  32 07 00    	ld	(_jump_lin+7),a
1143  01D2  3A 00 00    	ld	a,(_s_state)
1144  01D5  32 07 00    	ld	((_state + 0x0007)),a
1145  01D8  21 64 08    	ld	hl,0x0864
1146  01DB  E5          	push	hl
1147  01DC  CD 37 07    	call	_player_tile
1148  01DF  F1          	pop	af
1149  01E0  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
1150  01E3  36 02       	ld	(hl),0x02
1151  01E5  3A 00 00    	ld	a,(_player_vel_y0)
1152  01E8  32 00 00    	ld	(_player_vel_y),a
1153  01EB  2E 01       	ld	l,0x01
1154  01ED  C3 05 03    	jp	l_player_move_input_00149
1155  01F0              l_player_move_input_00107:
1156  01F0  21 00 00    	ld	hl,_dirs
1157  01F3  CB 5E       	bit	3, (hl)
1158  01F5  28 20       	jr	Z,l_player_move_input_00111
1159  01F7  CD 06 03    	call	_player_fix_walk_lin
1160  01FA  21 00 00    	ld	hl,_s_state
1161  01FD  CD 00 00    	call	_spr_set_right
1162  0200  01 07 00    	ld	bc,_state_a+7
1163  0203  0A          	ld	a, (bc)
1164  0204  F6 10       	or	a,0x10
1165  0206  E6 F7       	and	a,0xf7
1166  0208  02          	ld	(bc),a
1167  0209  3A 00 00    	ld	a,(_player_onstair)
1168  020C  B7          	or	a, a
1169  020D  28 05       	jr	Z,l_player_move_input_00109
1170  020F  2E 00       	ld	l,0x00
1171  0211  CD 63 06    	call	_player_check_stairs
1172  0214              l_player_move_input_00109:
1173  0214  CD 00 00    	call	_spr_move_horizontal
1174  0217              l_player_move_input_00111:
1175  0217  21 00 00    	ld	hl,_dirs
1176  021A  CB 56       	bit	2, (hl)
1177  021C  28 20       	jr	Z,l_player_move_input_00115
1178  021E  CD 06 03    	call	_player_fix_walk_lin
1179  0221  21 00 00    	ld	hl,_s_state
1180  0224  CD 00 00    	call	_spr_set_left
1181  0227  01 07 00    	ld	bc,_state_a+7
1182  022A  0A          	ld	a, (bc)
1183  022B  F6 08       	or	a,0x08
1184  022D  E6 EF       	and	a,0xef
1185  022F  02          	ld	(bc),a
1186  0230  3A 00 00    	ld	a,(_player_onstair)
1187  0233  B7          	or	a, a
1188  0234  28 05       	jr	Z,l_player_move_input_00113
1189  0236  2E 00       	ld	l,0x00
1190  0238  CD 63 06    	call	_player_check_stairs
1191  023B              l_player_move_input_00113:
1192  023B  CD 00 00    	call	_spr_move_horizontal
1193  023E              l_player_move_input_00115:
1194  023E  21 00 00    	ld	hl,_dirs
1195  0241  CB 46       	bit	0, (hl)
1196  0243  28 39       	jr	Z,l_player_move_input_00127
1197  0245  2E 00       	ld	l,0x00
1198  0247  CD 63 06    	call	_player_check_stairs
1199  024A  3A 00 00    	ld	a,(_player_onstair)
1200  024D  B7          	or	a, a
1201  024E  20 10       	jr	NZ,l_player_move_input_00119
1202  0250  2E 01       	ld	l,0x01
1203  0252  CD 63 06    	call	_player_check_stairs
1204  0255  3A 00 00    	ld	a,(_player_onstair)
1205  0258  B7          	or	a, a
1206  0259  20 05       	jr	NZ,l_player_move_input_00119
1207  025B  2E FE       	ld	l,0xfe
1208  025D  CD C3 05    	call	_player_check_stairs_vertical
1209  0260              l_player_move_input_00119:
1210  0260  3A 00 00    	ld	a,(_player_onstair)
1211  0263  B7          	or	a, a
1212  0264  28 05       	jr	Z,l_player_move_input_00124
1213  0266  CD 00 00    	call	_spr_move_up
1214  0269  18 13       	jr	l_player_move_input_00127
1215  026B              l_player_move_input_00124:
1216  026B  21 00 00    	ld	hl,_dirs
1217  026E  CB 5E       	bit	3, (hl)
1218  0270  20 0C       	jr	NZ,l_player_move_input_00127
1219  0272  21 00 00    	ld	hl,_dirs
1220  0275  CB 56       	bit	2, (hl)
1221  0277  20 05       	jr	NZ,l_player_move_input_00127
1222  0279  2E 00       	ld	l,0x00
1223  027B  C3 05 03    	jp	l_player_move_input_00149
1224  027E              l_player_move_input_00127:
1225  027E  21 00 00    	ld	hl,_dirs
1226  0281  CB 4E       	bit	1, (hl)
1227  0283  28 38       	jr	Z,l_player_move_input_00139
1228  0285  2E 00       	ld	l,0x00
1229  0287  CD 63 06    	call	_player_check_stairs
1230  028A  3A 00 00    	ld	a,(_player_onstair)
1231  028D  B7          	or	a, a
1232  028E  20 10       	jr	NZ,l_player_move_input_00131
1233  0290  2E 01       	ld	l,0x01
1234  0292  CD 63 06    	call	_player_check_stairs
1235  0295  3A 00 00    	ld	a,(_player_onstair)
1236  0298  B7          	or	a, a
1237  0299  20 05       	jr	NZ,l_player_move_input_00131
1238  029B  2E 12       	ld	l,0x12
1239  029D  CD C3 05    	call	_player_check_stairs_vertical
1240  02A0              l_player_move_input_00131:
1241  02A0  3A 00 00    	ld	a,(_player_onstair)
1242  02A3  B7          	or	a, a
1243  02A4  28 05       	jr	Z,l_player_move_input_00136
1244  02A6  CD 00 00    	call	_spr_move_down
1245  02A9  18 12       	jr	l_player_move_input_00139
1246  02AB              l_player_move_input_00136:
1247  02AB  21 00 00    	ld	hl,_dirs
1248  02AE  CB 5E       	bit	3, (hl)
1249  02B0  20 0B       	jr	NZ,l_player_move_input_00139
1250  02B2  21 00 00    	ld	hl,_dirs
1251  02B5  CB 56       	bit	2, (hl)
1252  02B7  20 04       	jr	NZ,l_player_move_input_00139
1253  02B9  2E 00       	ld	l,0x00
1254  02BB  18 48       	jr	l_player_move_input_00149
1255  02BD              l_player_move_input_00139:
1256  02BD  3A 00 00    	ld	a,(_s_state)
1257  02C0  32 07 00    	ld	((_state + 0x0007)),a
1258  02C3  3A 00 00    	ld	a,(_player_onstair)
1259  02C6  B7          	or	a, a
1260  02C7  28 0A       	jr	Z,l_player_move_input_00141
1261  02C9  21 72 00    	ld	hl,0x0072
1262  02CC  E5          	push	hl
1263  02CD  CD 37 07    	call	_player_tile
1264  02D0  F1          	pop	af
1265  02D1  18 08       	jr	l_player_move_input_00142
1266  02D3              l_player_move_input_00141:
1267  02D3  21 60 08    	ld	hl,0x0860
1268  02D6  E5          	push	hl
1269  02D7  CD 37 07    	call	_player_tile
1270  02DA  F1          	pop	af
1271  02DB              l_player_move_input_00142:
1272  02DB  2E 01       	ld	l,0x01
1273  02DD  18 26       	jr	l_player_move_input_00149
1274  02DF              l_player_move_input_00147:
1275  02DF  21 07 00    	ld	hl, +(_colint + 0x0007)
1276  02E2  36 00       	ld	(hl),0x00
1277  02E4  3A 00 00    	ld	a,(_player_onstair)
1278  02E7  B7          	or	a, a
1279  02E8  28 0A       	jr	Z,l_player_move_input_00144
1280  02EA  21 72 00    	ld	hl,0x0072
1281  02ED  E5          	push	hl
1282  02EE  CD 37 07    	call	_player_tile
1283  02F1  F1          	pop	af
1284  02F2  18 08       	jr	l_player_move_input_00145
1285  02F4              l_player_move_input_00144:
1286  02F4  21 70 01    	ld	hl,0x0170
1287  02F7  E5          	push	hl
1288  02F8  CD 37 07    	call	_player_tile
1289  02FB  F1          	pop	af
1290  02FC              l_player_move_input_00145:
1291  02FC  21 00 00    	ld	hl,_s_state
1292  02FF  7E          	ld	a,(hl)
1293  0300  E6 F3       	and	a,+(0xf7&0xfb)
1294  0302  77          	ld	(hl),a
1295  0303  2E 00       	ld	l,0x00
1296  0305              l_player_move_input_00149:
1297  0305  C9          	ret
1298  0306              	SECTION code_compiler
1299  0306              ;	---------------------------------
1300  0306              ; Function player_fix_walk_lin
1301  0306              ; ---------------------------------
1302  0306              _player_fix_walk_lin:
1303  0306  3A 00 00    	ld	a,(_player_onstair)
1304  0309  B7          	or	a, a
1305  030A  C0          	ret	NZ
1306  030B  01 07 00    	ld	bc,_lin+7
1307  030E  3A 00 00    	ld	a,(_s_lin0)
1308  0311  07          	rlca
1309  0312  07          	rlca
1310  0313  07          	rlca
1311  0314  07          	rlca
1312  0315  E6 0F       	and	a,0x0f
1313  0317  07          	rlca
1314  0318  07          	rlca
1315  0319  07          	rlca
1316  031A  07          	rlca
1317  031B  E6 F0       	and	a,0xf0
1318  031D  02          	ld	(bc), a
1319  031E  C9          	ret
1320  031F              	SECTION code_compiler
1321  031F              ;	---------------------------------
1322  031F              ; Function player_fire
1323  031F              ; ---------------------------------
1324  031F              _player_fire:
1325  031F  CD 00 00    	call	___sdcc_enter_ix
1326  0322  3B          	dec	sp
1327  0323  3A 00 00    	ld	a,(_game_2buttons)
1328  0326  B7          	or	a, a
1329  0327  28 0A       	jr	Z,l_player_fire_00102
1330  0329  3A 00 00    	ld	a,(_dirs_alt)
1331  032C  E6 80       	and	a,0x80
1332  032E  32 00 00    	ld	(_player_onfire),a
1333  0331  18 1A       	jr	l_player_fire_00103
1334  0333              l_player_fire_00102:
1335  0333  21 00 00    	ld	hl,_dirs
1336  0336  7E          	ld	a, (hl)
1337  0337  CB 07       	rlc	a
1338  0339  E6 01       	and	a,0x01
1339  033B  CB 47       	bit	0, a
1340  033D  28 04       	jr	Z,l_player_fire_00122
1341  033F  CB 46       	bit	0, (hl)
1342  0341  28 04       	jr	Z,l_player_fire_00123
1343  0343              l_player_fire_00122:
1344  0343  0E 00       	ld	c,0x00
1345  0345  18 02       	jr	l_player_fire_00124
1346  0347              l_player_fire_00123:
1347  0347  0E 01       	ld	c,0x01
1348  0349              l_player_fire_00124:
1349  0349  21 00 00    	ld	hl,_player_onfire
1350  034C  71          	ld	(hl), c
1351  034D              l_player_fire_00103:
1352  034D  3A 00 00    	ld	a,(_player_onfire)
1353  0350  B7          	or	a, a
1354  0351  28 6B       	jr	Z,l_player_fire_00119
1355  0353  3A 07 00    	ld	a,(_tile + 0x0007)
1356  0356  FE 70       	cp	a,0x70
1357  0358  28 04       	jr	Z,l_player_fire_00104
1358  035A  D6 71       	sub	a,0x71
1359  035C  20 0D       	jr	NZ,l_player_fire_00105
1360  035E              l_player_fire_00104:
1361  035E  21 60 08    	ld	hl,0x0860
1362  0361  E5          	push	hl
1363  0362  CD 37 07    	call	_player_tile
1364  0365  F1          	pop	af
1365  0366  21 07 00    	ld	hl, +(_colint + 0x0007)
1366  0369  36 00       	ld	(hl),0x00
1367  036B              l_player_fire_00105:
1368  036B  21 00 00    	ld	hl,_player_mana
1369  036E  7E          	ld	a, (hl)
1370  036F  B7          	or	a, a
1371  0370  28 37       	jr	Z,l_player_fire_00115
1372  0372  3A 07 00    	ld	a,(_bullet_col + 0x0007)
1373  0375  3C          	inc	a
1374  0376  20 31       	jr	NZ,l_player_fire_00115
1375  0378  3E 05       	ld	a,0x05
1376  037A  96          	sub	a, (hl)
1377  037B  30 0F       	jr	NC,l_player_fire_00110
1378  037D  3A 00 00    	ld	a,(_game_inmune)
1379  0380  B7          	or	a, a
1380  0381  20 0E       	jr	NZ,l_player_fire_00111
1381  0383  21 00 00    	ld	hl,_player_mana
1382  0386  7E          	ld	a, (hl)
1383  0387  C6 FB       	add	a,0xfb
1384  0389  77          	ld	(hl), a
1385  038A  18 05       	jr	l_player_fire_00111
1386  038C              l_player_fire_00110:
1387  038C  21 00 00    	ld	hl,_player_mana
1388  038F  36 00       	ld	(hl),0x00
1389  0391              l_player_fire_00111:
1390  0391  CD 00 00    	call	_game_update_stats
1391  0394  21 00 00    	ld	hl,_ay_fx_06_disparo1
1392  0397  E5          	push	hl
1393  0398  21 01 06    	ld	hl,0x0601
1394  039B  E5          	push	hl
1395  039C  CD 00 00    	call	_ay_song_play
1396  039F  21 07 78    	ld	hl,0x7807
1397  03A2  E5          	push	hl
1398  03A3  CD 00 00    	call	_game_shoot_fire
1399  03A6  F1          	pop	af
1400  03A7  18 11       	jr	l_player_fire_00116
1401  03A9              l_player_fire_00115:
1402  03A9  3A 00 00    	ld	a,(_player_mana)
1403  03AC  B7          	or	a, a
1404  03AD  20 0B       	jr	NZ,l_player_fire_00116
1405  03AF  21 00 00    	ld	hl,_ay_fx_04_sin_mana
1406  03B2  E5          	push	hl
1407  03B3  21 01 04    	ld	hl,0x0401
1408  03B6  E5          	push	hl
1409  03B7  CD 00 00    	call	_ay_song_play
1410  03BA              l_player_fire_00116:
1411  03BA  2E 01       	ld	l,0x01
1412  03BC  18 02       	jr	l_player_fire_00120
1413  03BE              l_player_fire_00119:
1414  03BE  2E 00       	ld	l,0x00
1415  03C0              l_player_fire_00120:
1416  03C0  33          	inc	sp
1417  03C1  DD E1       	pop	ix
1418  03C3  C9          	ret
1419  03C4              	SECTION code_compiler
1420  03C4              ;	---------------------------------
1421  03C4              ; Function player_collision
1422  03C4              ; ---------------------------------
1423  03C4              _player_collision:
1424  03C4  3E 19       	ld	a,0x19
1425  03C6  F5          	push	af
1426  03C7  33          	inc	sp
1427  03C8  21 00 00    	ld	hl,_player_hit_time
1428  03CB  E5          	push	hl
1429  03CC  CD 00 00    	call	_game_check_time
1430  03CF  F1          	pop	af
1431  03D0  33          	inc	sp
1432  03D1  7D          	ld	a, l
1433  03D2  B7          	or	a, a
1434  03D3  CA 6F 05    	jp	Z, l_player_collision_00137
1435  03D6  21 00 00    	ld	hl,_sprite
1436  03D9  36 00       	ld	(hl),0x00
1437  03DB  3A 07 00    	ld	a,(_col + 7)
1438  03DE  32 00 00    	ld	(_s_col1),a
1439  03E1  3A 07 00    	ld	a,(_lin + 7)
1440  03E4  32 00 00    	ld	(_s_lin1),a
1441  03E7  C6 08       	add	a,0x08
1442  03E9  4F          	ld	c, a
1443  03EA  3A 00 00    	ld	a, (_s_col1)
1444  03ED  47          	ld	b,a
1445  03EE  C5          	push	bc
1446  03EF  CD 00 00    	call	_spr_calc_index
1447  03F2  F1          	pop	af
1448  03F3  4D          	ld	c, l
1449  03F4  21 00 00    	ld	hl,_sprite_curr_index
1450  03F7  71          	ld	(hl), c
1451  03F8  3E 00       	ld	a, +((_scr_map) & 0xFF)
1452  03FA  86          	add	a, (hl)
1453  03FB  4F          	ld	c, a
1454  03FC  3E 00       	ld	a, +((_scr_map) / 256)
1455  03FE  CE 00       	adc	a,0x00
1456  0400  47          	ld	b, a
1457  0401  0A          	ld	a, (bc)
1458  0402  4F          	ld	c,a
1459  0403  D6 15       	sub	a,0x15
1460  0405  20 31       	jr	NZ,l_player_collision_00104
1461  0407  21 00 00    	ld	hl,_s_state
1462  040A  CB 46       	bit	0, (hl)
1463  040C  20 2A       	jr	NZ,l_player_collision_00104
1464  040E  3A 00 00    	ld	a,(_game_checkpoint_scr)
1465  0411  21 00 00    	ld	hl,_scr_curr
1466  0414  96          	sub	a, (hl)
1467  0415  28 1C       	jr	Z,l_player_collision_00102
1468  0417  21 00 00    	ld	hl,_ay_fx_06_efecto
1469  041A  E5          	push	hl
1470  041B  21 01 06    	ld	hl,0x0601
1471  041E  E5          	push	hl
1472  041F  CD 00 00    	call	_ay_song_play
1473  0422  2E 07       	ld	l,0x07
1474  0424  CD 00 00    	call	_zx_border_fastcall
1475  0427  3A 00 00    	ld	a,(_s_col1)
1476  042A  32 00 00    	ld	(_player_col_scr),a
1477  042D  3A 00 00    	ld	a,(_s_lin1)
1478  0430  32 00 00    	ld	(_player_lin_scr),a
1479  0433              l_player_collision_00102:
1480  0433  C5          	push	bc
1481  0434  CD 00 00    	call	_game_set_checkpoint
1482  0437  C1          	pop	bc
1483  0438              l_player_collision_00104:
1484  0438  3E 2F       	ld	a,0x2f
1485  043A  91          	sub	a, c
1486  043B  30 5F       	jr	NC,l_player_collision_00159
1487  043D  79          	ld	a,c
1488  043E  FE 3A       	cp	a,0x3a
1489  0440  30 5A       	jr	NC,l_player_collision_00159
1490  0442  D6 39       	sub	a,0x39
1491  0444  20 32       	jr	NZ,l_player_collision_00112
1492  0446  21 00 00    	ld	hl,_ay_song_04_lotr_level_complete
1493  0449  E5          	push	hl
1494  044A  21 01 04    	ld	hl,0x0401
1495  044D  E5          	push	hl
1496  044E  CD 00 00    	call	_ay_song_play
1497  0451  21 00 00    	ld	hl,___str_0
1498  0454  E5          	push	hl
1499  0455  21 0C 08    	ld	hl,0x080c
1500  0458  E5          	push	hl
1501  0459  CD 00 00    	call	_zx_print_str
1502  045C  AF          	xor	a, a
1503  045D  F5          	push	af
1504  045E  33          	inc	sp
1505  045F  21 E8 03    	ld	hl,0x03e8
1506  0462  E5          	push	hl
1507  0463  21 08 17    	ld	hl,0x1708
1508  0466  E5          	push	hl
1509  0467  3E 0C       	ld	a,0x0c
1510  0469  F5          	push	af
1511  046A  33          	inc	sp
1512  046B  CD 00 00    	call	_game_colour_message
1513  046E  F1          	pop	af
1514  046F  F1          	pop	af
1515  0470  F1          	pop	af
1516  0471  21 00 00    	ld	hl,_game_worldup
1517  0474  36 01       	ld	(hl),0x01
1518  0476  18 24       	jr	l_player_collision_00159
1519  0478              l_player_collision_00112:
1520  0478  21 00 00    	ld	hl,_game_inmune
1521  047B  7E          	ld	a, (hl)
1522  047C  B7          	or	a,a
1523  047D  20 13       	jr	NZ,l_player_collision_00107
1524  047F  B6          	or	a,(hl)
1525  0480  20 10       	jr	NZ,l_player_collision_00107
1526  0482  3E 82       	ld	a,0x82
1527  0484  21 00 00    	ld	hl,_s_lin1
1528  0487  96          	sub	a, (hl)
1529  0488  30 08       	jr	NC,l_player_collision_00107
1530  048A  CD C0 10    	call	_player_lost_life
1531  048D  2E 00       	ld	l,0x00
1532  048F  C3 71 05    	jp	l_player_collision_00138
1533  0492              l_player_collision_00107:
1534  0492  2E 06       	ld	l,0x06
1535  0494  CD 00 00    	call	_zx_border_fastcall
1536  0497  2E 32       	ld	l,0x32
1537  0499  CD 61 12    	call	_player_hit
1538  049C              l_player_collision_00159:
1539  049C              l_player_collision_00133:
1540  049C  21 00 00    	ld	hl,_sprite
1541  049F  7E          	ld	a, (hl)
1542  04A0  D6 07       	sub	a,0x07
1543  04A2  D2 6F 05    	jp	NC, l_player_collision_00137
1544  04A5  4E          	ld	c,(hl)
1545  04A6  06 00       	ld	b,0x00
1546  04A8  21 00 00    	ld	hl,_class
1547  04AB  09          	add	hl,bc
1548  04AC  7E          	ld	a,(hl)
1549  04AD  32 00 00    	ld	(_s_class),a
1550  04B0  B7          	or	a, a
1551  04B1  CA 68 05    	jp	Z, l_player_collision_00132
1552  04B4  2A 00 00    	ld	hl,(_sprite)
1553  04B7  26 00       	ld	h,0x00
1554  04B9  01 00 00    	ld	bc,_col
1555  04BC  09          	add	hl,bc
1556  04BD  4E          	ld	c,(hl)
1557  04BE  06 00       	ld	b,0x00
1558  04C0  3A 00 00    	ld	a,(_s_col1)
1559  04C3  5F          	ld	e,a
1560  04C4  16 00       	ld	d,0x00
1561  04C6  79          	ld	a, c
1562  04C7  93          	sub	a, e
1563  04C8  6F          	ld	l, a
1564  04C9  78          	ld	a, b
1565  04CA  9A          	sbc	a, d
1566  04CB  67          	ld	h, a
1567  04CC  CD 00 00    	call	_abs_fastcall
1568  04CF  7D          	ld	a,l
1569  04D0  D6 02       	sub	a,0x02
1570  04D2  7C          	ld	a,h
1571  04D3  17          	rla
1572  04D4  3F          	ccf
1573  04D5  1F          	rra
1574  04D6  DE 80       	sbc	a,0x80
1575  04D8  D2 68 05    	jp	NC, l_player_collision_00132
1576  04DB  2A 00 00    	ld	hl,(_sprite)
1577  04DE  26 00       	ld	h,0x00
1578  04E0  01 00 00    	ld	bc,_lin
1579  04E3  09          	add	hl,bc
1580  04E4  4E          	ld	c,(hl)
1581  04E5  06 00       	ld	b,0x00
1582  04E7  3A 00 00    	ld	a,(_s_lin1)
1583  04EA  5F          	ld	e,a
1584  04EB  16 00       	ld	d,0x00
1585  04ED  79          	ld	a, c
1586  04EE  93          	sub	a, e
1587  04EF  6F          	ld	l, a
1588  04F0  78          	ld	a, b
1589  04F1  9A          	sbc	a, d
1590  04F2  67          	ld	h, a
1591  04F3  CD 00 00    	call	_abs_fastcall
1592  04F6  7D          	ld	a,l
1593  04F7  D6 0E       	sub	a,0x0e
1594  04F9  7C          	ld	a,h
1595  04FA  17          	rla
1596  04FB  3F          	ccf
1597  04FC  1F          	rra
1598  04FD  DE 80       	sbc	a,0x80
1599  04FF  30 67       	jr	NC,l_player_collision_00132
1600  0501  3A 00 00    	ld	a,(_s_class)
1601  0504  D6 06       	sub	a,0x06
1602  0506  20 1D       	jr	NZ,l_player_collision_00120
1603  0508  21 00 00    	ld	hl,_player_vita
1604  050B  7E          	ld	a, (hl)
1605  050C  C6 32       	add	a,0x32
1606  050E  77          	ld	(hl), a
1607  050F  3A 00 00    	ld	a,(_player_max_vita)
1608  0512  21 00 00    	ld	hl,_player_vita
1609  0515  96          	sub	a, (hl)
1610  0516  30 06       	jr	NC,l_player_collision_00118
1611  0518  3A 00 00    	ld	a,(_player_max_vita)
1612  051B  32 00 00    	ld	(_player_vita),a
1613  051E              l_player_collision_00118:
1614  051E  CD 72 05    	call	_player_pick_mushroom
1615  0521  2E 00       	ld	l,0x00
1616  0523  18 4C       	jr	l_player_collision_00138
1617  0525              l_player_collision_00120:
1618  0525  3A 00 00    	ld	a,(_s_class)
1619  0528  D6 07       	sub	a,0x07
1620  052A  20 1D       	jr	NZ,l_player_collision_00124
1621  052C  21 00 00    	ld	hl,_player_mana
1622  052F  7E          	ld	a, (hl)
1623  0530  C6 32       	add	a,0x32
1624  0532  77          	ld	(hl), a
1625  0533  3A 00 00    	ld	a,(_player_max_mana)
1626  0536  21 00 00    	ld	hl,_player_mana
1627  0539  96          	sub	a, (hl)
1628  053A  30 06       	jr	NC,l_player_collision_00122
1629  053C  3A 00 00    	ld	a,(_player_max_mana)
1630  053F  32 00 00    	ld	(_player_mana),a
1631  0542              l_player_collision_00122:
1632  0542  CD 72 05    	call	_player_pick_mushroom
1633  0545  2E 00       	ld	l,0x00
1634  0547  18 28       	jr	l_player_collision_00138
1635  0549              l_player_collision_00124:
1636  0549  3A 00 00    	ld	a,(_s_class)
1637  054C  D6 08       	sub	a,0x08
1638  054E  20 0A       	jr	NZ,l_player_collision_00126
1639  0550  CD 72 05    	call	_player_pick_mushroom
1640  0553  CD 91 05    	call	_player_1up
1641  0556  2E 00       	ld	l,0x00
1642  0558  18 17       	jr	l_player_collision_00138
1643  055A              l_player_collision_00126:
1644  055A  2E 02       	ld	l,0x02
1645  055C  CD 00 00    	call	_zx_border_fastcall
1646  055F  2E 14       	ld	l,0x14
1647  0561  CD 61 12    	call	_player_hit
1648  0564  2E 01       	ld	l,0x01
1649  0566  18 09       	jr	l_player_collision_00138
1650  0568              l_player_collision_00132:
1651  0568  21 00 00    	ld	hl,_sprite
1652  056B  34          	inc	(hl)
1653  056C  C3 9C 04    	jp	l_player_collision_00133
1654  056F              l_player_collision_00137:
1655  056F  2E 00       	ld	l,0x00
1656  0571              l_player_collision_00138:
1657  0571  C9          	ret
1658  0572              	SECTION rodata_compiler
1659  0000              ___str_0:
1660  0000  52 4F 55 4E 44 20 43 4F 4D 50 4C 45 54 45 21 
                        	DEFM "ROUND COMPLETE!"
1661  000F  00          	DEFB 0x00
1662  0010              	SECTION code_compiler
1663  0572              ;	---------------------------------
1664  0572              ; Function player_pick_mushroom
1665  0572              ; ---------------------------------
1666  0572              _player_pick_mushroom:
1667  0572  21 00 00    	ld	hl,_ay_fx_04_magia1
1668  0575  E5          	push	hl
1669  0576  21 01 04    	ld	hl,0x0401
1670  0579  E5          	push	hl
1671  057A  CD 00 00    	call	_ay_song_play
1672  057D  21 01 00    	ld	hl,0x0001
1673  0580  CD 8A 0C    	call	_player_score_add
1674  0583  CD 00 00    	call	_game_update_stats
1675  0586  2A 00 00    	ld	hl,(_sprite)
1676  0589  CD 00 00    	call	_spr_destroy
1677  058C  21 00 00    	ld	hl,_game_mush_count
1678  058F  35          	dec	(hl)
1679  0590  C9          	ret
1680  0591              	SECTION code_compiler
1681  0591              ;	---------------------------------
1682  0591              ; Function player_1up
1683  0591              ; ---------------------------------
1684  0591              _player_1up:
1685  0591  21 00 00    	ld	hl,_player_lives
1686  0594  7E          	ld	a, (hl)
1687  0595  D6 64       	sub	a,0x64
1688  0597  D0          	ret	NC
1689  0598  34          	inc	(hl)
1690  0599  CD 00 00    	call	_spr_flatten
1691  059C  21 10 00    	ld	hl,___str_1
1692  059F  E5          	push	hl
1693  05A0  21 0C 0C    	ld	hl,0x0c0c
1694  05A3  E5          	push	hl
1695  05A4  CD 00 00    	call	_zx_print_str
1696  05A7  AF          	xor	a, a
1697  05A8  F5          	push	af
1698  05A9  33          	inc	sp
1699  05AA  21 19 00    	ld	hl,0x0019
1700  05AD  E5          	push	hl
1701  05AE  21 0C 11    	ld	hl,0x110c
1702  05B1  E5          	push	hl
1703  05B2  3E 0C       	ld	a,0x0c
1704  05B4  F5          	push	af
1705  05B5  33          	inc	sp
1706  05B6  CD 00 00    	call	_game_colour_message
1707  05B9  F1          	pop	af
1708  05BA  F1          	pop	af
1709  05BB  F1          	pop	af
1710  05BC  CD 00 00    	call	_game_update_stats
1711  05BF  CD 00 00    	call	_spr_unflatten
1712  05C2  C9          	ret
1713  05C3              	SECTION rodata_compiler
1714  0010              ___str_1:
1715  0010  31 20 55 50 21 
                        	DEFM "1 UP!"
1716  0015  00          	DEFB 0x00
1717  0016              	SECTION code_compiler
1718  05C3              ;	---------------------------------
1719  05C3              ; Function player_check_stairs_vertical
1720  05C3              ; ---------------------------------
1721  05C3              _player_check_stairs_vertical:
1722  05C3  CD 00 00    	call	___sdcc_enter_ix
1723  05C6  3B          	dec	sp
1724  05C7  4D          	ld	c, l
1725  05C8  21 07 00    	ld	hl,+(_col + 0x0007)
1726  05CB  46          	ld	b, (hl)
1727  05CC  CB 40       	bit	0, b
1728  05CE  20 2A       	jr	NZ,l_player_check_stairs_vertical_00102
1729  05D0  3A 07 00    	ld	a,(_lin + 0x0007)
1730  05D3  81          	add	a, c
1731  05D4  4F          	ld	c,a
1732  05D5  C5          	push	bc
1733  05D6  CD 00 00    	call	_spr_calc_index
1734  05D9  F1          	pop	af
1735  05DA  7D          	ld	a,l
1736  05DB  32 00 00    	ld	(_sprite_curr_index),a
1737  05DE  4F          	ld	c,a
1738  05DF  06 00       	ld	b,0x00
1739  05E1  21 00 00    	ld	hl,_scr_map
1740  05E4  09          	add	hl,bc
1741  05E5  7E          	ld	a,(hl)
1742  05E6  4F          	ld	c,a
1743  05E7  D6 44       	sub	a,0x44
1744  05E9  38 05       	jr	C,l_player_check_stairs_vertical_00110
1745  05EB  3E 47       	ld	a,0x47
1746  05ED  91          	sub	a, c
1747  05EE  30 04       	jr	NC,l_player_check_stairs_vertical_00111
1748  05F0              l_player_check_stairs_vertical_00110:
1749  05F0  1E 00       	ld	e,0x00
1750  05F2  18 02       	jr	l_player_check_stairs_vertical_00112
1751  05F4              l_player_check_stairs_vertical_00111:
1752  05F4  1E 01       	ld	e,0x01
1753  05F6              l_player_check_stairs_vertical_00112:
1754  05F6  0E 00       	ld	c,0x00
1755  05F8  18 52       	jr	l_player_check_stairs_vertical_00103
1756  05FA              l_player_check_stairs_vertical_00102:
1757  05FA  78          	ld	a, b
1758  05FB  91          	sub	a, c
1759  05FC  57          	ld	d, a
1760  05FD  3A 07 00    	ld	a,(_lin + 0x0007)
1761  0600  81          	add	a, c
1762  0601  47          	ld	b, a
1763  0602  C5          	push	bc
1764  0603  58          	ld	e,b
1765  0604  D5          	push	de
1766  0605  CD 00 00    	call	_spr_calc_index
1767  0608  F1          	pop	af
1768  0609  C1          	pop	bc
1769  060A  7D          	ld	a,l
1770  060B  32 00 00    	ld	(_sprite_curr_index),a
1771  060E  5F          	ld	e,a
1772  060F  16 00       	ld	d,0x00
1773  0611  21 00 00    	ld	hl,_scr_map
1774  0614  19          	add	hl,de
1775  0615  7E          	ld	a,(hl)
1776  0616  47          	ld	b,a
1777  0617  D6 44       	sub	a,0x44
1778  0619  38 05       	jr	C,l_player_check_stairs_vertical_00113
1779  061B  3E 47       	ld	a,0x47
1780  061D  90          	sub	a, b
1781  061E  30 04       	jr	NC,l_player_check_stairs_vertical_00114
1782  0620              l_player_check_stairs_vertical_00113:
1783  0620  1E 00       	ld	e,0x00
1784  0622  18 02       	jr	l_player_check_stairs_vertical_00115
1785  0624              l_player_check_stairs_vertical_00114:
1786  0624  1E 01       	ld	e,0x01
1787  0626              l_player_check_stairs_vertical_00115:
1788  0626  3A 07 00    	ld	a,(_col + 0x0007)
1789  0629  91          	sub	a, c
1790  062A  47          	ld	b, a
1791  062B  3A 07 00    	ld	a,(_lin + 0x0007)
1792  062E  81          	add	a, c
1793  062F  57          	ld	d, a
1794  0630  D5          	push	de
1795  0631  4A          	ld	c, d
1796  0632  C5          	push	bc
1797  0633  CD 00 00    	call	_spr_calc_index
1798  0636  F1          	pop	af
1799  0637  D1          	pop	de
1800  0638  7D          	ld	a,l
1801  0639  32 00 00    	ld	(_sprite_curr_index),a
1802  063C  7B          	ld	a, e
1803  063D  D6 44       	sub	a,0x44
1804  063F  38 05       	jr	C,l_player_check_stairs_vertical_00116
1805  0641  3E 47       	ld	a,0x47
1806  0643  93          	sub	a, e
1807  0644  30 04       	jr	NC,l_player_check_stairs_vertical_00117
1808  0646              l_player_check_stairs_vertical_00116:
1809  0646  0E 00       	ld	c,0x00
1810  0648  18 02       	jr	l_player_check_stairs_vertical_00118
1811  064A              l_player_check_stairs_vertical_00117:
1812  064A  0E 01       	ld	c,0x01
1813  064C              l_player_check_stairs_vertical_00118:
1814  064C              l_player_check_stairs_vertical_00103:
1815  064C  7B          	ld	a, e
1816  064D  B7          	or	a,a
1817  064E  20 03       	jr	NZ,l_player_check_stairs_vertical_00104
1818  0650  B1          	or	a,c
1819  0651  28 07       	jr	Z,l_player_check_stairs_vertical_00105
1820  0653              l_player_check_stairs_vertical_00104:
1821  0653  21 00 00    	ld	hl,_player_onstair
1822  0656  36 01       	ld	(hl),0x01
1823  0658  18 05       	jr	l_player_check_stairs_vertical_00108
1824  065A              l_player_check_stairs_vertical_00105:
1825  065A  21 00 00    	ld	hl,_player_onstair
1826  065D  36 00       	ld	(hl),0x00
1827  065F              l_player_check_stairs_vertical_00108:
1828  065F  33          	inc	sp
1829  0660  DD E1       	pop	ix
1830  0662  C9          	ret
1831  0663              	SECTION code_compiler
1832  0663              ;	---------------------------------
1833  0663              ; Function player_check_stairs
1834  0663              ; ---------------------------------
1835  0663              _player_check_stairs:
1836  0663  CD 00 00    	call	___sdcc_enter_ix
1837  0666  3B          	dec	sp
1838  0667  45          	ld	b, l
1839  0668  3A 07 00    	ld	a,(_col + 0x0007)
1840  066B  4F          	ld	c,a
1841  066C  80          	add	a, b
1842  066D  57          	ld	d, a
1843  066E  3A 07 00    	ld	a,(_lin + 0x0007)
1844  0671  C5          	push	bc
1845  0672  5F          	ld	e,a
1846  0673  D5          	push	de
1847  0674  CD 00 00    	call	_spr_calc_index
1848  0677  F1          	pop	af
1849  0678  C1          	pop	bc
1850  0679  7D          	ld	a,l
1851  067A  32 00 00    	ld	(_sprite_curr_index),a
1852  067D  5F          	ld	e,a
1853  067E  16 00       	ld	d,0x00
1854  0680  21 00 00    	ld	hl,_scr_map
1855  0683  19          	add	hl,de
1856  0684  7E          	ld	a,(hl)
1857  0685  4F          	ld	c,a
1858  0686  D6 44       	sub	a,0x44
1859  0688  38 05       	jr	C,l_player_check_stairs_00111
1860  068A  3E 47       	ld	a,0x47
1861  068C  91          	sub	a, c
1862  068D  30 04       	jr	NC,l_player_check_stairs_00112
1863  068F              l_player_check_stairs_00111:
1864  068F  0E 00       	ld	c,0x00
1865  0691  18 02       	jr	l_player_check_stairs_00113
1866  0693              l_player_check_stairs_00112:
1867  0693  0E 01       	ld	c,0x01
1868  0695              l_player_check_stairs_00113:
1869  0695  3A 07 00    	ld	a,(_col + 0x0007)
1870  0698  80          	add	a, b
1871  0699  57          	ld	d, a
1872  069A  3A 07 00    	ld	a,(_lin + 0x0007)
1873  069D  C6 0F       	add	a,0x0f
1874  069F  47          	ld	b, a
1875  06A0  C5          	push	bc
1876  06A1  58          	ld	e,b
1877  06A2  D5          	push	de
1878  06A3  CD 00 00    	call	_spr_calc_index
1879  06A6  F1          	pop	af
1880  06A7  C1          	pop	bc
1881  06A8  7D          	ld	a,l
1882  06A9  32 00 00    	ld	(_sprite_curr_index),a
1883  06AC  5F          	ld	e,a
1884  06AD  16 00       	ld	d,0x00
1885  06AF  21 00 00    	ld	hl,_scr_map
1886  06B2  19          	add	hl,de
1887  06B3  7E          	ld	a,(hl)
1888  06B4  47          	ld	b,a
1889  06B5  D6 44       	sub	a,0x44
1890  06B7  38 05       	jr	C,l_player_check_stairs_00114
1891  06B9  3E 47       	ld	a,0x47
1892  06BB  90          	sub	a, b
1893  06BC  30 04       	jr	NC,l_player_check_stairs_00115
1894  06BE              l_player_check_stairs_00114:
1895  06BE  06 00       	ld	b,0x00
1896  06C0  18 02       	jr	l_player_check_stairs_00116
1897  06C2              l_player_check_stairs_00115:
1898  06C2  06 01       	ld	b,0x01
1899  06C4              l_player_check_stairs_00116:
1900  06C4  79          	ld	a, c
1901  06C5  B7          	or	a,a
1902  06C6  20 03       	jr	NZ,l_player_check_stairs_00105
1903  06C8  B0          	or	a,b
1904  06C9  28 13       	jr	Z,l_player_check_stairs_00106
1905  06CB              l_player_check_stairs_00105:
1906  06CB  21 00 00    	ld	hl,_player_onstair
1907  06CE  7E          	ld	a, (hl)
1908  06CF  B7          	or	a, a
1909  06D0  20 1D       	jr	NZ,l_player_check_stairs_00109
1910  06D2  36 01       	ld	(hl),0x01
1911  06D4  21 72 00    	ld	hl,0x0072
1912  06D7  E5          	push	hl
1913  06D8  CD 37 07    	call	_player_tile
1914  06DB  F1          	pop	af
1915  06DC  18 11       	jr	l_player_check_stairs_00109
1916  06DE              l_player_check_stairs_00106:
1917  06DE  21 00 00    	ld	hl,_player_onstair
1918  06E1  7E          	ld	a, (hl)
1919  06E2  B7          	or	a, a
1920  06E3  28 0A       	jr	Z,l_player_check_stairs_00109
1921  06E5  36 00       	ld	(hl),0x00
1922  06E7  21 60 08    	ld	hl,0x0860
1923  06EA  E5          	push	hl
1924  06EB  CD 37 07    	call	_player_tile
1925  06EE  F1          	pop	af
1926  06EF              l_player_check_stairs_00109:
1927  06EF  33          	inc	sp
1928  06F0  DD E1       	pop	ix
1929  06F2  C9          	ret
1930  06F3              	SECTION code_compiler
1931  06F3              ;	---------------------------------
1932  06F3              ; Function player_anim_tile
1933  06F3              ; ---------------------------------
1934  06F3              _player_anim_tile:
1935  06F3  21 07 00    	ld	hl,+(_tile + 0x0007)
1936  06F6  4E          	ld	c, (hl)
1937  06F7  21 07 00    	ld	hl,+(_colint + 0x0007)
1938  06FA  46          	ld	b, (hl)
1939  06FB  79          	ld	a, c
1940  06FC  80          	add	a, b
1941  06FD  32 00 00    	ld	(_s_tile1),a
1942  0700  3A 00 00    	ld	a,(_player_onstair)
1943  0703  B7          	or	a, a
1944  0704  28 17       	jr	Z,l_player_anim_tile_00109
1945  0706  21 00 00    	ld	hl,_player_anim_stair
1946  0709  34          	inc	(hl)
1947  070A  3E 01       	ld	a,0x01
1948  070C  96          	sub	a, (hl)
1949  070D  30 02       	jr	NC,l_player_anim_tile_00102
1950  070F  36 00       	ld	(hl),0x00
1951  0711              l_player_anim_tile_00102:
1952  0711  79          	ld	a, c
1953  0712  21 00 00    	ld	hl,_player_anim_stair
1954  0715  86          	add	a, (hl)
1955  0716  C6 04       	add	a,0x04
1956  0718  32 00 00    	ld	(_s_tile1),a
1957  071B  18 19       	jr	l_player_anim_tile_00111
1958  071D              l_player_anim_tile_00109:
1959  071D  3A 00 00    	ld	a,(_player_onfire)
1960  0720  B7          	or	a, a
1961  0721  28 13       	jr	Z,l_player_anim_tile_00111
1962  0723  21 00 00    	ld	hl,_s_state
1963  0726  CB 56       	bit	2, (hl)
1964  0728  28 07       	jr	Z,l_player_anim_tile_00104
1965  072A  21 00 00    	ld	hl,_s_tile1
1966  072D  36 60       	ld	(hl),0x60
1967  072F  18 05       	jr	l_player_anim_tile_00111
1968  0731              l_player_anim_tile_00104:
1969  0731  21 00 00    	ld	hl,_s_tile1
1970  0734  36 68       	ld	(hl),0x68
1971  0736              l_player_anim_tile_00111:
1972  0736  C9          	ret
1973  0737              	SECTION code_compiler
1974  0737              ;	---------------------------------
1975  0737              ; Function player_tile
1976  0737              ; ---------------------------------
1977  0737              _player_tile:
1978  0737  CD 00 00    	call	___sdcc_enter_ix
1979  073A  21 05 00    	ld	hl,0x0005
1980  073D  39          	add	hl, sp
1981  073E  EB          	ex	de,hl
1982  073F  21 04 00    	ld	hl,0x0004
1983  0742  39          	add	hl, sp
1984  0743  4D          	ld	c, l
1985  0744  44          	ld	b, h
1986  0745  D5          	push	de
1987  0746  21 00 00    	ld	hl,_sprite
1988  0749  E5          	push	hl
1989  074A  C5          	push	bc
1990  074B  CD 00 00    	call	_spr_tile_dir
1991  074E  F1          	pop	af
1992  074F  F1          	pop	af
1993  0750  F1          	pop	af
1994  0751  7D          	ld	a,l
1995  0752  32 07 00    	ld	((_tile + 0x0007)),a
1996  0755  DD E1       	pop	ix
1997  0757  C9          	ret
1998  0758              	SECTION code_compiler
1999  0758              ;	---------------------------------
2000  0758              ; Function player_check_map
2001  0758              ; ---------------------------------
2002  0758              _player_check_map:
2003  0758  21 07 00    	ld	hl,+(_col + 0x0007)
2004  075B  46          	ld	b, (hl)
2005  075C  21 07 00    	ld	hl,+(_lin + 0x0007)
2006  075F  4E          	ld	c, (hl)
2007  0760  C5          	push	bc
2008  0761  CD 00 00    	call	_spr_calc_index
2009  0764  F1          	pop	af
2010  0765  7D          	ld	a,l
2011  0766  32 00 00    	ld	(_sprite_curr_index),a
2012  0769  21 07 00    	ld	hl,+(_col + 0x0007)
2013  076C  4E          	ld	c, (hl)
2014  076D  3A 07 00    	ld	a,(_lin + 0x0007)
2015  0770  E6 0F       	and	a,0x0f
2016  0772  CB 41       	bit	0, c
2017  0774  20 17       	jr	NZ,l_player_check_map_00108
2018  0776  B7          	or	a, a
2019  0777  20 05       	jr	NZ,l_player_check_map_00102
2020  0779  CD B8 07    	call	_player_pick_item
2021  077C  18 39       	jr	l_player_check_map_00110
2022  077E              l_player_check_map_00102:
2023  077E  CD B8 07    	call	_player_pick_item
2024  0781  21 00 00    	ld	hl,_sprite_curr_index
2025  0784  7E          	ld	a, (hl)
2026  0785  C6 10       	add	a,0x10
2027  0787  77          	ld	(hl), a
2028  0788  CD B8 07    	call	_player_pick_item
2029  078B  18 2A       	jr	l_player_check_map_00110
2030  078D              l_player_check_map_00108:
2031  078D  B7          	or	a, a
2032  078E  20 0C       	jr	NZ,l_player_check_map_00105
2033  0790  CD B8 07    	call	_player_pick_item
2034  0793  21 00 00    	ld	hl,_sprite_curr_index
2035  0796  34          	inc	(hl)
2036  0797  CD B8 07    	call	_player_pick_item
2037  079A  18 1B       	jr	l_player_check_map_00110
2038  079C              l_player_check_map_00105:
2039  079C  CD B8 07    	call	_player_pick_item
2040  079F  21 00 00    	ld	hl,_sprite_curr_index
2041  07A2  34          	inc	(hl)
2042  07A3  CD B8 07    	call	_player_pick_item
2043  07A6  21 00 00    	ld	hl,_sprite_curr_index
2044  07A9  7E          	ld	a, (hl)
2045  07AA  C6 0F       	add	a,0x0f
2046  07AC  77          	ld	(hl), a
2047  07AD  CD B8 07    	call	_player_pick_item
2048  07B0  21 00 00    	ld	hl,_sprite_curr_index
2049  07B3  34          	inc	(hl)
2050  07B4  CD B8 07    	call	_player_pick_item
2051  07B7              l_player_check_map_00110:
2052  07B7  C9          	ret
2053  07B8              	SECTION code_compiler
2054  07B8              ;	---------------------------------
2055  07B8              ; Function player_pick_item
2056  07B8              ; ---------------------------------
2057  07B8              _player_pick_item:
2058  07B8  CD 00 00    	call	___sdcc_enter_ix
2059  07BB  3B          	dec	sp
2060  07BC  01 00 00    	ld	bc,_scr_map+0
2061  07BF  2A 00 00    	ld	hl,(_sprite_curr_index)
2062  07C2  26 00       	ld	h,0x00
2063  07C4  09          	add	hl,bc
2064  07C5  7E          	ld	a,(hl)
2065  07C6  DD 77 FF    	ld	(ix-1),a
2066  07C9  D6 24       	sub	a,0x24
2067  07CB  DA C0 09    	jp	C, l_player_pick_item_00131
2068  07CE  3E 2F       	ld	a,0x2f
2069  07D0  DD 96 FF    	sub	a,(ix-1)
2070  07D3  DA C0 09    	jp	C, l_player_pick_item_00131
2071  07D6  CD 00 00    	call	_ay_reset
2072  07D9  79          	ld	a, c
2073  07DA  21 00 00    	ld	hl,_sprite_curr_index
2074  07DD  86          	add	a, (hl)
2075  07DE  4F          	ld	c, a
2076  07DF  78          	ld	a, b
2077  07E0  CE 00       	adc	a,0x00
2078  07E2  47          	ld	b, a
2079  07E3  5E          	ld	e, (hl)
2080  07E4  16 00       	ld	d,0x00
2081  07E6  C5          	push	bc
2082  07E7  EB          	ex	de,hl
2083  07E8  CD 00 00    	call	_game_match_back
2084  07EB  C1          	pop	bc
2085  07EC  7D          	ld	a,l
2086  07ED  02          	ld	(bc), a
2087  07EE  2A 00 00    	ld	hl,(_sprite_curr_index)
2088  07F1  26 00       	ld	h,0x00
2089  07F3  CD 00 00    	call	_game_obj_set
2090  07F6  3A 00 00    	ld	a,(_sprite_curr_index)
2091  07F9  07          	rlca
2092  07FA  07          	rlca
2093  07FB  07          	rlca
2094  07FC  07          	rlca
2095  07FD  E6 0F       	and	a,0x0f
2096  07FF  07          	rlca
2097  0800  07          	rlca
2098  0801  07          	rlca
2099  0802  07          	rlca
2100  0803  E6 F0       	and	a,0xf0
2101  0805  32 00 00    	ld	(_s_lin1),a
2102  0808  3A 00 00    	ld	a,(_sprite_curr_index)
2103  080B  E6 0F       	and	a,0x0f
2104  080D  87          	add	a, a
2105  080E  32 00 00    	ld	(_s_col1),a
2106  0811  21 00 00    	ld	hl,0x0000
2107  0814  E5          	push	hl
2108  0815  21 84 03    	ld	hl,0x0384
2109  0818  E5          	push	hl
2110  0819  F5          	push	af
2111  081A  33          	inc	sp
2112  081B  3A 00 00    	ld	a,(_s_lin1)
2113  081E  F5          	push	af
2114  081F  33          	inc	sp
2115  0820  CD 00 00    	call	_spr_add_anim
2116  0823  F1          	pop	af
2117  0824  F1          	pop	af
2118  0825  F1          	pop	af
2119  0826  DD 7E FF    	ld	a,(ix-1)
2120  0829  D6 24       	sub	a,0x24
2121  082B  DA C0 09    	jp	C, l_player_pick_item_00131
2122  082E  3E 2F       	ld	a,0x2f
2123  0830  DD 96 FF    	sub	a,(ix-1)
2124  0833  DA C0 09    	jp	C, l_player_pick_item_00131
2125  0836  DD 7E FF    	ld	a,(ix-1)
2126  0839  C6 DC       	add	a,0xdc
2127  083B  4F          	ld	c, a
2128  083C  06 00       	ld	b,0x00
2129  083E  21 45 08    	ld	hl,l_player_pick_item_00177
2130  0841  09          	add	hl, bc
2131  0842  09          	add	hl, bc
2132  0843  09          	add	hl, bc
2133  0844  E9          	jp	(hl)
2134  0845              l_player_pick_item_00177:
2135  0845  C3 69 08    	jp	l_player_pick_item_00101
2136  0848  C3 7F 08    	jp	l_player_pick_item_00102
2137  084B  C3 95 08    	jp	l_player_pick_item_00103
2138  084E  C3 AB 08    	jp	l_player_pick_item_00104
2139  0851  C3 C1 08    	jp	l_player_pick_item_00105
2140  0854  C3 FE 08    	jp	l_player_pick_item_00109
2141  0857  C3 20 09    	jp	l_player_pick_item_00112
2142  085A  C3 42 09    	jp	l_player_pick_item_00115
2143  085D  C3 62 09    	jp	l_player_pick_item_00118
2144  0860  C3 82 09    	jp	l_player_pick_item_00121
2145  0863  C3 A2 09    	jp	l_player_pick_item_00124
2146  0866  C3 EA 08    	jp	l_player_pick_item_00108
2147  0869              l_player_pick_item_00101:
2148  0869  21 00 00    	ld	hl,_ay_fx_06_efecto
2149  086C  E5          	push	hl
2150  086D  21 01 06    	ld	hl,0x0601
2151  0870  E5          	push	hl
2152  0871  CD 00 00    	call	_ay_song_play
2153  0874  21 00 00    	ld	hl,_player_keys
2154  0877  36 01       	ld	(hl),0x01
2155  0879  CD 00 00    	call	_game_update_stats
2156  087C  C3 C0 09    	jp	l_player_pick_item_00131
2157  087F              l_player_pick_item_00102:
2158  087F  21 00 00    	ld	hl,_ay_fx_06_efecto
2159  0882  E5          	push	hl
2160  0883  21 01 06    	ld	hl,0x0601
2161  0886  E5          	push	hl
2162  0887  CD 00 00    	call	_ay_song_play
2163  088A  21 01 00    	ld	hl, +(_player_keys + 0x0001)
2164  088D  36 01       	ld	(hl),0x01
2165  088F  CD 00 00    	call	_game_update_stats
2166  0892  C3 C0 09    	jp	l_player_pick_item_00131
2167  0895              l_player_pick_item_00103:
2168  0895  21 00 00    	ld	hl,_ay_fx_06_efecto
2169  0898  E5          	push	hl
2170  0899  21 01 06    	ld	hl,0x0601
2171  089C  E5          	push	hl
2172  089D  CD 00 00    	call	_ay_song_play
2173  08A0  21 02 00    	ld	hl, +(_player_keys + 0x0002)
2174  08A3  36 01       	ld	(hl),0x01
2175  08A5  CD 00 00    	call	_game_update_stats
2176  08A8  C3 C0 09    	jp	l_player_pick_item_00131
2177  08AB              l_player_pick_item_00104:
2178  08AB  21 00 00    	ld	hl,_ay_fx_06_efecto
2179  08AE  E5          	push	hl
2180  08AF  21 01 06    	ld	hl,0x0601
2181  08B2  E5          	push	hl
2182  08B3  CD 00 00    	call	_ay_song_play
2183  08B6  21 03 00    	ld	hl, +(_player_keys + 0x0003)
2184  08B9  36 01       	ld	(hl),0x01
2185  08BB  CD 00 00    	call	_game_update_stats
2186  08BE  C3 C0 09    	jp	l_player_pick_item_00131
2187  08C1              l_player_pick_item_00105:
2188  08C1  21 00 00    	ld	hl,_ay_fx_04_coin
2189  08C4  E5          	push	hl
2190  08C5  21 01 04    	ld	hl,0x0401
2191  08C8  E5          	push	hl
2192  08C9  CD 00 00    	call	_ay_song_play
2193  08CC  21 01 00    	ld	hl,0x0001
2194  08CF  CD 8A 0C    	call	_player_score_add
2195  08D2  21 00 00    	ld	hl,_player_coins
2196  08D5  7E          	ld	a,(hl)
2197  08D6  3C          	inc	a
2198  08D7  77          	ld	(hl),a
2199  08D8  D6 64       	sub	a,0x64
2200  08DA  20 08       	jr	NZ,l_player_pick_item_00107
2201  08DC  CD 91 05    	call	_player_1up
2202  08DF  21 00 00    	ld	hl,_player_coins
2203  08E2  36 00       	ld	(hl),0x00
2204  08E4              l_player_pick_item_00107:
2205  08E4  CD 00 00    	call	_game_update_stats
2206  08E7  C3 C0 09    	jp	l_player_pick_item_00131
2207  08EA              l_player_pick_item_00108:
2208  08EA  21 00 00    	ld	hl,_ay_fx_04_magia1
2209  08ED  E5          	push	hl
2210  08EE  21 01 04    	ld	hl,0x0401
2211  08F1  E5          	push	hl
2212  08F2  CD 00 00    	call	_ay_song_play
2213  08F5  21 0A 00    	ld	hl,0x000a
2214  08F8  CD 8A 0C    	call	_player_score_add
2215  08FB  C3 C0 09    	jp	l_player_pick_item_00131
2216  08FE              l_player_pick_item_00109:
2217  08FE  21 00 00    	ld	hl,_ay_fx_06_efecto
2218  0901  E5          	push	hl
2219  0902  21 01 06    	ld	hl,0x0601
2220  0905  E5          	push	hl
2221  0906  CD 00 00    	call	_ay_song_play
2222  0909  21 00 00    	ld	hl,_player_str
2223  090C  34          	inc	(hl)
2224  090D  21 00 00    	ld	hl,_player_max_vita
2225  0910  7E          	ld	a, (hl)
2226  0911  D6 C8       	sub	a,0xc8
2227  0913  D2 C0 09    	jp	NC, l_player_pick_item_00131
2228  0916  7E          	ld	a, (hl)
2229  0917  C6 0A       	add	a,0x0a
2230  0919  77          	ld	(hl), a
2231  091A  CD 00 00    	call	_game_update_stats
2232  091D  C3 C0 09    	jp	l_player_pick_item_00131
2233  0920              l_player_pick_item_00112:
2234  0920  21 00 00    	ld	hl,_ay_fx_06_efecto
2235  0923  E5          	push	hl
2236  0924  21 01 06    	ld	hl,0x0601
2237  0927  E5          	push	hl
2238  0928  CD 00 00    	call	_ay_song_play
2239  092B  21 00 00    	ld	hl,_player_str
2240  092E  34          	inc	(hl)
2241  092F  21 00 00    	ld	hl,_player_max_vita
2242  0932  7E          	ld	a, (hl)
2243  0933  D6 C8       	sub	a,0xc8
2244  0935  D2 C0 09    	jp	NC, l_player_pick_item_00131
2245  0938  7E          	ld	a, (hl)
2246  0939  C6 0A       	add	a,0x0a
2247  093B  77          	ld	(hl), a
2248  093C  CD 00 00    	call	_game_update_stats
2249  093F  C3 C0 09    	jp	l_player_pick_item_00131
2250  0942              l_player_pick_item_00115:
2251  0942  21 00 00    	ld	hl,_ay_fx_06_efecto
2252  0945  E5          	push	hl
2253  0946  21 01 06    	ld	hl,0x0601
2254  0949  E5          	push	hl
2255  094A  CD 00 00    	call	_ay_song_play
2256  094D  21 00 00    	ld	hl,_player_str
2257  0950  34          	inc	(hl)
2258  0951  21 00 00    	ld	hl,_player_max_vita
2259  0954  7E          	ld	a, (hl)
2260  0955  D6 C8       	sub	a,0xc8
2261  0957  30 67       	jr	NC,l_player_pick_item_00131
2262  0959  7E          	ld	a, (hl)
2263  095A  C6 0A       	add	a,0x0a
2264  095C  77          	ld	(hl), a
2265  095D  CD 00 00    	call	_game_update_stats
2266  0960  18 5E       	jr	l_player_pick_item_00131
2267  0962              l_player_pick_item_00118:
2268  0962  21 00 00    	ld	hl,_ay_fx_06_efecto
2269  0965  E5          	push	hl
2270  0966  21 01 06    	ld	hl,0x0601
2271  0969  E5          	push	hl
2272  096A  CD 00 00    	call	_ay_song_play
2273  096D  21 00 00    	ld	hl,_player_int
2274  0970  34          	inc	(hl)
2275  0971  21 00 00    	ld	hl,_player_max_mana
2276  0974  7E          	ld	a, (hl)
2277  0975  D6 C8       	sub	a,0xc8
2278  0977  30 47       	jr	NC,l_player_pick_item_00131
2279  0979  7E          	ld	a, (hl)
2280  097A  C6 0A       	add	a,0x0a
2281  097C  77          	ld	(hl), a
2282  097D  CD 00 00    	call	_game_update_stats
2283  0980  18 3E       	jr	l_player_pick_item_00131
2284  0982              l_player_pick_item_00121:
2285  0982  21 00 00    	ld	hl,_ay_fx_06_efecto
2286  0985  E5          	push	hl
2287  0986  21 01 06    	ld	hl,0x0601
2288  0989  E5          	push	hl
2289  098A  CD 00 00    	call	_ay_song_play
2290  098D  21 00 00    	ld	hl,_player_int
2291  0990  34          	inc	(hl)
2292  0991  21 00 00    	ld	hl,_player_max_mana
2293  0994  7E          	ld	a, (hl)
2294  0995  D6 C8       	sub	a,0xc8
2295  0997  30 27       	jr	NC,l_player_pick_item_00131
2296  0999  7E          	ld	a, (hl)
2297  099A  C6 0A       	add	a,0x0a
2298  099C  77          	ld	(hl), a
2299  099D  CD 00 00    	call	_game_update_stats
2300  09A0  18 1E       	jr	l_player_pick_item_00131
2301  09A2              l_player_pick_item_00124:
2302  09A2  21 00 00    	ld	hl,_ay_fx_06_efecto
2303  09A5  E5          	push	hl
2304  09A6  21 01 06    	ld	hl,0x0601
2305  09A9  E5          	push	hl
2306  09AA  CD 00 00    	call	_ay_song_play
2307  09AD  21 00 00    	ld	hl,_player_int
2308  09B0  34          	inc	(hl)
2309  09B1  21 00 00    	ld	hl,_player_max_mana
2310  09B4  7E          	ld	a, (hl)
2311  09B5  D6 C8       	sub	a,0xc8
2312  09B7  30 07       	jr	NC,l_player_pick_item_00131
2313  09B9  7E          	ld	a, (hl)
2314  09BA  C6 0A       	add	a,0x0a
2315  09BC  77          	ld	(hl), a
2316  09BD  CD 00 00    	call	_game_update_stats
2317  09C0              l_player_pick_item_00131:
2318  09C0  33          	inc	sp
2319  09C1  DD E1       	pop	ix
2320  09C3  C9          	ret
2321  09C4              	SECTION code_compiler
2322  09C4              ;	---------------------------------
2323  09C4              ; Function player_hit_platform
2324  09C4              ; ---------------------------------
2325  09C4              _player_hit_platform:
2326  09C4  CD 00 00    	call	___sdcc_enter_ix
2327  09C7  3B          	dec	sp
2328  09C8  3A 00 00    	ld	a,(_player_hit_lin)
2329  09CB  B7          	or	a, a
2330  09CC  C2 55 0C    	jp	NZ, l_player_hit_platform_00145
2331  09CF  21 07 00    	ld	hl,+(_lin + 0x0007)
2332  09D2  4E          	ld	c, (hl)
2333  09D3  3E 10       	ld	a,0x10
2334  09D5  91          	sub	a, c
2335  09D6  D2 55 0C    	jp	NC, l_player_hit_platform_00145
2336  09D9  01 00 00    	ld	bc,_scr_map
2337  09DC  2A 00 00    	ld	hl,(_index1)
2338  09DF  09          	add	hl,bc
2339  09E0  7E          	ld	a,(hl)
2340  09E1  D6 45       	sub	a,0x45
2341  09E3  DA 55 0C    	jp	C, l_player_hit_platform_00145
2342  09E6  2A 00 00    	ld	hl,(_curr_time)
2343  09E9  22 0E 00    	ld	(_spr_timer + 0x000e),hl
2344  09EC  3A 07 00    	ld	a,(_lin + 0x0007)
2345  09EF  06 00       	ld	b,0x00
2346  09F1  C6 F8       	add	a,0xf8
2347  09F3  4F          	ld	c, a
2348  09F4  78          	ld	a, b
2349  09F5  CE FF       	adc	a,0xff
2350  09F7  5F          	ld	e, a
2351  09F8  06 04       	ld	b,0x04
2352  09FA              l_player_hit_platform_00252:
2353  09FA  CB 2B       	sra	e
2354  09FC  CB 19       	rr	c
2355  09FE  10 FA       	djnz	l_player_hit_platform_00252
2356  0A00  79          	ld	a, c
2357  0A01  07          	rlca
2358  0A02  07          	rlca
2359  0A03  07          	rlca
2360  0A04  07          	rlca
2361  0A05  E6 F0       	and	a,0xf0
2362  0A07  C6 08       	add	a,0x08
2363  0A09  32 00 00    	ld	(_player_hit_lin),a
2364  0A0C  21 07 00    	ld	hl,+(_col + 0x0007)
2365  0A0F  4E          	ld	c, (hl)
2366  0A10  CB 41       	bit	0, c
2367  0A12  20 06       	jr	NZ,l_player_hit_platform_00111
2368  0A14  21 00 00    	ld	hl,_player_hit_col
2369  0A17  71          	ld	(hl), c
2370  0A18  18 2D       	jr	l_player_hit_platform_00112
2371  0A1A              l_player_hit_platform_00111:
2372  0A1A  21 07 00    	ld	hl,+(_state + 0x0007)
2373  0A1D  5E          	ld	e, (hl)
2374  0A1E  41          	ld	b, c
2375  0A1F  04          	inc	b
2376  0A20  0D          	dec	c
2377  0A21  CB 5B       	bit	3, e
2378  0A23  28 12       	jr	Z,l_player_hit_platform_00108
2379  0A25  3A 00 00    	ld	a,(_g_player_hit_right)
2380  0A28  B7          	or	a, a
2381  0A29  28 06       	jr	Z,l_player_hit_platform_00102
2382  0A2B  21 00 00    	ld	hl,_player_hit_col
2383  0A2E  70          	ld	(hl), b
2384  0A2F  18 16       	jr	l_player_hit_platform_00112
2385  0A31              l_player_hit_platform_00102:
2386  0A31  21 00 00    	ld	hl,_player_hit_col
2387  0A34  71          	ld	(hl), c
2388  0A35  18 10       	jr	l_player_hit_platform_00112
2389  0A37              l_player_hit_platform_00108:
2390  0A37  3A 00 00    	ld	a,(_g_player_hit_left)
2391  0A3A  B7          	or	a, a
2392  0A3B  28 06       	jr	Z,l_player_hit_platform_00105
2393  0A3D  21 00 00    	ld	hl,_player_hit_col
2394  0A40  71          	ld	(hl), c
2395  0A41  18 04       	jr	l_player_hit_platform_00112
2396  0A43              l_player_hit_platform_00105:
2397  0A43  21 00 00    	ld	hl,_player_hit_col
2398  0A46  70          	ld	(hl), b
2399  0A47              l_player_hit_platform_00112:
2400  0A47  2A 00 00    	ld	hl,(_index1)
2401  0A4A  01 00 00    	ld	bc,_scr_map
2402  0A4D  09          	add	hl,bc
2403  0A4E  7E          	ld	a,(hl)
2404  0A4F  FE 4D       	cp	a,0x4d
2405  0A51  20 4A       	jr	NZ,l_player_hit_platform_00114
2406  0A53  E5          	push	hl
2407  0A54  2A 00 00    	ld	hl,(_index1)
2408  0A57  CD 00 00    	call	_game_match_back
2409  0A5A  C1          	pop	bc
2410  0A5B  7D          	ld	a,l
2411  0A5C  02          	ld	(bc), a
2412  0A5D  2A 00 00    	ld	hl,(_index1)
2413  0A60  CD 00 00    	call	_game_obj_set
2414  0A63  21 00 00    	ld	hl,_ay_fx_04_explosion
2415  0A66  E5          	push	hl
2416  0A67  21 01 04    	ld	hl,0x0401
2417  0A6A  E5          	push	hl
2418  0A6B  CD 00 00    	call	_ay_song_play
2419  0A6E  21 00 00    	ld	hl,_index1
2420  0A71  7E          	ld	a, (hl)
2421  0A72  E6 0F       	and	a,0x0f
2422  0A74  87          	add	a, a
2423  0A75  57          	ld	d, a
2424  0A76  4E          	ld	c, (hl)
2425  0A77  23          	inc	hl
2426  0A78  5E          	ld	e, (hl)
2427  0A79  06 04       	ld	b,0x04
2428  0A7B  79          	ld	a,c
2429  0A7C              l_player_hit_platform_00258:
2430  0A7C  CB 3B       	srl	e
2431  0A7E  1F          	rra
2432  0A7F  10 FB       	djnz	l_player_hit_platform_00258
2433  0A81  07          	rlca
2434  0A82  07          	rlca
2435  0A83  07          	rlca
2436  0A84  07          	rlca
2437  0A85  E6 F0       	and	a,0xf0
2438  0A87  47          	ld	b, a
2439  0A88  21 00 00    	ld	hl,0x0000
2440  0A8B  E5          	push	hl
2441  0A8C  21 87 03    	ld	hl,0x0387
2442  0A8F  E5          	push	hl
2443  0A90  58          	ld	e,b
2444  0A91  D5          	push	de
2445  0A92  CD 00 00    	call	_spr_add_anim
2446  0A95  F1          	pop	af
2447  0A96  F1          	pop	af
2448  0A97  F1          	pop	af
2449  0A98  2E 01       	ld	l,0x01
2450  0A9A  C3 57 0C    	jp	l_player_hit_platform_00148
2451  0A9D              l_player_hit_platform_00114:
2452  0A9D  FE 5A       	cp	a,0x5a
2453  0A9F  28 05       	jr	Z,l_player_hit_platform_00141
2454  0AA1  D6 5D       	sub	a,0x5d
2455  0AA3  C2 41 0C    	jp	NZ,l_player_hit_platform_00142
2456  0AA6              l_player_hit_platform_00141:
2457  0AA6  3A 00 00    	ld	a,(_game_boss)
2458  0AA9  B7          	or	a, a
2459  0AAA  28 0B       	jr	Z,l_player_hit_platform_00174
2460  0AAC  3A 00 00    	ld	a,(_game_mush_count)
2461  0AAF  B7          	or	a, a
2462  0AB0  28 05       	jr	Z,l_player_hit_platform_00174
2463  0AB2  2E 00       	ld	l,0x00
2464  0AB4  C3 57 0C    	jp	l_player_hit_platform_00148
2465  0AB7              l_player_hit_platform_00174:
2466  0AB7  DD 36 FF 00 	ld	(ix-1),0x00
2467  0ABB              l_player_hit_platform_00138:
2468  0ABB  DD 7E FF    	ld	a,(ix-1)
2469  0ABE  D6 07       	sub	a,0x07
2470  0AC0  D2 41 0C    	jp	NC, l_player_hit_platform_00142
2471  0AC3  3E 00       	ld	a, +((_mush_index) & 0xFF)
2472  0AC5  DD 86 FF    	add	a,(ix-1)
2473  0AC8  6F          	ld	l, a
2474  0AC9  3E 00       	ld	a, +((_mush_index) / 256)
2475  0ACB  CE 00       	adc	a,0x00
2476  0ACD  67          	ld	h, a
2477  0ACE  4E          	ld	c, (hl)
2478  0ACF  06 00       	ld	b,0x00
2479  0AD1  2A 00 00    	ld	hl,(_index1)
2480  0AD4  AF          	xor	a,a
2481  0AD5  ED 42       	sbc	hl,bc
2482  0AD7  C2 3B 0C    	jp	NZ,l_player_hit_platform_00137
2483  0ADA  3A 07 00    	ld	a,(_lin + 0x0007)
2484  0ADD  07          	rlca
2485  0ADE  07          	rlca
2486  0ADF  07          	rlca
2487  0AE0  07          	rlca
2488  0AE1  E6 0F       	and	a,0x0f
2489  0AE3  07          	rlca
2490  0AE4  07          	rlca
2491  0AE5  07          	rlca
2492  0AE6  07          	rlca
2493  0AE7  E6 F0       	and	a,0xf0
2494  0AE9  C6 E0       	add	a,0xe0
2495  0AEB  32 00 00    	ld	(_s_lin1),a
2496  0AEE  3A 07 00    	ld	a,(_col + 0x0007)
2497  0AF1  CB 3F       	srl	a
2498  0AF3  87          	add	a, a
2499  0AF4  32 00 00    	ld	(_s_col1),a
2500  0AF7  0E 00       	ld	c,0x00
2501  0AF9              l_player_hit_platform_00120:
2502  0AF9  79          	ld	a, c
2503  0AFA  D6 07       	sub	a,0x07
2504  0AFC  30 18       	jr	NC,l_player_hit_platform_00122
2505  0AFE  06 00       	ld	b,0x00
2506  0B00  21 00 00    	ld	hl,_mush_index
2507  0B03  09          	add	hl, bc
2508  0B04  46          	ld	b, (hl)
2509  0B05  1E 00       	ld	e,0x00
2510  0B07  21 00 00    	ld	hl,_index1
2511  0B0A  7E          	ld	a, (hl)
2512  0B0B  90          	sub	a, b
2513  0B0C  20 05       	jr	NZ,l_player_hit_platform_00264
2514  0B0E  23          	inc	hl
2515  0B0F  7E          	ld	a, (hl)
2516  0B10  93          	sub	a, e
2517  0B11  28 03       	jr	Z,l_player_hit_platform_00122
2518  0B13              l_player_hit_platform_00264:
2519  0B13  0C          	inc	c
2520  0B14  18 E3       	jr	l_player_hit_platform_00120
2521  0B16              l_player_hit_platform_00122:
2522  0B16  06 00       	ld	b,0x00
2523  0B18  21 00 00    	ld	hl,_mush_class
2524  0B1B  09          	add	hl, bc
2525  0B1C  7E          	ld	a, (hl)
2526  0B1D  FE 79       	cp	a,0x79
2527  0B1F  28 18       	jr	Z,l_player_hit_platform_00123
2528  0B21  FE 7A       	cp	a,0x7a
2529  0B23  28 2F       	jr	Z,l_player_hit_platform_00124
2530  0B25  FE 7B       	cp	a,0x7b
2531  0B27  28 5F       	jr	Z,l_player_hit_platform_00126
2532  0B29  FE 7C       	cp	a,0x7c
2533  0B2B  28 41       	jr	Z,l_player_hit_platform_00125
2534  0B2D  FE 7D       	cp	a,0x7d
2535  0B2F  CA BC 0B    	jp	Z,l_player_hit_platform_00128
2536  0B32  D6 7E       	sub	a,0x7e
2537  0B34  28 6C       	jr	Z,l_player_hit_platform_00127
2538  0B36  C3 D4 0B    	jp	l_player_hit_platform_00129
2539  0B39              l_player_hit_platform_00123:
2540  0B39  2E 02       	ld	l,0x02
2541  0B3B  CD 00 00    	call	_zx_border_fastcall
2542  0B3E  3A 00 00    	ld	a,(_s_col1)
2543  0B41  21 06 FF    	ld	hl,0xff06
2544  0B44  E5          	push	hl
2545  0B45  F5          	push	af
2546  0B46  33          	inc	sp
2547  0B47  3A 00 00    	ld	a,(_s_lin1)
2548  0B4A  F5          	push	af
2549  0B4B  33          	inc	sp
2550  0B4C  CD 00 00    	call	_enemy_init
2551  0B4F  F1          	pop	af
2552  0B50  F1          	pop	af
2553  0B51  C3 D4 0B    	jp	l_player_hit_platform_00129
2554  0B54              l_player_hit_platform_00124:
2555  0B54  2E 02       	ld	l,0x02
2556  0B56  CD 00 00    	call	_zx_border_fastcall
2557  0B59  3A 00 00    	ld	a,(_s_col1)
2558  0B5C  21 06 01    	ld	hl,0x0106
2559  0B5F  E5          	push	hl
2560  0B60  F5          	push	af
2561  0B61  33          	inc	sp
2562  0B62  3A 00 00    	ld	a,(_s_lin1)
2563  0B65  F5          	push	af
2564  0B66  33          	inc	sp
2565  0B67  CD 00 00    	call	_enemy_init
2566  0B6A  F1          	pop	af
2567  0B6B  F1          	pop	af
2568  0B6C  18 66       	jr	l_player_hit_platform_00129
2569  0B6E              l_player_hit_platform_00125:
2570  0B6E  2E 01       	ld	l,0x01
2571  0B70  CD 00 00    	call	_zx_border_fastcall
2572  0B73  3A 00 00    	ld	a,(_s_col1)
2573  0B76  21 07 01    	ld	hl,0x0107
2574  0B79  E5          	push	hl
2575  0B7A  F5          	push	af
2576  0B7B  33          	inc	sp
2577  0B7C  3A 00 00    	ld	a,(_s_lin1)
2578  0B7F  F5          	push	af
2579  0B80  33          	inc	sp
2580  0B81  CD 00 00    	call	_enemy_init
2581  0B84  F1          	pop	af
2582  0B85  F1          	pop	af
2583  0B86  18 4C       	jr	l_player_hit_platform_00129
2584  0B88              l_player_hit_platform_00126:
2585  0B88  2E 01       	ld	l,0x01
2586  0B8A  CD 00 00    	call	_zx_border_fastcall
2587  0B8D  3A 00 00    	ld	a,(_s_col1)
2588  0B90  21 07 FF    	ld	hl,0xff07
2589  0B93  E5          	push	hl
2590  0B94  F5          	push	af
2591  0B95  33          	inc	sp
2592  0B96  3A 00 00    	ld	a,(_s_lin1)
2593  0B99  F5          	push	af
2594  0B9A  33          	inc	sp
2595  0B9B  CD 00 00    	call	_enemy_init
2596  0B9E  F1          	pop	af
2597  0B9F  F1          	pop	af
2598  0BA0  18 32       	jr	l_player_hit_platform_00129
2599  0BA2              l_player_hit_platform_00127:
2600  0BA2  2E 04       	ld	l,0x04
2601  0BA4  CD 00 00    	call	_zx_border_fastcall
2602  0BA7  3A 00 00    	ld	a,(_s_col1)
2603  0BAA  21 08 01    	ld	hl,0x0108
2604  0BAD  E5          	push	hl
2605  0BAE  F5          	push	af
2606  0BAF  33          	inc	sp
2607  0BB0  3A 00 00    	ld	a,(_s_lin1)
2608  0BB3  F5          	push	af
2609  0BB4  33          	inc	sp
2610  0BB5  CD 00 00    	call	_enemy_init
2611  0BB8  F1          	pop	af
2612  0BB9  F1          	pop	af
2613  0BBA  18 18       	jr	l_player_hit_platform_00129
2614  0BBC              l_player_hit_platform_00128:
2615  0BBC  2E 04       	ld	l,0x04
2616  0BBE  CD 00 00    	call	_zx_border_fastcall
2617  0BC1  3A 00 00    	ld	a,(_s_col1)
2618  0BC4  21 08 FF    	ld	hl,0xff08
2619  0BC7  E5          	push	hl
2620  0BC8  F5          	push	af
2621  0BC9  33          	inc	sp
2622  0BCA  3A 00 00    	ld	a,(_s_lin1)
2623  0BCD  F5          	push	af
2624  0BCE  33          	inc	sp
2625  0BCF  CD 00 00    	call	_enemy_init
2626  0BD2  F1          	pop	af
2627  0BD3  F1          	pop	af
2628  0BD4              l_player_hit_platform_00129:
2629  0BD4  21 00 00    	ld	hl,_game_mush_count
2630  0BD7  34          	inc	(hl)
2631  0BD8  3A 00 00    	ld	a,(_game_boss)
2632  0BDB  B7          	or	a, a
2633  0BDC  20 5D       	jr	NZ,l_player_hit_platform_00137
2634  0BDE  3A 00 00    	ld	a,(_index1)
2635  0BE1  C6 F0       	add	a,0xf0
2636  0BE3  32 00 00    	ld	(_index0),a
2637  0BE6  3A 01 00    	ld	a,(_index1 + 1)
2638  0BE9  CE FF       	adc	a,0xff
2639  0BEB  21 01 00    	ld	hl,_index0 + 1
2640  0BEE  77          	ld	(hl), a
2641  0BEF  3E 00       	ld	a, +((_scr_map) & 0xFF)
2642  0BF1  2B          	dec	hl
2643  0BF2  86          	add	a, (hl)
2644  0BF3  4F          	ld	c, a
2645  0BF4  3E 00       	ld	a, +((_scr_map) / 256)
2646  0BF6  23          	inc	hl
2647  0BF7  8E          	adc	a, (hl)
2648  0BF8  47          	ld	b, a
2649  0BF9  C5          	push	bc
2650  0BFA  2B          	dec	hl
2651  0BFB  7E          	ld	a, (hl)
2652  0BFC  23          	inc	hl
2653  0BFD  66          	ld	h, (hl)
2654  0BFE  6F          	ld	l, a
2655  0BFF  CD 00 00    	call	_game_match_back
2656  0C02  C1          	pop	bc
2657  0C03  7D          	ld	a,l
2658  0C04  02          	ld	(bc), a
2659  0C05  01 00 00    	ld	bc,_scr_map
2660  0C08  2A 00 00    	ld	hl,(_index1)
2661  0C0B  09          	add	hl,bc
2662  0C0C  7E          	ld	a,(hl)
2663  0C0D  FE 5A       	cp	a,0x5a
2664  0C0F  4D          	ld	c,l
2665  0C10  44          	ld	b,h
2666  0C11  28 04       	jr	Z,l_player_hit_platform_00130
2667  0C13  D6 5D       	sub	a,0x5d
2668  0C15  20 05       	jr	NZ,l_player_hit_platform_00131
2669  0C17              l_player_hit_platform_00130:
2670  0C17  3E 4F       	ld	a,0x4f
2671  0C19  02          	ld	(bc), a
2672  0C1A  18 03       	jr	l_player_hit_platform_00132
2673  0C1C              l_player_hit_platform_00131:
2674  0C1C  3E 54       	ld	a,0x54
2675  0C1E  02          	ld	(bc), a
2676  0C1F              l_player_hit_platform_00132:
2677  0C1F  2A 00 00    	ld	hl,(_index1)
2678  0C22  01 F0 FF    	ld	bc,0xfff0
2679  0C25  09          	add	hl,bc
2680  0C26  CD 00 00    	call	_game_obj_set
2681  0C29  3A 00 00    	ld	a,(_s_lin1)
2682  0C2C  C6 10       	add	a,0x10
2683  0C2E  4F          	ld	c, a
2684  0C2F  3A 00 00    	ld	a, (_s_col1)
2685  0C32  47          	ld	b,a
2686  0C33  C5          	push	bc
2687  0C34  3E 4F       	ld	a,0x4f
2688  0C36  F5          	push	af
2689  0C37  33          	inc	sp
2690  0C38  CD 00 00    	call	_NIRVANAP_drawT_callee
2691  0C3B              l_player_hit_platform_00137:
2692  0C3B  DD 34 FF    	inc	(ix-1)
2693  0C3E  C3 BB 0A    	jp	l_player_hit_platform_00138
2694  0C41              l_player_hit_platform_00142:
2695  0C41  21 00 00    	ld	hl,_ay_fx_04_golpe
2696  0C44  E5          	push	hl
2697  0C45  21 01 04    	ld	hl,0x0401
2698  0C48  E5          	push	hl
2699  0C49  CD 00 00    	call	_ay_song_play
2700  0C4C  2E 01       	ld	l,0x01
2701  0C4E  CD 00 00    	call	_spr_brick_anim
2702  0C51  2E 01       	ld	l,0x01
2703  0C53  18 02       	jr	l_player_hit_platform_00148
2704  0C55              l_player_hit_platform_00145:
2705  0C55  2E 00       	ld	l,0x00
2706  0C57              l_player_hit_platform_00148:
2707  0C57  33          	inc	sp
2708  0C58  DD E1       	pop	ix
2709  0C5A  C9          	ret
2710  0C5B              	SECTION code_compiler
2711  0C5B              ;	---------------------------------
2712  0C5B              ; Function player_hit_platform_clear
2713  0C5B              ; ---------------------------------
2714  0C5B              _player_hit_platform_clear:
2715  0C5B  3E 04       	ld	a,0x04
2716  0C5D  F5          	push	af
2717  0C5E  33          	inc	sp
2718  0C5F  21 0E 00    	ld	hl, +(_spr_timer + 0x000e)
2719  0C62  E5          	push	hl
2720  0C63  CD 00 00    	call	_game_check_time
2721  0C66  F1          	pop	af
2722  0C67  33          	inc	sp
2723  0C68  7D          	ld	a, l
2724  0C69  B7          	or	a, a
2725  0C6A  C8          	ret	Z
2726  0C6B  2A FF FF    	ld	hl,(_player_hit_col - 1)
2727  0C6E  3A 00 00    	ld	a,(_player_hit_lin)
2728  0C71  6F          	ld	l,a
2729  0C72  E5          	push	hl
2730  0C73  CD 00 00    	call	_spr_calc_index
2731  0C76  F1          	pop	af
2732  0C77  22 00 00    	ld	(_index1),hl
2733  0C7A  2E 00       	ld	l,0x00
2734  0C7C  CD 00 00    	call	_spr_brick_anim
2735  0C7F  21 00 00    	ld	hl,_player_hit_lin
2736  0C82  36 00       	ld	(hl),0x00
2737  0C84  21 00 00    	ld	hl,_player_hit_col
2738  0C87  36 00       	ld	(hl),0x00
2739  0C89  C9          	ret
2740  0C8A              	SECTION code_compiler
2741  0C8A              ;	---------------------------------
2742  0C8A              ; Function player_score_add
2743  0C8A              ; ---------------------------------
2744  0C8A              _player_score_add:
2745  0C8A  ED 4B 00 00 	ld	bc,(_player_score)
2746  0C8E  09          	add	hl,bc
2747  0C8F  22 00 00    	ld	(_player_score),hl
2748  0C92  21 00 00    	ld	hl,_player_lvl
2749  0C95  7E          	ld	a, (hl)
2750  0C96  D6 14       	sub	a,0x14
2751  0C98  30 4D       	jr	NC,l_player_score_add_00104
2752  0C9A  01 00 00    	ld	bc,_player_lvl_table+0
2753  0C9D  6E          	ld	l,(hl)
2754  0C9E  26 00       	ld	h,0x00
2755  0CA0  29          	add	hl, hl
2756  0CA1  09          	add	hl, bc
2757  0CA2  4E          	ld	c, (hl)
2758  0CA3  23          	inc	hl
2759  0CA4  46          	ld	b, (hl)
2760  0CA5  21 00 00    	ld	hl,_player_score
2761  0CA8  7E          	ld	a, (hl)
2762  0CA9  91          	sub	a, c
2763  0CAA  23          	inc	hl
2764  0CAB  7E          	ld	a, (hl)
2765  0CAC  98          	sbc	a, b
2766  0CAD  38 38       	jr	C,l_player_score_add_00104
2767  0CAF  21 00 00    	ld	hl,_player_lvl
2768  0CB2  34          	inc	(hl)
2769  0CB3  CD 00 00    	call	_game_update_stats
2770  0CB6  CD 00 00    	call	_spr_flatten
2771  0CB9  21 00 00    	ld	hl,_ay_fx_06_efecto
2772  0CBC  E5          	push	hl
2773  0CBD  21 01 06    	ld	hl,0x0601
2774  0CC0  E5          	push	hl
2775  0CC1  CD 00 00    	call	_ay_song_play
2776  0CC4  21 16 00    	ld	hl,___str_2
2777  0CC7  E5          	push	hl
2778  0CC8  21 0C 0C    	ld	hl,0x0c0c
2779  0CCB  E5          	push	hl
2780  0CCC  CD 00 00    	call	_zx_print_str
2781  0CCF  AF          	xor	a, a
2782  0CD0  F5          	push	af
2783  0CD1  33          	inc	sp
2784  0CD2  21 3C 00    	ld	hl,0x003c
2785  0CD5  E5          	push	hl
2786  0CD6  21 0C 15    	ld	hl,0x150c
2787  0CD9  E5          	push	hl
2788  0CDA  3E 0C       	ld	a,0x0c
2789  0CDC  F5          	push	af
2790  0CDD  33          	inc	sp
2791  0CDE  CD 00 00    	call	_game_colour_message
2792  0CE1  F1          	pop	af
2793  0CE2  F1          	pop	af
2794  0CE3  F1          	pop	af
2795  0CE4  CD 00 00    	call	_spr_unflatten
2796  0CE7              l_player_score_add_00104:
2797  0CE7  3A 00 00    	ld	a,(_game_score_top)
2798  0CEA  21 00 00    	ld	hl,_player_score
2799  0CED  96          	sub	a, (hl)
2800  0CEE  3A 01 00    	ld	a,(_game_score_top + 1)
2801  0CF1  23          	inc	hl
2802  0CF2  9E          	sbc	a, (hl)
2803  0CF3  30 06       	jr	NC,l_player_score_add_00106
2804  0CF5  2A 00 00    	ld	hl,(_player_score)
2805  0CF8  22 00 00    	ld	(_game_score_top),hl
2806  0CFB              l_player_score_add_00106:
2807  0CFB  CD 00 00    	call	_game_print_score
2808  0CFE  C9          	ret
2809  0CFF              	SECTION rodata_compiler
2810  0016              ___str_2:
2811  0016  4C 45 56 45 4C 20 55 50 21 
                        	DEFM "LEVEL UP!"
2812  001F  00          	DEFB 0x00
2813  0020              	SECTION code_compiler
2814  0CFF              ;	---------------------------------
2815  0CFF              ; Function player_check_floor
2816  0CFF              ; ---------------------------------
2817  0CFF              _player_check_floor:
2818  0CFF  CD 00 00    	call	___sdcc_enter_ix
2819  0D02  F5          	push	af
2820  0D03  F5          	push	af
2821  0D04  F5          	push	af
2822  0D05  21 07 00    	ld	hl,+(_col + 0x0007)
2823  0D08  56          	ld	d, (hl)
2824  0D09  3A 07 00    	ld	a,(_lin + 0x0007)
2825  0D0C  C6 10       	add	a,0x10
2826  0D0E  5F          	ld	e, a
2827  0D0F  D5          	push	de
2828  0D10  CD 00 00    	call	_spr_calc_index
2829  0D13  F1          	pop	af
2830  0D14  D1          	pop	de
2831  0D15  E5          	push	hl
2832  0D16  01 00 00    	ld	bc,_scr_map+0
2833  0D19  79          	ld	a, c
2834  0D1A  DD 86 FA    	add	a,(ix-6)
2835  0D1D  DD 77 FE    	ld	(ix-2),a
2836  0D20  78          	ld	a, b
2837  0D21  DD 8E FB    	adc	a,(ix-5)
2838  0D24  DD 6E FE    	ld	l,(ix-2)
2839  0D27  DD 77 FF    	ld	(ix-1),a
2840  0D2A  67          	ld	h,a
2841  0D2B  7E          	ld	a, (hl)
2842  0D2C  DD 77 FD    	ld	(ix-3),a
2843  0D2F  E1          	pop	hl
2844  0D30  E5          	push	hl
2845  0D31  23          	inc	hl
2846  0D32  09          	add	hl,bc
2847  0D33  3A 00 00    	ld	a,(_s_lin0)
2848  0D36  D6 90       	sub	a,0x90
2849  0D38  4D          	ld	c,l
2850  0D39  44          	ld	b,h
2851  0D3A  20 26       	jr	NZ,l_player_check_floor_00108
2852  0D3C  3A 00 00    	ld	a,(_map_heigth)
2853  0D3F  C5          	push	bc
2854  0D40  F5          	push	af
2855  0D41  33          	inc	sp
2856  0D42  3A 00 00    	ld	a,(_scr_curr)
2857  0D45  F5          	push	af
2858  0D46  33          	inc	sp
2859  0D47  CD 00 00    	call	__divuchar_callee
2860  0D4A  C1          	pop	bc
2861  0D4B  7D          	ld	a,l
2862  0D4C  3C          	inc	a
2863  0D4D  32 00 00    	ld	(_tmp1),a
2864  0D50  21 00 00    	ld	hl,_map_heigth
2865  0D53  96          	sub	a, (hl)
2866  0D54  30 06       	jr	NC,l_player_check_floor_00102
2867  0D56  DD 36 FD 00 	ld	(ix-3),0x00
2868  0D5A  18 16       	jr	l_player_check_floor_00109
2869  0D5C              l_player_check_floor_00102:
2870  0D5C  DD 36 FD 48 	ld	(ix-3),0x48
2871  0D60  18 10       	jr	l_player_check_floor_00109
2872  0D62              l_player_check_floor_00108:
2873  0D62  3A 07 00    	ld	a,(_col + 0x0007)
2874  0D65  0F          	rrca
2875  0D66  38 06       	jr	C,l_player_check_floor_00105
2876  0D68  DD 36 FC 00 	ld	(ix-4),0x00
2877  0D6C  18 04       	jr	l_player_check_floor_00109
2878  0D6E              l_player_check_floor_00105:
2879  0D6E  0A          	ld	a, (bc)
2880  0D6F  DD 77 FC    	ld	(ix-4),a
2881  0D72              l_player_check_floor_00109:
2882  0D72  DD 7E FD    	ld	a,(ix-3)
2883  0D75  D6 3A       	sub	a,0x3a
2884  0D77  38 07       	jr	C,l_player_check_floor_00132
2885  0D79  DD 7E FD    	ld	a,(ix-3)
2886  0D7C  D6 60       	sub	a,0x60
2887  0D7E  38 32       	jr	C,l_player_check_floor_00128
2888  0D80              l_player_check_floor_00132:
2889  0D80  DD 7E FC    	ld	a,(ix-4)
2890  0D83  D6 3A       	sub	a,0x3a
2891  0D85  38 07       	jr	C,l_player_check_floor_00127
2892  0D87  DD 7E FC    	ld	a,(ix-4)
2893  0D8A  D6 60       	sub	a,0x60
2894  0D8C  38 24       	jr	C,l_player_check_floor_00128
2895  0D8E              l_player_check_floor_00127:
2896  0D8E  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
2897  0D91  36 02       	ld	(hl),0x02
2898  0D93  21 00 00    	ld	hl,_s_state
2899  0D96  CB CE       	set	1, (hl)
2900  0D98  2E 00       	ld	l,0x00
2901  0D9A  CD 63 06    	call	_player_check_stairs
2902  0D9D  3A 00 00    	ld	a,(_player_onstair)
2903  0DA0  B7          	or	a, a
2904  0DA1  C2 40 0E    	jp	NZ, l_player_check_floor_00133
2905  0DA4  3A 00 00    	ld	a,(_s_lin0)
2906  0DA7  D6 90       	sub	a,0x90
2907  0DA9  C2 40 0E    	jp	NZ,l_player_check_floor_00133
2908  0DAC  CD 00 00    	call	_spr_page_down
2909  0DAF  C3 40 0E    	jp	l_player_check_floor_00133
2910  0DB2              l_player_check_floor_00128:
2911  0DB2  C5          	push	bc
2912  0DB3  3E 10       	ld	a,0x10
2913  0DB5  F5          	push	af
2914  0DB6  33          	inc	sp
2915  0DB7  21 00 00    	ld	hl,_player_brick_time
2916  0DBA  E5          	push	hl
2917  0DBB  CD 00 00    	call	_game_check_time
2918  0DBE  F1          	pop	af
2919  0DBF  33          	inc	sp
2920  0DC0  C1          	pop	bc
2921  0DC1  7D          	ld	a,l
2922  0DC2  B7          	or	a, a
2923  0DC3  CA 40 0E    	jp	Z, l_player_check_floor_00133
2924  0DC6  2A 00 00    	ld	hl,(_curr_time)
2925  0DC9  22 00 00    	ld	(_player_brick_time),hl
2926  0DCC  DD 7E FD    	ld	a,(ix-3)
2927  0DCF  D6 40       	sub	a,0x40
2928  0DD1  20 14       	jr	NZ,l_player_check_floor_00114
2929  0DD3  E1          	pop	hl
2930  0DD4  E5          	push	hl
2931  0DD5  C5          	push	bc
2932  0DD6  CD 00 00    	call	_game_match_back
2933  0DD9  C1          	pop	bc
2934  0DDA  5D          	ld	e,l
2935  0DDB  DD 6E FE    	ld	l,(ix-2)
2936  0DDE  DD 66 FF    	ld	h,(ix-1)
2937  0DE1  73          	ld	(hl), e
2938  0DE2  C5          	push	bc
2939  0DE3  CD 45 0E    	call	_player_gasta_brick
2940  0DE6  C1          	pop	bc
2941  0DE7              l_player_check_floor_00114:
2942  0DE7  DD 7E FD    	ld	a,(ix-3)
2943  0DEA  D6 3F       	sub	a,0x3f
2944  0DEC  20 0D       	jr	NZ,l_player_check_floor_00116
2945  0DEE  DD 6E FE    	ld	l,(ix-2)
2946  0DF1  DD 66 FF    	ld	h,(ix-1)
2947  0DF4  36 40       	ld	(hl),0x40
2948  0DF6  C5          	push	bc
2949  0DF7  CD 45 0E    	call	_player_gasta_brick
2950  0DFA  C1          	pop	bc
2951  0DFB              l_player_check_floor_00116:
2952  0DFB  DD 7E FD    	ld	a,(ix-3)
2953  0DFE  D6 3E       	sub	a,0x3e
2954  0E00  20 0D       	jr	NZ,l_player_check_floor_00118
2955  0E02  DD 6E FE    	ld	l,(ix-2)
2956  0E05  DD 66 FF    	ld	h,(ix-1)
2957  0E08  36 3F       	ld	(hl),0x3f
2958  0E0A  C5          	push	bc
2959  0E0B  CD 45 0E    	call	_player_gasta_brick
2960  0E0E  C1          	pop	bc
2961  0E0F              l_player_check_floor_00118:
2962  0E0F  DD 7E FC    	ld	a,(ix-4)
2963  0E12  D6 40       	sub	a,0x40
2964  0E14  20 0E       	jr	NZ,l_player_check_floor_00120
2965  0E16  E1          	pop	hl
2966  0E17  E5          	push	hl
2967  0E18  C5          	push	bc
2968  0E19  CD 00 00    	call	_game_match_back
2969  0E1C  C1          	pop	bc
2970  0E1D  7D          	ld	a,l
2971  0E1E  02          	ld	(bc), a
2972  0E1F  C5          	push	bc
2973  0E20  CD 45 0E    	call	_player_gasta_brick
2974  0E23  C1          	pop	bc
2975  0E24              l_player_check_floor_00120:
2976  0E24  DD 7E FC    	ld	a,(ix-4)
2977  0E27  D6 3F       	sub	a,0x3f
2978  0E29  20 08       	jr	NZ,l_player_check_floor_00122
2979  0E2B  3E 40       	ld	a,0x40
2980  0E2D  02          	ld	(bc), a
2981  0E2E  C5          	push	bc
2982  0E2F  CD 45 0E    	call	_player_gasta_brick
2983  0E32  C1          	pop	bc
2984  0E33              l_player_check_floor_00122:
2985  0E33  DD 7E FC    	ld	a,(ix-4)
2986  0E36  D6 3E       	sub	a,0x3e
2987  0E38  20 06       	jr	NZ,l_player_check_floor_00133
2988  0E3A  3E 3F       	ld	a,0x3f
2989  0E3C  02          	ld	(bc), a
2990  0E3D  CD 45 0E    	call	_player_gasta_brick
2991  0E40              l_player_check_floor_00133:
2992  0E40  DD F9       	ld	sp, ix
2993  0E42  DD E1       	pop	ix
2994  0E44  C9          	ret
2995  0E45              	SECTION code_compiler
2996  0E45              ;	---------------------------------
2997  0E45              ; Function player_gasta_brick
2998  0E45              ; ---------------------------------
2999  0E45              _player_gasta_brick:
3000  0E45  3A 00 00    	ld	a,(_s_lin0)
3001  0E48  32 00 00    	ld	(_s_lin1),a
3002  0E4B  3A 00 00    	ld	a,(_s_col0)
3003  0E4E  32 00 00    	ld	(_s_col1),a
3004  0E51  3A 07 00    	ld	a,(_lin + 0x0007)
3005  0E54  C6 10       	add	a,0x10
3006  0E56  32 00 00    	ld	(_s_lin0),a
3007  0E59  3A 07 00    	ld	a,(_col + 0x0007)
3008  0E5C  32 00 00    	ld	(_s_col0),a
3009  0E5F  CD 00 00    	call	_spr_back_repaint
3010  0E62  3A 00 00    	ld	a,(_s_lin1)
3011  0E65  32 00 00    	ld	(_s_lin0),a
3012  0E68  3A 00 00    	ld	a,(_s_col1)
3013  0E6B  32 00 00    	ld	(_s_col0),a
3014  0E6E  C9          	ret
3015  0E6F              	SECTION code_compiler
3016  0E6F              ;	---------------------------------
3017  0E6F              ; Function player_move_jump
3018  0E6F              ; ---------------------------------
3019  0E6F              _player_move_jump:
3020  0E6F  21 00 00    	ld	hl,_game_gravity
3021  0E72  4E          	ld	c, (hl)
3022  0E73  21 00 00    	ld	hl,_player_vel_y
3023  0E76  7E          	ld	a, (hl)
3024  0E77  81          	add	a, c
3025  0E78  77          	ld	(hl), a
3026  0E79  21 00 00    	ld	hl,_sprite_on_air
3027  0E7C  36 01       	ld	(hl),0x01
3028  0E7E  3A 00 00    	ld	a,(_player_vel_inc)
3029  0E81  B7          	or	a, a
3030  0E82  28 4A       	jr	Z,l_player_move_jump_00109
3031  0E84  3A 00 00    	ld	a,(_dirs)
3032  0E87  CB 07       	rlc	a
3033  0E89  E6 01       	and	a,0x01
3034  0E8B  4F          	ld	c, a
3035  0E8C  3A 00 00    	ld	a,(_game_2buttons)
3036  0E8F  B7          	or	a, a
3037  0E90  28 06       	jr	Z,l_player_move_jump_00102
3038  0E92  79          	ld	a, c
3039  0E93  EE 01       	xor	a,0x01
3040  0E95  4F          	ld	c, a
3041  0E96  18 15       	jr	l_player_move_jump_00103
3042  0E98              l_player_move_jump_00102:
3043  0E98  CB 41       	bit	0, c
3044  0E9A  28 07       	jr	Z,l_player_move_jump_00154
3045  0E9C  21 00 00    	ld	hl,_dirs
3046  0E9F  CB 46       	bit	0, (hl)
3047  0EA1  20 04       	jr	NZ,l_player_move_jump_00155
3048  0EA3              l_player_move_jump_00154:
3049  0EA3  0E 00       	ld	c,0x00
3050  0EA5  18 02       	jr	l_player_move_jump_00156
3051  0EA7              l_player_move_jump_00155:
3052  0EA7  0E 01       	ld	c,0x01
3053  0EA9              l_player_move_jump_00156:
3054  0EA9  79          	ld	a, c
3055  0EAA  EE 01       	xor	a,0x01
3056  0EAC  4F          	ld	c, a
3057  0EAD              l_player_move_jump_00103:
3058  0EAD  79          	ld	a, c
3059  0EAE  B7          	or	a, a
3060  0EAF  28 1D       	jr	Z,l_player_move_jump_00109
3061  0EB1  3A 00 00    	ld	a,(_player_vel_y1)
3062  0EB4  21 00 00    	ld	hl,_player_vel_y
3063  0EB7  96          	sub	a, (hl)
3064  0EB8  E2 BD 0E    	jp	PO, l_player_move_jump_00259
3065  0EBB  EE 80       	xor	a,0x80
3066  0EBD              l_player_move_jump_00259:
3067  0EBD  F2 CE 0E    	jp	P, l_player_move_jump_00109
3068  0EC0  21 00 00    	ld	hl,_player_vel_y
3069  0EC3  CB 7E       	bit	7,(hl)
3070  0EC5  28 07       	jr	Z,l_player_move_jump_00109
3071  0EC7  36 00       	ld	(hl),0x00
3072  0EC9  21 00 00    	ld	hl,_player_vel_inc
3073  0ECC  36 00       	ld	(hl),0x00
3074  0ECE              l_player_move_jump_00109:
3075  0ECE  3E 78       	ld	a,0x78
3076  0ED0  21 00 00    	ld	hl,_player_vel_y
3077  0ED3  96          	sub	a, (hl)
3078  0ED4  E2 D9 0E    	jp	PO, l_player_move_jump_00260
3079  0ED7  EE 80       	xor	a,0x80
3080  0ED9              l_player_move_jump_00260:
3081  0ED9  F2 E1 0E    	jp	P, l_player_move_jump_00111
3082  0EDC  21 00 00    	ld	hl,_player_vel_y
3083  0EDF  36 78       	ld	(hl),0x78
3084  0EE1              l_player_move_jump_00111:
3085  0EE1  21 00 00    	ld	hl,_player_vel_y
3086  0EE4  7E          	ld	a, (hl)
3087  0EE5  EE 80       	xor	a,0x80
3088  0EE7  D6 08       	sub	a,0x08
3089  0EE9  30 02       	jr	NC,l_player_move_jump_00113
3090  0EEB  36 88       	ld	(hl),0x88
3091  0EED              l_player_move_jump_00113:
3092  0EED  3A 00 00    	ld	a,(_player_vel_y)
3093  0EF0  4F          	ld	c,a
3094  0EF1  17          	rla
3095  0EF2  9F          	sbc	a, a
3096  0EF3  47          	ld	b, a
3097  0EF4  CB 41       	bit	0,c
3098  0EF6  21 00 00    	ld	hl,_s_lin1
3099  0EF9  71          	ld	(hl),c
3100  0EFA  28 04       	jr	Z,l_player_move_jump_00115
3101  0EFC  21 00 00    	ld	hl,_s_lin1
3102  0EFF  35          	dec	(hl)
3103  0F00              l_player_move_jump_00115:
3104  0F00  3A 07 00    	ld	a,(_lin + 0x0007)
3105  0F03  21 00 00    	ld	hl,_s_lin1
3106  0F06  86          	add	a, (hl)
3107  0F07  77          	ld	(hl), a
3108  0F08  CB 78       	bit	7, b
3109  0F0A  28 5C       	jr	Z,l_player_move_jump_00141
3110  0F0C  21 00 00    	ld	hl,_s_state
3111  0F0F  CD 00 00    	call	_spr_set_up
3112  0F12  3E 90       	ld	a,0x90
3113  0F14  21 00 00    	ld	hl,_s_lin1
3114  0F17  96          	sub	a, (hl)
3115  0F18  30 11       	jr	NC,l_player_move_jump_00120
3116  0F1A  CD 00 00    	call	_spr_page_up
3117  0F1D  7D          	ld	a, l
3118  0F1E  B7          	or	a, a
3119  0F1F  28 05       	jr	Z,l_player_move_jump_00117
3120  0F21  2E 00       	ld	l,0x00
3121  0F23  C3 1F 10    	jp	l_player_move_jump_00152
3122  0F26              l_player_move_jump_00117:
3123  0F26  21 00 00    	ld	hl,_s_lin1
3124  0F29  36 00       	ld	(hl),0x00
3125  0F2B              l_player_move_jump_00120:
3126  0F2B  21 07 00    	ld	hl,+(_col + 0x0007)
3127  0F2E  46          	ld	b, (hl)
3128  0F2F  C5          	push	bc
3129  0F30  33          	inc	sp
3130  0F31  3A 00 00    	ld	a,(_s_lin1)
3131  0F34  F5          	push	af
3132  0F35  33          	inc	sp
3133  0F36  CD 00 00    	call	_game_check_map
3134  0F39  F1          	pop	af
3135  0F3A  7C          	ld	a,h
3136  0F3B  B5          	or	a,l
3137  0F3C  28 21       	jr	Z,l_player_move_jump_00124
3138  0F3E  CD C4 09    	call	_player_hit_platform
3139  0F41  7D          	ld	a, l
3140  0F42  B7          	or	a, a
3141  0F43  28 12       	jr	Z,l_player_move_jump_00122
3142  0F45  3A 07 00    	ld	a,(_lin + 0x0007)
3143  0F48  07          	rlca
3144  0F49  07          	rlca
3145  0F4A  07          	rlca
3146  0F4B  07          	rlca
3147  0F4C  E6 0F       	and	a,0x0f
3148  0F4E  07          	rlca
3149  0F4F  07          	rlca
3150  0F50  07          	rlca
3151  0F51  07          	rlca
3152  0F52  E6 F0       	and	a,0xf0
3153  0F54  32 07 00    	ld	((_lin + 0x0007)),a
3154  0F57              l_player_move_jump_00122:
3155  0F57  21 00 00    	ld	hl,_player_vel_y
3156  0F5A  36 00       	ld	(hl),0x00
3157  0F5C  C3 E7 0F    	jp	l_player_move_jump_00142
3158  0F5F              l_player_move_jump_00124:
3159  0F5F  3A 00 00    	ld	a,(_s_lin1)
3160  0F62  32 07 00    	ld	((_lin + 0x0007)),a
3161  0F65  C3 E7 0F    	jp	l_player_move_jump_00142
3162  0F68              l_player_move_jump_00141:
3163  0F68  21 00 00    	ld	hl,_s_state
3164  0F6B  CD 00 00    	call	_spr_set_down
3165  0F6E  3E 90       	ld	a,0x90
3166  0F70  21 00 00    	ld	hl,_s_lin1
3167  0F73  96          	sub	a, (hl)
3168  0F74  30 11       	jr	NC,l_player_move_jump_00130
3169  0F76  CD 00 00    	call	_spr_page_down
3170  0F79  7D          	ld	a, l
3171  0F7A  B7          	or	a, a
3172  0F7B  28 05       	jr	Z,l_player_move_jump_00127
3173  0F7D  2E 00       	ld	l,0x00
3174  0F7F  C3 1F 10    	jp	l_player_move_jump_00152
3175  0F82              l_player_move_jump_00127:
3176  0F82  21 00 00    	ld	hl,_s_lin1
3177  0F85  36 90       	ld	(hl),0x90
3178  0F87              l_player_move_jump_00130:
3179  0F87  21 07 00    	ld	hl,+(_col + 0x0007)
3180  0F8A  56          	ld	d, (hl)
3181  0F8B  3A 00 00    	ld	a,(_s_lin1)
3182  0F8E  C6 10       	add	a,0x10
3183  0F90  5F          	ld	e, a
3184  0F91  D5          	push	de
3185  0F92  CD 00 00    	call	_game_check_map
3186  0F95  F1          	pop	af
3187  0F96  7C          	ld	a,h
3188  0F97  B5          	or	a,l
3189  0F98  28 47       	jr	Z,l_player_move_jump_00138
3190  0F9A  2E 00       	ld	l,0x00
3191  0F9C  CD 63 06    	call	_player_check_stairs
3192  0F9F  3A 00 00    	ld	a,(_player_onstair)
3193  0FA2  B7          	or	a, a
3194  0FA3  20 05       	jr	NZ,l_player_move_jump_00132
3195  0FA5  2E 01       	ld	l,0x01
3196  0FA7  CD 63 06    	call	_player_check_stairs
3197  0FAA              l_player_move_jump_00132:
3198  0FAA  3A 00 00    	ld	a,(_player_onstair)
3199  0FAD  B7          	or	a, a
3200  0FAE  20 12       	jr	NZ,l_player_move_jump_00134
3201  0FB0  3A 00 00    	ld	a,(_s_lin1)
3202  0FB3  07          	rlca
3203  0FB4  07          	rlca
3204  0FB5  07          	rlca
3205  0FB6  07          	rlca
3206  0FB7  E6 0F       	and	a,0x0f
3207  0FB9  07          	rlca
3208  0FBA  07          	rlca
3209  0FBB  07          	rlca
3210  0FBC  07          	rlca
3211  0FBD  E6 F0       	and	a,0xf0
3212  0FBF  32 07 00    	ld	((_lin + 0x0007)),a
3213  0FC2              l_player_move_jump_00134:
3214  0FC2  21 00 00    	ld	hl,_player_vel_y
3215  0FC5  36 00       	ld	(hl),0x00
3216  0FC7  21 00 00    	ld	hl,_s_state
3217  0FCA  7E          	ld	a,(hl)
3218  0FCB  E6 FC       	and	a,+(0xfd&0xfe)
3219  0FCD  77          	ld	(hl),a
3220  0FCE  3A 07 00    	ld	a,(_lin + 0x0007)
3221  0FD1  D6 90       	sub	a,0x90
3222  0FD3  38 03       	jr	C,l_player_move_jump_00136
3223  0FD5  CD 00 00    	call	_spr_page_down
3224  0FD8              l_player_move_jump_00136:
3225  0FD8  21 07 00    	ld	hl, +(_colint + 0x0007)
3226  0FDB  36 00       	ld	(hl),0x00
3227  0FDD  2E 01       	ld	l,0x01
3228  0FDF  18 3E       	jr	l_player_move_jump_00152
3229  0FE1              l_player_move_jump_00138:
3230  0FE1  3A 00 00    	ld	a,(_s_lin1)
3231  0FE4  32 07 00    	ld	((_lin + 0x0007)),a
3232  0FE7              l_player_move_jump_00142:
3233  0FE7  21 00 00    	ld	hl,_s_state
3234  0FEA  CB 5E       	bit	3, (hl)
3235  0FEC  20 21       	jr	NZ,l_player_move_jump_00148
3236  0FEE  21 00 00    	ld	hl,_s_state
3237  0FF1  CB 56       	bit	2, (hl)
3238  0FF3  20 1A       	jr	NZ,l_player_move_jump_00148
3239  0FF5  21 00 00    	ld	hl,_dirs
3240  0FF8  CB 56       	bit	2, (hl)
3241  0FFA  28 06       	jr	Z,l_player_move_jump_00144
3242  0FFC  21 00 00    	ld	hl,_s_state
3243  0FFF  CD 00 00    	call	_spr_set_left
3244  1002              l_player_move_jump_00144:
3245  1002  21 00 00    	ld	hl,_dirs
3246  1005  CB 5E       	bit	3, (hl)
3247  1007  28 06       	jr	Z,l_player_move_jump_00148
3248  1009  21 00 00    	ld	hl,_s_state
3249  100C  CD 00 00    	call	_spr_set_right
3250  100F              l_player_move_jump_00148:
3251  100F  CD 00 00    	call	_spr_move_horizontal
3252  1012  7D          	ld	a, l
3253  1013  B7          	or	a, a
3254  1014  28 07       	jr	Z,l_player_move_jump_00151
3255  1016  21 00 00    	ld	hl,_s_state
3256  1019  7E          	ld	a,(hl)
3257  101A  E6 F3       	and	a,+(0xf7&0xfb)
3258  101C  77          	ld	(hl),a
3259  101D              l_player_move_jump_00151:
3260  101D  2E 00       	ld	l,0x00
3261  101F              l_player_move_jump_00152:
3262  101F  C9          	ret
3263  1020              	SECTION code_compiler
3264  1020              ;	---------------------------------
3265  1020              ; Function player_open_door
3266  1020              ; ---------------------------------
3267  1020              _player_open_door:
3268  1020  CD 00 00    	call	___sdcc_enter_ix
3269  1023  0E 00       	ld	c,0x00
3270  1025  DD 7E 06    	ld	a,(ix+6)
3271  1028  D6 48       	sub	a,0x48
3272  102A  28 17       	jr	Z,l_player_open_door_00101
3273  102C  DD 7E 06    	ld	a,(ix+6)
3274  102F  D6 49       	sub	a,0x49
3275  1031  28 1F       	jr	Z,l_player_open_door_00104
3276  1033  DD 7E 06    	ld	a,(ix+6)
3277  1036  D6 4A       	sub	a,0x4a
3278  1038  28 27       	jr	Z,l_player_open_door_00107
3279  103A  DD 7E 06    	ld	a,(ix+6)
3280  103D  D6 4B       	sub	a,0x4b
3281  103F  28 2F       	jr	Z,l_player_open_door_00110
3282  1041  18 3A       	jr	l_player_open_door_00113
3283  1043              l_player_open_door_00101:
3284  1043  3A 00 00    	ld	a,(_player_keys)
3285  1046  B7          	or	a, a
3286  1047  28 34       	jr	Z,l_player_open_door_00113
3287  1049  2E 07       	ld	l,0x07
3288  104B  CD 00 00    	call	_zx_border_fastcall
3289  104E  0E 01       	ld	c,0x01
3290  1050  18 2B       	jr	l_player_open_door_00113
3291  1052              l_player_open_door_00104:
3292  1052  3A 01 00    	ld	a,(_player_keys + 0x0001)
3293  1055  B7          	or	a, a
3294  1056  28 25       	jr	Z,l_player_open_door_00113
3295  1058  2E 02       	ld	l,0x02
3296  105A  CD 00 00    	call	_zx_border_fastcall
3297  105D  0E 01       	ld	c,0x01
3298  105F  18 1C       	jr	l_player_open_door_00113
3299  1061              l_player_open_door_00107:
3300  1061  3A 02 00    	ld	a,(_player_keys + 0x0002)
3301  1064  B7          	or	a, a
3302  1065  28 16       	jr	Z,l_player_open_door_00113
3303  1067  2E 04       	ld	l,0x04
3304  1069  CD 00 00    	call	_zx_border_fastcall
3305  106C  0E 01       	ld	c,0x01
3306  106E  18 0D       	jr	l_player_open_door_00113
3307  1070              l_player_open_door_00110:
3308  1070  3A 03 00    	ld	a,(_player_keys + 0x0003)
3309  1073  B7          	or	a, a
3310  1074  28 07       	jr	Z,l_player_open_door_00113
3311  1076  2E 05       	ld	l,0x05
3312  1078  CD 00 00    	call	_zx_border_fastcall
3313  107B  0E 01       	ld	c,0x01
3314  107D              l_player_open_door_00113:
3315  107D  79          	ld	a, c
3316  107E  B7          	or	a, a
3317  107F  20 06       	jr	NZ,l_player_open_door_00114
3318  1081  3A 00 00    	ld	a,(_game_inmune)
3319  1084  B7          	or	a, a
3320  1085  28 2B       	jr	Z,l_player_open_door_00115
3321  1087              l_player_open_door_00114:
3322  1087  21 00 00    	ld	hl,_ay_fx_04_pierto_abierta
3323  108A  E5          	push	hl
3324  108B  21 01 04    	ld	hl,0x0401
3325  108E  E5          	push	hl
3326  108F  CD 00 00    	call	_ay_song_play
3327  1092  3E 00       	ld	a, +((_scr_map) & 0xFF)
3328  1094  DD 86 04    	add	a,(ix+4)
3329  1097  4F          	ld	c, a
3330  1098  3E 00       	ld	a, +((_scr_map) / 256)
3331  109A  DD 8E 05    	adc	a,(ix+5)
3332  109D  47          	ld	b, a
3333  109E  AF          	xor	a, a
3334  109F  02          	ld	(bc), a
3335  10A0  DD 6E 04    	ld	l,(ix+4)
3336  10A3  DD 66 05    	ld	h,(ix+5)
3337  10A6  CD 00 00    	call	_game_obj_set
3338  10A9  21 04 00    	ld	hl,0x0004
3339  10AC  39          	add	hl, sp
3340  10AD  CD 00 00    	call	_spr_draw_index
3341  10B0  18 0B       	jr	l_player_open_door_00118
3342  10B2              l_player_open_door_00115:
3343  10B2  21 00 00    	ld	hl,_ay_fx_04_sin_mana
3344  10B5  E5          	push	hl
3345  10B6  21 01 04    	ld	hl,0x0401
3346  10B9  E5          	push	hl
3347  10BA  CD 00 00    	call	_ay_song_play
3348  10BD              l_player_open_door_00118:
3349  10BD  DD E1       	pop	ix
3350  10BF  C9          	ret
3351  10C0              	SECTION code_compiler
3352  10C0              ;	---------------------------------
3353  10C0              ; Function player_lost_life
3354  10C0              ; ---------------------------------
3355  10C0              _player_lost_life:
3356  10C0  CD 00 00    	call	___sdcc_enter_ix
3357  10C3  F5          	push	af
3358  10C4  21 00 00    	ld	hl,_player_vita
3359  10C7  36 00       	ld	(hl),0x00
3360  10C9  CD 00 00    	call	_game_update_stats
3361  10CC  3A 07 00    	ld	a,(_lin + 7)
3362  10CF  32 00 00    	ld	(_s_lin0),a
3363  10D2  3A 07 00    	ld	a,(_col + 7)
3364  10D5  32 00 00    	ld	(_s_col0),a
3365  10D8  CD 00 00    	call	_spr_init_effects
3366  10DB  06 00       	ld	b,0x00
3367  10DD              l_player_lost_life_00121:
3368  10DD  C5          	push	bc
3369  10DE  21 00 00    	ld	hl,0x0000
3370  10E1  E5          	push	hl
3371  10E2  AF          	xor	a, a
3372  10E3  48          	ld	c,b
3373  10E4  47          	ld	b,a
3374  10E5  C5          	push	bc
3375  10E6  CD 00 00    	call	_NIRVANAP_spriteT_callee
3376  10E9  C1          	pop	bc
3377  10EA  04          	inc	b
3378  10EB  3E 07       	ld	a,0x07
3379  10ED  90          	sub	a, b
3380  10EE  30 ED       	jr	NC,l_player_lost_life_00121
3381  10F0  21 00 00    	ld	hl,_ay_fx_04_explosion
3382  10F3  E5          	push	hl
3383  10F4  21 01 04    	ld	hl,0x0401
3384  10F7  E5          	push	hl
3385  10F8  CD 00 00    	call	_ay_song_play
3386  10FB  76          	halt
3387  10FC  3A 00 00    	ld	a,(_s_lin0)
3388  10FF  C6 F0       	add	a,0xf0
3389  1101  47          	ld	b, a
3390  1102  3A 00 00    	ld	a,(_s_col0)
3391  1105  21 00 00    	ld	hl,0x0000
3392  1108  E5          	push	hl
3393  1109  21 87 03    	ld	hl,0x0387
3394  110C  E5          	push	hl
3395  110D  48          	ld	c,b
3396  110E  47          	ld	b,a
3397  110F  C5          	push	bc
3398  1110  CD 00 00    	call	_spr_add_anim
3399  1113  F1          	pop	af
3400  1114  F1          	pop	af
3401  1115  F1          	pop	af
3402  1116  21 00 00    	ld	hl,_s_col0
3403  1119  46          	ld	b, (hl)
3404  111A  05          	dec	b
3405  111B  05          	dec	b
3406  111C  21 00 00    	ld	hl,0x0000
3407  111F  E5          	push	hl
3408  1120  21 87 03    	ld	hl,0x0387
3409  1123  E5          	push	hl
3410  1124  C5          	push	bc
3411  1125  33          	inc	sp
3412  1126  3A 00 00    	ld	a,(_s_lin0)
3413  1129  F5          	push	af
3414  112A  33          	inc	sp
3415  112B  CD 00 00    	call	_spr_add_anim
3416  112E  F1          	pop	af
3417  112F  F1          	pop	af
3418  1130  21 00 00    	ld	hl,0x0000
3419  1133  E3          	ex	(sp),hl
3420  1134  3A 00 00    	ld	a,(_s_col0)
3421  1137  21 87 03    	ld	hl,0x0387
3422  113A  E5          	push	hl
3423  113B  F5          	push	af
3424  113C  33          	inc	sp
3425  113D  3A 00 00    	ld	a,(_s_lin0)
3426  1140  F5          	push	af
3427  1141  33          	inc	sp
3428  1142  CD 00 00    	call	_spr_add_anim
3429  1145  F1          	pop	af
3430  1146  F1          	pop	af
3431  1147  F1          	pop	af
3432  1148  21 00 00    	ld	hl,_s_col0
3433  114B  46          	ld	b, (hl)
3434  114C  04          	inc	b
3435  114D  04          	inc	b
3436  114E  21 00 00    	ld	hl,0x0000
3437  1151  E5          	push	hl
3438  1152  21 87 03    	ld	hl,0x0387
3439  1155  E5          	push	hl
3440  1156  C5          	push	bc
3441  1157  33          	inc	sp
3442  1158  3A 00 00    	ld	a,(_s_lin0)
3443  115B  F5          	push	af
3444  115C  33          	inc	sp
3445  115D  CD 00 00    	call	_spr_add_anim
3446  1160  F1          	pop	af
3447  1161  F1          	pop	af
3448  1162  F1          	pop	af
3449  1163  3A 00 00    	ld	a,(_s_lin0)
3450  1166  C6 10       	add	a,0x10
3451  1168  47          	ld	b, a
3452  1169  3A 00 00    	ld	a,(_s_col0)
3453  116C  21 00 00    	ld	hl,0x0000
3454  116F  E5          	push	hl
3455  1170  21 87 03    	ld	hl,0x0387
3456  1173  E5          	push	hl
3457  1174  48          	ld	c,b
3458  1175  47          	ld	b,a
3459  1176  C5          	push	bc
3460  1177  CD 00 00    	call	_spr_add_anim
3461  117A  F1          	pop	af
3462  117B  F1          	pop	af
3463  117C  F1          	pop	af
3464  117D  2E 00       	ld	l,0x00
3465  117F  CD 00 00    	call	_zx_border_fastcall
3466  1182  DD 36 FE 01 	ld	(ix-2),0x01
3467  1186  2A 00 00    	ld	hl,(_curr_time)
3468  1189  22 00 00    	ld	(_anim_time),hl
3469  118C              l_player_lost_life_00107:
3470  118C  DD 7E FE    	ld	a,(ix-2)
3471  118F  B7          	or	a, a
3472  1190  28 28       	jr	Z,l_player_lost_life_00109
3473  1192  3E 0C       	ld	a,0x0c
3474  1194  F5          	push	af
3475  1195  33          	inc	sp
3476  1196  21 00 00    	ld	hl,_anim_time
3477  1199  E5          	push	hl
3478  119A  CD 00 00    	call	_game_check_time
3479  119D  F1          	pop	af
3480  119E  33          	inc	sp
3481  119F  7D          	ld	a, l
3482  11A0  B7          	or	a, a
3483  11A1  28 E9       	jr	Z,l_player_lost_life_00107
3484  11A3  2A 00 00    	ld	hl,(_curr_time)
3485  11A6  22 00 00    	ld	(_anim_time),hl
3486  11A9  3A 00 00    	ld	a,(_anim_count)
3487  11AC  B7          	or	a,a
3488  11AD  28 05       	jr	Z,l_player_lost_life_00103
3489  11AF  CD 00 00    	call	_spr_play_anim
3490  11B2  18 D8       	jr	l_player_lost_life_00107
3491  11B4              l_player_lost_life_00103:
3492  11B4  DD 36 FE 00 	ld	(ix-2),0x00
3493  11B8  18 D2       	jr	l_player_lost_life_00107
3494  11BA              l_player_lost_life_00109:
3495  11BA  21 00 00    	ld	hl,_ay_song_04_lotr_lose_a_life
3496  11BD  E5          	push	hl
3497  11BE  21 01 04    	ld	hl,0x0401
3498  11C1  E5          	push	hl
3499  11C2  CD 00 00    	call	_ay_song_play
3500  11C5  3A 00 00    	ld	a,(_game_boss)
3501  11C8  B7          	or	a, a
3502  11C9  28 11       	jr	Z,l_player_lost_life_00135
3503  11CB  3A 00 00    	ld	a,(_boss_lin)
3504  11CE  32 00 00    	ld	(_s_lin1),a
3505  11D1  3A 00 00    	ld	a,(_boss_col)
3506  11D4  32 00 00    	ld	(_s_col1),a
3507  11D7  CD 00 00    	call	_boss_draw
3508  11DA  18 40       	jr	l_player_lost_life_00115
3509  11DC              l_player_lost_life_00135:
3510  11DC  0E 00       	ld	c,0x00
3511  11DE              l_player_lost_life_00123:
3512  11DE  06 00       	ld	b,0x00
3513  11E0  21 00 00    	ld	hl,_class
3514  11E3  09          	add	hl, bc
3515  11E4  7E          	ld	a, (hl)
3516  11E5  B7          	or	a, a
3517  11E6  28 2E       	jr	Z,l_player_lost_life_00124
3518  11E8  06 00       	ld	b,0x00
3519  11EA  21 00 00    	ld	hl,_col
3520  11ED  09          	add	hl, bc
3521  11EE  5E          	ld	e, (hl)
3522  11EF  06 00       	ld	b,0x00
3523  11F1  21 00 00    	ld	hl,_lin
3524  11F4  09          	add	hl, bc
3525  11F5  56          	ld	d, (hl)
3526  11F6  06 00       	ld	b,0x00
3527  11F8  21 00 00    	ld	hl,_tile
3528  11FB  09          	add	hl, bc
3529  11FC  7E          	ld	a, (hl)
3530  11FD  DD 77 FF    	ld	(ix-1),a
3531  1200  06 00       	ld	b,0x00
3532  1202  21 00 00    	ld	hl,_colint
3533  1205  09          	add	hl, bc
3534  1206  6E          	ld	l, (hl)
3535  1207  DD 7E FF    	ld	a,(ix-1)
3536  120A  85          	add	a, l
3537  120B  47          	ld	b, a
3538  120C  C5          	push	bc
3539  120D  7B          	ld	a, e
3540  120E  5A          	ld	e,d
3541  120F  57          	ld	d,a
3542  1210  D5          	push	de
3543  1211  C5          	push	bc
3544  1212  CD 00 00    	call	_NIRVANAP_spriteT_callee
3545  1215  C1          	pop	bc
3546  1216              l_player_lost_life_00124:
3547  1216  0C          	inc	c
3548  1217  79          	ld	a, c
3549  1218  D6 07       	sub	a,0x07
3550  121A  38 C2       	jr	C,l_player_lost_life_00123
3551  121C              l_player_lost_life_00115:
3552  121C  3A 00 00    	ld	a,(_game_inf_lives)
3553  121F  B7          	or	a, a
3554  1220  20 04       	jr	NZ,l_player_lost_life_00117
3555  1222  21 00 00    	ld	hl,_player_lives
3556  1225  35          	dec	(hl)
3557  1226              l_player_lost_life_00117:
3558  1226  21 00 00    	ld	hl,_player_mana
3559  1229  36 64       	ld	(hl),0x64
3560  122B  21 00 00    	ld	hl,_player_vita
3561  122E  36 64       	ld	(hl),0x64
3562  1230  3A 00 00    	ld	a,(_player_lives)
3563  1233  B7          	or	a, a
3564  1234  28 1D       	jr	Z,l_player_lost_life_00119
3565  1236  21 F4 01    	ld	hl,0x01f4
3566  1239  CD 00 00    	call	_z80_delay_ms_fastcall
3567  123C  3A 00 00    	ld	a,(_game_checkpoint_col)
3568  123F  32 00 00    	ld	(_player_col_scr),a
3569  1242  3A 00 00    	ld	a,(_game_checkpoint_lin)
3570  1245  32 00 00    	ld	(_player_lin_scr),a
3571  1248  3A 00 00    	ld	a,(_game_checkpoint_scr)
3572  124B  32 00 00    	ld	(_scr_curr),a
3573  124E  CD 00 00    	call	_game_round_init
3574  1251  18 0A       	jr	l_player_lost_life_00125
3575  1253              l_player_lost_life_00119:
3576  1253  21 00 00    	ld	hl,_player_lives
3577  1256  36 00       	ld	(hl),0x00
3578  1258  21 00 00    	ld	hl,_game_over
3579  125B  36 01       	ld	(hl),0x01
3580  125D              l_player_lost_life_00125:
3581  125D  F1          	pop	af
3582  125E  DD E1       	pop	ix
3583  1260  C9          	ret
3584  1261              	SECTION code_compiler
3585  1261              ;	---------------------------------
3586  1261              ; Function player_hit
3587  1261              ; ---------------------------------
3588  1261              _player_hit:
3589  1261  7D          	ld	a,l
3590  1262  4D          	ld	c,l
3591  1263  21 00 00    	ld	hl,_player_vita
3592  1266  96          	sub	a, (hl)
3593  1267  30 22       	jr	NC,l_player_hit_00104
3594  1269  3A 00 00    	ld	a,(_game_inmune)
3595  126C  B7          	or	a, a
3596  126D  20 06       	jr	NZ,l_player_hit_00102
3597  126F  21 00 00    	ld	hl,_player_vita
3598  1272  7E          	ld	a, (hl)
3599  1273  91          	sub	a, c
3600  1274  77          	ld	(hl), a
3601  1275              l_player_hit_00102:
3602  1275  2A 00 00    	ld	hl,(_curr_time)
3603  1278  22 00 00    	ld	(_player_hit_time),hl
3604  127B  21 00 00    	ld	hl,_ay_fx_04_golpe
3605  127E  E5          	push	hl
3606  127F  21 01 04    	ld	hl,0x0401
3607  1282  E5          	push	hl
3608  1283  CD 00 00    	call	_ay_song_play
3609  1286  CD 00 00    	call	_game_update_stats
3610  1289  18 03       	jr	l_player_hit_00106
3611  128B              l_player_hit_00104:
3612  128B  CD C0 10    	call	_player_lost_life
3613  128E              l_player_hit_00106:
3614  128E  C9          	ret
3615  128F              	SECTION IGNORE
3616  0000              
