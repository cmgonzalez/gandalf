1     0000              MODULE game_player_c
2     0000              
3     0000              ;--------------------------------------------------------
4     0000              ; File Created by SDCC : free open source ANSI-C Compiler
5     0000              ; Version 3.6.5 #9958 (Mac OS X i386)
6     0000              ;--------------------------------------------------------
7     0000              ; Processed by Z88DK
8     0000              ;--------------------------------------------------------
9     0000              
10    0000              	EXTERN __divschar
11    0000              	EXTERN __divschar_callee
12    0000              	EXTERN __divsint
13    0000              	EXTERN __divsint_callee
14    0000              	EXTERN __divslong
15    0000              	EXTERN __divslong_callee
16    0000              	EXTERN __divslonglong
17    0000              	EXTERN __divslonglong_callee
18    0000              	EXTERN __divsuchar
19    0000              	EXTERN __divsuchar_callee
20    0000              	EXTERN __divuchar
21    0000              	EXTERN __divuchar_callee
22    0000              	EXTERN __divuint
23    0000              	EXTERN __divuint_callee
24    0000              	EXTERN __divulong
25    0000              	EXTERN __divulong_callee
26    0000              	EXTERN __divulonglong
27    0000              	EXTERN __divulonglong_callee
28    0000              	EXTERN __divuschar
29    0000              	EXTERN __divuschar_callee
30    0000              	EXTERN __modschar
31    0000              	EXTERN __modschar_callee
32    0000              	EXTERN __modsint
33    0000              	EXTERN __modsint_callee
34    0000              	EXTERN __modslong
35    0000              	EXTERN __modslong_callee
36    0000              	EXTERN __modslonglong
37    0000              	EXTERN __modslonglong_callee
38    0000              	EXTERN __modsuchar
39    0000              	EXTERN __modsuchar_callee
40    0000              	EXTERN __moduchar
41    0000              	EXTERN __moduchar_callee
42    0000              	EXTERN __moduint
43    0000              	EXTERN __moduint_callee
44    0000              	EXTERN __modulong
45    0000              	EXTERN __modulong_callee
46    0000              	EXTERN __modulonglong
47    0000              	EXTERN __modulonglong_callee
48    0000              	EXTERN __moduschar
49    0000              	EXTERN __moduschar_callee
50    0000              	EXTERN __mulint
51    0000              	EXTERN __mulint_callee
52    0000              	EXTERN __mullong
53    0000              	EXTERN __mullong_callee
54    0000              	EXTERN __mullonglong
55    0000              	EXTERN __mullonglong_callee
56    0000              	EXTERN __mulschar
57    0000              	EXTERN __mulschar_callee
58    0000              	EXTERN __mulsuchar
59    0000              	EXTERN __mulsuchar_callee
60    0000              	EXTERN __muluschar
61    0000              	EXTERN __muluschar_callee
62    0000              	EXTERN __rlslonglong
63    0000              	EXTERN __rlslonglong_callee
64    0000              	EXTERN __rlulonglong
65    0000              	EXTERN __rlulonglong_callee
66    0000              	EXTERN __rrslonglong
67    0000              	EXTERN __rrslonglong_callee
68    0000              	EXTERN __rrulonglong
69    0000              	EXTERN __rrulonglong_callee
70    0000              	EXTERN ___sdcc_call_hl
71    0000              	EXTERN ___sdcc_call_iy
72    0000              	EXTERN ___sdcc_enter_ix
73    0000              	EXTERN _banked_call
74    0000              	EXTERN _banked_ret
75    0000              	EXTERN ___fs2schar
76    0000              	EXTERN ___fs2schar_callee
77    0000              	EXTERN ___fs2sint
78    0000              	EXTERN ___fs2sint_callee
79    0000              	EXTERN ___fs2slong
80    0000              	EXTERN ___fs2slong_callee
81    0000              	EXTERN ___fs2slonglong
82    0000              	EXTERN ___fs2slonglong_callee
83    0000              	EXTERN ___fs2uchar
84    0000              	EXTERN ___fs2uchar_callee
85    0000              	EXTERN ___fs2uint
86    0000              	EXTERN ___fs2uint_callee
87    0000              	EXTERN ___fs2ulong
88    0000              	EXTERN ___fs2ulong_callee
89    0000              	EXTERN ___fs2ulonglong
90    0000              	EXTERN ___fs2ulonglong_callee
91    0000              	EXTERN ___fsadd
92    0000              	EXTERN ___fsadd_callee
93    0000              	EXTERN ___fsdiv
94    0000              	EXTERN ___fsdiv_callee
95    0000              	EXTERN ___fseq
96    0000              	EXTERN ___fseq_callee
97    0000              	EXTERN ___fsgt
98    0000              	EXTERN ___fsgt_callee
99    0000              	EXTERN ___fslt
100   0000              	EXTERN ___fslt_callee
101   0000              	EXTERN ___fsmul
102   0000              	EXTERN ___fsmul_callee
103   0000              	EXTERN ___fsneq
104   0000              	EXTERN ___fsneq_callee
105   0000              	EXTERN ___fssub
106   0000              	EXTERN ___fssub_callee
107   0000              	EXTERN ___schar2fs
108   0000              	EXTERN ___schar2fs_callee
109   0000              	EXTERN ___sint2fs
110   0000              	EXTERN ___sint2fs_callee
111   0000              	EXTERN ___slong2fs
112   0000              	EXTERN ___slong2fs_callee
113   0000              	EXTERN ___slonglong2fs
114   0000              	EXTERN ___slonglong2fs_callee
115   0000              	EXTERN ___uchar2fs
116   0000              	EXTERN ___uchar2fs_callee
117   0000              	EXTERN ___uint2fs
118   0000              	EXTERN ___uint2fs_callee
119   0000              	EXTERN ___ulong2fs
120   0000              	EXTERN ___ulong2fs_callee
121   0000              	EXTERN ___ulonglong2fs
122   0000              	EXTERN ___ulonglong2fs_callee
123   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
126   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
127   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
128   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
129   0000              	EXTERN ____sdcc_4_ldi_save_bc
130   0000              	EXTERN ____sdcc_4_push_hlix
131   0000              	EXTERN ____sdcc_4_push_mhl
132   0000              	EXTERN ____sdcc_lib_setmem_hl
133   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
134   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
135   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
136   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
137   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
138   0000              	EXTERN ____sdcc_ll_add_deix_hlix
139   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
140   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
141   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
142   0000              	EXTERN ____sdcc_ll_asr_hlix_a
143   0000              	EXTERN ____sdcc_ll_asr_mbc_a
144   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
145   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
146   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
147   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
148   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
149   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
150   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
151   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
152   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
153   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
155   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
156   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
157   0000              	EXTERN ____sdcc_ll_push_hlix
158   0000              	EXTERN ____sdcc_ll_push_mhl
159   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
160   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
161   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
162   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
163   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
164   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
165   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
166   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
167   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
168   0000              	EXTERN ____sdcc_load_debc_deix
169   0000              	EXTERN ____sdcc_load_dehl_deix
170   0000              	EXTERN ____sdcc_load_debc_mhl
171   0000              	EXTERN ____sdcc_load_hlde_mhl
172   0000              	EXTERN ____sdcc_store_dehl_bcix
173   0000              	EXTERN ____sdcc_store_debc_hlix
174   0000              	EXTERN ____sdcc_store_debc_mhl
175   0000              	EXTERN ____sdcc_cpu_pop_ei
176   0000              	EXTERN ____sdcc_cpu_pop_ei_jp
177   0000              	EXTERN ____sdcc_cpu_push_di
178   0000              	EXTERN ____sdcc_outi
179   0000              	EXTERN ____sdcc_outi_128
180   0000              	EXTERN ____sdcc_outi_256
181   0000              	EXTERN ____sdcc_ldi
182   0000              	EXTERN ____sdcc_ldi_128
183   0000              	EXTERN ____sdcc_ldi_256
184   0000              
185   0000              ;--------------------------------------------------------
186   0000              ; Public variables in this module
187   0000              ;--------------------------------------------------------
188   0000              	GLOBAL _player_check_map
189   0000              	GLOBAL _player_1up
190   0000              	GLOBAL _player_init
191   0000              	GLOBAL _player_turn
192   0000              	GLOBAL _player_move
193   0000              	GLOBAL _player_check_input
194   0000              	GLOBAL _player_move_input
195   0000              	GLOBAL _player_fix_walk_lin
196   0000              	GLOBAL _player_fire
197   0000              	GLOBAL _player_collision
198   0000              	GLOBAL _player_pick_mushroom
199   0000              	GLOBAL _player_check_stairs_vertical
200   0000              	GLOBAL _player_check_stairs
201   0000              	GLOBAL _player_anim_tile
202   0000              	GLOBAL _player_tile
203   0000              	GLOBAL _player_pick_item
204   0000              	GLOBAL _player_hit_platform
205   0000              	GLOBAL _player_hit_platform_clear
206   0000              	GLOBAL _player_score_add
207   0000              	GLOBAL _player_check_floor
208   0000              	GLOBAL _player_gasta_brick
209   0000              	GLOBAL _player_move_jump
210   0000              	GLOBAL _player_open_door
211   0000              	GLOBAL _player_lost_life
212   0000              	GLOBAL _player_hit
213   0000              ;--------------------------------------------------------
214   0000              ; Externals used
215   0000              ;--------------------------------------------------------
216   0000              	GLOBAL _ulltoa_callee
217   0000              	GLOBAL _ulltoa
218   0000              	GLOBAL _strtoull_callee
219   0000              	GLOBAL _strtoull
220   0000              	GLOBAL _strtoll_callee
221   0000              	GLOBAL _strtoll
222   0000              	GLOBAL _lltoa_callee
223   0000              	GLOBAL _lltoa
224   0000              	GLOBAL _llabs_callee
225   0000              	GLOBAL _llabs
226   0000              	GLOBAL __lldivu__callee
227   0000              	GLOBAL __lldivu_
228   0000              	GLOBAL __lldiv__callee
229   0000              	GLOBAL __lldiv_
230   0000              	GLOBAL _atoll_callee
231   0000              	GLOBAL _atoll
232   0000              	GLOBAL _realloc_unlocked_callee
233   0000              	GLOBAL _realloc_unlocked
234   0000              	GLOBAL _malloc_unlocked_fastcall
235   0000              	GLOBAL _malloc_unlocked
236   0000              	GLOBAL _free_unlocked_fastcall
237   0000              	GLOBAL _free_unlocked
238   0000              	GLOBAL _calloc_unlocked_callee
239   0000              	GLOBAL _calloc_unlocked
240   0000              	GLOBAL _aligned_alloc_unlocked_callee
241   0000              	GLOBAL _aligned_alloc_unlocked
242   0000              	GLOBAL _realloc_callee
243   0000              	GLOBAL _realloc
244   0000              	GLOBAL _malloc_fastcall
245   0000              	GLOBAL _malloc
246   0000              	GLOBAL _free_fastcall
247   0000              	GLOBAL _free
248   0000              	GLOBAL _calloc_callee
249   0000              	GLOBAL _calloc
250   0000              	GLOBAL _aligned_alloc_callee
251   0000              	GLOBAL _aligned_alloc
252   0000              	GLOBAL _utoa_callee
253   0000              	GLOBAL _utoa
254   0000              	GLOBAL _ultoa_callee
255   0000              	GLOBAL _ultoa
256   0000              	GLOBAL _system_fastcall
257   0000              	GLOBAL _system
258   0000              	GLOBAL _strtoul_callee
259   0000              	GLOBAL _strtoul
260   0000              	GLOBAL _strtol_callee
261   0000              	GLOBAL _strtol
262   0000              	GLOBAL _strtof_callee
263   0000              	GLOBAL _strtof
264   0000              	GLOBAL _strtod_callee
265   0000              	GLOBAL _strtod
266   0000              	GLOBAL _srand_fastcall
267   0000              	GLOBAL _srand
268   0000              	GLOBAL _rand
269   0000              	GLOBAL _quick_exit_fastcall
270   0000              	GLOBAL _quick_exit
271   0000              	GLOBAL _qsort_callee
272   0000              	GLOBAL _qsort
273   0000              	GLOBAL _ltoa_callee
274   0000              	GLOBAL _ltoa
275   0000              	GLOBAL _labs_fastcall
276   0000              	GLOBAL _labs
277   0000              	GLOBAL _itoa_callee
278   0000              	GLOBAL _itoa
279   0000              	GLOBAL _ftoh_callee
280   0000              	GLOBAL _ftoh
281   0000              	GLOBAL _ftog_callee
282   0000              	GLOBAL _ftog
283   0000              	GLOBAL _ftoe_callee
284   0000              	GLOBAL _ftoe
285   0000              	GLOBAL _ftoa_callee
286   0000              	GLOBAL _ftoa
287   0000              	GLOBAL _exit_fastcall
288   0000              	GLOBAL _exit
289   0000              	GLOBAL _dtoh_callee
290   0000              	GLOBAL _dtoh
291   0000              	GLOBAL _dtog_callee
292   0000              	GLOBAL _dtog
293   0000              	GLOBAL _dtoe_callee
294   0000              	GLOBAL _dtoe
295   0000              	GLOBAL _dtoa_callee
296   0000              	GLOBAL _dtoa
297   0000              	GLOBAL _bsearch_callee
298   0000              	GLOBAL _bsearch
299   0000              	GLOBAL _atol_fastcall
300   0000              	GLOBAL _atol
301   0000              	GLOBAL _atoi_fastcall
302   0000              	GLOBAL _atoi
303   0000              	GLOBAL _atof_fastcall
304   0000              	GLOBAL _atof
305   0000              	GLOBAL _atexit_fastcall
306   0000              	GLOBAL _atexit
307   0000              	GLOBAL _at_quick_exit_fastcall
308   0000              	GLOBAL _at_quick_exit
309   0000              	GLOBAL _abs_fastcall
310   0000              	GLOBAL _abs
311   0000              	GLOBAL _abort
312   0000              	GLOBAL __strtou__callee
313   0000              	GLOBAL __strtou_
314   0000              	GLOBAL __strtoi__callee
315   0000              	GLOBAL __strtoi_
316   0000              	GLOBAL __random_uniform_xor_8__fastcall
317   0000              	GLOBAL __random_uniform_xor_8_
318   0000              	GLOBAL __random_uniform_xor_32__fastcall
319   0000              	GLOBAL __random_uniform_xor_32_
320   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
321   0000              	GLOBAL __random_uniform_cmwc_8_
322   0000              	GLOBAL __shellsort__callee
323   0000              	GLOBAL __shellsort_
324   0000              	GLOBAL __quicksort__callee
325   0000              	GLOBAL __quicksort_
326   0000              	GLOBAL __insertion_sort__callee
327   0000              	GLOBAL __insertion_sort_
328   0000              	GLOBAL __ldivu__callee
329   0000              	GLOBAL __ldivu_
330   0000              	GLOBAL __ldiv__callee
331   0000              	GLOBAL __ldiv_
332   0000              	GLOBAL __divu__callee
333   0000              	GLOBAL __divu_
334   0000              	GLOBAL __div__callee
335   0000              	GLOBAL __div_
336   0000              	GLOBAL _NIRVANAP_drawTW_raw_callee
337   0000              	GLOBAL _NIRVANAP_drawTW_raw
338   0000              	GLOBAL _NIRVANAP_drawTW_callee
339   0000              	GLOBAL _NIRVANAP_drawTW
340   0000              	GLOBAL _NIRVANAP_drawW_raw_callee
341   0000              	GLOBAL _NIRVANAP_drawW_raw
342   0000              	GLOBAL _NIRVANAP_drawW_callee
343   0000              	GLOBAL _NIRVANAP_drawW
344   0000              	GLOBAL _NIRVANAP_spriteT_callee
345   0000              	GLOBAL _NIRVANAP_spriteT
346   0000              	GLOBAL _NIRVANAP_fillC_callee
347   0000              	GLOBAL _NIRVANAP_fillC
348   0000              	GLOBAL _NIRVANAP_readC_callee
349   0000              	GLOBAL _NIRVANAP_readC
350   0000              	GLOBAL _NIRVANAP_paintC_callee
351   0000              	GLOBAL _NIRVANAP_paintC
352   0000              	GLOBAL _NIRVANAP_printC_callee
353   0000              	GLOBAL _NIRVANAP_printC
354   0000              	GLOBAL _NIRVANAP_fillT_raw_callee
355   0000              	GLOBAL _NIRVANAP_fillT_raw
356   0000              	GLOBAL _NIRVANAP_fillT_callee
357   0000              	GLOBAL _NIRVANAP_fillT
358   0000              	GLOBAL _NIRVANAP_drawT_raw_callee
359   0000              	GLOBAL _NIRVANAP_drawT_raw
360   0000              	GLOBAL _NIRVANAP_drawT_callee
361   0000              	GLOBAL _NIRVANAP_drawT
362   0000              	GLOBAL _NIRVANAP_stop
363   0000              	GLOBAL _NIRVANAP_start
364   0000              	GLOBAL _debug3
365   0000              	GLOBAL _debug2
366   0000              	GLOBAL _debug
367   0000              	GLOBAL _zx_print_str
368   0000              	GLOBAL _zx_print_int
369   0000              	GLOBAL _zx_print_chr
370   0000              	GLOBAL _zx_print_bonus_time
371   0000              	GLOBAL _zx_isr
372   0000              	GLOBAL _z80_otdr_callee
373   0000              	GLOBAL _z80_otdr
374   0000              	GLOBAL _z80_otir_callee
375   0000              	GLOBAL _z80_otir
376   0000              	GLOBAL _z80_outp_callee
377   0000              	GLOBAL _z80_outp
378   0000              	GLOBAL _z80_indr_callee
379   0000              	GLOBAL _z80_indr
380   0000              	GLOBAL _z80_inir_callee
381   0000              	GLOBAL _z80_inir
382   0000              	GLOBAL _z80_inp_fastcall
383   0000              	GLOBAL _z80_inp
384   0000              	GLOBAL _z80_set_int_state_fastcall
385   0000              	GLOBAL _z80_set_int_state
386   0000              	GLOBAL _z80_get_int_state
387   0000              	GLOBAL _z80_delay_tstate_fastcall
388   0000              	GLOBAL _z80_delay_tstate
389   0000              	GLOBAL _z80_delay_ms_fastcall
390   0000              	GLOBAL _z80_delay_ms
391   0000              	GLOBAL _im2_remove_generic_callback_callee
392   0000              	GLOBAL _im2_remove_generic_callback
393   0000              	GLOBAL _im2_prepend_generic_callback_callee
394   0000              	GLOBAL _im2_prepend_generic_callback
395   0000              	GLOBAL _im2_append_generic_callback_callee
396   0000              	GLOBAL _im2_append_generic_callback
397   0000              	GLOBAL _im2_create_generic_isr_8080_callee
398   0000              	GLOBAL _im2_create_generic_isr_8080
399   0000              	GLOBAL _im2_create_generic_isr_callee
400   0000              	GLOBAL _im2_create_generic_isr
401   0000              	GLOBAL _im2_install_isr_callee
402   0000              	GLOBAL _im2_install_isr
403   0000              	GLOBAL _im2_init_fastcall
404   0000              	GLOBAL _im2_init
405   0000              	GLOBAL _intrinsic_swap_word_32_fastcall
406   0000              	GLOBAL _intrinsic_swap_word_32
407   0000              	GLOBAL _intrinsic_swap_endian_32_fastcall
408   0000              	GLOBAL _intrinsic_swap_endian_32
409   0000              	GLOBAL _intrinsic_swap_endian_16_fastcall
410   0000              	GLOBAL _intrinsic_swap_endian_16
411   0000              	GLOBAL _intrinsic_return_de
412   0000              	GLOBAL _intrinsic_return_bc
413   0000              	GLOBAL _intrinsic_exx
414   0000              	GLOBAL _intrinsic_ex_de_hl
415   0000              	GLOBAL _intrinsic_nop
416   0000              	GLOBAL _intrinsic_im_2
417   0000              	GLOBAL _intrinsic_im_1
418   0000              	GLOBAL _intrinsic_im_0
419   0000              	GLOBAL _intrinsic_retn
420   0000              	GLOBAL _intrinsic_reti
421   0000              	GLOBAL _intrinsic_halt
422   0000              	GLOBAL _intrinsic_ei
423   0000              	GLOBAL _intrinsic_di
424   0000              	GLOBAL _intrinsic_stub
425   0000              	GLOBAL _intrinsic_outi
426   0000              	GLOBAL _intrinsic_ldi
427   0000              	GLOBAL _zx_pattern_fill_callee
428   0000              	GLOBAL _zx_pattern_fill
429   0000              	GLOBAL _zx_saddrpup_fastcall
430   0000              	GLOBAL _zx_saddrpup
431   0000              	GLOBAL _zx_saddrpright_callee
432   0000              	GLOBAL _zx_saddrpright
433   0000              	GLOBAL _zx_saddrpleft_callee
434   0000              	GLOBAL _zx_saddrpleft
435   0000              	GLOBAL _zx_saddrpdown_fastcall
436   0000              	GLOBAL _zx_saddrpdown
437   0000              	GLOBAL _zx_saddrcup_fastcall
438   0000              	GLOBAL _zx_saddrcup
439   0000              	GLOBAL _zx_saddrcright_fastcall
440   0000              	GLOBAL _zx_saddrcright
441   0000              	GLOBAL _zx_saddrcleft_fastcall
442   0000              	GLOBAL _zx_saddrcleft
443   0000              	GLOBAL _zx_saddrcdown_fastcall
444   0000              	GLOBAL _zx_saddrcdown
445   0000              	GLOBAL _zx_saddr2py_fastcall
446   0000              	GLOBAL _zx_saddr2py
447   0000              	GLOBAL _zx_saddr2px_fastcall
448   0000              	GLOBAL _zx_saddr2px
449   0000              	GLOBAL _zx_saddr2cy_fastcall
450   0000              	GLOBAL _zx_saddr2cy
451   0000              	GLOBAL _zx_saddr2cx_fastcall
452   0000              	GLOBAL _zx_saddr2cx
453   0000              	GLOBAL _zx_saddr2aaddr_fastcall
454   0000              	GLOBAL _zx_saddr2aaddr
455   0000              	GLOBAL _zx_py2saddr_fastcall
456   0000              	GLOBAL _zx_py2saddr
457   0000              	GLOBAL _zx_py2aaddr_fastcall
458   0000              	GLOBAL _zx_py2aaddr
459   0000              	GLOBAL _zx_pxy2saddr_callee
460   0000              	GLOBAL _zx_pxy2saddr
461   0000              	GLOBAL _zx_pxy2aaddr_callee
462   0000              	GLOBAL _zx_pxy2aaddr
463   0000              	GLOBAL _zx_px2bitmask_fastcall
464   0000              	GLOBAL _zx_px2bitmask
465   0000              	GLOBAL _zx_cy2saddr_fastcall
466   0000              	GLOBAL _zx_cy2saddr
467   0000              	GLOBAL _zx_cy2aaddr_fastcall
468   0000              	GLOBAL _zx_cy2aaddr
469   0000              	GLOBAL _zx_cxy2saddr_callee
470   0000              	GLOBAL _zx_cxy2saddr
471   0000              	GLOBAL _zx_cxy2aaddr_callee
472   0000              	GLOBAL _zx_cxy2aaddr
473   0000              	GLOBAL _zx_bitmask2px_fastcall
474   0000              	GLOBAL _zx_bitmask2px
475   0000              	GLOBAL _zx_aaddrcup_fastcall
476   0000              	GLOBAL _zx_aaddrcup
477   0000              	GLOBAL _zx_aaddrcright_fastcall
478   0000              	GLOBAL _zx_aaddrcright
479   0000              	GLOBAL _zx_aaddrcleft_fastcall
480   0000              	GLOBAL _zx_aaddrcleft
481   0000              	GLOBAL _zx_aaddrcdown_fastcall
482   0000              	GLOBAL _zx_aaddrcdown
483   0000              	GLOBAL _zx_aaddr2saddr_fastcall
484   0000              	GLOBAL _zx_aaddr2saddr
485   0000              	GLOBAL _zx_aaddr2py_fastcall
486   0000              	GLOBAL _zx_aaddr2py
487   0000              	GLOBAL _zx_aaddr2px_fastcall
488   0000              	GLOBAL _zx_aaddr2px
489   0000              	GLOBAL _zx_aaddr2cy_fastcall
490   0000              	GLOBAL _zx_aaddr2cy
491   0000              	GLOBAL _zx_aaddr2cx_fastcall
492   0000              	GLOBAL _zx_aaddr2cx
493   0000              	GLOBAL _zx_visit_wc_pix_callee
494   0000              	GLOBAL _zx_visit_wc_pix
495   0000              	GLOBAL _zx_visit_wc_attr_callee
496   0000              	GLOBAL _zx_visit_wc_attr
497   0000              	GLOBAL _zx_scroll_wc_up_pix_callee
498   0000              	GLOBAL _zx_scroll_wc_up_pix
499   0000              	GLOBAL _zx_scroll_wc_up_attr_callee
500   0000              	GLOBAL _zx_scroll_wc_up_attr
501   0000              	GLOBAL _zx_scroll_wc_up_callee
502   0000              	GLOBAL _zx_scroll_wc_up
503   0000              	GLOBAL _zx_scroll_up_pix_callee
504   0000              	GLOBAL _zx_scroll_up_pix
505   0000              	GLOBAL _zx_scroll_up_attr_callee
506   0000              	GLOBAL _zx_scroll_up_attr
507   0000              	GLOBAL _zx_scroll_up_callee
508   0000              	GLOBAL _zx_scroll_up
509   0000              	GLOBAL _zx_cls_wc_pix_callee
510   0000              	GLOBAL _zx_cls_wc_pix
511   0000              	GLOBAL _zx_cls_wc_attr_callee
512   0000              	GLOBAL _zx_cls_wc_attr
513   0000              	GLOBAL _zx_cls_wc_callee
514   0000              	GLOBAL _zx_cls_wc
515   0000              	GLOBAL _zx_cls_pix_fastcall
516   0000              	GLOBAL _zx_cls_pix
517   0000              	GLOBAL _zx_cls_attr_fastcall
518   0000              	GLOBAL _zx_cls_attr
519   0000              	GLOBAL _zx_cls_fastcall
520   0000              	GLOBAL _zx_cls
521   0000              	GLOBAL _zx_border_fastcall
522   0000              	GLOBAL _zx_border
523   0000              	GLOBAL _spr_colision_b2
524   0000              	GLOBAL _spr_colision_b
525   0000              	GLOBAL _spr_unflatten
526   0000              	GLOBAL _spr_flatten
527   0000              	GLOBAL _spr_btile_paint_back
528   0000              	GLOBAL _spr_bullet_explode
529   0000              	GLOBAL _spr_init_effects
530   0000              	GLOBAL _spr_turn_horizontal
531   0000              	GLOBAL _spr_bullets_play
532   0000              	GLOBAL _spr_play_anim
533   0000              	GLOBAL _spr_add_anim
534   0000              	GLOBAL _spr_clear_scr
535   0000              	GLOBAL _spr_page_map
536   0000              	GLOBAL _spr_page_down
537   0000              	GLOBAL _spr_page_up
538   0000              	GLOBAL _spr_page_right
539   0000              	GLOBAL _spr_page_left
540   0000              	GLOBAL _spr_tile_paint
541   0000              	GLOBAL _spr_draw_index
542   0000              	GLOBAL _spr_brick_anim
543   0000              	GLOBAL _spr_back_repaint
544   0000              	GLOBAL _spr_tile
545   0000              	GLOBAL _spr_destroy
546   0000              	GLOBAL _spr_tile_dir
547   0000              	GLOBAL _spr_redraw
548   0000              	GLOBAL _spr_move_left
549   0000              	GLOBAL _spr_move_right
550   0000              	GLOBAL _spr_move_horizontal
551   0000              	GLOBAL _spr_move_down
552   0000              	GLOBAL _spr_move_up
553   0000              	GLOBAL _spr_set_right
554   0000              	GLOBAL _spr_set_left
555   0000              	GLOBAL _spr_set_down
556   0000              	GLOBAL _spr_set_up
557   0000              	GLOBAL _spr_calc_index
558   0000              	GLOBAL _spr_chktime
559   0000              	GLOBAL _menu_define_key
560   0000              	GLOBAL _menu_redefine
561   0000              	GLOBAL _menu_main_print
562   0000              	GLOBAL _menu_main
563   0000              	GLOBAL _game_match_back
564   0000              	GLOBAL _game_attribs
565   0000              	GLOBAL _game_boss_clear
566   0000              	GLOBAL _game_boss_kill
567   0000              	GLOBAL _game_obj_clear
568   0000              	GLOBAL _game_obj_chk
569   0000              	GLOBAL _game_obj_set
570   0000              	GLOBAL _game_shoot_fire_boss
571   0000              	GLOBAL _game_shoot_fire
572   0000              	GLOBAL _game_add_enemy
573   0000              	GLOBAL _game_print_header
574   0000              	GLOBAL _game_check_time
575   0000              	GLOBAL _game_rotate_attrib_osd
576   0000              	GLOBAL _game_rotate_attrib
577   0000              	GLOBAL _game_colour_message
578   0000              	GLOBAL _game_paint_attrib
579   0000              	GLOBAL _game_print_score
580   0000              	GLOBAL _game_check_cell
581   0000              	GLOBAL _game_check_map
582   0000              	GLOBAL _game_loop
583   0000              	GLOBAL _game_round_init
584   0000              	GLOBAL _game_set_checkpoint
585   0000              	GLOBAL _game_start_timer
586   0000              	GLOBAL _game_update_stats
587   0000              	GLOBAL _game_print_footer
588   0000              	GLOBAL _game_fill_row
589   0000              	GLOBAL _game_fps
590   0000              	GLOBAL _game_respawn
591   0000              	GLOBAL _game_draw_screen
592   0000              	GLOBAL _boss_draw
593   0000              	GLOBAL _boss_turn
594   0000              	GLOBAL _enemy_avoid_dead
595   0000              	GLOBAL _enemy_avoid_fall
596   0000              	GLOBAL _enemy_kill
597   0000              	GLOBAL _enemy_respawn
598   0000              	GLOBAL _enemy_init
599   0000              	GLOBAL _enemy_move
600   0000              	GLOBAL _enemy_turn
601   0000              	GLOBAL _enemy_static
602   0000              	GLOBAL _enemy_walk
603   0000              	GLOBAL _enemy_horizontal
604   0000              	GLOBAL _enemy_vertical
605   0000              	GLOBAL _ay_reset
606   0000              	GLOBAL _ay_song_stop
607   0000              	GLOBAL _ay_song_play
608   0000              	GLOBAL _ay_fx_stop
609   0000              	GLOBAL _ay_fx_play
610   0000              	GLOBAL _ay_is_playing
611   0000              	GLOBAL _test_func
612   0000              	GLOBAL _test_proc
613   0000              	GLOBAL _in_mouse_kempston_wheel_delta
614   0000              	GLOBAL _in_mouse_kempston_wheel
615   0000              	GLOBAL _in_mouse_kempston_callee
616   0000              	GLOBAL _in_mouse_kempston
617   0000              	GLOBAL _in_mouse_kempston_setpos_callee
618   0000              	GLOBAL _in_mouse_kempston_setpos
619   0000              	GLOBAL _in_mouse_kempston_reset
620   0000              	GLOBAL _in_mouse_kempston_init
621   0000              	GLOBAL _in_mouse_amx_wheel_delta
622   0000              	GLOBAL _in_mouse_amx_wheel
623   0000              	GLOBAL _in_mouse_amx_callee
624   0000              	GLOBAL _in_mouse_amx
625   0000              	GLOBAL _in_mouse_amx_setpos_callee
626   0000              	GLOBAL _in_mouse_amx_setpos
627   0000              	GLOBAL _in_mouse_amx_reset
628   0000              	GLOBAL _in_mouse_amx_init_callee
629   0000              	GLOBAL _in_mouse_amx_init
630   0000              	GLOBAL _in_stick_sinclair2
631   0000              	GLOBAL _in_stick_sinclair1
632   0000              	GLOBAL _in_stick_kempston
633   0000              	GLOBAL _in_stick_fuller
634   0000              	GLOBAL _in_stick_cursor
635   0000              	GLOBAL _in_stick_keyboard_fastcall
636   0000              	GLOBAL _in_stick_keyboard
637   0000              	GLOBAL _in_wait_nokey
638   0000              	GLOBAL _in_wait_key
639   0000              	GLOBAL _in_test_key
640   0000              	GLOBAL _in_pause_fastcall
641   0000              	GLOBAL _in_pause
642   0000              	GLOBAL _in_key_scancode_fastcall
643   0000              	GLOBAL _in_key_scancode
644   0000              	GLOBAL _in_key_pressed_fastcall
645   0000              	GLOBAL _in_key_pressed
646   0000              	GLOBAL _in_inkey
647   0000              	GLOBAL _NIRVANAP_CHAR_TABLE
648   0000              	GLOBAL _NIRVANAP_WIDE_IMAGES
649   0000              	GLOBAL _NIRVANAP_TILE_IMAGES
650   0000              	GLOBAL _NIRVANAP_HOLE
651   0000              	GLOBAL _NIRVANAP_ISR_HOOK
652   0000              	GLOBAL _scan_map
653   0000              	GLOBAL _key_map
654   0000              	GLOBAL _player_lvl_table
655   0000              	GLOBAL _stp_row
656   0000              	GLOBAL _stp_col
657   0000              	GLOBAL _stp_tile
658   0000              	GLOBAL _map_paper_last_a
659   0000              	GLOBAL _map_paper_last
660   0000              	GLOBAL _map_paper_clr
661   0000              	GLOBAL _map_paper
662   0000              	GLOBAL _draw_count
663   0000              	GLOBAL _g_player_hit_right
664   0000              	GLOBAL _g_player_hit_left
665   0000              	GLOBAL _bullet_count
666   0000              	GLOBAL _spr_hack
667   0000              	GLOBAL _boss_stat
668   0000              	GLOBAL _boss_time_fire
669   0000              	GLOBAL _boss_time
670   0000              	GLOBAL _boss_tile
671   0000              	GLOBAL _boss_inc
672   0000              	GLOBAL _boss_col
673   0000              	GLOBAL _boss_lin
674   0000              	GLOBAL _bullet
675   0000              	GLOBAL _bullet_vel
676   0000              	GLOBAL _bullet_frames
677   0000              	GLOBAL _bullet_colint
678   0000              	GLOBAL _bullet_dir
679   0000              	GLOBAL _bullet_tile
680   0000              	GLOBAL _bullet_col
681   0000              	GLOBAL _bullet_lin
682   0000              	GLOBAL _bullet_col0
683   0000              	GLOBAL _bullet_lin0
684   0000              	GLOBAL _bullet_max
685   0000              	GLOBAL _bullet_class
686   0000              	GLOBAL _mush_class
687   0000              	GLOBAL _mush_index
688   0000              	GLOBAL _anim_count
689   0000              	GLOBAL _anim_respanwn
690   0000              	GLOBAL _anim_loop
691   0000              	GLOBAL _anim_end
692   0000              	GLOBAL _anim_int
693   0000              	GLOBAL _anim_tile
694   0000              	GLOBAL _anim_col
695   0000              	GLOBAL _anim_lin
696   0000              	GLOBAL _map_heigth
697   0000              	GLOBAL _map_width
698   0000              	GLOBAL _scr_curr
699   0000              	GLOBAL _sprite_kind
700   0000              	GLOBAL _scr_obj1
701   0000              	GLOBAL _scr_obj0
702   0000              	GLOBAL _scr_map
703   0000              	GLOBAL _sprite_speed_alt
704   0000              	GLOBAL _spr_init
705   0000              	GLOBAL _spr_map_tile
706   0000              	GLOBAL _sprite_frames
707   0000              	GLOBAL _sprite_speed
708   0000              	GLOBAL _screen_ink
709   0000              	GLOBAL _screen_paper
710   0000              	GLOBAL _player_onstair
711   0000              	GLOBAL _game_start_scr
712   0000              	GLOBAL _game_respawn_tile
713   0000              	GLOBAL _game_respawn_index
714   0000              	GLOBAL _game_respawn_time
715   0000              	GLOBAL _game_score_top
716   0000              	GLOBAL _player_coins
717   0000              	GLOBAL _player_lives
718   0000              	GLOBAL _game_over
719   0000              	GLOBAL _game_sound
720   0000              	GLOBAL _game_inf_lives
721   0000              	GLOBAL _game_inmune
722   0000              	GLOBAL _sprite_curr_index
723   0000              	GLOBAL _spr_count
724   0000              	GLOBAL _bullet_time
725   0000              	GLOBAL _anim_time
726   0000              	GLOBAL _frame_time
727   0000              	GLOBAL _curr_time
728   0000              	GLOBAL _s_state
729   0000              	GLOBAL _attrib_osd
730   0000              	GLOBAL _attrib_hl
731   0000              	GLOBAL _attrib
732   0000              	GLOBAL _zx_val_asm
733   0000              	GLOBAL _enemies
734   0000              	GLOBAL _tmp_ui
735   0000              	GLOBAL _tmp_sc
736   0000              	GLOBAL _tmp_uc
737   0000              	GLOBAL _tmp1
738   0000              	GLOBAL _tmp0
739   0000              	GLOBAL _tmp
740   0000              	GLOBAL _index1
741   0000              	GLOBAL _index0
742   0000              	GLOBAL _loop_count
743   0000              	GLOBAL _s_class
744   0000              	GLOBAL _s_col1
745   0000              	GLOBAL _s_col0
746   0000              	GLOBAL _s_lin1
747   0000              	GLOBAL _s_lin0
748   0000              	GLOBAL _s_tile1
749   0000              	GLOBAL _s_tile0
750   0000              	GLOBAL _player_brick_time
751   0000              	GLOBAL _player_hit_count
752   0000              	GLOBAL _game_show_fps
753   0000              	GLOBAL _sprite_horizontal_check
754   0000              	GLOBAL _sprite_on_air
755   0000              	GLOBAL _sprite
756   0000              	GLOBAL _fps
757   0000              	GLOBAL _game_2buttons
758   0000              	GLOBAL _game_respawn_curr_time
759   0000              	GLOBAL _game_worldup
760   0000              	GLOBAL _game_mush_count
761   0000              	GLOBAL _game_boss_fix
762   0000              	GLOBAL _game_boss_hit
763   0000              	GLOBAL _game_boss_alive
764   0000              	GLOBAL _game_boss
765   0000              	GLOBAL _game_world
766   0000              	GLOBAL _game_gravity
767   0000              	GLOBAL _player_onfire
768   0000              	GLOBAL _player_anim_stair
769   0000              	GLOBAL _player_hit_time
770   0000              	GLOBAL _game_checkpoint_scr
771   0000              	GLOBAL _game_checkpoint_lin
772   0000              	GLOBAL _game_checkpoint_col
773   0000              	GLOBAL _player_lin_scr
774   0000              	GLOBAL _player_col_scr
775   0000              	GLOBAL _player_lvl
776   0000              	GLOBAL _player_int
777   0000              	GLOBAL _player_str
778   0000              	GLOBAL _player_max_vita
779   0000              	GLOBAL _player_max_mana
780   0000              	GLOBAL _player_vita
781   0000              	GLOBAL _player_mana
782   0000              	GLOBAL _player_keys
783   0000              	GLOBAL _player_vel_inc
784   0000              	GLOBAL _player_vel_y1
785   0000              	GLOBAL _player_vel_y0
786   0000              	GLOBAL _player_vel_y
787   0000              	GLOBAL _player_vel_x
788   0000              	GLOBAL _player_score
789   0000              	GLOBAL _last_time
790   0000              	GLOBAL _player_slide
791   0000              	GLOBAL _spr_timer
792   0000              	GLOBAL _jump_lin
793   0000              	GLOBAL _player_hit_col
794   0000              	GLOBAL _player_hit_lin
795   0000              	GLOBAL _colint
796   0000              	GLOBAL _col
797   0000              	GLOBAL _lin
798   0000              	GLOBAL _tile
799   0000              	GLOBAL _state_a
800   0000              	GLOBAL _state
801   0000              	GLOBAL _class
802   0000              	GLOBAL _tbuffer
803   0000              	GLOBAL _dirs_alt
804   0000              	GLOBAL _dirs
805   0000              	GLOBAL _k2
806   0000              	GLOBAL _k1
807   0000              	GLOBAL _joyfunc2
808   0000              	GLOBAL _joyfunc1
809   0000              	GLOBAL _btiles
810   0000              	GLOBAL _spec128
811   0000              	GLOBAL _GLOBAL_ZX_PORT_7FFD
812   0000              	GLOBAL _GLOBAL_ZX_PORT_1FFD
813   0000              	GLOBAL _GLOBAL_ZX_PORT_FE
814   0000              	GLOBAL _ay_song_06_ciel
815   0000              	GLOBAL _ay_song_04_sunflower
816   0000              	GLOBAL _ay_song_04_lotr_level_start
817   0000              	GLOBAL _ay_song_04_lotr_level_complete
818   0000              	GLOBAL _ay_song_04_lotr_lose_a_life
819   0000              	GLOBAL _ay_song_04_lotr
820   0000              	GLOBAL _ay_fx_06_explosion1
821   0000              	GLOBAL _ay_fx_06_efecto
822   0000              	GLOBAL _ay_fx_06_disparo2
823   0000              	GLOBAL _ay_fx_06_disparo1
824   0000              	GLOBAL _ay_fx_04_sin_mana
825   0000              	GLOBAL _ay_fx_04_salto
826   0000              	GLOBAL _ay_fx_04_pierto_abierta
827   0000              	GLOBAL _ay_fx_04_magia1
828   0000              	GLOBAL _ay_fx_04_golpe
829   0000              	GLOBAL _ay_fx_04_explosion
830   0000              	GLOBAL _ay_fx_04_dano_por_toque
831   0000              	GLOBAL _ay_fx_04_coin
832   0000              	GLOBAL _world0_h
833   0000              	GLOBAL _world0_w
834   0000              	GLOBAL _world0
835   0000              	GLOBAL _paper0
836   0000              	GLOBAL _lenght0
837   0000              	GLOBAL _start_scr0
838   0000              ;--------------------------------------------------------
839   0000              ; special function registers
840   0000              ;--------------------------------------------------------
841   0000              defc _IO_FE	=	0x00fe
842   0000              defc _IO_1FFD	=	0x1ffd
843   0000              defc _IO_7FFD	=	0x7ffd
844   0000              ;--------------------------------------------------------
845   0000              ; ram data
846   0000              ;--------------------------------------------------------
847   0000              	SECTION bss_compiler
848   0000              ;--------------------------------------------------------
849   0000              ; ram data
850   0000              ;--------------------------------------------------------
851   0000              
852   0000              IF 0
853   0000              
854   0000              ; .area _INITIALIZED removed by z88dk
855   0000              
856   0000              
857   0000              ENDIF
858   0000              
859   0000              ;--------------------------------------------------------
860   0000              ; absolute external ram data
861   0000              ;--------------------------------------------------------
862   0000              	SECTION IGNORE
863   0000              ;--------------------------------------------------------
864   0000              ; global & static initialisations
865   0000              ;--------------------------------------------------------
866   0000              	SECTION code_crt_init
867   0000              ;--------------------------------------------------------
868   0000              ; Home
869   0000              ;--------------------------------------------------------
870   0000              	SECTION IGNORE
871   0000              ;--------------------------------------------------------
872   0000              ; code
873   0000              ;--------------------------------------------------------
874   0000              	SECTION code_compiler
875   0000              ;	---------------------------------
876   0000              ; Function player_init
877   0000              ; ---------------------------------
878   0000              _player_init:
879   0000  CD 00 00    	call	___sdcc_enter_ix
880   0003  21 07 00    	ld	hl, +(_class + 0x0007)
881   0006  36 00       	ld	(hl),0x00
882   0008  21 07 00    	ld	hl, +(_tile + 0x0007)
883   000B  DD 7E 06    	ld	a,(ix+6)
884   000E  77          	ld	(hl), a
885   000F  21 07 00    	ld	hl, +(_lin + 0x0007)
886   0012  DD 7E 04    	ld	a,(ix+4)
887   0015  77          	ld	(hl), a
888   0016  21 07 00    	ld	hl, +(_col + 0x0007)
889   0019  DD 7E 05    	ld	a,(ix+5)
890   001C  77          	ld	(hl), a
891   001D  21 07 00    	ld	hl, +(_colint + 0x0007)
892   0020  36 00       	ld	(hl),0x00
893   0022  21 07 00    	ld	hl, +(_state + 0x0007)
894   0025  36 00       	ld	(hl),0x00
895   0027  01 07 00    	ld	bc,_state_a+7
896   002A  AF          	xor	a, a
897   002B  02          	ld	(bc), a
898   002C  21 07 00    	ld	hl, +(_jump_lin + 0x0007)
899   002F  DD 7E 04    	ld	a,(ix+4)
900   0032  77          	ld	(hl), a
901   0033  ED 5B 00 00 	ld	de,(_curr_time)
902   0037  ED 53 0E 00 	ld	(_last_time + 0x000e),de
903   003B  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
904   003E  36 00       	ld	(hl),0x00
905   0040  0A          	ld	a, (bc)
906   0041  F6 11       	or	a,+(0x01|0x10)
907   0043  02          	ld	(bc),a
908   0044  21 00 00    	ld	hl,_player_hit_col
909   0047  36 00       	ld	(hl),0x00
910   0049  21 00 00    	ld	hl,_player_hit_lin
911   004C  36 00       	ld	(hl),0x00
912   004E  21 00 00    	ld	hl,_player_slide
913   0051  36 00       	ld	(hl),0x00
914   0053  21 00 00    	ld	hl,_player_onstair
915   0056  36 00       	ld	(hl),0x00
916   0058  21 00 00    	ld	hl,_player_onfire
917   005B  36 00       	ld	(hl),0x00
918   005D  DD 66 05    	ld	h,(ix+5)
919   0060  DD 6E 04    	ld	l,(ix+4)
920   0063  E5          	push	hl
921   0064  DD 56 06    	ld	d,(ix+6)
922   0067  1E 07       	ld	e,0x07
923   0069  D5          	push	de
924   006A  CD 00 00    	call	_NIRVANAP_spriteT_callee
925   006D  DD E1       	pop	ix
926   006F  C9          	ret
927   0070              	SECTION code_compiler
928   0070              ;	---------------------------------
929   0070              ; Function player_turn
930   0070              ; ---------------------------------
931   0070              _player_turn:
932   0070  21 00 00    	ld	hl,_sprite
933   0073  CD 00 00    	call	_spr_chktime
934   0076  7D          	ld	a, l
935   0077  B7          	or	a, a
936   0078  C8          	ret	Z
937   0079  21 00 00    	ld	hl,_k1
938   007C  E5          	push	hl
939   007D  2A 00 00    	ld	hl,(_joyfunc1)
940   0080  CD 00 00    	call	___sdcc_call_hl
941   0083  F1          	pop	af
942   0084  7D          	ld	a,l
943   0085  32 00 00    	ld	(_dirs),a
944   0088  21 00 00    	ld	hl,_k2
945   008B  E5          	push	hl
946   008C  2A 00 00    	ld	hl,(_joyfunc2)
947   008F  CD 00 00    	call	___sdcc_call_hl
948   0092  F1          	pop	af
949   0093  7D          	ld	a,l
950   0094  32 00 00    	ld	(_dirs_alt),a
951   0097  21 00 00    	ld	hl,_s_class
952   009A  36 00       	ld	(hl),0x00
953   009C  CD A2 00    	call	_player_move
954   009F  C3 C8 03    	jp  _player_collision
955   00A2              	SECTION code_compiler
956   00A2              ;	---------------------------------
957   00A2              ; Function player_move
958   00A2              ; ---------------------------------
959   00A2              _player_move:
960   00A2  3A 07 00    	ld	a,(_lin + 0x0007)
961   00A5  32 00 00    	ld	(_s_lin0),a
962   00A8  3A 07 00    	ld	a,(_col + 0x0007)
963   00AB  32 00 00    	ld	(_s_col0),a
964   00AE  3A 07 00    	ld	a,(_state + 0x0007)
965   00B1  32 00 00    	ld	(_s_state),a
966   00B4  21 00 00    	ld	hl,_s_state
967   00B7  CB 46       	bit	0, (hl)
968   00B9  20 07       	jr	NZ,l_player_move_00113
969   00BB  21 00 00    	ld	hl,_s_state
970   00BE  CB 4E       	bit	1, (hl)
971   00C0  28 43       	jr	Z,l_player_move_00114
972   00C2              l_player_move_00113:
973   00C2  CD 29 03    	call	_player_fire
974   00C5  3A 00 00    	ld	a,(_player_vel_y)
975   00C8  21 00 00    	ld	hl,_player_vel_y1
976   00CB  96          	sub	a, (hl)
977   00CC  E2 D1 00    	jp	PO, l_player_move_00162
978   00CF  EE 80       	xor	a,0x80
979   00D1              l_player_move_00162:
980   00D1  F2 EE 00    	jp	P, l_player_move_00106
981   00D4  21 00 00    	ld	hl,_dirs
982   00D7  CB 56       	bit	2, (hl)
983   00D9  28 06       	jr	Z,l_player_move_00102
984   00DB  21 00 00    	ld	hl,_s_state
985   00DE  CD 00 00    	call	_spr_set_left
986   00E1              l_player_move_00102:
987   00E1  21 00 00    	ld	hl,_dirs
988   00E4  CB 4E       	bit	1, (hl)
989   00E6  28 06       	jr	Z,l_player_move_00106
990   00E8  21 00 00    	ld	hl,_s_state
991   00EB  CD 00 00    	call	_spr_set_right
992   00EE              l_player_move_00106:
993   00EE  CD A0 0E    	call	_player_move_jump
994   00F1  7D          	ld	a, l
995   00F2  B7          	or	a, a
996   00F3  28 1C       	jr	Z,l_player_move_00115
997   00F5  3A 00 00    	ld	a,(_player_onstair)
998   00F8  B7          	or	a, a
999   00F9  20 16       	jr	NZ,l_player_move_00115
1000  00FB  21 60 08    	ld	hl,0x0860
1001  00FE  E5          	push	hl
1002  00FF  CD 36 07    	call	_player_tile
1003  0102  F1          	pop	af
1004  0103  18 0C       	jr	l_player_move_00115
1005  0105              l_player_move_00114:
1006  0105  CD 77 01    	call	_player_move_input
1007  0108  3A 00 00    	ld	a,(_player_onstair)
1008  010B  B7          	or	a, a
1009  010C  20 03       	jr	NZ,l_player_move_00115
1010  010E  CD 20 0D    	call	_player_check_floor
1011  0111              l_player_move_00115:
1012  0111  CD 00 00    	call	_spr_redraw
1013  0114  7D          	ld	a, l
1014  0115  B7          	or	a, a
1015  0116  28 03       	jr	Z,l_player_move_00118
1016  0118  CD 57 07    	call	_player_check_map
1017  011B              l_player_move_00118:
1018  011B  3A 00 00    	ld	a,(_player_hit_lin)
1019  011E  B7          	or	a, a
1020  011F  28 03       	jr	Z,l_player_move_00120
1021  0121  CD 87 0C    	call	_player_hit_platform_clear
1022  0124              l_player_move_00120:
1023  0124  3A 00 00    	ld	a,(_s_state)
1024  0127  32 07 00    	ld	((_state + 0x0007)),a
1025  012A  2E 00       	ld	l,0x00
1026  012C  C9          	ret
1027  012D              	SECTION code_compiler
1028  012D              ;	---------------------------------
1029  012D              ; Function player_check_input
1030  012D              ; ---------------------------------
1031  012D              _player_check_input:
1032  012D  21 00 00    	ld	hl,_dirs
1033  0130  CB 56       	bit	2, (hl)
1034  0132  28 0C       	jr	Z,l_player_check_input_00102
1035  0134  21 00 00    	ld	hl,_dirs
1036  0137  CB 5E       	bit	3, (hl)
1037  0139  28 05       	jr	Z,l_player_check_input_00102
1038  013B  21 00 00    	ld	hl,_dirs
1039  013E  36 00       	ld	(hl),0x00
1040  0140              l_player_check_input_00102:
1041  0140  21 00 00    	ld	hl,_dirs
1042  0143  7E          	ld	a, (hl)
1043  0144  CB 07       	rlc	a
1044  0146  E6 01       	and	a,0x01
1045  0148  CB 47       	bit	0, a
1046  014A  20 28       	jr	NZ,l_player_check_input_00107
1047  014C  CB 56       	bit	2, (hl)
1048  014E  20 24       	jr	NZ,l_player_check_input_00107
1049  0150  21 00 00    	ld	hl,_dirs
1050  0153  CB 5E       	bit	3, (hl)
1051  0155  20 1D       	jr	NZ,l_player_check_input_00107
1052  0157  21 00 00    	ld	hl,_dirs
1053  015A  CB 46       	bit	0, (hl)
1054  015C  20 16       	jr	NZ,l_player_check_input_00107
1055  015E  21 00 00    	ld	hl,_dirs
1056  0161  CB 4E       	bit	1, (hl)
1057  0163  20 0F       	jr	NZ,l_player_check_input_00107
1058  0165  3A 00 00    	ld	a,(_dirs_alt)
1059  0168  CB 07       	rlc	a
1060  016A  E6 01       	and	a,0x01
1061  016C  CB 47       	bit	0, a
1062  016E  20 04       	jr	NZ,l_player_check_input_00107
1063  0170  2E 00       	ld	l,0x00
1064  0172  18 02       	jr	l_player_check_input_00108
1065  0174              l_player_check_input_00107:
1066  0174  2E 01       	ld	l,0x01
1067  0176              l_player_check_input_00108:
1068  0176  C9          	ret
1069  0177              	SECTION code_compiler
1070  0177              ;	---------------------------------
1071  0177              ; Function player_move_input
1072  0177              ; ---------------------------------
1073  0177              _player_move_input:
1074  0177  CD 2D 01    	call	_player_check_input
1075  017A  7D          	ld	a, l
1076  017B  B7          	or	a, a
1077  017C  CA E9 02    	jp	Z, l_player_move_input_00147
1078  017F  CD 29 03    	call	_player_fire
1079  0182  7D          	ld	a, l
1080  0183  B7          	or	a, a
1081  0184  28 0A       	jr	Z,l_player_move_input_00102
1082  0186  21 00 00    	ld	hl,_dirs
1083  0189  36 00       	ld	(hl),0x00
1084  018B  2E 00       	ld	l,0x00
1085  018D  C3 0F 03    	jp	l_player_move_input_00149
1086  0190              l_player_move_input_00102:
1087  0190  3A 00 00    	ld	a,(_game_2buttons)
1088  0193  B7          	or	a, a
1089  0194  28 07       	jr	Z,l_player_move_input_00104
1090  0196  3A 00 00    	ld	a,(_dirs)
1091  0199  E6 80       	and	a,0x80
1092  019B  18 16       	jr	l_player_move_input_00105
1093  019D              l_player_move_input_00104:
1094  019D  21 00 00    	ld	hl,_dirs
1095  01A0  7E          	ld	a, (hl)
1096  01A1  CB 07       	rlc	a
1097  01A3  E6 01       	and	a,0x01
1098  01A5  CB 47       	bit	0, a
1099  01A7  28 04       	jr	Z,l_player_move_input_00151
1100  01A9  CB 46       	bit	0, (hl)
1101  01AB  20 04       	jr	NZ,l_player_move_input_00152
1102  01AD              l_player_move_input_00151:
1103  01AD  3E 00       	ld	a,0x00
1104  01AF  18 02       	jr	l_player_move_input_00153
1105  01B1              l_player_move_input_00152:
1106  01B1  3E 01       	ld	a,0x01
1107  01B3              l_player_move_input_00153:
1108  01B3              l_player_move_input_00105:
1109  01B3  B7          	or	a, a
1110  01B4  28 44       	jr	Z,l_player_move_input_00107
1111  01B6  21 00 00    	ld	hl,_player_vel_inc
1112  01B9  36 01       	ld	(hl),0x01
1113  01BB  21 00 00    	ld	hl,_ay_fx_04_salto
1114  01BE  E5          	push	hl
1115  01BF  21 01 04    	ld	hl,0x0401
1116  01C2  E5          	push	hl
1117  01C3  CD 00 00    	call	_ay_song_play
1118  01C6  21 00 00    	ld	hl,_player_onstair
1119  01C9  36 00       	ld	(hl),0x00
1120  01CB  21 00 00    	ld	hl,_s_state
1121  01CE  CD 00 00    	call	_spr_set_up
1122  01D1  3A 07 00    	ld	a,(_lin + 0x0007)
1123  01D4  32 07 00    	ld	(_jump_lin+7),a
1124  01D7  3A 00 00    	ld	a,(_s_state)
1125  01DA  32 07 00    	ld	((_state + 0x0007)),a
1126  01DD  21 64 08    	ld	hl,0x0864
1127  01E0  E5          	push	hl
1128  01E1  CD 36 07    	call	_player_tile
1129  01E4  F1          	pop	af
1130  01E5  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
1131  01E8  36 02       	ld	(hl),0x02
1132  01EA  21 00 00    	ld	hl,_player_slide
1133  01ED  36 00       	ld	(hl),0x00
1134  01EF  3A 00 00    	ld	a,(_player_vel_y0)
1135  01F2  32 00 00    	ld	(_player_vel_y),a
1136  01F5  2E 01       	ld	l,0x01
1137  01F7  C3 0F 03    	jp	l_player_move_input_00149
1138  01FA              l_player_move_input_00107:
1139  01FA  21 00 00    	ld	hl,_dirs
1140  01FD  CB 5E       	bit	3, (hl)
1141  01FF  28 20       	jr	Z,l_player_move_input_00111
1142  0201  CD 10 03    	call	_player_fix_walk_lin
1143  0204  21 00 00    	ld	hl,_s_state
1144  0207  CD 00 00    	call	_spr_set_right
1145  020A  01 07 00    	ld	bc,_state_a+7
1146  020D  0A          	ld	a, (bc)
1147  020E  F6 10       	or	a,0x10
1148  0210  E6 F7       	and	a,0xf7
1149  0212  02          	ld	(bc),a
1150  0213  3A 00 00    	ld	a,(_player_onstair)
1151  0216  B7          	or	a, a
1152  0217  28 05       	jr	Z,l_player_move_input_00109
1153  0219  2E 00       	ld	l,0x00
1154  021B  CD 62 06    	call	_player_check_stairs
1155  021E              l_player_move_input_00109:
1156  021E  CD 00 00    	call	_spr_move_horizontal
1157  0221              l_player_move_input_00111:
1158  0221  21 00 00    	ld	hl,_dirs
1159  0224  CB 56       	bit	2, (hl)
1160  0226  28 20       	jr	Z,l_player_move_input_00115
1161  0228  CD 10 03    	call	_player_fix_walk_lin
1162  022B  21 00 00    	ld	hl,_s_state
1163  022E  CD 00 00    	call	_spr_set_left
1164  0231  01 07 00    	ld	bc,_state_a+7
1165  0234  0A          	ld	a, (bc)
1166  0235  F6 08       	or	a,0x08
1167  0237  E6 EF       	and	a,0xef
1168  0239  02          	ld	(bc),a
1169  023A  3A 00 00    	ld	a,(_player_onstair)
1170  023D  B7          	or	a, a
1171  023E  28 05       	jr	Z,l_player_move_input_00113
1172  0240  2E 00       	ld	l,0x00
1173  0242  CD 62 06    	call	_player_check_stairs
1174  0245              l_player_move_input_00113:
1175  0245  CD 00 00    	call	_spr_move_horizontal
1176  0248              l_player_move_input_00115:
1177  0248  21 00 00    	ld	hl,_dirs
1178  024B  CB 46       	bit	0, (hl)
1179  024D  28 39       	jr	Z,l_player_move_input_00127
1180  024F  2E 00       	ld	l,0x00
1181  0251  CD 62 06    	call	_player_check_stairs
1182  0254  3A 00 00    	ld	a,(_player_onstair)
1183  0257  B7          	or	a, a
1184  0258  20 10       	jr	NZ,l_player_move_input_00119
1185  025A  2E 01       	ld	l,0x01
1186  025C  CD 62 06    	call	_player_check_stairs
1187  025F  3A 00 00    	ld	a,(_player_onstair)
1188  0262  B7          	or	a, a
1189  0263  20 05       	jr	NZ,l_player_move_input_00119
1190  0265  2E FE       	ld	l,0xfe
1191  0267  CD B5 05    	call	_player_check_stairs_vertical
1192  026A              l_player_move_input_00119:
1193  026A  3A 00 00    	ld	a,(_player_onstair)
1194  026D  B7          	or	a, a
1195  026E  28 05       	jr	Z,l_player_move_input_00124
1196  0270  CD 00 00    	call	_spr_move_up
1197  0273  18 13       	jr	l_player_move_input_00127
1198  0275              l_player_move_input_00124:
1199  0275  21 00 00    	ld	hl,_dirs
1200  0278  CB 5E       	bit	3, (hl)
1201  027A  20 0C       	jr	NZ,l_player_move_input_00127
1202  027C  21 00 00    	ld	hl,_dirs
1203  027F  CB 56       	bit	2, (hl)
1204  0281  20 05       	jr	NZ,l_player_move_input_00127
1205  0283  2E 00       	ld	l,0x00
1206  0285  C3 0F 03    	jp	l_player_move_input_00149
1207  0288              l_player_move_input_00127:
1208  0288  21 00 00    	ld	hl,_dirs
1209  028B  CB 4E       	bit	1, (hl)
1210  028D  28 38       	jr	Z,l_player_move_input_00139
1211  028F  2E 00       	ld	l,0x00
1212  0291  CD 62 06    	call	_player_check_stairs
1213  0294  3A 00 00    	ld	a,(_player_onstair)
1214  0297  B7          	or	a, a
1215  0298  20 10       	jr	NZ,l_player_move_input_00131
1216  029A  2E 01       	ld	l,0x01
1217  029C  CD 62 06    	call	_player_check_stairs
1218  029F  3A 00 00    	ld	a,(_player_onstair)
1219  02A2  B7          	or	a, a
1220  02A3  20 05       	jr	NZ,l_player_move_input_00131
1221  02A5  2E 12       	ld	l,0x12
1222  02A7  CD B5 05    	call	_player_check_stairs_vertical
1223  02AA              l_player_move_input_00131:
1224  02AA  3A 00 00    	ld	a,(_player_onstair)
1225  02AD  B7          	or	a, a
1226  02AE  28 05       	jr	Z,l_player_move_input_00136
1227  02B0  CD 00 00    	call	_spr_move_down
1228  02B3  18 12       	jr	l_player_move_input_00139
1229  02B5              l_player_move_input_00136:
1230  02B5  21 00 00    	ld	hl,_dirs
1231  02B8  CB 5E       	bit	3, (hl)
1232  02BA  20 0B       	jr	NZ,l_player_move_input_00139
1233  02BC  21 00 00    	ld	hl,_dirs
1234  02BF  CB 56       	bit	2, (hl)
1235  02C1  20 04       	jr	NZ,l_player_move_input_00139
1236  02C3  2E 00       	ld	l,0x00
1237  02C5  18 48       	jr	l_player_move_input_00149
1238  02C7              l_player_move_input_00139:
1239  02C7  3A 00 00    	ld	a,(_s_state)
1240  02CA  32 07 00    	ld	((_state + 0x0007)),a
1241  02CD  3A 00 00    	ld	a,(_player_onstair)
1242  02D0  B7          	or	a, a
1243  02D1  28 0A       	jr	Z,l_player_move_input_00141
1244  02D3  21 72 00    	ld	hl,0x0072
1245  02D6  E5          	push	hl
1246  02D7  CD 36 07    	call	_player_tile
1247  02DA  F1          	pop	af
1248  02DB  18 08       	jr	l_player_move_input_00142
1249  02DD              l_player_move_input_00141:
1250  02DD  21 60 08    	ld	hl,0x0860
1251  02E0  E5          	push	hl
1252  02E1  CD 36 07    	call	_player_tile
1253  02E4  F1          	pop	af
1254  02E5              l_player_move_input_00142:
1255  02E5  2E 01       	ld	l,0x01
1256  02E7  18 26       	jr	l_player_move_input_00149
1257  02E9              l_player_move_input_00147:
1258  02E9  21 07 00    	ld	hl, +(_colint + 0x0007)
1259  02EC  36 00       	ld	(hl),0x00
1260  02EE  3A 00 00    	ld	a,(_player_onstair)
1261  02F1  B7          	or	a, a
1262  02F2  28 0A       	jr	Z,l_player_move_input_00144
1263  02F4  21 72 00    	ld	hl,0x0072
1264  02F7  E5          	push	hl
1265  02F8  CD 36 07    	call	_player_tile
1266  02FB  F1          	pop	af
1267  02FC  18 08       	jr	l_player_move_input_00145
1268  02FE              l_player_move_input_00144:
1269  02FE  21 70 01    	ld	hl,0x0170
1270  0301  E5          	push	hl
1271  0302  CD 36 07    	call	_player_tile
1272  0305  F1          	pop	af
1273  0306              l_player_move_input_00145:
1274  0306  21 00 00    	ld	hl,_s_state
1275  0309  7E          	ld	a,(hl)
1276  030A  E6 F3       	and	a,+(0xf7&0xfb)
1277  030C  77          	ld	(hl),a
1278  030D  2E 00       	ld	l,0x00
1279  030F              l_player_move_input_00149:
1280  030F  C9          	ret
1281  0310              	SECTION code_compiler
1282  0310              ;	---------------------------------
1283  0310              ; Function player_fix_walk_lin
1284  0310              ; ---------------------------------
1285  0310              _player_fix_walk_lin:
1286  0310  3A 00 00    	ld	a,(_player_onstair)
1287  0313  B7          	or	a, a
1288  0314  C0          	ret	NZ
1289  0315  01 07 00    	ld	bc,_lin+7
1290  0318  3A 00 00    	ld	a,(_s_lin0)
1291  031B  07          	rlca
1292  031C  07          	rlca
1293  031D  07          	rlca
1294  031E  07          	rlca
1295  031F  E6 0F       	and	a,0x0f
1296  0321  07          	rlca
1297  0322  07          	rlca
1298  0323  07          	rlca
1299  0324  07          	rlca
1300  0325  E6 F0       	and	a,0xf0
1301  0327  02          	ld	(bc), a
1302  0328  C9          	ret
1303  0329              	SECTION code_compiler
1304  0329              ;	---------------------------------
1305  0329              ; Function player_fire
1306  0329              ; ---------------------------------
1307  0329              _player_fire:
1308  0329  CD 00 00    	call	___sdcc_enter_ix
1309  032C  3B          	dec	sp
1310  032D  3A 00 00    	ld	a,(_game_2buttons)
1311  0330  B7          	or	a, a
1312  0331  28 0A       	jr	Z,l_player_fire_00102
1313  0333  3A 00 00    	ld	a,(_dirs_alt)
1314  0336  E6 80       	and	a,0x80
1315  0338  32 00 00    	ld	(_player_onfire),a
1316  033B  18 1A       	jr	l_player_fire_00103
1317  033D              l_player_fire_00102:
1318  033D  21 00 00    	ld	hl,_dirs
1319  0340  7E          	ld	a, (hl)
1320  0341  CB 07       	rlc	a
1321  0343  E6 01       	and	a,0x01
1322  0345  CB 47       	bit	0, a
1323  0347  28 04       	jr	Z,l_player_fire_00120
1324  0349  CB 46       	bit	0, (hl)
1325  034B  28 04       	jr	Z,l_player_fire_00121
1326  034D              l_player_fire_00120:
1327  034D  0E 00       	ld	c,0x00
1328  034F  18 02       	jr	l_player_fire_00122
1329  0351              l_player_fire_00121:
1330  0351  0E 01       	ld	c,0x01
1331  0353              l_player_fire_00122:
1332  0353  21 00 00    	ld	hl,_player_onfire
1333  0356  71          	ld	(hl), c
1334  0357              l_player_fire_00103:
1335  0357  3A 00 00    	ld	a,(_player_onfire)
1336  035A  B7          	or	a, a
1337  035B  28 65       	jr	Z,l_player_fire_00117
1338  035D  3A 07 00    	ld	a,(_tile + 0x0007)
1339  0360  FE 70       	cp	a,0x70
1340  0362  28 04       	jr	Z,l_player_fire_00104
1341  0364  D6 71       	sub	a,0x71
1342  0366  20 0D       	jr	NZ,l_player_fire_00105
1343  0368              l_player_fire_00104:
1344  0368  21 60 08    	ld	hl,0x0860
1345  036B  E5          	push	hl
1346  036C  CD 36 07    	call	_player_tile
1347  036F  F1          	pop	af
1348  0370  21 07 00    	ld	hl, +(_colint + 0x0007)
1349  0373  36 00       	ld	(hl),0x00
1350  0375              l_player_fire_00105:
1351  0375  21 00 00    	ld	hl,_player_mana
1352  0378  7E          	ld	a, (hl)
1353  0379  B7          	or	a, a
1354  037A  28 37       	jr	Z,l_player_fire_00113
1355  037C  3A 07 00    	ld	a,(_bullet_col + 0x0007)
1356  037F  3C          	inc	a
1357  0380  20 31       	jr	NZ,l_player_fire_00113
1358  0382  3E 05       	ld	a,0x05
1359  0384  96          	sub	a, (hl)
1360  0385  30 0F       	jr	NC,l_player_fire_00110
1361  0387  3A 00 00    	ld	a,(_game_inmune)
1362  038A  B7          	or	a, a
1363  038B  20 0E       	jr	NZ,l_player_fire_00111
1364  038D  21 00 00    	ld	hl,_player_mana
1365  0390  7E          	ld	a, (hl)
1366  0391  C6 FB       	add	a,0xfb
1367  0393  77          	ld	(hl), a
1368  0394  18 05       	jr	l_player_fire_00111
1369  0396              l_player_fire_00110:
1370  0396  21 00 00    	ld	hl,_player_mana
1371  0399  36 00       	ld	(hl),0x00
1372  039B              l_player_fire_00111:
1373  039B  CD 00 00    	call	_game_update_stats
1374  039E  21 00 00    	ld	hl,_ay_fx_06_disparo1
1375  03A1  E5          	push	hl
1376  03A2  21 01 06    	ld	hl,0x0601
1377  03A5  E5          	push	hl
1378  03A6  CD 00 00    	call	_ay_song_play
1379  03A9  21 07 78    	ld	hl,0x7807
1380  03AC  E5          	push	hl
1381  03AD  CD 00 00    	call	_game_shoot_fire
1382  03B0  F1          	pop	af
1383  03B1  18 0B       	jr	l_player_fire_00114
1384  03B3              l_player_fire_00113:
1385  03B3  21 00 00    	ld	hl,_ay_fx_04_sin_mana
1386  03B6  E5          	push	hl
1387  03B7  21 01 04    	ld	hl,0x0401
1388  03BA  E5          	push	hl
1389  03BB  CD 00 00    	call	_ay_song_play
1390  03BE              l_player_fire_00114:
1391  03BE  2E 01       	ld	l,0x01
1392  03C0  18 02       	jr	l_player_fire_00118
1393  03C2              l_player_fire_00117:
1394  03C2  2E 00       	ld	l,0x00
1395  03C4              l_player_fire_00118:
1396  03C4  33          	inc	sp
1397  03C5  DD E1       	pop	ix
1398  03C7  C9          	ret
1399  03C8              	SECTION code_compiler
1400  03C8              ;	---------------------------------
1401  03C8              ; Function player_collision
1402  03C8              ; ---------------------------------
1403  03C8              _player_collision:
1404  03C8  3E 19       	ld	a,0x19
1405  03CA  F5          	push	af
1406  03CB  33          	inc	sp
1407  03CC  21 00 00    	ld	hl,_player_hit_time
1408  03CF  E5          	push	hl
1409  03D0  CD 00 00    	call	_game_check_time
1410  03D3  F1          	pop	af
1411  03D4  33          	inc	sp
1412  03D5  7D          	ld	a, l
1413  03D6  B7          	or	a, a
1414  03D7  CA 61 05    	jp	Z, l_player_collision_00136
1415  03DA  21 00 00    	ld	hl,_sprite
1416  03DD  36 00       	ld	(hl),0x00
1417  03DF  3A 07 00    	ld	a,(_col + 7)
1418  03E2  32 00 00    	ld	(_s_col1),a
1419  03E5  3A 07 00    	ld	a,(_lin + 7)
1420  03E8  32 00 00    	ld	(_s_lin1),a
1421  03EB  C6 08       	add	a,0x08
1422  03ED  4F          	ld	c, a
1423  03EE  3A 00 00    	ld	a, (_s_col1)
1424  03F1  47          	ld	b,a
1425  03F2  C5          	push	bc
1426  03F3  CD 00 00    	call	_spr_calc_index
1427  03F6  F1          	pop	af
1428  03F7  4D          	ld	c, l
1429  03F8  21 00 00    	ld	hl,_sprite_curr_index
1430  03FB  71          	ld	(hl), c
1431  03FC  3E 00       	ld	a, +((_scr_map) & 0xFF)
1432  03FE  86          	add	a, (hl)
1433  03FF  4F          	ld	c, a
1434  0400  3E 00       	ld	a, +((_scr_map) / 256)
1435  0402  CE 00       	adc	a,0x00
1436  0404  47          	ld	b, a
1437  0405  0A          	ld	a, (bc)
1438  0406  4F          	ld	c,a
1439  0407  D6 15       	sub	a,0x15
1440  0409  20 1F       	jr	NZ,l_player_collision_00104
1441  040B  3A 00 00    	ld	a,(_game_checkpoint_scr)
1442  040E  21 00 00    	ld	hl,_scr_curr
1443  0411  96          	sub	a, (hl)
1444  0412  28 05       	jr	Z,l_player_collision_00102
1445  0414  2E 01       	ld	l,0x01
1446  0416  CD 00 00    	call	_zx_border_fastcall
1447  0419              l_player_collision_00102:
1448  0419  3A 00 00    	ld	a,(_s_col1)
1449  041C  32 00 00    	ld	(_player_col_scr),a
1450  041F  3A 00 00    	ld	a,(_s_lin1)
1451  0422  32 00 00    	ld	(_player_lin_scr),a
1452  0425  C5          	push	bc
1453  0426  CD 00 00    	call	_game_set_checkpoint
1454  0429  C1          	pop	bc
1455  042A              l_player_collision_00104:
1456  042A  3E 2F       	ld	a,0x2f
1457  042C  91          	sub	a, c
1458  042D  30 5F       	jr	NC,l_player_collision_00157
1459  042F  79          	ld	a,c
1460  0430  FE 3A       	cp	a,0x3a
1461  0432  30 5A       	jr	NC,l_player_collision_00157
1462  0434  D6 39       	sub	a,0x39
1463  0436  20 32       	jr	NZ,l_player_collision_00111
1464  0438  21 00 00    	ld	hl,_ay_song_04_lotr_level_complete
1465  043B  E5          	push	hl
1466  043C  21 01 04    	ld	hl,0x0401
1467  043F  E5          	push	hl
1468  0440  CD 00 00    	call	_ay_song_play
1469  0443  21 00 00    	ld	hl,___str_0
1470  0446  E5          	push	hl
1471  0447  21 0C 08    	ld	hl,0x080c
1472  044A  E5          	push	hl
1473  044B  CD 00 00    	call	_zx_print_str
1474  044E  AF          	xor	a, a
1475  044F  F5          	push	af
1476  0450  33          	inc	sp
1477  0451  21 E8 03    	ld	hl,0x03e8
1478  0454  E5          	push	hl
1479  0455  21 08 17    	ld	hl,0x1708
1480  0458  E5          	push	hl
1481  0459  3E 0C       	ld	a,0x0c
1482  045B  F5          	push	af
1483  045C  33          	inc	sp
1484  045D  CD 00 00    	call	_game_colour_message
1485  0460  F1          	pop	af
1486  0461  F1          	pop	af
1487  0462  F1          	pop	af
1488  0463  21 00 00    	ld	hl,_game_worldup
1489  0466  36 01       	ld	(hl),0x01
1490  0468  18 24       	jr	l_player_collision_00157
1491  046A              l_player_collision_00111:
1492  046A  21 00 00    	ld	hl,_game_inmune
1493  046D  7E          	ld	a, (hl)
1494  046E  B7          	or	a,a
1495  046F  20 13       	jr	NZ,l_player_collision_00106
1496  0471  B6          	or	a,(hl)
1497  0472  20 10       	jr	NZ,l_player_collision_00106
1498  0474  3E 82       	ld	a,0x82
1499  0476  21 00 00    	ld	hl,_s_lin1
1500  0479  96          	sub	a, (hl)
1501  047A  30 08       	jr	NC,l_player_collision_00106
1502  047C  CD E4 10    	call	_player_lost_life
1503  047F  2E 00       	ld	l,0x00
1504  0481  C3 63 05    	jp	l_player_collision_00137
1505  0484              l_player_collision_00106:
1506  0484  2E 06       	ld	l,0x06
1507  0486  CD 00 00    	call	_zx_border_fastcall
1508  0489  2E 32       	ld	l,0x32
1509  048B  CD 62 12    	call	_player_hit
1510  048E              l_player_collision_00157:
1511  048E              l_player_collision_00132:
1512  048E  21 00 00    	ld	hl,_sprite
1513  0491  7E          	ld	a, (hl)
1514  0492  D6 07       	sub	a,0x07
1515  0494  D2 61 05    	jp	NC, l_player_collision_00136
1516  0497  4E          	ld	c,(hl)
1517  0498  06 00       	ld	b,0x00
1518  049A  21 00 00    	ld	hl,_class
1519  049D  09          	add	hl,bc
1520  049E  7E          	ld	a,(hl)
1521  049F  32 00 00    	ld	(_s_class),a
1522  04A2  B7          	or	a, a
1523  04A3  CA 5A 05    	jp	Z, l_player_collision_00131
1524  04A6  2A 00 00    	ld	hl,(_sprite)
1525  04A9  26 00       	ld	h,0x00
1526  04AB  01 00 00    	ld	bc,_col
1527  04AE  09          	add	hl,bc
1528  04AF  4E          	ld	c,(hl)
1529  04B0  06 00       	ld	b,0x00
1530  04B2  3A 00 00    	ld	a,(_s_col1)
1531  04B5  5F          	ld	e,a
1532  04B6  16 00       	ld	d,0x00
1533  04B8  79          	ld	a, c
1534  04B9  93          	sub	a, e
1535  04BA  6F          	ld	l, a
1536  04BB  78          	ld	a, b
1537  04BC  9A          	sbc	a, d
1538  04BD  67          	ld	h, a
1539  04BE  CD 00 00    	call	_abs_fastcall
1540  04C1  7D          	ld	a,l
1541  04C2  D6 02       	sub	a,0x02
1542  04C4  7C          	ld	a,h
1543  04C5  17          	rla
1544  04C6  3F          	ccf
1545  04C7  1F          	rra
1546  04C8  DE 80       	sbc	a,0x80
1547  04CA  D2 5A 05    	jp	NC, l_player_collision_00131
1548  04CD  2A 00 00    	ld	hl,(_sprite)
1549  04D0  26 00       	ld	h,0x00
1550  04D2  01 00 00    	ld	bc,_lin
1551  04D5  09          	add	hl,bc
1552  04D6  4E          	ld	c,(hl)
1553  04D7  06 00       	ld	b,0x00
1554  04D9  3A 00 00    	ld	a,(_s_lin1)
1555  04DC  5F          	ld	e,a
1556  04DD  16 00       	ld	d,0x00
1557  04DF  79          	ld	a, c
1558  04E0  93          	sub	a, e
1559  04E1  6F          	ld	l, a
1560  04E2  78          	ld	a, b
1561  04E3  9A          	sbc	a, d
1562  04E4  67          	ld	h, a
1563  04E5  CD 00 00    	call	_abs_fastcall
1564  04E8  7D          	ld	a,l
1565  04E9  D6 0E       	sub	a,0x0e
1566  04EB  7C          	ld	a,h
1567  04EC  17          	rla
1568  04ED  3F          	ccf
1569  04EE  1F          	rra
1570  04EF  DE 80       	sbc	a,0x80
1571  04F1  30 67       	jr	NC,l_player_collision_00131
1572  04F3  3A 00 00    	ld	a,(_s_class)
1573  04F6  D6 06       	sub	a,0x06
1574  04F8  20 1D       	jr	NZ,l_player_collision_00119
1575  04FA  21 00 00    	ld	hl,_player_vita
1576  04FD  7E          	ld	a, (hl)
1577  04FE  C6 32       	add	a,0x32
1578  0500  77          	ld	(hl), a
1579  0501  3A 00 00    	ld	a,(_player_max_vita)
1580  0504  21 00 00    	ld	hl,_player_vita
1581  0507  96          	sub	a, (hl)
1582  0508  30 06       	jr	NC,l_player_collision_00117
1583  050A  3A 00 00    	ld	a,(_player_max_vita)
1584  050D  32 00 00    	ld	(_player_vita),a
1585  0510              l_player_collision_00117:
1586  0510  CD 64 05    	call	_player_pick_mushroom
1587  0513  2E 00       	ld	l,0x00
1588  0515  18 4C       	jr	l_player_collision_00137
1589  0517              l_player_collision_00119:
1590  0517  3A 00 00    	ld	a,(_s_class)
1591  051A  D6 07       	sub	a,0x07
1592  051C  20 1D       	jr	NZ,l_player_collision_00123
1593  051E  21 00 00    	ld	hl,_player_mana
1594  0521  7E          	ld	a, (hl)
1595  0522  C6 32       	add	a,0x32
1596  0524  77          	ld	(hl), a
1597  0525  3A 00 00    	ld	a,(_player_max_mana)
1598  0528  21 00 00    	ld	hl,_player_mana
1599  052B  96          	sub	a, (hl)
1600  052C  30 06       	jr	NC,l_player_collision_00121
1601  052E  3A 00 00    	ld	a,(_player_max_mana)
1602  0531  32 00 00    	ld	(_player_mana),a
1603  0534              l_player_collision_00121:
1604  0534  CD 64 05    	call	_player_pick_mushroom
1605  0537  2E 00       	ld	l,0x00
1606  0539  18 28       	jr	l_player_collision_00137
1607  053B              l_player_collision_00123:
1608  053B  3A 00 00    	ld	a,(_s_class)
1609  053E  D6 08       	sub	a,0x08
1610  0540  20 0A       	jr	NZ,l_player_collision_00125
1611  0542  CD 64 05    	call	_player_pick_mushroom
1612  0545  CD 83 05    	call	_player_1up
1613  0548  2E 00       	ld	l,0x00
1614  054A  18 17       	jr	l_player_collision_00137
1615  054C              l_player_collision_00125:
1616  054C  2E 02       	ld	l,0x02
1617  054E  CD 00 00    	call	_zx_border_fastcall
1618  0551  2E 14       	ld	l,0x14
1619  0553  CD 62 12    	call	_player_hit
1620  0556  2E 01       	ld	l,0x01
1621  0558  18 09       	jr	l_player_collision_00137
1622  055A              l_player_collision_00131:
1623  055A  21 00 00    	ld	hl,_sprite
1624  055D  34          	inc	(hl)
1625  055E  C3 8E 04    	jp	l_player_collision_00132
1626  0561              l_player_collision_00136:
1627  0561  2E 00       	ld	l,0x00
1628  0563              l_player_collision_00137:
1629  0563  C9          	ret
1630  0564              	SECTION rodata_compiler
1631  0000              ___str_0:
1632  0000  52 4F 55 4E 44 20 43 4F 4D 50 4C 45 54 45 21 
                        	DEFM "ROUND COMPLETE!"
1633  000F  00          	DEFB 0x00
1634  0010              	SECTION code_compiler
1635  0564              ;	---------------------------------
1636  0564              ; Function player_pick_mushroom
1637  0564              ; ---------------------------------
1638  0564              _player_pick_mushroom:
1639  0564  21 00 00    	ld	hl,_ay_fx_04_magia1
1640  0567  E5          	push	hl
1641  0568  21 01 04    	ld	hl,0x0401
1642  056B  E5          	push	hl
1643  056C  CD 00 00    	call	_ay_song_play
1644  056F  21 01 00    	ld	hl,0x0001
1645  0572  CD B6 0C    	call	_player_score_add
1646  0575  CD 00 00    	call	_game_update_stats
1647  0578  2A 00 00    	ld	hl,(_sprite)
1648  057B  CD 00 00    	call	_spr_destroy
1649  057E  21 00 00    	ld	hl,_game_mush_count
1650  0581  35          	dec	(hl)
1651  0582  C9          	ret
1652  0583              	SECTION code_compiler
1653  0583              ;	---------------------------------
1654  0583              ; Function player_1up
1655  0583              ; ---------------------------------
1656  0583              _player_1up:
1657  0583  21 00 00    	ld	hl,_player_lives
1658  0586  7E          	ld	a, (hl)
1659  0587  D6 64       	sub	a,0x64
1660  0589  D0          	ret	NC
1661  058A  34          	inc	(hl)
1662  058B  CD 00 00    	call	_spr_flatten
1663  058E  21 10 00    	ld	hl,___str_1
1664  0591  E5          	push	hl
1665  0592  21 0C 0C    	ld	hl,0x0c0c
1666  0595  E5          	push	hl
1667  0596  CD 00 00    	call	_zx_print_str
1668  0599  AF          	xor	a, a
1669  059A  F5          	push	af
1670  059B  33          	inc	sp
1671  059C  21 19 00    	ld	hl,0x0019
1672  059F  E5          	push	hl
1673  05A0  21 0C 11    	ld	hl,0x110c
1674  05A3  E5          	push	hl
1675  05A4  3E 0C       	ld	a,0x0c
1676  05A6  F5          	push	af
1677  05A7  33          	inc	sp
1678  05A8  CD 00 00    	call	_game_colour_message
1679  05AB  F1          	pop	af
1680  05AC  F1          	pop	af
1681  05AD  F1          	pop	af
1682  05AE  CD 00 00    	call	_game_update_stats
1683  05B1  CD 00 00    	call	_spr_unflatten
1684  05B4  C9          	ret
1685  05B5              	SECTION rodata_compiler
1686  0010              ___str_1:
1687  0010  31 20 55 50 21 
                        	DEFM "1 UP!"
1688  0015  00          	DEFB 0x00
1689  0016              	SECTION code_compiler
1690  05B5              ;	---------------------------------
1691  05B5              ; Function player_check_stairs_vertical
1692  05B5              ; ---------------------------------
1693  05B5              _player_check_stairs_vertical:
1694  05B5  CD 00 00    	call	___sdcc_enter_ix
1695  05B8  F5          	push	af
1696  05B9  DD 75 FF    	ld	(ix-1),l
1697  05BC  21 07 00    	ld	hl,+(_col + 0x0007)
1698  05BF  4E          	ld	c, (hl)
1699  05C0  CB 41       	bit	0, c
1700  05C2  20 2F       	jr	NZ,l_player_check_stairs_vertical_00102
1701  05C4  3A 07 00    	ld	a,(_lin + 0x0007)
1702  05C7  DD 86 FF    	add	a,(ix-1)
1703  05CA  47          	ld	b, a
1704  05CB  79          	ld	a, c
1705  05CC  48          	ld	c,b
1706  05CD  47          	ld	b,a
1707  05CE  C5          	push	bc
1708  05CF  CD 00 00    	call	_spr_calc_index
1709  05D2  F1          	pop	af
1710  05D3  7D          	ld	a,l
1711  05D4  32 00 00    	ld	(_sprite_curr_index),a
1712  05D7  4F          	ld	c,a
1713  05D8  06 00       	ld	b,0x00
1714  05DA  21 00 00    	ld	hl,_scr_map
1715  05DD  09          	add	hl,bc
1716  05DE  7E          	ld	a,(hl)
1717  05DF  4F          	ld	c,a
1718  05E0  D6 44       	sub	a,0x44
1719  05E2  38 05       	jr	C,l_player_check_stairs_vertical_00110
1720  05E4  3E 47       	ld	a,0x47
1721  05E6  91          	sub	a, c
1722  05E7  30 04       	jr	NC,l_player_check_stairs_vertical_00111
1723  05E9              l_player_check_stairs_vertical_00110:
1724  05E9  1E 00       	ld	e,0x00
1725  05EB  18 02       	jr	l_player_check_stairs_vertical_00112
1726  05ED              l_player_check_stairs_vertical_00111:
1727  05ED  1E 01       	ld	e,0x01
1728  05EF              l_player_check_stairs_vertical_00112:
1729  05EF  0E 00       	ld	c,0x00
1730  05F1  18 58       	jr	l_player_check_stairs_vertical_00103
1731  05F3              l_player_check_stairs_vertical_00102:
1732  05F3  79          	ld	a, c
1733  05F4  DD 96 FF    	sub	a,(ix-1)
1734  05F7  57          	ld	d, a
1735  05F8  01 07 00    	ld	bc,_lin+7
1736  05FB  0A          	ld	a, (bc)
1737  05FC  DD 86 FF    	add	a,(ix-1)
1738  05FF  C5          	push	bc
1739  0600  5F          	ld	e,a
1740  0601  D5          	push	de
1741  0602  CD 00 00    	call	_spr_calc_index
1742  0605  F1          	pop	af
1743  0606  C1          	pop	bc
1744  0607  7D          	ld	a,l
1745  0608  32 00 00    	ld	(_sprite_curr_index),a
1746  060B  5F          	ld	e,a
1747  060C  16 00       	ld	d,0x00
1748  060E  21 00 00    	ld	hl,_scr_map
1749  0611  19          	add	hl,de
1750  0612  7E          	ld	a,(hl)
1751  0613  5F          	ld	e,a
1752  0614  D6 44       	sub	a,0x44
1753  0616  38 05       	jr	C,l_player_check_stairs_vertical_00113
1754  0618  3E 47       	ld	a,0x47
1755  061A  93          	sub	a, e
1756  061B  30 04       	jr	NC,l_player_check_stairs_vertical_00114
1757  061D              l_player_check_stairs_vertical_00113:
1758  061D  1E 00       	ld	e,0x00
1759  061F  18 02       	jr	l_player_check_stairs_vertical_00115
1760  0621              l_player_check_stairs_vertical_00114:
1761  0621  1E 01       	ld	e,0x01
1762  0623              l_player_check_stairs_vertical_00115:
1763  0623  3A 07 00    	ld	a,(_col + 0x0007)
1764  0626  DD 96 FF    	sub	a,(ix-1)
1765  0629  57          	ld	d, a
1766  062A  0A          	ld	a, (bc)
1767  062B  DD 86 FF    	add	a,(ix-1)
1768  062E  47          	ld	b, a
1769  062F  D5          	push	de
1770  0630  58          	ld	e,b
1771  0631  D5          	push	de
1772  0632  CD 00 00    	call	_spr_calc_index
1773  0635  F1          	pop	af
1774  0636  D1          	pop	de
1775  0637  7D          	ld	a,l
1776  0638  32 00 00    	ld	(_sprite_curr_index),a
1777  063B  7B          	ld	a, e
1778  063C  D6 44       	sub	a,0x44
1779  063E  38 05       	jr	C,l_player_check_stairs_vertical_00116
1780  0640  3E 47       	ld	a,0x47
1781  0642  93          	sub	a, e
1782  0643  30 04       	jr	NC,l_player_check_stairs_vertical_00117
1783  0645              l_player_check_stairs_vertical_00116:
1784  0645  0E 00       	ld	c,0x00
1785  0647  18 02       	jr	l_player_check_stairs_vertical_00118
1786  0649              l_player_check_stairs_vertical_00117:
1787  0649  0E 01       	ld	c,0x01
1788  064B              l_player_check_stairs_vertical_00118:
1789  064B              l_player_check_stairs_vertical_00103:
1790  064B  7B          	ld	a, e
1791  064C  B7          	or	a,a
1792  064D  20 03       	jr	NZ,l_player_check_stairs_vertical_00104
1793  064F  B1          	or	a,c
1794  0650  28 07       	jr	Z,l_player_check_stairs_vertical_00105
1795  0652              l_player_check_stairs_vertical_00104:
1796  0652  21 00 00    	ld	hl,_player_onstair
1797  0655  36 01       	ld	(hl),0x01
1798  0657  18 05       	jr	l_player_check_stairs_vertical_00108
1799  0659              l_player_check_stairs_vertical_00105:
1800  0659  21 00 00    	ld	hl,_player_onstair
1801  065C  36 00       	ld	(hl),0x00
1802  065E              l_player_check_stairs_vertical_00108:
1803  065E  F1          	pop	af
1804  065F  DD E1       	pop	ix
1805  0661  C9          	ret
1806  0662              	SECTION code_compiler
1807  0662              ;	---------------------------------
1808  0662              ; Function player_check_stairs
1809  0662              ; ---------------------------------
1810  0662              _player_check_stairs:
1811  0662  CD 00 00    	call	___sdcc_enter_ix
1812  0665  3B          	dec	sp
1813  0666  45          	ld	b, l
1814  0667  3A 07 00    	ld	a,(_col + 0x0007)
1815  066A  4F          	ld	c,a
1816  066B  80          	add	a, b
1817  066C  57          	ld	d, a
1818  066D  3A 07 00    	ld	a,(_lin + 0x0007)
1819  0670  C5          	push	bc
1820  0671  5F          	ld	e,a
1821  0672  D5          	push	de
1822  0673  CD 00 00    	call	_spr_calc_index
1823  0676  F1          	pop	af
1824  0677  C1          	pop	bc
1825  0678  7D          	ld	a,l
1826  0679  32 00 00    	ld	(_sprite_curr_index),a
1827  067C  5F          	ld	e,a
1828  067D  16 00       	ld	d,0x00
1829  067F  21 00 00    	ld	hl,_scr_map
1830  0682  19          	add	hl,de
1831  0683  7E          	ld	a,(hl)
1832  0684  4F          	ld	c,a
1833  0685  D6 44       	sub	a,0x44
1834  0687  38 05       	jr	C,l_player_check_stairs_00111
1835  0689  3E 47       	ld	a,0x47
1836  068B  91          	sub	a, c
1837  068C  30 04       	jr	NC,l_player_check_stairs_00112
1838  068E              l_player_check_stairs_00111:
1839  068E  0E 00       	ld	c,0x00
1840  0690  18 02       	jr	l_player_check_stairs_00113
1841  0692              l_player_check_stairs_00112:
1842  0692  0E 01       	ld	c,0x01
1843  0694              l_player_check_stairs_00113:
1844  0694  3A 07 00    	ld	a,(_col + 0x0007)
1845  0697  80          	add	a, b
1846  0698  57          	ld	d, a
1847  0699  3A 07 00    	ld	a,(_lin + 0x0007)
1848  069C  C6 0F       	add	a,0x0f
1849  069E  47          	ld	b, a
1850  069F  C5          	push	bc
1851  06A0  58          	ld	e,b
1852  06A1  D5          	push	de
1853  06A2  CD 00 00    	call	_spr_calc_index
1854  06A5  F1          	pop	af
1855  06A6  C1          	pop	bc
1856  06A7  7D          	ld	a,l
1857  06A8  32 00 00    	ld	(_sprite_curr_index),a
1858  06AB  5F          	ld	e,a
1859  06AC  16 00       	ld	d,0x00
1860  06AE  21 00 00    	ld	hl,_scr_map
1861  06B1  19          	add	hl,de
1862  06B2  7E          	ld	a,(hl)
1863  06B3  47          	ld	b,a
1864  06B4  D6 44       	sub	a,0x44
1865  06B6  38 05       	jr	C,l_player_check_stairs_00114
1866  06B8  3E 47       	ld	a,0x47
1867  06BA  90          	sub	a, b
1868  06BB  30 04       	jr	NC,l_player_check_stairs_00115
1869  06BD              l_player_check_stairs_00114:
1870  06BD  06 00       	ld	b,0x00
1871  06BF  18 02       	jr	l_player_check_stairs_00116
1872  06C1              l_player_check_stairs_00115:
1873  06C1  06 01       	ld	b,0x01
1874  06C3              l_player_check_stairs_00116:
1875  06C3  79          	ld	a, c
1876  06C4  B7          	or	a,a
1877  06C5  20 03       	jr	NZ,l_player_check_stairs_00105
1878  06C7  B0          	or	a,b
1879  06C8  28 13       	jr	Z,l_player_check_stairs_00106
1880  06CA              l_player_check_stairs_00105:
1881  06CA  21 00 00    	ld	hl,_player_onstair
1882  06CD  7E          	ld	a, (hl)
1883  06CE  B7          	or	a, a
1884  06CF  20 1D       	jr	NZ,l_player_check_stairs_00109
1885  06D1  36 01       	ld	(hl),0x01
1886  06D3  21 72 00    	ld	hl,0x0072
1887  06D6  E5          	push	hl
1888  06D7  CD 36 07    	call	_player_tile
1889  06DA  F1          	pop	af
1890  06DB  18 11       	jr	l_player_check_stairs_00109
1891  06DD              l_player_check_stairs_00106:
1892  06DD  21 00 00    	ld	hl,_player_onstair
1893  06E0  7E          	ld	a, (hl)
1894  06E1  B7          	or	a, a
1895  06E2  28 0A       	jr	Z,l_player_check_stairs_00109
1896  06E4  36 00       	ld	(hl),0x00
1897  06E6  21 60 08    	ld	hl,0x0860
1898  06E9  E5          	push	hl
1899  06EA  CD 36 07    	call	_player_tile
1900  06ED  F1          	pop	af
1901  06EE              l_player_check_stairs_00109:
1902  06EE  33          	inc	sp
1903  06EF  DD E1       	pop	ix
1904  06F1  C9          	ret
1905  06F2              	SECTION code_compiler
1906  06F2              ;	---------------------------------
1907  06F2              ; Function player_anim_tile
1908  06F2              ; ---------------------------------
1909  06F2              _player_anim_tile:
1910  06F2  21 07 00    	ld	hl,+(_tile + 0x0007)
1911  06F5  4E          	ld	c, (hl)
1912  06F6  21 07 00    	ld	hl,+(_colint + 0x0007)
1913  06F9  46          	ld	b, (hl)
1914  06FA  79          	ld	a, c
1915  06FB  80          	add	a, b
1916  06FC  32 00 00    	ld	(_s_tile1),a
1917  06FF  3A 00 00    	ld	a,(_player_onstair)
1918  0702  B7          	or	a, a
1919  0703  28 17       	jr	Z,l_player_anim_tile_00109
1920  0705  21 00 00    	ld	hl,_player_anim_stair
1921  0708  34          	inc	(hl)
1922  0709  3E 01       	ld	a,0x01
1923  070B  96          	sub	a, (hl)
1924  070C  30 02       	jr	NC,l_player_anim_tile_00102
1925  070E  36 00       	ld	(hl),0x00
1926  0710              l_player_anim_tile_00102:
1927  0710  79          	ld	a, c
1928  0711  21 00 00    	ld	hl,_player_anim_stair
1929  0714  86          	add	a, (hl)
1930  0715  C6 04       	add	a,0x04
1931  0717  32 00 00    	ld	(_s_tile1),a
1932  071A  18 19       	jr	l_player_anim_tile_00111
1933  071C              l_player_anim_tile_00109:
1934  071C  3A 00 00    	ld	a,(_player_onfire)
1935  071F  B7          	or	a, a
1936  0720  28 13       	jr	Z,l_player_anim_tile_00111
1937  0722  21 00 00    	ld	hl,_s_state
1938  0725  CB 56       	bit	2, (hl)
1939  0727  28 07       	jr	Z,l_player_anim_tile_00104
1940  0729  21 00 00    	ld	hl,_s_tile1
1941  072C  36 60       	ld	(hl),0x60
1942  072E  18 05       	jr	l_player_anim_tile_00111
1943  0730              l_player_anim_tile_00104:
1944  0730  21 00 00    	ld	hl,_s_tile1
1945  0733  36 68       	ld	(hl),0x68
1946  0735              l_player_anim_tile_00111:
1947  0735  C9          	ret
1948  0736              	SECTION code_compiler
1949  0736              ;	---------------------------------
1950  0736              ; Function player_tile
1951  0736              ; ---------------------------------
1952  0736              _player_tile:
1953  0736  CD 00 00    	call	___sdcc_enter_ix
1954  0739  21 05 00    	ld	hl,0x0005
1955  073C  39          	add	hl, sp
1956  073D  EB          	ex	de,hl
1957  073E  21 04 00    	ld	hl,0x0004
1958  0741  39          	add	hl, sp
1959  0742  4D          	ld	c, l
1960  0743  44          	ld	b, h
1961  0744  D5          	push	de
1962  0745  21 00 00    	ld	hl,_sprite
1963  0748  E5          	push	hl
1964  0749  C5          	push	bc
1965  074A  CD 00 00    	call	_spr_tile_dir
1966  074D  F1          	pop	af
1967  074E  F1          	pop	af
1968  074F  F1          	pop	af
1969  0750  7D          	ld	a,l
1970  0751  32 07 00    	ld	((_tile + 0x0007)),a
1971  0754  DD E1       	pop	ix
1972  0756  C9          	ret
1973  0757              	SECTION code_compiler
1974  0757              ;	---------------------------------
1975  0757              ; Function player_check_map
1976  0757              ; ---------------------------------
1977  0757              _player_check_map:
1978  0757  21 07 00    	ld	hl,+(_col + 0x0007)
1979  075A  46          	ld	b, (hl)
1980  075B  21 07 00    	ld	hl,+(_lin + 0x0007)
1981  075E  4E          	ld	c, (hl)
1982  075F  C5          	push	bc
1983  0760  CD 00 00    	call	_spr_calc_index
1984  0763  F1          	pop	af
1985  0764  7D          	ld	a,l
1986  0765  32 00 00    	ld	(_sprite_curr_index),a
1987  0768  21 07 00    	ld	hl,+(_col + 0x0007)
1988  076B  4E          	ld	c, (hl)
1989  076C  3A 07 00    	ld	a,(_lin + 0x0007)
1990  076F  E6 0F       	and	a,0x0f
1991  0771  CB 41       	bit	0, c
1992  0773  20 17       	jr	NZ,l_player_check_map_00108
1993  0775  B7          	or	a, a
1994  0776  20 05       	jr	NZ,l_player_check_map_00102
1995  0778  CD B7 07    	call	_player_pick_item
1996  077B  18 39       	jr	l_player_check_map_00110
1997  077D              l_player_check_map_00102:
1998  077D  CD B7 07    	call	_player_pick_item
1999  0780  21 00 00    	ld	hl,_sprite_curr_index
2000  0783  7E          	ld	a, (hl)
2001  0784  C6 10       	add	a,0x10
2002  0786  77          	ld	(hl), a
2003  0787  CD B7 07    	call	_player_pick_item
2004  078A  18 2A       	jr	l_player_check_map_00110
2005  078C              l_player_check_map_00108:
2006  078C  B7          	or	a, a
2007  078D  20 0C       	jr	NZ,l_player_check_map_00105
2008  078F  CD B7 07    	call	_player_pick_item
2009  0792  21 00 00    	ld	hl,_sprite_curr_index
2010  0795  34          	inc	(hl)
2011  0796  CD B7 07    	call	_player_pick_item
2012  0799  18 1B       	jr	l_player_check_map_00110
2013  079B              l_player_check_map_00105:
2014  079B  CD B7 07    	call	_player_pick_item
2015  079E  21 00 00    	ld	hl,_sprite_curr_index
2016  07A1  34          	inc	(hl)
2017  07A2  CD B7 07    	call	_player_pick_item
2018  07A5  21 00 00    	ld	hl,_sprite_curr_index
2019  07A8  7E          	ld	a, (hl)
2020  07A9  C6 0F       	add	a,0x0f
2021  07AB  77          	ld	(hl), a
2022  07AC  CD B7 07    	call	_player_pick_item
2023  07AF  21 00 00    	ld	hl,_sprite_curr_index
2024  07B2  34          	inc	(hl)
2025  07B3  CD B7 07    	call	_player_pick_item
2026  07B6              l_player_check_map_00110:
2027  07B6  C9          	ret
2028  07B7              	SECTION code_compiler
2029  07B7              ;	---------------------------------
2030  07B7              ; Function player_pick_item
2031  07B7              ; ---------------------------------
2032  07B7              _player_pick_item:
2033  07B7  CD 00 00    	call	___sdcc_enter_ix
2034  07BA  3B          	dec	sp
2035  07BB  2A 00 00    	ld	hl,(_sprite_curr_index)
2036  07BE  26 00       	ld	h,0x00
2037  07C0  01 00 00    	ld	bc,_scr_map
2038  07C3  09          	add	hl,bc
2039  07C4  7E          	ld	a,(hl)
2040  07C5  DD 77 FF    	ld	(ix-1),a
2041  07C8  D6 24       	sub	a,0x24
2042  07CA  DA C3 09    	jp	C, l_player_pick_item_00131
2043  07CD  3E 2F       	ld	a,0x2f
2044  07CF  DD 96 FF    	sub	a,(ix-1)
2045  07D2  DA C3 09    	jp	C, l_player_pick_item_00131
2046  07D5  CD 00 00    	call	_ay_reset
2047  07D8  2A 00 00    	ld	hl,(_sprite_curr_index)
2048  07DB  26 00       	ld	h,0x00
2049  07DD  01 00 00    	ld	bc,_scr_map
2050  07E0  09          	add	hl,bc
2051  07E1  4D          	ld	c,l
2052  07E2  44          	ld	b,h
2053  07E3  21 00 00    	ld	hl,_sprite_curr_index
2054  07E6  5E          	ld	e, (hl)
2055  07E7  16 00       	ld	d,0x00
2056  07E9  C5          	push	bc
2057  07EA  EB          	ex	de,hl
2058  07EB  CD 00 00    	call	_game_match_back
2059  07EE  C1          	pop	bc
2060  07EF  7D          	ld	a,l
2061  07F0  02          	ld	(bc), a
2062  07F1  2A 00 00    	ld	hl,(_sprite_curr_index)
2063  07F4  26 00       	ld	h,0x00
2064  07F6  CD 00 00    	call	_game_obj_set
2065  07F9  3A 00 00    	ld	a,(_sprite_curr_index)
2066  07FC  07          	rlca
2067  07FD  07          	rlca
2068  07FE  07          	rlca
2069  07FF  07          	rlca
2070  0800  E6 0F       	and	a,0x0f
2071  0802  07          	rlca
2072  0803  07          	rlca
2073  0804  07          	rlca
2074  0805  07          	rlca
2075  0806  E6 F0       	and	a,0xf0
2076  0808  32 00 00    	ld	(_s_lin1),a
2077  080B  3A 00 00    	ld	a,(_sprite_curr_index)
2078  080E  E6 0F       	and	a,0x0f
2079  0810  87          	add	a, a
2080  0811  32 00 00    	ld	(_s_col1),a
2081  0814  21 00 00    	ld	hl,0x0000
2082  0817  E5          	push	hl
2083  0818  21 84 03    	ld	hl,0x0384
2084  081B  E5          	push	hl
2085  081C  F5          	push	af
2086  081D  33          	inc	sp
2087  081E  3A 00 00    	ld	a,(_s_lin1)
2088  0821  F5          	push	af
2089  0822  33          	inc	sp
2090  0823  CD 00 00    	call	_spr_add_anim
2091  0826  F1          	pop	af
2092  0827  F1          	pop	af
2093  0828  F1          	pop	af
2094  0829  DD 7E FF    	ld	a,(ix-1)
2095  082C  D6 24       	sub	a,0x24
2096  082E  DA C3 09    	jp	C, l_player_pick_item_00131
2097  0831  3E 2F       	ld	a,0x2f
2098  0833  DD 96 FF    	sub	a,(ix-1)
2099  0836  DA C3 09    	jp	C, l_player_pick_item_00131
2100  0839  DD 7E FF    	ld	a,(ix-1)
2101  083C  C6 DC       	add	a,0xdc
2102  083E  4F          	ld	c, a
2103  083F  06 00       	ld	b,0x00
2104  0841  21 48 08    	ld	hl,l_player_pick_item_00177
2105  0844  09          	add	hl, bc
2106  0845  09          	add	hl, bc
2107  0846  09          	add	hl, bc
2108  0847  E9          	jp	(hl)
2109  0848              l_player_pick_item_00177:
2110  0848  C3 6C 08    	jp	l_player_pick_item_00101
2111  084B  C3 82 08    	jp	l_player_pick_item_00102
2112  084E  C3 98 08    	jp	l_player_pick_item_00103
2113  0851  C3 AE 08    	jp	l_player_pick_item_00104
2114  0854  C3 C4 08    	jp	l_player_pick_item_00105
2115  0857  C3 01 09    	jp	l_player_pick_item_00109
2116  085A  C3 23 09    	jp	l_player_pick_item_00112
2117  085D  C3 45 09    	jp	l_player_pick_item_00115
2118  0860  C3 65 09    	jp	l_player_pick_item_00118
2119  0863  C3 85 09    	jp	l_player_pick_item_00121
2120  0866  C3 A5 09    	jp	l_player_pick_item_00124
2121  0869  C3 ED 08    	jp	l_player_pick_item_00108
2122  086C              l_player_pick_item_00101:
2123  086C  21 00 00    	ld	hl,_ay_fx_06_efecto
2124  086F  E5          	push	hl
2125  0870  21 01 06    	ld	hl,0x0601
2126  0873  E5          	push	hl
2127  0874  CD 00 00    	call	_ay_song_play
2128  0877  21 00 00    	ld	hl,_player_keys
2129  087A  36 01       	ld	(hl),0x01
2130  087C  CD 00 00    	call	_game_update_stats
2131  087F  C3 C3 09    	jp	l_player_pick_item_00131
2132  0882              l_player_pick_item_00102:
2133  0882  21 00 00    	ld	hl,_ay_fx_06_efecto
2134  0885  E5          	push	hl
2135  0886  21 01 06    	ld	hl,0x0601
2136  0889  E5          	push	hl
2137  088A  CD 00 00    	call	_ay_song_play
2138  088D  21 01 00    	ld	hl, +(_player_keys + 0x0001)
2139  0890  36 01       	ld	(hl),0x01
2140  0892  CD 00 00    	call	_game_update_stats
2141  0895  C3 C3 09    	jp	l_player_pick_item_00131
2142  0898              l_player_pick_item_00103:
2143  0898  21 00 00    	ld	hl,_ay_fx_06_efecto
2144  089B  E5          	push	hl
2145  089C  21 01 06    	ld	hl,0x0601
2146  089F  E5          	push	hl
2147  08A0  CD 00 00    	call	_ay_song_play
2148  08A3  21 02 00    	ld	hl, +(_player_keys + 0x0002)
2149  08A6  36 01       	ld	(hl),0x01
2150  08A8  CD 00 00    	call	_game_update_stats
2151  08AB  C3 C3 09    	jp	l_player_pick_item_00131
2152  08AE              l_player_pick_item_00104:
2153  08AE  21 00 00    	ld	hl,_ay_fx_06_efecto
2154  08B1  E5          	push	hl
2155  08B2  21 01 06    	ld	hl,0x0601
2156  08B5  E5          	push	hl
2157  08B6  CD 00 00    	call	_ay_song_play
2158  08B9  21 03 00    	ld	hl, +(_player_keys + 0x0003)
2159  08BC  36 01       	ld	(hl),0x01
2160  08BE  CD 00 00    	call	_game_update_stats
2161  08C1  C3 C3 09    	jp	l_player_pick_item_00131
2162  08C4              l_player_pick_item_00105:
2163  08C4  21 00 00    	ld	hl,_ay_fx_04_coin
2164  08C7  E5          	push	hl
2165  08C8  21 01 04    	ld	hl,0x0401
2166  08CB  E5          	push	hl
2167  08CC  CD 00 00    	call	_ay_song_play
2168  08CF  21 01 00    	ld	hl,0x0001
2169  08D2  CD B6 0C    	call	_player_score_add
2170  08D5  21 00 00    	ld	hl,_player_coins
2171  08D8  7E          	ld	a,(hl)
2172  08D9  3C          	inc	a
2173  08DA  77          	ld	(hl),a
2174  08DB  D6 64       	sub	a,0x64
2175  08DD  20 08       	jr	NZ,l_player_pick_item_00107
2176  08DF  CD 83 05    	call	_player_1up
2177  08E2  21 00 00    	ld	hl,_player_coins
2178  08E5  36 00       	ld	(hl),0x00
2179  08E7              l_player_pick_item_00107:
2180  08E7  CD 00 00    	call	_game_update_stats
2181  08EA  C3 C3 09    	jp	l_player_pick_item_00131
2182  08ED              l_player_pick_item_00108:
2183  08ED  21 00 00    	ld	hl,_ay_fx_04_magia1
2184  08F0  E5          	push	hl
2185  08F1  21 01 04    	ld	hl,0x0401
2186  08F4  E5          	push	hl
2187  08F5  CD 00 00    	call	_ay_song_play
2188  08F8  21 0A 00    	ld	hl,0x000a
2189  08FB  CD B6 0C    	call	_player_score_add
2190  08FE  C3 C3 09    	jp	l_player_pick_item_00131
2191  0901              l_player_pick_item_00109:
2192  0901  21 00 00    	ld	hl,_ay_fx_06_efecto
2193  0904  E5          	push	hl
2194  0905  21 01 06    	ld	hl,0x0601
2195  0908  E5          	push	hl
2196  0909  CD 00 00    	call	_ay_song_play
2197  090C  21 00 00    	ld	hl,_player_str
2198  090F  34          	inc	(hl)
2199  0910  21 00 00    	ld	hl,_player_max_vita
2200  0913  7E          	ld	a, (hl)
2201  0914  D6 C8       	sub	a,0xc8
2202  0916  D2 C3 09    	jp	NC, l_player_pick_item_00131
2203  0919  7E          	ld	a, (hl)
2204  091A  C6 0A       	add	a,0x0a
2205  091C  77          	ld	(hl), a
2206  091D  CD 00 00    	call	_game_update_stats
2207  0920  C3 C3 09    	jp	l_player_pick_item_00131
2208  0923              l_player_pick_item_00112:
2209  0923  21 00 00    	ld	hl,_ay_fx_06_efecto
2210  0926  E5          	push	hl
2211  0927  21 01 06    	ld	hl,0x0601
2212  092A  E5          	push	hl
2213  092B  CD 00 00    	call	_ay_song_play
2214  092E  21 00 00    	ld	hl,_player_str
2215  0931  34          	inc	(hl)
2216  0932  21 00 00    	ld	hl,_player_max_vita
2217  0935  7E          	ld	a, (hl)
2218  0936  D6 C8       	sub	a,0xc8
2219  0938  D2 C3 09    	jp	NC, l_player_pick_item_00131
2220  093B  7E          	ld	a, (hl)
2221  093C  C6 0A       	add	a,0x0a
2222  093E  77          	ld	(hl), a
2223  093F  CD 00 00    	call	_game_update_stats
2224  0942  C3 C3 09    	jp	l_player_pick_item_00131
2225  0945              l_player_pick_item_00115:
2226  0945  21 00 00    	ld	hl,_ay_fx_06_efecto
2227  0948  E5          	push	hl
2228  0949  21 01 06    	ld	hl,0x0601
2229  094C  E5          	push	hl
2230  094D  CD 00 00    	call	_ay_song_play
2231  0950  21 00 00    	ld	hl,_player_str
2232  0953  34          	inc	(hl)
2233  0954  21 00 00    	ld	hl,_player_max_vita
2234  0957  7E          	ld	a, (hl)
2235  0958  D6 C8       	sub	a,0xc8
2236  095A  30 67       	jr	NC,l_player_pick_item_00131
2237  095C  7E          	ld	a, (hl)
2238  095D  C6 0A       	add	a,0x0a
2239  095F  77          	ld	(hl), a
2240  0960  CD 00 00    	call	_game_update_stats
2241  0963  18 5E       	jr	l_player_pick_item_00131
2242  0965              l_player_pick_item_00118:
2243  0965  21 00 00    	ld	hl,_ay_fx_06_efecto
2244  0968  E5          	push	hl
2245  0969  21 01 06    	ld	hl,0x0601
2246  096C  E5          	push	hl
2247  096D  CD 00 00    	call	_ay_song_play
2248  0970  21 00 00    	ld	hl,_player_int
2249  0973  34          	inc	(hl)
2250  0974  21 00 00    	ld	hl,_player_max_mana
2251  0977  7E          	ld	a, (hl)
2252  0978  D6 C8       	sub	a,0xc8
2253  097A  30 47       	jr	NC,l_player_pick_item_00131
2254  097C  7E          	ld	a, (hl)
2255  097D  C6 0A       	add	a,0x0a
2256  097F  77          	ld	(hl), a
2257  0980  CD 00 00    	call	_game_update_stats
2258  0983  18 3E       	jr	l_player_pick_item_00131
2259  0985              l_player_pick_item_00121:
2260  0985  21 00 00    	ld	hl,_ay_fx_06_efecto
2261  0988  E5          	push	hl
2262  0989  21 01 06    	ld	hl,0x0601
2263  098C  E5          	push	hl
2264  098D  CD 00 00    	call	_ay_song_play
2265  0990  21 00 00    	ld	hl,_player_int
2266  0993  34          	inc	(hl)
2267  0994  21 00 00    	ld	hl,_player_max_mana
2268  0997  7E          	ld	a, (hl)
2269  0998  D6 C8       	sub	a,0xc8
2270  099A  30 27       	jr	NC,l_player_pick_item_00131
2271  099C  7E          	ld	a, (hl)
2272  099D  C6 0A       	add	a,0x0a
2273  099F  77          	ld	(hl), a
2274  09A0  CD 00 00    	call	_game_update_stats
2275  09A3  18 1E       	jr	l_player_pick_item_00131
2276  09A5              l_player_pick_item_00124:
2277  09A5  21 00 00    	ld	hl,_ay_fx_06_efecto
2278  09A8  E5          	push	hl
2279  09A9  21 01 06    	ld	hl,0x0601
2280  09AC  E5          	push	hl
2281  09AD  CD 00 00    	call	_ay_song_play
2282  09B0  21 00 00    	ld	hl,_player_int
2283  09B3  34          	inc	(hl)
2284  09B4  21 00 00    	ld	hl,_player_max_mana
2285  09B7  7E          	ld	a, (hl)
2286  09B8  D6 C8       	sub	a,0xc8
2287  09BA  30 07       	jr	NC,l_player_pick_item_00131
2288  09BC  7E          	ld	a, (hl)
2289  09BD  C6 0A       	add	a,0x0a
2290  09BF  77          	ld	(hl), a
2291  09C0  CD 00 00    	call	_game_update_stats
2292  09C3              l_player_pick_item_00131:
2293  09C3  33          	inc	sp
2294  09C4  DD E1       	pop	ix
2295  09C6  C9          	ret
2296  09C7              	SECTION code_compiler
2297  09C7              ;	---------------------------------
2298  09C7              ; Function player_hit_platform
2299  09C7              ; ---------------------------------
2300  09C7              _player_hit_platform:
2301  09C7  CD 00 00    	call	___sdcc_enter_ix
2302  09CA  F5          	push	af
2303  09CB  3B          	dec	sp
2304  09CC  3A 00 00    	ld	a,(_player_hit_lin)
2305  09CF  B7          	or	a, a
2306  09D0  C2 80 0C    	jp	NZ, l_player_hit_platform_00145
2307  09D3  21 07 00    	ld	hl,+(_lin + 0x0007)
2308  09D6  4E          	ld	c, (hl)
2309  09D7  3E 10       	ld	a,0x10
2310  09D9  91          	sub	a, c
2311  09DA  D2 80 0C    	jp	NC, l_player_hit_platform_00145
2312  09DD  01 00 00    	ld	bc,_scr_map
2313  09E0  2A 00 00    	ld	hl,(_index1)
2314  09E3  09          	add	hl,bc
2315  09E4  7E          	ld	a,(hl)
2316  09E5  D6 45       	sub	a,0x45
2317  09E7  DA 80 0C    	jp	C, l_player_hit_platform_00145
2318  09EA  2A 00 00    	ld	hl,(_curr_time)
2319  09ED  22 0E 00    	ld	(_spr_timer + 0x000e),hl
2320  09F0  3A 07 00    	ld	a,(_lin + 0x0007)
2321  09F3  06 00       	ld	b,0x00
2322  09F5  C6 F8       	add	a,0xf8
2323  09F7  4F          	ld	c, a
2324  09F8  78          	ld	a, b
2325  09F9  CE FF       	adc	a,0xff
2326  09FB  5F          	ld	e, a
2327  09FC  06 04       	ld	b,0x04
2328  09FE              l_player_hit_platform_00252:
2329  09FE  CB 2B       	sra	e
2330  0A00  CB 19       	rr	c
2331  0A02  10 FA       	djnz	l_player_hit_platform_00252
2332  0A04  79          	ld	a, c
2333  0A05  07          	rlca
2334  0A06  07          	rlca
2335  0A07  07          	rlca
2336  0A08  07          	rlca
2337  0A09  E6 F0       	and	a,0xf0
2338  0A0B  C6 08       	add	a,0x08
2339  0A0D  32 00 00    	ld	(_player_hit_lin),a
2340  0A10  21 07 00    	ld	hl,+(_col + 0x0007)
2341  0A13  4E          	ld	c, (hl)
2342  0A14  CB 41       	bit	0, c
2343  0A16  20 06       	jr	NZ,l_player_hit_platform_00111
2344  0A18  21 00 00    	ld	hl,_player_hit_col
2345  0A1B  71          	ld	(hl), c
2346  0A1C  18 2D       	jr	l_player_hit_platform_00112
2347  0A1E              l_player_hit_platform_00111:
2348  0A1E  21 07 00    	ld	hl,+(_state + 0x0007)
2349  0A21  5E          	ld	e, (hl)
2350  0A22  41          	ld	b, c
2351  0A23  04          	inc	b
2352  0A24  0D          	dec	c
2353  0A25  CB 5B       	bit	3, e
2354  0A27  28 12       	jr	Z,l_player_hit_platform_00108
2355  0A29  3A 00 00    	ld	a,(_g_player_hit_right)
2356  0A2C  B7          	or	a, a
2357  0A2D  28 06       	jr	Z,l_player_hit_platform_00102
2358  0A2F  21 00 00    	ld	hl,_player_hit_col
2359  0A32  70          	ld	(hl), b
2360  0A33  18 16       	jr	l_player_hit_platform_00112
2361  0A35              l_player_hit_platform_00102:
2362  0A35  21 00 00    	ld	hl,_player_hit_col
2363  0A38  71          	ld	(hl), c
2364  0A39  18 10       	jr	l_player_hit_platform_00112
2365  0A3B              l_player_hit_platform_00108:
2366  0A3B  3A 00 00    	ld	a,(_g_player_hit_left)
2367  0A3E  B7          	or	a, a
2368  0A3F  28 06       	jr	Z,l_player_hit_platform_00105
2369  0A41  21 00 00    	ld	hl,_player_hit_col
2370  0A44  71          	ld	(hl), c
2371  0A45  18 04       	jr	l_player_hit_platform_00112
2372  0A47              l_player_hit_platform_00105:
2373  0A47  21 00 00    	ld	hl,_player_hit_col
2374  0A4A  70          	ld	(hl), b
2375  0A4B              l_player_hit_platform_00112:
2376  0A4B  2A 00 00    	ld	hl,(_index1)
2377  0A4E  01 00 00    	ld	bc,_scr_map
2378  0A51  09          	add	hl,bc
2379  0A52  7E          	ld	a,(hl)
2380  0A53  FE 4D       	cp	a,0x4d
2381  0A55  20 4A       	jr	NZ,l_player_hit_platform_00114
2382  0A57  E5          	push	hl
2383  0A58  2A 00 00    	ld	hl,(_index1)
2384  0A5B  CD 00 00    	call	_game_match_back
2385  0A5E  C1          	pop	bc
2386  0A5F  7D          	ld	a,l
2387  0A60  02          	ld	(bc), a
2388  0A61  2A 00 00    	ld	hl,(_index1)
2389  0A64  CD 00 00    	call	_game_obj_set
2390  0A67  21 00 00    	ld	hl,_ay_fx_04_explosion
2391  0A6A  E5          	push	hl
2392  0A6B  21 01 04    	ld	hl,0x0401
2393  0A6E  E5          	push	hl
2394  0A6F  CD 00 00    	call	_ay_song_play
2395  0A72  21 00 00    	ld	hl,_index1
2396  0A75  7E          	ld	a, (hl)
2397  0A76  E6 0F       	and	a,0x0f
2398  0A78  87          	add	a, a
2399  0A79  57          	ld	d, a
2400  0A7A  4E          	ld	c, (hl)
2401  0A7B  23          	inc	hl
2402  0A7C  5E          	ld	e, (hl)
2403  0A7D  06 04       	ld	b,0x04
2404  0A7F  79          	ld	a,c
2405  0A80              l_player_hit_platform_00258:
2406  0A80  CB 3B       	srl	e
2407  0A82  1F          	rra
2408  0A83  10 FB       	djnz	l_player_hit_platform_00258
2409  0A85  07          	rlca
2410  0A86  07          	rlca
2411  0A87  07          	rlca
2412  0A88  07          	rlca
2413  0A89  E6 F0       	and	a,0xf0
2414  0A8B  47          	ld	b, a
2415  0A8C  21 00 00    	ld	hl,0x0000
2416  0A8F  E5          	push	hl
2417  0A90  21 87 03    	ld	hl,0x0387
2418  0A93  E5          	push	hl
2419  0A94  58          	ld	e,b
2420  0A95  D5          	push	de
2421  0A96  CD 00 00    	call	_spr_add_anim
2422  0A99  F1          	pop	af
2423  0A9A  F1          	pop	af
2424  0A9B  F1          	pop	af
2425  0A9C  2E 01       	ld	l,0x01
2426  0A9E  C3 82 0C    	jp	l_player_hit_platform_00148
2427  0AA1              l_player_hit_platform_00114:
2428  0AA1  FE 5A       	cp	a,0x5a
2429  0AA3  28 05       	jr	Z,l_player_hit_platform_00141
2430  0AA5  D6 5D       	sub	a,0x5d
2431  0AA7  C2 6C 0C    	jp	NZ,l_player_hit_platform_00142
2432  0AAA              l_player_hit_platform_00141:
2433  0AAA  3A 00 00    	ld	a,(_game_boss)
2434  0AAD  B7          	or	a, a
2435  0AAE  28 0B       	jr	Z,l_player_hit_platform_00174
2436  0AB0  3A 00 00    	ld	a,(_game_mush_count)
2437  0AB3  B7          	or	a, a
2438  0AB4  28 05       	jr	Z,l_player_hit_platform_00174
2439  0AB6  2E 00       	ld	l,0x00
2440  0AB8  C3 82 0C    	jp	l_player_hit_platform_00148
2441  0ABB              l_player_hit_platform_00174:
2442  0ABB  DD 36 FD 00 	ld	(ix-3),0x00
2443  0ABF              l_player_hit_platform_00138:
2444  0ABF  DD 7E FD    	ld	a,(ix-3)
2445  0AC2  D6 07       	sub	a,0x07
2446  0AC4  D2 6C 0C    	jp	NC, l_player_hit_platform_00142
2447  0AC7  01 00 00    	ld	bc,_mush_index
2448  0ACA  DD 6E FD    	ld	l,(ix-3)
2449  0ACD  26 00       	ld	h,0x00
2450  0ACF  09          	add	hl,bc
2451  0AD0  DD 75 FE    	ld	(ix-2),l
2452  0AD3  DD 74 FF    	ld	(ix-1),h
2453  0AD6  7E          	ld	a, (hl)
2454  0AD7  DD 77 FE    	ld	(ix-2),a
2455  0ADA  DD 36 FF 00 	ld	(ix-1),0x00
2456  0ADE  21 00 00    	ld	hl,_index1
2457  0AE1  7E          	ld	a, (hl)
2458  0AE2  DD 96 FE    	sub	a,(ix-2)
2459  0AE5  C2 66 0C    	jp	NZ,l_player_hit_platform_00137
2460  0AE8  23          	inc	hl
2461  0AE9  7E          	ld	a, (hl)
2462  0AEA  DD 96 FF    	sub	a,(ix-1)
2463  0AED  C2 66 0C    	jp	NZ,l_player_hit_platform_00137
2464  0AF0  3A 07 00    	ld	a,(_lin + 0x0007)
2465  0AF3  07          	rlca
2466  0AF4  07          	rlca
2467  0AF5  07          	rlca
2468  0AF6  07          	rlca
2469  0AF7  E6 0F       	and	a,0x0f
2470  0AF9  07          	rlca
2471  0AFA  07          	rlca
2472  0AFB  07          	rlca
2473  0AFC  07          	rlca
2474  0AFD  E6 F0       	and	a,0xf0
2475  0AFF  C6 E0       	add	a,0xe0
2476  0B01  32 00 00    	ld	(_s_lin1),a
2477  0B04  3A 07 00    	ld	a,(_col + 0x0007)
2478  0B07  CB 3F       	srl	a
2479  0B09  87          	add	a, a
2480  0B0A  32 00 00    	ld	(_s_col1),a
2481  0B0D  0E 00       	ld	c,0x00
2482  0B0F              l_player_hit_platform_00120:
2483  0B0F  79          	ld	a, c
2484  0B10  D6 07       	sub	a,0x07
2485  0B12  30 18       	jr	NC,l_player_hit_platform_00122
2486  0B14  06 00       	ld	b,0x00
2487  0B16  21 00 00    	ld	hl,_mush_index
2488  0B19  09          	add	hl, bc
2489  0B1A  46          	ld	b, (hl)
2490  0B1B  1E 00       	ld	e,0x00
2491  0B1D  21 00 00    	ld	hl,_index1
2492  0B20  7E          	ld	a, (hl)
2493  0B21  90          	sub	a, b
2494  0B22  20 05       	jr	NZ,l_player_hit_platform_00264
2495  0B24  23          	inc	hl
2496  0B25  7E          	ld	a, (hl)
2497  0B26  93          	sub	a, e
2498  0B27  28 03       	jr	Z,l_player_hit_platform_00122
2499  0B29              l_player_hit_platform_00264:
2500  0B29  0C          	inc	c
2501  0B2A  18 E3       	jr	l_player_hit_platform_00120
2502  0B2C              l_player_hit_platform_00122:
2503  0B2C  06 00       	ld	b,0x00
2504  0B2E  21 00 00    	ld	hl,_mush_class
2505  0B31  09          	add	hl, bc
2506  0B32  7E          	ld	a, (hl)
2507  0B33  FE 79       	cp	a,0x79
2508  0B35  28 18       	jr	Z,l_player_hit_platform_00123
2509  0B37  FE 7A       	cp	a,0x7a
2510  0B39  28 2F       	jr	Z,l_player_hit_platform_00124
2511  0B3B  FE 7B       	cp	a,0x7b
2512  0B3D  28 5F       	jr	Z,l_player_hit_platform_00126
2513  0B3F  FE 7C       	cp	a,0x7c
2514  0B41  28 41       	jr	Z,l_player_hit_platform_00125
2515  0B43  FE 7D       	cp	a,0x7d
2516  0B45  CA D2 0B    	jp	Z,l_player_hit_platform_00128
2517  0B48  D6 7E       	sub	a,0x7e
2518  0B4A  28 6C       	jr	Z,l_player_hit_platform_00127
2519  0B4C  C3 EA 0B    	jp	l_player_hit_platform_00129
2520  0B4F              l_player_hit_platform_00123:
2521  0B4F  2E 02       	ld	l,0x02
2522  0B51  CD 00 00    	call	_zx_border_fastcall
2523  0B54  3A 00 00    	ld	a,(_s_col1)
2524  0B57  21 06 FF    	ld	hl,0xff06
2525  0B5A  E5          	push	hl
2526  0B5B  F5          	push	af
2527  0B5C  33          	inc	sp
2528  0B5D  3A 00 00    	ld	a,(_s_lin1)
2529  0B60  F5          	push	af
2530  0B61  33          	inc	sp
2531  0B62  CD 00 00    	call	_enemy_init
2532  0B65  F1          	pop	af
2533  0B66  F1          	pop	af
2534  0B67  C3 EA 0B    	jp	l_player_hit_platform_00129
2535  0B6A              l_player_hit_platform_00124:
2536  0B6A  2E 02       	ld	l,0x02
2537  0B6C  CD 00 00    	call	_zx_border_fastcall
2538  0B6F  3A 00 00    	ld	a,(_s_col1)
2539  0B72  21 06 01    	ld	hl,0x0106
2540  0B75  E5          	push	hl
2541  0B76  F5          	push	af
2542  0B77  33          	inc	sp
2543  0B78  3A 00 00    	ld	a,(_s_lin1)
2544  0B7B  F5          	push	af
2545  0B7C  33          	inc	sp
2546  0B7D  CD 00 00    	call	_enemy_init
2547  0B80  F1          	pop	af
2548  0B81  F1          	pop	af
2549  0B82  18 66       	jr	l_player_hit_platform_00129
2550  0B84              l_player_hit_platform_00125:
2551  0B84  2E 01       	ld	l,0x01
2552  0B86  CD 00 00    	call	_zx_border_fastcall
2553  0B89  3A 00 00    	ld	a,(_s_col1)
2554  0B8C  21 07 01    	ld	hl,0x0107
2555  0B8F  E5          	push	hl
2556  0B90  F5          	push	af
2557  0B91  33          	inc	sp
2558  0B92  3A 00 00    	ld	a,(_s_lin1)
2559  0B95  F5          	push	af
2560  0B96  33          	inc	sp
2561  0B97  CD 00 00    	call	_enemy_init
2562  0B9A  F1          	pop	af
2563  0B9B  F1          	pop	af
2564  0B9C  18 4C       	jr	l_player_hit_platform_00129
2565  0B9E              l_player_hit_platform_00126:
2566  0B9E  2E 01       	ld	l,0x01
2567  0BA0  CD 00 00    	call	_zx_border_fastcall
2568  0BA3  3A 00 00    	ld	a,(_s_col1)
2569  0BA6  21 07 FF    	ld	hl,0xff07
2570  0BA9  E5          	push	hl
2571  0BAA  F5          	push	af
2572  0BAB  33          	inc	sp
2573  0BAC  3A 00 00    	ld	a,(_s_lin1)
2574  0BAF  F5          	push	af
2575  0BB0  33          	inc	sp
2576  0BB1  CD 00 00    	call	_enemy_init
2577  0BB4  F1          	pop	af
2578  0BB5  F1          	pop	af
2579  0BB6  18 32       	jr	l_player_hit_platform_00129
2580  0BB8              l_player_hit_platform_00127:
2581  0BB8  2E 04       	ld	l,0x04
2582  0BBA  CD 00 00    	call	_zx_border_fastcall
2583  0BBD  3A 00 00    	ld	a,(_s_col1)
2584  0BC0  21 08 01    	ld	hl,0x0108
2585  0BC3  E5          	push	hl
2586  0BC4  F5          	push	af
2587  0BC5  33          	inc	sp
2588  0BC6  3A 00 00    	ld	a,(_s_lin1)
2589  0BC9  F5          	push	af
2590  0BCA  33          	inc	sp
2591  0BCB  CD 00 00    	call	_enemy_init
2592  0BCE  F1          	pop	af
2593  0BCF  F1          	pop	af
2594  0BD0  18 18       	jr	l_player_hit_platform_00129
2595  0BD2              l_player_hit_platform_00128:
2596  0BD2  2E 04       	ld	l,0x04
2597  0BD4  CD 00 00    	call	_zx_border_fastcall
2598  0BD7  3A 00 00    	ld	a,(_s_col1)
2599  0BDA  21 08 FF    	ld	hl,0xff08
2600  0BDD  E5          	push	hl
2601  0BDE  F5          	push	af
2602  0BDF  33          	inc	sp
2603  0BE0  3A 00 00    	ld	a,(_s_lin1)
2604  0BE3  F5          	push	af
2605  0BE4  33          	inc	sp
2606  0BE5  CD 00 00    	call	_enemy_init
2607  0BE8  F1          	pop	af
2608  0BE9  F1          	pop	af
2609  0BEA              l_player_hit_platform_00129:
2610  0BEA  21 00 00    	ld	hl,_game_mush_count
2611  0BED  34          	inc	(hl)
2612  0BEE  3A 00 00    	ld	a,(_game_boss)
2613  0BF1  B7          	or	a, a
2614  0BF2  20 72       	jr	NZ,l_player_hit_platform_00137
2615  0BF4  3A 00 00    	ld	a,(_index1)
2616  0BF7  C6 F0       	add	a,0xf0
2617  0BF9  32 00 00    	ld	(_index0),a
2618  0BFC  3A 01 00    	ld	a,(_index1 + 1)
2619  0BFF  CE FF       	adc	a,0xff
2620  0C01  21 01 00    	ld	hl,_index0 + 1
2621  0C04  77          	ld	(hl), a
2622  0C05  3E 00       	ld	a, +((_scr_map) & 0xFF)
2623  0C07  2B          	dec	hl
2624  0C08  86          	add	a, (hl)
2625  0C09  4F          	ld	c, a
2626  0C0A  3E 00       	ld	a, +((_scr_map) / 256)
2627  0C0C  23          	inc	hl
2628  0C0D  8E          	adc	a, (hl)
2629  0C0E  47          	ld	b, a
2630  0C0F  C5          	push	bc
2631  0C10  2B          	dec	hl
2632  0C11  7E          	ld	a, (hl)
2633  0C12  23          	inc	hl
2634  0C13  66          	ld	h, (hl)
2635  0C14  6F          	ld	l, a
2636  0C15  CD 00 00    	call	_game_match_back
2637  0C18  C1          	pop	bc
2638  0C19  7D          	ld	a,l
2639  0C1A  02          	ld	(bc), a
2640  0C1B  3E 00       	ld	a, +((_scr_map) & 0xFF)
2641  0C1D  21 00 00    	ld	hl,_index1
2642  0C20  86          	add	a, (hl)
2643  0C21  DD 77 FE    	ld	(ix-2),a
2644  0C24  3E 00       	ld	a, +((_scr_map) / 256)
2645  0C26  23          	inc	hl
2646  0C27  8E          	adc	a, (hl)
2647  0C28  DD 6E FE    	ld	l,(ix-2)
2648  0C2B  DD 77 FF    	ld	(ix-1),a
2649  0C2E  67          	ld	h,a
2650  0C2F  7E          	ld	a, (hl)
2651  0C30  FE 5A       	cp	a,0x5a
2652  0C32  28 04       	jr	Z,l_player_hit_platform_00130
2653  0C34  D6 5D       	sub	a,0x5d
2654  0C36  20 0A       	jr	NZ,l_player_hit_platform_00131
2655  0C38              l_player_hit_platform_00130:
2656  0C38  DD 6E FE    	ld	l,(ix-2)
2657  0C3B  DD 66 FF    	ld	h,(ix-1)
2658  0C3E  36 4F       	ld	(hl),0x4f
2659  0C40  18 08       	jr	l_player_hit_platform_00132
2660  0C42              l_player_hit_platform_00131:
2661  0C42  DD 6E FE    	ld	l,(ix-2)
2662  0C45  DD 66 FF    	ld	h,(ix-1)
2663  0C48  36 54       	ld	(hl),0x54
2664  0C4A              l_player_hit_platform_00132:
2665  0C4A  2A 00 00    	ld	hl,(_index1)
2666  0C4D  01 F0 FF    	ld	bc,0xfff0
2667  0C50  09          	add	hl,bc
2668  0C51  CD 00 00    	call	_game_obj_set
2669  0C54  3A 00 00    	ld	a,(_s_lin1)
2670  0C57  C6 10       	add	a,0x10
2671  0C59  4F          	ld	c, a
2672  0C5A  3A 00 00    	ld	a, (_s_col1)
2673  0C5D  47          	ld	b,a
2674  0C5E  C5          	push	bc
2675  0C5F  3E 4F       	ld	a,0x4f
2676  0C61  F5          	push	af
2677  0C62  33          	inc	sp
2678  0C63  CD 00 00    	call	_NIRVANAP_drawT_callee
2679  0C66              l_player_hit_platform_00137:
2680  0C66  DD 34 FD    	inc	(ix-3)
2681  0C69  C3 BF 0A    	jp	l_player_hit_platform_00138
2682  0C6C              l_player_hit_platform_00142:
2683  0C6C  21 00 00    	ld	hl,_ay_fx_04_golpe
2684  0C6F  E5          	push	hl
2685  0C70  21 01 04    	ld	hl,0x0401
2686  0C73  E5          	push	hl
2687  0C74  CD 00 00    	call	_ay_song_play
2688  0C77  2E 01       	ld	l,0x01
2689  0C79  CD 00 00    	call	_spr_brick_anim
2690  0C7C  2E 01       	ld	l,0x01
2691  0C7E  18 02       	jr	l_player_hit_platform_00148
2692  0C80              l_player_hit_platform_00145:
2693  0C80  2E 00       	ld	l,0x00
2694  0C82              l_player_hit_platform_00148:
2695  0C82  DD F9       	ld	sp, ix
2696  0C84  DD E1       	pop	ix
2697  0C86  C9          	ret
2698  0C87              	SECTION code_compiler
2699  0C87              ;	---------------------------------
2700  0C87              ; Function player_hit_platform_clear
2701  0C87              ; ---------------------------------
2702  0C87              _player_hit_platform_clear:
2703  0C87  3E 04       	ld	a,0x04
2704  0C89  F5          	push	af
2705  0C8A  33          	inc	sp
2706  0C8B  21 0E 00    	ld	hl, +(_spr_timer + 0x000e)
2707  0C8E  E5          	push	hl
2708  0C8F  CD 00 00    	call	_game_check_time
2709  0C92  F1          	pop	af
2710  0C93  33          	inc	sp
2711  0C94  7D          	ld	a, l
2712  0C95  B7          	or	a, a
2713  0C96  C8          	ret	Z
2714  0C97  2A FF FF    	ld	hl,(_player_hit_col - 1)
2715  0C9A  3A 00 00    	ld	a,(_player_hit_lin)
2716  0C9D  6F          	ld	l,a
2717  0C9E  E5          	push	hl
2718  0C9F  CD 00 00    	call	_spr_calc_index
2719  0CA2  F1          	pop	af
2720  0CA3  22 00 00    	ld	(_index1),hl
2721  0CA6  2E 00       	ld	l,0x00
2722  0CA8  CD 00 00    	call	_spr_brick_anim
2723  0CAB  21 00 00    	ld	hl,_player_hit_lin
2724  0CAE  36 00       	ld	(hl),0x00
2725  0CB0  21 00 00    	ld	hl,_player_hit_col
2726  0CB3  36 00       	ld	(hl),0x00
2727  0CB5  C9          	ret
2728  0CB6              	SECTION code_compiler
2729  0CB6              ;	---------------------------------
2730  0CB6              ; Function player_score_add
2731  0CB6              ; ---------------------------------
2732  0CB6              _player_score_add:
2733  0CB6  ED 4B 00 00 	ld	bc,(_player_score)
2734  0CBA  09          	add	hl,bc
2735  0CBB  22 00 00    	ld	(_player_score),hl
2736  0CBE  21 00 00    	ld	hl,_player_lvl
2737  0CC1  7E          	ld	a, (hl)
2738  0CC2  D6 14       	sub	a,0x14
2739  0CC4  30 42       	jr	NC,l_player_score_add_00104
2740  0CC6  01 00 00    	ld	bc,_player_lvl_table+0
2741  0CC9  6E          	ld	l,(hl)
2742  0CCA  26 00       	ld	h,0x00
2743  0CCC  29          	add	hl, hl
2744  0CCD  09          	add	hl, bc
2745  0CCE  4E          	ld	c, (hl)
2746  0CCF  23          	inc	hl
2747  0CD0  46          	ld	b, (hl)
2748  0CD1  21 00 00    	ld	hl,_player_score
2749  0CD4  7E          	ld	a, (hl)
2750  0CD5  91          	sub	a, c
2751  0CD6  23          	inc	hl
2752  0CD7  7E          	ld	a, (hl)
2753  0CD8  98          	sbc	a, b
2754  0CD9  38 2D       	jr	C,l_player_score_add_00104
2755  0CDB  21 00 00    	ld	hl,_player_lvl
2756  0CDE  34          	inc	(hl)
2757  0CDF  CD 00 00    	call	_game_update_stats
2758  0CE2  CD 00 00    	call	_spr_flatten
2759  0CE5  21 16 00    	ld	hl,___str_2
2760  0CE8  E5          	push	hl
2761  0CE9  21 0C 0C    	ld	hl,0x0c0c
2762  0CEC  E5          	push	hl
2763  0CED  CD 00 00    	call	_zx_print_str
2764  0CF0  AF          	xor	a, a
2765  0CF1  F5          	push	af
2766  0CF2  33          	inc	sp
2767  0CF3  21 3C 00    	ld	hl,0x003c
2768  0CF6  E5          	push	hl
2769  0CF7  21 0C 15    	ld	hl,0x150c
2770  0CFA  E5          	push	hl
2771  0CFB  3E 0C       	ld	a,0x0c
2772  0CFD  F5          	push	af
2773  0CFE  33          	inc	sp
2774  0CFF  CD 00 00    	call	_game_colour_message
2775  0D02  F1          	pop	af
2776  0D03  F1          	pop	af
2777  0D04  F1          	pop	af
2778  0D05  CD 00 00    	call	_spr_unflatten
2779  0D08              l_player_score_add_00104:
2780  0D08  3A 00 00    	ld	a,(_game_score_top)
2781  0D0B  21 00 00    	ld	hl,_player_score
2782  0D0E  96          	sub	a, (hl)
2783  0D0F  3A 01 00    	ld	a,(_game_score_top + 1)
2784  0D12  23          	inc	hl
2785  0D13  9E          	sbc	a, (hl)
2786  0D14  30 06       	jr	NC,l_player_score_add_00106
2787  0D16  2A 00 00    	ld	hl,(_player_score)
2788  0D19  22 00 00    	ld	(_game_score_top),hl
2789  0D1C              l_player_score_add_00106:
2790  0D1C  CD 00 00    	call	_game_print_score
2791  0D1F  C9          	ret
2792  0D20              	SECTION rodata_compiler
2793  0016              ___str_2:
2794  0016  4C 45 56 45 4C 20 55 50 21 
                        	DEFM "LEVEL UP!"
2795  001F  00          	DEFB 0x00
2796  0020              	SECTION code_compiler
2797  0D20              ;	---------------------------------
2798  0D20              ; Function player_check_floor
2799  0D20              ; ---------------------------------
2800  0D20              _player_check_floor:
2801  0D20  CD 00 00    	call	___sdcc_enter_ix
2802  0D23  F5          	push	af
2803  0D24  F5          	push	af
2804  0D25  F5          	push	af
2805  0D26  21 07 00    	ld	hl,+(_col + 0x0007)
2806  0D29  56          	ld	d, (hl)
2807  0D2A  3A 07 00    	ld	a,(_lin + 0x0007)
2808  0D2D  C6 10       	add	a,0x10
2809  0D2F  5F          	ld	e, a
2810  0D30  D5          	push	de
2811  0D31  CD 00 00    	call	_spr_calc_index
2812  0D34  F1          	pop	af
2813  0D35  DD 75 FC    	ld	(ix-4),l
2814  0D38  DD 74 FD    	ld	(ix-3),h
2815  0D3B  01 00 00    	ld	bc,_scr_map+0
2816  0D3E  79          	ld	a, c
2817  0D3F  DD 86 FC    	add	a,(ix-4)
2818  0D42  DD 77 FE    	ld	(ix-2),a
2819  0D45  78          	ld	a, b
2820  0D46  DD 8E FD    	adc	a,(ix-3)
2821  0D49  DD 6E FE    	ld	l,(ix-2)
2822  0D4C  DD 77 FF    	ld	(ix-1),a
2823  0D4F  67          	ld	h,a
2824  0D50  7E          	ld	a, (hl)
2825  0D51  DD 77 FB    	ld	(ix-5),a
2826  0D54  DD 6E FC    	ld	l,(ix-4)
2827  0D57  DD 66 FD    	ld	h,(ix-3)
2828  0D5A  23          	inc	hl
2829  0D5B  09          	add	hl,bc
2830  0D5C  3A 00 00    	ld	a,(_s_lin0)
2831  0D5F  D6 90       	sub	a,0x90
2832  0D61  4D          	ld	c,l
2833  0D62  44          	ld	b,h
2834  0D63  20 26       	jr	NZ,l_player_check_floor_00108
2835  0D65  3A 00 00    	ld	a,(_map_heigth)
2836  0D68  C5          	push	bc
2837  0D69  F5          	push	af
2838  0D6A  33          	inc	sp
2839  0D6B  3A 00 00    	ld	a,(_scr_curr)
2840  0D6E  F5          	push	af
2841  0D6F  33          	inc	sp
2842  0D70  CD 00 00    	call	__divuchar_callee
2843  0D73  C1          	pop	bc
2844  0D74  7D          	ld	a,l
2845  0D75  3C          	inc	a
2846  0D76  32 00 00    	ld	(_tmp1),a
2847  0D79  21 00 00    	ld	hl,_map_heigth
2848  0D7C  96          	sub	a, (hl)
2849  0D7D  30 06       	jr	NC,l_player_check_floor_00102
2850  0D7F  DD 36 FB 00 	ld	(ix-5),0x00
2851  0D83  18 16       	jr	l_player_check_floor_00109
2852  0D85              l_player_check_floor_00102:
2853  0D85  DD 36 FB 48 	ld	(ix-5),0x48
2854  0D89  18 10       	jr	l_player_check_floor_00109
2855  0D8B              l_player_check_floor_00108:
2856  0D8B  3A 07 00    	ld	a,(_col + 0x0007)
2857  0D8E  0F          	rrca
2858  0D8F  38 06       	jr	C,l_player_check_floor_00105
2859  0D91  DD 36 FA 00 	ld	(ix-6),0x00
2860  0D95  18 04       	jr	l_player_check_floor_00109
2861  0D97              l_player_check_floor_00105:
2862  0D97  0A          	ld	a, (bc)
2863  0D98  DD 77 FA    	ld	(ix-6),a
2864  0D9B              l_player_check_floor_00109:
2865  0D9B  DD 7E FB    	ld	a,(ix-5)
2866  0D9E  D6 3A       	sub	a,0x3a
2867  0DA0  38 07       	jr	C,l_player_check_floor_00132
2868  0DA2  DD 7E FB    	ld	a,(ix-5)
2869  0DA5  D6 60       	sub	a,0x60
2870  0DA7  38 32       	jr	C,l_player_check_floor_00128
2871  0DA9              l_player_check_floor_00132:
2872  0DA9  DD 7E FA    	ld	a,(ix-6)
2873  0DAC  D6 3A       	sub	a,0x3a
2874  0DAE  38 07       	jr	C,l_player_check_floor_00127
2875  0DB0  DD 7E FA    	ld	a,(ix-6)
2876  0DB3  D6 60       	sub	a,0x60
2877  0DB5  38 24       	jr	C,l_player_check_floor_00128
2878  0DB7              l_player_check_floor_00127:
2879  0DB7  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
2880  0DBA  36 02       	ld	(hl),0x02
2881  0DBC  21 00 00    	ld	hl,_s_state
2882  0DBF  CB CE       	set	1, (hl)
2883  0DC1  2E 00       	ld	l,0x00
2884  0DC3  CD 62 06    	call	_player_check_stairs
2885  0DC6  3A 00 00    	ld	a,(_player_onstair)
2886  0DC9  B7          	or	a, a
2887  0DCA  C2 71 0E    	jp	NZ, l_player_check_floor_00133
2888  0DCD  3A 00 00    	ld	a,(_s_lin0)
2889  0DD0  D6 90       	sub	a,0x90
2890  0DD2  C2 71 0E    	jp	NZ,l_player_check_floor_00133
2891  0DD5  CD 00 00    	call	_spr_page_down
2892  0DD8  C3 71 0E    	jp	l_player_check_floor_00133
2893  0DDB              l_player_check_floor_00128:
2894  0DDB  C5          	push	bc
2895  0DDC  3E 10       	ld	a,0x10
2896  0DDE  F5          	push	af
2897  0DDF  33          	inc	sp
2898  0DE0  21 00 00    	ld	hl,_player_brick_time
2899  0DE3  E5          	push	hl
2900  0DE4  CD 00 00    	call	_game_check_time
2901  0DE7  F1          	pop	af
2902  0DE8  33          	inc	sp
2903  0DE9  C1          	pop	bc
2904  0DEA  7D          	ld	a,l
2905  0DEB  B7          	or	a, a
2906  0DEC  CA 71 0E    	jp	Z, l_player_check_floor_00133
2907  0DEF  2A 00 00    	ld	hl,(_curr_time)
2908  0DF2  22 00 00    	ld	(_player_brick_time),hl
2909  0DF5  DD 7E FB    	ld	a,(ix-5)
2910  0DF8  D6 40       	sub	a,0x40
2911  0DFA  20 18       	jr	NZ,l_player_check_floor_00114
2912  0DFC  C5          	push	bc
2913  0DFD  DD 6E FC    	ld	l,(ix-4)
2914  0E00  DD 66 FD    	ld	h,(ix-3)
2915  0E03  CD 00 00    	call	_game_match_back
2916  0E06  C1          	pop	bc
2917  0E07  5D          	ld	e,l
2918  0E08  DD 6E FE    	ld	l,(ix-2)
2919  0E0B  DD 66 FF    	ld	h,(ix-1)
2920  0E0E  73          	ld	(hl), e
2921  0E0F  C5          	push	bc
2922  0E10  CD 76 0E    	call	_player_gasta_brick
2923  0E13  C1          	pop	bc
2924  0E14              l_player_check_floor_00114:
2925  0E14  DD 7E FB    	ld	a,(ix-5)
2926  0E17  D6 3F       	sub	a,0x3f
2927  0E19  20 0D       	jr	NZ,l_player_check_floor_00116
2928  0E1B  DD 6E FE    	ld	l,(ix-2)
2929  0E1E  DD 66 FF    	ld	h,(ix-1)
2930  0E21  36 40       	ld	(hl),0x40
2931  0E23  C5          	push	bc
2932  0E24  CD 76 0E    	call	_player_gasta_brick
2933  0E27  C1          	pop	bc
2934  0E28              l_player_check_floor_00116:
2935  0E28  DD 7E FB    	ld	a,(ix-5)
2936  0E2B  D6 3E       	sub	a,0x3e
2937  0E2D  20 0D       	jr	NZ,l_player_check_floor_00118
2938  0E2F  DD 6E FE    	ld	l,(ix-2)
2939  0E32  DD 66 FF    	ld	h,(ix-1)
2940  0E35  36 3F       	ld	(hl),0x3f
2941  0E37  C5          	push	bc
2942  0E38  CD 76 0E    	call	_player_gasta_brick
2943  0E3B  C1          	pop	bc
2944  0E3C              l_player_check_floor_00118:
2945  0E3C  DD 7E FA    	ld	a,(ix-6)
2946  0E3F  D6 40       	sub	a,0x40
2947  0E41  20 12       	jr	NZ,l_player_check_floor_00120
2948  0E43  C5          	push	bc
2949  0E44  DD 6E FC    	ld	l,(ix-4)
2950  0E47  DD 66 FD    	ld	h,(ix-3)
2951  0E4A  CD 00 00    	call	_game_match_back
2952  0E4D  C1          	pop	bc
2953  0E4E  7D          	ld	a,l
2954  0E4F  02          	ld	(bc), a
2955  0E50  C5          	push	bc
2956  0E51  CD 76 0E    	call	_player_gasta_brick
2957  0E54  C1          	pop	bc
2958  0E55              l_player_check_floor_00120:
2959  0E55  DD 7E FA    	ld	a,(ix-6)
2960  0E58  D6 3F       	sub	a,0x3f
2961  0E5A  20 08       	jr	NZ,l_player_check_floor_00122
2962  0E5C  3E 40       	ld	a,0x40
2963  0E5E  02          	ld	(bc), a
2964  0E5F  C5          	push	bc
2965  0E60  CD 76 0E    	call	_player_gasta_brick
2966  0E63  C1          	pop	bc
2967  0E64              l_player_check_floor_00122:
2968  0E64  DD 7E FA    	ld	a,(ix-6)
2969  0E67  D6 3E       	sub	a,0x3e
2970  0E69  20 06       	jr	NZ,l_player_check_floor_00133
2971  0E6B  3E 3F       	ld	a,0x3f
2972  0E6D  02          	ld	(bc), a
2973  0E6E  CD 76 0E    	call	_player_gasta_brick
2974  0E71              l_player_check_floor_00133:
2975  0E71  DD F9       	ld	sp, ix
2976  0E73  DD E1       	pop	ix
2977  0E75  C9          	ret
2978  0E76              	SECTION code_compiler
2979  0E76              ;	---------------------------------
2980  0E76              ; Function player_gasta_brick
2981  0E76              ; ---------------------------------
2982  0E76              _player_gasta_brick:
2983  0E76  3A 00 00    	ld	a,(_s_lin0)
2984  0E79  32 00 00    	ld	(_s_lin1),a
2985  0E7C  3A 00 00    	ld	a,(_s_col0)
2986  0E7F  32 00 00    	ld	(_s_col1),a
2987  0E82  3A 07 00    	ld	a,(_lin + 0x0007)
2988  0E85  C6 10       	add	a,0x10
2989  0E87  32 00 00    	ld	(_s_lin0),a
2990  0E8A  3A 07 00    	ld	a,(_col + 0x0007)
2991  0E8D  32 00 00    	ld	(_s_col0),a
2992  0E90  CD 00 00    	call	_spr_back_repaint
2993  0E93  3A 00 00    	ld	a,(_s_lin1)
2994  0E96  32 00 00    	ld	(_s_lin0),a
2995  0E99  3A 00 00    	ld	a,(_s_col1)
2996  0E9C  32 00 00    	ld	(_s_col0),a
2997  0E9F  C9          	ret
2998  0EA0              	SECTION code_compiler
2999  0EA0              ;	---------------------------------
3000  0EA0              ; Function player_move_jump
3001  0EA0              ; ---------------------------------
3002  0EA0              _player_move_jump:
3003  0EA0  21 00 00    	ld	hl,_game_gravity
3004  0EA3  4E          	ld	c, (hl)
3005  0EA4  21 00 00    	ld	hl,_player_vel_y
3006  0EA7  7E          	ld	a, (hl)
3007  0EA8  81          	add	a, c
3008  0EA9  77          	ld	(hl), a
3009  0EAA  21 00 00    	ld	hl,_sprite_on_air
3010  0EAD  36 01       	ld	(hl),0x01
3011  0EAF  3A 00 00    	ld	a,(_player_vel_inc)
3012  0EB2  B7          	or	a, a
3013  0EB3  28 4A       	jr	Z,l_player_move_jump_00109
3014  0EB5  3A 00 00    	ld	a,(_dirs)
3015  0EB8  CB 07       	rlc	a
3016  0EBA  E6 01       	and	a,0x01
3017  0EBC  4F          	ld	c, a
3018  0EBD  3A 00 00    	ld	a,(_game_2buttons)
3019  0EC0  B7          	or	a, a
3020  0EC1  28 06       	jr	Z,l_player_move_jump_00102
3021  0EC3  79          	ld	a, c
3022  0EC4  EE 01       	xor	a,0x01
3023  0EC6  4F          	ld	c, a
3024  0EC7  18 15       	jr	l_player_move_jump_00103
3025  0EC9              l_player_move_jump_00102:
3026  0EC9  CB 41       	bit	0, c
3027  0ECB  28 07       	jr	Z,l_player_move_jump_00154
3028  0ECD  21 00 00    	ld	hl,_dirs
3029  0ED0  CB 46       	bit	0, (hl)
3030  0ED2  20 04       	jr	NZ,l_player_move_jump_00155
3031  0ED4              l_player_move_jump_00154:
3032  0ED4  0E 00       	ld	c,0x00
3033  0ED6  18 02       	jr	l_player_move_jump_00156
3034  0ED8              l_player_move_jump_00155:
3035  0ED8  0E 01       	ld	c,0x01
3036  0EDA              l_player_move_jump_00156:
3037  0EDA  79          	ld	a, c
3038  0EDB  EE 01       	xor	a,0x01
3039  0EDD  4F          	ld	c, a
3040  0EDE              l_player_move_jump_00103:
3041  0EDE  79          	ld	a, c
3042  0EDF  B7          	or	a, a
3043  0EE0  28 1D       	jr	Z,l_player_move_jump_00109
3044  0EE2  3A 00 00    	ld	a,(_player_vel_y1)
3045  0EE5  21 00 00    	ld	hl,_player_vel_y
3046  0EE8  96          	sub	a, (hl)
3047  0EE9  E2 EE 0E    	jp	PO, l_player_move_jump_00259
3048  0EEC  EE 80       	xor	a,0x80
3049  0EEE              l_player_move_jump_00259:
3050  0EEE  F2 FF 0E    	jp	P, l_player_move_jump_00109
3051  0EF1  21 00 00    	ld	hl,_player_vel_y
3052  0EF4  CB 7E       	bit	7,(hl)
3053  0EF6  28 07       	jr	Z,l_player_move_jump_00109
3054  0EF8  36 00       	ld	(hl),0x00
3055  0EFA  21 00 00    	ld	hl,_player_vel_inc
3056  0EFD  36 00       	ld	(hl),0x00
3057  0EFF              l_player_move_jump_00109:
3058  0EFF  3E 78       	ld	a,0x78
3059  0F01  21 00 00    	ld	hl,_player_vel_y
3060  0F04  96          	sub	a, (hl)
3061  0F05  E2 0A 0F    	jp	PO, l_player_move_jump_00260
3062  0F08  EE 80       	xor	a,0x80
3063  0F0A              l_player_move_jump_00260:
3064  0F0A  F2 12 0F    	jp	P, l_player_move_jump_00111
3065  0F0D  21 00 00    	ld	hl,_player_vel_y
3066  0F10  36 78       	ld	(hl),0x78
3067  0F12              l_player_move_jump_00111:
3068  0F12  21 00 00    	ld	hl,_player_vel_y
3069  0F15  7E          	ld	a, (hl)
3070  0F16  EE 80       	xor	a,0x80
3071  0F18  D6 08       	sub	a,0x08
3072  0F1A  30 02       	jr	NC,l_player_move_jump_00113
3073  0F1C  36 88       	ld	(hl),0x88
3074  0F1E              l_player_move_jump_00113:
3075  0F1E  3A 00 00    	ld	a,(_player_vel_y)
3076  0F21  4F          	ld	c,a
3077  0F22  17          	rla
3078  0F23  9F          	sbc	a, a
3079  0F24  47          	ld	b, a
3080  0F25  CB 41       	bit	0,c
3081  0F27  21 00 00    	ld	hl,_s_lin1
3082  0F2A  71          	ld	(hl),c
3083  0F2B  28 04       	jr	Z,l_player_move_jump_00115
3084  0F2D  21 00 00    	ld	hl,_s_lin1
3085  0F30  35          	dec	(hl)
3086  0F31              l_player_move_jump_00115:
3087  0F31  3A 07 00    	ld	a,(_lin + 0x0007)
3088  0F34  21 00 00    	ld	hl,_s_lin1
3089  0F37  86          	add	a, (hl)
3090  0F38  77          	ld	(hl), a
3091  0F39  CB 78       	bit	7, b
3092  0F3B  28 5C       	jr	Z,l_player_move_jump_00141
3093  0F3D  21 00 00    	ld	hl,_s_state
3094  0F40  CD 00 00    	call	_spr_set_up
3095  0F43  3E 90       	ld	a,0x90
3096  0F45  21 00 00    	ld	hl,_s_lin1
3097  0F48  96          	sub	a, (hl)
3098  0F49  30 11       	jr	NC,l_player_move_jump_00120
3099  0F4B  CD 00 00    	call	_spr_page_up
3100  0F4E  7D          	ld	a, l
3101  0F4F  B7          	or	a, a
3102  0F50  28 05       	jr	Z,l_player_move_jump_00117
3103  0F52  2E 00       	ld	l,0x00
3104  0F54  C3 50 10    	jp	l_player_move_jump_00152
3105  0F57              l_player_move_jump_00117:
3106  0F57  21 00 00    	ld	hl,_s_lin1
3107  0F5A  36 00       	ld	(hl),0x00
3108  0F5C              l_player_move_jump_00120:
3109  0F5C  21 07 00    	ld	hl,+(_col + 0x0007)
3110  0F5F  46          	ld	b, (hl)
3111  0F60  C5          	push	bc
3112  0F61  33          	inc	sp
3113  0F62  3A 00 00    	ld	a,(_s_lin1)
3114  0F65  F5          	push	af
3115  0F66  33          	inc	sp
3116  0F67  CD 00 00    	call	_game_check_map
3117  0F6A  F1          	pop	af
3118  0F6B  7C          	ld	a,h
3119  0F6C  B5          	or	a,l
3120  0F6D  28 21       	jr	Z,l_player_move_jump_00124
3121  0F6F  CD C7 09    	call	_player_hit_platform
3122  0F72  7D          	ld	a, l
3123  0F73  B7          	or	a, a
3124  0F74  28 12       	jr	Z,l_player_move_jump_00122
3125  0F76  3A 07 00    	ld	a,(_lin + 0x0007)
3126  0F79  07          	rlca
3127  0F7A  07          	rlca
3128  0F7B  07          	rlca
3129  0F7C  07          	rlca
3130  0F7D  E6 0F       	and	a,0x0f
3131  0F7F  07          	rlca
3132  0F80  07          	rlca
3133  0F81  07          	rlca
3134  0F82  07          	rlca
3135  0F83  E6 F0       	and	a,0xf0
3136  0F85  32 07 00    	ld	((_lin + 0x0007)),a
3137  0F88              l_player_move_jump_00122:
3138  0F88  21 00 00    	ld	hl,_player_vel_y
3139  0F8B  36 00       	ld	(hl),0x00
3140  0F8D  C3 18 10    	jp	l_player_move_jump_00142
3141  0F90              l_player_move_jump_00124:
3142  0F90  3A 00 00    	ld	a,(_s_lin1)
3143  0F93  32 07 00    	ld	((_lin + 0x0007)),a
3144  0F96  C3 18 10    	jp	l_player_move_jump_00142
3145  0F99              l_player_move_jump_00141:
3146  0F99  21 00 00    	ld	hl,_s_state
3147  0F9C  CD 00 00    	call	_spr_set_down
3148  0F9F  3E 90       	ld	a,0x90
3149  0FA1  21 00 00    	ld	hl,_s_lin1
3150  0FA4  96          	sub	a, (hl)
3151  0FA5  30 11       	jr	NC,l_player_move_jump_00130
3152  0FA7  CD 00 00    	call	_spr_page_down
3153  0FAA  7D          	ld	a, l
3154  0FAB  B7          	or	a, a
3155  0FAC  28 05       	jr	Z,l_player_move_jump_00127
3156  0FAE  2E 00       	ld	l,0x00
3157  0FB0  C3 50 10    	jp	l_player_move_jump_00152
3158  0FB3              l_player_move_jump_00127:
3159  0FB3  21 00 00    	ld	hl,_s_lin1
3160  0FB6  36 90       	ld	(hl),0x90
3161  0FB8              l_player_move_jump_00130:
3162  0FB8  21 07 00    	ld	hl,+(_col + 0x0007)
3163  0FBB  56          	ld	d, (hl)
3164  0FBC  3A 00 00    	ld	a,(_s_lin1)
3165  0FBF  C6 10       	add	a,0x10
3166  0FC1  5F          	ld	e, a
3167  0FC2  D5          	push	de
3168  0FC3  CD 00 00    	call	_game_check_map
3169  0FC6  F1          	pop	af
3170  0FC7  7C          	ld	a,h
3171  0FC8  B5          	or	a,l
3172  0FC9  28 47       	jr	Z,l_player_move_jump_00138
3173  0FCB  2E 00       	ld	l,0x00
3174  0FCD  CD 62 06    	call	_player_check_stairs
3175  0FD0  3A 00 00    	ld	a,(_player_onstair)
3176  0FD3  B7          	or	a, a
3177  0FD4  20 05       	jr	NZ,l_player_move_jump_00132
3178  0FD6  2E 01       	ld	l,0x01
3179  0FD8  CD 62 06    	call	_player_check_stairs
3180  0FDB              l_player_move_jump_00132:
3181  0FDB  3A 00 00    	ld	a,(_player_onstair)
3182  0FDE  B7          	or	a, a
3183  0FDF  20 12       	jr	NZ,l_player_move_jump_00134
3184  0FE1  3A 00 00    	ld	a,(_s_lin1)
3185  0FE4  07          	rlca
3186  0FE5  07          	rlca
3187  0FE6  07          	rlca
3188  0FE7  07          	rlca
3189  0FE8  E6 0F       	and	a,0x0f
3190  0FEA  07          	rlca
3191  0FEB  07          	rlca
3192  0FEC  07          	rlca
3193  0FED  07          	rlca
3194  0FEE  E6 F0       	and	a,0xf0
3195  0FF0  32 07 00    	ld	((_lin + 0x0007)),a
3196  0FF3              l_player_move_jump_00134:
3197  0FF3  21 00 00    	ld	hl,_player_vel_y
3198  0FF6  36 00       	ld	(hl),0x00
3199  0FF8  21 00 00    	ld	hl,_s_state
3200  0FFB  7E          	ld	a,(hl)
3201  0FFC  E6 FC       	and	a,+(0xfd&0xfe)
3202  0FFE  77          	ld	(hl),a
3203  0FFF  3A 07 00    	ld	a,(_lin + 0x0007)
3204  1002  D6 90       	sub	a,0x90
3205  1004  38 03       	jr	C,l_player_move_jump_00136
3206  1006  CD 00 00    	call	_spr_page_down
3207  1009              l_player_move_jump_00136:
3208  1009  21 07 00    	ld	hl, +(_colint + 0x0007)
3209  100C  36 00       	ld	(hl),0x00
3210  100E  2E 01       	ld	l,0x01
3211  1010  18 3E       	jr	l_player_move_jump_00152
3212  1012              l_player_move_jump_00138:
3213  1012  3A 00 00    	ld	a,(_s_lin1)
3214  1015  32 07 00    	ld	((_lin + 0x0007)),a
3215  1018              l_player_move_jump_00142:
3216  1018  21 00 00    	ld	hl,_s_state
3217  101B  CB 5E       	bit	3, (hl)
3218  101D  20 21       	jr	NZ,l_player_move_jump_00148
3219  101F  21 00 00    	ld	hl,_s_state
3220  1022  CB 56       	bit	2, (hl)
3221  1024  20 1A       	jr	NZ,l_player_move_jump_00148
3222  1026  21 00 00    	ld	hl,_dirs
3223  1029  CB 56       	bit	2, (hl)
3224  102B  28 06       	jr	Z,l_player_move_jump_00144
3225  102D  21 00 00    	ld	hl,_s_state
3226  1030  CD 00 00    	call	_spr_set_left
3227  1033              l_player_move_jump_00144:
3228  1033  21 00 00    	ld	hl,_dirs
3229  1036  CB 5E       	bit	3, (hl)
3230  1038  28 06       	jr	Z,l_player_move_jump_00148
3231  103A  21 00 00    	ld	hl,_s_state
3232  103D  CD 00 00    	call	_spr_set_right
3233  1040              l_player_move_jump_00148:
3234  1040  CD 00 00    	call	_spr_move_horizontal
3235  1043  7D          	ld	a, l
3236  1044  B7          	or	a, a
3237  1045  28 07       	jr	Z,l_player_move_jump_00151
3238  1047  21 00 00    	ld	hl,_s_state
3239  104A  7E          	ld	a,(hl)
3240  104B  E6 F3       	and	a,+(0xf7&0xfb)
3241  104D  77          	ld	(hl),a
3242  104E              l_player_move_jump_00151:
3243  104E  2E 00       	ld	l,0x00
3244  1050              l_player_move_jump_00152:
3245  1050  C9          	ret
3246  1051              	SECTION code_compiler
3247  1051              ;	---------------------------------
3248  1051              ; Function player_open_door
3249  1051              ; ---------------------------------
3250  1051              _player_open_door:
3251  1051  CD 00 00    	call	___sdcc_enter_ix
3252  1054  21 00 00    	ld	hl,_ay_fx_04_pierto_abierta
3253  1057  E5          	push	hl
3254  1058  21 01 04    	ld	hl,0x0401
3255  105B  E5          	push	hl
3256  105C  CD 00 00    	call	_ay_song_play
3257  105F  0E 00       	ld	c,0x00
3258  1061  DD 7E 06    	ld	a,(ix+6)
3259  1064  D6 48       	sub	a,0x48
3260  1066  28 17       	jr	Z,l_player_open_door_00101
3261  1068  DD 7E 06    	ld	a,(ix+6)
3262  106B  D6 49       	sub	a,0x49
3263  106D  28 1F       	jr	Z,l_player_open_door_00104
3264  106F  DD 7E 06    	ld	a,(ix+6)
3265  1072  D6 4A       	sub	a,0x4a
3266  1074  28 27       	jr	Z,l_player_open_door_00107
3267  1076  DD 7E 06    	ld	a,(ix+6)
3268  1079  D6 4B       	sub	a,0x4b
3269  107B  28 2F       	jr	Z,l_player_open_door_00110
3270  107D  18 3A       	jr	l_player_open_door_00113
3271  107F              l_player_open_door_00101:
3272  107F  3A 00 00    	ld	a,(_player_keys)
3273  1082  B7          	or	a, a
3274  1083  28 34       	jr	Z,l_player_open_door_00113
3275  1085  2E 07       	ld	l,0x07
3276  1087  CD 00 00    	call	_zx_border_fastcall
3277  108A  0E 01       	ld	c,0x01
3278  108C  18 2B       	jr	l_player_open_door_00113
3279  108E              l_player_open_door_00104:
3280  108E  3A 01 00    	ld	a,(_player_keys + 0x0001)
3281  1091  B7          	or	a, a
3282  1092  28 25       	jr	Z,l_player_open_door_00113
3283  1094  2E 02       	ld	l,0x02
3284  1096  CD 00 00    	call	_zx_border_fastcall
3285  1099  0E 01       	ld	c,0x01
3286  109B  18 1C       	jr	l_player_open_door_00113
3287  109D              l_player_open_door_00107:
3288  109D  3A 02 00    	ld	a,(_player_keys + 0x0002)
3289  10A0  B7          	or	a, a
3290  10A1  28 16       	jr	Z,l_player_open_door_00113
3291  10A3  2E 04       	ld	l,0x04
3292  10A5  CD 00 00    	call	_zx_border_fastcall
3293  10A8  0E 01       	ld	c,0x01
3294  10AA  18 0D       	jr	l_player_open_door_00113
3295  10AC              l_player_open_door_00110:
3296  10AC  3A 03 00    	ld	a,(_player_keys + 0x0003)
3297  10AF  B7          	or	a, a
3298  10B0  28 07       	jr	Z,l_player_open_door_00113
3299  10B2  2E 05       	ld	l,0x05
3300  10B4  CD 00 00    	call	_zx_border_fastcall
3301  10B7  0E 01       	ld	c,0x01
3302  10B9              l_player_open_door_00113:
3303  10B9  79          	ld	a, c
3304  10BA  B7          	or	a, a
3305  10BB  20 06       	jr	NZ,l_player_open_door_00114
3306  10BD  3A 00 00    	ld	a,(_game_inmune)
3307  10C0  B7          	or	a, a
3308  10C1  28 1E       	jr	Z,l_player_open_door_00117
3309  10C3              l_player_open_door_00114:
3310  10C3  3E 00       	ld	a, +((_scr_map) & 0xFF)
3311  10C5  DD 86 04    	add	a,(ix+4)
3312  10C8  4F          	ld	c, a
3313  10C9  3E 00       	ld	a, +((_scr_map) / 256)
3314  10CB  DD 8E 05    	adc	a,(ix+5)
3315  10CE  47          	ld	b, a
3316  10CF  AF          	xor	a, a
3317  10D0  02          	ld	(bc), a
3318  10D1  DD 6E 04    	ld	l,(ix+4)
3319  10D4  DD 66 05    	ld	h,(ix+5)
3320  10D7  CD 00 00    	call	_game_obj_set
3321  10DA  21 04 00    	ld	hl,0x0004
3322  10DD  39          	add	hl, sp
3323  10DE  CD 00 00    	call	_spr_draw_index
3324  10E1              l_player_open_door_00117:
3325  10E1  DD E1       	pop	ix
3326  10E3  C9          	ret
3327  10E4              	SECTION code_compiler
3328  10E4              ;	---------------------------------
3329  10E4              ; Function player_lost_life
3330  10E4              ; ---------------------------------
3331  10E4              _player_lost_life:
3332  10E4  CD 00 00    	call	___sdcc_enter_ix
3333  10E7  3B          	dec	sp
3334  10E8  21 00 00    	ld	hl,_ay_song_04_lotr_lose_a_life
3335  10EB  E5          	push	hl
3336  10EC  21 01 04    	ld	hl,0x0401
3337  10EF  E5          	push	hl
3338  10F0  CD 00 00    	call	_ay_song_play
3339  10F3  21 00 00    	ld	hl,_player_vita
3340  10F6  36 00       	ld	(hl),0x00
3341  10F8  CD 00 00    	call	_game_update_stats
3342  10FB  3A 07 00    	ld	a,(_lin + 7)
3343  10FE  32 00 00    	ld	(_s_lin0),a
3344  1101  3A 07 00    	ld	a,(_col + 7)
3345  1104  32 00 00    	ld	(_s_col0),a
3346  1107  CD 00 00    	call	_spr_init_effects
3347  110A  06 00       	ld	b,0x00
3348  110C              l_player_lost_life_00118:
3349  110C  C5          	push	bc
3350  110D  21 00 00    	ld	hl,0x0000
3351  1110  E5          	push	hl
3352  1111  AF          	xor	a, a
3353  1112  48          	ld	c,b
3354  1113  47          	ld	b,a
3355  1114  C5          	push	bc
3356  1115  CD 00 00    	call	_NIRVANAP_spriteT_callee
3357  1118  C1          	pop	bc
3358  1119  04          	inc	b
3359  111A  3E 07       	ld	a,0x07
3360  111C  90          	sub	a, b
3361  111D  30 ED       	jr	NC,l_player_lost_life_00118
3362  111F  76          	halt
3363  1120  3A 00 00    	ld	a,(_s_lin0)
3364  1123  C6 F0       	add	a,0xf0
3365  1125  47          	ld	b, a
3366  1126  3A 00 00    	ld	a,(_s_col0)
3367  1129  21 00 00    	ld	hl,0x0000
3368  112C  E5          	push	hl
3369  112D  21 87 03    	ld	hl,0x0387
3370  1130  E5          	push	hl
3371  1131  48          	ld	c,b
3372  1132  47          	ld	b,a
3373  1133  C5          	push	bc
3374  1134  CD 00 00    	call	_spr_add_anim
3375  1137  F1          	pop	af
3376  1138  F1          	pop	af
3377  1139  F1          	pop	af
3378  113A  21 00 00    	ld	hl,_s_col0
3379  113D  46          	ld	b, (hl)
3380  113E  05          	dec	b
3381  113F  05          	dec	b
3382  1140  21 00 00    	ld	hl,0x0000
3383  1143  E5          	push	hl
3384  1144  21 87 03    	ld	hl,0x0387
3385  1147  E5          	push	hl
3386  1148  C5          	push	bc
3387  1149  33          	inc	sp
3388  114A  3A 00 00    	ld	a,(_s_lin0)
3389  114D  F5          	push	af
3390  114E  33          	inc	sp
3391  114F  CD 00 00    	call	_spr_add_anim
3392  1152  F1          	pop	af
3393  1153  F1          	pop	af
3394  1154  21 00 00    	ld	hl,0x0000
3395  1157  E3          	ex	(sp),hl
3396  1158  3A 00 00    	ld	a,(_s_col0)
3397  115B  21 87 03    	ld	hl,0x0387
3398  115E  E5          	push	hl
3399  115F  F5          	push	af
3400  1160  33          	inc	sp
3401  1161  3A 00 00    	ld	a,(_s_lin0)
3402  1164  F5          	push	af
3403  1165  33          	inc	sp
3404  1166  CD 00 00    	call	_spr_add_anim
3405  1169  F1          	pop	af
3406  116A  F1          	pop	af
3407  116B  F1          	pop	af
3408  116C  21 00 00    	ld	hl,_s_col0
3409  116F  46          	ld	b, (hl)
3410  1170  04          	inc	b
3411  1171  04          	inc	b
3412  1172  21 00 00    	ld	hl,0x0000
3413  1175  E5          	push	hl
3414  1176  21 87 03    	ld	hl,0x0387
3415  1179  E5          	push	hl
3416  117A  C5          	push	bc
3417  117B  33          	inc	sp
3418  117C  3A 00 00    	ld	a,(_s_lin0)
3419  117F  F5          	push	af
3420  1180  33          	inc	sp
3421  1181  CD 00 00    	call	_spr_add_anim
3422  1184  F1          	pop	af
3423  1185  F1          	pop	af
3424  1186  F1          	pop	af
3425  1187  3A 00 00    	ld	a,(_s_lin0)
3426  118A  C6 10       	add	a,0x10
3427  118C  47          	ld	b, a
3428  118D  3A 00 00    	ld	a,(_s_col0)
3429  1190  21 00 00    	ld	hl,0x0000
3430  1193  E5          	push	hl
3431  1194  21 87 03    	ld	hl,0x0387
3432  1197  E5          	push	hl
3433  1198  48          	ld	c,b
3434  1199  47          	ld	b,a
3435  119A  C5          	push	bc
3436  119B  CD 00 00    	call	_spr_add_anim
3437  119E  F1          	pop	af
3438  119F  F1          	pop	af
3439  11A0  F1          	pop	af
3440  11A1  2E 00       	ld	l,0x00
3441  11A3  CD 00 00    	call	_zx_border_fastcall
3442  11A6  DD 36 FF 01 	ld	(ix-1),0x01
3443  11AA  2A 00 00    	ld	hl,(_curr_time)
3444  11AD  22 00 00    	ld	(_anim_time),hl
3445  11B0              l_player_lost_life_00107:
3446  11B0  DD 7E FF    	ld	a,(ix-1)
3447  11B3  B7          	or	a, a
3448  11B4  28 28       	jr	Z,l_player_lost_life_00131
3449  11B6  3E 0C       	ld	a,0x0c
3450  11B8  F5          	push	af
3451  11B9  33          	inc	sp
3452  11BA  21 00 00    	ld	hl,_anim_time
3453  11BD  E5          	push	hl
3454  11BE  CD 00 00    	call	_game_check_time
3455  11C1  F1          	pop	af
3456  11C2  33          	inc	sp
3457  11C3  7D          	ld	a, l
3458  11C4  B7          	or	a, a
3459  11C5  28 E9       	jr	Z,l_player_lost_life_00107
3460  11C7  2A 00 00    	ld	hl,(_curr_time)
3461  11CA  22 00 00    	ld	(_anim_time),hl
3462  11CD  3A 00 00    	ld	a,(_anim_count)
3463  11D0  B7          	or	a,a
3464  11D1  28 05       	jr	Z,l_player_lost_life_00103
3465  11D3  CD 00 00    	call	_spr_play_anim
3466  11D6  18 D8       	jr	l_player_lost_life_00107
3467  11D8              l_player_lost_life_00103:
3468  11D8  DD 36 FF 00 	ld	(ix-1),0x00
3469  11DC  18 D2       	jr	l_player_lost_life_00107
3470  11DE              l_player_lost_life_00131:
3471  11DE  0E 00       	ld	c,0x00
3472  11E0              l_player_lost_life_00120:
3473  11E0  06 00       	ld	b,0x00
3474  11E2  21 00 00    	ld	hl,_class
3475  11E5  09          	add	hl, bc
3476  11E6  7E          	ld	a, (hl)
3477  11E7  B7          	or	a, a
3478  11E8  28 2D       	jr	Z,l_player_lost_life_00121
3479  11EA  06 00       	ld	b,0x00
3480  11EC  21 00 00    	ld	hl,_col
3481  11EF  09          	add	hl, bc
3482  11F0  56          	ld	d, (hl)
3483  11F1  06 00       	ld	b,0x00
3484  11F3  21 00 00    	ld	hl,_lin
3485  11F6  09          	add	hl, bc
3486  11F7  06 00       	ld	b,0x00
3487  11F9  21 00 00    	ld	hl,_tile
3488  11FC  09          	add	hl,bc
3489  11FD  46          	ld	b,(hl)
3490  11FE  58          	ld	e,b
3491  11FF  3E 00       	ld	a, +((_colint) & 0xFF)
3492  1201  81          	add	a, c
3493  1202  6F          	ld	l, a
3494  1203  3E 00       	ld	a, +((_colint) / 256)
3495  1205  CE 00       	adc	a,0x00
3496  1207  67          	ld	h, a
3497  1208  6E          	ld	l, (hl)
3498  1209  7B          	ld	a, e
3499  120A  85          	add	a, l
3500  120B  C5          	push	bc
3501  120C  58          	ld	e,b
3502  120D  D5          	push	de
3503  120E  F5          	push	af
3504  120F  33          	inc	sp
3505  1210  79          	ld	a, c
3506  1211  F5          	push	af
3507  1212  33          	inc	sp
3508  1213  CD 00 00    	call	_NIRVANAP_spriteT_callee
3509  1216  C1          	pop	bc
3510  1217              l_player_lost_life_00121:
3511  1217  0C          	inc	c
3512  1218  79          	ld	a, c
3513  1219  D6 07       	sub	a,0x07
3514  121B  38 C3       	jr	C,l_player_lost_life_00120
3515  121D  3A 00 00    	ld	a,(_game_inf_lives)
3516  1220  B7          	or	a, a
3517  1221  20 04       	jr	NZ,l_player_lost_life_00114
3518  1223  21 00 00    	ld	hl,_player_lives
3519  1226  35          	dec	(hl)
3520  1227              l_player_lost_life_00114:
3521  1227  21 00 00    	ld	hl,_player_mana
3522  122A  36 64       	ld	(hl),0x64
3523  122C  21 00 00    	ld	hl,_player_vita
3524  122F  36 64       	ld	(hl),0x64
3525  1231  3A 00 00    	ld	a,(_player_lives)
3526  1234  B7          	or	a, a
3527  1235  28 1D       	jr	Z,l_player_lost_life_00116
3528  1237  21 F4 01    	ld	hl,0x01f4
3529  123A  CD 00 00    	call	_z80_delay_ms_fastcall
3530  123D  3A 00 00    	ld	a,(_game_checkpoint_col)
3531  1240  32 00 00    	ld	(_player_col_scr),a
3532  1243  3A 00 00    	ld	a,(_game_checkpoint_lin)
3533  1246  32 00 00    	ld	(_player_lin_scr),a
3534  1249  3A 00 00    	ld	a,(_game_checkpoint_scr)
3535  124C  32 00 00    	ld	(_scr_curr),a
3536  124F  CD 00 00    	call	_game_round_init
3537  1252  18 0A       	jr	l_player_lost_life_00122
3538  1254              l_player_lost_life_00116:
3539  1254  21 00 00    	ld	hl,_player_lives
3540  1257  36 00       	ld	(hl),0x00
3541  1259  21 00 00    	ld	hl,_game_over
3542  125C  36 01       	ld	(hl),0x01
3543  125E              l_player_lost_life_00122:
3544  125E  33          	inc	sp
3545  125F  DD E1       	pop	ix
3546  1261  C9          	ret
3547  1262              	SECTION code_compiler
3548  1262              ;	---------------------------------
3549  1262              ; Function player_hit
3550  1262              ; ---------------------------------
3551  1262              _player_hit:
3552  1262  7D          	ld	a,l
3553  1263  4D          	ld	c,l
3554  1264  21 00 00    	ld	hl,_player_vita
3555  1267  96          	sub	a, (hl)
3556  1268  30 22       	jr	NC,l_player_hit_00104
3557  126A  3A 00 00    	ld	a,(_game_inmune)
3558  126D  B7          	or	a, a
3559  126E  20 06       	jr	NZ,l_player_hit_00102
3560  1270  21 00 00    	ld	hl,_player_vita
3561  1273  7E          	ld	a, (hl)
3562  1274  91          	sub	a, c
3563  1275  77          	ld	(hl), a
3564  1276              l_player_hit_00102:
3565  1276  2A 00 00    	ld	hl,(_curr_time)
3566  1279  22 00 00    	ld	(_player_hit_time),hl
3567  127C  21 00 00    	ld	hl,_ay_fx_04_golpe
3568  127F  E5          	push	hl
3569  1280  21 01 04    	ld	hl,0x0401
3570  1283  E5          	push	hl
3571  1284  CD 00 00    	call	_ay_song_play
3572  1287  CD 00 00    	call	_game_update_stats
3573  128A  18 03       	jr	l_player_hit_00106
3574  128C              l_player_hit_00104:
3575  128C  CD E4 10    	call	_player_lost_life
3576  128F              l_player_hit_00106:
3577  128F  C9          	ret
3578  1290              	SECTION IGNORE
3579  0000              
