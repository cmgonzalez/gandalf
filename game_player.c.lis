1     0000              MODULE game_player_c
2     0000              
3     0000              ;--------------------------------------------------------
4     0000              ; File Created by SDCC : free open source ANSI-C Compiler
5     0000              ; Version 3.6.5 #9958 (Mac OS X i386)
6     0000              ;--------------------------------------------------------
7     0000              ; Processed by Z88DK
8     0000              ;--------------------------------------------------------
9     0000              
10    0000              	EXTERN __divschar
11    0000              	EXTERN __divschar_callee
12    0000              	EXTERN __divsint
13    0000              	EXTERN __divsint_callee
14    0000              	EXTERN __divslong
15    0000              	EXTERN __divslong_callee
16    0000              	EXTERN __divslonglong
17    0000              	EXTERN __divslonglong_callee
18    0000              	EXTERN __divsuchar
19    0000              	EXTERN __divsuchar_callee
20    0000              	EXTERN __divuchar
21    0000              	EXTERN __divuchar_callee
22    0000              	EXTERN __divuint
23    0000              	EXTERN __divuint_callee
24    0000              	EXTERN __divulong
25    0000              	EXTERN __divulong_callee
26    0000              	EXTERN __divulonglong
27    0000              	EXTERN __divulonglong_callee
28    0000              	EXTERN __divuschar
29    0000              	EXTERN __divuschar_callee
30    0000              	EXTERN __modschar
31    0000              	EXTERN __modschar_callee
32    0000              	EXTERN __modsint
33    0000              	EXTERN __modsint_callee
34    0000              	EXTERN __modslong
35    0000              	EXTERN __modslong_callee
36    0000              	EXTERN __modslonglong
37    0000              	EXTERN __modslonglong_callee
38    0000              	EXTERN __modsuchar
39    0000              	EXTERN __modsuchar_callee
40    0000              	EXTERN __moduchar
41    0000              	EXTERN __moduchar_callee
42    0000              	EXTERN __moduint
43    0000              	EXTERN __moduint_callee
44    0000              	EXTERN __modulong
45    0000              	EXTERN __modulong_callee
46    0000              	EXTERN __modulonglong
47    0000              	EXTERN __modulonglong_callee
48    0000              	EXTERN __moduschar
49    0000              	EXTERN __moduschar_callee
50    0000              	EXTERN __mulint
51    0000              	EXTERN __mulint_callee
52    0000              	EXTERN __mullong
53    0000              	EXTERN __mullong_callee
54    0000              	EXTERN __mullonglong
55    0000              	EXTERN __mullonglong_callee
56    0000              	EXTERN __mulschar
57    0000              	EXTERN __mulschar_callee
58    0000              	EXTERN __mulsuchar
59    0000              	EXTERN __mulsuchar_callee
60    0000              	EXTERN __muluschar
61    0000              	EXTERN __muluschar_callee
62    0000              	EXTERN __rlslonglong
63    0000              	EXTERN __rlslonglong_callee
64    0000              	EXTERN __rlulonglong
65    0000              	EXTERN __rlulonglong_callee
66    0000              	EXTERN __rrslonglong
67    0000              	EXTERN __rrslonglong_callee
68    0000              	EXTERN __rrulonglong
69    0000              	EXTERN __rrulonglong_callee
70    0000              	EXTERN ___sdcc_call_hl
71    0000              	EXTERN ___sdcc_call_iy
72    0000              	EXTERN ___sdcc_enter_ix
73    0000              	EXTERN _banked_call
74    0000              	EXTERN _banked_ret
75    0000              	EXTERN ___fs2schar
76    0000              	EXTERN ___fs2schar_callee
77    0000              	EXTERN ___fs2sint
78    0000              	EXTERN ___fs2sint_callee
79    0000              	EXTERN ___fs2slong
80    0000              	EXTERN ___fs2slong_callee
81    0000              	EXTERN ___fs2slonglong
82    0000              	EXTERN ___fs2slonglong_callee
83    0000              	EXTERN ___fs2uchar
84    0000              	EXTERN ___fs2uchar_callee
85    0000              	EXTERN ___fs2uint
86    0000              	EXTERN ___fs2uint_callee
87    0000              	EXTERN ___fs2ulong
88    0000              	EXTERN ___fs2ulong_callee
89    0000              	EXTERN ___fs2ulonglong
90    0000              	EXTERN ___fs2ulonglong_callee
91    0000              	EXTERN ___fsadd
92    0000              	EXTERN ___fsadd_callee
93    0000              	EXTERN ___fsdiv
94    0000              	EXTERN ___fsdiv_callee
95    0000              	EXTERN ___fseq
96    0000              	EXTERN ___fseq_callee
97    0000              	EXTERN ___fsgt
98    0000              	EXTERN ___fsgt_callee
99    0000              	EXTERN ___fslt
100   0000              	EXTERN ___fslt_callee
101   0000              	EXTERN ___fsmul
102   0000              	EXTERN ___fsmul_callee
103   0000              	EXTERN ___fsneq
104   0000              	EXTERN ___fsneq_callee
105   0000              	EXTERN ___fssub
106   0000              	EXTERN ___fssub_callee
107   0000              	EXTERN ___schar2fs
108   0000              	EXTERN ___schar2fs_callee
109   0000              	EXTERN ___sint2fs
110   0000              	EXTERN ___sint2fs_callee
111   0000              	EXTERN ___slong2fs
112   0000              	EXTERN ___slong2fs_callee
113   0000              	EXTERN ___slonglong2fs
114   0000              	EXTERN ___slonglong2fs_callee
115   0000              	EXTERN ___uchar2fs
116   0000              	EXTERN ___uchar2fs_callee
117   0000              	EXTERN ___uint2fs
118   0000              	EXTERN ___uint2fs_callee
119   0000              	EXTERN ___ulong2fs
120   0000              	EXTERN ___ulong2fs_callee
121   0000              	EXTERN ___ulonglong2fs
122   0000              	EXTERN ___ulonglong2fs_callee
123   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
126   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
127   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
128   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
129   0000              	EXTERN ____sdcc_4_ldi_save_bc
130   0000              	EXTERN ____sdcc_4_push_hlix
131   0000              	EXTERN ____sdcc_4_push_mhl
132   0000              	EXTERN ____sdcc_lib_setmem_hl
133   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
134   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
135   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
136   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
137   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
138   0000              	EXTERN ____sdcc_ll_add_deix_hlix
139   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
140   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
141   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
142   0000              	EXTERN ____sdcc_ll_asr_hlix_a
143   0000              	EXTERN ____sdcc_ll_asr_mbc_a
144   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
145   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
146   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
147   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
148   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
149   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
150   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
151   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
152   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
153   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
155   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
156   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
157   0000              	EXTERN ____sdcc_ll_push_hlix
158   0000              	EXTERN ____sdcc_ll_push_mhl
159   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
160   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
161   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
162   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
163   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
164   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
165   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
166   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
167   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
168   0000              	EXTERN ____sdcc_load_debc_deix
169   0000              	EXTERN ____sdcc_load_dehl_deix
170   0000              	EXTERN ____sdcc_load_debc_mhl
171   0000              	EXTERN ____sdcc_load_hlde_mhl
172   0000              	EXTERN ____sdcc_store_dehl_bcix
173   0000              	EXTERN ____sdcc_store_debc_hlix
174   0000              	EXTERN ____sdcc_store_debc_mhl
175   0000              	EXTERN ____sdcc_cpu_pop_ei
176   0000              	EXTERN ____sdcc_cpu_pop_ei_jp
177   0000              	EXTERN ____sdcc_cpu_push_di
178   0000              	EXTERN ____sdcc_outi
179   0000              	EXTERN ____sdcc_outi_128
180   0000              	EXTERN ____sdcc_outi_256
181   0000              	EXTERN ____sdcc_ldi
182   0000              	EXTERN ____sdcc_ldi_128
183   0000              	EXTERN ____sdcc_ldi_256
184   0000              
185   0000              ;--------------------------------------------------------
186   0000              ; Public variables in this module
187   0000              ;--------------------------------------------------------
188   0000              	GLOBAL _player_check_map
189   0000              	GLOBAL _player_1up
190   0000              	GLOBAL _player_fix_walk_lin
191   0000              	GLOBAL _player_init
192   0000              	GLOBAL _player_turn
193   0000              	GLOBAL _player_move
194   0000              	GLOBAL _player_check_input
195   0000              	GLOBAL _player_move_input
196   0000              	GLOBAL _player_fire
197   0000              	GLOBAL _player_collision
198   0000              	GLOBAL _player_check_stairs_vertical
199   0000              	GLOBAL _player_check_stairs
200   0000              	GLOBAL _player_tile
201   0000              	GLOBAL _player_pick_item
202   0000              	GLOBAL _player_hit_platform
203   0000              	GLOBAL _player_hit_platform_clear
204   0000              	GLOBAL _player_score_add
205   0000              	GLOBAL _player_check_floor
206   0000              	GLOBAL _player_gasta_brick
207   0000              	GLOBAL _player_move_jump
208   0000              	GLOBAL _player_open_door
209   0000              	GLOBAL _player_lost_life
210   0000              	GLOBAL _player_hit
211   0000              ;--------------------------------------------------------
212   0000              ; Externals used
213   0000              ;--------------------------------------------------------
214   0000              	GLOBAL _ulltoa_callee
215   0000              	GLOBAL _ulltoa
216   0000              	GLOBAL _strtoull_callee
217   0000              	GLOBAL _strtoull
218   0000              	GLOBAL _strtoll_callee
219   0000              	GLOBAL _strtoll
220   0000              	GLOBAL _lltoa_callee
221   0000              	GLOBAL _lltoa
222   0000              	GLOBAL _llabs_callee
223   0000              	GLOBAL _llabs
224   0000              	GLOBAL __lldivu__callee
225   0000              	GLOBAL __lldivu_
226   0000              	GLOBAL __lldiv__callee
227   0000              	GLOBAL __lldiv_
228   0000              	GLOBAL _atoll_callee
229   0000              	GLOBAL _atoll
230   0000              	GLOBAL _realloc_unlocked_callee
231   0000              	GLOBAL _realloc_unlocked
232   0000              	GLOBAL _malloc_unlocked_fastcall
233   0000              	GLOBAL _malloc_unlocked
234   0000              	GLOBAL _free_unlocked_fastcall
235   0000              	GLOBAL _free_unlocked
236   0000              	GLOBAL _calloc_unlocked_callee
237   0000              	GLOBAL _calloc_unlocked
238   0000              	GLOBAL _aligned_alloc_unlocked_callee
239   0000              	GLOBAL _aligned_alloc_unlocked
240   0000              	GLOBAL _realloc_callee
241   0000              	GLOBAL _realloc
242   0000              	GLOBAL _malloc_fastcall
243   0000              	GLOBAL _malloc
244   0000              	GLOBAL _free_fastcall
245   0000              	GLOBAL _free
246   0000              	GLOBAL _calloc_callee
247   0000              	GLOBAL _calloc
248   0000              	GLOBAL _aligned_alloc_callee
249   0000              	GLOBAL _aligned_alloc
250   0000              	GLOBAL _utoa_callee
251   0000              	GLOBAL _utoa
252   0000              	GLOBAL _ultoa_callee
253   0000              	GLOBAL _ultoa
254   0000              	GLOBAL _system_fastcall
255   0000              	GLOBAL _system
256   0000              	GLOBAL _strtoul_callee
257   0000              	GLOBAL _strtoul
258   0000              	GLOBAL _strtol_callee
259   0000              	GLOBAL _strtol
260   0000              	GLOBAL _strtof_callee
261   0000              	GLOBAL _strtof
262   0000              	GLOBAL _strtod_callee
263   0000              	GLOBAL _strtod
264   0000              	GLOBAL _srand_fastcall
265   0000              	GLOBAL _srand
266   0000              	GLOBAL _rand
267   0000              	GLOBAL _quick_exit_fastcall
268   0000              	GLOBAL _quick_exit
269   0000              	GLOBAL _qsort_callee
270   0000              	GLOBAL _qsort
271   0000              	GLOBAL _ltoa_callee
272   0000              	GLOBAL _ltoa
273   0000              	GLOBAL _labs_fastcall
274   0000              	GLOBAL _labs
275   0000              	GLOBAL _itoa_callee
276   0000              	GLOBAL _itoa
277   0000              	GLOBAL _ftoh_callee
278   0000              	GLOBAL _ftoh
279   0000              	GLOBAL _ftog_callee
280   0000              	GLOBAL _ftog
281   0000              	GLOBAL _ftoe_callee
282   0000              	GLOBAL _ftoe
283   0000              	GLOBAL _ftoa_callee
284   0000              	GLOBAL _ftoa
285   0000              	GLOBAL _exit_fastcall
286   0000              	GLOBAL _exit
287   0000              	GLOBAL _dtoh_callee
288   0000              	GLOBAL _dtoh
289   0000              	GLOBAL _dtog_callee
290   0000              	GLOBAL _dtog
291   0000              	GLOBAL _dtoe_callee
292   0000              	GLOBAL _dtoe
293   0000              	GLOBAL _dtoa_callee
294   0000              	GLOBAL _dtoa
295   0000              	GLOBAL _bsearch_callee
296   0000              	GLOBAL _bsearch
297   0000              	GLOBAL _atol_fastcall
298   0000              	GLOBAL _atol
299   0000              	GLOBAL _atoi_fastcall
300   0000              	GLOBAL _atoi
301   0000              	GLOBAL _atof_fastcall
302   0000              	GLOBAL _atof
303   0000              	GLOBAL _atexit_fastcall
304   0000              	GLOBAL _atexit
305   0000              	GLOBAL _at_quick_exit_fastcall
306   0000              	GLOBAL _at_quick_exit
307   0000              	GLOBAL _abs_fastcall
308   0000              	GLOBAL _abs
309   0000              	GLOBAL _abort
310   0000              	GLOBAL __strtou__callee
311   0000              	GLOBAL __strtou_
312   0000              	GLOBAL __strtoi__callee
313   0000              	GLOBAL __strtoi_
314   0000              	GLOBAL __random_uniform_xor_8__fastcall
315   0000              	GLOBAL __random_uniform_xor_8_
316   0000              	GLOBAL __random_uniform_xor_32__fastcall
317   0000              	GLOBAL __random_uniform_xor_32_
318   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
319   0000              	GLOBAL __random_uniform_cmwc_8_
320   0000              	GLOBAL __shellsort__callee
321   0000              	GLOBAL __shellsort_
322   0000              	GLOBAL __quicksort__callee
323   0000              	GLOBAL __quicksort_
324   0000              	GLOBAL __insertion_sort__callee
325   0000              	GLOBAL __insertion_sort_
326   0000              	GLOBAL __ldivu__callee
327   0000              	GLOBAL __ldivu_
328   0000              	GLOBAL __ldiv__callee
329   0000              	GLOBAL __ldiv_
330   0000              	GLOBAL __divu__callee
331   0000              	GLOBAL __divu_
332   0000              	GLOBAL __div__callee
333   0000              	GLOBAL __div_
334   0000              	GLOBAL _NIRVANAP_drawTW_raw_callee
335   0000              	GLOBAL _NIRVANAP_drawTW_raw
336   0000              	GLOBAL _NIRVANAP_drawTW_callee
337   0000              	GLOBAL _NIRVANAP_drawTW
338   0000              	GLOBAL _NIRVANAP_drawW_raw_callee
339   0000              	GLOBAL _NIRVANAP_drawW_raw
340   0000              	GLOBAL _NIRVANAP_drawW_callee
341   0000              	GLOBAL _NIRVANAP_drawW
342   0000              	GLOBAL _NIRVANAP_spriteT_callee
343   0000              	GLOBAL _NIRVANAP_spriteT
344   0000              	GLOBAL _NIRVANAP_fillC_callee
345   0000              	GLOBAL _NIRVANAP_fillC
346   0000              	GLOBAL _NIRVANAP_readC_callee
347   0000              	GLOBAL _NIRVANAP_readC
348   0000              	GLOBAL _NIRVANAP_paintC_callee
349   0000              	GLOBAL _NIRVANAP_paintC
350   0000              	GLOBAL _NIRVANAP_printC_callee
351   0000              	GLOBAL _NIRVANAP_printC
352   0000              	GLOBAL _NIRVANAP_fillT_raw_callee
353   0000              	GLOBAL _NIRVANAP_fillT_raw
354   0000              	GLOBAL _NIRVANAP_fillT_callee
355   0000              	GLOBAL _NIRVANAP_fillT
356   0000              	GLOBAL _NIRVANAP_drawT_raw_callee
357   0000              	GLOBAL _NIRVANAP_drawT_raw
358   0000              	GLOBAL _NIRVANAP_drawT_callee
359   0000              	GLOBAL _NIRVANAP_drawT
360   0000              	GLOBAL _NIRVANAP_stop
361   0000              	GLOBAL _NIRVANAP_start
362   0000              	GLOBAL _debug3
363   0000              	GLOBAL _debug2
364   0000              	GLOBAL _debug
365   0000              	GLOBAL _zx_print_str
366   0000              	GLOBAL _zx_print_int
367   0000              	GLOBAL _zx_print_chr
368   0000              	GLOBAL _zx_print_bonus_time
369   0000              	GLOBAL _zx_isr
370   0000              	GLOBAL _z80_otdr_callee
371   0000              	GLOBAL _z80_otdr
372   0000              	GLOBAL _z80_otir_callee
373   0000              	GLOBAL _z80_otir
374   0000              	GLOBAL _z80_outp_callee
375   0000              	GLOBAL _z80_outp
376   0000              	GLOBAL _z80_indr_callee
377   0000              	GLOBAL _z80_indr
378   0000              	GLOBAL _z80_inir_callee
379   0000              	GLOBAL _z80_inir
380   0000              	GLOBAL _z80_inp_fastcall
381   0000              	GLOBAL _z80_inp
382   0000              	GLOBAL _z80_set_int_state_fastcall
383   0000              	GLOBAL _z80_set_int_state
384   0000              	GLOBAL _z80_get_int_state
385   0000              	GLOBAL _z80_delay_tstate_fastcall
386   0000              	GLOBAL _z80_delay_tstate
387   0000              	GLOBAL _z80_delay_ms_fastcall
388   0000              	GLOBAL _z80_delay_ms
389   0000              	GLOBAL _im2_remove_generic_callback_callee
390   0000              	GLOBAL _im2_remove_generic_callback
391   0000              	GLOBAL _im2_prepend_generic_callback_callee
392   0000              	GLOBAL _im2_prepend_generic_callback
393   0000              	GLOBAL _im2_append_generic_callback_callee
394   0000              	GLOBAL _im2_append_generic_callback
395   0000              	GLOBAL _im2_create_generic_isr_8080_callee
396   0000              	GLOBAL _im2_create_generic_isr_8080
397   0000              	GLOBAL _im2_create_generic_isr_callee
398   0000              	GLOBAL _im2_create_generic_isr
399   0000              	GLOBAL _im2_install_isr_callee
400   0000              	GLOBAL _im2_install_isr
401   0000              	GLOBAL _im2_init_fastcall
402   0000              	GLOBAL _im2_init
403   0000              	GLOBAL _intrinsic_swap_word_32_fastcall
404   0000              	GLOBAL _intrinsic_swap_word_32
405   0000              	GLOBAL _intrinsic_swap_endian_32_fastcall
406   0000              	GLOBAL _intrinsic_swap_endian_32
407   0000              	GLOBAL _intrinsic_swap_endian_16_fastcall
408   0000              	GLOBAL _intrinsic_swap_endian_16
409   0000              	GLOBAL _intrinsic_return_de
410   0000              	GLOBAL _intrinsic_return_bc
411   0000              	GLOBAL _intrinsic_exx
412   0000              	GLOBAL _intrinsic_ex_de_hl
413   0000              	GLOBAL _intrinsic_nop
414   0000              	GLOBAL _intrinsic_im_2
415   0000              	GLOBAL _intrinsic_im_1
416   0000              	GLOBAL _intrinsic_im_0
417   0000              	GLOBAL _intrinsic_retn
418   0000              	GLOBAL _intrinsic_reti
419   0000              	GLOBAL _intrinsic_halt
420   0000              	GLOBAL _intrinsic_ei
421   0000              	GLOBAL _intrinsic_di
422   0000              	GLOBAL _intrinsic_stub
423   0000              	GLOBAL _intrinsic_outi
424   0000              	GLOBAL _intrinsic_ldi
425   0000              	GLOBAL _zx_pattern_fill_callee
426   0000              	GLOBAL _zx_pattern_fill
427   0000              	GLOBAL _zx_saddrpup_fastcall
428   0000              	GLOBAL _zx_saddrpup
429   0000              	GLOBAL _zx_saddrpright_callee
430   0000              	GLOBAL _zx_saddrpright
431   0000              	GLOBAL _zx_saddrpleft_callee
432   0000              	GLOBAL _zx_saddrpleft
433   0000              	GLOBAL _zx_saddrpdown_fastcall
434   0000              	GLOBAL _zx_saddrpdown
435   0000              	GLOBAL _zx_saddrcup_fastcall
436   0000              	GLOBAL _zx_saddrcup
437   0000              	GLOBAL _zx_saddrcright_fastcall
438   0000              	GLOBAL _zx_saddrcright
439   0000              	GLOBAL _zx_saddrcleft_fastcall
440   0000              	GLOBAL _zx_saddrcleft
441   0000              	GLOBAL _zx_saddrcdown_fastcall
442   0000              	GLOBAL _zx_saddrcdown
443   0000              	GLOBAL _zx_saddr2py_fastcall
444   0000              	GLOBAL _zx_saddr2py
445   0000              	GLOBAL _zx_saddr2px_fastcall
446   0000              	GLOBAL _zx_saddr2px
447   0000              	GLOBAL _zx_saddr2cy_fastcall
448   0000              	GLOBAL _zx_saddr2cy
449   0000              	GLOBAL _zx_saddr2cx_fastcall
450   0000              	GLOBAL _zx_saddr2cx
451   0000              	GLOBAL _zx_saddr2aaddr_fastcall
452   0000              	GLOBAL _zx_saddr2aaddr
453   0000              	GLOBAL _zx_py2saddr_fastcall
454   0000              	GLOBAL _zx_py2saddr
455   0000              	GLOBAL _zx_py2aaddr_fastcall
456   0000              	GLOBAL _zx_py2aaddr
457   0000              	GLOBAL _zx_pxy2saddr_callee
458   0000              	GLOBAL _zx_pxy2saddr
459   0000              	GLOBAL _zx_pxy2aaddr_callee
460   0000              	GLOBAL _zx_pxy2aaddr
461   0000              	GLOBAL _zx_px2bitmask_fastcall
462   0000              	GLOBAL _zx_px2bitmask
463   0000              	GLOBAL _zx_cy2saddr_fastcall
464   0000              	GLOBAL _zx_cy2saddr
465   0000              	GLOBAL _zx_cy2aaddr_fastcall
466   0000              	GLOBAL _zx_cy2aaddr
467   0000              	GLOBAL _zx_cxy2saddr_callee
468   0000              	GLOBAL _zx_cxy2saddr
469   0000              	GLOBAL _zx_cxy2aaddr_callee
470   0000              	GLOBAL _zx_cxy2aaddr
471   0000              	GLOBAL _zx_bitmask2px_fastcall
472   0000              	GLOBAL _zx_bitmask2px
473   0000              	GLOBAL _zx_aaddrcup_fastcall
474   0000              	GLOBAL _zx_aaddrcup
475   0000              	GLOBAL _zx_aaddrcright_fastcall
476   0000              	GLOBAL _zx_aaddrcright
477   0000              	GLOBAL _zx_aaddrcleft_fastcall
478   0000              	GLOBAL _zx_aaddrcleft
479   0000              	GLOBAL _zx_aaddrcdown_fastcall
480   0000              	GLOBAL _zx_aaddrcdown
481   0000              	GLOBAL _zx_aaddr2saddr_fastcall
482   0000              	GLOBAL _zx_aaddr2saddr
483   0000              	GLOBAL _zx_aaddr2py_fastcall
484   0000              	GLOBAL _zx_aaddr2py
485   0000              	GLOBAL _zx_aaddr2px_fastcall
486   0000              	GLOBAL _zx_aaddr2px
487   0000              	GLOBAL _zx_aaddr2cy_fastcall
488   0000              	GLOBAL _zx_aaddr2cy
489   0000              	GLOBAL _zx_aaddr2cx_fastcall
490   0000              	GLOBAL _zx_aaddr2cx
491   0000              	GLOBAL _zx_visit_wc_pix_callee
492   0000              	GLOBAL _zx_visit_wc_pix
493   0000              	GLOBAL _zx_visit_wc_attr_callee
494   0000              	GLOBAL _zx_visit_wc_attr
495   0000              	GLOBAL _zx_scroll_wc_up_pix_callee
496   0000              	GLOBAL _zx_scroll_wc_up_pix
497   0000              	GLOBAL _zx_scroll_wc_up_attr_callee
498   0000              	GLOBAL _zx_scroll_wc_up_attr
499   0000              	GLOBAL _zx_scroll_wc_up_callee
500   0000              	GLOBAL _zx_scroll_wc_up
501   0000              	GLOBAL _zx_scroll_up_pix_callee
502   0000              	GLOBAL _zx_scroll_up_pix
503   0000              	GLOBAL _zx_scroll_up_attr_callee
504   0000              	GLOBAL _zx_scroll_up_attr
505   0000              	GLOBAL _zx_scroll_up_callee
506   0000              	GLOBAL _zx_scroll_up
507   0000              	GLOBAL _zx_cls_wc_pix_callee
508   0000              	GLOBAL _zx_cls_wc_pix
509   0000              	GLOBAL _zx_cls_wc_attr_callee
510   0000              	GLOBAL _zx_cls_wc_attr
511   0000              	GLOBAL _zx_cls_wc_callee
512   0000              	GLOBAL _zx_cls_wc
513   0000              	GLOBAL _zx_cls_pix_fastcall
514   0000              	GLOBAL _zx_cls_pix
515   0000              	GLOBAL _zx_cls_attr_fastcall
516   0000              	GLOBAL _zx_cls_attr
517   0000              	GLOBAL _zx_cls_fastcall
518   0000              	GLOBAL _zx_cls
519   0000              	GLOBAL _zx_border_fastcall
520   0000              	GLOBAL _zx_border
521   0000              	GLOBAL _spr_btile_paint_back
522   0000              	GLOBAL _spr_explode_bullet
523   0000              	GLOBAL _spr_init_anim_bullets
524   0000              	GLOBAL _spr_turn_horizontal
525   0000              	GLOBAL _spr_play_bullets
526   0000              	GLOBAL _spr_play_anim
527   0000              	GLOBAL _spr_add_anim
528   0000              	GLOBAL _spr_clear_scr
529   0000              	GLOBAL _spr_page_map
530   0000              	GLOBAL _spr_page_down
531   0000              	GLOBAL _spr_page_up
532   0000              	GLOBAL _spr_page_right
533   0000              	GLOBAL _spr_page_left
534   0000              	GLOBAL _spr_tile_paint
535   0000              	GLOBAL _spr_calc_hor
536   0000              	GLOBAL _spr_draw_row
537   0000              	GLOBAL _spr_draw_index
538   0000              	GLOBAL _spr_brick_anim
539   0000              	GLOBAL _spr_back_repaint
540   0000              	GLOBAL _spr_tile
541   0000              	GLOBAL _spr_destroy
542   0000              	GLOBAL _spr_tile_dir
543   0000              	GLOBAL _spr_redraw
544   0000              	GLOBAL _spr_move_left
545   0000              	GLOBAL _spr_move_right
546   0000              	GLOBAL _spr_move_horizontal
547   0000              	GLOBAL _spr_move_down
548   0000              	GLOBAL _spr_move_up
549   0000              	GLOBAL _spr_calc_index
550   0000              	GLOBAL _spr_chktime
551   0000              	GLOBAL _sound_hit_brick
552   0000              	GLOBAL _sound_hit_enemy
553   0000              	GLOBAL _sound_kill
554   0000              	GLOBAL _sound_enter_enemy
555   0000              	GLOBAL _sound_coin
556   0000              	GLOBAL _sound_jump
557   0000              	GLOBAL _sound_slide
558   0000              	GLOBAL _menu_define_key
559   0000              	GLOBAL _menu_redefine
560   0000              	GLOBAL _menu_main_print
561   0000              	GLOBAL _menu_main
562   0000              	GLOBAL _game_match_back
563   0000              	GLOBAL _game_attribs
564   0000              	GLOBAL _game_boss_clear
565   0000              	GLOBAL _game_obj_clear
566   0000              	GLOBAL _game_obj_chk
567   0000              	GLOBAL _game_obj_set
568   0000              	GLOBAL _game_shoot_fire_boss
569   0000              	GLOBAL _game_shoot_fire
570   0000              	GLOBAL _game_add_enemy
571   0000              	GLOBAL _game_print_header
572   0000              	GLOBAL _game_check_time
573   0000              	GLOBAL _game_rotate_attrib_osd
574   0000              	GLOBAL _game_rotate_attrib
575   0000              	GLOBAL _game_colour_message
576   0000              	GLOBAL _game_paint_attrib_lin_osd
577   0000              	GLOBAL _game_paint_attrib_lin_h
578   0000              	GLOBAL _game_paint_attrib_lin
579   0000              	GLOBAL _game_print_score
580   0000              	GLOBAL _game_check_cell
581   0000              	GLOBAL _game_check_map
582   0000              	GLOBAL _game_loop
583   0000              	GLOBAL _game_round_init
584   0000              	GLOBAL _game_start_timer
585   0000              	GLOBAL _game_update_stats
586   0000              	GLOBAL _game_print_footer
587   0000              	GLOBAL _game_fill_row
588   0000              	GLOBAL _game_fps
589   0000              	GLOBAL _game_respawn
590   0000              	GLOBAL _game_draw_screen
591   0000              	GLOBAL _boss_turn
592   0000              	GLOBAL _enemy_avoid_dead
593   0000              	GLOBAL _enemy_avoid_fall
594   0000              	GLOBAL _enemy_respawn
595   0000              	GLOBAL _enemy_init
596   0000              	GLOBAL _enemy_move
597   0000              	GLOBAL _enemy_turn
598   0000              	GLOBAL _enemy_hit
599   0000              	GLOBAL _enemy_static
600   0000              	GLOBAL _enemy_walk
601   0000              	GLOBAL _enemy_horizontal
602   0000              	GLOBAL _enemy_vertical
603   0000              	GLOBAL _ay_fx_play
604   0000              	GLOBAL _ay_midi_play
605   0000              	GLOBAL _ay_is_playing
606   0000              	GLOBAL _ay_reset
607   0000              	GLOBAL _test_func
608   0000              	GLOBAL _test_proc
609   0000              	GLOBAL _in_mouse_kempston_wheel_delta
610   0000              	GLOBAL _in_mouse_kempston_wheel
611   0000              	GLOBAL _in_mouse_kempston_callee
612   0000              	GLOBAL _in_mouse_kempston
613   0000              	GLOBAL _in_mouse_kempston_setpos_callee
614   0000              	GLOBAL _in_mouse_kempston_setpos
615   0000              	GLOBAL _in_mouse_kempston_reset
616   0000              	GLOBAL _in_mouse_kempston_init
617   0000              	GLOBAL _in_mouse_amx_wheel_delta
618   0000              	GLOBAL _in_mouse_amx_wheel
619   0000              	GLOBAL _in_mouse_amx_callee
620   0000              	GLOBAL _in_mouse_amx
621   0000              	GLOBAL _in_mouse_amx_setpos_callee
622   0000              	GLOBAL _in_mouse_amx_setpos
623   0000              	GLOBAL _in_mouse_amx_reset
624   0000              	GLOBAL _in_mouse_amx_init_callee
625   0000              	GLOBAL _in_mouse_amx_init
626   0000              	GLOBAL _in_stick_sinclair2
627   0000              	GLOBAL _in_stick_sinclair1
628   0000              	GLOBAL _in_stick_kempston
629   0000              	GLOBAL _in_stick_fuller
630   0000              	GLOBAL _in_stick_cursor
631   0000              	GLOBAL _in_stick_keyboard_fastcall
632   0000              	GLOBAL _in_stick_keyboard
633   0000              	GLOBAL _in_wait_nokey
634   0000              	GLOBAL _in_wait_key
635   0000              	GLOBAL _in_test_key
636   0000              	GLOBAL _in_pause_fastcall
637   0000              	GLOBAL _in_pause
638   0000              	GLOBAL _in_key_scancode_fastcall
639   0000              	GLOBAL _in_key_scancode
640   0000              	GLOBAL _in_key_pressed_fastcall
641   0000              	GLOBAL _in_key_pressed
642   0000              	GLOBAL _in_inkey
643   0000              	GLOBAL _NIRVANAP_CHAR_TABLE
644   0000              	GLOBAL _NIRVANAP_WIDE_IMAGES
645   0000              	GLOBAL _NIRVANAP_TILE_IMAGES
646   0000              	GLOBAL _NIRVANAP_HOLE
647   0000              	GLOBAL _NIRVANAP_ISR_HOOK
648   0000              	GLOBAL _player_lvl_table
649   0000              	GLOBAL _map_paper_last
650   0000              	GLOBAL _map_paper_clr
651   0000              	GLOBAL _map_paper
652   0000              	GLOBAL _draw_count
653   0000              	GLOBAL _g_player_hit_right
654   0000              	GLOBAL _g_player_hit_left
655   0000              	GLOBAL _bullet_count
656   0000              	GLOBAL _spr_hack
657   0000              	GLOBAL _boss_stat
658   0000              	GLOBAL _boss_time_fire
659   0000              	GLOBAL _boss_time
660   0000              	GLOBAL _boss_tile
661   0000              	GLOBAL _boss_inc
662   0000              	GLOBAL _boss_col
663   0000              	GLOBAL _boss_lin
664   0000              	GLOBAL _bullet_vel
665   0000              	GLOBAL _bullet_frames
666   0000              	GLOBAL _bullet_colint
667   0000              	GLOBAL _bullet_dir
668   0000              	GLOBAL _bullet_tile
669   0000              	GLOBAL _bullet_col
670   0000              	GLOBAL _bullet_lin
671   0000              	GLOBAL _bullet_col0
672   0000              	GLOBAL _bullet_lin0
673   0000              	GLOBAL _bullet_max
674   0000              	GLOBAL _bullet_class
675   0000              	GLOBAL _mush_class
676   0000              	GLOBAL _mush_index
677   0000              	GLOBAL _anim_count
678   0000              	GLOBAL _anim_respanwn
679   0000              	GLOBAL _anim_loop
680   0000              	GLOBAL _anim_end
681   0000              	GLOBAL _anim_int
682   0000              	GLOBAL _anim_tile
683   0000              	GLOBAL _anim_col
684   0000              	GLOBAL _anim_lin
685   0000              	GLOBAL _map_heigth
686   0000              	GLOBAL _map_width
687   0000              	GLOBAL _scr_curr
688   0000              	GLOBAL _scr_obj1
689   0000              	GLOBAL _scr_obj0
690   0000              	GLOBAL _scr_map
691   0000              	GLOBAL _sprite_speed_alt
692   0000              	GLOBAL _sprite_frames
693   0000              	GLOBAL _sprite_speed
694   0000              	GLOBAL _screen_ink
695   0000              	GLOBAL _screen_paper
696   0000              	GLOBAL _player_onstair
697   0000              	GLOBAL _game_start_scr
698   0000              	GLOBAL _game_respawn_tile
699   0000              	GLOBAL _game_respawn_index
700   0000              	GLOBAL _game_respawn_time
701   0000              	GLOBAL _game_score_top
702   0000              	GLOBAL _player_coins
703   0000              	GLOBAL _player_lives
704   0000              	GLOBAL _game_over
705   0000              	GLOBAL _game_sound
706   0000              	GLOBAL _game_inmune
707   0000              	GLOBAL _game_god_mode
708   0000              	GLOBAL _game_two_player
709   0000              	GLOBAL _game_brick_tile
710   0000              	GLOBAL _sprite_curr_index
711   0000              	GLOBAL _spr_count
712   0000              	GLOBAL _bullet_time
713   0000              	GLOBAL _anim_time
714   0000              	GLOBAL _frame_time
715   0000              	GLOBAL _entry_time
716   0000              	GLOBAL _curr_time
717   0000              	GLOBAL _s_state
718   0000              	GLOBAL _attrib_osd
719   0000              	GLOBAL _attrib_hl
720   0000              	GLOBAL _attrib
721   0000              	GLOBAL _zx_val_asm
722   0000              	GLOBAL _enemies
723   0000              	GLOBAL _tmp_ui
724   0000              	GLOBAL _tmp_sc
725   0000              	GLOBAL _tmp_uc
726   0000              	GLOBAL _tmp1
727   0000              	GLOBAL _tmp0
728   0000              	GLOBAL _tmp
729   0000              	GLOBAL _index1
730   0000              	GLOBAL _index0
731   0000              	GLOBAL _loop_count
732   0000              	GLOBAL _s_col1
733   0000              	GLOBAL _s_col0
734   0000              	GLOBAL _s_lin1
735   0000              	GLOBAL _s_lin0
736   0000              	GLOBAL _s_tile1
737   0000              	GLOBAL _s_tile0
738   0000              	GLOBAL _player_brick_time
739   0000              	GLOBAL _player_hit_count
740   0000              	GLOBAL _sprite_horizontal_check
741   0000              	GLOBAL _sprite_on_air
742   0000              	GLOBAL _sprite
743   0000              	GLOBAL _fps
744   0000              	GLOBAL _game_respawn_curr_time
745   0000              	GLOBAL _game_worldup
746   0000              	GLOBAL _game_mush_count
747   0000              	GLOBAL _game_boss_fix
748   0000              	GLOBAL _game_boss_hit
749   0000              	GLOBAL _game_boss_alive
750   0000              	GLOBAL _game_boss
751   0000              	GLOBAL _game_world
752   0000              	GLOBAL _game_gravity
753   0000              	GLOBAL _player_anim_stair
754   0000              	GLOBAL _player_hit_time
755   0000              	GLOBAL _player_lin_scr
756   0000              	GLOBAL _player_col_scr
757   0000              	GLOBAL _player_lvl
758   0000              	GLOBAL _player_int
759   0000              	GLOBAL _player_str
760   0000              	GLOBAL _player_max_vita
761   0000              	GLOBAL _player_max_mana
762   0000              	GLOBAL _player_vita
763   0000              	GLOBAL _player_mana
764   0000              	GLOBAL _player_keys
765   0000              	GLOBAL _player_vel_inc
766   0000              	GLOBAL _player_vel_y1
767   0000              	GLOBAL _player_vel_y0
768   0000              	GLOBAL _player_vel_y
769   0000              	GLOBAL _player_vel_x
770   0000              	GLOBAL _player_joy
771   0000              	GLOBAL _player_score
772   0000              	GLOBAL _last_time
773   0000              	GLOBAL _player_slide
774   0000              	GLOBAL _spr_timer
775   0000              	GLOBAL _jump_lin
776   0000              	GLOBAL _player_hit_col
777   0000              	GLOBAL _player_hit_lin
778   0000              	GLOBAL _colint
779   0000              	GLOBAL _col
780   0000              	GLOBAL _lin
781   0000              	GLOBAL _tile
782   0000              	GLOBAL _state_a
783   0000              	GLOBAL _state
784   0000              	GLOBAL _class
785   0000              	GLOBAL _tbuffer
786   0000              	GLOBAL _dirs
787   0000              	GLOBAL _k1
788   0000              	GLOBAL _joyfunc1
789   0000              	GLOBAL _btiles
790   0000              	GLOBAL _spec128
791   0000              	GLOBAL _GLOBAL_ZX_PORT_7FFD
792   0000              	GLOBAL _GLOBAL_ZX_PORT_1FFD
793   0000              	GLOBAL _GLOBAL_ZX_PORT_FE
794   0000              	GLOBAL _ay_effect_20
795   0000              	GLOBAL _ay_effect_19
796   0000              	GLOBAL _ay_effect_18
797   0000              	GLOBAL _ay_effect_17
798   0000              	GLOBAL _ay_effect_16
799   0000              	GLOBAL _ay_effect_15
800   0000              	GLOBAL _ay_effect_14
801   0000              	GLOBAL _ay_effect_13
802   0000              	GLOBAL _ay_effect_12
803   0000              	GLOBAL _ay_effect_11
804   0000              	GLOBAL _ay_effect_10
805   0000              	GLOBAL _ay_effect_09
806   0000              	GLOBAL _ay_effect_08
807   0000              	GLOBAL _ay_effect_07
808   0000              	GLOBAL _ay_effect_06
809   0000              	GLOBAL _ay_effect_05
810   0000              	GLOBAL _ay_effect_04
811   0000              	GLOBAL _ay_effect_03
812   0000              	GLOBAL _ay_effect_02
813   0000              	GLOBAL _ay_effect_01
814   0000              	GLOBAL _pb_midi_phase_1
815   0000              	GLOBAL _pb_midi_title
816   0000              	GLOBAL _control_method
817   0000              	GLOBAL _world1_h
818   0000              	GLOBAL _world1_w
819   0000              	GLOBAL _world1
820   0000              	GLOBAL _paper1
821   0000              	GLOBAL _lenght1
822   0000              	GLOBAL _start_scr1
823   0000              	GLOBAL _world0_h
824   0000              	GLOBAL _world0_w
825   0000              	GLOBAL _world0
826   0000              	GLOBAL _paper0
827   0000              	GLOBAL _lenght0
828   0000              	GLOBAL _start_scr0
829   0000              ;--------------------------------------------------------
830   0000              ; special function registers
831   0000              ;--------------------------------------------------------
832   0000              defc _IO_FE	=	0x00fe
833   0000              defc _IO_1FFD	=	0x1ffd
834   0000              defc _IO_7FFD	=	0x7ffd
835   0000              ;--------------------------------------------------------
836   0000              ; ram data
837   0000              ;--------------------------------------------------------
838   0000              	SECTION bss_compiler
839   0000              ;--------------------------------------------------------
840   0000              ; ram data
841   0000              ;--------------------------------------------------------
842   0000              
843   0000              IF 0
844   0000              
845   0000              ; .area _INITIALIZED removed by z88dk
846   0000              
847   0000              
848   0000              ENDIF
849   0000              
850   0000              ;--------------------------------------------------------
851   0000              ; absolute external ram data
852   0000              ;--------------------------------------------------------
853   0000              	SECTION IGNORE
854   0000              ;--------------------------------------------------------
855   0000              ; global & static initialisations
856   0000              ;--------------------------------------------------------
857   0000              	SECTION code_crt_init
858   0000              ;--------------------------------------------------------
859   0000              ; Home
860   0000              ;--------------------------------------------------------
861   0000              	SECTION IGNORE
862   0000              ;--------------------------------------------------------
863   0000              ; code
864   0000              ;--------------------------------------------------------
865   0000              	SECTION code_compiler
866   0000              ;	---------------------------------
867   0000              ; Function player_init
868   0000              ; ---------------------------------
869   0000              _player_init:
870   0000  CD 00 00    	call	___sdcc_enter_ix
871   0003  21 07 00    	ld	hl, +(_class + 0x0007)
872   0006  36 00       	ld	(hl),0x00
873   0008  21 07 00    	ld	hl, +(_tile + 0x0007)
874   000B  DD 7E 06    	ld	a,(ix+6)
875   000E  77          	ld	(hl), a
876   000F  21 07 00    	ld	hl, +(_lin + 0x0007)
877   0012  DD 7E 04    	ld	a,(ix+4)
878   0015  77          	ld	(hl), a
879   0016  21 07 00    	ld	hl, +(_col + 0x0007)
880   0019  DD 7E 05    	ld	a,(ix+5)
881   001C  77          	ld	(hl), a
882   001D  21 07 00    	ld	hl, +(_colint + 0x0007)
883   0020  36 00       	ld	(hl),0x00
884   0022  21 07 00    	ld	hl, +(_state + 0x0007)
885   0025  36 00       	ld	(hl),0x00
886   0027  01 07 00    	ld	bc,_state_a+7
887   002A  AF          	xor	a, a
888   002B  02          	ld	(bc), a
889   002C  21 07 00    	ld	hl, +(_jump_lin + 0x0007)
890   002F  DD 7E 04    	ld	a,(ix+4)
891   0032  77          	ld	(hl), a
892   0033  ED 5B 00 00 	ld	de,(_curr_time)
893   0037  ED 53 0E 00 	ld	(_last_time + 0x000e),de
894   003B  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
895   003E  36 00       	ld	(hl),0x00
896   0040  0A          	ld	a, (bc)
897   0041  F6 11       	or	a,+(0x01|0x10)
898   0043  02          	ld	(bc),a
899   0044  21 00 00    	ld	hl,_player_hit_col
900   0047  36 00       	ld	(hl),0x00
901   0049  21 00 00    	ld	hl,_player_hit_lin
902   004C  36 00       	ld	(hl),0x00
903   004E  21 00 00    	ld	hl,_player_slide
904   0051  36 00       	ld	(hl),0x00
905   0053  DD 66 05    	ld	h,(ix+5)
906   0056  DD 6E 04    	ld	l,(ix+4)
907   0059  E5          	push	hl
908   005A  DD 56 06    	ld	d,(ix+6)
909   005D  1E 07       	ld	e,0x07
910   005F  D5          	push	de
911   0060  CD 00 00    	call	_NIRVANAP_spriteT_callee
912   0063  DD E1       	pop	ix
913   0065  C9          	ret
914   0066              	SECTION code_compiler
915   0066              ;	---------------------------------
916   0066              ; Function player_turn
917   0066              ; ---------------------------------
918   0066              _player_turn:
919   0066  21 00 00    	ld	hl,_sprite
920   0069  CD 00 00    	call	_spr_chktime
921   006C  7D          	ld	a, l
922   006D  B7          	or	a, a
923   006E  C8          	ret	Z
924   006F  21 00 00    	ld	hl,_k1
925   0072  E5          	push	hl
926   0073  2A 00 00    	ld	hl,(_joyfunc1)
927   0076  CD 00 00    	call	___sdcc_call_hl
928   0079  F1          	pop	af
929   007A  7D          	ld	a,l
930   007B  32 00 00    	ld	(_dirs),a
931   007E  CD 84 00    	call	_player_move
932   0081  C3 66 03    	jp  _player_collision
933   0084              	SECTION code_compiler
934   0084              ;	---------------------------------
935   0084              ; Function player_move
936   0084              ; ---------------------------------
937   0084              _player_move:
938   0084  3A 07 00    	ld	a,(_lin + 0x0007)
939   0087  32 00 00    	ld	(_s_lin0),a
940   008A  3A 07 00    	ld	a,(_col + 0x0007)
941   008D  32 00 00    	ld	(_s_col0),a
942   0090  21 07 00    	ld	hl,+(_tile + 0x0007)
943   0093  4E          	ld	c, (hl)
944   0094  21 07 00    	ld	hl,+(_colint + 0x0007)
945   0097  46          	ld	b, (hl)
946   0098  79          	ld	a, c
947   0099  80          	add	a, b
948   009A  32 00 00    	ld	(_s_tile0),a
949   009D  3A 07 00    	ld	a,(_state + 0x0007)
950   00A0  32 00 00    	ld	(_s_state),a
951   00A3  21 00 00    	ld	hl,_s_state
952   00A6  CB 46       	bit	0, (hl)
953   00A8  20 07       	jr	NZ,l_player_move_00113
954   00AA  21 00 00    	ld	hl,_s_state
955   00AD  CB 4E       	bit	1, (hl)
956   00AF  28 49       	jr	Z,l_player_move_00114
957   00B1              l_player_move_00113:
958   00B1  CD 1D 03    	call	_player_fire
959   00B4  3A 00 00    	ld	a,(_player_vel_y)
960   00B7  21 00 00    	ld	hl,_player_vel_y1
961   00BA  96          	sub	a, (hl)
962   00BB  E2 C0 00    	jp	PO, l_player_move_00162
963   00BE  EE 80       	xor	a,0x80
964   00C0              l_player_move_00162:
965   00C0  F2 E3 00    	jp	P, l_player_move_00106
966   00C3  21 00 00    	ld	hl,_dirs
967   00C6  CB 56       	bit	2, (hl)
968   00C8  28 09       	jr	Z,l_player_move_00102
969   00CA  21 00 00    	ld	hl,_s_state
970   00CD  7E          	ld	a,(hl)
971   00CE  F6 08       	or	a,0x08
972   00D0  E6 FB       	and	a,0xfb
973   00D2  77          	ld	(hl),a
974   00D3              l_player_move_00102:
975   00D3  21 00 00    	ld	hl,_dirs
976   00D6  CB 4E       	bit	1, (hl)
977   00D8  28 09       	jr	Z,l_player_move_00106
978   00DA  21 00 00    	ld	hl,_s_state
979   00DD  7E          	ld	a,(hl)
980   00DE  F6 04       	or	a,0x04
981   00E0  E6 F7       	and	a,0xf7
982   00E2  77          	ld	(hl),a
983   00E3              l_player_move_00106:
984   00E3  CD 14 0D    	call	_player_move_jump
985   00E6  7D          	ld	a, l
986   00E7  B7          	or	a, a
987   00E8  28 1C       	jr	Z,l_player_move_00115
988   00EA  3A 00 00    	ld	a,(_player_onstair)
989   00ED  B7          	or	a, a
990   00EE  20 16       	jr	NZ,l_player_move_00115
991   00F0  21 60 08    	ld	hl,0x0860
992   00F3  E5          	push	hl
993   00F4  CD 54 06    	call	_player_tile
994   00F7  F1          	pop	af
995   00F8  18 0C       	jr	l_player_move_00115
996   00FA              l_player_move_00114:
997   00FA  CD 61 01    	call	_player_move_input
998   00FD  3A 00 00    	ld	a,(_player_onstair)
999   0100  B7          	or	a, a
1000  0101  20 03       	jr	NZ,l_player_move_00115
1001  0103  CD 8F 0B    	call	_player_check_floor
1002  0106              l_player_move_00115:
1003  0106  CD 00 00    	call	_spr_redraw
1004  0109  7D          	ld	a, l
1005  010A  B7          	or	a, a
1006  010B  28 03       	jr	Z,l_player_move_00118
1007  010D  CD 6F 06    	call	_player_check_map
1008  0110              l_player_move_00118:
1009  0110  3A 00 00    	ld	a,(_player_hit_lin)
1010  0113  B7          	or	a, a
1011  0114  28 03       	jr	Z,l_player_move_00120
1012  0116  CD FC 0A    	call	_player_hit_platform_clear
1013  0119              l_player_move_00120:
1014  0119  3A 00 00    	ld	a,(_s_state)
1015  011C  32 07 00    	ld	((_state + 0x0007)),a
1016  011F  2E 00       	ld	l,0x00
1017  0121  C9          	ret
1018  0122              	SECTION code_compiler
1019  0122              ;	---------------------------------
1020  0122              ; Function player_check_input
1021  0122              ; ---------------------------------
1022  0122              _player_check_input:
1023  0122  21 00 00    	ld	hl,_dirs
1024  0125  CB 56       	bit	2, (hl)
1025  0127  28 0C       	jr	Z,l_player_check_input_00102
1026  0129  21 00 00    	ld	hl,_dirs
1027  012C  CB 5E       	bit	3, (hl)
1028  012E  28 05       	jr	Z,l_player_check_input_00102
1029  0130  21 00 00    	ld	hl,_dirs
1030  0133  36 00       	ld	(hl),0x00
1031  0135              l_player_check_input_00102:
1032  0135  21 00 00    	ld	hl,_dirs
1033  0138  7E          	ld	a, (hl)
1034  0139  CB 07       	rlc	a
1035  013B  E6 01       	and	a,0x01
1036  013D  CB 47       	bit	0, a
1037  013F  20 1D       	jr	NZ,l_player_check_input_00107
1038  0141  CB 56       	bit	2, (hl)
1039  0143  20 19       	jr	NZ,l_player_check_input_00107
1040  0145  21 00 00    	ld	hl,_dirs
1041  0148  CB 5E       	bit	3, (hl)
1042  014A  20 12       	jr	NZ,l_player_check_input_00107
1043  014C  21 00 00    	ld	hl,_dirs
1044  014F  CB 46       	bit	0, (hl)
1045  0151  20 0B       	jr	NZ,l_player_check_input_00107
1046  0153  21 00 00    	ld	hl,_dirs
1047  0156  CB 4E       	bit	1, (hl)
1048  0158  20 04       	jr	NZ,l_player_check_input_00107
1049  015A  2E 00       	ld	l,0x00
1050  015C  18 02       	jr	l_player_check_input_00108
1051  015E              l_player_check_input_00107:
1052  015E  2E 01       	ld	l,0x01
1053  0160              l_player_check_input_00108:
1054  0160  C9          	ret
1055  0161              	SECTION code_compiler
1056  0161              ;	---------------------------------
1057  0161              ; Function player_move_input
1058  0161              ; ---------------------------------
1059  0161              _player_move_input:
1060  0161  CD 22 01    	call	_player_check_input
1061  0164  7D          	ld	a, l
1062  0165  B7          	or	a, a
1063  0166  CA D0 02    	jp	Z, l_player_move_input_00147
1064  0169  CD 1D 03    	call	_player_fire
1065  016C  7D          	ld	a, l
1066  016D  B7          	or	a, a
1067  016E  28 0A       	jr	Z,l_player_move_input_00102
1068  0170  21 00 00    	ld	hl,_dirs
1069  0173  36 00       	ld	(hl),0x00
1070  0175  2E 00       	ld	l,0x00
1071  0177  C3 F6 02    	jp	l_player_move_input_00149
1072  017A              l_player_move_input_00102:
1073  017A  21 00 00    	ld	hl,_dirs
1074  017D  CB 7E       	bit	7, (hl)
1075  017F  28 54       	jr	Z,l_player_move_input_00106
1076  0181  21 00 00    	ld	hl,_dirs
1077  0184  CB 46       	bit	0, (hl)
1078  0186  28 4D       	jr	Z,l_player_move_input_00106
1079  0188  21 00 00    	ld	hl,_player_vel_inc
1080  018B  36 01       	ld	(hl),0x01
1081  018D  CD 00 00    	call	_ay_is_playing
1082  0190  7D          	ld	a, l
1083  0191  D6 03       	sub	a,0x03
1084  0193  28 06       	jr	Z,l_player_move_input_00104
1085  0195  21 00 00    	ld	hl,_ay_effect_03
1086  0198  CD 00 00    	call	_ay_fx_play
1087  019B              l_player_move_input_00104:
1088  019B  21 00 00    	ld	hl,_player_onstair
1089  019E  36 00       	ld	(hl),0x00
1090  01A0  CD 00 00    	call	_sound_jump
1091  01A3  21 00 00    	ld	hl,_s_state
1092  01A6  7E          	ld	a,(hl)
1093  01A7  F6 01       	or	a,0x01
1094  01A9  E6 FD       	and	a,0xfd
1095  01AB  77          	ld	(hl),a
1096  01AC  3A 07 00    	ld	a,(_lin + 0x0007)
1097  01AF  32 07 00    	ld	((_jump_lin + 0x0007)),a
1098  01B2  3A 00 00    	ld	a,(_s_state)
1099  01B5  32 07 00    	ld	((_state + 0x0007)),a
1100  01B8  21 64 08    	ld	hl,0x0864
1101  01BB  E5          	push	hl
1102  01BC  CD 54 06    	call	_player_tile
1103  01BF  F1          	pop	af
1104  01C0  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
1105  01C3  36 02       	ld	(hl),0x02
1106  01C5  21 00 00    	ld	hl,_player_slide
1107  01C8  36 00       	ld	(hl),0x00
1108  01CA  3A 00 00    	ld	a,(_player_vel_y0)
1109  01CD  32 00 00    	ld	(_player_vel_y),a
1110  01D0  2E 01       	ld	l,0x01
1111  01D2  C3 F6 02    	jp	l_player_move_input_00149
1112  01D5              l_player_move_input_00106:
1113  01D5  21 00 00    	ld	hl,_dirs
1114  01D8  CB 5E       	bit	3, (hl)
1115  01DA  28 23       	jr	Z,l_player_move_input_00111
1116  01DC  CD F7 02    	call	_player_fix_walk_lin
1117  01DF  21 00 00    	ld	hl,_s_state
1118  01E2  7E          	ld	a,(hl)
1119  01E3  F6 04       	or	a,0x04
1120  01E5  E6 F7       	and	a,0xf7
1121  01E7  77          	ld	(hl),a
1122  01E8  01 07 00    	ld	bc,_state_a+7
1123  01EB  0A          	ld	a, (bc)
1124  01EC  F6 10       	or	a,0x10
1125  01EE  E6 F7       	and	a,0xf7
1126  01F0  02          	ld	(bc),a
1127  01F1  3A 00 00    	ld	a,(_player_onstair)
1128  01F4  B7          	or	a, a
1129  01F5  28 05       	jr	Z,l_player_move_input_00109
1130  01F7  2E 00       	ld	l,0x00
1131  01F9  CD C2 05    	call	_player_check_stairs
1132  01FC              l_player_move_input_00109:
1133  01FC  CD 00 00    	call	_spr_move_horizontal
1134  01FF              l_player_move_input_00111:
1135  01FF  21 00 00    	ld	hl,_dirs
1136  0202  CB 56       	bit	2, (hl)
1137  0204  28 23       	jr	Z,l_player_move_input_00115
1138  0206  CD F7 02    	call	_player_fix_walk_lin
1139  0209  21 00 00    	ld	hl,_s_state
1140  020C  7E          	ld	a,(hl)
1141  020D  F6 08       	or	a,0x08
1142  020F  E6 FB       	and	a,0xfb
1143  0211  77          	ld	(hl),a
1144  0212  01 07 00    	ld	bc,_state_a+7
1145  0215  0A          	ld	a, (bc)
1146  0216  F6 08       	or	a,0x08
1147  0218  E6 EF       	and	a,0xef
1148  021A  02          	ld	(bc),a
1149  021B  3A 00 00    	ld	a,(_player_onstair)
1150  021E  B7          	or	a, a
1151  021F  28 05       	jr	Z,l_player_move_input_00113
1152  0221  2E 00       	ld	l,0x00
1153  0223  CD C2 05    	call	_player_check_stairs
1154  0226              l_player_move_input_00113:
1155  0226  CD 00 00    	call	_spr_move_horizontal
1156  0229              l_player_move_input_00115:
1157  0229  21 00 00    	ld	hl,_dirs
1158  022C  CB 46       	bit	0, (hl)
1159  022E  28 3C       	jr	Z,l_player_move_input_00127
1160  0230  2E 00       	ld	l,0x00
1161  0232  CD C2 05    	call	_player_check_stairs
1162  0235  3A 00 00    	ld	a,(_player_onstair)
1163  0238  B7          	or	a, a
1164  0239  20 13       	jr	NZ,l_player_move_input_00119
1165  023B  2E 01       	ld	l,0x01
1166  023D  CD C2 05    	call	_player_check_stairs
1167  0240  3A 00 00    	ld	a,(_player_onstair)
1168  0243  B7          	or	a, a
1169  0244  20 08       	jr	NZ,l_player_move_input_00119
1170  0246  3E FE       	ld	a,0xfe
1171  0248  F5          	push	af
1172  0249  33          	inc	sp
1173  024A  CD 19 05    	call	_player_check_stairs_vertical
1174  024D  33          	inc	sp
1175  024E              l_player_move_input_00119:
1176  024E  3A 00 00    	ld	a,(_player_onstair)
1177  0251  B7          	or	a, a
1178  0252  28 05       	jr	Z,l_player_move_input_00124
1179  0254  CD 00 00    	call	_spr_move_up
1180  0257  18 13       	jr	l_player_move_input_00127
1181  0259              l_player_move_input_00124:
1182  0259  21 00 00    	ld	hl,_dirs
1183  025C  CB 5E       	bit	3, (hl)
1184  025E  20 0C       	jr	NZ,l_player_move_input_00127
1185  0260  21 00 00    	ld	hl,_dirs
1186  0263  CB 56       	bit	2, (hl)
1187  0265  20 05       	jr	NZ,l_player_move_input_00127
1188  0267  2E 00       	ld	l,0x00
1189  0269  C3 F6 02    	jp	l_player_move_input_00149
1190  026C              l_player_move_input_00127:
1191  026C  21 00 00    	ld	hl,_dirs
1192  026F  CB 4E       	bit	1, (hl)
1193  0271  28 3B       	jr	Z,l_player_move_input_00139
1194  0273  2E 00       	ld	l,0x00
1195  0275  CD C2 05    	call	_player_check_stairs
1196  0278  3A 00 00    	ld	a,(_player_onstair)
1197  027B  B7          	or	a, a
1198  027C  20 13       	jr	NZ,l_player_move_input_00131
1199  027E  2E 01       	ld	l,0x01
1200  0280  CD C2 05    	call	_player_check_stairs
1201  0283  3A 00 00    	ld	a,(_player_onstair)
1202  0286  B7          	or	a, a
1203  0287  20 08       	jr	NZ,l_player_move_input_00131
1204  0289  3E 12       	ld	a,0x12
1205  028B  F5          	push	af
1206  028C  33          	inc	sp
1207  028D  CD 19 05    	call	_player_check_stairs_vertical
1208  0290  33          	inc	sp
1209  0291              l_player_move_input_00131:
1210  0291  3A 00 00    	ld	a,(_player_onstair)
1211  0294  B7          	or	a, a
1212  0295  28 05       	jr	Z,l_player_move_input_00136
1213  0297  CD 00 00    	call	_spr_move_down
1214  029A  18 12       	jr	l_player_move_input_00139
1215  029C              l_player_move_input_00136:
1216  029C  21 00 00    	ld	hl,_dirs
1217  029F  CB 5E       	bit	3, (hl)
1218  02A1  20 0B       	jr	NZ,l_player_move_input_00139
1219  02A3  21 00 00    	ld	hl,_dirs
1220  02A6  CB 56       	bit	2, (hl)
1221  02A8  20 04       	jr	NZ,l_player_move_input_00139
1222  02AA  2E 00       	ld	l,0x00
1223  02AC  18 48       	jr	l_player_move_input_00149
1224  02AE              l_player_move_input_00139:
1225  02AE  3A 00 00    	ld	a,(_s_state)
1226  02B1  32 07 00    	ld	((_state + 0x0007)),a
1227  02B4  3A 00 00    	ld	a,(_player_onstair)
1228  02B7  B7          	or	a, a
1229  02B8  28 0A       	jr	Z,l_player_move_input_00141
1230  02BA  21 72 00    	ld	hl,0x0072
1231  02BD  E5          	push	hl
1232  02BE  CD 54 06    	call	_player_tile
1233  02C1  F1          	pop	af
1234  02C2  18 08       	jr	l_player_move_input_00142
1235  02C4              l_player_move_input_00141:
1236  02C4  21 60 08    	ld	hl,0x0860
1237  02C7  E5          	push	hl
1238  02C8  CD 54 06    	call	_player_tile
1239  02CB  F1          	pop	af
1240  02CC              l_player_move_input_00142:
1241  02CC  2E 01       	ld	l,0x01
1242  02CE  18 26       	jr	l_player_move_input_00149
1243  02D0              l_player_move_input_00147:
1244  02D0  21 07 00    	ld	hl, +(_colint + 0x0007)
1245  02D3  36 00       	ld	(hl),0x00
1246  02D5  3A 00 00    	ld	a,(_player_onstair)
1247  02D8  B7          	or	a, a
1248  02D9  28 0A       	jr	Z,l_player_move_input_00144
1249  02DB  21 72 00    	ld	hl,0x0072
1250  02DE  E5          	push	hl
1251  02DF  CD 54 06    	call	_player_tile
1252  02E2  F1          	pop	af
1253  02E3  18 08       	jr	l_player_move_input_00145
1254  02E5              l_player_move_input_00144:
1255  02E5  21 70 01    	ld	hl,0x0170
1256  02E8  E5          	push	hl
1257  02E9  CD 54 06    	call	_player_tile
1258  02EC  F1          	pop	af
1259  02ED              l_player_move_input_00145:
1260  02ED  21 00 00    	ld	hl,_s_state
1261  02F0  7E          	ld	a,(hl)
1262  02F1  E6 F3       	and	a,+(0xf7&0xfb)
1263  02F3  77          	ld	(hl),a
1264  02F4  2E 00       	ld	l,0x00
1265  02F6              l_player_move_input_00149:
1266  02F6  C9          	ret
1267  02F7              	SECTION code_compiler
1268  02F7              ;	---------------------------------
1269  02F7              ; Function player_fix_walk_lin
1270  02F7              ; ---------------------------------
1271  02F7              _player_fix_walk_lin:
1272  02F7  3A 00 00    	ld	a,(_player_onstair)
1273  02FA  B7          	or	a, a
1274  02FB  C0          	ret	NZ
1275  02FC  3A 00 00    	ld	a,(_s_lin0)
1276  02FF  07          	rlca
1277  0300  07          	rlca
1278  0301  07          	rlca
1279  0302  07          	rlca
1280  0303  E6 0F       	and	a,0x0f
1281  0305  07          	rlca
1282  0306  07          	rlca
1283  0307  07          	rlca
1284  0308  07          	rlca
1285  0309  E6 F0       	and	a,0xf0
1286  030B  32 00 00    	ld	(_s_lin1),a
1287  030E  3A 00 00    	ld	a,(_s_lin0)
1288  0311  21 00 00    	ld	hl,_s_lin1
1289  0314  96          	sub	a, (hl)
1290  0315  C8          	ret	Z
1291  0316  3A 00 00    	ld	a,(_s_lin1)
1292  0319  32 07 00    	ld	((_lin + 0x0007)),a
1293  031C  C9          	ret
1294  031D              	SECTION code_compiler
1295  031D              ;	---------------------------------
1296  031D              ; Function player_fire
1297  031D              ; ---------------------------------
1298  031D              _player_fire:
1299  031D  21 00 00    	ld	hl,_dirs
1300  0320  CB 7E       	bit	7, (hl)
1301  0322  28 3F       	jr	Z,l_player_fire_00110
1302  0324  21 00 00    	ld	hl,_dirs
1303  0327  CB 46       	bit	0, (hl)
1304  0329  20 38       	jr	NZ,l_player_fire_00110
1305  032B  21 00 00    	ld	hl,_player_mana
1306  032E  7E          	ld	a, (hl)
1307  032F  B7          	or	a, a
1308  0330  28 2D       	jr	Z,l_player_fire_00107
1309  0332  3A 07 00    	ld	a,(_bullet_col + 0x0007)
1310  0335  3C          	inc	a
1311  0336  20 27       	jr	NZ,l_player_fire_00107
1312  0338  3E 05       	ld	a,0x05
1313  033A  96          	sub	a, (hl)
1314  033B  30 12       	jr	NC,l_player_fire_00104
1315  033D  CD 00 00    	call	_sound_hit_enemy
1316  0340  3A 00 00    	ld	a,(_game_god_mode)
1317  0343  B7          	or	a, a
1318  0344  20 0E       	jr	NZ,l_player_fire_00105
1319  0346  21 00 00    	ld	hl,_player_mana
1320  0349  7E          	ld	a, (hl)
1321  034A  C6 FB       	add	a,0xfb
1322  034C  77          	ld	(hl), a
1323  034D  18 05       	jr	l_player_fire_00105
1324  034F              l_player_fire_00104:
1325  034F  21 00 00    	ld	hl,_player_mana
1326  0352  36 00       	ld	(hl),0x00
1327  0354              l_player_fire_00105:
1328  0354  CD 00 00    	call	_game_update_stats
1329  0357  21 07 78    	ld	hl,0x7807
1330  035A  E5          	push	hl
1331  035B  CD 00 00    	call	_game_shoot_fire
1332  035E  F1          	pop	af
1333  035F              l_player_fire_00107:
1334  035F  2E 01       	ld	l,0x01
1335  0361  18 02       	jr	l_player_fire_00112
1336  0363              l_player_fire_00110:
1337  0363  2E 00       	ld	l,0x00
1338  0365              l_player_fire_00112:
1339  0365  C9          	ret
1340  0366              	SECTION code_compiler
1341  0366              ;	---------------------------------
1342  0366              ; Function player_collision
1343  0366              ; ---------------------------------
1344  0366              _player_collision:
1345  0366  CD 00 00    	call	___sdcc_enter_ix
1346  0369  F5          	push	af
1347  036A  21 19 00    	ld	hl,0x0019
1348  036D  E5          	push	hl
1349  036E  2A 00 00    	ld	hl,(_player_hit_time)
1350  0371  E5          	push	hl
1351  0372  CD 00 00    	call	_game_check_time
1352  0375  F1          	pop	af
1353  0376  F1          	pop	af
1354  0377  7D          	ld	a, l
1355  0378  B7          	or	a, a
1356  0379  CA E7 04    	jp	Z, l_player_collision_00127
1357  037C  21 00 00    	ld	hl,_sprite
1358  037F  36 00       	ld	(hl),0x00
1359  0381  01 00 00    	ld	bc,_col+0
1360  0384  3A 07 00    	ld	a,(_col + 7)
1361  0387  32 00 00    	ld	(_s_col1),a
1362  038A  3A 07 00    	ld	a,(_lin + 7)
1363  038D  32 00 00    	ld	(_s_lin1),a
1364  0390  C6 08       	add	a,0x08
1365  0392  57          	ld	d, a
1366  0393  3A 00 00    	ld	a,(_s_col1)
1367  0396  C5          	push	bc
1368  0397  5A          	ld	e,d
1369  0398  57          	ld	d,a
1370  0399  D5          	push	de
1371  039A  CD 00 00    	call	_spr_calc_index
1372  039D  F1          	pop	af
1373  039E  C1          	pop	bc
1374  039F  7D          	ld	a,l
1375  03A0  32 00 00    	ld	(_sprite_curr_index),a
1376  03A3  5F          	ld	e,a
1377  03A4  16 00       	ld	d,0x00
1378  03A6  21 00 00    	ld	hl,_scr_map
1379  03A9  19          	add	hl,de
1380  03AA  5E          	ld	e, (hl)
1381  03AB  3E 2F       	ld	a,0x2f
1382  03AD  93          	sub	a, e
1383  03AE  30 1C       	jr	NC,l_player_collision_00123
1384  03B0  7B          	ld	a,e
1385  03B1  FE 3C       	cp	a,0x3c
1386  03B3  30 17       	jr	NC,l_player_collision_00123
1387  03B5  D6 39       	sub	a,0x39
1388  03B7  20 07       	jr	NZ,l_player_collision_00102
1389  03B9  21 00 00    	ld	hl,_game_worldup
1390  03BC  36 01       	ld	(hl),0x01
1391  03BE  18 0C       	jr	l_player_collision_00123
1392  03C0              l_player_collision_00102:
1393  03C0  2E 06       	ld	l,0x06
1394  03C2  CD 00 00    	call	_zx_border_fastcall
1395  03C5  C5          	push	bc
1396  03C6  2E 32       	ld	l,0x32
1397  03C8  CD 32 11    	call	_player_hit
1398  03CB  C1          	pop	bc
1399  03CC              l_player_collision_00123:
1400  03CC  21 00 00    	ld	hl,_sprite
1401  03CF  7E          	ld	a, (hl)
1402  03D0  D6 07       	sub	a,0x07
1403  03D2  D2 E7 04    	jp	NC, l_player_collision_00127
1404  03D5  3E 00       	ld	a, +((_class) & 0xFF)
1405  03D7  86          	add	a, (hl)
1406  03D8  5F          	ld	e, a
1407  03D9  3E 00       	ld	a, +((_class) / 256)
1408  03DB  CE 00       	adc	a,0x00
1409  03DD  57          	ld	d, a
1410  03DE  1A          	ld	a, (de)
1411  03DF  B7          	or	a, a
1412  03E0  CA E0 04    	jp	Z, l_player_collision_00122
1413  03E3  79          	ld	a, c
1414  03E4  86          	add	a, (hl)
1415  03E5  5F          	ld	e, a
1416  03E6  78          	ld	a, b
1417  03E7  CE 00       	adc	a,0x00
1418  03E9  57          	ld	d, a
1419  03EA  1A          	ld	a, (de)
1420  03EB  DD 77 FE    	ld	(ix-2),a
1421  03EE  DD 36 FF 00 	ld	(ix-1),0x00
1422  03F2  3A 00 00    	ld	a,(_s_col1)
1423  03F5  5F          	ld	e,a
1424  03F6  16 00       	ld	d,0x00
1425  03F8  DD 7E FE    	ld	a,(ix-2)
1426  03FB  93          	sub	a, e
1427  03FC  6F          	ld	l, a
1428  03FD  DD 7E FF    	ld	a,(ix-1)
1429  0400  9A          	sbc	a, d
1430  0401  67          	ld	h, a
1431  0402  CD 00 00    	call	_abs_fastcall
1432  0405  EB          	ex	de,hl
1433  0406  7B          	ld	a, e
1434  0407  D6 02       	sub	a,0x02
1435  0409  7A          	ld	a, d
1436  040A  17          	rla
1437  040B  3F          	ccf
1438  040C  1F          	rra
1439  040D  DE 80       	sbc	a,0x80
1440  040F  D2 E0 04    	jp	NC, l_player_collision_00122
1441  0412  2A 00 00    	ld	hl,(_sprite)
1442  0415  26 00       	ld	h,0x00
1443  0417  11 00 00    	ld	de,_lin
1444  041A  19          	add	hl,de
1445  041B  7E          	ld	a,(hl)
1446  041C  DD 77 FE    	ld	(ix-2),a
1447  041F  DD 36 FF 00 	ld	(ix-1),0x00
1448  0423  3A 00 00    	ld	a,(_s_lin1)
1449  0426  5F          	ld	e,a
1450  0427  16 00       	ld	d,0x00
1451  0429  DD 7E FE    	ld	a,(ix-2)
1452  042C  93          	sub	a, e
1453  042D  6F          	ld	l, a
1454  042E  DD 7E FF    	ld	a,(ix-1)
1455  0431  9A          	sbc	a, d
1456  0432  67          	ld	h, a
1457  0433  CD 00 00    	call	_abs_fastcall
1458  0436  EB          	ex	de,hl
1459  0437  7B          	ld	a, e
1460  0438  D6 0E       	sub	a,0x0e
1461  043A  7A          	ld	a, d
1462  043B  17          	rla
1463  043C  3F          	ccf
1464  043D  1F          	rra
1465  043E  DE 80       	sbc	a,0x80
1466  0440  D2 E0 04    	jp	NC, l_player_collision_00122
1467  0443  2A 00 00    	ld	hl,(_sprite)
1468  0446  26 00       	ld	h,0x00
1469  0448  01 00 00    	ld	bc,_class
1470  044B  09          	add	hl,bc
1471  044C  7E          	ld	a,(hl)
1472  044D  FE 06       	cp	a,0x06
1473  044F  28 05       	jr	Z,l_player_collision_00189
1474  0451  21 00 00    	ld	hl,_sprite
1475  0454  18 2D       	jr	l_player_collision_00110
1476  0456              l_player_collision_00189:
1477  0456  21 00 00    	ld	hl,_player_vita
1478  0459  7E          	ld	a, (hl)
1479  045A  C6 19       	add	a,0x19
1480  045C  77          	ld	(hl), a
1481  045D  3A 00 00    	ld	a,(_player_max_vita)
1482  0460  21 00 00    	ld	hl,_player_vita
1483  0463  96          	sub	a, (hl)
1484  0464  30 06       	jr	NC,l_player_collision_00108
1485  0466  3A 00 00    	ld	a,(_player_max_vita)
1486  0469  32 00 00    	ld	(_player_vita),a
1487  046C              l_player_collision_00108:
1488  046C  21 01 00    	ld	hl,0x0001
1489  046F  CD 2B 0B    	call	_player_score_add
1490  0472  CD 00 00    	call	_game_update_stats
1491  0475  2A 00 00    	ld	hl,(_sprite)
1492  0478  CD 00 00    	call	_spr_destroy
1493  047B  21 00 00    	ld	hl,_game_mush_count
1494  047E  35          	dec	(hl)
1495  047F  2E 00       	ld	l,0x00
1496  0481  18 66       	jr	l_player_collision_00128
1497  0483              l_player_collision_00110:
1498  0483  FE 07       	cp	a,0x07
1499  0485  20 2D       	jr	NZ,l_player_collision_00114
1500  0487  21 00 00    	ld	hl,_player_mana
1501  048A  7E          	ld	a, (hl)
1502  048B  C6 19       	add	a,0x19
1503  048D  77          	ld	(hl), a
1504  048E  3A 00 00    	ld	a,(_player_max_mana)
1505  0491  21 00 00    	ld	hl,_player_mana
1506  0494  96          	sub	a, (hl)
1507  0495  30 06       	jr	NC,l_player_collision_00112
1508  0497  3A 00 00    	ld	a,(_player_max_mana)
1509  049A  32 00 00    	ld	(_player_mana),a
1510  049D              l_player_collision_00112:
1511  049D  21 01 00    	ld	hl,0x0001
1512  04A0  CD 2B 0B    	call	_player_score_add
1513  04A3  CD 00 00    	call	_game_update_stats
1514  04A6  2A 00 00    	ld	hl,(_sprite)
1515  04A9  CD 00 00    	call	_spr_destroy
1516  04AC  21 00 00    	ld	hl,_game_mush_count
1517  04AF  35          	dec	(hl)
1518  04B0  2E 00       	ld	l,0x00
1519  04B2  18 35       	jr	l_player_collision_00128
1520  04B4              l_player_collision_00114:
1521  04B4  D6 08       	sub	a,0x08
1522  04B6  20 1A       	jr	NZ,l_player_collision_00116
1523  04B8  CD ED 04    	call	_player_1up
1524  04BB  21 01 00    	ld	hl,0x0001
1525  04BE  CD 2B 0B    	call	_player_score_add
1526  04C1  CD 00 00    	call	_game_update_stats
1527  04C4  2A 00 00    	ld	hl,(_sprite)
1528  04C7  CD 00 00    	call	_spr_destroy
1529  04CA  21 00 00    	ld	hl,_game_mush_count
1530  04CD  35          	dec	(hl)
1531  04CE  2E 00       	ld	l,0x00
1532  04D0  18 17       	jr	l_player_collision_00128
1533  04D2              l_player_collision_00116:
1534  04D2  2E 02       	ld	l,0x02
1535  04D4  CD 00 00    	call	_zx_border_fastcall
1536  04D7  2E 14       	ld	l,0x14
1537  04D9  CD 32 11    	call	_player_hit
1538  04DC  2E 01       	ld	l,0x01
1539  04DE  18 09       	jr	l_player_collision_00128
1540  04E0              l_player_collision_00122:
1541  04E0  21 00 00    	ld	hl,_sprite
1542  04E3  34          	inc	(hl)
1543  04E4  C3 CC 03    	jp	l_player_collision_00123
1544  04E7              l_player_collision_00127:
1545  04E7  2E 00       	ld	l,0x00
1546  04E9              l_player_collision_00128:
1547  04E9  F1          	pop	af
1548  04EA  DD E1       	pop	ix
1549  04EC  C9          	ret
1550  04ED              	SECTION code_compiler
1551  04ED              ;	---------------------------------
1552  04ED              ; Function player_1up
1553  04ED              ; ---------------------------------
1554  04ED              _player_1up:
1555  04ED  21 00 00    	ld	hl,_player_lives
1556  04F0  7E          	ld	a, (hl)
1557  04F1  D6 FF       	sub	a,0xff
1558  04F3  D0          	ret	NC
1559  04F4  34          	inc	(hl)
1560  04F5  21 00 00    	ld	hl,___str_0
1561  04F8  E5          	push	hl
1562  04F9  21 0C 0C    	ld	hl,0x0c0c
1563  04FC  E5          	push	hl
1564  04FD  CD 00 00    	call	_zx_print_str
1565  0500  AF          	xor	a, a
1566  0501  F5          	push	af
1567  0502  33          	inc	sp
1568  0503  21 19 00    	ld	hl,0x0019
1569  0506  E5          	push	hl
1570  0507  21 0C 15    	ld	hl,0x150c
1571  050A  E5          	push	hl
1572  050B  3E 0C       	ld	a,0x0c
1573  050D  F5          	push	af
1574  050E  33          	inc	sp
1575  050F  CD 00 00    	call	_game_colour_message
1576  0512  F1          	pop	af
1577  0513  F1          	pop	af
1578  0514  F1          	pop	af
1579  0515  CD 00 00    	call	_game_update_stats
1580  0518  C9          	ret
1581  0519              	SECTION rodata_compiler
1582  0000              ___str_0:
1583  0000  31 20 55 50 21 
                        	DEFM "1 UP!"
1584  0005  00          	DEFB 0x00
1585  0006              	SECTION code_compiler
1586  0519              ;	---------------------------------
1587  0519              ; Function player_check_stairs_vertical
1588  0519              ; ---------------------------------
1589  0519              _player_check_stairs_vertical:
1590  0519  CD 00 00    	call	___sdcc_enter_ix
1591  051C  3B          	dec	sp
1592  051D  21 07 00    	ld	hl,+(_col + 0x0007)
1593  0520  4E          	ld	c, (hl)
1594  0521  CB 41       	bit	0, c
1595  0523  20 2F       	jr	NZ,l_player_check_stairs_vertical_00102
1596  0525  3A 07 00    	ld	a,(_lin + 0x0007)
1597  0528  DD 86 04    	add	a,(ix+4)
1598  052B  47          	ld	b, a
1599  052C  79          	ld	a, c
1600  052D  48          	ld	c,b
1601  052E  47          	ld	b,a
1602  052F  C5          	push	bc
1603  0530  CD 00 00    	call	_spr_calc_index
1604  0533  F1          	pop	af
1605  0534  7D          	ld	a,l
1606  0535  32 00 00    	ld	(_sprite_curr_index),a
1607  0538  4F          	ld	c,a
1608  0539  06 00       	ld	b,0x00
1609  053B  21 00 00    	ld	hl,_scr_map
1610  053E  09          	add	hl,bc
1611  053F  7E          	ld	a,(hl)
1612  0540  4F          	ld	c,a
1613  0541  D6 44       	sub	a,0x44
1614  0543  38 05       	jr	C,l_player_check_stairs_vertical_00110
1615  0545  3E 47       	ld	a,0x47
1616  0547  91          	sub	a, c
1617  0548  30 04       	jr	NC,l_player_check_stairs_vertical_00111
1618  054A              l_player_check_stairs_vertical_00110:
1619  054A  1E 00       	ld	e,0x00
1620  054C  18 02       	jr	l_player_check_stairs_vertical_00112
1621  054E              l_player_check_stairs_vertical_00111:
1622  054E  1E 01       	ld	e,0x01
1623  0550              l_player_check_stairs_vertical_00112:
1624  0550  0E 00       	ld	c,0x00
1625  0552  18 57       	jr	l_player_check_stairs_vertical_00103
1626  0554              l_player_check_stairs_vertical_00102:
1627  0554  79          	ld	a, c
1628  0555  DD 96 04    	sub	a,(ix+4)
1629  0558  57          	ld	d, a
1630  0559  01 07 00    	ld	bc,_lin+7
1631  055C  0A          	ld	a, (bc)
1632  055D  DD 86 04    	add	a,(ix+4)
1633  0560  C5          	push	bc
1634  0561  5F          	ld	e,a
1635  0562  D5          	push	de
1636  0563  CD 00 00    	call	_spr_calc_index
1637  0566  F1          	pop	af
1638  0567  C1          	pop	bc
1639  0568  7D          	ld	a,l
1640  0569  32 00 00    	ld	(_sprite_curr_index),a
1641  056C  5F          	ld	e,a
1642  056D  16 00       	ld	d,0x00
1643  056F  21 00 00    	ld	hl,_scr_map
1644  0572  19          	add	hl,de
1645  0573  7E          	ld	a,(hl)
1646  0574  5F          	ld	e,a
1647  0575  D6 44       	sub	a,0x44
1648  0577  38 05       	jr	C,l_player_check_stairs_vertical_00113
1649  0579  3E 47       	ld	a,0x47
1650  057B  93          	sub	a, e
1651  057C  30 04       	jr	NC,l_player_check_stairs_vertical_00114
1652  057E              l_player_check_stairs_vertical_00113:
1653  057E  1E 00       	ld	e,0x00
1654  0580  18 02       	jr	l_player_check_stairs_vertical_00115
1655  0582              l_player_check_stairs_vertical_00114:
1656  0582  1E 01       	ld	e,0x01
1657  0584              l_player_check_stairs_vertical_00115:
1658  0584  3A 07 00    	ld	a,(_col + 0x0007)
1659  0587  DD 96 04    	sub	a,(ix+4)
1660  058A  57          	ld	d, a
1661  058B  0A          	ld	a, (bc)
1662  058C  DD 86 04    	add	a,(ix+4)
1663  058F  D5          	push	de
1664  0590  5F          	ld	e,a
1665  0591  D5          	push	de
1666  0592  CD 00 00    	call	_spr_calc_index
1667  0595  F1          	pop	af
1668  0596  D1          	pop	de
1669  0597  7D          	ld	a,l
1670  0598  32 00 00    	ld	(_sprite_curr_index),a
1671  059B  7B          	ld	a, e
1672  059C  D6 44       	sub	a,0x44
1673  059E  38 05       	jr	C,l_player_check_stairs_vertical_00116
1674  05A0  3E 47       	ld	a,0x47
1675  05A2  93          	sub	a, e
1676  05A3  30 04       	jr	NC,l_player_check_stairs_vertical_00117
1677  05A5              l_player_check_stairs_vertical_00116:
1678  05A5  0E 00       	ld	c,0x00
1679  05A7  18 02       	jr	l_player_check_stairs_vertical_00118
1680  05A9              l_player_check_stairs_vertical_00117:
1681  05A9  0E 01       	ld	c,0x01
1682  05AB              l_player_check_stairs_vertical_00118:
1683  05AB              l_player_check_stairs_vertical_00103:
1684  05AB  7B          	ld	a, e
1685  05AC  B7          	or	a,a
1686  05AD  20 03       	jr	NZ,l_player_check_stairs_vertical_00104
1687  05AF  B1          	or	a,c
1688  05B0  28 07       	jr	Z,l_player_check_stairs_vertical_00105
1689  05B2              l_player_check_stairs_vertical_00104:
1690  05B2  21 00 00    	ld	hl,_player_onstair
1691  05B5  36 01       	ld	(hl),0x01
1692  05B7  18 05       	jr	l_player_check_stairs_vertical_00108
1693  05B9              l_player_check_stairs_vertical_00105:
1694  05B9  21 00 00    	ld	hl,_player_onstair
1695  05BC  36 00       	ld	(hl),0x00
1696  05BE              l_player_check_stairs_vertical_00108:
1697  05BE  33          	inc	sp
1698  05BF  DD E1       	pop	ix
1699  05C1  C9          	ret
1700  05C2              	SECTION code_compiler
1701  05C2              ;	---------------------------------
1702  05C2              ; Function player_check_stairs
1703  05C2              ; ---------------------------------
1704  05C2              _player_check_stairs:
1705  05C2  CD 00 00    	call	___sdcc_enter_ix
1706  05C5  3B          	dec	sp
1707  05C6  5D          	ld	e, l
1708  05C7  3A 07 00    	ld	a,(_col + 0x0007)
1709  05CA  83          	add	a, e
1710  05CB  4F          	ld	c, a
1711  05CC  21 07 00    	ld	hl,+(_lin + 0x0007)
1712  05CF  46          	ld	b, (hl)
1713  05D0  D5          	push	de
1714  05D1  79          	ld	a, c
1715  05D2  48          	ld	c,b
1716  05D3  47          	ld	b,a
1717  05D4  C5          	push	bc
1718  05D5  CD 00 00    	call	_spr_calc_index
1719  05D8  F1          	pop	af
1720  05D9  D1          	pop	de
1721  05DA  7D          	ld	a,l
1722  05DB  32 00 00    	ld	(_sprite_curr_index),a
1723  05DE  4F          	ld	c,a
1724  05DF  06 00       	ld	b,0x00
1725  05E1  21 00 00    	ld	hl,_scr_map
1726  05E4  09          	add	hl,bc
1727  05E5  7E          	ld	a,(hl)
1728  05E6  4F          	ld	c,a
1729  05E7  D6 44       	sub	a,0x44
1730  05E9  38 05       	jr	C,l_player_check_stairs_00111
1731  05EB  3E 47       	ld	a,0x47
1732  05ED  91          	sub	a, c
1733  05EE  30 04       	jr	NC,l_player_check_stairs_00112
1734  05F0              l_player_check_stairs_00111:
1735  05F0  0E 00       	ld	c,0x00
1736  05F2  18 02       	jr	l_player_check_stairs_00113
1737  05F4              l_player_check_stairs_00112:
1738  05F4  0E 01       	ld	c,0x01
1739  05F6              l_player_check_stairs_00113:
1740  05F6  3A 07 00    	ld	a,(_col + 0x0007)
1741  05F9  83          	add	a, e
1742  05FA  57          	ld	d, a
1743  05FB  3A 07 00    	ld	a,(_lin + 0x0007)
1744  05FE  C6 0F       	add	a,0x0f
1745  0600  47          	ld	b, a
1746  0601  C5          	push	bc
1747  0602  58          	ld	e,b
1748  0603  D5          	push	de
1749  0604  CD 00 00    	call	_spr_calc_index
1750  0607  F1          	pop	af
1751  0608  C1          	pop	bc
1752  0609  7D          	ld	a,l
1753  060A  32 00 00    	ld	(_sprite_curr_index),a
1754  060D  5F          	ld	e,a
1755  060E  16 00       	ld	d,0x00
1756  0610  21 00 00    	ld	hl,_scr_map
1757  0613  19          	add	hl,de
1758  0614  7E          	ld	a,(hl)
1759  0615  47          	ld	b,a
1760  0616  D6 44       	sub	a,0x44
1761  0618  38 05       	jr	C,l_player_check_stairs_00114
1762  061A  3E 47       	ld	a,0x47
1763  061C  90          	sub	a, b
1764  061D  30 04       	jr	NC,l_player_check_stairs_00115
1765  061F              l_player_check_stairs_00114:
1766  061F  06 00       	ld	b,0x00
1767  0621  18 02       	jr	l_player_check_stairs_00116
1768  0623              l_player_check_stairs_00115:
1769  0623  06 01       	ld	b,0x01
1770  0625              l_player_check_stairs_00116:
1771  0625  79          	ld	a, c
1772  0626  B7          	or	a,a
1773  0627  20 03       	jr	NZ,l_player_check_stairs_00105
1774  0629  B0          	or	a,b
1775  062A  28 13       	jr	Z,l_player_check_stairs_00106
1776  062C              l_player_check_stairs_00105:
1777  062C  21 00 00    	ld	hl,_player_onstair
1778  062F  7E          	ld	a, (hl)
1779  0630  B7          	or	a, a
1780  0631  20 1D       	jr	NZ,l_player_check_stairs_00109
1781  0633  36 01       	ld	(hl),0x01
1782  0635  21 72 00    	ld	hl,0x0072
1783  0638  E5          	push	hl
1784  0639  CD 54 06    	call	_player_tile
1785  063C  F1          	pop	af
1786  063D  18 11       	jr	l_player_check_stairs_00109
1787  063F              l_player_check_stairs_00106:
1788  063F  21 00 00    	ld	hl,_player_onstair
1789  0642  7E          	ld	a, (hl)
1790  0643  B7          	or	a, a
1791  0644  28 0A       	jr	Z,l_player_check_stairs_00109
1792  0646  36 00       	ld	(hl),0x00
1793  0648  21 60 08    	ld	hl,0x0860
1794  064B  E5          	push	hl
1795  064C  CD 54 06    	call	_player_tile
1796  064F  F1          	pop	af
1797  0650              l_player_check_stairs_00109:
1798  0650  33          	inc	sp
1799  0651  DD E1       	pop	ix
1800  0653  C9          	ret
1801  0654              	SECTION code_compiler
1802  0654              ;	---------------------------------
1803  0654              ; Function player_tile
1804  0654              ; ---------------------------------
1805  0654              _player_tile:
1806  0654  CD 00 00    	call	___sdcc_enter_ix
1807  0657  DD 7E 05    	ld	a,(ix+5)
1808  065A  F5          	push	af
1809  065B  33          	inc	sp
1810  065C  2A FF FF    	ld	hl,(_sprite-1)
1811  065F  DD 6E 04    	ld	l,(ix+4)
1812  0662  E5          	push	hl
1813  0663  CD 00 00    	call	_spr_tile_dir
1814  0666  F1          	pop	af
1815  0667  33          	inc	sp
1816  0668  7D          	ld	a,l
1817  0669  32 07 00    	ld	((_tile + 0x0007)),a
1818  066C  DD E1       	pop	ix
1819  066E  C9          	ret
1820  066F              	SECTION code_compiler
1821  066F              ;	---------------------------------
1822  066F              ; Function player_check_map
1823  066F              ; ---------------------------------
1824  066F              _player_check_map:
1825  066F  21 07 00    	ld	hl,+(_col + 0x0007)
1826  0672  46          	ld	b, (hl)
1827  0673  21 07 00    	ld	hl,+(_lin + 0x0007)
1828  0676  4E          	ld	c, (hl)
1829  0677  C5          	push	bc
1830  0678  CD 00 00    	call	_spr_calc_index
1831  067B  F1          	pop	af
1832  067C  7D          	ld	a,l
1833  067D  32 00 00    	ld	(_sprite_curr_index),a
1834  0680  21 07 00    	ld	hl,+(_col + 0x0007)
1835  0683  4E          	ld	c, (hl)
1836  0684  3A 07 00    	ld	a,(_lin + 0x0007)
1837  0687  E6 0F       	and	a,0x0f
1838  0689  CB 41       	bit	0, c
1839  068B  20 17       	jr	NZ,l_player_check_map_00108
1840  068D  B7          	or	a, a
1841  068E  20 05       	jr	NZ,l_player_check_map_00102
1842  0690  CD CF 06    	call	_player_pick_item
1843  0693  18 39       	jr	l_player_check_map_00110
1844  0695              l_player_check_map_00102:
1845  0695  CD CF 06    	call	_player_pick_item
1846  0698  21 00 00    	ld	hl,_sprite_curr_index
1847  069B  7E          	ld	a, (hl)
1848  069C  C6 10       	add	a,0x10
1849  069E  77          	ld	(hl), a
1850  069F  CD CF 06    	call	_player_pick_item
1851  06A2  18 2A       	jr	l_player_check_map_00110
1852  06A4              l_player_check_map_00108:
1853  06A4  B7          	or	a, a
1854  06A5  20 0C       	jr	NZ,l_player_check_map_00105
1855  06A7  CD CF 06    	call	_player_pick_item
1856  06AA  21 00 00    	ld	hl,_sprite_curr_index
1857  06AD  34          	inc	(hl)
1858  06AE  CD CF 06    	call	_player_pick_item
1859  06B1  18 1B       	jr	l_player_check_map_00110
1860  06B3              l_player_check_map_00105:
1861  06B3  CD CF 06    	call	_player_pick_item
1862  06B6  21 00 00    	ld	hl,_sprite_curr_index
1863  06B9  34          	inc	(hl)
1864  06BA  CD CF 06    	call	_player_pick_item
1865  06BD  21 00 00    	ld	hl,_sprite_curr_index
1866  06C0  7E          	ld	a, (hl)
1867  06C1  C6 0F       	add	a,0x0f
1868  06C3  77          	ld	(hl), a
1869  06C4  CD CF 06    	call	_player_pick_item
1870  06C7  21 00 00    	ld	hl,_sprite_curr_index
1871  06CA  34          	inc	(hl)
1872  06CB  CD CF 06    	call	_player_pick_item
1873  06CE              l_player_check_map_00110:
1874  06CE  C9          	ret
1875  06CF              	SECTION code_compiler
1876  06CF              ;	---------------------------------
1877  06CF              ; Function player_pick_item
1878  06CF              ; ---------------------------------
1879  06CF              _player_pick_item:
1880  06CF  CD 00 00    	call	___sdcc_enter_ix
1881  06D2  3B          	dec	sp
1882  06D3  2A 00 00    	ld	hl,(_sprite_curr_index)
1883  06D6  26 00       	ld	h,0x00
1884  06D8  01 00 00    	ld	bc,_scr_map
1885  06DB  09          	add	hl,bc
1886  06DC  7E          	ld	a,(hl)
1887  06DD  DD 77 FF    	ld	(ix-1),a
1888  06E0  D6 24       	sub	a,0x24
1889  06E2  DA 5B 08    	jp	C, l_player_pick_item_00131
1890  06E5  3E 2F       	ld	a,0x2f
1891  06E7  DD 96 FF    	sub	a,(ix-1)
1892  06EA  DA 5B 08    	jp	C, l_player_pick_item_00131
1893  06ED  CD 00 00    	call	_ay_reset
1894  06F0  21 00 00    	ld	hl,_ay_effect_10
1895  06F3  CD 00 00    	call	_ay_fx_play
1896  06F6  CD 00 00    	call	_sound_coin
1897  06F9  2A 00 00    	ld	hl,(_sprite_curr_index)
1898  06FC  26 00       	ld	h,0x00
1899  06FE  01 00 00    	ld	bc,_scr_map
1900  0701  09          	add	hl,bc
1901  0702  3A 00 00    	ld	a,(_sprite_curr_index)
1902  0705  5F          	ld	e,a
1903  0706  16 00       	ld	d,0x00
1904  0708  E5          	push	hl
1905  0709  D5          	push	de
1906  070A  CD 00 00    	call	_game_match_back
1907  070D  F1          	pop	af
1908  070E  C1          	pop	bc
1909  070F  7D          	ld	a,l
1910  0710  02          	ld	(bc), a
1911  0711  2A 00 00    	ld	hl,(_sprite_curr_index)
1912  0714  26 00       	ld	h,0x00
1913  0716  CD 00 00    	call	_game_obj_set
1914  0719  3A 00 00    	ld	a,(_sprite_curr_index)
1915  071C  07          	rlca
1916  071D  07          	rlca
1917  071E  07          	rlca
1918  071F  07          	rlca
1919  0720  E6 0F       	and	a,0x0f
1920  0722  07          	rlca
1921  0723  07          	rlca
1922  0724  07          	rlca
1923  0725  07          	rlca
1924  0726  E6 F0       	and	a,0xf0
1925  0728  32 00 00    	ld	(_s_lin1),a
1926  072B  3A 00 00    	ld	a,(_sprite_curr_index)
1927  072E  E6 0F       	and	a,0x0f
1928  0730  87          	add	a, a
1929  0731  32 00 00    	ld	(_s_col1),a
1930  0734  21 00 00    	ld	hl,0x0000
1931  0737  E5          	push	hl
1932  0738  21 84 03    	ld	hl,0x0384
1933  073B  E5          	push	hl
1934  073C  F5          	push	af
1935  073D  33          	inc	sp
1936  073E  3A 00 00    	ld	a,(_s_lin1)
1937  0741  F5          	push	af
1938  0742  33          	inc	sp
1939  0743  CD 00 00    	call	_spr_add_anim
1940  0746  F1          	pop	af
1941  0747  F1          	pop	af
1942  0748  F1          	pop	af
1943  0749  DD 7E FF    	ld	a,(ix-1)
1944  074C  D6 24       	sub	a,0x24
1945  074E  DA 5B 08    	jp	C, l_player_pick_item_00131
1946  0751  3E 2F       	ld	a,0x2f
1947  0753  DD 96 FF    	sub	a,(ix-1)
1948  0756  DA 5B 08    	jp	C, l_player_pick_item_00131
1949  0759  DD 7E FF    	ld	a,(ix-1)
1950  075C  C6 DC       	add	a,0xdc
1951  075E  4F          	ld	c, a
1952  075F  06 00       	ld	b,0x00
1953  0761  21 68 07    	ld	hl,l_player_pick_item_00177
1954  0764  09          	add	hl, bc
1955  0765  09          	add	hl, bc
1956  0766  09          	add	hl, bc
1957  0767  E9          	jp	(hl)
1958  0768              l_player_pick_item_00177:
1959  0768  C3 8C 07    	jp	l_player_pick_item_00101
1960  076B  C3 97 07    	jp	l_player_pick_item_00102
1961  076E  C3 A2 07    	jp	l_player_pick_item_00103
1962  0771  C3 AD 07    	jp	l_player_pick_item_00104
1963  0774  C3 B8 07    	jp	l_player_pick_item_00105
1964  0777  C3 DF 07    	jp	l_player_pick_item_00109
1965  077A  C3 F4 07    	jp	l_player_pick_item_00112
1966  077D  C3 09 08    	jp	l_player_pick_item_00115
1967  0780  C3 1E 08    	jp	l_player_pick_item_00118
1968  0783  C3 33 08    	jp	l_player_pick_item_00121
1969  0786  C3 48 08    	jp	l_player_pick_item_00124
1970  0789  C3 D6 07    	jp	l_player_pick_item_00108
1971  078C              l_player_pick_item_00101:
1972  078C  21 00 00    	ld	hl,_player_keys
1973  078F  36 01       	ld	(hl),0x01
1974  0791  CD 00 00    	call	_game_update_stats
1975  0794  C3 5B 08    	jp	l_player_pick_item_00131
1976  0797              l_player_pick_item_00102:
1977  0797  21 01 00    	ld	hl, +(_player_keys + 0x0001)
1978  079A  36 01       	ld	(hl),0x01
1979  079C  CD 00 00    	call	_game_update_stats
1980  079F  C3 5B 08    	jp	l_player_pick_item_00131
1981  07A2              l_player_pick_item_00103:
1982  07A2  21 02 00    	ld	hl, +(_player_keys + 0x0002)
1983  07A5  36 01       	ld	(hl),0x01
1984  07A7  CD 00 00    	call	_game_update_stats
1985  07AA  C3 5B 08    	jp	l_player_pick_item_00131
1986  07AD              l_player_pick_item_00104:
1987  07AD  21 03 00    	ld	hl, +(_player_keys + 0x0003)
1988  07B0  36 01       	ld	(hl),0x01
1989  07B2  CD 00 00    	call	_game_update_stats
1990  07B5  C3 5B 08    	jp	l_player_pick_item_00131
1991  07B8              l_player_pick_item_00105:
1992  07B8  21 01 00    	ld	hl,0x0001
1993  07BB  CD 2B 0B    	call	_player_score_add
1994  07BE  21 00 00    	ld	hl,_player_coins
1995  07C1  7E          	ld	a,(hl)
1996  07C2  3C          	inc	a
1997  07C3  77          	ld	(hl),a
1998  07C4  D6 64       	sub	a,0x64
1999  07C6  20 08       	jr	NZ,l_player_pick_item_00107
2000  07C8  CD ED 04    	call	_player_1up
2001  07CB  21 00 00    	ld	hl,_player_coins
2002  07CE  36 00       	ld	(hl),0x00
2003  07D0              l_player_pick_item_00107:
2004  07D0  CD 00 00    	call	_game_update_stats
2005  07D3  C3 5B 08    	jp	l_player_pick_item_00131
2006  07D6              l_player_pick_item_00108:
2007  07D6  21 0A 00    	ld	hl,0x000a
2008  07D9  CD 2B 0B    	call	_player_score_add
2009  07DC  C3 5B 08    	jp	l_player_pick_item_00131
2010  07DF              l_player_pick_item_00109:
2011  07DF  21 00 00    	ld	hl,_player_str
2012  07E2  34          	inc	(hl)
2013  07E3  21 00 00    	ld	hl,_player_max_vita
2014  07E6  7E          	ld	a, (hl)
2015  07E7  D6 C8       	sub	a,0xc8
2016  07E9  30 70       	jr	NC,l_player_pick_item_00131
2017  07EB  7E          	ld	a, (hl)
2018  07EC  C6 0A       	add	a,0x0a
2019  07EE  77          	ld	(hl), a
2020  07EF  CD 00 00    	call	_game_update_stats
2021  07F2  18 67       	jr	l_player_pick_item_00131
2022  07F4              l_player_pick_item_00112:
2023  07F4  21 00 00    	ld	hl,_player_str
2024  07F7  34          	inc	(hl)
2025  07F8  21 00 00    	ld	hl,_player_max_vita
2026  07FB  7E          	ld	a, (hl)
2027  07FC  D6 C8       	sub	a,0xc8
2028  07FE  30 5B       	jr	NC,l_player_pick_item_00131
2029  0800  7E          	ld	a, (hl)
2030  0801  C6 0A       	add	a,0x0a
2031  0803  77          	ld	(hl), a
2032  0804  CD 00 00    	call	_game_update_stats
2033  0807  18 52       	jr	l_player_pick_item_00131
2034  0809              l_player_pick_item_00115:
2035  0809  21 00 00    	ld	hl,_player_str
2036  080C  34          	inc	(hl)
2037  080D  21 00 00    	ld	hl,_player_max_vita
2038  0810  7E          	ld	a, (hl)
2039  0811  D6 C8       	sub	a,0xc8
2040  0813  30 46       	jr	NC,l_player_pick_item_00131
2041  0815  7E          	ld	a, (hl)
2042  0816  C6 0A       	add	a,0x0a
2043  0818  77          	ld	(hl), a
2044  0819  CD 00 00    	call	_game_update_stats
2045  081C  18 3D       	jr	l_player_pick_item_00131
2046  081E              l_player_pick_item_00118:
2047  081E  21 00 00    	ld	hl,_player_int
2048  0821  34          	inc	(hl)
2049  0822  21 00 00    	ld	hl,_player_max_mana
2050  0825  7E          	ld	a, (hl)
2051  0826  D6 C8       	sub	a,0xc8
2052  0828  30 31       	jr	NC,l_player_pick_item_00131
2053  082A  7E          	ld	a, (hl)
2054  082B  C6 0A       	add	a,0x0a
2055  082D  77          	ld	(hl), a
2056  082E  CD 00 00    	call	_game_update_stats
2057  0831  18 28       	jr	l_player_pick_item_00131
2058  0833              l_player_pick_item_00121:
2059  0833  21 00 00    	ld	hl,_player_int
2060  0836  34          	inc	(hl)
2061  0837  21 00 00    	ld	hl,_player_max_mana
2062  083A  7E          	ld	a, (hl)
2063  083B  D6 C8       	sub	a,0xc8
2064  083D  30 1C       	jr	NC,l_player_pick_item_00131
2065  083F  7E          	ld	a, (hl)
2066  0840  C6 0A       	add	a,0x0a
2067  0842  77          	ld	(hl), a
2068  0843  CD 00 00    	call	_game_update_stats
2069  0846  18 13       	jr	l_player_pick_item_00131
2070  0848              l_player_pick_item_00124:
2071  0848  21 00 00    	ld	hl,_player_int
2072  084B  34          	inc	(hl)
2073  084C  21 00 00    	ld	hl,_player_max_mana
2074  084F  7E          	ld	a, (hl)
2075  0850  D6 C8       	sub	a,0xc8
2076  0852  30 07       	jr	NC,l_player_pick_item_00131
2077  0854  7E          	ld	a, (hl)
2078  0855  C6 0A       	add	a,0x0a
2079  0857  77          	ld	(hl), a
2080  0858  CD 00 00    	call	_game_update_stats
2081  085B              l_player_pick_item_00131:
2082  085B  33          	inc	sp
2083  085C  DD E1       	pop	ix
2084  085E  C9          	ret
2085  085F              	SECTION code_compiler
2086  085F              ;	---------------------------------
2087  085F              ; Function player_hit_platform
2088  085F              ; ---------------------------------
2089  085F              _player_hit_platform:
2090  085F  CD 00 00    	call	___sdcc_enter_ix
2091  0862  F5          	push	af
2092  0863  3A 00 00    	ld	a,(_player_hit_lin)
2093  0866  B7          	or	a, a
2094  0867  C2 F6 0A    	jp	NZ, l_player_hit_platform_00145
2095  086A  21 07 00    	ld	hl,+(_lin + 0x0007)
2096  086D  4E          	ld	c, (hl)
2097  086E  3E 10       	ld	a,0x10
2098  0870  91          	sub	a, c
2099  0871  D2 F6 0A    	jp	NC, l_player_hit_platform_00145
2100  0874  01 00 00    	ld	bc,_scr_map
2101  0877  2A 00 00    	ld	hl,(_index1)
2102  087A  09          	add	hl,bc
2103  087B  7E          	ld	a,(hl)
2104  087C  D6 45       	sub	a,0x45
2105  087E  DA F6 0A    	jp	C, l_player_hit_platform_00145
2106  0881  2A 00 00    	ld	hl,(_curr_time)
2107  0884  22 0E 00    	ld	(_spr_timer + 0x000e),hl
2108  0887  2A 07 00    	ld	hl,(_lin + 0x0007)
2109  088A  26 00       	ld	h,0x00
2110  088C  01 F8 FF    	ld	bc,0xfff8
2111  088F  09          	add	hl,bc
2112  0890  EB          	ex	de,hl
2113  0891  06 04       	ld	b,0x04
2114  0893              l_player_hit_platform_00250:
2115  0893  CB 2A       	sra	d
2116  0895  CB 1B       	rr	e
2117  0897  10 FA       	djnz	l_player_hit_platform_00250
2118  0899  7B          	ld	a, e
2119  089A  07          	rlca
2120  089B  07          	rlca
2121  089C  07          	rlca
2122  089D  07          	rlca
2123  089E  E6 F0       	and	a,0xf0
2124  08A0  C6 08       	add	a,0x08
2125  08A2  32 00 00    	ld	(_player_hit_lin),a
2126  08A5  21 07 00    	ld	hl,+(_col + 0x0007)
2127  08A8  4E          	ld	c, (hl)
2128  08A9  CB 41       	bit	0, c
2129  08AB  20 06       	jr	NZ,l_player_hit_platform_00111
2130  08AD  21 00 00    	ld	hl,_player_hit_col
2131  08B0  71          	ld	(hl), c
2132  08B1  18 2D       	jr	l_player_hit_platform_00112
2133  08B3              l_player_hit_platform_00111:
2134  08B3  21 07 00    	ld	hl,+(_state + 0x0007)
2135  08B6  5E          	ld	e, (hl)
2136  08B7  41          	ld	b, c
2137  08B8  04          	inc	b
2138  08B9  0D          	dec	c
2139  08BA  CB 5B       	bit	3, e
2140  08BC  28 12       	jr	Z,l_player_hit_platform_00108
2141  08BE  3A 00 00    	ld	a,(_g_player_hit_right)
2142  08C1  B7          	or	a, a
2143  08C2  28 06       	jr	Z,l_player_hit_platform_00102
2144  08C4  21 00 00    	ld	hl,_player_hit_col
2145  08C7  70          	ld	(hl), b
2146  08C8  18 16       	jr	l_player_hit_platform_00112
2147  08CA              l_player_hit_platform_00102:
2148  08CA  21 00 00    	ld	hl,_player_hit_col
2149  08CD  71          	ld	(hl), c
2150  08CE  18 10       	jr	l_player_hit_platform_00112
2151  08D0              l_player_hit_platform_00108:
2152  08D0  3A 00 00    	ld	a,(_g_player_hit_left)
2153  08D3  B7          	or	a, a
2154  08D4  28 06       	jr	Z,l_player_hit_platform_00105
2155  08D6  21 00 00    	ld	hl,_player_hit_col
2156  08D9  71          	ld	(hl), c
2157  08DA  18 04       	jr	l_player_hit_platform_00112
2158  08DC              l_player_hit_platform_00105:
2159  08DC  21 00 00    	ld	hl,_player_hit_col
2160  08DF  70          	ld	(hl), b
2161  08E0              l_player_hit_platform_00112:
2162  08E0  2A 00 00    	ld	hl,(_index1)
2163  08E3  01 00 00    	ld	bc,_scr_map
2164  08E6  09          	add	hl,bc
2165  08E7  7E          	ld	a,(hl)
2166  08E8  FE 4D       	cp	a,0x4d
2167  08EA  20 43       	jr	NZ,l_player_hit_platform_00114
2168  08EC  E5          	push	hl
2169  08ED  2A 00 00    	ld	hl,(_index1)
2170  08F0  E5          	push	hl
2171  08F1  CD 00 00    	call	_game_match_back
2172  08F4  F1          	pop	af
2173  08F5  C1          	pop	bc
2174  08F6  7D          	ld	a,l
2175  08F7  02          	ld	(bc), a
2176  08F8  2A 00 00    	ld	hl,(_index1)
2177  08FB  CD 00 00    	call	_game_obj_set
2178  08FE  21 00 00    	ld	hl,_index1
2179  0901  7E          	ld	a, (hl)
2180  0902  E6 0F       	and	a,0x0f
2181  0904  87          	add	a, a
2182  0905  4F          	ld	c, a
2183  0906  23          	inc	hl
2184  0907  56          	ld	d,(hl)
2185  0908  2B          	dec	hl
2186  0909  7E          	ld	a, (hl)
2187  090A  06 04       	ld	b,0x04
2188  090C              l_player_hit_platform_00256:
2189  090C  CB 3A       	srl	d
2190  090E  1F          	rra
2191  090F  10 FB       	djnz	l_player_hit_platform_00256
2192  0911  07          	rlca
2193  0912  07          	rlca
2194  0913  07          	rlca
2195  0914  07          	rlca
2196  0915  E6 F0       	and	a,0xf0
2197  0917  47          	ld	b, a
2198  0918  21 00 00    	ld	hl,0x0000
2199  091B  E5          	push	hl
2200  091C  21 87 03    	ld	hl,0x0387
2201  091F  E5          	push	hl
2202  0920  79          	ld	a, c
2203  0921  48          	ld	c,b
2204  0922  47          	ld	b,a
2205  0923  C5          	push	bc
2206  0924  CD 00 00    	call	_spr_add_anim
2207  0927  F1          	pop	af
2208  0928  F1          	pop	af
2209  0929  F1          	pop	af
2210  092A  2E 01       	ld	l,0x01
2211  092C  C3 F8 0A    	jp	l_player_hit_platform_00148
2212  092F              l_player_hit_platform_00114:
2213  092F  FE 5C       	cp	a,0x5c
2214  0931  28 05       	jr	Z,l_player_hit_platform_00141
2215  0933  D6 5D       	sub	a,0x5d
2216  0935  C2 EA 0A    	jp	NZ,l_player_hit_platform_00142
2217  0938              l_player_hit_platform_00141:
2218  0938  21 00 00    	ld	hl,_tmp0
2219  093B  36 00       	ld	(hl),0x00
2220  093D  3A 00 00    	ld	a,(_game_boss)
2221  0940  B7          	or	a, a
2222  0941  28 0B       	jr	Z,l_player_hit_platform_00174
2223  0943  3A 00 00    	ld	a,(_game_mush_count)
2224  0946  B7          	or	a, a
2225  0947  28 05       	jr	Z,l_player_hit_platform_00174
2226  0949  2E 00       	ld	l,0x00
2227  094B  C3 F8 0A    	jp	l_player_hit_platform_00148
2228  094E              l_player_hit_platform_00174:
2229  094E              l_player_hit_platform_00138:
2230  094E  21 00 00    	ld	hl,_tmp0
2231  0951  7E          	ld	a, (hl)
2232  0952  D6 07       	sub	a,0x07
2233  0954  D2 EA 0A    	jp	NC, l_player_hit_platform_00142
2234  0957  4E          	ld	c,(hl)
2235  0958  06 00       	ld	b,0x00
2236  095A  21 00 00    	ld	hl,_mush_index
2237  095D  09          	add	hl,bc
2238  095E  4E          	ld	c, (hl)
2239  095F  06 00       	ld	b,0x00
2240  0961  2A 00 00    	ld	hl,(_index1)
2241  0964  AF          	xor	a,a
2242  0965  ED 42       	sbc	hl,bc
2243  0967  C2 E3 0A    	jp	NZ,l_player_hit_platform_00137
2244  096A  3A 07 00    	ld	a,(_lin + 0x0007)
2245  096D  07          	rlca
2246  096E  07          	rlca
2247  096F  07          	rlca
2248  0970  07          	rlca
2249  0971  E6 0F       	and	a,0x0f
2250  0973  07          	rlca
2251  0974  07          	rlca
2252  0975  07          	rlca
2253  0976  07          	rlca
2254  0977  E6 F0       	and	a,0xf0
2255  0979  C6 E0       	add	a,0xe0
2256  097B  32 00 00    	ld	(_s_lin1),a
2257  097E  3A 07 00    	ld	a,(_col + 0x0007)
2258  0981  CB 3F       	srl	a
2259  0983  87          	add	a, a
2260  0984  32 00 00    	ld	(_s_col1),a
2261  0987  21 00 00    	ld	hl,_tmp
2262  098A  36 00       	ld	(hl),0x00
2263  098C              l_player_hit_platform_00120:
2264  098C  21 00 00    	ld	hl,_tmp
2265  098F  7E          	ld	a, (hl)
2266  0990  D6 07       	sub	a,0x07
2267  0992  30 1C       	jr	NC,l_player_hit_platform_00122
2268  0994  4E          	ld	c,(hl)
2269  0995  06 00       	ld	b,0x00
2270  0997  21 00 00    	ld	hl,_mush_index
2271  099A  09          	add	hl,bc
2272  099B  4E          	ld	c, (hl)
2273  099C  06 00       	ld	b,0x00
2274  099E  21 00 00    	ld	hl,_index1
2275  09A1  7E          	ld	a, (hl)
2276  09A2  91          	sub	a, c
2277  09A3  20 05       	jr	NZ,l_player_hit_platform_00262
2278  09A5  23          	inc	hl
2279  09A6  7E          	ld	a, (hl)
2280  09A7  90          	sub	a, b
2281  09A8  28 06       	jr	Z,l_player_hit_platform_00122
2282  09AA              l_player_hit_platform_00262:
2283  09AA  21 00 00    	ld	hl,_tmp
2284  09AD  34          	inc	(hl)
2285  09AE  18 DC       	jr	l_player_hit_platform_00120
2286  09B0              l_player_hit_platform_00122:
2287  09B0  2A 00 00    	ld	hl,(_tmp)
2288  09B3  26 00       	ld	h,0x00
2289  09B5  01 00 00    	ld	bc,_mush_class
2290  09B8  09          	add	hl,bc
2291  09B9  7E          	ld	a,(hl)
2292  09BA  FE 78       	cp	a,0x78
2293  09BC  28 18       	jr	Z,l_player_hit_platform_00123
2294  09BE  FE 79       	cp	a,0x79
2295  09C0  28 2F       	jr	Z,l_player_hit_platform_00124
2296  09C2  FE 7A       	cp	a,0x7a
2297  09C4  28 5F       	jr	Z,l_player_hit_platform_00126
2298  09C6  FE 7B       	cp	a,0x7b
2299  09C8  28 41       	jr	Z,l_player_hit_platform_00125
2300  09CA  FE 7C       	cp	a,0x7c
2301  09CC  CA 59 0A    	jp	Z,l_player_hit_platform_00128
2302  09CF  D6 7D       	sub	a,0x7d
2303  09D1  28 6C       	jr	Z,l_player_hit_platform_00127
2304  09D3  C3 71 0A    	jp	l_player_hit_platform_00129
2305  09D6              l_player_hit_platform_00123:
2306  09D6  2E 02       	ld	l,0x02
2307  09D8  CD 00 00    	call	_zx_border_fastcall
2308  09DB  3A 00 00    	ld	a,(_s_col1)
2309  09DE  21 06 FF    	ld	hl,0xff06
2310  09E1  E5          	push	hl
2311  09E2  F5          	push	af
2312  09E3  33          	inc	sp
2313  09E4  3A 00 00    	ld	a,(_s_lin1)
2314  09E7  F5          	push	af
2315  09E8  33          	inc	sp
2316  09E9  CD 00 00    	call	_enemy_init
2317  09EC  F1          	pop	af
2318  09ED  F1          	pop	af
2319  09EE  C3 71 0A    	jp	l_player_hit_platform_00129
2320  09F1              l_player_hit_platform_00124:
2321  09F1  2E 02       	ld	l,0x02
2322  09F3  CD 00 00    	call	_zx_border_fastcall
2323  09F6  3A 00 00    	ld	a,(_s_col1)
2324  09F9  21 06 01    	ld	hl,0x0106
2325  09FC  E5          	push	hl
2326  09FD  F5          	push	af
2327  09FE  33          	inc	sp
2328  09FF  3A 00 00    	ld	a,(_s_lin1)
2329  0A02  F5          	push	af
2330  0A03  33          	inc	sp
2331  0A04  CD 00 00    	call	_enemy_init
2332  0A07  F1          	pop	af
2333  0A08  F1          	pop	af
2334  0A09  18 66       	jr	l_player_hit_platform_00129
2335  0A0B              l_player_hit_platform_00125:
2336  0A0B  2E 01       	ld	l,0x01
2337  0A0D  CD 00 00    	call	_zx_border_fastcall
2338  0A10  3A 00 00    	ld	a,(_s_col1)
2339  0A13  21 07 01    	ld	hl,0x0107
2340  0A16  E5          	push	hl
2341  0A17  F5          	push	af
2342  0A18  33          	inc	sp
2343  0A19  3A 00 00    	ld	a,(_s_lin1)
2344  0A1C  F5          	push	af
2345  0A1D  33          	inc	sp
2346  0A1E  CD 00 00    	call	_enemy_init
2347  0A21  F1          	pop	af
2348  0A22  F1          	pop	af
2349  0A23  18 4C       	jr	l_player_hit_platform_00129
2350  0A25              l_player_hit_platform_00126:
2351  0A25  2E 01       	ld	l,0x01
2352  0A27  CD 00 00    	call	_zx_border_fastcall
2353  0A2A  3A 00 00    	ld	a,(_s_col1)
2354  0A2D  21 07 FF    	ld	hl,0xff07
2355  0A30  E5          	push	hl
2356  0A31  F5          	push	af
2357  0A32  33          	inc	sp
2358  0A33  3A 00 00    	ld	a,(_s_lin1)
2359  0A36  F5          	push	af
2360  0A37  33          	inc	sp
2361  0A38  CD 00 00    	call	_enemy_init
2362  0A3B  F1          	pop	af
2363  0A3C  F1          	pop	af
2364  0A3D  18 32       	jr	l_player_hit_platform_00129
2365  0A3F              l_player_hit_platform_00127:
2366  0A3F  2E 04       	ld	l,0x04
2367  0A41  CD 00 00    	call	_zx_border_fastcall
2368  0A44  3A 00 00    	ld	a,(_s_col1)
2369  0A47  21 08 01    	ld	hl,0x0108
2370  0A4A  E5          	push	hl
2371  0A4B  F5          	push	af
2372  0A4C  33          	inc	sp
2373  0A4D  3A 00 00    	ld	a,(_s_lin1)
2374  0A50  F5          	push	af
2375  0A51  33          	inc	sp
2376  0A52  CD 00 00    	call	_enemy_init
2377  0A55  F1          	pop	af
2378  0A56  F1          	pop	af
2379  0A57  18 18       	jr	l_player_hit_platform_00129
2380  0A59              l_player_hit_platform_00128:
2381  0A59  2E 04       	ld	l,0x04
2382  0A5B  CD 00 00    	call	_zx_border_fastcall
2383  0A5E  3A 00 00    	ld	a,(_s_col1)
2384  0A61  21 08 FF    	ld	hl,0xff08
2385  0A64  E5          	push	hl
2386  0A65  F5          	push	af
2387  0A66  33          	inc	sp
2388  0A67  3A 00 00    	ld	a,(_s_lin1)
2389  0A6A  F5          	push	af
2390  0A6B  33          	inc	sp
2391  0A6C  CD 00 00    	call	_enemy_init
2392  0A6F  F1          	pop	af
2393  0A70  F1          	pop	af
2394  0A71              l_player_hit_platform_00129:
2395  0A71  21 00 00    	ld	hl,_game_mush_count
2396  0A74  34          	inc	(hl)
2397  0A75  3A 00 00    	ld	a,(_game_boss)
2398  0A78  B7          	or	a, a
2399  0A79  20 68       	jr	NZ,l_player_hit_platform_00137
2400  0A7B  3A 00 00    	ld	a,(_index1)
2401  0A7E  C6 F0       	add	a,0xf0
2402  0A80  32 00 00    	ld	(_index0),a
2403  0A83  3A 01 00    	ld	a,(_index1 + 1)
2404  0A86  CE FF       	adc	a,0xff
2405  0A88  21 01 00    	ld	hl,_index0 + 1
2406  0A8B  77          	ld	(hl), a
2407  0A8C  3E 00       	ld	a, +((_scr_map) & 0xFF)
2408  0A8E  2B          	dec	hl
2409  0A8F  86          	add	a, (hl)
2410  0A90  4F          	ld	c, a
2411  0A91  3E 00       	ld	a, +((_scr_map) / 256)
2412  0A93  23          	inc	hl
2413  0A94  8E          	adc	a, (hl)
2414  0A95  47          	ld	b, a
2415  0A96  C5          	push	bc
2416  0A97  46          	ld	b,(hl)
2417  0A98  2B          	dec	hl
2418  0A99  4E          	ld	c,(hl)
2419  0A9A  C5          	push	bc
2420  0A9B  CD 00 00    	call	_game_match_back
2421  0A9E  F1          	pop	af
2422  0A9F  C1          	pop	bc
2423  0AA0  7D          	ld	a,l
2424  0AA1  02          	ld	(bc), a
2425  0AA2  3E 00       	ld	a, +((_scr_map) & 0xFF)
2426  0AA4  21 00 00    	ld	hl,_index1
2427  0AA7  86          	add	a, (hl)
2428  0AA8  DD 77 FE    	ld	(ix-2),a
2429  0AAB  3E 00       	ld	a, +((_scr_map) / 256)
2430  0AAD  23          	inc	hl
2431  0AAE  8E          	adc	a, (hl)
2432  0AAF  DD 77 FF    	ld	(ix-1),a
2433  0AB2  E1          	pop	hl
2434  0AB3  7E          	ld	a,(hl)
2435  0AB4  E5          	push	hl
2436  0AB5  FE 5C       	cp	a,0x5c
2437  0AB7  28 04       	jr	Z,l_player_hit_platform_00130
2438  0AB9  D6 5D       	sub	a,0x5d
2439  0ABB  20 06       	jr	NZ,l_player_hit_platform_00131
2440  0ABD              l_player_hit_platform_00130:
2441  0ABD  E1          	pop	hl
2442  0ABE  E5          	push	hl
2443  0ABF  36 4F       	ld	(hl),0x4f
2444  0AC1  18 04       	jr	l_player_hit_platform_00132
2445  0AC3              l_player_hit_platform_00131:
2446  0AC3  E1          	pop	hl
2447  0AC4  E5          	push	hl
2448  0AC5  36 54       	ld	(hl),0x54
2449  0AC7              l_player_hit_platform_00132:
2450  0AC7  2A 00 00    	ld	hl,(_index1)
2451  0ACA  01 F0 FF    	ld	bc,0xfff0
2452  0ACD  09          	add	hl,bc
2453  0ACE  CD 00 00    	call	_game_obj_set
2454  0AD1  3A 00 00    	ld	a,(_s_lin1)
2455  0AD4  C6 10       	add	a,0x10
2456  0AD6  4F          	ld	c, a
2457  0AD7  3A 00 00    	ld	a, (_s_col1)
2458  0ADA  47          	ld	b,a
2459  0ADB  C5          	push	bc
2460  0ADC  3E 4F       	ld	a,0x4f
2461  0ADE  F5          	push	af
2462  0ADF  33          	inc	sp
2463  0AE0  CD 00 00    	call	_NIRVANAP_drawT_callee
2464  0AE3              l_player_hit_platform_00137:
2465  0AE3  21 00 00    	ld	hl,_tmp0
2466  0AE6  34          	inc	(hl)
2467  0AE7  C3 4E 09    	jp	l_player_hit_platform_00138
2468  0AEA              l_player_hit_platform_00142:
2469  0AEA  2E 01       	ld	l,0x01
2470  0AEC  CD 00 00    	call	_spr_brick_anim
2471  0AEF  CD 00 00    	call	_sound_hit_brick
2472  0AF2  2E 01       	ld	l,0x01
2473  0AF4  18 02       	jr	l_player_hit_platform_00148
2474  0AF6              l_player_hit_platform_00145:
2475  0AF6  2E 00       	ld	l,0x00
2476  0AF8              l_player_hit_platform_00148:
2477  0AF8  F1          	pop	af
2478  0AF9  DD E1       	pop	ix
2479  0AFB  C9          	ret
2480  0AFC              	SECTION code_compiler
2481  0AFC              ;	---------------------------------
2482  0AFC              ; Function player_hit_platform_clear
2483  0AFC              ; ---------------------------------
2484  0AFC              _player_hit_platform_clear:
2485  0AFC  01 04 00    	ld	bc,0x0004
2486  0AFF  C5          	push	bc
2487  0B00  2A 0E 00    	ld	hl,(_spr_timer + 0x000e)
2488  0B03  E5          	push	hl
2489  0B04  CD 00 00    	call	_game_check_time
2490  0B07  F1          	pop	af
2491  0B08  F1          	pop	af
2492  0B09  7D          	ld	a, l
2493  0B0A  B7          	or	a, a
2494  0B0B  C8          	ret	Z
2495  0B0C  2A FF FF    	ld	hl,(_player_hit_col - 1)
2496  0B0F  3A 00 00    	ld	a,(_player_hit_lin)
2497  0B12  6F          	ld	l,a
2498  0B13  E5          	push	hl
2499  0B14  CD 00 00    	call	_spr_calc_index
2500  0B17  F1          	pop	af
2501  0B18  22 00 00    	ld	(_index1),hl
2502  0B1B  2E 00       	ld	l,0x00
2503  0B1D  CD 00 00    	call	_spr_brick_anim
2504  0B20  21 00 00    	ld	hl,_player_hit_lin
2505  0B23  36 00       	ld	(hl),0x00
2506  0B25  21 00 00    	ld	hl,_player_hit_col
2507  0B28  36 00       	ld	(hl),0x00
2508  0B2A  C9          	ret
2509  0B2B              	SECTION code_compiler
2510  0B2B              ;	---------------------------------
2511  0B2B              ; Function player_score_add
2512  0B2B              ; ---------------------------------
2513  0B2B              _player_score_add:
2514  0B2B  ED 4B 00 00 	ld	bc,(_player_score)
2515  0B2F  09          	add	hl,bc
2516  0B30  22 00 00    	ld	(_player_score),hl
2517  0B33  21 00 00    	ld	hl,_player_lvl
2518  0B36  7E          	ld	a, (hl)
2519  0B37  D6 14       	sub	a,0x14
2520  0B39  30 3C       	jr	NC,l_player_score_add_00104
2521  0B3B  01 00 00    	ld	bc,_player_lvl_table+0
2522  0B3E  6E          	ld	l,(hl)
2523  0B3F  26 00       	ld	h,0x00
2524  0B41  29          	add	hl, hl
2525  0B42  09          	add	hl, bc
2526  0B43  4E          	ld	c, (hl)
2527  0B44  23          	inc	hl
2528  0B45  46          	ld	b, (hl)
2529  0B46  21 00 00    	ld	hl,_player_score
2530  0B49  7E          	ld	a, (hl)
2531  0B4A  91          	sub	a, c
2532  0B4B  23          	inc	hl
2533  0B4C  7E          	ld	a, (hl)
2534  0B4D  98          	sbc	a, b
2535  0B4E  38 27       	jr	C,l_player_score_add_00104
2536  0B50  21 00 00    	ld	hl,_player_lvl
2537  0B53  34          	inc	(hl)
2538  0B54  21 06 00    	ld	hl,___str_1
2539  0B57  E5          	push	hl
2540  0B58  21 0C 0C    	ld	hl,0x0c0c
2541  0B5B  E5          	push	hl
2542  0B5C  CD 00 00    	call	_zx_print_str
2543  0B5F  AF          	xor	a, a
2544  0B60  F5          	push	af
2545  0B61  33          	inc	sp
2546  0B62  21 19 00    	ld	hl,0x0019
2547  0B65  E5          	push	hl
2548  0B66  21 0C 15    	ld	hl,0x150c
2549  0B69  E5          	push	hl
2550  0B6A  3E 0C       	ld	a,0x0c
2551  0B6C  F5          	push	af
2552  0B6D  33          	inc	sp
2553  0B6E  CD 00 00    	call	_game_colour_message
2554  0B71  F1          	pop	af
2555  0B72  F1          	pop	af
2556  0B73  F1          	pop	af
2557  0B74  CD 00 00    	call	_game_update_stats
2558  0B77              l_player_score_add_00104:
2559  0B77  3A 00 00    	ld	a,(_game_score_top)
2560  0B7A  21 00 00    	ld	hl,_player_score
2561  0B7D  96          	sub	a, (hl)
2562  0B7E  3A 01 00    	ld	a,(_game_score_top + 1)
2563  0B81  23          	inc	hl
2564  0B82  9E          	sbc	a, (hl)
2565  0B83  30 06       	jr	NC,l_player_score_add_00106
2566  0B85  2A 00 00    	ld	hl,(_player_score)
2567  0B88  22 00 00    	ld	(_game_score_top),hl
2568  0B8B              l_player_score_add_00106:
2569  0B8B  CD 00 00    	call	_game_print_score
2570  0B8E  C9          	ret
2571  0B8F              	SECTION rodata_compiler
2572  0006              ___str_1:
2573  0006  4C 45 56 45 4C 20 55 50 21 
                        	DEFM "LEVEL UP!"
2574  000F  00          	DEFB 0x00
2575  0010              	SECTION code_compiler
2576  0B8F              ;	---------------------------------
2577  0B8F              ; Function player_check_floor
2578  0B8F              ; ---------------------------------
2579  0B8F              _player_check_floor:
2580  0B8F  CD 00 00    	call	___sdcc_enter_ix
2581  0B92  F5          	push	af
2582  0B93  F5          	push	af
2583  0B94  F5          	push	af
2584  0B95  11 07 00    	ld	de,_col+7
2585  0B98  1A          	ld	a, (de)
2586  0B99  47          	ld	b, a
2587  0B9A  3A 07 00    	ld	a,(_lin + 0x0007)
2588  0B9D  C6 10       	add	a,0x10
2589  0B9F  D5          	push	de
2590  0BA0  4F          	ld	c,a
2591  0BA1  C5          	push	bc
2592  0BA2  CD 00 00    	call	_spr_calc_index
2593  0BA5  F1          	pop	af
2594  0BA6  D1          	pop	de
2595  0BA7  DD 75 FC    	ld	(ix-4),l
2596  0BAA  DD 74 FD    	ld	(ix-3),h
2597  0BAD  01 00 00    	ld	bc,_scr_map+0
2598  0BB0  79          	ld	a, c
2599  0BB1  DD 86 FC    	add	a,(ix-4)
2600  0BB4  DD 77 FE    	ld	(ix-2),a
2601  0BB7  78          	ld	a, b
2602  0BB8  DD 8E FD    	adc	a,(ix-3)
2603  0BBB  DD 6E FE    	ld	l,(ix-2)
2604  0BBE  DD 77 FF    	ld	(ix-1),a
2605  0BC1  67          	ld	h,a
2606  0BC2  7E          	ld	a, (hl)
2607  0BC3  DD 77 FB    	ld	(ix-5),a
2608  0BC6  DD 6E FC    	ld	l,(ix-4)
2609  0BC9  DD 66 FD    	ld	h,(ix-3)
2610  0BCC  23          	inc	hl
2611  0BCD  09          	add	hl,bc
2612  0BCE  3A 00 00    	ld	a,(_s_lin0)
2613  0BD1  D6 90       	sub	a,0x90
2614  0BD3  4D          	ld	c,l
2615  0BD4  44          	ld	b,h
2616  0BD5  20 26       	jr	NZ,l_player_check_floor_00108
2617  0BD7  3A 00 00    	ld	a,(_map_heigth)
2618  0BDA  C5          	push	bc
2619  0BDB  F5          	push	af
2620  0BDC  33          	inc	sp
2621  0BDD  3A 00 00    	ld	a,(_scr_curr)
2622  0BE0  F5          	push	af
2623  0BE1  33          	inc	sp
2624  0BE2  CD 00 00    	call	__divuchar_callee
2625  0BE5  C1          	pop	bc
2626  0BE6  7D          	ld	a,l
2627  0BE7  3C          	inc	a
2628  0BE8  32 00 00    	ld	(_tmp1),a
2629  0BEB  21 00 00    	ld	hl,_map_heigth
2630  0BEE  96          	sub	a, (hl)
2631  0BEF  30 06       	jr	NC,l_player_check_floor_00102
2632  0BF1  DD 36 FB 00 	ld	(ix-5),0x00
2633  0BF5  18 14       	jr	l_player_check_floor_00109
2634  0BF7              l_player_check_floor_00102:
2635  0BF7  DD 36 FB 48 	ld	(ix-5),0x48
2636  0BFB  18 0E       	jr	l_player_check_floor_00109
2637  0BFD              l_player_check_floor_00108:
2638  0BFD  1A          	ld	a, (de)
2639  0BFE  0F          	rrca
2640  0BFF  38 06       	jr	C,l_player_check_floor_00105
2641  0C01  DD 36 FA 00 	ld	(ix-6),0x00
2642  0C05  18 04       	jr	l_player_check_floor_00109
2643  0C07              l_player_check_floor_00105:
2644  0C07  0A          	ld	a, (bc)
2645  0C08  DD 77 FA    	ld	(ix-6),a
2646  0C0B              l_player_check_floor_00109:
2647  0C0B  DD 7E FB    	ld	a,(ix-5)
2648  0C0E  D6 3C       	sub	a,0x3c
2649  0C10  38 07       	jr	C,l_player_check_floor_00132
2650  0C12  DD 7E FB    	ld	a,(ix-5)
2651  0C15  D6 60       	sub	a,0x60
2652  0C17  38 32       	jr	C,l_player_check_floor_00128
2653  0C19              l_player_check_floor_00132:
2654  0C19  DD 7E FA    	ld	a,(ix-6)
2655  0C1C  D6 3C       	sub	a,0x3c
2656  0C1E  38 07       	jr	C,l_player_check_floor_00127
2657  0C20  DD 7E FA    	ld	a,(ix-6)
2658  0C23  D6 60       	sub	a,0x60
2659  0C25  38 24       	jr	C,l_player_check_floor_00128
2660  0C27              l_player_check_floor_00127:
2661  0C27  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
2662  0C2A  36 02       	ld	(hl),0x02
2663  0C2C  21 00 00    	ld	hl,_s_state
2664  0C2F  CB CE       	set	1, (hl)
2665  0C31  2E 00       	ld	l,0x00
2666  0C33  CD C2 05    	call	_player_check_stairs
2667  0C36  3A 00 00    	ld	a,(_player_onstair)
2668  0C39  B7          	or	a, a
2669  0C3A  C2 E5 0C    	jp	NZ, l_player_check_floor_00133
2670  0C3D  3A 00 00    	ld	a,(_s_lin0)
2671  0C40  D6 90       	sub	a,0x90
2672  0C42  C2 E5 0C    	jp	NZ,l_player_check_floor_00133
2673  0C45  CD 00 00    	call	_spr_page_down
2674  0C48  C3 E5 0C    	jp	l_player_check_floor_00133
2675  0C4B              l_player_check_floor_00128:
2676  0C4B  C5          	push	bc
2677  0C4C  21 10 00    	ld	hl,0x0010
2678  0C4F  E5          	push	hl
2679  0C50  2A 00 00    	ld	hl,(_player_brick_time)
2680  0C53  E5          	push	hl
2681  0C54  CD 00 00    	call	_game_check_time
2682  0C57  F1          	pop	af
2683  0C58  F1          	pop	af
2684  0C59  C1          	pop	bc
2685  0C5A  7D          	ld	a,l
2686  0C5B  B7          	or	a, a
2687  0C5C  CA E5 0C    	jp	Z, l_player_check_floor_00133
2688  0C5F  2A 00 00    	ld	hl,(_curr_time)
2689  0C62  22 00 00    	ld	(_player_brick_time),hl
2690  0C65  DD 7E FB    	ld	a,(ix-5)
2691  0C68  D6 40       	sub	a,0x40
2692  0C6A  20 1A       	jr	NZ,l_player_check_floor_00114
2693  0C6C  C5          	push	bc
2694  0C6D  DD 6E FC    	ld	l,(ix-4)
2695  0C70  DD 66 FD    	ld	h,(ix-3)
2696  0C73  E5          	push	hl
2697  0C74  CD 00 00    	call	_game_match_back
2698  0C77  F1          	pop	af
2699  0C78  C1          	pop	bc
2700  0C79  5D          	ld	e,l
2701  0C7A  DD 6E FE    	ld	l,(ix-2)
2702  0C7D  DD 66 FF    	ld	h,(ix-1)
2703  0C80  73          	ld	(hl), e
2704  0C81  C5          	push	bc
2705  0C82  CD EA 0C    	call	_player_gasta_brick
2706  0C85  C1          	pop	bc
2707  0C86              l_player_check_floor_00114:
2708  0C86  DD 7E FB    	ld	a,(ix-5)
2709  0C89  D6 3F       	sub	a,0x3f
2710  0C8B  20 0D       	jr	NZ,l_player_check_floor_00116
2711  0C8D  DD 6E FE    	ld	l,(ix-2)
2712  0C90  DD 66 FF    	ld	h,(ix-1)
2713  0C93  36 40       	ld	(hl),0x40
2714  0C95  C5          	push	bc
2715  0C96  CD EA 0C    	call	_player_gasta_brick
2716  0C99  C1          	pop	bc
2717  0C9A              l_player_check_floor_00116:
2718  0C9A  DD 7E FB    	ld	a,(ix-5)
2719  0C9D  D6 3E       	sub	a,0x3e
2720  0C9F  20 0D       	jr	NZ,l_player_check_floor_00118
2721  0CA1  DD 6E FE    	ld	l,(ix-2)
2722  0CA4  DD 66 FF    	ld	h,(ix-1)
2723  0CA7  36 3F       	ld	(hl),0x3f
2724  0CA9  C5          	push	bc
2725  0CAA  CD EA 0C    	call	_player_gasta_brick
2726  0CAD  C1          	pop	bc
2727  0CAE              l_player_check_floor_00118:
2728  0CAE  DD 7E FA    	ld	a,(ix-6)
2729  0CB1  D6 40       	sub	a,0x40
2730  0CB3  20 14       	jr	NZ,l_player_check_floor_00120
2731  0CB5  C5          	push	bc
2732  0CB6  DD 6E FC    	ld	l,(ix-4)
2733  0CB9  DD 66 FD    	ld	h,(ix-3)
2734  0CBC  E5          	push	hl
2735  0CBD  CD 00 00    	call	_game_match_back
2736  0CC0  F1          	pop	af
2737  0CC1  C1          	pop	bc
2738  0CC2  7D          	ld	a,l
2739  0CC3  02          	ld	(bc), a
2740  0CC4  C5          	push	bc
2741  0CC5  CD EA 0C    	call	_player_gasta_brick
2742  0CC8  C1          	pop	bc
2743  0CC9              l_player_check_floor_00120:
2744  0CC9  DD 7E FA    	ld	a,(ix-6)
2745  0CCC  D6 3F       	sub	a,0x3f
2746  0CCE  20 08       	jr	NZ,l_player_check_floor_00122
2747  0CD0  3E 40       	ld	a,0x40
2748  0CD2  02          	ld	(bc), a
2749  0CD3  C5          	push	bc
2750  0CD4  CD EA 0C    	call	_player_gasta_brick
2751  0CD7  C1          	pop	bc
2752  0CD8              l_player_check_floor_00122:
2753  0CD8  DD 7E FA    	ld	a,(ix-6)
2754  0CDB  D6 3E       	sub	a,0x3e
2755  0CDD  20 06       	jr	NZ,l_player_check_floor_00133
2756  0CDF  3E 3F       	ld	a,0x3f
2757  0CE1  02          	ld	(bc), a
2758  0CE2  CD EA 0C    	call	_player_gasta_brick
2759  0CE5              l_player_check_floor_00133:
2760  0CE5  DD F9       	ld	sp, ix
2761  0CE7  DD E1       	pop	ix
2762  0CE9  C9          	ret
2763  0CEA              	SECTION code_compiler
2764  0CEA              ;	---------------------------------
2765  0CEA              ; Function player_gasta_brick
2766  0CEA              ; ---------------------------------
2767  0CEA              _player_gasta_brick:
2768  0CEA  3A 00 00    	ld	a,(_s_lin0)
2769  0CED  32 00 00    	ld	(_s_lin1),a
2770  0CF0  3A 00 00    	ld	a,(_s_col0)
2771  0CF3  32 00 00    	ld	(_s_col1),a
2772  0CF6  3A 07 00    	ld	a,(_lin + 0x0007)
2773  0CF9  C6 10       	add	a,0x10
2774  0CFB  32 00 00    	ld	(_s_lin0),a
2775  0CFE  3A 07 00    	ld	a,(_col + 0x0007)
2776  0D01  32 00 00    	ld	(_s_col0),a
2777  0D04  CD 00 00    	call	_spr_back_repaint
2778  0D07  3A 00 00    	ld	a,(_s_lin1)
2779  0D0A  32 00 00    	ld	(_s_lin0),a
2780  0D0D  3A 00 00    	ld	a,(_s_col1)
2781  0D10  32 00 00    	ld	(_s_col0),a
2782  0D13  C9          	ret
2783  0D14              	SECTION code_compiler
2784  0D14              ;	---------------------------------
2785  0D14              ; Function player_move_jump
2786  0D14              ; ---------------------------------
2787  0D14              _player_move_jump:
2788  0D14  CD 00 00    	call	___sdcc_enter_ix
2789  0D17  F5          	push	af
2790  0D18  21 00 00    	ld	hl,_game_gravity
2791  0D1B  4E          	ld	c, (hl)
2792  0D1C  21 00 00    	ld	hl,_player_vel_y
2793  0D1F  7E          	ld	a, (hl)
2794  0D20  81          	add	a, c
2795  0D21  77          	ld	(hl), a
2796  0D22  21 00 00    	ld	hl,_sprite_on_air
2797  0D25  36 01       	ld	(hl),0x01
2798  0D27  3A 00 00    	ld	a,(_player_vel_inc)
2799  0D2A  B7          	or	a, a
2800  0D2B  28 2B       	jr	Z,l_player_move_jump_00107
2801  0D2D  21 00 00    	ld	hl,_dirs
2802  0D30  CB 7E       	bit	7, (hl)
2803  0D32  28 07       	jr	Z,l_player_move_jump_00104
2804  0D34  21 00 00    	ld	hl,_dirs
2805  0D37  CB 46       	bit	0, (hl)
2806  0D39  20 1D       	jr	NZ,l_player_move_jump_00107
2807  0D3B              l_player_move_jump_00104:
2808  0D3B  3A 00 00    	ld	a,(_player_vel_y1)
2809  0D3E  21 00 00    	ld	hl,_player_vel_y
2810  0D41  96          	sub	a, (hl)
2811  0D42  E2 47 0D    	jp	PO, l_player_move_jump_00269
2812  0D45  EE 80       	xor	a,0x80
2813  0D47              l_player_move_jump_00269:
2814  0D47  F2 58 0D    	jp	P, l_player_move_jump_00107
2815  0D4A  21 00 00    	ld	hl,_player_vel_y
2816  0D4D  CB 7E       	bit	7,(hl)
2817  0D4F  28 07       	jr	Z,l_player_move_jump_00107
2818  0D51  36 00       	ld	(hl),0x00
2819  0D53  21 00 00    	ld	hl,_player_vel_inc
2820  0D56  36 00       	ld	(hl),0x00
2821  0D58              l_player_move_jump_00107:
2822  0D58  3E 78       	ld	a,0x78
2823  0D5A  21 00 00    	ld	hl,_player_vel_y
2824  0D5D  96          	sub	a, (hl)
2825  0D5E  E2 63 0D    	jp	PO, l_player_move_jump_00270
2826  0D61  EE 80       	xor	a,0x80
2827  0D63              l_player_move_jump_00270:
2828  0D63  F2 6B 0D    	jp	P, l_player_move_jump_00109
2829  0D66  21 00 00    	ld	hl,_player_vel_y
2830  0D69  36 78       	ld	(hl),0x78
2831  0D6B              l_player_move_jump_00109:
2832  0D6B  21 00 00    	ld	hl,_player_vel_y
2833  0D6E  7E          	ld	a, (hl)
2834  0D6F  EE 80       	xor	a,0x80
2835  0D71  D6 08       	sub	a,0x08
2836  0D73  30 02       	jr	NC,l_player_move_jump_00111
2837  0D75  36 88       	ld	(hl),0x88
2838  0D77              l_player_move_jump_00111:
2839  0D77  21 00 00    	ld	hl,_player_vel_y
2840  0D7A  7E          	ld	a, (hl)
2841  0D7B  DD 77 FE    	ld	(ix-2),a
2842  0D7E  7E          	ld	a, (hl)
2843  0D7F  17          	rla
2844  0D80  9F          	sbc	a, a
2845  0D81  DD 77 FF    	ld	(ix-1),a
2846  0D84  DD 7E FE    	ld	a,(ix-2)
2847  0D87  CB 47       	bit	0,a
2848  0D89  32 00 00    	ld	(_s_lin1),a
2849  0D8C  28 04       	jr	Z,l_player_move_jump_00113
2850  0D8E  21 00 00    	ld	hl,_s_lin1
2851  0D91  35          	dec	(hl)
2852  0D92              l_player_move_jump_00113:
2853  0D92  3A 07 00    	ld	a,(_lin + 0x0007)
2854  0D95  21 00 00    	ld	hl,_s_lin1
2855  0D98  86          	add	a, (hl)
2856  0D99  77          	ld	(hl), a
2857  0D9A  3E 90       	ld	a,0x90
2858  0D9C  96          	sub	a, (hl)
2859  0D9D  30 2B       	jr	NC,l_player_move_jump_00124
2860  0D9F  3E C8       	ld	a,0xc8
2861  0DA1  96          	sub	a, (hl)
2862  0DA2  30 13       	jr	NC,l_player_move_jump_00121
2863  0DA4  CD 00 00    	call	_spr_page_up
2864  0DA7  7D          	ld	a, l
2865  0DA8  B7          	or	a, a
2866  0DA9  28 05       	jr	Z,l_player_move_jump_00115
2867  0DAB  2E 00       	ld	l,0x00
2868  0DAD  C3 33 0F    	jp	l_player_move_jump_00160
2869  0DB0              l_player_move_jump_00115:
2870  0DB0  21 00 00    	ld	hl,_s_lin1
2871  0DB3  36 00       	ld	(hl),0x00
2872  0DB5  18 13       	jr	l_player_move_jump_00124
2873  0DB7              l_player_move_jump_00121:
2874  0DB7  CD 00 00    	call	_spr_page_down
2875  0DBA  7D          	ld	a, l
2876  0DBB  B7          	or	a, a
2877  0DBC  28 07       	jr	Z,l_player_move_jump_00118
2878  0DBE  21 00 00    	ld	hl,_s_lin1
2879  0DC1  36 10       	ld	(hl),0x10
2880  0DC3  18 05       	jr	l_player_move_jump_00124
2881  0DC5              l_player_move_jump_00118:
2882  0DC5  21 00 00    	ld	hl,_s_lin1
2883  0DC8  36 90       	ld	(hl),0x90
2884  0DCA              l_player_move_jump_00124:
2885  0DCA  3A 00 00    	ld	a,(_s_lin0)
2886  0DCD  07          	rlca
2887  0DCE  07          	rlca
2888  0DCF  07          	rlca
2889  0DD0  07          	rlca
2890  0DD1  E6 0F       	and	a,0x0f
2891  0DD3  4F          	ld	c, a
2892  0DD4  DD CB FF 7E 	bit	7,(ix-1)
2893  0DD8  28 62       	jr	Z,l_player_move_jump_00149
2894  0DDA  21 00 00    	ld	hl,_s_state
2895  0DDD  7E          	ld	a,(hl)
2896  0DDE  F6 01       	or	a,0x01
2897  0DE0  E6 FD       	and	a,0xfd
2898  0DE2  77          	ld	(hl),a
2899  0DE3  21 00 00    	ld	hl,_s_lin1
2900  0DE6  46          	ld	b, (hl)
2901  0DE7  79          	ld	a, c
2902  0DE8  90          	sub	a, b
2903  0DE9  20 04       	jr	NZ,l_player_move_jump_00272
2904  0DEB  3E 01       	ld	a,0x01
2905  0DED  18 01       	jr	l_player_move_jump_00273
2906  0DEF              l_player_move_jump_00272:
2907  0DEF  AF          	xor	a,a
2908  0DF0              l_player_move_jump_00273:
2909  0DF0  EE 01       	xor	a,0x01
2910  0DF2  4F          	ld	c,a
2911  0DF3  B7          	or	a, a
2912  0DF4  28 3D       	jr	Z,l_player_move_jump_00131
2913  0DF6  21 07 00    	ld	hl,+(_col + 0x0007)
2914  0DF9  46          	ld	b, (hl)
2915  0DFA  C5          	push	bc
2916  0DFB  33          	inc	sp
2917  0DFC  3A 00 00    	ld	a,(_s_lin1)
2918  0DFF  F5          	push	af
2919  0E00  33          	inc	sp
2920  0E01  CD 00 00    	call	_game_check_map
2921  0E04  F1          	pop	af
2922  0E05  7C          	ld	a,h
2923  0E06  B5          	or	a,l
2924  0E07  28 21       	jr	Z,l_player_move_jump_00128
2925  0E09  CD 5F 08    	call	_player_hit_platform
2926  0E0C  7D          	ld	a, l
2927  0E0D  B7          	or	a, a
2928  0E0E  28 12       	jr	Z,l_player_move_jump_00126
2929  0E10  3A 07 00    	ld	a,(_lin + 0x0007)
2930  0E13  07          	rlca
2931  0E14  07          	rlca
2932  0E15  07          	rlca
2933  0E16  07          	rlca
2934  0E17  E6 0F       	and	a,0x0f
2935  0E19  07          	rlca
2936  0E1A  07          	rlca
2937  0E1B  07          	rlca
2938  0E1C  07          	rlca
2939  0E1D  E6 F0       	and	a,0xf0
2940  0E1F  32 07 00    	ld	((_lin + 0x0007)),a
2941  0E22              l_player_move_jump_00126:
2942  0E22  21 00 00    	ld	hl,_player_vel_y
2943  0E25  36 00       	ld	(hl),0x00
2944  0E27  C3 F5 0E    	jp	l_player_move_jump_00150
2945  0E2A              l_player_move_jump_00128:
2946  0E2A  3A 00 00    	ld	a,(_s_lin1)
2947  0E2D  32 07 00    	ld	((_lin + 0x0007)),a
2948  0E30  C3 F5 0E    	jp	l_player_move_jump_00150
2949  0E33              l_player_move_jump_00131:
2950  0E33  3A 00 00    	ld	a,(_s_lin1)
2951  0E36  32 07 00    	ld	((_lin + 0x0007)),a
2952  0E39  C3 F5 0E    	jp	l_player_move_jump_00150
2953  0E3C              l_player_move_jump_00149:
2954  0E3C  21 00 00    	ld	hl,_s_state
2955  0E3F  7E          	ld	a,(hl)
2956  0E40  F6 02       	or	a,0x02
2957  0E42  E6 FE       	and	a,0xfe
2958  0E44  77          	ld	(hl),a
2959  0E45  21 00 00    	ld	hl,_s_lin1
2960  0E48  7E          	ld	a, (hl)
2961  0E49  C6 10       	add	a,0x10
2962  0E4B  77          	ld	(hl),a
2963  0E4C  47          	ld	b,a
2964  0E4D  79          	ld	a, c
2965  0E4E  90          	sub	a, b
2966  0E4F  20 04       	jr	NZ,l_player_move_jump_00274
2967  0E51  3E 01       	ld	a,0x01
2968  0E53  18 01       	jr	l_player_move_jump_00275
2969  0E55              l_player_move_jump_00274:
2970  0E55  AF          	xor	a,a
2971  0E56              l_player_move_jump_00275:
2972  0E56  EE 01       	xor	a,0x01
2973  0E58  4F          	ld	c,a
2974  0E59  B7          	or	a, a
2975  0E5A  CA E8 0E    	jp	Z, l_player_move_jump_00146
2976  0E5D  21 07 00    	ld	hl,+(_col + 0x0007)
2977  0E60  46          	ld	b, (hl)
2978  0E61  C5          	push	bc
2979  0E62  33          	inc	sp
2980  0E63  3A 00 00    	ld	a,(_s_lin1)
2981  0E66  F5          	push	af
2982  0E67  33          	inc	sp
2983  0E68  CD 00 00    	call	_game_check_map
2984  0E6B  F1          	pop	af
2985  0E6C  45          	ld	b, l
2986  0E6D  5C          	ld	e, h
2987  0E6E  21 00 00    	ld	hl,_s_lin1
2988  0E71  7E          	ld	a, (hl)
2989  0E72  C6 F0       	add	a,0xf0
2990  0E74  4F          	ld	c, a
2991  0E75  7B          	ld	a, e
2992  0E76  B0          	or	a,b
2993  0E77  28 63       	jr	Z,l_player_move_jump_00143
2994  0E79  71          	ld	(hl), c
2995  0E7A  2E 00       	ld	l,0x00
2996  0E7C  CD C2 05    	call	_player_check_stairs
2997  0E7F  3A 00 00    	ld	a,(_player_onstair)
2998  0E82  B7          	or	a, a
2999  0E83  20 05       	jr	NZ,l_player_move_jump_00134
3000  0E85  2E 01       	ld	l,0x01
3001  0E87  CD C2 05    	call	_player_check_stairs
3002  0E8A              l_player_move_jump_00134:
3003  0E8A  3A 00 00    	ld	a,(_player_onstair)
3004  0E8D  B7          	or	a, a
3005  0E8E  20 2D       	jr	NZ,l_player_move_jump_00139
3006  0E90  21 00 00    	ld	hl,_s_lin1
3007  0E93  7E          	ld	a, (hl)
3008  0E94  07          	rlca
3009  0E95  07          	rlca
3010  0E96  07          	rlca
3011  0E97  07          	rlca
3012  0E98  E6 0F       	and	a,0x0f
3013  0E9A  07          	rlca
3014  0E9B  07          	rlca
3015  0E9C  07          	rlca
3016  0E9D  07          	rlca
3017  0E9E  E6 F0       	and	a,0xf0
3018  0EA0  77          	ld	(hl), a
3019  0EA1  21 07 00    	ld	hl,+(_lin + 0x0007)
3020  0EA4  4E          	ld	c, (hl)
3021  0EA5  21 00 00    	ld	hl,_s_lin1
3022  0EA8  7E          	ld	a, (hl)
3023  0EA9  91          	sub	a, c
3024  0EAA  30 0B       	jr	NC,l_player_move_jump_00136
3025  0EAC  7E          	ld	a, (hl)
3026  0EAD  C6 10       	add	a,0x10
3027  0EAF  32 07 00    	ld	((_lin + 0x0007)),a
3028  0EB2  2E 00       	ld	l,0x00
3029  0EB4  C3 33 0F    	jp	l_player_move_jump_00160
3030  0EB7              l_player_move_jump_00136:
3031  0EB7  3A 00 00    	ld	a,(_s_lin1)
3032  0EBA  32 07 00    	ld	((_lin + 0x0007)),a
3033  0EBD              l_player_move_jump_00139:
3034  0EBD  21 00 00    	ld	hl,_player_vel_y
3035  0EC0  36 00       	ld	(hl),0x00
3036  0EC2  21 00 00    	ld	hl,_s_state
3037  0EC5  7E          	ld	a,(hl)
3038  0EC6  E6 FC       	and	a,+(0xfd&0xfe)
3039  0EC8  77          	ld	(hl),a
3040  0EC9  3A 07 00    	ld	a,(_lin + 0x0007)
3041  0ECC  D6 90       	sub	a,0x90
3042  0ECE  38 03       	jr	C,l_player_move_jump_00141
3043  0ED0  CD 00 00    	call	_spr_page_down
3044  0ED3              l_player_move_jump_00141:
3045  0ED3  21 07 00    	ld	hl, +(_colint + 0x0007)
3046  0ED6  36 00       	ld	(hl),0x00
3047  0ED8  2E 01       	ld	l,0x01
3048  0EDA  18 57       	jr	l_player_move_jump_00160
3049  0EDC              l_player_move_jump_00143:
3050  0EDC  21 00 00    	ld	hl,_s_lin1
3051  0EDF  71          	ld	(hl), c
3052  0EE0  3A 00 00    	ld	a,(_s_lin1)
3053  0EE3  32 07 00    	ld	((_lin + 0x0007)),a
3054  0EE6  18 0D       	jr	l_player_move_jump_00150
3055  0EE8              l_player_move_jump_00146:
3056  0EE8  21 00 00    	ld	hl,_s_lin1
3057  0EEB  7E          	ld	a, (hl)
3058  0EEC  C6 F0       	add	a,0xf0
3059  0EEE  77          	ld	(hl), a
3060  0EEF  3A 00 00    	ld	a,(_s_lin1)
3061  0EF2  32 07 00    	ld	((_lin + 0x0007)),a
3062  0EF5              l_player_move_jump_00150:
3063  0EF5  21 00 00    	ld	hl,_s_state
3064  0EF8  CB 5E       	bit	3, (hl)
3065  0EFA  20 27       	jr	NZ,l_player_move_jump_00156
3066  0EFC  21 00 00    	ld	hl,_s_state
3067  0EFF  CB 56       	bit	2, (hl)
3068  0F01  20 20       	jr	NZ,l_player_move_jump_00156
3069  0F03  21 00 00    	ld	hl,_dirs
3070  0F06  CB 56       	bit	2, (hl)
3071  0F08  28 09       	jr	Z,l_player_move_jump_00152
3072  0F0A  21 00 00    	ld	hl,_s_state
3073  0F0D  7E          	ld	a,(hl)
3074  0F0E  F6 08       	or	a,0x08
3075  0F10  E6 FB       	and	a,0xfb
3076  0F12  77          	ld	(hl),a
3077  0F13              l_player_move_jump_00152:
3078  0F13  21 00 00    	ld	hl,_dirs
3079  0F16  CB 5E       	bit	3, (hl)
3080  0F18  28 09       	jr	Z,l_player_move_jump_00156
3081  0F1A  21 00 00    	ld	hl,_s_state
3082  0F1D  7E          	ld	a,(hl)
3083  0F1E  F6 04       	or	a,0x04
3084  0F20  E6 F7       	and	a,0xf7
3085  0F22  77          	ld	(hl),a
3086  0F23              l_player_move_jump_00156:
3087  0F23  CD 00 00    	call	_spr_move_horizontal
3088  0F26  7D          	ld	a, l
3089  0F27  B7          	or	a, a
3090  0F28  28 07       	jr	Z,l_player_move_jump_00159
3091  0F2A  21 00 00    	ld	hl,_s_state
3092  0F2D  7E          	ld	a,(hl)
3093  0F2E  E6 F3       	and	a,+(0xf7&0xfb)
3094  0F30  77          	ld	(hl),a
3095  0F31              l_player_move_jump_00159:
3096  0F31  2E 00       	ld	l,0x00
3097  0F33              l_player_move_jump_00160:
3098  0F33  F1          	pop	af
3099  0F34  DD E1       	pop	ix
3100  0F36  C9          	ret
3101  0F37              	SECTION code_compiler
3102  0F37              ;	---------------------------------
3103  0F37              ; Function player_open_door
3104  0F37              ; ---------------------------------
3105  0F37              _player_open_door:
3106  0F37  CD 00 00    	call	___sdcc_enter_ix
3107  0F3A  0E 00       	ld	c,0x00
3108  0F3C  DD 7E 06    	ld	a,(ix+6)
3109  0F3F  D6 48       	sub	a,0x48
3110  0F41  28 17       	jr	Z,l_player_open_door_00101
3111  0F43  DD 7E 06    	ld	a,(ix+6)
3112  0F46  D6 49       	sub	a,0x49
3113  0F48  28 1F       	jr	Z,l_player_open_door_00104
3114  0F4A  DD 7E 06    	ld	a,(ix+6)
3115  0F4D  D6 4A       	sub	a,0x4a
3116  0F4F  28 27       	jr	Z,l_player_open_door_00107
3117  0F51  DD 7E 06    	ld	a,(ix+6)
3118  0F54  D6 4B       	sub	a,0x4b
3119  0F56  28 2F       	jr	Z,l_player_open_door_00110
3120  0F58  18 3A       	jr	l_player_open_door_00113
3121  0F5A              l_player_open_door_00101:
3122  0F5A  3A 00 00    	ld	a,(_player_keys)
3123  0F5D  B7          	or	a, a
3124  0F5E  28 34       	jr	Z,l_player_open_door_00113
3125  0F60  2E 07       	ld	l,0x07
3126  0F62  CD 00 00    	call	_zx_border_fastcall
3127  0F65  0E 01       	ld	c,0x01
3128  0F67  18 2B       	jr	l_player_open_door_00113
3129  0F69              l_player_open_door_00104:
3130  0F69  3A 01 00    	ld	a,(_player_keys + 0x0001)
3131  0F6C  B7          	or	a, a
3132  0F6D  28 25       	jr	Z,l_player_open_door_00113
3133  0F6F  2E 02       	ld	l,0x02
3134  0F71  CD 00 00    	call	_zx_border_fastcall
3135  0F74  0E 01       	ld	c,0x01
3136  0F76  18 1C       	jr	l_player_open_door_00113
3137  0F78              l_player_open_door_00107:
3138  0F78  3A 02 00    	ld	a,(_player_keys + 0x0002)
3139  0F7B  B7          	or	a, a
3140  0F7C  28 16       	jr	Z,l_player_open_door_00113
3141  0F7E  2E 04       	ld	l,0x04
3142  0F80  CD 00 00    	call	_zx_border_fastcall
3143  0F83  0E 01       	ld	c,0x01
3144  0F85  18 0D       	jr	l_player_open_door_00113
3145  0F87              l_player_open_door_00110:
3146  0F87  3A 03 00    	ld	a,(_player_keys + 0x0003)
3147  0F8A  B7          	or	a, a
3148  0F8B  28 07       	jr	Z,l_player_open_door_00113
3149  0F8D  2E 05       	ld	l,0x05
3150  0F8F  CD 00 00    	call	_zx_border_fastcall
3151  0F92  0E 01       	ld	c,0x01
3152  0F94              l_player_open_door_00113:
3153  0F94  79          	ld	a, c
3154  0F95  B7          	or	a, a
3155  0F96  20 06       	jr	NZ,l_player_open_door_00114
3156  0F98  3A 00 00    	ld	a,(_game_inmune)
3157  0F9B  B7          	or	a, a
3158  0F9C  28 2F       	jr	Z,l_player_open_door_00117
3159  0F9E              l_player_open_door_00114:
3160  0F9E  3E 00       	ld	a, +((_scr_map) & 0xFF)
3161  0FA0  DD 86 04    	add	a,(ix+4)
3162  0FA3  4F          	ld	c, a
3163  0FA4  3E 00       	ld	a, +((_scr_map) / 256)
3164  0FA6  DD 8E 05    	adc	a,(ix+5)
3165  0FA9  47          	ld	b, a
3166  0FAA  C5          	push	bc
3167  0FAB  DD 6E 04    	ld	l,(ix+4)
3168  0FAE  DD 66 05    	ld	h,(ix+5)
3169  0FB1  E5          	push	hl
3170  0FB2  CD 00 00    	call	_game_match_back
3171  0FB5  F1          	pop	af
3172  0FB6  C1          	pop	bc
3173  0FB7  7D          	ld	a,l
3174  0FB8  02          	ld	(bc), a
3175  0FB9  DD 6E 04    	ld	l,(ix+4)
3176  0FBC  DD 66 05    	ld	h,(ix+5)
3177  0FBF  CD 00 00    	call	_game_obj_set
3178  0FC2  DD 6E 04    	ld	l,(ix+4)
3179  0FC5  DD 66 05    	ld	h,(ix+5)
3180  0FC8  E5          	push	hl
3181  0FC9  CD 00 00    	call	_spr_draw_index
3182  0FCC  F1          	pop	af
3183  0FCD              l_player_open_door_00117:
3184  0FCD  DD E1       	pop	ix
3185  0FCF  C9          	ret
3186  0FD0              	SECTION code_compiler
3187  0FD0              ;	---------------------------------
3188  0FD0              ; Function player_lost_life
3189  0FD0              ; ---------------------------------
3190  0FD0              _player_lost_life:
3191  0FD0  CD 00 00    	call	___sdcc_enter_ix
3192  0FD3  3B          	dec	sp
3193  0FD4  3A 07 00    	ld	a,(_lin + 0x0007)
3194  0FD7  32 00 00    	ld	(_s_lin0),a
3195  0FDA  3A 07 00    	ld	a,(_col + 0x0007)
3196  0FDD  32 00 00    	ld	(_s_col0),a
3197  0FE0  CD 00 00    	call	_spr_init_anim_bullets
3198  0FE3  01 00 00    	ld	bc,_anim_lin+0
3199  0FE6  16 00       	ld	d,0x00
3200  0FE8              l_player_lost_life_00116:
3201  0FE8  C5          	push	bc
3202  0FE9  D5          	push	de
3203  0FEA  21 00 00    	ld	hl,0x0000
3204  0FED  E5          	push	hl
3205  0FEE  AF          	xor	a, a
3206  0FEF  5A          	ld	e,d
3207  0FF0  57          	ld	d,a
3208  0FF1  D5          	push	de
3209  0FF2  CD 00 00    	call	_NIRVANAP_spriteT_callee
3210  0FF5  D1          	pop	de
3211  0FF6  C1          	pop	bc
3212  0FF7  6A          	ld	l,d
3213  0FF8  26 00       	ld	h,0x00
3214  0FFA  09          	add	hl, bc
3215  0FFB  36 FF       	ld	(hl),0xff
3216  0FFD  14          	inc	d
3217  0FFE  7A          	ld	a, d
3218  0FFF  D6 08       	sub	a,0x08
3219  1001  38 E5       	jr	C,l_player_lost_life_00116
3220  1003  21 00 00    	ld	hl,_anim_count
3221  1006  36 00       	ld	(hl),0x00
3222  1008  76          	halt
3223  1009  3A 00 00    	ld	a,(_s_lin0)
3224  100C  C6 F0       	add	a,0xf0
3225  100E  47          	ld	b, a
3226  100F  3A 00 00    	ld	a,(_s_col0)
3227  1012  21 00 00    	ld	hl,0x0000
3228  1015  E5          	push	hl
3229  1016  21 87 03    	ld	hl,0x0387
3230  1019  E5          	push	hl
3231  101A  48          	ld	c,b
3232  101B  47          	ld	b,a
3233  101C  C5          	push	bc
3234  101D  CD 00 00    	call	_spr_add_anim
3235  1020  F1          	pop	af
3236  1021  F1          	pop	af
3237  1022  F1          	pop	af
3238  1023  21 00 00    	ld	hl,_s_col0
3239  1026  46          	ld	b, (hl)
3240  1027  05          	dec	b
3241  1028  05          	dec	b
3242  1029  21 00 00    	ld	hl,0x0000
3243  102C  E5          	push	hl
3244  102D  21 87 03    	ld	hl,0x0387
3245  1030  E5          	push	hl
3246  1031  C5          	push	bc
3247  1032  33          	inc	sp
3248  1033  3A 00 00    	ld	a,(_s_lin0)
3249  1036  F5          	push	af
3250  1037  33          	inc	sp
3251  1038  CD 00 00    	call	_spr_add_anim
3252  103B  F1          	pop	af
3253  103C  F1          	pop	af
3254  103D  21 00 00    	ld	hl,0x0000
3255  1040  E3          	ex	(sp),hl
3256  1041  3A 00 00    	ld	a,(_s_col0)
3257  1044  21 87 03    	ld	hl,0x0387
3258  1047  E5          	push	hl
3259  1048  F5          	push	af
3260  1049  33          	inc	sp
3261  104A  3A 00 00    	ld	a,(_s_lin0)
3262  104D  F5          	push	af
3263  104E  33          	inc	sp
3264  104F  CD 00 00    	call	_spr_add_anim
3265  1052  F1          	pop	af
3266  1053  F1          	pop	af
3267  1054  F1          	pop	af
3268  1055  21 00 00    	ld	hl,_s_col0
3269  1058  46          	ld	b, (hl)
3270  1059  04          	inc	b
3271  105A  04          	inc	b
3272  105B  21 00 00    	ld	hl,0x0000
3273  105E  E5          	push	hl
3274  105F  21 87 03    	ld	hl,0x0387
3275  1062  E5          	push	hl
3276  1063  C5          	push	bc
3277  1064  33          	inc	sp
3278  1065  3A 00 00    	ld	a,(_s_lin0)
3279  1068  F5          	push	af
3280  1069  33          	inc	sp
3281  106A  CD 00 00    	call	_spr_add_anim
3282  106D  F1          	pop	af
3283  106E  F1          	pop	af
3284  106F  F1          	pop	af
3285  1070  3A 00 00    	ld	a,(_s_lin0)
3286  1073  C6 10       	add	a,0x10
3287  1075  47          	ld	b, a
3288  1076  3A 00 00    	ld	a,(_s_col0)
3289  1079  21 00 00    	ld	hl,0x0000
3290  107C  E5          	push	hl
3291  107D  21 87 03    	ld	hl,0x0387
3292  1080  E5          	push	hl
3293  1081  48          	ld	c,b
3294  1082  47          	ld	b,a
3295  1083  C5          	push	bc
3296  1084  CD 00 00    	call	_spr_add_anim
3297  1087  F1          	pop	af
3298  1088  F1          	pop	af
3299  1089  F1          	pop	af
3300  108A  2E 00       	ld	l,0x00
3301  108C  CD 00 00    	call	_zx_border_fastcall
3302  108F  DD 36 FF 01 	ld	(ix-1),0x01
3303  1093  2A 00 00    	ld	hl,(_curr_time)
3304  1096  22 00 00    	ld	(_anim_time),hl
3305  1099              l_player_lost_life_00107:
3306  1099  DD 7E FF    	ld	a,(ix-1)
3307  109C  B7          	or	a, a
3308  109D  28 28       	jr	Z,l_player_lost_life_00109
3309  109F  21 0C 00    	ld	hl,0x000c
3310  10A2  E5          	push	hl
3311  10A3  2A 00 00    	ld	hl,(_anim_time)
3312  10A6  E5          	push	hl
3313  10A7  CD 00 00    	call	_game_check_time
3314  10AA  F1          	pop	af
3315  10AB  F1          	pop	af
3316  10AC  7D          	ld	a, l
3317  10AD  B7          	or	a, a
3318  10AE  28 E9       	jr	Z,l_player_lost_life_00107
3319  10B0  2A 00 00    	ld	hl,(_curr_time)
3320  10B3  22 00 00    	ld	(_anim_time),hl
3321  10B6  3A 00 00    	ld	a,(_anim_count)
3322  10B9  B7          	or	a,a
3323  10BA  28 05       	jr	Z,l_player_lost_life_00103
3324  10BC  CD 00 00    	call	_spr_play_anim
3325  10BF  18 D8       	jr	l_player_lost_life_00107
3326  10C1              l_player_lost_life_00103:
3327  10C1  DD 36 FF 00 	ld	(ix-1),0x00
3328  10C5  18 D2       	jr	l_player_lost_life_00107
3329  10C7              l_player_lost_life_00109:
3330  10C7  21 00 00    	ld	hl,_sprite
3331  10CA  36 00       	ld	(hl),0x00
3332  10CC              l_player_lost_life_00118:
3333  10CC  3A 07 00    	ld	a,(_class + 0x0007)
3334  10CF  B7          	or	a, a
3335  10D0  28 1F       	jr	Z,l_player_lost_life_00111
3336  10D2  21 07 00    	ld	hl,+(_col + 0x0007)
3337  10D5  4E          	ld	c, (hl)
3338  10D6  21 07 00    	ld	hl,+(_lin + 0x0007)
3339  10D9  56          	ld	d, (hl)
3340  10DA  21 07 00    	ld	hl,+(_tile + 0x0007)
3341  10DD  5E          	ld	e, (hl)
3342  10DE  21 07 00    	ld	hl,+(_colint + 0x0007)
3343  10E1  46          	ld	b, (hl)
3344  10E2  7B          	ld	a, e
3345  10E3  80          	add	a, b
3346  10E4  5F          	ld	e, a
3347  10E5  79          	ld	a, c
3348  10E6  F5          	push	af
3349  10E7  33          	inc	sp
3350  10E8  3A 00 00    	ld	a,(_sprite)
3351  10EB  D5          	push	de
3352  10EC  F5          	push	af
3353  10ED  33          	inc	sp
3354  10EE  CD 00 00    	call	_NIRVANAP_spriteT_callee
3355  10F1              l_player_lost_life_00111:
3356  10F1  21 07 00    	ld	hl, +(_class + 0x0007)
3357  10F4  36 00       	ld	(hl),0x00
3358  10F6  21 07 00    	ld	hl, +(_bullet_col + 0x0007)
3359  10F9  36 FF       	ld	(hl),0xff
3360  10FB  21 00 00    	ld	hl,_sprite
3361  10FE  7E          	ld	a,(hl)
3362  10FF  3C          	inc	a
3363  1100  77          	ld	(hl),a
3364  1101  D6 07       	sub	a,0x07
3365  1103  38 C7       	jr	C,l_player_lost_life_00118
3366  1105  21 00 00    	ld	hl,_player_lives
3367  1108  35          	dec	(hl)
3368  1109  21 00 00    	ld	hl,_player_mana
3369  110C  36 64       	ld	(hl),0x64
3370  110E  21 00 00    	ld	hl,_player_vita
3371  1111  36 64       	ld	(hl),0x64
3372  1113  3A 00 00    	ld	a,(_player_lives)
3373  1116  B7          	or	a, a
3374  1117  28 0B       	jr	Z,l_player_lost_life_00114
3375  1119  21 F4 01    	ld	hl,0x01f4
3376  111C  CD 00 00    	call	_z80_delay_ms_fastcall
3377  111F  CD 00 00    	call	_game_round_init
3378  1122  18 0A       	jr	l_player_lost_life_00120
3379  1124              l_player_lost_life_00114:
3380  1124  21 00 00    	ld	hl,_player_lives
3381  1127  36 00       	ld	(hl),0x00
3382  1129  21 00 00    	ld	hl,_game_over
3383  112C  36 01       	ld	(hl),0x01
3384  112E              l_player_lost_life_00120:
3385  112E  33          	inc	sp
3386  112F  DD E1       	pop	ix
3387  1131  C9          	ret
3388  1132              	SECTION code_compiler
3389  1132              ;	---------------------------------
3390  1132              ; Function player_hit
3391  1132              ; ---------------------------------
3392  1132              _player_hit:
3393  1132  7D          	ld	a,l
3394  1133  4D          	ld	c,l
3395  1134  21 00 00    	ld	hl,_player_vita
3396  1137  96          	sub	a, (hl)
3397  1138  30 17       	jr	NC,l_player_hit_00104
3398  113A  3A 00 00    	ld	a,(_game_inmune)
3399  113D  B7          	or	a, a
3400  113E  20 06       	jr	NZ,l_player_hit_00102
3401  1140  21 00 00    	ld	hl,_player_vita
3402  1143  7E          	ld	a, (hl)
3403  1144  91          	sub	a, c
3404  1145  77          	ld	(hl), a
3405  1146              l_player_hit_00102:
3406  1146  2A 00 00    	ld	hl,(_curr_time)
3407  1149  22 00 00    	ld	(_player_hit_time),hl
3408  114C  CD 00 00    	call	_game_update_stats
3409  114F  18 0B       	jr	l_player_hit_00106
3410  1151              l_player_hit_00104:
3411  1151  21 00 00    	ld	hl,_player_vita
3412  1154  36 00       	ld	(hl),0x00
3413  1156  CD 00 00    	call	_game_update_stats
3414  1159  CD D0 0F    	call	_player_lost_life
3415  115C              l_player_hit_00106:
3416  115C  C9          	ret
3417  115D              	SECTION IGNORE
3418  0000              
