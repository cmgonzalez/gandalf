1     0000              MODULE game_player_c
2     0000              
3     0000              ;--------------------------------------------------------
4     0000              ; File Created by SDCC : free open source ANSI-C Compiler
5     0000              ; Version 3.6.5 #9958 (Mac OS X i386)
6     0000              ;--------------------------------------------------------
7     0000              ; Processed by Z88DK
8     0000              ;--------------------------------------------------------
9     0000              
10    0000              	EXTERN __divschar
11    0000              	EXTERN __divschar_callee
12    0000              	EXTERN __divsint
13    0000              	EXTERN __divsint_callee
14    0000              	EXTERN __divslong
15    0000              	EXTERN __divslong_callee
16    0000              	EXTERN __divslonglong
17    0000              	EXTERN __divslonglong_callee
18    0000              	EXTERN __divsuchar
19    0000              	EXTERN __divsuchar_callee
20    0000              	EXTERN __divuchar
21    0000              	EXTERN __divuchar_callee
22    0000              	EXTERN __divuint
23    0000              	EXTERN __divuint_callee
24    0000              	EXTERN __divulong
25    0000              	EXTERN __divulong_callee
26    0000              	EXTERN __divulonglong
27    0000              	EXTERN __divulonglong_callee
28    0000              	EXTERN __divuschar
29    0000              	EXTERN __divuschar_callee
30    0000              	EXTERN __modschar
31    0000              	EXTERN __modschar_callee
32    0000              	EXTERN __modsint
33    0000              	EXTERN __modsint_callee
34    0000              	EXTERN __modslong
35    0000              	EXTERN __modslong_callee
36    0000              	EXTERN __modslonglong
37    0000              	EXTERN __modslonglong_callee
38    0000              	EXTERN __modsuchar
39    0000              	EXTERN __modsuchar_callee
40    0000              	EXTERN __moduchar
41    0000              	EXTERN __moduchar_callee
42    0000              	EXTERN __moduint
43    0000              	EXTERN __moduint_callee
44    0000              	EXTERN __modulong
45    0000              	EXTERN __modulong_callee
46    0000              	EXTERN __modulonglong
47    0000              	EXTERN __modulonglong_callee
48    0000              	EXTERN __moduschar
49    0000              	EXTERN __moduschar_callee
50    0000              	EXTERN __mulint
51    0000              	EXTERN __mulint_callee
52    0000              	EXTERN __mullong
53    0000              	EXTERN __mullong_callee
54    0000              	EXTERN __mullonglong
55    0000              	EXTERN __mullonglong_callee
56    0000              	EXTERN __mulschar
57    0000              	EXTERN __mulschar_callee
58    0000              	EXTERN __mulsuchar
59    0000              	EXTERN __mulsuchar_callee
60    0000              	EXTERN __muluschar
61    0000              	EXTERN __muluschar_callee
62    0000              	EXTERN __rlslonglong
63    0000              	EXTERN __rlslonglong_callee
64    0000              	EXTERN __rlulonglong
65    0000              	EXTERN __rlulonglong_callee
66    0000              	EXTERN __rrslonglong
67    0000              	EXTERN __rrslonglong_callee
68    0000              	EXTERN __rrulonglong
69    0000              	EXTERN __rrulonglong_callee
70    0000              	EXTERN ___sdcc_call_hl
71    0000              	EXTERN ___sdcc_call_iy
72    0000              	EXTERN ___sdcc_enter_ix
73    0000              	EXTERN _banked_call
74    0000              	EXTERN _banked_ret
75    0000              	EXTERN ___fs2schar
76    0000              	EXTERN ___fs2schar_callee
77    0000              	EXTERN ___fs2sint
78    0000              	EXTERN ___fs2sint_callee
79    0000              	EXTERN ___fs2slong
80    0000              	EXTERN ___fs2slong_callee
81    0000              	EXTERN ___fs2slonglong
82    0000              	EXTERN ___fs2slonglong_callee
83    0000              	EXTERN ___fs2uchar
84    0000              	EXTERN ___fs2uchar_callee
85    0000              	EXTERN ___fs2uint
86    0000              	EXTERN ___fs2uint_callee
87    0000              	EXTERN ___fs2ulong
88    0000              	EXTERN ___fs2ulong_callee
89    0000              	EXTERN ___fs2ulonglong
90    0000              	EXTERN ___fs2ulonglong_callee
91    0000              	EXTERN ___fsadd
92    0000              	EXTERN ___fsadd_callee
93    0000              	EXTERN ___fsdiv
94    0000              	EXTERN ___fsdiv_callee
95    0000              	EXTERN ___fseq
96    0000              	EXTERN ___fseq_callee
97    0000              	EXTERN ___fsgt
98    0000              	EXTERN ___fsgt_callee
99    0000              	EXTERN ___fslt
100   0000              	EXTERN ___fslt_callee
101   0000              	EXTERN ___fsmul
102   0000              	EXTERN ___fsmul_callee
103   0000              	EXTERN ___fsneq
104   0000              	EXTERN ___fsneq_callee
105   0000              	EXTERN ___fssub
106   0000              	EXTERN ___fssub_callee
107   0000              	EXTERN ___schar2fs
108   0000              	EXTERN ___schar2fs_callee
109   0000              	EXTERN ___sint2fs
110   0000              	EXTERN ___sint2fs_callee
111   0000              	EXTERN ___slong2fs
112   0000              	EXTERN ___slong2fs_callee
113   0000              	EXTERN ___slonglong2fs
114   0000              	EXTERN ___slonglong2fs_callee
115   0000              	EXTERN ___uchar2fs
116   0000              	EXTERN ___uchar2fs_callee
117   0000              	EXTERN ___uint2fs
118   0000              	EXTERN ___uint2fs_callee
119   0000              	EXTERN ___ulong2fs
120   0000              	EXTERN ___ulong2fs_callee
121   0000              	EXTERN ___ulonglong2fs
122   0000              	EXTERN ___ulonglong2fs_callee
123   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
126   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
127   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
128   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
129   0000              	EXTERN ____sdcc_4_ldi_save_bc
130   0000              	EXTERN ____sdcc_4_push_hlix
131   0000              	EXTERN ____sdcc_4_push_mhl
132   0000              	EXTERN ____sdcc_lib_setmem_hl
133   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
134   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
135   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
136   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
137   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
138   0000              	EXTERN ____sdcc_ll_add_deix_hlix
139   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
140   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
141   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
142   0000              	EXTERN ____sdcc_ll_asr_hlix_a
143   0000              	EXTERN ____sdcc_ll_asr_mbc_a
144   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
145   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
146   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
147   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
148   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
149   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
150   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
151   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
152   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
153   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
155   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
156   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
157   0000              	EXTERN ____sdcc_ll_push_hlix
158   0000              	EXTERN ____sdcc_ll_push_mhl
159   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
160   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
161   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
162   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
163   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
164   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
165   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
166   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
167   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
168   0000              	EXTERN ____sdcc_load_debc_deix
169   0000              	EXTERN ____sdcc_load_dehl_deix
170   0000              	EXTERN ____sdcc_load_debc_mhl
171   0000              	EXTERN ____sdcc_load_hlde_mhl
172   0000              	EXTERN ____sdcc_store_dehl_bcix
173   0000              	EXTERN ____sdcc_store_debc_hlix
174   0000              	EXTERN ____sdcc_store_debc_mhl
175   0000              	EXTERN ____sdcc_cpu_pop_ei
176   0000              	EXTERN ____sdcc_cpu_pop_ei_jp
177   0000              	EXTERN ____sdcc_cpu_push_di
178   0000              	EXTERN ____sdcc_outi
179   0000              	EXTERN ____sdcc_outi_128
180   0000              	EXTERN ____sdcc_outi_256
181   0000              	EXTERN ____sdcc_ldi
182   0000              	EXTERN ____sdcc_ldi_128
183   0000              	EXTERN ____sdcc_ldi_256
184   0000              
185   0000              ;--------------------------------------------------------
186   0000              ; Public variables in this module
187   0000              ;--------------------------------------------------------
188   0000              	GLOBAL _player_check_map
189   0000              	GLOBAL _player_1up
190   0000              	GLOBAL _player_init
191   0000              	GLOBAL _player_turn
192   0000              	GLOBAL _player_move
193   0000              	GLOBAL _player_check_input
194   0000              	GLOBAL _player_move_input
195   0000              	GLOBAL _player_fix_walk_lin
196   0000              	GLOBAL _player_fire
197   0000              	GLOBAL _player_collision
198   0000              	GLOBAL _player_pick_mushroom
199   0000              	GLOBAL _player_check_stairs_vertical
200   0000              	GLOBAL _player_check_stairs
201   0000              	GLOBAL _player_anim_tile
202   0000              	GLOBAL _player_tile
203   0000              	GLOBAL _player_pick_item
204   0000              	GLOBAL _player_hit_platform
205   0000              	GLOBAL _player_hit_platform_clear
206   0000              	GLOBAL _player_score_add
207   0000              	GLOBAL _player_check_floor
208   0000              	GLOBAL _player_gasta_brick
209   0000              	GLOBAL _player_move_jump
210   0000              	GLOBAL _player_open_door
211   0000              	GLOBAL _player_lost_life
212   0000              	GLOBAL _player_hit
213   0000              ;--------------------------------------------------------
214   0000              ; Externals used
215   0000              ;--------------------------------------------------------
216   0000              	GLOBAL _ulltoa_callee
217   0000              	GLOBAL _ulltoa
218   0000              	GLOBAL _strtoull_callee
219   0000              	GLOBAL _strtoull
220   0000              	GLOBAL _strtoll_callee
221   0000              	GLOBAL _strtoll
222   0000              	GLOBAL _lltoa_callee
223   0000              	GLOBAL _lltoa
224   0000              	GLOBAL _llabs_callee
225   0000              	GLOBAL _llabs
226   0000              	GLOBAL __lldivu__callee
227   0000              	GLOBAL __lldivu_
228   0000              	GLOBAL __lldiv__callee
229   0000              	GLOBAL __lldiv_
230   0000              	GLOBAL _atoll_callee
231   0000              	GLOBAL _atoll
232   0000              	GLOBAL _realloc_unlocked_callee
233   0000              	GLOBAL _realloc_unlocked
234   0000              	GLOBAL _malloc_unlocked_fastcall
235   0000              	GLOBAL _malloc_unlocked
236   0000              	GLOBAL _free_unlocked_fastcall
237   0000              	GLOBAL _free_unlocked
238   0000              	GLOBAL _calloc_unlocked_callee
239   0000              	GLOBAL _calloc_unlocked
240   0000              	GLOBAL _aligned_alloc_unlocked_callee
241   0000              	GLOBAL _aligned_alloc_unlocked
242   0000              	GLOBAL _realloc_callee
243   0000              	GLOBAL _realloc
244   0000              	GLOBAL _malloc_fastcall
245   0000              	GLOBAL _malloc
246   0000              	GLOBAL _free_fastcall
247   0000              	GLOBAL _free
248   0000              	GLOBAL _calloc_callee
249   0000              	GLOBAL _calloc
250   0000              	GLOBAL _aligned_alloc_callee
251   0000              	GLOBAL _aligned_alloc
252   0000              	GLOBAL _utoa_callee
253   0000              	GLOBAL _utoa
254   0000              	GLOBAL _ultoa_callee
255   0000              	GLOBAL _ultoa
256   0000              	GLOBAL _system_fastcall
257   0000              	GLOBAL _system
258   0000              	GLOBAL _strtoul_callee
259   0000              	GLOBAL _strtoul
260   0000              	GLOBAL _strtol_callee
261   0000              	GLOBAL _strtol
262   0000              	GLOBAL _strtof_callee
263   0000              	GLOBAL _strtof
264   0000              	GLOBAL _strtod_callee
265   0000              	GLOBAL _strtod
266   0000              	GLOBAL _srand_fastcall
267   0000              	GLOBAL _srand
268   0000              	GLOBAL _rand
269   0000              	GLOBAL _quick_exit_fastcall
270   0000              	GLOBAL _quick_exit
271   0000              	GLOBAL _qsort_callee
272   0000              	GLOBAL _qsort
273   0000              	GLOBAL _ltoa_callee
274   0000              	GLOBAL _ltoa
275   0000              	GLOBAL _labs_fastcall
276   0000              	GLOBAL _labs
277   0000              	GLOBAL _itoa_callee
278   0000              	GLOBAL _itoa
279   0000              	GLOBAL _ftoh_callee
280   0000              	GLOBAL _ftoh
281   0000              	GLOBAL _ftog_callee
282   0000              	GLOBAL _ftog
283   0000              	GLOBAL _ftoe_callee
284   0000              	GLOBAL _ftoe
285   0000              	GLOBAL _ftoa_callee
286   0000              	GLOBAL _ftoa
287   0000              	GLOBAL _exit_fastcall
288   0000              	GLOBAL _exit
289   0000              	GLOBAL _dtoh_callee
290   0000              	GLOBAL _dtoh
291   0000              	GLOBAL _dtog_callee
292   0000              	GLOBAL _dtog
293   0000              	GLOBAL _dtoe_callee
294   0000              	GLOBAL _dtoe
295   0000              	GLOBAL _dtoa_callee
296   0000              	GLOBAL _dtoa
297   0000              	GLOBAL _bsearch_callee
298   0000              	GLOBAL _bsearch
299   0000              	GLOBAL _atol_fastcall
300   0000              	GLOBAL _atol
301   0000              	GLOBAL _atoi_fastcall
302   0000              	GLOBAL _atoi
303   0000              	GLOBAL _atof_fastcall
304   0000              	GLOBAL _atof
305   0000              	GLOBAL _atexit_fastcall
306   0000              	GLOBAL _atexit
307   0000              	GLOBAL _at_quick_exit_fastcall
308   0000              	GLOBAL _at_quick_exit
309   0000              	GLOBAL _abs_fastcall
310   0000              	GLOBAL _abs
311   0000              	GLOBAL _abort
312   0000              	GLOBAL __strtou__callee
313   0000              	GLOBAL __strtou_
314   0000              	GLOBAL __strtoi__callee
315   0000              	GLOBAL __strtoi_
316   0000              	GLOBAL __random_uniform_xor_8__fastcall
317   0000              	GLOBAL __random_uniform_xor_8_
318   0000              	GLOBAL __random_uniform_xor_32__fastcall
319   0000              	GLOBAL __random_uniform_xor_32_
320   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
321   0000              	GLOBAL __random_uniform_cmwc_8_
322   0000              	GLOBAL __shellsort__callee
323   0000              	GLOBAL __shellsort_
324   0000              	GLOBAL __quicksort__callee
325   0000              	GLOBAL __quicksort_
326   0000              	GLOBAL __insertion_sort__callee
327   0000              	GLOBAL __insertion_sort_
328   0000              	GLOBAL __ldivu__callee
329   0000              	GLOBAL __ldivu_
330   0000              	GLOBAL __ldiv__callee
331   0000              	GLOBAL __ldiv_
332   0000              	GLOBAL __divu__callee
333   0000              	GLOBAL __divu_
334   0000              	GLOBAL __div__callee
335   0000              	GLOBAL __div_
336   0000              	GLOBAL _NIRVANAP_drawTW_raw_callee
337   0000              	GLOBAL _NIRVANAP_drawTW_raw
338   0000              	GLOBAL _NIRVANAP_drawTW_callee
339   0000              	GLOBAL _NIRVANAP_drawTW
340   0000              	GLOBAL _NIRVANAP_drawW_raw_callee
341   0000              	GLOBAL _NIRVANAP_drawW_raw
342   0000              	GLOBAL _NIRVANAP_drawW_callee
343   0000              	GLOBAL _NIRVANAP_drawW
344   0000              	GLOBAL _NIRVANAP_spriteT_callee
345   0000              	GLOBAL _NIRVANAP_spriteT
346   0000              	GLOBAL _NIRVANAP_fillC_callee
347   0000              	GLOBAL _NIRVANAP_fillC
348   0000              	GLOBAL _NIRVANAP_readC_callee
349   0000              	GLOBAL _NIRVANAP_readC
350   0000              	GLOBAL _NIRVANAP_paintC_callee
351   0000              	GLOBAL _NIRVANAP_paintC
352   0000              	GLOBAL _NIRVANAP_printC_callee
353   0000              	GLOBAL _NIRVANAP_printC
354   0000              	GLOBAL _NIRVANAP_fillT_raw_callee
355   0000              	GLOBAL _NIRVANAP_fillT_raw
356   0000              	GLOBAL _NIRVANAP_fillT_callee
357   0000              	GLOBAL _NIRVANAP_fillT
358   0000              	GLOBAL _NIRVANAP_drawT_raw_callee
359   0000              	GLOBAL _NIRVANAP_drawT_raw
360   0000              	GLOBAL _NIRVANAP_drawT_callee
361   0000              	GLOBAL _NIRVANAP_drawT
362   0000              	GLOBAL _NIRVANAP_stop
363   0000              	GLOBAL _NIRVANAP_start
364   0000              	GLOBAL _debug3
365   0000              	GLOBAL _debug2
366   0000              	GLOBAL _debug
367   0000              	GLOBAL _zx_print_str
368   0000              	GLOBAL _zx_print_int
369   0000              	GLOBAL _zx_print_chr
370   0000              	GLOBAL _zx_print_bonus_time
371   0000              	GLOBAL _zx_isr
372   0000              	GLOBAL _z80_otdr_callee
373   0000              	GLOBAL _z80_otdr
374   0000              	GLOBAL _z80_otir_callee
375   0000              	GLOBAL _z80_otir
376   0000              	GLOBAL _z80_outp_callee
377   0000              	GLOBAL _z80_outp
378   0000              	GLOBAL _z80_indr_callee
379   0000              	GLOBAL _z80_indr
380   0000              	GLOBAL _z80_inir_callee
381   0000              	GLOBAL _z80_inir
382   0000              	GLOBAL _z80_inp_fastcall
383   0000              	GLOBAL _z80_inp
384   0000              	GLOBAL _z80_set_int_state_fastcall
385   0000              	GLOBAL _z80_set_int_state
386   0000              	GLOBAL _z80_get_int_state
387   0000              	GLOBAL _z80_delay_tstate_fastcall
388   0000              	GLOBAL _z80_delay_tstate
389   0000              	GLOBAL _z80_delay_ms_fastcall
390   0000              	GLOBAL _z80_delay_ms
391   0000              	GLOBAL _im2_remove_generic_callback_callee
392   0000              	GLOBAL _im2_remove_generic_callback
393   0000              	GLOBAL _im2_prepend_generic_callback_callee
394   0000              	GLOBAL _im2_prepend_generic_callback
395   0000              	GLOBAL _im2_append_generic_callback_callee
396   0000              	GLOBAL _im2_append_generic_callback
397   0000              	GLOBAL _im2_create_generic_isr_8080_callee
398   0000              	GLOBAL _im2_create_generic_isr_8080
399   0000              	GLOBAL _im2_create_generic_isr_callee
400   0000              	GLOBAL _im2_create_generic_isr
401   0000              	GLOBAL _im2_install_isr_callee
402   0000              	GLOBAL _im2_install_isr
403   0000              	GLOBAL _im2_init_fastcall
404   0000              	GLOBAL _im2_init
405   0000              	GLOBAL _intrinsic_swap_word_32_fastcall
406   0000              	GLOBAL _intrinsic_swap_word_32
407   0000              	GLOBAL _intrinsic_swap_endian_32_fastcall
408   0000              	GLOBAL _intrinsic_swap_endian_32
409   0000              	GLOBAL _intrinsic_swap_endian_16_fastcall
410   0000              	GLOBAL _intrinsic_swap_endian_16
411   0000              	GLOBAL _intrinsic_return_de
412   0000              	GLOBAL _intrinsic_return_bc
413   0000              	GLOBAL _intrinsic_exx
414   0000              	GLOBAL _intrinsic_ex_de_hl
415   0000              	GLOBAL _intrinsic_nop
416   0000              	GLOBAL _intrinsic_im_2
417   0000              	GLOBAL _intrinsic_im_1
418   0000              	GLOBAL _intrinsic_im_0
419   0000              	GLOBAL _intrinsic_retn
420   0000              	GLOBAL _intrinsic_reti
421   0000              	GLOBAL _intrinsic_halt
422   0000              	GLOBAL _intrinsic_ei
423   0000              	GLOBAL _intrinsic_di
424   0000              	GLOBAL _intrinsic_stub
425   0000              	GLOBAL _intrinsic_outi
426   0000              	GLOBAL _intrinsic_ldi
427   0000              	GLOBAL _zx_pattern_fill_callee
428   0000              	GLOBAL _zx_pattern_fill
429   0000              	GLOBAL _zx_saddrpup_fastcall
430   0000              	GLOBAL _zx_saddrpup
431   0000              	GLOBAL _zx_saddrpright_callee
432   0000              	GLOBAL _zx_saddrpright
433   0000              	GLOBAL _zx_saddrpleft_callee
434   0000              	GLOBAL _zx_saddrpleft
435   0000              	GLOBAL _zx_saddrpdown_fastcall
436   0000              	GLOBAL _zx_saddrpdown
437   0000              	GLOBAL _zx_saddrcup_fastcall
438   0000              	GLOBAL _zx_saddrcup
439   0000              	GLOBAL _zx_saddrcright_fastcall
440   0000              	GLOBAL _zx_saddrcright
441   0000              	GLOBAL _zx_saddrcleft_fastcall
442   0000              	GLOBAL _zx_saddrcleft
443   0000              	GLOBAL _zx_saddrcdown_fastcall
444   0000              	GLOBAL _zx_saddrcdown
445   0000              	GLOBAL _zx_saddr2py_fastcall
446   0000              	GLOBAL _zx_saddr2py
447   0000              	GLOBAL _zx_saddr2px_fastcall
448   0000              	GLOBAL _zx_saddr2px
449   0000              	GLOBAL _zx_saddr2cy_fastcall
450   0000              	GLOBAL _zx_saddr2cy
451   0000              	GLOBAL _zx_saddr2cx_fastcall
452   0000              	GLOBAL _zx_saddr2cx
453   0000              	GLOBAL _zx_saddr2aaddr_fastcall
454   0000              	GLOBAL _zx_saddr2aaddr
455   0000              	GLOBAL _zx_py2saddr_fastcall
456   0000              	GLOBAL _zx_py2saddr
457   0000              	GLOBAL _zx_py2aaddr_fastcall
458   0000              	GLOBAL _zx_py2aaddr
459   0000              	GLOBAL _zx_pxy2saddr_callee
460   0000              	GLOBAL _zx_pxy2saddr
461   0000              	GLOBAL _zx_pxy2aaddr_callee
462   0000              	GLOBAL _zx_pxy2aaddr
463   0000              	GLOBAL _zx_px2bitmask_fastcall
464   0000              	GLOBAL _zx_px2bitmask
465   0000              	GLOBAL _zx_cy2saddr_fastcall
466   0000              	GLOBAL _zx_cy2saddr
467   0000              	GLOBAL _zx_cy2aaddr_fastcall
468   0000              	GLOBAL _zx_cy2aaddr
469   0000              	GLOBAL _zx_cxy2saddr_callee
470   0000              	GLOBAL _zx_cxy2saddr
471   0000              	GLOBAL _zx_cxy2aaddr_callee
472   0000              	GLOBAL _zx_cxy2aaddr
473   0000              	GLOBAL _zx_bitmask2px_fastcall
474   0000              	GLOBAL _zx_bitmask2px
475   0000              	GLOBAL _zx_aaddrcup_fastcall
476   0000              	GLOBAL _zx_aaddrcup
477   0000              	GLOBAL _zx_aaddrcright_fastcall
478   0000              	GLOBAL _zx_aaddrcright
479   0000              	GLOBAL _zx_aaddrcleft_fastcall
480   0000              	GLOBAL _zx_aaddrcleft
481   0000              	GLOBAL _zx_aaddrcdown_fastcall
482   0000              	GLOBAL _zx_aaddrcdown
483   0000              	GLOBAL _zx_aaddr2saddr_fastcall
484   0000              	GLOBAL _zx_aaddr2saddr
485   0000              	GLOBAL _zx_aaddr2py_fastcall
486   0000              	GLOBAL _zx_aaddr2py
487   0000              	GLOBAL _zx_aaddr2px_fastcall
488   0000              	GLOBAL _zx_aaddr2px
489   0000              	GLOBAL _zx_aaddr2cy_fastcall
490   0000              	GLOBAL _zx_aaddr2cy
491   0000              	GLOBAL _zx_aaddr2cx_fastcall
492   0000              	GLOBAL _zx_aaddr2cx
493   0000              	GLOBAL _zx_visit_wc_pix_callee
494   0000              	GLOBAL _zx_visit_wc_pix
495   0000              	GLOBAL _zx_visit_wc_attr_callee
496   0000              	GLOBAL _zx_visit_wc_attr
497   0000              	GLOBAL _zx_scroll_wc_up_pix_callee
498   0000              	GLOBAL _zx_scroll_wc_up_pix
499   0000              	GLOBAL _zx_scroll_wc_up_attr_callee
500   0000              	GLOBAL _zx_scroll_wc_up_attr
501   0000              	GLOBAL _zx_scroll_wc_up_callee
502   0000              	GLOBAL _zx_scroll_wc_up
503   0000              	GLOBAL _zx_scroll_up_pix_callee
504   0000              	GLOBAL _zx_scroll_up_pix
505   0000              	GLOBAL _zx_scroll_up_attr_callee
506   0000              	GLOBAL _zx_scroll_up_attr
507   0000              	GLOBAL _zx_scroll_up_callee
508   0000              	GLOBAL _zx_scroll_up
509   0000              	GLOBAL _zx_cls_wc_pix_callee
510   0000              	GLOBAL _zx_cls_wc_pix
511   0000              	GLOBAL _zx_cls_wc_attr_callee
512   0000              	GLOBAL _zx_cls_wc_attr
513   0000              	GLOBAL _zx_cls_wc_callee
514   0000              	GLOBAL _zx_cls_wc
515   0000              	GLOBAL _zx_cls_pix_fastcall
516   0000              	GLOBAL _zx_cls_pix
517   0000              	GLOBAL _zx_cls_attr_fastcall
518   0000              	GLOBAL _zx_cls_attr
519   0000              	GLOBAL _zx_cls_fastcall
520   0000              	GLOBAL _zx_cls
521   0000              	GLOBAL _zx_border_fastcall
522   0000              	GLOBAL _zx_border
523   0000              	GLOBAL _spr_colision_b2
524   0000              	GLOBAL _spr_colision_b
525   0000              	GLOBAL _spr_unflatten
526   0000              	GLOBAL _spr_flatten
527   0000              	GLOBAL _spr_btile_paint_back
528   0000              	GLOBAL _spr_bullet_explode
529   0000              	GLOBAL _spr_init_effects
530   0000              	GLOBAL _spr_turn_horizontal
531   0000              	GLOBAL _spr_bullets_play
532   0000              	GLOBAL _spr_play_anim
533   0000              	GLOBAL _spr_add_anim
534   0000              	GLOBAL _spr_clear_scr
535   0000              	GLOBAL _spr_page_map
536   0000              	GLOBAL _spr_page_down
537   0000              	GLOBAL _spr_page_up
538   0000              	GLOBAL _spr_page_right
539   0000              	GLOBAL _spr_page_left
540   0000              	GLOBAL _spr_tile_paint
541   0000              	GLOBAL _spr_draw_index
542   0000              	GLOBAL _spr_brick_anim
543   0000              	GLOBAL _spr_back_repaint
544   0000              	GLOBAL _spr_tile
545   0000              	GLOBAL _spr_destroy
546   0000              	GLOBAL _spr_tile_dir
547   0000              	GLOBAL _spr_redraw
548   0000              	GLOBAL _spr_move_left
549   0000              	GLOBAL _spr_move_right
550   0000              	GLOBAL _spr_move_horizontal
551   0000              	GLOBAL _spr_move_down
552   0000              	GLOBAL _spr_move_up
553   0000              	GLOBAL _spr_set_right
554   0000              	GLOBAL _spr_set_left
555   0000              	GLOBAL _spr_set_down
556   0000              	GLOBAL _spr_set_up
557   0000              	GLOBAL _spr_calc_index
558   0000              	GLOBAL _spr_chktime
559   0000              	GLOBAL _menu_define_key
560   0000              	GLOBAL _menu_redefine
561   0000              	GLOBAL _menu_main_print
562   0000              	GLOBAL _menu_main
563   0000              	GLOBAL _game_match_back
564   0000              	GLOBAL _game_attribs
565   0000              	GLOBAL _game_boss_clear
566   0000              	GLOBAL _game_boss_kill
567   0000              	GLOBAL _game_obj_clear
568   0000              	GLOBAL _game_obj_chk
569   0000              	GLOBAL _game_obj_set
570   0000              	GLOBAL _game_shoot_fire_boss
571   0000              	GLOBAL _game_shoot_fire
572   0000              	GLOBAL _game_add_enemy
573   0000              	GLOBAL _game_print_header
574   0000              	GLOBAL _game_check_time
575   0000              	GLOBAL _game_rotate_attrib_osd
576   0000              	GLOBAL _game_rotate_attrib
577   0000              	GLOBAL _game_colour_message
578   0000              	GLOBAL _game_paint_attrib_lin_osd
579   0000              	GLOBAL _game_paint_attrib_lin_h
580   0000              	GLOBAL _game_paint_attrib_lin
581   0000              	GLOBAL _game_print_score
582   0000              	GLOBAL _game_check_cell
583   0000              	GLOBAL _game_check_map
584   0000              	GLOBAL _game_loop
585   0000              	GLOBAL _game_round_init
586   0000              	GLOBAL _game_start_timer
587   0000              	GLOBAL _game_update_stats
588   0000              	GLOBAL _game_print_footer
589   0000              	GLOBAL _game_fill_row
590   0000              	GLOBAL _game_fps
591   0000              	GLOBAL _game_respawn
592   0000              	GLOBAL _game_draw_screen
593   0000              	GLOBAL _boss_draw
594   0000              	GLOBAL _boss_turn
595   0000              	GLOBAL _enemy_avoid_dead
596   0000              	GLOBAL _enemy_avoid_fall
597   0000              	GLOBAL _enemy_kill
598   0000              	GLOBAL _enemy_respawn
599   0000              	GLOBAL _enemy_init
600   0000              	GLOBAL _enemy_move
601   0000              	GLOBAL _enemy_turn
602   0000              	GLOBAL _enemy_static
603   0000              	GLOBAL _enemy_walk
604   0000              	GLOBAL _enemy_horizontal
605   0000              	GLOBAL _enemy_vertical
606   0000              	GLOBAL _ay_reset
607   0000              	GLOBAL _ay_song_stop
608   0000              	GLOBAL _ay_song_play
609   0000              	GLOBAL _ay_fx_stop
610   0000              	GLOBAL _ay_fx_play
611   0000              	GLOBAL _ay_is_playing
612   0000              	GLOBAL _test_func
613   0000              	GLOBAL _test_proc
614   0000              	GLOBAL _in_mouse_kempston_wheel_delta
615   0000              	GLOBAL _in_mouse_kempston_wheel
616   0000              	GLOBAL _in_mouse_kempston_callee
617   0000              	GLOBAL _in_mouse_kempston
618   0000              	GLOBAL _in_mouse_kempston_setpos_callee
619   0000              	GLOBAL _in_mouse_kempston_setpos
620   0000              	GLOBAL _in_mouse_kempston_reset
621   0000              	GLOBAL _in_mouse_kempston_init
622   0000              	GLOBAL _in_mouse_amx_wheel_delta
623   0000              	GLOBAL _in_mouse_amx_wheel
624   0000              	GLOBAL _in_mouse_amx_callee
625   0000              	GLOBAL _in_mouse_amx
626   0000              	GLOBAL _in_mouse_amx_setpos_callee
627   0000              	GLOBAL _in_mouse_amx_setpos
628   0000              	GLOBAL _in_mouse_amx_reset
629   0000              	GLOBAL _in_mouse_amx_init_callee
630   0000              	GLOBAL _in_mouse_amx_init
631   0000              	GLOBAL _in_stick_sinclair2
632   0000              	GLOBAL _in_stick_sinclair1
633   0000              	GLOBAL _in_stick_kempston
634   0000              	GLOBAL _in_stick_fuller
635   0000              	GLOBAL _in_stick_cursor
636   0000              	GLOBAL _in_stick_keyboard_fastcall
637   0000              	GLOBAL _in_stick_keyboard
638   0000              	GLOBAL _in_wait_nokey
639   0000              	GLOBAL _in_wait_key
640   0000              	GLOBAL _in_test_key
641   0000              	GLOBAL _in_pause_fastcall
642   0000              	GLOBAL _in_pause
643   0000              	GLOBAL _in_key_scancode_fastcall
644   0000              	GLOBAL _in_key_scancode
645   0000              	GLOBAL _in_key_pressed_fastcall
646   0000              	GLOBAL _in_key_pressed
647   0000              	GLOBAL _in_inkey
648   0000              	GLOBAL _NIRVANAP_CHAR_TABLE
649   0000              	GLOBAL _NIRVANAP_WIDE_IMAGES
650   0000              	GLOBAL _NIRVANAP_TILE_IMAGES
651   0000              	GLOBAL _NIRVANAP_HOLE
652   0000              	GLOBAL _NIRVANAP_ISR_HOOK
653   0000              	GLOBAL _scan_map
654   0000              	GLOBAL _key_map
655   0000              	GLOBAL _player_lvl_table
656   0000              	GLOBAL _stp_row
657   0000              	GLOBAL _stp_col
658   0000              	GLOBAL _stp_tile
659   0000              	GLOBAL _map_paper_last_a
660   0000              	GLOBAL _map_paper_last
661   0000              	GLOBAL _map_paper_clr
662   0000              	GLOBAL _map_paper
663   0000              	GLOBAL _draw_count
664   0000              	GLOBAL _g_player_hit_right
665   0000              	GLOBAL _g_player_hit_left
666   0000              	GLOBAL _bullet_count
667   0000              	GLOBAL _spr_hack
668   0000              	GLOBAL _boss_stat
669   0000              	GLOBAL _boss_time_fire
670   0000              	GLOBAL _boss_time
671   0000              	GLOBAL _boss_tile
672   0000              	GLOBAL _boss_inc
673   0000              	GLOBAL _boss_col
674   0000              	GLOBAL _boss_lin
675   0000              	GLOBAL _bullet
676   0000              	GLOBAL _bullet_vel
677   0000              	GLOBAL _bullet_frames
678   0000              	GLOBAL _bullet_colint
679   0000              	GLOBAL _bullet_dir
680   0000              	GLOBAL _bullet_tile
681   0000              	GLOBAL _bullet_col
682   0000              	GLOBAL _bullet_lin
683   0000              	GLOBAL _bullet_col0
684   0000              	GLOBAL _bullet_lin0
685   0000              	GLOBAL _bullet_max
686   0000              	GLOBAL _bullet_class
687   0000              	GLOBAL _mush_class
688   0000              	GLOBAL _mush_index
689   0000              	GLOBAL _anim_count
690   0000              	GLOBAL _anim_respanwn
691   0000              	GLOBAL _anim_loop
692   0000              	GLOBAL _anim_end
693   0000              	GLOBAL _anim_int
694   0000              	GLOBAL _anim_tile
695   0000              	GLOBAL _anim_col
696   0000              	GLOBAL _anim_lin
697   0000              	GLOBAL _map_heigth
698   0000              	GLOBAL _map_width
699   0000              	GLOBAL _scr_curr
700   0000              	GLOBAL _sprite_kind
701   0000              	GLOBAL _scr_obj1
702   0000              	GLOBAL _scr_obj0
703   0000              	GLOBAL _scr_map
704   0000              	GLOBAL _sprite_speed_alt
705   0000              	GLOBAL _spr_init
706   0000              	GLOBAL _spr_map_tile
707   0000              	GLOBAL _sprite_frames
708   0000              	GLOBAL _sprite_speed
709   0000              	GLOBAL _screen_ink
710   0000              	GLOBAL _screen_paper
711   0000              	GLOBAL _player_onstair
712   0000              	GLOBAL _game_start_scr
713   0000              	GLOBAL _game_respawn_tile
714   0000              	GLOBAL _game_respawn_index
715   0000              	GLOBAL _game_respawn_time
716   0000              	GLOBAL _game_score_top
717   0000              	GLOBAL _player_coins
718   0000              	GLOBAL _player_lives
719   0000              	GLOBAL _game_over
720   0000              	GLOBAL _game_sound
721   0000              	GLOBAL _game_inf_lives
722   0000              	GLOBAL _game_inmune
723   0000              	GLOBAL _sprite_curr_index
724   0000              	GLOBAL _spr_count
725   0000              	GLOBAL _bullet_time
726   0000              	GLOBAL _anim_time
727   0000              	GLOBAL _frame_time
728   0000              	GLOBAL _curr_time
729   0000              	GLOBAL _s_state
730   0000              	GLOBAL _attrib_osd
731   0000              	GLOBAL _attrib_hl
732   0000              	GLOBAL _attrib
733   0000              	GLOBAL _zx_val_asm
734   0000              	GLOBAL _enemies
735   0000              	GLOBAL _tmp_ui
736   0000              	GLOBAL _tmp_sc
737   0000              	GLOBAL _tmp_uc
738   0000              	GLOBAL _tmp1
739   0000              	GLOBAL _tmp0
740   0000              	GLOBAL _tmp
741   0000              	GLOBAL _index1
742   0000              	GLOBAL _index0
743   0000              	GLOBAL _loop_count
744   0000              	GLOBAL _s_class
745   0000              	GLOBAL _s_col1
746   0000              	GLOBAL _s_col0
747   0000              	GLOBAL _s_lin1
748   0000              	GLOBAL _s_lin0
749   0000              	GLOBAL _s_tile1
750   0000              	GLOBAL _s_tile0
751   0000              	GLOBAL _player_brick_time
752   0000              	GLOBAL _player_hit_count
753   0000              	GLOBAL _sprite_horizontal_check
754   0000              	GLOBAL _sprite_on_air
755   0000              	GLOBAL _sprite
756   0000              	GLOBAL _fps
757   0000              	GLOBAL _game_2buttons
758   0000              	GLOBAL _game_respawn_curr_time
759   0000              	GLOBAL _game_worldup
760   0000              	GLOBAL _game_mush_count
761   0000              	GLOBAL _game_boss_fix
762   0000              	GLOBAL _game_boss_hit
763   0000              	GLOBAL _game_boss_alive
764   0000              	GLOBAL _game_boss
765   0000              	GLOBAL _game_world
766   0000              	GLOBAL _game_gravity
767   0000              	GLOBAL _player_onfire
768   0000              	GLOBAL _player_anim_stair
769   0000              	GLOBAL _player_hit_time
770   0000              	GLOBAL _game_checkpoint_scr
771   0000              	GLOBAL _game_checkpoint_lin
772   0000              	GLOBAL _game_checkpoint_col
773   0000              	GLOBAL _player_lin_scr
774   0000              	GLOBAL _player_col_scr
775   0000              	GLOBAL _player_lvl
776   0000              	GLOBAL _player_int
777   0000              	GLOBAL _player_str
778   0000              	GLOBAL _player_max_vita
779   0000              	GLOBAL _player_max_mana
780   0000              	GLOBAL _player_vita
781   0000              	GLOBAL _player_mana
782   0000              	GLOBAL _player_keys
783   0000              	GLOBAL _player_vel_inc
784   0000              	GLOBAL _player_vel_y1
785   0000              	GLOBAL _player_vel_y0
786   0000              	GLOBAL _player_vel_y
787   0000              	GLOBAL _player_vel_x
788   0000              	GLOBAL _player_score
789   0000              	GLOBAL _last_time
790   0000              	GLOBAL _player_slide
791   0000              	GLOBAL _spr_timer
792   0000              	GLOBAL _jump_lin
793   0000              	GLOBAL _player_hit_col
794   0000              	GLOBAL _player_hit_lin
795   0000              	GLOBAL _colint
796   0000              	GLOBAL _col
797   0000              	GLOBAL _lin
798   0000              	GLOBAL _tile
799   0000              	GLOBAL _state_a
800   0000              	GLOBAL _state
801   0000              	GLOBAL _class
802   0000              	GLOBAL _tbuffer
803   0000              	GLOBAL _dirs_alt
804   0000              	GLOBAL _dirs
805   0000              	GLOBAL _k2
806   0000              	GLOBAL _k1
807   0000              	GLOBAL _joyfunc2
808   0000              	GLOBAL _joyfunc1
809   0000              	GLOBAL _btiles
810   0000              	GLOBAL _spec128
811   0000              	GLOBAL _GLOBAL_ZX_PORT_7FFD
812   0000              	GLOBAL _GLOBAL_ZX_PORT_1FFD
813   0000              	GLOBAL _GLOBAL_ZX_PORT_FE
814   0000              	GLOBAL _ay_song_06_ciel
815   0000              	GLOBAL _ay_song_04_sunflower
816   0000              	GLOBAL _ay_song_04_lotr_level_start
817   0000              	GLOBAL _ay_song_04_lotr_level_complete
818   0000              	GLOBAL _ay_song_04_lotr_lose_a_life
819   0000              	GLOBAL _ay_song_04_lotr
820   0000              	GLOBAL _ay_fx_06_explosion1
821   0000              	GLOBAL _ay_fx_06_efecto
822   0000              	GLOBAL _ay_fx_06_disparo2
823   0000              	GLOBAL _ay_fx_06_disparo1
824   0000              	GLOBAL _ay_fx_04_sin_mana
825   0000              	GLOBAL _ay_fx_04_salto
826   0000              	GLOBAL _ay_fx_04_pierto_abierta
827   0000              	GLOBAL _ay_fx_04_magia1
828   0000              	GLOBAL _ay_fx_04_golpe
829   0000              	GLOBAL _ay_fx_04_explosion
830   0000              	GLOBAL _ay_fx_04_dano_por_toque
831   0000              	GLOBAL _ay_fx_04_coin
832   0000              	GLOBAL _world0_h
833   0000              	GLOBAL _world0_w
834   0000              	GLOBAL _world0
835   0000              	GLOBAL _paper0
836   0000              	GLOBAL _lenght0
837   0000              	GLOBAL _start_scr0
838   0000              ;--------------------------------------------------------
839   0000              ; special function registers
840   0000              ;--------------------------------------------------------
841   0000              defc _IO_FE	=	0x00fe
842   0000              defc _IO_1FFD	=	0x1ffd
843   0000              defc _IO_7FFD	=	0x7ffd
844   0000              ;--------------------------------------------------------
845   0000              ; ram data
846   0000              ;--------------------------------------------------------
847   0000              	SECTION bss_compiler
848   0000              ;--------------------------------------------------------
849   0000              ; ram data
850   0000              ;--------------------------------------------------------
851   0000              
852   0000              IF 0
853   0000              
854   0000              ; .area _INITIALIZED removed by z88dk
855   0000              
856   0000              
857   0000              ENDIF
858   0000              
859   0000              ;--------------------------------------------------------
860   0000              ; absolute external ram data
861   0000              ;--------------------------------------------------------
862   0000              	SECTION IGNORE
863   0000              ;--------------------------------------------------------
864   0000              ; global & static initialisations
865   0000              ;--------------------------------------------------------
866   0000              	SECTION code_crt_init
867   0000              ;--------------------------------------------------------
868   0000              ; Home
869   0000              ;--------------------------------------------------------
870   0000              	SECTION IGNORE
871   0000              ;--------------------------------------------------------
872   0000              ; code
873   0000              ;--------------------------------------------------------
874   0000              	SECTION code_compiler
875   0000              ;	---------------------------------
876   0000              ; Function player_init
877   0000              ; ---------------------------------
878   0000              _player_init:
879   0000  CD 00 00    	call	___sdcc_enter_ix
880   0003  21 07 00    	ld	hl, +(_class + 0x0007)
881   0006  36 00       	ld	(hl),0x00
882   0008  21 07 00    	ld	hl, +(_tile + 0x0007)
883   000B  DD 7E 06    	ld	a,(ix+6)
884   000E  77          	ld	(hl), a
885   000F  21 07 00    	ld	hl, +(_lin + 0x0007)
886   0012  DD 7E 04    	ld	a,(ix+4)
887   0015  77          	ld	(hl), a
888   0016  21 07 00    	ld	hl, +(_col + 0x0007)
889   0019  DD 7E 05    	ld	a,(ix+5)
890   001C  77          	ld	(hl), a
891   001D  21 07 00    	ld	hl, +(_colint + 0x0007)
892   0020  36 00       	ld	(hl),0x00
893   0022  21 07 00    	ld	hl, +(_state + 0x0007)
894   0025  36 00       	ld	(hl),0x00
895   0027  01 07 00    	ld	bc,_state_a+7
896   002A  AF          	xor	a, a
897   002B  02          	ld	(bc), a
898   002C  21 07 00    	ld	hl, +(_jump_lin + 0x0007)
899   002F  DD 7E 04    	ld	a,(ix+4)
900   0032  77          	ld	(hl), a
901   0033  ED 5B 00 00 	ld	de,(_curr_time)
902   0037  ED 53 0E 00 	ld	(_last_time + 0x000e),de
903   003B  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
904   003E  36 00       	ld	(hl),0x00
905   0040  0A          	ld	a, (bc)
906   0041  F6 11       	or	a,+(0x01|0x10)
907   0043  02          	ld	(bc),a
908   0044  21 00 00    	ld	hl,_player_hit_col
909   0047  36 00       	ld	(hl),0x00
910   0049  21 00 00    	ld	hl,_player_hit_lin
911   004C  36 00       	ld	(hl),0x00
912   004E  21 00 00    	ld	hl,_player_slide
913   0051  36 00       	ld	(hl),0x00
914   0053  21 00 00    	ld	hl,_player_onstair
915   0056  36 00       	ld	(hl),0x00
916   0058  21 00 00    	ld	hl,_player_onfire
917   005B  36 00       	ld	(hl),0x00
918   005D  DD 66 05    	ld	h,(ix+5)
919   0060  DD 6E 04    	ld	l,(ix+4)
920   0063  E5          	push	hl
921   0064  DD 56 06    	ld	d,(ix+6)
922   0067  1E 07       	ld	e,0x07
923   0069  D5          	push	de
924   006A  CD 00 00    	call	_NIRVANAP_spriteT_callee
925   006D  DD 66 05    	ld	h,(ix+5)
926   0070  DD 6E 04    	ld	l,(ix+4)
927   0073  E5          	push	hl
928   0074  CD 00 00    	call	_spr_calc_index
929   0077  F1          	pop	af
930   0078  22 00 00    	ld	(_index0),hl
931   007B  01 00 00    	ld	bc,_scr_map
932   007E  09          	add	hl,bc
933   007F  36 15       	ld	(hl),0x15
934   0081  DD E1       	pop	ix
935   0083  C9          	ret
936   0084              	SECTION code_compiler
937   0084              ;	---------------------------------
938   0084              ; Function player_turn
939   0084              ; ---------------------------------
940   0084              _player_turn:
941   0084  21 00 00    	ld	hl,_sprite
942   0087  CD 00 00    	call	_spr_chktime
943   008A  7D          	ld	a, l
944   008B  B7          	or	a, a
945   008C  C8          	ret	Z
946   008D  21 00 00    	ld	hl,_k1
947   0090  E5          	push	hl
948   0091  2A 00 00    	ld	hl,(_joyfunc1)
949   0094  CD 00 00    	call	___sdcc_call_hl
950   0097  F1          	pop	af
951   0098  7D          	ld	a,l
952   0099  32 00 00    	ld	(_dirs),a
953   009C  21 00 00    	ld	hl,_k2
954   009F  E5          	push	hl
955   00A0  2A 00 00    	ld	hl,(_joyfunc2)
956   00A3  CD 00 00    	call	___sdcc_call_hl
957   00A6  F1          	pop	af
958   00A7  7D          	ld	a,l
959   00A8  32 00 00    	ld	(_dirs_alt),a
960   00AB  21 00 00    	ld	hl,_s_class
961   00AE  36 00       	ld	(hl),0x00
962   00B0  CD B6 00    	call	_player_move
963   00B3  C3 DC 03    	jp  _player_collision
964   00B6              	SECTION code_compiler
965   00B6              ;	---------------------------------
966   00B6              ; Function player_move
967   00B6              ; ---------------------------------
968   00B6              _player_move:
969   00B6  3A 07 00    	ld	a,(_lin + 0x0007)
970   00B9  32 00 00    	ld	(_s_lin0),a
971   00BC  3A 07 00    	ld	a,(_col + 0x0007)
972   00BF  32 00 00    	ld	(_s_col0),a
973   00C2  3A 07 00    	ld	a,(_state + 0x0007)
974   00C5  32 00 00    	ld	(_s_state),a
975   00C8  21 00 00    	ld	hl,_s_state
976   00CB  CB 46       	bit	0, (hl)
977   00CD  20 07       	jr	NZ,l_player_move_00113
978   00CF  21 00 00    	ld	hl,_s_state
979   00D2  CB 4E       	bit	1, (hl)
980   00D4  28 43       	jr	Z,l_player_move_00114
981   00D6              l_player_move_00113:
982   00D6  CD 3D 03    	call	_player_fire
983   00D9  3A 00 00    	ld	a,(_player_vel_y)
984   00DC  21 00 00    	ld	hl,_player_vel_y1
985   00DF  96          	sub	a, (hl)
986   00E0  E2 E5 00    	jp	PO, l_player_move_00162
987   00E3  EE 80       	xor	a,0x80
988   00E5              l_player_move_00162:
989   00E5  F2 02 01    	jp	P, l_player_move_00106
990   00E8  21 00 00    	ld	hl,_dirs
991   00EB  CB 56       	bit	2, (hl)
992   00ED  28 06       	jr	Z,l_player_move_00102
993   00EF  21 00 00    	ld	hl,_s_state
994   00F2  CD 00 00    	call	_spr_set_left
995   00F5              l_player_move_00102:
996   00F5  21 00 00    	ld	hl,_dirs
997   00F8  CB 4E       	bit	1, (hl)
998   00FA  28 06       	jr	Z,l_player_move_00106
999   00FC  21 00 00    	ld	hl,_s_state
1000  00FF  CD 00 00    	call	_spr_set_right
1001  0102              l_player_move_00106:
1002  0102  CD 4F 0E    	call	_player_move_jump
1003  0105  7D          	ld	a, l
1004  0106  B7          	or	a, a
1005  0107  28 1C       	jr	Z,l_player_move_00115
1006  0109  3A 00 00    	ld	a,(_player_onstair)
1007  010C  B7          	or	a, a
1008  010D  20 16       	jr	NZ,l_player_move_00115
1009  010F  21 60 08    	ld	hl,0x0860
1010  0112  E5          	push	hl
1011  0113  CD 22 07    	call	_player_tile
1012  0116  F1          	pop	af
1013  0117  18 0C       	jr	l_player_move_00115
1014  0119              l_player_move_00114:
1015  0119  CD 8B 01    	call	_player_move_input
1016  011C  3A 00 00    	ld	a,(_player_onstair)
1017  011F  B7          	or	a, a
1018  0120  20 03       	jr	NZ,l_player_move_00115
1019  0122  CD DF 0C    	call	_player_check_floor
1020  0125              l_player_move_00115:
1021  0125  CD 00 00    	call	_spr_redraw
1022  0128  7D          	ld	a, l
1023  0129  B7          	or	a, a
1024  012A  28 03       	jr	Z,l_player_move_00118
1025  012C  CD 43 07    	call	_player_check_map
1026  012F              l_player_move_00118:
1027  012F  3A 00 00    	ld	a,(_player_hit_lin)
1028  0132  B7          	or	a, a
1029  0133  28 03       	jr	Z,l_player_move_00120
1030  0135  CD 46 0C    	call	_player_hit_platform_clear
1031  0138              l_player_move_00120:
1032  0138  3A 00 00    	ld	a,(_s_state)
1033  013B  32 07 00    	ld	((_state + 0x0007)),a
1034  013E  2E 00       	ld	l,0x00
1035  0140  C9          	ret
1036  0141              	SECTION code_compiler
1037  0141              ;	---------------------------------
1038  0141              ; Function player_check_input
1039  0141              ; ---------------------------------
1040  0141              _player_check_input:
1041  0141  21 00 00    	ld	hl,_dirs
1042  0144  CB 56       	bit	2, (hl)
1043  0146  28 0C       	jr	Z,l_player_check_input_00102
1044  0148  21 00 00    	ld	hl,_dirs
1045  014B  CB 5E       	bit	3, (hl)
1046  014D  28 05       	jr	Z,l_player_check_input_00102
1047  014F  21 00 00    	ld	hl,_dirs
1048  0152  36 00       	ld	(hl),0x00
1049  0154              l_player_check_input_00102:
1050  0154  21 00 00    	ld	hl,_dirs
1051  0157  7E          	ld	a, (hl)
1052  0158  CB 07       	rlc	a
1053  015A  E6 01       	and	a,0x01
1054  015C  CB 47       	bit	0, a
1055  015E  20 28       	jr	NZ,l_player_check_input_00107
1056  0160  CB 56       	bit	2, (hl)
1057  0162  20 24       	jr	NZ,l_player_check_input_00107
1058  0164  21 00 00    	ld	hl,_dirs
1059  0167  CB 5E       	bit	3, (hl)
1060  0169  20 1D       	jr	NZ,l_player_check_input_00107
1061  016B  21 00 00    	ld	hl,_dirs
1062  016E  CB 46       	bit	0, (hl)
1063  0170  20 16       	jr	NZ,l_player_check_input_00107
1064  0172  21 00 00    	ld	hl,_dirs
1065  0175  CB 4E       	bit	1, (hl)
1066  0177  20 0F       	jr	NZ,l_player_check_input_00107
1067  0179  3A 00 00    	ld	a,(_dirs_alt)
1068  017C  CB 07       	rlc	a
1069  017E  E6 01       	and	a,0x01
1070  0180  CB 47       	bit	0, a
1071  0182  20 04       	jr	NZ,l_player_check_input_00107
1072  0184  2E 00       	ld	l,0x00
1073  0186  18 02       	jr	l_player_check_input_00108
1074  0188              l_player_check_input_00107:
1075  0188  2E 01       	ld	l,0x01
1076  018A              l_player_check_input_00108:
1077  018A  C9          	ret
1078  018B              	SECTION code_compiler
1079  018B              ;	---------------------------------
1080  018B              ; Function player_move_input
1081  018B              ; ---------------------------------
1082  018B              _player_move_input:
1083  018B  CD 41 01    	call	_player_check_input
1084  018E  7D          	ld	a, l
1085  018F  B7          	or	a, a
1086  0190  CA FD 02    	jp	Z, l_player_move_input_00147
1087  0193  CD 3D 03    	call	_player_fire
1088  0196  7D          	ld	a, l
1089  0197  B7          	or	a, a
1090  0198  28 0A       	jr	Z,l_player_move_input_00102
1091  019A  21 00 00    	ld	hl,_dirs
1092  019D  36 00       	ld	(hl),0x00
1093  019F  2E 00       	ld	l,0x00
1094  01A1  C3 23 03    	jp	l_player_move_input_00149
1095  01A4              l_player_move_input_00102:
1096  01A4  3A 00 00    	ld	a,(_game_2buttons)
1097  01A7  B7          	or	a, a
1098  01A8  28 07       	jr	Z,l_player_move_input_00104
1099  01AA  3A 00 00    	ld	a,(_dirs)
1100  01AD  E6 80       	and	a,0x80
1101  01AF  18 16       	jr	l_player_move_input_00105
1102  01B1              l_player_move_input_00104:
1103  01B1  21 00 00    	ld	hl,_dirs
1104  01B4  7E          	ld	a, (hl)
1105  01B5  CB 07       	rlc	a
1106  01B7  E6 01       	and	a,0x01
1107  01B9  CB 47       	bit	0, a
1108  01BB  28 04       	jr	Z,l_player_move_input_00151
1109  01BD  CB 46       	bit	0, (hl)
1110  01BF  20 04       	jr	NZ,l_player_move_input_00152
1111  01C1              l_player_move_input_00151:
1112  01C1  3E 00       	ld	a,0x00
1113  01C3  18 02       	jr	l_player_move_input_00153
1114  01C5              l_player_move_input_00152:
1115  01C5  3E 01       	ld	a,0x01
1116  01C7              l_player_move_input_00153:
1117  01C7              l_player_move_input_00105:
1118  01C7  B7          	or	a, a
1119  01C8  28 44       	jr	Z,l_player_move_input_00107
1120  01CA  21 00 00    	ld	hl,_player_vel_inc
1121  01CD  36 01       	ld	(hl),0x01
1122  01CF  21 00 00    	ld	hl,_ay_fx_04_salto
1123  01D2  E5          	push	hl
1124  01D3  21 01 04    	ld	hl,0x0401
1125  01D6  E5          	push	hl
1126  01D7  CD 00 00    	call	_ay_song_play
1127  01DA  21 00 00    	ld	hl,_player_onstair
1128  01DD  36 00       	ld	(hl),0x00
1129  01DF  21 00 00    	ld	hl,_s_state
1130  01E2  CD 00 00    	call	_spr_set_up
1131  01E5  3A 07 00    	ld	a,(_lin + 0x0007)
1132  01E8  32 07 00    	ld	(_jump_lin+7),a
1133  01EB  3A 00 00    	ld	a,(_s_state)
1134  01EE  32 07 00    	ld	((_state + 0x0007)),a
1135  01F1  21 64 08    	ld	hl,0x0864
1136  01F4  E5          	push	hl
1137  01F5  CD 22 07    	call	_player_tile
1138  01F8  F1          	pop	af
1139  01F9  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
1140  01FC  36 02       	ld	(hl),0x02
1141  01FE  21 00 00    	ld	hl,_player_slide
1142  0201  36 00       	ld	(hl),0x00
1143  0203  3A 00 00    	ld	a,(_player_vel_y0)
1144  0206  32 00 00    	ld	(_player_vel_y),a
1145  0209  2E 01       	ld	l,0x01
1146  020B  C3 23 03    	jp	l_player_move_input_00149
1147  020E              l_player_move_input_00107:
1148  020E  21 00 00    	ld	hl,_dirs
1149  0211  CB 5E       	bit	3, (hl)
1150  0213  28 20       	jr	Z,l_player_move_input_00111
1151  0215  CD 24 03    	call	_player_fix_walk_lin
1152  0218  21 00 00    	ld	hl,_s_state
1153  021B  CD 00 00    	call	_spr_set_right
1154  021E  01 07 00    	ld	bc,_state_a+7
1155  0221  0A          	ld	a, (bc)
1156  0222  F6 10       	or	a,0x10
1157  0224  E6 F7       	and	a,0xf7
1158  0226  02          	ld	(bc),a
1159  0227  3A 00 00    	ld	a,(_player_onstair)
1160  022A  B7          	or	a, a
1161  022B  28 05       	jr	Z,l_player_move_input_00109
1162  022D  2E 00       	ld	l,0x00
1163  022F  CD 4E 06    	call	_player_check_stairs
1164  0232              l_player_move_input_00109:
1165  0232  CD 00 00    	call	_spr_move_horizontal
1166  0235              l_player_move_input_00111:
1167  0235  21 00 00    	ld	hl,_dirs
1168  0238  CB 56       	bit	2, (hl)
1169  023A  28 20       	jr	Z,l_player_move_input_00115
1170  023C  CD 24 03    	call	_player_fix_walk_lin
1171  023F  21 00 00    	ld	hl,_s_state
1172  0242  CD 00 00    	call	_spr_set_left
1173  0245  01 07 00    	ld	bc,_state_a+7
1174  0248  0A          	ld	a, (bc)
1175  0249  F6 08       	or	a,0x08
1176  024B  E6 EF       	and	a,0xef
1177  024D  02          	ld	(bc),a
1178  024E  3A 00 00    	ld	a,(_player_onstair)
1179  0251  B7          	or	a, a
1180  0252  28 05       	jr	Z,l_player_move_input_00113
1181  0254  2E 00       	ld	l,0x00
1182  0256  CD 4E 06    	call	_player_check_stairs
1183  0259              l_player_move_input_00113:
1184  0259  CD 00 00    	call	_spr_move_horizontal
1185  025C              l_player_move_input_00115:
1186  025C  21 00 00    	ld	hl,_dirs
1187  025F  CB 46       	bit	0, (hl)
1188  0261  28 39       	jr	Z,l_player_move_input_00127
1189  0263  2E 00       	ld	l,0x00
1190  0265  CD 4E 06    	call	_player_check_stairs
1191  0268  3A 00 00    	ld	a,(_player_onstair)
1192  026B  B7          	or	a, a
1193  026C  20 10       	jr	NZ,l_player_move_input_00119
1194  026E  2E 01       	ld	l,0x01
1195  0270  CD 4E 06    	call	_player_check_stairs
1196  0273  3A 00 00    	ld	a,(_player_onstair)
1197  0276  B7          	or	a, a
1198  0277  20 05       	jr	NZ,l_player_move_input_00119
1199  0279  2E FE       	ld	l,0xfe
1200  027B  CD AE 05    	call	_player_check_stairs_vertical
1201  027E              l_player_move_input_00119:
1202  027E  3A 00 00    	ld	a,(_player_onstair)
1203  0281  B7          	or	a, a
1204  0282  28 05       	jr	Z,l_player_move_input_00124
1205  0284  CD 00 00    	call	_spr_move_up
1206  0287  18 13       	jr	l_player_move_input_00127
1207  0289              l_player_move_input_00124:
1208  0289  21 00 00    	ld	hl,_dirs
1209  028C  CB 5E       	bit	3, (hl)
1210  028E  20 0C       	jr	NZ,l_player_move_input_00127
1211  0290  21 00 00    	ld	hl,_dirs
1212  0293  CB 56       	bit	2, (hl)
1213  0295  20 05       	jr	NZ,l_player_move_input_00127
1214  0297  2E 00       	ld	l,0x00
1215  0299  C3 23 03    	jp	l_player_move_input_00149
1216  029C              l_player_move_input_00127:
1217  029C  21 00 00    	ld	hl,_dirs
1218  029F  CB 4E       	bit	1, (hl)
1219  02A1  28 38       	jr	Z,l_player_move_input_00139
1220  02A3  2E 00       	ld	l,0x00
1221  02A5  CD 4E 06    	call	_player_check_stairs
1222  02A8  3A 00 00    	ld	a,(_player_onstair)
1223  02AB  B7          	or	a, a
1224  02AC  20 10       	jr	NZ,l_player_move_input_00131
1225  02AE  2E 01       	ld	l,0x01
1226  02B0  CD 4E 06    	call	_player_check_stairs
1227  02B3  3A 00 00    	ld	a,(_player_onstair)
1228  02B6  B7          	or	a, a
1229  02B7  20 05       	jr	NZ,l_player_move_input_00131
1230  02B9  2E 12       	ld	l,0x12
1231  02BB  CD AE 05    	call	_player_check_stairs_vertical
1232  02BE              l_player_move_input_00131:
1233  02BE  3A 00 00    	ld	a,(_player_onstair)
1234  02C1  B7          	or	a, a
1235  02C2  28 05       	jr	Z,l_player_move_input_00136
1236  02C4  CD 00 00    	call	_spr_move_down
1237  02C7  18 12       	jr	l_player_move_input_00139
1238  02C9              l_player_move_input_00136:
1239  02C9  21 00 00    	ld	hl,_dirs
1240  02CC  CB 5E       	bit	3, (hl)
1241  02CE  20 0B       	jr	NZ,l_player_move_input_00139
1242  02D0  21 00 00    	ld	hl,_dirs
1243  02D3  CB 56       	bit	2, (hl)
1244  02D5  20 04       	jr	NZ,l_player_move_input_00139
1245  02D7  2E 00       	ld	l,0x00
1246  02D9  18 48       	jr	l_player_move_input_00149
1247  02DB              l_player_move_input_00139:
1248  02DB  3A 00 00    	ld	a,(_s_state)
1249  02DE  32 07 00    	ld	((_state + 0x0007)),a
1250  02E1  3A 00 00    	ld	a,(_player_onstair)
1251  02E4  B7          	or	a, a
1252  02E5  28 0A       	jr	Z,l_player_move_input_00141
1253  02E7  21 72 00    	ld	hl,0x0072
1254  02EA  E5          	push	hl
1255  02EB  CD 22 07    	call	_player_tile
1256  02EE  F1          	pop	af
1257  02EF  18 08       	jr	l_player_move_input_00142
1258  02F1              l_player_move_input_00141:
1259  02F1  21 60 08    	ld	hl,0x0860
1260  02F4  E5          	push	hl
1261  02F5  CD 22 07    	call	_player_tile
1262  02F8  F1          	pop	af
1263  02F9              l_player_move_input_00142:
1264  02F9  2E 01       	ld	l,0x01
1265  02FB  18 26       	jr	l_player_move_input_00149
1266  02FD              l_player_move_input_00147:
1267  02FD  21 07 00    	ld	hl, +(_colint + 0x0007)
1268  0300  36 00       	ld	(hl),0x00
1269  0302  3A 00 00    	ld	a,(_player_onstair)
1270  0305  B7          	or	a, a
1271  0306  28 0A       	jr	Z,l_player_move_input_00144
1272  0308  21 72 00    	ld	hl,0x0072
1273  030B  E5          	push	hl
1274  030C  CD 22 07    	call	_player_tile
1275  030F  F1          	pop	af
1276  0310  18 08       	jr	l_player_move_input_00145
1277  0312              l_player_move_input_00144:
1278  0312  21 70 01    	ld	hl,0x0170
1279  0315  E5          	push	hl
1280  0316  CD 22 07    	call	_player_tile
1281  0319  F1          	pop	af
1282  031A              l_player_move_input_00145:
1283  031A  21 00 00    	ld	hl,_s_state
1284  031D  7E          	ld	a,(hl)
1285  031E  E6 F3       	and	a,+(0xf7&0xfb)
1286  0320  77          	ld	(hl),a
1287  0321  2E 00       	ld	l,0x00
1288  0323              l_player_move_input_00149:
1289  0323  C9          	ret
1290  0324              	SECTION code_compiler
1291  0324              ;	---------------------------------
1292  0324              ; Function player_fix_walk_lin
1293  0324              ; ---------------------------------
1294  0324              _player_fix_walk_lin:
1295  0324  3A 00 00    	ld	a,(_player_onstair)
1296  0327  B7          	or	a, a
1297  0328  C0          	ret	NZ
1298  0329  01 07 00    	ld	bc,_lin+7
1299  032C  3A 00 00    	ld	a,(_s_lin0)
1300  032F  07          	rlca
1301  0330  07          	rlca
1302  0331  07          	rlca
1303  0332  07          	rlca
1304  0333  E6 0F       	and	a,0x0f
1305  0335  07          	rlca
1306  0336  07          	rlca
1307  0337  07          	rlca
1308  0338  07          	rlca
1309  0339  E6 F0       	and	a,0xf0
1310  033B  02          	ld	(bc), a
1311  033C  C9          	ret
1312  033D              	SECTION code_compiler
1313  033D              ;	---------------------------------
1314  033D              ; Function player_fire
1315  033D              ; ---------------------------------
1316  033D              _player_fire:
1317  033D  CD 00 00    	call	___sdcc_enter_ix
1318  0340  3B          	dec	sp
1319  0341  3A 00 00    	ld	a,(_game_2buttons)
1320  0344  B7          	or	a, a
1321  0345  28 0A       	jr	Z,l_player_fire_00102
1322  0347  3A 00 00    	ld	a,(_dirs_alt)
1323  034A  E6 80       	and	a,0x80
1324  034C  32 00 00    	ld	(_player_onfire),a
1325  034F  18 1A       	jr	l_player_fire_00103
1326  0351              l_player_fire_00102:
1327  0351  21 00 00    	ld	hl,_dirs
1328  0354  7E          	ld	a, (hl)
1329  0355  CB 07       	rlc	a
1330  0357  E6 01       	and	a,0x01
1331  0359  CB 47       	bit	0, a
1332  035B  28 04       	jr	Z,l_player_fire_00120
1333  035D  CB 46       	bit	0, (hl)
1334  035F  28 04       	jr	Z,l_player_fire_00121
1335  0361              l_player_fire_00120:
1336  0361  0E 00       	ld	c,0x00
1337  0363  18 02       	jr	l_player_fire_00122
1338  0365              l_player_fire_00121:
1339  0365  0E 01       	ld	c,0x01
1340  0367              l_player_fire_00122:
1341  0367  21 00 00    	ld	hl,_player_onfire
1342  036A  71          	ld	(hl), c
1343  036B              l_player_fire_00103:
1344  036B  3A 00 00    	ld	a,(_player_onfire)
1345  036E  B7          	or	a, a
1346  036F  28 65       	jr	Z,l_player_fire_00117
1347  0371  3A 07 00    	ld	a,(_tile + 0x0007)
1348  0374  FE 70       	cp	a,0x70
1349  0376  28 04       	jr	Z,l_player_fire_00104
1350  0378  D6 71       	sub	a,0x71
1351  037A  20 0D       	jr	NZ,l_player_fire_00105
1352  037C              l_player_fire_00104:
1353  037C  21 60 08    	ld	hl,0x0860
1354  037F  E5          	push	hl
1355  0380  CD 22 07    	call	_player_tile
1356  0383  F1          	pop	af
1357  0384  21 07 00    	ld	hl, +(_colint + 0x0007)
1358  0387  36 00       	ld	(hl),0x00
1359  0389              l_player_fire_00105:
1360  0389  21 00 00    	ld	hl,_player_mana
1361  038C  7E          	ld	a, (hl)
1362  038D  B7          	or	a, a
1363  038E  28 37       	jr	Z,l_player_fire_00113
1364  0390  3A 07 00    	ld	a,(_bullet_col + 0x0007)
1365  0393  3C          	inc	a
1366  0394  20 31       	jr	NZ,l_player_fire_00113
1367  0396  3E 05       	ld	a,0x05
1368  0398  96          	sub	a, (hl)
1369  0399  30 0F       	jr	NC,l_player_fire_00110
1370  039B  3A 00 00    	ld	a,(_game_inmune)
1371  039E  B7          	or	a, a
1372  039F  20 0E       	jr	NZ,l_player_fire_00111
1373  03A1  21 00 00    	ld	hl,_player_mana
1374  03A4  7E          	ld	a, (hl)
1375  03A5  C6 FB       	add	a,0xfb
1376  03A7  77          	ld	(hl), a
1377  03A8  18 05       	jr	l_player_fire_00111
1378  03AA              l_player_fire_00110:
1379  03AA  21 00 00    	ld	hl,_player_mana
1380  03AD  36 00       	ld	(hl),0x00
1381  03AF              l_player_fire_00111:
1382  03AF  CD 00 00    	call	_game_update_stats
1383  03B2  21 00 00    	ld	hl,_ay_fx_06_disparo1
1384  03B5  E5          	push	hl
1385  03B6  21 01 06    	ld	hl,0x0601
1386  03B9  E5          	push	hl
1387  03BA  CD 00 00    	call	_ay_song_play
1388  03BD  21 07 78    	ld	hl,0x7807
1389  03C0  E5          	push	hl
1390  03C1  CD 00 00    	call	_game_shoot_fire
1391  03C4  F1          	pop	af
1392  03C5  18 0B       	jr	l_player_fire_00114
1393  03C7              l_player_fire_00113:
1394  03C7  21 00 00    	ld	hl,_ay_fx_04_sin_mana
1395  03CA  E5          	push	hl
1396  03CB  21 01 04    	ld	hl,0x0401
1397  03CE  E5          	push	hl
1398  03CF  CD 00 00    	call	_ay_song_play
1399  03D2              l_player_fire_00114:
1400  03D2  2E 01       	ld	l,0x01
1401  03D4  18 02       	jr	l_player_fire_00118
1402  03D6              l_player_fire_00117:
1403  03D6  2E 00       	ld	l,0x00
1404  03D8              l_player_fire_00118:
1405  03D8  33          	inc	sp
1406  03D9  DD E1       	pop	ix
1407  03DB  C9          	ret
1408  03DC              	SECTION code_compiler
1409  03DC              ;	---------------------------------
1410  03DC              ; Function player_collision
1411  03DC              ; ---------------------------------
1412  03DC              _player_collision:
1413  03DC  3E 19       	ld	a,0x19
1414  03DE  F5          	push	af
1415  03DF  33          	inc	sp
1416  03E0  21 00 00    	ld	hl,_player_hit_time
1417  03E3  E5          	push	hl
1418  03E4  CD 00 00    	call	_game_check_time
1419  03E7  F1          	pop	af
1420  03E8  33          	inc	sp
1421  03E9  7D          	ld	a, l
1422  03EA  B7          	or	a, a
1423  03EB  CA 5A 05    	jp	Z, l_player_collision_00137
1424  03EE  21 00 00    	ld	hl,_sprite
1425  03F1  36 00       	ld	(hl),0x00
1426  03F3  3A 07 00    	ld	a,(_col + 7)
1427  03F6  32 00 00    	ld	(_s_col1),a
1428  03F9  3A 07 00    	ld	a,(_lin + 7)
1429  03FC  32 00 00    	ld	(_s_lin1),a
1430  03FF  C6 08       	add	a,0x08
1431  0401  4F          	ld	c, a
1432  0402  3A 00 00    	ld	a, (_s_col1)
1433  0405  47          	ld	b,a
1434  0406  C5          	push	bc
1435  0407  CD 00 00    	call	_spr_calc_index
1436  040A  F1          	pop	af
1437  040B  7D          	ld	a,l
1438  040C  32 00 00    	ld	(_sprite_curr_index),a
1439  040F  4F          	ld	c,a
1440  0410  06 00       	ld	b,0x00
1441  0412  21 00 00    	ld	hl,_scr_map
1442  0415  09          	add	hl,bc
1443  0416  4E          	ld	c, (hl)
1444  0417  21 00 00    	ld	hl,_s_col1
1445  041A  CB 46       	bit	0, (hl)
1446  041C  20 25       	jr	NZ,l_player_collision_00104
1447  041E  79          	ld	a, c
1448  041F  D6 15       	sub	a,0x15
1449  0421  20 20       	jr	NZ,l_player_collision_00104
1450  0423  3A 00 00    	ld	a,(_game_checkpoint_scr)
1451  0426  21 00 00    	ld	hl,_scr_curr
1452  0429  96          	sub	a, (hl)
1453  042A  28 05       	jr	Z,l_player_collision_00102
1454  042C  2E 01       	ld	l,0x01
1455  042E  CD 00 00    	call	_zx_border_fastcall
1456  0431              l_player_collision_00102:
1457  0431  3A 00 00    	ld	a,(_s_col1)
1458  0434  32 00 00    	ld	(_game_checkpoint_col),a
1459  0437  3A 00 00    	ld	a,(_s_lin1)
1460  043A  32 00 00    	ld	(_game_checkpoint_lin),a
1461  043D  3A 00 00    	ld	a,(_scr_curr)
1462  0440  32 00 00    	ld	(_game_checkpoint_scr),a
1463  0443              l_player_collision_00104:
1464  0443  3E 2F       	ld	a,0x2f
1465  0445  91          	sub	a, c
1466  0446  30 3F       	jr	NC,l_player_collision_00159
1467  0448  79          	ld	a,c
1468  0449  FE 3A       	cp	a,0x3a
1469  044B  30 3A       	jr	NC,l_player_collision_00159
1470  044D  D6 39       	sub	a,0x39
1471  044F  20 12       	jr	NZ,l_player_collision_00112
1472  0451  21 00 00    	ld	hl,_ay_song_04_lotr_level_complete
1473  0454  E5          	push	hl
1474  0455  21 01 04    	ld	hl,0x0401
1475  0458  E5          	push	hl
1476  0459  CD 00 00    	call	_ay_song_play
1477  045C  21 00 00    	ld	hl,_game_worldup
1478  045F  36 01       	ld	(hl),0x01
1479  0461  18 24       	jr	l_player_collision_00159
1480  0463              l_player_collision_00112:
1481  0463  21 00 00    	ld	hl,_game_inmune
1482  0466  7E          	ld	a, (hl)
1483  0467  B7          	or	a,a
1484  0468  20 13       	jr	NZ,l_player_collision_00107
1485  046A  B6          	or	a,(hl)
1486  046B  20 10       	jr	NZ,l_player_collision_00107
1487  046D  3E 82       	ld	a,0x82
1488  046F  21 00 00    	ld	hl,_s_lin1
1489  0472  96          	sub	a, (hl)
1490  0473  30 08       	jr	NC,l_player_collision_00107
1491  0475  CD 93 10    	call	_player_lost_life
1492  0478  2E 00       	ld	l,0x00
1493  047A  C3 5C 05    	jp	l_player_collision_00138
1494  047D              l_player_collision_00107:
1495  047D  2E 06       	ld	l,0x06
1496  047F  CD 00 00    	call	_zx_border_fastcall
1497  0482  2E 32       	ld	l,0x32
1498  0484  CD 12 12    	call	_player_hit
1499  0487              l_player_collision_00159:
1500  0487              l_player_collision_00133:
1501  0487  21 00 00    	ld	hl,_sprite
1502  048A  7E          	ld	a, (hl)
1503  048B  D6 07       	sub	a,0x07
1504  048D  D2 5A 05    	jp	NC, l_player_collision_00137
1505  0490  4E          	ld	c,(hl)
1506  0491  06 00       	ld	b,0x00
1507  0493  21 00 00    	ld	hl,_class
1508  0496  09          	add	hl,bc
1509  0497  7E          	ld	a,(hl)
1510  0498  32 00 00    	ld	(_s_class),a
1511  049B  B7          	or	a, a
1512  049C  CA 53 05    	jp	Z, l_player_collision_00132
1513  049F  2A 00 00    	ld	hl,(_sprite)
1514  04A2  26 00       	ld	h,0x00
1515  04A4  01 00 00    	ld	bc,_col
1516  04A7  09          	add	hl,bc
1517  04A8  4E          	ld	c,(hl)
1518  04A9  06 00       	ld	b,0x00
1519  04AB  3A 00 00    	ld	a,(_s_col1)
1520  04AE  5F          	ld	e,a
1521  04AF  16 00       	ld	d,0x00
1522  04B1  79          	ld	a, c
1523  04B2  93          	sub	a, e
1524  04B3  6F          	ld	l, a
1525  04B4  78          	ld	a, b
1526  04B5  9A          	sbc	a, d
1527  04B6  67          	ld	h, a
1528  04B7  CD 00 00    	call	_abs_fastcall
1529  04BA  7D          	ld	a,l
1530  04BB  D6 02       	sub	a,0x02
1531  04BD  7C          	ld	a,h
1532  04BE  17          	rla
1533  04BF  3F          	ccf
1534  04C0  1F          	rra
1535  04C1  DE 80       	sbc	a,0x80
1536  04C3  D2 53 05    	jp	NC, l_player_collision_00132
1537  04C6  2A 00 00    	ld	hl,(_sprite)
1538  04C9  26 00       	ld	h,0x00
1539  04CB  01 00 00    	ld	bc,_lin
1540  04CE  09          	add	hl,bc
1541  04CF  4E          	ld	c,(hl)
1542  04D0  06 00       	ld	b,0x00
1543  04D2  3A 00 00    	ld	a,(_s_lin1)
1544  04D5  5F          	ld	e,a
1545  04D6  16 00       	ld	d,0x00
1546  04D8  79          	ld	a, c
1547  04D9  93          	sub	a, e
1548  04DA  6F          	ld	l, a
1549  04DB  78          	ld	a, b
1550  04DC  9A          	sbc	a, d
1551  04DD  67          	ld	h, a
1552  04DE  CD 00 00    	call	_abs_fastcall
1553  04E1  7D          	ld	a,l
1554  04E2  D6 0E       	sub	a,0x0e
1555  04E4  7C          	ld	a,h
1556  04E5  17          	rla
1557  04E6  3F          	ccf
1558  04E7  1F          	rra
1559  04E8  DE 80       	sbc	a,0x80
1560  04EA  30 67       	jr	NC,l_player_collision_00132
1561  04EC  3A 00 00    	ld	a,(_s_class)
1562  04EF  D6 06       	sub	a,0x06
1563  04F1  20 1D       	jr	NZ,l_player_collision_00120
1564  04F3  21 00 00    	ld	hl,_player_vita
1565  04F6  7E          	ld	a, (hl)
1566  04F7  C6 32       	add	a,0x32
1567  04F9  77          	ld	(hl), a
1568  04FA  3A 00 00    	ld	a,(_player_max_vita)
1569  04FD  21 00 00    	ld	hl,_player_vita
1570  0500  96          	sub	a, (hl)
1571  0501  30 06       	jr	NC,l_player_collision_00118
1572  0503  3A 00 00    	ld	a,(_player_max_vita)
1573  0506  32 00 00    	ld	(_player_vita),a
1574  0509              l_player_collision_00118:
1575  0509  CD 5D 05    	call	_player_pick_mushroom
1576  050C  2E 00       	ld	l,0x00
1577  050E  18 4C       	jr	l_player_collision_00138
1578  0510              l_player_collision_00120:
1579  0510  3A 00 00    	ld	a,(_s_class)
1580  0513  D6 07       	sub	a,0x07
1581  0515  20 1D       	jr	NZ,l_player_collision_00124
1582  0517  21 00 00    	ld	hl,_player_mana
1583  051A  7E          	ld	a, (hl)
1584  051B  C6 32       	add	a,0x32
1585  051D  77          	ld	(hl), a
1586  051E  3A 00 00    	ld	a,(_player_max_mana)
1587  0521  21 00 00    	ld	hl,_player_mana
1588  0524  96          	sub	a, (hl)
1589  0525  30 06       	jr	NC,l_player_collision_00122
1590  0527  3A 00 00    	ld	a,(_player_max_mana)
1591  052A  32 00 00    	ld	(_player_mana),a
1592  052D              l_player_collision_00122:
1593  052D  CD 5D 05    	call	_player_pick_mushroom
1594  0530  2E 00       	ld	l,0x00
1595  0532  18 28       	jr	l_player_collision_00138
1596  0534              l_player_collision_00124:
1597  0534  3A 00 00    	ld	a,(_s_class)
1598  0537  D6 08       	sub	a,0x08
1599  0539  20 0A       	jr	NZ,l_player_collision_00126
1600  053B  CD 5D 05    	call	_player_pick_mushroom
1601  053E  CD 7C 05    	call	_player_1up
1602  0541  2E 00       	ld	l,0x00
1603  0543  18 17       	jr	l_player_collision_00138
1604  0545              l_player_collision_00126:
1605  0545  2E 02       	ld	l,0x02
1606  0547  CD 00 00    	call	_zx_border_fastcall
1607  054A  2E 14       	ld	l,0x14
1608  054C  CD 12 12    	call	_player_hit
1609  054F  2E 01       	ld	l,0x01
1610  0551  18 09       	jr	l_player_collision_00138
1611  0553              l_player_collision_00132:
1612  0553  21 00 00    	ld	hl,_sprite
1613  0556  34          	inc	(hl)
1614  0557  C3 87 04    	jp	l_player_collision_00133
1615  055A              l_player_collision_00137:
1616  055A  2E 00       	ld	l,0x00
1617  055C              l_player_collision_00138:
1618  055C  C9          	ret
1619  055D              	SECTION code_compiler
1620  055D              ;	---------------------------------
1621  055D              ; Function player_pick_mushroom
1622  055D              ; ---------------------------------
1623  055D              _player_pick_mushroom:
1624  055D  21 00 00    	ld	hl,_ay_fx_04_magia1
1625  0560  E5          	push	hl
1626  0561  21 01 04    	ld	hl,0x0401
1627  0564  E5          	push	hl
1628  0565  CD 00 00    	call	_ay_song_play
1629  0568  21 01 00    	ld	hl,0x0001
1630  056B  CD 75 0C    	call	_player_score_add
1631  056E  CD 00 00    	call	_game_update_stats
1632  0571  2A 00 00    	ld	hl,(_sprite)
1633  0574  CD 00 00    	call	_spr_destroy
1634  0577  21 00 00    	ld	hl,_game_mush_count
1635  057A  35          	dec	(hl)
1636  057B  C9          	ret
1637  057C              	SECTION code_compiler
1638  057C              ;	---------------------------------
1639  057C              ; Function player_1up
1640  057C              ; ---------------------------------
1641  057C              _player_1up:
1642  057C  21 00 00    	ld	hl,_player_lives
1643  057F  7E          	ld	a, (hl)
1644  0580  D6 64       	sub	a,0x64
1645  0582  D0          	ret	NC
1646  0583  34          	inc	(hl)
1647  0584  CD 00 00    	call	_spr_flatten
1648  0587  21 00 00    	ld	hl,___str_0
1649  058A  E5          	push	hl
1650  058B  21 0C 0C    	ld	hl,0x0c0c
1651  058E  E5          	push	hl
1652  058F  CD 00 00    	call	_zx_print_str
1653  0592  AF          	xor	a, a
1654  0593  F5          	push	af
1655  0594  33          	inc	sp
1656  0595  21 19 00    	ld	hl,0x0019
1657  0598  E5          	push	hl
1658  0599  21 0C 11    	ld	hl,0x110c
1659  059C  E5          	push	hl
1660  059D  3E 0C       	ld	a,0x0c
1661  059F  F5          	push	af
1662  05A0  33          	inc	sp
1663  05A1  CD 00 00    	call	_game_colour_message
1664  05A4  F1          	pop	af
1665  05A5  F1          	pop	af
1666  05A6  F1          	pop	af
1667  05A7  CD 00 00    	call	_game_update_stats
1668  05AA  CD 00 00    	call	_spr_unflatten
1669  05AD  C9          	ret
1670  05AE              	SECTION rodata_compiler
1671  0000              ___str_0:
1672  0000  31 20 55 50 21 
                        	DEFM "1 UP!"
1673  0005  00          	DEFB 0x00
1674  0006              	SECTION code_compiler
1675  05AE              ;	---------------------------------
1676  05AE              ; Function player_check_stairs_vertical
1677  05AE              ; ---------------------------------
1678  05AE              _player_check_stairs_vertical:
1679  05AE  CD 00 00    	call	___sdcc_enter_ix
1680  05B1  3B          	dec	sp
1681  05B2  4D          	ld	c, l
1682  05B3  21 07 00    	ld	hl,+(_col + 0x0007)
1683  05B6  46          	ld	b, (hl)
1684  05B7  CB 40       	bit	0, b
1685  05B9  20 2A       	jr	NZ,l_player_check_stairs_vertical_00102
1686  05BB  3A 07 00    	ld	a,(_lin + 0x0007)
1687  05BE  81          	add	a, c
1688  05BF  4F          	ld	c,a
1689  05C0  C5          	push	bc
1690  05C1  CD 00 00    	call	_spr_calc_index
1691  05C4  F1          	pop	af
1692  05C5  7D          	ld	a,l
1693  05C6  32 00 00    	ld	(_sprite_curr_index),a
1694  05C9  4F          	ld	c,a
1695  05CA  06 00       	ld	b,0x00
1696  05CC  21 00 00    	ld	hl,_scr_map
1697  05CF  09          	add	hl,bc
1698  05D0  7E          	ld	a,(hl)
1699  05D1  4F          	ld	c,a
1700  05D2  D6 44       	sub	a,0x44
1701  05D4  38 05       	jr	C,l_player_check_stairs_vertical_00110
1702  05D6  3E 47       	ld	a,0x47
1703  05D8  91          	sub	a, c
1704  05D9  30 04       	jr	NC,l_player_check_stairs_vertical_00111
1705  05DB              l_player_check_stairs_vertical_00110:
1706  05DB  1E 00       	ld	e,0x00
1707  05DD  18 02       	jr	l_player_check_stairs_vertical_00112
1708  05DF              l_player_check_stairs_vertical_00111:
1709  05DF  1E 01       	ld	e,0x01
1710  05E1              l_player_check_stairs_vertical_00112:
1711  05E1  0E 00       	ld	c,0x00
1712  05E3  18 52       	jr	l_player_check_stairs_vertical_00103
1713  05E5              l_player_check_stairs_vertical_00102:
1714  05E5  78          	ld	a, b
1715  05E6  91          	sub	a, c
1716  05E7  57          	ld	d, a
1717  05E8  3A 07 00    	ld	a,(_lin + 0x0007)
1718  05EB  81          	add	a, c
1719  05EC  47          	ld	b, a
1720  05ED  C5          	push	bc
1721  05EE  58          	ld	e,b
1722  05EF  D5          	push	de
1723  05F0  CD 00 00    	call	_spr_calc_index
1724  05F3  F1          	pop	af
1725  05F4  C1          	pop	bc
1726  05F5  7D          	ld	a,l
1727  05F6  32 00 00    	ld	(_sprite_curr_index),a
1728  05F9  5F          	ld	e,a
1729  05FA  16 00       	ld	d,0x00
1730  05FC  21 00 00    	ld	hl,_scr_map
1731  05FF  19          	add	hl,de
1732  0600  7E          	ld	a,(hl)
1733  0601  47          	ld	b,a
1734  0602  D6 44       	sub	a,0x44
1735  0604  38 05       	jr	C,l_player_check_stairs_vertical_00113
1736  0606  3E 47       	ld	a,0x47
1737  0608  90          	sub	a, b
1738  0609  30 04       	jr	NC,l_player_check_stairs_vertical_00114
1739  060B              l_player_check_stairs_vertical_00113:
1740  060B  1E 00       	ld	e,0x00
1741  060D  18 02       	jr	l_player_check_stairs_vertical_00115
1742  060F              l_player_check_stairs_vertical_00114:
1743  060F  1E 01       	ld	e,0x01
1744  0611              l_player_check_stairs_vertical_00115:
1745  0611  3A 07 00    	ld	a,(_col + 0x0007)
1746  0614  91          	sub	a, c
1747  0615  47          	ld	b, a
1748  0616  3A 07 00    	ld	a,(_lin + 0x0007)
1749  0619  81          	add	a, c
1750  061A  57          	ld	d, a
1751  061B  D5          	push	de
1752  061C  4A          	ld	c, d
1753  061D  C5          	push	bc
1754  061E  CD 00 00    	call	_spr_calc_index
1755  0621  F1          	pop	af
1756  0622  D1          	pop	de
1757  0623  7D          	ld	a,l
1758  0624  32 00 00    	ld	(_sprite_curr_index),a
1759  0627  7B          	ld	a, e
1760  0628  D6 44       	sub	a,0x44
1761  062A  38 05       	jr	C,l_player_check_stairs_vertical_00116
1762  062C  3E 47       	ld	a,0x47
1763  062E  93          	sub	a, e
1764  062F  30 04       	jr	NC,l_player_check_stairs_vertical_00117
1765  0631              l_player_check_stairs_vertical_00116:
1766  0631  0E 00       	ld	c,0x00
1767  0633  18 02       	jr	l_player_check_stairs_vertical_00118
1768  0635              l_player_check_stairs_vertical_00117:
1769  0635  0E 01       	ld	c,0x01
1770  0637              l_player_check_stairs_vertical_00118:
1771  0637              l_player_check_stairs_vertical_00103:
1772  0637  7B          	ld	a, e
1773  0638  B7          	or	a,a
1774  0639  20 03       	jr	NZ,l_player_check_stairs_vertical_00104
1775  063B  B1          	or	a,c
1776  063C  28 07       	jr	Z,l_player_check_stairs_vertical_00105
1777  063E              l_player_check_stairs_vertical_00104:
1778  063E  21 00 00    	ld	hl,_player_onstair
1779  0641  36 01       	ld	(hl),0x01
1780  0643  18 05       	jr	l_player_check_stairs_vertical_00108
1781  0645              l_player_check_stairs_vertical_00105:
1782  0645  21 00 00    	ld	hl,_player_onstair
1783  0648  36 00       	ld	(hl),0x00
1784  064A              l_player_check_stairs_vertical_00108:
1785  064A  33          	inc	sp
1786  064B  DD E1       	pop	ix
1787  064D  C9          	ret
1788  064E              	SECTION code_compiler
1789  064E              ;	---------------------------------
1790  064E              ; Function player_check_stairs
1791  064E              ; ---------------------------------
1792  064E              _player_check_stairs:
1793  064E  CD 00 00    	call	___sdcc_enter_ix
1794  0651  3B          	dec	sp
1795  0652  45          	ld	b, l
1796  0653  3A 07 00    	ld	a,(_col + 0x0007)
1797  0656  4F          	ld	c,a
1798  0657  80          	add	a, b
1799  0658  57          	ld	d, a
1800  0659  3A 07 00    	ld	a,(_lin + 0x0007)
1801  065C  C5          	push	bc
1802  065D  5F          	ld	e,a
1803  065E  D5          	push	de
1804  065F  CD 00 00    	call	_spr_calc_index
1805  0662  F1          	pop	af
1806  0663  C1          	pop	bc
1807  0664  7D          	ld	a,l
1808  0665  32 00 00    	ld	(_sprite_curr_index),a
1809  0668  5F          	ld	e,a
1810  0669  16 00       	ld	d,0x00
1811  066B  21 00 00    	ld	hl,_scr_map
1812  066E  19          	add	hl,de
1813  066F  7E          	ld	a,(hl)
1814  0670  4F          	ld	c,a
1815  0671  D6 44       	sub	a,0x44
1816  0673  38 05       	jr	C,l_player_check_stairs_00111
1817  0675  3E 47       	ld	a,0x47
1818  0677  91          	sub	a, c
1819  0678  30 04       	jr	NC,l_player_check_stairs_00112
1820  067A              l_player_check_stairs_00111:
1821  067A  0E 00       	ld	c,0x00
1822  067C  18 02       	jr	l_player_check_stairs_00113
1823  067E              l_player_check_stairs_00112:
1824  067E  0E 01       	ld	c,0x01
1825  0680              l_player_check_stairs_00113:
1826  0680  3A 07 00    	ld	a,(_col + 0x0007)
1827  0683  80          	add	a, b
1828  0684  57          	ld	d, a
1829  0685  3A 07 00    	ld	a,(_lin + 0x0007)
1830  0688  C6 0F       	add	a,0x0f
1831  068A  47          	ld	b, a
1832  068B  C5          	push	bc
1833  068C  58          	ld	e,b
1834  068D  D5          	push	de
1835  068E  CD 00 00    	call	_spr_calc_index
1836  0691  F1          	pop	af
1837  0692  C1          	pop	bc
1838  0693  7D          	ld	a,l
1839  0694  32 00 00    	ld	(_sprite_curr_index),a
1840  0697  5F          	ld	e,a
1841  0698  16 00       	ld	d,0x00
1842  069A  21 00 00    	ld	hl,_scr_map
1843  069D  19          	add	hl,de
1844  069E  7E          	ld	a,(hl)
1845  069F  47          	ld	b,a
1846  06A0  D6 44       	sub	a,0x44
1847  06A2  38 05       	jr	C,l_player_check_stairs_00114
1848  06A4  3E 47       	ld	a,0x47
1849  06A6  90          	sub	a, b
1850  06A7  30 04       	jr	NC,l_player_check_stairs_00115
1851  06A9              l_player_check_stairs_00114:
1852  06A9  06 00       	ld	b,0x00
1853  06AB  18 02       	jr	l_player_check_stairs_00116
1854  06AD              l_player_check_stairs_00115:
1855  06AD  06 01       	ld	b,0x01
1856  06AF              l_player_check_stairs_00116:
1857  06AF  79          	ld	a, c
1858  06B0  B7          	or	a,a
1859  06B1  20 03       	jr	NZ,l_player_check_stairs_00105
1860  06B3  B0          	or	a,b
1861  06B4  28 13       	jr	Z,l_player_check_stairs_00106
1862  06B6              l_player_check_stairs_00105:
1863  06B6  21 00 00    	ld	hl,_player_onstair
1864  06B9  7E          	ld	a, (hl)
1865  06BA  B7          	or	a, a
1866  06BB  20 1D       	jr	NZ,l_player_check_stairs_00109
1867  06BD  36 01       	ld	(hl),0x01
1868  06BF  21 72 00    	ld	hl,0x0072
1869  06C2  E5          	push	hl
1870  06C3  CD 22 07    	call	_player_tile
1871  06C6  F1          	pop	af
1872  06C7  18 11       	jr	l_player_check_stairs_00109
1873  06C9              l_player_check_stairs_00106:
1874  06C9  21 00 00    	ld	hl,_player_onstair
1875  06CC  7E          	ld	a, (hl)
1876  06CD  B7          	or	a, a
1877  06CE  28 0A       	jr	Z,l_player_check_stairs_00109
1878  06D0  36 00       	ld	(hl),0x00
1879  06D2  21 60 08    	ld	hl,0x0860
1880  06D5  E5          	push	hl
1881  06D6  CD 22 07    	call	_player_tile
1882  06D9  F1          	pop	af
1883  06DA              l_player_check_stairs_00109:
1884  06DA  33          	inc	sp
1885  06DB  DD E1       	pop	ix
1886  06DD  C9          	ret
1887  06DE              	SECTION code_compiler
1888  06DE              ;	---------------------------------
1889  06DE              ; Function player_anim_tile
1890  06DE              ; ---------------------------------
1891  06DE              _player_anim_tile:
1892  06DE  21 07 00    	ld	hl,+(_tile + 0x0007)
1893  06E1  4E          	ld	c, (hl)
1894  06E2  21 07 00    	ld	hl,+(_colint + 0x0007)
1895  06E5  46          	ld	b, (hl)
1896  06E6  79          	ld	a, c
1897  06E7  80          	add	a, b
1898  06E8  32 00 00    	ld	(_s_tile1),a
1899  06EB  3A 00 00    	ld	a,(_player_onstair)
1900  06EE  B7          	or	a, a
1901  06EF  28 17       	jr	Z,l_player_anim_tile_00109
1902  06F1  21 00 00    	ld	hl,_player_anim_stair
1903  06F4  34          	inc	(hl)
1904  06F5  3E 01       	ld	a,0x01
1905  06F7  96          	sub	a, (hl)
1906  06F8  30 02       	jr	NC,l_player_anim_tile_00102
1907  06FA  36 00       	ld	(hl),0x00
1908  06FC              l_player_anim_tile_00102:
1909  06FC  79          	ld	a, c
1910  06FD  21 00 00    	ld	hl,_player_anim_stair
1911  0700  86          	add	a, (hl)
1912  0701  C6 04       	add	a,0x04
1913  0703  32 00 00    	ld	(_s_tile1),a
1914  0706  18 19       	jr	l_player_anim_tile_00111
1915  0708              l_player_anim_tile_00109:
1916  0708  3A 00 00    	ld	a,(_player_onfire)
1917  070B  B7          	or	a, a
1918  070C  28 13       	jr	Z,l_player_anim_tile_00111
1919  070E  21 00 00    	ld	hl,_s_state
1920  0711  CB 56       	bit	2, (hl)
1921  0713  28 07       	jr	Z,l_player_anim_tile_00104
1922  0715  21 00 00    	ld	hl,_s_tile1
1923  0718  36 60       	ld	(hl),0x60
1924  071A  18 05       	jr	l_player_anim_tile_00111
1925  071C              l_player_anim_tile_00104:
1926  071C  21 00 00    	ld	hl,_s_tile1
1927  071F  36 68       	ld	(hl),0x68
1928  0721              l_player_anim_tile_00111:
1929  0721  C9          	ret
1930  0722              	SECTION code_compiler
1931  0722              ;	---------------------------------
1932  0722              ; Function player_tile
1933  0722              ; ---------------------------------
1934  0722              _player_tile:
1935  0722  CD 00 00    	call	___sdcc_enter_ix
1936  0725  21 05 00    	ld	hl,0x0005
1937  0728  39          	add	hl, sp
1938  0729  EB          	ex	de,hl
1939  072A  21 04 00    	ld	hl,0x0004
1940  072D  39          	add	hl, sp
1941  072E  4D          	ld	c, l
1942  072F  44          	ld	b, h
1943  0730  D5          	push	de
1944  0731  21 00 00    	ld	hl,_sprite
1945  0734  E5          	push	hl
1946  0735  C5          	push	bc
1947  0736  CD 00 00    	call	_spr_tile_dir
1948  0739  F1          	pop	af
1949  073A  F1          	pop	af
1950  073B  F1          	pop	af
1951  073C  7D          	ld	a,l
1952  073D  32 07 00    	ld	((_tile + 0x0007)),a
1953  0740  DD E1       	pop	ix
1954  0742  C9          	ret
1955  0743              	SECTION code_compiler
1956  0743              ;	---------------------------------
1957  0743              ; Function player_check_map
1958  0743              ; ---------------------------------
1959  0743              _player_check_map:
1960  0743  21 07 00    	ld	hl,+(_col + 0x0007)
1961  0746  46          	ld	b, (hl)
1962  0747  21 07 00    	ld	hl,+(_lin + 0x0007)
1963  074A  4E          	ld	c, (hl)
1964  074B  C5          	push	bc
1965  074C  CD 00 00    	call	_spr_calc_index
1966  074F  F1          	pop	af
1967  0750  7D          	ld	a,l
1968  0751  32 00 00    	ld	(_sprite_curr_index),a
1969  0754  21 07 00    	ld	hl,+(_col + 0x0007)
1970  0757  4E          	ld	c, (hl)
1971  0758  3A 07 00    	ld	a,(_lin + 0x0007)
1972  075B  E6 0F       	and	a,0x0f
1973  075D  CB 41       	bit	0, c
1974  075F  20 17       	jr	NZ,l_player_check_map_00108
1975  0761  B7          	or	a, a
1976  0762  20 05       	jr	NZ,l_player_check_map_00102
1977  0764  CD A3 07    	call	_player_pick_item
1978  0767  18 39       	jr	l_player_check_map_00110
1979  0769              l_player_check_map_00102:
1980  0769  CD A3 07    	call	_player_pick_item
1981  076C  21 00 00    	ld	hl,_sprite_curr_index
1982  076F  7E          	ld	a, (hl)
1983  0770  C6 10       	add	a,0x10
1984  0772  77          	ld	(hl), a
1985  0773  CD A3 07    	call	_player_pick_item
1986  0776  18 2A       	jr	l_player_check_map_00110
1987  0778              l_player_check_map_00108:
1988  0778  B7          	or	a, a
1989  0779  20 0C       	jr	NZ,l_player_check_map_00105
1990  077B  CD A3 07    	call	_player_pick_item
1991  077E  21 00 00    	ld	hl,_sprite_curr_index
1992  0781  34          	inc	(hl)
1993  0782  CD A3 07    	call	_player_pick_item
1994  0785  18 1B       	jr	l_player_check_map_00110
1995  0787              l_player_check_map_00105:
1996  0787  CD A3 07    	call	_player_pick_item
1997  078A  21 00 00    	ld	hl,_sprite_curr_index
1998  078D  34          	inc	(hl)
1999  078E  CD A3 07    	call	_player_pick_item
2000  0791  21 00 00    	ld	hl,_sprite_curr_index
2001  0794  7E          	ld	a, (hl)
2002  0795  C6 0F       	add	a,0x0f
2003  0797  77          	ld	(hl), a
2004  0798  CD A3 07    	call	_player_pick_item
2005  079B  21 00 00    	ld	hl,_sprite_curr_index
2006  079E  34          	inc	(hl)
2007  079F  CD A3 07    	call	_player_pick_item
2008  07A2              l_player_check_map_00110:
2009  07A2  C9          	ret
2010  07A3              	SECTION code_compiler
2011  07A3              ;	---------------------------------
2012  07A3              ; Function player_pick_item
2013  07A3              ; ---------------------------------
2014  07A3              _player_pick_item:
2015  07A3  CD 00 00    	call	___sdcc_enter_ix
2016  07A6  3B          	dec	sp
2017  07A7  01 00 00    	ld	bc,_scr_map+0
2018  07AA  2A 00 00    	ld	hl,(_sprite_curr_index)
2019  07AD  26 00       	ld	h,0x00
2020  07AF  09          	add	hl,bc
2021  07B0  7E          	ld	a,(hl)
2022  07B1  DD 77 FF    	ld	(ix-1),a
2023  07B4  D6 24       	sub	a,0x24
2024  07B6  DA AB 09    	jp	C, l_player_pick_item_00131
2025  07B9  3E 2F       	ld	a,0x2f
2026  07BB  DD 96 FF    	sub	a,(ix-1)
2027  07BE  DA AB 09    	jp	C, l_player_pick_item_00131
2028  07C1  CD 00 00    	call	_ay_reset
2029  07C4  79          	ld	a, c
2030  07C5  21 00 00    	ld	hl,_sprite_curr_index
2031  07C8  86          	add	a, (hl)
2032  07C9  4F          	ld	c, a
2033  07CA  78          	ld	a, b
2034  07CB  CE 00       	adc	a,0x00
2035  07CD  47          	ld	b, a
2036  07CE  5E          	ld	e, (hl)
2037  07CF  16 00       	ld	d,0x00
2038  07D1  C5          	push	bc
2039  07D2  EB          	ex	de,hl
2040  07D3  CD 00 00    	call	_game_match_back
2041  07D6  C1          	pop	bc
2042  07D7  7D          	ld	a,l
2043  07D8  02          	ld	(bc), a
2044  07D9  2A 00 00    	ld	hl,(_sprite_curr_index)
2045  07DC  26 00       	ld	h,0x00
2046  07DE  CD 00 00    	call	_game_obj_set
2047  07E1  3A 00 00    	ld	a,(_sprite_curr_index)
2048  07E4  07          	rlca
2049  07E5  07          	rlca
2050  07E6  07          	rlca
2051  07E7  07          	rlca
2052  07E8  E6 0F       	and	a,0x0f
2053  07EA  07          	rlca
2054  07EB  07          	rlca
2055  07EC  07          	rlca
2056  07ED  07          	rlca
2057  07EE  E6 F0       	and	a,0xf0
2058  07F0  32 00 00    	ld	(_s_lin1),a
2059  07F3  3A 00 00    	ld	a,(_sprite_curr_index)
2060  07F6  E6 0F       	and	a,0x0f
2061  07F8  87          	add	a, a
2062  07F9  32 00 00    	ld	(_s_col1),a
2063  07FC  21 00 00    	ld	hl,0x0000
2064  07FF  E5          	push	hl
2065  0800  21 84 03    	ld	hl,0x0384
2066  0803  E5          	push	hl
2067  0804  F5          	push	af
2068  0805  33          	inc	sp
2069  0806  3A 00 00    	ld	a,(_s_lin1)
2070  0809  F5          	push	af
2071  080A  33          	inc	sp
2072  080B  CD 00 00    	call	_spr_add_anim
2073  080E  F1          	pop	af
2074  080F  F1          	pop	af
2075  0810  F1          	pop	af
2076  0811  DD 7E FF    	ld	a,(ix-1)
2077  0814  D6 24       	sub	a,0x24
2078  0816  DA AB 09    	jp	C, l_player_pick_item_00131
2079  0819  3E 2F       	ld	a,0x2f
2080  081B  DD 96 FF    	sub	a,(ix-1)
2081  081E  DA AB 09    	jp	C, l_player_pick_item_00131
2082  0821  DD 7E FF    	ld	a,(ix-1)
2083  0824  C6 DC       	add	a,0xdc
2084  0826  4F          	ld	c, a
2085  0827  06 00       	ld	b,0x00
2086  0829  21 30 08    	ld	hl,l_player_pick_item_00177
2087  082C  09          	add	hl, bc
2088  082D  09          	add	hl, bc
2089  082E  09          	add	hl, bc
2090  082F  E9          	jp	(hl)
2091  0830              l_player_pick_item_00177:
2092  0830  C3 54 08    	jp	l_player_pick_item_00101
2093  0833  C3 6A 08    	jp	l_player_pick_item_00102
2094  0836  C3 80 08    	jp	l_player_pick_item_00103
2095  0839  C3 96 08    	jp	l_player_pick_item_00104
2096  083C  C3 AC 08    	jp	l_player_pick_item_00105
2097  083F  C3 E9 08    	jp	l_player_pick_item_00109
2098  0842  C3 0B 09    	jp	l_player_pick_item_00112
2099  0845  C3 2D 09    	jp	l_player_pick_item_00115
2100  0848  C3 4D 09    	jp	l_player_pick_item_00118
2101  084B  C3 6D 09    	jp	l_player_pick_item_00121
2102  084E  C3 8D 09    	jp	l_player_pick_item_00124
2103  0851  C3 D5 08    	jp	l_player_pick_item_00108
2104  0854              l_player_pick_item_00101:
2105  0854  21 00 00    	ld	hl,_ay_fx_06_efecto
2106  0857  E5          	push	hl
2107  0858  21 01 06    	ld	hl,0x0601
2108  085B  E5          	push	hl
2109  085C  CD 00 00    	call	_ay_song_play
2110  085F  21 00 00    	ld	hl,_player_keys
2111  0862  36 01       	ld	(hl),0x01
2112  0864  CD 00 00    	call	_game_update_stats
2113  0867  C3 AB 09    	jp	l_player_pick_item_00131
2114  086A              l_player_pick_item_00102:
2115  086A  21 00 00    	ld	hl,_ay_fx_06_efecto
2116  086D  E5          	push	hl
2117  086E  21 01 06    	ld	hl,0x0601
2118  0871  E5          	push	hl
2119  0872  CD 00 00    	call	_ay_song_play
2120  0875  21 01 00    	ld	hl, +(_player_keys + 0x0001)
2121  0878  36 01       	ld	(hl),0x01
2122  087A  CD 00 00    	call	_game_update_stats
2123  087D  C3 AB 09    	jp	l_player_pick_item_00131
2124  0880              l_player_pick_item_00103:
2125  0880  21 00 00    	ld	hl,_ay_fx_06_efecto
2126  0883  E5          	push	hl
2127  0884  21 01 06    	ld	hl,0x0601
2128  0887  E5          	push	hl
2129  0888  CD 00 00    	call	_ay_song_play
2130  088B  21 02 00    	ld	hl, +(_player_keys + 0x0002)
2131  088E  36 01       	ld	(hl),0x01
2132  0890  CD 00 00    	call	_game_update_stats
2133  0893  C3 AB 09    	jp	l_player_pick_item_00131
2134  0896              l_player_pick_item_00104:
2135  0896  21 00 00    	ld	hl,_ay_fx_06_efecto
2136  0899  E5          	push	hl
2137  089A  21 01 06    	ld	hl,0x0601
2138  089D  E5          	push	hl
2139  089E  CD 00 00    	call	_ay_song_play
2140  08A1  21 03 00    	ld	hl, +(_player_keys + 0x0003)
2141  08A4  36 01       	ld	(hl),0x01
2142  08A6  CD 00 00    	call	_game_update_stats
2143  08A9  C3 AB 09    	jp	l_player_pick_item_00131
2144  08AC              l_player_pick_item_00105:
2145  08AC  21 00 00    	ld	hl,_ay_fx_04_coin
2146  08AF  E5          	push	hl
2147  08B0  21 01 04    	ld	hl,0x0401
2148  08B3  E5          	push	hl
2149  08B4  CD 00 00    	call	_ay_song_play
2150  08B7  21 01 00    	ld	hl,0x0001
2151  08BA  CD 75 0C    	call	_player_score_add
2152  08BD  21 00 00    	ld	hl,_player_coins
2153  08C0  7E          	ld	a,(hl)
2154  08C1  3C          	inc	a
2155  08C2  77          	ld	(hl),a
2156  08C3  D6 64       	sub	a,0x64
2157  08C5  20 08       	jr	NZ,l_player_pick_item_00107
2158  08C7  CD 7C 05    	call	_player_1up
2159  08CA  21 00 00    	ld	hl,_player_coins
2160  08CD  36 00       	ld	(hl),0x00
2161  08CF              l_player_pick_item_00107:
2162  08CF  CD 00 00    	call	_game_update_stats
2163  08D2  C3 AB 09    	jp	l_player_pick_item_00131
2164  08D5              l_player_pick_item_00108:
2165  08D5  21 00 00    	ld	hl,_ay_fx_04_magia1
2166  08D8  E5          	push	hl
2167  08D9  21 01 04    	ld	hl,0x0401
2168  08DC  E5          	push	hl
2169  08DD  CD 00 00    	call	_ay_song_play
2170  08E0  21 0A 00    	ld	hl,0x000a
2171  08E3  CD 75 0C    	call	_player_score_add
2172  08E6  C3 AB 09    	jp	l_player_pick_item_00131
2173  08E9              l_player_pick_item_00109:
2174  08E9  21 00 00    	ld	hl,_ay_fx_06_efecto
2175  08EC  E5          	push	hl
2176  08ED  21 01 06    	ld	hl,0x0601
2177  08F0  E5          	push	hl
2178  08F1  CD 00 00    	call	_ay_song_play
2179  08F4  21 00 00    	ld	hl,_player_str
2180  08F7  34          	inc	(hl)
2181  08F8  21 00 00    	ld	hl,_player_max_vita
2182  08FB  7E          	ld	a, (hl)
2183  08FC  D6 C8       	sub	a,0xc8
2184  08FE  D2 AB 09    	jp	NC, l_player_pick_item_00131
2185  0901  7E          	ld	a, (hl)
2186  0902  C6 0A       	add	a,0x0a
2187  0904  77          	ld	(hl), a
2188  0905  CD 00 00    	call	_game_update_stats
2189  0908  C3 AB 09    	jp	l_player_pick_item_00131
2190  090B              l_player_pick_item_00112:
2191  090B  21 00 00    	ld	hl,_ay_fx_06_efecto
2192  090E  E5          	push	hl
2193  090F  21 01 06    	ld	hl,0x0601
2194  0912  E5          	push	hl
2195  0913  CD 00 00    	call	_ay_song_play
2196  0916  21 00 00    	ld	hl,_player_str
2197  0919  34          	inc	(hl)
2198  091A  21 00 00    	ld	hl,_player_max_vita
2199  091D  7E          	ld	a, (hl)
2200  091E  D6 C8       	sub	a,0xc8
2201  0920  D2 AB 09    	jp	NC, l_player_pick_item_00131
2202  0923  7E          	ld	a, (hl)
2203  0924  C6 0A       	add	a,0x0a
2204  0926  77          	ld	(hl), a
2205  0927  CD 00 00    	call	_game_update_stats
2206  092A  C3 AB 09    	jp	l_player_pick_item_00131
2207  092D              l_player_pick_item_00115:
2208  092D  21 00 00    	ld	hl,_ay_fx_06_efecto
2209  0930  E5          	push	hl
2210  0931  21 01 06    	ld	hl,0x0601
2211  0934  E5          	push	hl
2212  0935  CD 00 00    	call	_ay_song_play
2213  0938  21 00 00    	ld	hl,_player_str
2214  093B  34          	inc	(hl)
2215  093C  21 00 00    	ld	hl,_player_max_vita
2216  093F  7E          	ld	a, (hl)
2217  0940  D6 C8       	sub	a,0xc8
2218  0942  30 67       	jr	NC,l_player_pick_item_00131
2219  0944  7E          	ld	a, (hl)
2220  0945  C6 0A       	add	a,0x0a
2221  0947  77          	ld	(hl), a
2222  0948  CD 00 00    	call	_game_update_stats
2223  094B  18 5E       	jr	l_player_pick_item_00131
2224  094D              l_player_pick_item_00118:
2225  094D  21 00 00    	ld	hl,_ay_fx_06_efecto
2226  0950  E5          	push	hl
2227  0951  21 01 06    	ld	hl,0x0601
2228  0954  E5          	push	hl
2229  0955  CD 00 00    	call	_ay_song_play
2230  0958  21 00 00    	ld	hl,_player_int
2231  095B  34          	inc	(hl)
2232  095C  21 00 00    	ld	hl,_player_max_mana
2233  095F  7E          	ld	a, (hl)
2234  0960  D6 C8       	sub	a,0xc8
2235  0962  30 47       	jr	NC,l_player_pick_item_00131
2236  0964  7E          	ld	a, (hl)
2237  0965  C6 0A       	add	a,0x0a
2238  0967  77          	ld	(hl), a
2239  0968  CD 00 00    	call	_game_update_stats
2240  096B  18 3E       	jr	l_player_pick_item_00131
2241  096D              l_player_pick_item_00121:
2242  096D  21 00 00    	ld	hl,_ay_fx_06_efecto
2243  0970  E5          	push	hl
2244  0971  21 01 06    	ld	hl,0x0601
2245  0974  E5          	push	hl
2246  0975  CD 00 00    	call	_ay_song_play
2247  0978  21 00 00    	ld	hl,_player_int
2248  097B  34          	inc	(hl)
2249  097C  21 00 00    	ld	hl,_player_max_mana
2250  097F  7E          	ld	a, (hl)
2251  0980  D6 C8       	sub	a,0xc8
2252  0982  30 27       	jr	NC,l_player_pick_item_00131
2253  0984  7E          	ld	a, (hl)
2254  0985  C6 0A       	add	a,0x0a
2255  0987  77          	ld	(hl), a
2256  0988  CD 00 00    	call	_game_update_stats
2257  098B  18 1E       	jr	l_player_pick_item_00131
2258  098D              l_player_pick_item_00124:
2259  098D  21 00 00    	ld	hl,_ay_fx_06_efecto
2260  0990  E5          	push	hl
2261  0991  21 01 06    	ld	hl,0x0601
2262  0994  E5          	push	hl
2263  0995  CD 00 00    	call	_ay_song_play
2264  0998  21 00 00    	ld	hl,_player_int
2265  099B  34          	inc	(hl)
2266  099C  21 00 00    	ld	hl,_player_max_mana
2267  099F  7E          	ld	a, (hl)
2268  09A0  D6 C8       	sub	a,0xc8
2269  09A2  30 07       	jr	NC,l_player_pick_item_00131
2270  09A4  7E          	ld	a, (hl)
2271  09A5  C6 0A       	add	a,0x0a
2272  09A7  77          	ld	(hl), a
2273  09A8  CD 00 00    	call	_game_update_stats
2274  09AB              l_player_pick_item_00131:
2275  09AB  33          	inc	sp
2276  09AC  DD E1       	pop	ix
2277  09AE  C9          	ret
2278  09AF              	SECTION code_compiler
2279  09AF              ;	---------------------------------
2280  09AF              ; Function player_hit_platform
2281  09AF              ; ---------------------------------
2282  09AF              _player_hit_platform:
2283  09AF  CD 00 00    	call	___sdcc_enter_ix
2284  09B2  3B          	dec	sp
2285  09B3  3A 00 00    	ld	a,(_player_hit_lin)
2286  09B6  B7          	or	a, a
2287  09B7  C2 40 0C    	jp	NZ, l_player_hit_platform_00145
2288  09BA  21 07 00    	ld	hl,+(_lin + 0x0007)
2289  09BD  4E          	ld	c, (hl)
2290  09BE  3E 10       	ld	a,0x10
2291  09C0  91          	sub	a, c
2292  09C1  D2 40 0C    	jp	NC, l_player_hit_platform_00145
2293  09C4  01 00 00    	ld	bc,_scr_map
2294  09C7  2A 00 00    	ld	hl,(_index1)
2295  09CA  09          	add	hl,bc
2296  09CB  7E          	ld	a,(hl)
2297  09CC  D6 45       	sub	a,0x45
2298  09CE  DA 40 0C    	jp	C, l_player_hit_platform_00145
2299  09D1  2A 00 00    	ld	hl,(_curr_time)
2300  09D4  22 0E 00    	ld	(_spr_timer + 0x000e),hl
2301  09D7  3A 07 00    	ld	a,(_lin + 0x0007)
2302  09DA  06 00       	ld	b,0x00
2303  09DC  C6 F8       	add	a,0xf8
2304  09DE  4F          	ld	c, a
2305  09DF  78          	ld	a, b
2306  09E0  CE FF       	adc	a,0xff
2307  09E2  5F          	ld	e, a
2308  09E3  06 04       	ld	b,0x04
2309  09E5              l_player_hit_platform_00252:
2310  09E5  CB 2B       	sra	e
2311  09E7  CB 19       	rr	c
2312  09E9  10 FA       	djnz	l_player_hit_platform_00252
2313  09EB  79          	ld	a, c
2314  09EC  07          	rlca
2315  09ED  07          	rlca
2316  09EE  07          	rlca
2317  09EF  07          	rlca
2318  09F0  E6 F0       	and	a,0xf0
2319  09F2  C6 08       	add	a,0x08
2320  09F4  32 00 00    	ld	(_player_hit_lin),a
2321  09F7  21 07 00    	ld	hl,+(_col + 0x0007)
2322  09FA  4E          	ld	c, (hl)
2323  09FB  CB 41       	bit	0, c
2324  09FD  20 06       	jr	NZ,l_player_hit_platform_00111
2325  09FF  21 00 00    	ld	hl,_player_hit_col
2326  0A02  71          	ld	(hl), c
2327  0A03  18 2D       	jr	l_player_hit_platform_00112
2328  0A05              l_player_hit_platform_00111:
2329  0A05  21 07 00    	ld	hl,+(_state + 0x0007)
2330  0A08  5E          	ld	e, (hl)
2331  0A09  41          	ld	b, c
2332  0A0A  04          	inc	b
2333  0A0B  0D          	dec	c
2334  0A0C  CB 5B       	bit	3, e
2335  0A0E  28 12       	jr	Z,l_player_hit_platform_00108
2336  0A10  3A 00 00    	ld	a,(_g_player_hit_right)
2337  0A13  B7          	or	a, a
2338  0A14  28 06       	jr	Z,l_player_hit_platform_00102
2339  0A16  21 00 00    	ld	hl,_player_hit_col
2340  0A19  70          	ld	(hl), b
2341  0A1A  18 16       	jr	l_player_hit_platform_00112
2342  0A1C              l_player_hit_platform_00102:
2343  0A1C  21 00 00    	ld	hl,_player_hit_col
2344  0A1F  71          	ld	(hl), c
2345  0A20  18 10       	jr	l_player_hit_platform_00112
2346  0A22              l_player_hit_platform_00108:
2347  0A22  3A 00 00    	ld	a,(_g_player_hit_left)
2348  0A25  B7          	or	a, a
2349  0A26  28 06       	jr	Z,l_player_hit_platform_00105
2350  0A28  21 00 00    	ld	hl,_player_hit_col
2351  0A2B  71          	ld	(hl), c
2352  0A2C  18 04       	jr	l_player_hit_platform_00112
2353  0A2E              l_player_hit_platform_00105:
2354  0A2E  21 00 00    	ld	hl,_player_hit_col
2355  0A31  70          	ld	(hl), b
2356  0A32              l_player_hit_platform_00112:
2357  0A32  2A 00 00    	ld	hl,(_index1)
2358  0A35  01 00 00    	ld	bc,_scr_map
2359  0A38  09          	add	hl,bc
2360  0A39  7E          	ld	a,(hl)
2361  0A3A  FE 4D       	cp	a,0x4d
2362  0A3C  20 4A       	jr	NZ,l_player_hit_platform_00114
2363  0A3E  E5          	push	hl
2364  0A3F  2A 00 00    	ld	hl,(_index1)
2365  0A42  CD 00 00    	call	_game_match_back
2366  0A45  C1          	pop	bc
2367  0A46  7D          	ld	a,l
2368  0A47  02          	ld	(bc), a
2369  0A48  2A 00 00    	ld	hl,(_index1)
2370  0A4B  CD 00 00    	call	_game_obj_set
2371  0A4E  21 00 00    	ld	hl,_ay_fx_04_explosion
2372  0A51  E5          	push	hl
2373  0A52  21 01 04    	ld	hl,0x0401
2374  0A55  E5          	push	hl
2375  0A56  CD 00 00    	call	_ay_song_play
2376  0A59  21 00 00    	ld	hl,_index1
2377  0A5C  7E          	ld	a, (hl)
2378  0A5D  E6 0F       	and	a,0x0f
2379  0A5F  87          	add	a, a
2380  0A60  57          	ld	d, a
2381  0A61  4E          	ld	c, (hl)
2382  0A62  23          	inc	hl
2383  0A63  5E          	ld	e, (hl)
2384  0A64  06 04       	ld	b,0x04
2385  0A66  79          	ld	a,c
2386  0A67              l_player_hit_platform_00258:
2387  0A67  CB 3B       	srl	e
2388  0A69  1F          	rra
2389  0A6A  10 FB       	djnz	l_player_hit_platform_00258
2390  0A6C  07          	rlca
2391  0A6D  07          	rlca
2392  0A6E  07          	rlca
2393  0A6F  07          	rlca
2394  0A70  E6 F0       	and	a,0xf0
2395  0A72  47          	ld	b, a
2396  0A73  21 00 00    	ld	hl,0x0000
2397  0A76  E5          	push	hl
2398  0A77  21 87 03    	ld	hl,0x0387
2399  0A7A  E5          	push	hl
2400  0A7B  58          	ld	e,b
2401  0A7C  D5          	push	de
2402  0A7D  CD 00 00    	call	_spr_add_anim
2403  0A80  F1          	pop	af
2404  0A81  F1          	pop	af
2405  0A82  F1          	pop	af
2406  0A83  2E 01       	ld	l,0x01
2407  0A85  C3 42 0C    	jp	l_player_hit_platform_00148
2408  0A88              l_player_hit_platform_00114:
2409  0A88  FE 5A       	cp	a,0x5a
2410  0A8A  28 05       	jr	Z,l_player_hit_platform_00141
2411  0A8C  D6 5D       	sub	a,0x5d
2412  0A8E  C2 2C 0C    	jp	NZ,l_player_hit_platform_00142
2413  0A91              l_player_hit_platform_00141:
2414  0A91  3A 00 00    	ld	a,(_game_boss)
2415  0A94  B7          	or	a, a
2416  0A95  28 0B       	jr	Z,l_player_hit_platform_00174
2417  0A97  3A 00 00    	ld	a,(_game_mush_count)
2418  0A9A  B7          	or	a, a
2419  0A9B  28 05       	jr	Z,l_player_hit_platform_00174
2420  0A9D  2E 00       	ld	l,0x00
2421  0A9F  C3 42 0C    	jp	l_player_hit_platform_00148
2422  0AA2              l_player_hit_platform_00174:
2423  0AA2  DD 36 FF 00 	ld	(ix-1),0x00
2424  0AA6              l_player_hit_platform_00138:
2425  0AA6  DD 7E FF    	ld	a,(ix-1)
2426  0AA9  D6 07       	sub	a,0x07
2427  0AAB  D2 2C 0C    	jp	NC, l_player_hit_platform_00142
2428  0AAE  3E 00       	ld	a, +((_mush_index) & 0xFF)
2429  0AB0  DD 86 FF    	add	a,(ix-1)
2430  0AB3  6F          	ld	l, a
2431  0AB4  3E 00       	ld	a, +((_mush_index) / 256)
2432  0AB6  CE 00       	adc	a,0x00
2433  0AB8  67          	ld	h, a
2434  0AB9  4E          	ld	c, (hl)
2435  0ABA  06 00       	ld	b,0x00
2436  0ABC  2A 00 00    	ld	hl,(_index1)
2437  0ABF  AF          	xor	a,a
2438  0AC0  ED 42       	sbc	hl,bc
2439  0AC2  C2 26 0C    	jp	NZ,l_player_hit_platform_00137
2440  0AC5  3A 07 00    	ld	a,(_lin + 0x0007)
2441  0AC8  07          	rlca
2442  0AC9  07          	rlca
2443  0ACA  07          	rlca
2444  0ACB  07          	rlca
2445  0ACC  E6 0F       	and	a,0x0f
2446  0ACE  07          	rlca
2447  0ACF  07          	rlca
2448  0AD0  07          	rlca
2449  0AD1  07          	rlca
2450  0AD2  E6 F0       	and	a,0xf0
2451  0AD4  C6 E0       	add	a,0xe0
2452  0AD6  32 00 00    	ld	(_s_lin1),a
2453  0AD9  3A 07 00    	ld	a,(_col + 0x0007)
2454  0ADC  CB 3F       	srl	a
2455  0ADE  87          	add	a, a
2456  0ADF  32 00 00    	ld	(_s_col1),a
2457  0AE2  0E 00       	ld	c,0x00
2458  0AE4              l_player_hit_platform_00120:
2459  0AE4  79          	ld	a, c
2460  0AE5  D6 07       	sub	a,0x07
2461  0AE7  30 18       	jr	NC,l_player_hit_platform_00122
2462  0AE9  06 00       	ld	b,0x00
2463  0AEB  21 00 00    	ld	hl,_mush_index
2464  0AEE  09          	add	hl, bc
2465  0AEF  46          	ld	b, (hl)
2466  0AF0  1E 00       	ld	e,0x00
2467  0AF2  21 00 00    	ld	hl,_index1
2468  0AF5  7E          	ld	a, (hl)
2469  0AF6  90          	sub	a, b
2470  0AF7  20 05       	jr	NZ,l_player_hit_platform_00264
2471  0AF9  23          	inc	hl
2472  0AFA  7E          	ld	a, (hl)
2473  0AFB  93          	sub	a, e
2474  0AFC  28 03       	jr	Z,l_player_hit_platform_00122
2475  0AFE              l_player_hit_platform_00264:
2476  0AFE  0C          	inc	c
2477  0AFF  18 E3       	jr	l_player_hit_platform_00120
2478  0B01              l_player_hit_platform_00122:
2479  0B01  06 00       	ld	b,0x00
2480  0B03  21 00 00    	ld	hl,_mush_class
2481  0B06  09          	add	hl, bc
2482  0B07  7E          	ld	a, (hl)
2483  0B08  FE 79       	cp	a,0x79
2484  0B0A  28 18       	jr	Z,l_player_hit_platform_00123
2485  0B0C  FE 7A       	cp	a,0x7a
2486  0B0E  28 2F       	jr	Z,l_player_hit_platform_00124
2487  0B10  FE 7B       	cp	a,0x7b
2488  0B12  28 5F       	jr	Z,l_player_hit_platform_00126
2489  0B14  FE 7C       	cp	a,0x7c
2490  0B16  28 41       	jr	Z,l_player_hit_platform_00125
2491  0B18  FE 7D       	cp	a,0x7d
2492  0B1A  CA A7 0B    	jp	Z,l_player_hit_platform_00128
2493  0B1D  D6 7E       	sub	a,0x7e
2494  0B1F  28 6C       	jr	Z,l_player_hit_platform_00127
2495  0B21  C3 BF 0B    	jp	l_player_hit_platform_00129
2496  0B24              l_player_hit_platform_00123:
2497  0B24  2E 02       	ld	l,0x02
2498  0B26  CD 00 00    	call	_zx_border_fastcall
2499  0B29  3A 00 00    	ld	a,(_s_col1)
2500  0B2C  21 06 FF    	ld	hl,0xff06
2501  0B2F  E5          	push	hl
2502  0B30  F5          	push	af
2503  0B31  33          	inc	sp
2504  0B32  3A 00 00    	ld	a,(_s_lin1)
2505  0B35  F5          	push	af
2506  0B36  33          	inc	sp
2507  0B37  CD 00 00    	call	_enemy_init
2508  0B3A  F1          	pop	af
2509  0B3B  F1          	pop	af
2510  0B3C  C3 BF 0B    	jp	l_player_hit_platform_00129
2511  0B3F              l_player_hit_platform_00124:
2512  0B3F  2E 02       	ld	l,0x02
2513  0B41  CD 00 00    	call	_zx_border_fastcall
2514  0B44  3A 00 00    	ld	a,(_s_col1)
2515  0B47  21 06 01    	ld	hl,0x0106
2516  0B4A  E5          	push	hl
2517  0B4B  F5          	push	af
2518  0B4C  33          	inc	sp
2519  0B4D  3A 00 00    	ld	a,(_s_lin1)
2520  0B50  F5          	push	af
2521  0B51  33          	inc	sp
2522  0B52  CD 00 00    	call	_enemy_init
2523  0B55  F1          	pop	af
2524  0B56  F1          	pop	af
2525  0B57  18 66       	jr	l_player_hit_platform_00129
2526  0B59              l_player_hit_platform_00125:
2527  0B59  2E 01       	ld	l,0x01
2528  0B5B  CD 00 00    	call	_zx_border_fastcall
2529  0B5E  3A 00 00    	ld	a,(_s_col1)
2530  0B61  21 07 01    	ld	hl,0x0107
2531  0B64  E5          	push	hl
2532  0B65  F5          	push	af
2533  0B66  33          	inc	sp
2534  0B67  3A 00 00    	ld	a,(_s_lin1)
2535  0B6A  F5          	push	af
2536  0B6B  33          	inc	sp
2537  0B6C  CD 00 00    	call	_enemy_init
2538  0B6F  F1          	pop	af
2539  0B70  F1          	pop	af
2540  0B71  18 4C       	jr	l_player_hit_platform_00129
2541  0B73              l_player_hit_platform_00126:
2542  0B73  2E 01       	ld	l,0x01
2543  0B75  CD 00 00    	call	_zx_border_fastcall
2544  0B78  3A 00 00    	ld	a,(_s_col1)
2545  0B7B  21 07 FF    	ld	hl,0xff07
2546  0B7E  E5          	push	hl
2547  0B7F  F5          	push	af
2548  0B80  33          	inc	sp
2549  0B81  3A 00 00    	ld	a,(_s_lin1)
2550  0B84  F5          	push	af
2551  0B85  33          	inc	sp
2552  0B86  CD 00 00    	call	_enemy_init
2553  0B89  F1          	pop	af
2554  0B8A  F1          	pop	af
2555  0B8B  18 32       	jr	l_player_hit_platform_00129
2556  0B8D              l_player_hit_platform_00127:
2557  0B8D  2E 04       	ld	l,0x04
2558  0B8F  CD 00 00    	call	_zx_border_fastcall
2559  0B92  3A 00 00    	ld	a,(_s_col1)
2560  0B95  21 08 01    	ld	hl,0x0108
2561  0B98  E5          	push	hl
2562  0B99  F5          	push	af
2563  0B9A  33          	inc	sp
2564  0B9B  3A 00 00    	ld	a,(_s_lin1)
2565  0B9E  F5          	push	af
2566  0B9F  33          	inc	sp
2567  0BA0  CD 00 00    	call	_enemy_init
2568  0BA3  F1          	pop	af
2569  0BA4  F1          	pop	af
2570  0BA5  18 18       	jr	l_player_hit_platform_00129
2571  0BA7              l_player_hit_platform_00128:
2572  0BA7  2E 04       	ld	l,0x04
2573  0BA9  CD 00 00    	call	_zx_border_fastcall
2574  0BAC  3A 00 00    	ld	a,(_s_col1)
2575  0BAF  21 08 FF    	ld	hl,0xff08
2576  0BB2  E5          	push	hl
2577  0BB3  F5          	push	af
2578  0BB4  33          	inc	sp
2579  0BB5  3A 00 00    	ld	a,(_s_lin1)
2580  0BB8  F5          	push	af
2581  0BB9  33          	inc	sp
2582  0BBA  CD 00 00    	call	_enemy_init
2583  0BBD  F1          	pop	af
2584  0BBE  F1          	pop	af
2585  0BBF              l_player_hit_platform_00129:
2586  0BBF  21 00 00    	ld	hl,_game_mush_count
2587  0BC2  34          	inc	(hl)
2588  0BC3  3A 00 00    	ld	a,(_game_boss)
2589  0BC6  B7          	or	a, a
2590  0BC7  20 5D       	jr	NZ,l_player_hit_platform_00137
2591  0BC9  3A 00 00    	ld	a,(_index1)
2592  0BCC  C6 F0       	add	a,0xf0
2593  0BCE  32 00 00    	ld	(_index0),a
2594  0BD1  3A 01 00    	ld	a,(_index1 + 1)
2595  0BD4  CE FF       	adc	a,0xff
2596  0BD6  21 01 00    	ld	hl,_index0 + 1
2597  0BD9  77          	ld	(hl), a
2598  0BDA  3E 00       	ld	a, +((_scr_map) & 0xFF)
2599  0BDC  2B          	dec	hl
2600  0BDD  86          	add	a, (hl)
2601  0BDE  4F          	ld	c, a
2602  0BDF  3E 00       	ld	a, +((_scr_map) / 256)
2603  0BE1  23          	inc	hl
2604  0BE2  8E          	adc	a, (hl)
2605  0BE3  47          	ld	b, a
2606  0BE4  C5          	push	bc
2607  0BE5  2B          	dec	hl
2608  0BE6  7E          	ld	a, (hl)
2609  0BE7  23          	inc	hl
2610  0BE8  66          	ld	h, (hl)
2611  0BE9  6F          	ld	l, a
2612  0BEA  CD 00 00    	call	_game_match_back
2613  0BED  C1          	pop	bc
2614  0BEE  7D          	ld	a,l
2615  0BEF  02          	ld	(bc), a
2616  0BF0  01 00 00    	ld	bc,_scr_map
2617  0BF3  2A 00 00    	ld	hl,(_index1)
2618  0BF6  09          	add	hl,bc
2619  0BF7  7E          	ld	a,(hl)
2620  0BF8  FE 5A       	cp	a,0x5a
2621  0BFA  4D          	ld	c,l
2622  0BFB  44          	ld	b,h
2623  0BFC  28 04       	jr	Z,l_player_hit_platform_00130
2624  0BFE  D6 5D       	sub	a,0x5d
2625  0C00  20 05       	jr	NZ,l_player_hit_platform_00131
2626  0C02              l_player_hit_platform_00130:
2627  0C02  3E 4F       	ld	a,0x4f
2628  0C04  02          	ld	(bc), a
2629  0C05  18 03       	jr	l_player_hit_platform_00132
2630  0C07              l_player_hit_platform_00131:
2631  0C07  3E 54       	ld	a,0x54
2632  0C09  02          	ld	(bc), a
2633  0C0A              l_player_hit_platform_00132:
2634  0C0A  2A 00 00    	ld	hl,(_index1)
2635  0C0D  01 F0 FF    	ld	bc,0xfff0
2636  0C10  09          	add	hl,bc
2637  0C11  CD 00 00    	call	_game_obj_set
2638  0C14  3A 00 00    	ld	a,(_s_lin1)
2639  0C17  C6 10       	add	a,0x10
2640  0C19  4F          	ld	c, a
2641  0C1A  3A 00 00    	ld	a, (_s_col1)
2642  0C1D  47          	ld	b,a
2643  0C1E  C5          	push	bc
2644  0C1F  3E 4F       	ld	a,0x4f
2645  0C21  F5          	push	af
2646  0C22  33          	inc	sp
2647  0C23  CD 00 00    	call	_NIRVANAP_drawT_callee
2648  0C26              l_player_hit_platform_00137:
2649  0C26  DD 34 FF    	inc	(ix-1)
2650  0C29  C3 A6 0A    	jp	l_player_hit_platform_00138
2651  0C2C              l_player_hit_platform_00142:
2652  0C2C  21 00 00    	ld	hl,_ay_fx_04_golpe
2653  0C2F  E5          	push	hl
2654  0C30  21 01 04    	ld	hl,0x0401
2655  0C33  E5          	push	hl
2656  0C34  CD 00 00    	call	_ay_song_play
2657  0C37  2E 01       	ld	l,0x01
2658  0C39  CD 00 00    	call	_spr_brick_anim
2659  0C3C  2E 01       	ld	l,0x01
2660  0C3E  18 02       	jr	l_player_hit_platform_00148
2661  0C40              l_player_hit_platform_00145:
2662  0C40  2E 00       	ld	l,0x00
2663  0C42              l_player_hit_platform_00148:
2664  0C42  33          	inc	sp
2665  0C43  DD E1       	pop	ix
2666  0C45  C9          	ret
2667  0C46              	SECTION code_compiler
2668  0C46              ;	---------------------------------
2669  0C46              ; Function player_hit_platform_clear
2670  0C46              ; ---------------------------------
2671  0C46              _player_hit_platform_clear:
2672  0C46  3E 04       	ld	a,0x04
2673  0C48  F5          	push	af
2674  0C49  33          	inc	sp
2675  0C4A  21 0E 00    	ld	hl, +(_spr_timer + 0x000e)
2676  0C4D  E5          	push	hl
2677  0C4E  CD 00 00    	call	_game_check_time
2678  0C51  F1          	pop	af
2679  0C52  33          	inc	sp
2680  0C53  7D          	ld	a, l
2681  0C54  B7          	or	a, a
2682  0C55  C8          	ret	Z
2683  0C56  2A FF FF    	ld	hl,(_player_hit_col - 1)
2684  0C59  3A 00 00    	ld	a,(_player_hit_lin)
2685  0C5C  6F          	ld	l,a
2686  0C5D  E5          	push	hl
2687  0C5E  CD 00 00    	call	_spr_calc_index
2688  0C61  F1          	pop	af
2689  0C62  22 00 00    	ld	(_index1),hl
2690  0C65  2E 00       	ld	l,0x00
2691  0C67  CD 00 00    	call	_spr_brick_anim
2692  0C6A  21 00 00    	ld	hl,_player_hit_lin
2693  0C6D  36 00       	ld	(hl),0x00
2694  0C6F  21 00 00    	ld	hl,_player_hit_col
2695  0C72  36 00       	ld	(hl),0x00
2696  0C74  C9          	ret
2697  0C75              	SECTION code_compiler
2698  0C75              ;	---------------------------------
2699  0C75              ; Function player_score_add
2700  0C75              ; ---------------------------------
2701  0C75              _player_score_add:
2702  0C75  ED 4B 00 00 	ld	bc,(_player_score)
2703  0C79  09          	add	hl,bc
2704  0C7A  22 00 00    	ld	(_player_score),hl
2705  0C7D  21 00 00    	ld	hl,_player_lvl
2706  0C80  7E          	ld	a, (hl)
2707  0C81  D6 14       	sub	a,0x14
2708  0C83  30 42       	jr	NC,l_player_score_add_00104
2709  0C85  01 00 00    	ld	bc,_player_lvl_table+0
2710  0C88  6E          	ld	l,(hl)
2711  0C89  26 00       	ld	h,0x00
2712  0C8B  29          	add	hl, hl
2713  0C8C  09          	add	hl, bc
2714  0C8D  4E          	ld	c, (hl)
2715  0C8E  23          	inc	hl
2716  0C8F  46          	ld	b, (hl)
2717  0C90  21 00 00    	ld	hl,_player_score
2718  0C93  7E          	ld	a, (hl)
2719  0C94  91          	sub	a, c
2720  0C95  23          	inc	hl
2721  0C96  7E          	ld	a, (hl)
2722  0C97  98          	sbc	a, b
2723  0C98  38 2D       	jr	C,l_player_score_add_00104
2724  0C9A  21 00 00    	ld	hl,_player_lvl
2725  0C9D  34          	inc	(hl)
2726  0C9E  CD 00 00    	call	_game_update_stats
2727  0CA1  CD 00 00    	call	_spr_flatten
2728  0CA4  21 06 00    	ld	hl,___str_1
2729  0CA7  E5          	push	hl
2730  0CA8  21 0C 0C    	ld	hl,0x0c0c
2731  0CAB  E5          	push	hl
2732  0CAC  CD 00 00    	call	_zx_print_str
2733  0CAF  AF          	xor	a, a
2734  0CB0  F5          	push	af
2735  0CB1  33          	inc	sp
2736  0CB2  21 3C 00    	ld	hl,0x003c
2737  0CB5  E5          	push	hl
2738  0CB6  21 0C 15    	ld	hl,0x150c
2739  0CB9  E5          	push	hl
2740  0CBA  3E 0C       	ld	a,0x0c
2741  0CBC  F5          	push	af
2742  0CBD  33          	inc	sp
2743  0CBE  CD 00 00    	call	_game_colour_message
2744  0CC1  F1          	pop	af
2745  0CC2  F1          	pop	af
2746  0CC3  F1          	pop	af
2747  0CC4  CD 00 00    	call	_spr_unflatten
2748  0CC7              l_player_score_add_00104:
2749  0CC7  3A 00 00    	ld	a,(_game_score_top)
2750  0CCA  21 00 00    	ld	hl,_player_score
2751  0CCD  96          	sub	a, (hl)
2752  0CCE  3A 01 00    	ld	a,(_game_score_top + 1)
2753  0CD1  23          	inc	hl
2754  0CD2  9E          	sbc	a, (hl)
2755  0CD3  30 06       	jr	NC,l_player_score_add_00106
2756  0CD5  2A 00 00    	ld	hl,(_player_score)
2757  0CD8  22 00 00    	ld	(_game_score_top),hl
2758  0CDB              l_player_score_add_00106:
2759  0CDB  CD 00 00    	call	_game_print_score
2760  0CDE  C9          	ret
2761  0CDF              	SECTION rodata_compiler
2762  0006              ___str_1:
2763  0006  4C 45 56 45 4C 20 55 50 21 
                        	DEFM "LEVEL UP!"
2764  000F  00          	DEFB 0x00
2765  0010              	SECTION code_compiler
2766  0CDF              ;	---------------------------------
2767  0CDF              ; Function player_check_floor
2768  0CDF              ; ---------------------------------
2769  0CDF              _player_check_floor:
2770  0CDF  CD 00 00    	call	___sdcc_enter_ix
2771  0CE2  F5          	push	af
2772  0CE3  F5          	push	af
2773  0CE4  F5          	push	af
2774  0CE5  21 07 00    	ld	hl,+(_col + 0x0007)
2775  0CE8  56          	ld	d, (hl)
2776  0CE9  3A 07 00    	ld	a,(_lin + 0x0007)
2777  0CEC  C6 10       	add	a,0x10
2778  0CEE  5F          	ld	e, a
2779  0CEF  D5          	push	de
2780  0CF0  CD 00 00    	call	_spr_calc_index
2781  0CF3  F1          	pop	af
2782  0CF4  D1          	pop	de
2783  0CF5  E5          	push	hl
2784  0CF6  01 00 00    	ld	bc,_scr_map+0
2785  0CF9  79          	ld	a, c
2786  0CFA  DD 86 FA    	add	a,(ix-6)
2787  0CFD  DD 77 FE    	ld	(ix-2),a
2788  0D00  78          	ld	a, b
2789  0D01  DD 8E FB    	adc	a,(ix-5)
2790  0D04  DD 6E FE    	ld	l,(ix-2)
2791  0D07  DD 77 FF    	ld	(ix-1),a
2792  0D0A  67          	ld	h,a
2793  0D0B  7E          	ld	a, (hl)
2794  0D0C  DD 77 FD    	ld	(ix-3),a
2795  0D0F  E1          	pop	hl
2796  0D10  E5          	push	hl
2797  0D11  23          	inc	hl
2798  0D12  09          	add	hl,bc
2799  0D13  3A 00 00    	ld	a,(_s_lin0)
2800  0D16  D6 90       	sub	a,0x90
2801  0D18  4D          	ld	c,l
2802  0D19  44          	ld	b,h
2803  0D1A  20 26       	jr	NZ,l_player_check_floor_00108
2804  0D1C  3A 00 00    	ld	a,(_map_heigth)
2805  0D1F  C5          	push	bc
2806  0D20  F5          	push	af
2807  0D21  33          	inc	sp
2808  0D22  3A 00 00    	ld	a,(_scr_curr)
2809  0D25  F5          	push	af
2810  0D26  33          	inc	sp
2811  0D27  CD 00 00    	call	__divuchar_callee
2812  0D2A  C1          	pop	bc
2813  0D2B  7D          	ld	a,l
2814  0D2C  3C          	inc	a
2815  0D2D  32 00 00    	ld	(_tmp1),a
2816  0D30  21 00 00    	ld	hl,_map_heigth
2817  0D33  96          	sub	a, (hl)
2818  0D34  30 06       	jr	NC,l_player_check_floor_00102
2819  0D36  DD 36 FD 00 	ld	(ix-3),0x00
2820  0D3A  18 16       	jr	l_player_check_floor_00109
2821  0D3C              l_player_check_floor_00102:
2822  0D3C  DD 36 FD 48 	ld	(ix-3),0x48
2823  0D40  18 10       	jr	l_player_check_floor_00109
2824  0D42              l_player_check_floor_00108:
2825  0D42  3A 07 00    	ld	a,(_col + 0x0007)
2826  0D45  0F          	rrca
2827  0D46  38 06       	jr	C,l_player_check_floor_00105
2828  0D48  DD 36 FC 00 	ld	(ix-4),0x00
2829  0D4C  18 04       	jr	l_player_check_floor_00109
2830  0D4E              l_player_check_floor_00105:
2831  0D4E  0A          	ld	a, (bc)
2832  0D4F  DD 77 FC    	ld	(ix-4),a
2833  0D52              l_player_check_floor_00109:
2834  0D52  DD 7E FD    	ld	a,(ix-3)
2835  0D55  D6 3A       	sub	a,0x3a
2836  0D57  38 07       	jr	C,l_player_check_floor_00132
2837  0D59  DD 7E FD    	ld	a,(ix-3)
2838  0D5C  D6 60       	sub	a,0x60
2839  0D5E  38 32       	jr	C,l_player_check_floor_00128
2840  0D60              l_player_check_floor_00132:
2841  0D60  DD 7E FC    	ld	a,(ix-4)
2842  0D63  D6 3A       	sub	a,0x3a
2843  0D65  38 07       	jr	C,l_player_check_floor_00127
2844  0D67  DD 7E FC    	ld	a,(ix-4)
2845  0D6A  D6 60       	sub	a,0x60
2846  0D6C  38 24       	jr	C,l_player_check_floor_00128
2847  0D6E              l_player_check_floor_00127:
2848  0D6E  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
2849  0D71  36 02       	ld	(hl),0x02
2850  0D73  21 00 00    	ld	hl,_s_state
2851  0D76  CB CE       	set	1, (hl)
2852  0D78  2E 00       	ld	l,0x00
2853  0D7A  CD 4E 06    	call	_player_check_stairs
2854  0D7D  3A 00 00    	ld	a,(_player_onstair)
2855  0D80  B7          	or	a, a
2856  0D81  C2 20 0E    	jp	NZ, l_player_check_floor_00133
2857  0D84  3A 00 00    	ld	a,(_s_lin0)
2858  0D87  D6 90       	sub	a,0x90
2859  0D89  C2 20 0E    	jp	NZ,l_player_check_floor_00133
2860  0D8C  CD 00 00    	call	_spr_page_down
2861  0D8F  C3 20 0E    	jp	l_player_check_floor_00133
2862  0D92              l_player_check_floor_00128:
2863  0D92  C5          	push	bc
2864  0D93  3E 10       	ld	a,0x10
2865  0D95  F5          	push	af
2866  0D96  33          	inc	sp
2867  0D97  21 00 00    	ld	hl,_player_brick_time
2868  0D9A  E5          	push	hl
2869  0D9B  CD 00 00    	call	_game_check_time
2870  0D9E  F1          	pop	af
2871  0D9F  33          	inc	sp
2872  0DA0  C1          	pop	bc
2873  0DA1  7D          	ld	a,l
2874  0DA2  B7          	or	a, a
2875  0DA3  CA 20 0E    	jp	Z, l_player_check_floor_00133
2876  0DA6  2A 00 00    	ld	hl,(_curr_time)
2877  0DA9  22 00 00    	ld	(_player_brick_time),hl
2878  0DAC  DD 7E FD    	ld	a,(ix-3)
2879  0DAF  D6 40       	sub	a,0x40
2880  0DB1  20 14       	jr	NZ,l_player_check_floor_00114
2881  0DB3  E1          	pop	hl
2882  0DB4  E5          	push	hl
2883  0DB5  C5          	push	bc
2884  0DB6  CD 00 00    	call	_game_match_back
2885  0DB9  C1          	pop	bc
2886  0DBA  5D          	ld	e,l
2887  0DBB  DD 6E FE    	ld	l,(ix-2)
2888  0DBE  DD 66 FF    	ld	h,(ix-1)
2889  0DC1  73          	ld	(hl), e
2890  0DC2  C5          	push	bc
2891  0DC3  CD 25 0E    	call	_player_gasta_brick
2892  0DC6  C1          	pop	bc
2893  0DC7              l_player_check_floor_00114:
2894  0DC7  DD 7E FD    	ld	a,(ix-3)
2895  0DCA  D6 3F       	sub	a,0x3f
2896  0DCC  20 0D       	jr	NZ,l_player_check_floor_00116
2897  0DCE  DD 6E FE    	ld	l,(ix-2)
2898  0DD1  DD 66 FF    	ld	h,(ix-1)
2899  0DD4  36 40       	ld	(hl),0x40
2900  0DD6  C5          	push	bc
2901  0DD7  CD 25 0E    	call	_player_gasta_brick
2902  0DDA  C1          	pop	bc
2903  0DDB              l_player_check_floor_00116:
2904  0DDB  DD 7E FD    	ld	a,(ix-3)
2905  0DDE  D6 3E       	sub	a,0x3e
2906  0DE0  20 0D       	jr	NZ,l_player_check_floor_00118
2907  0DE2  DD 6E FE    	ld	l,(ix-2)
2908  0DE5  DD 66 FF    	ld	h,(ix-1)
2909  0DE8  36 3F       	ld	(hl),0x3f
2910  0DEA  C5          	push	bc
2911  0DEB  CD 25 0E    	call	_player_gasta_brick
2912  0DEE  C1          	pop	bc
2913  0DEF              l_player_check_floor_00118:
2914  0DEF  DD 7E FC    	ld	a,(ix-4)
2915  0DF2  D6 40       	sub	a,0x40
2916  0DF4  20 0E       	jr	NZ,l_player_check_floor_00120
2917  0DF6  E1          	pop	hl
2918  0DF7  E5          	push	hl
2919  0DF8  C5          	push	bc
2920  0DF9  CD 00 00    	call	_game_match_back
2921  0DFC  C1          	pop	bc
2922  0DFD  7D          	ld	a,l
2923  0DFE  02          	ld	(bc), a
2924  0DFF  C5          	push	bc
2925  0E00  CD 25 0E    	call	_player_gasta_brick
2926  0E03  C1          	pop	bc
2927  0E04              l_player_check_floor_00120:
2928  0E04  DD 7E FC    	ld	a,(ix-4)
2929  0E07  D6 3F       	sub	a,0x3f
2930  0E09  20 08       	jr	NZ,l_player_check_floor_00122
2931  0E0B  3E 40       	ld	a,0x40
2932  0E0D  02          	ld	(bc), a
2933  0E0E  C5          	push	bc
2934  0E0F  CD 25 0E    	call	_player_gasta_brick
2935  0E12  C1          	pop	bc
2936  0E13              l_player_check_floor_00122:
2937  0E13  DD 7E FC    	ld	a,(ix-4)
2938  0E16  D6 3E       	sub	a,0x3e
2939  0E18  20 06       	jr	NZ,l_player_check_floor_00133
2940  0E1A  3E 3F       	ld	a,0x3f
2941  0E1C  02          	ld	(bc), a
2942  0E1D  CD 25 0E    	call	_player_gasta_brick
2943  0E20              l_player_check_floor_00133:
2944  0E20  DD F9       	ld	sp, ix
2945  0E22  DD E1       	pop	ix
2946  0E24  C9          	ret
2947  0E25              	SECTION code_compiler
2948  0E25              ;	---------------------------------
2949  0E25              ; Function player_gasta_brick
2950  0E25              ; ---------------------------------
2951  0E25              _player_gasta_brick:
2952  0E25  3A 00 00    	ld	a,(_s_lin0)
2953  0E28  32 00 00    	ld	(_s_lin1),a
2954  0E2B  3A 00 00    	ld	a,(_s_col0)
2955  0E2E  32 00 00    	ld	(_s_col1),a
2956  0E31  3A 07 00    	ld	a,(_lin + 0x0007)
2957  0E34  C6 10       	add	a,0x10
2958  0E36  32 00 00    	ld	(_s_lin0),a
2959  0E39  3A 07 00    	ld	a,(_col + 0x0007)
2960  0E3C  32 00 00    	ld	(_s_col0),a
2961  0E3F  CD 00 00    	call	_spr_back_repaint
2962  0E42  3A 00 00    	ld	a,(_s_lin1)
2963  0E45  32 00 00    	ld	(_s_lin0),a
2964  0E48  3A 00 00    	ld	a,(_s_col1)
2965  0E4B  32 00 00    	ld	(_s_col0),a
2966  0E4E  C9          	ret
2967  0E4F              	SECTION code_compiler
2968  0E4F              ;	---------------------------------
2969  0E4F              ; Function player_move_jump
2970  0E4F              ; ---------------------------------
2971  0E4F              _player_move_jump:
2972  0E4F  21 00 00    	ld	hl,_game_gravity
2973  0E52  4E          	ld	c, (hl)
2974  0E53  21 00 00    	ld	hl,_player_vel_y
2975  0E56  7E          	ld	a, (hl)
2976  0E57  81          	add	a, c
2977  0E58  77          	ld	(hl), a
2978  0E59  21 00 00    	ld	hl,_sprite_on_air
2979  0E5C  36 01       	ld	(hl),0x01
2980  0E5E  3A 00 00    	ld	a,(_player_vel_inc)
2981  0E61  B7          	or	a, a
2982  0E62  28 4A       	jr	Z,l_player_move_jump_00109
2983  0E64  3A 00 00    	ld	a,(_dirs)
2984  0E67  CB 07       	rlc	a
2985  0E69  E6 01       	and	a,0x01
2986  0E6B  4F          	ld	c, a
2987  0E6C  3A 00 00    	ld	a,(_game_2buttons)
2988  0E6F  B7          	or	a, a
2989  0E70  28 06       	jr	Z,l_player_move_jump_00102
2990  0E72  79          	ld	a, c
2991  0E73  EE 01       	xor	a,0x01
2992  0E75  4F          	ld	c, a
2993  0E76  18 15       	jr	l_player_move_jump_00103
2994  0E78              l_player_move_jump_00102:
2995  0E78  CB 41       	bit	0, c
2996  0E7A  28 07       	jr	Z,l_player_move_jump_00154
2997  0E7C  21 00 00    	ld	hl,_dirs
2998  0E7F  CB 46       	bit	0, (hl)
2999  0E81  20 04       	jr	NZ,l_player_move_jump_00155
3000  0E83              l_player_move_jump_00154:
3001  0E83  0E 00       	ld	c,0x00
3002  0E85  18 02       	jr	l_player_move_jump_00156
3003  0E87              l_player_move_jump_00155:
3004  0E87  0E 01       	ld	c,0x01
3005  0E89              l_player_move_jump_00156:
3006  0E89  79          	ld	a, c
3007  0E8A  EE 01       	xor	a,0x01
3008  0E8C  4F          	ld	c, a
3009  0E8D              l_player_move_jump_00103:
3010  0E8D  79          	ld	a, c
3011  0E8E  B7          	or	a, a
3012  0E8F  28 1D       	jr	Z,l_player_move_jump_00109
3013  0E91  3A 00 00    	ld	a,(_player_vel_y1)
3014  0E94  21 00 00    	ld	hl,_player_vel_y
3015  0E97  96          	sub	a, (hl)
3016  0E98  E2 9D 0E    	jp	PO, l_player_move_jump_00259
3017  0E9B  EE 80       	xor	a,0x80
3018  0E9D              l_player_move_jump_00259:
3019  0E9D  F2 AE 0E    	jp	P, l_player_move_jump_00109
3020  0EA0  21 00 00    	ld	hl,_player_vel_y
3021  0EA3  CB 7E       	bit	7,(hl)
3022  0EA5  28 07       	jr	Z,l_player_move_jump_00109
3023  0EA7  36 00       	ld	(hl),0x00
3024  0EA9  21 00 00    	ld	hl,_player_vel_inc
3025  0EAC  36 00       	ld	(hl),0x00
3026  0EAE              l_player_move_jump_00109:
3027  0EAE  3E 78       	ld	a,0x78
3028  0EB0  21 00 00    	ld	hl,_player_vel_y
3029  0EB3  96          	sub	a, (hl)
3030  0EB4  E2 B9 0E    	jp	PO, l_player_move_jump_00260
3031  0EB7  EE 80       	xor	a,0x80
3032  0EB9              l_player_move_jump_00260:
3033  0EB9  F2 C1 0E    	jp	P, l_player_move_jump_00111
3034  0EBC  21 00 00    	ld	hl,_player_vel_y
3035  0EBF  36 78       	ld	(hl),0x78
3036  0EC1              l_player_move_jump_00111:
3037  0EC1  21 00 00    	ld	hl,_player_vel_y
3038  0EC4  7E          	ld	a, (hl)
3039  0EC5  EE 80       	xor	a,0x80
3040  0EC7  D6 08       	sub	a,0x08
3041  0EC9  30 02       	jr	NC,l_player_move_jump_00113
3042  0ECB  36 88       	ld	(hl),0x88
3043  0ECD              l_player_move_jump_00113:
3044  0ECD  3A 00 00    	ld	a,(_player_vel_y)
3045  0ED0  4F          	ld	c,a
3046  0ED1  17          	rla
3047  0ED2  9F          	sbc	a, a
3048  0ED3  47          	ld	b, a
3049  0ED4  CB 41       	bit	0,c
3050  0ED6  21 00 00    	ld	hl,_s_lin1
3051  0ED9  71          	ld	(hl),c
3052  0EDA  28 04       	jr	Z,l_player_move_jump_00115
3053  0EDC  21 00 00    	ld	hl,_s_lin1
3054  0EDF  35          	dec	(hl)
3055  0EE0              l_player_move_jump_00115:
3056  0EE0  3A 07 00    	ld	a,(_lin + 0x0007)
3057  0EE3  21 00 00    	ld	hl,_s_lin1
3058  0EE6  86          	add	a, (hl)
3059  0EE7  77          	ld	(hl), a
3060  0EE8  CB 78       	bit	7, b
3061  0EEA  28 5C       	jr	Z,l_player_move_jump_00141
3062  0EEC  21 00 00    	ld	hl,_s_state
3063  0EEF  CD 00 00    	call	_spr_set_up
3064  0EF2  3E 90       	ld	a,0x90
3065  0EF4  21 00 00    	ld	hl,_s_lin1
3066  0EF7  96          	sub	a, (hl)
3067  0EF8  30 11       	jr	NC,l_player_move_jump_00120
3068  0EFA  CD 00 00    	call	_spr_page_up
3069  0EFD  7D          	ld	a, l
3070  0EFE  B7          	or	a, a
3071  0EFF  28 05       	jr	Z,l_player_move_jump_00117
3072  0F01  2E 00       	ld	l,0x00
3073  0F03  C3 FF 0F    	jp	l_player_move_jump_00152
3074  0F06              l_player_move_jump_00117:
3075  0F06  21 00 00    	ld	hl,_s_lin1
3076  0F09  36 00       	ld	(hl),0x00
3077  0F0B              l_player_move_jump_00120:
3078  0F0B  21 07 00    	ld	hl,+(_col + 0x0007)
3079  0F0E  46          	ld	b, (hl)
3080  0F0F  C5          	push	bc
3081  0F10  33          	inc	sp
3082  0F11  3A 00 00    	ld	a,(_s_lin1)
3083  0F14  F5          	push	af
3084  0F15  33          	inc	sp
3085  0F16  CD 00 00    	call	_game_check_map
3086  0F19  F1          	pop	af
3087  0F1A  7C          	ld	a,h
3088  0F1B  B5          	or	a,l
3089  0F1C  28 21       	jr	Z,l_player_move_jump_00124
3090  0F1E  CD AF 09    	call	_player_hit_platform
3091  0F21  7D          	ld	a, l
3092  0F22  B7          	or	a, a
3093  0F23  28 12       	jr	Z,l_player_move_jump_00122
3094  0F25  3A 07 00    	ld	a,(_lin + 0x0007)
3095  0F28  07          	rlca
3096  0F29  07          	rlca
3097  0F2A  07          	rlca
3098  0F2B  07          	rlca
3099  0F2C  E6 0F       	and	a,0x0f
3100  0F2E  07          	rlca
3101  0F2F  07          	rlca
3102  0F30  07          	rlca
3103  0F31  07          	rlca
3104  0F32  E6 F0       	and	a,0xf0
3105  0F34  32 07 00    	ld	((_lin + 0x0007)),a
3106  0F37              l_player_move_jump_00122:
3107  0F37  21 00 00    	ld	hl,_player_vel_y
3108  0F3A  36 00       	ld	(hl),0x00
3109  0F3C  C3 C7 0F    	jp	l_player_move_jump_00142
3110  0F3F              l_player_move_jump_00124:
3111  0F3F  3A 00 00    	ld	a,(_s_lin1)
3112  0F42  32 07 00    	ld	((_lin + 0x0007)),a
3113  0F45  C3 C7 0F    	jp	l_player_move_jump_00142
3114  0F48              l_player_move_jump_00141:
3115  0F48  21 00 00    	ld	hl,_s_state
3116  0F4B  CD 00 00    	call	_spr_set_down
3117  0F4E  3E 90       	ld	a,0x90
3118  0F50  21 00 00    	ld	hl,_s_lin1
3119  0F53  96          	sub	a, (hl)
3120  0F54  30 11       	jr	NC,l_player_move_jump_00130
3121  0F56  CD 00 00    	call	_spr_page_down
3122  0F59  7D          	ld	a, l
3123  0F5A  B7          	or	a, a
3124  0F5B  28 05       	jr	Z,l_player_move_jump_00127
3125  0F5D  2E 00       	ld	l,0x00
3126  0F5F  C3 FF 0F    	jp	l_player_move_jump_00152
3127  0F62              l_player_move_jump_00127:
3128  0F62  21 00 00    	ld	hl,_s_lin1
3129  0F65  36 90       	ld	(hl),0x90
3130  0F67              l_player_move_jump_00130:
3131  0F67  21 07 00    	ld	hl,+(_col + 0x0007)
3132  0F6A  56          	ld	d, (hl)
3133  0F6B  3A 00 00    	ld	a,(_s_lin1)
3134  0F6E  C6 10       	add	a,0x10
3135  0F70  5F          	ld	e, a
3136  0F71  D5          	push	de
3137  0F72  CD 00 00    	call	_game_check_map
3138  0F75  F1          	pop	af
3139  0F76  7C          	ld	a,h
3140  0F77  B5          	or	a,l
3141  0F78  28 47       	jr	Z,l_player_move_jump_00138
3142  0F7A  2E 00       	ld	l,0x00
3143  0F7C  CD 4E 06    	call	_player_check_stairs
3144  0F7F  3A 00 00    	ld	a,(_player_onstair)
3145  0F82  B7          	or	a, a
3146  0F83  20 05       	jr	NZ,l_player_move_jump_00132
3147  0F85  2E 01       	ld	l,0x01
3148  0F87  CD 4E 06    	call	_player_check_stairs
3149  0F8A              l_player_move_jump_00132:
3150  0F8A  3A 00 00    	ld	a,(_player_onstair)
3151  0F8D  B7          	or	a, a
3152  0F8E  20 12       	jr	NZ,l_player_move_jump_00134
3153  0F90  3A 00 00    	ld	a,(_s_lin1)
3154  0F93  07          	rlca
3155  0F94  07          	rlca
3156  0F95  07          	rlca
3157  0F96  07          	rlca
3158  0F97  E6 0F       	and	a,0x0f
3159  0F99  07          	rlca
3160  0F9A  07          	rlca
3161  0F9B  07          	rlca
3162  0F9C  07          	rlca
3163  0F9D  E6 F0       	and	a,0xf0
3164  0F9F  32 07 00    	ld	((_lin + 0x0007)),a
3165  0FA2              l_player_move_jump_00134:
3166  0FA2  21 00 00    	ld	hl,_player_vel_y
3167  0FA5  36 00       	ld	(hl),0x00
3168  0FA7  21 00 00    	ld	hl,_s_state
3169  0FAA  7E          	ld	a,(hl)
3170  0FAB  E6 FC       	and	a,+(0xfd&0xfe)
3171  0FAD  77          	ld	(hl),a
3172  0FAE  3A 07 00    	ld	a,(_lin + 0x0007)
3173  0FB1  D6 90       	sub	a,0x90
3174  0FB3  38 03       	jr	C,l_player_move_jump_00136
3175  0FB5  CD 00 00    	call	_spr_page_down
3176  0FB8              l_player_move_jump_00136:
3177  0FB8  21 07 00    	ld	hl, +(_colint + 0x0007)
3178  0FBB  36 00       	ld	(hl),0x00
3179  0FBD  2E 01       	ld	l,0x01
3180  0FBF  18 3E       	jr	l_player_move_jump_00152
3181  0FC1              l_player_move_jump_00138:
3182  0FC1  3A 00 00    	ld	a,(_s_lin1)
3183  0FC4  32 07 00    	ld	((_lin + 0x0007)),a
3184  0FC7              l_player_move_jump_00142:
3185  0FC7  21 00 00    	ld	hl,_s_state
3186  0FCA  CB 5E       	bit	3, (hl)
3187  0FCC  20 21       	jr	NZ,l_player_move_jump_00148
3188  0FCE  21 00 00    	ld	hl,_s_state
3189  0FD1  CB 56       	bit	2, (hl)
3190  0FD3  20 1A       	jr	NZ,l_player_move_jump_00148
3191  0FD5  21 00 00    	ld	hl,_dirs
3192  0FD8  CB 56       	bit	2, (hl)
3193  0FDA  28 06       	jr	Z,l_player_move_jump_00144
3194  0FDC  21 00 00    	ld	hl,_s_state
3195  0FDF  CD 00 00    	call	_spr_set_left
3196  0FE2              l_player_move_jump_00144:
3197  0FE2  21 00 00    	ld	hl,_dirs
3198  0FE5  CB 5E       	bit	3, (hl)
3199  0FE7  28 06       	jr	Z,l_player_move_jump_00148
3200  0FE9  21 00 00    	ld	hl,_s_state
3201  0FEC  CD 00 00    	call	_spr_set_right
3202  0FEF              l_player_move_jump_00148:
3203  0FEF  CD 00 00    	call	_spr_move_horizontal
3204  0FF2  7D          	ld	a, l
3205  0FF3  B7          	or	a, a
3206  0FF4  28 07       	jr	Z,l_player_move_jump_00151
3207  0FF6  21 00 00    	ld	hl,_s_state
3208  0FF9  7E          	ld	a,(hl)
3209  0FFA  E6 F3       	and	a,+(0xf7&0xfb)
3210  0FFC  77          	ld	(hl),a
3211  0FFD              l_player_move_jump_00151:
3212  0FFD  2E 00       	ld	l,0x00
3213  0FFF              l_player_move_jump_00152:
3214  0FFF  C9          	ret
3215  1000              	SECTION code_compiler
3216  1000              ;	---------------------------------
3217  1000              ; Function player_open_door
3218  1000              ; ---------------------------------
3219  1000              _player_open_door:
3220  1000  CD 00 00    	call	___sdcc_enter_ix
3221  1003  21 00 00    	ld	hl,_ay_fx_04_pierto_abierta
3222  1006  E5          	push	hl
3223  1007  21 01 04    	ld	hl,0x0401
3224  100A  E5          	push	hl
3225  100B  CD 00 00    	call	_ay_song_play
3226  100E  0E 00       	ld	c,0x00
3227  1010  DD 7E 06    	ld	a,(ix+6)
3228  1013  D6 48       	sub	a,0x48
3229  1015  28 17       	jr	Z,l_player_open_door_00101
3230  1017  DD 7E 06    	ld	a,(ix+6)
3231  101A  D6 49       	sub	a,0x49
3232  101C  28 1F       	jr	Z,l_player_open_door_00104
3233  101E  DD 7E 06    	ld	a,(ix+6)
3234  1021  D6 4A       	sub	a,0x4a
3235  1023  28 27       	jr	Z,l_player_open_door_00107
3236  1025  DD 7E 06    	ld	a,(ix+6)
3237  1028  D6 4B       	sub	a,0x4b
3238  102A  28 2F       	jr	Z,l_player_open_door_00110
3239  102C  18 3A       	jr	l_player_open_door_00113
3240  102E              l_player_open_door_00101:
3241  102E  3A 00 00    	ld	a,(_player_keys)
3242  1031  B7          	or	a, a
3243  1032  28 34       	jr	Z,l_player_open_door_00113
3244  1034  2E 07       	ld	l,0x07
3245  1036  CD 00 00    	call	_zx_border_fastcall
3246  1039  0E 01       	ld	c,0x01
3247  103B  18 2B       	jr	l_player_open_door_00113
3248  103D              l_player_open_door_00104:
3249  103D  3A 01 00    	ld	a,(_player_keys + 0x0001)
3250  1040  B7          	or	a, a
3251  1041  28 25       	jr	Z,l_player_open_door_00113
3252  1043  2E 02       	ld	l,0x02
3253  1045  CD 00 00    	call	_zx_border_fastcall
3254  1048  0E 01       	ld	c,0x01
3255  104A  18 1C       	jr	l_player_open_door_00113
3256  104C              l_player_open_door_00107:
3257  104C  3A 02 00    	ld	a,(_player_keys + 0x0002)
3258  104F  B7          	or	a, a
3259  1050  28 16       	jr	Z,l_player_open_door_00113
3260  1052  2E 04       	ld	l,0x04
3261  1054  CD 00 00    	call	_zx_border_fastcall
3262  1057  0E 01       	ld	c,0x01
3263  1059  18 0D       	jr	l_player_open_door_00113
3264  105B              l_player_open_door_00110:
3265  105B  3A 03 00    	ld	a,(_player_keys + 0x0003)
3266  105E  B7          	or	a, a
3267  105F  28 07       	jr	Z,l_player_open_door_00113
3268  1061  2E 05       	ld	l,0x05
3269  1063  CD 00 00    	call	_zx_border_fastcall
3270  1066  0E 01       	ld	c,0x01
3271  1068              l_player_open_door_00113:
3272  1068  79          	ld	a, c
3273  1069  B7          	or	a, a
3274  106A  20 06       	jr	NZ,l_player_open_door_00114
3275  106C  3A 00 00    	ld	a,(_game_inmune)
3276  106F  B7          	or	a, a
3277  1070  28 1E       	jr	Z,l_player_open_door_00117
3278  1072              l_player_open_door_00114:
3279  1072  3E 00       	ld	a, +((_scr_map) & 0xFF)
3280  1074  DD 86 04    	add	a,(ix+4)
3281  1077  4F          	ld	c, a
3282  1078  3E 00       	ld	a, +((_scr_map) / 256)
3283  107A  DD 8E 05    	adc	a,(ix+5)
3284  107D  47          	ld	b, a
3285  107E  AF          	xor	a, a
3286  107F  02          	ld	(bc), a
3287  1080  DD 6E 04    	ld	l,(ix+4)
3288  1083  DD 66 05    	ld	h,(ix+5)
3289  1086  CD 00 00    	call	_game_obj_set
3290  1089  21 04 00    	ld	hl,0x0004
3291  108C  39          	add	hl, sp
3292  108D  CD 00 00    	call	_spr_draw_index
3293  1090              l_player_open_door_00117:
3294  1090  DD E1       	pop	ix
3295  1092  C9          	ret
3296  1093              	SECTION code_compiler
3297  1093              ;	---------------------------------
3298  1093              ; Function player_lost_life
3299  1093              ; ---------------------------------
3300  1093              _player_lost_life:
3301  1093  CD 00 00    	call	___sdcc_enter_ix
3302  1096  F5          	push	af
3303  1097  21 00 00    	ld	hl,_ay_song_04_lotr_lose_a_life
3304  109A  E5          	push	hl
3305  109B  21 01 04    	ld	hl,0x0401
3306  109E  E5          	push	hl
3307  109F  CD 00 00    	call	_ay_song_play
3308  10A2  21 00 00    	ld	hl,_player_vita
3309  10A5  36 00       	ld	(hl),0x00
3310  10A7  CD 00 00    	call	_game_update_stats
3311  10AA  3A 07 00    	ld	a,(_lin + 7)
3312  10AD  32 00 00    	ld	(_s_lin0),a
3313  10B0  3A 07 00    	ld	a,(_col + 7)
3314  10B3  32 00 00    	ld	(_s_col0),a
3315  10B6  CD 00 00    	call	_spr_init_effects
3316  10B9  06 00       	ld	b,0x00
3317  10BB              l_player_lost_life_00118:
3318  10BB  C5          	push	bc
3319  10BC  21 00 00    	ld	hl,0x0000
3320  10BF  E5          	push	hl
3321  10C0  AF          	xor	a, a
3322  10C1  48          	ld	c,b
3323  10C2  47          	ld	b,a
3324  10C3  C5          	push	bc
3325  10C4  CD 00 00    	call	_NIRVANAP_spriteT_callee
3326  10C7  C1          	pop	bc
3327  10C8  04          	inc	b
3328  10C9  3E 07       	ld	a,0x07
3329  10CB  90          	sub	a, b
3330  10CC  30 ED       	jr	NC,l_player_lost_life_00118
3331  10CE  76          	halt
3332  10CF  3A 00 00    	ld	a,(_s_lin0)
3333  10D2  C6 F0       	add	a,0xf0
3334  10D4  47          	ld	b, a
3335  10D5  3A 00 00    	ld	a,(_s_col0)
3336  10D8  21 00 00    	ld	hl,0x0000
3337  10DB  E5          	push	hl
3338  10DC  21 87 03    	ld	hl,0x0387
3339  10DF  E5          	push	hl
3340  10E0  48          	ld	c,b
3341  10E1  47          	ld	b,a
3342  10E2  C5          	push	bc
3343  10E3  CD 00 00    	call	_spr_add_anim
3344  10E6  F1          	pop	af
3345  10E7  F1          	pop	af
3346  10E8  F1          	pop	af
3347  10E9  21 00 00    	ld	hl,_s_col0
3348  10EC  46          	ld	b, (hl)
3349  10ED  05          	dec	b
3350  10EE  05          	dec	b
3351  10EF  21 00 00    	ld	hl,0x0000
3352  10F2  E5          	push	hl
3353  10F3  21 87 03    	ld	hl,0x0387
3354  10F6  E5          	push	hl
3355  10F7  C5          	push	bc
3356  10F8  33          	inc	sp
3357  10F9  3A 00 00    	ld	a,(_s_lin0)
3358  10FC  F5          	push	af
3359  10FD  33          	inc	sp
3360  10FE  CD 00 00    	call	_spr_add_anim
3361  1101  F1          	pop	af
3362  1102  F1          	pop	af
3363  1103  21 00 00    	ld	hl,0x0000
3364  1106  E3          	ex	(sp),hl
3365  1107  3A 00 00    	ld	a,(_s_col0)
3366  110A  21 87 03    	ld	hl,0x0387
3367  110D  E5          	push	hl
3368  110E  F5          	push	af
3369  110F  33          	inc	sp
3370  1110  3A 00 00    	ld	a,(_s_lin0)
3371  1113  F5          	push	af
3372  1114  33          	inc	sp
3373  1115  CD 00 00    	call	_spr_add_anim
3374  1118  F1          	pop	af
3375  1119  F1          	pop	af
3376  111A  F1          	pop	af
3377  111B  21 00 00    	ld	hl,_s_col0
3378  111E  46          	ld	b, (hl)
3379  111F  04          	inc	b
3380  1120  04          	inc	b
3381  1121  21 00 00    	ld	hl,0x0000
3382  1124  E5          	push	hl
3383  1125  21 87 03    	ld	hl,0x0387
3384  1128  E5          	push	hl
3385  1129  C5          	push	bc
3386  112A  33          	inc	sp
3387  112B  3A 00 00    	ld	a,(_s_lin0)
3388  112E  F5          	push	af
3389  112F  33          	inc	sp
3390  1130  CD 00 00    	call	_spr_add_anim
3391  1133  F1          	pop	af
3392  1134  F1          	pop	af
3393  1135  F1          	pop	af
3394  1136  3A 00 00    	ld	a,(_s_lin0)
3395  1139  C6 10       	add	a,0x10
3396  113B  47          	ld	b, a
3397  113C  3A 00 00    	ld	a,(_s_col0)
3398  113F  21 00 00    	ld	hl,0x0000
3399  1142  E5          	push	hl
3400  1143  21 87 03    	ld	hl,0x0387
3401  1146  E5          	push	hl
3402  1147  48          	ld	c,b
3403  1148  47          	ld	b,a
3404  1149  C5          	push	bc
3405  114A  CD 00 00    	call	_spr_add_anim
3406  114D  F1          	pop	af
3407  114E  F1          	pop	af
3408  114F  F1          	pop	af
3409  1150  2E 00       	ld	l,0x00
3410  1152  CD 00 00    	call	_zx_border_fastcall
3411  1155  DD 36 FE 01 	ld	(ix-2),0x01
3412  1159  2A 00 00    	ld	hl,(_curr_time)
3413  115C  22 00 00    	ld	(_anim_time),hl
3414  115F              l_player_lost_life_00107:
3415  115F  DD 7E FE    	ld	a,(ix-2)
3416  1162  B7          	or	a, a
3417  1163  28 28       	jr	Z,l_player_lost_life_00131
3418  1165  3E 0C       	ld	a,0x0c
3419  1167  F5          	push	af
3420  1168  33          	inc	sp
3421  1169  21 00 00    	ld	hl,_anim_time
3422  116C  E5          	push	hl
3423  116D  CD 00 00    	call	_game_check_time
3424  1170  F1          	pop	af
3425  1171  33          	inc	sp
3426  1172  7D          	ld	a, l
3427  1173  B7          	or	a, a
3428  1174  28 E9       	jr	Z,l_player_lost_life_00107
3429  1176  2A 00 00    	ld	hl,(_curr_time)
3430  1179  22 00 00    	ld	(_anim_time),hl
3431  117C  3A 00 00    	ld	a,(_anim_count)
3432  117F  B7          	or	a,a
3433  1180  28 05       	jr	Z,l_player_lost_life_00103
3434  1182  CD 00 00    	call	_spr_play_anim
3435  1185  18 D8       	jr	l_player_lost_life_00107
3436  1187              l_player_lost_life_00103:
3437  1187  DD 36 FE 00 	ld	(ix-2),0x00
3438  118B  18 D2       	jr	l_player_lost_life_00107
3439  118D              l_player_lost_life_00131:
3440  118D  0E 00       	ld	c,0x00
3441  118F              l_player_lost_life_00120:
3442  118F  06 00       	ld	b,0x00
3443  1191  21 00 00    	ld	hl,_class
3444  1194  09          	add	hl, bc
3445  1195  7E          	ld	a, (hl)
3446  1196  B7          	or	a, a
3447  1197  28 2E       	jr	Z,l_player_lost_life_00121
3448  1199  06 00       	ld	b,0x00
3449  119B  21 00 00    	ld	hl,_col
3450  119E  09          	add	hl, bc
3451  119F  5E          	ld	e, (hl)
3452  11A0  06 00       	ld	b,0x00
3453  11A2  21 00 00    	ld	hl,_lin
3454  11A5  09          	add	hl, bc
3455  11A6  56          	ld	d, (hl)
3456  11A7  06 00       	ld	b,0x00
3457  11A9  21 00 00    	ld	hl,_tile
3458  11AC  09          	add	hl, bc
3459  11AD  7E          	ld	a, (hl)
3460  11AE  DD 77 FF    	ld	(ix-1),a
3461  11B1  06 00       	ld	b,0x00
3462  11B3  21 00 00    	ld	hl,_colint
3463  11B6  09          	add	hl, bc
3464  11B7  6E          	ld	l, (hl)
3465  11B8  DD 7E FF    	ld	a,(ix-1)
3466  11BB  85          	add	a, l
3467  11BC  47          	ld	b, a
3468  11BD  C5          	push	bc
3469  11BE  7B          	ld	a, e
3470  11BF  5A          	ld	e,d
3471  11C0  57          	ld	d,a
3472  11C1  D5          	push	de
3473  11C2  C5          	push	bc
3474  11C3  CD 00 00    	call	_NIRVANAP_spriteT_callee
3475  11C6  C1          	pop	bc
3476  11C7              l_player_lost_life_00121:
3477  11C7  0C          	inc	c
3478  11C8  79          	ld	a, c
3479  11C9  D6 07       	sub	a,0x07
3480  11CB  38 C2       	jr	C,l_player_lost_life_00120
3481  11CD  3A 00 00    	ld	a,(_game_inf_lives)
3482  11D0  B7          	or	a, a
3483  11D1  20 04       	jr	NZ,l_player_lost_life_00114
3484  11D3  21 00 00    	ld	hl,_player_lives
3485  11D6  35          	dec	(hl)
3486  11D7              l_player_lost_life_00114:
3487  11D7  21 00 00    	ld	hl,_player_mana
3488  11DA  36 64       	ld	(hl),0x64
3489  11DC  21 00 00    	ld	hl,_player_vita
3490  11DF  36 64       	ld	(hl),0x64
3491  11E1  3A 00 00    	ld	a,(_player_lives)
3492  11E4  B7          	or	a, a
3493  11E5  28 1D       	jr	Z,l_player_lost_life_00116
3494  11E7  21 F4 01    	ld	hl,0x01f4
3495  11EA  CD 00 00    	call	_z80_delay_ms_fastcall
3496  11ED  3A 00 00    	ld	a,(_game_checkpoint_col)
3497  11F0  32 00 00    	ld	(_player_col_scr),a
3498  11F3  3A 00 00    	ld	a,(_game_checkpoint_lin)
3499  11F6  32 00 00    	ld	(_player_lin_scr),a
3500  11F9  3A 00 00    	ld	a,(_game_checkpoint_scr)
3501  11FC  32 00 00    	ld	(_scr_curr),a
3502  11FF  CD 00 00    	call	_game_round_init
3503  1202  18 0A       	jr	l_player_lost_life_00122
3504  1204              l_player_lost_life_00116:
3505  1204  21 00 00    	ld	hl,_player_lives
3506  1207  36 00       	ld	(hl),0x00
3507  1209  21 00 00    	ld	hl,_game_over
3508  120C  36 01       	ld	(hl),0x01
3509  120E              l_player_lost_life_00122:
3510  120E  F1          	pop	af
3511  120F  DD E1       	pop	ix
3512  1211  C9          	ret
3513  1212              	SECTION code_compiler
3514  1212              ;	---------------------------------
3515  1212              ; Function player_hit
3516  1212              ; ---------------------------------
3517  1212              _player_hit:
3518  1212  7D          	ld	a,l
3519  1213  4D          	ld	c,l
3520  1214  21 00 00    	ld	hl,_player_vita
3521  1217  96          	sub	a, (hl)
3522  1218  30 22       	jr	NC,l_player_hit_00104
3523  121A  3A 00 00    	ld	a,(_game_inmune)
3524  121D  B7          	or	a, a
3525  121E  20 06       	jr	NZ,l_player_hit_00102
3526  1220  21 00 00    	ld	hl,_player_vita
3527  1223  7E          	ld	a, (hl)
3528  1224  91          	sub	a, c
3529  1225  77          	ld	(hl), a
3530  1226              l_player_hit_00102:
3531  1226  2A 00 00    	ld	hl,(_curr_time)
3532  1229  22 00 00    	ld	(_player_hit_time),hl
3533  122C  21 00 00    	ld	hl,_ay_fx_04_golpe
3534  122F  E5          	push	hl
3535  1230  21 01 04    	ld	hl,0x0401
3536  1233  E5          	push	hl
3537  1234  CD 00 00    	call	_ay_song_play
3538  1237  CD 00 00    	call	_game_update_stats
3539  123A  18 03       	jr	l_player_hit_00106
3540  123C              l_player_hit_00104:
3541  123C  CD 93 10    	call	_player_lost_life
3542  123F              l_player_hit_00106:
3543  123F  C9          	ret
3544  1240              	SECTION IGNORE
3545  0000              
