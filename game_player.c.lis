1     0000              MODULE game_player_c
2     0000              
3     0000              ;--------------------------------------------------------
4     0000              ; File Created by SDCC : free open source ANSI-C Compiler
5     0000              ; Version 3.6.5 #9958 (Mac OS X i386)
6     0000              ;--------------------------------------------------------
7     0000              ; Processed by Z88DK
8     0000              ;--------------------------------------------------------
9     0000              
10    0000              	EXTERN __divschar
11    0000              	EXTERN __divschar_callee
12    0000              	EXTERN __divsint
13    0000              	EXTERN __divsint_callee
14    0000              	EXTERN __divslong
15    0000              	EXTERN __divslong_callee
16    0000              	EXTERN __divslonglong
17    0000              	EXTERN __divslonglong_callee
18    0000              	EXTERN __divsuchar
19    0000              	EXTERN __divsuchar_callee
20    0000              	EXTERN __divuchar
21    0000              	EXTERN __divuchar_callee
22    0000              	EXTERN __divuint
23    0000              	EXTERN __divuint_callee
24    0000              	EXTERN __divulong
25    0000              	EXTERN __divulong_callee
26    0000              	EXTERN __divulonglong
27    0000              	EXTERN __divulonglong_callee
28    0000              	EXTERN __divuschar
29    0000              	EXTERN __divuschar_callee
30    0000              	EXTERN __modschar
31    0000              	EXTERN __modschar_callee
32    0000              	EXTERN __modsint
33    0000              	EXTERN __modsint_callee
34    0000              	EXTERN __modslong
35    0000              	EXTERN __modslong_callee
36    0000              	EXTERN __modslonglong
37    0000              	EXTERN __modslonglong_callee
38    0000              	EXTERN __modsuchar
39    0000              	EXTERN __modsuchar_callee
40    0000              	EXTERN __moduchar
41    0000              	EXTERN __moduchar_callee
42    0000              	EXTERN __moduint
43    0000              	EXTERN __moduint_callee
44    0000              	EXTERN __modulong
45    0000              	EXTERN __modulong_callee
46    0000              	EXTERN __modulonglong
47    0000              	EXTERN __modulonglong_callee
48    0000              	EXTERN __moduschar
49    0000              	EXTERN __moduschar_callee
50    0000              	EXTERN __mulint
51    0000              	EXTERN __mulint_callee
52    0000              	EXTERN __mullong
53    0000              	EXTERN __mullong_callee
54    0000              	EXTERN __mullonglong
55    0000              	EXTERN __mullonglong_callee
56    0000              	EXTERN __mulschar
57    0000              	EXTERN __mulschar_callee
58    0000              	EXTERN __mulsuchar
59    0000              	EXTERN __mulsuchar_callee
60    0000              	EXTERN __muluschar
61    0000              	EXTERN __muluschar_callee
62    0000              	EXTERN __rlslonglong
63    0000              	EXTERN __rlslonglong_callee
64    0000              	EXTERN __rlulonglong
65    0000              	EXTERN __rlulonglong_callee
66    0000              	EXTERN __rrslonglong
67    0000              	EXTERN __rrslonglong_callee
68    0000              	EXTERN __rrulonglong
69    0000              	EXTERN __rrulonglong_callee
70    0000              	EXTERN ___sdcc_call_hl
71    0000              	EXTERN ___sdcc_call_iy
72    0000              	EXTERN ___sdcc_enter_ix
73    0000              	EXTERN _banked_call
74    0000              	EXTERN _banked_ret
75    0000              	EXTERN ___fs2schar
76    0000              	EXTERN ___fs2schar_callee
77    0000              	EXTERN ___fs2sint
78    0000              	EXTERN ___fs2sint_callee
79    0000              	EXTERN ___fs2slong
80    0000              	EXTERN ___fs2slong_callee
81    0000              	EXTERN ___fs2slonglong
82    0000              	EXTERN ___fs2slonglong_callee
83    0000              	EXTERN ___fs2uchar
84    0000              	EXTERN ___fs2uchar_callee
85    0000              	EXTERN ___fs2uint
86    0000              	EXTERN ___fs2uint_callee
87    0000              	EXTERN ___fs2ulong
88    0000              	EXTERN ___fs2ulong_callee
89    0000              	EXTERN ___fs2ulonglong
90    0000              	EXTERN ___fs2ulonglong_callee
91    0000              	EXTERN ___fsadd
92    0000              	EXTERN ___fsadd_callee
93    0000              	EXTERN ___fsdiv
94    0000              	EXTERN ___fsdiv_callee
95    0000              	EXTERN ___fseq
96    0000              	EXTERN ___fseq_callee
97    0000              	EXTERN ___fsgt
98    0000              	EXTERN ___fsgt_callee
99    0000              	EXTERN ___fslt
100   0000              	EXTERN ___fslt_callee
101   0000              	EXTERN ___fsmul
102   0000              	EXTERN ___fsmul_callee
103   0000              	EXTERN ___fsneq
104   0000              	EXTERN ___fsneq_callee
105   0000              	EXTERN ___fssub
106   0000              	EXTERN ___fssub_callee
107   0000              	EXTERN ___schar2fs
108   0000              	EXTERN ___schar2fs_callee
109   0000              	EXTERN ___sint2fs
110   0000              	EXTERN ___sint2fs_callee
111   0000              	EXTERN ___slong2fs
112   0000              	EXTERN ___slong2fs_callee
113   0000              	EXTERN ___slonglong2fs
114   0000              	EXTERN ___slonglong2fs_callee
115   0000              	EXTERN ___uchar2fs
116   0000              	EXTERN ___uchar2fs_callee
117   0000              	EXTERN ___uint2fs
118   0000              	EXTERN ___uint2fs_callee
119   0000              	EXTERN ___ulong2fs
120   0000              	EXTERN ___ulong2fs_callee
121   0000              	EXTERN ___ulonglong2fs
122   0000              	EXTERN ___ulonglong2fs_callee
123   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
126   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
127   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
128   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
129   0000              	EXTERN ____sdcc_4_ldi_save_bc
130   0000              	EXTERN ____sdcc_4_push_hlix
131   0000              	EXTERN ____sdcc_4_push_mhl
132   0000              	EXTERN ____sdcc_lib_setmem_hl
133   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
134   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
135   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
136   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
137   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
138   0000              	EXTERN ____sdcc_ll_add_deix_hlix
139   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
140   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
141   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
142   0000              	EXTERN ____sdcc_ll_asr_hlix_a
143   0000              	EXTERN ____sdcc_ll_asr_mbc_a
144   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
145   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
146   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
147   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
148   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
149   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
150   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
151   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
152   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
153   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
155   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
156   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
157   0000              	EXTERN ____sdcc_ll_push_hlix
158   0000              	EXTERN ____sdcc_ll_push_mhl
159   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
160   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
161   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
162   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
163   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
164   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
165   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
166   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
167   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
168   0000              	EXTERN ____sdcc_load_debc_deix
169   0000              	EXTERN ____sdcc_load_dehl_deix
170   0000              	EXTERN ____sdcc_load_debc_mhl
171   0000              	EXTERN ____sdcc_load_hlde_mhl
172   0000              	EXTERN ____sdcc_store_dehl_bcix
173   0000              	EXTERN ____sdcc_store_debc_hlix
174   0000              	EXTERN ____sdcc_store_debc_mhl
175   0000              	EXTERN ____sdcc_cpu_pop_ei
176   0000              	EXTERN ____sdcc_cpu_pop_ei_jp
177   0000              	EXTERN ____sdcc_cpu_push_di
178   0000              	EXTERN ____sdcc_outi
179   0000              	EXTERN ____sdcc_outi_128
180   0000              	EXTERN ____sdcc_outi_256
181   0000              	EXTERN ____sdcc_ldi
182   0000              	EXTERN ____sdcc_ldi_128
183   0000              	EXTERN ____sdcc_ldi_256
184   0000              
185   0000              ;--------------------------------------------------------
186   0000              ; Public variables in this module
187   0000              ;--------------------------------------------------------
188   0000              	GLOBAL _player_check_map
189   0000              	GLOBAL _player_1up
190   0000              	GLOBAL _player_init
191   0000              	GLOBAL _player_turn
192   0000              	GLOBAL _player_move
193   0000              	GLOBAL _player_check_input
194   0000              	GLOBAL _player_move_input
195   0000              	GLOBAL _player_fix_walk_lin
196   0000              	GLOBAL _player_fire
197   0000              	GLOBAL _player_collision
198   0000              	GLOBAL _player_pick_mushroom
199   0000              	GLOBAL _player_check_stairs_vertical
200   0000              	GLOBAL _player_check_stairs
201   0000              	GLOBAL _player_tile
202   0000              	GLOBAL _player_pick_item
203   0000              	GLOBAL _player_hit_platform
204   0000              	GLOBAL _player_hit_platform_clear
205   0000              	GLOBAL _player_score_add
206   0000              	GLOBAL _player_check_floor
207   0000              	GLOBAL _player_gasta_brick
208   0000              	GLOBAL _player_move_jump
209   0000              	GLOBAL _player_open_door
210   0000              	GLOBAL _player_lost_life
211   0000              	GLOBAL _player_hit
212   0000              ;--------------------------------------------------------
213   0000              ; Externals used
214   0000              ;--------------------------------------------------------
215   0000              	GLOBAL _ulltoa_callee
216   0000              	GLOBAL _ulltoa
217   0000              	GLOBAL _strtoull_callee
218   0000              	GLOBAL _strtoull
219   0000              	GLOBAL _strtoll_callee
220   0000              	GLOBAL _strtoll
221   0000              	GLOBAL _lltoa_callee
222   0000              	GLOBAL _lltoa
223   0000              	GLOBAL _llabs_callee
224   0000              	GLOBAL _llabs
225   0000              	GLOBAL __lldivu__callee
226   0000              	GLOBAL __lldivu_
227   0000              	GLOBAL __lldiv__callee
228   0000              	GLOBAL __lldiv_
229   0000              	GLOBAL _atoll_callee
230   0000              	GLOBAL _atoll
231   0000              	GLOBAL _realloc_unlocked_callee
232   0000              	GLOBAL _realloc_unlocked
233   0000              	GLOBAL _malloc_unlocked_fastcall
234   0000              	GLOBAL _malloc_unlocked
235   0000              	GLOBAL _free_unlocked_fastcall
236   0000              	GLOBAL _free_unlocked
237   0000              	GLOBAL _calloc_unlocked_callee
238   0000              	GLOBAL _calloc_unlocked
239   0000              	GLOBAL _aligned_alloc_unlocked_callee
240   0000              	GLOBAL _aligned_alloc_unlocked
241   0000              	GLOBAL _realloc_callee
242   0000              	GLOBAL _realloc
243   0000              	GLOBAL _malloc_fastcall
244   0000              	GLOBAL _malloc
245   0000              	GLOBAL _free_fastcall
246   0000              	GLOBAL _free
247   0000              	GLOBAL _calloc_callee
248   0000              	GLOBAL _calloc
249   0000              	GLOBAL _aligned_alloc_callee
250   0000              	GLOBAL _aligned_alloc
251   0000              	GLOBAL _utoa_callee
252   0000              	GLOBAL _utoa
253   0000              	GLOBAL _ultoa_callee
254   0000              	GLOBAL _ultoa
255   0000              	GLOBAL _system_fastcall
256   0000              	GLOBAL _system
257   0000              	GLOBAL _strtoul_callee
258   0000              	GLOBAL _strtoul
259   0000              	GLOBAL _strtol_callee
260   0000              	GLOBAL _strtol
261   0000              	GLOBAL _strtof_callee
262   0000              	GLOBAL _strtof
263   0000              	GLOBAL _strtod_callee
264   0000              	GLOBAL _strtod
265   0000              	GLOBAL _srand_fastcall
266   0000              	GLOBAL _srand
267   0000              	GLOBAL _rand
268   0000              	GLOBAL _quick_exit_fastcall
269   0000              	GLOBAL _quick_exit
270   0000              	GLOBAL _qsort_callee
271   0000              	GLOBAL _qsort
272   0000              	GLOBAL _ltoa_callee
273   0000              	GLOBAL _ltoa
274   0000              	GLOBAL _labs_fastcall
275   0000              	GLOBAL _labs
276   0000              	GLOBAL _itoa_callee
277   0000              	GLOBAL _itoa
278   0000              	GLOBAL _ftoh_callee
279   0000              	GLOBAL _ftoh
280   0000              	GLOBAL _ftog_callee
281   0000              	GLOBAL _ftog
282   0000              	GLOBAL _ftoe_callee
283   0000              	GLOBAL _ftoe
284   0000              	GLOBAL _ftoa_callee
285   0000              	GLOBAL _ftoa
286   0000              	GLOBAL _exit_fastcall
287   0000              	GLOBAL _exit
288   0000              	GLOBAL _dtoh_callee
289   0000              	GLOBAL _dtoh
290   0000              	GLOBAL _dtog_callee
291   0000              	GLOBAL _dtog
292   0000              	GLOBAL _dtoe_callee
293   0000              	GLOBAL _dtoe
294   0000              	GLOBAL _dtoa_callee
295   0000              	GLOBAL _dtoa
296   0000              	GLOBAL _bsearch_callee
297   0000              	GLOBAL _bsearch
298   0000              	GLOBAL _atol_fastcall
299   0000              	GLOBAL _atol
300   0000              	GLOBAL _atoi_fastcall
301   0000              	GLOBAL _atoi
302   0000              	GLOBAL _atof_fastcall
303   0000              	GLOBAL _atof
304   0000              	GLOBAL _atexit_fastcall
305   0000              	GLOBAL _atexit
306   0000              	GLOBAL _at_quick_exit_fastcall
307   0000              	GLOBAL _at_quick_exit
308   0000              	GLOBAL _abs_fastcall
309   0000              	GLOBAL _abs
310   0000              	GLOBAL _abort
311   0000              	GLOBAL __strtou__callee
312   0000              	GLOBAL __strtou_
313   0000              	GLOBAL __strtoi__callee
314   0000              	GLOBAL __strtoi_
315   0000              	GLOBAL __random_uniform_xor_8__fastcall
316   0000              	GLOBAL __random_uniform_xor_8_
317   0000              	GLOBAL __random_uniform_xor_32__fastcall
318   0000              	GLOBAL __random_uniform_xor_32_
319   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
320   0000              	GLOBAL __random_uniform_cmwc_8_
321   0000              	GLOBAL __shellsort__callee
322   0000              	GLOBAL __shellsort_
323   0000              	GLOBAL __quicksort__callee
324   0000              	GLOBAL __quicksort_
325   0000              	GLOBAL __insertion_sort__callee
326   0000              	GLOBAL __insertion_sort_
327   0000              	GLOBAL __ldivu__callee
328   0000              	GLOBAL __ldivu_
329   0000              	GLOBAL __ldiv__callee
330   0000              	GLOBAL __ldiv_
331   0000              	GLOBAL __divu__callee
332   0000              	GLOBAL __divu_
333   0000              	GLOBAL __div__callee
334   0000              	GLOBAL __div_
335   0000              	GLOBAL _NIRVANAP_drawTW_raw_callee
336   0000              	GLOBAL _NIRVANAP_drawTW_raw
337   0000              	GLOBAL _NIRVANAP_drawTW_callee
338   0000              	GLOBAL _NIRVANAP_drawTW
339   0000              	GLOBAL _NIRVANAP_drawW_raw_callee
340   0000              	GLOBAL _NIRVANAP_drawW_raw
341   0000              	GLOBAL _NIRVANAP_drawW_callee
342   0000              	GLOBAL _NIRVANAP_drawW
343   0000              	GLOBAL _NIRVANAP_spriteT_callee
344   0000              	GLOBAL _NIRVANAP_spriteT
345   0000              	GLOBAL _NIRVANAP_fillC_callee
346   0000              	GLOBAL _NIRVANAP_fillC
347   0000              	GLOBAL _NIRVANAP_readC_callee
348   0000              	GLOBAL _NIRVANAP_readC
349   0000              	GLOBAL _NIRVANAP_paintC_callee
350   0000              	GLOBAL _NIRVANAP_paintC
351   0000              	GLOBAL _NIRVANAP_printC_callee
352   0000              	GLOBAL _NIRVANAP_printC
353   0000              	GLOBAL _NIRVANAP_fillT_raw_callee
354   0000              	GLOBAL _NIRVANAP_fillT_raw
355   0000              	GLOBAL _NIRVANAP_fillT_callee
356   0000              	GLOBAL _NIRVANAP_fillT
357   0000              	GLOBAL _NIRVANAP_drawT_raw_callee
358   0000              	GLOBAL _NIRVANAP_drawT_raw
359   0000              	GLOBAL _NIRVANAP_drawT_callee
360   0000              	GLOBAL _NIRVANAP_drawT
361   0000              	GLOBAL _NIRVANAP_stop
362   0000              	GLOBAL _NIRVANAP_start
363   0000              	GLOBAL _debug3
364   0000              	GLOBAL _debug2
365   0000              	GLOBAL _debug
366   0000              	GLOBAL _zx_print_str
367   0000              	GLOBAL _zx_print_int
368   0000              	GLOBAL _zx_print_chr
369   0000              	GLOBAL _zx_print_bonus_time
370   0000              	GLOBAL _zx_isr
371   0000              	GLOBAL _z80_otdr_callee
372   0000              	GLOBAL _z80_otdr
373   0000              	GLOBAL _z80_otir_callee
374   0000              	GLOBAL _z80_otir
375   0000              	GLOBAL _z80_outp_callee
376   0000              	GLOBAL _z80_outp
377   0000              	GLOBAL _z80_indr_callee
378   0000              	GLOBAL _z80_indr
379   0000              	GLOBAL _z80_inir_callee
380   0000              	GLOBAL _z80_inir
381   0000              	GLOBAL _z80_inp_fastcall
382   0000              	GLOBAL _z80_inp
383   0000              	GLOBAL _z80_set_int_state_fastcall
384   0000              	GLOBAL _z80_set_int_state
385   0000              	GLOBAL _z80_get_int_state
386   0000              	GLOBAL _z80_delay_tstate_fastcall
387   0000              	GLOBAL _z80_delay_tstate
388   0000              	GLOBAL _z80_delay_ms_fastcall
389   0000              	GLOBAL _z80_delay_ms
390   0000              	GLOBAL _im2_remove_generic_callback_callee
391   0000              	GLOBAL _im2_remove_generic_callback
392   0000              	GLOBAL _im2_prepend_generic_callback_callee
393   0000              	GLOBAL _im2_prepend_generic_callback
394   0000              	GLOBAL _im2_append_generic_callback_callee
395   0000              	GLOBAL _im2_append_generic_callback
396   0000              	GLOBAL _im2_create_generic_isr_8080_callee
397   0000              	GLOBAL _im2_create_generic_isr_8080
398   0000              	GLOBAL _im2_create_generic_isr_callee
399   0000              	GLOBAL _im2_create_generic_isr
400   0000              	GLOBAL _im2_install_isr_callee
401   0000              	GLOBAL _im2_install_isr
402   0000              	GLOBAL _im2_init_fastcall
403   0000              	GLOBAL _im2_init
404   0000              	GLOBAL _intrinsic_swap_word_32_fastcall
405   0000              	GLOBAL _intrinsic_swap_word_32
406   0000              	GLOBAL _intrinsic_swap_endian_32_fastcall
407   0000              	GLOBAL _intrinsic_swap_endian_32
408   0000              	GLOBAL _intrinsic_swap_endian_16_fastcall
409   0000              	GLOBAL _intrinsic_swap_endian_16
410   0000              	GLOBAL _intrinsic_return_de
411   0000              	GLOBAL _intrinsic_return_bc
412   0000              	GLOBAL _intrinsic_exx
413   0000              	GLOBAL _intrinsic_ex_de_hl
414   0000              	GLOBAL _intrinsic_nop
415   0000              	GLOBAL _intrinsic_im_2
416   0000              	GLOBAL _intrinsic_im_1
417   0000              	GLOBAL _intrinsic_im_0
418   0000              	GLOBAL _intrinsic_retn
419   0000              	GLOBAL _intrinsic_reti
420   0000              	GLOBAL _intrinsic_halt
421   0000              	GLOBAL _intrinsic_ei
422   0000              	GLOBAL _intrinsic_di
423   0000              	GLOBAL _intrinsic_stub
424   0000              	GLOBAL _intrinsic_outi
425   0000              	GLOBAL _intrinsic_ldi
426   0000              	GLOBAL _zx_pattern_fill_callee
427   0000              	GLOBAL _zx_pattern_fill
428   0000              	GLOBAL _zx_saddrpup_fastcall
429   0000              	GLOBAL _zx_saddrpup
430   0000              	GLOBAL _zx_saddrpright_callee
431   0000              	GLOBAL _zx_saddrpright
432   0000              	GLOBAL _zx_saddrpleft_callee
433   0000              	GLOBAL _zx_saddrpleft
434   0000              	GLOBAL _zx_saddrpdown_fastcall
435   0000              	GLOBAL _zx_saddrpdown
436   0000              	GLOBAL _zx_saddrcup_fastcall
437   0000              	GLOBAL _zx_saddrcup
438   0000              	GLOBAL _zx_saddrcright_fastcall
439   0000              	GLOBAL _zx_saddrcright
440   0000              	GLOBAL _zx_saddrcleft_fastcall
441   0000              	GLOBAL _zx_saddrcleft
442   0000              	GLOBAL _zx_saddrcdown_fastcall
443   0000              	GLOBAL _zx_saddrcdown
444   0000              	GLOBAL _zx_saddr2py_fastcall
445   0000              	GLOBAL _zx_saddr2py
446   0000              	GLOBAL _zx_saddr2px_fastcall
447   0000              	GLOBAL _zx_saddr2px
448   0000              	GLOBAL _zx_saddr2cy_fastcall
449   0000              	GLOBAL _zx_saddr2cy
450   0000              	GLOBAL _zx_saddr2cx_fastcall
451   0000              	GLOBAL _zx_saddr2cx
452   0000              	GLOBAL _zx_saddr2aaddr_fastcall
453   0000              	GLOBAL _zx_saddr2aaddr
454   0000              	GLOBAL _zx_py2saddr_fastcall
455   0000              	GLOBAL _zx_py2saddr
456   0000              	GLOBAL _zx_py2aaddr_fastcall
457   0000              	GLOBAL _zx_py2aaddr
458   0000              	GLOBAL _zx_pxy2saddr_callee
459   0000              	GLOBAL _zx_pxy2saddr
460   0000              	GLOBAL _zx_pxy2aaddr_callee
461   0000              	GLOBAL _zx_pxy2aaddr
462   0000              	GLOBAL _zx_px2bitmask_fastcall
463   0000              	GLOBAL _zx_px2bitmask
464   0000              	GLOBAL _zx_cy2saddr_fastcall
465   0000              	GLOBAL _zx_cy2saddr
466   0000              	GLOBAL _zx_cy2aaddr_fastcall
467   0000              	GLOBAL _zx_cy2aaddr
468   0000              	GLOBAL _zx_cxy2saddr_callee
469   0000              	GLOBAL _zx_cxy2saddr
470   0000              	GLOBAL _zx_cxy2aaddr_callee
471   0000              	GLOBAL _zx_cxy2aaddr
472   0000              	GLOBAL _zx_bitmask2px_fastcall
473   0000              	GLOBAL _zx_bitmask2px
474   0000              	GLOBAL _zx_aaddrcup_fastcall
475   0000              	GLOBAL _zx_aaddrcup
476   0000              	GLOBAL _zx_aaddrcright_fastcall
477   0000              	GLOBAL _zx_aaddrcright
478   0000              	GLOBAL _zx_aaddrcleft_fastcall
479   0000              	GLOBAL _zx_aaddrcleft
480   0000              	GLOBAL _zx_aaddrcdown_fastcall
481   0000              	GLOBAL _zx_aaddrcdown
482   0000              	GLOBAL _zx_aaddr2saddr_fastcall
483   0000              	GLOBAL _zx_aaddr2saddr
484   0000              	GLOBAL _zx_aaddr2py_fastcall
485   0000              	GLOBAL _zx_aaddr2py
486   0000              	GLOBAL _zx_aaddr2px_fastcall
487   0000              	GLOBAL _zx_aaddr2px
488   0000              	GLOBAL _zx_aaddr2cy_fastcall
489   0000              	GLOBAL _zx_aaddr2cy
490   0000              	GLOBAL _zx_aaddr2cx_fastcall
491   0000              	GLOBAL _zx_aaddr2cx
492   0000              	GLOBAL _zx_visit_wc_pix_callee
493   0000              	GLOBAL _zx_visit_wc_pix
494   0000              	GLOBAL _zx_visit_wc_attr_callee
495   0000              	GLOBAL _zx_visit_wc_attr
496   0000              	GLOBAL _zx_scroll_wc_up_pix_callee
497   0000              	GLOBAL _zx_scroll_wc_up_pix
498   0000              	GLOBAL _zx_scroll_wc_up_attr_callee
499   0000              	GLOBAL _zx_scroll_wc_up_attr
500   0000              	GLOBAL _zx_scroll_wc_up_callee
501   0000              	GLOBAL _zx_scroll_wc_up
502   0000              	GLOBAL _zx_scroll_up_pix_callee
503   0000              	GLOBAL _zx_scroll_up_pix
504   0000              	GLOBAL _zx_scroll_up_attr_callee
505   0000              	GLOBAL _zx_scroll_up_attr
506   0000              	GLOBAL _zx_scroll_up_callee
507   0000              	GLOBAL _zx_scroll_up
508   0000              	GLOBAL _zx_cls_wc_pix_callee
509   0000              	GLOBAL _zx_cls_wc_pix
510   0000              	GLOBAL _zx_cls_wc_attr_callee
511   0000              	GLOBAL _zx_cls_wc_attr
512   0000              	GLOBAL _zx_cls_wc_callee
513   0000              	GLOBAL _zx_cls_wc
514   0000              	GLOBAL _zx_cls_pix_fastcall
515   0000              	GLOBAL _zx_cls_pix
516   0000              	GLOBAL _zx_cls_attr_fastcall
517   0000              	GLOBAL _zx_cls_attr
518   0000              	GLOBAL _zx_cls_fastcall
519   0000              	GLOBAL _zx_cls
520   0000              	GLOBAL _zx_border_fastcall
521   0000              	GLOBAL _zx_border
522   0000              	GLOBAL _spr_colision_b2
523   0000              	GLOBAL _spr_colision_b
524   0000              	GLOBAL _spr_flatten
525   0000              	GLOBAL _spr_btile_paint_back
526   0000              	GLOBAL _spr_bullet_explode
527   0000              	GLOBAL _spr_init_anim_bullets
528   0000              	GLOBAL _spr_turn_horizontal
529   0000              	GLOBAL _spr_play_bullets
530   0000              	GLOBAL _spr_play_anim
531   0000              	GLOBAL _spr_add_anim
532   0000              	GLOBAL _spr_clear_scr
533   0000              	GLOBAL _spr_page_map
534   0000              	GLOBAL _spr_page_down
535   0000              	GLOBAL _spr_page_up
536   0000              	GLOBAL _spr_page_right
537   0000              	GLOBAL _spr_page_left
538   0000              	GLOBAL _spr_tile_paint
539   0000              	GLOBAL _spr_calc_hor
540   0000              	GLOBAL _spr_draw_index
541   0000              	GLOBAL _spr_brick_anim
542   0000              	GLOBAL _spr_back_repaint
543   0000              	GLOBAL _spr_tile
544   0000              	GLOBAL _spr_destroy
545   0000              	GLOBAL _spr_tile_dir
546   0000              	GLOBAL _spr_redraw
547   0000              	GLOBAL _spr_move_left
548   0000              	GLOBAL _spr_move_right
549   0000              	GLOBAL _spr_move_horizontal
550   0000              	GLOBAL _spr_move_down
551   0000              	GLOBAL _spr_move_up
552   0000              	GLOBAL _spr_calc_index
553   0000              	GLOBAL _spr_chktime
554   0000              	GLOBAL _menu_define_key
555   0000              	GLOBAL _menu_redefine
556   0000              	GLOBAL _menu_main_print
557   0000              	GLOBAL _menu_main
558   0000              	GLOBAL _game_match_back
559   0000              	GLOBAL _game_attribs
560   0000              	GLOBAL _game_boss_clear
561   0000              	GLOBAL _game_obj_clear
562   0000              	GLOBAL _game_obj_chk
563   0000              	GLOBAL _game_obj_set
564   0000              	GLOBAL _game_shoot_fire_boss
565   0000              	GLOBAL _game_shoot_fire
566   0000              	GLOBAL _game_add_enemy
567   0000              	GLOBAL _game_print_header
568   0000              	GLOBAL _game_check_time
569   0000              	GLOBAL _game_rotate_attrib_osd
570   0000              	GLOBAL _game_rotate_attrib
571   0000              	GLOBAL _game_colour_message
572   0000              	GLOBAL _game_paint_attrib_lin_osd
573   0000              	GLOBAL _game_paint_attrib_lin_h
574   0000              	GLOBAL _game_paint_attrib_lin
575   0000              	GLOBAL _game_print_score
576   0000              	GLOBAL _game_check_cell
577   0000              	GLOBAL _game_check_map
578   0000              	GLOBAL _game_loop
579   0000              	GLOBAL _game_round_init
580   0000              	GLOBAL _game_start_timer
581   0000              	GLOBAL _game_update_stats
582   0000              	GLOBAL _game_print_footer
583   0000              	GLOBAL _game_fill_row
584   0000              	GLOBAL _game_fps
585   0000              	GLOBAL _game_respawn
586   0000              	GLOBAL _game_draw_screen
587   0000              	GLOBAL _boss_turn
588   0000              	GLOBAL _enemy_avoid_dead
589   0000              	GLOBAL _enemy_avoid_fall
590   0000              	GLOBAL _enemy_respawn
591   0000              	GLOBAL _enemy_init
592   0000              	GLOBAL _enemy_move
593   0000              	GLOBAL _enemy_turn
594   0000              	GLOBAL _enemy_static
595   0000              	GLOBAL _enemy_walk
596   0000              	GLOBAL _enemy_horizontal
597   0000              	GLOBAL _enemy_vertical
598   0000              	GLOBAL _ay_fx_play
599   0000              	GLOBAL _ay_midi_play
600   0000              	GLOBAL _ay_is_playing
601   0000              	GLOBAL _ay_reset
602   0000              	GLOBAL _test_func
603   0000              	GLOBAL _test_proc
604   0000              	GLOBAL _in_mouse_kempston_wheel_delta
605   0000              	GLOBAL _in_mouse_kempston_wheel
606   0000              	GLOBAL _in_mouse_kempston_callee
607   0000              	GLOBAL _in_mouse_kempston
608   0000              	GLOBAL _in_mouse_kempston_setpos_callee
609   0000              	GLOBAL _in_mouse_kempston_setpos
610   0000              	GLOBAL _in_mouse_kempston_reset
611   0000              	GLOBAL _in_mouse_kempston_init
612   0000              	GLOBAL _in_mouse_amx_wheel_delta
613   0000              	GLOBAL _in_mouse_amx_wheel
614   0000              	GLOBAL _in_mouse_amx_callee
615   0000              	GLOBAL _in_mouse_amx
616   0000              	GLOBAL _in_mouse_amx_setpos_callee
617   0000              	GLOBAL _in_mouse_amx_setpos
618   0000              	GLOBAL _in_mouse_amx_reset
619   0000              	GLOBAL _in_mouse_amx_init_callee
620   0000              	GLOBAL _in_mouse_amx_init
621   0000              	GLOBAL _in_stick_sinclair2
622   0000              	GLOBAL _in_stick_sinclair1
623   0000              	GLOBAL _in_stick_kempston
624   0000              	GLOBAL _in_stick_fuller
625   0000              	GLOBAL _in_stick_cursor
626   0000              	GLOBAL _in_stick_keyboard_fastcall
627   0000              	GLOBAL _in_stick_keyboard
628   0000              	GLOBAL _in_wait_nokey
629   0000              	GLOBAL _in_wait_key
630   0000              	GLOBAL _in_test_key
631   0000              	GLOBAL _in_pause_fastcall
632   0000              	GLOBAL _in_pause
633   0000              	GLOBAL _in_key_scancode_fastcall
634   0000              	GLOBAL _in_key_scancode
635   0000              	GLOBAL _in_key_pressed_fastcall
636   0000              	GLOBAL _in_key_pressed
637   0000              	GLOBAL _in_inkey
638   0000              	GLOBAL _NIRVANAP_CHAR_TABLE
639   0000              	GLOBAL _NIRVANAP_WIDE_IMAGES
640   0000              	GLOBAL _NIRVANAP_TILE_IMAGES
641   0000              	GLOBAL _NIRVANAP_HOLE
642   0000              	GLOBAL _NIRVANAP_ISR_HOOK
643   0000              	GLOBAL _scan_map
644   0000              	GLOBAL _key_map
645   0000              	GLOBAL _player_lvl_table
646   0000              	GLOBAL _map_paper_last
647   0000              	GLOBAL _map_paper_clr
648   0000              	GLOBAL _map_paper
649   0000              	GLOBAL _draw_count
650   0000              	GLOBAL _g_player_hit_right
651   0000              	GLOBAL _g_player_hit_left
652   0000              	GLOBAL _bullet_count
653   0000              	GLOBAL _spr_hack
654   0000              	GLOBAL _boss_stat
655   0000              	GLOBAL _boss_time_fire
656   0000              	GLOBAL _boss_time
657   0000              	GLOBAL _boss_tile
658   0000              	GLOBAL _boss_inc
659   0000              	GLOBAL _boss_col
660   0000              	GLOBAL _boss_lin
661   0000              	GLOBAL _bullet
662   0000              	GLOBAL _bullet_vel
663   0000              	GLOBAL _bullet_frames
664   0000              	GLOBAL _bullet_colint
665   0000              	GLOBAL _bullet_dir
666   0000              	GLOBAL _bullet_tile
667   0000              	GLOBAL _bullet_col
668   0000              	GLOBAL _bullet_lin
669   0000              	GLOBAL _bullet_col0
670   0000              	GLOBAL _bullet_lin0
671   0000              	GLOBAL _bullet_max
672   0000              	GLOBAL _bullet_class
673   0000              	GLOBAL _mush_class
674   0000              	GLOBAL _mush_index
675   0000              	GLOBAL _anim_count
676   0000              	GLOBAL _anim_respanwn
677   0000              	GLOBAL _anim_loop
678   0000              	GLOBAL _anim_end
679   0000              	GLOBAL _anim_int
680   0000              	GLOBAL _anim_tile
681   0000              	GLOBAL _anim_col
682   0000              	GLOBAL _anim_lin
683   0000              	GLOBAL _map_heigth
684   0000              	GLOBAL _map_width
685   0000              	GLOBAL _scr_curr
686   0000              	GLOBAL _scr_obj1
687   0000              	GLOBAL _scr_obj0
688   0000              	GLOBAL _scr_map
689   0000              	GLOBAL _sprite_speed_alt
690   0000              	GLOBAL _spr_init
691   0000              	GLOBAL _spr_map_tile
692   0000              	GLOBAL _sprite_frames
693   0000              	GLOBAL _sprite_speed
694   0000              	GLOBAL _screen_ink
695   0000              	GLOBAL _screen_paper
696   0000              	GLOBAL _player_onstair
697   0000              	GLOBAL _game_start_scr
698   0000              	GLOBAL _game_respawn_tile
699   0000              	GLOBAL _game_respawn_index
700   0000              	GLOBAL _game_respawn_time
701   0000              	GLOBAL _game_score_top
702   0000              	GLOBAL _player_coins
703   0000              	GLOBAL _player_lives
704   0000              	GLOBAL _game_over
705   0000              	GLOBAL _game_sound
706   0000              	GLOBAL _game_inmune
707   0000              	GLOBAL _game_god_mode
708   0000              	GLOBAL _sprite_curr_index
709   0000              	GLOBAL _spr_count
710   0000              	GLOBAL _bullet_time
711   0000              	GLOBAL _anim_time
712   0000              	GLOBAL _frame_time
713   0000              	GLOBAL _curr_time
714   0000              	GLOBAL _s_state
715   0000              	GLOBAL _attrib_osd
716   0000              	GLOBAL _attrib_hl
717   0000              	GLOBAL _attrib
718   0000              	GLOBAL _zx_val_asm
719   0000              	GLOBAL _enemies
720   0000              	GLOBAL _tmp_ui
721   0000              	GLOBAL _tmp_sc
722   0000              	GLOBAL _tmp_uc
723   0000              	GLOBAL _tmp1
724   0000              	GLOBAL _tmp0
725   0000              	GLOBAL _tmp
726   0000              	GLOBAL _index1
727   0000              	GLOBAL _index0
728   0000              	GLOBAL _loop_count
729   0000              	GLOBAL _s_col1
730   0000              	GLOBAL _s_col0
731   0000              	GLOBAL _s_lin1
732   0000              	GLOBAL _s_lin0
733   0000              	GLOBAL _s_tile1
734   0000              	GLOBAL _s_tile0
735   0000              	GLOBAL _player_brick_time
736   0000              	GLOBAL _player_hit_count
737   0000              	GLOBAL _sprite_horizontal_check
738   0000              	GLOBAL _sprite_on_air
739   0000              	GLOBAL _sprite
740   0000              	GLOBAL _fps
741   0000              	GLOBAL _game_2buttons
742   0000              	GLOBAL _game_respawn_curr_time
743   0000              	GLOBAL _game_worldup
744   0000              	GLOBAL _game_mush_count
745   0000              	GLOBAL _game_boss_fix
746   0000              	GLOBAL _game_boss_hit
747   0000              	GLOBAL _game_boss_alive
748   0000              	GLOBAL _game_boss
749   0000              	GLOBAL _game_world
750   0000              	GLOBAL _game_gravity
751   0000              	GLOBAL _player_onfire
752   0000              	GLOBAL _player_anim_stair
753   0000              	GLOBAL _player_hit_time
754   0000              	GLOBAL _player_lin_scr
755   0000              	GLOBAL _player_col_scr
756   0000              	GLOBAL _player_lvl
757   0000              	GLOBAL _player_int
758   0000              	GLOBAL _player_str
759   0000              	GLOBAL _player_max_vita
760   0000              	GLOBAL _player_max_mana
761   0000              	GLOBAL _player_vita
762   0000              	GLOBAL _player_mana
763   0000              	GLOBAL _player_keys
764   0000              	GLOBAL _player_vel_inc
765   0000              	GLOBAL _player_vel_y1
766   0000              	GLOBAL _player_vel_y0
767   0000              	GLOBAL _player_vel_y
768   0000              	GLOBAL _player_vel_x
769   0000              	GLOBAL _player_score
770   0000              	GLOBAL _last_time
771   0000              	GLOBAL _player_slide
772   0000              	GLOBAL _spr_timer
773   0000              	GLOBAL _jump_lin
774   0000              	GLOBAL _player_hit_col
775   0000              	GLOBAL _player_hit_lin
776   0000              	GLOBAL _colint
777   0000              	GLOBAL _col
778   0000              	GLOBAL _lin
779   0000              	GLOBAL _tile
780   0000              	GLOBAL _state_a
781   0000              	GLOBAL _state
782   0000              	GLOBAL _class
783   0000              	GLOBAL _tbuffer
784   0000              	GLOBAL _dirs_alt
785   0000              	GLOBAL _dirs
786   0000              	GLOBAL _k2
787   0000              	GLOBAL _k1
788   0000              	GLOBAL _joyfunc2
789   0000              	GLOBAL _joyfunc1
790   0000              	GLOBAL _btiles
791   0000              	GLOBAL _spec128
792   0000              	GLOBAL _GLOBAL_ZX_PORT_7FFD
793   0000              	GLOBAL _GLOBAL_ZX_PORT_1FFD
794   0000              	GLOBAL _GLOBAL_ZX_PORT_FE
795   0000              	GLOBAL _ay_effect_20
796   0000              	GLOBAL _ay_effect_19
797   0000              	GLOBAL _ay_effect_18
798   0000              	GLOBAL _ay_effect_17
799   0000              	GLOBAL _ay_effect_16
800   0000              	GLOBAL _ay_effect_15
801   0000              	GLOBAL _ay_effect_14
802   0000              	GLOBAL _ay_effect_13
803   0000              	GLOBAL _ay_effect_12
804   0000              	GLOBAL _ay_effect_11
805   0000              	GLOBAL _ay_effect_10
806   0000              	GLOBAL _ay_effect_09
807   0000              	GLOBAL _ay_effect_08
808   0000              	GLOBAL _ay_effect_07
809   0000              	GLOBAL _ay_effect_06
810   0000              	GLOBAL _ay_effect_05
811   0000              	GLOBAL _ay_effect_04
812   0000              	GLOBAL _ay_effect_03
813   0000              	GLOBAL _ay_effect_02
814   0000              	GLOBAL _ay_effect_01
815   0000              	GLOBAL _pb_midi_phase_1
816   0000              	GLOBAL _pb_midi_title
817   0000              	GLOBAL _control_method
818   0000              	GLOBAL _world0_h
819   0000              	GLOBAL _world0_w
820   0000              	GLOBAL _world0
821   0000              	GLOBAL _paper0
822   0000              	GLOBAL _lenght0
823   0000              	GLOBAL _start_scr0
824   0000              ;--------------------------------------------------------
825   0000              ; special function registers
826   0000              ;--------------------------------------------------------
827   0000              defc _IO_FE	=	0x00fe
828   0000              defc _IO_1FFD	=	0x1ffd
829   0000              defc _IO_7FFD	=	0x7ffd
830   0000              ;--------------------------------------------------------
831   0000              ; ram data
832   0000              ;--------------------------------------------------------
833   0000              	SECTION bss_compiler
834   0000              ;--------------------------------------------------------
835   0000              ; ram data
836   0000              ;--------------------------------------------------------
837   0000              
838   0000              IF 0
839   0000              
840   0000              ; .area _INITIALIZED removed by z88dk
841   0000              
842   0000              
843   0000              ENDIF
844   0000              
845   0000              ;--------------------------------------------------------
846   0000              ; absolute external ram data
847   0000              ;--------------------------------------------------------
848   0000              	SECTION IGNORE
849   0000              ;--------------------------------------------------------
850   0000              ; global & static initialisations
851   0000              ;--------------------------------------------------------
852   0000              	SECTION code_crt_init
853   0000              ;--------------------------------------------------------
854   0000              ; Home
855   0000              ;--------------------------------------------------------
856   0000              	SECTION IGNORE
857   0000              ;--------------------------------------------------------
858   0000              ; code
859   0000              ;--------------------------------------------------------
860   0000              	SECTION code_compiler
861   0000              ;	---------------------------------
862   0000              ; Function player_init
863   0000              ; ---------------------------------
864   0000              _player_init:
865   0000  CD 00 00    	call	___sdcc_enter_ix
866   0003  21 07 00    	ld	hl, +(_class + 0x0007)
867   0006  36 00       	ld	(hl),0x00
868   0008  21 07 00    	ld	hl, +(_tile + 0x0007)
869   000B  DD 7E 06    	ld	a,(ix+6)
870   000E  77          	ld	(hl), a
871   000F  21 07 00    	ld	hl, +(_lin + 0x0007)
872   0012  DD 7E 04    	ld	a,(ix+4)
873   0015  77          	ld	(hl), a
874   0016  21 07 00    	ld	hl, +(_col + 0x0007)
875   0019  DD 7E 05    	ld	a,(ix+5)
876   001C  77          	ld	(hl), a
877   001D  21 07 00    	ld	hl, +(_colint + 0x0007)
878   0020  36 00       	ld	(hl),0x00
879   0022  21 07 00    	ld	hl, +(_state + 0x0007)
880   0025  36 00       	ld	(hl),0x00
881   0027  01 07 00    	ld	bc,_state_a+7
882   002A  AF          	xor	a, a
883   002B  02          	ld	(bc), a
884   002C  21 07 00    	ld	hl, +(_jump_lin + 0x0007)
885   002F  DD 7E 04    	ld	a,(ix+4)
886   0032  77          	ld	(hl), a
887   0033  ED 5B 00 00 	ld	de,(_curr_time)
888   0037  ED 53 0E 00 	ld	(_last_time + 0x000e),de
889   003B  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
890   003E  36 00       	ld	(hl),0x00
891   0040  0A          	ld	a, (bc)
892   0041  F6 11       	or	a,+(0x01|0x10)
893   0043  02          	ld	(bc),a
894   0044  21 00 00    	ld	hl,_player_hit_col
895   0047  36 00       	ld	(hl),0x00
896   0049  21 00 00    	ld	hl,_player_hit_lin
897   004C  36 00       	ld	(hl),0x00
898   004E  21 00 00    	ld	hl,_player_slide
899   0051  36 00       	ld	(hl),0x00
900   0053  21 00 00    	ld	hl,_player_onstair
901   0056  36 00       	ld	(hl),0x00
902   0058  21 00 00    	ld	hl,_player_onfire
903   005B  36 00       	ld	(hl),0x00
904   005D  DD 66 05    	ld	h,(ix+5)
905   0060  DD 6E 04    	ld	l,(ix+4)
906   0063  E5          	push	hl
907   0064  DD 56 06    	ld	d,(ix+6)
908   0067  1E 07       	ld	e,0x07
909   0069  D5          	push	de
910   006A  CD 00 00    	call	_NIRVANAP_spriteT_callee
911   006D  DD E1       	pop	ix
912   006F  C9          	ret
913   0070              	SECTION code_compiler
914   0070              ;	---------------------------------
915   0070              ; Function player_turn
916   0070              ; ---------------------------------
917   0070              _player_turn:
918   0070  21 00 00    	ld	hl,_sprite
919   0073  CD 00 00    	call	_spr_chktime
920   0076  7D          	ld	a, l
921   0077  B7          	or	a, a
922   0078  C8          	ret	Z
923   0079  21 00 00    	ld	hl,_k1
924   007C  E5          	push	hl
925   007D  2A 00 00    	ld	hl,(_joyfunc1)
926   0080  CD 00 00    	call	___sdcc_call_hl
927   0083  F1          	pop	af
928   0084  7D          	ld	a,l
929   0085  32 00 00    	ld	(_dirs),a
930   0088  21 00 00    	ld	hl,_k2
931   008B  E5          	push	hl
932   008C  2A 00 00    	ld	hl,(_joyfunc2)
933   008F  CD 00 00    	call	___sdcc_call_hl
934   0092  F1          	pop	af
935   0093  7D          	ld	a,l
936   0094  32 00 00    	ld	(_dirs_alt),a
937   0097  CD 9D 00    	call	_player_move
938   009A  C3 D6 03    	jp  _player_collision
939   009D              	SECTION code_compiler
940   009D              ;	---------------------------------
941   009D              ; Function player_move
942   009D              ; ---------------------------------
943   009D              _player_move:
944   009D  3A 07 00    	ld	a,(_lin + 0x0007)
945   00A0  32 00 00    	ld	(_s_lin0),a
946   00A3  3A 07 00    	ld	a,(_col + 0x0007)
947   00A6  32 00 00    	ld	(_s_col0),a
948   00A9  21 07 00    	ld	hl,+(_tile + 0x0007)
949   00AC  4E          	ld	c, (hl)
950   00AD  21 07 00    	ld	hl,+(_colint + 0x0007)
951   00B0  46          	ld	b, (hl)
952   00B1  79          	ld	a, c
953   00B2  80          	add	a, b
954   00B3  32 00 00    	ld	(_s_tile0),a
955   00B6  3A 07 00    	ld	a,(_state + 0x0007)
956   00B9  32 00 00    	ld	(_s_state),a
957   00BC  21 00 00    	ld	hl,_s_state
958   00BF  CB 46       	bit	0, (hl)
959   00C1  20 07       	jr	NZ,l_player_move_00113
960   00C3  21 00 00    	ld	hl,_s_state
961   00C6  CB 4E       	bit	1, (hl)
962   00C8  28 49       	jr	Z,l_player_move_00114
963   00CA              l_player_move_00113:
964   00CA  CD 49 03    	call	_player_fire
965   00CD  3A 00 00    	ld	a,(_player_vel_y)
966   00D0  21 00 00    	ld	hl,_player_vel_y1
967   00D3  96          	sub	a, (hl)
968   00D4  E2 D9 00    	jp	PO, l_player_move_00162
969   00D7  EE 80       	xor	a,0x80
970   00D9              l_player_move_00162:
971   00D9  F2 FC 00    	jp	P, l_player_move_00106
972   00DC  21 00 00    	ld	hl,_dirs
973   00DF  CB 56       	bit	2, (hl)
974   00E1  28 09       	jr	Z,l_player_move_00102
975   00E3  21 00 00    	ld	hl,_s_state
976   00E6  7E          	ld	a,(hl)
977   00E7  F6 08       	or	a,0x08
978   00E9  E6 FB       	and	a,0xfb
979   00EB  77          	ld	(hl),a
980   00EC              l_player_move_00102:
981   00EC  21 00 00    	ld	hl,_dirs
982   00EF  CB 4E       	bit	1, (hl)
983   00F1  28 09       	jr	Z,l_player_move_00106
984   00F3  21 00 00    	ld	hl,_s_state
985   00F6  7E          	ld	a,(hl)
986   00F7  F6 04       	or	a,0x04
987   00F9  E6 F7       	and	a,0xf7
988   00FB  77          	ld	(hl),a
989   00FC              l_player_move_00106:
990   00FC  CD C2 0D    	call	_player_move_jump
991   00FF  7D          	ld	a, l
992   0100  B7          	or	a, a
993   0101  28 1C       	jr	Z,l_player_move_00115
994   0103  3A 00 00    	ld	a,(_player_onstair)
995   0106  B7          	or	a, a
996   0107  20 16       	jr	NZ,l_player_move_00115
997   0109  21 60 08    	ld	hl,0x0860
998   010C  E5          	push	hl
999   010D  CD B5 06    	call	_player_tile
1000  0110  F1          	pop	af
1001  0111  18 0C       	jr	l_player_move_00115
1002  0113              l_player_move_00114:
1003  0113  CD 85 01    	call	_player_move_input
1004  0116  3A 00 00    	ld	a,(_player_onstair)
1005  0119  B7          	or	a, a
1006  011A  20 03       	jr	NZ,l_player_move_00115
1007  011C  CD 3D 0C    	call	_player_check_floor
1008  011F              l_player_move_00115:
1009  011F  CD 00 00    	call	_spr_redraw
1010  0122  7D          	ld	a, l
1011  0123  B7          	or	a, a
1012  0124  28 03       	jr	Z,l_player_move_00118
1013  0126  CD D0 06    	call	_player_check_map
1014  0129              l_player_move_00118:
1015  0129  3A 00 00    	ld	a,(_player_hit_lin)
1016  012C  B7          	or	a, a
1017  012D  28 03       	jr	Z,l_player_move_00120
1018  012F  CD A7 0B    	call	_player_hit_platform_clear
1019  0132              l_player_move_00120:
1020  0132  3A 00 00    	ld	a,(_s_state)
1021  0135  32 07 00    	ld	((_state + 0x0007)),a
1022  0138  2E 00       	ld	l,0x00
1023  013A  C9          	ret
1024  013B              	SECTION code_compiler
1025  013B              ;	---------------------------------
1026  013B              ; Function player_check_input
1027  013B              ; ---------------------------------
1028  013B              _player_check_input:
1029  013B  21 00 00    	ld	hl,_dirs
1030  013E  CB 56       	bit	2, (hl)
1031  0140  28 0C       	jr	Z,l_player_check_input_00102
1032  0142  21 00 00    	ld	hl,_dirs
1033  0145  CB 5E       	bit	3, (hl)
1034  0147  28 05       	jr	Z,l_player_check_input_00102
1035  0149  21 00 00    	ld	hl,_dirs
1036  014C  36 00       	ld	(hl),0x00
1037  014E              l_player_check_input_00102:
1038  014E  21 00 00    	ld	hl,_dirs
1039  0151  7E          	ld	a, (hl)
1040  0152  CB 07       	rlc	a
1041  0154  E6 01       	and	a,0x01
1042  0156  CB 47       	bit	0, a
1043  0158  20 28       	jr	NZ,l_player_check_input_00107
1044  015A  CB 56       	bit	2, (hl)
1045  015C  20 24       	jr	NZ,l_player_check_input_00107
1046  015E  21 00 00    	ld	hl,_dirs
1047  0161  CB 5E       	bit	3, (hl)
1048  0163  20 1D       	jr	NZ,l_player_check_input_00107
1049  0165  21 00 00    	ld	hl,_dirs
1050  0168  CB 46       	bit	0, (hl)
1051  016A  20 16       	jr	NZ,l_player_check_input_00107
1052  016C  21 00 00    	ld	hl,_dirs
1053  016F  CB 4E       	bit	1, (hl)
1054  0171  20 0F       	jr	NZ,l_player_check_input_00107
1055  0173  3A 00 00    	ld	a,(_dirs_alt)
1056  0176  CB 07       	rlc	a
1057  0178  E6 01       	and	a,0x01
1058  017A  CB 47       	bit	0, a
1059  017C  20 04       	jr	NZ,l_player_check_input_00107
1060  017E  2E 00       	ld	l,0x00
1061  0180  18 02       	jr	l_player_check_input_00108
1062  0182              l_player_check_input_00107:
1063  0182  2E 01       	ld	l,0x01
1064  0184              l_player_check_input_00108:
1065  0184  C9          	ret
1066  0185              	SECTION code_compiler
1067  0185              ;	---------------------------------
1068  0185              ; Function player_move_input
1069  0185              ; ---------------------------------
1070  0185              _player_move_input:
1071  0185  CD 3B 01    	call	_player_check_input
1072  0188  7D          	ld	a, l
1073  0189  B7          	or	a, a
1074  018A  CA 09 03    	jp	Z, l_player_move_input_00149
1075  018D  CD 49 03    	call	_player_fire
1076  0190  7D          	ld	a, l
1077  0191  B7          	or	a, a
1078  0192  28 0A       	jr	Z,l_player_move_input_00102
1079  0194  21 00 00    	ld	hl,_dirs
1080  0197  36 00       	ld	(hl),0x00
1081  0199  2E 00       	ld	l,0x00
1082  019B  C3 2F 03    	jp	l_player_move_input_00151
1083  019E              l_player_move_input_00102:
1084  019E  3A 00 00    	ld	a,(_game_2buttons)
1085  01A1  B7          	or	a, a
1086  01A2  28 07       	jr	Z,l_player_move_input_00104
1087  01A4  3A 00 00    	ld	a,(_dirs)
1088  01A7  E6 80       	and	a,0x80
1089  01A9  18 16       	jr	l_player_move_input_00105
1090  01AB              l_player_move_input_00104:
1091  01AB  21 00 00    	ld	hl,_dirs
1092  01AE  7E          	ld	a, (hl)
1093  01AF  CB 07       	rlc	a
1094  01B1  E6 01       	and	a,0x01
1095  01B3  CB 47       	bit	0, a
1096  01B5  28 04       	jr	Z,l_player_move_input_00153
1097  01B7  CB 46       	bit	0, (hl)
1098  01B9  20 04       	jr	NZ,l_player_move_input_00154
1099  01BB              l_player_move_input_00153:
1100  01BB  3E 00       	ld	a,0x00
1101  01BD  18 02       	jr	l_player_move_input_00155
1102  01BF              l_player_move_input_00154:
1103  01BF  3E 01       	ld	a,0x01
1104  01C1              l_player_move_input_00155:
1105  01C1              l_player_move_input_00105:
1106  01C1  B7          	or	a, a
1107  01C2  28 4A       	jr	Z,l_player_move_input_00109
1108  01C4  21 00 00    	ld	hl,_player_vel_inc
1109  01C7  36 01       	ld	(hl),0x01
1110  01C9  CD 00 00    	call	_ay_is_playing
1111  01CC  7D          	ld	a, l
1112  01CD  D6 03       	sub	a,0x03
1113  01CF  28 06       	jr	Z,l_player_move_input_00107
1114  01D1  21 00 00    	ld	hl,_ay_effect_03
1115  01D4  CD 00 00    	call	_ay_fx_play
1116  01D7              l_player_move_input_00107:
1117  01D7  21 00 00    	ld	hl,_player_onstair
1118  01DA  36 00       	ld	(hl),0x00
1119  01DC  21 00 00    	ld	hl,_s_state
1120  01DF  7E          	ld	a,(hl)
1121  01E0  F6 01       	or	a,0x01
1122  01E2  E6 FD       	and	a,0xfd
1123  01E4  77          	ld	(hl),a
1124  01E5  3A 07 00    	ld	a,(_lin + 0x0007)
1125  01E8  32 07 00    	ld	((_jump_lin + 0x0007)),a
1126  01EB  3A 00 00    	ld	a,(_s_state)
1127  01EE  32 07 00    	ld	((_state + 0x0007)),a
1128  01F1  21 64 08    	ld	hl,0x0864
1129  01F4  E5          	push	hl
1130  01F5  CD B5 06    	call	_player_tile
1131  01F8  F1          	pop	af
1132  01F9  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
1133  01FC  36 02       	ld	(hl),0x02
1134  01FE  21 00 00    	ld	hl,_player_slide
1135  0201  36 00       	ld	(hl),0x00
1136  0203  3A 00 00    	ld	a,(_player_vel_y0)
1137  0206  32 00 00    	ld	(_player_vel_y),a
1138  0209  2E 01       	ld	l,0x01
1139  020B  C3 2F 03    	jp	l_player_move_input_00151
1140  020E              l_player_move_input_00109:
1141  020E  21 00 00    	ld	hl,_dirs
1142  0211  CB 5E       	bit	3, (hl)
1143  0213  28 23       	jr	Z,l_player_move_input_00113
1144  0215  CD 30 03    	call	_player_fix_walk_lin
1145  0218  21 00 00    	ld	hl,_s_state
1146  021B  7E          	ld	a,(hl)
1147  021C  F6 04       	or	a,0x04
1148  021E  E6 F7       	and	a,0xf7
1149  0220  77          	ld	(hl),a
1150  0221  01 07 00    	ld	bc,_state_a+7
1151  0224  0A          	ld	a, (bc)
1152  0225  F6 10       	or	a,0x10
1153  0227  E6 F7       	and	a,0xf7
1154  0229  02          	ld	(bc),a
1155  022A  3A 00 00    	ld	a,(_player_onstair)
1156  022D  B7          	or	a, a
1157  022E  28 05       	jr	Z,l_player_move_input_00111
1158  0230  2E 00       	ld	l,0x00
1159  0232  CD 23 06    	call	_player_check_stairs
1160  0235              l_player_move_input_00111:
1161  0235  CD 00 00    	call	_spr_move_horizontal
1162  0238              l_player_move_input_00113:
1163  0238  21 00 00    	ld	hl,_dirs
1164  023B  CB 56       	bit	2, (hl)
1165  023D  28 23       	jr	Z,l_player_move_input_00117
1166  023F  CD 30 03    	call	_player_fix_walk_lin
1167  0242  21 00 00    	ld	hl,_s_state
1168  0245  7E          	ld	a,(hl)
1169  0246  F6 08       	or	a,0x08
1170  0248  E6 FB       	and	a,0xfb
1171  024A  77          	ld	(hl),a
1172  024B  01 07 00    	ld	bc,_state_a+7
1173  024E  0A          	ld	a, (bc)
1174  024F  F6 08       	or	a,0x08
1175  0251  E6 EF       	and	a,0xef
1176  0253  02          	ld	(bc),a
1177  0254  3A 00 00    	ld	a,(_player_onstair)
1178  0257  B7          	or	a, a
1179  0258  28 05       	jr	Z,l_player_move_input_00115
1180  025A  2E 00       	ld	l,0x00
1181  025C  CD 23 06    	call	_player_check_stairs
1182  025F              l_player_move_input_00115:
1183  025F  CD 00 00    	call	_spr_move_horizontal
1184  0262              l_player_move_input_00117:
1185  0262  21 00 00    	ld	hl,_dirs
1186  0265  CB 46       	bit	0, (hl)
1187  0267  28 3C       	jr	Z,l_player_move_input_00129
1188  0269  2E 00       	ld	l,0x00
1189  026B  CD 23 06    	call	_player_check_stairs
1190  026E  3A 00 00    	ld	a,(_player_onstair)
1191  0271  B7          	or	a, a
1192  0272  20 13       	jr	NZ,l_player_move_input_00121
1193  0274  2E 01       	ld	l,0x01
1194  0276  CD 23 06    	call	_player_check_stairs
1195  0279  3A 00 00    	ld	a,(_player_onstair)
1196  027C  B7          	or	a, a
1197  027D  20 08       	jr	NZ,l_player_move_input_00121
1198  027F  3E FE       	ld	a,0xfe
1199  0281  F5          	push	af
1200  0282  33          	inc	sp
1201  0283  CD 7A 05    	call	_player_check_stairs_vertical
1202  0286  33          	inc	sp
1203  0287              l_player_move_input_00121:
1204  0287  3A 00 00    	ld	a,(_player_onstair)
1205  028A  B7          	or	a, a
1206  028B  28 05       	jr	Z,l_player_move_input_00126
1207  028D  CD 00 00    	call	_spr_move_up
1208  0290  18 13       	jr	l_player_move_input_00129
1209  0292              l_player_move_input_00126:
1210  0292  21 00 00    	ld	hl,_dirs
1211  0295  CB 5E       	bit	3, (hl)
1212  0297  20 0C       	jr	NZ,l_player_move_input_00129
1213  0299  21 00 00    	ld	hl,_dirs
1214  029C  CB 56       	bit	2, (hl)
1215  029E  20 05       	jr	NZ,l_player_move_input_00129
1216  02A0  2E 00       	ld	l,0x00
1217  02A2  C3 2F 03    	jp	l_player_move_input_00151
1218  02A5              l_player_move_input_00129:
1219  02A5  21 00 00    	ld	hl,_dirs
1220  02A8  CB 4E       	bit	1, (hl)
1221  02AA  28 3B       	jr	Z,l_player_move_input_00141
1222  02AC  2E 00       	ld	l,0x00
1223  02AE  CD 23 06    	call	_player_check_stairs
1224  02B1  3A 00 00    	ld	a,(_player_onstair)
1225  02B4  B7          	or	a, a
1226  02B5  20 13       	jr	NZ,l_player_move_input_00133
1227  02B7  2E 01       	ld	l,0x01
1228  02B9  CD 23 06    	call	_player_check_stairs
1229  02BC  3A 00 00    	ld	a,(_player_onstair)
1230  02BF  B7          	or	a, a
1231  02C0  20 08       	jr	NZ,l_player_move_input_00133
1232  02C2  3E 12       	ld	a,0x12
1233  02C4  F5          	push	af
1234  02C5  33          	inc	sp
1235  02C6  CD 7A 05    	call	_player_check_stairs_vertical
1236  02C9  33          	inc	sp
1237  02CA              l_player_move_input_00133:
1238  02CA  3A 00 00    	ld	a,(_player_onstair)
1239  02CD  B7          	or	a, a
1240  02CE  28 05       	jr	Z,l_player_move_input_00138
1241  02D0  CD 00 00    	call	_spr_move_down
1242  02D3  18 12       	jr	l_player_move_input_00141
1243  02D5              l_player_move_input_00138:
1244  02D5  21 00 00    	ld	hl,_dirs
1245  02D8  CB 5E       	bit	3, (hl)
1246  02DA  20 0B       	jr	NZ,l_player_move_input_00141
1247  02DC  21 00 00    	ld	hl,_dirs
1248  02DF  CB 56       	bit	2, (hl)
1249  02E1  20 04       	jr	NZ,l_player_move_input_00141
1250  02E3  2E 00       	ld	l,0x00
1251  02E5  18 48       	jr	l_player_move_input_00151
1252  02E7              l_player_move_input_00141:
1253  02E7  3A 00 00    	ld	a,(_s_state)
1254  02EA  32 07 00    	ld	((_state + 0x0007)),a
1255  02ED  3A 00 00    	ld	a,(_player_onstair)
1256  02F0  B7          	or	a, a
1257  02F1  28 0A       	jr	Z,l_player_move_input_00143
1258  02F3  21 72 00    	ld	hl,0x0072
1259  02F6  E5          	push	hl
1260  02F7  CD B5 06    	call	_player_tile
1261  02FA  F1          	pop	af
1262  02FB  18 08       	jr	l_player_move_input_00144
1263  02FD              l_player_move_input_00143:
1264  02FD  21 60 08    	ld	hl,0x0860
1265  0300  E5          	push	hl
1266  0301  CD B5 06    	call	_player_tile
1267  0304  F1          	pop	af
1268  0305              l_player_move_input_00144:
1269  0305  2E 01       	ld	l,0x01
1270  0307  18 26       	jr	l_player_move_input_00151
1271  0309              l_player_move_input_00149:
1272  0309  21 07 00    	ld	hl, +(_colint + 0x0007)
1273  030C  36 00       	ld	(hl),0x00
1274  030E  3A 00 00    	ld	a,(_player_onstair)
1275  0311  B7          	or	a, a
1276  0312  28 0A       	jr	Z,l_player_move_input_00146
1277  0314  21 72 00    	ld	hl,0x0072
1278  0317  E5          	push	hl
1279  0318  CD B5 06    	call	_player_tile
1280  031B  F1          	pop	af
1281  031C  18 08       	jr	l_player_move_input_00147
1282  031E              l_player_move_input_00146:
1283  031E  21 70 01    	ld	hl,0x0170
1284  0321  E5          	push	hl
1285  0322  CD B5 06    	call	_player_tile
1286  0325  F1          	pop	af
1287  0326              l_player_move_input_00147:
1288  0326  21 00 00    	ld	hl,_s_state
1289  0329  7E          	ld	a,(hl)
1290  032A  E6 F3       	and	a,+(0xf7&0xfb)
1291  032C  77          	ld	(hl),a
1292  032D  2E 00       	ld	l,0x00
1293  032F              l_player_move_input_00151:
1294  032F  C9          	ret
1295  0330              	SECTION code_compiler
1296  0330              ;	---------------------------------
1297  0330              ; Function player_fix_walk_lin
1298  0330              ; ---------------------------------
1299  0330              _player_fix_walk_lin:
1300  0330  3A 00 00    	ld	a,(_player_onstair)
1301  0333  B7          	or	a, a
1302  0334  C0          	ret	NZ
1303  0335  01 07 00    	ld	bc,_lin+7
1304  0338  3A 00 00    	ld	a,(_s_lin0)
1305  033B  07          	rlca
1306  033C  07          	rlca
1307  033D  07          	rlca
1308  033E  07          	rlca
1309  033F  E6 0F       	and	a,0x0f
1310  0341  07          	rlca
1311  0342  07          	rlca
1312  0343  07          	rlca
1313  0344  07          	rlca
1314  0345  E6 F0       	and	a,0xf0
1315  0347  02          	ld	(bc), a
1316  0348  C9          	ret
1317  0349              	SECTION code_compiler
1318  0349              ;	---------------------------------
1319  0349              ; Function player_fire
1320  0349              ; ---------------------------------
1321  0349              _player_fire:
1322  0349  CD 00 00    	call	___sdcc_enter_ix
1323  034C  3B          	dec	sp
1324  034D  3A 00 00    	ld	a,(_game_2buttons)
1325  0350  B7          	or	a, a
1326  0351  28 0A       	jr	Z,l_player_fire_00102
1327  0353  3A 00 00    	ld	a,(_dirs_alt)
1328  0356  E6 80       	and	a,0x80
1329  0358  32 00 00    	ld	(_player_onfire),a
1330  035B  18 1A       	jr	l_player_fire_00103
1331  035D              l_player_fire_00102:
1332  035D  21 00 00    	ld	hl,_dirs
1333  0360  7E          	ld	a, (hl)
1334  0361  CB 07       	rlc	a
1335  0363  E6 01       	and	a,0x01
1336  0365  CB 47       	bit	0, a
1337  0367  28 04       	jr	Z,l_player_fire_00119
1338  0369  CB 46       	bit	0, (hl)
1339  036B  28 04       	jr	Z,l_player_fire_00120
1340  036D              l_player_fire_00119:
1341  036D  0E 00       	ld	c,0x00
1342  036F  18 02       	jr	l_player_fire_00121
1343  0371              l_player_fire_00120:
1344  0371  0E 01       	ld	c,0x01
1345  0373              l_player_fire_00121:
1346  0373  21 00 00    	ld	hl,_player_onfire
1347  0376  71          	ld	(hl), c
1348  0377              l_player_fire_00103:
1349  0377  3A 00 00    	ld	a,(_player_onfire)
1350  037A  B7          	or	a, a
1351  037B  28 53       	jr	Z,l_player_fire_00116
1352  037D  3A 07 00    	ld	a,(_tile + 0x0007)
1353  0380  FE 70       	cp	a,0x70
1354  0382  28 04       	jr	Z,l_player_fire_00104
1355  0384  D6 71       	sub	a,0x71
1356  0386  20 0D       	jr	NZ,l_player_fire_00105
1357  0388              l_player_fire_00104:
1358  0388  21 60 08    	ld	hl,0x0860
1359  038B  E5          	push	hl
1360  038C  CD B5 06    	call	_player_tile
1361  038F  F1          	pop	af
1362  0390  21 07 00    	ld	hl, +(_colint + 0x0007)
1363  0393  36 00       	ld	(hl),0x00
1364  0395              l_player_fire_00105:
1365  0395  21 00 00    	ld	hl,_player_mana
1366  0398  7E          	ld	a, (hl)
1367  0399  B7          	or	a, a
1368  039A  28 30       	jr	Z,l_player_fire_00113
1369  039C  3A 07 00    	ld	a,(_bullet_col + 0x0007)
1370  039F  3C          	inc	a
1371  03A0  20 2A       	jr	NZ,l_player_fire_00113
1372  03A2  3E 05       	ld	a,0x05
1373  03A4  96          	sub	a, (hl)
1374  03A5  30 0F       	jr	NC,l_player_fire_00110
1375  03A7  3A 00 00    	ld	a,(_game_god_mode)
1376  03AA  B7          	or	a, a
1377  03AB  20 0E       	jr	NZ,l_player_fire_00111
1378  03AD  21 00 00    	ld	hl,_player_mana
1379  03B0  7E          	ld	a, (hl)
1380  03B1  C6 FB       	add	a,0xfb
1381  03B3  77          	ld	(hl), a
1382  03B4  18 05       	jr	l_player_fire_00111
1383  03B6              l_player_fire_00110:
1384  03B6  21 00 00    	ld	hl,_player_mana
1385  03B9  36 00       	ld	(hl),0x00
1386  03BB              l_player_fire_00111:
1387  03BB  CD 00 00    	call	_game_update_stats
1388  03BE  21 00 00    	ld	hl,_ay_effect_05
1389  03C1  CD 00 00    	call	_ay_fx_play
1390  03C4  21 07 78    	ld	hl,0x7807
1391  03C7  E5          	push	hl
1392  03C8  CD 00 00    	call	_game_shoot_fire
1393  03CB  F1          	pop	af
1394  03CC              l_player_fire_00113:
1395  03CC  2E 01       	ld	l,0x01
1396  03CE  18 02       	jr	l_player_fire_00117
1397  03D0              l_player_fire_00116:
1398  03D0  2E 00       	ld	l,0x00
1399  03D2              l_player_fire_00117:
1400  03D2  33          	inc	sp
1401  03D3  DD E1       	pop	ix
1402  03D5  C9          	ret
1403  03D6              	SECTION code_compiler
1404  03D6              ;	---------------------------------
1405  03D6              ; Function player_collision
1406  03D6              ; ---------------------------------
1407  03D6              _player_collision:
1408  03D6  21 19 00    	ld	hl,0x0019
1409  03D9  E5          	push	hl
1410  03DA  2A 00 00    	ld	hl,(_player_hit_time)
1411  03DD  E5          	push	hl
1412  03DE  CD 00 00    	call	_game_check_time
1413  03E1  F1          	pop	af
1414  03E2  F1          	pop	af
1415  03E3  7D          	ld	a,l
1416  03E4  B7          	or	a,a
1417  03E5  CA 2E 05    	jp	Z, l_player_collision_00132
1418  03E8  21 00 00    	ld	hl,_sprite
1419  03EB  36 00       	ld	(hl),0x00
1420  03ED  3A 07 00    	ld	a,(_col + 7)
1421  03F0  32 00 00    	ld	(_s_col1),a
1422  03F3  3A 07 00    	ld	a,(_lin + 7)
1423  03F6  32 00 00    	ld	(_s_lin1),a
1424  03F9  C6 08       	add	a,0x08
1425  03FB  4F          	ld	c, a
1426  03FC  3A 00 00    	ld	a, (_s_col1)
1427  03FF  47          	ld	b,a
1428  0400  C5          	push	bc
1429  0401  CD 00 00    	call	_spr_calc_index
1430  0404  F1          	pop	af
1431  0405  7D          	ld	a,l
1432  0406  32 00 00    	ld	(_sprite_curr_index),a
1433  0409  4F          	ld	c,a
1434  040A  06 00       	ld	b,0x00
1435  040C  21 00 00    	ld	hl,_scr_map
1436  040F  09          	add	hl,bc
1437  0410  4E          	ld	c, (hl)
1438  0411  3E 2F       	ld	a,0x2f
1439  0413  91          	sub	a, c
1440  0414  30 3C       	jr	NC,l_player_collision_00128
1441  0416  79          	ld	a,c
1442  0417  FE 3A       	cp	a,0x3a
1443  0419  30 37       	jr	NC,l_player_collision_00128
1444  041B  D6 39       	sub	a,0x39
1445  041D  20 07       	jr	NZ,l_player_collision_00107
1446  041F  21 00 00    	ld	hl,_game_worldup
1447  0422  36 01       	ld	(hl),0x01
1448  0424  18 2C       	jr	l_player_collision_00128
1449  0426              l_player_collision_00107:
1450  0426  3A 00 00    	ld	a,(_game_god_mode)
1451  0429  B7          	or	a, a
1452  042A  20 16       	jr	NZ,l_player_collision_00102
1453  042C  3A 00 00    	ld	a,(_game_inmune)
1454  042F  B7          	or	a, a
1455  0430  20 10       	jr	NZ,l_player_collision_00102
1456  0432  3E 82       	ld	a,0x82
1457  0434  21 00 00    	ld	hl,_s_lin1
1458  0437  96          	sub	a, (hl)
1459  0438  30 08       	jr	NC,l_player_collision_00102
1460  043A  CD 20 10    	call	_player_lost_life
1461  043D  2E 00       	ld	l,0x00
1462  043F  C3 30 05    	jp	l_player_collision_00133
1463  0442              l_player_collision_00102:
1464  0442  21 00 00    	ld	hl,_ay_effect_06
1465  0445  CD 00 00    	call	_ay_fx_play
1466  0448  2E 06       	ld	l,0x06
1467  044A  CD 00 00    	call	_zx_border_fastcall
1468  044D  2E 32       	ld	l,0x32
1469  044F  CD 90 11    	call	_player_hit
1470  0452              l_player_collision_00128:
1471  0452  21 00 00    	ld	hl,_sprite
1472  0455  7E          	ld	a, (hl)
1473  0456  D6 07       	sub	a,0x07
1474  0458  D2 2E 05    	jp	NC, l_player_collision_00132
1475  045B  3E 00       	ld	a, +((_class) & 0xFF)
1476  045D  86          	add	a, (hl)
1477  045E  4F          	ld	c, a
1478  045F  3E 00       	ld	a, +((_class) / 256)
1479  0461  CE 00       	adc	a,0x00
1480  0463  47          	ld	b, a
1481  0464  0A          	ld	a, (bc)
1482  0465  B7          	or	a, a
1483  0466  CA 27 05    	jp	Z, l_player_collision_00127
1484  0469  4E          	ld	c,(hl)
1485  046A  06 00       	ld	b,0x00
1486  046C  21 00 00    	ld	hl,_col
1487  046F  09          	add	hl,bc
1488  0470  4E          	ld	c, (hl)
1489  0471  06 00       	ld	b,0x00
1490  0473  3A 00 00    	ld	a,(_s_col1)
1491  0476  5F          	ld	e,a
1492  0477  16 00       	ld	d,0x00
1493  0479  79          	ld	a, c
1494  047A  93          	sub	a, e
1495  047B  6F          	ld	l, a
1496  047C  78          	ld	a, b
1497  047D  9A          	sbc	a, d
1498  047E  67          	ld	h, a
1499  047F  CD 00 00    	call	_abs_fastcall
1500  0482  7D          	ld	a,l
1501  0483  D6 02       	sub	a,0x02
1502  0485  7C          	ld	a,h
1503  0486  17          	rla
1504  0487  3F          	ccf
1505  0488  1F          	rra
1506  0489  DE 80       	sbc	a,0x80
1507  048B  D2 27 05    	jp	NC, l_player_collision_00127
1508  048E  2A 00 00    	ld	hl,(_sprite)
1509  0491  26 00       	ld	h,0x00
1510  0493  01 00 00    	ld	bc,_lin
1511  0496  09          	add	hl,bc
1512  0497  4E          	ld	c,(hl)
1513  0498  06 00       	ld	b,0x00
1514  049A  3A 00 00    	ld	a,(_s_lin1)
1515  049D  5F          	ld	e,a
1516  049E  16 00       	ld	d,0x00
1517  04A0  79          	ld	a, c
1518  04A1  93          	sub	a, e
1519  04A2  6F          	ld	l, a
1520  04A3  78          	ld	a, b
1521  04A4  9A          	sbc	a, d
1522  04A5  67          	ld	h, a
1523  04A6  CD 00 00    	call	_abs_fastcall
1524  04A9  7D          	ld	a,l
1525  04AA  D6 0E       	sub	a,0x0e
1526  04AC  7C          	ld	a,h
1527  04AD  17          	rla
1528  04AE  3F          	ccf
1529  04AF  1F          	rra
1530  04B0  DE 80       	sbc	a,0x80
1531  04B2  30 73       	jr	NC,l_player_collision_00127
1532  04B4  2A 00 00    	ld	hl,(_sprite)
1533  04B7  26 00       	ld	h,0x00
1534  04B9  01 00 00    	ld	bc,_class
1535  04BC  09          	add	hl,bc
1536  04BD  7E          	ld	a,(hl)
1537  04BE  FE 06       	cp	a,0x06
1538  04C0  28 05       	jr	Z,l_player_collision_00206
1539  04C2  21 00 00    	ld	hl,_sprite
1540  04C5  18 1D       	jr	l_player_collision_00115
1541  04C7              l_player_collision_00206:
1542  04C7  21 00 00    	ld	hl,_player_vita
1543  04CA  7E          	ld	a, (hl)
1544  04CB  C6 19       	add	a,0x19
1545  04CD  77          	ld	(hl), a
1546  04CE  3A 00 00    	ld	a,(_player_max_vita)
1547  04D1  21 00 00    	ld	hl,_player_vita
1548  04D4  96          	sub	a, (hl)
1549  04D5  30 06       	jr	NC,l_player_collision_00113
1550  04D7  3A 00 00    	ld	a,(_player_max_vita)
1551  04DA  32 00 00    	ld	(_player_vita),a
1552  04DD              l_player_collision_00113:
1553  04DD  CD 31 05    	call	_player_pick_mushroom
1554  04E0  2E 00       	ld	l,0x00
1555  04E2  18 4C       	jr	l_player_collision_00133
1556  04E4              l_player_collision_00115:
1557  04E4  FE 07       	cp	a,0x07
1558  04E6  20 1D       	jr	NZ,l_player_collision_00119
1559  04E8  21 00 00    	ld	hl,_player_mana
1560  04EB  7E          	ld	a, (hl)
1561  04EC  C6 19       	add	a,0x19
1562  04EE  77          	ld	(hl), a
1563  04EF  3A 00 00    	ld	a,(_player_max_mana)
1564  04F2  21 00 00    	ld	hl,_player_mana
1565  04F5  96          	sub	a, (hl)
1566  04F6  30 06       	jr	NC,l_player_collision_00117
1567  04F8  3A 00 00    	ld	a,(_player_max_mana)
1568  04FB  32 00 00    	ld	(_player_mana),a
1569  04FE              l_player_collision_00117:
1570  04FE  CD 31 05    	call	_player_pick_mushroom
1571  0501  2E 00       	ld	l,0x00
1572  0503  18 2B       	jr	l_player_collision_00133
1573  0505              l_player_collision_00119:
1574  0505  D6 08       	sub	a,0x08
1575  0507  20 0A       	jr	NZ,l_player_collision_00121
1576  0509  CD 4B 05    	call	_player_1up
1577  050C  CD 31 05    	call	_player_pick_mushroom
1578  050F  2E 00       	ld	l,0x00
1579  0511  18 1D       	jr	l_player_collision_00133
1580  0513              l_player_collision_00121:
1581  0513  21 00 00    	ld	hl,_ay_effect_06
1582  0516  CD 00 00    	call	_ay_fx_play
1583  0519  2E 02       	ld	l,0x02
1584  051B  CD 00 00    	call	_zx_border_fastcall
1585  051E  2E 14       	ld	l,0x14
1586  0520  CD 90 11    	call	_player_hit
1587  0523  2E 01       	ld	l,0x01
1588  0525  18 09       	jr	l_player_collision_00133
1589  0527              l_player_collision_00127:
1590  0527  21 00 00    	ld	hl,_sprite
1591  052A  34          	inc	(hl)
1592  052B  C3 52 04    	jp	l_player_collision_00128
1593  052E              l_player_collision_00132:
1594  052E  2E 00       	ld	l,0x00
1595  0530              l_player_collision_00133:
1596  0530  C9          	ret
1597  0531              	SECTION code_compiler
1598  0531              ;	---------------------------------
1599  0531              ; Function player_pick_mushroom
1600  0531              ; ---------------------------------
1601  0531              _player_pick_mushroom:
1602  0531  21 00 00    	ld	hl,_ay_effect_12
1603  0534  CD 00 00    	call	_ay_fx_play
1604  0537  21 01 00    	ld	hl,0x0001
1605  053A  CD D6 0B    	call	_player_score_add
1606  053D  CD 00 00    	call	_game_update_stats
1607  0540  2A 00 00    	ld	hl,(_sprite)
1608  0543  CD 00 00    	call	_spr_destroy
1609  0546  21 00 00    	ld	hl,_game_mush_count
1610  0549  35          	dec	(hl)
1611  054A  C9          	ret
1612  054B              	SECTION code_compiler
1613  054B              ;	---------------------------------
1614  054B              ; Function player_1up
1615  054B              ; ---------------------------------
1616  054B              _player_1up:
1617  054B  21 00 00    	ld	hl,_player_lives
1618  054E  7E          	ld	a, (hl)
1619  054F  D6 FF       	sub	a,0xff
1620  0551  D0          	ret	NC
1621  0552  34          	inc	(hl)
1622  0553  CD 00 00    	call	_spr_flatten
1623  0556  21 00 00    	ld	hl,___str_0
1624  0559  E5          	push	hl
1625  055A  21 0C 0C    	ld	hl,0x0c0c
1626  055D  E5          	push	hl
1627  055E  CD 00 00    	call	_zx_print_str
1628  0561  AF          	xor	a, a
1629  0562  F5          	push	af
1630  0563  33          	inc	sp
1631  0564  21 19 00    	ld	hl,0x0019
1632  0567  E5          	push	hl
1633  0568  21 0C 15    	ld	hl,0x150c
1634  056B  E5          	push	hl
1635  056C  3E 0C       	ld	a,0x0c
1636  056E  F5          	push	af
1637  056F  33          	inc	sp
1638  0570  CD 00 00    	call	_game_colour_message
1639  0573  F1          	pop	af
1640  0574  F1          	pop	af
1641  0575  F1          	pop	af
1642  0576  CD 00 00    	call	_game_update_stats
1643  0579  C9          	ret
1644  057A              	SECTION rodata_compiler
1645  0000              ___str_0:
1646  0000  31 20 55 50 21 
                        	DEFM "1 UP!"
1647  0005  00          	DEFB 0x00
1648  0006              	SECTION code_compiler
1649  057A              ;	---------------------------------
1650  057A              ; Function player_check_stairs_vertical
1651  057A              ; ---------------------------------
1652  057A              _player_check_stairs_vertical:
1653  057A  CD 00 00    	call	___sdcc_enter_ix
1654  057D  3B          	dec	sp
1655  057E  21 07 00    	ld	hl,+(_col + 0x0007)
1656  0581  4E          	ld	c, (hl)
1657  0582  CB 41       	bit	0, c
1658  0584  20 2F       	jr	NZ,l_player_check_stairs_vertical_00102
1659  0586  3A 07 00    	ld	a,(_lin + 0x0007)
1660  0589  DD 86 04    	add	a,(ix+4)
1661  058C  47          	ld	b, a
1662  058D  79          	ld	a, c
1663  058E  48          	ld	c,b
1664  058F  47          	ld	b,a
1665  0590  C5          	push	bc
1666  0591  CD 00 00    	call	_spr_calc_index
1667  0594  F1          	pop	af
1668  0595  7D          	ld	a,l
1669  0596  32 00 00    	ld	(_sprite_curr_index),a
1670  0599  4F          	ld	c,a
1671  059A  06 00       	ld	b,0x00
1672  059C  21 00 00    	ld	hl,_scr_map
1673  059F  09          	add	hl,bc
1674  05A0  7E          	ld	a,(hl)
1675  05A1  4F          	ld	c,a
1676  05A2  D6 44       	sub	a,0x44
1677  05A4  38 05       	jr	C,l_player_check_stairs_vertical_00110
1678  05A6  3E 47       	ld	a,0x47
1679  05A8  91          	sub	a, c
1680  05A9  30 04       	jr	NC,l_player_check_stairs_vertical_00111
1681  05AB              l_player_check_stairs_vertical_00110:
1682  05AB  1E 00       	ld	e,0x00
1683  05AD  18 02       	jr	l_player_check_stairs_vertical_00112
1684  05AF              l_player_check_stairs_vertical_00111:
1685  05AF  1E 01       	ld	e,0x01
1686  05B1              l_player_check_stairs_vertical_00112:
1687  05B1  0E 00       	ld	c,0x00
1688  05B3  18 57       	jr	l_player_check_stairs_vertical_00103
1689  05B5              l_player_check_stairs_vertical_00102:
1690  05B5  79          	ld	a, c
1691  05B6  DD 96 04    	sub	a,(ix+4)
1692  05B9  57          	ld	d, a
1693  05BA  01 07 00    	ld	bc,_lin+7
1694  05BD  0A          	ld	a, (bc)
1695  05BE  DD 86 04    	add	a,(ix+4)
1696  05C1  C5          	push	bc
1697  05C2  5F          	ld	e,a
1698  05C3  D5          	push	de
1699  05C4  CD 00 00    	call	_spr_calc_index
1700  05C7  F1          	pop	af
1701  05C8  C1          	pop	bc
1702  05C9  7D          	ld	a,l
1703  05CA  32 00 00    	ld	(_sprite_curr_index),a
1704  05CD  5F          	ld	e,a
1705  05CE  16 00       	ld	d,0x00
1706  05D0  21 00 00    	ld	hl,_scr_map
1707  05D3  19          	add	hl,de
1708  05D4  7E          	ld	a,(hl)
1709  05D5  5F          	ld	e,a
1710  05D6  D6 44       	sub	a,0x44
1711  05D8  38 05       	jr	C,l_player_check_stairs_vertical_00113
1712  05DA  3E 47       	ld	a,0x47
1713  05DC  93          	sub	a, e
1714  05DD  30 04       	jr	NC,l_player_check_stairs_vertical_00114
1715  05DF              l_player_check_stairs_vertical_00113:
1716  05DF  1E 00       	ld	e,0x00
1717  05E1  18 02       	jr	l_player_check_stairs_vertical_00115
1718  05E3              l_player_check_stairs_vertical_00114:
1719  05E3  1E 01       	ld	e,0x01
1720  05E5              l_player_check_stairs_vertical_00115:
1721  05E5  3A 07 00    	ld	a,(_col + 0x0007)
1722  05E8  DD 96 04    	sub	a,(ix+4)
1723  05EB  57          	ld	d, a
1724  05EC  0A          	ld	a, (bc)
1725  05ED  DD 86 04    	add	a,(ix+4)
1726  05F0  D5          	push	de
1727  05F1  5F          	ld	e,a
1728  05F2  D5          	push	de
1729  05F3  CD 00 00    	call	_spr_calc_index
1730  05F6  F1          	pop	af
1731  05F7  D1          	pop	de
1732  05F8  7D          	ld	a,l
1733  05F9  32 00 00    	ld	(_sprite_curr_index),a
1734  05FC  7B          	ld	a, e
1735  05FD  D6 44       	sub	a,0x44
1736  05FF  38 05       	jr	C,l_player_check_stairs_vertical_00116
1737  0601  3E 47       	ld	a,0x47
1738  0603  93          	sub	a, e
1739  0604  30 04       	jr	NC,l_player_check_stairs_vertical_00117
1740  0606              l_player_check_stairs_vertical_00116:
1741  0606  0E 00       	ld	c,0x00
1742  0608  18 02       	jr	l_player_check_stairs_vertical_00118
1743  060A              l_player_check_stairs_vertical_00117:
1744  060A  0E 01       	ld	c,0x01
1745  060C              l_player_check_stairs_vertical_00118:
1746  060C              l_player_check_stairs_vertical_00103:
1747  060C  7B          	ld	a, e
1748  060D  B7          	or	a,a
1749  060E  20 03       	jr	NZ,l_player_check_stairs_vertical_00104
1750  0610  B1          	or	a,c
1751  0611  28 07       	jr	Z,l_player_check_stairs_vertical_00105
1752  0613              l_player_check_stairs_vertical_00104:
1753  0613  21 00 00    	ld	hl,_player_onstair
1754  0616  36 01       	ld	(hl),0x01
1755  0618  18 05       	jr	l_player_check_stairs_vertical_00108
1756  061A              l_player_check_stairs_vertical_00105:
1757  061A  21 00 00    	ld	hl,_player_onstair
1758  061D  36 00       	ld	(hl),0x00
1759  061F              l_player_check_stairs_vertical_00108:
1760  061F  33          	inc	sp
1761  0620  DD E1       	pop	ix
1762  0622  C9          	ret
1763  0623              	SECTION code_compiler
1764  0623              ;	---------------------------------
1765  0623              ; Function player_check_stairs
1766  0623              ; ---------------------------------
1767  0623              _player_check_stairs:
1768  0623  CD 00 00    	call	___sdcc_enter_ix
1769  0626  3B          	dec	sp
1770  0627  5D          	ld	e, l
1771  0628  3A 07 00    	ld	a,(_col + 0x0007)
1772  062B  83          	add	a, e
1773  062C  4F          	ld	c, a
1774  062D  21 07 00    	ld	hl,+(_lin + 0x0007)
1775  0630  46          	ld	b, (hl)
1776  0631  D5          	push	de
1777  0632  79          	ld	a, c
1778  0633  48          	ld	c,b
1779  0634  47          	ld	b,a
1780  0635  C5          	push	bc
1781  0636  CD 00 00    	call	_spr_calc_index
1782  0639  F1          	pop	af
1783  063A  D1          	pop	de
1784  063B  7D          	ld	a,l
1785  063C  32 00 00    	ld	(_sprite_curr_index),a
1786  063F  4F          	ld	c,a
1787  0640  06 00       	ld	b,0x00
1788  0642  21 00 00    	ld	hl,_scr_map
1789  0645  09          	add	hl,bc
1790  0646  7E          	ld	a,(hl)
1791  0647  4F          	ld	c,a
1792  0648  D6 44       	sub	a,0x44
1793  064A  38 05       	jr	C,l_player_check_stairs_00111
1794  064C  3E 47       	ld	a,0x47
1795  064E  91          	sub	a, c
1796  064F  30 04       	jr	NC,l_player_check_stairs_00112
1797  0651              l_player_check_stairs_00111:
1798  0651  0E 00       	ld	c,0x00
1799  0653  18 02       	jr	l_player_check_stairs_00113
1800  0655              l_player_check_stairs_00112:
1801  0655  0E 01       	ld	c,0x01
1802  0657              l_player_check_stairs_00113:
1803  0657  3A 07 00    	ld	a,(_col + 0x0007)
1804  065A  83          	add	a, e
1805  065B  57          	ld	d, a
1806  065C  3A 07 00    	ld	a,(_lin + 0x0007)
1807  065F  C6 0F       	add	a,0x0f
1808  0661  47          	ld	b, a
1809  0662  C5          	push	bc
1810  0663  58          	ld	e,b
1811  0664  D5          	push	de
1812  0665  CD 00 00    	call	_spr_calc_index
1813  0668  F1          	pop	af
1814  0669  C1          	pop	bc
1815  066A  7D          	ld	a,l
1816  066B  32 00 00    	ld	(_sprite_curr_index),a
1817  066E  5F          	ld	e,a
1818  066F  16 00       	ld	d,0x00
1819  0671  21 00 00    	ld	hl,_scr_map
1820  0674  19          	add	hl,de
1821  0675  7E          	ld	a,(hl)
1822  0676  47          	ld	b,a
1823  0677  D6 44       	sub	a,0x44
1824  0679  38 05       	jr	C,l_player_check_stairs_00114
1825  067B  3E 47       	ld	a,0x47
1826  067D  90          	sub	a, b
1827  067E  30 04       	jr	NC,l_player_check_stairs_00115
1828  0680              l_player_check_stairs_00114:
1829  0680  06 00       	ld	b,0x00
1830  0682  18 02       	jr	l_player_check_stairs_00116
1831  0684              l_player_check_stairs_00115:
1832  0684  06 01       	ld	b,0x01
1833  0686              l_player_check_stairs_00116:
1834  0686  79          	ld	a, c
1835  0687  B7          	or	a,a
1836  0688  20 03       	jr	NZ,l_player_check_stairs_00105
1837  068A  B0          	or	a,b
1838  068B  28 13       	jr	Z,l_player_check_stairs_00106
1839  068D              l_player_check_stairs_00105:
1840  068D  21 00 00    	ld	hl,_player_onstair
1841  0690  7E          	ld	a, (hl)
1842  0691  B7          	or	a, a
1843  0692  20 1D       	jr	NZ,l_player_check_stairs_00109
1844  0694  36 01       	ld	(hl),0x01
1845  0696  21 72 00    	ld	hl,0x0072
1846  0699  E5          	push	hl
1847  069A  CD B5 06    	call	_player_tile
1848  069D  F1          	pop	af
1849  069E  18 11       	jr	l_player_check_stairs_00109
1850  06A0              l_player_check_stairs_00106:
1851  06A0  21 00 00    	ld	hl,_player_onstair
1852  06A3  7E          	ld	a, (hl)
1853  06A4  B7          	or	a, a
1854  06A5  28 0A       	jr	Z,l_player_check_stairs_00109
1855  06A7  36 00       	ld	(hl),0x00
1856  06A9  21 60 08    	ld	hl,0x0860
1857  06AC  E5          	push	hl
1858  06AD  CD B5 06    	call	_player_tile
1859  06B0  F1          	pop	af
1860  06B1              l_player_check_stairs_00109:
1861  06B1  33          	inc	sp
1862  06B2  DD E1       	pop	ix
1863  06B4  C9          	ret
1864  06B5              	SECTION code_compiler
1865  06B5              ;	---------------------------------
1866  06B5              ; Function player_tile
1867  06B5              ; ---------------------------------
1868  06B5              _player_tile:
1869  06B5  CD 00 00    	call	___sdcc_enter_ix
1870  06B8  DD 7E 05    	ld	a,(ix+5)
1871  06BB  F5          	push	af
1872  06BC  33          	inc	sp
1873  06BD  2A FF FF    	ld	hl,(_sprite-1)
1874  06C0  DD 6E 04    	ld	l,(ix+4)
1875  06C3  E5          	push	hl
1876  06C4  CD 00 00    	call	_spr_tile_dir
1877  06C7  F1          	pop	af
1878  06C8  33          	inc	sp
1879  06C9  7D          	ld	a,l
1880  06CA  32 07 00    	ld	((_tile + 0x0007)),a
1881  06CD  DD E1       	pop	ix
1882  06CF  C9          	ret
1883  06D0              	SECTION code_compiler
1884  06D0              ;	---------------------------------
1885  06D0              ; Function player_check_map
1886  06D0              ; ---------------------------------
1887  06D0              _player_check_map:
1888  06D0  21 07 00    	ld	hl,+(_col + 0x0007)
1889  06D3  46          	ld	b, (hl)
1890  06D4  21 07 00    	ld	hl,+(_lin + 0x0007)
1891  06D7  4E          	ld	c, (hl)
1892  06D8  C5          	push	bc
1893  06D9  CD 00 00    	call	_spr_calc_index
1894  06DC  F1          	pop	af
1895  06DD  7D          	ld	a,l
1896  06DE  32 00 00    	ld	(_sprite_curr_index),a
1897  06E1  21 07 00    	ld	hl,+(_col + 0x0007)
1898  06E4  4E          	ld	c, (hl)
1899  06E5  3A 07 00    	ld	a,(_lin + 0x0007)
1900  06E8  E6 0F       	and	a,0x0f
1901  06EA  CB 41       	bit	0, c
1902  06EC  20 17       	jr	NZ,l_player_check_map_00108
1903  06EE  B7          	or	a, a
1904  06EF  20 05       	jr	NZ,l_player_check_map_00102
1905  06F1  CD 30 07    	call	_player_pick_item
1906  06F4  18 39       	jr	l_player_check_map_00110
1907  06F6              l_player_check_map_00102:
1908  06F6  CD 30 07    	call	_player_pick_item
1909  06F9  21 00 00    	ld	hl,_sprite_curr_index
1910  06FC  7E          	ld	a, (hl)
1911  06FD  C6 10       	add	a,0x10
1912  06FF  77          	ld	(hl), a
1913  0700  CD 30 07    	call	_player_pick_item
1914  0703  18 2A       	jr	l_player_check_map_00110
1915  0705              l_player_check_map_00108:
1916  0705  B7          	or	a, a
1917  0706  20 0C       	jr	NZ,l_player_check_map_00105
1918  0708  CD 30 07    	call	_player_pick_item
1919  070B  21 00 00    	ld	hl,_sprite_curr_index
1920  070E  34          	inc	(hl)
1921  070F  CD 30 07    	call	_player_pick_item
1922  0712  18 1B       	jr	l_player_check_map_00110
1923  0714              l_player_check_map_00105:
1924  0714  CD 30 07    	call	_player_pick_item
1925  0717  21 00 00    	ld	hl,_sprite_curr_index
1926  071A  34          	inc	(hl)
1927  071B  CD 30 07    	call	_player_pick_item
1928  071E  21 00 00    	ld	hl,_sprite_curr_index
1929  0721  7E          	ld	a, (hl)
1930  0722  C6 0F       	add	a,0x0f
1931  0724  77          	ld	(hl), a
1932  0725  CD 30 07    	call	_player_pick_item
1933  0728  21 00 00    	ld	hl,_sprite_curr_index
1934  072B  34          	inc	(hl)
1935  072C  CD 30 07    	call	_player_pick_item
1936  072F              l_player_check_map_00110:
1937  072F  C9          	ret
1938  0730              	SECTION code_compiler
1939  0730              ;	---------------------------------
1940  0730              ; Function player_pick_item
1941  0730              ; ---------------------------------
1942  0730              _player_pick_item:
1943  0730  CD 00 00    	call	___sdcc_enter_ix
1944  0733  3B          	dec	sp
1945  0734  2A 00 00    	ld	hl,(_sprite_curr_index)
1946  0737  26 00       	ld	h,0x00
1947  0739  01 00 00    	ld	bc,_scr_map
1948  073C  09          	add	hl,bc
1949  073D  7E          	ld	a,(hl)
1950  073E  DD 77 FF    	ld	(ix-1),a
1951  0741  D6 24       	sub	a,0x24
1952  0743  DA FD 08    	jp	C, l_player_pick_item_00131
1953  0746  3E 2F       	ld	a,0x2f
1954  0748  DD 96 FF    	sub	a,(ix-1)
1955  074B  DA FD 08    	jp	C, l_player_pick_item_00131
1956  074E  CD 00 00    	call	_ay_reset
1957  0751  2A 00 00    	ld	hl,(_sprite_curr_index)
1958  0754  26 00       	ld	h,0x00
1959  0756  01 00 00    	ld	bc,_scr_map
1960  0759  09          	add	hl,bc
1961  075A  3A 00 00    	ld	a,(_sprite_curr_index)
1962  075D  5F          	ld	e,a
1963  075E  16 00       	ld	d,0x00
1964  0760  E5          	push	hl
1965  0761  D5          	push	de
1966  0762  CD 00 00    	call	_game_match_back
1967  0765  F1          	pop	af
1968  0766  C1          	pop	bc
1969  0767  7D          	ld	a,l
1970  0768  02          	ld	(bc), a
1971  0769  2A 00 00    	ld	hl,(_sprite_curr_index)
1972  076C  26 00       	ld	h,0x00
1973  076E  CD 00 00    	call	_game_obj_set
1974  0771  3A 00 00    	ld	a,(_sprite_curr_index)
1975  0774  07          	rlca
1976  0775  07          	rlca
1977  0776  07          	rlca
1978  0777  07          	rlca
1979  0778  E6 0F       	and	a,0x0f
1980  077A  07          	rlca
1981  077B  07          	rlca
1982  077C  07          	rlca
1983  077D  07          	rlca
1984  077E  E6 F0       	and	a,0xf0
1985  0780  32 00 00    	ld	(_s_lin1),a
1986  0783  3A 00 00    	ld	a,(_sprite_curr_index)
1987  0786  E6 0F       	and	a,0x0f
1988  0788  87          	add	a, a
1989  0789  32 00 00    	ld	(_s_col1),a
1990  078C  21 00 00    	ld	hl,0x0000
1991  078F  E5          	push	hl
1992  0790  21 84 03    	ld	hl,0x0384
1993  0793  E5          	push	hl
1994  0794  F5          	push	af
1995  0795  33          	inc	sp
1996  0796  3A 00 00    	ld	a,(_s_lin1)
1997  0799  F5          	push	af
1998  079A  33          	inc	sp
1999  079B  CD 00 00    	call	_spr_add_anim
2000  079E  F1          	pop	af
2001  079F  F1          	pop	af
2002  07A0  F1          	pop	af
2003  07A1  DD 7E FF    	ld	a,(ix-1)
2004  07A4  D6 24       	sub	a,0x24
2005  07A6  DA FD 08    	jp	C, l_player_pick_item_00131
2006  07A9  3E 2F       	ld	a,0x2f
2007  07AB  DD 96 FF    	sub	a,(ix-1)
2008  07AE  DA FD 08    	jp	C, l_player_pick_item_00131
2009  07B1  DD 7E FF    	ld	a,(ix-1)
2010  07B4  C6 DC       	add	a,0xdc
2011  07B6  4F          	ld	c, a
2012  07B7  06 00       	ld	b,0x00
2013  07B9  21 C0 07    	ld	hl,l_player_pick_item_00177
2014  07BC  09          	add	hl, bc
2015  07BD  09          	add	hl, bc
2016  07BE  09          	add	hl, bc
2017  07BF  E9          	jp	(hl)
2018  07C0              l_player_pick_item_00177:
2019  07C0  C3 E4 07    	jp	l_player_pick_item_00101
2020  07C3  C3 F5 07    	jp	l_player_pick_item_00102
2021  07C6  C3 06 08    	jp	l_player_pick_item_00103
2022  07C9  C3 17 08    	jp	l_player_pick_item_00104
2023  07CC  C3 28 08    	jp	l_player_pick_item_00105
2024  07CF  C3 5B 08    	jp	l_player_pick_item_00109
2025  07D2  C3 78 08    	jp	l_player_pick_item_00112
2026  07D5  C3 93 08    	jp	l_player_pick_item_00115
2027  07D8  C3 AE 08    	jp	l_player_pick_item_00118
2028  07DB  C3 C9 08    	jp	l_player_pick_item_00121
2029  07DE  C3 E4 08    	jp	l_player_pick_item_00124
2030  07E1  C3 4C 08    	jp	l_player_pick_item_00108
2031  07E4              l_player_pick_item_00101:
2032  07E4  21 00 00    	ld	hl,_ay_effect_09
2033  07E7  CD 00 00    	call	_ay_fx_play
2034  07EA  21 00 00    	ld	hl,_player_keys
2035  07ED  36 01       	ld	(hl),0x01
2036  07EF  CD 00 00    	call	_game_update_stats
2037  07F2  C3 FD 08    	jp	l_player_pick_item_00131
2038  07F5              l_player_pick_item_00102:
2039  07F5  21 00 00    	ld	hl,_ay_effect_09
2040  07F8  CD 00 00    	call	_ay_fx_play
2041  07FB  21 01 00    	ld	hl, +(_player_keys + 0x0001)
2042  07FE  36 01       	ld	(hl),0x01
2043  0800  CD 00 00    	call	_game_update_stats
2044  0803  C3 FD 08    	jp	l_player_pick_item_00131
2045  0806              l_player_pick_item_00103:
2046  0806  21 00 00    	ld	hl,_ay_effect_09
2047  0809  CD 00 00    	call	_ay_fx_play
2048  080C  21 02 00    	ld	hl, +(_player_keys + 0x0002)
2049  080F  36 01       	ld	(hl),0x01
2050  0811  CD 00 00    	call	_game_update_stats
2051  0814  C3 FD 08    	jp	l_player_pick_item_00131
2052  0817              l_player_pick_item_00104:
2053  0817  21 00 00    	ld	hl,_ay_effect_09
2054  081A  CD 00 00    	call	_ay_fx_play
2055  081D  21 03 00    	ld	hl, +(_player_keys + 0x0003)
2056  0820  36 01       	ld	(hl),0x01
2057  0822  CD 00 00    	call	_game_update_stats
2058  0825  C3 FD 08    	jp	l_player_pick_item_00131
2059  0828              l_player_pick_item_00105:
2060  0828  21 00 00    	ld	hl,_ay_effect_10
2061  082B  CD 00 00    	call	_ay_fx_play
2062  082E  21 01 00    	ld	hl,0x0001
2063  0831  CD D6 0B    	call	_player_score_add
2064  0834  21 00 00    	ld	hl,_player_coins
2065  0837  7E          	ld	a,(hl)
2066  0838  3C          	inc	a
2067  0839  77          	ld	(hl),a
2068  083A  D6 64       	sub	a,0x64
2069  083C  20 08       	jr	NZ,l_player_pick_item_00107
2070  083E  CD 4B 05    	call	_player_1up
2071  0841  21 00 00    	ld	hl,_player_coins
2072  0844  36 00       	ld	(hl),0x00
2073  0846              l_player_pick_item_00107:
2074  0846  CD 00 00    	call	_game_update_stats
2075  0849  C3 FD 08    	jp	l_player_pick_item_00131
2076  084C              l_player_pick_item_00108:
2077  084C  21 00 00    	ld	hl,_ay_effect_10
2078  084F  CD 00 00    	call	_ay_fx_play
2079  0852  21 0A 00    	ld	hl,0x000a
2080  0855  CD D6 0B    	call	_player_score_add
2081  0858  C3 FD 08    	jp	l_player_pick_item_00131
2082  085B              l_player_pick_item_00109:
2083  085B  21 00 00    	ld	hl,_ay_effect_09
2084  085E  CD 00 00    	call	_ay_fx_play
2085  0861  21 00 00    	ld	hl,_player_str
2086  0864  34          	inc	(hl)
2087  0865  21 00 00    	ld	hl,_player_max_vita
2088  0868  7E          	ld	a, (hl)
2089  0869  D6 C8       	sub	a,0xc8
2090  086B  D2 FD 08    	jp	NC, l_player_pick_item_00131
2091  086E  7E          	ld	a, (hl)
2092  086F  C6 0A       	add	a,0x0a
2093  0871  77          	ld	(hl), a
2094  0872  CD 00 00    	call	_game_update_stats
2095  0875  C3 FD 08    	jp	l_player_pick_item_00131
2096  0878              l_player_pick_item_00112:
2097  0878  21 00 00    	ld	hl,_ay_effect_09
2098  087B  CD 00 00    	call	_ay_fx_play
2099  087E  21 00 00    	ld	hl,_player_str
2100  0881  34          	inc	(hl)
2101  0882  21 00 00    	ld	hl,_player_max_vita
2102  0885  7E          	ld	a, (hl)
2103  0886  D6 C8       	sub	a,0xc8
2104  0888  30 73       	jr	NC,l_player_pick_item_00131
2105  088A  7E          	ld	a, (hl)
2106  088B  C6 0A       	add	a,0x0a
2107  088D  77          	ld	(hl), a
2108  088E  CD 00 00    	call	_game_update_stats
2109  0891  18 6A       	jr	l_player_pick_item_00131
2110  0893              l_player_pick_item_00115:
2111  0893  21 00 00    	ld	hl,_ay_effect_09
2112  0896  CD 00 00    	call	_ay_fx_play
2113  0899  21 00 00    	ld	hl,_player_str
2114  089C  34          	inc	(hl)
2115  089D  21 00 00    	ld	hl,_player_max_vita
2116  08A0  7E          	ld	a, (hl)
2117  08A1  D6 C8       	sub	a,0xc8
2118  08A3  30 58       	jr	NC,l_player_pick_item_00131
2119  08A5  7E          	ld	a, (hl)
2120  08A6  C6 0A       	add	a,0x0a
2121  08A8  77          	ld	(hl), a
2122  08A9  CD 00 00    	call	_game_update_stats
2123  08AC  18 4F       	jr	l_player_pick_item_00131
2124  08AE              l_player_pick_item_00118:
2125  08AE  21 00 00    	ld	hl,_ay_effect_09
2126  08B1  CD 00 00    	call	_ay_fx_play
2127  08B4  21 00 00    	ld	hl,_player_int
2128  08B7  34          	inc	(hl)
2129  08B8  21 00 00    	ld	hl,_player_max_mana
2130  08BB  7E          	ld	a, (hl)
2131  08BC  D6 C8       	sub	a,0xc8
2132  08BE  30 3D       	jr	NC,l_player_pick_item_00131
2133  08C0  7E          	ld	a, (hl)
2134  08C1  C6 0A       	add	a,0x0a
2135  08C3  77          	ld	(hl), a
2136  08C4  CD 00 00    	call	_game_update_stats
2137  08C7  18 34       	jr	l_player_pick_item_00131
2138  08C9              l_player_pick_item_00121:
2139  08C9  21 00 00    	ld	hl,_ay_effect_09
2140  08CC  CD 00 00    	call	_ay_fx_play
2141  08CF  21 00 00    	ld	hl,_player_int
2142  08D2  34          	inc	(hl)
2143  08D3  21 00 00    	ld	hl,_player_max_mana
2144  08D6  7E          	ld	a, (hl)
2145  08D7  D6 C8       	sub	a,0xc8
2146  08D9  30 22       	jr	NC,l_player_pick_item_00131
2147  08DB  7E          	ld	a, (hl)
2148  08DC  C6 0A       	add	a,0x0a
2149  08DE  77          	ld	(hl), a
2150  08DF  CD 00 00    	call	_game_update_stats
2151  08E2  18 19       	jr	l_player_pick_item_00131
2152  08E4              l_player_pick_item_00124:
2153  08E4  21 00 00    	ld	hl,_ay_effect_09
2154  08E7  CD 00 00    	call	_ay_fx_play
2155  08EA  21 00 00    	ld	hl,_player_int
2156  08ED  34          	inc	(hl)
2157  08EE  21 00 00    	ld	hl,_player_max_mana
2158  08F1  7E          	ld	a, (hl)
2159  08F2  D6 C8       	sub	a,0xc8
2160  08F4  30 07       	jr	NC,l_player_pick_item_00131
2161  08F6  7E          	ld	a, (hl)
2162  08F7  C6 0A       	add	a,0x0a
2163  08F9  77          	ld	(hl), a
2164  08FA  CD 00 00    	call	_game_update_stats
2165  08FD              l_player_pick_item_00131:
2166  08FD  33          	inc	sp
2167  08FE  DD E1       	pop	ix
2168  0900  C9          	ret
2169  0901              	SECTION code_compiler
2170  0901              ;	---------------------------------
2171  0901              ; Function player_hit_platform
2172  0901              ; ---------------------------------
2173  0901              _player_hit_platform:
2174  0901  CD 00 00    	call	___sdcc_enter_ix
2175  0904  F5          	push	af
2176  0905  3A 00 00    	ld	a,(_player_hit_lin)
2177  0908  B7          	or	a, a
2178  0909  C2 A1 0B    	jp	NZ, l_player_hit_platform_00145
2179  090C  21 07 00    	ld	hl,+(_lin + 0x0007)
2180  090F  4E          	ld	c, (hl)
2181  0910  3E 10       	ld	a,0x10
2182  0912  91          	sub	a, c
2183  0913  D2 A1 0B    	jp	NC, l_player_hit_platform_00145
2184  0916  01 00 00    	ld	bc,_scr_map
2185  0919  2A 00 00    	ld	hl,(_index1)
2186  091C  09          	add	hl,bc
2187  091D  7E          	ld	a,(hl)
2188  091E  D6 45       	sub	a,0x45
2189  0920  DA A1 0B    	jp	C, l_player_hit_platform_00145
2190  0923  2A 00 00    	ld	hl,(_curr_time)
2191  0926  22 0E 00    	ld	(_spr_timer + 0x000e),hl
2192  0929  2A 07 00    	ld	hl,(_lin + 0x0007)
2193  092C  26 00       	ld	h,0x00
2194  092E  01 F8 FF    	ld	bc,0xfff8
2195  0931  09          	add	hl,bc
2196  0932  EB          	ex	de,hl
2197  0933  06 04       	ld	b,0x04
2198  0935              l_player_hit_platform_00250:
2199  0935  CB 2A       	sra	d
2200  0937  CB 1B       	rr	e
2201  0939  10 FA       	djnz	l_player_hit_platform_00250
2202  093B  7B          	ld	a, e
2203  093C  07          	rlca
2204  093D  07          	rlca
2205  093E  07          	rlca
2206  093F  07          	rlca
2207  0940  E6 F0       	and	a,0xf0
2208  0942  C6 08       	add	a,0x08
2209  0944  32 00 00    	ld	(_player_hit_lin),a
2210  0947  21 07 00    	ld	hl,+(_col + 0x0007)
2211  094A  4E          	ld	c, (hl)
2212  094B  CB 41       	bit	0, c
2213  094D  20 06       	jr	NZ,l_player_hit_platform_00111
2214  094F  21 00 00    	ld	hl,_player_hit_col
2215  0952  71          	ld	(hl), c
2216  0953  18 2D       	jr	l_player_hit_platform_00112
2217  0955              l_player_hit_platform_00111:
2218  0955  21 07 00    	ld	hl,+(_state + 0x0007)
2219  0958  5E          	ld	e, (hl)
2220  0959  41          	ld	b, c
2221  095A  04          	inc	b
2222  095B  0D          	dec	c
2223  095C  CB 5B       	bit	3, e
2224  095E  28 12       	jr	Z,l_player_hit_platform_00108
2225  0960  3A 00 00    	ld	a,(_g_player_hit_right)
2226  0963  B7          	or	a, a
2227  0964  28 06       	jr	Z,l_player_hit_platform_00102
2228  0966  21 00 00    	ld	hl,_player_hit_col
2229  0969  70          	ld	(hl), b
2230  096A  18 16       	jr	l_player_hit_platform_00112
2231  096C              l_player_hit_platform_00102:
2232  096C  21 00 00    	ld	hl,_player_hit_col
2233  096F  71          	ld	(hl), c
2234  0970  18 10       	jr	l_player_hit_platform_00112
2235  0972              l_player_hit_platform_00108:
2236  0972  3A 00 00    	ld	a,(_g_player_hit_left)
2237  0975  B7          	or	a, a
2238  0976  28 06       	jr	Z,l_player_hit_platform_00105
2239  0978  21 00 00    	ld	hl,_player_hit_col
2240  097B  71          	ld	(hl), c
2241  097C  18 04       	jr	l_player_hit_platform_00112
2242  097E              l_player_hit_platform_00105:
2243  097E  21 00 00    	ld	hl,_player_hit_col
2244  0981  70          	ld	(hl), b
2245  0982              l_player_hit_platform_00112:
2246  0982  2A 00 00    	ld	hl,(_index1)
2247  0985  01 00 00    	ld	bc,_scr_map
2248  0988  09          	add	hl,bc
2249  0989  7E          	ld	a,(hl)
2250  098A  FE 4D       	cp	a,0x4d
2251  098C  20 43       	jr	NZ,l_player_hit_platform_00114
2252  098E  E5          	push	hl
2253  098F  2A 00 00    	ld	hl,(_index1)
2254  0992  E5          	push	hl
2255  0993  CD 00 00    	call	_game_match_back
2256  0996  F1          	pop	af
2257  0997  C1          	pop	bc
2258  0998  7D          	ld	a,l
2259  0999  02          	ld	(bc), a
2260  099A  2A 00 00    	ld	hl,(_index1)
2261  099D  CD 00 00    	call	_game_obj_set
2262  09A0  21 00 00    	ld	hl,_index1
2263  09A3  7E          	ld	a, (hl)
2264  09A4  E6 0F       	and	a,0x0f
2265  09A6  87          	add	a, a
2266  09A7  4F          	ld	c, a
2267  09A8  23          	inc	hl
2268  09A9  56          	ld	d,(hl)
2269  09AA  2B          	dec	hl
2270  09AB  7E          	ld	a, (hl)
2271  09AC  06 04       	ld	b,0x04
2272  09AE              l_player_hit_platform_00256:
2273  09AE  CB 3A       	srl	d
2274  09B0  1F          	rra
2275  09B1  10 FB       	djnz	l_player_hit_platform_00256
2276  09B3  07          	rlca
2277  09B4  07          	rlca
2278  09B5  07          	rlca
2279  09B6  07          	rlca
2280  09B7  E6 F0       	and	a,0xf0
2281  09B9  47          	ld	b, a
2282  09BA  21 00 00    	ld	hl,0x0000
2283  09BD  E5          	push	hl
2284  09BE  21 87 03    	ld	hl,0x0387
2285  09C1  E5          	push	hl
2286  09C2  79          	ld	a, c
2287  09C3  48          	ld	c,b
2288  09C4  47          	ld	b,a
2289  09C5  C5          	push	bc
2290  09C6  CD 00 00    	call	_spr_add_anim
2291  09C9  F1          	pop	af
2292  09CA  F1          	pop	af
2293  09CB  F1          	pop	af
2294  09CC  2E 01       	ld	l,0x01
2295  09CE  C3 A3 0B    	jp	l_player_hit_platform_00148
2296  09D1              l_player_hit_platform_00114:
2297  09D1  FE 5C       	cp	a,0x5c
2298  09D3  28 05       	jr	Z,l_player_hit_platform_00141
2299  09D5  D6 5D       	sub	a,0x5d
2300  09D7  C2 92 0B    	jp	NZ,l_player_hit_platform_00142
2301  09DA              l_player_hit_platform_00141:
2302  09DA  21 00 00    	ld	hl,_tmp0
2303  09DD  36 00       	ld	(hl),0x00
2304  09DF  3A 00 00    	ld	a,(_game_boss)
2305  09E2  B7          	or	a, a
2306  09E3  28 0B       	jr	Z,l_player_hit_platform_00174
2307  09E5  3A 00 00    	ld	a,(_game_mush_count)
2308  09E8  B7          	or	a, a
2309  09E9  28 05       	jr	Z,l_player_hit_platform_00174
2310  09EB  2E 00       	ld	l,0x00
2311  09ED  C3 A3 0B    	jp	l_player_hit_platform_00148
2312  09F0              l_player_hit_platform_00174:
2313  09F0              l_player_hit_platform_00138:
2314  09F0  21 00 00    	ld	hl,_tmp0
2315  09F3  7E          	ld	a, (hl)
2316  09F4  D6 07       	sub	a,0x07
2317  09F6  D2 92 0B    	jp	NC, l_player_hit_platform_00142
2318  09F9  4E          	ld	c,(hl)
2319  09FA  06 00       	ld	b,0x00
2320  09FC  21 00 00    	ld	hl,_mush_index
2321  09FF  09          	add	hl,bc
2322  0A00  4E          	ld	c, (hl)
2323  0A01  06 00       	ld	b,0x00
2324  0A03  2A 00 00    	ld	hl,(_index1)
2325  0A06  AF          	xor	a,a
2326  0A07  ED 42       	sbc	hl,bc
2327  0A09  C2 8B 0B    	jp	NZ,l_player_hit_platform_00137
2328  0A0C  3A 07 00    	ld	a,(_lin + 0x0007)
2329  0A0F  07          	rlca
2330  0A10  07          	rlca
2331  0A11  07          	rlca
2332  0A12  07          	rlca
2333  0A13  E6 0F       	and	a,0x0f
2334  0A15  07          	rlca
2335  0A16  07          	rlca
2336  0A17  07          	rlca
2337  0A18  07          	rlca
2338  0A19  E6 F0       	and	a,0xf0
2339  0A1B  C6 E0       	add	a,0xe0
2340  0A1D  32 00 00    	ld	(_s_lin1),a
2341  0A20  3A 07 00    	ld	a,(_col + 0x0007)
2342  0A23  CB 3F       	srl	a
2343  0A25  87          	add	a, a
2344  0A26  32 00 00    	ld	(_s_col1),a
2345  0A29  21 00 00    	ld	hl,_tmp
2346  0A2C  36 00       	ld	(hl),0x00
2347  0A2E              l_player_hit_platform_00120:
2348  0A2E  21 00 00    	ld	hl,_tmp
2349  0A31  7E          	ld	a, (hl)
2350  0A32  D6 07       	sub	a,0x07
2351  0A34  30 1C       	jr	NC,l_player_hit_platform_00122
2352  0A36  4E          	ld	c,(hl)
2353  0A37  06 00       	ld	b,0x00
2354  0A39  21 00 00    	ld	hl,_mush_index
2355  0A3C  09          	add	hl,bc
2356  0A3D  4E          	ld	c, (hl)
2357  0A3E  06 00       	ld	b,0x00
2358  0A40  21 00 00    	ld	hl,_index1
2359  0A43  7E          	ld	a, (hl)
2360  0A44  91          	sub	a, c
2361  0A45  20 05       	jr	NZ,l_player_hit_platform_00262
2362  0A47  23          	inc	hl
2363  0A48  7E          	ld	a, (hl)
2364  0A49  90          	sub	a, b
2365  0A4A  28 06       	jr	Z,l_player_hit_platform_00122
2366  0A4C              l_player_hit_platform_00262:
2367  0A4C  21 00 00    	ld	hl,_tmp
2368  0A4F  34          	inc	(hl)
2369  0A50  18 DC       	jr	l_player_hit_platform_00120
2370  0A52              l_player_hit_platform_00122:
2371  0A52  21 00 00    	ld	hl,_ay_effect_07
2372  0A55  CD 00 00    	call	_ay_fx_play
2373  0A58  2A 00 00    	ld	hl,(_tmp)
2374  0A5B  26 00       	ld	h,0x00
2375  0A5D  01 00 00    	ld	bc,_mush_class
2376  0A60  09          	add	hl,bc
2377  0A61  7E          	ld	a,(hl)
2378  0A62  FE 78       	cp	a,0x78
2379  0A64  28 18       	jr	Z,l_player_hit_platform_00123
2380  0A66  FE 79       	cp	a,0x79
2381  0A68  28 2F       	jr	Z,l_player_hit_platform_00124
2382  0A6A  FE 7A       	cp	a,0x7a
2383  0A6C  28 5F       	jr	Z,l_player_hit_platform_00126
2384  0A6E  FE 7B       	cp	a,0x7b
2385  0A70  28 41       	jr	Z,l_player_hit_platform_00125
2386  0A72  FE 7C       	cp	a,0x7c
2387  0A74  CA 01 0B    	jp	Z,l_player_hit_platform_00128
2388  0A77  D6 7D       	sub	a,0x7d
2389  0A79  28 6C       	jr	Z,l_player_hit_platform_00127
2390  0A7B  C3 19 0B    	jp	l_player_hit_platform_00129
2391  0A7E              l_player_hit_platform_00123:
2392  0A7E  2E 02       	ld	l,0x02
2393  0A80  CD 00 00    	call	_zx_border_fastcall
2394  0A83  3A 00 00    	ld	a,(_s_col1)
2395  0A86  21 06 FF    	ld	hl,0xff06
2396  0A89  E5          	push	hl
2397  0A8A  F5          	push	af
2398  0A8B  33          	inc	sp
2399  0A8C  3A 00 00    	ld	a,(_s_lin1)
2400  0A8F  F5          	push	af
2401  0A90  33          	inc	sp
2402  0A91  CD 00 00    	call	_enemy_init
2403  0A94  F1          	pop	af
2404  0A95  F1          	pop	af
2405  0A96  C3 19 0B    	jp	l_player_hit_platform_00129
2406  0A99              l_player_hit_platform_00124:
2407  0A99  2E 02       	ld	l,0x02
2408  0A9B  CD 00 00    	call	_zx_border_fastcall
2409  0A9E  3A 00 00    	ld	a,(_s_col1)
2410  0AA1  21 06 01    	ld	hl,0x0106
2411  0AA4  E5          	push	hl
2412  0AA5  F5          	push	af
2413  0AA6  33          	inc	sp
2414  0AA7  3A 00 00    	ld	a,(_s_lin1)
2415  0AAA  F5          	push	af
2416  0AAB  33          	inc	sp
2417  0AAC  CD 00 00    	call	_enemy_init
2418  0AAF  F1          	pop	af
2419  0AB0  F1          	pop	af
2420  0AB1  18 66       	jr	l_player_hit_platform_00129
2421  0AB3              l_player_hit_platform_00125:
2422  0AB3  2E 01       	ld	l,0x01
2423  0AB5  CD 00 00    	call	_zx_border_fastcall
2424  0AB8  3A 00 00    	ld	a,(_s_col1)
2425  0ABB  21 07 01    	ld	hl,0x0107
2426  0ABE  E5          	push	hl
2427  0ABF  F5          	push	af
2428  0AC0  33          	inc	sp
2429  0AC1  3A 00 00    	ld	a,(_s_lin1)
2430  0AC4  F5          	push	af
2431  0AC5  33          	inc	sp
2432  0AC6  CD 00 00    	call	_enemy_init
2433  0AC9  F1          	pop	af
2434  0ACA  F1          	pop	af
2435  0ACB  18 4C       	jr	l_player_hit_platform_00129
2436  0ACD              l_player_hit_platform_00126:
2437  0ACD  2E 01       	ld	l,0x01
2438  0ACF  CD 00 00    	call	_zx_border_fastcall
2439  0AD2  3A 00 00    	ld	a,(_s_col1)
2440  0AD5  21 07 FF    	ld	hl,0xff07
2441  0AD8  E5          	push	hl
2442  0AD9  F5          	push	af
2443  0ADA  33          	inc	sp
2444  0ADB  3A 00 00    	ld	a,(_s_lin1)
2445  0ADE  F5          	push	af
2446  0ADF  33          	inc	sp
2447  0AE0  CD 00 00    	call	_enemy_init
2448  0AE3  F1          	pop	af
2449  0AE4  F1          	pop	af
2450  0AE5  18 32       	jr	l_player_hit_platform_00129
2451  0AE7              l_player_hit_platform_00127:
2452  0AE7  2E 04       	ld	l,0x04
2453  0AE9  CD 00 00    	call	_zx_border_fastcall
2454  0AEC  3A 00 00    	ld	a,(_s_col1)
2455  0AEF  21 08 01    	ld	hl,0x0108
2456  0AF2  E5          	push	hl
2457  0AF3  F5          	push	af
2458  0AF4  33          	inc	sp
2459  0AF5  3A 00 00    	ld	a,(_s_lin1)
2460  0AF8  F5          	push	af
2461  0AF9  33          	inc	sp
2462  0AFA  CD 00 00    	call	_enemy_init
2463  0AFD  F1          	pop	af
2464  0AFE  F1          	pop	af
2465  0AFF  18 18       	jr	l_player_hit_platform_00129
2466  0B01              l_player_hit_platform_00128:
2467  0B01  2E 04       	ld	l,0x04
2468  0B03  CD 00 00    	call	_zx_border_fastcall
2469  0B06  3A 00 00    	ld	a,(_s_col1)
2470  0B09  21 08 FF    	ld	hl,0xff08
2471  0B0C  E5          	push	hl
2472  0B0D  F5          	push	af
2473  0B0E  33          	inc	sp
2474  0B0F  3A 00 00    	ld	a,(_s_lin1)
2475  0B12  F5          	push	af
2476  0B13  33          	inc	sp
2477  0B14  CD 00 00    	call	_enemy_init
2478  0B17  F1          	pop	af
2479  0B18  F1          	pop	af
2480  0B19              l_player_hit_platform_00129:
2481  0B19  21 00 00    	ld	hl,_game_mush_count
2482  0B1C  34          	inc	(hl)
2483  0B1D  3A 00 00    	ld	a,(_game_boss)
2484  0B20  B7          	or	a, a
2485  0B21  20 68       	jr	NZ,l_player_hit_platform_00137
2486  0B23  3A 00 00    	ld	a,(_index1)
2487  0B26  C6 F0       	add	a,0xf0
2488  0B28  32 00 00    	ld	(_index0),a
2489  0B2B  3A 01 00    	ld	a,(_index1 + 1)
2490  0B2E  CE FF       	adc	a,0xff
2491  0B30  21 01 00    	ld	hl,_index0 + 1
2492  0B33  77          	ld	(hl), a
2493  0B34  3E 00       	ld	a, +((_scr_map) & 0xFF)
2494  0B36  2B          	dec	hl
2495  0B37  86          	add	a, (hl)
2496  0B38  4F          	ld	c, a
2497  0B39  3E 00       	ld	a, +((_scr_map) / 256)
2498  0B3B  23          	inc	hl
2499  0B3C  8E          	adc	a, (hl)
2500  0B3D  47          	ld	b, a
2501  0B3E  C5          	push	bc
2502  0B3F  46          	ld	b,(hl)
2503  0B40  2B          	dec	hl
2504  0B41  4E          	ld	c,(hl)
2505  0B42  C5          	push	bc
2506  0B43  CD 00 00    	call	_game_match_back
2507  0B46  F1          	pop	af
2508  0B47  C1          	pop	bc
2509  0B48  7D          	ld	a,l
2510  0B49  02          	ld	(bc), a
2511  0B4A  3E 00       	ld	a, +((_scr_map) & 0xFF)
2512  0B4C  21 00 00    	ld	hl,_index1
2513  0B4F  86          	add	a, (hl)
2514  0B50  DD 77 FE    	ld	(ix-2),a
2515  0B53  3E 00       	ld	a, +((_scr_map) / 256)
2516  0B55  23          	inc	hl
2517  0B56  8E          	adc	a, (hl)
2518  0B57  DD 77 FF    	ld	(ix-1),a
2519  0B5A  E1          	pop	hl
2520  0B5B  7E          	ld	a,(hl)
2521  0B5C  E5          	push	hl
2522  0B5D  FE 5C       	cp	a,0x5c
2523  0B5F  28 04       	jr	Z,l_player_hit_platform_00130
2524  0B61  D6 5D       	sub	a,0x5d
2525  0B63  20 06       	jr	NZ,l_player_hit_platform_00131
2526  0B65              l_player_hit_platform_00130:
2527  0B65  E1          	pop	hl
2528  0B66  E5          	push	hl
2529  0B67  36 4F       	ld	(hl),0x4f
2530  0B69  18 04       	jr	l_player_hit_platform_00132
2531  0B6B              l_player_hit_platform_00131:
2532  0B6B  E1          	pop	hl
2533  0B6C  E5          	push	hl
2534  0B6D  36 54       	ld	(hl),0x54
2535  0B6F              l_player_hit_platform_00132:
2536  0B6F  2A 00 00    	ld	hl,(_index1)
2537  0B72  01 F0 FF    	ld	bc,0xfff0
2538  0B75  09          	add	hl,bc
2539  0B76  CD 00 00    	call	_game_obj_set
2540  0B79  3A 00 00    	ld	a,(_s_lin1)
2541  0B7C  C6 10       	add	a,0x10
2542  0B7E  4F          	ld	c, a
2543  0B7F  3A 00 00    	ld	a, (_s_col1)
2544  0B82  47          	ld	b,a
2545  0B83  C5          	push	bc
2546  0B84  3E 4F       	ld	a,0x4f
2547  0B86  F5          	push	af
2548  0B87  33          	inc	sp
2549  0B88  CD 00 00    	call	_NIRVANAP_drawT_callee
2550  0B8B              l_player_hit_platform_00137:
2551  0B8B  21 00 00    	ld	hl,_tmp0
2552  0B8E  34          	inc	(hl)
2553  0B8F  C3 F0 09    	jp	l_player_hit_platform_00138
2554  0B92              l_player_hit_platform_00142:
2555  0B92  21 00 00    	ld	hl,_ay_effect_02
2556  0B95  CD 00 00    	call	_ay_fx_play
2557  0B98  2E 01       	ld	l,0x01
2558  0B9A  CD 00 00    	call	_spr_brick_anim
2559  0B9D  2E 01       	ld	l,0x01
2560  0B9F  18 02       	jr	l_player_hit_platform_00148
2561  0BA1              l_player_hit_platform_00145:
2562  0BA1  2E 00       	ld	l,0x00
2563  0BA3              l_player_hit_platform_00148:
2564  0BA3  F1          	pop	af
2565  0BA4  DD E1       	pop	ix
2566  0BA6  C9          	ret
2567  0BA7              	SECTION code_compiler
2568  0BA7              ;	---------------------------------
2569  0BA7              ; Function player_hit_platform_clear
2570  0BA7              ; ---------------------------------
2571  0BA7              _player_hit_platform_clear:
2572  0BA7  01 04 00    	ld	bc,0x0004
2573  0BAA  C5          	push	bc
2574  0BAB  2A 0E 00    	ld	hl,(_spr_timer + 0x000e)
2575  0BAE  E5          	push	hl
2576  0BAF  CD 00 00    	call	_game_check_time
2577  0BB2  F1          	pop	af
2578  0BB3  F1          	pop	af
2579  0BB4  7D          	ld	a, l
2580  0BB5  B7          	or	a, a
2581  0BB6  C8          	ret	Z
2582  0BB7  2A FF FF    	ld	hl,(_player_hit_col - 1)
2583  0BBA  3A 00 00    	ld	a,(_player_hit_lin)
2584  0BBD  6F          	ld	l,a
2585  0BBE  E5          	push	hl
2586  0BBF  CD 00 00    	call	_spr_calc_index
2587  0BC2  F1          	pop	af
2588  0BC3  22 00 00    	ld	(_index1),hl
2589  0BC6  2E 00       	ld	l,0x00
2590  0BC8  CD 00 00    	call	_spr_brick_anim
2591  0BCB  21 00 00    	ld	hl,_player_hit_lin
2592  0BCE  36 00       	ld	(hl),0x00
2593  0BD0  21 00 00    	ld	hl,_player_hit_col
2594  0BD3  36 00       	ld	(hl),0x00
2595  0BD5  C9          	ret
2596  0BD6              	SECTION code_compiler
2597  0BD6              ;	---------------------------------
2598  0BD6              ; Function player_score_add
2599  0BD6              ; ---------------------------------
2600  0BD6              _player_score_add:
2601  0BD6  ED 4B 00 00 	ld	bc,(_player_score)
2602  0BDA  09          	add	hl,bc
2603  0BDB  22 00 00    	ld	(_player_score),hl
2604  0BDE  21 00 00    	ld	hl,_player_lvl
2605  0BE1  7E          	ld	a, (hl)
2606  0BE2  D6 14       	sub	a,0x14
2607  0BE4  30 3F       	jr	NC,l_player_score_add_00104
2608  0BE6  01 00 00    	ld	bc,_player_lvl_table+0
2609  0BE9  6E          	ld	l,(hl)
2610  0BEA  26 00       	ld	h,0x00
2611  0BEC  29          	add	hl, hl
2612  0BED  09          	add	hl, bc
2613  0BEE  4E          	ld	c, (hl)
2614  0BEF  23          	inc	hl
2615  0BF0  46          	ld	b, (hl)
2616  0BF1  21 00 00    	ld	hl,_player_score
2617  0BF4  7E          	ld	a, (hl)
2618  0BF5  91          	sub	a, c
2619  0BF6  23          	inc	hl
2620  0BF7  7E          	ld	a, (hl)
2621  0BF8  98          	sbc	a, b
2622  0BF9  38 2A       	jr	C,l_player_score_add_00104
2623  0BFB  21 00 00    	ld	hl,_player_lvl
2624  0BFE  34          	inc	(hl)
2625  0BFF  CD 00 00    	call	_game_update_stats
2626  0C02  CD 00 00    	call	_spr_flatten
2627  0C05  21 06 00    	ld	hl,___str_1
2628  0C08  E5          	push	hl
2629  0C09  21 0C 0C    	ld	hl,0x0c0c
2630  0C0C  E5          	push	hl
2631  0C0D  CD 00 00    	call	_zx_print_str
2632  0C10  AF          	xor	a, a
2633  0C11  F5          	push	af
2634  0C12  33          	inc	sp
2635  0C13  21 3C 00    	ld	hl,0x003c
2636  0C16  E5          	push	hl
2637  0C17  21 0C 15    	ld	hl,0x150c
2638  0C1A  E5          	push	hl
2639  0C1B  3E 0C       	ld	a,0x0c
2640  0C1D  F5          	push	af
2641  0C1E  33          	inc	sp
2642  0C1F  CD 00 00    	call	_game_colour_message
2643  0C22  F1          	pop	af
2644  0C23  F1          	pop	af
2645  0C24  F1          	pop	af
2646  0C25              l_player_score_add_00104:
2647  0C25  3A 00 00    	ld	a,(_game_score_top)
2648  0C28  21 00 00    	ld	hl,_player_score
2649  0C2B  96          	sub	a, (hl)
2650  0C2C  3A 01 00    	ld	a,(_game_score_top + 1)
2651  0C2F  23          	inc	hl
2652  0C30  9E          	sbc	a, (hl)
2653  0C31  30 06       	jr	NC,l_player_score_add_00106
2654  0C33  2A 00 00    	ld	hl,(_player_score)
2655  0C36  22 00 00    	ld	(_game_score_top),hl
2656  0C39              l_player_score_add_00106:
2657  0C39  CD 00 00    	call	_game_print_score
2658  0C3C  C9          	ret
2659  0C3D              	SECTION rodata_compiler
2660  0006              ___str_1:
2661  0006  4C 45 56 45 4C 20 55 50 21 
                        	DEFM "LEVEL UP!"
2662  000F  00          	DEFB 0x00
2663  0010              	SECTION code_compiler
2664  0C3D              ;	---------------------------------
2665  0C3D              ; Function player_check_floor
2666  0C3D              ; ---------------------------------
2667  0C3D              _player_check_floor:
2668  0C3D  CD 00 00    	call	___sdcc_enter_ix
2669  0C40  F5          	push	af
2670  0C41  F5          	push	af
2671  0C42  F5          	push	af
2672  0C43  11 07 00    	ld	de,_col+7
2673  0C46  1A          	ld	a, (de)
2674  0C47  47          	ld	b, a
2675  0C48  3A 07 00    	ld	a,(_lin + 0x0007)
2676  0C4B  C6 10       	add	a,0x10
2677  0C4D  D5          	push	de
2678  0C4E  4F          	ld	c,a
2679  0C4F  C5          	push	bc
2680  0C50  CD 00 00    	call	_spr_calc_index
2681  0C53  F1          	pop	af
2682  0C54  D1          	pop	de
2683  0C55  DD 75 FC    	ld	(ix-4),l
2684  0C58  DD 74 FD    	ld	(ix-3),h
2685  0C5B  01 00 00    	ld	bc,_scr_map+0
2686  0C5E  79          	ld	a, c
2687  0C5F  DD 86 FC    	add	a,(ix-4)
2688  0C62  DD 77 FE    	ld	(ix-2),a
2689  0C65  78          	ld	a, b
2690  0C66  DD 8E FD    	adc	a,(ix-3)
2691  0C69  DD 6E FE    	ld	l,(ix-2)
2692  0C6C  DD 77 FF    	ld	(ix-1),a
2693  0C6F  67          	ld	h,a
2694  0C70  7E          	ld	a, (hl)
2695  0C71  DD 77 FB    	ld	(ix-5),a
2696  0C74  DD 6E FC    	ld	l,(ix-4)
2697  0C77  DD 66 FD    	ld	h,(ix-3)
2698  0C7A  23          	inc	hl
2699  0C7B  09          	add	hl,bc
2700  0C7C  3A 00 00    	ld	a,(_s_lin0)
2701  0C7F  D6 90       	sub	a,0x90
2702  0C81  4D          	ld	c,l
2703  0C82  44          	ld	b,h
2704  0C83  20 26       	jr	NZ,l_player_check_floor_00108
2705  0C85  3A 00 00    	ld	a,(_map_heigth)
2706  0C88  C5          	push	bc
2707  0C89  F5          	push	af
2708  0C8A  33          	inc	sp
2709  0C8B  3A 00 00    	ld	a,(_scr_curr)
2710  0C8E  F5          	push	af
2711  0C8F  33          	inc	sp
2712  0C90  CD 00 00    	call	__divuchar_callee
2713  0C93  C1          	pop	bc
2714  0C94  7D          	ld	a,l
2715  0C95  3C          	inc	a
2716  0C96  32 00 00    	ld	(_tmp1),a
2717  0C99  21 00 00    	ld	hl,_map_heigth
2718  0C9C  96          	sub	a, (hl)
2719  0C9D  30 06       	jr	NC,l_player_check_floor_00102
2720  0C9F  DD 36 FB 00 	ld	(ix-5),0x00
2721  0CA3  18 14       	jr	l_player_check_floor_00109
2722  0CA5              l_player_check_floor_00102:
2723  0CA5  DD 36 FB 48 	ld	(ix-5),0x48
2724  0CA9  18 0E       	jr	l_player_check_floor_00109
2725  0CAB              l_player_check_floor_00108:
2726  0CAB  1A          	ld	a, (de)
2727  0CAC  0F          	rrca
2728  0CAD  38 06       	jr	C,l_player_check_floor_00105
2729  0CAF  DD 36 FA 00 	ld	(ix-6),0x00
2730  0CB3  18 04       	jr	l_player_check_floor_00109
2731  0CB5              l_player_check_floor_00105:
2732  0CB5  0A          	ld	a, (bc)
2733  0CB6  DD 77 FA    	ld	(ix-6),a
2734  0CB9              l_player_check_floor_00109:
2735  0CB9  DD 7E FB    	ld	a,(ix-5)
2736  0CBC  D6 3A       	sub	a,0x3a
2737  0CBE  38 07       	jr	C,l_player_check_floor_00132
2738  0CC0  DD 7E FB    	ld	a,(ix-5)
2739  0CC3  D6 60       	sub	a,0x60
2740  0CC5  38 32       	jr	C,l_player_check_floor_00128
2741  0CC7              l_player_check_floor_00132:
2742  0CC7  DD 7E FA    	ld	a,(ix-6)
2743  0CCA  D6 3A       	sub	a,0x3a
2744  0CCC  38 07       	jr	C,l_player_check_floor_00127
2745  0CCE  DD 7E FA    	ld	a,(ix-6)
2746  0CD1  D6 60       	sub	a,0x60
2747  0CD3  38 24       	jr	C,l_player_check_floor_00128
2748  0CD5              l_player_check_floor_00127:
2749  0CD5  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
2750  0CD8  36 02       	ld	(hl),0x02
2751  0CDA  21 00 00    	ld	hl,_s_state
2752  0CDD  CB CE       	set	1, (hl)
2753  0CDF  2E 00       	ld	l,0x00
2754  0CE1  CD 23 06    	call	_player_check_stairs
2755  0CE4  3A 00 00    	ld	a,(_player_onstair)
2756  0CE7  B7          	or	a, a
2757  0CE8  C2 93 0D    	jp	NZ, l_player_check_floor_00133
2758  0CEB  3A 00 00    	ld	a,(_s_lin0)
2759  0CEE  D6 90       	sub	a,0x90
2760  0CF0  C2 93 0D    	jp	NZ,l_player_check_floor_00133
2761  0CF3  CD 00 00    	call	_spr_page_down
2762  0CF6  C3 93 0D    	jp	l_player_check_floor_00133
2763  0CF9              l_player_check_floor_00128:
2764  0CF9  C5          	push	bc
2765  0CFA  21 10 00    	ld	hl,0x0010
2766  0CFD  E5          	push	hl
2767  0CFE  2A 00 00    	ld	hl,(_player_brick_time)
2768  0D01  E5          	push	hl
2769  0D02  CD 00 00    	call	_game_check_time
2770  0D05  F1          	pop	af
2771  0D06  F1          	pop	af
2772  0D07  C1          	pop	bc
2773  0D08  7D          	ld	a,l
2774  0D09  B7          	or	a, a
2775  0D0A  CA 93 0D    	jp	Z, l_player_check_floor_00133
2776  0D0D  2A 00 00    	ld	hl,(_curr_time)
2777  0D10  22 00 00    	ld	(_player_brick_time),hl
2778  0D13  DD 7E FB    	ld	a,(ix-5)
2779  0D16  D6 40       	sub	a,0x40
2780  0D18  20 1A       	jr	NZ,l_player_check_floor_00114
2781  0D1A  C5          	push	bc
2782  0D1B  DD 6E FC    	ld	l,(ix-4)
2783  0D1E  DD 66 FD    	ld	h,(ix-3)
2784  0D21  E5          	push	hl
2785  0D22  CD 00 00    	call	_game_match_back
2786  0D25  F1          	pop	af
2787  0D26  C1          	pop	bc
2788  0D27  5D          	ld	e,l
2789  0D28  DD 6E FE    	ld	l,(ix-2)
2790  0D2B  DD 66 FF    	ld	h,(ix-1)
2791  0D2E  73          	ld	(hl), e
2792  0D2F  C5          	push	bc
2793  0D30  CD 98 0D    	call	_player_gasta_brick
2794  0D33  C1          	pop	bc
2795  0D34              l_player_check_floor_00114:
2796  0D34  DD 7E FB    	ld	a,(ix-5)
2797  0D37  D6 3F       	sub	a,0x3f
2798  0D39  20 0D       	jr	NZ,l_player_check_floor_00116
2799  0D3B  DD 6E FE    	ld	l,(ix-2)
2800  0D3E  DD 66 FF    	ld	h,(ix-1)
2801  0D41  36 40       	ld	(hl),0x40
2802  0D43  C5          	push	bc
2803  0D44  CD 98 0D    	call	_player_gasta_brick
2804  0D47  C1          	pop	bc
2805  0D48              l_player_check_floor_00116:
2806  0D48  DD 7E FB    	ld	a,(ix-5)
2807  0D4B  D6 3E       	sub	a,0x3e
2808  0D4D  20 0D       	jr	NZ,l_player_check_floor_00118
2809  0D4F  DD 6E FE    	ld	l,(ix-2)
2810  0D52  DD 66 FF    	ld	h,(ix-1)
2811  0D55  36 3F       	ld	(hl),0x3f
2812  0D57  C5          	push	bc
2813  0D58  CD 98 0D    	call	_player_gasta_brick
2814  0D5B  C1          	pop	bc
2815  0D5C              l_player_check_floor_00118:
2816  0D5C  DD 7E FA    	ld	a,(ix-6)
2817  0D5F  D6 40       	sub	a,0x40
2818  0D61  20 14       	jr	NZ,l_player_check_floor_00120
2819  0D63  C5          	push	bc
2820  0D64  DD 6E FC    	ld	l,(ix-4)
2821  0D67  DD 66 FD    	ld	h,(ix-3)
2822  0D6A  E5          	push	hl
2823  0D6B  CD 00 00    	call	_game_match_back
2824  0D6E  F1          	pop	af
2825  0D6F  C1          	pop	bc
2826  0D70  7D          	ld	a,l
2827  0D71  02          	ld	(bc), a
2828  0D72  C5          	push	bc
2829  0D73  CD 98 0D    	call	_player_gasta_brick
2830  0D76  C1          	pop	bc
2831  0D77              l_player_check_floor_00120:
2832  0D77  DD 7E FA    	ld	a,(ix-6)
2833  0D7A  D6 3F       	sub	a,0x3f
2834  0D7C  20 08       	jr	NZ,l_player_check_floor_00122
2835  0D7E  3E 40       	ld	a,0x40
2836  0D80  02          	ld	(bc), a
2837  0D81  C5          	push	bc
2838  0D82  CD 98 0D    	call	_player_gasta_brick
2839  0D85  C1          	pop	bc
2840  0D86              l_player_check_floor_00122:
2841  0D86  DD 7E FA    	ld	a,(ix-6)
2842  0D89  D6 3E       	sub	a,0x3e
2843  0D8B  20 06       	jr	NZ,l_player_check_floor_00133
2844  0D8D  3E 3F       	ld	a,0x3f
2845  0D8F  02          	ld	(bc), a
2846  0D90  CD 98 0D    	call	_player_gasta_brick
2847  0D93              l_player_check_floor_00133:
2848  0D93  DD F9       	ld	sp, ix
2849  0D95  DD E1       	pop	ix
2850  0D97  C9          	ret
2851  0D98              	SECTION code_compiler
2852  0D98              ;	---------------------------------
2853  0D98              ; Function player_gasta_brick
2854  0D98              ; ---------------------------------
2855  0D98              _player_gasta_brick:
2856  0D98  3A 00 00    	ld	a,(_s_lin0)
2857  0D9B  32 00 00    	ld	(_s_lin1),a
2858  0D9E  3A 00 00    	ld	a,(_s_col0)
2859  0DA1  32 00 00    	ld	(_s_col1),a
2860  0DA4  3A 07 00    	ld	a,(_lin + 0x0007)
2861  0DA7  C6 10       	add	a,0x10
2862  0DA9  32 00 00    	ld	(_s_lin0),a
2863  0DAC  3A 07 00    	ld	a,(_col + 0x0007)
2864  0DAF  32 00 00    	ld	(_s_col0),a
2865  0DB2  CD 00 00    	call	_spr_back_repaint
2866  0DB5  3A 00 00    	ld	a,(_s_lin1)
2867  0DB8  32 00 00    	ld	(_s_lin0),a
2868  0DBB  3A 00 00    	ld	a,(_s_col1)
2869  0DBE  32 00 00    	ld	(_s_col0),a
2870  0DC1  C9          	ret
2871  0DC2              	SECTION code_compiler
2872  0DC2              ;	---------------------------------
2873  0DC2              ; Function player_move_jump
2874  0DC2              ; ---------------------------------
2875  0DC2              _player_move_jump:
2876  0DC2  21 00 00    	ld	hl,_game_gravity
2877  0DC5  4E          	ld	c, (hl)
2878  0DC6  21 00 00    	ld	hl,_player_vel_y
2879  0DC9  7E          	ld	a, (hl)
2880  0DCA  81          	add	a, c
2881  0DCB  77          	ld	(hl), a
2882  0DCC  21 00 00    	ld	hl,_sprite_on_air
2883  0DCF  36 01       	ld	(hl),0x01
2884  0DD1  3A 00 00    	ld	a,(_player_vel_inc)
2885  0DD4  B7          	or	a, a
2886  0DD5  28 4A       	jr	Z,l_player_move_jump_00109
2887  0DD7  3A 00 00    	ld	a,(_dirs)
2888  0DDA  CB 07       	rlc	a
2889  0DDC  E6 01       	and	a,0x01
2890  0DDE  4F          	ld	c, a
2891  0DDF  3A 00 00    	ld	a,(_game_2buttons)
2892  0DE2  B7          	or	a, a
2893  0DE3  28 06       	jr	Z,l_player_move_jump_00102
2894  0DE5  79          	ld	a, c
2895  0DE6  EE 01       	xor	a,0x01
2896  0DE8  4F          	ld	c, a
2897  0DE9  18 15       	jr	l_player_move_jump_00103
2898  0DEB              l_player_move_jump_00102:
2899  0DEB  CB 41       	bit	0, c
2900  0DED  28 07       	jr	Z,l_player_move_jump_00154
2901  0DEF  21 00 00    	ld	hl,_dirs
2902  0DF2  CB 46       	bit	0, (hl)
2903  0DF4  20 04       	jr	NZ,l_player_move_jump_00155
2904  0DF6              l_player_move_jump_00154:
2905  0DF6  0E 00       	ld	c,0x00
2906  0DF8  18 02       	jr	l_player_move_jump_00156
2907  0DFA              l_player_move_jump_00155:
2908  0DFA  0E 01       	ld	c,0x01
2909  0DFC              l_player_move_jump_00156:
2910  0DFC  79          	ld	a, c
2911  0DFD  EE 01       	xor	a,0x01
2912  0DFF  4F          	ld	c, a
2913  0E00              l_player_move_jump_00103:
2914  0E00  79          	ld	a, c
2915  0E01  B7          	or	a, a
2916  0E02  28 1D       	jr	Z,l_player_move_jump_00109
2917  0E04  3A 00 00    	ld	a,(_player_vel_y1)
2918  0E07  21 00 00    	ld	hl,_player_vel_y
2919  0E0A  96          	sub	a, (hl)
2920  0E0B  E2 10 0E    	jp	PO, l_player_move_jump_00259
2921  0E0E  EE 80       	xor	a,0x80
2922  0E10              l_player_move_jump_00259:
2923  0E10  F2 21 0E    	jp	P, l_player_move_jump_00109
2924  0E13  21 00 00    	ld	hl,_player_vel_y
2925  0E16  CB 7E       	bit	7,(hl)
2926  0E18  28 07       	jr	Z,l_player_move_jump_00109
2927  0E1A  36 00       	ld	(hl),0x00
2928  0E1C  21 00 00    	ld	hl,_player_vel_inc
2929  0E1F  36 00       	ld	(hl),0x00
2930  0E21              l_player_move_jump_00109:
2931  0E21  3E 78       	ld	a,0x78
2932  0E23  21 00 00    	ld	hl,_player_vel_y
2933  0E26  96          	sub	a, (hl)
2934  0E27  E2 2C 0E    	jp	PO, l_player_move_jump_00260
2935  0E2A  EE 80       	xor	a,0x80
2936  0E2C              l_player_move_jump_00260:
2937  0E2C  F2 34 0E    	jp	P, l_player_move_jump_00111
2938  0E2F  21 00 00    	ld	hl,_player_vel_y
2939  0E32  36 78       	ld	(hl),0x78
2940  0E34              l_player_move_jump_00111:
2941  0E34  21 00 00    	ld	hl,_player_vel_y
2942  0E37  7E          	ld	a, (hl)
2943  0E38  EE 80       	xor	a,0x80
2944  0E3A  D6 08       	sub	a,0x08
2945  0E3C  30 02       	jr	NC,l_player_move_jump_00113
2946  0E3E  36 88       	ld	(hl),0x88
2947  0E40              l_player_move_jump_00113:
2948  0E40  3A 00 00    	ld	a,(_player_vel_y)
2949  0E43  47          	ld	b,a
2950  0E44  17          	rla
2951  0E45  9F          	sbc	a, a
2952  0E46  5F          	ld	e, a
2953  0E47  CB 40       	bit	0,b
2954  0E49  21 00 00    	ld	hl,_s_lin1
2955  0E4C  70          	ld	(hl),b
2956  0E4D  28 04       	jr	Z,l_player_move_jump_00115
2957  0E4F  21 00 00    	ld	hl,_s_lin1
2958  0E52  35          	dec	(hl)
2959  0E53              l_player_move_jump_00115:
2960  0E53  3A 07 00    	ld	a,(_lin + 0x0007)
2961  0E56  21 00 00    	ld	hl,_s_lin1
2962  0E59  86          	add	a, (hl)
2963  0E5A  77          	ld	(hl), a
2964  0E5B  3E 90       	ld	a,0x90
2965  0E5D  96          	sub	a, (hl)
2966  0E5E  3E 00       	ld	a,0x00
2967  0E60  17          	rla
2968  0E61  4F          	ld	c, a
2969  0E62  CB 7B       	bit	7, e
2970  0E64  28 5B       	jr	Z,l_player_move_jump_00141
2971  0E66  21 00 00    	ld	hl,_s_state
2972  0E69  7E          	ld	a,(hl)
2973  0E6A  F6 01       	or	a,0x01
2974  0E6C  E6 FD       	and	a,0xfd
2975  0E6E  77          	ld	(hl),a
2976  0E6F  79          	ld	a, c
2977  0E70  B7          	or	a, a
2978  0E71  28 11       	jr	Z,l_player_move_jump_00120
2979  0E73  CD 00 00    	call	_spr_page_up
2980  0E76  7D          	ld	a, l
2981  0E77  B7          	or	a, a
2982  0E78  28 05       	jr	Z,l_player_move_jump_00117
2983  0E7A  2E 00       	ld	l,0x00
2984  0E7C  C3 80 0F    	jp	l_player_move_jump_00152
2985  0E7F              l_player_move_jump_00117:
2986  0E7F  21 00 00    	ld	hl,_s_lin1
2987  0E82  36 00       	ld	(hl),0x00
2988  0E84              l_player_move_jump_00120:
2989  0E84  21 07 00    	ld	hl,+(_col + 0x0007)
2990  0E87  46          	ld	b, (hl)
2991  0E88  C5          	push	bc
2992  0E89  33          	inc	sp
2993  0E8A  3A 00 00    	ld	a,(_s_lin1)
2994  0E8D  F5          	push	af
2995  0E8E  33          	inc	sp
2996  0E8F  CD 00 00    	call	_game_check_map
2997  0E92  F1          	pop	af
2998  0E93  7C          	ld	a,h
2999  0E94  B5          	or	a,l
3000  0E95  28 21       	jr	Z,l_player_move_jump_00124
3001  0E97  CD 01 09    	call	_player_hit_platform
3002  0E9A  7D          	ld	a, l
3003  0E9B  B7          	or	a, a
3004  0E9C  28 12       	jr	Z,l_player_move_jump_00122
3005  0E9E  3A 07 00    	ld	a,(_lin + 0x0007)
3006  0EA1  07          	rlca
3007  0EA2  07          	rlca
3008  0EA3  07          	rlca
3009  0EA4  07          	rlca
3010  0EA5  E6 0F       	and	a,0x0f
3011  0EA7  07          	rlca
3012  0EA8  07          	rlca
3013  0EA9  07          	rlca
3014  0EAA  07          	rlca
3015  0EAB  E6 F0       	and	a,0xf0
3016  0EAD  32 07 00    	ld	((_lin + 0x0007)),a
3017  0EB0              l_player_move_jump_00122:
3018  0EB0  21 00 00    	ld	hl,_player_vel_y
3019  0EB3  36 00       	ld	(hl),0x00
3020  0EB5  C3 42 0F    	jp	l_player_move_jump_00142
3021  0EB8              l_player_move_jump_00124:
3022  0EB8  3A 00 00    	ld	a,(_s_lin1)
3023  0EBB  32 07 00    	ld	((_lin + 0x0007)),a
3024  0EBE  C3 42 0F    	jp	l_player_move_jump_00142
3025  0EC1              l_player_move_jump_00141:
3026  0EC1  21 00 00    	ld	hl,_s_state
3027  0EC4  7E          	ld	a,(hl)
3028  0EC5  F6 02       	or	a,0x02
3029  0EC7  E6 FE       	and	a,0xfe
3030  0EC9  77          	ld	(hl),a
3031  0ECA  79          	ld	a, c
3032  0ECB  B7          	or	a, a
3033  0ECC  28 11       	jr	Z,l_player_move_jump_00130
3034  0ECE  CD 00 00    	call	_spr_page_down
3035  0ED1  7D          	ld	a, l
3036  0ED2  B7          	or	a, a
3037  0ED3  28 05       	jr	Z,l_player_move_jump_00127
3038  0ED5  2E 00       	ld	l,0x00
3039  0ED7  C3 80 0F    	jp	l_player_move_jump_00152
3040  0EDA              l_player_move_jump_00127:
3041  0EDA  21 00 00    	ld	hl,_s_lin1
3042  0EDD  36 90       	ld	(hl),0x90
3043  0EDF              l_player_move_jump_00130:
3044  0EDF  21 07 00    	ld	hl,+(_col + 0x0007)
3045  0EE2  4E          	ld	c, (hl)
3046  0EE3  3A 00 00    	ld	a,(_s_lin1)
3047  0EE6  C6 10       	add	a,0x10
3048  0EE8  47          	ld	b, a
3049  0EE9  79          	ld	a, c
3050  0EEA  48          	ld	c,b
3051  0EEB  47          	ld	b,a
3052  0EEC  C5          	push	bc
3053  0EED  CD 00 00    	call	_game_check_map
3054  0EF0  F1          	pop	af
3055  0EF1  7C          	ld	a,h
3056  0EF2  B5          	or	a,l
3057  0EF3  28 47       	jr	Z,l_player_move_jump_00138
3058  0EF5  2E 00       	ld	l,0x00
3059  0EF7  CD 23 06    	call	_player_check_stairs
3060  0EFA  3A 00 00    	ld	a,(_player_onstair)
3061  0EFD  B7          	or	a, a
3062  0EFE  20 05       	jr	NZ,l_player_move_jump_00132
3063  0F00  2E 01       	ld	l,0x01
3064  0F02  CD 23 06    	call	_player_check_stairs
3065  0F05              l_player_move_jump_00132:
3066  0F05  3A 00 00    	ld	a,(_player_onstair)
3067  0F08  B7          	or	a, a
3068  0F09  20 12       	jr	NZ,l_player_move_jump_00134
3069  0F0B  3A 00 00    	ld	a,(_s_lin1)
3070  0F0E  07          	rlca
3071  0F0F  07          	rlca
3072  0F10  07          	rlca
3073  0F11  07          	rlca
3074  0F12  E6 0F       	and	a,0x0f
3075  0F14  07          	rlca
3076  0F15  07          	rlca
3077  0F16  07          	rlca
3078  0F17  07          	rlca
3079  0F18  E6 F0       	and	a,0xf0
3080  0F1A  32 07 00    	ld	((_lin + 0x0007)),a
3081  0F1D              l_player_move_jump_00134:
3082  0F1D  21 00 00    	ld	hl,_player_vel_y
3083  0F20  36 00       	ld	(hl),0x00
3084  0F22  21 00 00    	ld	hl,_s_state
3085  0F25  7E          	ld	a,(hl)
3086  0F26  E6 FC       	and	a,+(0xfd&0xfe)
3087  0F28  77          	ld	(hl),a
3088  0F29  3A 07 00    	ld	a,(_lin + 0x0007)
3089  0F2C  D6 90       	sub	a,0x90
3090  0F2E  38 03       	jr	C,l_player_move_jump_00136
3091  0F30  CD 00 00    	call	_spr_page_down
3092  0F33              l_player_move_jump_00136:
3093  0F33  21 07 00    	ld	hl, +(_colint + 0x0007)
3094  0F36  36 00       	ld	(hl),0x00
3095  0F38  2E 01       	ld	l,0x01
3096  0F3A  18 44       	jr	l_player_move_jump_00152
3097  0F3C              l_player_move_jump_00138:
3098  0F3C  3A 00 00    	ld	a,(_s_lin1)
3099  0F3F  32 07 00    	ld	((_lin + 0x0007)),a
3100  0F42              l_player_move_jump_00142:
3101  0F42  21 00 00    	ld	hl,_s_state
3102  0F45  CB 5E       	bit	3, (hl)
3103  0F47  20 27       	jr	NZ,l_player_move_jump_00148
3104  0F49  21 00 00    	ld	hl,_s_state
3105  0F4C  CB 56       	bit	2, (hl)
3106  0F4E  20 20       	jr	NZ,l_player_move_jump_00148
3107  0F50  21 00 00    	ld	hl,_dirs
3108  0F53  CB 56       	bit	2, (hl)
3109  0F55  28 09       	jr	Z,l_player_move_jump_00144
3110  0F57  21 00 00    	ld	hl,_s_state
3111  0F5A  7E          	ld	a,(hl)
3112  0F5B  F6 08       	or	a,0x08
3113  0F5D  E6 FB       	and	a,0xfb
3114  0F5F  77          	ld	(hl),a
3115  0F60              l_player_move_jump_00144:
3116  0F60  21 00 00    	ld	hl,_dirs
3117  0F63  CB 5E       	bit	3, (hl)
3118  0F65  28 09       	jr	Z,l_player_move_jump_00148
3119  0F67  21 00 00    	ld	hl,_s_state
3120  0F6A  7E          	ld	a,(hl)
3121  0F6B  F6 04       	or	a,0x04
3122  0F6D  E6 F7       	and	a,0xf7
3123  0F6F  77          	ld	(hl),a
3124  0F70              l_player_move_jump_00148:
3125  0F70  CD 00 00    	call	_spr_move_horizontal
3126  0F73  7D          	ld	a, l
3127  0F74  B7          	or	a, a
3128  0F75  28 07       	jr	Z,l_player_move_jump_00151
3129  0F77  21 00 00    	ld	hl,_s_state
3130  0F7A  7E          	ld	a,(hl)
3131  0F7B  E6 F3       	and	a,+(0xf7&0xfb)
3132  0F7D  77          	ld	(hl),a
3133  0F7E              l_player_move_jump_00151:
3134  0F7E  2E 00       	ld	l,0x00
3135  0F80              l_player_move_jump_00152:
3136  0F80  C9          	ret
3137  0F81              	SECTION code_compiler
3138  0F81              ;	---------------------------------
3139  0F81              ; Function player_open_door
3140  0F81              ; ---------------------------------
3141  0F81              _player_open_door:
3142  0F81  CD 00 00    	call	___sdcc_enter_ix
3143  0F84  0E 00       	ld	c,0x00
3144  0F86  21 00 00    	ld	hl,_ay_effect_05
3145  0F89  CD 00 00    	call	_ay_fx_play
3146  0F8C  DD 7E 06    	ld	a,(ix+6)
3147  0F8F  D6 48       	sub	a,0x48
3148  0F91  28 17       	jr	Z,l_player_open_door_00101
3149  0F93  DD 7E 06    	ld	a,(ix+6)
3150  0F96  D6 49       	sub	a,0x49
3151  0F98  28 1F       	jr	Z,l_player_open_door_00104
3152  0F9A  DD 7E 06    	ld	a,(ix+6)
3153  0F9D  D6 4A       	sub	a,0x4a
3154  0F9F  28 27       	jr	Z,l_player_open_door_00107
3155  0FA1  DD 7E 06    	ld	a,(ix+6)
3156  0FA4  D6 4B       	sub	a,0x4b
3157  0FA6  28 2F       	jr	Z,l_player_open_door_00110
3158  0FA8  18 3A       	jr	l_player_open_door_00113
3159  0FAA              l_player_open_door_00101:
3160  0FAA  3A 00 00    	ld	a,(_player_keys)
3161  0FAD  B7          	or	a, a
3162  0FAE  28 34       	jr	Z,l_player_open_door_00113
3163  0FB0  2E 07       	ld	l,0x07
3164  0FB2  CD 00 00    	call	_zx_border_fastcall
3165  0FB5  0E 01       	ld	c,0x01
3166  0FB7  18 2B       	jr	l_player_open_door_00113
3167  0FB9              l_player_open_door_00104:
3168  0FB9  3A 01 00    	ld	a,(_player_keys + 0x0001)
3169  0FBC  B7          	or	a, a
3170  0FBD  28 25       	jr	Z,l_player_open_door_00113
3171  0FBF  2E 02       	ld	l,0x02
3172  0FC1  CD 00 00    	call	_zx_border_fastcall
3173  0FC4  0E 01       	ld	c,0x01
3174  0FC6  18 1C       	jr	l_player_open_door_00113
3175  0FC8              l_player_open_door_00107:
3176  0FC8  3A 02 00    	ld	a,(_player_keys + 0x0002)
3177  0FCB  B7          	or	a, a
3178  0FCC  28 16       	jr	Z,l_player_open_door_00113
3179  0FCE  2E 04       	ld	l,0x04
3180  0FD0  CD 00 00    	call	_zx_border_fastcall
3181  0FD3  0E 01       	ld	c,0x01
3182  0FD5  18 0D       	jr	l_player_open_door_00113
3183  0FD7              l_player_open_door_00110:
3184  0FD7  3A 03 00    	ld	a,(_player_keys + 0x0003)
3185  0FDA  B7          	or	a, a
3186  0FDB  28 07       	jr	Z,l_player_open_door_00113
3187  0FDD  2E 05       	ld	l,0x05
3188  0FDF  CD 00 00    	call	_zx_border_fastcall
3189  0FE2  0E 01       	ld	c,0x01
3190  0FE4              l_player_open_door_00113:
3191  0FE4  79          	ld	a, c
3192  0FE5  B7          	or	a, a
3193  0FE6  20 06       	jr	NZ,l_player_open_door_00114
3194  0FE8  3A 00 00    	ld	a,(_game_inmune)
3195  0FEB  B7          	or	a, a
3196  0FEC  28 2F       	jr	Z,l_player_open_door_00117
3197  0FEE              l_player_open_door_00114:
3198  0FEE  3E 00       	ld	a, +((_scr_map) & 0xFF)
3199  0FF0  DD 86 04    	add	a,(ix+4)
3200  0FF3  4F          	ld	c, a
3201  0FF4  3E 00       	ld	a, +((_scr_map) / 256)
3202  0FF6  DD 8E 05    	adc	a,(ix+5)
3203  0FF9  47          	ld	b, a
3204  0FFA  C5          	push	bc
3205  0FFB  DD 6E 04    	ld	l,(ix+4)
3206  0FFE  DD 66 05    	ld	h,(ix+5)
3207  1001  E5          	push	hl
3208  1002  CD 00 00    	call	_game_match_back
3209  1005  F1          	pop	af
3210  1006  C1          	pop	bc
3211  1007  7D          	ld	a,l
3212  1008  02          	ld	(bc), a
3213  1009  DD 6E 04    	ld	l,(ix+4)
3214  100C  DD 66 05    	ld	h,(ix+5)
3215  100F  CD 00 00    	call	_game_obj_set
3216  1012  DD 6E 04    	ld	l,(ix+4)
3217  1015  DD 66 05    	ld	h,(ix+5)
3218  1018  E5          	push	hl
3219  1019  CD 00 00    	call	_spr_draw_index
3220  101C  F1          	pop	af
3221  101D              l_player_open_door_00117:
3222  101D  DD E1       	pop	ix
3223  101F  C9          	ret
3224  1020              	SECTION code_compiler
3225  1020              ;	---------------------------------
3226  1020              ; Function player_lost_life
3227  1020              ; ---------------------------------
3228  1020              _player_lost_life:
3229  1020  CD 00 00    	call	___sdcc_enter_ix
3230  1023  3B          	dec	sp
3231  1024  21 00 00    	ld	hl,_ay_effect_18
3232  1027  CD 00 00    	call	_ay_fx_play
3233  102A  21 00 00    	ld	hl,_player_vita
3234  102D  36 00       	ld	(hl),0x00
3235  102F  CD 00 00    	call	_game_update_stats
3236  1032  3A 07 00    	ld	a,(_lin + 0x0007)
3237  1035  32 00 00    	ld	(_s_lin0),a
3238  1038  3A 07 00    	ld	a,(_col + 0x0007)
3239  103B  32 00 00    	ld	(_s_col0),a
3240  103E  CD 00 00    	call	_spr_init_anim_bullets
3241  1041  01 00 00    	ld	bc,_anim_lin+0
3242  1044  16 00       	ld	d,0x00
3243  1046              l_player_lost_life_00116:
3244  1046  C5          	push	bc
3245  1047  D5          	push	de
3246  1048  21 00 00    	ld	hl,0x0000
3247  104B  E5          	push	hl
3248  104C  AF          	xor	a, a
3249  104D  5A          	ld	e,d
3250  104E  57          	ld	d,a
3251  104F  D5          	push	de
3252  1050  CD 00 00    	call	_NIRVANAP_spriteT_callee
3253  1053  D1          	pop	de
3254  1054  C1          	pop	bc
3255  1055  6A          	ld	l,d
3256  1056  26 00       	ld	h,0x00
3257  1058  09          	add	hl, bc
3258  1059  36 FF       	ld	(hl),0xff
3259  105B  14          	inc	d
3260  105C  7A          	ld	a, d
3261  105D  D6 08       	sub	a,0x08
3262  105F  38 E5       	jr	C,l_player_lost_life_00116
3263  1061  21 00 00    	ld	hl,_anim_count
3264  1064  36 00       	ld	(hl),0x00
3265  1066  76          	halt
3266  1067  3A 00 00    	ld	a,(_s_lin0)
3267  106A  C6 F0       	add	a,0xf0
3268  106C  47          	ld	b, a
3269  106D  3A 00 00    	ld	a,(_s_col0)
3270  1070  21 00 00    	ld	hl,0x0000
3271  1073  E5          	push	hl
3272  1074  21 87 03    	ld	hl,0x0387
3273  1077  E5          	push	hl
3274  1078  48          	ld	c,b
3275  1079  47          	ld	b,a
3276  107A  C5          	push	bc
3277  107B  CD 00 00    	call	_spr_add_anim
3278  107E  F1          	pop	af
3279  107F  F1          	pop	af
3280  1080  F1          	pop	af
3281  1081  21 00 00    	ld	hl,_s_col0
3282  1084  46          	ld	b, (hl)
3283  1085  05          	dec	b
3284  1086  05          	dec	b
3285  1087  21 00 00    	ld	hl,0x0000
3286  108A  E5          	push	hl
3287  108B  21 87 03    	ld	hl,0x0387
3288  108E  E5          	push	hl
3289  108F  C5          	push	bc
3290  1090  33          	inc	sp
3291  1091  3A 00 00    	ld	a,(_s_lin0)
3292  1094  F5          	push	af
3293  1095  33          	inc	sp
3294  1096  CD 00 00    	call	_spr_add_anim
3295  1099  F1          	pop	af
3296  109A  F1          	pop	af
3297  109B  21 00 00    	ld	hl,0x0000
3298  109E  E3          	ex	(sp),hl
3299  109F  3A 00 00    	ld	a,(_s_col0)
3300  10A2  21 87 03    	ld	hl,0x0387
3301  10A5  E5          	push	hl
3302  10A6  F5          	push	af
3303  10A7  33          	inc	sp
3304  10A8  3A 00 00    	ld	a,(_s_lin0)
3305  10AB  F5          	push	af
3306  10AC  33          	inc	sp
3307  10AD  CD 00 00    	call	_spr_add_anim
3308  10B0  F1          	pop	af
3309  10B1  F1          	pop	af
3310  10B2  F1          	pop	af
3311  10B3  21 00 00    	ld	hl,_s_col0
3312  10B6  46          	ld	b, (hl)
3313  10B7  04          	inc	b
3314  10B8  04          	inc	b
3315  10B9  21 00 00    	ld	hl,0x0000
3316  10BC  E5          	push	hl
3317  10BD  21 87 03    	ld	hl,0x0387
3318  10C0  E5          	push	hl
3319  10C1  C5          	push	bc
3320  10C2  33          	inc	sp
3321  10C3  3A 00 00    	ld	a,(_s_lin0)
3322  10C6  F5          	push	af
3323  10C7  33          	inc	sp
3324  10C8  CD 00 00    	call	_spr_add_anim
3325  10CB  F1          	pop	af
3326  10CC  F1          	pop	af
3327  10CD  F1          	pop	af
3328  10CE  3A 00 00    	ld	a,(_s_lin0)
3329  10D1  C6 10       	add	a,0x10
3330  10D3  47          	ld	b, a
3331  10D4  3A 00 00    	ld	a,(_s_col0)
3332  10D7  21 00 00    	ld	hl,0x0000
3333  10DA  E5          	push	hl
3334  10DB  21 87 03    	ld	hl,0x0387
3335  10DE  E5          	push	hl
3336  10DF  48          	ld	c,b
3337  10E0  47          	ld	b,a
3338  10E1  C5          	push	bc
3339  10E2  CD 00 00    	call	_spr_add_anim
3340  10E5  F1          	pop	af
3341  10E6  F1          	pop	af
3342  10E7  F1          	pop	af
3343  10E8  2E 00       	ld	l,0x00
3344  10EA  CD 00 00    	call	_zx_border_fastcall
3345  10ED  DD 36 FF 01 	ld	(ix-1),0x01
3346  10F1  2A 00 00    	ld	hl,(_curr_time)
3347  10F4  22 00 00    	ld	(_anim_time),hl
3348  10F7              l_player_lost_life_00107:
3349  10F7  DD 7E FF    	ld	a,(ix-1)
3350  10FA  B7          	or	a, a
3351  10FB  28 28       	jr	Z,l_player_lost_life_00109
3352  10FD  21 0C 00    	ld	hl,0x000c
3353  1100  E5          	push	hl
3354  1101  2A 00 00    	ld	hl,(_anim_time)
3355  1104  E5          	push	hl
3356  1105  CD 00 00    	call	_game_check_time
3357  1108  F1          	pop	af
3358  1109  F1          	pop	af
3359  110A  7D          	ld	a, l
3360  110B  B7          	or	a, a
3361  110C  28 E9       	jr	Z,l_player_lost_life_00107
3362  110E  2A 00 00    	ld	hl,(_curr_time)
3363  1111  22 00 00    	ld	(_anim_time),hl
3364  1114  3A 00 00    	ld	a,(_anim_count)
3365  1117  B7          	or	a,a
3366  1118  28 05       	jr	Z,l_player_lost_life_00103
3367  111A  CD 00 00    	call	_spr_play_anim
3368  111D  18 D8       	jr	l_player_lost_life_00107
3369  111F              l_player_lost_life_00103:
3370  111F  DD 36 FF 00 	ld	(ix-1),0x00
3371  1123  18 D2       	jr	l_player_lost_life_00107
3372  1125              l_player_lost_life_00109:
3373  1125  21 00 00    	ld	hl,_sprite
3374  1128  36 00       	ld	(hl),0x00
3375  112A              l_player_lost_life_00118:
3376  112A  3A 07 00    	ld	a,(_class + 0x0007)
3377  112D  B7          	or	a, a
3378  112E  28 1F       	jr	Z,l_player_lost_life_00111
3379  1130  21 07 00    	ld	hl,+(_col + 0x0007)
3380  1133  4E          	ld	c, (hl)
3381  1134  21 07 00    	ld	hl,+(_lin + 0x0007)
3382  1137  56          	ld	d, (hl)
3383  1138  21 07 00    	ld	hl,+(_tile + 0x0007)
3384  113B  5E          	ld	e, (hl)
3385  113C  21 07 00    	ld	hl,+(_colint + 0x0007)
3386  113F  46          	ld	b, (hl)
3387  1140  7B          	ld	a, e
3388  1141  80          	add	a, b
3389  1142  5F          	ld	e, a
3390  1143  79          	ld	a, c
3391  1144  F5          	push	af
3392  1145  33          	inc	sp
3393  1146  3A 00 00    	ld	a,(_sprite)
3394  1149  D5          	push	de
3395  114A  F5          	push	af
3396  114B  33          	inc	sp
3397  114C  CD 00 00    	call	_NIRVANAP_spriteT_callee
3398  114F              l_player_lost_life_00111:
3399  114F  21 07 00    	ld	hl, +(_class + 0x0007)
3400  1152  36 00       	ld	(hl),0x00
3401  1154  21 07 00    	ld	hl, +(_bullet_col + 0x0007)
3402  1157  36 FF       	ld	(hl),0xff
3403  1159  21 00 00    	ld	hl,_sprite
3404  115C  7E          	ld	a,(hl)
3405  115D  3C          	inc	a
3406  115E  77          	ld	(hl),a
3407  115F  D6 07       	sub	a,0x07
3408  1161  38 C7       	jr	C,l_player_lost_life_00118
3409  1163  21 00 00    	ld	hl,_player_lives
3410  1166  35          	dec	(hl)
3411  1167  21 00 00    	ld	hl,_player_mana
3412  116A  36 64       	ld	(hl),0x64
3413  116C  21 00 00    	ld	hl,_player_vita
3414  116F  36 64       	ld	(hl),0x64
3415  1171  3A 00 00    	ld	a,(_player_lives)
3416  1174  B7          	or	a, a
3417  1175  28 0B       	jr	Z,l_player_lost_life_00114
3418  1177  21 F4 01    	ld	hl,0x01f4
3419  117A  CD 00 00    	call	_z80_delay_ms_fastcall
3420  117D  CD 00 00    	call	_game_round_init
3421  1180  18 0A       	jr	l_player_lost_life_00120
3422  1182              l_player_lost_life_00114:
3423  1182  21 00 00    	ld	hl,_player_lives
3424  1185  36 00       	ld	(hl),0x00
3425  1187  21 00 00    	ld	hl,_game_over
3426  118A  36 01       	ld	(hl),0x01
3427  118C              l_player_lost_life_00120:
3428  118C  33          	inc	sp
3429  118D  DD E1       	pop	ix
3430  118F  C9          	ret
3431  1190              	SECTION code_compiler
3432  1190              ;	---------------------------------
3433  1190              ; Function player_hit
3434  1190              ; ---------------------------------
3435  1190              _player_hit:
3436  1190  7D          	ld	a,l
3437  1191  4D          	ld	c,l
3438  1192  21 00 00    	ld	hl,_player_vita
3439  1195  96          	sub	a, (hl)
3440  1196  30 17       	jr	NC,l_player_hit_00104
3441  1198  3A 00 00    	ld	a,(_game_inmune)
3442  119B  B7          	or	a, a
3443  119C  20 06       	jr	NZ,l_player_hit_00102
3444  119E  21 00 00    	ld	hl,_player_vita
3445  11A1  7E          	ld	a, (hl)
3446  11A2  91          	sub	a, c
3447  11A3  77          	ld	(hl), a
3448  11A4              l_player_hit_00102:
3449  11A4  2A 00 00    	ld	hl,(_curr_time)
3450  11A7  22 00 00    	ld	(_player_hit_time),hl
3451  11AA  CD 00 00    	call	_game_update_stats
3452  11AD  18 03       	jr	l_player_hit_00106
3453  11AF              l_player_hit_00104:
3454  11AF  CD 20 10    	call	_player_lost_life
3455  11B2              l_player_hit_00106:
3456  11B2  C9          	ret
3457  11B3              	SECTION IGNORE
3458  0000              
