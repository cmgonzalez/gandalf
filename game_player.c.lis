1     0000              MODULE game_player_c
2     0000              
3     0000              ;--------------------------------------------------------
4     0000              ; File Created by SDCC : free open source ANSI-C Compiler
5     0000              ; Version 3.6.5 #9958 (Mac OS X i386)
6     0000              ;--------------------------------------------------------
7     0000              ; Processed by Z88DK
8     0000              ;--------------------------------------------------------
9     0000              
10    0000              	EXTERN __divschar
11    0000              	EXTERN __divschar_callee
12    0000              	EXTERN __divsint
13    0000              	EXTERN __divsint_callee
14    0000              	EXTERN __divslong
15    0000              	EXTERN __divslong_callee
16    0000              	EXTERN __divslonglong
17    0000              	EXTERN __divslonglong_callee
18    0000              	EXTERN __divsuchar
19    0000              	EXTERN __divsuchar_callee
20    0000              	EXTERN __divuchar
21    0000              	EXTERN __divuchar_callee
22    0000              	EXTERN __divuint
23    0000              	EXTERN __divuint_callee
24    0000              	EXTERN __divulong
25    0000              	EXTERN __divulong_callee
26    0000              	EXTERN __divulonglong
27    0000              	EXTERN __divulonglong_callee
28    0000              	EXTERN __divuschar
29    0000              	EXTERN __divuschar_callee
30    0000              	EXTERN __modschar
31    0000              	EXTERN __modschar_callee
32    0000              	EXTERN __modsint
33    0000              	EXTERN __modsint_callee
34    0000              	EXTERN __modslong
35    0000              	EXTERN __modslong_callee
36    0000              	EXTERN __modslonglong
37    0000              	EXTERN __modslonglong_callee
38    0000              	EXTERN __modsuchar
39    0000              	EXTERN __modsuchar_callee
40    0000              	EXTERN __moduchar
41    0000              	EXTERN __moduchar_callee
42    0000              	EXTERN __moduint
43    0000              	EXTERN __moduint_callee
44    0000              	EXTERN __modulong
45    0000              	EXTERN __modulong_callee
46    0000              	EXTERN __modulonglong
47    0000              	EXTERN __modulonglong_callee
48    0000              	EXTERN __moduschar
49    0000              	EXTERN __moduschar_callee
50    0000              	EXTERN __mulint
51    0000              	EXTERN __mulint_callee
52    0000              	EXTERN __mullong
53    0000              	EXTERN __mullong_callee
54    0000              	EXTERN __mullonglong
55    0000              	EXTERN __mullonglong_callee
56    0000              	EXTERN __mulschar
57    0000              	EXTERN __mulschar_callee
58    0000              	EXTERN __mulsuchar
59    0000              	EXTERN __mulsuchar_callee
60    0000              	EXTERN __muluschar
61    0000              	EXTERN __muluschar_callee
62    0000              	EXTERN __rlslonglong
63    0000              	EXTERN __rlslonglong_callee
64    0000              	EXTERN __rlulonglong
65    0000              	EXTERN __rlulonglong_callee
66    0000              	EXTERN __rrslonglong
67    0000              	EXTERN __rrslonglong_callee
68    0000              	EXTERN __rrulonglong
69    0000              	EXTERN __rrulonglong_callee
70    0000              	EXTERN ___sdcc_call_hl
71    0000              	EXTERN ___sdcc_call_iy
72    0000              	EXTERN ___sdcc_enter_ix
73    0000              	EXTERN _banked_call
74    0000              	EXTERN _banked_ret
75    0000              	EXTERN ___fs2schar
76    0000              	EXTERN ___fs2schar_callee
77    0000              	EXTERN ___fs2sint
78    0000              	EXTERN ___fs2sint_callee
79    0000              	EXTERN ___fs2slong
80    0000              	EXTERN ___fs2slong_callee
81    0000              	EXTERN ___fs2slonglong
82    0000              	EXTERN ___fs2slonglong_callee
83    0000              	EXTERN ___fs2uchar
84    0000              	EXTERN ___fs2uchar_callee
85    0000              	EXTERN ___fs2uint
86    0000              	EXTERN ___fs2uint_callee
87    0000              	EXTERN ___fs2ulong
88    0000              	EXTERN ___fs2ulong_callee
89    0000              	EXTERN ___fs2ulonglong
90    0000              	EXTERN ___fs2ulonglong_callee
91    0000              	EXTERN ___fsadd
92    0000              	EXTERN ___fsadd_callee
93    0000              	EXTERN ___fsdiv
94    0000              	EXTERN ___fsdiv_callee
95    0000              	EXTERN ___fseq
96    0000              	EXTERN ___fseq_callee
97    0000              	EXTERN ___fsgt
98    0000              	EXTERN ___fsgt_callee
99    0000              	EXTERN ___fslt
100   0000              	EXTERN ___fslt_callee
101   0000              	EXTERN ___fsmul
102   0000              	EXTERN ___fsmul_callee
103   0000              	EXTERN ___fsneq
104   0000              	EXTERN ___fsneq_callee
105   0000              	EXTERN ___fssub
106   0000              	EXTERN ___fssub_callee
107   0000              	EXTERN ___schar2fs
108   0000              	EXTERN ___schar2fs_callee
109   0000              	EXTERN ___sint2fs
110   0000              	EXTERN ___sint2fs_callee
111   0000              	EXTERN ___slong2fs
112   0000              	EXTERN ___slong2fs_callee
113   0000              	EXTERN ___slonglong2fs
114   0000              	EXTERN ___slonglong2fs_callee
115   0000              	EXTERN ___uchar2fs
116   0000              	EXTERN ___uchar2fs_callee
117   0000              	EXTERN ___uint2fs
118   0000              	EXTERN ___uint2fs_callee
119   0000              	EXTERN ___ulong2fs
120   0000              	EXTERN ___ulong2fs_callee
121   0000              	EXTERN ___ulonglong2fs
122   0000              	EXTERN ___ulonglong2fs_callee
123   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
126   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
127   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
128   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
129   0000              	EXTERN ____sdcc_4_ldi_save_bc
130   0000              	EXTERN ____sdcc_4_push_hlix
131   0000              	EXTERN ____sdcc_4_push_mhl
132   0000              	EXTERN ____sdcc_lib_setmem_hl
133   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
134   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
135   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
136   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
137   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
138   0000              	EXTERN ____sdcc_ll_add_deix_hlix
139   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
140   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
141   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
142   0000              	EXTERN ____sdcc_ll_asr_hlix_a
143   0000              	EXTERN ____sdcc_ll_asr_mbc_a
144   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
145   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
146   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
147   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
148   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
149   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
150   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
151   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
152   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
153   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
155   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
156   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
157   0000              	EXTERN ____sdcc_ll_push_hlix
158   0000              	EXTERN ____sdcc_ll_push_mhl
159   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
160   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
161   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
162   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
163   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
164   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
165   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
166   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
167   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
168   0000              	EXTERN ____sdcc_load_debc_deix
169   0000              	EXTERN ____sdcc_load_dehl_deix
170   0000              	EXTERN ____sdcc_load_debc_mhl
171   0000              	EXTERN ____sdcc_load_hlde_mhl
172   0000              	EXTERN ____sdcc_store_dehl_bcix
173   0000              	EXTERN ____sdcc_store_debc_hlix
174   0000              	EXTERN ____sdcc_store_debc_mhl
175   0000              	EXTERN ____sdcc_cpu_pop_ei
176   0000              	EXTERN ____sdcc_cpu_pop_ei_jp
177   0000              	EXTERN ____sdcc_cpu_push_di
178   0000              	EXTERN ____sdcc_outi
179   0000              	EXTERN ____sdcc_outi_128
180   0000              	EXTERN ____sdcc_outi_256
181   0000              	EXTERN ____sdcc_ldi
182   0000              	EXTERN ____sdcc_ldi_128
183   0000              	EXTERN ____sdcc_ldi_256
184   0000              
185   0000              ;--------------------------------------------------------
186   0000              ; Public variables in this module
187   0000              ;--------------------------------------------------------
188   0000              	GLOBAL _player_check_map
189   0000              	GLOBAL _player_fix_walk_lin
190   0000              	GLOBAL _player_1up
191   0000              	GLOBAL _player_init
192   0000              	GLOBAL _player_check_input
193   0000              	GLOBAL _player_collision
194   0000              	GLOBAL _player_kill
195   0000              	GLOBAL _player_turn
196   0000              	GLOBAL _player_move
197   0000              	GLOBAL _player_check_stairs_down
198   0000              	GLOBAL _player_check_stairs
199   0000              	GLOBAL _player_tile
200   0000              	GLOBAL _player_move_input
201   0000              	GLOBAL _player_fire
202   0000              	GLOBAL _player_pick_item
203   0000              	GLOBAL _player_hit_platform
204   0000              	GLOBAL _player_hit_platform_clear
205   0000              	GLOBAL _player_score_add
206   0000              	GLOBAL _player_check_floor
207   0000              	GLOBAL _player_gasta_brick
208   0000              	GLOBAL _player_move_jump
209   0000              	GLOBAL _player_open_door
210   0000              	GLOBAL _player_lost_life
211   0000              	GLOBAL _player_hit
212   0000              ;--------------------------------------------------------
213   0000              ; Externals used
214   0000              ;--------------------------------------------------------
215   0000              	GLOBAL _ulltoa_callee
216   0000              	GLOBAL _ulltoa
217   0000              	GLOBAL _strtoull_callee
218   0000              	GLOBAL _strtoull
219   0000              	GLOBAL _strtoll_callee
220   0000              	GLOBAL _strtoll
221   0000              	GLOBAL _lltoa_callee
222   0000              	GLOBAL _lltoa
223   0000              	GLOBAL _llabs_callee
224   0000              	GLOBAL _llabs
225   0000              	GLOBAL __lldivu__callee
226   0000              	GLOBAL __lldivu_
227   0000              	GLOBAL __lldiv__callee
228   0000              	GLOBAL __lldiv_
229   0000              	GLOBAL _atoll_callee
230   0000              	GLOBAL _atoll
231   0000              	GLOBAL _realloc_unlocked_callee
232   0000              	GLOBAL _realloc_unlocked
233   0000              	GLOBAL _malloc_unlocked_fastcall
234   0000              	GLOBAL _malloc_unlocked
235   0000              	GLOBAL _free_unlocked_fastcall
236   0000              	GLOBAL _free_unlocked
237   0000              	GLOBAL _calloc_unlocked_callee
238   0000              	GLOBAL _calloc_unlocked
239   0000              	GLOBAL _aligned_alloc_unlocked_callee
240   0000              	GLOBAL _aligned_alloc_unlocked
241   0000              	GLOBAL _realloc_callee
242   0000              	GLOBAL _realloc
243   0000              	GLOBAL _malloc_fastcall
244   0000              	GLOBAL _malloc
245   0000              	GLOBAL _free_fastcall
246   0000              	GLOBAL _free
247   0000              	GLOBAL _calloc_callee
248   0000              	GLOBAL _calloc
249   0000              	GLOBAL _aligned_alloc_callee
250   0000              	GLOBAL _aligned_alloc
251   0000              	GLOBAL _utoa_callee
252   0000              	GLOBAL _utoa
253   0000              	GLOBAL _ultoa_callee
254   0000              	GLOBAL _ultoa
255   0000              	GLOBAL _system_fastcall
256   0000              	GLOBAL _system
257   0000              	GLOBAL _strtoul_callee
258   0000              	GLOBAL _strtoul
259   0000              	GLOBAL _strtol_callee
260   0000              	GLOBAL _strtol
261   0000              	GLOBAL _strtof_callee
262   0000              	GLOBAL _strtof
263   0000              	GLOBAL _strtod_callee
264   0000              	GLOBAL _strtod
265   0000              	GLOBAL _srand_fastcall
266   0000              	GLOBAL _srand
267   0000              	GLOBAL _rand
268   0000              	GLOBAL _quick_exit_fastcall
269   0000              	GLOBAL _quick_exit
270   0000              	GLOBAL _qsort_callee
271   0000              	GLOBAL _qsort
272   0000              	GLOBAL _ltoa_callee
273   0000              	GLOBAL _ltoa
274   0000              	GLOBAL _labs_fastcall
275   0000              	GLOBAL _labs
276   0000              	GLOBAL _itoa_callee
277   0000              	GLOBAL _itoa
278   0000              	GLOBAL _ftoh_callee
279   0000              	GLOBAL _ftoh
280   0000              	GLOBAL _ftog_callee
281   0000              	GLOBAL _ftog
282   0000              	GLOBAL _ftoe_callee
283   0000              	GLOBAL _ftoe
284   0000              	GLOBAL _ftoa_callee
285   0000              	GLOBAL _ftoa
286   0000              	GLOBAL _exit_fastcall
287   0000              	GLOBAL _exit
288   0000              	GLOBAL _dtoh_callee
289   0000              	GLOBAL _dtoh
290   0000              	GLOBAL _dtog_callee
291   0000              	GLOBAL _dtog
292   0000              	GLOBAL _dtoe_callee
293   0000              	GLOBAL _dtoe
294   0000              	GLOBAL _dtoa_callee
295   0000              	GLOBAL _dtoa
296   0000              	GLOBAL _bsearch_callee
297   0000              	GLOBAL _bsearch
298   0000              	GLOBAL _atol_fastcall
299   0000              	GLOBAL _atol
300   0000              	GLOBAL _atoi_fastcall
301   0000              	GLOBAL _atoi
302   0000              	GLOBAL _atof_fastcall
303   0000              	GLOBAL _atof
304   0000              	GLOBAL _atexit_fastcall
305   0000              	GLOBAL _atexit
306   0000              	GLOBAL _at_quick_exit_fastcall
307   0000              	GLOBAL _at_quick_exit
308   0000              	GLOBAL _abs_fastcall
309   0000              	GLOBAL _abs
310   0000              	GLOBAL _abort
311   0000              	GLOBAL __strtou__callee
312   0000              	GLOBAL __strtou_
313   0000              	GLOBAL __strtoi__callee
314   0000              	GLOBAL __strtoi_
315   0000              	GLOBAL __random_uniform_xor_8__fastcall
316   0000              	GLOBAL __random_uniform_xor_8_
317   0000              	GLOBAL __random_uniform_xor_32__fastcall
318   0000              	GLOBAL __random_uniform_xor_32_
319   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
320   0000              	GLOBAL __random_uniform_cmwc_8_
321   0000              	GLOBAL __shellsort__callee
322   0000              	GLOBAL __shellsort_
323   0000              	GLOBAL __quicksort__callee
324   0000              	GLOBAL __quicksort_
325   0000              	GLOBAL __insertion_sort__callee
326   0000              	GLOBAL __insertion_sort_
327   0000              	GLOBAL __ldivu__callee
328   0000              	GLOBAL __ldivu_
329   0000              	GLOBAL __ldiv__callee
330   0000              	GLOBAL __ldiv_
331   0000              	GLOBAL __divu__callee
332   0000              	GLOBAL __divu_
333   0000              	GLOBAL __div__callee
334   0000              	GLOBAL __div_
335   0000              	GLOBAL _NIRVANAP_drawTW_raw_callee
336   0000              	GLOBAL _NIRVANAP_drawTW_raw
337   0000              	GLOBAL _NIRVANAP_drawTW_callee
338   0000              	GLOBAL _NIRVANAP_drawTW
339   0000              	GLOBAL _NIRVANAP_drawW_raw_callee
340   0000              	GLOBAL _NIRVANAP_drawW_raw
341   0000              	GLOBAL _NIRVANAP_drawW_callee
342   0000              	GLOBAL _NIRVANAP_drawW
343   0000              	GLOBAL _NIRVANAP_spriteT_callee
344   0000              	GLOBAL _NIRVANAP_spriteT
345   0000              	GLOBAL _NIRVANAP_fillC_callee
346   0000              	GLOBAL _NIRVANAP_fillC
347   0000              	GLOBAL _NIRVANAP_readC_callee
348   0000              	GLOBAL _NIRVANAP_readC
349   0000              	GLOBAL _NIRVANAP_paintC_callee
350   0000              	GLOBAL _NIRVANAP_paintC
351   0000              	GLOBAL _NIRVANAP_printC_callee
352   0000              	GLOBAL _NIRVANAP_printC
353   0000              	GLOBAL _NIRVANAP_fillT_raw_callee
354   0000              	GLOBAL _NIRVANAP_fillT_raw
355   0000              	GLOBAL _NIRVANAP_fillT_callee
356   0000              	GLOBAL _NIRVANAP_fillT
357   0000              	GLOBAL _NIRVANAP_drawT_raw_callee
358   0000              	GLOBAL _NIRVANAP_drawT_raw
359   0000              	GLOBAL _NIRVANAP_drawT_callee
360   0000              	GLOBAL _NIRVANAP_drawT
361   0000              	GLOBAL _NIRVANAP_stop
362   0000              	GLOBAL _NIRVANAP_start
363   0000              	GLOBAL _debug3
364   0000              	GLOBAL _debug2
365   0000              	GLOBAL _debug
366   0000              	GLOBAL _zx_print_str
367   0000              	GLOBAL _zx_print_int
368   0000              	GLOBAL _zx_print_chr
369   0000              	GLOBAL _zx_print_bonus_time
370   0000              	GLOBAL _zx_isr
371   0000              	GLOBAL _z80_otdr_callee
372   0000              	GLOBAL _z80_otdr
373   0000              	GLOBAL _z80_otir_callee
374   0000              	GLOBAL _z80_otir
375   0000              	GLOBAL _z80_outp_callee
376   0000              	GLOBAL _z80_outp
377   0000              	GLOBAL _z80_indr_callee
378   0000              	GLOBAL _z80_indr
379   0000              	GLOBAL _z80_inir_callee
380   0000              	GLOBAL _z80_inir
381   0000              	GLOBAL _z80_inp_fastcall
382   0000              	GLOBAL _z80_inp
383   0000              	GLOBAL _z80_set_int_state_fastcall
384   0000              	GLOBAL _z80_set_int_state
385   0000              	GLOBAL _z80_get_int_state
386   0000              	GLOBAL _z80_delay_tstate_fastcall
387   0000              	GLOBAL _z80_delay_tstate
388   0000              	GLOBAL _z80_delay_ms_fastcall
389   0000              	GLOBAL _z80_delay_ms
390   0000              	GLOBAL _im2_remove_generic_callback_callee
391   0000              	GLOBAL _im2_remove_generic_callback
392   0000              	GLOBAL _im2_prepend_generic_callback_callee
393   0000              	GLOBAL _im2_prepend_generic_callback
394   0000              	GLOBAL _im2_append_generic_callback_callee
395   0000              	GLOBAL _im2_append_generic_callback
396   0000              	GLOBAL _im2_create_generic_isr_8080_callee
397   0000              	GLOBAL _im2_create_generic_isr_8080
398   0000              	GLOBAL _im2_create_generic_isr_callee
399   0000              	GLOBAL _im2_create_generic_isr
400   0000              	GLOBAL _im2_install_isr_callee
401   0000              	GLOBAL _im2_install_isr
402   0000              	GLOBAL _im2_init_fastcall
403   0000              	GLOBAL _im2_init
404   0000              	GLOBAL _intrinsic_swap_word_32_fastcall
405   0000              	GLOBAL _intrinsic_swap_word_32
406   0000              	GLOBAL _intrinsic_swap_endian_32_fastcall
407   0000              	GLOBAL _intrinsic_swap_endian_32
408   0000              	GLOBAL _intrinsic_swap_endian_16_fastcall
409   0000              	GLOBAL _intrinsic_swap_endian_16
410   0000              	GLOBAL _intrinsic_return_de
411   0000              	GLOBAL _intrinsic_return_bc
412   0000              	GLOBAL _intrinsic_exx
413   0000              	GLOBAL _intrinsic_ex_de_hl
414   0000              	GLOBAL _intrinsic_nop
415   0000              	GLOBAL _intrinsic_im_2
416   0000              	GLOBAL _intrinsic_im_1
417   0000              	GLOBAL _intrinsic_im_0
418   0000              	GLOBAL _intrinsic_retn
419   0000              	GLOBAL _intrinsic_reti
420   0000              	GLOBAL _intrinsic_halt
421   0000              	GLOBAL _intrinsic_ei
422   0000              	GLOBAL _intrinsic_di
423   0000              	GLOBAL _intrinsic_stub
424   0000              	GLOBAL _intrinsic_outi
425   0000              	GLOBAL _intrinsic_ldi
426   0000              	GLOBAL _zx_pattern_fill_callee
427   0000              	GLOBAL _zx_pattern_fill
428   0000              	GLOBAL _zx_saddrpup_fastcall
429   0000              	GLOBAL _zx_saddrpup
430   0000              	GLOBAL _zx_saddrpright_callee
431   0000              	GLOBAL _zx_saddrpright
432   0000              	GLOBAL _zx_saddrpleft_callee
433   0000              	GLOBAL _zx_saddrpleft
434   0000              	GLOBAL _zx_saddrpdown_fastcall
435   0000              	GLOBAL _zx_saddrpdown
436   0000              	GLOBAL _zx_saddrcup_fastcall
437   0000              	GLOBAL _zx_saddrcup
438   0000              	GLOBAL _zx_saddrcright_fastcall
439   0000              	GLOBAL _zx_saddrcright
440   0000              	GLOBAL _zx_saddrcleft_fastcall
441   0000              	GLOBAL _zx_saddrcleft
442   0000              	GLOBAL _zx_saddrcdown_fastcall
443   0000              	GLOBAL _zx_saddrcdown
444   0000              	GLOBAL _zx_saddr2py_fastcall
445   0000              	GLOBAL _zx_saddr2py
446   0000              	GLOBAL _zx_saddr2px_fastcall
447   0000              	GLOBAL _zx_saddr2px
448   0000              	GLOBAL _zx_saddr2cy_fastcall
449   0000              	GLOBAL _zx_saddr2cy
450   0000              	GLOBAL _zx_saddr2cx_fastcall
451   0000              	GLOBAL _zx_saddr2cx
452   0000              	GLOBAL _zx_saddr2aaddr_fastcall
453   0000              	GLOBAL _zx_saddr2aaddr
454   0000              	GLOBAL _zx_py2saddr_fastcall
455   0000              	GLOBAL _zx_py2saddr
456   0000              	GLOBAL _zx_py2aaddr_fastcall
457   0000              	GLOBAL _zx_py2aaddr
458   0000              	GLOBAL _zx_pxy2saddr_callee
459   0000              	GLOBAL _zx_pxy2saddr
460   0000              	GLOBAL _zx_pxy2aaddr_callee
461   0000              	GLOBAL _zx_pxy2aaddr
462   0000              	GLOBAL _zx_px2bitmask_fastcall
463   0000              	GLOBAL _zx_px2bitmask
464   0000              	GLOBAL _zx_cy2saddr_fastcall
465   0000              	GLOBAL _zx_cy2saddr
466   0000              	GLOBAL _zx_cy2aaddr_fastcall
467   0000              	GLOBAL _zx_cy2aaddr
468   0000              	GLOBAL _zx_cxy2saddr_callee
469   0000              	GLOBAL _zx_cxy2saddr
470   0000              	GLOBAL _zx_cxy2aaddr_callee
471   0000              	GLOBAL _zx_cxy2aaddr
472   0000              	GLOBAL _zx_bitmask2px_fastcall
473   0000              	GLOBAL _zx_bitmask2px
474   0000              	GLOBAL _zx_aaddrcup_fastcall
475   0000              	GLOBAL _zx_aaddrcup
476   0000              	GLOBAL _zx_aaddrcright_fastcall
477   0000              	GLOBAL _zx_aaddrcright
478   0000              	GLOBAL _zx_aaddrcleft_fastcall
479   0000              	GLOBAL _zx_aaddrcleft
480   0000              	GLOBAL _zx_aaddrcdown_fastcall
481   0000              	GLOBAL _zx_aaddrcdown
482   0000              	GLOBAL _zx_aaddr2saddr_fastcall
483   0000              	GLOBAL _zx_aaddr2saddr
484   0000              	GLOBAL _zx_aaddr2py_fastcall
485   0000              	GLOBAL _zx_aaddr2py
486   0000              	GLOBAL _zx_aaddr2px_fastcall
487   0000              	GLOBAL _zx_aaddr2px
488   0000              	GLOBAL _zx_aaddr2cy_fastcall
489   0000              	GLOBAL _zx_aaddr2cy
490   0000              	GLOBAL _zx_aaddr2cx_fastcall
491   0000              	GLOBAL _zx_aaddr2cx
492   0000              	GLOBAL _zx_visit_wc_pix_callee
493   0000              	GLOBAL _zx_visit_wc_pix
494   0000              	GLOBAL _zx_visit_wc_attr_callee
495   0000              	GLOBAL _zx_visit_wc_attr
496   0000              	GLOBAL _zx_scroll_wc_up_pix_callee
497   0000              	GLOBAL _zx_scroll_wc_up_pix
498   0000              	GLOBAL _zx_scroll_wc_up_attr_callee
499   0000              	GLOBAL _zx_scroll_wc_up_attr
500   0000              	GLOBAL _zx_scroll_wc_up_callee
501   0000              	GLOBAL _zx_scroll_wc_up
502   0000              	GLOBAL _zx_scroll_up_pix_callee
503   0000              	GLOBAL _zx_scroll_up_pix
504   0000              	GLOBAL _zx_scroll_up_attr_callee
505   0000              	GLOBAL _zx_scroll_up_attr
506   0000              	GLOBAL _zx_scroll_up_callee
507   0000              	GLOBAL _zx_scroll_up
508   0000              	GLOBAL _zx_cls_wc_pix_callee
509   0000              	GLOBAL _zx_cls_wc_pix
510   0000              	GLOBAL _zx_cls_wc_attr_callee
511   0000              	GLOBAL _zx_cls_wc_attr
512   0000              	GLOBAL _zx_cls_wc_callee
513   0000              	GLOBAL _zx_cls_wc
514   0000              	GLOBAL _zx_cls_pix_fastcall
515   0000              	GLOBAL _zx_cls_pix
516   0000              	GLOBAL _zx_cls_attr_fastcall
517   0000              	GLOBAL _zx_cls_attr
518   0000              	GLOBAL _zx_cls_fastcall
519   0000              	GLOBAL _zx_cls
520   0000              	GLOBAL _zx_border_fastcall
521   0000              	GLOBAL _zx_border
522   0000              	GLOBAL _spr_btile_paint_back
523   0000              	GLOBAL _spr_explode_bullet
524   0000              	GLOBAL _spr_init_anim_bullets
525   0000              	GLOBAL _spr_turn_horizontal
526   0000              	GLOBAL _spr_play_bullets
527   0000              	GLOBAL _spr_play_anim
528   0000              	GLOBAL _spr_add_anim
529   0000              	GLOBAL _spr_clear_scr
530   0000              	GLOBAL _spr_page_map
531   0000              	GLOBAL _spr_page_down
532   0000              	GLOBAL _spr_page_up
533   0000              	GLOBAL _spr_page_right
534   0000              	GLOBAL _spr_page_left
535   0000              	GLOBAL _spr_tile_paint
536   0000              	GLOBAL _spr_calc_hor
537   0000              	GLOBAL _spr_draw_row
538   0000              	GLOBAL _spr_draw_index
539   0000              	GLOBAL _spr_brick_anim
540   0000              	GLOBAL _spr_back_repaint
541   0000              	GLOBAL _spr_tile
542   0000              	GLOBAL _spr_destroy
543   0000              	GLOBAL _spr_tile_dir
544   0000              	GLOBAL _spr_redraw
545   0000              	GLOBAL _spr_move_left
546   0000              	GLOBAL _spr_move_right
547   0000              	GLOBAL _spr_move_horizontal
548   0000              	GLOBAL _spr_move_down
549   0000              	GLOBAL _spr_move_up
550   0000              	GLOBAL _spr_calc_index
551   0000              	GLOBAL _spr_chktime
552   0000              	GLOBAL _sound_hit_brick
553   0000              	GLOBAL _sound_hit_enemy
554   0000              	GLOBAL _sound_kill
555   0000              	GLOBAL _sound_enter_enemy
556   0000              	GLOBAL _sound_coin
557   0000              	GLOBAL _sound_jump
558   0000              	GLOBAL _sound_slide
559   0000              	GLOBAL _player_player_hit_pow
560   0000              	GLOBAL _game_match_back
561   0000              	GLOBAL _game_attribs
562   0000              	GLOBAL _game_boss_clear
563   0000              	GLOBAL _game_obj_clear
564   0000              	GLOBAL _game_obj_chk
565   0000              	GLOBAL _game_obj_set
566   0000              	GLOBAL _game_shoot_fire_boss
567   0000              	GLOBAL _game_shoot_fire
568   0000              	GLOBAL _game_add_enemy
569   0000              	GLOBAL _game_print_header
570   0000              	GLOBAL _game_phase_print_score_back
571   0000              	GLOBAL _game_check_time
572   0000              	GLOBAL _game_rotate_attrib_osd
573   0000              	GLOBAL _game_rotate_attrib
574   0000              	GLOBAL _game_colour_message
575   0000              	GLOBAL _game_paint_attrib_lin_osd
576   0000              	GLOBAL _game_paint_attrib_lin_h
577   0000              	GLOBAL _game_paint_attrib_lin
578   0000              	GLOBAL _game_paint_attrib
579   0000              	GLOBAL _game_print_score
580   0000              	GLOBAL _game_unfreeze_all
581   0000              	GLOBAL _game_freeze_all
582   0000              	GLOBAL _game_freeze
583   0000              	GLOBAL _game_enemy_add_get_index
584   0000              	GLOBAL _game_check_cell
585   0000              	GLOBAL _game_check_map
586   0000              	GLOBAL _game_loop
587   0000              	GLOBAL _game_round_init
588   0000              	GLOBAL _game_start_timer
589   0000              	GLOBAL _game_tick
590   0000              	GLOBAL _game_update_stats
591   0000              	GLOBAL _game_print_footer
592   0000              	GLOBAL _game_fill_row
593   0000              	GLOBAL _game_fps
594   0000              	GLOBAL _game_respawn
595   0000              	GLOBAL _game_draw_screen
596   0000              	GLOBAL _boss_turn
597   0000              	GLOBAL _enemy_avoid_dead
598   0000              	GLOBAL _enemy_avoid_fall
599   0000              	GLOBAL _enemy_respawn
600   0000              	GLOBAL _enemy_init
601   0000              	GLOBAL _enemy_move
602   0000              	GLOBAL _enemy_turn
603   0000              	GLOBAL _enemy_hit
604   0000              	GLOBAL _enemy_coin1
605   0000              	GLOBAL _enemy_static
606   0000              	GLOBAL _enemy_walk
607   0000              	GLOBAL _enemy_horizontal
608   0000              	GLOBAL _enemy_vertical
609   0000              	GLOBAL _ay_fx_play
610   0000              	GLOBAL _ay_midi_play
611   0000              	GLOBAL _ay_is_playing
612   0000              	GLOBAL _ay_reset
613   0000              	GLOBAL _test_func
614   0000              	GLOBAL _test_proc
615   0000              	GLOBAL _in_mouse_kempston_wheel_delta
616   0000              	GLOBAL _in_mouse_kempston_wheel
617   0000              	GLOBAL _in_mouse_kempston_callee
618   0000              	GLOBAL _in_mouse_kempston
619   0000              	GLOBAL _in_mouse_kempston_setpos_callee
620   0000              	GLOBAL _in_mouse_kempston_setpos
621   0000              	GLOBAL _in_mouse_kempston_reset
622   0000              	GLOBAL _in_mouse_kempston_init
623   0000              	GLOBAL _in_mouse_amx_wheel_delta
624   0000              	GLOBAL _in_mouse_amx_wheel
625   0000              	GLOBAL _in_mouse_amx_callee
626   0000              	GLOBAL _in_mouse_amx
627   0000              	GLOBAL _in_mouse_amx_setpos_callee
628   0000              	GLOBAL _in_mouse_amx_setpos
629   0000              	GLOBAL _in_mouse_amx_reset
630   0000              	GLOBAL _in_mouse_amx_init_callee
631   0000              	GLOBAL _in_mouse_amx_init
632   0000              	GLOBAL _in_stick_sinclair2
633   0000              	GLOBAL _in_stick_sinclair1
634   0000              	GLOBAL _in_stick_kempston
635   0000              	GLOBAL _in_stick_fuller
636   0000              	GLOBAL _in_stick_cursor
637   0000              	GLOBAL _in_stick_keyboard_fastcall
638   0000              	GLOBAL _in_stick_keyboard
639   0000              	GLOBAL _in_wait_nokey
640   0000              	GLOBAL _in_wait_key
641   0000              	GLOBAL _in_test_key
642   0000              	GLOBAL _in_pause_fastcall
643   0000              	GLOBAL _in_pause
644   0000              	GLOBAL _in_key_scancode_fastcall
645   0000              	GLOBAL _in_key_scancode
646   0000              	GLOBAL _in_key_pressed_fastcall
647   0000              	GLOBAL _in_key_pressed
648   0000              	GLOBAL _in_inkey
649   0000              	GLOBAL _NIRVANAP_CHAR_TABLE
650   0000              	GLOBAL _NIRVANAP_WIDE_IMAGES
651   0000              	GLOBAL _NIRVANAP_TILE_IMAGES
652   0000              	GLOBAL _NIRVANAP_HOLE
653   0000              	GLOBAL _NIRVANAP_ISR_HOOK
654   0000              	GLOBAL _player_lvl_table
655   0000              	GLOBAL _map_paper_last
656   0000              	GLOBAL _map_paper_clr
657   0000              	GLOBAL _map_paper
658   0000              	GLOBAL _draw_count
659   0000              	GLOBAL _g_player_hit_right
660   0000              	GLOBAL _g_player_hit_left
661   0000              	GLOBAL _joynames
662   0000              	GLOBAL _initials
663   0000              	GLOBAL _bullet_count
664   0000              	GLOBAL _spr_hack
665   0000              	GLOBAL _boss_stat
666   0000              	GLOBAL _boss_time_fire
667   0000              	GLOBAL _boss_time
668   0000              	GLOBAL _boss_tile
669   0000              	GLOBAL _boss_inc
670   0000              	GLOBAL _boss_col
671   0000              	GLOBAL _boss_lin
672   0000              	GLOBAL _bullet_vel
673   0000              	GLOBAL _bullet_frames
674   0000              	GLOBAL _bullet_colint
675   0000              	GLOBAL _bullet_dir
676   0000              	GLOBAL _bullet_tile
677   0000              	GLOBAL _bullet_col
678   0000              	GLOBAL _bullet_lin
679   0000              	GLOBAL _bullet_col0
680   0000              	GLOBAL _bullet_lin0
681   0000              	GLOBAL _bullet_max
682   0000              	GLOBAL _bullet_class
683   0000              	GLOBAL _mush_class
684   0000              	GLOBAL _mush_index
685   0000              	GLOBAL _anim_count
686   0000              	GLOBAL _anim_respanwn
687   0000              	GLOBAL _anim_loop
688   0000              	GLOBAL _anim_end
689   0000              	GLOBAL _anim_int
690   0000              	GLOBAL _anim_tile
691   0000              	GLOBAL _anim_col
692   0000              	GLOBAL _anim_lin
693   0000              	GLOBAL _map_heigth
694   0000              	GLOBAL _map_width
695   0000              	GLOBAL _scr_curr
696   0000              	GLOBAL _scr_obj1
697   0000              	GLOBAL _scr_obj0
698   0000              	GLOBAL _scr_map
699   0000              	GLOBAL _sprite_speed_alt
700   0000              	GLOBAL _sprite_frames
701   0000              	GLOBAL _sprite_speed
702   0000              	GLOBAL _screen_ink
703   0000              	GLOBAL _screen_paper
704   0000              	GLOBAL _player_over_stair
705   0000              	GLOBAL _game_start_scr
706   0000              	GLOBAL _game_respawn_tile
707   0000              	GLOBAL _game_respawn_index
708   0000              	GLOBAL _game_respawn_time
709   0000              	GLOBAL _game_menu_sel
710   0000              	GLOBAL _game_score_top
711   0000              	GLOBAL _player_coins
712   0000              	GLOBAL _player_lives
713   0000              	GLOBAL _game_over
714   0000              	GLOBAL _game_sound
715   0000              	GLOBAL _game_inmune
716   0000              	GLOBAL _game_god_mode
717   0000              	GLOBAL _game_two_player
718   0000              	GLOBAL _game_brick_tile
719   0000              	GLOBAL _sprite_curr_index
720   0000              	GLOBAL _spr_count
721   0000              	GLOBAL _bullet_time
722   0000              	GLOBAL _anim_time
723   0000              	GLOBAL _frame_time
724   0000              	GLOBAL _entry_time
725   0000              	GLOBAL _curr_time
726   0000              	GLOBAL _s_state
727   0000              	GLOBAL _attrib_osd
728   0000              	GLOBAL _attrib_hl
729   0000              	GLOBAL _attrib
730   0000              	GLOBAL _zx_val_asm
731   0000              	GLOBAL _enemies
732   0000              	GLOBAL _tmp_ui
733   0000              	GLOBAL _tmp_sc
734   0000              	GLOBAL _tmp_uc
735   0000              	GLOBAL _tmp1
736   0000              	GLOBAL _tmp0
737   0000              	GLOBAL _tmp
738   0000              	GLOBAL _index1
739   0000              	GLOBAL _index0
740   0000              	GLOBAL _loop_count
741   0000              	GLOBAL _s_col1
742   0000              	GLOBAL _s_col0
743   0000              	GLOBAL _s_lin1
744   0000              	GLOBAL _s_lin0
745   0000              	GLOBAL _s_tile1
746   0000              	GLOBAL _s_tile0
747   0000              	GLOBAL _player_brick_time
748   0000              	GLOBAL _player_hit_count
749   0000              	GLOBAL _sprite_horizontal_check
750   0000              	GLOBAL _sprite_on_air
751   0000              	GLOBAL _sprite
752   0000              	GLOBAL _fps
753   0000              	GLOBAL _game_respawn_curr_time
754   0000              	GLOBAL _game_worldup
755   0000              	GLOBAL _game_mush_count
756   0000              	GLOBAL _game_boss_fix
757   0000              	GLOBAL _game_boss_hit
758   0000              	GLOBAL _game_boss_alive
759   0000              	GLOBAL _game_boss
760   0000              	GLOBAL _game_world
761   0000              	GLOBAL _game_gravity
762   0000              	GLOBAL _player_anim_stair
763   0000              	GLOBAL _player_hit_time
764   0000              	GLOBAL _player_lin_scr
765   0000              	GLOBAL _player_col_scr
766   0000              	GLOBAL _player_lvl
767   0000              	GLOBAL _player_int
768   0000              	GLOBAL _player_str
769   0000              	GLOBAL _player_max_vita
770   0000              	GLOBAL _player_max_mana
771   0000              	GLOBAL _player_vita
772   0000              	GLOBAL _player_mana
773   0000              	GLOBAL _player_keys
774   0000              	GLOBAL _player_vel_inc
775   0000              	GLOBAL _player_vel_y1
776   0000              	GLOBAL _player_vel_y0
777   0000              	GLOBAL _player_vel_y
778   0000              	GLOBAL _player_vel_x
779   0000              	GLOBAL _player_joy
780   0000              	GLOBAL _player_score
781   0000              	GLOBAL _last_time
782   0000              	GLOBAL _player_slide
783   0000              	GLOBAL _spr_timer
784   0000              	GLOBAL _jump_lin
785   0000              	GLOBAL _player_hit_col
786   0000              	GLOBAL _player_hit_lin
787   0000              	GLOBAL _colint
788   0000              	GLOBAL _col
789   0000              	GLOBAL _lin
790   0000              	GLOBAL _tile
791   0000              	GLOBAL _state_a
792   0000              	GLOBAL _state
793   0000              	GLOBAL _class
794   0000              	GLOBAL _tbuffer
795   0000              	GLOBAL _dirs
796   0000              	GLOBAL _k1
797   0000              	GLOBAL _joyfunc1
798   0000              	GLOBAL _btiles
799   0000              	GLOBAL _spec128
800   0000              	GLOBAL _GLOBAL_ZX_PORT_7FFD
801   0000              	GLOBAL _GLOBAL_ZX_PORT_1FFD
802   0000              	GLOBAL _GLOBAL_ZX_PORT_FE
803   0000              	GLOBAL _ay_effect_20
804   0000              	GLOBAL _ay_effect_19
805   0000              	GLOBAL _ay_effect_18
806   0000              	GLOBAL _ay_effect_17
807   0000              	GLOBAL _ay_effect_16
808   0000              	GLOBAL _ay_effect_15
809   0000              	GLOBAL _ay_effect_14
810   0000              	GLOBAL _ay_effect_13
811   0000              	GLOBAL _ay_effect_12
812   0000              	GLOBAL _ay_effect_11
813   0000              	GLOBAL _ay_effect_10
814   0000              	GLOBAL _ay_effect_09
815   0000              	GLOBAL _ay_effect_08
816   0000              	GLOBAL _ay_effect_07
817   0000              	GLOBAL _ay_effect_06
818   0000              	GLOBAL _ay_effect_05
819   0000              	GLOBAL _ay_effect_04
820   0000              	GLOBAL _ay_effect_03
821   0000              	GLOBAL _ay_effect_02
822   0000              	GLOBAL _ay_effect_01
823   0000              	GLOBAL _pb_midi_phase_1
824   0000              	GLOBAL _pb_midi_title
825   0000              	GLOBAL _control_method
826   0000              	GLOBAL _world1_h
827   0000              	GLOBAL _world1_w
828   0000              	GLOBAL _world1
829   0000              	GLOBAL _paper1
830   0000              	GLOBAL _lenght1
831   0000              	GLOBAL _start_scr1
832   0000              	GLOBAL _world0_h
833   0000              	GLOBAL _world0_w
834   0000              	GLOBAL _world0
835   0000              	GLOBAL _paper0
836   0000              	GLOBAL _lenght0
837   0000              	GLOBAL _start_scr0
838   0000              ;--------------------------------------------------------
839   0000              ; special function registers
840   0000              ;--------------------------------------------------------
841   0000              defc _IO_FE	=	0x00fe
842   0000              defc _IO_1FFD	=	0x1ffd
843   0000              defc _IO_7FFD	=	0x7ffd
844   0000              ;--------------------------------------------------------
845   0000              ; ram data
846   0000              ;--------------------------------------------------------
847   0000              	SECTION bss_compiler
848   0000              ;--------------------------------------------------------
849   0000              ; ram data
850   0000              ;--------------------------------------------------------
851   0000              
852   0000              IF 0
853   0000              
854   0000              ; .area _INITIALIZED removed by z88dk
855   0000              
856   0000              
857   0000              ENDIF
858   0000              
859   0000              ;--------------------------------------------------------
860   0000              ; absolute external ram data
861   0000              ;--------------------------------------------------------
862   0000              	SECTION IGNORE
863   0000              ;--------------------------------------------------------
864   0000              ; global & static initialisations
865   0000              ;--------------------------------------------------------
866   0000              	SECTION code_crt_init
867   0000              ;--------------------------------------------------------
868   0000              ; Home
869   0000              ;--------------------------------------------------------
870   0000              	SECTION IGNORE
871   0000              ;--------------------------------------------------------
872   0000              ; code
873   0000              ;--------------------------------------------------------
874   0000              	SECTION code_compiler
875   0000              ;	---------------------------------
876   0000              ; Function player_init
877   0000              ; ---------------------------------
878   0000              _player_init:
879   0000  CD 00 00    	call	___sdcc_enter_ix
880   0003  21 07 00    	ld	hl, +(_class + 0x0007)
881   0006  36 00       	ld	(hl),0x00
882   0008  21 07 00    	ld	hl, +(_tile + 0x0007)
883   000B  DD 7E 06    	ld	a,(ix+6)
884   000E  77          	ld	(hl), a
885   000F  21 07 00    	ld	hl, +(_lin + 0x0007)
886   0012  DD 7E 04    	ld	a,(ix+4)
887   0015  77          	ld	(hl), a
888   0016  21 07 00    	ld	hl, +(_col + 0x0007)
889   0019  DD 7E 05    	ld	a,(ix+5)
890   001C  77          	ld	(hl), a
891   001D  21 07 00    	ld	hl, +(_colint + 0x0007)
892   0020  36 00       	ld	(hl),0x00
893   0022  21 07 00    	ld	hl, +(_state + 0x0007)
894   0025  36 00       	ld	(hl),0x00
895   0027  01 07 00    	ld	bc,_state_a+7
896   002A  AF          	xor	a, a
897   002B  02          	ld	(bc), a
898   002C  21 07 00    	ld	hl, +(_jump_lin + 0x0007)
899   002F  DD 7E 04    	ld	a,(ix+4)
900   0032  77          	ld	(hl), a
901   0033  ED 5B 00 00 	ld	de,(_curr_time)
902   0037  ED 53 0E 00 	ld	(_last_time + 0x000e),de
903   003B  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
904   003E  36 00       	ld	(hl),0x00
905   0040  0A          	ld	a, (bc)
906   0041  F6 11       	or	a,+(0x01|0x10)
907   0043  02          	ld	(bc),a
908   0044  21 00 00    	ld	hl,_player_hit_col
909   0047  36 00       	ld	(hl),0x00
910   0049  21 00 00    	ld	hl,_player_hit_lin
911   004C  36 00       	ld	(hl),0x00
912   004E  21 00 00    	ld	hl,_player_slide
913   0051  36 00       	ld	(hl),0x00
914   0053  DD 66 05    	ld	h,(ix+5)
915   0056  DD 6E 04    	ld	l,(ix+4)
916   0059  E5          	push	hl
917   005A  DD 56 06    	ld	d,(ix+6)
918   005D  1E 07       	ld	e,0x07
919   005F  D5          	push	de
920   0060  CD 00 00    	call	_NIRVANAP_spriteT_callee
921   0063  DD E1       	pop	ix
922   0065  C9          	ret
923   0066              	SECTION code_compiler
924   0066              ;	---------------------------------
925   0066              ; Function player_check_input
926   0066              ; ---------------------------------
927   0066              _player_check_input:
928   0066  21 00 00    	ld	hl,_dirs
929   0069  CB 56       	bit	2, (hl)
930   006B  28 0C       	jr	Z,l_player_check_input_00102
931   006D  21 00 00    	ld	hl,_dirs
932   0070  CB 5E       	bit	3, (hl)
933   0072  28 05       	jr	Z,l_player_check_input_00102
934   0074  21 00 00    	ld	hl,_dirs
935   0077  36 00       	ld	(hl),0x00
936   0079              l_player_check_input_00102:
937   0079  21 00 00    	ld	hl,_dirs
938   007C  7E          	ld	a, (hl)
939   007D  CB 07       	rlc	a
940   007F  E6 01       	and	a,0x01
941   0081  CB 47       	bit	0, a
942   0083  20 1D       	jr	NZ,l_player_check_input_00107
943   0085  CB 56       	bit	2, (hl)
944   0087  20 19       	jr	NZ,l_player_check_input_00107
945   0089  21 00 00    	ld	hl,_dirs
946   008C  CB 5E       	bit	3, (hl)
947   008E  20 12       	jr	NZ,l_player_check_input_00107
948   0090  21 00 00    	ld	hl,_dirs
949   0093  CB 46       	bit	0, (hl)
950   0095  20 0B       	jr	NZ,l_player_check_input_00107
951   0097  21 00 00    	ld	hl,_dirs
952   009A  CB 4E       	bit	1, (hl)
953   009C  20 04       	jr	NZ,l_player_check_input_00107
954   009E  2E 00       	ld	l,0x00
955   00A0  18 02       	jr	l_player_check_input_00108
956   00A2              l_player_check_input_00107:
957   00A2  2E 01       	ld	l,0x01
958   00A4              l_player_check_input_00108:
959   00A4  C9          	ret
960   00A5              	SECTION code_compiler
961   00A5              ;	---------------------------------
962   00A5              ; Function player_collision
963   00A5              ; ---------------------------------
964   00A5              _player_collision:
965   00A5  CD 00 00    	call	___sdcc_enter_ix
966   00A8  F5          	push	af
967   00A9  21 19 00    	ld	hl,0x0019
968   00AC  E5          	push	hl
969   00AD  2A 00 00    	ld	hl,(_player_hit_time)
970   00B0  E5          	push	hl
971   00B1  CD 00 00    	call	_game_check_time
972   00B4  F1          	pop	af
973   00B5  F1          	pop	af
974   00B6  7D          	ld	a, l
975   00B7  B7          	or	a, a
976   00B8  CA 26 02    	jp	Z, l_player_collision_00127
977   00BB  21 00 00    	ld	hl,_sprite
978   00BE  36 00       	ld	(hl),0x00
979   00C0  01 00 00    	ld	bc,_col+0
980   00C3  3A 07 00    	ld	a,(_col + 7)
981   00C6  32 00 00    	ld	(_s_col1),a
982   00C9  3A 07 00    	ld	a,(_lin + 7)
983   00CC  32 00 00    	ld	(_s_lin1),a
984   00CF  C6 08       	add	a,0x08
985   00D1  57          	ld	d, a
986   00D2  3A 00 00    	ld	a,(_s_col1)
987   00D5  C5          	push	bc
988   00D6  5A          	ld	e,d
989   00D7  57          	ld	d,a
990   00D8  D5          	push	de
991   00D9  CD 00 00    	call	_spr_calc_index
992   00DC  F1          	pop	af
993   00DD  C1          	pop	bc
994   00DE  7D          	ld	a,l
995   00DF  32 00 00    	ld	(_sprite_curr_index),a
996   00E2  5F          	ld	e,a
997   00E3  16 00       	ld	d,0x00
998   00E5  21 00 00    	ld	hl,_scr_map
999   00E8  19          	add	hl,de
1000  00E9  5E          	ld	e, (hl)
1001  00EA  3E 2F       	ld	a,0x2f
1002  00EC  93          	sub	a, e
1003  00ED  30 1C       	jr	NC,l_player_collision_00123
1004  00EF  7B          	ld	a,e
1005  00F0  FE 3C       	cp	a,0x3c
1006  00F2  30 17       	jr	NC,l_player_collision_00123
1007  00F4  D6 39       	sub	a,0x39
1008  00F6  20 07       	jr	NZ,l_player_collision_00102
1009  00F8  21 00 00    	ld	hl,_game_worldup
1010  00FB  36 01       	ld	(hl),0x01
1011  00FD  18 0C       	jr	l_player_collision_00123
1012  00FF              l_player_collision_00102:
1013  00FF  2E 06       	ld	l,0x06
1014  0101  CD 00 00    	call	_zx_border_fastcall
1015  0104  C5          	push	bc
1016  0105  2E 32       	ld	l,0x32
1017  0107  CD 19 11    	call	_player_hit
1018  010A  C1          	pop	bc
1019  010B              l_player_collision_00123:
1020  010B  21 00 00    	ld	hl,_sprite
1021  010E  7E          	ld	a, (hl)
1022  010F  D6 07       	sub	a,0x07
1023  0111  D2 26 02    	jp	NC, l_player_collision_00127
1024  0114  3E 00       	ld	a, +((_class) & 0xFF)
1025  0116  86          	add	a, (hl)
1026  0117  5F          	ld	e, a
1027  0118  3E 00       	ld	a, +((_class) / 256)
1028  011A  CE 00       	adc	a,0x00
1029  011C  57          	ld	d, a
1030  011D  1A          	ld	a, (de)
1031  011E  B7          	or	a, a
1032  011F  CA 1F 02    	jp	Z, l_player_collision_00122
1033  0122  79          	ld	a, c
1034  0123  86          	add	a, (hl)
1035  0124  5F          	ld	e, a
1036  0125  78          	ld	a, b
1037  0126  CE 00       	adc	a,0x00
1038  0128  57          	ld	d, a
1039  0129  1A          	ld	a, (de)
1040  012A  DD 77 FE    	ld	(ix-2),a
1041  012D  DD 36 FF 00 	ld	(ix-1),0x00
1042  0131  3A 00 00    	ld	a,(_s_col1)
1043  0134  5F          	ld	e,a
1044  0135  16 00       	ld	d,0x00
1045  0137  DD 7E FE    	ld	a,(ix-2)
1046  013A  93          	sub	a, e
1047  013B  6F          	ld	l, a
1048  013C  DD 7E FF    	ld	a,(ix-1)
1049  013F  9A          	sbc	a, d
1050  0140  67          	ld	h, a
1051  0141  CD 00 00    	call	_abs_fastcall
1052  0144  EB          	ex	de,hl
1053  0145  7B          	ld	a, e
1054  0146  D6 02       	sub	a,0x02
1055  0148  7A          	ld	a, d
1056  0149  17          	rla
1057  014A  3F          	ccf
1058  014B  1F          	rra
1059  014C  DE 80       	sbc	a,0x80
1060  014E  D2 1F 02    	jp	NC, l_player_collision_00122
1061  0151  2A 00 00    	ld	hl,(_sprite)
1062  0154  26 00       	ld	h,0x00
1063  0156  11 00 00    	ld	de,_lin
1064  0159  19          	add	hl,de
1065  015A  7E          	ld	a,(hl)
1066  015B  DD 77 FE    	ld	(ix-2),a
1067  015E  DD 36 FF 00 	ld	(ix-1),0x00
1068  0162  3A 00 00    	ld	a,(_s_lin1)
1069  0165  5F          	ld	e,a
1070  0166  16 00       	ld	d,0x00
1071  0168  DD 7E FE    	ld	a,(ix-2)
1072  016B  93          	sub	a, e
1073  016C  6F          	ld	l, a
1074  016D  DD 7E FF    	ld	a,(ix-1)
1075  0170  9A          	sbc	a, d
1076  0171  67          	ld	h, a
1077  0172  CD 00 00    	call	_abs_fastcall
1078  0175  EB          	ex	de,hl
1079  0176  7B          	ld	a, e
1080  0177  D6 0E       	sub	a,0x0e
1081  0179  7A          	ld	a, d
1082  017A  17          	rla
1083  017B  3F          	ccf
1084  017C  1F          	rra
1085  017D  DE 80       	sbc	a,0x80
1086  017F  D2 1F 02    	jp	NC, l_player_collision_00122
1087  0182  2A 00 00    	ld	hl,(_sprite)
1088  0185  26 00       	ld	h,0x00
1089  0187  01 00 00    	ld	bc,_class
1090  018A  09          	add	hl,bc
1091  018B  7E          	ld	a,(hl)
1092  018C  FE 06       	cp	a,0x06
1093  018E  28 05       	jr	Z,l_player_collision_00189
1094  0190  21 00 00    	ld	hl,_sprite
1095  0193  18 2D       	jr	l_player_collision_00110
1096  0195              l_player_collision_00189:
1097  0195  21 00 00    	ld	hl,_player_vita
1098  0198  7E          	ld	a, (hl)
1099  0199  C6 19       	add	a,0x19
1100  019B  77          	ld	(hl), a
1101  019C  3A 00 00    	ld	a,(_player_max_vita)
1102  019F  21 00 00    	ld	hl,_player_vita
1103  01A2  96          	sub	a, (hl)
1104  01A3  30 06       	jr	NC,l_player_collision_00108
1105  01A5  3A 00 00    	ld	a,(_player_max_vita)
1106  01A8  32 00 00    	ld	(_player_vita),a
1107  01AB              l_player_collision_00108:
1108  01AB  21 01 00    	ld	hl,0x0001
1109  01AE  CD 1B 0B    	call	_player_score_add
1110  01B1  CD 00 00    	call	_game_update_stats
1111  01B4  2A 00 00    	ld	hl,(_sprite)
1112  01B7  CD 00 00    	call	_spr_destroy
1113  01BA  21 00 00    	ld	hl,_game_mush_count
1114  01BD  35          	dec	(hl)
1115  01BE  2E 00       	ld	l,0x00
1116  01C0  18 66       	jr	l_player_collision_00128
1117  01C2              l_player_collision_00110:
1118  01C2  FE 07       	cp	a,0x07
1119  01C4  20 2D       	jr	NZ,l_player_collision_00114
1120  01C6  21 00 00    	ld	hl,_player_mana
1121  01C9  7E          	ld	a, (hl)
1122  01CA  C6 19       	add	a,0x19
1123  01CC  77          	ld	(hl), a
1124  01CD  3A 00 00    	ld	a,(_player_max_mana)
1125  01D0  21 00 00    	ld	hl,_player_mana
1126  01D3  96          	sub	a, (hl)
1127  01D4  30 06       	jr	NC,l_player_collision_00112
1128  01D6  3A 00 00    	ld	a,(_player_max_mana)
1129  01D9  32 00 00    	ld	(_player_mana),a
1130  01DC              l_player_collision_00112:
1131  01DC  21 01 00    	ld	hl,0x0001
1132  01DF  CD 1B 0B    	call	_player_score_add
1133  01E2  CD 00 00    	call	_game_update_stats
1134  01E5  2A 00 00    	ld	hl,(_sprite)
1135  01E8  CD 00 00    	call	_spr_destroy
1136  01EB  21 00 00    	ld	hl,_game_mush_count
1137  01EE  35          	dec	(hl)
1138  01EF  2E 00       	ld	l,0x00
1139  01F1  18 35       	jr	l_player_collision_00128
1140  01F3              l_player_collision_00114:
1141  01F3  D6 08       	sub	a,0x08
1142  01F5  20 1A       	jr	NZ,l_player_collision_00116
1143  01F7  CD 2C 02    	call	_player_1up
1144  01FA  21 01 00    	ld	hl,0x0001
1145  01FD  CD 1B 0B    	call	_player_score_add
1146  0200  CD 00 00    	call	_game_update_stats
1147  0203  2A 00 00    	ld	hl,(_sprite)
1148  0206  CD 00 00    	call	_spr_destroy
1149  0209  21 00 00    	ld	hl,_game_mush_count
1150  020C  35          	dec	(hl)
1151  020D  2E 00       	ld	l,0x00
1152  020F  18 17       	jr	l_player_collision_00128
1153  0211              l_player_collision_00116:
1154  0211  2E 02       	ld	l,0x02
1155  0213  CD 00 00    	call	_zx_border_fastcall
1156  0216  2E 14       	ld	l,0x14
1157  0218  CD 19 11    	call	_player_hit
1158  021B  2E 01       	ld	l,0x01
1159  021D  18 09       	jr	l_player_collision_00128
1160  021F              l_player_collision_00122:
1161  021F  21 00 00    	ld	hl,_sprite
1162  0222  34          	inc	(hl)
1163  0223  C3 0B 01    	jp	l_player_collision_00123
1164  0226              l_player_collision_00127:
1165  0226  2E 00       	ld	l,0x00
1166  0228              l_player_collision_00128:
1167  0228  F1          	pop	af
1168  0229  DD E1       	pop	ix
1169  022B  C9          	ret
1170  022C              	SECTION code_compiler
1171  022C              ;	---------------------------------
1172  022C              ; Function player_1up
1173  022C              ; ---------------------------------
1174  022C              _player_1up:
1175  022C  21 00 00    	ld	hl,_player_lives
1176  022F  7E          	ld	a, (hl)
1177  0230  D6 FF       	sub	a,0xff
1178  0232  D0          	ret	NC
1179  0233  34          	inc	(hl)
1180  0234  21 00 00    	ld	hl,___str_0
1181  0237  E5          	push	hl
1182  0238  21 0C 0C    	ld	hl,0x0c0c
1183  023B  E5          	push	hl
1184  023C  CD 00 00    	call	_zx_print_str
1185  023F  AF          	xor	a, a
1186  0240  F5          	push	af
1187  0241  33          	inc	sp
1188  0242  21 19 00    	ld	hl,0x0019
1189  0245  E5          	push	hl
1190  0246  21 0C 15    	ld	hl,0x150c
1191  0249  E5          	push	hl
1192  024A  3E 0C       	ld	a,0x0c
1193  024C  F5          	push	af
1194  024D  33          	inc	sp
1195  024E  CD 00 00    	call	_game_colour_message
1196  0251  F1          	pop	af
1197  0252  F1          	pop	af
1198  0253  F1          	pop	af
1199  0254  CD 00 00    	call	_game_update_stats
1200  0257  C9          	ret
1201  0258              	SECTION rodata_compiler
1202  0000              ___str_0:
1203  0000  31 20 55 50 21 
                        	DEFM "1 UP!"
1204  0005  00          	DEFB 0x00
1205  0006              	SECTION code_compiler
1206  0258              ;	---------------------------------
1207  0258              ; Function player_kill
1208  0258              ; ---------------------------------
1209  0258              _player_kill:
1210  0258  01 07 00    	ld	bc,_state+7
1211  025B  0A          	ld	a, (bc)
1212  025C  CB 6F       	bit	5, a
1213  025E  20 5E       	jr	NZ,l_player_kill_00109
1214  0260  C5          	push	bc
1215  0261  CD 00 00    	call	_sound_hit_brick
1216  0264  C1          	pop	bc
1217  0265  0A          	ld	a, (bc)
1218  0266  F6 20       	or	a,0x20
1219  0268  5F          	ld	e,a
1220  0269  02          	ld	(bc), a
1221  026A  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
1222  026D  36 03       	ld	(hl),0x03
1223  026F  CB 53       	bit	2, e
1224  0271  28 07       	jr	Z,l_player_kill_00102
1225  0273  21 07 00    	ld	hl, +(_tile + 0x0007)
1226  0276  36 4C       	ld	(hl),0x4c
1227  0278  18 05       	jr	l_player_kill_00103
1228  027A              l_player_kill_00102:
1229  027A  21 07 00    	ld	hl, +(_tile + 0x0007)
1230  027D  36 54       	ld	(hl),0x54
1231  027F              l_player_kill_00103:
1232  027F  CD EC 0A    	call	_player_hit_platform_clear
1233  0282  21 07 00    	ld	hl,+(_col + 0x0007)
1234  0285  5E          	ld	e, (hl)
1235  0286  21 07 00    	ld	hl,+(_lin + 0x0007)
1236  0289  4E          	ld	c, (hl)
1237  028A  21 07 00    	ld	hl,+(_tile + 0x0007)
1238  028D  46          	ld	b, (hl)
1239  028E  7B          	ld	a, e
1240  028F  F5          	push	af
1241  0290  33          	inc	sp
1242  0291  79          	ld	a, c
1243  0292  48          	ld	c,b
1244  0293  47          	ld	b,a
1245  0294  3A 00 00    	ld	a,(_sprite)
1246  0297  C5          	push	bc
1247  0298  F5          	push	af
1248  0299  33          	inc	sp
1249  029A  CD 00 00    	call	_NIRVANAP_spriteT_callee
1250  029D  2A 00 00    	ld	hl,(_curr_time)
1251  02A0  22 0E 00    	ld	(_spr_timer + 0x000e),hl
1252  02A3  3A 00 00    	ld	a,(_sprite)
1253  02A6  D6 07       	sub	a,0x07
1254  02A8  20 0B       	jr	NZ,l_player_kill_00105
1255  02AA  01 07 00    	ld	bc,_state_a+7
1256  02AD  0A          	ld	a, (bc)
1257  02AE  F6 08       	or	a,0x08
1258  02B0  E6 EF       	and	a,0xef
1259  02B2  02          	ld	(bc),a
1260  02B3  18 09       	jr	l_player_kill_00109
1261  02B5              l_player_kill_00105:
1262  02B5  01 07 00    	ld	bc,_state_a+7
1263  02B8  0A          	ld	a, (bc)
1264  02B9  F6 10       	or	a,0x10
1265  02BB  E6 F7       	and	a,0xf7
1266  02BD  02          	ld	(bc),a
1267  02BE              l_player_kill_00109:
1268  02BE  C9          	ret
1269  02BF              	SECTION code_compiler
1270  02BF              ;	---------------------------------
1271  02BF              ; Function player_turn
1272  02BF              ; ---------------------------------
1273  02BF              _player_turn:
1274  02BF  21 00 00    	ld	hl,_sprite
1275  02C2  CD 00 00    	call	_spr_chktime
1276  02C5  7D          	ld	a, l
1277  02C6  B7          	or	a, a
1278  02C7  C8          	ret	Z
1279  02C8  21 00 00    	ld	hl,_k1
1280  02CB  E5          	push	hl
1281  02CC  2A 00 00    	ld	hl,(_joyfunc1)
1282  02CF  CD 00 00    	call	___sdcc_call_hl
1283  02D2  F1          	pop	af
1284  02D3  7D          	ld	a,l
1285  02D4  32 00 00    	ld	(_dirs),a
1286  02D7  CD DD 02    	call	_player_move
1287  02DA  C3 A5 00    	jp  _player_collision
1288  02DD              	SECTION code_compiler
1289  02DD              ;	---------------------------------
1290  02DD              ; Function player_move
1291  02DD              ; ---------------------------------
1292  02DD              _player_move:
1293  02DD  3A 07 00    	ld	a,(_lin + 0x0007)
1294  02E0  32 00 00    	ld	(_s_lin0),a
1295  02E3  3A 07 00    	ld	a,(_col + 0x0007)
1296  02E6  32 00 00    	ld	(_s_col0),a
1297  02E9  21 07 00    	ld	hl,+(_tile + 0x0007)
1298  02EC  4E          	ld	c, (hl)
1299  02ED  21 07 00    	ld	hl,+(_colint + 0x0007)
1300  02F0  46          	ld	b, (hl)
1301  02F1  79          	ld	a, c
1302  02F2  80          	add	a, b
1303  02F3  32 00 00    	ld	(_s_tile0),a
1304  02F6  3A 07 00    	ld	a,(_state + 0x0007)
1305  02F9  32 00 00    	ld	(_s_state),a
1306  02FC  21 00 00    	ld	hl,_s_state
1307  02FF  CB 46       	bit	0, (hl)
1308  0301  20 07       	jr	NZ,l_player_move_00113
1309  0303  21 00 00    	ld	hl,_s_state
1310  0306  CB 4E       	bit	1, (hl)
1311  0308  28 49       	jr	Z,l_player_move_00114
1312  030A              l_player_move_00113:
1313  030A  CD 0F 06    	call	_player_fire
1314  030D  3A 00 00    	ld	a,(_player_vel_y)
1315  0310  21 00 00    	ld	hl,_player_vel_y1
1316  0313  96          	sub	a, (hl)
1317  0314  E2 19 03    	jp	PO, l_player_move_00162
1318  0317  EE 80       	xor	a,0x80
1319  0319              l_player_move_00162:
1320  0319  F2 3C 03    	jp	P, l_player_move_00106
1321  031C  21 00 00    	ld	hl,_dirs
1322  031F  CB 56       	bit	2, (hl)
1323  0321  28 09       	jr	Z,l_player_move_00102
1324  0323  21 00 00    	ld	hl,_s_state
1325  0326  7E          	ld	a,(hl)
1326  0327  F6 08       	or	a,0x08
1327  0329  E6 FB       	and	a,0xfb
1328  032B  77          	ld	(hl),a
1329  032C              l_player_move_00102:
1330  032C  21 00 00    	ld	hl,_dirs
1331  032F  CB 4E       	bit	1, (hl)
1332  0331  28 09       	jr	Z,l_player_move_00106
1333  0333  21 00 00    	ld	hl,_s_state
1334  0336  7E          	ld	a,(hl)
1335  0337  F6 04       	or	a,0x04
1336  0339  E6 F7       	and	a,0xf7
1337  033B  77          	ld	(hl),a
1338  033C              l_player_move_00106:
1339  033C  CD 04 0D    	call	_player_move_jump
1340  033F  7D          	ld	a, l
1341  0340  B7          	or	a, a
1342  0341  28 1C       	jr	Z,l_player_move_00115
1343  0343  3A 00 00    	ld	a,(_player_over_stair)
1344  0346  B7          	or	a, a
1345  0347  20 16       	jr	NZ,l_player_move_00115
1346  0349  21 60 08    	ld	hl,0x0860
1347  034C  E5          	push	hl
1348  034D  CD 4F 04    	call	_player_tile
1349  0350  F1          	pop	af
1350  0351  18 0C       	jr	l_player_move_00115
1351  0353              l_player_move_00114:
1352  0353  CD 6A 04    	call	_player_move_input
1353  0356  3A 00 00    	ld	a,(_player_over_stair)
1354  0359  B7          	or	a, a
1355  035A  20 03       	jr	NZ,l_player_move_00115
1356  035C  CD 7F 0B    	call	_player_check_floor
1357  035F              l_player_move_00115:
1358  035F  CD 00 00    	call	_spr_redraw
1359  0362  7D          	ld	a, l
1360  0363  B7          	or	a, a
1361  0364  28 03       	jr	Z,l_player_move_00118
1362  0366  CD 58 06    	call	_player_check_map
1363  0369              l_player_move_00118:
1364  0369  3A 00 00    	ld	a,(_player_hit_lin)
1365  036C  B7          	or	a, a
1366  036D  28 03       	jr	Z,l_player_move_00120
1367  036F  CD EC 0A    	call	_player_hit_platform_clear
1368  0372              l_player_move_00120:
1369  0372  3A 00 00    	ld	a,(_s_state)
1370  0375  32 07 00    	ld	((_state + 0x0007)),a
1371  0378  2E 00       	ld	l,0x00
1372  037A  C9          	ret
1373  037B              	SECTION code_compiler
1374  037B              ;	---------------------------------
1375  037B              ; Function player_check_stairs_down
1376  037B              ; ---------------------------------
1377  037B              _player_check_stairs_down:
1378  037B  CD 00 00    	call	___sdcc_enter_ix
1379  037E  3B          	dec	sp
1380  037F  3A 07 00    	ld	a,(_col + 0x0007)
1381  0382  DD 86 04    	add	a,(ix+4)
1382  0385  47          	ld	b, a
1383  0386  3A 07 00    	ld	a,(_lin + 0x0007)
1384  0389  C6 10       	add	a,0x10
1385  038B  4F          	ld	c,a
1386  038C  C5          	push	bc
1387  038D  CD 00 00    	call	_spr_calc_index
1388  0390  F1          	pop	af
1389  0391  7D          	ld	a,l
1390  0392  32 00 00    	ld	(_sprite_curr_index),a
1391  0395  4F          	ld	c,a
1392  0396  06 00       	ld	b,0x00
1393  0398  21 00 00    	ld	hl,_scr_map
1394  039B  09          	add	hl,bc
1395  039C  7E          	ld	a,(hl)
1396  039D  4F          	ld	c,a
1397  039E  D6 44       	sub	a,0x44
1398  03A0  38 05       	jr	C,l_player_check_stairs_down_00107
1399  03A2  3E 47       	ld	a,0x47
1400  03A4  91          	sub	a, c
1401  03A5  30 04       	jr	NC,l_player_check_stairs_down_00108
1402  03A7              l_player_check_stairs_down_00107:
1403  03A7  3E 00       	ld	a,0x00
1404  03A9  18 02       	jr	l_player_check_stairs_down_00109
1405  03AB              l_player_check_stairs_down_00108:
1406  03AB  3E 01       	ld	a,0x01
1407  03AD              l_player_check_stairs_down_00109:
1408  03AD  B7          	or	a, a
1409  03AE  28 09       	jr	Z,l_player_check_stairs_down_00105
1410  03B0  21 00 00    	ld	hl,_player_over_stair
1411  03B3  7E          	ld	a, (hl)
1412  03B4  B7          	or	a, a
1413  03B5  20 02       	jr	NZ,l_player_check_stairs_down_00105
1414  03B7  36 01       	ld	(hl),0x01
1415  03B9              l_player_check_stairs_down_00105:
1416  03B9  33          	inc	sp
1417  03BA  DD E1       	pop	ix
1418  03BC  C9          	ret
1419  03BD              	SECTION code_compiler
1420  03BD              ;	---------------------------------
1421  03BD              ; Function player_check_stairs
1422  03BD              ; ---------------------------------
1423  03BD              _player_check_stairs:
1424  03BD  CD 00 00    	call	___sdcc_enter_ix
1425  03C0  3B          	dec	sp
1426  03C1  5D          	ld	e, l
1427  03C2  3A 07 00    	ld	a,(_col + 0x0007)
1428  03C5  83          	add	a, e
1429  03C6  4F          	ld	c, a
1430  03C7  21 07 00    	ld	hl,+(_lin + 0x0007)
1431  03CA  46          	ld	b, (hl)
1432  03CB  D5          	push	de
1433  03CC  79          	ld	a, c
1434  03CD  48          	ld	c,b
1435  03CE  47          	ld	b,a
1436  03CF  C5          	push	bc
1437  03D0  CD 00 00    	call	_spr_calc_index
1438  03D3  F1          	pop	af
1439  03D4  D1          	pop	de
1440  03D5  7D          	ld	a,l
1441  03D6  32 00 00    	ld	(_sprite_curr_index),a
1442  03D9  4F          	ld	c,a
1443  03DA  06 00       	ld	b,0x00
1444  03DC  21 00 00    	ld	hl,_scr_map
1445  03DF  09          	add	hl,bc
1446  03E0  7E          	ld	a,(hl)
1447  03E1  4F          	ld	c,a
1448  03E2  D6 44       	sub	a,0x44
1449  03E4  38 05       	jr	C,l_player_check_stairs_00111
1450  03E6  3E 47       	ld	a,0x47
1451  03E8  91          	sub	a, c
1452  03E9  30 04       	jr	NC,l_player_check_stairs_00112
1453  03EB              l_player_check_stairs_00111:
1454  03EB  0E 00       	ld	c,0x00
1455  03ED  18 02       	jr	l_player_check_stairs_00113
1456  03EF              l_player_check_stairs_00112:
1457  03EF  0E 01       	ld	c,0x01
1458  03F1              l_player_check_stairs_00113:
1459  03F1  3A 07 00    	ld	a,(_col + 0x0007)
1460  03F4  83          	add	a, e
1461  03F5  57          	ld	d, a
1462  03F6  3A 07 00    	ld	a,(_lin + 0x0007)
1463  03F9  C6 0F       	add	a,0x0f
1464  03FB  47          	ld	b, a
1465  03FC  C5          	push	bc
1466  03FD  58          	ld	e,b
1467  03FE  D5          	push	de
1468  03FF  CD 00 00    	call	_spr_calc_index
1469  0402  F1          	pop	af
1470  0403  C1          	pop	bc
1471  0404  7D          	ld	a,l
1472  0405  32 00 00    	ld	(_sprite_curr_index),a
1473  0408  5F          	ld	e,a
1474  0409  16 00       	ld	d,0x00
1475  040B  21 00 00    	ld	hl,_scr_map
1476  040E  19          	add	hl,de
1477  040F  7E          	ld	a,(hl)
1478  0410  47          	ld	b,a
1479  0411  D6 44       	sub	a,0x44
1480  0413  38 05       	jr	C,l_player_check_stairs_00114
1481  0415  3E 47       	ld	a,0x47
1482  0417  90          	sub	a, b
1483  0418  30 04       	jr	NC,l_player_check_stairs_00115
1484  041A              l_player_check_stairs_00114:
1485  041A  06 00       	ld	b,0x00
1486  041C  18 02       	jr	l_player_check_stairs_00116
1487  041E              l_player_check_stairs_00115:
1488  041E  06 01       	ld	b,0x01
1489  0420              l_player_check_stairs_00116:
1490  0420  79          	ld	a, c
1491  0421  B7          	or	a,a
1492  0422  20 03       	jr	NZ,l_player_check_stairs_00105
1493  0424  B0          	or	a,b
1494  0425  28 13       	jr	Z,l_player_check_stairs_00106
1495  0427              l_player_check_stairs_00105:
1496  0427  21 00 00    	ld	hl,_player_over_stair
1497  042A  7E          	ld	a, (hl)
1498  042B  B7          	or	a, a
1499  042C  20 1D       	jr	NZ,l_player_check_stairs_00109
1500  042E  36 01       	ld	(hl),0x01
1501  0430  21 72 00    	ld	hl,0x0072
1502  0433  E5          	push	hl
1503  0434  CD 4F 04    	call	_player_tile
1504  0437  F1          	pop	af
1505  0438  18 11       	jr	l_player_check_stairs_00109
1506  043A              l_player_check_stairs_00106:
1507  043A  21 00 00    	ld	hl,_player_over_stair
1508  043D  7E          	ld	a, (hl)
1509  043E  B7          	or	a, a
1510  043F  28 0A       	jr	Z,l_player_check_stairs_00109
1511  0441  36 00       	ld	(hl),0x00
1512  0443  21 60 08    	ld	hl,0x0860
1513  0446  E5          	push	hl
1514  0447  CD 4F 04    	call	_player_tile
1515  044A  F1          	pop	af
1516  044B              l_player_check_stairs_00109:
1517  044B  33          	inc	sp
1518  044C  DD E1       	pop	ix
1519  044E  C9          	ret
1520  044F              	SECTION code_compiler
1521  044F              ;	---------------------------------
1522  044F              ; Function player_tile
1523  044F              ; ---------------------------------
1524  044F              _player_tile:
1525  044F  CD 00 00    	call	___sdcc_enter_ix
1526  0452  DD 7E 05    	ld	a,(ix+5)
1527  0455  F5          	push	af
1528  0456  33          	inc	sp
1529  0457  2A FF FF    	ld	hl,(_sprite-1)
1530  045A  DD 6E 04    	ld	l,(ix+4)
1531  045D  E5          	push	hl
1532  045E  CD 00 00    	call	_spr_tile_dir
1533  0461  F1          	pop	af
1534  0462  33          	inc	sp
1535  0463  7D          	ld	a,l
1536  0464  32 07 00    	ld	((_tile + 0x0007)),a
1537  0467  DD E1       	pop	ix
1538  0469  C9          	ret
1539  046A              	SECTION code_compiler
1540  046A              ;	---------------------------------
1541  046A              ; Function player_move_input
1542  046A              ; ---------------------------------
1543  046A              _player_move_input:
1544  046A  CD 66 00    	call	_player_check_input
1545  046D  7D          	ld	a, l
1546  046E  B7          	or	a, a
1547  046F  CA C2 05    	jp	Z, l_player_move_input_00143
1548  0472  CD 0F 06    	call	_player_fire
1549  0475  7D          	ld	a, l
1550  0476  B7          	or	a, a
1551  0477  28 0A       	jr	Z,l_player_move_input_00102
1552  0479  21 00 00    	ld	hl,_dirs
1553  047C  36 00       	ld	(hl),0x00
1554  047E  2E 00       	ld	l,0x00
1555  0480  C3 E8 05    	jp	l_player_move_input_00145
1556  0483              l_player_move_input_00102:
1557  0483  21 00 00    	ld	hl,_dirs
1558  0486  CB 7E       	bit	7, (hl)
1559  0488  28 54       	jr	Z,l_player_move_input_00106
1560  048A  21 00 00    	ld	hl,_dirs
1561  048D  CB 46       	bit	0, (hl)
1562  048F  28 4D       	jr	Z,l_player_move_input_00106
1563  0491  21 00 00    	ld	hl,_player_vel_inc
1564  0494  36 01       	ld	(hl),0x01
1565  0496  CD 00 00    	call	_ay_is_playing
1566  0499  7D          	ld	a, l
1567  049A  D6 03       	sub	a,0x03
1568  049C  28 06       	jr	Z,l_player_move_input_00104
1569  049E  21 00 00    	ld	hl,_ay_effect_03
1570  04A1  CD 00 00    	call	_ay_fx_play
1571  04A4              l_player_move_input_00104:
1572  04A4  21 00 00    	ld	hl,_player_over_stair
1573  04A7  36 00       	ld	(hl),0x00
1574  04A9  CD 00 00    	call	_sound_jump
1575  04AC  21 00 00    	ld	hl,_s_state
1576  04AF  7E          	ld	a,(hl)
1577  04B0  F6 01       	or	a,0x01
1578  04B2  E6 FD       	and	a,0xfd
1579  04B4  77          	ld	(hl),a
1580  04B5  3A 07 00    	ld	a,(_lin + 0x0007)
1581  04B8  32 07 00    	ld	((_jump_lin + 0x0007)),a
1582  04BB  3A 00 00    	ld	a,(_s_state)
1583  04BE  32 07 00    	ld	((_state + 0x0007)),a
1584  04C1  21 64 08    	ld	hl,0x0864
1585  04C4  E5          	push	hl
1586  04C5  CD 4F 04    	call	_player_tile
1587  04C8  F1          	pop	af
1588  04C9  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
1589  04CC  36 02       	ld	(hl),0x02
1590  04CE  21 00 00    	ld	hl,_player_slide
1591  04D1  36 00       	ld	(hl),0x00
1592  04D3  3A 00 00    	ld	a,(_player_vel_y0)
1593  04D6  32 00 00    	ld	(_player_vel_y),a
1594  04D9  2E 01       	ld	l,0x01
1595  04DB  C3 E8 05    	jp	l_player_move_input_00145
1596  04DE              l_player_move_input_00106:
1597  04DE  21 00 00    	ld	hl,_dirs
1598  04E1  CB 5E       	bit	3, (hl)
1599  04E3  28 23       	jr	Z,l_player_move_input_00111
1600  04E5  CD E9 05    	call	_player_fix_walk_lin
1601  04E8  21 00 00    	ld	hl,_s_state
1602  04EB  7E          	ld	a,(hl)
1603  04EC  F6 04       	or	a,0x04
1604  04EE  E6 F7       	and	a,0xf7
1605  04F0  77          	ld	(hl),a
1606  04F1  01 07 00    	ld	bc,_state_a+7
1607  04F4  0A          	ld	a, (bc)
1608  04F5  F6 10       	or	a,0x10
1609  04F7  E6 F7       	and	a,0xf7
1610  04F9  02          	ld	(bc),a
1611  04FA  3A 00 00    	ld	a,(_player_over_stair)
1612  04FD  B7          	or	a, a
1613  04FE  28 05       	jr	Z,l_player_move_input_00109
1614  0500  2E 00       	ld	l,0x00
1615  0502  CD BD 03    	call	_player_check_stairs
1616  0505              l_player_move_input_00109:
1617  0505  CD 00 00    	call	_spr_move_horizontal
1618  0508              l_player_move_input_00111:
1619  0508  21 00 00    	ld	hl,_dirs
1620  050B  CB 56       	bit	2, (hl)
1621  050D  28 23       	jr	Z,l_player_move_input_00115
1622  050F  CD E9 05    	call	_player_fix_walk_lin
1623  0512  21 00 00    	ld	hl,_s_state
1624  0515  7E          	ld	a,(hl)
1625  0516  F6 08       	or	a,0x08
1626  0518  E6 FB       	and	a,0xfb
1627  051A  77          	ld	(hl),a
1628  051B  01 07 00    	ld	bc,_state_a+7
1629  051E  0A          	ld	a, (bc)
1630  051F  F6 08       	or	a,0x08
1631  0521  E6 EF       	and	a,0xef
1632  0523  02          	ld	(bc),a
1633  0524  3A 00 00    	ld	a,(_player_over_stair)
1634  0527  B7          	or	a, a
1635  0528  28 05       	jr	Z,l_player_move_input_00113
1636  052A  2E 00       	ld	l,0x00
1637  052C  CD BD 03    	call	_player_check_stairs
1638  052F              l_player_move_input_00113:
1639  052F  CD 00 00    	call	_spr_move_horizontal
1640  0532              l_player_move_input_00115:
1641  0532  21 00 00    	ld	hl,_dirs
1642  0535  CB 46       	bit	0, (hl)
1643  0537  28 2E       	jr	Z,l_player_move_input_00125
1644  0539  2E 00       	ld	l,0x00
1645  053B  CD BD 03    	call	_player_check_stairs
1646  053E  3A 00 00    	ld	a,(_player_over_stair)
1647  0541  B7          	or	a, a
1648  0542  20 05       	jr	NZ,l_player_move_input_00117
1649  0544  2E 01       	ld	l,0x01
1650  0546  CD BD 03    	call	_player_check_stairs
1651  0549              l_player_move_input_00117:
1652  0549  3A 00 00    	ld	a,(_player_over_stair)
1653  054C  B7          	or	a, a
1654  054D  28 05       	jr	Z,l_player_move_input_00122
1655  054F  CD 00 00    	call	_spr_move_up
1656  0552  18 13       	jr	l_player_move_input_00125
1657  0554              l_player_move_input_00122:
1658  0554  21 00 00    	ld	hl,_dirs
1659  0557  CB 5E       	bit	3, (hl)
1660  0559  20 0C       	jr	NZ,l_player_move_input_00125
1661  055B  21 00 00    	ld	hl,_dirs
1662  055E  CB 56       	bit	2, (hl)
1663  0560  20 05       	jr	NZ,l_player_move_input_00125
1664  0562  2E 00       	ld	l,0x00
1665  0564  C3 E8 05    	jp	l_player_move_input_00145
1666  0567              l_player_move_input_00125:
1667  0567  21 00 00    	ld	hl,_dirs
1668  056A  CB 4E       	bit	1, (hl)
1669  056C  28 32       	jr	Z,l_player_move_input_00135
1670  056E  AF          	xor	a, a
1671  056F  F5          	push	af
1672  0570  33          	inc	sp
1673  0571  CD 7B 03    	call	_player_check_stairs_down
1674  0574  33          	inc	sp
1675  0575  3A 00 00    	ld	a,(_player_over_stair)
1676  0578  B7          	or	a, a
1677  0579  20 08       	jr	NZ,l_player_move_input_00127
1678  057B  3E 01       	ld	a,0x01
1679  057D  F5          	push	af
1680  057E  33          	inc	sp
1681  057F  CD 7B 03    	call	_player_check_stairs_down
1682  0582  33          	inc	sp
1683  0583              l_player_move_input_00127:
1684  0583  3A 00 00    	ld	a,(_player_over_stair)
1685  0586  B7          	or	a, a
1686  0587  28 05       	jr	Z,l_player_move_input_00132
1687  0589  CD 00 00    	call	_spr_move_down
1688  058C  18 12       	jr	l_player_move_input_00135
1689  058E              l_player_move_input_00132:
1690  058E  21 00 00    	ld	hl,_dirs
1691  0591  CB 5E       	bit	3, (hl)
1692  0593  20 0B       	jr	NZ,l_player_move_input_00135
1693  0595  21 00 00    	ld	hl,_dirs
1694  0598  CB 56       	bit	2, (hl)
1695  059A  20 04       	jr	NZ,l_player_move_input_00135
1696  059C  2E 00       	ld	l,0x00
1697  059E  18 48       	jr	l_player_move_input_00145
1698  05A0              l_player_move_input_00135:
1699  05A0  3A 00 00    	ld	a,(_s_state)
1700  05A3  32 07 00    	ld	((_state + 0x0007)),a
1701  05A6  3A 00 00    	ld	a,(_player_over_stair)
1702  05A9  B7          	or	a, a
1703  05AA  28 0A       	jr	Z,l_player_move_input_00137
1704  05AC  21 72 00    	ld	hl,0x0072
1705  05AF  E5          	push	hl
1706  05B0  CD 4F 04    	call	_player_tile
1707  05B3  F1          	pop	af
1708  05B4  18 08       	jr	l_player_move_input_00138
1709  05B6              l_player_move_input_00137:
1710  05B6  21 60 08    	ld	hl,0x0860
1711  05B9  E5          	push	hl
1712  05BA  CD 4F 04    	call	_player_tile
1713  05BD  F1          	pop	af
1714  05BE              l_player_move_input_00138:
1715  05BE  2E 01       	ld	l,0x01
1716  05C0  18 26       	jr	l_player_move_input_00145
1717  05C2              l_player_move_input_00143:
1718  05C2  21 07 00    	ld	hl, +(_colint + 0x0007)
1719  05C5  36 00       	ld	(hl),0x00
1720  05C7  3A 00 00    	ld	a,(_player_over_stair)
1721  05CA  B7          	or	a, a
1722  05CB  28 0A       	jr	Z,l_player_move_input_00140
1723  05CD  21 72 00    	ld	hl,0x0072
1724  05D0  E5          	push	hl
1725  05D1  CD 4F 04    	call	_player_tile
1726  05D4  F1          	pop	af
1727  05D5  18 08       	jr	l_player_move_input_00141
1728  05D7              l_player_move_input_00140:
1729  05D7  21 70 01    	ld	hl,0x0170
1730  05DA  E5          	push	hl
1731  05DB  CD 4F 04    	call	_player_tile
1732  05DE  F1          	pop	af
1733  05DF              l_player_move_input_00141:
1734  05DF  21 00 00    	ld	hl,_s_state
1735  05E2  7E          	ld	a,(hl)
1736  05E3  E6 F3       	and	a,+(0xf7&0xfb)
1737  05E5  77          	ld	(hl),a
1738  05E6  2E 00       	ld	l,0x00
1739  05E8              l_player_move_input_00145:
1740  05E8  C9          	ret
1741  05E9              	SECTION code_compiler
1742  05E9              ;	---------------------------------
1743  05E9              ; Function player_fix_walk_lin
1744  05E9              ; ---------------------------------
1745  05E9              _player_fix_walk_lin:
1746  05E9  3A 00 00    	ld	a,(_player_over_stair)
1747  05EC  B7          	or	a, a
1748  05ED  C0          	ret	NZ
1749  05EE  3A 00 00    	ld	a,(_s_lin0)
1750  05F1  07          	rlca
1751  05F2  07          	rlca
1752  05F3  07          	rlca
1753  05F4  07          	rlca
1754  05F5  E6 0F       	and	a,0x0f
1755  05F7  07          	rlca
1756  05F8  07          	rlca
1757  05F9  07          	rlca
1758  05FA  07          	rlca
1759  05FB  E6 F0       	and	a,0xf0
1760  05FD  32 00 00    	ld	(_s_lin1),a
1761  0600  3A 00 00    	ld	a,(_s_lin0)
1762  0603  21 00 00    	ld	hl,_s_lin1
1763  0606  96          	sub	a, (hl)
1764  0607  C8          	ret	Z
1765  0608  3A 00 00    	ld	a,(_s_lin1)
1766  060B  32 07 00    	ld	((_lin + 0x0007)),a
1767  060E  C9          	ret
1768  060F              	SECTION code_compiler
1769  060F              ;	---------------------------------
1770  060F              ; Function player_fire
1771  060F              ; ---------------------------------
1772  060F              _player_fire:
1773  060F  21 00 00    	ld	hl,_dirs
1774  0612  CB 7E       	bit	7, (hl)
1775  0614  28 3F       	jr	Z,l_player_fire_00110
1776  0616  21 00 00    	ld	hl,_dirs
1777  0619  CB 46       	bit	0, (hl)
1778  061B  20 38       	jr	NZ,l_player_fire_00110
1779  061D  21 00 00    	ld	hl,_player_mana
1780  0620  7E          	ld	a, (hl)
1781  0621  B7          	or	a, a
1782  0622  28 2D       	jr	Z,l_player_fire_00107
1783  0624  3A 07 00    	ld	a,(_bullet_col + 0x0007)
1784  0627  3C          	inc	a
1785  0628  20 27       	jr	NZ,l_player_fire_00107
1786  062A  3E 05       	ld	a,0x05
1787  062C  96          	sub	a, (hl)
1788  062D  30 12       	jr	NC,l_player_fire_00104
1789  062F  CD 00 00    	call	_sound_hit_enemy
1790  0632  3A 00 00    	ld	a,(_game_god_mode)
1791  0635  B7          	or	a, a
1792  0636  20 0E       	jr	NZ,l_player_fire_00105
1793  0638  21 00 00    	ld	hl,_player_mana
1794  063B  7E          	ld	a, (hl)
1795  063C  C6 FB       	add	a,0xfb
1796  063E  77          	ld	(hl), a
1797  063F  18 05       	jr	l_player_fire_00105
1798  0641              l_player_fire_00104:
1799  0641  21 00 00    	ld	hl,_player_mana
1800  0644  36 00       	ld	(hl),0x00
1801  0646              l_player_fire_00105:
1802  0646  CD 00 00    	call	_game_update_stats
1803  0649  21 07 78    	ld	hl,0x7807
1804  064C  E5          	push	hl
1805  064D  CD 00 00    	call	_game_shoot_fire
1806  0650  F1          	pop	af
1807  0651              l_player_fire_00107:
1808  0651  2E 01       	ld	l,0x01
1809  0653  18 02       	jr	l_player_fire_00112
1810  0655              l_player_fire_00110:
1811  0655  2E 00       	ld	l,0x00
1812  0657              l_player_fire_00112:
1813  0657  C9          	ret
1814  0658              	SECTION code_compiler
1815  0658              ;	---------------------------------
1816  0658              ; Function player_check_map
1817  0658              ; ---------------------------------
1818  0658              _player_check_map:
1819  0658  21 07 00    	ld	hl,+(_col + 0x0007)
1820  065B  46          	ld	b, (hl)
1821  065C  21 07 00    	ld	hl,+(_lin + 0x0007)
1822  065F  4E          	ld	c, (hl)
1823  0660  C5          	push	bc
1824  0661  CD 00 00    	call	_spr_calc_index
1825  0664  F1          	pop	af
1826  0665  7D          	ld	a,l
1827  0666  32 00 00    	ld	(_sprite_curr_index),a
1828  0669  21 07 00    	ld	hl,+(_col + 0x0007)
1829  066C  4E          	ld	c, (hl)
1830  066D  3A 07 00    	ld	a,(_lin + 0x0007)
1831  0670  E6 0F       	and	a,0x0f
1832  0672  CB 41       	bit	0, c
1833  0674  20 17       	jr	NZ,l_player_check_map_00108
1834  0676  B7          	or	a, a
1835  0677  20 05       	jr	NZ,l_player_check_map_00102
1836  0679  CD B8 06    	call	_player_pick_item
1837  067C  18 39       	jr	l_player_check_map_00110
1838  067E              l_player_check_map_00102:
1839  067E  CD B8 06    	call	_player_pick_item
1840  0681  21 00 00    	ld	hl,_sprite_curr_index
1841  0684  7E          	ld	a, (hl)
1842  0685  C6 10       	add	a,0x10
1843  0687  77          	ld	(hl), a
1844  0688  CD B8 06    	call	_player_pick_item
1845  068B  18 2A       	jr	l_player_check_map_00110
1846  068D              l_player_check_map_00108:
1847  068D  B7          	or	a, a
1848  068E  20 0C       	jr	NZ,l_player_check_map_00105
1849  0690  CD B8 06    	call	_player_pick_item
1850  0693  21 00 00    	ld	hl,_sprite_curr_index
1851  0696  34          	inc	(hl)
1852  0697  CD B8 06    	call	_player_pick_item
1853  069A  18 1B       	jr	l_player_check_map_00110
1854  069C              l_player_check_map_00105:
1855  069C  CD B8 06    	call	_player_pick_item
1856  069F  21 00 00    	ld	hl,_sprite_curr_index
1857  06A2  34          	inc	(hl)
1858  06A3  CD B8 06    	call	_player_pick_item
1859  06A6  21 00 00    	ld	hl,_sprite_curr_index
1860  06A9  7E          	ld	a, (hl)
1861  06AA  C6 0F       	add	a,0x0f
1862  06AC  77          	ld	(hl), a
1863  06AD  CD B8 06    	call	_player_pick_item
1864  06B0  21 00 00    	ld	hl,_sprite_curr_index
1865  06B3  34          	inc	(hl)
1866  06B4  CD B8 06    	call	_player_pick_item
1867  06B7              l_player_check_map_00110:
1868  06B7  C9          	ret
1869  06B8              	SECTION code_compiler
1870  06B8              ;	---------------------------------
1871  06B8              ; Function player_pick_item
1872  06B8              ; ---------------------------------
1873  06B8              _player_pick_item:
1874  06B8  CD 00 00    	call	___sdcc_enter_ix
1875  06BB  3B          	dec	sp
1876  06BC  2A 00 00    	ld	hl,(_sprite_curr_index)
1877  06BF  26 00       	ld	h,0x00
1878  06C1  01 00 00    	ld	bc,_scr_map
1879  06C4  09          	add	hl,bc
1880  06C5  7E          	ld	a,(hl)
1881  06C6  DD 77 FF    	ld	(ix-1),a
1882  06C9  D6 24       	sub	a,0x24
1883  06CB  DA 47 08    	jp	C, l_player_pick_item_00131
1884  06CE  3E 2F       	ld	a,0x2f
1885  06D0  DD 96 FF    	sub	a,(ix-1)
1886  06D3  DA 47 08    	jp	C, l_player_pick_item_00131
1887  06D6  CD 00 00    	call	_ay_reset
1888  06D9  21 00 00    	ld	hl,_ay_effect_10
1889  06DC  CD 00 00    	call	_ay_fx_play
1890  06DF  CD 00 00    	call	_sound_coin
1891  06E2  2A 00 00    	ld	hl,(_sprite_curr_index)
1892  06E5  26 00       	ld	h,0x00
1893  06E7  01 00 00    	ld	bc,_scr_map
1894  06EA  09          	add	hl,bc
1895  06EB  3A 00 00    	ld	a,(_sprite_curr_index)
1896  06EE  5F          	ld	e,a
1897  06EF  16 00       	ld	d,0x00
1898  06F1  E5          	push	hl
1899  06F2  D5          	push	de
1900  06F3  CD 00 00    	call	_game_match_back
1901  06F6  F1          	pop	af
1902  06F7  C1          	pop	bc
1903  06F8  7D          	ld	a,l
1904  06F9  02          	ld	(bc), a
1905  06FA  3A 00 00    	ld	a,(_sprite_curr_index)
1906  06FD  4F          	ld	c,a
1907  06FE  06 00       	ld	b,0x00
1908  0700  C5          	push	bc
1909  0701  CD 00 00    	call	_game_obj_set
1910  0704  F1          	pop	af
1911  0705  3A 00 00    	ld	a,(_sprite_curr_index)
1912  0708  07          	rlca
1913  0709  07          	rlca
1914  070A  07          	rlca
1915  070B  07          	rlca
1916  070C  E6 0F       	and	a,0x0f
1917  070E  07          	rlca
1918  070F  07          	rlca
1919  0710  07          	rlca
1920  0711  07          	rlca
1921  0712  E6 F0       	and	a,0xf0
1922  0714  32 00 00    	ld	(_s_lin1),a
1923  0717  3A 00 00    	ld	a,(_sprite_curr_index)
1924  071A  E6 0F       	and	a,0x0f
1925  071C  87          	add	a, a
1926  071D  32 00 00    	ld	(_s_col1),a
1927  0720  21 00 00    	ld	hl,0x0000
1928  0723  E5          	push	hl
1929  0724  21 84 03    	ld	hl,0x0384
1930  0727  E5          	push	hl
1931  0728  F5          	push	af
1932  0729  33          	inc	sp
1933  072A  3A 00 00    	ld	a,(_s_lin1)
1934  072D  F5          	push	af
1935  072E  33          	inc	sp
1936  072F  CD 00 00    	call	_spr_add_anim
1937  0732  F1          	pop	af
1938  0733  F1          	pop	af
1939  0734  F1          	pop	af
1940  0735  DD 7E FF    	ld	a,(ix-1)
1941  0738  D6 24       	sub	a,0x24
1942  073A  DA 47 08    	jp	C, l_player_pick_item_00131
1943  073D  3E 2F       	ld	a,0x2f
1944  073F  DD 96 FF    	sub	a,(ix-1)
1945  0742  DA 47 08    	jp	C, l_player_pick_item_00131
1946  0745  DD 7E FF    	ld	a,(ix-1)
1947  0748  C6 DC       	add	a,0xdc
1948  074A  4F          	ld	c, a
1949  074B  06 00       	ld	b,0x00
1950  074D  21 54 07    	ld	hl,l_player_pick_item_00177
1951  0750  09          	add	hl, bc
1952  0751  09          	add	hl, bc
1953  0752  09          	add	hl, bc
1954  0753  E9          	jp	(hl)
1955  0754              l_player_pick_item_00177:
1956  0754  C3 78 07    	jp	l_player_pick_item_00101
1957  0757  C3 83 07    	jp	l_player_pick_item_00102
1958  075A  C3 8E 07    	jp	l_player_pick_item_00103
1959  075D  C3 99 07    	jp	l_player_pick_item_00104
1960  0760  C3 A4 07    	jp	l_player_pick_item_00105
1961  0763  C3 CB 07    	jp	l_player_pick_item_00109
1962  0766  C3 E0 07    	jp	l_player_pick_item_00112
1963  0769  C3 F5 07    	jp	l_player_pick_item_00115
1964  076C  C3 0A 08    	jp	l_player_pick_item_00118
1965  076F  C3 1F 08    	jp	l_player_pick_item_00121
1966  0772  C3 34 08    	jp	l_player_pick_item_00124
1967  0775  C3 C2 07    	jp	l_player_pick_item_00108
1968  0778              l_player_pick_item_00101:
1969  0778  21 00 00    	ld	hl,_player_keys
1970  077B  36 01       	ld	(hl),0x01
1971  077D  CD 00 00    	call	_game_update_stats
1972  0780  C3 47 08    	jp	l_player_pick_item_00131
1973  0783              l_player_pick_item_00102:
1974  0783  21 01 00    	ld	hl, +(_player_keys + 0x0001)
1975  0786  36 01       	ld	(hl),0x01
1976  0788  CD 00 00    	call	_game_update_stats
1977  078B  C3 47 08    	jp	l_player_pick_item_00131
1978  078E              l_player_pick_item_00103:
1979  078E  21 02 00    	ld	hl, +(_player_keys + 0x0002)
1980  0791  36 01       	ld	(hl),0x01
1981  0793  CD 00 00    	call	_game_update_stats
1982  0796  C3 47 08    	jp	l_player_pick_item_00131
1983  0799              l_player_pick_item_00104:
1984  0799  21 03 00    	ld	hl, +(_player_keys + 0x0003)
1985  079C  36 01       	ld	(hl),0x01
1986  079E  CD 00 00    	call	_game_update_stats
1987  07A1  C3 47 08    	jp	l_player_pick_item_00131
1988  07A4              l_player_pick_item_00105:
1989  07A4  21 01 00    	ld	hl,0x0001
1990  07A7  CD 1B 0B    	call	_player_score_add
1991  07AA  21 00 00    	ld	hl,_player_coins
1992  07AD  7E          	ld	a,(hl)
1993  07AE  3C          	inc	a
1994  07AF  77          	ld	(hl),a
1995  07B0  D6 64       	sub	a,0x64
1996  07B2  20 08       	jr	NZ,l_player_pick_item_00107
1997  07B4  CD 2C 02    	call	_player_1up
1998  07B7  21 00 00    	ld	hl,_player_coins
1999  07BA  36 00       	ld	(hl),0x00
2000  07BC              l_player_pick_item_00107:
2001  07BC  CD 00 00    	call	_game_update_stats
2002  07BF  C3 47 08    	jp	l_player_pick_item_00131
2003  07C2              l_player_pick_item_00108:
2004  07C2  21 0A 00    	ld	hl,0x000a
2005  07C5  CD 1B 0B    	call	_player_score_add
2006  07C8  C3 47 08    	jp	l_player_pick_item_00131
2007  07CB              l_player_pick_item_00109:
2008  07CB  21 00 00    	ld	hl,_player_str
2009  07CE  34          	inc	(hl)
2010  07CF  21 00 00    	ld	hl,_player_max_vita
2011  07D2  7E          	ld	a, (hl)
2012  07D3  D6 C8       	sub	a,0xc8
2013  07D5  30 70       	jr	NC,l_player_pick_item_00131
2014  07D7  7E          	ld	a, (hl)
2015  07D8  C6 0A       	add	a,0x0a
2016  07DA  77          	ld	(hl), a
2017  07DB  CD 00 00    	call	_game_update_stats
2018  07DE  18 67       	jr	l_player_pick_item_00131
2019  07E0              l_player_pick_item_00112:
2020  07E0  21 00 00    	ld	hl,_player_str
2021  07E3  34          	inc	(hl)
2022  07E4  21 00 00    	ld	hl,_player_max_vita
2023  07E7  7E          	ld	a, (hl)
2024  07E8  D6 C8       	sub	a,0xc8
2025  07EA  30 5B       	jr	NC,l_player_pick_item_00131
2026  07EC  7E          	ld	a, (hl)
2027  07ED  C6 0A       	add	a,0x0a
2028  07EF  77          	ld	(hl), a
2029  07F0  CD 00 00    	call	_game_update_stats
2030  07F3  18 52       	jr	l_player_pick_item_00131
2031  07F5              l_player_pick_item_00115:
2032  07F5  21 00 00    	ld	hl,_player_str
2033  07F8  34          	inc	(hl)
2034  07F9  21 00 00    	ld	hl,_player_max_vita
2035  07FC  7E          	ld	a, (hl)
2036  07FD  D6 C8       	sub	a,0xc8
2037  07FF  30 46       	jr	NC,l_player_pick_item_00131
2038  0801  7E          	ld	a, (hl)
2039  0802  C6 0A       	add	a,0x0a
2040  0804  77          	ld	(hl), a
2041  0805  CD 00 00    	call	_game_update_stats
2042  0808  18 3D       	jr	l_player_pick_item_00131
2043  080A              l_player_pick_item_00118:
2044  080A  21 00 00    	ld	hl,_player_int
2045  080D  34          	inc	(hl)
2046  080E  21 00 00    	ld	hl,_player_max_mana
2047  0811  7E          	ld	a, (hl)
2048  0812  D6 C8       	sub	a,0xc8
2049  0814  30 31       	jr	NC,l_player_pick_item_00131
2050  0816  7E          	ld	a, (hl)
2051  0817  C6 0A       	add	a,0x0a
2052  0819  77          	ld	(hl), a
2053  081A  CD 00 00    	call	_game_update_stats
2054  081D  18 28       	jr	l_player_pick_item_00131
2055  081F              l_player_pick_item_00121:
2056  081F  21 00 00    	ld	hl,_player_int
2057  0822  34          	inc	(hl)
2058  0823  21 00 00    	ld	hl,_player_max_mana
2059  0826  7E          	ld	a, (hl)
2060  0827  D6 C8       	sub	a,0xc8
2061  0829  30 1C       	jr	NC,l_player_pick_item_00131
2062  082B  7E          	ld	a, (hl)
2063  082C  C6 0A       	add	a,0x0a
2064  082E  77          	ld	(hl), a
2065  082F  CD 00 00    	call	_game_update_stats
2066  0832  18 13       	jr	l_player_pick_item_00131
2067  0834              l_player_pick_item_00124:
2068  0834  21 00 00    	ld	hl,_player_int
2069  0837  34          	inc	(hl)
2070  0838  21 00 00    	ld	hl,_player_max_mana
2071  083B  7E          	ld	a, (hl)
2072  083C  D6 C8       	sub	a,0xc8
2073  083E  30 07       	jr	NC,l_player_pick_item_00131
2074  0840  7E          	ld	a, (hl)
2075  0841  C6 0A       	add	a,0x0a
2076  0843  77          	ld	(hl), a
2077  0844  CD 00 00    	call	_game_update_stats
2078  0847              l_player_pick_item_00131:
2079  0847  33          	inc	sp
2080  0848  DD E1       	pop	ix
2081  084A  C9          	ret
2082  084B              	SECTION code_compiler
2083  084B              ;	---------------------------------
2084  084B              ; Function player_hit_platform
2085  084B              ; ---------------------------------
2086  084B              _player_hit_platform:
2087  084B  CD 00 00    	call	___sdcc_enter_ix
2088  084E  F5          	push	af
2089  084F  3A 00 00    	ld	a,(_player_hit_lin)
2090  0852  B7          	or	a, a
2091  0853  C2 E6 0A    	jp	NZ, l_player_hit_platform_00145
2092  0856  21 07 00    	ld	hl,+(_lin + 0x0007)
2093  0859  4E          	ld	c, (hl)
2094  085A  3E 10       	ld	a,0x10
2095  085C  91          	sub	a, c
2096  085D  D2 E6 0A    	jp	NC, l_player_hit_platform_00145
2097  0860  01 00 00    	ld	bc,_scr_map
2098  0863  2A 00 00    	ld	hl,(_index1)
2099  0866  09          	add	hl,bc
2100  0867  7E          	ld	a,(hl)
2101  0868  D6 45       	sub	a,0x45
2102  086A  DA E6 0A    	jp	C, l_player_hit_platform_00145
2103  086D  2A 00 00    	ld	hl,(_curr_time)
2104  0870  22 0E 00    	ld	(_spr_timer + 0x000e),hl
2105  0873  2A 07 00    	ld	hl,(_lin + 0x0007)
2106  0876  26 00       	ld	h,0x00
2107  0878  01 F8 FF    	ld	bc,0xfff8
2108  087B  09          	add	hl,bc
2109  087C  EB          	ex	de,hl
2110  087D  06 04       	ld	b,0x04
2111  087F              l_player_hit_platform_00250:
2112  087F  CB 2A       	sra	d
2113  0881  CB 1B       	rr	e
2114  0883  10 FA       	djnz	l_player_hit_platform_00250
2115  0885  7B          	ld	a, e
2116  0886  07          	rlca
2117  0887  07          	rlca
2118  0888  07          	rlca
2119  0889  07          	rlca
2120  088A  E6 F0       	and	a,0xf0
2121  088C  C6 08       	add	a,0x08
2122  088E  32 00 00    	ld	(_player_hit_lin),a
2123  0891  21 07 00    	ld	hl,+(_col + 0x0007)
2124  0894  4E          	ld	c, (hl)
2125  0895  CB 41       	bit	0, c
2126  0897  20 06       	jr	NZ,l_player_hit_platform_00111
2127  0899  21 00 00    	ld	hl,_player_hit_col
2128  089C  71          	ld	(hl), c
2129  089D  18 2D       	jr	l_player_hit_platform_00112
2130  089F              l_player_hit_platform_00111:
2131  089F  21 07 00    	ld	hl,+(_state + 0x0007)
2132  08A2  5E          	ld	e, (hl)
2133  08A3  41          	ld	b, c
2134  08A4  04          	inc	b
2135  08A5  0D          	dec	c
2136  08A6  CB 5B       	bit	3, e
2137  08A8  28 12       	jr	Z,l_player_hit_platform_00108
2138  08AA  3A 00 00    	ld	a,(_g_player_hit_right)
2139  08AD  B7          	or	a, a
2140  08AE  28 06       	jr	Z,l_player_hit_platform_00102
2141  08B0  21 00 00    	ld	hl,_player_hit_col
2142  08B3  70          	ld	(hl), b
2143  08B4  18 16       	jr	l_player_hit_platform_00112
2144  08B6              l_player_hit_platform_00102:
2145  08B6  21 00 00    	ld	hl,_player_hit_col
2146  08B9  71          	ld	(hl), c
2147  08BA  18 10       	jr	l_player_hit_platform_00112
2148  08BC              l_player_hit_platform_00108:
2149  08BC  3A 00 00    	ld	a,(_g_player_hit_left)
2150  08BF  B7          	or	a, a
2151  08C0  28 06       	jr	Z,l_player_hit_platform_00105
2152  08C2  21 00 00    	ld	hl,_player_hit_col
2153  08C5  71          	ld	(hl), c
2154  08C6  18 04       	jr	l_player_hit_platform_00112
2155  08C8              l_player_hit_platform_00105:
2156  08C8  21 00 00    	ld	hl,_player_hit_col
2157  08CB  70          	ld	(hl), b
2158  08CC              l_player_hit_platform_00112:
2159  08CC  2A 00 00    	ld	hl,(_index1)
2160  08CF  01 00 00    	ld	bc,_scr_map
2161  08D2  09          	add	hl,bc
2162  08D3  7E          	ld	a,(hl)
2163  08D4  FE 4D       	cp	a,0x4d
2164  08D6  20 45       	jr	NZ,l_player_hit_platform_00114
2165  08D8  E5          	push	hl
2166  08D9  2A 00 00    	ld	hl,(_index1)
2167  08DC  E5          	push	hl
2168  08DD  CD 00 00    	call	_game_match_back
2169  08E0  F1          	pop	af
2170  08E1  C1          	pop	bc
2171  08E2  7D          	ld	a,l
2172  08E3  02          	ld	(bc), a
2173  08E4  2A 00 00    	ld	hl,(_index1)
2174  08E7  E5          	push	hl
2175  08E8  CD 00 00    	call	_game_obj_set
2176  08EB  F1          	pop	af
2177  08EC  21 00 00    	ld	hl,_index1
2178  08EF  7E          	ld	a, (hl)
2179  08F0  E6 0F       	and	a,0x0f
2180  08F2  87          	add	a, a
2181  08F3  4F          	ld	c, a
2182  08F4  23          	inc	hl
2183  08F5  56          	ld	d,(hl)
2184  08F6  2B          	dec	hl
2185  08F7  7E          	ld	a, (hl)
2186  08F8  06 04       	ld	b,0x04
2187  08FA              l_player_hit_platform_00256:
2188  08FA  CB 3A       	srl	d
2189  08FC  1F          	rra
2190  08FD  10 FB       	djnz	l_player_hit_platform_00256
2191  08FF  07          	rlca
2192  0900  07          	rlca
2193  0901  07          	rlca
2194  0902  07          	rlca
2195  0903  E6 F0       	and	a,0xf0
2196  0905  47          	ld	b, a
2197  0906  21 00 00    	ld	hl,0x0000
2198  0909  E5          	push	hl
2199  090A  21 87 03    	ld	hl,0x0387
2200  090D  E5          	push	hl
2201  090E  79          	ld	a, c
2202  090F  48          	ld	c,b
2203  0910  47          	ld	b,a
2204  0911  C5          	push	bc
2205  0912  CD 00 00    	call	_spr_add_anim
2206  0915  F1          	pop	af
2207  0916  F1          	pop	af
2208  0917  F1          	pop	af
2209  0918  2E 01       	ld	l,0x01
2210  091A  C3 E8 0A    	jp	l_player_hit_platform_00148
2211  091D              l_player_hit_platform_00114:
2212  091D  FE 5C       	cp	a,0x5c
2213  091F  28 05       	jr	Z,l_player_hit_platform_00141
2214  0921  D6 5D       	sub	a,0x5d
2215  0923  C2 DA 0A    	jp	NZ,l_player_hit_platform_00142
2216  0926              l_player_hit_platform_00141:
2217  0926  21 00 00    	ld	hl,_tmp0
2218  0929  36 00       	ld	(hl),0x00
2219  092B  3A 00 00    	ld	a,(_game_boss)
2220  092E  B7          	or	a, a
2221  092F  28 0B       	jr	Z,l_player_hit_platform_00174
2222  0931  3A 00 00    	ld	a,(_game_mush_count)
2223  0934  B7          	or	a, a
2224  0935  28 05       	jr	Z,l_player_hit_platform_00174
2225  0937  2E 00       	ld	l,0x00
2226  0939  C3 E8 0A    	jp	l_player_hit_platform_00148
2227  093C              l_player_hit_platform_00174:
2228  093C              l_player_hit_platform_00138:
2229  093C  21 00 00    	ld	hl,_tmp0
2230  093F  7E          	ld	a, (hl)
2231  0940  D6 07       	sub	a,0x07
2232  0942  D2 DA 0A    	jp	NC, l_player_hit_platform_00142
2233  0945  4E          	ld	c,(hl)
2234  0946  06 00       	ld	b,0x00
2235  0948  21 00 00    	ld	hl,_mush_index
2236  094B  09          	add	hl,bc
2237  094C  4E          	ld	c, (hl)
2238  094D  06 00       	ld	b,0x00
2239  094F  2A 00 00    	ld	hl,(_index1)
2240  0952  AF          	xor	a,a
2241  0953  ED 42       	sbc	hl,bc
2242  0955  C2 D3 0A    	jp	NZ,l_player_hit_platform_00137
2243  0958  3A 07 00    	ld	a,(_lin + 0x0007)
2244  095B  07          	rlca
2245  095C  07          	rlca
2246  095D  07          	rlca
2247  095E  07          	rlca
2248  095F  E6 0F       	and	a,0x0f
2249  0961  07          	rlca
2250  0962  07          	rlca
2251  0963  07          	rlca
2252  0964  07          	rlca
2253  0965  E6 F0       	and	a,0xf0
2254  0967  C6 E0       	add	a,0xe0
2255  0969  32 00 00    	ld	(_s_lin1),a
2256  096C  3A 07 00    	ld	a,(_col + 0x0007)
2257  096F  CB 3F       	srl	a
2258  0971  87          	add	a, a
2259  0972  32 00 00    	ld	(_s_col1),a
2260  0975  21 00 00    	ld	hl,_tmp
2261  0978  36 00       	ld	(hl),0x00
2262  097A              l_player_hit_platform_00120:
2263  097A  21 00 00    	ld	hl,_tmp
2264  097D  7E          	ld	a, (hl)
2265  097E  D6 07       	sub	a,0x07
2266  0980  30 1C       	jr	NC,l_player_hit_platform_00122
2267  0982  4E          	ld	c,(hl)
2268  0983  06 00       	ld	b,0x00
2269  0985  21 00 00    	ld	hl,_mush_index
2270  0988  09          	add	hl,bc
2271  0989  4E          	ld	c, (hl)
2272  098A  06 00       	ld	b,0x00
2273  098C  21 00 00    	ld	hl,_index1
2274  098F  7E          	ld	a, (hl)
2275  0990  91          	sub	a, c
2276  0991  20 05       	jr	NZ,l_player_hit_platform_00262
2277  0993  23          	inc	hl
2278  0994  7E          	ld	a, (hl)
2279  0995  90          	sub	a, b
2280  0996  28 06       	jr	Z,l_player_hit_platform_00122
2281  0998              l_player_hit_platform_00262:
2282  0998  21 00 00    	ld	hl,_tmp
2283  099B  34          	inc	(hl)
2284  099C  18 DC       	jr	l_player_hit_platform_00120
2285  099E              l_player_hit_platform_00122:
2286  099E  2A 00 00    	ld	hl,(_tmp)
2287  09A1  26 00       	ld	h,0x00
2288  09A3  01 00 00    	ld	bc,_mush_class
2289  09A6  09          	add	hl,bc
2290  09A7  7E          	ld	a,(hl)
2291  09A8  FE 78       	cp	a,0x78
2292  09AA  28 18       	jr	Z,l_player_hit_platform_00123
2293  09AC  FE 79       	cp	a,0x79
2294  09AE  28 2F       	jr	Z,l_player_hit_platform_00124
2295  09B0  FE 7A       	cp	a,0x7a
2296  09B2  28 5F       	jr	Z,l_player_hit_platform_00126
2297  09B4  FE 7B       	cp	a,0x7b
2298  09B6  28 41       	jr	Z,l_player_hit_platform_00125
2299  09B8  FE 7C       	cp	a,0x7c
2300  09BA  CA 47 0A    	jp	Z,l_player_hit_platform_00128
2301  09BD  D6 7D       	sub	a,0x7d
2302  09BF  28 6C       	jr	Z,l_player_hit_platform_00127
2303  09C1  C3 5F 0A    	jp	l_player_hit_platform_00129
2304  09C4              l_player_hit_platform_00123:
2305  09C4  2E 02       	ld	l,0x02
2306  09C6  CD 00 00    	call	_zx_border_fastcall
2307  09C9  3A 00 00    	ld	a,(_s_col1)
2308  09CC  21 06 FF    	ld	hl,0xff06
2309  09CF  E5          	push	hl
2310  09D0  F5          	push	af
2311  09D1  33          	inc	sp
2312  09D2  3A 00 00    	ld	a,(_s_lin1)
2313  09D5  F5          	push	af
2314  09D6  33          	inc	sp
2315  09D7  CD 00 00    	call	_enemy_init
2316  09DA  F1          	pop	af
2317  09DB  F1          	pop	af
2318  09DC  C3 5F 0A    	jp	l_player_hit_platform_00129
2319  09DF              l_player_hit_platform_00124:
2320  09DF  2E 02       	ld	l,0x02
2321  09E1  CD 00 00    	call	_zx_border_fastcall
2322  09E4  3A 00 00    	ld	a,(_s_col1)
2323  09E7  21 06 01    	ld	hl,0x0106
2324  09EA  E5          	push	hl
2325  09EB  F5          	push	af
2326  09EC  33          	inc	sp
2327  09ED  3A 00 00    	ld	a,(_s_lin1)
2328  09F0  F5          	push	af
2329  09F1  33          	inc	sp
2330  09F2  CD 00 00    	call	_enemy_init
2331  09F5  F1          	pop	af
2332  09F6  F1          	pop	af
2333  09F7  18 66       	jr	l_player_hit_platform_00129
2334  09F9              l_player_hit_platform_00125:
2335  09F9  2E 01       	ld	l,0x01
2336  09FB  CD 00 00    	call	_zx_border_fastcall
2337  09FE  3A 00 00    	ld	a,(_s_col1)
2338  0A01  21 07 01    	ld	hl,0x0107
2339  0A04  E5          	push	hl
2340  0A05  F5          	push	af
2341  0A06  33          	inc	sp
2342  0A07  3A 00 00    	ld	a,(_s_lin1)
2343  0A0A  F5          	push	af
2344  0A0B  33          	inc	sp
2345  0A0C  CD 00 00    	call	_enemy_init
2346  0A0F  F1          	pop	af
2347  0A10  F1          	pop	af
2348  0A11  18 4C       	jr	l_player_hit_platform_00129
2349  0A13              l_player_hit_platform_00126:
2350  0A13  2E 01       	ld	l,0x01
2351  0A15  CD 00 00    	call	_zx_border_fastcall
2352  0A18  3A 00 00    	ld	a,(_s_col1)
2353  0A1B  21 07 FF    	ld	hl,0xff07
2354  0A1E  E5          	push	hl
2355  0A1F  F5          	push	af
2356  0A20  33          	inc	sp
2357  0A21  3A 00 00    	ld	a,(_s_lin1)
2358  0A24  F5          	push	af
2359  0A25  33          	inc	sp
2360  0A26  CD 00 00    	call	_enemy_init
2361  0A29  F1          	pop	af
2362  0A2A  F1          	pop	af
2363  0A2B  18 32       	jr	l_player_hit_platform_00129
2364  0A2D              l_player_hit_platform_00127:
2365  0A2D  2E 04       	ld	l,0x04
2366  0A2F  CD 00 00    	call	_zx_border_fastcall
2367  0A32  3A 00 00    	ld	a,(_s_col1)
2368  0A35  21 08 01    	ld	hl,0x0108
2369  0A38  E5          	push	hl
2370  0A39  F5          	push	af
2371  0A3A  33          	inc	sp
2372  0A3B  3A 00 00    	ld	a,(_s_lin1)
2373  0A3E  F5          	push	af
2374  0A3F  33          	inc	sp
2375  0A40  CD 00 00    	call	_enemy_init
2376  0A43  F1          	pop	af
2377  0A44  F1          	pop	af
2378  0A45  18 18       	jr	l_player_hit_platform_00129
2379  0A47              l_player_hit_platform_00128:
2380  0A47  2E 04       	ld	l,0x04
2381  0A49  CD 00 00    	call	_zx_border_fastcall
2382  0A4C  3A 00 00    	ld	a,(_s_col1)
2383  0A4F  21 08 FF    	ld	hl,0xff08
2384  0A52  E5          	push	hl
2385  0A53  F5          	push	af
2386  0A54  33          	inc	sp
2387  0A55  3A 00 00    	ld	a,(_s_lin1)
2388  0A58  F5          	push	af
2389  0A59  33          	inc	sp
2390  0A5A  CD 00 00    	call	_enemy_init
2391  0A5D  F1          	pop	af
2392  0A5E  F1          	pop	af
2393  0A5F              l_player_hit_platform_00129:
2394  0A5F  21 00 00    	ld	hl,_game_mush_count
2395  0A62  34          	inc	(hl)
2396  0A63  3A 00 00    	ld	a,(_game_boss)
2397  0A66  B7          	or	a, a
2398  0A67  20 6A       	jr	NZ,l_player_hit_platform_00137
2399  0A69  3A 00 00    	ld	a,(_index1)
2400  0A6C  C6 F0       	add	a,0xf0
2401  0A6E  32 00 00    	ld	(_index0),a
2402  0A71  3A 01 00    	ld	a,(_index1 + 1)
2403  0A74  CE FF       	adc	a,0xff
2404  0A76  21 01 00    	ld	hl,_index0 + 1
2405  0A79  77          	ld	(hl), a
2406  0A7A  3E 00       	ld	a, +((_scr_map) & 0xFF)
2407  0A7C  2B          	dec	hl
2408  0A7D  86          	add	a, (hl)
2409  0A7E  4F          	ld	c, a
2410  0A7F  3E 00       	ld	a, +((_scr_map) / 256)
2411  0A81  23          	inc	hl
2412  0A82  8E          	adc	a, (hl)
2413  0A83  47          	ld	b, a
2414  0A84  C5          	push	bc
2415  0A85  46          	ld	b,(hl)
2416  0A86  2B          	dec	hl
2417  0A87  4E          	ld	c,(hl)
2418  0A88  C5          	push	bc
2419  0A89  CD 00 00    	call	_game_match_back
2420  0A8C  F1          	pop	af
2421  0A8D  C1          	pop	bc
2422  0A8E  7D          	ld	a,l
2423  0A8F  02          	ld	(bc), a
2424  0A90  3E 00       	ld	a, +((_scr_map) & 0xFF)
2425  0A92  21 00 00    	ld	hl,_index1
2426  0A95  86          	add	a, (hl)
2427  0A96  DD 77 FE    	ld	(ix-2),a
2428  0A99  3E 00       	ld	a, +((_scr_map) / 256)
2429  0A9B  23          	inc	hl
2430  0A9C  8E          	adc	a, (hl)
2431  0A9D  DD 77 FF    	ld	(ix-1),a
2432  0AA0  E1          	pop	hl
2433  0AA1  7E          	ld	a,(hl)
2434  0AA2  E5          	push	hl
2435  0AA3  FE 5C       	cp	a,0x5c
2436  0AA5  28 04       	jr	Z,l_player_hit_platform_00130
2437  0AA7  D6 5D       	sub	a,0x5d
2438  0AA9  20 06       	jr	NZ,l_player_hit_platform_00131
2439  0AAB              l_player_hit_platform_00130:
2440  0AAB  E1          	pop	hl
2441  0AAC  E5          	push	hl
2442  0AAD  36 4F       	ld	(hl),0x4f
2443  0AAF  18 04       	jr	l_player_hit_platform_00132
2444  0AB1              l_player_hit_platform_00131:
2445  0AB1  E1          	pop	hl
2446  0AB2  E5          	push	hl
2447  0AB3  36 54       	ld	(hl),0x54
2448  0AB5              l_player_hit_platform_00132:
2449  0AB5  2A 00 00    	ld	hl,(_index1)
2450  0AB8  01 F0 FF    	ld	bc,0xfff0
2451  0ABB  09          	add	hl,bc
2452  0ABC  E5          	push	hl
2453  0ABD  CD 00 00    	call	_game_obj_set
2454  0AC0  F1          	pop	af
2455  0AC1  3A 00 00    	ld	a,(_s_lin1)
2456  0AC4  C6 10       	add	a,0x10
2457  0AC6  4F          	ld	c, a
2458  0AC7  3A 00 00    	ld	a, (_s_col1)
2459  0ACA  47          	ld	b,a
2460  0ACB  C5          	push	bc
2461  0ACC  3E 4F       	ld	a,0x4f
2462  0ACE  F5          	push	af
2463  0ACF  33          	inc	sp
2464  0AD0  CD 00 00    	call	_NIRVANAP_drawT_callee
2465  0AD3              l_player_hit_platform_00137:
2466  0AD3  21 00 00    	ld	hl,_tmp0
2467  0AD6  34          	inc	(hl)
2468  0AD7  C3 3C 09    	jp	l_player_hit_platform_00138
2469  0ADA              l_player_hit_platform_00142:
2470  0ADA  2E 01       	ld	l,0x01
2471  0ADC  CD 00 00    	call	_spr_brick_anim
2472  0ADF  CD 00 00    	call	_sound_hit_brick
2473  0AE2  2E 01       	ld	l,0x01
2474  0AE4  18 02       	jr	l_player_hit_platform_00148
2475  0AE6              l_player_hit_platform_00145:
2476  0AE6  2E 00       	ld	l,0x00
2477  0AE8              l_player_hit_platform_00148:
2478  0AE8  F1          	pop	af
2479  0AE9  DD E1       	pop	ix
2480  0AEB  C9          	ret
2481  0AEC              	SECTION code_compiler
2482  0AEC              ;	---------------------------------
2483  0AEC              ; Function player_hit_platform_clear
2484  0AEC              ; ---------------------------------
2485  0AEC              _player_hit_platform_clear:
2486  0AEC  01 04 00    	ld	bc,0x0004
2487  0AEF  C5          	push	bc
2488  0AF0  2A 0E 00    	ld	hl,(_spr_timer + 0x000e)
2489  0AF3  E5          	push	hl
2490  0AF4  CD 00 00    	call	_game_check_time
2491  0AF7  F1          	pop	af
2492  0AF8  F1          	pop	af
2493  0AF9  7D          	ld	a, l
2494  0AFA  B7          	or	a, a
2495  0AFB  C8          	ret	Z
2496  0AFC  2A FF FF    	ld	hl,(_player_hit_col - 1)
2497  0AFF  3A 00 00    	ld	a,(_player_hit_lin)
2498  0B02  6F          	ld	l,a
2499  0B03  E5          	push	hl
2500  0B04  CD 00 00    	call	_spr_calc_index
2501  0B07  F1          	pop	af
2502  0B08  22 00 00    	ld	(_index1),hl
2503  0B0B  2E 00       	ld	l,0x00
2504  0B0D  CD 00 00    	call	_spr_brick_anim
2505  0B10  21 00 00    	ld	hl,_player_hit_lin
2506  0B13  36 00       	ld	(hl),0x00
2507  0B15  21 00 00    	ld	hl,_player_hit_col
2508  0B18  36 00       	ld	(hl),0x00
2509  0B1A  C9          	ret
2510  0B1B              	SECTION code_compiler
2511  0B1B              ;	---------------------------------
2512  0B1B              ; Function player_score_add
2513  0B1B              ; ---------------------------------
2514  0B1B              _player_score_add:
2515  0B1B  ED 4B 00 00 	ld	bc,(_player_score)
2516  0B1F  09          	add	hl,bc
2517  0B20  22 00 00    	ld	(_player_score),hl
2518  0B23  21 00 00    	ld	hl,_player_lvl
2519  0B26  7E          	ld	a, (hl)
2520  0B27  D6 14       	sub	a,0x14
2521  0B29  30 3C       	jr	NC,l_player_score_add_00104
2522  0B2B  01 00 00    	ld	bc,_player_lvl_table+0
2523  0B2E  6E          	ld	l,(hl)
2524  0B2F  26 00       	ld	h,0x00
2525  0B31  29          	add	hl, hl
2526  0B32  09          	add	hl, bc
2527  0B33  4E          	ld	c, (hl)
2528  0B34  23          	inc	hl
2529  0B35  46          	ld	b, (hl)
2530  0B36  21 00 00    	ld	hl,_player_score
2531  0B39  7E          	ld	a, (hl)
2532  0B3A  91          	sub	a, c
2533  0B3B  23          	inc	hl
2534  0B3C  7E          	ld	a, (hl)
2535  0B3D  98          	sbc	a, b
2536  0B3E  38 27       	jr	C,l_player_score_add_00104
2537  0B40  21 00 00    	ld	hl,_player_lvl
2538  0B43  34          	inc	(hl)
2539  0B44  21 06 00    	ld	hl,___str_1
2540  0B47  E5          	push	hl
2541  0B48  21 0C 0C    	ld	hl,0x0c0c
2542  0B4B  E5          	push	hl
2543  0B4C  CD 00 00    	call	_zx_print_str
2544  0B4F  AF          	xor	a, a
2545  0B50  F5          	push	af
2546  0B51  33          	inc	sp
2547  0B52  21 19 00    	ld	hl,0x0019
2548  0B55  E5          	push	hl
2549  0B56  21 0C 15    	ld	hl,0x150c
2550  0B59  E5          	push	hl
2551  0B5A  3E 0C       	ld	a,0x0c
2552  0B5C  F5          	push	af
2553  0B5D  33          	inc	sp
2554  0B5E  CD 00 00    	call	_game_colour_message
2555  0B61  F1          	pop	af
2556  0B62  F1          	pop	af
2557  0B63  F1          	pop	af
2558  0B64  CD 00 00    	call	_game_update_stats
2559  0B67              l_player_score_add_00104:
2560  0B67  3A 00 00    	ld	a,(_game_score_top)
2561  0B6A  21 00 00    	ld	hl,_player_score
2562  0B6D  96          	sub	a, (hl)
2563  0B6E  3A 01 00    	ld	a,(_game_score_top + 1)
2564  0B71  23          	inc	hl
2565  0B72  9E          	sbc	a, (hl)
2566  0B73  30 06       	jr	NC,l_player_score_add_00106
2567  0B75  2A 00 00    	ld	hl,(_player_score)
2568  0B78  22 00 00    	ld	(_game_score_top),hl
2569  0B7B              l_player_score_add_00106:
2570  0B7B  CD 00 00    	call	_game_print_score
2571  0B7E  C9          	ret
2572  0B7F              	SECTION rodata_compiler
2573  0006              ___str_1:
2574  0006  4C 45 56 45 4C 20 55 50 21 
                        	DEFM "LEVEL UP!"
2575  000F  00          	DEFB 0x00
2576  0010              	SECTION code_compiler
2577  0B7F              ;	---------------------------------
2578  0B7F              ; Function player_check_floor
2579  0B7F              ; ---------------------------------
2580  0B7F              _player_check_floor:
2581  0B7F  CD 00 00    	call	___sdcc_enter_ix
2582  0B82  F5          	push	af
2583  0B83  F5          	push	af
2584  0B84  F5          	push	af
2585  0B85  11 07 00    	ld	de,_col+7
2586  0B88  1A          	ld	a, (de)
2587  0B89  47          	ld	b, a
2588  0B8A  3A 07 00    	ld	a,(_lin + 0x0007)
2589  0B8D  C6 10       	add	a,0x10
2590  0B8F  D5          	push	de
2591  0B90  4F          	ld	c,a
2592  0B91  C5          	push	bc
2593  0B92  CD 00 00    	call	_spr_calc_index
2594  0B95  F1          	pop	af
2595  0B96  D1          	pop	de
2596  0B97  DD 75 FC    	ld	(ix-4),l
2597  0B9A  DD 74 FD    	ld	(ix-3),h
2598  0B9D  01 00 00    	ld	bc,_scr_map+0
2599  0BA0  79          	ld	a, c
2600  0BA1  DD 86 FC    	add	a,(ix-4)
2601  0BA4  DD 77 FE    	ld	(ix-2),a
2602  0BA7  78          	ld	a, b
2603  0BA8  DD 8E FD    	adc	a,(ix-3)
2604  0BAB  DD 6E FE    	ld	l,(ix-2)
2605  0BAE  DD 77 FF    	ld	(ix-1),a
2606  0BB1  67          	ld	h,a
2607  0BB2  7E          	ld	a, (hl)
2608  0BB3  DD 77 FB    	ld	(ix-5),a
2609  0BB6  DD 6E FC    	ld	l,(ix-4)
2610  0BB9  DD 66 FD    	ld	h,(ix-3)
2611  0BBC  23          	inc	hl
2612  0BBD  09          	add	hl,bc
2613  0BBE  3A 00 00    	ld	a,(_s_lin0)
2614  0BC1  D6 90       	sub	a,0x90
2615  0BC3  4D          	ld	c,l
2616  0BC4  44          	ld	b,h
2617  0BC5  20 26       	jr	NZ,l_player_check_floor_00108
2618  0BC7  3A 00 00    	ld	a,(_map_heigth)
2619  0BCA  C5          	push	bc
2620  0BCB  F5          	push	af
2621  0BCC  33          	inc	sp
2622  0BCD  3A 00 00    	ld	a,(_scr_curr)
2623  0BD0  F5          	push	af
2624  0BD1  33          	inc	sp
2625  0BD2  CD 00 00    	call	__divuchar_callee
2626  0BD5  C1          	pop	bc
2627  0BD6  7D          	ld	a,l
2628  0BD7  3C          	inc	a
2629  0BD8  32 00 00    	ld	(_tmp1),a
2630  0BDB  21 00 00    	ld	hl,_map_heigth
2631  0BDE  96          	sub	a, (hl)
2632  0BDF  30 06       	jr	NC,l_player_check_floor_00102
2633  0BE1  DD 36 FB 00 	ld	(ix-5),0x00
2634  0BE5  18 14       	jr	l_player_check_floor_00109
2635  0BE7              l_player_check_floor_00102:
2636  0BE7  DD 36 FB 48 	ld	(ix-5),0x48
2637  0BEB  18 0E       	jr	l_player_check_floor_00109
2638  0BED              l_player_check_floor_00108:
2639  0BED  1A          	ld	a, (de)
2640  0BEE  0F          	rrca
2641  0BEF  38 06       	jr	C,l_player_check_floor_00105
2642  0BF1  DD 36 FA 00 	ld	(ix-6),0x00
2643  0BF5  18 04       	jr	l_player_check_floor_00109
2644  0BF7              l_player_check_floor_00105:
2645  0BF7  0A          	ld	a, (bc)
2646  0BF8  DD 77 FA    	ld	(ix-6),a
2647  0BFB              l_player_check_floor_00109:
2648  0BFB  DD 7E FB    	ld	a,(ix-5)
2649  0BFE  D6 3C       	sub	a,0x3c
2650  0C00  38 07       	jr	C,l_player_check_floor_00132
2651  0C02  DD 7E FB    	ld	a,(ix-5)
2652  0C05  D6 60       	sub	a,0x60
2653  0C07  38 32       	jr	C,l_player_check_floor_00128
2654  0C09              l_player_check_floor_00132:
2655  0C09  DD 7E FA    	ld	a,(ix-6)
2656  0C0C  D6 3C       	sub	a,0x3c
2657  0C0E  38 07       	jr	C,l_player_check_floor_00127
2658  0C10  DD 7E FA    	ld	a,(ix-6)
2659  0C13  D6 60       	sub	a,0x60
2660  0C15  38 24       	jr	C,l_player_check_floor_00128
2661  0C17              l_player_check_floor_00127:
2662  0C17  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
2663  0C1A  36 02       	ld	(hl),0x02
2664  0C1C  21 00 00    	ld	hl,_s_state
2665  0C1F  CB CE       	set	1, (hl)
2666  0C21  2E 00       	ld	l,0x00
2667  0C23  CD BD 03    	call	_player_check_stairs
2668  0C26  3A 00 00    	ld	a,(_player_over_stair)
2669  0C29  B7          	or	a, a
2670  0C2A  C2 D5 0C    	jp	NZ, l_player_check_floor_00133
2671  0C2D  3A 00 00    	ld	a,(_s_lin0)
2672  0C30  D6 90       	sub	a,0x90
2673  0C32  C2 D5 0C    	jp	NZ,l_player_check_floor_00133
2674  0C35  CD 00 00    	call	_spr_page_down
2675  0C38  C3 D5 0C    	jp	l_player_check_floor_00133
2676  0C3B              l_player_check_floor_00128:
2677  0C3B  C5          	push	bc
2678  0C3C  21 10 00    	ld	hl,0x0010
2679  0C3F  E5          	push	hl
2680  0C40  2A 00 00    	ld	hl,(_player_brick_time)
2681  0C43  E5          	push	hl
2682  0C44  CD 00 00    	call	_game_check_time
2683  0C47  F1          	pop	af
2684  0C48  F1          	pop	af
2685  0C49  C1          	pop	bc
2686  0C4A  7D          	ld	a,l
2687  0C4B  B7          	or	a, a
2688  0C4C  CA D5 0C    	jp	Z, l_player_check_floor_00133
2689  0C4F  2A 00 00    	ld	hl,(_curr_time)
2690  0C52  22 00 00    	ld	(_player_brick_time),hl
2691  0C55  DD 7E FB    	ld	a,(ix-5)
2692  0C58  D6 40       	sub	a,0x40
2693  0C5A  20 1A       	jr	NZ,l_player_check_floor_00114
2694  0C5C  C5          	push	bc
2695  0C5D  DD 6E FC    	ld	l,(ix-4)
2696  0C60  DD 66 FD    	ld	h,(ix-3)
2697  0C63  E5          	push	hl
2698  0C64  CD 00 00    	call	_game_match_back
2699  0C67  F1          	pop	af
2700  0C68  C1          	pop	bc
2701  0C69  5D          	ld	e,l
2702  0C6A  DD 6E FE    	ld	l,(ix-2)
2703  0C6D  DD 66 FF    	ld	h,(ix-1)
2704  0C70  73          	ld	(hl), e
2705  0C71  C5          	push	bc
2706  0C72  CD DA 0C    	call	_player_gasta_brick
2707  0C75  C1          	pop	bc
2708  0C76              l_player_check_floor_00114:
2709  0C76  DD 7E FB    	ld	a,(ix-5)
2710  0C79  D6 3F       	sub	a,0x3f
2711  0C7B  20 0D       	jr	NZ,l_player_check_floor_00116
2712  0C7D  DD 6E FE    	ld	l,(ix-2)
2713  0C80  DD 66 FF    	ld	h,(ix-1)
2714  0C83  36 40       	ld	(hl),0x40
2715  0C85  C5          	push	bc
2716  0C86  CD DA 0C    	call	_player_gasta_brick
2717  0C89  C1          	pop	bc
2718  0C8A              l_player_check_floor_00116:
2719  0C8A  DD 7E FB    	ld	a,(ix-5)
2720  0C8D  D6 3E       	sub	a,0x3e
2721  0C8F  20 0D       	jr	NZ,l_player_check_floor_00118
2722  0C91  DD 6E FE    	ld	l,(ix-2)
2723  0C94  DD 66 FF    	ld	h,(ix-1)
2724  0C97  36 3F       	ld	(hl),0x3f
2725  0C99  C5          	push	bc
2726  0C9A  CD DA 0C    	call	_player_gasta_brick
2727  0C9D  C1          	pop	bc
2728  0C9E              l_player_check_floor_00118:
2729  0C9E  DD 7E FA    	ld	a,(ix-6)
2730  0CA1  D6 40       	sub	a,0x40
2731  0CA3  20 14       	jr	NZ,l_player_check_floor_00120
2732  0CA5  C5          	push	bc
2733  0CA6  DD 6E FC    	ld	l,(ix-4)
2734  0CA9  DD 66 FD    	ld	h,(ix-3)
2735  0CAC  E5          	push	hl
2736  0CAD  CD 00 00    	call	_game_match_back
2737  0CB0  F1          	pop	af
2738  0CB1  C1          	pop	bc
2739  0CB2  7D          	ld	a,l
2740  0CB3  02          	ld	(bc), a
2741  0CB4  C5          	push	bc
2742  0CB5  CD DA 0C    	call	_player_gasta_brick
2743  0CB8  C1          	pop	bc
2744  0CB9              l_player_check_floor_00120:
2745  0CB9  DD 7E FA    	ld	a,(ix-6)
2746  0CBC  D6 3F       	sub	a,0x3f
2747  0CBE  20 08       	jr	NZ,l_player_check_floor_00122
2748  0CC0  3E 40       	ld	a,0x40
2749  0CC2  02          	ld	(bc), a
2750  0CC3  C5          	push	bc
2751  0CC4  CD DA 0C    	call	_player_gasta_brick
2752  0CC7  C1          	pop	bc
2753  0CC8              l_player_check_floor_00122:
2754  0CC8  DD 7E FA    	ld	a,(ix-6)
2755  0CCB  D6 3E       	sub	a,0x3e
2756  0CCD  20 06       	jr	NZ,l_player_check_floor_00133
2757  0CCF  3E 3F       	ld	a,0x3f
2758  0CD1  02          	ld	(bc), a
2759  0CD2  CD DA 0C    	call	_player_gasta_brick
2760  0CD5              l_player_check_floor_00133:
2761  0CD5  DD F9       	ld	sp, ix
2762  0CD7  DD E1       	pop	ix
2763  0CD9  C9          	ret
2764  0CDA              	SECTION code_compiler
2765  0CDA              ;	---------------------------------
2766  0CDA              ; Function player_gasta_brick
2767  0CDA              ; ---------------------------------
2768  0CDA              _player_gasta_brick:
2769  0CDA  3A 00 00    	ld	a,(_s_lin0)
2770  0CDD  32 00 00    	ld	(_s_lin1),a
2771  0CE0  3A 00 00    	ld	a,(_s_col0)
2772  0CE3  32 00 00    	ld	(_s_col1),a
2773  0CE6  3A 07 00    	ld	a,(_lin + 0x0007)
2774  0CE9  C6 10       	add	a,0x10
2775  0CEB  32 00 00    	ld	(_s_lin0),a
2776  0CEE  3A 07 00    	ld	a,(_col + 0x0007)
2777  0CF1  32 00 00    	ld	(_s_col0),a
2778  0CF4  CD 00 00    	call	_spr_back_repaint
2779  0CF7  3A 00 00    	ld	a,(_s_lin1)
2780  0CFA  32 00 00    	ld	(_s_lin0),a
2781  0CFD  3A 00 00    	ld	a,(_s_col1)
2782  0D00  32 00 00    	ld	(_s_col0),a
2783  0D03  C9          	ret
2784  0D04              	SECTION code_compiler
2785  0D04              ;	---------------------------------
2786  0D04              ; Function player_move_jump
2787  0D04              ; ---------------------------------
2788  0D04              _player_move_jump:
2789  0D04  CD 00 00    	call	___sdcc_enter_ix
2790  0D07  F5          	push	af
2791  0D08  21 00 00    	ld	hl,_game_gravity
2792  0D0B  4E          	ld	c, (hl)
2793  0D0C  21 00 00    	ld	hl,_player_vel_y
2794  0D0F  7E          	ld	a, (hl)
2795  0D10  81          	add	a, c
2796  0D11  77          	ld	(hl), a
2797  0D12  21 00 00    	ld	hl,_sprite_on_air
2798  0D15  36 01       	ld	(hl),0x01
2799  0D17  3A 00 00    	ld	a,(_player_vel_inc)
2800  0D1A  B7          	or	a, a
2801  0D1B  28 2B       	jr	Z,l_player_move_jump_00107
2802  0D1D  21 00 00    	ld	hl,_dirs
2803  0D20  CB 7E       	bit	7, (hl)
2804  0D22  28 07       	jr	Z,l_player_move_jump_00104
2805  0D24  21 00 00    	ld	hl,_dirs
2806  0D27  CB 46       	bit	0, (hl)
2807  0D29  20 1D       	jr	NZ,l_player_move_jump_00107
2808  0D2B              l_player_move_jump_00104:
2809  0D2B  3A 00 00    	ld	a,(_player_vel_y1)
2810  0D2E  21 00 00    	ld	hl,_player_vel_y
2811  0D31  96          	sub	a, (hl)
2812  0D32  E2 37 0D    	jp	PO, l_player_move_jump_00263
2813  0D35  EE 80       	xor	a,0x80
2814  0D37              l_player_move_jump_00263:
2815  0D37  F2 48 0D    	jp	P, l_player_move_jump_00107
2816  0D3A  21 00 00    	ld	hl,_player_vel_y
2817  0D3D  CB 7E       	bit	7,(hl)
2818  0D3F  28 07       	jr	Z,l_player_move_jump_00107
2819  0D41  36 00       	ld	(hl),0x00
2820  0D43  21 00 00    	ld	hl,_player_vel_inc
2821  0D46  36 00       	ld	(hl),0x00
2822  0D48              l_player_move_jump_00107:
2823  0D48  3E 78       	ld	a,0x78
2824  0D4A  21 00 00    	ld	hl,_player_vel_y
2825  0D4D  96          	sub	a, (hl)
2826  0D4E  E2 53 0D    	jp	PO, l_player_move_jump_00264
2827  0D51  EE 80       	xor	a,0x80
2828  0D53              l_player_move_jump_00264:
2829  0D53  F2 5B 0D    	jp	P, l_player_move_jump_00109
2830  0D56  21 00 00    	ld	hl,_player_vel_y
2831  0D59  36 78       	ld	(hl),0x78
2832  0D5B              l_player_move_jump_00109:
2833  0D5B  21 00 00    	ld	hl,_player_vel_y
2834  0D5E  7E          	ld	a, (hl)
2835  0D5F  EE 80       	xor	a,0x80
2836  0D61  D6 08       	sub	a,0x08
2837  0D63  30 02       	jr	NC,l_player_move_jump_00111
2838  0D65  36 88       	ld	(hl),0x88
2839  0D67              l_player_move_jump_00111:
2840  0D67  21 00 00    	ld	hl,_player_vel_y
2841  0D6A  7E          	ld	a, (hl)
2842  0D6B  DD 77 FE    	ld	(ix-2),a
2843  0D6E  7E          	ld	a, (hl)
2844  0D6F  17          	rla
2845  0D70  9F          	sbc	a, a
2846  0D71  DD 77 FF    	ld	(ix-1),a
2847  0D74  DD 7E FE    	ld	a,(ix-2)
2848  0D77  CB 47       	bit	0,a
2849  0D79  32 00 00    	ld	(_s_lin1),a
2850  0D7C  28 04       	jr	Z,l_player_move_jump_00113
2851  0D7E  21 00 00    	ld	hl,_s_lin1
2852  0D81  35          	dec	(hl)
2853  0D82              l_player_move_jump_00113:
2854  0D82  3A 07 00    	ld	a,(_lin + 0x0007)
2855  0D85  21 00 00    	ld	hl,_s_lin1
2856  0D88  86          	add	a, (hl)
2857  0D89  77          	ld	(hl), a
2858  0D8A  3E 90       	ld	a,0x90
2859  0D8C  96          	sub	a, (hl)
2860  0D8D  30 2B       	jr	NC,l_player_move_jump_00124
2861  0D8F  3E C8       	ld	a,0xc8
2862  0D91  96          	sub	a, (hl)
2863  0D92  30 13       	jr	NC,l_player_move_jump_00121
2864  0D94  CD 00 00    	call	_spr_page_up
2865  0D97  7D          	ld	a, l
2866  0D98  B7          	or	a, a
2867  0D99  28 05       	jr	Z,l_player_move_jump_00115
2868  0D9B  2E 00       	ld	l,0x00
2869  0D9D  C3 18 0F    	jp	l_player_move_jump_00158
2870  0DA0              l_player_move_jump_00115:
2871  0DA0  21 00 00    	ld	hl,_s_lin1
2872  0DA3  36 00       	ld	(hl),0x00
2873  0DA5  18 13       	jr	l_player_move_jump_00124
2874  0DA7              l_player_move_jump_00121:
2875  0DA7  CD 00 00    	call	_spr_page_down
2876  0DAA  7D          	ld	a, l
2877  0DAB  B7          	or	a, a
2878  0DAC  28 07       	jr	Z,l_player_move_jump_00118
2879  0DAE  21 00 00    	ld	hl,_s_lin1
2880  0DB1  36 10       	ld	(hl),0x10
2881  0DB3  18 05       	jr	l_player_move_jump_00124
2882  0DB5              l_player_move_jump_00118:
2883  0DB5  21 00 00    	ld	hl,_s_lin1
2884  0DB8  36 90       	ld	(hl),0x90
2885  0DBA              l_player_move_jump_00124:
2886  0DBA  3A 00 00    	ld	a,(_s_lin0)
2887  0DBD  07          	rlca
2888  0DBE  07          	rlca
2889  0DBF  07          	rlca
2890  0DC0  07          	rlca
2891  0DC1  E6 0F       	and	a,0x0f
2892  0DC3  4F          	ld	c, a
2893  0DC4  DD CB FF 7E 	bit	7,(ix-1)
2894  0DC8  28 62       	jr	Z,l_player_move_jump_00147
2895  0DCA  21 00 00    	ld	hl,_s_state
2896  0DCD  7E          	ld	a,(hl)
2897  0DCE  F6 01       	or	a,0x01
2898  0DD0  E6 FD       	and	a,0xfd
2899  0DD2  77          	ld	(hl),a
2900  0DD3  21 00 00    	ld	hl,_s_lin1
2901  0DD6  46          	ld	b, (hl)
2902  0DD7  79          	ld	a, c
2903  0DD8  90          	sub	a, b
2904  0DD9  20 04       	jr	NZ,l_player_move_jump_00266
2905  0DDB  3E 01       	ld	a,0x01
2906  0DDD  18 01       	jr	l_player_move_jump_00267
2907  0DDF              l_player_move_jump_00266:
2908  0DDF  AF          	xor	a,a
2909  0DE0              l_player_move_jump_00267:
2910  0DE0  EE 01       	xor	a,0x01
2911  0DE2  4F          	ld	c,a
2912  0DE3  B7          	or	a, a
2913  0DE4  28 3D       	jr	Z,l_player_move_jump_00131
2914  0DE6  21 07 00    	ld	hl,+(_col + 0x0007)
2915  0DE9  46          	ld	b, (hl)
2916  0DEA  C5          	push	bc
2917  0DEB  33          	inc	sp
2918  0DEC  3A 00 00    	ld	a,(_s_lin1)
2919  0DEF  F5          	push	af
2920  0DF0  33          	inc	sp
2921  0DF1  CD 00 00    	call	_game_check_map
2922  0DF4  F1          	pop	af
2923  0DF5  7C          	ld	a,h
2924  0DF6  B5          	or	a,l
2925  0DF7  28 21       	jr	Z,l_player_move_jump_00128
2926  0DF9  CD 4B 08    	call	_player_hit_platform
2927  0DFC  7D          	ld	a, l
2928  0DFD  B7          	or	a, a
2929  0DFE  28 12       	jr	Z,l_player_move_jump_00126
2930  0E00  3A 07 00    	ld	a,(_lin + 0x0007)
2931  0E03  07          	rlca
2932  0E04  07          	rlca
2933  0E05  07          	rlca
2934  0E06  07          	rlca
2935  0E07  E6 0F       	and	a,0x0f
2936  0E09  07          	rlca
2937  0E0A  07          	rlca
2938  0E0B  07          	rlca
2939  0E0C  07          	rlca
2940  0E0D  E6 F0       	and	a,0xf0
2941  0E0F  32 07 00    	ld	((_lin + 0x0007)),a
2942  0E12              l_player_move_jump_00126:
2943  0E12  21 00 00    	ld	hl,_player_vel_y
2944  0E15  36 00       	ld	(hl),0x00
2945  0E17  C3 DA 0E    	jp	l_player_move_jump_00148
2946  0E1A              l_player_move_jump_00128:
2947  0E1A  3A 00 00    	ld	a,(_s_lin1)
2948  0E1D  32 07 00    	ld	((_lin + 0x0007)),a
2949  0E20  C3 DA 0E    	jp	l_player_move_jump_00148
2950  0E23              l_player_move_jump_00131:
2951  0E23  3A 00 00    	ld	a,(_s_lin1)
2952  0E26  32 07 00    	ld	((_lin + 0x0007)),a
2953  0E29  C3 DA 0E    	jp	l_player_move_jump_00148
2954  0E2C              l_player_move_jump_00147:
2955  0E2C  21 00 00    	ld	hl,_s_state
2956  0E2F  7E          	ld	a,(hl)
2957  0E30  F6 02       	or	a,0x02
2958  0E32  E6 FE       	and	a,0xfe
2959  0E34  77          	ld	(hl),a
2960  0E35  21 00 00    	ld	hl,_s_lin1
2961  0E38  7E          	ld	a, (hl)
2962  0E39  C6 10       	add	a,0x10
2963  0E3B  77          	ld	(hl),a
2964  0E3C  47          	ld	b,a
2965  0E3D  79          	ld	a, c
2966  0E3E  90          	sub	a, b
2967  0E3F  20 04       	jr	NZ,l_player_move_jump_00268
2968  0E41  3E 01       	ld	a,0x01
2969  0E43  18 01       	jr	l_player_move_jump_00269
2970  0E45              l_player_move_jump_00268:
2971  0E45  AF          	xor	a,a
2972  0E46              l_player_move_jump_00269:
2973  0E46  EE 01       	xor	a,0x01
2974  0E48  4F          	ld	c,a
2975  0E49  B7          	or	a, a
2976  0E4A  CA CD 0E    	jp	Z, l_player_move_jump_00144
2977  0E4D  21 07 00    	ld	hl,+(_col + 0x0007)
2978  0E50  46          	ld	b, (hl)
2979  0E51  C5          	push	bc
2980  0E52  33          	inc	sp
2981  0E53  3A 00 00    	ld	a,(_s_lin1)
2982  0E56  F5          	push	af
2983  0E57  33          	inc	sp
2984  0E58  CD 00 00    	call	_game_check_map
2985  0E5B  F1          	pop	af
2986  0E5C  45          	ld	b, l
2987  0E5D  5C          	ld	e, h
2988  0E5E  21 00 00    	ld	hl,_s_lin1
2989  0E61  7E          	ld	a, (hl)
2990  0E62  C6 F0       	add	a,0xf0
2991  0E64  4F          	ld	c, a
2992  0E65  7B          	ld	a, e
2993  0E66  B0          	or	a,b
2994  0E67  28 58       	jr	Z,l_player_move_jump_00141
2995  0E69  71          	ld	(hl), c
2996  0E6A  2E 00       	ld	l,0x00
2997  0E6C  CD BD 03    	call	_player_check_stairs
2998  0E6F  3A 00 00    	ld	a,(_player_over_stair)
2999  0E72  B7          	or	a, a
3000  0E73  20 05       	jr	NZ,l_player_move_jump_00134
3001  0E75  2E 01       	ld	l,0x01
3002  0E77  CD BD 03    	call	_player_check_stairs
3003  0E7A              l_player_move_jump_00134:
3004  0E7A  3A 00 00    	ld	a,(_player_over_stair)
3005  0E7D  B7          	or	a, a
3006  0E7E  20 2C       	jr	NZ,l_player_move_jump_00139
3007  0E80  21 00 00    	ld	hl,_s_lin1
3008  0E83  7E          	ld	a, (hl)
3009  0E84  07          	rlca
3010  0E85  07          	rlca
3011  0E86  07          	rlca
3012  0E87  07          	rlca
3013  0E88  E6 0F       	and	a,0x0f
3014  0E8A  07          	rlca
3015  0E8B  07          	rlca
3016  0E8C  07          	rlca
3017  0E8D  07          	rlca
3018  0E8E  E6 F0       	and	a,0xf0
3019  0E90  77          	ld	(hl), a
3020  0E91  21 07 00    	ld	hl,+(_lin + 0x0007)
3021  0E94  4E          	ld	c, (hl)
3022  0E95  21 00 00    	ld	hl,_s_lin1
3023  0E98  7E          	ld	a, (hl)
3024  0E99  91          	sub	a, c
3025  0E9A  30 0A       	jr	NC,l_player_move_jump_00136
3026  0E9C  7E          	ld	a, (hl)
3027  0E9D  C6 10       	add	a,0x10
3028  0E9F  32 07 00    	ld	((_lin + 0x0007)),a
3029  0EA2  2E 00       	ld	l,0x00
3030  0EA4  18 72       	jr	l_player_move_jump_00158
3031  0EA6              l_player_move_jump_00136:
3032  0EA6  3A 00 00    	ld	a,(_s_lin1)
3033  0EA9  32 07 00    	ld	((_lin + 0x0007)),a
3034  0EAC              l_player_move_jump_00139:
3035  0EAC  21 00 00    	ld	hl,_player_vel_y
3036  0EAF  36 00       	ld	(hl),0x00
3037  0EB1  21 00 00    	ld	hl,_s_state
3038  0EB4  7E          	ld	a,(hl)
3039  0EB5  E6 FC       	and	a,+(0xfd&0xfe)
3040  0EB7  77          	ld	(hl),a
3041  0EB8  21 07 00    	ld	hl, +(_colint + 0x0007)
3042  0EBB  36 00       	ld	(hl),0x00
3043  0EBD  2E 01       	ld	l,0x01
3044  0EBF  18 57       	jr	l_player_move_jump_00158
3045  0EC1              l_player_move_jump_00141:
3046  0EC1  21 00 00    	ld	hl,_s_lin1
3047  0EC4  71          	ld	(hl), c
3048  0EC5  3A 00 00    	ld	a,(_s_lin1)
3049  0EC8  32 07 00    	ld	((_lin + 0x0007)),a
3050  0ECB  18 0D       	jr	l_player_move_jump_00148
3051  0ECD              l_player_move_jump_00144:
3052  0ECD  21 00 00    	ld	hl,_s_lin1
3053  0ED0  7E          	ld	a, (hl)
3054  0ED1  C6 F0       	add	a,0xf0
3055  0ED3  77          	ld	(hl), a
3056  0ED4  3A 00 00    	ld	a,(_s_lin1)
3057  0ED7  32 07 00    	ld	((_lin + 0x0007)),a
3058  0EDA              l_player_move_jump_00148:
3059  0EDA  21 00 00    	ld	hl,_s_state
3060  0EDD  CB 5E       	bit	3, (hl)
3061  0EDF  20 27       	jr	NZ,l_player_move_jump_00154
3062  0EE1  21 00 00    	ld	hl,_s_state
3063  0EE4  CB 56       	bit	2, (hl)
3064  0EE6  20 20       	jr	NZ,l_player_move_jump_00154
3065  0EE8  21 00 00    	ld	hl,_dirs
3066  0EEB  CB 56       	bit	2, (hl)
3067  0EED  28 09       	jr	Z,l_player_move_jump_00150
3068  0EEF  21 00 00    	ld	hl,_s_state
3069  0EF2  7E          	ld	a,(hl)
3070  0EF3  F6 08       	or	a,0x08
3071  0EF5  E6 FB       	and	a,0xfb
3072  0EF7  77          	ld	(hl),a
3073  0EF8              l_player_move_jump_00150:
3074  0EF8  21 00 00    	ld	hl,_dirs
3075  0EFB  CB 5E       	bit	3, (hl)
3076  0EFD  28 09       	jr	Z,l_player_move_jump_00154
3077  0EFF  21 00 00    	ld	hl,_s_state
3078  0F02  7E          	ld	a,(hl)
3079  0F03  F6 04       	or	a,0x04
3080  0F05  E6 F7       	and	a,0xf7
3081  0F07  77          	ld	(hl),a
3082  0F08              l_player_move_jump_00154:
3083  0F08  CD 00 00    	call	_spr_move_horizontal
3084  0F0B  7D          	ld	a, l
3085  0F0C  B7          	or	a, a
3086  0F0D  28 07       	jr	Z,l_player_move_jump_00157
3087  0F0F  21 00 00    	ld	hl,_s_state
3088  0F12  7E          	ld	a,(hl)
3089  0F13  E6 F3       	and	a,+(0xf7&0xfb)
3090  0F15  77          	ld	(hl),a
3091  0F16              l_player_move_jump_00157:
3092  0F16  2E 00       	ld	l,0x00
3093  0F18              l_player_move_jump_00158:
3094  0F18  F1          	pop	af
3095  0F19  DD E1       	pop	ix
3096  0F1B  C9          	ret
3097  0F1C              	SECTION code_compiler
3098  0F1C              ;	---------------------------------
3099  0F1C              ; Function player_open_door
3100  0F1C              ; ---------------------------------
3101  0F1C              _player_open_door:
3102  0F1C  CD 00 00    	call	___sdcc_enter_ix
3103  0F1F  0E 00       	ld	c,0x00
3104  0F21  DD 7E 06    	ld	a,(ix+6)
3105  0F24  D6 48       	sub	a,0x48
3106  0F26  28 17       	jr	Z,l_player_open_door_00101
3107  0F28  DD 7E 06    	ld	a,(ix+6)
3108  0F2B  D6 49       	sub	a,0x49
3109  0F2D  28 1F       	jr	Z,l_player_open_door_00104
3110  0F2F  DD 7E 06    	ld	a,(ix+6)
3111  0F32  D6 4A       	sub	a,0x4a
3112  0F34  28 27       	jr	Z,l_player_open_door_00107
3113  0F36  DD 7E 06    	ld	a,(ix+6)
3114  0F39  D6 4B       	sub	a,0x4b
3115  0F3B  28 2F       	jr	Z,l_player_open_door_00110
3116  0F3D  18 3A       	jr	l_player_open_door_00113
3117  0F3F              l_player_open_door_00101:
3118  0F3F  3A 00 00    	ld	a,(_player_keys)
3119  0F42  B7          	or	a, a
3120  0F43  28 34       	jr	Z,l_player_open_door_00113
3121  0F45  2E 07       	ld	l,0x07
3122  0F47  CD 00 00    	call	_zx_border_fastcall
3123  0F4A  0E 01       	ld	c,0x01
3124  0F4C  18 2B       	jr	l_player_open_door_00113
3125  0F4E              l_player_open_door_00104:
3126  0F4E  3A 01 00    	ld	a,(_player_keys + 0x0001)
3127  0F51  B7          	or	a, a
3128  0F52  28 25       	jr	Z,l_player_open_door_00113
3129  0F54  2E 02       	ld	l,0x02
3130  0F56  CD 00 00    	call	_zx_border_fastcall
3131  0F59  0E 01       	ld	c,0x01
3132  0F5B  18 1C       	jr	l_player_open_door_00113
3133  0F5D              l_player_open_door_00107:
3134  0F5D  3A 02 00    	ld	a,(_player_keys + 0x0002)
3135  0F60  B7          	or	a, a
3136  0F61  28 16       	jr	Z,l_player_open_door_00113
3137  0F63  2E 04       	ld	l,0x04
3138  0F65  CD 00 00    	call	_zx_border_fastcall
3139  0F68  0E 01       	ld	c,0x01
3140  0F6A  18 0D       	jr	l_player_open_door_00113
3141  0F6C              l_player_open_door_00110:
3142  0F6C  3A 03 00    	ld	a,(_player_keys + 0x0003)
3143  0F6F  B7          	or	a, a
3144  0F70  28 07       	jr	Z,l_player_open_door_00113
3145  0F72  2E 05       	ld	l,0x05
3146  0F74  CD 00 00    	call	_zx_border_fastcall
3147  0F77  0E 01       	ld	c,0x01
3148  0F79              l_player_open_door_00113:
3149  0F79  79          	ld	a, c
3150  0F7A  B7          	or	a, a
3151  0F7B  20 06       	jr	NZ,l_player_open_door_00114
3152  0F7D  3A 00 00    	ld	a,(_game_inmune)
3153  0F80  B7          	or	a, a
3154  0F81  28 31       	jr	Z,l_player_open_door_00117
3155  0F83              l_player_open_door_00114:
3156  0F83  3E 00       	ld	a, +((_scr_map) & 0xFF)
3157  0F85  DD 86 04    	add	a,(ix+4)
3158  0F88  4F          	ld	c, a
3159  0F89  3E 00       	ld	a, +((_scr_map) / 256)
3160  0F8B  DD 8E 05    	adc	a,(ix+5)
3161  0F8E  47          	ld	b, a
3162  0F8F  C5          	push	bc
3163  0F90  DD 6E 04    	ld	l,(ix+4)
3164  0F93  DD 66 05    	ld	h,(ix+5)
3165  0F96  E5          	push	hl
3166  0F97  CD 00 00    	call	_game_match_back
3167  0F9A  F1          	pop	af
3168  0F9B  C1          	pop	bc
3169  0F9C  7D          	ld	a,l
3170  0F9D  02          	ld	(bc), a
3171  0F9E  DD 6E 04    	ld	l,(ix+4)
3172  0FA1  DD 66 05    	ld	h,(ix+5)
3173  0FA4  E5          	push	hl
3174  0FA5  CD 00 00    	call	_game_obj_set
3175  0FA8  F1          	pop	af
3176  0FA9  DD 6E 04    	ld	l,(ix+4)
3177  0FAC  DD 66 05    	ld	h,(ix+5)
3178  0FAF  E5          	push	hl
3179  0FB0  CD 00 00    	call	_spr_draw_index
3180  0FB3  F1          	pop	af
3181  0FB4              l_player_open_door_00117:
3182  0FB4  DD E1       	pop	ix
3183  0FB6  C9          	ret
3184  0FB7              	SECTION code_compiler
3185  0FB7              ;	---------------------------------
3186  0FB7              ; Function player_lost_life
3187  0FB7              ; ---------------------------------
3188  0FB7              _player_lost_life:
3189  0FB7  CD 00 00    	call	___sdcc_enter_ix
3190  0FBA  3B          	dec	sp
3191  0FBB  3A 07 00    	ld	a,(_lin + 0x0007)
3192  0FBE  32 00 00    	ld	(_s_lin0),a
3193  0FC1  3A 07 00    	ld	a,(_col + 0x0007)
3194  0FC4  32 00 00    	ld	(_s_col0),a
3195  0FC7  CD 00 00    	call	_spr_init_anim_bullets
3196  0FCA  01 00 00    	ld	bc,_anim_lin+0
3197  0FCD  16 00       	ld	d,0x00
3198  0FCF              l_player_lost_life_00116:
3199  0FCF  C5          	push	bc
3200  0FD0  D5          	push	de
3201  0FD1  21 00 00    	ld	hl,0x0000
3202  0FD4  E5          	push	hl
3203  0FD5  AF          	xor	a, a
3204  0FD6  5A          	ld	e,d
3205  0FD7  57          	ld	d,a
3206  0FD8  D5          	push	de
3207  0FD9  CD 00 00    	call	_NIRVANAP_spriteT_callee
3208  0FDC  D1          	pop	de
3209  0FDD  C1          	pop	bc
3210  0FDE  6A          	ld	l,d
3211  0FDF  26 00       	ld	h,0x00
3212  0FE1  09          	add	hl, bc
3213  0FE2  36 FF       	ld	(hl),0xff
3214  0FE4  14          	inc	d
3215  0FE5  7A          	ld	a, d
3216  0FE6  D6 08       	sub	a,0x08
3217  0FE8  38 E5       	jr	C,l_player_lost_life_00116
3218  0FEA  21 00 00    	ld	hl,_anim_count
3219  0FED  36 00       	ld	(hl),0x00
3220  0FEF  76          	halt
3221  0FF0  3A 00 00    	ld	a,(_s_lin0)
3222  0FF3  C6 F0       	add	a,0xf0
3223  0FF5  47          	ld	b, a
3224  0FF6  3A 00 00    	ld	a,(_s_col0)
3225  0FF9  21 00 00    	ld	hl,0x0000
3226  0FFC  E5          	push	hl
3227  0FFD  21 87 03    	ld	hl,0x0387
3228  1000  E5          	push	hl
3229  1001  48          	ld	c,b
3230  1002  47          	ld	b,a
3231  1003  C5          	push	bc
3232  1004  CD 00 00    	call	_spr_add_anim
3233  1007  F1          	pop	af
3234  1008  F1          	pop	af
3235  1009  F1          	pop	af
3236  100A  21 00 00    	ld	hl,_s_col0
3237  100D  46          	ld	b, (hl)
3238  100E  05          	dec	b
3239  100F  05          	dec	b
3240  1010  21 00 00    	ld	hl,0x0000
3241  1013  E5          	push	hl
3242  1014  21 87 03    	ld	hl,0x0387
3243  1017  E5          	push	hl
3244  1018  C5          	push	bc
3245  1019  33          	inc	sp
3246  101A  3A 00 00    	ld	a,(_s_lin0)
3247  101D  F5          	push	af
3248  101E  33          	inc	sp
3249  101F  CD 00 00    	call	_spr_add_anim
3250  1022  F1          	pop	af
3251  1023  F1          	pop	af
3252  1024  21 00 00    	ld	hl,0x0000
3253  1027  E3          	ex	(sp),hl
3254  1028  3A 00 00    	ld	a,(_s_col0)
3255  102B  21 87 03    	ld	hl,0x0387
3256  102E  E5          	push	hl
3257  102F  F5          	push	af
3258  1030  33          	inc	sp
3259  1031  3A 00 00    	ld	a,(_s_lin0)
3260  1034  F5          	push	af
3261  1035  33          	inc	sp
3262  1036  CD 00 00    	call	_spr_add_anim
3263  1039  F1          	pop	af
3264  103A  F1          	pop	af
3265  103B  F1          	pop	af
3266  103C  21 00 00    	ld	hl,_s_col0
3267  103F  46          	ld	b, (hl)
3268  1040  04          	inc	b
3269  1041  04          	inc	b
3270  1042  21 00 00    	ld	hl,0x0000
3271  1045  E5          	push	hl
3272  1046  21 87 03    	ld	hl,0x0387
3273  1049  E5          	push	hl
3274  104A  C5          	push	bc
3275  104B  33          	inc	sp
3276  104C  3A 00 00    	ld	a,(_s_lin0)
3277  104F  F5          	push	af
3278  1050  33          	inc	sp
3279  1051  CD 00 00    	call	_spr_add_anim
3280  1054  F1          	pop	af
3281  1055  F1          	pop	af
3282  1056  F1          	pop	af
3283  1057  3A 00 00    	ld	a,(_s_lin0)
3284  105A  C6 10       	add	a,0x10
3285  105C  47          	ld	b, a
3286  105D  3A 00 00    	ld	a,(_s_col0)
3287  1060  21 00 00    	ld	hl,0x0000
3288  1063  E5          	push	hl
3289  1064  21 87 03    	ld	hl,0x0387
3290  1067  E5          	push	hl
3291  1068  48          	ld	c,b
3292  1069  47          	ld	b,a
3293  106A  C5          	push	bc
3294  106B  CD 00 00    	call	_spr_add_anim
3295  106E  F1          	pop	af
3296  106F  F1          	pop	af
3297  1070  F1          	pop	af
3298  1071  2E 00       	ld	l,0x00
3299  1073  CD 00 00    	call	_zx_border_fastcall
3300  1076  DD 36 FF 01 	ld	(ix-1),0x01
3301  107A  2A 00 00    	ld	hl,(_curr_time)
3302  107D  22 00 00    	ld	(_anim_time),hl
3303  1080              l_player_lost_life_00107:
3304  1080  DD 7E FF    	ld	a,(ix-1)
3305  1083  B7          	or	a, a
3306  1084  28 28       	jr	Z,l_player_lost_life_00109
3307  1086  21 0C 00    	ld	hl,0x000c
3308  1089  E5          	push	hl
3309  108A  2A 00 00    	ld	hl,(_anim_time)
3310  108D  E5          	push	hl
3311  108E  CD 00 00    	call	_game_check_time
3312  1091  F1          	pop	af
3313  1092  F1          	pop	af
3314  1093  7D          	ld	a, l
3315  1094  B7          	or	a, a
3316  1095  28 E9       	jr	Z,l_player_lost_life_00107
3317  1097  2A 00 00    	ld	hl,(_curr_time)
3318  109A  22 00 00    	ld	(_anim_time),hl
3319  109D  3A 00 00    	ld	a,(_anim_count)
3320  10A0  B7          	or	a,a
3321  10A1  28 05       	jr	Z,l_player_lost_life_00103
3322  10A3  CD 00 00    	call	_spr_play_anim
3323  10A6  18 D8       	jr	l_player_lost_life_00107
3324  10A8              l_player_lost_life_00103:
3325  10A8  DD 36 FF 00 	ld	(ix-1),0x00
3326  10AC  18 D2       	jr	l_player_lost_life_00107
3327  10AE              l_player_lost_life_00109:
3328  10AE  21 00 00    	ld	hl,_sprite
3329  10B1  36 00       	ld	(hl),0x00
3330  10B3              l_player_lost_life_00118:
3331  10B3  3A 07 00    	ld	a,(_class + 0x0007)
3332  10B6  B7          	or	a, a
3333  10B7  28 1F       	jr	Z,l_player_lost_life_00111
3334  10B9  21 07 00    	ld	hl,+(_col + 0x0007)
3335  10BC  4E          	ld	c, (hl)
3336  10BD  21 07 00    	ld	hl,+(_lin + 0x0007)
3337  10C0  56          	ld	d, (hl)
3338  10C1  21 07 00    	ld	hl,+(_tile + 0x0007)
3339  10C4  5E          	ld	e, (hl)
3340  10C5  21 07 00    	ld	hl,+(_colint + 0x0007)
3341  10C8  46          	ld	b, (hl)
3342  10C9  7B          	ld	a, e
3343  10CA  80          	add	a, b
3344  10CB  5F          	ld	e, a
3345  10CC  79          	ld	a, c
3346  10CD  F5          	push	af
3347  10CE  33          	inc	sp
3348  10CF  3A 00 00    	ld	a,(_sprite)
3349  10D2  D5          	push	de
3350  10D3  F5          	push	af
3351  10D4  33          	inc	sp
3352  10D5  CD 00 00    	call	_NIRVANAP_spriteT_callee
3353  10D8              l_player_lost_life_00111:
3354  10D8  21 07 00    	ld	hl, +(_class + 0x0007)
3355  10DB  36 00       	ld	(hl),0x00
3356  10DD  21 07 00    	ld	hl, +(_bullet_col + 0x0007)
3357  10E0  36 FF       	ld	(hl),0xff
3358  10E2  21 00 00    	ld	hl,_sprite
3359  10E5  7E          	ld	a,(hl)
3360  10E6  3C          	inc	a
3361  10E7  77          	ld	(hl),a
3362  10E8  D6 07       	sub	a,0x07
3363  10EA  38 C7       	jr	C,l_player_lost_life_00118
3364  10EC  21 00 00    	ld	hl,_player_lives
3365  10EF  35          	dec	(hl)
3366  10F0  21 00 00    	ld	hl,_player_mana
3367  10F3  36 64       	ld	(hl),0x64
3368  10F5  21 00 00    	ld	hl,_player_vita
3369  10F8  36 64       	ld	(hl),0x64
3370  10FA  3A 00 00    	ld	a,(_player_lives)
3371  10FD  B7          	or	a, a
3372  10FE  28 0B       	jr	Z,l_player_lost_life_00114
3373  1100  21 F4 01    	ld	hl,0x01f4
3374  1103  CD 00 00    	call	_z80_delay_ms_fastcall
3375  1106  CD 00 00    	call	_game_round_init
3376  1109  18 0A       	jr	l_player_lost_life_00120
3377  110B              l_player_lost_life_00114:
3378  110B  21 00 00    	ld	hl,_player_lives
3379  110E  36 00       	ld	(hl),0x00
3380  1110  21 00 00    	ld	hl,_game_over
3381  1113  36 01       	ld	(hl),0x01
3382  1115              l_player_lost_life_00120:
3383  1115  33          	inc	sp
3384  1116  DD E1       	pop	ix
3385  1118  C9          	ret
3386  1119              	SECTION code_compiler
3387  1119              ;	---------------------------------
3388  1119              ; Function player_hit
3389  1119              ; ---------------------------------
3390  1119              _player_hit:
3391  1119  7D          	ld	a,l
3392  111A  4D          	ld	c,l
3393  111B  21 00 00    	ld	hl,_player_vita
3394  111E  96          	sub	a, (hl)
3395  111F  30 17       	jr	NC,l_player_hit_00104
3396  1121  3A 00 00    	ld	a,(_game_inmune)
3397  1124  B7          	or	a, a
3398  1125  20 06       	jr	NZ,l_player_hit_00102
3399  1127  21 00 00    	ld	hl,_player_vita
3400  112A  7E          	ld	a, (hl)
3401  112B  91          	sub	a, c
3402  112C  77          	ld	(hl), a
3403  112D              l_player_hit_00102:
3404  112D  2A 00 00    	ld	hl,(_curr_time)
3405  1130  22 00 00    	ld	(_player_hit_time),hl
3406  1133  CD 00 00    	call	_game_update_stats
3407  1136  18 0B       	jr	l_player_hit_00106
3408  1138              l_player_hit_00104:
3409  1138  21 00 00    	ld	hl,_player_vita
3410  113B  36 00       	ld	(hl),0x00
3411  113D  CD 00 00    	call	_game_update_stats
3412  1140  CD B7 0F    	call	_player_lost_life
3413  1143              l_player_hit_00106:
3414  1143  C9          	ret
3415  1144              	SECTION IGNORE
3416  0000              
