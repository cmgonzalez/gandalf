1     0000              MODULE game_player_c
2     0000              
3     0000              ;--------------------------------------------------------
4     0000              ; File Created by SDCC : free open source ANSI-C Compiler
5     0000              ; Version 3.6.5 #9958 (Mac OS X i386)
6     0000              ;--------------------------------------------------------
7     0000              ; Processed by Z88DK
8     0000              ;--------------------------------------------------------
9     0000              
10    0000              	EXTERN __divschar
11    0000              	EXTERN __divschar_callee
12    0000              	EXTERN __divsint
13    0000              	EXTERN __divsint_callee
14    0000              	EXTERN __divslong
15    0000              	EXTERN __divslong_callee
16    0000              	EXTERN __divslonglong
17    0000              	EXTERN __divslonglong_callee
18    0000              	EXTERN __divsuchar
19    0000              	EXTERN __divsuchar_callee
20    0000              	EXTERN __divuchar
21    0000              	EXTERN __divuchar_callee
22    0000              	EXTERN __divuint
23    0000              	EXTERN __divuint_callee
24    0000              	EXTERN __divulong
25    0000              	EXTERN __divulong_callee
26    0000              	EXTERN __divulonglong
27    0000              	EXTERN __divulonglong_callee
28    0000              	EXTERN __divuschar
29    0000              	EXTERN __divuschar_callee
30    0000              	EXTERN __modschar
31    0000              	EXTERN __modschar_callee
32    0000              	EXTERN __modsint
33    0000              	EXTERN __modsint_callee
34    0000              	EXTERN __modslong
35    0000              	EXTERN __modslong_callee
36    0000              	EXTERN __modslonglong
37    0000              	EXTERN __modslonglong_callee
38    0000              	EXTERN __modsuchar
39    0000              	EXTERN __modsuchar_callee
40    0000              	EXTERN __moduchar
41    0000              	EXTERN __moduchar_callee
42    0000              	EXTERN __moduint
43    0000              	EXTERN __moduint_callee
44    0000              	EXTERN __modulong
45    0000              	EXTERN __modulong_callee
46    0000              	EXTERN __modulonglong
47    0000              	EXTERN __modulonglong_callee
48    0000              	EXTERN __moduschar
49    0000              	EXTERN __moduschar_callee
50    0000              	EXTERN __mulint
51    0000              	EXTERN __mulint_callee
52    0000              	EXTERN __mullong
53    0000              	EXTERN __mullong_callee
54    0000              	EXTERN __mullonglong
55    0000              	EXTERN __mullonglong_callee
56    0000              	EXTERN __mulschar
57    0000              	EXTERN __mulschar_callee
58    0000              	EXTERN __mulsuchar
59    0000              	EXTERN __mulsuchar_callee
60    0000              	EXTERN __muluschar
61    0000              	EXTERN __muluschar_callee
62    0000              	EXTERN __rlslonglong
63    0000              	EXTERN __rlslonglong_callee
64    0000              	EXTERN __rlulonglong
65    0000              	EXTERN __rlulonglong_callee
66    0000              	EXTERN __rrslonglong
67    0000              	EXTERN __rrslonglong_callee
68    0000              	EXTERN __rrulonglong
69    0000              	EXTERN __rrulonglong_callee
70    0000              	EXTERN ___sdcc_call_hl
71    0000              	EXTERN ___sdcc_call_iy
72    0000              	EXTERN ___sdcc_enter_ix
73    0000              	EXTERN _banked_call
74    0000              	EXTERN _banked_ret
75    0000              	EXTERN ___fs2schar
76    0000              	EXTERN ___fs2schar_callee
77    0000              	EXTERN ___fs2sint
78    0000              	EXTERN ___fs2sint_callee
79    0000              	EXTERN ___fs2slong
80    0000              	EXTERN ___fs2slong_callee
81    0000              	EXTERN ___fs2slonglong
82    0000              	EXTERN ___fs2slonglong_callee
83    0000              	EXTERN ___fs2uchar
84    0000              	EXTERN ___fs2uchar_callee
85    0000              	EXTERN ___fs2uint
86    0000              	EXTERN ___fs2uint_callee
87    0000              	EXTERN ___fs2ulong
88    0000              	EXTERN ___fs2ulong_callee
89    0000              	EXTERN ___fs2ulonglong
90    0000              	EXTERN ___fs2ulonglong_callee
91    0000              	EXTERN ___fsadd
92    0000              	EXTERN ___fsadd_callee
93    0000              	EXTERN ___fsdiv
94    0000              	EXTERN ___fsdiv_callee
95    0000              	EXTERN ___fseq
96    0000              	EXTERN ___fseq_callee
97    0000              	EXTERN ___fsgt
98    0000              	EXTERN ___fsgt_callee
99    0000              	EXTERN ___fslt
100   0000              	EXTERN ___fslt_callee
101   0000              	EXTERN ___fsmul
102   0000              	EXTERN ___fsmul_callee
103   0000              	EXTERN ___fsneq
104   0000              	EXTERN ___fsneq_callee
105   0000              	EXTERN ___fssub
106   0000              	EXTERN ___fssub_callee
107   0000              	EXTERN ___schar2fs
108   0000              	EXTERN ___schar2fs_callee
109   0000              	EXTERN ___sint2fs
110   0000              	EXTERN ___sint2fs_callee
111   0000              	EXTERN ___slong2fs
112   0000              	EXTERN ___slong2fs_callee
113   0000              	EXTERN ___slonglong2fs
114   0000              	EXTERN ___slonglong2fs_callee
115   0000              	EXTERN ___uchar2fs
116   0000              	EXTERN ___uchar2fs_callee
117   0000              	EXTERN ___uint2fs
118   0000              	EXTERN ___uint2fs_callee
119   0000              	EXTERN ___ulong2fs
120   0000              	EXTERN ___ulong2fs_callee
121   0000              	EXTERN ___ulonglong2fs
122   0000              	EXTERN ___ulonglong2fs_callee
123   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
126   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
127   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
128   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
129   0000              	EXTERN ____sdcc_4_ldi_save_bc
130   0000              	EXTERN ____sdcc_4_push_hlix
131   0000              	EXTERN ____sdcc_4_push_mhl
132   0000              	EXTERN ____sdcc_lib_setmem_hl
133   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
134   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
135   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
136   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
137   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
138   0000              	EXTERN ____sdcc_ll_add_deix_hlix
139   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
140   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
141   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
142   0000              	EXTERN ____sdcc_ll_asr_hlix_a
143   0000              	EXTERN ____sdcc_ll_asr_mbc_a
144   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
145   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
146   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
147   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
148   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
149   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
150   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
151   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
152   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
153   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
155   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
156   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
157   0000              	EXTERN ____sdcc_ll_push_hlix
158   0000              	EXTERN ____sdcc_ll_push_mhl
159   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
160   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
161   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
162   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
163   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
164   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
165   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
166   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
167   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
168   0000              	EXTERN ____sdcc_load_debc_deix
169   0000              	EXTERN ____sdcc_load_dehl_deix
170   0000              	EXTERN ____sdcc_load_debc_mhl
171   0000              	EXTERN ____sdcc_load_hlde_mhl
172   0000              	EXTERN ____sdcc_store_dehl_bcix
173   0000              	EXTERN ____sdcc_store_debc_hlix
174   0000              	EXTERN ____sdcc_store_debc_mhl
175   0000              	EXTERN ____sdcc_cpu_pop_ei
176   0000              	EXTERN ____sdcc_cpu_pop_ei_jp
177   0000              	EXTERN ____sdcc_cpu_push_di
178   0000              	EXTERN ____sdcc_outi
179   0000              	EXTERN ____sdcc_outi_128
180   0000              	EXTERN ____sdcc_outi_256
181   0000              	EXTERN ____sdcc_ldi
182   0000              	EXTERN ____sdcc_ldi_128
183   0000              	EXTERN ____sdcc_ldi_256
184   0000              
185   0000              ;--------------------------------------------------------
186   0000              ; Public variables in this module
187   0000              ;--------------------------------------------------------
188   0000              	GLOBAL _player_check_map
189   0000              	GLOBAL _player_init
190   0000              	GLOBAL _player_check_input
191   0000              	GLOBAL _player_collision
192   0000              	GLOBAL _player_kill
193   0000              	GLOBAL _player_restart
194   0000              	GLOBAL _player_turn
195   0000              	GLOBAL _player_move
196   0000              	GLOBAL _player_check_stairs_down
197   0000              	GLOBAL _player_check_stairs
198   0000              	GLOBAL _player_tile
199   0000              	GLOBAL _player_move_input
200   0000              	GLOBAL _player_fire
201   0000              	GLOBAL _player_pick_item
202   0000              	GLOBAL _player_hit_platform
203   0000              	GLOBAL _player_hit_platform_clear
204   0000              	GLOBAL _player_score_add
205   0000              	GLOBAL _player_check_floor
206   0000              	GLOBAL _player_move_jump
207   0000              	GLOBAL _player_open_door
208   0000              	GLOBAL _player_lost_life
209   0000              	GLOBAL _player_hit
210   0000              ;--------------------------------------------------------
211   0000              ; Externals used
212   0000              ;--------------------------------------------------------
213   0000              	GLOBAL _ulltoa_callee
214   0000              	GLOBAL _ulltoa
215   0000              	GLOBAL _strtoull_callee
216   0000              	GLOBAL _strtoull
217   0000              	GLOBAL _strtoll_callee
218   0000              	GLOBAL _strtoll
219   0000              	GLOBAL _lltoa_callee
220   0000              	GLOBAL _lltoa
221   0000              	GLOBAL _llabs_callee
222   0000              	GLOBAL _llabs
223   0000              	GLOBAL __lldivu__callee
224   0000              	GLOBAL __lldivu_
225   0000              	GLOBAL __lldiv__callee
226   0000              	GLOBAL __lldiv_
227   0000              	GLOBAL _atoll_callee
228   0000              	GLOBAL _atoll
229   0000              	GLOBAL _realloc_unlocked_callee
230   0000              	GLOBAL _realloc_unlocked
231   0000              	GLOBAL _malloc_unlocked_fastcall
232   0000              	GLOBAL _malloc_unlocked
233   0000              	GLOBAL _free_unlocked_fastcall
234   0000              	GLOBAL _free_unlocked
235   0000              	GLOBAL _calloc_unlocked_callee
236   0000              	GLOBAL _calloc_unlocked
237   0000              	GLOBAL _aligned_alloc_unlocked_callee
238   0000              	GLOBAL _aligned_alloc_unlocked
239   0000              	GLOBAL _realloc_callee
240   0000              	GLOBAL _realloc
241   0000              	GLOBAL _malloc_fastcall
242   0000              	GLOBAL _malloc
243   0000              	GLOBAL _free_fastcall
244   0000              	GLOBAL _free
245   0000              	GLOBAL _calloc_callee
246   0000              	GLOBAL _calloc
247   0000              	GLOBAL _aligned_alloc_callee
248   0000              	GLOBAL _aligned_alloc
249   0000              	GLOBAL _utoa_callee
250   0000              	GLOBAL _utoa
251   0000              	GLOBAL _ultoa_callee
252   0000              	GLOBAL _ultoa
253   0000              	GLOBAL _system_fastcall
254   0000              	GLOBAL _system
255   0000              	GLOBAL _strtoul_callee
256   0000              	GLOBAL _strtoul
257   0000              	GLOBAL _strtol_callee
258   0000              	GLOBAL _strtol
259   0000              	GLOBAL _strtof_callee
260   0000              	GLOBAL _strtof
261   0000              	GLOBAL _strtod_callee
262   0000              	GLOBAL _strtod
263   0000              	GLOBAL _srand_fastcall
264   0000              	GLOBAL _srand
265   0000              	GLOBAL _rand
266   0000              	GLOBAL _quick_exit_fastcall
267   0000              	GLOBAL _quick_exit
268   0000              	GLOBAL _qsort_callee
269   0000              	GLOBAL _qsort
270   0000              	GLOBAL _ltoa_callee
271   0000              	GLOBAL _ltoa
272   0000              	GLOBAL _labs_fastcall
273   0000              	GLOBAL _labs
274   0000              	GLOBAL _itoa_callee
275   0000              	GLOBAL _itoa
276   0000              	GLOBAL _ftoh_callee
277   0000              	GLOBAL _ftoh
278   0000              	GLOBAL _ftog_callee
279   0000              	GLOBAL _ftog
280   0000              	GLOBAL _ftoe_callee
281   0000              	GLOBAL _ftoe
282   0000              	GLOBAL _ftoa_callee
283   0000              	GLOBAL _ftoa
284   0000              	GLOBAL _exit_fastcall
285   0000              	GLOBAL _exit
286   0000              	GLOBAL _dtoh_callee
287   0000              	GLOBAL _dtoh
288   0000              	GLOBAL _dtog_callee
289   0000              	GLOBAL _dtog
290   0000              	GLOBAL _dtoe_callee
291   0000              	GLOBAL _dtoe
292   0000              	GLOBAL _dtoa_callee
293   0000              	GLOBAL _dtoa
294   0000              	GLOBAL _bsearch_callee
295   0000              	GLOBAL _bsearch
296   0000              	GLOBAL _atol_fastcall
297   0000              	GLOBAL _atol
298   0000              	GLOBAL _atoi_fastcall
299   0000              	GLOBAL _atoi
300   0000              	GLOBAL _atof_fastcall
301   0000              	GLOBAL _atof
302   0000              	GLOBAL _atexit_fastcall
303   0000              	GLOBAL _atexit
304   0000              	GLOBAL _at_quick_exit_fastcall
305   0000              	GLOBAL _at_quick_exit
306   0000              	GLOBAL _abs_fastcall
307   0000              	GLOBAL _abs
308   0000              	GLOBAL _abort
309   0000              	GLOBAL __strtou__callee
310   0000              	GLOBAL __strtou_
311   0000              	GLOBAL __strtoi__callee
312   0000              	GLOBAL __strtoi_
313   0000              	GLOBAL __random_uniform_xor_8__fastcall
314   0000              	GLOBAL __random_uniform_xor_8_
315   0000              	GLOBAL __random_uniform_xor_32__fastcall
316   0000              	GLOBAL __random_uniform_xor_32_
317   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
318   0000              	GLOBAL __random_uniform_cmwc_8_
319   0000              	GLOBAL __shellsort__callee
320   0000              	GLOBAL __shellsort_
321   0000              	GLOBAL __quicksort__callee
322   0000              	GLOBAL __quicksort_
323   0000              	GLOBAL __insertion_sort__callee
324   0000              	GLOBAL __insertion_sort_
325   0000              	GLOBAL __ldivu__callee
326   0000              	GLOBAL __ldivu_
327   0000              	GLOBAL __ldiv__callee
328   0000              	GLOBAL __ldiv_
329   0000              	GLOBAL __divu__callee
330   0000              	GLOBAL __divu_
331   0000              	GLOBAL __div__callee
332   0000              	GLOBAL __div_
333   0000              	GLOBAL _NIRVANAP_drawTW_raw_callee
334   0000              	GLOBAL _NIRVANAP_drawTW_raw
335   0000              	GLOBAL _NIRVANAP_drawTW_callee
336   0000              	GLOBAL _NIRVANAP_drawTW
337   0000              	GLOBAL _NIRVANAP_drawW_raw_callee
338   0000              	GLOBAL _NIRVANAP_drawW_raw
339   0000              	GLOBAL _NIRVANAP_drawW_callee
340   0000              	GLOBAL _NIRVANAP_drawW
341   0000              	GLOBAL _NIRVANAP_spriteT_callee
342   0000              	GLOBAL _NIRVANAP_spriteT
343   0000              	GLOBAL _NIRVANAP_fillC_callee
344   0000              	GLOBAL _NIRVANAP_fillC
345   0000              	GLOBAL _NIRVANAP_readC_callee
346   0000              	GLOBAL _NIRVANAP_readC
347   0000              	GLOBAL _NIRVANAP_paintC_callee
348   0000              	GLOBAL _NIRVANAP_paintC
349   0000              	GLOBAL _NIRVANAP_printC_callee
350   0000              	GLOBAL _NIRVANAP_printC
351   0000              	GLOBAL _NIRVANAP_fillT_raw_callee
352   0000              	GLOBAL _NIRVANAP_fillT_raw
353   0000              	GLOBAL _NIRVANAP_fillT_callee
354   0000              	GLOBAL _NIRVANAP_fillT
355   0000              	GLOBAL _NIRVANAP_drawT_raw_callee
356   0000              	GLOBAL _NIRVANAP_drawT_raw
357   0000              	GLOBAL _NIRVANAP_drawT_callee
358   0000              	GLOBAL _NIRVANAP_drawT
359   0000              	GLOBAL _NIRVANAP_stop
360   0000              	GLOBAL _NIRVANAP_start
361   0000              	GLOBAL _debug3
362   0000              	GLOBAL _debug2
363   0000              	GLOBAL _debug
364   0000              	GLOBAL _zx_print_str
365   0000              	GLOBAL _zx_print_int
366   0000              	GLOBAL _zx_print_chr
367   0000              	GLOBAL _zx_print_bonus_time
368   0000              	GLOBAL _zx_isr
369   0000              	GLOBAL _z80_otdr_callee
370   0000              	GLOBAL _z80_otdr
371   0000              	GLOBAL _z80_otir_callee
372   0000              	GLOBAL _z80_otir
373   0000              	GLOBAL _z80_outp_callee
374   0000              	GLOBAL _z80_outp
375   0000              	GLOBAL _z80_indr_callee
376   0000              	GLOBAL _z80_indr
377   0000              	GLOBAL _z80_inir_callee
378   0000              	GLOBAL _z80_inir
379   0000              	GLOBAL _z80_inp_fastcall
380   0000              	GLOBAL _z80_inp
381   0000              	GLOBAL _z80_set_int_state_fastcall
382   0000              	GLOBAL _z80_set_int_state
383   0000              	GLOBAL _z80_get_int_state
384   0000              	GLOBAL _z80_delay_tstate_fastcall
385   0000              	GLOBAL _z80_delay_tstate
386   0000              	GLOBAL _z80_delay_ms_fastcall
387   0000              	GLOBAL _z80_delay_ms
388   0000              	GLOBAL _im2_remove_generic_callback_callee
389   0000              	GLOBAL _im2_remove_generic_callback
390   0000              	GLOBAL _im2_prepend_generic_callback_callee
391   0000              	GLOBAL _im2_prepend_generic_callback
392   0000              	GLOBAL _im2_append_generic_callback_callee
393   0000              	GLOBAL _im2_append_generic_callback
394   0000              	GLOBAL _im2_create_generic_isr_8080_callee
395   0000              	GLOBAL _im2_create_generic_isr_8080
396   0000              	GLOBAL _im2_create_generic_isr_callee
397   0000              	GLOBAL _im2_create_generic_isr
398   0000              	GLOBAL _im2_install_isr_callee
399   0000              	GLOBAL _im2_install_isr
400   0000              	GLOBAL _im2_init_fastcall
401   0000              	GLOBAL _im2_init
402   0000              	GLOBAL _intrinsic_swap_word_32_fastcall
403   0000              	GLOBAL _intrinsic_swap_word_32
404   0000              	GLOBAL _intrinsic_swap_endian_32_fastcall
405   0000              	GLOBAL _intrinsic_swap_endian_32
406   0000              	GLOBAL _intrinsic_swap_endian_16_fastcall
407   0000              	GLOBAL _intrinsic_swap_endian_16
408   0000              	GLOBAL _intrinsic_return_de
409   0000              	GLOBAL _intrinsic_return_bc
410   0000              	GLOBAL _intrinsic_exx
411   0000              	GLOBAL _intrinsic_ex_de_hl
412   0000              	GLOBAL _intrinsic_nop
413   0000              	GLOBAL _intrinsic_im_2
414   0000              	GLOBAL _intrinsic_im_1
415   0000              	GLOBAL _intrinsic_im_0
416   0000              	GLOBAL _intrinsic_retn
417   0000              	GLOBAL _intrinsic_reti
418   0000              	GLOBAL _intrinsic_halt
419   0000              	GLOBAL _intrinsic_ei
420   0000              	GLOBAL _intrinsic_di
421   0000              	GLOBAL _intrinsic_stub
422   0000              	GLOBAL _intrinsic_outi
423   0000              	GLOBAL _intrinsic_ldi
424   0000              	GLOBAL _zx_pattern_fill_callee
425   0000              	GLOBAL _zx_pattern_fill
426   0000              	GLOBAL _zx_saddrpup_fastcall
427   0000              	GLOBAL _zx_saddrpup
428   0000              	GLOBAL _zx_saddrpright_callee
429   0000              	GLOBAL _zx_saddrpright
430   0000              	GLOBAL _zx_saddrpleft_callee
431   0000              	GLOBAL _zx_saddrpleft
432   0000              	GLOBAL _zx_saddrpdown_fastcall
433   0000              	GLOBAL _zx_saddrpdown
434   0000              	GLOBAL _zx_saddrcup_fastcall
435   0000              	GLOBAL _zx_saddrcup
436   0000              	GLOBAL _zx_saddrcright_fastcall
437   0000              	GLOBAL _zx_saddrcright
438   0000              	GLOBAL _zx_saddrcleft_fastcall
439   0000              	GLOBAL _zx_saddrcleft
440   0000              	GLOBAL _zx_saddrcdown_fastcall
441   0000              	GLOBAL _zx_saddrcdown
442   0000              	GLOBAL _zx_saddr2py_fastcall
443   0000              	GLOBAL _zx_saddr2py
444   0000              	GLOBAL _zx_saddr2px_fastcall
445   0000              	GLOBAL _zx_saddr2px
446   0000              	GLOBAL _zx_saddr2cy_fastcall
447   0000              	GLOBAL _zx_saddr2cy
448   0000              	GLOBAL _zx_saddr2cx_fastcall
449   0000              	GLOBAL _zx_saddr2cx
450   0000              	GLOBAL _zx_saddr2aaddr_fastcall
451   0000              	GLOBAL _zx_saddr2aaddr
452   0000              	GLOBAL _zx_py2saddr_fastcall
453   0000              	GLOBAL _zx_py2saddr
454   0000              	GLOBAL _zx_py2aaddr_fastcall
455   0000              	GLOBAL _zx_py2aaddr
456   0000              	GLOBAL _zx_pxy2saddr_callee
457   0000              	GLOBAL _zx_pxy2saddr
458   0000              	GLOBAL _zx_pxy2aaddr_callee
459   0000              	GLOBAL _zx_pxy2aaddr
460   0000              	GLOBAL _zx_px2bitmask_fastcall
461   0000              	GLOBAL _zx_px2bitmask
462   0000              	GLOBAL _zx_cy2saddr_fastcall
463   0000              	GLOBAL _zx_cy2saddr
464   0000              	GLOBAL _zx_cy2aaddr_fastcall
465   0000              	GLOBAL _zx_cy2aaddr
466   0000              	GLOBAL _zx_cxy2saddr_callee
467   0000              	GLOBAL _zx_cxy2saddr
468   0000              	GLOBAL _zx_cxy2aaddr_callee
469   0000              	GLOBAL _zx_cxy2aaddr
470   0000              	GLOBAL _zx_bitmask2px_fastcall
471   0000              	GLOBAL _zx_bitmask2px
472   0000              	GLOBAL _zx_aaddrcup_fastcall
473   0000              	GLOBAL _zx_aaddrcup
474   0000              	GLOBAL _zx_aaddrcright_fastcall
475   0000              	GLOBAL _zx_aaddrcright
476   0000              	GLOBAL _zx_aaddrcleft_fastcall
477   0000              	GLOBAL _zx_aaddrcleft
478   0000              	GLOBAL _zx_aaddrcdown_fastcall
479   0000              	GLOBAL _zx_aaddrcdown
480   0000              	GLOBAL _zx_aaddr2saddr_fastcall
481   0000              	GLOBAL _zx_aaddr2saddr
482   0000              	GLOBAL _zx_aaddr2py_fastcall
483   0000              	GLOBAL _zx_aaddr2py
484   0000              	GLOBAL _zx_aaddr2px_fastcall
485   0000              	GLOBAL _zx_aaddr2px
486   0000              	GLOBAL _zx_aaddr2cy_fastcall
487   0000              	GLOBAL _zx_aaddr2cy
488   0000              	GLOBAL _zx_aaddr2cx_fastcall
489   0000              	GLOBAL _zx_aaddr2cx
490   0000              	GLOBAL _zx_visit_wc_pix_callee
491   0000              	GLOBAL _zx_visit_wc_pix
492   0000              	GLOBAL _zx_visit_wc_attr_callee
493   0000              	GLOBAL _zx_visit_wc_attr
494   0000              	GLOBAL _zx_scroll_wc_up_pix_callee
495   0000              	GLOBAL _zx_scroll_wc_up_pix
496   0000              	GLOBAL _zx_scroll_wc_up_attr_callee
497   0000              	GLOBAL _zx_scroll_wc_up_attr
498   0000              	GLOBAL _zx_scroll_wc_up_callee
499   0000              	GLOBAL _zx_scroll_wc_up
500   0000              	GLOBAL _zx_scroll_up_pix_callee
501   0000              	GLOBAL _zx_scroll_up_pix
502   0000              	GLOBAL _zx_scroll_up_attr_callee
503   0000              	GLOBAL _zx_scroll_up_attr
504   0000              	GLOBAL _zx_scroll_up_callee
505   0000              	GLOBAL _zx_scroll_up
506   0000              	GLOBAL _zx_cls_wc_pix_callee
507   0000              	GLOBAL _zx_cls_wc_pix
508   0000              	GLOBAL _zx_cls_wc_attr_callee
509   0000              	GLOBAL _zx_cls_wc_attr
510   0000              	GLOBAL _zx_cls_wc_callee
511   0000              	GLOBAL _zx_cls_wc
512   0000              	GLOBAL _zx_cls_pix_fastcall
513   0000              	GLOBAL _zx_cls_pix
514   0000              	GLOBAL _zx_cls_attr_fastcall
515   0000              	GLOBAL _zx_cls_attr
516   0000              	GLOBAL _zx_cls_fastcall
517   0000              	GLOBAL _zx_cls
518   0000              	GLOBAL _zx_border_fastcall
519   0000              	GLOBAL _zx_border
520   0000              	GLOBAL _spr_btile_paint_back
521   0000              	GLOBAL _spr_explode_bullet
522   0000              	GLOBAL _spr_init_anim_bullets
523   0000              	GLOBAL _spr_turn_horizontal
524   0000              	GLOBAL _spr_play_bullets
525   0000              	GLOBAL _spr_play_anim
526   0000              	GLOBAL _spr_add_anim
527   0000              	GLOBAL _spr_page_map
528   0000              	GLOBAL _spr_page_right
529   0000              	GLOBAL _spr_page_left
530   0000              	GLOBAL _spr_tile_paint
531   0000              	GLOBAL _spr_calc_hor
532   0000              	GLOBAL _spr_draw_row
533   0000              	GLOBAL _spr_draw_index
534   0000              	GLOBAL _spr_draw_clear
535   0000              	GLOBAL _spr_brick_anim
536   0000              	GLOBAL _spr_back_repaint
537   0000              	GLOBAL _spr_tile
538   0000              	GLOBAL _spr_destroy
539   0000              	GLOBAL _spr_tile_dir
540   0000              	GLOBAL _spr_redraw
541   0000              	GLOBAL _spr_move_left
542   0000              	GLOBAL _spr_move_right
543   0000              	GLOBAL _spr_move_horizontal
544   0000              	GLOBAL _spr_move_down
545   0000              	GLOBAL _spr_move_up
546   0000              	GLOBAL _spr_calc_index
547   0000              	GLOBAL _spr_chktime
548   0000              	GLOBAL _sound_hit_brick
549   0000              	GLOBAL _sound_hit_enemy
550   0000              	GLOBAL _sound_kill
551   0000              	GLOBAL _sound_enter_enemy
552   0000              	GLOBAL _sound_coin
553   0000              	GLOBAL _sound_jump
554   0000              	GLOBAL _sound_slide
555   0000              	GLOBAL _player_player_hit_pow
556   0000              	GLOBAL _game_obj_chk
557   0000              	GLOBAL _game_obj_set
558   0000              	GLOBAL _game_shoot_fire
559   0000              	GLOBAL _game_add_enemy
560   0000              	GLOBAL _game_joystick_set_menu
561   0000              	GLOBAL _game_joystick_set
562   0000              	GLOBAL _game_joystick_change
563   0000              	GLOBAL _game_print_header
564   0000              	GLOBAL _game_end
565   0000              	GLOBAL _game_phase_print_score_back
566   0000              	GLOBAL _game_check_time
567   0000              	GLOBAL _game_rotate_attrib
568   0000              	GLOBAL _game_colour_message
569   0000              	GLOBAL _game_paint_attrib_lin_h
570   0000              	GLOBAL _game_paint_attrib_lin
571   0000              	GLOBAL _game_paint_attrib
572   0000              	GLOBAL _game_print_score
573   0000              	GLOBAL _game_unfreeze_all
574   0000              	GLOBAL _game_freeze_all
575   0000              	GLOBAL _game_freeze
576   0000              	GLOBAL _game_enemy_add_get_index
577   0000              	GLOBAL _game_check_cell
578   0000              	GLOBAL _game_check_map
579   0000              	GLOBAL _game_loop
580   0000              	GLOBAL _game_round_init
581   0000              	GLOBAL _game_start_timer
582   0000              	GLOBAL _game_tick
583   0000              	GLOBAL _game_update_stats
584   0000              	GLOBAL _game_print_footer
585   0000              	GLOBAL _game_fill_row
586   0000              	GLOBAL _game_draw_screen
587   0000              	GLOBAL _enemy_avoid_fall_dead
588   0000              	GLOBAL _enemy_avoid_fall
589   0000              	GLOBAL _enemy_kill
590   0000              	GLOBAL _enemy_respawn
591   0000              	GLOBAL _enemy_init
592   0000              	GLOBAL _enemy_move
593   0000              	GLOBAL _enemy_turn
594   0000              	GLOBAL _enemy_hit
595   0000              	GLOBAL _enemy_coin1
596   0000              	GLOBAL _enemy_static
597   0000              	GLOBAL _enemy_walk
598   0000              	GLOBAL _enemy_horizontal
599   0000              	GLOBAL _enemy_vertical
600   0000              	GLOBAL _ay_fx_play
601   0000              	GLOBAL _ay_midi_play
602   0000              	GLOBAL _ay_is_playing
603   0000              	GLOBAL _ay_reset
604   0000              	GLOBAL _test_func
605   0000              	GLOBAL _test_proc
606   0000              	GLOBAL _in_mouse_kempston_wheel_delta
607   0000              	GLOBAL _in_mouse_kempston_wheel
608   0000              	GLOBAL _in_mouse_kempston_callee
609   0000              	GLOBAL _in_mouse_kempston
610   0000              	GLOBAL _in_mouse_kempston_setpos_callee
611   0000              	GLOBAL _in_mouse_kempston_setpos
612   0000              	GLOBAL _in_mouse_kempston_reset
613   0000              	GLOBAL _in_mouse_kempston_init
614   0000              	GLOBAL _in_mouse_amx_wheel_delta
615   0000              	GLOBAL _in_mouse_amx_wheel
616   0000              	GLOBAL _in_mouse_amx_callee
617   0000              	GLOBAL _in_mouse_amx
618   0000              	GLOBAL _in_mouse_amx_setpos_callee
619   0000              	GLOBAL _in_mouse_amx_setpos
620   0000              	GLOBAL _in_mouse_amx_reset
621   0000              	GLOBAL _in_mouse_amx_init_callee
622   0000              	GLOBAL _in_mouse_amx_init
623   0000              	GLOBAL _in_stick_sinclair2
624   0000              	GLOBAL _in_stick_sinclair1
625   0000              	GLOBAL _in_stick_kempston
626   0000              	GLOBAL _in_stick_fuller
627   0000              	GLOBAL _in_stick_cursor
628   0000              	GLOBAL _in_stick_keyboard_fastcall
629   0000              	GLOBAL _in_stick_keyboard
630   0000              	GLOBAL _in_wait_nokey
631   0000              	GLOBAL _in_wait_key
632   0000              	GLOBAL _in_test_key
633   0000              	GLOBAL _in_pause_fastcall
634   0000              	GLOBAL _in_pause
635   0000              	GLOBAL _in_key_scancode_fastcall
636   0000              	GLOBAL _in_key_scancode
637   0000              	GLOBAL _in_key_pressed_fastcall
638   0000              	GLOBAL _in_key_pressed
639   0000              	GLOBAL _in_inkey
640   0000              	GLOBAL _NIRVANAP_CHAR_TABLE
641   0000              	GLOBAL _NIRVANAP_WIDE_IMAGES
642   0000              	GLOBAL _NIRVANAP_TILE_IMAGES
643   0000              	GLOBAL _NIRVANAP_HOLE
644   0000              	GLOBAL _NIRVANAP_ISR_HOOK
645   0000              	GLOBAL _map_paper_last
646   0000              	GLOBAL _map_paper_clr
647   0000              	GLOBAL _map_paper
648   0000              	GLOBAL _draw_count
649   0000              	GLOBAL _g_player_hit_right
650   0000              	GLOBAL _g_player_hit_left
651   0000              	GLOBAL _joynames
652   0000              	GLOBAL _initials
653   0000              	GLOBAL _bullet_count
654   0000              	GLOBAL _bullet_frames
655   0000              	GLOBAL _bullet_colint
656   0000              	GLOBAL _bullet_dir
657   0000              	GLOBAL _bullet_tile
658   0000              	GLOBAL _bullet_col
659   0000              	GLOBAL _bullet_lin
660   0000              	GLOBAL _mush_class
661   0000              	GLOBAL _mush_index
662   0000              	GLOBAL _anim_count
663   0000              	GLOBAL _anim_respanwn
664   0000              	GLOBAL _anim_loop
665   0000              	GLOBAL _anim_end
666   0000              	GLOBAL _anim_int
667   0000              	GLOBAL _anim_tile
668   0000              	GLOBAL _anim_col
669   0000              	GLOBAL _anim_lin
670   0000              	GLOBAL _phase_curr
671   0000              	GLOBAL _map_heigth
672   0000              	GLOBAL _map_width
673   0000              	GLOBAL _scr_curr
674   0000              	GLOBAL _scr_obj1
675   0000              	GLOBAL _scr_obj0
676   0000              	GLOBAL _scr_map
677   0000              	GLOBAL _sprite_speed_alt
678   0000              	GLOBAL _sprite_frames
679   0000              	GLOBAL _sprite_speed
680   0000              	GLOBAL _screen_ink
681   0000              	GLOBAL _screen_paper
682   0000              	GLOBAL _player_over_stair
683   0000              	GLOBAL _game_start_scr
684   0000              	GLOBAL _game_respawning
685   0000              	GLOBAL _game_respawn_tile
686   0000              	GLOBAL _game_respawn_index
687   0000              	GLOBAL _game_menu_sel
688   0000              	GLOBAL _game_score_top
689   0000              	GLOBAL _player_lives
690   0000              	GLOBAL _game_over
691   0000              	GLOBAL _game_sound
692   0000              	GLOBAL _game_inmune
693   0000              	GLOBAL _game_god_mode
694   0000              	GLOBAL _game_two_player
695   0000              	GLOBAL _game_brick_tile
696   0000              	GLOBAL _sprite_curr_index
697   0000              	GLOBAL _spr_count
698   0000              	GLOBAL _bullet_time
699   0000              	GLOBAL _anim_time
700   0000              	GLOBAL _frame_time
701   0000              	GLOBAL _entry_time
702   0000              	GLOBAL _curr_time
703   0000              	GLOBAL _s_state
704   0000              	GLOBAL _attrib_hl
705   0000              	GLOBAL _attrib
706   0000              	GLOBAL _zx_val_asm
707   0000              	GLOBAL _enemies
708   0000              	GLOBAL _tmp_ui
709   0000              	GLOBAL _tmp_sc
710   0000              	GLOBAL _tmp_uc
711   0000              	GLOBAL _tmp1
712   0000              	GLOBAL _tmp0
713   0000              	GLOBAL _tmp
714   0000              	GLOBAL _index1
715   0000              	GLOBAL _index0
716   0000              	GLOBAL _loop_count
717   0000              	GLOBAL _s_col1
718   0000              	GLOBAL _s_col0
719   0000              	GLOBAL _s_lin1
720   0000              	GLOBAL _s_lin0
721   0000              	GLOBAL _s_tile1
722   0000              	GLOBAL _s_tile0
723   0000              	GLOBAL _player_hit_count
724   0000              	GLOBAL _sprite_horizontal_check
725   0000              	GLOBAL _sprite_on_air
726   0000              	GLOBAL _sprite
727   0000              	GLOBAL _game_gravity
728   0000              	GLOBAL _player_hit_time
729   0000              	GLOBAL _player_int
730   0000              	GLOBAL _player_dex
731   0000              	GLOBAL _player_str
732   0000              	GLOBAL _player_vita
733   0000              	GLOBAL _player_mana
734   0000              	GLOBAL _player_keys
735   0000              	GLOBAL _player_vel_inc
736   0000              	GLOBAL _player_vel_y1
737   0000              	GLOBAL _player_vel_y0
738   0000              	GLOBAL _player_vel_y
739   0000              	GLOBAL _player_vel_x
740   0000              	GLOBAL _player_joy
741   0000              	GLOBAL _player_score
742   0000              	GLOBAL _last_time
743   0000              	GLOBAL _player_slide
744   0000              	GLOBAL _spr_timer
745   0000              	GLOBAL _jump_lin
746   0000              	GLOBAL _player_hit_col
747   0000              	GLOBAL _player_hit_lin
748   0000              	GLOBAL _colint
749   0000              	GLOBAL _col
750   0000              	GLOBAL _lin
751   0000              	GLOBAL _tile
752   0000              	GLOBAL _state_a
753   0000              	GLOBAL _state
754   0000              	GLOBAL _class
755   0000              	GLOBAL _tbuffer
756   0000              	GLOBAL _dirs
757   0000              	GLOBAL _k1
758   0000              	GLOBAL _joyfunc1
759   0000              	GLOBAL _btiles
760   0000              	GLOBAL _spec128
761   0000              	GLOBAL _GLOBAL_ZX_PORT_7FFD
762   0000              	GLOBAL _GLOBAL_ZX_PORT_1FFD
763   0000              	GLOBAL _GLOBAL_ZX_PORT_FE
764   0000              	GLOBAL _ay_effect_20
765   0000              	GLOBAL _ay_effect_19
766   0000              	GLOBAL _ay_effect_18
767   0000              	GLOBAL _ay_effect_17
768   0000              	GLOBAL _ay_effect_16
769   0000              	GLOBAL _ay_effect_15
770   0000              	GLOBAL _ay_effect_14
771   0000              	GLOBAL _ay_effect_13
772   0000              	GLOBAL _ay_effect_12
773   0000              	GLOBAL _ay_effect_11
774   0000              	GLOBAL _ay_effect_10
775   0000              	GLOBAL _ay_effect_09
776   0000              	GLOBAL _ay_effect_08
777   0000              	GLOBAL _ay_effect_07
778   0000              	GLOBAL _ay_effect_06
779   0000              	GLOBAL _ay_effect_05
780   0000              	GLOBAL _ay_effect_04
781   0000              	GLOBAL _ay_effect_03
782   0000              	GLOBAL _ay_effect_02
783   0000              	GLOBAL _ay_effect_01
784   0000              	GLOBAL _pb_midi_phase_1
785   0000              	GLOBAL _pb_midi_title
786   0000              	GLOBAL _control_method
787   0000              	GLOBAL _world0
788   0000              	GLOBAL _lenght0
789   0000              	GLOBAL _start_scr0
790   0000              ;--------------------------------------------------------
791   0000              ; special function registers
792   0000              ;--------------------------------------------------------
793   0000              defc _IO_FE	=	0x00fe
794   0000              defc _IO_1FFD	=	0x1ffd
795   0000              defc _IO_7FFD	=	0x7ffd
796   0000              ;--------------------------------------------------------
797   0000              ; ram data
798   0000              ;--------------------------------------------------------
799   0000              	SECTION bss_compiler
800   0000              ;--------------------------------------------------------
801   0000              ; ram data
802   0000              ;--------------------------------------------------------
803   0000              
804   0000              IF 0
805   0000              
806   0000              ; .area _INITIALIZED removed by z88dk
807   0000              
808   0000              
809   0000              ENDIF
810   0000              
811   0000              ;--------------------------------------------------------
812   0000              ; absolute external ram data
813   0000              ;--------------------------------------------------------
814   0000              	SECTION IGNORE
815   0000              ;--------------------------------------------------------
816   0000              ; global & static initialisations
817   0000              ;--------------------------------------------------------
818   0000              	SECTION code_crt_init
819   0000              ;--------------------------------------------------------
820   0000              ; Home
821   0000              ;--------------------------------------------------------
822   0000              	SECTION IGNORE
823   0000              ;--------------------------------------------------------
824   0000              ; code
825   0000              ;--------------------------------------------------------
826   0000              	SECTION code_compiler
827   0000              ;	---------------------------------
828   0000              ; Function player_init
829   0000              ; ---------------------------------
830   0000              _player_init:
831   0000  CD 00 00    	call	___sdcc_enter_ix
832   0003  F5          	push	af
833   0004  3E 00       	ld	a, +((_class) & 0xFF)
834   0006  DD 86 04    	add	a,(ix+4)
835   0009  4F          	ld	c, a
836   000A  3E 00       	ld	a, +((_class) / 256)
837   000C  CE 00       	adc	a,0x00
838   000E  47          	ld	b, a
839   000F  AF          	xor	a, a
840   0010  02          	ld	(bc), a
841   0011  3E 00       	ld	a, +((_tile) & 0xFF)
842   0013  DD 86 04    	add	a,(ix+4)
843   0016  4F          	ld	c, a
844   0017  3E 00       	ld	a, +((_tile) / 256)
845   0019  CE 00       	adc	a,0x00
846   001B  47          	ld	b, a
847   001C  DD 7E 07    	ld	a,(ix+7)
848   001F  02          	ld	(bc), a
849   0020  3E 00       	ld	a, +((_lin) & 0xFF)
850   0022  DD 86 04    	add	a,(ix+4)
851   0025  4F          	ld	c, a
852   0026  3E 00       	ld	a, +((_lin) / 256)
853   0028  CE 00       	adc	a,0x00
854   002A  47          	ld	b, a
855   002B  DD 7E 05    	ld	a,(ix+5)
856   002E  02          	ld	(bc), a
857   002F  3E 00       	ld	a, +((_col) & 0xFF)
858   0031  DD 86 04    	add	a,(ix+4)
859   0034  4F          	ld	c, a
860   0035  3E 00       	ld	a, +((_col) / 256)
861   0037  CE 00       	adc	a,0x00
862   0039  47          	ld	b, a
863   003A  DD 7E 06    	ld	a,(ix+6)
864   003D  02          	ld	(bc), a
865   003E  3E 00       	ld	a, +((_colint) & 0xFF)
866   0040  DD 86 04    	add	a,(ix+4)
867   0043  4F          	ld	c, a
868   0044  3E 00       	ld	a, +((_colint) / 256)
869   0046  CE 00       	adc	a,0x00
870   0048  47          	ld	b, a
871   0049  AF          	xor	a, a
872   004A  02          	ld	(bc), a
873   004B  3E 00       	ld	a, +((_state) & 0xFF)
874   004D  DD 86 04    	add	a,(ix+4)
875   0050  4F          	ld	c, a
876   0051  3E 00       	ld	a, +((_state) / 256)
877   0053  CE 00       	adc	a,0x00
878   0055  47          	ld	b, a
879   0056  AF          	xor	a, a
880   0057  02          	ld	(bc), a
881   0058  3E 00       	ld	a, +((_state_a) & 0xFF)
882   005A  DD 86 04    	add	a,(ix+4)
883   005D  4F          	ld	c, a
884   005E  3E 00       	ld	a, +((_state_a) / 256)
885   0060  CE 00       	adc	a,0x00
886   0062  47          	ld	b, a
887   0063  AF          	xor	a, a
888   0064  02          	ld	(bc), a
889   0065  3E 00       	ld	a, +((_jump_lin) & 0xFF)
890   0067  DD 86 04    	add	a,(ix+4)
891   006A  5F          	ld	e, a
892   006B  3E 00       	ld	a, +((_jump_lin) / 256)
893   006D  CE 00       	adc	a,0x00
894   006F  57          	ld	d, a
895   0070  DD 7E 05    	ld	a,(ix+5)
896   0073  12          	ld	(de), a
897   0074  DD 6E 04    	ld	l,(ix+4)
898   0077  26 00       	ld	h,0x00
899   0079  29          	add	hl,hl
900   007A  11 00 00    	ld	de,_last_time
901   007D  19          	add	hl, de
902   007E  E3          	ex	(sp), hl
903   007F  E1          	pop	hl
904   0080  ED 5B 00 00 	ld	de,(_curr_time)
905   0084  E5          	push	hl
906   0085  73          	ld	(hl), e
907   0086  23          	inc	hl
908   0087  72          	ld	(hl), d
909   0088  3E 00       	ld	a, +((_sprite_speed_alt) & 0xFF)
910   008A  DD 86 04    	add	a,(ix+4)
911   008D  5F          	ld	e, a
912   008E  3E 00       	ld	a, +((_sprite_speed_alt) / 256)
913   0090  CE 00       	adc	a,0x00
914   0092  57          	ld	d, a
915   0093  AF          	xor	a, a
916   0094  12          	ld	(de), a
917   0095  0A          	ld	a, (bc)
918   0096  F6 11       	or	a,+(0x01|0x10)
919   0098  02          	ld	(bc),a
920   0099  21 00 00    	ld	hl,_player_hit_col
921   009C  36 00       	ld	(hl),0x00
922   009E  21 00 00    	ld	hl,_player_hit_lin
923   00A1  36 00       	ld	(hl),0x00
924   00A3  21 00 00    	ld	hl,_player_slide
925   00A6  36 00       	ld	(hl),0x00
926   00A8  DD 66 06    	ld	h,(ix+6)
927   00AB  DD 6E 05    	ld	l,(ix+5)
928   00AE  E5          	push	hl
929   00AF  DD 66 07    	ld	h,(ix+7)
930   00B2  DD 6E 04    	ld	l,(ix+4)
931   00B5  E5          	push	hl
932   00B6  CD 00 00    	call	_NIRVANAP_spriteT_callee
933   00B9  F1          	pop	af
934   00BA  DD E1       	pop	ix
935   00BC  C9          	ret
936   00BD              	SECTION code_compiler
937   00BD              ;	---------------------------------
938   00BD              ; Function player_check_input
939   00BD              ; ---------------------------------
940   00BD              _player_check_input:
941   00BD  21 00 00    	ld	hl,_dirs
942   00C0  CB 56       	bit	2, (hl)
943   00C2  28 0C       	jr	Z,l_player_check_input_00102
944   00C4  21 00 00    	ld	hl,_dirs
945   00C7  CB 5E       	bit	3, (hl)
946   00C9  28 05       	jr	Z,l_player_check_input_00102
947   00CB  21 00 00    	ld	hl,_dirs
948   00CE  36 00       	ld	(hl),0x00
949   00D0              l_player_check_input_00102:
950   00D0  21 00 00    	ld	hl,_dirs
951   00D3  7E          	ld	a, (hl)
952   00D4  CB 07       	rlc	a
953   00D6  E6 01       	and	a,0x01
954   00D8  CB 47       	bit	0, a
955   00DA  20 1D       	jr	NZ,l_player_check_input_00107
956   00DC  CB 56       	bit	2, (hl)
957   00DE  20 19       	jr	NZ,l_player_check_input_00107
958   00E0  21 00 00    	ld	hl,_dirs
959   00E3  CB 5E       	bit	3, (hl)
960   00E5  20 12       	jr	NZ,l_player_check_input_00107
961   00E7  21 00 00    	ld	hl,_dirs
962   00EA  CB 46       	bit	0, (hl)
963   00EC  20 0B       	jr	NZ,l_player_check_input_00107
964   00EE  21 00 00    	ld	hl,_dirs
965   00F1  CB 4E       	bit	1, (hl)
966   00F3  20 04       	jr	NZ,l_player_check_input_00107
967   00F5  2E 00       	ld	l,0x00
968   00F7  18 02       	jr	l_player_check_input_00108
969   00F9              l_player_check_input_00107:
970   00F9  2E 01       	ld	l,0x01
971   00FB              l_player_check_input_00108:
972   00FB  C9          	ret
973   00FC              	SECTION code_compiler
974   00FC              ;	---------------------------------
975   00FC              ; Function player_collision
976   00FC              ; ---------------------------------
977   00FC              _player_collision:
978   00FC  21 19 00    	ld	hl,0x0019
979   00FF  E5          	push	hl
980   0100  2A 00 00    	ld	hl,(_player_hit_time)
981   0103  E5          	push	hl
982   0104  CD 00 00    	call	_game_check_time
983   0107  F1          	pop	af
984   0108  F1          	pop	af
985   0109  7D          	ld	a, l
986   010A  B7          	or	a, a
987   010B  CA 92 01    	jp	Z, l_player_collision_00111
988   010E  21 00 00    	ld	hl,_sprite
989   0111  36 00       	ld	(hl),0x00
990   0113  3A 07 00    	ld	a,(_col + 7)
991   0116  32 00 00    	ld	(_s_col1),a
992   0119  3A 07 00    	ld	a,(_lin + 7)
993   011C  32 00 00    	ld	(_s_lin1),a
994   011F              l_player_collision_00107:
995   011F  21 00 00    	ld	hl,_sprite
996   0122  7E          	ld	a, (hl)
997   0123  D6 07       	sub	a,0x07
998   0125  30 6B       	jr	NC,l_player_collision_00111
999   0127  3E 00       	ld	a, +((_class) & 0xFF)
1000  0129  86          	add	a, (hl)
1001  012A  4F          	ld	c, a
1002  012B  3E 00       	ld	a, +((_class) / 256)
1003  012D  CE 00       	adc	a,0x00
1004  012F  47          	ld	b, a
1005  0130  0A          	ld	a, (bc)
1006  0131  B7          	or	a, a
1007  0132  28 58       	jr	Z,l_player_collision_00106
1008  0134  4E          	ld	c,(hl)
1009  0135  06 00       	ld	b,0x00
1010  0137  21 00 00    	ld	hl,_col
1011  013A  09          	add	hl,bc
1012  013B  4E          	ld	c, (hl)
1013  013C  06 00       	ld	b,0x00
1014  013E  3A 00 00    	ld	a,(_s_col1)
1015  0141  5F          	ld	e,a
1016  0142  16 00       	ld	d,0x00
1017  0144  79          	ld	a, c
1018  0145  93          	sub	a, e
1019  0146  6F          	ld	l, a
1020  0147  78          	ld	a, b
1021  0148  9A          	sbc	a, d
1022  0149  67          	ld	h, a
1023  014A  CD 00 00    	call	_abs_fastcall
1024  014D  7D          	ld	a,l
1025  014E  D6 02       	sub	a,0x02
1026  0150  7C          	ld	a,h
1027  0151  17          	rla
1028  0152  3F          	ccf
1029  0153  1F          	rra
1030  0154  DE 80       	sbc	a,0x80
1031  0156  30 34       	jr	NC,l_player_collision_00106
1032  0158  2A 00 00    	ld	hl,(_sprite)
1033  015B  26 00       	ld	h,0x00
1034  015D  01 00 00    	ld	bc,_lin
1035  0160  09          	add	hl,bc
1036  0161  4E          	ld	c,(hl)
1037  0162  06 00       	ld	b,0x00
1038  0164  3A 00 00    	ld	a,(_s_lin1)
1039  0167  5F          	ld	e,a
1040  0168  16 00       	ld	d,0x00
1041  016A  79          	ld	a, c
1042  016B  93          	sub	a, e
1043  016C  6F          	ld	l, a
1044  016D  78          	ld	a, b
1045  016E  9A          	sbc	a, d
1046  016F  67          	ld	h, a
1047  0170  CD 00 00    	call	_abs_fastcall
1048  0173  7D          	ld	a,l
1049  0174  D6 0E       	sub	a,0x0e
1050  0176  7C          	ld	a,h
1051  0177  17          	rla
1052  0178  3F          	ccf
1053  0179  1F          	rra
1054  017A  DE 80       	sbc	a,0x80
1055  017C  30 0E       	jr	NC,l_player_collision_00106
1056  017E  2E 02       	ld	l,0x02
1057  0180  CD 00 00    	call	_zx_border_fastcall
1058  0183  2E 14       	ld	l,0x14
1059  0185  CD CA 0E    	call	_player_hit
1060  0188  2E 01       	ld	l,0x01
1061  018A  18 08       	jr	l_player_collision_00112
1062  018C              l_player_collision_00106:
1063  018C  21 00 00    	ld	hl,_sprite
1064  018F  34          	inc	(hl)
1065  0190  18 8D       	jr	l_player_collision_00107
1066  0192              l_player_collision_00111:
1067  0192  2E 00       	ld	l,0x00
1068  0194              l_player_collision_00112:
1069  0194  C9          	ret
1070  0195              	SECTION code_compiler
1071  0195              ;	---------------------------------
1072  0195              ; Function player_kill
1073  0195              ; ---------------------------------
1074  0195              _player_kill:
1075  0195  01 00 00    	ld	bc,_state+0
1076  0198  2A 00 00    	ld	hl,(_sprite)
1077  019B  26 00       	ld	h,0x00
1078  019D  09          	add	hl,bc
1079  019E  CB 6E       	bit	5,(hl)
1080  01A0  C2 67 02    	jp	NZ,l_player_kill_00109
1081  01A3  C5          	push	bc
1082  01A4  CD 00 00    	call	_sound_hit_brick
1083  01A7  C1          	pop	bc
1084  01A8  79          	ld	a, c
1085  01A9  21 00 00    	ld	hl,_sprite
1086  01AC  86          	add	a, (hl)
1087  01AD  5F          	ld	e, a
1088  01AE  78          	ld	a, b
1089  01AF  CE 00       	adc	a,0x00
1090  01B1  57          	ld	d, a
1091  01B2  1A          	ld	a, (de)
1092  01B3  F6 20       	or	a,0x20
1093  01B5  12          	ld	(de), a
1094  01B6  3E 00       	ld	a, +((_sprite_speed_alt) & 0xFF)
1095  01B8  86          	add	a, (hl)
1096  01B9  5F          	ld	e, a
1097  01BA  3E 00       	ld	a, +((_sprite_speed_alt) / 256)
1098  01BC  CE 00       	adc	a,0x00
1099  01BE  57          	ld	d, a
1100  01BF  3E 03       	ld	a,0x03
1101  01C1  12          	ld	(de), a
1102  01C2  79          	ld	a, c
1103  01C3  86          	add	a, (hl)
1104  01C4  4F          	ld	c, a
1105  01C5  78          	ld	a, b
1106  01C6  CE 00       	adc	a,0x00
1107  01C8  47          	ld	b, a
1108  01C9  0A          	ld	a, (bc)
1109  01CA  CB 57       	bit	2, a
1110  01CC  28 0D       	jr	Z,l_player_kill_00102
1111  01CE  2A 00 00    	ld	hl,(_sprite)
1112  01D1  26 00       	ld	h,0x00
1113  01D3  01 00 00    	ld	bc,_tile
1114  01D6  09          	add	hl,bc
1115  01D7  36 40       	ld	(hl),0x40
1116  01D9  18 0B       	jr	l_player_kill_00103
1117  01DB              l_player_kill_00102:
1118  01DB  2A 00 00    	ld	hl,(_sprite)
1119  01DE  26 00       	ld	h,0x00
1120  01E0  01 00 00    	ld	bc,_tile
1121  01E3  09          	add	hl,bc
1122  01E4  36 48       	ld	(hl),0x48
1123  01E6              l_player_kill_00103:
1124  01E6  CD 3D 0A    	call	_player_hit_platform_clear
1125  01E9  2A 00 00    	ld	hl,(_sprite)
1126  01EC  26 00       	ld	h,0x00
1127  01EE  01 00 00    	ld	bc,_col
1128  01F1  09          	add	hl,bc
1129  01F2  4E          	ld	c, (hl)
1130  01F3  2A 00 00    	ld	hl,(_sprite)
1131  01F6  26 00       	ld	h,0x00
1132  01F8  11 00 00    	ld	de,_lin
1133  01FB  19          	add	hl,de
1134  01FC  46          	ld	b, (hl)
1135  01FD  2A 00 00    	ld	hl,(_sprite)
1136  0200  26 00       	ld	h,0x00
1137  0202  11 00 00    	ld	de,_tile
1138  0205  19          	add	hl,de
1139  0206  56          	ld	d, (hl)
1140  0207  79          	ld	a,c
1141  0208  21 00 00    	ld	hl,_sprite
1142  020B  F5          	push	af
1143  020C  33          	inc	sp
1144  020D  4A          	ld	c, d
1145  020E  7E          	ld	a,(hl)
1146  020F  C5          	push	bc
1147  0210  F5          	push	af
1148  0211  33          	inc	sp
1149  0212  CD 00 00    	call	_NIRVANAP_spriteT_callee
1150  0215  01 00 00    	ld	bc,_spr_timer+0
1151  0218  2A 00 00    	ld	hl,(_sprite)
1152  021B  26 00       	ld	h,0x00
1153  021D  29          	add	hl, hl
1154  021E  09          	add	hl,bc
1155  021F  ED 5B 00 00 	ld	de,(_curr_time)
1156  0223  73          	ld	(hl),e
1157  0224  23          	inc	hl
1158  0225  72          	ld	(hl),d
1159  0226  3A 00 00    	ld	a,(_sprite)
1160  0229  D6 07       	sub	a,0x07
1161  022B  20 1E       	jr	NZ,l_player_kill_00105
1162  022D  01 00 00    	ld	bc,_state_a+0
1163  0230  79          	ld	a, c
1164  0231  21 00 00    	ld	hl,_sprite
1165  0234  86          	add	a, (hl)
1166  0235  5F          	ld	e, a
1167  0236  78          	ld	a, b
1168  0237  CE 00       	adc	a,0x00
1169  0239  57          	ld	d, a
1170  023A  1A          	ld	a, (de)
1171  023B  F6 08       	or	a,0x08
1172  023D  12          	ld	(de), a
1173  023E  79          	ld	a, c
1174  023F  86          	add	a, (hl)
1175  0240  4F          	ld	c, a
1176  0241  78          	ld	a, b
1177  0242  CE 00       	adc	a,0x00
1178  0244  47          	ld	b, a
1179  0245  0A          	ld	a, (bc)
1180  0246  E6 EF       	and	a,0xef
1181  0248  02          	ld	(bc), a
1182  0249  18 1C       	jr	l_player_kill_00109
1183  024B              l_player_kill_00105:
1184  024B  01 00 00    	ld	bc,_state_a+0
1185  024E  79          	ld	a, c
1186  024F  21 00 00    	ld	hl,_sprite
1187  0252  86          	add	a, (hl)
1188  0253  5F          	ld	e, a
1189  0254  78          	ld	a, b
1190  0255  CE 00       	adc	a,0x00
1191  0257  57          	ld	d, a
1192  0258  1A          	ld	a, (de)
1193  0259  F6 10       	or	a,0x10
1194  025B  12          	ld	(de), a
1195  025C  79          	ld	a, c
1196  025D  86          	add	a, (hl)
1197  025E  4F          	ld	c, a
1198  025F  78          	ld	a, b
1199  0260  CE 00       	adc	a,0x00
1200  0262  47          	ld	b, a
1201  0263  0A          	ld	a, (bc)
1202  0264  E6 F7       	and	a,0xf7
1203  0266  02          	ld	(bc), a
1204  0267              l_player_kill_00109:
1205  0267  C9          	ret
1206  0268              	SECTION code_compiler
1207  0268              ;	---------------------------------
1208  0268              ; Function player_restart
1209  0268              ; ---------------------------------
1210  0268              _player_restart:
1211  0268  CD 00 00    	call	___sdcc_enter_ix
1212  026B  F5          	push	af
1213  026C  4D          	ld	c, l
1214  026D  21 00 00    	ld	hl,_ay_effect_15
1215  0270  CD 00 00    	call	_ay_fx_play
1216  0273  C5          	push	bc
1217  0274  21 0E 64    	ld	hl,0x640e
1218  0277  E5          	push	hl
1219  0278  21 07 00    	ld	hl,0x0007
1220  027B  E5          	push	hl
1221  027C  CD 00 00    	call	_player_init
1222  027F  F1          	pop	af
1223  0280  F1          	pop	af
1224  0281  C1          	pop	bc
1225  0282  11 00 00    	ld	de,_state+0
1226  0285  69          	ld	l,c
1227  0286  26 00       	ld	h,0x00
1228  0288  19          	add	hl, de
1229  0289  CB E6       	set	4, (hl)
1230  028B  11 00 00    	ld	de,_state_a+0
1231  028E  69          	ld	l,c
1232  028F  26 00       	ld	h,0x00
1233  0291  19          	add	hl, de
1234  0292  CB C6       	set	0, (hl)
1235  0294  11 00 00    	ld	de,_spr_timer+0
1236  0297  69          	ld	l, c
1237  0298  26 00       	ld	h,0x00
1238  029A  29          	add	hl, hl
1239  029B  19          	add	hl,de
1240  029C  E3          	ex	(sp), hl
1241  029D  E1          	pop	hl
1242  029E  ED 5B 00 00 	ld	de,(_curr_time)
1243  02A2  E5          	push	hl
1244  02A3  73          	ld	(hl), e
1245  02A4  23          	inc	hl
1246  02A5  72          	ld	(hl), d
1247  02A6  11 00 00    	ld	de,_sprite_speed_alt+0
1248  02A9  69          	ld	l,c
1249  02AA  26 00       	ld	h,0x00
1250  02AC  19          	add	hl, de
1251  02AD  F1          	pop	af
1252  02AE  36 08       	ld	(hl),0x08
1253  02B0  DD E1       	pop	ix
1254  02B2  C9          	ret
1255  02B3              	SECTION code_compiler
1256  02B3              ;	---------------------------------
1257  02B3              ; Function player_turn
1258  02B3              ; ---------------------------------
1259  02B3              _player_turn:
1260  02B3  2A 00 00    	ld	hl,(_sprite)
1261  02B6  26 00       	ld	h,0x00
1262  02B8  01 00 00    	ld	bc,_class
1263  02BB  09          	add	hl,bc
1264  02BC  7E          	ld	a,(hl)
1265  02BD  B7          	or	a, a
1266  02BE  C0          	ret	NZ
1267  02BF  3A 00 00    	ld	a,(_player_lives)
1268  02C2  B7          	or	a, a
1269  02C3  C8          	ret	Z
1270  02C4  21 00 00    	ld	hl,_sprite
1271  02C7  CD 00 00    	call	_spr_chktime
1272  02CA  7D          	ld	a, l
1273  02CB  B7          	or	a, a
1274  02CC  C8          	ret	Z
1275  02CD  21 00 00    	ld	hl,_k1
1276  02D0  E5          	push	hl
1277  02D1  2A 00 00    	ld	hl,(_joyfunc1)
1278  02D4  CD 00 00    	call	___sdcc_call_hl
1279  02D7  F1          	pop	af
1280  02D8  7D          	ld	a,l
1281  02D9  32 00 00    	ld	(_dirs),a
1282  02DC  CD E2 02    	call	_player_move
1283  02DF  C3 FC 00    	jp  _player_collision
1284  02E2              	SECTION code_compiler
1285  02E2              ;	---------------------------------
1286  02E2              ; Function player_move
1287  02E2              ; ---------------------------------
1288  02E2              _player_move:
1289  02E2  2A 00 00    	ld	hl,(_sprite)
1290  02E5  26 00       	ld	h,0x00
1291  02E7  01 00 00    	ld	bc,_lin
1292  02EA  09          	add	hl,bc
1293  02EB  7E          	ld	a,(hl)
1294  02EC  32 00 00    	ld	(_s_lin0),a
1295  02EF  2A 00 00    	ld	hl,(_sprite)
1296  02F2  26 00       	ld	h,0x00
1297  02F4  01 00 00    	ld	bc,_col
1298  02F7  09          	add	hl,bc
1299  02F8  7E          	ld	a,(hl)
1300  02F9  32 00 00    	ld	(_s_col0),a
1301  02FC  2A 00 00    	ld	hl,(_sprite)
1302  02FF  26 00       	ld	h,0x00
1303  0301  01 00 00    	ld	bc,_tile
1304  0304  09          	add	hl,bc
1305  0305  4E          	ld	c, (hl)
1306  0306  3A 00 00    	ld	a,(_sprite)
1307  0309  5F          	ld	e,a
1308  030A  16 00       	ld	d,0x00
1309  030C  21 00 00    	ld	hl,_colint
1310  030F  19          	add	hl,de
1311  0310  7E          	ld	a,(hl)
1312  0311  81          	add	a,c
1313  0312  32 00 00    	ld	(_s_tile0),a
1314  0315  2A 00 00    	ld	hl,(_sprite)
1315  0318  26 00       	ld	h,0x00
1316  031A  01 00 00    	ld	bc,_state
1317  031D  09          	add	hl,bc
1318  031E  7E          	ld	a,(hl)
1319  031F  CB 47       	bit	0,a
1320  0321  32 00 00    	ld	(_s_state),a
1321  0324  20 07       	jr	NZ,l_player_move_00113
1322  0326  21 00 00    	ld	hl,_s_state
1323  0329  CB 4E       	bit	1, (hl)
1324  032B  28 46       	jr	Z,l_player_move_00114
1325  032D              l_player_move_00113:
1326  032D  CD 71 06    	call	_player_fire
1327  0330  3A 00 00    	ld	a,(_player_vel_y)
1328  0333  21 00 00    	ld	hl,_player_vel_y1
1329  0336  96          	sub	a, (hl)
1330  0337  E2 3C 03    	jp	PO, l_player_move_00162
1331  033A  EE 80       	xor	a,0x80
1332  033C              l_player_move_00162:
1333  033C  F2 5F 03    	jp	P, l_player_move_00106
1334  033F  21 00 00    	ld	hl,_dirs
1335  0342  CB 56       	bit	2, (hl)
1336  0344  28 09       	jr	Z,l_player_move_00102
1337  0346  21 00 00    	ld	hl,_s_state
1338  0349  7E          	ld	a,(hl)
1339  034A  F6 08       	or	a,0x08
1340  034C  E6 FB       	and	a,0xfb
1341  034E  77          	ld	(hl),a
1342  034F              l_player_move_00102:
1343  034F  21 00 00    	ld	hl,_dirs
1344  0352  CB 4E       	bit	1, (hl)
1345  0354  28 09       	jr	Z,l_player_move_00106
1346  0356  21 00 00    	ld	hl,_s_state
1347  0359  7E          	ld	a,(hl)
1348  035A  F6 04       	or	a,0x04
1349  035C  E6 F7       	and	a,0xf7
1350  035E  77          	ld	(hl),a
1351  035F              l_player_move_00106:
1352  035F  CD 12 0B    	call	_player_move_jump
1353  0362  7D          	ld	a, l
1354  0363  B7          	or	a, a
1355  0364  28 2E       	jr	Z,l_player_move_00115
1356  0366  3A 00 00    	ld	a,(_player_over_stair)
1357  0369  B7          	or	a, a
1358  036A  20 28       	jr	NZ,l_player_move_00115
1359  036C  2E 54       	ld	l,0x54
1360  036E  CD A5 04    	call	_player_tile
1361  0371  18 21       	jr	l_player_move_00115
1362  0373              l_player_move_00114:
1363  0373  CD FB 04    	call	_player_move_input
1364  0376  7D          	ld	a, l
1365  0377  B7          	or	a, a
1366  0378  20 17       	jr	NZ,l_player_move_00112
1367  037A  2A 00 00    	ld	hl,(_sprite)
1368  037D  26 00       	ld	h,0x00
1369  037F  01 00 00    	ld	bc,_colint
1370  0382  09          	add	hl,bc
1371  0383  AF          	xor	a,a
1372  0384  77          	ld	(hl),a
1373  0385  2E 64       	ld	l,0x64
1374  0387  CD A5 04    	call	_player_tile
1375  038A  21 00 00    	ld	hl,_s_state
1376  038D  7E          	ld	a,(hl)
1377  038E  E6 F3       	and	a,+(0xf7&0xfb)
1378  0390  77          	ld	(hl),a
1379  0391              l_player_move_00112:
1380  0391  CD 96 0A    	call	_player_check_floor
1381  0394              l_player_move_00115:
1382  0394  CD 00 00    	call	_spr_redraw
1383  0397  7D          	ld	a, l
1384  0398  B7          	or	a, a
1385  0399  28 03       	jr	Z,l_player_move_00118
1386  039B  CD 8E 06    	call	_player_check_map
1387  039E              l_player_move_00118:
1388  039E  3A 00 00    	ld	a,(_player_hit_lin)
1389  03A1  B7          	or	a, a
1390  03A2  28 03       	jr	Z,l_player_move_00120
1391  03A4  CD 3D 0A    	call	_player_hit_platform_clear
1392  03A7              l_player_move_00120:
1393  03A7  2A 00 00    	ld	hl,(_sprite)
1394  03AA  26 00       	ld	h,0x00
1395  03AC  01 00 00    	ld	bc,_state
1396  03AF  09          	add	hl,bc
1397  03B0  3A 00 00    	ld	a,(_s_state)
1398  03B3  77          	ld	(hl),a
1399  03B4  2E 00       	ld	l,0x00
1400  03B6  C9          	ret
1401  03B7              	SECTION code_compiler
1402  03B7              ;	---------------------------------
1403  03B7              ; Function player_check_stairs_down
1404  03B7              ; ---------------------------------
1405  03B7              _player_check_stairs_down:
1406  03B7  CD 00 00    	call	___sdcc_enter_ix
1407  03BA  3B          	dec	sp
1408  03BB  2A 00 00    	ld	hl,(_sprite)
1409  03BE  26 00       	ld	h,0x00
1410  03C0  5D          	ld	e,l
1411  03C1  01 00 00    	ld	bc,_col
1412  03C4  09          	add	hl,bc
1413  03C5  46          	ld	b,(hl)
1414  03C6  16 00       	ld	d,0x00
1415  03C8  21 00 00    	ld	hl,_lin
1416  03CB  19          	add	hl,de
1417  03CC  7E          	ld	a,(hl)
1418  03CD  C6 10       	add	a,0x10
1419  03CF  4F          	ld	c,a
1420  03D0  C5          	push	bc
1421  03D1  CD 00 00    	call	_spr_calc_index
1422  03D4  F1          	pop	af
1423  03D5  7D          	ld	a,l
1424  03D6  32 00 00    	ld	(_sprite_curr_index),a
1425  03D9  4F          	ld	c,a
1426  03DA  06 00       	ld	b,0x00
1427  03DC  21 00 00    	ld	hl,_scr_map
1428  03DF  09          	add	hl,bc
1429  03E0  7E          	ld	a,(hl)
1430  03E1  4F          	ld	c,a
1431  03E2  D6 38       	sub	a,0x38
1432  03E4  38 05       	jr	C,l_player_check_stairs_down_00105
1433  03E6  3E 3C       	ld	a,0x3c
1434  03E8  91          	sub	a, c
1435  03E9  30 04       	jr	NC,l_player_check_stairs_down_00106
1436  03EB              l_player_check_stairs_down_00105:
1437  03EB  3E 00       	ld	a,0x00
1438  03ED  18 02       	jr	l_player_check_stairs_down_00107
1439  03EF              l_player_check_stairs_down_00106:
1440  03EF  3E 01       	ld	a,0x01
1441  03F1              l_player_check_stairs_down_00107:
1442  03F1  B7          	or	a, a
1443  03F2  28 05       	jr	Z,l_player_check_stairs_down_00103
1444  03F4  21 00 00    	ld	hl,_player_over_stair
1445  03F7  36 01       	ld	(hl),0x01
1446  03F9              l_player_check_stairs_down_00103:
1447  03F9  33          	inc	sp
1448  03FA  DD E1       	pop	ix
1449  03FC  C9          	ret
1450  03FD              	SECTION code_compiler
1451  03FD              ;	---------------------------------
1452  03FD              ; Function player_check_stairs
1453  03FD              ; ---------------------------------
1454  03FD              _player_check_stairs:
1455  03FD  CD 00 00    	call	___sdcc_enter_ix
1456  0400  3B          	dec	sp
1457  0401  5D          	ld	e, l
1458  0402  2A 00 00    	ld	hl,(_sprite)
1459  0405  26 00       	ld	h,0x00
1460  0407  01 00 00    	ld	bc,_col
1461  040A  09          	add	hl,bc
1462  040B  7E          	ld	a,(hl)
1463  040C  83          	add	a,e
1464  040D  57          	ld	d,a
1465  040E  2A 00 00    	ld	hl,(_sprite)
1466  0411  26 00       	ld	h,0x00
1467  0413  01 00 00    	ld	bc,_lin
1468  0416  09          	add	hl,bc
1469  0417  46          	ld	b, (hl)
1470  0418  D5          	push	de
1471  0419  58          	ld	e,b
1472  041A  D5          	push	de
1473  041B  CD 00 00    	call	_spr_calc_index
1474  041E  F1          	pop	af
1475  041F  D1          	pop	de
1476  0420  7D          	ld	a,l
1477  0421  32 00 00    	ld	(_sprite_curr_index),a
1478  0424  4F          	ld	c,a
1479  0425  06 00       	ld	b,0x00
1480  0427  21 00 00    	ld	hl,_scr_map
1481  042A  09          	add	hl,bc
1482  042B  7E          	ld	a,(hl)
1483  042C  4F          	ld	c,a
1484  042D  D6 38       	sub	a,0x38
1485  042F  38 05       	jr	C,l_player_check_stairs_00111
1486  0431  3E 3C       	ld	a,0x3c
1487  0433  91          	sub	a, c
1488  0434  30 04       	jr	NC,l_player_check_stairs_00112
1489  0436              l_player_check_stairs_00111:
1490  0436  0E 00       	ld	c,0x00
1491  0438  18 02       	jr	l_player_check_stairs_00113
1492  043A              l_player_check_stairs_00112:
1493  043A  0E 01       	ld	c,0x01
1494  043C              l_player_check_stairs_00113:
1495  043C  3E 00       	ld	a, +((_col) & 0xFF)
1496  043E  21 00 00    	ld	hl,_sprite
1497  0441  86          	add	a, (hl)
1498  0442  6F          	ld	l, a
1499  0443  3E 00       	ld	a, +((_col) / 256)
1500  0445  CE 00       	adc	a,0x00
1501  0447  67          	ld	h, a
1502  0448  7E          	ld	a, (hl)
1503  0449  83          	add	a, e
1504  044A  47          	ld	b, a
1505  044B  2A 00 00    	ld	hl,(_sprite)
1506  044E  26 00       	ld	h,0x00
1507  0450  11 00 00    	ld	de,_lin
1508  0453  19          	add	hl,de
1509  0454  7E          	ld	a,(hl)
1510  0455  C6 0F       	add	a,0x0f
1511  0457  57          	ld	d, a
1512  0458  C5          	push	bc
1513  0459  4A          	ld	c, d
1514  045A  C5          	push	bc
1515  045B  CD 00 00    	call	_spr_calc_index
1516  045E  F1          	pop	af
1517  045F  C1          	pop	bc
1518  0460  7D          	ld	a,l
1519  0461  32 00 00    	ld	(_sprite_curr_index),a
1520  0464  5F          	ld	e,a
1521  0465  16 00       	ld	d,0x00
1522  0467  21 00 00    	ld	hl,_scr_map
1523  046A  19          	add	hl,de
1524  046B  7E          	ld	a,(hl)
1525  046C  47          	ld	b,a
1526  046D  D6 38       	sub	a,0x38
1527  046F  38 05       	jr	C,l_player_check_stairs_00114
1528  0471  3E 3C       	ld	a,0x3c
1529  0473  90          	sub	a, b
1530  0474  30 04       	jr	NC,l_player_check_stairs_00115
1531  0476              l_player_check_stairs_00114:
1532  0476  06 00       	ld	b,0x00
1533  0478  18 02       	jr	l_player_check_stairs_00116
1534  047A              l_player_check_stairs_00115:
1535  047A  06 01       	ld	b,0x01
1536  047C              l_player_check_stairs_00116:
1537  047C  79          	ld	a, c
1538  047D  B7          	or	a,a
1539  047E  20 03       	jr	NZ,l_player_check_stairs_00105
1540  0480  B0          	or	a,b
1541  0481  28 10       	jr	Z,l_player_check_stairs_00106
1542  0483              l_player_check_stairs_00105:
1543  0483  21 00 00    	ld	hl,_player_over_stair
1544  0486  7E          	ld	a, (hl)
1545  0487  B7          	or	a, a
1546  0488  20 17       	jr	NZ,l_player_check_stairs_00109
1547  048A  36 01       	ld	(hl),0x01
1548  048C  2E 66       	ld	l,0x66
1549  048E  CD A5 04    	call	_player_tile
1550  0491  18 0E       	jr	l_player_check_stairs_00109
1551  0493              l_player_check_stairs_00106:
1552  0493  21 00 00    	ld	hl,_player_over_stair
1553  0496  7E          	ld	a, (hl)
1554  0497  B7          	or	a, a
1555  0498  28 07       	jr	Z,l_player_check_stairs_00109
1556  049A  36 00       	ld	(hl),0x00
1557  049C  2E 54       	ld	l,0x54
1558  049E  CD A5 04    	call	_player_tile
1559  04A1              l_player_check_stairs_00109:
1560  04A1  33          	inc	sp
1561  04A2  DD E1       	pop	ix
1562  04A4  C9          	ret
1563  04A5              	SECTION code_compiler
1564  04A5              ;	---------------------------------
1565  04A5              ; Function player_tile
1566  04A5              ; ---------------------------------
1567  04A5              _player_tile:
1568  04A5  45          	ld	b, l
1569  04A6  3A 00 00    	ld	a,(_player_over_stair)
1570  04A9  B7          	or	a, a
1571  04AA  28 0D       	jr	Z,l_player_tile_00105
1572  04AC  2A 00 00    	ld	hl,(_sprite)
1573  04AF  26 00       	ld	h,0x00
1574  04B1  01 00 00    	ld	bc,_tile
1575  04B4  09          	add	hl,bc
1576  04B5  36 66       	ld	(hl),0x66
1577  04B7  18 41       	jr	l_player_tile_00107
1578  04B9              l_player_tile_00105:
1579  04B9  78          	ld	a, b
1580  04BA  D6 64       	sub	a,0x64
1581  04BC  20 1F       	jr	NZ,l_player_tile_00102
1582  04BE  2A 00 00    	ld	hl,(_sprite)
1583  04C1  26 00       	ld	h,0x00
1584  04C3  11 00 00    	ld	de,_tile
1585  04C6  19          	add	hl,de
1586  04C7  E5          	push	hl
1587  04C8  3E 01       	ld	a,0x01
1588  04CA  21 00 00    	ld	hl,_sprite
1589  04CD  F5          	push	af
1590  04CE  33          	inc	sp
1591  04CF  7E          	ld	a, (hl)
1592  04D0  48          	ld	c,b
1593  04D1  47          	ld	b,a
1594  04D2  C5          	push	bc
1595  04D3  CD 00 00    	call	_spr_tile_dir
1596  04D6  F1          	pop	af
1597  04D7  33          	inc	sp
1598  04D8  D1          	pop	de
1599  04D9  7D          	ld	a,l
1600  04DA  12          	ld	(de), a
1601  04DB  18 1D       	jr	l_player_tile_00107
1602  04DD              l_player_tile_00102:
1603  04DD  2A 00 00    	ld	hl,(_sprite)
1604  04E0  26 00       	ld	h,0x00
1605  04E2  11 00 00    	ld	de,_tile
1606  04E5  19          	add	hl,de
1607  04E6  E5          	push	hl
1608  04E7  3E 08       	ld	a,0x08
1609  04E9  21 00 00    	ld	hl,_sprite
1610  04EC  F5          	push	af
1611  04ED  33          	inc	sp
1612  04EE  7E          	ld	a, (hl)
1613  04EF  48          	ld	c,b
1614  04F0  47          	ld	b,a
1615  04F1  C5          	push	bc
1616  04F2  CD 00 00    	call	_spr_tile_dir
1617  04F5  F1          	pop	af
1618  04F6  33          	inc	sp
1619  04F7  D1          	pop	de
1620  04F8  7D          	ld	a,l
1621  04F9  12          	ld	(de), a
1622  04FA              l_player_tile_00107:
1623  04FA  C9          	ret
1624  04FB              	SECTION code_compiler
1625  04FB              ;	---------------------------------
1626  04FB              ; Function player_move_input
1627  04FB              ; ---------------------------------
1628  04FB              _player_move_input:
1629  04FB  CD BD 00    	call	_player_check_input
1630  04FE  7D          	ld	a, l
1631  04FF  B7          	or	a, a
1632  0500  CA 6E 06    	jp	Z, l_player_move_input_00136
1633  0503  CD 71 06    	call	_player_fire
1634  0506  7D          	ld	a, l
1635  0507  B7          	or	a, a
1636  0508  28 0A       	jr	Z,l_player_move_input_00102
1637  050A  21 00 00    	ld	hl,_dirs
1638  050D  36 00       	ld	(hl),0x00
1639  050F  2E 00       	ld	l,0x00
1640  0511  C3 70 06    	jp	l_player_move_input_00137
1641  0514              l_player_move_input_00102:
1642  0514  21 00 00    	ld	hl,_dirs
1643  0517  CB 7E       	bit	7, (hl)
1644  0519  28 67       	jr	Z,l_player_move_input_00106
1645  051B  21 00 00    	ld	hl,_player_vel_inc
1646  051E  36 01       	ld	(hl),0x01
1647  0520  CD 00 00    	call	_ay_is_playing
1648  0523  7D          	ld	a, l
1649  0524  D6 03       	sub	a,0x03
1650  0526  28 06       	jr	Z,l_player_move_input_00104
1651  0528  21 00 00    	ld	hl,_ay_effect_03
1652  052B  CD 00 00    	call	_ay_fx_play
1653  052E              l_player_move_input_00104:
1654  052E  21 00 00    	ld	hl,_player_over_stair
1655  0531  36 00       	ld	(hl),0x00
1656  0533  CD 00 00    	call	_sound_jump
1657  0536  21 00 00    	ld	hl,_s_state
1658  0539  7E          	ld	a,(hl)
1659  053A  F6 01       	or	a,0x01
1660  053C  E6 FD       	and	a,0xfd
1661  053E  77          	ld	(hl),a
1662  053F  2A 00 00    	ld	hl,(_sprite)
1663  0542  26 00       	ld	h,0x00
1664  0544  01 00 00    	ld	bc,_jump_lin
1665  0547  09          	add	hl,bc
1666  0548  4D          	ld	c,l
1667  0549  44          	ld	b,h
1668  054A  2A 00 00    	ld	hl,(_sprite)
1669  054D  26 00       	ld	h,0x00
1670  054F  11 00 00    	ld	de,_lin
1671  0552  19          	add	hl,de
1672  0553  7E          	ld	a,(hl)
1673  0554  02          	ld	(bc),a
1674  0555  2A 00 00    	ld	hl,(_sprite)
1675  0558  26 00       	ld	h,0x00
1676  055A  01 00 00    	ld	bc,_state
1677  055D  09          	add	hl,bc
1678  055E  3A 00 00    	ld	a,(_s_state)
1679  0561  77          	ld	(hl),a
1680  0562  2E 58       	ld	l,0x58
1681  0564  CD A5 04    	call	_player_tile
1682  0567  2A 00 00    	ld	hl,(_sprite)
1683  056A  26 00       	ld	h,0x00
1684  056C  01 00 00    	ld	bc,_sprite_speed_alt
1685  056F  09          	add	hl,bc
1686  0570  36 02       	ld	(hl),0x02
1687  0572  21 00 00    	ld	hl,_player_slide
1688  0575  36 00       	ld	(hl),0x00
1689  0577  3A 00 00    	ld	a,(_player_vel_y0)
1690  057A  32 00 00    	ld	(_player_vel_y),a
1691  057D  2E 01       	ld	l,0x01
1692  057F  C3 70 06    	jp	l_player_move_input_00137
1693  0582              l_player_move_input_00106:
1694  0582  21 00 00    	ld	hl,_dirs
1695  0585  CB 5E       	bit	3, (hl)
1696  0587  28 33       	jr	Z,l_player_move_input_00110
1697  0589  21 00 00    	ld	hl,_s_state
1698  058C  7E          	ld	a,(hl)
1699  058D  F6 04       	or	a,0x04
1700  058F  E6 F7       	and	a,0xf7
1701  0591  77          	ld	(hl),a
1702  0592  01 00 00    	ld	bc,_state_a+0
1703  0595  79          	ld	a, c
1704  0596  21 00 00    	ld	hl,_sprite
1705  0599  86          	add	a, (hl)
1706  059A  5F          	ld	e, a
1707  059B  78          	ld	a, b
1708  059C  CE 00       	adc	a,0x00
1709  059E  57          	ld	d, a
1710  059F  1A          	ld	a, (de)
1711  05A0  F6 10       	or	a,0x10
1712  05A2  12          	ld	(de), a
1713  05A3  79          	ld	a, c
1714  05A4  86          	add	a, (hl)
1715  05A5  4F          	ld	c, a
1716  05A6  78          	ld	a, b
1717  05A7  CE 00       	adc	a,0x00
1718  05A9  47          	ld	b, a
1719  05AA  0A          	ld	a, (bc)
1720  05AB  E6 F7       	and	a,0xf7
1721  05AD  02          	ld	(bc), a
1722  05AE  3A 00 00    	ld	a,(_player_over_stair)
1723  05B1  B7          	or	a, a
1724  05B2  28 05       	jr	Z,l_player_move_input_00108
1725  05B4  2E 00       	ld	l,0x00
1726  05B6  CD FD 03    	call	_player_check_stairs
1727  05B9              l_player_move_input_00108:
1728  05B9  CD 00 00    	call	_spr_move_horizontal
1729  05BC              l_player_move_input_00110:
1730  05BC  21 00 00    	ld	hl,_dirs
1731  05BF  CB 56       	bit	2, (hl)
1732  05C1  28 33       	jr	Z,l_player_move_input_00114
1733  05C3  21 00 00    	ld	hl,_s_state
1734  05C6  7E          	ld	a,(hl)
1735  05C7  F6 08       	or	a,0x08
1736  05C9  E6 FB       	and	a,0xfb
1737  05CB  77          	ld	(hl),a
1738  05CC  01 00 00    	ld	bc,_state_a+0
1739  05CF  79          	ld	a, c
1740  05D0  21 00 00    	ld	hl,_sprite
1741  05D3  86          	add	a, (hl)
1742  05D4  5F          	ld	e, a
1743  05D5  78          	ld	a, b
1744  05D6  CE 00       	adc	a,0x00
1745  05D8  57          	ld	d, a
1746  05D9  1A          	ld	a, (de)
1747  05DA  F6 08       	or	a,0x08
1748  05DC  12          	ld	(de), a
1749  05DD  79          	ld	a, c
1750  05DE  86          	add	a, (hl)
1751  05DF  4F          	ld	c, a
1752  05E0  78          	ld	a, b
1753  05E1  CE 00       	adc	a,0x00
1754  05E3  47          	ld	b, a
1755  05E4  0A          	ld	a, (bc)
1756  05E5  E6 EF       	and	a,0xef
1757  05E7  02          	ld	(bc), a
1758  05E8  3A 00 00    	ld	a,(_player_over_stair)
1759  05EB  B7          	or	a, a
1760  05EC  28 05       	jr	Z,l_player_move_input_00112
1761  05EE  2E 00       	ld	l,0x00
1762  05F0  CD FD 03    	call	_player_check_stairs
1763  05F3              l_player_move_input_00112:
1764  05F3  CD 00 00    	call	_spr_move_horizontal
1765  05F6              l_player_move_input_00114:
1766  05F6  21 00 00    	ld	hl,_dirs
1767  05F9  CB 46       	bit	0, (hl)
1768  05FB  28 2B       	jr	Z,l_player_move_input_00124
1769  05FD  2E 00       	ld	l,0x00
1770  05FF  CD FD 03    	call	_player_check_stairs
1771  0602  3A 00 00    	ld	a,(_player_over_stair)
1772  0605  B7          	or	a, a
1773  0606  28 0E       	jr	Z,l_player_move_input_00121
1774  0608  CD 00 00    	call	_spr_move_up
1775  060B  7D          	ld	a, l
1776  060C  B7          	or	a, a
1777  060D  28 19       	jr	Z,l_player_move_input_00124
1778  060F  21 00 00    	ld	hl,_player_over_stair
1779  0612  36 00       	ld	(hl),0x00
1780  0614  18 12       	jr	l_player_move_input_00124
1781  0616              l_player_move_input_00121:
1782  0616  21 00 00    	ld	hl,_dirs
1783  0619  CB 5E       	bit	3, (hl)
1784  061B  20 0B       	jr	NZ,l_player_move_input_00124
1785  061D  21 00 00    	ld	hl,_dirs
1786  0620  CB 56       	bit	2, (hl)
1787  0622  20 04       	jr	NZ,l_player_move_input_00124
1788  0624  2E 00       	ld	l,0x00
1789  0626  18 48       	jr	l_player_move_input_00137
1790  0628              l_player_move_input_00124:
1791  0628  21 00 00    	ld	hl,_dirs
1792  062B  CB 4E       	bit	1, (hl)
1793  062D  28 29       	jr	Z,l_player_move_input_00134
1794  062F  CD B7 03    	call	_player_check_stairs_down
1795  0632  3A 00 00    	ld	a,(_player_over_stair)
1796  0635  B7          	or	a, a
1797  0636  28 0E       	jr	Z,l_player_move_input_00131
1798  0638  CD 00 00    	call	_spr_move_down
1799  063B  7D          	ld	a, l
1800  063C  B7          	or	a, a
1801  063D  28 19       	jr	Z,l_player_move_input_00134
1802  063F  21 00 00    	ld	hl,_player_over_stair
1803  0642  36 00       	ld	(hl),0x00
1804  0644  18 12       	jr	l_player_move_input_00134
1805  0646              l_player_move_input_00131:
1806  0646  21 00 00    	ld	hl,_dirs
1807  0649  CB 5E       	bit	3, (hl)
1808  064B  20 0B       	jr	NZ,l_player_move_input_00134
1809  064D  21 00 00    	ld	hl,_dirs
1810  0650  CB 56       	bit	2, (hl)
1811  0652  20 04       	jr	NZ,l_player_move_input_00134
1812  0654  2E 00       	ld	l,0x00
1813  0656  18 18       	jr	l_player_move_input_00137
1814  0658              l_player_move_input_00134:
1815  0658  2A 00 00    	ld	hl,(_sprite)
1816  065B  26 00       	ld	h,0x00
1817  065D  01 00 00    	ld	bc,_state
1818  0660  09          	add	hl,bc
1819  0661  3A 00 00    	ld	a,(_s_state)
1820  0664  77          	ld	(hl),a
1821  0665  2E 54       	ld	l,0x54
1822  0667  CD A5 04    	call	_player_tile
1823  066A  2E 01       	ld	l,0x01
1824  066C  18 02       	jr	l_player_move_input_00137
1825  066E              l_player_move_input_00136:
1826  066E  2E 00       	ld	l,0x00
1827  0670              l_player_move_input_00137:
1828  0670  C9          	ret
1829  0671              	SECTION code_compiler
1830  0671              ;	---------------------------------
1831  0671              ; Function player_fire
1832  0671              ; ---------------------------------
1833  0671              _player_fire:
1834  0671  21 00 00    	ld	hl,_dirs
1835  0674  CB 7E       	bit	7, (hl)
1836  0676  28 13       	jr	Z,l_player_fire_00102
1837  0678  21 00 00    	ld	hl,_dirs
1838  067B  CB 4E       	bit	1, (hl)
1839  067D  28 0C       	jr	Z,l_player_fire_00102
1840  067F  21 07 70    	ld	hl,0x7007
1841  0682  E5          	push	hl
1842  0683  CD 00 00    	call	_game_shoot_fire
1843  0686  F1          	pop	af
1844  0687  2E 01       	ld	l,0x01
1845  0689  18 02       	jr	l_player_fire_00104
1846  068B              l_player_fire_00102:
1847  068B  2E 00       	ld	l,0x00
1848  068D              l_player_fire_00104:
1849  068D  C9          	ret
1850  068E              	SECTION code_compiler
1851  068E              ;	---------------------------------
1852  068E              ; Function player_check_map
1853  068E              ; ---------------------------------
1854  068E              _player_check_map:
1855  068E  2A 00 00    	ld	hl,(_sprite)
1856  0691  26 00       	ld	h,0x00
1857  0693  5D          	ld	e,l
1858  0694  01 00 00    	ld	bc,_col
1859  0697  09          	add	hl,bc
1860  0698  46          	ld	b,(hl)
1861  0699  16 00       	ld	d,0x00
1862  069B  21 00 00    	ld	hl,_lin
1863  069E  19          	add	hl,de
1864  069F  4E          	ld	c, (hl)
1865  06A0  C5          	push	bc
1866  06A1  CD 00 00    	call	_spr_calc_index
1867  06A4  F1          	pop	af
1868  06A5  7D          	ld	a,l
1869  06A6  32 00 00    	ld	(_sprite_curr_index),a
1870  06A9  2A 00 00    	ld	hl,(_sprite)
1871  06AC  26 00       	ld	h,0x00
1872  06AE  01 00 00    	ld	bc,_col
1873  06B1  09          	add	hl,bc
1874  06B2  4E          	ld	c, (hl)
1875  06B3  3A 00 00    	ld	a,(_sprite)
1876  06B6  5F          	ld	e,a
1877  06B7  16 00       	ld	d,0x00
1878  06B9  21 00 00    	ld	hl,_lin
1879  06BC  19          	add	hl,de
1880  06BD  7E          	ld	a,(hl)
1881  06BE  E6 0F       	and	a,0x0f
1882  06C0  CB 41       	bit	0, c
1883  06C2  20 17       	jr	NZ,l_player_check_map_00108
1884  06C4  B7          	or	a, a
1885  06C5  20 05       	jr	NZ,l_player_check_map_00102
1886  06C7  CD 06 07    	call	_player_pick_item
1887  06CA  18 39       	jr	l_player_check_map_00110
1888  06CC              l_player_check_map_00102:
1889  06CC  CD 06 07    	call	_player_pick_item
1890  06CF  21 00 00    	ld	hl,_sprite_curr_index
1891  06D2  7E          	ld	a, (hl)
1892  06D3  C6 10       	add	a,0x10
1893  06D5  77          	ld	(hl), a
1894  06D6  CD 06 07    	call	_player_pick_item
1895  06D9  18 2A       	jr	l_player_check_map_00110
1896  06DB              l_player_check_map_00108:
1897  06DB  B7          	or	a, a
1898  06DC  20 0C       	jr	NZ,l_player_check_map_00105
1899  06DE  CD 06 07    	call	_player_pick_item
1900  06E1  21 00 00    	ld	hl,_sprite_curr_index
1901  06E4  34          	inc	(hl)
1902  06E5  CD 06 07    	call	_player_pick_item
1903  06E8  18 1B       	jr	l_player_check_map_00110
1904  06EA              l_player_check_map_00105:
1905  06EA  CD 06 07    	call	_player_pick_item
1906  06ED  21 00 00    	ld	hl,_sprite_curr_index
1907  06F0  34          	inc	(hl)
1908  06F1  CD 06 07    	call	_player_pick_item
1909  06F4  21 00 00    	ld	hl,_sprite_curr_index
1910  06F7  7E          	ld	a, (hl)
1911  06F8  C6 0F       	add	a,0x0f
1912  06FA  77          	ld	(hl), a
1913  06FB  CD 06 07    	call	_player_pick_item
1914  06FE  21 00 00    	ld	hl,_sprite_curr_index
1915  0701  34          	inc	(hl)
1916  0702  CD 06 07    	call	_player_pick_item
1917  0705              l_player_check_map_00110:
1918  0705  C9          	ret
1919  0706              	SECTION code_compiler
1920  0706              ;	---------------------------------
1921  0706              ; Function player_pick_item
1922  0706              ; ---------------------------------
1923  0706              _player_pick_item:
1924  0706  2A 00 00    	ld	hl,(_sprite_curr_index)
1925  0709  26 00       	ld	h,0x00
1926  070B  01 00 00    	ld	bc,_scr_map
1927  070E  09          	add	hl,bc
1928  070F  4E          	ld	c,(hl)
1929  0710  3E 27       	ld	a,0x27
1930  0712  91          	sub	a, c
1931  0713  3E 00       	ld	a,0x00
1932  0715  17          	rla
1933  0716  47          	ld	b, a
1934  0717  79          	ld	a, c
1935  0718  D6 18       	sub	a,0x18
1936  071A  DA EF 07    	jp	C, l_player_pick_item_00107
1937  071D  CB 40       	bit	0, b
1938  071F  C2 EF 07    	jp	NZ, l_player_pick_item_00107
1939  0722  CD 00 00    	call	_ay_reset
1940  0725  21 00 00    	ld	hl,_ay_effect_10
1941  0728  CD 00 00    	call	_ay_fx_play
1942  072B  C5          	push	bc
1943  072C  CD 00 00    	call	_sound_coin
1944  072F  C1          	pop	bc
1945  0730  2A 00 00    	ld	hl,(_sprite_curr_index)
1946  0733  26 00       	ld	h,0x00
1947  0735  11 00 00    	ld	de,_scr_map
1948  0738  19          	add	hl,de
1949  0739  AF          	xor	a,a
1950  073A  77          	ld	(hl),a
1951  073B  3A 00 00    	ld	a,(_sprite_curr_index)
1952  073E  5F          	ld	e,a
1953  073F  16 00       	ld	d,0x00
1954  0741  C5          	push	bc
1955  0742  D5          	push	de
1956  0743  CD 00 00    	call	_game_obj_set
1957  0746  F1          	pop	af
1958  0747  C1          	pop	bc
1959  0748  3A 00 00    	ld	a,(_sprite_curr_index)
1960  074B  07          	rlca
1961  074C  07          	rlca
1962  074D  07          	rlca
1963  074E  07          	rlca
1964  074F  E6 0F       	and	a,0x0f
1965  0751  07          	rlca
1966  0752  07          	rlca
1967  0753  07          	rlca
1968  0754  07          	rlca
1969  0755  E6 F0       	and	a,0xf0
1970  0757  32 00 00    	ld	(_s_lin1),a
1971  075A  3A 00 00    	ld	a,(_sprite_curr_index)
1972  075D  E6 0F       	and	a,0x0f
1973  075F  87          	add	a, a
1974  0760  32 00 00    	ld	(_s_col1),a
1975  0763  C5          	push	bc
1976  0764  21 00 00    	ld	hl,0x0000
1977  0767  E5          	push	hl
1978  0768  21 78 03    	ld	hl,0x0378
1979  076B  E5          	push	hl
1980  076C  F5          	push	af
1981  076D  33          	inc	sp
1982  076E  3A 00 00    	ld	a,(_s_lin1)
1983  0771  F5          	push	af
1984  0772  33          	inc	sp
1985  0773  CD 00 00    	call	_spr_add_anim
1986  0776  F1          	pop	af
1987  0777  F1          	pop	af
1988  0778  F1          	pop	af
1989  0779  C1          	pop	bc
1990  077A  79          	ld	a,c
1991  077B  FE 1C       	cp	a,0x1c
1992  077D  28 0E       	jr	Z,l_player_pick_item_00101
1993  077F  FE 1D       	cp	a,0x1d
1994  0781  28 23       	jr	Z,l_player_pick_item_00102
1995  0783  FE 1E       	cp	a,0x1e
1996  0785  28 38       	jr	Z,l_player_pick_item_00103
1997  0787  D6 1F       	sub	a,0x1f
1998  0789  28 4D       	jr	Z,l_player_pick_item_00104
1999  078B  18 62       	jr	l_player_pick_item_00107
2000  078D              l_player_pick_item_00101:
2001  078D  21 00 00    	ld	hl,_player_keys
2002  0790  36 01       	ld	(hl),0x01
2003  0792  21 00 00    	ld	hl,_screen_ink
2004  0795  36 07       	ld	(hl),0x07
2005  0797  C5          	push	bc
2006  0798  21 00 00    	ld	hl,___str_0
2007  079B  E5          	push	hl
2008  079C  21 16 03    	ld	hl,0x0316
2009  079F  E5          	push	hl
2010  07A0  CD 00 00    	call	_zx_print_str
2011  07A3  C1          	pop	bc
2012  07A4  18 49       	jr	l_player_pick_item_00107
2013  07A6              l_player_pick_item_00102:
2014  07A6  21 01 00    	ld	hl, +(_player_keys + 0x0001)
2015  07A9  36 01       	ld	(hl),0x01
2016  07AB  21 00 00    	ld	hl,_screen_ink
2017  07AE  36 02       	ld	(hl),0x02
2018  07B0  C5          	push	bc
2019  07B1  21 00 00    	ld	hl,___str_0
2020  07B4  E5          	push	hl
2021  07B5  21 16 04    	ld	hl,0x0416
2022  07B8  E5          	push	hl
2023  07B9  CD 00 00    	call	_zx_print_str
2024  07BC  C1          	pop	bc
2025  07BD  18 30       	jr	l_player_pick_item_00107
2026  07BF              l_player_pick_item_00103:
2027  07BF  21 02 00    	ld	hl, +(_player_keys + 0x0002)
2028  07C2  36 01       	ld	(hl),0x01
2029  07C4  21 00 00    	ld	hl,_screen_ink
2030  07C7  36 04       	ld	(hl),0x04
2031  07C9  C5          	push	bc
2032  07CA  21 00 00    	ld	hl,___str_0
2033  07CD  E5          	push	hl
2034  07CE  21 16 05    	ld	hl,0x0516
2035  07D1  E5          	push	hl
2036  07D2  CD 00 00    	call	_zx_print_str
2037  07D5  C1          	pop	bc
2038  07D6  18 17       	jr	l_player_pick_item_00107
2039  07D8              l_player_pick_item_00104:
2040  07D8  21 03 00    	ld	hl, +(_player_keys + 0x0003)
2041  07DB  36 01       	ld	(hl),0x01
2042  07DD  21 00 00    	ld	hl,_screen_ink
2043  07E0  36 05       	ld	(hl),0x05
2044  07E2  C5          	push	bc
2045  07E3  21 00 00    	ld	hl,___str_0
2046  07E6  E5          	push	hl
2047  07E7  21 16 06    	ld	hl,0x0616
2048  07EA  E5          	push	hl
2049  07EB  CD 00 00    	call	_zx_print_str
2050  07EE  C1          	pop	bc
2051  07EF              l_player_pick_item_00107:
2052  07EF  CB 40       	bit	0, b
2053  07F1  C8          	ret	Z
2054  07F2  79          	ld	a, c
2055  07F3  D6 30       	sub	a,0x30
2056  07F5  D0          	ret	NC
2057  07F6  3A 07 00    	ld	a,(_lin + 0x0007)
2058  07F9  E6 03       	and	a,0x03
2059  07FB  C8          	ret	Z
2060  07FC  2E 06       	ld	l,0x06
2061  07FE  CD 00 00    	call	_zx_border_fastcall
2062  0801  2E 32       	ld	l,0x32
2063  0803  CD CA 0E    	call	_player_hit
2064  0806  C9          	ret
2065  0807              	SECTION rodata_compiler
2066  0000              ___str_0:
2067  0000  5D          	DEFM "]"
2068  0001  00          	DEFB 0x00
2069  0002              	SECTION code_compiler
2070  0807              ;	---------------------------------
2071  0807              ; Function player_hit_platform
2072  0807              ; ---------------------------------
2073  0807              _player_hit_platform:
2074  0807  3A 00 00    	ld	a,(_player_hit_lin)
2075  080A  B7          	or	a, a
2076  080B  C2 3A 0A    	jp	NZ, l_player_hit_platform_00133
2077  080E  2A 00 00    	ld	hl,(_sprite)
2078  0811  26 00       	ld	h,0x00
2079  0813  01 00 00    	ld	bc,_lin
2080  0816  09          	add	hl,bc
2081  0817  4E          	ld	c,(hl)
2082  0818  3E 10       	ld	a,0x10
2083  081A  91          	sub	a, c
2084  081B  D2 3A 0A    	jp	NC, l_player_hit_platform_00133
2085  081E  01 00 00    	ld	bc,_scr_map
2086  0821  2A 00 00    	ld	hl,(_index1)
2087  0824  09          	add	hl,bc
2088  0825  7E          	ld	a,(hl)
2089  0826  D6 45       	sub	a,0x45
2090  0828  DA 3A 0A    	jp	C, l_player_hit_platform_00133
2091  082B  01 00 00    	ld	bc,_spr_timer+0
2092  082E  2A 00 00    	ld	hl,(_sprite)
2093  0831  26 00       	ld	h,0x00
2094  0833  29          	add	hl, hl
2095  0834  09          	add	hl,bc
2096  0835  ED 5B 00 00 	ld	de,(_curr_time)
2097  0839  73          	ld	(hl),e
2098  083A  23          	inc	hl
2099  083B  72          	ld	(hl),d
2100  083C  2A 00 00    	ld	hl,(_sprite)
2101  083F  26 00       	ld	h,0x00
2102  0841  01 00 00    	ld	bc,_lin
2103  0844  09          	add	hl,bc
2104  0845  4E          	ld	c,(hl)
2105  0846  06 00       	ld	b,0x00
2106  0848  79          	ld	a, c
2107  0849  C6 F8       	add	a,0xf8
2108  084B  4F          	ld	c, a
2109  084C  78          	ld	a, b
2110  084D  CE FF       	adc	a,0xff
2111  084F  5F          	ld	e, a
2112  0850  06 04       	ld	b,0x04
2113  0852              l_player_hit_platform_00218:
2114  0852  CB 2B       	sra	e
2115  0854  CB 19       	rr	c
2116  0856  10 FA       	djnz	l_player_hit_platform_00218
2117  0858  79          	ld	a, c
2118  0859  07          	rlca
2119  085A  07          	rlca
2120  085B  07          	rlca
2121  085C  07          	rlca
2122  085D  E6 F0       	and	a,0xf0
2123  085F  C6 08       	add	a,0x08
2124  0861  32 00 00    	ld	(_player_hit_lin),a
2125  0864  2A 00 00    	ld	hl,(_sprite)
2126  0867  26 00       	ld	h,0x00
2127  0869  01 00 00    	ld	bc,_col
2128  086C  09          	add	hl,bc
2129  086D  4E          	ld	c,(hl)
2130  086E  CB 41       	bit	0,c
2131  0870  20 06       	jr	NZ,l_player_hit_platform_00111
2132  0872  21 00 00    	ld	hl,_player_hit_col
2133  0875  71          	ld	(hl), c
2134  0876  18 33       	jr	l_player_hit_platform_00112
2135  0878              l_player_hit_platform_00111:
2136  0878  2A 00 00    	ld	hl,(_sprite)
2137  087B  26 00       	ld	h,0x00
2138  087D  11 00 00    	ld	de,_state
2139  0880  19          	add	hl,de
2140  0881  5E          	ld	e, (hl)
2141  0882  41          	ld	b, c
2142  0883  04          	inc	b
2143  0884  0D          	dec	c
2144  0885  CB 5B       	bit	3, e
2145  0887  28 12       	jr	Z,l_player_hit_platform_00108
2146  0889  3A 00 00    	ld	a,(_g_player_hit_right)
2147  088C  B7          	or	a, a
2148  088D  28 06       	jr	Z,l_player_hit_platform_00102
2149  088F  21 00 00    	ld	hl,_player_hit_col
2150  0892  70          	ld	(hl), b
2151  0893  18 16       	jr	l_player_hit_platform_00112
2152  0895              l_player_hit_platform_00102:
2153  0895  21 00 00    	ld	hl,_player_hit_col
2154  0898  71          	ld	(hl), c
2155  0899  18 10       	jr	l_player_hit_platform_00112
2156  089B              l_player_hit_platform_00108:
2157  089B  3A 00 00    	ld	a,(_g_player_hit_left)
2158  089E  B7          	or	a, a
2159  089F  28 06       	jr	Z,l_player_hit_platform_00105
2160  08A1  21 00 00    	ld	hl,_player_hit_col
2161  08A4  71          	ld	(hl), c
2162  08A5  18 04       	jr	l_player_hit_platform_00112
2163  08A7              l_player_hit_platform_00105:
2164  08A7  21 00 00    	ld	hl,_player_hit_col
2165  08AA  70          	ld	(hl), b
2166  08AB              l_player_hit_platform_00112:
2167  08AB  01 00 00    	ld	bc,_scr_map
2168  08AE  2A 00 00    	ld	hl,(_index1)
2169  08B1  09          	add	hl,bc
2170  08B2  7E          	ld	a,(hl)
2171  08B3  D6 4B       	sub	a,0x4b
2172  08B5  C2 2E 0A    	jp	NZ,l_player_hit_platform_00131
2173  08B8  2E 01       	ld	l,0x01
2174  08BA  CD 00 00    	call	_zx_border_fastcall
2175  08BD  21 00 00    	ld	hl,_tmp0
2176  08C0  36 00       	ld	(hl),0x00
2177  08C2              l_player_hit_platform_00127:
2178  08C2  21 00 00    	ld	hl,_tmp0
2179  08C5  7E          	ld	a, (hl)
2180  08C6  D6 07       	sub	a,0x07
2181  08C8  D2 2E 0A    	jp	NC, l_player_hit_platform_00131
2182  08CB  4E          	ld	c,(hl)
2183  08CC  06 00       	ld	b,0x00
2184  08CE  21 00 00    	ld	hl,_mush_index
2185  08D1  09          	add	hl,bc
2186  08D2  4E          	ld	c, (hl)
2187  08D3  06 00       	ld	b,0x00
2188  08D5  2A 00 00    	ld	hl,(_index1)
2189  08D8  AF          	xor	a,a
2190  08D9  ED 42       	sbc	hl,bc
2191  08DB  C2 27 0A    	jp	NZ,l_player_hit_platform_00126
2192  08DE  2A 00 00    	ld	hl,(_sprite)
2193  08E1  26 00       	ld	h,0x00
2194  08E3  01 00 00    	ld	bc,_lin
2195  08E6  09          	add	hl,bc
2196  08E7  7E          	ld	a,(hl)
2197  08E8  07          	rlca
2198  08E9  07          	rlca
2199  08EA  07          	rlca
2200  08EB  07          	rlca
2201  08EC  E6 0F       	and	a,0x0f
2202  08EE  07          	rlca
2203  08EF  07          	rlca
2204  08F0  07          	rlca
2205  08F1  07          	rlca
2206  08F2  E6 F0       	and	a,0xf0
2207  08F4  C6 E0       	add	a,0xe0
2208  08F6  32 00 00    	ld	(_s_lin1),a
2209  08F9  2A 00 00    	ld	hl,(_sprite)
2210  08FC  26 00       	ld	h,0x00
2211  08FE  01 00 00    	ld	bc,_col
2212  0901  09          	add	hl,bc
2213  0902  7E          	ld	a,(hl)
2214  0903  CB 3F       	srl	a
2215  0905  87          	add	a, a
2216  0906  32 00 00    	ld	(_s_col1),a
2217  0909  21 00 00    	ld	hl,_tmp
2218  090C  36 00       	ld	(hl),0x00
2219  090E              l_player_hit_platform_00115:
2220  090E  21 00 00    	ld	hl,_tmp
2221  0911  7E          	ld	a, (hl)
2222  0912  D6 07       	sub	a,0x07
2223  0914  30 1C       	jr	NC,l_player_hit_platform_00117
2224  0916  4E          	ld	c,(hl)
2225  0917  06 00       	ld	b,0x00
2226  0919  21 00 00    	ld	hl,_mush_index
2227  091C  09          	add	hl,bc
2228  091D  4E          	ld	c, (hl)
2229  091E  06 00       	ld	b,0x00
2230  0920  21 00 00    	ld	hl,_index1
2231  0923  7E          	ld	a, (hl)
2232  0924  91          	sub	a, c
2233  0925  20 05       	jr	NZ,l_player_hit_platform_00226
2234  0927  23          	inc	hl
2235  0928  7E          	ld	a, (hl)
2236  0929  90          	sub	a, b
2237  092A  28 06       	jr	Z,l_player_hit_platform_00117
2238  092C              l_player_hit_platform_00226:
2239  092C  21 00 00    	ld	hl,_tmp
2240  092F  34          	inc	(hl)
2241  0930  18 DC       	jr	l_player_hit_platform_00115
2242  0932              l_player_hit_platform_00117:
2243  0932  2A 00 00    	ld	hl,(_tmp)
2244  0935  26 00       	ld	h,0x00
2245  0937  01 00 00    	ld	bc,_mush_class
2246  093A  09          	add	hl,bc
2247  093B  7E          	ld	a,(hl)
2248  093C  FE 78       	cp	a,0x78
2249  093E  28 18       	jr	Z,l_player_hit_platform_00118
2250  0940  FE 79       	cp	a,0x79
2251  0942  28 2F       	jr	Z,l_player_hit_platform_00119
2252  0944  FE 7A       	cp	a,0x7a
2253  0946  28 5F       	jr	Z,l_player_hit_platform_00121
2254  0948  FE 7B       	cp	a,0x7b
2255  094A  28 41       	jr	Z,l_player_hit_platform_00120
2256  094C  FE 7C       	cp	a,0x7c
2257  094E  CA DB 09    	jp	Z,l_player_hit_platform_00123
2258  0951  D6 7D       	sub	a,0x7d
2259  0953  28 6C       	jr	Z,l_player_hit_platform_00122
2260  0955  C3 F3 09    	jp	l_player_hit_platform_00124
2261  0958              l_player_hit_platform_00118:
2262  0958  2E 02       	ld	l,0x02
2263  095A  CD 00 00    	call	_zx_border_fastcall
2264  095D  3A 00 00    	ld	a,(_s_col1)
2265  0960  21 08 FF    	ld	hl,0xff08
2266  0963  E5          	push	hl
2267  0964  F5          	push	af
2268  0965  33          	inc	sp
2269  0966  3A 00 00    	ld	a,(_s_lin1)
2270  0969  F5          	push	af
2271  096A  33          	inc	sp
2272  096B  CD 00 00    	call	_enemy_init
2273  096E  F1          	pop	af
2274  096F  F1          	pop	af
2275  0970  C3 F3 09    	jp	l_player_hit_platform_00124
2276  0973              l_player_hit_platform_00119:
2277  0973  2E 02       	ld	l,0x02
2278  0975  CD 00 00    	call	_zx_border_fastcall
2279  0978  3A 00 00    	ld	a,(_s_col1)
2280  097B  21 08 01    	ld	hl,0x0108
2281  097E  E5          	push	hl
2282  097F  F5          	push	af
2283  0980  33          	inc	sp
2284  0981  3A 00 00    	ld	a,(_s_lin1)
2285  0984  F5          	push	af
2286  0985  33          	inc	sp
2287  0986  CD 00 00    	call	_enemy_init
2288  0989  F1          	pop	af
2289  098A  F1          	pop	af
2290  098B  18 66       	jr	l_player_hit_platform_00124
2291  098D              l_player_hit_platform_00120:
2292  098D  2E 01       	ld	l,0x01
2293  098F  CD 00 00    	call	_zx_border_fastcall
2294  0992  3A 00 00    	ld	a,(_s_col1)
2295  0995  21 07 01    	ld	hl,0x0107
2296  0998  E5          	push	hl
2297  0999  F5          	push	af
2298  099A  33          	inc	sp
2299  099B  3A 00 00    	ld	a,(_s_lin1)
2300  099E  F5          	push	af
2301  099F  33          	inc	sp
2302  09A0  CD 00 00    	call	_enemy_init
2303  09A3  F1          	pop	af
2304  09A4  F1          	pop	af
2305  09A5  18 4C       	jr	l_player_hit_platform_00124
2306  09A7              l_player_hit_platform_00121:
2307  09A7  2E 01       	ld	l,0x01
2308  09A9  CD 00 00    	call	_zx_border_fastcall
2309  09AC  3A 00 00    	ld	a,(_s_col1)
2310  09AF  21 07 FF    	ld	hl,0xff07
2311  09B2  E5          	push	hl
2312  09B3  F5          	push	af
2313  09B4  33          	inc	sp
2314  09B5  3A 00 00    	ld	a,(_s_lin1)
2315  09B8  F5          	push	af
2316  09B9  33          	inc	sp
2317  09BA  CD 00 00    	call	_enemy_init
2318  09BD  F1          	pop	af
2319  09BE  F1          	pop	af
2320  09BF  18 32       	jr	l_player_hit_platform_00124
2321  09C1              l_player_hit_platform_00122:
2322  09C1  2E 05       	ld	l,0x05
2323  09C3  CD 00 00    	call	_zx_border_fastcall
2324  09C6  3A 00 00    	ld	a,(_s_col1)
2325  09C9  21 06 01    	ld	hl,0x0106
2326  09CC  E5          	push	hl
2327  09CD  F5          	push	af
2328  09CE  33          	inc	sp
2329  09CF  3A 00 00    	ld	a,(_s_lin1)
2330  09D2  F5          	push	af
2331  09D3  33          	inc	sp
2332  09D4  CD 00 00    	call	_enemy_init
2333  09D7  F1          	pop	af
2334  09D8  F1          	pop	af
2335  09D9  18 18       	jr	l_player_hit_platform_00124
2336  09DB              l_player_hit_platform_00123:
2337  09DB  2E 05       	ld	l,0x05
2338  09DD  CD 00 00    	call	_zx_border_fastcall
2339  09E0  3A 00 00    	ld	a,(_s_col1)
2340  09E3  21 06 FF    	ld	hl,0xff06
2341  09E6  E5          	push	hl
2342  09E7  F5          	push	af
2343  09E8  33          	inc	sp
2344  09E9  3A 00 00    	ld	a,(_s_lin1)
2345  09EC  F5          	push	af
2346  09ED  33          	inc	sp
2347  09EE  CD 00 00    	call	_enemy_init
2348  09F1  F1          	pop	af
2349  09F2  F1          	pop	af
2350  09F3              l_player_hit_platform_00124:
2351  09F3  2A 00 00    	ld	hl,(_index1)
2352  09F6  01 F0 FF    	ld	bc,0xfff0
2353  09F9  09          	add	hl,bc
2354  09FA  01 00 00    	ld	bc,_scr_map
2355  09FD  09          	add	hl,bc
2356  09FE  36 00       	ld	(hl),0x00
2357  0A00  2A 00 00    	ld	hl,(_index1)
2358  0A03  01 00 00    	ld	bc,_scr_map
2359  0A06  09          	add	hl,bc
2360  0A07  36 44       	ld	(hl),0x44
2361  0A09  2A 00 00    	ld	hl,(_index1)
2362  0A0C  01 F0 FF    	ld	bc,0xfff0
2363  0A0F  09          	add	hl,bc
2364  0A10  E5          	push	hl
2365  0A11  CD 00 00    	call	_game_obj_set
2366  0A14  F1          	pop	af
2367  0A15  3A 00 00    	ld	a,(_s_lin1)
2368  0A18  C6 10       	add	a,0x10
2369  0A1A  4F          	ld	c, a
2370  0A1B  3A 00 00    	ld	a, (_s_col1)
2371  0A1E  47          	ld	b,a
2372  0A1F  C5          	push	bc
2373  0A20  3E 44       	ld	a,0x44
2374  0A22  F5          	push	af
2375  0A23  33          	inc	sp
2376  0A24  CD 00 00    	call	_NIRVANAP_drawT_callee
2377  0A27              l_player_hit_platform_00126:
2378  0A27  21 00 00    	ld	hl,_tmp0
2379  0A2A  34          	inc	(hl)
2380  0A2B  C3 C2 08    	jp	l_player_hit_platform_00127
2381  0A2E              l_player_hit_platform_00131:
2382  0A2E  2E 01       	ld	l,0x01
2383  0A30  CD 00 00    	call	_spr_brick_anim
2384  0A33  CD 00 00    	call	_sound_hit_brick
2385  0A36  2E 01       	ld	l,0x01
2386  0A38  18 02       	jr	l_player_hit_platform_00136
2387  0A3A              l_player_hit_platform_00133:
2388  0A3A  2E 00       	ld	l,0x00
2389  0A3C              l_player_hit_platform_00136:
2390  0A3C  C9          	ret
2391  0A3D              	SECTION code_compiler
2392  0A3D              ;	---------------------------------
2393  0A3D              ; Function player_hit_platform_clear
2394  0A3D              ; ---------------------------------
2395  0A3D              _player_hit_platform_clear:
2396  0A3D  2A 00 00    	ld	hl,(_sprite)
2397  0A40  26 00       	ld	h,0x00
2398  0A42  29          	add	hl, hl
2399  0A43  11 00 00    	ld	de,_spr_timer
2400  0A46  19          	add	hl, de
2401  0A47  4E          	ld	c, (hl)
2402  0A48  23          	inc	hl
2403  0A49  46          	ld	b, (hl)
2404  0A4A  21 04 00    	ld	hl,0x0004
2405  0A4D  E5          	push	hl
2406  0A4E  C5          	push	bc
2407  0A4F  CD 00 00    	call	_game_check_time
2408  0A52  F1          	pop	af
2409  0A53  F1          	pop	af
2410  0A54  7D          	ld	a, l
2411  0A55  B7          	or	a, a
2412  0A56  C8          	ret	Z
2413  0A57  2A FF FF    	ld	hl,(_player_hit_col - 1)
2414  0A5A  3A 00 00    	ld	a,(_player_hit_lin)
2415  0A5D  6F          	ld	l,a
2416  0A5E  E5          	push	hl
2417  0A5F  CD 00 00    	call	_spr_calc_index
2418  0A62  F1          	pop	af
2419  0A63  22 00 00    	ld	(_index1),hl
2420  0A66  2E 00       	ld	l,0x00
2421  0A68  CD 00 00    	call	_spr_brick_anim
2422  0A6B  21 00 00    	ld	hl,_player_hit_lin
2423  0A6E  36 00       	ld	(hl),0x00
2424  0A70  21 00 00    	ld	hl,_player_hit_col
2425  0A73  36 00       	ld	(hl),0x00
2426  0A75  C9          	ret
2427  0A76              	SECTION code_compiler
2428  0A76              ;	---------------------------------
2429  0A76              ; Function player_score_add
2430  0A76              ; ---------------------------------
2431  0A76              _player_score_add:
2432  0A76  ED 4B 00 00 	ld	bc,(_player_score)
2433  0A7A  09          	add	hl,bc
2434  0A7B  22 00 00    	ld	(_player_score),hl
2435  0A7E  3A 00 00    	ld	a,(_game_score_top)
2436  0A81  21 00 00    	ld	hl,_player_score
2437  0A84  96          	sub	a, (hl)
2438  0A85  3A 01 00    	ld	a,(_game_score_top + 1)
2439  0A88  23          	inc	hl
2440  0A89  9E          	sbc	a, (hl)
2441  0A8A  D2 00 00    	jp	NC,_game_print_score
2442  0A8D  2A 00 00    	ld	hl,(_player_score)
2443  0A90  22 00 00    	ld	(_game_score_top),hl
2444  0A93  C3 00 00    	jp  _game_print_score
2445  0A96              	SECTION code_compiler
2446  0A96              ;	---------------------------------
2447  0A96              ; Function player_check_floor
2448  0A96              ; ---------------------------------
2449  0A96              _player_check_floor:
2450  0A96  CD 00 00    	call	___sdcc_enter_ix
2451  0A99  3B          	dec	sp
2452  0A9A  2A 00 00    	ld	hl,(_sprite)
2453  0A9D  26 00       	ld	h,0x00
2454  0A9F  01 00 00    	ld	bc,_col
2455  0AA2  09          	add	hl,bc
2456  0AA3  56          	ld	d, (hl)
2457  0AA4  2A 00 00    	ld	hl,(_sprite)
2458  0AA7  26 00       	ld	h,0x00
2459  0AA9  01 00 00    	ld	bc,_lin
2460  0AAC  09          	add	hl,bc
2461  0AAD  7E          	ld	a,(hl)
2462  0AAE  C6 10       	add	a,0x10
2463  0AB0  5F          	ld	e, a
2464  0AB1  D5          	push	de
2465  0AB2  CD 00 00    	call	_spr_calc_index
2466  0AB5  F1          	pop	af
2467  0AB6  4D          	ld	c, l
2468  0AB7  44          	ld	b, h
2469  0AB8  21 00 00    	ld	hl,_scr_map
2470  0ABB  09          	add	hl, bc
2471  0ABC  7E          	ld	a, (hl)
2472  0ABD  DD 77 FF    	ld	(ix-1),a
2473  0AC0  2A 00 00    	ld	hl,(_sprite)
2474  0AC3  26 00       	ld	h,0x00
2475  0AC5  11 00 00    	ld	de,_col
2476  0AC8  19          	add	hl,de
2477  0AC9  7E          	ld	a,(hl)
2478  0ACA  0F          	rrca
2479  0ACB  38 04       	jr	C,l_player_check_floor_00102
2480  0ACD  0E 01       	ld	c,0x01
2481  0ACF  18 06       	jr	l_player_check_floor_00103
2482  0AD1              l_player_check_floor_00102:
2483  0AD1  03          	inc	bc
2484  0AD2  21 00 00    	ld	hl,_scr_map
2485  0AD5  09          	add	hl, bc
2486  0AD6  4E          	ld	c, (hl)
2487  0AD7              l_player_check_floor_00103:
2488  0AD7  3A 00 00    	ld	a,(_s_lin0)
2489  0ADA  D6 90       	sub	a,0x90
2490  0ADC  20 04       	jr	NZ,l_player_check_floor_00105
2491  0ADE  DD 36 FF 3C 	ld	(ix-1),0x3c
2492  0AE2              l_player_check_floor_00105:
2493  0AE2  DD 7E FF    	ld	a,(ix-1)
2494  0AE5  D6 30       	sub	a,0x30
2495  0AE7  38 07       	jr	C,l_player_check_floor_00110
2496  0AE9  DD 7E FF    	ld	a,(ix-1)
2497  0AEC  D6 54       	sub	a,0x54
2498  0AEE  38 1E       	jr	C,l_player_check_floor_00111
2499  0AF0              l_player_check_floor_00110:
2500  0AF0  79          	ld	a,c
2501  0AF1  FE 30       	cp	a,0x30
2502  0AF3  38 04       	jr	C,l_player_check_floor_00106
2503  0AF5  D6 54       	sub	a,0x54
2504  0AF7  38 15       	jr	C,l_player_check_floor_00111
2505  0AF9              l_player_check_floor_00106:
2506  0AF9  2A 00 00    	ld	hl,(_sprite)
2507  0AFC  26 00       	ld	h,0x00
2508  0AFE  01 00 00    	ld	bc,_sprite_speed_alt
2509  0B01  09          	add	hl,bc
2510  0B02  36 02       	ld	(hl),0x02
2511  0B04  21 00 00    	ld	hl,_s_state
2512  0B07  CB CE       	set	1, (hl)
2513  0B09  2E 00       	ld	l,0x00
2514  0B0B  CD FD 03    	call	_player_check_stairs
2515  0B0E              l_player_check_floor_00111:
2516  0B0E  33          	inc	sp
2517  0B0F  DD E1       	pop	ix
2518  0B11  C9          	ret
2519  0B12              	SECTION code_compiler
2520  0B12              ;	---------------------------------
2521  0B12              ; Function player_move_jump
2522  0B12              ; ---------------------------------
2523  0B12              _player_move_jump:
2524  0B12  CD 00 00    	call	___sdcc_enter_ix
2525  0B15  3B          	dec	sp
2526  0B16  21 00 00    	ld	hl,_game_gravity
2527  0B19  4E          	ld	c, (hl)
2528  0B1A  21 00 00    	ld	hl,_player_vel_y
2529  0B1D  7E          	ld	a, (hl)
2530  0B1E  81          	add	a, c
2531  0B1F  77          	ld	(hl), a
2532  0B20  21 00 00    	ld	hl,_sprite_on_air
2533  0B23  36 01       	ld	(hl),0x01
2534  0B25  3A 00 00    	ld	a,(_player_vel_inc)
2535  0B28  B7          	or	a, a
2536  0B29  28 24       	jr	Z,l_player_move_jump_00106
2537  0B2B  21 00 00    	ld	hl,_dirs
2538  0B2E  CB 7E       	bit	7, (hl)
2539  0B30  20 1D       	jr	NZ,l_player_move_jump_00106
2540  0B32  3A 00 00    	ld	a,(_player_vel_y1)
2541  0B35  21 00 00    	ld	hl,_player_vel_y
2542  0B38  96          	sub	a, (hl)
2543  0B39  E2 3E 0B    	jp	PO, l_player_move_jump_00247
2544  0B3C  EE 80       	xor	a,0x80
2545  0B3E              l_player_move_jump_00247:
2546  0B3E  F2 4F 0B    	jp	P, l_player_move_jump_00106
2547  0B41  21 00 00    	ld	hl,_player_vel_y
2548  0B44  CB 7E       	bit	7,(hl)
2549  0B46  28 07       	jr	Z,l_player_move_jump_00106
2550  0B48  36 00       	ld	(hl),0x00
2551  0B4A  21 00 00    	ld	hl,_player_vel_inc
2552  0B4D  36 00       	ld	(hl),0x00
2553  0B4F              l_player_move_jump_00106:
2554  0B4F  3E 78       	ld	a,0x78
2555  0B51  21 00 00    	ld	hl,_player_vel_y
2556  0B54  96          	sub	a, (hl)
2557  0B55  E2 5A 0B    	jp	PO, l_player_move_jump_00248
2558  0B58  EE 80       	xor	a,0x80
2559  0B5A              l_player_move_jump_00248:
2560  0B5A  F2 62 0B    	jp	P, l_player_move_jump_00108
2561  0B5D  21 00 00    	ld	hl,_player_vel_y
2562  0B60  36 78       	ld	(hl),0x78
2563  0B62              l_player_move_jump_00108:
2564  0B62  21 00 00    	ld	hl,_player_vel_y
2565  0B65  7E          	ld	a, (hl)
2566  0B66  EE 80       	xor	a,0x80
2567  0B68  D6 08       	sub	a,0x08
2568  0B6A  30 02       	jr	NC,l_player_move_jump_00110
2569  0B6C  36 88       	ld	(hl),0x88
2570  0B6E              l_player_move_jump_00110:
2571  0B6E  3A 00 00    	ld	a,(_player_vel_y)
2572  0B71  5F          	ld	e,a
2573  0B72  17          	rla
2574  0B73  9F          	sbc	a, a
2575  0B74  57          	ld	d, a
2576  0B75  CB 43       	bit	0,e
2577  0B77  21 00 00    	ld	hl,_s_lin1
2578  0B7A  73          	ld	(hl),e
2579  0B7B  28 04       	jr	Z,l_player_move_jump_00112
2580  0B7D  21 00 00    	ld	hl,_s_lin1
2581  0B80  35          	dec	(hl)
2582  0B81              l_player_move_jump_00112:
2583  0B81  2A 00 00    	ld	hl,(_sprite)
2584  0B84  26 00       	ld	h,0x00
2585  0B86  01 00 00    	ld	bc,_lin
2586  0B89  09          	add	hl,bc
2587  0B8A  7E          	ld	a,(hl)
2588  0B8B  DD 77 FF    	ld	(ix-1),a
2589  0B8E  4D          	ld	c,l
2590  0B8F  44          	ld	b,h
2591  0B90  21 00 00    	ld	hl,_s_lin1
2592  0B93  86          	add	a, (hl)
2593  0B94  77          	ld	(hl), a
2594  0B95  3E 90       	ld	a,0x90
2595  0B97  96          	sub	a, (hl)
2596  0B98  30 0E       	jr	NC,l_player_move_jump_00117
2597  0B9A  3E C8       	ld	a,0xc8
2598  0B9C  96          	sub	a, (hl)
2599  0B9D  30 04       	jr	NC,l_player_move_jump_00114
2600  0B9F  36 00       	ld	(hl),0x00
2601  0BA1  18 05       	jr	l_player_move_jump_00117
2602  0BA3              l_player_move_jump_00114:
2603  0BA3  21 00 00    	ld	hl,_s_lin1
2604  0BA6  36 90       	ld	(hl),0x90
2605  0BA8              l_player_move_jump_00117:
2606  0BA8  3A 00 00    	ld	a,(_s_lin0)
2607  0BAB  07          	rlca
2608  0BAC  07          	rlca
2609  0BAD  07          	rlca
2610  0BAE  07          	rlca
2611  0BAF  E6 0F       	and	a,0x0f
2612  0BB1  DD 77 FF    	ld	(ix-1),a
2613  0BB4  CB 7A       	bit	7, d
2614  0BB6  28 73       	jr	Z,l_player_move_jump_00140
2615  0BB8  21 00 00    	ld	hl,_s_state
2616  0BBB  7E          	ld	a,(hl)
2617  0BBC  F6 01       	or	a,0x01
2618  0BBE  E6 FD       	and	a,0xfd
2619  0BC0  77          	ld	(hl),a
2620  0BC1  21 00 00    	ld	hl,_s_lin1
2621  0BC4  DD 7E FF    	ld	a,(ix-1)
2622  0BC7  96          	sub	a,(hl)
2623  0BC8  20 04       	jr	NZ,l_player_move_jump_00250
2624  0BCA  3E 01       	ld	a,0x01
2625  0BCC  18 01       	jr	l_player_move_jump_00251
2626  0BCE              l_player_move_jump_00250:
2627  0BCE  AF          	xor	a,a
2628  0BCF              l_player_move_jump_00251:
2629  0BCF  EE 01       	xor	a,0x01
2630  0BD1  28 51       	jr	Z,l_player_move_jump_00124
2631  0BD3  2A 00 00    	ld	hl,(_sprite)
2632  0BD6  26 00       	ld	h,0x00
2633  0BD8  01 00 00    	ld	bc,_col
2634  0BDB  09          	add	hl,bc
2635  0BDC  7E          	ld	a,(hl)
2636  0BDD  F5          	push	af
2637  0BDE  33          	inc	sp
2638  0BDF  3A 00 00    	ld	a,(_s_lin1)
2639  0BE2  F5          	push	af
2640  0BE3  33          	inc	sp
2641  0BE4  CD 00 00    	call	_game_check_map
2642  0BE7  F1          	pop	af
2643  0BE8  7C          	ld	a,h
2644  0BE9  B5          	or	a,l
2645  0BEA  28 28       	jr	Z,l_player_move_jump_00121
2646  0BEC  CD 07 08    	call	_player_hit_platform
2647  0BEF  7D          	ld	a, l
2648  0BF0  B7          	or	a, a
2649  0BF1  28 19       	jr	Z,l_player_move_jump_00119
2650  0BF3  2A 00 00    	ld	hl,(_sprite)
2651  0BF6  26 00       	ld	h,0x00
2652  0BF8  01 00 00    	ld	bc,_lin
2653  0BFB  09          	add	hl,bc
2654  0BFC  7E          	ld	a,(hl)
2655  0BFD  4D          	ld	c,l
2656  0BFE  44          	ld	b,h
2657  0BFF  07          	rlca
2658  0C00  07          	rlca
2659  0C01  07          	rlca
2660  0C02  07          	rlca
2661  0C03  E6 0F       	and	a,0x0f
2662  0C05  07          	rlca
2663  0C06  07          	rlca
2664  0C07  07          	rlca
2665  0C08  07          	rlca
2666  0C09  E6 F0       	and	a,0xf0
2667  0C0B  02          	ld	(bc), a
2668  0C0C              l_player_move_jump_00119:
2669  0C0C  21 00 00    	ld	hl,_player_vel_y
2670  0C0F  36 00       	ld	(hl),0x00
2671  0C11  C3 EB 0C    	jp	l_player_move_jump_00141
2672  0C14              l_player_move_jump_00121:
2673  0C14  2A 00 00    	ld	hl,(_sprite)
2674  0C17  26 00       	ld	h,0x00
2675  0C19  01 00 00    	ld	bc,_lin
2676  0C1C  09          	add	hl,bc
2677  0C1D  3A 00 00    	ld	a,(_s_lin1)
2678  0C20  77          	ld	(hl),a
2679  0C21  C3 EB 0C    	jp	l_player_move_jump_00141
2680  0C24              l_player_move_jump_00124:
2681  0C24  3A 00 00    	ld	a,(_s_lin1)
2682  0C27  02          	ld	(bc), a
2683  0C28  C3 EB 0C    	jp	l_player_move_jump_00141
2684  0C2B              l_player_move_jump_00140:
2685  0C2B  21 00 00    	ld	hl,_s_state
2686  0C2E  7E          	ld	a,(hl)
2687  0C2F  F6 02       	or	a,0x02
2688  0C31  E6 FE       	and	a,0xfe
2689  0C33  77          	ld	(hl),a
2690  0C34  21 00 00    	ld	hl,_s_lin1
2691  0C37  7E          	ld	a, (hl)
2692  0C38  C6 10       	add	a,0x10
2693  0C3A  77          	ld	(hl), a
2694  0C3B  DD 7E FF    	ld	a,(ix-1)
2695  0C3E  96          	sub	a,(hl)
2696  0C3F  20 04       	jr	NZ,l_player_move_jump_00252
2697  0C41  3E 01       	ld	a,0x01
2698  0C43  18 01       	jr	l_player_move_jump_00253
2699  0C45              l_player_move_jump_00252:
2700  0C45  AF          	xor	a,a
2701  0C46              l_player_move_jump_00253:
2702  0C46  EE 01       	xor	a,0x01
2703  0C48  CA E3 0C    	jp	Z, l_player_move_jump_00137
2704  0C4B  2A 00 00    	ld	hl,(_sprite)
2705  0C4E  26 00       	ld	h,0x00
2706  0C50  01 00 00    	ld	bc,_col
2707  0C53  09          	add	hl,bc
2708  0C54  7E          	ld	a,(hl)
2709  0C55  F5          	push	af
2710  0C56  33          	inc	sp
2711  0C57  3A 00 00    	ld	a,(_s_lin1)
2712  0C5A  F5          	push	af
2713  0C5B  33          	inc	sp
2714  0C5C  CD 00 00    	call	_game_check_map
2715  0C5F  F1          	pop	af
2716  0C60  45          	ld	b, l
2717  0C61  5C          	ld	e, h
2718  0C62  21 00 00    	ld	hl,_s_lin1
2719  0C65  7E          	ld	a, (hl)
2720  0C66  C6 F0       	add	a,0xf0
2721  0C68  4F          	ld	c, a
2722  0C69  7B          	ld	a, e
2723  0C6A  B0          	or	a,b
2724  0C6B  28 63       	jr	Z,l_player_move_jump_00134
2725  0C6D  71          	ld	(hl), c
2726  0C6E  2E 00       	ld	l,0x00
2727  0C70  CD FD 03    	call	_player_check_stairs
2728  0C73  3A 00 00    	ld	a,(_player_over_stair)
2729  0C76  B7          	or	a, a
2730  0C77  20 05       	jr	NZ,l_player_move_jump_00127
2731  0C79  2E 01       	ld	l,0x01
2732  0C7B  CD FD 03    	call	_player_check_stairs
2733  0C7E              l_player_move_jump_00127:
2734  0C7E  3A 00 00    	ld	a,(_player_over_stair)
2735  0C81  B7          	or	a, a
2736  0C82  20 31       	jr	NZ,l_player_move_jump_00132
2737  0C84  21 00 00    	ld	hl,_s_lin1
2738  0C87  7E          	ld	a, (hl)
2739  0C88  07          	rlca
2740  0C89  07          	rlca
2741  0C8A  07          	rlca
2742  0C8B  07          	rlca
2743  0C8C  E6 0F       	and	a,0x0f
2744  0C8E  07          	rlca
2745  0C8F  07          	rlca
2746  0C90  07          	rlca
2747  0C91  07          	rlca
2748  0C92  E6 F0       	and	a,0xf0
2749  0C94  77          	ld	(hl), a
2750  0C95  2A 00 00    	ld	hl,(_sprite)
2751  0C98  26 00       	ld	h,0x00
2752  0C9A  01 00 00    	ld	bc,_lin
2753  0C9D  09          	add	hl,bc
2754  0C9E  5E          	ld	e,(hl)
2755  0C9F  4D          	ld	c,l
2756  0CA0  44          	ld	b,h
2757  0CA1  21 00 00    	ld	hl,_s_lin1
2758  0CA4  7E          	ld	a, (hl)
2759  0CA5  93          	sub	a, e
2760  0CA6  30 09       	jr	NC,l_player_move_jump_00129
2761  0CA8  7E          	ld	a, (hl)
2762  0CA9  C6 10       	add	a,0x10
2763  0CAB  02          	ld	(bc), a
2764  0CAC  2E 00       	ld	l,0x00
2765  0CAE  C3 33 0D    	jp	l_player_move_jump_00151
2766  0CB1              l_player_move_jump_00129:
2767  0CB1  3A 00 00    	ld	a,(_s_lin1)
2768  0CB4  02          	ld	(bc), a
2769  0CB5              l_player_move_jump_00132:
2770  0CB5  21 00 00    	ld	hl,_player_vel_y
2771  0CB8  36 00       	ld	(hl),0x00
2772  0CBA  21 00 00    	ld	hl,_s_state
2773  0CBD  7E          	ld	a,(hl)
2774  0CBE  E6 FC       	and	a,+(0xfd&0xfe)
2775  0CC0  77          	ld	(hl),a
2776  0CC1  2A 00 00    	ld	hl,(_sprite)
2777  0CC4  26 00       	ld	h,0x00
2778  0CC6  01 00 00    	ld	bc,_colint
2779  0CC9  09          	add	hl,bc
2780  0CCA  AF          	xor	a,a
2781  0CCB  77          	ld	(hl),a
2782  0CCC  2E 01       	ld	l,0x01
2783  0CCE  18 63       	jr	l_player_move_jump_00151
2784  0CD0              l_player_move_jump_00134:
2785  0CD0  21 00 00    	ld	hl,_s_lin1
2786  0CD3  71          	ld	(hl), c
2787  0CD4  2A 00 00    	ld	hl,(_sprite)
2788  0CD7  26 00       	ld	h,0x00
2789  0CD9  01 00 00    	ld	bc,_lin
2790  0CDC  09          	add	hl,bc
2791  0CDD  3A 00 00    	ld	a,(_s_lin1)
2792  0CE0  77          	ld	(hl),a
2793  0CE1  18 08       	jr	l_player_move_jump_00141
2794  0CE3              l_player_move_jump_00137:
2795  0CE3  21 00 00    	ld	hl,_s_lin1
2796  0CE6  7E          	ld	a, (hl)
2797  0CE7  C6 F0       	add	a,0xf0
2798  0CE9  77          	ld	(hl),a
2799  0CEA  02          	ld	(bc), a
2800  0CEB              l_player_move_jump_00141:
2801  0CEB  21 00 00    	ld	hl,_s_state
2802  0CEE  CB 5E       	bit	3, (hl)
2803  0CF0  20 27       	jr	NZ,l_player_move_jump_00147
2804  0CF2  21 00 00    	ld	hl,_s_state
2805  0CF5  CB 56       	bit	2, (hl)
2806  0CF7  20 20       	jr	NZ,l_player_move_jump_00147
2807  0CF9  21 00 00    	ld	hl,_dirs
2808  0CFC  CB 56       	bit	2, (hl)
2809  0CFE  28 09       	jr	Z,l_player_move_jump_00143
2810  0D00  21 00 00    	ld	hl,_s_state
2811  0D03  7E          	ld	a,(hl)
2812  0D04  F6 08       	or	a,0x08
2813  0D06  E6 FB       	and	a,0xfb
2814  0D08  77          	ld	(hl),a
2815  0D09              l_player_move_jump_00143:
2816  0D09  21 00 00    	ld	hl,_dirs
2817  0D0C  CB 5E       	bit	3, (hl)
2818  0D0E  28 09       	jr	Z,l_player_move_jump_00147
2819  0D10  21 00 00    	ld	hl,_s_state
2820  0D13  7E          	ld	a,(hl)
2821  0D14  F6 04       	or	a,0x04
2822  0D16  E6 F7       	and	a,0xf7
2823  0D18  77          	ld	(hl),a
2824  0D19              l_player_move_jump_00147:
2825  0D19  21 00 00    	ld	hl,_sprite_horizontal_check
2826  0D1C  36 01       	ld	(hl),0x01
2827  0D1E  CD 00 00    	call	_spr_move_horizontal
2828  0D21  7D          	ld	a, l
2829  0D22  B7          	or	a, a
2830  0D23  28 07       	jr	Z,l_player_move_jump_00150
2831  0D25  21 00 00    	ld	hl,_s_state
2832  0D28  7E          	ld	a,(hl)
2833  0D29  E6 F3       	and	a,+(0xf7&0xfb)
2834  0D2B  77          	ld	(hl),a
2835  0D2C              l_player_move_jump_00150:
2836  0D2C  21 00 00    	ld	hl,_sprite_horizontal_check
2837  0D2F  36 00       	ld	(hl),0x00
2838  0D31  2E 00       	ld	l,0x00
2839  0D33              l_player_move_jump_00151:
2840  0D33  33          	inc	sp
2841  0D34  DD E1       	pop	ix
2842  0D36  C9          	ret
2843  0D37              	SECTION code_compiler
2844  0D37              ;	---------------------------------
2845  0D37              ; Function player_open_door
2846  0D37              ; ---------------------------------
2847  0D37              _player_open_door:
2848  0D37  CD 00 00    	call	___sdcc_enter_ix
2849  0D3A  0E 00       	ld	c,0x00
2850  0D3C  DD 7E 06    	ld	a,(ix+6)
2851  0D3F  D6 3C       	sub	a,0x3c
2852  0D41  28 17       	jr	Z,l_player_open_door_00101
2853  0D43  DD 7E 06    	ld	a,(ix+6)
2854  0D46  D6 3D       	sub	a,0x3d
2855  0D48  28 1F       	jr	Z,l_player_open_door_00104
2856  0D4A  DD 7E 06    	ld	a,(ix+6)
2857  0D4D  D6 3E       	sub	a,0x3e
2858  0D4F  28 27       	jr	Z,l_player_open_door_00107
2859  0D51  DD 7E 06    	ld	a,(ix+6)
2860  0D54  D6 3F       	sub	a,0x3f
2861  0D56  28 2F       	jr	Z,l_player_open_door_00110
2862  0D58  18 3A       	jr	l_player_open_door_00113
2863  0D5A              l_player_open_door_00101:
2864  0D5A  3A 00 00    	ld	a,(_player_keys)
2865  0D5D  B7          	or	a, a
2866  0D5E  28 34       	jr	Z,l_player_open_door_00113
2867  0D60  2E 07       	ld	l,0x07
2868  0D62  CD 00 00    	call	_zx_border_fastcall
2869  0D65  0E 01       	ld	c,0x01
2870  0D67  18 2B       	jr	l_player_open_door_00113
2871  0D69              l_player_open_door_00104:
2872  0D69  3A 01 00    	ld	a,(_player_keys + 0x0001)
2873  0D6C  B7          	or	a, a
2874  0D6D  28 25       	jr	Z,l_player_open_door_00113
2875  0D6F  2E 02       	ld	l,0x02
2876  0D71  CD 00 00    	call	_zx_border_fastcall
2877  0D74  0E 01       	ld	c,0x01
2878  0D76  18 1C       	jr	l_player_open_door_00113
2879  0D78              l_player_open_door_00107:
2880  0D78  3A 02 00    	ld	a,(_player_keys + 0x0002)
2881  0D7B  B7          	or	a, a
2882  0D7C  28 16       	jr	Z,l_player_open_door_00113
2883  0D7E  2E 04       	ld	l,0x04
2884  0D80  CD 00 00    	call	_zx_border_fastcall
2885  0D83  0E 01       	ld	c,0x01
2886  0D85  18 0D       	jr	l_player_open_door_00113
2887  0D87              l_player_open_door_00110:
2888  0D87  3A 03 00    	ld	a,(_player_keys + 0x0003)
2889  0D8A  B7          	or	a, a
2890  0D8B  28 07       	jr	Z,l_player_open_door_00113
2891  0D8D  2E 05       	ld	l,0x05
2892  0D8F  CD 00 00    	call	_zx_border_fastcall
2893  0D92  0E 01       	ld	c,0x01
2894  0D94              l_player_open_door_00113:
2895  0D94  79          	ld	a, c
2896  0D95  B7          	or	a, a
2897  0D96  28 24       	jr	Z,l_player_open_door_00116
2898  0D98  3E 00       	ld	a, +((_scr_map) & 0xFF)
2899  0D9A  DD 86 04    	add	a,(ix+4)
2900  0D9D  4F          	ld	c, a
2901  0D9E  3E 00       	ld	a, +((_scr_map) / 256)
2902  0DA0  DD 8E 05    	adc	a,(ix+5)
2903  0DA3  47          	ld	b, a
2904  0DA4  AF          	xor	a, a
2905  0DA5  02          	ld	(bc), a
2906  0DA6  DD 6E 04    	ld	l,(ix+4)
2907  0DA9  DD 66 05    	ld	h,(ix+5)
2908  0DAC  E5          	push	hl
2909  0DAD  CD 00 00    	call	_game_obj_set
2910  0DB0  F1          	pop	af
2911  0DB1  DD 6E 04    	ld	l,(ix+4)
2912  0DB4  DD 66 05    	ld	h,(ix+5)
2913  0DB7  E5          	push	hl
2914  0DB8  CD 00 00    	call	_spr_draw_index
2915  0DBB  F1          	pop	af
2916  0DBC              l_player_open_door_00116:
2917  0DBC  DD E1       	pop	ix
2918  0DBE  C9          	ret
2919  0DBF              	SECTION code_compiler
2920  0DBF              ;	---------------------------------
2921  0DBF              ; Function player_lost_life
2922  0DBF              ; ---------------------------------
2923  0DBF              _player_lost_life:
2924  0DBF  3A 07 00    	ld	a,(_lin + 0x0007)
2925  0DC2  32 00 00    	ld	(_s_lin0),a
2926  0DC5  3A 07 00    	ld	a,(_col + 0x0007)
2927  0DC8  32 00 00    	ld	(_s_col0),a
2928  0DCB  CD 00 00    	call	_spr_init_anim_bullets
2929  0DCE  01 00 00    	ld	bc,_class+0
2930  0DD1  16 00       	ld	d,0x00
2931  0DD3              l_player_lost_life_00114:
2932  0DD3  C5          	push	bc
2933  0DD4  D5          	push	de
2934  0DD5  21 00 00    	ld	hl,0x0000
2935  0DD8  E5          	push	hl
2936  0DD9  AF          	xor	a, a
2937  0DDA  5A          	ld	e,d
2938  0DDB  57          	ld	d,a
2939  0DDC  D5          	push	de
2940  0DDD  CD 00 00    	call	_NIRVANAP_spriteT_callee
2941  0DE0  D1          	pop	de
2942  0DE1  C1          	pop	bc
2943  0DE2  6A          	ld	l,d
2944  0DE3  26 00       	ld	h,0x00
2945  0DE5  09          	add	hl, bc
2946  0DE6  36 00       	ld	(hl),0x00
2947  0DE8  14          	inc	d
2948  0DE9  7A          	ld	a, d
2949  0DEA  D6 08       	sub	a,0x08
2950  0DEC  38 E5       	jr	C,l_player_lost_life_00114
2951  0DEE  76          	halt
2952  0DEF  3A 00 00    	ld	a,(_s_lin0)
2953  0DF2  C6 F0       	add	a,0xf0
2954  0DF4  47          	ld	b, a
2955  0DF5  3A 00 00    	ld	a,(_s_col0)
2956  0DF8  21 00 00    	ld	hl,0x0000
2957  0DFB  E5          	push	hl
2958  0DFC  21 7B 03    	ld	hl,0x037b
2959  0DFF  E5          	push	hl
2960  0E00  48          	ld	c,b
2961  0E01  47          	ld	b,a
2962  0E02  C5          	push	bc
2963  0E03  CD 00 00    	call	_spr_add_anim
2964  0E06  F1          	pop	af
2965  0E07  F1          	pop	af
2966  0E08  F1          	pop	af
2967  0E09  21 00 00    	ld	hl,_s_col0
2968  0E0C  7E          	ld	a, (hl)
2969  0E0D  D6 02       	sub	a,0x02
2970  0E0F  38 18       	jr	C,l_player_lost_life_00103
2971  0E11  46          	ld	b, (hl)
2972  0E12  05          	dec	b
2973  0E13  05          	dec	b
2974  0E14  21 00 00    	ld	hl,0x0000
2975  0E17  E5          	push	hl
2976  0E18  21 7B 03    	ld	hl,0x037b
2977  0E1B  E5          	push	hl
2978  0E1C  C5          	push	bc
2979  0E1D  33          	inc	sp
2980  0E1E  3A 00 00    	ld	a,(_s_lin0)
2981  0E21  F5          	push	af
2982  0E22  33          	inc	sp
2983  0E23  CD 00 00    	call	_spr_add_anim
2984  0E26  F1          	pop	af
2985  0E27  F1          	pop	af
2986  0E28  F1          	pop	af
2987  0E29              l_player_lost_life_00103:
2988  0E29  3A 00 00    	ld	a,(_s_col0)
2989  0E2C  21 00 00    	ld	hl,0x0000
2990  0E2F  E5          	push	hl
2991  0E30  21 7B 03    	ld	hl,0x037b
2992  0E33  E5          	push	hl
2993  0E34  F5          	push	af
2994  0E35  33          	inc	sp
2995  0E36  3A 00 00    	ld	a,(_s_lin0)
2996  0E39  F5          	push	af
2997  0E3A  33          	inc	sp
2998  0E3B  CD 00 00    	call	_spr_add_anim
2999  0E3E  F1          	pop	af
3000  0E3F  F1          	pop	af
3001  0E40  F1          	pop	af
3002  0E41  21 00 00    	ld	hl,_s_col0
3003  0E44  7E          	ld	a, (hl)
3004  0E45  D6 1E       	sub	a,0x1e
3005  0E47  30 18       	jr	NC,l_player_lost_life_00105
3006  0E49  46          	ld	b, (hl)
3007  0E4A  04          	inc	b
3008  0E4B  04          	inc	b
3009  0E4C  21 00 00    	ld	hl,0x0000
3010  0E4F  E5          	push	hl
3011  0E50  21 7B 03    	ld	hl,0x037b
3012  0E53  E5          	push	hl
3013  0E54  C5          	push	bc
3014  0E55  33          	inc	sp
3015  0E56  3A 00 00    	ld	a,(_s_lin0)
3016  0E59  F5          	push	af
3017  0E5A  33          	inc	sp
3018  0E5B  CD 00 00    	call	_spr_add_anim
3019  0E5E  F1          	pop	af
3020  0E5F  F1          	pop	af
3021  0E60  F1          	pop	af
3022  0E61              l_player_lost_life_00105:
3023  0E61  3A 00 00    	ld	a,(_s_lin0)
3024  0E64  C6 10       	add	a,0x10
3025  0E66  47          	ld	b, a
3026  0E67  3A 00 00    	ld	a,(_s_col0)
3027  0E6A  21 00 00    	ld	hl,0x0000
3028  0E6D  E5          	push	hl
3029  0E6E  21 7B 03    	ld	hl,0x037b
3030  0E71  E5          	push	hl
3031  0E72  48          	ld	c,b
3032  0E73  47          	ld	b,a
3033  0E74  C5          	push	bc
3034  0E75  CD 00 00    	call	_spr_add_anim
3035  0E78  F1          	pop	af
3036  0E79  F1          	pop	af
3037  0E7A  F1          	pop	af
3038  0E7B  2E 00       	ld	l,0x00
3039  0E7D  CD 00 00    	call	_zx_border_fastcall
3040  0E80  21 00 00    	ld	hl,_tmp
3041  0E83  36 01       	ld	(hl),0x01
3042  0E85              l_player_lost_life_00111:
3043  0E85  3A 00 00    	ld	a,(_tmp)
3044  0E88  B7          	or	a, a
3045  0E89  28 2F       	jr	Z,l_player_lost_life_00113
3046  0E8B  21 06 00    	ld	hl,0x0006
3047  0E8E  E5          	push	hl
3048  0E8F  2A 00 00    	ld	hl,(_anim_time)
3049  0E92  E5          	push	hl
3050  0E93  CD 00 00    	call	_game_check_time
3051  0E96  F1          	pop	af
3052  0E97  F1          	pop	af
3053  0E98  7D          	ld	a, l
3054  0E99  B7          	or	a, a
3055  0E9A  28 16       	jr	Z,l_player_lost_life_00110
3056  0E9C  2A 00 00    	ld	hl,(_curr_time)
3057  0E9F  22 00 00    	ld	(_anim_time),hl
3058  0EA2  3A 00 00    	ld	a,(_anim_count)
3059  0EA5  B7          	or	a,a
3060  0EA6  28 05       	jr	Z,l_player_lost_life_00107
3061  0EA8  CD 00 00    	call	_spr_play_anim
3062  0EAB  18 05       	jr	l_player_lost_life_00110
3063  0EAD              l_player_lost_life_00107:
3064  0EAD  21 00 00    	ld	hl,_tmp
3065  0EB0  36 00       	ld	(hl),0x00
3066  0EB2              l_player_lost_life_00110:
3067  0EB2  21 05 00    	ld	hl,0x0005
3068  0EB5  CD 00 00    	call	_z80_delay_ms_fastcall
3069  0EB8  18 CB       	jr	l_player_lost_life_00111
3070  0EBA              l_player_lost_life_00113:
3071  0EBA  21 F4 01    	ld	hl,0x01f4
3072  0EBD  CD 00 00    	call	_z80_delay_ms_fastcall
3073  0EC0  3A 00 00    	ld	a,(_game_start_scr)
3074  0EC3  32 00 00    	ld	(_scr_curr),a
3075  0EC6  CD 00 00    	call	_game_round_init
3076  0EC9  C9          	ret
3077  0ECA              	SECTION code_compiler
3078  0ECA              ;	---------------------------------
3079  0ECA              ; Function player_hit
3080  0ECA              ; ---------------------------------
3081  0ECA              _player_hit:
3082  0ECA  7D          	ld	a,l
3083  0ECB  4D          	ld	c,l
3084  0ECC  21 00 00    	ld	hl,_player_vita
3085  0ECF  96          	sub	a, (hl)
3086  0ED0  30 0E       	jr	NC,l_player_hit_00105
3087  0ED2  7E          	ld	a, (hl)
3088  0ED3  91          	sub	a, c
3089  0ED4  77          	ld	(hl), a
3090  0ED5  2A 00 00    	ld	hl,(_curr_time)
3091  0ED8  22 00 00    	ld	(_player_hit_time),hl
3092  0EDB  CD 00 00    	call	_game_update_stats
3093  0EDE  18 1F       	jr	l_player_hit_00107
3094  0EE0              l_player_hit_00105:
3095  0EE0  21 00 00    	ld	hl,_player_vita
3096  0EE3  36 00       	ld	(hl),0x00
3097  0EE5  CD BF 0D    	call	_player_lost_life
3098  0EE8  21 00 00    	ld	hl,_player_lives
3099  0EEB  7E          	ld	a, (hl)
3100  0EEC  B7          	or	a, a
3101  0EED  28 06       	jr	Z,l_player_hit_00102
3102  0EEF  35          	dec	(hl)
3103  0EF0  CD 00 00    	call	_game_update_stats
3104  0EF3  18 0A       	jr	l_player_hit_00107
3105  0EF5              l_player_hit_00102:
3106  0EF5  21 00 00    	ld	hl,_player_lives
3107  0EF8  36 00       	ld	(hl),0x00
3108  0EFA  21 00 00    	ld	hl,_game_over
3109  0EFD  36 01       	ld	(hl),0x01
3110  0EFF              l_player_hit_00107:
3111  0EFF  C9          	ret
3112  0F00              	SECTION IGNORE
3113  0000              
