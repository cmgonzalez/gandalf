1     0000              MODULE game_player_c
2     0000              
3     0000              ;--------------------------------------------------------
4     0000              ; File Created by SDCC : free open source ANSI-C Compiler
5     0000              ; Version 3.6.5 #9958 (Mac OS X i386)
6     0000              ;--------------------------------------------------------
7     0000              ; Processed by Z88DK
8     0000              ;--------------------------------------------------------
9     0000              
10    0000              	EXTERN __divschar
11    0000              	EXTERN __divschar_callee
12    0000              	EXTERN __divsint
13    0000              	EXTERN __divsint_callee
14    0000              	EXTERN __divslong
15    0000              	EXTERN __divslong_callee
16    0000              	EXTERN __divslonglong
17    0000              	EXTERN __divslonglong_callee
18    0000              	EXTERN __divsuchar
19    0000              	EXTERN __divsuchar_callee
20    0000              	EXTERN __divuchar
21    0000              	EXTERN __divuchar_callee
22    0000              	EXTERN __divuint
23    0000              	EXTERN __divuint_callee
24    0000              	EXTERN __divulong
25    0000              	EXTERN __divulong_callee
26    0000              	EXTERN __divulonglong
27    0000              	EXTERN __divulonglong_callee
28    0000              	EXTERN __divuschar
29    0000              	EXTERN __divuschar_callee
30    0000              	EXTERN __modschar
31    0000              	EXTERN __modschar_callee
32    0000              	EXTERN __modsint
33    0000              	EXTERN __modsint_callee
34    0000              	EXTERN __modslong
35    0000              	EXTERN __modslong_callee
36    0000              	EXTERN __modslonglong
37    0000              	EXTERN __modslonglong_callee
38    0000              	EXTERN __modsuchar
39    0000              	EXTERN __modsuchar_callee
40    0000              	EXTERN __moduchar
41    0000              	EXTERN __moduchar_callee
42    0000              	EXTERN __moduint
43    0000              	EXTERN __moduint_callee
44    0000              	EXTERN __modulong
45    0000              	EXTERN __modulong_callee
46    0000              	EXTERN __modulonglong
47    0000              	EXTERN __modulonglong_callee
48    0000              	EXTERN __moduschar
49    0000              	EXTERN __moduschar_callee
50    0000              	EXTERN __mulint
51    0000              	EXTERN __mulint_callee
52    0000              	EXTERN __mullong
53    0000              	EXTERN __mullong_callee
54    0000              	EXTERN __mullonglong
55    0000              	EXTERN __mullonglong_callee
56    0000              	EXTERN __mulschar
57    0000              	EXTERN __mulschar_callee
58    0000              	EXTERN __mulsuchar
59    0000              	EXTERN __mulsuchar_callee
60    0000              	EXTERN __muluschar
61    0000              	EXTERN __muluschar_callee
62    0000              	EXTERN __rlslonglong
63    0000              	EXTERN __rlslonglong_callee
64    0000              	EXTERN __rlulonglong
65    0000              	EXTERN __rlulonglong_callee
66    0000              	EXTERN __rrslonglong
67    0000              	EXTERN __rrslonglong_callee
68    0000              	EXTERN __rrulonglong
69    0000              	EXTERN __rrulonglong_callee
70    0000              	EXTERN ___sdcc_call_hl
71    0000              	EXTERN ___sdcc_call_iy
72    0000              	EXTERN ___sdcc_enter_ix
73    0000              	EXTERN _banked_call
74    0000              	EXTERN _banked_ret
75    0000              	EXTERN ___fs2schar
76    0000              	EXTERN ___fs2schar_callee
77    0000              	EXTERN ___fs2sint
78    0000              	EXTERN ___fs2sint_callee
79    0000              	EXTERN ___fs2slong
80    0000              	EXTERN ___fs2slong_callee
81    0000              	EXTERN ___fs2slonglong
82    0000              	EXTERN ___fs2slonglong_callee
83    0000              	EXTERN ___fs2uchar
84    0000              	EXTERN ___fs2uchar_callee
85    0000              	EXTERN ___fs2uint
86    0000              	EXTERN ___fs2uint_callee
87    0000              	EXTERN ___fs2ulong
88    0000              	EXTERN ___fs2ulong_callee
89    0000              	EXTERN ___fs2ulonglong
90    0000              	EXTERN ___fs2ulonglong_callee
91    0000              	EXTERN ___fsadd
92    0000              	EXTERN ___fsadd_callee
93    0000              	EXTERN ___fsdiv
94    0000              	EXTERN ___fsdiv_callee
95    0000              	EXTERN ___fseq
96    0000              	EXTERN ___fseq_callee
97    0000              	EXTERN ___fsgt
98    0000              	EXTERN ___fsgt_callee
99    0000              	EXTERN ___fslt
100   0000              	EXTERN ___fslt_callee
101   0000              	EXTERN ___fsmul
102   0000              	EXTERN ___fsmul_callee
103   0000              	EXTERN ___fsneq
104   0000              	EXTERN ___fsneq_callee
105   0000              	EXTERN ___fssub
106   0000              	EXTERN ___fssub_callee
107   0000              	EXTERN ___schar2fs
108   0000              	EXTERN ___schar2fs_callee
109   0000              	EXTERN ___sint2fs
110   0000              	EXTERN ___sint2fs_callee
111   0000              	EXTERN ___slong2fs
112   0000              	EXTERN ___slong2fs_callee
113   0000              	EXTERN ___slonglong2fs
114   0000              	EXTERN ___slonglong2fs_callee
115   0000              	EXTERN ___uchar2fs
116   0000              	EXTERN ___uchar2fs_callee
117   0000              	EXTERN ___uint2fs
118   0000              	EXTERN ___uint2fs_callee
119   0000              	EXTERN ___ulong2fs
120   0000              	EXTERN ___ulong2fs_callee
121   0000              	EXTERN ___ulonglong2fs
122   0000              	EXTERN ___ulonglong2fs_callee
123   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
126   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
127   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
128   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
129   0000              	EXTERN ____sdcc_4_ldi_save_bc
130   0000              	EXTERN ____sdcc_4_push_hlix
131   0000              	EXTERN ____sdcc_4_push_mhl
132   0000              	EXTERN ____sdcc_lib_setmem_hl
133   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
134   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
135   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
136   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
137   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
138   0000              	EXTERN ____sdcc_ll_add_deix_hlix
139   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
140   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
141   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
142   0000              	EXTERN ____sdcc_ll_asr_hlix_a
143   0000              	EXTERN ____sdcc_ll_asr_mbc_a
144   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
145   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
146   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
147   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
148   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
149   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
150   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
151   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
152   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
153   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
155   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
156   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
157   0000              	EXTERN ____sdcc_ll_push_hlix
158   0000              	EXTERN ____sdcc_ll_push_mhl
159   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
160   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
161   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
162   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
163   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
164   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
165   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
166   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
167   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
168   0000              	EXTERN ____sdcc_load_debc_deix
169   0000              	EXTERN ____sdcc_load_dehl_deix
170   0000              	EXTERN ____sdcc_load_debc_mhl
171   0000              	EXTERN ____sdcc_load_hlde_mhl
172   0000              	EXTERN ____sdcc_store_dehl_bcix
173   0000              	EXTERN ____sdcc_store_debc_hlix
174   0000              	EXTERN ____sdcc_store_debc_mhl
175   0000              	EXTERN ____sdcc_cpu_pop_ei
176   0000              	EXTERN ____sdcc_cpu_pop_ei_jp
177   0000              	EXTERN ____sdcc_cpu_push_di
178   0000              	EXTERN ____sdcc_outi
179   0000              	EXTERN ____sdcc_outi_128
180   0000              	EXTERN ____sdcc_outi_256
181   0000              	EXTERN ____sdcc_ldi
182   0000              	EXTERN ____sdcc_ldi_128
183   0000              	EXTERN ____sdcc_ldi_256
184   0000              
185   0000              ;--------------------------------------------------------
186   0000              ; Public variables in this module
187   0000              ;--------------------------------------------------------
188   0000              	GLOBAL _player_check_map
189   0000              	GLOBAL _player_init
190   0000              	GLOBAL _player_check_input
191   0000              	GLOBAL _player_collision
192   0000              	GLOBAL _player_kill
193   0000              	GLOBAL _player_restart
194   0000              	GLOBAL _player_turn
195   0000              	GLOBAL _player_move
196   0000              	GLOBAL _player_check_stairs_down
197   0000              	GLOBAL _player_check_stairs
198   0000              	GLOBAL _player_tile
199   0000              	GLOBAL _player_move_input
200   0000              	GLOBAL _player_fire
201   0000              	GLOBAL _player_pick_item
202   0000              	GLOBAL _player_hit_platform
203   0000              	GLOBAL _player_hit_platform_clear
204   0000              	GLOBAL _player_score_add
205   0000              	GLOBAL _player_check_floor
206   0000              	GLOBAL _player_move_jump
207   0000              	GLOBAL _player_open_door
208   0000              	GLOBAL _player_lost_life
209   0000              	GLOBAL _player_hit
210   0000              ;--------------------------------------------------------
211   0000              ; Externals used
212   0000              ;--------------------------------------------------------
213   0000              	GLOBAL _ulltoa_callee
214   0000              	GLOBAL _ulltoa
215   0000              	GLOBAL _strtoull_callee
216   0000              	GLOBAL _strtoull
217   0000              	GLOBAL _strtoll_callee
218   0000              	GLOBAL _strtoll
219   0000              	GLOBAL _lltoa_callee
220   0000              	GLOBAL _lltoa
221   0000              	GLOBAL _llabs_callee
222   0000              	GLOBAL _llabs
223   0000              	GLOBAL __lldivu__callee
224   0000              	GLOBAL __lldivu_
225   0000              	GLOBAL __lldiv__callee
226   0000              	GLOBAL __lldiv_
227   0000              	GLOBAL _atoll_callee
228   0000              	GLOBAL _atoll
229   0000              	GLOBAL _realloc_unlocked_callee
230   0000              	GLOBAL _realloc_unlocked
231   0000              	GLOBAL _malloc_unlocked_fastcall
232   0000              	GLOBAL _malloc_unlocked
233   0000              	GLOBAL _free_unlocked_fastcall
234   0000              	GLOBAL _free_unlocked
235   0000              	GLOBAL _calloc_unlocked_callee
236   0000              	GLOBAL _calloc_unlocked
237   0000              	GLOBAL _aligned_alloc_unlocked_callee
238   0000              	GLOBAL _aligned_alloc_unlocked
239   0000              	GLOBAL _realloc_callee
240   0000              	GLOBAL _realloc
241   0000              	GLOBAL _malloc_fastcall
242   0000              	GLOBAL _malloc
243   0000              	GLOBAL _free_fastcall
244   0000              	GLOBAL _free
245   0000              	GLOBAL _calloc_callee
246   0000              	GLOBAL _calloc
247   0000              	GLOBAL _aligned_alloc_callee
248   0000              	GLOBAL _aligned_alloc
249   0000              	GLOBAL _utoa_callee
250   0000              	GLOBAL _utoa
251   0000              	GLOBAL _ultoa_callee
252   0000              	GLOBAL _ultoa
253   0000              	GLOBAL _system_fastcall
254   0000              	GLOBAL _system
255   0000              	GLOBAL _strtoul_callee
256   0000              	GLOBAL _strtoul
257   0000              	GLOBAL _strtol_callee
258   0000              	GLOBAL _strtol
259   0000              	GLOBAL _strtof_callee
260   0000              	GLOBAL _strtof
261   0000              	GLOBAL _strtod_callee
262   0000              	GLOBAL _strtod
263   0000              	GLOBAL _srand_fastcall
264   0000              	GLOBAL _srand
265   0000              	GLOBAL _rand
266   0000              	GLOBAL _quick_exit_fastcall
267   0000              	GLOBAL _quick_exit
268   0000              	GLOBAL _qsort_callee
269   0000              	GLOBAL _qsort
270   0000              	GLOBAL _ltoa_callee
271   0000              	GLOBAL _ltoa
272   0000              	GLOBAL _labs_fastcall
273   0000              	GLOBAL _labs
274   0000              	GLOBAL _itoa_callee
275   0000              	GLOBAL _itoa
276   0000              	GLOBAL _ftoh_callee
277   0000              	GLOBAL _ftoh
278   0000              	GLOBAL _ftog_callee
279   0000              	GLOBAL _ftog
280   0000              	GLOBAL _ftoe_callee
281   0000              	GLOBAL _ftoe
282   0000              	GLOBAL _ftoa_callee
283   0000              	GLOBAL _ftoa
284   0000              	GLOBAL _exit_fastcall
285   0000              	GLOBAL _exit
286   0000              	GLOBAL _dtoh_callee
287   0000              	GLOBAL _dtoh
288   0000              	GLOBAL _dtog_callee
289   0000              	GLOBAL _dtog
290   0000              	GLOBAL _dtoe_callee
291   0000              	GLOBAL _dtoe
292   0000              	GLOBAL _dtoa_callee
293   0000              	GLOBAL _dtoa
294   0000              	GLOBAL _bsearch_callee
295   0000              	GLOBAL _bsearch
296   0000              	GLOBAL _atol_fastcall
297   0000              	GLOBAL _atol
298   0000              	GLOBAL _atoi_fastcall
299   0000              	GLOBAL _atoi
300   0000              	GLOBAL _atof_fastcall
301   0000              	GLOBAL _atof
302   0000              	GLOBAL _atexit_fastcall
303   0000              	GLOBAL _atexit
304   0000              	GLOBAL _at_quick_exit_fastcall
305   0000              	GLOBAL _at_quick_exit
306   0000              	GLOBAL _abs_fastcall
307   0000              	GLOBAL _abs
308   0000              	GLOBAL _abort
309   0000              	GLOBAL __strtou__callee
310   0000              	GLOBAL __strtou_
311   0000              	GLOBAL __strtoi__callee
312   0000              	GLOBAL __strtoi_
313   0000              	GLOBAL __random_uniform_xor_8__fastcall
314   0000              	GLOBAL __random_uniform_xor_8_
315   0000              	GLOBAL __random_uniform_xor_32__fastcall
316   0000              	GLOBAL __random_uniform_xor_32_
317   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
318   0000              	GLOBAL __random_uniform_cmwc_8_
319   0000              	GLOBAL __shellsort__callee
320   0000              	GLOBAL __shellsort_
321   0000              	GLOBAL __quicksort__callee
322   0000              	GLOBAL __quicksort_
323   0000              	GLOBAL __insertion_sort__callee
324   0000              	GLOBAL __insertion_sort_
325   0000              	GLOBAL __ldivu__callee
326   0000              	GLOBAL __ldivu_
327   0000              	GLOBAL __ldiv__callee
328   0000              	GLOBAL __ldiv_
329   0000              	GLOBAL __divu__callee
330   0000              	GLOBAL __divu_
331   0000              	GLOBAL __div__callee
332   0000              	GLOBAL __div_
333   0000              	GLOBAL _NIRVANAP_drawTW_raw_callee
334   0000              	GLOBAL _NIRVANAP_drawTW_raw
335   0000              	GLOBAL _NIRVANAP_drawTW_callee
336   0000              	GLOBAL _NIRVANAP_drawTW
337   0000              	GLOBAL _NIRVANAP_drawW_raw_callee
338   0000              	GLOBAL _NIRVANAP_drawW_raw
339   0000              	GLOBAL _NIRVANAP_drawW_callee
340   0000              	GLOBAL _NIRVANAP_drawW
341   0000              	GLOBAL _NIRVANAP_spriteT_callee
342   0000              	GLOBAL _NIRVANAP_spriteT
343   0000              	GLOBAL _NIRVANAP_fillC_callee
344   0000              	GLOBAL _NIRVANAP_fillC
345   0000              	GLOBAL _NIRVANAP_readC_callee
346   0000              	GLOBAL _NIRVANAP_readC
347   0000              	GLOBAL _NIRVANAP_paintC_callee
348   0000              	GLOBAL _NIRVANAP_paintC
349   0000              	GLOBAL _NIRVANAP_printC_callee
350   0000              	GLOBAL _NIRVANAP_printC
351   0000              	GLOBAL _NIRVANAP_fillT_raw_callee
352   0000              	GLOBAL _NIRVANAP_fillT_raw
353   0000              	GLOBAL _NIRVANAP_fillT_callee
354   0000              	GLOBAL _NIRVANAP_fillT
355   0000              	GLOBAL _NIRVANAP_drawT_raw_callee
356   0000              	GLOBAL _NIRVANAP_drawT_raw
357   0000              	GLOBAL _NIRVANAP_drawT_callee
358   0000              	GLOBAL _NIRVANAP_drawT
359   0000              	GLOBAL _NIRVANAP_stop
360   0000              	GLOBAL _NIRVANAP_start
361   0000              	GLOBAL _debug3
362   0000              	GLOBAL _debug2
363   0000              	GLOBAL _debug
364   0000              	GLOBAL _zx_print_str
365   0000              	GLOBAL _zx_print_int
366   0000              	GLOBAL _zx_print_chr
367   0000              	GLOBAL _zx_print_bonus_time
368   0000              	GLOBAL _zx_isr
369   0000              	GLOBAL _z80_otdr_callee
370   0000              	GLOBAL _z80_otdr
371   0000              	GLOBAL _z80_otir_callee
372   0000              	GLOBAL _z80_otir
373   0000              	GLOBAL _z80_outp_callee
374   0000              	GLOBAL _z80_outp
375   0000              	GLOBAL _z80_indr_callee
376   0000              	GLOBAL _z80_indr
377   0000              	GLOBAL _z80_inir_callee
378   0000              	GLOBAL _z80_inir
379   0000              	GLOBAL _z80_inp_fastcall
380   0000              	GLOBAL _z80_inp
381   0000              	GLOBAL _z80_set_int_state_fastcall
382   0000              	GLOBAL _z80_set_int_state
383   0000              	GLOBAL _z80_get_int_state
384   0000              	GLOBAL _z80_delay_tstate_fastcall
385   0000              	GLOBAL _z80_delay_tstate
386   0000              	GLOBAL _z80_delay_ms_fastcall
387   0000              	GLOBAL _z80_delay_ms
388   0000              	GLOBAL _im2_remove_generic_callback_callee
389   0000              	GLOBAL _im2_remove_generic_callback
390   0000              	GLOBAL _im2_prepend_generic_callback_callee
391   0000              	GLOBAL _im2_prepend_generic_callback
392   0000              	GLOBAL _im2_append_generic_callback_callee
393   0000              	GLOBAL _im2_append_generic_callback
394   0000              	GLOBAL _im2_create_generic_isr_8080_callee
395   0000              	GLOBAL _im2_create_generic_isr_8080
396   0000              	GLOBAL _im2_create_generic_isr_callee
397   0000              	GLOBAL _im2_create_generic_isr
398   0000              	GLOBAL _im2_install_isr_callee
399   0000              	GLOBAL _im2_install_isr
400   0000              	GLOBAL _im2_init_fastcall
401   0000              	GLOBAL _im2_init
402   0000              	GLOBAL _intrinsic_swap_word_32_fastcall
403   0000              	GLOBAL _intrinsic_swap_word_32
404   0000              	GLOBAL _intrinsic_swap_endian_32_fastcall
405   0000              	GLOBAL _intrinsic_swap_endian_32
406   0000              	GLOBAL _intrinsic_swap_endian_16_fastcall
407   0000              	GLOBAL _intrinsic_swap_endian_16
408   0000              	GLOBAL _intrinsic_return_de
409   0000              	GLOBAL _intrinsic_return_bc
410   0000              	GLOBAL _intrinsic_exx
411   0000              	GLOBAL _intrinsic_ex_de_hl
412   0000              	GLOBAL _intrinsic_nop
413   0000              	GLOBAL _intrinsic_im_2
414   0000              	GLOBAL _intrinsic_im_1
415   0000              	GLOBAL _intrinsic_im_0
416   0000              	GLOBAL _intrinsic_retn
417   0000              	GLOBAL _intrinsic_reti
418   0000              	GLOBAL _intrinsic_halt
419   0000              	GLOBAL _intrinsic_ei
420   0000              	GLOBAL _intrinsic_di
421   0000              	GLOBAL _intrinsic_stub
422   0000              	GLOBAL _intrinsic_outi
423   0000              	GLOBAL _intrinsic_ldi
424   0000              	GLOBAL _zx_pattern_fill_callee
425   0000              	GLOBAL _zx_pattern_fill
426   0000              	GLOBAL _zx_saddrpup_fastcall
427   0000              	GLOBAL _zx_saddrpup
428   0000              	GLOBAL _zx_saddrpright_callee
429   0000              	GLOBAL _zx_saddrpright
430   0000              	GLOBAL _zx_saddrpleft_callee
431   0000              	GLOBAL _zx_saddrpleft
432   0000              	GLOBAL _zx_saddrpdown_fastcall
433   0000              	GLOBAL _zx_saddrpdown
434   0000              	GLOBAL _zx_saddrcup_fastcall
435   0000              	GLOBAL _zx_saddrcup
436   0000              	GLOBAL _zx_saddrcright_fastcall
437   0000              	GLOBAL _zx_saddrcright
438   0000              	GLOBAL _zx_saddrcleft_fastcall
439   0000              	GLOBAL _zx_saddrcleft
440   0000              	GLOBAL _zx_saddrcdown_fastcall
441   0000              	GLOBAL _zx_saddrcdown
442   0000              	GLOBAL _zx_saddr2py_fastcall
443   0000              	GLOBAL _zx_saddr2py
444   0000              	GLOBAL _zx_saddr2px_fastcall
445   0000              	GLOBAL _zx_saddr2px
446   0000              	GLOBAL _zx_saddr2cy_fastcall
447   0000              	GLOBAL _zx_saddr2cy
448   0000              	GLOBAL _zx_saddr2cx_fastcall
449   0000              	GLOBAL _zx_saddr2cx
450   0000              	GLOBAL _zx_saddr2aaddr_fastcall
451   0000              	GLOBAL _zx_saddr2aaddr
452   0000              	GLOBAL _zx_py2saddr_fastcall
453   0000              	GLOBAL _zx_py2saddr
454   0000              	GLOBAL _zx_py2aaddr_fastcall
455   0000              	GLOBAL _zx_py2aaddr
456   0000              	GLOBAL _zx_pxy2saddr_callee
457   0000              	GLOBAL _zx_pxy2saddr
458   0000              	GLOBAL _zx_pxy2aaddr_callee
459   0000              	GLOBAL _zx_pxy2aaddr
460   0000              	GLOBAL _zx_px2bitmask_fastcall
461   0000              	GLOBAL _zx_px2bitmask
462   0000              	GLOBAL _zx_cy2saddr_fastcall
463   0000              	GLOBAL _zx_cy2saddr
464   0000              	GLOBAL _zx_cy2aaddr_fastcall
465   0000              	GLOBAL _zx_cy2aaddr
466   0000              	GLOBAL _zx_cxy2saddr_callee
467   0000              	GLOBAL _zx_cxy2saddr
468   0000              	GLOBAL _zx_cxy2aaddr_callee
469   0000              	GLOBAL _zx_cxy2aaddr
470   0000              	GLOBAL _zx_bitmask2px_fastcall
471   0000              	GLOBAL _zx_bitmask2px
472   0000              	GLOBAL _zx_aaddrcup_fastcall
473   0000              	GLOBAL _zx_aaddrcup
474   0000              	GLOBAL _zx_aaddrcright_fastcall
475   0000              	GLOBAL _zx_aaddrcright
476   0000              	GLOBAL _zx_aaddrcleft_fastcall
477   0000              	GLOBAL _zx_aaddrcleft
478   0000              	GLOBAL _zx_aaddrcdown_fastcall
479   0000              	GLOBAL _zx_aaddrcdown
480   0000              	GLOBAL _zx_aaddr2saddr_fastcall
481   0000              	GLOBAL _zx_aaddr2saddr
482   0000              	GLOBAL _zx_aaddr2py_fastcall
483   0000              	GLOBAL _zx_aaddr2py
484   0000              	GLOBAL _zx_aaddr2px_fastcall
485   0000              	GLOBAL _zx_aaddr2px
486   0000              	GLOBAL _zx_aaddr2cy_fastcall
487   0000              	GLOBAL _zx_aaddr2cy
488   0000              	GLOBAL _zx_aaddr2cx_fastcall
489   0000              	GLOBAL _zx_aaddr2cx
490   0000              	GLOBAL _zx_visit_wc_pix_callee
491   0000              	GLOBAL _zx_visit_wc_pix
492   0000              	GLOBAL _zx_visit_wc_attr_callee
493   0000              	GLOBAL _zx_visit_wc_attr
494   0000              	GLOBAL _zx_scroll_wc_up_pix_callee
495   0000              	GLOBAL _zx_scroll_wc_up_pix
496   0000              	GLOBAL _zx_scroll_wc_up_attr_callee
497   0000              	GLOBAL _zx_scroll_wc_up_attr
498   0000              	GLOBAL _zx_scroll_wc_up_callee
499   0000              	GLOBAL _zx_scroll_wc_up
500   0000              	GLOBAL _zx_scroll_up_pix_callee
501   0000              	GLOBAL _zx_scroll_up_pix
502   0000              	GLOBAL _zx_scroll_up_attr_callee
503   0000              	GLOBAL _zx_scroll_up_attr
504   0000              	GLOBAL _zx_scroll_up_callee
505   0000              	GLOBAL _zx_scroll_up
506   0000              	GLOBAL _zx_cls_wc_pix_callee
507   0000              	GLOBAL _zx_cls_wc_pix
508   0000              	GLOBAL _zx_cls_wc_attr_callee
509   0000              	GLOBAL _zx_cls_wc_attr
510   0000              	GLOBAL _zx_cls_wc_callee
511   0000              	GLOBAL _zx_cls_wc
512   0000              	GLOBAL _zx_cls_pix_fastcall
513   0000              	GLOBAL _zx_cls_pix
514   0000              	GLOBAL _zx_cls_attr_fastcall
515   0000              	GLOBAL _zx_cls_attr
516   0000              	GLOBAL _zx_cls_fastcall
517   0000              	GLOBAL _zx_cls
518   0000              	GLOBAL _zx_border_fastcall
519   0000              	GLOBAL _zx_border
520   0000              	GLOBAL _spr_btile_paint_back
521   0000              	GLOBAL _spr_explode_bullet
522   0000              	GLOBAL _spr_init_anim_bullets
523   0000              	GLOBAL _spr_turn_horizontal
524   0000              	GLOBAL _spr_play_bullets
525   0000              	GLOBAL _spr_play_anim
526   0000              	GLOBAL _spr_add_anim
527   0000              	GLOBAL _spr_page_map
528   0000              	GLOBAL _spr_page_right
529   0000              	GLOBAL _spr_page_left
530   0000              	GLOBAL _spr_tile_paint
531   0000              	GLOBAL _spr_calc_hor
532   0000              	GLOBAL _spr_draw_row
533   0000              	GLOBAL _spr_draw_index
534   0000              	GLOBAL _spr_draw_clear
535   0000              	GLOBAL _spr_brick_anim
536   0000              	GLOBAL _spr_back_repaint
537   0000              	GLOBAL _spr_tile
538   0000              	GLOBAL _spr_destroy
539   0000              	GLOBAL _spr_tile_dir
540   0000              	GLOBAL _spr_redraw
541   0000              	GLOBAL _spr_move_left
542   0000              	GLOBAL _spr_move_right
543   0000              	GLOBAL _spr_move_horizontal
544   0000              	GLOBAL _spr_move_down
545   0000              	GLOBAL _spr_move_up
546   0000              	GLOBAL _spr_calc_index
547   0000              	GLOBAL _spr_chktime
548   0000              	GLOBAL _sound_hit_brick
549   0000              	GLOBAL _sound_hit_enemy
550   0000              	GLOBAL _sound_kill
551   0000              	GLOBAL _sound_enter_enemy
552   0000              	GLOBAL _sound_coin
553   0000              	GLOBAL _sound_jump
554   0000              	GLOBAL _sound_slide
555   0000              	GLOBAL _player_player_hit_pow
556   0000              	GLOBAL _game_obj_clear
557   0000              	GLOBAL _game_obj_chk
558   0000              	GLOBAL _game_obj_set
559   0000              	GLOBAL _game_shoot_fire_boss
560   0000              	GLOBAL _game_shoot_fire
561   0000              	GLOBAL _game_add_enemy
562   0000              	GLOBAL _game_joystick_set_menu
563   0000              	GLOBAL _game_joystick_set
564   0000              	GLOBAL _game_joystick_change
565   0000              	GLOBAL _game_print_header
566   0000              	GLOBAL _game_end
567   0000              	GLOBAL _game_phase_print_score_back
568   0000              	GLOBAL _game_check_time
569   0000              	GLOBAL _game_rotate_attrib
570   0000              	GLOBAL _game_colour_message
571   0000              	GLOBAL _game_paint_attrib_lin_h
572   0000              	GLOBAL _game_paint_attrib_lin
573   0000              	GLOBAL _game_paint_attrib
574   0000              	GLOBAL _game_print_score
575   0000              	GLOBAL _game_unfreeze_all
576   0000              	GLOBAL _game_freeze_all
577   0000              	GLOBAL _game_freeze
578   0000              	GLOBAL _game_enemy_add_get_index
579   0000              	GLOBAL _game_check_cell
580   0000              	GLOBAL _game_check_map
581   0000              	GLOBAL _game_loop
582   0000              	GLOBAL _game_round_init
583   0000              	GLOBAL _game_start_timer
584   0000              	GLOBAL _game_tick
585   0000              	GLOBAL _game_update_stats
586   0000              	GLOBAL _game_print_footer
587   0000              	GLOBAL _game_fill_row
588   0000              	GLOBAL _game_fps
589   0000              	GLOBAL _game_respawn
590   0000              	GLOBAL _game_draw_screen
591   0000              	GLOBAL _enemy_avoid_fall_dead
592   0000              	GLOBAL _enemy_avoid_fall
593   0000              	GLOBAL _enemy_respawn
594   0000              	GLOBAL _enemy_init
595   0000              	GLOBAL _enemy_move
596   0000              	GLOBAL _enemy_turn
597   0000              	GLOBAL _enemy_hit
598   0000              	GLOBAL _enemy_coin1
599   0000              	GLOBAL _enemy_static
600   0000              	GLOBAL _enemy_walk
601   0000              	GLOBAL _enemy_horizontal
602   0000              	GLOBAL _enemy_vertical
603   0000              	GLOBAL _ay_fx_play
604   0000              	GLOBAL _ay_midi_play
605   0000              	GLOBAL _ay_is_playing
606   0000              	GLOBAL _ay_reset
607   0000              	GLOBAL _test_func
608   0000              	GLOBAL _test_proc
609   0000              	GLOBAL _in_mouse_kempston_wheel_delta
610   0000              	GLOBAL _in_mouse_kempston_wheel
611   0000              	GLOBAL _in_mouse_kempston_callee
612   0000              	GLOBAL _in_mouse_kempston
613   0000              	GLOBAL _in_mouse_kempston_setpos_callee
614   0000              	GLOBAL _in_mouse_kempston_setpos
615   0000              	GLOBAL _in_mouse_kempston_reset
616   0000              	GLOBAL _in_mouse_kempston_init
617   0000              	GLOBAL _in_mouse_amx_wheel_delta
618   0000              	GLOBAL _in_mouse_amx_wheel
619   0000              	GLOBAL _in_mouse_amx_callee
620   0000              	GLOBAL _in_mouse_amx
621   0000              	GLOBAL _in_mouse_amx_setpos_callee
622   0000              	GLOBAL _in_mouse_amx_setpos
623   0000              	GLOBAL _in_mouse_amx_reset
624   0000              	GLOBAL _in_mouse_amx_init_callee
625   0000              	GLOBAL _in_mouse_amx_init
626   0000              	GLOBAL _in_stick_sinclair2
627   0000              	GLOBAL _in_stick_sinclair1
628   0000              	GLOBAL _in_stick_kempston
629   0000              	GLOBAL _in_stick_fuller
630   0000              	GLOBAL _in_stick_cursor
631   0000              	GLOBAL _in_stick_keyboard_fastcall
632   0000              	GLOBAL _in_stick_keyboard
633   0000              	GLOBAL _in_wait_nokey
634   0000              	GLOBAL _in_wait_key
635   0000              	GLOBAL _in_test_key
636   0000              	GLOBAL _in_pause_fastcall
637   0000              	GLOBAL _in_pause
638   0000              	GLOBAL _in_key_scancode_fastcall
639   0000              	GLOBAL _in_key_scancode
640   0000              	GLOBAL _in_key_pressed_fastcall
641   0000              	GLOBAL _in_key_pressed
642   0000              	GLOBAL _in_inkey
643   0000              	GLOBAL _NIRVANAP_CHAR_TABLE
644   0000              	GLOBAL _NIRVANAP_WIDE_IMAGES
645   0000              	GLOBAL _NIRVANAP_TILE_IMAGES
646   0000              	GLOBAL _NIRVANAP_HOLE
647   0000              	GLOBAL _NIRVANAP_ISR_HOOK
648   0000              	GLOBAL _player_lvl_table
649   0000              	GLOBAL _map_paper_last
650   0000              	GLOBAL _map_paper_clr
651   0000              	GLOBAL _map_paper
652   0000              	GLOBAL _draw_count
653   0000              	GLOBAL _g_player_hit_right
654   0000              	GLOBAL _g_player_hit_left
655   0000              	GLOBAL _joynames
656   0000              	GLOBAL _initials
657   0000              	GLOBAL _bullet_count
658   0000              	GLOBAL _spr_hack
659   0000              	GLOBAL _boss_stat
660   0000              	GLOBAL _boss_time_fire
661   0000              	GLOBAL _boss_time
662   0000              	GLOBAL _boss_tile
663   0000              	GLOBAL _boss_inc
664   0000              	GLOBAL _boss_col
665   0000              	GLOBAL _boss_lin
666   0000              	GLOBAL _bullet_vel
667   0000              	GLOBAL _bullet_frames
668   0000              	GLOBAL _bullet_colint
669   0000              	GLOBAL _bullet_dir
670   0000              	GLOBAL _bullet_tile
671   0000              	GLOBAL _bullet_col
672   0000              	GLOBAL _bullet_lin
673   0000              	GLOBAL _bullet_col0
674   0000              	GLOBAL _bullet_lin0
675   0000              	GLOBAL _bullet_max
676   0000              	GLOBAL _bullet_class
677   0000              	GLOBAL _mush_class
678   0000              	GLOBAL _mush_index
679   0000              	GLOBAL _anim_count
680   0000              	GLOBAL _anim_respanwn
681   0000              	GLOBAL _anim_loop
682   0000              	GLOBAL _anim_end
683   0000              	GLOBAL _anim_int
684   0000              	GLOBAL _anim_tile
685   0000              	GLOBAL _anim_col
686   0000              	GLOBAL _anim_lin
687   0000              	GLOBAL _map_heigth
688   0000              	GLOBAL _map_width
689   0000              	GLOBAL _scr_curr
690   0000              	GLOBAL _scr_obj1
691   0000              	GLOBAL _scr_obj0
692   0000              	GLOBAL _scr_map
693   0000              	GLOBAL _sprite_speed_alt
694   0000              	GLOBAL _sprite_frames
695   0000              	GLOBAL _sprite_speed
696   0000              	GLOBAL _screen_ink
697   0000              	GLOBAL _screen_paper
698   0000              	GLOBAL _player_over_stair
699   0000              	GLOBAL _game_start_scr
700   0000              	GLOBAL _game_respawn_tile
701   0000              	GLOBAL _game_respawn_index
702   0000              	GLOBAL _game_respawn_time
703   0000              	GLOBAL _game_menu_sel
704   0000              	GLOBAL _game_score_top
705   0000              	GLOBAL _player_lives
706   0000              	GLOBAL _game_over
707   0000              	GLOBAL _game_sound
708   0000              	GLOBAL _game_inmune
709   0000              	GLOBAL _game_god_mode
710   0000              	GLOBAL _game_two_player
711   0000              	GLOBAL _game_brick_tile
712   0000              	GLOBAL _sprite_curr_index
713   0000              	GLOBAL _spr_count
714   0000              	GLOBAL _bullet_time
715   0000              	GLOBAL _anim_time
716   0000              	GLOBAL _frame_time
717   0000              	GLOBAL _entry_time
718   0000              	GLOBAL _curr_time
719   0000              	GLOBAL _s_state
720   0000              	GLOBAL _attrib_hl
721   0000              	GLOBAL _attrib
722   0000              	GLOBAL _zx_val_asm
723   0000              	GLOBAL _enemies
724   0000              	GLOBAL _tmp_ui
725   0000              	GLOBAL _tmp_sc
726   0000              	GLOBAL _tmp_uc
727   0000              	GLOBAL _tmp1
728   0000              	GLOBAL _tmp0
729   0000              	GLOBAL _tmp
730   0000              	GLOBAL _index1
731   0000              	GLOBAL _index0
732   0000              	GLOBAL _loop_count
733   0000              	GLOBAL _s_col1
734   0000              	GLOBAL _s_col0
735   0000              	GLOBAL _s_lin1
736   0000              	GLOBAL _s_lin0
737   0000              	GLOBAL _s_tile1
738   0000              	GLOBAL _s_tile0
739   0000              	GLOBAL _player_hit_count
740   0000              	GLOBAL _sprite_horizontal_check
741   0000              	GLOBAL _sprite_on_air
742   0000              	GLOBAL _sprite
743   0000              	GLOBAL _fps
744   0000              	GLOBAL _game_respawn_curr_time
745   0000              	GLOBAL _game_worldup
746   0000              	GLOBAL _game_mush_count
747   0000              	GLOBAL _game_boss
748   0000              	GLOBAL _game_world
749   0000              	GLOBAL _game_gravity
750   0000              	GLOBAL _player_hit_time
751   0000              	GLOBAL _player_lin_scr
752   0000              	GLOBAL _player_col_scr
753   0000              	GLOBAL _player_lvl
754   0000              	GLOBAL _player_int
755   0000              	GLOBAL _player_str
756   0000              	GLOBAL _player_max_vita
757   0000              	GLOBAL _player_max_mana
758   0000              	GLOBAL _player_vita
759   0000              	GLOBAL _player_mana
760   0000              	GLOBAL _player_keys
761   0000              	GLOBAL _player_vel_inc
762   0000              	GLOBAL _player_vel_y1
763   0000              	GLOBAL _player_vel_y0
764   0000              	GLOBAL _player_vel_y
765   0000              	GLOBAL _player_vel_x
766   0000              	GLOBAL _player_joy
767   0000              	GLOBAL _player_score
768   0000              	GLOBAL _last_time
769   0000              	GLOBAL _player_slide
770   0000              	GLOBAL _spr_timer
771   0000              	GLOBAL _jump_lin
772   0000              	GLOBAL _player_hit_col
773   0000              	GLOBAL _player_hit_lin
774   0000              	GLOBAL _colint
775   0000              	GLOBAL _col
776   0000              	GLOBAL _lin
777   0000              	GLOBAL _tile
778   0000              	GLOBAL _state_a
779   0000              	GLOBAL _state
780   0000              	GLOBAL _class
781   0000              	GLOBAL _tbuffer
782   0000              	GLOBAL _dirs
783   0000              	GLOBAL _k1
784   0000              	GLOBAL _joyfunc1
785   0000              	GLOBAL _btiles
786   0000              	GLOBAL _spec128
787   0000              	GLOBAL _GLOBAL_ZX_PORT_7FFD
788   0000              	GLOBAL _GLOBAL_ZX_PORT_1FFD
789   0000              	GLOBAL _GLOBAL_ZX_PORT_FE
790   0000              	GLOBAL _ay_effect_20
791   0000              	GLOBAL _ay_effect_19
792   0000              	GLOBAL _ay_effect_18
793   0000              	GLOBAL _ay_effect_17
794   0000              	GLOBAL _ay_effect_16
795   0000              	GLOBAL _ay_effect_15
796   0000              	GLOBAL _ay_effect_14
797   0000              	GLOBAL _ay_effect_13
798   0000              	GLOBAL _ay_effect_12
799   0000              	GLOBAL _ay_effect_11
800   0000              	GLOBAL _ay_effect_10
801   0000              	GLOBAL _ay_effect_09
802   0000              	GLOBAL _ay_effect_08
803   0000              	GLOBAL _ay_effect_07
804   0000              	GLOBAL _ay_effect_06
805   0000              	GLOBAL _ay_effect_05
806   0000              	GLOBAL _ay_effect_04
807   0000              	GLOBAL _ay_effect_03
808   0000              	GLOBAL _ay_effect_02
809   0000              	GLOBAL _ay_effect_01
810   0000              	GLOBAL _pb_midi_phase_1
811   0000              	GLOBAL _pb_midi_title
812   0000              	GLOBAL _control_method
813   0000              	GLOBAL _world0
814   0000              	GLOBAL _lenght0
815   0000              	GLOBAL _start_scr0
816   0000              ;--------------------------------------------------------
817   0000              ; special function registers
818   0000              ;--------------------------------------------------------
819   0000              defc _IO_FE	=	0x00fe
820   0000              defc _IO_1FFD	=	0x1ffd
821   0000              defc _IO_7FFD	=	0x7ffd
822   0000              ;--------------------------------------------------------
823   0000              ; ram data
824   0000              ;--------------------------------------------------------
825   0000              	SECTION bss_compiler
826   0000              ;--------------------------------------------------------
827   0000              ; ram data
828   0000              ;--------------------------------------------------------
829   0000              
830   0000              IF 0
831   0000              
832   0000              ; .area _INITIALIZED removed by z88dk
833   0000              
834   0000              
835   0000              ENDIF
836   0000              
837   0000              ;--------------------------------------------------------
838   0000              ; absolute external ram data
839   0000              ;--------------------------------------------------------
840   0000              	SECTION IGNORE
841   0000              ;--------------------------------------------------------
842   0000              ; global & static initialisations
843   0000              ;--------------------------------------------------------
844   0000              	SECTION code_crt_init
845   0000              ;--------------------------------------------------------
846   0000              ; Home
847   0000              ;--------------------------------------------------------
848   0000              	SECTION IGNORE
849   0000              ;--------------------------------------------------------
850   0000              ; code
851   0000              ;--------------------------------------------------------
852   0000              	SECTION code_compiler
853   0000              ;	---------------------------------
854   0000              ; Function player_init
855   0000              ; ---------------------------------
856   0000              _player_init:
857   0000  CD 00 00    	call	___sdcc_enter_ix
858   0003  F5          	push	af
859   0004  3E 00       	ld	a, +((_class) & 0xFF)
860   0006  DD 86 04    	add	a,(ix+4)
861   0009  4F          	ld	c, a
862   000A  3E 00       	ld	a, +((_class) / 256)
863   000C  CE 00       	adc	a,0x00
864   000E  47          	ld	b, a
865   000F  AF          	xor	a, a
866   0010  02          	ld	(bc), a
867   0011  3E 00       	ld	a, +((_tile) & 0xFF)
868   0013  DD 86 04    	add	a,(ix+4)
869   0016  4F          	ld	c, a
870   0017  3E 00       	ld	a, +((_tile) / 256)
871   0019  CE 00       	adc	a,0x00
872   001B  47          	ld	b, a
873   001C  DD 7E 07    	ld	a,(ix+7)
874   001F  02          	ld	(bc), a
875   0020  3E 00       	ld	a, +((_lin) & 0xFF)
876   0022  DD 86 04    	add	a,(ix+4)
877   0025  4F          	ld	c, a
878   0026  3E 00       	ld	a, +((_lin) / 256)
879   0028  CE 00       	adc	a,0x00
880   002A  47          	ld	b, a
881   002B  DD 7E 05    	ld	a,(ix+5)
882   002E  02          	ld	(bc), a
883   002F  3E 00       	ld	a, +((_col) & 0xFF)
884   0031  DD 86 04    	add	a,(ix+4)
885   0034  4F          	ld	c, a
886   0035  3E 00       	ld	a, +((_col) / 256)
887   0037  CE 00       	adc	a,0x00
888   0039  47          	ld	b, a
889   003A  DD 7E 06    	ld	a,(ix+6)
890   003D  02          	ld	(bc), a
891   003E  3E 00       	ld	a, +((_colint) & 0xFF)
892   0040  DD 86 04    	add	a,(ix+4)
893   0043  4F          	ld	c, a
894   0044  3E 00       	ld	a, +((_colint) / 256)
895   0046  CE 00       	adc	a,0x00
896   0048  47          	ld	b, a
897   0049  AF          	xor	a, a
898   004A  02          	ld	(bc), a
899   004B  3E 00       	ld	a, +((_state) & 0xFF)
900   004D  DD 86 04    	add	a,(ix+4)
901   0050  4F          	ld	c, a
902   0051  3E 00       	ld	a, +((_state) / 256)
903   0053  CE 00       	adc	a,0x00
904   0055  47          	ld	b, a
905   0056  AF          	xor	a, a
906   0057  02          	ld	(bc), a
907   0058  3E 00       	ld	a, +((_state_a) & 0xFF)
908   005A  DD 86 04    	add	a,(ix+4)
909   005D  4F          	ld	c, a
910   005E  3E 00       	ld	a, +((_state_a) / 256)
911   0060  CE 00       	adc	a,0x00
912   0062  47          	ld	b, a
913   0063  AF          	xor	a, a
914   0064  02          	ld	(bc), a
915   0065  3E 00       	ld	a, +((_jump_lin) & 0xFF)
916   0067  DD 86 04    	add	a,(ix+4)
917   006A  5F          	ld	e, a
918   006B  3E 00       	ld	a, +((_jump_lin) / 256)
919   006D  CE 00       	adc	a,0x00
920   006F  57          	ld	d, a
921   0070  DD 7E 05    	ld	a,(ix+5)
922   0073  12          	ld	(de), a
923   0074  DD 6E 04    	ld	l,(ix+4)
924   0077  26 00       	ld	h,0x00
925   0079  29          	add	hl,hl
926   007A  11 00 00    	ld	de,_last_time
927   007D  19          	add	hl, de
928   007E  E3          	ex	(sp), hl
929   007F  E1          	pop	hl
930   0080  ED 5B 00 00 	ld	de,(_curr_time)
931   0084  E5          	push	hl
932   0085  73          	ld	(hl), e
933   0086  23          	inc	hl
934   0087  72          	ld	(hl), d
935   0088  3E 00       	ld	a, +((_sprite_speed_alt) & 0xFF)
936   008A  DD 86 04    	add	a,(ix+4)
937   008D  5F          	ld	e, a
938   008E  3E 00       	ld	a, +((_sprite_speed_alt) / 256)
939   0090  CE 00       	adc	a,0x00
940   0092  57          	ld	d, a
941   0093  AF          	xor	a, a
942   0094  12          	ld	(de), a
943   0095  0A          	ld	a, (bc)
944   0096  F6 11       	or	a,+(0x01|0x10)
945   0098  02          	ld	(bc),a
946   0099  21 00 00    	ld	hl,_player_hit_col
947   009C  36 00       	ld	(hl),0x00
948   009E  21 00 00    	ld	hl,_player_hit_lin
949   00A1  36 00       	ld	(hl),0x00
950   00A3  21 00 00    	ld	hl,_player_slide
951   00A6  36 00       	ld	(hl),0x00
952   00A8  DD 66 06    	ld	h,(ix+6)
953   00AB  DD 6E 05    	ld	l,(ix+5)
954   00AE  E5          	push	hl
955   00AF  DD 66 07    	ld	h,(ix+7)
956   00B2  DD 6E 04    	ld	l,(ix+4)
957   00B5  E5          	push	hl
958   00B6  CD 00 00    	call	_NIRVANAP_spriteT_callee
959   00B9  F1          	pop	af
960   00BA  DD E1       	pop	ix
961   00BC  C9          	ret
962   00BD              	SECTION code_compiler
963   00BD              ;	---------------------------------
964   00BD              ; Function player_check_input
965   00BD              ; ---------------------------------
966   00BD              _player_check_input:
967   00BD  21 00 00    	ld	hl,_dirs
968   00C0  CB 56       	bit	2, (hl)
969   00C2  28 0C       	jr	Z,l_player_check_input_00102
970   00C4  21 00 00    	ld	hl,_dirs
971   00C7  CB 5E       	bit	3, (hl)
972   00C9  28 05       	jr	Z,l_player_check_input_00102
973   00CB  21 00 00    	ld	hl,_dirs
974   00CE  36 00       	ld	(hl),0x00
975   00D0              l_player_check_input_00102:
976   00D0  21 00 00    	ld	hl,_dirs
977   00D3  7E          	ld	a, (hl)
978   00D4  CB 07       	rlc	a
979   00D6  E6 01       	and	a,0x01
980   00D8  CB 47       	bit	0, a
981   00DA  20 1D       	jr	NZ,l_player_check_input_00107
982   00DC  CB 56       	bit	2, (hl)
983   00DE  20 19       	jr	NZ,l_player_check_input_00107
984   00E0  21 00 00    	ld	hl,_dirs
985   00E3  CB 5E       	bit	3, (hl)
986   00E5  20 12       	jr	NZ,l_player_check_input_00107
987   00E7  21 00 00    	ld	hl,_dirs
988   00EA  CB 46       	bit	0, (hl)
989   00EC  20 0B       	jr	NZ,l_player_check_input_00107
990   00EE  21 00 00    	ld	hl,_dirs
991   00F1  CB 4E       	bit	1, (hl)
992   00F3  20 04       	jr	NZ,l_player_check_input_00107
993   00F5  2E 00       	ld	l,0x00
994   00F7  18 02       	jr	l_player_check_input_00108
995   00F9              l_player_check_input_00107:
996   00F9  2E 01       	ld	l,0x01
997   00FB              l_player_check_input_00108:
998   00FB  C9          	ret
999   00FC              	SECTION code_compiler
1000  00FC              ;	---------------------------------
1001  00FC              ; Function player_collision
1002  00FC              ; ---------------------------------
1003  00FC              _player_collision:
1004  00FC  21 19 00    	ld	hl,0x0019
1005  00FF  E5          	push	hl
1006  0100  2A 00 00    	ld	hl,(_player_hit_time)
1007  0103  E5          	push	hl
1008  0104  CD 00 00    	call	_game_check_time
1009  0107  F1          	pop	af
1010  0108  F1          	pop	af
1011  0109  7D          	ld	a, l
1012  010A  B7          	or	a, a
1013  010B  CA 4E 02    	jp	Z, l_player_collision_00124
1014  010E  21 00 00    	ld	hl,_sprite
1015  0111  36 00       	ld	(hl),0x00
1016  0113  3A 07 00    	ld	a,(_col + 7)
1017  0116  32 00 00    	ld	(_s_col1),a
1018  0119  3A 07 00    	ld	a,(_lin + 7)
1019  011C  32 00 00    	ld	(_s_lin1),a
1020  011F  C6 08       	add	a,0x08
1021  0121  4F          	ld	c, a
1022  0122  3A 00 00    	ld	a, (_s_col1)
1023  0125  47          	ld	b,a
1024  0126  C5          	push	bc
1025  0127  CD 00 00    	call	_spr_calc_index
1026  012A  F1          	pop	af
1027  012B  7D          	ld	a,l
1028  012C  32 00 00    	ld	(_sprite_curr_index),a
1029  012F  4F          	ld	c,a
1030  0130  06 00       	ld	b,0x00
1031  0132  21 00 00    	ld	hl,_scr_map
1032  0135  09          	add	hl,bc
1033  0136  4E          	ld	c, (hl)
1034  0137  3E 2F       	ld	a,0x2f
1035  0139  91          	sub	a, c
1036  013A  30 0F       	jr	NC,l_player_collision_00120
1037  013C  79          	ld	a, c
1038  013D  D6 3C       	sub	a,0x3c
1039  013F  30 0A       	jr	NC,l_player_collision_00120
1040  0141  2E 06       	ld	l,0x06
1041  0143  CD 00 00    	call	_zx_border_fastcall
1042  0146  2E 32       	ld	l,0x32
1043  0148  CD 74 11    	call	_player_hit
1044  014B              l_player_collision_00120:
1045  014B  21 00 00    	ld	hl,_sprite
1046  014E  7E          	ld	a, (hl)
1047  014F  D6 07       	sub	a,0x07
1048  0151  D2 4E 02    	jp	NC, l_player_collision_00124
1049  0154  3E 00       	ld	a, +((_class) & 0xFF)
1050  0156  86          	add	a, (hl)
1051  0157  4F          	ld	c, a
1052  0158  3E 00       	ld	a, +((_class) / 256)
1053  015A  CE 00       	adc	a,0x00
1054  015C  47          	ld	b, a
1055  015D  0A          	ld	a, (bc)
1056  015E  B7          	or	a, a
1057  015F  CA 47 02    	jp	Z, l_player_collision_00119
1058  0162  4E          	ld	c,(hl)
1059  0163  06 00       	ld	b,0x00
1060  0165  21 00 00    	ld	hl,_col
1061  0168  09          	add	hl,bc
1062  0169  4E          	ld	c, (hl)
1063  016A  06 00       	ld	b,0x00
1064  016C  3A 00 00    	ld	a,(_s_col1)
1065  016F  5F          	ld	e,a
1066  0170  16 00       	ld	d,0x00
1067  0172  79          	ld	a, c
1068  0173  93          	sub	a, e
1069  0174  6F          	ld	l, a
1070  0175  78          	ld	a, b
1071  0176  9A          	sbc	a, d
1072  0177  67          	ld	h, a
1073  0178  CD 00 00    	call	_abs_fastcall
1074  017B  7D          	ld	a,l
1075  017C  D6 02       	sub	a,0x02
1076  017E  7C          	ld	a,h
1077  017F  17          	rla
1078  0180  3F          	ccf
1079  0181  1F          	rra
1080  0182  DE 80       	sbc	a,0x80
1081  0184  D2 47 02    	jp	NC, l_player_collision_00119
1082  0187  2A 00 00    	ld	hl,(_sprite)
1083  018A  26 00       	ld	h,0x00
1084  018C  01 00 00    	ld	bc,_lin
1085  018F  09          	add	hl,bc
1086  0190  4E          	ld	c,(hl)
1087  0191  06 00       	ld	b,0x00
1088  0193  3A 00 00    	ld	a,(_s_lin1)
1089  0196  5F          	ld	e,a
1090  0197  16 00       	ld	d,0x00
1091  0199  79          	ld	a, c
1092  019A  93          	sub	a, e
1093  019B  6F          	ld	l, a
1094  019C  78          	ld	a, b
1095  019D  9A          	sbc	a, d
1096  019E  67          	ld	h, a
1097  019F  CD 00 00    	call	_abs_fastcall
1098  01A2  7D          	ld	a,l
1099  01A3  D6 0E       	sub	a,0x0e
1100  01A5  7C          	ld	a,h
1101  01A6  17          	rla
1102  01A7  3F          	ccf
1103  01A8  1F          	rra
1104  01A9  DE 80       	sbc	a,0x80
1105  01AB  D2 47 02    	jp	NC, l_player_collision_00119
1106  01AE  2A 00 00    	ld	hl,(_sprite)
1107  01B1  26 00       	ld	h,0x00
1108  01B3  01 00 00    	ld	bc,_class
1109  01B6  09          	add	hl,bc
1110  01B7  7E          	ld	a,(hl)
1111  01B8  FE 06       	cp	a,0x06
1112  01BA  20 2D       	jr	NZ,l_player_collision_00107
1113  01BC  21 00 00    	ld	hl,_player_vita
1114  01BF  7E          	ld	a, (hl)
1115  01C0  C6 19       	add	a,0x19
1116  01C2  77          	ld	(hl), a
1117  01C3  3A 00 00    	ld	a,(_player_max_vita)
1118  01C6  21 00 00    	ld	hl,_player_vita
1119  01C9  96          	sub	a, (hl)
1120  01CA  30 06       	jr	NC,l_player_collision_00105
1121  01CC  3A 00 00    	ld	a,(_player_max_vita)
1122  01CF  32 00 00    	ld	(_player_vita),a
1123  01D2              l_player_collision_00105:
1124  01D2  21 01 00    	ld	hl,0x0001
1125  01D5  CD 63 0C    	call	_player_score_add
1126  01D8  CD 00 00    	call	_game_update_stats
1127  01DB  2A 00 00    	ld	hl,(_sprite)
1128  01DE  CD 00 00    	call	_spr_destroy
1129  01E1  21 00 00    	ld	hl,_game_mush_count
1130  01E4  35          	dec	(hl)
1131  01E5  2E 00       	ld	l,0x00
1132  01E7  18 67       	jr	l_player_collision_00125
1133  01E9              l_player_collision_00107:
1134  01E9  FE 07       	cp	a,0x07
1135  01EB  20 2D       	jr	NZ,l_player_collision_00111
1136  01ED  21 00 00    	ld	hl,_player_mana
1137  01F0  7E          	ld	a, (hl)
1138  01F1  C6 19       	add	a,0x19
1139  01F3  77          	ld	(hl), a
1140  01F4  3A 00 00    	ld	a,(_player_max_mana)
1141  01F7  21 00 00    	ld	hl,_player_mana
1142  01FA  96          	sub	a, (hl)
1143  01FB  30 06       	jr	NC,l_player_collision_00109
1144  01FD  3A 00 00    	ld	a,(_player_max_mana)
1145  0200  32 00 00    	ld	(_player_mana),a
1146  0203              l_player_collision_00109:
1147  0203  21 01 00    	ld	hl,0x0001
1148  0206  CD 63 0C    	call	_player_score_add
1149  0209  CD 00 00    	call	_game_update_stats
1150  020C  2A 00 00    	ld	hl,(_sprite)
1151  020F  CD 00 00    	call	_spr_destroy
1152  0212  21 00 00    	ld	hl,_game_mush_count
1153  0215  35          	dec	(hl)
1154  0216  2E 00       	ld	l,0x00
1155  0218  18 36       	jr	l_player_collision_00125
1156  021A              l_player_collision_00111:
1157  021A  D6 08       	sub	a,0x08
1158  021C  20 1B       	jr	NZ,l_player_collision_00113
1159  021E  21 00 00    	ld	hl,_player_lives
1160  0221  34          	inc	(hl)
1161  0222  21 01 00    	ld	hl,0x0001
1162  0225  CD 63 0C    	call	_player_score_add
1163  0228  CD 00 00    	call	_game_update_stats
1164  022B  2A 00 00    	ld	hl,(_sprite)
1165  022E  CD 00 00    	call	_spr_destroy
1166  0231  21 00 00    	ld	hl,_game_mush_count
1167  0234  35          	dec	(hl)
1168  0235  2E 00       	ld	l,0x00
1169  0237  18 17       	jr	l_player_collision_00125
1170  0239              l_player_collision_00113:
1171  0239  2E 02       	ld	l,0x02
1172  023B  CD 00 00    	call	_zx_border_fastcall
1173  023E  2E 14       	ld	l,0x14
1174  0240  CD 74 11    	call	_player_hit
1175  0243  2E 01       	ld	l,0x01
1176  0245  18 09       	jr	l_player_collision_00125
1177  0247              l_player_collision_00119:
1178  0247  21 00 00    	ld	hl,_sprite
1179  024A  34          	inc	(hl)
1180  024B  C3 4B 01    	jp	l_player_collision_00120
1181  024E              l_player_collision_00124:
1182  024E  2E 00       	ld	l,0x00
1183  0250              l_player_collision_00125:
1184  0250  C9          	ret
1185  0251              	SECTION code_compiler
1186  0251              ;	---------------------------------
1187  0251              ; Function player_kill
1188  0251              ; ---------------------------------
1189  0251              _player_kill:
1190  0251  01 00 00    	ld	bc,_state+0
1191  0254  2A 00 00    	ld	hl,(_sprite)
1192  0257  26 00       	ld	h,0x00
1193  0259  09          	add	hl,bc
1194  025A  CB 6E       	bit	5,(hl)
1195  025C  C2 25 03    	jp	NZ,l_player_kill_00109
1196  025F  C5          	push	bc
1197  0260  CD 00 00    	call	_sound_hit_brick
1198  0263  C1          	pop	bc
1199  0264  79          	ld	a, c
1200  0265  21 00 00    	ld	hl,_sprite
1201  0268  86          	add	a, (hl)
1202  0269  5F          	ld	e, a
1203  026A  78          	ld	a, b
1204  026B  CE 00       	adc	a,0x00
1205  026D  57          	ld	d, a
1206  026E  1A          	ld	a, (de)
1207  026F  F6 20       	or	a,0x20
1208  0271  12          	ld	(de), a
1209  0272  3E 00       	ld	a, +((_sprite_speed_alt) & 0xFF)
1210  0274  86          	add	a, (hl)
1211  0275  5F          	ld	e, a
1212  0276  3E 00       	ld	a, +((_sprite_speed_alt) / 256)
1213  0278  CE 00       	adc	a,0x00
1214  027A  57          	ld	d, a
1215  027B  3E 03       	ld	a,0x03
1216  027D  12          	ld	(de), a
1217  027E  79          	ld	a, c
1218  027F  86          	add	a, (hl)
1219  0280  4F          	ld	c, a
1220  0281  78          	ld	a, b
1221  0282  CE 00       	adc	a,0x00
1222  0284  47          	ld	b, a
1223  0285  0A          	ld	a, (bc)
1224  0286  CB 57       	bit	2, a
1225  0288  28 0D       	jr	Z,l_player_kill_00102
1226  028A  2A 00 00    	ld	hl,(_sprite)
1227  028D  26 00       	ld	h,0x00
1228  028F  01 00 00    	ld	bc,_tile
1229  0292  09          	add	hl,bc
1230  0293  36 4C       	ld	(hl),0x4c
1231  0295  18 0B       	jr	l_player_kill_00103
1232  0297              l_player_kill_00102:
1233  0297  2A 00 00    	ld	hl,(_sprite)
1234  029A  26 00       	ld	h,0x00
1235  029C  01 00 00    	ld	bc,_tile
1236  029F  09          	add	hl,bc
1237  02A0  36 54       	ld	(hl),0x54
1238  02A2              l_player_kill_00103:
1239  02A2  CD 2A 0C    	call	_player_hit_platform_clear
1240  02A5  2A 00 00    	ld	hl,(_sprite)
1241  02A8  26 00       	ld	h,0x00
1242  02AA  01 00 00    	ld	bc,_col
1243  02AD  09          	add	hl,bc
1244  02AE  4E          	ld	c, (hl)
1245  02AF  2A 00 00    	ld	hl,(_sprite)
1246  02B2  26 00       	ld	h,0x00
1247  02B4  11 00 00    	ld	de,_lin
1248  02B7  19          	add	hl,de
1249  02B8  46          	ld	b, (hl)
1250  02B9  2A 00 00    	ld	hl,(_sprite)
1251  02BC  26 00       	ld	h,0x00
1252  02BE  11 00 00    	ld	de,_tile
1253  02C1  19          	add	hl,de
1254  02C2  5E          	ld	e, (hl)
1255  02C3  79          	ld	a,c
1256  02C4  48          	ld	c,b
1257  02C5  47          	ld	b,a
1258  02C6  21 00 00    	ld	hl,_sprite
1259  02C9  C5          	push	bc
1260  02CA  7B          	ld	a, e
1261  02CB  F5          	push	af
1262  02CC  33          	inc	sp
1263  02CD  7E          	ld	a, (hl)
1264  02CE  F5          	push	af
1265  02CF  33          	inc	sp
1266  02D0  CD 00 00    	call	_NIRVANAP_spriteT_callee
1267  02D3  01 00 00    	ld	bc,_spr_timer+0
1268  02D6  2A 00 00    	ld	hl,(_sprite)
1269  02D9  26 00       	ld	h,0x00
1270  02DB  29          	add	hl, hl
1271  02DC  09          	add	hl,bc
1272  02DD  ED 5B 00 00 	ld	de,(_curr_time)
1273  02E1  73          	ld	(hl),e
1274  02E2  23          	inc	hl
1275  02E3  72          	ld	(hl),d
1276  02E4  3A 00 00    	ld	a,(_sprite)
1277  02E7  D6 07       	sub	a,0x07
1278  02E9  20 1E       	jr	NZ,l_player_kill_00105
1279  02EB  01 00 00    	ld	bc,_state_a+0
1280  02EE  79          	ld	a, c
1281  02EF  21 00 00    	ld	hl,_sprite
1282  02F2  86          	add	a, (hl)
1283  02F3  5F          	ld	e, a
1284  02F4  78          	ld	a, b
1285  02F5  CE 00       	adc	a,0x00
1286  02F7  57          	ld	d, a
1287  02F8  1A          	ld	a, (de)
1288  02F9  F6 08       	or	a,0x08
1289  02FB  12          	ld	(de), a
1290  02FC  79          	ld	a, c
1291  02FD  86          	add	a, (hl)
1292  02FE  4F          	ld	c, a
1293  02FF  78          	ld	a, b
1294  0300  CE 00       	adc	a,0x00
1295  0302  47          	ld	b, a
1296  0303  0A          	ld	a, (bc)
1297  0304  E6 EF       	and	a,0xef
1298  0306  02          	ld	(bc), a
1299  0307  18 1C       	jr	l_player_kill_00109
1300  0309              l_player_kill_00105:
1301  0309  01 00 00    	ld	bc,_state_a+0
1302  030C  79          	ld	a, c
1303  030D  21 00 00    	ld	hl,_sprite
1304  0310  86          	add	a, (hl)
1305  0311  5F          	ld	e, a
1306  0312  78          	ld	a, b
1307  0313  CE 00       	adc	a,0x00
1308  0315  57          	ld	d, a
1309  0316  1A          	ld	a, (de)
1310  0317  F6 10       	or	a,0x10
1311  0319  12          	ld	(de), a
1312  031A  79          	ld	a, c
1313  031B  86          	add	a, (hl)
1314  031C  4F          	ld	c, a
1315  031D  78          	ld	a, b
1316  031E  CE 00       	adc	a,0x00
1317  0320  47          	ld	b, a
1318  0321  0A          	ld	a, (bc)
1319  0322  E6 F7       	and	a,0xf7
1320  0324  02          	ld	(bc), a
1321  0325              l_player_kill_00109:
1322  0325  C9          	ret
1323  0326              	SECTION code_compiler
1324  0326              ;	---------------------------------
1325  0326              ; Function player_restart
1326  0326              ; ---------------------------------
1327  0326              _player_restart:
1328  0326  CD 00 00    	call	___sdcc_enter_ix
1329  0329  F5          	push	af
1330  032A  4D          	ld	c, l
1331  032B  21 00 00    	ld	hl,_ay_effect_15
1332  032E  CD 00 00    	call	_ay_fx_play
1333  0331  C5          	push	bc
1334  0332  21 0E 70    	ld	hl,0x700e
1335  0335  E5          	push	hl
1336  0336  21 07 00    	ld	hl,0x0007
1337  0339  E5          	push	hl
1338  033A  CD 00 00    	call	_player_init
1339  033D  F1          	pop	af
1340  033E  F1          	pop	af
1341  033F  C1          	pop	bc
1342  0340  11 00 00    	ld	de,_state+0
1343  0343  69          	ld	l,c
1344  0344  26 00       	ld	h,0x00
1345  0346  19          	add	hl, de
1346  0347  CB E6       	set	4, (hl)
1347  0349  11 00 00    	ld	de,_state_a+0
1348  034C  69          	ld	l,c
1349  034D  26 00       	ld	h,0x00
1350  034F  19          	add	hl, de
1351  0350  CB C6       	set	0, (hl)
1352  0352  11 00 00    	ld	de,_spr_timer+0
1353  0355  69          	ld	l, c
1354  0356  26 00       	ld	h,0x00
1355  0358  29          	add	hl, hl
1356  0359  19          	add	hl,de
1357  035A  E3          	ex	(sp), hl
1358  035B  E1          	pop	hl
1359  035C  ED 5B 00 00 	ld	de,(_curr_time)
1360  0360  E5          	push	hl
1361  0361  73          	ld	(hl), e
1362  0362  23          	inc	hl
1363  0363  72          	ld	(hl), d
1364  0364  11 00 00    	ld	de,_sprite_speed_alt+0
1365  0367  69          	ld	l,c
1366  0368  26 00       	ld	h,0x00
1367  036A  19          	add	hl, de
1368  036B  F1          	pop	af
1369  036C  36 08       	ld	(hl),0x08
1370  036E  DD E1       	pop	ix
1371  0370  C9          	ret
1372  0371              	SECTION code_compiler
1373  0371              ;	---------------------------------
1374  0371              ; Function player_turn
1375  0371              ; ---------------------------------
1376  0371              _player_turn:
1377  0371  21 00 00    	ld	hl,_sprite
1378  0374  CD 00 00    	call	_spr_chktime
1379  0377  7D          	ld	a, l
1380  0378  B7          	or	a, a
1381  0379  C8          	ret	Z
1382  037A  21 00 00    	ld	hl,_k1
1383  037D  E5          	push	hl
1384  037E  2A 00 00    	ld	hl,(_joyfunc1)
1385  0381  CD 00 00    	call	___sdcc_call_hl
1386  0384  F1          	pop	af
1387  0385  7D          	ld	a,l
1388  0386  32 00 00    	ld	(_dirs),a
1389  0389  CD 8F 03    	call	_player_move
1390  038C  C3 FC 00    	jp  _player_collision
1391  038F              	SECTION code_compiler
1392  038F              ;	---------------------------------
1393  038F              ; Function player_move
1394  038F              ; ---------------------------------
1395  038F              _player_move:
1396  038F  2A 00 00    	ld	hl,(_sprite)
1397  0392  26 00       	ld	h,0x00
1398  0394  01 00 00    	ld	bc,_lin
1399  0397  09          	add	hl,bc
1400  0398  7E          	ld	a,(hl)
1401  0399  32 00 00    	ld	(_s_lin0),a
1402  039C  2A 00 00    	ld	hl,(_sprite)
1403  039F  26 00       	ld	h,0x00
1404  03A1  01 00 00    	ld	bc,_col
1405  03A4  09          	add	hl,bc
1406  03A5  7E          	ld	a,(hl)
1407  03A6  32 00 00    	ld	(_s_col0),a
1408  03A9  2A 00 00    	ld	hl,(_sprite)
1409  03AC  26 00       	ld	h,0x00
1410  03AE  01 00 00    	ld	bc,_tile
1411  03B1  09          	add	hl,bc
1412  03B2  4E          	ld	c, (hl)
1413  03B3  3A 00 00    	ld	a,(_sprite)
1414  03B6  5F          	ld	e,a
1415  03B7  16 00       	ld	d,0x00
1416  03B9  21 00 00    	ld	hl,_colint
1417  03BC  19          	add	hl,de
1418  03BD  7E          	ld	a,(hl)
1419  03BE  81          	add	a,c
1420  03BF  32 00 00    	ld	(_s_tile0),a
1421  03C2  2A 00 00    	ld	hl,(_sprite)
1422  03C5  26 00       	ld	h,0x00
1423  03C7  01 00 00    	ld	bc,_state
1424  03CA  09          	add	hl,bc
1425  03CB  7E          	ld	a,(hl)
1426  03CC  CB 47       	bit	0,a
1427  03CE  32 00 00    	ld	(_s_state),a
1428  03D1  20 07       	jr	NZ,l_player_move_00113
1429  03D3  21 00 00    	ld	hl,_s_state
1430  03D6  CB 4E       	bit	1, (hl)
1431  03D8  28 46       	jr	Z,l_player_move_00114
1432  03DA              l_player_move_00113:
1433  03DA  CD 26 07    	call	_player_fire
1434  03DD  3A 00 00    	ld	a,(_player_vel_y)
1435  03E0  21 00 00    	ld	hl,_player_vel_y1
1436  03E3  96          	sub	a, (hl)
1437  03E4  E2 E9 03    	jp	PO, l_player_move_00162
1438  03E7  EE 80       	xor	a,0x80
1439  03E9              l_player_move_00162:
1440  03E9  F2 0C 04    	jp	P, l_player_move_00106
1441  03EC  21 00 00    	ld	hl,_dirs
1442  03EF  CB 56       	bit	2, (hl)
1443  03F1  28 09       	jr	Z,l_player_move_00102
1444  03F3  21 00 00    	ld	hl,_s_state
1445  03F6  7E          	ld	a,(hl)
1446  03F7  F6 08       	or	a,0x08
1447  03F9  E6 FB       	and	a,0xfb
1448  03FB  77          	ld	(hl),a
1449  03FC              l_player_move_00102:
1450  03FC  21 00 00    	ld	hl,_dirs
1451  03FF  CB 4E       	bit	1, (hl)
1452  0401  28 09       	jr	Z,l_player_move_00106
1453  0403  21 00 00    	ld	hl,_s_state
1454  0406  7E          	ld	a,(hl)
1455  0407  F6 04       	or	a,0x04
1456  0409  E6 F7       	and	a,0xf7
1457  040B  77          	ld	(hl),a
1458  040C              l_player_move_00106:
1459  040C  CD 43 0D    	call	_player_move_jump
1460  040F  7D          	ld	a, l
1461  0410  B7          	or	a, a
1462  0411  28 2E       	jr	Z,l_player_move_00115
1463  0413  3A 00 00    	ld	a,(_player_over_stair)
1464  0416  B7          	or	a, a
1465  0417  20 28       	jr	NZ,l_player_move_00115
1466  0419  2E 60       	ld	l,0x60
1467  041B  CD 5A 05    	call	_player_tile
1468  041E  18 21       	jr	l_player_move_00115
1469  0420              l_player_move_00114:
1470  0420  CD B0 05    	call	_player_move_input
1471  0423  7D          	ld	a, l
1472  0424  B7          	or	a, a
1473  0425  20 17       	jr	NZ,l_player_move_00112
1474  0427  2A 00 00    	ld	hl,(_sprite)
1475  042A  26 00       	ld	h,0x00
1476  042C  01 00 00    	ld	bc,_colint
1477  042F  09          	add	hl,bc
1478  0430  AF          	xor	a,a
1479  0431  77          	ld	(hl),a
1480  0432  2E 70       	ld	l,0x70
1481  0434  CD 5A 05    	call	_player_tile
1482  0437  21 00 00    	ld	hl,_s_state
1483  043A  7E          	ld	a,(hl)
1484  043B  E6 F3       	and	a,+(0xf7&0xfb)
1485  043D  77          	ld	(hl),a
1486  043E              l_player_move_00112:
1487  043E  CD C7 0C    	call	_player_check_floor
1488  0441              l_player_move_00115:
1489  0441  CD 00 00    	call	_spr_redraw
1490  0444  7D          	ld	a, l
1491  0445  B7          	or	a, a
1492  0446  28 03       	jr	Z,l_player_move_00118
1493  0448  CD 69 07    	call	_player_check_map
1494  044B              l_player_move_00118:
1495  044B  3A 00 00    	ld	a,(_player_hit_lin)
1496  044E  B7          	or	a, a
1497  044F  28 03       	jr	Z,l_player_move_00120
1498  0451  CD 2A 0C    	call	_player_hit_platform_clear
1499  0454              l_player_move_00120:
1500  0454  2A 00 00    	ld	hl,(_sprite)
1501  0457  26 00       	ld	h,0x00
1502  0459  01 00 00    	ld	bc,_state
1503  045C  09          	add	hl,bc
1504  045D  3A 00 00    	ld	a,(_s_state)
1505  0460  77          	ld	(hl),a
1506  0461  2E 00       	ld	l,0x00
1507  0463  C9          	ret
1508  0464              	SECTION code_compiler
1509  0464              ;	---------------------------------
1510  0464              ; Function player_check_stairs_down
1511  0464              ; ---------------------------------
1512  0464              _player_check_stairs_down:
1513  0464  CD 00 00    	call	___sdcc_enter_ix
1514  0467  3B          	dec	sp
1515  0468  2A 00 00    	ld	hl,(_sprite)
1516  046B  26 00       	ld	h,0x00
1517  046D  5D          	ld	e,l
1518  046E  01 00 00    	ld	bc,_col
1519  0471  09          	add	hl,bc
1520  0472  46          	ld	b,(hl)
1521  0473  16 00       	ld	d,0x00
1522  0475  21 00 00    	ld	hl,_lin
1523  0478  19          	add	hl,de
1524  0479  7E          	ld	a,(hl)
1525  047A  C6 10       	add	a,0x10
1526  047C  4F          	ld	c,a
1527  047D  C5          	push	bc
1528  047E  CD 00 00    	call	_spr_calc_index
1529  0481  F1          	pop	af
1530  0482  7D          	ld	a,l
1531  0483  32 00 00    	ld	(_sprite_curr_index),a
1532  0486  4F          	ld	c,a
1533  0487  06 00       	ld	b,0x00
1534  0489  21 00 00    	ld	hl,_scr_map
1535  048C  09          	add	hl,bc
1536  048D  7E          	ld	a,(hl)
1537  048E  4F          	ld	c,a
1538  048F  D6 44       	sub	a,0x44
1539  0491  38 05       	jr	C,l_player_check_stairs_down_00105
1540  0493  3E 47       	ld	a,0x47
1541  0495  91          	sub	a, c
1542  0496  30 04       	jr	NC,l_player_check_stairs_down_00106
1543  0498              l_player_check_stairs_down_00105:
1544  0498  3E 00       	ld	a,0x00
1545  049A  18 02       	jr	l_player_check_stairs_down_00107
1546  049C              l_player_check_stairs_down_00106:
1547  049C  3E 01       	ld	a,0x01
1548  049E              l_player_check_stairs_down_00107:
1549  049E  B7          	or	a, a
1550  049F  28 05       	jr	Z,l_player_check_stairs_down_00103
1551  04A1  21 00 00    	ld	hl,_player_over_stair
1552  04A4  36 01       	ld	(hl),0x01
1553  04A6              l_player_check_stairs_down_00103:
1554  04A6  33          	inc	sp
1555  04A7  DD E1       	pop	ix
1556  04A9  C9          	ret
1557  04AA              	SECTION code_compiler
1558  04AA              ;	---------------------------------
1559  04AA              ; Function player_check_stairs
1560  04AA              ; ---------------------------------
1561  04AA              _player_check_stairs:
1562  04AA  CD 00 00    	call	___sdcc_enter_ix
1563  04AD  F5          	push	af
1564  04AE  4D          	ld	c, l
1565  04AF  2A 00 00    	ld	hl,(_sprite)
1566  04B2  26 00       	ld	h,0x00
1567  04B4  11 00 00    	ld	de,_col
1568  04B7  19          	add	hl,de
1569  04B8  7E          	ld	a,(hl)
1570  04B9  81          	add	a,c
1571  04BA  5F          	ld	e,a
1572  04BB  3E 00       	ld	a,+((_lin) & 0xFF)
1573  04BD  21 00 00    	ld	hl,_sprite
1574  04C0  86          	add	a, (hl)
1575  04C1  6F          	ld	l, a
1576  04C2  3E 00       	ld	a, +((_lin) / 256)
1577  04C4  CE 00       	adc	a,0x00
1578  04C6  67          	ld	h, a
1579  04C7  46          	ld	b, (hl)
1580  04C8  C5          	push	bc
1581  04C9  7B          	ld	a, e
1582  04CA  48          	ld	c,b
1583  04CB  47          	ld	b,a
1584  04CC  C5          	push	bc
1585  04CD  CD 00 00    	call	_spr_calc_index
1586  04D0  F1          	pop	af
1587  04D1  C1          	pop	bc
1588  04D2  7D          	ld	a,l
1589  04D3  32 00 00    	ld	(_sprite_curr_index),a
1590  04D6  5F          	ld	e,a
1591  04D7  16 00       	ld	d,0x00
1592  04D9  21 00 00    	ld	hl,_scr_map
1593  04DC  19          	add	hl,de
1594  04DD  7E          	ld	a,(hl)
1595  04DE  47          	ld	b,a
1596  04DF  D6 44       	sub	a,0x44
1597  04E1  38 05       	jr	C,l_player_check_stairs_00111
1598  04E3  3E 47       	ld	a,0x47
1599  04E5  90          	sub	a, b
1600  04E6  30 04       	jr	NC,l_player_check_stairs_00112
1601  04E8              l_player_check_stairs_00111:
1602  04E8  1E 00       	ld	e,0x00
1603  04EA  18 02       	jr	l_player_check_stairs_00113
1604  04EC              l_player_check_stairs_00112:
1605  04EC  1E 01       	ld	e,0x01
1606  04EE              l_player_check_stairs_00113:
1607  04EE  DD 73 FE    	ld	(ix-2),e
1608  04F1  2A 00 00    	ld	hl,(_sprite)
1609  04F4  26 00       	ld	h,0x00
1610  04F6  11 00 00    	ld	de,_col
1611  04F9  19          	add	hl,de
1612  04FA  7E          	ld	a,(hl)
1613  04FB  81          	add	a,c
1614  04FC  4F          	ld	c,a
1615  04FD  3A 00 00    	ld	a,(_sprite)
1616  0500  5F          	ld	e,a
1617  0501  16 00       	ld	d,0x00
1618  0503  21 00 00    	ld	hl,_lin
1619  0506  19          	add	hl,de
1620  0507  7E          	ld	a,(hl)
1621  0508  C6 0F       	add	a,0x0f
1622  050A  47          	ld	b, a
1623  050B  79          	ld	a, c
1624  050C  48          	ld	c,b
1625  050D  47          	ld	b,a
1626  050E  C5          	push	bc
1627  050F  CD 00 00    	call	_spr_calc_index
1628  0512  F1          	pop	af
1629  0513  7D          	ld	a,l
1630  0514  32 00 00    	ld	(_sprite_curr_index),a
1631  0517  4F          	ld	c,a
1632  0518  06 00       	ld	b,0x00
1633  051A  21 00 00    	ld	hl,_scr_map
1634  051D  09          	add	hl,bc
1635  051E  7E          	ld	a,(hl)
1636  051F  4F          	ld	c,a
1637  0520  D6 44       	sub	a,0x44
1638  0522  38 05       	jr	C,l_player_check_stairs_00114
1639  0524  3E 47       	ld	a,0x47
1640  0526  91          	sub	a, c
1641  0527  30 04       	jr	NC,l_player_check_stairs_00115
1642  0529              l_player_check_stairs_00114:
1643  0529  0E 00       	ld	c,0x00
1644  052B  18 02       	jr	l_player_check_stairs_00116
1645  052D              l_player_check_stairs_00115:
1646  052D  0E 01       	ld	c,0x01
1647  052F              l_player_check_stairs_00116:
1648  052F  DD 7E FE    	ld	a,(ix-2)
1649  0532  B7          	or	a,a
1650  0533  20 03       	jr	NZ,l_player_check_stairs_00105
1651  0535  B1          	or	a,c
1652  0536  28 10       	jr	Z,l_player_check_stairs_00106
1653  0538              l_player_check_stairs_00105:
1654  0538  21 00 00    	ld	hl,_player_over_stair
1655  053B  7E          	ld	a, (hl)
1656  053C  B7          	or	a, a
1657  053D  20 17       	jr	NZ,l_player_check_stairs_00109
1658  053F  36 01       	ld	(hl),0x01
1659  0541  2E 72       	ld	l,0x72
1660  0543  CD 5A 05    	call	_player_tile
1661  0546  18 0E       	jr	l_player_check_stairs_00109
1662  0548              l_player_check_stairs_00106:
1663  0548  21 00 00    	ld	hl,_player_over_stair
1664  054B  7E          	ld	a, (hl)
1665  054C  B7          	or	a, a
1666  054D  28 07       	jr	Z,l_player_check_stairs_00109
1667  054F  36 00       	ld	(hl),0x00
1668  0551  2E 60       	ld	l,0x60
1669  0553  CD 5A 05    	call	_player_tile
1670  0556              l_player_check_stairs_00109:
1671  0556  F1          	pop	af
1672  0557  DD E1       	pop	ix
1673  0559  C9          	ret
1674  055A              	SECTION code_compiler
1675  055A              ;	---------------------------------
1676  055A              ; Function player_tile
1677  055A              ; ---------------------------------
1678  055A              _player_tile:
1679  055A  45          	ld	b, l
1680  055B  3A 00 00    	ld	a,(_player_over_stair)
1681  055E  B7          	or	a, a
1682  055F  28 0D       	jr	Z,l_player_tile_00105
1683  0561  2A 00 00    	ld	hl,(_sprite)
1684  0564  26 00       	ld	h,0x00
1685  0566  01 00 00    	ld	bc,_tile
1686  0569  09          	add	hl,bc
1687  056A  36 72       	ld	(hl),0x72
1688  056C  18 41       	jr	l_player_tile_00107
1689  056E              l_player_tile_00105:
1690  056E  78          	ld	a, b
1691  056F  D6 70       	sub	a,0x70
1692  0571  20 1F       	jr	NZ,l_player_tile_00102
1693  0573  2A 00 00    	ld	hl,(_sprite)
1694  0576  26 00       	ld	h,0x00
1695  0578  11 00 00    	ld	de,_tile
1696  057B  19          	add	hl,de
1697  057C  E5          	push	hl
1698  057D  3E 01       	ld	a,0x01
1699  057F  21 00 00    	ld	hl,_sprite
1700  0582  F5          	push	af
1701  0583  33          	inc	sp
1702  0584  7E          	ld	a, (hl)
1703  0585  48          	ld	c,b
1704  0586  47          	ld	b,a
1705  0587  C5          	push	bc
1706  0588  CD 00 00    	call	_spr_tile_dir
1707  058B  F1          	pop	af
1708  058C  33          	inc	sp
1709  058D  D1          	pop	de
1710  058E  7D          	ld	a,l
1711  058F  12          	ld	(de), a
1712  0590  18 1D       	jr	l_player_tile_00107
1713  0592              l_player_tile_00102:
1714  0592  2A 00 00    	ld	hl,(_sprite)
1715  0595  26 00       	ld	h,0x00
1716  0597  11 00 00    	ld	de,_tile
1717  059A  19          	add	hl,de
1718  059B  E5          	push	hl
1719  059C  3E 08       	ld	a,0x08
1720  059E  21 00 00    	ld	hl,_sprite
1721  05A1  F5          	push	af
1722  05A2  33          	inc	sp
1723  05A3  7E          	ld	a, (hl)
1724  05A4  48          	ld	c,b
1725  05A5  47          	ld	b,a
1726  05A6  C5          	push	bc
1727  05A7  CD 00 00    	call	_spr_tile_dir
1728  05AA  F1          	pop	af
1729  05AB  33          	inc	sp
1730  05AC  D1          	pop	de
1731  05AD  7D          	ld	a,l
1732  05AE  12          	ld	(de), a
1733  05AF              l_player_tile_00107:
1734  05AF  C9          	ret
1735  05B0              	SECTION code_compiler
1736  05B0              ;	---------------------------------
1737  05B0              ; Function player_move_input
1738  05B0              ; ---------------------------------
1739  05B0              _player_move_input:
1740  05B0  CD BD 00    	call	_player_check_input
1741  05B3  7D          	ld	a, l
1742  05B4  B7          	or	a, a
1743  05B5  CA 23 07    	jp	Z, l_player_move_input_00136
1744  05B8  CD 26 07    	call	_player_fire
1745  05BB  7D          	ld	a, l
1746  05BC  B7          	or	a, a
1747  05BD  28 0A       	jr	Z,l_player_move_input_00102
1748  05BF  21 00 00    	ld	hl,_dirs
1749  05C2  36 00       	ld	(hl),0x00
1750  05C4  2E 00       	ld	l,0x00
1751  05C6  C3 25 07    	jp	l_player_move_input_00137
1752  05C9              l_player_move_input_00102:
1753  05C9  21 00 00    	ld	hl,_dirs
1754  05CC  CB 7E       	bit	7, (hl)
1755  05CE  28 67       	jr	Z,l_player_move_input_00106
1756  05D0  21 00 00    	ld	hl,_player_vel_inc
1757  05D3  36 01       	ld	(hl),0x01
1758  05D5  CD 00 00    	call	_ay_is_playing
1759  05D8  7D          	ld	a, l
1760  05D9  D6 03       	sub	a,0x03
1761  05DB  28 06       	jr	Z,l_player_move_input_00104
1762  05DD  21 00 00    	ld	hl,_ay_effect_03
1763  05E0  CD 00 00    	call	_ay_fx_play
1764  05E3              l_player_move_input_00104:
1765  05E3  21 00 00    	ld	hl,_player_over_stair
1766  05E6  36 00       	ld	(hl),0x00
1767  05E8  CD 00 00    	call	_sound_jump
1768  05EB  21 00 00    	ld	hl,_s_state
1769  05EE  7E          	ld	a,(hl)
1770  05EF  F6 01       	or	a,0x01
1771  05F1  E6 FD       	and	a,0xfd
1772  05F3  77          	ld	(hl),a
1773  05F4  2A 00 00    	ld	hl,(_sprite)
1774  05F7  26 00       	ld	h,0x00
1775  05F9  01 00 00    	ld	bc,_jump_lin
1776  05FC  09          	add	hl,bc
1777  05FD  4D          	ld	c,l
1778  05FE  44          	ld	b,h
1779  05FF  2A 00 00    	ld	hl,(_sprite)
1780  0602  26 00       	ld	h,0x00
1781  0604  11 00 00    	ld	de,_lin
1782  0607  19          	add	hl,de
1783  0608  7E          	ld	a,(hl)
1784  0609  02          	ld	(bc),a
1785  060A  2A 00 00    	ld	hl,(_sprite)
1786  060D  26 00       	ld	h,0x00
1787  060F  01 00 00    	ld	bc,_state
1788  0612  09          	add	hl,bc
1789  0613  3A 00 00    	ld	a,(_s_state)
1790  0616  77          	ld	(hl),a
1791  0617  2E 64       	ld	l,0x64
1792  0619  CD 5A 05    	call	_player_tile
1793  061C  2A 00 00    	ld	hl,(_sprite)
1794  061F  26 00       	ld	h,0x00
1795  0621  01 00 00    	ld	bc,_sprite_speed_alt
1796  0624  09          	add	hl,bc
1797  0625  36 02       	ld	(hl),0x02
1798  0627  21 00 00    	ld	hl,_player_slide
1799  062A  36 00       	ld	(hl),0x00
1800  062C  3A 00 00    	ld	a,(_player_vel_y0)
1801  062F  32 00 00    	ld	(_player_vel_y),a
1802  0632  2E 01       	ld	l,0x01
1803  0634  C3 25 07    	jp	l_player_move_input_00137
1804  0637              l_player_move_input_00106:
1805  0637  21 00 00    	ld	hl,_dirs
1806  063A  CB 5E       	bit	3, (hl)
1807  063C  28 33       	jr	Z,l_player_move_input_00110
1808  063E  21 00 00    	ld	hl,_s_state
1809  0641  7E          	ld	a,(hl)
1810  0642  F6 04       	or	a,0x04
1811  0644  E6 F7       	and	a,0xf7
1812  0646  77          	ld	(hl),a
1813  0647  01 00 00    	ld	bc,_state_a+0
1814  064A  79          	ld	a, c
1815  064B  21 00 00    	ld	hl,_sprite
1816  064E  86          	add	a, (hl)
1817  064F  5F          	ld	e, a
1818  0650  78          	ld	a, b
1819  0651  CE 00       	adc	a,0x00
1820  0653  57          	ld	d, a
1821  0654  1A          	ld	a, (de)
1822  0655  F6 10       	or	a,0x10
1823  0657  12          	ld	(de), a
1824  0658  79          	ld	a, c
1825  0659  86          	add	a, (hl)
1826  065A  4F          	ld	c, a
1827  065B  78          	ld	a, b
1828  065C  CE 00       	adc	a,0x00
1829  065E  47          	ld	b, a
1830  065F  0A          	ld	a, (bc)
1831  0660  E6 F7       	and	a,0xf7
1832  0662  02          	ld	(bc), a
1833  0663  3A 00 00    	ld	a,(_player_over_stair)
1834  0666  B7          	or	a, a
1835  0667  28 05       	jr	Z,l_player_move_input_00108
1836  0669  2E 00       	ld	l,0x00
1837  066B  CD AA 04    	call	_player_check_stairs
1838  066E              l_player_move_input_00108:
1839  066E  CD 00 00    	call	_spr_move_horizontal
1840  0671              l_player_move_input_00110:
1841  0671  21 00 00    	ld	hl,_dirs
1842  0674  CB 56       	bit	2, (hl)
1843  0676  28 33       	jr	Z,l_player_move_input_00114
1844  0678  21 00 00    	ld	hl,_s_state
1845  067B  7E          	ld	a,(hl)
1846  067C  F6 08       	or	a,0x08
1847  067E  E6 FB       	and	a,0xfb
1848  0680  77          	ld	(hl),a
1849  0681  01 00 00    	ld	bc,_state_a+0
1850  0684  79          	ld	a, c
1851  0685  21 00 00    	ld	hl,_sprite
1852  0688  86          	add	a, (hl)
1853  0689  5F          	ld	e, a
1854  068A  78          	ld	a, b
1855  068B  CE 00       	adc	a,0x00
1856  068D  57          	ld	d, a
1857  068E  1A          	ld	a, (de)
1858  068F  F6 08       	or	a,0x08
1859  0691  12          	ld	(de), a
1860  0692  79          	ld	a, c
1861  0693  86          	add	a, (hl)
1862  0694  4F          	ld	c, a
1863  0695  78          	ld	a, b
1864  0696  CE 00       	adc	a,0x00
1865  0698  47          	ld	b, a
1866  0699  0A          	ld	a, (bc)
1867  069A  E6 EF       	and	a,0xef
1868  069C  02          	ld	(bc), a
1869  069D  3A 00 00    	ld	a,(_player_over_stair)
1870  06A0  B7          	or	a, a
1871  06A1  28 05       	jr	Z,l_player_move_input_00112
1872  06A3  2E 00       	ld	l,0x00
1873  06A5  CD AA 04    	call	_player_check_stairs
1874  06A8              l_player_move_input_00112:
1875  06A8  CD 00 00    	call	_spr_move_horizontal
1876  06AB              l_player_move_input_00114:
1877  06AB  21 00 00    	ld	hl,_dirs
1878  06AE  CB 46       	bit	0, (hl)
1879  06B0  28 2B       	jr	Z,l_player_move_input_00124
1880  06B2  2E 00       	ld	l,0x00
1881  06B4  CD AA 04    	call	_player_check_stairs
1882  06B7  3A 00 00    	ld	a,(_player_over_stair)
1883  06BA  B7          	or	a, a
1884  06BB  28 0E       	jr	Z,l_player_move_input_00121
1885  06BD  CD 00 00    	call	_spr_move_up
1886  06C0  7D          	ld	a, l
1887  06C1  B7          	or	a, a
1888  06C2  28 19       	jr	Z,l_player_move_input_00124
1889  06C4  21 00 00    	ld	hl,_player_over_stair
1890  06C7  36 00       	ld	(hl),0x00
1891  06C9  18 12       	jr	l_player_move_input_00124
1892  06CB              l_player_move_input_00121:
1893  06CB  21 00 00    	ld	hl,_dirs
1894  06CE  CB 5E       	bit	3, (hl)
1895  06D0  20 0B       	jr	NZ,l_player_move_input_00124
1896  06D2  21 00 00    	ld	hl,_dirs
1897  06D5  CB 56       	bit	2, (hl)
1898  06D7  20 04       	jr	NZ,l_player_move_input_00124
1899  06D9  2E 00       	ld	l,0x00
1900  06DB  18 48       	jr	l_player_move_input_00137
1901  06DD              l_player_move_input_00124:
1902  06DD  21 00 00    	ld	hl,_dirs
1903  06E0  CB 4E       	bit	1, (hl)
1904  06E2  28 29       	jr	Z,l_player_move_input_00134
1905  06E4  CD 64 04    	call	_player_check_stairs_down
1906  06E7  3A 00 00    	ld	a,(_player_over_stair)
1907  06EA  B7          	or	a, a
1908  06EB  28 0E       	jr	Z,l_player_move_input_00131
1909  06ED  CD 00 00    	call	_spr_move_down
1910  06F0  7D          	ld	a, l
1911  06F1  B7          	or	a, a
1912  06F2  28 19       	jr	Z,l_player_move_input_00134
1913  06F4  21 00 00    	ld	hl,_player_over_stair
1914  06F7  36 00       	ld	(hl),0x00
1915  06F9  18 12       	jr	l_player_move_input_00134
1916  06FB              l_player_move_input_00131:
1917  06FB  21 00 00    	ld	hl,_dirs
1918  06FE  CB 5E       	bit	3, (hl)
1919  0700  20 0B       	jr	NZ,l_player_move_input_00134
1920  0702  21 00 00    	ld	hl,_dirs
1921  0705  CB 56       	bit	2, (hl)
1922  0707  20 04       	jr	NZ,l_player_move_input_00134
1923  0709  2E 00       	ld	l,0x00
1924  070B  18 18       	jr	l_player_move_input_00137
1925  070D              l_player_move_input_00134:
1926  070D  2A 00 00    	ld	hl,(_sprite)
1927  0710  26 00       	ld	h,0x00
1928  0712  01 00 00    	ld	bc,_state
1929  0715  09          	add	hl,bc
1930  0716  3A 00 00    	ld	a,(_s_state)
1931  0719  77          	ld	(hl),a
1932  071A  2E 60       	ld	l,0x60
1933  071C  CD 5A 05    	call	_player_tile
1934  071F  2E 01       	ld	l,0x01
1935  0721  18 02       	jr	l_player_move_input_00137
1936  0723              l_player_move_input_00136:
1937  0723  2E 00       	ld	l,0x00
1938  0725              l_player_move_input_00137:
1939  0725  C9          	ret
1940  0726              	SECTION code_compiler
1941  0726              ;	---------------------------------
1942  0726              ; Function player_fire
1943  0726              ; ---------------------------------
1944  0726              _player_fire:
1945  0726  21 00 00    	ld	hl,_dirs
1946  0729  CB 7E       	bit	7, (hl)
1947  072B  28 39       	jr	Z,l_player_fire_00108
1948  072D  21 00 00    	ld	hl,_dirs
1949  0730  CB 4E       	bit	1, (hl)
1950  0732  28 32       	jr	Z,l_player_fire_00108
1951  0734  21 00 00    	ld	hl,_player_mana
1952  0737  7E          	ld	a, (hl)
1953  0738  B7          	or	a, a
1954  0739  28 27       	jr	Z,l_player_fire_00105
1955  073B  3A 07 00    	ld	a,(_bullet_col + 0x0007)
1956  073E  3C          	inc	a
1957  073F  20 21       	jr	NZ,l_player_fire_00105
1958  0741  3E 05       	ld	a,0x05
1959  0743  96          	sub	a, (hl)
1960  0744  30 0C       	jr	NC,l_player_fire_00102
1961  0746  CD 00 00    	call	_sound_hit_enemy
1962  0749  21 00 00    	ld	hl,_player_mana
1963  074C  7E          	ld	a, (hl)
1964  074D  C6 FB       	add	a,0xfb
1965  074F  77          	ld	(hl), a
1966  0750  18 05       	jr	l_player_fire_00103
1967  0752              l_player_fire_00102:
1968  0752  21 00 00    	ld	hl,_player_mana
1969  0755  36 00       	ld	(hl),0x00
1970  0757              l_player_fire_00103:
1971  0757  CD 00 00    	call	_game_update_stats
1972  075A  21 07 78    	ld	hl,0x7807
1973  075D  E5          	push	hl
1974  075E  CD 00 00    	call	_game_shoot_fire
1975  0761  F1          	pop	af
1976  0762              l_player_fire_00105:
1977  0762  2E 01       	ld	l,0x01
1978  0764  18 02       	jr	l_player_fire_00110
1979  0766              l_player_fire_00108:
1980  0766  2E 00       	ld	l,0x00
1981  0768              l_player_fire_00110:
1982  0768  C9          	ret
1983  0769              	SECTION code_compiler
1984  0769              ;	---------------------------------
1985  0769              ; Function player_check_map
1986  0769              ; ---------------------------------
1987  0769              _player_check_map:
1988  0769  2A 00 00    	ld	hl,(_sprite)
1989  076C  26 00       	ld	h,0x00
1990  076E  01 00 00    	ld	bc,_col
1991  0771  09          	add	hl,bc
1992  0772  4E          	ld	c, (hl)
1993  0773  3A 00 00    	ld	a,(_sprite)
1994  0776  5F          	ld	e,a
1995  0777  16 00       	ld	d,0x00
1996  0779  21 00 00    	ld	hl,_lin
1997  077C  19          	add	hl,de
1998  077D  5E          	ld	e, (hl)
1999  077E  51          	ld	d,c
2000  077F  D5          	push	de
2001  0780  CD 00 00    	call	_spr_calc_index
2002  0783  F1          	pop	af
2003  0784  7D          	ld	a,l
2004  0785  32 00 00    	ld	(_sprite_curr_index),a
2005  0788  2A 00 00    	ld	hl,(_sprite)
2006  078B  26 00       	ld	h,0x00
2007  078D  01 00 00    	ld	bc,_col
2008  0790  09          	add	hl,bc
2009  0791  4E          	ld	c, (hl)
2010  0792  3A 00 00    	ld	a,(_sprite)
2011  0795  5F          	ld	e,a
2012  0796  16 00       	ld	d,0x00
2013  0798  21 00 00    	ld	hl,_lin
2014  079B  19          	add	hl,de
2015  079C  7E          	ld	a,(hl)
2016  079D  E6 0F       	and	a,0x0f
2017  079F  CB 41       	bit	0, c
2018  07A1  20 17       	jr	NZ,l_player_check_map_00108
2019  07A3  B7          	or	a, a
2020  07A4  20 05       	jr	NZ,l_player_check_map_00102
2021  07A6  CD E5 07    	call	_player_pick_item
2022  07A9  18 39       	jr	l_player_check_map_00110
2023  07AB              l_player_check_map_00102:
2024  07AB  CD E5 07    	call	_player_pick_item
2025  07AE  21 00 00    	ld	hl,_sprite_curr_index
2026  07B1  7E          	ld	a, (hl)
2027  07B2  C6 10       	add	a,0x10
2028  07B4  77          	ld	(hl), a
2029  07B5  CD E5 07    	call	_player_pick_item
2030  07B8  18 2A       	jr	l_player_check_map_00110
2031  07BA              l_player_check_map_00108:
2032  07BA  B7          	or	a, a
2033  07BB  20 0C       	jr	NZ,l_player_check_map_00105
2034  07BD  CD E5 07    	call	_player_pick_item
2035  07C0  21 00 00    	ld	hl,_sprite_curr_index
2036  07C3  34          	inc	(hl)
2037  07C4  CD E5 07    	call	_player_pick_item
2038  07C7  18 1B       	jr	l_player_check_map_00110
2039  07C9              l_player_check_map_00105:
2040  07C9  CD E5 07    	call	_player_pick_item
2041  07CC  21 00 00    	ld	hl,_sprite_curr_index
2042  07CF  34          	inc	(hl)
2043  07D0  CD E5 07    	call	_player_pick_item
2044  07D3  21 00 00    	ld	hl,_sprite_curr_index
2045  07D6  7E          	ld	a, (hl)
2046  07D7  C6 0F       	add	a,0x0f
2047  07D9  77          	ld	(hl), a
2048  07DA  CD E5 07    	call	_player_pick_item
2049  07DD  21 00 00    	ld	hl,_sprite_curr_index
2050  07E0  34          	inc	(hl)
2051  07E1  CD E5 07    	call	_player_pick_item
2052  07E4              l_player_check_map_00110:
2053  07E4  C9          	ret
2054  07E5              	SECTION code_compiler
2055  07E5              ;	---------------------------------
2056  07E5              ; Function player_pick_item
2057  07E5              ; ---------------------------------
2058  07E5              _player_pick_item:
2059  07E5  2A 00 00    	ld	hl,(_sprite_curr_index)
2060  07E8  26 00       	ld	h,0x00
2061  07EA  01 00 00    	ld	bc,_scr_map
2062  07ED  09          	add	hl,bc
2063  07EE  7E          	ld	a,(hl)
2064  07EF  4F          	ld	c,a
2065  07F0  D6 24       	sub	a,0x24
2066  07F2  DA 7E 09    	jp	C,l_player_pick_item_00129
2067  07F5  3E 2F       	ld	a,0x2f
2068  07F7  91          	sub	a,c
2069  07F8  DA 7E 09    	jp	C,l_player_pick_item_00129
2070  07FB  44          	ld	b,h
2071  07FC  CD 00 00    	call	_ay_reset
2072  07FF  21 00 00    	ld	hl,_ay_effect_10
2073  0802  CD 00 00    	call	_ay_fx_play
2074  0805  C5          	push	bc
2075  0806  CD 00 00    	call	_sound_coin
2076  0809  C1          	pop	bc
2077  080A  2A 00 00    	ld	hl,(_sprite_curr_index)
2078  080D  26 00       	ld	h,0x00
2079  080F  11 00 00    	ld	de,_scr_map
2080  0812  19          	add	hl,de
2081  0813  AF          	xor	a,a
2082  0814  77          	ld	(hl),a
2083  0815  3A 00 00    	ld	a,(_sprite_curr_index)
2084  0818  5F          	ld	e,a
2085  0819  16 00       	ld	d,0x00
2086  081B  C5          	push	bc
2087  081C  D5          	push	de
2088  081D  CD 00 00    	call	_game_obj_set
2089  0820  F1          	pop	af
2090  0821  C1          	pop	bc
2091  0822  3A 00 00    	ld	a,(_sprite_curr_index)
2092  0825  07          	rlca
2093  0826  07          	rlca
2094  0827  07          	rlca
2095  0828  07          	rlca
2096  0829  E6 0F       	and	a,0x0f
2097  082B  07          	rlca
2098  082C  07          	rlca
2099  082D  07          	rlca
2100  082E  07          	rlca
2101  082F  E6 F0       	and	a,0xf0
2102  0831  32 00 00    	ld	(_s_lin1),a
2103  0834  3A 00 00    	ld	a,(_sprite_curr_index)
2104  0837  E6 0F       	and	a,0x0f
2105  0839  87          	add	a, a
2106  083A  32 00 00    	ld	(_s_col1),a
2107  083D  C5          	push	bc
2108  083E  21 00 00    	ld	hl,0x0000
2109  0841  E5          	push	hl
2110  0842  21 84 03    	ld	hl,0x0384
2111  0845  E5          	push	hl
2112  0846  F5          	push	af
2113  0847  33          	inc	sp
2114  0848  3A 00 00    	ld	a,(_s_lin1)
2115  084B  F5          	push	af
2116  084C  33          	inc	sp
2117  084D  CD 00 00    	call	_spr_add_anim
2118  0850  F1          	pop	af
2119  0851  F1          	pop	af
2120  0852  F1          	pop	af
2121  0853  C1          	pop	bc
2122  0854  79          	ld	a, c
2123  0855  D6 24       	sub	a,0x24
2124  0857  DA 7E 09    	jp	C, l_player_pick_item_00129
2125  085A  3E 2F       	ld	a,0x2f
2126  085C  91          	sub	a, c
2127  085D  DA 7E 09    	jp	C, l_player_pick_item_00129
2128  0860  79          	ld	a, c
2129  0861  C6 DC       	add	a,0xdc
2130  0863  4F          	ld	c, a
2131  0864  06 00       	ld	b,0x00
2132  0866  21 6D 08    	ld	hl,l_player_pick_item_00171
2133  0869  09          	add	hl, bc
2134  086A  09          	add	hl, bc
2135  086B  09          	add	hl, bc
2136  086C  E9          	jp	(hl)
2137  086D              l_player_pick_item_00171:
2138  086D  C3 91 08    	jp	l_player_pick_item_00101
2139  0870  C3 A9 08    	jp	l_player_pick_item_00102
2140  0873  C3 C1 08    	jp	l_player_pick_item_00103
2141  0876  C3 D9 08    	jp	l_player_pick_item_00104
2142  0879  C3 F1 08    	jp	l_player_pick_item_00105
2143  087C  C3 03 09    	jp	l_player_pick_item_00107
2144  087F  C3 18 09    	jp	l_player_pick_item_00110
2145  0882  C3 2D 09    	jp	l_player_pick_item_00113
2146  0885  C3 42 09    	jp	l_player_pick_item_00116
2147  0888  C3 57 09    	jp	l_player_pick_item_00119
2148  088B  C3 6C 09    	jp	l_player_pick_item_00122
2149  088E  C3 FA 08    	jp	l_player_pick_item_00106
2150  0891              l_player_pick_item_00101:
2151  0891  21 00 00    	ld	hl,_player_keys
2152  0894  36 01       	ld	(hl),0x01
2153  0896  21 00 00    	ld	hl,_screen_ink
2154  0899  36 07       	ld	(hl),0x07
2155  089B  21 00 00    	ld	hl,___str_0
2156  089E  E5          	push	hl
2157  089F  21 14 14    	ld	hl,0x1414
2158  08A2  E5          	push	hl
2159  08A3  CD 00 00    	call	_zx_print_str
2160  08A6  C3 7E 09    	jp	l_player_pick_item_00129
2161  08A9              l_player_pick_item_00102:
2162  08A9  21 01 00    	ld	hl, +(_player_keys + 0x0001)
2163  08AC  36 01       	ld	(hl),0x01
2164  08AE  21 00 00    	ld	hl,_screen_ink
2165  08B1  36 02       	ld	(hl),0x02
2166  08B3  21 00 00    	ld	hl,___str_0
2167  08B6  E5          	push	hl
2168  08B7  21 14 15    	ld	hl,0x1514
2169  08BA  E5          	push	hl
2170  08BB  CD 00 00    	call	_zx_print_str
2171  08BE  C3 7E 09    	jp	l_player_pick_item_00129
2172  08C1              l_player_pick_item_00103:
2173  08C1  21 02 00    	ld	hl, +(_player_keys + 0x0002)
2174  08C4  36 01       	ld	(hl),0x01
2175  08C6  21 00 00    	ld	hl,_screen_ink
2176  08C9  36 04       	ld	(hl),0x04
2177  08CB  21 00 00    	ld	hl,___str_0
2178  08CE  E5          	push	hl
2179  08CF  21 14 16    	ld	hl,0x1614
2180  08D2  E5          	push	hl
2181  08D3  CD 00 00    	call	_zx_print_str
2182  08D6  C3 7E 09    	jp	l_player_pick_item_00129
2183  08D9              l_player_pick_item_00104:
2184  08D9  21 03 00    	ld	hl, +(_player_keys + 0x0003)
2185  08DC  36 01       	ld	(hl),0x01
2186  08DE  21 00 00    	ld	hl,_screen_ink
2187  08E1  36 05       	ld	(hl),0x05
2188  08E3  21 00 00    	ld	hl,___str_0
2189  08E6  E5          	push	hl
2190  08E7  21 14 17    	ld	hl,0x1714
2191  08EA  E5          	push	hl
2192  08EB  CD 00 00    	call	_zx_print_str
2193  08EE  C3 7E 09    	jp	l_player_pick_item_00129
2194  08F1              l_player_pick_item_00105:
2195  08F1  21 01 00    	ld	hl,0x0001
2196  08F4  CD 63 0C    	call	_player_score_add
2197  08F7  C3 7E 09    	jp	l_player_pick_item_00129
2198  08FA              l_player_pick_item_00106:
2199  08FA  21 0A 00    	ld	hl,0x000a
2200  08FD  CD 63 0C    	call	_player_score_add
2201  0900  C3 7E 09    	jp	l_player_pick_item_00129
2202  0903              l_player_pick_item_00107:
2203  0903  21 00 00    	ld	hl,_player_str
2204  0906  34          	inc	(hl)
2205  0907  21 00 00    	ld	hl,_player_max_vita
2206  090A  7E          	ld	a, (hl)
2207  090B  D6 C8       	sub	a,0xc8
2208  090D  30 6F       	jr	NC,l_player_pick_item_00129
2209  090F  7E          	ld	a, (hl)
2210  0910  C6 0A       	add	a,0x0a
2211  0912  77          	ld	(hl), a
2212  0913  CD 00 00    	call	_game_update_stats
2213  0916  18 66       	jr	l_player_pick_item_00129
2214  0918              l_player_pick_item_00110:
2215  0918  21 00 00    	ld	hl,_player_str
2216  091B  34          	inc	(hl)
2217  091C  21 00 00    	ld	hl,_player_max_vita
2218  091F  7E          	ld	a, (hl)
2219  0920  D6 C8       	sub	a,0xc8
2220  0922  30 5A       	jr	NC,l_player_pick_item_00129
2221  0924  7E          	ld	a, (hl)
2222  0925  C6 0A       	add	a,0x0a
2223  0927  77          	ld	(hl), a
2224  0928  CD 00 00    	call	_game_update_stats
2225  092B  18 51       	jr	l_player_pick_item_00129
2226  092D              l_player_pick_item_00113:
2227  092D  21 00 00    	ld	hl,_player_str
2228  0930  34          	inc	(hl)
2229  0931  21 00 00    	ld	hl,_player_max_vita
2230  0934  7E          	ld	a, (hl)
2231  0935  D6 C8       	sub	a,0xc8
2232  0937  30 45       	jr	NC,l_player_pick_item_00129
2233  0939  7E          	ld	a, (hl)
2234  093A  C6 0A       	add	a,0x0a
2235  093C  77          	ld	(hl), a
2236  093D  CD 00 00    	call	_game_update_stats
2237  0940  18 3C       	jr	l_player_pick_item_00129
2238  0942              l_player_pick_item_00116:
2239  0942  21 00 00    	ld	hl,_player_int
2240  0945  34          	inc	(hl)
2241  0946  21 00 00    	ld	hl,_player_max_mana
2242  0949  7E          	ld	a, (hl)
2243  094A  D6 C8       	sub	a,0xc8
2244  094C  30 30       	jr	NC,l_player_pick_item_00129
2245  094E  7E          	ld	a, (hl)
2246  094F  C6 0A       	add	a,0x0a
2247  0951  77          	ld	(hl), a
2248  0952  CD 00 00    	call	_game_update_stats
2249  0955  18 27       	jr	l_player_pick_item_00129
2250  0957              l_player_pick_item_00119:
2251  0957  21 00 00    	ld	hl,_player_int
2252  095A  34          	inc	(hl)
2253  095B  21 00 00    	ld	hl,_player_max_mana
2254  095E  7E          	ld	a, (hl)
2255  095F  D6 C8       	sub	a,0xc8
2256  0961  30 1B       	jr	NC,l_player_pick_item_00129
2257  0963  7E          	ld	a, (hl)
2258  0964  C6 0A       	add	a,0x0a
2259  0966  77          	ld	(hl), a
2260  0967  CD 00 00    	call	_game_update_stats
2261  096A  18 12       	jr	l_player_pick_item_00129
2262  096C              l_player_pick_item_00122:
2263  096C  21 00 00    	ld	hl,_player_int
2264  096F  34          	inc	(hl)
2265  0970  21 00 00    	ld	hl,_player_max_mana
2266  0973  7E          	ld	a, (hl)
2267  0974  D6 C8       	sub	a,0xc8
2268  0976  D0          	ret	NC
2269  0977  7E          	ld	a, (hl)
2270  0978  C6 0A       	add	a,0x0a
2271  097A  77          	ld	(hl), a
2272  097B  CD 00 00    	call	_game_update_stats
2273  097E              l_player_pick_item_00129:
2274  097E  C9          	ret
2275  097F              	SECTION rodata_compiler
2276  0000              ___str_0:
2277  0000  5D          	DEFM "]"
2278  0001  00          	DEFB 0x00
2279  0002              	SECTION code_compiler
2280  097F              ;	---------------------------------
2281  097F              ; Function player_hit_platform
2282  097F              ; ---------------------------------
2283  097F              _player_hit_platform:
2284  097F  CD 00 00    	call	___sdcc_enter_ix
2285  0982  F5          	push	af
2286  0983  3A 00 00    	ld	a,(_player_hit_lin)
2287  0986  B7          	or	a, a
2288  0987  C2 24 0C    	jp	NZ, l_player_hit_platform_00144
2289  098A  2A 00 00    	ld	hl,(_sprite)
2290  098D  26 00       	ld	h,0x00
2291  098F  01 00 00    	ld	bc,_lin
2292  0992  09          	add	hl,bc
2293  0993  4E          	ld	c,(hl)
2294  0994  3E 10       	ld	a,0x10
2295  0996  91          	sub	a, c
2296  0997  D2 24 0C    	jp	NC, l_player_hit_platform_00144
2297  099A  01 00 00    	ld	bc,_scr_map
2298  099D  2A 00 00    	ld	hl,(_index1)
2299  09A0  09          	add	hl,bc
2300  09A1  7E          	ld	a,(hl)
2301  09A2  D6 45       	sub	a,0x45
2302  09A4  DA 24 0C    	jp	C, l_player_hit_platform_00144
2303  09A7  01 00 00    	ld	bc,_spr_timer+0
2304  09AA  2A 00 00    	ld	hl,(_sprite)
2305  09AD  26 00       	ld	h,0x00
2306  09AF  29          	add	hl, hl
2307  09B0  09          	add	hl,bc
2308  09B1  ED 5B 00 00 	ld	de,(_curr_time)
2309  09B5  73          	ld	(hl),e
2310  09B6  23          	inc	hl
2311  09B7  72          	ld	(hl),d
2312  09B8  2A 00 00    	ld	hl,(_sprite)
2313  09BB  26 00       	ld	h,0x00
2314  09BD  01 00 00    	ld	bc,_lin
2315  09C0  09          	add	hl,bc
2316  09C1  4E          	ld	c,(hl)
2317  09C2  06 00       	ld	b,0x00
2318  09C4  21 F8 FF    	ld	hl,0xfff8
2319  09C7  09          	add	hl,bc
2320  09C8  EB          	ex	de,hl
2321  09C9  06 04       	ld	b,0x04
2322  09CB              l_player_hit_platform_00249:
2323  09CB  CB 2A       	sra	d
2324  09CD  CB 1B       	rr	e
2325  09CF  10 FA       	djnz	l_player_hit_platform_00249
2326  09D1  7B          	ld	a, e
2327  09D2  07          	rlca
2328  09D3  07          	rlca
2329  09D4  07          	rlca
2330  09D5  07          	rlca
2331  09D6  E6 F0       	and	a,0xf0
2332  09D8  C6 08       	add	a,0x08
2333  09DA  32 00 00    	ld	(_player_hit_lin),a
2334  09DD  2A 00 00    	ld	hl,(_sprite)
2335  09E0  26 00       	ld	h,0x00
2336  09E2  01 00 00    	ld	bc,_col
2337  09E5  09          	add	hl,bc
2338  09E6  4E          	ld	c,(hl)
2339  09E7  CB 41       	bit	0,c
2340  09E9  20 06       	jr	NZ,l_player_hit_platform_00111
2341  09EB  21 00 00    	ld	hl,_player_hit_col
2342  09EE  71          	ld	(hl), c
2343  09EF  18 33       	jr	l_player_hit_platform_00112
2344  09F1              l_player_hit_platform_00111:
2345  09F1  2A 00 00    	ld	hl,(_sprite)
2346  09F4  26 00       	ld	h,0x00
2347  09F6  11 00 00    	ld	de,_state
2348  09F9  19          	add	hl,de
2349  09FA  5E          	ld	e, (hl)
2350  09FB  41          	ld	b, c
2351  09FC  04          	inc	b
2352  09FD  0D          	dec	c
2353  09FE  CB 5B       	bit	3, e
2354  0A00  28 12       	jr	Z,l_player_hit_platform_00108
2355  0A02  3A 00 00    	ld	a,(_g_player_hit_right)
2356  0A05  B7          	or	a, a
2357  0A06  28 06       	jr	Z,l_player_hit_platform_00102
2358  0A08  21 00 00    	ld	hl,_player_hit_col
2359  0A0B  70          	ld	(hl), b
2360  0A0C  18 16       	jr	l_player_hit_platform_00112
2361  0A0E              l_player_hit_platform_00102:
2362  0A0E  21 00 00    	ld	hl,_player_hit_col
2363  0A11  71          	ld	(hl), c
2364  0A12  18 10       	jr	l_player_hit_platform_00112
2365  0A14              l_player_hit_platform_00108:
2366  0A14  3A 00 00    	ld	a,(_g_player_hit_left)
2367  0A17  B7          	or	a, a
2368  0A18  28 06       	jr	Z,l_player_hit_platform_00105
2369  0A1A  21 00 00    	ld	hl,_player_hit_col
2370  0A1D  71          	ld	(hl), c
2371  0A1E  18 04       	jr	l_player_hit_platform_00112
2372  0A20              l_player_hit_platform_00105:
2373  0A20  21 00 00    	ld	hl,_player_hit_col
2374  0A23  70          	ld	(hl), b
2375  0A24              l_player_hit_platform_00112:
2376  0A24  01 00 00    	ld	bc,_scr_map
2377  0A27  2A 00 00    	ld	hl,(_index1)
2378  0A2A  09          	add	hl,bc
2379  0A2B  7E          	ld	a,(hl)
2380  0A2C  FE 4D       	cp	a,0x4d
2381  0A2E  20 3B       	jr	NZ,l_player_hit_platform_00114
2382  0A30  AF          	xor	a,a
2383  0A31  77          	ld	(hl),a
2384  0A32  2A 00 00    	ld	hl,(_index0)
2385  0A35  E5          	push	hl
2386  0A36  CD 00 00    	call	_game_obj_set
2387  0A39  F1          	pop	af
2388  0A3A  21 00 00    	ld	hl,_index1
2389  0A3D  7E          	ld	a, (hl)
2390  0A3E  E6 0F       	and	a,0x0f
2391  0A40  87          	add	a, a
2392  0A41  4F          	ld	c, a
2393  0A42  23          	inc	hl
2394  0A43  56          	ld	d,(hl)
2395  0A44  2B          	dec	hl
2396  0A45  7E          	ld	a, (hl)
2397  0A46  06 04       	ld	b,0x04
2398  0A48              l_player_hit_platform_00255:
2399  0A48  CB 3A       	srl	d
2400  0A4A  1F          	rra
2401  0A4B  10 FB       	djnz	l_player_hit_platform_00255
2402  0A4D  07          	rlca
2403  0A4E  07          	rlca
2404  0A4F  07          	rlca
2405  0A50  07          	rlca
2406  0A51  E6 F0       	and	a,0xf0
2407  0A53  47          	ld	b, a
2408  0A54  21 00 00    	ld	hl,0x0000
2409  0A57  E5          	push	hl
2410  0A58  21 87 03    	ld	hl,0x0387
2411  0A5B  E5          	push	hl
2412  0A5C  79          	ld	a, c
2413  0A5D  48          	ld	c,b
2414  0A5E  47          	ld	b,a
2415  0A5F  C5          	push	bc
2416  0A60  CD 00 00    	call	_spr_add_anim
2417  0A63  F1          	pop	af
2418  0A64  F1          	pop	af
2419  0A65  F1          	pop	af
2420  0A66  2E 01       	ld	l,0x01
2421  0A68  C3 26 0C    	jp	l_player_hit_platform_00147
2422  0A6B              l_player_hit_platform_00114:
2423  0A6B  FE 5C       	cp	a,0x5c
2424  0A6D  28 05       	jr	Z,l_player_hit_platform_00140
2425  0A6F  D6 5D       	sub	a,0x5d
2426  0A71  C2 18 0C    	jp	NZ,l_player_hit_platform_00141
2427  0A74              l_player_hit_platform_00140:
2428  0A74  21 00 00    	ld	hl,_tmp0
2429  0A77  36 00       	ld	(hl),0x00
2430  0A79  3A 00 00    	ld	a,(_game_boss)
2431  0A7C  B7          	or	a, a
2432  0A7D  28 0B       	jr	Z,l_player_hit_platform_00173
2433  0A7F  3A 00 00    	ld	a,(_game_mush_count)
2434  0A82  B7          	or	a, a
2435  0A83  28 05       	jr	Z,l_player_hit_platform_00173
2436  0A85  2E 00       	ld	l,0x00
2437  0A87  C3 26 0C    	jp	l_player_hit_platform_00147
2438  0A8A              l_player_hit_platform_00173:
2439  0A8A              l_player_hit_platform_00137:
2440  0A8A  21 00 00    	ld	hl,_tmp0
2441  0A8D  7E          	ld	a, (hl)
2442  0A8E  D6 07       	sub	a,0x07
2443  0A90  D2 18 0C    	jp	NC, l_player_hit_platform_00141
2444  0A93  4E          	ld	c,(hl)
2445  0A94  06 00       	ld	b,0x00
2446  0A96  21 00 00    	ld	hl,_mush_index
2447  0A99  09          	add	hl,bc
2448  0A9A  4E          	ld	c, (hl)
2449  0A9B  06 00       	ld	b,0x00
2450  0A9D  2A 00 00    	ld	hl,(_index1)
2451  0AA0  AF          	xor	a,a
2452  0AA1  ED 42       	sbc	hl,bc
2453  0AA3  C2 11 0C    	jp	NZ,l_player_hit_platform_00136
2454  0AA6  2A 00 00    	ld	hl,(_sprite)
2455  0AA9  26 00       	ld	h,0x00
2456  0AAB  01 00 00    	ld	bc,_lin
2457  0AAE  09          	add	hl,bc
2458  0AAF  7E          	ld	a,(hl)
2459  0AB0  07          	rlca
2460  0AB1  07          	rlca
2461  0AB2  07          	rlca
2462  0AB3  07          	rlca
2463  0AB4  E6 0F       	and	a,0x0f
2464  0AB6  07          	rlca
2465  0AB7  07          	rlca
2466  0AB8  07          	rlca
2467  0AB9  07          	rlca
2468  0ABA  E6 F0       	and	a,0xf0
2469  0ABC  C6 E0       	add	a,0xe0
2470  0ABE  32 00 00    	ld	(_s_lin1),a
2471  0AC1  2A 00 00    	ld	hl,(_sprite)
2472  0AC4  26 00       	ld	h,0x00
2473  0AC6  01 00 00    	ld	bc,_col
2474  0AC9  09          	add	hl,bc
2475  0ACA  7E          	ld	a,(hl)
2476  0ACB  CB 3F       	srl	a
2477  0ACD  87          	add	a, a
2478  0ACE  32 00 00    	ld	(_s_col1),a
2479  0AD1  21 00 00    	ld	hl,_tmp
2480  0AD4  36 00       	ld	(hl),0x00
2481  0AD6              l_player_hit_platform_00120:
2482  0AD6  21 00 00    	ld	hl,_tmp
2483  0AD9  7E          	ld	a, (hl)
2484  0ADA  D6 07       	sub	a,0x07
2485  0ADC  30 1C       	jr	NC,l_player_hit_platform_00122
2486  0ADE  4E          	ld	c,(hl)
2487  0ADF  06 00       	ld	b,0x00
2488  0AE1  21 00 00    	ld	hl,_mush_index
2489  0AE4  09          	add	hl,bc
2490  0AE5  4E          	ld	c, (hl)
2491  0AE6  06 00       	ld	b,0x00
2492  0AE8  21 00 00    	ld	hl,_index1
2493  0AEB  7E          	ld	a, (hl)
2494  0AEC  91          	sub	a, c
2495  0AED  20 05       	jr	NZ,l_player_hit_platform_00261
2496  0AEF  23          	inc	hl
2497  0AF0  7E          	ld	a, (hl)
2498  0AF1  90          	sub	a, b
2499  0AF2  28 06       	jr	Z,l_player_hit_platform_00122
2500  0AF4              l_player_hit_platform_00261:
2501  0AF4  21 00 00    	ld	hl,_tmp
2502  0AF7  34          	inc	(hl)
2503  0AF8  18 DC       	jr	l_player_hit_platform_00120
2504  0AFA              l_player_hit_platform_00122:
2505  0AFA  2A 00 00    	ld	hl,(_tmp)
2506  0AFD  26 00       	ld	h,0x00
2507  0AFF  01 00 00    	ld	bc,_mush_class
2508  0B02  09          	add	hl,bc
2509  0B03  7E          	ld	a,(hl)
2510  0B04  FE 78       	cp	a,0x78
2511  0B06  28 18       	jr	Z,l_player_hit_platform_00123
2512  0B08  FE 79       	cp	a,0x79
2513  0B0A  28 2F       	jr	Z,l_player_hit_platform_00124
2514  0B0C  FE 7A       	cp	a,0x7a
2515  0B0E  28 5F       	jr	Z,l_player_hit_platform_00126
2516  0B10  FE 7B       	cp	a,0x7b
2517  0B12  28 41       	jr	Z,l_player_hit_platform_00125
2518  0B14  FE 7C       	cp	a,0x7c
2519  0B16  CA A3 0B    	jp	Z,l_player_hit_platform_00128
2520  0B19  D6 7D       	sub	a,0x7d
2521  0B1B  28 6C       	jr	Z,l_player_hit_platform_00127
2522  0B1D  C3 BB 0B    	jp	l_player_hit_platform_00129
2523  0B20              l_player_hit_platform_00123:
2524  0B20  2E 02       	ld	l,0x02
2525  0B22  CD 00 00    	call	_zx_border_fastcall
2526  0B25  3A 00 00    	ld	a,(_s_col1)
2527  0B28  21 06 FF    	ld	hl,0xff06
2528  0B2B  E5          	push	hl
2529  0B2C  F5          	push	af
2530  0B2D  33          	inc	sp
2531  0B2E  3A 00 00    	ld	a,(_s_lin1)
2532  0B31  F5          	push	af
2533  0B32  33          	inc	sp
2534  0B33  CD 00 00    	call	_enemy_init
2535  0B36  F1          	pop	af
2536  0B37  F1          	pop	af
2537  0B38  C3 BB 0B    	jp	l_player_hit_platform_00129
2538  0B3B              l_player_hit_platform_00124:
2539  0B3B  2E 02       	ld	l,0x02
2540  0B3D  CD 00 00    	call	_zx_border_fastcall
2541  0B40  3A 00 00    	ld	a,(_s_col1)
2542  0B43  21 06 01    	ld	hl,0x0106
2543  0B46  E5          	push	hl
2544  0B47  F5          	push	af
2545  0B48  33          	inc	sp
2546  0B49  3A 00 00    	ld	a,(_s_lin1)
2547  0B4C  F5          	push	af
2548  0B4D  33          	inc	sp
2549  0B4E  CD 00 00    	call	_enemy_init
2550  0B51  F1          	pop	af
2551  0B52  F1          	pop	af
2552  0B53  18 66       	jr	l_player_hit_platform_00129
2553  0B55              l_player_hit_platform_00125:
2554  0B55  2E 01       	ld	l,0x01
2555  0B57  CD 00 00    	call	_zx_border_fastcall
2556  0B5A  3A 00 00    	ld	a,(_s_col1)
2557  0B5D  21 07 01    	ld	hl,0x0107
2558  0B60  E5          	push	hl
2559  0B61  F5          	push	af
2560  0B62  33          	inc	sp
2561  0B63  3A 00 00    	ld	a,(_s_lin1)
2562  0B66  F5          	push	af
2563  0B67  33          	inc	sp
2564  0B68  CD 00 00    	call	_enemy_init
2565  0B6B  F1          	pop	af
2566  0B6C  F1          	pop	af
2567  0B6D  18 4C       	jr	l_player_hit_platform_00129
2568  0B6F              l_player_hit_platform_00126:
2569  0B6F  2E 01       	ld	l,0x01
2570  0B71  CD 00 00    	call	_zx_border_fastcall
2571  0B74  3A 00 00    	ld	a,(_s_col1)
2572  0B77  21 07 FF    	ld	hl,0xff07
2573  0B7A  E5          	push	hl
2574  0B7B  F5          	push	af
2575  0B7C  33          	inc	sp
2576  0B7D  3A 00 00    	ld	a,(_s_lin1)
2577  0B80  F5          	push	af
2578  0B81  33          	inc	sp
2579  0B82  CD 00 00    	call	_enemy_init
2580  0B85  F1          	pop	af
2581  0B86  F1          	pop	af
2582  0B87  18 32       	jr	l_player_hit_platform_00129
2583  0B89              l_player_hit_platform_00127:
2584  0B89  2E 04       	ld	l,0x04
2585  0B8B  CD 00 00    	call	_zx_border_fastcall
2586  0B8E  3A 00 00    	ld	a,(_s_col1)
2587  0B91  21 08 01    	ld	hl,0x0108
2588  0B94  E5          	push	hl
2589  0B95  F5          	push	af
2590  0B96  33          	inc	sp
2591  0B97  3A 00 00    	ld	a,(_s_lin1)
2592  0B9A  F5          	push	af
2593  0B9B  33          	inc	sp
2594  0B9C  CD 00 00    	call	_enemy_init
2595  0B9F  F1          	pop	af
2596  0BA0  F1          	pop	af
2597  0BA1  18 18       	jr	l_player_hit_platform_00129
2598  0BA3              l_player_hit_platform_00128:
2599  0BA3  2E 04       	ld	l,0x04
2600  0BA5  CD 00 00    	call	_zx_border_fastcall
2601  0BA8  3A 00 00    	ld	a,(_s_col1)
2602  0BAB  21 08 FF    	ld	hl,0xff08
2603  0BAE  E5          	push	hl
2604  0BAF  F5          	push	af
2605  0BB0  33          	inc	sp
2606  0BB1  3A 00 00    	ld	a,(_s_lin1)
2607  0BB4  F5          	push	af
2608  0BB5  33          	inc	sp
2609  0BB6  CD 00 00    	call	_enemy_init
2610  0BB9  F1          	pop	af
2611  0BBA  F1          	pop	af
2612  0BBB              l_player_hit_platform_00129:
2613  0BBB  21 00 00    	ld	hl,_game_mush_count
2614  0BBE  34          	inc	(hl)
2615  0BBF  3A 00 00    	ld	a,(_game_boss)
2616  0BC2  B7          	or	a, a
2617  0BC3  20 4C       	jr	NZ,l_player_hit_platform_00136
2618  0BC5  2A 00 00    	ld	hl,(_index1)
2619  0BC8  01 F0 FF    	ld	bc,0xfff0
2620  0BCB  09          	add	hl,bc
2621  0BCC  01 00 00    	ld	bc,_scr_map
2622  0BCF  09          	add	hl,bc
2623  0BD0  36 00       	ld	(hl),0x00
2624  0BD2  3E 00       	ld	a, +((_scr_map) & 0xFF)
2625  0BD4  21 00 00    	ld	hl,_index1
2626  0BD7  86          	add	a, (hl)
2627  0BD8  DD 77 FE    	ld	(ix-2),a
2628  0BDB  3E 00       	ld	a, +((_scr_map) / 256)
2629  0BDD  23          	inc	hl
2630  0BDE  8E          	adc	a, (hl)
2631  0BDF  DD 77 FF    	ld	(ix-1),a
2632  0BE2  E1          	pop	hl
2633  0BE3  7E          	ld	a,(hl)
2634  0BE4  E5          	push	hl
2635  0BE5  D6 5C       	sub	a,0x5c
2636  0BE7  20 06       	jr	NZ,l_player_hit_platform_00131
2637  0BE9  E1          	pop	hl
2638  0BEA  E5          	push	hl
2639  0BEB  36 4F       	ld	(hl),0x4f
2640  0BED  18 04       	jr	l_player_hit_platform_00132
2641  0BEF              l_player_hit_platform_00131:
2642  0BEF  E1          	pop	hl
2643  0BF0  E5          	push	hl
2644  0BF1  36 54       	ld	(hl),0x54
2645  0BF3              l_player_hit_platform_00132:
2646  0BF3  2A 00 00    	ld	hl,(_index1)
2647  0BF6  01 F0 FF    	ld	bc,0xfff0
2648  0BF9  09          	add	hl,bc
2649  0BFA  E5          	push	hl
2650  0BFB  CD 00 00    	call	_game_obj_set
2651  0BFE  F1          	pop	af
2652  0BFF  3A 00 00    	ld	a,(_s_lin1)
2653  0C02  C6 10       	add	a,0x10
2654  0C04  4F          	ld	c, a
2655  0C05  3A 00 00    	ld	a, (_s_col1)
2656  0C08  47          	ld	b,a
2657  0C09  C5          	push	bc
2658  0C0A  3E 4F       	ld	a,0x4f
2659  0C0C  F5          	push	af
2660  0C0D  33          	inc	sp
2661  0C0E  CD 00 00    	call	_NIRVANAP_drawT_callee
2662  0C11              l_player_hit_platform_00136:
2663  0C11  21 00 00    	ld	hl,_tmp0
2664  0C14  34          	inc	(hl)
2665  0C15  C3 8A 0A    	jp	l_player_hit_platform_00137
2666  0C18              l_player_hit_platform_00141:
2667  0C18  2E 01       	ld	l,0x01
2668  0C1A  CD 00 00    	call	_spr_brick_anim
2669  0C1D  CD 00 00    	call	_sound_hit_brick
2670  0C20  2E 01       	ld	l,0x01
2671  0C22  18 02       	jr	l_player_hit_platform_00147
2672  0C24              l_player_hit_platform_00144:
2673  0C24  2E 00       	ld	l,0x00
2674  0C26              l_player_hit_platform_00147:
2675  0C26  F1          	pop	af
2676  0C27  DD E1       	pop	ix
2677  0C29  C9          	ret
2678  0C2A              	SECTION code_compiler
2679  0C2A              ;	---------------------------------
2680  0C2A              ; Function player_hit_platform_clear
2681  0C2A              ; ---------------------------------
2682  0C2A              _player_hit_platform_clear:
2683  0C2A  2A 00 00    	ld	hl,(_sprite)
2684  0C2D  26 00       	ld	h,0x00
2685  0C2F  29          	add	hl, hl
2686  0C30  11 00 00    	ld	de,_spr_timer
2687  0C33  19          	add	hl, de
2688  0C34  4E          	ld	c, (hl)
2689  0C35  23          	inc	hl
2690  0C36  46          	ld	b, (hl)
2691  0C37  21 04 00    	ld	hl,0x0004
2692  0C3A  E5          	push	hl
2693  0C3B  C5          	push	bc
2694  0C3C  CD 00 00    	call	_game_check_time
2695  0C3F  F1          	pop	af
2696  0C40  F1          	pop	af
2697  0C41  7D          	ld	a, l
2698  0C42  B7          	or	a, a
2699  0C43  C8          	ret	Z
2700  0C44  2A FF FF    	ld	hl,(_player_hit_col - 1)
2701  0C47  3A 00 00    	ld	a,(_player_hit_lin)
2702  0C4A  6F          	ld	l,a
2703  0C4B  E5          	push	hl
2704  0C4C  CD 00 00    	call	_spr_calc_index
2705  0C4F  F1          	pop	af
2706  0C50  22 00 00    	ld	(_index1),hl
2707  0C53  2E 00       	ld	l,0x00
2708  0C55  CD 00 00    	call	_spr_brick_anim
2709  0C58  21 00 00    	ld	hl,_player_hit_lin
2710  0C5B  36 00       	ld	(hl),0x00
2711  0C5D  21 00 00    	ld	hl,_player_hit_col
2712  0C60  36 00       	ld	(hl),0x00
2713  0C62  C9          	ret
2714  0C63              	SECTION code_compiler
2715  0C63              ;	---------------------------------
2716  0C63              ; Function player_score_add
2717  0C63              ; ---------------------------------
2718  0C63              _player_score_add:
2719  0C63  ED 4B 00 00 	ld	bc,(_player_score)
2720  0C67  09          	add	hl,bc
2721  0C68  22 00 00    	ld	(_player_score),hl
2722  0C6B  21 00 00    	ld	hl,_player_lvl
2723  0C6E  7E          	ld	a, (hl)
2724  0C6F  D6 14       	sub	a,0x14
2725  0C71  30 3C       	jr	NC,l_player_score_add_00104
2726  0C73  01 00 00    	ld	bc,_player_lvl_table+0
2727  0C76  6E          	ld	l,(hl)
2728  0C77  26 00       	ld	h,0x00
2729  0C79  29          	add	hl, hl
2730  0C7A  09          	add	hl, bc
2731  0C7B  4E          	ld	c, (hl)
2732  0C7C  23          	inc	hl
2733  0C7D  46          	ld	b, (hl)
2734  0C7E  21 00 00    	ld	hl,_player_score
2735  0C81  7E          	ld	a, (hl)
2736  0C82  91          	sub	a, c
2737  0C83  23          	inc	hl
2738  0C84  7E          	ld	a, (hl)
2739  0C85  98          	sbc	a, b
2740  0C86  38 27       	jr	C,l_player_score_add_00104
2741  0C88  21 00 00    	ld	hl,_player_lvl
2742  0C8B  34          	inc	(hl)
2743  0C8C  21 02 00    	ld	hl,___str_1
2744  0C8F  E5          	push	hl
2745  0C90  21 0C 0C    	ld	hl,0x0c0c
2746  0C93  E5          	push	hl
2747  0C94  CD 00 00    	call	_zx_print_str
2748  0C97  AF          	xor	a, a
2749  0C98  F5          	push	af
2750  0C99  33          	inc	sp
2751  0C9A  21 19 00    	ld	hl,0x0019
2752  0C9D  E5          	push	hl
2753  0C9E  21 0C 15    	ld	hl,0x150c
2754  0CA1  E5          	push	hl
2755  0CA2  3E 0C       	ld	a,0x0c
2756  0CA4  F5          	push	af
2757  0CA5  33          	inc	sp
2758  0CA6  CD 00 00    	call	_game_colour_message
2759  0CA9  F1          	pop	af
2760  0CAA  F1          	pop	af
2761  0CAB  F1          	pop	af
2762  0CAC  CD 00 00    	call	_game_update_stats
2763  0CAF              l_player_score_add_00104:
2764  0CAF  3A 00 00    	ld	a,(_game_score_top)
2765  0CB2  21 00 00    	ld	hl,_player_score
2766  0CB5  96          	sub	a, (hl)
2767  0CB6  3A 01 00    	ld	a,(_game_score_top + 1)
2768  0CB9  23          	inc	hl
2769  0CBA  9E          	sbc	a, (hl)
2770  0CBB  30 06       	jr	NC,l_player_score_add_00106
2771  0CBD  2A 00 00    	ld	hl,(_player_score)
2772  0CC0  22 00 00    	ld	(_game_score_top),hl
2773  0CC3              l_player_score_add_00106:
2774  0CC3  CD 00 00    	call	_game_print_score
2775  0CC6  C9          	ret
2776  0CC7              	SECTION rodata_compiler
2777  0002              ___str_1:
2778  0002  4C 45 56 45 4C 20 55 50 21 
                        	DEFM "LEVEL UP!"
2779  000B  00          	DEFB 0x00
2780  000C              	SECTION code_compiler
2781  0CC7              ;	---------------------------------
2782  0CC7              ; Function player_check_floor
2783  0CC7              ; ---------------------------------
2784  0CC7              _player_check_floor:
2785  0CC7  CD 00 00    	call	___sdcc_enter_ix
2786  0CCA  3B          	dec	sp
2787  0CCB  2A 00 00    	ld	hl,(_sprite)
2788  0CCE  26 00       	ld	h,0x00
2789  0CD0  01 00 00    	ld	bc,_col
2790  0CD3  09          	add	hl,bc
2791  0CD4  56          	ld	d, (hl)
2792  0CD5  2A 00 00    	ld	hl,(_sprite)
2793  0CD8  26 00       	ld	h,0x00
2794  0CDA  01 00 00    	ld	bc,_lin
2795  0CDD  09          	add	hl,bc
2796  0CDE  7E          	ld	a,(hl)
2797  0CDF  C6 10       	add	a,0x10
2798  0CE1  5F          	ld	e, a
2799  0CE2  D5          	push	de
2800  0CE3  CD 00 00    	call	_spr_calc_index
2801  0CE6  F1          	pop	af
2802  0CE7  4D          	ld	c, l
2803  0CE8  44          	ld	b, h
2804  0CE9  21 00 00    	ld	hl,_scr_map
2805  0CEC  09          	add	hl, bc
2806  0CED  7E          	ld	a, (hl)
2807  0CEE  DD 77 FF    	ld	(ix-1),a
2808  0CF1  2A 00 00    	ld	hl,(_sprite)
2809  0CF4  26 00       	ld	h,0x00
2810  0CF6  11 00 00    	ld	de,_col
2811  0CF9  19          	add	hl,de
2812  0CFA  7E          	ld	a,(hl)
2813  0CFB  0F          	rrca
2814  0CFC  38 04       	jr	C,l_player_check_floor_00102
2815  0CFE  0E 01       	ld	c,0x01
2816  0D00  18 06       	jr	l_player_check_floor_00103
2817  0D02              l_player_check_floor_00102:
2818  0D02  03          	inc	bc
2819  0D03  21 00 00    	ld	hl,_scr_map
2820  0D06  09          	add	hl, bc
2821  0D07  4E          	ld	c, (hl)
2822  0D08              l_player_check_floor_00103:
2823  0D08  3A 00 00    	ld	a,(_s_lin0)
2824  0D0B  D6 90       	sub	a,0x90
2825  0D0D  20 04       	jr	NZ,l_player_check_floor_00105
2826  0D0F  DD 36 FF 48 	ld	(ix-1),0x48
2827  0D13              l_player_check_floor_00105:
2828  0D13  DD 7E FF    	ld	a,(ix-1)
2829  0D16  D6 3C       	sub	a,0x3c
2830  0D18  38 07       	jr	C,l_player_check_floor_00110
2831  0D1A  DD 7E FF    	ld	a,(ix-1)
2832  0D1D  D6 60       	sub	a,0x60
2833  0D1F  38 1E       	jr	C,l_player_check_floor_00111
2834  0D21              l_player_check_floor_00110:
2835  0D21  79          	ld	a,c
2836  0D22  FE 3C       	cp	a,0x3c
2837  0D24  38 04       	jr	C,l_player_check_floor_00106
2838  0D26  D6 60       	sub	a,0x60
2839  0D28  38 15       	jr	C,l_player_check_floor_00111
2840  0D2A              l_player_check_floor_00106:
2841  0D2A  2A 00 00    	ld	hl,(_sprite)
2842  0D2D  26 00       	ld	h,0x00
2843  0D2F  01 00 00    	ld	bc,_sprite_speed_alt
2844  0D32  09          	add	hl,bc
2845  0D33  36 02       	ld	(hl),0x02
2846  0D35  21 00 00    	ld	hl,_s_state
2847  0D38  CB CE       	set	1, (hl)
2848  0D3A  2E 00       	ld	l,0x00
2849  0D3C  CD AA 04    	call	_player_check_stairs
2850  0D3F              l_player_check_floor_00111:
2851  0D3F  33          	inc	sp
2852  0D40  DD E1       	pop	ix
2853  0D42  C9          	ret
2854  0D43              	SECTION code_compiler
2855  0D43              ;	---------------------------------
2856  0D43              ; Function player_move_jump
2857  0D43              ; ---------------------------------
2858  0D43              _player_move_jump:
2859  0D43  CD 00 00    	call	___sdcc_enter_ix
2860  0D46  F5          	push	af
2861  0D47  21 00 00    	ld	hl,_game_gravity
2862  0D4A  4E          	ld	c, (hl)
2863  0D4B  21 00 00    	ld	hl,_player_vel_y
2864  0D4E  7E          	ld	a, (hl)
2865  0D4F  81          	add	a, c
2866  0D50  77          	ld	(hl), a
2867  0D51  21 00 00    	ld	hl,_sprite_on_air
2868  0D54  36 01       	ld	(hl),0x01
2869  0D56  3A 00 00    	ld	a,(_player_vel_inc)
2870  0D59  B7          	or	a, a
2871  0D5A  28 24       	jr	Z,l_player_move_jump_00106
2872  0D5C  21 00 00    	ld	hl,_dirs
2873  0D5F  CB 7E       	bit	7, (hl)
2874  0D61  20 1D       	jr	NZ,l_player_move_jump_00106
2875  0D63  3A 00 00    	ld	a,(_player_vel_y1)
2876  0D66  21 00 00    	ld	hl,_player_vel_y
2877  0D69  96          	sub	a, (hl)
2878  0D6A  E2 6F 0D    	jp	PO, l_player_move_jump_00247
2879  0D6D  EE 80       	xor	a,0x80
2880  0D6F              l_player_move_jump_00247:
2881  0D6F  F2 80 0D    	jp	P, l_player_move_jump_00106
2882  0D72  21 00 00    	ld	hl,_player_vel_y
2883  0D75  CB 7E       	bit	7,(hl)
2884  0D77  28 07       	jr	Z,l_player_move_jump_00106
2885  0D79  36 00       	ld	(hl),0x00
2886  0D7B  21 00 00    	ld	hl,_player_vel_inc
2887  0D7E  36 00       	ld	(hl),0x00
2888  0D80              l_player_move_jump_00106:
2889  0D80  3E 78       	ld	a,0x78
2890  0D82  21 00 00    	ld	hl,_player_vel_y
2891  0D85  96          	sub	a, (hl)
2892  0D86  E2 8B 0D    	jp	PO, l_player_move_jump_00248
2893  0D89  EE 80       	xor	a,0x80
2894  0D8B              l_player_move_jump_00248:
2895  0D8B  F2 93 0D    	jp	P, l_player_move_jump_00108
2896  0D8E  21 00 00    	ld	hl,_player_vel_y
2897  0D91  36 78       	ld	(hl),0x78
2898  0D93              l_player_move_jump_00108:
2899  0D93  21 00 00    	ld	hl,_player_vel_y
2900  0D96  7E          	ld	a, (hl)
2901  0D97  EE 80       	xor	a,0x80
2902  0D99  D6 08       	sub	a,0x08
2903  0D9B  30 02       	jr	NC,l_player_move_jump_00110
2904  0D9D  36 88       	ld	(hl),0x88
2905  0D9F              l_player_move_jump_00110:
2906  0D9F  3A 00 00    	ld	a,(_player_vel_y)
2907  0DA2  47          	ld	b,a
2908  0DA3  17          	rla
2909  0DA4  9F          	sbc	a, a
2910  0DA5  5F          	ld	e, a
2911  0DA6  CB 40       	bit	0,b
2912  0DA8  21 00 00    	ld	hl,_s_lin1
2913  0DAB  70          	ld	(hl),b
2914  0DAC  28 04       	jr	Z,l_player_move_jump_00112
2915  0DAE  21 00 00    	ld	hl,_s_lin1
2916  0DB1  35          	dec	(hl)
2917  0DB2              l_player_move_jump_00112:
2918  0DB2  3E 00       	ld	a, +((_lin) & 0xFF)
2919  0DB4  21 00 00    	ld	hl,_sprite
2920  0DB7  86          	add	a, (hl)
2921  0DB8  DD 77 FE    	ld	(ix-2),a
2922  0DBB  3E 00       	ld	a, +((_lin) / 256)
2923  0DBD  CE 00       	adc	a,0x00
2924  0DBF  DD 77 FF    	ld	(ix-1),a
2925  0DC2  E1          	pop	hl
2926  0DC3  7E          	ld	a,(hl)
2927  0DC4  E5          	push	hl
2928  0DC5  21 00 00    	ld	hl,_s_lin1
2929  0DC8  86          	add	a, (hl)
2930  0DC9  77          	ld	(hl), a
2931  0DCA  3E 90       	ld	a,0x90
2932  0DCC  96          	sub	a, (hl)
2933  0DCD  30 0E       	jr	NC,l_player_move_jump_00117
2934  0DCF  3E C8       	ld	a,0xc8
2935  0DD1  96          	sub	a, (hl)
2936  0DD2  30 04       	jr	NC,l_player_move_jump_00114
2937  0DD4  36 00       	ld	(hl),0x00
2938  0DD6  18 05       	jr	l_player_move_jump_00117
2939  0DD8              l_player_move_jump_00114:
2940  0DD8  21 00 00    	ld	hl,_s_lin1
2941  0DDB  36 90       	ld	(hl),0x90
2942  0DDD              l_player_move_jump_00117:
2943  0DDD  3A 00 00    	ld	a,(_s_lin0)
2944  0DE0  07          	rlca
2945  0DE1  07          	rlca
2946  0DE2  07          	rlca
2947  0DE3  07          	rlca
2948  0DE4  E6 0F       	and	a,0x0f
2949  0DE6  4F          	ld	c, a
2950  0DE7  CB 7B       	bit	7, e
2951  0DE9  28 74       	jr	Z,l_player_move_jump_00140
2952  0DEB  21 00 00    	ld	hl,_s_state
2953  0DEE  7E          	ld	a,(hl)
2954  0DEF  F6 01       	or	a,0x01
2955  0DF1  E6 FD       	and	a,0xfd
2956  0DF3  77          	ld	(hl),a
2957  0DF4  21 00 00    	ld	hl,_s_lin1
2958  0DF7  46          	ld	b, (hl)
2959  0DF8  79          	ld	a, c
2960  0DF9  90          	sub	a, b
2961  0DFA  20 04       	jr	NZ,l_player_move_jump_00250
2962  0DFC  3E 01       	ld	a,0x01
2963  0DFE  18 01       	jr	l_player_move_jump_00251
2964  0E00              l_player_move_jump_00250:
2965  0E00  AF          	xor	a,a
2966  0E01              l_player_move_jump_00251:
2967  0E01  EE 01       	xor	a,0x01
2968  0E03  28 51       	jr	Z,l_player_move_jump_00124
2969  0E05  2A 00 00    	ld	hl,(_sprite)
2970  0E08  26 00       	ld	h,0x00
2971  0E0A  01 00 00    	ld	bc,_col
2972  0E0D  09          	add	hl,bc
2973  0E0E  7E          	ld	a,(hl)
2974  0E0F  F5          	push	af
2975  0E10  33          	inc	sp
2976  0E11  3A 00 00    	ld	a,(_s_lin1)
2977  0E14  F5          	push	af
2978  0E15  33          	inc	sp
2979  0E16  CD 00 00    	call	_game_check_map
2980  0E19  F1          	pop	af
2981  0E1A  7C          	ld	a,h
2982  0E1B  B5          	or	a,l
2983  0E1C  28 28       	jr	Z,l_player_move_jump_00121
2984  0E1E  CD 7F 09    	call	_player_hit_platform
2985  0E21  7D          	ld	a, l
2986  0E22  B7          	or	a, a
2987  0E23  28 19       	jr	Z,l_player_move_jump_00119
2988  0E25  2A 00 00    	ld	hl,(_sprite)
2989  0E28  26 00       	ld	h,0x00
2990  0E2A  01 00 00    	ld	bc,_lin
2991  0E2D  09          	add	hl,bc
2992  0E2E  7E          	ld	a,(hl)
2993  0E2F  4D          	ld	c,l
2994  0E30  44          	ld	b,h
2995  0E31  07          	rlca
2996  0E32  07          	rlca
2997  0E33  07          	rlca
2998  0E34  07          	rlca
2999  0E35  E6 0F       	and	a,0x0f
3000  0E37  07          	rlca
3001  0E38  07          	rlca
3002  0E39  07          	rlca
3003  0E3A  07          	rlca
3004  0E3B  E6 F0       	and	a,0xf0
3005  0E3D  02          	ld	(bc), a
3006  0E3E              l_player_move_jump_00119:
3007  0E3E  21 00 00    	ld	hl,_player_vel_y
3008  0E41  36 00       	ld	(hl),0x00
3009  0E43  C3 23 0F    	jp	l_player_move_jump_00141
3010  0E46              l_player_move_jump_00121:
3011  0E46  2A 00 00    	ld	hl,(_sprite)
3012  0E49  26 00       	ld	h,0x00
3013  0E4B  01 00 00    	ld	bc,_lin
3014  0E4E  09          	add	hl,bc
3015  0E4F  3A 00 00    	ld	a,(_s_lin1)
3016  0E52  77          	ld	(hl),a
3017  0E53  C3 23 0F    	jp	l_player_move_jump_00141
3018  0E56              l_player_move_jump_00124:
3019  0E56  E1          	pop	hl
3020  0E57  3A 00 00    	ld	a,(_s_lin1)
3021  0E5A  E5          	push	hl
3022  0E5B  77          	ld	(hl),a
3023  0E5C  C3 23 0F    	jp	l_player_move_jump_00141
3024  0E5F              l_player_move_jump_00140:
3025  0E5F  21 00 00    	ld	hl,_s_state
3026  0E62  7E          	ld	a,(hl)
3027  0E63  F6 02       	or	a,0x02
3028  0E65  E6 FE       	and	a,0xfe
3029  0E67  77          	ld	(hl),a
3030  0E68  21 00 00    	ld	hl,_s_lin1
3031  0E6B  7E          	ld	a, (hl)
3032  0E6C  C6 10       	add	a,0x10
3033  0E6E  77          	ld	(hl),a
3034  0E6F  47          	ld	b,a
3035  0E70  79          	ld	a, c
3036  0E71  90          	sub	a, b
3037  0E72  20 04       	jr	NZ,l_player_move_jump_00252
3038  0E74  3E 01       	ld	a,0x01
3039  0E76  18 01       	jr	l_player_move_jump_00253
3040  0E78              l_player_move_jump_00252:
3041  0E78  AF          	xor	a,a
3042  0E79              l_player_move_jump_00253:
3043  0E79  EE 01       	xor	a,0x01
3044  0E7B  CA 16 0F    	jp	Z, l_player_move_jump_00137
3045  0E7E  2A 00 00    	ld	hl,(_sprite)
3046  0E81  26 00       	ld	h,0x00
3047  0E83  01 00 00    	ld	bc,_col
3048  0E86  09          	add	hl,bc
3049  0E87  7E          	ld	a,(hl)
3050  0E88  F5          	push	af
3051  0E89  33          	inc	sp
3052  0E8A  3A 00 00    	ld	a,(_s_lin1)
3053  0E8D  F5          	push	af
3054  0E8E  33          	inc	sp
3055  0E8F  CD 00 00    	call	_game_check_map
3056  0E92  F1          	pop	af
3057  0E93  45          	ld	b, l
3058  0E94  5C          	ld	e, h
3059  0E95  21 00 00    	ld	hl,_s_lin1
3060  0E98  7E          	ld	a, (hl)
3061  0E99  C6 F0       	add	a,0xf0
3062  0E9B  4F          	ld	c, a
3063  0E9C  7B          	ld	a, e
3064  0E9D  B0          	or	a,b
3065  0E9E  28 63       	jr	Z,l_player_move_jump_00134
3066  0EA0  71          	ld	(hl), c
3067  0EA1  2E 00       	ld	l,0x00
3068  0EA3  CD AA 04    	call	_player_check_stairs
3069  0EA6  3A 00 00    	ld	a,(_player_over_stair)
3070  0EA9  B7          	or	a, a
3071  0EAA  20 05       	jr	NZ,l_player_move_jump_00127
3072  0EAC  2E 01       	ld	l,0x01
3073  0EAE  CD AA 04    	call	_player_check_stairs
3074  0EB1              l_player_move_jump_00127:
3075  0EB1  3A 00 00    	ld	a,(_player_over_stair)
3076  0EB4  B7          	or	a, a
3077  0EB5  20 31       	jr	NZ,l_player_move_jump_00132
3078  0EB7  21 00 00    	ld	hl,_s_lin1
3079  0EBA  7E          	ld	a, (hl)
3080  0EBB  07          	rlca
3081  0EBC  07          	rlca
3082  0EBD  07          	rlca
3083  0EBE  07          	rlca
3084  0EBF  E6 0F       	and	a,0x0f
3085  0EC1  07          	rlca
3086  0EC2  07          	rlca
3087  0EC3  07          	rlca
3088  0EC4  07          	rlca
3089  0EC5  E6 F0       	and	a,0xf0
3090  0EC7  77          	ld	(hl), a
3091  0EC8  2A 00 00    	ld	hl,(_sprite)
3092  0ECB  26 00       	ld	h,0x00
3093  0ECD  01 00 00    	ld	bc,_lin
3094  0ED0  09          	add	hl,bc
3095  0ED1  5E          	ld	e,(hl)
3096  0ED2  4D          	ld	c,l
3097  0ED3  44          	ld	b,h
3098  0ED4  21 00 00    	ld	hl,_s_lin1
3099  0ED7  7E          	ld	a, (hl)
3100  0ED8  93          	sub	a, e
3101  0ED9  30 09       	jr	NC,l_player_move_jump_00129
3102  0EDB  7E          	ld	a, (hl)
3103  0EDC  C6 10       	add	a,0x10
3104  0EDE  02          	ld	(bc), a
3105  0EDF  2E 00       	ld	l,0x00
3106  0EE1  C3 61 0F    	jp	l_player_move_jump_00151
3107  0EE4              l_player_move_jump_00129:
3108  0EE4  3A 00 00    	ld	a,(_s_lin1)
3109  0EE7  02          	ld	(bc), a
3110  0EE8              l_player_move_jump_00132:
3111  0EE8  21 00 00    	ld	hl,_player_vel_y
3112  0EEB  36 00       	ld	(hl),0x00
3113  0EED  21 00 00    	ld	hl,_s_state
3114  0EF0  7E          	ld	a,(hl)
3115  0EF1  E6 FC       	and	a,+(0xfd&0xfe)
3116  0EF3  77          	ld	(hl),a
3117  0EF4  2A 00 00    	ld	hl,(_sprite)
3118  0EF7  26 00       	ld	h,0x00
3119  0EF9  01 00 00    	ld	bc,_colint
3120  0EFC  09          	add	hl,bc
3121  0EFD  AF          	xor	a,a
3122  0EFE  77          	ld	(hl),a
3123  0EFF  2E 01       	ld	l,0x01
3124  0F01  18 5E       	jr	l_player_move_jump_00151
3125  0F03              l_player_move_jump_00134:
3126  0F03  21 00 00    	ld	hl,_s_lin1
3127  0F06  71          	ld	(hl), c
3128  0F07  2A 00 00    	ld	hl,(_sprite)
3129  0F0A  26 00       	ld	h,0x00
3130  0F0C  01 00 00    	ld	bc,_lin
3131  0F0F  09          	add	hl,bc
3132  0F10  3A 00 00    	ld	a,(_s_lin1)
3133  0F13  77          	ld	(hl),a
3134  0F14  18 0D       	jr	l_player_move_jump_00141
3135  0F16              l_player_move_jump_00137:
3136  0F16  21 00 00    	ld	hl,_s_lin1
3137  0F19  7E          	ld	a, (hl)
3138  0F1A  C6 F0       	add	a,0xf0
3139  0F1C  77          	ld	(hl), a
3140  0F1D  E1          	pop	hl
3141  0F1E  3A 00 00    	ld	a,(_s_lin1)
3142  0F21  E5          	push	hl
3143  0F22  77          	ld	(hl),a
3144  0F23              l_player_move_jump_00141:
3145  0F23  21 00 00    	ld	hl,_s_state
3146  0F26  CB 5E       	bit	3, (hl)
3147  0F28  20 27       	jr	NZ,l_player_move_jump_00147
3148  0F2A  21 00 00    	ld	hl,_s_state
3149  0F2D  CB 56       	bit	2, (hl)
3150  0F2F  20 20       	jr	NZ,l_player_move_jump_00147
3151  0F31  21 00 00    	ld	hl,_dirs
3152  0F34  CB 56       	bit	2, (hl)
3153  0F36  28 09       	jr	Z,l_player_move_jump_00143
3154  0F38  21 00 00    	ld	hl,_s_state
3155  0F3B  7E          	ld	a,(hl)
3156  0F3C  F6 08       	or	a,0x08
3157  0F3E  E6 FB       	and	a,0xfb
3158  0F40  77          	ld	(hl),a
3159  0F41              l_player_move_jump_00143:
3160  0F41  21 00 00    	ld	hl,_dirs
3161  0F44  CB 5E       	bit	3, (hl)
3162  0F46  28 09       	jr	Z,l_player_move_jump_00147
3163  0F48  21 00 00    	ld	hl,_s_state
3164  0F4B  7E          	ld	a,(hl)
3165  0F4C  F6 04       	or	a,0x04
3166  0F4E  E6 F7       	and	a,0xf7
3167  0F50  77          	ld	(hl),a
3168  0F51              l_player_move_jump_00147:
3169  0F51  CD 00 00    	call	_spr_move_horizontal
3170  0F54  7D          	ld	a, l
3171  0F55  B7          	or	a, a
3172  0F56  28 07       	jr	Z,l_player_move_jump_00150
3173  0F58  21 00 00    	ld	hl,_s_state
3174  0F5B  7E          	ld	a,(hl)
3175  0F5C  E6 F3       	and	a,+(0xf7&0xfb)
3176  0F5E  77          	ld	(hl),a
3177  0F5F              l_player_move_jump_00150:
3178  0F5F  2E 00       	ld	l,0x00
3179  0F61              l_player_move_jump_00151:
3180  0F61  F1          	pop	af
3181  0F62  DD E1       	pop	ix
3182  0F64  C9          	ret
3183  0F65              	SECTION code_compiler
3184  0F65              ;	---------------------------------
3185  0F65              ; Function player_open_door
3186  0F65              ; ---------------------------------
3187  0F65              _player_open_door:
3188  0F65  CD 00 00    	call	___sdcc_enter_ix
3189  0F68  0E 00       	ld	c,0x00
3190  0F6A  DD 7E 06    	ld	a,(ix+6)
3191  0F6D  D6 48       	sub	a,0x48
3192  0F6F  28 17       	jr	Z,l_player_open_door_00101
3193  0F71  DD 7E 06    	ld	a,(ix+6)
3194  0F74  D6 49       	sub	a,0x49
3195  0F76  28 1F       	jr	Z,l_player_open_door_00104
3196  0F78  DD 7E 06    	ld	a,(ix+6)
3197  0F7B  D6 4A       	sub	a,0x4a
3198  0F7D  28 27       	jr	Z,l_player_open_door_00107
3199  0F7F  DD 7E 06    	ld	a,(ix+6)
3200  0F82  D6 4B       	sub	a,0x4b
3201  0F84  28 2F       	jr	Z,l_player_open_door_00110
3202  0F86  18 3A       	jr	l_player_open_door_00113
3203  0F88              l_player_open_door_00101:
3204  0F88  3A 00 00    	ld	a,(_player_keys)
3205  0F8B  B7          	or	a, a
3206  0F8C  28 34       	jr	Z,l_player_open_door_00113
3207  0F8E  2E 07       	ld	l,0x07
3208  0F90  CD 00 00    	call	_zx_border_fastcall
3209  0F93  0E 01       	ld	c,0x01
3210  0F95  18 2B       	jr	l_player_open_door_00113
3211  0F97              l_player_open_door_00104:
3212  0F97  3A 01 00    	ld	a,(_player_keys + 0x0001)
3213  0F9A  B7          	or	a, a
3214  0F9B  28 25       	jr	Z,l_player_open_door_00113
3215  0F9D  2E 02       	ld	l,0x02
3216  0F9F  CD 00 00    	call	_zx_border_fastcall
3217  0FA2  0E 01       	ld	c,0x01
3218  0FA4  18 1C       	jr	l_player_open_door_00113
3219  0FA6              l_player_open_door_00107:
3220  0FA6  3A 02 00    	ld	a,(_player_keys + 0x0002)
3221  0FA9  B7          	or	a, a
3222  0FAA  28 16       	jr	Z,l_player_open_door_00113
3223  0FAC  2E 04       	ld	l,0x04
3224  0FAE  CD 00 00    	call	_zx_border_fastcall
3225  0FB1  0E 01       	ld	c,0x01
3226  0FB3  18 0D       	jr	l_player_open_door_00113
3227  0FB5              l_player_open_door_00110:
3228  0FB5  3A 03 00    	ld	a,(_player_keys + 0x0003)
3229  0FB8  B7          	or	a, a
3230  0FB9  28 07       	jr	Z,l_player_open_door_00113
3231  0FBB  2E 05       	ld	l,0x05
3232  0FBD  CD 00 00    	call	_zx_border_fastcall
3233  0FC0  0E 01       	ld	c,0x01
3234  0FC2              l_player_open_door_00113:
3235  0FC2  79          	ld	a, c
3236  0FC3  B7          	or	a, a
3237  0FC4  20 06       	jr	NZ,l_player_open_door_00114
3238  0FC6  3A 00 00    	ld	a,(_game_inmune)
3239  0FC9  B7          	or	a, a
3240  0FCA  28 24       	jr	Z,l_player_open_door_00117
3241  0FCC              l_player_open_door_00114:
3242  0FCC  3E 00       	ld	a, +((_scr_map) & 0xFF)
3243  0FCE  DD 86 04    	add	a,(ix+4)
3244  0FD1  4F          	ld	c, a
3245  0FD2  3E 00       	ld	a, +((_scr_map) / 256)
3246  0FD4  DD 8E 05    	adc	a,(ix+5)
3247  0FD7  47          	ld	b, a
3248  0FD8  AF          	xor	a, a
3249  0FD9  02          	ld	(bc), a
3250  0FDA  DD 6E 04    	ld	l,(ix+4)
3251  0FDD  DD 66 05    	ld	h,(ix+5)
3252  0FE0  E5          	push	hl
3253  0FE1  CD 00 00    	call	_game_obj_set
3254  0FE4  F1          	pop	af
3255  0FE5  DD 6E 04    	ld	l,(ix+4)
3256  0FE8  DD 66 05    	ld	h,(ix+5)
3257  0FEB  E5          	push	hl
3258  0FEC  CD 00 00    	call	_spr_draw_index
3259  0FEF  F1          	pop	af
3260  0FF0              l_player_open_door_00117:
3261  0FF0  DD E1       	pop	ix
3262  0FF2  C9          	ret
3263  0FF3              	SECTION code_compiler
3264  0FF3              ;	---------------------------------
3265  0FF3              ; Function player_lost_life
3266  0FF3              ; ---------------------------------
3267  0FF3              _player_lost_life:
3268  0FF3  CD 00 00    	call	___sdcc_enter_ix
3269  0FF6  F5          	push	af
3270  0FF7  3B          	dec	sp
3271  0FF8  3A 07 00    	ld	a,(_lin + 7)
3272  0FFB  32 00 00    	ld	(_s_lin0),a
3273  0FFE  3A 07 00    	ld	a,(_col + 7)
3274  1001  32 00 00    	ld	(_s_col0),a
3275  1004  CD 00 00    	call	_spr_init_anim_bullets
3276  1007  01 00 00    	ld	bc,_anim_lin+0
3277  100A  16 00       	ld	d,0x00
3278  100C              l_player_lost_life_00115:
3279  100C  C5          	push	bc
3280  100D  D5          	push	de
3281  100E  21 00 00    	ld	hl,0x0000
3282  1011  E5          	push	hl
3283  1012  AF          	xor	a, a
3284  1013  5A          	ld	e,d
3285  1014  57          	ld	d,a
3286  1015  D5          	push	de
3287  1016  CD 00 00    	call	_NIRVANAP_spriteT_callee
3288  1019  D1          	pop	de
3289  101A  C1          	pop	bc
3290  101B  6A          	ld	l,d
3291  101C  26 00       	ld	h,0x00
3292  101E  09          	add	hl, bc
3293  101F  36 FF       	ld	(hl),0xff
3294  1021  14          	inc	d
3295  1022  7A          	ld	a, d
3296  1023  D6 08       	sub	a,0x08
3297  1025  38 E5       	jr	C,l_player_lost_life_00115
3298  1027  21 00 00    	ld	hl,_anim_count
3299  102A  36 00       	ld	(hl),0x00
3300  102C  76          	halt
3301  102D  3A 00 00    	ld	a,(_s_lin0)
3302  1030  C6 F0       	add	a,0xf0
3303  1032  47          	ld	b, a
3304  1033  3A 00 00    	ld	a,(_s_col0)
3305  1036  21 00 00    	ld	hl,0x0000
3306  1039  E5          	push	hl
3307  103A  21 87 03    	ld	hl,0x0387
3308  103D  E5          	push	hl
3309  103E  48          	ld	c,b
3310  103F  47          	ld	b,a
3311  1040  C5          	push	bc
3312  1041  CD 00 00    	call	_spr_add_anim
3313  1044  F1          	pop	af
3314  1045  F1          	pop	af
3315  1046  F1          	pop	af
3316  1047  21 00 00    	ld	hl,_s_col0
3317  104A  46          	ld	b, (hl)
3318  104B  05          	dec	b
3319  104C  05          	dec	b
3320  104D  21 00 00    	ld	hl,0x0000
3321  1050  E5          	push	hl
3322  1051  21 87 03    	ld	hl,0x0387
3323  1054  E5          	push	hl
3324  1055  C5          	push	bc
3325  1056  33          	inc	sp
3326  1057  3A 00 00    	ld	a,(_s_lin0)
3327  105A  F5          	push	af
3328  105B  33          	inc	sp
3329  105C  CD 00 00    	call	_spr_add_anim
3330  105F  F1          	pop	af
3331  1060  F1          	pop	af
3332  1061  21 00 00    	ld	hl,0x0000
3333  1064  E3          	ex	(sp),hl
3334  1065  3A 00 00    	ld	a,(_s_col0)
3335  1068  21 87 03    	ld	hl,0x0387
3336  106B  E5          	push	hl
3337  106C  F5          	push	af
3338  106D  33          	inc	sp
3339  106E  3A 00 00    	ld	a,(_s_lin0)
3340  1071  F5          	push	af
3341  1072  33          	inc	sp
3342  1073  CD 00 00    	call	_spr_add_anim
3343  1076  F1          	pop	af
3344  1077  F1          	pop	af
3345  1078  F1          	pop	af
3346  1079  21 00 00    	ld	hl,_s_col0
3347  107C  46          	ld	b, (hl)
3348  107D  04          	inc	b
3349  107E  04          	inc	b
3350  107F  21 00 00    	ld	hl,0x0000
3351  1082  E5          	push	hl
3352  1083  21 87 03    	ld	hl,0x0387
3353  1086  E5          	push	hl
3354  1087  C5          	push	bc
3355  1088  33          	inc	sp
3356  1089  3A 00 00    	ld	a,(_s_lin0)
3357  108C  F5          	push	af
3358  108D  33          	inc	sp
3359  108E  CD 00 00    	call	_spr_add_anim
3360  1091  F1          	pop	af
3361  1092  F1          	pop	af
3362  1093  F1          	pop	af
3363  1094  3A 00 00    	ld	a,(_s_lin0)
3364  1097  C6 10       	add	a,0x10
3365  1099  47          	ld	b, a
3366  109A  3A 00 00    	ld	a,(_s_col0)
3367  109D  21 00 00    	ld	hl,0x0000
3368  10A0  E5          	push	hl
3369  10A1  21 87 03    	ld	hl,0x0387
3370  10A4  E5          	push	hl
3371  10A5  48          	ld	c,b
3372  10A6  47          	ld	b,a
3373  10A7  C5          	push	bc
3374  10A8  CD 00 00    	call	_spr_add_anim
3375  10AB  F1          	pop	af
3376  10AC  F1          	pop	af
3377  10AD  F1          	pop	af
3378  10AE  2E 00       	ld	l,0x00
3379  10B0  CD 00 00    	call	_zx_border_fastcall
3380  10B3  DD 36 FD 01 	ld	(ix-3),0x01
3381  10B7  2A 00 00    	ld	hl,(_curr_time)
3382  10BA  22 00 00    	ld	(_anim_time),hl
3383  10BD              l_player_lost_life_00107:
3384  10BD  DD 7E FD    	ld	a,(ix-3)
3385  10C0  B7          	or	a, a
3386  10C1  28 28       	jr	Z,l_player_lost_life_00109
3387  10C3  21 0C 00    	ld	hl,0x000c
3388  10C6  E5          	push	hl
3389  10C7  2A 00 00    	ld	hl,(_anim_time)
3390  10CA  E5          	push	hl
3391  10CB  CD 00 00    	call	_game_check_time
3392  10CE  F1          	pop	af
3393  10CF  F1          	pop	af
3394  10D0  7D          	ld	a, l
3395  10D1  B7          	or	a, a
3396  10D2  28 E9       	jr	Z,l_player_lost_life_00107
3397  10D4  2A 00 00    	ld	hl,(_curr_time)
3398  10D7  22 00 00    	ld	(_anim_time),hl
3399  10DA  3A 00 00    	ld	a,(_anim_count)
3400  10DD  B7          	or	a,a
3401  10DE  28 05       	jr	Z,l_player_lost_life_00103
3402  10E0  CD 00 00    	call	_spr_play_anim
3403  10E3  18 D8       	jr	l_player_lost_life_00107
3404  10E5              l_player_lost_life_00103:
3405  10E5  DD 36 FD 00 	ld	(ix-3),0x00
3406  10E9  18 D2       	jr	l_player_lost_life_00107
3407  10EB              l_player_lost_life_00109:
3408  10EB  21 00 00    	ld	hl,_sprite
3409  10EE  36 00       	ld	(hl),0x00
3410  10F0              l_player_lost_life_00117:
3411  10F0  2A 00 00    	ld	hl,(_sprite)
3412  10F3  26 00       	ld	h,0x00
3413  10F5  01 00 00    	ld	bc,_class
3414  10F8  09          	add	hl,bc
3415  10F9  7E          	ld	a,(hl)
3416  10FA  B7          	or	a,a
3417  10FB  28 43       	jr	Z,l_player_lost_life_00111
3418  10FD  2A 00 00    	ld	hl,(_sprite)
3419  1100  26 00       	ld	h,0x00
3420  1102  01 00 00    	ld	bc,_col
3421  1105  09          	add	hl,bc
3422  1106  4E          	ld	c, (hl)
3423  1107  2A 00 00    	ld	hl,(_sprite)
3424  110A  26 00       	ld	h,0x00
3425  110C  11 00 00    	ld	de,_lin
3426  110F  19          	add	hl,de
3427  1110  46          	ld	b, (hl)
3428  1111  2A 00 00    	ld	hl,(_sprite)
3429  1114  26 00       	ld	h,0x00
3430  1116  11 00 00    	ld	de,_tile
3431  1119  19          	add	hl,de
3432  111A  5E          	ld	e, (hl)
3433  111B  3E 00       	ld	a,+((_colint) & 0xFF)
3434  111D  21 00 00    	ld	hl,_sprite
3435  1120  86          	add	a, (hl)
3436  1121  DD 77 FE    	ld	(ix-2),a
3437  1124  6F          	ld	l,a
3438  1125  3E 00       	ld	a,+((_colint) / 256)
3439  1127  CE 00       	adc	a,0x00
3440  1129  DD 77 FF    	ld	(ix-1),a
3441  112C  67          	ld	h,a
3442  112D  6E          	ld	l, (hl)
3443  112E  7B          	ld	a, e
3444  112F  85          	add	a, l
3445  1130  5F          	ld	e, a
3446  1131  79          	ld	a, c
3447  1132  48          	ld	c,b
3448  1133  47          	ld	b,a
3449  1134  C5          	push	bc
3450  1135  7B          	ld	a, e
3451  1136  F5          	push	af
3452  1137  33          	inc	sp
3453  1138  3A 00 00    	ld	a,(_sprite)
3454  113B  F5          	push	af
3455  113C  33          	inc	sp
3456  113D  CD 00 00    	call	_NIRVANAP_spriteT_callee
3457  1140              l_player_lost_life_00111:
3458  1140  2A 00 00    	ld	hl,(_sprite)
3459  1143  26 00       	ld	h,0x00
3460  1145  01 00 00    	ld	bc,_class
3461  1148  09          	add	hl,bc
3462  1149  AF          	xor	a,a
3463  114A  77          	ld	(hl),a
3464  114B  2A 00 00    	ld	hl,(_sprite)
3465  114E  26 00       	ld	h,0x00
3466  1150  01 00 00    	ld	bc,_bullet_col
3467  1153  09          	add	hl,bc
3468  1154  36 FF       	ld	(hl),0xff
3469  1156  21 00 00    	ld	hl,_sprite
3470  1159  7E          	ld	a,(hl)
3471  115A  3C          	inc	a
3472  115B  77          	ld	(hl),a
3473  115C  D6 07       	sub	a,0x07
3474  115E  38 90       	jr	C,l_player_lost_life_00117
3475  1160  3A 00 00    	ld	a,(_player_lives)
3476  1163  B7          	or	a, a
3477  1164  28 09       	jr	Z,l_player_lost_life_00119
3478  1166  21 F4 01    	ld	hl,0x01f4
3479  1169  CD 00 00    	call	_z80_delay_ms_fastcall
3480  116C  CD 00 00    	call	_game_round_init
3481  116F              l_player_lost_life_00119:
3482  116F  DD F9       	ld	sp, ix
3483  1171  DD E1       	pop	ix
3484  1173  C9          	ret
3485  1174              	SECTION code_compiler
3486  1174              ;	---------------------------------
3487  1174              ; Function player_hit
3488  1174              ; ---------------------------------
3489  1174              _player_hit:
3490  1174  7D          	ld	a,l
3491  1175  4D          	ld	c,l
3492  1176  21 00 00    	ld	hl,_player_vita
3493  1179  96          	sub	a, (hl)
3494  117A  30 17       	jr	NC,l_player_hit_00107
3495  117C  3A 00 00    	ld	a,(_game_inmune)
3496  117F  B7          	or	a, a
3497  1180  20 06       	jr	NZ,l_player_hit_00102
3498  1182  21 00 00    	ld	hl,_player_vita
3499  1185  7E          	ld	a, (hl)
3500  1186  91          	sub	a, c
3501  1187  77          	ld	(hl), a
3502  1188              l_player_hit_00102:
3503  1188  2A 00 00    	ld	hl,(_curr_time)
3504  118B  22 00 00    	ld	(_player_hit_time),hl
3505  118E  CD 00 00    	call	_game_update_stats
3506  1191  18 2C       	jr	l_player_hit_00109
3507  1193              l_player_hit_00107:
3508  1193  21 00 00    	ld	hl,_player_vita
3509  1196  36 00       	ld	(hl),0x00
3510  1198  CD 00 00    	call	_game_update_stats
3511  119B  CD F3 0F    	call	_player_lost_life
3512  119E  21 00 00    	ld	hl,_player_lives
3513  11A1  7E          	ld	a, (hl)
3514  11A2  B7          	or	a, a
3515  11A3  28 10       	jr	Z,l_player_hit_00104
3516  11A5  35          	dec	(hl)
3517  11A6  21 00 00    	ld	hl,_player_mana
3518  11A9  36 64       	ld	(hl),0x64
3519  11AB  21 00 00    	ld	hl,_player_vita
3520  11AE  36 64       	ld	(hl),0x64
3521  11B0  CD 00 00    	call	_game_update_stats
3522  11B3  18 0A       	jr	l_player_hit_00109
3523  11B5              l_player_hit_00104:
3524  11B5  21 00 00    	ld	hl,_player_lives
3525  11B8  36 00       	ld	(hl),0x00
3526  11BA  21 00 00    	ld	hl,_game_over
3527  11BD  36 01       	ld	(hl),0x01
3528  11BF              l_player_hit_00109:
3529  11BF  C9          	ret
3530  11C0              	SECTION IGNORE
3531  0000              
