1     0000              MODULE game_player_c
2     0000              
3     0000              ;--------------------------------------------------------
4     0000              ; File Created by SDCC : free open source ANSI-C Compiler
5     0000              ; Version 3.6.5 #9958 (Mac OS X i386)
6     0000              ;--------------------------------------------------------
7     0000              ; Processed by Z88DK
8     0000              ;--------------------------------------------------------
9     0000              
10    0000              	EXTERN __divschar
11    0000              	EXTERN __divschar_callee
12    0000              	EXTERN __divsint
13    0000              	EXTERN __divsint_callee
14    0000              	EXTERN __divslong
15    0000              	EXTERN __divslong_callee
16    0000              	EXTERN __divslonglong
17    0000              	EXTERN __divslonglong_callee
18    0000              	EXTERN __divsuchar
19    0000              	EXTERN __divsuchar_callee
20    0000              	EXTERN __divuchar
21    0000              	EXTERN __divuchar_callee
22    0000              	EXTERN __divuint
23    0000              	EXTERN __divuint_callee
24    0000              	EXTERN __divulong
25    0000              	EXTERN __divulong_callee
26    0000              	EXTERN __divulonglong
27    0000              	EXTERN __divulonglong_callee
28    0000              	EXTERN __divuschar
29    0000              	EXTERN __divuschar_callee
30    0000              	EXTERN __modschar
31    0000              	EXTERN __modschar_callee
32    0000              	EXTERN __modsint
33    0000              	EXTERN __modsint_callee
34    0000              	EXTERN __modslong
35    0000              	EXTERN __modslong_callee
36    0000              	EXTERN __modslonglong
37    0000              	EXTERN __modslonglong_callee
38    0000              	EXTERN __modsuchar
39    0000              	EXTERN __modsuchar_callee
40    0000              	EXTERN __moduchar
41    0000              	EXTERN __moduchar_callee
42    0000              	EXTERN __moduint
43    0000              	EXTERN __moduint_callee
44    0000              	EXTERN __modulong
45    0000              	EXTERN __modulong_callee
46    0000              	EXTERN __modulonglong
47    0000              	EXTERN __modulonglong_callee
48    0000              	EXTERN __moduschar
49    0000              	EXTERN __moduschar_callee
50    0000              	EXTERN __mulint
51    0000              	EXTERN __mulint_callee
52    0000              	EXTERN __mullong
53    0000              	EXTERN __mullong_callee
54    0000              	EXTERN __mullonglong
55    0000              	EXTERN __mullonglong_callee
56    0000              	EXTERN __mulschar
57    0000              	EXTERN __mulschar_callee
58    0000              	EXTERN __mulsuchar
59    0000              	EXTERN __mulsuchar_callee
60    0000              	EXTERN __muluschar
61    0000              	EXTERN __muluschar_callee
62    0000              	EXTERN __rlslonglong
63    0000              	EXTERN __rlslonglong_callee
64    0000              	EXTERN __rlulonglong
65    0000              	EXTERN __rlulonglong_callee
66    0000              	EXTERN __rrslonglong
67    0000              	EXTERN __rrslonglong_callee
68    0000              	EXTERN __rrulonglong
69    0000              	EXTERN __rrulonglong_callee
70    0000              	EXTERN ___sdcc_call_hl
71    0000              	EXTERN ___sdcc_call_iy
72    0000              	EXTERN ___sdcc_enter_ix
73    0000              	EXTERN _banked_call
74    0000              	EXTERN _banked_ret
75    0000              	EXTERN ___fs2schar
76    0000              	EXTERN ___fs2schar_callee
77    0000              	EXTERN ___fs2sint
78    0000              	EXTERN ___fs2sint_callee
79    0000              	EXTERN ___fs2slong
80    0000              	EXTERN ___fs2slong_callee
81    0000              	EXTERN ___fs2slonglong
82    0000              	EXTERN ___fs2slonglong_callee
83    0000              	EXTERN ___fs2uchar
84    0000              	EXTERN ___fs2uchar_callee
85    0000              	EXTERN ___fs2uint
86    0000              	EXTERN ___fs2uint_callee
87    0000              	EXTERN ___fs2ulong
88    0000              	EXTERN ___fs2ulong_callee
89    0000              	EXTERN ___fs2ulonglong
90    0000              	EXTERN ___fs2ulonglong_callee
91    0000              	EXTERN ___fsadd
92    0000              	EXTERN ___fsadd_callee
93    0000              	EXTERN ___fsdiv
94    0000              	EXTERN ___fsdiv_callee
95    0000              	EXTERN ___fseq
96    0000              	EXTERN ___fseq_callee
97    0000              	EXTERN ___fsgt
98    0000              	EXTERN ___fsgt_callee
99    0000              	EXTERN ___fslt
100   0000              	EXTERN ___fslt_callee
101   0000              	EXTERN ___fsmul
102   0000              	EXTERN ___fsmul_callee
103   0000              	EXTERN ___fsneq
104   0000              	EXTERN ___fsneq_callee
105   0000              	EXTERN ___fssub
106   0000              	EXTERN ___fssub_callee
107   0000              	EXTERN ___schar2fs
108   0000              	EXTERN ___schar2fs_callee
109   0000              	EXTERN ___sint2fs
110   0000              	EXTERN ___sint2fs_callee
111   0000              	EXTERN ___slong2fs
112   0000              	EXTERN ___slong2fs_callee
113   0000              	EXTERN ___slonglong2fs
114   0000              	EXTERN ___slonglong2fs_callee
115   0000              	EXTERN ___uchar2fs
116   0000              	EXTERN ___uchar2fs_callee
117   0000              	EXTERN ___uint2fs
118   0000              	EXTERN ___uint2fs_callee
119   0000              	EXTERN ___ulong2fs
120   0000              	EXTERN ___ulong2fs_callee
121   0000              	EXTERN ___ulonglong2fs
122   0000              	EXTERN ___ulonglong2fs_callee
123   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
126   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
127   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
128   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
129   0000              	EXTERN ____sdcc_4_ldi_save_bc
130   0000              	EXTERN ____sdcc_4_push_hlix
131   0000              	EXTERN ____sdcc_4_push_mhl
132   0000              	EXTERN ____sdcc_lib_setmem_hl
133   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
134   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
135   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
136   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
137   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
138   0000              	EXTERN ____sdcc_ll_add_deix_hlix
139   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
140   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
141   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
142   0000              	EXTERN ____sdcc_ll_asr_hlix_a
143   0000              	EXTERN ____sdcc_ll_asr_mbc_a
144   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
145   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
146   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
147   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
148   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
149   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
150   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
151   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
152   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
153   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
155   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
156   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
157   0000              	EXTERN ____sdcc_ll_push_hlix
158   0000              	EXTERN ____sdcc_ll_push_mhl
159   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
160   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
161   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
162   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
163   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
164   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
165   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
166   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
167   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
168   0000              	EXTERN ____sdcc_load_debc_deix
169   0000              	EXTERN ____sdcc_load_dehl_deix
170   0000              	EXTERN ____sdcc_load_debc_mhl
171   0000              	EXTERN ____sdcc_load_hlde_mhl
172   0000              	EXTERN ____sdcc_store_dehl_bcix
173   0000              	EXTERN ____sdcc_store_debc_hlix
174   0000              	EXTERN ____sdcc_store_debc_mhl
175   0000              	EXTERN ____sdcc_cpu_pop_ei
176   0000              	EXTERN ____sdcc_cpu_pop_ei_jp
177   0000              	EXTERN ____sdcc_cpu_push_di
178   0000              	EXTERN ____sdcc_outi
179   0000              	EXTERN ____sdcc_outi_128
180   0000              	EXTERN ____sdcc_outi_256
181   0000              	EXTERN ____sdcc_ldi
182   0000              	EXTERN ____sdcc_ldi_128
183   0000              	EXTERN ____sdcc_ldi_256
184   0000              
185   0000              ;--------------------------------------------------------
186   0000              ; Public variables in this module
187   0000              ;--------------------------------------------------------
188   0000              	GLOBAL _player_check_map
189   0000              	GLOBAL _player_1up
190   0000              	GLOBAL _player_init
191   0000              	GLOBAL _player_turn
192   0000              	GLOBAL _player_move
193   0000              	GLOBAL _player_check_input
194   0000              	GLOBAL _player_move_input
195   0000              	GLOBAL _player_fix_walk_lin
196   0000              	GLOBAL _player_fire
197   0000              	GLOBAL _player_collision
198   0000              	GLOBAL _player_pick_mushroom
199   0000              	GLOBAL _player_check_stairs_vertical
200   0000              	GLOBAL _player_check_stairs
201   0000              	GLOBAL _player_anim_tile
202   0000              	GLOBAL _player_tile
203   0000              	GLOBAL _player_pick_item
204   0000              	GLOBAL _player_hit_platform
205   0000              	GLOBAL _player_hit_platform_clear
206   0000              	GLOBAL _player_score_add
207   0000              	GLOBAL _player_check_floor
208   0000              	GLOBAL _player_gasta_brick
209   0000              	GLOBAL _player_move_jump
210   0000              	GLOBAL _player_open_door
211   0000              	GLOBAL _player_lost_life
212   0000              	GLOBAL _player_hit
213   0000              ;--------------------------------------------------------
214   0000              ; Externals used
215   0000              ;--------------------------------------------------------
216   0000              	GLOBAL _ulltoa_callee
217   0000              	GLOBAL _ulltoa
218   0000              	GLOBAL _strtoull_callee
219   0000              	GLOBAL _strtoull
220   0000              	GLOBAL _strtoll_callee
221   0000              	GLOBAL _strtoll
222   0000              	GLOBAL _lltoa_callee
223   0000              	GLOBAL _lltoa
224   0000              	GLOBAL _llabs_callee
225   0000              	GLOBAL _llabs
226   0000              	GLOBAL __lldivu__callee
227   0000              	GLOBAL __lldivu_
228   0000              	GLOBAL __lldiv__callee
229   0000              	GLOBAL __lldiv_
230   0000              	GLOBAL _atoll_callee
231   0000              	GLOBAL _atoll
232   0000              	GLOBAL _realloc_unlocked_callee
233   0000              	GLOBAL _realloc_unlocked
234   0000              	GLOBAL _malloc_unlocked_fastcall
235   0000              	GLOBAL _malloc_unlocked
236   0000              	GLOBAL _free_unlocked_fastcall
237   0000              	GLOBAL _free_unlocked
238   0000              	GLOBAL _calloc_unlocked_callee
239   0000              	GLOBAL _calloc_unlocked
240   0000              	GLOBAL _aligned_alloc_unlocked_callee
241   0000              	GLOBAL _aligned_alloc_unlocked
242   0000              	GLOBAL _realloc_callee
243   0000              	GLOBAL _realloc
244   0000              	GLOBAL _malloc_fastcall
245   0000              	GLOBAL _malloc
246   0000              	GLOBAL _free_fastcall
247   0000              	GLOBAL _free
248   0000              	GLOBAL _calloc_callee
249   0000              	GLOBAL _calloc
250   0000              	GLOBAL _aligned_alloc_callee
251   0000              	GLOBAL _aligned_alloc
252   0000              	GLOBAL _utoa_callee
253   0000              	GLOBAL _utoa
254   0000              	GLOBAL _ultoa_callee
255   0000              	GLOBAL _ultoa
256   0000              	GLOBAL _system_fastcall
257   0000              	GLOBAL _system
258   0000              	GLOBAL _strtoul_callee
259   0000              	GLOBAL _strtoul
260   0000              	GLOBAL _strtol_callee
261   0000              	GLOBAL _strtol
262   0000              	GLOBAL _strtof_callee
263   0000              	GLOBAL _strtof
264   0000              	GLOBAL _strtod_callee
265   0000              	GLOBAL _strtod
266   0000              	GLOBAL _srand_fastcall
267   0000              	GLOBAL _srand
268   0000              	GLOBAL _rand
269   0000              	GLOBAL _quick_exit_fastcall
270   0000              	GLOBAL _quick_exit
271   0000              	GLOBAL _qsort_callee
272   0000              	GLOBAL _qsort
273   0000              	GLOBAL _ltoa_callee
274   0000              	GLOBAL _ltoa
275   0000              	GLOBAL _labs_fastcall
276   0000              	GLOBAL _labs
277   0000              	GLOBAL _itoa_callee
278   0000              	GLOBAL _itoa
279   0000              	GLOBAL _ftoh_callee
280   0000              	GLOBAL _ftoh
281   0000              	GLOBAL _ftog_callee
282   0000              	GLOBAL _ftog
283   0000              	GLOBAL _ftoe_callee
284   0000              	GLOBAL _ftoe
285   0000              	GLOBAL _ftoa_callee
286   0000              	GLOBAL _ftoa
287   0000              	GLOBAL _exit_fastcall
288   0000              	GLOBAL _exit
289   0000              	GLOBAL _dtoh_callee
290   0000              	GLOBAL _dtoh
291   0000              	GLOBAL _dtog_callee
292   0000              	GLOBAL _dtog
293   0000              	GLOBAL _dtoe_callee
294   0000              	GLOBAL _dtoe
295   0000              	GLOBAL _dtoa_callee
296   0000              	GLOBAL _dtoa
297   0000              	GLOBAL _bsearch_callee
298   0000              	GLOBAL _bsearch
299   0000              	GLOBAL _atol_fastcall
300   0000              	GLOBAL _atol
301   0000              	GLOBAL _atoi_fastcall
302   0000              	GLOBAL _atoi
303   0000              	GLOBAL _atof_fastcall
304   0000              	GLOBAL _atof
305   0000              	GLOBAL _atexit_fastcall
306   0000              	GLOBAL _atexit
307   0000              	GLOBAL _at_quick_exit_fastcall
308   0000              	GLOBAL _at_quick_exit
309   0000              	GLOBAL _abs_fastcall
310   0000              	GLOBAL _abs
311   0000              	GLOBAL _abort
312   0000              	GLOBAL __strtou__callee
313   0000              	GLOBAL __strtou_
314   0000              	GLOBAL __strtoi__callee
315   0000              	GLOBAL __strtoi_
316   0000              	GLOBAL __random_uniform_xor_8__fastcall
317   0000              	GLOBAL __random_uniform_xor_8_
318   0000              	GLOBAL __random_uniform_xor_32__fastcall
319   0000              	GLOBAL __random_uniform_xor_32_
320   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
321   0000              	GLOBAL __random_uniform_cmwc_8_
322   0000              	GLOBAL __shellsort__callee
323   0000              	GLOBAL __shellsort_
324   0000              	GLOBAL __quicksort__callee
325   0000              	GLOBAL __quicksort_
326   0000              	GLOBAL __insertion_sort__callee
327   0000              	GLOBAL __insertion_sort_
328   0000              	GLOBAL __ldivu__callee
329   0000              	GLOBAL __ldivu_
330   0000              	GLOBAL __ldiv__callee
331   0000              	GLOBAL __ldiv_
332   0000              	GLOBAL __divu__callee
333   0000              	GLOBAL __divu_
334   0000              	GLOBAL __div__callee
335   0000              	GLOBAL __div_
336   0000              	GLOBAL _NIRVANAP_drawTW_raw_callee
337   0000              	GLOBAL _NIRVANAP_drawTW_raw
338   0000              	GLOBAL _NIRVANAP_drawTW_callee
339   0000              	GLOBAL _NIRVANAP_drawTW
340   0000              	GLOBAL _NIRVANAP_drawW_raw_callee
341   0000              	GLOBAL _NIRVANAP_drawW_raw
342   0000              	GLOBAL _NIRVANAP_drawW_callee
343   0000              	GLOBAL _NIRVANAP_drawW
344   0000              	GLOBAL _NIRVANAP_spriteT_callee
345   0000              	GLOBAL _NIRVANAP_spriteT
346   0000              	GLOBAL _NIRVANAP_fillC_callee
347   0000              	GLOBAL _NIRVANAP_fillC
348   0000              	GLOBAL _NIRVANAP_readC_callee
349   0000              	GLOBAL _NIRVANAP_readC
350   0000              	GLOBAL _NIRVANAP_paintC_callee
351   0000              	GLOBAL _NIRVANAP_paintC
352   0000              	GLOBAL _NIRVANAP_printC_callee
353   0000              	GLOBAL _NIRVANAP_printC
354   0000              	GLOBAL _NIRVANAP_fillT_raw_callee
355   0000              	GLOBAL _NIRVANAP_fillT_raw
356   0000              	GLOBAL _NIRVANAP_fillT_callee
357   0000              	GLOBAL _NIRVANAP_fillT
358   0000              	GLOBAL _NIRVANAP_drawT_raw_callee
359   0000              	GLOBAL _NIRVANAP_drawT_raw
360   0000              	GLOBAL _NIRVANAP_drawT_callee
361   0000              	GLOBAL _NIRVANAP_drawT
362   0000              	GLOBAL _NIRVANAP_stop
363   0000              	GLOBAL _NIRVANAP_start
364   0000              	GLOBAL _debug3
365   0000              	GLOBAL _debug2
366   0000              	GLOBAL _debug
367   0000              	GLOBAL _zx_print_str
368   0000              	GLOBAL _zx_print_int
369   0000              	GLOBAL _zx_print_chr
370   0000              	GLOBAL _zx_print_bonus_time
371   0000              	GLOBAL _zx_isr
372   0000              	GLOBAL _z80_otdr_callee
373   0000              	GLOBAL _z80_otdr
374   0000              	GLOBAL _z80_otir_callee
375   0000              	GLOBAL _z80_otir
376   0000              	GLOBAL _z80_outp_callee
377   0000              	GLOBAL _z80_outp
378   0000              	GLOBAL _z80_indr_callee
379   0000              	GLOBAL _z80_indr
380   0000              	GLOBAL _z80_inir_callee
381   0000              	GLOBAL _z80_inir
382   0000              	GLOBAL _z80_inp_fastcall
383   0000              	GLOBAL _z80_inp
384   0000              	GLOBAL _z80_set_int_state_fastcall
385   0000              	GLOBAL _z80_set_int_state
386   0000              	GLOBAL _z80_get_int_state
387   0000              	GLOBAL _z80_delay_tstate_fastcall
388   0000              	GLOBAL _z80_delay_tstate
389   0000              	GLOBAL _z80_delay_ms_fastcall
390   0000              	GLOBAL _z80_delay_ms
391   0000              	GLOBAL _im2_remove_generic_callback_callee
392   0000              	GLOBAL _im2_remove_generic_callback
393   0000              	GLOBAL _im2_prepend_generic_callback_callee
394   0000              	GLOBAL _im2_prepend_generic_callback
395   0000              	GLOBAL _im2_append_generic_callback_callee
396   0000              	GLOBAL _im2_append_generic_callback
397   0000              	GLOBAL _im2_create_generic_isr_8080_callee
398   0000              	GLOBAL _im2_create_generic_isr_8080
399   0000              	GLOBAL _im2_create_generic_isr_callee
400   0000              	GLOBAL _im2_create_generic_isr
401   0000              	GLOBAL _im2_install_isr_callee
402   0000              	GLOBAL _im2_install_isr
403   0000              	GLOBAL _im2_init_fastcall
404   0000              	GLOBAL _im2_init
405   0000              	GLOBAL _intrinsic_swap_word_32_fastcall
406   0000              	GLOBAL _intrinsic_swap_word_32
407   0000              	GLOBAL _intrinsic_swap_endian_32_fastcall
408   0000              	GLOBAL _intrinsic_swap_endian_32
409   0000              	GLOBAL _intrinsic_swap_endian_16_fastcall
410   0000              	GLOBAL _intrinsic_swap_endian_16
411   0000              	GLOBAL _intrinsic_return_de
412   0000              	GLOBAL _intrinsic_return_bc
413   0000              	GLOBAL _intrinsic_exx
414   0000              	GLOBAL _intrinsic_ex_de_hl
415   0000              	GLOBAL _intrinsic_nop
416   0000              	GLOBAL _intrinsic_im_2
417   0000              	GLOBAL _intrinsic_im_1
418   0000              	GLOBAL _intrinsic_im_0
419   0000              	GLOBAL _intrinsic_retn
420   0000              	GLOBAL _intrinsic_reti
421   0000              	GLOBAL _intrinsic_halt
422   0000              	GLOBAL _intrinsic_ei
423   0000              	GLOBAL _intrinsic_di
424   0000              	GLOBAL _intrinsic_stub
425   0000              	GLOBAL _intrinsic_outi
426   0000              	GLOBAL _intrinsic_ldi
427   0000              	GLOBAL _zx_pattern_fill_callee
428   0000              	GLOBAL _zx_pattern_fill
429   0000              	GLOBAL _zx_saddrpup_fastcall
430   0000              	GLOBAL _zx_saddrpup
431   0000              	GLOBAL _zx_saddrpright_callee
432   0000              	GLOBAL _zx_saddrpright
433   0000              	GLOBAL _zx_saddrpleft_callee
434   0000              	GLOBAL _zx_saddrpleft
435   0000              	GLOBAL _zx_saddrpdown_fastcall
436   0000              	GLOBAL _zx_saddrpdown
437   0000              	GLOBAL _zx_saddrcup_fastcall
438   0000              	GLOBAL _zx_saddrcup
439   0000              	GLOBAL _zx_saddrcright_fastcall
440   0000              	GLOBAL _zx_saddrcright
441   0000              	GLOBAL _zx_saddrcleft_fastcall
442   0000              	GLOBAL _zx_saddrcleft
443   0000              	GLOBAL _zx_saddrcdown_fastcall
444   0000              	GLOBAL _zx_saddrcdown
445   0000              	GLOBAL _zx_saddr2py_fastcall
446   0000              	GLOBAL _zx_saddr2py
447   0000              	GLOBAL _zx_saddr2px_fastcall
448   0000              	GLOBAL _zx_saddr2px
449   0000              	GLOBAL _zx_saddr2cy_fastcall
450   0000              	GLOBAL _zx_saddr2cy
451   0000              	GLOBAL _zx_saddr2cx_fastcall
452   0000              	GLOBAL _zx_saddr2cx
453   0000              	GLOBAL _zx_saddr2aaddr_fastcall
454   0000              	GLOBAL _zx_saddr2aaddr
455   0000              	GLOBAL _zx_py2saddr_fastcall
456   0000              	GLOBAL _zx_py2saddr
457   0000              	GLOBAL _zx_py2aaddr_fastcall
458   0000              	GLOBAL _zx_py2aaddr
459   0000              	GLOBAL _zx_pxy2saddr_callee
460   0000              	GLOBAL _zx_pxy2saddr
461   0000              	GLOBAL _zx_pxy2aaddr_callee
462   0000              	GLOBAL _zx_pxy2aaddr
463   0000              	GLOBAL _zx_px2bitmask_fastcall
464   0000              	GLOBAL _zx_px2bitmask
465   0000              	GLOBAL _zx_cy2saddr_fastcall
466   0000              	GLOBAL _zx_cy2saddr
467   0000              	GLOBAL _zx_cy2aaddr_fastcall
468   0000              	GLOBAL _zx_cy2aaddr
469   0000              	GLOBAL _zx_cxy2saddr_callee
470   0000              	GLOBAL _zx_cxy2saddr
471   0000              	GLOBAL _zx_cxy2aaddr_callee
472   0000              	GLOBAL _zx_cxy2aaddr
473   0000              	GLOBAL _zx_bitmask2px_fastcall
474   0000              	GLOBAL _zx_bitmask2px
475   0000              	GLOBAL _zx_aaddrcup_fastcall
476   0000              	GLOBAL _zx_aaddrcup
477   0000              	GLOBAL _zx_aaddrcright_fastcall
478   0000              	GLOBAL _zx_aaddrcright
479   0000              	GLOBAL _zx_aaddrcleft_fastcall
480   0000              	GLOBAL _zx_aaddrcleft
481   0000              	GLOBAL _zx_aaddrcdown_fastcall
482   0000              	GLOBAL _zx_aaddrcdown
483   0000              	GLOBAL _zx_aaddr2saddr_fastcall
484   0000              	GLOBAL _zx_aaddr2saddr
485   0000              	GLOBAL _zx_aaddr2py_fastcall
486   0000              	GLOBAL _zx_aaddr2py
487   0000              	GLOBAL _zx_aaddr2px_fastcall
488   0000              	GLOBAL _zx_aaddr2px
489   0000              	GLOBAL _zx_aaddr2cy_fastcall
490   0000              	GLOBAL _zx_aaddr2cy
491   0000              	GLOBAL _zx_aaddr2cx_fastcall
492   0000              	GLOBAL _zx_aaddr2cx
493   0000              	GLOBAL _zx_visit_wc_pix_callee
494   0000              	GLOBAL _zx_visit_wc_pix
495   0000              	GLOBAL _zx_visit_wc_attr_callee
496   0000              	GLOBAL _zx_visit_wc_attr
497   0000              	GLOBAL _zx_scroll_wc_up_pix_callee
498   0000              	GLOBAL _zx_scroll_wc_up_pix
499   0000              	GLOBAL _zx_scroll_wc_up_attr_callee
500   0000              	GLOBAL _zx_scroll_wc_up_attr
501   0000              	GLOBAL _zx_scroll_wc_up_callee
502   0000              	GLOBAL _zx_scroll_wc_up
503   0000              	GLOBAL _zx_scroll_up_pix_callee
504   0000              	GLOBAL _zx_scroll_up_pix
505   0000              	GLOBAL _zx_scroll_up_attr_callee
506   0000              	GLOBAL _zx_scroll_up_attr
507   0000              	GLOBAL _zx_scroll_up_callee
508   0000              	GLOBAL _zx_scroll_up
509   0000              	GLOBAL _zx_cls_wc_pix_callee
510   0000              	GLOBAL _zx_cls_wc_pix
511   0000              	GLOBAL _zx_cls_wc_attr_callee
512   0000              	GLOBAL _zx_cls_wc_attr
513   0000              	GLOBAL _zx_cls_wc_callee
514   0000              	GLOBAL _zx_cls_wc
515   0000              	GLOBAL _zx_cls_pix_fastcall
516   0000              	GLOBAL _zx_cls_pix
517   0000              	GLOBAL _zx_cls_attr_fastcall
518   0000              	GLOBAL _zx_cls_attr
519   0000              	GLOBAL _zx_cls_fastcall
520   0000              	GLOBAL _zx_cls
521   0000              	GLOBAL _zx_border_fastcall
522   0000              	GLOBAL _zx_border
523   0000              	GLOBAL _spr_colision_b2
524   0000              	GLOBAL _spr_colision_b
525   0000              	GLOBAL _spr_unflatten
526   0000              	GLOBAL _spr_flatten
527   0000              	GLOBAL _spr_btile_paint_back
528   0000              	GLOBAL _spr_bullet_explode
529   0000              	GLOBAL _spr_init_effects
530   0000              	GLOBAL _spr_turn_horizontal
531   0000              	GLOBAL _spr_bullets_play
532   0000              	GLOBAL _spr_play_anim
533   0000              	GLOBAL _spr_add_anim
534   0000              	GLOBAL _spr_clear_scr
535   0000              	GLOBAL _spr_page_map
536   0000              	GLOBAL _spr_page_down
537   0000              	GLOBAL _spr_page_up
538   0000              	GLOBAL _spr_page_right
539   0000              	GLOBAL _spr_page_left
540   0000              	GLOBAL _spr_tile_paint
541   0000              	GLOBAL _spr_calc_hor
542   0000              	GLOBAL _spr_draw_index
543   0000              	GLOBAL _spr_brick_anim
544   0000              	GLOBAL _spr_back_repaint
545   0000              	GLOBAL _spr_tile
546   0000              	GLOBAL _spr_destroy
547   0000              	GLOBAL _spr_tile_dir
548   0000              	GLOBAL _spr_redraw
549   0000              	GLOBAL _spr_move_left
550   0000              	GLOBAL _spr_move_right
551   0000              	GLOBAL _spr_move_horizontal
552   0000              	GLOBAL _spr_move_down
553   0000              	GLOBAL _spr_move_up
554   0000              	GLOBAL _spr_calc_index
555   0000              	GLOBAL _spr_chktime
556   0000              	GLOBAL _menu_define_key
557   0000              	GLOBAL _menu_redefine
558   0000              	GLOBAL _menu_main_print
559   0000              	GLOBAL _menu_main
560   0000              	GLOBAL _game_match_back
561   0000              	GLOBAL _game_attribs
562   0000              	GLOBAL _game_boss_clear
563   0000              	GLOBAL _game_boss_kill
564   0000              	GLOBAL _game_obj_clear
565   0000              	GLOBAL _game_obj_chk
566   0000              	GLOBAL _game_obj_set
567   0000              	GLOBAL _game_shoot_fire_boss
568   0000              	GLOBAL _game_shoot_fire
569   0000              	GLOBAL _game_add_enemy
570   0000              	GLOBAL _game_print_header
571   0000              	GLOBAL _game_check_time
572   0000              	GLOBAL _game_rotate_attrib_osd
573   0000              	GLOBAL _game_rotate_attrib
574   0000              	GLOBAL _game_colour_message
575   0000              	GLOBAL _game_paint_attrib_lin_osd
576   0000              	GLOBAL _game_paint_attrib_lin_h
577   0000              	GLOBAL _game_paint_attrib_lin
578   0000              	GLOBAL _game_print_score
579   0000              	GLOBAL _game_check_cell
580   0000              	GLOBAL _game_check_map
581   0000              	GLOBAL _game_loop
582   0000              	GLOBAL _game_round_init
583   0000              	GLOBAL _game_start_timer
584   0000              	GLOBAL _game_update_stats
585   0000              	GLOBAL _game_print_footer
586   0000              	GLOBAL _game_fill_row
587   0000              	GLOBAL _game_fps
588   0000              	GLOBAL _game_respawn
589   0000              	GLOBAL _game_draw_screen
590   0000              	GLOBAL _boss_turn
591   0000              	GLOBAL _enemy_avoid_dead
592   0000              	GLOBAL _enemy_avoid_fall
593   0000              	GLOBAL _enemy_respawn
594   0000              	GLOBAL _enemy_init
595   0000              	GLOBAL _enemy_move
596   0000              	GLOBAL _enemy_turn
597   0000              	GLOBAL _enemy_static
598   0000              	GLOBAL _enemy_walk
599   0000              	GLOBAL _enemy_horizontal
600   0000              	GLOBAL _enemy_vertical
601   0000              	GLOBAL _ay_fx_play
602   0000              	GLOBAL _ay_midi_play
603   0000              	GLOBAL _ay_is_playing
604   0000              	GLOBAL _ay_reset
605   0000              	GLOBAL _test_func
606   0000              	GLOBAL _test_proc
607   0000              	GLOBAL _in_mouse_kempston_wheel_delta
608   0000              	GLOBAL _in_mouse_kempston_wheel
609   0000              	GLOBAL _in_mouse_kempston_callee
610   0000              	GLOBAL _in_mouse_kempston
611   0000              	GLOBAL _in_mouse_kempston_setpos_callee
612   0000              	GLOBAL _in_mouse_kempston_setpos
613   0000              	GLOBAL _in_mouse_kempston_reset
614   0000              	GLOBAL _in_mouse_kempston_init
615   0000              	GLOBAL _in_mouse_amx_wheel_delta
616   0000              	GLOBAL _in_mouse_amx_wheel
617   0000              	GLOBAL _in_mouse_amx_callee
618   0000              	GLOBAL _in_mouse_amx
619   0000              	GLOBAL _in_mouse_amx_setpos_callee
620   0000              	GLOBAL _in_mouse_amx_setpos
621   0000              	GLOBAL _in_mouse_amx_reset
622   0000              	GLOBAL _in_mouse_amx_init_callee
623   0000              	GLOBAL _in_mouse_amx_init
624   0000              	GLOBAL _in_stick_sinclair2
625   0000              	GLOBAL _in_stick_sinclair1
626   0000              	GLOBAL _in_stick_kempston
627   0000              	GLOBAL _in_stick_fuller
628   0000              	GLOBAL _in_stick_cursor
629   0000              	GLOBAL _in_stick_keyboard_fastcall
630   0000              	GLOBAL _in_stick_keyboard
631   0000              	GLOBAL _in_wait_nokey
632   0000              	GLOBAL _in_wait_key
633   0000              	GLOBAL _in_test_key
634   0000              	GLOBAL _in_pause_fastcall
635   0000              	GLOBAL _in_pause
636   0000              	GLOBAL _in_key_scancode_fastcall
637   0000              	GLOBAL _in_key_scancode
638   0000              	GLOBAL _in_key_pressed_fastcall
639   0000              	GLOBAL _in_key_pressed
640   0000              	GLOBAL _in_inkey
641   0000              	GLOBAL _NIRVANAP_CHAR_TABLE
642   0000              	GLOBAL _NIRVANAP_WIDE_IMAGES
643   0000              	GLOBAL _NIRVANAP_TILE_IMAGES
644   0000              	GLOBAL _NIRVANAP_HOLE
645   0000              	GLOBAL _NIRVANAP_ISR_HOOK
646   0000              	GLOBAL _scan_map
647   0000              	GLOBAL _key_map
648   0000              	GLOBAL _player_lvl_table
649   0000              	GLOBAL _map_paper_last
650   0000              	GLOBAL _map_paper_clr
651   0000              	GLOBAL _map_paper
652   0000              	GLOBAL _draw_count
653   0000              	GLOBAL _g_player_hit_right
654   0000              	GLOBAL _g_player_hit_left
655   0000              	GLOBAL _bullet_count
656   0000              	GLOBAL _spr_hack
657   0000              	GLOBAL _boss_stat
658   0000              	GLOBAL _boss_time_fire
659   0000              	GLOBAL _boss_time
660   0000              	GLOBAL _boss_tile
661   0000              	GLOBAL _boss_inc
662   0000              	GLOBAL _boss_col
663   0000              	GLOBAL _boss_lin
664   0000              	GLOBAL _bullet
665   0000              	GLOBAL _bullet_vel
666   0000              	GLOBAL _bullet_frames
667   0000              	GLOBAL _bullet_colint
668   0000              	GLOBAL _bullet_dir
669   0000              	GLOBAL _bullet_tile
670   0000              	GLOBAL _bullet_col
671   0000              	GLOBAL _bullet_lin
672   0000              	GLOBAL _bullet_col0
673   0000              	GLOBAL _bullet_lin0
674   0000              	GLOBAL _bullet_max
675   0000              	GLOBAL _bullet_class
676   0000              	GLOBAL _mush_class
677   0000              	GLOBAL _mush_index
678   0000              	GLOBAL _anim_count
679   0000              	GLOBAL _anim_respanwn
680   0000              	GLOBAL _anim_loop
681   0000              	GLOBAL _anim_end
682   0000              	GLOBAL _anim_int
683   0000              	GLOBAL _anim_tile
684   0000              	GLOBAL _anim_col
685   0000              	GLOBAL _anim_lin
686   0000              	GLOBAL _map_heigth
687   0000              	GLOBAL _map_width
688   0000              	GLOBAL _scr_curr
689   0000              	GLOBAL _scr_obj1
690   0000              	GLOBAL _scr_obj0
691   0000              	GLOBAL _scr_map
692   0000              	GLOBAL _sprite_speed_alt
693   0000              	GLOBAL _spr_init
694   0000              	GLOBAL _spr_map_tile
695   0000              	GLOBAL _sprite_frames
696   0000              	GLOBAL _sprite_speed
697   0000              	GLOBAL _screen_ink
698   0000              	GLOBAL _screen_paper
699   0000              	GLOBAL _player_onstair
700   0000              	GLOBAL _game_start_scr
701   0000              	GLOBAL _game_respawn_tile
702   0000              	GLOBAL _game_respawn_index
703   0000              	GLOBAL _game_respawn_time
704   0000              	GLOBAL _game_score_top
705   0000              	GLOBAL _player_coins
706   0000              	GLOBAL _player_lives
707   0000              	GLOBAL _game_over
708   0000              	GLOBAL _game_sound
709   0000              	GLOBAL _game_inmune
710   0000              	GLOBAL _game_god_mode
711   0000              	GLOBAL _sprite_curr_index
712   0000              	GLOBAL _spr_count
713   0000              	GLOBAL _bullet_time
714   0000              	GLOBAL _anim_time
715   0000              	GLOBAL _frame_time
716   0000              	GLOBAL _curr_time
717   0000              	GLOBAL _s_state
718   0000              	GLOBAL _attrib_osd
719   0000              	GLOBAL _attrib_hl
720   0000              	GLOBAL _attrib
721   0000              	GLOBAL _zx_val_asm
722   0000              	GLOBAL _enemies
723   0000              	GLOBAL _tmp_ui
724   0000              	GLOBAL _tmp_sc
725   0000              	GLOBAL _tmp_uc
726   0000              	GLOBAL _tmp1
727   0000              	GLOBAL _tmp0
728   0000              	GLOBAL _tmp
729   0000              	GLOBAL _index1
730   0000              	GLOBAL _index0
731   0000              	GLOBAL _loop_count
732   0000              	GLOBAL _s_col1
733   0000              	GLOBAL _s_col0
734   0000              	GLOBAL _s_lin1
735   0000              	GLOBAL _s_lin0
736   0000              	GLOBAL _s_tile1
737   0000              	GLOBAL _s_tile0
738   0000              	GLOBAL _player_brick_time
739   0000              	GLOBAL _player_hit_count
740   0000              	GLOBAL _sprite_horizontal_check
741   0000              	GLOBAL _sprite_on_air
742   0000              	GLOBAL _sprite
743   0000              	GLOBAL _fps
744   0000              	GLOBAL _game_2buttons
745   0000              	GLOBAL _game_respawn_curr_time
746   0000              	GLOBAL _game_worldup
747   0000              	GLOBAL _game_mush_count
748   0000              	GLOBAL _game_boss_fix
749   0000              	GLOBAL _game_boss_hit
750   0000              	GLOBAL _game_boss_alive
751   0000              	GLOBAL _game_boss
752   0000              	GLOBAL _game_world
753   0000              	GLOBAL _game_gravity
754   0000              	GLOBAL _player_onfire
755   0000              	GLOBAL _player_anim_stair
756   0000              	GLOBAL _player_hit_time
757   0000              	GLOBAL _player_lin_scr
758   0000              	GLOBAL _player_col_scr
759   0000              	GLOBAL _player_lvl
760   0000              	GLOBAL _player_int
761   0000              	GLOBAL _player_str
762   0000              	GLOBAL _player_max_vita
763   0000              	GLOBAL _player_max_mana
764   0000              	GLOBAL _player_vita
765   0000              	GLOBAL _player_mana
766   0000              	GLOBAL _player_keys
767   0000              	GLOBAL _player_vel_inc
768   0000              	GLOBAL _player_vel_y1
769   0000              	GLOBAL _player_vel_y0
770   0000              	GLOBAL _player_vel_y
771   0000              	GLOBAL _player_vel_x
772   0000              	GLOBAL _player_score
773   0000              	GLOBAL _last_time
774   0000              	GLOBAL _player_slide
775   0000              	GLOBAL _spr_timer
776   0000              	GLOBAL _jump_lin
777   0000              	GLOBAL _player_hit_col
778   0000              	GLOBAL _player_hit_lin
779   0000              	GLOBAL _colint
780   0000              	GLOBAL _col
781   0000              	GLOBAL _lin
782   0000              	GLOBAL _tile
783   0000              	GLOBAL _state_a
784   0000              	GLOBAL _state
785   0000              	GLOBAL _class
786   0000              	GLOBAL _tbuffer
787   0000              	GLOBAL _dirs_alt
788   0000              	GLOBAL _dirs
789   0000              	GLOBAL _k2
790   0000              	GLOBAL _k1
791   0000              	GLOBAL _joyfunc2
792   0000              	GLOBAL _joyfunc1
793   0000              	GLOBAL _btiles
794   0000              	GLOBAL _spec128
795   0000              	GLOBAL _GLOBAL_ZX_PORT_7FFD
796   0000              	GLOBAL _GLOBAL_ZX_PORT_1FFD
797   0000              	GLOBAL _GLOBAL_ZX_PORT_FE
798   0000              	GLOBAL _ay_effect_20
799   0000              	GLOBAL _ay_effect_19
800   0000              	GLOBAL _ay_effect_18
801   0000              	GLOBAL _ay_effect_17
802   0000              	GLOBAL _ay_effect_16
803   0000              	GLOBAL _ay_effect_15
804   0000              	GLOBAL _ay_effect_14
805   0000              	GLOBAL _ay_effect_13
806   0000              	GLOBAL _ay_effect_12
807   0000              	GLOBAL _ay_effect_11
808   0000              	GLOBAL _ay_effect_10
809   0000              	GLOBAL _ay_effect_09
810   0000              	GLOBAL _ay_effect_08
811   0000              	GLOBAL _ay_effect_07
812   0000              	GLOBAL _ay_effect_06
813   0000              	GLOBAL _ay_effect_05
814   0000              	GLOBAL _ay_effect_04
815   0000              	GLOBAL _ay_effect_03
816   0000              	GLOBAL _ay_effect_02
817   0000              	GLOBAL _ay_effect_01
818   0000              	GLOBAL _pb_midi_phase_1
819   0000              	GLOBAL _pb_midi_title
820   0000              	GLOBAL _control_method
821   0000              	GLOBAL _world0_h
822   0000              	GLOBAL _world0_w
823   0000              	GLOBAL _world0
824   0000              	GLOBAL _paper0
825   0000              	GLOBAL _lenght0
826   0000              	GLOBAL _start_scr0
827   0000              ;--------------------------------------------------------
828   0000              ; special function registers
829   0000              ;--------------------------------------------------------
830   0000              defc _IO_FE	=	0x00fe
831   0000              defc _IO_1FFD	=	0x1ffd
832   0000              defc _IO_7FFD	=	0x7ffd
833   0000              ;--------------------------------------------------------
834   0000              ; ram data
835   0000              ;--------------------------------------------------------
836   0000              	SECTION bss_compiler
837   0000              ;--------------------------------------------------------
838   0000              ; ram data
839   0000              ;--------------------------------------------------------
840   0000              
841   0000              IF 0
842   0000              
843   0000              ; .area _INITIALIZED removed by z88dk
844   0000              
845   0000              
846   0000              ENDIF
847   0000              
848   0000              ;--------------------------------------------------------
849   0000              ; absolute external ram data
850   0000              ;--------------------------------------------------------
851   0000              	SECTION IGNORE
852   0000              ;--------------------------------------------------------
853   0000              ; global & static initialisations
854   0000              ;--------------------------------------------------------
855   0000              	SECTION code_crt_init
856   0000              ;--------------------------------------------------------
857   0000              ; Home
858   0000              ;--------------------------------------------------------
859   0000              	SECTION IGNORE
860   0000              ;--------------------------------------------------------
861   0000              ; code
862   0000              ;--------------------------------------------------------
863   0000              	SECTION code_compiler
864   0000              ;	---------------------------------
865   0000              ; Function player_init
866   0000              ; ---------------------------------
867   0000              _player_init:
868   0000  CD 00 00    	call	___sdcc_enter_ix
869   0003  21 07 00    	ld	hl, +(_class + 0x0007)
870   0006  36 00       	ld	(hl),0x00
871   0008  21 07 00    	ld	hl, +(_tile + 0x0007)
872   000B  DD 7E 06    	ld	a,(ix+6)
873   000E  77          	ld	(hl), a
874   000F  21 07 00    	ld	hl, +(_lin + 0x0007)
875   0012  DD 7E 04    	ld	a,(ix+4)
876   0015  77          	ld	(hl), a
877   0016  21 07 00    	ld	hl, +(_col + 0x0007)
878   0019  DD 7E 05    	ld	a,(ix+5)
879   001C  77          	ld	(hl), a
880   001D  21 07 00    	ld	hl, +(_colint + 0x0007)
881   0020  36 00       	ld	(hl),0x00
882   0022  21 07 00    	ld	hl, +(_state + 0x0007)
883   0025  36 00       	ld	(hl),0x00
884   0027  01 07 00    	ld	bc,_state_a+7
885   002A  AF          	xor	a, a
886   002B  02          	ld	(bc), a
887   002C  21 07 00    	ld	hl, +(_jump_lin + 0x0007)
888   002F  DD 7E 04    	ld	a,(ix+4)
889   0032  77          	ld	(hl), a
890   0033  ED 5B 00 00 	ld	de,(_curr_time)
891   0037  ED 53 0E 00 	ld	(_last_time + 0x000e),de
892   003B  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
893   003E  36 00       	ld	(hl),0x00
894   0040  0A          	ld	a, (bc)
895   0041  F6 11       	or	a,+(0x01|0x10)
896   0043  02          	ld	(bc),a
897   0044  21 00 00    	ld	hl,_player_hit_col
898   0047  36 00       	ld	(hl),0x00
899   0049  21 00 00    	ld	hl,_player_hit_lin
900   004C  36 00       	ld	(hl),0x00
901   004E  21 00 00    	ld	hl,_player_slide
902   0051  36 00       	ld	(hl),0x00
903   0053  21 00 00    	ld	hl,_player_onstair
904   0056  36 00       	ld	(hl),0x00
905   0058  21 00 00    	ld	hl,_player_onfire
906   005B  36 00       	ld	(hl),0x00
907   005D  DD 66 05    	ld	h,(ix+5)
908   0060  DD 6E 04    	ld	l,(ix+4)
909   0063  E5          	push	hl
910   0064  DD 56 06    	ld	d,(ix+6)
911   0067  1E 07       	ld	e,0x07
912   0069  D5          	push	de
913   006A  CD 00 00    	call	_NIRVANAP_spriteT_callee
914   006D  DD E1       	pop	ix
915   006F  C9          	ret
916   0070              	SECTION code_compiler
917   0070              ;	---------------------------------
918   0070              ; Function player_turn
919   0070              ; ---------------------------------
920   0070              _player_turn:
921   0070  21 00 00    	ld	hl,_sprite
922   0073  CD 00 00    	call	_spr_chktime
923   0076  7D          	ld	a, l
924   0077  B7          	or	a, a
925   0078  C8          	ret	Z
926   0079  21 00 00    	ld	hl,_k1
927   007C  E5          	push	hl
928   007D  2A 00 00    	ld	hl,(_joyfunc1)
929   0080  CD 00 00    	call	___sdcc_call_hl
930   0083  F1          	pop	af
931   0084  7D          	ld	a,l
932   0085  32 00 00    	ld	(_dirs),a
933   0088  21 00 00    	ld	hl,_k2
934   008B  E5          	push	hl
935   008C  2A 00 00    	ld	hl,(_joyfunc2)
936   008F  CD 00 00    	call	___sdcc_call_hl
937   0092  F1          	pop	af
938   0093  7D          	ld	a,l
939   0094  32 00 00    	ld	(_dirs_alt),a
940   0097  CD 9D 00    	call	_player_move
941   009A  C3 D6 03    	jp  _player_collision
942   009D              	SECTION code_compiler
943   009D              ;	---------------------------------
944   009D              ; Function player_move
945   009D              ; ---------------------------------
946   009D              _player_move:
947   009D  3A 07 00    	ld	a,(_lin + 0x0007)
948   00A0  32 00 00    	ld	(_s_lin0),a
949   00A3  3A 07 00    	ld	a,(_col + 0x0007)
950   00A6  32 00 00    	ld	(_s_col0),a
951   00A9  21 07 00    	ld	hl,+(_tile + 0x0007)
952   00AC  4E          	ld	c, (hl)
953   00AD  21 07 00    	ld	hl,+(_colint + 0x0007)
954   00B0  46          	ld	b, (hl)
955   00B1  79          	ld	a, c
956   00B2  80          	add	a, b
957   00B3  32 00 00    	ld	(_s_tile0),a
958   00B6  3A 07 00    	ld	a,(_state + 0x0007)
959   00B9  32 00 00    	ld	(_s_state),a
960   00BC  21 00 00    	ld	hl,_s_state
961   00BF  CB 46       	bit	0, (hl)
962   00C1  20 07       	jr	NZ,l_player_move_00113
963   00C3  21 00 00    	ld	hl,_s_state
964   00C6  CB 4E       	bit	1, (hl)
965   00C8  28 49       	jr	Z,l_player_move_00114
966   00CA              l_player_move_00113:
967   00CA  CD 49 03    	call	_player_fire
968   00CD  3A 00 00    	ld	a,(_player_vel_y)
969   00D0  21 00 00    	ld	hl,_player_vel_y1
970   00D3  96          	sub	a, (hl)
971   00D4  E2 D9 00    	jp	PO, l_player_move_00162
972   00D7  EE 80       	xor	a,0x80
973   00D9              l_player_move_00162:
974   00D9  F2 FC 00    	jp	P, l_player_move_00106
975   00DC  21 00 00    	ld	hl,_dirs
976   00DF  CB 56       	bit	2, (hl)
977   00E1  28 09       	jr	Z,l_player_move_00102
978   00E3  21 00 00    	ld	hl,_s_state
979   00E6  7E          	ld	a,(hl)
980   00E7  F6 08       	or	a,0x08
981   00E9  E6 FB       	and	a,0xfb
982   00EB  77          	ld	(hl),a
983   00EC              l_player_move_00102:
984   00EC  21 00 00    	ld	hl,_dirs
985   00EF  CB 4E       	bit	1, (hl)
986   00F1  28 09       	jr	Z,l_player_move_00106
987   00F3  21 00 00    	ld	hl,_s_state
988   00F6  7E          	ld	a,(hl)
989   00F7  F6 04       	or	a,0x04
990   00F9  E6 F7       	and	a,0xf7
991   00FB  77          	ld	(hl),a
992   00FC              l_player_move_00106:
993   00FC  CD 07 0E    	call	_player_move_jump
994   00FF  7D          	ld	a, l
995   0100  B7          	or	a, a
996   0101  28 1C       	jr	Z,l_player_move_00115
997   0103  3A 00 00    	ld	a,(_player_onstair)
998   0106  B7          	or	a, a
999   0107  20 16       	jr	NZ,l_player_move_00115
1000  0109  21 60 08    	ld	hl,0x0860
1001  010C  E5          	push	hl
1002  010D  CD F7 06    	call	_player_tile
1003  0110  F1          	pop	af
1004  0111  18 0C       	jr	l_player_move_00115
1005  0113              l_player_move_00114:
1006  0113  CD 85 01    	call	_player_move_input
1007  0116  3A 00 00    	ld	a,(_player_onstair)
1008  0119  B7          	or	a, a
1009  011A  20 03       	jr	NZ,l_player_move_00115
1010  011C  CD 82 0C    	call	_player_check_floor
1011  011F              l_player_move_00115:
1012  011F  CD 00 00    	call	_spr_redraw
1013  0122  7D          	ld	a, l
1014  0123  B7          	or	a, a
1015  0124  28 03       	jr	Z,l_player_move_00118
1016  0126  CD 12 07    	call	_player_check_map
1017  0129              l_player_move_00118:
1018  0129  3A 00 00    	ld	a,(_player_hit_lin)
1019  012C  B7          	or	a, a
1020  012D  28 03       	jr	Z,l_player_move_00120
1021  012F  CD E9 0B    	call	_player_hit_platform_clear
1022  0132              l_player_move_00120:
1023  0132  3A 00 00    	ld	a,(_s_state)
1024  0135  32 07 00    	ld	((_state + 0x0007)),a
1025  0138  2E 00       	ld	l,0x00
1026  013A  C9          	ret
1027  013B              	SECTION code_compiler
1028  013B              ;	---------------------------------
1029  013B              ; Function player_check_input
1030  013B              ; ---------------------------------
1031  013B              _player_check_input:
1032  013B  21 00 00    	ld	hl,_dirs
1033  013E  CB 56       	bit	2, (hl)
1034  0140  28 0C       	jr	Z,l_player_check_input_00102
1035  0142  21 00 00    	ld	hl,_dirs
1036  0145  CB 5E       	bit	3, (hl)
1037  0147  28 05       	jr	Z,l_player_check_input_00102
1038  0149  21 00 00    	ld	hl,_dirs
1039  014C  36 00       	ld	(hl),0x00
1040  014E              l_player_check_input_00102:
1041  014E  21 00 00    	ld	hl,_dirs
1042  0151  7E          	ld	a, (hl)
1043  0152  CB 07       	rlc	a
1044  0154  E6 01       	and	a,0x01
1045  0156  CB 47       	bit	0, a
1046  0158  20 28       	jr	NZ,l_player_check_input_00107
1047  015A  CB 56       	bit	2, (hl)
1048  015C  20 24       	jr	NZ,l_player_check_input_00107
1049  015E  21 00 00    	ld	hl,_dirs
1050  0161  CB 5E       	bit	3, (hl)
1051  0163  20 1D       	jr	NZ,l_player_check_input_00107
1052  0165  21 00 00    	ld	hl,_dirs
1053  0168  CB 46       	bit	0, (hl)
1054  016A  20 16       	jr	NZ,l_player_check_input_00107
1055  016C  21 00 00    	ld	hl,_dirs
1056  016F  CB 4E       	bit	1, (hl)
1057  0171  20 0F       	jr	NZ,l_player_check_input_00107
1058  0173  3A 00 00    	ld	a,(_dirs_alt)
1059  0176  CB 07       	rlc	a
1060  0178  E6 01       	and	a,0x01
1061  017A  CB 47       	bit	0, a
1062  017C  20 04       	jr	NZ,l_player_check_input_00107
1063  017E  2E 00       	ld	l,0x00
1064  0180  18 02       	jr	l_player_check_input_00108
1065  0182              l_player_check_input_00107:
1066  0182  2E 01       	ld	l,0x01
1067  0184              l_player_check_input_00108:
1068  0184  C9          	ret
1069  0185              	SECTION code_compiler
1070  0185              ;	---------------------------------
1071  0185              ; Function player_move_input
1072  0185              ; ---------------------------------
1073  0185              _player_move_input:
1074  0185  CD 3B 01    	call	_player_check_input
1075  0188  7D          	ld	a, l
1076  0189  B7          	or	a, a
1077  018A  CA 09 03    	jp	Z, l_player_move_input_00149
1078  018D  CD 49 03    	call	_player_fire
1079  0190  7D          	ld	a, l
1080  0191  B7          	or	a, a
1081  0192  28 0A       	jr	Z,l_player_move_input_00102
1082  0194  21 00 00    	ld	hl,_dirs
1083  0197  36 00       	ld	(hl),0x00
1084  0199  2E 00       	ld	l,0x00
1085  019B  C3 2F 03    	jp	l_player_move_input_00151
1086  019E              l_player_move_input_00102:
1087  019E  3A 00 00    	ld	a,(_game_2buttons)
1088  01A1  B7          	or	a, a
1089  01A2  28 07       	jr	Z,l_player_move_input_00104
1090  01A4  3A 00 00    	ld	a,(_dirs)
1091  01A7  E6 80       	and	a,0x80
1092  01A9  18 16       	jr	l_player_move_input_00105
1093  01AB              l_player_move_input_00104:
1094  01AB  21 00 00    	ld	hl,_dirs
1095  01AE  7E          	ld	a, (hl)
1096  01AF  CB 07       	rlc	a
1097  01B1  E6 01       	and	a,0x01
1098  01B3  CB 47       	bit	0, a
1099  01B5  28 04       	jr	Z,l_player_move_input_00153
1100  01B7  CB 46       	bit	0, (hl)
1101  01B9  20 04       	jr	NZ,l_player_move_input_00154
1102  01BB              l_player_move_input_00153:
1103  01BB  3E 00       	ld	a,0x00
1104  01BD  18 02       	jr	l_player_move_input_00155
1105  01BF              l_player_move_input_00154:
1106  01BF  3E 01       	ld	a,0x01
1107  01C1              l_player_move_input_00155:
1108  01C1              l_player_move_input_00105:
1109  01C1  B7          	or	a, a
1110  01C2  28 4A       	jr	Z,l_player_move_input_00109
1111  01C4  21 00 00    	ld	hl,_player_vel_inc
1112  01C7  36 01       	ld	(hl),0x01
1113  01C9  CD 00 00    	call	_ay_is_playing
1114  01CC  7D          	ld	a, l
1115  01CD  D6 03       	sub	a,0x03
1116  01CF  28 06       	jr	Z,l_player_move_input_00107
1117  01D1  21 00 00    	ld	hl,_ay_effect_03
1118  01D4  CD 00 00    	call	_ay_fx_play
1119  01D7              l_player_move_input_00107:
1120  01D7  21 00 00    	ld	hl,_player_onstair
1121  01DA  36 00       	ld	(hl),0x00
1122  01DC  21 00 00    	ld	hl,_s_state
1123  01DF  7E          	ld	a,(hl)
1124  01E0  F6 01       	or	a,0x01
1125  01E2  E6 FD       	and	a,0xfd
1126  01E4  77          	ld	(hl),a
1127  01E5  3A 07 00    	ld	a,(_lin + 0x0007)
1128  01E8  32 07 00    	ld	((_jump_lin + 0x0007)),a
1129  01EB  3A 00 00    	ld	a,(_s_state)
1130  01EE  32 07 00    	ld	((_state + 0x0007)),a
1131  01F1  21 64 08    	ld	hl,0x0864
1132  01F4  E5          	push	hl
1133  01F5  CD F7 06    	call	_player_tile
1134  01F8  F1          	pop	af
1135  01F9  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
1136  01FC  36 02       	ld	(hl),0x02
1137  01FE  21 00 00    	ld	hl,_player_slide
1138  0201  36 00       	ld	(hl),0x00
1139  0203  3A 00 00    	ld	a,(_player_vel_y0)
1140  0206  32 00 00    	ld	(_player_vel_y),a
1141  0209  2E 01       	ld	l,0x01
1142  020B  C3 2F 03    	jp	l_player_move_input_00151
1143  020E              l_player_move_input_00109:
1144  020E  21 00 00    	ld	hl,_dirs
1145  0211  CB 5E       	bit	3, (hl)
1146  0213  28 23       	jr	Z,l_player_move_input_00113
1147  0215  CD 30 03    	call	_player_fix_walk_lin
1148  0218  21 00 00    	ld	hl,_s_state
1149  021B  7E          	ld	a,(hl)
1150  021C  F6 04       	or	a,0x04
1151  021E  E6 F7       	and	a,0xf7
1152  0220  77          	ld	(hl),a
1153  0221  01 07 00    	ld	bc,_state_a+7
1154  0224  0A          	ld	a, (bc)
1155  0225  F6 10       	or	a,0x10
1156  0227  E6 F7       	and	a,0xf7
1157  0229  02          	ld	(bc),a
1158  022A  3A 00 00    	ld	a,(_player_onstair)
1159  022D  B7          	or	a, a
1160  022E  28 05       	jr	Z,l_player_move_input_00111
1161  0230  2E 00       	ld	l,0x00
1162  0232  CD 21 06    	call	_player_check_stairs
1163  0235              l_player_move_input_00111:
1164  0235  CD 00 00    	call	_spr_move_horizontal
1165  0238              l_player_move_input_00113:
1166  0238  21 00 00    	ld	hl,_dirs
1167  023B  CB 56       	bit	2, (hl)
1168  023D  28 23       	jr	Z,l_player_move_input_00117
1169  023F  CD 30 03    	call	_player_fix_walk_lin
1170  0242  21 00 00    	ld	hl,_s_state
1171  0245  7E          	ld	a,(hl)
1172  0246  F6 08       	or	a,0x08
1173  0248  E6 FB       	and	a,0xfb
1174  024A  77          	ld	(hl),a
1175  024B  01 07 00    	ld	bc,_state_a+7
1176  024E  0A          	ld	a, (bc)
1177  024F  F6 08       	or	a,0x08
1178  0251  E6 EF       	and	a,0xef
1179  0253  02          	ld	(bc),a
1180  0254  3A 00 00    	ld	a,(_player_onstair)
1181  0257  B7          	or	a, a
1182  0258  28 05       	jr	Z,l_player_move_input_00115
1183  025A  2E 00       	ld	l,0x00
1184  025C  CD 21 06    	call	_player_check_stairs
1185  025F              l_player_move_input_00115:
1186  025F  CD 00 00    	call	_spr_move_horizontal
1187  0262              l_player_move_input_00117:
1188  0262  21 00 00    	ld	hl,_dirs
1189  0265  CB 46       	bit	0, (hl)
1190  0267  28 3C       	jr	Z,l_player_move_input_00129
1191  0269  2E 00       	ld	l,0x00
1192  026B  CD 21 06    	call	_player_check_stairs
1193  026E  3A 00 00    	ld	a,(_player_onstair)
1194  0271  B7          	or	a, a
1195  0272  20 13       	jr	NZ,l_player_move_input_00121
1196  0274  2E 01       	ld	l,0x01
1197  0276  CD 21 06    	call	_player_check_stairs
1198  0279  3A 00 00    	ld	a,(_player_onstair)
1199  027C  B7          	or	a, a
1200  027D  20 08       	jr	NZ,l_player_move_input_00121
1201  027F  3E FE       	ld	a,0xfe
1202  0281  F5          	push	af
1203  0282  33          	inc	sp
1204  0283  CD 78 05    	call	_player_check_stairs_vertical
1205  0286  33          	inc	sp
1206  0287              l_player_move_input_00121:
1207  0287  3A 00 00    	ld	a,(_player_onstair)
1208  028A  B7          	or	a, a
1209  028B  28 05       	jr	Z,l_player_move_input_00126
1210  028D  CD 00 00    	call	_spr_move_up
1211  0290  18 13       	jr	l_player_move_input_00129
1212  0292              l_player_move_input_00126:
1213  0292  21 00 00    	ld	hl,_dirs
1214  0295  CB 5E       	bit	3, (hl)
1215  0297  20 0C       	jr	NZ,l_player_move_input_00129
1216  0299  21 00 00    	ld	hl,_dirs
1217  029C  CB 56       	bit	2, (hl)
1218  029E  20 05       	jr	NZ,l_player_move_input_00129
1219  02A0  2E 00       	ld	l,0x00
1220  02A2  C3 2F 03    	jp	l_player_move_input_00151
1221  02A5              l_player_move_input_00129:
1222  02A5  21 00 00    	ld	hl,_dirs
1223  02A8  CB 4E       	bit	1, (hl)
1224  02AA  28 3B       	jr	Z,l_player_move_input_00141
1225  02AC  2E 00       	ld	l,0x00
1226  02AE  CD 21 06    	call	_player_check_stairs
1227  02B1  3A 00 00    	ld	a,(_player_onstair)
1228  02B4  B7          	or	a, a
1229  02B5  20 13       	jr	NZ,l_player_move_input_00133
1230  02B7  2E 01       	ld	l,0x01
1231  02B9  CD 21 06    	call	_player_check_stairs
1232  02BC  3A 00 00    	ld	a,(_player_onstair)
1233  02BF  B7          	or	a, a
1234  02C0  20 08       	jr	NZ,l_player_move_input_00133
1235  02C2  3E 12       	ld	a,0x12
1236  02C4  F5          	push	af
1237  02C5  33          	inc	sp
1238  02C6  CD 78 05    	call	_player_check_stairs_vertical
1239  02C9  33          	inc	sp
1240  02CA              l_player_move_input_00133:
1241  02CA  3A 00 00    	ld	a,(_player_onstair)
1242  02CD  B7          	or	a, a
1243  02CE  28 05       	jr	Z,l_player_move_input_00138
1244  02D0  CD 00 00    	call	_spr_move_down
1245  02D3  18 12       	jr	l_player_move_input_00141
1246  02D5              l_player_move_input_00138:
1247  02D5  21 00 00    	ld	hl,_dirs
1248  02D8  CB 5E       	bit	3, (hl)
1249  02DA  20 0B       	jr	NZ,l_player_move_input_00141
1250  02DC  21 00 00    	ld	hl,_dirs
1251  02DF  CB 56       	bit	2, (hl)
1252  02E1  20 04       	jr	NZ,l_player_move_input_00141
1253  02E3  2E 00       	ld	l,0x00
1254  02E5  18 48       	jr	l_player_move_input_00151
1255  02E7              l_player_move_input_00141:
1256  02E7  3A 00 00    	ld	a,(_s_state)
1257  02EA  32 07 00    	ld	((_state + 0x0007)),a
1258  02ED  3A 00 00    	ld	a,(_player_onstair)
1259  02F0  B7          	or	a, a
1260  02F1  28 0A       	jr	Z,l_player_move_input_00143
1261  02F3  21 72 00    	ld	hl,0x0072
1262  02F6  E5          	push	hl
1263  02F7  CD F7 06    	call	_player_tile
1264  02FA  F1          	pop	af
1265  02FB  18 08       	jr	l_player_move_input_00144
1266  02FD              l_player_move_input_00143:
1267  02FD  21 60 08    	ld	hl,0x0860
1268  0300  E5          	push	hl
1269  0301  CD F7 06    	call	_player_tile
1270  0304  F1          	pop	af
1271  0305              l_player_move_input_00144:
1272  0305  2E 01       	ld	l,0x01
1273  0307  18 26       	jr	l_player_move_input_00151
1274  0309              l_player_move_input_00149:
1275  0309  21 07 00    	ld	hl, +(_colint + 0x0007)
1276  030C  36 00       	ld	(hl),0x00
1277  030E  3A 00 00    	ld	a,(_player_onstair)
1278  0311  B7          	or	a, a
1279  0312  28 0A       	jr	Z,l_player_move_input_00146
1280  0314  21 72 00    	ld	hl,0x0072
1281  0317  E5          	push	hl
1282  0318  CD F7 06    	call	_player_tile
1283  031B  F1          	pop	af
1284  031C  18 08       	jr	l_player_move_input_00147
1285  031E              l_player_move_input_00146:
1286  031E  21 70 01    	ld	hl,0x0170
1287  0321  E5          	push	hl
1288  0322  CD F7 06    	call	_player_tile
1289  0325  F1          	pop	af
1290  0326              l_player_move_input_00147:
1291  0326  21 00 00    	ld	hl,_s_state
1292  0329  7E          	ld	a,(hl)
1293  032A  E6 F3       	and	a,+(0xf7&0xfb)
1294  032C  77          	ld	(hl),a
1295  032D  2E 00       	ld	l,0x00
1296  032F              l_player_move_input_00151:
1297  032F  C9          	ret
1298  0330              	SECTION code_compiler
1299  0330              ;	---------------------------------
1300  0330              ; Function player_fix_walk_lin
1301  0330              ; ---------------------------------
1302  0330              _player_fix_walk_lin:
1303  0330  3A 00 00    	ld	a,(_player_onstair)
1304  0333  B7          	or	a, a
1305  0334  C0          	ret	NZ
1306  0335  01 07 00    	ld	bc,_lin+7
1307  0338  3A 00 00    	ld	a,(_s_lin0)
1308  033B  07          	rlca
1309  033C  07          	rlca
1310  033D  07          	rlca
1311  033E  07          	rlca
1312  033F  E6 0F       	and	a,0x0f
1313  0341  07          	rlca
1314  0342  07          	rlca
1315  0343  07          	rlca
1316  0344  07          	rlca
1317  0345  E6 F0       	and	a,0xf0
1318  0347  02          	ld	(bc), a
1319  0348  C9          	ret
1320  0349              	SECTION code_compiler
1321  0349              ;	---------------------------------
1322  0349              ; Function player_fire
1323  0349              ; ---------------------------------
1324  0349              _player_fire:
1325  0349  CD 00 00    	call	___sdcc_enter_ix
1326  034C  3B          	dec	sp
1327  034D  3A 00 00    	ld	a,(_game_2buttons)
1328  0350  B7          	or	a, a
1329  0351  28 0A       	jr	Z,l_player_fire_00102
1330  0353  3A 00 00    	ld	a,(_dirs_alt)
1331  0356  E6 80       	and	a,0x80
1332  0358  32 00 00    	ld	(_player_onfire),a
1333  035B  18 1A       	jr	l_player_fire_00103
1334  035D              l_player_fire_00102:
1335  035D  21 00 00    	ld	hl,_dirs
1336  0360  7E          	ld	a, (hl)
1337  0361  CB 07       	rlc	a
1338  0363  E6 01       	and	a,0x01
1339  0365  CB 47       	bit	0, a
1340  0367  28 04       	jr	Z,l_player_fire_00119
1341  0369  CB 46       	bit	0, (hl)
1342  036B  28 04       	jr	Z,l_player_fire_00120
1343  036D              l_player_fire_00119:
1344  036D  0E 00       	ld	c,0x00
1345  036F  18 02       	jr	l_player_fire_00121
1346  0371              l_player_fire_00120:
1347  0371  0E 01       	ld	c,0x01
1348  0373              l_player_fire_00121:
1349  0373  21 00 00    	ld	hl,_player_onfire
1350  0376  71          	ld	(hl), c
1351  0377              l_player_fire_00103:
1352  0377  3A 00 00    	ld	a,(_player_onfire)
1353  037A  B7          	or	a, a
1354  037B  28 53       	jr	Z,l_player_fire_00116
1355  037D  3A 07 00    	ld	a,(_tile + 0x0007)
1356  0380  FE 70       	cp	a,0x70
1357  0382  28 04       	jr	Z,l_player_fire_00104
1358  0384  D6 71       	sub	a,0x71
1359  0386  20 0D       	jr	NZ,l_player_fire_00105
1360  0388              l_player_fire_00104:
1361  0388  21 60 08    	ld	hl,0x0860
1362  038B  E5          	push	hl
1363  038C  CD F7 06    	call	_player_tile
1364  038F  F1          	pop	af
1365  0390  21 07 00    	ld	hl, +(_colint + 0x0007)
1366  0393  36 00       	ld	(hl),0x00
1367  0395              l_player_fire_00105:
1368  0395  21 00 00    	ld	hl,_player_mana
1369  0398  7E          	ld	a, (hl)
1370  0399  B7          	or	a, a
1371  039A  28 30       	jr	Z,l_player_fire_00113
1372  039C  3A 07 00    	ld	a,(_bullet_col + 0x0007)
1373  039F  3C          	inc	a
1374  03A0  20 2A       	jr	NZ,l_player_fire_00113
1375  03A2  3E 05       	ld	a,0x05
1376  03A4  96          	sub	a, (hl)
1377  03A5  30 0F       	jr	NC,l_player_fire_00110
1378  03A7  3A 00 00    	ld	a,(_game_god_mode)
1379  03AA  B7          	or	a, a
1380  03AB  20 0E       	jr	NZ,l_player_fire_00111
1381  03AD  21 00 00    	ld	hl,_player_mana
1382  03B0  7E          	ld	a, (hl)
1383  03B1  C6 FB       	add	a,0xfb
1384  03B3  77          	ld	(hl), a
1385  03B4  18 05       	jr	l_player_fire_00111
1386  03B6              l_player_fire_00110:
1387  03B6  21 00 00    	ld	hl,_player_mana
1388  03B9  36 00       	ld	(hl),0x00
1389  03BB              l_player_fire_00111:
1390  03BB  CD 00 00    	call	_game_update_stats
1391  03BE  21 00 00    	ld	hl,_ay_effect_05
1392  03C1  CD 00 00    	call	_ay_fx_play
1393  03C4  21 07 78    	ld	hl,0x7807
1394  03C7  E5          	push	hl
1395  03C8  CD 00 00    	call	_game_shoot_fire
1396  03CB  F1          	pop	af
1397  03CC              l_player_fire_00113:
1398  03CC  2E 01       	ld	l,0x01
1399  03CE  18 02       	jr	l_player_fire_00117
1400  03D0              l_player_fire_00116:
1401  03D0  2E 00       	ld	l,0x00
1402  03D2              l_player_fire_00117:
1403  03D2  33          	inc	sp
1404  03D3  DD E1       	pop	ix
1405  03D5  C9          	ret
1406  03D6              	SECTION code_compiler
1407  03D6              ;	---------------------------------
1408  03D6              ; Function player_collision
1409  03D6              ; ---------------------------------
1410  03D6              _player_collision:
1411  03D6  21 19 00    	ld	hl,0x0019
1412  03D9  E5          	push	hl
1413  03DA  2A 00 00    	ld	hl,(_player_hit_time)
1414  03DD  E5          	push	hl
1415  03DE  CD 00 00    	call	_game_check_time
1416  03E1  F1          	pop	af
1417  03E2  F1          	pop	af
1418  03E3  7D          	ld	a,l
1419  03E4  B7          	or	a,a
1420  03E5  CA 29 05    	jp	Z, l_player_collision_00132
1421  03E8  21 00 00    	ld	hl,_sprite
1422  03EB  36 00       	ld	(hl),0x00
1423  03ED  3A 07 00    	ld	a,(_col + 7)
1424  03F0  32 00 00    	ld	(_s_col1),a
1425  03F3  3A 07 00    	ld	a,(_lin + 7)
1426  03F6  32 00 00    	ld	(_s_lin1),a
1427  03F9  C6 08       	add	a,0x08
1428  03FB  4F          	ld	c, a
1429  03FC  3A 00 00    	ld	a, (_s_col1)
1430  03FF  47          	ld	b,a
1431  0400  C5          	push	bc
1432  0401  CD 00 00    	call	_spr_calc_index
1433  0404  F1          	pop	af
1434  0405  7D          	ld	a,l
1435  0406  32 00 00    	ld	(_sprite_curr_index),a
1436  0409  4F          	ld	c,a
1437  040A  06 00       	ld	b,0x00
1438  040C  21 00 00    	ld	hl,_scr_map
1439  040F  09          	add	hl,bc
1440  0410  4E          	ld	c, (hl)
1441  0411  3E 2F       	ld	a,0x2f
1442  0413  91          	sub	a, c
1443  0414  30 3C       	jr	NC,l_player_collision_00128
1444  0416  79          	ld	a,c
1445  0417  FE 3A       	cp	a,0x3a
1446  0419  30 37       	jr	NC,l_player_collision_00128
1447  041B  D6 39       	sub	a,0x39
1448  041D  20 07       	jr	NZ,l_player_collision_00107
1449  041F  21 00 00    	ld	hl,_game_worldup
1450  0422  36 01       	ld	(hl),0x01
1451  0424  18 2C       	jr	l_player_collision_00128
1452  0426              l_player_collision_00107:
1453  0426  3A 00 00    	ld	a,(_game_god_mode)
1454  0429  B7          	or	a, a
1455  042A  20 16       	jr	NZ,l_player_collision_00102
1456  042C  3A 00 00    	ld	a,(_game_inmune)
1457  042F  B7          	or	a, a
1458  0430  20 10       	jr	NZ,l_player_collision_00102
1459  0432  3E 82       	ld	a,0x82
1460  0434  21 00 00    	ld	hl,_s_lin1
1461  0437  96          	sub	a, (hl)
1462  0438  30 08       	jr	NC,l_player_collision_00102
1463  043A  CD 65 10    	call	_player_lost_life
1464  043D  2E 00       	ld	l,0x00
1465  043F  C3 2B 05    	jp	l_player_collision_00133
1466  0442              l_player_collision_00102:
1467  0442  21 00 00    	ld	hl,_ay_effect_06
1468  0445  CD 00 00    	call	_ay_fx_play
1469  0448  2E 06       	ld	l,0x06
1470  044A  CD 00 00    	call	_zx_border_fastcall
1471  044D  2E 32       	ld	l,0x32
1472  044F  CD C9 11    	call	_player_hit
1473  0452              l_player_collision_00128:
1474  0452  21 00 00    	ld	hl,_sprite
1475  0455  7E          	ld	a, (hl)
1476  0456  D6 07       	sub	a,0x07
1477  0458  D2 29 05    	jp	NC, l_player_collision_00132
1478  045B  3E 00       	ld	a, +((_class) & 0xFF)
1479  045D  86          	add	a, (hl)
1480  045E  4F          	ld	c, a
1481  045F  3E 00       	ld	a, +((_class) / 256)
1482  0461  CE 00       	adc	a,0x00
1483  0463  47          	ld	b, a
1484  0464  0A          	ld	a, (bc)
1485  0465  B7          	or	a, a
1486  0466  CA 22 05    	jp	Z, l_player_collision_00127
1487  0469  4E          	ld	c,(hl)
1488  046A  06 00       	ld	b,0x00
1489  046C  21 00 00    	ld	hl,_col
1490  046F  09          	add	hl,bc
1491  0470  4E          	ld	c, (hl)
1492  0471  06 00       	ld	b,0x00
1493  0473  3A 00 00    	ld	a,(_s_col1)
1494  0476  5F          	ld	e,a
1495  0477  16 00       	ld	d,0x00
1496  0479  79          	ld	a, c
1497  047A  93          	sub	a, e
1498  047B  6F          	ld	l, a
1499  047C  78          	ld	a, b
1500  047D  9A          	sbc	a, d
1501  047E  67          	ld	h, a
1502  047F  CD 00 00    	call	_abs_fastcall
1503  0482  7D          	ld	a,l
1504  0483  D6 02       	sub	a,0x02
1505  0485  7C          	ld	a,h
1506  0486  17          	rla
1507  0487  3F          	ccf
1508  0488  1F          	rra
1509  0489  DE 80       	sbc	a,0x80
1510  048B  D2 22 05    	jp	NC, l_player_collision_00127
1511  048E  2A 00 00    	ld	hl,(_sprite)
1512  0491  26 00       	ld	h,0x00
1513  0493  01 00 00    	ld	bc,_lin
1514  0496  09          	add	hl,bc
1515  0497  4E          	ld	c,(hl)
1516  0498  06 00       	ld	b,0x00
1517  049A  3A 00 00    	ld	a,(_s_lin1)
1518  049D  5F          	ld	e,a
1519  049E  16 00       	ld	d,0x00
1520  04A0  79          	ld	a, c
1521  04A1  93          	sub	a, e
1522  04A2  6F          	ld	l, a
1523  04A3  78          	ld	a, b
1524  04A4  9A          	sbc	a, d
1525  04A5  67          	ld	h, a
1526  04A6  CD 00 00    	call	_abs_fastcall
1527  04A9  7D          	ld	a,l
1528  04AA  D6 0E       	sub	a,0x0e
1529  04AC  7C          	ld	a,h
1530  04AD  17          	rla
1531  04AE  3F          	ccf
1532  04AF  1F          	rra
1533  04B0  DE 80       	sbc	a,0x80
1534  04B2  30 6E       	jr	NC,l_player_collision_00127
1535  04B4  2A 00 00    	ld	hl,(_sprite)
1536  04B7  26 00       	ld	h,0x00
1537  04B9  01 00 00    	ld	bc,_class
1538  04BC  09          	add	hl,bc
1539  04BD  7E          	ld	a,(hl)
1540  04BE  FE 06       	cp	a,0x06
1541  04C0  20 1D       	jr	NZ,l_player_collision_00115
1542  04C2  21 00 00    	ld	hl,_player_vita
1543  04C5  7E          	ld	a, (hl)
1544  04C6  C6 19       	add	a,0x19
1545  04C8  77          	ld	(hl), a
1546  04C9  3A 00 00    	ld	a,(_player_max_vita)
1547  04CC  21 00 00    	ld	hl,_player_vita
1548  04CF  96          	sub	a, (hl)
1549  04D0  30 06       	jr	NC,l_player_collision_00113
1550  04D2  3A 00 00    	ld	a,(_player_max_vita)
1551  04D5  32 00 00    	ld	(_player_vita),a
1552  04D8              l_player_collision_00113:
1553  04D8  CD 2C 05    	call	_player_pick_mushroom
1554  04DB  2E 00       	ld	l,0x00
1555  04DD  18 4C       	jr	l_player_collision_00133
1556  04DF              l_player_collision_00115:
1557  04DF  FE 07       	cp	a,0x07
1558  04E1  20 1D       	jr	NZ,l_player_collision_00119
1559  04E3  21 00 00    	ld	hl,_player_mana
1560  04E6  7E          	ld	a, (hl)
1561  04E7  C6 19       	add	a,0x19
1562  04E9  77          	ld	(hl), a
1563  04EA  3A 00 00    	ld	a,(_player_max_mana)
1564  04ED  21 00 00    	ld	hl,_player_mana
1565  04F0  96          	sub	a, (hl)
1566  04F1  30 06       	jr	NC,l_player_collision_00117
1567  04F3  3A 00 00    	ld	a,(_player_max_mana)
1568  04F6  32 00 00    	ld	(_player_mana),a
1569  04F9              l_player_collision_00117:
1570  04F9  CD 2C 05    	call	_player_pick_mushroom
1571  04FC  2E 00       	ld	l,0x00
1572  04FE  18 2B       	jr	l_player_collision_00133
1573  0500              l_player_collision_00119:
1574  0500  D6 08       	sub	a,0x08
1575  0502  20 0A       	jr	NZ,l_player_collision_00121
1576  0504  CD 2C 05    	call	_player_pick_mushroom
1577  0507  CD 46 05    	call	_player_1up
1578  050A  2E 00       	ld	l,0x00
1579  050C  18 1D       	jr	l_player_collision_00133
1580  050E              l_player_collision_00121:
1581  050E  21 00 00    	ld	hl,_ay_effect_06
1582  0511  CD 00 00    	call	_ay_fx_play
1583  0514  2E 02       	ld	l,0x02
1584  0516  CD 00 00    	call	_zx_border_fastcall
1585  0519  2E 14       	ld	l,0x14
1586  051B  CD C9 11    	call	_player_hit
1587  051E  2E 01       	ld	l,0x01
1588  0520  18 09       	jr	l_player_collision_00133
1589  0522              l_player_collision_00127:
1590  0522  21 00 00    	ld	hl,_sprite
1591  0525  34          	inc	(hl)
1592  0526  C3 52 04    	jp	l_player_collision_00128
1593  0529              l_player_collision_00132:
1594  0529  2E 00       	ld	l,0x00
1595  052B              l_player_collision_00133:
1596  052B  C9          	ret
1597  052C              	SECTION code_compiler
1598  052C              ;	---------------------------------
1599  052C              ; Function player_pick_mushroom
1600  052C              ; ---------------------------------
1601  052C              _player_pick_mushroom:
1602  052C  21 00 00    	ld	hl,_ay_effect_12
1603  052F  CD 00 00    	call	_ay_fx_play
1604  0532  21 01 00    	ld	hl,0x0001
1605  0535  CD 18 0C    	call	_player_score_add
1606  0538  CD 00 00    	call	_game_update_stats
1607  053B  2A 00 00    	ld	hl,(_sprite)
1608  053E  CD 00 00    	call	_spr_destroy
1609  0541  21 00 00    	ld	hl,_game_mush_count
1610  0544  35          	dec	(hl)
1611  0545  C9          	ret
1612  0546              	SECTION code_compiler
1613  0546              ;	---------------------------------
1614  0546              ; Function player_1up
1615  0546              ; ---------------------------------
1616  0546              _player_1up:
1617  0546  21 00 00    	ld	hl,_player_lives
1618  0549  7E          	ld	a, (hl)
1619  054A  D6 FF       	sub	a,0xff
1620  054C  D0          	ret	NC
1621  054D  34          	inc	(hl)
1622  054E  CD 00 00    	call	_spr_flatten
1623  0551  21 00 00    	ld	hl,___str_0
1624  0554  E5          	push	hl
1625  0555  21 0C 0C    	ld	hl,0x0c0c
1626  0558  E5          	push	hl
1627  0559  CD 00 00    	call	_zx_print_str
1628  055C  AF          	xor	a, a
1629  055D  F5          	push	af
1630  055E  33          	inc	sp
1631  055F  21 19 00    	ld	hl,0x0019
1632  0562  E5          	push	hl
1633  0563  21 0C 15    	ld	hl,0x150c
1634  0566  E5          	push	hl
1635  0567  3E 0C       	ld	a,0x0c
1636  0569  F5          	push	af
1637  056A  33          	inc	sp
1638  056B  CD 00 00    	call	_game_colour_message
1639  056E  F1          	pop	af
1640  056F  F1          	pop	af
1641  0570  F1          	pop	af
1642  0571  CD 00 00    	call	_game_update_stats
1643  0574  CD 00 00    	call	_spr_unflatten
1644  0577  C9          	ret
1645  0578              	SECTION rodata_compiler
1646  0000              ___str_0:
1647  0000  31 20 55 50 21 
                        	DEFM "1 UP!"
1648  0005  00          	DEFB 0x00
1649  0006              	SECTION code_compiler
1650  0578              ;	---------------------------------
1651  0578              ; Function player_check_stairs_vertical
1652  0578              ; ---------------------------------
1653  0578              _player_check_stairs_vertical:
1654  0578  CD 00 00    	call	___sdcc_enter_ix
1655  057B  3B          	dec	sp
1656  057C  21 07 00    	ld	hl,+(_col + 0x0007)
1657  057F  4E          	ld	c, (hl)
1658  0580  CB 41       	bit	0, c
1659  0582  20 2F       	jr	NZ,l_player_check_stairs_vertical_00102
1660  0584  3A 07 00    	ld	a,(_lin + 0x0007)
1661  0587  DD 86 04    	add	a,(ix+4)
1662  058A  47          	ld	b, a
1663  058B  79          	ld	a, c
1664  058C  48          	ld	c,b
1665  058D  47          	ld	b,a
1666  058E  C5          	push	bc
1667  058F  CD 00 00    	call	_spr_calc_index
1668  0592  F1          	pop	af
1669  0593  7D          	ld	a,l
1670  0594  32 00 00    	ld	(_sprite_curr_index),a
1671  0597  4F          	ld	c,a
1672  0598  06 00       	ld	b,0x00
1673  059A  21 00 00    	ld	hl,_scr_map
1674  059D  09          	add	hl,bc
1675  059E  7E          	ld	a,(hl)
1676  059F  4F          	ld	c,a
1677  05A0  D6 44       	sub	a,0x44
1678  05A2  38 05       	jr	C,l_player_check_stairs_vertical_00110
1679  05A4  3E 47       	ld	a,0x47
1680  05A6  91          	sub	a, c
1681  05A7  30 04       	jr	NC,l_player_check_stairs_vertical_00111
1682  05A9              l_player_check_stairs_vertical_00110:
1683  05A9  1E 00       	ld	e,0x00
1684  05AB  18 02       	jr	l_player_check_stairs_vertical_00112
1685  05AD              l_player_check_stairs_vertical_00111:
1686  05AD  1E 01       	ld	e,0x01
1687  05AF              l_player_check_stairs_vertical_00112:
1688  05AF  0E 00       	ld	c,0x00
1689  05B1  18 57       	jr	l_player_check_stairs_vertical_00103
1690  05B3              l_player_check_stairs_vertical_00102:
1691  05B3  79          	ld	a, c
1692  05B4  DD 96 04    	sub	a,(ix+4)
1693  05B7  57          	ld	d, a
1694  05B8  01 07 00    	ld	bc,_lin+7
1695  05BB  0A          	ld	a, (bc)
1696  05BC  DD 86 04    	add	a,(ix+4)
1697  05BF  C5          	push	bc
1698  05C0  5F          	ld	e,a
1699  05C1  D5          	push	de
1700  05C2  CD 00 00    	call	_spr_calc_index
1701  05C5  F1          	pop	af
1702  05C6  C1          	pop	bc
1703  05C7  7D          	ld	a,l
1704  05C8  32 00 00    	ld	(_sprite_curr_index),a
1705  05CB  5F          	ld	e,a
1706  05CC  16 00       	ld	d,0x00
1707  05CE  21 00 00    	ld	hl,_scr_map
1708  05D1  19          	add	hl,de
1709  05D2  7E          	ld	a,(hl)
1710  05D3  5F          	ld	e,a
1711  05D4  D6 44       	sub	a,0x44
1712  05D6  38 05       	jr	C,l_player_check_stairs_vertical_00113
1713  05D8  3E 47       	ld	a,0x47
1714  05DA  93          	sub	a, e
1715  05DB  30 04       	jr	NC,l_player_check_stairs_vertical_00114
1716  05DD              l_player_check_stairs_vertical_00113:
1717  05DD  1E 00       	ld	e,0x00
1718  05DF  18 02       	jr	l_player_check_stairs_vertical_00115
1719  05E1              l_player_check_stairs_vertical_00114:
1720  05E1  1E 01       	ld	e,0x01
1721  05E3              l_player_check_stairs_vertical_00115:
1722  05E3  3A 07 00    	ld	a,(_col + 0x0007)
1723  05E6  DD 96 04    	sub	a,(ix+4)
1724  05E9  57          	ld	d, a
1725  05EA  0A          	ld	a, (bc)
1726  05EB  DD 86 04    	add	a,(ix+4)
1727  05EE  D5          	push	de
1728  05EF  5F          	ld	e,a
1729  05F0  D5          	push	de
1730  05F1  CD 00 00    	call	_spr_calc_index
1731  05F4  F1          	pop	af
1732  05F5  D1          	pop	de
1733  05F6  7D          	ld	a,l
1734  05F7  32 00 00    	ld	(_sprite_curr_index),a
1735  05FA  7B          	ld	a, e
1736  05FB  D6 44       	sub	a,0x44
1737  05FD  38 05       	jr	C,l_player_check_stairs_vertical_00116
1738  05FF  3E 47       	ld	a,0x47
1739  0601  93          	sub	a, e
1740  0602  30 04       	jr	NC,l_player_check_stairs_vertical_00117
1741  0604              l_player_check_stairs_vertical_00116:
1742  0604  0E 00       	ld	c,0x00
1743  0606  18 02       	jr	l_player_check_stairs_vertical_00118
1744  0608              l_player_check_stairs_vertical_00117:
1745  0608  0E 01       	ld	c,0x01
1746  060A              l_player_check_stairs_vertical_00118:
1747  060A              l_player_check_stairs_vertical_00103:
1748  060A  7B          	ld	a, e
1749  060B  B7          	or	a,a
1750  060C  20 03       	jr	NZ,l_player_check_stairs_vertical_00104
1751  060E  B1          	or	a,c
1752  060F  28 07       	jr	Z,l_player_check_stairs_vertical_00105
1753  0611              l_player_check_stairs_vertical_00104:
1754  0611  21 00 00    	ld	hl,_player_onstair
1755  0614  36 01       	ld	(hl),0x01
1756  0616  18 05       	jr	l_player_check_stairs_vertical_00108
1757  0618              l_player_check_stairs_vertical_00105:
1758  0618  21 00 00    	ld	hl,_player_onstair
1759  061B  36 00       	ld	(hl),0x00
1760  061D              l_player_check_stairs_vertical_00108:
1761  061D  33          	inc	sp
1762  061E  DD E1       	pop	ix
1763  0620  C9          	ret
1764  0621              	SECTION code_compiler
1765  0621              ;	---------------------------------
1766  0621              ; Function player_check_stairs
1767  0621              ; ---------------------------------
1768  0621              _player_check_stairs:
1769  0621  CD 00 00    	call	___sdcc_enter_ix
1770  0624  3B          	dec	sp
1771  0625  5D          	ld	e, l
1772  0626  3A 07 00    	ld	a,(_col + 0x0007)
1773  0629  83          	add	a, e
1774  062A  4F          	ld	c, a
1775  062B  21 07 00    	ld	hl,+(_lin + 0x0007)
1776  062E  46          	ld	b, (hl)
1777  062F  D5          	push	de
1778  0630  79          	ld	a, c
1779  0631  48          	ld	c,b
1780  0632  47          	ld	b,a
1781  0633  C5          	push	bc
1782  0634  CD 00 00    	call	_spr_calc_index
1783  0637  F1          	pop	af
1784  0638  D1          	pop	de
1785  0639  7D          	ld	a,l
1786  063A  32 00 00    	ld	(_sprite_curr_index),a
1787  063D  4F          	ld	c,a
1788  063E  06 00       	ld	b,0x00
1789  0640  21 00 00    	ld	hl,_scr_map
1790  0643  09          	add	hl,bc
1791  0644  7E          	ld	a,(hl)
1792  0645  4F          	ld	c,a
1793  0646  D6 44       	sub	a,0x44
1794  0648  38 05       	jr	C,l_player_check_stairs_00111
1795  064A  3E 47       	ld	a,0x47
1796  064C  91          	sub	a, c
1797  064D  30 04       	jr	NC,l_player_check_stairs_00112
1798  064F              l_player_check_stairs_00111:
1799  064F  0E 00       	ld	c,0x00
1800  0651  18 02       	jr	l_player_check_stairs_00113
1801  0653              l_player_check_stairs_00112:
1802  0653  0E 01       	ld	c,0x01
1803  0655              l_player_check_stairs_00113:
1804  0655  3A 07 00    	ld	a,(_col + 0x0007)
1805  0658  83          	add	a, e
1806  0659  57          	ld	d, a
1807  065A  3A 07 00    	ld	a,(_lin + 0x0007)
1808  065D  C6 0F       	add	a,0x0f
1809  065F  47          	ld	b, a
1810  0660  C5          	push	bc
1811  0661  58          	ld	e,b
1812  0662  D5          	push	de
1813  0663  CD 00 00    	call	_spr_calc_index
1814  0666  F1          	pop	af
1815  0667  C1          	pop	bc
1816  0668  7D          	ld	a,l
1817  0669  32 00 00    	ld	(_sprite_curr_index),a
1818  066C  5F          	ld	e,a
1819  066D  16 00       	ld	d,0x00
1820  066F  21 00 00    	ld	hl,_scr_map
1821  0672  19          	add	hl,de
1822  0673  7E          	ld	a,(hl)
1823  0674  47          	ld	b,a
1824  0675  D6 44       	sub	a,0x44
1825  0677  38 05       	jr	C,l_player_check_stairs_00114
1826  0679  3E 47       	ld	a,0x47
1827  067B  90          	sub	a, b
1828  067C  30 04       	jr	NC,l_player_check_stairs_00115
1829  067E              l_player_check_stairs_00114:
1830  067E  06 00       	ld	b,0x00
1831  0680  18 02       	jr	l_player_check_stairs_00116
1832  0682              l_player_check_stairs_00115:
1833  0682  06 01       	ld	b,0x01
1834  0684              l_player_check_stairs_00116:
1835  0684  79          	ld	a, c
1836  0685  B7          	or	a,a
1837  0686  20 03       	jr	NZ,l_player_check_stairs_00105
1838  0688  B0          	or	a,b
1839  0689  28 13       	jr	Z,l_player_check_stairs_00106
1840  068B              l_player_check_stairs_00105:
1841  068B  21 00 00    	ld	hl,_player_onstair
1842  068E  7E          	ld	a, (hl)
1843  068F  B7          	or	a, a
1844  0690  20 1D       	jr	NZ,l_player_check_stairs_00109
1845  0692  36 01       	ld	(hl),0x01
1846  0694  21 72 00    	ld	hl,0x0072
1847  0697  E5          	push	hl
1848  0698  CD F7 06    	call	_player_tile
1849  069B  F1          	pop	af
1850  069C  18 11       	jr	l_player_check_stairs_00109
1851  069E              l_player_check_stairs_00106:
1852  069E  21 00 00    	ld	hl,_player_onstair
1853  06A1  7E          	ld	a, (hl)
1854  06A2  B7          	or	a, a
1855  06A3  28 0A       	jr	Z,l_player_check_stairs_00109
1856  06A5  36 00       	ld	(hl),0x00
1857  06A7  21 60 08    	ld	hl,0x0860
1858  06AA  E5          	push	hl
1859  06AB  CD F7 06    	call	_player_tile
1860  06AE  F1          	pop	af
1861  06AF              l_player_check_stairs_00109:
1862  06AF  33          	inc	sp
1863  06B0  DD E1       	pop	ix
1864  06B2  C9          	ret
1865  06B3              	SECTION code_compiler
1866  06B3              ;	---------------------------------
1867  06B3              ; Function player_anim_tile
1868  06B3              ; ---------------------------------
1869  06B3              _player_anim_tile:
1870  06B3  21 07 00    	ld	hl,+(_tile + 0x0007)
1871  06B6  4E          	ld	c, (hl)
1872  06B7  21 07 00    	ld	hl,+(_colint + 0x0007)
1873  06BA  46          	ld	b, (hl)
1874  06BB  79          	ld	a, c
1875  06BC  80          	add	a, b
1876  06BD  32 00 00    	ld	(_s_tile1),a
1877  06C0  3A 00 00    	ld	a,(_player_onstair)
1878  06C3  B7          	or	a, a
1879  06C4  28 17       	jr	Z,l_player_anim_tile_00109
1880  06C6  21 00 00    	ld	hl,_player_anim_stair
1881  06C9  34          	inc	(hl)
1882  06CA  3E 01       	ld	a,0x01
1883  06CC  96          	sub	a, (hl)
1884  06CD  30 02       	jr	NC,l_player_anim_tile_00102
1885  06CF  36 00       	ld	(hl),0x00
1886  06D1              l_player_anim_tile_00102:
1887  06D1  79          	ld	a, c
1888  06D2  21 00 00    	ld	hl,_player_anim_stair
1889  06D5  86          	add	a, (hl)
1890  06D6  C6 04       	add	a,0x04
1891  06D8  32 00 00    	ld	(_s_tile1),a
1892  06DB  18 19       	jr	l_player_anim_tile_00111
1893  06DD              l_player_anim_tile_00109:
1894  06DD  3A 00 00    	ld	a,(_player_onfire)
1895  06E0  B7          	or	a, a
1896  06E1  28 13       	jr	Z,l_player_anim_tile_00111
1897  06E3  21 00 00    	ld	hl,_s_state
1898  06E6  CB 56       	bit	2, (hl)
1899  06E8  28 07       	jr	Z,l_player_anim_tile_00104
1900  06EA  21 00 00    	ld	hl,_s_tile1
1901  06ED  36 60       	ld	(hl),0x60
1902  06EF  18 05       	jr	l_player_anim_tile_00111
1903  06F1              l_player_anim_tile_00104:
1904  06F1  21 00 00    	ld	hl,_s_tile1
1905  06F4  36 68       	ld	(hl),0x68
1906  06F6              l_player_anim_tile_00111:
1907  06F6  C9          	ret
1908  06F7              	SECTION code_compiler
1909  06F7              ;	---------------------------------
1910  06F7              ; Function player_tile
1911  06F7              ; ---------------------------------
1912  06F7              _player_tile:
1913  06F7  CD 00 00    	call	___sdcc_enter_ix
1914  06FA  DD 7E 05    	ld	a,(ix+5)
1915  06FD  F5          	push	af
1916  06FE  33          	inc	sp
1917  06FF  2A FF FF    	ld	hl,(_sprite-1)
1918  0702  DD 6E 04    	ld	l,(ix+4)
1919  0705  E5          	push	hl
1920  0706  CD 00 00    	call	_spr_tile_dir
1921  0709  F1          	pop	af
1922  070A  33          	inc	sp
1923  070B  7D          	ld	a,l
1924  070C  32 07 00    	ld	((_tile + 0x0007)),a
1925  070F  DD E1       	pop	ix
1926  0711  C9          	ret
1927  0712              	SECTION code_compiler
1928  0712              ;	---------------------------------
1929  0712              ; Function player_check_map
1930  0712              ; ---------------------------------
1931  0712              _player_check_map:
1932  0712  21 07 00    	ld	hl,+(_col + 0x0007)
1933  0715  46          	ld	b, (hl)
1934  0716  21 07 00    	ld	hl,+(_lin + 0x0007)
1935  0719  4E          	ld	c, (hl)
1936  071A  C5          	push	bc
1937  071B  CD 00 00    	call	_spr_calc_index
1938  071E  F1          	pop	af
1939  071F  7D          	ld	a,l
1940  0720  32 00 00    	ld	(_sprite_curr_index),a
1941  0723  21 07 00    	ld	hl,+(_col + 0x0007)
1942  0726  4E          	ld	c, (hl)
1943  0727  3A 07 00    	ld	a,(_lin + 0x0007)
1944  072A  E6 0F       	and	a,0x0f
1945  072C  CB 41       	bit	0, c
1946  072E  20 17       	jr	NZ,l_player_check_map_00108
1947  0730  B7          	or	a, a
1948  0731  20 05       	jr	NZ,l_player_check_map_00102
1949  0733  CD 72 07    	call	_player_pick_item
1950  0736  18 39       	jr	l_player_check_map_00110
1951  0738              l_player_check_map_00102:
1952  0738  CD 72 07    	call	_player_pick_item
1953  073B  21 00 00    	ld	hl,_sprite_curr_index
1954  073E  7E          	ld	a, (hl)
1955  073F  C6 10       	add	a,0x10
1956  0741  77          	ld	(hl), a
1957  0742  CD 72 07    	call	_player_pick_item
1958  0745  18 2A       	jr	l_player_check_map_00110
1959  0747              l_player_check_map_00108:
1960  0747  B7          	or	a, a
1961  0748  20 0C       	jr	NZ,l_player_check_map_00105
1962  074A  CD 72 07    	call	_player_pick_item
1963  074D  21 00 00    	ld	hl,_sprite_curr_index
1964  0750  34          	inc	(hl)
1965  0751  CD 72 07    	call	_player_pick_item
1966  0754  18 1B       	jr	l_player_check_map_00110
1967  0756              l_player_check_map_00105:
1968  0756  CD 72 07    	call	_player_pick_item
1969  0759  21 00 00    	ld	hl,_sprite_curr_index
1970  075C  34          	inc	(hl)
1971  075D  CD 72 07    	call	_player_pick_item
1972  0760  21 00 00    	ld	hl,_sprite_curr_index
1973  0763  7E          	ld	a, (hl)
1974  0764  C6 0F       	add	a,0x0f
1975  0766  77          	ld	(hl), a
1976  0767  CD 72 07    	call	_player_pick_item
1977  076A  21 00 00    	ld	hl,_sprite_curr_index
1978  076D  34          	inc	(hl)
1979  076E  CD 72 07    	call	_player_pick_item
1980  0771              l_player_check_map_00110:
1981  0771  C9          	ret
1982  0772              	SECTION code_compiler
1983  0772              ;	---------------------------------
1984  0772              ; Function player_pick_item
1985  0772              ; ---------------------------------
1986  0772              _player_pick_item:
1987  0772  CD 00 00    	call	___sdcc_enter_ix
1988  0775  3B          	dec	sp
1989  0776  2A 00 00    	ld	hl,(_sprite_curr_index)
1990  0779  26 00       	ld	h,0x00
1991  077B  01 00 00    	ld	bc,_scr_map
1992  077E  09          	add	hl,bc
1993  077F  7E          	ld	a,(hl)
1994  0780  DD 77 FF    	ld	(ix-1),a
1995  0783  D6 24       	sub	a,0x24
1996  0785  DA 3F 09    	jp	C, l_player_pick_item_00131
1997  0788  3E 2F       	ld	a,0x2f
1998  078A  DD 96 FF    	sub	a,(ix-1)
1999  078D  DA 3F 09    	jp	C, l_player_pick_item_00131
2000  0790  CD 00 00    	call	_ay_reset
2001  0793  2A 00 00    	ld	hl,(_sprite_curr_index)
2002  0796  26 00       	ld	h,0x00
2003  0798  01 00 00    	ld	bc,_scr_map
2004  079B  09          	add	hl,bc
2005  079C  3A 00 00    	ld	a,(_sprite_curr_index)
2006  079F  5F          	ld	e,a
2007  07A0  16 00       	ld	d,0x00
2008  07A2  E5          	push	hl
2009  07A3  D5          	push	de
2010  07A4  CD 00 00    	call	_game_match_back
2011  07A7  F1          	pop	af
2012  07A8  C1          	pop	bc
2013  07A9  7D          	ld	a,l
2014  07AA  02          	ld	(bc), a
2015  07AB  2A 00 00    	ld	hl,(_sprite_curr_index)
2016  07AE  26 00       	ld	h,0x00
2017  07B0  CD 00 00    	call	_game_obj_set
2018  07B3  3A 00 00    	ld	a,(_sprite_curr_index)
2019  07B6  07          	rlca
2020  07B7  07          	rlca
2021  07B8  07          	rlca
2022  07B9  07          	rlca
2023  07BA  E6 0F       	and	a,0x0f
2024  07BC  07          	rlca
2025  07BD  07          	rlca
2026  07BE  07          	rlca
2027  07BF  07          	rlca
2028  07C0  E6 F0       	and	a,0xf0
2029  07C2  32 00 00    	ld	(_s_lin1),a
2030  07C5  3A 00 00    	ld	a,(_sprite_curr_index)
2031  07C8  E6 0F       	and	a,0x0f
2032  07CA  87          	add	a, a
2033  07CB  32 00 00    	ld	(_s_col1),a
2034  07CE  21 00 00    	ld	hl,0x0000
2035  07D1  E5          	push	hl
2036  07D2  21 84 03    	ld	hl,0x0384
2037  07D5  E5          	push	hl
2038  07D6  F5          	push	af
2039  07D7  33          	inc	sp
2040  07D8  3A 00 00    	ld	a,(_s_lin1)
2041  07DB  F5          	push	af
2042  07DC  33          	inc	sp
2043  07DD  CD 00 00    	call	_spr_add_anim
2044  07E0  F1          	pop	af
2045  07E1  F1          	pop	af
2046  07E2  F1          	pop	af
2047  07E3  DD 7E FF    	ld	a,(ix-1)
2048  07E6  D6 24       	sub	a,0x24
2049  07E8  DA 3F 09    	jp	C, l_player_pick_item_00131
2050  07EB  3E 2F       	ld	a,0x2f
2051  07ED  DD 96 FF    	sub	a,(ix-1)
2052  07F0  DA 3F 09    	jp	C, l_player_pick_item_00131
2053  07F3  DD 7E FF    	ld	a,(ix-1)
2054  07F6  C6 DC       	add	a,0xdc
2055  07F8  4F          	ld	c, a
2056  07F9  06 00       	ld	b,0x00
2057  07FB  21 02 08    	ld	hl,l_player_pick_item_00177
2058  07FE  09          	add	hl, bc
2059  07FF  09          	add	hl, bc
2060  0800  09          	add	hl, bc
2061  0801  E9          	jp	(hl)
2062  0802              l_player_pick_item_00177:
2063  0802  C3 26 08    	jp	l_player_pick_item_00101
2064  0805  C3 37 08    	jp	l_player_pick_item_00102
2065  0808  C3 48 08    	jp	l_player_pick_item_00103
2066  080B  C3 59 08    	jp	l_player_pick_item_00104
2067  080E  C3 6A 08    	jp	l_player_pick_item_00105
2068  0811  C3 9D 08    	jp	l_player_pick_item_00109
2069  0814  C3 BA 08    	jp	l_player_pick_item_00112
2070  0817  C3 D5 08    	jp	l_player_pick_item_00115
2071  081A  C3 F0 08    	jp	l_player_pick_item_00118
2072  081D  C3 0B 09    	jp	l_player_pick_item_00121
2073  0820  C3 26 09    	jp	l_player_pick_item_00124
2074  0823  C3 8E 08    	jp	l_player_pick_item_00108
2075  0826              l_player_pick_item_00101:
2076  0826  21 00 00    	ld	hl,_ay_effect_09
2077  0829  CD 00 00    	call	_ay_fx_play
2078  082C  21 00 00    	ld	hl,_player_keys
2079  082F  36 01       	ld	(hl),0x01
2080  0831  CD 00 00    	call	_game_update_stats
2081  0834  C3 3F 09    	jp	l_player_pick_item_00131
2082  0837              l_player_pick_item_00102:
2083  0837  21 00 00    	ld	hl,_ay_effect_09
2084  083A  CD 00 00    	call	_ay_fx_play
2085  083D  21 01 00    	ld	hl, +(_player_keys + 0x0001)
2086  0840  36 01       	ld	(hl),0x01
2087  0842  CD 00 00    	call	_game_update_stats
2088  0845  C3 3F 09    	jp	l_player_pick_item_00131
2089  0848              l_player_pick_item_00103:
2090  0848  21 00 00    	ld	hl,_ay_effect_09
2091  084B  CD 00 00    	call	_ay_fx_play
2092  084E  21 02 00    	ld	hl, +(_player_keys + 0x0002)
2093  0851  36 01       	ld	(hl),0x01
2094  0853  CD 00 00    	call	_game_update_stats
2095  0856  C3 3F 09    	jp	l_player_pick_item_00131
2096  0859              l_player_pick_item_00104:
2097  0859  21 00 00    	ld	hl,_ay_effect_09
2098  085C  CD 00 00    	call	_ay_fx_play
2099  085F  21 03 00    	ld	hl, +(_player_keys + 0x0003)
2100  0862  36 01       	ld	(hl),0x01
2101  0864  CD 00 00    	call	_game_update_stats
2102  0867  C3 3F 09    	jp	l_player_pick_item_00131
2103  086A              l_player_pick_item_00105:
2104  086A  21 00 00    	ld	hl,_ay_effect_10
2105  086D  CD 00 00    	call	_ay_fx_play
2106  0870  21 01 00    	ld	hl,0x0001
2107  0873  CD 18 0C    	call	_player_score_add
2108  0876  21 00 00    	ld	hl,_player_coins
2109  0879  7E          	ld	a,(hl)
2110  087A  3C          	inc	a
2111  087B  77          	ld	(hl),a
2112  087C  D6 64       	sub	a,0x64
2113  087E  20 08       	jr	NZ,l_player_pick_item_00107
2114  0880  CD 46 05    	call	_player_1up
2115  0883  21 00 00    	ld	hl,_player_coins
2116  0886  36 00       	ld	(hl),0x00
2117  0888              l_player_pick_item_00107:
2118  0888  CD 00 00    	call	_game_update_stats
2119  088B  C3 3F 09    	jp	l_player_pick_item_00131
2120  088E              l_player_pick_item_00108:
2121  088E  21 00 00    	ld	hl,_ay_effect_10
2122  0891  CD 00 00    	call	_ay_fx_play
2123  0894  21 0A 00    	ld	hl,0x000a
2124  0897  CD 18 0C    	call	_player_score_add
2125  089A  C3 3F 09    	jp	l_player_pick_item_00131
2126  089D              l_player_pick_item_00109:
2127  089D  21 00 00    	ld	hl,_ay_effect_09
2128  08A0  CD 00 00    	call	_ay_fx_play
2129  08A3  21 00 00    	ld	hl,_player_str
2130  08A6  34          	inc	(hl)
2131  08A7  21 00 00    	ld	hl,_player_max_vita
2132  08AA  7E          	ld	a, (hl)
2133  08AB  D6 C8       	sub	a,0xc8
2134  08AD  D2 3F 09    	jp	NC, l_player_pick_item_00131
2135  08B0  7E          	ld	a, (hl)
2136  08B1  C6 0A       	add	a,0x0a
2137  08B3  77          	ld	(hl), a
2138  08B4  CD 00 00    	call	_game_update_stats
2139  08B7  C3 3F 09    	jp	l_player_pick_item_00131
2140  08BA              l_player_pick_item_00112:
2141  08BA  21 00 00    	ld	hl,_ay_effect_09
2142  08BD  CD 00 00    	call	_ay_fx_play
2143  08C0  21 00 00    	ld	hl,_player_str
2144  08C3  34          	inc	(hl)
2145  08C4  21 00 00    	ld	hl,_player_max_vita
2146  08C7  7E          	ld	a, (hl)
2147  08C8  D6 C8       	sub	a,0xc8
2148  08CA  30 73       	jr	NC,l_player_pick_item_00131
2149  08CC  7E          	ld	a, (hl)
2150  08CD  C6 0A       	add	a,0x0a
2151  08CF  77          	ld	(hl), a
2152  08D0  CD 00 00    	call	_game_update_stats
2153  08D3  18 6A       	jr	l_player_pick_item_00131
2154  08D5              l_player_pick_item_00115:
2155  08D5  21 00 00    	ld	hl,_ay_effect_09
2156  08D8  CD 00 00    	call	_ay_fx_play
2157  08DB  21 00 00    	ld	hl,_player_str
2158  08DE  34          	inc	(hl)
2159  08DF  21 00 00    	ld	hl,_player_max_vita
2160  08E2  7E          	ld	a, (hl)
2161  08E3  D6 C8       	sub	a,0xc8
2162  08E5  30 58       	jr	NC,l_player_pick_item_00131
2163  08E7  7E          	ld	a, (hl)
2164  08E8  C6 0A       	add	a,0x0a
2165  08EA  77          	ld	(hl), a
2166  08EB  CD 00 00    	call	_game_update_stats
2167  08EE  18 4F       	jr	l_player_pick_item_00131
2168  08F0              l_player_pick_item_00118:
2169  08F0  21 00 00    	ld	hl,_ay_effect_09
2170  08F3  CD 00 00    	call	_ay_fx_play
2171  08F6  21 00 00    	ld	hl,_player_int
2172  08F9  34          	inc	(hl)
2173  08FA  21 00 00    	ld	hl,_player_max_mana
2174  08FD  7E          	ld	a, (hl)
2175  08FE  D6 C8       	sub	a,0xc8
2176  0900  30 3D       	jr	NC,l_player_pick_item_00131
2177  0902  7E          	ld	a, (hl)
2178  0903  C6 0A       	add	a,0x0a
2179  0905  77          	ld	(hl), a
2180  0906  CD 00 00    	call	_game_update_stats
2181  0909  18 34       	jr	l_player_pick_item_00131
2182  090B              l_player_pick_item_00121:
2183  090B  21 00 00    	ld	hl,_ay_effect_09
2184  090E  CD 00 00    	call	_ay_fx_play
2185  0911  21 00 00    	ld	hl,_player_int
2186  0914  34          	inc	(hl)
2187  0915  21 00 00    	ld	hl,_player_max_mana
2188  0918  7E          	ld	a, (hl)
2189  0919  D6 C8       	sub	a,0xc8
2190  091B  30 22       	jr	NC,l_player_pick_item_00131
2191  091D  7E          	ld	a, (hl)
2192  091E  C6 0A       	add	a,0x0a
2193  0920  77          	ld	(hl), a
2194  0921  CD 00 00    	call	_game_update_stats
2195  0924  18 19       	jr	l_player_pick_item_00131
2196  0926              l_player_pick_item_00124:
2197  0926  21 00 00    	ld	hl,_ay_effect_09
2198  0929  CD 00 00    	call	_ay_fx_play
2199  092C  21 00 00    	ld	hl,_player_int
2200  092F  34          	inc	(hl)
2201  0930  21 00 00    	ld	hl,_player_max_mana
2202  0933  7E          	ld	a, (hl)
2203  0934  D6 C8       	sub	a,0xc8
2204  0936  30 07       	jr	NC,l_player_pick_item_00131
2205  0938  7E          	ld	a, (hl)
2206  0939  C6 0A       	add	a,0x0a
2207  093B  77          	ld	(hl), a
2208  093C  CD 00 00    	call	_game_update_stats
2209  093F              l_player_pick_item_00131:
2210  093F  33          	inc	sp
2211  0940  DD E1       	pop	ix
2212  0942  C9          	ret
2213  0943              	SECTION code_compiler
2214  0943              ;	---------------------------------
2215  0943              ; Function player_hit_platform
2216  0943              ; ---------------------------------
2217  0943              _player_hit_platform:
2218  0943  CD 00 00    	call	___sdcc_enter_ix
2219  0946  F5          	push	af
2220  0947  3A 00 00    	ld	a,(_player_hit_lin)
2221  094A  B7          	or	a, a
2222  094B  C2 E3 0B    	jp	NZ, l_player_hit_platform_00145
2223  094E  21 07 00    	ld	hl,+(_lin + 0x0007)
2224  0951  4E          	ld	c, (hl)
2225  0952  3E 10       	ld	a,0x10
2226  0954  91          	sub	a, c
2227  0955  D2 E3 0B    	jp	NC, l_player_hit_platform_00145
2228  0958  01 00 00    	ld	bc,_scr_map
2229  095B  2A 00 00    	ld	hl,(_index1)
2230  095E  09          	add	hl,bc
2231  095F  7E          	ld	a,(hl)
2232  0960  D6 45       	sub	a,0x45
2233  0962  DA E3 0B    	jp	C, l_player_hit_platform_00145
2234  0965  2A 00 00    	ld	hl,(_curr_time)
2235  0968  22 0E 00    	ld	(_spr_timer + 0x000e),hl
2236  096B  2A 07 00    	ld	hl,(_lin + 0x0007)
2237  096E  26 00       	ld	h,0x00
2238  0970  01 F8 FF    	ld	bc,0xfff8
2239  0973  09          	add	hl,bc
2240  0974  EB          	ex	de,hl
2241  0975  06 04       	ld	b,0x04
2242  0977              l_player_hit_platform_00250:
2243  0977  CB 2A       	sra	d
2244  0979  CB 1B       	rr	e
2245  097B  10 FA       	djnz	l_player_hit_platform_00250
2246  097D  7B          	ld	a, e
2247  097E  07          	rlca
2248  097F  07          	rlca
2249  0980  07          	rlca
2250  0981  07          	rlca
2251  0982  E6 F0       	and	a,0xf0
2252  0984  C6 08       	add	a,0x08
2253  0986  32 00 00    	ld	(_player_hit_lin),a
2254  0989  21 07 00    	ld	hl,+(_col + 0x0007)
2255  098C  4E          	ld	c, (hl)
2256  098D  CB 41       	bit	0, c
2257  098F  20 06       	jr	NZ,l_player_hit_platform_00111
2258  0991  21 00 00    	ld	hl,_player_hit_col
2259  0994  71          	ld	(hl), c
2260  0995  18 2D       	jr	l_player_hit_platform_00112
2261  0997              l_player_hit_platform_00111:
2262  0997  21 07 00    	ld	hl,+(_state + 0x0007)
2263  099A  5E          	ld	e, (hl)
2264  099B  41          	ld	b, c
2265  099C  04          	inc	b
2266  099D  0D          	dec	c
2267  099E  CB 5B       	bit	3, e
2268  09A0  28 12       	jr	Z,l_player_hit_platform_00108
2269  09A2  3A 00 00    	ld	a,(_g_player_hit_right)
2270  09A5  B7          	or	a, a
2271  09A6  28 06       	jr	Z,l_player_hit_platform_00102
2272  09A8  21 00 00    	ld	hl,_player_hit_col
2273  09AB  70          	ld	(hl), b
2274  09AC  18 16       	jr	l_player_hit_platform_00112
2275  09AE              l_player_hit_platform_00102:
2276  09AE  21 00 00    	ld	hl,_player_hit_col
2277  09B1  71          	ld	(hl), c
2278  09B2  18 10       	jr	l_player_hit_platform_00112
2279  09B4              l_player_hit_platform_00108:
2280  09B4  3A 00 00    	ld	a,(_g_player_hit_left)
2281  09B7  B7          	or	a, a
2282  09B8  28 06       	jr	Z,l_player_hit_platform_00105
2283  09BA  21 00 00    	ld	hl,_player_hit_col
2284  09BD  71          	ld	(hl), c
2285  09BE  18 04       	jr	l_player_hit_platform_00112
2286  09C0              l_player_hit_platform_00105:
2287  09C0  21 00 00    	ld	hl,_player_hit_col
2288  09C3  70          	ld	(hl), b
2289  09C4              l_player_hit_platform_00112:
2290  09C4  2A 00 00    	ld	hl,(_index1)
2291  09C7  01 00 00    	ld	bc,_scr_map
2292  09CA  09          	add	hl,bc
2293  09CB  7E          	ld	a,(hl)
2294  09CC  FE 4D       	cp	a,0x4d
2295  09CE  20 43       	jr	NZ,l_player_hit_platform_00114
2296  09D0  E5          	push	hl
2297  09D1  2A 00 00    	ld	hl,(_index1)
2298  09D4  E5          	push	hl
2299  09D5  CD 00 00    	call	_game_match_back
2300  09D8  F1          	pop	af
2301  09D9  C1          	pop	bc
2302  09DA  7D          	ld	a,l
2303  09DB  02          	ld	(bc), a
2304  09DC  2A 00 00    	ld	hl,(_index1)
2305  09DF  CD 00 00    	call	_game_obj_set
2306  09E2  21 00 00    	ld	hl,_index1
2307  09E5  7E          	ld	a, (hl)
2308  09E6  E6 0F       	and	a,0x0f
2309  09E8  87          	add	a, a
2310  09E9  4F          	ld	c, a
2311  09EA  23          	inc	hl
2312  09EB  56          	ld	d,(hl)
2313  09EC  2B          	dec	hl
2314  09ED  7E          	ld	a, (hl)
2315  09EE  06 04       	ld	b,0x04
2316  09F0              l_player_hit_platform_00256:
2317  09F0  CB 3A       	srl	d
2318  09F2  1F          	rra
2319  09F3  10 FB       	djnz	l_player_hit_platform_00256
2320  09F5  07          	rlca
2321  09F6  07          	rlca
2322  09F7  07          	rlca
2323  09F8  07          	rlca
2324  09F9  E6 F0       	and	a,0xf0
2325  09FB  47          	ld	b, a
2326  09FC  21 00 00    	ld	hl,0x0000
2327  09FF  E5          	push	hl
2328  0A00  21 87 03    	ld	hl,0x0387
2329  0A03  E5          	push	hl
2330  0A04  79          	ld	a, c
2331  0A05  48          	ld	c,b
2332  0A06  47          	ld	b,a
2333  0A07  C5          	push	bc
2334  0A08  CD 00 00    	call	_spr_add_anim
2335  0A0B  F1          	pop	af
2336  0A0C  F1          	pop	af
2337  0A0D  F1          	pop	af
2338  0A0E  2E 01       	ld	l,0x01
2339  0A10  C3 E5 0B    	jp	l_player_hit_platform_00148
2340  0A13              l_player_hit_platform_00114:
2341  0A13  FE 5C       	cp	a,0x5c
2342  0A15  28 05       	jr	Z,l_player_hit_platform_00141
2343  0A17  D6 5D       	sub	a,0x5d
2344  0A19  C2 D4 0B    	jp	NZ,l_player_hit_platform_00142
2345  0A1C              l_player_hit_platform_00141:
2346  0A1C  21 00 00    	ld	hl,_tmp0
2347  0A1F  36 00       	ld	(hl),0x00
2348  0A21  3A 00 00    	ld	a,(_game_boss)
2349  0A24  B7          	or	a, a
2350  0A25  28 0B       	jr	Z,l_player_hit_platform_00174
2351  0A27  3A 00 00    	ld	a,(_game_mush_count)
2352  0A2A  B7          	or	a, a
2353  0A2B  28 05       	jr	Z,l_player_hit_platform_00174
2354  0A2D  2E 00       	ld	l,0x00
2355  0A2F  C3 E5 0B    	jp	l_player_hit_platform_00148
2356  0A32              l_player_hit_platform_00174:
2357  0A32              l_player_hit_platform_00138:
2358  0A32  21 00 00    	ld	hl,_tmp0
2359  0A35  7E          	ld	a, (hl)
2360  0A36  D6 07       	sub	a,0x07
2361  0A38  D2 D4 0B    	jp	NC, l_player_hit_platform_00142
2362  0A3B  4E          	ld	c,(hl)
2363  0A3C  06 00       	ld	b,0x00
2364  0A3E  21 00 00    	ld	hl,_mush_index
2365  0A41  09          	add	hl,bc
2366  0A42  4E          	ld	c, (hl)
2367  0A43  06 00       	ld	b,0x00
2368  0A45  2A 00 00    	ld	hl,(_index1)
2369  0A48  AF          	xor	a,a
2370  0A49  ED 42       	sbc	hl,bc
2371  0A4B  C2 CD 0B    	jp	NZ,l_player_hit_platform_00137
2372  0A4E  3A 07 00    	ld	a,(_lin + 0x0007)
2373  0A51  07          	rlca
2374  0A52  07          	rlca
2375  0A53  07          	rlca
2376  0A54  07          	rlca
2377  0A55  E6 0F       	and	a,0x0f
2378  0A57  07          	rlca
2379  0A58  07          	rlca
2380  0A59  07          	rlca
2381  0A5A  07          	rlca
2382  0A5B  E6 F0       	and	a,0xf0
2383  0A5D  C6 E0       	add	a,0xe0
2384  0A5F  32 00 00    	ld	(_s_lin1),a
2385  0A62  3A 07 00    	ld	a,(_col + 0x0007)
2386  0A65  CB 3F       	srl	a
2387  0A67  87          	add	a, a
2388  0A68  32 00 00    	ld	(_s_col1),a
2389  0A6B  21 00 00    	ld	hl,_tmp
2390  0A6E  36 00       	ld	(hl),0x00
2391  0A70              l_player_hit_platform_00120:
2392  0A70  21 00 00    	ld	hl,_tmp
2393  0A73  7E          	ld	a, (hl)
2394  0A74  D6 07       	sub	a,0x07
2395  0A76  30 1C       	jr	NC,l_player_hit_platform_00122
2396  0A78  4E          	ld	c,(hl)
2397  0A79  06 00       	ld	b,0x00
2398  0A7B  21 00 00    	ld	hl,_mush_index
2399  0A7E  09          	add	hl,bc
2400  0A7F  4E          	ld	c, (hl)
2401  0A80  06 00       	ld	b,0x00
2402  0A82  21 00 00    	ld	hl,_index1
2403  0A85  7E          	ld	a, (hl)
2404  0A86  91          	sub	a, c
2405  0A87  20 05       	jr	NZ,l_player_hit_platform_00262
2406  0A89  23          	inc	hl
2407  0A8A  7E          	ld	a, (hl)
2408  0A8B  90          	sub	a, b
2409  0A8C  28 06       	jr	Z,l_player_hit_platform_00122
2410  0A8E              l_player_hit_platform_00262:
2411  0A8E  21 00 00    	ld	hl,_tmp
2412  0A91  34          	inc	(hl)
2413  0A92  18 DC       	jr	l_player_hit_platform_00120
2414  0A94              l_player_hit_platform_00122:
2415  0A94  21 00 00    	ld	hl,_ay_effect_07
2416  0A97  CD 00 00    	call	_ay_fx_play
2417  0A9A  2A 00 00    	ld	hl,(_tmp)
2418  0A9D  26 00       	ld	h,0x00
2419  0A9F  01 00 00    	ld	bc,_mush_class
2420  0AA2  09          	add	hl,bc
2421  0AA3  7E          	ld	a,(hl)
2422  0AA4  FE 78       	cp	a,0x78
2423  0AA6  28 18       	jr	Z,l_player_hit_platform_00123
2424  0AA8  FE 79       	cp	a,0x79
2425  0AAA  28 2F       	jr	Z,l_player_hit_platform_00124
2426  0AAC  FE 7A       	cp	a,0x7a
2427  0AAE  28 5F       	jr	Z,l_player_hit_platform_00126
2428  0AB0  FE 7B       	cp	a,0x7b
2429  0AB2  28 41       	jr	Z,l_player_hit_platform_00125
2430  0AB4  FE 7C       	cp	a,0x7c
2431  0AB6  CA 43 0B    	jp	Z,l_player_hit_platform_00128
2432  0AB9  D6 7D       	sub	a,0x7d
2433  0ABB  28 6C       	jr	Z,l_player_hit_platform_00127
2434  0ABD  C3 5B 0B    	jp	l_player_hit_platform_00129
2435  0AC0              l_player_hit_platform_00123:
2436  0AC0  2E 02       	ld	l,0x02
2437  0AC2  CD 00 00    	call	_zx_border_fastcall
2438  0AC5  3A 00 00    	ld	a,(_s_col1)
2439  0AC8  21 06 FF    	ld	hl,0xff06
2440  0ACB  E5          	push	hl
2441  0ACC  F5          	push	af
2442  0ACD  33          	inc	sp
2443  0ACE  3A 00 00    	ld	a,(_s_lin1)
2444  0AD1  F5          	push	af
2445  0AD2  33          	inc	sp
2446  0AD3  CD 00 00    	call	_enemy_init
2447  0AD6  F1          	pop	af
2448  0AD7  F1          	pop	af
2449  0AD8  C3 5B 0B    	jp	l_player_hit_platform_00129
2450  0ADB              l_player_hit_platform_00124:
2451  0ADB  2E 02       	ld	l,0x02
2452  0ADD  CD 00 00    	call	_zx_border_fastcall
2453  0AE0  3A 00 00    	ld	a,(_s_col1)
2454  0AE3  21 06 01    	ld	hl,0x0106
2455  0AE6  E5          	push	hl
2456  0AE7  F5          	push	af
2457  0AE8  33          	inc	sp
2458  0AE9  3A 00 00    	ld	a,(_s_lin1)
2459  0AEC  F5          	push	af
2460  0AED  33          	inc	sp
2461  0AEE  CD 00 00    	call	_enemy_init
2462  0AF1  F1          	pop	af
2463  0AF2  F1          	pop	af
2464  0AF3  18 66       	jr	l_player_hit_platform_00129
2465  0AF5              l_player_hit_platform_00125:
2466  0AF5  2E 01       	ld	l,0x01
2467  0AF7  CD 00 00    	call	_zx_border_fastcall
2468  0AFA  3A 00 00    	ld	a,(_s_col1)
2469  0AFD  21 07 01    	ld	hl,0x0107
2470  0B00  E5          	push	hl
2471  0B01  F5          	push	af
2472  0B02  33          	inc	sp
2473  0B03  3A 00 00    	ld	a,(_s_lin1)
2474  0B06  F5          	push	af
2475  0B07  33          	inc	sp
2476  0B08  CD 00 00    	call	_enemy_init
2477  0B0B  F1          	pop	af
2478  0B0C  F1          	pop	af
2479  0B0D  18 4C       	jr	l_player_hit_platform_00129
2480  0B0F              l_player_hit_platform_00126:
2481  0B0F  2E 01       	ld	l,0x01
2482  0B11  CD 00 00    	call	_zx_border_fastcall
2483  0B14  3A 00 00    	ld	a,(_s_col1)
2484  0B17  21 07 FF    	ld	hl,0xff07
2485  0B1A  E5          	push	hl
2486  0B1B  F5          	push	af
2487  0B1C  33          	inc	sp
2488  0B1D  3A 00 00    	ld	a,(_s_lin1)
2489  0B20  F5          	push	af
2490  0B21  33          	inc	sp
2491  0B22  CD 00 00    	call	_enemy_init
2492  0B25  F1          	pop	af
2493  0B26  F1          	pop	af
2494  0B27  18 32       	jr	l_player_hit_platform_00129
2495  0B29              l_player_hit_platform_00127:
2496  0B29  2E 04       	ld	l,0x04
2497  0B2B  CD 00 00    	call	_zx_border_fastcall
2498  0B2E  3A 00 00    	ld	a,(_s_col1)
2499  0B31  21 08 01    	ld	hl,0x0108
2500  0B34  E5          	push	hl
2501  0B35  F5          	push	af
2502  0B36  33          	inc	sp
2503  0B37  3A 00 00    	ld	a,(_s_lin1)
2504  0B3A  F5          	push	af
2505  0B3B  33          	inc	sp
2506  0B3C  CD 00 00    	call	_enemy_init
2507  0B3F  F1          	pop	af
2508  0B40  F1          	pop	af
2509  0B41  18 18       	jr	l_player_hit_platform_00129
2510  0B43              l_player_hit_platform_00128:
2511  0B43  2E 04       	ld	l,0x04
2512  0B45  CD 00 00    	call	_zx_border_fastcall
2513  0B48  3A 00 00    	ld	a,(_s_col1)
2514  0B4B  21 08 FF    	ld	hl,0xff08
2515  0B4E  E5          	push	hl
2516  0B4F  F5          	push	af
2517  0B50  33          	inc	sp
2518  0B51  3A 00 00    	ld	a,(_s_lin1)
2519  0B54  F5          	push	af
2520  0B55  33          	inc	sp
2521  0B56  CD 00 00    	call	_enemy_init
2522  0B59  F1          	pop	af
2523  0B5A  F1          	pop	af
2524  0B5B              l_player_hit_platform_00129:
2525  0B5B  21 00 00    	ld	hl,_game_mush_count
2526  0B5E  34          	inc	(hl)
2527  0B5F  3A 00 00    	ld	a,(_game_boss)
2528  0B62  B7          	or	a, a
2529  0B63  20 68       	jr	NZ,l_player_hit_platform_00137
2530  0B65  3A 00 00    	ld	a,(_index1)
2531  0B68  C6 F0       	add	a,0xf0
2532  0B6A  32 00 00    	ld	(_index0),a
2533  0B6D  3A 01 00    	ld	a,(_index1 + 1)
2534  0B70  CE FF       	adc	a,0xff
2535  0B72  21 01 00    	ld	hl,_index0 + 1
2536  0B75  77          	ld	(hl), a
2537  0B76  3E 00       	ld	a, +((_scr_map) & 0xFF)
2538  0B78  2B          	dec	hl
2539  0B79  86          	add	a, (hl)
2540  0B7A  4F          	ld	c, a
2541  0B7B  3E 00       	ld	a, +((_scr_map) / 256)
2542  0B7D  23          	inc	hl
2543  0B7E  8E          	adc	a, (hl)
2544  0B7F  47          	ld	b, a
2545  0B80  C5          	push	bc
2546  0B81  46          	ld	b,(hl)
2547  0B82  2B          	dec	hl
2548  0B83  4E          	ld	c,(hl)
2549  0B84  C5          	push	bc
2550  0B85  CD 00 00    	call	_game_match_back
2551  0B88  F1          	pop	af
2552  0B89  C1          	pop	bc
2553  0B8A  7D          	ld	a,l
2554  0B8B  02          	ld	(bc), a
2555  0B8C  3E 00       	ld	a, +((_scr_map) & 0xFF)
2556  0B8E  21 00 00    	ld	hl,_index1
2557  0B91  86          	add	a, (hl)
2558  0B92  DD 77 FE    	ld	(ix-2),a
2559  0B95  3E 00       	ld	a, +((_scr_map) / 256)
2560  0B97  23          	inc	hl
2561  0B98  8E          	adc	a, (hl)
2562  0B99  DD 77 FF    	ld	(ix-1),a
2563  0B9C  E1          	pop	hl
2564  0B9D  7E          	ld	a,(hl)
2565  0B9E  E5          	push	hl
2566  0B9F  FE 5C       	cp	a,0x5c
2567  0BA1  28 04       	jr	Z,l_player_hit_platform_00130
2568  0BA3  D6 5D       	sub	a,0x5d
2569  0BA5  20 06       	jr	NZ,l_player_hit_platform_00131
2570  0BA7              l_player_hit_platform_00130:
2571  0BA7  E1          	pop	hl
2572  0BA8  E5          	push	hl
2573  0BA9  36 4F       	ld	(hl),0x4f
2574  0BAB  18 04       	jr	l_player_hit_platform_00132
2575  0BAD              l_player_hit_platform_00131:
2576  0BAD  E1          	pop	hl
2577  0BAE  E5          	push	hl
2578  0BAF  36 54       	ld	(hl),0x54
2579  0BB1              l_player_hit_platform_00132:
2580  0BB1  2A 00 00    	ld	hl,(_index1)
2581  0BB4  01 F0 FF    	ld	bc,0xfff0
2582  0BB7  09          	add	hl,bc
2583  0BB8  CD 00 00    	call	_game_obj_set
2584  0BBB  3A 00 00    	ld	a,(_s_lin1)
2585  0BBE  C6 10       	add	a,0x10
2586  0BC0  4F          	ld	c, a
2587  0BC1  3A 00 00    	ld	a, (_s_col1)
2588  0BC4  47          	ld	b,a
2589  0BC5  C5          	push	bc
2590  0BC6  3E 4F       	ld	a,0x4f
2591  0BC8  F5          	push	af
2592  0BC9  33          	inc	sp
2593  0BCA  CD 00 00    	call	_NIRVANAP_drawT_callee
2594  0BCD              l_player_hit_platform_00137:
2595  0BCD  21 00 00    	ld	hl,_tmp0
2596  0BD0  34          	inc	(hl)
2597  0BD1  C3 32 0A    	jp	l_player_hit_platform_00138
2598  0BD4              l_player_hit_platform_00142:
2599  0BD4  21 00 00    	ld	hl,_ay_effect_02
2600  0BD7  CD 00 00    	call	_ay_fx_play
2601  0BDA  2E 01       	ld	l,0x01
2602  0BDC  CD 00 00    	call	_spr_brick_anim
2603  0BDF  2E 01       	ld	l,0x01
2604  0BE1  18 02       	jr	l_player_hit_platform_00148
2605  0BE3              l_player_hit_platform_00145:
2606  0BE3  2E 00       	ld	l,0x00
2607  0BE5              l_player_hit_platform_00148:
2608  0BE5  F1          	pop	af
2609  0BE6  DD E1       	pop	ix
2610  0BE8  C9          	ret
2611  0BE9              	SECTION code_compiler
2612  0BE9              ;	---------------------------------
2613  0BE9              ; Function player_hit_platform_clear
2614  0BE9              ; ---------------------------------
2615  0BE9              _player_hit_platform_clear:
2616  0BE9  01 04 00    	ld	bc,0x0004
2617  0BEC  C5          	push	bc
2618  0BED  2A 0E 00    	ld	hl,(_spr_timer + 0x000e)
2619  0BF0  E5          	push	hl
2620  0BF1  CD 00 00    	call	_game_check_time
2621  0BF4  F1          	pop	af
2622  0BF5  F1          	pop	af
2623  0BF6  7D          	ld	a, l
2624  0BF7  B7          	or	a, a
2625  0BF8  C8          	ret	Z
2626  0BF9  2A FF FF    	ld	hl,(_player_hit_col - 1)
2627  0BFC  3A 00 00    	ld	a,(_player_hit_lin)
2628  0BFF  6F          	ld	l,a
2629  0C00  E5          	push	hl
2630  0C01  CD 00 00    	call	_spr_calc_index
2631  0C04  F1          	pop	af
2632  0C05  22 00 00    	ld	(_index1),hl
2633  0C08  2E 00       	ld	l,0x00
2634  0C0A  CD 00 00    	call	_spr_brick_anim
2635  0C0D  21 00 00    	ld	hl,_player_hit_lin
2636  0C10  36 00       	ld	(hl),0x00
2637  0C12  21 00 00    	ld	hl,_player_hit_col
2638  0C15  36 00       	ld	(hl),0x00
2639  0C17  C9          	ret
2640  0C18              	SECTION code_compiler
2641  0C18              ;	---------------------------------
2642  0C18              ; Function player_score_add
2643  0C18              ; ---------------------------------
2644  0C18              _player_score_add:
2645  0C18  ED 4B 00 00 	ld	bc,(_player_score)
2646  0C1C  09          	add	hl,bc
2647  0C1D  22 00 00    	ld	(_player_score),hl
2648  0C20  21 00 00    	ld	hl,_player_lvl
2649  0C23  7E          	ld	a, (hl)
2650  0C24  D6 14       	sub	a,0x14
2651  0C26  30 42       	jr	NC,l_player_score_add_00104
2652  0C28  01 00 00    	ld	bc,_player_lvl_table+0
2653  0C2B  6E          	ld	l,(hl)
2654  0C2C  26 00       	ld	h,0x00
2655  0C2E  29          	add	hl, hl
2656  0C2F  09          	add	hl, bc
2657  0C30  4E          	ld	c, (hl)
2658  0C31  23          	inc	hl
2659  0C32  46          	ld	b, (hl)
2660  0C33  21 00 00    	ld	hl,_player_score
2661  0C36  7E          	ld	a, (hl)
2662  0C37  91          	sub	a, c
2663  0C38  23          	inc	hl
2664  0C39  7E          	ld	a, (hl)
2665  0C3A  98          	sbc	a, b
2666  0C3B  38 2D       	jr	C,l_player_score_add_00104
2667  0C3D  21 00 00    	ld	hl,_player_lvl
2668  0C40  34          	inc	(hl)
2669  0C41  CD 00 00    	call	_game_update_stats
2670  0C44  CD 00 00    	call	_spr_flatten
2671  0C47  21 06 00    	ld	hl,___str_1
2672  0C4A  E5          	push	hl
2673  0C4B  21 0C 0C    	ld	hl,0x0c0c
2674  0C4E  E5          	push	hl
2675  0C4F  CD 00 00    	call	_zx_print_str
2676  0C52  AF          	xor	a, a
2677  0C53  F5          	push	af
2678  0C54  33          	inc	sp
2679  0C55  21 3C 00    	ld	hl,0x003c
2680  0C58  E5          	push	hl
2681  0C59  21 0C 15    	ld	hl,0x150c
2682  0C5C  E5          	push	hl
2683  0C5D  3E 0C       	ld	a,0x0c
2684  0C5F  F5          	push	af
2685  0C60  33          	inc	sp
2686  0C61  CD 00 00    	call	_game_colour_message
2687  0C64  F1          	pop	af
2688  0C65  F1          	pop	af
2689  0C66  F1          	pop	af
2690  0C67  CD 00 00    	call	_spr_unflatten
2691  0C6A              l_player_score_add_00104:
2692  0C6A  3A 00 00    	ld	a,(_game_score_top)
2693  0C6D  21 00 00    	ld	hl,_player_score
2694  0C70  96          	sub	a, (hl)
2695  0C71  3A 01 00    	ld	a,(_game_score_top + 1)
2696  0C74  23          	inc	hl
2697  0C75  9E          	sbc	a, (hl)
2698  0C76  30 06       	jr	NC,l_player_score_add_00106
2699  0C78  2A 00 00    	ld	hl,(_player_score)
2700  0C7B  22 00 00    	ld	(_game_score_top),hl
2701  0C7E              l_player_score_add_00106:
2702  0C7E  CD 00 00    	call	_game_print_score
2703  0C81  C9          	ret
2704  0C82              	SECTION rodata_compiler
2705  0006              ___str_1:
2706  0006  4C 45 56 45 4C 20 55 50 21 
                        	DEFM "LEVEL UP!"
2707  000F  00          	DEFB 0x00
2708  0010              	SECTION code_compiler
2709  0C82              ;	---------------------------------
2710  0C82              ; Function player_check_floor
2711  0C82              ; ---------------------------------
2712  0C82              _player_check_floor:
2713  0C82  CD 00 00    	call	___sdcc_enter_ix
2714  0C85  F5          	push	af
2715  0C86  F5          	push	af
2716  0C87  F5          	push	af
2717  0C88  11 07 00    	ld	de,_col+7
2718  0C8B  1A          	ld	a, (de)
2719  0C8C  47          	ld	b, a
2720  0C8D  3A 07 00    	ld	a,(_lin + 0x0007)
2721  0C90  C6 10       	add	a,0x10
2722  0C92  D5          	push	de
2723  0C93  4F          	ld	c,a
2724  0C94  C5          	push	bc
2725  0C95  CD 00 00    	call	_spr_calc_index
2726  0C98  F1          	pop	af
2727  0C99  D1          	pop	de
2728  0C9A  DD 75 FC    	ld	(ix-4),l
2729  0C9D  DD 74 FD    	ld	(ix-3),h
2730  0CA0  01 00 00    	ld	bc,_scr_map+0
2731  0CA3  79          	ld	a, c
2732  0CA4  DD 86 FC    	add	a,(ix-4)
2733  0CA7  DD 77 FE    	ld	(ix-2),a
2734  0CAA  78          	ld	a, b
2735  0CAB  DD 8E FD    	adc	a,(ix-3)
2736  0CAE  DD 6E FE    	ld	l,(ix-2)
2737  0CB1  DD 77 FF    	ld	(ix-1),a
2738  0CB4  67          	ld	h,a
2739  0CB5  7E          	ld	a, (hl)
2740  0CB6  DD 77 FB    	ld	(ix-5),a
2741  0CB9  DD 6E FC    	ld	l,(ix-4)
2742  0CBC  DD 66 FD    	ld	h,(ix-3)
2743  0CBF  23          	inc	hl
2744  0CC0  09          	add	hl,bc
2745  0CC1  3A 00 00    	ld	a,(_s_lin0)
2746  0CC4  D6 90       	sub	a,0x90
2747  0CC6  4D          	ld	c,l
2748  0CC7  44          	ld	b,h
2749  0CC8  20 26       	jr	NZ,l_player_check_floor_00108
2750  0CCA  3A 00 00    	ld	a,(_map_heigth)
2751  0CCD  C5          	push	bc
2752  0CCE  F5          	push	af
2753  0CCF  33          	inc	sp
2754  0CD0  3A 00 00    	ld	a,(_scr_curr)
2755  0CD3  F5          	push	af
2756  0CD4  33          	inc	sp
2757  0CD5  CD 00 00    	call	__divuchar_callee
2758  0CD8  C1          	pop	bc
2759  0CD9  7D          	ld	a,l
2760  0CDA  3C          	inc	a
2761  0CDB  32 00 00    	ld	(_tmp1),a
2762  0CDE  21 00 00    	ld	hl,_map_heigth
2763  0CE1  96          	sub	a, (hl)
2764  0CE2  30 06       	jr	NC,l_player_check_floor_00102
2765  0CE4  DD 36 FB 00 	ld	(ix-5),0x00
2766  0CE8  18 14       	jr	l_player_check_floor_00109
2767  0CEA              l_player_check_floor_00102:
2768  0CEA  DD 36 FB 48 	ld	(ix-5),0x48
2769  0CEE  18 0E       	jr	l_player_check_floor_00109
2770  0CF0              l_player_check_floor_00108:
2771  0CF0  1A          	ld	a, (de)
2772  0CF1  0F          	rrca
2773  0CF2  38 06       	jr	C,l_player_check_floor_00105
2774  0CF4  DD 36 FA 00 	ld	(ix-6),0x00
2775  0CF8  18 04       	jr	l_player_check_floor_00109
2776  0CFA              l_player_check_floor_00105:
2777  0CFA  0A          	ld	a, (bc)
2778  0CFB  DD 77 FA    	ld	(ix-6),a
2779  0CFE              l_player_check_floor_00109:
2780  0CFE  DD 7E FB    	ld	a,(ix-5)
2781  0D01  D6 3A       	sub	a,0x3a
2782  0D03  38 07       	jr	C,l_player_check_floor_00132
2783  0D05  DD 7E FB    	ld	a,(ix-5)
2784  0D08  D6 60       	sub	a,0x60
2785  0D0A  38 32       	jr	C,l_player_check_floor_00128
2786  0D0C              l_player_check_floor_00132:
2787  0D0C  DD 7E FA    	ld	a,(ix-6)
2788  0D0F  D6 3A       	sub	a,0x3a
2789  0D11  38 07       	jr	C,l_player_check_floor_00127
2790  0D13  DD 7E FA    	ld	a,(ix-6)
2791  0D16  D6 60       	sub	a,0x60
2792  0D18  38 24       	jr	C,l_player_check_floor_00128
2793  0D1A              l_player_check_floor_00127:
2794  0D1A  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
2795  0D1D  36 02       	ld	(hl),0x02
2796  0D1F  21 00 00    	ld	hl,_s_state
2797  0D22  CB CE       	set	1, (hl)
2798  0D24  2E 00       	ld	l,0x00
2799  0D26  CD 21 06    	call	_player_check_stairs
2800  0D29  3A 00 00    	ld	a,(_player_onstair)
2801  0D2C  B7          	or	a, a
2802  0D2D  C2 D8 0D    	jp	NZ, l_player_check_floor_00133
2803  0D30  3A 00 00    	ld	a,(_s_lin0)
2804  0D33  D6 90       	sub	a,0x90
2805  0D35  C2 D8 0D    	jp	NZ,l_player_check_floor_00133
2806  0D38  CD 00 00    	call	_spr_page_down
2807  0D3B  C3 D8 0D    	jp	l_player_check_floor_00133
2808  0D3E              l_player_check_floor_00128:
2809  0D3E  C5          	push	bc
2810  0D3F  21 10 00    	ld	hl,0x0010
2811  0D42  E5          	push	hl
2812  0D43  2A 00 00    	ld	hl,(_player_brick_time)
2813  0D46  E5          	push	hl
2814  0D47  CD 00 00    	call	_game_check_time
2815  0D4A  F1          	pop	af
2816  0D4B  F1          	pop	af
2817  0D4C  C1          	pop	bc
2818  0D4D  7D          	ld	a,l
2819  0D4E  B7          	or	a, a
2820  0D4F  CA D8 0D    	jp	Z, l_player_check_floor_00133
2821  0D52  2A 00 00    	ld	hl,(_curr_time)
2822  0D55  22 00 00    	ld	(_player_brick_time),hl
2823  0D58  DD 7E FB    	ld	a,(ix-5)
2824  0D5B  D6 40       	sub	a,0x40
2825  0D5D  20 1A       	jr	NZ,l_player_check_floor_00114
2826  0D5F  C5          	push	bc
2827  0D60  DD 6E FC    	ld	l,(ix-4)
2828  0D63  DD 66 FD    	ld	h,(ix-3)
2829  0D66  E5          	push	hl
2830  0D67  CD 00 00    	call	_game_match_back
2831  0D6A  F1          	pop	af
2832  0D6B  C1          	pop	bc
2833  0D6C  5D          	ld	e,l
2834  0D6D  DD 6E FE    	ld	l,(ix-2)
2835  0D70  DD 66 FF    	ld	h,(ix-1)
2836  0D73  73          	ld	(hl), e
2837  0D74  C5          	push	bc
2838  0D75  CD DD 0D    	call	_player_gasta_brick
2839  0D78  C1          	pop	bc
2840  0D79              l_player_check_floor_00114:
2841  0D79  DD 7E FB    	ld	a,(ix-5)
2842  0D7C  D6 3F       	sub	a,0x3f
2843  0D7E  20 0D       	jr	NZ,l_player_check_floor_00116
2844  0D80  DD 6E FE    	ld	l,(ix-2)
2845  0D83  DD 66 FF    	ld	h,(ix-1)
2846  0D86  36 40       	ld	(hl),0x40
2847  0D88  C5          	push	bc
2848  0D89  CD DD 0D    	call	_player_gasta_brick
2849  0D8C  C1          	pop	bc
2850  0D8D              l_player_check_floor_00116:
2851  0D8D  DD 7E FB    	ld	a,(ix-5)
2852  0D90  D6 3E       	sub	a,0x3e
2853  0D92  20 0D       	jr	NZ,l_player_check_floor_00118
2854  0D94  DD 6E FE    	ld	l,(ix-2)
2855  0D97  DD 66 FF    	ld	h,(ix-1)
2856  0D9A  36 3F       	ld	(hl),0x3f
2857  0D9C  C5          	push	bc
2858  0D9D  CD DD 0D    	call	_player_gasta_brick
2859  0DA0  C1          	pop	bc
2860  0DA1              l_player_check_floor_00118:
2861  0DA1  DD 7E FA    	ld	a,(ix-6)
2862  0DA4  D6 40       	sub	a,0x40
2863  0DA6  20 14       	jr	NZ,l_player_check_floor_00120
2864  0DA8  C5          	push	bc
2865  0DA9  DD 6E FC    	ld	l,(ix-4)
2866  0DAC  DD 66 FD    	ld	h,(ix-3)
2867  0DAF  E5          	push	hl
2868  0DB0  CD 00 00    	call	_game_match_back
2869  0DB3  F1          	pop	af
2870  0DB4  C1          	pop	bc
2871  0DB5  7D          	ld	a,l
2872  0DB6  02          	ld	(bc), a
2873  0DB7  C5          	push	bc
2874  0DB8  CD DD 0D    	call	_player_gasta_brick
2875  0DBB  C1          	pop	bc
2876  0DBC              l_player_check_floor_00120:
2877  0DBC  DD 7E FA    	ld	a,(ix-6)
2878  0DBF  D6 3F       	sub	a,0x3f
2879  0DC1  20 08       	jr	NZ,l_player_check_floor_00122
2880  0DC3  3E 40       	ld	a,0x40
2881  0DC5  02          	ld	(bc), a
2882  0DC6  C5          	push	bc
2883  0DC7  CD DD 0D    	call	_player_gasta_brick
2884  0DCA  C1          	pop	bc
2885  0DCB              l_player_check_floor_00122:
2886  0DCB  DD 7E FA    	ld	a,(ix-6)
2887  0DCE  D6 3E       	sub	a,0x3e
2888  0DD0  20 06       	jr	NZ,l_player_check_floor_00133
2889  0DD2  3E 3F       	ld	a,0x3f
2890  0DD4  02          	ld	(bc), a
2891  0DD5  CD DD 0D    	call	_player_gasta_brick
2892  0DD8              l_player_check_floor_00133:
2893  0DD8  DD F9       	ld	sp, ix
2894  0DDA  DD E1       	pop	ix
2895  0DDC  C9          	ret
2896  0DDD              	SECTION code_compiler
2897  0DDD              ;	---------------------------------
2898  0DDD              ; Function player_gasta_brick
2899  0DDD              ; ---------------------------------
2900  0DDD              _player_gasta_brick:
2901  0DDD  3A 00 00    	ld	a,(_s_lin0)
2902  0DE0  32 00 00    	ld	(_s_lin1),a
2903  0DE3  3A 00 00    	ld	a,(_s_col0)
2904  0DE6  32 00 00    	ld	(_s_col1),a
2905  0DE9  3A 07 00    	ld	a,(_lin + 0x0007)
2906  0DEC  C6 10       	add	a,0x10
2907  0DEE  32 00 00    	ld	(_s_lin0),a
2908  0DF1  3A 07 00    	ld	a,(_col + 0x0007)
2909  0DF4  32 00 00    	ld	(_s_col0),a
2910  0DF7  CD 00 00    	call	_spr_back_repaint
2911  0DFA  3A 00 00    	ld	a,(_s_lin1)
2912  0DFD  32 00 00    	ld	(_s_lin0),a
2913  0E00  3A 00 00    	ld	a,(_s_col1)
2914  0E03  32 00 00    	ld	(_s_col0),a
2915  0E06  C9          	ret
2916  0E07              	SECTION code_compiler
2917  0E07              ;	---------------------------------
2918  0E07              ; Function player_move_jump
2919  0E07              ; ---------------------------------
2920  0E07              _player_move_jump:
2921  0E07  21 00 00    	ld	hl,_game_gravity
2922  0E0A  4E          	ld	c, (hl)
2923  0E0B  21 00 00    	ld	hl,_player_vel_y
2924  0E0E  7E          	ld	a, (hl)
2925  0E0F  81          	add	a, c
2926  0E10  77          	ld	(hl), a
2927  0E11  21 00 00    	ld	hl,_sprite_on_air
2928  0E14  36 01       	ld	(hl),0x01
2929  0E16  3A 00 00    	ld	a,(_player_vel_inc)
2930  0E19  B7          	or	a, a
2931  0E1A  28 4A       	jr	Z,l_player_move_jump_00109
2932  0E1C  3A 00 00    	ld	a,(_dirs)
2933  0E1F  CB 07       	rlc	a
2934  0E21  E6 01       	and	a,0x01
2935  0E23  4F          	ld	c, a
2936  0E24  3A 00 00    	ld	a,(_game_2buttons)
2937  0E27  B7          	or	a, a
2938  0E28  28 06       	jr	Z,l_player_move_jump_00102
2939  0E2A  79          	ld	a, c
2940  0E2B  EE 01       	xor	a,0x01
2941  0E2D  4F          	ld	c, a
2942  0E2E  18 15       	jr	l_player_move_jump_00103
2943  0E30              l_player_move_jump_00102:
2944  0E30  CB 41       	bit	0, c
2945  0E32  28 07       	jr	Z,l_player_move_jump_00154
2946  0E34  21 00 00    	ld	hl,_dirs
2947  0E37  CB 46       	bit	0, (hl)
2948  0E39  20 04       	jr	NZ,l_player_move_jump_00155
2949  0E3B              l_player_move_jump_00154:
2950  0E3B  0E 00       	ld	c,0x00
2951  0E3D  18 02       	jr	l_player_move_jump_00156
2952  0E3F              l_player_move_jump_00155:
2953  0E3F  0E 01       	ld	c,0x01
2954  0E41              l_player_move_jump_00156:
2955  0E41  79          	ld	a, c
2956  0E42  EE 01       	xor	a,0x01
2957  0E44  4F          	ld	c, a
2958  0E45              l_player_move_jump_00103:
2959  0E45  79          	ld	a, c
2960  0E46  B7          	or	a, a
2961  0E47  28 1D       	jr	Z,l_player_move_jump_00109
2962  0E49  3A 00 00    	ld	a,(_player_vel_y1)
2963  0E4C  21 00 00    	ld	hl,_player_vel_y
2964  0E4F  96          	sub	a, (hl)
2965  0E50  E2 55 0E    	jp	PO, l_player_move_jump_00259
2966  0E53  EE 80       	xor	a,0x80
2967  0E55              l_player_move_jump_00259:
2968  0E55  F2 66 0E    	jp	P, l_player_move_jump_00109
2969  0E58  21 00 00    	ld	hl,_player_vel_y
2970  0E5B  CB 7E       	bit	7,(hl)
2971  0E5D  28 07       	jr	Z,l_player_move_jump_00109
2972  0E5F  36 00       	ld	(hl),0x00
2973  0E61  21 00 00    	ld	hl,_player_vel_inc
2974  0E64  36 00       	ld	(hl),0x00
2975  0E66              l_player_move_jump_00109:
2976  0E66  3E 78       	ld	a,0x78
2977  0E68  21 00 00    	ld	hl,_player_vel_y
2978  0E6B  96          	sub	a, (hl)
2979  0E6C  E2 71 0E    	jp	PO, l_player_move_jump_00260
2980  0E6F  EE 80       	xor	a,0x80
2981  0E71              l_player_move_jump_00260:
2982  0E71  F2 79 0E    	jp	P, l_player_move_jump_00111
2983  0E74  21 00 00    	ld	hl,_player_vel_y
2984  0E77  36 78       	ld	(hl),0x78
2985  0E79              l_player_move_jump_00111:
2986  0E79  21 00 00    	ld	hl,_player_vel_y
2987  0E7C  7E          	ld	a, (hl)
2988  0E7D  EE 80       	xor	a,0x80
2989  0E7F  D6 08       	sub	a,0x08
2990  0E81  30 02       	jr	NC,l_player_move_jump_00113
2991  0E83  36 88       	ld	(hl),0x88
2992  0E85              l_player_move_jump_00113:
2993  0E85  3A 00 00    	ld	a,(_player_vel_y)
2994  0E88  47          	ld	b,a
2995  0E89  17          	rla
2996  0E8A  9F          	sbc	a, a
2997  0E8B  5F          	ld	e, a
2998  0E8C  CB 40       	bit	0,b
2999  0E8E  21 00 00    	ld	hl,_s_lin1
3000  0E91  70          	ld	(hl),b
3001  0E92  28 04       	jr	Z,l_player_move_jump_00115
3002  0E94  21 00 00    	ld	hl,_s_lin1
3003  0E97  35          	dec	(hl)
3004  0E98              l_player_move_jump_00115:
3005  0E98  3A 07 00    	ld	a,(_lin + 0x0007)
3006  0E9B  21 00 00    	ld	hl,_s_lin1
3007  0E9E  86          	add	a, (hl)
3008  0E9F  77          	ld	(hl), a
3009  0EA0  3E 90       	ld	a,0x90
3010  0EA2  96          	sub	a, (hl)
3011  0EA3  3E 00       	ld	a,0x00
3012  0EA5  17          	rla
3013  0EA6  4F          	ld	c, a
3014  0EA7  CB 7B       	bit	7, e
3015  0EA9  28 5B       	jr	Z,l_player_move_jump_00141
3016  0EAB  21 00 00    	ld	hl,_s_state
3017  0EAE  7E          	ld	a,(hl)
3018  0EAF  F6 01       	or	a,0x01
3019  0EB1  E6 FD       	and	a,0xfd
3020  0EB3  77          	ld	(hl),a
3021  0EB4  79          	ld	a, c
3022  0EB5  B7          	or	a, a
3023  0EB6  28 11       	jr	Z,l_player_move_jump_00120
3024  0EB8  CD 00 00    	call	_spr_page_up
3025  0EBB  7D          	ld	a, l
3026  0EBC  B7          	or	a, a
3027  0EBD  28 05       	jr	Z,l_player_move_jump_00117
3028  0EBF  2E 00       	ld	l,0x00
3029  0EC1  C3 C5 0F    	jp	l_player_move_jump_00152
3030  0EC4              l_player_move_jump_00117:
3031  0EC4  21 00 00    	ld	hl,_s_lin1
3032  0EC7  36 00       	ld	(hl),0x00
3033  0EC9              l_player_move_jump_00120:
3034  0EC9  21 07 00    	ld	hl,+(_col + 0x0007)
3035  0ECC  46          	ld	b, (hl)
3036  0ECD  C5          	push	bc
3037  0ECE  33          	inc	sp
3038  0ECF  3A 00 00    	ld	a,(_s_lin1)
3039  0ED2  F5          	push	af
3040  0ED3  33          	inc	sp
3041  0ED4  CD 00 00    	call	_game_check_map
3042  0ED7  F1          	pop	af
3043  0ED8  7C          	ld	a,h
3044  0ED9  B5          	or	a,l
3045  0EDA  28 21       	jr	Z,l_player_move_jump_00124
3046  0EDC  CD 43 09    	call	_player_hit_platform
3047  0EDF  7D          	ld	a, l
3048  0EE0  B7          	or	a, a
3049  0EE1  28 12       	jr	Z,l_player_move_jump_00122
3050  0EE3  3A 07 00    	ld	a,(_lin + 0x0007)
3051  0EE6  07          	rlca
3052  0EE7  07          	rlca
3053  0EE8  07          	rlca
3054  0EE9  07          	rlca
3055  0EEA  E6 0F       	and	a,0x0f
3056  0EEC  07          	rlca
3057  0EED  07          	rlca
3058  0EEE  07          	rlca
3059  0EEF  07          	rlca
3060  0EF0  E6 F0       	and	a,0xf0
3061  0EF2  32 07 00    	ld	((_lin + 0x0007)),a
3062  0EF5              l_player_move_jump_00122:
3063  0EF5  21 00 00    	ld	hl,_player_vel_y
3064  0EF8  36 00       	ld	(hl),0x00
3065  0EFA  C3 87 0F    	jp	l_player_move_jump_00142
3066  0EFD              l_player_move_jump_00124:
3067  0EFD  3A 00 00    	ld	a,(_s_lin1)
3068  0F00  32 07 00    	ld	((_lin + 0x0007)),a
3069  0F03  C3 87 0F    	jp	l_player_move_jump_00142
3070  0F06              l_player_move_jump_00141:
3071  0F06  21 00 00    	ld	hl,_s_state
3072  0F09  7E          	ld	a,(hl)
3073  0F0A  F6 02       	or	a,0x02
3074  0F0C  E6 FE       	and	a,0xfe
3075  0F0E  77          	ld	(hl),a
3076  0F0F  79          	ld	a, c
3077  0F10  B7          	or	a, a
3078  0F11  28 11       	jr	Z,l_player_move_jump_00130
3079  0F13  CD 00 00    	call	_spr_page_down
3080  0F16  7D          	ld	a, l
3081  0F17  B7          	or	a, a
3082  0F18  28 05       	jr	Z,l_player_move_jump_00127
3083  0F1A  2E 00       	ld	l,0x00
3084  0F1C  C3 C5 0F    	jp	l_player_move_jump_00152
3085  0F1F              l_player_move_jump_00127:
3086  0F1F  21 00 00    	ld	hl,_s_lin1
3087  0F22  36 90       	ld	(hl),0x90
3088  0F24              l_player_move_jump_00130:
3089  0F24  21 07 00    	ld	hl,+(_col + 0x0007)
3090  0F27  4E          	ld	c, (hl)
3091  0F28  3A 00 00    	ld	a,(_s_lin1)
3092  0F2B  C6 10       	add	a,0x10
3093  0F2D  47          	ld	b, a
3094  0F2E  79          	ld	a, c
3095  0F2F  48          	ld	c,b
3096  0F30  47          	ld	b,a
3097  0F31  C5          	push	bc
3098  0F32  CD 00 00    	call	_game_check_map
3099  0F35  F1          	pop	af
3100  0F36  7C          	ld	a,h
3101  0F37  B5          	or	a,l
3102  0F38  28 47       	jr	Z,l_player_move_jump_00138
3103  0F3A  2E 00       	ld	l,0x00
3104  0F3C  CD 21 06    	call	_player_check_stairs
3105  0F3F  3A 00 00    	ld	a,(_player_onstair)
3106  0F42  B7          	or	a, a
3107  0F43  20 05       	jr	NZ,l_player_move_jump_00132
3108  0F45  2E 01       	ld	l,0x01
3109  0F47  CD 21 06    	call	_player_check_stairs
3110  0F4A              l_player_move_jump_00132:
3111  0F4A  3A 00 00    	ld	a,(_player_onstair)
3112  0F4D  B7          	or	a, a
3113  0F4E  20 12       	jr	NZ,l_player_move_jump_00134
3114  0F50  3A 00 00    	ld	a,(_s_lin1)
3115  0F53  07          	rlca
3116  0F54  07          	rlca
3117  0F55  07          	rlca
3118  0F56  07          	rlca
3119  0F57  E6 0F       	and	a,0x0f
3120  0F59  07          	rlca
3121  0F5A  07          	rlca
3122  0F5B  07          	rlca
3123  0F5C  07          	rlca
3124  0F5D  E6 F0       	and	a,0xf0
3125  0F5F  32 07 00    	ld	((_lin + 0x0007)),a
3126  0F62              l_player_move_jump_00134:
3127  0F62  21 00 00    	ld	hl,_player_vel_y
3128  0F65  36 00       	ld	(hl),0x00
3129  0F67  21 00 00    	ld	hl,_s_state
3130  0F6A  7E          	ld	a,(hl)
3131  0F6B  E6 FC       	and	a,+(0xfd&0xfe)
3132  0F6D  77          	ld	(hl),a
3133  0F6E  3A 07 00    	ld	a,(_lin + 0x0007)
3134  0F71  D6 90       	sub	a,0x90
3135  0F73  38 03       	jr	C,l_player_move_jump_00136
3136  0F75  CD 00 00    	call	_spr_page_down
3137  0F78              l_player_move_jump_00136:
3138  0F78  21 07 00    	ld	hl, +(_colint + 0x0007)
3139  0F7B  36 00       	ld	(hl),0x00
3140  0F7D  2E 01       	ld	l,0x01
3141  0F7F  18 44       	jr	l_player_move_jump_00152
3142  0F81              l_player_move_jump_00138:
3143  0F81  3A 00 00    	ld	a,(_s_lin1)
3144  0F84  32 07 00    	ld	((_lin + 0x0007)),a
3145  0F87              l_player_move_jump_00142:
3146  0F87  21 00 00    	ld	hl,_s_state
3147  0F8A  CB 5E       	bit	3, (hl)
3148  0F8C  20 27       	jr	NZ,l_player_move_jump_00148
3149  0F8E  21 00 00    	ld	hl,_s_state
3150  0F91  CB 56       	bit	2, (hl)
3151  0F93  20 20       	jr	NZ,l_player_move_jump_00148
3152  0F95  21 00 00    	ld	hl,_dirs
3153  0F98  CB 56       	bit	2, (hl)
3154  0F9A  28 09       	jr	Z,l_player_move_jump_00144
3155  0F9C  21 00 00    	ld	hl,_s_state
3156  0F9F  7E          	ld	a,(hl)
3157  0FA0  F6 08       	or	a,0x08
3158  0FA2  E6 FB       	and	a,0xfb
3159  0FA4  77          	ld	(hl),a
3160  0FA5              l_player_move_jump_00144:
3161  0FA5  21 00 00    	ld	hl,_dirs
3162  0FA8  CB 5E       	bit	3, (hl)
3163  0FAA  28 09       	jr	Z,l_player_move_jump_00148
3164  0FAC  21 00 00    	ld	hl,_s_state
3165  0FAF  7E          	ld	a,(hl)
3166  0FB0  F6 04       	or	a,0x04
3167  0FB2  E6 F7       	and	a,0xf7
3168  0FB4  77          	ld	(hl),a
3169  0FB5              l_player_move_jump_00148:
3170  0FB5  CD 00 00    	call	_spr_move_horizontal
3171  0FB8  7D          	ld	a, l
3172  0FB9  B7          	or	a, a
3173  0FBA  28 07       	jr	Z,l_player_move_jump_00151
3174  0FBC  21 00 00    	ld	hl,_s_state
3175  0FBF  7E          	ld	a,(hl)
3176  0FC0  E6 F3       	and	a,+(0xf7&0xfb)
3177  0FC2  77          	ld	(hl),a
3178  0FC3              l_player_move_jump_00151:
3179  0FC3  2E 00       	ld	l,0x00
3180  0FC5              l_player_move_jump_00152:
3181  0FC5  C9          	ret
3182  0FC6              	SECTION code_compiler
3183  0FC6              ;	---------------------------------
3184  0FC6              ; Function player_open_door
3185  0FC6              ; ---------------------------------
3186  0FC6              _player_open_door:
3187  0FC6  CD 00 00    	call	___sdcc_enter_ix
3188  0FC9  0E 00       	ld	c,0x00
3189  0FCB  21 00 00    	ld	hl,_ay_effect_05
3190  0FCE  CD 00 00    	call	_ay_fx_play
3191  0FD1  DD 7E 06    	ld	a,(ix+6)
3192  0FD4  D6 48       	sub	a,0x48
3193  0FD6  28 17       	jr	Z,l_player_open_door_00101
3194  0FD8  DD 7E 06    	ld	a,(ix+6)
3195  0FDB  D6 49       	sub	a,0x49
3196  0FDD  28 1F       	jr	Z,l_player_open_door_00104
3197  0FDF  DD 7E 06    	ld	a,(ix+6)
3198  0FE2  D6 4A       	sub	a,0x4a
3199  0FE4  28 27       	jr	Z,l_player_open_door_00107
3200  0FE6  DD 7E 06    	ld	a,(ix+6)
3201  0FE9  D6 4B       	sub	a,0x4b
3202  0FEB  28 2F       	jr	Z,l_player_open_door_00110
3203  0FED  18 3A       	jr	l_player_open_door_00113
3204  0FEF              l_player_open_door_00101:
3205  0FEF  3A 00 00    	ld	a,(_player_keys)
3206  0FF2  B7          	or	a, a
3207  0FF3  28 34       	jr	Z,l_player_open_door_00113
3208  0FF5  2E 07       	ld	l,0x07
3209  0FF7  CD 00 00    	call	_zx_border_fastcall
3210  0FFA  0E 01       	ld	c,0x01
3211  0FFC  18 2B       	jr	l_player_open_door_00113
3212  0FFE              l_player_open_door_00104:
3213  0FFE  3A 01 00    	ld	a,(_player_keys + 0x0001)
3214  1001  B7          	or	a, a
3215  1002  28 25       	jr	Z,l_player_open_door_00113
3216  1004  2E 02       	ld	l,0x02
3217  1006  CD 00 00    	call	_zx_border_fastcall
3218  1009  0E 01       	ld	c,0x01
3219  100B  18 1C       	jr	l_player_open_door_00113
3220  100D              l_player_open_door_00107:
3221  100D  3A 02 00    	ld	a,(_player_keys + 0x0002)
3222  1010  B7          	or	a, a
3223  1011  28 16       	jr	Z,l_player_open_door_00113
3224  1013  2E 04       	ld	l,0x04
3225  1015  CD 00 00    	call	_zx_border_fastcall
3226  1018  0E 01       	ld	c,0x01
3227  101A  18 0D       	jr	l_player_open_door_00113
3228  101C              l_player_open_door_00110:
3229  101C  3A 03 00    	ld	a,(_player_keys + 0x0003)
3230  101F  B7          	or	a, a
3231  1020  28 07       	jr	Z,l_player_open_door_00113
3232  1022  2E 05       	ld	l,0x05
3233  1024  CD 00 00    	call	_zx_border_fastcall
3234  1027  0E 01       	ld	c,0x01
3235  1029              l_player_open_door_00113:
3236  1029  79          	ld	a, c
3237  102A  B7          	or	a, a
3238  102B  20 06       	jr	NZ,l_player_open_door_00114
3239  102D  3A 00 00    	ld	a,(_game_inmune)
3240  1030  B7          	or	a, a
3241  1031  28 2F       	jr	Z,l_player_open_door_00117
3242  1033              l_player_open_door_00114:
3243  1033  3E 00       	ld	a, +((_scr_map) & 0xFF)
3244  1035  DD 86 04    	add	a,(ix+4)
3245  1038  4F          	ld	c, a
3246  1039  3E 00       	ld	a, +((_scr_map) / 256)
3247  103B  DD 8E 05    	adc	a,(ix+5)
3248  103E  47          	ld	b, a
3249  103F  C5          	push	bc
3250  1040  DD 6E 04    	ld	l,(ix+4)
3251  1043  DD 66 05    	ld	h,(ix+5)
3252  1046  E5          	push	hl
3253  1047  CD 00 00    	call	_game_match_back
3254  104A  F1          	pop	af
3255  104B  C1          	pop	bc
3256  104C  7D          	ld	a,l
3257  104D  02          	ld	(bc), a
3258  104E  DD 6E 04    	ld	l,(ix+4)
3259  1051  DD 66 05    	ld	h,(ix+5)
3260  1054  CD 00 00    	call	_game_obj_set
3261  1057  DD 6E 04    	ld	l,(ix+4)
3262  105A  DD 66 05    	ld	h,(ix+5)
3263  105D  E5          	push	hl
3264  105E  CD 00 00    	call	_spr_draw_index
3265  1061  F1          	pop	af
3266  1062              l_player_open_door_00117:
3267  1062  DD E1       	pop	ix
3268  1064  C9          	ret
3269  1065              	SECTION code_compiler
3270  1065              ;	---------------------------------
3271  1065              ; Function player_lost_life
3272  1065              ; ---------------------------------
3273  1065              _player_lost_life:
3274  1065  CD 00 00    	call	___sdcc_enter_ix
3275  1068  F5          	push	af
3276  1069  21 00 00    	ld	hl,_ay_effect_18
3277  106C  CD 00 00    	call	_ay_fx_play
3278  106F  21 00 00    	ld	hl,_player_vita
3279  1072  36 00       	ld	(hl),0x00
3280  1074  CD 00 00    	call	_game_update_stats
3281  1077  3A 07 00    	ld	a,(_lin + 7)
3282  107A  32 00 00    	ld	(_s_lin0),a
3283  107D  3A 07 00    	ld	a,(_col + 7)
3284  1080  32 00 00    	ld	(_s_col0),a
3285  1083  CD 00 00    	call	_spr_init_effects
3286  1086  06 00       	ld	b,0x00
3287  1088              l_player_lost_life_00116:
3288  1088  C5          	push	bc
3289  1089  21 00 00    	ld	hl,0x0000
3290  108C  E5          	push	hl
3291  108D  AF          	xor	a, a
3292  108E  48          	ld	c,b
3293  108F  47          	ld	b,a
3294  1090  C5          	push	bc
3295  1091  CD 00 00    	call	_NIRVANAP_spriteT_callee
3296  1094  C1          	pop	bc
3297  1095  04          	inc	b
3298  1096  3E 07       	ld	a,0x07
3299  1098  90          	sub	a, b
3300  1099  30 ED       	jr	NC,l_player_lost_life_00116
3301  109B  76          	halt
3302  109C  3A 00 00    	ld	a,(_s_lin0)
3303  109F  C6 F0       	add	a,0xf0
3304  10A1  47          	ld	b, a
3305  10A2  3A 00 00    	ld	a,(_s_col0)
3306  10A5  21 00 00    	ld	hl,0x0000
3307  10A8  E5          	push	hl
3308  10A9  21 87 03    	ld	hl,0x0387
3309  10AC  E5          	push	hl
3310  10AD  48          	ld	c,b
3311  10AE  47          	ld	b,a
3312  10AF  C5          	push	bc
3313  10B0  CD 00 00    	call	_spr_add_anim
3314  10B3  F1          	pop	af
3315  10B4  F1          	pop	af
3316  10B5  F1          	pop	af
3317  10B6  21 00 00    	ld	hl,_s_col0
3318  10B9  46          	ld	b, (hl)
3319  10BA  05          	dec	b
3320  10BB  05          	dec	b
3321  10BC  21 00 00    	ld	hl,0x0000
3322  10BF  E5          	push	hl
3323  10C0  21 87 03    	ld	hl,0x0387
3324  10C3  E5          	push	hl
3325  10C4  C5          	push	bc
3326  10C5  33          	inc	sp
3327  10C6  3A 00 00    	ld	a,(_s_lin0)
3328  10C9  F5          	push	af
3329  10CA  33          	inc	sp
3330  10CB  CD 00 00    	call	_spr_add_anim
3331  10CE  F1          	pop	af
3332  10CF  F1          	pop	af
3333  10D0  21 00 00    	ld	hl,0x0000
3334  10D3  E3          	ex	(sp),hl
3335  10D4  3A 00 00    	ld	a,(_s_col0)
3336  10D7  21 87 03    	ld	hl,0x0387
3337  10DA  E5          	push	hl
3338  10DB  F5          	push	af
3339  10DC  33          	inc	sp
3340  10DD  3A 00 00    	ld	a,(_s_lin0)
3341  10E0  F5          	push	af
3342  10E1  33          	inc	sp
3343  10E2  CD 00 00    	call	_spr_add_anim
3344  10E5  F1          	pop	af
3345  10E6  F1          	pop	af
3346  10E7  F1          	pop	af
3347  10E8  21 00 00    	ld	hl,_s_col0
3348  10EB  46          	ld	b, (hl)
3349  10EC  04          	inc	b
3350  10ED  04          	inc	b
3351  10EE  21 00 00    	ld	hl,0x0000
3352  10F1  E5          	push	hl
3353  10F2  21 87 03    	ld	hl,0x0387
3354  10F5  E5          	push	hl
3355  10F6  C5          	push	bc
3356  10F7  33          	inc	sp
3357  10F8  3A 00 00    	ld	a,(_s_lin0)
3358  10FB  F5          	push	af
3359  10FC  33          	inc	sp
3360  10FD  CD 00 00    	call	_spr_add_anim
3361  1100  F1          	pop	af
3362  1101  F1          	pop	af
3363  1102  F1          	pop	af
3364  1103  3A 00 00    	ld	a,(_s_lin0)
3365  1106  C6 10       	add	a,0x10
3366  1108  47          	ld	b, a
3367  1109  3A 00 00    	ld	a,(_s_col0)
3368  110C  21 00 00    	ld	hl,0x0000
3369  110F  E5          	push	hl
3370  1110  21 87 03    	ld	hl,0x0387
3371  1113  E5          	push	hl
3372  1114  48          	ld	c,b
3373  1115  47          	ld	b,a
3374  1116  C5          	push	bc
3375  1117  CD 00 00    	call	_spr_add_anim
3376  111A  F1          	pop	af
3377  111B  F1          	pop	af
3378  111C  F1          	pop	af
3379  111D  2E 00       	ld	l,0x00
3380  111F  CD 00 00    	call	_zx_border_fastcall
3381  1122  DD 36 FE 01 	ld	(ix-2),0x01
3382  1126  2A 00 00    	ld	hl,(_curr_time)
3383  1129  22 00 00    	ld	(_anim_time),hl
3384  112C              l_player_lost_life_00107:
3385  112C  DD 7E FE    	ld	a,(ix-2)
3386  112F  B7          	or	a, a
3387  1130  28 28       	jr	Z,l_player_lost_life_00129
3388  1132  21 0C 00    	ld	hl,0x000c
3389  1135  E5          	push	hl
3390  1136  2A 00 00    	ld	hl,(_anim_time)
3391  1139  E5          	push	hl
3392  113A  CD 00 00    	call	_game_check_time
3393  113D  F1          	pop	af
3394  113E  F1          	pop	af
3395  113F  7D          	ld	a, l
3396  1140  B7          	or	a, a
3397  1141  28 E9       	jr	Z,l_player_lost_life_00107
3398  1143  2A 00 00    	ld	hl,(_curr_time)
3399  1146  22 00 00    	ld	(_anim_time),hl
3400  1149  3A 00 00    	ld	a,(_anim_count)
3401  114C  B7          	or	a,a
3402  114D  28 05       	jr	Z,l_player_lost_life_00103
3403  114F  CD 00 00    	call	_spr_play_anim
3404  1152  18 D8       	jr	l_player_lost_life_00107
3405  1154              l_player_lost_life_00103:
3406  1154  DD 36 FE 00 	ld	(ix-2),0x00
3407  1158  18 D2       	jr	l_player_lost_life_00107
3408  115A              l_player_lost_life_00129:
3409  115A  1E 00       	ld	e,0x00
3410  115C              l_player_lost_life_00118:
3411  115C  16 00       	ld	d,0x00
3412  115E  21 00 00    	ld	hl,_class
3413  1161  19          	add	hl, de
3414  1162  7E          	ld	a, (hl)
3415  1163  B7          	or	a, a
3416  1164  28 30       	jr	Z,l_player_lost_life_00119
3417  1166  16 00       	ld	d,0x00
3418  1168  21 00 00    	ld	hl,_col
3419  116B  19          	add	hl, de
3420  116C  7E          	ld	a, (hl)
3421  116D  DD 77 FF    	ld	(ix-1),a
3422  1170  16 00       	ld	d,0x00
3423  1172  21 00 00    	ld	hl,_lin
3424  1175  19          	add	hl, de
3425  1176  46          	ld	b, (hl)
3426  1177  16 00       	ld	d,0x00
3427  1179  21 00 00    	ld	hl,_tile
3428  117C  19          	add	hl, de
3429  117D  4E          	ld	c, (hl)
3430  117E  16 00       	ld	d,0x00
3431  1180  21 00 00    	ld	hl,_colint
3432  1183  19          	add	hl, de
3433  1184  6E          	ld	l, (hl)
3434  1185  79          	ld	a, c
3435  1186  85          	add	a, l
3436  1187  4F          	ld	c, a
3437  1188  D5          	push	de
3438  1189  DD 7E FF    	ld	a,(ix-1)
3439  118C  F5          	push	af
3440  118D  33          	inc	sp
3441  118E  C5          	push	bc
3442  118F  33          	inc	sp
3443  1190  51          	ld	d,c
3444  1191  D5          	push	de
3445  1192  CD 00 00    	call	_NIRVANAP_spriteT_callee
3446  1195  D1          	pop	de
3447  1196              l_player_lost_life_00119:
3448  1196  1C          	inc	e
3449  1197  7B          	ld	a, e
3450  1198  D6 07       	sub	a,0x07
3451  119A  38 C0       	jr	C,l_player_lost_life_00118
3452  119C  21 00 00    	ld	hl,_player_lives
3453  119F  35          	dec	(hl)
3454  11A0  21 00 00    	ld	hl,_player_mana
3455  11A3  36 64       	ld	(hl),0x64
3456  11A5  21 00 00    	ld	hl,_player_vita
3457  11A8  36 64       	ld	(hl),0x64
3458  11AA  3A 00 00    	ld	a,(_player_lives)
3459  11AD  B7          	or	a, a
3460  11AE  28 0B       	jr	Z,l_player_lost_life_00114
3461  11B0  21 F4 01    	ld	hl,0x01f4
3462  11B3  CD 00 00    	call	_z80_delay_ms_fastcall
3463  11B6  CD 00 00    	call	_game_round_init
3464  11B9  18 0A       	jr	l_player_lost_life_00120
3465  11BB              l_player_lost_life_00114:
3466  11BB  21 00 00    	ld	hl,_player_lives
3467  11BE  36 00       	ld	(hl),0x00
3468  11C0  21 00 00    	ld	hl,_game_over
3469  11C3  36 01       	ld	(hl),0x01
3470  11C5              l_player_lost_life_00120:
3471  11C5  F1          	pop	af
3472  11C6  DD E1       	pop	ix
3473  11C8  C9          	ret
3474  11C9              	SECTION code_compiler
3475  11C9              ;	---------------------------------
3476  11C9              ; Function player_hit
3477  11C9              ; ---------------------------------
3478  11C9              _player_hit:
3479  11C9  7D          	ld	a,l
3480  11CA  4D          	ld	c,l
3481  11CB  21 00 00    	ld	hl,_player_vita
3482  11CE  96          	sub	a, (hl)
3483  11CF  30 17       	jr	NC,l_player_hit_00104
3484  11D1  3A 00 00    	ld	a,(_game_inmune)
3485  11D4  B7          	or	a, a
3486  11D5  20 06       	jr	NZ,l_player_hit_00102
3487  11D7  21 00 00    	ld	hl,_player_vita
3488  11DA  7E          	ld	a, (hl)
3489  11DB  91          	sub	a, c
3490  11DC  77          	ld	(hl), a
3491  11DD              l_player_hit_00102:
3492  11DD  2A 00 00    	ld	hl,(_curr_time)
3493  11E0  22 00 00    	ld	(_player_hit_time),hl
3494  11E3  CD 00 00    	call	_game_update_stats
3495  11E6  18 03       	jr	l_player_hit_00106
3496  11E8              l_player_hit_00104:
3497  11E8  CD 65 10    	call	_player_lost_life
3498  11EB              l_player_hit_00106:
3499  11EB  C9          	ret
3500  11EC              	SECTION IGNORE
3501  0000              
