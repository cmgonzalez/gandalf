1     0000              MODULE game_player_c
2     0000              LINE -1, "game_player.c"
-1    0000              
0     0000              
1     0000              ;--------------------------------------------------------
2     0000              ; File Created by SDCC : free open source ANSI-C Compiler
3     0000              ; Version 3.6.5 #9958 (Mac OS X i386)
4     0000              ;--------------------------------------------------------
5     0000              ; Processed by Z88DK
6     0000              ;--------------------------------------------------------
7     0000              
8     0000              	EXTERN __divschar
9     0000              	EXTERN __divschar_callee
10    0000              	EXTERN __divsint
11    0000              	EXTERN __divsint_callee
12    0000              	EXTERN __divslong
13    0000              	EXTERN __divslong_callee
14    0000              	EXTERN __divslonglong
15    0000              	EXTERN __divslonglong_callee
16    0000              	EXTERN __divsuchar
17    0000              	EXTERN __divsuchar_callee
18    0000              	EXTERN __divuchar
19    0000              	EXTERN __divuchar_callee
20    0000              	EXTERN __divuint
21    0000              	EXTERN __divuint_callee
22    0000              	EXTERN __divulong
23    0000              	EXTERN __divulong_callee
24    0000              	EXTERN __divulonglong
25    0000              	EXTERN __divulonglong_callee
26    0000              	EXTERN __divuschar
27    0000              	EXTERN __divuschar_callee
28    0000              	EXTERN __modschar
29    0000              	EXTERN __modschar_callee
30    0000              	EXTERN __modsint
31    0000              	EXTERN __modsint_callee
32    0000              	EXTERN __modslong
33    0000              	EXTERN __modslong_callee
34    0000              	EXTERN __modslonglong
35    0000              	EXTERN __modslonglong_callee
36    0000              	EXTERN __modsuchar
37    0000              	EXTERN __modsuchar_callee
38    0000              	EXTERN __moduchar
39    0000              	EXTERN __moduchar_callee
40    0000              	EXTERN __moduint
41    0000              	EXTERN __moduint_callee
42    0000              	EXTERN __modulong
43    0000              	EXTERN __modulong_callee
44    0000              	EXTERN __modulonglong
45    0000              	EXTERN __modulonglong_callee
46    0000              	EXTERN __moduschar
47    0000              	EXTERN __moduschar_callee
48    0000              	EXTERN __mulint
49    0000              	EXTERN __mulint_callee
50    0000              	EXTERN __mullong
51    0000              	EXTERN __mullong_callee
52    0000              	EXTERN __mullonglong
53    0000              	EXTERN __mullonglong_callee
54    0000              	EXTERN __mulschar
55    0000              	EXTERN __mulschar_callee
56    0000              	EXTERN __mulsuchar
57    0000              	EXTERN __mulsuchar_callee
58    0000              	EXTERN __muluschar
59    0000              	EXTERN __muluschar_callee
60    0000              	EXTERN __rlslonglong
61    0000              	EXTERN __rlslonglong_callee
62    0000              	EXTERN __rlulonglong
63    0000              	EXTERN __rlulonglong_callee
64    0000              	EXTERN __rrslonglong
65    0000              	EXTERN __rrslonglong_callee
66    0000              	EXTERN __rrulonglong
67    0000              	EXTERN __rrulonglong_callee
68    0000              	EXTERN ___sdcc_call_hl
69    0000              	EXTERN ___sdcc_call_iy
70    0000              	EXTERN ___sdcc_enter_ix
71    0000              	EXTERN _banked_call
72    0000              	EXTERN _banked_ret
73    0000              	EXTERN ___fs2schar
74    0000              	EXTERN ___fs2schar_callee
75    0000              	EXTERN ___fs2sint
76    0000              	EXTERN ___fs2sint_callee
77    0000              	EXTERN ___fs2slong
78    0000              	EXTERN ___fs2slong_callee
79    0000              	EXTERN ___fs2slonglong
80    0000              	EXTERN ___fs2slonglong_callee
81    0000              	EXTERN ___fs2uchar
82    0000              	EXTERN ___fs2uchar_callee
83    0000              	EXTERN ___fs2uint
84    0000              	EXTERN ___fs2uint_callee
85    0000              	EXTERN ___fs2ulong
86    0000              	EXTERN ___fs2ulong_callee
87    0000              	EXTERN ___fs2ulonglong
88    0000              	EXTERN ___fs2ulonglong_callee
89    0000              	EXTERN ___fsadd
90    0000              	EXTERN ___fsadd_callee
91    0000              	EXTERN ___fsdiv
92    0000              	EXTERN ___fsdiv_callee
93    0000              	EXTERN ___fseq
94    0000              	EXTERN ___fseq_callee
95    0000              	EXTERN ___fsgt
96    0000              	EXTERN ___fsgt_callee
97    0000              	EXTERN ___fslt
98    0000              	EXTERN ___fslt_callee
99    0000              	EXTERN ___fsmul
100   0000              	EXTERN ___fsmul_callee
101   0000              	EXTERN ___fsneq
102   0000              	EXTERN ___fsneq_callee
103   0000              	EXTERN ___fssub
104   0000              	EXTERN ___fssub_callee
105   0000              	EXTERN ___schar2fs
106   0000              	EXTERN ___schar2fs_callee
107   0000              	EXTERN ___sint2fs
108   0000              	EXTERN ___sint2fs_callee
109   0000              	EXTERN ___slong2fs
110   0000              	EXTERN ___slong2fs_callee
111   0000              	EXTERN ___slonglong2fs
112   0000              	EXTERN ___slonglong2fs_callee
113   0000              	EXTERN ___uchar2fs
114   0000              	EXTERN ___uchar2fs_callee
115   0000              	EXTERN ___uint2fs
116   0000              	EXTERN ___uint2fs_callee
117   0000              	EXTERN ___ulong2fs
118   0000              	EXTERN ___ulong2fs_callee
119   0000              	EXTERN ___ulonglong2fs
120   0000              	EXTERN ___ulonglong2fs_callee
121   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
122   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
123   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
126   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
127   0000              	EXTERN ____sdcc_4_ldi_save_bc
128   0000              	EXTERN ____sdcc_4_push_hlix
129   0000              	EXTERN ____sdcc_4_push_mhl
130   0000              	EXTERN ____sdcc_lib_setmem_hl
131   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
132   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
133   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
134   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
135   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
136   0000              	EXTERN ____sdcc_ll_add_deix_hlix
137   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
138   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
139   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
140   0000              	EXTERN ____sdcc_ll_asr_hlix_a
141   0000              	EXTERN ____sdcc_ll_asr_mbc_a
142   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
143   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
144   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
145   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
146   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
147   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
148   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
149   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
150   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
151   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
152   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
153   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
155   0000              	EXTERN ____sdcc_ll_push_hlix
156   0000              	EXTERN ____sdcc_ll_push_mhl
157   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
158   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
159   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
160   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
161   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
162   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
163   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
164   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
165   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
166   0000              	EXTERN ____sdcc_load_debc_deix
167   0000              	EXTERN ____sdcc_load_dehl_deix
168   0000              	EXTERN ____sdcc_load_debc_mhl
169   0000              	EXTERN ____sdcc_load_hlde_mhl
170   0000              	EXTERN ____sdcc_store_dehl_bcix
171   0000              	EXTERN ____sdcc_store_debc_hlix
172   0000              	EXTERN ____sdcc_store_debc_mhl
173   0000              	EXTERN ____sdcc_cpu_pop_ei
174   0000              	EXTERN ____sdcc_cpu_pop_ei_jp
175   0000              	EXTERN ____sdcc_cpu_push_di
176   0000              	EXTERN ____sdcc_outi
177   0000              	EXTERN ____sdcc_outi_128
178   0000              	EXTERN ____sdcc_outi_256
179   0000              	EXTERN ____sdcc_ldi
180   0000              	EXTERN ____sdcc_ldi_128
181   0000              	EXTERN ____sdcc_ldi_256
182   0000              	EXTERN ____sdcc_4_copy_srcd_hlix_dst_deix
183   0000              	EXTERN ____sdcc_4_and_src_mbc_mhl_dst_deix
184   0000              	EXTERN ____sdcc_4_or_src_mbc_mhl_dst_deix
185   0000              	EXTERN ____sdcc_4_xor_src_mbc_mhl_dst_deix
186   0000              	EXTERN ____sdcc_4_or_src_dehl_dst_bcix
187   0000              	EXTERN ____sdcc_4_xor_src_dehl_dst_bcix
188   0000              	EXTERN ____sdcc_4_and_src_dehl_dst_bcix
189   0000              	EXTERN ____sdcc_4_xor_src_mbc_mhl_dst_debc
190   0000              	EXTERN ____sdcc_4_or_src_mbc_mhl_dst_debc
191   0000              	EXTERN ____sdcc_4_and_src_mbc_mhl_dst_debc
192   0000              	EXTERN ____sdcc_4_cpl_src_mhl_dst_debc
193   0000              	EXTERN ____sdcc_4_xor_src_debc_mhl_dst_debc
194   0000              	EXTERN ____sdcc_4_or_src_debc_mhl_dst_debc
195   0000              	EXTERN ____sdcc_4_and_src_debc_mhl_dst_debc
196   0000              	EXTERN ____sdcc_4_and_src_debc_hlix_dst_debc
197   0000              	EXTERN ____sdcc_4_or_src_debc_hlix_dst_debc
198   0000              	EXTERN ____sdcc_4_xor_src_debc_hlix_dst_debc
199   0000              
200   0000              ;--------------------------------------------------------
201   0000              ; Public variables in this module
202   0000              ;--------------------------------------------------------
203   0000              	GLOBAL _player_check_map
204   0000              	GLOBAL _player_1up
205   0000              	GLOBAL _player_init
206   0000              	GLOBAL _player_turn
207   0000              	GLOBAL _player_move
208   0000              	GLOBAL _player_check_input
209   0000              	GLOBAL _player_action_fire
210   0000              	GLOBAL _player_action_jump
211   0000              	GLOBAL _player_move_input
212   0000              	GLOBAL _player_fix_walk_lin
213   0000              	GLOBAL _player_fire
214   0000              	GLOBAL _player_collision
215   0000              	GLOBAL _player_pick_mushroom
216   0000              	GLOBAL _player_check_stairs_vertical
217   0000              	GLOBAL _player_check_stairs
218   0000              	GLOBAL _player_anim_stairs
219   0000              	GLOBAL _player_tile
220   0000              	GLOBAL _player_pick_item
221   0000              	GLOBAL _player_hit_platform
222   0000              	GLOBAL _player_hit_platform_clear
223   0000              	GLOBAL _player_score_add
224   0000              	GLOBAL _player_check_floor
225   0000              	GLOBAL _player_gasta_brick
226   0000              	GLOBAL _player_move_jump
227   0000              	GLOBAL _player_open_door
228   0000              	GLOBAL _player_lost_life
229   0000              	GLOBAL _player_damage
230   0000              ;--------------------------------------------------------
231   0000              ; Externals used
232   0000              ;--------------------------------------------------------
233   0000              	GLOBAL _ulltoa_callee
234   0000              	GLOBAL _ulltoa
235   0000              	GLOBAL _strtoull_callee
236   0000              	GLOBAL _strtoull
237   0000              	GLOBAL _strtoll_callee
238   0000              	GLOBAL _strtoll
239   0000              	GLOBAL _lltoa_callee
240   0000              	GLOBAL _lltoa
241   0000              	GLOBAL _llabs_callee
242   0000              	GLOBAL _llabs
243   0000              	GLOBAL __lldivu__callee
244   0000              	GLOBAL __lldivu_
245   0000              	GLOBAL __lldiv__callee
246   0000              	GLOBAL __lldiv_
247   0000              	GLOBAL _atoll_callee
248   0000              	GLOBAL _atoll
249   0000              	GLOBAL _realloc_unlocked_callee
250   0000              	GLOBAL _realloc_unlocked
251   0000              	GLOBAL _malloc_unlocked_fastcall
252   0000              	GLOBAL _malloc_unlocked
253   0000              	GLOBAL _free_unlocked_fastcall
254   0000              	GLOBAL _free_unlocked
255   0000              	GLOBAL _calloc_unlocked_callee
256   0000              	GLOBAL _calloc_unlocked
257   0000              	GLOBAL _aligned_alloc_unlocked_callee
258   0000              	GLOBAL _aligned_alloc_unlocked
259   0000              	GLOBAL _realloc_callee
260   0000              	GLOBAL _realloc
261   0000              	GLOBAL _malloc_fastcall
262   0000              	GLOBAL _malloc
263   0000              	GLOBAL _free_fastcall
264   0000              	GLOBAL _free
265   0000              	GLOBAL _calloc_callee
266   0000              	GLOBAL _calloc
267   0000              	GLOBAL _aligned_alloc_callee
268   0000              	GLOBAL _aligned_alloc
269   0000              	GLOBAL _utoa_callee
270   0000              	GLOBAL _utoa
271   0000              	GLOBAL _ultoa_callee
272   0000              	GLOBAL _ultoa
273   0000              	GLOBAL _system_fastcall
274   0000              	GLOBAL _system
275   0000              	GLOBAL _strtoul_callee
276   0000              	GLOBAL _strtoul
277   0000              	GLOBAL _strtol_callee
278   0000              	GLOBAL _strtol
279   0000              	GLOBAL _strtof_callee
280   0000              	GLOBAL _strtof
281   0000              	GLOBAL _strtod_callee
282   0000              	GLOBAL _strtod
283   0000              	GLOBAL _srand_fastcall
284   0000              	GLOBAL _srand
285   0000              	GLOBAL _rand
286   0000              	GLOBAL _quick_exit_fastcall
287   0000              	GLOBAL _quick_exit
288   0000              	GLOBAL _qsort_callee
289   0000              	GLOBAL _qsort
290   0000              	GLOBAL _ltoa_callee
291   0000              	GLOBAL _ltoa
292   0000              	GLOBAL _labs_fastcall
293   0000              	GLOBAL _labs
294   0000              	GLOBAL _itoa_callee
295   0000              	GLOBAL _itoa
296   0000              	GLOBAL _ftoh_callee
297   0000              	GLOBAL _ftoh
298   0000              	GLOBAL _ftog_callee
299   0000              	GLOBAL _ftog
300   0000              	GLOBAL _ftoe_callee
301   0000              	GLOBAL _ftoe
302   0000              	GLOBAL _ftoa_callee
303   0000              	GLOBAL _ftoa
304   0000              	GLOBAL _exit_fastcall
305   0000              	GLOBAL _exit
306   0000              	GLOBAL _dtoh_callee
307   0000              	GLOBAL _dtoh
308   0000              	GLOBAL _dtog_callee
309   0000              	GLOBAL _dtog
310   0000              	GLOBAL _dtoe_callee
311   0000              	GLOBAL _dtoe
312   0000              	GLOBAL _dtoa_callee
313   0000              	GLOBAL _dtoa
314   0000              	GLOBAL _bsearch_callee
315   0000              	GLOBAL _bsearch
316   0000              	GLOBAL _atol_fastcall
317   0000              	GLOBAL _atol
318   0000              	GLOBAL _atoi_fastcall
319   0000              	GLOBAL _atoi
320   0000              	GLOBAL _atof_fastcall
321   0000              	GLOBAL _atof
322   0000              	GLOBAL _atexit_fastcall
323   0000              	GLOBAL _atexit
324   0000              	GLOBAL _at_quick_exit_fastcall
325   0000              	GLOBAL _at_quick_exit
326   0000              	GLOBAL _abs_fastcall
327   0000              	GLOBAL _abs
328   0000              	GLOBAL _abort
329   0000              	GLOBAL __strtou__callee
330   0000              	GLOBAL __strtou_
331   0000              	GLOBAL __strtoi__callee
332   0000              	GLOBAL __strtoi_
333   0000              	GLOBAL __random_uniform_xor_8__fastcall
334   0000              	GLOBAL __random_uniform_xor_8_
335   0000              	GLOBAL __random_uniform_xor_32__fastcall
336   0000              	GLOBAL __random_uniform_xor_32_
337   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
338   0000              	GLOBAL __random_uniform_cmwc_8_
339   0000              	GLOBAL __shellsort__callee
340   0000              	GLOBAL __shellsort_
341   0000              	GLOBAL __quicksort__callee
342   0000              	GLOBAL __quicksort_
343   0000              	GLOBAL __insertion_sort__callee
344   0000              	GLOBAL __insertion_sort_
345   0000              	GLOBAL __ldivu__callee
346   0000              	GLOBAL __ldivu_
347   0000              	GLOBAL __ldiv__callee
348   0000              	GLOBAL __ldiv_
349   0000              	GLOBAL __divu__callee
350   0000              	GLOBAL __divu_
351   0000              	GLOBAL __div__callee
352   0000              	GLOBAL __div_
353   0000              	GLOBAL _NIRVANAP_drawTW_raw_callee
354   0000              	GLOBAL _NIRVANAP_drawTW_raw
355   0000              	GLOBAL _NIRVANAP_drawTW_callee
356   0000              	GLOBAL _NIRVANAP_drawTW
357   0000              	GLOBAL _NIRVANAP_drawW_raw_callee
358   0000              	GLOBAL _NIRVANAP_drawW_raw
359   0000              	GLOBAL _NIRVANAP_drawW_callee
360   0000              	GLOBAL _NIRVANAP_drawW
361   0000              	GLOBAL _NIRVANAP_spriteT_callee
362   0000              	GLOBAL _NIRVANAP_spriteT
363   0000              	GLOBAL _NIRVANAP_fillC_callee
364   0000              	GLOBAL _NIRVANAP_fillC
365   0000              	GLOBAL _NIRVANAP_readC_callee
366   0000              	GLOBAL _NIRVANAP_readC
367   0000              	GLOBAL _NIRVANAP_paintC_callee
368   0000              	GLOBAL _NIRVANAP_paintC
369   0000              	GLOBAL _NIRVANAP_printC_callee
370   0000              	GLOBAL _NIRVANAP_printC
371   0000              	GLOBAL _NIRVANAP_fillT_raw_callee
372   0000              	GLOBAL _NIRVANAP_fillT_raw
373   0000              	GLOBAL _NIRVANAP_fillT_callee
374   0000              	GLOBAL _NIRVANAP_fillT
375   0000              	GLOBAL _NIRVANAP_drawT_raw_callee
376   0000              	GLOBAL _NIRVANAP_drawT_raw
377   0000              	GLOBAL _NIRVANAP_drawT_callee
378   0000              	GLOBAL _NIRVANAP_drawT
379   0000              	GLOBAL _NIRVANAP_stop
380   0000              	GLOBAL _NIRVANAP_start
381   0000              	GLOBAL _debug3
382   0000              	GLOBAL _debug2
383   0000              	GLOBAL _debug
384   0000              	GLOBAL _zx_print_str
385   0000              	GLOBAL _zx_print_int
386   0000              	GLOBAL _zx_print_chr
387   0000              	GLOBAL _zx_print_bonus_time
388   0000              	GLOBAL _zx_isr
389   0000              	GLOBAL _z80_otdr_callee
390   0000              	GLOBAL _z80_otdr
391   0000              	GLOBAL _z80_otir_callee
392   0000              	GLOBAL _z80_otir
393   0000              	GLOBAL _z80_outp_callee
394   0000              	GLOBAL _z80_outp
395   0000              	GLOBAL _z80_indr_callee
396   0000              	GLOBAL _z80_indr
397   0000              	GLOBAL _z80_inir_callee
398   0000              	GLOBAL _z80_inir
399   0000              	GLOBAL _z80_inp_fastcall
400   0000              	GLOBAL _z80_inp
401   0000              	GLOBAL _z80_set_int_state_fastcall
402   0000              	GLOBAL _z80_set_int_state
403   0000              	GLOBAL _z80_get_int_state
404   0000              	GLOBAL _z80_delay_tstate_fastcall
405   0000              	GLOBAL _z80_delay_tstate
406   0000              	GLOBAL _z80_delay_ms_fastcall
407   0000              	GLOBAL _z80_delay_ms
408   0000              	GLOBAL _im2_remove_generic_callback_callee
409   0000              	GLOBAL _im2_remove_generic_callback
410   0000              	GLOBAL _im2_prepend_generic_callback_callee
411   0000              	GLOBAL _im2_prepend_generic_callback
412   0000              	GLOBAL _im2_append_generic_callback_callee
413   0000              	GLOBAL _im2_append_generic_callback
414   0000              	GLOBAL _im2_create_generic_isr_8080_callee
415   0000              	GLOBAL _im2_create_generic_isr_8080
416   0000              	GLOBAL _im2_create_generic_isr_callee
417   0000              	GLOBAL _im2_create_generic_isr
418   0000              	GLOBAL _im2_install_isr_callee
419   0000              	GLOBAL _im2_install_isr
420   0000              	GLOBAL _im2_init_fastcall
421   0000              	GLOBAL _im2_init
422   0000              	GLOBAL _intrinsic_swap_word_32_fastcall
423   0000              	GLOBAL _intrinsic_swap_word_32
424   0000              	GLOBAL _intrinsic_swap_endian_32_fastcall
425   0000              	GLOBAL _intrinsic_swap_endian_32
426   0000              	GLOBAL _intrinsic_swap_endian_16_fastcall
427   0000              	GLOBAL _intrinsic_swap_endian_16
428   0000              	GLOBAL _intrinsic_return_de
429   0000              	GLOBAL _intrinsic_return_bc
430   0000              	GLOBAL _intrinsic_exx
431   0000              	GLOBAL _intrinsic_ex_de_hl
432   0000              	GLOBAL _intrinsic_nop
433   0000              	GLOBAL _intrinsic_im_2
434   0000              	GLOBAL _intrinsic_im_1
435   0000              	GLOBAL _intrinsic_im_0
436   0000              	GLOBAL _intrinsic_retn
437   0000              	GLOBAL _intrinsic_reti
438   0000              	GLOBAL _intrinsic_halt
439   0000              	GLOBAL _intrinsic_ei
440   0000              	GLOBAL _intrinsic_di
441   0000              	GLOBAL _intrinsic_stub
442   0000              	GLOBAL _intrinsic_outi
443   0000              	GLOBAL _intrinsic_ldi
444   0000              	GLOBAL _zx_pattern_fill_callee
445   0000              	GLOBAL _zx_pattern_fill
446   0000              	GLOBAL _zx_saddrpup_fastcall
447   0000              	GLOBAL _zx_saddrpup
448   0000              	GLOBAL _zx_saddrpright_callee
449   0000              	GLOBAL _zx_saddrpright
450   0000              	GLOBAL _zx_saddrpleft_callee
451   0000              	GLOBAL _zx_saddrpleft
452   0000              	GLOBAL _zx_saddrpdown_fastcall
453   0000              	GLOBAL _zx_saddrpdown
454   0000              	GLOBAL _zx_saddrcup_fastcall
455   0000              	GLOBAL _zx_saddrcup
456   0000              	GLOBAL _zx_saddrcright_fastcall
457   0000              	GLOBAL _zx_saddrcright
458   0000              	GLOBAL _zx_saddrcleft_fastcall
459   0000              	GLOBAL _zx_saddrcleft
460   0000              	GLOBAL _zx_saddrcdown_fastcall
461   0000              	GLOBAL _zx_saddrcdown
462   0000              	GLOBAL _zx_saddr2py_fastcall
463   0000              	GLOBAL _zx_saddr2py
464   0000              	GLOBAL _zx_saddr2px_fastcall
465   0000              	GLOBAL _zx_saddr2px
466   0000              	GLOBAL _zx_saddr2cy_fastcall
467   0000              	GLOBAL _zx_saddr2cy
468   0000              	GLOBAL _zx_saddr2cx_fastcall
469   0000              	GLOBAL _zx_saddr2cx
470   0000              	GLOBAL _zx_saddr2aaddr_fastcall
471   0000              	GLOBAL _zx_saddr2aaddr
472   0000              	GLOBAL _zx_py2saddr_fastcall
473   0000              	GLOBAL _zx_py2saddr
474   0000              	GLOBAL _zx_py2aaddr_fastcall
475   0000              	GLOBAL _zx_py2aaddr
476   0000              	GLOBAL _zx_pxy2saddr_callee
477   0000              	GLOBAL _zx_pxy2saddr
478   0000              	GLOBAL _zx_pxy2aaddr_callee
479   0000              	GLOBAL _zx_pxy2aaddr
480   0000              	GLOBAL _zx_px2bitmask_fastcall
481   0000              	GLOBAL _zx_px2bitmask
482   0000              	GLOBAL _zx_cy2saddr_fastcall
483   0000              	GLOBAL _zx_cy2saddr
484   0000              	GLOBAL _zx_cy2aaddr_fastcall
485   0000              	GLOBAL _zx_cy2aaddr
486   0000              	GLOBAL _zx_cxy2saddr_callee
487   0000              	GLOBAL _zx_cxy2saddr
488   0000              	GLOBAL _zx_cxy2aaddr_callee
489   0000              	GLOBAL _zx_cxy2aaddr
490   0000              	GLOBAL _zx_bitmask2px_fastcall
491   0000              	GLOBAL _zx_bitmask2px
492   0000              	GLOBAL _zx_aaddrcup_fastcall
493   0000              	GLOBAL _zx_aaddrcup
494   0000              	GLOBAL _zx_aaddrcright_fastcall
495   0000              	GLOBAL _zx_aaddrcright
496   0000              	GLOBAL _zx_aaddrcleft_fastcall
497   0000              	GLOBAL _zx_aaddrcleft
498   0000              	GLOBAL _zx_aaddrcdown_fastcall
499   0000              	GLOBAL _zx_aaddrcdown
500   0000              	GLOBAL _zx_aaddr2saddr_fastcall
501   0000              	GLOBAL _zx_aaddr2saddr
502   0000              	GLOBAL _zx_aaddr2py_fastcall
503   0000              	GLOBAL _zx_aaddr2py
504   0000              	GLOBAL _zx_aaddr2px_fastcall
505   0000              	GLOBAL _zx_aaddr2px
506   0000              	GLOBAL _zx_aaddr2cy_fastcall
507   0000              	GLOBAL _zx_aaddr2cy
508   0000              	GLOBAL _zx_aaddr2cx_fastcall
509   0000              	GLOBAL _zx_aaddr2cx
510   0000              	GLOBAL _zx_visit_wc_pix_callee
511   0000              	GLOBAL _zx_visit_wc_pix
512   0000              	GLOBAL _zx_visit_wc_attr_callee
513   0000              	GLOBAL _zx_visit_wc_attr
514   0000              	GLOBAL _zx_scroll_wc_up_pix_callee
515   0000              	GLOBAL _zx_scroll_wc_up_pix
516   0000              	GLOBAL _zx_scroll_wc_up_attr_callee
517   0000              	GLOBAL _zx_scroll_wc_up_attr
518   0000              	GLOBAL _zx_scroll_wc_up_callee
519   0000              	GLOBAL _zx_scroll_wc_up
520   0000              	GLOBAL _zx_scroll_up_pix_callee
521   0000              	GLOBAL _zx_scroll_up_pix
522   0000              	GLOBAL _zx_scroll_up_attr_callee
523   0000              	GLOBAL _zx_scroll_up_attr
524   0000              	GLOBAL _zx_scroll_up_callee
525   0000              	GLOBAL _zx_scroll_up
526   0000              	GLOBAL _zx_cls_wc_pix_callee
527   0000              	GLOBAL _zx_cls_wc_pix
528   0000              	GLOBAL _zx_cls_wc_attr_callee
529   0000              	GLOBAL _zx_cls_wc_attr
530   0000              	GLOBAL _zx_cls_wc_callee
531   0000              	GLOBAL _zx_cls_wc
532   0000              	GLOBAL _zx_cls_pix_fastcall
533   0000              	GLOBAL _zx_cls_pix
534   0000              	GLOBAL _zx_cls_attr_fastcall
535   0000              	GLOBAL _zx_cls_attr
536   0000              	GLOBAL _zx_cls_fastcall
537   0000              	GLOBAL _zx_cls
538   0000              	GLOBAL _zx_border_fastcall
539   0000              	GLOBAL _zx_border
540   0000              	GLOBAL _zx_tape_verify_block_callee
541   0000              	GLOBAL _zx_tape_verify_block
542   0000              	GLOBAL _zx_tape_save_block_callee
543   0000              	GLOBAL _zx_tape_save_block
544   0000              	GLOBAL _zx_tape_load_block_callee
545   0000              	GLOBAL _zx_tape_load_block
546   0000              	GLOBAL _spr_destroy
547   0000              	GLOBAL _spr_colision_boss
548   0000              	GLOBAL _spr_colision_b
549   0000              	GLOBAL _spr_unflattenP1
550   0000              	GLOBAL _spr_flatten
551   0000              	GLOBAL _spr_btile_paint_back
552   0000              	GLOBAL _spr_bullet_explode
553   0000              	GLOBAL _spr_init_effects
554   0000              	GLOBAL _spr_turn_horizontal
555   0000              	GLOBAL _spr_bullets_play
556   0000              	GLOBAL _spr_play_anim
557   0000              	GLOBAL _spr_add_anim
558   0000              	GLOBAL _spr_clear_scr
559   0000              	GLOBAL _spr_page_map
560   0000              	GLOBAL _spr_page_down
561   0000              	GLOBAL _spr_page_up
562   0000              	GLOBAL _spr_page_right
563   0000              	GLOBAL _spr_page_left
564   0000              	GLOBAL _spr_tile_paint
565   0000              	GLOBAL _spr_draw_index
566   0000              	GLOBAL _spr_brick_anim
567   0000              	GLOBAL _spr_back_repaint
568   0000              	GLOBAL _spr_tile_dir
569   0000              	GLOBAL _spr_tile
570   0000              	GLOBAL _spr_paint_player
571   0000              	GLOBAL _spr_paint
572   0000              	GLOBAL _spr_move_left
573   0000              	GLOBAL _spr_move_right
574   0000              	GLOBAL _spr_move_horizontal
575   0000              	GLOBAL _spr_move_down
576   0000              	GLOBAL _spr_move_up
577   0000              	GLOBAL _spr_set_right
578   0000              	GLOBAL _spr_set_left
579   0000              	GLOBAL _spr_set_down
580   0000              	GLOBAL _spr_set_up
581   0000              	GLOBAL _spr_calc_index
582   0000              	GLOBAL _spr_chktime
583   0000              	GLOBAL _game_match_back_strict
584   0000              	GLOBAL _game_match_back
585   0000              	GLOBAL _game_attribs
586   0000              	GLOBAL _game_boss_clear
587   0000              	GLOBAL _game_boss_kill
588   0000              	GLOBAL _game_obj_clear
589   0000              	GLOBAL _game_obj_chk
590   0000              	GLOBAL _game_obj_set
591   0000              	GLOBAL _game_shoot_fire_boss
592   0000              	GLOBAL _game_shoot_fire
593   0000              	GLOBAL _game_add_enemy
594   0000              	GLOBAL _game_print_header
595   0000              	GLOBAL _game_check_time
596   0000              	GLOBAL _game_rotate_attrib_osd
597   0000              	GLOBAL _game_rotate_attrib
598   0000              	GLOBAL _game_colour_message
599   0000              	GLOBAL _game_paint_attrib
600   0000              	GLOBAL _game_print_score
601   0000              	GLOBAL _game_check_cell
602   0000              	GLOBAL _game_check_map
603   0000              	GLOBAL _game_loop
604   0000              	GLOBAL _game_round_init
605   0000              	GLOBAL _game_set_checkpoint
606   0000              	GLOBAL _game_start_timer
607   0000              	GLOBAL _game_update_stats
608   0000              	GLOBAL _game_print_footer
609   0000              	GLOBAL _game_fill_row
610   0000              	GLOBAL _game_cls
611   0000              	GLOBAL _game_fps
612   0000              	GLOBAL _game_respawn
613   0000              	GLOBAL _game_draw_screen
614   0000              	GLOBAL _boss_draw_frame
615   0000              	GLOBAL _boss_draw
616   0000              	GLOBAL _boss_turn
617   0000              	GLOBAL _enemy_avoid_dead
618   0000              	GLOBAL _enemy_avoid_fall
619   0000              	GLOBAL _enemy_kill
620   0000              	GLOBAL _enemy_respawn
621   0000              	GLOBAL _enemy_init
622   0000              	GLOBAL _enemy_move
623   0000              	GLOBAL _enemy_turn
624   0000              	GLOBAL _enemy_static
625   0000              	GLOBAL _enemy_walk
626   0000              	GLOBAL _enemy_horizontal
627   0000              	GLOBAL _enemy_vertical
628   0000              	GLOBAL _ay_reset
629   0000              	GLOBAL _ay_song_stop
630   0000              	GLOBAL _ay_song_play
631   0000              	GLOBAL _ay_fx_stop
632   0000              	GLOBAL _ay_fx_play
633   0000              	GLOBAL _ay_is_playing
634   0000              	GLOBAL _audio_levelup
635   0000              	GLOBAL _audio_checkpoint
636   0000              	GLOBAL _audio_menu
637   0000              	GLOBAL _audio_game_end
638   0000              	GLOBAL _audio_level_complete
639   0000              	GLOBAL _audio_level_start
640   0000              	GLOBAL _audio_lotr_lose_a_life
641   0000              	GLOBAL _audio_mushroom
642   0000              	GLOBAL _audio_puerta
643   0000              	GLOBAL _audio_sin_mana
644   0000              	GLOBAL _audio_magic1
645   0000              	GLOBAL _audio_coin
646   0000              	GLOBAL _audio_golpe
647   0000              	GLOBAL _audio_salto
648   0000              	GLOBAL _audio_efecto
649   0000              	GLOBAL _audio_disparo_fire
650   0000              	GLOBAL _audio_disparo_axe
651   0000              	GLOBAL _audio_disparo2
652   0000              	GLOBAL _audio_disparo1
653   0000              	GLOBAL _audio_respawn
654   0000              	GLOBAL _audio_explosion1
655   0000              	GLOBAL _audio_explosion
656   0000              	GLOBAL _audio_ingame
657   0000              	GLOBAL _test_func
658   0000              	GLOBAL _test_proc
659   0000              	GLOBAL _in_mouse_kempston_wheel_delta
660   0000              	GLOBAL _in_mouse_kempston_wheel
661   0000              	GLOBAL _in_mouse_kempston_callee
662   0000              	GLOBAL _in_mouse_kempston
663   0000              	GLOBAL _in_mouse_kempston_setpos_callee
664   0000              	GLOBAL _in_mouse_kempston_setpos
665   0000              	GLOBAL _in_mouse_kempston_reset
666   0000              	GLOBAL _in_mouse_kempston_init
667   0000              	GLOBAL _in_mouse_amx_wheel_delta
668   0000              	GLOBAL _in_mouse_amx_wheel
669   0000              	GLOBAL _in_mouse_amx_callee
670   0000              	GLOBAL _in_mouse_amx
671   0000              	GLOBAL _in_mouse_amx_setpos_callee
672   0000              	GLOBAL _in_mouse_amx_setpos
673   0000              	GLOBAL _in_mouse_amx_reset
674   0000              	GLOBAL _in_mouse_amx_init_callee
675   0000              	GLOBAL _in_mouse_amx_init
676   0000              	GLOBAL _in_stick_sinclair2
677   0000              	GLOBAL _in_stick_sinclair1
678   0000              	GLOBAL _in_stick_kempston
679   0000              	GLOBAL _in_stick_fuller
680   0000              	GLOBAL _in_stick_cursor
681   0000              	GLOBAL _in_stick_keyboard_fastcall
682   0000              	GLOBAL _in_stick_keyboard
683   0000              	GLOBAL _in_wait_nokey
684   0000              	GLOBAL _in_wait_key
685   0000              	GLOBAL _in_test_key
686   0000              	GLOBAL _in_pause_fastcall
687   0000              	GLOBAL _in_pause
688   0000              	GLOBAL _in_key_scancode_fastcall
689   0000              	GLOBAL _in_key_scancode
690   0000              	GLOBAL _in_key_pressed_fastcall
691   0000              	GLOBAL _in_key_pressed
692   0000              	GLOBAL _in_inkey
693   0000              	GLOBAL _NIRVANAP_CHAR_TABLE
694   0000              	GLOBAL _NIRVANAP_WIDE_IMAGES
695   0000              	GLOBAL _NIRVANAP_TILE_IMAGES
696   0000              	GLOBAL _NIRVANAP_HOLE
697   0000              	GLOBAL _NIRVANAP_ISR_HOOK
698   0000              	GLOBAL _scan_map
699   0000              	GLOBAL _key_map
700   0000              	GLOBAL _player_lvl_table
701   0000              	GLOBAL _stp_row
702   0000              	GLOBAL _stp_col
703   0000              	GLOBAL _stp_tile
704   0000              	GLOBAL _map_paper_last_a
705   0000              	GLOBAL _map_paper_last
706   0000              	GLOBAL _map_paper_clr
707   0000              	GLOBAL _map_paper
708   0000              	GLOBAL _draw_count
709   0000              	GLOBAL _g_player_hit_right
710   0000              	GLOBAL _g_player_hit_left
711   0000              	GLOBAL _bullet_count
712   0000              	GLOBAL _spr_hack
713   0000              	GLOBAL _boss_stat
714   0000              	GLOBAL _boss_time_fire
715   0000              	GLOBAL _boss_time
716   0000              	GLOBAL _boss_tile
717   0000              	GLOBAL _boss_inc
718   0000              	GLOBAL _boss_col
719   0000              	GLOBAL _boss_lin
720   0000              	GLOBAL _bullet
721   0000              	GLOBAL _bullet_vel
722   0000              	GLOBAL _bullet_frames
723   0000              	GLOBAL _bullet_colint
724   0000              	GLOBAL _bullet_dir
725   0000              	GLOBAL _bullet_tile
726   0000              	GLOBAL _bullet_col
727   0000              	GLOBAL _bullet_lin
728   0000              	GLOBAL _bullet_col0
729   0000              	GLOBAL _bullet_lin0
730   0000              	GLOBAL _bullet_max
731   0000              	GLOBAL _bullet_class
732   0000              	GLOBAL _mush_class
733   0000              	GLOBAL _mush_index
734   0000              	GLOBAL _anim_count
735   0000              	GLOBAL _anim_respanwn
736   0000              	GLOBAL _anim_loop
737   0000              	GLOBAL _anim_end
738   0000              	GLOBAL _anim_int
739   0000              	GLOBAL _anim_tile
740   0000              	GLOBAL _anim_col
741   0000              	GLOBAL _anim_lin
742   0000              	GLOBAL _map_heigth
743   0000              	GLOBAL _map_width
744   0000              	GLOBAL _scr_curr
745   0000              	GLOBAL _sprite_kind
746   0000              	GLOBAL _scr_obj1
747   0000              	GLOBAL _scr_obj0
748   0000              	GLOBAL _scr_map
749   0000              	GLOBAL _sprite_speed_alt
750   0000              	GLOBAL _spr_init
751   0000              	GLOBAL _spr_map_tile
752   0000              	GLOBAL _sprite_frames
753   0000              	GLOBAL _sprite_speed
754   0000              	GLOBAL _screen_ink
755   0000              	GLOBAL _screen_paper
756   0000              	GLOBAL _player_onstair
757   0000              	GLOBAL _game_start_scr
758   0000              	GLOBAL _game_respawn_tile
759   0000              	GLOBAL _game_respawn_index
760   0000              	GLOBAL _game_respawn_time
761   0000              	GLOBAL _game_score_top
762   0000              	GLOBAL _player_coins
763   0000              	GLOBAL _player_lives
764   0000              	GLOBAL _game_over
765   0000              	GLOBAL _game_sound
766   0000              	GLOBAL _game_inf_lives
767   0000              	GLOBAL _game_inmune
768   0000              	GLOBAL _sprite_curr_index
769   0000              	GLOBAL _spr_count
770   0000              	GLOBAL _bullet_time
771   0000              	GLOBAL _anim_time
772   0000              	GLOBAL _frame_time
773   0000              	GLOBAL _curr_time
774   0000              	GLOBAL _s_state
775   0000              	GLOBAL _attrib_osd
776   0000              	GLOBAL _attrib_hl
777   0000              	GLOBAL _attrib
778   0000              	GLOBAL _zx_val_asm
779   0000              	GLOBAL _enemies
780   0000              	GLOBAL _tmp_ui
781   0000              	GLOBAL _tmp_sc
782   0000              	GLOBAL _tmp_uc
783   0000              	GLOBAL _tmp1
784   0000              	GLOBAL _tmp0
785   0000              	GLOBAL _tmp
786   0000              	GLOBAL _index1
787   0000              	GLOBAL _index0
788   0000              	GLOBAL _loop_count
789   0000              	GLOBAL _s_class
790   0000              	GLOBAL _s_col1
791   0000              	GLOBAL _s_col0
792   0000              	GLOBAL _s_lin1
793   0000              	GLOBAL _s_lin0
794   0000              	GLOBAL _s_tile1
795   0000              	GLOBAL _s_tile0
796   0000              	GLOBAL _player_brick_time
797   0000              	GLOBAL _player_hit_count
798   0000              	GLOBAL _game_debug
799   0000              	GLOBAL _sprite_horizontal_check
800   0000              	GLOBAL _sprite_on_air
801   0000              	GLOBAL _sprite
802   0000              	GLOBAL _fps
803   0000              	GLOBAL _menu_curr_sel
804   0000              	GLOBAL _game_control_fire_lock
805   0000              	GLOBAL _game_control_mode
806   0000              	GLOBAL _game_respawn_curr_time
807   0000              	GLOBAL _game_round_up
808   0000              	GLOBAL _game_mush_count
809   0000              	GLOBAL _game_song_play_start
810   0000              	GLOBAL _game_song_play
811   0000              	GLOBAL _game_boss_fix
812   0000              	GLOBAL _game_boss_hit
813   0000              	GLOBAL _game_boss_alive
814   0000              	GLOBAL _game_boss
815   0000              	GLOBAL _game_world
816   0000              	GLOBAL _game_gravity
817   0000              	GLOBAL _player_onfire
818   0000              	GLOBAL _player_anim_stair
819   0000              	GLOBAL _player_hit_time
820   0000              	GLOBAL _game_checkpoint_scr
821   0000              	GLOBAL _game_checkpoint_lin
822   0000              	GLOBAL _game_checkpoint_col
823   0000              	GLOBAL _player_jump_check
824   0000              	GLOBAL _player_lin_scr
825   0000              	GLOBAL _player_col_scr
826   0000              	GLOBAL _player_lvl
827   0000              	GLOBAL _player_int
828   0000              	GLOBAL _player_str
829   0000              	GLOBAL _player_max_vita
830   0000              	GLOBAL _player_max_mana
831   0000              	GLOBAL _player_vita
832   0000              	GLOBAL _player_mana
833   0000              	GLOBAL _player_keys
834   0000              	GLOBAL _player_vel_inc
835   0000              	GLOBAL _player_vel_y1
836   0000              	GLOBAL _player_vel_y0
837   0000              	GLOBAL _player_vel_y
838   0000              	GLOBAL _player_vel_x
839   0000              	GLOBAL _player_score
840   0000              	GLOBAL _last_time
841   0000              	GLOBAL _spr_timer
842   0000              	GLOBAL _jump_lin
843   0000              	GLOBAL _player_hit_col
844   0000              	GLOBAL _player_hit_lin
845   0000              	GLOBAL _colint
846   0000              	GLOBAL _col
847   0000              	GLOBAL _tbuffer
848   0000              	GLOBAL _lin
849   0000              	GLOBAL _tile
850   0000              	GLOBAL _state_a
851   0000              	GLOBAL _state
852   0000              	GLOBAL _class
853   0000              	GLOBAL _dirs_alt
854   0000              	GLOBAL _dirs
855   0000              	GLOBAL _k2
856   0000              	GLOBAL _k1
857   0000              	GLOBAL _joyfunc2
858   0000              	GLOBAL _joyfunc1
859   0000              	GLOBAL _btiles
860   0000              	GLOBAL _spec128
861   0000              	GLOBAL _GLOBAL_ZX_PORT_7FFD
862   0000              	GLOBAL _GLOBAL_ZX_PORT_1FFD
863   0000              	GLOBAL _GLOBAL_ZX_PORT_FE
864   0000              	GLOBAL _ay_fx_06_disparo_fire
865   0000              	GLOBAL _ay_fx_06_disparo_axe
866   0000              	GLOBAL _ay_fx_06_respawn
867   0000              	GLOBAL _ay_fx_06_explosion1
868   0000              	GLOBAL _ay_fx_06_efecto
869   0000              	GLOBAL _ay_fx_06_disparo2
870   0000              	GLOBAL _ay_fx_06_disparo1
871   0000              	GLOBAL _ay_fx_06_checkpoint
872   0000              	GLOBAL _ay_fx_06_levelup
873   0000              	GLOBAL _ay_fx_06_mushroom
874   0000              	GLOBAL _ay_fx_06_magic
875   0000              	GLOBAL _ay_fx_06_sin_mana
876   0000              	GLOBAL _ay_fx_06_salto
877   0000              	GLOBAL _ay_fx_06_puerta
878   0000              	GLOBAL _ay_fx_06_magic1
879   0000              	GLOBAL _ay_fx_06_golpe
880   0000              	GLOBAL _ay_fx_06_explosion
881   0000              	GLOBAL _ay_fx_06_dano_por_toque
882   0000              	GLOBAL _ay_fx_06_coin
883   0000              	GLOBAL _ay_song_06_lotr_level_start
884   0000              	GLOBAL _ay_song_06_lotr_level_complete
885   0000              	GLOBAL _ay_song_06_lotr_lose_a_life
886   0000              	GLOBAL _ay_song_04_ciel
887   0000              	GLOBAL _ay_song_04_lotr
888   0000              	GLOBAL _ay_song_04_luna
889   0000              	GLOBAL _ay_song_04_sunflower
890   0000              	GLOBAL _world0_h
891   0000              	GLOBAL _world0_w
892   0000              	GLOBAL _world0
893   0000              	GLOBAL _paper0
894   0000              	GLOBAL _lenght0
895   0000              	GLOBAL _start_scr0
896   0000              ;--------------------------------------------------------
897   0000              ; special function registers
898   0000              ;--------------------------------------------------------
899   0000              defc _IO_FE	=	0x00fe
900   0000              defc _IO_1FFD	=	0x1ffd
901   0000              defc _IO_7FFD	=	0x7ffd
902   0000              ;--------------------------------------------------------
903   0000              ; ram data
904   0000              ;--------------------------------------------------------
905   0000              	SECTION bss_compiler
906   0000              ;--------------------------------------------------------
907   0000              ; ram data
908   0000              ;--------------------------------------------------------
909   0000              
910   0000              IF 0
911   0000              
912   0000              ; .area _INITIALIZED removed by z88dk
913   0000              
914   0000              
915   0000              ENDIF
916   0000              
917   0000              ;--------------------------------------------------------
918   0000              ; absolute external ram data
919   0000              ;--------------------------------------------------------
920   0000              	SECTION IGNORE
921   0000              ;--------------------------------------------------------
922   0000              ; global & static initialisations
923   0000              ;--------------------------------------------------------
924   0000              	SECTION code_crt_init
925   0000              ;--------------------------------------------------------
926   0000              ; Home
927   0000              ;--------------------------------------------------------
928   0000              	SECTION IGNORE
929   0000              ;--------------------------------------------------------
930   0000              ; code
931   0000              ;--------------------------------------------------------
932   0000              	SECTION code_compiler
933   0000              ;	---------------------------------
934   0000              ; Function player_init
935   0000              ; ---------------------------------
936   0000              _player_init:
937   0000  CD 00 00    	call	___sdcc_enter_ix
938   0003  21 07 00    	ld	hl, +(_class + 0x0007)
939   0006  36 00       	ld	(hl),0x00
940   0008  21 07 00    	ld	hl, +(_tile + 0x0007)
941   000B  DD 7E 06    	ld	a,(ix+6)
942   000E  77          	ld	(hl), a
943   000F  21 07 00    	ld	hl, +(_lin + 0x0007)
944   0012  DD 7E 04    	ld	a,(ix+4)
945   0015  77          	ld	(hl), a
946   0016  21 07 00    	ld	hl, +(_col + 0x0007)
947   0019  DD 7E 05    	ld	a,(ix+5)
948   001C  77          	ld	(hl), a
949   001D  21 07 00    	ld	hl, +(_colint + 0x0007)
950   0020  36 00       	ld	(hl),0x00
951   0022  21 07 00    	ld	hl, +(_state + 0x0007)
952   0025  36 00       	ld	(hl),0x00
953   0027  01 07 00    	ld	bc,_state_a+7
954   002A  AF          	xor	a, a
955   002B  02          	ld	(bc), a
956   002C  21 07 00    	ld	hl, +(_jump_lin + 0x0007)
957   002F  DD 7E 04    	ld	a,(ix+4)
958   0032  77          	ld	(hl), a
959   0033  ED 5B 00 00 	ld	de,(_curr_time)
960   0037  ED 53 0E 00 	ld	(_last_time + 0x000e),de
961   003B  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
962   003E  36 00       	ld	(hl),0x00
963   0040  0A          	ld	a, (bc)
964   0041  F6 11       	or	a,+(0x01|0x10)
965   0043  02          	ld	(bc),a
966   0044  21 00 00    	ld	hl,_player_hit_col
967   0047  36 00       	ld	(hl),0x00
968   0049  21 00 00    	ld	hl,_player_hit_lin
969   004C  36 00       	ld	(hl),0x00
970   004E  21 00 00    	ld	hl,_player_onstair
971   0051  36 00       	ld	(hl),0x00
972   0053  21 00 00    	ld	hl,_player_onfire
973   0056  36 00       	ld	(hl),0x00
974   0058  DD 66 05    	ld	h,(ix+5)
975   005B  DD 6E 04    	ld	l,(ix+4)
976   005E  E5          	push	hl
977   005F  DD 56 06    	ld	d,(ix+6)
978   0062  1E 07       	ld	e,0x07
979   0064  D5          	push	de
980   0065  CD 00 00    	call	_NIRVANAP_spriteT_callee
981   0068  DD E1       	pop	ix
982   006A  C9          	ret
983   006B              	SECTION code_compiler
984   006B              ;	---------------------------------
985   006B              ; Function player_turn
986   006B              ; ---------------------------------
987   006B              _player_turn:
988   006B  21 00 00    	ld	hl,_sprite
989   006E  CD 00 00    	call	_spr_chktime
990   0071  7D          	ld	a, l
991   0072  B7          	or	a, a
992   0073  C8          	ret	Z
993   0074  21 00 00    	ld	hl,_k1
994   0077  E5          	push	hl
995   0078  2A 00 00    	ld	hl,(_joyfunc1)
996   007B  CD 00 00    	call	___sdcc_call_hl
997   007E  F1          	pop	af
998   007F  7D          	ld	a,l
999   0080  32 00 00    	ld	(_dirs),a
1000  0083  21 00 00    	ld	hl,_k2
1001  0086  E5          	push	hl
1002  0087  2A 00 00    	ld	hl,(_joyfunc2)
1003  008A  CD 00 00    	call	___sdcc_call_hl
1004  008D  F1          	pop	af
1005  008E  7D          	ld	a,l
1006  008F  32 00 00    	ld	(_dirs_alt),a
1007  0092  3A 07 00    	ld	a,(_lin + 0x0007)
1008  0095  32 00 00    	ld	(_s_lin0),a
1009  0098  3A 07 00    	ld	a,(_col + 0x0007)
1010  009B  32 00 00    	ld	(_s_col0),a
1011  009E  3A 07 00    	ld	a,(_state + 0x0007)
1012  00A1  32 00 00    	ld	(_s_state),a
1013  00A4  21 00 00    	ld	hl,_s_class
1014  00A7  36 00       	ld	(hl),0x00
1015  00A9  CD B6 00    	call	_player_move
1016  00AC  CD E5 03    	call	_player_collision
1017  00AF  3A 00 00    	ld	a,(_s_state)
1018  00B2  32 07 00    	ld	((_state + 0x0007)),a
1019  00B5  C9          	ret
1020  00B6              	SECTION code_compiler
1021  00B6              ;	---------------------------------
1022  00B6              ; Function player_move
1023  00B6              ; ---------------------------------
1024  00B6              _player_move:
1025  00B6  CD 9F 03    	call	_player_fire
1026  00B9  21 00 00    	ld	hl,_s_state
1027  00BC  CB 46       	bit	0,(hl)
1028  00BE  20 04       	jr	NZ,l_player_move_00105
1029  00C0  CB 4E       	bit	1, (hl)
1030  00C2  28 0A       	jr	Z,l_player_move_00106
1031  00C4              l_player_move_00105:
1032  00C4  21 00 00    	ld	hl,_sprite_on_air
1033  00C7  36 01       	ld	(hl),0x01
1034  00C9  CD DD 0D    	call	_player_move_jump
1035  00CC  18 17       	jr	l_player_move_00107
1036  00CE              l_player_move_00106:
1037  00CE  21 00 00    	ld	hl,_sprite_on_air
1038  00D1  36 00       	ld	(hl),0x00
1039  00D3  3A 00 00    	ld	a,(_player_onfire)
1040  00D6  B7          	or	a, a
1041  00D7  20 03       	jr	NZ,l_player_move_00102
1042  00D9  CD 30 02    	call	_player_move_input
1043  00DC              l_player_move_00102:
1044  00DC  3A 00 00    	ld	a,(_player_onstair)
1045  00DF  B7          	or	a, a
1046  00E0  20 03       	jr	NZ,l_player_move_00107
1047  00E2  CD 67 0C    	call	_player_check_floor
1048  00E5              l_player_move_00107:
1049  00E5  3A 00 00    	ld	a,(_player_onfire)
1050  00E8  B7          	or	a, a
1051  00E9  20 0C       	jr	NZ,l_player_move_00116
1052  00EB  CD 00 00    	call	_spr_paint_player
1053  00EE  7D          	ld	a, l
1054  00EF  B7          	or	a, a
1055  00F0  28 39       	jr	Z,l_player_move_00117
1056  00F2  CD 3F 07    	call	_player_check_map
1057  00F5  18 34       	jr	l_player_move_00117
1058  00F7              l_player_move_00116:
1059  00F7  CD 00 00    	call	_spr_back_repaint
1060  00FA  3A 07 00    	ld	a,(_state_a + 0x0007)
1061  00FD  CB 67       	bit	4, a
1062  00FF  28 10       	jr	Z,l_player_move_00112
1063  0101  21 07 00    	ld	hl,+(_col + 0x0007)
1064  0104  46          	ld	b, (hl)
1065  0105  21 07 00    	ld	hl,+(_lin + 0x0007)
1066  0108  4E          	ld	c, (hl)
1067  0109  C5          	push	bc
1068  010A  21 07 D0    	ld	hl,0xd007
1069  010D  E5          	push	hl
1070  010E  CD 00 00    	call	_NIRVANAP_spriteT_callee
1071  0111              l_player_move_00112:
1072  0111  3A 07 00    	ld	a,(_state_a + 0x0007)
1073  0114  CB 5F       	bit	3, a
1074  0116  28 10       	jr	Z,l_player_move_00114
1075  0118  21 07 00    	ld	hl,+(_col + 0x0007)
1076  011B  56          	ld	d, (hl)
1077  011C  21 07 00    	ld	hl,+(_lin + 0x0007)
1078  011F  5E          	ld	e, (hl)
1079  0120  D5          	push	de
1080  0121  21 07 D1    	ld	hl,0xd107
1081  0124  E5          	push	hl
1082  0125  CD 00 00    	call	_NIRVANAP_spriteT_callee
1083  0128              l_player_move_00114:
1084  0128  CD 3F 07    	call	_player_check_map
1085  012B              l_player_move_00117:
1086  012B  3A 00 00    	ld	a,(_player_hit_lin)
1087  012E  B7          	or	a, a
1088  012F  28 03       	jr	Z,l_player_move_00119
1089  0131  CD CB 0B    	call	_player_hit_platform_clear
1090  0134              l_player_move_00119:
1091  0134  2E 00       	ld	l,0x00
1092  0136  C9          	ret
1093  0137              	SECTION code_compiler
1094  0137              ;	---------------------------------
1095  0137              ; Function player_check_input
1096  0137              ; ---------------------------------
1097  0137              _player_check_input:
1098  0137  21 00 00    	ld	hl,_dirs
1099  013A  CB 56       	bit	2,(hl)
1100  013C  28 06       	jr	Z,l_player_check_input_00102
1101  013E  CB 5E       	bit	3,(hl)
1102  0140  28 02       	jr	Z,l_player_check_input_00102
1103  0142  36 00       	ld	(hl),0x00
1104  0144              l_player_check_input_00102:
1105  0144  21 00 00    	ld	hl,_dirs
1106  0147  CB 7E       	bit	7,(hl)
1107  0149  20 20       	jr	NZ,l_player_check_input_00104
1108  014B  CB 56       	bit	2,(hl)
1109  014D  20 1C       	jr	NZ,l_player_check_input_00104
1110  014F  CB 5E       	bit	3,(hl)
1111  0151  20 18       	jr	NZ,l_player_check_input_00104
1112  0153  CB 46       	bit	0, (hl)
1113  0155  20 14       	jr	NZ,l_player_check_input_00104
1114  0157  21 00 00    	ld	hl,_dirs
1115  015A  CB 4E       	bit	1, (hl)
1116  015C  20 0D       	jr	NZ,l_player_check_input_00104
1117  015E  3A 00 00    	ld	a,(_game_control_mode)
1118  0161  B7          	or	a, a
1119  0162  20 0B       	jr	NZ,l_player_check_input_00105
1120  0164  21 00 00    	ld	hl,_dirs_alt
1121  0167  CB 7E       	bit	7, (hl)
1122  0169  28 04       	jr	Z,l_player_check_input_00105
1123  016B              l_player_check_input_00104:
1124  016B  2E 01       	ld	l,0x01
1125  016D  18 07       	jr	l_player_check_input_00113
1126  016F              l_player_check_input_00105:
1127  016F  21 00 00    	ld	hl,_game_control_fire_lock
1128  0172  36 00       	ld	(hl),0x00
1129  0174  2E 00       	ld	l,0x00
1130  0176              l_player_check_input_00113:
1131  0176  C9          	ret
1132  0177              	SECTION code_compiler
1133  0177              ;	---------------------------------
1134  0177              ; Function player_action_fire
1135  0177              ; ---------------------------------
1136  0177              _player_action_fire:
1137  0177  3A 00 00    	ld	a,(_game_control_mode)
1138  017A  B7          	or	a, a
1139  017B  28 1C       	jr	Z,l_player_action_fire_00101
1140  017D  21 00 00    	ld	hl,_dirs
1141  0180  7E          	ld	a, (hl)
1142  0181  CB 07       	rlc	a
1143  0183  E6 01       	and	a,0x01
1144  0185  4F          	ld	c, a
1145  0186  7E          	ld	a, (hl)
1146  0187  E6 01       	and	a,0x01
1147  0189  47          	ld	b, a
1148  018A  3A 00 00    	ld	a,(_game_control_mode)
1149  018D  3D          	dec	a
1150  018E  28 11       	jr	Z,l_player_action_fire_00102
1151  0190  3A 00 00    	ld	a,(_game_control_mode)
1152  0193  D6 02       	sub	a,0x02
1153  0195  28 1A       	jr	Z,l_player_action_fire_00103
1154  0197  18 3C       	jr	l_player_action_fire_00109
1155  0199              l_player_action_fire_00101:
1156  0199  3A 00 00    	ld	a,(_dirs_alt)
1157  019C  E6 80       	and	a,0x80
1158  019E  6F          	ld	l, a
1159  019F  18 36       	jr	l_player_action_fire_00110
1160  01A1              l_player_action_fire_00102:
1161  01A1  CB 41       	bit	0, c
1162  01A3  28 04       	jr	Z,l_player_action_fire_00112
1163  01A5  78          	ld	a, b
1164  01A6  B7          	or	a, a
1165  01A7  28 04       	jr	Z,l_player_action_fire_00113
1166  01A9              l_player_action_fire_00112:
1167  01A9  2E 00       	ld	l,0x00
1168  01AB  18 02       	jr	l_player_action_fire_00114
1169  01AD              l_player_action_fire_00113:
1170  01AD  2E 01       	ld	l,0x01
1171  01AF              l_player_action_fire_00114:
1172  01AF  18 26       	jr	l_player_action_fire_00110
1173  01B1              l_player_action_fire_00103:
1174  01B1  3A 00 00    	ld	a,(_game_control_fire_lock)
1175  01B4  B7          	or	a, a
1176  01B5  20 1E       	jr	NZ,l_player_action_fire_00109
1177  01B7  3A 00 00    	ld	a,(_player_onstair)
1178  01BA  B7          	or	a, a
1179  01BB  28 10       	jr	Z,l_player_action_fire_00105
1180  01BD  CB 41       	bit	0, c
1181  01BF  28 04       	jr	Z,l_player_action_fire_00115
1182  01C1  78          	ld	a, b
1183  01C2  B7          	or	a, a
1184  01C3  28 04       	jr	Z,l_player_action_fire_00116
1185  01C5              l_player_action_fire_00115:
1186  01C5  2E 00       	ld	l,0x00
1187  01C7  18 02       	jr	l_player_action_fire_00117
1188  01C9              l_player_action_fire_00116:
1189  01C9  2E 01       	ld	l,0x01
1190  01CB              l_player_action_fire_00117:
1191  01CB  18 0A       	jr	l_player_action_fire_00110
1192  01CD              l_player_action_fire_00105:
1193  01CD  3A 00 00    	ld	a,(_dirs)
1194  01D0  E6 80       	and	a,0x80
1195  01D2  6F          	ld	l, a
1196  01D3  18 02       	jr	l_player_action_fire_00110
1197  01D5              l_player_action_fire_00109:
1198  01D5  2E 00       	ld	l,0x00
1199  01D7              l_player_action_fire_00110:
1200  01D7  C9          	ret
1201  01D8              	SECTION code_compiler
1202  01D8              ;	---------------------------------
1203  01D8              ; Function player_action_jump
1204  01D8              ; ---------------------------------
1205  01D8              _player_action_jump:
1206  01D8  3A 00 00    	ld	a,(_dirs)
1207  01DB  E6 80       	and	a,0x80
1208  01DD  4F          	ld	c, a
1209  01DE  3A 00 00    	ld	a,(_game_control_mode)
1210  01E1  B7          	or	a, a
1211  01E2  28 15       	jr	Z,l_player_action_jump_00101
1212  01E4  3A 00 00    	ld	a,(_dirs)
1213  01E7  E6 01       	and	a,0x01
1214  01E9  47          	ld	b, a
1215  01EA  3A 00 00    	ld	a,(_game_control_mode)
1216  01ED  3D          	dec	a
1217  01EE  28 0C       	jr	Z,l_player_action_jump_00102
1218  01F0  3A 00 00    	ld	a,(_game_control_mode)
1219  01F3  D6 02       	sub	a,0x02
1220  01F5  28 1C       	jr	Z,l_player_action_jump_00103
1221  01F7  18 34       	jr	l_player_action_jump_00110
1222  01F9              l_player_action_jump_00101:
1223  01F9  69          	ld	l, c
1224  01FA  18 33       	jr	l_player_action_jump_00111
1225  01FC              l_player_action_jump_00102:
1226  01FC  3A 00 00    	ld	a,(_dirs)
1227  01FF  CB 07       	rlc	a
1228  0201  E6 01       	and	a,0x01
1229  0203  CB 47       	bit	0, a
1230  0205  28 04       	jr	Z,l_player_action_jump_00113
1231  0207  78          	ld	a, b
1232  0208  B7          	or	a, a
1233  0209  20 04       	jr	NZ,l_player_action_jump_00114
1234  020B              l_player_action_jump_00113:
1235  020B  2E 00       	ld	l,0x00
1236  020D  18 02       	jr	l_player_action_jump_00115
1237  020F              l_player_action_jump_00114:
1238  020F  2E 01       	ld	l,0x01
1239  0211              l_player_action_jump_00115:
1240  0211  18 1C       	jr	l_player_action_jump_00111
1241  0213              l_player_action_jump_00103:
1242  0213  3A 00 00    	ld	a,(_player_onstair)
1243  0216  B7          	or	a, a
1244  0217  28 11       	jr	Z,l_player_action_jump_00108
1245  0219  79          	ld	a, c
1246  021A  B7          	or	a, a
1247  021B  28 10       	jr	Z,l_player_action_jump_00110
1248  021D  78          	ld	a, b
1249  021E  B7          	or	a, a
1250  021F  28 0C       	jr	Z,l_player_action_jump_00110
1251  0221  21 00 00    	ld	hl,_game_control_fire_lock
1252  0224  36 01       	ld	(hl),0x01
1253  0226  2E 01       	ld	l,0x01
1254  0228  18 05       	jr	l_player_action_jump_00111
1255  022A              l_player_action_jump_00108:
1256  022A  68          	ld	l, b
1257  022B  18 02       	jr	l_player_action_jump_00111
1258  022D              l_player_action_jump_00110:
1259  022D  2E 00       	ld	l,0x00
1260  022F              l_player_action_jump_00111:
1261  022F  C9          	ret
1262  0230              	SECTION code_compiler
1263  0230              ;	---------------------------------
1264  0230              ; Function player_move_input
1265  0230              ; ---------------------------------
1266  0230              _player_move_input:
1267  0230  CD 37 01    	call	_player_check_input
1268  0233  7D          	ld	a, l
1269  0234  B7          	or	a, a
1270  0235  CA 5F 03    	jp	Z, l_player_move_input_00142
1271  0238  CD D8 01    	call	_player_action_jump
1272  023B  7D          	ld	a, l
1273  023C  B7          	or	a, a
1274  023D  28 37       	jr	Z,l_player_move_input_00102
1275  023F  21 00 00    	ld	hl,_player_vel_inc
1276  0242  36 01       	ld	(hl),0x01
1277  0244  CD 00 00    	call	_audio_salto
1278  0247  21 00 00    	ld	hl,_player_onstair
1279  024A  36 00       	ld	(hl),0x00
1280  024C  21 00 00    	ld	hl,_s_state
1281  024F  CD 00 00    	call	_spr_set_up
1282  0252  3A 07 00    	ld	a,(_lin + 0x0007)
1283  0255  32 07 00    	ld	(_jump_lin+7),a
1284  0258  3A 00 00    	ld	a,(_s_state)
1285  025B  32 07 00    	ld	((_state + 0x0007)),a
1286  025E  21 64 08    	ld	hl,0x0864
1287  0261  E5          	push	hl
1288  0262  CD 1E 07    	call	_player_tile
1289  0265  F1          	pop	af
1290  0266  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
1291  0269  36 02       	ld	(hl),0x02
1292  026B  3A 00 00    	ld	a,(_player_vel_y0)
1293  026E  32 00 00    	ld	(_player_vel_y),a
1294  0271  2E 01       	ld	l,0x01
1295  0273  C3 85 03    	jp	l_player_move_input_00144
1296  0276              l_player_move_input_00102:
1297  0276  21 00 00    	ld	hl,_dirs
1298  0279  CB 5E       	bit	3, (hl)
1299  027B  28 20       	jr	Z,l_player_move_input_00106
1300  027D  CD 86 03    	call	_player_fix_walk_lin
1301  0280  21 00 00    	ld	hl,_s_state
1302  0283  CD 00 00    	call	_spr_set_right
1303  0286  01 07 00    	ld	bc,_state_a+7
1304  0289  0A          	ld	a, (bc)
1305  028A  F6 10       	or	a,0x10
1306  028C  E6 F7       	and	a,0xf7
1307  028E  02          	ld	(bc),a
1308  028F  3A 00 00    	ld	a,(_player_onstair)
1309  0292  B7          	or	a, a
1310  0293  28 05       	jr	Z,l_player_move_input_00104
1311  0295  2E 00       	ld	l,0x00
1312  0297  CD 76 06    	call	_player_check_stairs
1313  029A              l_player_move_input_00104:
1314  029A  CD 00 00    	call	_spr_move_horizontal
1315  029D              l_player_move_input_00106:
1316  029D  21 00 00    	ld	hl,_dirs
1317  02A0  CB 56       	bit	2, (hl)
1318  02A2  28 20       	jr	Z,l_player_move_input_00110
1319  02A4  CD 86 03    	call	_player_fix_walk_lin
1320  02A7  21 00 00    	ld	hl,_s_state
1321  02AA  CD 00 00    	call	_spr_set_left
1322  02AD  01 07 00    	ld	bc,_state_a+7
1323  02B0  0A          	ld	a, (bc)
1324  02B1  F6 08       	or	a,0x08
1325  02B3  E6 EF       	and	a,0xef
1326  02B5  02          	ld	(bc),a
1327  02B6  3A 00 00    	ld	a,(_player_onstair)
1328  02B9  B7          	or	a, a
1329  02BA  28 05       	jr	Z,l_player_move_input_00108
1330  02BC  2E 00       	ld	l,0x00
1331  02BE  CD 76 06    	call	_player_check_stairs
1332  02C1              l_player_move_input_00108:
1333  02C1  CD 00 00    	call	_spr_move_horizontal
1334  02C4              l_player_move_input_00110:
1335  02C4  21 00 00    	ld	hl,_dirs
1336  02C7  CB 46       	bit	0, (hl)
1337  02C9  28 36       	jr	Z,l_player_move_input_00122
1338  02CB  2E 00       	ld	l,0x00
1339  02CD  CD 76 06    	call	_player_check_stairs
1340  02D0  3A 00 00    	ld	a,(_player_onstair)
1341  02D3  B7          	or	a, a
1342  02D4  20 10       	jr	NZ,l_player_move_input_00114
1343  02D6  2E 01       	ld	l,0x01
1344  02D8  CD 76 06    	call	_player_check_stairs
1345  02DB  3A 00 00    	ld	a,(_player_onstair)
1346  02DE  B7          	or	a, a
1347  02DF  20 05       	jr	NZ,l_player_move_input_00114
1348  02E1  2E FE       	ld	l,0xfe
1349  02E3  CD D7 05    	call	_player_check_stairs_vertical
1350  02E6              l_player_move_input_00114:
1351  02E6  3A 00 00    	ld	a,(_player_onstair)
1352  02E9  B7          	or	a, a
1353  02EA  28 05       	jr	Z,l_player_move_input_00119
1354  02EC  CD 00 00    	call	_spr_move_up
1355  02EF  18 10       	jr	l_player_move_input_00122
1356  02F1              l_player_move_input_00119:
1357  02F1  21 00 00    	ld	hl,_dirs
1358  02F4  CB 5E       	bit	3,(hl)
1359  02F6  20 09       	jr	NZ,l_player_move_input_00122
1360  02F8  CB 56       	bit	2, (hl)
1361  02FA  20 05       	jr	NZ,l_player_move_input_00122
1362  02FC  2E 00       	ld	l,0x00
1363  02FE  C3 85 03    	jp	l_player_move_input_00144
1364  0301              l_player_move_input_00122:
1365  0301  21 00 00    	ld	hl,_dirs
1366  0304  CB 4E       	bit	1, (hl)
1367  0306  28 35       	jr	Z,l_player_move_input_00134
1368  0308  2E 00       	ld	l,0x00
1369  030A  CD 76 06    	call	_player_check_stairs
1370  030D  3A 00 00    	ld	a,(_player_onstair)
1371  0310  B7          	or	a, a
1372  0311  20 10       	jr	NZ,l_player_move_input_00126
1373  0313  2E 01       	ld	l,0x01
1374  0315  CD 76 06    	call	_player_check_stairs
1375  0318  3A 00 00    	ld	a,(_player_onstair)
1376  031B  B7          	or	a, a
1377  031C  20 05       	jr	NZ,l_player_move_input_00126
1378  031E  2E 12       	ld	l,0x12
1379  0320  CD D7 05    	call	_player_check_stairs_vertical
1380  0323              l_player_move_input_00126:
1381  0323  3A 00 00    	ld	a,(_player_onstair)
1382  0326  B7          	or	a, a
1383  0327  28 05       	jr	Z,l_player_move_input_00131
1384  0329  CD 00 00    	call	_spr_move_down
1385  032C  18 0F       	jr	l_player_move_input_00134
1386  032E              l_player_move_input_00131:
1387  032E  21 00 00    	ld	hl,_dirs
1388  0331  CB 5E       	bit	3,(hl)
1389  0333  20 08       	jr	NZ,l_player_move_input_00134
1390  0335  CB 56       	bit	2, (hl)
1391  0337  20 04       	jr	NZ,l_player_move_input_00134
1392  0339  2E 00       	ld	l,0x00
1393  033B  18 48       	jr	l_player_move_input_00144
1394  033D              l_player_move_input_00134:
1395  033D  3A 00 00    	ld	a,(_s_state)
1396  0340  32 07 00    	ld	((_state + 0x0007)),a
1397  0343  3A 00 00    	ld	a,(_player_onstair)
1398  0346  B7          	or	a, a
1399  0347  28 0A       	jr	Z,l_player_move_input_00136
1400  0349  21 72 00    	ld	hl,0x0072
1401  034C  E5          	push	hl
1402  034D  CD 1E 07    	call	_player_tile
1403  0350  F1          	pop	af
1404  0351  18 08       	jr	l_player_move_input_00137
1405  0353              l_player_move_input_00136:
1406  0353  21 60 08    	ld	hl,0x0860
1407  0356  E5          	push	hl
1408  0357  CD 1E 07    	call	_player_tile
1409  035A  F1          	pop	af
1410  035B              l_player_move_input_00137:
1411  035B  2E 01       	ld	l,0x01
1412  035D  18 26       	jr	l_player_move_input_00144
1413  035F              l_player_move_input_00142:
1414  035F  21 07 00    	ld	hl, +(_colint + 0x0007)
1415  0362  36 00       	ld	(hl),0x00
1416  0364  3A 00 00    	ld	a,(_player_onstair)
1417  0367  B7          	or	a, a
1418  0368  28 0A       	jr	Z,l_player_move_input_00139
1419  036A  21 72 00    	ld	hl,0x0072
1420  036D  E5          	push	hl
1421  036E  CD 1E 07    	call	_player_tile
1422  0371  F1          	pop	af
1423  0372  18 08       	jr	l_player_move_input_00140
1424  0374              l_player_move_input_00139:
1425  0374  21 70 01    	ld	hl,0x0170
1426  0377  E5          	push	hl
1427  0378  CD 1E 07    	call	_player_tile
1428  037B  F1          	pop	af
1429  037C              l_player_move_input_00140:
1430  037C  21 00 00    	ld	hl,_s_state
1431  037F  7E          	ld	a,(hl)
1432  0380  E6 F3       	and	a,+(0xf7&0xfb)
1433  0382  77          	ld	(hl),a
1434  0383  2E 00       	ld	l,0x00
1435  0385              l_player_move_input_00144:
1436  0385  C9          	ret
1437  0386              	SECTION code_compiler
1438  0386              ;	---------------------------------
1439  0386              ; Function player_fix_walk_lin
1440  0386              ; ---------------------------------
1441  0386              _player_fix_walk_lin:
1442  0386  3A 00 00    	ld	a,(_player_onstair)
1443  0389  B7          	or	a, a
1444  038A  C0          	ret	NZ
1445  038B  01 07 00    	ld	bc,_lin+7
1446  038E  3A 00 00    	ld	a,(_s_lin0)
1447  0391  07          	rlca
1448  0392  07          	rlca
1449  0393  07          	rlca
1450  0394  07          	rlca
1451  0395  E6 0F       	and	a,0x0f
1452  0397  07          	rlca
1453  0398  07          	rlca
1454  0399  07          	rlca
1455  039A  07          	rlca
1456  039B  E6 F0       	and	a,0xf0
1457  039D  02          	ld	(bc), a
1458  039E  C9          	ret
1459  039F              	SECTION code_compiler
1460  039F              ;	---------------------------------
1461  039F              ; Function player_fire
1462  039F              ; ---------------------------------
1463  039F              _player_fire:
1464  039F  CD 77 01    	call	_player_action_fire
1465  03A2  4D          	ld	c, l
1466  03A3  21 00 00    	ld	hl,_player_onfire
1467  03A6  71          	ld	(hl), c
1468  03A7  3A 07 00    	ld	a,(_bullet_col + 0x0007)
1469  03AA  3C          	inc	a
1470  03AB  20 37       	jr	NZ,l_player_fire_00113
1471  03AD  7E          	ld	a, (hl)
1472  03AE  B7          	or	a, a
1473  03AF  28 33       	jr	Z,l_player_fire_00113
1474  03B1  21 00 00    	ld	hl,_player_mana
1475  03B4  7E          	ld	a, (hl)
1476  03B5  B7          	or	a, a
1477  03B6  28 29       	jr	Z,l_player_fire_00107
1478  03B8  3E 05       	ld	a,0x05
1479  03BA  96          	sub	a, (hl)
1480  03BB  30 0F       	jr	NC,l_player_fire_00104
1481  03BD  3A 00 00    	ld	a,(_game_inmune)
1482  03C0  B7          	or	a, a
1483  03C1  20 0E       	jr	NZ,l_player_fire_00105
1484  03C3  21 00 00    	ld	hl,_player_mana
1485  03C6  7E          	ld	a, (hl)
1486  03C7  C6 FB       	add	a,0xfb
1487  03C9  77          	ld	(hl), a
1488  03CA  18 05       	jr	l_player_fire_00105
1489  03CC              l_player_fire_00104:
1490  03CC  21 00 00    	ld	hl,_player_mana
1491  03CF  36 00       	ld	(hl),0x00
1492  03D1              l_player_fire_00105:
1493  03D1  CD 00 00    	call	_game_update_stats
1494  03D4  CD 00 00    	call	_audio_disparo1
1495  03D7  21 07 78    	ld	hl,0x7807
1496  03DA  E5          	push	hl
1497  03DB  CD 00 00    	call	_game_shoot_fire
1498  03DE  F1          	pop	af
1499  03DF  18 03       	jr	l_player_fire_00113
1500  03E1              l_player_fire_00107:
1501  03E1  CD 00 00    	call	_audio_sin_mana
1502  03E4              l_player_fire_00113:
1503  03E4  C9          	ret
1504  03E5              	SECTION code_compiler
1505  03E5              ;	---------------------------------
1506  03E5              ; Function player_collision
1507  03E5              ; ---------------------------------
1508  03E5              _player_collision:
1509  03E5  3E 1E       	ld	a,0x1e
1510  03E7  F5          	push	af
1511  03E8  33          	inc	sp
1512  03E9  21 00 00    	ld	hl,_player_hit_time
1513  03EC  E5          	push	hl
1514  03ED  CD 00 00    	call	_game_check_time
1515  03F0  F1          	pop	af
1516  03F1  33          	inc	sp
1517  03F2  7D          	ld	a, l
1518  03F3  B7          	or	a, a
1519  03F4  CA 8B 05    	jp	Z, l_player_collision_00135
1520  03F7  21 00 00    	ld	hl,_sprite
1521  03FA  36 00       	ld	(hl),0x00
1522  03FC  3A 07 00    	ld	a,(_col + 7)
1523  03FF  32 00 00    	ld	(_s_col1),a
1524  0402  3A 07 00    	ld	a,(_lin + 7)
1525  0405  32 00 00    	ld	(_s_lin1),a
1526  0408  C6 08       	add	a,0x08
1527  040A  4F          	ld	c, a
1528  040B  3A 00 00    	ld	a, (_s_col1)
1529  040E  47          	ld	b,a
1530  040F  C5          	push	bc
1531  0410  CD 00 00    	call	_spr_calc_index
1532  0413  F1          	pop	af
1533  0414  4D          	ld	c, l
1534  0415  21 00 00    	ld	hl,_sprite_curr_index
1535  0418  71          	ld	(hl), c
1536  0419  3E 00       	ld	a, +((_scr_map) & 0xFF)
1537  041B  86          	add	a, (hl)
1538  041C  4F          	ld	c, a
1539  041D  3E 00       	ld	a, +((_scr_map) / 256)
1540  041F  CE 00       	adc	a,0x00
1541  0421  47          	ld	b, a
1542  0422  0A          	ld	a, (bc)
1543  0423  4F          	ld	c,a
1544  0424  D6 15       	sub	a,0x15
1545  0426  20 2E       	jr	NZ,l_player_collision_00104
1546  0428  3A 00 00    	ld	a,(_game_checkpoint_scr)
1547  042B  21 00 00    	ld	hl,_scr_curr
1548  042E  96          	sub	a, (hl)
1549  042F  28 20       	jr	Z,l_player_collision_00102
1550  0431  C5          	push	bc
1551  0432  CD 00 00    	call	_audio_checkpoint
1552  0435  C1          	pop	bc
1553  0436  3A 00 00    	ld	a,(_sprite_curr_index)
1554  0439  E6 0F       	and	a,0x0f
1555  043B  87          	add	a, a
1556  043C  32 00 00    	ld	(_player_col_scr),a
1557  043F  3A 00 00    	ld	a,(_sprite_curr_index)
1558  0442  07          	rlca
1559  0443  07          	rlca
1560  0444  07          	rlca
1561  0445  07          	rlca
1562  0446  E6 0F       	and	a,0x0f
1563  0448  07          	rlca
1564  0449  07          	rlca
1565  044A  07          	rlca
1566  044B  07          	rlca
1567  044C  E6 F0       	and	a,0xf0
1568  044E  32 00 00    	ld	(_player_lin_scr),a
1569  0451              l_player_collision_00102:
1570  0451  C5          	push	bc
1571  0452  CD 00 00    	call	_game_set_checkpoint
1572  0455  C1          	pop	bc
1573  0456              l_player_collision_00104:
1574  0456  3E 2F       	ld	a,0x2f
1575  0458  91          	sub	a, c
1576  0459  30 58       	jr	NC,l_player_collision_00155
1577  045B  79          	ld	a,c
1578  045C  FE 3A       	cp	a,0x3a
1579  045E  30 53       	jr	NC,l_player_collision_00155
1580  0460  D6 39       	sub	a,0x39
1581  0462  20 2A       	jr	NZ,l_player_collision_00110
1582  0464  CD 00 00    	call	_audio_level_complete
1583  0467  21 00 00    	ld	hl,___str_0
1584  046A  E5          	push	hl
1585  046B  21 0C 08    	ld	hl,0x080c
1586  046E  E5          	push	hl
1587  046F  CD 00 00    	call	_zx_print_str
1588  0472  AF          	xor	a, a
1589  0473  F5          	push	af
1590  0474  33          	inc	sp
1591  0475  21 E8 03    	ld	hl,0x03e8
1592  0478  E5          	push	hl
1593  0479  21 08 17    	ld	hl,0x1708
1594  047C  E5          	push	hl
1595  047D  3E 0C       	ld	a,0x0c
1596  047F  F5          	push	af
1597  0480  33          	inc	sp
1598  0481  CD 00 00    	call	_game_colour_message
1599  0484  F1          	pop	af
1600  0485  F1          	pop	af
1601  0486  F1          	pop	af
1602  0487  21 00 00    	ld	hl,_game_round_up
1603  048A  36 01       	ld	(hl),0x01
1604  048C  18 25       	jr	l_player_collision_00155
1605  048E              l_player_collision_00110:
1606  048E  3A 00 00    	ld	a,(_game_inmune)
1607  0491  B7          	or	a, a
1608  0492  20 10       	jr	NZ,l_player_collision_00106
1609  0494  3E 82       	ld	a,0x82
1610  0496  21 00 00    	ld	hl,_s_lin1
1611  0499  96          	sub	a, (hl)
1612  049A  30 08       	jr	NC,l_player_collision_00106
1613  049C  CD E7 0F    	call	_player_lost_life
1614  049F  2E 00       	ld	l,0x00
1615  04A1  C3 8D 05    	jp	l_player_collision_00136
1616  04A4              l_player_collision_00106:
1617  04A4  21 00 00    	ld	hl,_s_state
1618  04A7  CB E6       	set	4, (hl)
1619  04A9  2E 32       	ld	l,0x32
1620  04AB  CD 2D 11    	call	_player_damage
1621  04AE  2E 01       	ld	l,0x01
1622  04B0  C3 8D 05    	jp	l_player_collision_00136
1623  04B3              l_player_collision_00155:
1624  04B3              l_player_collision_00131:
1625  04B3  21 00 00    	ld	hl,_sprite
1626  04B6  7E          	ld	a, (hl)
1627  04B7  D6 07       	sub	a,0x07
1628  04B9  D2 86 05    	jp	NC, l_player_collision_00133
1629  04BC  4E          	ld	c,(hl)
1630  04BD  06 00       	ld	b,0x00
1631  04BF  21 00 00    	ld	hl,_class
1632  04C2  09          	add	hl,bc
1633  04C3  7E          	ld	a,(hl)
1634  04C4  32 00 00    	ld	(_s_class),a
1635  04C7  B7          	or	a, a
1636  04C8  CA 7F 05    	jp	Z, l_player_collision_00130
1637  04CB  2A 00 00    	ld	hl,(_sprite)
1638  04CE  26 00       	ld	h,0x00
1639  04D0  01 00 00    	ld	bc,_col
1640  04D3  09          	add	hl,bc
1641  04D4  4E          	ld	c,(hl)
1642  04D5  06 00       	ld	b,0x00
1643  04D7  3A 00 00    	ld	a,(_s_col1)
1644  04DA  5F          	ld	e,a
1645  04DB  16 00       	ld	d,0x00
1646  04DD  79          	ld	a, c
1647  04DE  93          	sub	a, e
1648  04DF  6F          	ld	l, a
1649  04E0  78          	ld	a, b
1650  04E1  9A          	sbc	a, d
1651  04E2  67          	ld	h, a
1652  04E3  CD 00 00    	call	_abs_fastcall
1653  04E6  7D          	ld	a,l
1654  04E7  D6 02       	sub	a,0x02
1655  04E9  7C          	ld	a,h
1656  04EA  17          	rla
1657  04EB  3F          	ccf
1658  04EC  1F          	rra
1659  04ED  DE 80       	sbc	a,0x80
1660  04EF  D2 7F 05    	jp	NC, l_player_collision_00130
1661  04F2  2A 00 00    	ld	hl,(_sprite)
1662  04F5  26 00       	ld	h,0x00
1663  04F7  01 00 00    	ld	bc,_lin
1664  04FA  09          	add	hl,bc
1665  04FB  4E          	ld	c,(hl)
1666  04FC  06 00       	ld	b,0x00
1667  04FE  3A 00 00    	ld	a,(_s_lin1)
1668  0501  5F          	ld	e,a
1669  0502  16 00       	ld	d,0x00
1670  0504  79          	ld	a, c
1671  0505  93          	sub	a, e
1672  0506  6F          	ld	l, a
1673  0507  78          	ld	a, b
1674  0508  9A          	sbc	a, d
1675  0509  67          	ld	h, a
1676  050A  CD 00 00    	call	_abs_fastcall
1677  050D  7D          	ld	a,l
1678  050E  D6 0E       	sub	a,0x0e
1679  0510  7C          	ld	a,h
1680  0511  17          	rla
1681  0512  3F          	ccf
1682  0513  1F          	rra
1683  0514  DE 80       	sbc	a,0x80
1684  0516  30 67       	jr	NC,l_player_collision_00130
1685  0518  3A 00 00    	ld	a,(_s_class)
1686  051B  D6 06       	sub	a,0x06
1687  051D  20 1D       	jr	NZ,l_player_collision_00118
1688  051F  21 00 00    	ld	hl,_player_vita
1689  0522  7E          	ld	a, (hl)
1690  0523  C6 32       	add	a,0x32
1691  0525  77          	ld	(hl), a
1692  0526  3A 00 00    	ld	a,(_player_max_vita)
1693  0529  21 00 00    	ld	hl,_player_vita
1694  052C  96          	sub	a, (hl)
1695  052D  30 06       	jr	NC,l_player_collision_00116
1696  052F  3A 00 00    	ld	a,(_player_max_vita)
1697  0532  32 00 00    	ld	(_player_vita),a
1698  0535              l_player_collision_00116:
1699  0535  CD 8E 05    	call	_player_pick_mushroom
1700  0538  2E 00       	ld	l,0x00
1701  053A  18 51       	jr	l_player_collision_00136
1702  053C              l_player_collision_00118:
1703  053C  3A 00 00    	ld	a,(_s_class)
1704  053F  D6 07       	sub	a,0x07
1705  0541  20 1D       	jr	NZ,l_player_collision_00122
1706  0543  21 00 00    	ld	hl,_player_mana
1707  0546  7E          	ld	a, (hl)
1708  0547  C6 32       	add	a,0x32
1709  0549  77          	ld	(hl), a
1710  054A  3A 00 00    	ld	a,(_player_max_mana)
1711  054D  21 00 00    	ld	hl,_player_mana
1712  0550  96          	sub	a, (hl)
1713  0551  30 06       	jr	NC,l_player_collision_00120
1714  0553  3A 00 00    	ld	a,(_player_max_mana)
1715  0556  32 00 00    	ld	(_player_mana),a
1716  0559              l_player_collision_00120:
1717  0559  CD 8E 05    	call	_player_pick_mushroom
1718  055C  2E 00       	ld	l,0x00
1719  055E  18 2D       	jr	l_player_collision_00136
1720  0560              l_player_collision_00122:
1721  0560  3A 00 00    	ld	a,(_s_class)
1722  0563  D6 08       	sub	a,0x08
1723  0565  20 0A       	jr	NZ,l_player_collision_00124
1724  0567  CD 8E 05    	call	_player_pick_mushroom
1725  056A  CD A5 05    	call	_player_1up
1726  056D  2E 00       	ld	l,0x00
1727  056F  18 1C       	jr	l_player_collision_00136
1728  0571              l_player_collision_00124:
1729  0571  21 00 00    	ld	hl,_s_state
1730  0574  CB E6       	set	4, (hl)
1731  0576  2E 14       	ld	l,0x14
1732  0578  CD 2D 11    	call	_player_damage
1733  057B  2E 01       	ld	l,0x01
1734  057D  18 0E       	jr	l_player_collision_00136
1735  057F              l_player_collision_00130:
1736  057F  21 00 00    	ld	hl,_sprite
1737  0582  34          	inc	(hl)
1738  0583  C3 B3 04    	jp	l_player_collision_00131
1739  0586              l_player_collision_00133:
1740  0586  21 00 00    	ld	hl,_s_state
1741  0589  CB A6       	res	4, (hl)
1742  058B              l_player_collision_00135:
1743  058B  2E 00       	ld	l,0x00
1744  058D              l_player_collision_00136:
1745  058D  C9          	ret
1746  058E              	SECTION rodata_compiler
1747  0000              ___str_0:
1748  0000  52 4F 55 4E 44 20 43 4F 4D 50 4C 45 54 45 21 
                        	DEFM "ROUND COMPLETE!"
1749  000F  00          	DEFB 0x00
1750  0010              	SECTION code_compiler
1751  058E              ;	---------------------------------
1752  058E              ; Function player_pick_mushroom
1753  058E              ; ---------------------------------
1754  058E              _player_pick_mushroom:
1755  058E  CD 00 00    	call	_audio_magic1
1756  0591  21 01 00    	ld	hl,0x0001
1757  0594  CD FA 0B    	call	_player_score_add
1758  0597  CD 00 00    	call	_game_update_stats
1759  059A  2A 00 00    	ld	hl,(_sprite)
1760  059D  CD 00 00    	call	_spr_destroy
1761  05A0  21 00 00    	ld	hl,_game_mush_count
1762  05A3  35          	dec	(hl)
1763  05A4  C9          	ret
1764  05A5              	SECTION code_compiler
1765  05A5              ;	---------------------------------
1766  05A5              ; Function player_1up
1767  05A5              ; ---------------------------------
1768  05A5              _player_1up:
1769  05A5  21 00 00    	ld	hl,_player_lives
1770  05A8  7E          	ld	a, (hl)
1771  05A9  D6 64       	sub	a,0x64
1772  05AB  D0          	ret	NC
1773  05AC  34          	inc	(hl)
1774  05AD  CD 00 00    	call	_spr_flatten
1775  05B0  21 10 00    	ld	hl,___str_1
1776  05B3  E5          	push	hl
1777  05B4  21 0C 0C    	ld	hl,0x0c0c
1778  05B7  E5          	push	hl
1779  05B8  CD 00 00    	call	_zx_print_str
1780  05BB  AF          	xor	a, a
1781  05BC  F5          	push	af
1782  05BD  33          	inc	sp
1783  05BE  21 19 00    	ld	hl,0x0019
1784  05C1  E5          	push	hl
1785  05C2  21 0C 11    	ld	hl,0x110c
1786  05C5  E5          	push	hl
1787  05C6  3E 0C       	ld	a,0x0c
1788  05C8  F5          	push	af
1789  05C9  33          	inc	sp
1790  05CA  CD 00 00    	call	_game_colour_message
1791  05CD  F1          	pop	af
1792  05CE  F1          	pop	af
1793  05CF  F1          	pop	af
1794  05D0  CD 00 00    	call	_game_update_stats
1795  05D3  CD 00 00    	call	_spr_unflattenP1
1796  05D6  C9          	ret
1797  05D7              	SECTION rodata_compiler
1798  0010              ___str_1:
1799  0010  31 20 55 50 21 
                        	DEFM "1 UP!"
1800  0015  00          	DEFB 0x00
1801  0016              	SECTION code_compiler
1802  05D7              ;	---------------------------------
1803  05D7              ; Function player_check_stairs_vertical
1804  05D7              ; ---------------------------------
1805  05D7              _player_check_stairs_vertical:
1806  05D7  CD 00 00    	call	___sdcc_enter_ix
1807  05DA  3B          	dec	sp
1808  05DB  4D          	ld	c, l
1809  05DC  21 07 00    	ld	hl,+(_col + 0x0007)
1810  05DF  46          	ld	b, (hl)
1811  05E0  CB 40       	bit	0, b
1812  05E2  20 2A       	jr	NZ,l_player_check_stairs_vertical_00102
1813  05E4  3A 07 00    	ld	a,(_lin + 0x0007)
1814  05E7  81          	add	a, c
1815  05E8  4F          	ld	c,a
1816  05E9  C5          	push	bc
1817  05EA  CD 00 00    	call	_spr_calc_index
1818  05ED  F1          	pop	af
1819  05EE  7D          	ld	a,l
1820  05EF  32 00 00    	ld	(_sprite_curr_index),a
1821  05F2  4F          	ld	c,a
1822  05F3  06 00       	ld	b,0x00
1823  05F5  21 00 00    	ld	hl,_scr_map
1824  05F8  09          	add	hl,bc
1825  05F9  7E          	ld	a,(hl)
1826  05FA  4F          	ld	c,a
1827  05FB  D6 44       	sub	a,0x44
1828  05FD  38 05       	jr	C,l_player_check_stairs_vertical_00110
1829  05FF  3E 47       	ld	a,0x47
1830  0601  91          	sub	a, c
1831  0602  30 04       	jr	NC,l_player_check_stairs_vertical_00111
1832  0604              l_player_check_stairs_vertical_00110:
1833  0604  06 00       	ld	b,0x00
1834  0606  18 02       	jr	l_player_check_stairs_vertical_00112
1835  0608              l_player_check_stairs_vertical_00111:
1836  0608  06 01       	ld	b,0x01
1837  060A              l_player_check_stairs_vertical_00112:
1838  060A  0E 00       	ld	c,0x00
1839  060C  18 51       	jr	l_player_check_stairs_vertical_00103
1840  060E              l_player_check_stairs_vertical_00102:
1841  060E  78          	ld	a, b
1842  060F  91          	sub	a, c
1843  0610  57          	ld	d, a
1844  0611  3A 07 00    	ld	a,(_lin + 0x0007)
1845  0614  81          	add	a, c
1846  0615  47          	ld	b, a
1847  0616  C5          	push	bc
1848  0617  58          	ld	e,b
1849  0618  D5          	push	de
1850  0619  CD 00 00    	call	_spr_calc_index
1851  061C  F1          	pop	af
1852  061D  C1          	pop	bc
1853  061E  7D          	ld	a,l
1854  061F  32 00 00    	ld	(_sprite_curr_index),a
1855  0622  5F          	ld	e,a
1856  0623  16 00       	ld	d,0x00
1857  0625  21 00 00    	ld	hl,_scr_map
1858  0628  19          	add	hl,de
1859  0629  7E          	ld	a,(hl)
1860  062A  47          	ld	b,a
1861  062B  D6 44       	sub	a,0x44
1862  062D  38 05       	jr	C,l_player_check_stairs_vertical_00113
1863  062F  3E 47       	ld	a,0x47
1864  0631  90          	sub	a, b
1865  0632  30 04       	jr	NC,l_player_check_stairs_vertical_00114
1866  0634              l_player_check_stairs_vertical_00113:
1867  0634  06 00       	ld	b,0x00
1868  0636  18 02       	jr	l_player_check_stairs_vertical_00115
1869  0638              l_player_check_stairs_vertical_00114:
1870  0638  06 01       	ld	b,0x01
1871  063A              l_player_check_stairs_vertical_00115:
1872  063A  3A 07 00    	ld	a,(_col + 0x0007)
1873  063D  91          	sub	a, c
1874  063E  57          	ld	d, a
1875  063F  3A 07 00    	ld	a,(_lin + 0x0007)
1876  0642  81          	add	a, c
1877  0643  C5          	push	bc
1878  0644  5F          	ld	e,a
1879  0645  D5          	push	de
1880  0646  CD 00 00    	call	_spr_calc_index
1881  0649  F1          	pop	af
1882  064A  C1          	pop	bc
1883  064B  7D          	ld	a,l
1884  064C  32 00 00    	ld	(_sprite_curr_index),a
1885  064F  78          	ld	a, b
1886  0650  D6 44       	sub	a,0x44
1887  0652  38 05       	jr	C,l_player_check_stairs_vertical_00116
1888  0654  3E 47       	ld	a,0x47
1889  0656  90          	sub	a, b
1890  0657  30 04       	jr	NC,l_player_check_stairs_vertical_00117
1891  0659              l_player_check_stairs_vertical_00116:
1892  0659  0E 00       	ld	c,0x00
1893  065B  18 02       	jr	l_player_check_stairs_vertical_00118
1894  065D              l_player_check_stairs_vertical_00117:
1895  065D  0E 01       	ld	c,0x01
1896  065F              l_player_check_stairs_vertical_00118:
1897  065F              l_player_check_stairs_vertical_00103:
1898  065F  78          	ld	a, b
1899  0660  B7          	or	a,a
1900  0661  20 03       	jr	NZ,l_player_check_stairs_vertical_00104
1901  0663  B1          	or	a,c
1902  0664  28 07       	jr	Z,l_player_check_stairs_vertical_00105
1903  0666              l_player_check_stairs_vertical_00104:
1904  0666  21 00 00    	ld	hl,_player_onstair
1905  0669  36 01       	ld	(hl),0x01
1906  066B  18 05       	jr	l_player_check_stairs_vertical_00108
1907  066D              l_player_check_stairs_vertical_00105:
1908  066D  21 00 00    	ld	hl,_player_onstair
1909  0670  36 00       	ld	(hl),0x00
1910  0672              l_player_check_stairs_vertical_00108:
1911  0672  33          	inc	sp
1912  0673  DD E1       	pop	ix
1913  0675  C9          	ret
1914  0676              	SECTION code_compiler
1915  0676              ;	---------------------------------
1916  0676              ; Function player_check_stairs
1917  0676              ; ---------------------------------
1918  0676              _player_check_stairs:
1919  0676  CD 00 00    	call	___sdcc_enter_ix
1920  0679  3B          	dec	sp
1921  067A  45          	ld	b, l
1922  067B  3A 07 00    	ld	a,(_col + 0x0007)
1923  067E  4F          	ld	c,a
1924  067F  80          	add	a, b
1925  0680  57          	ld	d, a
1926  0681  3A 07 00    	ld	a,(_lin + 0x0007)
1927  0684  C5          	push	bc
1928  0685  5F          	ld	e,a
1929  0686  D5          	push	de
1930  0687  CD 00 00    	call	_spr_calc_index
1931  068A  F1          	pop	af
1932  068B  C1          	pop	bc
1933  068C  7D          	ld	a,l
1934  068D  32 00 00    	ld	(_sprite_curr_index),a
1935  0690  5F          	ld	e,a
1936  0691  16 00       	ld	d,0x00
1937  0693  21 00 00    	ld	hl,_scr_map
1938  0696  19          	add	hl,de
1939  0697  7E          	ld	a,(hl)
1940  0698  4F          	ld	c,a
1941  0699  D6 44       	sub	a,0x44
1942  069B  38 05       	jr	C,l_player_check_stairs_00111
1943  069D  3E 47       	ld	a,0x47
1944  069F  91          	sub	a, c
1945  06A0  30 04       	jr	NC,l_player_check_stairs_00112
1946  06A2              l_player_check_stairs_00111:
1947  06A2  0E 00       	ld	c,0x00
1948  06A4  18 02       	jr	l_player_check_stairs_00113
1949  06A6              l_player_check_stairs_00112:
1950  06A6  0E 01       	ld	c,0x01
1951  06A8              l_player_check_stairs_00113:
1952  06A8  3A 07 00    	ld	a,(_col + 0x0007)
1953  06AB  80          	add	a, b
1954  06AC  57          	ld	d, a
1955  06AD  3A 07 00    	ld	a,(_lin + 0x0007)
1956  06B0  C6 0F       	add	a,0x0f
1957  06B2  47          	ld	b, a
1958  06B3  C5          	push	bc
1959  06B4  58          	ld	e,b
1960  06B5  D5          	push	de
1961  06B6  CD 00 00    	call	_spr_calc_index
1962  06B9  F1          	pop	af
1963  06BA  C1          	pop	bc
1964  06BB  7D          	ld	a,l
1965  06BC  32 00 00    	ld	(_sprite_curr_index),a
1966  06BF  5F          	ld	e,a
1967  06C0  16 00       	ld	d,0x00
1968  06C2  21 00 00    	ld	hl,_scr_map
1969  06C5  19          	add	hl,de
1970  06C6  7E          	ld	a,(hl)
1971  06C7  47          	ld	b,a
1972  06C8  D6 44       	sub	a,0x44
1973  06CA  38 05       	jr	C,l_player_check_stairs_00114
1974  06CC  3E 47       	ld	a,0x47
1975  06CE  90          	sub	a, b
1976  06CF  30 04       	jr	NC,l_player_check_stairs_00115
1977  06D1              l_player_check_stairs_00114:
1978  06D1  06 00       	ld	b,0x00
1979  06D3  18 02       	jr	l_player_check_stairs_00116
1980  06D5              l_player_check_stairs_00115:
1981  06D5  06 01       	ld	b,0x01
1982  06D7              l_player_check_stairs_00116:
1983  06D7  79          	ld	a, c
1984  06D8  B7          	or	a,a
1985  06D9  20 03       	jr	NZ,l_player_check_stairs_00105
1986  06DB  B0          	or	a,b
1987  06DC  28 13       	jr	Z,l_player_check_stairs_00106
1988  06DE              l_player_check_stairs_00105:
1989  06DE  21 00 00    	ld	hl,_player_onstair
1990  06E1  7E          	ld	a, (hl)
1991  06E2  B7          	or	a, a
1992  06E3  20 1D       	jr	NZ,l_player_check_stairs_00109
1993  06E5  36 01       	ld	(hl),0x01
1994  06E7  21 72 00    	ld	hl,0x0072
1995  06EA  E5          	push	hl
1996  06EB  CD 1E 07    	call	_player_tile
1997  06EE  F1          	pop	af
1998  06EF  18 11       	jr	l_player_check_stairs_00109
1999  06F1              l_player_check_stairs_00106:
2000  06F1  21 00 00    	ld	hl,_player_onstair
2001  06F4  7E          	ld	a, (hl)
2002  06F5  B7          	or	a, a
2003  06F6  28 0A       	jr	Z,l_player_check_stairs_00109
2004  06F8  36 00       	ld	(hl),0x00
2005  06FA  21 60 08    	ld	hl,0x0860
2006  06FD  E5          	push	hl
2007  06FE  CD 1E 07    	call	_player_tile
2008  0701  F1          	pop	af
2009  0702              l_player_check_stairs_00109:
2010  0702  33          	inc	sp
2011  0703  DD E1       	pop	ix
2012  0705  C9          	ret
2013  0706              	SECTION code_compiler
2014  0706              ;	---------------------------------
2015  0706              ; Function player_anim_stairs
2016  0706              ; ---------------------------------
2017  0706              _player_anim_stairs:
2018  0706  21 00 00    	ld	hl,_player_anim_stair
2019  0709  34          	inc	(hl)
2020  070A  3E 01       	ld	a,0x01
2021  070C  96          	sub	a, (hl)
2022  070D  30 02       	jr	NC,l_player_anim_stairs_00102
2023  070F  36 00       	ld	(hl),0x00
2024  0711              l_player_anim_stairs_00102:
2025  0711  3A 07 00    	ld	a,(_tile + 0x0007)
2026  0714  21 00 00    	ld	hl,_player_anim_stair
2027  0717  86          	add	a, (hl)
2028  0718  C6 04       	add	a,0x04
2029  071A  32 00 00    	ld	(_s_tile1),a
2030  071D  C9          	ret
2031  071E              	SECTION code_compiler
2032  071E              ;	---------------------------------
2033  071E              ; Function player_tile
2034  071E              ; ---------------------------------
2035  071E              _player_tile:
2036  071E  CD 00 00    	call	___sdcc_enter_ix
2037  0721  21 05 00    	ld	hl,0x0005
2038  0724  39          	add	hl, sp
2039  0725  EB          	ex	de,hl
2040  0726  21 04 00    	ld	hl,0x0004
2041  0729  39          	add	hl, sp
2042  072A  4D          	ld	c, l
2043  072B  44          	ld	b, h
2044  072C  D5          	push	de
2045  072D  21 00 00    	ld	hl,_sprite
2046  0730  E5          	push	hl
2047  0731  C5          	push	bc
2048  0732  CD 00 00    	call	_spr_tile_dir
2049  0735  F1          	pop	af
2050  0736  F1          	pop	af
2051  0737  F1          	pop	af
2052  0738  7D          	ld	a,l
2053  0739  32 07 00    	ld	((_tile + 0x0007)),a
2054  073C  DD E1       	pop	ix
2055  073E  C9          	ret
2056  073F              	SECTION code_compiler
2057  073F              ;	---------------------------------
2058  073F              ; Function player_check_map
2059  073F              ; ---------------------------------
2060  073F              _player_check_map:
2061  073F  21 07 00    	ld	hl,+(_col + 0x0007)
2062  0742  56          	ld	d, (hl)
2063  0743  21 07 00    	ld	hl,+(_lin + 0x0007)
2064  0746  5E          	ld	e, (hl)
2065  0747  D5          	push	de
2066  0748  CD 00 00    	call	_spr_calc_index
2067  074B  F1          	pop	af
2068  074C  7D          	ld	a,l
2069  074D  32 00 00    	ld	(_sprite_curr_index),a
2070  0750  CD 99 07    	call	_player_pick_item
2071  0753  21 07 00    	ld	hl,+(_col + 0x0007)
2072  0756  46          	ld	b, (hl)
2073  0757  3A 07 00    	ld	a,(_lin + 0x0007)
2074  075A  E6 0F       	and	a,0x0f
2075  075C  4F          	ld	c, a
2076  075D  CB 40       	bit	0, b
2077  075F  20 10       	jr	NZ,l_player_check_map_00108
2078  0761  79          	ld	a, c
2079  0762  B7          	or	a, a
2080  0763  28 33       	jr	Z,l_player_check_map_00110
2081  0765  21 00 00    	ld	hl,_sprite_curr_index
2082  0768  7E          	ld	a, (hl)
2083  0769  C6 10       	add	a,0x10
2084  076B  77          	ld	(hl), a
2085  076C  CD 99 07    	call	_player_pick_item
2086  076F  18 27       	jr	l_player_check_map_00110
2087  0771              l_player_check_map_00108:
2088  0771  21 00 00    	ld	hl,_sprite_curr_index
2089  0774  46          	ld	b, (hl)
2090  0775  04          	inc	b
2091  0776  79          	ld	a, c
2092  0777  B7          	or	a, a
2093  0778  20 06       	jr	NZ,l_player_check_map_00105
2094  077A  70          	ld	(hl), b
2095  077B  CD 99 07    	call	_player_pick_item
2096  077E  18 18       	jr	l_player_check_map_00110
2097  0780              l_player_check_map_00105:
2098  0780  21 00 00    	ld	hl,_sprite_curr_index
2099  0783  70          	ld	(hl), b
2100  0784  CD 99 07    	call	_player_pick_item
2101  0787  21 00 00    	ld	hl,_sprite_curr_index
2102  078A  7E          	ld	a, (hl)
2103  078B  C6 0F       	add	a,0x0f
2104  078D  77          	ld	(hl), a
2105  078E  CD 99 07    	call	_player_pick_item
2106  0791  21 00 00    	ld	hl,_sprite_curr_index
2107  0794  34          	inc	(hl)
2108  0795  CD 99 07    	call	_player_pick_item
2109  0798              l_player_check_map_00110:
2110  0798  C9          	ret
2111  0799              	SECTION code_compiler
2112  0799              ;	---------------------------------
2113  0799              ; Function player_pick_item
2114  0799              ; ---------------------------------
2115  0799              _player_pick_item:
2116  0799  CD 00 00    	call	___sdcc_enter_ix
2117  079C  F5          	push	af
2118  079D  3B          	dec	sp
2119  079E  2A 00 00    	ld	hl,(_sprite_curr_index)
2120  07A1  26 00       	ld	h,0x00
2121  07A3  01 00 00    	ld	bc,_scr_map
2122  07A6  09          	add	hl,bc
2123  07A7  7E          	ld	a,(hl)
2124  07A8  4D          	ld	c,l
2125  07A9  44          	ld	b,h
2126  07AA  21 00 00    	ld	hl,_sprite_curr_index
2127  07AD  DD 77 FD    	ld	(ix-3),a
2128  07B0  D6 24       	sub	a,0x24
2129  07B2  3E 00       	ld	a,0x00
2130  07B4  17          	rla
2131  07B5  DD 77 FF    	ld	(ix-1),a
2132  07B8  CB 47       	bit	0,a
2133  07BA  C2 44 09    	jp	NZ, l_player_pick_item_00131
2134  07BD  3E 2F       	ld	a,0x2f
2135  07BF  DD 96 FD    	sub	a,(ix-3)
2136  07C2  3E 00       	ld	a,0x00
2137  07C4  17          	rla
2138  07C5  DD 77 FE    	ld	(ix-2),a
2139  07C8  CB 47       	bit	0,a
2140  07CA  C2 44 09    	jp	NZ, l_player_pick_item_00131
2141  07CD  5E          	ld	e, (hl)
2142  07CE  16 00       	ld	d,0x00
2143  07D0  C5          	push	bc
2144  07D1  EB          	ex	de,hl
2145  07D2  CD 00 00    	call	_game_match_back
2146  07D5  C1          	pop	bc
2147  07D6  7D          	ld	a,l
2148  07D7  02          	ld	(bc), a
2149  07D8  2A 00 00    	ld	hl,(_sprite_curr_index)
2150  07DB  26 00       	ld	h,0x00
2151  07DD  CD 00 00    	call	_game_obj_set
2152  07E0  3A 00 00    	ld	a,(_sprite_curr_index)
2153  07E3  07          	rlca
2154  07E4  07          	rlca
2155  07E5  07          	rlca
2156  07E6  07          	rlca
2157  07E7  E6 0F       	and	a,0x0f
2158  07E9  07          	rlca
2159  07EA  07          	rlca
2160  07EB  07          	rlca
2161  07EC  07          	rlca
2162  07ED  E6 F0       	and	a,0xf0
2163  07EF  32 00 00    	ld	(_s_lin1),a
2164  07F2  3A 00 00    	ld	a,(_sprite_curr_index)
2165  07F5  E6 0F       	and	a,0x0f
2166  07F7  87          	add	a, a
2167  07F8  32 00 00    	ld	(_s_col1),a
2168  07FB  21 00 00    	ld	hl,0x0000
2169  07FE  E5          	push	hl
2170  07FF  21 84 03    	ld	hl,0x0384
2171  0802  E5          	push	hl
2172  0803  2A 00 00    	ld	hl,(_s_lin1)
2173  0806  67          	ld	h,a
2174  0807  E5          	push	hl
2175  0808  CD 00 00    	call	_spr_add_anim
2176  080B  F1          	pop	af
2177  080C  F1          	pop	af
2178  080D  F1          	pop	af
2179  080E  DD CB FF 46 	bit	0,(ix-1)
2180  0812  C2 44 09    	jp	NZ, l_player_pick_item_00131
2181  0815  DD CB FE 46 	bit	0,(ix-2)
2182  0819  C2 44 09    	jp	NZ, l_player_pick_item_00131
2183  081C  DD 7E FD    	ld	a,(ix-3)
2184  081F  C6 DC       	add	a,0xdc
2185  0821  4F          	ld	c, a
2186  0822  06 00       	ld	b,0x00
2187  0824  21 2B 08    	ld	hl,l_player_pick_item_00177
2188  0827  09          	add	hl, bc
2189  0828  09          	add	hl, bc
2190  0829  09          	add	hl, bc
2191  082A  E9          	jp	(hl)
2192  082B              l_player_pick_item_00177:
2193  082B  C3 4F 08    	jp	l_player_pick_item_00101
2194  082E  C3 5D 08    	jp	l_player_pick_item_00102
2195  0831  C3 6B 08    	jp	l_player_pick_item_00103
2196  0834  C3 79 08    	jp	l_player_pick_item_00104
2197  0837  C3 87 08    	jp	l_player_pick_item_00105
2198  083A  C3 B4 08    	jp	l_player_pick_item_00109
2199  083D  C3 CE 08    	jp	l_player_pick_item_00112
2200  0840  C3 E6 08    	jp	l_player_pick_item_00115
2201  0843  C3 FE 08    	jp	l_player_pick_item_00118
2202  0846  C3 16 09    	jp	l_player_pick_item_00121
2203  0849  C3 2E 09    	jp	l_player_pick_item_00124
2204  084C  C3 A8 08    	jp	l_player_pick_item_00108
2205  084F              l_player_pick_item_00101:
2206  084F  CD 00 00    	call	_audio_efecto
2207  0852  21 00 00    	ld	hl,_player_keys
2208  0855  36 01       	ld	(hl),0x01
2209  0857  CD 00 00    	call	_game_update_stats
2210  085A  C3 44 09    	jp	l_player_pick_item_00131
2211  085D              l_player_pick_item_00102:
2212  085D  CD 00 00    	call	_audio_efecto
2213  0860  21 01 00    	ld	hl, +(_player_keys + 0x0001)
2214  0863  36 01       	ld	(hl),0x01
2215  0865  CD 00 00    	call	_game_update_stats
2216  0868  C3 44 09    	jp	l_player_pick_item_00131
2217  086B              l_player_pick_item_00103:
2218  086B  CD 00 00    	call	_audio_efecto
2219  086E  21 02 00    	ld	hl, +(_player_keys + 0x0002)
2220  0871  36 01       	ld	(hl),0x01
2221  0873  CD 00 00    	call	_game_update_stats
2222  0876  C3 44 09    	jp	l_player_pick_item_00131
2223  0879              l_player_pick_item_00104:
2224  0879  CD 00 00    	call	_audio_efecto
2225  087C  21 03 00    	ld	hl, +(_player_keys + 0x0003)
2226  087F  36 01       	ld	(hl),0x01
2227  0881  CD 00 00    	call	_game_update_stats
2228  0884  C3 44 09    	jp	l_player_pick_item_00131
2229  0887              l_player_pick_item_00105:
2230  0887  CD 00 00    	call	_audio_coin
2231  088A  21 01 00    	ld	hl,0x0001
2232  088D  CD FA 0B    	call	_player_score_add
2233  0890  21 00 00    	ld	hl,_player_coins
2234  0893  7E          	ld	a,(hl)
2235  0894  3C          	inc	a
2236  0895  77          	ld	(hl),a
2237  0896  D6 64       	sub	a,0x64
2238  0898  20 08       	jr	NZ,l_player_pick_item_00107
2239  089A  CD A5 05    	call	_player_1up
2240  089D  21 00 00    	ld	hl,_player_coins
2241  08A0  36 00       	ld	(hl),0x00
2242  08A2              l_player_pick_item_00107:
2243  08A2  CD 00 00    	call	_game_update_stats
2244  08A5  C3 44 09    	jp	l_player_pick_item_00131
2245  08A8              l_player_pick_item_00108:
2246  08A8  CD 00 00    	call	_audio_magic1
2247  08AB  21 0A 00    	ld	hl,0x000a
2248  08AE  CD FA 0B    	call	_player_score_add
2249  08B1  C3 44 09    	jp	l_player_pick_item_00131
2250  08B4              l_player_pick_item_00109:
2251  08B4  CD 00 00    	call	_audio_efecto
2252  08B7  21 00 00    	ld	hl,_player_str
2253  08BA  34          	inc	(hl)
2254  08BB  21 00 00    	ld	hl,_player_max_vita
2255  08BE  7E          	ld	a, (hl)
2256  08BF  D6 C8       	sub	a,0xc8
2257  08C1  D2 44 09    	jp	NC, l_player_pick_item_00131
2258  08C4  7E          	ld	a, (hl)
2259  08C5  C6 0A       	add	a,0x0a
2260  08C7  77          	ld	(hl), a
2261  08C8  CD 00 00    	call	_game_update_stats
2262  08CB  C3 44 09    	jp	l_player_pick_item_00131
2263  08CE              l_player_pick_item_00112:
2264  08CE  CD 00 00    	call	_audio_efecto
2265  08D1  21 00 00    	ld	hl,_player_str
2266  08D4  34          	inc	(hl)
2267  08D5  21 00 00    	ld	hl,_player_max_vita
2268  08D8  7E          	ld	a, (hl)
2269  08D9  D6 C8       	sub	a,0xc8
2270  08DB  30 67       	jr	NC,l_player_pick_item_00131
2271  08DD  7E          	ld	a, (hl)
2272  08DE  C6 0A       	add	a,0x0a
2273  08E0  77          	ld	(hl), a
2274  08E1  CD 00 00    	call	_game_update_stats
2275  08E4  18 5E       	jr	l_player_pick_item_00131
2276  08E6              l_player_pick_item_00115:
2277  08E6  CD 00 00    	call	_audio_efecto
2278  08E9  21 00 00    	ld	hl,_player_str
2279  08EC  34          	inc	(hl)
2280  08ED  21 00 00    	ld	hl,_player_max_vita
2281  08F0  7E          	ld	a, (hl)
2282  08F1  D6 C8       	sub	a,0xc8
2283  08F3  30 4F       	jr	NC,l_player_pick_item_00131
2284  08F5  7E          	ld	a, (hl)
2285  08F6  C6 0A       	add	a,0x0a
2286  08F8  77          	ld	(hl), a
2287  08F9  CD 00 00    	call	_game_update_stats
2288  08FC  18 46       	jr	l_player_pick_item_00131
2289  08FE              l_player_pick_item_00118:
2290  08FE  CD 00 00    	call	_audio_efecto
2291  0901  21 00 00    	ld	hl,_player_int
2292  0904  34          	inc	(hl)
2293  0905  21 00 00    	ld	hl,_player_max_mana
2294  0908  7E          	ld	a, (hl)
2295  0909  D6 C8       	sub	a,0xc8
2296  090B  30 37       	jr	NC,l_player_pick_item_00131
2297  090D  7E          	ld	a, (hl)
2298  090E  C6 0A       	add	a,0x0a
2299  0910  77          	ld	(hl), a
2300  0911  CD 00 00    	call	_game_update_stats
2301  0914  18 2E       	jr	l_player_pick_item_00131
2302  0916              l_player_pick_item_00121:
2303  0916  CD 00 00    	call	_audio_efecto
2304  0919  21 00 00    	ld	hl,_player_int
2305  091C  34          	inc	(hl)
2306  091D  21 00 00    	ld	hl,_player_max_mana
2307  0920  7E          	ld	a, (hl)
2308  0921  D6 C8       	sub	a,0xc8
2309  0923  30 1F       	jr	NC,l_player_pick_item_00131
2310  0925  7E          	ld	a, (hl)
2311  0926  C6 0A       	add	a,0x0a
2312  0928  77          	ld	(hl), a
2313  0929  CD 00 00    	call	_game_update_stats
2314  092C  18 16       	jr	l_player_pick_item_00131
2315  092E              l_player_pick_item_00124:
2316  092E  CD 00 00    	call	_audio_efecto
2317  0931  21 00 00    	ld	hl,_player_int
2318  0934  34          	inc	(hl)
2319  0935  21 00 00    	ld	hl,_player_max_mana
2320  0938  7E          	ld	a, (hl)
2321  0939  D6 C8       	sub	a,0xc8
2322  093B  30 07       	jr	NC,l_player_pick_item_00131
2323  093D  7E          	ld	a, (hl)
2324  093E  C6 0A       	add	a,0x0a
2325  0940  77          	ld	(hl), a
2326  0941  CD 00 00    	call	_game_update_stats
2327  0944              l_player_pick_item_00131:
2328  0944  DD F9       	ld	sp, ix
2329  0946  DD E1       	pop	ix
2330  0948  C9          	ret
2331  0949              	SECTION code_compiler
2332  0949              ;	---------------------------------
2333  0949              ; Function player_hit_platform
2334  0949              ; ---------------------------------
2335  0949              _player_hit_platform:
2336  0949  CD 00 00    	call	___sdcc_enter_ix
2337  094C  3B          	dec	sp
2338  094D  3A 00 00    	ld	a,(_player_hit_lin)
2339  0950  B7          	or	a, a
2340  0951  C2 C5 0B    	jp	NZ, l_player_hit_platform_00148
2341  0954  21 07 00    	ld	hl,+(_lin + 0x0007)
2342  0957  4E          	ld	c, (hl)
2343  0958  3E 10       	ld	a,0x10
2344  095A  91          	sub	a, c
2345  095B  D2 C5 0B    	jp	NC, l_player_hit_platform_00148
2346  095E  2A 00 00    	ld	hl,(_index1)
2347  0961  01 00 00    	ld	bc,_scr_map
2348  0964  09          	add	hl,bc
2349  0965  7E          	ld	a,(hl)
2350  0966  FE 45       	cp	a,0x45
2351  0968  DA C5 0B    	jp	C,l_player_hit_platform_00148
2352  096B  D6 4D       	sub	a,0x4d
2353  096D  20 42       	jr	NZ,l_player_hit_platform_00102
2354  096F  E5          	push	hl
2355  0970  2A 00 00    	ld	hl,(_index1)
2356  0973  CD 00 00    	call	_game_match_back
2357  0976  C1          	pop	bc
2358  0977  7D          	ld	a,l
2359  0978  02          	ld	(bc), a
2360  0979  2A 00 00    	ld	hl,(_index1)
2361  097C  CD 00 00    	call	_game_obj_set
2362  097F  CD 00 00    	call	_audio_explosion
2363  0982  21 00 00    	ld	hl,_index1
2364  0985  7E          	ld	a, (hl)
2365  0986  E6 0F       	and	a,0x0f
2366  0988  87          	add	a, a
2367  0989  57          	ld	d, a
2368  098A  4E          	ld	c, (hl)
2369  098B  23          	inc	hl
2370  098C  5E          	ld	e, (hl)
2371  098D  06 04       	ld	b,0x04
2372  098F  79          	ld	a,c
2373  0990              l_player_hit_platform_00261:
2374  0990  CB 3B       	srl	e
2375  0992  1F          	rra
2376  0993  10 FB       	djnz	l_player_hit_platform_00261
2377  0995  07          	rlca
2378  0996  07          	rlca
2379  0997  07          	rlca
2380  0998  07          	rlca
2381  0999  E6 F0       	and	a,0xf0
2382  099B  47          	ld	b, a
2383  099C  21 00 00    	ld	hl,0x0000
2384  099F  E5          	push	hl
2385  09A0  21 87 03    	ld	hl,0x0387
2386  09A3  E5          	push	hl
2387  09A4  58          	ld	e,b
2388  09A5  D5          	push	de
2389  09A6  CD 00 00    	call	_spr_add_anim
2390  09A9  F1          	pop	af
2391  09AA  F1          	pop	af
2392  09AB  F1          	pop	af
2393  09AC  2E 01       	ld	l,0x01
2394  09AE  C3 C7 0B    	jp	l_player_hit_platform_00151
2395  09B1              l_player_hit_platform_00102:
2396  09B1  2A 00 00    	ld	hl,(_curr_time)
2397  09B4  22 0E 00    	ld	(_spr_timer + 0x000e),hl
2398  09B7  3A 07 00    	ld	a,(_lin + 0x0007)
2399  09BA  06 00       	ld	b,0x00
2400  09BC  C6 F8       	add	a,0xf8
2401  09BE  4F          	ld	c, a
2402  09BF  78          	ld	a, b
2403  09C0  CE FF       	adc	a,0xff
2404  09C2  5F          	ld	e, a
2405  09C3  06 04       	ld	b,0x04
2406  09C5              l_player_hit_platform_00262:
2407  09C5  CB 2B       	sra	e
2408  09C7  CB 19       	rr	c
2409  09C9  10 FA       	djnz	l_player_hit_platform_00262
2410  09CB  79          	ld	a, c
2411  09CC  07          	rlca
2412  09CD  07          	rlca
2413  09CE  07          	rlca
2414  09CF  07          	rlca
2415  09D0  E6 F0       	and	a,0xf0
2416  09D2  C6 08       	add	a,0x08
2417  09D4  32 00 00    	ld	(_player_hit_lin),a
2418  09D7  21 07 00    	ld	hl,+(_col + 0x0007)
2419  09DA  4E          	ld	c, (hl)
2420  09DB  CB 41       	bit	0, c
2421  09DD  20 06       	jr	NZ,l_player_hit_platform_00113
2422  09DF  21 00 00    	ld	hl,_player_hit_col
2423  09E2  71          	ld	(hl), c
2424  09E3  18 2D       	jr	l_player_hit_platform_00114
2425  09E5              l_player_hit_platform_00113:
2426  09E5  21 07 00    	ld	hl,+(_state + 0x0007)
2427  09E8  5E          	ld	e, (hl)
2428  09E9  41          	ld	b, c
2429  09EA  04          	inc	b
2430  09EB  0D          	dec	c
2431  09EC  CB 5B       	bit	3, e
2432  09EE  28 12       	jr	Z,l_player_hit_platform_00110
2433  09F0  3A 00 00    	ld	a,(_g_player_hit_right)
2434  09F3  B7          	or	a, a
2435  09F4  28 06       	jr	Z,l_player_hit_platform_00104
2436  09F6  21 00 00    	ld	hl,_player_hit_col
2437  09F9  70          	ld	(hl), b
2438  09FA  18 16       	jr	l_player_hit_platform_00114
2439  09FC              l_player_hit_platform_00104:
2440  09FC  21 00 00    	ld	hl,_player_hit_col
2441  09FF  71          	ld	(hl), c
2442  0A00  18 10       	jr	l_player_hit_platform_00114
2443  0A02              l_player_hit_platform_00110:
2444  0A02  3A 00 00    	ld	a,(_g_player_hit_left)
2445  0A05  B7          	or	a, a
2446  0A06  28 06       	jr	Z,l_player_hit_platform_00107
2447  0A08  21 00 00    	ld	hl,_player_hit_col
2448  0A0B  71          	ld	(hl), c
2449  0A0C  18 04       	jr	l_player_hit_platform_00114
2450  0A0E              l_player_hit_platform_00107:
2451  0A0E  21 00 00    	ld	hl,_player_hit_col
2452  0A11  70          	ld	(hl), b
2453  0A12              l_player_hit_platform_00114:
2454  0A12  01 00 00    	ld	bc,_scr_map
2455  0A15  2A 00 00    	ld	hl,(_index1)
2456  0A18  09          	add	hl,bc
2457  0A19  7E          	ld	a,(hl)
2458  0A1A  FE 5A       	cp	a,0x5a
2459  0A1C  28 05       	jr	Z,l_player_hit_platform_00141
2460  0A1E  D6 5D       	sub	a,0x5d
2461  0A20  C2 94 0B    	jp	NZ,l_player_hit_platform_00142
2462  0A23              l_player_hit_platform_00141:
2463  0A23  3A 00 00    	ld	a,(_game_boss)
2464  0A26  B7          	or	a, a
2465  0A27  28 0B       	jr	Z,l_player_hit_platform_00177
2466  0A29  3A 00 00    	ld	a,(_game_mush_count)
2467  0A2C  B7          	or	a, a
2468  0A2D  28 05       	jr	Z,l_player_hit_platform_00177
2469  0A2F  2E 00       	ld	l,0x00
2470  0A31  C3 C7 0B    	jp	l_player_hit_platform_00151
2471  0A34              l_player_hit_platform_00177:
2472  0A34  DD 36 FF 00 	ld	(ix-1),0x00
2473  0A38              l_player_hit_platform_00138:
2474  0A38  DD 7E FF    	ld	a,(ix-1)
2475  0A3B  D6 07       	sub	a,0x07
2476  0A3D  D2 97 0B    	jp	NC, l_player_hit_platform_00143
2477  0A40  3E 00       	ld	a, +((_mush_index) & 0xFF)
2478  0A42  DD 86 FF    	add	a,(ix-1)
2479  0A45  6F          	ld	l, a
2480  0A46  3E 00       	ld	a, +((_mush_index) / 256)
2481  0A48  CE 00       	adc	a,0x00
2482  0A4A  67          	ld	h, a
2483  0A4B  4E          	ld	c, (hl)
2484  0A4C  06 00       	ld	b,0x00
2485  0A4E  2A 00 00    	ld	hl,(_index1)
2486  0A51  AF          	xor	a,a
2487  0A52  ED 42       	sbc	hl,bc
2488  0A54  C2 8E 0B    	jp	NZ,l_player_hit_platform_00137
2489  0A57  3A 07 00    	ld	a,(_lin + 0x0007)
2490  0A5A  07          	rlca
2491  0A5B  07          	rlca
2492  0A5C  07          	rlca
2493  0A5D  07          	rlca
2494  0A5E  E6 0F       	and	a,0x0f
2495  0A60  07          	rlca
2496  0A61  07          	rlca
2497  0A62  07          	rlca
2498  0A63  07          	rlca
2499  0A64  E6 F0       	and	a,0xf0
2500  0A66  C6 E0       	add	a,0xe0
2501  0A68  32 00 00    	ld	(_s_lin1),a
2502  0A6B  3A 00 00    	ld	a,(_player_hit_col)
2503  0A6E  CB 3F       	srl	a
2504  0A70  87          	add	a, a
2505  0A71  32 00 00    	ld	(_s_col1),a
2506  0A74  0E 00       	ld	c,0x00
2507  0A76              l_player_hit_platform_00120:
2508  0A76  79          	ld	a, c
2509  0A77  D6 07       	sub	a,0x07
2510  0A79  30 18       	jr	NC,l_player_hit_platform_00122
2511  0A7B  06 00       	ld	b,0x00
2512  0A7D  21 00 00    	ld	hl,_mush_index
2513  0A80  09          	add	hl, bc
2514  0A81  46          	ld	b, (hl)
2515  0A82  1E 00       	ld	e,0x00
2516  0A84  21 00 00    	ld	hl,_index1
2517  0A87  7E          	ld	a, (hl)
2518  0A88  90          	sub	a, b
2519  0A89  20 05       	jr	NZ,l_player_hit_platform_00271
2520  0A8B  23          	inc	hl
2521  0A8C  7E          	ld	a, (hl)
2522  0A8D  93          	sub	a, e
2523  0A8E  28 03       	jr	Z,l_player_hit_platform_00122
2524  0A90              l_player_hit_platform_00271:
2525  0A90  0C          	inc	c
2526  0A91  18 E3       	jr	l_player_hit_platform_00120
2527  0A93              l_player_hit_platform_00122:
2528  0A93  06 00       	ld	b,0x00
2529  0A95  21 00 00    	ld	hl,_mush_class
2530  0A98  09          	add	hl, bc
2531  0A99  7E          	ld	a, (hl)
2532  0A9A  FE 79       	cp	a,0x79
2533  0A9C  28 16       	jr	Z,l_player_hit_platform_00123
2534  0A9E  FE 7A       	cp	a,0x7a
2535  0AA0  28 25       	jr	Z,l_player_hit_platform_00124
2536  0AA2  FE 7B       	cp	a,0x7b
2537  0AA4  28 47       	jr	Z,l_player_hit_platform_00126
2538  0AA6  FE 7C       	cp	a,0x7c
2539  0AA8  28 30       	jr	Z,l_player_hit_platform_00125
2540  0AAA  FE 7D       	cp	a,0x7d
2541  0AAC  28 65       	jr	Z,l_player_hit_platform_00128
2542  0AAE  D6 7E       	sub	a,0x7e
2543  0AB0  28 4E       	jr	Z,l_player_hit_platform_00127
2544  0AB2  18 70       	jr	l_player_hit_platform_00129
2545  0AB4              l_player_hit_platform_00123:
2546  0AB4  3A 00 00    	ld	a,(_s_col1)
2547  0AB7  21 06 FF    	ld	hl,0xff06
2548  0ABA  E5          	push	hl
2549  0ABB  2A 00 00    	ld	hl,(_s_lin1)
2550  0ABE  67          	ld	h,a
2551  0ABF  E5          	push	hl
2552  0AC0  CD 00 00    	call	_enemy_init
2553  0AC3  F1          	pop	af
2554  0AC4  F1          	pop	af
2555  0AC5  18 5D       	jr	l_player_hit_platform_00129
2556  0AC7              l_player_hit_platform_00124:
2557  0AC7  3A 00 00    	ld	a,(_s_col1)
2558  0ACA  21 06 01    	ld	hl,0x0106
2559  0ACD  E5          	push	hl
2560  0ACE  2A 00 00    	ld	hl,(_s_lin1)
2561  0AD1  67          	ld	h,a
2562  0AD2  E5          	push	hl
2563  0AD3  CD 00 00    	call	_enemy_init
2564  0AD6  F1          	pop	af
2565  0AD7  F1          	pop	af
2566  0AD8  18 4A       	jr	l_player_hit_platform_00129
2567  0ADA              l_player_hit_platform_00125:
2568  0ADA  3A 00 00    	ld	a,(_s_col1)
2569  0ADD  21 07 01    	ld	hl,0x0107
2570  0AE0  E5          	push	hl
2571  0AE1  2A 00 00    	ld	hl,(_s_lin1)
2572  0AE4  67          	ld	h,a
2573  0AE5  E5          	push	hl
2574  0AE6  CD 00 00    	call	_enemy_init
2575  0AE9  F1          	pop	af
2576  0AEA  F1          	pop	af
2577  0AEB  18 37       	jr	l_player_hit_platform_00129
2578  0AED              l_player_hit_platform_00126:
2579  0AED  3A 00 00    	ld	a,(_s_col1)
2580  0AF0  21 07 FF    	ld	hl,0xff07
2581  0AF3  E5          	push	hl
2582  0AF4  2A 00 00    	ld	hl,(_s_lin1)
2583  0AF7  67          	ld	h,a
2584  0AF8  E5          	push	hl
2585  0AF9  CD 00 00    	call	_enemy_init
2586  0AFC  F1          	pop	af
2587  0AFD  F1          	pop	af
2588  0AFE  18 24       	jr	l_player_hit_platform_00129
2589  0B00              l_player_hit_platform_00127:
2590  0B00  3A 00 00    	ld	a,(_s_col1)
2591  0B03  21 08 01    	ld	hl,0x0108
2592  0B06  E5          	push	hl
2593  0B07  2A 00 00    	ld	hl,(_s_lin1)
2594  0B0A  67          	ld	h,a
2595  0B0B  E5          	push	hl
2596  0B0C  CD 00 00    	call	_enemy_init
2597  0B0F  F1          	pop	af
2598  0B10  F1          	pop	af
2599  0B11  18 11       	jr	l_player_hit_platform_00129
2600  0B13              l_player_hit_platform_00128:
2601  0B13  3A 00 00    	ld	a,(_s_col1)
2602  0B16  21 08 FF    	ld	hl,0xff08
2603  0B19  E5          	push	hl
2604  0B1A  2A 00 00    	ld	hl,(_s_lin1)
2605  0B1D  67          	ld	h,a
2606  0B1E  E5          	push	hl
2607  0B1F  CD 00 00    	call	_enemy_init
2608  0B22  F1          	pop	af
2609  0B23  F1          	pop	af
2610  0B24              l_player_hit_platform_00129:
2611  0B24  CD 00 00    	call	_audio_mushroom
2612  0B27  21 00 00    	ld	hl,_game_mush_count
2613  0B2A  34          	inc	(hl)
2614  0B2B  3A 00 00    	ld	a,(_game_boss)
2615  0B2E  B7          	or	a, a
2616  0B2F  20 5D       	jr	NZ,l_player_hit_platform_00137
2617  0B31  3A 00 00    	ld	a,(_index1)
2618  0B34  C6 F0       	add	a,0xf0
2619  0B36  32 00 00    	ld	(_index0),a
2620  0B39  3A 01 00    	ld	a,(_index1 + 1)
2621  0B3C  CE FF       	adc	a,0xff
2622  0B3E  21 01 00    	ld	hl,_index0 + 1
2623  0B41  77          	ld	(hl), a
2624  0B42  3E 00       	ld	a, +((_scr_map) & 0xFF)
2625  0B44  2B          	dec	hl
2626  0B45  86          	add	a, (hl)
2627  0B46  4F          	ld	c, a
2628  0B47  3E 00       	ld	a, +((_scr_map) / 256)
2629  0B49  23          	inc	hl
2630  0B4A  8E          	adc	a, (hl)
2631  0B4B  47          	ld	b, a
2632  0B4C  C5          	push	bc
2633  0B4D  2B          	dec	hl
2634  0B4E  7E          	ld	a, (hl)
2635  0B4F  23          	inc	hl
2636  0B50  66          	ld	h, (hl)
2637  0B51  6F          	ld	l, a
2638  0B52  CD 00 00    	call	_game_match_back
2639  0B55  C1          	pop	bc
2640  0B56  7D          	ld	a,l
2641  0B57  02          	ld	(bc), a
2642  0B58  01 00 00    	ld	bc,_scr_map
2643  0B5B  2A 00 00    	ld	hl,(_index1)
2644  0B5E  09          	add	hl,bc
2645  0B5F  7E          	ld	a,(hl)
2646  0B60  FE 5A       	cp	a,0x5a
2647  0B62  4D          	ld	c,l
2648  0B63  44          	ld	b,h
2649  0B64  28 04       	jr	Z,l_player_hit_platform_00130
2650  0B66  D6 5D       	sub	a,0x5d
2651  0B68  20 05       	jr	NZ,l_player_hit_platform_00131
2652  0B6A              l_player_hit_platform_00130:
2653  0B6A  3E 4F       	ld	a,0x4f
2654  0B6C  02          	ld	(bc), a
2655  0B6D  18 03       	jr	l_player_hit_platform_00132
2656  0B6F              l_player_hit_platform_00131:
2657  0B6F  3E 54       	ld	a,0x54
2658  0B71  02          	ld	(bc), a
2659  0B72              l_player_hit_platform_00132:
2660  0B72  2A 00 00    	ld	hl,(_index1)
2661  0B75  01 F0 FF    	ld	bc,0xfff0
2662  0B78  09          	add	hl,bc
2663  0B79  CD 00 00    	call	_game_obj_set
2664  0B7C  3A 00 00    	ld	a,(_s_lin1)
2665  0B7F  C6 10       	add	a,0x10
2666  0B81  4F          	ld	c, a
2667  0B82  3A 00 00    	ld	a, (_s_col1)
2668  0B85  47          	ld	b,a
2669  0B86  C5          	push	bc
2670  0B87  3E 4F       	ld	a,0x4f
2671  0B89  F5          	push	af
2672  0B8A  33          	inc	sp
2673  0B8B  CD 00 00    	call	_NIRVANAP_drawT_callee
2674  0B8E              l_player_hit_platform_00137:
2675  0B8E  DD 34 FF    	inc	(ix-1)
2676  0B91  C3 38 0A    	jp	l_player_hit_platform_00138
2677  0B94              l_player_hit_platform_00142:
2678  0B94  CD 00 00    	call	_audio_golpe
2679  0B97              l_player_hit_platform_00143:
2680  0B97  2E 01       	ld	l,0x01
2681  0B99  CD 00 00    	call	_spr_brick_anim
2682  0B9C  2A FF FF    	ld	hl,(_player_hit_col - 1)
2683  0B9F  3A 00 00    	ld	a,(_player_hit_lin)
2684  0BA2  6F          	ld	l,a
2685  0BA3  E5          	push	hl
2686  0BA4  CD 00 00    	call	_spr_calc_index
2687  0BA7  F1          	pop	af
2688  0BA8  22 00 00    	ld	(_index1),hl
2689  0BAB  3E 10       	ld	a,0x10
2690  0BAD  21 00 00    	ld	hl,_index1
2691  0BB0  BE          	cp	a, (hl)
2692  0BB1  3E 00       	ld	a,0x00
2693  0BB3  23          	inc	hl
2694  0BB4  9E          	sbc	a, (hl)
2695  0BB5  30 0A       	jr	NC,l_player_hit_platform_00146
2696  0BB7  2B          	dec	hl
2697  0BB8  7E          	ld	a, (hl)
2698  0BB9  C6 F0       	add	a,0xf0
2699  0BBB  32 00 00    	ld	(_sprite_curr_index),a
2700  0BBE  CD 99 07    	call	_player_pick_item
2701  0BC1              l_player_hit_platform_00146:
2702  0BC1  2E 01       	ld	l,0x01
2703  0BC3  18 02       	jr	l_player_hit_platform_00151
2704  0BC5              l_player_hit_platform_00148:
2705  0BC5  2E 00       	ld	l,0x00
2706  0BC7              l_player_hit_platform_00151:
2707  0BC7  33          	inc	sp
2708  0BC8  DD E1       	pop	ix
2709  0BCA  C9          	ret
2710  0BCB              	SECTION code_compiler
2711  0BCB              ;	---------------------------------
2712  0BCB              ; Function player_hit_platform_clear
2713  0BCB              ; ---------------------------------
2714  0BCB              _player_hit_platform_clear:
2715  0BCB  3E 04       	ld	a,0x04
2716  0BCD  F5          	push	af
2717  0BCE  33          	inc	sp
2718  0BCF  21 0E 00    	ld	hl, +(_spr_timer + 0x000e)
2719  0BD2  E5          	push	hl
2720  0BD3  CD 00 00    	call	_game_check_time
2721  0BD6  F1          	pop	af
2722  0BD7  33          	inc	sp
2723  0BD8  7D          	ld	a, l
2724  0BD9  B7          	or	a, a
2725  0BDA  C8          	ret	Z
2726  0BDB  2A FF FF    	ld	hl,(_player_hit_col - 1)
2727  0BDE  3A 00 00    	ld	a,(_player_hit_lin)
2728  0BE1  6F          	ld	l,a
2729  0BE2  E5          	push	hl
2730  0BE3  CD 00 00    	call	_spr_calc_index
2731  0BE6  F1          	pop	af
2732  0BE7  22 00 00    	ld	(_index1),hl
2733  0BEA  2E 00       	ld	l,0x00
2734  0BEC  CD 00 00    	call	_spr_brick_anim
2735  0BEF  21 00 00    	ld	hl,_player_hit_lin
2736  0BF2  36 00       	ld	(hl),0x00
2737  0BF4  21 00 00    	ld	hl,_player_hit_col
2738  0BF7  36 00       	ld	(hl),0x00
2739  0BF9  C9          	ret
2740  0BFA              	SECTION code_compiler
2741  0BFA              ;	---------------------------------
2742  0BFA              ; Function player_score_add
2743  0BFA              ; ---------------------------------
2744  0BFA              _player_score_add:
2745  0BFA  ED 4B 00 00 	ld	bc,(_player_score)
2746  0BFE  09          	add	hl,bc
2747  0BFF  22 00 00    	ld	(_player_score),hl
2748  0C02  21 00 00    	ld	hl,_player_lvl
2749  0C05  7E          	ld	a, (hl)
2750  0C06  D6 0A       	sub	a,0x0a
2751  0C08  30 45       	jr	NC,l_player_score_add_00104
2752  0C0A  01 00 00    	ld	bc,_player_lvl_table+0
2753  0C0D  6E          	ld	l,(hl)
2754  0C0E  26 00       	ld	h,0x00
2755  0C10  29          	add	hl, hl
2756  0C11  09          	add	hl, bc
2757  0C12  4E          	ld	c, (hl)
2758  0C13  23          	inc	hl
2759  0C14  46          	ld	b, (hl)
2760  0C15  21 00 00    	ld	hl,_player_score
2761  0C18  7E          	ld	a, (hl)
2762  0C19  91          	sub	a, c
2763  0C1A  23          	inc	hl
2764  0C1B  7E          	ld	a, (hl)
2765  0C1C  98          	sbc	a, b
2766  0C1D  38 30       	jr	C,l_player_score_add_00104
2767  0C1F  21 00 00    	ld	hl,_player_lvl
2768  0C22  34          	inc	(hl)
2769  0C23  CD 00 00    	call	_game_update_stats
2770  0C26  CD 00 00    	call	_spr_flatten
2771  0C29  CD 00 00    	call	_audio_levelup
2772  0C2C  21 16 00    	ld	hl,___str_2
2773  0C2F  E5          	push	hl
2774  0C30  21 0C 0C    	ld	hl,0x0c0c
2775  0C33  E5          	push	hl
2776  0C34  CD 00 00    	call	_zx_print_str
2777  0C37  AF          	xor	a, a
2778  0C38  F5          	push	af
2779  0C39  33          	inc	sp
2780  0C3A  21 3C 00    	ld	hl,0x003c
2781  0C3D  E5          	push	hl
2782  0C3E  21 0C 15    	ld	hl,0x150c
2783  0C41  E5          	push	hl
2784  0C42  3E 0C       	ld	a,0x0c
2785  0C44  F5          	push	af
2786  0C45  33          	inc	sp
2787  0C46  CD 00 00    	call	_game_colour_message
2788  0C49  F1          	pop	af
2789  0C4A  F1          	pop	af
2790  0C4B  F1          	pop	af
2791  0C4C  CD 00 00    	call	_spr_unflattenP1
2792  0C4F              l_player_score_add_00104:
2793  0C4F  3A 00 00    	ld	a,(_game_score_top)
2794  0C52  21 00 00    	ld	hl,_player_score
2795  0C55  96          	sub	a, (hl)
2796  0C56  3A 01 00    	ld	a,(_game_score_top + 1)
2797  0C59  23          	inc	hl
2798  0C5A  9E          	sbc	a, (hl)
2799  0C5B  30 06       	jr	NC,l_player_score_add_00106
2800  0C5D  2A 00 00    	ld	hl,(_player_score)
2801  0C60  22 00 00    	ld	(_game_score_top),hl
2802  0C63              l_player_score_add_00106:
2803  0C63  CD 00 00    	call	_game_print_score
2804  0C66  C9          	ret
2805  0C67              	SECTION rodata_compiler
2806  0016              ___str_2:
2807  0016  4C 45 56 45 4C 20 55 50 21 
                        	DEFM "LEVEL UP!"
2808  001F  00          	DEFB 0x00
2809  0020              	SECTION code_compiler
2810  0C67              ;	---------------------------------
2811  0C67              ; Function player_check_floor
2812  0C67              ; ---------------------------------
2813  0C67              _player_check_floor:
2814  0C67  CD 00 00    	call	___sdcc_enter_ix
2815  0C6A  F5          	push	af
2816  0C6B  F5          	push	af
2817  0C6C  F5          	push	af
2818  0C6D  21 07 00    	ld	hl,+(_col + 0x0007)
2819  0C70  56          	ld	d, (hl)
2820  0C71  3A 07 00    	ld	a,(_lin + 0x0007)
2821  0C74  C6 10       	add	a,0x10
2822  0C76  5F          	ld	e, a
2823  0C77  D5          	push	de
2824  0C78  CD 00 00    	call	_spr_calc_index
2825  0C7B  F1          	pop	af
2826  0C7C  DD 75 FC    	ld	(ix-4),l
2827  0C7F  DD 74 FD    	ld	(ix-3),h
2828  0C82  11 00 00    	ld	de,_scr_map+0
2829  0C85  7B          	ld	a, e
2830  0C86  DD 86 FC    	add	a,(ix-4)
2831  0C89  4F          	ld	c, a
2832  0C8A  7A          	ld	a, d
2833  0C8B  DD 8E FD    	adc	a,(ix-3)
2834  0C8E  47          	ld	b, a
2835  0C8F  0A          	ld	a, (bc)
2836  0C90  DD 77 FB    	ld	(ix-5),a
2837  0C93  DD 6E FC    	ld	l,(ix-4)
2838  0C96  DD 66 FD    	ld	h,(ix-3)
2839  0C99  23          	inc	hl
2840  0C9A  19          	add	hl,de
2841  0C9B  DD 75 FE    	ld	(ix-2),l
2842  0C9E  DD 74 FF    	ld	(ix-1),h
2843  0CA1  3A 00 00    	ld	a,(_s_lin0)
2844  0CA4  D6 90       	sub	a,0x90
2845  0CA6  20 24       	jr	NZ,l_player_check_floor_00108
2846  0CA8  3A 00 00    	ld	a,(_map_heigth)
2847  0CAB  2A 00 00    	ld	hl,(_scr_curr)
2848  0CAE  C5          	push	bc
2849  0CAF  67          	ld	h,a
2850  0CB0  E5          	push	hl
2851  0CB1  CD 00 00    	call	__divuchar_callee
2852  0CB4  C1          	pop	bc
2853  0CB5  7D          	ld	a,l
2854  0CB6  3C          	inc	a
2855  0CB7  32 00 00    	ld	(_tmp1),a
2856  0CBA  21 00 00    	ld	hl,_map_heigth
2857  0CBD  96          	sub	a, (hl)
2858  0CBE  30 06       	jr	NC,l_player_check_floor_00102
2859  0CC0  DD 36 FB 00 	ld	(ix-5),0x00
2860  0CC4  18 1C       	jr	l_player_check_floor_00109
2861  0CC6              l_player_check_floor_00102:
2862  0CC6  DD 36 FB 48 	ld	(ix-5),0x48
2863  0CCA  18 16       	jr	l_player_check_floor_00109
2864  0CCC              l_player_check_floor_00108:
2865  0CCC  3A 07 00    	ld	a,(_col + 0x0007)
2866  0CCF  0F          	rrca
2867  0CD0  38 06       	jr	C,l_player_check_floor_00105
2868  0CD2  DD 36 FA 00 	ld	(ix-6),0x00
2869  0CD6  18 0A       	jr	l_player_check_floor_00109
2870  0CD8              l_player_check_floor_00105:
2871  0CD8  DD 6E FE    	ld	l,(ix-2)
2872  0CDB  DD 66 FF    	ld	h,(ix-1)
2873  0CDE  7E          	ld	a, (hl)
2874  0CDF  DD 77 FA    	ld	(ix-6),a
2875  0CE2              l_player_check_floor_00109:
2876  0CE2  DD 7E FB    	ld	a,(ix-5)
2877  0CE5  D6 3A       	sub	a,0x3a
2878  0CE7  38 07       	jr	C,l_player_check_floor_00132
2879  0CE9  DD 7E FB    	ld	a,(ix-5)
2880  0CEC  D6 60       	sub	a,0x60
2881  0CEE  38 32       	jr	C,l_player_check_floor_00128
2882  0CF0              l_player_check_floor_00132:
2883  0CF0  DD 7E FA    	ld	a,(ix-6)
2884  0CF3  D6 3A       	sub	a,0x3a
2885  0CF5  38 07       	jr	C,l_player_check_floor_00127
2886  0CF7  DD 7E FA    	ld	a,(ix-6)
2887  0CFA  D6 60       	sub	a,0x60
2888  0CFC  38 24       	jr	C,l_player_check_floor_00128
2889  0CFE              l_player_check_floor_00127:
2890  0CFE  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
2891  0D01  36 02       	ld	(hl),0x02
2892  0D03  21 00 00    	ld	hl,_s_state
2893  0D06  CB CE       	set	1, (hl)
2894  0D08  2E 00       	ld	l,0x00
2895  0D0A  CD 76 06    	call	_player_check_stairs
2896  0D0D  3A 00 00    	ld	a,(_player_onstair)
2897  0D10  B7          	or	a, a
2898  0D11  C2 AE 0D    	jp	NZ, l_player_check_floor_00133
2899  0D14  3A 00 00    	ld	a,(_s_lin0)
2900  0D17  D6 90       	sub	a,0x90
2901  0D19  C2 AE 0D    	jp	NZ,l_player_check_floor_00133
2902  0D1C  CD 00 00    	call	_spr_page_down
2903  0D1F  C3 AE 0D    	jp	l_player_check_floor_00133
2904  0D22              l_player_check_floor_00128:
2905  0D22  C5          	push	bc
2906  0D23  3E 10       	ld	a,0x10
2907  0D25  F5          	push	af
2908  0D26  33          	inc	sp
2909  0D27  21 00 00    	ld	hl,_player_brick_time
2910  0D2A  E5          	push	hl
2911  0D2B  CD 00 00    	call	_game_check_time
2912  0D2E  F1          	pop	af
2913  0D2F  33          	inc	sp
2914  0D30  C1          	pop	bc
2915  0D31  7D          	ld	a,l
2916  0D32  B7          	or	a, a
2917  0D33  CA AE 0D    	jp	Z, l_player_check_floor_00133
2918  0D36  2A 00 00    	ld	hl,(_curr_time)
2919  0D39  22 00 00    	ld	(_player_brick_time),hl
2920  0D3C  DD 7E FB    	ld	a,(ix-5)
2921  0D3F  D6 40       	sub	a,0x40
2922  0D41  20 12       	jr	NZ,l_player_check_floor_00114
2923  0D43  C5          	push	bc
2924  0D44  DD 6E FC    	ld	l,(ix-4)
2925  0D47  DD 66 FD    	ld	h,(ix-3)
2926  0D4A  CD 00 00    	call	_game_match_back
2927  0D4D  C1          	pop	bc
2928  0D4E  7D          	ld	a,l
2929  0D4F  02          	ld	(bc), a
2930  0D50  C5          	push	bc
2931  0D51  CD B3 0D    	call	_player_gasta_brick
2932  0D54  C1          	pop	bc
2933  0D55              l_player_check_floor_00114:
2934  0D55  DD 7E FB    	ld	a,(ix-5)
2935  0D58  D6 3F       	sub	a,0x3f
2936  0D5A  20 08       	jr	NZ,l_player_check_floor_00116
2937  0D5C  3E 40       	ld	a,0x40
2938  0D5E  02          	ld	(bc), a
2939  0D5F  C5          	push	bc
2940  0D60  CD B3 0D    	call	_player_gasta_brick
2941  0D63  C1          	pop	bc
2942  0D64              l_player_check_floor_00116:
2943  0D64  DD 7E FB    	ld	a,(ix-5)
2944  0D67  D6 3E       	sub	a,0x3e
2945  0D69  20 06       	jr	NZ,l_player_check_floor_00118
2946  0D6B  3E 3F       	ld	a,0x3f
2947  0D6D  02          	ld	(bc), a
2948  0D6E  CD B3 0D    	call	_player_gasta_brick
2949  0D71              l_player_check_floor_00118:
2950  0D71  DD 7E FA    	ld	a,(ix-6)
2951  0D74  D6 40       	sub	a,0x40
2952  0D76  20 12       	jr	NZ,l_player_check_floor_00120
2953  0D78  C1          	pop	bc
2954  0D79  E1          	pop	hl
2955  0D7A  E5          	push	hl
2956  0D7B  C5          	push	bc
2957  0D7C  CD 00 00    	call	_game_match_back
2958  0D7F  4D          	ld	c, l
2959  0D80  DD 6E FE    	ld	l,(ix-2)
2960  0D83  DD 66 FF    	ld	h,(ix-1)
2961  0D86  71          	ld	(hl), c
2962  0D87  CD B3 0D    	call	_player_gasta_brick
2963  0D8A              l_player_check_floor_00120:
2964  0D8A  DD 7E FA    	ld	a,(ix-6)
2965  0D8D  D6 3F       	sub	a,0x3f
2966  0D8F  20 0B       	jr	NZ,l_player_check_floor_00122
2967  0D91  DD 6E FE    	ld	l,(ix-2)
2968  0D94  DD 66 FF    	ld	h,(ix-1)
2969  0D97  36 40       	ld	(hl),0x40
2970  0D99  CD B3 0D    	call	_player_gasta_brick
2971  0D9C              l_player_check_floor_00122:
2972  0D9C  DD 7E FA    	ld	a,(ix-6)
2973  0D9F  D6 3E       	sub	a,0x3e
2974  0DA1  20 0B       	jr	NZ,l_player_check_floor_00133
2975  0DA3  DD 6E FE    	ld	l,(ix-2)
2976  0DA6  DD 66 FF    	ld	h,(ix-1)
2977  0DA9  36 3F       	ld	(hl),0x3f
2978  0DAB  CD B3 0D    	call	_player_gasta_brick
2979  0DAE              l_player_check_floor_00133:
2980  0DAE  DD F9       	ld	sp, ix
2981  0DB0  DD E1       	pop	ix
2982  0DB2  C9          	ret
2983  0DB3              	SECTION code_compiler
2984  0DB3              ;	---------------------------------
2985  0DB3              ; Function player_gasta_brick
2986  0DB3              ; ---------------------------------
2987  0DB3              _player_gasta_brick:
2988  0DB3  3A 00 00    	ld	a,(_s_lin0)
2989  0DB6  32 00 00    	ld	(_s_lin1),a
2990  0DB9  3A 00 00    	ld	a,(_s_col0)
2991  0DBC  32 00 00    	ld	(_s_col1),a
2992  0DBF  3A 07 00    	ld	a,(_lin + 0x0007)
2993  0DC2  C6 10       	add	a,0x10
2994  0DC4  32 00 00    	ld	(_s_lin0),a
2995  0DC7  3A 07 00    	ld	a,(_col + 0x0007)
2996  0DCA  32 00 00    	ld	(_s_col0),a
2997  0DCD  CD 00 00    	call	_spr_back_repaint
2998  0DD0  3A 00 00    	ld	a,(_s_lin1)
2999  0DD3  32 00 00    	ld	(_s_lin0),a
3000  0DD6  3A 00 00    	ld	a,(_s_col1)
3001  0DD9  32 00 00    	ld	(_s_col0),a
3002  0DDC  C9          	ret
3003  0DDD              	SECTION code_compiler
3004  0DDD              ;	---------------------------------
3005  0DDD              ; Function player_move_jump
3006  0DDD              ; ---------------------------------
3007  0DDD              _player_move_jump:
3008  0DDD  21 00 00    	ld	hl,_game_gravity
3009  0DE0  4E          	ld	c, (hl)
3010  0DE1  21 00 00    	ld	hl,_player_vel_y
3011  0DE4  7E          	ld	a, (hl)
3012  0DE5  81          	add	a, c
3013  0DE6  77          	ld	(hl), a
3014  0DE7  3A 00 00    	ld	a,(_player_vel_inc)
3015  0DEA  B7          	or	a, a
3016  0DEB  28 27       	jr	Z,l_player_move_jump_00106
3017  0DED  3A 00 00    	ld	a,(_player_vel_y1)
3018  0DF0  21 00 00    	ld	hl,_player_vel_y
3019  0DF3  96          	sub	a, (hl)
3020  0DF4  E2 F9 0D    	jp	PO, l_player_move_jump_00243
3021  0DF7  EE 80       	xor	a,0x80
3022  0DF9              l_player_move_jump_00243:
3023  0DF9  F2 14 0E    	jp	P, l_player_move_jump_00106
3024  0DFC  3A 00 00    	ld	a,(_player_vel_y)
3025  0DFF  CB 7F       	bit	7, a
3026  0E01  28 11       	jr	Z,l_player_move_jump_00106
3027  0E03  CD D8 01    	call	_player_action_jump
3028  0E06  7D          	ld	a, l
3029  0E07  B7          	or	a, a
3030  0E08  20 0A       	jr	NZ,l_player_move_jump_00106
3031  0E0A  21 00 00    	ld	hl,_player_vel_y
3032  0E0D  36 00       	ld	(hl),0x00
3033  0E0F  21 00 00    	ld	hl,_player_vel_inc
3034  0E12  36 00       	ld	(hl),0x00
3035  0E14              l_player_move_jump_00106:
3036  0E14  3E 78       	ld	a,0x78
3037  0E16  21 00 00    	ld	hl,_player_vel_y
3038  0E19  96          	sub	a, (hl)
3039  0E1A  E2 1F 0E    	jp	PO, l_player_move_jump_00244
3040  0E1D  EE 80       	xor	a,0x80
3041  0E1F              l_player_move_jump_00244:
3042  0E1F  F2 27 0E    	jp	P, l_player_move_jump_00108
3043  0E22  21 00 00    	ld	hl,_player_vel_y
3044  0E25  36 78       	ld	(hl),0x78
3045  0E27              l_player_move_jump_00108:
3046  0E27  21 00 00    	ld	hl,_player_vel_y
3047  0E2A  7E          	ld	a, (hl)
3048  0E2B  EE 80       	xor	a,0x80
3049  0E2D  D6 08       	sub	a,0x08
3050  0E2F  30 02       	jr	NC,l_player_move_jump_00110
3051  0E31  36 88       	ld	(hl),0x88
3052  0E33              l_player_move_jump_00110:
3053  0E33  3A 00 00    	ld	a,(_player_vel_y)
3054  0E36  4F          	ld	c,a
3055  0E37  17          	rla
3056  0E38  9F          	sbc	a, a
3057  0E39  47          	ld	b, a
3058  0E3A  CB 41       	bit	0,c
3059  0E3C  21 00 00    	ld	hl,_s_lin1
3060  0E3F  71          	ld	(hl),c
3061  0E40  28 04       	jr	Z,l_player_move_jump_00112
3062  0E42  21 00 00    	ld	hl,_s_lin1
3063  0E45  35          	dec	(hl)
3064  0E46              l_player_move_jump_00112:
3065  0E46  3A 07 00    	ld	a,(_lin + 0x0007)
3066  0E49  21 00 00    	ld	hl,_s_lin1
3067  0E4C  86          	add	a, (hl)
3068  0E4D  77          	ld	(hl), a
3069  0E4E  CB 78       	bit	7, b
3070  0E50  28 5A       	jr	Z,l_player_move_jump_00138
3071  0E52  21 00 00    	ld	hl,_s_state
3072  0E55  CD 00 00    	call	_spr_set_up
3073  0E58  3E 90       	ld	a,0x90
3074  0E5A  21 00 00    	ld	hl,_s_lin1
3075  0E5D  96          	sub	a, (hl)
3076  0E5E  30 11       	jr	NC,l_player_move_jump_00117
3077  0E60  CD 00 00    	call	_spr_page_up
3078  0E63  7D          	ld	a, l
3079  0E64  B7          	or	a, a
3080  0E65  28 05       	jr	Z,l_player_move_jump_00114
3081  0E67  2E 00       	ld	l,0x00
3082  0E69  C3 6A 0F    	jp	l_player_move_jump_00149
3083  0E6C              l_player_move_jump_00114:
3084  0E6C  21 00 00    	ld	hl,_s_lin1
3085  0E6F  36 00       	ld	(hl),0x00
3086  0E71              l_player_move_jump_00117:
3087  0E71  21 07 00    	ld	hl,+(_col + 0x0007)
3088  0E74  46          	ld	b, (hl)
3089  0E75  3A 00 00    	ld	a,(_s_lin1)
3090  0E78  4F          	ld	c,a
3091  0E79  C5          	push	bc
3092  0E7A  CD 00 00    	call	_game_check_map
3093  0E7D  F1          	pop	af
3094  0E7E  7C          	ld	a,h
3095  0E7F  B5          	or	a,l
3096  0E80  28 21       	jr	Z,l_player_move_jump_00121
3097  0E82  CD 49 09    	call	_player_hit_platform
3098  0E85  7D          	ld	a, l
3099  0E86  B7          	or	a, a
3100  0E87  28 12       	jr	Z,l_player_move_jump_00119
3101  0E89  3A 07 00    	ld	a,(_lin + 0x0007)
3102  0E8C  07          	rlca
3103  0E8D  07          	rlca
3104  0E8E  07          	rlca
3105  0E8F  07          	rlca
3106  0E90  E6 0F       	and	a,0x0f
3107  0E92  07          	rlca
3108  0E93  07          	rlca
3109  0E94  07          	rlca
3110  0E95  07          	rlca
3111  0E96  E6 F0       	and	a,0xf0
3112  0E98  32 07 00    	ld	((_lin + 0x0007)),a
3113  0E9B              l_player_move_jump_00119:
3114  0E9B  21 00 00    	ld	hl,_player_vel_y
3115  0E9E  36 00       	ld	(hl),0x00
3116  0EA0  C3 2B 0F    	jp	l_player_move_jump_00139
3117  0EA3              l_player_move_jump_00121:
3118  0EA3  3A 00 00    	ld	a,(_s_lin1)
3119  0EA6  32 07 00    	ld	((_lin + 0x0007)),a
3120  0EA9  C3 2B 0F    	jp	l_player_move_jump_00139
3121  0EAC              l_player_move_jump_00138:
3122  0EAC  21 00 00    	ld	hl,_s_state
3123  0EAF  CD 00 00    	call	_spr_set_down
3124  0EB2  3E 90       	ld	a,0x90
3125  0EB4  21 00 00    	ld	hl,_s_lin1
3126  0EB7  96          	sub	a, (hl)
3127  0EB8  30 11       	jr	NC,l_player_move_jump_00127
3128  0EBA  CD 00 00    	call	_spr_page_down
3129  0EBD  7D          	ld	a, l
3130  0EBE  B7          	or	a, a
3131  0EBF  28 05       	jr	Z,l_player_move_jump_00124
3132  0EC1  2E 00       	ld	l,0x00
3133  0EC3  C3 6A 0F    	jp	l_player_move_jump_00149
3134  0EC6              l_player_move_jump_00124:
3135  0EC6  21 00 00    	ld	hl,_s_lin1
3136  0EC9  36 90       	ld	(hl),0x90
3137  0ECB              l_player_move_jump_00127:
3138  0ECB  21 07 00    	ld	hl,+(_col + 0x0007)
3139  0ECE  56          	ld	d, (hl)
3140  0ECF  3A 00 00    	ld	a,(_s_lin1)
3141  0ED2  C6 10       	add	a,0x10
3142  0ED4  5F          	ld	e, a
3143  0ED5  D5          	push	de
3144  0ED6  CD 00 00    	call	_game_check_map
3145  0ED9  F1          	pop	af
3146  0EDA  7C          	ld	a,h
3147  0EDB  B5          	or	a,l
3148  0EDC  28 47       	jr	Z,l_player_move_jump_00135
3149  0EDE  2E 00       	ld	l,0x00
3150  0EE0  CD 76 06    	call	_player_check_stairs
3151  0EE3  3A 00 00    	ld	a,(_player_onstair)
3152  0EE6  B7          	or	a, a
3153  0EE7  20 05       	jr	NZ,l_player_move_jump_00129
3154  0EE9  2E 01       	ld	l,0x01
3155  0EEB  CD 76 06    	call	_player_check_stairs
3156  0EEE              l_player_move_jump_00129:
3157  0EEE  3A 00 00    	ld	a,(_player_onstair)
3158  0EF1  B7          	or	a, a
3159  0EF2  20 12       	jr	NZ,l_player_move_jump_00131
3160  0EF4  3A 00 00    	ld	a,(_s_lin1)
3161  0EF7  07          	rlca
3162  0EF8  07          	rlca
3163  0EF9  07          	rlca
3164  0EFA  07          	rlca
3165  0EFB  E6 0F       	and	a,0x0f
3166  0EFD  07          	rlca
3167  0EFE  07          	rlca
3168  0EFF  07          	rlca
3169  0F00  07          	rlca
3170  0F01  E6 F0       	and	a,0xf0
3171  0F03  32 07 00    	ld	((_lin + 0x0007)),a
3172  0F06              l_player_move_jump_00131:
3173  0F06  21 00 00    	ld	hl,_player_vel_y
3174  0F09  36 00       	ld	(hl),0x00
3175  0F0B  21 00 00    	ld	hl,_s_state
3176  0F0E  7E          	ld	a,(hl)
3177  0F0F  E6 FC       	and	a,+(0xfd&0xfe)
3178  0F11  77          	ld	(hl),a
3179  0F12  3A 07 00    	ld	a,(_lin + 0x0007)
3180  0F15  D6 90       	sub	a,0x90
3181  0F17  38 03       	jr	C,l_player_move_jump_00133
3182  0F19  CD 00 00    	call	_spr_page_down
3183  0F1C              l_player_move_jump_00133:
3184  0F1C  21 07 00    	ld	hl, +(_colint + 0x0007)
3185  0F1F  36 00       	ld	(hl),0x00
3186  0F21  2E 01       	ld	l,0x01
3187  0F23  18 45       	jr	l_player_move_jump_00149
3188  0F25              l_player_move_jump_00135:
3189  0F25  3A 00 00    	ld	a,(_s_lin1)
3190  0F28  32 07 00    	ld	((_lin + 0x0007)),a
3191  0F2B              l_player_move_jump_00139:
3192  0F2B  21 00 00    	ld	hl,_s_state
3193  0F2E  CB 5E       	bit	3,(hl)
3194  0F30  20 1E       	jr	NZ,l_player_move_jump_00145
3195  0F32  CB 56       	bit	2, (hl)
3196  0F34  20 1A       	jr	NZ,l_player_move_jump_00145
3197  0F36  21 00 00    	ld	hl,_dirs
3198  0F39  CB 56       	bit	2, (hl)
3199  0F3B  28 06       	jr	Z,l_player_move_jump_00141
3200  0F3D  21 00 00    	ld	hl,_s_state
3201  0F40  CD 00 00    	call	_spr_set_left
3202  0F43              l_player_move_jump_00141:
3203  0F43  21 00 00    	ld	hl,_dirs
3204  0F46  CB 5E       	bit	3, (hl)
3205  0F48  28 06       	jr	Z,l_player_move_jump_00145
3206  0F4A  21 00 00    	ld	hl,_s_state
3207  0F4D  CD 00 00    	call	_spr_set_right
3208  0F50              l_player_move_jump_00145:
3209  0F50  21 00 00    	ld	hl,_player_jump_check
3210  0F53  36 01       	ld	(hl),0x01
3211  0F55  CD 00 00    	call	_spr_move_horizontal
3212  0F58  7D          	ld	a, l
3213  0F59  B7          	or	a, a
3214  0F5A  28 07       	jr	Z,l_player_move_jump_00148
3215  0F5C  21 00 00    	ld	hl,_s_state
3216  0F5F  7E          	ld	a,(hl)
3217  0F60  E6 F3       	and	a,+(0xf7&0xfb)
3218  0F62  77          	ld	(hl),a
3219  0F63              l_player_move_jump_00148:
3220  0F63  21 00 00    	ld	hl,_player_jump_check
3221  0F66  36 00       	ld	(hl),0x00
3222  0F68  2E 00       	ld	l,0x00
3223  0F6A              l_player_move_jump_00149:
3224  0F6A  C9          	ret
3225  0F6B              	SECTION code_compiler
3226  0F6B              ;	---------------------------------
3227  0F6B              ; Function player_open_door
3228  0F6B              ; ---------------------------------
3229  0F6B              _player_open_door:
3230  0F6B  CD 00 00    	call	___sdcc_enter_ix
3231  0F6E  0E 00       	ld	c,0x00
3232  0F70  DD 7E 06    	ld	a,(ix+6)
3233  0F73  D6 48       	sub	a,0x48
3234  0F75  28 17       	jr	Z,l_player_open_door_00101
3235  0F77  DD 7E 06    	ld	a,(ix+6)
3236  0F7A  D6 49       	sub	a,0x49
3237  0F7C  28 1A       	jr	Z,l_player_open_door_00104
3238  0F7E  DD 7E 06    	ld	a,(ix+6)
3239  0F81  D6 4A       	sub	a,0x4a
3240  0F83  28 1D       	jr	Z,l_player_open_door_00107
3241  0F85  DD 7E 06    	ld	a,(ix+6)
3242  0F88  D6 4B       	sub	a,0x4b
3243  0F8A  28 20       	jr	Z,l_player_open_door_00110
3244  0F8C  18 26       	jr	l_player_open_door_00113
3245  0F8E              l_player_open_door_00101:
3246  0F8E  3A 00 00    	ld	a,(_player_keys)
3247  0F91  B7          	or	a, a
3248  0F92  28 20       	jr	Z,l_player_open_door_00113
3249  0F94  0E 01       	ld	c,0x01
3250  0F96  18 1C       	jr	l_player_open_door_00113
3251  0F98              l_player_open_door_00104:
3252  0F98  3A 01 00    	ld	a,(_player_keys + 0x0001)
3253  0F9B  B7          	or	a, a
3254  0F9C  28 16       	jr	Z,l_player_open_door_00113
3255  0F9E  0E 01       	ld	c,0x01
3256  0FA0  18 12       	jr	l_player_open_door_00113
3257  0FA2              l_player_open_door_00107:
3258  0FA2  3A 02 00    	ld	a,(_player_keys + 0x0002)
3259  0FA5  B7          	or	a, a
3260  0FA6  28 0C       	jr	Z,l_player_open_door_00113
3261  0FA8  0E 01       	ld	c,0x01
3262  0FAA  18 08       	jr	l_player_open_door_00113
3263  0FAC              l_player_open_door_00110:
3264  0FAC  3A 03 00    	ld	a,(_player_keys + 0x0003)
3265  0FAF  B7          	or	a, a
3266  0FB0  28 02       	jr	Z,l_player_open_door_00113
3267  0FB2  0E 01       	ld	c,0x01
3268  0FB4              l_player_open_door_00113:
3269  0FB4  79          	ld	a, c
3270  0FB5  B7          	or	a, a
3271  0FB6  20 06       	jr	NZ,l_player_open_door_00114
3272  0FB8  3A 00 00    	ld	a,(_game_inmune)
3273  0FBB  B7          	or	a, a
3274  0FBC  28 23       	jr	Z,l_player_open_door_00115
3275  0FBE              l_player_open_door_00114:
3276  0FBE  CD 00 00    	call	_audio_puerta
3277  0FC1  3E 00       	ld	a, +((_scr_map) & 0xFF)
3278  0FC3  DD 86 04    	add	a,(ix+4)
3279  0FC6  4F          	ld	c, a
3280  0FC7  3E 00       	ld	a, +((_scr_map) / 256)
3281  0FC9  DD 8E 05    	adc	a,(ix+5)
3282  0FCC  47          	ld	b, a
3283  0FCD  AF          	xor	a, a
3284  0FCE  02          	ld	(bc), a
3285  0FCF  DD 6E 04    	ld	l,(ix+4)
3286  0FD2  DD 66 05    	ld	h,(ix+5)
3287  0FD5  CD 00 00    	call	_game_obj_set
3288  0FD8  21 04 00    	ld	hl,0x0004
3289  0FDB  39          	add	hl, sp
3290  0FDC  CD 00 00    	call	_spr_draw_index
3291  0FDF  18 03       	jr	l_player_open_door_00118
3292  0FE1              l_player_open_door_00115:
3293  0FE1  CD 00 00    	call	_audio_sin_mana
3294  0FE4              l_player_open_door_00118:
3295  0FE4  DD E1       	pop	ix
3296  0FE6  C9          	ret
3297  0FE7              	SECTION code_compiler
3298  0FE7              ;	---------------------------------
3299  0FE7              ; Function player_lost_life
3300  0FE7              ; ---------------------------------
3301  0FE7              _player_lost_life:
3302  0FE7  CD 00 00    	call	___sdcc_enter_ix
3303  0FEA  3B          	dec	sp
3304  0FEB  21 00 00    	ld	hl,_player_vita
3305  0FEE  36 00       	ld	(hl),0x00
3306  0FF0  CD 00 00    	call	_game_update_stats
3307  0FF3  3A 07 00    	ld	a,(_lin + 0x0007)
3308  0FF6  32 00 00    	ld	(_s_lin0),a
3309  0FF9  3A 07 00    	ld	a,(_col + 0x0007)
3310  0FFC  32 00 00    	ld	(_s_col0),a
3311  0FFF  CD 00 00    	call	_spr_init_effects
3312  1002  06 00       	ld	b,0x00
3313  1004              l_player_lost_life_00117:
3314  1004  C5          	push	bc
3315  1005  21 00 00    	ld	hl,0x0000
3316  1008  E5          	push	hl
3317  1009  AF          	xor	a, a
3318  100A  48          	ld	c,b
3319  100B  47          	ld	b,a
3320  100C  C5          	push	bc
3321  100D  CD 00 00    	call	_NIRVANAP_spriteT_callee
3322  1010  C1          	pop	bc
3323  1011  04          	inc	b
3324  1012  3E 07       	ld	a,0x07
3325  1014  90          	sub	a, b
3326  1015  30 ED       	jr	NC,l_player_lost_life_00117
3327  1017  CD 00 00    	call	_ay_reset
3328  101A  CD 00 00    	call	_audio_explosion
3329  101D  3A 00 00    	ld	a,(_s_lin0)
3330  1020  C6 F0       	add	a,0xf0
3331  1022  47          	ld	b, a
3332  1023  3A 00 00    	ld	a,(_s_col0)
3333  1026  21 00 00    	ld	hl,0x0000
3334  1029  E5          	push	hl
3335  102A  21 87 03    	ld	hl,0x0387
3336  102D  E5          	push	hl
3337  102E  48          	ld	c,b
3338  102F  47          	ld	b,a
3339  1030  C5          	push	bc
3340  1031  CD 00 00    	call	_spr_add_anim
3341  1034  F1          	pop	af
3342  1035  F1          	pop	af
3343  1036  F1          	pop	af
3344  1037  21 00 00    	ld	hl,_s_col0
3345  103A  46          	ld	b, (hl)
3346  103B  05          	dec	b
3347  103C  05          	dec	b
3348  103D  3A 00 00    	ld	a,(_s_lin0)
3349  1040  21 00 00    	ld	hl,0x0000
3350  1043  E5          	push	hl
3351  1044  21 87 03    	ld	hl,0x0387
3352  1047  E5          	push	hl
3353  1048  4F          	ld	c,a
3354  1049  C5          	push	bc
3355  104A  CD 00 00    	call	_spr_add_anim
3356  104D  F1          	pop	af
3357  104E  F1          	pop	af
3358  104F  21 00 00    	ld	hl,0x0000
3359  1052  E3          	ex	(sp),hl
3360  1053  3A 00 00    	ld	a,(_s_col0)
3361  1056  21 87 03    	ld	hl,0x0387
3362  1059  E5          	push	hl
3363  105A  2A 00 00    	ld	hl,(_s_lin0)
3364  105D  67          	ld	h,a
3365  105E  E5          	push	hl
3366  105F  CD 00 00    	call	_spr_add_anim
3367  1062  F1          	pop	af
3368  1063  F1          	pop	af
3369  1064  F1          	pop	af
3370  1065  21 00 00    	ld	hl,_s_col0
3371  1068  46          	ld	b, (hl)
3372  1069  04          	inc	b
3373  106A  04          	inc	b
3374  106B  3A 00 00    	ld	a,(_s_lin0)
3375  106E  21 00 00    	ld	hl,0x0000
3376  1071  E5          	push	hl
3377  1072  21 87 03    	ld	hl,0x0387
3378  1075  E5          	push	hl
3379  1076  4F          	ld	c,a
3380  1077  C5          	push	bc
3381  1078  CD 00 00    	call	_spr_add_anim
3382  107B  F1          	pop	af
3383  107C  F1          	pop	af
3384  107D  F1          	pop	af
3385  107E  3A 00 00    	ld	a,(_s_lin0)
3386  1081  C6 10       	add	a,0x10
3387  1083  47          	ld	b, a
3388  1084  3A 00 00    	ld	a,(_s_col0)
3389  1087  21 00 00    	ld	hl,0x0000
3390  108A  E5          	push	hl
3391  108B  21 87 03    	ld	hl,0x0387
3392  108E  E5          	push	hl
3393  108F  48          	ld	c,b
3394  1090  47          	ld	b,a
3395  1091  C5          	push	bc
3396  1092  CD 00 00    	call	_spr_add_anim
3397  1095  F1          	pop	af
3398  1096  F1          	pop	af
3399  1097  F1          	pop	af
3400  1098  DD 36 FF 01 	ld	(ix-1),0x01
3401  109C  2A 00 00    	ld	hl,(_curr_time)
3402  109F  22 00 00    	ld	(_anim_time),hl
3403  10A2              l_player_lost_life_00107:
3404  10A2  DD 7E FF    	ld	a,(ix-1)
3405  10A5  B7          	or	a, a
3406  10A6  28 28       	jr	Z,l_player_lost_life_00109
3407  10A8  3E 0C       	ld	a,0x0c
3408  10AA  F5          	push	af
3409  10AB  33          	inc	sp
3410  10AC  21 00 00    	ld	hl,_anim_time
3411  10AF  E5          	push	hl
3412  10B0  CD 00 00    	call	_game_check_time
3413  10B3  F1          	pop	af
3414  10B4  33          	inc	sp
3415  10B5  7D          	ld	a, l
3416  10B6  B7          	or	a, a
3417  10B7  28 E9       	jr	Z,l_player_lost_life_00107
3418  10B9  2A 00 00    	ld	hl,(_curr_time)
3419  10BC  22 00 00    	ld	(_anim_time),hl
3420  10BF  3A 00 00    	ld	a,(_anim_count)
3421  10C2  B7          	or	a,a
3422  10C3  28 05       	jr	Z,l_player_lost_life_00103
3423  10C5  CD 00 00    	call	_spr_play_anim
3424  10C8  18 D8       	jr	l_player_lost_life_00107
3425  10CA              l_player_lost_life_00103:
3426  10CA  DD 36 FF 00 	ld	(ix-1),0x00
3427  10CE  18 D2       	jr	l_player_lost_life_00107
3428  10D0              l_player_lost_life_00109:
3429  10D0  CD 00 00    	call	_audio_lotr_lose_a_life
3430  10D3  3A 00 00    	ld	a,(_game_boss)
3431  10D6  B7          	or	a, a
3432  10D7  28 0F       	jr	Z,l_player_lost_life_00111
3433  10D9  3A 00 00    	ld	a,(_boss_lin)
3434  10DC  32 00 00    	ld	(_s_lin1),a
3435  10DF  3A 00 00    	ld	a,(_boss_col)
3436  10E2  32 00 00    	ld	(_s_col1),a
3437  10E5  CD 00 00    	call	_boss_draw
3438  10E8              l_player_lost_life_00111:
3439  10E8  3A 00 00    	ld	a,(_game_inf_lives)
3440  10EB  B7          	or	a, a
3441  10EC  20 04       	jr	NZ,l_player_lost_life_00113
3442  10EE  21 00 00    	ld	hl,_player_lives
3443  10F1  35          	dec	(hl)
3444  10F2              l_player_lost_life_00113:
3445  10F2  21 00 00    	ld	hl,_player_mana
3446  10F5  36 64       	ld	(hl),0x64
3447  10F7  21 00 00    	ld	hl,_player_vita
3448  10FA  36 64       	ld	(hl),0x64
3449  10FC  3A 00 00    	ld	a,(_player_lives)
3450  10FF  B7          	or	a, a
3451  1100  28 1D       	jr	Z,l_player_lost_life_00115
3452  1102  21 F4 01    	ld	hl,0x01f4
3453  1105  CD 00 00    	call	_z80_delay_ms_fastcall
3454  1108  3A 00 00    	ld	a,(_game_checkpoint_col)
3455  110B  32 00 00    	ld	(_player_col_scr),a
3456  110E  3A 00 00    	ld	a,(_game_checkpoint_lin)
3457  1111  32 00 00    	ld	(_player_lin_scr),a
3458  1114  3A 00 00    	ld	a,(_game_checkpoint_scr)
3459  1117  32 00 00    	ld	(_scr_curr),a
3460  111A  CD 00 00    	call	_game_round_init
3461  111D  18 0A       	jr	l_player_lost_life_00119
3462  111F              l_player_lost_life_00115:
3463  111F  21 00 00    	ld	hl,_player_lives
3464  1122  36 00       	ld	(hl),0x00
3465  1124  21 00 00    	ld	hl,_game_over
3466  1127  36 01       	ld	(hl),0x01
3467  1129              l_player_lost_life_00119:
3468  1129  33          	inc	sp
3469  112A  DD E1       	pop	ix
3470  112C  C9          	ret
3471  112D              	SECTION code_compiler
3472  112D              ;	---------------------------------
3473  112D              ; Function player_damage
3474  112D              ; ---------------------------------
3475  112D              _player_damage:
3476  112D  7D          	ld	a,l
3477  112E  4D          	ld	c,l
3478  112F  21 00 00    	ld	hl,_player_vita
3479  1132  96          	sub	a, (hl)
3480  1133  30 1A       	jr	NC,l_player_damage_00104
3481  1135  3A 00 00    	ld	a,(_game_inmune)
3482  1138  B7          	or	a, a
3483  1139  20 06       	jr	NZ,l_player_damage_00102
3484  113B  21 00 00    	ld	hl,_player_vita
3485  113E  7E          	ld	a, (hl)
3486  113F  91          	sub	a, c
3487  1140  77          	ld	(hl), a
3488  1141              l_player_damage_00102:
3489  1141  2A 00 00    	ld	hl,(_curr_time)
3490  1144  22 00 00    	ld	(_player_hit_time),hl
3491  1147  CD 00 00    	call	_audio_golpe
3492  114A  CD 00 00    	call	_game_update_stats
3493  114D  18 03       	jr	l_player_damage_00106
3494  114F              l_player_damage_00104:
3495  114F  CD E7 0F    	call	_player_lost_life
3496  1152              l_player_damage_00106:
3497  1152  C9          	ret
3498  1153              	SECTION IGNORE
3499  0000              
