1     0000              MODULE game_player_c
2     0000              
3     0000              ;--------------------------------------------------------
4     0000              ; File Created by SDCC : free open source ANSI-C Compiler
5     0000              ; Version 3.6.5 #9958 (Mac OS X i386)
6     0000              ;--------------------------------------------------------
7     0000              ; Processed by Z88DK
8     0000              ;--------------------------------------------------------
9     0000              
10    0000              	EXTERN __divschar
11    0000              	EXTERN __divschar_callee
12    0000              	EXTERN __divsint
13    0000              	EXTERN __divsint_callee
14    0000              	EXTERN __divslong
15    0000              	EXTERN __divslong_callee
16    0000              	EXTERN __divslonglong
17    0000              	EXTERN __divslonglong_callee
18    0000              	EXTERN __divsuchar
19    0000              	EXTERN __divsuchar_callee
20    0000              	EXTERN __divuchar
21    0000              	EXTERN __divuchar_callee
22    0000              	EXTERN __divuint
23    0000              	EXTERN __divuint_callee
24    0000              	EXTERN __divulong
25    0000              	EXTERN __divulong_callee
26    0000              	EXTERN __divulonglong
27    0000              	EXTERN __divulonglong_callee
28    0000              	EXTERN __divuschar
29    0000              	EXTERN __divuschar_callee
30    0000              	EXTERN __modschar
31    0000              	EXTERN __modschar_callee
32    0000              	EXTERN __modsint
33    0000              	EXTERN __modsint_callee
34    0000              	EXTERN __modslong
35    0000              	EXTERN __modslong_callee
36    0000              	EXTERN __modslonglong
37    0000              	EXTERN __modslonglong_callee
38    0000              	EXTERN __modsuchar
39    0000              	EXTERN __modsuchar_callee
40    0000              	EXTERN __moduchar
41    0000              	EXTERN __moduchar_callee
42    0000              	EXTERN __moduint
43    0000              	EXTERN __moduint_callee
44    0000              	EXTERN __modulong
45    0000              	EXTERN __modulong_callee
46    0000              	EXTERN __modulonglong
47    0000              	EXTERN __modulonglong_callee
48    0000              	EXTERN __moduschar
49    0000              	EXTERN __moduschar_callee
50    0000              	EXTERN __mulint
51    0000              	EXTERN __mulint_callee
52    0000              	EXTERN __mullong
53    0000              	EXTERN __mullong_callee
54    0000              	EXTERN __mullonglong
55    0000              	EXTERN __mullonglong_callee
56    0000              	EXTERN __mulschar
57    0000              	EXTERN __mulschar_callee
58    0000              	EXTERN __mulsuchar
59    0000              	EXTERN __mulsuchar_callee
60    0000              	EXTERN __muluschar
61    0000              	EXTERN __muluschar_callee
62    0000              	EXTERN __rlslonglong
63    0000              	EXTERN __rlslonglong_callee
64    0000              	EXTERN __rlulonglong
65    0000              	EXTERN __rlulonglong_callee
66    0000              	EXTERN __rrslonglong
67    0000              	EXTERN __rrslonglong_callee
68    0000              	EXTERN __rrulonglong
69    0000              	EXTERN __rrulonglong_callee
70    0000              	EXTERN ___sdcc_call_hl
71    0000              	EXTERN ___sdcc_call_iy
72    0000              	EXTERN ___sdcc_enter_ix
73    0000              	EXTERN _banked_call
74    0000              	EXTERN _banked_ret
75    0000              	EXTERN ___fs2schar
76    0000              	EXTERN ___fs2schar_callee
77    0000              	EXTERN ___fs2sint
78    0000              	EXTERN ___fs2sint_callee
79    0000              	EXTERN ___fs2slong
80    0000              	EXTERN ___fs2slong_callee
81    0000              	EXTERN ___fs2slonglong
82    0000              	EXTERN ___fs2slonglong_callee
83    0000              	EXTERN ___fs2uchar
84    0000              	EXTERN ___fs2uchar_callee
85    0000              	EXTERN ___fs2uint
86    0000              	EXTERN ___fs2uint_callee
87    0000              	EXTERN ___fs2ulong
88    0000              	EXTERN ___fs2ulong_callee
89    0000              	EXTERN ___fs2ulonglong
90    0000              	EXTERN ___fs2ulonglong_callee
91    0000              	EXTERN ___fsadd
92    0000              	EXTERN ___fsadd_callee
93    0000              	EXTERN ___fsdiv
94    0000              	EXTERN ___fsdiv_callee
95    0000              	EXTERN ___fseq
96    0000              	EXTERN ___fseq_callee
97    0000              	EXTERN ___fsgt
98    0000              	EXTERN ___fsgt_callee
99    0000              	EXTERN ___fslt
100   0000              	EXTERN ___fslt_callee
101   0000              	EXTERN ___fsmul
102   0000              	EXTERN ___fsmul_callee
103   0000              	EXTERN ___fsneq
104   0000              	EXTERN ___fsneq_callee
105   0000              	EXTERN ___fssub
106   0000              	EXTERN ___fssub_callee
107   0000              	EXTERN ___schar2fs
108   0000              	EXTERN ___schar2fs_callee
109   0000              	EXTERN ___sint2fs
110   0000              	EXTERN ___sint2fs_callee
111   0000              	EXTERN ___slong2fs
112   0000              	EXTERN ___slong2fs_callee
113   0000              	EXTERN ___slonglong2fs
114   0000              	EXTERN ___slonglong2fs_callee
115   0000              	EXTERN ___uchar2fs
116   0000              	EXTERN ___uchar2fs_callee
117   0000              	EXTERN ___uint2fs
118   0000              	EXTERN ___uint2fs_callee
119   0000              	EXTERN ___ulong2fs
120   0000              	EXTERN ___ulong2fs_callee
121   0000              	EXTERN ___ulonglong2fs
122   0000              	EXTERN ___ulonglong2fs_callee
123   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
126   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
127   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
128   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
129   0000              	EXTERN ____sdcc_4_ldi_save_bc
130   0000              	EXTERN ____sdcc_4_push_hlix
131   0000              	EXTERN ____sdcc_4_push_mhl
132   0000              	EXTERN ____sdcc_lib_setmem_hl
133   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
134   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
135   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
136   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
137   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
138   0000              	EXTERN ____sdcc_ll_add_deix_hlix
139   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
140   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
141   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
142   0000              	EXTERN ____sdcc_ll_asr_hlix_a
143   0000              	EXTERN ____sdcc_ll_asr_mbc_a
144   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
145   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
146   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
147   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
148   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
149   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
150   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
151   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
152   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
153   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
155   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
156   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
157   0000              	EXTERN ____sdcc_ll_push_hlix
158   0000              	EXTERN ____sdcc_ll_push_mhl
159   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
160   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
161   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
162   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
163   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
164   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
165   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
166   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
167   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
168   0000              	EXTERN ____sdcc_load_debc_deix
169   0000              	EXTERN ____sdcc_load_dehl_deix
170   0000              	EXTERN ____sdcc_load_debc_mhl
171   0000              	EXTERN ____sdcc_load_hlde_mhl
172   0000              	EXTERN ____sdcc_store_dehl_bcix
173   0000              	EXTERN ____sdcc_store_debc_hlix
174   0000              	EXTERN ____sdcc_store_debc_mhl
175   0000              	EXTERN ____sdcc_cpu_pop_ei
176   0000              	EXTERN ____sdcc_cpu_pop_ei_jp
177   0000              	EXTERN ____sdcc_cpu_push_di
178   0000              	EXTERN ____sdcc_outi
179   0000              	EXTERN ____sdcc_outi_128
180   0000              	EXTERN ____sdcc_outi_256
181   0000              	EXTERN ____sdcc_ldi
182   0000              	EXTERN ____sdcc_ldi_128
183   0000              	EXTERN ____sdcc_ldi_256
184   0000              
185   0000              ;--------------------------------------------------------
186   0000              ; Public variables in this module
187   0000              ;--------------------------------------------------------
188   0000              	GLOBAL _player_check_map
189   0000              	GLOBAL _player_1up
190   0000              	GLOBAL _player_fix_walk_lin
191   0000              	GLOBAL _player_init
192   0000              	GLOBAL _player_turn
193   0000              	GLOBAL _player_move
194   0000              	GLOBAL _player_check_input
195   0000              	GLOBAL _player_move_input
196   0000              	GLOBAL _player_fire
197   0000              	GLOBAL _player_collision
198   0000              	GLOBAL _player_kill
199   0000              	GLOBAL _player_check_stairs_vertical
200   0000              	GLOBAL _player_check_stairs
201   0000              	GLOBAL _player_tile
202   0000              	GLOBAL _player_pick_item
203   0000              	GLOBAL _player_hit_platform
204   0000              	GLOBAL _player_hit_platform_clear
205   0000              	GLOBAL _player_score_add
206   0000              	GLOBAL _player_check_floor
207   0000              	GLOBAL _player_gasta_brick
208   0000              	GLOBAL _player_move_jump
209   0000              	GLOBAL _player_open_door
210   0000              	GLOBAL _player_lost_life
211   0000              	GLOBAL _player_hit
212   0000              ;--------------------------------------------------------
213   0000              ; Externals used
214   0000              ;--------------------------------------------------------
215   0000              	GLOBAL _ulltoa_callee
216   0000              	GLOBAL _ulltoa
217   0000              	GLOBAL _strtoull_callee
218   0000              	GLOBAL _strtoull
219   0000              	GLOBAL _strtoll_callee
220   0000              	GLOBAL _strtoll
221   0000              	GLOBAL _lltoa_callee
222   0000              	GLOBAL _lltoa
223   0000              	GLOBAL _llabs_callee
224   0000              	GLOBAL _llabs
225   0000              	GLOBAL __lldivu__callee
226   0000              	GLOBAL __lldivu_
227   0000              	GLOBAL __lldiv__callee
228   0000              	GLOBAL __lldiv_
229   0000              	GLOBAL _atoll_callee
230   0000              	GLOBAL _atoll
231   0000              	GLOBAL _realloc_unlocked_callee
232   0000              	GLOBAL _realloc_unlocked
233   0000              	GLOBAL _malloc_unlocked_fastcall
234   0000              	GLOBAL _malloc_unlocked
235   0000              	GLOBAL _free_unlocked_fastcall
236   0000              	GLOBAL _free_unlocked
237   0000              	GLOBAL _calloc_unlocked_callee
238   0000              	GLOBAL _calloc_unlocked
239   0000              	GLOBAL _aligned_alloc_unlocked_callee
240   0000              	GLOBAL _aligned_alloc_unlocked
241   0000              	GLOBAL _realloc_callee
242   0000              	GLOBAL _realloc
243   0000              	GLOBAL _malloc_fastcall
244   0000              	GLOBAL _malloc
245   0000              	GLOBAL _free_fastcall
246   0000              	GLOBAL _free
247   0000              	GLOBAL _calloc_callee
248   0000              	GLOBAL _calloc
249   0000              	GLOBAL _aligned_alloc_callee
250   0000              	GLOBAL _aligned_alloc
251   0000              	GLOBAL _utoa_callee
252   0000              	GLOBAL _utoa
253   0000              	GLOBAL _ultoa_callee
254   0000              	GLOBAL _ultoa
255   0000              	GLOBAL _system_fastcall
256   0000              	GLOBAL _system
257   0000              	GLOBAL _strtoul_callee
258   0000              	GLOBAL _strtoul
259   0000              	GLOBAL _strtol_callee
260   0000              	GLOBAL _strtol
261   0000              	GLOBAL _strtof_callee
262   0000              	GLOBAL _strtof
263   0000              	GLOBAL _strtod_callee
264   0000              	GLOBAL _strtod
265   0000              	GLOBAL _srand_fastcall
266   0000              	GLOBAL _srand
267   0000              	GLOBAL _rand
268   0000              	GLOBAL _quick_exit_fastcall
269   0000              	GLOBAL _quick_exit
270   0000              	GLOBAL _qsort_callee
271   0000              	GLOBAL _qsort
272   0000              	GLOBAL _ltoa_callee
273   0000              	GLOBAL _ltoa
274   0000              	GLOBAL _labs_fastcall
275   0000              	GLOBAL _labs
276   0000              	GLOBAL _itoa_callee
277   0000              	GLOBAL _itoa
278   0000              	GLOBAL _ftoh_callee
279   0000              	GLOBAL _ftoh
280   0000              	GLOBAL _ftog_callee
281   0000              	GLOBAL _ftog
282   0000              	GLOBAL _ftoe_callee
283   0000              	GLOBAL _ftoe
284   0000              	GLOBAL _ftoa_callee
285   0000              	GLOBAL _ftoa
286   0000              	GLOBAL _exit_fastcall
287   0000              	GLOBAL _exit
288   0000              	GLOBAL _dtoh_callee
289   0000              	GLOBAL _dtoh
290   0000              	GLOBAL _dtog_callee
291   0000              	GLOBAL _dtog
292   0000              	GLOBAL _dtoe_callee
293   0000              	GLOBAL _dtoe
294   0000              	GLOBAL _dtoa_callee
295   0000              	GLOBAL _dtoa
296   0000              	GLOBAL _bsearch_callee
297   0000              	GLOBAL _bsearch
298   0000              	GLOBAL _atol_fastcall
299   0000              	GLOBAL _atol
300   0000              	GLOBAL _atoi_fastcall
301   0000              	GLOBAL _atoi
302   0000              	GLOBAL _atof_fastcall
303   0000              	GLOBAL _atof
304   0000              	GLOBAL _atexit_fastcall
305   0000              	GLOBAL _atexit
306   0000              	GLOBAL _at_quick_exit_fastcall
307   0000              	GLOBAL _at_quick_exit
308   0000              	GLOBAL _abs_fastcall
309   0000              	GLOBAL _abs
310   0000              	GLOBAL _abort
311   0000              	GLOBAL __strtou__callee
312   0000              	GLOBAL __strtou_
313   0000              	GLOBAL __strtoi__callee
314   0000              	GLOBAL __strtoi_
315   0000              	GLOBAL __random_uniform_xor_8__fastcall
316   0000              	GLOBAL __random_uniform_xor_8_
317   0000              	GLOBAL __random_uniform_xor_32__fastcall
318   0000              	GLOBAL __random_uniform_xor_32_
319   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
320   0000              	GLOBAL __random_uniform_cmwc_8_
321   0000              	GLOBAL __shellsort__callee
322   0000              	GLOBAL __shellsort_
323   0000              	GLOBAL __quicksort__callee
324   0000              	GLOBAL __quicksort_
325   0000              	GLOBAL __insertion_sort__callee
326   0000              	GLOBAL __insertion_sort_
327   0000              	GLOBAL __ldivu__callee
328   0000              	GLOBAL __ldivu_
329   0000              	GLOBAL __ldiv__callee
330   0000              	GLOBAL __ldiv_
331   0000              	GLOBAL __divu__callee
332   0000              	GLOBAL __divu_
333   0000              	GLOBAL __div__callee
334   0000              	GLOBAL __div_
335   0000              	GLOBAL _NIRVANAP_drawTW_raw_callee
336   0000              	GLOBAL _NIRVANAP_drawTW_raw
337   0000              	GLOBAL _NIRVANAP_drawTW_callee
338   0000              	GLOBAL _NIRVANAP_drawTW
339   0000              	GLOBAL _NIRVANAP_drawW_raw_callee
340   0000              	GLOBAL _NIRVANAP_drawW_raw
341   0000              	GLOBAL _NIRVANAP_drawW_callee
342   0000              	GLOBAL _NIRVANAP_drawW
343   0000              	GLOBAL _NIRVANAP_spriteT_callee
344   0000              	GLOBAL _NIRVANAP_spriteT
345   0000              	GLOBAL _NIRVANAP_fillC_callee
346   0000              	GLOBAL _NIRVANAP_fillC
347   0000              	GLOBAL _NIRVANAP_readC_callee
348   0000              	GLOBAL _NIRVANAP_readC
349   0000              	GLOBAL _NIRVANAP_paintC_callee
350   0000              	GLOBAL _NIRVANAP_paintC
351   0000              	GLOBAL _NIRVANAP_printC_callee
352   0000              	GLOBAL _NIRVANAP_printC
353   0000              	GLOBAL _NIRVANAP_fillT_raw_callee
354   0000              	GLOBAL _NIRVANAP_fillT_raw
355   0000              	GLOBAL _NIRVANAP_fillT_callee
356   0000              	GLOBAL _NIRVANAP_fillT
357   0000              	GLOBAL _NIRVANAP_drawT_raw_callee
358   0000              	GLOBAL _NIRVANAP_drawT_raw
359   0000              	GLOBAL _NIRVANAP_drawT_callee
360   0000              	GLOBAL _NIRVANAP_drawT
361   0000              	GLOBAL _NIRVANAP_stop
362   0000              	GLOBAL _NIRVANAP_start
363   0000              	GLOBAL _debug3
364   0000              	GLOBAL _debug2
365   0000              	GLOBAL _debug
366   0000              	GLOBAL _zx_print_str
367   0000              	GLOBAL _zx_print_int
368   0000              	GLOBAL _zx_print_chr
369   0000              	GLOBAL _zx_print_bonus_time
370   0000              	GLOBAL _zx_isr
371   0000              	GLOBAL _z80_otdr_callee
372   0000              	GLOBAL _z80_otdr
373   0000              	GLOBAL _z80_otir_callee
374   0000              	GLOBAL _z80_otir
375   0000              	GLOBAL _z80_outp_callee
376   0000              	GLOBAL _z80_outp
377   0000              	GLOBAL _z80_indr_callee
378   0000              	GLOBAL _z80_indr
379   0000              	GLOBAL _z80_inir_callee
380   0000              	GLOBAL _z80_inir
381   0000              	GLOBAL _z80_inp_fastcall
382   0000              	GLOBAL _z80_inp
383   0000              	GLOBAL _z80_set_int_state_fastcall
384   0000              	GLOBAL _z80_set_int_state
385   0000              	GLOBAL _z80_get_int_state
386   0000              	GLOBAL _z80_delay_tstate_fastcall
387   0000              	GLOBAL _z80_delay_tstate
388   0000              	GLOBAL _z80_delay_ms_fastcall
389   0000              	GLOBAL _z80_delay_ms
390   0000              	GLOBAL _im2_remove_generic_callback_callee
391   0000              	GLOBAL _im2_remove_generic_callback
392   0000              	GLOBAL _im2_prepend_generic_callback_callee
393   0000              	GLOBAL _im2_prepend_generic_callback
394   0000              	GLOBAL _im2_append_generic_callback_callee
395   0000              	GLOBAL _im2_append_generic_callback
396   0000              	GLOBAL _im2_create_generic_isr_8080_callee
397   0000              	GLOBAL _im2_create_generic_isr_8080
398   0000              	GLOBAL _im2_create_generic_isr_callee
399   0000              	GLOBAL _im2_create_generic_isr
400   0000              	GLOBAL _im2_install_isr_callee
401   0000              	GLOBAL _im2_install_isr
402   0000              	GLOBAL _im2_init_fastcall
403   0000              	GLOBAL _im2_init
404   0000              	GLOBAL _intrinsic_swap_word_32_fastcall
405   0000              	GLOBAL _intrinsic_swap_word_32
406   0000              	GLOBAL _intrinsic_swap_endian_32_fastcall
407   0000              	GLOBAL _intrinsic_swap_endian_32
408   0000              	GLOBAL _intrinsic_swap_endian_16_fastcall
409   0000              	GLOBAL _intrinsic_swap_endian_16
410   0000              	GLOBAL _intrinsic_return_de
411   0000              	GLOBAL _intrinsic_return_bc
412   0000              	GLOBAL _intrinsic_exx
413   0000              	GLOBAL _intrinsic_ex_de_hl
414   0000              	GLOBAL _intrinsic_nop
415   0000              	GLOBAL _intrinsic_im_2
416   0000              	GLOBAL _intrinsic_im_1
417   0000              	GLOBAL _intrinsic_im_0
418   0000              	GLOBAL _intrinsic_retn
419   0000              	GLOBAL _intrinsic_reti
420   0000              	GLOBAL _intrinsic_halt
421   0000              	GLOBAL _intrinsic_ei
422   0000              	GLOBAL _intrinsic_di
423   0000              	GLOBAL _intrinsic_stub
424   0000              	GLOBAL _intrinsic_outi
425   0000              	GLOBAL _intrinsic_ldi
426   0000              	GLOBAL _zx_pattern_fill_callee
427   0000              	GLOBAL _zx_pattern_fill
428   0000              	GLOBAL _zx_saddrpup_fastcall
429   0000              	GLOBAL _zx_saddrpup
430   0000              	GLOBAL _zx_saddrpright_callee
431   0000              	GLOBAL _zx_saddrpright
432   0000              	GLOBAL _zx_saddrpleft_callee
433   0000              	GLOBAL _zx_saddrpleft
434   0000              	GLOBAL _zx_saddrpdown_fastcall
435   0000              	GLOBAL _zx_saddrpdown
436   0000              	GLOBAL _zx_saddrcup_fastcall
437   0000              	GLOBAL _zx_saddrcup
438   0000              	GLOBAL _zx_saddrcright_fastcall
439   0000              	GLOBAL _zx_saddrcright
440   0000              	GLOBAL _zx_saddrcleft_fastcall
441   0000              	GLOBAL _zx_saddrcleft
442   0000              	GLOBAL _zx_saddrcdown_fastcall
443   0000              	GLOBAL _zx_saddrcdown
444   0000              	GLOBAL _zx_saddr2py_fastcall
445   0000              	GLOBAL _zx_saddr2py
446   0000              	GLOBAL _zx_saddr2px_fastcall
447   0000              	GLOBAL _zx_saddr2px
448   0000              	GLOBAL _zx_saddr2cy_fastcall
449   0000              	GLOBAL _zx_saddr2cy
450   0000              	GLOBAL _zx_saddr2cx_fastcall
451   0000              	GLOBAL _zx_saddr2cx
452   0000              	GLOBAL _zx_saddr2aaddr_fastcall
453   0000              	GLOBAL _zx_saddr2aaddr
454   0000              	GLOBAL _zx_py2saddr_fastcall
455   0000              	GLOBAL _zx_py2saddr
456   0000              	GLOBAL _zx_py2aaddr_fastcall
457   0000              	GLOBAL _zx_py2aaddr
458   0000              	GLOBAL _zx_pxy2saddr_callee
459   0000              	GLOBAL _zx_pxy2saddr
460   0000              	GLOBAL _zx_pxy2aaddr_callee
461   0000              	GLOBAL _zx_pxy2aaddr
462   0000              	GLOBAL _zx_px2bitmask_fastcall
463   0000              	GLOBAL _zx_px2bitmask
464   0000              	GLOBAL _zx_cy2saddr_fastcall
465   0000              	GLOBAL _zx_cy2saddr
466   0000              	GLOBAL _zx_cy2aaddr_fastcall
467   0000              	GLOBAL _zx_cy2aaddr
468   0000              	GLOBAL _zx_cxy2saddr_callee
469   0000              	GLOBAL _zx_cxy2saddr
470   0000              	GLOBAL _zx_cxy2aaddr_callee
471   0000              	GLOBAL _zx_cxy2aaddr
472   0000              	GLOBAL _zx_bitmask2px_fastcall
473   0000              	GLOBAL _zx_bitmask2px
474   0000              	GLOBAL _zx_aaddrcup_fastcall
475   0000              	GLOBAL _zx_aaddrcup
476   0000              	GLOBAL _zx_aaddrcright_fastcall
477   0000              	GLOBAL _zx_aaddrcright
478   0000              	GLOBAL _zx_aaddrcleft_fastcall
479   0000              	GLOBAL _zx_aaddrcleft
480   0000              	GLOBAL _zx_aaddrcdown_fastcall
481   0000              	GLOBAL _zx_aaddrcdown
482   0000              	GLOBAL _zx_aaddr2saddr_fastcall
483   0000              	GLOBAL _zx_aaddr2saddr
484   0000              	GLOBAL _zx_aaddr2py_fastcall
485   0000              	GLOBAL _zx_aaddr2py
486   0000              	GLOBAL _zx_aaddr2px_fastcall
487   0000              	GLOBAL _zx_aaddr2px
488   0000              	GLOBAL _zx_aaddr2cy_fastcall
489   0000              	GLOBAL _zx_aaddr2cy
490   0000              	GLOBAL _zx_aaddr2cx_fastcall
491   0000              	GLOBAL _zx_aaddr2cx
492   0000              	GLOBAL _zx_visit_wc_pix_callee
493   0000              	GLOBAL _zx_visit_wc_pix
494   0000              	GLOBAL _zx_visit_wc_attr_callee
495   0000              	GLOBAL _zx_visit_wc_attr
496   0000              	GLOBAL _zx_scroll_wc_up_pix_callee
497   0000              	GLOBAL _zx_scroll_wc_up_pix
498   0000              	GLOBAL _zx_scroll_wc_up_attr_callee
499   0000              	GLOBAL _zx_scroll_wc_up_attr
500   0000              	GLOBAL _zx_scroll_wc_up_callee
501   0000              	GLOBAL _zx_scroll_wc_up
502   0000              	GLOBAL _zx_scroll_up_pix_callee
503   0000              	GLOBAL _zx_scroll_up_pix
504   0000              	GLOBAL _zx_scroll_up_attr_callee
505   0000              	GLOBAL _zx_scroll_up_attr
506   0000              	GLOBAL _zx_scroll_up_callee
507   0000              	GLOBAL _zx_scroll_up
508   0000              	GLOBAL _zx_cls_wc_pix_callee
509   0000              	GLOBAL _zx_cls_wc_pix
510   0000              	GLOBAL _zx_cls_wc_attr_callee
511   0000              	GLOBAL _zx_cls_wc_attr
512   0000              	GLOBAL _zx_cls_wc_callee
513   0000              	GLOBAL _zx_cls_wc
514   0000              	GLOBAL _zx_cls_pix_fastcall
515   0000              	GLOBAL _zx_cls_pix
516   0000              	GLOBAL _zx_cls_attr_fastcall
517   0000              	GLOBAL _zx_cls_attr
518   0000              	GLOBAL _zx_cls_fastcall
519   0000              	GLOBAL _zx_cls
520   0000              	GLOBAL _zx_border_fastcall
521   0000              	GLOBAL _zx_border
522   0000              	GLOBAL _spr_btile_paint_back
523   0000              	GLOBAL _spr_explode_bullet
524   0000              	GLOBAL _spr_init_anim_bullets
525   0000              	GLOBAL _spr_turn_horizontal
526   0000              	GLOBAL _spr_play_bullets
527   0000              	GLOBAL _spr_play_anim
528   0000              	GLOBAL _spr_add_anim
529   0000              	GLOBAL _spr_clear_scr
530   0000              	GLOBAL _spr_page_map
531   0000              	GLOBAL _spr_page_down
532   0000              	GLOBAL _spr_page_up
533   0000              	GLOBAL _spr_page_right
534   0000              	GLOBAL _spr_page_left
535   0000              	GLOBAL _spr_tile_paint
536   0000              	GLOBAL _spr_calc_hor
537   0000              	GLOBAL _spr_draw_row
538   0000              	GLOBAL _spr_draw_index
539   0000              	GLOBAL _spr_brick_anim
540   0000              	GLOBAL _spr_back_repaint
541   0000              	GLOBAL _spr_tile
542   0000              	GLOBAL _spr_destroy
543   0000              	GLOBAL _spr_tile_dir
544   0000              	GLOBAL _spr_redraw
545   0000              	GLOBAL _spr_move_left
546   0000              	GLOBAL _spr_move_right
547   0000              	GLOBAL _spr_move_horizontal
548   0000              	GLOBAL _spr_move_down
549   0000              	GLOBAL _spr_move_up
550   0000              	GLOBAL _spr_calc_index
551   0000              	GLOBAL _spr_chktime
552   0000              	GLOBAL _sound_hit_brick
553   0000              	GLOBAL _sound_hit_enemy
554   0000              	GLOBAL _sound_kill
555   0000              	GLOBAL _sound_enter_enemy
556   0000              	GLOBAL _sound_coin
557   0000              	GLOBAL _sound_jump
558   0000              	GLOBAL _sound_slide
559   0000              	GLOBAL _player_player_hit_pow
560   0000              	GLOBAL _game_match_back
561   0000              	GLOBAL _game_attribs
562   0000              	GLOBAL _game_boss_clear
563   0000              	GLOBAL _game_obj_clear
564   0000              	GLOBAL _game_obj_chk
565   0000              	GLOBAL _game_obj_set
566   0000              	GLOBAL _game_shoot_fire_boss
567   0000              	GLOBAL _game_shoot_fire
568   0000              	GLOBAL _game_add_enemy
569   0000              	GLOBAL _game_print_header
570   0000              	GLOBAL _game_phase_print_score_back
571   0000              	GLOBAL _game_check_time
572   0000              	GLOBAL _game_rotate_attrib_osd
573   0000              	GLOBAL _game_rotate_attrib
574   0000              	GLOBAL _game_colour_message
575   0000              	GLOBAL _game_paint_attrib_lin_osd
576   0000              	GLOBAL _game_paint_attrib_lin_h
577   0000              	GLOBAL _game_paint_attrib_lin
578   0000              	GLOBAL _game_paint_attrib
579   0000              	GLOBAL _game_print_score
580   0000              	GLOBAL _game_unfreeze_all
581   0000              	GLOBAL _game_freeze_all
582   0000              	GLOBAL _game_freeze
583   0000              	GLOBAL _game_enemy_add_get_index
584   0000              	GLOBAL _game_check_cell
585   0000              	GLOBAL _game_check_map
586   0000              	GLOBAL _game_loop
587   0000              	GLOBAL _game_round_init
588   0000              	GLOBAL _game_start_timer
589   0000              	GLOBAL _game_tick
590   0000              	GLOBAL _game_update_stats
591   0000              	GLOBAL _game_print_footer
592   0000              	GLOBAL _game_fill_row
593   0000              	GLOBAL _game_fps
594   0000              	GLOBAL _game_respawn
595   0000              	GLOBAL _game_draw_screen
596   0000              	GLOBAL _boss_turn
597   0000              	GLOBAL _enemy_avoid_dead
598   0000              	GLOBAL _enemy_avoid_fall
599   0000              	GLOBAL _enemy_respawn
600   0000              	GLOBAL _enemy_init
601   0000              	GLOBAL _enemy_move
602   0000              	GLOBAL _enemy_turn
603   0000              	GLOBAL _enemy_hit
604   0000              	GLOBAL _enemy_coin1
605   0000              	GLOBAL _enemy_static
606   0000              	GLOBAL _enemy_walk
607   0000              	GLOBAL _enemy_horizontal
608   0000              	GLOBAL _enemy_vertical
609   0000              	GLOBAL _ay_fx_play
610   0000              	GLOBAL _ay_midi_play
611   0000              	GLOBAL _ay_is_playing
612   0000              	GLOBAL _ay_reset
613   0000              	GLOBAL _test_func
614   0000              	GLOBAL _test_proc
615   0000              	GLOBAL _in_mouse_kempston_wheel_delta
616   0000              	GLOBAL _in_mouse_kempston_wheel
617   0000              	GLOBAL _in_mouse_kempston_callee
618   0000              	GLOBAL _in_mouse_kempston
619   0000              	GLOBAL _in_mouse_kempston_setpos_callee
620   0000              	GLOBAL _in_mouse_kempston_setpos
621   0000              	GLOBAL _in_mouse_kempston_reset
622   0000              	GLOBAL _in_mouse_kempston_init
623   0000              	GLOBAL _in_mouse_amx_wheel_delta
624   0000              	GLOBAL _in_mouse_amx_wheel
625   0000              	GLOBAL _in_mouse_amx_callee
626   0000              	GLOBAL _in_mouse_amx
627   0000              	GLOBAL _in_mouse_amx_setpos_callee
628   0000              	GLOBAL _in_mouse_amx_setpos
629   0000              	GLOBAL _in_mouse_amx_reset
630   0000              	GLOBAL _in_mouse_amx_init_callee
631   0000              	GLOBAL _in_mouse_amx_init
632   0000              	GLOBAL _in_stick_sinclair2
633   0000              	GLOBAL _in_stick_sinclair1
634   0000              	GLOBAL _in_stick_kempston
635   0000              	GLOBAL _in_stick_fuller
636   0000              	GLOBAL _in_stick_cursor
637   0000              	GLOBAL _in_stick_keyboard_fastcall
638   0000              	GLOBAL _in_stick_keyboard
639   0000              	GLOBAL _in_wait_nokey
640   0000              	GLOBAL _in_wait_key
641   0000              	GLOBAL _in_test_key
642   0000              	GLOBAL _in_pause_fastcall
643   0000              	GLOBAL _in_pause
644   0000              	GLOBAL _in_key_scancode_fastcall
645   0000              	GLOBAL _in_key_scancode
646   0000              	GLOBAL _in_key_pressed_fastcall
647   0000              	GLOBAL _in_key_pressed
648   0000              	GLOBAL _in_inkey
649   0000              	GLOBAL _NIRVANAP_CHAR_TABLE
650   0000              	GLOBAL _NIRVANAP_WIDE_IMAGES
651   0000              	GLOBAL _NIRVANAP_TILE_IMAGES
652   0000              	GLOBAL _NIRVANAP_HOLE
653   0000              	GLOBAL _NIRVANAP_ISR_HOOK
654   0000              	GLOBAL _player_lvl_table
655   0000              	GLOBAL _map_paper_last
656   0000              	GLOBAL _map_paper_clr
657   0000              	GLOBAL _map_paper
658   0000              	GLOBAL _draw_count
659   0000              	GLOBAL _g_player_hit_right
660   0000              	GLOBAL _g_player_hit_left
661   0000              	GLOBAL _joynames
662   0000              	GLOBAL _initials
663   0000              	GLOBAL _bullet_count
664   0000              	GLOBAL _spr_hack
665   0000              	GLOBAL _boss_stat
666   0000              	GLOBAL _boss_time_fire
667   0000              	GLOBAL _boss_time
668   0000              	GLOBAL _boss_tile
669   0000              	GLOBAL _boss_inc
670   0000              	GLOBAL _boss_col
671   0000              	GLOBAL _boss_lin
672   0000              	GLOBAL _bullet_vel
673   0000              	GLOBAL _bullet_frames
674   0000              	GLOBAL _bullet_colint
675   0000              	GLOBAL _bullet_dir
676   0000              	GLOBAL _bullet_tile
677   0000              	GLOBAL _bullet_col
678   0000              	GLOBAL _bullet_lin
679   0000              	GLOBAL _bullet_col0
680   0000              	GLOBAL _bullet_lin0
681   0000              	GLOBAL _bullet_max
682   0000              	GLOBAL _bullet_class
683   0000              	GLOBAL _mush_class
684   0000              	GLOBAL _mush_index
685   0000              	GLOBAL _anim_count
686   0000              	GLOBAL _anim_respanwn
687   0000              	GLOBAL _anim_loop
688   0000              	GLOBAL _anim_end
689   0000              	GLOBAL _anim_int
690   0000              	GLOBAL _anim_tile
691   0000              	GLOBAL _anim_col
692   0000              	GLOBAL _anim_lin
693   0000              	GLOBAL _map_heigth
694   0000              	GLOBAL _map_width
695   0000              	GLOBAL _scr_curr
696   0000              	GLOBAL _scr_obj1
697   0000              	GLOBAL _scr_obj0
698   0000              	GLOBAL _scr_map
699   0000              	GLOBAL _sprite_speed_alt
700   0000              	GLOBAL _sprite_frames
701   0000              	GLOBAL _sprite_speed
702   0000              	GLOBAL _screen_ink
703   0000              	GLOBAL _screen_paper
704   0000              	GLOBAL _player_onstair
705   0000              	GLOBAL _game_start_scr
706   0000              	GLOBAL _game_respawn_tile
707   0000              	GLOBAL _game_respawn_index
708   0000              	GLOBAL _game_respawn_time
709   0000              	GLOBAL _game_menu_sel
710   0000              	GLOBAL _game_score_top
711   0000              	GLOBAL _player_coins
712   0000              	GLOBAL _player_lives
713   0000              	GLOBAL _game_over
714   0000              	GLOBAL _game_sound
715   0000              	GLOBAL _game_inmune
716   0000              	GLOBAL _game_god_mode
717   0000              	GLOBAL _game_two_player
718   0000              	GLOBAL _game_brick_tile
719   0000              	GLOBAL _sprite_curr_index
720   0000              	GLOBAL _spr_count
721   0000              	GLOBAL _bullet_time
722   0000              	GLOBAL _anim_time
723   0000              	GLOBAL _frame_time
724   0000              	GLOBAL _entry_time
725   0000              	GLOBAL _curr_time
726   0000              	GLOBAL _s_state
727   0000              	GLOBAL _attrib_osd
728   0000              	GLOBAL _attrib_hl
729   0000              	GLOBAL _attrib
730   0000              	GLOBAL _zx_val_asm
731   0000              	GLOBAL _enemies
732   0000              	GLOBAL _tmp_ui
733   0000              	GLOBAL _tmp_sc
734   0000              	GLOBAL _tmp_uc
735   0000              	GLOBAL _tmp1
736   0000              	GLOBAL _tmp0
737   0000              	GLOBAL _tmp
738   0000              	GLOBAL _index1
739   0000              	GLOBAL _index0
740   0000              	GLOBAL _loop_count
741   0000              	GLOBAL _s_col1
742   0000              	GLOBAL _s_col0
743   0000              	GLOBAL _s_lin1
744   0000              	GLOBAL _s_lin0
745   0000              	GLOBAL _s_tile1
746   0000              	GLOBAL _s_tile0
747   0000              	GLOBAL _player_brick_time
748   0000              	GLOBAL _player_hit_count
749   0000              	GLOBAL _sprite_horizontal_check
750   0000              	GLOBAL _sprite_on_air
751   0000              	GLOBAL _sprite
752   0000              	GLOBAL _fps
753   0000              	GLOBAL _game_respawn_curr_time
754   0000              	GLOBAL _game_worldup
755   0000              	GLOBAL _game_mush_count
756   0000              	GLOBAL _game_boss_fix
757   0000              	GLOBAL _game_boss_hit
758   0000              	GLOBAL _game_boss_alive
759   0000              	GLOBAL _game_boss
760   0000              	GLOBAL _game_world
761   0000              	GLOBAL _game_gravity
762   0000              	GLOBAL _player_anim_stair
763   0000              	GLOBAL _player_hit_time
764   0000              	GLOBAL _player_lin_scr
765   0000              	GLOBAL _player_col_scr
766   0000              	GLOBAL _player_lvl
767   0000              	GLOBAL _player_int
768   0000              	GLOBAL _player_str
769   0000              	GLOBAL _player_max_vita
770   0000              	GLOBAL _player_max_mana
771   0000              	GLOBAL _player_vita
772   0000              	GLOBAL _player_mana
773   0000              	GLOBAL _player_keys
774   0000              	GLOBAL _player_vel_inc
775   0000              	GLOBAL _player_vel_y1
776   0000              	GLOBAL _player_vel_y0
777   0000              	GLOBAL _player_vel_y
778   0000              	GLOBAL _player_vel_x
779   0000              	GLOBAL _player_joy
780   0000              	GLOBAL _player_score
781   0000              	GLOBAL _last_time
782   0000              	GLOBAL _player_slide
783   0000              	GLOBAL _spr_timer
784   0000              	GLOBAL _jump_lin
785   0000              	GLOBAL _player_hit_col
786   0000              	GLOBAL _player_hit_lin
787   0000              	GLOBAL _colint
788   0000              	GLOBAL _col
789   0000              	GLOBAL _lin
790   0000              	GLOBAL _tile
791   0000              	GLOBAL _state_a
792   0000              	GLOBAL _state
793   0000              	GLOBAL _class
794   0000              	GLOBAL _tbuffer
795   0000              	GLOBAL _dirs
796   0000              	GLOBAL _k1
797   0000              	GLOBAL _joyfunc1
798   0000              	GLOBAL _btiles
799   0000              	GLOBAL _spec128
800   0000              	GLOBAL _GLOBAL_ZX_PORT_7FFD
801   0000              	GLOBAL _GLOBAL_ZX_PORT_1FFD
802   0000              	GLOBAL _GLOBAL_ZX_PORT_FE
803   0000              	GLOBAL _ay_effect_20
804   0000              	GLOBAL _ay_effect_19
805   0000              	GLOBAL _ay_effect_18
806   0000              	GLOBAL _ay_effect_17
807   0000              	GLOBAL _ay_effect_16
808   0000              	GLOBAL _ay_effect_15
809   0000              	GLOBAL _ay_effect_14
810   0000              	GLOBAL _ay_effect_13
811   0000              	GLOBAL _ay_effect_12
812   0000              	GLOBAL _ay_effect_11
813   0000              	GLOBAL _ay_effect_10
814   0000              	GLOBAL _ay_effect_09
815   0000              	GLOBAL _ay_effect_08
816   0000              	GLOBAL _ay_effect_07
817   0000              	GLOBAL _ay_effect_06
818   0000              	GLOBAL _ay_effect_05
819   0000              	GLOBAL _ay_effect_04
820   0000              	GLOBAL _ay_effect_03
821   0000              	GLOBAL _ay_effect_02
822   0000              	GLOBAL _ay_effect_01
823   0000              	GLOBAL _pb_midi_phase_1
824   0000              	GLOBAL _pb_midi_title
825   0000              	GLOBAL _control_method
826   0000              	GLOBAL _world1_h
827   0000              	GLOBAL _world1_w
828   0000              	GLOBAL _world1
829   0000              	GLOBAL _paper1
830   0000              	GLOBAL _lenght1
831   0000              	GLOBAL _start_scr1
832   0000              	GLOBAL _world0_h
833   0000              	GLOBAL _world0_w
834   0000              	GLOBAL _world0
835   0000              	GLOBAL _paper0
836   0000              	GLOBAL _lenght0
837   0000              	GLOBAL _start_scr0
838   0000              ;--------------------------------------------------------
839   0000              ; special function registers
840   0000              ;--------------------------------------------------------
841   0000              defc _IO_FE	=	0x00fe
842   0000              defc _IO_1FFD	=	0x1ffd
843   0000              defc _IO_7FFD	=	0x7ffd
844   0000              ;--------------------------------------------------------
845   0000              ; ram data
846   0000              ;--------------------------------------------------------
847   0000              	SECTION bss_compiler
848   0000              ;--------------------------------------------------------
849   0000              ; ram data
850   0000              ;--------------------------------------------------------
851   0000              
852   0000              IF 0
853   0000              
854   0000              ; .area _INITIALIZED removed by z88dk
855   0000              
856   0000              
857   0000              ENDIF
858   0000              
859   0000              ;--------------------------------------------------------
860   0000              ; absolute external ram data
861   0000              ;--------------------------------------------------------
862   0000              	SECTION IGNORE
863   0000              ;--------------------------------------------------------
864   0000              ; global & static initialisations
865   0000              ;--------------------------------------------------------
866   0000              	SECTION code_crt_init
867   0000              ;--------------------------------------------------------
868   0000              ; Home
869   0000              ;--------------------------------------------------------
870   0000              	SECTION IGNORE
871   0000              ;--------------------------------------------------------
872   0000              ; code
873   0000              ;--------------------------------------------------------
874   0000              	SECTION code_compiler
875   0000              ;	---------------------------------
876   0000              ; Function player_init
877   0000              ; ---------------------------------
878   0000              _player_init:
879   0000  CD 00 00    	call	___sdcc_enter_ix
880   0003  21 07 00    	ld	hl, +(_class + 0x0007)
881   0006  36 00       	ld	(hl),0x00
882   0008  21 07 00    	ld	hl, +(_tile + 0x0007)
883   000B  DD 7E 06    	ld	a,(ix+6)
884   000E  77          	ld	(hl), a
885   000F  21 07 00    	ld	hl, +(_lin + 0x0007)
886   0012  DD 7E 04    	ld	a,(ix+4)
887   0015  77          	ld	(hl), a
888   0016  21 07 00    	ld	hl, +(_col + 0x0007)
889   0019  DD 7E 05    	ld	a,(ix+5)
890   001C  77          	ld	(hl), a
891   001D  21 07 00    	ld	hl, +(_colint + 0x0007)
892   0020  36 00       	ld	(hl),0x00
893   0022  21 07 00    	ld	hl, +(_state + 0x0007)
894   0025  36 00       	ld	(hl),0x00
895   0027  01 07 00    	ld	bc,_state_a+7
896   002A  AF          	xor	a, a
897   002B  02          	ld	(bc), a
898   002C  21 07 00    	ld	hl, +(_jump_lin + 0x0007)
899   002F  DD 7E 04    	ld	a,(ix+4)
900   0032  77          	ld	(hl), a
901   0033  ED 5B 00 00 	ld	de,(_curr_time)
902   0037  ED 53 0E 00 	ld	(_last_time + 0x000e),de
903   003B  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
904   003E  36 00       	ld	(hl),0x00
905   0040  0A          	ld	a, (bc)
906   0041  F6 11       	or	a,+(0x01|0x10)
907   0043  02          	ld	(bc),a
908   0044  21 00 00    	ld	hl,_player_hit_col
909   0047  36 00       	ld	(hl),0x00
910   0049  21 00 00    	ld	hl,_player_hit_lin
911   004C  36 00       	ld	(hl),0x00
912   004E  21 00 00    	ld	hl,_player_slide
913   0051  36 00       	ld	(hl),0x00
914   0053  DD 66 05    	ld	h,(ix+5)
915   0056  DD 6E 04    	ld	l,(ix+4)
916   0059  E5          	push	hl
917   005A  DD 56 06    	ld	d,(ix+6)
918   005D  1E 07       	ld	e,0x07
919   005F  D5          	push	de
920   0060  CD 00 00    	call	_NIRVANAP_spriteT_callee
921   0063  DD E1       	pop	ix
922   0065  C9          	ret
923   0066              	SECTION code_compiler
924   0066              ;	---------------------------------
925   0066              ; Function player_turn
926   0066              ; ---------------------------------
927   0066              _player_turn:
928   0066  21 00 00    	ld	hl,_sprite
929   0069  CD 00 00    	call	_spr_chktime
930   006C  7D          	ld	a, l
931   006D  B7          	or	a, a
932   006E  C8          	ret	Z
933   006F  21 00 00    	ld	hl,_k1
934   0072  E5          	push	hl
935   0073  2A 00 00    	ld	hl,(_joyfunc1)
936   0076  CD 00 00    	call	___sdcc_call_hl
937   0079  F1          	pop	af
938   007A  7D          	ld	a,l
939   007B  32 00 00    	ld	(_dirs),a
940   007E  CD 91 00    	call	_player_move
941   0081  CD 73 03    	call	_player_collision
942   0084  3A 00 00    	ld	a,(_player_onstair)
943   0087  F5          	push	af
944   0088  33          	inc	sp
945   0089  21 17 00    	ld	hl,0x0017
946   008C  E5          	push	hl
947   008D  CD 00 00    	call	_zx_print_chr
948   0090  C9          	ret
949   0091              	SECTION code_compiler
950   0091              ;	---------------------------------
951   0091              ; Function player_move
952   0091              ; ---------------------------------
953   0091              _player_move:
954   0091  3A 07 00    	ld	a,(_lin + 0x0007)
955   0094  32 00 00    	ld	(_s_lin0),a
956   0097  3A 07 00    	ld	a,(_col + 0x0007)
957   009A  32 00 00    	ld	(_s_col0),a
958   009D  21 07 00    	ld	hl,+(_tile + 0x0007)
959   00A0  4E          	ld	c, (hl)
960   00A1  21 07 00    	ld	hl,+(_colint + 0x0007)
961   00A4  46          	ld	b, (hl)
962   00A5  79          	ld	a, c
963   00A6  80          	add	a, b
964   00A7  32 00 00    	ld	(_s_tile0),a
965   00AA  3A 07 00    	ld	a,(_state + 0x0007)
966   00AD  32 00 00    	ld	(_s_state),a
967   00B0  21 00 00    	ld	hl,_s_state
968   00B3  CB 46       	bit	0, (hl)
969   00B5  20 07       	jr	NZ,l_player_move_00113
970   00B7  21 00 00    	ld	hl,_s_state
971   00BA  CB 4E       	bit	1, (hl)
972   00BC  28 49       	jr	Z,l_player_move_00114
973   00BE              l_player_move_00113:
974   00BE  CD 2A 03    	call	_player_fire
975   00C1  3A 00 00    	ld	a,(_player_vel_y)
976   00C4  21 00 00    	ld	hl,_player_vel_y1
977   00C7  96          	sub	a, (hl)
978   00C8  E2 CD 00    	jp	PO, l_player_move_00162
979   00CB  EE 80       	xor	a,0x80
980   00CD              l_player_move_00162:
981   00CD  F2 F0 00    	jp	P, l_player_move_00106
982   00D0  21 00 00    	ld	hl,_dirs
983   00D3  CB 56       	bit	2, (hl)
984   00D5  28 09       	jr	Z,l_player_move_00102
985   00D7  21 00 00    	ld	hl,_s_state
986   00DA  7E          	ld	a,(hl)
987   00DB  F6 08       	or	a,0x08
988   00DD  E6 FB       	and	a,0xfb
989   00DF  77          	ld	(hl),a
990   00E0              l_player_move_00102:
991   00E0  21 00 00    	ld	hl,_dirs
992   00E3  CB 4E       	bit	1, (hl)
993   00E5  28 09       	jr	Z,l_player_move_00106
994   00E7  21 00 00    	ld	hl,_s_state
995   00EA  7E          	ld	a,(hl)
996   00EB  F6 04       	or	a,0x04
997   00ED  E6 F7       	and	a,0xf7
998   00EF  77          	ld	(hl),a
999   00F0              l_player_move_00106:
1000  00F0  CD 8F 0D    	call	_player_move_jump
1001  00F3  7D          	ld	a, l
1002  00F4  B7          	or	a, a
1003  00F5  28 1C       	jr	Z,l_player_move_00115
1004  00F7  3A 00 00    	ld	a,(_player_onstair)
1005  00FA  B7          	or	a, a
1006  00FB  20 16       	jr	NZ,l_player_move_00115
1007  00FD  21 60 08    	ld	hl,0x0860
1008  0100  E5          	push	hl
1009  0101  CD C8 06    	call	_player_tile
1010  0104  F1          	pop	af
1011  0105  18 0C       	jr	l_player_move_00115
1012  0107              l_player_move_00114:
1013  0107  CD 6E 01    	call	_player_move_input
1014  010A  3A 00 00    	ld	a,(_player_onstair)
1015  010D  B7          	or	a, a
1016  010E  20 03       	jr	NZ,l_player_move_00115
1017  0110  CD 0A 0C    	call	_player_check_floor
1018  0113              l_player_move_00115:
1019  0113  CD 00 00    	call	_spr_redraw
1020  0116  7D          	ld	a, l
1021  0117  B7          	or	a, a
1022  0118  28 03       	jr	Z,l_player_move_00118
1023  011A  CD E3 06    	call	_player_check_map
1024  011D              l_player_move_00118:
1025  011D  3A 00 00    	ld	a,(_player_hit_lin)
1026  0120  B7          	or	a, a
1027  0121  28 03       	jr	Z,l_player_move_00120
1028  0123  CD 77 0B    	call	_player_hit_platform_clear
1029  0126              l_player_move_00120:
1030  0126  3A 00 00    	ld	a,(_s_state)
1031  0129  32 07 00    	ld	((_state + 0x0007)),a
1032  012C  2E 00       	ld	l,0x00
1033  012E  C9          	ret
1034  012F              	SECTION code_compiler
1035  012F              ;	---------------------------------
1036  012F              ; Function player_check_input
1037  012F              ; ---------------------------------
1038  012F              _player_check_input:
1039  012F  21 00 00    	ld	hl,_dirs
1040  0132  CB 56       	bit	2, (hl)
1041  0134  28 0C       	jr	Z,l_player_check_input_00102
1042  0136  21 00 00    	ld	hl,_dirs
1043  0139  CB 5E       	bit	3, (hl)
1044  013B  28 05       	jr	Z,l_player_check_input_00102
1045  013D  21 00 00    	ld	hl,_dirs
1046  0140  36 00       	ld	(hl),0x00
1047  0142              l_player_check_input_00102:
1048  0142  21 00 00    	ld	hl,_dirs
1049  0145  7E          	ld	a, (hl)
1050  0146  CB 07       	rlc	a
1051  0148  E6 01       	and	a,0x01
1052  014A  CB 47       	bit	0, a
1053  014C  20 1D       	jr	NZ,l_player_check_input_00107
1054  014E  CB 56       	bit	2, (hl)
1055  0150  20 19       	jr	NZ,l_player_check_input_00107
1056  0152  21 00 00    	ld	hl,_dirs
1057  0155  CB 5E       	bit	3, (hl)
1058  0157  20 12       	jr	NZ,l_player_check_input_00107
1059  0159  21 00 00    	ld	hl,_dirs
1060  015C  CB 46       	bit	0, (hl)
1061  015E  20 0B       	jr	NZ,l_player_check_input_00107
1062  0160  21 00 00    	ld	hl,_dirs
1063  0163  CB 4E       	bit	1, (hl)
1064  0165  20 04       	jr	NZ,l_player_check_input_00107
1065  0167  2E 00       	ld	l,0x00
1066  0169  18 02       	jr	l_player_check_input_00108
1067  016B              l_player_check_input_00107:
1068  016B  2E 01       	ld	l,0x01
1069  016D              l_player_check_input_00108:
1070  016D  C9          	ret
1071  016E              	SECTION code_compiler
1072  016E              ;	---------------------------------
1073  016E              ; Function player_move_input
1074  016E              ; ---------------------------------
1075  016E              _player_move_input:
1076  016E  CD 2F 01    	call	_player_check_input
1077  0171  7D          	ld	a, l
1078  0172  B7          	or	a, a
1079  0173  CA DD 02    	jp	Z, l_player_move_input_00147
1080  0176  CD 2A 03    	call	_player_fire
1081  0179  7D          	ld	a, l
1082  017A  B7          	or	a, a
1083  017B  28 0A       	jr	Z,l_player_move_input_00102
1084  017D  21 00 00    	ld	hl,_dirs
1085  0180  36 00       	ld	(hl),0x00
1086  0182  2E 00       	ld	l,0x00
1087  0184  C3 03 03    	jp	l_player_move_input_00149
1088  0187              l_player_move_input_00102:
1089  0187  21 00 00    	ld	hl,_dirs
1090  018A  CB 7E       	bit	7, (hl)
1091  018C  28 54       	jr	Z,l_player_move_input_00106
1092  018E  21 00 00    	ld	hl,_dirs
1093  0191  CB 46       	bit	0, (hl)
1094  0193  28 4D       	jr	Z,l_player_move_input_00106
1095  0195  21 00 00    	ld	hl,_player_vel_inc
1096  0198  36 01       	ld	(hl),0x01
1097  019A  CD 00 00    	call	_ay_is_playing
1098  019D  7D          	ld	a, l
1099  019E  D6 03       	sub	a,0x03
1100  01A0  28 06       	jr	Z,l_player_move_input_00104
1101  01A2  21 00 00    	ld	hl,_ay_effect_03
1102  01A5  CD 00 00    	call	_ay_fx_play
1103  01A8              l_player_move_input_00104:
1104  01A8  21 00 00    	ld	hl,_player_onstair
1105  01AB  36 00       	ld	(hl),0x00
1106  01AD  CD 00 00    	call	_sound_jump
1107  01B0  21 00 00    	ld	hl,_s_state
1108  01B3  7E          	ld	a,(hl)
1109  01B4  F6 01       	or	a,0x01
1110  01B6  E6 FD       	and	a,0xfd
1111  01B8  77          	ld	(hl),a
1112  01B9  3A 07 00    	ld	a,(_lin + 0x0007)
1113  01BC  32 07 00    	ld	((_jump_lin + 0x0007)),a
1114  01BF  3A 00 00    	ld	a,(_s_state)
1115  01C2  32 07 00    	ld	((_state + 0x0007)),a
1116  01C5  21 64 08    	ld	hl,0x0864
1117  01C8  E5          	push	hl
1118  01C9  CD C8 06    	call	_player_tile
1119  01CC  F1          	pop	af
1120  01CD  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
1121  01D0  36 02       	ld	(hl),0x02
1122  01D2  21 00 00    	ld	hl,_player_slide
1123  01D5  36 00       	ld	(hl),0x00
1124  01D7  3A 00 00    	ld	a,(_player_vel_y0)
1125  01DA  32 00 00    	ld	(_player_vel_y),a
1126  01DD  2E 01       	ld	l,0x01
1127  01DF  C3 03 03    	jp	l_player_move_input_00149
1128  01E2              l_player_move_input_00106:
1129  01E2  21 00 00    	ld	hl,_dirs
1130  01E5  CB 5E       	bit	3, (hl)
1131  01E7  28 23       	jr	Z,l_player_move_input_00111
1132  01E9  CD 04 03    	call	_player_fix_walk_lin
1133  01EC  21 00 00    	ld	hl,_s_state
1134  01EF  7E          	ld	a,(hl)
1135  01F0  F6 04       	or	a,0x04
1136  01F2  E6 F7       	and	a,0xf7
1137  01F4  77          	ld	(hl),a
1138  01F5  01 07 00    	ld	bc,_state_a+7
1139  01F8  0A          	ld	a, (bc)
1140  01F9  F6 10       	or	a,0x10
1141  01FB  E6 F7       	and	a,0xf7
1142  01FD  02          	ld	(bc),a
1143  01FE  3A 00 00    	ld	a,(_player_onstair)
1144  0201  B7          	or	a, a
1145  0202  28 05       	jr	Z,l_player_move_input_00109
1146  0204  2E 00       	ld	l,0x00
1147  0206  CD 36 06    	call	_player_check_stairs
1148  0209              l_player_move_input_00109:
1149  0209  CD 00 00    	call	_spr_move_horizontal
1150  020C              l_player_move_input_00111:
1151  020C  21 00 00    	ld	hl,_dirs
1152  020F  CB 56       	bit	2, (hl)
1153  0211  28 23       	jr	Z,l_player_move_input_00115
1154  0213  CD 04 03    	call	_player_fix_walk_lin
1155  0216  21 00 00    	ld	hl,_s_state
1156  0219  7E          	ld	a,(hl)
1157  021A  F6 08       	or	a,0x08
1158  021C  E6 FB       	and	a,0xfb
1159  021E  77          	ld	(hl),a
1160  021F  01 07 00    	ld	bc,_state_a+7
1161  0222  0A          	ld	a, (bc)
1162  0223  F6 08       	or	a,0x08
1163  0225  E6 EF       	and	a,0xef
1164  0227  02          	ld	(bc),a
1165  0228  3A 00 00    	ld	a,(_player_onstair)
1166  022B  B7          	or	a, a
1167  022C  28 05       	jr	Z,l_player_move_input_00113
1168  022E  2E 00       	ld	l,0x00
1169  0230  CD 36 06    	call	_player_check_stairs
1170  0233              l_player_move_input_00113:
1171  0233  CD 00 00    	call	_spr_move_horizontal
1172  0236              l_player_move_input_00115:
1173  0236  21 00 00    	ld	hl,_dirs
1174  0239  CB 46       	bit	0, (hl)
1175  023B  28 3C       	jr	Z,l_player_move_input_00127
1176  023D  2E 00       	ld	l,0x00
1177  023F  CD 36 06    	call	_player_check_stairs
1178  0242  3A 00 00    	ld	a,(_player_onstair)
1179  0245  B7          	or	a, a
1180  0246  20 13       	jr	NZ,l_player_move_input_00119
1181  0248  2E 01       	ld	l,0x01
1182  024A  CD 36 06    	call	_player_check_stairs
1183  024D  3A 00 00    	ld	a,(_player_onstair)
1184  0250  B7          	or	a, a
1185  0251  20 08       	jr	NZ,l_player_move_input_00119
1186  0253  3E FE       	ld	a,0xfe
1187  0255  F5          	push	af
1188  0256  33          	inc	sp
1189  0257  CD 8D 05    	call	_player_check_stairs_vertical
1190  025A  33          	inc	sp
1191  025B              l_player_move_input_00119:
1192  025B  3A 00 00    	ld	a,(_player_onstair)
1193  025E  B7          	or	a, a
1194  025F  28 05       	jr	Z,l_player_move_input_00124
1195  0261  CD 00 00    	call	_spr_move_up
1196  0264  18 13       	jr	l_player_move_input_00127
1197  0266              l_player_move_input_00124:
1198  0266  21 00 00    	ld	hl,_dirs
1199  0269  CB 5E       	bit	3, (hl)
1200  026B  20 0C       	jr	NZ,l_player_move_input_00127
1201  026D  21 00 00    	ld	hl,_dirs
1202  0270  CB 56       	bit	2, (hl)
1203  0272  20 05       	jr	NZ,l_player_move_input_00127
1204  0274  2E 00       	ld	l,0x00
1205  0276  C3 03 03    	jp	l_player_move_input_00149
1206  0279              l_player_move_input_00127:
1207  0279  21 00 00    	ld	hl,_dirs
1208  027C  CB 4E       	bit	1, (hl)
1209  027E  28 3B       	jr	Z,l_player_move_input_00139
1210  0280  2E 00       	ld	l,0x00
1211  0282  CD 36 06    	call	_player_check_stairs
1212  0285  3A 00 00    	ld	a,(_player_onstair)
1213  0288  B7          	or	a, a
1214  0289  20 13       	jr	NZ,l_player_move_input_00131
1215  028B  2E 01       	ld	l,0x01
1216  028D  CD 36 06    	call	_player_check_stairs
1217  0290  3A 00 00    	ld	a,(_player_onstair)
1218  0293  B7          	or	a, a
1219  0294  20 08       	jr	NZ,l_player_move_input_00131
1220  0296  3E 12       	ld	a,0x12
1221  0298  F5          	push	af
1222  0299  33          	inc	sp
1223  029A  CD 8D 05    	call	_player_check_stairs_vertical
1224  029D  33          	inc	sp
1225  029E              l_player_move_input_00131:
1226  029E  3A 00 00    	ld	a,(_player_onstair)
1227  02A1  B7          	or	a, a
1228  02A2  28 05       	jr	Z,l_player_move_input_00136
1229  02A4  CD 00 00    	call	_spr_move_down
1230  02A7  18 12       	jr	l_player_move_input_00139
1231  02A9              l_player_move_input_00136:
1232  02A9  21 00 00    	ld	hl,_dirs
1233  02AC  CB 5E       	bit	3, (hl)
1234  02AE  20 0B       	jr	NZ,l_player_move_input_00139
1235  02B0  21 00 00    	ld	hl,_dirs
1236  02B3  CB 56       	bit	2, (hl)
1237  02B5  20 04       	jr	NZ,l_player_move_input_00139
1238  02B7  2E 00       	ld	l,0x00
1239  02B9  18 48       	jr	l_player_move_input_00149
1240  02BB              l_player_move_input_00139:
1241  02BB  3A 00 00    	ld	a,(_s_state)
1242  02BE  32 07 00    	ld	((_state + 0x0007)),a
1243  02C1  3A 00 00    	ld	a,(_player_onstair)
1244  02C4  B7          	or	a, a
1245  02C5  28 0A       	jr	Z,l_player_move_input_00141
1246  02C7  21 72 00    	ld	hl,0x0072
1247  02CA  E5          	push	hl
1248  02CB  CD C8 06    	call	_player_tile
1249  02CE  F1          	pop	af
1250  02CF  18 08       	jr	l_player_move_input_00142
1251  02D1              l_player_move_input_00141:
1252  02D1  21 60 08    	ld	hl,0x0860
1253  02D4  E5          	push	hl
1254  02D5  CD C8 06    	call	_player_tile
1255  02D8  F1          	pop	af
1256  02D9              l_player_move_input_00142:
1257  02D9  2E 01       	ld	l,0x01
1258  02DB  18 26       	jr	l_player_move_input_00149
1259  02DD              l_player_move_input_00147:
1260  02DD  21 07 00    	ld	hl, +(_colint + 0x0007)
1261  02E0  36 00       	ld	(hl),0x00
1262  02E2  3A 00 00    	ld	a,(_player_onstair)
1263  02E5  B7          	or	a, a
1264  02E6  28 0A       	jr	Z,l_player_move_input_00144
1265  02E8  21 72 00    	ld	hl,0x0072
1266  02EB  E5          	push	hl
1267  02EC  CD C8 06    	call	_player_tile
1268  02EF  F1          	pop	af
1269  02F0  18 08       	jr	l_player_move_input_00145
1270  02F2              l_player_move_input_00144:
1271  02F2  21 70 01    	ld	hl,0x0170
1272  02F5  E5          	push	hl
1273  02F6  CD C8 06    	call	_player_tile
1274  02F9  F1          	pop	af
1275  02FA              l_player_move_input_00145:
1276  02FA  21 00 00    	ld	hl,_s_state
1277  02FD  7E          	ld	a,(hl)
1278  02FE  E6 F3       	and	a,+(0xf7&0xfb)
1279  0300  77          	ld	(hl),a
1280  0301  2E 00       	ld	l,0x00
1281  0303              l_player_move_input_00149:
1282  0303  C9          	ret
1283  0304              	SECTION code_compiler
1284  0304              ;	---------------------------------
1285  0304              ; Function player_fix_walk_lin
1286  0304              ; ---------------------------------
1287  0304              _player_fix_walk_lin:
1288  0304  3A 00 00    	ld	a,(_player_onstair)
1289  0307  B7          	or	a, a
1290  0308  C0          	ret	NZ
1291  0309  3A 00 00    	ld	a,(_s_lin0)
1292  030C  07          	rlca
1293  030D  07          	rlca
1294  030E  07          	rlca
1295  030F  07          	rlca
1296  0310  E6 0F       	and	a,0x0f
1297  0312  07          	rlca
1298  0313  07          	rlca
1299  0314  07          	rlca
1300  0315  07          	rlca
1301  0316  E6 F0       	and	a,0xf0
1302  0318  32 00 00    	ld	(_s_lin1),a
1303  031B  3A 00 00    	ld	a,(_s_lin0)
1304  031E  21 00 00    	ld	hl,_s_lin1
1305  0321  96          	sub	a, (hl)
1306  0322  C8          	ret	Z
1307  0323  3A 00 00    	ld	a,(_s_lin1)
1308  0326  32 07 00    	ld	((_lin + 0x0007)),a
1309  0329  C9          	ret
1310  032A              	SECTION code_compiler
1311  032A              ;	---------------------------------
1312  032A              ; Function player_fire
1313  032A              ; ---------------------------------
1314  032A              _player_fire:
1315  032A  21 00 00    	ld	hl,_dirs
1316  032D  CB 7E       	bit	7, (hl)
1317  032F  28 3F       	jr	Z,l_player_fire_00110
1318  0331  21 00 00    	ld	hl,_dirs
1319  0334  CB 46       	bit	0, (hl)
1320  0336  20 38       	jr	NZ,l_player_fire_00110
1321  0338  21 00 00    	ld	hl,_player_mana
1322  033B  7E          	ld	a, (hl)
1323  033C  B7          	or	a, a
1324  033D  28 2D       	jr	Z,l_player_fire_00107
1325  033F  3A 07 00    	ld	a,(_bullet_col + 0x0007)
1326  0342  3C          	inc	a
1327  0343  20 27       	jr	NZ,l_player_fire_00107
1328  0345  3E 05       	ld	a,0x05
1329  0347  96          	sub	a, (hl)
1330  0348  30 12       	jr	NC,l_player_fire_00104
1331  034A  CD 00 00    	call	_sound_hit_enemy
1332  034D  3A 00 00    	ld	a,(_game_god_mode)
1333  0350  B7          	or	a, a
1334  0351  20 0E       	jr	NZ,l_player_fire_00105
1335  0353  21 00 00    	ld	hl,_player_mana
1336  0356  7E          	ld	a, (hl)
1337  0357  C6 FB       	add	a,0xfb
1338  0359  77          	ld	(hl), a
1339  035A  18 05       	jr	l_player_fire_00105
1340  035C              l_player_fire_00104:
1341  035C  21 00 00    	ld	hl,_player_mana
1342  035F  36 00       	ld	(hl),0x00
1343  0361              l_player_fire_00105:
1344  0361  CD 00 00    	call	_game_update_stats
1345  0364  21 07 78    	ld	hl,0x7807
1346  0367  E5          	push	hl
1347  0368  CD 00 00    	call	_game_shoot_fire
1348  036B  F1          	pop	af
1349  036C              l_player_fire_00107:
1350  036C  2E 01       	ld	l,0x01
1351  036E  18 02       	jr	l_player_fire_00112
1352  0370              l_player_fire_00110:
1353  0370  2E 00       	ld	l,0x00
1354  0372              l_player_fire_00112:
1355  0372  C9          	ret
1356  0373              	SECTION code_compiler
1357  0373              ;	---------------------------------
1358  0373              ; Function player_collision
1359  0373              ; ---------------------------------
1360  0373              _player_collision:
1361  0373  CD 00 00    	call	___sdcc_enter_ix
1362  0376  F5          	push	af
1363  0377  21 19 00    	ld	hl,0x0019
1364  037A  E5          	push	hl
1365  037B  2A 00 00    	ld	hl,(_player_hit_time)
1366  037E  E5          	push	hl
1367  037F  CD 00 00    	call	_game_check_time
1368  0382  F1          	pop	af
1369  0383  F1          	pop	af
1370  0384  7D          	ld	a, l
1371  0385  B7          	or	a, a
1372  0386  CA F4 04    	jp	Z, l_player_collision_00127
1373  0389  21 00 00    	ld	hl,_sprite
1374  038C  36 00       	ld	(hl),0x00
1375  038E  01 00 00    	ld	bc,_col+0
1376  0391  3A 07 00    	ld	a,(_col + 7)
1377  0394  32 00 00    	ld	(_s_col1),a
1378  0397  3A 07 00    	ld	a,(_lin + 7)
1379  039A  32 00 00    	ld	(_s_lin1),a
1380  039D  C6 08       	add	a,0x08
1381  039F  57          	ld	d, a
1382  03A0  3A 00 00    	ld	a,(_s_col1)
1383  03A3  C5          	push	bc
1384  03A4  5A          	ld	e,d
1385  03A5  57          	ld	d,a
1386  03A6  D5          	push	de
1387  03A7  CD 00 00    	call	_spr_calc_index
1388  03AA  F1          	pop	af
1389  03AB  C1          	pop	bc
1390  03AC  7D          	ld	a,l
1391  03AD  32 00 00    	ld	(_sprite_curr_index),a
1392  03B0  5F          	ld	e,a
1393  03B1  16 00       	ld	d,0x00
1394  03B3  21 00 00    	ld	hl,_scr_map
1395  03B6  19          	add	hl,de
1396  03B7  5E          	ld	e, (hl)
1397  03B8  3E 2F       	ld	a,0x2f
1398  03BA  93          	sub	a, e
1399  03BB  30 1C       	jr	NC,l_player_collision_00123
1400  03BD  7B          	ld	a,e
1401  03BE  FE 3C       	cp	a,0x3c
1402  03C0  30 17       	jr	NC,l_player_collision_00123
1403  03C2  D6 39       	sub	a,0x39
1404  03C4  20 07       	jr	NZ,l_player_collision_00102
1405  03C6  21 00 00    	ld	hl,_game_worldup
1406  03C9  36 01       	ld	(hl),0x01
1407  03CB  18 0C       	jr	l_player_collision_00123
1408  03CD              l_player_collision_00102:
1409  03CD  2E 06       	ld	l,0x06
1410  03CF  CD 00 00    	call	_zx_border_fastcall
1411  03D2  C5          	push	bc
1412  03D3  2E 32       	ld	l,0x32
1413  03D5  CD A4 11    	call	_player_hit
1414  03D8  C1          	pop	bc
1415  03D9              l_player_collision_00123:
1416  03D9  21 00 00    	ld	hl,_sprite
1417  03DC  7E          	ld	a, (hl)
1418  03DD  D6 07       	sub	a,0x07
1419  03DF  D2 F4 04    	jp	NC, l_player_collision_00127
1420  03E2  3E 00       	ld	a, +((_class) & 0xFF)
1421  03E4  86          	add	a, (hl)
1422  03E5  5F          	ld	e, a
1423  03E6  3E 00       	ld	a, +((_class) / 256)
1424  03E8  CE 00       	adc	a,0x00
1425  03EA  57          	ld	d, a
1426  03EB  1A          	ld	a, (de)
1427  03EC  B7          	or	a, a
1428  03ED  CA ED 04    	jp	Z, l_player_collision_00122
1429  03F0  79          	ld	a, c
1430  03F1  86          	add	a, (hl)
1431  03F2  5F          	ld	e, a
1432  03F3  78          	ld	a, b
1433  03F4  CE 00       	adc	a,0x00
1434  03F6  57          	ld	d, a
1435  03F7  1A          	ld	a, (de)
1436  03F8  DD 77 FE    	ld	(ix-2),a
1437  03FB  DD 36 FF 00 	ld	(ix-1),0x00
1438  03FF  3A 00 00    	ld	a,(_s_col1)
1439  0402  5F          	ld	e,a
1440  0403  16 00       	ld	d,0x00
1441  0405  DD 7E FE    	ld	a,(ix-2)
1442  0408  93          	sub	a, e
1443  0409  6F          	ld	l, a
1444  040A  DD 7E FF    	ld	a,(ix-1)
1445  040D  9A          	sbc	a, d
1446  040E  67          	ld	h, a
1447  040F  CD 00 00    	call	_abs_fastcall
1448  0412  EB          	ex	de,hl
1449  0413  7B          	ld	a, e
1450  0414  D6 02       	sub	a,0x02
1451  0416  7A          	ld	a, d
1452  0417  17          	rla
1453  0418  3F          	ccf
1454  0419  1F          	rra
1455  041A  DE 80       	sbc	a,0x80
1456  041C  D2 ED 04    	jp	NC, l_player_collision_00122
1457  041F  2A 00 00    	ld	hl,(_sprite)
1458  0422  26 00       	ld	h,0x00
1459  0424  11 00 00    	ld	de,_lin
1460  0427  19          	add	hl,de
1461  0428  7E          	ld	a,(hl)
1462  0429  DD 77 FE    	ld	(ix-2),a
1463  042C  DD 36 FF 00 	ld	(ix-1),0x00
1464  0430  3A 00 00    	ld	a,(_s_lin1)
1465  0433  5F          	ld	e,a
1466  0434  16 00       	ld	d,0x00
1467  0436  DD 7E FE    	ld	a,(ix-2)
1468  0439  93          	sub	a, e
1469  043A  6F          	ld	l, a
1470  043B  DD 7E FF    	ld	a,(ix-1)
1471  043E  9A          	sbc	a, d
1472  043F  67          	ld	h, a
1473  0440  CD 00 00    	call	_abs_fastcall
1474  0443  EB          	ex	de,hl
1475  0444  7B          	ld	a, e
1476  0445  D6 0E       	sub	a,0x0e
1477  0447  7A          	ld	a, d
1478  0448  17          	rla
1479  0449  3F          	ccf
1480  044A  1F          	rra
1481  044B  DE 80       	sbc	a,0x80
1482  044D  D2 ED 04    	jp	NC, l_player_collision_00122
1483  0450  2A 00 00    	ld	hl,(_sprite)
1484  0453  26 00       	ld	h,0x00
1485  0455  01 00 00    	ld	bc,_class
1486  0458  09          	add	hl,bc
1487  0459  7E          	ld	a,(hl)
1488  045A  FE 06       	cp	a,0x06
1489  045C  28 05       	jr	Z,l_player_collision_00189
1490  045E  21 00 00    	ld	hl,_sprite
1491  0461  18 2D       	jr	l_player_collision_00110
1492  0463              l_player_collision_00189:
1493  0463  21 00 00    	ld	hl,_player_vita
1494  0466  7E          	ld	a, (hl)
1495  0467  C6 19       	add	a,0x19
1496  0469  77          	ld	(hl), a
1497  046A  3A 00 00    	ld	a,(_player_max_vita)
1498  046D  21 00 00    	ld	hl,_player_vita
1499  0470  96          	sub	a, (hl)
1500  0471  30 06       	jr	NC,l_player_collision_00108
1501  0473  3A 00 00    	ld	a,(_player_max_vita)
1502  0476  32 00 00    	ld	(_player_vita),a
1503  0479              l_player_collision_00108:
1504  0479  21 01 00    	ld	hl,0x0001
1505  047C  CD A6 0B    	call	_player_score_add
1506  047F  CD 00 00    	call	_game_update_stats
1507  0482  2A 00 00    	ld	hl,(_sprite)
1508  0485  CD 00 00    	call	_spr_destroy
1509  0488  21 00 00    	ld	hl,_game_mush_count
1510  048B  35          	dec	(hl)
1511  048C  2E 00       	ld	l,0x00
1512  048E  18 66       	jr	l_player_collision_00128
1513  0490              l_player_collision_00110:
1514  0490  FE 07       	cp	a,0x07
1515  0492  20 2D       	jr	NZ,l_player_collision_00114
1516  0494  21 00 00    	ld	hl,_player_mana
1517  0497  7E          	ld	a, (hl)
1518  0498  C6 19       	add	a,0x19
1519  049A  77          	ld	(hl), a
1520  049B  3A 00 00    	ld	a,(_player_max_mana)
1521  049E  21 00 00    	ld	hl,_player_mana
1522  04A1  96          	sub	a, (hl)
1523  04A2  30 06       	jr	NC,l_player_collision_00112
1524  04A4  3A 00 00    	ld	a,(_player_max_mana)
1525  04A7  32 00 00    	ld	(_player_mana),a
1526  04AA              l_player_collision_00112:
1527  04AA  21 01 00    	ld	hl,0x0001
1528  04AD  CD A6 0B    	call	_player_score_add
1529  04B0  CD 00 00    	call	_game_update_stats
1530  04B3  2A 00 00    	ld	hl,(_sprite)
1531  04B6  CD 00 00    	call	_spr_destroy
1532  04B9  21 00 00    	ld	hl,_game_mush_count
1533  04BC  35          	dec	(hl)
1534  04BD  2E 00       	ld	l,0x00
1535  04BF  18 35       	jr	l_player_collision_00128
1536  04C1              l_player_collision_00114:
1537  04C1  D6 08       	sub	a,0x08
1538  04C3  20 1A       	jr	NZ,l_player_collision_00116
1539  04C5  CD FA 04    	call	_player_1up
1540  04C8  21 01 00    	ld	hl,0x0001
1541  04CB  CD A6 0B    	call	_player_score_add
1542  04CE  CD 00 00    	call	_game_update_stats
1543  04D1  2A 00 00    	ld	hl,(_sprite)
1544  04D4  CD 00 00    	call	_spr_destroy
1545  04D7  21 00 00    	ld	hl,_game_mush_count
1546  04DA  35          	dec	(hl)
1547  04DB  2E 00       	ld	l,0x00
1548  04DD  18 17       	jr	l_player_collision_00128
1549  04DF              l_player_collision_00116:
1550  04DF  2E 02       	ld	l,0x02
1551  04E1  CD 00 00    	call	_zx_border_fastcall
1552  04E4  2E 14       	ld	l,0x14
1553  04E6  CD A4 11    	call	_player_hit
1554  04E9  2E 01       	ld	l,0x01
1555  04EB  18 09       	jr	l_player_collision_00128
1556  04ED              l_player_collision_00122:
1557  04ED  21 00 00    	ld	hl,_sprite
1558  04F0  34          	inc	(hl)
1559  04F1  C3 D9 03    	jp	l_player_collision_00123
1560  04F4              l_player_collision_00127:
1561  04F4  2E 00       	ld	l,0x00
1562  04F6              l_player_collision_00128:
1563  04F6  F1          	pop	af
1564  04F7  DD E1       	pop	ix
1565  04F9  C9          	ret
1566  04FA              	SECTION code_compiler
1567  04FA              ;	---------------------------------
1568  04FA              ; Function player_1up
1569  04FA              ; ---------------------------------
1570  04FA              _player_1up:
1571  04FA  21 00 00    	ld	hl,_player_lives
1572  04FD  7E          	ld	a, (hl)
1573  04FE  D6 FF       	sub	a,0xff
1574  0500  D0          	ret	NC
1575  0501  34          	inc	(hl)
1576  0502  21 00 00    	ld	hl,___str_0
1577  0505  E5          	push	hl
1578  0506  21 0C 0C    	ld	hl,0x0c0c
1579  0509  E5          	push	hl
1580  050A  CD 00 00    	call	_zx_print_str
1581  050D  AF          	xor	a, a
1582  050E  F5          	push	af
1583  050F  33          	inc	sp
1584  0510  21 19 00    	ld	hl,0x0019
1585  0513  E5          	push	hl
1586  0514  21 0C 15    	ld	hl,0x150c
1587  0517  E5          	push	hl
1588  0518  3E 0C       	ld	a,0x0c
1589  051A  F5          	push	af
1590  051B  33          	inc	sp
1591  051C  CD 00 00    	call	_game_colour_message
1592  051F  F1          	pop	af
1593  0520  F1          	pop	af
1594  0521  F1          	pop	af
1595  0522  CD 00 00    	call	_game_update_stats
1596  0525  C9          	ret
1597  0526              	SECTION rodata_compiler
1598  0000              ___str_0:
1599  0000  31 20 55 50 21 
                        	DEFM "1 UP!"
1600  0005  00          	DEFB 0x00
1601  0006              	SECTION code_compiler
1602  0526              ;	---------------------------------
1603  0526              ; Function player_kill
1604  0526              ; ---------------------------------
1605  0526              _player_kill:
1606  0526  01 07 00    	ld	bc,_state+7
1607  0529  0A          	ld	a, (bc)
1608  052A  CB 6F       	bit	5, a
1609  052C  20 5E       	jr	NZ,l_player_kill_00109
1610  052E  C5          	push	bc
1611  052F  CD 00 00    	call	_sound_hit_brick
1612  0532  C1          	pop	bc
1613  0533  0A          	ld	a, (bc)
1614  0534  F6 20       	or	a,0x20
1615  0536  5F          	ld	e,a
1616  0537  02          	ld	(bc), a
1617  0538  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
1618  053B  36 03       	ld	(hl),0x03
1619  053D  CB 53       	bit	2, e
1620  053F  28 07       	jr	Z,l_player_kill_00102
1621  0541  21 07 00    	ld	hl, +(_tile + 0x0007)
1622  0544  36 4C       	ld	(hl),0x4c
1623  0546  18 05       	jr	l_player_kill_00103
1624  0548              l_player_kill_00102:
1625  0548  21 07 00    	ld	hl, +(_tile + 0x0007)
1626  054B  36 54       	ld	(hl),0x54
1627  054D              l_player_kill_00103:
1628  054D  CD 77 0B    	call	_player_hit_platform_clear
1629  0550  21 07 00    	ld	hl,+(_col + 0x0007)
1630  0553  5E          	ld	e, (hl)
1631  0554  21 07 00    	ld	hl,+(_lin + 0x0007)
1632  0557  4E          	ld	c, (hl)
1633  0558  21 07 00    	ld	hl,+(_tile + 0x0007)
1634  055B  46          	ld	b, (hl)
1635  055C  7B          	ld	a, e
1636  055D  F5          	push	af
1637  055E  33          	inc	sp
1638  055F  79          	ld	a, c
1639  0560  48          	ld	c,b
1640  0561  47          	ld	b,a
1641  0562  3A 00 00    	ld	a,(_sprite)
1642  0565  C5          	push	bc
1643  0566  F5          	push	af
1644  0567  33          	inc	sp
1645  0568  CD 00 00    	call	_NIRVANAP_spriteT_callee
1646  056B  2A 00 00    	ld	hl,(_curr_time)
1647  056E  22 0E 00    	ld	(_spr_timer + 0x000e),hl
1648  0571  3A 00 00    	ld	a,(_sprite)
1649  0574  D6 07       	sub	a,0x07
1650  0576  20 0B       	jr	NZ,l_player_kill_00105
1651  0578  01 07 00    	ld	bc,_state_a+7
1652  057B  0A          	ld	a, (bc)
1653  057C  F6 08       	or	a,0x08
1654  057E  E6 EF       	and	a,0xef
1655  0580  02          	ld	(bc),a
1656  0581  18 09       	jr	l_player_kill_00109
1657  0583              l_player_kill_00105:
1658  0583  01 07 00    	ld	bc,_state_a+7
1659  0586  0A          	ld	a, (bc)
1660  0587  F6 10       	or	a,0x10
1661  0589  E6 F7       	and	a,0xf7
1662  058B  02          	ld	(bc),a
1663  058C              l_player_kill_00109:
1664  058C  C9          	ret
1665  058D              	SECTION code_compiler
1666  058D              ;	---------------------------------
1667  058D              ; Function player_check_stairs_vertical
1668  058D              ; ---------------------------------
1669  058D              _player_check_stairs_vertical:
1670  058D  CD 00 00    	call	___sdcc_enter_ix
1671  0590  3B          	dec	sp
1672  0591  21 07 00    	ld	hl,+(_col + 0x0007)
1673  0594  4E          	ld	c, (hl)
1674  0595  CB 41       	bit	0, c
1675  0597  20 2F       	jr	NZ,l_player_check_stairs_vertical_00102
1676  0599  3A 07 00    	ld	a,(_lin + 0x0007)
1677  059C  DD 86 04    	add	a,(ix+4)
1678  059F  47          	ld	b, a
1679  05A0  79          	ld	a, c
1680  05A1  48          	ld	c,b
1681  05A2  47          	ld	b,a
1682  05A3  C5          	push	bc
1683  05A4  CD 00 00    	call	_spr_calc_index
1684  05A7  F1          	pop	af
1685  05A8  7D          	ld	a,l
1686  05A9  32 00 00    	ld	(_sprite_curr_index),a
1687  05AC  4F          	ld	c,a
1688  05AD  06 00       	ld	b,0x00
1689  05AF  21 00 00    	ld	hl,_scr_map
1690  05B2  09          	add	hl,bc
1691  05B3  7E          	ld	a,(hl)
1692  05B4  4F          	ld	c,a
1693  05B5  D6 44       	sub	a,0x44
1694  05B7  38 05       	jr	C,l_player_check_stairs_vertical_00110
1695  05B9  3E 47       	ld	a,0x47
1696  05BB  91          	sub	a, c
1697  05BC  30 04       	jr	NC,l_player_check_stairs_vertical_00111
1698  05BE              l_player_check_stairs_vertical_00110:
1699  05BE  1E 00       	ld	e,0x00
1700  05C0  18 02       	jr	l_player_check_stairs_vertical_00112
1701  05C2              l_player_check_stairs_vertical_00111:
1702  05C2  1E 01       	ld	e,0x01
1703  05C4              l_player_check_stairs_vertical_00112:
1704  05C4  0E 00       	ld	c,0x00
1705  05C6  18 57       	jr	l_player_check_stairs_vertical_00103
1706  05C8              l_player_check_stairs_vertical_00102:
1707  05C8  79          	ld	a, c
1708  05C9  DD 96 04    	sub	a,(ix+4)
1709  05CC  57          	ld	d, a
1710  05CD  01 07 00    	ld	bc,_lin+7
1711  05D0  0A          	ld	a, (bc)
1712  05D1  DD 86 04    	add	a,(ix+4)
1713  05D4  C5          	push	bc
1714  05D5  5F          	ld	e,a
1715  05D6  D5          	push	de
1716  05D7  CD 00 00    	call	_spr_calc_index
1717  05DA  F1          	pop	af
1718  05DB  C1          	pop	bc
1719  05DC  7D          	ld	a,l
1720  05DD  32 00 00    	ld	(_sprite_curr_index),a
1721  05E0  5F          	ld	e,a
1722  05E1  16 00       	ld	d,0x00
1723  05E3  21 00 00    	ld	hl,_scr_map
1724  05E6  19          	add	hl,de
1725  05E7  7E          	ld	a,(hl)
1726  05E8  5F          	ld	e,a
1727  05E9  D6 44       	sub	a,0x44
1728  05EB  38 05       	jr	C,l_player_check_stairs_vertical_00113
1729  05ED  3E 47       	ld	a,0x47
1730  05EF  93          	sub	a, e
1731  05F0  30 04       	jr	NC,l_player_check_stairs_vertical_00114
1732  05F2              l_player_check_stairs_vertical_00113:
1733  05F2  1E 00       	ld	e,0x00
1734  05F4  18 02       	jr	l_player_check_stairs_vertical_00115
1735  05F6              l_player_check_stairs_vertical_00114:
1736  05F6  1E 01       	ld	e,0x01
1737  05F8              l_player_check_stairs_vertical_00115:
1738  05F8  3A 07 00    	ld	a,(_col + 0x0007)
1739  05FB  DD 96 04    	sub	a,(ix+4)
1740  05FE  57          	ld	d, a
1741  05FF  0A          	ld	a, (bc)
1742  0600  DD 86 04    	add	a,(ix+4)
1743  0603  D5          	push	de
1744  0604  5F          	ld	e,a
1745  0605  D5          	push	de
1746  0606  CD 00 00    	call	_spr_calc_index
1747  0609  F1          	pop	af
1748  060A  D1          	pop	de
1749  060B  7D          	ld	a,l
1750  060C  32 00 00    	ld	(_sprite_curr_index),a
1751  060F  7B          	ld	a, e
1752  0610  D6 44       	sub	a,0x44
1753  0612  38 05       	jr	C,l_player_check_stairs_vertical_00116
1754  0614  3E 47       	ld	a,0x47
1755  0616  93          	sub	a, e
1756  0617  30 04       	jr	NC,l_player_check_stairs_vertical_00117
1757  0619              l_player_check_stairs_vertical_00116:
1758  0619  0E 00       	ld	c,0x00
1759  061B  18 02       	jr	l_player_check_stairs_vertical_00118
1760  061D              l_player_check_stairs_vertical_00117:
1761  061D  0E 01       	ld	c,0x01
1762  061F              l_player_check_stairs_vertical_00118:
1763  061F              l_player_check_stairs_vertical_00103:
1764  061F  7B          	ld	a, e
1765  0620  B7          	or	a,a
1766  0621  20 03       	jr	NZ,l_player_check_stairs_vertical_00104
1767  0623  B1          	or	a,c
1768  0624  28 07       	jr	Z,l_player_check_stairs_vertical_00105
1769  0626              l_player_check_stairs_vertical_00104:
1770  0626  21 00 00    	ld	hl,_player_onstair
1771  0629  36 01       	ld	(hl),0x01
1772  062B  18 05       	jr	l_player_check_stairs_vertical_00108
1773  062D              l_player_check_stairs_vertical_00105:
1774  062D  21 00 00    	ld	hl,_player_onstair
1775  0630  36 00       	ld	(hl),0x00
1776  0632              l_player_check_stairs_vertical_00108:
1777  0632  33          	inc	sp
1778  0633  DD E1       	pop	ix
1779  0635  C9          	ret
1780  0636              	SECTION code_compiler
1781  0636              ;	---------------------------------
1782  0636              ; Function player_check_stairs
1783  0636              ; ---------------------------------
1784  0636              _player_check_stairs:
1785  0636  CD 00 00    	call	___sdcc_enter_ix
1786  0639  3B          	dec	sp
1787  063A  5D          	ld	e, l
1788  063B  3A 07 00    	ld	a,(_col + 0x0007)
1789  063E  83          	add	a, e
1790  063F  4F          	ld	c, a
1791  0640  21 07 00    	ld	hl,+(_lin + 0x0007)
1792  0643  46          	ld	b, (hl)
1793  0644  D5          	push	de
1794  0645  79          	ld	a, c
1795  0646  48          	ld	c,b
1796  0647  47          	ld	b,a
1797  0648  C5          	push	bc
1798  0649  CD 00 00    	call	_spr_calc_index
1799  064C  F1          	pop	af
1800  064D  D1          	pop	de
1801  064E  7D          	ld	a,l
1802  064F  32 00 00    	ld	(_sprite_curr_index),a
1803  0652  4F          	ld	c,a
1804  0653  06 00       	ld	b,0x00
1805  0655  21 00 00    	ld	hl,_scr_map
1806  0658  09          	add	hl,bc
1807  0659  7E          	ld	a,(hl)
1808  065A  4F          	ld	c,a
1809  065B  D6 44       	sub	a,0x44
1810  065D  38 05       	jr	C,l_player_check_stairs_00111
1811  065F  3E 47       	ld	a,0x47
1812  0661  91          	sub	a, c
1813  0662  30 04       	jr	NC,l_player_check_stairs_00112
1814  0664              l_player_check_stairs_00111:
1815  0664  0E 00       	ld	c,0x00
1816  0666  18 02       	jr	l_player_check_stairs_00113
1817  0668              l_player_check_stairs_00112:
1818  0668  0E 01       	ld	c,0x01
1819  066A              l_player_check_stairs_00113:
1820  066A  3A 07 00    	ld	a,(_col + 0x0007)
1821  066D  83          	add	a, e
1822  066E  57          	ld	d, a
1823  066F  3A 07 00    	ld	a,(_lin + 0x0007)
1824  0672  C6 0F       	add	a,0x0f
1825  0674  47          	ld	b, a
1826  0675  C5          	push	bc
1827  0676  58          	ld	e,b
1828  0677  D5          	push	de
1829  0678  CD 00 00    	call	_spr_calc_index
1830  067B  F1          	pop	af
1831  067C  C1          	pop	bc
1832  067D  7D          	ld	a,l
1833  067E  32 00 00    	ld	(_sprite_curr_index),a
1834  0681  5F          	ld	e,a
1835  0682  16 00       	ld	d,0x00
1836  0684  21 00 00    	ld	hl,_scr_map
1837  0687  19          	add	hl,de
1838  0688  7E          	ld	a,(hl)
1839  0689  47          	ld	b,a
1840  068A  D6 44       	sub	a,0x44
1841  068C  38 05       	jr	C,l_player_check_stairs_00114
1842  068E  3E 47       	ld	a,0x47
1843  0690  90          	sub	a, b
1844  0691  30 04       	jr	NC,l_player_check_stairs_00115
1845  0693              l_player_check_stairs_00114:
1846  0693  06 00       	ld	b,0x00
1847  0695  18 02       	jr	l_player_check_stairs_00116
1848  0697              l_player_check_stairs_00115:
1849  0697  06 01       	ld	b,0x01
1850  0699              l_player_check_stairs_00116:
1851  0699  79          	ld	a, c
1852  069A  B7          	or	a,a
1853  069B  20 03       	jr	NZ,l_player_check_stairs_00105
1854  069D  B0          	or	a,b
1855  069E  28 13       	jr	Z,l_player_check_stairs_00106
1856  06A0              l_player_check_stairs_00105:
1857  06A0  21 00 00    	ld	hl,_player_onstair
1858  06A3  7E          	ld	a, (hl)
1859  06A4  B7          	or	a, a
1860  06A5  20 1D       	jr	NZ,l_player_check_stairs_00109
1861  06A7  36 01       	ld	(hl),0x01
1862  06A9  21 72 00    	ld	hl,0x0072
1863  06AC  E5          	push	hl
1864  06AD  CD C8 06    	call	_player_tile
1865  06B0  F1          	pop	af
1866  06B1  18 11       	jr	l_player_check_stairs_00109
1867  06B3              l_player_check_stairs_00106:
1868  06B3  21 00 00    	ld	hl,_player_onstair
1869  06B6  7E          	ld	a, (hl)
1870  06B7  B7          	or	a, a
1871  06B8  28 0A       	jr	Z,l_player_check_stairs_00109
1872  06BA  36 00       	ld	(hl),0x00
1873  06BC  21 60 08    	ld	hl,0x0860
1874  06BF  E5          	push	hl
1875  06C0  CD C8 06    	call	_player_tile
1876  06C3  F1          	pop	af
1877  06C4              l_player_check_stairs_00109:
1878  06C4  33          	inc	sp
1879  06C5  DD E1       	pop	ix
1880  06C7  C9          	ret
1881  06C8              	SECTION code_compiler
1882  06C8              ;	---------------------------------
1883  06C8              ; Function player_tile
1884  06C8              ; ---------------------------------
1885  06C8              _player_tile:
1886  06C8  CD 00 00    	call	___sdcc_enter_ix
1887  06CB  DD 7E 05    	ld	a,(ix+5)
1888  06CE  F5          	push	af
1889  06CF  33          	inc	sp
1890  06D0  2A FF FF    	ld	hl,(_sprite-1)
1891  06D3  DD 6E 04    	ld	l,(ix+4)
1892  06D6  E5          	push	hl
1893  06D7  CD 00 00    	call	_spr_tile_dir
1894  06DA  F1          	pop	af
1895  06DB  33          	inc	sp
1896  06DC  7D          	ld	a,l
1897  06DD  32 07 00    	ld	((_tile + 0x0007)),a
1898  06E0  DD E1       	pop	ix
1899  06E2  C9          	ret
1900  06E3              	SECTION code_compiler
1901  06E3              ;	---------------------------------
1902  06E3              ; Function player_check_map
1903  06E3              ; ---------------------------------
1904  06E3              _player_check_map:
1905  06E3  21 07 00    	ld	hl,+(_col + 0x0007)
1906  06E6  46          	ld	b, (hl)
1907  06E7  21 07 00    	ld	hl,+(_lin + 0x0007)
1908  06EA  4E          	ld	c, (hl)
1909  06EB  C5          	push	bc
1910  06EC  CD 00 00    	call	_spr_calc_index
1911  06EF  F1          	pop	af
1912  06F0  7D          	ld	a,l
1913  06F1  32 00 00    	ld	(_sprite_curr_index),a
1914  06F4  21 07 00    	ld	hl,+(_col + 0x0007)
1915  06F7  4E          	ld	c, (hl)
1916  06F8  3A 07 00    	ld	a,(_lin + 0x0007)
1917  06FB  E6 0F       	and	a,0x0f
1918  06FD  CB 41       	bit	0, c
1919  06FF  20 17       	jr	NZ,l_player_check_map_00108
1920  0701  B7          	or	a, a
1921  0702  20 05       	jr	NZ,l_player_check_map_00102
1922  0704  CD 43 07    	call	_player_pick_item
1923  0707  18 39       	jr	l_player_check_map_00110
1924  0709              l_player_check_map_00102:
1925  0709  CD 43 07    	call	_player_pick_item
1926  070C  21 00 00    	ld	hl,_sprite_curr_index
1927  070F  7E          	ld	a, (hl)
1928  0710  C6 10       	add	a,0x10
1929  0712  77          	ld	(hl), a
1930  0713  CD 43 07    	call	_player_pick_item
1931  0716  18 2A       	jr	l_player_check_map_00110
1932  0718              l_player_check_map_00108:
1933  0718  B7          	or	a, a
1934  0719  20 0C       	jr	NZ,l_player_check_map_00105
1935  071B  CD 43 07    	call	_player_pick_item
1936  071E  21 00 00    	ld	hl,_sprite_curr_index
1937  0721  34          	inc	(hl)
1938  0722  CD 43 07    	call	_player_pick_item
1939  0725  18 1B       	jr	l_player_check_map_00110
1940  0727              l_player_check_map_00105:
1941  0727  CD 43 07    	call	_player_pick_item
1942  072A  21 00 00    	ld	hl,_sprite_curr_index
1943  072D  34          	inc	(hl)
1944  072E  CD 43 07    	call	_player_pick_item
1945  0731  21 00 00    	ld	hl,_sprite_curr_index
1946  0734  7E          	ld	a, (hl)
1947  0735  C6 0F       	add	a,0x0f
1948  0737  77          	ld	(hl), a
1949  0738  CD 43 07    	call	_player_pick_item
1950  073B  21 00 00    	ld	hl,_sprite_curr_index
1951  073E  34          	inc	(hl)
1952  073F  CD 43 07    	call	_player_pick_item
1953  0742              l_player_check_map_00110:
1954  0742  C9          	ret
1955  0743              	SECTION code_compiler
1956  0743              ;	---------------------------------
1957  0743              ; Function player_pick_item
1958  0743              ; ---------------------------------
1959  0743              _player_pick_item:
1960  0743  CD 00 00    	call	___sdcc_enter_ix
1961  0746  3B          	dec	sp
1962  0747  2A 00 00    	ld	hl,(_sprite_curr_index)
1963  074A  26 00       	ld	h,0x00
1964  074C  01 00 00    	ld	bc,_scr_map
1965  074F  09          	add	hl,bc
1966  0750  7E          	ld	a,(hl)
1967  0751  DD 77 FF    	ld	(ix-1),a
1968  0754  D6 24       	sub	a,0x24
1969  0756  DA D2 08    	jp	C, l_player_pick_item_00131
1970  0759  3E 2F       	ld	a,0x2f
1971  075B  DD 96 FF    	sub	a,(ix-1)
1972  075E  DA D2 08    	jp	C, l_player_pick_item_00131
1973  0761  CD 00 00    	call	_ay_reset
1974  0764  21 00 00    	ld	hl,_ay_effect_10
1975  0767  CD 00 00    	call	_ay_fx_play
1976  076A  CD 00 00    	call	_sound_coin
1977  076D  2A 00 00    	ld	hl,(_sprite_curr_index)
1978  0770  26 00       	ld	h,0x00
1979  0772  01 00 00    	ld	bc,_scr_map
1980  0775  09          	add	hl,bc
1981  0776  3A 00 00    	ld	a,(_sprite_curr_index)
1982  0779  5F          	ld	e,a
1983  077A  16 00       	ld	d,0x00
1984  077C  E5          	push	hl
1985  077D  D5          	push	de
1986  077E  CD 00 00    	call	_game_match_back
1987  0781  F1          	pop	af
1988  0782  C1          	pop	bc
1989  0783  7D          	ld	a,l
1990  0784  02          	ld	(bc), a
1991  0785  3A 00 00    	ld	a,(_sprite_curr_index)
1992  0788  4F          	ld	c,a
1993  0789  06 00       	ld	b,0x00
1994  078B  C5          	push	bc
1995  078C  CD 00 00    	call	_game_obj_set
1996  078F  F1          	pop	af
1997  0790  3A 00 00    	ld	a,(_sprite_curr_index)
1998  0793  07          	rlca
1999  0794  07          	rlca
2000  0795  07          	rlca
2001  0796  07          	rlca
2002  0797  E6 0F       	and	a,0x0f
2003  0799  07          	rlca
2004  079A  07          	rlca
2005  079B  07          	rlca
2006  079C  07          	rlca
2007  079D  E6 F0       	and	a,0xf0
2008  079F  32 00 00    	ld	(_s_lin1),a
2009  07A2  3A 00 00    	ld	a,(_sprite_curr_index)
2010  07A5  E6 0F       	and	a,0x0f
2011  07A7  87          	add	a, a
2012  07A8  32 00 00    	ld	(_s_col1),a
2013  07AB  21 00 00    	ld	hl,0x0000
2014  07AE  E5          	push	hl
2015  07AF  21 84 03    	ld	hl,0x0384
2016  07B2  E5          	push	hl
2017  07B3  F5          	push	af
2018  07B4  33          	inc	sp
2019  07B5  3A 00 00    	ld	a,(_s_lin1)
2020  07B8  F5          	push	af
2021  07B9  33          	inc	sp
2022  07BA  CD 00 00    	call	_spr_add_anim
2023  07BD  F1          	pop	af
2024  07BE  F1          	pop	af
2025  07BF  F1          	pop	af
2026  07C0  DD 7E FF    	ld	a,(ix-1)
2027  07C3  D6 24       	sub	a,0x24
2028  07C5  DA D2 08    	jp	C, l_player_pick_item_00131
2029  07C8  3E 2F       	ld	a,0x2f
2030  07CA  DD 96 FF    	sub	a,(ix-1)
2031  07CD  DA D2 08    	jp	C, l_player_pick_item_00131
2032  07D0  DD 7E FF    	ld	a,(ix-1)
2033  07D3  C6 DC       	add	a,0xdc
2034  07D5  4F          	ld	c, a
2035  07D6  06 00       	ld	b,0x00
2036  07D8  21 DF 07    	ld	hl,l_player_pick_item_00177
2037  07DB  09          	add	hl, bc
2038  07DC  09          	add	hl, bc
2039  07DD  09          	add	hl, bc
2040  07DE  E9          	jp	(hl)
2041  07DF              l_player_pick_item_00177:
2042  07DF  C3 03 08    	jp	l_player_pick_item_00101
2043  07E2  C3 0E 08    	jp	l_player_pick_item_00102
2044  07E5  C3 19 08    	jp	l_player_pick_item_00103
2045  07E8  C3 24 08    	jp	l_player_pick_item_00104
2046  07EB  C3 2F 08    	jp	l_player_pick_item_00105
2047  07EE  C3 56 08    	jp	l_player_pick_item_00109
2048  07F1  C3 6B 08    	jp	l_player_pick_item_00112
2049  07F4  C3 80 08    	jp	l_player_pick_item_00115
2050  07F7  C3 95 08    	jp	l_player_pick_item_00118
2051  07FA  C3 AA 08    	jp	l_player_pick_item_00121
2052  07FD  C3 BF 08    	jp	l_player_pick_item_00124
2053  0800  C3 4D 08    	jp	l_player_pick_item_00108
2054  0803              l_player_pick_item_00101:
2055  0803  21 00 00    	ld	hl,_player_keys
2056  0806  36 01       	ld	(hl),0x01
2057  0808  CD 00 00    	call	_game_update_stats
2058  080B  C3 D2 08    	jp	l_player_pick_item_00131
2059  080E              l_player_pick_item_00102:
2060  080E  21 01 00    	ld	hl, +(_player_keys + 0x0001)
2061  0811  36 01       	ld	(hl),0x01
2062  0813  CD 00 00    	call	_game_update_stats
2063  0816  C3 D2 08    	jp	l_player_pick_item_00131
2064  0819              l_player_pick_item_00103:
2065  0819  21 02 00    	ld	hl, +(_player_keys + 0x0002)
2066  081C  36 01       	ld	(hl),0x01
2067  081E  CD 00 00    	call	_game_update_stats
2068  0821  C3 D2 08    	jp	l_player_pick_item_00131
2069  0824              l_player_pick_item_00104:
2070  0824  21 03 00    	ld	hl, +(_player_keys + 0x0003)
2071  0827  36 01       	ld	(hl),0x01
2072  0829  CD 00 00    	call	_game_update_stats
2073  082C  C3 D2 08    	jp	l_player_pick_item_00131
2074  082F              l_player_pick_item_00105:
2075  082F  21 01 00    	ld	hl,0x0001
2076  0832  CD A6 0B    	call	_player_score_add
2077  0835  21 00 00    	ld	hl,_player_coins
2078  0838  7E          	ld	a,(hl)
2079  0839  3C          	inc	a
2080  083A  77          	ld	(hl),a
2081  083B  D6 64       	sub	a,0x64
2082  083D  20 08       	jr	NZ,l_player_pick_item_00107
2083  083F  CD FA 04    	call	_player_1up
2084  0842  21 00 00    	ld	hl,_player_coins
2085  0845  36 00       	ld	(hl),0x00
2086  0847              l_player_pick_item_00107:
2087  0847  CD 00 00    	call	_game_update_stats
2088  084A  C3 D2 08    	jp	l_player_pick_item_00131
2089  084D              l_player_pick_item_00108:
2090  084D  21 0A 00    	ld	hl,0x000a
2091  0850  CD A6 0B    	call	_player_score_add
2092  0853  C3 D2 08    	jp	l_player_pick_item_00131
2093  0856              l_player_pick_item_00109:
2094  0856  21 00 00    	ld	hl,_player_str
2095  0859  34          	inc	(hl)
2096  085A  21 00 00    	ld	hl,_player_max_vita
2097  085D  7E          	ld	a, (hl)
2098  085E  D6 C8       	sub	a,0xc8
2099  0860  30 70       	jr	NC,l_player_pick_item_00131
2100  0862  7E          	ld	a, (hl)
2101  0863  C6 0A       	add	a,0x0a
2102  0865  77          	ld	(hl), a
2103  0866  CD 00 00    	call	_game_update_stats
2104  0869  18 67       	jr	l_player_pick_item_00131
2105  086B              l_player_pick_item_00112:
2106  086B  21 00 00    	ld	hl,_player_str
2107  086E  34          	inc	(hl)
2108  086F  21 00 00    	ld	hl,_player_max_vita
2109  0872  7E          	ld	a, (hl)
2110  0873  D6 C8       	sub	a,0xc8
2111  0875  30 5B       	jr	NC,l_player_pick_item_00131
2112  0877  7E          	ld	a, (hl)
2113  0878  C6 0A       	add	a,0x0a
2114  087A  77          	ld	(hl), a
2115  087B  CD 00 00    	call	_game_update_stats
2116  087E  18 52       	jr	l_player_pick_item_00131
2117  0880              l_player_pick_item_00115:
2118  0880  21 00 00    	ld	hl,_player_str
2119  0883  34          	inc	(hl)
2120  0884  21 00 00    	ld	hl,_player_max_vita
2121  0887  7E          	ld	a, (hl)
2122  0888  D6 C8       	sub	a,0xc8
2123  088A  30 46       	jr	NC,l_player_pick_item_00131
2124  088C  7E          	ld	a, (hl)
2125  088D  C6 0A       	add	a,0x0a
2126  088F  77          	ld	(hl), a
2127  0890  CD 00 00    	call	_game_update_stats
2128  0893  18 3D       	jr	l_player_pick_item_00131
2129  0895              l_player_pick_item_00118:
2130  0895  21 00 00    	ld	hl,_player_int
2131  0898  34          	inc	(hl)
2132  0899  21 00 00    	ld	hl,_player_max_mana
2133  089C  7E          	ld	a, (hl)
2134  089D  D6 C8       	sub	a,0xc8
2135  089F  30 31       	jr	NC,l_player_pick_item_00131
2136  08A1  7E          	ld	a, (hl)
2137  08A2  C6 0A       	add	a,0x0a
2138  08A4  77          	ld	(hl), a
2139  08A5  CD 00 00    	call	_game_update_stats
2140  08A8  18 28       	jr	l_player_pick_item_00131
2141  08AA              l_player_pick_item_00121:
2142  08AA  21 00 00    	ld	hl,_player_int
2143  08AD  34          	inc	(hl)
2144  08AE  21 00 00    	ld	hl,_player_max_mana
2145  08B1  7E          	ld	a, (hl)
2146  08B2  D6 C8       	sub	a,0xc8
2147  08B4  30 1C       	jr	NC,l_player_pick_item_00131
2148  08B6  7E          	ld	a, (hl)
2149  08B7  C6 0A       	add	a,0x0a
2150  08B9  77          	ld	(hl), a
2151  08BA  CD 00 00    	call	_game_update_stats
2152  08BD  18 13       	jr	l_player_pick_item_00131
2153  08BF              l_player_pick_item_00124:
2154  08BF  21 00 00    	ld	hl,_player_int
2155  08C2  34          	inc	(hl)
2156  08C3  21 00 00    	ld	hl,_player_max_mana
2157  08C6  7E          	ld	a, (hl)
2158  08C7  D6 C8       	sub	a,0xc8
2159  08C9  30 07       	jr	NC,l_player_pick_item_00131
2160  08CB  7E          	ld	a, (hl)
2161  08CC  C6 0A       	add	a,0x0a
2162  08CE  77          	ld	(hl), a
2163  08CF  CD 00 00    	call	_game_update_stats
2164  08D2              l_player_pick_item_00131:
2165  08D2  33          	inc	sp
2166  08D3  DD E1       	pop	ix
2167  08D5  C9          	ret
2168  08D6              	SECTION code_compiler
2169  08D6              ;	---------------------------------
2170  08D6              ; Function player_hit_platform
2171  08D6              ; ---------------------------------
2172  08D6              _player_hit_platform:
2173  08D6  CD 00 00    	call	___sdcc_enter_ix
2174  08D9  F5          	push	af
2175  08DA  3A 00 00    	ld	a,(_player_hit_lin)
2176  08DD  B7          	or	a, a
2177  08DE  C2 71 0B    	jp	NZ, l_player_hit_platform_00145
2178  08E1  21 07 00    	ld	hl,+(_lin + 0x0007)
2179  08E4  4E          	ld	c, (hl)
2180  08E5  3E 10       	ld	a,0x10
2181  08E7  91          	sub	a, c
2182  08E8  D2 71 0B    	jp	NC, l_player_hit_platform_00145
2183  08EB  01 00 00    	ld	bc,_scr_map
2184  08EE  2A 00 00    	ld	hl,(_index1)
2185  08F1  09          	add	hl,bc
2186  08F2  7E          	ld	a,(hl)
2187  08F3  D6 45       	sub	a,0x45
2188  08F5  DA 71 0B    	jp	C, l_player_hit_platform_00145
2189  08F8  2A 00 00    	ld	hl,(_curr_time)
2190  08FB  22 0E 00    	ld	(_spr_timer + 0x000e),hl
2191  08FE  2A 07 00    	ld	hl,(_lin + 0x0007)
2192  0901  26 00       	ld	h,0x00
2193  0903  01 F8 FF    	ld	bc,0xfff8
2194  0906  09          	add	hl,bc
2195  0907  EB          	ex	de,hl
2196  0908  06 04       	ld	b,0x04
2197  090A              l_player_hit_platform_00250:
2198  090A  CB 2A       	sra	d
2199  090C  CB 1B       	rr	e
2200  090E  10 FA       	djnz	l_player_hit_platform_00250
2201  0910  7B          	ld	a, e
2202  0911  07          	rlca
2203  0912  07          	rlca
2204  0913  07          	rlca
2205  0914  07          	rlca
2206  0915  E6 F0       	and	a,0xf0
2207  0917  C6 08       	add	a,0x08
2208  0919  32 00 00    	ld	(_player_hit_lin),a
2209  091C  21 07 00    	ld	hl,+(_col + 0x0007)
2210  091F  4E          	ld	c, (hl)
2211  0920  CB 41       	bit	0, c
2212  0922  20 06       	jr	NZ,l_player_hit_platform_00111
2213  0924  21 00 00    	ld	hl,_player_hit_col
2214  0927  71          	ld	(hl), c
2215  0928  18 2D       	jr	l_player_hit_platform_00112
2216  092A              l_player_hit_platform_00111:
2217  092A  21 07 00    	ld	hl,+(_state + 0x0007)
2218  092D  5E          	ld	e, (hl)
2219  092E  41          	ld	b, c
2220  092F  04          	inc	b
2221  0930  0D          	dec	c
2222  0931  CB 5B       	bit	3, e
2223  0933  28 12       	jr	Z,l_player_hit_platform_00108
2224  0935  3A 00 00    	ld	a,(_g_player_hit_right)
2225  0938  B7          	or	a, a
2226  0939  28 06       	jr	Z,l_player_hit_platform_00102
2227  093B  21 00 00    	ld	hl,_player_hit_col
2228  093E  70          	ld	(hl), b
2229  093F  18 16       	jr	l_player_hit_platform_00112
2230  0941              l_player_hit_platform_00102:
2231  0941  21 00 00    	ld	hl,_player_hit_col
2232  0944  71          	ld	(hl), c
2233  0945  18 10       	jr	l_player_hit_platform_00112
2234  0947              l_player_hit_platform_00108:
2235  0947  3A 00 00    	ld	a,(_g_player_hit_left)
2236  094A  B7          	or	a, a
2237  094B  28 06       	jr	Z,l_player_hit_platform_00105
2238  094D  21 00 00    	ld	hl,_player_hit_col
2239  0950  71          	ld	(hl), c
2240  0951  18 04       	jr	l_player_hit_platform_00112
2241  0953              l_player_hit_platform_00105:
2242  0953  21 00 00    	ld	hl,_player_hit_col
2243  0956  70          	ld	(hl), b
2244  0957              l_player_hit_platform_00112:
2245  0957  2A 00 00    	ld	hl,(_index1)
2246  095A  01 00 00    	ld	bc,_scr_map
2247  095D  09          	add	hl,bc
2248  095E  7E          	ld	a,(hl)
2249  095F  FE 4D       	cp	a,0x4d
2250  0961  20 45       	jr	NZ,l_player_hit_platform_00114
2251  0963  E5          	push	hl
2252  0964  2A 00 00    	ld	hl,(_index1)
2253  0967  E5          	push	hl
2254  0968  CD 00 00    	call	_game_match_back
2255  096B  F1          	pop	af
2256  096C  C1          	pop	bc
2257  096D  7D          	ld	a,l
2258  096E  02          	ld	(bc), a
2259  096F  2A 00 00    	ld	hl,(_index1)
2260  0972  E5          	push	hl
2261  0973  CD 00 00    	call	_game_obj_set
2262  0976  F1          	pop	af
2263  0977  21 00 00    	ld	hl,_index1
2264  097A  7E          	ld	a, (hl)
2265  097B  E6 0F       	and	a,0x0f
2266  097D  87          	add	a, a
2267  097E  4F          	ld	c, a
2268  097F  23          	inc	hl
2269  0980  56          	ld	d,(hl)
2270  0981  2B          	dec	hl
2271  0982  7E          	ld	a, (hl)
2272  0983  06 04       	ld	b,0x04
2273  0985              l_player_hit_platform_00256:
2274  0985  CB 3A       	srl	d
2275  0987  1F          	rra
2276  0988  10 FB       	djnz	l_player_hit_platform_00256
2277  098A  07          	rlca
2278  098B  07          	rlca
2279  098C  07          	rlca
2280  098D  07          	rlca
2281  098E  E6 F0       	and	a,0xf0
2282  0990  47          	ld	b, a
2283  0991  21 00 00    	ld	hl,0x0000
2284  0994  E5          	push	hl
2285  0995  21 87 03    	ld	hl,0x0387
2286  0998  E5          	push	hl
2287  0999  79          	ld	a, c
2288  099A  48          	ld	c,b
2289  099B  47          	ld	b,a
2290  099C  C5          	push	bc
2291  099D  CD 00 00    	call	_spr_add_anim
2292  09A0  F1          	pop	af
2293  09A1  F1          	pop	af
2294  09A2  F1          	pop	af
2295  09A3  2E 01       	ld	l,0x01
2296  09A5  C3 73 0B    	jp	l_player_hit_platform_00148
2297  09A8              l_player_hit_platform_00114:
2298  09A8  FE 5C       	cp	a,0x5c
2299  09AA  28 05       	jr	Z,l_player_hit_platform_00141
2300  09AC  D6 5D       	sub	a,0x5d
2301  09AE  C2 65 0B    	jp	NZ,l_player_hit_platform_00142
2302  09B1              l_player_hit_platform_00141:
2303  09B1  21 00 00    	ld	hl,_tmp0
2304  09B4  36 00       	ld	(hl),0x00
2305  09B6  3A 00 00    	ld	a,(_game_boss)
2306  09B9  B7          	or	a, a
2307  09BA  28 0B       	jr	Z,l_player_hit_platform_00174
2308  09BC  3A 00 00    	ld	a,(_game_mush_count)
2309  09BF  B7          	or	a, a
2310  09C0  28 05       	jr	Z,l_player_hit_platform_00174
2311  09C2  2E 00       	ld	l,0x00
2312  09C4  C3 73 0B    	jp	l_player_hit_platform_00148
2313  09C7              l_player_hit_platform_00174:
2314  09C7              l_player_hit_platform_00138:
2315  09C7  21 00 00    	ld	hl,_tmp0
2316  09CA  7E          	ld	a, (hl)
2317  09CB  D6 07       	sub	a,0x07
2318  09CD  D2 65 0B    	jp	NC, l_player_hit_platform_00142
2319  09D0  4E          	ld	c,(hl)
2320  09D1  06 00       	ld	b,0x00
2321  09D3  21 00 00    	ld	hl,_mush_index
2322  09D6  09          	add	hl,bc
2323  09D7  4E          	ld	c, (hl)
2324  09D8  06 00       	ld	b,0x00
2325  09DA  2A 00 00    	ld	hl,(_index1)
2326  09DD  AF          	xor	a,a
2327  09DE  ED 42       	sbc	hl,bc
2328  09E0  C2 5E 0B    	jp	NZ,l_player_hit_platform_00137
2329  09E3  3A 07 00    	ld	a,(_lin + 0x0007)
2330  09E6  07          	rlca
2331  09E7  07          	rlca
2332  09E8  07          	rlca
2333  09E9  07          	rlca
2334  09EA  E6 0F       	and	a,0x0f
2335  09EC  07          	rlca
2336  09ED  07          	rlca
2337  09EE  07          	rlca
2338  09EF  07          	rlca
2339  09F0  E6 F0       	and	a,0xf0
2340  09F2  C6 E0       	add	a,0xe0
2341  09F4  32 00 00    	ld	(_s_lin1),a
2342  09F7  3A 07 00    	ld	a,(_col + 0x0007)
2343  09FA  CB 3F       	srl	a
2344  09FC  87          	add	a, a
2345  09FD  32 00 00    	ld	(_s_col1),a
2346  0A00  21 00 00    	ld	hl,_tmp
2347  0A03  36 00       	ld	(hl),0x00
2348  0A05              l_player_hit_platform_00120:
2349  0A05  21 00 00    	ld	hl,_tmp
2350  0A08  7E          	ld	a, (hl)
2351  0A09  D6 07       	sub	a,0x07
2352  0A0B  30 1C       	jr	NC,l_player_hit_platform_00122
2353  0A0D  4E          	ld	c,(hl)
2354  0A0E  06 00       	ld	b,0x00
2355  0A10  21 00 00    	ld	hl,_mush_index
2356  0A13  09          	add	hl,bc
2357  0A14  4E          	ld	c, (hl)
2358  0A15  06 00       	ld	b,0x00
2359  0A17  21 00 00    	ld	hl,_index1
2360  0A1A  7E          	ld	a, (hl)
2361  0A1B  91          	sub	a, c
2362  0A1C  20 05       	jr	NZ,l_player_hit_platform_00262
2363  0A1E  23          	inc	hl
2364  0A1F  7E          	ld	a, (hl)
2365  0A20  90          	sub	a, b
2366  0A21  28 06       	jr	Z,l_player_hit_platform_00122
2367  0A23              l_player_hit_platform_00262:
2368  0A23  21 00 00    	ld	hl,_tmp
2369  0A26  34          	inc	(hl)
2370  0A27  18 DC       	jr	l_player_hit_platform_00120
2371  0A29              l_player_hit_platform_00122:
2372  0A29  2A 00 00    	ld	hl,(_tmp)
2373  0A2C  26 00       	ld	h,0x00
2374  0A2E  01 00 00    	ld	bc,_mush_class
2375  0A31  09          	add	hl,bc
2376  0A32  7E          	ld	a,(hl)
2377  0A33  FE 78       	cp	a,0x78
2378  0A35  28 18       	jr	Z,l_player_hit_platform_00123
2379  0A37  FE 79       	cp	a,0x79
2380  0A39  28 2F       	jr	Z,l_player_hit_platform_00124
2381  0A3B  FE 7A       	cp	a,0x7a
2382  0A3D  28 5F       	jr	Z,l_player_hit_platform_00126
2383  0A3F  FE 7B       	cp	a,0x7b
2384  0A41  28 41       	jr	Z,l_player_hit_platform_00125
2385  0A43  FE 7C       	cp	a,0x7c
2386  0A45  CA D2 0A    	jp	Z,l_player_hit_platform_00128
2387  0A48  D6 7D       	sub	a,0x7d
2388  0A4A  28 6C       	jr	Z,l_player_hit_platform_00127
2389  0A4C  C3 EA 0A    	jp	l_player_hit_platform_00129
2390  0A4F              l_player_hit_platform_00123:
2391  0A4F  2E 02       	ld	l,0x02
2392  0A51  CD 00 00    	call	_zx_border_fastcall
2393  0A54  3A 00 00    	ld	a,(_s_col1)
2394  0A57  21 06 FF    	ld	hl,0xff06
2395  0A5A  E5          	push	hl
2396  0A5B  F5          	push	af
2397  0A5C  33          	inc	sp
2398  0A5D  3A 00 00    	ld	a,(_s_lin1)
2399  0A60  F5          	push	af
2400  0A61  33          	inc	sp
2401  0A62  CD 00 00    	call	_enemy_init
2402  0A65  F1          	pop	af
2403  0A66  F1          	pop	af
2404  0A67  C3 EA 0A    	jp	l_player_hit_platform_00129
2405  0A6A              l_player_hit_platform_00124:
2406  0A6A  2E 02       	ld	l,0x02
2407  0A6C  CD 00 00    	call	_zx_border_fastcall
2408  0A6F  3A 00 00    	ld	a,(_s_col1)
2409  0A72  21 06 01    	ld	hl,0x0106
2410  0A75  E5          	push	hl
2411  0A76  F5          	push	af
2412  0A77  33          	inc	sp
2413  0A78  3A 00 00    	ld	a,(_s_lin1)
2414  0A7B  F5          	push	af
2415  0A7C  33          	inc	sp
2416  0A7D  CD 00 00    	call	_enemy_init
2417  0A80  F1          	pop	af
2418  0A81  F1          	pop	af
2419  0A82  18 66       	jr	l_player_hit_platform_00129
2420  0A84              l_player_hit_platform_00125:
2421  0A84  2E 01       	ld	l,0x01
2422  0A86  CD 00 00    	call	_zx_border_fastcall
2423  0A89  3A 00 00    	ld	a,(_s_col1)
2424  0A8C  21 07 01    	ld	hl,0x0107
2425  0A8F  E5          	push	hl
2426  0A90  F5          	push	af
2427  0A91  33          	inc	sp
2428  0A92  3A 00 00    	ld	a,(_s_lin1)
2429  0A95  F5          	push	af
2430  0A96  33          	inc	sp
2431  0A97  CD 00 00    	call	_enemy_init
2432  0A9A  F1          	pop	af
2433  0A9B  F1          	pop	af
2434  0A9C  18 4C       	jr	l_player_hit_platform_00129
2435  0A9E              l_player_hit_platform_00126:
2436  0A9E  2E 01       	ld	l,0x01
2437  0AA0  CD 00 00    	call	_zx_border_fastcall
2438  0AA3  3A 00 00    	ld	a,(_s_col1)
2439  0AA6  21 07 FF    	ld	hl,0xff07
2440  0AA9  E5          	push	hl
2441  0AAA  F5          	push	af
2442  0AAB  33          	inc	sp
2443  0AAC  3A 00 00    	ld	a,(_s_lin1)
2444  0AAF  F5          	push	af
2445  0AB0  33          	inc	sp
2446  0AB1  CD 00 00    	call	_enemy_init
2447  0AB4  F1          	pop	af
2448  0AB5  F1          	pop	af
2449  0AB6  18 32       	jr	l_player_hit_platform_00129
2450  0AB8              l_player_hit_platform_00127:
2451  0AB8  2E 04       	ld	l,0x04
2452  0ABA  CD 00 00    	call	_zx_border_fastcall
2453  0ABD  3A 00 00    	ld	a,(_s_col1)
2454  0AC0  21 08 01    	ld	hl,0x0108
2455  0AC3  E5          	push	hl
2456  0AC4  F5          	push	af
2457  0AC5  33          	inc	sp
2458  0AC6  3A 00 00    	ld	a,(_s_lin1)
2459  0AC9  F5          	push	af
2460  0ACA  33          	inc	sp
2461  0ACB  CD 00 00    	call	_enemy_init
2462  0ACE  F1          	pop	af
2463  0ACF  F1          	pop	af
2464  0AD0  18 18       	jr	l_player_hit_platform_00129
2465  0AD2              l_player_hit_platform_00128:
2466  0AD2  2E 04       	ld	l,0x04
2467  0AD4  CD 00 00    	call	_zx_border_fastcall
2468  0AD7  3A 00 00    	ld	a,(_s_col1)
2469  0ADA  21 08 FF    	ld	hl,0xff08
2470  0ADD  E5          	push	hl
2471  0ADE  F5          	push	af
2472  0ADF  33          	inc	sp
2473  0AE0  3A 00 00    	ld	a,(_s_lin1)
2474  0AE3  F5          	push	af
2475  0AE4  33          	inc	sp
2476  0AE5  CD 00 00    	call	_enemy_init
2477  0AE8  F1          	pop	af
2478  0AE9  F1          	pop	af
2479  0AEA              l_player_hit_platform_00129:
2480  0AEA  21 00 00    	ld	hl,_game_mush_count
2481  0AED  34          	inc	(hl)
2482  0AEE  3A 00 00    	ld	a,(_game_boss)
2483  0AF1  B7          	or	a, a
2484  0AF2  20 6A       	jr	NZ,l_player_hit_platform_00137
2485  0AF4  3A 00 00    	ld	a,(_index1)
2486  0AF7  C6 F0       	add	a,0xf0
2487  0AF9  32 00 00    	ld	(_index0),a
2488  0AFC  3A 01 00    	ld	a,(_index1 + 1)
2489  0AFF  CE FF       	adc	a,0xff
2490  0B01  21 01 00    	ld	hl,_index0 + 1
2491  0B04  77          	ld	(hl), a
2492  0B05  3E 00       	ld	a, +((_scr_map) & 0xFF)
2493  0B07  2B          	dec	hl
2494  0B08  86          	add	a, (hl)
2495  0B09  4F          	ld	c, a
2496  0B0A  3E 00       	ld	a, +((_scr_map) / 256)
2497  0B0C  23          	inc	hl
2498  0B0D  8E          	adc	a, (hl)
2499  0B0E  47          	ld	b, a
2500  0B0F  C5          	push	bc
2501  0B10  46          	ld	b,(hl)
2502  0B11  2B          	dec	hl
2503  0B12  4E          	ld	c,(hl)
2504  0B13  C5          	push	bc
2505  0B14  CD 00 00    	call	_game_match_back
2506  0B17  F1          	pop	af
2507  0B18  C1          	pop	bc
2508  0B19  7D          	ld	a,l
2509  0B1A  02          	ld	(bc), a
2510  0B1B  3E 00       	ld	a, +((_scr_map) & 0xFF)
2511  0B1D  21 00 00    	ld	hl,_index1
2512  0B20  86          	add	a, (hl)
2513  0B21  DD 77 FE    	ld	(ix-2),a
2514  0B24  3E 00       	ld	a, +((_scr_map) / 256)
2515  0B26  23          	inc	hl
2516  0B27  8E          	adc	a, (hl)
2517  0B28  DD 77 FF    	ld	(ix-1),a
2518  0B2B  E1          	pop	hl
2519  0B2C  7E          	ld	a,(hl)
2520  0B2D  E5          	push	hl
2521  0B2E  FE 5C       	cp	a,0x5c
2522  0B30  28 04       	jr	Z,l_player_hit_platform_00130
2523  0B32  D6 5D       	sub	a,0x5d
2524  0B34  20 06       	jr	NZ,l_player_hit_platform_00131
2525  0B36              l_player_hit_platform_00130:
2526  0B36  E1          	pop	hl
2527  0B37  E5          	push	hl
2528  0B38  36 4F       	ld	(hl),0x4f
2529  0B3A  18 04       	jr	l_player_hit_platform_00132
2530  0B3C              l_player_hit_platform_00131:
2531  0B3C  E1          	pop	hl
2532  0B3D  E5          	push	hl
2533  0B3E  36 54       	ld	(hl),0x54
2534  0B40              l_player_hit_platform_00132:
2535  0B40  2A 00 00    	ld	hl,(_index1)
2536  0B43  01 F0 FF    	ld	bc,0xfff0
2537  0B46  09          	add	hl,bc
2538  0B47  E5          	push	hl
2539  0B48  CD 00 00    	call	_game_obj_set
2540  0B4B  F1          	pop	af
2541  0B4C  3A 00 00    	ld	a,(_s_lin1)
2542  0B4F  C6 10       	add	a,0x10
2543  0B51  4F          	ld	c, a
2544  0B52  3A 00 00    	ld	a, (_s_col1)
2545  0B55  47          	ld	b,a
2546  0B56  C5          	push	bc
2547  0B57  3E 4F       	ld	a,0x4f
2548  0B59  F5          	push	af
2549  0B5A  33          	inc	sp
2550  0B5B  CD 00 00    	call	_NIRVANAP_drawT_callee
2551  0B5E              l_player_hit_platform_00137:
2552  0B5E  21 00 00    	ld	hl,_tmp0
2553  0B61  34          	inc	(hl)
2554  0B62  C3 C7 09    	jp	l_player_hit_platform_00138
2555  0B65              l_player_hit_platform_00142:
2556  0B65  2E 01       	ld	l,0x01
2557  0B67  CD 00 00    	call	_spr_brick_anim
2558  0B6A  CD 00 00    	call	_sound_hit_brick
2559  0B6D  2E 01       	ld	l,0x01
2560  0B6F  18 02       	jr	l_player_hit_platform_00148
2561  0B71              l_player_hit_platform_00145:
2562  0B71  2E 00       	ld	l,0x00
2563  0B73              l_player_hit_platform_00148:
2564  0B73  F1          	pop	af
2565  0B74  DD E1       	pop	ix
2566  0B76  C9          	ret
2567  0B77              	SECTION code_compiler
2568  0B77              ;	---------------------------------
2569  0B77              ; Function player_hit_platform_clear
2570  0B77              ; ---------------------------------
2571  0B77              _player_hit_platform_clear:
2572  0B77  01 04 00    	ld	bc,0x0004
2573  0B7A  C5          	push	bc
2574  0B7B  2A 0E 00    	ld	hl,(_spr_timer + 0x000e)
2575  0B7E  E5          	push	hl
2576  0B7F  CD 00 00    	call	_game_check_time
2577  0B82  F1          	pop	af
2578  0B83  F1          	pop	af
2579  0B84  7D          	ld	a, l
2580  0B85  B7          	or	a, a
2581  0B86  C8          	ret	Z
2582  0B87  2A FF FF    	ld	hl,(_player_hit_col - 1)
2583  0B8A  3A 00 00    	ld	a,(_player_hit_lin)
2584  0B8D  6F          	ld	l,a
2585  0B8E  E5          	push	hl
2586  0B8F  CD 00 00    	call	_spr_calc_index
2587  0B92  F1          	pop	af
2588  0B93  22 00 00    	ld	(_index1),hl
2589  0B96  2E 00       	ld	l,0x00
2590  0B98  CD 00 00    	call	_spr_brick_anim
2591  0B9B  21 00 00    	ld	hl,_player_hit_lin
2592  0B9E  36 00       	ld	(hl),0x00
2593  0BA0  21 00 00    	ld	hl,_player_hit_col
2594  0BA3  36 00       	ld	(hl),0x00
2595  0BA5  C9          	ret
2596  0BA6              	SECTION code_compiler
2597  0BA6              ;	---------------------------------
2598  0BA6              ; Function player_score_add
2599  0BA6              ; ---------------------------------
2600  0BA6              _player_score_add:
2601  0BA6  ED 4B 00 00 	ld	bc,(_player_score)
2602  0BAA  09          	add	hl,bc
2603  0BAB  22 00 00    	ld	(_player_score),hl
2604  0BAE  21 00 00    	ld	hl,_player_lvl
2605  0BB1  7E          	ld	a, (hl)
2606  0BB2  D6 14       	sub	a,0x14
2607  0BB4  30 3C       	jr	NC,l_player_score_add_00104
2608  0BB6  01 00 00    	ld	bc,_player_lvl_table+0
2609  0BB9  6E          	ld	l,(hl)
2610  0BBA  26 00       	ld	h,0x00
2611  0BBC  29          	add	hl, hl
2612  0BBD  09          	add	hl, bc
2613  0BBE  4E          	ld	c, (hl)
2614  0BBF  23          	inc	hl
2615  0BC0  46          	ld	b, (hl)
2616  0BC1  21 00 00    	ld	hl,_player_score
2617  0BC4  7E          	ld	a, (hl)
2618  0BC5  91          	sub	a, c
2619  0BC6  23          	inc	hl
2620  0BC7  7E          	ld	a, (hl)
2621  0BC8  98          	sbc	a, b
2622  0BC9  38 27       	jr	C,l_player_score_add_00104
2623  0BCB  21 00 00    	ld	hl,_player_lvl
2624  0BCE  34          	inc	(hl)
2625  0BCF  21 06 00    	ld	hl,___str_1
2626  0BD2  E5          	push	hl
2627  0BD3  21 0C 0C    	ld	hl,0x0c0c
2628  0BD6  E5          	push	hl
2629  0BD7  CD 00 00    	call	_zx_print_str
2630  0BDA  AF          	xor	a, a
2631  0BDB  F5          	push	af
2632  0BDC  33          	inc	sp
2633  0BDD  21 19 00    	ld	hl,0x0019
2634  0BE0  E5          	push	hl
2635  0BE1  21 0C 15    	ld	hl,0x150c
2636  0BE4  E5          	push	hl
2637  0BE5  3E 0C       	ld	a,0x0c
2638  0BE7  F5          	push	af
2639  0BE8  33          	inc	sp
2640  0BE9  CD 00 00    	call	_game_colour_message
2641  0BEC  F1          	pop	af
2642  0BED  F1          	pop	af
2643  0BEE  F1          	pop	af
2644  0BEF  CD 00 00    	call	_game_update_stats
2645  0BF2              l_player_score_add_00104:
2646  0BF2  3A 00 00    	ld	a,(_game_score_top)
2647  0BF5  21 00 00    	ld	hl,_player_score
2648  0BF8  96          	sub	a, (hl)
2649  0BF9  3A 01 00    	ld	a,(_game_score_top + 1)
2650  0BFC  23          	inc	hl
2651  0BFD  9E          	sbc	a, (hl)
2652  0BFE  30 06       	jr	NC,l_player_score_add_00106
2653  0C00  2A 00 00    	ld	hl,(_player_score)
2654  0C03  22 00 00    	ld	(_game_score_top),hl
2655  0C06              l_player_score_add_00106:
2656  0C06  CD 00 00    	call	_game_print_score
2657  0C09  C9          	ret
2658  0C0A              	SECTION rodata_compiler
2659  0006              ___str_1:
2660  0006  4C 45 56 45 4C 20 55 50 21 
                        	DEFM "LEVEL UP!"
2661  000F  00          	DEFB 0x00
2662  0010              	SECTION code_compiler
2663  0C0A              ;	---------------------------------
2664  0C0A              ; Function player_check_floor
2665  0C0A              ; ---------------------------------
2666  0C0A              _player_check_floor:
2667  0C0A  CD 00 00    	call	___sdcc_enter_ix
2668  0C0D  F5          	push	af
2669  0C0E  F5          	push	af
2670  0C0F  F5          	push	af
2671  0C10  11 07 00    	ld	de,_col+7
2672  0C13  1A          	ld	a, (de)
2673  0C14  47          	ld	b, a
2674  0C15  3A 07 00    	ld	a,(_lin + 0x0007)
2675  0C18  C6 10       	add	a,0x10
2676  0C1A  D5          	push	de
2677  0C1B  4F          	ld	c,a
2678  0C1C  C5          	push	bc
2679  0C1D  CD 00 00    	call	_spr_calc_index
2680  0C20  F1          	pop	af
2681  0C21  D1          	pop	de
2682  0C22  DD 75 FC    	ld	(ix-4),l
2683  0C25  DD 74 FD    	ld	(ix-3),h
2684  0C28  01 00 00    	ld	bc,_scr_map+0
2685  0C2B  79          	ld	a, c
2686  0C2C  DD 86 FC    	add	a,(ix-4)
2687  0C2F  DD 77 FE    	ld	(ix-2),a
2688  0C32  78          	ld	a, b
2689  0C33  DD 8E FD    	adc	a,(ix-3)
2690  0C36  DD 6E FE    	ld	l,(ix-2)
2691  0C39  DD 77 FF    	ld	(ix-1),a
2692  0C3C  67          	ld	h,a
2693  0C3D  7E          	ld	a, (hl)
2694  0C3E  DD 77 FB    	ld	(ix-5),a
2695  0C41  DD 6E FC    	ld	l,(ix-4)
2696  0C44  DD 66 FD    	ld	h,(ix-3)
2697  0C47  23          	inc	hl
2698  0C48  09          	add	hl,bc
2699  0C49  3A 00 00    	ld	a,(_s_lin0)
2700  0C4C  D6 90       	sub	a,0x90
2701  0C4E  4D          	ld	c,l
2702  0C4F  44          	ld	b,h
2703  0C50  20 26       	jr	NZ,l_player_check_floor_00108
2704  0C52  3A 00 00    	ld	a,(_map_heigth)
2705  0C55  C5          	push	bc
2706  0C56  F5          	push	af
2707  0C57  33          	inc	sp
2708  0C58  3A 00 00    	ld	a,(_scr_curr)
2709  0C5B  F5          	push	af
2710  0C5C  33          	inc	sp
2711  0C5D  CD 00 00    	call	__divuchar_callee
2712  0C60  C1          	pop	bc
2713  0C61  7D          	ld	a,l
2714  0C62  3C          	inc	a
2715  0C63  32 00 00    	ld	(_tmp1),a
2716  0C66  21 00 00    	ld	hl,_map_heigth
2717  0C69  96          	sub	a, (hl)
2718  0C6A  30 06       	jr	NC,l_player_check_floor_00102
2719  0C6C  DD 36 FB 00 	ld	(ix-5),0x00
2720  0C70  18 14       	jr	l_player_check_floor_00109
2721  0C72              l_player_check_floor_00102:
2722  0C72  DD 36 FB 48 	ld	(ix-5),0x48
2723  0C76  18 0E       	jr	l_player_check_floor_00109
2724  0C78              l_player_check_floor_00108:
2725  0C78  1A          	ld	a, (de)
2726  0C79  0F          	rrca
2727  0C7A  38 06       	jr	C,l_player_check_floor_00105
2728  0C7C  DD 36 FA 00 	ld	(ix-6),0x00
2729  0C80  18 04       	jr	l_player_check_floor_00109
2730  0C82              l_player_check_floor_00105:
2731  0C82  0A          	ld	a, (bc)
2732  0C83  DD 77 FA    	ld	(ix-6),a
2733  0C86              l_player_check_floor_00109:
2734  0C86  DD 7E FB    	ld	a,(ix-5)
2735  0C89  D6 3C       	sub	a,0x3c
2736  0C8B  38 07       	jr	C,l_player_check_floor_00132
2737  0C8D  DD 7E FB    	ld	a,(ix-5)
2738  0C90  D6 60       	sub	a,0x60
2739  0C92  38 32       	jr	C,l_player_check_floor_00128
2740  0C94              l_player_check_floor_00132:
2741  0C94  DD 7E FA    	ld	a,(ix-6)
2742  0C97  D6 3C       	sub	a,0x3c
2743  0C99  38 07       	jr	C,l_player_check_floor_00127
2744  0C9B  DD 7E FA    	ld	a,(ix-6)
2745  0C9E  D6 60       	sub	a,0x60
2746  0CA0  38 24       	jr	C,l_player_check_floor_00128
2747  0CA2              l_player_check_floor_00127:
2748  0CA2  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
2749  0CA5  36 02       	ld	(hl),0x02
2750  0CA7  21 00 00    	ld	hl,_s_state
2751  0CAA  CB CE       	set	1, (hl)
2752  0CAC  2E 00       	ld	l,0x00
2753  0CAE  CD 36 06    	call	_player_check_stairs
2754  0CB1  3A 00 00    	ld	a,(_player_onstair)
2755  0CB4  B7          	or	a, a
2756  0CB5  C2 60 0D    	jp	NZ, l_player_check_floor_00133
2757  0CB8  3A 00 00    	ld	a,(_s_lin0)
2758  0CBB  D6 90       	sub	a,0x90
2759  0CBD  C2 60 0D    	jp	NZ,l_player_check_floor_00133
2760  0CC0  CD 00 00    	call	_spr_page_down
2761  0CC3  C3 60 0D    	jp	l_player_check_floor_00133
2762  0CC6              l_player_check_floor_00128:
2763  0CC6  C5          	push	bc
2764  0CC7  21 10 00    	ld	hl,0x0010
2765  0CCA  E5          	push	hl
2766  0CCB  2A 00 00    	ld	hl,(_player_brick_time)
2767  0CCE  E5          	push	hl
2768  0CCF  CD 00 00    	call	_game_check_time
2769  0CD2  F1          	pop	af
2770  0CD3  F1          	pop	af
2771  0CD4  C1          	pop	bc
2772  0CD5  7D          	ld	a,l
2773  0CD6  B7          	or	a, a
2774  0CD7  CA 60 0D    	jp	Z, l_player_check_floor_00133
2775  0CDA  2A 00 00    	ld	hl,(_curr_time)
2776  0CDD  22 00 00    	ld	(_player_brick_time),hl
2777  0CE0  DD 7E FB    	ld	a,(ix-5)
2778  0CE3  D6 40       	sub	a,0x40
2779  0CE5  20 1A       	jr	NZ,l_player_check_floor_00114
2780  0CE7  C5          	push	bc
2781  0CE8  DD 6E FC    	ld	l,(ix-4)
2782  0CEB  DD 66 FD    	ld	h,(ix-3)
2783  0CEE  E5          	push	hl
2784  0CEF  CD 00 00    	call	_game_match_back
2785  0CF2  F1          	pop	af
2786  0CF3  C1          	pop	bc
2787  0CF4  5D          	ld	e,l
2788  0CF5  DD 6E FE    	ld	l,(ix-2)
2789  0CF8  DD 66 FF    	ld	h,(ix-1)
2790  0CFB  73          	ld	(hl), e
2791  0CFC  C5          	push	bc
2792  0CFD  CD 65 0D    	call	_player_gasta_brick
2793  0D00  C1          	pop	bc
2794  0D01              l_player_check_floor_00114:
2795  0D01  DD 7E FB    	ld	a,(ix-5)
2796  0D04  D6 3F       	sub	a,0x3f
2797  0D06  20 0D       	jr	NZ,l_player_check_floor_00116
2798  0D08  DD 6E FE    	ld	l,(ix-2)
2799  0D0B  DD 66 FF    	ld	h,(ix-1)
2800  0D0E  36 40       	ld	(hl),0x40
2801  0D10  C5          	push	bc
2802  0D11  CD 65 0D    	call	_player_gasta_brick
2803  0D14  C1          	pop	bc
2804  0D15              l_player_check_floor_00116:
2805  0D15  DD 7E FB    	ld	a,(ix-5)
2806  0D18  D6 3E       	sub	a,0x3e
2807  0D1A  20 0D       	jr	NZ,l_player_check_floor_00118
2808  0D1C  DD 6E FE    	ld	l,(ix-2)
2809  0D1F  DD 66 FF    	ld	h,(ix-1)
2810  0D22  36 3F       	ld	(hl),0x3f
2811  0D24  C5          	push	bc
2812  0D25  CD 65 0D    	call	_player_gasta_brick
2813  0D28  C1          	pop	bc
2814  0D29              l_player_check_floor_00118:
2815  0D29  DD 7E FA    	ld	a,(ix-6)
2816  0D2C  D6 40       	sub	a,0x40
2817  0D2E  20 14       	jr	NZ,l_player_check_floor_00120
2818  0D30  C5          	push	bc
2819  0D31  DD 6E FC    	ld	l,(ix-4)
2820  0D34  DD 66 FD    	ld	h,(ix-3)
2821  0D37  E5          	push	hl
2822  0D38  CD 00 00    	call	_game_match_back
2823  0D3B  F1          	pop	af
2824  0D3C  C1          	pop	bc
2825  0D3D  7D          	ld	a,l
2826  0D3E  02          	ld	(bc), a
2827  0D3F  C5          	push	bc
2828  0D40  CD 65 0D    	call	_player_gasta_brick
2829  0D43  C1          	pop	bc
2830  0D44              l_player_check_floor_00120:
2831  0D44  DD 7E FA    	ld	a,(ix-6)
2832  0D47  D6 3F       	sub	a,0x3f
2833  0D49  20 08       	jr	NZ,l_player_check_floor_00122
2834  0D4B  3E 40       	ld	a,0x40
2835  0D4D  02          	ld	(bc), a
2836  0D4E  C5          	push	bc
2837  0D4F  CD 65 0D    	call	_player_gasta_brick
2838  0D52  C1          	pop	bc
2839  0D53              l_player_check_floor_00122:
2840  0D53  DD 7E FA    	ld	a,(ix-6)
2841  0D56  D6 3E       	sub	a,0x3e
2842  0D58  20 06       	jr	NZ,l_player_check_floor_00133
2843  0D5A  3E 3F       	ld	a,0x3f
2844  0D5C  02          	ld	(bc), a
2845  0D5D  CD 65 0D    	call	_player_gasta_brick
2846  0D60              l_player_check_floor_00133:
2847  0D60  DD F9       	ld	sp, ix
2848  0D62  DD E1       	pop	ix
2849  0D64  C9          	ret
2850  0D65              	SECTION code_compiler
2851  0D65              ;	---------------------------------
2852  0D65              ; Function player_gasta_brick
2853  0D65              ; ---------------------------------
2854  0D65              _player_gasta_brick:
2855  0D65  3A 00 00    	ld	a,(_s_lin0)
2856  0D68  32 00 00    	ld	(_s_lin1),a
2857  0D6B  3A 00 00    	ld	a,(_s_col0)
2858  0D6E  32 00 00    	ld	(_s_col1),a
2859  0D71  3A 07 00    	ld	a,(_lin + 0x0007)
2860  0D74  C6 10       	add	a,0x10
2861  0D76  32 00 00    	ld	(_s_lin0),a
2862  0D79  3A 07 00    	ld	a,(_col + 0x0007)
2863  0D7C  32 00 00    	ld	(_s_col0),a
2864  0D7F  CD 00 00    	call	_spr_back_repaint
2865  0D82  3A 00 00    	ld	a,(_s_lin1)
2866  0D85  32 00 00    	ld	(_s_lin0),a
2867  0D88  3A 00 00    	ld	a,(_s_col1)
2868  0D8B  32 00 00    	ld	(_s_col0),a
2869  0D8E  C9          	ret
2870  0D8F              	SECTION code_compiler
2871  0D8F              ;	---------------------------------
2872  0D8F              ; Function player_move_jump
2873  0D8F              ; ---------------------------------
2874  0D8F              _player_move_jump:
2875  0D8F  CD 00 00    	call	___sdcc_enter_ix
2876  0D92  F5          	push	af
2877  0D93  21 00 00    	ld	hl,_game_gravity
2878  0D96  4E          	ld	c, (hl)
2879  0D97  21 00 00    	ld	hl,_player_vel_y
2880  0D9A  7E          	ld	a, (hl)
2881  0D9B  81          	add	a, c
2882  0D9C  77          	ld	(hl), a
2883  0D9D  21 00 00    	ld	hl,_sprite_on_air
2884  0DA0  36 01       	ld	(hl),0x01
2885  0DA2  3A 00 00    	ld	a,(_player_vel_inc)
2886  0DA5  B7          	or	a, a
2887  0DA6  28 2B       	jr	Z,l_player_move_jump_00107
2888  0DA8  21 00 00    	ld	hl,_dirs
2889  0DAB  CB 7E       	bit	7, (hl)
2890  0DAD  28 07       	jr	Z,l_player_move_jump_00104
2891  0DAF  21 00 00    	ld	hl,_dirs
2892  0DB2  CB 46       	bit	0, (hl)
2893  0DB4  20 1D       	jr	NZ,l_player_move_jump_00107
2894  0DB6              l_player_move_jump_00104:
2895  0DB6  3A 00 00    	ld	a,(_player_vel_y1)
2896  0DB9  21 00 00    	ld	hl,_player_vel_y
2897  0DBC  96          	sub	a, (hl)
2898  0DBD  E2 C2 0D    	jp	PO, l_player_move_jump_00263
2899  0DC0  EE 80       	xor	a,0x80
2900  0DC2              l_player_move_jump_00263:
2901  0DC2  F2 D3 0D    	jp	P, l_player_move_jump_00107
2902  0DC5  21 00 00    	ld	hl,_player_vel_y
2903  0DC8  CB 7E       	bit	7,(hl)
2904  0DCA  28 07       	jr	Z,l_player_move_jump_00107
2905  0DCC  36 00       	ld	(hl),0x00
2906  0DCE  21 00 00    	ld	hl,_player_vel_inc
2907  0DD1  36 00       	ld	(hl),0x00
2908  0DD3              l_player_move_jump_00107:
2909  0DD3  3E 78       	ld	a,0x78
2910  0DD5  21 00 00    	ld	hl,_player_vel_y
2911  0DD8  96          	sub	a, (hl)
2912  0DD9  E2 DE 0D    	jp	PO, l_player_move_jump_00264
2913  0DDC  EE 80       	xor	a,0x80
2914  0DDE              l_player_move_jump_00264:
2915  0DDE  F2 E6 0D    	jp	P, l_player_move_jump_00109
2916  0DE1  21 00 00    	ld	hl,_player_vel_y
2917  0DE4  36 78       	ld	(hl),0x78
2918  0DE6              l_player_move_jump_00109:
2919  0DE6  21 00 00    	ld	hl,_player_vel_y
2920  0DE9  7E          	ld	a, (hl)
2921  0DEA  EE 80       	xor	a,0x80
2922  0DEC  D6 08       	sub	a,0x08
2923  0DEE  30 02       	jr	NC,l_player_move_jump_00111
2924  0DF0  36 88       	ld	(hl),0x88
2925  0DF2              l_player_move_jump_00111:
2926  0DF2  21 00 00    	ld	hl,_player_vel_y
2927  0DF5  7E          	ld	a, (hl)
2928  0DF6  DD 77 FE    	ld	(ix-2),a
2929  0DF9  7E          	ld	a, (hl)
2930  0DFA  17          	rla
2931  0DFB  9F          	sbc	a, a
2932  0DFC  DD 77 FF    	ld	(ix-1),a
2933  0DFF  DD 7E FE    	ld	a,(ix-2)
2934  0E02  CB 47       	bit	0,a
2935  0E04  32 00 00    	ld	(_s_lin1),a
2936  0E07  28 04       	jr	Z,l_player_move_jump_00113
2937  0E09  21 00 00    	ld	hl,_s_lin1
2938  0E0C  35          	dec	(hl)
2939  0E0D              l_player_move_jump_00113:
2940  0E0D  3A 07 00    	ld	a,(_lin + 0x0007)
2941  0E10  21 00 00    	ld	hl,_s_lin1
2942  0E13  86          	add	a, (hl)
2943  0E14  77          	ld	(hl), a
2944  0E15  3E 90       	ld	a,0x90
2945  0E17  96          	sub	a, (hl)
2946  0E18  30 2B       	jr	NC,l_player_move_jump_00124
2947  0E1A  3E C8       	ld	a,0xc8
2948  0E1C  96          	sub	a, (hl)
2949  0E1D  30 13       	jr	NC,l_player_move_jump_00121
2950  0E1F  CD 00 00    	call	_spr_page_up
2951  0E22  7D          	ld	a, l
2952  0E23  B7          	or	a, a
2953  0E24  28 05       	jr	Z,l_player_move_jump_00115
2954  0E26  2E 00       	ld	l,0x00
2955  0E28  C3 A3 0F    	jp	l_player_move_jump_00158
2956  0E2B              l_player_move_jump_00115:
2957  0E2B  21 00 00    	ld	hl,_s_lin1
2958  0E2E  36 00       	ld	(hl),0x00
2959  0E30  18 13       	jr	l_player_move_jump_00124
2960  0E32              l_player_move_jump_00121:
2961  0E32  CD 00 00    	call	_spr_page_down
2962  0E35  7D          	ld	a, l
2963  0E36  B7          	or	a, a
2964  0E37  28 07       	jr	Z,l_player_move_jump_00118
2965  0E39  21 00 00    	ld	hl,_s_lin1
2966  0E3C  36 10       	ld	(hl),0x10
2967  0E3E  18 05       	jr	l_player_move_jump_00124
2968  0E40              l_player_move_jump_00118:
2969  0E40  21 00 00    	ld	hl,_s_lin1
2970  0E43  36 90       	ld	(hl),0x90
2971  0E45              l_player_move_jump_00124:
2972  0E45  3A 00 00    	ld	a,(_s_lin0)
2973  0E48  07          	rlca
2974  0E49  07          	rlca
2975  0E4A  07          	rlca
2976  0E4B  07          	rlca
2977  0E4C  E6 0F       	and	a,0x0f
2978  0E4E  4F          	ld	c, a
2979  0E4F  DD CB FF 7E 	bit	7,(ix-1)
2980  0E53  28 62       	jr	Z,l_player_move_jump_00147
2981  0E55  21 00 00    	ld	hl,_s_state
2982  0E58  7E          	ld	a,(hl)
2983  0E59  F6 01       	or	a,0x01
2984  0E5B  E6 FD       	and	a,0xfd
2985  0E5D  77          	ld	(hl),a
2986  0E5E  21 00 00    	ld	hl,_s_lin1
2987  0E61  46          	ld	b, (hl)
2988  0E62  79          	ld	a, c
2989  0E63  90          	sub	a, b
2990  0E64  20 04       	jr	NZ,l_player_move_jump_00266
2991  0E66  3E 01       	ld	a,0x01
2992  0E68  18 01       	jr	l_player_move_jump_00267
2993  0E6A              l_player_move_jump_00266:
2994  0E6A  AF          	xor	a,a
2995  0E6B              l_player_move_jump_00267:
2996  0E6B  EE 01       	xor	a,0x01
2997  0E6D  4F          	ld	c,a
2998  0E6E  B7          	or	a, a
2999  0E6F  28 3D       	jr	Z,l_player_move_jump_00131
3000  0E71  21 07 00    	ld	hl,+(_col + 0x0007)
3001  0E74  46          	ld	b, (hl)
3002  0E75  C5          	push	bc
3003  0E76  33          	inc	sp
3004  0E77  3A 00 00    	ld	a,(_s_lin1)
3005  0E7A  F5          	push	af
3006  0E7B  33          	inc	sp
3007  0E7C  CD 00 00    	call	_game_check_map
3008  0E7F  F1          	pop	af
3009  0E80  7C          	ld	a,h
3010  0E81  B5          	or	a,l
3011  0E82  28 21       	jr	Z,l_player_move_jump_00128
3012  0E84  CD D6 08    	call	_player_hit_platform
3013  0E87  7D          	ld	a, l
3014  0E88  B7          	or	a, a
3015  0E89  28 12       	jr	Z,l_player_move_jump_00126
3016  0E8B  3A 07 00    	ld	a,(_lin + 0x0007)
3017  0E8E  07          	rlca
3018  0E8F  07          	rlca
3019  0E90  07          	rlca
3020  0E91  07          	rlca
3021  0E92  E6 0F       	and	a,0x0f
3022  0E94  07          	rlca
3023  0E95  07          	rlca
3024  0E96  07          	rlca
3025  0E97  07          	rlca
3026  0E98  E6 F0       	and	a,0xf0
3027  0E9A  32 07 00    	ld	((_lin + 0x0007)),a
3028  0E9D              l_player_move_jump_00126:
3029  0E9D  21 00 00    	ld	hl,_player_vel_y
3030  0EA0  36 00       	ld	(hl),0x00
3031  0EA2  C3 65 0F    	jp	l_player_move_jump_00148
3032  0EA5              l_player_move_jump_00128:
3033  0EA5  3A 00 00    	ld	a,(_s_lin1)
3034  0EA8  32 07 00    	ld	((_lin + 0x0007)),a
3035  0EAB  C3 65 0F    	jp	l_player_move_jump_00148
3036  0EAE              l_player_move_jump_00131:
3037  0EAE  3A 00 00    	ld	a,(_s_lin1)
3038  0EB1  32 07 00    	ld	((_lin + 0x0007)),a
3039  0EB4  C3 65 0F    	jp	l_player_move_jump_00148
3040  0EB7              l_player_move_jump_00147:
3041  0EB7  21 00 00    	ld	hl,_s_state
3042  0EBA  7E          	ld	a,(hl)
3043  0EBB  F6 02       	or	a,0x02
3044  0EBD  E6 FE       	and	a,0xfe
3045  0EBF  77          	ld	(hl),a
3046  0EC0  21 00 00    	ld	hl,_s_lin1
3047  0EC3  7E          	ld	a, (hl)
3048  0EC4  C6 10       	add	a,0x10
3049  0EC6  77          	ld	(hl),a
3050  0EC7  47          	ld	b,a
3051  0EC8  79          	ld	a, c
3052  0EC9  90          	sub	a, b
3053  0ECA  20 04       	jr	NZ,l_player_move_jump_00268
3054  0ECC  3E 01       	ld	a,0x01
3055  0ECE  18 01       	jr	l_player_move_jump_00269
3056  0ED0              l_player_move_jump_00268:
3057  0ED0  AF          	xor	a,a
3058  0ED1              l_player_move_jump_00269:
3059  0ED1  EE 01       	xor	a,0x01
3060  0ED3  4F          	ld	c,a
3061  0ED4  B7          	or	a, a
3062  0ED5  CA 58 0F    	jp	Z, l_player_move_jump_00144
3063  0ED8  21 07 00    	ld	hl,+(_col + 0x0007)
3064  0EDB  46          	ld	b, (hl)
3065  0EDC  C5          	push	bc
3066  0EDD  33          	inc	sp
3067  0EDE  3A 00 00    	ld	a,(_s_lin1)
3068  0EE1  F5          	push	af
3069  0EE2  33          	inc	sp
3070  0EE3  CD 00 00    	call	_game_check_map
3071  0EE6  F1          	pop	af
3072  0EE7  45          	ld	b, l
3073  0EE8  5C          	ld	e, h
3074  0EE9  21 00 00    	ld	hl,_s_lin1
3075  0EEC  7E          	ld	a, (hl)
3076  0EED  C6 F0       	add	a,0xf0
3077  0EEF  4F          	ld	c, a
3078  0EF0  7B          	ld	a, e
3079  0EF1  B0          	or	a,b
3080  0EF2  28 58       	jr	Z,l_player_move_jump_00141
3081  0EF4  71          	ld	(hl), c
3082  0EF5  2E 00       	ld	l,0x00
3083  0EF7  CD 36 06    	call	_player_check_stairs
3084  0EFA  3A 00 00    	ld	a,(_player_onstair)
3085  0EFD  B7          	or	a, a
3086  0EFE  20 05       	jr	NZ,l_player_move_jump_00134
3087  0F00  2E 01       	ld	l,0x01
3088  0F02  CD 36 06    	call	_player_check_stairs
3089  0F05              l_player_move_jump_00134:
3090  0F05  3A 00 00    	ld	a,(_player_onstair)
3091  0F08  B7          	or	a, a
3092  0F09  20 2C       	jr	NZ,l_player_move_jump_00139
3093  0F0B  21 00 00    	ld	hl,_s_lin1
3094  0F0E  7E          	ld	a, (hl)
3095  0F0F  07          	rlca
3096  0F10  07          	rlca
3097  0F11  07          	rlca
3098  0F12  07          	rlca
3099  0F13  E6 0F       	and	a,0x0f
3100  0F15  07          	rlca
3101  0F16  07          	rlca
3102  0F17  07          	rlca
3103  0F18  07          	rlca
3104  0F19  E6 F0       	and	a,0xf0
3105  0F1B  77          	ld	(hl), a
3106  0F1C  21 07 00    	ld	hl,+(_lin + 0x0007)
3107  0F1F  4E          	ld	c, (hl)
3108  0F20  21 00 00    	ld	hl,_s_lin1
3109  0F23  7E          	ld	a, (hl)
3110  0F24  91          	sub	a, c
3111  0F25  30 0A       	jr	NC,l_player_move_jump_00136
3112  0F27  7E          	ld	a, (hl)
3113  0F28  C6 10       	add	a,0x10
3114  0F2A  32 07 00    	ld	((_lin + 0x0007)),a
3115  0F2D  2E 00       	ld	l,0x00
3116  0F2F  18 72       	jr	l_player_move_jump_00158
3117  0F31              l_player_move_jump_00136:
3118  0F31  3A 00 00    	ld	a,(_s_lin1)
3119  0F34  32 07 00    	ld	((_lin + 0x0007)),a
3120  0F37              l_player_move_jump_00139:
3121  0F37  21 00 00    	ld	hl,_player_vel_y
3122  0F3A  36 00       	ld	(hl),0x00
3123  0F3C  21 00 00    	ld	hl,_s_state
3124  0F3F  7E          	ld	a,(hl)
3125  0F40  E6 FC       	and	a,+(0xfd&0xfe)
3126  0F42  77          	ld	(hl),a
3127  0F43  21 07 00    	ld	hl, +(_colint + 0x0007)
3128  0F46  36 00       	ld	(hl),0x00
3129  0F48  2E 01       	ld	l,0x01
3130  0F4A  18 57       	jr	l_player_move_jump_00158
3131  0F4C              l_player_move_jump_00141:
3132  0F4C  21 00 00    	ld	hl,_s_lin1
3133  0F4F  71          	ld	(hl), c
3134  0F50  3A 00 00    	ld	a,(_s_lin1)
3135  0F53  32 07 00    	ld	((_lin + 0x0007)),a
3136  0F56  18 0D       	jr	l_player_move_jump_00148
3137  0F58              l_player_move_jump_00144:
3138  0F58  21 00 00    	ld	hl,_s_lin1
3139  0F5B  7E          	ld	a, (hl)
3140  0F5C  C6 F0       	add	a,0xf0
3141  0F5E  77          	ld	(hl), a
3142  0F5F  3A 00 00    	ld	a,(_s_lin1)
3143  0F62  32 07 00    	ld	((_lin + 0x0007)),a
3144  0F65              l_player_move_jump_00148:
3145  0F65  21 00 00    	ld	hl,_s_state
3146  0F68  CB 5E       	bit	3, (hl)
3147  0F6A  20 27       	jr	NZ,l_player_move_jump_00154
3148  0F6C  21 00 00    	ld	hl,_s_state
3149  0F6F  CB 56       	bit	2, (hl)
3150  0F71  20 20       	jr	NZ,l_player_move_jump_00154
3151  0F73  21 00 00    	ld	hl,_dirs
3152  0F76  CB 56       	bit	2, (hl)
3153  0F78  28 09       	jr	Z,l_player_move_jump_00150
3154  0F7A  21 00 00    	ld	hl,_s_state
3155  0F7D  7E          	ld	a,(hl)
3156  0F7E  F6 08       	or	a,0x08
3157  0F80  E6 FB       	and	a,0xfb
3158  0F82  77          	ld	(hl),a
3159  0F83              l_player_move_jump_00150:
3160  0F83  21 00 00    	ld	hl,_dirs
3161  0F86  CB 5E       	bit	3, (hl)
3162  0F88  28 09       	jr	Z,l_player_move_jump_00154
3163  0F8A  21 00 00    	ld	hl,_s_state
3164  0F8D  7E          	ld	a,(hl)
3165  0F8E  F6 04       	or	a,0x04
3166  0F90  E6 F7       	and	a,0xf7
3167  0F92  77          	ld	(hl),a
3168  0F93              l_player_move_jump_00154:
3169  0F93  CD 00 00    	call	_spr_move_horizontal
3170  0F96  7D          	ld	a, l
3171  0F97  B7          	or	a, a
3172  0F98  28 07       	jr	Z,l_player_move_jump_00157
3173  0F9A  21 00 00    	ld	hl,_s_state
3174  0F9D  7E          	ld	a,(hl)
3175  0F9E  E6 F3       	and	a,+(0xf7&0xfb)
3176  0FA0  77          	ld	(hl),a
3177  0FA1              l_player_move_jump_00157:
3178  0FA1  2E 00       	ld	l,0x00
3179  0FA3              l_player_move_jump_00158:
3180  0FA3  F1          	pop	af
3181  0FA4  DD E1       	pop	ix
3182  0FA6  C9          	ret
3183  0FA7              	SECTION code_compiler
3184  0FA7              ;	---------------------------------
3185  0FA7              ; Function player_open_door
3186  0FA7              ; ---------------------------------
3187  0FA7              _player_open_door:
3188  0FA7  CD 00 00    	call	___sdcc_enter_ix
3189  0FAA  0E 00       	ld	c,0x00
3190  0FAC  DD 7E 06    	ld	a,(ix+6)
3191  0FAF  D6 48       	sub	a,0x48
3192  0FB1  28 17       	jr	Z,l_player_open_door_00101
3193  0FB3  DD 7E 06    	ld	a,(ix+6)
3194  0FB6  D6 49       	sub	a,0x49
3195  0FB8  28 1F       	jr	Z,l_player_open_door_00104
3196  0FBA  DD 7E 06    	ld	a,(ix+6)
3197  0FBD  D6 4A       	sub	a,0x4a
3198  0FBF  28 27       	jr	Z,l_player_open_door_00107
3199  0FC1  DD 7E 06    	ld	a,(ix+6)
3200  0FC4  D6 4B       	sub	a,0x4b
3201  0FC6  28 2F       	jr	Z,l_player_open_door_00110
3202  0FC8  18 3A       	jr	l_player_open_door_00113
3203  0FCA              l_player_open_door_00101:
3204  0FCA  3A 00 00    	ld	a,(_player_keys)
3205  0FCD  B7          	or	a, a
3206  0FCE  28 34       	jr	Z,l_player_open_door_00113
3207  0FD0  2E 07       	ld	l,0x07
3208  0FD2  CD 00 00    	call	_zx_border_fastcall
3209  0FD5  0E 01       	ld	c,0x01
3210  0FD7  18 2B       	jr	l_player_open_door_00113
3211  0FD9              l_player_open_door_00104:
3212  0FD9  3A 01 00    	ld	a,(_player_keys + 0x0001)
3213  0FDC  B7          	or	a, a
3214  0FDD  28 25       	jr	Z,l_player_open_door_00113
3215  0FDF  2E 02       	ld	l,0x02
3216  0FE1  CD 00 00    	call	_zx_border_fastcall
3217  0FE4  0E 01       	ld	c,0x01
3218  0FE6  18 1C       	jr	l_player_open_door_00113
3219  0FE8              l_player_open_door_00107:
3220  0FE8  3A 02 00    	ld	a,(_player_keys + 0x0002)
3221  0FEB  B7          	or	a, a
3222  0FEC  28 16       	jr	Z,l_player_open_door_00113
3223  0FEE  2E 04       	ld	l,0x04
3224  0FF0  CD 00 00    	call	_zx_border_fastcall
3225  0FF3  0E 01       	ld	c,0x01
3226  0FF5  18 0D       	jr	l_player_open_door_00113
3227  0FF7              l_player_open_door_00110:
3228  0FF7  3A 03 00    	ld	a,(_player_keys + 0x0003)
3229  0FFA  B7          	or	a, a
3230  0FFB  28 07       	jr	Z,l_player_open_door_00113
3231  0FFD  2E 05       	ld	l,0x05
3232  0FFF  CD 00 00    	call	_zx_border_fastcall
3233  1002  0E 01       	ld	c,0x01
3234  1004              l_player_open_door_00113:
3235  1004  79          	ld	a, c
3236  1005  B7          	or	a, a
3237  1006  20 06       	jr	NZ,l_player_open_door_00114
3238  1008  3A 00 00    	ld	a,(_game_inmune)
3239  100B  B7          	or	a, a
3240  100C  28 31       	jr	Z,l_player_open_door_00117
3241  100E              l_player_open_door_00114:
3242  100E  3E 00       	ld	a, +((_scr_map) & 0xFF)
3243  1010  DD 86 04    	add	a,(ix+4)
3244  1013  4F          	ld	c, a
3245  1014  3E 00       	ld	a, +((_scr_map) / 256)
3246  1016  DD 8E 05    	adc	a,(ix+5)
3247  1019  47          	ld	b, a
3248  101A  C5          	push	bc
3249  101B  DD 6E 04    	ld	l,(ix+4)
3250  101E  DD 66 05    	ld	h,(ix+5)
3251  1021  E5          	push	hl
3252  1022  CD 00 00    	call	_game_match_back
3253  1025  F1          	pop	af
3254  1026  C1          	pop	bc
3255  1027  7D          	ld	a,l
3256  1028  02          	ld	(bc), a
3257  1029  DD 6E 04    	ld	l,(ix+4)
3258  102C  DD 66 05    	ld	h,(ix+5)
3259  102F  E5          	push	hl
3260  1030  CD 00 00    	call	_game_obj_set
3261  1033  F1          	pop	af
3262  1034  DD 6E 04    	ld	l,(ix+4)
3263  1037  DD 66 05    	ld	h,(ix+5)
3264  103A  E5          	push	hl
3265  103B  CD 00 00    	call	_spr_draw_index
3266  103E  F1          	pop	af
3267  103F              l_player_open_door_00117:
3268  103F  DD E1       	pop	ix
3269  1041  C9          	ret
3270  1042              	SECTION code_compiler
3271  1042              ;	---------------------------------
3272  1042              ; Function player_lost_life
3273  1042              ; ---------------------------------
3274  1042              _player_lost_life:
3275  1042  CD 00 00    	call	___sdcc_enter_ix
3276  1045  3B          	dec	sp
3277  1046  3A 07 00    	ld	a,(_lin + 0x0007)
3278  1049  32 00 00    	ld	(_s_lin0),a
3279  104C  3A 07 00    	ld	a,(_col + 0x0007)
3280  104F  32 00 00    	ld	(_s_col0),a
3281  1052  CD 00 00    	call	_spr_init_anim_bullets
3282  1055  01 00 00    	ld	bc,_anim_lin+0
3283  1058  16 00       	ld	d,0x00
3284  105A              l_player_lost_life_00116:
3285  105A  C5          	push	bc
3286  105B  D5          	push	de
3287  105C  21 00 00    	ld	hl,0x0000
3288  105F  E5          	push	hl
3289  1060  AF          	xor	a, a
3290  1061  5A          	ld	e,d
3291  1062  57          	ld	d,a
3292  1063  D5          	push	de
3293  1064  CD 00 00    	call	_NIRVANAP_spriteT_callee
3294  1067  D1          	pop	de
3295  1068  C1          	pop	bc
3296  1069  6A          	ld	l,d
3297  106A  26 00       	ld	h,0x00
3298  106C  09          	add	hl, bc
3299  106D  36 FF       	ld	(hl),0xff
3300  106F  14          	inc	d
3301  1070  7A          	ld	a, d
3302  1071  D6 08       	sub	a,0x08
3303  1073  38 E5       	jr	C,l_player_lost_life_00116
3304  1075  21 00 00    	ld	hl,_anim_count
3305  1078  36 00       	ld	(hl),0x00
3306  107A  76          	halt
3307  107B  3A 00 00    	ld	a,(_s_lin0)
3308  107E  C6 F0       	add	a,0xf0
3309  1080  47          	ld	b, a
3310  1081  3A 00 00    	ld	a,(_s_col0)
3311  1084  21 00 00    	ld	hl,0x0000
3312  1087  E5          	push	hl
3313  1088  21 87 03    	ld	hl,0x0387
3314  108B  E5          	push	hl
3315  108C  48          	ld	c,b
3316  108D  47          	ld	b,a
3317  108E  C5          	push	bc
3318  108F  CD 00 00    	call	_spr_add_anim
3319  1092  F1          	pop	af
3320  1093  F1          	pop	af
3321  1094  F1          	pop	af
3322  1095  21 00 00    	ld	hl,_s_col0
3323  1098  46          	ld	b, (hl)
3324  1099  05          	dec	b
3325  109A  05          	dec	b
3326  109B  21 00 00    	ld	hl,0x0000
3327  109E  E5          	push	hl
3328  109F  21 87 03    	ld	hl,0x0387
3329  10A2  E5          	push	hl
3330  10A3  C5          	push	bc
3331  10A4  33          	inc	sp
3332  10A5  3A 00 00    	ld	a,(_s_lin0)
3333  10A8  F5          	push	af
3334  10A9  33          	inc	sp
3335  10AA  CD 00 00    	call	_spr_add_anim
3336  10AD  F1          	pop	af
3337  10AE  F1          	pop	af
3338  10AF  21 00 00    	ld	hl,0x0000
3339  10B2  E3          	ex	(sp),hl
3340  10B3  3A 00 00    	ld	a,(_s_col0)
3341  10B6  21 87 03    	ld	hl,0x0387
3342  10B9  E5          	push	hl
3343  10BA  F5          	push	af
3344  10BB  33          	inc	sp
3345  10BC  3A 00 00    	ld	a,(_s_lin0)
3346  10BF  F5          	push	af
3347  10C0  33          	inc	sp
3348  10C1  CD 00 00    	call	_spr_add_anim
3349  10C4  F1          	pop	af
3350  10C5  F1          	pop	af
3351  10C6  F1          	pop	af
3352  10C7  21 00 00    	ld	hl,_s_col0
3353  10CA  46          	ld	b, (hl)
3354  10CB  04          	inc	b
3355  10CC  04          	inc	b
3356  10CD  21 00 00    	ld	hl,0x0000
3357  10D0  E5          	push	hl
3358  10D1  21 87 03    	ld	hl,0x0387
3359  10D4  E5          	push	hl
3360  10D5  C5          	push	bc
3361  10D6  33          	inc	sp
3362  10D7  3A 00 00    	ld	a,(_s_lin0)
3363  10DA  F5          	push	af
3364  10DB  33          	inc	sp
3365  10DC  CD 00 00    	call	_spr_add_anim
3366  10DF  F1          	pop	af
3367  10E0  F1          	pop	af
3368  10E1  F1          	pop	af
3369  10E2  3A 00 00    	ld	a,(_s_lin0)
3370  10E5  C6 10       	add	a,0x10
3371  10E7  47          	ld	b, a
3372  10E8  3A 00 00    	ld	a,(_s_col0)
3373  10EB  21 00 00    	ld	hl,0x0000
3374  10EE  E5          	push	hl
3375  10EF  21 87 03    	ld	hl,0x0387
3376  10F2  E5          	push	hl
3377  10F3  48          	ld	c,b
3378  10F4  47          	ld	b,a
3379  10F5  C5          	push	bc
3380  10F6  CD 00 00    	call	_spr_add_anim
3381  10F9  F1          	pop	af
3382  10FA  F1          	pop	af
3383  10FB  F1          	pop	af
3384  10FC  2E 00       	ld	l,0x00
3385  10FE  CD 00 00    	call	_zx_border_fastcall
3386  1101  DD 36 FF 01 	ld	(ix-1),0x01
3387  1105  2A 00 00    	ld	hl,(_curr_time)
3388  1108  22 00 00    	ld	(_anim_time),hl
3389  110B              l_player_lost_life_00107:
3390  110B  DD 7E FF    	ld	a,(ix-1)
3391  110E  B7          	or	a, a
3392  110F  28 28       	jr	Z,l_player_lost_life_00109
3393  1111  21 0C 00    	ld	hl,0x000c
3394  1114  E5          	push	hl
3395  1115  2A 00 00    	ld	hl,(_anim_time)
3396  1118  E5          	push	hl
3397  1119  CD 00 00    	call	_game_check_time
3398  111C  F1          	pop	af
3399  111D  F1          	pop	af
3400  111E  7D          	ld	a, l
3401  111F  B7          	or	a, a
3402  1120  28 E9       	jr	Z,l_player_lost_life_00107
3403  1122  2A 00 00    	ld	hl,(_curr_time)
3404  1125  22 00 00    	ld	(_anim_time),hl
3405  1128  3A 00 00    	ld	a,(_anim_count)
3406  112B  B7          	or	a,a
3407  112C  28 05       	jr	Z,l_player_lost_life_00103
3408  112E  CD 00 00    	call	_spr_play_anim
3409  1131  18 D8       	jr	l_player_lost_life_00107
3410  1133              l_player_lost_life_00103:
3411  1133  DD 36 FF 00 	ld	(ix-1),0x00
3412  1137  18 D2       	jr	l_player_lost_life_00107
3413  1139              l_player_lost_life_00109:
3414  1139  21 00 00    	ld	hl,_sprite
3415  113C  36 00       	ld	(hl),0x00
3416  113E              l_player_lost_life_00118:
3417  113E  3A 07 00    	ld	a,(_class + 0x0007)
3418  1141  B7          	or	a, a
3419  1142  28 1F       	jr	Z,l_player_lost_life_00111
3420  1144  21 07 00    	ld	hl,+(_col + 0x0007)
3421  1147  4E          	ld	c, (hl)
3422  1148  21 07 00    	ld	hl,+(_lin + 0x0007)
3423  114B  56          	ld	d, (hl)
3424  114C  21 07 00    	ld	hl,+(_tile + 0x0007)
3425  114F  5E          	ld	e, (hl)
3426  1150  21 07 00    	ld	hl,+(_colint + 0x0007)
3427  1153  46          	ld	b, (hl)
3428  1154  7B          	ld	a, e
3429  1155  80          	add	a, b
3430  1156  5F          	ld	e, a
3431  1157  79          	ld	a, c
3432  1158  F5          	push	af
3433  1159  33          	inc	sp
3434  115A  3A 00 00    	ld	a,(_sprite)
3435  115D  D5          	push	de
3436  115E  F5          	push	af
3437  115F  33          	inc	sp
3438  1160  CD 00 00    	call	_NIRVANAP_spriteT_callee
3439  1163              l_player_lost_life_00111:
3440  1163  21 07 00    	ld	hl, +(_class + 0x0007)
3441  1166  36 00       	ld	(hl),0x00
3442  1168  21 07 00    	ld	hl, +(_bullet_col + 0x0007)
3443  116B  36 FF       	ld	(hl),0xff
3444  116D  21 00 00    	ld	hl,_sprite
3445  1170  7E          	ld	a,(hl)
3446  1171  3C          	inc	a
3447  1172  77          	ld	(hl),a
3448  1173  D6 07       	sub	a,0x07
3449  1175  38 C7       	jr	C,l_player_lost_life_00118
3450  1177  21 00 00    	ld	hl,_player_lives
3451  117A  35          	dec	(hl)
3452  117B  21 00 00    	ld	hl,_player_mana
3453  117E  36 64       	ld	(hl),0x64
3454  1180  21 00 00    	ld	hl,_player_vita
3455  1183  36 64       	ld	(hl),0x64
3456  1185  3A 00 00    	ld	a,(_player_lives)
3457  1188  B7          	or	a, a
3458  1189  28 0B       	jr	Z,l_player_lost_life_00114
3459  118B  21 F4 01    	ld	hl,0x01f4
3460  118E  CD 00 00    	call	_z80_delay_ms_fastcall
3461  1191  CD 00 00    	call	_game_round_init
3462  1194  18 0A       	jr	l_player_lost_life_00120
3463  1196              l_player_lost_life_00114:
3464  1196  21 00 00    	ld	hl,_player_lives
3465  1199  36 00       	ld	(hl),0x00
3466  119B  21 00 00    	ld	hl,_game_over
3467  119E  36 01       	ld	(hl),0x01
3468  11A0              l_player_lost_life_00120:
3469  11A0  33          	inc	sp
3470  11A1  DD E1       	pop	ix
3471  11A3  C9          	ret
3472  11A4              	SECTION code_compiler
3473  11A4              ;	---------------------------------
3474  11A4              ; Function player_hit
3475  11A4              ; ---------------------------------
3476  11A4              _player_hit:
3477  11A4  7D          	ld	a,l
3478  11A5  4D          	ld	c,l
3479  11A6  21 00 00    	ld	hl,_player_vita
3480  11A9  96          	sub	a, (hl)
3481  11AA  30 17       	jr	NC,l_player_hit_00104
3482  11AC  3A 00 00    	ld	a,(_game_inmune)
3483  11AF  B7          	or	a, a
3484  11B0  20 06       	jr	NZ,l_player_hit_00102
3485  11B2  21 00 00    	ld	hl,_player_vita
3486  11B5  7E          	ld	a, (hl)
3487  11B6  91          	sub	a, c
3488  11B7  77          	ld	(hl), a
3489  11B8              l_player_hit_00102:
3490  11B8  2A 00 00    	ld	hl,(_curr_time)
3491  11BB  22 00 00    	ld	(_player_hit_time),hl
3492  11BE  CD 00 00    	call	_game_update_stats
3493  11C1  18 0B       	jr	l_player_hit_00106
3494  11C3              l_player_hit_00104:
3495  11C3  21 00 00    	ld	hl,_player_vita
3496  11C6  36 00       	ld	(hl),0x00
3497  11C8  CD 00 00    	call	_game_update_stats
3498  11CB  CD 42 10    	call	_player_lost_life
3499  11CE              l_player_hit_00106:
3500  11CE  C9          	ret
3501  11CF              	SECTION IGNORE
3502  0000              
