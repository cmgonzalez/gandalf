1     0000              MODULE game_player_c
2     0000              
3     0000              ;--------------------------------------------------------
4     0000              ; File Created by SDCC : free open source ANSI-C Compiler
5     0000              ; Version 3.6.5 #9958 (Mac OS X i386)
6     0000              ;--------------------------------------------------------
7     0000              ; Processed by Z88DK
8     0000              ;--------------------------------------------------------
9     0000              
10    0000              	EXTERN __divschar
11    0000              	EXTERN __divschar_callee
12    0000              	EXTERN __divsint
13    0000              	EXTERN __divsint_callee
14    0000              	EXTERN __divslong
15    0000              	EXTERN __divslong_callee
16    0000              	EXTERN __divslonglong
17    0000              	EXTERN __divslonglong_callee
18    0000              	EXTERN __divsuchar
19    0000              	EXTERN __divsuchar_callee
20    0000              	EXTERN __divuchar
21    0000              	EXTERN __divuchar_callee
22    0000              	EXTERN __divuint
23    0000              	EXTERN __divuint_callee
24    0000              	EXTERN __divulong
25    0000              	EXTERN __divulong_callee
26    0000              	EXTERN __divulonglong
27    0000              	EXTERN __divulonglong_callee
28    0000              	EXTERN __divuschar
29    0000              	EXTERN __divuschar_callee
30    0000              	EXTERN __modschar
31    0000              	EXTERN __modschar_callee
32    0000              	EXTERN __modsint
33    0000              	EXTERN __modsint_callee
34    0000              	EXTERN __modslong
35    0000              	EXTERN __modslong_callee
36    0000              	EXTERN __modslonglong
37    0000              	EXTERN __modslonglong_callee
38    0000              	EXTERN __modsuchar
39    0000              	EXTERN __modsuchar_callee
40    0000              	EXTERN __moduchar
41    0000              	EXTERN __moduchar_callee
42    0000              	EXTERN __moduint
43    0000              	EXTERN __moduint_callee
44    0000              	EXTERN __modulong
45    0000              	EXTERN __modulong_callee
46    0000              	EXTERN __modulonglong
47    0000              	EXTERN __modulonglong_callee
48    0000              	EXTERN __moduschar
49    0000              	EXTERN __moduschar_callee
50    0000              	EXTERN __mulint
51    0000              	EXTERN __mulint_callee
52    0000              	EXTERN __mullong
53    0000              	EXTERN __mullong_callee
54    0000              	EXTERN __mullonglong
55    0000              	EXTERN __mullonglong_callee
56    0000              	EXTERN __mulschar
57    0000              	EXTERN __mulschar_callee
58    0000              	EXTERN __mulsuchar
59    0000              	EXTERN __mulsuchar_callee
60    0000              	EXTERN __muluschar
61    0000              	EXTERN __muluschar_callee
62    0000              	EXTERN __rlslonglong
63    0000              	EXTERN __rlslonglong_callee
64    0000              	EXTERN __rlulonglong
65    0000              	EXTERN __rlulonglong_callee
66    0000              	EXTERN __rrslonglong
67    0000              	EXTERN __rrslonglong_callee
68    0000              	EXTERN __rrulonglong
69    0000              	EXTERN __rrulonglong_callee
70    0000              	EXTERN ___sdcc_call_hl
71    0000              	EXTERN ___sdcc_call_iy
72    0000              	EXTERN ___sdcc_enter_ix
73    0000              	EXTERN _banked_call
74    0000              	EXTERN _banked_ret
75    0000              	EXTERN ___fs2schar
76    0000              	EXTERN ___fs2schar_callee
77    0000              	EXTERN ___fs2sint
78    0000              	EXTERN ___fs2sint_callee
79    0000              	EXTERN ___fs2slong
80    0000              	EXTERN ___fs2slong_callee
81    0000              	EXTERN ___fs2slonglong
82    0000              	EXTERN ___fs2slonglong_callee
83    0000              	EXTERN ___fs2uchar
84    0000              	EXTERN ___fs2uchar_callee
85    0000              	EXTERN ___fs2uint
86    0000              	EXTERN ___fs2uint_callee
87    0000              	EXTERN ___fs2ulong
88    0000              	EXTERN ___fs2ulong_callee
89    0000              	EXTERN ___fs2ulonglong
90    0000              	EXTERN ___fs2ulonglong_callee
91    0000              	EXTERN ___fsadd
92    0000              	EXTERN ___fsadd_callee
93    0000              	EXTERN ___fsdiv
94    0000              	EXTERN ___fsdiv_callee
95    0000              	EXTERN ___fseq
96    0000              	EXTERN ___fseq_callee
97    0000              	EXTERN ___fsgt
98    0000              	EXTERN ___fsgt_callee
99    0000              	EXTERN ___fslt
100   0000              	EXTERN ___fslt_callee
101   0000              	EXTERN ___fsmul
102   0000              	EXTERN ___fsmul_callee
103   0000              	EXTERN ___fsneq
104   0000              	EXTERN ___fsneq_callee
105   0000              	EXTERN ___fssub
106   0000              	EXTERN ___fssub_callee
107   0000              	EXTERN ___schar2fs
108   0000              	EXTERN ___schar2fs_callee
109   0000              	EXTERN ___sint2fs
110   0000              	EXTERN ___sint2fs_callee
111   0000              	EXTERN ___slong2fs
112   0000              	EXTERN ___slong2fs_callee
113   0000              	EXTERN ___slonglong2fs
114   0000              	EXTERN ___slonglong2fs_callee
115   0000              	EXTERN ___uchar2fs
116   0000              	EXTERN ___uchar2fs_callee
117   0000              	EXTERN ___uint2fs
118   0000              	EXTERN ___uint2fs_callee
119   0000              	EXTERN ___ulong2fs
120   0000              	EXTERN ___ulong2fs_callee
121   0000              	EXTERN ___ulonglong2fs
122   0000              	EXTERN ___ulonglong2fs_callee
123   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
126   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
127   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
128   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
129   0000              	EXTERN ____sdcc_4_ldi_save_bc
130   0000              	EXTERN ____sdcc_4_push_hlix
131   0000              	EXTERN ____sdcc_4_push_mhl
132   0000              	EXTERN ____sdcc_lib_setmem_hl
133   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
134   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
135   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
136   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
137   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
138   0000              	EXTERN ____sdcc_ll_add_deix_hlix
139   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
140   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
141   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
142   0000              	EXTERN ____sdcc_ll_asr_hlix_a
143   0000              	EXTERN ____sdcc_ll_asr_mbc_a
144   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
145   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
146   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
147   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
148   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
149   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
150   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
151   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
152   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
153   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
155   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
156   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
157   0000              	EXTERN ____sdcc_ll_push_hlix
158   0000              	EXTERN ____sdcc_ll_push_mhl
159   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
160   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
161   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
162   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
163   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
164   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
165   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
166   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
167   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
168   0000              	EXTERN ____sdcc_load_debc_deix
169   0000              	EXTERN ____sdcc_load_dehl_deix
170   0000              	EXTERN ____sdcc_load_debc_mhl
171   0000              	EXTERN ____sdcc_load_hlde_mhl
172   0000              	EXTERN ____sdcc_store_dehl_bcix
173   0000              	EXTERN ____sdcc_store_debc_hlix
174   0000              	EXTERN ____sdcc_store_debc_mhl
175   0000              	EXTERN ____sdcc_cpu_pop_ei
176   0000              	EXTERN ____sdcc_cpu_pop_ei_jp
177   0000              	EXTERN ____sdcc_cpu_push_di
178   0000              	EXTERN ____sdcc_outi
179   0000              	EXTERN ____sdcc_outi_128
180   0000              	EXTERN ____sdcc_outi_256
181   0000              	EXTERN ____sdcc_ldi
182   0000              	EXTERN ____sdcc_ldi_128
183   0000              	EXTERN ____sdcc_ldi_256
184   0000              
185   0000              ;--------------------------------------------------------
186   0000              ; Public variables in this module
187   0000              ;--------------------------------------------------------
188   0000              	GLOBAL _player_check_map
189   0000              	GLOBAL _player_init
190   0000              	GLOBAL _player_check_input
191   0000              	GLOBAL _player_collision
192   0000              	GLOBAL _player_kill
193   0000              	GLOBAL _player_restart
194   0000              	GLOBAL _player_lost_life
195   0000              	GLOBAL _player_turn
196   0000              	GLOBAL _player_move
197   0000              	GLOBAL _player_check_stairs_down
198   0000              	GLOBAL _player_check_stairs
199   0000              	GLOBAL _player_tile
200   0000              	GLOBAL _player_move_input
201   0000              	GLOBAL _player_fire
202   0000              	GLOBAL _player_pick_item
203   0000              	GLOBAL _player_hit_platform
204   0000              	GLOBAL _player_hit_platform_clear
205   0000              	GLOBAL _player_score_add
206   0000              	GLOBAL _player_check_floor
207   0000              	GLOBAL _player_move_jump
208   0000              	GLOBAL _player_open_door
209   0000              ;--------------------------------------------------------
210   0000              ; Externals used
211   0000              ;--------------------------------------------------------
212   0000              	GLOBAL _ulltoa_callee
213   0000              	GLOBAL _ulltoa
214   0000              	GLOBAL _strtoull_callee
215   0000              	GLOBAL _strtoull
216   0000              	GLOBAL _strtoll_callee
217   0000              	GLOBAL _strtoll
218   0000              	GLOBAL _lltoa_callee
219   0000              	GLOBAL _lltoa
220   0000              	GLOBAL _llabs_callee
221   0000              	GLOBAL _llabs
222   0000              	GLOBAL __lldivu__callee
223   0000              	GLOBAL __lldivu_
224   0000              	GLOBAL __lldiv__callee
225   0000              	GLOBAL __lldiv_
226   0000              	GLOBAL _atoll_callee
227   0000              	GLOBAL _atoll
228   0000              	GLOBAL _realloc_unlocked_callee
229   0000              	GLOBAL _realloc_unlocked
230   0000              	GLOBAL _malloc_unlocked_fastcall
231   0000              	GLOBAL _malloc_unlocked
232   0000              	GLOBAL _free_unlocked_fastcall
233   0000              	GLOBAL _free_unlocked
234   0000              	GLOBAL _calloc_unlocked_callee
235   0000              	GLOBAL _calloc_unlocked
236   0000              	GLOBAL _aligned_alloc_unlocked_callee
237   0000              	GLOBAL _aligned_alloc_unlocked
238   0000              	GLOBAL _realloc_callee
239   0000              	GLOBAL _realloc
240   0000              	GLOBAL _malloc_fastcall
241   0000              	GLOBAL _malloc
242   0000              	GLOBAL _free_fastcall
243   0000              	GLOBAL _free
244   0000              	GLOBAL _calloc_callee
245   0000              	GLOBAL _calloc
246   0000              	GLOBAL _aligned_alloc_callee
247   0000              	GLOBAL _aligned_alloc
248   0000              	GLOBAL _utoa_callee
249   0000              	GLOBAL _utoa
250   0000              	GLOBAL _ultoa_callee
251   0000              	GLOBAL _ultoa
252   0000              	GLOBAL _system_fastcall
253   0000              	GLOBAL _system
254   0000              	GLOBAL _strtoul_callee
255   0000              	GLOBAL _strtoul
256   0000              	GLOBAL _strtol_callee
257   0000              	GLOBAL _strtol
258   0000              	GLOBAL _strtof_callee
259   0000              	GLOBAL _strtof
260   0000              	GLOBAL _strtod_callee
261   0000              	GLOBAL _strtod
262   0000              	GLOBAL _srand_fastcall
263   0000              	GLOBAL _srand
264   0000              	GLOBAL _rand
265   0000              	GLOBAL _quick_exit_fastcall
266   0000              	GLOBAL _quick_exit
267   0000              	GLOBAL _qsort_callee
268   0000              	GLOBAL _qsort
269   0000              	GLOBAL _ltoa_callee
270   0000              	GLOBAL _ltoa
271   0000              	GLOBAL _labs_fastcall
272   0000              	GLOBAL _labs
273   0000              	GLOBAL _itoa_callee
274   0000              	GLOBAL _itoa
275   0000              	GLOBAL _ftoh_callee
276   0000              	GLOBAL _ftoh
277   0000              	GLOBAL _ftog_callee
278   0000              	GLOBAL _ftog
279   0000              	GLOBAL _ftoe_callee
280   0000              	GLOBAL _ftoe
281   0000              	GLOBAL _ftoa_callee
282   0000              	GLOBAL _ftoa
283   0000              	GLOBAL _exit_fastcall
284   0000              	GLOBAL _exit
285   0000              	GLOBAL _dtoh_callee
286   0000              	GLOBAL _dtoh
287   0000              	GLOBAL _dtog_callee
288   0000              	GLOBAL _dtog
289   0000              	GLOBAL _dtoe_callee
290   0000              	GLOBAL _dtoe
291   0000              	GLOBAL _dtoa_callee
292   0000              	GLOBAL _dtoa
293   0000              	GLOBAL _bsearch_callee
294   0000              	GLOBAL _bsearch
295   0000              	GLOBAL _atol_fastcall
296   0000              	GLOBAL _atol
297   0000              	GLOBAL _atoi_fastcall
298   0000              	GLOBAL _atoi
299   0000              	GLOBAL _atof_fastcall
300   0000              	GLOBAL _atof
301   0000              	GLOBAL _atexit_fastcall
302   0000              	GLOBAL _atexit
303   0000              	GLOBAL _at_quick_exit_fastcall
304   0000              	GLOBAL _at_quick_exit
305   0000              	GLOBAL _abs_fastcall
306   0000              	GLOBAL _abs
307   0000              	GLOBAL _abort
308   0000              	GLOBAL __strtou__callee
309   0000              	GLOBAL __strtou_
310   0000              	GLOBAL __strtoi__callee
311   0000              	GLOBAL __strtoi_
312   0000              	GLOBAL __random_uniform_xor_8__fastcall
313   0000              	GLOBAL __random_uniform_xor_8_
314   0000              	GLOBAL __random_uniform_xor_32__fastcall
315   0000              	GLOBAL __random_uniform_xor_32_
316   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
317   0000              	GLOBAL __random_uniform_cmwc_8_
318   0000              	GLOBAL __shellsort__callee
319   0000              	GLOBAL __shellsort_
320   0000              	GLOBAL __quicksort__callee
321   0000              	GLOBAL __quicksort_
322   0000              	GLOBAL __insertion_sort__callee
323   0000              	GLOBAL __insertion_sort_
324   0000              	GLOBAL __ldivu__callee
325   0000              	GLOBAL __ldivu_
326   0000              	GLOBAL __ldiv__callee
327   0000              	GLOBAL __ldiv_
328   0000              	GLOBAL __divu__callee
329   0000              	GLOBAL __divu_
330   0000              	GLOBAL __div__callee
331   0000              	GLOBAL __div_
332   0000              	GLOBAL _NIRVANAP_drawTW_raw_callee
333   0000              	GLOBAL _NIRVANAP_drawTW_raw
334   0000              	GLOBAL _NIRVANAP_drawTW_callee
335   0000              	GLOBAL _NIRVANAP_drawTW
336   0000              	GLOBAL _NIRVANAP_drawW_raw_callee
337   0000              	GLOBAL _NIRVANAP_drawW_raw
338   0000              	GLOBAL _NIRVANAP_drawW_callee
339   0000              	GLOBAL _NIRVANAP_drawW
340   0000              	GLOBAL _NIRVANAP_spriteT_callee
341   0000              	GLOBAL _NIRVANAP_spriteT
342   0000              	GLOBAL _NIRVANAP_fillC_callee
343   0000              	GLOBAL _NIRVANAP_fillC
344   0000              	GLOBAL _NIRVANAP_readC_callee
345   0000              	GLOBAL _NIRVANAP_readC
346   0000              	GLOBAL _NIRVANAP_paintC_callee
347   0000              	GLOBAL _NIRVANAP_paintC
348   0000              	GLOBAL _NIRVANAP_printC_callee
349   0000              	GLOBAL _NIRVANAP_printC
350   0000              	GLOBAL _NIRVANAP_fillT_raw_callee
351   0000              	GLOBAL _NIRVANAP_fillT_raw
352   0000              	GLOBAL _NIRVANAP_fillT_callee
353   0000              	GLOBAL _NIRVANAP_fillT
354   0000              	GLOBAL _NIRVANAP_drawT_raw_callee
355   0000              	GLOBAL _NIRVANAP_drawT_raw
356   0000              	GLOBAL _NIRVANAP_drawT_callee
357   0000              	GLOBAL _NIRVANAP_drawT
358   0000              	GLOBAL _NIRVANAP_stop
359   0000              	GLOBAL _NIRVANAP_start
360   0000              	GLOBAL _debug3
361   0000              	GLOBAL _debug2
362   0000              	GLOBAL _debug
363   0000              	GLOBAL _zx_print_str
364   0000              	GLOBAL _zx_print_int
365   0000              	GLOBAL _zx_print_chr
366   0000              	GLOBAL _zx_print_bonus_time
367   0000              	GLOBAL _zx_isr
368   0000              	GLOBAL _z80_otdr_callee
369   0000              	GLOBAL _z80_otdr
370   0000              	GLOBAL _z80_otir_callee
371   0000              	GLOBAL _z80_otir
372   0000              	GLOBAL _z80_outp_callee
373   0000              	GLOBAL _z80_outp
374   0000              	GLOBAL _z80_indr_callee
375   0000              	GLOBAL _z80_indr
376   0000              	GLOBAL _z80_inir_callee
377   0000              	GLOBAL _z80_inir
378   0000              	GLOBAL _z80_inp_fastcall
379   0000              	GLOBAL _z80_inp
380   0000              	GLOBAL _z80_set_int_state_fastcall
381   0000              	GLOBAL _z80_set_int_state
382   0000              	GLOBAL _z80_get_int_state
383   0000              	GLOBAL _z80_delay_tstate_fastcall
384   0000              	GLOBAL _z80_delay_tstate
385   0000              	GLOBAL _z80_delay_ms_fastcall
386   0000              	GLOBAL _z80_delay_ms
387   0000              	GLOBAL _im2_remove_generic_callback_callee
388   0000              	GLOBAL _im2_remove_generic_callback
389   0000              	GLOBAL _im2_prepend_generic_callback_callee
390   0000              	GLOBAL _im2_prepend_generic_callback
391   0000              	GLOBAL _im2_append_generic_callback_callee
392   0000              	GLOBAL _im2_append_generic_callback
393   0000              	GLOBAL _im2_create_generic_isr_8080_callee
394   0000              	GLOBAL _im2_create_generic_isr_8080
395   0000              	GLOBAL _im2_create_generic_isr_callee
396   0000              	GLOBAL _im2_create_generic_isr
397   0000              	GLOBAL _im2_install_isr_callee
398   0000              	GLOBAL _im2_install_isr
399   0000              	GLOBAL _im2_init_fastcall
400   0000              	GLOBAL _im2_init
401   0000              	GLOBAL _intrinsic_swap_word_32_fastcall
402   0000              	GLOBAL _intrinsic_swap_word_32
403   0000              	GLOBAL _intrinsic_swap_endian_32_fastcall
404   0000              	GLOBAL _intrinsic_swap_endian_32
405   0000              	GLOBAL _intrinsic_swap_endian_16_fastcall
406   0000              	GLOBAL _intrinsic_swap_endian_16
407   0000              	GLOBAL _intrinsic_return_de
408   0000              	GLOBAL _intrinsic_return_bc
409   0000              	GLOBAL _intrinsic_exx
410   0000              	GLOBAL _intrinsic_ex_de_hl
411   0000              	GLOBAL _intrinsic_nop
412   0000              	GLOBAL _intrinsic_im_2
413   0000              	GLOBAL _intrinsic_im_1
414   0000              	GLOBAL _intrinsic_im_0
415   0000              	GLOBAL _intrinsic_retn
416   0000              	GLOBAL _intrinsic_reti
417   0000              	GLOBAL _intrinsic_halt
418   0000              	GLOBAL _intrinsic_ei
419   0000              	GLOBAL _intrinsic_di
420   0000              	GLOBAL _intrinsic_stub
421   0000              	GLOBAL _intrinsic_outi
422   0000              	GLOBAL _intrinsic_ldi
423   0000              	GLOBAL _zx_pattern_fill_callee
424   0000              	GLOBAL _zx_pattern_fill
425   0000              	GLOBAL _zx_saddrpup_fastcall
426   0000              	GLOBAL _zx_saddrpup
427   0000              	GLOBAL _zx_saddrpright_callee
428   0000              	GLOBAL _zx_saddrpright
429   0000              	GLOBAL _zx_saddrpleft_callee
430   0000              	GLOBAL _zx_saddrpleft
431   0000              	GLOBAL _zx_saddrpdown_fastcall
432   0000              	GLOBAL _zx_saddrpdown
433   0000              	GLOBAL _zx_saddrcup_fastcall
434   0000              	GLOBAL _zx_saddrcup
435   0000              	GLOBAL _zx_saddrcright_fastcall
436   0000              	GLOBAL _zx_saddrcright
437   0000              	GLOBAL _zx_saddrcleft_fastcall
438   0000              	GLOBAL _zx_saddrcleft
439   0000              	GLOBAL _zx_saddrcdown_fastcall
440   0000              	GLOBAL _zx_saddrcdown
441   0000              	GLOBAL _zx_saddr2py_fastcall
442   0000              	GLOBAL _zx_saddr2py
443   0000              	GLOBAL _zx_saddr2px_fastcall
444   0000              	GLOBAL _zx_saddr2px
445   0000              	GLOBAL _zx_saddr2cy_fastcall
446   0000              	GLOBAL _zx_saddr2cy
447   0000              	GLOBAL _zx_saddr2cx_fastcall
448   0000              	GLOBAL _zx_saddr2cx
449   0000              	GLOBAL _zx_saddr2aaddr_fastcall
450   0000              	GLOBAL _zx_saddr2aaddr
451   0000              	GLOBAL _zx_py2saddr_fastcall
452   0000              	GLOBAL _zx_py2saddr
453   0000              	GLOBAL _zx_py2aaddr_fastcall
454   0000              	GLOBAL _zx_py2aaddr
455   0000              	GLOBAL _zx_pxy2saddr_callee
456   0000              	GLOBAL _zx_pxy2saddr
457   0000              	GLOBAL _zx_pxy2aaddr_callee
458   0000              	GLOBAL _zx_pxy2aaddr
459   0000              	GLOBAL _zx_px2bitmask_fastcall
460   0000              	GLOBAL _zx_px2bitmask
461   0000              	GLOBAL _zx_cy2saddr_fastcall
462   0000              	GLOBAL _zx_cy2saddr
463   0000              	GLOBAL _zx_cy2aaddr_fastcall
464   0000              	GLOBAL _zx_cy2aaddr
465   0000              	GLOBAL _zx_cxy2saddr_callee
466   0000              	GLOBAL _zx_cxy2saddr
467   0000              	GLOBAL _zx_cxy2aaddr_callee
468   0000              	GLOBAL _zx_cxy2aaddr
469   0000              	GLOBAL _zx_bitmask2px_fastcall
470   0000              	GLOBAL _zx_bitmask2px
471   0000              	GLOBAL _zx_aaddrcup_fastcall
472   0000              	GLOBAL _zx_aaddrcup
473   0000              	GLOBAL _zx_aaddrcright_fastcall
474   0000              	GLOBAL _zx_aaddrcright
475   0000              	GLOBAL _zx_aaddrcleft_fastcall
476   0000              	GLOBAL _zx_aaddrcleft
477   0000              	GLOBAL _zx_aaddrcdown_fastcall
478   0000              	GLOBAL _zx_aaddrcdown
479   0000              	GLOBAL _zx_aaddr2saddr_fastcall
480   0000              	GLOBAL _zx_aaddr2saddr
481   0000              	GLOBAL _zx_aaddr2py_fastcall
482   0000              	GLOBAL _zx_aaddr2py
483   0000              	GLOBAL _zx_aaddr2px_fastcall
484   0000              	GLOBAL _zx_aaddr2px
485   0000              	GLOBAL _zx_aaddr2cy_fastcall
486   0000              	GLOBAL _zx_aaddr2cy
487   0000              	GLOBAL _zx_aaddr2cx_fastcall
488   0000              	GLOBAL _zx_aaddr2cx
489   0000              	GLOBAL _zx_visit_wc_pix_callee
490   0000              	GLOBAL _zx_visit_wc_pix
491   0000              	GLOBAL _zx_visit_wc_attr_callee
492   0000              	GLOBAL _zx_visit_wc_attr
493   0000              	GLOBAL _zx_scroll_wc_up_pix_callee
494   0000              	GLOBAL _zx_scroll_wc_up_pix
495   0000              	GLOBAL _zx_scroll_wc_up_attr_callee
496   0000              	GLOBAL _zx_scroll_wc_up_attr
497   0000              	GLOBAL _zx_scroll_wc_up_callee
498   0000              	GLOBAL _zx_scroll_wc_up
499   0000              	GLOBAL _zx_scroll_up_pix_callee
500   0000              	GLOBAL _zx_scroll_up_pix
501   0000              	GLOBAL _zx_scroll_up_attr_callee
502   0000              	GLOBAL _zx_scroll_up_attr
503   0000              	GLOBAL _zx_scroll_up_callee
504   0000              	GLOBAL _zx_scroll_up
505   0000              	GLOBAL _zx_cls_wc_pix_callee
506   0000              	GLOBAL _zx_cls_wc_pix
507   0000              	GLOBAL _zx_cls_wc_attr_callee
508   0000              	GLOBAL _zx_cls_wc_attr
509   0000              	GLOBAL _zx_cls_wc_callee
510   0000              	GLOBAL _zx_cls_wc
511   0000              	GLOBAL _zx_cls_pix_fastcall
512   0000              	GLOBAL _zx_cls_pix
513   0000              	GLOBAL _zx_cls_attr_fastcall
514   0000              	GLOBAL _zx_cls_attr
515   0000              	GLOBAL _zx_cls_fastcall
516   0000              	GLOBAL _zx_cls
517   0000              	GLOBAL _zx_border_fastcall
518   0000              	GLOBAL _zx_border
519   0000              	GLOBAL _spr_btile_paint_back
520   0000              	GLOBAL _spr_explode_bullet
521   0000              	GLOBAL _spr_init_anim_bullets
522   0000              	GLOBAL _spr_turn_horizontal
523   0000              	GLOBAL _spr_play_bullets
524   0000              	GLOBAL _spr_play_anim
525   0000              	GLOBAL _spr_add_anim
526   0000              	GLOBAL _spr_page_map
527   0000              	GLOBAL _spr_page_right
528   0000              	GLOBAL _spr_page_left
529   0000              	GLOBAL _spr_tile_paint
530   0000              	GLOBAL _spr_calc_hor
531   0000              	GLOBAL _spr_draw_row
532   0000              	GLOBAL _spr_draw_index
533   0000              	GLOBAL _spr_draw_clear
534   0000              	GLOBAL _spr_brick_anim
535   0000              	GLOBAL _spr_back_repaint
536   0000              	GLOBAL _spr_tile
537   0000              	GLOBAL _spr_destroy
538   0000              	GLOBAL _spr_tile_dir
539   0000              	GLOBAL _spr_redraw
540   0000              	GLOBAL _spr_move_left
541   0000              	GLOBAL _spr_move_right
542   0000              	GLOBAL _spr_move_horizontal
543   0000              	GLOBAL _spr_move_down
544   0000              	GLOBAL _spr_move_up
545   0000              	GLOBAL _spr_calc_index
546   0000              	GLOBAL _spr_chktime
547   0000              	GLOBAL _sound_hit_brick
548   0000              	GLOBAL _sound_hit_enemy
549   0000              	GLOBAL _sound_kill
550   0000              	GLOBAL _sound_enter_enemy
551   0000              	GLOBAL _sound_coin
552   0000              	GLOBAL _sound_jump
553   0000              	GLOBAL _sound_slide
554   0000              	GLOBAL _player_player_hit_pow
555   0000              	GLOBAL _game_shoot_fire
556   0000              	GLOBAL _game_add_enemy
557   0000              	GLOBAL _game_joystick_set_menu
558   0000              	GLOBAL _game_joystick_set
559   0000              	GLOBAL _game_joystick_change
560   0000              	GLOBAL _game_print_header
561   0000              	GLOBAL _game_end
562   0000              	GLOBAL _game_phase_print_score_back
563   0000              	GLOBAL _game_check_time
564   0000              	GLOBAL _game_rotate_attrib
565   0000              	GLOBAL _game_colour_message
566   0000              	GLOBAL _game_paint_attrib_lin_h
567   0000              	GLOBAL _game_paint_attrib_lin
568   0000              	GLOBAL _game_paint_attrib
569   0000              	GLOBAL _game_print_score
570   0000              	GLOBAL _game_unfreeze_all
571   0000              	GLOBAL _game_freeze_all
572   0000              	GLOBAL _game_freeze
573   0000              	GLOBAL _game_enemy_add_get_index
574   0000              	GLOBAL _game_check_cell
575   0000              	GLOBAL _game_check_map
576   0000              	GLOBAL _game_loop
577   0000              	GLOBAL _game_phase_init
578   0000              	GLOBAL _game_start_timer
579   0000              	GLOBAL _game_tick
580   0000              	GLOBAL _game_print_lives
581   0000              	GLOBAL _game_print_footer
582   0000              	GLOBAL _game_fill_row
583   0000              	GLOBAL _game_draw_screen
584   0000              	GLOBAL _enemy_avoid_edge
585   0000              	GLOBAL _enemy_kill
586   0000              	GLOBAL _enemy_init
587   0000              	GLOBAL _enemy_move
588   0000              	GLOBAL _enemy_turn
589   0000              	GLOBAL _enemy_hit
590   0000              	GLOBAL _enemy_coin1
591   0000              	GLOBAL _enemy_static
592   0000              	GLOBAL _enemy_walk
593   0000              	GLOBAL _enemy_horizontal
594   0000              	GLOBAL _enemy_vertical
595   0000              	GLOBAL _ay_fx_play
596   0000              	GLOBAL _ay_midi_play
597   0000              	GLOBAL _ay_is_playing
598   0000              	GLOBAL _ay_reset
599   0000              	GLOBAL _test_func
600   0000              	GLOBAL _test_proc
601   0000              	GLOBAL _in_mouse_kempston_wheel_delta
602   0000              	GLOBAL _in_mouse_kempston_wheel
603   0000              	GLOBAL _in_mouse_kempston_callee
604   0000              	GLOBAL _in_mouse_kempston
605   0000              	GLOBAL _in_mouse_kempston_setpos_callee
606   0000              	GLOBAL _in_mouse_kempston_setpos
607   0000              	GLOBAL _in_mouse_kempston_reset
608   0000              	GLOBAL _in_mouse_kempston_init
609   0000              	GLOBAL _in_mouse_amx_wheel_delta
610   0000              	GLOBAL _in_mouse_amx_wheel
611   0000              	GLOBAL _in_mouse_amx_callee
612   0000              	GLOBAL _in_mouse_amx
613   0000              	GLOBAL _in_mouse_amx_setpos_callee
614   0000              	GLOBAL _in_mouse_amx_setpos
615   0000              	GLOBAL _in_mouse_amx_reset
616   0000              	GLOBAL _in_mouse_amx_init_callee
617   0000              	GLOBAL _in_mouse_amx_init
618   0000              	GLOBAL _in_stick_sinclair2
619   0000              	GLOBAL _in_stick_sinclair1
620   0000              	GLOBAL _in_stick_kempston
621   0000              	GLOBAL _in_stick_fuller
622   0000              	GLOBAL _in_stick_cursor
623   0000              	GLOBAL _in_stick_keyboard_fastcall
624   0000              	GLOBAL _in_stick_keyboard
625   0000              	GLOBAL _in_wait_nokey
626   0000              	GLOBAL _in_wait_key
627   0000              	GLOBAL _in_test_key
628   0000              	GLOBAL _in_pause_fastcall
629   0000              	GLOBAL _in_pause
630   0000              	GLOBAL _in_key_scancode_fastcall
631   0000              	GLOBAL _in_key_scancode
632   0000              	GLOBAL _in_key_pressed_fastcall
633   0000              	GLOBAL _in_key_pressed
634   0000              	GLOBAL _in_inkey
635   0000              	GLOBAL _NIRVANAP_CHAR_TABLE
636   0000              	GLOBAL _NIRVANAP_WIDE_IMAGES
637   0000              	GLOBAL _NIRVANAP_TILE_IMAGES
638   0000              	GLOBAL _NIRVANAP_HOLE
639   0000              	GLOBAL _NIRVANAP_ISR_HOOK
640   0000              	GLOBAL _map_paper_last
641   0000              	GLOBAL _map_paper_clr
642   0000              	GLOBAL _map_paper
643   0000              	GLOBAL _draw_count
644   0000              	GLOBAL _g_player_hit_right
645   0000              	GLOBAL _g_player_hit_left
646   0000              	GLOBAL _joynames
647   0000              	GLOBAL _initials
648   0000              	GLOBAL _bullet_count
649   0000              	GLOBAL _bullet_frames
650   0000              	GLOBAL _bullet_colint
651   0000              	GLOBAL _bullet_dir
652   0000              	GLOBAL _bullet_tile
653   0000              	GLOBAL _bullet_col
654   0000              	GLOBAL _bullet_lin
655   0000              	GLOBAL _anim_count
656   0000              	GLOBAL _anim_loop
657   0000              	GLOBAL _anim_end
658   0000              	GLOBAL _anim_int
659   0000              	GLOBAL _anim_tile
660   0000              	GLOBAL _anim_col
661   0000              	GLOBAL _anim_lin
662   0000              	GLOBAL _phase_curr
663   0000              	GLOBAL _map_heigth
664   0000              	GLOBAL _map_width
665   0000              	GLOBAL _scr_curr
666   0000              	GLOBAL _scr_obj
667   0000              	GLOBAL _scr_map
668   0000              	GLOBAL _sprite_speed_alt
669   0000              	GLOBAL _sprite_frames
670   0000              	GLOBAL _sprite_speed
671   0000              	GLOBAL _screen_ink
672   0000              	GLOBAL _screen_paper
673   0000              	GLOBAL _player_over_stair
674   0000              	GLOBAL _game_respawn_index
675   0000              	GLOBAL _game_respawn_tile_index
676   0000              	GLOBAL _game_respawn
677   0000              	GLOBAL _game_menu_sel
678   0000              	GLOBAL _game_score_top
679   0000              	GLOBAL _player_lives
680   0000              	GLOBAL _game_over
681   0000              	GLOBAL _game_sound
682   0000              	GLOBAL _game_inmune
683   0000              	GLOBAL _game_god_mode
684   0000              	GLOBAL _game_two_player
685   0000              	GLOBAL _game_brick_tile
686   0000              	GLOBAL _sprite_curr_index
687   0000              	GLOBAL _spr_count
688   0000              	GLOBAL _bullet_time
689   0000              	GLOBAL _anim_time
690   0000              	GLOBAL _frame_time
691   0000              	GLOBAL _entry_time
692   0000              	GLOBAL _curr_time
693   0000              	GLOBAL _s_state
694   0000              	GLOBAL _attrib_hl
695   0000              	GLOBAL _attrib
696   0000              	GLOBAL _zx_val_asm
697   0000              	GLOBAL _enemies
698   0000              	GLOBAL _tmp_ui
699   0000              	GLOBAL _tmp_sc
700   0000              	GLOBAL _tmp_uc
701   0000              	GLOBAL _tmp1
702   0000              	GLOBAL _tmp0
703   0000              	GLOBAL _tmp
704   0000              	GLOBAL _index1
705   0000              	GLOBAL _index0
706   0000              	GLOBAL _loop_count
707   0000              	GLOBAL _s_col1
708   0000              	GLOBAL _s_col0
709   0000              	GLOBAL _s_lin1
710   0000              	GLOBAL _s_lin0
711   0000              	GLOBAL _s_tile1
712   0000              	GLOBAL _s_tile0
713   0000              	GLOBAL _player_hit_count
714   0000              	GLOBAL _sprite_horizontal_check
715   0000              	GLOBAL _sprite_on_air
716   0000              	GLOBAL _sprite
717   0000              	GLOBAL _game_gravity
718   0000              	GLOBAL _player_keys
719   0000              	GLOBAL _player_vel_inc
720   0000              	GLOBAL _player_vel_y1
721   0000              	GLOBAL _player_vel_y0
722   0000              	GLOBAL _player_vel_y
723   0000              	GLOBAL _player_vel_x
724   0000              	GLOBAL _player_joy
725   0000              	GLOBAL _player_score
726   0000              	GLOBAL _last_time
727   0000              	GLOBAL _player_slide
728   0000              	GLOBAL _spr_timer
729   0000              	GLOBAL _jump_lin
730   0000              	GLOBAL _player_hit_col
731   0000              	GLOBAL _player_hit_lin
732   0000              	GLOBAL _colint
733   0000              	GLOBAL _col
734   0000              	GLOBAL _lin
735   0000              	GLOBAL _tile
736   0000              	GLOBAL _state_a
737   0000              	GLOBAL _state
738   0000              	GLOBAL _class
739   0000              	GLOBAL _tbuffer
740   0000              	GLOBAL _dirs
741   0000              	GLOBAL _k1
742   0000              	GLOBAL _joyfunc1
743   0000              	GLOBAL _btiles
744   0000              	GLOBAL _spec128
745   0000              	GLOBAL _GLOBAL_ZX_PORT_7FFD
746   0000              	GLOBAL _GLOBAL_ZX_PORT_1FFD
747   0000              	GLOBAL _GLOBAL_ZX_PORT_FE
748   0000              	GLOBAL _ay_effect_20
749   0000              	GLOBAL _ay_effect_19
750   0000              	GLOBAL _ay_effect_18
751   0000              	GLOBAL _ay_effect_17
752   0000              	GLOBAL _ay_effect_16
753   0000              	GLOBAL _ay_effect_15
754   0000              	GLOBAL _ay_effect_14
755   0000              	GLOBAL _ay_effect_13
756   0000              	GLOBAL _ay_effect_12
757   0000              	GLOBAL _ay_effect_11
758   0000              	GLOBAL _ay_effect_10
759   0000              	GLOBAL _ay_effect_09
760   0000              	GLOBAL _ay_effect_08
761   0000              	GLOBAL _ay_effect_07
762   0000              	GLOBAL _ay_effect_06
763   0000              	GLOBAL _ay_effect_05
764   0000              	GLOBAL _ay_effect_04
765   0000              	GLOBAL _ay_effect_03
766   0000              	GLOBAL _ay_effect_02
767   0000              	GLOBAL _ay_effect_01
768   0000              	GLOBAL _pb_midi_phase_1
769   0000              	GLOBAL _pb_midi_title
770   0000              	GLOBAL _control_method
771   0000              	GLOBAL _scr_7
772   0000              	GLOBAL _scr_6
773   0000              	GLOBAL _scr_5
774   0000              	GLOBAL _scr_4
775   0000              	GLOBAL _scr_3
776   0000              	GLOBAL _scr_2
777   0000              	GLOBAL _scr_1
778   0000              	GLOBAL _scr_0
779   0000              ;--------------------------------------------------------
780   0000              ; special function registers
781   0000              ;--------------------------------------------------------
782   0000              defc _IO_FE	=	0x00fe
783   0000              defc _IO_1FFD	=	0x1ffd
784   0000              defc _IO_7FFD	=	0x7ffd
785   0000              ;--------------------------------------------------------
786   0000              ; ram data
787   0000              ;--------------------------------------------------------
788   0000              	SECTION bss_compiler
789   0000              ;--------------------------------------------------------
790   0000              ; ram data
791   0000              ;--------------------------------------------------------
792   0000              
793   0000              IF 0
794   0000              
795   0000              ; .area _INITIALIZED removed by z88dk
796   0000              
797   0000              
798   0000              ENDIF
799   0000              
800   0000              ;--------------------------------------------------------
801   0000              ; absolute external ram data
802   0000              ;--------------------------------------------------------
803   0000              	SECTION IGNORE
804   0000              ;--------------------------------------------------------
805   0000              ; global & static initialisations
806   0000              ;--------------------------------------------------------
807   0000              	SECTION code_crt_init
808   0000              ;--------------------------------------------------------
809   0000              ; Home
810   0000              ;--------------------------------------------------------
811   0000              	SECTION IGNORE
812   0000              ;--------------------------------------------------------
813   0000              ; code
814   0000              ;--------------------------------------------------------
815   0000              	SECTION code_compiler
816   0000              ;	---------------------------------
817   0000              ; Function player_init
818   0000              ; ---------------------------------
819   0000              _player_init:
820   0000  CD 00 00    	call	___sdcc_enter_ix
821   0003  F5          	push	af
822   0004  3E 00       	ld	a, +((_class) & 0xFF)
823   0006  DD 86 04    	add	a,(ix+4)
824   0009  4F          	ld	c, a
825   000A  3E 00       	ld	a, +((_class) / 256)
826   000C  CE 00       	adc	a,0x00
827   000E  47          	ld	b, a
828   000F  3E 10       	ld	a,0x10
829   0011  02          	ld	(bc), a
830   0012  3E 00       	ld	a, +((_tile) & 0xFF)
831   0014  DD 86 04    	add	a,(ix+4)
832   0017  4F          	ld	c, a
833   0018  3E 00       	ld	a, +((_tile) / 256)
834   001A  CE 00       	adc	a,0x00
835   001C  47          	ld	b, a
836   001D  DD 7E 07    	ld	a,(ix+7)
837   0020  02          	ld	(bc), a
838   0021  3E 00       	ld	a, +((_lin) & 0xFF)
839   0023  DD 86 04    	add	a,(ix+4)
840   0026  4F          	ld	c, a
841   0027  3E 00       	ld	a, +((_lin) / 256)
842   0029  CE 00       	adc	a,0x00
843   002B  47          	ld	b, a
844   002C  DD 7E 05    	ld	a,(ix+5)
845   002F  02          	ld	(bc), a
846   0030  3E 00       	ld	a, +((_col) & 0xFF)
847   0032  DD 86 04    	add	a,(ix+4)
848   0035  4F          	ld	c, a
849   0036  3E 00       	ld	a, +((_col) / 256)
850   0038  CE 00       	adc	a,0x00
851   003A  47          	ld	b, a
852   003B  DD 7E 06    	ld	a,(ix+6)
853   003E  02          	ld	(bc), a
854   003F  3E 00       	ld	a, +((_colint) & 0xFF)
855   0041  DD 86 04    	add	a,(ix+4)
856   0044  4F          	ld	c, a
857   0045  3E 00       	ld	a, +((_colint) / 256)
858   0047  CE 00       	adc	a,0x00
859   0049  47          	ld	b, a
860   004A  AF          	xor	a, a
861   004B  02          	ld	(bc), a
862   004C  3E 00       	ld	a, +((_state) & 0xFF)
863   004E  DD 86 04    	add	a,(ix+4)
864   0051  4F          	ld	c, a
865   0052  3E 00       	ld	a, +((_state) / 256)
866   0054  CE 00       	adc	a,0x00
867   0056  47          	ld	b, a
868   0057  AF          	xor	a, a
869   0058  02          	ld	(bc), a
870   0059  3E 00       	ld	a, +((_state_a) & 0xFF)
871   005B  DD 86 04    	add	a,(ix+4)
872   005E  4F          	ld	c, a
873   005F  3E 00       	ld	a, +((_state_a) / 256)
874   0061  CE 00       	adc	a,0x00
875   0063  47          	ld	b, a
876   0064  AF          	xor	a, a
877   0065  02          	ld	(bc), a
878   0066  3E 00       	ld	a, +((_jump_lin) & 0xFF)
879   0068  DD 86 04    	add	a,(ix+4)
880   006B  5F          	ld	e, a
881   006C  3E 00       	ld	a, +((_jump_lin) / 256)
882   006E  CE 00       	adc	a,0x00
883   0070  57          	ld	d, a
884   0071  DD 7E 05    	ld	a,(ix+5)
885   0074  12          	ld	(de), a
886   0075  DD 6E 04    	ld	l,(ix+4)
887   0078  26 00       	ld	h,0x00
888   007A  29          	add	hl,hl
889   007B  11 00 00    	ld	de,_last_time
890   007E  19          	add	hl, de
891   007F  E3          	ex	(sp), hl
892   0080  E1          	pop	hl
893   0081  ED 5B 00 00 	ld	de,(_curr_time)
894   0085  E5          	push	hl
895   0086  73          	ld	(hl), e
896   0087  23          	inc	hl
897   0088  72          	ld	(hl), d
898   0089  3E 00       	ld	a, +((_sprite_speed_alt) & 0xFF)
899   008B  DD 86 04    	add	a,(ix+4)
900   008E  5F          	ld	e, a
901   008F  3E 00       	ld	a, +((_sprite_speed_alt) / 256)
902   0091  CE 00       	adc	a,0x00
903   0093  57          	ld	d, a
904   0094  AF          	xor	a, a
905   0095  12          	ld	(de), a
906   0096  0A          	ld	a, (bc)
907   0097  F6 11       	or	a,+(0x01|0x10)
908   0099  02          	ld	(bc),a
909   009A  21 00 00    	ld	hl,_player_hit_col
910   009D  36 00       	ld	(hl),0x00
911   009F  21 00 00    	ld	hl,_player_hit_lin
912   00A2  36 00       	ld	(hl),0x00
913   00A4  21 00 00    	ld	hl,_player_slide
914   00A7  36 00       	ld	(hl),0x00
915   00A9  DD 66 06    	ld	h,(ix+6)
916   00AC  DD 6E 05    	ld	l,(ix+5)
917   00AF  E5          	push	hl
918   00B0  DD 66 07    	ld	h,(ix+7)
919   00B3  DD 6E 04    	ld	l,(ix+4)
920   00B6  E5          	push	hl
921   00B7  CD 00 00    	call	_NIRVANAP_spriteT_callee
922   00BA  F1          	pop	af
923   00BB  DD E1       	pop	ix
924   00BD  C9          	ret
925   00BE              	SECTION code_compiler
926   00BE              ;	---------------------------------
927   00BE              ; Function player_check_input
928   00BE              ; ---------------------------------
929   00BE              _player_check_input:
930   00BE  21 00 00    	ld	hl,_dirs
931   00C1  CB 56       	bit	2, (hl)
932   00C3  28 0C       	jr	Z,l_player_check_input_00102
933   00C5  21 00 00    	ld	hl,_dirs
934   00C8  CB 5E       	bit	3, (hl)
935   00CA  28 05       	jr	Z,l_player_check_input_00102
936   00CC  21 00 00    	ld	hl,_dirs
937   00CF  36 00       	ld	(hl),0x00
938   00D1              l_player_check_input_00102:
939   00D1  21 00 00    	ld	hl,_dirs
940   00D4  7E          	ld	a, (hl)
941   00D5  CB 07       	rlc	a
942   00D7  E6 01       	and	a,0x01
943   00D9  CB 47       	bit	0, a
944   00DB  20 1D       	jr	NZ,l_player_check_input_00107
945   00DD  CB 56       	bit	2, (hl)
946   00DF  20 19       	jr	NZ,l_player_check_input_00107
947   00E1  21 00 00    	ld	hl,_dirs
948   00E4  CB 5E       	bit	3, (hl)
949   00E6  20 12       	jr	NZ,l_player_check_input_00107
950   00E8  21 00 00    	ld	hl,_dirs
951   00EB  CB 46       	bit	0, (hl)
952   00ED  20 0B       	jr	NZ,l_player_check_input_00107
953   00EF  21 00 00    	ld	hl,_dirs
954   00F2  CB 4E       	bit	1, (hl)
955   00F4  20 04       	jr	NZ,l_player_check_input_00107
956   00F6  2E 00       	ld	l,0x00
957   00F8  18 02       	jr	l_player_check_input_00108
958   00FA              l_player_check_input_00107:
959   00FA  2E 01       	ld	l,0x01
960   00FC              l_player_check_input_00108:
961   00FC  C9          	ret
962   00FD              	SECTION code_compiler
963   00FD              ;	---------------------------------
964   00FD              ; Function player_collision
965   00FD              ; ---------------------------------
966   00FD              _player_collision:
967   00FD  21 00 00    	ld	hl,_sprite
968   0100  36 00       	ld	(hl),0x00
969   0102  3A 07 00    	ld	a,(_col + 7)
970   0105  32 00 00    	ld	(_s_col1),a
971   0108  3A 07 00    	ld	a,(_lin + 7)
972   010B  32 00 00    	ld	(_s_lin1),a
973   010E              l_player_collision_00107:
974   010E  21 00 00    	ld	hl,_sprite
975   0111  7E          	ld	a, (hl)
976   0112  D6 07       	sub	a,0x07
977   0114  30 66       	jr	NC,l_player_collision_00109
978   0116  3E 00       	ld	a, +((_class) & 0xFF)
979   0118  86          	add	a, (hl)
980   0119  4F          	ld	c, a
981   011A  3E 00       	ld	a, +((_class) / 256)
982   011C  CE 00       	adc	a,0x00
983   011E  47          	ld	b, a
984   011F  0A          	ld	a, (bc)
985   0120  B7          	or	a, a
986   0121  28 53       	jr	Z,l_player_collision_00106
987   0123  4E          	ld	c,(hl)
988   0124  06 00       	ld	b,0x00
989   0126  21 00 00    	ld	hl,_col
990   0129  09          	add	hl,bc
991   012A  4E          	ld	c, (hl)
992   012B  06 00       	ld	b,0x00
993   012D  3A 00 00    	ld	a,(_s_col1)
994   0130  5F          	ld	e,a
995   0131  16 00       	ld	d,0x00
996   0133  79          	ld	a, c
997   0134  93          	sub	a, e
998   0135  6F          	ld	l, a
999   0136  78          	ld	a, b
1000  0137  9A          	sbc	a, d
1001  0138  67          	ld	h, a
1002  0139  CD 00 00    	call	_abs_fastcall
1003  013C  7D          	ld	a,l
1004  013D  D6 02       	sub	a,0x02
1005  013F  7C          	ld	a,h
1006  0140  17          	rla
1007  0141  3F          	ccf
1008  0142  1F          	rra
1009  0143  DE 80       	sbc	a,0x80
1010  0145  30 2F       	jr	NC,l_player_collision_00106
1011  0147  2A 00 00    	ld	hl,(_sprite)
1012  014A  26 00       	ld	h,0x00
1013  014C  01 00 00    	ld	bc,_lin
1014  014F  09          	add	hl,bc
1015  0150  4E          	ld	c,(hl)
1016  0151  06 00       	ld	b,0x00
1017  0153  3A 00 00    	ld	a,(_s_lin1)
1018  0156  5F          	ld	e,a
1019  0157  16 00       	ld	d,0x00
1020  0159  79          	ld	a, c
1021  015A  93          	sub	a, e
1022  015B  6F          	ld	l, a
1023  015C  78          	ld	a, b
1024  015D  9A          	sbc	a, d
1025  015E  67          	ld	h, a
1026  015F  CD 00 00    	call	_abs_fastcall
1027  0162  7D          	ld	a,l
1028  0163  D6 0E       	sub	a,0x0e
1029  0165  7C          	ld	a,h
1030  0166  17          	rla
1031  0167  3F          	ccf
1032  0168  1F          	rra
1033  0169  DE 80       	sbc	a,0x80
1034  016B  30 09       	jr	NC,l_player_collision_00106
1035  016D  2E 02       	ld	l,0x02
1036  016F  CD 00 00    	call	_zx_border_fastcall
1037  0172  2E 01       	ld	l,0x01
1038  0174  18 08       	jr	l_player_collision_00110
1039  0176              l_player_collision_00106:
1040  0176  21 00 00    	ld	hl,_sprite
1041  0179  34          	inc	(hl)
1042  017A  18 92       	jr	l_player_collision_00107
1043  017C              l_player_collision_00109:
1044  017C  2E 00       	ld	l,0x00
1045  017E              l_player_collision_00110:
1046  017E  C9          	ret
1047  017F              	SECTION code_compiler
1048  017F              ;	---------------------------------
1049  017F              ; Function player_kill
1050  017F              ; ---------------------------------
1051  017F              _player_kill:
1052  017F  01 00 00    	ld	bc,_state+0
1053  0182  2A 00 00    	ld	hl,(_sprite)
1054  0185  26 00       	ld	h,0x00
1055  0187  09          	add	hl,bc
1056  0188  CB 6E       	bit	5,(hl)
1057  018A  C2 51 02    	jp	NZ,l_player_kill_00109
1058  018D  C5          	push	bc
1059  018E  CD 00 00    	call	_sound_hit_brick
1060  0191  C1          	pop	bc
1061  0192  79          	ld	a, c
1062  0193  21 00 00    	ld	hl,_sprite
1063  0196  86          	add	a, (hl)
1064  0197  5F          	ld	e, a
1065  0198  78          	ld	a, b
1066  0199  CE 00       	adc	a,0x00
1067  019B  57          	ld	d, a
1068  019C  1A          	ld	a, (de)
1069  019D  F6 20       	or	a,0x20
1070  019F  12          	ld	(de), a
1071  01A0  3E 00       	ld	a, +((_sprite_speed_alt) & 0xFF)
1072  01A2  86          	add	a, (hl)
1073  01A3  5F          	ld	e, a
1074  01A4  3E 00       	ld	a, +((_sprite_speed_alt) / 256)
1075  01A6  CE 00       	adc	a,0x00
1076  01A8  57          	ld	d, a
1077  01A9  3E 03       	ld	a,0x03
1078  01AB  12          	ld	(de), a
1079  01AC  79          	ld	a, c
1080  01AD  86          	add	a, (hl)
1081  01AE  4F          	ld	c, a
1082  01AF  78          	ld	a, b
1083  01B0  CE 00       	adc	a,0x00
1084  01B2  47          	ld	b, a
1085  01B3  0A          	ld	a, (bc)
1086  01B4  CB 57       	bit	2, a
1087  01B6  28 0D       	jr	Z,l_player_kill_00102
1088  01B8  2A 00 00    	ld	hl,(_sprite)
1089  01BB  26 00       	ld	h,0x00
1090  01BD  01 00 00    	ld	bc,_tile
1091  01C0  09          	add	hl,bc
1092  01C1  36 40       	ld	(hl),0x40
1093  01C3  18 0B       	jr	l_player_kill_00103
1094  01C5              l_player_kill_00102:
1095  01C5  2A 00 00    	ld	hl,(_sprite)
1096  01C8  26 00       	ld	h,0x00
1097  01CA  01 00 00    	ld	bc,_tile
1098  01CD  09          	add	hl,bc
1099  01CE  36 48       	ld	(hl),0x48
1100  01D0              l_player_kill_00103:
1101  01D0  CD 48 09    	call	_player_hit_platform_clear
1102  01D3  2A 00 00    	ld	hl,(_sprite)
1103  01D6  26 00       	ld	h,0x00
1104  01D8  01 00 00    	ld	bc,_col
1105  01DB  09          	add	hl,bc
1106  01DC  4E          	ld	c, (hl)
1107  01DD  2A 00 00    	ld	hl,(_sprite)
1108  01E0  26 00       	ld	h,0x00
1109  01E2  11 00 00    	ld	de,_lin
1110  01E5  19          	add	hl,de
1111  01E6  46          	ld	b, (hl)
1112  01E7  2A 00 00    	ld	hl,(_sprite)
1113  01EA  26 00       	ld	h,0x00
1114  01EC  11 00 00    	ld	de,_tile
1115  01EF  19          	add	hl,de
1116  01F0  56          	ld	d, (hl)
1117  01F1  79          	ld	a,c
1118  01F2  21 00 00    	ld	hl,_sprite
1119  01F5  F5          	push	af
1120  01F6  33          	inc	sp
1121  01F7  4A          	ld	c, d
1122  01F8  7E          	ld	a,(hl)
1123  01F9  C5          	push	bc
1124  01FA  F5          	push	af
1125  01FB  33          	inc	sp
1126  01FC  CD 00 00    	call	_NIRVANAP_spriteT_callee
1127  01FF  01 00 00    	ld	bc,_spr_timer+0
1128  0202  2A 00 00    	ld	hl,(_sprite)
1129  0205  26 00       	ld	h,0x00
1130  0207  29          	add	hl, hl
1131  0208  09          	add	hl,bc
1132  0209  ED 5B 00 00 	ld	de,(_curr_time)
1133  020D  73          	ld	(hl),e
1134  020E  23          	inc	hl
1135  020F  72          	ld	(hl),d
1136  0210  3A 00 00    	ld	a,(_sprite)
1137  0213  D6 07       	sub	a,0x07
1138  0215  20 1E       	jr	NZ,l_player_kill_00105
1139  0217  01 00 00    	ld	bc,_state_a+0
1140  021A  79          	ld	a, c
1141  021B  21 00 00    	ld	hl,_sprite
1142  021E  86          	add	a, (hl)
1143  021F  5F          	ld	e, a
1144  0220  78          	ld	a, b
1145  0221  CE 00       	adc	a,0x00
1146  0223  57          	ld	d, a
1147  0224  1A          	ld	a, (de)
1148  0225  F6 08       	or	a,0x08
1149  0227  12          	ld	(de), a
1150  0228  79          	ld	a, c
1151  0229  86          	add	a, (hl)
1152  022A  4F          	ld	c, a
1153  022B  78          	ld	a, b
1154  022C  CE 00       	adc	a,0x00
1155  022E  47          	ld	b, a
1156  022F  0A          	ld	a, (bc)
1157  0230  E6 EF       	and	a,0xef
1158  0232  02          	ld	(bc), a
1159  0233  18 1C       	jr	l_player_kill_00109
1160  0235              l_player_kill_00105:
1161  0235  01 00 00    	ld	bc,_state_a+0
1162  0238  79          	ld	a, c
1163  0239  21 00 00    	ld	hl,_sprite
1164  023C  86          	add	a, (hl)
1165  023D  5F          	ld	e, a
1166  023E  78          	ld	a, b
1167  023F  CE 00       	adc	a,0x00
1168  0241  57          	ld	d, a
1169  0242  1A          	ld	a, (de)
1170  0243  F6 10       	or	a,0x10
1171  0245  12          	ld	(de), a
1172  0246  79          	ld	a, c
1173  0247  86          	add	a, (hl)
1174  0248  4F          	ld	c, a
1175  0249  78          	ld	a, b
1176  024A  CE 00       	adc	a,0x00
1177  024C  47          	ld	b, a
1178  024D  0A          	ld	a, (bc)
1179  024E  E6 F7       	and	a,0xf7
1180  0250  02          	ld	(bc), a
1181  0251              l_player_kill_00109:
1182  0251  C9          	ret
1183  0252              	SECTION code_compiler
1184  0252              ;	---------------------------------
1185  0252              ; Function player_restart
1186  0252              ; ---------------------------------
1187  0252              _player_restart:
1188  0252  CD 00 00    	call	___sdcc_enter_ix
1189  0255  F5          	push	af
1190  0256  4D          	ld	c, l
1191  0257  21 00 00    	ld	hl,_ay_effect_15
1192  025A  CD 00 00    	call	_ay_fx_play
1193  025D  C5          	push	bc
1194  025E  21 0E 64    	ld	hl,0x640e
1195  0261  E5          	push	hl
1196  0262  21 07 00    	ld	hl,0x0007
1197  0265  E5          	push	hl
1198  0266  CD 00 00    	call	_player_init
1199  0269  F1          	pop	af
1200  026A  F1          	pop	af
1201  026B  C1          	pop	bc
1202  026C  11 00 00    	ld	de,_state+0
1203  026F  69          	ld	l,c
1204  0270  26 00       	ld	h,0x00
1205  0272  19          	add	hl, de
1206  0273  CB E6       	set	4, (hl)
1207  0275  11 00 00    	ld	de,_state_a+0
1208  0278  69          	ld	l,c
1209  0279  26 00       	ld	h,0x00
1210  027B  19          	add	hl, de
1211  027C  CB C6       	set	0, (hl)
1212  027E  11 00 00    	ld	de,_spr_timer+0
1213  0281  69          	ld	l, c
1214  0282  26 00       	ld	h,0x00
1215  0284  29          	add	hl, hl
1216  0285  19          	add	hl,de
1217  0286  E3          	ex	(sp), hl
1218  0287  E1          	pop	hl
1219  0288  ED 5B 00 00 	ld	de,(_curr_time)
1220  028C  E5          	push	hl
1221  028D  73          	ld	(hl), e
1222  028E  23          	inc	hl
1223  028F  72          	ld	(hl), d
1224  0290  11 00 00    	ld	de,_sprite_speed_alt+0
1225  0293  69          	ld	l,c
1226  0294  26 00       	ld	h,0x00
1227  0296  19          	add	hl, de
1228  0297  F1          	pop	af
1229  0298  36 08       	ld	(hl),0x08
1230  029A  DD E1       	pop	ix
1231  029C  C9          	ret
1232  029D              	SECTION code_compiler
1233  029D              ;	---------------------------------
1234  029D              ; Function player_lost_life
1235  029D              ; ---------------------------------
1236  029D              _player_lost_life:
1237  029D  CD 00 00    	call	_sound_hit_enemy
1238  02A0  21 00 00    	ld	hl,_player_lives
1239  02A3  35          	dec (hl)
1240  02A4  20 09       	jr	NZ,l_player_lost_life_00102
1241  02A6  21 00 00    	ld	hl,_game_over
1242  02A9  36 01       	ld	(hl),0x01
1243  02AB  2E 00       	ld	l,0x00
1244  02AD  18 05       	jr	l_player_lost_life_00103
1245  02AF              l_player_lost_life_00102:
1246  02AF  CD 00 00    	call	_game_print_lives
1247  02B2  2E 01       	ld	l,0x01
1248  02B4              l_player_lost_life_00103:
1249  02B4  C9          	ret
1250  02B5              	SECTION code_compiler
1251  02B5              ;	---------------------------------
1252  02B5              ; Function player_turn
1253  02B5              ; ---------------------------------
1254  02B5              _player_turn:
1255  02B5  2A 00 00    	ld	hl,(_sprite)
1256  02B8  26 00       	ld	h,0x00
1257  02BA  01 00 00    	ld	bc,_class
1258  02BD  09          	add	hl,bc
1259  02BE  7E          	ld	a,(hl)
1260  02BF  D6 10       	sub	a,0x10
1261  02C1  C0          	ret	NZ
1262  02C2  3A 00 00    	ld	a,(_player_lives)
1263  02C5  B7          	or	a, a
1264  02C6  C8          	ret	Z
1265  02C7  21 00 00    	ld	hl,_sprite
1266  02CA  CD 00 00    	call	_spr_chktime
1267  02CD  7D          	ld	a, l
1268  02CE  B7          	or	a, a
1269  02CF  C8          	ret	Z
1270  02D0  21 00 00    	ld	hl,_k1
1271  02D3  E5          	push	hl
1272  02D4  2A 00 00    	ld	hl,(_joyfunc1)
1273  02D7  CD 00 00    	call	___sdcc_call_hl
1274  02DA  F1          	pop	af
1275  02DB  7D          	ld	a,l
1276  02DC  32 00 00    	ld	(_dirs),a
1277  02DF  CD E5 02    	call	_player_move
1278  02E2  C3 FD 00    	jp  _player_collision
1279  02E5              	SECTION code_compiler
1280  02E5              ;	---------------------------------
1281  02E5              ; Function player_move
1282  02E5              ; ---------------------------------
1283  02E5              _player_move:
1284  02E5  2A 00 00    	ld	hl,(_sprite)
1285  02E8  26 00       	ld	h,0x00
1286  02EA  01 00 00    	ld	bc,_lin
1287  02ED  09          	add	hl,bc
1288  02EE  7E          	ld	a,(hl)
1289  02EF  32 00 00    	ld	(_s_lin0),a
1290  02F2  2A 00 00    	ld	hl,(_sprite)
1291  02F5  26 00       	ld	h,0x00
1292  02F7  01 00 00    	ld	bc,_col
1293  02FA  09          	add	hl,bc
1294  02FB  7E          	ld	a,(hl)
1295  02FC  32 00 00    	ld	(_s_col0),a
1296  02FF  2A 00 00    	ld	hl,(_sprite)
1297  0302  26 00       	ld	h,0x00
1298  0304  01 00 00    	ld	bc,_tile
1299  0307  09          	add	hl,bc
1300  0308  4E          	ld	c, (hl)
1301  0309  3A 00 00    	ld	a,(_sprite)
1302  030C  5F          	ld	e,a
1303  030D  16 00       	ld	d,0x00
1304  030F  21 00 00    	ld	hl,_colint
1305  0312  19          	add	hl,de
1306  0313  7E          	ld	a,(hl)
1307  0314  81          	add	a,c
1308  0315  32 00 00    	ld	(_s_tile0),a
1309  0318  2A 00 00    	ld	hl,(_sprite)
1310  031B  26 00       	ld	h,0x00
1311  031D  01 00 00    	ld	bc,_state
1312  0320  09          	add	hl,bc
1313  0321  7E          	ld	a,(hl)
1314  0322  CB 47       	bit	0,a
1315  0324  32 00 00    	ld	(_s_state),a
1316  0327  20 07       	jr	NZ,l_player_move_00113
1317  0329  21 00 00    	ld	hl,_s_state
1318  032C  CB 4E       	bit	1, (hl)
1319  032E  28 46       	jr	Z,l_player_move_00114
1320  0330              l_player_move_00113:
1321  0330  CD 6F 06    	call	_player_fire
1322  0333  3A 00 00    	ld	a,(_player_vel_y)
1323  0336  21 00 00    	ld	hl,_player_vel_y1
1324  0339  96          	sub	a, (hl)
1325  033A  E2 3F 03    	jp	PO, l_player_move_00162
1326  033D  EE 80       	xor	a,0x80
1327  033F              l_player_move_00162:
1328  033F  F2 62 03    	jp	P, l_player_move_00106
1329  0342  21 00 00    	ld	hl,_dirs
1330  0345  CB 56       	bit	2, (hl)
1331  0347  28 09       	jr	Z,l_player_move_00102
1332  0349  21 00 00    	ld	hl,_s_state
1333  034C  7E          	ld	a,(hl)
1334  034D  F6 08       	or	a,0x08
1335  034F  E6 FB       	and	a,0xfb
1336  0351  77          	ld	(hl),a
1337  0352              l_player_move_00102:
1338  0352  21 00 00    	ld	hl,_dirs
1339  0355  CB 4E       	bit	1, (hl)
1340  0357  28 09       	jr	Z,l_player_move_00106
1341  0359  21 00 00    	ld	hl,_s_state
1342  035C  7E          	ld	a,(hl)
1343  035D  F6 04       	or	a,0x04
1344  035F  E6 F7       	and	a,0xf7
1345  0361  77          	ld	(hl),a
1346  0362              l_player_move_00106:
1347  0362  CD 1D 0A    	call	_player_move_jump
1348  0365  7D          	ld	a, l
1349  0366  B7          	or	a, a
1350  0367  28 2E       	jr	Z,l_player_move_00115
1351  0369  3A 00 00    	ld	a,(_player_over_stair)
1352  036C  B7          	or	a, a
1353  036D  20 28       	jr	NZ,l_player_move_00115
1354  036F  2E 54       	ld	l,0x54
1355  0371  CD A8 04    	call	_player_tile
1356  0374  18 21       	jr	l_player_move_00115
1357  0376              l_player_move_00114:
1358  0376  CD FE 04    	call	_player_move_input
1359  0379  7D          	ld	a, l
1360  037A  B7          	or	a, a
1361  037B  20 17       	jr	NZ,l_player_move_00112
1362  037D  2A 00 00    	ld	hl,(_sprite)
1363  0380  26 00       	ld	h,0x00
1364  0382  01 00 00    	ld	bc,_colint
1365  0385  09          	add	hl,bc
1366  0386  AF          	xor	a,a
1367  0387  77          	ld	(hl),a
1368  0388  2E 64       	ld	l,0x64
1369  038A  CD A8 04    	call	_player_tile
1370  038D  21 00 00    	ld	hl,_s_state
1371  0390  7E          	ld	a,(hl)
1372  0391  E6 F3       	and	a,+(0xf7&0xfb)
1373  0393  77          	ld	(hl),a
1374  0394              l_player_move_00112:
1375  0394  CD A1 09    	call	_player_check_floor
1376  0397              l_player_move_00115:
1377  0397  CD 00 00    	call	_spr_redraw
1378  039A  7D          	ld	a, l
1379  039B  B7          	or	a, a
1380  039C  28 03       	jr	Z,l_player_move_00118
1381  039E  CD 8A 06    	call	_player_check_map
1382  03A1              l_player_move_00118:
1383  03A1  3A 00 00    	ld	a,(_player_hit_lin)
1384  03A4  B7          	or	a, a
1385  03A5  28 03       	jr	Z,l_player_move_00120
1386  03A7  CD 48 09    	call	_player_hit_platform_clear
1387  03AA              l_player_move_00120:
1388  03AA  2A 00 00    	ld	hl,(_sprite)
1389  03AD  26 00       	ld	h,0x00
1390  03AF  01 00 00    	ld	bc,_state
1391  03B2  09          	add	hl,bc
1392  03B3  3A 00 00    	ld	a,(_s_state)
1393  03B6  77          	ld	(hl),a
1394  03B7  2E 00       	ld	l,0x00
1395  03B9  C9          	ret
1396  03BA              	SECTION code_compiler
1397  03BA              ;	---------------------------------
1398  03BA              ; Function player_check_stairs_down
1399  03BA              ; ---------------------------------
1400  03BA              _player_check_stairs_down:
1401  03BA  CD 00 00    	call	___sdcc_enter_ix
1402  03BD  3B          	dec	sp
1403  03BE  2A 00 00    	ld	hl,(_sprite)
1404  03C1  26 00       	ld	h,0x00
1405  03C3  5D          	ld	e,l
1406  03C4  01 00 00    	ld	bc,_col
1407  03C7  09          	add	hl,bc
1408  03C8  46          	ld	b,(hl)
1409  03C9  16 00       	ld	d,0x00
1410  03CB  21 00 00    	ld	hl,_lin
1411  03CE  19          	add	hl,de
1412  03CF  7E          	ld	a,(hl)
1413  03D0  C6 10       	add	a,0x10
1414  03D2  4F          	ld	c,a
1415  03D3  C5          	push	bc
1416  03D4  CD 00 00    	call	_spr_calc_index
1417  03D7  F1          	pop	af
1418  03D8  7D          	ld	a,l
1419  03D9  32 00 00    	ld	(_sprite_curr_index),a
1420  03DC  4F          	ld	c,a
1421  03DD  06 00       	ld	b,0x00
1422  03DF  21 00 00    	ld	hl,_scr_map
1423  03E2  09          	add	hl,bc
1424  03E3  7E          	ld	a,(hl)
1425  03E4  4F          	ld	c,a
1426  03E5  D6 38       	sub	a,0x38
1427  03E7  38 05       	jr	C,l_player_check_stairs_down_00105
1428  03E9  3E 3C       	ld	a,0x3c
1429  03EB  91          	sub	a, c
1430  03EC  30 04       	jr	NC,l_player_check_stairs_down_00106
1431  03EE              l_player_check_stairs_down_00105:
1432  03EE  3E 00       	ld	a,0x00
1433  03F0  18 02       	jr	l_player_check_stairs_down_00107
1434  03F2              l_player_check_stairs_down_00106:
1435  03F2  3E 01       	ld	a,0x01
1436  03F4              l_player_check_stairs_down_00107:
1437  03F4  B7          	or	a, a
1438  03F5  28 05       	jr	Z,l_player_check_stairs_down_00103
1439  03F7  21 00 00    	ld	hl,_player_over_stair
1440  03FA  36 01       	ld	(hl),0x01
1441  03FC              l_player_check_stairs_down_00103:
1442  03FC  33          	inc	sp
1443  03FD  DD E1       	pop	ix
1444  03FF  C9          	ret
1445  0400              	SECTION code_compiler
1446  0400              ;	---------------------------------
1447  0400              ; Function player_check_stairs
1448  0400              ; ---------------------------------
1449  0400              _player_check_stairs:
1450  0400  CD 00 00    	call	___sdcc_enter_ix
1451  0403  3B          	dec	sp
1452  0404  5D          	ld	e, l
1453  0405  2A 00 00    	ld	hl,(_sprite)
1454  0408  26 00       	ld	h,0x00
1455  040A  01 00 00    	ld	bc,_col
1456  040D  09          	add	hl,bc
1457  040E  7E          	ld	a,(hl)
1458  040F  83          	add	a,e
1459  0410  57          	ld	d,a
1460  0411  2A 00 00    	ld	hl,(_sprite)
1461  0414  26 00       	ld	h,0x00
1462  0416  01 00 00    	ld	bc,_lin
1463  0419  09          	add	hl,bc
1464  041A  46          	ld	b, (hl)
1465  041B  D5          	push	de
1466  041C  58          	ld	e,b
1467  041D  D5          	push	de
1468  041E  CD 00 00    	call	_spr_calc_index
1469  0421  F1          	pop	af
1470  0422  D1          	pop	de
1471  0423  7D          	ld	a,l
1472  0424  32 00 00    	ld	(_sprite_curr_index),a
1473  0427  4F          	ld	c,a
1474  0428  06 00       	ld	b,0x00
1475  042A  21 00 00    	ld	hl,_scr_map
1476  042D  09          	add	hl,bc
1477  042E  7E          	ld	a,(hl)
1478  042F  4F          	ld	c,a
1479  0430  D6 38       	sub	a,0x38
1480  0432  38 05       	jr	C,l_player_check_stairs_00111
1481  0434  3E 3C       	ld	a,0x3c
1482  0436  91          	sub	a, c
1483  0437  30 04       	jr	NC,l_player_check_stairs_00112
1484  0439              l_player_check_stairs_00111:
1485  0439  0E 00       	ld	c,0x00
1486  043B  18 02       	jr	l_player_check_stairs_00113
1487  043D              l_player_check_stairs_00112:
1488  043D  0E 01       	ld	c,0x01
1489  043F              l_player_check_stairs_00113:
1490  043F  3E 00       	ld	a, +((_col) & 0xFF)
1491  0441  21 00 00    	ld	hl,_sprite
1492  0444  86          	add	a, (hl)
1493  0445  6F          	ld	l, a
1494  0446  3E 00       	ld	a, +((_col) / 256)
1495  0448  CE 00       	adc	a,0x00
1496  044A  67          	ld	h, a
1497  044B  7E          	ld	a, (hl)
1498  044C  83          	add	a, e
1499  044D  47          	ld	b, a
1500  044E  2A 00 00    	ld	hl,(_sprite)
1501  0451  26 00       	ld	h,0x00
1502  0453  11 00 00    	ld	de,_lin
1503  0456  19          	add	hl,de
1504  0457  7E          	ld	a,(hl)
1505  0458  C6 0F       	add	a,0x0f
1506  045A  57          	ld	d, a
1507  045B  C5          	push	bc
1508  045C  4A          	ld	c, d
1509  045D  C5          	push	bc
1510  045E  CD 00 00    	call	_spr_calc_index
1511  0461  F1          	pop	af
1512  0462  C1          	pop	bc
1513  0463  7D          	ld	a,l
1514  0464  32 00 00    	ld	(_sprite_curr_index),a
1515  0467  5F          	ld	e,a
1516  0468  16 00       	ld	d,0x00
1517  046A  21 00 00    	ld	hl,_scr_map
1518  046D  19          	add	hl,de
1519  046E  7E          	ld	a,(hl)
1520  046F  47          	ld	b,a
1521  0470  D6 38       	sub	a,0x38
1522  0472  38 05       	jr	C,l_player_check_stairs_00114
1523  0474  3E 3C       	ld	a,0x3c
1524  0476  90          	sub	a, b
1525  0477  30 04       	jr	NC,l_player_check_stairs_00115
1526  0479              l_player_check_stairs_00114:
1527  0479  06 00       	ld	b,0x00
1528  047B  18 02       	jr	l_player_check_stairs_00116
1529  047D              l_player_check_stairs_00115:
1530  047D  06 01       	ld	b,0x01
1531  047F              l_player_check_stairs_00116:
1532  047F  79          	ld	a, c
1533  0480  B7          	or	a,a
1534  0481  20 03       	jr	NZ,l_player_check_stairs_00105
1535  0483  B0          	or	a,b
1536  0484  28 10       	jr	Z,l_player_check_stairs_00106
1537  0486              l_player_check_stairs_00105:
1538  0486  21 00 00    	ld	hl,_player_over_stair
1539  0489  7E          	ld	a, (hl)
1540  048A  B7          	or	a, a
1541  048B  20 17       	jr	NZ,l_player_check_stairs_00109
1542  048D  36 01       	ld	(hl),0x01
1543  048F  2E 66       	ld	l,0x66
1544  0491  CD A8 04    	call	_player_tile
1545  0494  18 0E       	jr	l_player_check_stairs_00109
1546  0496              l_player_check_stairs_00106:
1547  0496  21 00 00    	ld	hl,_player_over_stair
1548  0499  7E          	ld	a, (hl)
1549  049A  B7          	or	a, a
1550  049B  28 07       	jr	Z,l_player_check_stairs_00109
1551  049D  36 00       	ld	(hl),0x00
1552  049F  2E 54       	ld	l,0x54
1553  04A1  CD A8 04    	call	_player_tile
1554  04A4              l_player_check_stairs_00109:
1555  04A4  33          	inc	sp
1556  04A5  DD E1       	pop	ix
1557  04A7  C9          	ret
1558  04A8              	SECTION code_compiler
1559  04A8              ;	---------------------------------
1560  04A8              ; Function player_tile
1561  04A8              ; ---------------------------------
1562  04A8              _player_tile:
1563  04A8  45          	ld	b, l
1564  04A9  3A 00 00    	ld	a,(_player_over_stair)
1565  04AC  B7          	or	a, a
1566  04AD  28 0D       	jr	Z,l_player_tile_00105
1567  04AF  2A 00 00    	ld	hl,(_sprite)
1568  04B2  26 00       	ld	h,0x00
1569  04B4  01 00 00    	ld	bc,_tile
1570  04B7  09          	add	hl,bc
1571  04B8  36 66       	ld	(hl),0x66
1572  04BA  18 41       	jr	l_player_tile_00107
1573  04BC              l_player_tile_00105:
1574  04BC  78          	ld	a, b
1575  04BD  D6 64       	sub	a,0x64
1576  04BF  20 1F       	jr	NZ,l_player_tile_00102
1577  04C1  2A 00 00    	ld	hl,(_sprite)
1578  04C4  26 00       	ld	h,0x00
1579  04C6  11 00 00    	ld	de,_tile
1580  04C9  19          	add	hl,de
1581  04CA  E5          	push	hl
1582  04CB  3E 01       	ld	a,0x01
1583  04CD  21 00 00    	ld	hl,_sprite
1584  04D0  F5          	push	af
1585  04D1  33          	inc	sp
1586  04D2  7E          	ld	a, (hl)
1587  04D3  48          	ld	c,b
1588  04D4  47          	ld	b,a
1589  04D5  C5          	push	bc
1590  04D6  CD 00 00    	call	_spr_tile_dir
1591  04D9  F1          	pop	af
1592  04DA  33          	inc	sp
1593  04DB  D1          	pop	de
1594  04DC  7D          	ld	a,l
1595  04DD  12          	ld	(de), a
1596  04DE  18 1D       	jr	l_player_tile_00107
1597  04E0              l_player_tile_00102:
1598  04E0  2A 00 00    	ld	hl,(_sprite)
1599  04E3  26 00       	ld	h,0x00
1600  04E5  11 00 00    	ld	de,_tile
1601  04E8  19          	add	hl,de
1602  04E9  E5          	push	hl
1603  04EA  3E 08       	ld	a,0x08
1604  04EC  21 00 00    	ld	hl,_sprite
1605  04EF  F5          	push	af
1606  04F0  33          	inc	sp
1607  04F1  7E          	ld	a, (hl)
1608  04F2  48          	ld	c,b
1609  04F3  47          	ld	b,a
1610  04F4  C5          	push	bc
1611  04F5  CD 00 00    	call	_spr_tile_dir
1612  04F8  F1          	pop	af
1613  04F9  33          	inc	sp
1614  04FA  D1          	pop	de
1615  04FB  7D          	ld	a,l
1616  04FC  12          	ld	(de), a
1617  04FD              l_player_tile_00107:
1618  04FD  C9          	ret
1619  04FE              	SECTION code_compiler
1620  04FE              ;	---------------------------------
1621  04FE              ; Function player_move_input
1622  04FE              ; ---------------------------------
1623  04FE              _player_move_input:
1624  04FE  CD BE 00    	call	_player_check_input
1625  0501  7D          	ld	a, l
1626  0502  B7          	or	a, a
1627  0503  CA 6C 06    	jp	Z, l_player_move_input_00136
1628  0506  CD 6F 06    	call	_player_fire
1629  0509  7D          	ld	a, l
1630  050A  B7          	or	a, a
1631  050B  28 05       	jr	Z,l_player_move_input_00102
1632  050D  2E 00       	ld	l,0x00
1633  050F  C3 6E 06    	jp	l_player_move_input_00137
1634  0512              l_player_move_input_00102:
1635  0512  21 00 00    	ld	hl,_dirs
1636  0515  CB 7E       	bit	7, (hl)
1637  0517  28 67       	jr	Z,l_player_move_input_00106
1638  0519  21 00 00    	ld	hl,_player_vel_inc
1639  051C  36 01       	ld	(hl),0x01
1640  051E  CD 00 00    	call	_ay_is_playing
1641  0521  7D          	ld	a, l
1642  0522  D6 03       	sub	a,0x03
1643  0524  28 06       	jr	Z,l_player_move_input_00104
1644  0526  21 00 00    	ld	hl,_ay_effect_03
1645  0529  CD 00 00    	call	_ay_fx_play
1646  052C              l_player_move_input_00104:
1647  052C  21 00 00    	ld	hl,_player_over_stair
1648  052F  36 00       	ld	(hl),0x00
1649  0531  CD 00 00    	call	_sound_jump
1650  0534  21 00 00    	ld	hl,_s_state
1651  0537  7E          	ld	a,(hl)
1652  0538  F6 01       	or	a,0x01
1653  053A  E6 FD       	and	a,0xfd
1654  053C  77          	ld	(hl),a
1655  053D  2A 00 00    	ld	hl,(_sprite)
1656  0540  26 00       	ld	h,0x00
1657  0542  01 00 00    	ld	bc,_jump_lin
1658  0545  09          	add	hl,bc
1659  0546  4D          	ld	c,l
1660  0547  44          	ld	b,h
1661  0548  2A 00 00    	ld	hl,(_sprite)
1662  054B  26 00       	ld	h,0x00
1663  054D  11 00 00    	ld	de,_lin
1664  0550  19          	add	hl,de
1665  0551  7E          	ld	a,(hl)
1666  0552  02          	ld	(bc),a
1667  0553  2A 00 00    	ld	hl,(_sprite)
1668  0556  26 00       	ld	h,0x00
1669  0558  01 00 00    	ld	bc,_state
1670  055B  09          	add	hl,bc
1671  055C  3A 00 00    	ld	a,(_s_state)
1672  055F  77          	ld	(hl),a
1673  0560  2E 58       	ld	l,0x58
1674  0562  CD A8 04    	call	_player_tile
1675  0565  2A 00 00    	ld	hl,(_sprite)
1676  0568  26 00       	ld	h,0x00
1677  056A  01 00 00    	ld	bc,_sprite_speed_alt
1678  056D  09          	add	hl,bc
1679  056E  36 02       	ld	(hl),0x02
1680  0570  21 00 00    	ld	hl,_player_slide
1681  0573  36 00       	ld	(hl),0x00
1682  0575  3A 00 00    	ld	a,(_player_vel_y0)
1683  0578  32 00 00    	ld	(_player_vel_y),a
1684  057B  2E 01       	ld	l,0x01
1685  057D  C3 6E 06    	jp	l_player_move_input_00137
1686  0580              l_player_move_input_00106:
1687  0580  21 00 00    	ld	hl,_dirs
1688  0583  CB 5E       	bit	3, (hl)
1689  0585  28 33       	jr	Z,l_player_move_input_00110
1690  0587  21 00 00    	ld	hl,_s_state
1691  058A  7E          	ld	a,(hl)
1692  058B  F6 04       	or	a,0x04
1693  058D  E6 F7       	and	a,0xf7
1694  058F  77          	ld	(hl),a
1695  0590  01 00 00    	ld	bc,_state_a+0
1696  0593  79          	ld	a, c
1697  0594  21 00 00    	ld	hl,_sprite
1698  0597  86          	add	a, (hl)
1699  0598  5F          	ld	e, a
1700  0599  78          	ld	a, b
1701  059A  CE 00       	adc	a,0x00
1702  059C  57          	ld	d, a
1703  059D  1A          	ld	a, (de)
1704  059E  F6 10       	or	a,0x10
1705  05A0  12          	ld	(de), a
1706  05A1  79          	ld	a, c
1707  05A2  86          	add	a, (hl)
1708  05A3  4F          	ld	c, a
1709  05A4  78          	ld	a, b
1710  05A5  CE 00       	adc	a,0x00
1711  05A7  47          	ld	b, a
1712  05A8  0A          	ld	a, (bc)
1713  05A9  E6 F7       	and	a,0xf7
1714  05AB  02          	ld	(bc), a
1715  05AC  3A 00 00    	ld	a,(_player_over_stair)
1716  05AF  B7          	or	a, a
1717  05B0  28 05       	jr	Z,l_player_move_input_00108
1718  05B2  2E 00       	ld	l,0x00
1719  05B4  CD 00 04    	call	_player_check_stairs
1720  05B7              l_player_move_input_00108:
1721  05B7  CD 00 00    	call	_spr_move_horizontal
1722  05BA              l_player_move_input_00110:
1723  05BA  21 00 00    	ld	hl,_dirs
1724  05BD  CB 56       	bit	2, (hl)
1725  05BF  28 33       	jr	Z,l_player_move_input_00114
1726  05C1  21 00 00    	ld	hl,_s_state
1727  05C4  7E          	ld	a,(hl)
1728  05C5  F6 08       	or	a,0x08
1729  05C7  E6 FB       	and	a,0xfb
1730  05C9  77          	ld	(hl),a
1731  05CA  01 00 00    	ld	bc,_state_a+0
1732  05CD  79          	ld	a, c
1733  05CE  21 00 00    	ld	hl,_sprite
1734  05D1  86          	add	a, (hl)
1735  05D2  5F          	ld	e, a
1736  05D3  78          	ld	a, b
1737  05D4  CE 00       	adc	a,0x00
1738  05D6  57          	ld	d, a
1739  05D7  1A          	ld	a, (de)
1740  05D8  F6 08       	or	a,0x08
1741  05DA  12          	ld	(de), a
1742  05DB  79          	ld	a, c
1743  05DC  86          	add	a, (hl)
1744  05DD  4F          	ld	c, a
1745  05DE  78          	ld	a, b
1746  05DF  CE 00       	adc	a,0x00
1747  05E1  47          	ld	b, a
1748  05E2  0A          	ld	a, (bc)
1749  05E3  E6 EF       	and	a,0xef
1750  05E5  02          	ld	(bc), a
1751  05E6  3A 00 00    	ld	a,(_player_over_stair)
1752  05E9  B7          	or	a, a
1753  05EA  28 05       	jr	Z,l_player_move_input_00112
1754  05EC  2E 00       	ld	l,0x00
1755  05EE  CD 00 04    	call	_player_check_stairs
1756  05F1              l_player_move_input_00112:
1757  05F1  CD 00 00    	call	_spr_move_horizontal
1758  05F4              l_player_move_input_00114:
1759  05F4  21 00 00    	ld	hl,_dirs
1760  05F7  CB 46       	bit	0, (hl)
1761  05F9  28 2B       	jr	Z,l_player_move_input_00124
1762  05FB  2E 00       	ld	l,0x00
1763  05FD  CD 00 04    	call	_player_check_stairs
1764  0600  3A 00 00    	ld	a,(_player_over_stair)
1765  0603  B7          	or	a, a
1766  0604  28 0E       	jr	Z,l_player_move_input_00121
1767  0606  CD 00 00    	call	_spr_move_up
1768  0609  7D          	ld	a, l
1769  060A  B7          	or	a, a
1770  060B  28 19       	jr	Z,l_player_move_input_00124
1771  060D  21 00 00    	ld	hl,_player_over_stair
1772  0610  36 00       	ld	(hl),0x00
1773  0612  18 12       	jr	l_player_move_input_00124
1774  0614              l_player_move_input_00121:
1775  0614  21 00 00    	ld	hl,_dirs
1776  0617  CB 5E       	bit	3, (hl)
1777  0619  20 0B       	jr	NZ,l_player_move_input_00124
1778  061B  21 00 00    	ld	hl,_dirs
1779  061E  CB 56       	bit	2, (hl)
1780  0620  20 04       	jr	NZ,l_player_move_input_00124
1781  0622  2E 00       	ld	l,0x00
1782  0624  18 48       	jr	l_player_move_input_00137
1783  0626              l_player_move_input_00124:
1784  0626  21 00 00    	ld	hl,_dirs
1785  0629  CB 4E       	bit	1, (hl)
1786  062B  28 29       	jr	Z,l_player_move_input_00134
1787  062D  CD BA 03    	call	_player_check_stairs_down
1788  0630  3A 00 00    	ld	a,(_player_over_stair)
1789  0633  B7          	or	a, a
1790  0634  28 0E       	jr	Z,l_player_move_input_00131
1791  0636  CD 00 00    	call	_spr_move_down
1792  0639  7D          	ld	a, l
1793  063A  B7          	or	a, a
1794  063B  28 19       	jr	Z,l_player_move_input_00134
1795  063D  21 00 00    	ld	hl,_player_over_stair
1796  0640  36 00       	ld	(hl),0x00
1797  0642  18 12       	jr	l_player_move_input_00134
1798  0644              l_player_move_input_00131:
1799  0644  21 00 00    	ld	hl,_dirs
1800  0647  CB 5E       	bit	3, (hl)
1801  0649  20 0B       	jr	NZ,l_player_move_input_00134
1802  064B  21 00 00    	ld	hl,_dirs
1803  064E  CB 56       	bit	2, (hl)
1804  0650  20 04       	jr	NZ,l_player_move_input_00134
1805  0652  2E 00       	ld	l,0x00
1806  0654  18 18       	jr	l_player_move_input_00137
1807  0656              l_player_move_input_00134:
1808  0656  2A 00 00    	ld	hl,(_sprite)
1809  0659  26 00       	ld	h,0x00
1810  065B  01 00 00    	ld	bc,_state
1811  065E  09          	add	hl,bc
1812  065F  3A 00 00    	ld	a,(_s_state)
1813  0662  77          	ld	(hl),a
1814  0663  2E 54       	ld	l,0x54
1815  0665  CD A8 04    	call	_player_tile
1816  0668  2E 01       	ld	l,0x01
1817  066A  18 02       	jr	l_player_move_input_00137
1818  066C              l_player_move_input_00136:
1819  066C  2E 00       	ld	l,0x00
1820  066E              l_player_move_input_00137:
1821  066E  C9          	ret
1822  066F              	SECTION code_compiler
1823  066F              ;	---------------------------------
1824  066F              ; Function player_fire
1825  066F              ; ---------------------------------
1826  066F              _player_fire:
1827  066F  21 00 00    	ld	hl,_dirs
1828  0672  CB 7E       	bit	7, (hl)
1829  0674  28 11       	jr	Z,l_player_fire_00102
1830  0676  21 00 00    	ld	hl,_dirs
1831  0679  CB 4E       	bit	1, (hl)
1832  067B  28 0A       	jr	Z,l_player_fire_00102
1833  067D  21 07 70    	ld	hl,0x7007
1834  0680  E5          	push	hl
1835  0681  CD 00 00    	call	_game_shoot_fire
1836  0684  F1          	pop	af
1837  0685  18 02       	jr	l_player_fire_00104
1838  0687              l_player_fire_00102:
1839  0687  2E 00       	ld	l,0x00
1840  0689              l_player_fire_00104:
1841  0689  C9          	ret
1842  068A              	SECTION code_compiler
1843  068A              ;	---------------------------------
1844  068A              ; Function player_check_map
1845  068A              ; ---------------------------------
1846  068A              _player_check_map:
1847  068A  2A 00 00    	ld	hl,(_sprite)
1848  068D  26 00       	ld	h,0x00
1849  068F  5D          	ld	e,l
1850  0690  01 00 00    	ld	bc,_col
1851  0693  09          	add	hl,bc
1852  0694  46          	ld	b,(hl)
1853  0695  16 00       	ld	d,0x00
1854  0697  21 00 00    	ld	hl,_lin
1855  069A  19          	add	hl,de
1856  069B  4E          	ld	c, (hl)
1857  069C  C5          	push	bc
1858  069D  CD 00 00    	call	_spr_calc_index
1859  06A0  F1          	pop	af
1860  06A1  7D          	ld	a,l
1861  06A2  32 00 00    	ld	(_sprite_curr_index),a
1862  06A5  2A 00 00    	ld	hl,(_sprite)
1863  06A8  26 00       	ld	h,0x00
1864  06AA  01 00 00    	ld	bc,_col
1865  06AD  09          	add	hl,bc
1866  06AE  4E          	ld	c, (hl)
1867  06AF  3A 00 00    	ld	a,(_sprite)
1868  06B2  5F          	ld	e,a
1869  06B3  16 00       	ld	d,0x00
1870  06B5  21 00 00    	ld	hl,_lin
1871  06B8  19          	add	hl,de
1872  06B9  7E          	ld	a,(hl)
1873  06BA  E6 0F       	and	a,0x0f
1874  06BC  CB 41       	bit	0, c
1875  06BE  20 17       	jr	NZ,l_player_check_map_00108
1876  06C0  B7          	or	a, a
1877  06C1  20 05       	jr	NZ,l_player_check_map_00102
1878  06C3  CD 02 07    	call	_player_pick_item
1879  06C6  18 39       	jr	l_player_check_map_00110
1880  06C8              l_player_check_map_00102:
1881  06C8  CD 02 07    	call	_player_pick_item
1882  06CB  21 00 00    	ld	hl,_sprite_curr_index
1883  06CE  7E          	ld	a, (hl)
1884  06CF  C6 10       	add	a,0x10
1885  06D1  77          	ld	(hl), a
1886  06D2  CD 02 07    	call	_player_pick_item
1887  06D5  18 2A       	jr	l_player_check_map_00110
1888  06D7              l_player_check_map_00108:
1889  06D7  B7          	or	a, a
1890  06D8  20 0C       	jr	NZ,l_player_check_map_00105
1891  06DA  CD 02 07    	call	_player_pick_item
1892  06DD  21 00 00    	ld	hl,_sprite_curr_index
1893  06E0  34          	inc	(hl)
1894  06E1  CD 02 07    	call	_player_pick_item
1895  06E4  18 1B       	jr	l_player_check_map_00110
1896  06E6              l_player_check_map_00105:
1897  06E6  CD 02 07    	call	_player_pick_item
1898  06E9  21 00 00    	ld	hl,_sprite_curr_index
1899  06EC  34          	inc	(hl)
1900  06ED  CD 02 07    	call	_player_pick_item
1901  06F0  21 00 00    	ld	hl,_sprite_curr_index
1902  06F3  7E          	ld	a, (hl)
1903  06F4  C6 0F       	add	a,0x0f
1904  06F6  77          	ld	(hl), a
1905  06F7  CD 02 07    	call	_player_pick_item
1906  06FA  21 00 00    	ld	hl,_sprite_curr_index
1907  06FD  34          	inc	(hl)
1908  06FE  CD 02 07    	call	_player_pick_item
1909  0701              l_player_check_map_00110:
1910  0701  C9          	ret
1911  0702              	SECTION code_compiler
1912  0702              ;	---------------------------------
1913  0702              ; Function player_pick_item
1914  0702              ; ---------------------------------
1915  0702              _player_pick_item:
1916  0702  CD 00 00    	call	___sdcc_enter_ix
1917  0705  2A 00 00    	ld	hl,(_sprite_curr_index)
1918  0708  F5          	push	af
1919  0709  26 00       	ld	h,0x00
1920  070B  01 00 00    	ld	bc,_scr_map
1921  070E  09          	add	hl,bc
1922  070F  4E          	ld	c,(hl)
1923  0710  3E 27       	ld	a,0x27
1924  0712  91          	sub	a, c
1925  0713  3E 00       	ld	a,0x00
1926  0715  17          	rla
1927  0716  47          	ld	b, a
1928  0717  79          	ld	a, c
1929  0718  D6 18       	sub	a,0x18
1930  071A  DA 09 08    	jp	C, l_player_pick_item_00107
1931  071D  CB 40       	bit	0, b
1932  071F  C2 09 08    	jp	NZ, l_player_pick_item_00107
1933  0722  CD 00 00    	call	_ay_reset
1934  0725  21 00 00    	ld	hl,_ay_effect_10
1935  0728  CD 00 00    	call	_ay_fx_play
1936  072B  C5          	push	bc
1937  072C  CD 00 00    	call	_sound_coin
1938  072F  C1          	pop	bc
1939  0730  2A 00 00    	ld	hl,(_sprite_curr_index)
1940  0733  26 00       	ld	h,0x00
1941  0735  11 00 00    	ld	de,_scr_map
1942  0738  19          	add	hl,de
1943  0739  AF          	xor	a,a
1944  073A  77          	ld	(hl),a
1945  073B  3A 00 00    	ld	a,(_sprite_curr_index)
1946  073E  5F          	ld	e,a
1947  073F  16 00       	ld	d,0x00
1948  0741  21 00 00    	ld	hl,_scr_obj
1949  0744  19          	add	hl,de
1950  0745  7E          	ld	a,(hl)
1951  0746  EB          	ex	de,hl
1952  0747  DD 77 FF    	ld	(ix-1),a
1953  074A  3A 00 00    	ld	a,(_scr_curr)
1954  074D  DD 36 FE 01 	ld	(ix-2),0x01
1955  0751  3C          	inc	a
1956  0752  18 04       	jr	l_player_pick_item_00153
1957  0754              l_player_pick_item_00152:
1958  0754  DD CB FE 26 	sla	(ix-2)
1959  0758              l_player_pick_item_00153:
1960  0758  3D          	dec	a
1961  0759  20 F9       	jr	NZ,l_player_pick_item_00152
1962  075B  DD 7E FF    	ld	a,(ix-1)
1963  075E  DD B6 FE    	or	a,(ix-2)
1964  0761  12          	ld	(de), a
1965  0762  3A 00 00    	ld	a,(_sprite_curr_index)
1966  0765  07          	rlca
1967  0766  07          	rlca
1968  0767  07          	rlca
1969  0768  07          	rlca
1970  0769  E6 0F       	and	a,0x0f
1971  076B  07          	rlca
1972  076C  07          	rlca
1973  076D  07          	rlca
1974  076E  07          	rlca
1975  076F  E6 F0       	and	a,0xf0
1976  0771  32 00 00    	ld	(_s_lin1),a
1977  0774  3A 00 00    	ld	a,(_sprite_curr_index)
1978  0777  E6 0F       	and	a,0x0f
1979  0779  87          	add	a, a
1980  077A  32 00 00    	ld	(_s_col1),a
1981  077D  C5          	push	bc
1982  077E  21 03 00    	ld	hl,0x0003
1983  0781  E5          	push	hl
1984  0782  2A 00 00    	ld	hl,(_s_col1)
1985  0785  26 78       	ld	h,0x78
1986  0787  3A 00 00    	ld	a,(_s_lin1)
1987  078A  E5          	push	hl
1988  078B  F5          	push	af
1989  078C  33          	inc	sp
1990  078D  CD 00 00    	call	_spr_add_anim
1991  0790  F1          	pop	af
1992  0791  F1          	pop	af
1993  0792  33          	inc	sp
1994  0793  C1          	pop	bc
1995  0794  79          	ld	a,c
1996  0795  FE 1C       	cp	a,0x1c
1997  0797  28 0E       	jr	Z,l_player_pick_item_00101
1998  0799  FE 1D       	cp	a,0x1d
1999  079B  28 23       	jr	Z,l_player_pick_item_00102
2000  079D  FE 1E       	cp	a,0x1e
2001  079F  28 38       	jr	Z,l_player_pick_item_00103
2002  07A1  D6 1F       	sub	a,0x1f
2003  07A3  28 4D       	jr	Z,l_player_pick_item_00104
2004  07A5  18 62       	jr	l_player_pick_item_00107
2005  07A7              l_player_pick_item_00101:
2006  07A7  21 00 00    	ld	hl,_player_keys
2007  07AA  36 01       	ld	(hl),0x01
2008  07AC  21 00 00    	ld	hl,_screen_ink
2009  07AF  36 07       	ld	(hl),0x07
2010  07B1  C5          	push	bc
2011  07B2  21 00 00    	ld	hl,___str_0
2012  07B5  E5          	push	hl
2013  07B6  21 16 03    	ld	hl,0x0316
2014  07B9  E5          	push	hl
2015  07BA  CD 00 00    	call	_zx_print_str
2016  07BD  C1          	pop	bc
2017  07BE  18 49       	jr	l_player_pick_item_00107
2018  07C0              l_player_pick_item_00102:
2019  07C0  21 01 00    	ld	hl, +(_player_keys + 0x0001)
2020  07C3  36 01       	ld	(hl),0x01
2021  07C5  21 00 00    	ld	hl,_screen_ink
2022  07C8  36 02       	ld	(hl),0x02
2023  07CA  C5          	push	bc
2024  07CB  21 00 00    	ld	hl,___str_0
2025  07CE  E5          	push	hl
2026  07CF  21 16 04    	ld	hl,0x0416
2027  07D2  E5          	push	hl
2028  07D3  CD 00 00    	call	_zx_print_str
2029  07D6  C1          	pop	bc
2030  07D7  18 30       	jr	l_player_pick_item_00107
2031  07D9              l_player_pick_item_00103:
2032  07D9  21 02 00    	ld	hl, +(_player_keys + 0x0002)
2033  07DC  36 01       	ld	(hl),0x01
2034  07DE  21 00 00    	ld	hl,_screen_ink
2035  07E1  36 04       	ld	(hl),0x04
2036  07E3  C5          	push	bc
2037  07E4  21 00 00    	ld	hl,___str_0
2038  07E7  E5          	push	hl
2039  07E8  21 16 05    	ld	hl,0x0516
2040  07EB  E5          	push	hl
2041  07EC  CD 00 00    	call	_zx_print_str
2042  07EF  C1          	pop	bc
2043  07F0  18 17       	jr	l_player_pick_item_00107
2044  07F2              l_player_pick_item_00104:
2045  07F2  21 03 00    	ld	hl, +(_player_keys + 0x0003)
2046  07F5  36 01       	ld	(hl),0x01
2047  07F7  21 00 00    	ld	hl,_screen_ink
2048  07FA  36 05       	ld	(hl),0x05
2049  07FC  C5          	push	bc
2050  07FD  21 00 00    	ld	hl,___str_0
2051  0800  E5          	push	hl
2052  0801  21 16 06    	ld	hl,0x0616
2053  0804  E5          	push	hl
2054  0805  CD 00 00    	call	_zx_print_str
2055  0808  C1          	pop	bc
2056  0809              l_player_pick_item_00107:
2057  0809  CB 40       	bit	0, b
2058  080B  28 11       	jr	Z,l_player_pick_item_00114
2059  080D  79          	ld	a, c
2060  080E  D6 30       	sub	a,0x30
2061  0810  30 0C       	jr	NC,l_player_pick_item_00114
2062  0812  3A 07 00    	ld	a,(_lin + 0x0007)
2063  0815  E6 03       	and	a,0x03
2064  0817  28 05       	jr	Z,l_player_pick_item_00114
2065  0819  2E 06       	ld	l,0x06
2066  081B  CD 00 00    	call	_zx_border_fastcall
2067  081E              l_player_pick_item_00114:
2068  081E  F1          	pop	af
2069  081F  DD E1       	pop	ix
2070  0821  C9          	ret
2071  0822              	SECTION rodata_compiler
2072  0000              ___str_0:
2073  0000  5D          	DEFM "]"
2074  0001  00          	DEFB 0x00
2075  0002              	SECTION code_compiler
2076  0822              ;	---------------------------------
2077  0822              ; Function player_hit_platform
2078  0822              ; ---------------------------------
2079  0822              _player_hit_platform:
2080  0822  3A 00 00    	ld	a,(_player_hit_lin)
2081  0825  B7          	or	a, a
2082  0826  C2 45 09    	jp	NZ, l_player_hit_platform_00120
2083  0829  2A 00 00    	ld	hl,(_sprite)
2084  082C  26 00       	ld	h,0x00
2085  082E  01 00 00    	ld	bc,_lin
2086  0831  09          	add	hl,bc
2087  0832  4E          	ld	c,(hl)
2088  0833  3E 10       	ld	a,0x10
2089  0835  91          	sub	a, c
2090  0836  D2 45 09    	jp	NC, l_player_hit_platform_00120
2091  0839  21 00 00    	ld	hl,_enemies
2092  083C  36 00       	ld	(hl),0x00
2093  083E              l_player_hit_platform_00122:
2094  083E  2A 00 00    	ld	hl,(_enemies)
2095  0841  26 00       	ld	h,0x00
2096  0843  01 00 00    	ld	bc,_class
2097  0846  09          	add	hl,bc
2098  0847  7E          	ld	a,(hl)
2099  0848  B7          	or	a, a
2100  0849  28 64       	jr	Z,l_player_hit_platform_00123
2101  084B  2A 00 00    	ld	hl,(_sprite)
2102  084E  26 00       	ld	h,0x00
2103  0850  01 00 00    	ld	bc,_lin
2104  0853  09          	add	hl,bc
2105  0854  4E          	ld	c,(hl)
2106  0855  06 00       	ld	b,0x00
2107  0857  2A 00 00    	ld	hl,(_enemies)
2108  085A  60          	ld	h,b
2109  085B  11 00 00    	ld	de,_lin
2110  085E  19          	add	hl,de
2111  085F  5E          	ld	e, (hl)
2112  0860  16 00       	ld	d,0x00
2113  0862  79          	ld	a,c
2114  0863  93          	sub	a,e
2115  0864  4F          	ld	c,a
2116  0865  78          	ld	a,b
2117  0866  9A          	sbc	a,d
2118  0867  47          	ld	b,a
2119  0868  79          	ld	a,c
2120  0869  D6 18       	sub	a,0x18
2121  086B  B0          	or	a,b
2122  086C  20 41       	jr	NZ,l_player_hit_platform_00123
2123  086E  2A 00 00    	ld	hl,(_enemies)
2124  0871  26 00       	ld	h,0x00
2125  0873  01 00 00    	ld	bc,_state
2126  0876  09          	add	hl,bc
2127  0877  CB 6E       	bit	5,(hl)
2128  0879  20 34       	jr	NZ,l_player_hit_platform_00123
2129  087B  2A 00 00    	ld	hl,(_sprite)
2130  087E  26 00       	ld	h,0x00
2131  0880  01 00 00    	ld	bc,_col
2132  0883  09          	add	hl,bc
2133  0884  4E          	ld	c,(hl)
2134  0885  06 00       	ld	b,0x00
2135  0887  2A 00 00    	ld	hl,(_enemies)
2136  088A  60          	ld	h,b
2137  088B  11 00 00    	ld	de,_col
2138  088E  19          	add	hl,de
2139  088F  5E          	ld	e, (hl)
2140  0890  16 00       	ld	d,0x00
2141  0892  79          	ld	a, c
2142  0893  93          	sub	a, e
2143  0894  6F          	ld	l, a
2144  0895  78          	ld	a, b
2145  0896  9A          	sbc	a, d
2146  0897  67          	ld	h, a
2147  0898  CD 00 00    	call	_abs_fastcall
2148  089B  3E 02       	ld	a,0x02
2149  089D  BD          	cp	a,l
2150  089E  3E 00       	ld	a,0x00
2151  08A0  9C          	sbc	a,h
2152  08A1  E2 A6 08    	jp	PO, l_player_hit_platform_00178
2153  08A4  EE 80       	xor	a,0x80
2154  08A6              l_player_hit_platform_00178:
2155  08A6  FA AF 08    	jp	M, l_player_hit_platform_00123
2156  08A9  CD 00 00    	call	_enemy_hit
2157  08AC  CD 00 00    	call	_sound_hit_enemy
2158  08AF              l_player_hit_platform_00123:
2159  08AF  21 00 00    	ld	hl,_enemies
2160  08B2  7E          	ld	a,(hl)
2161  08B3  3C          	inc	a
2162  08B4  77          	ld	(hl),a
2163  08B5  D6 06       	sub	a,0x06
2164  08B7  38 85       	jr	C,l_player_hit_platform_00122
2165  08B9  01 00 00    	ld	bc,_spr_timer+0
2166  08BC  2A 00 00    	ld	hl,(_sprite)
2167  08BF  26 00       	ld	h,0x00
2168  08C1  29          	add	hl, hl
2169  08C2  09          	add	hl,bc
2170  08C3  ED 5B 00 00 	ld	de,(_curr_time)
2171  08C7  73          	ld	(hl),e
2172  08C8  23          	inc	hl
2173  08C9  72          	ld	(hl),d
2174  08CA  2A 00 00    	ld	hl,(_sprite)
2175  08CD  26 00       	ld	h,0x00
2176  08CF  01 00 00    	ld	bc,_lin
2177  08D2  09          	add	hl,bc
2178  08D3  4E          	ld	c,(hl)
2179  08D4  06 00       	ld	b,0x00
2180  08D6  79          	ld	a, c
2181  08D7  C6 F8       	add	a,0xf8
2182  08D9  4F          	ld	c, a
2183  08DA  78          	ld	a, b
2184  08DB  CE FF       	adc	a,0xff
2185  08DD  5F          	ld	e, a
2186  08DE  06 04       	ld	b,0x04
2187  08E0              l_player_hit_platform_00179:
2188  08E0  CB 2B       	sra	e
2189  08E2  CB 19       	rr	c
2190  08E4  10 FA       	djnz	l_player_hit_platform_00179
2191  08E6  79          	ld	a, c
2192  08E7  07          	rlca
2193  08E8  07          	rlca
2194  08E9  07          	rlca
2195  08EA  07          	rlca
2196  08EB  E6 F0       	and	a,0xf0
2197  08ED  C6 08       	add	a,0x08
2198  08EF  32 00 00    	ld	(_player_hit_lin),a
2199  08F2  2A 00 00    	ld	hl,(_sprite)
2200  08F5  26 00       	ld	h,0x00
2201  08F7  01 00 00    	ld	bc,_col
2202  08FA  09          	add	hl,bc
2203  08FB  4E          	ld	c,(hl)
2204  08FC  CB 41       	bit	0,c
2205  08FE  20 06       	jr	NZ,l_player_hit_platform_00117
2206  0900  21 00 00    	ld	hl,_player_hit_col
2207  0903  71          	ld	(hl), c
2208  0904  18 33       	jr	l_player_hit_platform_00118
2209  0906              l_player_hit_platform_00117:
2210  0906  2A 00 00    	ld	hl,(_sprite)
2211  0909  26 00       	ld	h,0x00
2212  090B  11 00 00    	ld	de,_state
2213  090E  19          	add	hl,de
2214  090F  5E          	ld	e, (hl)
2215  0910  41          	ld	b, c
2216  0911  04          	inc	b
2217  0912  0D          	dec	c
2218  0913  CB 5B       	bit	3, e
2219  0915  28 12       	jr	Z,l_player_hit_platform_00114
2220  0917  3A 00 00    	ld	a,(_g_player_hit_right)
2221  091A  B7          	or	a, a
2222  091B  28 06       	jr	Z,l_player_hit_platform_00108
2223  091D  21 00 00    	ld	hl,_player_hit_col
2224  0920  70          	ld	(hl), b
2225  0921  18 16       	jr	l_player_hit_platform_00118
2226  0923              l_player_hit_platform_00108:
2227  0923  21 00 00    	ld	hl,_player_hit_col
2228  0926  71          	ld	(hl), c
2229  0927  18 10       	jr	l_player_hit_platform_00118
2230  0929              l_player_hit_platform_00114:
2231  0929  3A 00 00    	ld	a,(_g_player_hit_left)
2232  092C  B7          	or	a, a
2233  092D  28 06       	jr	Z,l_player_hit_platform_00111
2234  092F  21 00 00    	ld	hl,_player_hit_col
2235  0932  71          	ld	(hl), c
2236  0933  18 04       	jr	l_player_hit_platform_00118
2237  0935              l_player_hit_platform_00111:
2238  0935  21 00 00    	ld	hl,_player_hit_col
2239  0938  70          	ld	(hl), b
2240  0939              l_player_hit_platform_00118:
2241  0939  2E 01       	ld	l,0x01
2242  093B  CD 00 00    	call	_spr_brick_anim
2243  093E  CD 00 00    	call	_sound_hit_brick
2244  0941  2E 01       	ld	l,0x01
2245  0943  18 02       	jr	l_player_hit_platform_00124
2246  0945              l_player_hit_platform_00120:
2247  0945  2E 00       	ld	l,0x00
2248  0947              l_player_hit_platform_00124:
2249  0947  C9          	ret
2250  0948              	SECTION code_compiler
2251  0948              ;	---------------------------------
2252  0948              ; Function player_hit_platform_clear
2253  0948              ; ---------------------------------
2254  0948              _player_hit_platform_clear:
2255  0948  2A 00 00    	ld	hl,(_sprite)
2256  094B  26 00       	ld	h,0x00
2257  094D  29          	add	hl, hl
2258  094E  11 00 00    	ld	de,_spr_timer
2259  0951  19          	add	hl, de
2260  0952  4E          	ld	c, (hl)
2261  0953  23          	inc	hl
2262  0954  46          	ld	b, (hl)
2263  0955  21 04 00    	ld	hl,0x0004
2264  0958  E5          	push	hl
2265  0959  C5          	push	bc
2266  095A  CD 00 00    	call	_game_check_time
2267  095D  F1          	pop	af
2268  095E  F1          	pop	af
2269  095F  7D          	ld	a, l
2270  0960  B7          	or	a, a
2271  0961  C8          	ret	Z
2272  0962  2A FF FF    	ld	hl,(_player_hit_col - 1)
2273  0965  3A 00 00    	ld	a,(_player_hit_lin)
2274  0968  6F          	ld	l,a
2275  0969  E5          	push	hl
2276  096A  CD 00 00    	call	_spr_calc_index
2277  096D  F1          	pop	af
2278  096E  22 00 00    	ld	(_index1),hl
2279  0971  2E 00       	ld	l,0x00
2280  0973  CD 00 00    	call	_spr_brick_anim
2281  0976  21 00 00    	ld	hl,_player_hit_lin
2282  0979  36 00       	ld	(hl),0x00
2283  097B  21 00 00    	ld	hl,_player_hit_col
2284  097E  36 00       	ld	(hl),0x00
2285  0980  C9          	ret
2286  0981              	SECTION code_compiler
2287  0981              ;	---------------------------------
2288  0981              ; Function player_score_add
2289  0981              ; ---------------------------------
2290  0981              _player_score_add:
2291  0981  ED 4B 00 00 	ld	bc,(_player_score)
2292  0985  09          	add	hl,bc
2293  0986  22 00 00    	ld	(_player_score),hl
2294  0989  3A 00 00    	ld	a,(_game_score_top)
2295  098C  21 00 00    	ld	hl,_player_score
2296  098F  96          	sub	a, (hl)
2297  0990  3A 01 00    	ld	a,(_game_score_top + 1)
2298  0993  23          	inc	hl
2299  0994  9E          	sbc	a, (hl)
2300  0995  D2 00 00    	jp	NC,_game_print_score
2301  0998  2A 00 00    	ld	hl,(_player_score)
2302  099B  22 00 00    	ld	(_game_score_top),hl
2303  099E  C3 00 00    	jp  _game_print_score
2304  09A1              	SECTION code_compiler
2305  09A1              ;	---------------------------------
2306  09A1              ; Function player_check_floor
2307  09A1              ; ---------------------------------
2308  09A1              _player_check_floor:
2309  09A1  CD 00 00    	call	___sdcc_enter_ix
2310  09A4  3B          	dec	sp
2311  09A5  2A 00 00    	ld	hl,(_sprite)
2312  09A8  26 00       	ld	h,0x00
2313  09AA  01 00 00    	ld	bc,_col
2314  09AD  09          	add	hl,bc
2315  09AE  56          	ld	d, (hl)
2316  09AF  2A 00 00    	ld	hl,(_sprite)
2317  09B2  26 00       	ld	h,0x00
2318  09B4  01 00 00    	ld	bc,_lin
2319  09B7  09          	add	hl,bc
2320  09B8  7E          	ld	a,(hl)
2321  09B9  C6 10       	add	a,0x10
2322  09BB  5F          	ld	e, a
2323  09BC  D5          	push	de
2324  09BD  CD 00 00    	call	_spr_calc_index
2325  09C0  F1          	pop	af
2326  09C1  4D          	ld	c, l
2327  09C2  44          	ld	b, h
2328  09C3  21 00 00    	ld	hl,_scr_map
2329  09C6  09          	add	hl, bc
2330  09C7  7E          	ld	a, (hl)
2331  09C8  DD 77 FF    	ld	(ix-1),a
2332  09CB  2A 00 00    	ld	hl,(_sprite)
2333  09CE  26 00       	ld	h,0x00
2334  09D0  11 00 00    	ld	de,_col
2335  09D3  19          	add	hl,de
2336  09D4  7E          	ld	a,(hl)
2337  09D5  0F          	rrca
2338  09D6  38 04       	jr	C,l_player_check_floor_00102
2339  09D8  0E 01       	ld	c,0x01
2340  09DA  18 06       	jr	l_player_check_floor_00103
2341  09DC              l_player_check_floor_00102:
2342  09DC  03          	inc	bc
2343  09DD  21 00 00    	ld	hl,_scr_map
2344  09E0  09          	add	hl, bc
2345  09E1  4E          	ld	c, (hl)
2346  09E2              l_player_check_floor_00103:
2347  09E2  3A 00 00    	ld	a,(_s_lin0)
2348  09E5  D6 90       	sub	a,0x90
2349  09E7  20 04       	jr	NZ,l_player_check_floor_00105
2350  09E9  DD 36 FF 3C 	ld	(ix-1),0x3c
2351  09ED              l_player_check_floor_00105:
2352  09ED  DD 7E FF    	ld	a,(ix-1)
2353  09F0  D6 30       	sub	a,0x30
2354  09F2  38 07       	jr	C,l_player_check_floor_00110
2355  09F4  DD 7E FF    	ld	a,(ix-1)
2356  09F7  D6 54       	sub	a,0x54
2357  09F9  38 1E       	jr	C,l_player_check_floor_00111
2358  09FB              l_player_check_floor_00110:
2359  09FB  79          	ld	a,c
2360  09FC  FE 30       	cp	a,0x30
2361  09FE  38 04       	jr	C,l_player_check_floor_00106
2362  0A00  D6 54       	sub	a,0x54
2363  0A02  38 15       	jr	C,l_player_check_floor_00111
2364  0A04              l_player_check_floor_00106:
2365  0A04  2A 00 00    	ld	hl,(_sprite)
2366  0A07  26 00       	ld	h,0x00
2367  0A09  01 00 00    	ld	bc,_sprite_speed_alt
2368  0A0C  09          	add	hl,bc
2369  0A0D  36 02       	ld	(hl),0x02
2370  0A0F  21 00 00    	ld	hl,_s_state
2371  0A12  CB CE       	set	1, (hl)
2372  0A14  2E 00       	ld	l,0x00
2373  0A16  CD 00 04    	call	_player_check_stairs
2374  0A19              l_player_check_floor_00111:
2375  0A19  33          	inc	sp
2376  0A1A  DD E1       	pop	ix
2377  0A1C  C9          	ret
2378  0A1D              	SECTION code_compiler
2379  0A1D              ;	---------------------------------
2380  0A1D              ; Function player_move_jump
2381  0A1D              ; ---------------------------------
2382  0A1D              _player_move_jump:
2383  0A1D  CD 00 00    	call	___sdcc_enter_ix
2384  0A20  3B          	dec	sp
2385  0A21  21 00 00    	ld	hl,_game_gravity
2386  0A24  4E          	ld	c, (hl)
2387  0A25  21 00 00    	ld	hl,_player_vel_y
2388  0A28  7E          	ld	a, (hl)
2389  0A29  81          	add	a, c
2390  0A2A  77          	ld	(hl), a
2391  0A2B  21 00 00    	ld	hl,_sprite_on_air
2392  0A2E  36 01       	ld	(hl),0x01
2393  0A30  3A 00 00    	ld	a,(_player_vel_inc)
2394  0A33  B7          	or	a, a
2395  0A34  28 24       	jr	Z,l_player_move_jump_00106
2396  0A36  21 00 00    	ld	hl,_dirs
2397  0A39  CB 7E       	bit	7, (hl)
2398  0A3B  20 1D       	jr	NZ,l_player_move_jump_00106
2399  0A3D  3A 00 00    	ld	a,(_player_vel_y1)
2400  0A40  21 00 00    	ld	hl,_player_vel_y
2401  0A43  96          	sub	a, (hl)
2402  0A44  E2 49 0A    	jp	PO, l_player_move_jump_00247
2403  0A47  EE 80       	xor	a,0x80
2404  0A49              l_player_move_jump_00247:
2405  0A49  F2 5A 0A    	jp	P, l_player_move_jump_00106
2406  0A4C  21 00 00    	ld	hl,_player_vel_y
2407  0A4F  CB 7E       	bit	7,(hl)
2408  0A51  28 07       	jr	Z,l_player_move_jump_00106
2409  0A53  36 00       	ld	(hl),0x00
2410  0A55  21 00 00    	ld	hl,_player_vel_inc
2411  0A58  36 00       	ld	(hl),0x00
2412  0A5A              l_player_move_jump_00106:
2413  0A5A  3E 78       	ld	a,0x78
2414  0A5C  21 00 00    	ld	hl,_player_vel_y
2415  0A5F  96          	sub	a, (hl)
2416  0A60  E2 65 0A    	jp	PO, l_player_move_jump_00248
2417  0A63  EE 80       	xor	a,0x80
2418  0A65              l_player_move_jump_00248:
2419  0A65  F2 6D 0A    	jp	P, l_player_move_jump_00108
2420  0A68  21 00 00    	ld	hl,_player_vel_y
2421  0A6B  36 78       	ld	(hl),0x78
2422  0A6D              l_player_move_jump_00108:
2423  0A6D  21 00 00    	ld	hl,_player_vel_y
2424  0A70  7E          	ld	a, (hl)
2425  0A71  EE 80       	xor	a,0x80
2426  0A73  D6 08       	sub	a,0x08
2427  0A75  30 02       	jr	NC,l_player_move_jump_00110
2428  0A77  36 88       	ld	(hl),0x88
2429  0A79              l_player_move_jump_00110:
2430  0A79  3A 00 00    	ld	a,(_player_vel_y)
2431  0A7C  5F          	ld	e,a
2432  0A7D  17          	rla
2433  0A7E  9F          	sbc	a, a
2434  0A7F  57          	ld	d, a
2435  0A80  CB 43       	bit	0,e
2436  0A82  21 00 00    	ld	hl,_s_lin1
2437  0A85  73          	ld	(hl),e
2438  0A86  28 04       	jr	Z,l_player_move_jump_00112
2439  0A88  21 00 00    	ld	hl,_s_lin1
2440  0A8B  35          	dec	(hl)
2441  0A8C              l_player_move_jump_00112:
2442  0A8C  2A 00 00    	ld	hl,(_sprite)
2443  0A8F  26 00       	ld	h,0x00
2444  0A91  01 00 00    	ld	bc,_lin
2445  0A94  09          	add	hl,bc
2446  0A95  7E          	ld	a,(hl)
2447  0A96  DD 77 FF    	ld	(ix-1),a
2448  0A99  4D          	ld	c,l
2449  0A9A  44          	ld	b,h
2450  0A9B  21 00 00    	ld	hl,_s_lin1
2451  0A9E  86          	add	a, (hl)
2452  0A9F  77          	ld	(hl), a
2453  0AA0  3E 90       	ld	a,0x90
2454  0AA2  96          	sub	a, (hl)
2455  0AA3  30 0E       	jr	NC,l_player_move_jump_00117
2456  0AA5  3E C8       	ld	a,0xc8
2457  0AA7  96          	sub	a, (hl)
2458  0AA8  30 04       	jr	NC,l_player_move_jump_00114
2459  0AAA  36 00       	ld	(hl),0x00
2460  0AAC  18 05       	jr	l_player_move_jump_00117
2461  0AAE              l_player_move_jump_00114:
2462  0AAE  21 00 00    	ld	hl,_s_lin1
2463  0AB1  36 90       	ld	(hl),0x90
2464  0AB3              l_player_move_jump_00117:
2465  0AB3  3A 00 00    	ld	a,(_s_lin0)
2466  0AB6  07          	rlca
2467  0AB7  07          	rlca
2468  0AB8  07          	rlca
2469  0AB9  07          	rlca
2470  0ABA  E6 0F       	and	a,0x0f
2471  0ABC  DD 77 FF    	ld	(ix-1),a
2472  0ABF  CB 7A       	bit	7, d
2473  0AC1  28 73       	jr	Z,l_player_move_jump_00140
2474  0AC3  21 00 00    	ld	hl,_s_state
2475  0AC6  7E          	ld	a,(hl)
2476  0AC7  F6 01       	or	a,0x01
2477  0AC9  E6 FD       	and	a,0xfd
2478  0ACB  77          	ld	(hl),a
2479  0ACC  21 00 00    	ld	hl,_s_lin1
2480  0ACF  DD 7E FF    	ld	a,(ix-1)
2481  0AD2  96          	sub	a,(hl)
2482  0AD3  20 04       	jr	NZ,l_player_move_jump_00250
2483  0AD5  3E 01       	ld	a,0x01
2484  0AD7  18 01       	jr	l_player_move_jump_00251
2485  0AD9              l_player_move_jump_00250:
2486  0AD9  AF          	xor	a,a
2487  0ADA              l_player_move_jump_00251:
2488  0ADA  EE 01       	xor	a,0x01
2489  0ADC  28 51       	jr	Z,l_player_move_jump_00124
2490  0ADE  2A 00 00    	ld	hl,(_sprite)
2491  0AE1  26 00       	ld	h,0x00
2492  0AE3  01 00 00    	ld	bc,_col
2493  0AE6  09          	add	hl,bc
2494  0AE7  7E          	ld	a,(hl)
2495  0AE8  F5          	push	af
2496  0AE9  33          	inc	sp
2497  0AEA  3A 00 00    	ld	a,(_s_lin1)
2498  0AED  F5          	push	af
2499  0AEE  33          	inc	sp
2500  0AEF  CD 00 00    	call	_game_check_map
2501  0AF2  F1          	pop	af
2502  0AF3  7C          	ld	a,h
2503  0AF4  B5          	or	a,l
2504  0AF5  28 28       	jr	Z,l_player_move_jump_00121
2505  0AF7  CD 22 08    	call	_player_hit_platform
2506  0AFA  7D          	ld	a, l
2507  0AFB  B7          	or	a, a
2508  0AFC  28 19       	jr	Z,l_player_move_jump_00119
2509  0AFE  2A 00 00    	ld	hl,(_sprite)
2510  0B01  26 00       	ld	h,0x00
2511  0B03  01 00 00    	ld	bc,_lin
2512  0B06  09          	add	hl,bc
2513  0B07  7E          	ld	a,(hl)
2514  0B08  4D          	ld	c,l
2515  0B09  44          	ld	b,h
2516  0B0A  07          	rlca
2517  0B0B  07          	rlca
2518  0B0C  07          	rlca
2519  0B0D  07          	rlca
2520  0B0E  E6 0F       	and	a,0x0f
2521  0B10  07          	rlca
2522  0B11  07          	rlca
2523  0B12  07          	rlca
2524  0B13  07          	rlca
2525  0B14  E6 F0       	and	a,0xf0
2526  0B16  02          	ld	(bc), a
2527  0B17              l_player_move_jump_00119:
2528  0B17  21 00 00    	ld	hl,_player_vel_y
2529  0B1A  36 00       	ld	(hl),0x00
2530  0B1C  C3 F6 0B    	jp	l_player_move_jump_00141
2531  0B1F              l_player_move_jump_00121:
2532  0B1F  2A 00 00    	ld	hl,(_sprite)
2533  0B22  26 00       	ld	h,0x00
2534  0B24  01 00 00    	ld	bc,_lin
2535  0B27  09          	add	hl,bc
2536  0B28  3A 00 00    	ld	a,(_s_lin1)
2537  0B2B  77          	ld	(hl),a
2538  0B2C  C3 F6 0B    	jp	l_player_move_jump_00141
2539  0B2F              l_player_move_jump_00124:
2540  0B2F  3A 00 00    	ld	a,(_s_lin1)
2541  0B32  02          	ld	(bc), a
2542  0B33  C3 F6 0B    	jp	l_player_move_jump_00141
2543  0B36              l_player_move_jump_00140:
2544  0B36  21 00 00    	ld	hl,_s_state
2545  0B39  7E          	ld	a,(hl)
2546  0B3A  F6 02       	or	a,0x02
2547  0B3C  E6 FE       	and	a,0xfe
2548  0B3E  77          	ld	(hl),a
2549  0B3F  21 00 00    	ld	hl,_s_lin1
2550  0B42  7E          	ld	a, (hl)
2551  0B43  C6 10       	add	a,0x10
2552  0B45  77          	ld	(hl), a
2553  0B46  DD 7E FF    	ld	a,(ix-1)
2554  0B49  96          	sub	a,(hl)
2555  0B4A  20 04       	jr	NZ,l_player_move_jump_00252
2556  0B4C  3E 01       	ld	a,0x01
2557  0B4E  18 01       	jr	l_player_move_jump_00253
2558  0B50              l_player_move_jump_00252:
2559  0B50  AF          	xor	a,a
2560  0B51              l_player_move_jump_00253:
2561  0B51  EE 01       	xor	a,0x01
2562  0B53  CA EE 0B    	jp	Z, l_player_move_jump_00137
2563  0B56  2A 00 00    	ld	hl,(_sprite)
2564  0B59  26 00       	ld	h,0x00
2565  0B5B  01 00 00    	ld	bc,_col
2566  0B5E  09          	add	hl,bc
2567  0B5F  7E          	ld	a,(hl)
2568  0B60  F5          	push	af
2569  0B61  33          	inc	sp
2570  0B62  3A 00 00    	ld	a,(_s_lin1)
2571  0B65  F5          	push	af
2572  0B66  33          	inc	sp
2573  0B67  CD 00 00    	call	_game_check_map
2574  0B6A  F1          	pop	af
2575  0B6B  45          	ld	b, l
2576  0B6C  5C          	ld	e, h
2577  0B6D  21 00 00    	ld	hl,_s_lin1
2578  0B70  7E          	ld	a, (hl)
2579  0B71  C6 F0       	add	a,0xf0
2580  0B73  4F          	ld	c, a
2581  0B74  7B          	ld	a, e
2582  0B75  B0          	or	a,b
2583  0B76  28 63       	jr	Z,l_player_move_jump_00134
2584  0B78  71          	ld	(hl), c
2585  0B79  2E 00       	ld	l,0x00
2586  0B7B  CD 00 04    	call	_player_check_stairs
2587  0B7E  3A 00 00    	ld	a,(_player_over_stair)
2588  0B81  B7          	or	a, a
2589  0B82  20 05       	jr	NZ,l_player_move_jump_00127
2590  0B84  2E 01       	ld	l,0x01
2591  0B86  CD 00 04    	call	_player_check_stairs
2592  0B89              l_player_move_jump_00127:
2593  0B89  3A 00 00    	ld	a,(_player_over_stair)
2594  0B8C  B7          	or	a, a
2595  0B8D  20 31       	jr	NZ,l_player_move_jump_00132
2596  0B8F  21 00 00    	ld	hl,_s_lin1
2597  0B92  7E          	ld	a, (hl)
2598  0B93  07          	rlca
2599  0B94  07          	rlca
2600  0B95  07          	rlca
2601  0B96  07          	rlca
2602  0B97  E6 0F       	and	a,0x0f
2603  0B99  07          	rlca
2604  0B9A  07          	rlca
2605  0B9B  07          	rlca
2606  0B9C  07          	rlca
2607  0B9D  E6 F0       	and	a,0xf0
2608  0B9F  77          	ld	(hl), a
2609  0BA0  2A 00 00    	ld	hl,(_sprite)
2610  0BA3  26 00       	ld	h,0x00
2611  0BA5  01 00 00    	ld	bc,_lin
2612  0BA8  09          	add	hl,bc
2613  0BA9  5E          	ld	e,(hl)
2614  0BAA  4D          	ld	c,l
2615  0BAB  44          	ld	b,h
2616  0BAC  21 00 00    	ld	hl,_s_lin1
2617  0BAF  7E          	ld	a, (hl)
2618  0BB0  93          	sub	a, e
2619  0BB1  30 09       	jr	NC,l_player_move_jump_00129
2620  0BB3  7E          	ld	a, (hl)
2621  0BB4  C6 10       	add	a,0x10
2622  0BB6  02          	ld	(bc), a
2623  0BB7  2E 00       	ld	l,0x00
2624  0BB9  C3 3E 0C    	jp	l_player_move_jump_00151
2625  0BBC              l_player_move_jump_00129:
2626  0BBC  3A 00 00    	ld	a,(_s_lin1)
2627  0BBF  02          	ld	(bc), a
2628  0BC0              l_player_move_jump_00132:
2629  0BC0  21 00 00    	ld	hl,_player_vel_y
2630  0BC3  36 00       	ld	(hl),0x00
2631  0BC5  21 00 00    	ld	hl,_s_state
2632  0BC8  7E          	ld	a,(hl)
2633  0BC9  E6 FC       	and	a,+(0xfd&0xfe)
2634  0BCB  77          	ld	(hl),a
2635  0BCC  2A 00 00    	ld	hl,(_sprite)
2636  0BCF  26 00       	ld	h,0x00
2637  0BD1  01 00 00    	ld	bc,_colint
2638  0BD4  09          	add	hl,bc
2639  0BD5  AF          	xor	a,a
2640  0BD6  77          	ld	(hl),a
2641  0BD7  2E 01       	ld	l,0x01
2642  0BD9  18 63       	jr	l_player_move_jump_00151
2643  0BDB              l_player_move_jump_00134:
2644  0BDB  21 00 00    	ld	hl,_s_lin1
2645  0BDE  71          	ld	(hl), c
2646  0BDF  2A 00 00    	ld	hl,(_sprite)
2647  0BE2  26 00       	ld	h,0x00
2648  0BE4  01 00 00    	ld	bc,_lin
2649  0BE7  09          	add	hl,bc
2650  0BE8  3A 00 00    	ld	a,(_s_lin1)
2651  0BEB  77          	ld	(hl),a
2652  0BEC  18 08       	jr	l_player_move_jump_00141
2653  0BEE              l_player_move_jump_00137:
2654  0BEE  21 00 00    	ld	hl,_s_lin1
2655  0BF1  7E          	ld	a, (hl)
2656  0BF2  C6 F0       	add	a,0xf0
2657  0BF4  77          	ld	(hl),a
2658  0BF5  02          	ld	(bc), a
2659  0BF6              l_player_move_jump_00141:
2660  0BF6  21 00 00    	ld	hl,_s_state
2661  0BF9  CB 5E       	bit	3, (hl)
2662  0BFB  20 27       	jr	NZ,l_player_move_jump_00147
2663  0BFD  21 00 00    	ld	hl,_s_state
2664  0C00  CB 56       	bit	2, (hl)
2665  0C02  20 20       	jr	NZ,l_player_move_jump_00147
2666  0C04  21 00 00    	ld	hl,_dirs
2667  0C07  CB 56       	bit	2, (hl)
2668  0C09  28 09       	jr	Z,l_player_move_jump_00143
2669  0C0B  21 00 00    	ld	hl,_s_state
2670  0C0E  7E          	ld	a,(hl)
2671  0C0F  F6 08       	or	a,0x08
2672  0C11  E6 FB       	and	a,0xfb
2673  0C13  77          	ld	(hl),a
2674  0C14              l_player_move_jump_00143:
2675  0C14  21 00 00    	ld	hl,_dirs
2676  0C17  CB 5E       	bit	3, (hl)
2677  0C19  28 09       	jr	Z,l_player_move_jump_00147
2678  0C1B  21 00 00    	ld	hl,_s_state
2679  0C1E  7E          	ld	a,(hl)
2680  0C1F  F6 04       	or	a,0x04
2681  0C21  E6 F7       	and	a,0xf7
2682  0C23  77          	ld	(hl),a
2683  0C24              l_player_move_jump_00147:
2684  0C24  21 00 00    	ld	hl,_sprite_horizontal_check
2685  0C27  36 01       	ld	(hl),0x01
2686  0C29  CD 00 00    	call	_spr_move_horizontal
2687  0C2C  7D          	ld	a, l
2688  0C2D  B7          	or	a, a
2689  0C2E  28 07       	jr	Z,l_player_move_jump_00150
2690  0C30  21 00 00    	ld	hl,_s_state
2691  0C33  7E          	ld	a,(hl)
2692  0C34  E6 F3       	and	a,+(0xf7&0xfb)
2693  0C36  77          	ld	(hl),a
2694  0C37              l_player_move_jump_00150:
2695  0C37  21 00 00    	ld	hl,_sprite_horizontal_check
2696  0C3A  36 00       	ld	(hl),0x00
2697  0C3C  2E 00       	ld	l,0x00
2698  0C3E              l_player_move_jump_00151:
2699  0C3E  33          	inc	sp
2700  0C3F  DD E1       	pop	ix
2701  0C41  C9          	ret
2702  0C42              	SECTION code_compiler
2703  0C42              ;	---------------------------------
2704  0C42              ; Function player_open_door
2705  0C42              ; ---------------------------------
2706  0C42              _player_open_door:
2707  0C42  CD 00 00    	call	___sdcc_enter_ix
2708  0C45  0E 00       	ld	c,0x00
2709  0C47  DD 7E 06    	ld	a,(ix+6)
2710  0C4A  D6 3C       	sub	a,0x3c
2711  0C4C  28 17       	jr	Z,l_player_open_door_00101
2712  0C4E  DD 7E 06    	ld	a,(ix+6)
2713  0C51  D6 3D       	sub	a,0x3d
2714  0C53  28 1F       	jr	Z,l_player_open_door_00104
2715  0C55  DD 7E 06    	ld	a,(ix+6)
2716  0C58  D6 3E       	sub	a,0x3e
2717  0C5A  28 27       	jr	Z,l_player_open_door_00107
2718  0C5C  DD 7E 06    	ld	a,(ix+6)
2719  0C5F  D6 3F       	sub	a,0x3f
2720  0C61  28 2F       	jr	Z,l_player_open_door_00110
2721  0C63  18 3A       	jr	l_player_open_door_00113
2722  0C65              l_player_open_door_00101:
2723  0C65  3A 00 00    	ld	a,(_player_keys)
2724  0C68  B7          	or	a, a
2725  0C69  28 34       	jr	Z,l_player_open_door_00113
2726  0C6B  2E 07       	ld	l,0x07
2727  0C6D  CD 00 00    	call	_zx_border_fastcall
2728  0C70  0E 01       	ld	c,0x01
2729  0C72  18 2B       	jr	l_player_open_door_00113
2730  0C74              l_player_open_door_00104:
2731  0C74  3A 01 00    	ld	a,(_player_keys + 0x0001)
2732  0C77  B7          	or	a, a
2733  0C78  28 25       	jr	Z,l_player_open_door_00113
2734  0C7A  2E 02       	ld	l,0x02
2735  0C7C  CD 00 00    	call	_zx_border_fastcall
2736  0C7F  0E 01       	ld	c,0x01
2737  0C81  18 1C       	jr	l_player_open_door_00113
2738  0C83              l_player_open_door_00107:
2739  0C83  3A 02 00    	ld	a,(_player_keys + 0x0002)
2740  0C86  B7          	or	a, a
2741  0C87  28 16       	jr	Z,l_player_open_door_00113
2742  0C89  2E 04       	ld	l,0x04
2743  0C8B  CD 00 00    	call	_zx_border_fastcall
2744  0C8E  0E 01       	ld	c,0x01
2745  0C90  18 0D       	jr	l_player_open_door_00113
2746  0C92              l_player_open_door_00110:
2747  0C92  3A 03 00    	ld	a,(_player_keys + 0x0003)
2748  0C95  B7          	or	a, a
2749  0C96  28 07       	jr	Z,l_player_open_door_00113
2750  0C98  2E 05       	ld	l,0x05
2751  0C9A  CD 00 00    	call	_zx_border_fastcall
2752  0C9D  0E 01       	ld	c,0x01
2753  0C9F              l_player_open_door_00113:
2754  0C9F  79          	ld	a, c
2755  0CA0  B7          	or	a, a
2756  0CA1  28 37       	jr	Z,l_player_open_door_00116
2757  0CA3  3E 00       	ld	a, +((_scr_map) & 0xFF)
2758  0CA5  DD 86 04    	add	a,(ix+4)
2759  0CA8  4F          	ld	c, a
2760  0CA9  3E 00       	ld	a, +((_scr_map) / 256)
2761  0CAB  DD 8E 05    	adc	a,(ix+5)
2762  0CAE  47          	ld	b, a
2763  0CAF  AF          	xor	a, a
2764  0CB0  02          	ld	(bc), a
2765  0CB1  3E 00       	ld	a, +((_scr_obj) & 0xFF)
2766  0CB3  DD 86 04    	add	a,(ix+4)
2767  0CB6  4F          	ld	c, a
2768  0CB7  3E 00       	ld	a, +((_scr_obj) / 256)
2769  0CB9  DD 8E 05    	adc	a,(ix+5)
2770  0CBC  47          	ld	b, a
2771  0CBD  0A          	ld	a, (bc)
2772  0CBE  5F          	ld	e, a
2773  0CBF  3A 00 00    	ld	a,(_scr_curr)
2774  0CC2  3C          	inc	a
2775  0CC3  16 01       	ld	d,0x01
2776  0CC5  18 02       	jr	l_player_open_door_00159
2777  0CC7              l_player_open_door_00158:
2778  0CC7  CB 22       	sla	d
2779  0CC9              l_player_open_door_00159:
2780  0CC9  3D          	dec	a
2781  0CCA  20 FB       	jr	NZ,l_player_open_door_00158
2782  0CCC  7B          	ld	a, e
2783  0CCD  B2          	or	a, d
2784  0CCE  02          	ld	(bc), a
2785  0CCF  DD 6E 04    	ld	l,(ix+4)
2786  0CD2  DD 66 05    	ld	h,(ix+5)
2787  0CD5  E5          	push	hl
2788  0CD6  CD 00 00    	call	_spr_draw_index
2789  0CD9  F1          	pop	af
2790  0CDA              l_player_open_door_00116:
2791  0CDA  DD E1       	pop	ix
2792  0CDC  C9          	ret
2793  0CDD              	SECTION IGNORE
2794  0000              
