1     0000              MODULE game_player_c
2     0000              
3     0000              ;--------------------------------------------------------
4     0000              ; File Created by SDCC : free open source ANSI-C Compiler
5     0000              ; Version 3.6.5 #9958 (Mac OS X i386)
6     0000              ;--------------------------------------------------------
7     0000              ; Processed by Z88DK
8     0000              ;--------------------------------------------------------
9     0000              
10    0000              	EXTERN __divschar
11    0000              	EXTERN __divschar_callee
12    0000              	EXTERN __divsint
13    0000              	EXTERN __divsint_callee
14    0000              	EXTERN __divslong
15    0000              	EXTERN __divslong_callee
16    0000              	EXTERN __divslonglong
17    0000              	EXTERN __divslonglong_callee
18    0000              	EXTERN __divsuchar
19    0000              	EXTERN __divsuchar_callee
20    0000              	EXTERN __divuchar
21    0000              	EXTERN __divuchar_callee
22    0000              	EXTERN __divuint
23    0000              	EXTERN __divuint_callee
24    0000              	EXTERN __divulong
25    0000              	EXTERN __divulong_callee
26    0000              	EXTERN __divulonglong
27    0000              	EXTERN __divulonglong_callee
28    0000              	EXTERN __divuschar
29    0000              	EXTERN __divuschar_callee
30    0000              	EXTERN __modschar
31    0000              	EXTERN __modschar_callee
32    0000              	EXTERN __modsint
33    0000              	EXTERN __modsint_callee
34    0000              	EXTERN __modslong
35    0000              	EXTERN __modslong_callee
36    0000              	EXTERN __modslonglong
37    0000              	EXTERN __modslonglong_callee
38    0000              	EXTERN __modsuchar
39    0000              	EXTERN __modsuchar_callee
40    0000              	EXTERN __moduchar
41    0000              	EXTERN __moduchar_callee
42    0000              	EXTERN __moduint
43    0000              	EXTERN __moduint_callee
44    0000              	EXTERN __modulong
45    0000              	EXTERN __modulong_callee
46    0000              	EXTERN __modulonglong
47    0000              	EXTERN __modulonglong_callee
48    0000              	EXTERN __moduschar
49    0000              	EXTERN __moduschar_callee
50    0000              	EXTERN __mulint
51    0000              	EXTERN __mulint_callee
52    0000              	EXTERN __mullong
53    0000              	EXTERN __mullong_callee
54    0000              	EXTERN __mullonglong
55    0000              	EXTERN __mullonglong_callee
56    0000              	EXTERN __mulschar
57    0000              	EXTERN __mulschar_callee
58    0000              	EXTERN __mulsuchar
59    0000              	EXTERN __mulsuchar_callee
60    0000              	EXTERN __muluschar
61    0000              	EXTERN __muluschar_callee
62    0000              	EXTERN __rlslonglong
63    0000              	EXTERN __rlslonglong_callee
64    0000              	EXTERN __rlulonglong
65    0000              	EXTERN __rlulonglong_callee
66    0000              	EXTERN __rrslonglong
67    0000              	EXTERN __rrslonglong_callee
68    0000              	EXTERN __rrulonglong
69    0000              	EXTERN __rrulonglong_callee
70    0000              	EXTERN ___sdcc_call_hl
71    0000              	EXTERN ___sdcc_call_iy
72    0000              	EXTERN ___sdcc_enter_ix
73    0000              	EXTERN _banked_call
74    0000              	EXTERN _banked_ret
75    0000              	EXTERN ___fs2schar
76    0000              	EXTERN ___fs2schar_callee
77    0000              	EXTERN ___fs2sint
78    0000              	EXTERN ___fs2sint_callee
79    0000              	EXTERN ___fs2slong
80    0000              	EXTERN ___fs2slong_callee
81    0000              	EXTERN ___fs2slonglong
82    0000              	EXTERN ___fs2slonglong_callee
83    0000              	EXTERN ___fs2uchar
84    0000              	EXTERN ___fs2uchar_callee
85    0000              	EXTERN ___fs2uint
86    0000              	EXTERN ___fs2uint_callee
87    0000              	EXTERN ___fs2ulong
88    0000              	EXTERN ___fs2ulong_callee
89    0000              	EXTERN ___fs2ulonglong
90    0000              	EXTERN ___fs2ulonglong_callee
91    0000              	EXTERN ___fsadd
92    0000              	EXTERN ___fsadd_callee
93    0000              	EXTERN ___fsdiv
94    0000              	EXTERN ___fsdiv_callee
95    0000              	EXTERN ___fseq
96    0000              	EXTERN ___fseq_callee
97    0000              	EXTERN ___fsgt
98    0000              	EXTERN ___fsgt_callee
99    0000              	EXTERN ___fslt
100   0000              	EXTERN ___fslt_callee
101   0000              	EXTERN ___fsmul
102   0000              	EXTERN ___fsmul_callee
103   0000              	EXTERN ___fsneq
104   0000              	EXTERN ___fsneq_callee
105   0000              	EXTERN ___fssub
106   0000              	EXTERN ___fssub_callee
107   0000              	EXTERN ___schar2fs
108   0000              	EXTERN ___schar2fs_callee
109   0000              	EXTERN ___sint2fs
110   0000              	EXTERN ___sint2fs_callee
111   0000              	EXTERN ___slong2fs
112   0000              	EXTERN ___slong2fs_callee
113   0000              	EXTERN ___slonglong2fs
114   0000              	EXTERN ___slonglong2fs_callee
115   0000              	EXTERN ___uchar2fs
116   0000              	EXTERN ___uchar2fs_callee
117   0000              	EXTERN ___uint2fs
118   0000              	EXTERN ___uint2fs_callee
119   0000              	EXTERN ___ulong2fs
120   0000              	EXTERN ___ulong2fs_callee
121   0000              	EXTERN ___ulonglong2fs
122   0000              	EXTERN ___ulonglong2fs_callee
123   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
126   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
127   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
128   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
129   0000              	EXTERN ____sdcc_4_ldi_save_bc
130   0000              	EXTERN ____sdcc_4_push_hlix
131   0000              	EXTERN ____sdcc_4_push_mhl
132   0000              	EXTERN ____sdcc_lib_setmem_hl
133   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
134   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
135   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
136   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
137   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
138   0000              	EXTERN ____sdcc_ll_add_deix_hlix
139   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
140   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
141   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
142   0000              	EXTERN ____sdcc_ll_asr_hlix_a
143   0000              	EXTERN ____sdcc_ll_asr_mbc_a
144   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
145   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
146   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
147   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
148   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
149   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
150   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
151   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
152   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
153   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
155   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
156   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
157   0000              	EXTERN ____sdcc_ll_push_hlix
158   0000              	EXTERN ____sdcc_ll_push_mhl
159   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
160   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
161   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
162   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
163   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
164   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
165   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
166   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
167   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
168   0000              	EXTERN ____sdcc_load_debc_deix
169   0000              	EXTERN ____sdcc_load_dehl_deix
170   0000              	EXTERN ____sdcc_load_debc_mhl
171   0000              	EXTERN ____sdcc_load_hlde_mhl
172   0000              	EXTERN ____sdcc_store_dehl_bcix
173   0000              	EXTERN ____sdcc_store_debc_hlix
174   0000              	EXTERN ____sdcc_store_debc_mhl
175   0000              	EXTERN ____sdcc_cpu_pop_ei
176   0000              	EXTERN ____sdcc_cpu_pop_ei_jp
177   0000              	EXTERN ____sdcc_cpu_push_di
178   0000              	EXTERN ____sdcc_outi
179   0000              	EXTERN ____sdcc_outi_128
180   0000              	EXTERN ____sdcc_outi_256
181   0000              	EXTERN ____sdcc_ldi
182   0000              	EXTERN ____sdcc_ldi_128
183   0000              	EXTERN ____sdcc_ldi_256
184   0000              
185   0000              ;--------------------------------------------------------
186   0000              ; Public variables in this module
187   0000              ;--------------------------------------------------------
188   0000              	GLOBAL _player_check_map
189   0000              	GLOBAL _player_init
190   0000              	GLOBAL _player_check_input
191   0000              	GLOBAL _player_collision
192   0000              	GLOBAL _player_kill
193   0000              	GLOBAL _player_restart
194   0000              	GLOBAL _player_turn
195   0000              	GLOBAL _player_move
196   0000              	GLOBAL _player_check_stairs_down
197   0000              	GLOBAL _player_check_stairs
198   0000              	GLOBAL _player_tile
199   0000              	GLOBAL _player_move_input
200   0000              	GLOBAL _player_fire
201   0000              	GLOBAL _player_pick_item
202   0000              	GLOBAL _player_hit_platform
203   0000              	GLOBAL _player_hit_platform_clear
204   0000              	GLOBAL _player_score_add
205   0000              	GLOBAL _player_check_floor
206   0000              	GLOBAL _player_gasta_brick
207   0000              	GLOBAL _player_move_jump
208   0000              	GLOBAL _player_open_door
209   0000              	GLOBAL _player_lost_life
210   0000              	GLOBAL _player_hit
211   0000              ;--------------------------------------------------------
212   0000              ; Externals used
213   0000              ;--------------------------------------------------------
214   0000              	GLOBAL _ulltoa_callee
215   0000              	GLOBAL _ulltoa
216   0000              	GLOBAL _strtoull_callee
217   0000              	GLOBAL _strtoull
218   0000              	GLOBAL _strtoll_callee
219   0000              	GLOBAL _strtoll
220   0000              	GLOBAL _lltoa_callee
221   0000              	GLOBAL _lltoa
222   0000              	GLOBAL _llabs_callee
223   0000              	GLOBAL _llabs
224   0000              	GLOBAL __lldivu__callee
225   0000              	GLOBAL __lldivu_
226   0000              	GLOBAL __lldiv__callee
227   0000              	GLOBAL __lldiv_
228   0000              	GLOBAL _atoll_callee
229   0000              	GLOBAL _atoll
230   0000              	GLOBAL _realloc_unlocked_callee
231   0000              	GLOBAL _realloc_unlocked
232   0000              	GLOBAL _malloc_unlocked_fastcall
233   0000              	GLOBAL _malloc_unlocked
234   0000              	GLOBAL _free_unlocked_fastcall
235   0000              	GLOBAL _free_unlocked
236   0000              	GLOBAL _calloc_unlocked_callee
237   0000              	GLOBAL _calloc_unlocked
238   0000              	GLOBAL _aligned_alloc_unlocked_callee
239   0000              	GLOBAL _aligned_alloc_unlocked
240   0000              	GLOBAL _realloc_callee
241   0000              	GLOBAL _realloc
242   0000              	GLOBAL _malloc_fastcall
243   0000              	GLOBAL _malloc
244   0000              	GLOBAL _free_fastcall
245   0000              	GLOBAL _free
246   0000              	GLOBAL _calloc_callee
247   0000              	GLOBAL _calloc
248   0000              	GLOBAL _aligned_alloc_callee
249   0000              	GLOBAL _aligned_alloc
250   0000              	GLOBAL _utoa_callee
251   0000              	GLOBAL _utoa
252   0000              	GLOBAL _ultoa_callee
253   0000              	GLOBAL _ultoa
254   0000              	GLOBAL _system_fastcall
255   0000              	GLOBAL _system
256   0000              	GLOBAL _strtoul_callee
257   0000              	GLOBAL _strtoul
258   0000              	GLOBAL _strtol_callee
259   0000              	GLOBAL _strtol
260   0000              	GLOBAL _strtof_callee
261   0000              	GLOBAL _strtof
262   0000              	GLOBAL _strtod_callee
263   0000              	GLOBAL _strtod
264   0000              	GLOBAL _srand_fastcall
265   0000              	GLOBAL _srand
266   0000              	GLOBAL _rand
267   0000              	GLOBAL _quick_exit_fastcall
268   0000              	GLOBAL _quick_exit
269   0000              	GLOBAL _qsort_callee
270   0000              	GLOBAL _qsort
271   0000              	GLOBAL _ltoa_callee
272   0000              	GLOBAL _ltoa
273   0000              	GLOBAL _labs_fastcall
274   0000              	GLOBAL _labs
275   0000              	GLOBAL _itoa_callee
276   0000              	GLOBAL _itoa
277   0000              	GLOBAL _ftoh_callee
278   0000              	GLOBAL _ftoh
279   0000              	GLOBAL _ftog_callee
280   0000              	GLOBAL _ftog
281   0000              	GLOBAL _ftoe_callee
282   0000              	GLOBAL _ftoe
283   0000              	GLOBAL _ftoa_callee
284   0000              	GLOBAL _ftoa
285   0000              	GLOBAL _exit_fastcall
286   0000              	GLOBAL _exit
287   0000              	GLOBAL _dtoh_callee
288   0000              	GLOBAL _dtoh
289   0000              	GLOBAL _dtog_callee
290   0000              	GLOBAL _dtog
291   0000              	GLOBAL _dtoe_callee
292   0000              	GLOBAL _dtoe
293   0000              	GLOBAL _dtoa_callee
294   0000              	GLOBAL _dtoa
295   0000              	GLOBAL _bsearch_callee
296   0000              	GLOBAL _bsearch
297   0000              	GLOBAL _atol_fastcall
298   0000              	GLOBAL _atol
299   0000              	GLOBAL _atoi_fastcall
300   0000              	GLOBAL _atoi
301   0000              	GLOBAL _atof_fastcall
302   0000              	GLOBAL _atof
303   0000              	GLOBAL _atexit_fastcall
304   0000              	GLOBAL _atexit
305   0000              	GLOBAL _at_quick_exit_fastcall
306   0000              	GLOBAL _at_quick_exit
307   0000              	GLOBAL _abs_fastcall
308   0000              	GLOBAL _abs
309   0000              	GLOBAL _abort
310   0000              	GLOBAL __strtou__callee
311   0000              	GLOBAL __strtou_
312   0000              	GLOBAL __strtoi__callee
313   0000              	GLOBAL __strtoi_
314   0000              	GLOBAL __random_uniform_xor_8__fastcall
315   0000              	GLOBAL __random_uniform_xor_8_
316   0000              	GLOBAL __random_uniform_xor_32__fastcall
317   0000              	GLOBAL __random_uniform_xor_32_
318   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
319   0000              	GLOBAL __random_uniform_cmwc_8_
320   0000              	GLOBAL __shellsort__callee
321   0000              	GLOBAL __shellsort_
322   0000              	GLOBAL __quicksort__callee
323   0000              	GLOBAL __quicksort_
324   0000              	GLOBAL __insertion_sort__callee
325   0000              	GLOBAL __insertion_sort_
326   0000              	GLOBAL __ldivu__callee
327   0000              	GLOBAL __ldivu_
328   0000              	GLOBAL __ldiv__callee
329   0000              	GLOBAL __ldiv_
330   0000              	GLOBAL __divu__callee
331   0000              	GLOBAL __divu_
332   0000              	GLOBAL __div__callee
333   0000              	GLOBAL __div_
334   0000              	GLOBAL _NIRVANAP_drawTW_raw_callee
335   0000              	GLOBAL _NIRVANAP_drawTW_raw
336   0000              	GLOBAL _NIRVANAP_drawTW_callee
337   0000              	GLOBAL _NIRVANAP_drawTW
338   0000              	GLOBAL _NIRVANAP_drawW_raw_callee
339   0000              	GLOBAL _NIRVANAP_drawW_raw
340   0000              	GLOBAL _NIRVANAP_drawW_callee
341   0000              	GLOBAL _NIRVANAP_drawW
342   0000              	GLOBAL _NIRVANAP_spriteT_callee
343   0000              	GLOBAL _NIRVANAP_spriteT
344   0000              	GLOBAL _NIRVANAP_fillC_callee
345   0000              	GLOBAL _NIRVANAP_fillC
346   0000              	GLOBAL _NIRVANAP_readC_callee
347   0000              	GLOBAL _NIRVANAP_readC
348   0000              	GLOBAL _NIRVANAP_paintC_callee
349   0000              	GLOBAL _NIRVANAP_paintC
350   0000              	GLOBAL _NIRVANAP_printC_callee
351   0000              	GLOBAL _NIRVANAP_printC
352   0000              	GLOBAL _NIRVANAP_fillT_raw_callee
353   0000              	GLOBAL _NIRVANAP_fillT_raw
354   0000              	GLOBAL _NIRVANAP_fillT_callee
355   0000              	GLOBAL _NIRVANAP_fillT
356   0000              	GLOBAL _NIRVANAP_drawT_raw_callee
357   0000              	GLOBAL _NIRVANAP_drawT_raw
358   0000              	GLOBAL _NIRVANAP_drawT_callee
359   0000              	GLOBAL _NIRVANAP_drawT
360   0000              	GLOBAL _NIRVANAP_stop
361   0000              	GLOBAL _NIRVANAP_start
362   0000              	GLOBAL _debug3
363   0000              	GLOBAL _debug2
364   0000              	GLOBAL _debug
365   0000              	GLOBAL _zx_print_str
366   0000              	GLOBAL _zx_print_int
367   0000              	GLOBAL _zx_print_chr
368   0000              	GLOBAL _zx_print_bonus_time
369   0000              	GLOBAL _zx_isr
370   0000              	GLOBAL _z80_otdr_callee
371   0000              	GLOBAL _z80_otdr
372   0000              	GLOBAL _z80_otir_callee
373   0000              	GLOBAL _z80_otir
374   0000              	GLOBAL _z80_outp_callee
375   0000              	GLOBAL _z80_outp
376   0000              	GLOBAL _z80_indr_callee
377   0000              	GLOBAL _z80_indr
378   0000              	GLOBAL _z80_inir_callee
379   0000              	GLOBAL _z80_inir
380   0000              	GLOBAL _z80_inp_fastcall
381   0000              	GLOBAL _z80_inp
382   0000              	GLOBAL _z80_set_int_state_fastcall
383   0000              	GLOBAL _z80_set_int_state
384   0000              	GLOBAL _z80_get_int_state
385   0000              	GLOBAL _z80_delay_tstate_fastcall
386   0000              	GLOBAL _z80_delay_tstate
387   0000              	GLOBAL _z80_delay_ms_fastcall
388   0000              	GLOBAL _z80_delay_ms
389   0000              	GLOBAL _im2_remove_generic_callback_callee
390   0000              	GLOBAL _im2_remove_generic_callback
391   0000              	GLOBAL _im2_prepend_generic_callback_callee
392   0000              	GLOBAL _im2_prepend_generic_callback
393   0000              	GLOBAL _im2_append_generic_callback_callee
394   0000              	GLOBAL _im2_append_generic_callback
395   0000              	GLOBAL _im2_create_generic_isr_8080_callee
396   0000              	GLOBAL _im2_create_generic_isr_8080
397   0000              	GLOBAL _im2_create_generic_isr_callee
398   0000              	GLOBAL _im2_create_generic_isr
399   0000              	GLOBAL _im2_install_isr_callee
400   0000              	GLOBAL _im2_install_isr
401   0000              	GLOBAL _im2_init_fastcall
402   0000              	GLOBAL _im2_init
403   0000              	GLOBAL _intrinsic_swap_word_32_fastcall
404   0000              	GLOBAL _intrinsic_swap_word_32
405   0000              	GLOBAL _intrinsic_swap_endian_32_fastcall
406   0000              	GLOBAL _intrinsic_swap_endian_32
407   0000              	GLOBAL _intrinsic_swap_endian_16_fastcall
408   0000              	GLOBAL _intrinsic_swap_endian_16
409   0000              	GLOBAL _intrinsic_return_de
410   0000              	GLOBAL _intrinsic_return_bc
411   0000              	GLOBAL _intrinsic_exx
412   0000              	GLOBAL _intrinsic_ex_de_hl
413   0000              	GLOBAL _intrinsic_nop
414   0000              	GLOBAL _intrinsic_im_2
415   0000              	GLOBAL _intrinsic_im_1
416   0000              	GLOBAL _intrinsic_im_0
417   0000              	GLOBAL _intrinsic_retn
418   0000              	GLOBAL _intrinsic_reti
419   0000              	GLOBAL _intrinsic_halt
420   0000              	GLOBAL _intrinsic_ei
421   0000              	GLOBAL _intrinsic_di
422   0000              	GLOBAL _intrinsic_stub
423   0000              	GLOBAL _intrinsic_outi
424   0000              	GLOBAL _intrinsic_ldi
425   0000              	GLOBAL _zx_pattern_fill_callee
426   0000              	GLOBAL _zx_pattern_fill
427   0000              	GLOBAL _zx_saddrpup_fastcall
428   0000              	GLOBAL _zx_saddrpup
429   0000              	GLOBAL _zx_saddrpright_callee
430   0000              	GLOBAL _zx_saddrpright
431   0000              	GLOBAL _zx_saddrpleft_callee
432   0000              	GLOBAL _zx_saddrpleft
433   0000              	GLOBAL _zx_saddrpdown_fastcall
434   0000              	GLOBAL _zx_saddrpdown
435   0000              	GLOBAL _zx_saddrcup_fastcall
436   0000              	GLOBAL _zx_saddrcup
437   0000              	GLOBAL _zx_saddrcright_fastcall
438   0000              	GLOBAL _zx_saddrcright
439   0000              	GLOBAL _zx_saddrcleft_fastcall
440   0000              	GLOBAL _zx_saddrcleft
441   0000              	GLOBAL _zx_saddrcdown_fastcall
442   0000              	GLOBAL _zx_saddrcdown
443   0000              	GLOBAL _zx_saddr2py_fastcall
444   0000              	GLOBAL _zx_saddr2py
445   0000              	GLOBAL _zx_saddr2px_fastcall
446   0000              	GLOBAL _zx_saddr2px
447   0000              	GLOBAL _zx_saddr2cy_fastcall
448   0000              	GLOBAL _zx_saddr2cy
449   0000              	GLOBAL _zx_saddr2cx_fastcall
450   0000              	GLOBAL _zx_saddr2cx
451   0000              	GLOBAL _zx_saddr2aaddr_fastcall
452   0000              	GLOBAL _zx_saddr2aaddr
453   0000              	GLOBAL _zx_py2saddr_fastcall
454   0000              	GLOBAL _zx_py2saddr
455   0000              	GLOBAL _zx_py2aaddr_fastcall
456   0000              	GLOBAL _zx_py2aaddr
457   0000              	GLOBAL _zx_pxy2saddr_callee
458   0000              	GLOBAL _zx_pxy2saddr
459   0000              	GLOBAL _zx_pxy2aaddr_callee
460   0000              	GLOBAL _zx_pxy2aaddr
461   0000              	GLOBAL _zx_px2bitmask_fastcall
462   0000              	GLOBAL _zx_px2bitmask
463   0000              	GLOBAL _zx_cy2saddr_fastcall
464   0000              	GLOBAL _zx_cy2saddr
465   0000              	GLOBAL _zx_cy2aaddr_fastcall
466   0000              	GLOBAL _zx_cy2aaddr
467   0000              	GLOBAL _zx_cxy2saddr_callee
468   0000              	GLOBAL _zx_cxy2saddr
469   0000              	GLOBAL _zx_cxy2aaddr_callee
470   0000              	GLOBAL _zx_cxy2aaddr
471   0000              	GLOBAL _zx_bitmask2px_fastcall
472   0000              	GLOBAL _zx_bitmask2px
473   0000              	GLOBAL _zx_aaddrcup_fastcall
474   0000              	GLOBAL _zx_aaddrcup
475   0000              	GLOBAL _zx_aaddrcright_fastcall
476   0000              	GLOBAL _zx_aaddrcright
477   0000              	GLOBAL _zx_aaddrcleft_fastcall
478   0000              	GLOBAL _zx_aaddrcleft
479   0000              	GLOBAL _zx_aaddrcdown_fastcall
480   0000              	GLOBAL _zx_aaddrcdown
481   0000              	GLOBAL _zx_aaddr2saddr_fastcall
482   0000              	GLOBAL _zx_aaddr2saddr
483   0000              	GLOBAL _zx_aaddr2py_fastcall
484   0000              	GLOBAL _zx_aaddr2py
485   0000              	GLOBAL _zx_aaddr2px_fastcall
486   0000              	GLOBAL _zx_aaddr2px
487   0000              	GLOBAL _zx_aaddr2cy_fastcall
488   0000              	GLOBAL _zx_aaddr2cy
489   0000              	GLOBAL _zx_aaddr2cx_fastcall
490   0000              	GLOBAL _zx_aaddr2cx
491   0000              	GLOBAL _zx_visit_wc_pix_callee
492   0000              	GLOBAL _zx_visit_wc_pix
493   0000              	GLOBAL _zx_visit_wc_attr_callee
494   0000              	GLOBAL _zx_visit_wc_attr
495   0000              	GLOBAL _zx_scroll_wc_up_pix_callee
496   0000              	GLOBAL _zx_scroll_wc_up_pix
497   0000              	GLOBAL _zx_scroll_wc_up_attr_callee
498   0000              	GLOBAL _zx_scroll_wc_up_attr
499   0000              	GLOBAL _zx_scroll_wc_up_callee
500   0000              	GLOBAL _zx_scroll_wc_up
501   0000              	GLOBAL _zx_scroll_up_pix_callee
502   0000              	GLOBAL _zx_scroll_up_pix
503   0000              	GLOBAL _zx_scroll_up_attr_callee
504   0000              	GLOBAL _zx_scroll_up_attr
505   0000              	GLOBAL _zx_scroll_up_callee
506   0000              	GLOBAL _zx_scroll_up
507   0000              	GLOBAL _zx_cls_wc_pix_callee
508   0000              	GLOBAL _zx_cls_wc_pix
509   0000              	GLOBAL _zx_cls_wc_attr_callee
510   0000              	GLOBAL _zx_cls_wc_attr
511   0000              	GLOBAL _zx_cls_wc_callee
512   0000              	GLOBAL _zx_cls_wc
513   0000              	GLOBAL _zx_cls_pix_fastcall
514   0000              	GLOBAL _zx_cls_pix
515   0000              	GLOBAL _zx_cls_attr_fastcall
516   0000              	GLOBAL _zx_cls_attr
517   0000              	GLOBAL _zx_cls_fastcall
518   0000              	GLOBAL _zx_cls
519   0000              	GLOBAL _zx_border_fastcall
520   0000              	GLOBAL _zx_border
521   0000              	GLOBAL _spr_btile_paint_back
522   0000              	GLOBAL _spr_explode_bullet
523   0000              	GLOBAL _spr_init_anim_bullets
524   0000              	GLOBAL _spr_turn_horizontal
525   0000              	GLOBAL _spr_play_bullets
526   0000              	GLOBAL _spr_play_anim
527   0000              	GLOBAL _spr_add_anim
528   0000              	GLOBAL _spr_page_map
529   0000              	GLOBAL _spr_page_down
530   0000              	GLOBAL _spr_page_up
531   0000              	GLOBAL _spr_page_right
532   0000              	GLOBAL _spr_page_left
533   0000              	GLOBAL _spr_tile_paint
534   0000              	GLOBAL _spr_calc_hor
535   0000              	GLOBAL _spr_draw_row
536   0000              	GLOBAL _spr_draw_index
537   0000              	GLOBAL _spr_brick_anim
538   0000              	GLOBAL _spr_back_repaint
539   0000              	GLOBAL _spr_tile
540   0000              	GLOBAL _spr_destroy
541   0000              	GLOBAL _spr_tile_dir
542   0000              	GLOBAL _spr_redraw
543   0000              	GLOBAL _spr_move_left
544   0000              	GLOBAL _spr_move_right
545   0000              	GLOBAL _spr_move_horizontal
546   0000              	GLOBAL _spr_move_down
547   0000              	GLOBAL _spr_move_up
548   0000              	GLOBAL _spr_calc_index
549   0000              	GLOBAL _spr_chktime
550   0000              	GLOBAL _sound_hit_brick
551   0000              	GLOBAL _sound_hit_enemy
552   0000              	GLOBAL _sound_kill
553   0000              	GLOBAL _sound_enter_enemy
554   0000              	GLOBAL _sound_coin
555   0000              	GLOBAL _sound_jump
556   0000              	GLOBAL _sound_slide
557   0000              	GLOBAL _player_player_hit_pow
558   0000              	GLOBAL _game_attribs
559   0000              	GLOBAL _game_boss_clear
560   0000              	GLOBAL _game_obj_clear
561   0000              	GLOBAL _game_obj_chk
562   0000              	GLOBAL _game_obj_set
563   0000              	GLOBAL _game_shoot_fire_boss
564   0000              	GLOBAL _game_shoot_fire
565   0000              	GLOBAL _game_add_enemy
566   0000              	GLOBAL _game_joystick_set_menu
567   0000              	GLOBAL _game_joystick_set
568   0000              	GLOBAL _game_joystick_change
569   0000              	GLOBAL _game_print_header
570   0000              	GLOBAL _game_end
571   0000              	GLOBAL _game_phase_print_score_back
572   0000              	GLOBAL _game_check_time
573   0000              	GLOBAL _game_rotate_attrib
574   0000              	GLOBAL _game_colour_message
575   0000              	GLOBAL _game_paint_attrib_lin_h
576   0000              	GLOBAL _game_paint_attrib_lin
577   0000              	GLOBAL _game_paint_attrib
578   0000              	GLOBAL _game_print_score
579   0000              	GLOBAL _game_unfreeze_all
580   0000              	GLOBAL _game_freeze_all
581   0000              	GLOBAL _game_freeze
582   0000              	GLOBAL _game_enemy_add_get_index
583   0000              	GLOBAL _game_check_cell
584   0000              	GLOBAL _game_check_map
585   0000              	GLOBAL _game_loop
586   0000              	GLOBAL _game_round_init
587   0000              	GLOBAL _game_start_timer
588   0000              	GLOBAL _game_tick
589   0000              	GLOBAL _game_update_stats
590   0000              	GLOBAL _game_print_footer
591   0000              	GLOBAL _game_fill_row
592   0000              	GLOBAL _game_fps
593   0000              	GLOBAL _game_respawn
594   0000              	GLOBAL _game_draw_screen
595   0000              	GLOBAL _boss_turn
596   0000              	GLOBAL _enemy_avoid_dead
597   0000              	GLOBAL _enemy_avoid_fall
598   0000              	GLOBAL _enemy_respawn
599   0000              	GLOBAL _enemy_init
600   0000              	GLOBAL _enemy_move
601   0000              	GLOBAL _enemy_turn
602   0000              	GLOBAL _enemy_hit
603   0000              	GLOBAL _enemy_coin1
604   0000              	GLOBAL _enemy_static
605   0000              	GLOBAL _enemy_walk
606   0000              	GLOBAL _enemy_horizontal
607   0000              	GLOBAL _enemy_vertical
608   0000              	GLOBAL _ay_fx_play
609   0000              	GLOBAL _ay_midi_play
610   0000              	GLOBAL _ay_is_playing
611   0000              	GLOBAL _ay_reset
612   0000              	GLOBAL _test_func
613   0000              	GLOBAL _test_proc
614   0000              	GLOBAL _in_mouse_kempston_wheel_delta
615   0000              	GLOBAL _in_mouse_kempston_wheel
616   0000              	GLOBAL _in_mouse_kempston_callee
617   0000              	GLOBAL _in_mouse_kempston
618   0000              	GLOBAL _in_mouse_kempston_setpos_callee
619   0000              	GLOBAL _in_mouse_kempston_setpos
620   0000              	GLOBAL _in_mouse_kempston_reset
621   0000              	GLOBAL _in_mouse_kempston_init
622   0000              	GLOBAL _in_mouse_amx_wheel_delta
623   0000              	GLOBAL _in_mouse_amx_wheel
624   0000              	GLOBAL _in_mouse_amx_callee
625   0000              	GLOBAL _in_mouse_amx
626   0000              	GLOBAL _in_mouse_amx_setpos_callee
627   0000              	GLOBAL _in_mouse_amx_setpos
628   0000              	GLOBAL _in_mouse_amx_reset
629   0000              	GLOBAL _in_mouse_amx_init_callee
630   0000              	GLOBAL _in_mouse_amx_init
631   0000              	GLOBAL _in_stick_sinclair2
632   0000              	GLOBAL _in_stick_sinclair1
633   0000              	GLOBAL _in_stick_kempston
634   0000              	GLOBAL _in_stick_fuller
635   0000              	GLOBAL _in_stick_cursor
636   0000              	GLOBAL _in_stick_keyboard_fastcall
637   0000              	GLOBAL _in_stick_keyboard
638   0000              	GLOBAL _in_wait_nokey
639   0000              	GLOBAL _in_wait_key
640   0000              	GLOBAL _in_test_key
641   0000              	GLOBAL _in_pause_fastcall
642   0000              	GLOBAL _in_pause
643   0000              	GLOBAL _in_key_scancode_fastcall
644   0000              	GLOBAL _in_key_scancode
645   0000              	GLOBAL _in_key_pressed_fastcall
646   0000              	GLOBAL _in_key_pressed
647   0000              	GLOBAL _in_inkey
648   0000              	GLOBAL _NIRVANAP_CHAR_TABLE
649   0000              	GLOBAL _NIRVANAP_WIDE_IMAGES
650   0000              	GLOBAL _NIRVANAP_TILE_IMAGES
651   0000              	GLOBAL _NIRVANAP_HOLE
652   0000              	GLOBAL _NIRVANAP_ISR_HOOK
653   0000              	GLOBAL _player_lvl_table
654   0000              	GLOBAL _map_paper_last
655   0000              	GLOBAL _map_paper_clr
656   0000              	GLOBAL _map_paper
657   0000              	GLOBAL _draw_count
658   0000              	GLOBAL _g_player_hit_right
659   0000              	GLOBAL _g_player_hit_left
660   0000              	GLOBAL _joynames
661   0000              	GLOBAL _initials
662   0000              	GLOBAL _bullet_count
663   0000              	GLOBAL _spr_hack
664   0000              	GLOBAL _boss_stat
665   0000              	GLOBAL _boss_time_fire
666   0000              	GLOBAL _boss_time
667   0000              	GLOBAL _boss_tile
668   0000              	GLOBAL _boss_inc
669   0000              	GLOBAL _boss_col
670   0000              	GLOBAL _boss_lin
671   0000              	GLOBAL _bullet_vel
672   0000              	GLOBAL _bullet_frames
673   0000              	GLOBAL _bullet_colint
674   0000              	GLOBAL _bullet_dir
675   0000              	GLOBAL _bullet_tile
676   0000              	GLOBAL _bullet_col
677   0000              	GLOBAL _bullet_lin
678   0000              	GLOBAL _bullet_col0
679   0000              	GLOBAL _bullet_lin0
680   0000              	GLOBAL _bullet_max
681   0000              	GLOBAL _bullet_class
682   0000              	GLOBAL _mush_class
683   0000              	GLOBAL _mush_index
684   0000              	GLOBAL _anim_count
685   0000              	GLOBAL _anim_respanwn
686   0000              	GLOBAL _anim_loop
687   0000              	GLOBAL _anim_end
688   0000              	GLOBAL _anim_int
689   0000              	GLOBAL _anim_tile
690   0000              	GLOBAL _anim_col
691   0000              	GLOBAL _anim_lin
692   0000              	GLOBAL _map_heigth
693   0000              	GLOBAL _map_width
694   0000              	GLOBAL _scr_curr
695   0000              	GLOBAL _scr_obj1
696   0000              	GLOBAL _scr_obj0
697   0000              	GLOBAL _scr_map
698   0000              	GLOBAL _sprite_speed_alt
699   0000              	GLOBAL _sprite_frames
700   0000              	GLOBAL _sprite_speed
701   0000              	GLOBAL _screen_ink
702   0000              	GLOBAL _screen_paper
703   0000              	GLOBAL _player_over_stair
704   0000              	GLOBAL _game_start_scr
705   0000              	GLOBAL _game_respawn_tile
706   0000              	GLOBAL _game_respawn_index
707   0000              	GLOBAL _game_respawn_time
708   0000              	GLOBAL _game_menu_sel
709   0000              	GLOBAL _game_score_top
710   0000              	GLOBAL _player_lives
711   0000              	GLOBAL _game_over
712   0000              	GLOBAL _game_sound
713   0000              	GLOBAL _game_inmune
714   0000              	GLOBAL _game_god_mode
715   0000              	GLOBAL _game_two_player
716   0000              	GLOBAL _game_brick_tile
717   0000              	GLOBAL _sprite_curr_index
718   0000              	GLOBAL _spr_count
719   0000              	GLOBAL _bullet_time
720   0000              	GLOBAL _anim_time
721   0000              	GLOBAL _frame_time
722   0000              	GLOBAL _entry_time
723   0000              	GLOBAL _curr_time
724   0000              	GLOBAL _s_state
725   0000              	GLOBAL _attrib_hl
726   0000              	GLOBAL _attrib
727   0000              	GLOBAL _zx_val_asm
728   0000              	GLOBAL _enemies
729   0000              	GLOBAL _tmp_ui
730   0000              	GLOBAL _tmp_sc
731   0000              	GLOBAL _tmp_uc
732   0000              	GLOBAL _tmp1
733   0000              	GLOBAL _tmp0
734   0000              	GLOBAL _tmp
735   0000              	GLOBAL _index1
736   0000              	GLOBAL _index0
737   0000              	GLOBAL _loop_count
738   0000              	GLOBAL _s_col1
739   0000              	GLOBAL _s_col0
740   0000              	GLOBAL _s_lin1
741   0000              	GLOBAL _s_lin0
742   0000              	GLOBAL _s_tile1
743   0000              	GLOBAL _s_tile0
744   0000              	GLOBAL _player_brick_time
745   0000              	GLOBAL _player_hit_count
746   0000              	GLOBAL _sprite_horizontal_check
747   0000              	GLOBAL _sprite_on_air
748   0000              	GLOBAL _sprite
749   0000              	GLOBAL _fps
750   0000              	GLOBAL _game_respawn_curr_time
751   0000              	GLOBAL _game_worldup
752   0000              	GLOBAL _game_mush_count
753   0000              	GLOBAL _game_boss_fix
754   0000              	GLOBAL _game_boss_hit
755   0000              	GLOBAL _game_boss_alive
756   0000              	GLOBAL _game_boss
757   0000              	GLOBAL _game_world
758   0000              	GLOBAL _game_gravity
759   0000              	GLOBAL _player_hit_time
760   0000              	GLOBAL _player_lin_scr
761   0000              	GLOBAL _player_col_scr
762   0000              	GLOBAL _player_lvl
763   0000              	GLOBAL _player_int
764   0000              	GLOBAL _player_str
765   0000              	GLOBAL _player_max_vita
766   0000              	GLOBAL _player_max_mana
767   0000              	GLOBAL _player_vita
768   0000              	GLOBAL _player_mana
769   0000              	GLOBAL _player_keys
770   0000              	GLOBAL _player_vel_inc
771   0000              	GLOBAL _player_vel_y1
772   0000              	GLOBAL _player_vel_y0
773   0000              	GLOBAL _player_vel_y
774   0000              	GLOBAL _player_vel_x
775   0000              	GLOBAL _player_joy
776   0000              	GLOBAL _player_score
777   0000              	GLOBAL _last_time
778   0000              	GLOBAL _player_slide
779   0000              	GLOBAL _spr_timer
780   0000              	GLOBAL _jump_lin
781   0000              	GLOBAL _player_hit_col
782   0000              	GLOBAL _player_hit_lin
783   0000              	GLOBAL _colint
784   0000              	GLOBAL _col
785   0000              	GLOBAL _lin
786   0000              	GLOBAL _tile
787   0000              	GLOBAL _state_a
788   0000              	GLOBAL _state
789   0000              	GLOBAL _class
790   0000              	GLOBAL _tbuffer
791   0000              	GLOBAL _dirs
792   0000              	GLOBAL _k1
793   0000              	GLOBAL _joyfunc1
794   0000              	GLOBAL _btiles
795   0000              	GLOBAL _spec128
796   0000              	GLOBAL _GLOBAL_ZX_PORT_7FFD
797   0000              	GLOBAL _GLOBAL_ZX_PORT_1FFD
798   0000              	GLOBAL _GLOBAL_ZX_PORT_FE
799   0000              	GLOBAL _ay_effect_20
800   0000              	GLOBAL _ay_effect_19
801   0000              	GLOBAL _ay_effect_18
802   0000              	GLOBAL _ay_effect_17
803   0000              	GLOBAL _ay_effect_16
804   0000              	GLOBAL _ay_effect_15
805   0000              	GLOBAL _ay_effect_14
806   0000              	GLOBAL _ay_effect_13
807   0000              	GLOBAL _ay_effect_12
808   0000              	GLOBAL _ay_effect_11
809   0000              	GLOBAL _ay_effect_10
810   0000              	GLOBAL _ay_effect_09
811   0000              	GLOBAL _ay_effect_08
812   0000              	GLOBAL _ay_effect_07
813   0000              	GLOBAL _ay_effect_06
814   0000              	GLOBAL _ay_effect_05
815   0000              	GLOBAL _ay_effect_04
816   0000              	GLOBAL _ay_effect_03
817   0000              	GLOBAL _ay_effect_02
818   0000              	GLOBAL _ay_effect_01
819   0000              	GLOBAL _pb_midi_phase_1
820   0000              	GLOBAL _pb_midi_title
821   0000              	GLOBAL _control_method
822   0000              	GLOBAL _world1_h
823   0000              	GLOBAL _world1_w
824   0000              	GLOBAL _world1
825   0000              	GLOBAL _paper1
826   0000              	GLOBAL _lenght1
827   0000              	GLOBAL _start_scr1
828   0000              	GLOBAL _world0_h
829   0000              	GLOBAL _world0_w
830   0000              	GLOBAL _world0
831   0000              	GLOBAL _paper0
832   0000              	GLOBAL _lenght0
833   0000              	GLOBAL _start_scr0
834   0000              ;--------------------------------------------------------
835   0000              ; special function registers
836   0000              ;--------------------------------------------------------
837   0000              defc _IO_FE	=	0x00fe
838   0000              defc _IO_1FFD	=	0x1ffd
839   0000              defc _IO_7FFD	=	0x7ffd
840   0000              ;--------------------------------------------------------
841   0000              ; ram data
842   0000              ;--------------------------------------------------------
843   0000              	SECTION bss_compiler
844   0000              ;--------------------------------------------------------
845   0000              ; ram data
846   0000              ;--------------------------------------------------------
847   0000              
848   0000              IF 0
849   0000              
850   0000              ; .area _INITIALIZED removed by z88dk
851   0000              
852   0000              
853   0000              ENDIF
854   0000              
855   0000              ;--------------------------------------------------------
856   0000              ; absolute external ram data
857   0000              ;--------------------------------------------------------
858   0000              	SECTION IGNORE
859   0000              ;--------------------------------------------------------
860   0000              ; global & static initialisations
861   0000              ;--------------------------------------------------------
862   0000              	SECTION code_crt_init
863   0000              ;--------------------------------------------------------
864   0000              ; Home
865   0000              ;--------------------------------------------------------
866   0000              	SECTION IGNORE
867   0000              ;--------------------------------------------------------
868   0000              ; code
869   0000              ;--------------------------------------------------------
870   0000              	SECTION code_compiler
871   0000              ;	---------------------------------
872   0000              ; Function player_init
873   0000              ; ---------------------------------
874   0000              _player_init:
875   0000  CD 00 00    	call	___sdcc_enter_ix
876   0003  F5          	push	af
877   0004  3E 00       	ld	a, +((_class) & 0xFF)
878   0006  DD 86 04    	add	a,(ix+4)
879   0009  4F          	ld	c, a
880   000A  3E 00       	ld	a, +((_class) / 256)
881   000C  CE 00       	adc	a,0x00
882   000E  47          	ld	b, a
883   000F  AF          	xor	a, a
884   0010  02          	ld	(bc), a
885   0011  3E 00       	ld	a, +((_tile) & 0xFF)
886   0013  DD 86 04    	add	a,(ix+4)
887   0016  4F          	ld	c, a
888   0017  3E 00       	ld	a, +((_tile) / 256)
889   0019  CE 00       	adc	a,0x00
890   001B  47          	ld	b, a
891   001C  DD 7E 07    	ld	a,(ix+7)
892   001F  02          	ld	(bc), a
893   0020  3E 00       	ld	a, +((_lin) & 0xFF)
894   0022  DD 86 04    	add	a,(ix+4)
895   0025  4F          	ld	c, a
896   0026  3E 00       	ld	a, +((_lin) / 256)
897   0028  CE 00       	adc	a,0x00
898   002A  47          	ld	b, a
899   002B  DD 7E 05    	ld	a,(ix+5)
900   002E  02          	ld	(bc), a
901   002F  3E 00       	ld	a, +((_col) & 0xFF)
902   0031  DD 86 04    	add	a,(ix+4)
903   0034  4F          	ld	c, a
904   0035  3E 00       	ld	a, +((_col) / 256)
905   0037  CE 00       	adc	a,0x00
906   0039  47          	ld	b, a
907   003A  DD 7E 06    	ld	a,(ix+6)
908   003D  02          	ld	(bc), a
909   003E  3E 00       	ld	a, +((_colint) & 0xFF)
910   0040  DD 86 04    	add	a,(ix+4)
911   0043  4F          	ld	c, a
912   0044  3E 00       	ld	a, +((_colint) / 256)
913   0046  CE 00       	adc	a,0x00
914   0048  47          	ld	b, a
915   0049  AF          	xor	a, a
916   004A  02          	ld	(bc), a
917   004B  3E 00       	ld	a, +((_state) & 0xFF)
918   004D  DD 86 04    	add	a,(ix+4)
919   0050  4F          	ld	c, a
920   0051  3E 00       	ld	a, +((_state) / 256)
921   0053  CE 00       	adc	a,0x00
922   0055  47          	ld	b, a
923   0056  AF          	xor	a, a
924   0057  02          	ld	(bc), a
925   0058  3E 00       	ld	a, +((_state_a) & 0xFF)
926   005A  DD 86 04    	add	a,(ix+4)
927   005D  4F          	ld	c, a
928   005E  3E 00       	ld	a, +((_state_a) / 256)
929   0060  CE 00       	adc	a,0x00
930   0062  47          	ld	b, a
931   0063  AF          	xor	a, a
932   0064  02          	ld	(bc), a
933   0065  3E 00       	ld	a, +((_jump_lin) & 0xFF)
934   0067  DD 86 04    	add	a,(ix+4)
935   006A  5F          	ld	e, a
936   006B  3E 00       	ld	a, +((_jump_lin) / 256)
937   006D  CE 00       	adc	a,0x00
938   006F  57          	ld	d, a
939   0070  DD 7E 05    	ld	a,(ix+5)
940   0073  12          	ld	(de), a
941   0074  DD 6E 04    	ld	l,(ix+4)
942   0077  26 00       	ld	h,0x00
943   0079  29          	add	hl,hl
944   007A  11 00 00    	ld	de,_last_time
945   007D  19          	add	hl, de
946   007E  E3          	ex	(sp), hl
947   007F  E1          	pop	hl
948   0080  ED 5B 00 00 	ld	de,(_curr_time)
949   0084  E5          	push	hl
950   0085  73          	ld	(hl), e
951   0086  23          	inc	hl
952   0087  72          	ld	(hl), d
953   0088  3E 00       	ld	a, +((_sprite_speed_alt) & 0xFF)
954   008A  DD 86 04    	add	a,(ix+4)
955   008D  5F          	ld	e, a
956   008E  3E 00       	ld	a, +((_sprite_speed_alt) / 256)
957   0090  CE 00       	adc	a,0x00
958   0092  57          	ld	d, a
959   0093  AF          	xor	a, a
960   0094  12          	ld	(de), a
961   0095  0A          	ld	a, (bc)
962   0096  F6 11       	or	a,+(0x01|0x10)
963   0098  02          	ld	(bc),a
964   0099  21 00 00    	ld	hl,_player_hit_col
965   009C  36 00       	ld	(hl),0x00
966   009E  21 00 00    	ld	hl,_player_hit_lin
967   00A1  36 00       	ld	(hl),0x00
968   00A3  21 00 00    	ld	hl,_player_slide
969   00A6  36 00       	ld	(hl),0x00
970   00A8  DD 66 06    	ld	h,(ix+6)
971   00AB  DD 6E 05    	ld	l,(ix+5)
972   00AE  E5          	push	hl
973   00AF  DD 66 07    	ld	h,(ix+7)
974   00B2  DD 6E 04    	ld	l,(ix+4)
975   00B5  E5          	push	hl
976   00B6  CD 00 00    	call	_NIRVANAP_spriteT_callee
977   00B9  F1          	pop	af
978   00BA  DD E1       	pop	ix
979   00BC  C9          	ret
980   00BD              	SECTION code_compiler
981   00BD              ;	---------------------------------
982   00BD              ; Function player_check_input
983   00BD              ; ---------------------------------
984   00BD              _player_check_input:
985   00BD  21 00 00    	ld	hl,_dirs
986   00C0  CB 56       	bit	2, (hl)
987   00C2  28 0C       	jr	Z,l_player_check_input_00102
988   00C4  21 00 00    	ld	hl,_dirs
989   00C7  CB 5E       	bit	3, (hl)
990   00C9  28 05       	jr	Z,l_player_check_input_00102
991   00CB  21 00 00    	ld	hl,_dirs
992   00CE  36 00       	ld	(hl),0x00
993   00D0              l_player_check_input_00102:
994   00D0  21 00 00    	ld	hl,_dirs
995   00D3  7E          	ld	a, (hl)
996   00D4  CB 07       	rlc	a
997   00D6  E6 01       	and	a,0x01
998   00D8  CB 47       	bit	0, a
999   00DA  20 1D       	jr	NZ,l_player_check_input_00107
1000  00DC  CB 56       	bit	2, (hl)
1001  00DE  20 19       	jr	NZ,l_player_check_input_00107
1002  00E0  21 00 00    	ld	hl,_dirs
1003  00E3  CB 5E       	bit	3, (hl)
1004  00E5  20 12       	jr	NZ,l_player_check_input_00107
1005  00E7  21 00 00    	ld	hl,_dirs
1006  00EA  CB 46       	bit	0, (hl)
1007  00EC  20 0B       	jr	NZ,l_player_check_input_00107
1008  00EE  21 00 00    	ld	hl,_dirs
1009  00F1  CB 4E       	bit	1, (hl)
1010  00F3  20 04       	jr	NZ,l_player_check_input_00107
1011  00F5  2E 00       	ld	l,0x00
1012  00F7  18 02       	jr	l_player_check_input_00108
1013  00F9              l_player_check_input_00107:
1014  00F9  2E 01       	ld	l,0x01
1015  00FB              l_player_check_input_00108:
1016  00FB  C9          	ret
1017  00FC              	SECTION code_compiler
1018  00FC              ;	---------------------------------
1019  00FC              ; Function player_collision
1020  00FC              ; ---------------------------------
1021  00FC              _player_collision:
1022  00FC  21 19 00    	ld	hl,0x0019
1023  00FF  E5          	push	hl
1024  0100  2A 00 00    	ld	hl,(_player_hit_time)
1025  0103  E5          	push	hl
1026  0104  CD 00 00    	call	_game_check_time
1027  0107  F1          	pop	af
1028  0108  F1          	pop	af
1029  0109  7D          	ld	a, l
1030  010A  B7          	or	a, a
1031  010B  CA 4E 02    	jp	Z, l_player_collision_00124
1032  010E  21 00 00    	ld	hl,_sprite
1033  0111  36 00       	ld	(hl),0x00
1034  0113  3A 07 00    	ld	a,(_col + 7)
1035  0116  32 00 00    	ld	(_s_col1),a
1036  0119  3A 07 00    	ld	a,(_lin + 7)
1037  011C  32 00 00    	ld	(_s_lin1),a
1038  011F  C6 08       	add	a,0x08
1039  0121  4F          	ld	c, a
1040  0122  3A 00 00    	ld	a, (_s_col1)
1041  0125  47          	ld	b,a
1042  0126  C5          	push	bc
1043  0127  CD 00 00    	call	_spr_calc_index
1044  012A  F1          	pop	af
1045  012B  7D          	ld	a,l
1046  012C  32 00 00    	ld	(_sprite_curr_index),a
1047  012F  4F          	ld	c,a
1048  0130  06 00       	ld	b,0x00
1049  0132  21 00 00    	ld	hl,_scr_map
1050  0135  09          	add	hl,bc
1051  0136  4E          	ld	c, (hl)
1052  0137  3E 2F       	ld	a,0x2f
1053  0139  91          	sub	a, c
1054  013A  30 0F       	jr	NC,l_player_collision_00120
1055  013C  79          	ld	a, c
1056  013D  D6 3C       	sub	a,0x3c
1057  013F  30 0A       	jr	NC,l_player_collision_00120
1058  0141  2E 06       	ld	l,0x06
1059  0143  CD 00 00    	call	_zx_border_fastcall
1060  0146  2E 32       	ld	l,0x32
1061  0148  CD 4D 12    	call	_player_hit
1062  014B              l_player_collision_00120:
1063  014B  21 00 00    	ld	hl,_sprite
1064  014E  7E          	ld	a, (hl)
1065  014F  D6 07       	sub	a,0x07
1066  0151  D2 4E 02    	jp	NC, l_player_collision_00124
1067  0154  3E 00       	ld	a, +((_class) & 0xFF)
1068  0156  86          	add	a, (hl)
1069  0157  4F          	ld	c, a
1070  0158  3E 00       	ld	a, +((_class) / 256)
1071  015A  CE 00       	adc	a,0x00
1072  015C  47          	ld	b, a
1073  015D  0A          	ld	a, (bc)
1074  015E  B7          	or	a, a
1075  015F  CA 47 02    	jp	Z, l_player_collision_00119
1076  0162  4E          	ld	c,(hl)
1077  0163  06 00       	ld	b,0x00
1078  0165  21 00 00    	ld	hl,_col
1079  0168  09          	add	hl,bc
1080  0169  4E          	ld	c, (hl)
1081  016A  06 00       	ld	b,0x00
1082  016C  3A 00 00    	ld	a,(_s_col1)
1083  016F  5F          	ld	e,a
1084  0170  16 00       	ld	d,0x00
1085  0172  79          	ld	a, c
1086  0173  93          	sub	a, e
1087  0174  6F          	ld	l, a
1088  0175  78          	ld	a, b
1089  0176  9A          	sbc	a, d
1090  0177  67          	ld	h, a
1091  0178  CD 00 00    	call	_abs_fastcall
1092  017B  7D          	ld	a,l
1093  017C  D6 02       	sub	a,0x02
1094  017E  7C          	ld	a,h
1095  017F  17          	rla
1096  0180  3F          	ccf
1097  0181  1F          	rra
1098  0182  DE 80       	sbc	a,0x80
1099  0184  D2 47 02    	jp	NC, l_player_collision_00119
1100  0187  2A 00 00    	ld	hl,(_sprite)
1101  018A  26 00       	ld	h,0x00
1102  018C  01 00 00    	ld	bc,_lin
1103  018F  09          	add	hl,bc
1104  0190  4E          	ld	c,(hl)
1105  0191  06 00       	ld	b,0x00
1106  0193  3A 00 00    	ld	a,(_s_lin1)
1107  0196  5F          	ld	e,a
1108  0197  16 00       	ld	d,0x00
1109  0199  79          	ld	a, c
1110  019A  93          	sub	a, e
1111  019B  6F          	ld	l, a
1112  019C  78          	ld	a, b
1113  019D  9A          	sbc	a, d
1114  019E  67          	ld	h, a
1115  019F  CD 00 00    	call	_abs_fastcall
1116  01A2  7D          	ld	a,l
1117  01A3  D6 0E       	sub	a,0x0e
1118  01A5  7C          	ld	a,h
1119  01A6  17          	rla
1120  01A7  3F          	ccf
1121  01A8  1F          	rra
1122  01A9  DE 80       	sbc	a,0x80
1123  01AB  D2 47 02    	jp	NC, l_player_collision_00119
1124  01AE  2A 00 00    	ld	hl,(_sprite)
1125  01B1  26 00       	ld	h,0x00
1126  01B3  01 00 00    	ld	bc,_class
1127  01B6  09          	add	hl,bc
1128  01B7  7E          	ld	a,(hl)
1129  01B8  FE 06       	cp	a,0x06
1130  01BA  20 2D       	jr	NZ,l_player_collision_00107
1131  01BC  21 00 00    	ld	hl,_player_vita
1132  01BF  7E          	ld	a, (hl)
1133  01C0  C6 19       	add	a,0x19
1134  01C2  77          	ld	(hl), a
1135  01C3  3A 00 00    	ld	a,(_player_max_vita)
1136  01C6  21 00 00    	ld	hl,_player_vita
1137  01C9  96          	sub	a, (hl)
1138  01CA  30 06       	jr	NC,l_player_collision_00105
1139  01CC  3A 00 00    	ld	a,(_player_max_vita)
1140  01CF  32 00 00    	ld	(_player_vita),a
1141  01D2              l_player_collision_00105:
1142  01D2  21 01 00    	ld	hl,0x0001
1143  01D5  CD 3C 0C    	call	_player_score_add
1144  01D8  CD 00 00    	call	_game_update_stats
1145  01DB  2A 00 00    	ld	hl,(_sprite)
1146  01DE  CD 00 00    	call	_spr_destroy
1147  01E1  21 00 00    	ld	hl,_game_mush_count
1148  01E4  35          	dec	(hl)
1149  01E5  2E 00       	ld	l,0x00
1150  01E7  18 67       	jr	l_player_collision_00125
1151  01E9              l_player_collision_00107:
1152  01E9  FE 07       	cp	a,0x07
1153  01EB  20 2D       	jr	NZ,l_player_collision_00111
1154  01ED  21 00 00    	ld	hl,_player_mana
1155  01F0  7E          	ld	a, (hl)
1156  01F1  C6 19       	add	a,0x19
1157  01F3  77          	ld	(hl), a
1158  01F4  3A 00 00    	ld	a,(_player_max_mana)
1159  01F7  21 00 00    	ld	hl,_player_mana
1160  01FA  96          	sub	a, (hl)
1161  01FB  30 06       	jr	NC,l_player_collision_00109
1162  01FD  3A 00 00    	ld	a,(_player_max_mana)
1163  0200  32 00 00    	ld	(_player_mana),a
1164  0203              l_player_collision_00109:
1165  0203  21 01 00    	ld	hl,0x0001
1166  0206  CD 3C 0C    	call	_player_score_add
1167  0209  CD 00 00    	call	_game_update_stats
1168  020C  2A 00 00    	ld	hl,(_sprite)
1169  020F  CD 00 00    	call	_spr_destroy
1170  0212  21 00 00    	ld	hl,_game_mush_count
1171  0215  35          	dec	(hl)
1172  0216  2E 00       	ld	l,0x00
1173  0218  18 36       	jr	l_player_collision_00125
1174  021A              l_player_collision_00111:
1175  021A  D6 08       	sub	a,0x08
1176  021C  20 1B       	jr	NZ,l_player_collision_00113
1177  021E  21 00 00    	ld	hl,_player_lives
1178  0221  34          	inc	(hl)
1179  0222  21 01 00    	ld	hl,0x0001
1180  0225  CD 3C 0C    	call	_player_score_add
1181  0228  CD 00 00    	call	_game_update_stats
1182  022B  2A 00 00    	ld	hl,(_sprite)
1183  022E  CD 00 00    	call	_spr_destroy
1184  0231  21 00 00    	ld	hl,_game_mush_count
1185  0234  35          	dec	(hl)
1186  0235  2E 00       	ld	l,0x00
1187  0237  18 17       	jr	l_player_collision_00125
1188  0239              l_player_collision_00113:
1189  0239  2E 02       	ld	l,0x02
1190  023B  CD 00 00    	call	_zx_border_fastcall
1191  023E  2E 14       	ld	l,0x14
1192  0240  CD 4D 12    	call	_player_hit
1193  0243  2E 01       	ld	l,0x01
1194  0245  18 09       	jr	l_player_collision_00125
1195  0247              l_player_collision_00119:
1196  0247  21 00 00    	ld	hl,_sprite
1197  024A  34          	inc	(hl)
1198  024B  C3 4B 01    	jp	l_player_collision_00120
1199  024E              l_player_collision_00124:
1200  024E  2E 00       	ld	l,0x00
1201  0250              l_player_collision_00125:
1202  0250  C9          	ret
1203  0251              	SECTION code_compiler
1204  0251              ;	---------------------------------
1205  0251              ; Function player_kill
1206  0251              ; ---------------------------------
1207  0251              _player_kill:
1208  0251  01 00 00    	ld	bc,_state+0
1209  0254  2A 00 00    	ld	hl,(_sprite)
1210  0257  26 00       	ld	h,0x00
1211  0259  09          	add	hl,bc
1212  025A  CB 6E       	bit	5,(hl)
1213  025C  C2 25 03    	jp	NZ,l_player_kill_00109
1214  025F  C5          	push	bc
1215  0260  CD 00 00    	call	_sound_hit_brick
1216  0263  C1          	pop	bc
1217  0264  79          	ld	a, c
1218  0265  21 00 00    	ld	hl,_sprite
1219  0268  86          	add	a, (hl)
1220  0269  5F          	ld	e, a
1221  026A  78          	ld	a, b
1222  026B  CE 00       	adc	a,0x00
1223  026D  57          	ld	d, a
1224  026E  1A          	ld	a, (de)
1225  026F  F6 20       	or	a,0x20
1226  0271  12          	ld	(de), a
1227  0272  3E 00       	ld	a, +((_sprite_speed_alt) & 0xFF)
1228  0274  86          	add	a, (hl)
1229  0275  5F          	ld	e, a
1230  0276  3E 00       	ld	a, +((_sprite_speed_alt) / 256)
1231  0278  CE 00       	adc	a,0x00
1232  027A  57          	ld	d, a
1233  027B  3E 03       	ld	a,0x03
1234  027D  12          	ld	(de), a
1235  027E  79          	ld	a, c
1236  027F  86          	add	a, (hl)
1237  0280  4F          	ld	c, a
1238  0281  78          	ld	a, b
1239  0282  CE 00       	adc	a,0x00
1240  0284  47          	ld	b, a
1241  0285  0A          	ld	a, (bc)
1242  0286  CB 57       	bit	2, a
1243  0288  28 0D       	jr	Z,l_player_kill_00102
1244  028A  2A 00 00    	ld	hl,(_sprite)
1245  028D  26 00       	ld	h,0x00
1246  028F  01 00 00    	ld	bc,_tile
1247  0292  09          	add	hl,bc
1248  0293  36 4C       	ld	(hl),0x4c
1249  0295  18 0B       	jr	l_player_kill_00103
1250  0297              l_player_kill_00102:
1251  0297  2A 00 00    	ld	hl,(_sprite)
1252  029A  26 00       	ld	h,0x00
1253  029C  01 00 00    	ld	bc,_tile
1254  029F  09          	add	hl,bc
1255  02A0  36 54       	ld	(hl),0x54
1256  02A2              l_player_kill_00103:
1257  02A2  CD 03 0C    	call	_player_hit_platform_clear
1258  02A5  2A 00 00    	ld	hl,(_sprite)
1259  02A8  26 00       	ld	h,0x00
1260  02AA  01 00 00    	ld	bc,_col
1261  02AD  09          	add	hl,bc
1262  02AE  4E          	ld	c, (hl)
1263  02AF  2A 00 00    	ld	hl,(_sprite)
1264  02B2  26 00       	ld	h,0x00
1265  02B4  11 00 00    	ld	de,_lin
1266  02B7  19          	add	hl,de
1267  02B8  46          	ld	b, (hl)
1268  02B9  2A 00 00    	ld	hl,(_sprite)
1269  02BC  26 00       	ld	h,0x00
1270  02BE  11 00 00    	ld	de,_tile
1271  02C1  19          	add	hl,de
1272  02C2  5E          	ld	e, (hl)
1273  02C3  79          	ld	a,c
1274  02C4  48          	ld	c,b
1275  02C5  47          	ld	b,a
1276  02C6  21 00 00    	ld	hl,_sprite
1277  02C9  C5          	push	bc
1278  02CA  7B          	ld	a, e
1279  02CB  F5          	push	af
1280  02CC  33          	inc	sp
1281  02CD  7E          	ld	a, (hl)
1282  02CE  F5          	push	af
1283  02CF  33          	inc	sp
1284  02D0  CD 00 00    	call	_NIRVANAP_spriteT_callee
1285  02D3  01 00 00    	ld	bc,_spr_timer+0
1286  02D6  2A 00 00    	ld	hl,(_sprite)
1287  02D9  26 00       	ld	h,0x00
1288  02DB  29          	add	hl, hl
1289  02DC  09          	add	hl,bc
1290  02DD  ED 5B 00 00 	ld	de,(_curr_time)
1291  02E1  73          	ld	(hl),e
1292  02E2  23          	inc	hl
1293  02E3  72          	ld	(hl),d
1294  02E4  3A 00 00    	ld	a,(_sprite)
1295  02E7  D6 07       	sub	a,0x07
1296  02E9  20 1E       	jr	NZ,l_player_kill_00105
1297  02EB  01 00 00    	ld	bc,_state_a+0
1298  02EE  79          	ld	a, c
1299  02EF  21 00 00    	ld	hl,_sprite
1300  02F2  86          	add	a, (hl)
1301  02F3  5F          	ld	e, a
1302  02F4  78          	ld	a, b
1303  02F5  CE 00       	adc	a,0x00
1304  02F7  57          	ld	d, a
1305  02F8  1A          	ld	a, (de)
1306  02F9  F6 08       	or	a,0x08
1307  02FB  12          	ld	(de), a
1308  02FC  79          	ld	a, c
1309  02FD  86          	add	a, (hl)
1310  02FE  4F          	ld	c, a
1311  02FF  78          	ld	a, b
1312  0300  CE 00       	adc	a,0x00
1313  0302  47          	ld	b, a
1314  0303  0A          	ld	a, (bc)
1315  0304  E6 EF       	and	a,0xef
1316  0306  02          	ld	(bc), a
1317  0307  18 1C       	jr	l_player_kill_00109
1318  0309              l_player_kill_00105:
1319  0309  01 00 00    	ld	bc,_state_a+0
1320  030C  79          	ld	a, c
1321  030D  21 00 00    	ld	hl,_sprite
1322  0310  86          	add	a, (hl)
1323  0311  5F          	ld	e, a
1324  0312  78          	ld	a, b
1325  0313  CE 00       	adc	a,0x00
1326  0315  57          	ld	d, a
1327  0316  1A          	ld	a, (de)
1328  0317  F6 10       	or	a,0x10
1329  0319  12          	ld	(de), a
1330  031A  79          	ld	a, c
1331  031B  86          	add	a, (hl)
1332  031C  4F          	ld	c, a
1333  031D  78          	ld	a, b
1334  031E  CE 00       	adc	a,0x00
1335  0320  47          	ld	b, a
1336  0321  0A          	ld	a, (bc)
1337  0322  E6 F7       	and	a,0xf7
1338  0324  02          	ld	(bc), a
1339  0325              l_player_kill_00109:
1340  0325  C9          	ret
1341  0326              	SECTION code_compiler
1342  0326              ;	---------------------------------
1343  0326              ; Function player_restart
1344  0326              ; ---------------------------------
1345  0326              _player_restart:
1346  0326  CD 00 00    	call	___sdcc_enter_ix
1347  0329  F5          	push	af
1348  032A  4D          	ld	c, l
1349  032B  21 00 00    	ld	hl,_ay_effect_15
1350  032E  CD 00 00    	call	_ay_fx_play
1351  0331  C5          	push	bc
1352  0332  21 0E 70    	ld	hl,0x700e
1353  0335  E5          	push	hl
1354  0336  21 07 00    	ld	hl,0x0007
1355  0339  E5          	push	hl
1356  033A  CD 00 00    	call	_player_init
1357  033D  F1          	pop	af
1358  033E  F1          	pop	af
1359  033F  C1          	pop	bc
1360  0340  11 00 00    	ld	de,_state+0
1361  0343  69          	ld	l,c
1362  0344  26 00       	ld	h,0x00
1363  0346  19          	add	hl, de
1364  0347  CB E6       	set	4, (hl)
1365  0349  11 00 00    	ld	de,_state_a+0
1366  034C  69          	ld	l,c
1367  034D  26 00       	ld	h,0x00
1368  034F  19          	add	hl, de
1369  0350  CB C6       	set	0, (hl)
1370  0352  11 00 00    	ld	de,_spr_timer+0
1371  0355  69          	ld	l, c
1372  0356  26 00       	ld	h,0x00
1373  0358  29          	add	hl, hl
1374  0359  19          	add	hl,de
1375  035A  E3          	ex	(sp), hl
1376  035B  E1          	pop	hl
1377  035C  ED 5B 00 00 	ld	de,(_curr_time)
1378  0360  E5          	push	hl
1379  0361  73          	ld	(hl), e
1380  0362  23          	inc	hl
1381  0363  72          	ld	(hl), d
1382  0364  11 00 00    	ld	de,_sprite_speed_alt+0
1383  0367  69          	ld	l,c
1384  0368  26 00       	ld	h,0x00
1385  036A  19          	add	hl, de
1386  036B  F1          	pop	af
1387  036C  36 08       	ld	(hl),0x08
1388  036E  DD E1       	pop	ix
1389  0370  C9          	ret
1390  0371              	SECTION code_compiler
1391  0371              ;	---------------------------------
1392  0371              ; Function player_turn
1393  0371              ; ---------------------------------
1394  0371              _player_turn:
1395  0371  21 00 00    	ld	hl,_sprite
1396  0374  CD 00 00    	call	_spr_chktime
1397  0377  7D          	ld	a, l
1398  0378  B7          	or	a, a
1399  0379  C8          	ret	Z
1400  037A  21 00 00    	ld	hl,_k1
1401  037D  E5          	push	hl
1402  037E  2A 00 00    	ld	hl,(_joyfunc1)
1403  0381  CD 00 00    	call	___sdcc_call_hl
1404  0384  F1          	pop	af
1405  0385  7D          	ld	a,l
1406  0386  32 00 00    	ld	(_dirs),a
1407  0389  CD 8F 03    	call	_player_move
1408  038C  C3 FC 00    	jp  _player_collision
1409  038F              	SECTION code_compiler
1410  038F              ;	---------------------------------
1411  038F              ; Function player_move
1412  038F              ; ---------------------------------
1413  038F              _player_move:
1414  038F  2A 00 00    	ld	hl,(_sprite)
1415  0392  26 00       	ld	h,0x00
1416  0394  01 00 00    	ld	bc,_lin
1417  0397  09          	add	hl,bc
1418  0398  7E          	ld	a,(hl)
1419  0399  32 00 00    	ld	(_s_lin0),a
1420  039C  2A 00 00    	ld	hl,(_sprite)
1421  039F  26 00       	ld	h,0x00
1422  03A1  01 00 00    	ld	bc,_col
1423  03A4  09          	add	hl,bc
1424  03A5  7E          	ld	a,(hl)
1425  03A6  32 00 00    	ld	(_s_col0),a
1426  03A9  2A 00 00    	ld	hl,(_sprite)
1427  03AC  26 00       	ld	h,0x00
1428  03AE  01 00 00    	ld	bc,_tile
1429  03B1  09          	add	hl,bc
1430  03B2  4E          	ld	c, (hl)
1431  03B3  3A 00 00    	ld	a,(_sprite)
1432  03B6  5F          	ld	e,a
1433  03B7  16 00       	ld	d,0x00
1434  03B9  21 00 00    	ld	hl,_colint
1435  03BC  19          	add	hl,de
1436  03BD  7E          	ld	a,(hl)
1437  03BE  81          	add	a,c
1438  03BF  32 00 00    	ld	(_s_tile0),a
1439  03C2  2A 00 00    	ld	hl,(_sprite)
1440  03C5  26 00       	ld	h,0x00
1441  03C7  01 00 00    	ld	bc,_state
1442  03CA  09          	add	hl,bc
1443  03CB  7E          	ld	a,(hl)
1444  03CC  CB 47       	bit	0,a
1445  03CE  32 00 00    	ld	(_s_state),a
1446  03D1  20 07       	jr	NZ,l_player_move_00113
1447  03D3  21 00 00    	ld	hl,_s_state
1448  03D6  CB 4E       	bit	1, (hl)
1449  03D8  28 46       	jr	Z,l_player_move_00114
1450  03DA              l_player_move_00113:
1451  03DA  CD 2D 07    	call	_player_fire
1452  03DD  3A 00 00    	ld	a,(_player_vel_y)
1453  03E0  21 00 00    	ld	hl,_player_vel_y1
1454  03E3  96          	sub	a, (hl)
1455  03E4  E2 E9 03    	jp	PO, l_player_move_00162
1456  03E7  EE 80       	xor	a,0x80
1457  03E9              l_player_move_00162:
1458  03E9  F2 0C 04    	jp	P, l_player_move_00106
1459  03EC  21 00 00    	ld	hl,_dirs
1460  03EF  CB 56       	bit	2, (hl)
1461  03F1  28 09       	jr	Z,l_player_move_00102
1462  03F3  21 00 00    	ld	hl,_s_state
1463  03F6  7E          	ld	a,(hl)
1464  03F7  F6 08       	or	a,0x08
1465  03F9  E6 FB       	and	a,0xfb
1466  03FB  77          	ld	(hl),a
1467  03FC              l_player_move_00102:
1468  03FC  21 00 00    	ld	hl,_dirs
1469  03FF  CB 4E       	bit	1, (hl)
1470  0401  28 09       	jr	Z,l_player_move_00106
1471  0403  21 00 00    	ld	hl,_s_state
1472  0406  7E          	ld	a,(hl)
1473  0407  F6 04       	or	a,0x04
1474  0409  E6 F7       	and	a,0xf7
1475  040B  77          	ld	(hl),a
1476  040C              l_player_move_00106:
1477  040C  CD EB 0D    	call	_player_move_jump
1478  040F  7D          	ld	a, l
1479  0410  B7          	or	a, a
1480  0411  28 2E       	jr	Z,l_player_move_00115
1481  0413  3A 00 00    	ld	a,(_player_over_stair)
1482  0416  B7          	or	a, a
1483  0417  20 28       	jr	NZ,l_player_move_00115
1484  0419  2E 60       	ld	l,0x60
1485  041B  CD 5A 05    	call	_player_tile
1486  041E  18 21       	jr	l_player_move_00115
1487  0420              l_player_move_00114:
1488  0420  CD B0 05    	call	_player_move_input
1489  0423  7D          	ld	a, l
1490  0424  B7          	or	a, a
1491  0425  20 17       	jr	NZ,l_player_move_00112
1492  0427  2A 00 00    	ld	hl,(_sprite)
1493  042A  26 00       	ld	h,0x00
1494  042C  01 00 00    	ld	bc,_colint
1495  042F  09          	add	hl,bc
1496  0430  AF          	xor	a,a
1497  0431  77          	ld	(hl),a
1498  0432  2E 70       	ld	l,0x70
1499  0434  CD 5A 05    	call	_player_tile
1500  0437  21 00 00    	ld	hl,_s_state
1501  043A  7E          	ld	a,(hl)
1502  043B  E6 F3       	and	a,+(0xf7&0xfb)
1503  043D  77          	ld	(hl),a
1504  043E              l_player_move_00112:
1505  043E  CD A0 0C    	call	_player_check_floor
1506  0441              l_player_move_00115:
1507  0441  CD 00 00    	call	_spr_redraw
1508  0444  7D          	ld	a, l
1509  0445  B7          	or	a, a
1510  0446  28 03       	jr	Z,l_player_move_00118
1511  0448  CD 76 07    	call	_player_check_map
1512  044B              l_player_move_00118:
1513  044B  3A 00 00    	ld	a,(_player_hit_lin)
1514  044E  B7          	or	a, a
1515  044F  28 03       	jr	Z,l_player_move_00120
1516  0451  CD 03 0C    	call	_player_hit_platform_clear
1517  0454              l_player_move_00120:
1518  0454  2A 00 00    	ld	hl,(_sprite)
1519  0457  26 00       	ld	h,0x00
1520  0459  01 00 00    	ld	bc,_state
1521  045C  09          	add	hl,bc
1522  045D  3A 00 00    	ld	a,(_s_state)
1523  0460  77          	ld	(hl),a
1524  0461  2E 00       	ld	l,0x00
1525  0463  C9          	ret
1526  0464              	SECTION code_compiler
1527  0464              ;	---------------------------------
1528  0464              ; Function player_check_stairs_down
1529  0464              ; ---------------------------------
1530  0464              _player_check_stairs_down:
1531  0464  CD 00 00    	call	___sdcc_enter_ix
1532  0467  3B          	dec	sp
1533  0468  2A 00 00    	ld	hl,(_sprite)
1534  046B  26 00       	ld	h,0x00
1535  046D  5D          	ld	e,l
1536  046E  01 00 00    	ld	bc,_col
1537  0471  09          	add	hl,bc
1538  0472  46          	ld	b,(hl)
1539  0473  16 00       	ld	d,0x00
1540  0475  21 00 00    	ld	hl,_lin
1541  0478  19          	add	hl,de
1542  0479  7E          	ld	a,(hl)
1543  047A  C6 10       	add	a,0x10
1544  047C  4F          	ld	c,a
1545  047D  C5          	push	bc
1546  047E  CD 00 00    	call	_spr_calc_index
1547  0481  F1          	pop	af
1548  0482  7D          	ld	a,l
1549  0483  32 00 00    	ld	(_sprite_curr_index),a
1550  0486  4F          	ld	c,a
1551  0487  06 00       	ld	b,0x00
1552  0489  21 00 00    	ld	hl,_scr_map
1553  048C  09          	add	hl,bc
1554  048D  7E          	ld	a,(hl)
1555  048E  4F          	ld	c,a
1556  048F  D6 44       	sub	a,0x44
1557  0491  38 05       	jr	C,l_player_check_stairs_down_00105
1558  0493  3E 47       	ld	a,0x47
1559  0495  91          	sub	a, c
1560  0496  30 04       	jr	NC,l_player_check_stairs_down_00106
1561  0498              l_player_check_stairs_down_00105:
1562  0498  3E 00       	ld	a,0x00
1563  049A  18 02       	jr	l_player_check_stairs_down_00107
1564  049C              l_player_check_stairs_down_00106:
1565  049C  3E 01       	ld	a,0x01
1566  049E              l_player_check_stairs_down_00107:
1567  049E  B7          	or	a, a
1568  049F  28 05       	jr	Z,l_player_check_stairs_down_00103
1569  04A1  21 00 00    	ld	hl,_player_over_stair
1570  04A4  36 01       	ld	(hl),0x01
1571  04A6              l_player_check_stairs_down_00103:
1572  04A6  33          	inc	sp
1573  04A7  DD E1       	pop	ix
1574  04A9  C9          	ret
1575  04AA              	SECTION code_compiler
1576  04AA              ;	---------------------------------
1577  04AA              ; Function player_check_stairs
1578  04AA              ; ---------------------------------
1579  04AA              _player_check_stairs:
1580  04AA  CD 00 00    	call	___sdcc_enter_ix
1581  04AD  F5          	push	af
1582  04AE  4D          	ld	c, l
1583  04AF  2A 00 00    	ld	hl,(_sprite)
1584  04B2  26 00       	ld	h,0x00
1585  04B4  11 00 00    	ld	de,_col
1586  04B7  19          	add	hl,de
1587  04B8  7E          	ld	a,(hl)
1588  04B9  81          	add	a,c
1589  04BA  5F          	ld	e,a
1590  04BB  3E 00       	ld	a,+((_lin) & 0xFF)
1591  04BD  21 00 00    	ld	hl,_sprite
1592  04C0  86          	add	a, (hl)
1593  04C1  6F          	ld	l, a
1594  04C2  3E 00       	ld	a, +((_lin) / 256)
1595  04C4  CE 00       	adc	a,0x00
1596  04C6  67          	ld	h, a
1597  04C7  46          	ld	b, (hl)
1598  04C8  C5          	push	bc
1599  04C9  7B          	ld	a, e
1600  04CA  48          	ld	c,b
1601  04CB  47          	ld	b,a
1602  04CC  C5          	push	bc
1603  04CD  CD 00 00    	call	_spr_calc_index
1604  04D0  F1          	pop	af
1605  04D1  C1          	pop	bc
1606  04D2  7D          	ld	a,l
1607  04D3  32 00 00    	ld	(_sprite_curr_index),a
1608  04D6  5F          	ld	e,a
1609  04D7  16 00       	ld	d,0x00
1610  04D9  21 00 00    	ld	hl,_scr_map
1611  04DC  19          	add	hl,de
1612  04DD  7E          	ld	a,(hl)
1613  04DE  47          	ld	b,a
1614  04DF  D6 44       	sub	a,0x44
1615  04E1  38 05       	jr	C,l_player_check_stairs_00111
1616  04E3  3E 47       	ld	a,0x47
1617  04E5  90          	sub	a, b
1618  04E6  30 04       	jr	NC,l_player_check_stairs_00112
1619  04E8              l_player_check_stairs_00111:
1620  04E8  1E 00       	ld	e,0x00
1621  04EA  18 02       	jr	l_player_check_stairs_00113
1622  04EC              l_player_check_stairs_00112:
1623  04EC  1E 01       	ld	e,0x01
1624  04EE              l_player_check_stairs_00113:
1625  04EE  DD 73 FE    	ld	(ix-2),e
1626  04F1  2A 00 00    	ld	hl,(_sprite)
1627  04F4  26 00       	ld	h,0x00
1628  04F6  11 00 00    	ld	de,_col
1629  04F9  19          	add	hl,de
1630  04FA  7E          	ld	a,(hl)
1631  04FB  81          	add	a,c
1632  04FC  4F          	ld	c,a
1633  04FD  3A 00 00    	ld	a,(_sprite)
1634  0500  5F          	ld	e,a
1635  0501  16 00       	ld	d,0x00
1636  0503  21 00 00    	ld	hl,_lin
1637  0506  19          	add	hl,de
1638  0507  7E          	ld	a,(hl)
1639  0508  C6 0F       	add	a,0x0f
1640  050A  47          	ld	b, a
1641  050B  79          	ld	a, c
1642  050C  48          	ld	c,b
1643  050D  47          	ld	b,a
1644  050E  C5          	push	bc
1645  050F  CD 00 00    	call	_spr_calc_index
1646  0512  F1          	pop	af
1647  0513  7D          	ld	a,l
1648  0514  32 00 00    	ld	(_sprite_curr_index),a
1649  0517  4F          	ld	c,a
1650  0518  06 00       	ld	b,0x00
1651  051A  21 00 00    	ld	hl,_scr_map
1652  051D  09          	add	hl,bc
1653  051E  7E          	ld	a,(hl)
1654  051F  4F          	ld	c,a
1655  0520  D6 44       	sub	a,0x44
1656  0522  38 05       	jr	C,l_player_check_stairs_00114
1657  0524  3E 47       	ld	a,0x47
1658  0526  91          	sub	a, c
1659  0527  30 04       	jr	NC,l_player_check_stairs_00115
1660  0529              l_player_check_stairs_00114:
1661  0529  0E 00       	ld	c,0x00
1662  052B  18 02       	jr	l_player_check_stairs_00116
1663  052D              l_player_check_stairs_00115:
1664  052D  0E 01       	ld	c,0x01
1665  052F              l_player_check_stairs_00116:
1666  052F  DD 7E FE    	ld	a,(ix-2)
1667  0532  B7          	or	a,a
1668  0533  20 03       	jr	NZ,l_player_check_stairs_00105
1669  0535  B1          	or	a,c
1670  0536  28 10       	jr	Z,l_player_check_stairs_00106
1671  0538              l_player_check_stairs_00105:
1672  0538  21 00 00    	ld	hl,_player_over_stair
1673  053B  7E          	ld	a, (hl)
1674  053C  B7          	or	a, a
1675  053D  20 17       	jr	NZ,l_player_check_stairs_00109
1676  053F  36 01       	ld	(hl),0x01
1677  0541  2E 72       	ld	l,0x72
1678  0543  CD 5A 05    	call	_player_tile
1679  0546  18 0E       	jr	l_player_check_stairs_00109
1680  0548              l_player_check_stairs_00106:
1681  0548  21 00 00    	ld	hl,_player_over_stair
1682  054B  7E          	ld	a, (hl)
1683  054C  B7          	or	a, a
1684  054D  28 07       	jr	Z,l_player_check_stairs_00109
1685  054F  36 00       	ld	(hl),0x00
1686  0551  2E 60       	ld	l,0x60
1687  0553  CD 5A 05    	call	_player_tile
1688  0556              l_player_check_stairs_00109:
1689  0556  F1          	pop	af
1690  0557  DD E1       	pop	ix
1691  0559  C9          	ret
1692  055A              	SECTION code_compiler
1693  055A              ;	---------------------------------
1694  055A              ; Function player_tile
1695  055A              ; ---------------------------------
1696  055A              _player_tile:
1697  055A  45          	ld	b, l
1698  055B  3A 00 00    	ld	a,(_player_over_stair)
1699  055E  B7          	or	a, a
1700  055F  28 0D       	jr	Z,l_player_tile_00105
1701  0561  2A 00 00    	ld	hl,(_sprite)
1702  0564  26 00       	ld	h,0x00
1703  0566  01 00 00    	ld	bc,_tile
1704  0569  09          	add	hl,bc
1705  056A  36 72       	ld	(hl),0x72
1706  056C  18 41       	jr	l_player_tile_00107
1707  056E              l_player_tile_00105:
1708  056E  78          	ld	a, b
1709  056F  D6 70       	sub	a,0x70
1710  0571  20 1F       	jr	NZ,l_player_tile_00102
1711  0573  2A 00 00    	ld	hl,(_sprite)
1712  0576  26 00       	ld	h,0x00
1713  0578  11 00 00    	ld	de,_tile
1714  057B  19          	add	hl,de
1715  057C  E5          	push	hl
1716  057D  3E 01       	ld	a,0x01
1717  057F  21 00 00    	ld	hl,_sprite
1718  0582  F5          	push	af
1719  0583  33          	inc	sp
1720  0584  7E          	ld	a, (hl)
1721  0585  48          	ld	c,b
1722  0586  47          	ld	b,a
1723  0587  C5          	push	bc
1724  0588  CD 00 00    	call	_spr_tile_dir
1725  058B  F1          	pop	af
1726  058C  33          	inc	sp
1727  058D  D1          	pop	de
1728  058E  7D          	ld	a,l
1729  058F  12          	ld	(de), a
1730  0590  18 1D       	jr	l_player_tile_00107
1731  0592              l_player_tile_00102:
1732  0592  2A 00 00    	ld	hl,(_sprite)
1733  0595  26 00       	ld	h,0x00
1734  0597  11 00 00    	ld	de,_tile
1735  059A  19          	add	hl,de
1736  059B  E5          	push	hl
1737  059C  3E 08       	ld	a,0x08
1738  059E  21 00 00    	ld	hl,_sprite
1739  05A1  F5          	push	af
1740  05A2  33          	inc	sp
1741  05A3  7E          	ld	a, (hl)
1742  05A4  48          	ld	c,b
1743  05A5  47          	ld	b,a
1744  05A6  C5          	push	bc
1745  05A7  CD 00 00    	call	_spr_tile_dir
1746  05AA  F1          	pop	af
1747  05AB  33          	inc	sp
1748  05AC  D1          	pop	de
1749  05AD  7D          	ld	a,l
1750  05AE  12          	ld	(de), a
1751  05AF              l_player_tile_00107:
1752  05AF  C9          	ret
1753  05B0              	SECTION code_compiler
1754  05B0              ;	---------------------------------
1755  05B0              ; Function player_move_input
1756  05B0              ; ---------------------------------
1757  05B0              _player_move_input:
1758  05B0  CD BD 00    	call	_player_check_input
1759  05B3  7D          	ld	a, l
1760  05B4  B7          	or	a, a
1761  05B5  CA 2A 07    	jp	Z, l_player_move_input_00137
1762  05B8  CD 2D 07    	call	_player_fire
1763  05BB  7D          	ld	a, l
1764  05BC  B7          	or	a, a
1765  05BD  28 0A       	jr	Z,l_player_move_input_00102
1766  05BF  21 00 00    	ld	hl,_dirs
1767  05C2  36 00       	ld	(hl),0x00
1768  05C4  2E 00       	ld	l,0x00
1769  05C6  C3 2C 07    	jp	l_player_move_input_00138
1770  05C9              l_player_move_input_00102:
1771  05C9  21 00 00    	ld	hl,_dirs
1772  05CC  CB 7E       	bit	7, (hl)
1773  05CE  28 6E       	jr	Z,l_player_move_input_00106
1774  05D0  21 00 00    	ld	hl,_dirs
1775  05D3  CB 46       	bit	0, (hl)
1776  05D5  28 67       	jr	Z,l_player_move_input_00106
1777  05D7  21 00 00    	ld	hl,_player_vel_inc
1778  05DA  36 01       	ld	(hl),0x01
1779  05DC  CD 00 00    	call	_ay_is_playing
1780  05DF  7D          	ld	a, l
1781  05E0  D6 03       	sub	a,0x03
1782  05E2  28 06       	jr	Z,l_player_move_input_00104
1783  05E4  21 00 00    	ld	hl,_ay_effect_03
1784  05E7  CD 00 00    	call	_ay_fx_play
1785  05EA              l_player_move_input_00104:
1786  05EA  21 00 00    	ld	hl,_player_over_stair
1787  05ED  36 00       	ld	(hl),0x00
1788  05EF  CD 00 00    	call	_sound_jump
1789  05F2  21 00 00    	ld	hl,_s_state
1790  05F5  7E          	ld	a,(hl)
1791  05F6  F6 01       	or	a,0x01
1792  05F8  E6 FD       	and	a,0xfd
1793  05FA  77          	ld	(hl),a
1794  05FB  2A 00 00    	ld	hl,(_sprite)
1795  05FE  26 00       	ld	h,0x00
1796  0600  01 00 00    	ld	bc,_jump_lin
1797  0603  09          	add	hl,bc
1798  0604  4D          	ld	c,l
1799  0605  44          	ld	b,h
1800  0606  2A 00 00    	ld	hl,(_sprite)
1801  0609  26 00       	ld	h,0x00
1802  060B  11 00 00    	ld	de,_lin
1803  060E  19          	add	hl,de
1804  060F  7E          	ld	a,(hl)
1805  0610  02          	ld	(bc),a
1806  0611  2A 00 00    	ld	hl,(_sprite)
1807  0614  26 00       	ld	h,0x00
1808  0616  01 00 00    	ld	bc,_state
1809  0619  09          	add	hl,bc
1810  061A  3A 00 00    	ld	a,(_s_state)
1811  061D  77          	ld	(hl),a
1812  061E  2E 64       	ld	l,0x64
1813  0620  CD 5A 05    	call	_player_tile
1814  0623  2A 00 00    	ld	hl,(_sprite)
1815  0626  26 00       	ld	h,0x00
1816  0628  01 00 00    	ld	bc,_sprite_speed_alt
1817  062B  09          	add	hl,bc
1818  062C  36 02       	ld	(hl),0x02
1819  062E  21 00 00    	ld	hl,_player_slide
1820  0631  36 00       	ld	(hl),0x00
1821  0633  3A 00 00    	ld	a,(_player_vel_y0)
1822  0636  32 00 00    	ld	(_player_vel_y),a
1823  0639  2E 01       	ld	l,0x01
1824  063B  C3 2C 07    	jp	l_player_move_input_00138
1825  063E              l_player_move_input_00106:
1826  063E  21 00 00    	ld	hl,_dirs
1827  0641  CB 5E       	bit	3, (hl)
1828  0643  28 33       	jr	Z,l_player_move_input_00111
1829  0645  21 00 00    	ld	hl,_s_state
1830  0648  7E          	ld	a,(hl)
1831  0649  F6 04       	or	a,0x04
1832  064B  E6 F7       	and	a,0xf7
1833  064D  77          	ld	(hl),a
1834  064E  01 00 00    	ld	bc,_state_a+0
1835  0651  79          	ld	a, c
1836  0652  21 00 00    	ld	hl,_sprite
1837  0655  86          	add	a, (hl)
1838  0656  5F          	ld	e, a
1839  0657  78          	ld	a, b
1840  0658  CE 00       	adc	a,0x00
1841  065A  57          	ld	d, a
1842  065B  1A          	ld	a, (de)
1843  065C  F6 10       	or	a,0x10
1844  065E  12          	ld	(de), a
1845  065F  79          	ld	a, c
1846  0660  86          	add	a, (hl)
1847  0661  4F          	ld	c, a
1848  0662  78          	ld	a, b
1849  0663  CE 00       	adc	a,0x00
1850  0665  47          	ld	b, a
1851  0666  0A          	ld	a, (bc)
1852  0667  E6 F7       	and	a,0xf7
1853  0669  02          	ld	(bc), a
1854  066A  3A 00 00    	ld	a,(_player_over_stair)
1855  066D  B7          	or	a, a
1856  066E  28 05       	jr	Z,l_player_move_input_00109
1857  0670  2E 00       	ld	l,0x00
1858  0672  CD AA 04    	call	_player_check_stairs
1859  0675              l_player_move_input_00109:
1860  0675  CD 00 00    	call	_spr_move_horizontal
1861  0678              l_player_move_input_00111:
1862  0678  21 00 00    	ld	hl,_dirs
1863  067B  CB 56       	bit	2, (hl)
1864  067D  28 33       	jr	Z,l_player_move_input_00115
1865  067F  21 00 00    	ld	hl,_s_state
1866  0682  7E          	ld	a,(hl)
1867  0683  F6 08       	or	a,0x08
1868  0685  E6 FB       	and	a,0xfb
1869  0687  77          	ld	(hl),a
1870  0688  01 00 00    	ld	bc,_state_a+0
1871  068B  79          	ld	a, c
1872  068C  21 00 00    	ld	hl,_sprite
1873  068F  86          	add	a, (hl)
1874  0690  5F          	ld	e, a
1875  0691  78          	ld	a, b
1876  0692  CE 00       	adc	a,0x00
1877  0694  57          	ld	d, a
1878  0695  1A          	ld	a, (de)
1879  0696  F6 08       	or	a,0x08
1880  0698  12          	ld	(de), a
1881  0699  79          	ld	a, c
1882  069A  86          	add	a, (hl)
1883  069B  4F          	ld	c, a
1884  069C  78          	ld	a, b
1885  069D  CE 00       	adc	a,0x00
1886  069F  47          	ld	b, a
1887  06A0  0A          	ld	a, (bc)
1888  06A1  E6 EF       	and	a,0xef
1889  06A3  02          	ld	(bc), a
1890  06A4  3A 00 00    	ld	a,(_player_over_stair)
1891  06A7  B7          	or	a, a
1892  06A8  28 05       	jr	Z,l_player_move_input_00113
1893  06AA  2E 00       	ld	l,0x00
1894  06AC  CD AA 04    	call	_player_check_stairs
1895  06AF              l_player_move_input_00113:
1896  06AF  CD 00 00    	call	_spr_move_horizontal
1897  06B2              l_player_move_input_00115:
1898  06B2  21 00 00    	ld	hl,_dirs
1899  06B5  CB 46       	bit	0, (hl)
1900  06B7  28 2B       	jr	Z,l_player_move_input_00125
1901  06B9  2E 00       	ld	l,0x00
1902  06BB  CD AA 04    	call	_player_check_stairs
1903  06BE  3A 00 00    	ld	a,(_player_over_stair)
1904  06C1  B7          	or	a, a
1905  06C2  28 0E       	jr	Z,l_player_move_input_00122
1906  06C4  CD 00 00    	call	_spr_move_up
1907  06C7  7D          	ld	a, l
1908  06C8  B7          	or	a, a
1909  06C9  28 19       	jr	Z,l_player_move_input_00125
1910  06CB  21 00 00    	ld	hl,_player_over_stair
1911  06CE  36 00       	ld	(hl),0x00
1912  06D0  18 12       	jr	l_player_move_input_00125
1913  06D2              l_player_move_input_00122:
1914  06D2  21 00 00    	ld	hl,_dirs
1915  06D5  CB 5E       	bit	3, (hl)
1916  06D7  20 0B       	jr	NZ,l_player_move_input_00125
1917  06D9  21 00 00    	ld	hl,_dirs
1918  06DC  CB 56       	bit	2, (hl)
1919  06DE  20 04       	jr	NZ,l_player_move_input_00125
1920  06E0  2E 00       	ld	l,0x00
1921  06E2  18 48       	jr	l_player_move_input_00138
1922  06E4              l_player_move_input_00125:
1923  06E4  21 00 00    	ld	hl,_dirs
1924  06E7  CB 4E       	bit	1, (hl)
1925  06E9  28 29       	jr	Z,l_player_move_input_00135
1926  06EB  CD 64 04    	call	_player_check_stairs_down
1927  06EE  3A 00 00    	ld	a,(_player_over_stair)
1928  06F1  B7          	or	a, a
1929  06F2  28 0E       	jr	Z,l_player_move_input_00132
1930  06F4  CD 00 00    	call	_spr_move_down
1931  06F7  7D          	ld	a, l
1932  06F8  B7          	or	a, a
1933  06F9  28 19       	jr	Z,l_player_move_input_00135
1934  06FB  21 00 00    	ld	hl,_player_over_stair
1935  06FE  36 00       	ld	(hl),0x00
1936  0700  18 12       	jr	l_player_move_input_00135
1937  0702              l_player_move_input_00132:
1938  0702  21 00 00    	ld	hl,_dirs
1939  0705  CB 5E       	bit	3, (hl)
1940  0707  20 0B       	jr	NZ,l_player_move_input_00135
1941  0709  21 00 00    	ld	hl,_dirs
1942  070C  CB 56       	bit	2, (hl)
1943  070E  20 04       	jr	NZ,l_player_move_input_00135
1944  0710  2E 00       	ld	l,0x00
1945  0712  18 18       	jr	l_player_move_input_00138
1946  0714              l_player_move_input_00135:
1947  0714  2A 00 00    	ld	hl,(_sprite)
1948  0717  26 00       	ld	h,0x00
1949  0719  01 00 00    	ld	bc,_state
1950  071C  09          	add	hl,bc
1951  071D  3A 00 00    	ld	a,(_s_state)
1952  0720  77          	ld	(hl),a
1953  0721  2E 60       	ld	l,0x60
1954  0723  CD 5A 05    	call	_player_tile
1955  0726  2E 01       	ld	l,0x01
1956  0728  18 02       	jr	l_player_move_input_00138
1957  072A              l_player_move_input_00137:
1958  072A  2E 00       	ld	l,0x00
1959  072C              l_player_move_input_00138:
1960  072C  C9          	ret
1961  072D              	SECTION code_compiler
1962  072D              ;	---------------------------------
1963  072D              ; Function player_fire
1964  072D              ; ---------------------------------
1965  072D              _player_fire:
1966  072D  21 00 00    	ld	hl,_dirs
1967  0730  CB 7E       	bit	7, (hl)
1968  0732  28 3F       	jr	Z,l_player_fire_00110
1969  0734  21 00 00    	ld	hl,_dirs
1970  0737  CB 46       	bit	0, (hl)
1971  0739  20 38       	jr	NZ,l_player_fire_00110
1972  073B  21 00 00    	ld	hl,_player_mana
1973  073E  7E          	ld	a, (hl)
1974  073F  B7          	or	a, a
1975  0740  28 2D       	jr	Z,l_player_fire_00107
1976  0742  3A 07 00    	ld	a,(_bullet_col + 0x0007)
1977  0745  3C          	inc	a
1978  0746  20 27       	jr	NZ,l_player_fire_00107
1979  0748  3E 05       	ld	a,0x05
1980  074A  96          	sub	a, (hl)
1981  074B  30 12       	jr	NC,l_player_fire_00104
1982  074D  CD 00 00    	call	_sound_hit_enemy
1983  0750  3A 00 00    	ld	a,(_game_god_mode)
1984  0753  B7          	or	a, a
1985  0754  20 0E       	jr	NZ,l_player_fire_00105
1986  0756  21 00 00    	ld	hl,_player_mana
1987  0759  7E          	ld	a, (hl)
1988  075A  C6 FB       	add	a,0xfb
1989  075C  77          	ld	(hl), a
1990  075D  18 05       	jr	l_player_fire_00105
1991  075F              l_player_fire_00104:
1992  075F  21 00 00    	ld	hl,_player_mana
1993  0762  36 00       	ld	(hl),0x00
1994  0764              l_player_fire_00105:
1995  0764  CD 00 00    	call	_game_update_stats
1996  0767  21 07 78    	ld	hl,0x7807
1997  076A  E5          	push	hl
1998  076B  CD 00 00    	call	_game_shoot_fire
1999  076E  F1          	pop	af
2000  076F              l_player_fire_00107:
2001  076F  2E 01       	ld	l,0x01
2002  0771  18 02       	jr	l_player_fire_00112
2003  0773              l_player_fire_00110:
2004  0773  2E 00       	ld	l,0x00
2005  0775              l_player_fire_00112:
2006  0775  C9          	ret
2007  0776              	SECTION code_compiler
2008  0776              ;	---------------------------------
2009  0776              ; Function player_check_map
2010  0776              ; ---------------------------------
2011  0776              _player_check_map:
2012  0776  2A 00 00    	ld	hl,(_sprite)
2013  0779  26 00       	ld	h,0x00
2014  077B  01 00 00    	ld	bc,_col
2015  077E  09          	add	hl,bc
2016  077F  4E          	ld	c, (hl)
2017  0780  3A 00 00    	ld	a,(_sprite)
2018  0783  5F          	ld	e,a
2019  0784  16 00       	ld	d,0x00
2020  0786  21 00 00    	ld	hl,_lin
2021  0789  19          	add	hl,de
2022  078A  5E          	ld	e, (hl)
2023  078B  51          	ld	d,c
2024  078C  D5          	push	de
2025  078D  CD 00 00    	call	_spr_calc_index
2026  0790  F1          	pop	af
2027  0791  7D          	ld	a,l
2028  0792  32 00 00    	ld	(_sprite_curr_index),a
2029  0795  2A 00 00    	ld	hl,(_sprite)
2030  0798  26 00       	ld	h,0x00
2031  079A  01 00 00    	ld	bc,_col
2032  079D  09          	add	hl,bc
2033  079E  4E          	ld	c, (hl)
2034  079F  3A 00 00    	ld	a,(_sprite)
2035  07A2  5F          	ld	e,a
2036  07A3  16 00       	ld	d,0x00
2037  07A5  21 00 00    	ld	hl,_lin
2038  07A8  19          	add	hl,de
2039  07A9  7E          	ld	a,(hl)
2040  07AA  E6 0F       	and	a,0x0f
2041  07AC  CB 41       	bit	0, c
2042  07AE  20 17       	jr	NZ,l_player_check_map_00108
2043  07B0  B7          	or	a, a
2044  07B1  20 05       	jr	NZ,l_player_check_map_00102
2045  07B3  CD F2 07    	call	_player_pick_item
2046  07B6  18 39       	jr	l_player_check_map_00110
2047  07B8              l_player_check_map_00102:
2048  07B8  CD F2 07    	call	_player_pick_item
2049  07BB  21 00 00    	ld	hl,_sprite_curr_index
2050  07BE  7E          	ld	a, (hl)
2051  07BF  C6 10       	add	a,0x10
2052  07C1  77          	ld	(hl), a
2053  07C2  CD F2 07    	call	_player_pick_item
2054  07C5  18 2A       	jr	l_player_check_map_00110
2055  07C7              l_player_check_map_00108:
2056  07C7  B7          	or	a, a
2057  07C8  20 0C       	jr	NZ,l_player_check_map_00105
2058  07CA  CD F2 07    	call	_player_pick_item
2059  07CD  21 00 00    	ld	hl,_sprite_curr_index
2060  07D0  34          	inc	(hl)
2061  07D1  CD F2 07    	call	_player_pick_item
2062  07D4  18 1B       	jr	l_player_check_map_00110
2063  07D6              l_player_check_map_00105:
2064  07D6  CD F2 07    	call	_player_pick_item
2065  07D9  21 00 00    	ld	hl,_sprite_curr_index
2066  07DC  34          	inc	(hl)
2067  07DD  CD F2 07    	call	_player_pick_item
2068  07E0  21 00 00    	ld	hl,_sprite_curr_index
2069  07E3  7E          	ld	a, (hl)
2070  07E4  C6 0F       	add	a,0x0f
2071  07E6  77          	ld	(hl), a
2072  07E7  CD F2 07    	call	_player_pick_item
2073  07EA  21 00 00    	ld	hl,_sprite_curr_index
2074  07ED  34          	inc	(hl)
2075  07EE  CD F2 07    	call	_player_pick_item
2076  07F1              l_player_check_map_00110:
2077  07F1  C9          	ret
2078  07F2              	SECTION code_compiler
2079  07F2              ;	---------------------------------
2080  07F2              ; Function player_pick_item
2081  07F2              ; ---------------------------------
2082  07F2              _player_pick_item:
2083  07F2  2A 00 00    	ld	hl,(_sprite_curr_index)
2084  07F5  26 00       	ld	h,0x00
2085  07F7  01 00 00    	ld	bc,_scr_map
2086  07FA  09          	add	hl,bc
2087  07FB  7E          	ld	a,(hl)
2088  07FC  4F          	ld	c,a
2089  07FD  D6 24       	sub	a,0x24
2090  07FF  DA 57 09    	jp	C,l_player_pick_item_00129
2091  0802  3E 2F       	ld	a,0x2f
2092  0804  91          	sub	a,c
2093  0805  DA 57 09    	jp	C,l_player_pick_item_00129
2094  0808  44          	ld	b,h
2095  0809  CD 00 00    	call	_ay_reset
2096  080C  21 00 00    	ld	hl,_ay_effect_10
2097  080F  CD 00 00    	call	_ay_fx_play
2098  0812  C5          	push	bc
2099  0813  CD 00 00    	call	_sound_coin
2100  0816  C1          	pop	bc
2101  0817  2A 00 00    	ld	hl,(_sprite_curr_index)
2102  081A  26 00       	ld	h,0x00
2103  081C  11 00 00    	ld	de,_scr_map
2104  081F  19          	add	hl,de
2105  0820  AF          	xor	a,a
2106  0821  77          	ld	(hl),a
2107  0822  3A 00 00    	ld	a,(_sprite_curr_index)
2108  0825  5F          	ld	e,a
2109  0826  16 00       	ld	d,0x00
2110  0828  C5          	push	bc
2111  0829  D5          	push	de
2112  082A  CD 00 00    	call	_game_obj_set
2113  082D  F1          	pop	af
2114  082E  C1          	pop	bc
2115  082F  3A 00 00    	ld	a,(_sprite_curr_index)
2116  0832  07          	rlca
2117  0833  07          	rlca
2118  0834  07          	rlca
2119  0835  07          	rlca
2120  0836  E6 0F       	and	a,0x0f
2121  0838  07          	rlca
2122  0839  07          	rlca
2123  083A  07          	rlca
2124  083B  07          	rlca
2125  083C  E6 F0       	and	a,0xf0
2126  083E  32 00 00    	ld	(_s_lin1),a
2127  0841  3A 00 00    	ld	a,(_sprite_curr_index)
2128  0844  E6 0F       	and	a,0x0f
2129  0846  87          	add	a, a
2130  0847  32 00 00    	ld	(_s_col1),a
2131  084A  C5          	push	bc
2132  084B  21 00 00    	ld	hl,0x0000
2133  084E  E5          	push	hl
2134  084F  21 84 03    	ld	hl,0x0384
2135  0852  E5          	push	hl
2136  0853  F5          	push	af
2137  0854  33          	inc	sp
2138  0855  3A 00 00    	ld	a,(_s_lin1)
2139  0858  F5          	push	af
2140  0859  33          	inc	sp
2141  085A  CD 00 00    	call	_spr_add_anim
2142  085D  F1          	pop	af
2143  085E  F1          	pop	af
2144  085F  F1          	pop	af
2145  0860  C1          	pop	bc
2146  0861  79          	ld	a, c
2147  0862  D6 24       	sub	a,0x24
2148  0864  DA 57 09    	jp	C, l_player_pick_item_00129
2149  0867  3E 2F       	ld	a,0x2f
2150  0869  91          	sub	a, c
2151  086A  DA 57 09    	jp	C, l_player_pick_item_00129
2152  086D  79          	ld	a, c
2153  086E  C6 DC       	add	a,0xdc
2154  0870  4F          	ld	c, a
2155  0871  06 00       	ld	b,0x00
2156  0873  21 7A 08    	ld	hl,l_player_pick_item_00171
2157  0876  09          	add	hl, bc
2158  0877  09          	add	hl, bc
2159  0878  09          	add	hl, bc
2160  0879  E9          	jp	(hl)
2161  087A              l_player_pick_item_00171:
2162  087A  C3 9E 08    	jp	l_player_pick_item_00101
2163  087D  C3 A9 08    	jp	l_player_pick_item_00102
2164  0880  C3 B4 08    	jp	l_player_pick_item_00103
2165  0883  C3 BF 08    	jp	l_player_pick_item_00104
2166  0886  C3 CA 08    	jp	l_player_pick_item_00105
2167  0889  C3 DC 08    	jp	l_player_pick_item_00107
2168  088C  C3 F1 08    	jp	l_player_pick_item_00110
2169  088F  C3 06 09    	jp	l_player_pick_item_00113
2170  0892  C3 1B 09    	jp	l_player_pick_item_00116
2171  0895  C3 30 09    	jp	l_player_pick_item_00119
2172  0898  C3 45 09    	jp	l_player_pick_item_00122
2173  089B  C3 D3 08    	jp	l_player_pick_item_00106
2174  089E              l_player_pick_item_00101:
2175  089E  21 00 00    	ld	hl,_player_keys
2176  08A1  36 01       	ld	(hl),0x01
2177  08A3  CD 00 00    	call	_game_update_stats
2178  08A6  C3 57 09    	jp	l_player_pick_item_00129
2179  08A9              l_player_pick_item_00102:
2180  08A9  21 01 00    	ld	hl, +(_player_keys + 0x0001)
2181  08AC  36 01       	ld	(hl),0x01
2182  08AE  CD 00 00    	call	_game_update_stats
2183  08B1  C3 57 09    	jp	l_player_pick_item_00129
2184  08B4              l_player_pick_item_00103:
2185  08B4  21 02 00    	ld	hl, +(_player_keys + 0x0002)
2186  08B7  36 01       	ld	(hl),0x01
2187  08B9  CD 00 00    	call	_game_update_stats
2188  08BC  C3 57 09    	jp	l_player_pick_item_00129
2189  08BF              l_player_pick_item_00104:
2190  08BF  21 03 00    	ld	hl, +(_player_keys + 0x0003)
2191  08C2  36 01       	ld	(hl),0x01
2192  08C4  CD 00 00    	call	_game_update_stats
2193  08C7  C3 57 09    	jp	l_player_pick_item_00129
2194  08CA              l_player_pick_item_00105:
2195  08CA  21 01 00    	ld	hl,0x0001
2196  08CD  CD 3C 0C    	call	_player_score_add
2197  08D0  C3 57 09    	jp	l_player_pick_item_00129
2198  08D3              l_player_pick_item_00106:
2199  08D3  21 0A 00    	ld	hl,0x000a
2200  08D6  CD 3C 0C    	call	_player_score_add
2201  08D9  C3 57 09    	jp	l_player_pick_item_00129
2202  08DC              l_player_pick_item_00107:
2203  08DC  21 00 00    	ld	hl,_player_str
2204  08DF  34          	inc	(hl)
2205  08E0  21 00 00    	ld	hl,_player_max_vita
2206  08E3  7E          	ld	a, (hl)
2207  08E4  D6 C8       	sub	a,0xc8
2208  08E6  30 6F       	jr	NC,l_player_pick_item_00129
2209  08E8  7E          	ld	a, (hl)
2210  08E9  C6 0A       	add	a,0x0a
2211  08EB  77          	ld	(hl), a
2212  08EC  CD 00 00    	call	_game_update_stats
2213  08EF  18 66       	jr	l_player_pick_item_00129
2214  08F1              l_player_pick_item_00110:
2215  08F1  21 00 00    	ld	hl,_player_str
2216  08F4  34          	inc	(hl)
2217  08F5  21 00 00    	ld	hl,_player_max_vita
2218  08F8  7E          	ld	a, (hl)
2219  08F9  D6 C8       	sub	a,0xc8
2220  08FB  30 5A       	jr	NC,l_player_pick_item_00129
2221  08FD  7E          	ld	a, (hl)
2222  08FE  C6 0A       	add	a,0x0a
2223  0900  77          	ld	(hl), a
2224  0901  CD 00 00    	call	_game_update_stats
2225  0904  18 51       	jr	l_player_pick_item_00129
2226  0906              l_player_pick_item_00113:
2227  0906  21 00 00    	ld	hl,_player_str
2228  0909  34          	inc	(hl)
2229  090A  21 00 00    	ld	hl,_player_max_vita
2230  090D  7E          	ld	a, (hl)
2231  090E  D6 C8       	sub	a,0xc8
2232  0910  30 45       	jr	NC,l_player_pick_item_00129
2233  0912  7E          	ld	a, (hl)
2234  0913  C6 0A       	add	a,0x0a
2235  0915  77          	ld	(hl), a
2236  0916  CD 00 00    	call	_game_update_stats
2237  0919  18 3C       	jr	l_player_pick_item_00129
2238  091B              l_player_pick_item_00116:
2239  091B  21 00 00    	ld	hl,_player_int
2240  091E  34          	inc	(hl)
2241  091F  21 00 00    	ld	hl,_player_max_mana
2242  0922  7E          	ld	a, (hl)
2243  0923  D6 C8       	sub	a,0xc8
2244  0925  30 30       	jr	NC,l_player_pick_item_00129
2245  0927  7E          	ld	a, (hl)
2246  0928  C6 0A       	add	a,0x0a
2247  092A  77          	ld	(hl), a
2248  092B  CD 00 00    	call	_game_update_stats
2249  092E  18 27       	jr	l_player_pick_item_00129
2250  0930              l_player_pick_item_00119:
2251  0930  21 00 00    	ld	hl,_player_int
2252  0933  34          	inc	(hl)
2253  0934  21 00 00    	ld	hl,_player_max_mana
2254  0937  7E          	ld	a, (hl)
2255  0938  D6 C8       	sub	a,0xc8
2256  093A  30 1B       	jr	NC,l_player_pick_item_00129
2257  093C  7E          	ld	a, (hl)
2258  093D  C6 0A       	add	a,0x0a
2259  093F  77          	ld	(hl), a
2260  0940  CD 00 00    	call	_game_update_stats
2261  0943  18 12       	jr	l_player_pick_item_00129
2262  0945              l_player_pick_item_00122:
2263  0945  21 00 00    	ld	hl,_player_int
2264  0948  34          	inc	(hl)
2265  0949  21 00 00    	ld	hl,_player_max_mana
2266  094C  7E          	ld	a, (hl)
2267  094D  D6 C8       	sub	a,0xc8
2268  094F  D0          	ret	NC
2269  0950  7E          	ld	a, (hl)
2270  0951  C6 0A       	add	a,0x0a
2271  0953  77          	ld	(hl), a
2272  0954  CD 00 00    	call	_game_update_stats
2273  0957              l_player_pick_item_00129:
2274  0957  C9          	ret
2275  0958              	SECTION code_compiler
2276  0958              ;	---------------------------------
2277  0958              ; Function player_hit_platform
2278  0958              ; ---------------------------------
2279  0958              _player_hit_platform:
2280  0958  CD 00 00    	call	___sdcc_enter_ix
2281  095B  F5          	push	af
2282  095C  3A 00 00    	ld	a,(_player_hit_lin)
2283  095F  B7          	or	a, a
2284  0960  C2 FD 0B    	jp	NZ, l_player_hit_platform_00144
2285  0963  2A 00 00    	ld	hl,(_sprite)
2286  0966  26 00       	ld	h,0x00
2287  0968  01 00 00    	ld	bc,_lin
2288  096B  09          	add	hl,bc
2289  096C  4E          	ld	c,(hl)
2290  096D  3E 10       	ld	a,0x10
2291  096F  91          	sub	a, c
2292  0970  D2 FD 0B    	jp	NC, l_player_hit_platform_00144
2293  0973  01 00 00    	ld	bc,_scr_map
2294  0976  2A 00 00    	ld	hl,(_index1)
2295  0979  09          	add	hl,bc
2296  097A  7E          	ld	a,(hl)
2297  097B  D6 45       	sub	a,0x45
2298  097D  DA FD 0B    	jp	C, l_player_hit_platform_00144
2299  0980  01 00 00    	ld	bc,_spr_timer+0
2300  0983  2A 00 00    	ld	hl,(_sprite)
2301  0986  26 00       	ld	h,0x00
2302  0988  29          	add	hl, hl
2303  0989  09          	add	hl,bc
2304  098A  ED 5B 00 00 	ld	de,(_curr_time)
2305  098E  73          	ld	(hl),e
2306  098F  23          	inc	hl
2307  0990  72          	ld	(hl),d
2308  0991  2A 00 00    	ld	hl,(_sprite)
2309  0994  26 00       	ld	h,0x00
2310  0996  01 00 00    	ld	bc,_lin
2311  0999  09          	add	hl,bc
2312  099A  4E          	ld	c,(hl)
2313  099B  06 00       	ld	b,0x00
2314  099D  21 F8 FF    	ld	hl,0xfff8
2315  09A0  09          	add	hl,bc
2316  09A1  EB          	ex	de,hl
2317  09A2  06 04       	ld	b,0x04
2318  09A4              l_player_hit_platform_00249:
2319  09A4  CB 2A       	sra	d
2320  09A6  CB 1B       	rr	e
2321  09A8  10 FA       	djnz	l_player_hit_platform_00249
2322  09AA  7B          	ld	a, e
2323  09AB  07          	rlca
2324  09AC  07          	rlca
2325  09AD  07          	rlca
2326  09AE  07          	rlca
2327  09AF  E6 F0       	and	a,0xf0
2328  09B1  C6 08       	add	a,0x08
2329  09B3  32 00 00    	ld	(_player_hit_lin),a
2330  09B6  2A 00 00    	ld	hl,(_sprite)
2331  09B9  26 00       	ld	h,0x00
2332  09BB  01 00 00    	ld	bc,_col
2333  09BE  09          	add	hl,bc
2334  09BF  4E          	ld	c,(hl)
2335  09C0  CB 41       	bit	0,c
2336  09C2  20 06       	jr	NZ,l_player_hit_platform_00111
2337  09C4  21 00 00    	ld	hl,_player_hit_col
2338  09C7  71          	ld	(hl), c
2339  09C8  18 33       	jr	l_player_hit_platform_00112
2340  09CA              l_player_hit_platform_00111:
2341  09CA  2A 00 00    	ld	hl,(_sprite)
2342  09CD  26 00       	ld	h,0x00
2343  09CF  11 00 00    	ld	de,_state
2344  09D2  19          	add	hl,de
2345  09D3  5E          	ld	e, (hl)
2346  09D4  41          	ld	b, c
2347  09D5  04          	inc	b
2348  09D6  0D          	dec	c
2349  09D7  CB 5B       	bit	3, e
2350  09D9  28 12       	jr	Z,l_player_hit_platform_00108
2351  09DB  3A 00 00    	ld	a,(_g_player_hit_right)
2352  09DE  B7          	or	a, a
2353  09DF  28 06       	jr	Z,l_player_hit_platform_00102
2354  09E1  21 00 00    	ld	hl,_player_hit_col
2355  09E4  70          	ld	(hl), b
2356  09E5  18 16       	jr	l_player_hit_platform_00112
2357  09E7              l_player_hit_platform_00102:
2358  09E7  21 00 00    	ld	hl,_player_hit_col
2359  09EA  71          	ld	(hl), c
2360  09EB  18 10       	jr	l_player_hit_platform_00112
2361  09ED              l_player_hit_platform_00108:
2362  09ED  3A 00 00    	ld	a,(_g_player_hit_left)
2363  09F0  B7          	or	a, a
2364  09F1  28 06       	jr	Z,l_player_hit_platform_00105
2365  09F3  21 00 00    	ld	hl,_player_hit_col
2366  09F6  71          	ld	(hl), c
2367  09F7  18 04       	jr	l_player_hit_platform_00112
2368  09F9              l_player_hit_platform_00105:
2369  09F9  21 00 00    	ld	hl,_player_hit_col
2370  09FC  70          	ld	(hl), b
2371  09FD              l_player_hit_platform_00112:
2372  09FD  01 00 00    	ld	bc,_scr_map
2373  0A00  2A 00 00    	ld	hl,(_index1)
2374  0A03  09          	add	hl,bc
2375  0A04  7E          	ld	a,(hl)
2376  0A05  FE 4D       	cp	a,0x4d
2377  0A07  20 3B       	jr	NZ,l_player_hit_platform_00114
2378  0A09  AF          	xor	a,a
2379  0A0A  77          	ld	(hl),a
2380  0A0B  2A 00 00    	ld	hl,(_index0)
2381  0A0E  E5          	push	hl
2382  0A0F  CD 00 00    	call	_game_obj_set
2383  0A12  F1          	pop	af
2384  0A13  21 00 00    	ld	hl,_index1
2385  0A16  7E          	ld	a, (hl)
2386  0A17  E6 0F       	and	a,0x0f
2387  0A19  87          	add	a, a
2388  0A1A  4F          	ld	c, a
2389  0A1B  23          	inc	hl
2390  0A1C  56          	ld	d,(hl)
2391  0A1D  2B          	dec	hl
2392  0A1E  7E          	ld	a, (hl)
2393  0A1F  06 04       	ld	b,0x04
2394  0A21              l_player_hit_platform_00255:
2395  0A21  CB 3A       	srl	d
2396  0A23  1F          	rra
2397  0A24  10 FB       	djnz	l_player_hit_platform_00255
2398  0A26  07          	rlca
2399  0A27  07          	rlca
2400  0A28  07          	rlca
2401  0A29  07          	rlca
2402  0A2A  E6 F0       	and	a,0xf0
2403  0A2C  47          	ld	b, a
2404  0A2D  21 00 00    	ld	hl,0x0000
2405  0A30  E5          	push	hl
2406  0A31  21 87 03    	ld	hl,0x0387
2407  0A34  E5          	push	hl
2408  0A35  79          	ld	a, c
2409  0A36  48          	ld	c,b
2410  0A37  47          	ld	b,a
2411  0A38  C5          	push	bc
2412  0A39  CD 00 00    	call	_spr_add_anim
2413  0A3C  F1          	pop	af
2414  0A3D  F1          	pop	af
2415  0A3E  F1          	pop	af
2416  0A3F  2E 01       	ld	l,0x01
2417  0A41  C3 FF 0B    	jp	l_player_hit_platform_00147
2418  0A44              l_player_hit_platform_00114:
2419  0A44  FE 5C       	cp	a,0x5c
2420  0A46  28 05       	jr	Z,l_player_hit_platform_00140
2421  0A48  D6 5D       	sub	a,0x5d
2422  0A4A  C2 F1 0B    	jp	NZ,l_player_hit_platform_00141
2423  0A4D              l_player_hit_platform_00140:
2424  0A4D  21 00 00    	ld	hl,_tmp0
2425  0A50  36 00       	ld	(hl),0x00
2426  0A52  3A 00 00    	ld	a,(_game_boss)
2427  0A55  B7          	or	a, a
2428  0A56  28 0B       	jr	Z,l_player_hit_platform_00173
2429  0A58  3A 00 00    	ld	a,(_game_mush_count)
2430  0A5B  B7          	or	a, a
2431  0A5C  28 05       	jr	Z,l_player_hit_platform_00173
2432  0A5E  2E 00       	ld	l,0x00
2433  0A60  C3 FF 0B    	jp	l_player_hit_platform_00147
2434  0A63              l_player_hit_platform_00173:
2435  0A63              l_player_hit_platform_00137:
2436  0A63  21 00 00    	ld	hl,_tmp0
2437  0A66  7E          	ld	a, (hl)
2438  0A67  D6 07       	sub	a,0x07
2439  0A69  D2 F1 0B    	jp	NC, l_player_hit_platform_00141
2440  0A6C  4E          	ld	c,(hl)
2441  0A6D  06 00       	ld	b,0x00
2442  0A6F  21 00 00    	ld	hl,_mush_index
2443  0A72  09          	add	hl,bc
2444  0A73  4E          	ld	c, (hl)
2445  0A74  06 00       	ld	b,0x00
2446  0A76  2A 00 00    	ld	hl,(_index1)
2447  0A79  AF          	xor	a,a
2448  0A7A  ED 42       	sbc	hl,bc
2449  0A7C  C2 EA 0B    	jp	NZ,l_player_hit_platform_00136
2450  0A7F  2A 00 00    	ld	hl,(_sprite)
2451  0A82  26 00       	ld	h,0x00
2452  0A84  01 00 00    	ld	bc,_lin
2453  0A87  09          	add	hl,bc
2454  0A88  7E          	ld	a,(hl)
2455  0A89  07          	rlca
2456  0A8A  07          	rlca
2457  0A8B  07          	rlca
2458  0A8C  07          	rlca
2459  0A8D  E6 0F       	and	a,0x0f
2460  0A8F  07          	rlca
2461  0A90  07          	rlca
2462  0A91  07          	rlca
2463  0A92  07          	rlca
2464  0A93  E6 F0       	and	a,0xf0
2465  0A95  C6 E0       	add	a,0xe0
2466  0A97  32 00 00    	ld	(_s_lin1),a
2467  0A9A  2A 00 00    	ld	hl,(_sprite)
2468  0A9D  26 00       	ld	h,0x00
2469  0A9F  01 00 00    	ld	bc,_col
2470  0AA2  09          	add	hl,bc
2471  0AA3  7E          	ld	a,(hl)
2472  0AA4  CB 3F       	srl	a
2473  0AA6  87          	add	a, a
2474  0AA7  32 00 00    	ld	(_s_col1),a
2475  0AAA  21 00 00    	ld	hl,_tmp
2476  0AAD  36 00       	ld	(hl),0x00
2477  0AAF              l_player_hit_platform_00120:
2478  0AAF  21 00 00    	ld	hl,_tmp
2479  0AB2  7E          	ld	a, (hl)
2480  0AB3  D6 07       	sub	a,0x07
2481  0AB5  30 1C       	jr	NC,l_player_hit_platform_00122
2482  0AB7  4E          	ld	c,(hl)
2483  0AB8  06 00       	ld	b,0x00
2484  0ABA  21 00 00    	ld	hl,_mush_index
2485  0ABD  09          	add	hl,bc
2486  0ABE  4E          	ld	c, (hl)
2487  0ABF  06 00       	ld	b,0x00
2488  0AC1  21 00 00    	ld	hl,_index1
2489  0AC4  7E          	ld	a, (hl)
2490  0AC5  91          	sub	a, c
2491  0AC6  20 05       	jr	NZ,l_player_hit_platform_00261
2492  0AC8  23          	inc	hl
2493  0AC9  7E          	ld	a, (hl)
2494  0ACA  90          	sub	a, b
2495  0ACB  28 06       	jr	Z,l_player_hit_platform_00122
2496  0ACD              l_player_hit_platform_00261:
2497  0ACD  21 00 00    	ld	hl,_tmp
2498  0AD0  34          	inc	(hl)
2499  0AD1  18 DC       	jr	l_player_hit_platform_00120
2500  0AD3              l_player_hit_platform_00122:
2501  0AD3  2A 00 00    	ld	hl,(_tmp)
2502  0AD6  26 00       	ld	h,0x00
2503  0AD8  01 00 00    	ld	bc,_mush_class
2504  0ADB  09          	add	hl,bc
2505  0ADC  7E          	ld	a,(hl)
2506  0ADD  FE 78       	cp	a,0x78
2507  0ADF  28 18       	jr	Z,l_player_hit_platform_00123
2508  0AE1  FE 79       	cp	a,0x79
2509  0AE3  28 2F       	jr	Z,l_player_hit_platform_00124
2510  0AE5  FE 7A       	cp	a,0x7a
2511  0AE7  28 5F       	jr	Z,l_player_hit_platform_00126
2512  0AE9  FE 7B       	cp	a,0x7b
2513  0AEB  28 41       	jr	Z,l_player_hit_platform_00125
2514  0AED  FE 7C       	cp	a,0x7c
2515  0AEF  CA 7C 0B    	jp	Z,l_player_hit_platform_00128
2516  0AF2  D6 7D       	sub	a,0x7d
2517  0AF4  28 6C       	jr	Z,l_player_hit_platform_00127
2518  0AF6  C3 94 0B    	jp	l_player_hit_platform_00129
2519  0AF9              l_player_hit_platform_00123:
2520  0AF9  2E 02       	ld	l,0x02
2521  0AFB  CD 00 00    	call	_zx_border_fastcall
2522  0AFE  3A 00 00    	ld	a,(_s_col1)
2523  0B01  21 06 FF    	ld	hl,0xff06
2524  0B04  E5          	push	hl
2525  0B05  F5          	push	af
2526  0B06  33          	inc	sp
2527  0B07  3A 00 00    	ld	a,(_s_lin1)
2528  0B0A  F5          	push	af
2529  0B0B  33          	inc	sp
2530  0B0C  CD 00 00    	call	_enemy_init
2531  0B0F  F1          	pop	af
2532  0B10  F1          	pop	af
2533  0B11  C3 94 0B    	jp	l_player_hit_platform_00129
2534  0B14              l_player_hit_platform_00124:
2535  0B14  2E 02       	ld	l,0x02
2536  0B16  CD 00 00    	call	_zx_border_fastcall
2537  0B19  3A 00 00    	ld	a,(_s_col1)
2538  0B1C  21 06 01    	ld	hl,0x0106
2539  0B1F  E5          	push	hl
2540  0B20  F5          	push	af
2541  0B21  33          	inc	sp
2542  0B22  3A 00 00    	ld	a,(_s_lin1)
2543  0B25  F5          	push	af
2544  0B26  33          	inc	sp
2545  0B27  CD 00 00    	call	_enemy_init
2546  0B2A  F1          	pop	af
2547  0B2B  F1          	pop	af
2548  0B2C  18 66       	jr	l_player_hit_platform_00129
2549  0B2E              l_player_hit_platform_00125:
2550  0B2E  2E 01       	ld	l,0x01
2551  0B30  CD 00 00    	call	_zx_border_fastcall
2552  0B33  3A 00 00    	ld	a,(_s_col1)
2553  0B36  21 07 01    	ld	hl,0x0107
2554  0B39  E5          	push	hl
2555  0B3A  F5          	push	af
2556  0B3B  33          	inc	sp
2557  0B3C  3A 00 00    	ld	a,(_s_lin1)
2558  0B3F  F5          	push	af
2559  0B40  33          	inc	sp
2560  0B41  CD 00 00    	call	_enemy_init
2561  0B44  F1          	pop	af
2562  0B45  F1          	pop	af
2563  0B46  18 4C       	jr	l_player_hit_platform_00129
2564  0B48              l_player_hit_platform_00126:
2565  0B48  2E 01       	ld	l,0x01
2566  0B4A  CD 00 00    	call	_zx_border_fastcall
2567  0B4D  3A 00 00    	ld	a,(_s_col1)
2568  0B50  21 07 FF    	ld	hl,0xff07
2569  0B53  E5          	push	hl
2570  0B54  F5          	push	af
2571  0B55  33          	inc	sp
2572  0B56  3A 00 00    	ld	a,(_s_lin1)
2573  0B59  F5          	push	af
2574  0B5A  33          	inc	sp
2575  0B5B  CD 00 00    	call	_enemy_init
2576  0B5E  F1          	pop	af
2577  0B5F  F1          	pop	af
2578  0B60  18 32       	jr	l_player_hit_platform_00129
2579  0B62              l_player_hit_platform_00127:
2580  0B62  2E 04       	ld	l,0x04
2581  0B64  CD 00 00    	call	_zx_border_fastcall
2582  0B67  3A 00 00    	ld	a,(_s_col1)
2583  0B6A  21 08 01    	ld	hl,0x0108
2584  0B6D  E5          	push	hl
2585  0B6E  F5          	push	af
2586  0B6F  33          	inc	sp
2587  0B70  3A 00 00    	ld	a,(_s_lin1)
2588  0B73  F5          	push	af
2589  0B74  33          	inc	sp
2590  0B75  CD 00 00    	call	_enemy_init
2591  0B78  F1          	pop	af
2592  0B79  F1          	pop	af
2593  0B7A  18 18       	jr	l_player_hit_platform_00129
2594  0B7C              l_player_hit_platform_00128:
2595  0B7C  2E 04       	ld	l,0x04
2596  0B7E  CD 00 00    	call	_zx_border_fastcall
2597  0B81  3A 00 00    	ld	a,(_s_col1)
2598  0B84  21 08 FF    	ld	hl,0xff08
2599  0B87  E5          	push	hl
2600  0B88  F5          	push	af
2601  0B89  33          	inc	sp
2602  0B8A  3A 00 00    	ld	a,(_s_lin1)
2603  0B8D  F5          	push	af
2604  0B8E  33          	inc	sp
2605  0B8F  CD 00 00    	call	_enemy_init
2606  0B92  F1          	pop	af
2607  0B93  F1          	pop	af
2608  0B94              l_player_hit_platform_00129:
2609  0B94  21 00 00    	ld	hl,_game_mush_count
2610  0B97  34          	inc	(hl)
2611  0B98  3A 00 00    	ld	a,(_game_boss)
2612  0B9B  B7          	or	a, a
2613  0B9C  20 4C       	jr	NZ,l_player_hit_platform_00136
2614  0B9E  2A 00 00    	ld	hl,(_index1)
2615  0BA1  01 F0 FF    	ld	bc,0xfff0
2616  0BA4  09          	add	hl,bc
2617  0BA5  01 00 00    	ld	bc,_scr_map
2618  0BA8  09          	add	hl,bc
2619  0BA9  36 00       	ld	(hl),0x00
2620  0BAB  3E 00       	ld	a, +((_scr_map) & 0xFF)
2621  0BAD  21 00 00    	ld	hl,_index1
2622  0BB0  86          	add	a, (hl)
2623  0BB1  DD 77 FE    	ld	(ix-2),a
2624  0BB4  3E 00       	ld	a, +((_scr_map) / 256)
2625  0BB6  23          	inc	hl
2626  0BB7  8E          	adc	a, (hl)
2627  0BB8  DD 77 FF    	ld	(ix-1),a
2628  0BBB  E1          	pop	hl
2629  0BBC  7E          	ld	a,(hl)
2630  0BBD  E5          	push	hl
2631  0BBE  D6 5C       	sub	a,0x5c
2632  0BC0  20 06       	jr	NZ,l_player_hit_platform_00131
2633  0BC2  E1          	pop	hl
2634  0BC3  E5          	push	hl
2635  0BC4  36 4F       	ld	(hl),0x4f
2636  0BC6  18 04       	jr	l_player_hit_platform_00132
2637  0BC8              l_player_hit_platform_00131:
2638  0BC8  E1          	pop	hl
2639  0BC9  E5          	push	hl
2640  0BCA  36 54       	ld	(hl),0x54
2641  0BCC              l_player_hit_platform_00132:
2642  0BCC  2A 00 00    	ld	hl,(_index1)
2643  0BCF  01 F0 FF    	ld	bc,0xfff0
2644  0BD2  09          	add	hl,bc
2645  0BD3  E5          	push	hl
2646  0BD4  CD 00 00    	call	_game_obj_set
2647  0BD7  F1          	pop	af
2648  0BD8  3A 00 00    	ld	a,(_s_lin1)
2649  0BDB  C6 10       	add	a,0x10
2650  0BDD  4F          	ld	c, a
2651  0BDE  3A 00 00    	ld	a, (_s_col1)
2652  0BE1  47          	ld	b,a
2653  0BE2  C5          	push	bc
2654  0BE3  3E 4F       	ld	a,0x4f
2655  0BE5  F5          	push	af
2656  0BE6  33          	inc	sp
2657  0BE7  CD 00 00    	call	_NIRVANAP_drawT_callee
2658  0BEA              l_player_hit_platform_00136:
2659  0BEA  21 00 00    	ld	hl,_tmp0
2660  0BED  34          	inc	(hl)
2661  0BEE  C3 63 0A    	jp	l_player_hit_platform_00137
2662  0BF1              l_player_hit_platform_00141:
2663  0BF1  2E 01       	ld	l,0x01
2664  0BF3  CD 00 00    	call	_spr_brick_anim
2665  0BF6  CD 00 00    	call	_sound_hit_brick
2666  0BF9  2E 01       	ld	l,0x01
2667  0BFB  18 02       	jr	l_player_hit_platform_00147
2668  0BFD              l_player_hit_platform_00144:
2669  0BFD  2E 00       	ld	l,0x00
2670  0BFF              l_player_hit_platform_00147:
2671  0BFF  F1          	pop	af
2672  0C00  DD E1       	pop	ix
2673  0C02  C9          	ret
2674  0C03              	SECTION code_compiler
2675  0C03              ;	---------------------------------
2676  0C03              ; Function player_hit_platform_clear
2677  0C03              ; ---------------------------------
2678  0C03              _player_hit_platform_clear:
2679  0C03  2A 00 00    	ld	hl,(_sprite)
2680  0C06  26 00       	ld	h,0x00
2681  0C08  29          	add	hl, hl
2682  0C09  11 00 00    	ld	de,_spr_timer
2683  0C0C  19          	add	hl, de
2684  0C0D  4E          	ld	c, (hl)
2685  0C0E  23          	inc	hl
2686  0C0F  46          	ld	b, (hl)
2687  0C10  21 04 00    	ld	hl,0x0004
2688  0C13  E5          	push	hl
2689  0C14  C5          	push	bc
2690  0C15  CD 00 00    	call	_game_check_time
2691  0C18  F1          	pop	af
2692  0C19  F1          	pop	af
2693  0C1A  7D          	ld	a, l
2694  0C1B  B7          	or	a, a
2695  0C1C  C8          	ret	Z
2696  0C1D  2A FF FF    	ld	hl,(_player_hit_col - 1)
2697  0C20  3A 00 00    	ld	a,(_player_hit_lin)
2698  0C23  6F          	ld	l,a
2699  0C24  E5          	push	hl
2700  0C25  CD 00 00    	call	_spr_calc_index
2701  0C28  F1          	pop	af
2702  0C29  22 00 00    	ld	(_index1),hl
2703  0C2C  2E 00       	ld	l,0x00
2704  0C2E  CD 00 00    	call	_spr_brick_anim
2705  0C31  21 00 00    	ld	hl,_player_hit_lin
2706  0C34  36 00       	ld	(hl),0x00
2707  0C36  21 00 00    	ld	hl,_player_hit_col
2708  0C39  36 00       	ld	(hl),0x00
2709  0C3B  C9          	ret
2710  0C3C              	SECTION code_compiler
2711  0C3C              ;	---------------------------------
2712  0C3C              ; Function player_score_add
2713  0C3C              ; ---------------------------------
2714  0C3C              _player_score_add:
2715  0C3C  ED 4B 00 00 	ld	bc,(_player_score)
2716  0C40  09          	add	hl,bc
2717  0C41  22 00 00    	ld	(_player_score),hl
2718  0C44  21 00 00    	ld	hl,_player_lvl
2719  0C47  7E          	ld	a, (hl)
2720  0C48  D6 14       	sub	a,0x14
2721  0C4A  30 3C       	jr	NC,l_player_score_add_00104
2722  0C4C  01 00 00    	ld	bc,_player_lvl_table+0
2723  0C4F  6E          	ld	l,(hl)
2724  0C50  26 00       	ld	h,0x00
2725  0C52  29          	add	hl, hl
2726  0C53  09          	add	hl, bc
2727  0C54  4E          	ld	c, (hl)
2728  0C55  23          	inc	hl
2729  0C56  46          	ld	b, (hl)
2730  0C57  21 00 00    	ld	hl,_player_score
2731  0C5A  7E          	ld	a, (hl)
2732  0C5B  91          	sub	a, c
2733  0C5C  23          	inc	hl
2734  0C5D  7E          	ld	a, (hl)
2735  0C5E  98          	sbc	a, b
2736  0C5F  38 27       	jr	C,l_player_score_add_00104
2737  0C61  21 00 00    	ld	hl,_player_lvl
2738  0C64  34          	inc	(hl)
2739  0C65  21 00 00    	ld	hl,___str_0
2740  0C68  E5          	push	hl
2741  0C69  21 0C 0C    	ld	hl,0x0c0c
2742  0C6C  E5          	push	hl
2743  0C6D  CD 00 00    	call	_zx_print_str
2744  0C70  AF          	xor	a, a
2745  0C71  F5          	push	af
2746  0C72  33          	inc	sp
2747  0C73  21 19 00    	ld	hl,0x0019
2748  0C76  E5          	push	hl
2749  0C77  21 0C 15    	ld	hl,0x150c
2750  0C7A  E5          	push	hl
2751  0C7B  3E 0C       	ld	a,0x0c
2752  0C7D  F5          	push	af
2753  0C7E  33          	inc	sp
2754  0C7F  CD 00 00    	call	_game_colour_message
2755  0C82  F1          	pop	af
2756  0C83  F1          	pop	af
2757  0C84  F1          	pop	af
2758  0C85  CD 00 00    	call	_game_update_stats
2759  0C88              l_player_score_add_00104:
2760  0C88  3A 00 00    	ld	a,(_game_score_top)
2761  0C8B  21 00 00    	ld	hl,_player_score
2762  0C8E  96          	sub	a, (hl)
2763  0C8F  3A 01 00    	ld	a,(_game_score_top + 1)
2764  0C92  23          	inc	hl
2765  0C93  9E          	sbc	a, (hl)
2766  0C94  30 06       	jr	NC,l_player_score_add_00106
2767  0C96  2A 00 00    	ld	hl,(_player_score)
2768  0C99  22 00 00    	ld	(_game_score_top),hl
2769  0C9C              l_player_score_add_00106:
2770  0C9C  CD 00 00    	call	_game_print_score
2771  0C9F  C9          	ret
2772  0CA0              	SECTION rodata_compiler
2773  0000              ___str_0:
2774  0000  4C 45 56 45 4C 20 55 50 21 
                        	DEFM "LEVEL UP!"
2775  0009  00          	DEFB 0x00
2776  000A              	SECTION code_compiler
2777  0CA0              ;	---------------------------------
2778  0CA0              ; Function player_check_floor
2779  0CA0              ; ---------------------------------
2780  0CA0              _player_check_floor:
2781  0CA0  CD 00 00    	call	___sdcc_enter_ix
2782  0CA3  2A 00 00    	ld	hl,(_sprite)
2783  0CA6  F5          	push	af
2784  0CA7  F5          	push	af
2785  0CA8  26 00       	ld	h,0x00
2786  0CAA  01 00 00    	ld	bc,_col
2787  0CAD  09          	add	hl,bc
2788  0CAE  56          	ld	d, (hl)
2789  0CAF  2A 00 00    	ld	hl,(_sprite)
2790  0CB2  26 00       	ld	h,0x00
2791  0CB4  01 00 00    	ld	bc,_lin
2792  0CB7  09          	add	hl,bc
2793  0CB8  7E          	ld	a,(hl)
2794  0CB9  C6 10       	add	a,0x10
2795  0CBB  5F          	ld	e, a
2796  0CBC  D5          	push	de
2797  0CBD  CD 00 00    	call	_spr_calc_index
2798  0CC0  F1          	pop	af
2799  0CC1  4D          	ld	c, l
2800  0CC2  44          	ld	b, h
2801  0CC3  21 00 00    	ld	hl,_scr_map
2802  0CC6  09          	add	hl,bc
2803  0CC7  DD 75 FE    	ld	(ix-2),l
2804  0CCA  DD 74 FF    	ld	(ix-1),h
2805  0CCD  7E          	ld	a, (hl)
2806  0CCE  DD 77 FD    	ld	(ix-3),a
2807  0CD1  2A 00 00    	ld	hl,(_sprite)
2808  0CD4  26 00       	ld	h,0x00
2809  0CD6  11 00 00    	ld	de,_col
2810  0CD9  19          	add	hl,de
2811  0CDA  5E          	ld	e, (hl)
2812  0CDB  03          	inc	bc
2813  0CDC  21 00 00    	ld	hl,_scr_map
2814  0CDF  09          	add	hl,bc
2815  0CE0  CB 43       	bit	0,e
2816  0CE2  4D          	ld	c,l
2817  0CE3  44          	ld	b,h
2818  0CE4  20 06       	jr	NZ,l_player_check_floor_00102
2819  0CE6  DD 36 FC 01 	ld	(ix-4),0x01
2820  0CEA  18 04       	jr	l_player_check_floor_00103
2821  0CEC              l_player_check_floor_00102:
2822  0CEC  0A          	ld	a, (bc)
2823  0CED  DD 77 FC    	ld	(ix-4),a
2824  0CF0              l_player_check_floor_00103:
2825  0CF0  3A 00 00    	ld	a,(_s_lin0)
2826  0CF3  D6 90       	sub	a,0x90
2827  0CF5  20 04       	jr	NZ,l_player_check_floor_00105
2828  0CF7  DD 36 FD 48 	ld	(ix-3),0x48
2829  0CFB              l_player_check_floor_00105:
2830  0CFB  DD 7E FD    	ld	a,(ix-3)
2831  0CFE  D6 3C       	sub	a,0x3c
2832  0D00  38 07       	jr	C,l_player_check_floor_00125
2833  0D02  DD 7E FD    	ld	a,(ix-3)
2834  0D05  D6 60       	sub	a,0x60
2835  0D07  38 26       	jr	C,l_player_check_floor_00121
2836  0D09              l_player_check_floor_00125:
2837  0D09  DD 7E FC    	ld	a,(ix-4)
2838  0D0C  D6 3C       	sub	a,0x3c
2839  0D0E  38 07       	jr	C,l_player_check_floor_00120
2840  0D10  DD 7E FC    	ld	a,(ix-4)
2841  0D13  D6 60       	sub	a,0x60
2842  0D15  38 18       	jr	C,l_player_check_floor_00121
2843  0D17              l_player_check_floor_00120:
2844  0D17  2A 00 00    	ld	hl,(_sprite)
2845  0D1A  26 00       	ld	h,0x00
2846  0D1C  01 00 00    	ld	bc,_sprite_speed_alt
2847  0D1F  09          	add	hl,bc
2848  0D20  36 02       	ld	(hl),0x02
2849  0D22  21 00 00    	ld	hl,_s_state
2850  0D25  CB CE       	set	1, (hl)
2851  0D27  2E 00       	ld	l,0x00
2852  0D29  CD AA 04    	call	_player_check_stairs
2853  0D2C  C3 AE 0D    	jp	l_player_check_floor_00126
2854  0D2F              l_player_check_floor_00121:
2855  0D2F  C5          	push	bc
2856  0D30  21 10 00    	ld	hl,0x0010
2857  0D33  E5          	push	hl
2858  0D34  2A 00 00    	ld	hl,(_player_brick_time)
2859  0D37  E5          	push	hl
2860  0D38  CD 00 00    	call	_game_check_time
2861  0D3B  F1          	pop	af
2862  0D3C  F1          	pop	af
2863  0D3D  C1          	pop	bc
2864  0D3E  7D          	ld	a,l
2865  0D3F  B7          	or	a, a
2866  0D40  28 6C       	jr	Z,l_player_check_floor_00126
2867  0D42  2A 00 00    	ld	hl,(_curr_time)
2868  0D45  22 00 00    	ld	(_player_brick_time),hl
2869  0D48  DD 7E FD    	ld	a,(ix-3)
2870  0D4B  D6 40       	sub	a,0x40
2871  0D4D  20 0D       	jr	NZ,l_player_check_floor_00107
2872  0D4F  DD 6E FE    	ld	l,(ix-2)
2873  0D52  DD 66 FF    	ld	h,(ix-1)
2874  0D55  36 00       	ld	(hl),0x00
2875  0D57  C5          	push	bc
2876  0D58  CD B3 0D    	call	_player_gasta_brick
2877  0D5B  C1          	pop	bc
2878  0D5C              l_player_check_floor_00107:
2879  0D5C  DD 7E FD    	ld	a,(ix-3)
2880  0D5F  D6 3F       	sub	a,0x3f
2881  0D61  20 0D       	jr	NZ,l_player_check_floor_00109
2882  0D63  DD 6E FE    	ld	l,(ix-2)
2883  0D66  DD 66 FF    	ld	h,(ix-1)
2884  0D69  36 40       	ld	(hl),0x40
2885  0D6B  C5          	push	bc
2886  0D6C  CD B3 0D    	call	_player_gasta_brick
2887  0D6F  C1          	pop	bc
2888  0D70              l_player_check_floor_00109:
2889  0D70  DD 7E FD    	ld	a,(ix-3)
2890  0D73  D6 3E       	sub	a,0x3e
2891  0D75  20 0D       	jr	NZ,l_player_check_floor_00111
2892  0D77  DD 6E FE    	ld	l,(ix-2)
2893  0D7A  DD 66 FF    	ld	h,(ix-1)
2894  0D7D  36 3F       	ld	(hl),0x3f
2895  0D7F  C5          	push	bc
2896  0D80  CD B3 0D    	call	_player_gasta_brick
2897  0D83  C1          	pop	bc
2898  0D84              l_player_check_floor_00111:
2899  0D84  DD 7E FC    	ld	a,(ix-4)
2900  0D87  D6 40       	sub	a,0x40
2901  0D89  20 07       	jr	NZ,l_player_check_floor_00113
2902  0D8B  AF          	xor	a, a
2903  0D8C  02          	ld	(bc), a
2904  0D8D  C5          	push	bc
2905  0D8E  CD B3 0D    	call	_player_gasta_brick
2906  0D91  C1          	pop	bc
2907  0D92              l_player_check_floor_00113:
2908  0D92  DD 7E FC    	ld	a,(ix-4)
2909  0D95  D6 3F       	sub	a,0x3f
2910  0D97  20 08       	jr	NZ,l_player_check_floor_00115
2911  0D99  3E 40       	ld	a,0x40
2912  0D9B  02          	ld	(bc), a
2913  0D9C  C5          	push	bc
2914  0D9D  CD B3 0D    	call	_player_gasta_brick
2915  0DA0  C1          	pop	bc
2916  0DA1              l_player_check_floor_00115:
2917  0DA1  DD 7E FC    	ld	a,(ix-4)
2918  0DA4  D6 3E       	sub	a,0x3e
2919  0DA6  20 06       	jr	NZ,l_player_check_floor_00126
2920  0DA8  3E 3F       	ld	a,0x3f
2921  0DAA  02          	ld	(bc), a
2922  0DAB  CD B3 0D    	call	_player_gasta_brick
2923  0DAE              l_player_check_floor_00126:
2924  0DAE  DD F9       	ld	sp, ix
2925  0DB0  DD E1       	pop	ix
2926  0DB2  C9          	ret
2927  0DB3              	SECTION code_compiler
2928  0DB3              ;	---------------------------------
2929  0DB3              ; Function player_gasta_brick
2930  0DB3              ; ---------------------------------
2931  0DB3              _player_gasta_brick:
2932  0DB3  3A 00 00    	ld	a,(_s_lin0)
2933  0DB6  32 00 00    	ld	(_s_lin1),a
2934  0DB9  3A 00 00    	ld	a,(_s_col0)
2935  0DBC  32 00 00    	ld	(_s_col1),a
2936  0DBF  2A 00 00    	ld	hl,(_sprite)
2937  0DC2  26 00       	ld	h,0x00
2938  0DC4  01 00 00    	ld	bc,_lin
2939  0DC7  09          	add	hl,bc
2940  0DC8  7E          	ld	a,(hl)
2941  0DC9  C6 10       	add	a,0x10
2942  0DCB  32 00 00    	ld	(_s_lin0),a
2943  0DCE  2A 00 00    	ld	hl,(_sprite)
2944  0DD1  26 00       	ld	h,0x00
2945  0DD3  01 00 00    	ld	bc,_col
2946  0DD6  09          	add	hl,bc
2947  0DD7  7E          	ld	a,(hl)
2948  0DD8  32 00 00    	ld	(_s_col0),a
2949  0DDB  CD 00 00    	call	_spr_back_repaint
2950  0DDE  3A 00 00    	ld	a,(_s_lin1)
2951  0DE1  32 00 00    	ld	(_s_lin0),a
2952  0DE4  3A 00 00    	ld	a,(_s_col1)
2953  0DE7  32 00 00    	ld	(_s_col0),a
2954  0DEA  C9          	ret
2955  0DEB              	SECTION code_compiler
2956  0DEB              ;	---------------------------------
2957  0DEB              ; Function player_move_jump
2958  0DEB              ; ---------------------------------
2959  0DEB              _player_move_jump:
2960  0DEB  CD 00 00    	call	___sdcc_enter_ix
2961  0DEE  F5          	push	af
2962  0DEF  21 00 00    	ld	hl,_game_gravity
2963  0DF2  4E          	ld	c, (hl)
2964  0DF3  21 00 00    	ld	hl,_player_vel_y
2965  0DF6  7E          	ld	a, (hl)
2966  0DF7  81          	add	a, c
2967  0DF8  77          	ld	(hl), a
2968  0DF9  21 00 00    	ld	hl,_sprite_on_air
2969  0DFC  36 01       	ld	(hl),0x01
2970  0DFE  3A 00 00    	ld	a,(_player_vel_inc)
2971  0E01  B7          	or	a, a
2972  0E02  28 2B       	jr	Z,l_player_move_jump_00107
2973  0E04  21 00 00    	ld	hl,_dirs
2974  0E07  CB 7E       	bit	7, (hl)
2975  0E09  28 07       	jr	Z,l_player_move_jump_00104
2976  0E0B  21 00 00    	ld	hl,_dirs
2977  0E0E  CB 46       	bit	0, (hl)
2978  0E10  20 1D       	jr	NZ,l_player_move_jump_00107
2979  0E12              l_player_move_jump_00104:
2980  0E12  3A 00 00    	ld	a,(_player_vel_y1)
2981  0E15  21 00 00    	ld	hl,_player_vel_y
2982  0E18  96          	sub	a, (hl)
2983  0E19  E2 1E 0E    	jp	PO, l_player_move_jump_00263
2984  0E1C  EE 80       	xor	a,0x80
2985  0E1E              l_player_move_jump_00263:
2986  0E1E  F2 2F 0E    	jp	P, l_player_move_jump_00107
2987  0E21  21 00 00    	ld	hl,_player_vel_y
2988  0E24  CB 7E       	bit	7,(hl)
2989  0E26  28 07       	jr	Z,l_player_move_jump_00107
2990  0E28  36 00       	ld	(hl),0x00
2991  0E2A  21 00 00    	ld	hl,_player_vel_inc
2992  0E2D  36 00       	ld	(hl),0x00
2993  0E2F              l_player_move_jump_00107:
2994  0E2F  3E 78       	ld	a,0x78
2995  0E31  21 00 00    	ld	hl,_player_vel_y
2996  0E34  96          	sub	a, (hl)
2997  0E35  E2 3A 0E    	jp	PO, l_player_move_jump_00264
2998  0E38  EE 80       	xor	a,0x80
2999  0E3A              l_player_move_jump_00264:
3000  0E3A  F2 42 0E    	jp	P, l_player_move_jump_00109
3001  0E3D  21 00 00    	ld	hl,_player_vel_y
3002  0E40  36 78       	ld	(hl),0x78
3003  0E42              l_player_move_jump_00109:
3004  0E42  21 00 00    	ld	hl,_player_vel_y
3005  0E45  7E          	ld	a, (hl)
3006  0E46  EE 80       	xor	a,0x80
3007  0E48  D6 08       	sub	a,0x08
3008  0E4A  30 02       	jr	NC,l_player_move_jump_00111
3009  0E4C  36 88       	ld	(hl),0x88
3010  0E4E              l_player_move_jump_00111:
3011  0E4E  3A 00 00    	ld	a,(_player_vel_y)
3012  0E51  5F          	ld	e,a
3013  0E52  17          	rla
3014  0E53  9F          	sbc	a, a
3015  0E54  57          	ld	d, a
3016  0E55  CB 43       	bit	0,e
3017  0E57  21 00 00    	ld	hl,_s_lin1
3018  0E5A  73          	ld	(hl),e
3019  0E5B  28 04       	jr	Z,l_player_move_jump_00113
3020  0E5D  21 00 00    	ld	hl,_s_lin1
3021  0E60  35          	dec	(hl)
3022  0E61              l_player_move_jump_00113:
3023  0E61  2A 00 00    	ld	hl,(_sprite)
3024  0E64  26 00       	ld	h,0x00
3025  0E66  01 00 00    	ld	bc,_lin
3026  0E69  09          	add	hl,bc
3027  0E6A  7E          	ld	a,(hl)
3028  0E6B  21 00 00    	ld	hl,_s_lin1
3029  0E6E  86          	add	a, (hl)
3030  0E6F  77          	ld	(hl), a
3031  0E70  3E 90       	ld	a,0x90
3032  0E72  96          	sub	a, (hl)
3033  0E73  30 31       	jr	NC,l_player_move_jump_00124
3034  0E75  3E C8       	ld	a,0xc8
3035  0E77  96          	sub	a, (hl)
3036  0E78  30 17       	jr	NC,l_player_move_jump_00121
3037  0E7A  D5          	push	de
3038  0E7B  CD 00 00    	call	_spr_page_up
3039  0E7E  D1          	pop	de
3040  0E7F  7D          	ld	a,l
3041  0E80  B7          	or	a, a
3042  0E81  28 07       	jr	Z,l_player_move_jump_00115
3043  0E83  21 00 00    	ld	hl,_s_lin1
3044  0E86  36 90       	ld	(hl),0x90
3045  0E88  18 1C       	jr	l_player_move_jump_00124
3046  0E8A              l_player_move_jump_00115:
3047  0E8A  21 00 00    	ld	hl,_s_lin1
3048  0E8D  36 00       	ld	(hl),0x00
3049  0E8F  18 15       	jr	l_player_move_jump_00124
3050  0E91              l_player_move_jump_00121:
3051  0E91  D5          	push	de
3052  0E92  CD 00 00    	call	_spr_page_down
3053  0E95  D1          	pop	de
3054  0E96  7D          	ld	a,l
3055  0E97  B7          	or	a, a
3056  0E98  28 07       	jr	Z,l_player_move_jump_00118
3057  0E9A  21 00 00    	ld	hl,_s_lin1
3058  0E9D  36 10       	ld	(hl),0x10
3059  0E9F  18 05       	jr	l_player_move_jump_00124
3060  0EA1              l_player_move_jump_00118:
3061  0EA1  21 00 00    	ld	hl,_s_lin1
3062  0EA4  36 90       	ld	(hl),0x90
3063  0EA6              l_player_move_jump_00124:
3064  0EA6  3E 00       	ld	a, +((_lin) & 0xFF)
3065  0EA8  21 00 00    	ld	hl,_sprite
3066  0EAB  86          	add	a, (hl)
3067  0EAC  DD 77 FE    	ld	(ix-2),a
3068  0EAF  3E 00       	ld	a, +((_lin) / 256)
3069  0EB1  CE 00       	adc	a,0x00
3070  0EB3  DD 77 FF    	ld	(ix-1),a
3071  0EB6  3A 00 00    	ld	a,(_s_lin0)
3072  0EB9  07          	rlca
3073  0EBA  07          	rlca
3074  0EBB  07          	rlca
3075  0EBC  07          	rlca
3076  0EBD  E6 0F       	and	a,0x0f
3077  0EBF  4F          	ld	c, a
3078  0EC0  CB 7A       	bit	7, d
3079  0EC2  28 74       	jr	Z,l_player_move_jump_00147
3080  0EC4  21 00 00    	ld	hl,_s_state
3081  0EC7  7E          	ld	a,(hl)
3082  0EC8  F6 01       	or	a,0x01
3083  0ECA  E6 FD       	and	a,0xfd
3084  0ECC  77          	ld	(hl),a
3085  0ECD  21 00 00    	ld	hl,_s_lin1
3086  0ED0  46          	ld	b, (hl)
3087  0ED1  79          	ld	a, c
3088  0ED2  90          	sub	a, b
3089  0ED3  20 04       	jr	NZ,l_player_move_jump_00266
3090  0ED5  3E 01       	ld	a,0x01
3091  0ED7  18 01       	jr	l_player_move_jump_00267
3092  0ED9              l_player_move_jump_00266:
3093  0ED9  AF          	xor	a,a
3094  0EDA              l_player_move_jump_00267:
3095  0EDA  EE 01       	xor	a,0x01
3096  0EDC  28 51       	jr	Z,l_player_move_jump_00131
3097  0EDE  2A 00 00    	ld	hl,(_sprite)
3098  0EE1  26 00       	ld	h,0x00
3099  0EE3  01 00 00    	ld	bc,_col
3100  0EE6  09          	add	hl,bc
3101  0EE7  7E          	ld	a,(hl)
3102  0EE8  F5          	push	af
3103  0EE9  33          	inc	sp
3104  0EEA  3A 00 00    	ld	a,(_s_lin1)
3105  0EED  F5          	push	af
3106  0EEE  33          	inc	sp
3107  0EEF  CD 00 00    	call	_game_check_map
3108  0EF2  F1          	pop	af
3109  0EF3  7C          	ld	a,h
3110  0EF4  B5          	or	a,l
3111  0EF5  28 28       	jr	Z,l_player_move_jump_00128
3112  0EF7  CD 58 09    	call	_player_hit_platform
3113  0EFA  7D          	ld	a, l
3114  0EFB  B7          	or	a, a
3115  0EFC  28 19       	jr	Z,l_player_move_jump_00126
3116  0EFE  2A 00 00    	ld	hl,(_sprite)
3117  0F01  26 00       	ld	h,0x00
3118  0F03  01 00 00    	ld	bc,_lin
3119  0F06  09          	add	hl,bc
3120  0F07  7E          	ld	a,(hl)
3121  0F08  4D          	ld	c,l
3122  0F09  44          	ld	b,h
3123  0F0A  07          	rlca
3124  0F0B  07          	rlca
3125  0F0C  07          	rlca
3126  0F0D  07          	rlca
3127  0F0E  E6 0F       	and	a,0x0f
3128  0F10  07          	rlca
3129  0F11  07          	rlca
3130  0F12  07          	rlca
3131  0F13  07          	rlca
3132  0F14  E6 F0       	and	a,0xf0
3133  0F16  02          	ld	(bc), a
3134  0F17              l_player_move_jump_00126:
3135  0F17  21 00 00    	ld	hl,_player_vel_y
3136  0F1A  36 00       	ld	(hl),0x00
3137  0F1C  C3 FC 0F    	jp	l_player_move_jump_00148
3138  0F1F              l_player_move_jump_00128:
3139  0F1F  2A 00 00    	ld	hl,(_sprite)
3140  0F22  26 00       	ld	h,0x00
3141  0F24  01 00 00    	ld	bc,_lin
3142  0F27  09          	add	hl,bc
3143  0F28  3A 00 00    	ld	a,(_s_lin1)
3144  0F2B  77          	ld	(hl),a
3145  0F2C  C3 FC 0F    	jp	l_player_move_jump_00148
3146  0F2F              l_player_move_jump_00131:
3147  0F2F  E1          	pop	hl
3148  0F30  3A 00 00    	ld	a,(_s_lin1)
3149  0F33  E5          	push	hl
3150  0F34  77          	ld	(hl),a
3151  0F35  C3 FC 0F    	jp	l_player_move_jump_00148
3152  0F38              l_player_move_jump_00147:
3153  0F38  21 00 00    	ld	hl,_s_state
3154  0F3B  7E          	ld	a,(hl)
3155  0F3C  F6 02       	or	a,0x02
3156  0F3E  E6 FE       	and	a,0xfe
3157  0F40  77          	ld	(hl),a
3158  0F41  21 00 00    	ld	hl,_s_lin1
3159  0F44  7E          	ld	a, (hl)
3160  0F45  C6 10       	add	a,0x10
3161  0F47  77          	ld	(hl),a
3162  0F48  47          	ld	b,a
3163  0F49  79          	ld	a, c
3164  0F4A  90          	sub	a, b
3165  0F4B  20 04       	jr	NZ,l_player_move_jump_00268
3166  0F4D  3E 01       	ld	a,0x01
3167  0F4F  18 01       	jr	l_player_move_jump_00269
3168  0F51              l_player_move_jump_00268:
3169  0F51  AF          	xor	a,a
3170  0F52              l_player_move_jump_00269:
3171  0F52  EE 01       	xor	a,0x01
3172  0F54  CA EF 0F    	jp	Z, l_player_move_jump_00144
3173  0F57  2A 00 00    	ld	hl,(_sprite)
3174  0F5A  26 00       	ld	h,0x00
3175  0F5C  01 00 00    	ld	bc,_col
3176  0F5F  09          	add	hl,bc
3177  0F60  7E          	ld	a,(hl)
3178  0F61  F5          	push	af
3179  0F62  33          	inc	sp
3180  0F63  3A 00 00    	ld	a,(_s_lin1)
3181  0F66  F5          	push	af
3182  0F67  33          	inc	sp
3183  0F68  CD 00 00    	call	_game_check_map
3184  0F6B  F1          	pop	af
3185  0F6C  45          	ld	b, l
3186  0F6D  5C          	ld	e, h
3187  0F6E  21 00 00    	ld	hl,_s_lin1
3188  0F71  7E          	ld	a, (hl)
3189  0F72  C6 F0       	add	a,0xf0
3190  0F74  4F          	ld	c, a
3191  0F75  7B          	ld	a, e
3192  0F76  B0          	or	a,b
3193  0F77  28 63       	jr	Z,l_player_move_jump_00141
3194  0F79  71          	ld	(hl), c
3195  0F7A  2E 00       	ld	l,0x00
3196  0F7C  CD AA 04    	call	_player_check_stairs
3197  0F7F  3A 00 00    	ld	a,(_player_over_stair)
3198  0F82  B7          	or	a, a
3199  0F83  20 05       	jr	NZ,l_player_move_jump_00134
3200  0F85  2E 01       	ld	l,0x01
3201  0F87  CD AA 04    	call	_player_check_stairs
3202  0F8A              l_player_move_jump_00134:
3203  0F8A  3A 00 00    	ld	a,(_player_over_stair)
3204  0F8D  B7          	or	a, a
3205  0F8E  20 31       	jr	NZ,l_player_move_jump_00139
3206  0F90  21 00 00    	ld	hl,_s_lin1
3207  0F93  7E          	ld	a, (hl)
3208  0F94  07          	rlca
3209  0F95  07          	rlca
3210  0F96  07          	rlca
3211  0F97  07          	rlca
3212  0F98  E6 0F       	and	a,0x0f
3213  0F9A  07          	rlca
3214  0F9B  07          	rlca
3215  0F9C  07          	rlca
3216  0F9D  07          	rlca
3217  0F9E  E6 F0       	and	a,0xf0
3218  0FA0  77          	ld	(hl), a
3219  0FA1  2A 00 00    	ld	hl,(_sprite)
3220  0FA4  26 00       	ld	h,0x00
3221  0FA6  01 00 00    	ld	bc,_lin
3222  0FA9  09          	add	hl,bc
3223  0FAA  5E          	ld	e,(hl)
3224  0FAB  4D          	ld	c,l
3225  0FAC  44          	ld	b,h
3226  0FAD  21 00 00    	ld	hl,_s_lin1
3227  0FB0  7E          	ld	a, (hl)
3228  0FB1  93          	sub	a, e
3229  0FB2  30 09       	jr	NC,l_player_move_jump_00136
3230  0FB4  7E          	ld	a, (hl)
3231  0FB5  C6 10       	add	a,0x10
3232  0FB7  02          	ld	(bc), a
3233  0FB8  2E 00       	ld	l,0x00
3234  0FBA  C3 3A 10    	jp	l_player_move_jump_00158
3235  0FBD              l_player_move_jump_00136:
3236  0FBD  3A 00 00    	ld	a,(_s_lin1)
3237  0FC0  02          	ld	(bc), a
3238  0FC1              l_player_move_jump_00139:
3239  0FC1  21 00 00    	ld	hl,_player_vel_y
3240  0FC4  36 00       	ld	(hl),0x00
3241  0FC6  21 00 00    	ld	hl,_s_state
3242  0FC9  7E          	ld	a,(hl)
3243  0FCA  E6 FC       	and	a,+(0xfd&0xfe)
3244  0FCC  77          	ld	(hl),a
3245  0FCD  2A 00 00    	ld	hl,(_sprite)
3246  0FD0  26 00       	ld	h,0x00
3247  0FD2  01 00 00    	ld	bc,_colint
3248  0FD5  09          	add	hl,bc
3249  0FD6  AF          	xor	a,a
3250  0FD7  77          	ld	(hl),a
3251  0FD8  2E 01       	ld	l,0x01
3252  0FDA  18 5E       	jr	l_player_move_jump_00158
3253  0FDC              l_player_move_jump_00141:
3254  0FDC  21 00 00    	ld	hl,_s_lin1
3255  0FDF  71          	ld	(hl), c
3256  0FE0  2A 00 00    	ld	hl,(_sprite)
3257  0FE3  26 00       	ld	h,0x00
3258  0FE5  01 00 00    	ld	bc,_lin
3259  0FE8  09          	add	hl,bc
3260  0FE9  3A 00 00    	ld	a,(_s_lin1)
3261  0FEC  77          	ld	(hl),a
3262  0FED  18 0D       	jr	l_player_move_jump_00148
3263  0FEF              l_player_move_jump_00144:
3264  0FEF  21 00 00    	ld	hl,_s_lin1
3265  0FF2  7E          	ld	a, (hl)
3266  0FF3  C6 F0       	add	a,0xf0
3267  0FF5  77          	ld	(hl), a
3268  0FF6  E1          	pop	hl
3269  0FF7  3A 00 00    	ld	a,(_s_lin1)
3270  0FFA  E5          	push	hl
3271  0FFB  77          	ld	(hl),a
3272  0FFC              l_player_move_jump_00148:
3273  0FFC  21 00 00    	ld	hl,_s_state
3274  0FFF  CB 5E       	bit	3, (hl)
3275  1001  20 27       	jr	NZ,l_player_move_jump_00154
3276  1003  21 00 00    	ld	hl,_s_state
3277  1006  CB 56       	bit	2, (hl)
3278  1008  20 20       	jr	NZ,l_player_move_jump_00154
3279  100A  21 00 00    	ld	hl,_dirs
3280  100D  CB 56       	bit	2, (hl)
3281  100F  28 09       	jr	Z,l_player_move_jump_00150
3282  1011  21 00 00    	ld	hl,_s_state
3283  1014  7E          	ld	a,(hl)
3284  1015  F6 08       	or	a,0x08
3285  1017  E6 FB       	and	a,0xfb
3286  1019  77          	ld	(hl),a
3287  101A              l_player_move_jump_00150:
3288  101A  21 00 00    	ld	hl,_dirs
3289  101D  CB 5E       	bit	3, (hl)
3290  101F  28 09       	jr	Z,l_player_move_jump_00154
3291  1021  21 00 00    	ld	hl,_s_state
3292  1024  7E          	ld	a,(hl)
3293  1025  F6 04       	or	a,0x04
3294  1027  E6 F7       	and	a,0xf7
3295  1029  77          	ld	(hl),a
3296  102A              l_player_move_jump_00154:
3297  102A  CD 00 00    	call	_spr_move_horizontal
3298  102D  7D          	ld	a, l
3299  102E  B7          	or	a, a
3300  102F  28 07       	jr	Z,l_player_move_jump_00157
3301  1031  21 00 00    	ld	hl,_s_state
3302  1034  7E          	ld	a,(hl)
3303  1035  E6 F3       	and	a,+(0xf7&0xfb)
3304  1037  77          	ld	(hl),a
3305  1038              l_player_move_jump_00157:
3306  1038  2E 00       	ld	l,0x00
3307  103A              l_player_move_jump_00158:
3308  103A  F1          	pop	af
3309  103B  DD E1       	pop	ix
3310  103D  C9          	ret
3311  103E              	SECTION code_compiler
3312  103E              ;	---------------------------------
3313  103E              ; Function player_open_door
3314  103E              ; ---------------------------------
3315  103E              _player_open_door:
3316  103E  CD 00 00    	call	___sdcc_enter_ix
3317  1041  0E 00       	ld	c,0x00
3318  1043  DD 7E 06    	ld	a,(ix+6)
3319  1046  D6 48       	sub	a,0x48
3320  1048  28 17       	jr	Z,l_player_open_door_00101
3321  104A  DD 7E 06    	ld	a,(ix+6)
3322  104D  D6 49       	sub	a,0x49
3323  104F  28 1F       	jr	Z,l_player_open_door_00104
3324  1051  DD 7E 06    	ld	a,(ix+6)
3325  1054  D6 4A       	sub	a,0x4a
3326  1056  28 27       	jr	Z,l_player_open_door_00107
3327  1058  DD 7E 06    	ld	a,(ix+6)
3328  105B  D6 4B       	sub	a,0x4b
3329  105D  28 2F       	jr	Z,l_player_open_door_00110
3330  105F  18 3A       	jr	l_player_open_door_00113
3331  1061              l_player_open_door_00101:
3332  1061  3A 00 00    	ld	a,(_player_keys)
3333  1064  B7          	or	a, a
3334  1065  28 34       	jr	Z,l_player_open_door_00113
3335  1067  2E 07       	ld	l,0x07
3336  1069  CD 00 00    	call	_zx_border_fastcall
3337  106C  0E 01       	ld	c,0x01
3338  106E  18 2B       	jr	l_player_open_door_00113
3339  1070              l_player_open_door_00104:
3340  1070  3A 01 00    	ld	a,(_player_keys + 0x0001)
3341  1073  B7          	or	a, a
3342  1074  28 25       	jr	Z,l_player_open_door_00113
3343  1076  2E 02       	ld	l,0x02
3344  1078  CD 00 00    	call	_zx_border_fastcall
3345  107B  0E 01       	ld	c,0x01
3346  107D  18 1C       	jr	l_player_open_door_00113
3347  107F              l_player_open_door_00107:
3348  107F  3A 02 00    	ld	a,(_player_keys + 0x0002)
3349  1082  B7          	or	a, a
3350  1083  28 16       	jr	Z,l_player_open_door_00113
3351  1085  2E 04       	ld	l,0x04
3352  1087  CD 00 00    	call	_zx_border_fastcall
3353  108A  0E 01       	ld	c,0x01
3354  108C  18 0D       	jr	l_player_open_door_00113
3355  108E              l_player_open_door_00110:
3356  108E  3A 03 00    	ld	a,(_player_keys + 0x0003)
3357  1091  B7          	or	a, a
3358  1092  28 07       	jr	Z,l_player_open_door_00113
3359  1094  2E 05       	ld	l,0x05
3360  1096  CD 00 00    	call	_zx_border_fastcall
3361  1099  0E 01       	ld	c,0x01
3362  109B              l_player_open_door_00113:
3363  109B  79          	ld	a, c
3364  109C  B7          	or	a, a
3365  109D  20 06       	jr	NZ,l_player_open_door_00114
3366  109F  3A 00 00    	ld	a,(_game_inmune)
3367  10A2  B7          	or	a, a
3368  10A3  28 24       	jr	Z,l_player_open_door_00117
3369  10A5              l_player_open_door_00114:
3370  10A5  3E 00       	ld	a, +((_scr_map) & 0xFF)
3371  10A7  DD 86 04    	add	a,(ix+4)
3372  10AA  4F          	ld	c, a
3373  10AB  3E 00       	ld	a, +((_scr_map) / 256)
3374  10AD  DD 8E 05    	adc	a,(ix+5)
3375  10B0  47          	ld	b, a
3376  10B1  AF          	xor	a, a
3377  10B2  02          	ld	(bc), a
3378  10B3  DD 6E 04    	ld	l,(ix+4)
3379  10B6  DD 66 05    	ld	h,(ix+5)
3380  10B9  E5          	push	hl
3381  10BA  CD 00 00    	call	_game_obj_set
3382  10BD  F1          	pop	af
3383  10BE  DD 6E 04    	ld	l,(ix+4)
3384  10C1  DD 66 05    	ld	h,(ix+5)
3385  10C4  E5          	push	hl
3386  10C5  CD 00 00    	call	_spr_draw_index
3387  10C8  F1          	pop	af
3388  10C9              l_player_open_door_00117:
3389  10C9  DD E1       	pop	ix
3390  10CB  C9          	ret
3391  10CC              	SECTION code_compiler
3392  10CC              ;	---------------------------------
3393  10CC              ; Function player_lost_life
3394  10CC              ; ---------------------------------
3395  10CC              _player_lost_life:
3396  10CC  CD 00 00    	call	___sdcc_enter_ix
3397  10CF  F5          	push	af
3398  10D0  3B          	dec	sp
3399  10D1  3A 07 00    	ld	a,(_lin + 7)
3400  10D4  32 00 00    	ld	(_s_lin0),a
3401  10D7  3A 07 00    	ld	a,(_col + 7)
3402  10DA  32 00 00    	ld	(_s_col0),a
3403  10DD  CD 00 00    	call	_spr_init_anim_bullets
3404  10E0  01 00 00    	ld	bc,_anim_lin+0
3405  10E3  16 00       	ld	d,0x00
3406  10E5              l_player_lost_life_00115:
3407  10E5  C5          	push	bc
3408  10E6  D5          	push	de
3409  10E7  21 00 00    	ld	hl,0x0000
3410  10EA  E5          	push	hl
3411  10EB  AF          	xor	a, a
3412  10EC  5A          	ld	e,d
3413  10ED  57          	ld	d,a
3414  10EE  D5          	push	de
3415  10EF  CD 00 00    	call	_NIRVANAP_spriteT_callee
3416  10F2  D1          	pop	de
3417  10F3  C1          	pop	bc
3418  10F4  6A          	ld	l,d
3419  10F5  26 00       	ld	h,0x00
3420  10F7  09          	add	hl, bc
3421  10F8  36 FF       	ld	(hl),0xff
3422  10FA  14          	inc	d
3423  10FB  7A          	ld	a, d
3424  10FC  D6 08       	sub	a,0x08
3425  10FE  38 E5       	jr	C,l_player_lost_life_00115
3426  1100  21 00 00    	ld	hl,_anim_count
3427  1103  36 00       	ld	(hl),0x00
3428  1105  76          	halt
3429  1106  3A 00 00    	ld	a,(_s_lin0)
3430  1109  C6 F0       	add	a,0xf0
3431  110B  47          	ld	b, a
3432  110C  3A 00 00    	ld	a,(_s_col0)
3433  110F  21 00 00    	ld	hl,0x0000
3434  1112  E5          	push	hl
3435  1113  21 87 03    	ld	hl,0x0387
3436  1116  E5          	push	hl
3437  1117  48          	ld	c,b
3438  1118  47          	ld	b,a
3439  1119  C5          	push	bc
3440  111A  CD 00 00    	call	_spr_add_anim
3441  111D  F1          	pop	af
3442  111E  F1          	pop	af
3443  111F  F1          	pop	af
3444  1120  21 00 00    	ld	hl,_s_col0
3445  1123  46          	ld	b, (hl)
3446  1124  05          	dec	b
3447  1125  05          	dec	b
3448  1126  21 00 00    	ld	hl,0x0000
3449  1129  E5          	push	hl
3450  112A  21 87 03    	ld	hl,0x0387
3451  112D  E5          	push	hl
3452  112E  C5          	push	bc
3453  112F  33          	inc	sp
3454  1130  3A 00 00    	ld	a,(_s_lin0)
3455  1133  F5          	push	af
3456  1134  33          	inc	sp
3457  1135  CD 00 00    	call	_spr_add_anim
3458  1138  F1          	pop	af
3459  1139  F1          	pop	af
3460  113A  21 00 00    	ld	hl,0x0000
3461  113D  E3          	ex	(sp),hl
3462  113E  3A 00 00    	ld	a,(_s_col0)
3463  1141  21 87 03    	ld	hl,0x0387
3464  1144  E5          	push	hl
3465  1145  F5          	push	af
3466  1146  33          	inc	sp
3467  1147  3A 00 00    	ld	a,(_s_lin0)
3468  114A  F5          	push	af
3469  114B  33          	inc	sp
3470  114C  CD 00 00    	call	_spr_add_anim
3471  114F  F1          	pop	af
3472  1150  F1          	pop	af
3473  1151  F1          	pop	af
3474  1152  21 00 00    	ld	hl,_s_col0
3475  1155  46          	ld	b, (hl)
3476  1156  04          	inc	b
3477  1157  04          	inc	b
3478  1158  21 00 00    	ld	hl,0x0000
3479  115B  E5          	push	hl
3480  115C  21 87 03    	ld	hl,0x0387
3481  115F  E5          	push	hl
3482  1160  C5          	push	bc
3483  1161  33          	inc	sp
3484  1162  3A 00 00    	ld	a,(_s_lin0)
3485  1165  F5          	push	af
3486  1166  33          	inc	sp
3487  1167  CD 00 00    	call	_spr_add_anim
3488  116A  F1          	pop	af
3489  116B  F1          	pop	af
3490  116C  F1          	pop	af
3491  116D  3A 00 00    	ld	a,(_s_lin0)
3492  1170  C6 10       	add	a,0x10
3493  1172  47          	ld	b, a
3494  1173  3A 00 00    	ld	a,(_s_col0)
3495  1176  21 00 00    	ld	hl,0x0000
3496  1179  E5          	push	hl
3497  117A  21 87 03    	ld	hl,0x0387
3498  117D  E5          	push	hl
3499  117E  48          	ld	c,b
3500  117F  47          	ld	b,a
3501  1180  C5          	push	bc
3502  1181  CD 00 00    	call	_spr_add_anim
3503  1184  F1          	pop	af
3504  1185  F1          	pop	af
3505  1186  F1          	pop	af
3506  1187  2E 00       	ld	l,0x00
3507  1189  CD 00 00    	call	_zx_border_fastcall
3508  118C  DD 36 FD 01 	ld	(ix-3),0x01
3509  1190  2A 00 00    	ld	hl,(_curr_time)
3510  1193  22 00 00    	ld	(_anim_time),hl
3511  1196              l_player_lost_life_00107:
3512  1196  DD 7E FD    	ld	a,(ix-3)
3513  1199  B7          	or	a, a
3514  119A  28 28       	jr	Z,l_player_lost_life_00109
3515  119C  21 0C 00    	ld	hl,0x000c
3516  119F  E5          	push	hl
3517  11A0  2A 00 00    	ld	hl,(_anim_time)
3518  11A3  E5          	push	hl
3519  11A4  CD 00 00    	call	_game_check_time
3520  11A7  F1          	pop	af
3521  11A8  F1          	pop	af
3522  11A9  7D          	ld	a, l
3523  11AA  B7          	or	a, a
3524  11AB  28 E9       	jr	Z,l_player_lost_life_00107
3525  11AD  2A 00 00    	ld	hl,(_curr_time)
3526  11B0  22 00 00    	ld	(_anim_time),hl
3527  11B3  3A 00 00    	ld	a,(_anim_count)
3528  11B6  B7          	or	a,a
3529  11B7  28 05       	jr	Z,l_player_lost_life_00103
3530  11B9  CD 00 00    	call	_spr_play_anim
3531  11BC  18 D8       	jr	l_player_lost_life_00107
3532  11BE              l_player_lost_life_00103:
3533  11BE  DD 36 FD 00 	ld	(ix-3),0x00
3534  11C2  18 D2       	jr	l_player_lost_life_00107
3535  11C4              l_player_lost_life_00109:
3536  11C4  21 00 00    	ld	hl,_sprite
3537  11C7  36 00       	ld	(hl),0x00
3538  11C9              l_player_lost_life_00117:
3539  11C9  2A 00 00    	ld	hl,(_sprite)
3540  11CC  26 00       	ld	h,0x00
3541  11CE  01 00 00    	ld	bc,_class
3542  11D1  09          	add	hl,bc
3543  11D2  7E          	ld	a,(hl)
3544  11D3  B7          	or	a,a
3545  11D4  28 43       	jr	Z,l_player_lost_life_00111
3546  11D6  2A 00 00    	ld	hl,(_sprite)
3547  11D9  26 00       	ld	h,0x00
3548  11DB  01 00 00    	ld	bc,_col
3549  11DE  09          	add	hl,bc
3550  11DF  4E          	ld	c, (hl)
3551  11E0  2A 00 00    	ld	hl,(_sprite)
3552  11E3  26 00       	ld	h,0x00
3553  11E5  11 00 00    	ld	de,_lin
3554  11E8  19          	add	hl,de
3555  11E9  46          	ld	b, (hl)
3556  11EA  2A 00 00    	ld	hl,(_sprite)
3557  11ED  26 00       	ld	h,0x00
3558  11EF  11 00 00    	ld	de,_tile
3559  11F2  19          	add	hl,de
3560  11F3  5E          	ld	e, (hl)
3561  11F4  3E 00       	ld	a,+((_colint) & 0xFF)
3562  11F6  21 00 00    	ld	hl,_sprite
3563  11F9  86          	add	a, (hl)
3564  11FA  DD 77 FE    	ld	(ix-2),a
3565  11FD  6F          	ld	l,a
3566  11FE  3E 00       	ld	a,+((_colint) / 256)
3567  1200  CE 00       	adc	a,0x00
3568  1202  DD 77 FF    	ld	(ix-1),a
3569  1205  67          	ld	h,a
3570  1206  6E          	ld	l, (hl)
3571  1207  7B          	ld	a, e
3572  1208  85          	add	a, l
3573  1209  5F          	ld	e, a
3574  120A  79          	ld	a, c
3575  120B  48          	ld	c,b
3576  120C  47          	ld	b,a
3577  120D  C5          	push	bc
3578  120E  7B          	ld	a, e
3579  120F  F5          	push	af
3580  1210  33          	inc	sp
3581  1211  3A 00 00    	ld	a,(_sprite)
3582  1214  F5          	push	af
3583  1215  33          	inc	sp
3584  1216  CD 00 00    	call	_NIRVANAP_spriteT_callee
3585  1219              l_player_lost_life_00111:
3586  1219  2A 00 00    	ld	hl,(_sprite)
3587  121C  26 00       	ld	h,0x00
3588  121E  01 00 00    	ld	bc,_class
3589  1221  09          	add	hl,bc
3590  1222  AF          	xor	a,a
3591  1223  77          	ld	(hl),a
3592  1224  2A 00 00    	ld	hl,(_sprite)
3593  1227  26 00       	ld	h,0x00
3594  1229  01 00 00    	ld	bc,_bullet_col
3595  122C  09          	add	hl,bc
3596  122D  36 FF       	ld	(hl),0xff
3597  122F  21 00 00    	ld	hl,_sprite
3598  1232  7E          	ld	a,(hl)
3599  1233  3C          	inc	a
3600  1234  77          	ld	(hl),a
3601  1235  D6 07       	sub	a,0x07
3602  1237  38 90       	jr	C,l_player_lost_life_00117
3603  1239  3A 00 00    	ld	a,(_player_lives)
3604  123C  B7          	or	a, a
3605  123D  28 09       	jr	Z,l_player_lost_life_00119
3606  123F  21 F4 01    	ld	hl,0x01f4
3607  1242  CD 00 00    	call	_z80_delay_ms_fastcall
3608  1245  CD 00 00    	call	_game_round_init
3609  1248              l_player_lost_life_00119:
3610  1248  DD F9       	ld	sp, ix
3611  124A  DD E1       	pop	ix
3612  124C  C9          	ret
3613  124D              	SECTION code_compiler
3614  124D              ;	---------------------------------
3615  124D              ; Function player_hit
3616  124D              ; ---------------------------------
3617  124D              _player_hit:
3618  124D  7D          	ld	a,l
3619  124E  4D          	ld	c,l
3620  124F  21 00 00    	ld	hl,_player_vita
3621  1252  96          	sub	a, (hl)
3622  1253  30 17       	jr	NC,l_player_hit_00107
3623  1255  3A 00 00    	ld	a,(_game_inmune)
3624  1258  B7          	or	a, a
3625  1259  20 06       	jr	NZ,l_player_hit_00102
3626  125B  21 00 00    	ld	hl,_player_vita
3627  125E  7E          	ld	a, (hl)
3628  125F  91          	sub	a, c
3629  1260  77          	ld	(hl), a
3630  1261              l_player_hit_00102:
3631  1261  2A 00 00    	ld	hl,(_curr_time)
3632  1264  22 00 00    	ld	(_player_hit_time),hl
3633  1267  CD 00 00    	call	_game_update_stats
3634  126A  18 2C       	jr	l_player_hit_00109
3635  126C              l_player_hit_00107:
3636  126C  21 00 00    	ld	hl,_player_vita
3637  126F  36 00       	ld	(hl),0x00
3638  1271  CD 00 00    	call	_game_update_stats
3639  1274  CD CC 10    	call	_player_lost_life
3640  1277  21 00 00    	ld	hl,_player_lives
3641  127A  7E          	ld	a, (hl)
3642  127B  B7          	or	a, a
3643  127C  28 10       	jr	Z,l_player_hit_00104
3644  127E  35          	dec	(hl)
3645  127F  21 00 00    	ld	hl,_player_mana
3646  1282  36 64       	ld	(hl),0x64
3647  1284  21 00 00    	ld	hl,_player_vita
3648  1287  36 64       	ld	(hl),0x64
3649  1289  CD 00 00    	call	_game_update_stats
3650  128C  18 0A       	jr	l_player_hit_00109
3651  128E              l_player_hit_00104:
3652  128E  21 00 00    	ld	hl,_player_lives
3653  1291  36 00       	ld	(hl),0x00
3654  1293  21 00 00    	ld	hl,_game_over
3655  1296  36 01       	ld	(hl),0x01
3656  1298              l_player_hit_00109:
3657  1298  C9          	ret
3658  1299              	SECTION IGNORE
3659  0000              
