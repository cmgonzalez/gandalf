1     0000              MODULE game_player_c
2     0000              
3     0000              ;--------------------------------------------------------
4     0000              ; File Created by SDCC : free open source ANSI-C Compiler
5     0000              ; Version 3.6.5 #9958 (Mac OS X i386)
6     0000              ;--------------------------------------------------------
7     0000              ; Processed by Z88DK
8     0000              ;--------------------------------------------------------
9     0000              
10    0000              	EXTERN __divschar
11    0000              	EXTERN __divschar_callee
12    0000              	EXTERN __divsint
13    0000              	EXTERN __divsint_callee
14    0000              	EXTERN __divslong
15    0000              	EXTERN __divslong_callee
16    0000              	EXTERN __divslonglong
17    0000              	EXTERN __divslonglong_callee
18    0000              	EXTERN __divsuchar
19    0000              	EXTERN __divsuchar_callee
20    0000              	EXTERN __divuchar
21    0000              	EXTERN __divuchar_callee
22    0000              	EXTERN __divuint
23    0000              	EXTERN __divuint_callee
24    0000              	EXTERN __divulong
25    0000              	EXTERN __divulong_callee
26    0000              	EXTERN __divulonglong
27    0000              	EXTERN __divulonglong_callee
28    0000              	EXTERN __divuschar
29    0000              	EXTERN __divuschar_callee
30    0000              	EXTERN __modschar
31    0000              	EXTERN __modschar_callee
32    0000              	EXTERN __modsint
33    0000              	EXTERN __modsint_callee
34    0000              	EXTERN __modslong
35    0000              	EXTERN __modslong_callee
36    0000              	EXTERN __modslonglong
37    0000              	EXTERN __modslonglong_callee
38    0000              	EXTERN __modsuchar
39    0000              	EXTERN __modsuchar_callee
40    0000              	EXTERN __moduchar
41    0000              	EXTERN __moduchar_callee
42    0000              	EXTERN __moduint
43    0000              	EXTERN __moduint_callee
44    0000              	EXTERN __modulong
45    0000              	EXTERN __modulong_callee
46    0000              	EXTERN __modulonglong
47    0000              	EXTERN __modulonglong_callee
48    0000              	EXTERN __moduschar
49    0000              	EXTERN __moduschar_callee
50    0000              	EXTERN __mulint
51    0000              	EXTERN __mulint_callee
52    0000              	EXTERN __mullong
53    0000              	EXTERN __mullong_callee
54    0000              	EXTERN __mullonglong
55    0000              	EXTERN __mullonglong_callee
56    0000              	EXTERN __mulschar
57    0000              	EXTERN __mulschar_callee
58    0000              	EXTERN __mulsuchar
59    0000              	EXTERN __mulsuchar_callee
60    0000              	EXTERN __muluschar
61    0000              	EXTERN __muluschar_callee
62    0000              	EXTERN __rlslonglong
63    0000              	EXTERN __rlslonglong_callee
64    0000              	EXTERN __rlulonglong
65    0000              	EXTERN __rlulonglong_callee
66    0000              	EXTERN __rrslonglong
67    0000              	EXTERN __rrslonglong_callee
68    0000              	EXTERN __rrulonglong
69    0000              	EXTERN __rrulonglong_callee
70    0000              	EXTERN ___sdcc_call_hl
71    0000              	EXTERN ___sdcc_call_iy
72    0000              	EXTERN ___sdcc_enter_ix
73    0000              	EXTERN _banked_call
74    0000              	EXTERN _banked_ret
75    0000              	EXTERN ___fs2schar
76    0000              	EXTERN ___fs2schar_callee
77    0000              	EXTERN ___fs2sint
78    0000              	EXTERN ___fs2sint_callee
79    0000              	EXTERN ___fs2slong
80    0000              	EXTERN ___fs2slong_callee
81    0000              	EXTERN ___fs2slonglong
82    0000              	EXTERN ___fs2slonglong_callee
83    0000              	EXTERN ___fs2uchar
84    0000              	EXTERN ___fs2uchar_callee
85    0000              	EXTERN ___fs2uint
86    0000              	EXTERN ___fs2uint_callee
87    0000              	EXTERN ___fs2ulong
88    0000              	EXTERN ___fs2ulong_callee
89    0000              	EXTERN ___fs2ulonglong
90    0000              	EXTERN ___fs2ulonglong_callee
91    0000              	EXTERN ___fsadd
92    0000              	EXTERN ___fsadd_callee
93    0000              	EXTERN ___fsdiv
94    0000              	EXTERN ___fsdiv_callee
95    0000              	EXTERN ___fseq
96    0000              	EXTERN ___fseq_callee
97    0000              	EXTERN ___fsgt
98    0000              	EXTERN ___fsgt_callee
99    0000              	EXTERN ___fslt
100   0000              	EXTERN ___fslt_callee
101   0000              	EXTERN ___fsmul
102   0000              	EXTERN ___fsmul_callee
103   0000              	EXTERN ___fsneq
104   0000              	EXTERN ___fsneq_callee
105   0000              	EXTERN ___fssub
106   0000              	EXTERN ___fssub_callee
107   0000              	EXTERN ___schar2fs
108   0000              	EXTERN ___schar2fs_callee
109   0000              	EXTERN ___sint2fs
110   0000              	EXTERN ___sint2fs_callee
111   0000              	EXTERN ___slong2fs
112   0000              	EXTERN ___slong2fs_callee
113   0000              	EXTERN ___slonglong2fs
114   0000              	EXTERN ___slonglong2fs_callee
115   0000              	EXTERN ___uchar2fs
116   0000              	EXTERN ___uchar2fs_callee
117   0000              	EXTERN ___uint2fs
118   0000              	EXTERN ___uint2fs_callee
119   0000              	EXTERN ___ulong2fs
120   0000              	EXTERN ___ulong2fs_callee
121   0000              	EXTERN ___ulonglong2fs
122   0000              	EXTERN ___ulonglong2fs_callee
123   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
126   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
127   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
128   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
129   0000              	EXTERN ____sdcc_4_ldi_save_bc
130   0000              	EXTERN ____sdcc_4_push_hlix
131   0000              	EXTERN ____sdcc_4_push_mhl
132   0000              	EXTERN ____sdcc_lib_setmem_hl
133   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
134   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
135   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
136   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
137   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
138   0000              	EXTERN ____sdcc_ll_add_deix_hlix
139   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
140   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
141   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
142   0000              	EXTERN ____sdcc_ll_asr_hlix_a
143   0000              	EXTERN ____sdcc_ll_asr_mbc_a
144   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
145   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
146   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
147   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
148   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
149   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
150   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
151   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
152   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
153   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
155   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
156   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
157   0000              	EXTERN ____sdcc_ll_push_hlix
158   0000              	EXTERN ____sdcc_ll_push_mhl
159   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
160   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
161   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
162   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
163   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
164   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
165   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
166   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
167   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
168   0000              	EXTERN ____sdcc_load_debc_deix
169   0000              	EXTERN ____sdcc_load_dehl_deix
170   0000              	EXTERN ____sdcc_load_debc_mhl
171   0000              	EXTERN ____sdcc_load_hlde_mhl
172   0000              	EXTERN ____sdcc_store_dehl_bcix
173   0000              	EXTERN ____sdcc_store_debc_hlix
174   0000              	EXTERN ____sdcc_store_debc_mhl
175   0000              	EXTERN ____sdcc_cpu_pop_ei
176   0000              	EXTERN ____sdcc_cpu_pop_ei_jp
177   0000              	EXTERN ____sdcc_cpu_push_di
178   0000              	EXTERN ____sdcc_outi
179   0000              	EXTERN ____sdcc_outi_128
180   0000              	EXTERN ____sdcc_outi_256
181   0000              	EXTERN ____sdcc_ldi
182   0000              	EXTERN ____sdcc_ldi_128
183   0000              	EXTERN ____sdcc_ldi_256
184   0000              
185   0000              ;--------------------------------------------------------
186   0000              ; Public variables in this module
187   0000              ;--------------------------------------------------------
188   0000              	GLOBAL _player_check_map
189   0000              	GLOBAL _player_1up
190   0000              	GLOBAL _player_init
191   0000              	GLOBAL _player_turn
192   0000              	GLOBAL _player_move
193   0000              	GLOBAL _player_check_input
194   0000              	GLOBAL _player_move_input
195   0000              	GLOBAL _player_fix_walk_lin
196   0000              	GLOBAL _player_fire
197   0000              	GLOBAL _player_collision
198   0000              	GLOBAL _player_pick_mushroom
199   0000              	GLOBAL _player_check_stairs_vertical
200   0000              	GLOBAL _player_check_stairs
201   0000              	GLOBAL _player_tile
202   0000              	GLOBAL _player_pick_item
203   0000              	GLOBAL _player_hit_platform
204   0000              	GLOBAL _player_hit_platform_clear
205   0000              	GLOBAL _player_score_add
206   0000              	GLOBAL _player_check_floor
207   0000              	GLOBAL _player_gasta_brick
208   0000              	GLOBAL _player_move_jump
209   0000              	GLOBAL _player_open_door
210   0000              	GLOBAL _player_lost_life
211   0000              	GLOBAL _player_hit
212   0000              ;--------------------------------------------------------
213   0000              ; Externals used
214   0000              ;--------------------------------------------------------
215   0000              	GLOBAL _ulltoa_callee
216   0000              	GLOBAL _ulltoa
217   0000              	GLOBAL _strtoull_callee
218   0000              	GLOBAL _strtoull
219   0000              	GLOBAL _strtoll_callee
220   0000              	GLOBAL _strtoll
221   0000              	GLOBAL _lltoa_callee
222   0000              	GLOBAL _lltoa
223   0000              	GLOBAL _llabs_callee
224   0000              	GLOBAL _llabs
225   0000              	GLOBAL __lldivu__callee
226   0000              	GLOBAL __lldivu_
227   0000              	GLOBAL __lldiv__callee
228   0000              	GLOBAL __lldiv_
229   0000              	GLOBAL _atoll_callee
230   0000              	GLOBAL _atoll
231   0000              	GLOBAL _realloc_unlocked_callee
232   0000              	GLOBAL _realloc_unlocked
233   0000              	GLOBAL _malloc_unlocked_fastcall
234   0000              	GLOBAL _malloc_unlocked
235   0000              	GLOBAL _free_unlocked_fastcall
236   0000              	GLOBAL _free_unlocked
237   0000              	GLOBAL _calloc_unlocked_callee
238   0000              	GLOBAL _calloc_unlocked
239   0000              	GLOBAL _aligned_alloc_unlocked_callee
240   0000              	GLOBAL _aligned_alloc_unlocked
241   0000              	GLOBAL _realloc_callee
242   0000              	GLOBAL _realloc
243   0000              	GLOBAL _malloc_fastcall
244   0000              	GLOBAL _malloc
245   0000              	GLOBAL _free_fastcall
246   0000              	GLOBAL _free
247   0000              	GLOBAL _calloc_callee
248   0000              	GLOBAL _calloc
249   0000              	GLOBAL _aligned_alloc_callee
250   0000              	GLOBAL _aligned_alloc
251   0000              	GLOBAL _utoa_callee
252   0000              	GLOBAL _utoa
253   0000              	GLOBAL _ultoa_callee
254   0000              	GLOBAL _ultoa
255   0000              	GLOBAL _system_fastcall
256   0000              	GLOBAL _system
257   0000              	GLOBAL _strtoul_callee
258   0000              	GLOBAL _strtoul
259   0000              	GLOBAL _strtol_callee
260   0000              	GLOBAL _strtol
261   0000              	GLOBAL _strtof_callee
262   0000              	GLOBAL _strtof
263   0000              	GLOBAL _strtod_callee
264   0000              	GLOBAL _strtod
265   0000              	GLOBAL _srand_fastcall
266   0000              	GLOBAL _srand
267   0000              	GLOBAL _rand
268   0000              	GLOBAL _quick_exit_fastcall
269   0000              	GLOBAL _quick_exit
270   0000              	GLOBAL _qsort_callee
271   0000              	GLOBAL _qsort
272   0000              	GLOBAL _ltoa_callee
273   0000              	GLOBAL _ltoa
274   0000              	GLOBAL _labs_fastcall
275   0000              	GLOBAL _labs
276   0000              	GLOBAL _itoa_callee
277   0000              	GLOBAL _itoa
278   0000              	GLOBAL _ftoh_callee
279   0000              	GLOBAL _ftoh
280   0000              	GLOBAL _ftog_callee
281   0000              	GLOBAL _ftog
282   0000              	GLOBAL _ftoe_callee
283   0000              	GLOBAL _ftoe
284   0000              	GLOBAL _ftoa_callee
285   0000              	GLOBAL _ftoa
286   0000              	GLOBAL _exit_fastcall
287   0000              	GLOBAL _exit
288   0000              	GLOBAL _dtoh_callee
289   0000              	GLOBAL _dtoh
290   0000              	GLOBAL _dtog_callee
291   0000              	GLOBAL _dtog
292   0000              	GLOBAL _dtoe_callee
293   0000              	GLOBAL _dtoe
294   0000              	GLOBAL _dtoa_callee
295   0000              	GLOBAL _dtoa
296   0000              	GLOBAL _bsearch_callee
297   0000              	GLOBAL _bsearch
298   0000              	GLOBAL _atol_fastcall
299   0000              	GLOBAL _atol
300   0000              	GLOBAL _atoi_fastcall
301   0000              	GLOBAL _atoi
302   0000              	GLOBAL _atof_fastcall
303   0000              	GLOBAL _atof
304   0000              	GLOBAL _atexit_fastcall
305   0000              	GLOBAL _atexit
306   0000              	GLOBAL _at_quick_exit_fastcall
307   0000              	GLOBAL _at_quick_exit
308   0000              	GLOBAL _abs_fastcall
309   0000              	GLOBAL _abs
310   0000              	GLOBAL _abort
311   0000              	GLOBAL __strtou__callee
312   0000              	GLOBAL __strtou_
313   0000              	GLOBAL __strtoi__callee
314   0000              	GLOBAL __strtoi_
315   0000              	GLOBAL __random_uniform_xor_8__fastcall
316   0000              	GLOBAL __random_uniform_xor_8_
317   0000              	GLOBAL __random_uniform_xor_32__fastcall
318   0000              	GLOBAL __random_uniform_xor_32_
319   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
320   0000              	GLOBAL __random_uniform_cmwc_8_
321   0000              	GLOBAL __shellsort__callee
322   0000              	GLOBAL __shellsort_
323   0000              	GLOBAL __quicksort__callee
324   0000              	GLOBAL __quicksort_
325   0000              	GLOBAL __insertion_sort__callee
326   0000              	GLOBAL __insertion_sort_
327   0000              	GLOBAL __ldivu__callee
328   0000              	GLOBAL __ldivu_
329   0000              	GLOBAL __ldiv__callee
330   0000              	GLOBAL __ldiv_
331   0000              	GLOBAL __divu__callee
332   0000              	GLOBAL __divu_
333   0000              	GLOBAL __div__callee
334   0000              	GLOBAL __div_
335   0000              	GLOBAL _NIRVANAP_drawTW_raw_callee
336   0000              	GLOBAL _NIRVANAP_drawTW_raw
337   0000              	GLOBAL _NIRVANAP_drawTW_callee
338   0000              	GLOBAL _NIRVANAP_drawTW
339   0000              	GLOBAL _NIRVANAP_drawW_raw_callee
340   0000              	GLOBAL _NIRVANAP_drawW_raw
341   0000              	GLOBAL _NIRVANAP_drawW_callee
342   0000              	GLOBAL _NIRVANAP_drawW
343   0000              	GLOBAL _NIRVANAP_spriteT_callee
344   0000              	GLOBAL _NIRVANAP_spriteT
345   0000              	GLOBAL _NIRVANAP_fillC_callee
346   0000              	GLOBAL _NIRVANAP_fillC
347   0000              	GLOBAL _NIRVANAP_readC_callee
348   0000              	GLOBAL _NIRVANAP_readC
349   0000              	GLOBAL _NIRVANAP_paintC_callee
350   0000              	GLOBAL _NIRVANAP_paintC
351   0000              	GLOBAL _NIRVANAP_printC_callee
352   0000              	GLOBAL _NIRVANAP_printC
353   0000              	GLOBAL _NIRVANAP_fillT_raw_callee
354   0000              	GLOBAL _NIRVANAP_fillT_raw
355   0000              	GLOBAL _NIRVANAP_fillT_callee
356   0000              	GLOBAL _NIRVANAP_fillT
357   0000              	GLOBAL _NIRVANAP_drawT_raw_callee
358   0000              	GLOBAL _NIRVANAP_drawT_raw
359   0000              	GLOBAL _NIRVANAP_drawT_callee
360   0000              	GLOBAL _NIRVANAP_drawT
361   0000              	GLOBAL _NIRVANAP_stop
362   0000              	GLOBAL _NIRVANAP_start
363   0000              	GLOBAL _debug3
364   0000              	GLOBAL _debug2
365   0000              	GLOBAL _debug
366   0000              	GLOBAL _zx_print_str
367   0000              	GLOBAL _zx_print_int
368   0000              	GLOBAL _zx_print_chr
369   0000              	GLOBAL _zx_print_bonus_time
370   0000              	GLOBAL _zx_isr
371   0000              	GLOBAL _z80_otdr_callee
372   0000              	GLOBAL _z80_otdr
373   0000              	GLOBAL _z80_otir_callee
374   0000              	GLOBAL _z80_otir
375   0000              	GLOBAL _z80_outp_callee
376   0000              	GLOBAL _z80_outp
377   0000              	GLOBAL _z80_indr_callee
378   0000              	GLOBAL _z80_indr
379   0000              	GLOBAL _z80_inir_callee
380   0000              	GLOBAL _z80_inir
381   0000              	GLOBAL _z80_inp_fastcall
382   0000              	GLOBAL _z80_inp
383   0000              	GLOBAL _z80_set_int_state_fastcall
384   0000              	GLOBAL _z80_set_int_state
385   0000              	GLOBAL _z80_get_int_state
386   0000              	GLOBAL _z80_delay_tstate_fastcall
387   0000              	GLOBAL _z80_delay_tstate
388   0000              	GLOBAL _z80_delay_ms_fastcall
389   0000              	GLOBAL _z80_delay_ms
390   0000              	GLOBAL _im2_remove_generic_callback_callee
391   0000              	GLOBAL _im2_remove_generic_callback
392   0000              	GLOBAL _im2_prepend_generic_callback_callee
393   0000              	GLOBAL _im2_prepend_generic_callback
394   0000              	GLOBAL _im2_append_generic_callback_callee
395   0000              	GLOBAL _im2_append_generic_callback
396   0000              	GLOBAL _im2_create_generic_isr_8080_callee
397   0000              	GLOBAL _im2_create_generic_isr_8080
398   0000              	GLOBAL _im2_create_generic_isr_callee
399   0000              	GLOBAL _im2_create_generic_isr
400   0000              	GLOBAL _im2_install_isr_callee
401   0000              	GLOBAL _im2_install_isr
402   0000              	GLOBAL _im2_init_fastcall
403   0000              	GLOBAL _im2_init
404   0000              	GLOBAL _intrinsic_swap_word_32_fastcall
405   0000              	GLOBAL _intrinsic_swap_word_32
406   0000              	GLOBAL _intrinsic_swap_endian_32_fastcall
407   0000              	GLOBAL _intrinsic_swap_endian_32
408   0000              	GLOBAL _intrinsic_swap_endian_16_fastcall
409   0000              	GLOBAL _intrinsic_swap_endian_16
410   0000              	GLOBAL _intrinsic_return_de
411   0000              	GLOBAL _intrinsic_return_bc
412   0000              	GLOBAL _intrinsic_exx
413   0000              	GLOBAL _intrinsic_ex_de_hl
414   0000              	GLOBAL _intrinsic_nop
415   0000              	GLOBAL _intrinsic_im_2
416   0000              	GLOBAL _intrinsic_im_1
417   0000              	GLOBAL _intrinsic_im_0
418   0000              	GLOBAL _intrinsic_retn
419   0000              	GLOBAL _intrinsic_reti
420   0000              	GLOBAL _intrinsic_halt
421   0000              	GLOBAL _intrinsic_ei
422   0000              	GLOBAL _intrinsic_di
423   0000              	GLOBAL _intrinsic_stub
424   0000              	GLOBAL _intrinsic_outi
425   0000              	GLOBAL _intrinsic_ldi
426   0000              	GLOBAL _zx_pattern_fill_callee
427   0000              	GLOBAL _zx_pattern_fill
428   0000              	GLOBAL _zx_saddrpup_fastcall
429   0000              	GLOBAL _zx_saddrpup
430   0000              	GLOBAL _zx_saddrpright_callee
431   0000              	GLOBAL _zx_saddrpright
432   0000              	GLOBAL _zx_saddrpleft_callee
433   0000              	GLOBAL _zx_saddrpleft
434   0000              	GLOBAL _zx_saddrpdown_fastcall
435   0000              	GLOBAL _zx_saddrpdown
436   0000              	GLOBAL _zx_saddrcup_fastcall
437   0000              	GLOBAL _zx_saddrcup
438   0000              	GLOBAL _zx_saddrcright_fastcall
439   0000              	GLOBAL _zx_saddrcright
440   0000              	GLOBAL _zx_saddrcleft_fastcall
441   0000              	GLOBAL _zx_saddrcleft
442   0000              	GLOBAL _zx_saddrcdown_fastcall
443   0000              	GLOBAL _zx_saddrcdown
444   0000              	GLOBAL _zx_saddr2py_fastcall
445   0000              	GLOBAL _zx_saddr2py
446   0000              	GLOBAL _zx_saddr2px_fastcall
447   0000              	GLOBAL _zx_saddr2px
448   0000              	GLOBAL _zx_saddr2cy_fastcall
449   0000              	GLOBAL _zx_saddr2cy
450   0000              	GLOBAL _zx_saddr2cx_fastcall
451   0000              	GLOBAL _zx_saddr2cx
452   0000              	GLOBAL _zx_saddr2aaddr_fastcall
453   0000              	GLOBAL _zx_saddr2aaddr
454   0000              	GLOBAL _zx_py2saddr_fastcall
455   0000              	GLOBAL _zx_py2saddr
456   0000              	GLOBAL _zx_py2aaddr_fastcall
457   0000              	GLOBAL _zx_py2aaddr
458   0000              	GLOBAL _zx_pxy2saddr_callee
459   0000              	GLOBAL _zx_pxy2saddr
460   0000              	GLOBAL _zx_pxy2aaddr_callee
461   0000              	GLOBAL _zx_pxy2aaddr
462   0000              	GLOBAL _zx_px2bitmask_fastcall
463   0000              	GLOBAL _zx_px2bitmask
464   0000              	GLOBAL _zx_cy2saddr_fastcall
465   0000              	GLOBAL _zx_cy2saddr
466   0000              	GLOBAL _zx_cy2aaddr_fastcall
467   0000              	GLOBAL _zx_cy2aaddr
468   0000              	GLOBAL _zx_cxy2saddr_callee
469   0000              	GLOBAL _zx_cxy2saddr
470   0000              	GLOBAL _zx_cxy2aaddr_callee
471   0000              	GLOBAL _zx_cxy2aaddr
472   0000              	GLOBAL _zx_bitmask2px_fastcall
473   0000              	GLOBAL _zx_bitmask2px
474   0000              	GLOBAL _zx_aaddrcup_fastcall
475   0000              	GLOBAL _zx_aaddrcup
476   0000              	GLOBAL _zx_aaddrcright_fastcall
477   0000              	GLOBAL _zx_aaddrcright
478   0000              	GLOBAL _zx_aaddrcleft_fastcall
479   0000              	GLOBAL _zx_aaddrcleft
480   0000              	GLOBAL _zx_aaddrcdown_fastcall
481   0000              	GLOBAL _zx_aaddrcdown
482   0000              	GLOBAL _zx_aaddr2saddr_fastcall
483   0000              	GLOBAL _zx_aaddr2saddr
484   0000              	GLOBAL _zx_aaddr2py_fastcall
485   0000              	GLOBAL _zx_aaddr2py
486   0000              	GLOBAL _zx_aaddr2px_fastcall
487   0000              	GLOBAL _zx_aaddr2px
488   0000              	GLOBAL _zx_aaddr2cy_fastcall
489   0000              	GLOBAL _zx_aaddr2cy
490   0000              	GLOBAL _zx_aaddr2cx_fastcall
491   0000              	GLOBAL _zx_aaddr2cx
492   0000              	GLOBAL _zx_visit_wc_pix_callee
493   0000              	GLOBAL _zx_visit_wc_pix
494   0000              	GLOBAL _zx_visit_wc_attr_callee
495   0000              	GLOBAL _zx_visit_wc_attr
496   0000              	GLOBAL _zx_scroll_wc_up_pix_callee
497   0000              	GLOBAL _zx_scroll_wc_up_pix
498   0000              	GLOBAL _zx_scroll_wc_up_attr_callee
499   0000              	GLOBAL _zx_scroll_wc_up_attr
500   0000              	GLOBAL _zx_scroll_wc_up_callee
501   0000              	GLOBAL _zx_scroll_wc_up
502   0000              	GLOBAL _zx_scroll_up_pix_callee
503   0000              	GLOBAL _zx_scroll_up_pix
504   0000              	GLOBAL _zx_scroll_up_attr_callee
505   0000              	GLOBAL _zx_scroll_up_attr
506   0000              	GLOBAL _zx_scroll_up_callee
507   0000              	GLOBAL _zx_scroll_up
508   0000              	GLOBAL _zx_cls_wc_pix_callee
509   0000              	GLOBAL _zx_cls_wc_pix
510   0000              	GLOBAL _zx_cls_wc_attr_callee
511   0000              	GLOBAL _zx_cls_wc_attr
512   0000              	GLOBAL _zx_cls_wc_callee
513   0000              	GLOBAL _zx_cls_wc
514   0000              	GLOBAL _zx_cls_pix_fastcall
515   0000              	GLOBAL _zx_cls_pix
516   0000              	GLOBAL _zx_cls_attr_fastcall
517   0000              	GLOBAL _zx_cls_attr
518   0000              	GLOBAL _zx_cls_fastcall
519   0000              	GLOBAL _zx_cls
520   0000              	GLOBAL _zx_border_fastcall
521   0000              	GLOBAL _zx_border
522   0000              	GLOBAL _spr_btile_paint_back
523   0000              	GLOBAL _spr_explode_bullet
524   0000              	GLOBAL _spr_init_anim_bullets
525   0000              	GLOBAL _spr_turn_horizontal
526   0000              	GLOBAL _spr_play_bullets
527   0000              	GLOBAL _spr_play_anim
528   0000              	GLOBAL _spr_add_anim
529   0000              	GLOBAL _spr_clear_scr
530   0000              	GLOBAL _spr_page_map
531   0000              	GLOBAL _spr_page_down
532   0000              	GLOBAL _spr_page_up
533   0000              	GLOBAL _spr_page_right
534   0000              	GLOBAL _spr_page_left
535   0000              	GLOBAL _spr_tile_paint
536   0000              	GLOBAL _spr_calc_hor
537   0000              	GLOBAL _spr_draw_index
538   0000              	GLOBAL _spr_brick_anim
539   0000              	GLOBAL _spr_back_repaint
540   0000              	GLOBAL _spr_tile
541   0000              	GLOBAL _spr_destroy
542   0000              	GLOBAL _spr_tile_dir
543   0000              	GLOBAL _spr_redraw
544   0000              	GLOBAL _spr_move_left
545   0000              	GLOBAL _spr_move_right
546   0000              	GLOBAL _spr_move_horizontal
547   0000              	GLOBAL _spr_move_down
548   0000              	GLOBAL _spr_move_up
549   0000              	GLOBAL _spr_calc_index
550   0000              	GLOBAL _spr_chktime
551   0000              	GLOBAL _sound_hit_brick
552   0000              	GLOBAL _sound_hit_enemy
553   0000              	GLOBAL _sound_kill
554   0000              	GLOBAL _sound_enter_enemy
555   0000              	GLOBAL _sound_coin
556   0000              	GLOBAL _sound_jump
557   0000              	GLOBAL _sound_slide
558   0000              	GLOBAL _menu_define_key
559   0000              	GLOBAL _menu_redefine
560   0000              	GLOBAL _menu_main_print
561   0000              	GLOBAL _menu_main
562   0000              	GLOBAL _game_match_back
563   0000              	GLOBAL _game_attribs
564   0000              	GLOBAL _game_boss_clear
565   0000              	GLOBAL _game_obj_clear
566   0000              	GLOBAL _game_obj_chk
567   0000              	GLOBAL _game_obj_set
568   0000              	GLOBAL _game_shoot_fire_boss
569   0000              	GLOBAL _game_shoot_fire
570   0000              	GLOBAL _game_add_enemy
571   0000              	GLOBAL _game_print_header
572   0000              	GLOBAL _game_check_time
573   0000              	GLOBAL _game_rotate_attrib_osd
574   0000              	GLOBAL _game_rotate_attrib
575   0000              	GLOBAL _game_colour_message
576   0000              	GLOBAL _game_paint_attrib_lin_osd
577   0000              	GLOBAL _game_paint_attrib_lin_h
578   0000              	GLOBAL _game_paint_attrib_lin
579   0000              	GLOBAL _game_print_score
580   0000              	GLOBAL _game_check_cell
581   0000              	GLOBAL _game_check_map
582   0000              	GLOBAL _game_loop
583   0000              	GLOBAL _game_round_init
584   0000              	GLOBAL _game_start_timer
585   0000              	GLOBAL _game_update_stats
586   0000              	GLOBAL _game_print_footer
587   0000              	GLOBAL _game_fill_row
588   0000              	GLOBAL _game_fps
589   0000              	GLOBAL _game_respawn
590   0000              	GLOBAL _game_draw_screen
591   0000              	GLOBAL _boss_turn
592   0000              	GLOBAL _enemy_avoid_dead
593   0000              	GLOBAL _enemy_avoid_fall
594   0000              	GLOBAL _enemy_respawn
595   0000              	GLOBAL _enemy_init
596   0000              	GLOBAL _enemy_move
597   0000              	GLOBAL _enemy_turn
598   0000              	GLOBAL _enemy_hit
599   0000              	GLOBAL _enemy_static
600   0000              	GLOBAL _enemy_walk
601   0000              	GLOBAL _enemy_horizontal
602   0000              	GLOBAL _enemy_vertical
603   0000              	GLOBAL _ay_fx_play
604   0000              	GLOBAL _ay_midi_play
605   0000              	GLOBAL _ay_is_playing
606   0000              	GLOBAL _ay_reset
607   0000              	GLOBAL _test_func
608   0000              	GLOBAL _test_proc
609   0000              	GLOBAL _in_mouse_kempston_wheel_delta
610   0000              	GLOBAL _in_mouse_kempston_wheel
611   0000              	GLOBAL _in_mouse_kempston_callee
612   0000              	GLOBAL _in_mouse_kempston
613   0000              	GLOBAL _in_mouse_kempston_setpos_callee
614   0000              	GLOBAL _in_mouse_kempston_setpos
615   0000              	GLOBAL _in_mouse_kempston_reset
616   0000              	GLOBAL _in_mouse_kempston_init
617   0000              	GLOBAL _in_mouse_amx_wheel_delta
618   0000              	GLOBAL _in_mouse_amx_wheel
619   0000              	GLOBAL _in_mouse_amx_callee
620   0000              	GLOBAL _in_mouse_amx
621   0000              	GLOBAL _in_mouse_amx_setpos_callee
622   0000              	GLOBAL _in_mouse_amx_setpos
623   0000              	GLOBAL _in_mouse_amx_reset
624   0000              	GLOBAL _in_mouse_amx_init_callee
625   0000              	GLOBAL _in_mouse_amx_init
626   0000              	GLOBAL _in_stick_sinclair2
627   0000              	GLOBAL _in_stick_sinclair1
628   0000              	GLOBAL _in_stick_kempston
629   0000              	GLOBAL _in_stick_fuller
630   0000              	GLOBAL _in_stick_cursor
631   0000              	GLOBAL _in_stick_keyboard_fastcall
632   0000              	GLOBAL _in_stick_keyboard
633   0000              	GLOBAL _in_wait_nokey
634   0000              	GLOBAL _in_wait_key
635   0000              	GLOBAL _in_test_key
636   0000              	GLOBAL _in_pause_fastcall
637   0000              	GLOBAL _in_pause
638   0000              	GLOBAL _in_key_scancode_fastcall
639   0000              	GLOBAL _in_key_scancode
640   0000              	GLOBAL _in_key_pressed_fastcall
641   0000              	GLOBAL _in_key_pressed
642   0000              	GLOBAL _in_inkey
643   0000              	GLOBAL _NIRVANAP_CHAR_TABLE
644   0000              	GLOBAL _NIRVANAP_WIDE_IMAGES
645   0000              	GLOBAL _NIRVANAP_TILE_IMAGES
646   0000              	GLOBAL _NIRVANAP_HOLE
647   0000              	GLOBAL _NIRVANAP_ISR_HOOK
648   0000              	GLOBAL _player_lvl_table
649   0000              	GLOBAL _map_paper_last
650   0000              	GLOBAL _map_paper_clr
651   0000              	GLOBAL _map_paper
652   0000              	GLOBAL _draw_count
653   0000              	GLOBAL _g_player_hit_right
654   0000              	GLOBAL _g_player_hit_left
655   0000              	GLOBAL _bullet_count
656   0000              	GLOBAL _spr_hack
657   0000              	GLOBAL _boss_stat
658   0000              	GLOBAL _boss_time_fire
659   0000              	GLOBAL _boss_time
660   0000              	GLOBAL _boss_tile
661   0000              	GLOBAL _boss_inc
662   0000              	GLOBAL _boss_col
663   0000              	GLOBAL _boss_lin
664   0000              	GLOBAL _bullet_vel
665   0000              	GLOBAL _bullet_frames
666   0000              	GLOBAL _bullet_colint
667   0000              	GLOBAL _bullet_dir
668   0000              	GLOBAL _bullet_tile
669   0000              	GLOBAL _bullet_col
670   0000              	GLOBAL _bullet_lin
671   0000              	GLOBAL _bullet_col0
672   0000              	GLOBAL _bullet_lin0
673   0000              	GLOBAL _bullet_max
674   0000              	GLOBAL _bullet_class
675   0000              	GLOBAL _mush_class
676   0000              	GLOBAL _mush_index
677   0000              	GLOBAL _anim_count
678   0000              	GLOBAL _anim_respanwn
679   0000              	GLOBAL _anim_loop
680   0000              	GLOBAL _anim_end
681   0000              	GLOBAL _anim_int
682   0000              	GLOBAL _anim_tile
683   0000              	GLOBAL _anim_col
684   0000              	GLOBAL _anim_lin
685   0000              	GLOBAL _map_heigth
686   0000              	GLOBAL _map_width
687   0000              	GLOBAL _scr_curr
688   0000              	GLOBAL _scr_obj1
689   0000              	GLOBAL _scr_obj0
690   0000              	GLOBAL _scr_map
691   0000              	GLOBAL _sprite_speed_alt
692   0000              	GLOBAL _sprite_frames
693   0000              	GLOBAL _sprite_speed
694   0000              	GLOBAL _screen_ink
695   0000              	GLOBAL _screen_paper
696   0000              	GLOBAL _player_onstair
697   0000              	GLOBAL _game_start_scr
698   0000              	GLOBAL _game_respawn_tile
699   0000              	GLOBAL _game_respawn_index
700   0000              	GLOBAL _game_respawn_time
701   0000              	GLOBAL _game_score_top
702   0000              	GLOBAL _player_coins
703   0000              	GLOBAL _player_lives
704   0000              	GLOBAL _game_over
705   0000              	GLOBAL _game_sound
706   0000              	GLOBAL _game_inmune
707   0000              	GLOBAL _game_god_mode
708   0000              	GLOBAL _sprite_curr_index
709   0000              	GLOBAL _spr_count
710   0000              	GLOBAL _bullet_time
711   0000              	GLOBAL _anim_time
712   0000              	GLOBAL _frame_time
713   0000              	GLOBAL _curr_time
714   0000              	GLOBAL _s_state
715   0000              	GLOBAL _attrib_osd
716   0000              	GLOBAL _attrib_hl
717   0000              	GLOBAL _attrib
718   0000              	GLOBAL _zx_val_asm
719   0000              	GLOBAL _enemies
720   0000              	GLOBAL _tmp_ui
721   0000              	GLOBAL _tmp_sc
722   0000              	GLOBAL _tmp_uc
723   0000              	GLOBAL _tmp1
724   0000              	GLOBAL _tmp0
725   0000              	GLOBAL _tmp
726   0000              	GLOBAL _index1
727   0000              	GLOBAL _index0
728   0000              	GLOBAL _loop_count
729   0000              	GLOBAL _s_col1
730   0000              	GLOBAL _s_col0
731   0000              	GLOBAL _s_lin1
732   0000              	GLOBAL _s_lin0
733   0000              	GLOBAL _s_tile1
734   0000              	GLOBAL _s_tile0
735   0000              	GLOBAL _player_brick_time
736   0000              	GLOBAL _player_hit_count
737   0000              	GLOBAL _sprite_horizontal_check
738   0000              	GLOBAL _sprite_on_air
739   0000              	GLOBAL _sprite
740   0000              	GLOBAL _fps
741   0000              	GLOBAL _game_2buttons
742   0000              	GLOBAL _game_respawn_curr_time
743   0000              	GLOBAL _game_worldup
744   0000              	GLOBAL _game_mush_count
745   0000              	GLOBAL _game_boss_fix
746   0000              	GLOBAL _game_boss_hit
747   0000              	GLOBAL _game_boss_alive
748   0000              	GLOBAL _game_boss
749   0000              	GLOBAL _game_world
750   0000              	GLOBAL _game_gravity
751   0000              	GLOBAL _player_anim_stair
752   0000              	GLOBAL _player_hit_time
753   0000              	GLOBAL _player_lin_scr
754   0000              	GLOBAL _player_col_scr
755   0000              	GLOBAL _player_lvl
756   0000              	GLOBAL _player_int
757   0000              	GLOBAL _player_str
758   0000              	GLOBAL _player_max_vita
759   0000              	GLOBAL _player_max_mana
760   0000              	GLOBAL _player_vita
761   0000              	GLOBAL _player_mana
762   0000              	GLOBAL _player_keys
763   0000              	GLOBAL _player_vel_inc
764   0000              	GLOBAL _player_vel_y1
765   0000              	GLOBAL _player_vel_y0
766   0000              	GLOBAL _player_vel_y
767   0000              	GLOBAL _player_vel_x
768   0000              	GLOBAL _player_joy
769   0000              	GLOBAL _player_score
770   0000              	GLOBAL _last_time
771   0000              	GLOBAL _player_slide
772   0000              	GLOBAL _spr_timer
773   0000              	GLOBAL _jump_lin
774   0000              	GLOBAL _player_hit_col
775   0000              	GLOBAL _player_hit_lin
776   0000              	GLOBAL _colint
777   0000              	GLOBAL _col
778   0000              	GLOBAL _lin
779   0000              	GLOBAL _tile
780   0000              	GLOBAL _state_a
781   0000              	GLOBAL _state
782   0000              	GLOBAL _class
783   0000              	GLOBAL _tbuffer
784   0000              	GLOBAL _dirs_alt
785   0000              	GLOBAL _dirs
786   0000              	GLOBAL _k2
787   0000              	GLOBAL _k1
788   0000              	GLOBAL _joyfunc2
789   0000              	GLOBAL _joyfunc1
790   0000              	GLOBAL _btiles
791   0000              	GLOBAL _spec128
792   0000              	GLOBAL _GLOBAL_ZX_PORT_7FFD
793   0000              	GLOBAL _GLOBAL_ZX_PORT_1FFD
794   0000              	GLOBAL _GLOBAL_ZX_PORT_FE
795   0000              	GLOBAL _ay_effect_20
796   0000              	GLOBAL _ay_effect_19
797   0000              	GLOBAL _ay_effect_18
798   0000              	GLOBAL _ay_effect_17
799   0000              	GLOBAL _ay_effect_16
800   0000              	GLOBAL _ay_effect_15
801   0000              	GLOBAL _ay_effect_14
802   0000              	GLOBAL _ay_effect_13
803   0000              	GLOBAL _ay_effect_12
804   0000              	GLOBAL _ay_effect_11
805   0000              	GLOBAL _ay_effect_10
806   0000              	GLOBAL _ay_effect_09
807   0000              	GLOBAL _ay_effect_08
808   0000              	GLOBAL _ay_effect_07
809   0000              	GLOBAL _ay_effect_06
810   0000              	GLOBAL _ay_effect_05
811   0000              	GLOBAL _ay_effect_04
812   0000              	GLOBAL _ay_effect_03
813   0000              	GLOBAL _ay_effect_02
814   0000              	GLOBAL _ay_effect_01
815   0000              	GLOBAL _pb_midi_phase_1
816   0000              	GLOBAL _pb_midi_title
817   0000              	GLOBAL _control_method
818   0000              	GLOBAL _world1_h
819   0000              	GLOBAL _world1_w
820   0000              	GLOBAL _world1
821   0000              	GLOBAL _paper1
822   0000              	GLOBAL _lenght1
823   0000              	GLOBAL _start_scr1
824   0000              	GLOBAL _world0_h
825   0000              	GLOBAL _world0_w
826   0000              	GLOBAL _world0
827   0000              	GLOBAL _paper0
828   0000              	GLOBAL _lenght0
829   0000              	GLOBAL _start_scr0
830   0000              ;--------------------------------------------------------
831   0000              ; special function registers
832   0000              ;--------------------------------------------------------
833   0000              defc _IO_FE	=	0x00fe
834   0000              defc _IO_1FFD	=	0x1ffd
835   0000              defc _IO_7FFD	=	0x7ffd
836   0000              ;--------------------------------------------------------
837   0000              ; ram data
838   0000              ;--------------------------------------------------------
839   0000              	SECTION bss_compiler
840   0000              ;--------------------------------------------------------
841   0000              ; ram data
842   0000              ;--------------------------------------------------------
843   0000              
844   0000              IF 0
845   0000              
846   0000              ; .area _INITIALIZED removed by z88dk
847   0000              
848   0000              
849   0000              ENDIF
850   0000              
851   0000              ;--------------------------------------------------------
852   0000              ; absolute external ram data
853   0000              ;--------------------------------------------------------
854   0000              	SECTION IGNORE
855   0000              ;--------------------------------------------------------
856   0000              ; global & static initialisations
857   0000              ;--------------------------------------------------------
858   0000              	SECTION code_crt_init
859   0000              ;--------------------------------------------------------
860   0000              ; Home
861   0000              ;--------------------------------------------------------
862   0000              	SECTION IGNORE
863   0000              ;--------------------------------------------------------
864   0000              ; code
865   0000              ;--------------------------------------------------------
866   0000              	SECTION code_compiler
867   0000              ;	---------------------------------
868   0000              ; Function player_init
869   0000              ; ---------------------------------
870   0000              _player_init:
871   0000  CD 00 00    	call	___sdcc_enter_ix
872   0003  21 07 00    	ld	hl, +(_class + 0x0007)
873   0006  36 00       	ld	(hl),0x00
874   0008  21 07 00    	ld	hl, +(_tile + 0x0007)
875   000B  DD 7E 06    	ld	a,(ix+6)
876   000E  77          	ld	(hl), a
877   000F  21 07 00    	ld	hl, +(_lin + 0x0007)
878   0012  DD 7E 04    	ld	a,(ix+4)
879   0015  77          	ld	(hl), a
880   0016  21 07 00    	ld	hl, +(_col + 0x0007)
881   0019  DD 7E 05    	ld	a,(ix+5)
882   001C  77          	ld	(hl), a
883   001D  21 07 00    	ld	hl, +(_colint + 0x0007)
884   0020  36 00       	ld	(hl),0x00
885   0022  21 07 00    	ld	hl, +(_state + 0x0007)
886   0025  36 00       	ld	(hl),0x00
887   0027  01 07 00    	ld	bc,_state_a+7
888   002A  AF          	xor	a, a
889   002B  02          	ld	(bc), a
890   002C  21 07 00    	ld	hl, +(_jump_lin + 0x0007)
891   002F  DD 7E 04    	ld	a,(ix+4)
892   0032  77          	ld	(hl), a
893   0033  ED 5B 00 00 	ld	de,(_curr_time)
894   0037  ED 53 0E 00 	ld	(_last_time + 0x000e),de
895   003B  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
896   003E  36 00       	ld	(hl),0x00
897   0040  0A          	ld	a, (bc)
898   0041  F6 11       	or	a,+(0x01|0x10)
899   0043  02          	ld	(bc),a
900   0044  21 00 00    	ld	hl,_player_hit_col
901   0047  36 00       	ld	(hl),0x00
902   0049  21 00 00    	ld	hl,_player_hit_lin
903   004C  36 00       	ld	(hl),0x00
904   004E  21 00 00    	ld	hl,_player_slide
905   0051  36 00       	ld	(hl),0x00
906   0053  DD 66 05    	ld	h,(ix+5)
907   0056  DD 6E 04    	ld	l,(ix+4)
908   0059  E5          	push	hl
909   005A  DD 56 06    	ld	d,(ix+6)
910   005D  1E 07       	ld	e,0x07
911   005F  D5          	push	de
912   0060  CD 00 00    	call	_NIRVANAP_spriteT_callee
913   0063  DD E1       	pop	ix
914   0065  C9          	ret
915   0066              	SECTION code_compiler
916   0066              ;	---------------------------------
917   0066              ; Function player_turn
918   0066              ; ---------------------------------
919   0066              _player_turn:
920   0066  21 00 00    	ld	hl,_sprite
921   0069  CD 00 00    	call	_spr_chktime
922   006C  7D          	ld	a, l
923   006D  B7          	or	a, a
924   006E  C8          	ret	Z
925   006F  21 00 00    	ld	hl,_k1
926   0072  E5          	push	hl
927   0073  2A 00 00    	ld	hl,(_joyfunc1)
928   0076  CD 00 00    	call	___sdcc_call_hl
929   0079  F1          	pop	af
930   007A  7D          	ld	a,l
931   007B  32 00 00    	ld	(_dirs),a
932   007E  21 00 00    	ld	hl,_k2
933   0081  E5          	push	hl
934   0082  2A 00 00    	ld	hl,(_joyfunc2)
935   0085  CD 00 00    	call	___sdcc_call_hl
936   0088  F1          	pop	af
937   0089  7D          	ld	a,l
938   008A  32 00 00    	ld	(_dirs_alt),a
939   008D  CD 93 00    	call	_player_move
940   0090  C3 AD 03    	jp  _player_collision
941   0093              	SECTION code_compiler
942   0093              ;	---------------------------------
943   0093              ; Function player_move
944   0093              ; ---------------------------------
945   0093              _player_move:
946   0093  3A 07 00    	ld	a,(_lin + 0x0007)
947   0096  32 00 00    	ld	(_s_lin0),a
948   0099  3A 07 00    	ld	a,(_col + 0x0007)
949   009C  32 00 00    	ld	(_s_col0),a
950   009F  21 07 00    	ld	hl,+(_tile + 0x0007)
951   00A2  4E          	ld	c, (hl)
952   00A3  21 07 00    	ld	hl,+(_colint + 0x0007)
953   00A6  46          	ld	b, (hl)
954   00A7  79          	ld	a, c
955   00A8  80          	add	a, b
956   00A9  32 00 00    	ld	(_s_tile0),a
957   00AC  3A 07 00    	ld	a,(_state + 0x0007)
958   00AF  32 00 00    	ld	(_s_state),a
959   00B2  21 00 00    	ld	hl,_s_state
960   00B5  CB 46       	bit	0, (hl)
961   00B7  20 07       	jr	NZ,l_player_move_00113
962   00B9  21 00 00    	ld	hl,_s_state
963   00BC  CB 4E       	bit	1, (hl)
964   00BE  28 49       	jr	Z,l_player_move_00114
965   00C0              l_player_move_00113:
966   00C0  CD 42 03    	call	_player_fire
967   00C3  3A 00 00    	ld	a,(_player_vel_y)
968   00C6  21 00 00    	ld	hl,_player_vel_y1
969   00C9  96          	sub	a, (hl)
970   00CA  E2 CF 00    	jp	PO, l_player_move_00162
971   00CD  EE 80       	xor	a,0x80
972   00CF              l_player_move_00162:
973   00CF  F2 F2 00    	jp	P, l_player_move_00106
974   00D2  21 00 00    	ld	hl,_dirs
975   00D5  CB 56       	bit	2, (hl)
976   00D7  28 09       	jr	Z,l_player_move_00102
977   00D9  21 00 00    	ld	hl,_s_state
978   00DC  7E          	ld	a,(hl)
979   00DD  F6 08       	or	a,0x08
980   00DF  E6 FB       	and	a,0xfb
981   00E1  77          	ld	(hl),a
982   00E2              l_player_move_00102:
983   00E2  21 00 00    	ld	hl,_dirs
984   00E5  CB 4E       	bit	1, (hl)
985   00E7  28 09       	jr	Z,l_player_move_00106
986   00E9  21 00 00    	ld	hl,_s_state
987   00EC  7E          	ld	a,(hl)
988   00ED  F6 04       	or	a,0x04
989   00EF  E6 F7       	and	a,0xf7
990   00F1  77          	ld	(hl),a
991   00F2              l_player_move_00106:
992   00F2  CD 06 0D    	call	_player_move_jump
993   00F5  7D          	ld	a, l
994   00F6  B7          	or	a, a
995   00F7  28 1C       	jr	Z,l_player_move_00115
996   00F9  3A 00 00    	ld	a,(_player_onstair)
997   00FC  B7          	or	a, a
998   00FD  20 16       	jr	NZ,l_player_move_00115
999   00FF  21 60 08    	ld	hl,0x0860
1000  0102  E5          	push	hl
1001  0103  CD 59 06    	call	_player_tile
1002  0106  F1          	pop	af
1003  0107  18 0C       	jr	l_player_move_00115
1004  0109              l_player_move_00114:
1005  0109  CD 7B 01    	call	_player_move_input
1006  010C  3A 00 00    	ld	a,(_player_onstair)
1007  010F  B7          	or	a, a
1008  0110  20 03       	jr	NZ,l_player_move_00115
1009  0112  CD 82 0B    	call	_player_check_floor
1010  0115              l_player_move_00115:
1011  0115  CD 00 00    	call	_spr_redraw
1012  0118  7D          	ld	a, l
1013  0119  B7          	or	a, a
1014  011A  28 03       	jr	Z,l_player_move_00118
1015  011C  CD 74 06    	call	_player_check_map
1016  011F              l_player_move_00118:
1017  011F  3A 00 00    	ld	a,(_player_hit_lin)
1018  0122  B7          	or	a, a
1019  0123  28 03       	jr	Z,l_player_move_00120
1020  0125  CD EF 0A    	call	_player_hit_platform_clear
1021  0128              l_player_move_00120:
1022  0128  3A 00 00    	ld	a,(_s_state)
1023  012B  32 07 00    	ld	((_state + 0x0007)),a
1024  012E  2E 00       	ld	l,0x00
1025  0130  C9          	ret
1026  0131              	SECTION code_compiler
1027  0131              ;	---------------------------------
1028  0131              ; Function player_check_input
1029  0131              ; ---------------------------------
1030  0131              _player_check_input:
1031  0131  21 00 00    	ld	hl,_dirs
1032  0134  CB 56       	bit	2, (hl)
1033  0136  28 0C       	jr	Z,l_player_check_input_00102
1034  0138  21 00 00    	ld	hl,_dirs
1035  013B  CB 5E       	bit	3, (hl)
1036  013D  28 05       	jr	Z,l_player_check_input_00102
1037  013F  21 00 00    	ld	hl,_dirs
1038  0142  36 00       	ld	(hl),0x00
1039  0144              l_player_check_input_00102:
1040  0144  21 00 00    	ld	hl,_dirs
1041  0147  7E          	ld	a, (hl)
1042  0148  CB 07       	rlc	a
1043  014A  E6 01       	and	a,0x01
1044  014C  CB 47       	bit	0, a
1045  014E  20 28       	jr	NZ,l_player_check_input_00107
1046  0150  CB 56       	bit	2, (hl)
1047  0152  20 24       	jr	NZ,l_player_check_input_00107
1048  0154  21 00 00    	ld	hl,_dirs
1049  0157  CB 5E       	bit	3, (hl)
1050  0159  20 1D       	jr	NZ,l_player_check_input_00107
1051  015B  21 00 00    	ld	hl,_dirs
1052  015E  CB 46       	bit	0, (hl)
1053  0160  20 16       	jr	NZ,l_player_check_input_00107
1054  0162  21 00 00    	ld	hl,_dirs
1055  0165  CB 4E       	bit	1, (hl)
1056  0167  20 0F       	jr	NZ,l_player_check_input_00107
1057  0169  3A 00 00    	ld	a,(_dirs_alt)
1058  016C  CB 07       	rlc	a
1059  016E  E6 01       	and	a,0x01
1060  0170  CB 47       	bit	0, a
1061  0172  20 04       	jr	NZ,l_player_check_input_00107
1062  0174  2E 00       	ld	l,0x00
1063  0176  18 02       	jr	l_player_check_input_00108
1064  0178              l_player_check_input_00107:
1065  0178  2E 01       	ld	l,0x01
1066  017A              l_player_check_input_00108:
1067  017A  C9          	ret
1068  017B              	SECTION code_compiler
1069  017B              ;	---------------------------------
1070  017B              ; Function player_move_input
1071  017B              ; ---------------------------------
1072  017B              _player_move_input:
1073  017B  CD 31 01    	call	_player_check_input
1074  017E  7D          	ld	a, l
1075  017F  B7          	or	a, a
1076  0180  CA 02 03    	jp	Z, l_player_move_input_00149
1077  0183  CD 42 03    	call	_player_fire
1078  0186  7D          	ld	a, l
1079  0187  B7          	or	a, a
1080  0188  28 0A       	jr	Z,l_player_move_input_00102
1081  018A  21 00 00    	ld	hl,_dirs
1082  018D  36 00       	ld	(hl),0x00
1083  018F  2E 00       	ld	l,0x00
1084  0191  C3 28 03    	jp	l_player_move_input_00151
1085  0194              l_player_move_input_00102:
1086  0194  3A 00 00    	ld	a,(_game_2buttons)
1087  0197  B7          	or	a, a
1088  0198  28 07       	jr	Z,l_player_move_input_00104
1089  019A  3A 00 00    	ld	a,(_dirs)
1090  019D  E6 80       	and	a,0x80
1091  019F  18 16       	jr	l_player_move_input_00105
1092  01A1              l_player_move_input_00104:
1093  01A1  21 00 00    	ld	hl,_dirs
1094  01A4  7E          	ld	a, (hl)
1095  01A5  CB 07       	rlc	a
1096  01A7  E6 01       	and	a,0x01
1097  01A9  CB 47       	bit	0, a
1098  01AB  28 04       	jr	Z,l_player_move_input_00153
1099  01AD  CB 46       	bit	0, (hl)
1100  01AF  20 04       	jr	NZ,l_player_move_input_00154
1101  01B1              l_player_move_input_00153:
1102  01B1  3E 00       	ld	a,0x00
1103  01B3  18 02       	jr	l_player_move_input_00155
1104  01B5              l_player_move_input_00154:
1105  01B5  3E 01       	ld	a,0x01
1106  01B7              l_player_move_input_00155:
1107  01B7              l_player_move_input_00105:
1108  01B7  B7          	or	a, a
1109  01B8  28 4D       	jr	Z,l_player_move_input_00109
1110  01BA  21 00 00    	ld	hl,_player_vel_inc
1111  01BD  36 01       	ld	(hl),0x01
1112  01BF  CD 00 00    	call	_ay_is_playing
1113  01C2  7D          	ld	a, l
1114  01C3  D6 03       	sub	a,0x03
1115  01C5  28 06       	jr	Z,l_player_move_input_00107
1116  01C7  21 00 00    	ld	hl,_ay_effect_03
1117  01CA  CD 00 00    	call	_ay_fx_play
1118  01CD              l_player_move_input_00107:
1119  01CD  21 00 00    	ld	hl,_player_onstair
1120  01D0  36 00       	ld	(hl),0x00
1121  01D2  CD 00 00    	call	_sound_jump
1122  01D5  21 00 00    	ld	hl,_s_state
1123  01D8  7E          	ld	a,(hl)
1124  01D9  F6 01       	or	a,0x01
1125  01DB  E6 FD       	and	a,0xfd
1126  01DD  77          	ld	(hl),a
1127  01DE  3A 07 00    	ld	a,(_lin + 0x0007)
1128  01E1  32 07 00    	ld	((_jump_lin + 0x0007)),a
1129  01E4  3A 00 00    	ld	a,(_s_state)
1130  01E7  32 07 00    	ld	((_state + 0x0007)),a
1131  01EA  21 64 08    	ld	hl,0x0864
1132  01ED  E5          	push	hl
1133  01EE  CD 59 06    	call	_player_tile
1134  01F1  F1          	pop	af
1135  01F2  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
1136  01F5  36 02       	ld	(hl),0x02
1137  01F7  21 00 00    	ld	hl,_player_slide
1138  01FA  36 00       	ld	(hl),0x00
1139  01FC  3A 00 00    	ld	a,(_player_vel_y0)
1140  01FF  32 00 00    	ld	(_player_vel_y),a
1141  0202  2E 01       	ld	l,0x01
1142  0204  C3 28 03    	jp	l_player_move_input_00151
1143  0207              l_player_move_input_00109:
1144  0207  21 00 00    	ld	hl,_dirs
1145  020A  CB 5E       	bit	3, (hl)
1146  020C  28 23       	jr	Z,l_player_move_input_00113
1147  020E  CD 29 03    	call	_player_fix_walk_lin
1148  0211  21 00 00    	ld	hl,_s_state
1149  0214  7E          	ld	a,(hl)
1150  0215  F6 04       	or	a,0x04
1151  0217  E6 F7       	and	a,0xf7
1152  0219  77          	ld	(hl),a
1153  021A  01 07 00    	ld	bc,_state_a+7
1154  021D  0A          	ld	a, (bc)
1155  021E  F6 10       	or	a,0x10
1156  0220  E6 F7       	and	a,0xf7
1157  0222  02          	ld	(bc),a
1158  0223  3A 00 00    	ld	a,(_player_onstair)
1159  0226  B7          	or	a, a
1160  0227  28 05       	jr	Z,l_player_move_input_00111
1161  0229  2E 00       	ld	l,0x00
1162  022B  CD C9 05    	call	_player_check_stairs
1163  022E              l_player_move_input_00111:
1164  022E  CD 00 00    	call	_spr_move_horizontal
1165  0231              l_player_move_input_00113:
1166  0231  21 00 00    	ld	hl,_dirs
1167  0234  CB 56       	bit	2, (hl)
1168  0236  28 23       	jr	Z,l_player_move_input_00117
1169  0238  CD 29 03    	call	_player_fix_walk_lin
1170  023B  21 00 00    	ld	hl,_s_state
1171  023E  7E          	ld	a,(hl)
1172  023F  F6 08       	or	a,0x08
1173  0241  E6 FB       	and	a,0xfb
1174  0243  77          	ld	(hl),a
1175  0244  01 07 00    	ld	bc,_state_a+7
1176  0247  0A          	ld	a, (bc)
1177  0248  F6 08       	or	a,0x08
1178  024A  E6 EF       	and	a,0xef
1179  024C  02          	ld	(bc),a
1180  024D  3A 00 00    	ld	a,(_player_onstair)
1181  0250  B7          	or	a, a
1182  0251  28 05       	jr	Z,l_player_move_input_00115
1183  0253  2E 00       	ld	l,0x00
1184  0255  CD C9 05    	call	_player_check_stairs
1185  0258              l_player_move_input_00115:
1186  0258  CD 00 00    	call	_spr_move_horizontal
1187  025B              l_player_move_input_00117:
1188  025B  21 00 00    	ld	hl,_dirs
1189  025E  CB 46       	bit	0, (hl)
1190  0260  28 3C       	jr	Z,l_player_move_input_00129
1191  0262  2E 00       	ld	l,0x00
1192  0264  CD C9 05    	call	_player_check_stairs
1193  0267  3A 00 00    	ld	a,(_player_onstair)
1194  026A  B7          	or	a, a
1195  026B  20 13       	jr	NZ,l_player_move_input_00121
1196  026D  2E 01       	ld	l,0x01
1197  026F  CD C9 05    	call	_player_check_stairs
1198  0272  3A 00 00    	ld	a,(_player_onstair)
1199  0275  B7          	or	a, a
1200  0276  20 08       	jr	NZ,l_player_move_input_00121
1201  0278  3E FE       	ld	a,0xfe
1202  027A  F5          	push	af
1203  027B  33          	inc	sp
1204  027C  CD 23 05    	call	_player_check_stairs_vertical
1205  027F  33          	inc	sp
1206  0280              l_player_move_input_00121:
1207  0280  3A 00 00    	ld	a,(_player_onstair)
1208  0283  B7          	or	a, a
1209  0284  28 05       	jr	Z,l_player_move_input_00126
1210  0286  CD 00 00    	call	_spr_move_up
1211  0289  18 13       	jr	l_player_move_input_00129
1212  028B              l_player_move_input_00126:
1213  028B  21 00 00    	ld	hl,_dirs
1214  028E  CB 5E       	bit	3, (hl)
1215  0290  20 0C       	jr	NZ,l_player_move_input_00129
1216  0292  21 00 00    	ld	hl,_dirs
1217  0295  CB 56       	bit	2, (hl)
1218  0297  20 05       	jr	NZ,l_player_move_input_00129
1219  0299  2E 00       	ld	l,0x00
1220  029B  C3 28 03    	jp	l_player_move_input_00151
1221  029E              l_player_move_input_00129:
1222  029E  21 00 00    	ld	hl,_dirs
1223  02A1  CB 4E       	bit	1, (hl)
1224  02A3  28 3B       	jr	Z,l_player_move_input_00141
1225  02A5  2E 00       	ld	l,0x00
1226  02A7  CD C9 05    	call	_player_check_stairs
1227  02AA  3A 00 00    	ld	a,(_player_onstair)
1228  02AD  B7          	or	a, a
1229  02AE  20 13       	jr	NZ,l_player_move_input_00133
1230  02B0  2E 01       	ld	l,0x01
1231  02B2  CD C9 05    	call	_player_check_stairs
1232  02B5  3A 00 00    	ld	a,(_player_onstair)
1233  02B8  B7          	or	a, a
1234  02B9  20 08       	jr	NZ,l_player_move_input_00133
1235  02BB  3E 12       	ld	a,0x12
1236  02BD  F5          	push	af
1237  02BE  33          	inc	sp
1238  02BF  CD 23 05    	call	_player_check_stairs_vertical
1239  02C2  33          	inc	sp
1240  02C3              l_player_move_input_00133:
1241  02C3  3A 00 00    	ld	a,(_player_onstair)
1242  02C6  B7          	or	a, a
1243  02C7  28 05       	jr	Z,l_player_move_input_00138
1244  02C9  CD 00 00    	call	_spr_move_down
1245  02CC  18 12       	jr	l_player_move_input_00141
1246  02CE              l_player_move_input_00138:
1247  02CE  21 00 00    	ld	hl,_dirs
1248  02D1  CB 5E       	bit	3, (hl)
1249  02D3  20 0B       	jr	NZ,l_player_move_input_00141
1250  02D5  21 00 00    	ld	hl,_dirs
1251  02D8  CB 56       	bit	2, (hl)
1252  02DA  20 04       	jr	NZ,l_player_move_input_00141
1253  02DC  2E 00       	ld	l,0x00
1254  02DE  18 48       	jr	l_player_move_input_00151
1255  02E0              l_player_move_input_00141:
1256  02E0  3A 00 00    	ld	a,(_s_state)
1257  02E3  32 07 00    	ld	((_state + 0x0007)),a
1258  02E6  3A 00 00    	ld	a,(_player_onstair)
1259  02E9  B7          	or	a, a
1260  02EA  28 0A       	jr	Z,l_player_move_input_00143
1261  02EC  21 72 00    	ld	hl,0x0072
1262  02EF  E5          	push	hl
1263  02F0  CD 59 06    	call	_player_tile
1264  02F3  F1          	pop	af
1265  02F4  18 08       	jr	l_player_move_input_00144
1266  02F6              l_player_move_input_00143:
1267  02F6  21 60 08    	ld	hl,0x0860
1268  02F9  E5          	push	hl
1269  02FA  CD 59 06    	call	_player_tile
1270  02FD  F1          	pop	af
1271  02FE              l_player_move_input_00144:
1272  02FE  2E 01       	ld	l,0x01
1273  0300  18 26       	jr	l_player_move_input_00151
1274  0302              l_player_move_input_00149:
1275  0302  21 07 00    	ld	hl, +(_colint + 0x0007)
1276  0305  36 00       	ld	(hl),0x00
1277  0307  3A 00 00    	ld	a,(_player_onstair)
1278  030A  B7          	or	a, a
1279  030B  28 0A       	jr	Z,l_player_move_input_00146
1280  030D  21 72 00    	ld	hl,0x0072
1281  0310  E5          	push	hl
1282  0311  CD 59 06    	call	_player_tile
1283  0314  F1          	pop	af
1284  0315  18 08       	jr	l_player_move_input_00147
1285  0317              l_player_move_input_00146:
1286  0317  21 70 01    	ld	hl,0x0170
1287  031A  E5          	push	hl
1288  031B  CD 59 06    	call	_player_tile
1289  031E  F1          	pop	af
1290  031F              l_player_move_input_00147:
1291  031F  21 00 00    	ld	hl,_s_state
1292  0322  7E          	ld	a,(hl)
1293  0323  E6 F3       	and	a,+(0xf7&0xfb)
1294  0325  77          	ld	(hl),a
1295  0326  2E 00       	ld	l,0x00
1296  0328              l_player_move_input_00151:
1297  0328  C9          	ret
1298  0329              	SECTION code_compiler
1299  0329              ;	---------------------------------
1300  0329              ; Function player_fix_walk_lin
1301  0329              ; ---------------------------------
1302  0329              _player_fix_walk_lin:
1303  0329  3A 00 00    	ld	a,(_player_onstair)
1304  032C  B7          	or	a, a
1305  032D  C0          	ret	NZ
1306  032E  01 07 00    	ld	bc,_lin+7
1307  0331  3A 00 00    	ld	a,(_s_lin0)
1308  0334  07          	rlca
1309  0335  07          	rlca
1310  0336  07          	rlca
1311  0337  07          	rlca
1312  0338  E6 0F       	and	a,0x0f
1313  033A  07          	rlca
1314  033B  07          	rlca
1315  033C  07          	rlca
1316  033D  07          	rlca
1317  033E  E6 F0       	and	a,0xf0
1318  0340  02          	ld	(bc), a
1319  0341  C9          	ret
1320  0342              	SECTION code_compiler
1321  0342              ;	---------------------------------
1322  0342              ; Function player_fire
1323  0342              ; ---------------------------------
1324  0342              _player_fire:
1325  0342  CD 00 00    	call	___sdcc_enter_ix
1326  0345  3B          	dec	sp
1327  0346  3A 00 00    	ld	a,(_game_2buttons)
1328  0349  B7          	or	a, a
1329  034A  28 07       	jr	Z,l_player_fire_00102
1330  034C  3A 00 00    	ld	a,(_dirs_alt)
1331  034F  E6 80       	and	a,0x80
1332  0351  18 16       	jr	l_player_fire_00103
1333  0353              l_player_fire_00102:
1334  0353  21 00 00    	ld	hl,_dirs
1335  0356  7E          	ld	a, (hl)
1336  0357  CB 07       	rlc	a
1337  0359  E6 01       	and	a,0x01
1338  035B  CB 47       	bit	0, a
1339  035D  28 04       	jr	Z,l_player_fire_00116
1340  035F  CB 46       	bit	0, (hl)
1341  0361  28 04       	jr	Z,l_player_fire_00117
1342  0363              l_player_fire_00116:
1343  0363  3E 00       	ld	a,0x00
1344  0365  18 02       	jr	l_player_fire_00118
1345  0367              l_player_fire_00117:
1346  0367  3E 01       	ld	a,0x01
1347  0369              l_player_fire_00118:
1348  0369              l_player_fire_00103:
1349  0369  B7          	or	a, a
1350  036A  28 3B       	jr	Z,l_player_fire_00113
1351  036C  21 00 00    	ld	hl,_player_mana
1352  036F  7E          	ld	a, (hl)
1353  0370  B7          	or	a, a
1354  0371  28 30       	jr	Z,l_player_fire_00110
1355  0373  3A 07 00    	ld	a,(_bullet_col + 0x0007)
1356  0376  3C          	inc	a
1357  0377  20 2A       	jr	NZ,l_player_fire_00110
1358  0379  3E 05       	ld	a,0x05
1359  037B  96          	sub	a, (hl)
1360  037C  30 12       	jr	NC,l_player_fire_00107
1361  037E  CD 00 00    	call	_sound_hit_enemy
1362  0381  3A 00 00    	ld	a,(_game_god_mode)
1363  0384  B7          	or	a, a
1364  0385  20 0E       	jr	NZ,l_player_fire_00108
1365  0387  21 00 00    	ld	hl,_player_mana
1366  038A  7E          	ld	a, (hl)
1367  038B  C6 FB       	add	a,0xfb
1368  038D  77          	ld	(hl), a
1369  038E  18 05       	jr	l_player_fire_00108
1370  0390              l_player_fire_00107:
1371  0390  21 00 00    	ld	hl,_player_mana
1372  0393  36 00       	ld	(hl),0x00
1373  0395              l_player_fire_00108:
1374  0395  CD 00 00    	call	_game_update_stats
1375  0398  CD 00 00    	call	_sound_enter_enemy
1376  039B  21 07 78    	ld	hl,0x7807
1377  039E  E5          	push	hl
1378  039F  CD 00 00    	call	_game_shoot_fire
1379  03A2  F1          	pop	af
1380  03A3              l_player_fire_00110:
1381  03A3  2E 01       	ld	l,0x01
1382  03A5  18 02       	jr	l_player_fire_00114
1383  03A7              l_player_fire_00113:
1384  03A7  2E 00       	ld	l,0x00
1385  03A9              l_player_fire_00114:
1386  03A9  33          	inc	sp
1387  03AA  DD E1       	pop	ix
1388  03AC  C9          	ret
1389  03AD              	SECTION code_compiler
1390  03AD              ;	---------------------------------
1391  03AD              ; Function player_collision
1392  03AD              ; ---------------------------------
1393  03AD              _player_collision:
1394  03AD  21 19 00    	ld	hl,0x0019
1395  03B0  E5          	push	hl
1396  03B1  2A 00 00    	ld	hl,(_player_hit_time)
1397  03B4  E5          	push	hl
1398  03B5  CD 00 00    	call	_game_check_time
1399  03B8  F1          	pop	af
1400  03B9  F1          	pop	af
1401  03BA  7D          	ld	a, l
1402  03BB  B7          	or	a, a
1403  03BC  CA E0 04    	jp	Z, l_player_collision_00127
1404  03BF  21 00 00    	ld	hl,_sprite
1405  03C2  36 00       	ld	(hl),0x00
1406  03C4  3A 07 00    	ld	a,(_col + 7)
1407  03C7  32 00 00    	ld	(_s_col1),a
1408  03CA  3A 07 00    	ld	a,(_lin + 7)
1409  03CD  32 00 00    	ld	(_s_lin1),a
1410  03D0  C6 08       	add	a,0x08
1411  03D2  4F          	ld	c, a
1412  03D3  3A 00 00    	ld	a, (_s_col1)
1413  03D6  47          	ld	b,a
1414  03D7  C5          	push	bc
1415  03D8  CD 00 00    	call	_spr_calc_index
1416  03DB  F1          	pop	af
1417  03DC  7D          	ld	a,l
1418  03DD  32 00 00    	ld	(_sprite_curr_index),a
1419  03E0  4F          	ld	c,a
1420  03E1  06 00       	ld	b,0x00
1421  03E3  21 00 00    	ld	hl,_scr_map
1422  03E6  09          	add	hl,bc
1423  03E7  4E          	ld	c, (hl)
1424  03E8  3E 2F       	ld	a,0x2f
1425  03EA  91          	sub	a, c
1426  03EB  30 1A       	jr	NC,l_player_collision_00123
1427  03ED  79          	ld	a,c
1428  03EE  FE 3C       	cp	a,0x3c
1429  03F0  30 15       	jr	NC,l_player_collision_00123
1430  03F2  D6 39       	sub	a,0x39
1431  03F4  20 07       	jr	NZ,l_player_collision_00102
1432  03F6  21 00 00    	ld	hl,_game_worldup
1433  03F9  36 01       	ld	(hl),0x01
1434  03FB  18 0A       	jr	l_player_collision_00123
1435  03FD              l_player_collision_00102:
1436  03FD  2E 06       	ld	l,0x06
1437  03FF  CD 00 00    	call	_zx_border_fastcall
1438  0402  2E 32       	ld	l,0x32
1439  0404  CD BC 10    	call	_player_hit
1440  0407              l_player_collision_00123:
1441  0407  21 00 00    	ld	hl,_sprite
1442  040A  7E          	ld	a, (hl)
1443  040B  D6 07       	sub	a,0x07
1444  040D  D2 E0 04    	jp	NC, l_player_collision_00127
1445  0410  3E 00       	ld	a, +((_class) & 0xFF)
1446  0412  86          	add	a, (hl)
1447  0413  4F          	ld	c, a
1448  0414  3E 00       	ld	a, +((_class) / 256)
1449  0416  CE 00       	adc	a,0x00
1450  0418  47          	ld	b, a
1451  0419  0A          	ld	a, (bc)
1452  041A  B7          	or	a, a
1453  041B  CA D9 04    	jp	Z, l_player_collision_00122
1454  041E  4E          	ld	c,(hl)
1455  041F  06 00       	ld	b,0x00
1456  0421  21 00 00    	ld	hl,_col
1457  0424  09          	add	hl,bc
1458  0425  4E          	ld	c, (hl)
1459  0426  06 00       	ld	b,0x00
1460  0428  3A 00 00    	ld	a,(_s_col1)
1461  042B  5F          	ld	e,a
1462  042C  16 00       	ld	d,0x00
1463  042E  79          	ld	a, c
1464  042F  93          	sub	a, e
1465  0430  6F          	ld	l, a
1466  0431  78          	ld	a, b
1467  0432  9A          	sbc	a, d
1468  0433  67          	ld	h, a
1469  0434  CD 00 00    	call	_abs_fastcall
1470  0437  7D          	ld	a,l
1471  0438  D6 02       	sub	a,0x02
1472  043A  7C          	ld	a,h
1473  043B  17          	rla
1474  043C  3F          	ccf
1475  043D  1F          	rra
1476  043E  DE 80       	sbc	a,0x80
1477  0440  D2 D9 04    	jp	NC, l_player_collision_00122
1478  0443  2A 00 00    	ld	hl,(_sprite)
1479  0446  26 00       	ld	h,0x00
1480  0448  01 00 00    	ld	bc,_lin
1481  044B  09          	add	hl,bc
1482  044C  4E          	ld	c,(hl)
1483  044D  06 00       	ld	b,0x00
1484  044F  3A 00 00    	ld	a,(_s_lin1)
1485  0452  5F          	ld	e,a
1486  0453  16 00       	ld	d,0x00
1487  0455  79          	ld	a, c
1488  0456  93          	sub	a, e
1489  0457  6F          	ld	l, a
1490  0458  78          	ld	a, b
1491  0459  9A          	sbc	a, d
1492  045A  67          	ld	h, a
1493  045B  CD 00 00    	call	_abs_fastcall
1494  045E  7D          	ld	a,l
1495  045F  D6 0E       	sub	a,0x0e
1496  0461  7C          	ld	a,h
1497  0462  17          	rla
1498  0463  3F          	ccf
1499  0464  1F          	rra
1500  0465  DE 80       	sbc	a,0x80
1501  0467  30 70       	jr	NC,l_player_collision_00122
1502  0469  2A 00 00    	ld	hl,(_sprite)
1503  046C  26 00       	ld	h,0x00
1504  046E  01 00 00    	ld	bc,_class
1505  0471  09          	add	hl,bc
1506  0472  7E          	ld	a,(hl)
1507  0473  4F          	ld	c,a
1508  0474  D6 06       	sub	a,0x06
1509  0476  28 05       	jr	Z,l_player_collision_00189
1510  0478  21 00 00    	ld	hl,_sprite
1511  047B  18 1D       	jr	l_player_collision_00110
1512  047D              l_player_collision_00189:
1513  047D  21 00 00    	ld	hl,_player_vita
1514  0480  7E          	ld	a, (hl)
1515  0481  C6 19       	add	a,0x19
1516  0483  77          	ld	(hl), a
1517  0484  3A 00 00    	ld	a,(_player_max_vita)
1518  0487  21 00 00    	ld	hl,_player_vita
1519  048A  96          	sub	a, (hl)
1520  048B  30 06       	jr	NC,l_player_collision_00108
1521  048D  3A 00 00    	ld	a,(_player_max_vita)
1522  0490  32 00 00    	ld	(_player_vita),a
1523  0493              l_player_collision_00108:
1524  0493  CD E3 04    	call	_player_pick_mushroom
1525  0496  2E 00       	ld	l,0x00
1526  0498  18 48       	jr	l_player_collision_00128
1527  049A              l_player_collision_00110:
1528  049A  79          	ld	a, c
1529  049B  D6 07       	sub	a,0x07
1530  049D  20 1D       	jr	NZ,l_player_collision_00114
1531  049F  21 00 00    	ld	hl,_player_mana
1532  04A2  7E          	ld	a, (hl)
1533  04A3  C6 19       	add	a,0x19
1534  04A5  77          	ld	(hl), a
1535  04A6  3A 00 00    	ld	a,(_player_max_mana)
1536  04A9  21 00 00    	ld	hl,_player_mana
1537  04AC  96          	sub	a, (hl)
1538  04AD  30 06       	jr	NC,l_player_collision_00112
1539  04AF  3A 00 00    	ld	a,(_player_max_mana)
1540  04B2  32 00 00    	ld	(_player_mana),a
1541  04B5              l_player_collision_00112:
1542  04B5  CD E3 04    	call	_player_pick_mushroom
1543  04B8  2E 00       	ld	l,0x00
1544  04BA  18 26       	jr	l_player_collision_00128
1545  04BC              l_player_collision_00114:
1546  04BC  79          	ld	a, c
1547  04BD  D6 08       	sub	a,0x08
1548  04BF  20 0A       	jr	NZ,l_player_collision_00116
1549  04C1  CD F7 04    	call	_player_1up
1550  04C4  CD E3 04    	call	_player_pick_mushroom
1551  04C7  2E 00       	ld	l,0x00
1552  04C9  18 17       	jr	l_player_collision_00128
1553  04CB              l_player_collision_00116:
1554  04CB  2E 02       	ld	l,0x02
1555  04CD  CD 00 00    	call	_zx_border_fastcall
1556  04D0  2E 14       	ld	l,0x14
1557  04D2  CD BC 10    	call	_player_hit
1558  04D5  2E 01       	ld	l,0x01
1559  04D7  18 09       	jr	l_player_collision_00128
1560  04D9              l_player_collision_00122:
1561  04D9  21 00 00    	ld	hl,_sprite
1562  04DC  34          	inc	(hl)
1563  04DD  C3 07 04    	jp	l_player_collision_00123
1564  04E0              l_player_collision_00127:
1565  04E0  2E 00       	ld	l,0x00
1566  04E2              l_player_collision_00128:
1567  04E2  C9          	ret
1568  04E3              	SECTION code_compiler
1569  04E3              ;	---------------------------------
1570  04E3              ; Function player_pick_mushroom
1571  04E3              ; ---------------------------------
1572  04E3              _player_pick_mushroom:
1573  04E3  21 01 00    	ld	hl,0x0001
1574  04E6  CD 1E 0B    	call	_player_score_add
1575  04E9  CD 00 00    	call	_game_update_stats
1576  04EC  2A 00 00    	ld	hl,(_sprite)
1577  04EF  CD 00 00    	call	_spr_destroy
1578  04F2  21 00 00    	ld	hl,_game_mush_count
1579  04F5  35          	dec	(hl)
1580  04F6  C9          	ret
1581  04F7              	SECTION code_compiler
1582  04F7              ;	---------------------------------
1583  04F7              ; Function player_1up
1584  04F7              ; ---------------------------------
1585  04F7              _player_1up:
1586  04F7  21 00 00    	ld	hl,_player_lives
1587  04FA  7E          	ld	a, (hl)
1588  04FB  D6 FF       	sub	a,0xff
1589  04FD  D0          	ret	NC
1590  04FE  34          	inc	(hl)
1591  04FF  21 00 00    	ld	hl,___str_0
1592  0502  E5          	push	hl
1593  0503  21 0C 0C    	ld	hl,0x0c0c
1594  0506  E5          	push	hl
1595  0507  CD 00 00    	call	_zx_print_str
1596  050A  AF          	xor	a, a
1597  050B  F5          	push	af
1598  050C  33          	inc	sp
1599  050D  21 19 00    	ld	hl,0x0019
1600  0510  E5          	push	hl
1601  0511  21 0C 15    	ld	hl,0x150c
1602  0514  E5          	push	hl
1603  0515  3E 0C       	ld	a,0x0c
1604  0517  F5          	push	af
1605  0518  33          	inc	sp
1606  0519  CD 00 00    	call	_game_colour_message
1607  051C  F1          	pop	af
1608  051D  F1          	pop	af
1609  051E  F1          	pop	af
1610  051F  CD 00 00    	call	_game_update_stats
1611  0522  C9          	ret
1612  0523              	SECTION rodata_compiler
1613  0000              ___str_0:
1614  0000  31 20 55 50 21 
                        	DEFM "1 UP!"
1615  0005  00          	DEFB 0x00
1616  0006              	SECTION code_compiler
1617  0523              ;	---------------------------------
1618  0523              ; Function player_check_stairs_vertical
1619  0523              ; ---------------------------------
1620  0523              _player_check_stairs_vertical:
1621  0523  CD 00 00    	call	___sdcc_enter_ix
1622  0526  3B          	dec	sp
1623  0527  21 07 00    	ld	hl,+(_col + 0x0007)
1624  052A  46          	ld	b, (hl)
1625  052B  CB 40       	bit	0, b
1626  052D  20 2C       	jr	NZ,l_player_check_stairs_vertical_00102
1627  052F  3A 07 00    	ld	a,(_lin + 0x0007)
1628  0532  DD 86 04    	add	a,(ix+4)
1629  0535  4F          	ld	c,a
1630  0536  C5          	push	bc
1631  0537  CD 00 00    	call	_spr_calc_index
1632  053A  F1          	pop	af
1633  053B  7D          	ld	a,l
1634  053C  32 00 00    	ld	(_sprite_curr_index),a
1635  053F  4F          	ld	c,a
1636  0540  06 00       	ld	b,0x00
1637  0542  21 00 00    	ld	hl,_scr_map
1638  0545  09          	add	hl,bc
1639  0546  7E          	ld	a,(hl)
1640  0547  4F          	ld	c,a
1641  0548  D6 44       	sub	a,0x44
1642  054A  38 05       	jr	C,l_player_check_stairs_vertical_00110
1643  054C  3E 47       	ld	a,0x47
1644  054E  91          	sub	a, c
1645  054F  30 04       	jr	NC,l_player_check_stairs_vertical_00111
1646  0551              l_player_check_stairs_vertical_00110:
1647  0551  0E 00       	ld	c,0x00
1648  0553  18 02       	jr	l_player_check_stairs_vertical_00112
1649  0555              l_player_check_stairs_vertical_00111:
1650  0555  0E 01       	ld	c,0x01
1651  0557              l_player_check_stairs_vertical_00112:
1652  0557  06 00       	ld	b,0x00
1653  0559  18 57       	jr	l_player_check_stairs_vertical_00103
1654  055B              l_player_check_stairs_vertical_00102:
1655  055B  78          	ld	a, b
1656  055C  DD 96 04    	sub	a,(ix+4)
1657  055F  57          	ld	d, a
1658  0560  3A 07 00    	ld	a,(_lin + 0x0007)
1659  0563  DD 86 04    	add	a,(ix+4)
1660  0566  5F          	ld	e, a
1661  0567  D5          	push	de
1662  0568  CD 00 00    	call	_spr_calc_index
1663  056B  F1          	pop	af
1664  056C  7D          	ld	a,l
1665  056D  32 00 00    	ld	(_sprite_curr_index),a
1666  0570  4F          	ld	c,a
1667  0571  06 00       	ld	b,0x00
1668  0573  21 00 00    	ld	hl,_scr_map
1669  0576  09          	add	hl,bc
1670  0577  7E          	ld	a,(hl)
1671  0578  4F          	ld	c,a
1672  0579  D6 44       	sub	a,0x44
1673  057B  38 05       	jr	C,l_player_check_stairs_vertical_00113
1674  057D  3E 47       	ld	a,0x47
1675  057F  91          	sub	a, c
1676  0580  30 04       	jr	NC,l_player_check_stairs_vertical_00114
1677  0582              l_player_check_stairs_vertical_00113:
1678  0582  0E 00       	ld	c,0x00
1679  0584  18 02       	jr	l_player_check_stairs_vertical_00115
1680  0586              l_player_check_stairs_vertical_00114:
1681  0586  0E 01       	ld	c,0x01
1682  0588              l_player_check_stairs_vertical_00115:
1683  0588  3A 07 00    	ld	a,(_col + 0x0007)
1684  058B  DD 96 04    	sub	a,(ix+4)
1685  058E  47          	ld	b, a
1686  058F  3A 07 00    	ld	a,(_lin + 0x0007)
1687  0592  DD 86 04    	add	a,(ix+4)
1688  0595  57          	ld	d, a
1689  0596  C5          	push	bc
1690  0597  4A          	ld	c, d
1691  0598  C5          	push	bc
1692  0599  CD 00 00    	call	_spr_calc_index
1693  059C  F1          	pop	af
1694  059D  C1          	pop	bc
1695  059E  7D          	ld	a,l
1696  059F  32 00 00    	ld	(_sprite_curr_index),a
1697  05A2  79          	ld	a, c
1698  05A3  D6 44       	sub	a,0x44
1699  05A5  38 05       	jr	C,l_player_check_stairs_vertical_00116
1700  05A7  3E 47       	ld	a,0x47
1701  05A9  91          	sub	a, c
1702  05AA  30 04       	jr	NC,l_player_check_stairs_vertical_00117
1703  05AC              l_player_check_stairs_vertical_00116:
1704  05AC  06 00       	ld	b,0x00
1705  05AE  18 02       	jr	l_player_check_stairs_vertical_00118
1706  05B0              l_player_check_stairs_vertical_00117:
1707  05B0  06 01       	ld	b,0x01
1708  05B2              l_player_check_stairs_vertical_00118:
1709  05B2              l_player_check_stairs_vertical_00103:
1710  05B2  79          	ld	a, c
1711  05B3  B7          	or	a,a
1712  05B4  20 03       	jr	NZ,l_player_check_stairs_vertical_00104
1713  05B6  B0          	or	a,b
1714  05B7  28 07       	jr	Z,l_player_check_stairs_vertical_00105
1715  05B9              l_player_check_stairs_vertical_00104:
1716  05B9  21 00 00    	ld	hl,_player_onstair
1717  05BC  36 01       	ld	(hl),0x01
1718  05BE  18 05       	jr	l_player_check_stairs_vertical_00108
1719  05C0              l_player_check_stairs_vertical_00105:
1720  05C0  21 00 00    	ld	hl,_player_onstair
1721  05C3  36 00       	ld	(hl),0x00
1722  05C5              l_player_check_stairs_vertical_00108:
1723  05C5  33          	inc	sp
1724  05C6  DD E1       	pop	ix
1725  05C8  C9          	ret
1726  05C9              	SECTION code_compiler
1727  05C9              ;	---------------------------------
1728  05C9              ; Function player_check_stairs
1729  05C9              ; ---------------------------------
1730  05C9              _player_check_stairs:
1731  05C9  CD 00 00    	call	___sdcc_enter_ix
1732  05CC  3B          	dec	sp
1733  05CD  45          	ld	b, l
1734  05CE  3A 07 00    	ld	a,(_col + 0x0007)
1735  05D1  4F          	ld	c,a
1736  05D2  80          	add	a, b
1737  05D3  57          	ld	d, a
1738  05D4  3A 07 00    	ld	a,(_lin + 0x0007)
1739  05D7  C5          	push	bc
1740  05D8  5F          	ld	e,a
1741  05D9  D5          	push	de
1742  05DA  CD 00 00    	call	_spr_calc_index
1743  05DD  F1          	pop	af
1744  05DE  C1          	pop	bc
1745  05DF  7D          	ld	a,l
1746  05E0  32 00 00    	ld	(_sprite_curr_index),a
1747  05E3  5F          	ld	e,a
1748  05E4  16 00       	ld	d,0x00
1749  05E6  21 00 00    	ld	hl,_scr_map
1750  05E9  19          	add	hl,de
1751  05EA  7E          	ld	a,(hl)
1752  05EB  4F          	ld	c,a
1753  05EC  D6 44       	sub	a,0x44
1754  05EE  38 05       	jr	C,l_player_check_stairs_00111
1755  05F0  3E 47       	ld	a,0x47
1756  05F2  91          	sub	a, c
1757  05F3  30 04       	jr	NC,l_player_check_stairs_00112
1758  05F5              l_player_check_stairs_00111:
1759  05F5  0E 00       	ld	c,0x00
1760  05F7  18 02       	jr	l_player_check_stairs_00113
1761  05F9              l_player_check_stairs_00112:
1762  05F9  0E 01       	ld	c,0x01
1763  05FB              l_player_check_stairs_00113:
1764  05FB  3A 07 00    	ld	a,(_col + 0x0007)
1765  05FE  80          	add	a, b
1766  05FF  57          	ld	d, a
1767  0600  3A 07 00    	ld	a,(_lin + 0x0007)
1768  0603  C6 0F       	add	a,0x0f
1769  0605  47          	ld	b, a
1770  0606  C5          	push	bc
1771  0607  58          	ld	e,b
1772  0608  D5          	push	de
1773  0609  CD 00 00    	call	_spr_calc_index
1774  060C  F1          	pop	af
1775  060D  C1          	pop	bc
1776  060E  7D          	ld	a,l
1777  060F  32 00 00    	ld	(_sprite_curr_index),a
1778  0612  5F          	ld	e,a
1779  0613  16 00       	ld	d,0x00
1780  0615  21 00 00    	ld	hl,_scr_map
1781  0618  19          	add	hl,de
1782  0619  7E          	ld	a,(hl)
1783  061A  47          	ld	b,a
1784  061B  D6 44       	sub	a,0x44
1785  061D  38 05       	jr	C,l_player_check_stairs_00114
1786  061F  3E 47       	ld	a,0x47
1787  0621  90          	sub	a, b
1788  0622  30 04       	jr	NC,l_player_check_stairs_00115
1789  0624              l_player_check_stairs_00114:
1790  0624  06 00       	ld	b,0x00
1791  0626  18 02       	jr	l_player_check_stairs_00116
1792  0628              l_player_check_stairs_00115:
1793  0628  06 01       	ld	b,0x01
1794  062A              l_player_check_stairs_00116:
1795  062A  79          	ld	a, c
1796  062B  B7          	or	a,a
1797  062C  20 03       	jr	NZ,l_player_check_stairs_00105
1798  062E  B0          	or	a,b
1799  062F  28 13       	jr	Z,l_player_check_stairs_00106
1800  0631              l_player_check_stairs_00105:
1801  0631  21 00 00    	ld	hl,_player_onstair
1802  0634  7E          	ld	a, (hl)
1803  0635  B7          	or	a, a
1804  0636  20 1D       	jr	NZ,l_player_check_stairs_00109
1805  0638  36 01       	ld	(hl),0x01
1806  063A  21 72 00    	ld	hl,0x0072
1807  063D  E5          	push	hl
1808  063E  CD 59 06    	call	_player_tile
1809  0641  F1          	pop	af
1810  0642  18 11       	jr	l_player_check_stairs_00109
1811  0644              l_player_check_stairs_00106:
1812  0644  21 00 00    	ld	hl,_player_onstair
1813  0647  7E          	ld	a, (hl)
1814  0648  B7          	or	a, a
1815  0649  28 0A       	jr	Z,l_player_check_stairs_00109
1816  064B  36 00       	ld	(hl),0x00
1817  064D  21 60 08    	ld	hl,0x0860
1818  0650  E5          	push	hl
1819  0651  CD 59 06    	call	_player_tile
1820  0654  F1          	pop	af
1821  0655              l_player_check_stairs_00109:
1822  0655  33          	inc	sp
1823  0656  DD E1       	pop	ix
1824  0658  C9          	ret
1825  0659              	SECTION code_compiler
1826  0659              ;	---------------------------------
1827  0659              ; Function player_tile
1828  0659              ; ---------------------------------
1829  0659              _player_tile:
1830  0659  CD 00 00    	call	___sdcc_enter_ix
1831  065C  DD 7E 05    	ld	a,(ix+5)
1832  065F  F5          	push	af
1833  0660  33          	inc	sp
1834  0661  2A FF FF    	ld	hl,(_sprite-1)
1835  0664  DD 6E 04    	ld	l,(ix+4)
1836  0667  E5          	push	hl
1837  0668  CD 00 00    	call	_spr_tile_dir
1838  066B  F1          	pop	af
1839  066C  33          	inc	sp
1840  066D  7D          	ld	a,l
1841  066E  32 07 00    	ld	((_tile + 0x0007)),a
1842  0671  DD E1       	pop	ix
1843  0673  C9          	ret
1844  0674              	SECTION code_compiler
1845  0674              ;	---------------------------------
1846  0674              ; Function player_check_map
1847  0674              ; ---------------------------------
1848  0674              _player_check_map:
1849  0674  21 07 00    	ld	hl,+(_col + 0x0007)
1850  0677  46          	ld	b, (hl)
1851  0678  21 07 00    	ld	hl,+(_lin + 0x0007)
1852  067B  4E          	ld	c, (hl)
1853  067C  C5          	push	bc
1854  067D  CD 00 00    	call	_spr_calc_index
1855  0680  F1          	pop	af
1856  0681  7D          	ld	a,l
1857  0682  32 00 00    	ld	(_sprite_curr_index),a
1858  0685  21 07 00    	ld	hl,+(_col + 0x0007)
1859  0688  4E          	ld	c, (hl)
1860  0689  3A 07 00    	ld	a,(_lin + 0x0007)
1861  068C  E6 0F       	and	a,0x0f
1862  068E  CB 41       	bit	0, c
1863  0690  20 17       	jr	NZ,l_player_check_map_00108
1864  0692  B7          	or	a, a
1865  0693  20 05       	jr	NZ,l_player_check_map_00102
1866  0695  CD D4 06    	call	_player_pick_item
1867  0698  18 39       	jr	l_player_check_map_00110
1868  069A              l_player_check_map_00102:
1869  069A  CD D4 06    	call	_player_pick_item
1870  069D  21 00 00    	ld	hl,_sprite_curr_index
1871  06A0  7E          	ld	a, (hl)
1872  06A1  C6 10       	add	a,0x10
1873  06A3  77          	ld	(hl), a
1874  06A4  CD D4 06    	call	_player_pick_item
1875  06A7  18 2A       	jr	l_player_check_map_00110
1876  06A9              l_player_check_map_00108:
1877  06A9  B7          	or	a, a
1878  06AA  20 0C       	jr	NZ,l_player_check_map_00105
1879  06AC  CD D4 06    	call	_player_pick_item
1880  06AF  21 00 00    	ld	hl,_sprite_curr_index
1881  06B2  34          	inc	(hl)
1882  06B3  CD D4 06    	call	_player_pick_item
1883  06B6  18 1B       	jr	l_player_check_map_00110
1884  06B8              l_player_check_map_00105:
1885  06B8  CD D4 06    	call	_player_pick_item
1886  06BB  21 00 00    	ld	hl,_sprite_curr_index
1887  06BE  34          	inc	(hl)
1888  06BF  CD D4 06    	call	_player_pick_item
1889  06C2  21 00 00    	ld	hl,_sprite_curr_index
1890  06C5  7E          	ld	a, (hl)
1891  06C6  C6 0F       	add	a,0x0f
1892  06C8  77          	ld	(hl), a
1893  06C9  CD D4 06    	call	_player_pick_item
1894  06CC  21 00 00    	ld	hl,_sprite_curr_index
1895  06CF  34          	inc	(hl)
1896  06D0  CD D4 06    	call	_player_pick_item
1897  06D3              l_player_check_map_00110:
1898  06D3  C9          	ret
1899  06D4              	SECTION code_compiler
1900  06D4              ;	---------------------------------
1901  06D4              ; Function player_pick_item
1902  06D4              ; ---------------------------------
1903  06D4              _player_pick_item:
1904  06D4  CD 00 00    	call	___sdcc_enter_ix
1905  06D7  3B          	dec	sp
1906  06D8  2A 00 00    	ld	hl,(_sprite_curr_index)
1907  06DB  26 00       	ld	h,0x00
1908  06DD  01 00 00    	ld	bc,_scr_map
1909  06E0  09          	add	hl,bc
1910  06E1  7E          	ld	a,(hl)
1911  06E2  DD 77 FF    	ld	(ix-1),a
1912  06E5  D6 24       	sub	a,0x24
1913  06E7  DA 60 08    	jp	C, l_player_pick_item_00131
1914  06EA  3E 2F       	ld	a,0x2f
1915  06EC  DD 96 FF    	sub	a,(ix-1)
1916  06EF  DA 60 08    	jp	C, l_player_pick_item_00131
1917  06F2  CD 00 00    	call	_ay_reset
1918  06F5  21 00 00    	ld	hl,_ay_effect_10
1919  06F8  CD 00 00    	call	_ay_fx_play
1920  06FB  CD 00 00    	call	_sound_coin
1921  06FE  2A 00 00    	ld	hl,(_sprite_curr_index)
1922  0701  26 00       	ld	h,0x00
1923  0703  01 00 00    	ld	bc,_scr_map
1924  0706  09          	add	hl,bc
1925  0707  3A 00 00    	ld	a,(_sprite_curr_index)
1926  070A  5F          	ld	e,a
1927  070B  16 00       	ld	d,0x00
1928  070D  E5          	push	hl
1929  070E  D5          	push	de
1930  070F  CD 00 00    	call	_game_match_back
1931  0712  F1          	pop	af
1932  0713  C1          	pop	bc
1933  0714  7D          	ld	a,l
1934  0715  02          	ld	(bc), a
1935  0716  2A 00 00    	ld	hl,(_sprite_curr_index)
1936  0719  26 00       	ld	h,0x00
1937  071B  CD 00 00    	call	_game_obj_set
1938  071E  3A 00 00    	ld	a,(_sprite_curr_index)
1939  0721  07          	rlca
1940  0722  07          	rlca
1941  0723  07          	rlca
1942  0724  07          	rlca
1943  0725  E6 0F       	and	a,0x0f
1944  0727  07          	rlca
1945  0728  07          	rlca
1946  0729  07          	rlca
1947  072A  07          	rlca
1948  072B  E6 F0       	and	a,0xf0
1949  072D  32 00 00    	ld	(_s_lin1),a
1950  0730  3A 00 00    	ld	a,(_sprite_curr_index)
1951  0733  E6 0F       	and	a,0x0f
1952  0735  87          	add	a, a
1953  0736  32 00 00    	ld	(_s_col1),a
1954  0739  21 00 00    	ld	hl,0x0000
1955  073C  E5          	push	hl
1956  073D  21 84 03    	ld	hl,0x0384
1957  0740  E5          	push	hl
1958  0741  F5          	push	af
1959  0742  33          	inc	sp
1960  0743  3A 00 00    	ld	a,(_s_lin1)
1961  0746  F5          	push	af
1962  0747  33          	inc	sp
1963  0748  CD 00 00    	call	_spr_add_anim
1964  074B  F1          	pop	af
1965  074C  F1          	pop	af
1966  074D  F1          	pop	af
1967  074E  DD 7E FF    	ld	a,(ix-1)
1968  0751  D6 24       	sub	a,0x24
1969  0753  DA 60 08    	jp	C, l_player_pick_item_00131
1970  0756  3E 2F       	ld	a,0x2f
1971  0758  DD 96 FF    	sub	a,(ix-1)
1972  075B  DA 60 08    	jp	C, l_player_pick_item_00131
1973  075E  DD 7E FF    	ld	a,(ix-1)
1974  0761  C6 DC       	add	a,0xdc
1975  0763  4F          	ld	c, a
1976  0764  06 00       	ld	b,0x00
1977  0766  21 6D 07    	ld	hl,l_player_pick_item_00177
1978  0769  09          	add	hl, bc
1979  076A  09          	add	hl, bc
1980  076B  09          	add	hl, bc
1981  076C  E9          	jp	(hl)
1982  076D              l_player_pick_item_00177:
1983  076D  C3 91 07    	jp	l_player_pick_item_00101
1984  0770  C3 9C 07    	jp	l_player_pick_item_00102
1985  0773  C3 A7 07    	jp	l_player_pick_item_00103
1986  0776  C3 B2 07    	jp	l_player_pick_item_00104
1987  0779  C3 BD 07    	jp	l_player_pick_item_00105
1988  077C  C3 E4 07    	jp	l_player_pick_item_00109
1989  077F  C3 F9 07    	jp	l_player_pick_item_00112
1990  0782  C3 0E 08    	jp	l_player_pick_item_00115
1991  0785  C3 23 08    	jp	l_player_pick_item_00118
1992  0788  C3 38 08    	jp	l_player_pick_item_00121
1993  078B  C3 4D 08    	jp	l_player_pick_item_00124
1994  078E  C3 DB 07    	jp	l_player_pick_item_00108
1995  0791              l_player_pick_item_00101:
1996  0791  21 00 00    	ld	hl,_player_keys
1997  0794  36 01       	ld	(hl),0x01
1998  0796  CD 00 00    	call	_game_update_stats
1999  0799  C3 60 08    	jp	l_player_pick_item_00131
2000  079C              l_player_pick_item_00102:
2001  079C  21 01 00    	ld	hl, +(_player_keys + 0x0001)
2002  079F  36 01       	ld	(hl),0x01
2003  07A1  CD 00 00    	call	_game_update_stats
2004  07A4  C3 60 08    	jp	l_player_pick_item_00131
2005  07A7              l_player_pick_item_00103:
2006  07A7  21 02 00    	ld	hl, +(_player_keys + 0x0002)
2007  07AA  36 01       	ld	(hl),0x01
2008  07AC  CD 00 00    	call	_game_update_stats
2009  07AF  C3 60 08    	jp	l_player_pick_item_00131
2010  07B2              l_player_pick_item_00104:
2011  07B2  21 03 00    	ld	hl, +(_player_keys + 0x0003)
2012  07B5  36 01       	ld	(hl),0x01
2013  07B7  CD 00 00    	call	_game_update_stats
2014  07BA  C3 60 08    	jp	l_player_pick_item_00131
2015  07BD              l_player_pick_item_00105:
2016  07BD  21 01 00    	ld	hl,0x0001
2017  07C0  CD 1E 0B    	call	_player_score_add
2018  07C3  21 00 00    	ld	hl,_player_coins
2019  07C6  7E          	ld	a,(hl)
2020  07C7  3C          	inc	a
2021  07C8  77          	ld	(hl),a
2022  07C9  D6 64       	sub	a,0x64
2023  07CB  20 08       	jr	NZ,l_player_pick_item_00107
2024  07CD  CD F7 04    	call	_player_1up
2025  07D0  21 00 00    	ld	hl,_player_coins
2026  07D3  36 00       	ld	(hl),0x00
2027  07D5              l_player_pick_item_00107:
2028  07D5  CD 00 00    	call	_game_update_stats
2029  07D8  C3 60 08    	jp	l_player_pick_item_00131
2030  07DB              l_player_pick_item_00108:
2031  07DB  21 0A 00    	ld	hl,0x000a
2032  07DE  CD 1E 0B    	call	_player_score_add
2033  07E1  C3 60 08    	jp	l_player_pick_item_00131
2034  07E4              l_player_pick_item_00109:
2035  07E4  21 00 00    	ld	hl,_player_str
2036  07E7  34          	inc	(hl)
2037  07E8  21 00 00    	ld	hl,_player_max_vita
2038  07EB  7E          	ld	a, (hl)
2039  07EC  D6 C8       	sub	a,0xc8
2040  07EE  30 70       	jr	NC,l_player_pick_item_00131
2041  07F0  7E          	ld	a, (hl)
2042  07F1  C6 0A       	add	a,0x0a
2043  07F3  77          	ld	(hl), a
2044  07F4  CD 00 00    	call	_game_update_stats
2045  07F7  18 67       	jr	l_player_pick_item_00131
2046  07F9              l_player_pick_item_00112:
2047  07F9  21 00 00    	ld	hl,_player_str
2048  07FC  34          	inc	(hl)
2049  07FD  21 00 00    	ld	hl,_player_max_vita
2050  0800  7E          	ld	a, (hl)
2051  0801  D6 C8       	sub	a,0xc8
2052  0803  30 5B       	jr	NC,l_player_pick_item_00131
2053  0805  7E          	ld	a, (hl)
2054  0806  C6 0A       	add	a,0x0a
2055  0808  77          	ld	(hl), a
2056  0809  CD 00 00    	call	_game_update_stats
2057  080C  18 52       	jr	l_player_pick_item_00131
2058  080E              l_player_pick_item_00115:
2059  080E  21 00 00    	ld	hl,_player_str
2060  0811  34          	inc	(hl)
2061  0812  21 00 00    	ld	hl,_player_max_vita
2062  0815  7E          	ld	a, (hl)
2063  0816  D6 C8       	sub	a,0xc8
2064  0818  30 46       	jr	NC,l_player_pick_item_00131
2065  081A  7E          	ld	a, (hl)
2066  081B  C6 0A       	add	a,0x0a
2067  081D  77          	ld	(hl), a
2068  081E  CD 00 00    	call	_game_update_stats
2069  0821  18 3D       	jr	l_player_pick_item_00131
2070  0823              l_player_pick_item_00118:
2071  0823  21 00 00    	ld	hl,_player_int
2072  0826  34          	inc	(hl)
2073  0827  21 00 00    	ld	hl,_player_max_mana
2074  082A  7E          	ld	a, (hl)
2075  082B  D6 C8       	sub	a,0xc8
2076  082D  30 31       	jr	NC,l_player_pick_item_00131
2077  082F  7E          	ld	a, (hl)
2078  0830  C6 0A       	add	a,0x0a
2079  0832  77          	ld	(hl), a
2080  0833  CD 00 00    	call	_game_update_stats
2081  0836  18 28       	jr	l_player_pick_item_00131
2082  0838              l_player_pick_item_00121:
2083  0838  21 00 00    	ld	hl,_player_int
2084  083B  34          	inc	(hl)
2085  083C  21 00 00    	ld	hl,_player_max_mana
2086  083F  7E          	ld	a, (hl)
2087  0840  D6 C8       	sub	a,0xc8
2088  0842  30 1C       	jr	NC,l_player_pick_item_00131
2089  0844  7E          	ld	a, (hl)
2090  0845  C6 0A       	add	a,0x0a
2091  0847  77          	ld	(hl), a
2092  0848  CD 00 00    	call	_game_update_stats
2093  084B  18 13       	jr	l_player_pick_item_00131
2094  084D              l_player_pick_item_00124:
2095  084D  21 00 00    	ld	hl,_player_int
2096  0850  34          	inc	(hl)
2097  0851  21 00 00    	ld	hl,_player_max_mana
2098  0854  7E          	ld	a, (hl)
2099  0855  D6 C8       	sub	a,0xc8
2100  0857  30 07       	jr	NC,l_player_pick_item_00131
2101  0859  7E          	ld	a, (hl)
2102  085A  C6 0A       	add	a,0x0a
2103  085C  77          	ld	(hl), a
2104  085D  CD 00 00    	call	_game_update_stats
2105  0860              l_player_pick_item_00131:
2106  0860  33          	inc	sp
2107  0861  DD E1       	pop	ix
2108  0863  C9          	ret
2109  0864              	SECTION code_compiler
2110  0864              ;	---------------------------------
2111  0864              ; Function player_hit_platform
2112  0864              ; ---------------------------------
2113  0864              _player_hit_platform:
2114  0864  3A 00 00    	ld	a,(_player_hit_lin)
2115  0867  B7          	or	a, a
2116  0868  C2 EC 0A    	jp	NZ, l_player_hit_platform_00145
2117  086B  21 07 00    	ld	hl,+(_lin + 0x0007)
2118  086E  4E          	ld	c, (hl)
2119  086F  3E 10       	ld	a,0x10
2120  0871  91          	sub	a, c
2121  0872  D2 EC 0A    	jp	NC, l_player_hit_platform_00145
2122  0875  01 00 00    	ld	bc,_scr_map
2123  0878  2A 00 00    	ld	hl,(_index1)
2124  087B  09          	add	hl,bc
2125  087C  7E          	ld	a,(hl)
2126  087D  D6 45       	sub	a,0x45
2127  087F  DA EC 0A    	jp	C, l_player_hit_platform_00145
2128  0882  2A 00 00    	ld	hl,(_curr_time)
2129  0885  22 0E 00    	ld	(_spr_timer + 0x000e),hl
2130  0888  3A 07 00    	ld	a,(_lin + 0x0007)
2131  088B  06 00       	ld	b,0x00
2132  088D  C6 F8       	add	a,0xf8
2133  088F  4F          	ld	c, a
2134  0890  78          	ld	a, b
2135  0891  CE FF       	adc	a,0xff
2136  0893  5F          	ld	e, a
2137  0894  06 04       	ld	b,0x04
2138  0896              l_player_hit_platform_00250:
2139  0896  CB 2B       	sra	e
2140  0898  CB 19       	rr	c
2141  089A  10 FA       	djnz	l_player_hit_platform_00250
2142  089C  79          	ld	a, c
2143  089D  07          	rlca
2144  089E  07          	rlca
2145  089F  07          	rlca
2146  08A0  07          	rlca
2147  08A1  E6 F0       	and	a,0xf0
2148  08A3  C6 08       	add	a,0x08
2149  08A5  32 00 00    	ld	(_player_hit_lin),a
2150  08A8  21 07 00    	ld	hl,+(_col + 0x0007)
2151  08AB  4E          	ld	c, (hl)
2152  08AC  CB 41       	bit	0, c
2153  08AE  20 06       	jr	NZ,l_player_hit_platform_00111
2154  08B0  21 00 00    	ld	hl,_player_hit_col
2155  08B3  71          	ld	(hl), c
2156  08B4  18 2D       	jr	l_player_hit_platform_00112
2157  08B6              l_player_hit_platform_00111:
2158  08B6  21 07 00    	ld	hl,+(_state + 0x0007)
2159  08B9  5E          	ld	e, (hl)
2160  08BA  41          	ld	b, c
2161  08BB  04          	inc	b
2162  08BC  0D          	dec	c
2163  08BD  CB 5B       	bit	3, e
2164  08BF  28 12       	jr	Z,l_player_hit_platform_00108
2165  08C1  3A 00 00    	ld	a,(_g_player_hit_right)
2166  08C4  B7          	or	a, a
2167  08C5  28 06       	jr	Z,l_player_hit_platform_00102
2168  08C7  21 00 00    	ld	hl,_player_hit_col
2169  08CA  70          	ld	(hl), b
2170  08CB  18 16       	jr	l_player_hit_platform_00112
2171  08CD              l_player_hit_platform_00102:
2172  08CD  21 00 00    	ld	hl,_player_hit_col
2173  08D0  71          	ld	(hl), c
2174  08D1  18 10       	jr	l_player_hit_platform_00112
2175  08D3              l_player_hit_platform_00108:
2176  08D3  3A 00 00    	ld	a,(_g_player_hit_left)
2177  08D6  B7          	or	a, a
2178  08D7  28 06       	jr	Z,l_player_hit_platform_00105
2179  08D9  21 00 00    	ld	hl,_player_hit_col
2180  08DC  71          	ld	(hl), c
2181  08DD  18 04       	jr	l_player_hit_platform_00112
2182  08DF              l_player_hit_platform_00105:
2183  08DF  21 00 00    	ld	hl,_player_hit_col
2184  08E2  70          	ld	(hl), b
2185  08E3              l_player_hit_platform_00112:
2186  08E3  2A 00 00    	ld	hl,(_index1)
2187  08E6  01 00 00    	ld	bc,_scr_map
2188  08E9  09          	add	hl,bc
2189  08EA  7E          	ld	a,(hl)
2190  08EB  FE 4D       	cp	a,0x4d
2191  08ED  20 41       	jr	NZ,l_player_hit_platform_00114
2192  08EF  E5          	push	hl
2193  08F0  2A 00 00    	ld	hl,(_index1)
2194  08F3  E5          	push	hl
2195  08F4  CD 00 00    	call	_game_match_back
2196  08F7  F1          	pop	af
2197  08F8  C1          	pop	bc
2198  08F9  7D          	ld	a,l
2199  08FA  02          	ld	(bc), a
2200  08FB  2A 00 00    	ld	hl,(_index1)
2201  08FE  CD 00 00    	call	_game_obj_set
2202  0901  21 00 00    	ld	hl,_index1
2203  0904  7E          	ld	a, (hl)
2204  0905  E6 0F       	and	a,0x0f
2205  0907  87          	add	a, a
2206  0908  57          	ld	d, a
2207  0909  4E          	ld	c, (hl)
2208  090A  23          	inc	hl
2209  090B  5E          	ld	e, (hl)
2210  090C  06 04       	ld	b,0x04
2211  090E  79          	ld	a,c
2212  090F              l_player_hit_platform_00256:
2213  090F  CB 3B       	srl	e
2214  0911  1F          	rra
2215  0912  10 FB       	djnz	l_player_hit_platform_00256
2216  0914  07          	rlca
2217  0915  07          	rlca
2218  0916  07          	rlca
2219  0917  07          	rlca
2220  0918  E6 F0       	and	a,0xf0
2221  091A  47          	ld	b, a
2222  091B  21 00 00    	ld	hl,0x0000
2223  091E  E5          	push	hl
2224  091F  21 87 03    	ld	hl,0x0387
2225  0922  E5          	push	hl
2226  0923  58          	ld	e,b
2227  0924  D5          	push	de
2228  0925  CD 00 00    	call	_spr_add_anim
2229  0928  F1          	pop	af
2230  0929  F1          	pop	af
2231  092A  F1          	pop	af
2232  092B  2E 01       	ld	l,0x01
2233  092D  C3 EE 0A    	jp	l_player_hit_platform_00148
2234  0930              l_player_hit_platform_00114:
2235  0930  FE 5C       	cp	a,0x5c
2236  0932  28 05       	jr	Z,l_player_hit_platform_00141
2237  0934  D6 5D       	sub	a,0x5d
2238  0936  C2 E0 0A    	jp	NZ,l_player_hit_platform_00142
2239  0939              l_player_hit_platform_00141:
2240  0939  21 00 00    	ld	hl,_tmp0
2241  093C  36 00       	ld	(hl),0x00
2242  093E  3A 00 00    	ld	a,(_game_boss)
2243  0941  B7          	or	a, a
2244  0942  28 0B       	jr	Z,l_player_hit_platform_00174
2245  0944  3A 00 00    	ld	a,(_game_mush_count)
2246  0947  B7          	or	a, a
2247  0948  28 05       	jr	Z,l_player_hit_platform_00174
2248  094A  2E 00       	ld	l,0x00
2249  094C  C3 EE 0A    	jp	l_player_hit_platform_00148
2250  094F              l_player_hit_platform_00174:
2251  094F              l_player_hit_platform_00138:
2252  094F  21 00 00    	ld	hl,_tmp0
2253  0952  7E          	ld	a, (hl)
2254  0953  D6 07       	sub	a,0x07
2255  0955  D2 E0 0A    	jp	NC, l_player_hit_platform_00142
2256  0958  4E          	ld	c,(hl)
2257  0959  06 00       	ld	b,0x00
2258  095B  21 00 00    	ld	hl,_mush_index
2259  095E  09          	add	hl,bc
2260  095F  4E          	ld	c, (hl)
2261  0960  06 00       	ld	b,0x00
2262  0962  2A 00 00    	ld	hl,(_index1)
2263  0965  AF          	xor	a,a
2264  0966  ED 42       	sbc	hl,bc
2265  0968  C2 D9 0A    	jp	NZ,l_player_hit_platform_00137
2266  096B  3A 07 00    	ld	a,(_lin + 0x0007)
2267  096E  07          	rlca
2268  096F  07          	rlca
2269  0970  07          	rlca
2270  0971  07          	rlca
2271  0972  E6 0F       	and	a,0x0f
2272  0974  07          	rlca
2273  0975  07          	rlca
2274  0976  07          	rlca
2275  0977  07          	rlca
2276  0978  E6 F0       	and	a,0xf0
2277  097A  C6 E0       	add	a,0xe0
2278  097C  32 00 00    	ld	(_s_lin1),a
2279  097F  3A 07 00    	ld	a,(_col + 0x0007)
2280  0982  CB 3F       	srl	a
2281  0984  87          	add	a, a
2282  0985  32 00 00    	ld	(_s_col1),a
2283  0988  21 00 00    	ld	hl,_tmp
2284  098B  36 00       	ld	(hl),0x00
2285  098D              l_player_hit_platform_00120:
2286  098D  21 00 00    	ld	hl,_tmp
2287  0990  7E          	ld	a, (hl)
2288  0991  D6 07       	sub	a,0x07
2289  0993  30 1C       	jr	NC,l_player_hit_platform_00122
2290  0995  4E          	ld	c,(hl)
2291  0996  06 00       	ld	b,0x00
2292  0998  21 00 00    	ld	hl,_mush_index
2293  099B  09          	add	hl,bc
2294  099C  4E          	ld	c, (hl)
2295  099D  06 00       	ld	b,0x00
2296  099F  21 00 00    	ld	hl,_index1
2297  09A2  7E          	ld	a, (hl)
2298  09A3  91          	sub	a, c
2299  09A4  20 05       	jr	NZ,l_player_hit_platform_00262
2300  09A6  23          	inc	hl
2301  09A7  7E          	ld	a, (hl)
2302  09A8  90          	sub	a, b
2303  09A9  28 06       	jr	Z,l_player_hit_platform_00122
2304  09AB              l_player_hit_platform_00262:
2305  09AB  21 00 00    	ld	hl,_tmp
2306  09AE  34          	inc	(hl)
2307  09AF  18 DC       	jr	l_player_hit_platform_00120
2308  09B1              l_player_hit_platform_00122:
2309  09B1  2A 00 00    	ld	hl,(_tmp)
2310  09B4  26 00       	ld	h,0x00
2311  09B6  01 00 00    	ld	bc,_mush_class
2312  09B9  09          	add	hl,bc
2313  09BA  7E          	ld	a,(hl)
2314  09BB  FE 78       	cp	a,0x78
2315  09BD  28 18       	jr	Z,l_player_hit_platform_00123
2316  09BF  FE 79       	cp	a,0x79
2317  09C1  28 2F       	jr	Z,l_player_hit_platform_00124
2318  09C3  FE 7A       	cp	a,0x7a
2319  09C5  28 5F       	jr	Z,l_player_hit_platform_00126
2320  09C7  FE 7B       	cp	a,0x7b
2321  09C9  28 41       	jr	Z,l_player_hit_platform_00125
2322  09CB  FE 7C       	cp	a,0x7c
2323  09CD  CA 5A 0A    	jp	Z,l_player_hit_platform_00128
2324  09D0  D6 7D       	sub	a,0x7d
2325  09D2  28 6C       	jr	Z,l_player_hit_platform_00127
2326  09D4  C3 72 0A    	jp	l_player_hit_platform_00129
2327  09D7              l_player_hit_platform_00123:
2328  09D7  2E 02       	ld	l,0x02
2329  09D9  CD 00 00    	call	_zx_border_fastcall
2330  09DC  3A 00 00    	ld	a,(_s_col1)
2331  09DF  21 06 FF    	ld	hl,0xff06
2332  09E2  E5          	push	hl
2333  09E3  F5          	push	af
2334  09E4  33          	inc	sp
2335  09E5  3A 00 00    	ld	a,(_s_lin1)
2336  09E8  F5          	push	af
2337  09E9  33          	inc	sp
2338  09EA  CD 00 00    	call	_enemy_init
2339  09ED  F1          	pop	af
2340  09EE  F1          	pop	af
2341  09EF  C3 72 0A    	jp	l_player_hit_platform_00129
2342  09F2              l_player_hit_platform_00124:
2343  09F2  2E 02       	ld	l,0x02
2344  09F4  CD 00 00    	call	_zx_border_fastcall
2345  09F7  3A 00 00    	ld	a,(_s_col1)
2346  09FA  21 06 01    	ld	hl,0x0106
2347  09FD  E5          	push	hl
2348  09FE  F5          	push	af
2349  09FF  33          	inc	sp
2350  0A00  3A 00 00    	ld	a,(_s_lin1)
2351  0A03  F5          	push	af
2352  0A04  33          	inc	sp
2353  0A05  CD 00 00    	call	_enemy_init
2354  0A08  F1          	pop	af
2355  0A09  F1          	pop	af
2356  0A0A  18 66       	jr	l_player_hit_platform_00129
2357  0A0C              l_player_hit_platform_00125:
2358  0A0C  2E 01       	ld	l,0x01
2359  0A0E  CD 00 00    	call	_zx_border_fastcall
2360  0A11  3A 00 00    	ld	a,(_s_col1)
2361  0A14  21 07 01    	ld	hl,0x0107
2362  0A17  E5          	push	hl
2363  0A18  F5          	push	af
2364  0A19  33          	inc	sp
2365  0A1A  3A 00 00    	ld	a,(_s_lin1)
2366  0A1D  F5          	push	af
2367  0A1E  33          	inc	sp
2368  0A1F  CD 00 00    	call	_enemy_init
2369  0A22  F1          	pop	af
2370  0A23  F1          	pop	af
2371  0A24  18 4C       	jr	l_player_hit_platform_00129
2372  0A26              l_player_hit_platform_00126:
2373  0A26  2E 01       	ld	l,0x01
2374  0A28  CD 00 00    	call	_zx_border_fastcall
2375  0A2B  3A 00 00    	ld	a,(_s_col1)
2376  0A2E  21 07 FF    	ld	hl,0xff07
2377  0A31  E5          	push	hl
2378  0A32  F5          	push	af
2379  0A33  33          	inc	sp
2380  0A34  3A 00 00    	ld	a,(_s_lin1)
2381  0A37  F5          	push	af
2382  0A38  33          	inc	sp
2383  0A39  CD 00 00    	call	_enemy_init
2384  0A3C  F1          	pop	af
2385  0A3D  F1          	pop	af
2386  0A3E  18 32       	jr	l_player_hit_platform_00129
2387  0A40              l_player_hit_platform_00127:
2388  0A40  2E 04       	ld	l,0x04
2389  0A42  CD 00 00    	call	_zx_border_fastcall
2390  0A45  3A 00 00    	ld	a,(_s_col1)
2391  0A48  21 08 01    	ld	hl,0x0108
2392  0A4B  E5          	push	hl
2393  0A4C  F5          	push	af
2394  0A4D  33          	inc	sp
2395  0A4E  3A 00 00    	ld	a,(_s_lin1)
2396  0A51  F5          	push	af
2397  0A52  33          	inc	sp
2398  0A53  CD 00 00    	call	_enemy_init
2399  0A56  F1          	pop	af
2400  0A57  F1          	pop	af
2401  0A58  18 18       	jr	l_player_hit_platform_00129
2402  0A5A              l_player_hit_platform_00128:
2403  0A5A  2E 04       	ld	l,0x04
2404  0A5C  CD 00 00    	call	_zx_border_fastcall
2405  0A5F  3A 00 00    	ld	a,(_s_col1)
2406  0A62  21 08 FF    	ld	hl,0xff08
2407  0A65  E5          	push	hl
2408  0A66  F5          	push	af
2409  0A67  33          	inc	sp
2410  0A68  3A 00 00    	ld	a,(_s_lin1)
2411  0A6B  F5          	push	af
2412  0A6C  33          	inc	sp
2413  0A6D  CD 00 00    	call	_enemy_init
2414  0A70  F1          	pop	af
2415  0A71  F1          	pop	af
2416  0A72              l_player_hit_platform_00129:
2417  0A72  21 00 00    	ld	hl,_game_mush_count
2418  0A75  34          	inc	(hl)
2419  0A76  3A 00 00    	ld	a,(_game_boss)
2420  0A79  B7          	or	a, a
2421  0A7A  20 5D       	jr	NZ,l_player_hit_platform_00137
2422  0A7C  3A 00 00    	ld	a,(_index1)
2423  0A7F  C6 F0       	add	a,0xf0
2424  0A81  32 00 00    	ld	(_index0),a
2425  0A84  3A 01 00    	ld	a,(_index1 + 1)
2426  0A87  CE FF       	adc	a,0xff
2427  0A89  21 01 00    	ld	hl,_index0 + 1
2428  0A8C  77          	ld	(hl), a
2429  0A8D  3E 00       	ld	a, +((_scr_map) & 0xFF)
2430  0A8F  2B          	dec	hl
2431  0A90  86          	add	a, (hl)
2432  0A91  4F          	ld	c, a
2433  0A92  3E 00       	ld	a, +((_scr_map) / 256)
2434  0A94  23          	inc	hl
2435  0A95  8E          	adc	a, (hl)
2436  0A96  47          	ld	b, a
2437  0A97  C5          	push	bc
2438  0A98  46          	ld	b,(hl)
2439  0A99  2B          	dec	hl
2440  0A9A  4E          	ld	c,(hl)
2441  0A9B  C5          	push	bc
2442  0A9C  CD 00 00    	call	_game_match_back
2443  0A9F  F1          	pop	af
2444  0AA0  C1          	pop	bc
2445  0AA1  7D          	ld	a,l
2446  0AA2  02          	ld	(bc), a
2447  0AA3  01 00 00    	ld	bc,_scr_map
2448  0AA6  2A 00 00    	ld	hl,(_index1)
2449  0AA9  09          	add	hl,bc
2450  0AAA  7E          	ld	a,(hl)
2451  0AAB  FE 5C       	cp	a,0x5c
2452  0AAD  4D          	ld	c,l
2453  0AAE  44          	ld	b,h
2454  0AAF  28 04       	jr	Z,l_player_hit_platform_00130
2455  0AB1  D6 5D       	sub	a,0x5d
2456  0AB3  20 05       	jr	NZ,l_player_hit_platform_00131
2457  0AB5              l_player_hit_platform_00130:
2458  0AB5  3E 4F       	ld	a,0x4f
2459  0AB7  02          	ld	(bc), a
2460  0AB8  18 03       	jr	l_player_hit_platform_00132
2461  0ABA              l_player_hit_platform_00131:
2462  0ABA  3E 54       	ld	a,0x54
2463  0ABC  02          	ld	(bc), a
2464  0ABD              l_player_hit_platform_00132:
2465  0ABD  2A 00 00    	ld	hl,(_index1)
2466  0AC0  01 F0 FF    	ld	bc,0xfff0
2467  0AC3  09          	add	hl,bc
2468  0AC4  CD 00 00    	call	_game_obj_set
2469  0AC7  3A 00 00    	ld	a,(_s_lin1)
2470  0ACA  C6 10       	add	a,0x10
2471  0ACC  4F          	ld	c, a
2472  0ACD  3A 00 00    	ld	a, (_s_col1)
2473  0AD0  47          	ld	b,a
2474  0AD1  C5          	push	bc
2475  0AD2  3E 4F       	ld	a,0x4f
2476  0AD4  F5          	push	af
2477  0AD5  33          	inc	sp
2478  0AD6  CD 00 00    	call	_NIRVANAP_drawT_callee
2479  0AD9              l_player_hit_platform_00137:
2480  0AD9  21 00 00    	ld	hl,_tmp0
2481  0ADC  34          	inc	(hl)
2482  0ADD  C3 4F 09    	jp	l_player_hit_platform_00138
2483  0AE0              l_player_hit_platform_00142:
2484  0AE0  2E 01       	ld	l,0x01
2485  0AE2  CD 00 00    	call	_spr_brick_anim
2486  0AE5  CD 00 00    	call	_sound_hit_brick
2487  0AE8  2E 01       	ld	l,0x01
2488  0AEA  18 02       	jr	l_player_hit_platform_00148
2489  0AEC              l_player_hit_platform_00145:
2490  0AEC  2E 00       	ld	l,0x00
2491  0AEE              l_player_hit_platform_00148:
2492  0AEE  C9          	ret
2493  0AEF              	SECTION code_compiler
2494  0AEF              ;	---------------------------------
2495  0AEF              ; Function player_hit_platform_clear
2496  0AEF              ; ---------------------------------
2497  0AEF              _player_hit_platform_clear:
2498  0AEF  01 04 00    	ld	bc,0x0004
2499  0AF2  C5          	push	bc
2500  0AF3  2A 0E 00    	ld	hl,(_spr_timer + 0x000e)
2501  0AF6  E5          	push	hl
2502  0AF7  CD 00 00    	call	_game_check_time
2503  0AFA  F1          	pop	af
2504  0AFB  F1          	pop	af
2505  0AFC  7D          	ld	a, l
2506  0AFD  B7          	or	a, a
2507  0AFE  C8          	ret	Z
2508  0AFF  2A FF FF    	ld	hl,(_player_hit_col - 1)
2509  0B02  3A 00 00    	ld	a,(_player_hit_lin)
2510  0B05  6F          	ld	l,a
2511  0B06  E5          	push	hl
2512  0B07  CD 00 00    	call	_spr_calc_index
2513  0B0A  F1          	pop	af
2514  0B0B  22 00 00    	ld	(_index1),hl
2515  0B0E  2E 00       	ld	l,0x00
2516  0B10  CD 00 00    	call	_spr_brick_anim
2517  0B13  21 00 00    	ld	hl,_player_hit_lin
2518  0B16  36 00       	ld	(hl),0x00
2519  0B18  21 00 00    	ld	hl,_player_hit_col
2520  0B1B  36 00       	ld	(hl),0x00
2521  0B1D  C9          	ret
2522  0B1E              	SECTION code_compiler
2523  0B1E              ;	---------------------------------
2524  0B1E              ; Function player_score_add
2525  0B1E              ; ---------------------------------
2526  0B1E              _player_score_add:
2527  0B1E  ED 4B 00 00 	ld	bc,(_player_score)
2528  0B22  09          	add	hl,bc
2529  0B23  22 00 00    	ld	(_player_score),hl
2530  0B26  21 00 00    	ld	hl,_player_lvl
2531  0B29  7E          	ld	a, (hl)
2532  0B2A  D6 14       	sub	a,0x14
2533  0B2C  30 3C       	jr	NC,l_player_score_add_00104
2534  0B2E  01 00 00    	ld	bc,_player_lvl_table+0
2535  0B31  6E          	ld	l,(hl)
2536  0B32  26 00       	ld	h,0x00
2537  0B34  29          	add	hl, hl
2538  0B35  09          	add	hl, bc
2539  0B36  4E          	ld	c, (hl)
2540  0B37  23          	inc	hl
2541  0B38  46          	ld	b, (hl)
2542  0B39  21 00 00    	ld	hl,_player_score
2543  0B3C  7E          	ld	a, (hl)
2544  0B3D  91          	sub	a, c
2545  0B3E  23          	inc	hl
2546  0B3F  7E          	ld	a, (hl)
2547  0B40  98          	sbc	a, b
2548  0B41  38 27       	jr	C,l_player_score_add_00104
2549  0B43  21 00 00    	ld	hl,_player_lvl
2550  0B46  34          	inc	(hl)
2551  0B47  21 06 00    	ld	hl,___str_1
2552  0B4A  E5          	push	hl
2553  0B4B  21 0C 0C    	ld	hl,0x0c0c
2554  0B4E  E5          	push	hl
2555  0B4F  CD 00 00    	call	_zx_print_str
2556  0B52  AF          	xor	a, a
2557  0B53  F5          	push	af
2558  0B54  33          	inc	sp
2559  0B55  21 19 00    	ld	hl,0x0019
2560  0B58  E5          	push	hl
2561  0B59  21 0C 15    	ld	hl,0x150c
2562  0B5C  E5          	push	hl
2563  0B5D  3E 0C       	ld	a,0x0c
2564  0B5F  F5          	push	af
2565  0B60  33          	inc	sp
2566  0B61  CD 00 00    	call	_game_colour_message
2567  0B64  F1          	pop	af
2568  0B65  F1          	pop	af
2569  0B66  F1          	pop	af
2570  0B67  CD 00 00    	call	_game_update_stats
2571  0B6A              l_player_score_add_00104:
2572  0B6A  3A 00 00    	ld	a,(_game_score_top)
2573  0B6D  21 00 00    	ld	hl,_player_score
2574  0B70  96          	sub	a, (hl)
2575  0B71  3A 01 00    	ld	a,(_game_score_top + 1)
2576  0B74  23          	inc	hl
2577  0B75  9E          	sbc	a, (hl)
2578  0B76  30 06       	jr	NC,l_player_score_add_00106
2579  0B78  2A 00 00    	ld	hl,(_player_score)
2580  0B7B  22 00 00    	ld	(_game_score_top),hl
2581  0B7E              l_player_score_add_00106:
2582  0B7E  CD 00 00    	call	_game_print_score
2583  0B81  C9          	ret
2584  0B82              	SECTION rodata_compiler
2585  0006              ___str_1:
2586  0006  4C 45 56 45 4C 20 55 50 21 
                        	DEFM "LEVEL UP!"
2587  000F  00          	DEFB 0x00
2588  0010              	SECTION code_compiler
2589  0B82              ;	---------------------------------
2590  0B82              ; Function player_check_floor
2591  0B82              ; ---------------------------------
2592  0B82              _player_check_floor:
2593  0B82  CD 00 00    	call	___sdcc_enter_ix
2594  0B85  F5          	push	af
2595  0B86  F5          	push	af
2596  0B87  F5          	push	af
2597  0B88  21 07 00    	ld	hl,+(_col + 0x0007)
2598  0B8B  56          	ld	d, (hl)
2599  0B8C  3A 07 00    	ld	a,(_lin + 0x0007)
2600  0B8F  C6 10       	add	a,0x10
2601  0B91  5F          	ld	e, a
2602  0B92  D5          	push	de
2603  0B93  CD 00 00    	call	_spr_calc_index
2604  0B96  F1          	pop	af
2605  0B97  DD 75 FC    	ld	(ix-4),l
2606  0B9A  DD 74 FD    	ld	(ix-3),h
2607  0B9D  01 00 00    	ld	bc,_scr_map+0
2608  0BA0  79          	ld	a, c
2609  0BA1  DD 86 FC    	add	a,(ix-4)
2610  0BA4  DD 77 FE    	ld	(ix-2),a
2611  0BA7  78          	ld	a, b
2612  0BA8  DD 8E FD    	adc	a,(ix-3)
2613  0BAB  DD 6E FE    	ld	l,(ix-2)
2614  0BAE  DD 77 FF    	ld	(ix-1),a
2615  0BB1  67          	ld	h,a
2616  0BB2  7E          	ld	a, (hl)
2617  0BB3  DD 77 FB    	ld	(ix-5),a
2618  0BB6  DD 6E FC    	ld	l,(ix-4)
2619  0BB9  DD 66 FD    	ld	h,(ix-3)
2620  0BBC  23          	inc	hl
2621  0BBD  09          	add	hl,bc
2622  0BBE  3A 00 00    	ld	a,(_s_lin0)
2623  0BC1  D6 90       	sub	a,0x90
2624  0BC3  4D          	ld	c,l
2625  0BC4  44          	ld	b,h
2626  0BC5  20 26       	jr	NZ,l_player_check_floor_00108
2627  0BC7  3A 00 00    	ld	a,(_map_heigth)
2628  0BCA  C5          	push	bc
2629  0BCB  F5          	push	af
2630  0BCC  33          	inc	sp
2631  0BCD  3A 00 00    	ld	a,(_scr_curr)
2632  0BD0  F5          	push	af
2633  0BD1  33          	inc	sp
2634  0BD2  CD 00 00    	call	__divuchar_callee
2635  0BD5  C1          	pop	bc
2636  0BD6  7D          	ld	a,l
2637  0BD7  3C          	inc	a
2638  0BD8  32 00 00    	ld	(_tmp1),a
2639  0BDB  21 00 00    	ld	hl,_map_heigth
2640  0BDE  96          	sub	a, (hl)
2641  0BDF  30 06       	jr	NC,l_player_check_floor_00102
2642  0BE1  DD 36 FB 00 	ld	(ix-5),0x00
2643  0BE5  18 16       	jr	l_player_check_floor_00109
2644  0BE7              l_player_check_floor_00102:
2645  0BE7  DD 36 FB 48 	ld	(ix-5),0x48
2646  0BEB  18 10       	jr	l_player_check_floor_00109
2647  0BED              l_player_check_floor_00108:
2648  0BED  3A 07 00    	ld	a,(_col + 0x0007)
2649  0BF0  0F          	rrca
2650  0BF1  38 06       	jr	C,l_player_check_floor_00105
2651  0BF3  DD 36 FA 00 	ld	(ix-6),0x00
2652  0BF7  18 04       	jr	l_player_check_floor_00109
2653  0BF9              l_player_check_floor_00105:
2654  0BF9  0A          	ld	a, (bc)
2655  0BFA  DD 77 FA    	ld	(ix-6),a
2656  0BFD              l_player_check_floor_00109:
2657  0BFD  DD 7E FB    	ld	a,(ix-5)
2658  0C00  D6 3C       	sub	a,0x3c
2659  0C02  38 07       	jr	C,l_player_check_floor_00132
2660  0C04  DD 7E FB    	ld	a,(ix-5)
2661  0C07  D6 60       	sub	a,0x60
2662  0C09  38 32       	jr	C,l_player_check_floor_00128
2663  0C0B              l_player_check_floor_00132:
2664  0C0B  DD 7E FA    	ld	a,(ix-6)
2665  0C0E  D6 3C       	sub	a,0x3c
2666  0C10  38 07       	jr	C,l_player_check_floor_00127
2667  0C12  DD 7E FA    	ld	a,(ix-6)
2668  0C15  D6 60       	sub	a,0x60
2669  0C17  38 24       	jr	C,l_player_check_floor_00128
2670  0C19              l_player_check_floor_00127:
2671  0C19  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
2672  0C1C  36 02       	ld	(hl),0x02
2673  0C1E  21 00 00    	ld	hl,_s_state
2674  0C21  CB CE       	set	1, (hl)
2675  0C23  2E 00       	ld	l,0x00
2676  0C25  CD C9 05    	call	_player_check_stairs
2677  0C28  3A 00 00    	ld	a,(_player_onstair)
2678  0C2B  B7          	or	a, a
2679  0C2C  C2 D7 0C    	jp	NZ, l_player_check_floor_00133
2680  0C2F  3A 00 00    	ld	a,(_s_lin0)
2681  0C32  D6 90       	sub	a,0x90
2682  0C34  C2 D7 0C    	jp	NZ,l_player_check_floor_00133
2683  0C37  CD 00 00    	call	_spr_page_down
2684  0C3A  C3 D7 0C    	jp	l_player_check_floor_00133
2685  0C3D              l_player_check_floor_00128:
2686  0C3D  C5          	push	bc
2687  0C3E  21 10 00    	ld	hl,0x0010
2688  0C41  E5          	push	hl
2689  0C42  2A 00 00    	ld	hl,(_player_brick_time)
2690  0C45  E5          	push	hl
2691  0C46  CD 00 00    	call	_game_check_time
2692  0C49  F1          	pop	af
2693  0C4A  F1          	pop	af
2694  0C4B  C1          	pop	bc
2695  0C4C  7D          	ld	a,l
2696  0C4D  B7          	or	a, a
2697  0C4E  CA D7 0C    	jp	Z, l_player_check_floor_00133
2698  0C51  2A 00 00    	ld	hl,(_curr_time)
2699  0C54  22 00 00    	ld	(_player_brick_time),hl
2700  0C57  DD 7E FB    	ld	a,(ix-5)
2701  0C5A  D6 40       	sub	a,0x40
2702  0C5C  20 1A       	jr	NZ,l_player_check_floor_00114
2703  0C5E  C5          	push	bc
2704  0C5F  DD 6E FC    	ld	l,(ix-4)
2705  0C62  DD 66 FD    	ld	h,(ix-3)
2706  0C65  E5          	push	hl
2707  0C66  CD 00 00    	call	_game_match_back
2708  0C69  F1          	pop	af
2709  0C6A  C1          	pop	bc
2710  0C6B  5D          	ld	e,l
2711  0C6C  DD 6E FE    	ld	l,(ix-2)
2712  0C6F  DD 66 FF    	ld	h,(ix-1)
2713  0C72  73          	ld	(hl), e
2714  0C73  C5          	push	bc
2715  0C74  CD DC 0C    	call	_player_gasta_brick
2716  0C77  C1          	pop	bc
2717  0C78              l_player_check_floor_00114:
2718  0C78  DD 7E FB    	ld	a,(ix-5)
2719  0C7B  D6 3F       	sub	a,0x3f
2720  0C7D  20 0D       	jr	NZ,l_player_check_floor_00116
2721  0C7F  DD 6E FE    	ld	l,(ix-2)
2722  0C82  DD 66 FF    	ld	h,(ix-1)
2723  0C85  36 40       	ld	(hl),0x40
2724  0C87  C5          	push	bc
2725  0C88  CD DC 0C    	call	_player_gasta_brick
2726  0C8B  C1          	pop	bc
2727  0C8C              l_player_check_floor_00116:
2728  0C8C  DD 7E FB    	ld	a,(ix-5)
2729  0C8F  D6 3E       	sub	a,0x3e
2730  0C91  20 0D       	jr	NZ,l_player_check_floor_00118
2731  0C93  DD 6E FE    	ld	l,(ix-2)
2732  0C96  DD 66 FF    	ld	h,(ix-1)
2733  0C99  36 3F       	ld	(hl),0x3f
2734  0C9B  C5          	push	bc
2735  0C9C  CD DC 0C    	call	_player_gasta_brick
2736  0C9F  C1          	pop	bc
2737  0CA0              l_player_check_floor_00118:
2738  0CA0  DD 7E FA    	ld	a,(ix-6)
2739  0CA3  D6 40       	sub	a,0x40
2740  0CA5  20 14       	jr	NZ,l_player_check_floor_00120
2741  0CA7  C5          	push	bc
2742  0CA8  DD 6E FC    	ld	l,(ix-4)
2743  0CAB  DD 66 FD    	ld	h,(ix-3)
2744  0CAE  E5          	push	hl
2745  0CAF  CD 00 00    	call	_game_match_back
2746  0CB2  F1          	pop	af
2747  0CB3  C1          	pop	bc
2748  0CB4  7D          	ld	a,l
2749  0CB5  02          	ld	(bc), a
2750  0CB6  C5          	push	bc
2751  0CB7  CD DC 0C    	call	_player_gasta_brick
2752  0CBA  C1          	pop	bc
2753  0CBB              l_player_check_floor_00120:
2754  0CBB  DD 7E FA    	ld	a,(ix-6)
2755  0CBE  D6 3F       	sub	a,0x3f
2756  0CC0  20 08       	jr	NZ,l_player_check_floor_00122
2757  0CC2  3E 40       	ld	a,0x40
2758  0CC4  02          	ld	(bc), a
2759  0CC5  C5          	push	bc
2760  0CC6  CD DC 0C    	call	_player_gasta_brick
2761  0CC9  C1          	pop	bc
2762  0CCA              l_player_check_floor_00122:
2763  0CCA  DD 7E FA    	ld	a,(ix-6)
2764  0CCD  D6 3E       	sub	a,0x3e
2765  0CCF  20 06       	jr	NZ,l_player_check_floor_00133
2766  0CD1  3E 3F       	ld	a,0x3f
2767  0CD3  02          	ld	(bc), a
2768  0CD4  CD DC 0C    	call	_player_gasta_brick
2769  0CD7              l_player_check_floor_00133:
2770  0CD7  DD F9       	ld	sp, ix
2771  0CD9  DD E1       	pop	ix
2772  0CDB  C9          	ret
2773  0CDC              	SECTION code_compiler
2774  0CDC              ;	---------------------------------
2775  0CDC              ; Function player_gasta_brick
2776  0CDC              ; ---------------------------------
2777  0CDC              _player_gasta_brick:
2778  0CDC  3A 00 00    	ld	a,(_s_lin0)
2779  0CDF  32 00 00    	ld	(_s_lin1),a
2780  0CE2  3A 00 00    	ld	a,(_s_col0)
2781  0CE5  32 00 00    	ld	(_s_col1),a
2782  0CE8  3A 07 00    	ld	a,(_lin + 0x0007)
2783  0CEB  C6 10       	add	a,0x10
2784  0CED  32 00 00    	ld	(_s_lin0),a
2785  0CF0  3A 07 00    	ld	a,(_col + 0x0007)
2786  0CF3  32 00 00    	ld	(_s_col0),a
2787  0CF6  CD 00 00    	call	_spr_back_repaint
2788  0CF9  3A 00 00    	ld	a,(_s_lin1)
2789  0CFC  32 00 00    	ld	(_s_lin0),a
2790  0CFF  3A 00 00    	ld	a,(_s_col1)
2791  0D02  32 00 00    	ld	(_s_col0),a
2792  0D05  C9          	ret
2793  0D06              	SECTION code_compiler
2794  0D06              ;	---------------------------------
2795  0D06              ; Function player_move_jump
2796  0D06              ; ---------------------------------
2797  0D06              _player_move_jump:
2798  0D06  21 00 00    	ld	hl,_game_gravity
2799  0D09  4E          	ld	c, (hl)
2800  0D0A  21 00 00    	ld	hl,_player_vel_y
2801  0D0D  7E          	ld	a, (hl)
2802  0D0E  81          	add	a, c
2803  0D0F  77          	ld	(hl), a
2804  0D10  21 00 00    	ld	hl,_sprite_on_air
2805  0D13  36 01       	ld	(hl),0x01
2806  0D15  3A 00 00    	ld	a,(_player_vel_inc)
2807  0D18  B7          	or	a, a
2808  0D19  28 4A       	jr	Z,l_player_move_jump_00109
2809  0D1B  3A 00 00    	ld	a,(_dirs)
2810  0D1E  CB 07       	rlc	a
2811  0D20  E6 01       	and	a,0x01
2812  0D22  4F          	ld	c, a
2813  0D23  3A 00 00    	ld	a,(_game_2buttons)
2814  0D26  B7          	or	a, a
2815  0D27  28 06       	jr	Z,l_player_move_jump_00102
2816  0D29  79          	ld	a, c
2817  0D2A  EE 01       	xor	a,0x01
2818  0D2C  4F          	ld	c, a
2819  0D2D  18 15       	jr	l_player_move_jump_00103
2820  0D2F              l_player_move_jump_00102:
2821  0D2F  CB 41       	bit	0, c
2822  0D31  28 07       	jr	Z,l_player_move_jump_00154
2823  0D33  21 00 00    	ld	hl,_dirs
2824  0D36  CB 46       	bit	0, (hl)
2825  0D38  20 04       	jr	NZ,l_player_move_jump_00155
2826  0D3A              l_player_move_jump_00154:
2827  0D3A  0E 00       	ld	c,0x00
2828  0D3C  18 02       	jr	l_player_move_jump_00156
2829  0D3E              l_player_move_jump_00155:
2830  0D3E  0E 01       	ld	c,0x01
2831  0D40              l_player_move_jump_00156:
2832  0D40  79          	ld	a, c
2833  0D41  EE 01       	xor	a,0x01
2834  0D43  4F          	ld	c, a
2835  0D44              l_player_move_jump_00103:
2836  0D44  79          	ld	a, c
2837  0D45  B7          	or	a, a
2838  0D46  28 1D       	jr	Z,l_player_move_jump_00109
2839  0D48  3A 00 00    	ld	a,(_player_vel_y1)
2840  0D4B  21 00 00    	ld	hl,_player_vel_y
2841  0D4E  96          	sub	a, (hl)
2842  0D4F  E2 54 0D    	jp	PO, l_player_move_jump_00259
2843  0D52  EE 80       	xor	a,0x80
2844  0D54              l_player_move_jump_00259:
2845  0D54  F2 65 0D    	jp	P, l_player_move_jump_00109
2846  0D57  21 00 00    	ld	hl,_player_vel_y
2847  0D5A  CB 7E       	bit	7,(hl)
2848  0D5C  28 07       	jr	Z,l_player_move_jump_00109
2849  0D5E  36 00       	ld	(hl),0x00
2850  0D60  21 00 00    	ld	hl,_player_vel_inc
2851  0D63  36 00       	ld	(hl),0x00
2852  0D65              l_player_move_jump_00109:
2853  0D65  3E 78       	ld	a,0x78
2854  0D67  21 00 00    	ld	hl,_player_vel_y
2855  0D6A  96          	sub	a, (hl)
2856  0D6B  E2 70 0D    	jp	PO, l_player_move_jump_00260
2857  0D6E  EE 80       	xor	a,0x80
2858  0D70              l_player_move_jump_00260:
2859  0D70  F2 78 0D    	jp	P, l_player_move_jump_00111
2860  0D73  21 00 00    	ld	hl,_player_vel_y
2861  0D76  36 78       	ld	(hl),0x78
2862  0D78              l_player_move_jump_00111:
2863  0D78  21 00 00    	ld	hl,_player_vel_y
2864  0D7B  7E          	ld	a, (hl)
2865  0D7C  EE 80       	xor	a,0x80
2866  0D7E  D6 08       	sub	a,0x08
2867  0D80  30 02       	jr	NC,l_player_move_jump_00113
2868  0D82  36 88       	ld	(hl),0x88
2869  0D84              l_player_move_jump_00113:
2870  0D84  3A 00 00    	ld	a,(_player_vel_y)
2871  0D87  47          	ld	b,a
2872  0D88  17          	rla
2873  0D89  9F          	sbc	a, a
2874  0D8A  5F          	ld	e, a
2875  0D8B  CB 40       	bit	0,b
2876  0D8D  21 00 00    	ld	hl,_s_lin1
2877  0D90  70          	ld	(hl),b
2878  0D91  28 04       	jr	Z,l_player_move_jump_00115
2879  0D93  21 00 00    	ld	hl,_s_lin1
2880  0D96  35          	dec	(hl)
2881  0D97              l_player_move_jump_00115:
2882  0D97  3A 07 00    	ld	a,(_lin + 0x0007)
2883  0D9A  21 00 00    	ld	hl,_s_lin1
2884  0D9D  86          	add	a, (hl)
2885  0D9E  77          	ld	(hl), a
2886  0D9F  3E 90       	ld	a,0x90
2887  0DA1  96          	sub	a, (hl)
2888  0DA2  3E 00       	ld	a,0x00
2889  0DA4  17          	rla
2890  0DA5  4F          	ld	c, a
2891  0DA6  CB 7B       	bit	7, e
2892  0DA8  28 5B       	jr	Z,l_player_move_jump_00141
2893  0DAA  21 00 00    	ld	hl,_s_state
2894  0DAD  7E          	ld	a,(hl)
2895  0DAE  F6 01       	or	a,0x01
2896  0DB0  E6 FD       	and	a,0xfd
2897  0DB2  77          	ld	(hl),a
2898  0DB3  79          	ld	a, c
2899  0DB4  B7          	or	a, a
2900  0DB5  28 11       	jr	Z,l_player_move_jump_00120
2901  0DB7  CD 00 00    	call	_spr_page_up
2902  0DBA  7D          	ld	a, l
2903  0DBB  B7          	or	a, a
2904  0DBC  28 05       	jr	Z,l_player_move_jump_00117
2905  0DBE  2E 00       	ld	l,0x00
2906  0DC0  C3 C1 0E    	jp	l_player_move_jump_00152
2907  0DC3              l_player_move_jump_00117:
2908  0DC3  21 00 00    	ld	hl,_s_lin1
2909  0DC6  36 00       	ld	(hl),0x00
2910  0DC8              l_player_move_jump_00120:
2911  0DC8  21 07 00    	ld	hl,+(_col + 0x0007)
2912  0DCB  46          	ld	b, (hl)
2913  0DCC  C5          	push	bc
2914  0DCD  33          	inc	sp
2915  0DCE  3A 00 00    	ld	a,(_s_lin1)
2916  0DD1  F5          	push	af
2917  0DD2  33          	inc	sp
2918  0DD3  CD 00 00    	call	_game_check_map
2919  0DD6  F1          	pop	af
2920  0DD7  7C          	ld	a,h
2921  0DD8  B5          	or	a,l
2922  0DD9  28 21       	jr	Z,l_player_move_jump_00124
2923  0DDB  CD 64 08    	call	_player_hit_platform
2924  0DDE  7D          	ld	a, l
2925  0DDF  B7          	or	a, a
2926  0DE0  28 12       	jr	Z,l_player_move_jump_00122
2927  0DE2  3A 07 00    	ld	a,(_lin + 0x0007)
2928  0DE5  07          	rlca
2929  0DE6  07          	rlca
2930  0DE7  07          	rlca
2931  0DE8  07          	rlca
2932  0DE9  E6 0F       	and	a,0x0f
2933  0DEB  07          	rlca
2934  0DEC  07          	rlca
2935  0DED  07          	rlca
2936  0DEE  07          	rlca
2937  0DEF  E6 F0       	and	a,0xf0
2938  0DF1  32 07 00    	ld	((_lin + 0x0007)),a
2939  0DF4              l_player_move_jump_00122:
2940  0DF4  21 00 00    	ld	hl,_player_vel_y
2941  0DF7  36 00       	ld	(hl),0x00
2942  0DF9  C3 83 0E    	jp	l_player_move_jump_00142
2943  0DFC              l_player_move_jump_00124:
2944  0DFC  3A 00 00    	ld	a,(_s_lin1)
2945  0DFF  32 07 00    	ld	((_lin + 0x0007)),a
2946  0E02  C3 83 0E    	jp	l_player_move_jump_00142
2947  0E05              l_player_move_jump_00141:
2948  0E05  21 00 00    	ld	hl,_s_state
2949  0E08  7E          	ld	a,(hl)
2950  0E09  F6 02       	or	a,0x02
2951  0E0B  E6 FE       	and	a,0xfe
2952  0E0D  77          	ld	(hl),a
2953  0E0E  79          	ld	a, c
2954  0E0F  B7          	or	a, a
2955  0E10  28 11       	jr	Z,l_player_move_jump_00130
2956  0E12  CD 00 00    	call	_spr_page_down
2957  0E15  7D          	ld	a, l
2958  0E16  B7          	or	a, a
2959  0E17  28 05       	jr	Z,l_player_move_jump_00127
2960  0E19  2E 00       	ld	l,0x00
2961  0E1B  C3 C1 0E    	jp	l_player_move_jump_00152
2962  0E1E              l_player_move_jump_00127:
2963  0E1E  21 00 00    	ld	hl,_s_lin1
2964  0E21  36 90       	ld	(hl),0x90
2965  0E23              l_player_move_jump_00130:
2966  0E23  21 07 00    	ld	hl,+(_col + 0x0007)
2967  0E26  56          	ld	d, (hl)
2968  0E27  3A 00 00    	ld	a,(_s_lin1)
2969  0E2A  C6 10       	add	a,0x10
2970  0E2C  5F          	ld	e, a
2971  0E2D  D5          	push	de
2972  0E2E  CD 00 00    	call	_game_check_map
2973  0E31  F1          	pop	af
2974  0E32  7C          	ld	a,h
2975  0E33  B5          	or	a,l
2976  0E34  28 47       	jr	Z,l_player_move_jump_00138
2977  0E36  2E 00       	ld	l,0x00
2978  0E38  CD C9 05    	call	_player_check_stairs
2979  0E3B  3A 00 00    	ld	a,(_player_onstair)
2980  0E3E  B7          	or	a, a
2981  0E3F  20 05       	jr	NZ,l_player_move_jump_00132
2982  0E41  2E 01       	ld	l,0x01
2983  0E43  CD C9 05    	call	_player_check_stairs
2984  0E46              l_player_move_jump_00132:
2985  0E46  3A 00 00    	ld	a,(_player_onstair)
2986  0E49  B7          	or	a, a
2987  0E4A  20 12       	jr	NZ,l_player_move_jump_00134
2988  0E4C  3A 00 00    	ld	a,(_s_lin1)
2989  0E4F  07          	rlca
2990  0E50  07          	rlca
2991  0E51  07          	rlca
2992  0E52  07          	rlca
2993  0E53  E6 0F       	and	a,0x0f
2994  0E55  07          	rlca
2995  0E56  07          	rlca
2996  0E57  07          	rlca
2997  0E58  07          	rlca
2998  0E59  E6 F0       	and	a,0xf0
2999  0E5B  32 07 00    	ld	((_lin + 0x0007)),a
3000  0E5E              l_player_move_jump_00134:
3001  0E5E  21 00 00    	ld	hl,_player_vel_y
3002  0E61  36 00       	ld	(hl),0x00
3003  0E63  21 00 00    	ld	hl,_s_state
3004  0E66  7E          	ld	a,(hl)
3005  0E67  E6 FC       	and	a,+(0xfd&0xfe)
3006  0E69  77          	ld	(hl),a
3007  0E6A  3A 07 00    	ld	a,(_lin + 0x0007)
3008  0E6D  D6 90       	sub	a,0x90
3009  0E6F  38 03       	jr	C,l_player_move_jump_00136
3010  0E71  CD 00 00    	call	_spr_page_down
3011  0E74              l_player_move_jump_00136:
3012  0E74  21 07 00    	ld	hl, +(_colint + 0x0007)
3013  0E77  36 00       	ld	(hl),0x00
3014  0E79  2E 01       	ld	l,0x01
3015  0E7B  18 44       	jr	l_player_move_jump_00152
3016  0E7D              l_player_move_jump_00138:
3017  0E7D  3A 00 00    	ld	a,(_s_lin1)
3018  0E80  32 07 00    	ld	((_lin + 0x0007)),a
3019  0E83              l_player_move_jump_00142:
3020  0E83  21 00 00    	ld	hl,_s_state
3021  0E86  CB 5E       	bit	3, (hl)
3022  0E88  20 27       	jr	NZ,l_player_move_jump_00148
3023  0E8A  21 00 00    	ld	hl,_s_state
3024  0E8D  CB 56       	bit	2, (hl)
3025  0E8F  20 20       	jr	NZ,l_player_move_jump_00148
3026  0E91  21 00 00    	ld	hl,_dirs
3027  0E94  CB 56       	bit	2, (hl)
3028  0E96  28 09       	jr	Z,l_player_move_jump_00144
3029  0E98  21 00 00    	ld	hl,_s_state
3030  0E9B  7E          	ld	a,(hl)
3031  0E9C  F6 08       	or	a,0x08
3032  0E9E  E6 FB       	and	a,0xfb
3033  0EA0  77          	ld	(hl),a
3034  0EA1              l_player_move_jump_00144:
3035  0EA1  21 00 00    	ld	hl,_dirs
3036  0EA4  CB 5E       	bit	3, (hl)
3037  0EA6  28 09       	jr	Z,l_player_move_jump_00148
3038  0EA8  21 00 00    	ld	hl,_s_state
3039  0EAB  7E          	ld	a,(hl)
3040  0EAC  F6 04       	or	a,0x04
3041  0EAE  E6 F7       	and	a,0xf7
3042  0EB0  77          	ld	(hl),a
3043  0EB1              l_player_move_jump_00148:
3044  0EB1  CD 00 00    	call	_spr_move_horizontal
3045  0EB4  7D          	ld	a, l
3046  0EB5  B7          	or	a, a
3047  0EB6  28 07       	jr	Z,l_player_move_jump_00151
3048  0EB8  21 00 00    	ld	hl,_s_state
3049  0EBB  7E          	ld	a,(hl)
3050  0EBC  E6 F3       	and	a,+(0xf7&0xfb)
3051  0EBE  77          	ld	(hl),a
3052  0EBF              l_player_move_jump_00151:
3053  0EBF  2E 00       	ld	l,0x00
3054  0EC1              l_player_move_jump_00152:
3055  0EC1  C9          	ret
3056  0EC2              	SECTION code_compiler
3057  0EC2              ;	---------------------------------
3058  0EC2              ; Function player_open_door
3059  0EC2              ; ---------------------------------
3060  0EC2              _player_open_door:
3061  0EC2  CD 00 00    	call	___sdcc_enter_ix
3062  0EC5  0E 00       	ld	c,0x00
3063  0EC7  DD 7E 06    	ld	a,(ix+6)
3064  0ECA  D6 48       	sub	a,0x48
3065  0ECC  28 17       	jr	Z,l_player_open_door_00101
3066  0ECE  DD 7E 06    	ld	a,(ix+6)
3067  0ED1  D6 49       	sub	a,0x49
3068  0ED3  28 1F       	jr	Z,l_player_open_door_00104
3069  0ED5  DD 7E 06    	ld	a,(ix+6)
3070  0ED8  D6 4A       	sub	a,0x4a
3071  0EDA  28 27       	jr	Z,l_player_open_door_00107
3072  0EDC  DD 7E 06    	ld	a,(ix+6)
3073  0EDF  D6 4B       	sub	a,0x4b
3074  0EE1  28 2F       	jr	Z,l_player_open_door_00110
3075  0EE3  18 3A       	jr	l_player_open_door_00113
3076  0EE5              l_player_open_door_00101:
3077  0EE5  3A 00 00    	ld	a,(_player_keys)
3078  0EE8  B7          	or	a, a
3079  0EE9  28 34       	jr	Z,l_player_open_door_00113
3080  0EEB  2E 07       	ld	l,0x07
3081  0EED  CD 00 00    	call	_zx_border_fastcall
3082  0EF0  0E 01       	ld	c,0x01
3083  0EF2  18 2B       	jr	l_player_open_door_00113
3084  0EF4              l_player_open_door_00104:
3085  0EF4  3A 01 00    	ld	a,(_player_keys + 0x0001)
3086  0EF7  B7          	or	a, a
3087  0EF8  28 25       	jr	Z,l_player_open_door_00113
3088  0EFA  2E 02       	ld	l,0x02
3089  0EFC  CD 00 00    	call	_zx_border_fastcall
3090  0EFF  0E 01       	ld	c,0x01
3091  0F01  18 1C       	jr	l_player_open_door_00113
3092  0F03              l_player_open_door_00107:
3093  0F03  3A 02 00    	ld	a,(_player_keys + 0x0002)
3094  0F06  B7          	or	a, a
3095  0F07  28 16       	jr	Z,l_player_open_door_00113
3096  0F09  2E 04       	ld	l,0x04
3097  0F0B  CD 00 00    	call	_zx_border_fastcall
3098  0F0E  0E 01       	ld	c,0x01
3099  0F10  18 0D       	jr	l_player_open_door_00113
3100  0F12              l_player_open_door_00110:
3101  0F12  3A 03 00    	ld	a,(_player_keys + 0x0003)
3102  0F15  B7          	or	a, a
3103  0F16  28 07       	jr	Z,l_player_open_door_00113
3104  0F18  2E 05       	ld	l,0x05
3105  0F1A  CD 00 00    	call	_zx_border_fastcall
3106  0F1D  0E 01       	ld	c,0x01
3107  0F1F              l_player_open_door_00113:
3108  0F1F  79          	ld	a, c
3109  0F20  B7          	or	a, a
3110  0F21  20 06       	jr	NZ,l_player_open_door_00114
3111  0F23  3A 00 00    	ld	a,(_game_inmune)
3112  0F26  B7          	or	a, a
3113  0F27  28 2F       	jr	Z,l_player_open_door_00117
3114  0F29              l_player_open_door_00114:
3115  0F29  3E 00       	ld	a, +((_scr_map) & 0xFF)
3116  0F2B  DD 86 04    	add	a,(ix+4)
3117  0F2E  4F          	ld	c, a
3118  0F2F  3E 00       	ld	a, +((_scr_map) / 256)
3119  0F31  DD 8E 05    	adc	a,(ix+5)
3120  0F34  47          	ld	b, a
3121  0F35  C5          	push	bc
3122  0F36  DD 6E 04    	ld	l,(ix+4)
3123  0F39  DD 66 05    	ld	h,(ix+5)
3124  0F3C  E5          	push	hl
3125  0F3D  CD 00 00    	call	_game_match_back
3126  0F40  F1          	pop	af
3127  0F41  C1          	pop	bc
3128  0F42  7D          	ld	a,l
3129  0F43  02          	ld	(bc), a
3130  0F44  DD 6E 04    	ld	l,(ix+4)
3131  0F47  DD 66 05    	ld	h,(ix+5)
3132  0F4A  CD 00 00    	call	_game_obj_set
3133  0F4D  DD 6E 04    	ld	l,(ix+4)
3134  0F50  DD 66 05    	ld	h,(ix+5)
3135  0F53  E5          	push	hl
3136  0F54  CD 00 00    	call	_spr_draw_index
3137  0F57  F1          	pop	af
3138  0F58              l_player_open_door_00117:
3139  0F58  DD E1       	pop	ix
3140  0F5A  C9          	ret
3141  0F5B              	SECTION code_compiler
3142  0F5B              ;	---------------------------------
3143  0F5B              ; Function player_lost_life
3144  0F5B              ; ---------------------------------
3145  0F5B              _player_lost_life:
3146  0F5B  CD 00 00    	call	___sdcc_enter_ix
3147  0F5E  3B          	dec	sp
3148  0F5F  3A 07 00    	ld	a,(_lin + 0x0007)
3149  0F62  32 00 00    	ld	(_s_lin0),a
3150  0F65  3A 07 00    	ld	a,(_col + 0x0007)
3151  0F68  32 00 00    	ld	(_s_col0),a
3152  0F6B  CD 00 00    	call	_spr_init_anim_bullets
3153  0F6E  01 00 00    	ld	bc,_anim_lin+0
3154  0F71  16 00       	ld	d,0x00
3155  0F73              l_player_lost_life_00116:
3156  0F73  C5          	push	bc
3157  0F74  D5          	push	de
3158  0F75  21 00 00    	ld	hl,0x0000
3159  0F78  E5          	push	hl
3160  0F79  AF          	xor	a, a
3161  0F7A  5A          	ld	e,d
3162  0F7B  57          	ld	d,a
3163  0F7C  D5          	push	de
3164  0F7D  CD 00 00    	call	_NIRVANAP_spriteT_callee
3165  0F80  D1          	pop	de
3166  0F81  C1          	pop	bc
3167  0F82  6A          	ld	l,d
3168  0F83  26 00       	ld	h,0x00
3169  0F85  09          	add	hl, bc
3170  0F86  36 FF       	ld	(hl),0xff
3171  0F88  14          	inc	d
3172  0F89  7A          	ld	a, d
3173  0F8A  D6 08       	sub	a,0x08
3174  0F8C  38 E5       	jr	C,l_player_lost_life_00116
3175  0F8E  21 00 00    	ld	hl,_anim_count
3176  0F91  36 00       	ld	(hl),0x00
3177  0F93  76          	halt
3178  0F94  3A 00 00    	ld	a,(_s_lin0)
3179  0F97  C6 F0       	add	a,0xf0
3180  0F99  47          	ld	b, a
3181  0F9A  3A 00 00    	ld	a,(_s_col0)
3182  0F9D  21 00 00    	ld	hl,0x0000
3183  0FA0  E5          	push	hl
3184  0FA1  21 87 03    	ld	hl,0x0387
3185  0FA4  E5          	push	hl
3186  0FA5  48          	ld	c,b
3187  0FA6  47          	ld	b,a
3188  0FA7  C5          	push	bc
3189  0FA8  CD 00 00    	call	_spr_add_anim
3190  0FAB  F1          	pop	af
3191  0FAC  F1          	pop	af
3192  0FAD  F1          	pop	af
3193  0FAE  21 00 00    	ld	hl,_s_col0
3194  0FB1  46          	ld	b, (hl)
3195  0FB2  05          	dec	b
3196  0FB3  05          	dec	b
3197  0FB4  21 00 00    	ld	hl,0x0000
3198  0FB7  E5          	push	hl
3199  0FB8  21 87 03    	ld	hl,0x0387
3200  0FBB  E5          	push	hl
3201  0FBC  C5          	push	bc
3202  0FBD  33          	inc	sp
3203  0FBE  3A 00 00    	ld	a,(_s_lin0)
3204  0FC1  F5          	push	af
3205  0FC2  33          	inc	sp
3206  0FC3  CD 00 00    	call	_spr_add_anim
3207  0FC6  F1          	pop	af
3208  0FC7  F1          	pop	af
3209  0FC8  21 00 00    	ld	hl,0x0000
3210  0FCB  E3          	ex	(sp),hl
3211  0FCC  3A 00 00    	ld	a,(_s_col0)
3212  0FCF  21 87 03    	ld	hl,0x0387
3213  0FD2  E5          	push	hl
3214  0FD3  F5          	push	af
3215  0FD4  33          	inc	sp
3216  0FD5  3A 00 00    	ld	a,(_s_lin0)
3217  0FD8  F5          	push	af
3218  0FD9  33          	inc	sp
3219  0FDA  CD 00 00    	call	_spr_add_anim
3220  0FDD  F1          	pop	af
3221  0FDE  F1          	pop	af
3222  0FDF  F1          	pop	af
3223  0FE0  21 00 00    	ld	hl,_s_col0
3224  0FE3  46          	ld	b, (hl)
3225  0FE4  04          	inc	b
3226  0FE5  04          	inc	b
3227  0FE6  21 00 00    	ld	hl,0x0000
3228  0FE9  E5          	push	hl
3229  0FEA  21 87 03    	ld	hl,0x0387
3230  0FED  E5          	push	hl
3231  0FEE  C5          	push	bc
3232  0FEF  33          	inc	sp
3233  0FF0  3A 00 00    	ld	a,(_s_lin0)
3234  0FF3  F5          	push	af
3235  0FF4  33          	inc	sp
3236  0FF5  CD 00 00    	call	_spr_add_anim
3237  0FF8  F1          	pop	af
3238  0FF9  F1          	pop	af
3239  0FFA  F1          	pop	af
3240  0FFB  3A 00 00    	ld	a,(_s_lin0)
3241  0FFE  C6 10       	add	a,0x10
3242  1000  47          	ld	b, a
3243  1001  3A 00 00    	ld	a,(_s_col0)
3244  1004  21 00 00    	ld	hl,0x0000
3245  1007  E5          	push	hl
3246  1008  21 87 03    	ld	hl,0x0387
3247  100B  E5          	push	hl
3248  100C  48          	ld	c,b
3249  100D  47          	ld	b,a
3250  100E  C5          	push	bc
3251  100F  CD 00 00    	call	_spr_add_anim
3252  1012  F1          	pop	af
3253  1013  F1          	pop	af
3254  1014  F1          	pop	af
3255  1015  2E 00       	ld	l,0x00
3256  1017  CD 00 00    	call	_zx_border_fastcall
3257  101A  DD 36 FF 01 	ld	(ix-1),0x01
3258  101E  2A 00 00    	ld	hl,(_curr_time)
3259  1021  22 00 00    	ld	(_anim_time),hl
3260  1024              l_player_lost_life_00107:
3261  1024  DD 7E FF    	ld	a,(ix-1)
3262  1027  B7          	or	a, a
3263  1028  28 28       	jr	Z,l_player_lost_life_00109
3264  102A  21 0C 00    	ld	hl,0x000c
3265  102D  E5          	push	hl
3266  102E  2A 00 00    	ld	hl,(_anim_time)
3267  1031  E5          	push	hl
3268  1032  CD 00 00    	call	_game_check_time
3269  1035  F1          	pop	af
3270  1036  F1          	pop	af
3271  1037  7D          	ld	a, l
3272  1038  B7          	or	a, a
3273  1039  28 E9       	jr	Z,l_player_lost_life_00107
3274  103B  2A 00 00    	ld	hl,(_curr_time)
3275  103E  22 00 00    	ld	(_anim_time),hl
3276  1041  3A 00 00    	ld	a,(_anim_count)
3277  1044  B7          	or	a,a
3278  1045  28 05       	jr	Z,l_player_lost_life_00103
3279  1047  CD 00 00    	call	_spr_play_anim
3280  104A  18 D8       	jr	l_player_lost_life_00107
3281  104C              l_player_lost_life_00103:
3282  104C  DD 36 FF 00 	ld	(ix-1),0x00
3283  1050  18 D2       	jr	l_player_lost_life_00107
3284  1052              l_player_lost_life_00109:
3285  1052  21 00 00    	ld	hl,_sprite
3286  1055  36 00       	ld	(hl),0x00
3287  1057              l_player_lost_life_00118:
3288  1057  3A 07 00    	ld	a,(_class + 0x0007)
3289  105A  B7          	or	a, a
3290  105B  28 1E       	jr	Z,l_player_lost_life_00111
3291  105D  21 07 00    	ld	hl,+(_col + 0x0007)
3292  1060  46          	ld	b, (hl)
3293  1061  21 07 00    	ld	hl,+(_lin + 0x0007)
3294  1064  56          	ld	d, (hl)
3295  1065  21 07 00    	ld	hl,+(_tile + 0x0007)
3296  1068  4E          	ld	c, (hl)
3297  1069  21 07 00    	ld	hl,+(_colint + 0x0007)
3298  106C  5E          	ld	e, (hl)
3299  106D  79          	ld	a, c
3300  106E  83          	add	a, e
3301  106F  4A          	ld	c, d
3302  1070  C5          	push	bc
3303  1071  F5          	push	af
3304  1072  33          	inc	sp
3305  1073  3A 00 00    	ld	a,(_sprite)
3306  1076  F5          	push	af
3307  1077  33          	inc	sp
3308  1078  CD 00 00    	call	_NIRVANAP_spriteT_callee
3309  107B              l_player_lost_life_00111:
3310  107B  21 07 00    	ld	hl, +(_class + 0x0007)
3311  107E  36 00       	ld	(hl),0x00
3312  1080  21 07 00    	ld	hl, +(_bullet_col + 0x0007)
3313  1083  36 FF       	ld	(hl),0xff
3314  1085  21 00 00    	ld	hl,_sprite
3315  1088  7E          	ld	a,(hl)
3316  1089  3C          	inc	a
3317  108A  77          	ld	(hl),a
3318  108B  D6 07       	sub	a,0x07
3319  108D  38 C8       	jr	C,l_player_lost_life_00118
3320  108F  21 00 00    	ld	hl,_player_lives
3321  1092  35          	dec	(hl)
3322  1093  21 00 00    	ld	hl,_player_mana
3323  1096  36 64       	ld	(hl),0x64
3324  1098  21 00 00    	ld	hl,_player_vita
3325  109B  36 64       	ld	(hl),0x64
3326  109D  3A 00 00    	ld	a,(_player_lives)
3327  10A0  B7          	or	a, a
3328  10A1  28 0B       	jr	Z,l_player_lost_life_00114
3329  10A3  21 F4 01    	ld	hl,0x01f4
3330  10A6  CD 00 00    	call	_z80_delay_ms_fastcall
3331  10A9  CD 00 00    	call	_game_round_init
3332  10AC  18 0A       	jr	l_player_lost_life_00120
3333  10AE              l_player_lost_life_00114:
3334  10AE  21 00 00    	ld	hl,_player_lives
3335  10B1  36 00       	ld	(hl),0x00
3336  10B3  21 00 00    	ld	hl,_game_over
3337  10B6  36 01       	ld	(hl),0x01
3338  10B8              l_player_lost_life_00120:
3339  10B8  33          	inc	sp
3340  10B9  DD E1       	pop	ix
3341  10BB  C9          	ret
3342  10BC              	SECTION code_compiler
3343  10BC              ;	---------------------------------
3344  10BC              ; Function player_hit
3345  10BC              ; ---------------------------------
3346  10BC              _player_hit:
3347  10BC  7D          	ld	a,l
3348  10BD  4D          	ld	c,l
3349  10BE  21 00 00    	ld	hl,_player_vita
3350  10C1  96          	sub	a, (hl)
3351  10C2  30 17       	jr	NC,l_player_hit_00104
3352  10C4  3A 00 00    	ld	a,(_game_inmune)
3353  10C7  B7          	or	a, a
3354  10C8  20 06       	jr	NZ,l_player_hit_00102
3355  10CA  21 00 00    	ld	hl,_player_vita
3356  10CD  7E          	ld	a, (hl)
3357  10CE  91          	sub	a, c
3358  10CF  77          	ld	(hl), a
3359  10D0              l_player_hit_00102:
3360  10D0  2A 00 00    	ld	hl,(_curr_time)
3361  10D3  22 00 00    	ld	(_player_hit_time),hl
3362  10D6  CD 00 00    	call	_game_update_stats
3363  10D9  18 0B       	jr	l_player_hit_00106
3364  10DB              l_player_hit_00104:
3365  10DB  21 00 00    	ld	hl,_player_vita
3366  10DE  36 00       	ld	(hl),0x00
3367  10E0  CD 00 00    	call	_game_update_stats
3368  10E3  CD 5B 0F    	call	_player_lost_life
3369  10E6              l_player_hit_00106:
3370  10E6  C9          	ret
3371  10E7              	SECTION IGNORE
3372  0000              
