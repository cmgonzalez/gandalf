1     0000              MODULE game_player_c
2     0000              LINE -1, "game_player.c"
-1    0000              
0     0000              
1     0000              ;--------------------------------------------------------
2     0000              ; File Created by SDCC : free open source ANSI-C Compiler
3     0000              ; Version 3.6.5 #9958 (Mac OS X i386)
4     0000              ;--------------------------------------------------------
5     0000              ; Processed by Z88DK
6     0000              ;--------------------------------------------------------
7     0000              
8     0000              	EXTERN __divschar
9     0000              	EXTERN __divschar_callee
10    0000              	EXTERN __divsint
11    0000              	EXTERN __divsint_callee
12    0000              	EXTERN __divslong
13    0000              	EXTERN __divslong_callee
14    0000              	EXTERN __divslonglong
15    0000              	EXTERN __divslonglong_callee
16    0000              	EXTERN __divsuchar
17    0000              	EXTERN __divsuchar_callee
18    0000              	EXTERN __divuchar
19    0000              	EXTERN __divuchar_callee
20    0000              	EXTERN __divuint
21    0000              	EXTERN __divuint_callee
22    0000              	EXTERN __divulong
23    0000              	EXTERN __divulong_callee
24    0000              	EXTERN __divulonglong
25    0000              	EXTERN __divulonglong_callee
26    0000              	EXTERN __divuschar
27    0000              	EXTERN __divuschar_callee
28    0000              	EXTERN __modschar
29    0000              	EXTERN __modschar_callee
30    0000              	EXTERN __modsint
31    0000              	EXTERN __modsint_callee
32    0000              	EXTERN __modslong
33    0000              	EXTERN __modslong_callee
34    0000              	EXTERN __modslonglong
35    0000              	EXTERN __modslonglong_callee
36    0000              	EXTERN __modsuchar
37    0000              	EXTERN __modsuchar_callee
38    0000              	EXTERN __moduchar
39    0000              	EXTERN __moduchar_callee
40    0000              	EXTERN __moduint
41    0000              	EXTERN __moduint_callee
42    0000              	EXTERN __modulong
43    0000              	EXTERN __modulong_callee
44    0000              	EXTERN __modulonglong
45    0000              	EXTERN __modulonglong_callee
46    0000              	EXTERN __moduschar
47    0000              	EXTERN __moduschar_callee
48    0000              	EXTERN __mulint
49    0000              	EXTERN __mulint_callee
50    0000              	EXTERN __mullong
51    0000              	EXTERN __mullong_callee
52    0000              	EXTERN __mullonglong
53    0000              	EXTERN __mullonglong_callee
54    0000              	EXTERN __mulschar
55    0000              	EXTERN __mulschar_callee
56    0000              	EXTERN __mulsuchar
57    0000              	EXTERN __mulsuchar_callee
58    0000              	EXTERN __muluschar
59    0000              	EXTERN __muluschar_callee
60    0000              	EXTERN __rlslonglong
61    0000              	EXTERN __rlslonglong_callee
62    0000              	EXTERN __rlulonglong
63    0000              	EXTERN __rlulonglong_callee
64    0000              	EXTERN __rrslonglong
65    0000              	EXTERN __rrslonglong_callee
66    0000              	EXTERN __rrulonglong
67    0000              	EXTERN __rrulonglong_callee
68    0000              	EXTERN ___sdcc_call_hl
69    0000              	EXTERN ___sdcc_call_iy
70    0000              	EXTERN ___sdcc_enter_ix
71    0000              	EXTERN _banked_call
72    0000              	EXTERN _banked_ret
73    0000              	EXTERN ___fs2schar
74    0000              	EXTERN ___fs2schar_callee
75    0000              	EXTERN ___fs2sint
76    0000              	EXTERN ___fs2sint_callee
77    0000              	EXTERN ___fs2slong
78    0000              	EXTERN ___fs2slong_callee
79    0000              	EXTERN ___fs2slonglong
80    0000              	EXTERN ___fs2slonglong_callee
81    0000              	EXTERN ___fs2uchar
82    0000              	EXTERN ___fs2uchar_callee
83    0000              	EXTERN ___fs2uint
84    0000              	EXTERN ___fs2uint_callee
85    0000              	EXTERN ___fs2ulong
86    0000              	EXTERN ___fs2ulong_callee
87    0000              	EXTERN ___fs2ulonglong
88    0000              	EXTERN ___fs2ulonglong_callee
89    0000              	EXTERN ___fsadd
90    0000              	EXTERN ___fsadd_callee
91    0000              	EXTERN ___fsdiv
92    0000              	EXTERN ___fsdiv_callee
93    0000              	EXTERN ___fseq
94    0000              	EXTERN ___fseq_callee
95    0000              	EXTERN ___fsgt
96    0000              	EXTERN ___fsgt_callee
97    0000              	EXTERN ___fslt
98    0000              	EXTERN ___fslt_callee
99    0000              	EXTERN ___fsmul
100   0000              	EXTERN ___fsmul_callee
101   0000              	EXTERN ___fsneq
102   0000              	EXTERN ___fsneq_callee
103   0000              	EXTERN ___fssub
104   0000              	EXTERN ___fssub_callee
105   0000              	EXTERN ___schar2fs
106   0000              	EXTERN ___schar2fs_callee
107   0000              	EXTERN ___sint2fs
108   0000              	EXTERN ___sint2fs_callee
109   0000              	EXTERN ___slong2fs
110   0000              	EXTERN ___slong2fs_callee
111   0000              	EXTERN ___slonglong2fs
112   0000              	EXTERN ___slonglong2fs_callee
113   0000              	EXTERN ___uchar2fs
114   0000              	EXTERN ___uchar2fs_callee
115   0000              	EXTERN ___uint2fs
116   0000              	EXTERN ___uint2fs_callee
117   0000              	EXTERN ___ulong2fs
118   0000              	EXTERN ___ulong2fs_callee
119   0000              	EXTERN ___ulonglong2fs
120   0000              	EXTERN ___ulonglong2fs_callee
121   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
122   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
123   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
126   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
127   0000              	EXTERN ____sdcc_4_ldi_save_bc
128   0000              	EXTERN ____sdcc_4_push_hlix
129   0000              	EXTERN ____sdcc_4_push_mhl
130   0000              	EXTERN ____sdcc_lib_setmem_hl
131   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
132   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
133   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
134   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
135   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
136   0000              	EXTERN ____sdcc_ll_add_deix_hlix
137   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
138   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
139   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
140   0000              	EXTERN ____sdcc_ll_asr_hlix_a
141   0000              	EXTERN ____sdcc_ll_asr_mbc_a
142   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
143   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
144   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
145   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
146   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
147   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
148   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
149   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
150   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
151   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
152   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
153   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
155   0000              	EXTERN ____sdcc_ll_push_hlix
156   0000              	EXTERN ____sdcc_ll_push_mhl
157   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
158   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
159   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
160   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
161   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
162   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
163   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
164   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
165   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
166   0000              	EXTERN ____sdcc_load_debc_deix
167   0000              	EXTERN ____sdcc_load_dehl_deix
168   0000              	EXTERN ____sdcc_load_debc_mhl
169   0000              	EXTERN ____sdcc_load_hlde_mhl
170   0000              	EXTERN ____sdcc_store_dehl_bcix
171   0000              	EXTERN ____sdcc_store_debc_hlix
172   0000              	EXTERN ____sdcc_store_debc_mhl
173   0000              	EXTERN ____sdcc_cpu_pop_ei
174   0000              	EXTERN ____sdcc_cpu_pop_ei_jp
175   0000              	EXTERN ____sdcc_cpu_push_di
176   0000              	EXTERN ____sdcc_outi
177   0000              	EXTERN ____sdcc_outi_128
178   0000              	EXTERN ____sdcc_outi_256
179   0000              	EXTERN ____sdcc_ldi
180   0000              	EXTERN ____sdcc_ldi_128
181   0000              	EXTERN ____sdcc_ldi_256
182   0000              	EXTERN ____sdcc_4_copy_srcd_hlix_dst_deix
183   0000              	EXTERN ____sdcc_4_and_src_mbc_mhl_dst_deix
184   0000              	EXTERN ____sdcc_4_or_src_mbc_mhl_dst_deix
185   0000              	EXTERN ____sdcc_4_xor_src_mbc_mhl_dst_deix
186   0000              	EXTERN ____sdcc_4_or_src_dehl_dst_bcix
187   0000              	EXTERN ____sdcc_4_xor_src_dehl_dst_bcix
188   0000              	EXTERN ____sdcc_4_and_src_dehl_dst_bcix
189   0000              	EXTERN ____sdcc_4_xor_src_mbc_mhl_dst_debc
190   0000              	EXTERN ____sdcc_4_or_src_mbc_mhl_dst_debc
191   0000              	EXTERN ____sdcc_4_and_src_mbc_mhl_dst_debc
192   0000              	EXTERN ____sdcc_4_cpl_src_mhl_dst_debc
193   0000              	EXTERN ____sdcc_4_xor_src_debc_mhl_dst_debc
194   0000              	EXTERN ____sdcc_4_or_src_debc_mhl_dst_debc
195   0000              	EXTERN ____sdcc_4_and_src_debc_mhl_dst_debc
196   0000              	EXTERN ____sdcc_4_and_src_debc_hlix_dst_debc
197   0000              	EXTERN ____sdcc_4_or_src_debc_hlix_dst_debc
198   0000              	EXTERN ____sdcc_4_xor_src_debc_hlix_dst_debc
199   0000              
200   0000              ;--------------------------------------------------------
201   0000              ; Public variables in this module
202   0000              ;--------------------------------------------------------
203   0000              	GLOBAL _player_check_map
204   0000              	GLOBAL _player_1up
205   0000              	GLOBAL _player_init
206   0000              	GLOBAL _player_turn
207   0000              	GLOBAL _player_move
208   0000              	GLOBAL _player_check_input
209   0000              	GLOBAL _player_action_fire
210   0000              	GLOBAL _player_action_jump
211   0000              	GLOBAL _player_move_input
212   0000              	GLOBAL _player_fix_walk_lin
213   0000              	GLOBAL _player_fire
214   0000              	GLOBAL _player_collision
215   0000              	GLOBAL _player_pick_mushroom
216   0000              	GLOBAL _player_check_stairs_vertical
217   0000              	GLOBAL _player_check_stairs
218   0000              	GLOBAL _player_anim_stairs
219   0000              	GLOBAL _player_tile
220   0000              	GLOBAL _player_pick_item
221   0000              	GLOBAL _player_hit_platform
222   0000              	GLOBAL _player_hit_platform_clear
223   0000              	GLOBAL _player_score_add
224   0000              	GLOBAL _player_check_floor
225   0000              	GLOBAL _player_gasta_brick
226   0000              	GLOBAL _player_move_jump
227   0000              	GLOBAL _player_open_door
228   0000              	GLOBAL _player_lost_life
229   0000              	GLOBAL _player_damage
230   0000              ;--------------------------------------------------------
231   0000              ; Externals used
232   0000              ;--------------------------------------------------------
233   0000              	GLOBAL _ulltoa_callee
234   0000              	GLOBAL _ulltoa
235   0000              	GLOBAL _strtoull_callee
236   0000              	GLOBAL _strtoull
237   0000              	GLOBAL _strtoll_callee
238   0000              	GLOBAL _strtoll
239   0000              	GLOBAL _lltoa_callee
240   0000              	GLOBAL _lltoa
241   0000              	GLOBAL _llabs_callee
242   0000              	GLOBAL _llabs
243   0000              	GLOBAL __lldivu__callee
244   0000              	GLOBAL __lldivu_
245   0000              	GLOBAL __lldiv__callee
246   0000              	GLOBAL __lldiv_
247   0000              	GLOBAL _atoll_callee
248   0000              	GLOBAL _atoll
249   0000              	GLOBAL _realloc_unlocked_callee
250   0000              	GLOBAL _realloc_unlocked
251   0000              	GLOBAL _malloc_unlocked_fastcall
252   0000              	GLOBAL _malloc_unlocked
253   0000              	GLOBAL _free_unlocked_fastcall
254   0000              	GLOBAL _free_unlocked
255   0000              	GLOBAL _calloc_unlocked_callee
256   0000              	GLOBAL _calloc_unlocked
257   0000              	GLOBAL _aligned_alloc_unlocked_callee
258   0000              	GLOBAL _aligned_alloc_unlocked
259   0000              	GLOBAL _realloc_callee
260   0000              	GLOBAL _realloc
261   0000              	GLOBAL _malloc_fastcall
262   0000              	GLOBAL _malloc
263   0000              	GLOBAL _free_fastcall
264   0000              	GLOBAL _free
265   0000              	GLOBAL _calloc_callee
266   0000              	GLOBAL _calloc
267   0000              	GLOBAL _aligned_alloc_callee
268   0000              	GLOBAL _aligned_alloc
269   0000              	GLOBAL _utoa_callee
270   0000              	GLOBAL _utoa
271   0000              	GLOBAL _ultoa_callee
272   0000              	GLOBAL _ultoa
273   0000              	GLOBAL _system_fastcall
274   0000              	GLOBAL _system
275   0000              	GLOBAL _strtoul_callee
276   0000              	GLOBAL _strtoul
277   0000              	GLOBAL _strtol_callee
278   0000              	GLOBAL _strtol
279   0000              	GLOBAL _strtof_callee
280   0000              	GLOBAL _strtof
281   0000              	GLOBAL _strtod_callee
282   0000              	GLOBAL _strtod
283   0000              	GLOBAL _srand_fastcall
284   0000              	GLOBAL _srand
285   0000              	GLOBAL _rand
286   0000              	GLOBAL _quick_exit_fastcall
287   0000              	GLOBAL _quick_exit
288   0000              	GLOBAL _qsort_callee
289   0000              	GLOBAL _qsort
290   0000              	GLOBAL _ltoa_callee
291   0000              	GLOBAL _ltoa
292   0000              	GLOBAL _labs_fastcall
293   0000              	GLOBAL _labs
294   0000              	GLOBAL _itoa_callee
295   0000              	GLOBAL _itoa
296   0000              	GLOBAL _ftoh_callee
297   0000              	GLOBAL _ftoh
298   0000              	GLOBAL _ftog_callee
299   0000              	GLOBAL _ftog
300   0000              	GLOBAL _ftoe_callee
301   0000              	GLOBAL _ftoe
302   0000              	GLOBAL _ftoa_callee
303   0000              	GLOBAL _ftoa
304   0000              	GLOBAL _exit_fastcall
305   0000              	GLOBAL _exit
306   0000              	GLOBAL _dtoh_callee
307   0000              	GLOBAL _dtoh
308   0000              	GLOBAL _dtog_callee
309   0000              	GLOBAL _dtog
310   0000              	GLOBAL _dtoe_callee
311   0000              	GLOBAL _dtoe
312   0000              	GLOBAL _dtoa_callee
313   0000              	GLOBAL _dtoa
314   0000              	GLOBAL _bsearch_callee
315   0000              	GLOBAL _bsearch
316   0000              	GLOBAL _atol_fastcall
317   0000              	GLOBAL _atol
318   0000              	GLOBAL _atoi_fastcall
319   0000              	GLOBAL _atoi
320   0000              	GLOBAL _atof_fastcall
321   0000              	GLOBAL _atof
322   0000              	GLOBAL _atexit_fastcall
323   0000              	GLOBAL _atexit
324   0000              	GLOBAL _at_quick_exit_fastcall
325   0000              	GLOBAL _at_quick_exit
326   0000              	GLOBAL _abs_fastcall
327   0000              	GLOBAL _abs
328   0000              	GLOBAL _abort
329   0000              	GLOBAL __strtou__callee
330   0000              	GLOBAL __strtou_
331   0000              	GLOBAL __strtoi__callee
332   0000              	GLOBAL __strtoi_
333   0000              	GLOBAL __random_uniform_xor_8__fastcall
334   0000              	GLOBAL __random_uniform_xor_8_
335   0000              	GLOBAL __random_uniform_xor_32__fastcall
336   0000              	GLOBAL __random_uniform_xor_32_
337   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
338   0000              	GLOBAL __random_uniform_cmwc_8_
339   0000              	GLOBAL __shellsort__callee
340   0000              	GLOBAL __shellsort_
341   0000              	GLOBAL __quicksort__callee
342   0000              	GLOBAL __quicksort_
343   0000              	GLOBAL __insertion_sort__callee
344   0000              	GLOBAL __insertion_sort_
345   0000              	GLOBAL __ldivu__callee
346   0000              	GLOBAL __ldivu_
347   0000              	GLOBAL __ldiv__callee
348   0000              	GLOBAL __ldiv_
349   0000              	GLOBAL __divu__callee
350   0000              	GLOBAL __divu_
351   0000              	GLOBAL __div__callee
352   0000              	GLOBAL __div_
353   0000              	GLOBAL _NIRVANAP_drawTW_raw_callee
354   0000              	GLOBAL _NIRVANAP_drawTW_raw
355   0000              	GLOBAL _NIRVANAP_drawTW_callee
356   0000              	GLOBAL _NIRVANAP_drawTW
357   0000              	GLOBAL _NIRVANAP_drawW_raw_callee
358   0000              	GLOBAL _NIRVANAP_drawW_raw
359   0000              	GLOBAL _NIRVANAP_drawW_callee
360   0000              	GLOBAL _NIRVANAP_drawW
361   0000              	GLOBAL _NIRVANAP_spriteT_callee
362   0000              	GLOBAL _NIRVANAP_spriteT
363   0000              	GLOBAL _NIRVANAP_fillC_callee
364   0000              	GLOBAL _NIRVANAP_fillC
365   0000              	GLOBAL _NIRVANAP_readC_callee
366   0000              	GLOBAL _NIRVANAP_readC
367   0000              	GLOBAL _NIRVANAP_paintC_callee
368   0000              	GLOBAL _NIRVANAP_paintC
369   0000              	GLOBAL _NIRVANAP_printC_callee
370   0000              	GLOBAL _NIRVANAP_printC
371   0000              	GLOBAL _NIRVANAP_fillT_raw_callee
372   0000              	GLOBAL _NIRVANAP_fillT_raw
373   0000              	GLOBAL _NIRVANAP_fillT_callee
374   0000              	GLOBAL _NIRVANAP_fillT
375   0000              	GLOBAL _NIRVANAP_drawT_raw_callee
376   0000              	GLOBAL _NIRVANAP_drawT_raw
377   0000              	GLOBAL _NIRVANAP_drawT_callee
378   0000              	GLOBAL _NIRVANAP_drawT
379   0000              	GLOBAL _NIRVANAP_stop
380   0000              	GLOBAL _NIRVANAP_start
381   0000              	GLOBAL _debug3
382   0000              	GLOBAL _debug2
383   0000              	GLOBAL _debug
384   0000              	GLOBAL _zx_print_str
385   0000              	GLOBAL _zx_print_int
386   0000              	GLOBAL _zx_print_chr
387   0000              	GLOBAL _zx_print_bonus_time
388   0000              	GLOBAL _zx_isr
389   0000              	GLOBAL _z80_otdr_callee
390   0000              	GLOBAL _z80_otdr
391   0000              	GLOBAL _z80_otir_callee
392   0000              	GLOBAL _z80_otir
393   0000              	GLOBAL _z80_outp_callee
394   0000              	GLOBAL _z80_outp
395   0000              	GLOBAL _z80_indr_callee
396   0000              	GLOBAL _z80_indr
397   0000              	GLOBAL _z80_inir_callee
398   0000              	GLOBAL _z80_inir
399   0000              	GLOBAL _z80_inp_fastcall
400   0000              	GLOBAL _z80_inp
401   0000              	GLOBAL _z80_set_int_state_fastcall
402   0000              	GLOBAL _z80_set_int_state
403   0000              	GLOBAL _z80_get_int_state
404   0000              	GLOBAL _z80_delay_tstate_fastcall
405   0000              	GLOBAL _z80_delay_tstate
406   0000              	GLOBAL _z80_delay_ms_fastcall
407   0000              	GLOBAL _z80_delay_ms
408   0000              	GLOBAL _im2_remove_generic_callback_callee
409   0000              	GLOBAL _im2_remove_generic_callback
410   0000              	GLOBAL _im2_prepend_generic_callback_callee
411   0000              	GLOBAL _im2_prepend_generic_callback
412   0000              	GLOBAL _im2_append_generic_callback_callee
413   0000              	GLOBAL _im2_append_generic_callback
414   0000              	GLOBAL _im2_create_generic_isr_8080_callee
415   0000              	GLOBAL _im2_create_generic_isr_8080
416   0000              	GLOBAL _im2_create_generic_isr_callee
417   0000              	GLOBAL _im2_create_generic_isr
418   0000              	GLOBAL _im2_install_isr_callee
419   0000              	GLOBAL _im2_install_isr
420   0000              	GLOBAL _im2_init_fastcall
421   0000              	GLOBAL _im2_init
422   0000              	GLOBAL _intrinsic_swap_word_32_fastcall
423   0000              	GLOBAL _intrinsic_swap_word_32
424   0000              	GLOBAL _intrinsic_swap_endian_32_fastcall
425   0000              	GLOBAL _intrinsic_swap_endian_32
426   0000              	GLOBAL _intrinsic_swap_endian_16_fastcall
427   0000              	GLOBAL _intrinsic_swap_endian_16
428   0000              	GLOBAL _intrinsic_return_de
429   0000              	GLOBAL _intrinsic_return_bc
430   0000              	GLOBAL _intrinsic_exx
431   0000              	GLOBAL _intrinsic_ex_de_hl
432   0000              	GLOBAL _intrinsic_nop
433   0000              	GLOBAL _intrinsic_im_2
434   0000              	GLOBAL _intrinsic_im_1
435   0000              	GLOBAL _intrinsic_im_0
436   0000              	GLOBAL _intrinsic_retn
437   0000              	GLOBAL _intrinsic_reti
438   0000              	GLOBAL _intrinsic_halt
439   0000              	GLOBAL _intrinsic_ei
440   0000              	GLOBAL _intrinsic_di
441   0000              	GLOBAL _intrinsic_stub
442   0000              	GLOBAL _intrinsic_outi
443   0000              	GLOBAL _intrinsic_ldi
444   0000              	GLOBAL _zx_pattern_fill_callee
445   0000              	GLOBAL _zx_pattern_fill
446   0000              	GLOBAL _zx_saddrpup_fastcall
447   0000              	GLOBAL _zx_saddrpup
448   0000              	GLOBAL _zx_saddrpright_callee
449   0000              	GLOBAL _zx_saddrpright
450   0000              	GLOBAL _zx_saddrpleft_callee
451   0000              	GLOBAL _zx_saddrpleft
452   0000              	GLOBAL _zx_saddrpdown_fastcall
453   0000              	GLOBAL _zx_saddrpdown
454   0000              	GLOBAL _zx_saddrcup_fastcall
455   0000              	GLOBAL _zx_saddrcup
456   0000              	GLOBAL _zx_saddrcright_fastcall
457   0000              	GLOBAL _zx_saddrcright
458   0000              	GLOBAL _zx_saddrcleft_fastcall
459   0000              	GLOBAL _zx_saddrcleft
460   0000              	GLOBAL _zx_saddrcdown_fastcall
461   0000              	GLOBAL _zx_saddrcdown
462   0000              	GLOBAL _zx_saddr2py_fastcall
463   0000              	GLOBAL _zx_saddr2py
464   0000              	GLOBAL _zx_saddr2px_fastcall
465   0000              	GLOBAL _zx_saddr2px
466   0000              	GLOBAL _zx_saddr2cy_fastcall
467   0000              	GLOBAL _zx_saddr2cy
468   0000              	GLOBAL _zx_saddr2cx_fastcall
469   0000              	GLOBAL _zx_saddr2cx
470   0000              	GLOBAL _zx_saddr2aaddr_fastcall
471   0000              	GLOBAL _zx_saddr2aaddr
472   0000              	GLOBAL _zx_py2saddr_fastcall
473   0000              	GLOBAL _zx_py2saddr
474   0000              	GLOBAL _zx_py2aaddr_fastcall
475   0000              	GLOBAL _zx_py2aaddr
476   0000              	GLOBAL _zx_pxy2saddr_callee
477   0000              	GLOBAL _zx_pxy2saddr
478   0000              	GLOBAL _zx_pxy2aaddr_callee
479   0000              	GLOBAL _zx_pxy2aaddr
480   0000              	GLOBAL _zx_px2bitmask_fastcall
481   0000              	GLOBAL _zx_px2bitmask
482   0000              	GLOBAL _zx_cy2saddr_fastcall
483   0000              	GLOBAL _zx_cy2saddr
484   0000              	GLOBAL _zx_cy2aaddr_fastcall
485   0000              	GLOBAL _zx_cy2aaddr
486   0000              	GLOBAL _zx_cxy2saddr_callee
487   0000              	GLOBAL _zx_cxy2saddr
488   0000              	GLOBAL _zx_cxy2aaddr_callee
489   0000              	GLOBAL _zx_cxy2aaddr
490   0000              	GLOBAL _zx_bitmask2px_fastcall
491   0000              	GLOBAL _zx_bitmask2px
492   0000              	GLOBAL _zx_aaddrcup_fastcall
493   0000              	GLOBAL _zx_aaddrcup
494   0000              	GLOBAL _zx_aaddrcright_fastcall
495   0000              	GLOBAL _zx_aaddrcright
496   0000              	GLOBAL _zx_aaddrcleft_fastcall
497   0000              	GLOBAL _zx_aaddrcleft
498   0000              	GLOBAL _zx_aaddrcdown_fastcall
499   0000              	GLOBAL _zx_aaddrcdown
500   0000              	GLOBAL _zx_aaddr2saddr_fastcall
501   0000              	GLOBAL _zx_aaddr2saddr
502   0000              	GLOBAL _zx_aaddr2py_fastcall
503   0000              	GLOBAL _zx_aaddr2py
504   0000              	GLOBAL _zx_aaddr2px_fastcall
505   0000              	GLOBAL _zx_aaddr2px
506   0000              	GLOBAL _zx_aaddr2cy_fastcall
507   0000              	GLOBAL _zx_aaddr2cy
508   0000              	GLOBAL _zx_aaddr2cx_fastcall
509   0000              	GLOBAL _zx_aaddr2cx
510   0000              	GLOBAL _zx_visit_wc_pix_callee
511   0000              	GLOBAL _zx_visit_wc_pix
512   0000              	GLOBAL _zx_visit_wc_attr_callee
513   0000              	GLOBAL _zx_visit_wc_attr
514   0000              	GLOBAL _zx_scroll_wc_up_pix_callee
515   0000              	GLOBAL _zx_scroll_wc_up_pix
516   0000              	GLOBAL _zx_scroll_wc_up_attr_callee
517   0000              	GLOBAL _zx_scroll_wc_up_attr
518   0000              	GLOBAL _zx_scroll_wc_up_callee
519   0000              	GLOBAL _zx_scroll_wc_up
520   0000              	GLOBAL _zx_scroll_up_pix_callee
521   0000              	GLOBAL _zx_scroll_up_pix
522   0000              	GLOBAL _zx_scroll_up_attr_callee
523   0000              	GLOBAL _zx_scroll_up_attr
524   0000              	GLOBAL _zx_scroll_up_callee
525   0000              	GLOBAL _zx_scroll_up
526   0000              	GLOBAL _zx_cls_wc_pix_callee
527   0000              	GLOBAL _zx_cls_wc_pix
528   0000              	GLOBAL _zx_cls_wc_attr_callee
529   0000              	GLOBAL _zx_cls_wc_attr
530   0000              	GLOBAL _zx_cls_wc_callee
531   0000              	GLOBAL _zx_cls_wc
532   0000              	GLOBAL _zx_cls_pix_fastcall
533   0000              	GLOBAL _zx_cls_pix
534   0000              	GLOBAL _zx_cls_attr_fastcall
535   0000              	GLOBAL _zx_cls_attr
536   0000              	GLOBAL _zx_cls_fastcall
537   0000              	GLOBAL _zx_cls
538   0000              	GLOBAL _zx_border_fastcall
539   0000              	GLOBAL _zx_border
540   0000              	GLOBAL _zx_tape_verify_block_callee
541   0000              	GLOBAL _zx_tape_verify_block
542   0000              	GLOBAL _zx_tape_save_block_callee
543   0000              	GLOBAL _zx_tape_save_block
544   0000              	GLOBAL _zx_tape_load_block_callee
545   0000              	GLOBAL _zx_tape_load_block
546   0000              	GLOBAL _spr_destroy
547   0000              	GLOBAL _spr_colision_boss
548   0000              	GLOBAL _spr_colision_b
549   0000              	GLOBAL _spr_unflattenP1
550   0000              	GLOBAL _spr_flatten
551   0000              	GLOBAL _spr_btile_paint_back
552   0000              	GLOBAL _spr_bullet_explode
553   0000              	GLOBAL _spr_init_effects
554   0000              	GLOBAL _spr_turn_horizontal
555   0000              	GLOBAL _spr_bullets_play
556   0000              	GLOBAL _spr_play_anim
557   0000              	GLOBAL _spr_add_anim
558   0000              	GLOBAL _spr_clear_scr
559   0000              	GLOBAL _spr_page_map
560   0000              	GLOBAL _spr_page_down
561   0000              	GLOBAL _spr_page_up
562   0000              	GLOBAL _spr_page_right
563   0000              	GLOBAL _spr_page_left
564   0000              	GLOBAL _spr_tile_paint
565   0000              	GLOBAL _spr_draw_index
566   0000              	GLOBAL _spr_brick_anim
567   0000              	GLOBAL _spr_back_repaint
568   0000              	GLOBAL _spr_tile_dir
569   0000              	GLOBAL _spr_tile
570   0000              	GLOBAL _spr_paint_player
571   0000              	GLOBAL _spr_paint
572   0000              	GLOBAL _spr_move_left
573   0000              	GLOBAL _spr_move_right
574   0000              	GLOBAL _spr_move_horizontal
575   0000              	GLOBAL _spr_move_down
576   0000              	GLOBAL _spr_move_up
577   0000              	GLOBAL _spr_set_right
578   0000              	GLOBAL _spr_set_left
579   0000              	GLOBAL _spr_set_down
580   0000              	GLOBAL _spr_set_up
581   0000              	GLOBAL _spr_calc_index
582   0000              	GLOBAL _spr_chktime
583   0000              	GLOBAL _game_match_back_strict
584   0000              	GLOBAL _game_match_back
585   0000              	GLOBAL _game_attribs
586   0000              	GLOBAL _game_boss_clear
587   0000              	GLOBAL _game_boss_kill
588   0000              	GLOBAL _game_obj_clear
589   0000              	GLOBAL _game_obj_chk
590   0000              	GLOBAL _game_obj_set
591   0000              	GLOBAL _game_shoot_fire_boss
592   0000              	GLOBAL _game_shoot_fire
593   0000              	GLOBAL _game_add_enemy
594   0000              	GLOBAL _game_print_header
595   0000              	GLOBAL _game_check_time
596   0000              	GLOBAL _game_rotate_attrib_osd
597   0000              	GLOBAL _game_rotate_attrib
598   0000              	GLOBAL _game_colour_message
599   0000              	GLOBAL _game_paint_attrib
600   0000              	GLOBAL _game_print_score
601   0000              	GLOBAL _game_check_cell
602   0000              	GLOBAL _game_check_map
603   0000              	GLOBAL _game_loop
604   0000              	GLOBAL _game_round_init
605   0000              	GLOBAL _game_set_checkpoint
606   0000              	GLOBAL _game_start_timer
607   0000              	GLOBAL _game_update_stats
608   0000              	GLOBAL _game_print_footer
609   0000              	GLOBAL _game_fill_row
610   0000              	GLOBAL _game_cls
611   0000              	GLOBAL _game_fps
612   0000              	GLOBAL _game_respawn
613   0000              	GLOBAL _game_draw_screen
614   0000              	GLOBAL _boss_draw_frame
615   0000              	GLOBAL _boss_draw
616   0000              	GLOBAL _boss_turn
617   0000              	GLOBAL _enemy_avoid_dead
618   0000              	GLOBAL _enemy_avoid_fall
619   0000              	GLOBAL _enemy_kill
620   0000              	GLOBAL _enemy_respawn
621   0000              	GLOBAL _enemy_init
622   0000              	GLOBAL _enemy_move
623   0000              	GLOBAL _enemy_turn
624   0000              	GLOBAL _enemy_static
625   0000              	GLOBAL _enemy_walk
626   0000              	GLOBAL _enemy_horizontal
627   0000              	GLOBAL _enemy_vertical
628   0000              	GLOBAL _ay_reset
629   0000              	GLOBAL _ay_song_stop
630   0000              	GLOBAL _ay_song_play
631   0000              	GLOBAL _ay_fx_stop
632   0000              	GLOBAL _ay_fx_play
633   0000              	GLOBAL _ay_is_playing
634   0000              	GLOBAL _audio_levelup
635   0000              	GLOBAL _audio_checkpoint
636   0000              	GLOBAL _audio_menu
637   0000              	GLOBAL _audio_game_end
638   0000              	GLOBAL _audio_level_complete
639   0000              	GLOBAL _audio_level_start
640   0000              	GLOBAL _audio_lotr_lose_a_life
641   0000              	GLOBAL _audio_mushroom
642   0000              	GLOBAL _audio_puerta
643   0000              	GLOBAL _audio_sin_mana
644   0000              	GLOBAL _audio_magic1
645   0000              	GLOBAL _audio_coin
646   0000              	GLOBAL _audio_golpe
647   0000              	GLOBAL _audio_salto
648   0000              	GLOBAL _audio_efecto
649   0000              	GLOBAL _audio_disparo_fire
650   0000              	GLOBAL _audio_disparo_axe
651   0000              	GLOBAL _audio_disparo2
652   0000              	GLOBAL _audio_disparo1
653   0000              	GLOBAL _audio_respawn
654   0000              	GLOBAL _audio_explosion1
655   0000              	GLOBAL _audio_explosion
656   0000              	GLOBAL _audio_ingame
657   0000              	GLOBAL _test_func
658   0000              	GLOBAL _test_proc
659   0000              	GLOBAL _in_mouse_kempston_wheel_delta
660   0000              	GLOBAL _in_mouse_kempston_wheel
661   0000              	GLOBAL _in_mouse_kempston_callee
662   0000              	GLOBAL _in_mouse_kempston
663   0000              	GLOBAL _in_mouse_kempston_setpos_callee
664   0000              	GLOBAL _in_mouse_kempston_setpos
665   0000              	GLOBAL _in_mouse_kempston_reset
666   0000              	GLOBAL _in_mouse_kempston_init
667   0000              	GLOBAL _in_mouse_amx_wheel_delta
668   0000              	GLOBAL _in_mouse_amx_wheel
669   0000              	GLOBAL _in_mouse_amx_callee
670   0000              	GLOBAL _in_mouse_amx
671   0000              	GLOBAL _in_mouse_amx_setpos_callee
672   0000              	GLOBAL _in_mouse_amx_setpos
673   0000              	GLOBAL _in_mouse_amx_reset
674   0000              	GLOBAL _in_mouse_amx_init_callee
675   0000              	GLOBAL _in_mouse_amx_init
676   0000              	GLOBAL _in_stick_sinclair2
677   0000              	GLOBAL _in_stick_sinclair1
678   0000              	GLOBAL _in_stick_kempston
679   0000              	GLOBAL _in_stick_fuller
680   0000              	GLOBAL _in_stick_cursor
681   0000              	GLOBAL _in_stick_keyboard_fastcall
682   0000              	GLOBAL _in_stick_keyboard
683   0000              	GLOBAL _in_wait_nokey
684   0000              	GLOBAL _in_wait_key
685   0000              	GLOBAL _in_test_key
686   0000              	GLOBAL _in_pause_fastcall
687   0000              	GLOBAL _in_pause
688   0000              	GLOBAL _in_key_scancode_fastcall
689   0000              	GLOBAL _in_key_scancode
690   0000              	GLOBAL _in_key_pressed_fastcall
691   0000              	GLOBAL _in_key_pressed
692   0000              	GLOBAL _in_inkey
693   0000              	GLOBAL _NIRVANAP_CHAR_TABLE
694   0000              	GLOBAL _NIRVANAP_WIDE_IMAGES
695   0000              	GLOBAL _NIRVANAP_TILE_IMAGES
696   0000              	GLOBAL _NIRVANAP_HOLE
697   0000              	GLOBAL _NIRVANAP_ISR_HOOK
698   0000              	GLOBAL _scan_map
699   0000              	GLOBAL _key_map
700   0000              	GLOBAL _player_lvl_table
701   0000              	GLOBAL _stp_row
702   0000              	GLOBAL _stp_col
703   0000              	GLOBAL _stp_tile
704   0000              	GLOBAL _map_paper_last_a
705   0000              	GLOBAL _map_paper_last
706   0000              	GLOBAL _map_paper_clr
707   0000              	GLOBAL _map_paper
708   0000              	GLOBAL _draw_count
709   0000              	GLOBAL _g_player_hit_right
710   0000              	GLOBAL _g_player_hit_left
711   0000              	GLOBAL _bullet_count
712   0000              	GLOBAL _spr_hack
713   0000              	GLOBAL _boss_stat
714   0000              	GLOBAL _boss_time_fire
715   0000              	GLOBAL _boss_time
716   0000              	GLOBAL _boss_tile
717   0000              	GLOBAL _boss_inc
718   0000              	GLOBAL _boss_col
719   0000              	GLOBAL _boss_lin
720   0000              	GLOBAL _bullet
721   0000              	GLOBAL _bullet_vel
722   0000              	GLOBAL _bullet_frames
723   0000              	GLOBAL _bullet_colint
724   0000              	GLOBAL _bullet_dir
725   0000              	GLOBAL _bullet_tile
726   0000              	GLOBAL _bullet_col
727   0000              	GLOBAL _bullet_lin
728   0000              	GLOBAL _bullet_col0
729   0000              	GLOBAL _bullet_lin0
730   0000              	GLOBAL _bullet_max
731   0000              	GLOBAL _bullet_class
732   0000              	GLOBAL _mush_class
733   0000              	GLOBAL _mush_index
734   0000              	GLOBAL _anim_count
735   0000              	GLOBAL _anim_respanwn
736   0000              	GLOBAL _anim_loop
737   0000              	GLOBAL _anim_end
738   0000              	GLOBAL _anim_int
739   0000              	GLOBAL _anim_tile
740   0000              	GLOBAL _anim_col
741   0000              	GLOBAL _anim_lin
742   0000              	GLOBAL _map_heigth
743   0000              	GLOBAL _map_width
744   0000              	GLOBAL _scr_curr
745   0000              	GLOBAL _sprite_kind
746   0000              	GLOBAL _scr_obj1
747   0000              	GLOBAL _scr_obj0
748   0000              	GLOBAL _scr_map
749   0000              	GLOBAL _spr_init
750   0000              	GLOBAL _spr_map_tile
751   0000              	GLOBAL _sprite_frames
752   0000              	GLOBAL _sprite_base_speed
753   0000              	GLOBAL _sprite_speed
754   0000              	GLOBAL _screen_ink
755   0000              	GLOBAL _screen_paper
756   0000              	GLOBAL _player_onstair
757   0000              	GLOBAL _game_start_scr
758   0000              	GLOBAL _game_respawn_tile
759   0000              	GLOBAL _game_respawn_index
760   0000              	GLOBAL _game_respawn_time
761   0000              	GLOBAL _game_score_top
762   0000              	GLOBAL _player_coins
763   0000              	GLOBAL _player_lives
764   0000              	GLOBAL _game_over
765   0000              	GLOBAL _game_sound
766   0000              	GLOBAL _game_inf_lives
767   0000              	GLOBAL _game_inmune
768   0000              	GLOBAL _sprite_curr_index
769   0000              	GLOBAL _spr_count
770   0000              	GLOBAL _bullet_time
771   0000              	GLOBAL _anim_time
772   0000              	GLOBAL _frame_time
773   0000              	GLOBAL _curr_time
774   0000              	GLOBAL _s_state
775   0000              	GLOBAL _attrib_osd
776   0000              	GLOBAL _attrib_hl
777   0000              	GLOBAL _attrib
778   0000              	GLOBAL _zx_val_asm
779   0000              	GLOBAL _enemies
780   0000              	GLOBAL _tmp_ui
781   0000              	GLOBAL _tmp_sc
782   0000              	GLOBAL _tmp_uc
783   0000              	GLOBAL _tmp1
784   0000              	GLOBAL _tmp0
785   0000              	GLOBAL _tmp
786   0000              	GLOBAL _index1
787   0000              	GLOBAL _index0
788   0000              	GLOBAL _loop_count
789   0000              	GLOBAL _s_class
790   0000              	GLOBAL _s_col1
791   0000              	GLOBAL _s_col0
792   0000              	GLOBAL _s_lin1
793   0000              	GLOBAL _s_lin0
794   0000              	GLOBAL _s_tile1
795   0000              	GLOBAL _s_tile0
796   0000              	GLOBAL _player_brick_time
797   0000              	GLOBAL _player_hit_count
798   0000              	GLOBAL _game_debug
799   0000              	GLOBAL _sprite_horizontal_check
800   0000              	GLOBAL _sprite_on_air
801   0000              	GLOBAL _sprite
802   0000              	GLOBAL _fps
803   0000              	GLOBAL _menu_curr_sel
804   0000              	GLOBAL _game_control_jump_lock
805   0000              	GLOBAL _game_control_fire_lock
806   0000              	GLOBAL _game_control_mode
807   0000              	GLOBAL _game_respawn_curr_time
808   0000              	GLOBAL _game_round_up
809   0000              	GLOBAL _game_mush_count
810   0000              	GLOBAL _game_song_play_start
811   0000              	GLOBAL _game_song_play
812   0000              	GLOBAL _game_boss_fix
813   0000              	GLOBAL _game_boss_hit
814   0000              	GLOBAL _game_boss_alive
815   0000              	GLOBAL _game_boss
816   0000              	GLOBAL _game_world
817   0000              	GLOBAL _game_gravity
818   0000              	GLOBAL _player_onfire
819   0000              	GLOBAL _player_anim_stair
820   0000              	GLOBAL _player_hit
821   0000              	GLOBAL _player_hit_time
822   0000              	GLOBAL _game_checkpoint_scr
823   0000              	GLOBAL _game_checkpoint_lin
824   0000              	GLOBAL _game_checkpoint_col
825   0000              	GLOBAL _player_jump_check
826   0000              	GLOBAL _player_lin_scr
827   0000              	GLOBAL _player_col_scr
828   0000              	GLOBAL _player_lvl
829   0000              	GLOBAL _player_int
830   0000              	GLOBAL _player_str
831   0000              	GLOBAL _player_max_vita
832   0000              	GLOBAL _player_max_mana
833   0000              	GLOBAL _player_vita
834   0000              	GLOBAL _player_mana
835   0000              	GLOBAL _player_keys
836   0000              	GLOBAL _player_vel_inc
837   0000              	GLOBAL _player_vel_y1
838   0000              	GLOBAL _player_vel_y0
839   0000              	GLOBAL _player_vel_y
840   0000              	GLOBAL _player_vel_x
841   0000              	GLOBAL _player_score
842   0000              	GLOBAL _last_time
843   0000              	GLOBAL _spr_timer
844   0000              	GLOBAL _jump_lin
845   0000              	GLOBAL _player_hit_col
846   0000              	GLOBAL _player_hit_lin
847   0000              	GLOBAL _colint
848   0000              	GLOBAL _col
849   0000              	GLOBAL _tbuffer
850   0000              	GLOBAL _lin
851   0000              	GLOBAL _tile
852   0000              	GLOBAL _state_a
853   0000              	GLOBAL _state
854   0000              	GLOBAL _class
855   0000              	GLOBAL _dirs_alt
856   0000              	GLOBAL _dirs
857   0000              	GLOBAL _k2
858   0000              	GLOBAL _k1
859   0000              	GLOBAL _joyfunc2
860   0000              	GLOBAL _joyfunc1
861   0000              	GLOBAL _btiles
862   0000              	GLOBAL _spec128
863   0000              	GLOBAL _GLOBAL_ZX_PORT_7FFD
864   0000              	GLOBAL _GLOBAL_ZX_PORT_1FFD
865   0000              	GLOBAL _GLOBAL_ZX_PORT_FE
866   0000              	GLOBAL _ay_fx_06_disparo_fire
867   0000              	GLOBAL _ay_fx_06_disparo_axe
868   0000              	GLOBAL _ay_fx_06_respawn
869   0000              	GLOBAL _ay_fx_06_explosion1
870   0000              	GLOBAL _ay_fx_06_efecto
871   0000              	GLOBAL _ay_fx_06_disparo2
872   0000              	GLOBAL _ay_fx_06_disparo1
873   0000              	GLOBAL _ay_fx_06_checkpoint
874   0000              	GLOBAL _ay_fx_06_levelup
875   0000              	GLOBAL _ay_fx_06_mushroom
876   0000              	GLOBAL _ay_fx_06_magic
877   0000              	GLOBAL _ay_fx_06_sin_mana
878   0000              	GLOBAL _ay_fx_06_salto
879   0000              	GLOBAL _ay_fx_06_puerta
880   0000              	GLOBAL _ay_fx_06_magic1
881   0000              	GLOBAL _ay_fx_06_golpe
882   0000              	GLOBAL _ay_fx_06_explosion
883   0000              	GLOBAL _ay_fx_06_dano_por_toque
884   0000              	GLOBAL _ay_fx_06_coin
885   0000              	GLOBAL _ay_song_06_lotr_level_start
886   0000              	GLOBAL _ay_song_06_lotr_level_complete
887   0000              	GLOBAL _ay_song_06_lotr_lose_a_life
888   0000              	GLOBAL _ay_song_04_doom
889   0000              	GLOBAL _ay_song_04_luna
890   0000              	GLOBAL _ay_song_04_ciel
891   0000              	GLOBAL _ay_song_04_hope
892   0000              	GLOBAL _ay_song_03_regis
893   0000              	GLOBAL _ay_song_03_sunflower
894   0000              	GLOBAL _ay_song_03_lotr
895   0000              	GLOBAL _world0_h
896   0000              	GLOBAL _world0_w
897   0000              	GLOBAL _world0
898   0000              	GLOBAL _paper0
899   0000              	GLOBAL _lenght0
900   0000              	GLOBAL _start_scr0
901   0000              ;--------------------------------------------------------
902   0000              ; special function registers
903   0000              ;--------------------------------------------------------
904   0000              defc _IO_FE	=	0x00fe
905   0000              defc _IO_1FFD	=	0x1ffd
906   0000              defc _IO_7FFD	=	0x7ffd
907   0000              ;--------------------------------------------------------
908   0000              ; ram data
909   0000              ;--------------------------------------------------------
910   0000              	SECTION bss_compiler
911   0000              ;--------------------------------------------------------
912   0000              ; ram data
913   0000              ;--------------------------------------------------------
914   0000              
915   0000              IF 0
916   0000              
917   0000              ; .area _INITIALIZED removed by z88dk
918   0000              
919   0000              
920   0000              ENDIF
921   0000              
922   0000              ;--------------------------------------------------------
923   0000              ; absolute external ram data
924   0000              ;--------------------------------------------------------
925   0000              	SECTION IGNORE
926   0000              ;--------------------------------------------------------
927   0000              ; global & static initialisations
928   0000              ;--------------------------------------------------------
929   0000              	SECTION code_crt_init
930   0000              ;--------------------------------------------------------
931   0000              ; Home
932   0000              ;--------------------------------------------------------
933   0000              	SECTION IGNORE
934   0000              ;--------------------------------------------------------
935   0000              ; code
936   0000              ;--------------------------------------------------------
937   0000              	SECTION code_compiler
938   0000              ;	---------------------------------
939   0000              ; Function player_init
940   0000              ; ---------------------------------
941   0000              _player_init:
942   0000  CD 00 00    	call	___sdcc_enter_ix
943   0003  21 07 00    	ld	hl, +(_class + 0x0007)
944   0006  36 00       	ld	(hl),0x00
945   0008  3A 00 00    	ld	a,(_sprite_base_speed)
946   000B  32 07 00    	ld	(_sprite_speed+7),a
947   000E  21 07 00    	ld	hl, +(_tile + 0x0007)
948   0011  DD 7E 06    	ld	a,(ix+6)
949   0014  77          	ld	(hl), a
950   0015  21 07 00    	ld	hl, +(_lin + 0x0007)
951   0018  DD 7E 04    	ld	a,(ix+4)
952   001B  77          	ld	(hl), a
953   001C  21 07 00    	ld	hl, +(_col + 0x0007)
954   001F  DD 7E 05    	ld	a,(ix+5)
955   0022  77          	ld	(hl), a
956   0023  21 07 00    	ld	hl, +(_colint + 0x0007)
957   0026  36 00       	ld	(hl),0x00
958   0028  21 07 00    	ld	hl, +(_state + 0x0007)
959   002B  36 00       	ld	(hl),0x00
960   002D  01 07 00    	ld	bc,_state_a+7
961   0030  AF          	xor	a, a
962   0031  02          	ld	(bc), a
963   0032  21 07 00    	ld	hl, +(_jump_lin + 0x0007)
964   0035  DD 7E 04    	ld	a,(ix+4)
965   0038  77          	ld	(hl), a
966   0039  ED 5B 00 00 	ld	de,(_curr_time)
967   003D  ED 53 0E 00 	ld	(_last_time + 0x000e),de
968   0041  0A          	ld	a, (bc)
969   0042  F6 11       	or	a,+(0x01|0x10)
970   0044  02          	ld	(bc),a
971   0045  21 00 00    	ld	hl,_player_hit_col
972   0048  36 00       	ld	(hl),0x00
973   004A  21 00 00    	ld	hl,_player_hit_lin
974   004D  36 00       	ld	(hl),0x00
975   004F  21 00 00    	ld	hl,_player_onstair
976   0052  36 00       	ld	(hl),0x00
977   0054  21 00 00    	ld	hl,_player_onfire
978   0057  36 00       	ld	(hl),0x00
979   0059  DD 66 05    	ld	h,(ix+5)
980   005C  DD 6E 04    	ld	l,(ix+4)
981   005F  E5          	push	hl
982   0060  DD 56 06    	ld	d,(ix+6)
983   0063  1E 07       	ld	e,0x07
984   0065  D5          	push	de
985   0066  CD 00 00    	call	_NIRVANAP_spriteT_callee
986   0069  DD E1       	pop	ix
987   006B  C9          	ret
988   006C              	SECTION code_compiler
989   006C              ;	---------------------------------
990   006C              ; Function player_turn
991   006C              ; ---------------------------------
992   006C              _player_turn:
993   006C  21 00 00    	ld	hl,_sprite
994   006F  CD 00 00    	call	_spr_chktime
995   0072  7D          	ld	a, l
996   0073  B7          	or	a, a
997   0074  C8          	ret	Z
998   0075  21 00 00    	ld	hl,_k1
999   0078  E5          	push	hl
1000  0079  2A 00 00    	ld	hl,(_joyfunc1)
1001  007C  CD 00 00    	call	___sdcc_call_hl
1002  007F  F1          	pop	af
1003  0080  7D          	ld	a,l
1004  0081  32 00 00    	ld	(_dirs),a
1005  0084  21 00 00    	ld	hl,_k2
1006  0087  E5          	push	hl
1007  0088  2A 00 00    	ld	hl,(_joyfunc2)
1008  008B  CD 00 00    	call	___sdcc_call_hl
1009  008E  F1          	pop	af
1010  008F  7D          	ld	a,l
1011  0090  32 00 00    	ld	(_dirs_alt),a
1012  0093  3A 07 00    	ld	a,(_lin + 0x0007)
1013  0096  32 00 00    	ld	(_s_lin0),a
1014  0099  3A 07 00    	ld	a,(_col + 0x0007)
1015  009C  32 00 00    	ld	(_s_col0),a
1016  009F  3A 07 00    	ld	a,(_state + 0x0007)
1017  00A2  32 00 00    	ld	(_s_state),a
1018  00A5  21 00 00    	ld	hl,_s_class
1019  00A8  36 00       	ld	(hl),0x00
1020  00AA  CD B7 00    	call	_player_move
1021  00AD  CD 2D 04    	call	_player_collision
1022  00B0  3A 00 00    	ld	a,(_s_state)
1023  00B3  32 07 00    	ld	((_state + 0x0007)),a
1024  00B6  C9          	ret
1025  00B7              	SECTION code_compiler
1026  00B7              ;	---------------------------------
1027  00B7              ; Function player_move
1028  00B7              ; ---------------------------------
1029  00B7              _player_move:
1030  00B7  CD E7 03    	call	_player_fire
1031  00BA  21 00 00    	ld	hl,_s_state
1032  00BD  CB 46       	bit	0,(hl)
1033  00BF  20 04       	jr	NZ,l_player_move_00105
1034  00C1  CB 4E       	bit	1, (hl)
1035  00C3  28 0A       	jr	Z,l_player_move_00106
1036  00C5              l_player_move_00105:
1037  00C5  21 00 00    	ld	hl,_sprite_on_air
1038  00C8  36 01       	ld	(hl),0x01
1039  00CA  CD 25 0E    	call	_player_move_jump
1040  00CD  18 17       	jr	l_player_move_00107
1041  00CF              l_player_move_00106:
1042  00CF  21 00 00    	ld	hl,_sprite_on_air
1043  00D2  36 00       	ld	(hl),0x00
1044  00D4  3A 00 00    	ld	a,(_player_onfire)
1045  00D7  B7          	or	a, a
1046  00D8  20 03       	jr	NZ,l_player_move_00102
1047  00DA  CD 4F 02    	call	_player_move_input
1048  00DD              l_player_move_00102:
1049  00DD  3A 00 00    	ld	a,(_player_onstair)
1050  00E0  B7          	or	a, a
1051  00E1  20 03       	jr	NZ,l_player_move_00107
1052  00E3  CD B4 0C    	call	_player_check_floor
1053  00E6              l_player_move_00107:
1054  00E6  3A 00 00    	ld	a,(_player_onfire)
1055  00E9  B7          	or	a, a
1056  00EA  20 0C       	jr	NZ,l_player_move_00116
1057  00EC  CD 00 00    	call	_spr_paint_player
1058  00EF  7D          	ld	a, l
1059  00F0  B7          	or	a, a
1060  00F1  28 39       	jr	Z,l_player_move_00117
1061  00F3  CD 8C 07    	call	_player_check_map
1062  00F6  18 34       	jr	l_player_move_00117
1063  00F8              l_player_move_00116:
1064  00F8  CD 00 00    	call	_spr_back_repaint
1065  00FB  3A 07 00    	ld	a,(_state_a + 0x0007)
1066  00FE  CB 67       	bit	4, a
1067  0100  28 10       	jr	Z,l_player_move_00112
1068  0102  21 07 00    	ld	hl,+(_col + 0x0007)
1069  0105  46          	ld	b, (hl)
1070  0106  21 07 00    	ld	hl,+(_lin + 0x0007)
1071  0109  4E          	ld	c, (hl)
1072  010A  C5          	push	bc
1073  010B  21 07 D0    	ld	hl,0xd007
1074  010E  E5          	push	hl
1075  010F  CD 00 00    	call	_NIRVANAP_spriteT_callee
1076  0112              l_player_move_00112:
1077  0112  3A 07 00    	ld	a,(_state_a + 0x0007)
1078  0115  CB 5F       	bit	3, a
1079  0117  28 10       	jr	Z,l_player_move_00114
1080  0119  21 07 00    	ld	hl,+(_col + 0x0007)
1081  011C  56          	ld	d, (hl)
1082  011D  21 07 00    	ld	hl,+(_lin + 0x0007)
1083  0120  5E          	ld	e, (hl)
1084  0121  D5          	push	de
1085  0122  21 07 D1    	ld	hl,0xd107
1086  0125  E5          	push	hl
1087  0126  CD 00 00    	call	_NIRVANAP_spriteT_callee
1088  0129              l_player_move_00114:
1089  0129  CD 8C 07    	call	_player_check_map
1090  012C              l_player_move_00117:
1091  012C  3A 00 00    	ld	a,(_player_hit_lin)
1092  012F  B7          	or	a, a
1093  0130  28 03       	jr	Z,l_player_move_00119
1094  0132  CD 18 0C    	call	_player_hit_platform_clear
1095  0135              l_player_move_00119:
1096  0135  2E 00       	ld	l,0x00
1097  0137  C9          	ret
1098  0138              	SECTION code_compiler
1099  0138              ;	---------------------------------
1100  0138              ; Function player_check_input
1101  0138              ; ---------------------------------
1102  0138              _player_check_input:
1103  0138  21 00 00    	ld	hl,_dirs
1104  013B  CB 56       	bit	2,(hl)
1105  013D  28 06       	jr	Z,l_player_check_input_00102
1106  013F  CB 5E       	bit	3,(hl)
1107  0141  28 02       	jr	Z,l_player_check_input_00102
1108  0143  36 00       	ld	(hl),0x00
1109  0145              l_player_check_input_00102:
1110  0145  21 00 00    	ld	hl,_dirs
1111  0148  CB 7E       	bit	7, (hl)
1112  014A  28 04       	jr	Z,l_player_check_input_00105
1113  014C  2E 01       	ld	l,0x01
1114  014E  18 40       	jr	l_player_check_input_00115
1115  0150              l_player_check_input_00105:
1116  0150  21 00 00    	ld	hl,_dirs
1117  0153  CB 46       	bit	0, (hl)
1118  0155  28 04       	jr	Z,l_player_check_input_00107
1119  0157  2E 01       	ld	l,0x01
1120  0159  18 35       	jr	l_player_check_input_00115
1121  015B              l_player_check_input_00107:
1122  015B  21 00 00    	ld	hl,_dirs
1123  015E  CB 56       	bit	2,(hl)
1124  0160  20 08       	jr	NZ,l_player_check_input_00108
1125  0162  CB 5E       	bit	3,(hl)
1126  0164  20 04       	jr	NZ,l_player_check_input_00108
1127  0166  CB 4E       	bit	1, (hl)
1128  0168  28 09       	jr	Z,l_player_check_input_00109
1129  016A              l_player_check_input_00108:
1130  016A  21 00 00    	ld	hl,_game_control_jump_lock
1131  016D  36 00       	ld	(hl),0x00
1132  016F  2E 01       	ld	l,0x01
1133  0171  18 1D       	jr	l_player_check_input_00115
1134  0173              l_player_check_input_00109:
1135  0173  3A 00 00    	ld	a,(_game_control_mode)
1136  0176  B7          	or	a, a
1137  0177  20 0B       	jr	NZ,l_player_check_input_00113
1138  0179  21 00 00    	ld	hl,_dirs_alt
1139  017C  CB 7E       	bit	7, (hl)
1140  017E  28 04       	jr	Z,l_player_check_input_00113
1141  0180  2E 01       	ld	l,0x01
1142  0182  18 0C       	jr	l_player_check_input_00115
1143  0184              l_player_check_input_00113:
1144  0184  21 00 00    	ld	hl,_game_control_fire_lock
1145  0187  36 00       	ld	(hl),0x00
1146  0189  21 00 00    	ld	hl,_game_control_jump_lock
1147  018C  36 00       	ld	(hl),0x00
1148  018E  2E 00       	ld	l,0x00
1149  0190              l_player_check_input_00115:
1150  0190  C9          	ret
1151  0191              	SECTION code_compiler
1152  0191              ;	---------------------------------
1153  0191              ; Function player_action_fire
1154  0191              ; ---------------------------------
1155  0191              _player_action_fire:
1156  0191  3A 00 00    	ld	a,(_game_control_mode)
1157  0194  B7          	or	a, a
1158  0195  28 1C       	jr	Z,l_player_action_fire_00101
1159  0197  21 00 00    	ld	hl,_dirs
1160  019A  7E          	ld	a, (hl)
1161  019B  CB 07       	rlc	a
1162  019D  E6 01       	and	a,0x01
1163  019F  4F          	ld	c, a
1164  01A0  7E          	ld	a, (hl)
1165  01A1  E6 01       	and	a,0x01
1166  01A3  47          	ld	b, a
1167  01A4  3A 00 00    	ld	a,(_game_control_mode)
1168  01A7  3D          	dec	a
1169  01A8  28 11       	jr	Z,l_player_action_fire_00102
1170  01AA  3A 00 00    	ld	a,(_game_control_mode)
1171  01AD  D6 02       	sub	a,0x02
1172  01AF  28 1A       	jr	Z,l_player_action_fire_00103
1173  01B1  18 3C       	jr	l_player_action_fire_00109
1174  01B3              l_player_action_fire_00101:
1175  01B3  3A 00 00    	ld	a,(_dirs_alt)
1176  01B6  E6 80       	and	a,0x80
1177  01B8  6F          	ld	l, a
1178  01B9  18 36       	jr	l_player_action_fire_00110
1179  01BB              l_player_action_fire_00102:
1180  01BB  CB 41       	bit	0, c
1181  01BD  28 04       	jr	Z,l_player_action_fire_00112
1182  01BF  78          	ld	a, b
1183  01C0  B7          	or	a, a
1184  01C1  28 04       	jr	Z,l_player_action_fire_00113
1185  01C3              l_player_action_fire_00112:
1186  01C3  2E 00       	ld	l,0x00
1187  01C5  18 02       	jr	l_player_action_fire_00114
1188  01C7              l_player_action_fire_00113:
1189  01C7  2E 01       	ld	l,0x01
1190  01C9              l_player_action_fire_00114:
1191  01C9  18 26       	jr	l_player_action_fire_00110
1192  01CB              l_player_action_fire_00103:
1193  01CB  3A 00 00    	ld	a,(_game_control_fire_lock)
1194  01CE  B7          	or	a, a
1195  01CF  20 1E       	jr	NZ,l_player_action_fire_00109
1196  01D1  3A 00 00    	ld	a,(_player_onstair)
1197  01D4  B7          	or	a, a
1198  01D5  28 10       	jr	Z,l_player_action_fire_00105
1199  01D7  CB 41       	bit	0, c
1200  01D9  28 04       	jr	Z,l_player_action_fire_00115
1201  01DB  78          	ld	a, b
1202  01DC  B7          	or	a, a
1203  01DD  28 04       	jr	Z,l_player_action_fire_00116
1204  01DF              l_player_action_fire_00115:
1205  01DF  2E 00       	ld	l,0x00
1206  01E1  18 02       	jr	l_player_action_fire_00117
1207  01E3              l_player_action_fire_00116:
1208  01E3  2E 01       	ld	l,0x01
1209  01E5              l_player_action_fire_00117:
1210  01E5  18 0A       	jr	l_player_action_fire_00110
1211  01E7              l_player_action_fire_00105:
1212  01E7  3A 00 00    	ld	a,(_dirs)
1213  01EA  E6 80       	and	a,0x80
1214  01EC  6F          	ld	l, a
1215  01ED  18 02       	jr	l_player_action_fire_00110
1216  01EF              l_player_action_fire_00109:
1217  01EF  2E 00       	ld	l,0x00
1218  01F1              l_player_action_fire_00110:
1219  01F1  C9          	ret
1220  01F2              	SECTION code_compiler
1221  01F2              ;	---------------------------------
1222  01F2              ; Function player_action_jump
1223  01F2              ; ---------------------------------
1224  01F2              _player_action_jump:
1225  01F2  3A 00 00    	ld	a,(_dirs)
1226  01F5  E6 80       	and	a,0x80
1227  01F7  4F          	ld	c, a
1228  01F8  3A 00 00    	ld	a,(_game_control_mode)
1229  01FB  B7          	or	a, a
1230  01FC  28 15       	jr	Z,l_player_action_jump_00101
1231  01FE  3A 00 00    	ld	a,(_dirs)
1232  0201  E6 01       	and	a,0x01
1233  0203  47          	ld	b, a
1234  0204  3A 00 00    	ld	a,(_game_control_mode)
1235  0207  3D          	dec	a
1236  0208  28 11       	jr	Z,l_player_action_jump_00104
1237  020A  3A 00 00    	ld	a,(_game_control_mode)
1238  020D  D6 02       	sub	a,0x02
1239  020F  28 21       	jr	Z,l_player_action_jump_00105
1240  0211  18 39       	jr	l_player_action_jump_00114
1241  0213              l_player_action_jump_00101:
1242  0213  79          	ld	a, c
1243  0214  B7          	or	a, a
1244  0215  28 35       	jr	Z,l_player_action_jump_00114
1245  0217  2E 01       	ld	l,0x01
1246  0219  18 33       	jr	l_player_action_jump_00115
1247  021B              l_player_action_jump_00104:
1248  021B  3A 00 00    	ld	a,(_dirs)
1249  021E  CB 07       	rlc	a
1250  0220  E6 01       	and	a,0x01
1251  0222  CB 47       	bit	0, a
1252  0224  28 04       	jr	Z,l_player_action_jump_00117
1253  0226  78          	ld	a, b
1254  0227  B7          	or	a, a
1255  0228  20 04       	jr	NZ,l_player_action_jump_00118
1256  022A              l_player_action_jump_00117:
1257  022A  2E 00       	ld	l,0x00
1258  022C  18 02       	jr	l_player_action_jump_00119
1259  022E              l_player_action_jump_00118:
1260  022E  2E 01       	ld	l,0x01
1261  0230              l_player_action_jump_00119:
1262  0230  18 1C       	jr	l_player_action_jump_00115
1263  0232              l_player_action_jump_00105:
1264  0232  3A 00 00    	ld	a,(_player_onstair)
1265  0235  B7          	or	a, a
1266  0236  28 0C       	jr	Z,l_player_action_jump_00112
1267  0238  79          	ld	a, c
1268  0239  B7          	or	a, a
1269  023A  28 10       	jr	Z,l_player_action_jump_00114
1270  023C  78          	ld	a, b
1271  023D  B7          	or	a, a
1272  023E  28 0C       	jr	Z,l_player_action_jump_00114
1273  0240  2E 01       	ld	l,0x01
1274  0242  18 0A       	jr	l_player_action_jump_00115
1275  0244              l_player_action_jump_00112:
1276  0244  78          	ld	a, b
1277  0245  B7          	or	a, a
1278  0246  28 04       	jr	Z,l_player_action_jump_00114
1279  0248  2E 01       	ld	l,0x01
1280  024A  18 02       	jr	l_player_action_jump_00115
1281  024C              l_player_action_jump_00114:
1282  024C  2E 00       	ld	l,0x00
1283  024E              l_player_action_jump_00115:
1284  024E  C9          	ret
1285  024F              	SECTION code_compiler
1286  024F              ;	---------------------------------
1287  024F              ; Function player_move_input
1288  024F              ; ---------------------------------
1289  024F              _player_move_input:
1290  024F  CD 38 01    	call	_player_check_input
1291  0252  7D          	ld	a, l
1292  0253  B7          	or	a, a
1293  0254  CA A7 03    	jp	Z, l_player_move_input_00150
1294  0257  3A 00 00    	ld	a,(_game_control_jump_lock)
1295  025A  B7          	or	a, a
1296  025B  20 61       	jr	NZ,l_player_move_input_00109
1297  025D  CD F2 01    	call	_player_action_jump
1298  0260  7D          	ld	a, l
1299  0261  B7          	or	a, a
1300  0262  28 5A       	jr	Z,l_player_move_input_00109
1301  0264  21 00 00    	ld	hl,_game_control_jump_lock
1302  0267  36 01       	ld	(hl),0x01
1303  0269  21 00 00    	ld	hl,_player_vel_inc
1304  026C  36 01       	ld	(hl),0x01
1305  026E  CD 00 00    	call	_audio_salto
1306  0271  21 00 00    	ld	hl,_player_onstair
1307  0274  36 00       	ld	(hl),0x00
1308  0276  21 00 00    	ld	hl,_s_state
1309  0279  CD 00 00    	call	_spr_set_up
1310  027C  3A 07 00    	ld	a,(_lin + 0x0007)
1311  027F  32 07 00    	ld	(_jump_lin+7),a
1312  0282  3A 00 00    	ld	a,(_s_state)
1313  0285  32 07 00    	ld	((_state + 0x0007)),a
1314  0288  21 64 08    	ld	hl,0x0864
1315  028B  E5          	push	hl
1316  028C  CD 6B 07    	call	_player_tile
1317  028F  E3          	ex	(sp),hl
1318  0290  E1          	pop	hl
1319  0291  3A 00 00    	ld	a,(_player_vel_y0)
1320  0294  32 00 00    	ld	(_player_vel_y),a
1321  0297  21 00 00    	ld	hl,_dirs
1322  029A  CB 56       	bit	2,(hl)
1323  029C  20 1B       	jr	NZ,l_player_move_input_00106
1324  029E  CB 5E       	bit	3, (hl)
1325  02A0  20 17       	jr	NZ,l_player_move_input_00106
1326  02A2  01 07 00    	ld	bc,_state_a+7
1327  02A5  0A          	ld	a, (bc)
1328  02A6  CB 5F       	bit	3, a
1329  02A8  28 05       	jr	Z,l_player_move_input_00102
1330  02AA  21 07 00    	ld	hl, +(_colint + 0x0007)
1331  02AD  36 02       	ld	(hl),0x02
1332  02AF              l_player_move_input_00102:
1333  02AF  0A          	ld	a, (bc)
1334  02B0  CB 67       	bit	4, a
1335  02B2  28 05       	jr	Z,l_player_move_input_00106
1336  02B4  21 07 00    	ld	hl, +(_colint + 0x0007)
1337  02B7  36 01       	ld	(hl),0x01
1338  02B9              l_player_move_input_00106:
1339  02B9  2E 01       	ld	l,0x01
1340  02BB  C3 CD 03    	jp	l_player_move_input_00152
1341  02BE              l_player_move_input_00109:
1342  02BE  21 00 00    	ld	hl,_dirs
1343  02C1  CB 5E       	bit	3, (hl)
1344  02C3  28 20       	jr	Z,l_player_move_input_00114
1345  02C5  CD CE 03    	call	_player_fix_walk_lin
1346  02C8  21 00 00    	ld	hl,_s_state
1347  02CB  CD 00 00    	call	_spr_set_right
1348  02CE  01 07 00    	ld	bc,_state_a+7
1349  02D1  0A          	ld	a, (bc)
1350  02D2  F6 10       	or	a,0x10
1351  02D4  E6 F7       	and	a,0xf7
1352  02D6  02          	ld	(bc),a
1353  02D7  3A 00 00    	ld	a,(_player_onstair)
1354  02DA  B7          	or	a, a
1355  02DB  28 05       	jr	Z,l_player_move_input_00112
1356  02DD  2E 00       	ld	l,0x00
1357  02DF  CD C3 06    	call	_player_check_stairs
1358  02E2              l_player_move_input_00112:
1359  02E2  CD 00 00    	call	_spr_move_horizontal
1360  02E5              l_player_move_input_00114:
1361  02E5  21 00 00    	ld	hl,_dirs
1362  02E8  CB 56       	bit	2, (hl)
1363  02EA  28 20       	jr	Z,l_player_move_input_00118
1364  02EC  CD CE 03    	call	_player_fix_walk_lin
1365  02EF  21 00 00    	ld	hl,_s_state
1366  02F2  CD 00 00    	call	_spr_set_left
1367  02F5  01 07 00    	ld	bc,_state_a+7
1368  02F8  0A          	ld	a, (bc)
1369  02F9  F6 08       	or	a,0x08
1370  02FB  E6 EF       	and	a,0xef
1371  02FD  02          	ld	(bc),a
1372  02FE  3A 00 00    	ld	a,(_player_onstair)
1373  0301  B7          	or	a, a
1374  0302  28 05       	jr	Z,l_player_move_input_00116
1375  0304  2E 00       	ld	l,0x00
1376  0306  CD C3 06    	call	_player_check_stairs
1377  0309              l_player_move_input_00116:
1378  0309  CD 00 00    	call	_spr_move_horizontal
1379  030C              l_player_move_input_00118:
1380  030C  21 00 00    	ld	hl,_dirs
1381  030F  CB 46       	bit	0, (hl)
1382  0311  28 36       	jr	Z,l_player_move_input_00130
1383  0313  2E 00       	ld	l,0x00
1384  0315  CD C3 06    	call	_player_check_stairs
1385  0318  3A 00 00    	ld	a,(_player_onstair)
1386  031B  B7          	or	a, a
1387  031C  20 10       	jr	NZ,l_player_move_input_00122
1388  031E  2E 01       	ld	l,0x01
1389  0320  CD C3 06    	call	_player_check_stairs
1390  0323  3A 00 00    	ld	a,(_player_onstair)
1391  0326  B7          	or	a, a
1392  0327  20 05       	jr	NZ,l_player_move_input_00122
1393  0329  2E FE       	ld	l,0xfe
1394  032B  CD 24 06    	call	_player_check_stairs_vertical
1395  032E              l_player_move_input_00122:
1396  032E  3A 00 00    	ld	a,(_player_onstair)
1397  0331  B7          	or	a, a
1398  0332  28 05       	jr	Z,l_player_move_input_00127
1399  0334  CD 00 00    	call	_spr_move_up
1400  0337  18 10       	jr	l_player_move_input_00130
1401  0339              l_player_move_input_00127:
1402  0339  21 00 00    	ld	hl,_dirs
1403  033C  CB 5E       	bit	3,(hl)
1404  033E  20 09       	jr	NZ,l_player_move_input_00130
1405  0340  CB 56       	bit	2, (hl)
1406  0342  20 05       	jr	NZ,l_player_move_input_00130
1407  0344  2E 00       	ld	l,0x00
1408  0346  C3 CD 03    	jp	l_player_move_input_00152
1409  0349              l_player_move_input_00130:
1410  0349  21 00 00    	ld	hl,_dirs
1411  034C  CB 4E       	bit	1, (hl)
1412  034E  28 35       	jr	Z,l_player_move_input_00142
1413  0350  2E 00       	ld	l,0x00
1414  0352  CD C3 06    	call	_player_check_stairs
1415  0355  3A 00 00    	ld	a,(_player_onstair)
1416  0358  B7          	or	a, a
1417  0359  20 10       	jr	NZ,l_player_move_input_00134
1418  035B  2E 01       	ld	l,0x01
1419  035D  CD C3 06    	call	_player_check_stairs
1420  0360  3A 00 00    	ld	a,(_player_onstair)
1421  0363  B7          	or	a, a
1422  0364  20 05       	jr	NZ,l_player_move_input_00134
1423  0366  2E 12       	ld	l,0x12
1424  0368  CD 24 06    	call	_player_check_stairs_vertical
1425  036B              l_player_move_input_00134:
1426  036B  3A 00 00    	ld	a,(_player_onstair)
1427  036E  B7          	or	a, a
1428  036F  28 05       	jr	Z,l_player_move_input_00139
1429  0371  CD 00 00    	call	_spr_move_down
1430  0374  18 0F       	jr	l_player_move_input_00142
1431  0376              l_player_move_input_00139:
1432  0376  21 00 00    	ld	hl,_dirs
1433  0379  CB 5E       	bit	3,(hl)
1434  037B  20 08       	jr	NZ,l_player_move_input_00142
1435  037D  CB 56       	bit	2, (hl)
1436  037F  20 04       	jr	NZ,l_player_move_input_00142
1437  0381  2E 00       	ld	l,0x00
1438  0383  18 48       	jr	l_player_move_input_00152
1439  0385              l_player_move_input_00142:
1440  0385  3A 00 00    	ld	a,(_s_state)
1441  0388  32 07 00    	ld	((_state + 0x0007)),a
1442  038B  3A 00 00    	ld	a,(_player_onstair)
1443  038E  B7          	or	a, a
1444  038F  28 0A       	jr	Z,l_player_move_input_00144
1445  0391  21 72 00    	ld	hl,0x0072
1446  0394  E5          	push	hl
1447  0395  CD 6B 07    	call	_player_tile
1448  0398  F1          	pop	af
1449  0399  18 08       	jr	l_player_move_input_00145
1450  039B              l_player_move_input_00144:
1451  039B  21 60 08    	ld	hl,0x0860
1452  039E  E5          	push	hl
1453  039F  CD 6B 07    	call	_player_tile
1454  03A2  F1          	pop	af
1455  03A3              l_player_move_input_00145:
1456  03A3  2E 01       	ld	l,0x01
1457  03A5  18 26       	jr	l_player_move_input_00152
1458  03A7              l_player_move_input_00150:
1459  03A7  21 07 00    	ld	hl, +(_colint + 0x0007)
1460  03AA  36 00       	ld	(hl),0x00
1461  03AC  3A 00 00    	ld	a,(_player_onstair)
1462  03AF  B7          	or	a, a
1463  03B0  28 0A       	jr	Z,l_player_move_input_00147
1464  03B2  21 72 00    	ld	hl,0x0072
1465  03B5  E5          	push	hl
1466  03B6  CD 6B 07    	call	_player_tile
1467  03B9  F1          	pop	af
1468  03BA  18 08       	jr	l_player_move_input_00148
1469  03BC              l_player_move_input_00147:
1470  03BC  21 70 01    	ld	hl,0x0170
1471  03BF  E5          	push	hl
1472  03C0  CD 6B 07    	call	_player_tile
1473  03C3  F1          	pop	af
1474  03C4              l_player_move_input_00148:
1475  03C4  21 00 00    	ld	hl,_s_state
1476  03C7  7E          	ld	a,(hl)
1477  03C8  E6 F3       	and	a,+(0xf7&0xfb)
1478  03CA  77          	ld	(hl),a
1479  03CB  2E 00       	ld	l,0x00
1480  03CD              l_player_move_input_00152:
1481  03CD  C9          	ret
1482  03CE              	SECTION code_compiler
1483  03CE              ;	---------------------------------
1484  03CE              ; Function player_fix_walk_lin
1485  03CE              ; ---------------------------------
1486  03CE              _player_fix_walk_lin:
1487  03CE  3A 00 00    	ld	a,(_player_onstair)
1488  03D1  B7          	or	a, a
1489  03D2  C0          	ret	NZ
1490  03D3  01 07 00    	ld	bc,_lin+7
1491  03D6  3A 00 00    	ld	a,(_s_lin0)
1492  03D9  07          	rlca
1493  03DA  07          	rlca
1494  03DB  07          	rlca
1495  03DC  07          	rlca
1496  03DD  E6 0F       	and	a,0x0f
1497  03DF  07          	rlca
1498  03E0  07          	rlca
1499  03E1  07          	rlca
1500  03E2  07          	rlca
1501  03E3  E6 F0       	and	a,0xf0
1502  03E5  02          	ld	(bc), a
1503  03E6  C9          	ret
1504  03E7              	SECTION code_compiler
1505  03E7              ;	---------------------------------
1506  03E7              ; Function player_fire
1507  03E7              ; ---------------------------------
1508  03E7              _player_fire:
1509  03E7  CD 91 01    	call	_player_action_fire
1510  03EA  4D          	ld	c, l
1511  03EB  21 00 00    	ld	hl,_player_onfire
1512  03EE  71          	ld	(hl), c
1513  03EF  3A 07 00    	ld	a,(_bullet_col + 0x0007)
1514  03F2  3C          	inc	a
1515  03F3  20 37       	jr	NZ,l_player_fire_00113
1516  03F5  7E          	ld	a, (hl)
1517  03F6  B7          	or	a, a
1518  03F7  28 33       	jr	Z,l_player_fire_00113
1519  03F9  21 00 00    	ld	hl,_player_mana
1520  03FC  7E          	ld	a, (hl)
1521  03FD  B7          	or	a, a
1522  03FE  28 29       	jr	Z,l_player_fire_00107
1523  0400  3E 05       	ld	a,0x05
1524  0402  96          	sub	a, (hl)
1525  0403  30 0F       	jr	NC,l_player_fire_00104
1526  0405  3A 00 00    	ld	a,(_game_inmune)
1527  0408  B7          	or	a, a
1528  0409  20 0E       	jr	NZ,l_player_fire_00105
1529  040B  21 00 00    	ld	hl,_player_mana
1530  040E  7E          	ld	a, (hl)
1531  040F  C6 FB       	add	a,0xfb
1532  0411  77          	ld	(hl), a
1533  0412  18 05       	jr	l_player_fire_00105
1534  0414              l_player_fire_00104:
1535  0414  21 00 00    	ld	hl,_player_mana
1536  0417  36 00       	ld	(hl),0x00
1537  0419              l_player_fire_00105:
1538  0419  CD 00 00    	call	_game_update_stats
1539  041C  CD 00 00    	call	_audio_disparo1
1540  041F  21 07 78    	ld	hl,0x7807
1541  0422  E5          	push	hl
1542  0423  CD 00 00    	call	_game_shoot_fire
1543  0426  F1          	pop	af
1544  0427  18 03       	jr	l_player_fire_00113
1545  0429              l_player_fire_00107:
1546  0429  CD 00 00    	call	_audio_sin_mana
1547  042C              l_player_fire_00113:
1548  042C  C9          	ret
1549  042D              	SECTION code_compiler
1550  042D              ;	---------------------------------
1551  042D              ; Function player_collision
1552  042D              ; ---------------------------------
1553  042D              _player_collision:
1554  042D  3E 1E       	ld	a,0x1e
1555  042F  F5          	push	af
1556  0430  33          	inc	sp
1557  0431  21 00 00    	ld	hl,_player_hit_time
1558  0434  E5          	push	hl
1559  0435  CD 00 00    	call	_game_check_time
1560  0438  F1          	pop	af
1561  0439  33          	inc	sp
1562  043A  7D          	ld	a, l
1563  043B  B7          	or	a, a
1564  043C  CA D8 05    	jp	Z, l_player_collision_00135
1565  043F  21 00 00    	ld	hl,_player_hit
1566  0442  36 00       	ld	(hl),0x00
1567  0444  21 00 00    	ld	hl,_sprite
1568  0447  36 00       	ld	(hl),0x00
1569  0449  3A 07 00    	ld	a,(_col + 7)
1570  044C  32 00 00    	ld	(_s_col1),a
1571  044F  3A 07 00    	ld	a,(_lin + 7)
1572  0452  32 00 00    	ld	(_s_lin1),a
1573  0455  C6 08       	add	a,0x08
1574  0457  4F          	ld	c, a
1575  0458  3A 00 00    	ld	a, (_s_col1)
1576  045B  47          	ld	b,a
1577  045C  C5          	push	bc
1578  045D  CD 00 00    	call	_spr_calc_index
1579  0460  F1          	pop	af
1580  0461  4D          	ld	c, l
1581  0462  21 00 00    	ld	hl,_sprite_curr_index
1582  0465  71          	ld	(hl), c
1583  0466  3E 00       	ld	a, +((_scr_map) & 0xFF)
1584  0468  86          	add	a, (hl)
1585  0469  4F          	ld	c, a
1586  046A  3E 00       	ld	a, +((_scr_map) / 256)
1587  046C  CE 00       	adc	a,0x00
1588  046E  47          	ld	b, a
1589  046F  0A          	ld	a, (bc)
1590  0470  4F          	ld	c,a
1591  0471  D6 15       	sub	a,0x15
1592  0473  20 2E       	jr	NZ,l_player_collision_00104
1593  0475  3A 00 00    	ld	a,(_game_checkpoint_scr)
1594  0478  21 00 00    	ld	hl,_scr_curr
1595  047B  96          	sub	a, (hl)
1596  047C  28 20       	jr	Z,l_player_collision_00102
1597  047E  C5          	push	bc
1598  047F  CD 00 00    	call	_audio_checkpoint
1599  0482  C1          	pop	bc
1600  0483  3A 00 00    	ld	a,(_sprite_curr_index)
1601  0486  E6 0F       	and	a,0x0f
1602  0488  87          	add	a, a
1603  0489  32 00 00    	ld	(_player_col_scr),a
1604  048C  3A 00 00    	ld	a,(_sprite_curr_index)
1605  048F  07          	rlca
1606  0490  07          	rlca
1607  0491  07          	rlca
1608  0492  07          	rlca
1609  0493  E6 0F       	and	a,0x0f
1610  0495  07          	rlca
1611  0496  07          	rlca
1612  0497  07          	rlca
1613  0498  07          	rlca
1614  0499  E6 F0       	and	a,0xf0
1615  049B  32 00 00    	ld	(_player_lin_scr),a
1616  049E              l_player_collision_00102:
1617  049E  C5          	push	bc
1618  049F  CD 00 00    	call	_game_set_checkpoint
1619  04A2  C1          	pop	bc
1620  04A3              l_player_collision_00104:
1621  04A3  3E 2F       	ld	a,0x2f
1622  04A5  91          	sub	a, c
1623  04A6  30 58       	jr	NC,l_player_collision_00155
1624  04A8  79          	ld	a,c
1625  04A9  FE 3A       	cp	a,0x3a
1626  04AB  30 53       	jr	NC,l_player_collision_00155
1627  04AD  D6 39       	sub	a,0x39
1628  04AF  20 2A       	jr	NZ,l_player_collision_00110
1629  04B1  CD 00 00    	call	_audio_level_complete
1630  04B4  21 00 00    	ld	hl,___str_0
1631  04B7  E5          	push	hl
1632  04B8  21 0C 08    	ld	hl,0x080c
1633  04BB  E5          	push	hl
1634  04BC  CD 00 00    	call	_zx_print_str
1635  04BF  AF          	xor	a, a
1636  04C0  F5          	push	af
1637  04C1  33          	inc	sp
1638  04C2  21 E8 03    	ld	hl,0x03e8
1639  04C5  E5          	push	hl
1640  04C6  21 08 17    	ld	hl,0x1708
1641  04C9  E5          	push	hl
1642  04CA  3E 0C       	ld	a,0x0c
1643  04CC  F5          	push	af
1644  04CD  33          	inc	sp
1645  04CE  CD 00 00    	call	_game_colour_message
1646  04D1  F1          	pop	af
1647  04D2  F1          	pop	af
1648  04D3  F1          	pop	af
1649  04D4  21 00 00    	ld	hl,_game_round_up
1650  04D7  36 01       	ld	(hl),0x01
1651  04D9  18 25       	jr	l_player_collision_00155
1652  04DB              l_player_collision_00110:
1653  04DB  3A 00 00    	ld	a,(_game_inmune)
1654  04DE  B7          	or	a, a
1655  04DF  20 10       	jr	NZ,l_player_collision_00106
1656  04E1  3E 82       	ld	a,0x82
1657  04E3  21 00 00    	ld	hl,_s_lin1
1658  04E6  96          	sub	a, (hl)
1659  04E7  30 08       	jr	NC,l_player_collision_00106
1660  04E9  CD 2F 10    	call	_player_lost_life
1661  04EC  2E 00       	ld	l,0x00
1662  04EE  C3 DA 05    	jp	l_player_collision_00136
1663  04F1              l_player_collision_00106:
1664  04F1  21 00 00    	ld	hl,_s_state
1665  04F4  CB E6       	set	4, (hl)
1666  04F6  2E 32       	ld	l,0x32
1667  04F8  CD 75 11    	call	_player_damage
1668  04FB  2E 01       	ld	l,0x01
1669  04FD  C3 DA 05    	jp	l_player_collision_00136
1670  0500              l_player_collision_00155:
1671  0500              l_player_collision_00131:
1672  0500  21 00 00    	ld	hl,_sprite
1673  0503  7E          	ld	a, (hl)
1674  0504  D6 07       	sub	a,0x07
1675  0506  D2 D3 05    	jp	NC, l_player_collision_00133
1676  0509  4E          	ld	c,(hl)
1677  050A  06 00       	ld	b,0x00
1678  050C  21 00 00    	ld	hl,_class
1679  050F  09          	add	hl,bc
1680  0510  7E          	ld	a,(hl)
1681  0511  32 00 00    	ld	(_s_class),a
1682  0514  B7          	or	a, a
1683  0515  CA CC 05    	jp	Z, l_player_collision_00130
1684  0518  2A 00 00    	ld	hl,(_sprite)
1685  051B  26 00       	ld	h,0x00
1686  051D  01 00 00    	ld	bc,_col
1687  0520  09          	add	hl,bc
1688  0521  4E          	ld	c,(hl)
1689  0522  06 00       	ld	b,0x00
1690  0524  3A 00 00    	ld	a,(_s_col1)
1691  0527  5F          	ld	e,a
1692  0528  16 00       	ld	d,0x00
1693  052A  79          	ld	a, c
1694  052B  93          	sub	a, e
1695  052C  6F          	ld	l, a
1696  052D  78          	ld	a, b
1697  052E  9A          	sbc	a, d
1698  052F  67          	ld	h, a
1699  0530  CD 00 00    	call	_abs_fastcall
1700  0533  7D          	ld	a,l
1701  0534  D6 02       	sub	a,0x02
1702  0536  7C          	ld	a,h
1703  0537  17          	rla
1704  0538  3F          	ccf
1705  0539  1F          	rra
1706  053A  DE 80       	sbc	a,0x80
1707  053C  D2 CC 05    	jp	NC, l_player_collision_00130
1708  053F  2A 00 00    	ld	hl,(_sprite)
1709  0542  26 00       	ld	h,0x00
1710  0544  01 00 00    	ld	bc,_lin
1711  0547  09          	add	hl,bc
1712  0548  4E          	ld	c,(hl)
1713  0549  06 00       	ld	b,0x00
1714  054B  3A 00 00    	ld	a,(_s_lin1)
1715  054E  5F          	ld	e,a
1716  054F  16 00       	ld	d,0x00
1717  0551  79          	ld	a, c
1718  0552  93          	sub	a, e
1719  0553  6F          	ld	l, a
1720  0554  78          	ld	a, b
1721  0555  9A          	sbc	a, d
1722  0556  67          	ld	h, a
1723  0557  CD 00 00    	call	_abs_fastcall
1724  055A  7D          	ld	a,l
1725  055B  D6 0E       	sub	a,0x0e
1726  055D  7C          	ld	a,h
1727  055E  17          	rla
1728  055F  3F          	ccf
1729  0560  1F          	rra
1730  0561  DE 80       	sbc	a,0x80
1731  0563  30 67       	jr	NC,l_player_collision_00130
1732  0565  3A 00 00    	ld	a,(_s_class)
1733  0568  D6 06       	sub	a,0x06
1734  056A  20 1D       	jr	NZ,l_player_collision_00118
1735  056C  21 00 00    	ld	hl,_player_vita
1736  056F  7E          	ld	a, (hl)
1737  0570  C6 32       	add	a,0x32
1738  0572  77          	ld	(hl), a
1739  0573  3A 00 00    	ld	a,(_player_max_vita)
1740  0576  21 00 00    	ld	hl,_player_vita
1741  0579  96          	sub	a, (hl)
1742  057A  30 06       	jr	NC,l_player_collision_00116
1743  057C  3A 00 00    	ld	a,(_player_max_vita)
1744  057F  32 00 00    	ld	(_player_vita),a
1745  0582              l_player_collision_00116:
1746  0582  CD DB 05    	call	_player_pick_mushroom
1747  0585  2E 00       	ld	l,0x00
1748  0587  18 51       	jr	l_player_collision_00136
1749  0589              l_player_collision_00118:
1750  0589  3A 00 00    	ld	a,(_s_class)
1751  058C  D6 07       	sub	a,0x07
1752  058E  20 1D       	jr	NZ,l_player_collision_00122
1753  0590  21 00 00    	ld	hl,_player_mana
1754  0593  7E          	ld	a, (hl)
1755  0594  C6 32       	add	a,0x32
1756  0596  77          	ld	(hl), a
1757  0597  3A 00 00    	ld	a,(_player_max_mana)
1758  059A  21 00 00    	ld	hl,_player_mana
1759  059D  96          	sub	a, (hl)
1760  059E  30 06       	jr	NC,l_player_collision_00120
1761  05A0  3A 00 00    	ld	a,(_player_max_mana)
1762  05A3  32 00 00    	ld	(_player_mana),a
1763  05A6              l_player_collision_00120:
1764  05A6  CD DB 05    	call	_player_pick_mushroom
1765  05A9  2E 00       	ld	l,0x00
1766  05AB  18 2D       	jr	l_player_collision_00136
1767  05AD              l_player_collision_00122:
1768  05AD  3A 00 00    	ld	a,(_s_class)
1769  05B0  D6 08       	sub	a,0x08
1770  05B2  20 0A       	jr	NZ,l_player_collision_00124
1771  05B4  CD DB 05    	call	_player_pick_mushroom
1772  05B7  CD F2 05    	call	_player_1up
1773  05BA  2E 00       	ld	l,0x00
1774  05BC  18 1C       	jr	l_player_collision_00136
1775  05BE              l_player_collision_00124:
1776  05BE  21 00 00    	ld	hl,_s_state
1777  05C1  CB E6       	set	4, (hl)
1778  05C3  2E 14       	ld	l,0x14
1779  05C5  CD 75 11    	call	_player_damage
1780  05C8  2E 01       	ld	l,0x01
1781  05CA  18 0E       	jr	l_player_collision_00136
1782  05CC              l_player_collision_00130:
1783  05CC  21 00 00    	ld	hl,_sprite
1784  05CF  34          	inc	(hl)
1785  05D0  C3 00 05    	jp	l_player_collision_00131
1786  05D3              l_player_collision_00133:
1787  05D3  21 00 00    	ld	hl,_s_state
1788  05D6  CB A6       	res	4, (hl)
1789  05D8              l_player_collision_00135:
1790  05D8  2E 00       	ld	l,0x00
1791  05DA              l_player_collision_00136:
1792  05DA  C9          	ret
1793  05DB              	SECTION rodata_compiler
1794  0000              ___str_0:
1795  0000  52 4F 55 4E 44 20 43 4F 4D 50 4C 45 54 45 21 
                        	DEFM "ROUND COMPLETE!"
1796  000F  00          	DEFB 0x00
1797  0010              	SECTION code_compiler
1798  05DB              ;	---------------------------------
1799  05DB              ; Function player_pick_mushroom
1800  05DB              ; ---------------------------------
1801  05DB              _player_pick_mushroom:
1802  05DB  CD 00 00    	call	_audio_magic1
1803  05DE  21 01 00    	ld	hl,0x0001
1804  05E1  CD 47 0C    	call	_player_score_add
1805  05E4  CD 00 00    	call	_game_update_stats
1806  05E7  2A 00 00    	ld	hl,(_sprite)
1807  05EA  CD 00 00    	call	_spr_destroy
1808  05ED  21 00 00    	ld	hl,_game_mush_count
1809  05F0  35          	dec	(hl)
1810  05F1  C9          	ret
1811  05F2              	SECTION code_compiler
1812  05F2              ;	---------------------------------
1813  05F2              ; Function player_1up
1814  05F2              ; ---------------------------------
1815  05F2              _player_1up:
1816  05F2  21 00 00    	ld	hl,_player_lives
1817  05F5  7E          	ld	a, (hl)
1818  05F6  D6 64       	sub	a,0x64
1819  05F8  D0          	ret	NC
1820  05F9  34          	inc	(hl)
1821  05FA  CD 00 00    	call	_spr_flatten
1822  05FD  21 10 00    	ld	hl,___str_1
1823  0600  E5          	push	hl
1824  0601  21 0C 0C    	ld	hl,0x0c0c
1825  0604  E5          	push	hl
1826  0605  CD 00 00    	call	_zx_print_str
1827  0608  AF          	xor	a, a
1828  0609  F5          	push	af
1829  060A  33          	inc	sp
1830  060B  21 19 00    	ld	hl,0x0019
1831  060E  E5          	push	hl
1832  060F  21 0C 11    	ld	hl,0x110c
1833  0612  E5          	push	hl
1834  0613  3E 0C       	ld	a,0x0c
1835  0615  F5          	push	af
1836  0616  33          	inc	sp
1837  0617  CD 00 00    	call	_game_colour_message
1838  061A  F1          	pop	af
1839  061B  F1          	pop	af
1840  061C  F1          	pop	af
1841  061D  CD 00 00    	call	_game_update_stats
1842  0620  CD 00 00    	call	_spr_unflattenP1
1843  0623  C9          	ret
1844  0624              	SECTION rodata_compiler
1845  0010              ___str_1:
1846  0010  31 20 55 50 21 
                        	DEFM "1 UP!"
1847  0015  00          	DEFB 0x00
1848  0016              	SECTION code_compiler
1849  0624              ;	---------------------------------
1850  0624              ; Function player_check_stairs_vertical
1851  0624              ; ---------------------------------
1852  0624              _player_check_stairs_vertical:
1853  0624  CD 00 00    	call	___sdcc_enter_ix
1854  0627  3B          	dec	sp
1855  0628  4D          	ld	c, l
1856  0629  21 07 00    	ld	hl,+(_col + 0x0007)
1857  062C  46          	ld	b, (hl)
1858  062D  CB 40       	bit	0, b
1859  062F  20 2A       	jr	NZ,l_player_check_stairs_vertical_00102
1860  0631  3A 07 00    	ld	a,(_lin + 0x0007)
1861  0634  81          	add	a, c
1862  0635  4F          	ld	c,a
1863  0636  C5          	push	bc
1864  0637  CD 00 00    	call	_spr_calc_index
1865  063A  F1          	pop	af
1866  063B  7D          	ld	a,l
1867  063C  32 00 00    	ld	(_sprite_curr_index),a
1868  063F  4F          	ld	c,a
1869  0640  06 00       	ld	b,0x00
1870  0642  21 00 00    	ld	hl,_scr_map
1871  0645  09          	add	hl,bc
1872  0646  7E          	ld	a,(hl)
1873  0647  4F          	ld	c,a
1874  0648  D6 44       	sub	a,0x44
1875  064A  38 05       	jr	C,l_player_check_stairs_vertical_00110
1876  064C  3E 47       	ld	a,0x47
1877  064E  91          	sub	a, c
1878  064F  30 04       	jr	NC,l_player_check_stairs_vertical_00111
1879  0651              l_player_check_stairs_vertical_00110:
1880  0651  06 00       	ld	b,0x00
1881  0653  18 02       	jr	l_player_check_stairs_vertical_00112
1882  0655              l_player_check_stairs_vertical_00111:
1883  0655  06 01       	ld	b,0x01
1884  0657              l_player_check_stairs_vertical_00112:
1885  0657  0E 00       	ld	c,0x00
1886  0659  18 51       	jr	l_player_check_stairs_vertical_00103
1887  065B              l_player_check_stairs_vertical_00102:
1888  065B  78          	ld	a, b
1889  065C  91          	sub	a, c
1890  065D  57          	ld	d, a
1891  065E  3A 07 00    	ld	a,(_lin + 0x0007)
1892  0661  81          	add	a, c
1893  0662  47          	ld	b, a
1894  0663  C5          	push	bc
1895  0664  58          	ld	e,b
1896  0665  D5          	push	de
1897  0666  CD 00 00    	call	_spr_calc_index
1898  0669  F1          	pop	af
1899  066A  C1          	pop	bc
1900  066B  7D          	ld	a,l
1901  066C  32 00 00    	ld	(_sprite_curr_index),a
1902  066F  5F          	ld	e,a
1903  0670  16 00       	ld	d,0x00
1904  0672  21 00 00    	ld	hl,_scr_map
1905  0675  19          	add	hl,de
1906  0676  7E          	ld	a,(hl)
1907  0677  47          	ld	b,a
1908  0678  D6 44       	sub	a,0x44
1909  067A  38 05       	jr	C,l_player_check_stairs_vertical_00113
1910  067C  3E 47       	ld	a,0x47
1911  067E  90          	sub	a, b
1912  067F  30 04       	jr	NC,l_player_check_stairs_vertical_00114
1913  0681              l_player_check_stairs_vertical_00113:
1914  0681  06 00       	ld	b,0x00
1915  0683  18 02       	jr	l_player_check_stairs_vertical_00115
1916  0685              l_player_check_stairs_vertical_00114:
1917  0685  06 01       	ld	b,0x01
1918  0687              l_player_check_stairs_vertical_00115:
1919  0687  3A 07 00    	ld	a,(_col + 0x0007)
1920  068A  91          	sub	a, c
1921  068B  57          	ld	d, a
1922  068C  3A 07 00    	ld	a,(_lin + 0x0007)
1923  068F  81          	add	a, c
1924  0690  C5          	push	bc
1925  0691  5F          	ld	e,a
1926  0692  D5          	push	de
1927  0693  CD 00 00    	call	_spr_calc_index
1928  0696  F1          	pop	af
1929  0697  C1          	pop	bc
1930  0698  7D          	ld	a,l
1931  0699  32 00 00    	ld	(_sprite_curr_index),a
1932  069C  78          	ld	a, b
1933  069D  D6 44       	sub	a,0x44
1934  069F  38 05       	jr	C,l_player_check_stairs_vertical_00116
1935  06A1  3E 47       	ld	a,0x47
1936  06A3  90          	sub	a, b
1937  06A4  30 04       	jr	NC,l_player_check_stairs_vertical_00117
1938  06A6              l_player_check_stairs_vertical_00116:
1939  06A6  0E 00       	ld	c,0x00
1940  06A8  18 02       	jr	l_player_check_stairs_vertical_00118
1941  06AA              l_player_check_stairs_vertical_00117:
1942  06AA  0E 01       	ld	c,0x01
1943  06AC              l_player_check_stairs_vertical_00118:
1944  06AC              l_player_check_stairs_vertical_00103:
1945  06AC  78          	ld	a, b
1946  06AD  B7          	or	a,a
1947  06AE  20 03       	jr	NZ,l_player_check_stairs_vertical_00104
1948  06B0  B1          	or	a,c
1949  06B1  28 07       	jr	Z,l_player_check_stairs_vertical_00105
1950  06B3              l_player_check_stairs_vertical_00104:
1951  06B3  21 00 00    	ld	hl,_player_onstair
1952  06B6  36 01       	ld	(hl),0x01
1953  06B8  18 05       	jr	l_player_check_stairs_vertical_00108
1954  06BA              l_player_check_stairs_vertical_00105:
1955  06BA  21 00 00    	ld	hl,_player_onstair
1956  06BD  36 00       	ld	(hl),0x00
1957  06BF              l_player_check_stairs_vertical_00108:
1958  06BF  33          	inc	sp
1959  06C0  DD E1       	pop	ix
1960  06C2  C9          	ret
1961  06C3              	SECTION code_compiler
1962  06C3              ;	---------------------------------
1963  06C3              ; Function player_check_stairs
1964  06C3              ; ---------------------------------
1965  06C3              _player_check_stairs:
1966  06C3  CD 00 00    	call	___sdcc_enter_ix
1967  06C6  3B          	dec	sp
1968  06C7  45          	ld	b, l
1969  06C8  3A 07 00    	ld	a,(_col + 0x0007)
1970  06CB  4F          	ld	c,a
1971  06CC  80          	add	a, b
1972  06CD  57          	ld	d, a
1973  06CE  3A 07 00    	ld	a,(_lin + 0x0007)
1974  06D1  C5          	push	bc
1975  06D2  5F          	ld	e,a
1976  06D3  D5          	push	de
1977  06D4  CD 00 00    	call	_spr_calc_index
1978  06D7  F1          	pop	af
1979  06D8  C1          	pop	bc
1980  06D9  7D          	ld	a,l
1981  06DA  32 00 00    	ld	(_sprite_curr_index),a
1982  06DD  5F          	ld	e,a
1983  06DE  16 00       	ld	d,0x00
1984  06E0  21 00 00    	ld	hl,_scr_map
1985  06E3  19          	add	hl,de
1986  06E4  7E          	ld	a,(hl)
1987  06E5  4F          	ld	c,a
1988  06E6  D6 44       	sub	a,0x44
1989  06E8  38 05       	jr	C,l_player_check_stairs_00111
1990  06EA  3E 47       	ld	a,0x47
1991  06EC  91          	sub	a, c
1992  06ED  30 04       	jr	NC,l_player_check_stairs_00112
1993  06EF              l_player_check_stairs_00111:
1994  06EF  0E 00       	ld	c,0x00
1995  06F1  18 02       	jr	l_player_check_stairs_00113
1996  06F3              l_player_check_stairs_00112:
1997  06F3  0E 01       	ld	c,0x01
1998  06F5              l_player_check_stairs_00113:
1999  06F5  3A 07 00    	ld	a,(_col + 0x0007)
2000  06F8  80          	add	a, b
2001  06F9  57          	ld	d, a
2002  06FA  3A 07 00    	ld	a,(_lin + 0x0007)
2003  06FD  C6 0F       	add	a,0x0f
2004  06FF  47          	ld	b, a
2005  0700  C5          	push	bc
2006  0701  58          	ld	e,b
2007  0702  D5          	push	de
2008  0703  CD 00 00    	call	_spr_calc_index
2009  0706  F1          	pop	af
2010  0707  C1          	pop	bc
2011  0708  7D          	ld	a,l
2012  0709  32 00 00    	ld	(_sprite_curr_index),a
2013  070C  5F          	ld	e,a
2014  070D  16 00       	ld	d,0x00
2015  070F  21 00 00    	ld	hl,_scr_map
2016  0712  19          	add	hl,de
2017  0713  7E          	ld	a,(hl)
2018  0714  47          	ld	b,a
2019  0715  D6 44       	sub	a,0x44
2020  0717  38 05       	jr	C,l_player_check_stairs_00114
2021  0719  3E 47       	ld	a,0x47
2022  071B  90          	sub	a, b
2023  071C  30 04       	jr	NC,l_player_check_stairs_00115
2024  071E              l_player_check_stairs_00114:
2025  071E  06 00       	ld	b,0x00
2026  0720  18 02       	jr	l_player_check_stairs_00116
2027  0722              l_player_check_stairs_00115:
2028  0722  06 01       	ld	b,0x01
2029  0724              l_player_check_stairs_00116:
2030  0724  79          	ld	a, c
2031  0725  B7          	or	a,a
2032  0726  20 03       	jr	NZ,l_player_check_stairs_00105
2033  0728  B0          	or	a,b
2034  0729  28 13       	jr	Z,l_player_check_stairs_00106
2035  072B              l_player_check_stairs_00105:
2036  072B  21 00 00    	ld	hl,_player_onstair
2037  072E  7E          	ld	a, (hl)
2038  072F  B7          	or	a, a
2039  0730  20 1D       	jr	NZ,l_player_check_stairs_00109
2040  0732  36 01       	ld	(hl),0x01
2041  0734  21 72 00    	ld	hl,0x0072
2042  0737  E5          	push	hl
2043  0738  CD 6B 07    	call	_player_tile
2044  073B  F1          	pop	af
2045  073C  18 11       	jr	l_player_check_stairs_00109
2046  073E              l_player_check_stairs_00106:
2047  073E  21 00 00    	ld	hl,_player_onstair
2048  0741  7E          	ld	a, (hl)
2049  0742  B7          	or	a, a
2050  0743  28 0A       	jr	Z,l_player_check_stairs_00109
2051  0745  36 00       	ld	(hl),0x00
2052  0747  21 60 08    	ld	hl,0x0860
2053  074A  E5          	push	hl
2054  074B  CD 6B 07    	call	_player_tile
2055  074E  F1          	pop	af
2056  074F              l_player_check_stairs_00109:
2057  074F  33          	inc	sp
2058  0750  DD E1       	pop	ix
2059  0752  C9          	ret
2060  0753              	SECTION code_compiler
2061  0753              ;	---------------------------------
2062  0753              ; Function player_anim_stairs
2063  0753              ; ---------------------------------
2064  0753              _player_anim_stairs:
2065  0753  21 00 00    	ld	hl,_player_anim_stair
2066  0756  34          	inc	(hl)
2067  0757  3E 01       	ld	a,0x01
2068  0759  96          	sub	a, (hl)
2069  075A  30 02       	jr	NC,l_player_anim_stairs_00102
2070  075C  36 00       	ld	(hl),0x00
2071  075E              l_player_anim_stairs_00102:
2072  075E  3A 07 00    	ld	a,(_tile + 0x0007)
2073  0761  21 00 00    	ld	hl,_player_anim_stair
2074  0764  86          	add	a, (hl)
2075  0765  C6 04       	add	a,0x04
2076  0767  32 00 00    	ld	(_s_tile1),a
2077  076A  C9          	ret
2078  076B              	SECTION code_compiler
2079  076B              ;	---------------------------------
2080  076B              ; Function player_tile
2081  076B              ; ---------------------------------
2082  076B              _player_tile:
2083  076B  CD 00 00    	call	___sdcc_enter_ix
2084  076E  21 05 00    	ld	hl,0x0005
2085  0771  39          	add	hl, sp
2086  0772  EB          	ex	de,hl
2087  0773  21 04 00    	ld	hl,0x0004
2088  0776  39          	add	hl, sp
2089  0777  4D          	ld	c, l
2090  0778  44          	ld	b, h
2091  0779  D5          	push	de
2092  077A  21 00 00    	ld	hl,_sprite
2093  077D  E5          	push	hl
2094  077E  C5          	push	bc
2095  077F  CD 00 00    	call	_spr_tile_dir
2096  0782  F1          	pop	af
2097  0783  F1          	pop	af
2098  0784  F1          	pop	af
2099  0785  7D          	ld	a,l
2100  0786  32 07 00    	ld	((_tile + 0x0007)),a
2101  0789  DD E1       	pop	ix
2102  078B  C9          	ret
2103  078C              	SECTION code_compiler
2104  078C              ;	---------------------------------
2105  078C              ; Function player_check_map
2106  078C              ; ---------------------------------
2107  078C              _player_check_map:
2108  078C  21 07 00    	ld	hl,+(_col + 0x0007)
2109  078F  56          	ld	d, (hl)
2110  0790  21 07 00    	ld	hl,+(_lin + 0x0007)
2111  0793  5E          	ld	e, (hl)
2112  0794  D5          	push	de
2113  0795  CD 00 00    	call	_spr_calc_index
2114  0798  F1          	pop	af
2115  0799  7D          	ld	a,l
2116  079A  32 00 00    	ld	(_sprite_curr_index),a
2117  079D  CD E6 07    	call	_player_pick_item
2118  07A0  21 07 00    	ld	hl,+(_col + 0x0007)
2119  07A3  46          	ld	b, (hl)
2120  07A4  3A 07 00    	ld	a,(_lin + 0x0007)
2121  07A7  E6 0F       	and	a,0x0f
2122  07A9  4F          	ld	c, a
2123  07AA  CB 40       	bit	0, b
2124  07AC  20 10       	jr	NZ,l_player_check_map_00108
2125  07AE  79          	ld	a, c
2126  07AF  B7          	or	a, a
2127  07B0  28 33       	jr	Z,l_player_check_map_00110
2128  07B2  21 00 00    	ld	hl,_sprite_curr_index
2129  07B5  7E          	ld	a, (hl)
2130  07B6  C6 10       	add	a,0x10
2131  07B8  77          	ld	(hl), a
2132  07B9  CD E6 07    	call	_player_pick_item
2133  07BC  18 27       	jr	l_player_check_map_00110
2134  07BE              l_player_check_map_00108:
2135  07BE  21 00 00    	ld	hl,_sprite_curr_index
2136  07C1  46          	ld	b, (hl)
2137  07C2  04          	inc	b
2138  07C3  79          	ld	a, c
2139  07C4  B7          	or	a, a
2140  07C5  20 06       	jr	NZ,l_player_check_map_00105
2141  07C7  70          	ld	(hl), b
2142  07C8  CD E6 07    	call	_player_pick_item
2143  07CB  18 18       	jr	l_player_check_map_00110
2144  07CD              l_player_check_map_00105:
2145  07CD  21 00 00    	ld	hl,_sprite_curr_index
2146  07D0  70          	ld	(hl), b
2147  07D1  CD E6 07    	call	_player_pick_item
2148  07D4  21 00 00    	ld	hl,_sprite_curr_index
2149  07D7  7E          	ld	a, (hl)
2150  07D8  C6 0F       	add	a,0x0f
2151  07DA  77          	ld	(hl), a
2152  07DB  CD E6 07    	call	_player_pick_item
2153  07DE  21 00 00    	ld	hl,_sprite_curr_index
2154  07E1  34          	inc	(hl)
2155  07E2  CD E6 07    	call	_player_pick_item
2156  07E5              l_player_check_map_00110:
2157  07E5  C9          	ret
2158  07E6              	SECTION code_compiler
2159  07E6              ;	---------------------------------
2160  07E6              ; Function player_pick_item
2161  07E6              ; ---------------------------------
2162  07E6              _player_pick_item:
2163  07E6  CD 00 00    	call	___sdcc_enter_ix
2164  07E9  F5          	push	af
2165  07EA  3B          	dec	sp
2166  07EB  2A 00 00    	ld	hl,(_sprite_curr_index)
2167  07EE  26 00       	ld	h,0x00
2168  07F0  01 00 00    	ld	bc,_scr_map
2169  07F3  09          	add	hl,bc
2170  07F4  7E          	ld	a,(hl)
2171  07F5  4D          	ld	c,l
2172  07F6  44          	ld	b,h
2173  07F7  21 00 00    	ld	hl,_sprite_curr_index
2174  07FA  DD 77 FD    	ld	(ix-3),a
2175  07FD  D6 24       	sub	a,0x24
2176  07FF  3E 00       	ld	a,0x00
2177  0801  17          	rla
2178  0802  DD 77 FF    	ld	(ix-1),a
2179  0805  CB 47       	bit	0,a
2180  0807  C2 91 09    	jp	NZ, l_player_pick_item_00131
2181  080A  3E 2F       	ld	a,0x2f
2182  080C  DD 96 FD    	sub	a,(ix-3)
2183  080F  3E 00       	ld	a,0x00
2184  0811  17          	rla
2185  0812  DD 77 FE    	ld	(ix-2),a
2186  0815  CB 47       	bit	0,a
2187  0817  C2 91 09    	jp	NZ, l_player_pick_item_00131
2188  081A  5E          	ld	e, (hl)
2189  081B  16 00       	ld	d,0x00
2190  081D  C5          	push	bc
2191  081E  EB          	ex	de,hl
2192  081F  CD 00 00    	call	_game_match_back
2193  0822  C1          	pop	bc
2194  0823  7D          	ld	a,l
2195  0824  02          	ld	(bc), a
2196  0825  2A 00 00    	ld	hl,(_sprite_curr_index)
2197  0828  26 00       	ld	h,0x00
2198  082A  CD 00 00    	call	_game_obj_set
2199  082D  3A 00 00    	ld	a,(_sprite_curr_index)
2200  0830  07          	rlca
2201  0831  07          	rlca
2202  0832  07          	rlca
2203  0833  07          	rlca
2204  0834  E6 0F       	and	a,0x0f
2205  0836  07          	rlca
2206  0837  07          	rlca
2207  0838  07          	rlca
2208  0839  07          	rlca
2209  083A  E6 F0       	and	a,0xf0
2210  083C  32 00 00    	ld	(_s_lin1),a
2211  083F  3A 00 00    	ld	a,(_sprite_curr_index)
2212  0842  E6 0F       	and	a,0x0f
2213  0844  87          	add	a, a
2214  0845  32 00 00    	ld	(_s_col1),a
2215  0848  21 00 00    	ld	hl,0x0000
2216  084B  E5          	push	hl
2217  084C  21 84 03    	ld	hl,0x0384
2218  084F  E5          	push	hl
2219  0850  2A 00 00    	ld	hl,(_s_lin1)
2220  0853  67          	ld	h,a
2221  0854  E5          	push	hl
2222  0855  CD 00 00    	call	_spr_add_anim
2223  0858  F1          	pop	af
2224  0859  F1          	pop	af
2225  085A  F1          	pop	af
2226  085B  DD CB FF 46 	bit	0,(ix-1)
2227  085F  C2 91 09    	jp	NZ, l_player_pick_item_00131
2228  0862  DD CB FE 46 	bit	0,(ix-2)
2229  0866  C2 91 09    	jp	NZ, l_player_pick_item_00131
2230  0869  DD 7E FD    	ld	a,(ix-3)
2231  086C  C6 DC       	add	a,0xdc
2232  086E  4F          	ld	c, a
2233  086F  06 00       	ld	b,0x00
2234  0871  21 78 08    	ld	hl,l_player_pick_item_00177
2235  0874  09          	add	hl, bc
2236  0875  09          	add	hl, bc
2237  0876  09          	add	hl, bc
2238  0877  E9          	jp	(hl)
2239  0878              l_player_pick_item_00177:
2240  0878  C3 9C 08    	jp	l_player_pick_item_00101
2241  087B  C3 AA 08    	jp	l_player_pick_item_00102
2242  087E  C3 B8 08    	jp	l_player_pick_item_00103
2243  0881  C3 C6 08    	jp	l_player_pick_item_00104
2244  0884  C3 D4 08    	jp	l_player_pick_item_00105
2245  0887  C3 01 09    	jp	l_player_pick_item_00109
2246  088A  C3 1B 09    	jp	l_player_pick_item_00112
2247  088D  C3 33 09    	jp	l_player_pick_item_00115
2248  0890  C3 4B 09    	jp	l_player_pick_item_00118
2249  0893  C3 63 09    	jp	l_player_pick_item_00121
2250  0896  C3 7B 09    	jp	l_player_pick_item_00124
2251  0899  C3 F5 08    	jp	l_player_pick_item_00108
2252  089C              l_player_pick_item_00101:
2253  089C  CD 00 00    	call	_audio_efecto
2254  089F  21 00 00    	ld	hl,_player_keys
2255  08A2  36 01       	ld	(hl),0x01
2256  08A4  CD 00 00    	call	_game_update_stats
2257  08A7  C3 91 09    	jp	l_player_pick_item_00131
2258  08AA              l_player_pick_item_00102:
2259  08AA  CD 00 00    	call	_audio_efecto
2260  08AD  21 01 00    	ld	hl, +(_player_keys + 0x0001)
2261  08B0  36 01       	ld	(hl),0x01
2262  08B2  CD 00 00    	call	_game_update_stats
2263  08B5  C3 91 09    	jp	l_player_pick_item_00131
2264  08B8              l_player_pick_item_00103:
2265  08B8  CD 00 00    	call	_audio_efecto
2266  08BB  21 02 00    	ld	hl, +(_player_keys + 0x0002)
2267  08BE  36 01       	ld	(hl),0x01
2268  08C0  CD 00 00    	call	_game_update_stats
2269  08C3  C3 91 09    	jp	l_player_pick_item_00131
2270  08C6              l_player_pick_item_00104:
2271  08C6  CD 00 00    	call	_audio_efecto
2272  08C9  21 03 00    	ld	hl, +(_player_keys + 0x0003)
2273  08CC  36 01       	ld	(hl),0x01
2274  08CE  CD 00 00    	call	_game_update_stats
2275  08D1  C3 91 09    	jp	l_player_pick_item_00131
2276  08D4              l_player_pick_item_00105:
2277  08D4  CD 00 00    	call	_audio_coin
2278  08D7  21 01 00    	ld	hl,0x0001
2279  08DA  CD 47 0C    	call	_player_score_add
2280  08DD  21 00 00    	ld	hl,_player_coins
2281  08E0  7E          	ld	a,(hl)
2282  08E1  3C          	inc	a
2283  08E2  77          	ld	(hl),a
2284  08E3  D6 64       	sub	a,0x64
2285  08E5  20 08       	jr	NZ,l_player_pick_item_00107
2286  08E7  CD F2 05    	call	_player_1up
2287  08EA  21 00 00    	ld	hl,_player_coins
2288  08ED  36 00       	ld	(hl),0x00
2289  08EF              l_player_pick_item_00107:
2290  08EF  CD 00 00    	call	_game_update_stats
2291  08F2  C3 91 09    	jp	l_player_pick_item_00131
2292  08F5              l_player_pick_item_00108:
2293  08F5  CD 00 00    	call	_audio_magic1
2294  08F8  21 0A 00    	ld	hl,0x000a
2295  08FB  CD 47 0C    	call	_player_score_add
2296  08FE  C3 91 09    	jp	l_player_pick_item_00131
2297  0901              l_player_pick_item_00109:
2298  0901  CD 00 00    	call	_audio_efecto
2299  0904  21 00 00    	ld	hl,_player_str
2300  0907  34          	inc	(hl)
2301  0908  21 00 00    	ld	hl,_player_max_vita
2302  090B  7E          	ld	a, (hl)
2303  090C  D6 C8       	sub	a,0xc8
2304  090E  D2 91 09    	jp	NC, l_player_pick_item_00131
2305  0911  7E          	ld	a, (hl)
2306  0912  C6 0A       	add	a,0x0a
2307  0914  77          	ld	(hl), a
2308  0915  CD 00 00    	call	_game_update_stats
2309  0918  C3 91 09    	jp	l_player_pick_item_00131
2310  091B              l_player_pick_item_00112:
2311  091B  CD 00 00    	call	_audio_efecto
2312  091E  21 00 00    	ld	hl,_player_str
2313  0921  34          	inc	(hl)
2314  0922  21 00 00    	ld	hl,_player_max_vita
2315  0925  7E          	ld	a, (hl)
2316  0926  D6 C8       	sub	a,0xc8
2317  0928  30 67       	jr	NC,l_player_pick_item_00131
2318  092A  7E          	ld	a, (hl)
2319  092B  C6 0A       	add	a,0x0a
2320  092D  77          	ld	(hl), a
2321  092E  CD 00 00    	call	_game_update_stats
2322  0931  18 5E       	jr	l_player_pick_item_00131
2323  0933              l_player_pick_item_00115:
2324  0933  CD 00 00    	call	_audio_efecto
2325  0936  21 00 00    	ld	hl,_player_str
2326  0939  34          	inc	(hl)
2327  093A  21 00 00    	ld	hl,_player_max_vita
2328  093D  7E          	ld	a, (hl)
2329  093E  D6 C8       	sub	a,0xc8
2330  0940  30 4F       	jr	NC,l_player_pick_item_00131
2331  0942  7E          	ld	a, (hl)
2332  0943  C6 0A       	add	a,0x0a
2333  0945  77          	ld	(hl), a
2334  0946  CD 00 00    	call	_game_update_stats
2335  0949  18 46       	jr	l_player_pick_item_00131
2336  094B              l_player_pick_item_00118:
2337  094B  CD 00 00    	call	_audio_efecto
2338  094E  21 00 00    	ld	hl,_player_int
2339  0951  34          	inc	(hl)
2340  0952  21 00 00    	ld	hl,_player_max_mana
2341  0955  7E          	ld	a, (hl)
2342  0956  D6 C8       	sub	a,0xc8
2343  0958  30 37       	jr	NC,l_player_pick_item_00131
2344  095A  7E          	ld	a, (hl)
2345  095B  C6 0A       	add	a,0x0a
2346  095D  77          	ld	(hl), a
2347  095E  CD 00 00    	call	_game_update_stats
2348  0961  18 2E       	jr	l_player_pick_item_00131
2349  0963              l_player_pick_item_00121:
2350  0963  CD 00 00    	call	_audio_efecto
2351  0966  21 00 00    	ld	hl,_player_int
2352  0969  34          	inc	(hl)
2353  096A  21 00 00    	ld	hl,_player_max_mana
2354  096D  7E          	ld	a, (hl)
2355  096E  D6 C8       	sub	a,0xc8
2356  0970  30 1F       	jr	NC,l_player_pick_item_00131
2357  0972  7E          	ld	a, (hl)
2358  0973  C6 0A       	add	a,0x0a
2359  0975  77          	ld	(hl), a
2360  0976  CD 00 00    	call	_game_update_stats
2361  0979  18 16       	jr	l_player_pick_item_00131
2362  097B              l_player_pick_item_00124:
2363  097B  CD 00 00    	call	_audio_efecto
2364  097E  21 00 00    	ld	hl,_player_int
2365  0981  34          	inc	(hl)
2366  0982  21 00 00    	ld	hl,_player_max_mana
2367  0985  7E          	ld	a, (hl)
2368  0986  D6 C8       	sub	a,0xc8
2369  0988  30 07       	jr	NC,l_player_pick_item_00131
2370  098A  7E          	ld	a, (hl)
2371  098B  C6 0A       	add	a,0x0a
2372  098D  77          	ld	(hl), a
2373  098E  CD 00 00    	call	_game_update_stats
2374  0991              l_player_pick_item_00131:
2375  0991  DD F9       	ld	sp, ix
2376  0993  DD E1       	pop	ix
2377  0995  C9          	ret
2378  0996              	SECTION code_compiler
2379  0996              ;	---------------------------------
2380  0996              ; Function player_hit_platform
2381  0996              ; ---------------------------------
2382  0996              _player_hit_platform:
2383  0996  CD 00 00    	call	___sdcc_enter_ix
2384  0999  3B          	dec	sp
2385  099A  3A 00 00    	ld	a,(_player_hit_lin)
2386  099D  B7          	or	a, a
2387  099E  C2 12 0C    	jp	NZ, l_player_hit_platform_00148
2388  09A1  21 07 00    	ld	hl,+(_lin + 0x0007)
2389  09A4  4E          	ld	c, (hl)
2390  09A5  3E 10       	ld	a,0x10
2391  09A7  91          	sub	a, c
2392  09A8  D2 12 0C    	jp	NC, l_player_hit_platform_00148
2393  09AB  2A 00 00    	ld	hl,(_index1)
2394  09AE  01 00 00    	ld	bc,_scr_map
2395  09B1  09          	add	hl,bc
2396  09B2  7E          	ld	a,(hl)
2397  09B3  FE 45       	cp	a,0x45
2398  09B5  DA 12 0C    	jp	C,l_player_hit_platform_00148
2399  09B8  D6 4D       	sub	a,0x4d
2400  09BA  20 42       	jr	NZ,l_player_hit_platform_00102
2401  09BC  E5          	push	hl
2402  09BD  2A 00 00    	ld	hl,(_index1)
2403  09C0  CD 00 00    	call	_game_match_back
2404  09C3  C1          	pop	bc
2405  09C4  7D          	ld	a,l
2406  09C5  02          	ld	(bc), a
2407  09C6  2A 00 00    	ld	hl,(_index1)
2408  09C9  CD 00 00    	call	_game_obj_set
2409  09CC  CD 00 00    	call	_audio_explosion
2410  09CF  21 00 00    	ld	hl,_index1
2411  09D2  7E          	ld	a, (hl)
2412  09D3  E6 0F       	and	a,0x0f
2413  09D5  87          	add	a, a
2414  09D6  57          	ld	d, a
2415  09D7  4E          	ld	c, (hl)
2416  09D8  23          	inc	hl
2417  09D9  5E          	ld	e, (hl)
2418  09DA  06 04       	ld	b,0x04
2419  09DC  79          	ld	a,c
2420  09DD              l_player_hit_platform_00261:
2421  09DD  CB 3B       	srl	e
2422  09DF  1F          	rra
2423  09E0  10 FB       	djnz	l_player_hit_platform_00261
2424  09E2  07          	rlca
2425  09E3  07          	rlca
2426  09E4  07          	rlca
2427  09E5  07          	rlca
2428  09E6  E6 F0       	and	a,0xf0
2429  09E8  47          	ld	b, a
2430  09E9  21 00 00    	ld	hl,0x0000
2431  09EC  E5          	push	hl
2432  09ED  21 87 03    	ld	hl,0x0387
2433  09F0  E5          	push	hl
2434  09F1  58          	ld	e,b
2435  09F2  D5          	push	de
2436  09F3  CD 00 00    	call	_spr_add_anim
2437  09F6  F1          	pop	af
2438  09F7  F1          	pop	af
2439  09F8  F1          	pop	af
2440  09F9  2E 01       	ld	l,0x01
2441  09FB  C3 14 0C    	jp	l_player_hit_platform_00151
2442  09FE              l_player_hit_platform_00102:
2443  09FE  2A 00 00    	ld	hl,(_curr_time)
2444  0A01  22 0E 00    	ld	(_spr_timer + 0x000e),hl
2445  0A04  3A 07 00    	ld	a,(_lin + 0x0007)
2446  0A07  06 00       	ld	b,0x00
2447  0A09  C6 F8       	add	a,0xf8
2448  0A0B  4F          	ld	c, a
2449  0A0C  78          	ld	a, b
2450  0A0D  CE FF       	adc	a,0xff
2451  0A0F  5F          	ld	e, a
2452  0A10  06 04       	ld	b,0x04
2453  0A12              l_player_hit_platform_00262:
2454  0A12  CB 2B       	sra	e
2455  0A14  CB 19       	rr	c
2456  0A16  10 FA       	djnz	l_player_hit_platform_00262
2457  0A18  79          	ld	a, c
2458  0A19  07          	rlca
2459  0A1A  07          	rlca
2460  0A1B  07          	rlca
2461  0A1C  07          	rlca
2462  0A1D  E6 F0       	and	a,0xf0
2463  0A1F  C6 08       	add	a,0x08
2464  0A21  32 00 00    	ld	(_player_hit_lin),a
2465  0A24  21 07 00    	ld	hl,+(_col + 0x0007)
2466  0A27  4E          	ld	c, (hl)
2467  0A28  CB 41       	bit	0, c
2468  0A2A  20 06       	jr	NZ,l_player_hit_platform_00113
2469  0A2C  21 00 00    	ld	hl,_player_hit_col
2470  0A2F  71          	ld	(hl), c
2471  0A30  18 2D       	jr	l_player_hit_platform_00114
2472  0A32              l_player_hit_platform_00113:
2473  0A32  21 07 00    	ld	hl,+(_state + 0x0007)
2474  0A35  5E          	ld	e, (hl)
2475  0A36  41          	ld	b, c
2476  0A37  04          	inc	b
2477  0A38  0D          	dec	c
2478  0A39  CB 5B       	bit	3, e
2479  0A3B  28 12       	jr	Z,l_player_hit_platform_00110
2480  0A3D  3A 00 00    	ld	a,(_g_player_hit_right)
2481  0A40  B7          	or	a, a
2482  0A41  28 06       	jr	Z,l_player_hit_platform_00104
2483  0A43  21 00 00    	ld	hl,_player_hit_col
2484  0A46  70          	ld	(hl), b
2485  0A47  18 16       	jr	l_player_hit_platform_00114
2486  0A49              l_player_hit_platform_00104:
2487  0A49  21 00 00    	ld	hl,_player_hit_col
2488  0A4C  71          	ld	(hl), c
2489  0A4D  18 10       	jr	l_player_hit_platform_00114
2490  0A4F              l_player_hit_platform_00110:
2491  0A4F  3A 00 00    	ld	a,(_g_player_hit_left)
2492  0A52  B7          	or	a, a
2493  0A53  28 06       	jr	Z,l_player_hit_platform_00107
2494  0A55  21 00 00    	ld	hl,_player_hit_col
2495  0A58  71          	ld	(hl), c
2496  0A59  18 04       	jr	l_player_hit_platform_00114
2497  0A5B              l_player_hit_platform_00107:
2498  0A5B  21 00 00    	ld	hl,_player_hit_col
2499  0A5E  70          	ld	(hl), b
2500  0A5F              l_player_hit_platform_00114:
2501  0A5F  01 00 00    	ld	bc,_scr_map
2502  0A62  2A 00 00    	ld	hl,(_index1)
2503  0A65  09          	add	hl,bc
2504  0A66  7E          	ld	a,(hl)
2505  0A67  FE 58       	cp	a,0x58
2506  0A69  28 05       	jr	Z,l_player_hit_platform_00141
2507  0A6B  D6 5D       	sub	a,0x5d
2508  0A6D  C2 E1 0B    	jp	NZ,l_player_hit_platform_00142
2509  0A70              l_player_hit_platform_00141:
2510  0A70  3A 00 00    	ld	a,(_game_boss)
2511  0A73  B7          	or	a, a
2512  0A74  28 0B       	jr	Z,l_player_hit_platform_00177
2513  0A76  3A 00 00    	ld	a,(_game_mush_count)
2514  0A79  B7          	or	a, a
2515  0A7A  28 05       	jr	Z,l_player_hit_platform_00177
2516  0A7C  2E 00       	ld	l,0x00
2517  0A7E  C3 14 0C    	jp	l_player_hit_platform_00151
2518  0A81              l_player_hit_platform_00177:
2519  0A81  DD 36 FF 00 	ld	(ix-1),0x00
2520  0A85              l_player_hit_platform_00138:
2521  0A85  DD 7E FF    	ld	a,(ix-1)
2522  0A88  D6 07       	sub	a,0x07
2523  0A8A  D2 E4 0B    	jp	NC, l_player_hit_platform_00143
2524  0A8D  3E 00       	ld	a, +((_mush_index) & 0xFF)
2525  0A8F  DD 86 FF    	add	a,(ix-1)
2526  0A92  6F          	ld	l, a
2527  0A93  3E 00       	ld	a, +((_mush_index) / 256)
2528  0A95  CE 00       	adc	a,0x00
2529  0A97  67          	ld	h, a
2530  0A98  4E          	ld	c, (hl)
2531  0A99  06 00       	ld	b,0x00
2532  0A9B  2A 00 00    	ld	hl,(_index1)
2533  0A9E  AF          	xor	a,a
2534  0A9F  ED 42       	sbc	hl,bc
2535  0AA1  C2 DB 0B    	jp	NZ,l_player_hit_platform_00137
2536  0AA4  3A 07 00    	ld	a,(_lin + 0x0007)
2537  0AA7  07          	rlca
2538  0AA8  07          	rlca
2539  0AA9  07          	rlca
2540  0AAA  07          	rlca
2541  0AAB  E6 0F       	and	a,0x0f
2542  0AAD  07          	rlca
2543  0AAE  07          	rlca
2544  0AAF  07          	rlca
2545  0AB0  07          	rlca
2546  0AB1  E6 F0       	and	a,0xf0
2547  0AB3  C6 E0       	add	a,0xe0
2548  0AB5  32 00 00    	ld	(_s_lin1),a
2549  0AB8  3A 00 00    	ld	a,(_player_hit_col)
2550  0ABB  CB 3F       	srl	a
2551  0ABD  87          	add	a, a
2552  0ABE  32 00 00    	ld	(_s_col1),a
2553  0AC1  0E 00       	ld	c,0x00
2554  0AC3              l_player_hit_platform_00120:
2555  0AC3  79          	ld	a, c
2556  0AC4  D6 07       	sub	a,0x07
2557  0AC6  30 18       	jr	NC,l_player_hit_platform_00122
2558  0AC8  06 00       	ld	b,0x00
2559  0ACA  21 00 00    	ld	hl,_mush_index
2560  0ACD  09          	add	hl, bc
2561  0ACE  46          	ld	b, (hl)
2562  0ACF  1E 00       	ld	e,0x00
2563  0AD1  21 00 00    	ld	hl,_index1
2564  0AD4  7E          	ld	a, (hl)
2565  0AD5  90          	sub	a, b
2566  0AD6  20 05       	jr	NZ,l_player_hit_platform_00271
2567  0AD8  23          	inc	hl
2568  0AD9  7E          	ld	a, (hl)
2569  0ADA  93          	sub	a, e
2570  0ADB  28 03       	jr	Z,l_player_hit_platform_00122
2571  0ADD              l_player_hit_platform_00271:
2572  0ADD  0C          	inc	c
2573  0ADE  18 E3       	jr	l_player_hit_platform_00120
2574  0AE0              l_player_hit_platform_00122:
2575  0AE0  06 00       	ld	b,0x00
2576  0AE2  21 00 00    	ld	hl,_mush_class
2577  0AE5  09          	add	hl, bc
2578  0AE6  7E          	ld	a, (hl)
2579  0AE7  FE 79       	cp	a,0x79
2580  0AE9  28 16       	jr	Z,l_player_hit_platform_00123
2581  0AEB  FE 7A       	cp	a,0x7a
2582  0AED  28 25       	jr	Z,l_player_hit_platform_00124
2583  0AEF  FE 7B       	cp	a,0x7b
2584  0AF1  28 47       	jr	Z,l_player_hit_platform_00126
2585  0AF3  FE 7C       	cp	a,0x7c
2586  0AF5  28 30       	jr	Z,l_player_hit_platform_00125
2587  0AF7  FE 7D       	cp	a,0x7d
2588  0AF9  28 65       	jr	Z,l_player_hit_platform_00128
2589  0AFB  D6 7E       	sub	a,0x7e
2590  0AFD  28 4E       	jr	Z,l_player_hit_platform_00127
2591  0AFF  18 70       	jr	l_player_hit_platform_00129
2592  0B01              l_player_hit_platform_00123:
2593  0B01  3A 00 00    	ld	a,(_s_col1)
2594  0B04  21 06 FF    	ld	hl,0xff06
2595  0B07  E5          	push	hl
2596  0B08  2A 00 00    	ld	hl,(_s_lin1)
2597  0B0B  67          	ld	h,a
2598  0B0C  E5          	push	hl
2599  0B0D  CD 00 00    	call	_enemy_init
2600  0B10  F1          	pop	af
2601  0B11  F1          	pop	af
2602  0B12  18 5D       	jr	l_player_hit_platform_00129
2603  0B14              l_player_hit_platform_00124:
2604  0B14  3A 00 00    	ld	a,(_s_col1)
2605  0B17  21 06 01    	ld	hl,0x0106
2606  0B1A  E5          	push	hl
2607  0B1B  2A 00 00    	ld	hl,(_s_lin1)
2608  0B1E  67          	ld	h,a
2609  0B1F  E5          	push	hl
2610  0B20  CD 00 00    	call	_enemy_init
2611  0B23  F1          	pop	af
2612  0B24  F1          	pop	af
2613  0B25  18 4A       	jr	l_player_hit_platform_00129
2614  0B27              l_player_hit_platform_00125:
2615  0B27  3A 00 00    	ld	a,(_s_col1)
2616  0B2A  21 07 01    	ld	hl,0x0107
2617  0B2D  E5          	push	hl
2618  0B2E  2A 00 00    	ld	hl,(_s_lin1)
2619  0B31  67          	ld	h,a
2620  0B32  E5          	push	hl
2621  0B33  CD 00 00    	call	_enemy_init
2622  0B36  F1          	pop	af
2623  0B37  F1          	pop	af
2624  0B38  18 37       	jr	l_player_hit_platform_00129
2625  0B3A              l_player_hit_platform_00126:
2626  0B3A  3A 00 00    	ld	a,(_s_col1)
2627  0B3D  21 07 FF    	ld	hl,0xff07
2628  0B40  E5          	push	hl
2629  0B41  2A 00 00    	ld	hl,(_s_lin1)
2630  0B44  67          	ld	h,a
2631  0B45  E5          	push	hl
2632  0B46  CD 00 00    	call	_enemy_init
2633  0B49  F1          	pop	af
2634  0B4A  F1          	pop	af
2635  0B4B  18 24       	jr	l_player_hit_platform_00129
2636  0B4D              l_player_hit_platform_00127:
2637  0B4D  3A 00 00    	ld	a,(_s_col1)
2638  0B50  21 08 01    	ld	hl,0x0108
2639  0B53  E5          	push	hl
2640  0B54  2A 00 00    	ld	hl,(_s_lin1)
2641  0B57  67          	ld	h,a
2642  0B58  E5          	push	hl
2643  0B59  CD 00 00    	call	_enemy_init
2644  0B5C  F1          	pop	af
2645  0B5D  F1          	pop	af
2646  0B5E  18 11       	jr	l_player_hit_platform_00129
2647  0B60              l_player_hit_platform_00128:
2648  0B60  3A 00 00    	ld	a,(_s_col1)
2649  0B63  21 08 FF    	ld	hl,0xff08
2650  0B66  E5          	push	hl
2651  0B67  2A 00 00    	ld	hl,(_s_lin1)
2652  0B6A  67          	ld	h,a
2653  0B6B  E5          	push	hl
2654  0B6C  CD 00 00    	call	_enemy_init
2655  0B6F  F1          	pop	af
2656  0B70  F1          	pop	af
2657  0B71              l_player_hit_platform_00129:
2658  0B71  CD 00 00    	call	_audio_mushroom
2659  0B74  21 00 00    	ld	hl,_game_mush_count
2660  0B77  34          	inc	(hl)
2661  0B78  3A 00 00    	ld	a,(_game_boss)
2662  0B7B  B7          	or	a, a
2663  0B7C  20 5D       	jr	NZ,l_player_hit_platform_00137
2664  0B7E  3A 00 00    	ld	a,(_index1)
2665  0B81  C6 F0       	add	a,0xf0
2666  0B83  32 00 00    	ld	(_index0),a
2667  0B86  3A 01 00    	ld	a,(_index1 + 1)
2668  0B89  CE FF       	adc	a,0xff
2669  0B8B  21 01 00    	ld	hl,_index0 + 1
2670  0B8E  77          	ld	(hl), a
2671  0B8F  3E 00       	ld	a, +((_scr_map) & 0xFF)
2672  0B91  2B          	dec	hl
2673  0B92  86          	add	a, (hl)
2674  0B93  4F          	ld	c, a
2675  0B94  3E 00       	ld	a, +((_scr_map) / 256)
2676  0B96  23          	inc	hl
2677  0B97  8E          	adc	a, (hl)
2678  0B98  47          	ld	b, a
2679  0B99  C5          	push	bc
2680  0B9A  2B          	dec	hl
2681  0B9B  7E          	ld	a, (hl)
2682  0B9C  23          	inc	hl
2683  0B9D  66          	ld	h, (hl)
2684  0B9E  6F          	ld	l, a
2685  0B9F  CD 00 00    	call	_game_match_back
2686  0BA2  C1          	pop	bc
2687  0BA3  7D          	ld	a,l
2688  0BA4  02          	ld	(bc), a
2689  0BA5  01 00 00    	ld	bc,_scr_map
2690  0BA8  2A 00 00    	ld	hl,(_index1)
2691  0BAB  09          	add	hl,bc
2692  0BAC  7E          	ld	a,(hl)
2693  0BAD  FE 58       	cp	a,0x58
2694  0BAF  4D          	ld	c,l
2695  0BB0  44          	ld	b,h
2696  0BB1  28 04       	jr	Z,l_player_hit_platform_00130
2697  0BB3  D6 5D       	sub	a,0x5d
2698  0BB5  20 05       	jr	NZ,l_player_hit_platform_00131
2699  0BB7              l_player_hit_platform_00130:
2700  0BB7  3E 4F       	ld	a,0x4f
2701  0BB9  02          	ld	(bc), a
2702  0BBA  18 03       	jr	l_player_hit_platform_00132
2703  0BBC              l_player_hit_platform_00131:
2704  0BBC  3E 54       	ld	a,0x54
2705  0BBE  02          	ld	(bc), a
2706  0BBF              l_player_hit_platform_00132:
2707  0BBF  2A 00 00    	ld	hl,(_index1)
2708  0BC2  01 F0 FF    	ld	bc,0xfff0
2709  0BC5  09          	add	hl,bc
2710  0BC6  CD 00 00    	call	_game_obj_set
2711  0BC9  3A 00 00    	ld	a,(_s_lin1)
2712  0BCC  C6 10       	add	a,0x10
2713  0BCE  4F          	ld	c, a
2714  0BCF  3A 00 00    	ld	a, (_s_col1)
2715  0BD2  47          	ld	b,a
2716  0BD3  C5          	push	bc
2717  0BD4  3E 4F       	ld	a,0x4f
2718  0BD6  F5          	push	af
2719  0BD7  33          	inc	sp
2720  0BD8  CD 00 00    	call	_NIRVANAP_drawT_callee
2721  0BDB              l_player_hit_platform_00137:
2722  0BDB  DD 34 FF    	inc	(ix-1)
2723  0BDE  C3 85 0A    	jp	l_player_hit_platform_00138
2724  0BE1              l_player_hit_platform_00142:
2725  0BE1  CD 00 00    	call	_audio_golpe
2726  0BE4              l_player_hit_platform_00143:
2727  0BE4  2E 01       	ld	l,0x01
2728  0BE6  CD 00 00    	call	_spr_brick_anim
2729  0BE9  2A FF FF    	ld	hl,(_player_hit_col - 1)
2730  0BEC  3A 00 00    	ld	a,(_player_hit_lin)
2731  0BEF  6F          	ld	l,a
2732  0BF0  E5          	push	hl
2733  0BF1  CD 00 00    	call	_spr_calc_index
2734  0BF4  F1          	pop	af
2735  0BF5  22 00 00    	ld	(_index1),hl
2736  0BF8  3E 10       	ld	a,0x10
2737  0BFA  21 00 00    	ld	hl,_index1
2738  0BFD  BE          	cp	a, (hl)
2739  0BFE  3E 00       	ld	a,0x00
2740  0C00  23          	inc	hl
2741  0C01  9E          	sbc	a, (hl)
2742  0C02  30 0A       	jr	NC,l_player_hit_platform_00146
2743  0C04  2B          	dec	hl
2744  0C05  7E          	ld	a, (hl)
2745  0C06  C6 F0       	add	a,0xf0
2746  0C08  32 00 00    	ld	(_sprite_curr_index),a
2747  0C0B  CD E6 07    	call	_player_pick_item
2748  0C0E              l_player_hit_platform_00146:
2749  0C0E  2E 01       	ld	l,0x01
2750  0C10  18 02       	jr	l_player_hit_platform_00151
2751  0C12              l_player_hit_platform_00148:
2752  0C12  2E 00       	ld	l,0x00
2753  0C14              l_player_hit_platform_00151:
2754  0C14  33          	inc	sp
2755  0C15  DD E1       	pop	ix
2756  0C17  C9          	ret
2757  0C18              	SECTION code_compiler
2758  0C18              ;	---------------------------------
2759  0C18              ; Function player_hit_platform_clear
2760  0C18              ; ---------------------------------
2761  0C18              _player_hit_platform_clear:
2762  0C18  3E 04       	ld	a,0x04
2763  0C1A  F5          	push	af
2764  0C1B  33          	inc	sp
2765  0C1C  21 0E 00    	ld	hl, +(_spr_timer + 0x000e)
2766  0C1F  E5          	push	hl
2767  0C20  CD 00 00    	call	_game_check_time
2768  0C23  F1          	pop	af
2769  0C24  33          	inc	sp
2770  0C25  7D          	ld	a, l
2771  0C26  B7          	or	a, a
2772  0C27  C8          	ret	Z
2773  0C28  2A FF FF    	ld	hl,(_player_hit_col - 1)
2774  0C2B  3A 00 00    	ld	a,(_player_hit_lin)
2775  0C2E  6F          	ld	l,a
2776  0C2F  E5          	push	hl
2777  0C30  CD 00 00    	call	_spr_calc_index
2778  0C33  F1          	pop	af
2779  0C34  22 00 00    	ld	(_index1),hl
2780  0C37  2E 00       	ld	l,0x00
2781  0C39  CD 00 00    	call	_spr_brick_anim
2782  0C3C  21 00 00    	ld	hl,_player_hit_lin
2783  0C3F  36 00       	ld	(hl),0x00
2784  0C41  21 00 00    	ld	hl,_player_hit_col
2785  0C44  36 00       	ld	(hl),0x00
2786  0C46  C9          	ret
2787  0C47              	SECTION code_compiler
2788  0C47              ;	---------------------------------
2789  0C47              ; Function player_score_add
2790  0C47              ; ---------------------------------
2791  0C47              _player_score_add:
2792  0C47  ED 4B 00 00 	ld	bc,(_player_score)
2793  0C4B  09          	add	hl,bc
2794  0C4C  22 00 00    	ld	(_player_score),hl
2795  0C4F  21 00 00    	ld	hl,_player_lvl
2796  0C52  7E          	ld	a, (hl)
2797  0C53  D6 0A       	sub	a,0x0a
2798  0C55  30 45       	jr	NC,l_player_score_add_00104
2799  0C57  01 00 00    	ld	bc,_player_lvl_table+0
2800  0C5A  6E          	ld	l,(hl)
2801  0C5B  26 00       	ld	h,0x00
2802  0C5D  29          	add	hl, hl
2803  0C5E  09          	add	hl, bc
2804  0C5F  4E          	ld	c, (hl)
2805  0C60  23          	inc	hl
2806  0C61  46          	ld	b, (hl)
2807  0C62  21 00 00    	ld	hl,_player_score
2808  0C65  7E          	ld	a, (hl)
2809  0C66  91          	sub	a, c
2810  0C67  23          	inc	hl
2811  0C68  7E          	ld	a, (hl)
2812  0C69  98          	sbc	a, b
2813  0C6A  38 30       	jr	C,l_player_score_add_00104
2814  0C6C  21 00 00    	ld	hl,_player_lvl
2815  0C6F  34          	inc	(hl)
2816  0C70  CD 00 00    	call	_game_update_stats
2817  0C73  CD 00 00    	call	_spr_flatten
2818  0C76  CD 00 00    	call	_audio_levelup
2819  0C79  21 16 00    	ld	hl,___str_2
2820  0C7C  E5          	push	hl
2821  0C7D  21 0C 0C    	ld	hl,0x0c0c
2822  0C80  E5          	push	hl
2823  0C81  CD 00 00    	call	_zx_print_str
2824  0C84  AF          	xor	a, a
2825  0C85  F5          	push	af
2826  0C86  33          	inc	sp
2827  0C87  21 3C 00    	ld	hl,0x003c
2828  0C8A  E5          	push	hl
2829  0C8B  21 0C 15    	ld	hl,0x150c
2830  0C8E  E5          	push	hl
2831  0C8F  3E 0C       	ld	a,0x0c
2832  0C91  F5          	push	af
2833  0C92  33          	inc	sp
2834  0C93  CD 00 00    	call	_game_colour_message
2835  0C96  F1          	pop	af
2836  0C97  F1          	pop	af
2837  0C98  F1          	pop	af
2838  0C99  CD 00 00    	call	_spr_unflattenP1
2839  0C9C              l_player_score_add_00104:
2840  0C9C  3A 00 00    	ld	a,(_game_score_top)
2841  0C9F  21 00 00    	ld	hl,_player_score
2842  0CA2  96          	sub	a, (hl)
2843  0CA3  3A 01 00    	ld	a,(_game_score_top + 1)
2844  0CA6  23          	inc	hl
2845  0CA7  9E          	sbc	a, (hl)
2846  0CA8  30 06       	jr	NC,l_player_score_add_00106
2847  0CAA  2A 00 00    	ld	hl,(_player_score)
2848  0CAD  22 00 00    	ld	(_game_score_top),hl
2849  0CB0              l_player_score_add_00106:
2850  0CB0  CD 00 00    	call	_game_print_score
2851  0CB3  C9          	ret
2852  0CB4              	SECTION rodata_compiler
2853  0016              ___str_2:
2854  0016  4C 45 56 45 4C 20 55 50 21 
                        	DEFM "LEVEL UP!"
2855  001F  00          	DEFB 0x00
2856  0020              	SECTION code_compiler
2857  0CB4              ;	---------------------------------
2858  0CB4              ; Function player_check_floor
2859  0CB4              ; ---------------------------------
2860  0CB4              _player_check_floor:
2861  0CB4  CD 00 00    	call	___sdcc_enter_ix
2862  0CB7  F5          	push	af
2863  0CB8  F5          	push	af
2864  0CB9  F5          	push	af
2865  0CBA  21 07 00    	ld	hl,+(_col + 0x0007)
2866  0CBD  56          	ld	d, (hl)
2867  0CBE  3A 07 00    	ld	a,(_lin + 0x0007)
2868  0CC1  C6 10       	add	a,0x10
2869  0CC3  5F          	ld	e, a
2870  0CC4  D5          	push	de
2871  0CC5  CD 00 00    	call	_spr_calc_index
2872  0CC8  F1          	pop	af
2873  0CC9  DD 75 FC    	ld	(ix-4),l
2874  0CCC  DD 74 FD    	ld	(ix-3),h
2875  0CCF  11 00 00    	ld	de,_scr_map+0
2876  0CD2  7B          	ld	a, e
2877  0CD3  DD 86 FC    	add	a,(ix-4)
2878  0CD6  4F          	ld	c, a
2879  0CD7  7A          	ld	a, d
2880  0CD8  DD 8E FD    	adc	a,(ix-3)
2881  0CDB  47          	ld	b, a
2882  0CDC  0A          	ld	a, (bc)
2883  0CDD  DD 77 FB    	ld	(ix-5),a
2884  0CE0  DD 6E FC    	ld	l,(ix-4)
2885  0CE3  DD 66 FD    	ld	h,(ix-3)
2886  0CE6  23          	inc	hl
2887  0CE7  19          	add	hl,de
2888  0CE8  DD 75 FE    	ld	(ix-2),l
2889  0CEB  DD 74 FF    	ld	(ix-1),h
2890  0CEE  3A 00 00    	ld	a,(_s_lin0)
2891  0CF1  D6 90       	sub	a,0x90
2892  0CF3  20 24       	jr	NZ,l_player_check_floor_00108
2893  0CF5  3A 00 00    	ld	a,(_map_heigth)
2894  0CF8  2A 00 00    	ld	hl,(_scr_curr)
2895  0CFB  C5          	push	bc
2896  0CFC  67          	ld	h,a
2897  0CFD  E5          	push	hl
2898  0CFE  CD 00 00    	call	__divuchar_callee
2899  0D01  C1          	pop	bc
2900  0D02  7D          	ld	a,l
2901  0D03  3C          	inc	a
2902  0D04  32 00 00    	ld	(_tmp1),a
2903  0D07  21 00 00    	ld	hl,_map_heigth
2904  0D0A  96          	sub	a, (hl)
2905  0D0B  30 06       	jr	NC,l_player_check_floor_00102
2906  0D0D  DD 36 FB 00 	ld	(ix-5),0x00
2907  0D11  18 1C       	jr	l_player_check_floor_00109
2908  0D13              l_player_check_floor_00102:
2909  0D13  DD 36 FB 48 	ld	(ix-5),0x48
2910  0D17  18 16       	jr	l_player_check_floor_00109
2911  0D19              l_player_check_floor_00108:
2912  0D19  3A 07 00    	ld	a,(_col + 0x0007)
2913  0D1C  0F          	rrca
2914  0D1D  38 06       	jr	C,l_player_check_floor_00105
2915  0D1F  DD 36 FA 00 	ld	(ix-6),0x00
2916  0D23  18 0A       	jr	l_player_check_floor_00109
2917  0D25              l_player_check_floor_00105:
2918  0D25  DD 6E FE    	ld	l,(ix-2)
2919  0D28  DD 66 FF    	ld	h,(ix-1)
2920  0D2B  7E          	ld	a, (hl)
2921  0D2C  DD 77 FA    	ld	(ix-6),a
2922  0D2F              l_player_check_floor_00109:
2923  0D2F  DD 7E FB    	ld	a,(ix-5)
2924  0D32  D6 3A       	sub	a,0x3a
2925  0D34  38 07       	jr	C,l_player_check_floor_00132
2926  0D36  DD 7E FB    	ld	a,(ix-5)
2927  0D39  D6 60       	sub	a,0x60
2928  0D3B  38 2D       	jr	C,l_player_check_floor_00128
2929  0D3D              l_player_check_floor_00132:
2930  0D3D  DD 7E FA    	ld	a,(ix-6)
2931  0D40  D6 3A       	sub	a,0x3a
2932  0D42  38 07       	jr	C,l_player_check_floor_00127
2933  0D44  DD 7E FA    	ld	a,(ix-6)
2934  0D47  D6 60       	sub	a,0x60
2935  0D49  38 1F       	jr	C,l_player_check_floor_00128
2936  0D4B              l_player_check_floor_00127:
2937  0D4B  21 00 00    	ld	hl,_s_state
2938  0D4E  CB CE       	set	1, (hl)
2939  0D50  2E 00       	ld	l,0x00
2940  0D52  CD C3 06    	call	_player_check_stairs
2941  0D55  3A 00 00    	ld	a,(_player_onstair)
2942  0D58  B7          	or	a, a
2943  0D59  C2 F6 0D    	jp	NZ, l_player_check_floor_00133
2944  0D5C  3A 00 00    	ld	a,(_s_lin0)
2945  0D5F  D6 90       	sub	a,0x90
2946  0D61  C2 F6 0D    	jp	NZ,l_player_check_floor_00133
2947  0D64  CD 00 00    	call	_spr_page_down
2948  0D67  C3 F6 0D    	jp	l_player_check_floor_00133
2949  0D6A              l_player_check_floor_00128:
2950  0D6A  C5          	push	bc
2951  0D6B  3E 10       	ld	a,0x10
2952  0D6D  F5          	push	af
2953  0D6E  33          	inc	sp
2954  0D6F  21 00 00    	ld	hl,_player_brick_time
2955  0D72  E5          	push	hl
2956  0D73  CD 00 00    	call	_game_check_time
2957  0D76  F1          	pop	af
2958  0D77  33          	inc	sp
2959  0D78  C1          	pop	bc
2960  0D79  7D          	ld	a,l
2961  0D7A  B7          	or	a, a
2962  0D7B  CA F6 0D    	jp	Z, l_player_check_floor_00133
2963  0D7E  2A 00 00    	ld	hl,(_curr_time)
2964  0D81  22 00 00    	ld	(_player_brick_time),hl
2965  0D84  DD 7E FB    	ld	a,(ix-5)
2966  0D87  D6 40       	sub	a,0x40
2967  0D89  20 12       	jr	NZ,l_player_check_floor_00114
2968  0D8B  C5          	push	bc
2969  0D8C  DD 6E FC    	ld	l,(ix-4)
2970  0D8F  DD 66 FD    	ld	h,(ix-3)
2971  0D92  CD 00 00    	call	_game_match_back
2972  0D95  C1          	pop	bc
2973  0D96  7D          	ld	a,l
2974  0D97  02          	ld	(bc), a
2975  0D98  C5          	push	bc
2976  0D99  CD FB 0D    	call	_player_gasta_brick
2977  0D9C  C1          	pop	bc
2978  0D9D              l_player_check_floor_00114:
2979  0D9D  DD 7E FB    	ld	a,(ix-5)
2980  0DA0  D6 3F       	sub	a,0x3f
2981  0DA2  20 08       	jr	NZ,l_player_check_floor_00116
2982  0DA4  3E 40       	ld	a,0x40
2983  0DA6  02          	ld	(bc), a
2984  0DA7  C5          	push	bc
2985  0DA8  CD FB 0D    	call	_player_gasta_brick
2986  0DAB  C1          	pop	bc
2987  0DAC              l_player_check_floor_00116:
2988  0DAC  DD 7E FB    	ld	a,(ix-5)
2989  0DAF  D6 3E       	sub	a,0x3e
2990  0DB1  20 06       	jr	NZ,l_player_check_floor_00118
2991  0DB3  3E 3F       	ld	a,0x3f
2992  0DB5  02          	ld	(bc), a
2993  0DB6  CD FB 0D    	call	_player_gasta_brick
2994  0DB9              l_player_check_floor_00118:
2995  0DB9  DD 7E FA    	ld	a,(ix-6)
2996  0DBC  D6 40       	sub	a,0x40
2997  0DBE  20 12       	jr	NZ,l_player_check_floor_00120
2998  0DC0  C1          	pop	bc
2999  0DC1  E1          	pop	hl
3000  0DC2  E5          	push	hl
3001  0DC3  C5          	push	bc
3002  0DC4  CD 00 00    	call	_game_match_back
3003  0DC7  4D          	ld	c, l
3004  0DC8  DD 6E FE    	ld	l,(ix-2)
3005  0DCB  DD 66 FF    	ld	h,(ix-1)
3006  0DCE  71          	ld	(hl), c
3007  0DCF  CD FB 0D    	call	_player_gasta_brick
3008  0DD2              l_player_check_floor_00120:
3009  0DD2  DD 7E FA    	ld	a,(ix-6)
3010  0DD5  D6 3F       	sub	a,0x3f
3011  0DD7  20 0B       	jr	NZ,l_player_check_floor_00122
3012  0DD9  DD 6E FE    	ld	l,(ix-2)
3013  0DDC  DD 66 FF    	ld	h,(ix-1)
3014  0DDF  36 40       	ld	(hl),0x40
3015  0DE1  CD FB 0D    	call	_player_gasta_brick
3016  0DE4              l_player_check_floor_00122:
3017  0DE4  DD 7E FA    	ld	a,(ix-6)
3018  0DE7  D6 3E       	sub	a,0x3e
3019  0DE9  20 0B       	jr	NZ,l_player_check_floor_00133
3020  0DEB  DD 6E FE    	ld	l,(ix-2)
3021  0DEE  DD 66 FF    	ld	h,(ix-1)
3022  0DF1  36 3F       	ld	(hl),0x3f
3023  0DF3  CD FB 0D    	call	_player_gasta_brick
3024  0DF6              l_player_check_floor_00133:
3025  0DF6  DD F9       	ld	sp, ix
3026  0DF8  DD E1       	pop	ix
3027  0DFA  C9          	ret
3028  0DFB              	SECTION code_compiler
3029  0DFB              ;	---------------------------------
3030  0DFB              ; Function player_gasta_brick
3031  0DFB              ; ---------------------------------
3032  0DFB              _player_gasta_brick:
3033  0DFB  3A 00 00    	ld	a,(_s_lin0)
3034  0DFE  32 00 00    	ld	(_s_lin1),a
3035  0E01  3A 00 00    	ld	a,(_s_col0)
3036  0E04  32 00 00    	ld	(_s_col1),a
3037  0E07  3A 07 00    	ld	a,(_lin + 0x0007)
3038  0E0A  C6 10       	add	a,0x10
3039  0E0C  32 00 00    	ld	(_s_lin0),a
3040  0E0F  3A 07 00    	ld	a,(_col + 0x0007)
3041  0E12  32 00 00    	ld	(_s_col0),a
3042  0E15  CD 00 00    	call	_spr_back_repaint
3043  0E18  3A 00 00    	ld	a,(_s_lin1)
3044  0E1B  32 00 00    	ld	(_s_lin0),a
3045  0E1E  3A 00 00    	ld	a,(_s_col1)
3046  0E21  32 00 00    	ld	(_s_col0),a
3047  0E24  C9          	ret
3048  0E25              	SECTION code_compiler
3049  0E25              ;	---------------------------------
3050  0E25              ; Function player_move_jump
3051  0E25              ; ---------------------------------
3052  0E25              _player_move_jump:
3053  0E25  21 00 00    	ld	hl,_game_gravity
3054  0E28  4E          	ld	c, (hl)
3055  0E29  21 00 00    	ld	hl,_player_vel_y
3056  0E2C  7E          	ld	a, (hl)
3057  0E2D  81          	add	a, c
3058  0E2E  77          	ld	(hl), a
3059  0E2F  3A 00 00    	ld	a,(_player_vel_inc)
3060  0E32  B7          	or	a, a
3061  0E33  28 27       	jr	Z,l_player_move_jump_00106
3062  0E35  3A 00 00    	ld	a,(_player_vel_y1)
3063  0E38  21 00 00    	ld	hl,_player_vel_y
3064  0E3B  96          	sub	a, (hl)
3065  0E3C  E2 41 0E    	jp	PO, l_player_move_jump_00243
3066  0E3F  EE 80       	xor	a,0x80
3067  0E41              l_player_move_jump_00243:
3068  0E41  F2 5C 0E    	jp	P, l_player_move_jump_00106
3069  0E44  3A 00 00    	ld	a,(_player_vel_y)
3070  0E47  CB 7F       	bit	7, a
3071  0E49  28 11       	jr	Z,l_player_move_jump_00106
3072  0E4B  CD F2 01    	call	_player_action_jump
3073  0E4E  7D          	ld	a, l
3074  0E4F  B7          	or	a, a
3075  0E50  20 0A       	jr	NZ,l_player_move_jump_00106
3076  0E52  21 00 00    	ld	hl,_player_vel_y
3077  0E55  36 00       	ld	(hl),0x00
3078  0E57  21 00 00    	ld	hl,_player_vel_inc
3079  0E5A  36 00       	ld	(hl),0x00
3080  0E5C              l_player_move_jump_00106:
3081  0E5C  3E 78       	ld	a,0x78
3082  0E5E  21 00 00    	ld	hl,_player_vel_y
3083  0E61  96          	sub	a, (hl)
3084  0E62  E2 67 0E    	jp	PO, l_player_move_jump_00244
3085  0E65  EE 80       	xor	a,0x80
3086  0E67              l_player_move_jump_00244:
3087  0E67  F2 6F 0E    	jp	P, l_player_move_jump_00108
3088  0E6A  21 00 00    	ld	hl,_player_vel_y
3089  0E6D  36 78       	ld	(hl),0x78
3090  0E6F              l_player_move_jump_00108:
3091  0E6F  21 00 00    	ld	hl,_player_vel_y
3092  0E72  7E          	ld	a, (hl)
3093  0E73  EE 80       	xor	a,0x80
3094  0E75  D6 08       	sub	a,0x08
3095  0E77  30 02       	jr	NC,l_player_move_jump_00110
3096  0E79  36 88       	ld	(hl),0x88
3097  0E7B              l_player_move_jump_00110:
3098  0E7B  3A 00 00    	ld	a,(_player_vel_y)
3099  0E7E  4F          	ld	c,a
3100  0E7F  17          	rla
3101  0E80  9F          	sbc	a, a
3102  0E81  47          	ld	b, a
3103  0E82  CB 41       	bit	0,c
3104  0E84  21 00 00    	ld	hl,_s_lin1
3105  0E87  71          	ld	(hl),c
3106  0E88  28 04       	jr	Z,l_player_move_jump_00112
3107  0E8A  21 00 00    	ld	hl,_s_lin1
3108  0E8D  35          	dec	(hl)
3109  0E8E              l_player_move_jump_00112:
3110  0E8E  3A 07 00    	ld	a,(_lin + 0x0007)
3111  0E91  21 00 00    	ld	hl,_s_lin1
3112  0E94  86          	add	a, (hl)
3113  0E95  77          	ld	(hl), a
3114  0E96  CB 78       	bit	7, b
3115  0E98  28 5A       	jr	Z,l_player_move_jump_00138
3116  0E9A  21 00 00    	ld	hl,_s_state
3117  0E9D  CD 00 00    	call	_spr_set_up
3118  0EA0  3E 90       	ld	a,0x90
3119  0EA2  21 00 00    	ld	hl,_s_lin1
3120  0EA5  96          	sub	a, (hl)
3121  0EA6  30 11       	jr	NC,l_player_move_jump_00117
3122  0EA8  CD 00 00    	call	_spr_page_up
3123  0EAB  7D          	ld	a, l
3124  0EAC  B7          	or	a, a
3125  0EAD  28 05       	jr	Z,l_player_move_jump_00114
3126  0EAF  2E 00       	ld	l,0x00
3127  0EB1  C3 B2 0F    	jp	l_player_move_jump_00149
3128  0EB4              l_player_move_jump_00114:
3129  0EB4  21 00 00    	ld	hl,_s_lin1
3130  0EB7  36 00       	ld	(hl),0x00
3131  0EB9              l_player_move_jump_00117:
3132  0EB9  21 07 00    	ld	hl,+(_col + 0x0007)
3133  0EBC  46          	ld	b, (hl)
3134  0EBD  3A 00 00    	ld	a,(_s_lin1)
3135  0EC0  4F          	ld	c,a
3136  0EC1  C5          	push	bc
3137  0EC2  CD 00 00    	call	_game_check_map
3138  0EC5  F1          	pop	af
3139  0EC6  7C          	ld	a,h
3140  0EC7  B5          	or	a,l
3141  0EC8  28 21       	jr	Z,l_player_move_jump_00121
3142  0ECA  CD 96 09    	call	_player_hit_platform
3143  0ECD  7D          	ld	a, l
3144  0ECE  B7          	or	a, a
3145  0ECF  28 12       	jr	Z,l_player_move_jump_00119
3146  0ED1  3A 07 00    	ld	a,(_lin + 0x0007)
3147  0ED4  07          	rlca
3148  0ED5  07          	rlca
3149  0ED6  07          	rlca
3150  0ED7  07          	rlca
3151  0ED8  E6 0F       	and	a,0x0f
3152  0EDA  07          	rlca
3153  0EDB  07          	rlca
3154  0EDC  07          	rlca
3155  0EDD  07          	rlca
3156  0EDE  E6 F0       	and	a,0xf0
3157  0EE0  32 07 00    	ld	((_lin + 0x0007)),a
3158  0EE3              l_player_move_jump_00119:
3159  0EE3  21 00 00    	ld	hl,_player_vel_y
3160  0EE6  36 00       	ld	(hl),0x00
3161  0EE8  C3 73 0F    	jp	l_player_move_jump_00139
3162  0EEB              l_player_move_jump_00121:
3163  0EEB  3A 00 00    	ld	a,(_s_lin1)
3164  0EEE  32 07 00    	ld	((_lin + 0x0007)),a
3165  0EF1  C3 73 0F    	jp	l_player_move_jump_00139
3166  0EF4              l_player_move_jump_00138:
3167  0EF4  21 00 00    	ld	hl,_s_state
3168  0EF7  CD 00 00    	call	_spr_set_down
3169  0EFA  3E 90       	ld	a,0x90
3170  0EFC  21 00 00    	ld	hl,_s_lin1
3171  0EFF  96          	sub	a, (hl)
3172  0F00  30 11       	jr	NC,l_player_move_jump_00127
3173  0F02  CD 00 00    	call	_spr_page_down
3174  0F05  7D          	ld	a, l
3175  0F06  B7          	or	a, a
3176  0F07  28 05       	jr	Z,l_player_move_jump_00124
3177  0F09  2E 00       	ld	l,0x00
3178  0F0B  C3 B2 0F    	jp	l_player_move_jump_00149
3179  0F0E              l_player_move_jump_00124:
3180  0F0E  21 00 00    	ld	hl,_s_lin1
3181  0F11  36 90       	ld	(hl),0x90
3182  0F13              l_player_move_jump_00127:
3183  0F13  21 07 00    	ld	hl,+(_col + 0x0007)
3184  0F16  56          	ld	d, (hl)
3185  0F17  3A 00 00    	ld	a,(_s_lin1)
3186  0F1A  C6 10       	add	a,0x10
3187  0F1C  5F          	ld	e, a
3188  0F1D  D5          	push	de
3189  0F1E  CD 00 00    	call	_game_check_map
3190  0F21  F1          	pop	af
3191  0F22  7C          	ld	a,h
3192  0F23  B5          	or	a,l
3193  0F24  28 47       	jr	Z,l_player_move_jump_00135
3194  0F26  2E 00       	ld	l,0x00
3195  0F28  CD C3 06    	call	_player_check_stairs
3196  0F2B  3A 00 00    	ld	a,(_player_onstair)
3197  0F2E  B7          	or	a, a
3198  0F2F  20 05       	jr	NZ,l_player_move_jump_00129
3199  0F31  2E 01       	ld	l,0x01
3200  0F33  CD C3 06    	call	_player_check_stairs
3201  0F36              l_player_move_jump_00129:
3202  0F36  3A 00 00    	ld	a,(_player_onstair)
3203  0F39  B7          	or	a, a
3204  0F3A  20 12       	jr	NZ,l_player_move_jump_00131
3205  0F3C  3A 00 00    	ld	a,(_s_lin1)
3206  0F3F  07          	rlca
3207  0F40  07          	rlca
3208  0F41  07          	rlca
3209  0F42  07          	rlca
3210  0F43  E6 0F       	and	a,0x0f
3211  0F45  07          	rlca
3212  0F46  07          	rlca
3213  0F47  07          	rlca
3214  0F48  07          	rlca
3215  0F49  E6 F0       	and	a,0xf0
3216  0F4B  32 07 00    	ld	((_lin + 0x0007)),a
3217  0F4E              l_player_move_jump_00131:
3218  0F4E  21 00 00    	ld	hl,_player_vel_y
3219  0F51  36 00       	ld	(hl),0x00
3220  0F53  21 00 00    	ld	hl,_s_state
3221  0F56  7E          	ld	a,(hl)
3222  0F57  E6 FC       	and	a,+(0xfd&0xfe)
3223  0F59  77          	ld	(hl),a
3224  0F5A  3A 07 00    	ld	a,(_lin + 0x0007)
3225  0F5D  D6 90       	sub	a,0x90
3226  0F5F  38 03       	jr	C,l_player_move_jump_00133
3227  0F61  CD 00 00    	call	_spr_page_down
3228  0F64              l_player_move_jump_00133:
3229  0F64  21 07 00    	ld	hl, +(_colint + 0x0007)
3230  0F67  36 00       	ld	(hl),0x00
3231  0F69  2E 01       	ld	l,0x01
3232  0F6B  18 45       	jr	l_player_move_jump_00149
3233  0F6D              l_player_move_jump_00135:
3234  0F6D  3A 00 00    	ld	a,(_s_lin1)
3235  0F70  32 07 00    	ld	((_lin + 0x0007)),a
3236  0F73              l_player_move_jump_00139:
3237  0F73  21 00 00    	ld	hl,_s_state
3238  0F76  CB 5E       	bit	3,(hl)
3239  0F78  20 1E       	jr	NZ,l_player_move_jump_00145
3240  0F7A  CB 56       	bit	2, (hl)
3241  0F7C  20 1A       	jr	NZ,l_player_move_jump_00145
3242  0F7E  21 00 00    	ld	hl,_dirs
3243  0F81  CB 56       	bit	2, (hl)
3244  0F83  28 06       	jr	Z,l_player_move_jump_00141
3245  0F85  21 00 00    	ld	hl,_s_state
3246  0F88  CD 00 00    	call	_spr_set_left
3247  0F8B              l_player_move_jump_00141:
3248  0F8B  21 00 00    	ld	hl,_dirs
3249  0F8E  CB 5E       	bit	3, (hl)
3250  0F90  28 06       	jr	Z,l_player_move_jump_00145
3251  0F92  21 00 00    	ld	hl,_s_state
3252  0F95  CD 00 00    	call	_spr_set_right
3253  0F98              l_player_move_jump_00145:
3254  0F98  21 00 00    	ld	hl,_player_jump_check
3255  0F9B  36 01       	ld	(hl),0x01
3256  0F9D  CD 00 00    	call	_spr_move_horizontal
3257  0FA0  7D          	ld	a, l
3258  0FA1  B7          	or	a, a
3259  0FA2  28 07       	jr	Z,l_player_move_jump_00148
3260  0FA4  21 00 00    	ld	hl,_s_state
3261  0FA7  7E          	ld	a,(hl)
3262  0FA8  E6 F3       	and	a,+(0xf7&0xfb)
3263  0FAA  77          	ld	(hl),a
3264  0FAB              l_player_move_jump_00148:
3265  0FAB  21 00 00    	ld	hl,_player_jump_check
3266  0FAE  36 00       	ld	(hl),0x00
3267  0FB0  2E 00       	ld	l,0x00
3268  0FB2              l_player_move_jump_00149:
3269  0FB2  C9          	ret
3270  0FB3              	SECTION code_compiler
3271  0FB3              ;	---------------------------------
3272  0FB3              ; Function player_open_door
3273  0FB3              ; ---------------------------------
3274  0FB3              _player_open_door:
3275  0FB3  CD 00 00    	call	___sdcc_enter_ix
3276  0FB6  0E 00       	ld	c,0x00
3277  0FB8  DD 7E 06    	ld	a,(ix+6)
3278  0FBB  D6 48       	sub	a,0x48
3279  0FBD  28 17       	jr	Z,l_player_open_door_00101
3280  0FBF  DD 7E 06    	ld	a,(ix+6)
3281  0FC2  D6 49       	sub	a,0x49
3282  0FC4  28 1A       	jr	Z,l_player_open_door_00104
3283  0FC6  DD 7E 06    	ld	a,(ix+6)
3284  0FC9  D6 4A       	sub	a,0x4a
3285  0FCB  28 1D       	jr	Z,l_player_open_door_00107
3286  0FCD  DD 7E 06    	ld	a,(ix+6)
3287  0FD0  D6 4B       	sub	a,0x4b
3288  0FD2  28 20       	jr	Z,l_player_open_door_00110
3289  0FD4  18 26       	jr	l_player_open_door_00113
3290  0FD6              l_player_open_door_00101:
3291  0FD6  3A 00 00    	ld	a,(_player_keys)
3292  0FD9  B7          	or	a, a
3293  0FDA  28 20       	jr	Z,l_player_open_door_00113
3294  0FDC  0E 01       	ld	c,0x01
3295  0FDE  18 1C       	jr	l_player_open_door_00113
3296  0FE0              l_player_open_door_00104:
3297  0FE0  3A 01 00    	ld	a,(_player_keys + 0x0001)
3298  0FE3  B7          	or	a, a
3299  0FE4  28 16       	jr	Z,l_player_open_door_00113
3300  0FE6  0E 01       	ld	c,0x01
3301  0FE8  18 12       	jr	l_player_open_door_00113
3302  0FEA              l_player_open_door_00107:
3303  0FEA  3A 02 00    	ld	a,(_player_keys + 0x0002)
3304  0FED  B7          	or	a, a
3305  0FEE  28 0C       	jr	Z,l_player_open_door_00113
3306  0FF0  0E 01       	ld	c,0x01
3307  0FF2  18 08       	jr	l_player_open_door_00113
3308  0FF4              l_player_open_door_00110:
3309  0FF4  3A 03 00    	ld	a,(_player_keys + 0x0003)
3310  0FF7  B7          	or	a, a
3311  0FF8  28 02       	jr	Z,l_player_open_door_00113
3312  0FFA  0E 01       	ld	c,0x01
3313  0FFC              l_player_open_door_00113:
3314  0FFC  79          	ld	a, c
3315  0FFD  B7          	or	a, a
3316  0FFE  20 06       	jr	NZ,l_player_open_door_00114
3317  1000  3A 00 00    	ld	a,(_game_inmune)
3318  1003  B7          	or	a, a
3319  1004  28 23       	jr	Z,l_player_open_door_00115
3320  1006              l_player_open_door_00114:
3321  1006  CD 00 00    	call	_audio_puerta
3322  1009  3E 00       	ld	a, +((_scr_map) & 0xFF)
3323  100B  DD 86 04    	add	a,(ix+4)
3324  100E  4F          	ld	c, a
3325  100F  3E 00       	ld	a, +((_scr_map) / 256)
3326  1011  DD 8E 05    	adc	a,(ix+5)
3327  1014  47          	ld	b, a
3328  1015  AF          	xor	a, a
3329  1016  02          	ld	(bc), a
3330  1017  DD 6E 04    	ld	l,(ix+4)
3331  101A  DD 66 05    	ld	h,(ix+5)
3332  101D  CD 00 00    	call	_game_obj_set
3333  1020  21 04 00    	ld	hl,0x0004
3334  1023  39          	add	hl, sp
3335  1024  CD 00 00    	call	_spr_draw_index
3336  1027  18 03       	jr	l_player_open_door_00118
3337  1029              l_player_open_door_00115:
3338  1029  CD 00 00    	call	_audio_sin_mana
3339  102C              l_player_open_door_00118:
3340  102C  DD E1       	pop	ix
3341  102E  C9          	ret
3342  102F              	SECTION code_compiler
3343  102F              ;	---------------------------------
3344  102F              ; Function player_lost_life
3345  102F              ; ---------------------------------
3346  102F              _player_lost_life:
3347  102F  CD 00 00    	call	___sdcc_enter_ix
3348  1032  3B          	dec	sp
3349  1033  21 00 00    	ld	hl,_player_vita
3350  1036  36 00       	ld	(hl),0x00
3351  1038  CD 00 00    	call	_game_update_stats
3352  103B  3A 07 00    	ld	a,(_lin + 0x0007)
3353  103E  32 00 00    	ld	(_s_lin0),a
3354  1041  3A 07 00    	ld	a,(_col + 0x0007)
3355  1044  32 00 00    	ld	(_s_col0),a
3356  1047  CD 00 00    	call	_spr_init_effects
3357  104A  06 00       	ld	b,0x00
3358  104C              l_player_lost_life_00117:
3359  104C  C5          	push	bc
3360  104D  21 00 00    	ld	hl,0x0000
3361  1050  E5          	push	hl
3362  1051  AF          	xor	a, a
3363  1052  48          	ld	c,b
3364  1053  47          	ld	b,a
3365  1054  C5          	push	bc
3366  1055  CD 00 00    	call	_NIRVANAP_spriteT_callee
3367  1058  C1          	pop	bc
3368  1059  04          	inc	b
3369  105A  3E 07       	ld	a,0x07
3370  105C  90          	sub	a, b
3371  105D  30 ED       	jr	NC,l_player_lost_life_00117
3372  105F  CD 00 00    	call	_ay_reset
3373  1062  CD 00 00    	call	_audio_explosion
3374  1065  3A 00 00    	ld	a,(_s_lin0)
3375  1068  C6 F0       	add	a,0xf0
3376  106A  47          	ld	b, a
3377  106B  3A 00 00    	ld	a,(_s_col0)
3378  106E  21 00 00    	ld	hl,0x0000
3379  1071  E5          	push	hl
3380  1072  21 87 03    	ld	hl,0x0387
3381  1075  E5          	push	hl
3382  1076  48          	ld	c,b
3383  1077  47          	ld	b,a
3384  1078  C5          	push	bc
3385  1079  CD 00 00    	call	_spr_add_anim
3386  107C  F1          	pop	af
3387  107D  F1          	pop	af
3388  107E  F1          	pop	af
3389  107F  21 00 00    	ld	hl,_s_col0
3390  1082  46          	ld	b, (hl)
3391  1083  05          	dec	b
3392  1084  05          	dec	b
3393  1085  3A 00 00    	ld	a,(_s_lin0)
3394  1088  21 00 00    	ld	hl,0x0000
3395  108B  E5          	push	hl
3396  108C  21 87 03    	ld	hl,0x0387
3397  108F  E5          	push	hl
3398  1090  4F          	ld	c,a
3399  1091  C5          	push	bc
3400  1092  CD 00 00    	call	_spr_add_anim
3401  1095  F1          	pop	af
3402  1096  F1          	pop	af
3403  1097  21 00 00    	ld	hl,0x0000
3404  109A  E3          	ex	(sp),hl
3405  109B  3A 00 00    	ld	a,(_s_col0)
3406  109E  21 87 03    	ld	hl,0x0387
3407  10A1  E5          	push	hl
3408  10A2  2A 00 00    	ld	hl,(_s_lin0)
3409  10A5  67          	ld	h,a
3410  10A6  E5          	push	hl
3411  10A7  CD 00 00    	call	_spr_add_anim
3412  10AA  F1          	pop	af
3413  10AB  F1          	pop	af
3414  10AC  F1          	pop	af
3415  10AD  21 00 00    	ld	hl,_s_col0
3416  10B0  46          	ld	b, (hl)
3417  10B1  04          	inc	b
3418  10B2  04          	inc	b
3419  10B3  3A 00 00    	ld	a,(_s_lin0)
3420  10B6  21 00 00    	ld	hl,0x0000
3421  10B9  E5          	push	hl
3422  10BA  21 87 03    	ld	hl,0x0387
3423  10BD  E5          	push	hl
3424  10BE  4F          	ld	c,a
3425  10BF  C5          	push	bc
3426  10C0  CD 00 00    	call	_spr_add_anim
3427  10C3  F1          	pop	af
3428  10C4  F1          	pop	af
3429  10C5  F1          	pop	af
3430  10C6  3A 00 00    	ld	a,(_s_lin0)
3431  10C9  C6 10       	add	a,0x10
3432  10CB  47          	ld	b, a
3433  10CC  3A 00 00    	ld	a,(_s_col0)
3434  10CF  21 00 00    	ld	hl,0x0000
3435  10D2  E5          	push	hl
3436  10D3  21 87 03    	ld	hl,0x0387
3437  10D6  E5          	push	hl
3438  10D7  48          	ld	c,b
3439  10D8  47          	ld	b,a
3440  10D9  C5          	push	bc
3441  10DA  CD 00 00    	call	_spr_add_anim
3442  10DD  F1          	pop	af
3443  10DE  F1          	pop	af
3444  10DF  F1          	pop	af
3445  10E0  DD 36 FF 01 	ld	(ix-1),0x01
3446  10E4  2A 00 00    	ld	hl,(_curr_time)
3447  10E7  22 00 00    	ld	(_anim_time),hl
3448  10EA              l_player_lost_life_00107:
3449  10EA  DD 7E FF    	ld	a,(ix-1)
3450  10ED  B7          	or	a, a
3451  10EE  28 28       	jr	Z,l_player_lost_life_00109
3452  10F0  3E 0C       	ld	a,0x0c
3453  10F2  F5          	push	af
3454  10F3  33          	inc	sp
3455  10F4  21 00 00    	ld	hl,_anim_time
3456  10F7  E5          	push	hl
3457  10F8  CD 00 00    	call	_game_check_time
3458  10FB  F1          	pop	af
3459  10FC  33          	inc	sp
3460  10FD  7D          	ld	a, l
3461  10FE  B7          	or	a, a
3462  10FF  28 E9       	jr	Z,l_player_lost_life_00107
3463  1101  2A 00 00    	ld	hl,(_curr_time)
3464  1104  22 00 00    	ld	(_anim_time),hl
3465  1107  3A 00 00    	ld	a,(_anim_count)
3466  110A  B7          	or	a,a
3467  110B  28 05       	jr	Z,l_player_lost_life_00103
3468  110D  CD 00 00    	call	_spr_play_anim
3469  1110  18 D8       	jr	l_player_lost_life_00107
3470  1112              l_player_lost_life_00103:
3471  1112  DD 36 FF 00 	ld	(ix-1),0x00
3472  1116  18 D2       	jr	l_player_lost_life_00107
3473  1118              l_player_lost_life_00109:
3474  1118  CD 00 00    	call	_audio_lotr_lose_a_life
3475  111B  3A 00 00    	ld	a,(_game_boss)
3476  111E  B7          	or	a, a
3477  111F  28 0F       	jr	Z,l_player_lost_life_00111
3478  1121  3A 00 00    	ld	a,(_boss_lin)
3479  1124  32 00 00    	ld	(_s_lin1),a
3480  1127  3A 00 00    	ld	a,(_boss_col)
3481  112A  32 00 00    	ld	(_s_col1),a
3482  112D  CD 00 00    	call	_boss_draw
3483  1130              l_player_lost_life_00111:
3484  1130  3A 00 00    	ld	a,(_game_inf_lives)
3485  1133  B7          	or	a, a
3486  1134  20 04       	jr	NZ,l_player_lost_life_00113
3487  1136  21 00 00    	ld	hl,_player_lives
3488  1139  35          	dec	(hl)
3489  113A              l_player_lost_life_00113:
3490  113A  21 00 00    	ld	hl,_player_mana
3491  113D  36 64       	ld	(hl),0x64
3492  113F  21 00 00    	ld	hl,_player_vita
3493  1142  36 64       	ld	(hl),0x64
3494  1144  3A 00 00    	ld	a,(_player_lives)
3495  1147  B7          	or	a, a
3496  1148  28 1D       	jr	Z,l_player_lost_life_00115
3497  114A  21 F4 01    	ld	hl,0x01f4
3498  114D  CD 00 00    	call	_z80_delay_ms_fastcall
3499  1150  3A 00 00    	ld	a,(_game_checkpoint_col)
3500  1153  32 00 00    	ld	(_player_col_scr),a
3501  1156  3A 00 00    	ld	a,(_game_checkpoint_lin)
3502  1159  32 00 00    	ld	(_player_lin_scr),a
3503  115C  3A 00 00    	ld	a,(_game_checkpoint_scr)
3504  115F  32 00 00    	ld	(_scr_curr),a
3505  1162  CD 00 00    	call	_game_round_init
3506  1165  18 0A       	jr	l_player_lost_life_00119
3507  1167              l_player_lost_life_00115:
3508  1167  21 00 00    	ld	hl,_player_lives
3509  116A  36 00       	ld	(hl),0x00
3510  116C  21 00 00    	ld	hl,_game_over
3511  116F  36 01       	ld	(hl),0x01
3512  1171              l_player_lost_life_00119:
3513  1171  33          	inc	sp
3514  1172  DD E1       	pop	ix
3515  1174  C9          	ret
3516  1175              	SECTION code_compiler
3517  1175              ;	---------------------------------
3518  1175              ; Function player_damage
3519  1175              ; ---------------------------------
3520  1175              _player_damage:
3521  1175  7D          	ld	a,l
3522  1176  4D          	ld	c,l
3523  1177  21 00 00    	ld	hl,_player_vita
3524  117A  96          	sub	a, (hl)
3525  117B  30 1F       	jr	NC,l_player_damage_00104
3526  117D  3A 00 00    	ld	a,(_game_inmune)
3527  1180  B7          	or	a, a
3528  1181  20 06       	jr	NZ,l_player_damage_00102
3529  1183  21 00 00    	ld	hl,_player_vita
3530  1186  7E          	ld	a, (hl)
3531  1187  91          	sub	a, c
3532  1188  77          	ld	(hl), a
3533  1189              l_player_damage_00102:
3534  1189  2A 00 00    	ld	hl,(_curr_time)
3535  118C  22 00 00    	ld	(_player_hit_time),hl
3536  118F  21 00 00    	ld	hl,_player_hit
3537  1192  36 01       	ld	(hl),0x01
3538  1194  CD 00 00    	call	_audio_golpe
3539  1197  CD 00 00    	call	_game_update_stats
3540  119A  18 03       	jr	l_player_damage_00106
3541  119C              l_player_damage_00104:
3542  119C  CD 2F 10    	call	_player_lost_life
3543  119F              l_player_damage_00106:
3544  119F  C9          	ret
3545  11A0              	SECTION IGNORE
3546  0000              
