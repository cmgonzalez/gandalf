1     0000              MODULE game_player_c
2     0000              
3     0000              ;--------------------------------------------------------
4     0000              ; File Created by SDCC : free open source ANSI-C Compiler
5     0000              ; Version 3.6.5 #9958 (Mac OS X i386)
6     0000              ;--------------------------------------------------------
7     0000              ; Processed by Z88DK
8     0000              ;--------------------------------------------------------
9     0000              
10    0000              	EXTERN __divschar
11    0000              	EXTERN __divschar_callee
12    0000              	EXTERN __divsint
13    0000              	EXTERN __divsint_callee
14    0000              	EXTERN __divslong
15    0000              	EXTERN __divslong_callee
16    0000              	EXTERN __divslonglong
17    0000              	EXTERN __divslonglong_callee
18    0000              	EXTERN __divsuchar
19    0000              	EXTERN __divsuchar_callee
20    0000              	EXTERN __divuchar
21    0000              	EXTERN __divuchar_callee
22    0000              	EXTERN __divuint
23    0000              	EXTERN __divuint_callee
24    0000              	EXTERN __divulong
25    0000              	EXTERN __divulong_callee
26    0000              	EXTERN __divulonglong
27    0000              	EXTERN __divulonglong_callee
28    0000              	EXTERN __divuschar
29    0000              	EXTERN __divuschar_callee
30    0000              	EXTERN __modschar
31    0000              	EXTERN __modschar_callee
32    0000              	EXTERN __modsint
33    0000              	EXTERN __modsint_callee
34    0000              	EXTERN __modslong
35    0000              	EXTERN __modslong_callee
36    0000              	EXTERN __modslonglong
37    0000              	EXTERN __modslonglong_callee
38    0000              	EXTERN __modsuchar
39    0000              	EXTERN __modsuchar_callee
40    0000              	EXTERN __moduchar
41    0000              	EXTERN __moduchar_callee
42    0000              	EXTERN __moduint
43    0000              	EXTERN __moduint_callee
44    0000              	EXTERN __modulong
45    0000              	EXTERN __modulong_callee
46    0000              	EXTERN __modulonglong
47    0000              	EXTERN __modulonglong_callee
48    0000              	EXTERN __moduschar
49    0000              	EXTERN __moduschar_callee
50    0000              	EXTERN __mulint
51    0000              	EXTERN __mulint_callee
52    0000              	EXTERN __mullong
53    0000              	EXTERN __mullong_callee
54    0000              	EXTERN __mullonglong
55    0000              	EXTERN __mullonglong_callee
56    0000              	EXTERN __mulschar
57    0000              	EXTERN __mulschar_callee
58    0000              	EXTERN __mulsuchar
59    0000              	EXTERN __mulsuchar_callee
60    0000              	EXTERN __muluschar
61    0000              	EXTERN __muluschar_callee
62    0000              	EXTERN __rlslonglong
63    0000              	EXTERN __rlslonglong_callee
64    0000              	EXTERN __rlulonglong
65    0000              	EXTERN __rlulonglong_callee
66    0000              	EXTERN __rrslonglong
67    0000              	EXTERN __rrslonglong_callee
68    0000              	EXTERN __rrulonglong
69    0000              	EXTERN __rrulonglong_callee
70    0000              	EXTERN ___sdcc_call_hl
71    0000              	EXTERN ___sdcc_call_iy
72    0000              	EXTERN ___sdcc_enter_ix
73    0000              	EXTERN _banked_call
74    0000              	EXTERN _banked_ret
75    0000              	EXTERN ___fs2schar
76    0000              	EXTERN ___fs2schar_callee
77    0000              	EXTERN ___fs2sint
78    0000              	EXTERN ___fs2sint_callee
79    0000              	EXTERN ___fs2slong
80    0000              	EXTERN ___fs2slong_callee
81    0000              	EXTERN ___fs2slonglong
82    0000              	EXTERN ___fs2slonglong_callee
83    0000              	EXTERN ___fs2uchar
84    0000              	EXTERN ___fs2uchar_callee
85    0000              	EXTERN ___fs2uint
86    0000              	EXTERN ___fs2uint_callee
87    0000              	EXTERN ___fs2ulong
88    0000              	EXTERN ___fs2ulong_callee
89    0000              	EXTERN ___fs2ulonglong
90    0000              	EXTERN ___fs2ulonglong_callee
91    0000              	EXTERN ___fsadd
92    0000              	EXTERN ___fsadd_callee
93    0000              	EXTERN ___fsdiv
94    0000              	EXTERN ___fsdiv_callee
95    0000              	EXTERN ___fseq
96    0000              	EXTERN ___fseq_callee
97    0000              	EXTERN ___fsgt
98    0000              	EXTERN ___fsgt_callee
99    0000              	EXTERN ___fslt
100   0000              	EXTERN ___fslt_callee
101   0000              	EXTERN ___fsmul
102   0000              	EXTERN ___fsmul_callee
103   0000              	EXTERN ___fsneq
104   0000              	EXTERN ___fsneq_callee
105   0000              	EXTERN ___fssub
106   0000              	EXTERN ___fssub_callee
107   0000              	EXTERN ___schar2fs
108   0000              	EXTERN ___schar2fs_callee
109   0000              	EXTERN ___sint2fs
110   0000              	EXTERN ___sint2fs_callee
111   0000              	EXTERN ___slong2fs
112   0000              	EXTERN ___slong2fs_callee
113   0000              	EXTERN ___slonglong2fs
114   0000              	EXTERN ___slonglong2fs_callee
115   0000              	EXTERN ___uchar2fs
116   0000              	EXTERN ___uchar2fs_callee
117   0000              	EXTERN ___uint2fs
118   0000              	EXTERN ___uint2fs_callee
119   0000              	EXTERN ___ulong2fs
120   0000              	EXTERN ___ulong2fs_callee
121   0000              	EXTERN ___ulonglong2fs
122   0000              	EXTERN ___ulonglong2fs_callee
123   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
126   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
127   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
128   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
129   0000              	EXTERN ____sdcc_4_ldi_save_bc
130   0000              	EXTERN ____sdcc_4_push_hlix
131   0000              	EXTERN ____sdcc_4_push_mhl
132   0000              	EXTERN ____sdcc_lib_setmem_hl
133   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
134   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
135   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
136   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
137   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
138   0000              	EXTERN ____sdcc_ll_add_deix_hlix
139   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
140   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
141   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
142   0000              	EXTERN ____sdcc_ll_asr_hlix_a
143   0000              	EXTERN ____sdcc_ll_asr_mbc_a
144   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
145   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
146   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
147   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
148   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
149   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
150   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
151   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
152   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
153   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
155   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
156   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
157   0000              	EXTERN ____sdcc_ll_push_hlix
158   0000              	EXTERN ____sdcc_ll_push_mhl
159   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
160   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
161   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
162   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
163   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
164   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
165   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
166   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
167   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
168   0000              	EXTERN ____sdcc_load_debc_deix
169   0000              	EXTERN ____sdcc_load_dehl_deix
170   0000              	EXTERN ____sdcc_load_debc_mhl
171   0000              	EXTERN ____sdcc_load_hlde_mhl
172   0000              	EXTERN ____sdcc_store_dehl_bcix
173   0000              	EXTERN ____sdcc_store_debc_hlix
174   0000              	EXTERN ____sdcc_store_debc_mhl
175   0000              	EXTERN ____sdcc_cpu_pop_ei
176   0000              	EXTERN ____sdcc_cpu_pop_ei_jp
177   0000              	EXTERN ____sdcc_cpu_push_di
178   0000              	EXTERN ____sdcc_outi
179   0000              	EXTERN ____sdcc_outi_128
180   0000              	EXTERN ____sdcc_outi_256
181   0000              	EXTERN ____sdcc_ldi
182   0000              	EXTERN ____sdcc_ldi_128
183   0000              	EXTERN ____sdcc_ldi_256
184   0000              
185   0000              ;--------------------------------------------------------
186   0000              ; Public variables in this module
187   0000              ;--------------------------------------------------------
188   0000              	GLOBAL _player_check_map
189   0000              	GLOBAL _player_1up
190   0000              	GLOBAL _player_init
191   0000              	GLOBAL _player_turn
192   0000              	GLOBAL _player_move
193   0000              	GLOBAL _player_check_input
194   0000              	GLOBAL _player_move_input
195   0000              	GLOBAL _player_fix_walk_lin
196   0000              	GLOBAL _player_fire
197   0000              	GLOBAL _player_collision
198   0000              	GLOBAL _player_pick_mushroom
199   0000              	GLOBAL _player_check_stairs_vertical
200   0000              	GLOBAL _player_check_stairs
201   0000              	GLOBAL _player_anim_tile
202   0000              	GLOBAL _player_tile
203   0000              	GLOBAL _player_pick_item
204   0000              	GLOBAL _player_hit_platform
205   0000              	GLOBAL _player_hit_platform_clear
206   0000              	GLOBAL _player_score_add
207   0000              	GLOBAL _player_check_floor
208   0000              	GLOBAL _player_gasta_brick
209   0000              	GLOBAL _player_move_jump
210   0000              	GLOBAL _player_open_door
211   0000              	GLOBAL _player_lost_life
212   0000              	GLOBAL _player_hit
213   0000              ;--------------------------------------------------------
214   0000              ; Externals used
215   0000              ;--------------------------------------------------------
216   0000              	GLOBAL _ulltoa_callee
217   0000              	GLOBAL _ulltoa
218   0000              	GLOBAL _strtoull_callee
219   0000              	GLOBAL _strtoull
220   0000              	GLOBAL _strtoll_callee
221   0000              	GLOBAL _strtoll
222   0000              	GLOBAL _lltoa_callee
223   0000              	GLOBAL _lltoa
224   0000              	GLOBAL _llabs_callee
225   0000              	GLOBAL _llabs
226   0000              	GLOBAL __lldivu__callee
227   0000              	GLOBAL __lldivu_
228   0000              	GLOBAL __lldiv__callee
229   0000              	GLOBAL __lldiv_
230   0000              	GLOBAL _atoll_callee
231   0000              	GLOBAL _atoll
232   0000              	GLOBAL _realloc_unlocked_callee
233   0000              	GLOBAL _realloc_unlocked
234   0000              	GLOBAL _malloc_unlocked_fastcall
235   0000              	GLOBAL _malloc_unlocked
236   0000              	GLOBAL _free_unlocked_fastcall
237   0000              	GLOBAL _free_unlocked
238   0000              	GLOBAL _calloc_unlocked_callee
239   0000              	GLOBAL _calloc_unlocked
240   0000              	GLOBAL _aligned_alloc_unlocked_callee
241   0000              	GLOBAL _aligned_alloc_unlocked
242   0000              	GLOBAL _realloc_callee
243   0000              	GLOBAL _realloc
244   0000              	GLOBAL _malloc_fastcall
245   0000              	GLOBAL _malloc
246   0000              	GLOBAL _free_fastcall
247   0000              	GLOBAL _free
248   0000              	GLOBAL _calloc_callee
249   0000              	GLOBAL _calloc
250   0000              	GLOBAL _aligned_alloc_callee
251   0000              	GLOBAL _aligned_alloc
252   0000              	GLOBAL _utoa_callee
253   0000              	GLOBAL _utoa
254   0000              	GLOBAL _ultoa_callee
255   0000              	GLOBAL _ultoa
256   0000              	GLOBAL _system_fastcall
257   0000              	GLOBAL _system
258   0000              	GLOBAL _strtoul_callee
259   0000              	GLOBAL _strtoul
260   0000              	GLOBAL _strtol_callee
261   0000              	GLOBAL _strtol
262   0000              	GLOBAL _strtof_callee
263   0000              	GLOBAL _strtof
264   0000              	GLOBAL _strtod_callee
265   0000              	GLOBAL _strtod
266   0000              	GLOBAL _srand_fastcall
267   0000              	GLOBAL _srand
268   0000              	GLOBAL _rand
269   0000              	GLOBAL _quick_exit_fastcall
270   0000              	GLOBAL _quick_exit
271   0000              	GLOBAL _qsort_callee
272   0000              	GLOBAL _qsort
273   0000              	GLOBAL _ltoa_callee
274   0000              	GLOBAL _ltoa
275   0000              	GLOBAL _labs_fastcall
276   0000              	GLOBAL _labs
277   0000              	GLOBAL _itoa_callee
278   0000              	GLOBAL _itoa
279   0000              	GLOBAL _ftoh_callee
280   0000              	GLOBAL _ftoh
281   0000              	GLOBAL _ftog_callee
282   0000              	GLOBAL _ftog
283   0000              	GLOBAL _ftoe_callee
284   0000              	GLOBAL _ftoe
285   0000              	GLOBAL _ftoa_callee
286   0000              	GLOBAL _ftoa
287   0000              	GLOBAL _exit_fastcall
288   0000              	GLOBAL _exit
289   0000              	GLOBAL _dtoh_callee
290   0000              	GLOBAL _dtoh
291   0000              	GLOBAL _dtog_callee
292   0000              	GLOBAL _dtog
293   0000              	GLOBAL _dtoe_callee
294   0000              	GLOBAL _dtoe
295   0000              	GLOBAL _dtoa_callee
296   0000              	GLOBAL _dtoa
297   0000              	GLOBAL _bsearch_callee
298   0000              	GLOBAL _bsearch
299   0000              	GLOBAL _atol_fastcall
300   0000              	GLOBAL _atol
301   0000              	GLOBAL _atoi_fastcall
302   0000              	GLOBAL _atoi
303   0000              	GLOBAL _atof_fastcall
304   0000              	GLOBAL _atof
305   0000              	GLOBAL _atexit_fastcall
306   0000              	GLOBAL _atexit
307   0000              	GLOBAL _at_quick_exit_fastcall
308   0000              	GLOBAL _at_quick_exit
309   0000              	GLOBAL _abs_fastcall
310   0000              	GLOBAL _abs
311   0000              	GLOBAL _abort
312   0000              	GLOBAL __strtou__callee
313   0000              	GLOBAL __strtou_
314   0000              	GLOBAL __strtoi__callee
315   0000              	GLOBAL __strtoi_
316   0000              	GLOBAL __random_uniform_xor_8__fastcall
317   0000              	GLOBAL __random_uniform_xor_8_
318   0000              	GLOBAL __random_uniform_xor_32__fastcall
319   0000              	GLOBAL __random_uniform_xor_32_
320   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
321   0000              	GLOBAL __random_uniform_cmwc_8_
322   0000              	GLOBAL __shellsort__callee
323   0000              	GLOBAL __shellsort_
324   0000              	GLOBAL __quicksort__callee
325   0000              	GLOBAL __quicksort_
326   0000              	GLOBAL __insertion_sort__callee
327   0000              	GLOBAL __insertion_sort_
328   0000              	GLOBAL __ldivu__callee
329   0000              	GLOBAL __ldivu_
330   0000              	GLOBAL __ldiv__callee
331   0000              	GLOBAL __ldiv_
332   0000              	GLOBAL __divu__callee
333   0000              	GLOBAL __divu_
334   0000              	GLOBAL __div__callee
335   0000              	GLOBAL __div_
336   0000              	GLOBAL _NIRVANAP_drawTW_raw_callee
337   0000              	GLOBAL _NIRVANAP_drawTW_raw
338   0000              	GLOBAL _NIRVANAP_drawTW_callee
339   0000              	GLOBAL _NIRVANAP_drawTW
340   0000              	GLOBAL _NIRVANAP_drawW_raw_callee
341   0000              	GLOBAL _NIRVANAP_drawW_raw
342   0000              	GLOBAL _NIRVANAP_drawW_callee
343   0000              	GLOBAL _NIRVANAP_drawW
344   0000              	GLOBAL _NIRVANAP_spriteT_callee
345   0000              	GLOBAL _NIRVANAP_spriteT
346   0000              	GLOBAL _NIRVANAP_fillC_callee
347   0000              	GLOBAL _NIRVANAP_fillC
348   0000              	GLOBAL _NIRVANAP_readC_callee
349   0000              	GLOBAL _NIRVANAP_readC
350   0000              	GLOBAL _NIRVANAP_paintC_callee
351   0000              	GLOBAL _NIRVANAP_paintC
352   0000              	GLOBAL _NIRVANAP_printC_callee
353   0000              	GLOBAL _NIRVANAP_printC
354   0000              	GLOBAL _NIRVANAP_fillT_raw_callee
355   0000              	GLOBAL _NIRVANAP_fillT_raw
356   0000              	GLOBAL _NIRVANAP_fillT_callee
357   0000              	GLOBAL _NIRVANAP_fillT
358   0000              	GLOBAL _NIRVANAP_drawT_raw_callee
359   0000              	GLOBAL _NIRVANAP_drawT_raw
360   0000              	GLOBAL _NIRVANAP_drawT_callee
361   0000              	GLOBAL _NIRVANAP_drawT
362   0000              	GLOBAL _NIRVANAP_stop
363   0000              	GLOBAL _NIRVANAP_start
364   0000              	GLOBAL _debug3
365   0000              	GLOBAL _debug2
366   0000              	GLOBAL _debug
367   0000              	GLOBAL _zx_print_str
368   0000              	GLOBAL _zx_print_int
369   0000              	GLOBAL _zx_print_chr
370   0000              	GLOBAL _zx_print_bonus_time
371   0000              	GLOBAL _zx_isr
372   0000              	GLOBAL _z80_otdr_callee
373   0000              	GLOBAL _z80_otdr
374   0000              	GLOBAL _z80_otir_callee
375   0000              	GLOBAL _z80_otir
376   0000              	GLOBAL _z80_outp_callee
377   0000              	GLOBAL _z80_outp
378   0000              	GLOBAL _z80_indr_callee
379   0000              	GLOBAL _z80_indr
380   0000              	GLOBAL _z80_inir_callee
381   0000              	GLOBAL _z80_inir
382   0000              	GLOBAL _z80_inp_fastcall
383   0000              	GLOBAL _z80_inp
384   0000              	GLOBAL _z80_set_int_state_fastcall
385   0000              	GLOBAL _z80_set_int_state
386   0000              	GLOBAL _z80_get_int_state
387   0000              	GLOBAL _z80_delay_tstate_fastcall
388   0000              	GLOBAL _z80_delay_tstate
389   0000              	GLOBAL _z80_delay_ms_fastcall
390   0000              	GLOBAL _z80_delay_ms
391   0000              	GLOBAL _im2_remove_generic_callback_callee
392   0000              	GLOBAL _im2_remove_generic_callback
393   0000              	GLOBAL _im2_prepend_generic_callback_callee
394   0000              	GLOBAL _im2_prepend_generic_callback
395   0000              	GLOBAL _im2_append_generic_callback_callee
396   0000              	GLOBAL _im2_append_generic_callback
397   0000              	GLOBAL _im2_create_generic_isr_8080_callee
398   0000              	GLOBAL _im2_create_generic_isr_8080
399   0000              	GLOBAL _im2_create_generic_isr_callee
400   0000              	GLOBAL _im2_create_generic_isr
401   0000              	GLOBAL _im2_install_isr_callee
402   0000              	GLOBAL _im2_install_isr
403   0000              	GLOBAL _im2_init_fastcall
404   0000              	GLOBAL _im2_init
405   0000              	GLOBAL _intrinsic_swap_word_32_fastcall
406   0000              	GLOBAL _intrinsic_swap_word_32
407   0000              	GLOBAL _intrinsic_swap_endian_32_fastcall
408   0000              	GLOBAL _intrinsic_swap_endian_32
409   0000              	GLOBAL _intrinsic_swap_endian_16_fastcall
410   0000              	GLOBAL _intrinsic_swap_endian_16
411   0000              	GLOBAL _intrinsic_return_de
412   0000              	GLOBAL _intrinsic_return_bc
413   0000              	GLOBAL _intrinsic_exx
414   0000              	GLOBAL _intrinsic_ex_de_hl
415   0000              	GLOBAL _intrinsic_nop
416   0000              	GLOBAL _intrinsic_im_2
417   0000              	GLOBAL _intrinsic_im_1
418   0000              	GLOBAL _intrinsic_im_0
419   0000              	GLOBAL _intrinsic_retn
420   0000              	GLOBAL _intrinsic_reti
421   0000              	GLOBAL _intrinsic_halt
422   0000              	GLOBAL _intrinsic_ei
423   0000              	GLOBAL _intrinsic_di
424   0000              	GLOBAL _intrinsic_stub
425   0000              	GLOBAL _intrinsic_outi
426   0000              	GLOBAL _intrinsic_ldi
427   0000              	GLOBAL _zx_pattern_fill_callee
428   0000              	GLOBAL _zx_pattern_fill
429   0000              	GLOBAL _zx_saddrpup_fastcall
430   0000              	GLOBAL _zx_saddrpup
431   0000              	GLOBAL _zx_saddrpright_callee
432   0000              	GLOBAL _zx_saddrpright
433   0000              	GLOBAL _zx_saddrpleft_callee
434   0000              	GLOBAL _zx_saddrpleft
435   0000              	GLOBAL _zx_saddrpdown_fastcall
436   0000              	GLOBAL _zx_saddrpdown
437   0000              	GLOBAL _zx_saddrcup_fastcall
438   0000              	GLOBAL _zx_saddrcup
439   0000              	GLOBAL _zx_saddrcright_fastcall
440   0000              	GLOBAL _zx_saddrcright
441   0000              	GLOBAL _zx_saddrcleft_fastcall
442   0000              	GLOBAL _zx_saddrcleft
443   0000              	GLOBAL _zx_saddrcdown_fastcall
444   0000              	GLOBAL _zx_saddrcdown
445   0000              	GLOBAL _zx_saddr2py_fastcall
446   0000              	GLOBAL _zx_saddr2py
447   0000              	GLOBAL _zx_saddr2px_fastcall
448   0000              	GLOBAL _zx_saddr2px
449   0000              	GLOBAL _zx_saddr2cy_fastcall
450   0000              	GLOBAL _zx_saddr2cy
451   0000              	GLOBAL _zx_saddr2cx_fastcall
452   0000              	GLOBAL _zx_saddr2cx
453   0000              	GLOBAL _zx_saddr2aaddr_fastcall
454   0000              	GLOBAL _zx_saddr2aaddr
455   0000              	GLOBAL _zx_py2saddr_fastcall
456   0000              	GLOBAL _zx_py2saddr
457   0000              	GLOBAL _zx_py2aaddr_fastcall
458   0000              	GLOBAL _zx_py2aaddr
459   0000              	GLOBAL _zx_pxy2saddr_callee
460   0000              	GLOBAL _zx_pxy2saddr
461   0000              	GLOBAL _zx_pxy2aaddr_callee
462   0000              	GLOBAL _zx_pxy2aaddr
463   0000              	GLOBAL _zx_px2bitmask_fastcall
464   0000              	GLOBAL _zx_px2bitmask
465   0000              	GLOBAL _zx_cy2saddr_fastcall
466   0000              	GLOBAL _zx_cy2saddr
467   0000              	GLOBAL _zx_cy2aaddr_fastcall
468   0000              	GLOBAL _zx_cy2aaddr
469   0000              	GLOBAL _zx_cxy2saddr_callee
470   0000              	GLOBAL _zx_cxy2saddr
471   0000              	GLOBAL _zx_cxy2aaddr_callee
472   0000              	GLOBAL _zx_cxy2aaddr
473   0000              	GLOBAL _zx_bitmask2px_fastcall
474   0000              	GLOBAL _zx_bitmask2px
475   0000              	GLOBAL _zx_aaddrcup_fastcall
476   0000              	GLOBAL _zx_aaddrcup
477   0000              	GLOBAL _zx_aaddrcright_fastcall
478   0000              	GLOBAL _zx_aaddrcright
479   0000              	GLOBAL _zx_aaddrcleft_fastcall
480   0000              	GLOBAL _zx_aaddrcleft
481   0000              	GLOBAL _zx_aaddrcdown_fastcall
482   0000              	GLOBAL _zx_aaddrcdown
483   0000              	GLOBAL _zx_aaddr2saddr_fastcall
484   0000              	GLOBAL _zx_aaddr2saddr
485   0000              	GLOBAL _zx_aaddr2py_fastcall
486   0000              	GLOBAL _zx_aaddr2py
487   0000              	GLOBAL _zx_aaddr2px_fastcall
488   0000              	GLOBAL _zx_aaddr2px
489   0000              	GLOBAL _zx_aaddr2cy_fastcall
490   0000              	GLOBAL _zx_aaddr2cy
491   0000              	GLOBAL _zx_aaddr2cx_fastcall
492   0000              	GLOBAL _zx_aaddr2cx
493   0000              	GLOBAL _zx_visit_wc_pix_callee
494   0000              	GLOBAL _zx_visit_wc_pix
495   0000              	GLOBAL _zx_visit_wc_attr_callee
496   0000              	GLOBAL _zx_visit_wc_attr
497   0000              	GLOBAL _zx_scroll_wc_up_pix_callee
498   0000              	GLOBAL _zx_scroll_wc_up_pix
499   0000              	GLOBAL _zx_scroll_wc_up_attr_callee
500   0000              	GLOBAL _zx_scroll_wc_up_attr
501   0000              	GLOBAL _zx_scroll_wc_up_callee
502   0000              	GLOBAL _zx_scroll_wc_up
503   0000              	GLOBAL _zx_scroll_up_pix_callee
504   0000              	GLOBAL _zx_scroll_up_pix
505   0000              	GLOBAL _zx_scroll_up_attr_callee
506   0000              	GLOBAL _zx_scroll_up_attr
507   0000              	GLOBAL _zx_scroll_up_callee
508   0000              	GLOBAL _zx_scroll_up
509   0000              	GLOBAL _zx_cls_wc_pix_callee
510   0000              	GLOBAL _zx_cls_wc_pix
511   0000              	GLOBAL _zx_cls_wc_attr_callee
512   0000              	GLOBAL _zx_cls_wc_attr
513   0000              	GLOBAL _zx_cls_wc_callee
514   0000              	GLOBAL _zx_cls_wc
515   0000              	GLOBAL _zx_cls_pix_fastcall
516   0000              	GLOBAL _zx_cls_pix
517   0000              	GLOBAL _zx_cls_attr_fastcall
518   0000              	GLOBAL _zx_cls_attr
519   0000              	GLOBAL _zx_cls_fastcall
520   0000              	GLOBAL _zx_cls
521   0000              	GLOBAL _zx_border_fastcall
522   0000              	GLOBAL _zx_border
523   0000              	GLOBAL _spr_colision_boss
524   0000              	GLOBAL _spr_colision_b
525   0000              	GLOBAL _spr_unflatten
526   0000              	GLOBAL _spr_flatten
527   0000              	GLOBAL _spr_btile_paint_back
528   0000              	GLOBAL _spr_bullet_explode
529   0000              	GLOBAL _spr_init_effects
530   0000              	GLOBAL _spr_turn_horizontal
531   0000              	GLOBAL _spr_bullets_play
532   0000              	GLOBAL _spr_play_anim
533   0000              	GLOBAL _spr_add_anim
534   0000              	GLOBAL _spr_clear_scr
535   0000              	GLOBAL _spr_page_map
536   0000              	GLOBAL _spr_page_down
537   0000              	GLOBAL _spr_page_up
538   0000              	GLOBAL _spr_page_right
539   0000              	GLOBAL _spr_page_left
540   0000              	GLOBAL _spr_tile_paint
541   0000              	GLOBAL _spr_draw_index
542   0000              	GLOBAL _spr_brick_anim
543   0000              	GLOBAL _spr_back_repaint
544   0000              	GLOBAL _spr_tile
545   0000              	GLOBAL _spr_destroy
546   0000              	GLOBAL _spr_tile_dir
547   0000              	GLOBAL _spr_redraw
548   0000              	GLOBAL _spr_move_left
549   0000              	GLOBAL _spr_move_right
550   0000              	GLOBAL _spr_move_horizontal
551   0000              	GLOBAL _spr_move_down
552   0000              	GLOBAL _spr_move_up
553   0000              	GLOBAL _spr_set_right
554   0000              	GLOBAL _spr_set_left
555   0000              	GLOBAL _spr_set_down
556   0000              	GLOBAL _spr_set_up
557   0000              	GLOBAL _spr_calc_index
558   0000              	GLOBAL _spr_chktime
559   0000              	GLOBAL _menu_define_key
560   0000              	GLOBAL _menu_redefine
561   0000              	GLOBAL _menu_main_print
562   0000              	GLOBAL _menu_main
563   0000              	GLOBAL _game_match_back
564   0000              	GLOBAL _game_attribs
565   0000              	GLOBAL _game_boss_clear
566   0000              	GLOBAL _game_boss_kill
567   0000              	GLOBAL _game_obj_clear
568   0000              	GLOBAL _game_obj_chk
569   0000              	GLOBAL _game_obj_set
570   0000              	GLOBAL _game_shoot_fire_boss
571   0000              	GLOBAL _game_shoot_fire
572   0000              	GLOBAL _game_add_enemy
573   0000              	GLOBAL _game_print_header
574   0000              	GLOBAL _game_check_time
575   0000              	GLOBAL _game_rotate_attrib_osd
576   0000              	GLOBAL _game_rotate_attrib
577   0000              	GLOBAL _game_colour_message
578   0000              	GLOBAL _game_paint_attrib
579   0000              	GLOBAL _game_print_score
580   0000              	GLOBAL _game_check_cell
581   0000              	GLOBAL _game_check_map
582   0000              	GLOBAL _game_loop
583   0000              	GLOBAL _game_round_init
584   0000              	GLOBAL _game_set_checkpoint
585   0000              	GLOBAL _game_start_timer
586   0000              	GLOBAL _game_update_stats
587   0000              	GLOBAL _game_print_footer
588   0000              	GLOBAL _game_fill_row
589   0000              	GLOBAL _game_fps
590   0000              	GLOBAL _game_respawn
591   0000              	GLOBAL _game_draw_screen
592   0000              	GLOBAL _boss_draw_frame
593   0000              	GLOBAL _boss_draw
594   0000              	GLOBAL _boss_turn
595   0000              	GLOBAL _enemy_avoid_dead
596   0000              	GLOBAL _enemy_avoid_fall
597   0000              	GLOBAL _enemy_kill
598   0000              	GLOBAL _enemy_respawn
599   0000              	GLOBAL _enemy_init
600   0000              	GLOBAL _enemy_move
601   0000              	GLOBAL _enemy_turn
602   0000              	GLOBAL _enemy_static
603   0000              	GLOBAL _enemy_walk
604   0000              	GLOBAL _enemy_horizontal
605   0000              	GLOBAL _enemy_vertical
606   0000              	GLOBAL _ay_reset
607   0000              	GLOBAL _ay_song_stop
608   0000              	GLOBAL _ay_song_play
609   0000              	GLOBAL _ay_fx_stop
610   0000              	GLOBAL _ay_fx_play
611   0000              	GLOBAL _ay_is_playing
612   0000              	GLOBAL _test_func
613   0000              	GLOBAL _test_proc
614   0000              	GLOBAL _in_mouse_kempston_wheel_delta
615   0000              	GLOBAL _in_mouse_kempston_wheel
616   0000              	GLOBAL _in_mouse_kempston_callee
617   0000              	GLOBAL _in_mouse_kempston
618   0000              	GLOBAL _in_mouse_kempston_setpos_callee
619   0000              	GLOBAL _in_mouse_kempston_setpos
620   0000              	GLOBAL _in_mouse_kempston_reset
621   0000              	GLOBAL _in_mouse_kempston_init
622   0000              	GLOBAL _in_mouse_amx_wheel_delta
623   0000              	GLOBAL _in_mouse_amx_wheel
624   0000              	GLOBAL _in_mouse_amx_callee
625   0000              	GLOBAL _in_mouse_amx
626   0000              	GLOBAL _in_mouse_amx_setpos_callee
627   0000              	GLOBAL _in_mouse_amx_setpos
628   0000              	GLOBAL _in_mouse_amx_reset
629   0000              	GLOBAL _in_mouse_amx_init_callee
630   0000              	GLOBAL _in_mouse_amx_init
631   0000              	GLOBAL _in_stick_sinclair2
632   0000              	GLOBAL _in_stick_sinclair1
633   0000              	GLOBAL _in_stick_kempston
634   0000              	GLOBAL _in_stick_fuller
635   0000              	GLOBAL _in_stick_cursor
636   0000              	GLOBAL _in_stick_keyboard_fastcall
637   0000              	GLOBAL _in_stick_keyboard
638   0000              	GLOBAL _in_wait_nokey
639   0000              	GLOBAL _in_wait_key
640   0000              	GLOBAL _in_test_key
641   0000              	GLOBAL _in_pause_fastcall
642   0000              	GLOBAL _in_pause
643   0000              	GLOBAL _in_key_scancode_fastcall
644   0000              	GLOBAL _in_key_scancode
645   0000              	GLOBAL _in_key_pressed_fastcall
646   0000              	GLOBAL _in_key_pressed
647   0000              	GLOBAL _in_inkey
648   0000              	GLOBAL _NIRVANAP_CHAR_TABLE
649   0000              	GLOBAL _NIRVANAP_WIDE_IMAGES
650   0000              	GLOBAL _NIRVANAP_TILE_IMAGES
651   0000              	GLOBAL _NIRVANAP_HOLE
652   0000              	GLOBAL _NIRVANAP_ISR_HOOK
653   0000              	GLOBAL _scan_map
654   0000              	GLOBAL _key_map
655   0000              	GLOBAL _player_lvl_table
656   0000              	GLOBAL _stp_row
657   0000              	GLOBAL _stp_col
658   0000              	GLOBAL _stp_tile
659   0000              	GLOBAL _map_paper_last_a
660   0000              	GLOBAL _map_paper_last
661   0000              	GLOBAL _map_paper_clr
662   0000              	GLOBAL _map_paper
663   0000              	GLOBAL _draw_count
664   0000              	GLOBAL _g_player_hit_right
665   0000              	GLOBAL _g_player_hit_left
666   0000              	GLOBAL _bullet_count
667   0000              	GLOBAL _spr_hack
668   0000              	GLOBAL _boss_stat
669   0000              	GLOBAL _boss_time_fire
670   0000              	GLOBAL _boss_time
671   0000              	GLOBAL _boss_tile
672   0000              	GLOBAL _boss_inc
673   0000              	GLOBAL _boss_col
674   0000              	GLOBAL _boss_lin
675   0000              	GLOBAL _bullet
676   0000              	GLOBAL _bullet_vel
677   0000              	GLOBAL _bullet_frames
678   0000              	GLOBAL _bullet_colint
679   0000              	GLOBAL _bullet_dir
680   0000              	GLOBAL _bullet_tile
681   0000              	GLOBAL _bullet_col
682   0000              	GLOBAL _bullet_lin
683   0000              	GLOBAL _bullet_col0
684   0000              	GLOBAL _bullet_lin0
685   0000              	GLOBAL _bullet_max
686   0000              	GLOBAL _bullet_class
687   0000              	GLOBAL _mush_class
688   0000              	GLOBAL _mush_index
689   0000              	GLOBAL _anim_count
690   0000              	GLOBAL _anim_respanwn
691   0000              	GLOBAL _anim_loop
692   0000              	GLOBAL _anim_end
693   0000              	GLOBAL _anim_int
694   0000              	GLOBAL _anim_tile
695   0000              	GLOBAL _anim_col
696   0000              	GLOBAL _anim_lin
697   0000              	GLOBAL _map_heigth
698   0000              	GLOBAL _map_width
699   0000              	GLOBAL _scr_curr
700   0000              	GLOBAL _sprite_kind
701   0000              	GLOBAL _scr_obj1
702   0000              	GLOBAL _scr_obj0
703   0000              	GLOBAL _scr_map
704   0000              	GLOBAL _sprite_speed_alt
705   0000              	GLOBAL _spr_init
706   0000              	GLOBAL _spr_map_tile
707   0000              	GLOBAL _sprite_frames
708   0000              	GLOBAL _sprite_speed
709   0000              	GLOBAL _screen_ink
710   0000              	GLOBAL _screen_paper
711   0000              	GLOBAL _player_onstair
712   0000              	GLOBAL _game_start_scr
713   0000              	GLOBAL _game_respawn_tile
714   0000              	GLOBAL _game_respawn_index
715   0000              	GLOBAL _game_respawn_time
716   0000              	GLOBAL _game_score_top
717   0000              	GLOBAL _player_coins
718   0000              	GLOBAL _player_lives
719   0000              	GLOBAL _game_over
720   0000              	GLOBAL _game_sound
721   0000              	GLOBAL _game_inf_lives
722   0000              	GLOBAL _game_inmune
723   0000              	GLOBAL _sprite_curr_index
724   0000              	GLOBAL _spr_count
725   0000              	GLOBAL _bullet_time
726   0000              	GLOBAL _anim_time
727   0000              	GLOBAL _frame_time
728   0000              	GLOBAL _curr_time
729   0000              	GLOBAL _s_state
730   0000              	GLOBAL _attrib_osd
731   0000              	GLOBAL _attrib_hl
732   0000              	GLOBAL _attrib
733   0000              	GLOBAL _zx_val_asm
734   0000              	GLOBAL _enemies
735   0000              	GLOBAL _tmp_ui
736   0000              	GLOBAL _tmp_sc
737   0000              	GLOBAL _tmp_uc
738   0000              	GLOBAL _tmp1
739   0000              	GLOBAL _tmp0
740   0000              	GLOBAL _tmp
741   0000              	GLOBAL _index1
742   0000              	GLOBAL _index0
743   0000              	GLOBAL _loop_count
744   0000              	GLOBAL _s_class
745   0000              	GLOBAL _s_col1
746   0000              	GLOBAL _s_col0
747   0000              	GLOBAL _s_lin1
748   0000              	GLOBAL _s_lin0
749   0000              	GLOBAL _s_tile1
750   0000              	GLOBAL _s_tile0
751   0000              	GLOBAL _player_brick_time
752   0000              	GLOBAL _player_hit_count
753   0000              	GLOBAL _game_show_fps
754   0000              	GLOBAL _sprite_horizontal_check
755   0000              	GLOBAL _sprite_on_air
756   0000              	GLOBAL _sprite
757   0000              	GLOBAL _fps
758   0000              	GLOBAL _game_2buttons
759   0000              	GLOBAL _game_respawn_curr_time
760   0000              	GLOBAL _game_worldup
761   0000              	GLOBAL _game_mush_count
762   0000              	GLOBAL _game_boss_fix
763   0000              	GLOBAL _game_boss_hit
764   0000              	GLOBAL _game_boss_alive
765   0000              	GLOBAL _game_boss
766   0000              	GLOBAL _game_world
767   0000              	GLOBAL _game_gravity
768   0000              	GLOBAL _player_onfire
769   0000              	GLOBAL _player_anim_stair
770   0000              	GLOBAL _player_hit_time
771   0000              	GLOBAL _game_checkpoint_scr
772   0000              	GLOBAL _game_checkpoint_lin
773   0000              	GLOBAL _game_checkpoint_col
774   0000              	GLOBAL _player_lin_scr
775   0000              	GLOBAL _player_col_scr
776   0000              	GLOBAL _player_lvl
777   0000              	GLOBAL _player_int
778   0000              	GLOBAL _player_str
779   0000              	GLOBAL _player_max_vita
780   0000              	GLOBAL _player_max_mana
781   0000              	GLOBAL _player_vita
782   0000              	GLOBAL _player_mana
783   0000              	GLOBAL _player_keys
784   0000              	GLOBAL _player_vel_inc
785   0000              	GLOBAL _player_vel_y1
786   0000              	GLOBAL _player_vel_y0
787   0000              	GLOBAL _player_vel_y
788   0000              	GLOBAL _player_vel_x
789   0000              	GLOBAL _player_score
790   0000              	GLOBAL _last_time
791   0000              	GLOBAL _spr_timer
792   0000              	GLOBAL _jump_lin
793   0000              	GLOBAL _player_hit_col
794   0000              	GLOBAL _player_hit_lin
795   0000              	GLOBAL _colint
796   0000              	GLOBAL _col
797   0000              	GLOBAL _tbuffer
798   0000              	GLOBAL _lin
799   0000              	GLOBAL _tile
800   0000              	GLOBAL _state_a
801   0000              	GLOBAL _state
802   0000              	GLOBAL _class
803   0000              	GLOBAL _dirs_alt
804   0000              	GLOBAL _dirs
805   0000              	GLOBAL _k2
806   0000              	GLOBAL _k1
807   0000              	GLOBAL _joyfunc2
808   0000              	GLOBAL _joyfunc1
809   0000              	GLOBAL _btiles
810   0000              	GLOBAL _spec128
811   0000              	GLOBAL _GLOBAL_ZX_PORT_7FFD
812   0000              	GLOBAL _GLOBAL_ZX_PORT_1FFD
813   0000              	GLOBAL _GLOBAL_ZX_PORT_FE
814   0000              	GLOBAL _ay_song_06_ciel
815   0000              	GLOBAL _ay_song_04_sunflower
816   0000              	GLOBAL _ay_song_04_lotr_level_start
817   0000              	GLOBAL _ay_song_04_lotr_level_complete
818   0000              	GLOBAL _ay_song_04_lotr_lose_a_life
819   0000              	GLOBAL _ay_song_04_lotr
820   0000              	GLOBAL _ay_fx_06_explosion1
821   0000              	GLOBAL _ay_fx_06_efecto
822   0000              	GLOBAL _ay_fx_06_disparo2
823   0000              	GLOBAL _ay_fx_06_disparo1
824   0000              	GLOBAL _ay_fx_04_sin_mana
825   0000              	GLOBAL _ay_fx_04_salto
826   0000              	GLOBAL _ay_fx_04_pierto_abierta
827   0000              	GLOBAL _ay_fx_04_magia1
828   0000              	GLOBAL _ay_fx_04_golpe
829   0000              	GLOBAL _ay_fx_04_explosion
830   0000              	GLOBAL _ay_fx_04_dano_por_toque
831   0000              	GLOBAL _ay_fx_04_coin
832   0000              	GLOBAL _world0_h
833   0000              	GLOBAL _world0_w
834   0000              	GLOBAL _world0
835   0000              	GLOBAL _paper0
836   0000              	GLOBAL _lenght0
837   0000              	GLOBAL _start_scr0
838   0000              ;--------------------------------------------------------
839   0000              ; special function registers
840   0000              ;--------------------------------------------------------
841   0000              defc _IO_FE	=	0x00fe
842   0000              defc _IO_1FFD	=	0x1ffd
843   0000              defc _IO_7FFD	=	0x7ffd
844   0000              ;--------------------------------------------------------
845   0000              ; ram data
846   0000              ;--------------------------------------------------------
847   0000              	SECTION bss_compiler
848   0000              ;--------------------------------------------------------
849   0000              ; ram data
850   0000              ;--------------------------------------------------------
851   0000              
852   0000              IF 0
853   0000              
854   0000              ; .area _INITIALIZED removed by z88dk
855   0000              
856   0000              
857   0000              ENDIF
858   0000              
859   0000              ;--------------------------------------------------------
860   0000              ; absolute external ram data
861   0000              ;--------------------------------------------------------
862   0000              	SECTION IGNORE
863   0000              ;--------------------------------------------------------
864   0000              ; global & static initialisations
865   0000              ;--------------------------------------------------------
866   0000              	SECTION code_crt_init
867   0000              ;--------------------------------------------------------
868   0000              ; Home
869   0000              ;--------------------------------------------------------
870   0000              	SECTION IGNORE
871   0000              ;--------------------------------------------------------
872   0000              ; code
873   0000              ;--------------------------------------------------------
874   0000              	SECTION code_compiler
875   0000              ;	---------------------------------
876   0000              ; Function player_init
877   0000              ; ---------------------------------
878   0000              _player_init:
879   0000  CD 00 00    	call	___sdcc_enter_ix
880   0003  21 07 00    	ld	hl, +(_class + 0x0007)
881   0006  36 00       	ld	(hl),0x00
882   0008  21 07 00    	ld	hl, +(_tile + 0x0007)
883   000B  DD 7E 06    	ld	a,(ix+6)
884   000E  77          	ld	(hl), a
885   000F  21 07 00    	ld	hl, +(_lin + 0x0007)
886   0012  DD 7E 04    	ld	a,(ix+4)
887   0015  77          	ld	(hl), a
888   0016  21 07 00    	ld	hl, +(_col + 0x0007)
889   0019  DD 7E 05    	ld	a,(ix+5)
890   001C  77          	ld	(hl), a
891   001D  21 07 00    	ld	hl, +(_colint + 0x0007)
892   0020  36 00       	ld	(hl),0x00
893   0022  21 07 00    	ld	hl, +(_state + 0x0007)
894   0025  36 00       	ld	(hl),0x00
895   0027  01 07 00    	ld	bc,_state_a+7
896   002A  AF          	xor	a, a
897   002B  02          	ld	(bc), a
898   002C  21 07 00    	ld	hl, +(_jump_lin + 0x0007)
899   002F  DD 7E 04    	ld	a,(ix+4)
900   0032  77          	ld	(hl), a
901   0033  ED 5B 00 00 	ld	de,(_curr_time)
902   0037  ED 53 0E 00 	ld	(_last_time + 0x000e),de
903   003B  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
904   003E  36 00       	ld	(hl),0x00
905   0040  0A          	ld	a, (bc)
906   0041  F6 11       	or	a,+(0x01|0x10)
907   0043  02          	ld	(bc),a
908   0044  21 00 00    	ld	hl,_player_hit_col
909   0047  36 00       	ld	(hl),0x00
910   0049  21 00 00    	ld	hl,_player_hit_lin
911   004C  36 00       	ld	(hl),0x00
912   004E  21 00 00    	ld	hl,_player_onstair
913   0051  36 00       	ld	(hl),0x00
914   0053  21 00 00    	ld	hl,_player_onfire
915   0056  36 00       	ld	(hl),0x00
916   0058  DD 66 05    	ld	h,(ix+5)
917   005B  DD 6E 04    	ld	l,(ix+4)
918   005E  E5          	push	hl
919   005F  DD 56 06    	ld	d,(ix+6)
920   0062  1E 07       	ld	e,0x07
921   0064  D5          	push	de
922   0065  CD 00 00    	call	_NIRVANAP_spriteT_callee
923   0068  DD E1       	pop	ix
924   006A  C9          	ret
925   006B              	SECTION code_compiler
926   006B              ;	---------------------------------
927   006B              ; Function player_turn
928   006B              ; ---------------------------------
929   006B              _player_turn:
930   006B  21 00 00    	ld	hl,_sprite
931   006E  CD 00 00    	call	_spr_chktime
932   0071  7D          	ld	a, l
933   0072  B7          	or	a, a
934   0073  C8          	ret	Z
935   0074  21 00 00    	ld	hl,_k1
936   0077  E5          	push	hl
937   0078  2A 00 00    	ld	hl,(_joyfunc1)
938   007B  CD 00 00    	call	___sdcc_call_hl
939   007E  F1          	pop	af
940   007F  7D          	ld	a,l
941   0080  32 00 00    	ld	(_dirs),a
942   0083  21 00 00    	ld	hl,_k2
943   0086  E5          	push	hl
944   0087  2A 00 00    	ld	hl,(_joyfunc2)
945   008A  CD 00 00    	call	___sdcc_call_hl
946   008D  F1          	pop	af
947   008E  7D          	ld	a,l
948   008F  32 00 00    	ld	(_dirs_alt),a
949   0092  21 00 00    	ld	hl,_s_class
950   0095  36 00       	ld	(hl),0x00
951   0097  CD 9D 00    	call	_player_move
952   009A  C3 BE 03    	jp  _player_collision
953   009D              	SECTION code_compiler
954   009D              ;	---------------------------------
955   009D              ; Function player_move
956   009D              ; ---------------------------------
957   009D              _player_move:
958   009D  3A 07 00    	ld	a,(_lin + 0x0007)
959   00A0  32 00 00    	ld	(_s_lin0),a
960   00A3  3A 07 00    	ld	a,(_col + 0x0007)
961   00A6  32 00 00    	ld	(_s_col0),a
962   00A9  3A 07 00    	ld	a,(_state + 0x0007)
963   00AC  32 00 00    	ld	(_s_state),a
964   00AF  21 00 00    	ld	hl,_s_state
965   00B2  CB 46       	bit	0, (hl)
966   00B4  20 07       	jr	NZ,l_player_move_00113
967   00B6  21 00 00    	ld	hl,_s_state
968   00B9  CB 4E       	bit	1, (hl)
969   00BB  28 43       	jr	Z,l_player_move_00114
970   00BD              l_player_move_00113:
971   00BD  CD 1F 03    	call	_player_fire
972   00C0  3A 00 00    	ld	a,(_player_vel_y)
973   00C3  21 00 00    	ld	hl,_player_vel_y1
974   00C6  96          	sub	a, (hl)
975   00C7  E2 CC 00    	jp	PO, l_player_move_00162
976   00CA  EE 80       	xor	a,0x80
977   00CC              l_player_move_00162:
978   00CC  F2 E9 00    	jp	P, l_player_move_00106
979   00CF  21 00 00    	ld	hl,_dirs
980   00D2  CB 56       	bit	2, (hl)
981   00D4  28 06       	jr	Z,l_player_move_00102
982   00D6  21 00 00    	ld	hl,_s_state
983   00D9  CD 00 00    	call	_spr_set_left
984   00DC              l_player_move_00102:
985   00DC  21 00 00    	ld	hl,_dirs
986   00DF  CB 4E       	bit	1, (hl)
987   00E1  28 06       	jr	Z,l_player_move_00106
988   00E3  21 00 00    	ld	hl,_s_state
989   00E6  CD 00 00    	call	_spr_set_right
990   00E9              l_player_move_00106:
991   00E9  CD 79 0E    	call	_player_move_jump
992   00EC  7D          	ld	a, l
993   00ED  B7          	or	a, a
994   00EE  28 1C       	jr	Z,l_player_move_00115
995   00F0  3A 00 00    	ld	a,(_player_onstair)
996   00F3  B7          	or	a, a
997   00F4  20 16       	jr	NZ,l_player_move_00115
998   00F6  21 60 08    	ld	hl,0x0860
999   00F9  E5          	push	hl
1000  00FA  CD 31 07    	call	_player_tile
1001  00FD  F1          	pop	af
1002  00FE  18 0C       	jr	l_player_move_00115
1003  0100              l_player_move_00114:
1004  0100  CD 72 01    	call	_player_move_input
1005  0103  3A 00 00    	ld	a,(_player_onstair)
1006  0106  B7          	or	a, a
1007  0107  20 03       	jr	NZ,l_player_move_00115
1008  0109  CD F9 0C    	call	_player_check_floor
1009  010C              l_player_move_00115:
1010  010C  CD 00 00    	call	_spr_redraw
1011  010F  7D          	ld	a, l
1012  0110  B7          	or	a, a
1013  0111  28 03       	jr	Z,l_player_move_00118
1014  0113  CD 52 07    	call	_player_check_map
1015  0116              l_player_move_00118:
1016  0116  3A 00 00    	ld	a,(_player_hit_lin)
1017  0119  B7          	or	a, a
1018  011A  28 03       	jr	Z,l_player_move_00120
1019  011C  CD 55 0C    	call	_player_hit_platform_clear
1020  011F              l_player_move_00120:
1021  011F  3A 00 00    	ld	a,(_s_state)
1022  0122  32 07 00    	ld	((_state + 0x0007)),a
1023  0125  2E 00       	ld	l,0x00
1024  0127  C9          	ret
1025  0128              	SECTION code_compiler
1026  0128              ;	---------------------------------
1027  0128              ; Function player_check_input
1028  0128              ; ---------------------------------
1029  0128              _player_check_input:
1030  0128  21 00 00    	ld	hl,_dirs
1031  012B  CB 56       	bit	2, (hl)
1032  012D  28 0C       	jr	Z,l_player_check_input_00102
1033  012F  21 00 00    	ld	hl,_dirs
1034  0132  CB 5E       	bit	3, (hl)
1035  0134  28 05       	jr	Z,l_player_check_input_00102
1036  0136  21 00 00    	ld	hl,_dirs
1037  0139  36 00       	ld	(hl),0x00
1038  013B              l_player_check_input_00102:
1039  013B  21 00 00    	ld	hl,_dirs
1040  013E  7E          	ld	a, (hl)
1041  013F  CB 07       	rlc	a
1042  0141  E6 01       	and	a,0x01
1043  0143  CB 47       	bit	0, a
1044  0145  20 28       	jr	NZ,l_player_check_input_00107
1045  0147  CB 56       	bit	2, (hl)
1046  0149  20 24       	jr	NZ,l_player_check_input_00107
1047  014B  21 00 00    	ld	hl,_dirs
1048  014E  CB 5E       	bit	3, (hl)
1049  0150  20 1D       	jr	NZ,l_player_check_input_00107
1050  0152  21 00 00    	ld	hl,_dirs
1051  0155  CB 46       	bit	0, (hl)
1052  0157  20 16       	jr	NZ,l_player_check_input_00107
1053  0159  21 00 00    	ld	hl,_dirs
1054  015C  CB 4E       	bit	1, (hl)
1055  015E  20 0F       	jr	NZ,l_player_check_input_00107
1056  0160  3A 00 00    	ld	a,(_dirs_alt)
1057  0163  CB 07       	rlc	a
1058  0165  E6 01       	and	a,0x01
1059  0167  CB 47       	bit	0, a
1060  0169  20 04       	jr	NZ,l_player_check_input_00107
1061  016B  2E 00       	ld	l,0x00
1062  016D  18 02       	jr	l_player_check_input_00108
1063  016F              l_player_check_input_00107:
1064  016F  2E 01       	ld	l,0x01
1065  0171              l_player_check_input_00108:
1066  0171  C9          	ret
1067  0172              	SECTION code_compiler
1068  0172              ;	---------------------------------
1069  0172              ; Function player_move_input
1070  0172              ; ---------------------------------
1071  0172              _player_move_input:
1072  0172  CD 28 01    	call	_player_check_input
1073  0175  7D          	ld	a, l
1074  0176  B7          	or	a, a
1075  0177  CA DF 02    	jp	Z, l_player_move_input_00147
1076  017A  CD 1F 03    	call	_player_fire
1077  017D  7D          	ld	a, l
1078  017E  B7          	or	a, a
1079  017F  28 0A       	jr	Z,l_player_move_input_00102
1080  0181  21 00 00    	ld	hl,_dirs
1081  0184  36 00       	ld	(hl),0x00
1082  0186  2E 00       	ld	l,0x00
1083  0188  C3 05 03    	jp	l_player_move_input_00149
1084  018B              l_player_move_input_00102:
1085  018B  3A 00 00    	ld	a,(_game_2buttons)
1086  018E  B7          	or	a, a
1087  018F  28 07       	jr	Z,l_player_move_input_00104
1088  0191  3A 00 00    	ld	a,(_dirs)
1089  0194  E6 80       	and	a,0x80
1090  0196  18 16       	jr	l_player_move_input_00105
1091  0198              l_player_move_input_00104:
1092  0198  21 00 00    	ld	hl,_dirs
1093  019B  7E          	ld	a, (hl)
1094  019C  CB 07       	rlc	a
1095  019E  E6 01       	and	a,0x01
1096  01A0  CB 47       	bit	0, a
1097  01A2  28 04       	jr	Z,l_player_move_input_00151
1098  01A4  CB 46       	bit	0, (hl)
1099  01A6  20 04       	jr	NZ,l_player_move_input_00152
1100  01A8              l_player_move_input_00151:
1101  01A8  3E 00       	ld	a,0x00
1102  01AA  18 02       	jr	l_player_move_input_00153
1103  01AC              l_player_move_input_00152:
1104  01AC  3E 01       	ld	a,0x01
1105  01AE              l_player_move_input_00153:
1106  01AE              l_player_move_input_00105:
1107  01AE  B7          	or	a, a
1108  01AF  28 3F       	jr	Z,l_player_move_input_00107
1109  01B1  21 00 00    	ld	hl,_player_vel_inc
1110  01B4  36 01       	ld	(hl),0x01
1111  01B6  21 00 00    	ld	hl,_ay_fx_04_salto
1112  01B9  E5          	push	hl
1113  01BA  21 01 04    	ld	hl,0x0401
1114  01BD  E5          	push	hl
1115  01BE  CD 00 00    	call	_ay_song_play
1116  01C1  21 00 00    	ld	hl,_player_onstair
1117  01C4  36 00       	ld	(hl),0x00
1118  01C6  21 00 00    	ld	hl,_s_state
1119  01C9  CD 00 00    	call	_spr_set_up
1120  01CC  3A 07 00    	ld	a,(_lin + 0x0007)
1121  01CF  32 07 00    	ld	(_jump_lin+7),a
1122  01D2  3A 00 00    	ld	a,(_s_state)
1123  01D5  32 07 00    	ld	((_state + 0x0007)),a
1124  01D8  21 64 08    	ld	hl,0x0864
1125  01DB  E5          	push	hl
1126  01DC  CD 31 07    	call	_player_tile
1127  01DF  F1          	pop	af
1128  01E0  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
1129  01E3  36 02       	ld	(hl),0x02
1130  01E5  3A 00 00    	ld	a,(_player_vel_y0)
1131  01E8  32 00 00    	ld	(_player_vel_y),a
1132  01EB  2E 01       	ld	l,0x01
1133  01ED  C3 05 03    	jp	l_player_move_input_00149
1134  01F0              l_player_move_input_00107:
1135  01F0  21 00 00    	ld	hl,_dirs
1136  01F3  CB 5E       	bit	3, (hl)
1137  01F5  28 20       	jr	Z,l_player_move_input_00111
1138  01F7  CD 06 03    	call	_player_fix_walk_lin
1139  01FA  21 00 00    	ld	hl,_s_state
1140  01FD  CD 00 00    	call	_spr_set_right
1141  0200  01 07 00    	ld	bc,_state_a+7
1142  0203  0A          	ld	a, (bc)
1143  0204  F6 10       	or	a,0x10
1144  0206  E6 F7       	and	a,0xf7
1145  0208  02          	ld	(bc),a
1146  0209  3A 00 00    	ld	a,(_player_onstair)
1147  020C  B7          	or	a, a
1148  020D  28 05       	jr	Z,l_player_move_input_00109
1149  020F  2E 00       	ld	l,0x00
1150  0211  CD 5D 06    	call	_player_check_stairs
1151  0214              l_player_move_input_00109:
1152  0214  CD 00 00    	call	_spr_move_horizontal
1153  0217              l_player_move_input_00111:
1154  0217  21 00 00    	ld	hl,_dirs
1155  021A  CB 56       	bit	2, (hl)
1156  021C  28 20       	jr	Z,l_player_move_input_00115
1157  021E  CD 06 03    	call	_player_fix_walk_lin
1158  0221  21 00 00    	ld	hl,_s_state
1159  0224  CD 00 00    	call	_spr_set_left
1160  0227  01 07 00    	ld	bc,_state_a+7
1161  022A  0A          	ld	a, (bc)
1162  022B  F6 08       	or	a,0x08
1163  022D  E6 EF       	and	a,0xef
1164  022F  02          	ld	(bc),a
1165  0230  3A 00 00    	ld	a,(_player_onstair)
1166  0233  B7          	or	a, a
1167  0234  28 05       	jr	Z,l_player_move_input_00113
1168  0236  2E 00       	ld	l,0x00
1169  0238  CD 5D 06    	call	_player_check_stairs
1170  023B              l_player_move_input_00113:
1171  023B  CD 00 00    	call	_spr_move_horizontal
1172  023E              l_player_move_input_00115:
1173  023E  21 00 00    	ld	hl,_dirs
1174  0241  CB 46       	bit	0, (hl)
1175  0243  28 39       	jr	Z,l_player_move_input_00127
1176  0245  2E 00       	ld	l,0x00
1177  0247  CD 5D 06    	call	_player_check_stairs
1178  024A  3A 00 00    	ld	a,(_player_onstair)
1179  024D  B7          	or	a, a
1180  024E  20 10       	jr	NZ,l_player_move_input_00119
1181  0250  2E 01       	ld	l,0x01
1182  0252  CD 5D 06    	call	_player_check_stairs
1183  0255  3A 00 00    	ld	a,(_player_onstair)
1184  0258  B7          	or	a, a
1185  0259  20 05       	jr	NZ,l_player_move_input_00119
1186  025B  2E FE       	ld	l,0xfe
1187  025D  CD BD 05    	call	_player_check_stairs_vertical
1188  0260              l_player_move_input_00119:
1189  0260  3A 00 00    	ld	a,(_player_onstair)
1190  0263  B7          	or	a, a
1191  0264  28 05       	jr	Z,l_player_move_input_00124
1192  0266  CD 00 00    	call	_spr_move_up
1193  0269  18 13       	jr	l_player_move_input_00127
1194  026B              l_player_move_input_00124:
1195  026B  21 00 00    	ld	hl,_dirs
1196  026E  CB 5E       	bit	3, (hl)
1197  0270  20 0C       	jr	NZ,l_player_move_input_00127
1198  0272  21 00 00    	ld	hl,_dirs
1199  0275  CB 56       	bit	2, (hl)
1200  0277  20 05       	jr	NZ,l_player_move_input_00127
1201  0279  2E 00       	ld	l,0x00
1202  027B  C3 05 03    	jp	l_player_move_input_00149
1203  027E              l_player_move_input_00127:
1204  027E  21 00 00    	ld	hl,_dirs
1205  0281  CB 4E       	bit	1, (hl)
1206  0283  28 38       	jr	Z,l_player_move_input_00139
1207  0285  2E 00       	ld	l,0x00
1208  0287  CD 5D 06    	call	_player_check_stairs
1209  028A  3A 00 00    	ld	a,(_player_onstair)
1210  028D  B7          	or	a, a
1211  028E  20 10       	jr	NZ,l_player_move_input_00131
1212  0290  2E 01       	ld	l,0x01
1213  0292  CD 5D 06    	call	_player_check_stairs
1214  0295  3A 00 00    	ld	a,(_player_onstair)
1215  0298  B7          	or	a, a
1216  0299  20 05       	jr	NZ,l_player_move_input_00131
1217  029B  2E 12       	ld	l,0x12
1218  029D  CD BD 05    	call	_player_check_stairs_vertical
1219  02A0              l_player_move_input_00131:
1220  02A0  3A 00 00    	ld	a,(_player_onstair)
1221  02A3  B7          	or	a, a
1222  02A4  28 05       	jr	Z,l_player_move_input_00136
1223  02A6  CD 00 00    	call	_spr_move_down
1224  02A9  18 12       	jr	l_player_move_input_00139
1225  02AB              l_player_move_input_00136:
1226  02AB  21 00 00    	ld	hl,_dirs
1227  02AE  CB 5E       	bit	3, (hl)
1228  02B0  20 0B       	jr	NZ,l_player_move_input_00139
1229  02B2  21 00 00    	ld	hl,_dirs
1230  02B5  CB 56       	bit	2, (hl)
1231  02B7  20 04       	jr	NZ,l_player_move_input_00139
1232  02B9  2E 00       	ld	l,0x00
1233  02BB  18 48       	jr	l_player_move_input_00149
1234  02BD              l_player_move_input_00139:
1235  02BD  3A 00 00    	ld	a,(_s_state)
1236  02C0  32 07 00    	ld	((_state + 0x0007)),a
1237  02C3  3A 00 00    	ld	a,(_player_onstair)
1238  02C6  B7          	or	a, a
1239  02C7  28 0A       	jr	Z,l_player_move_input_00141
1240  02C9  21 72 00    	ld	hl,0x0072
1241  02CC  E5          	push	hl
1242  02CD  CD 31 07    	call	_player_tile
1243  02D0  F1          	pop	af
1244  02D1  18 08       	jr	l_player_move_input_00142
1245  02D3              l_player_move_input_00141:
1246  02D3  21 60 08    	ld	hl,0x0860
1247  02D6  E5          	push	hl
1248  02D7  CD 31 07    	call	_player_tile
1249  02DA  F1          	pop	af
1250  02DB              l_player_move_input_00142:
1251  02DB  2E 01       	ld	l,0x01
1252  02DD  18 26       	jr	l_player_move_input_00149
1253  02DF              l_player_move_input_00147:
1254  02DF  21 07 00    	ld	hl, +(_colint + 0x0007)
1255  02E2  36 00       	ld	(hl),0x00
1256  02E4  3A 00 00    	ld	a,(_player_onstair)
1257  02E7  B7          	or	a, a
1258  02E8  28 0A       	jr	Z,l_player_move_input_00144
1259  02EA  21 72 00    	ld	hl,0x0072
1260  02ED  E5          	push	hl
1261  02EE  CD 31 07    	call	_player_tile
1262  02F1  F1          	pop	af
1263  02F2  18 08       	jr	l_player_move_input_00145
1264  02F4              l_player_move_input_00144:
1265  02F4  21 70 01    	ld	hl,0x0170
1266  02F7  E5          	push	hl
1267  02F8  CD 31 07    	call	_player_tile
1268  02FB  F1          	pop	af
1269  02FC              l_player_move_input_00145:
1270  02FC  21 00 00    	ld	hl,_s_state
1271  02FF  7E          	ld	a,(hl)
1272  0300  E6 F3       	and	a,+(0xf7&0xfb)
1273  0302  77          	ld	(hl),a
1274  0303  2E 00       	ld	l,0x00
1275  0305              l_player_move_input_00149:
1276  0305  C9          	ret
1277  0306              	SECTION code_compiler
1278  0306              ;	---------------------------------
1279  0306              ; Function player_fix_walk_lin
1280  0306              ; ---------------------------------
1281  0306              _player_fix_walk_lin:
1282  0306  3A 00 00    	ld	a,(_player_onstair)
1283  0309  B7          	or	a, a
1284  030A  C0          	ret	NZ
1285  030B  01 07 00    	ld	bc,_lin+7
1286  030E  3A 00 00    	ld	a,(_s_lin0)
1287  0311  07          	rlca
1288  0312  07          	rlca
1289  0313  07          	rlca
1290  0314  07          	rlca
1291  0315  E6 0F       	and	a,0x0f
1292  0317  07          	rlca
1293  0318  07          	rlca
1294  0319  07          	rlca
1295  031A  07          	rlca
1296  031B  E6 F0       	and	a,0xf0
1297  031D  02          	ld	(bc), a
1298  031E  C9          	ret
1299  031F              	SECTION code_compiler
1300  031F              ;	---------------------------------
1301  031F              ; Function player_fire
1302  031F              ; ---------------------------------
1303  031F              _player_fire:
1304  031F  CD 00 00    	call	___sdcc_enter_ix
1305  0322  3B          	dec	sp
1306  0323  3A 00 00    	ld	a,(_game_2buttons)
1307  0326  B7          	or	a, a
1308  0327  28 0A       	jr	Z,l_player_fire_00102
1309  0329  3A 00 00    	ld	a,(_dirs_alt)
1310  032C  E6 80       	and	a,0x80
1311  032E  32 00 00    	ld	(_player_onfire),a
1312  0331  18 1A       	jr	l_player_fire_00103
1313  0333              l_player_fire_00102:
1314  0333  21 00 00    	ld	hl,_dirs
1315  0336  7E          	ld	a, (hl)
1316  0337  CB 07       	rlc	a
1317  0339  E6 01       	and	a,0x01
1318  033B  CB 47       	bit	0, a
1319  033D  28 04       	jr	Z,l_player_fire_00120
1320  033F  CB 46       	bit	0, (hl)
1321  0341  28 04       	jr	Z,l_player_fire_00121
1322  0343              l_player_fire_00120:
1323  0343  0E 00       	ld	c,0x00
1324  0345  18 02       	jr	l_player_fire_00122
1325  0347              l_player_fire_00121:
1326  0347  0E 01       	ld	c,0x01
1327  0349              l_player_fire_00122:
1328  0349  21 00 00    	ld	hl,_player_onfire
1329  034C  71          	ld	(hl), c
1330  034D              l_player_fire_00103:
1331  034D  3A 00 00    	ld	a,(_player_onfire)
1332  0350  B7          	or	a, a
1333  0351  28 65       	jr	Z,l_player_fire_00117
1334  0353  3A 07 00    	ld	a,(_tile + 0x0007)
1335  0356  FE 70       	cp	a,0x70
1336  0358  28 04       	jr	Z,l_player_fire_00104
1337  035A  D6 71       	sub	a,0x71
1338  035C  20 0D       	jr	NZ,l_player_fire_00105
1339  035E              l_player_fire_00104:
1340  035E  21 60 08    	ld	hl,0x0860
1341  0361  E5          	push	hl
1342  0362  CD 31 07    	call	_player_tile
1343  0365  F1          	pop	af
1344  0366  21 07 00    	ld	hl, +(_colint + 0x0007)
1345  0369  36 00       	ld	(hl),0x00
1346  036B              l_player_fire_00105:
1347  036B  21 00 00    	ld	hl,_player_mana
1348  036E  7E          	ld	a, (hl)
1349  036F  B7          	or	a, a
1350  0370  28 37       	jr	Z,l_player_fire_00113
1351  0372  3A 07 00    	ld	a,(_bullet_col + 0x0007)
1352  0375  3C          	inc	a
1353  0376  20 31       	jr	NZ,l_player_fire_00113
1354  0378  3E 05       	ld	a,0x05
1355  037A  96          	sub	a, (hl)
1356  037B  30 0F       	jr	NC,l_player_fire_00110
1357  037D  3A 00 00    	ld	a,(_game_inmune)
1358  0380  B7          	or	a, a
1359  0381  20 0E       	jr	NZ,l_player_fire_00111
1360  0383  21 00 00    	ld	hl,_player_mana
1361  0386  7E          	ld	a, (hl)
1362  0387  C6 FB       	add	a,0xfb
1363  0389  77          	ld	(hl), a
1364  038A  18 05       	jr	l_player_fire_00111
1365  038C              l_player_fire_00110:
1366  038C  21 00 00    	ld	hl,_player_mana
1367  038F  36 00       	ld	(hl),0x00
1368  0391              l_player_fire_00111:
1369  0391  CD 00 00    	call	_game_update_stats
1370  0394  21 00 00    	ld	hl,_ay_fx_06_disparo1
1371  0397  E5          	push	hl
1372  0398  21 01 06    	ld	hl,0x0601
1373  039B  E5          	push	hl
1374  039C  CD 00 00    	call	_ay_song_play
1375  039F  21 07 78    	ld	hl,0x7807
1376  03A2  E5          	push	hl
1377  03A3  CD 00 00    	call	_game_shoot_fire
1378  03A6  F1          	pop	af
1379  03A7  18 0B       	jr	l_player_fire_00114
1380  03A9              l_player_fire_00113:
1381  03A9  21 00 00    	ld	hl,_ay_fx_04_sin_mana
1382  03AC  E5          	push	hl
1383  03AD  21 01 04    	ld	hl,0x0401
1384  03B0  E5          	push	hl
1385  03B1  CD 00 00    	call	_ay_song_play
1386  03B4              l_player_fire_00114:
1387  03B4  2E 01       	ld	l,0x01
1388  03B6  18 02       	jr	l_player_fire_00118
1389  03B8              l_player_fire_00117:
1390  03B8  2E 00       	ld	l,0x00
1391  03BA              l_player_fire_00118:
1392  03BA  33          	inc	sp
1393  03BB  DD E1       	pop	ix
1394  03BD  C9          	ret
1395  03BE              	SECTION code_compiler
1396  03BE              ;	---------------------------------
1397  03BE              ; Function player_collision
1398  03BE              ; ---------------------------------
1399  03BE              _player_collision:
1400  03BE  3E 19       	ld	a,0x19
1401  03C0  F5          	push	af
1402  03C1  33          	inc	sp
1403  03C2  21 00 00    	ld	hl,_player_hit_time
1404  03C5  E5          	push	hl
1405  03C6  CD 00 00    	call	_game_check_time
1406  03C9  F1          	pop	af
1407  03CA  33          	inc	sp
1408  03CB  7D          	ld	a, l
1409  03CC  B7          	or	a, a
1410  03CD  CA 69 05    	jp	Z, l_player_collision_00137
1411  03D0  21 00 00    	ld	hl,_sprite
1412  03D3  36 00       	ld	(hl),0x00
1413  03D5  3A 07 00    	ld	a,(_col + 7)
1414  03D8  32 00 00    	ld	(_s_col1),a
1415  03DB  3A 07 00    	ld	a,(_lin + 7)
1416  03DE  32 00 00    	ld	(_s_lin1),a
1417  03E1  C6 08       	add	a,0x08
1418  03E3  4F          	ld	c, a
1419  03E4  3A 00 00    	ld	a, (_s_col1)
1420  03E7  47          	ld	b,a
1421  03E8  C5          	push	bc
1422  03E9  CD 00 00    	call	_spr_calc_index
1423  03EC  F1          	pop	af
1424  03ED  4D          	ld	c, l
1425  03EE  21 00 00    	ld	hl,_sprite_curr_index
1426  03F1  71          	ld	(hl), c
1427  03F2  3E 00       	ld	a, +((_scr_map) & 0xFF)
1428  03F4  86          	add	a, (hl)
1429  03F5  4F          	ld	c, a
1430  03F6  3E 00       	ld	a, +((_scr_map) / 256)
1431  03F8  CE 00       	adc	a,0x00
1432  03FA  47          	ld	b, a
1433  03FB  0A          	ld	a, (bc)
1434  03FC  4F          	ld	c,a
1435  03FD  D6 15       	sub	a,0x15
1436  03FF  20 31       	jr	NZ,l_player_collision_00104
1437  0401  21 00 00    	ld	hl,_s_state
1438  0404  CB 46       	bit	0, (hl)
1439  0406  20 2A       	jr	NZ,l_player_collision_00104
1440  0408  3A 00 00    	ld	a,(_game_checkpoint_scr)
1441  040B  21 00 00    	ld	hl,_scr_curr
1442  040E  96          	sub	a, (hl)
1443  040F  28 1C       	jr	Z,l_player_collision_00102
1444  0411  21 00 00    	ld	hl,_ay_fx_06_efecto
1445  0414  E5          	push	hl
1446  0415  21 01 06    	ld	hl,0x0601
1447  0418  E5          	push	hl
1448  0419  CD 00 00    	call	_ay_song_play
1449  041C  2E 07       	ld	l,0x07
1450  041E  CD 00 00    	call	_zx_border_fastcall
1451  0421  3A 00 00    	ld	a,(_s_col1)
1452  0424  32 00 00    	ld	(_player_col_scr),a
1453  0427  3A 00 00    	ld	a,(_s_lin1)
1454  042A  32 00 00    	ld	(_player_lin_scr),a
1455  042D              l_player_collision_00102:
1456  042D  C5          	push	bc
1457  042E  CD 00 00    	call	_game_set_checkpoint
1458  0431  C1          	pop	bc
1459  0432              l_player_collision_00104:
1460  0432  3E 2F       	ld	a,0x2f
1461  0434  91          	sub	a, c
1462  0435  30 5F       	jr	NC,l_player_collision_00159
1463  0437  79          	ld	a,c
1464  0438  FE 3A       	cp	a,0x3a
1465  043A  30 5A       	jr	NC,l_player_collision_00159
1466  043C  D6 39       	sub	a,0x39
1467  043E  20 32       	jr	NZ,l_player_collision_00112
1468  0440  21 00 00    	ld	hl,_ay_song_04_lotr_level_complete
1469  0443  E5          	push	hl
1470  0444  21 01 04    	ld	hl,0x0401
1471  0447  E5          	push	hl
1472  0448  CD 00 00    	call	_ay_song_play
1473  044B  21 00 00    	ld	hl,___str_0
1474  044E  E5          	push	hl
1475  044F  21 0C 08    	ld	hl,0x080c
1476  0452  E5          	push	hl
1477  0453  CD 00 00    	call	_zx_print_str
1478  0456  AF          	xor	a, a
1479  0457  F5          	push	af
1480  0458  33          	inc	sp
1481  0459  21 E8 03    	ld	hl,0x03e8
1482  045C  E5          	push	hl
1483  045D  21 08 17    	ld	hl,0x1708
1484  0460  E5          	push	hl
1485  0461  3E 0C       	ld	a,0x0c
1486  0463  F5          	push	af
1487  0464  33          	inc	sp
1488  0465  CD 00 00    	call	_game_colour_message
1489  0468  F1          	pop	af
1490  0469  F1          	pop	af
1491  046A  F1          	pop	af
1492  046B  21 00 00    	ld	hl,_game_worldup
1493  046E  36 01       	ld	(hl),0x01
1494  0470  18 24       	jr	l_player_collision_00159
1495  0472              l_player_collision_00112:
1496  0472  21 00 00    	ld	hl,_game_inmune
1497  0475  7E          	ld	a, (hl)
1498  0476  B7          	or	a,a
1499  0477  20 13       	jr	NZ,l_player_collision_00107
1500  0479  B6          	or	a,(hl)
1501  047A  20 10       	jr	NZ,l_player_collision_00107
1502  047C  3E 82       	ld	a,0x82
1503  047E  21 00 00    	ld	hl,_s_lin1
1504  0481  96          	sub	a, (hl)
1505  0482  30 08       	jr	NC,l_player_collision_00107
1506  0484  CD CA 10    	call	_player_lost_life
1507  0487  2E 00       	ld	l,0x00
1508  0489  C3 6B 05    	jp	l_player_collision_00138
1509  048C              l_player_collision_00107:
1510  048C  2E 06       	ld	l,0x06
1511  048E  CD 00 00    	call	_zx_border_fastcall
1512  0491  2E 32       	ld	l,0x32
1513  0493  CD 6B 12    	call	_player_hit
1514  0496              l_player_collision_00159:
1515  0496              l_player_collision_00133:
1516  0496  21 00 00    	ld	hl,_sprite
1517  0499  7E          	ld	a, (hl)
1518  049A  D6 07       	sub	a,0x07
1519  049C  D2 69 05    	jp	NC, l_player_collision_00137
1520  049F  4E          	ld	c,(hl)
1521  04A0  06 00       	ld	b,0x00
1522  04A2  21 00 00    	ld	hl,_class
1523  04A5  09          	add	hl,bc
1524  04A6  7E          	ld	a,(hl)
1525  04A7  32 00 00    	ld	(_s_class),a
1526  04AA  B7          	or	a, a
1527  04AB  CA 62 05    	jp	Z, l_player_collision_00132
1528  04AE  2A 00 00    	ld	hl,(_sprite)
1529  04B1  26 00       	ld	h,0x00
1530  04B3  01 00 00    	ld	bc,_col
1531  04B6  09          	add	hl,bc
1532  04B7  4E          	ld	c,(hl)
1533  04B8  06 00       	ld	b,0x00
1534  04BA  3A 00 00    	ld	a,(_s_col1)
1535  04BD  5F          	ld	e,a
1536  04BE  16 00       	ld	d,0x00
1537  04C0  79          	ld	a, c
1538  04C1  93          	sub	a, e
1539  04C2  6F          	ld	l, a
1540  04C3  78          	ld	a, b
1541  04C4  9A          	sbc	a, d
1542  04C5  67          	ld	h, a
1543  04C6  CD 00 00    	call	_abs_fastcall
1544  04C9  7D          	ld	a,l
1545  04CA  D6 02       	sub	a,0x02
1546  04CC  7C          	ld	a,h
1547  04CD  17          	rla
1548  04CE  3F          	ccf
1549  04CF  1F          	rra
1550  04D0  DE 80       	sbc	a,0x80
1551  04D2  D2 62 05    	jp	NC, l_player_collision_00132
1552  04D5  2A 00 00    	ld	hl,(_sprite)
1553  04D8  26 00       	ld	h,0x00
1554  04DA  01 00 00    	ld	bc,_lin
1555  04DD  09          	add	hl,bc
1556  04DE  4E          	ld	c,(hl)
1557  04DF  06 00       	ld	b,0x00
1558  04E1  3A 00 00    	ld	a,(_s_lin1)
1559  04E4  5F          	ld	e,a
1560  04E5  16 00       	ld	d,0x00
1561  04E7  79          	ld	a, c
1562  04E8  93          	sub	a, e
1563  04E9  6F          	ld	l, a
1564  04EA  78          	ld	a, b
1565  04EB  9A          	sbc	a, d
1566  04EC  67          	ld	h, a
1567  04ED  CD 00 00    	call	_abs_fastcall
1568  04F0  7D          	ld	a,l
1569  04F1  D6 0E       	sub	a,0x0e
1570  04F3  7C          	ld	a,h
1571  04F4  17          	rla
1572  04F5  3F          	ccf
1573  04F6  1F          	rra
1574  04F7  DE 80       	sbc	a,0x80
1575  04F9  30 67       	jr	NC,l_player_collision_00132
1576  04FB  3A 00 00    	ld	a,(_s_class)
1577  04FE  D6 06       	sub	a,0x06
1578  0500  20 1D       	jr	NZ,l_player_collision_00120
1579  0502  21 00 00    	ld	hl,_player_vita
1580  0505  7E          	ld	a, (hl)
1581  0506  C6 32       	add	a,0x32
1582  0508  77          	ld	(hl), a
1583  0509  3A 00 00    	ld	a,(_player_max_vita)
1584  050C  21 00 00    	ld	hl,_player_vita
1585  050F  96          	sub	a, (hl)
1586  0510  30 06       	jr	NC,l_player_collision_00118
1587  0512  3A 00 00    	ld	a,(_player_max_vita)
1588  0515  32 00 00    	ld	(_player_vita),a
1589  0518              l_player_collision_00118:
1590  0518  CD 6C 05    	call	_player_pick_mushroom
1591  051B  2E 00       	ld	l,0x00
1592  051D  18 4C       	jr	l_player_collision_00138
1593  051F              l_player_collision_00120:
1594  051F  3A 00 00    	ld	a,(_s_class)
1595  0522  D6 07       	sub	a,0x07
1596  0524  20 1D       	jr	NZ,l_player_collision_00124
1597  0526  21 00 00    	ld	hl,_player_mana
1598  0529  7E          	ld	a, (hl)
1599  052A  C6 32       	add	a,0x32
1600  052C  77          	ld	(hl), a
1601  052D  3A 00 00    	ld	a,(_player_max_mana)
1602  0530  21 00 00    	ld	hl,_player_mana
1603  0533  96          	sub	a, (hl)
1604  0534  30 06       	jr	NC,l_player_collision_00122
1605  0536  3A 00 00    	ld	a,(_player_max_mana)
1606  0539  32 00 00    	ld	(_player_mana),a
1607  053C              l_player_collision_00122:
1608  053C  CD 6C 05    	call	_player_pick_mushroom
1609  053F  2E 00       	ld	l,0x00
1610  0541  18 28       	jr	l_player_collision_00138
1611  0543              l_player_collision_00124:
1612  0543  3A 00 00    	ld	a,(_s_class)
1613  0546  D6 08       	sub	a,0x08
1614  0548  20 0A       	jr	NZ,l_player_collision_00126
1615  054A  CD 6C 05    	call	_player_pick_mushroom
1616  054D  CD 8B 05    	call	_player_1up
1617  0550  2E 00       	ld	l,0x00
1618  0552  18 17       	jr	l_player_collision_00138
1619  0554              l_player_collision_00126:
1620  0554  2E 02       	ld	l,0x02
1621  0556  CD 00 00    	call	_zx_border_fastcall
1622  0559  2E 14       	ld	l,0x14
1623  055B  CD 6B 12    	call	_player_hit
1624  055E  2E 01       	ld	l,0x01
1625  0560  18 09       	jr	l_player_collision_00138
1626  0562              l_player_collision_00132:
1627  0562  21 00 00    	ld	hl,_sprite
1628  0565  34          	inc	(hl)
1629  0566  C3 96 04    	jp	l_player_collision_00133
1630  0569              l_player_collision_00137:
1631  0569  2E 00       	ld	l,0x00
1632  056B              l_player_collision_00138:
1633  056B  C9          	ret
1634  056C              	SECTION rodata_compiler
1635  0000              ___str_0:
1636  0000  52 4F 55 4E 44 20 43 4F 4D 50 4C 45 54 45 21 
                        	DEFM "ROUND COMPLETE!"
1637  000F  00          	DEFB 0x00
1638  0010              	SECTION code_compiler
1639  056C              ;	---------------------------------
1640  056C              ; Function player_pick_mushroom
1641  056C              ; ---------------------------------
1642  056C              _player_pick_mushroom:
1643  056C  21 00 00    	ld	hl,_ay_fx_04_magia1
1644  056F  E5          	push	hl
1645  0570  21 01 04    	ld	hl,0x0401
1646  0573  E5          	push	hl
1647  0574  CD 00 00    	call	_ay_song_play
1648  0577  21 01 00    	ld	hl,0x0001
1649  057A  CD 84 0C    	call	_player_score_add
1650  057D  CD 00 00    	call	_game_update_stats
1651  0580  2A 00 00    	ld	hl,(_sprite)
1652  0583  CD 00 00    	call	_spr_destroy
1653  0586  21 00 00    	ld	hl,_game_mush_count
1654  0589  35          	dec	(hl)
1655  058A  C9          	ret
1656  058B              	SECTION code_compiler
1657  058B              ;	---------------------------------
1658  058B              ; Function player_1up
1659  058B              ; ---------------------------------
1660  058B              _player_1up:
1661  058B  21 00 00    	ld	hl,_player_lives
1662  058E  7E          	ld	a, (hl)
1663  058F  D6 64       	sub	a,0x64
1664  0591  D0          	ret	NC
1665  0592  34          	inc	(hl)
1666  0593  CD 00 00    	call	_spr_flatten
1667  0596  21 10 00    	ld	hl,___str_1
1668  0599  E5          	push	hl
1669  059A  21 0C 0C    	ld	hl,0x0c0c
1670  059D  E5          	push	hl
1671  059E  CD 00 00    	call	_zx_print_str
1672  05A1  AF          	xor	a, a
1673  05A2  F5          	push	af
1674  05A3  33          	inc	sp
1675  05A4  21 19 00    	ld	hl,0x0019
1676  05A7  E5          	push	hl
1677  05A8  21 0C 11    	ld	hl,0x110c
1678  05AB  E5          	push	hl
1679  05AC  3E 0C       	ld	a,0x0c
1680  05AE  F5          	push	af
1681  05AF  33          	inc	sp
1682  05B0  CD 00 00    	call	_game_colour_message
1683  05B3  F1          	pop	af
1684  05B4  F1          	pop	af
1685  05B5  F1          	pop	af
1686  05B6  CD 00 00    	call	_game_update_stats
1687  05B9  CD 00 00    	call	_spr_unflatten
1688  05BC  C9          	ret
1689  05BD              	SECTION rodata_compiler
1690  0010              ___str_1:
1691  0010  31 20 55 50 21 
                        	DEFM "1 UP!"
1692  0015  00          	DEFB 0x00
1693  0016              	SECTION code_compiler
1694  05BD              ;	---------------------------------
1695  05BD              ; Function player_check_stairs_vertical
1696  05BD              ; ---------------------------------
1697  05BD              _player_check_stairs_vertical:
1698  05BD  CD 00 00    	call	___sdcc_enter_ix
1699  05C0  3B          	dec	sp
1700  05C1  4D          	ld	c, l
1701  05C2  21 07 00    	ld	hl,+(_col + 0x0007)
1702  05C5  46          	ld	b, (hl)
1703  05C6  CB 40       	bit	0, b
1704  05C8  20 2A       	jr	NZ,l_player_check_stairs_vertical_00102
1705  05CA  3A 07 00    	ld	a,(_lin + 0x0007)
1706  05CD  81          	add	a, c
1707  05CE  4F          	ld	c,a
1708  05CF  C5          	push	bc
1709  05D0  CD 00 00    	call	_spr_calc_index
1710  05D3  F1          	pop	af
1711  05D4  7D          	ld	a,l
1712  05D5  32 00 00    	ld	(_sprite_curr_index),a
1713  05D8  4F          	ld	c,a
1714  05D9  06 00       	ld	b,0x00
1715  05DB  21 00 00    	ld	hl,_scr_map
1716  05DE  09          	add	hl,bc
1717  05DF  7E          	ld	a,(hl)
1718  05E0  4F          	ld	c,a
1719  05E1  D6 44       	sub	a,0x44
1720  05E3  38 05       	jr	C,l_player_check_stairs_vertical_00110
1721  05E5  3E 47       	ld	a,0x47
1722  05E7  91          	sub	a, c
1723  05E8  30 04       	jr	NC,l_player_check_stairs_vertical_00111
1724  05EA              l_player_check_stairs_vertical_00110:
1725  05EA  1E 00       	ld	e,0x00
1726  05EC  18 02       	jr	l_player_check_stairs_vertical_00112
1727  05EE              l_player_check_stairs_vertical_00111:
1728  05EE  1E 01       	ld	e,0x01
1729  05F0              l_player_check_stairs_vertical_00112:
1730  05F0  0E 00       	ld	c,0x00
1731  05F2  18 52       	jr	l_player_check_stairs_vertical_00103
1732  05F4              l_player_check_stairs_vertical_00102:
1733  05F4  78          	ld	a, b
1734  05F5  91          	sub	a, c
1735  05F6  57          	ld	d, a
1736  05F7  3A 07 00    	ld	a,(_lin + 0x0007)
1737  05FA  81          	add	a, c
1738  05FB  47          	ld	b, a
1739  05FC  C5          	push	bc
1740  05FD  58          	ld	e,b
1741  05FE  D5          	push	de
1742  05FF  CD 00 00    	call	_spr_calc_index
1743  0602  F1          	pop	af
1744  0603  C1          	pop	bc
1745  0604  7D          	ld	a,l
1746  0605  32 00 00    	ld	(_sprite_curr_index),a
1747  0608  5F          	ld	e,a
1748  0609  16 00       	ld	d,0x00
1749  060B  21 00 00    	ld	hl,_scr_map
1750  060E  19          	add	hl,de
1751  060F  7E          	ld	a,(hl)
1752  0610  47          	ld	b,a
1753  0611  D6 44       	sub	a,0x44
1754  0613  38 05       	jr	C,l_player_check_stairs_vertical_00113
1755  0615  3E 47       	ld	a,0x47
1756  0617  90          	sub	a, b
1757  0618  30 04       	jr	NC,l_player_check_stairs_vertical_00114
1758  061A              l_player_check_stairs_vertical_00113:
1759  061A  1E 00       	ld	e,0x00
1760  061C  18 02       	jr	l_player_check_stairs_vertical_00115
1761  061E              l_player_check_stairs_vertical_00114:
1762  061E  1E 01       	ld	e,0x01
1763  0620              l_player_check_stairs_vertical_00115:
1764  0620  3A 07 00    	ld	a,(_col + 0x0007)
1765  0623  91          	sub	a, c
1766  0624  47          	ld	b, a
1767  0625  3A 07 00    	ld	a,(_lin + 0x0007)
1768  0628  81          	add	a, c
1769  0629  57          	ld	d, a
1770  062A  D5          	push	de
1771  062B  4A          	ld	c, d
1772  062C  C5          	push	bc
1773  062D  CD 00 00    	call	_spr_calc_index
1774  0630  F1          	pop	af
1775  0631  D1          	pop	de
1776  0632  7D          	ld	a,l
1777  0633  32 00 00    	ld	(_sprite_curr_index),a
1778  0636  7B          	ld	a, e
1779  0637  D6 44       	sub	a,0x44
1780  0639  38 05       	jr	C,l_player_check_stairs_vertical_00116
1781  063B  3E 47       	ld	a,0x47
1782  063D  93          	sub	a, e
1783  063E  30 04       	jr	NC,l_player_check_stairs_vertical_00117
1784  0640              l_player_check_stairs_vertical_00116:
1785  0640  0E 00       	ld	c,0x00
1786  0642  18 02       	jr	l_player_check_stairs_vertical_00118
1787  0644              l_player_check_stairs_vertical_00117:
1788  0644  0E 01       	ld	c,0x01
1789  0646              l_player_check_stairs_vertical_00118:
1790  0646              l_player_check_stairs_vertical_00103:
1791  0646  7B          	ld	a, e
1792  0647  B7          	or	a,a
1793  0648  20 03       	jr	NZ,l_player_check_stairs_vertical_00104
1794  064A  B1          	or	a,c
1795  064B  28 07       	jr	Z,l_player_check_stairs_vertical_00105
1796  064D              l_player_check_stairs_vertical_00104:
1797  064D  21 00 00    	ld	hl,_player_onstair
1798  0650  36 01       	ld	(hl),0x01
1799  0652  18 05       	jr	l_player_check_stairs_vertical_00108
1800  0654              l_player_check_stairs_vertical_00105:
1801  0654  21 00 00    	ld	hl,_player_onstair
1802  0657  36 00       	ld	(hl),0x00
1803  0659              l_player_check_stairs_vertical_00108:
1804  0659  33          	inc	sp
1805  065A  DD E1       	pop	ix
1806  065C  C9          	ret
1807  065D              	SECTION code_compiler
1808  065D              ;	---------------------------------
1809  065D              ; Function player_check_stairs
1810  065D              ; ---------------------------------
1811  065D              _player_check_stairs:
1812  065D  CD 00 00    	call	___sdcc_enter_ix
1813  0660  3B          	dec	sp
1814  0661  45          	ld	b, l
1815  0662  3A 07 00    	ld	a,(_col + 0x0007)
1816  0665  4F          	ld	c,a
1817  0666  80          	add	a, b
1818  0667  57          	ld	d, a
1819  0668  3A 07 00    	ld	a,(_lin + 0x0007)
1820  066B  C5          	push	bc
1821  066C  5F          	ld	e,a
1822  066D  D5          	push	de
1823  066E  CD 00 00    	call	_spr_calc_index
1824  0671  F1          	pop	af
1825  0672  C1          	pop	bc
1826  0673  7D          	ld	a,l
1827  0674  32 00 00    	ld	(_sprite_curr_index),a
1828  0677  5F          	ld	e,a
1829  0678  16 00       	ld	d,0x00
1830  067A  21 00 00    	ld	hl,_scr_map
1831  067D  19          	add	hl,de
1832  067E  7E          	ld	a,(hl)
1833  067F  4F          	ld	c,a
1834  0680  D6 44       	sub	a,0x44
1835  0682  38 05       	jr	C,l_player_check_stairs_00111
1836  0684  3E 47       	ld	a,0x47
1837  0686  91          	sub	a, c
1838  0687  30 04       	jr	NC,l_player_check_stairs_00112
1839  0689              l_player_check_stairs_00111:
1840  0689  0E 00       	ld	c,0x00
1841  068B  18 02       	jr	l_player_check_stairs_00113
1842  068D              l_player_check_stairs_00112:
1843  068D  0E 01       	ld	c,0x01
1844  068F              l_player_check_stairs_00113:
1845  068F  3A 07 00    	ld	a,(_col + 0x0007)
1846  0692  80          	add	a, b
1847  0693  57          	ld	d, a
1848  0694  3A 07 00    	ld	a,(_lin + 0x0007)
1849  0697  C6 0F       	add	a,0x0f
1850  0699  47          	ld	b, a
1851  069A  C5          	push	bc
1852  069B  58          	ld	e,b
1853  069C  D5          	push	de
1854  069D  CD 00 00    	call	_spr_calc_index
1855  06A0  F1          	pop	af
1856  06A1  C1          	pop	bc
1857  06A2  7D          	ld	a,l
1858  06A3  32 00 00    	ld	(_sprite_curr_index),a
1859  06A6  5F          	ld	e,a
1860  06A7  16 00       	ld	d,0x00
1861  06A9  21 00 00    	ld	hl,_scr_map
1862  06AC  19          	add	hl,de
1863  06AD  7E          	ld	a,(hl)
1864  06AE  47          	ld	b,a
1865  06AF  D6 44       	sub	a,0x44
1866  06B1  38 05       	jr	C,l_player_check_stairs_00114
1867  06B3  3E 47       	ld	a,0x47
1868  06B5  90          	sub	a, b
1869  06B6  30 04       	jr	NC,l_player_check_stairs_00115
1870  06B8              l_player_check_stairs_00114:
1871  06B8  06 00       	ld	b,0x00
1872  06BA  18 02       	jr	l_player_check_stairs_00116
1873  06BC              l_player_check_stairs_00115:
1874  06BC  06 01       	ld	b,0x01
1875  06BE              l_player_check_stairs_00116:
1876  06BE  79          	ld	a, c
1877  06BF  B7          	or	a,a
1878  06C0  20 03       	jr	NZ,l_player_check_stairs_00105
1879  06C2  B0          	or	a,b
1880  06C3  28 13       	jr	Z,l_player_check_stairs_00106
1881  06C5              l_player_check_stairs_00105:
1882  06C5  21 00 00    	ld	hl,_player_onstair
1883  06C8  7E          	ld	a, (hl)
1884  06C9  B7          	or	a, a
1885  06CA  20 1D       	jr	NZ,l_player_check_stairs_00109
1886  06CC  36 01       	ld	(hl),0x01
1887  06CE  21 72 00    	ld	hl,0x0072
1888  06D1  E5          	push	hl
1889  06D2  CD 31 07    	call	_player_tile
1890  06D5  F1          	pop	af
1891  06D6  18 11       	jr	l_player_check_stairs_00109
1892  06D8              l_player_check_stairs_00106:
1893  06D8  21 00 00    	ld	hl,_player_onstair
1894  06DB  7E          	ld	a, (hl)
1895  06DC  B7          	or	a, a
1896  06DD  28 0A       	jr	Z,l_player_check_stairs_00109
1897  06DF  36 00       	ld	(hl),0x00
1898  06E1  21 60 08    	ld	hl,0x0860
1899  06E4  E5          	push	hl
1900  06E5  CD 31 07    	call	_player_tile
1901  06E8  F1          	pop	af
1902  06E9              l_player_check_stairs_00109:
1903  06E9  33          	inc	sp
1904  06EA  DD E1       	pop	ix
1905  06EC  C9          	ret
1906  06ED              	SECTION code_compiler
1907  06ED              ;	---------------------------------
1908  06ED              ; Function player_anim_tile
1909  06ED              ; ---------------------------------
1910  06ED              _player_anim_tile:
1911  06ED  21 07 00    	ld	hl,+(_tile + 0x0007)
1912  06F0  4E          	ld	c, (hl)
1913  06F1  21 07 00    	ld	hl,+(_colint + 0x0007)
1914  06F4  46          	ld	b, (hl)
1915  06F5  79          	ld	a, c
1916  06F6  80          	add	a, b
1917  06F7  32 00 00    	ld	(_s_tile1),a
1918  06FA  3A 00 00    	ld	a,(_player_onstair)
1919  06FD  B7          	or	a, a
1920  06FE  28 17       	jr	Z,l_player_anim_tile_00109
1921  0700  21 00 00    	ld	hl,_player_anim_stair
1922  0703  34          	inc	(hl)
1923  0704  3E 01       	ld	a,0x01
1924  0706  96          	sub	a, (hl)
1925  0707  30 02       	jr	NC,l_player_anim_tile_00102
1926  0709  36 00       	ld	(hl),0x00
1927  070B              l_player_anim_tile_00102:
1928  070B  79          	ld	a, c
1929  070C  21 00 00    	ld	hl,_player_anim_stair
1930  070F  86          	add	a, (hl)
1931  0710  C6 04       	add	a,0x04
1932  0712  32 00 00    	ld	(_s_tile1),a
1933  0715  18 19       	jr	l_player_anim_tile_00111
1934  0717              l_player_anim_tile_00109:
1935  0717  3A 00 00    	ld	a,(_player_onfire)
1936  071A  B7          	or	a, a
1937  071B  28 13       	jr	Z,l_player_anim_tile_00111
1938  071D  21 00 00    	ld	hl,_s_state
1939  0720  CB 56       	bit	2, (hl)
1940  0722  28 07       	jr	Z,l_player_anim_tile_00104
1941  0724  21 00 00    	ld	hl,_s_tile1
1942  0727  36 60       	ld	(hl),0x60
1943  0729  18 05       	jr	l_player_anim_tile_00111
1944  072B              l_player_anim_tile_00104:
1945  072B  21 00 00    	ld	hl,_s_tile1
1946  072E  36 68       	ld	(hl),0x68
1947  0730              l_player_anim_tile_00111:
1948  0730  C9          	ret
1949  0731              	SECTION code_compiler
1950  0731              ;	---------------------------------
1951  0731              ; Function player_tile
1952  0731              ; ---------------------------------
1953  0731              _player_tile:
1954  0731  CD 00 00    	call	___sdcc_enter_ix
1955  0734  21 05 00    	ld	hl,0x0005
1956  0737  39          	add	hl, sp
1957  0738  EB          	ex	de,hl
1958  0739  21 04 00    	ld	hl,0x0004
1959  073C  39          	add	hl, sp
1960  073D  4D          	ld	c, l
1961  073E  44          	ld	b, h
1962  073F  D5          	push	de
1963  0740  21 00 00    	ld	hl,_sprite
1964  0743  E5          	push	hl
1965  0744  C5          	push	bc
1966  0745  CD 00 00    	call	_spr_tile_dir
1967  0748  F1          	pop	af
1968  0749  F1          	pop	af
1969  074A  F1          	pop	af
1970  074B  7D          	ld	a,l
1971  074C  32 07 00    	ld	((_tile + 0x0007)),a
1972  074F  DD E1       	pop	ix
1973  0751  C9          	ret
1974  0752              	SECTION code_compiler
1975  0752              ;	---------------------------------
1976  0752              ; Function player_check_map
1977  0752              ; ---------------------------------
1978  0752              _player_check_map:
1979  0752  21 07 00    	ld	hl,+(_col + 0x0007)
1980  0755  46          	ld	b, (hl)
1981  0756  21 07 00    	ld	hl,+(_lin + 0x0007)
1982  0759  4E          	ld	c, (hl)
1983  075A  C5          	push	bc
1984  075B  CD 00 00    	call	_spr_calc_index
1985  075E  F1          	pop	af
1986  075F  7D          	ld	a,l
1987  0760  32 00 00    	ld	(_sprite_curr_index),a
1988  0763  21 07 00    	ld	hl,+(_col + 0x0007)
1989  0766  4E          	ld	c, (hl)
1990  0767  3A 07 00    	ld	a,(_lin + 0x0007)
1991  076A  E6 0F       	and	a,0x0f
1992  076C  CB 41       	bit	0, c
1993  076E  20 17       	jr	NZ,l_player_check_map_00108
1994  0770  B7          	or	a, a
1995  0771  20 05       	jr	NZ,l_player_check_map_00102
1996  0773  CD B2 07    	call	_player_pick_item
1997  0776  18 39       	jr	l_player_check_map_00110
1998  0778              l_player_check_map_00102:
1999  0778  CD B2 07    	call	_player_pick_item
2000  077B  21 00 00    	ld	hl,_sprite_curr_index
2001  077E  7E          	ld	a, (hl)
2002  077F  C6 10       	add	a,0x10
2003  0781  77          	ld	(hl), a
2004  0782  CD B2 07    	call	_player_pick_item
2005  0785  18 2A       	jr	l_player_check_map_00110
2006  0787              l_player_check_map_00108:
2007  0787  B7          	or	a, a
2008  0788  20 0C       	jr	NZ,l_player_check_map_00105
2009  078A  CD B2 07    	call	_player_pick_item
2010  078D  21 00 00    	ld	hl,_sprite_curr_index
2011  0790  34          	inc	(hl)
2012  0791  CD B2 07    	call	_player_pick_item
2013  0794  18 1B       	jr	l_player_check_map_00110
2014  0796              l_player_check_map_00105:
2015  0796  CD B2 07    	call	_player_pick_item
2016  0799  21 00 00    	ld	hl,_sprite_curr_index
2017  079C  34          	inc	(hl)
2018  079D  CD B2 07    	call	_player_pick_item
2019  07A0  21 00 00    	ld	hl,_sprite_curr_index
2020  07A3  7E          	ld	a, (hl)
2021  07A4  C6 0F       	add	a,0x0f
2022  07A6  77          	ld	(hl), a
2023  07A7  CD B2 07    	call	_player_pick_item
2024  07AA  21 00 00    	ld	hl,_sprite_curr_index
2025  07AD  34          	inc	(hl)
2026  07AE  CD B2 07    	call	_player_pick_item
2027  07B1              l_player_check_map_00110:
2028  07B1  C9          	ret
2029  07B2              	SECTION code_compiler
2030  07B2              ;	---------------------------------
2031  07B2              ; Function player_pick_item
2032  07B2              ; ---------------------------------
2033  07B2              _player_pick_item:
2034  07B2  CD 00 00    	call	___sdcc_enter_ix
2035  07B5  3B          	dec	sp
2036  07B6  01 00 00    	ld	bc,_scr_map+0
2037  07B9  2A 00 00    	ld	hl,(_sprite_curr_index)
2038  07BC  26 00       	ld	h,0x00
2039  07BE  09          	add	hl,bc
2040  07BF  7E          	ld	a,(hl)
2041  07C0  DD 77 FF    	ld	(ix-1),a
2042  07C3  D6 24       	sub	a,0x24
2043  07C5  DA BA 09    	jp	C, l_player_pick_item_00131
2044  07C8  3E 2F       	ld	a,0x2f
2045  07CA  DD 96 FF    	sub	a,(ix-1)
2046  07CD  DA BA 09    	jp	C, l_player_pick_item_00131
2047  07D0  CD 00 00    	call	_ay_reset
2048  07D3  79          	ld	a, c
2049  07D4  21 00 00    	ld	hl,_sprite_curr_index
2050  07D7  86          	add	a, (hl)
2051  07D8  4F          	ld	c, a
2052  07D9  78          	ld	a, b
2053  07DA  CE 00       	adc	a,0x00
2054  07DC  47          	ld	b, a
2055  07DD  5E          	ld	e, (hl)
2056  07DE  16 00       	ld	d,0x00
2057  07E0  C5          	push	bc
2058  07E1  EB          	ex	de,hl
2059  07E2  CD 00 00    	call	_game_match_back
2060  07E5  C1          	pop	bc
2061  07E6  7D          	ld	a,l
2062  07E7  02          	ld	(bc), a
2063  07E8  2A 00 00    	ld	hl,(_sprite_curr_index)
2064  07EB  26 00       	ld	h,0x00
2065  07ED  CD 00 00    	call	_game_obj_set
2066  07F0  3A 00 00    	ld	a,(_sprite_curr_index)
2067  07F3  07          	rlca
2068  07F4  07          	rlca
2069  07F5  07          	rlca
2070  07F6  07          	rlca
2071  07F7  E6 0F       	and	a,0x0f
2072  07F9  07          	rlca
2073  07FA  07          	rlca
2074  07FB  07          	rlca
2075  07FC  07          	rlca
2076  07FD  E6 F0       	and	a,0xf0
2077  07FF  32 00 00    	ld	(_s_lin1),a
2078  0802  3A 00 00    	ld	a,(_sprite_curr_index)
2079  0805  E6 0F       	and	a,0x0f
2080  0807  87          	add	a, a
2081  0808  32 00 00    	ld	(_s_col1),a
2082  080B  21 00 00    	ld	hl,0x0000
2083  080E  E5          	push	hl
2084  080F  21 84 03    	ld	hl,0x0384
2085  0812  E5          	push	hl
2086  0813  F5          	push	af
2087  0814  33          	inc	sp
2088  0815  3A 00 00    	ld	a,(_s_lin1)
2089  0818  F5          	push	af
2090  0819  33          	inc	sp
2091  081A  CD 00 00    	call	_spr_add_anim
2092  081D  F1          	pop	af
2093  081E  F1          	pop	af
2094  081F  F1          	pop	af
2095  0820  DD 7E FF    	ld	a,(ix-1)
2096  0823  D6 24       	sub	a,0x24
2097  0825  DA BA 09    	jp	C, l_player_pick_item_00131
2098  0828  3E 2F       	ld	a,0x2f
2099  082A  DD 96 FF    	sub	a,(ix-1)
2100  082D  DA BA 09    	jp	C, l_player_pick_item_00131
2101  0830  DD 7E FF    	ld	a,(ix-1)
2102  0833  C6 DC       	add	a,0xdc
2103  0835  4F          	ld	c, a
2104  0836  06 00       	ld	b,0x00
2105  0838  21 3F 08    	ld	hl,l_player_pick_item_00177
2106  083B  09          	add	hl, bc
2107  083C  09          	add	hl, bc
2108  083D  09          	add	hl, bc
2109  083E  E9          	jp	(hl)
2110  083F              l_player_pick_item_00177:
2111  083F  C3 63 08    	jp	l_player_pick_item_00101
2112  0842  C3 79 08    	jp	l_player_pick_item_00102
2113  0845  C3 8F 08    	jp	l_player_pick_item_00103
2114  0848  C3 A5 08    	jp	l_player_pick_item_00104
2115  084B  C3 BB 08    	jp	l_player_pick_item_00105
2116  084E  C3 F8 08    	jp	l_player_pick_item_00109
2117  0851  C3 1A 09    	jp	l_player_pick_item_00112
2118  0854  C3 3C 09    	jp	l_player_pick_item_00115
2119  0857  C3 5C 09    	jp	l_player_pick_item_00118
2120  085A  C3 7C 09    	jp	l_player_pick_item_00121
2121  085D  C3 9C 09    	jp	l_player_pick_item_00124
2122  0860  C3 E4 08    	jp	l_player_pick_item_00108
2123  0863              l_player_pick_item_00101:
2124  0863  21 00 00    	ld	hl,_ay_fx_06_efecto
2125  0866  E5          	push	hl
2126  0867  21 01 06    	ld	hl,0x0601
2127  086A  E5          	push	hl
2128  086B  CD 00 00    	call	_ay_song_play
2129  086E  21 00 00    	ld	hl,_player_keys
2130  0871  36 01       	ld	(hl),0x01
2131  0873  CD 00 00    	call	_game_update_stats
2132  0876  C3 BA 09    	jp	l_player_pick_item_00131
2133  0879              l_player_pick_item_00102:
2134  0879  21 00 00    	ld	hl,_ay_fx_06_efecto
2135  087C  E5          	push	hl
2136  087D  21 01 06    	ld	hl,0x0601
2137  0880  E5          	push	hl
2138  0881  CD 00 00    	call	_ay_song_play
2139  0884  21 01 00    	ld	hl, +(_player_keys + 0x0001)
2140  0887  36 01       	ld	(hl),0x01
2141  0889  CD 00 00    	call	_game_update_stats
2142  088C  C3 BA 09    	jp	l_player_pick_item_00131
2143  088F              l_player_pick_item_00103:
2144  088F  21 00 00    	ld	hl,_ay_fx_06_efecto
2145  0892  E5          	push	hl
2146  0893  21 01 06    	ld	hl,0x0601
2147  0896  E5          	push	hl
2148  0897  CD 00 00    	call	_ay_song_play
2149  089A  21 02 00    	ld	hl, +(_player_keys + 0x0002)
2150  089D  36 01       	ld	(hl),0x01
2151  089F  CD 00 00    	call	_game_update_stats
2152  08A2  C3 BA 09    	jp	l_player_pick_item_00131
2153  08A5              l_player_pick_item_00104:
2154  08A5  21 00 00    	ld	hl,_ay_fx_06_efecto
2155  08A8  E5          	push	hl
2156  08A9  21 01 06    	ld	hl,0x0601
2157  08AC  E5          	push	hl
2158  08AD  CD 00 00    	call	_ay_song_play
2159  08B0  21 03 00    	ld	hl, +(_player_keys + 0x0003)
2160  08B3  36 01       	ld	(hl),0x01
2161  08B5  CD 00 00    	call	_game_update_stats
2162  08B8  C3 BA 09    	jp	l_player_pick_item_00131
2163  08BB              l_player_pick_item_00105:
2164  08BB  21 00 00    	ld	hl,_ay_fx_04_coin
2165  08BE  E5          	push	hl
2166  08BF  21 01 04    	ld	hl,0x0401
2167  08C2  E5          	push	hl
2168  08C3  CD 00 00    	call	_ay_song_play
2169  08C6  21 01 00    	ld	hl,0x0001
2170  08C9  CD 84 0C    	call	_player_score_add
2171  08CC  21 00 00    	ld	hl,_player_coins
2172  08CF  7E          	ld	a,(hl)
2173  08D0  3C          	inc	a
2174  08D1  77          	ld	(hl),a
2175  08D2  D6 64       	sub	a,0x64
2176  08D4  20 08       	jr	NZ,l_player_pick_item_00107
2177  08D6  CD 8B 05    	call	_player_1up
2178  08D9  21 00 00    	ld	hl,_player_coins
2179  08DC  36 00       	ld	(hl),0x00
2180  08DE              l_player_pick_item_00107:
2181  08DE  CD 00 00    	call	_game_update_stats
2182  08E1  C3 BA 09    	jp	l_player_pick_item_00131
2183  08E4              l_player_pick_item_00108:
2184  08E4  21 00 00    	ld	hl,_ay_fx_04_magia1
2185  08E7  E5          	push	hl
2186  08E8  21 01 04    	ld	hl,0x0401
2187  08EB  E5          	push	hl
2188  08EC  CD 00 00    	call	_ay_song_play
2189  08EF  21 0A 00    	ld	hl,0x000a
2190  08F2  CD 84 0C    	call	_player_score_add
2191  08F5  C3 BA 09    	jp	l_player_pick_item_00131
2192  08F8              l_player_pick_item_00109:
2193  08F8  21 00 00    	ld	hl,_ay_fx_06_efecto
2194  08FB  E5          	push	hl
2195  08FC  21 01 06    	ld	hl,0x0601
2196  08FF  E5          	push	hl
2197  0900  CD 00 00    	call	_ay_song_play
2198  0903  21 00 00    	ld	hl,_player_str
2199  0906  34          	inc	(hl)
2200  0907  21 00 00    	ld	hl,_player_max_vita
2201  090A  7E          	ld	a, (hl)
2202  090B  D6 C8       	sub	a,0xc8
2203  090D  D2 BA 09    	jp	NC, l_player_pick_item_00131
2204  0910  7E          	ld	a, (hl)
2205  0911  C6 0A       	add	a,0x0a
2206  0913  77          	ld	(hl), a
2207  0914  CD 00 00    	call	_game_update_stats
2208  0917  C3 BA 09    	jp	l_player_pick_item_00131
2209  091A              l_player_pick_item_00112:
2210  091A  21 00 00    	ld	hl,_ay_fx_06_efecto
2211  091D  E5          	push	hl
2212  091E  21 01 06    	ld	hl,0x0601
2213  0921  E5          	push	hl
2214  0922  CD 00 00    	call	_ay_song_play
2215  0925  21 00 00    	ld	hl,_player_str
2216  0928  34          	inc	(hl)
2217  0929  21 00 00    	ld	hl,_player_max_vita
2218  092C  7E          	ld	a, (hl)
2219  092D  D6 C8       	sub	a,0xc8
2220  092F  D2 BA 09    	jp	NC, l_player_pick_item_00131
2221  0932  7E          	ld	a, (hl)
2222  0933  C6 0A       	add	a,0x0a
2223  0935  77          	ld	(hl), a
2224  0936  CD 00 00    	call	_game_update_stats
2225  0939  C3 BA 09    	jp	l_player_pick_item_00131
2226  093C              l_player_pick_item_00115:
2227  093C  21 00 00    	ld	hl,_ay_fx_06_efecto
2228  093F  E5          	push	hl
2229  0940  21 01 06    	ld	hl,0x0601
2230  0943  E5          	push	hl
2231  0944  CD 00 00    	call	_ay_song_play
2232  0947  21 00 00    	ld	hl,_player_str
2233  094A  34          	inc	(hl)
2234  094B  21 00 00    	ld	hl,_player_max_vita
2235  094E  7E          	ld	a, (hl)
2236  094F  D6 C8       	sub	a,0xc8
2237  0951  30 67       	jr	NC,l_player_pick_item_00131
2238  0953  7E          	ld	a, (hl)
2239  0954  C6 0A       	add	a,0x0a
2240  0956  77          	ld	(hl), a
2241  0957  CD 00 00    	call	_game_update_stats
2242  095A  18 5E       	jr	l_player_pick_item_00131
2243  095C              l_player_pick_item_00118:
2244  095C  21 00 00    	ld	hl,_ay_fx_06_efecto
2245  095F  E5          	push	hl
2246  0960  21 01 06    	ld	hl,0x0601
2247  0963  E5          	push	hl
2248  0964  CD 00 00    	call	_ay_song_play
2249  0967  21 00 00    	ld	hl,_player_int
2250  096A  34          	inc	(hl)
2251  096B  21 00 00    	ld	hl,_player_max_mana
2252  096E  7E          	ld	a, (hl)
2253  096F  D6 C8       	sub	a,0xc8
2254  0971  30 47       	jr	NC,l_player_pick_item_00131
2255  0973  7E          	ld	a, (hl)
2256  0974  C6 0A       	add	a,0x0a
2257  0976  77          	ld	(hl), a
2258  0977  CD 00 00    	call	_game_update_stats
2259  097A  18 3E       	jr	l_player_pick_item_00131
2260  097C              l_player_pick_item_00121:
2261  097C  21 00 00    	ld	hl,_ay_fx_06_efecto
2262  097F  E5          	push	hl
2263  0980  21 01 06    	ld	hl,0x0601
2264  0983  E5          	push	hl
2265  0984  CD 00 00    	call	_ay_song_play
2266  0987  21 00 00    	ld	hl,_player_int
2267  098A  34          	inc	(hl)
2268  098B  21 00 00    	ld	hl,_player_max_mana
2269  098E  7E          	ld	a, (hl)
2270  098F  D6 C8       	sub	a,0xc8
2271  0991  30 27       	jr	NC,l_player_pick_item_00131
2272  0993  7E          	ld	a, (hl)
2273  0994  C6 0A       	add	a,0x0a
2274  0996  77          	ld	(hl), a
2275  0997  CD 00 00    	call	_game_update_stats
2276  099A  18 1E       	jr	l_player_pick_item_00131
2277  099C              l_player_pick_item_00124:
2278  099C  21 00 00    	ld	hl,_ay_fx_06_efecto
2279  099F  E5          	push	hl
2280  09A0  21 01 06    	ld	hl,0x0601
2281  09A3  E5          	push	hl
2282  09A4  CD 00 00    	call	_ay_song_play
2283  09A7  21 00 00    	ld	hl,_player_int
2284  09AA  34          	inc	(hl)
2285  09AB  21 00 00    	ld	hl,_player_max_mana
2286  09AE  7E          	ld	a, (hl)
2287  09AF  D6 C8       	sub	a,0xc8
2288  09B1  30 07       	jr	NC,l_player_pick_item_00131
2289  09B3  7E          	ld	a, (hl)
2290  09B4  C6 0A       	add	a,0x0a
2291  09B6  77          	ld	(hl), a
2292  09B7  CD 00 00    	call	_game_update_stats
2293  09BA              l_player_pick_item_00131:
2294  09BA  33          	inc	sp
2295  09BB  DD E1       	pop	ix
2296  09BD  C9          	ret
2297  09BE              	SECTION code_compiler
2298  09BE              ;	---------------------------------
2299  09BE              ; Function player_hit_platform
2300  09BE              ; ---------------------------------
2301  09BE              _player_hit_platform:
2302  09BE  CD 00 00    	call	___sdcc_enter_ix
2303  09C1  3B          	dec	sp
2304  09C2  3A 00 00    	ld	a,(_player_hit_lin)
2305  09C5  B7          	or	a, a
2306  09C6  C2 4F 0C    	jp	NZ, l_player_hit_platform_00145
2307  09C9  21 07 00    	ld	hl,+(_lin + 0x0007)
2308  09CC  4E          	ld	c, (hl)
2309  09CD  3E 10       	ld	a,0x10
2310  09CF  91          	sub	a, c
2311  09D0  D2 4F 0C    	jp	NC, l_player_hit_platform_00145
2312  09D3  01 00 00    	ld	bc,_scr_map
2313  09D6  2A 00 00    	ld	hl,(_index1)
2314  09D9  09          	add	hl,bc
2315  09DA  7E          	ld	a,(hl)
2316  09DB  D6 45       	sub	a,0x45
2317  09DD  DA 4F 0C    	jp	C, l_player_hit_platform_00145
2318  09E0  2A 00 00    	ld	hl,(_curr_time)
2319  09E3  22 0E 00    	ld	(_spr_timer + 0x000e),hl
2320  09E6  3A 07 00    	ld	a,(_lin + 0x0007)
2321  09E9  06 00       	ld	b,0x00
2322  09EB  C6 F8       	add	a,0xf8
2323  09ED  4F          	ld	c, a
2324  09EE  78          	ld	a, b
2325  09EF  CE FF       	adc	a,0xff
2326  09F1  5F          	ld	e, a
2327  09F2  06 04       	ld	b,0x04
2328  09F4              l_player_hit_platform_00252:
2329  09F4  CB 2B       	sra	e
2330  09F6  CB 19       	rr	c
2331  09F8  10 FA       	djnz	l_player_hit_platform_00252
2332  09FA  79          	ld	a, c
2333  09FB  07          	rlca
2334  09FC  07          	rlca
2335  09FD  07          	rlca
2336  09FE  07          	rlca
2337  09FF  E6 F0       	and	a,0xf0
2338  0A01  C6 08       	add	a,0x08
2339  0A03  32 00 00    	ld	(_player_hit_lin),a
2340  0A06  21 07 00    	ld	hl,+(_col + 0x0007)
2341  0A09  4E          	ld	c, (hl)
2342  0A0A  CB 41       	bit	0, c
2343  0A0C  20 06       	jr	NZ,l_player_hit_platform_00111
2344  0A0E  21 00 00    	ld	hl,_player_hit_col
2345  0A11  71          	ld	(hl), c
2346  0A12  18 2D       	jr	l_player_hit_platform_00112
2347  0A14              l_player_hit_platform_00111:
2348  0A14  21 07 00    	ld	hl,+(_state + 0x0007)
2349  0A17  5E          	ld	e, (hl)
2350  0A18  41          	ld	b, c
2351  0A19  04          	inc	b
2352  0A1A  0D          	dec	c
2353  0A1B  CB 5B       	bit	3, e
2354  0A1D  28 12       	jr	Z,l_player_hit_platform_00108
2355  0A1F  3A 00 00    	ld	a,(_g_player_hit_right)
2356  0A22  B7          	or	a, a
2357  0A23  28 06       	jr	Z,l_player_hit_platform_00102
2358  0A25  21 00 00    	ld	hl,_player_hit_col
2359  0A28  70          	ld	(hl), b
2360  0A29  18 16       	jr	l_player_hit_platform_00112
2361  0A2B              l_player_hit_platform_00102:
2362  0A2B  21 00 00    	ld	hl,_player_hit_col
2363  0A2E  71          	ld	(hl), c
2364  0A2F  18 10       	jr	l_player_hit_platform_00112
2365  0A31              l_player_hit_platform_00108:
2366  0A31  3A 00 00    	ld	a,(_g_player_hit_left)
2367  0A34  B7          	or	a, a
2368  0A35  28 06       	jr	Z,l_player_hit_platform_00105
2369  0A37  21 00 00    	ld	hl,_player_hit_col
2370  0A3A  71          	ld	(hl), c
2371  0A3B  18 04       	jr	l_player_hit_platform_00112
2372  0A3D              l_player_hit_platform_00105:
2373  0A3D  21 00 00    	ld	hl,_player_hit_col
2374  0A40  70          	ld	(hl), b
2375  0A41              l_player_hit_platform_00112:
2376  0A41  2A 00 00    	ld	hl,(_index1)
2377  0A44  01 00 00    	ld	bc,_scr_map
2378  0A47  09          	add	hl,bc
2379  0A48  7E          	ld	a,(hl)
2380  0A49  FE 4D       	cp	a,0x4d
2381  0A4B  20 4A       	jr	NZ,l_player_hit_platform_00114
2382  0A4D  E5          	push	hl
2383  0A4E  2A 00 00    	ld	hl,(_index1)
2384  0A51  CD 00 00    	call	_game_match_back
2385  0A54  C1          	pop	bc
2386  0A55  7D          	ld	a,l
2387  0A56  02          	ld	(bc), a
2388  0A57  2A 00 00    	ld	hl,(_index1)
2389  0A5A  CD 00 00    	call	_game_obj_set
2390  0A5D  21 00 00    	ld	hl,_ay_fx_04_explosion
2391  0A60  E5          	push	hl
2392  0A61  21 01 04    	ld	hl,0x0401
2393  0A64  E5          	push	hl
2394  0A65  CD 00 00    	call	_ay_song_play
2395  0A68  21 00 00    	ld	hl,_index1
2396  0A6B  7E          	ld	a, (hl)
2397  0A6C  E6 0F       	and	a,0x0f
2398  0A6E  87          	add	a, a
2399  0A6F  57          	ld	d, a
2400  0A70  4E          	ld	c, (hl)
2401  0A71  23          	inc	hl
2402  0A72  5E          	ld	e, (hl)
2403  0A73  06 04       	ld	b,0x04
2404  0A75  79          	ld	a,c
2405  0A76              l_player_hit_platform_00258:
2406  0A76  CB 3B       	srl	e
2407  0A78  1F          	rra
2408  0A79  10 FB       	djnz	l_player_hit_platform_00258
2409  0A7B  07          	rlca
2410  0A7C  07          	rlca
2411  0A7D  07          	rlca
2412  0A7E  07          	rlca
2413  0A7F  E6 F0       	and	a,0xf0
2414  0A81  47          	ld	b, a
2415  0A82  21 00 00    	ld	hl,0x0000
2416  0A85  E5          	push	hl
2417  0A86  21 87 03    	ld	hl,0x0387
2418  0A89  E5          	push	hl
2419  0A8A  58          	ld	e,b
2420  0A8B  D5          	push	de
2421  0A8C  CD 00 00    	call	_spr_add_anim
2422  0A8F  F1          	pop	af
2423  0A90  F1          	pop	af
2424  0A91  F1          	pop	af
2425  0A92  2E 01       	ld	l,0x01
2426  0A94  C3 51 0C    	jp	l_player_hit_platform_00148
2427  0A97              l_player_hit_platform_00114:
2428  0A97  FE 5A       	cp	a,0x5a
2429  0A99  28 05       	jr	Z,l_player_hit_platform_00141
2430  0A9B  D6 5D       	sub	a,0x5d
2431  0A9D  C2 3B 0C    	jp	NZ,l_player_hit_platform_00142
2432  0AA0              l_player_hit_platform_00141:
2433  0AA0  3A 00 00    	ld	a,(_game_boss)
2434  0AA3  B7          	or	a, a
2435  0AA4  28 0B       	jr	Z,l_player_hit_platform_00174
2436  0AA6  3A 00 00    	ld	a,(_game_mush_count)
2437  0AA9  B7          	or	a, a
2438  0AAA  28 05       	jr	Z,l_player_hit_platform_00174
2439  0AAC  2E 00       	ld	l,0x00
2440  0AAE  C3 51 0C    	jp	l_player_hit_platform_00148
2441  0AB1              l_player_hit_platform_00174:
2442  0AB1  DD 36 FF 00 	ld	(ix-1),0x00
2443  0AB5              l_player_hit_platform_00138:
2444  0AB5  DD 7E FF    	ld	a,(ix-1)
2445  0AB8  D6 07       	sub	a,0x07
2446  0ABA  D2 3B 0C    	jp	NC, l_player_hit_platform_00142
2447  0ABD  3E 00       	ld	a, +((_mush_index) & 0xFF)
2448  0ABF  DD 86 FF    	add	a,(ix-1)
2449  0AC2  6F          	ld	l, a
2450  0AC3  3E 00       	ld	a, +((_mush_index) / 256)
2451  0AC5  CE 00       	adc	a,0x00
2452  0AC7  67          	ld	h, a
2453  0AC8  4E          	ld	c, (hl)
2454  0AC9  06 00       	ld	b,0x00
2455  0ACB  2A 00 00    	ld	hl,(_index1)
2456  0ACE  AF          	xor	a,a
2457  0ACF  ED 42       	sbc	hl,bc
2458  0AD1  C2 35 0C    	jp	NZ,l_player_hit_platform_00137
2459  0AD4  3A 07 00    	ld	a,(_lin + 0x0007)
2460  0AD7  07          	rlca
2461  0AD8  07          	rlca
2462  0AD9  07          	rlca
2463  0ADA  07          	rlca
2464  0ADB  E6 0F       	and	a,0x0f
2465  0ADD  07          	rlca
2466  0ADE  07          	rlca
2467  0ADF  07          	rlca
2468  0AE0  07          	rlca
2469  0AE1  E6 F0       	and	a,0xf0
2470  0AE3  C6 E0       	add	a,0xe0
2471  0AE5  32 00 00    	ld	(_s_lin1),a
2472  0AE8  3A 07 00    	ld	a,(_col + 0x0007)
2473  0AEB  CB 3F       	srl	a
2474  0AED  87          	add	a, a
2475  0AEE  32 00 00    	ld	(_s_col1),a
2476  0AF1  0E 00       	ld	c,0x00
2477  0AF3              l_player_hit_platform_00120:
2478  0AF3  79          	ld	a, c
2479  0AF4  D6 07       	sub	a,0x07
2480  0AF6  30 18       	jr	NC,l_player_hit_platform_00122
2481  0AF8  06 00       	ld	b,0x00
2482  0AFA  21 00 00    	ld	hl,_mush_index
2483  0AFD  09          	add	hl, bc
2484  0AFE  46          	ld	b, (hl)
2485  0AFF  1E 00       	ld	e,0x00
2486  0B01  21 00 00    	ld	hl,_index1
2487  0B04  7E          	ld	a, (hl)
2488  0B05  90          	sub	a, b
2489  0B06  20 05       	jr	NZ,l_player_hit_platform_00264
2490  0B08  23          	inc	hl
2491  0B09  7E          	ld	a, (hl)
2492  0B0A  93          	sub	a, e
2493  0B0B  28 03       	jr	Z,l_player_hit_platform_00122
2494  0B0D              l_player_hit_platform_00264:
2495  0B0D  0C          	inc	c
2496  0B0E  18 E3       	jr	l_player_hit_platform_00120
2497  0B10              l_player_hit_platform_00122:
2498  0B10  06 00       	ld	b,0x00
2499  0B12  21 00 00    	ld	hl,_mush_class
2500  0B15  09          	add	hl, bc
2501  0B16  7E          	ld	a, (hl)
2502  0B17  FE 79       	cp	a,0x79
2503  0B19  28 18       	jr	Z,l_player_hit_platform_00123
2504  0B1B  FE 7A       	cp	a,0x7a
2505  0B1D  28 2F       	jr	Z,l_player_hit_platform_00124
2506  0B1F  FE 7B       	cp	a,0x7b
2507  0B21  28 5F       	jr	Z,l_player_hit_platform_00126
2508  0B23  FE 7C       	cp	a,0x7c
2509  0B25  28 41       	jr	Z,l_player_hit_platform_00125
2510  0B27  FE 7D       	cp	a,0x7d
2511  0B29  CA B6 0B    	jp	Z,l_player_hit_platform_00128
2512  0B2C  D6 7E       	sub	a,0x7e
2513  0B2E  28 6C       	jr	Z,l_player_hit_platform_00127
2514  0B30  C3 CE 0B    	jp	l_player_hit_platform_00129
2515  0B33              l_player_hit_platform_00123:
2516  0B33  2E 02       	ld	l,0x02
2517  0B35  CD 00 00    	call	_zx_border_fastcall
2518  0B38  3A 00 00    	ld	a,(_s_col1)
2519  0B3B  21 06 FF    	ld	hl,0xff06
2520  0B3E  E5          	push	hl
2521  0B3F  F5          	push	af
2522  0B40  33          	inc	sp
2523  0B41  3A 00 00    	ld	a,(_s_lin1)
2524  0B44  F5          	push	af
2525  0B45  33          	inc	sp
2526  0B46  CD 00 00    	call	_enemy_init
2527  0B49  F1          	pop	af
2528  0B4A  F1          	pop	af
2529  0B4B  C3 CE 0B    	jp	l_player_hit_platform_00129
2530  0B4E              l_player_hit_platform_00124:
2531  0B4E  2E 02       	ld	l,0x02
2532  0B50  CD 00 00    	call	_zx_border_fastcall
2533  0B53  3A 00 00    	ld	a,(_s_col1)
2534  0B56  21 06 01    	ld	hl,0x0106
2535  0B59  E5          	push	hl
2536  0B5A  F5          	push	af
2537  0B5B  33          	inc	sp
2538  0B5C  3A 00 00    	ld	a,(_s_lin1)
2539  0B5F  F5          	push	af
2540  0B60  33          	inc	sp
2541  0B61  CD 00 00    	call	_enemy_init
2542  0B64  F1          	pop	af
2543  0B65  F1          	pop	af
2544  0B66  18 66       	jr	l_player_hit_platform_00129
2545  0B68              l_player_hit_platform_00125:
2546  0B68  2E 01       	ld	l,0x01
2547  0B6A  CD 00 00    	call	_zx_border_fastcall
2548  0B6D  3A 00 00    	ld	a,(_s_col1)
2549  0B70  21 07 01    	ld	hl,0x0107
2550  0B73  E5          	push	hl
2551  0B74  F5          	push	af
2552  0B75  33          	inc	sp
2553  0B76  3A 00 00    	ld	a,(_s_lin1)
2554  0B79  F5          	push	af
2555  0B7A  33          	inc	sp
2556  0B7B  CD 00 00    	call	_enemy_init
2557  0B7E  F1          	pop	af
2558  0B7F  F1          	pop	af
2559  0B80  18 4C       	jr	l_player_hit_platform_00129
2560  0B82              l_player_hit_platform_00126:
2561  0B82  2E 01       	ld	l,0x01
2562  0B84  CD 00 00    	call	_zx_border_fastcall
2563  0B87  3A 00 00    	ld	a,(_s_col1)
2564  0B8A  21 07 FF    	ld	hl,0xff07
2565  0B8D  E5          	push	hl
2566  0B8E  F5          	push	af
2567  0B8F  33          	inc	sp
2568  0B90  3A 00 00    	ld	a,(_s_lin1)
2569  0B93  F5          	push	af
2570  0B94  33          	inc	sp
2571  0B95  CD 00 00    	call	_enemy_init
2572  0B98  F1          	pop	af
2573  0B99  F1          	pop	af
2574  0B9A  18 32       	jr	l_player_hit_platform_00129
2575  0B9C              l_player_hit_platform_00127:
2576  0B9C  2E 04       	ld	l,0x04
2577  0B9E  CD 00 00    	call	_zx_border_fastcall
2578  0BA1  3A 00 00    	ld	a,(_s_col1)
2579  0BA4  21 08 01    	ld	hl,0x0108
2580  0BA7  E5          	push	hl
2581  0BA8  F5          	push	af
2582  0BA9  33          	inc	sp
2583  0BAA  3A 00 00    	ld	a,(_s_lin1)
2584  0BAD  F5          	push	af
2585  0BAE  33          	inc	sp
2586  0BAF  CD 00 00    	call	_enemy_init
2587  0BB2  F1          	pop	af
2588  0BB3  F1          	pop	af
2589  0BB4  18 18       	jr	l_player_hit_platform_00129
2590  0BB6              l_player_hit_platform_00128:
2591  0BB6  2E 04       	ld	l,0x04
2592  0BB8  CD 00 00    	call	_zx_border_fastcall
2593  0BBB  3A 00 00    	ld	a,(_s_col1)
2594  0BBE  21 08 FF    	ld	hl,0xff08
2595  0BC1  E5          	push	hl
2596  0BC2  F5          	push	af
2597  0BC3  33          	inc	sp
2598  0BC4  3A 00 00    	ld	a,(_s_lin1)
2599  0BC7  F5          	push	af
2600  0BC8  33          	inc	sp
2601  0BC9  CD 00 00    	call	_enemy_init
2602  0BCC  F1          	pop	af
2603  0BCD  F1          	pop	af
2604  0BCE              l_player_hit_platform_00129:
2605  0BCE  21 00 00    	ld	hl,_game_mush_count
2606  0BD1  34          	inc	(hl)
2607  0BD2  3A 00 00    	ld	a,(_game_boss)
2608  0BD5  B7          	or	a, a
2609  0BD6  20 5D       	jr	NZ,l_player_hit_platform_00137
2610  0BD8  3A 00 00    	ld	a,(_index1)
2611  0BDB  C6 F0       	add	a,0xf0
2612  0BDD  32 00 00    	ld	(_index0),a
2613  0BE0  3A 01 00    	ld	a,(_index1 + 1)
2614  0BE3  CE FF       	adc	a,0xff
2615  0BE5  21 01 00    	ld	hl,_index0 + 1
2616  0BE8  77          	ld	(hl), a
2617  0BE9  3E 00       	ld	a, +((_scr_map) & 0xFF)
2618  0BEB  2B          	dec	hl
2619  0BEC  86          	add	a, (hl)
2620  0BED  4F          	ld	c, a
2621  0BEE  3E 00       	ld	a, +((_scr_map) / 256)
2622  0BF0  23          	inc	hl
2623  0BF1  8E          	adc	a, (hl)
2624  0BF2  47          	ld	b, a
2625  0BF3  C5          	push	bc
2626  0BF4  2B          	dec	hl
2627  0BF5  7E          	ld	a, (hl)
2628  0BF6  23          	inc	hl
2629  0BF7  66          	ld	h, (hl)
2630  0BF8  6F          	ld	l, a
2631  0BF9  CD 00 00    	call	_game_match_back
2632  0BFC  C1          	pop	bc
2633  0BFD  7D          	ld	a,l
2634  0BFE  02          	ld	(bc), a
2635  0BFF  01 00 00    	ld	bc,_scr_map
2636  0C02  2A 00 00    	ld	hl,(_index1)
2637  0C05  09          	add	hl,bc
2638  0C06  7E          	ld	a,(hl)
2639  0C07  FE 5A       	cp	a,0x5a
2640  0C09  4D          	ld	c,l
2641  0C0A  44          	ld	b,h
2642  0C0B  28 04       	jr	Z,l_player_hit_platform_00130
2643  0C0D  D6 5D       	sub	a,0x5d
2644  0C0F  20 05       	jr	NZ,l_player_hit_platform_00131
2645  0C11              l_player_hit_platform_00130:
2646  0C11  3E 4F       	ld	a,0x4f
2647  0C13  02          	ld	(bc), a
2648  0C14  18 03       	jr	l_player_hit_platform_00132
2649  0C16              l_player_hit_platform_00131:
2650  0C16  3E 54       	ld	a,0x54
2651  0C18  02          	ld	(bc), a
2652  0C19              l_player_hit_platform_00132:
2653  0C19  2A 00 00    	ld	hl,(_index1)
2654  0C1C  01 F0 FF    	ld	bc,0xfff0
2655  0C1F  09          	add	hl,bc
2656  0C20  CD 00 00    	call	_game_obj_set
2657  0C23  3A 00 00    	ld	a,(_s_lin1)
2658  0C26  C6 10       	add	a,0x10
2659  0C28  4F          	ld	c, a
2660  0C29  3A 00 00    	ld	a, (_s_col1)
2661  0C2C  47          	ld	b,a
2662  0C2D  C5          	push	bc
2663  0C2E  3E 4F       	ld	a,0x4f
2664  0C30  F5          	push	af
2665  0C31  33          	inc	sp
2666  0C32  CD 00 00    	call	_NIRVANAP_drawT_callee
2667  0C35              l_player_hit_platform_00137:
2668  0C35  DD 34 FF    	inc	(ix-1)
2669  0C38  C3 B5 0A    	jp	l_player_hit_platform_00138
2670  0C3B              l_player_hit_platform_00142:
2671  0C3B  21 00 00    	ld	hl,_ay_fx_04_golpe
2672  0C3E  E5          	push	hl
2673  0C3F  21 01 04    	ld	hl,0x0401
2674  0C42  E5          	push	hl
2675  0C43  CD 00 00    	call	_ay_song_play
2676  0C46  2E 01       	ld	l,0x01
2677  0C48  CD 00 00    	call	_spr_brick_anim
2678  0C4B  2E 01       	ld	l,0x01
2679  0C4D  18 02       	jr	l_player_hit_platform_00148
2680  0C4F              l_player_hit_platform_00145:
2681  0C4F  2E 00       	ld	l,0x00
2682  0C51              l_player_hit_platform_00148:
2683  0C51  33          	inc	sp
2684  0C52  DD E1       	pop	ix
2685  0C54  C9          	ret
2686  0C55              	SECTION code_compiler
2687  0C55              ;	---------------------------------
2688  0C55              ; Function player_hit_platform_clear
2689  0C55              ; ---------------------------------
2690  0C55              _player_hit_platform_clear:
2691  0C55  3E 04       	ld	a,0x04
2692  0C57  F5          	push	af
2693  0C58  33          	inc	sp
2694  0C59  21 0E 00    	ld	hl, +(_spr_timer + 0x000e)
2695  0C5C  E5          	push	hl
2696  0C5D  CD 00 00    	call	_game_check_time
2697  0C60  F1          	pop	af
2698  0C61  33          	inc	sp
2699  0C62  7D          	ld	a, l
2700  0C63  B7          	or	a, a
2701  0C64  C8          	ret	Z
2702  0C65  2A FF FF    	ld	hl,(_player_hit_col - 1)
2703  0C68  3A 00 00    	ld	a,(_player_hit_lin)
2704  0C6B  6F          	ld	l,a
2705  0C6C  E5          	push	hl
2706  0C6D  CD 00 00    	call	_spr_calc_index
2707  0C70  F1          	pop	af
2708  0C71  22 00 00    	ld	(_index1),hl
2709  0C74  2E 00       	ld	l,0x00
2710  0C76  CD 00 00    	call	_spr_brick_anim
2711  0C79  21 00 00    	ld	hl,_player_hit_lin
2712  0C7C  36 00       	ld	(hl),0x00
2713  0C7E  21 00 00    	ld	hl,_player_hit_col
2714  0C81  36 00       	ld	(hl),0x00
2715  0C83  C9          	ret
2716  0C84              	SECTION code_compiler
2717  0C84              ;	---------------------------------
2718  0C84              ; Function player_score_add
2719  0C84              ; ---------------------------------
2720  0C84              _player_score_add:
2721  0C84  ED 4B 00 00 	ld	bc,(_player_score)
2722  0C88  09          	add	hl,bc
2723  0C89  22 00 00    	ld	(_player_score),hl
2724  0C8C  21 00 00    	ld	hl,_player_lvl
2725  0C8F  7E          	ld	a, (hl)
2726  0C90  D6 14       	sub	a,0x14
2727  0C92  30 4D       	jr	NC,l_player_score_add_00104
2728  0C94  01 00 00    	ld	bc,_player_lvl_table+0
2729  0C97  6E          	ld	l,(hl)
2730  0C98  26 00       	ld	h,0x00
2731  0C9A  29          	add	hl, hl
2732  0C9B  09          	add	hl, bc
2733  0C9C  4E          	ld	c, (hl)
2734  0C9D  23          	inc	hl
2735  0C9E  46          	ld	b, (hl)
2736  0C9F  21 00 00    	ld	hl,_player_score
2737  0CA2  7E          	ld	a, (hl)
2738  0CA3  91          	sub	a, c
2739  0CA4  23          	inc	hl
2740  0CA5  7E          	ld	a, (hl)
2741  0CA6  98          	sbc	a, b
2742  0CA7  38 38       	jr	C,l_player_score_add_00104
2743  0CA9  21 00 00    	ld	hl,_player_lvl
2744  0CAC  34          	inc	(hl)
2745  0CAD  CD 00 00    	call	_game_update_stats
2746  0CB0  CD 00 00    	call	_spr_flatten
2747  0CB3  21 00 00    	ld	hl,_ay_fx_06_efecto
2748  0CB6  E5          	push	hl
2749  0CB7  21 01 06    	ld	hl,0x0601
2750  0CBA  E5          	push	hl
2751  0CBB  CD 00 00    	call	_ay_song_play
2752  0CBE  21 16 00    	ld	hl,___str_2
2753  0CC1  E5          	push	hl
2754  0CC2  21 0C 0C    	ld	hl,0x0c0c
2755  0CC5  E5          	push	hl
2756  0CC6  CD 00 00    	call	_zx_print_str
2757  0CC9  AF          	xor	a, a
2758  0CCA  F5          	push	af
2759  0CCB  33          	inc	sp
2760  0CCC  21 3C 00    	ld	hl,0x003c
2761  0CCF  E5          	push	hl
2762  0CD0  21 0C 15    	ld	hl,0x150c
2763  0CD3  E5          	push	hl
2764  0CD4  3E 0C       	ld	a,0x0c
2765  0CD6  F5          	push	af
2766  0CD7  33          	inc	sp
2767  0CD8  CD 00 00    	call	_game_colour_message
2768  0CDB  F1          	pop	af
2769  0CDC  F1          	pop	af
2770  0CDD  F1          	pop	af
2771  0CDE  CD 00 00    	call	_spr_unflatten
2772  0CE1              l_player_score_add_00104:
2773  0CE1  3A 00 00    	ld	a,(_game_score_top)
2774  0CE4  21 00 00    	ld	hl,_player_score
2775  0CE7  96          	sub	a, (hl)
2776  0CE8  3A 01 00    	ld	a,(_game_score_top + 1)
2777  0CEB  23          	inc	hl
2778  0CEC  9E          	sbc	a, (hl)
2779  0CED  30 06       	jr	NC,l_player_score_add_00106
2780  0CEF  2A 00 00    	ld	hl,(_player_score)
2781  0CF2  22 00 00    	ld	(_game_score_top),hl
2782  0CF5              l_player_score_add_00106:
2783  0CF5  CD 00 00    	call	_game_print_score
2784  0CF8  C9          	ret
2785  0CF9              	SECTION rodata_compiler
2786  0016              ___str_2:
2787  0016  4C 45 56 45 4C 20 55 50 21 
                        	DEFM "LEVEL UP!"
2788  001F  00          	DEFB 0x00
2789  0020              	SECTION code_compiler
2790  0CF9              ;	---------------------------------
2791  0CF9              ; Function player_check_floor
2792  0CF9              ; ---------------------------------
2793  0CF9              _player_check_floor:
2794  0CF9  CD 00 00    	call	___sdcc_enter_ix
2795  0CFC  F5          	push	af
2796  0CFD  F5          	push	af
2797  0CFE  F5          	push	af
2798  0CFF  21 07 00    	ld	hl,+(_col + 0x0007)
2799  0D02  56          	ld	d, (hl)
2800  0D03  3A 07 00    	ld	a,(_lin + 0x0007)
2801  0D06  C6 10       	add	a,0x10
2802  0D08  5F          	ld	e, a
2803  0D09  D5          	push	de
2804  0D0A  CD 00 00    	call	_spr_calc_index
2805  0D0D  F1          	pop	af
2806  0D0E  DD 75 FC    	ld	(ix-4),l
2807  0D11  DD 74 FD    	ld	(ix-3),h
2808  0D14  01 00 00    	ld	bc,_scr_map+0
2809  0D17  79          	ld	a, c
2810  0D18  DD 86 FC    	add	a,(ix-4)
2811  0D1B  DD 77 FE    	ld	(ix-2),a
2812  0D1E  78          	ld	a, b
2813  0D1F  DD 8E FD    	adc	a,(ix-3)
2814  0D22  DD 6E FE    	ld	l,(ix-2)
2815  0D25  DD 77 FF    	ld	(ix-1),a
2816  0D28  67          	ld	h,a
2817  0D29  7E          	ld	a, (hl)
2818  0D2A  DD 77 FB    	ld	(ix-5),a
2819  0D2D  DD 6E FC    	ld	l,(ix-4)
2820  0D30  DD 66 FD    	ld	h,(ix-3)
2821  0D33  23          	inc	hl
2822  0D34  09          	add	hl,bc
2823  0D35  3A 00 00    	ld	a,(_s_lin0)
2824  0D38  D6 90       	sub	a,0x90
2825  0D3A  4D          	ld	c,l
2826  0D3B  44          	ld	b,h
2827  0D3C  20 26       	jr	NZ,l_player_check_floor_00108
2828  0D3E  3A 00 00    	ld	a,(_map_heigth)
2829  0D41  C5          	push	bc
2830  0D42  F5          	push	af
2831  0D43  33          	inc	sp
2832  0D44  3A 00 00    	ld	a,(_scr_curr)
2833  0D47  F5          	push	af
2834  0D48  33          	inc	sp
2835  0D49  CD 00 00    	call	__divuchar_callee
2836  0D4C  C1          	pop	bc
2837  0D4D  7D          	ld	a,l
2838  0D4E  3C          	inc	a
2839  0D4F  32 00 00    	ld	(_tmp1),a
2840  0D52  21 00 00    	ld	hl,_map_heigth
2841  0D55  96          	sub	a, (hl)
2842  0D56  30 06       	jr	NC,l_player_check_floor_00102
2843  0D58  DD 36 FB 00 	ld	(ix-5),0x00
2844  0D5C  18 16       	jr	l_player_check_floor_00109
2845  0D5E              l_player_check_floor_00102:
2846  0D5E  DD 36 FB 48 	ld	(ix-5),0x48
2847  0D62  18 10       	jr	l_player_check_floor_00109
2848  0D64              l_player_check_floor_00108:
2849  0D64  3A 07 00    	ld	a,(_col + 0x0007)
2850  0D67  0F          	rrca
2851  0D68  38 06       	jr	C,l_player_check_floor_00105
2852  0D6A  DD 36 FA 00 	ld	(ix-6),0x00
2853  0D6E  18 04       	jr	l_player_check_floor_00109
2854  0D70              l_player_check_floor_00105:
2855  0D70  0A          	ld	a, (bc)
2856  0D71  DD 77 FA    	ld	(ix-6),a
2857  0D74              l_player_check_floor_00109:
2858  0D74  DD 7E FB    	ld	a,(ix-5)
2859  0D77  D6 3A       	sub	a,0x3a
2860  0D79  38 07       	jr	C,l_player_check_floor_00132
2861  0D7B  DD 7E FB    	ld	a,(ix-5)
2862  0D7E  D6 60       	sub	a,0x60
2863  0D80  38 32       	jr	C,l_player_check_floor_00128
2864  0D82              l_player_check_floor_00132:
2865  0D82  DD 7E FA    	ld	a,(ix-6)
2866  0D85  D6 3A       	sub	a,0x3a
2867  0D87  38 07       	jr	C,l_player_check_floor_00127
2868  0D89  DD 7E FA    	ld	a,(ix-6)
2869  0D8C  D6 60       	sub	a,0x60
2870  0D8E  38 24       	jr	C,l_player_check_floor_00128
2871  0D90              l_player_check_floor_00127:
2872  0D90  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
2873  0D93  36 02       	ld	(hl),0x02
2874  0D95  21 00 00    	ld	hl,_s_state
2875  0D98  CB CE       	set	1, (hl)
2876  0D9A  2E 00       	ld	l,0x00
2877  0D9C  CD 5D 06    	call	_player_check_stairs
2878  0D9F  3A 00 00    	ld	a,(_player_onstair)
2879  0DA2  B7          	or	a, a
2880  0DA3  C2 4A 0E    	jp	NZ, l_player_check_floor_00133
2881  0DA6  3A 00 00    	ld	a,(_s_lin0)
2882  0DA9  D6 90       	sub	a,0x90
2883  0DAB  C2 4A 0E    	jp	NZ,l_player_check_floor_00133
2884  0DAE  CD 00 00    	call	_spr_page_down
2885  0DB1  C3 4A 0E    	jp	l_player_check_floor_00133
2886  0DB4              l_player_check_floor_00128:
2887  0DB4  C5          	push	bc
2888  0DB5  3E 10       	ld	a,0x10
2889  0DB7  F5          	push	af
2890  0DB8  33          	inc	sp
2891  0DB9  21 00 00    	ld	hl,_player_brick_time
2892  0DBC  E5          	push	hl
2893  0DBD  CD 00 00    	call	_game_check_time
2894  0DC0  F1          	pop	af
2895  0DC1  33          	inc	sp
2896  0DC2  C1          	pop	bc
2897  0DC3  7D          	ld	a,l
2898  0DC4  B7          	or	a, a
2899  0DC5  CA 4A 0E    	jp	Z, l_player_check_floor_00133
2900  0DC8  2A 00 00    	ld	hl,(_curr_time)
2901  0DCB  22 00 00    	ld	(_player_brick_time),hl
2902  0DCE  DD 7E FB    	ld	a,(ix-5)
2903  0DD1  D6 40       	sub	a,0x40
2904  0DD3  20 18       	jr	NZ,l_player_check_floor_00114
2905  0DD5  C5          	push	bc
2906  0DD6  DD 6E FC    	ld	l,(ix-4)
2907  0DD9  DD 66 FD    	ld	h,(ix-3)
2908  0DDC  CD 00 00    	call	_game_match_back
2909  0DDF  C1          	pop	bc
2910  0DE0  5D          	ld	e,l
2911  0DE1  DD 6E FE    	ld	l,(ix-2)
2912  0DE4  DD 66 FF    	ld	h,(ix-1)
2913  0DE7  73          	ld	(hl), e
2914  0DE8  C5          	push	bc
2915  0DE9  CD 4F 0E    	call	_player_gasta_brick
2916  0DEC  C1          	pop	bc
2917  0DED              l_player_check_floor_00114:
2918  0DED  DD 7E FB    	ld	a,(ix-5)
2919  0DF0  D6 3F       	sub	a,0x3f
2920  0DF2  20 0D       	jr	NZ,l_player_check_floor_00116
2921  0DF4  DD 6E FE    	ld	l,(ix-2)
2922  0DF7  DD 66 FF    	ld	h,(ix-1)
2923  0DFA  36 40       	ld	(hl),0x40
2924  0DFC  C5          	push	bc
2925  0DFD  CD 4F 0E    	call	_player_gasta_brick
2926  0E00  C1          	pop	bc
2927  0E01              l_player_check_floor_00116:
2928  0E01  DD 7E FB    	ld	a,(ix-5)
2929  0E04  D6 3E       	sub	a,0x3e
2930  0E06  20 0D       	jr	NZ,l_player_check_floor_00118
2931  0E08  DD 6E FE    	ld	l,(ix-2)
2932  0E0B  DD 66 FF    	ld	h,(ix-1)
2933  0E0E  36 3F       	ld	(hl),0x3f
2934  0E10  C5          	push	bc
2935  0E11  CD 4F 0E    	call	_player_gasta_brick
2936  0E14  C1          	pop	bc
2937  0E15              l_player_check_floor_00118:
2938  0E15  DD 7E FA    	ld	a,(ix-6)
2939  0E18  D6 40       	sub	a,0x40
2940  0E1A  20 12       	jr	NZ,l_player_check_floor_00120
2941  0E1C  C5          	push	bc
2942  0E1D  DD 6E FC    	ld	l,(ix-4)
2943  0E20  DD 66 FD    	ld	h,(ix-3)
2944  0E23  CD 00 00    	call	_game_match_back
2945  0E26  C1          	pop	bc
2946  0E27  7D          	ld	a,l
2947  0E28  02          	ld	(bc), a
2948  0E29  C5          	push	bc
2949  0E2A  CD 4F 0E    	call	_player_gasta_brick
2950  0E2D  C1          	pop	bc
2951  0E2E              l_player_check_floor_00120:
2952  0E2E  DD 7E FA    	ld	a,(ix-6)
2953  0E31  D6 3F       	sub	a,0x3f
2954  0E33  20 08       	jr	NZ,l_player_check_floor_00122
2955  0E35  3E 40       	ld	a,0x40
2956  0E37  02          	ld	(bc), a
2957  0E38  C5          	push	bc
2958  0E39  CD 4F 0E    	call	_player_gasta_brick
2959  0E3C  C1          	pop	bc
2960  0E3D              l_player_check_floor_00122:
2961  0E3D  DD 7E FA    	ld	a,(ix-6)
2962  0E40  D6 3E       	sub	a,0x3e
2963  0E42  20 06       	jr	NZ,l_player_check_floor_00133
2964  0E44  3E 3F       	ld	a,0x3f
2965  0E46  02          	ld	(bc), a
2966  0E47  CD 4F 0E    	call	_player_gasta_brick
2967  0E4A              l_player_check_floor_00133:
2968  0E4A  DD F9       	ld	sp, ix
2969  0E4C  DD E1       	pop	ix
2970  0E4E  C9          	ret
2971  0E4F              	SECTION code_compiler
2972  0E4F              ;	---------------------------------
2973  0E4F              ; Function player_gasta_brick
2974  0E4F              ; ---------------------------------
2975  0E4F              _player_gasta_brick:
2976  0E4F  3A 00 00    	ld	a,(_s_lin0)
2977  0E52  32 00 00    	ld	(_s_lin1),a
2978  0E55  3A 00 00    	ld	a,(_s_col0)
2979  0E58  32 00 00    	ld	(_s_col1),a
2980  0E5B  3A 07 00    	ld	a,(_lin + 0x0007)
2981  0E5E  C6 10       	add	a,0x10
2982  0E60  32 00 00    	ld	(_s_lin0),a
2983  0E63  3A 07 00    	ld	a,(_col + 0x0007)
2984  0E66  32 00 00    	ld	(_s_col0),a
2985  0E69  CD 00 00    	call	_spr_back_repaint
2986  0E6C  3A 00 00    	ld	a,(_s_lin1)
2987  0E6F  32 00 00    	ld	(_s_lin0),a
2988  0E72  3A 00 00    	ld	a,(_s_col1)
2989  0E75  32 00 00    	ld	(_s_col0),a
2990  0E78  C9          	ret
2991  0E79              	SECTION code_compiler
2992  0E79              ;	---------------------------------
2993  0E79              ; Function player_move_jump
2994  0E79              ; ---------------------------------
2995  0E79              _player_move_jump:
2996  0E79  21 00 00    	ld	hl,_game_gravity
2997  0E7C  4E          	ld	c, (hl)
2998  0E7D  21 00 00    	ld	hl,_player_vel_y
2999  0E80  7E          	ld	a, (hl)
3000  0E81  81          	add	a, c
3001  0E82  77          	ld	(hl), a
3002  0E83  21 00 00    	ld	hl,_sprite_on_air
3003  0E86  36 01       	ld	(hl),0x01
3004  0E88  3A 00 00    	ld	a,(_player_vel_inc)
3005  0E8B  B7          	or	a, a
3006  0E8C  28 4A       	jr	Z,l_player_move_jump_00109
3007  0E8E  3A 00 00    	ld	a,(_dirs)
3008  0E91  CB 07       	rlc	a
3009  0E93  E6 01       	and	a,0x01
3010  0E95  4F          	ld	c, a
3011  0E96  3A 00 00    	ld	a,(_game_2buttons)
3012  0E99  B7          	or	a, a
3013  0E9A  28 06       	jr	Z,l_player_move_jump_00102
3014  0E9C  79          	ld	a, c
3015  0E9D  EE 01       	xor	a,0x01
3016  0E9F  4F          	ld	c, a
3017  0EA0  18 15       	jr	l_player_move_jump_00103
3018  0EA2              l_player_move_jump_00102:
3019  0EA2  CB 41       	bit	0, c
3020  0EA4  28 07       	jr	Z,l_player_move_jump_00154
3021  0EA6  21 00 00    	ld	hl,_dirs
3022  0EA9  CB 46       	bit	0, (hl)
3023  0EAB  20 04       	jr	NZ,l_player_move_jump_00155
3024  0EAD              l_player_move_jump_00154:
3025  0EAD  0E 00       	ld	c,0x00
3026  0EAF  18 02       	jr	l_player_move_jump_00156
3027  0EB1              l_player_move_jump_00155:
3028  0EB1  0E 01       	ld	c,0x01
3029  0EB3              l_player_move_jump_00156:
3030  0EB3  79          	ld	a, c
3031  0EB4  EE 01       	xor	a,0x01
3032  0EB6  4F          	ld	c, a
3033  0EB7              l_player_move_jump_00103:
3034  0EB7  79          	ld	a, c
3035  0EB8  B7          	or	a, a
3036  0EB9  28 1D       	jr	Z,l_player_move_jump_00109
3037  0EBB  3A 00 00    	ld	a,(_player_vel_y1)
3038  0EBE  21 00 00    	ld	hl,_player_vel_y
3039  0EC1  96          	sub	a, (hl)
3040  0EC2  E2 C7 0E    	jp	PO, l_player_move_jump_00259
3041  0EC5  EE 80       	xor	a,0x80
3042  0EC7              l_player_move_jump_00259:
3043  0EC7  F2 D8 0E    	jp	P, l_player_move_jump_00109
3044  0ECA  21 00 00    	ld	hl,_player_vel_y
3045  0ECD  CB 7E       	bit	7,(hl)
3046  0ECF  28 07       	jr	Z,l_player_move_jump_00109
3047  0ED1  36 00       	ld	(hl),0x00
3048  0ED3  21 00 00    	ld	hl,_player_vel_inc
3049  0ED6  36 00       	ld	(hl),0x00
3050  0ED8              l_player_move_jump_00109:
3051  0ED8  3E 78       	ld	a,0x78
3052  0EDA  21 00 00    	ld	hl,_player_vel_y
3053  0EDD  96          	sub	a, (hl)
3054  0EDE  E2 E3 0E    	jp	PO, l_player_move_jump_00260
3055  0EE1  EE 80       	xor	a,0x80
3056  0EE3              l_player_move_jump_00260:
3057  0EE3  F2 EB 0E    	jp	P, l_player_move_jump_00111
3058  0EE6  21 00 00    	ld	hl,_player_vel_y
3059  0EE9  36 78       	ld	(hl),0x78
3060  0EEB              l_player_move_jump_00111:
3061  0EEB  21 00 00    	ld	hl,_player_vel_y
3062  0EEE  7E          	ld	a, (hl)
3063  0EEF  EE 80       	xor	a,0x80
3064  0EF1  D6 08       	sub	a,0x08
3065  0EF3  30 02       	jr	NC,l_player_move_jump_00113
3066  0EF5  36 88       	ld	(hl),0x88
3067  0EF7              l_player_move_jump_00113:
3068  0EF7  3A 00 00    	ld	a,(_player_vel_y)
3069  0EFA  4F          	ld	c,a
3070  0EFB  17          	rla
3071  0EFC  9F          	sbc	a, a
3072  0EFD  47          	ld	b, a
3073  0EFE  CB 41       	bit	0,c
3074  0F00  21 00 00    	ld	hl,_s_lin1
3075  0F03  71          	ld	(hl),c
3076  0F04  28 04       	jr	Z,l_player_move_jump_00115
3077  0F06  21 00 00    	ld	hl,_s_lin1
3078  0F09  35          	dec	(hl)
3079  0F0A              l_player_move_jump_00115:
3080  0F0A  3A 07 00    	ld	a,(_lin + 0x0007)
3081  0F0D  21 00 00    	ld	hl,_s_lin1
3082  0F10  86          	add	a, (hl)
3083  0F11  77          	ld	(hl), a
3084  0F12  CB 78       	bit	7, b
3085  0F14  28 5C       	jr	Z,l_player_move_jump_00141
3086  0F16  21 00 00    	ld	hl,_s_state
3087  0F19  CD 00 00    	call	_spr_set_up
3088  0F1C  3E 90       	ld	a,0x90
3089  0F1E  21 00 00    	ld	hl,_s_lin1
3090  0F21  96          	sub	a, (hl)
3091  0F22  30 11       	jr	NC,l_player_move_jump_00120
3092  0F24  CD 00 00    	call	_spr_page_up
3093  0F27  7D          	ld	a, l
3094  0F28  B7          	or	a, a
3095  0F29  28 05       	jr	Z,l_player_move_jump_00117
3096  0F2B  2E 00       	ld	l,0x00
3097  0F2D  C3 29 10    	jp	l_player_move_jump_00152
3098  0F30              l_player_move_jump_00117:
3099  0F30  21 00 00    	ld	hl,_s_lin1
3100  0F33  36 00       	ld	(hl),0x00
3101  0F35              l_player_move_jump_00120:
3102  0F35  21 07 00    	ld	hl,+(_col + 0x0007)
3103  0F38  46          	ld	b, (hl)
3104  0F39  C5          	push	bc
3105  0F3A  33          	inc	sp
3106  0F3B  3A 00 00    	ld	a,(_s_lin1)
3107  0F3E  F5          	push	af
3108  0F3F  33          	inc	sp
3109  0F40  CD 00 00    	call	_game_check_map
3110  0F43  F1          	pop	af
3111  0F44  7C          	ld	a,h
3112  0F45  B5          	or	a,l
3113  0F46  28 21       	jr	Z,l_player_move_jump_00124
3114  0F48  CD BE 09    	call	_player_hit_platform
3115  0F4B  7D          	ld	a, l
3116  0F4C  B7          	or	a, a
3117  0F4D  28 12       	jr	Z,l_player_move_jump_00122
3118  0F4F  3A 07 00    	ld	a,(_lin + 0x0007)
3119  0F52  07          	rlca
3120  0F53  07          	rlca
3121  0F54  07          	rlca
3122  0F55  07          	rlca
3123  0F56  E6 0F       	and	a,0x0f
3124  0F58  07          	rlca
3125  0F59  07          	rlca
3126  0F5A  07          	rlca
3127  0F5B  07          	rlca
3128  0F5C  E6 F0       	and	a,0xf0
3129  0F5E  32 07 00    	ld	((_lin + 0x0007)),a
3130  0F61              l_player_move_jump_00122:
3131  0F61  21 00 00    	ld	hl,_player_vel_y
3132  0F64  36 00       	ld	(hl),0x00
3133  0F66  C3 F1 0F    	jp	l_player_move_jump_00142
3134  0F69              l_player_move_jump_00124:
3135  0F69  3A 00 00    	ld	a,(_s_lin1)
3136  0F6C  32 07 00    	ld	((_lin + 0x0007)),a
3137  0F6F  C3 F1 0F    	jp	l_player_move_jump_00142
3138  0F72              l_player_move_jump_00141:
3139  0F72  21 00 00    	ld	hl,_s_state
3140  0F75  CD 00 00    	call	_spr_set_down
3141  0F78  3E 90       	ld	a,0x90
3142  0F7A  21 00 00    	ld	hl,_s_lin1
3143  0F7D  96          	sub	a, (hl)
3144  0F7E  30 11       	jr	NC,l_player_move_jump_00130
3145  0F80  CD 00 00    	call	_spr_page_down
3146  0F83  7D          	ld	a, l
3147  0F84  B7          	or	a, a
3148  0F85  28 05       	jr	Z,l_player_move_jump_00127
3149  0F87  2E 00       	ld	l,0x00
3150  0F89  C3 29 10    	jp	l_player_move_jump_00152
3151  0F8C              l_player_move_jump_00127:
3152  0F8C  21 00 00    	ld	hl,_s_lin1
3153  0F8F  36 90       	ld	(hl),0x90
3154  0F91              l_player_move_jump_00130:
3155  0F91  21 07 00    	ld	hl,+(_col + 0x0007)
3156  0F94  56          	ld	d, (hl)
3157  0F95  3A 00 00    	ld	a,(_s_lin1)
3158  0F98  C6 10       	add	a,0x10
3159  0F9A  5F          	ld	e, a
3160  0F9B  D5          	push	de
3161  0F9C  CD 00 00    	call	_game_check_map
3162  0F9F  F1          	pop	af
3163  0FA0  7C          	ld	a,h
3164  0FA1  B5          	or	a,l
3165  0FA2  28 47       	jr	Z,l_player_move_jump_00138
3166  0FA4  2E 00       	ld	l,0x00
3167  0FA6  CD 5D 06    	call	_player_check_stairs
3168  0FA9  3A 00 00    	ld	a,(_player_onstair)
3169  0FAC  B7          	or	a, a
3170  0FAD  20 05       	jr	NZ,l_player_move_jump_00132
3171  0FAF  2E 01       	ld	l,0x01
3172  0FB1  CD 5D 06    	call	_player_check_stairs
3173  0FB4              l_player_move_jump_00132:
3174  0FB4  3A 00 00    	ld	a,(_player_onstair)
3175  0FB7  B7          	or	a, a
3176  0FB8  20 12       	jr	NZ,l_player_move_jump_00134
3177  0FBA  3A 00 00    	ld	a,(_s_lin1)
3178  0FBD  07          	rlca
3179  0FBE  07          	rlca
3180  0FBF  07          	rlca
3181  0FC0  07          	rlca
3182  0FC1  E6 0F       	and	a,0x0f
3183  0FC3  07          	rlca
3184  0FC4  07          	rlca
3185  0FC5  07          	rlca
3186  0FC6  07          	rlca
3187  0FC7  E6 F0       	and	a,0xf0
3188  0FC9  32 07 00    	ld	((_lin + 0x0007)),a
3189  0FCC              l_player_move_jump_00134:
3190  0FCC  21 00 00    	ld	hl,_player_vel_y
3191  0FCF  36 00       	ld	(hl),0x00
3192  0FD1  21 00 00    	ld	hl,_s_state
3193  0FD4  7E          	ld	a,(hl)
3194  0FD5  E6 FC       	and	a,+(0xfd&0xfe)
3195  0FD7  77          	ld	(hl),a
3196  0FD8  3A 07 00    	ld	a,(_lin + 0x0007)
3197  0FDB  D6 90       	sub	a,0x90
3198  0FDD  38 03       	jr	C,l_player_move_jump_00136
3199  0FDF  CD 00 00    	call	_spr_page_down
3200  0FE2              l_player_move_jump_00136:
3201  0FE2  21 07 00    	ld	hl, +(_colint + 0x0007)
3202  0FE5  36 00       	ld	(hl),0x00
3203  0FE7  2E 01       	ld	l,0x01
3204  0FE9  18 3E       	jr	l_player_move_jump_00152
3205  0FEB              l_player_move_jump_00138:
3206  0FEB  3A 00 00    	ld	a,(_s_lin1)
3207  0FEE  32 07 00    	ld	((_lin + 0x0007)),a
3208  0FF1              l_player_move_jump_00142:
3209  0FF1  21 00 00    	ld	hl,_s_state
3210  0FF4  CB 5E       	bit	3, (hl)
3211  0FF6  20 21       	jr	NZ,l_player_move_jump_00148
3212  0FF8  21 00 00    	ld	hl,_s_state
3213  0FFB  CB 56       	bit	2, (hl)
3214  0FFD  20 1A       	jr	NZ,l_player_move_jump_00148
3215  0FFF  21 00 00    	ld	hl,_dirs
3216  1002  CB 56       	bit	2, (hl)
3217  1004  28 06       	jr	Z,l_player_move_jump_00144
3218  1006  21 00 00    	ld	hl,_s_state
3219  1009  CD 00 00    	call	_spr_set_left
3220  100C              l_player_move_jump_00144:
3221  100C  21 00 00    	ld	hl,_dirs
3222  100F  CB 5E       	bit	3, (hl)
3223  1011  28 06       	jr	Z,l_player_move_jump_00148
3224  1013  21 00 00    	ld	hl,_s_state
3225  1016  CD 00 00    	call	_spr_set_right
3226  1019              l_player_move_jump_00148:
3227  1019  CD 00 00    	call	_spr_move_horizontal
3228  101C  7D          	ld	a, l
3229  101D  B7          	or	a, a
3230  101E  28 07       	jr	Z,l_player_move_jump_00151
3231  1020  21 00 00    	ld	hl,_s_state
3232  1023  7E          	ld	a,(hl)
3233  1024  E6 F3       	and	a,+(0xf7&0xfb)
3234  1026  77          	ld	(hl),a
3235  1027              l_player_move_jump_00151:
3236  1027  2E 00       	ld	l,0x00
3237  1029              l_player_move_jump_00152:
3238  1029  C9          	ret
3239  102A              	SECTION code_compiler
3240  102A              ;	---------------------------------
3241  102A              ; Function player_open_door
3242  102A              ; ---------------------------------
3243  102A              _player_open_door:
3244  102A  CD 00 00    	call	___sdcc_enter_ix
3245  102D  0E 00       	ld	c,0x00
3246  102F  DD 7E 06    	ld	a,(ix+6)
3247  1032  D6 48       	sub	a,0x48
3248  1034  28 17       	jr	Z,l_player_open_door_00101
3249  1036  DD 7E 06    	ld	a,(ix+6)
3250  1039  D6 49       	sub	a,0x49
3251  103B  28 1F       	jr	Z,l_player_open_door_00104
3252  103D  DD 7E 06    	ld	a,(ix+6)
3253  1040  D6 4A       	sub	a,0x4a
3254  1042  28 27       	jr	Z,l_player_open_door_00107
3255  1044  DD 7E 06    	ld	a,(ix+6)
3256  1047  D6 4B       	sub	a,0x4b
3257  1049  28 2F       	jr	Z,l_player_open_door_00110
3258  104B  18 3A       	jr	l_player_open_door_00113
3259  104D              l_player_open_door_00101:
3260  104D  3A 00 00    	ld	a,(_player_keys)
3261  1050  B7          	or	a, a
3262  1051  28 34       	jr	Z,l_player_open_door_00113
3263  1053  2E 07       	ld	l,0x07
3264  1055  CD 00 00    	call	_zx_border_fastcall
3265  1058  0E 01       	ld	c,0x01
3266  105A  18 2B       	jr	l_player_open_door_00113
3267  105C              l_player_open_door_00104:
3268  105C  3A 01 00    	ld	a,(_player_keys + 0x0001)
3269  105F  B7          	or	a, a
3270  1060  28 25       	jr	Z,l_player_open_door_00113
3271  1062  2E 02       	ld	l,0x02
3272  1064  CD 00 00    	call	_zx_border_fastcall
3273  1067  0E 01       	ld	c,0x01
3274  1069  18 1C       	jr	l_player_open_door_00113
3275  106B              l_player_open_door_00107:
3276  106B  3A 02 00    	ld	a,(_player_keys + 0x0002)
3277  106E  B7          	or	a, a
3278  106F  28 16       	jr	Z,l_player_open_door_00113
3279  1071  2E 04       	ld	l,0x04
3280  1073  CD 00 00    	call	_zx_border_fastcall
3281  1076  0E 01       	ld	c,0x01
3282  1078  18 0D       	jr	l_player_open_door_00113
3283  107A              l_player_open_door_00110:
3284  107A  3A 03 00    	ld	a,(_player_keys + 0x0003)
3285  107D  B7          	or	a, a
3286  107E  28 07       	jr	Z,l_player_open_door_00113
3287  1080  2E 05       	ld	l,0x05
3288  1082  CD 00 00    	call	_zx_border_fastcall
3289  1085  0E 01       	ld	c,0x01
3290  1087              l_player_open_door_00113:
3291  1087  79          	ld	a, c
3292  1088  B7          	or	a, a
3293  1089  20 06       	jr	NZ,l_player_open_door_00114
3294  108B  3A 00 00    	ld	a,(_game_inmune)
3295  108E  B7          	or	a, a
3296  108F  28 2B       	jr	Z,l_player_open_door_00115
3297  1091              l_player_open_door_00114:
3298  1091  21 00 00    	ld	hl,_ay_fx_04_pierto_abierta
3299  1094  E5          	push	hl
3300  1095  21 01 04    	ld	hl,0x0401
3301  1098  E5          	push	hl
3302  1099  CD 00 00    	call	_ay_song_play
3303  109C  3E 00       	ld	a, +((_scr_map) & 0xFF)
3304  109E  DD 86 04    	add	a,(ix+4)
3305  10A1  4F          	ld	c, a
3306  10A2  3E 00       	ld	a, +((_scr_map) / 256)
3307  10A4  DD 8E 05    	adc	a,(ix+5)
3308  10A7  47          	ld	b, a
3309  10A8  AF          	xor	a, a
3310  10A9  02          	ld	(bc), a
3311  10AA  DD 6E 04    	ld	l,(ix+4)
3312  10AD  DD 66 05    	ld	h,(ix+5)
3313  10B0  CD 00 00    	call	_game_obj_set
3314  10B3  21 04 00    	ld	hl,0x0004
3315  10B6  39          	add	hl, sp
3316  10B7  CD 00 00    	call	_spr_draw_index
3317  10BA  18 0B       	jr	l_player_open_door_00118
3318  10BC              l_player_open_door_00115:
3319  10BC  21 00 00    	ld	hl,_ay_fx_04_sin_mana
3320  10BF  E5          	push	hl
3321  10C0  21 01 04    	ld	hl,0x0401
3322  10C3  E5          	push	hl
3323  10C4  CD 00 00    	call	_ay_song_play
3324  10C7              l_player_open_door_00118:
3325  10C7  DD E1       	pop	ix
3326  10C9  C9          	ret
3327  10CA              	SECTION code_compiler
3328  10CA              ;	---------------------------------
3329  10CA              ; Function player_lost_life
3330  10CA              ; ---------------------------------
3331  10CA              _player_lost_life:
3332  10CA  CD 00 00    	call	___sdcc_enter_ix
3333  10CD  F5          	push	af
3334  10CE  21 00 00    	ld	hl,_player_vita
3335  10D1  36 00       	ld	(hl),0x00
3336  10D3  CD 00 00    	call	_game_update_stats
3337  10D6  3A 07 00    	ld	a,(_lin + 7)
3338  10D9  32 00 00    	ld	(_s_lin0),a
3339  10DC  3A 07 00    	ld	a,(_col + 7)
3340  10DF  32 00 00    	ld	(_s_col0),a
3341  10E2  CD 00 00    	call	_spr_init_effects
3342  10E5  06 00       	ld	b,0x00
3343  10E7              l_player_lost_life_00121:
3344  10E7  C5          	push	bc
3345  10E8  21 00 00    	ld	hl,0x0000
3346  10EB  E5          	push	hl
3347  10EC  AF          	xor	a, a
3348  10ED  48          	ld	c,b
3349  10EE  47          	ld	b,a
3350  10EF  C5          	push	bc
3351  10F0  CD 00 00    	call	_NIRVANAP_spriteT_callee
3352  10F3  C1          	pop	bc
3353  10F4  04          	inc	b
3354  10F5  3E 07       	ld	a,0x07
3355  10F7  90          	sub	a, b
3356  10F8  30 ED       	jr	NC,l_player_lost_life_00121
3357  10FA  21 00 00    	ld	hl,_ay_fx_04_explosion
3358  10FD  E5          	push	hl
3359  10FE  21 01 04    	ld	hl,0x0401
3360  1101  E5          	push	hl
3361  1102  CD 00 00    	call	_ay_song_play
3362  1105  76          	halt
3363  1106  3A 00 00    	ld	a,(_s_lin0)
3364  1109  C6 F0       	add	a,0xf0
3365  110B  47          	ld	b, a
3366  110C  3A 00 00    	ld	a,(_s_col0)
3367  110F  21 00 00    	ld	hl,0x0000
3368  1112  E5          	push	hl
3369  1113  21 87 03    	ld	hl,0x0387
3370  1116  E5          	push	hl
3371  1117  48          	ld	c,b
3372  1118  47          	ld	b,a
3373  1119  C5          	push	bc
3374  111A  CD 00 00    	call	_spr_add_anim
3375  111D  F1          	pop	af
3376  111E  F1          	pop	af
3377  111F  F1          	pop	af
3378  1120  21 00 00    	ld	hl,_s_col0
3379  1123  46          	ld	b, (hl)
3380  1124  05          	dec	b
3381  1125  05          	dec	b
3382  1126  21 00 00    	ld	hl,0x0000
3383  1129  E5          	push	hl
3384  112A  21 87 03    	ld	hl,0x0387
3385  112D  E5          	push	hl
3386  112E  C5          	push	bc
3387  112F  33          	inc	sp
3388  1130  3A 00 00    	ld	a,(_s_lin0)
3389  1133  F5          	push	af
3390  1134  33          	inc	sp
3391  1135  CD 00 00    	call	_spr_add_anim
3392  1138  F1          	pop	af
3393  1139  F1          	pop	af
3394  113A  21 00 00    	ld	hl,0x0000
3395  113D  E3          	ex	(sp),hl
3396  113E  3A 00 00    	ld	a,(_s_col0)
3397  1141  21 87 03    	ld	hl,0x0387
3398  1144  E5          	push	hl
3399  1145  F5          	push	af
3400  1146  33          	inc	sp
3401  1147  3A 00 00    	ld	a,(_s_lin0)
3402  114A  F5          	push	af
3403  114B  33          	inc	sp
3404  114C  CD 00 00    	call	_spr_add_anim
3405  114F  F1          	pop	af
3406  1150  F1          	pop	af
3407  1151  F1          	pop	af
3408  1152  21 00 00    	ld	hl,_s_col0
3409  1155  46          	ld	b, (hl)
3410  1156  04          	inc	b
3411  1157  04          	inc	b
3412  1158  21 00 00    	ld	hl,0x0000
3413  115B  E5          	push	hl
3414  115C  21 87 03    	ld	hl,0x0387
3415  115F  E5          	push	hl
3416  1160  C5          	push	bc
3417  1161  33          	inc	sp
3418  1162  3A 00 00    	ld	a,(_s_lin0)
3419  1165  F5          	push	af
3420  1166  33          	inc	sp
3421  1167  CD 00 00    	call	_spr_add_anim
3422  116A  F1          	pop	af
3423  116B  F1          	pop	af
3424  116C  F1          	pop	af
3425  116D  3A 00 00    	ld	a,(_s_lin0)
3426  1170  C6 10       	add	a,0x10
3427  1172  47          	ld	b, a
3428  1173  3A 00 00    	ld	a,(_s_col0)
3429  1176  21 00 00    	ld	hl,0x0000
3430  1179  E5          	push	hl
3431  117A  21 87 03    	ld	hl,0x0387
3432  117D  E5          	push	hl
3433  117E  48          	ld	c,b
3434  117F  47          	ld	b,a
3435  1180  C5          	push	bc
3436  1181  CD 00 00    	call	_spr_add_anim
3437  1184  F1          	pop	af
3438  1185  F1          	pop	af
3439  1186  F1          	pop	af
3440  1187  2E 00       	ld	l,0x00
3441  1189  CD 00 00    	call	_zx_border_fastcall
3442  118C  DD 36 FE 01 	ld	(ix-2),0x01
3443  1190  2A 00 00    	ld	hl,(_curr_time)
3444  1193  22 00 00    	ld	(_anim_time),hl
3445  1196              l_player_lost_life_00107:
3446  1196  DD 7E FE    	ld	a,(ix-2)
3447  1199  B7          	or	a, a
3448  119A  28 28       	jr	Z,l_player_lost_life_00109
3449  119C  3E 0C       	ld	a,0x0c
3450  119E  F5          	push	af
3451  119F  33          	inc	sp
3452  11A0  21 00 00    	ld	hl,_anim_time
3453  11A3  E5          	push	hl
3454  11A4  CD 00 00    	call	_game_check_time
3455  11A7  F1          	pop	af
3456  11A8  33          	inc	sp
3457  11A9  7D          	ld	a, l
3458  11AA  B7          	or	a, a
3459  11AB  28 E9       	jr	Z,l_player_lost_life_00107
3460  11AD  2A 00 00    	ld	hl,(_curr_time)
3461  11B0  22 00 00    	ld	(_anim_time),hl
3462  11B3  3A 00 00    	ld	a,(_anim_count)
3463  11B6  B7          	or	a,a
3464  11B7  28 05       	jr	Z,l_player_lost_life_00103
3465  11B9  CD 00 00    	call	_spr_play_anim
3466  11BC  18 D8       	jr	l_player_lost_life_00107
3467  11BE              l_player_lost_life_00103:
3468  11BE  DD 36 FE 00 	ld	(ix-2),0x00
3469  11C2  18 D2       	jr	l_player_lost_life_00107
3470  11C4              l_player_lost_life_00109:
3471  11C4  21 00 00    	ld	hl,_ay_song_04_lotr_lose_a_life
3472  11C7  E5          	push	hl
3473  11C8  21 01 04    	ld	hl,0x0401
3474  11CB  E5          	push	hl
3475  11CC  CD 00 00    	call	_ay_song_play
3476  11CF  3A 00 00    	ld	a,(_game_boss)
3477  11D2  B7          	or	a, a
3478  11D3  28 11       	jr	Z,l_player_lost_life_00135
3479  11D5  3A 00 00    	ld	a,(_boss_lin)
3480  11D8  32 00 00    	ld	(_s_lin1),a
3481  11DB  3A 00 00    	ld	a,(_boss_col)
3482  11DE  32 00 00    	ld	(_s_col1),a
3483  11E1  CD 00 00    	call	_boss_draw
3484  11E4  18 40       	jr	l_player_lost_life_00115
3485  11E6              l_player_lost_life_00135:
3486  11E6  0E 00       	ld	c,0x00
3487  11E8              l_player_lost_life_00123:
3488  11E8  06 00       	ld	b,0x00
3489  11EA  21 00 00    	ld	hl,_class
3490  11ED  09          	add	hl, bc
3491  11EE  7E          	ld	a, (hl)
3492  11EF  B7          	or	a, a
3493  11F0  28 2E       	jr	Z,l_player_lost_life_00124
3494  11F2  06 00       	ld	b,0x00
3495  11F4  21 00 00    	ld	hl,_col
3496  11F7  09          	add	hl, bc
3497  11F8  5E          	ld	e, (hl)
3498  11F9  06 00       	ld	b,0x00
3499  11FB  21 00 00    	ld	hl,_lin
3500  11FE  09          	add	hl, bc
3501  11FF  56          	ld	d, (hl)
3502  1200  06 00       	ld	b,0x00
3503  1202  21 00 00    	ld	hl,_tile
3504  1205  09          	add	hl, bc
3505  1206  7E          	ld	a, (hl)
3506  1207  DD 77 FF    	ld	(ix-1),a
3507  120A  06 00       	ld	b,0x00
3508  120C  21 00 00    	ld	hl,_colint
3509  120F  09          	add	hl, bc
3510  1210  6E          	ld	l, (hl)
3511  1211  DD 7E FF    	ld	a,(ix-1)
3512  1214  85          	add	a, l
3513  1215  47          	ld	b, a
3514  1216  C5          	push	bc
3515  1217  7B          	ld	a, e
3516  1218  5A          	ld	e,d
3517  1219  57          	ld	d,a
3518  121A  D5          	push	de
3519  121B  C5          	push	bc
3520  121C  CD 00 00    	call	_NIRVANAP_spriteT_callee
3521  121F  C1          	pop	bc
3522  1220              l_player_lost_life_00124:
3523  1220  0C          	inc	c
3524  1221  79          	ld	a, c
3525  1222  D6 07       	sub	a,0x07
3526  1224  38 C2       	jr	C,l_player_lost_life_00123
3527  1226              l_player_lost_life_00115:
3528  1226  3A 00 00    	ld	a,(_game_inf_lives)
3529  1229  B7          	or	a, a
3530  122A  20 04       	jr	NZ,l_player_lost_life_00117
3531  122C  21 00 00    	ld	hl,_player_lives
3532  122F  35          	dec	(hl)
3533  1230              l_player_lost_life_00117:
3534  1230  21 00 00    	ld	hl,_player_mana
3535  1233  36 64       	ld	(hl),0x64
3536  1235  21 00 00    	ld	hl,_player_vita
3537  1238  36 64       	ld	(hl),0x64
3538  123A  3A 00 00    	ld	a,(_player_lives)
3539  123D  B7          	or	a, a
3540  123E  28 1D       	jr	Z,l_player_lost_life_00119
3541  1240  21 F4 01    	ld	hl,0x01f4
3542  1243  CD 00 00    	call	_z80_delay_ms_fastcall
3543  1246  3A 00 00    	ld	a,(_game_checkpoint_col)
3544  1249  32 00 00    	ld	(_player_col_scr),a
3545  124C  3A 00 00    	ld	a,(_game_checkpoint_lin)
3546  124F  32 00 00    	ld	(_player_lin_scr),a
3547  1252  3A 00 00    	ld	a,(_game_checkpoint_scr)
3548  1255  32 00 00    	ld	(_scr_curr),a
3549  1258  CD 00 00    	call	_game_round_init
3550  125B  18 0A       	jr	l_player_lost_life_00125
3551  125D              l_player_lost_life_00119:
3552  125D  21 00 00    	ld	hl,_player_lives
3553  1260  36 00       	ld	(hl),0x00
3554  1262  21 00 00    	ld	hl,_game_over
3555  1265  36 01       	ld	(hl),0x01
3556  1267              l_player_lost_life_00125:
3557  1267  F1          	pop	af
3558  1268  DD E1       	pop	ix
3559  126A  C9          	ret
3560  126B              	SECTION code_compiler
3561  126B              ;	---------------------------------
3562  126B              ; Function player_hit
3563  126B              ; ---------------------------------
3564  126B              _player_hit:
3565  126B  7D          	ld	a,l
3566  126C  4D          	ld	c,l
3567  126D  21 00 00    	ld	hl,_player_vita
3568  1270  96          	sub	a, (hl)
3569  1271  30 22       	jr	NC,l_player_hit_00104
3570  1273  3A 00 00    	ld	a,(_game_inmune)
3571  1276  B7          	or	a, a
3572  1277  20 06       	jr	NZ,l_player_hit_00102
3573  1279  21 00 00    	ld	hl,_player_vita
3574  127C  7E          	ld	a, (hl)
3575  127D  91          	sub	a, c
3576  127E  77          	ld	(hl), a
3577  127F              l_player_hit_00102:
3578  127F  2A 00 00    	ld	hl,(_curr_time)
3579  1282  22 00 00    	ld	(_player_hit_time),hl
3580  1285  21 00 00    	ld	hl,_ay_fx_04_golpe
3581  1288  E5          	push	hl
3582  1289  21 01 04    	ld	hl,0x0401
3583  128C  E5          	push	hl
3584  128D  CD 00 00    	call	_ay_song_play
3585  1290  CD 00 00    	call	_game_update_stats
3586  1293  18 03       	jr	l_player_hit_00106
3587  1295              l_player_hit_00104:
3588  1295  CD CA 10    	call	_player_lost_life
3589  1298              l_player_hit_00106:
3590  1298  C9          	ret
3591  1299              	SECTION IGNORE
3592  0000              
