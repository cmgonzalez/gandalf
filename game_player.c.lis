1     0000              MODULE game_player_c
2     0000              
3     0000              ;--------------------------------------------------------
4     0000              ; File Created by SDCC : free open source ANSI-C Compiler
5     0000              ; Version 3.6.5 #9958 (Mac OS X i386)
6     0000              ;--------------------------------------------------------
7     0000              ; Processed by Z88DK
8     0000              ;--------------------------------------------------------
9     0000              
10    0000              	EXTERN __divschar
11    0000              	EXTERN __divschar_callee
12    0000              	EXTERN __divsint
13    0000              	EXTERN __divsint_callee
14    0000              	EXTERN __divslong
15    0000              	EXTERN __divslong_callee
16    0000              	EXTERN __divslonglong
17    0000              	EXTERN __divslonglong_callee
18    0000              	EXTERN __divsuchar
19    0000              	EXTERN __divsuchar_callee
20    0000              	EXTERN __divuchar
21    0000              	EXTERN __divuchar_callee
22    0000              	EXTERN __divuint
23    0000              	EXTERN __divuint_callee
24    0000              	EXTERN __divulong
25    0000              	EXTERN __divulong_callee
26    0000              	EXTERN __divulonglong
27    0000              	EXTERN __divulonglong_callee
28    0000              	EXTERN __divuschar
29    0000              	EXTERN __divuschar_callee
30    0000              	EXTERN __modschar
31    0000              	EXTERN __modschar_callee
32    0000              	EXTERN __modsint
33    0000              	EXTERN __modsint_callee
34    0000              	EXTERN __modslong
35    0000              	EXTERN __modslong_callee
36    0000              	EXTERN __modslonglong
37    0000              	EXTERN __modslonglong_callee
38    0000              	EXTERN __modsuchar
39    0000              	EXTERN __modsuchar_callee
40    0000              	EXTERN __moduchar
41    0000              	EXTERN __moduchar_callee
42    0000              	EXTERN __moduint
43    0000              	EXTERN __moduint_callee
44    0000              	EXTERN __modulong
45    0000              	EXTERN __modulong_callee
46    0000              	EXTERN __modulonglong
47    0000              	EXTERN __modulonglong_callee
48    0000              	EXTERN __moduschar
49    0000              	EXTERN __moduschar_callee
50    0000              	EXTERN __mulint
51    0000              	EXTERN __mulint_callee
52    0000              	EXTERN __mullong
53    0000              	EXTERN __mullong_callee
54    0000              	EXTERN __mullonglong
55    0000              	EXTERN __mullonglong_callee
56    0000              	EXTERN __mulschar
57    0000              	EXTERN __mulschar_callee
58    0000              	EXTERN __mulsuchar
59    0000              	EXTERN __mulsuchar_callee
60    0000              	EXTERN __muluschar
61    0000              	EXTERN __muluschar_callee
62    0000              	EXTERN __rlslonglong
63    0000              	EXTERN __rlslonglong_callee
64    0000              	EXTERN __rlulonglong
65    0000              	EXTERN __rlulonglong_callee
66    0000              	EXTERN __rrslonglong
67    0000              	EXTERN __rrslonglong_callee
68    0000              	EXTERN __rrulonglong
69    0000              	EXTERN __rrulonglong_callee
70    0000              	EXTERN ___sdcc_call_hl
71    0000              	EXTERN ___sdcc_call_iy
72    0000              	EXTERN ___sdcc_enter_ix
73    0000              	EXTERN _banked_call
74    0000              	EXTERN _banked_ret
75    0000              	EXTERN ___fs2schar
76    0000              	EXTERN ___fs2schar_callee
77    0000              	EXTERN ___fs2sint
78    0000              	EXTERN ___fs2sint_callee
79    0000              	EXTERN ___fs2slong
80    0000              	EXTERN ___fs2slong_callee
81    0000              	EXTERN ___fs2slonglong
82    0000              	EXTERN ___fs2slonglong_callee
83    0000              	EXTERN ___fs2uchar
84    0000              	EXTERN ___fs2uchar_callee
85    0000              	EXTERN ___fs2uint
86    0000              	EXTERN ___fs2uint_callee
87    0000              	EXTERN ___fs2ulong
88    0000              	EXTERN ___fs2ulong_callee
89    0000              	EXTERN ___fs2ulonglong
90    0000              	EXTERN ___fs2ulonglong_callee
91    0000              	EXTERN ___fsadd
92    0000              	EXTERN ___fsadd_callee
93    0000              	EXTERN ___fsdiv
94    0000              	EXTERN ___fsdiv_callee
95    0000              	EXTERN ___fseq
96    0000              	EXTERN ___fseq_callee
97    0000              	EXTERN ___fsgt
98    0000              	EXTERN ___fsgt_callee
99    0000              	EXTERN ___fslt
100   0000              	EXTERN ___fslt_callee
101   0000              	EXTERN ___fsmul
102   0000              	EXTERN ___fsmul_callee
103   0000              	EXTERN ___fsneq
104   0000              	EXTERN ___fsneq_callee
105   0000              	EXTERN ___fssub
106   0000              	EXTERN ___fssub_callee
107   0000              	EXTERN ___schar2fs
108   0000              	EXTERN ___schar2fs_callee
109   0000              	EXTERN ___sint2fs
110   0000              	EXTERN ___sint2fs_callee
111   0000              	EXTERN ___slong2fs
112   0000              	EXTERN ___slong2fs_callee
113   0000              	EXTERN ___slonglong2fs
114   0000              	EXTERN ___slonglong2fs_callee
115   0000              	EXTERN ___uchar2fs
116   0000              	EXTERN ___uchar2fs_callee
117   0000              	EXTERN ___uint2fs
118   0000              	EXTERN ___uint2fs_callee
119   0000              	EXTERN ___ulong2fs
120   0000              	EXTERN ___ulong2fs_callee
121   0000              	EXTERN ___ulonglong2fs
122   0000              	EXTERN ___ulonglong2fs_callee
123   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
126   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
127   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
128   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
129   0000              	EXTERN ____sdcc_4_ldi_save_bc
130   0000              	EXTERN ____sdcc_4_push_hlix
131   0000              	EXTERN ____sdcc_4_push_mhl
132   0000              	EXTERN ____sdcc_lib_setmem_hl
133   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
134   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
135   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
136   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
137   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
138   0000              	EXTERN ____sdcc_ll_add_deix_hlix
139   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
140   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
141   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
142   0000              	EXTERN ____sdcc_ll_asr_hlix_a
143   0000              	EXTERN ____sdcc_ll_asr_mbc_a
144   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
145   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
146   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
147   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
148   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
149   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
150   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
151   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
152   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
153   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
155   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
156   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
157   0000              	EXTERN ____sdcc_ll_push_hlix
158   0000              	EXTERN ____sdcc_ll_push_mhl
159   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
160   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
161   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
162   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
163   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
164   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
165   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
166   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
167   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
168   0000              	EXTERN ____sdcc_load_debc_deix
169   0000              	EXTERN ____sdcc_load_dehl_deix
170   0000              	EXTERN ____sdcc_load_debc_mhl
171   0000              	EXTERN ____sdcc_load_hlde_mhl
172   0000              	EXTERN ____sdcc_store_dehl_bcix
173   0000              	EXTERN ____sdcc_store_debc_hlix
174   0000              	EXTERN ____sdcc_store_debc_mhl
175   0000              	EXTERN ____sdcc_cpu_pop_ei
176   0000              	EXTERN ____sdcc_cpu_pop_ei_jp
177   0000              	EXTERN ____sdcc_cpu_push_di
178   0000              	EXTERN ____sdcc_outi
179   0000              	EXTERN ____sdcc_outi_128
180   0000              	EXTERN ____sdcc_outi_256
181   0000              	EXTERN ____sdcc_ldi
182   0000              	EXTERN ____sdcc_ldi_128
183   0000              	EXTERN ____sdcc_ldi_256
184   0000              
185   0000              ;--------------------------------------------------------
186   0000              ; Public variables in this module
187   0000              ;--------------------------------------------------------
188   0000              	GLOBAL _player_check_map
189   0000              	GLOBAL _player_1up
190   0000              	GLOBAL _player_init
191   0000              	GLOBAL _player_turn
192   0000              	GLOBAL _player_move
193   0000              	GLOBAL _player_check_input
194   0000              	GLOBAL _player_move_input
195   0000              	GLOBAL _player_fix_walk_lin
196   0000              	GLOBAL _player_fire
197   0000              	GLOBAL _player_collision
198   0000              	GLOBAL _player_pick_mushroom
199   0000              	GLOBAL _player_check_stairs_vertical
200   0000              	GLOBAL _player_check_stairs
201   0000              	GLOBAL _player_anim_tile
202   0000              	GLOBAL _player_tile
203   0000              	GLOBAL _player_pick_item
204   0000              	GLOBAL _player_hit_platform
205   0000              	GLOBAL _player_hit_platform_clear
206   0000              	GLOBAL _player_score_add
207   0000              	GLOBAL _player_check_floor
208   0000              	GLOBAL _player_gasta_brick
209   0000              	GLOBAL _player_move_jump
210   0000              	GLOBAL _player_open_door
211   0000              	GLOBAL _player_lost_life
212   0000              	GLOBAL _player_hit
213   0000              ;--------------------------------------------------------
214   0000              ; Externals used
215   0000              ;--------------------------------------------------------
216   0000              	GLOBAL _ulltoa_callee
217   0000              	GLOBAL _ulltoa
218   0000              	GLOBAL _strtoull_callee
219   0000              	GLOBAL _strtoull
220   0000              	GLOBAL _strtoll_callee
221   0000              	GLOBAL _strtoll
222   0000              	GLOBAL _lltoa_callee
223   0000              	GLOBAL _lltoa
224   0000              	GLOBAL _llabs_callee
225   0000              	GLOBAL _llabs
226   0000              	GLOBAL __lldivu__callee
227   0000              	GLOBAL __lldivu_
228   0000              	GLOBAL __lldiv__callee
229   0000              	GLOBAL __lldiv_
230   0000              	GLOBAL _atoll_callee
231   0000              	GLOBAL _atoll
232   0000              	GLOBAL _realloc_unlocked_callee
233   0000              	GLOBAL _realloc_unlocked
234   0000              	GLOBAL _malloc_unlocked_fastcall
235   0000              	GLOBAL _malloc_unlocked
236   0000              	GLOBAL _free_unlocked_fastcall
237   0000              	GLOBAL _free_unlocked
238   0000              	GLOBAL _calloc_unlocked_callee
239   0000              	GLOBAL _calloc_unlocked
240   0000              	GLOBAL _aligned_alloc_unlocked_callee
241   0000              	GLOBAL _aligned_alloc_unlocked
242   0000              	GLOBAL _realloc_callee
243   0000              	GLOBAL _realloc
244   0000              	GLOBAL _malloc_fastcall
245   0000              	GLOBAL _malloc
246   0000              	GLOBAL _free_fastcall
247   0000              	GLOBAL _free
248   0000              	GLOBAL _calloc_callee
249   0000              	GLOBAL _calloc
250   0000              	GLOBAL _aligned_alloc_callee
251   0000              	GLOBAL _aligned_alloc
252   0000              	GLOBAL _utoa_callee
253   0000              	GLOBAL _utoa
254   0000              	GLOBAL _ultoa_callee
255   0000              	GLOBAL _ultoa
256   0000              	GLOBAL _system_fastcall
257   0000              	GLOBAL _system
258   0000              	GLOBAL _strtoul_callee
259   0000              	GLOBAL _strtoul
260   0000              	GLOBAL _strtol_callee
261   0000              	GLOBAL _strtol
262   0000              	GLOBAL _strtof_callee
263   0000              	GLOBAL _strtof
264   0000              	GLOBAL _strtod_callee
265   0000              	GLOBAL _strtod
266   0000              	GLOBAL _srand_fastcall
267   0000              	GLOBAL _srand
268   0000              	GLOBAL _rand
269   0000              	GLOBAL _quick_exit_fastcall
270   0000              	GLOBAL _quick_exit
271   0000              	GLOBAL _qsort_callee
272   0000              	GLOBAL _qsort
273   0000              	GLOBAL _ltoa_callee
274   0000              	GLOBAL _ltoa
275   0000              	GLOBAL _labs_fastcall
276   0000              	GLOBAL _labs
277   0000              	GLOBAL _itoa_callee
278   0000              	GLOBAL _itoa
279   0000              	GLOBAL _ftoh_callee
280   0000              	GLOBAL _ftoh
281   0000              	GLOBAL _ftog_callee
282   0000              	GLOBAL _ftog
283   0000              	GLOBAL _ftoe_callee
284   0000              	GLOBAL _ftoe
285   0000              	GLOBAL _ftoa_callee
286   0000              	GLOBAL _ftoa
287   0000              	GLOBAL _exit_fastcall
288   0000              	GLOBAL _exit
289   0000              	GLOBAL _dtoh_callee
290   0000              	GLOBAL _dtoh
291   0000              	GLOBAL _dtog_callee
292   0000              	GLOBAL _dtog
293   0000              	GLOBAL _dtoe_callee
294   0000              	GLOBAL _dtoe
295   0000              	GLOBAL _dtoa_callee
296   0000              	GLOBAL _dtoa
297   0000              	GLOBAL _bsearch_callee
298   0000              	GLOBAL _bsearch
299   0000              	GLOBAL _atol_fastcall
300   0000              	GLOBAL _atol
301   0000              	GLOBAL _atoi_fastcall
302   0000              	GLOBAL _atoi
303   0000              	GLOBAL _atof_fastcall
304   0000              	GLOBAL _atof
305   0000              	GLOBAL _atexit_fastcall
306   0000              	GLOBAL _atexit
307   0000              	GLOBAL _at_quick_exit_fastcall
308   0000              	GLOBAL _at_quick_exit
309   0000              	GLOBAL _abs_fastcall
310   0000              	GLOBAL _abs
311   0000              	GLOBAL _abort
312   0000              	GLOBAL __strtou__callee
313   0000              	GLOBAL __strtou_
314   0000              	GLOBAL __strtoi__callee
315   0000              	GLOBAL __strtoi_
316   0000              	GLOBAL __random_uniform_xor_8__fastcall
317   0000              	GLOBAL __random_uniform_xor_8_
318   0000              	GLOBAL __random_uniform_xor_32__fastcall
319   0000              	GLOBAL __random_uniform_xor_32_
320   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
321   0000              	GLOBAL __random_uniform_cmwc_8_
322   0000              	GLOBAL __shellsort__callee
323   0000              	GLOBAL __shellsort_
324   0000              	GLOBAL __quicksort__callee
325   0000              	GLOBAL __quicksort_
326   0000              	GLOBAL __insertion_sort__callee
327   0000              	GLOBAL __insertion_sort_
328   0000              	GLOBAL __ldivu__callee
329   0000              	GLOBAL __ldivu_
330   0000              	GLOBAL __ldiv__callee
331   0000              	GLOBAL __ldiv_
332   0000              	GLOBAL __divu__callee
333   0000              	GLOBAL __divu_
334   0000              	GLOBAL __div__callee
335   0000              	GLOBAL __div_
336   0000              	GLOBAL _NIRVANAP_drawTW_raw_callee
337   0000              	GLOBAL _NIRVANAP_drawTW_raw
338   0000              	GLOBAL _NIRVANAP_drawTW_callee
339   0000              	GLOBAL _NIRVANAP_drawTW
340   0000              	GLOBAL _NIRVANAP_drawW_raw_callee
341   0000              	GLOBAL _NIRVANAP_drawW_raw
342   0000              	GLOBAL _NIRVANAP_drawW_callee
343   0000              	GLOBAL _NIRVANAP_drawW
344   0000              	GLOBAL _NIRVANAP_spriteT_callee
345   0000              	GLOBAL _NIRVANAP_spriteT
346   0000              	GLOBAL _NIRVANAP_fillC_callee
347   0000              	GLOBAL _NIRVANAP_fillC
348   0000              	GLOBAL _NIRVANAP_readC_callee
349   0000              	GLOBAL _NIRVANAP_readC
350   0000              	GLOBAL _NIRVANAP_paintC_callee
351   0000              	GLOBAL _NIRVANAP_paintC
352   0000              	GLOBAL _NIRVANAP_printC_callee
353   0000              	GLOBAL _NIRVANAP_printC
354   0000              	GLOBAL _NIRVANAP_fillT_raw_callee
355   0000              	GLOBAL _NIRVANAP_fillT_raw
356   0000              	GLOBAL _NIRVANAP_fillT_callee
357   0000              	GLOBAL _NIRVANAP_fillT
358   0000              	GLOBAL _NIRVANAP_drawT_raw_callee
359   0000              	GLOBAL _NIRVANAP_drawT_raw
360   0000              	GLOBAL _NIRVANAP_drawT_callee
361   0000              	GLOBAL _NIRVANAP_drawT
362   0000              	GLOBAL _NIRVANAP_stop
363   0000              	GLOBAL _NIRVANAP_start
364   0000              	GLOBAL _debug3
365   0000              	GLOBAL _debug2
366   0000              	GLOBAL _debug
367   0000              	GLOBAL _zx_print_str
368   0000              	GLOBAL _zx_print_int
369   0000              	GLOBAL _zx_print_chr
370   0000              	GLOBAL _zx_print_bonus_time
371   0000              	GLOBAL _zx_isr
372   0000              	GLOBAL _z80_otdr_callee
373   0000              	GLOBAL _z80_otdr
374   0000              	GLOBAL _z80_otir_callee
375   0000              	GLOBAL _z80_otir
376   0000              	GLOBAL _z80_outp_callee
377   0000              	GLOBAL _z80_outp
378   0000              	GLOBAL _z80_indr_callee
379   0000              	GLOBAL _z80_indr
380   0000              	GLOBAL _z80_inir_callee
381   0000              	GLOBAL _z80_inir
382   0000              	GLOBAL _z80_inp_fastcall
383   0000              	GLOBAL _z80_inp
384   0000              	GLOBAL _z80_set_int_state_fastcall
385   0000              	GLOBAL _z80_set_int_state
386   0000              	GLOBAL _z80_get_int_state
387   0000              	GLOBAL _z80_delay_tstate_fastcall
388   0000              	GLOBAL _z80_delay_tstate
389   0000              	GLOBAL _z80_delay_ms_fastcall
390   0000              	GLOBAL _z80_delay_ms
391   0000              	GLOBAL _im2_remove_generic_callback_callee
392   0000              	GLOBAL _im2_remove_generic_callback
393   0000              	GLOBAL _im2_prepend_generic_callback_callee
394   0000              	GLOBAL _im2_prepend_generic_callback
395   0000              	GLOBAL _im2_append_generic_callback_callee
396   0000              	GLOBAL _im2_append_generic_callback
397   0000              	GLOBAL _im2_create_generic_isr_8080_callee
398   0000              	GLOBAL _im2_create_generic_isr_8080
399   0000              	GLOBAL _im2_create_generic_isr_callee
400   0000              	GLOBAL _im2_create_generic_isr
401   0000              	GLOBAL _im2_install_isr_callee
402   0000              	GLOBAL _im2_install_isr
403   0000              	GLOBAL _im2_init_fastcall
404   0000              	GLOBAL _im2_init
405   0000              	GLOBAL _intrinsic_swap_word_32_fastcall
406   0000              	GLOBAL _intrinsic_swap_word_32
407   0000              	GLOBAL _intrinsic_swap_endian_32_fastcall
408   0000              	GLOBAL _intrinsic_swap_endian_32
409   0000              	GLOBAL _intrinsic_swap_endian_16_fastcall
410   0000              	GLOBAL _intrinsic_swap_endian_16
411   0000              	GLOBAL _intrinsic_return_de
412   0000              	GLOBAL _intrinsic_return_bc
413   0000              	GLOBAL _intrinsic_exx
414   0000              	GLOBAL _intrinsic_ex_de_hl
415   0000              	GLOBAL _intrinsic_nop
416   0000              	GLOBAL _intrinsic_im_2
417   0000              	GLOBAL _intrinsic_im_1
418   0000              	GLOBAL _intrinsic_im_0
419   0000              	GLOBAL _intrinsic_retn
420   0000              	GLOBAL _intrinsic_reti
421   0000              	GLOBAL _intrinsic_halt
422   0000              	GLOBAL _intrinsic_ei
423   0000              	GLOBAL _intrinsic_di
424   0000              	GLOBAL _intrinsic_stub
425   0000              	GLOBAL _intrinsic_outi
426   0000              	GLOBAL _intrinsic_ldi
427   0000              	GLOBAL _zx_pattern_fill_callee
428   0000              	GLOBAL _zx_pattern_fill
429   0000              	GLOBAL _zx_saddrpup_fastcall
430   0000              	GLOBAL _zx_saddrpup
431   0000              	GLOBAL _zx_saddrpright_callee
432   0000              	GLOBAL _zx_saddrpright
433   0000              	GLOBAL _zx_saddrpleft_callee
434   0000              	GLOBAL _zx_saddrpleft
435   0000              	GLOBAL _zx_saddrpdown_fastcall
436   0000              	GLOBAL _zx_saddrpdown
437   0000              	GLOBAL _zx_saddrcup_fastcall
438   0000              	GLOBAL _zx_saddrcup
439   0000              	GLOBAL _zx_saddrcright_fastcall
440   0000              	GLOBAL _zx_saddrcright
441   0000              	GLOBAL _zx_saddrcleft_fastcall
442   0000              	GLOBAL _zx_saddrcleft
443   0000              	GLOBAL _zx_saddrcdown_fastcall
444   0000              	GLOBAL _zx_saddrcdown
445   0000              	GLOBAL _zx_saddr2py_fastcall
446   0000              	GLOBAL _zx_saddr2py
447   0000              	GLOBAL _zx_saddr2px_fastcall
448   0000              	GLOBAL _zx_saddr2px
449   0000              	GLOBAL _zx_saddr2cy_fastcall
450   0000              	GLOBAL _zx_saddr2cy
451   0000              	GLOBAL _zx_saddr2cx_fastcall
452   0000              	GLOBAL _zx_saddr2cx
453   0000              	GLOBAL _zx_saddr2aaddr_fastcall
454   0000              	GLOBAL _zx_saddr2aaddr
455   0000              	GLOBAL _zx_py2saddr_fastcall
456   0000              	GLOBAL _zx_py2saddr
457   0000              	GLOBAL _zx_py2aaddr_fastcall
458   0000              	GLOBAL _zx_py2aaddr
459   0000              	GLOBAL _zx_pxy2saddr_callee
460   0000              	GLOBAL _zx_pxy2saddr
461   0000              	GLOBAL _zx_pxy2aaddr_callee
462   0000              	GLOBAL _zx_pxy2aaddr
463   0000              	GLOBAL _zx_px2bitmask_fastcall
464   0000              	GLOBAL _zx_px2bitmask
465   0000              	GLOBAL _zx_cy2saddr_fastcall
466   0000              	GLOBAL _zx_cy2saddr
467   0000              	GLOBAL _zx_cy2aaddr_fastcall
468   0000              	GLOBAL _zx_cy2aaddr
469   0000              	GLOBAL _zx_cxy2saddr_callee
470   0000              	GLOBAL _zx_cxy2saddr
471   0000              	GLOBAL _zx_cxy2aaddr_callee
472   0000              	GLOBAL _zx_cxy2aaddr
473   0000              	GLOBAL _zx_bitmask2px_fastcall
474   0000              	GLOBAL _zx_bitmask2px
475   0000              	GLOBAL _zx_aaddrcup_fastcall
476   0000              	GLOBAL _zx_aaddrcup
477   0000              	GLOBAL _zx_aaddrcright_fastcall
478   0000              	GLOBAL _zx_aaddrcright
479   0000              	GLOBAL _zx_aaddrcleft_fastcall
480   0000              	GLOBAL _zx_aaddrcleft
481   0000              	GLOBAL _zx_aaddrcdown_fastcall
482   0000              	GLOBAL _zx_aaddrcdown
483   0000              	GLOBAL _zx_aaddr2saddr_fastcall
484   0000              	GLOBAL _zx_aaddr2saddr
485   0000              	GLOBAL _zx_aaddr2py_fastcall
486   0000              	GLOBAL _zx_aaddr2py
487   0000              	GLOBAL _zx_aaddr2px_fastcall
488   0000              	GLOBAL _zx_aaddr2px
489   0000              	GLOBAL _zx_aaddr2cy_fastcall
490   0000              	GLOBAL _zx_aaddr2cy
491   0000              	GLOBAL _zx_aaddr2cx_fastcall
492   0000              	GLOBAL _zx_aaddr2cx
493   0000              	GLOBAL _zx_visit_wc_pix_callee
494   0000              	GLOBAL _zx_visit_wc_pix
495   0000              	GLOBAL _zx_visit_wc_attr_callee
496   0000              	GLOBAL _zx_visit_wc_attr
497   0000              	GLOBAL _zx_scroll_wc_up_pix_callee
498   0000              	GLOBAL _zx_scroll_wc_up_pix
499   0000              	GLOBAL _zx_scroll_wc_up_attr_callee
500   0000              	GLOBAL _zx_scroll_wc_up_attr
501   0000              	GLOBAL _zx_scroll_wc_up_callee
502   0000              	GLOBAL _zx_scroll_wc_up
503   0000              	GLOBAL _zx_scroll_up_pix_callee
504   0000              	GLOBAL _zx_scroll_up_pix
505   0000              	GLOBAL _zx_scroll_up_attr_callee
506   0000              	GLOBAL _zx_scroll_up_attr
507   0000              	GLOBAL _zx_scroll_up_callee
508   0000              	GLOBAL _zx_scroll_up
509   0000              	GLOBAL _zx_cls_wc_pix_callee
510   0000              	GLOBAL _zx_cls_wc_pix
511   0000              	GLOBAL _zx_cls_wc_attr_callee
512   0000              	GLOBAL _zx_cls_wc_attr
513   0000              	GLOBAL _zx_cls_wc_callee
514   0000              	GLOBAL _zx_cls_wc
515   0000              	GLOBAL _zx_cls_pix_fastcall
516   0000              	GLOBAL _zx_cls_pix
517   0000              	GLOBAL _zx_cls_attr_fastcall
518   0000              	GLOBAL _zx_cls_attr
519   0000              	GLOBAL _zx_cls_fastcall
520   0000              	GLOBAL _zx_cls
521   0000              	GLOBAL _zx_border_fastcall
522   0000              	GLOBAL _zx_border
523   0000              	GLOBAL _spr_colision_boss
524   0000              	GLOBAL _spr_colision_b
525   0000              	GLOBAL _spr_unflatten
526   0000              	GLOBAL _spr_flatten
527   0000              	GLOBAL _spr_btile_paint_back
528   0000              	GLOBAL _spr_bullet_explode
529   0000              	GLOBAL _spr_init_effects
530   0000              	GLOBAL _spr_turn_horizontal
531   0000              	GLOBAL _spr_bullets_play
532   0000              	GLOBAL _spr_play_anim
533   0000              	GLOBAL _spr_add_anim
534   0000              	GLOBAL _spr_clear_scr
535   0000              	GLOBAL _spr_page_map
536   0000              	GLOBAL _spr_page_down
537   0000              	GLOBAL _spr_page_up
538   0000              	GLOBAL _spr_page_right
539   0000              	GLOBAL _spr_page_left
540   0000              	GLOBAL _spr_tile_paint
541   0000              	GLOBAL _spr_draw_index
542   0000              	GLOBAL _spr_brick_anim
543   0000              	GLOBAL _spr_back_repaint
544   0000              	GLOBAL _spr_tile
545   0000              	GLOBAL _spr_destroy
546   0000              	GLOBAL _spr_tile_dir
547   0000              	GLOBAL _spr_redraw
548   0000              	GLOBAL _spr_move_left
549   0000              	GLOBAL _spr_move_right
550   0000              	GLOBAL _spr_move_horizontal
551   0000              	GLOBAL _spr_move_down
552   0000              	GLOBAL _spr_move_up
553   0000              	GLOBAL _spr_set_right
554   0000              	GLOBAL _spr_set_left
555   0000              	GLOBAL _spr_set_down
556   0000              	GLOBAL _spr_set_up
557   0000              	GLOBAL _spr_calc_index
558   0000              	GLOBAL _spr_chktime
559   0000              	GLOBAL _menu_define_key
560   0000              	GLOBAL _menu_redefine
561   0000              	GLOBAL _menu_main_print
562   0000              	GLOBAL _menu_main
563   0000              	GLOBAL _game_match_back
564   0000              	GLOBAL _game_attribs
565   0000              	GLOBAL _game_boss_clear
566   0000              	GLOBAL _game_boss_kill
567   0000              	GLOBAL _game_obj_clear
568   0000              	GLOBAL _game_obj_chk
569   0000              	GLOBAL _game_obj_set
570   0000              	GLOBAL _game_shoot_fire_boss
571   0000              	GLOBAL _game_shoot_fire
572   0000              	GLOBAL _game_add_enemy
573   0000              	GLOBAL _game_print_header
574   0000              	GLOBAL _game_check_time
575   0000              	GLOBAL _game_rotate_attrib_osd
576   0000              	GLOBAL _game_rotate_attrib
577   0000              	GLOBAL _game_colour_message
578   0000              	GLOBAL _game_paint_attrib
579   0000              	GLOBAL _game_print_score
580   0000              	GLOBAL _game_check_cell
581   0000              	GLOBAL _game_check_map
582   0000              	GLOBAL _game_loop
583   0000              	GLOBAL _game_round_init
584   0000              	GLOBAL _game_set_checkpoint
585   0000              	GLOBAL _game_start_timer
586   0000              	GLOBAL _game_update_stats
587   0000              	GLOBAL _game_print_footer
588   0000              	GLOBAL _game_fill_row
589   0000              	GLOBAL _game_fps
590   0000              	GLOBAL _game_respawn
591   0000              	GLOBAL _game_draw_screen
592   0000              	GLOBAL _boss_draw_frame
593   0000              	GLOBAL _boss_draw
594   0000              	GLOBAL _boss_turn
595   0000              	GLOBAL _enemy_avoid_dead
596   0000              	GLOBAL _enemy_avoid_fall
597   0000              	GLOBAL _enemy_kill
598   0000              	GLOBAL _enemy_respawn
599   0000              	GLOBAL _enemy_init
600   0000              	GLOBAL _enemy_move
601   0000              	GLOBAL _enemy_turn
602   0000              	GLOBAL _enemy_static
603   0000              	GLOBAL _enemy_walk
604   0000              	GLOBAL _enemy_horizontal
605   0000              	GLOBAL _enemy_vertical
606   0000              	GLOBAL _ay_reset
607   0000              	GLOBAL _ay_song_stop
608   0000              	GLOBAL _ay_song_play
609   0000              	GLOBAL _ay_fx_stop
610   0000              	GLOBAL _ay_fx_play
611   0000              	GLOBAL _ay_is_playing
612   0000              	GLOBAL _test_func
613   0000              	GLOBAL _test_proc
614   0000              	GLOBAL _in_mouse_kempston_wheel_delta
615   0000              	GLOBAL _in_mouse_kempston_wheel
616   0000              	GLOBAL _in_mouse_kempston_callee
617   0000              	GLOBAL _in_mouse_kempston
618   0000              	GLOBAL _in_mouse_kempston_setpos_callee
619   0000              	GLOBAL _in_mouse_kempston_setpos
620   0000              	GLOBAL _in_mouse_kempston_reset
621   0000              	GLOBAL _in_mouse_kempston_init
622   0000              	GLOBAL _in_mouse_amx_wheel_delta
623   0000              	GLOBAL _in_mouse_amx_wheel
624   0000              	GLOBAL _in_mouse_amx_callee
625   0000              	GLOBAL _in_mouse_amx
626   0000              	GLOBAL _in_mouse_amx_setpos_callee
627   0000              	GLOBAL _in_mouse_amx_setpos
628   0000              	GLOBAL _in_mouse_amx_reset
629   0000              	GLOBAL _in_mouse_amx_init_callee
630   0000              	GLOBAL _in_mouse_amx_init
631   0000              	GLOBAL _in_stick_sinclair2
632   0000              	GLOBAL _in_stick_sinclair1
633   0000              	GLOBAL _in_stick_kempston
634   0000              	GLOBAL _in_stick_fuller
635   0000              	GLOBAL _in_stick_cursor
636   0000              	GLOBAL _in_stick_keyboard_fastcall
637   0000              	GLOBAL _in_stick_keyboard
638   0000              	GLOBAL _in_wait_nokey
639   0000              	GLOBAL _in_wait_key
640   0000              	GLOBAL _in_test_key
641   0000              	GLOBAL _in_pause_fastcall
642   0000              	GLOBAL _in_pause
643   0000              	GLOBAL _in_key_scancode_fastcall
644   0000              	GLOBAL _in_key_scancode
645   0000              	GLOBAL _in_key_pressed_fastcall
646   0000              	GLOBAL _in_key_pressed
647   0000              	GLOBAL _in_inkey
648   0000              	GLOBAL _NIRVANAP_CHAR_TABLE
649   0000              	GLOBAL _NIRVANAP_WIDE_IMAGES
650   0000              	GLOBAL _NIRVANAP_TILE_IMAGES
651   0000              	GLOBAL _NIRVANAP_HOLE
652   0000              	GLOBAL _NIRVANAP_ISR_HOOK
653   0000              	GLOBAL _scan_map
654   0000              	GLOBAL _key_map
655   0000              	GLOBAL _player_lvl_table
656   0000              	GLOBAL _stp_row
657   0000              	GLOBAL _stp_col
658   0000              	GLOBAL _stp_tile
659   0000              	GLOBAL _map_paper_last_a
660   0000              	GLOBAL _map_paper_last
661   0000              	GLOBAL _map_paper_clr
662   0000              	GLOBAL _map_paper
663   0000              	GLOBAL _draw_count
664   0000              	GLOBAL _g_player_hit_right
665   0000              	GLOBAL _g_player_hit_left
666   0000              	GLOBAL _bullet_count
667   0000              	GLOBAL _spr_hack
668   0000              	GLOBAL _boss_stat
669   0000              	GLOBAL _boss_time_fire
670   0000              	GLOBAL _boss_time
671   0000              	GLOBAL _boss_tile
672   0000              	GLOBAL _boss_inc
673   0000              	GLOBAL _boss_col
674   0000              	GLOBAL _boss_lin
675   0000              	GLOBAL _bullet
676   0000              	GLOBAL _bullet_vel
677   0000              	GLOBAL _bullet_frames
678   0000              	GLOBAL _bullet_colint
679   0000              	GLOBAL _bullet_dir
680   0000              	GLOBAL _bullet_tile
681   0000              	GLOBAL _bullet_col
682   0000              	GLOBAL _bullet_lin
683   0000              	GLOBAL _bullet_col0
684   0000              	GLOBAL _bullet_lin0
685   0000              	GLOBAL _bullet_max
686   0000              	GLOBAL _bullet_class
687   0000              	GLOBAL _mush_class
688   0000              	GLOBAL _mush_index
689   0000              	GLOBAL _anim_count
690   0000              	GLOBAL _anim_respanwn
691   0000              	GLOBAL _anim_loop
692   0000              	GLOBAL _anim_end
693   0000              	GLOBAL _anim_int
694   0000              	GLOBAL _anim_tile
695   0000              	GLOBAL _anim_col
696   0000              	GLOBAL _anim_lin
697   0000              	GLOBAL _map_heigth
698   0000              	GLOBAL _map_width
699   0000              	GLOBAL _scr_curr
700   0000              	GLOBAL _sprite_kind
701   0000              	GLOBAL _scr_obj1
702   0000              	GLOBAL _scr_obj0
703   0000              	GLOBAL _scr_map
704   0000              	GLOBAL _sprite_speed_alt
705   0000              	GLOBAL _spr_init
706   0000              	GLOBAL _spr_map_tile
707   0000              	GLOBAL _sprite_frames
708   0000              	GLOBAL _sprite_speed
709   0000              	GLOBAL _screen_ink
710   0000              	GLOBAL _screen_paper
711   0000              	GLOBAL _player_onstair
712   0000              	GLOBAL _game_start_scr
713   0000              	GLOBAL _game_respawn_tile
714   0000              	GLOBAL _game_respawn_index
715   0000              	GLOBAL _game_respawn_time
716   0000              	GLOBAL _game_score_top
717   0000              	GLOBAL _player_coins
718   0000              	GLOBAL _player_lives
719   0000              	GLOBAL _game_over
720   0000              	GLOBAL _game_sound
721   0000              	GLOBAL _game_inf_lives
722   0000              	GLOBAL _game_inmune
723   0000              	GLOBAL _sprite_curr_index
724   0000              	GLOBAL _spr_count
725   0000              	GLOBAL _bullet_time
726   0000              	GLOBAL _anim_time
727   0000              	GLOBAL _frame_time
728   0000              	GLOBAL _curr_time
729   0000              	GLOBAL _s_state
730   0000              	GLOBAL _attrib_osd
731   0000              	GLOBAL _attrib_hl
732   0000              	GLOBAL _attrib
733   0000              	GLOBAL _zx_val_asm
734   0000              	GLOBAL _enemies
735   0000              	GLOBAL _tmp_ui
736   0000              	GLOBAL _tmp_sc
737   0000              	GLOBAL _tmp_uc
738   0000              	GLOBAL _tmp1
739   0000              	GLOBAL _tmp0
740   0000              	GLOBAL _tmp
741   0000              	GLOBAL _index1
742   0000              	GLOBAL _index0
743   0000              	GLOBAL _loop_count
744   0000              	GLOBAL _s_class
745   0000              	GLOBAL _s_col1
746   0000              	GLOBAL _s_col0
747   0000              	GLOBAL _s_lin1
748   0000              	GLOBAL _s_lin0
749   0000              	GLOBAL _s_tile1
750   0000              	GLOBAL _s_tile0
751   0000              	GLOBAL _player_brick_time
752   0000              	GLOBAL _player_hit_count
753   0000              	GLOBAL _game_show_fps
754   0000              	GLOBAL _sprite_horizontal_check
755   0000              	GLOBAL _sprite_on_air
756   0000              	GLOBAL _sprite
757   0000              	GLOBAL _fps
758   0000              	GLOBAL _game_2buttons
759   0000              	GLOBAL _game_respawn_curr_time
760   0000              	GLOBAL _game_worldup
761   0000              	GLOBAL _game_mush_count
762   0000              	GLOBAL _game_boss_fix
763   0000              	GLOBAL _game_boss_hit
764   0000              	GLOBAL _game_boss_alive
765   0000              	GLOBAL _game_boss
766   0000              	GLOBAL _game_world
767   0000              	GLOBAL _game_gravity
768   0000              	GLOBAL _player_onfire
769   0000              	GLOBAL _player_anim_stair
770   0000              	GLOBAL _player_hit_time
771   0000              	GLOBAL _game_checkpoint_scr
772   0000              	GLOBAL _game_checkpoint_lin
773   0000              	GLOBAL _game_checkpoint_col
774   0000              	GLOBAL _player_lin_scr
775   0000              	GLOBAL _player_col_scr
776   0000              	GLOBAL _player_lvl
777   0000              	GLOBAL _player_int
778   0000              	GLOBAL _player_str
779   0000              	GLOBAL _player_max_vita
780   0000              	GLOBAL _player_max_mana
781   0000              	GLOBAL _player_vita
782   0000              	GLOBAL _player_mana
783   0000              	GLOBAL _player_keys
784   0000              	GLOBAL _player_vel_inc
785   0000              	GLOBAL _player_vel_y1
786   0000              	GLOBAL _player_vel_y0
787   0000              	GLOBAL _player_vel_y
788   0000              	GLOBAL _player_vel_x
789   0000              	GLOBAL _player_score
790   0000              	GLOBAL _last_time
791   0000              	GLOBAL _spr_timer
792   0000              	GLOBAL _jump_lin
793   0000              	GLOBAL _player_hit_col
794   0000              	GLOBAL _player_hit_lin
795   0000              	GLOBAL _colint
796   0000              	GLOBAL _col
797   0000              	GLOBAL _tbuffer
798   0000              	GLOBAL _lin
799   0000              	GLOBAL _tile
800   0000              	GLOBAL _state_a
801   0000              	GLOBAL _state
802   0000              	GLOBAL _class
803   0000              	GLOBAL _dirs_alt
804   0000              	GLOBAL _dirs
805   0000              	GLOBAL _k2
806   0000              	GLOBAL _k1
807   0000              	GLOBAL _joyfunc2
808   0000              	GLOBAL _joyfunc1
809   0000              	GLOBAL _btiles
810   0000              	GLOBAL _spec128
811   0000              	GLOBAL _GLOBAL_ZX_PORT_7FFD
812   0000              	GLOBAL _GLOBAL_ZX_PORT_1FFD
813   0000              	GLOBAL _GLOBAL_ZX_PORT_FE
814   0000              	GLOBAL _ay_song_06_ciel
815   0000              	GLOBAL _ay_song_04_sunflower
816   0000              	GLOBAL _ay_song_04_lotr_level_start
817   0000              	GLOBAL _ay_song_04_lotr_level_complete
818   0000              	GLOBAL _ay_song_04_lotr_lose_a_life
819   0000              	GLOBAL _ay_song_04_lotr
820   0000              	GLOBAL _ay_fx_06_explosion1
821   0000              	GLOBAL _ay_fx_06_efecto
822   0000              	GLOBAL _ay_fx_06_disparo2
823   0000              	GLOBAL _ay_fx_06_disparo1
824   0000              	GLOBAL _ay_fx_04_sin_mana
825   0000              	GLOBAL _ay_fx_04_salto
826   0000              	GLOBAL _ay_fx_04_pierto_abierta
827   0000              	GLOBAL _ay_fx_04_magia1
828   0000              	GLOBAL _ay_fx_04_golpe
829   0000              	GLOBAL _ay_fx_04_explosion
830   0000              	GLOBAL _ay_fx_04_dano_por_toque
831   0000              	GLOBAL _ay_fx_04_coin
832   0000              	GLOBAL _world0_h
833   0000              	GLOBAL _world0_w
834   0000              	GLOBAL _world0
835   0000              	GLOBAL _paper0
836   0000              	GLOBAL _lenght0
837   0000              	GLOBAL _start_scr0
838   0000              ;--------------------------------------------------------
839   0000              ; special function registers
840   0000              ;--------------------------------------------------------
841   0000              defc _IO_FE	=	0x00fe
842   0000              defc _IO_1FFD	=	0x1ffd
843   0000              defc _IO_7FFD	=	0x7ffd
844   0000              ;--------------------------------------------------------
845   0000              ; ram data
846   0000              ;--------------------------------------------------------
847   0000              	SECTION bss_compiler
848   0000              ;--------------------------------------------------------
849   0000              ; ram data
850   0000              ;--------------------------------------------------------
851   0000              
852   0000              IF 0
853   0000              
854   0000              ; .area _INITIALIZED removed by z88dk
855   0000              
856   0000              
857   0000              ENDIF
858   0000              
859   0000              ;--------------------------------------------------------
860   0000              ; absolute external ram data
861   0000              ;--------------------------------------------------------
862   0000              	SECTION IGNORE
863   0000              ;--------------------------------------------------------
864   0000              ; global & static initialisations
865   0000              ;--------------------------------------------------------
866   0000              	SECTION code_crt_init
867   0000              ;--------------------------------------------------------
868   0000              ; Home
869   0000              ;--------------------------------------------------------
870   0000              	SECTION IGNORE
871   0000              ;--------------------------------------------------------
872   0000              ; code
873   0000              ;--------------------------------------------------------
874   0000              	SECTION code_compiler
875   0000              ;	---------------------------------
876   0000              ; Function player_init
877   0000              ; ---------------------------------
878   0000              _player_init:
879   0000  CD 00 00    	call	___sdcc_enter_ix
880   0003  21 07 00    	ld	hl, +(_class + 0x0007)
881   0006  36 00       	ld	(hl),0x00
882   0008  21 07 00    	ld	hl, +(_tile + 0x0007)
883   000B  DD 7E 06    	ld	a,(ix+6)
884   000E  77          	ld	(hl), a
885   000F  21 07 00    	ld	hl, +(_lin + 0x0007)
886   0012  DD 7E 04    	ld	a,(ix+4)
887   0015  77          	ld	(hl), a
888   0016  21 07 00    	ld	hl, +(_col + 0x0007)
889   0019  DD 7E 05    	ld	a,(ix+5)
890   001C  77          	ld	(hl), a
891   001D  21 07 00    	ld	hl, +(_colint + 0x0007)
892   0020  36 00       	ld	(hl),0x00
893   0022  21 07 00    	ld	hl, +(_state + 0x0007)
894   0025  36 00       	ld	(hl),0x00
895   0027  01 07 00    	ld	bc,_state_a+7
896   002A  AF          	xor	a, a
897   002B  02          	ld	(bc), a
898   002C  21 07 00    	ld	hl, +(_jump_lin + 0x0007)
899   002F  DD 7E 04    	ld	a,(ix+4)
900   0032  77          	ld	(hl), a
901   0033  ED 5B 00 00 	ld	de,(_curr_time)
902   0037  ED 53 0E 00 	ld	(_last_time + 0x000e),de
903   003B  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
904   003E  36 00       	ld	(hl),0x00
905   0040  0A          	ld	a, (bc)
906   0041  F6 11       	or	a,+(0x01|0x10)
907   0043  02          	ld	(bc),a
908   0044  21 00 00    	ld	hl,_player_hit_col
909   0047  36 00       	ld	(hl),0x00
910   0049  21 00 00    	ld	hl,_player_hit_lin
911   004C  36 00       	ld	(hl),0x00
912   004E  21 00 00    	ld	hl,_player_onstair
913   0051  36 00       	ld	(hl),0x00
914   0053  21 00 00    	ld	hl,_player_onfire
915   0056  36 00       	ld	(hl),0x00
916   0058  DD 66 05    	ld	h,(ix+5)
917   005B  DD 6E 04    	ld	l,(ix+4)
918   005E  E5          	push	hl
919   005F  DD 56 06    	ld	d,(ix+6)
920   0062  1E 07       	ld	e,0x07
921   0064  D5          	push	de
922   0065  CD 00 00    	call	_NIRVANAP_spriteT_callee
923   0068  DD E1       	pop	ix
924   006A  C9          	ret
925   006B              	SECTION code_compiler
926   006B              ;	---------------------------------
927   006B              ; Function player_turn
928   006B              ; ---------------------------------
929   006B              _player_turn:
930   006B  21 00 00    	ld	hl,_sprite
931   006E  CD 00 00    	call	_spr_chktime
932   0071  7D          	ld	a, l
933   0072  B7          	or	a, a
934   0073  C8          	ret	Z
935   0074  21 00 00    	ld	hl,_k1
936   0077  E5          	push	hl
937   0078  2A 00 00    	ld	hl,(_joyfunc1)
938   007B  CD 00 00    	call	___sdcc_call_hl
939   007E  F1          	pop	af
940   007F  7D          	ld	a,l
941   0080  32 00 00    	ld	(_dirs),a
942   0083  21 00 00    	ld	hl,_k2
943   0086  E5          	push	hl
944   0087  2A 00 00    	ld	hl,(_joyfunc2)
945   008A  CD 00 00    	call	___sdcc_call_hl
946   008D  F1          	pop	af
947   008E  7D          	ld	a,l
948   008F  32 00 00    	ld	(_dirs_alt),a
949   0092  21 00 00    	ld	hl,_s_class
950   0095  36 00       	ld	(hl),0x00
951   0097  CD 9D 00    	call	_player_move
952   009A  C3 BE 03    	jp  _player_collision
953   009D              	SECTION code_compiler
954   009D              ;	---------------------------------
955   009D              ; Function player_move
956   009D              ; ---------------------------------
957   009D              _player_move:
958   009D  3A 07 00    	ld	a,(_lin + 0x0007)
959   00A0  32 00 00    	ld	(_s_lin0),a
960   00A3  3A 07 00    	ld	a,(_col + 0x0007)
961   00A6  32 00 00    	ld	(_s_col0),a
962   00A9  3A 07 00    	ld	a,(_state + 0x0007)
963   00AC  32 00 00    	ld	(_s_state),a
964   00AF  21 00 00    	ld	hl,_s_state
965   00B2  CB 46       	bit	0, (hl)
966   00B4  20 07       	jr	NZ,l_player_move_00113
967   00B6  21 00 00    	ld	hl,_s_state
968   00B9  CB 4E       	bit	1, (hl)
969   00BB  28 43       	jr	Z,l_player_move_00114
970   00BD              l_player_move_00113:
971   00BD  CD 1F 03    	call	_player_fire
972   00C0  3A 00 00    	ld	a,(_player_vel_y)
973   00C3  21 00 00    	ld	hl,_player_vel_y1
974   00C6  96          	sub	a, (hl)
975   00C7  E2 CC 00    	jp	PO, l_player_move_00162
976   00CA  EE 80       	xor	a,0x80
977   00CC              l_player_move_00162:
978   00CC  F2 E9 00    	jp	P, l_player_move_00106
979   00CF  21 00 00    	ld	hl,_dirs
980   00D2  CB 56       	bit	2, (hl)
981   00D4  28 06       	jr	Z,l_player_move_00102
982   00D6  21 00 00    	ld	hl,_s_state
983   00D9  CD 00 00    	call	_spr_set_left
984   00DC              l_player_move_00102:
985   00DC  21 00 00    	ld	hl,_dirs
986   00DF  CB 4E       	bit	1, (hl)
987   00E1  28 06       	jr	Z,l_player_move_00106
988   00E3  21 00 00    	ld	hl,_s_state
989   00E6  CD 00 00    	call	_spr_set_right
990   00E9              l_player_move_00106:
991   00E9  CD 63 0E    	call	_player_move_jump
992   00EC  7D          	ld	a, l
993   00ED  B7          	or	a, a
994   00EE  28 1C       	jr	Z,l_player_move_00115
995   00F0  3A 00 00    	ld	a,(_player_onstair)
996   00F3  B7          	or	a, a
997   00F4  20 16       	jr	NZ,l_player_move_00115
998   00F6  21 60 08    	ld	hl,0x0860
999   00F9  E5          	push	hl
1000  00FA  CD 26 07    	call	_player_tile
1001  00FD  F1          	pop	af
1002  00FE  18 0C       	jr	l_player_move_00115
1003  0100              l_player_move_00114:
1004  0100  CD 72 01    	call	_player_move_input
1005  0103  3A 00 00    	ld	a,(_player_onstair)
1006  0106  B7          	or	a, a
1007  0107  20 03       	jr	NZ,l_player_move_00115
1008  0109  CD E3 0C    	call	_player_check_floor
1009  010C              l_player_move_00115:
1010  010C  CD 00 00    	call	_spr_redraw
1011  010F  7D          	ld	a, l
1012  0110  B7          	or	a, a
1013  0111  28 03       	jr	Z,l_player_move_00118
1014  0113  CD 47 07    	call	_player_check_map
1015  0116              l_player_move_00118:
1016  0116  3A 00 00    	ld	a,(_player_hit_lin)
1017  0119  B7          	or	a, a
1018  011A  28 03       	jr	Z,l_player_move_00120
1019  011C  CD 4A 0C    	call	_player_hit_platform_clear
1020  011F              l_player_move_00120:
1021  011F  3A 00 00    	ld	a,(_s_state)
1022  0122  32 07 00    	ld	((_state + 0x0007)),a
1023  0125  2E 00       	ld	l,0x00
1024  0127  C9          	ret
1025  0128              	SECTION code_compiler
1026  0128              ;	---------------------------------
1027  0128              ; Function player_check_input
1028  0128              ; ---------------------------------
1029  0128              _player_check_input:
1030  0128  21 00 00    	ld	hl,_dirs
1031  012B  CB 56       	bit	2, (hl)
1032  012D  28 0C       	jr	Z,l_player_check_input_00102
1033  012F  21 00 00    	ld	hl,_dirs
1034  0132  CB 5E       	bit	3, (hl)
1035  0134  28 05       	jr	Z,l_player_check_input_00102
1036  0136  21 00 00    	ld	hl,_dirs
1037  0139  36 00       	ld	(hl),0x00
1038  013B              l_player_check_input_00102:
1039  013B  21 00 00    	ld	hl,_dirs
1040  013E  7E          	ld	a, (hl)
1041  013F  CB 07       	rlc	a
1042  0141  E6 01       	and	a,0x01
1043  0143  CB 47       	bit	0, a
1044  0145  20 28       	jr	NZ,l_player_check_input_00107
1045  0147  CB 56       	bit	2, (hl)
1046  0149  20 24       	jr	NZ,l_player_check_input_00107
1047  014B  21 00 00    	ld	hl,_dirs
1048  014E  CB 5E       	bit	3, (hl)
1049  0150  20 1D       	jr	NZ,l_player_check_input_00107
1050  0152  21 00 00    	ld	hl,_dirs
1051  0155  CB 46       	bit	0, (hl)
1052  0157  20 16       	jr	NZ,l_player_check_input_00107
1053  0159  21 00 00    	ld	hl,_dirs
1054  015C  CB 4E       	bit	1, (hl)
1055  015E  20 0F       	jr	NZ,l_player_check_input_00107
1056  0160  3A 00 00    	ld	a,(_dirs_alt)
1057  0163  CB 07       	rlc	a
1058  0165  E6 01       	and	a,0x01
1059  0167  CB 47       	bit	0, a
1060  0169  20 04       	jr	NZ,l_player_check_input_00107
1061  016B  2E 00       	ld	l,0x00
1062  016D  18 02       	jr	l_player_check_input_00108
1063  016F              l_player_check_input_00107:
1064  016F  2E 01       	ld	l,0x01
1065  0171              l_player_check_input_00108:
1066  0171  C9          	ret
1067  0172              	SECTION code_compiler
1068  0172              ;	---------------------------------
1069  0172              ; Function player_move_input
1070  0172              ; ---------------------------------
1071  0172              _player_move_input:
1072  0172  CD 28 01    	call	_player_check_input
1073  0175  7D          	ld	a, l
1074  0176  B7          	or	a, a
1075  0177  CA DF 02    	jp	Z, l_player_move_input_00147
1076  017A  CD 1F 03    	call	_player_fire
1077  017D  7D          	ld	a, l
1078  017E  B7          	or	a, a
1079  017F  28 0A       	jr	Z,l_player_move_input_00102
1080  0181  21 00 00    	ld	hl,_dirs
1081  0184  36 00       	ld	(hl),0x00
1082  0186  2E 00       	ld	l,0x00
1083  0188  C3 05 03    	jp	l_player_move_input_00149
1084  018B              l_player_move_input_00102:
1085  018B  3A 00 00    	ld	a,(_game_2buttons)
1086  018E  B7          	or	a, a
1087  018F  28 07       	jr	Z,l_player_move_input_00104
1088  0191  3A 00 00    	ld	a,(_dirs)
1089  0194  E6 80       	and	a,0x80
1090  0196  18 16       	jr	l_player_move_input_00105
1091  0198              l_player_move_input_00104:
1092  0198  21 00 00    	ld	hl,_dirs
1093  019B  7E          	ld	a, (hl)
1094  019C  CB 07       	rlc	a
1095  019E  E6 01       	and	a,0x01
1096  01A0  CB 47       	bit	0, a
1097  01A2  28 04       	jr	Z,l_player_move_input_00151
1098  01A4  CB 46       	bit	0, (hl)
1099  01A6  20 04       	jr	NZ,l_player_move_input_00152
1100  01A8              l_player_move_input_00151:
1101  01A8  3E 00       	ld	a,0x00
1102  01AA  18 02       	jr	l_player_move_input_00153
1103  01AC              l_player_move_input_00152:
1104  01AC  3E 01       	ld	a,0x01
1105  01AE              l_player_move_input_00153:
1106  01AE              l_player_move_input_00105:
1107  01AE  B7          	or	a, a
1108  01AF  28 3F       	jr	Z,l_player_move_input_00107
1109  01B1  21 00 00    	ld	hl,_player_vel_inc
1110  01B4  36 01       	ld	(hl),0x01
1111  01B6  21 00 00    	ld	hl,_ay_fx_04_salto
1112  01B9  E5          	push	hl
1113  01BA  21 01 04    	ld	hl,0x0401
1114  01BD  E5          	push	hl
1115  01BE  CD 00 00    	call	_ay_song_play
1116  01C1  21 00 00    	ld	hl,_player_onstair
1117  01C4  36 00       	ld	(hl),0x00
1118  01C6  21 00 00    	ld	hl,_s_state
1119  01C9  CD 00 00    	call	_spr_set_up
1120  01CC  3A 07 00    	ld	a,(_lin + 0x0007)
1121  01CF  32 07 00    	ld	(_jump_lin+7),a
1122  01D2  3A 00 00    	ld	a,(_s_state)
1123  01D5  32 07 00    	ld	((_state + 0x0007)),a
1124  01D8  21 64 08    	ld	hl,0x0864
1125  01DB  E5          	push	hl
1126  01DC  CD 26 07    	call	_player_tile
1127  01DF  F1          	pop	af
1128  01E0  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
1129  01E3  36 02       	ld	(hl),0x02
1130  01E5  3A 00 00    	ld	a,(_player_vel_y0)
1131  01E8  32 00 00    	ld	(_player_vel_y),a
1132  01EB  2E 01       	ld	l,0x01
1133  01ED  C3 05 03    	jp	l_player_move_input_00149
1134  01F0              l_player_move_input_00107:
1135  01F0  21 00 00    	ld	hl,_dirs
1136  01F3  CB 5E       	bit	3, (hl)
1137  01F5  28 20       	jr	Z,l_player_move_input_00111
1138  01F7  CD 06 03    	call	_player_fix_walk_lin
1139  01FA  21 00 00    	ld	hl,_s_state
1140  01FD  CD 00 00    	call	_spr_set_right
1141  0200  01 07 00    	ld	bc,_state_a+7
1142  0203  0A          	ld	a, (bc)
1143  0204  F6 10       	or	a,0x10
1144  0206  E6 F7       	and	a,0xf7
1145  0208  02          	ld	(bc),a
1146  0209  3A 00 00    	ld	a,(_player_onstair)
1147  020C  B7          	or	a, a
1148  020D  28 05       	jr	Z,l_player_move_input_00109
1149  020F  2E 00       	ld	l,0x00
1150  0211  CD 52 06    	call	_player_check_stairs
1151  0214              l_player_move_input_00109:
1152  0214  CD 00 00    	call	_spr_move_horizontal
1153  0217              l_player_move_input_00111:
1154  0217  21 00 00    	ld	hl,_dirs
1155  021A  CB 56       	bit	2, (hl)
1156  021C  28 20       	jr	Z,l_player_move_input_00115
1157  021E  CD 06 03    	call	_player_fix_walk_lin
1158  0221  21 00 00    	ld	hl,_s_state
1159  0224  CD 00 00    	call	_spr_set_left
1160  0227  01 07 00    	ld	bc,_state_a+7
1161  022A  0A          	ld	a, (bc)
1162  022B  F6 08       	or	a,0x08
1163  022D  E6 EF       	and	a,0xef
1164  022F  02          	ld	(bc),a
1165  0230  3A 00 00    	ld	a,(_player_onstair)
1166  0233  B7          	or	a, a
1167  0234  28 05       	jr	Z,l_player_move_input_00113
1168  0236  2E 00       	ld	l,0x00
1169  0238  CD 52 06    	call	_player_check_stairs
1170  023B              l_player_move_input_00113:
1171  023B  CD 00 00    	call	_spr_move_horizontal
1172  023E              l_player_move_input_00115:
1173  023E  21 00 00    	ld	hl,_dirs
1174  0241  CB 46       	bit	0, (hl)
1175  0243  28 39       	jr	Z,l_player_move_input_00127
1176  0245  2E 00       	ld	l,0x00
1177  0247  CD 52 06    	call	_player_check_stairs
1178  024A  3A 00 00    	ld	a,(_player_onstair)
1179  024D  B7          	or	a, a
1180  024E  20 10       	jr	NZ,l_player_move_input_00119
1181  0250  2E 01       	ld	l,0x01
1182  0252  CD 52 06    	call	_player_check_stairs
1183  0255  3A 00 00    	ld	a,(_player_onstair)
1184  0258  B7          	or	a, a
1185  0259  20 05       	jr	NZ,l_player_move_input_00119
1186  025B  2E FE       	ld	l,0xfe
1187  025D  CD B2 05    	call	_player_check_stairs_vertical
1188  0260              l_player_move_input_00119:
1189  0260  3A 00 00    	ld	a,(_player_onstair)
1190  0263  B7          	or	a, a
1191  0264  28 05       	jr	Z,l_player_move_input_00124
1192  0266  CD 00 00    	call	_spr_move_up
1193  0269  18 13       	jr	l_player_move_input_00127
1194  026B              l_player_move_input_00124:
1195  026B  21 00 00    	ld	hl,_dirs
1196  026E  CB 5E       	bit	3, (hl)
1197  0270  20 0C       	jr	NZ,l_player_move_input_00127
1198  0272  21 00 00    	ld	hl,_dirs
1199  0275  CB 56       	bit	2, (hl)
1200  0277  20 05       	jr	NZ,l_player_move_input_00127
1201  0279  2E 00       	ld	l,0x00
1202  027B  C3 05 03    	jp	l_player_move_input_00149
1203  027E              l_player_move_input_00127:
1204  027E  21 00 00    	ld	hl,_dirs
1205  0281  CB 4E       	bit	1, (hl)
1206  0283  28 38       	jr	Z,l_player_move_input_00139
1207  0285  2E 00       	ld	l,0x00
1208  0287  CD 52 06    	call	_player_check_stairs
1209  028A  3A 00 00    	ld	a,(_player_onstair)
1210  028D  B7          	or	a, a
1211  028E  20 10       	jr	NZ,l_player_move_input_00131
1212  0290  2E 01       	ld	l,0x01
1213  0292  CD 52 06    	call	_player_check_stairs
1214  0295  3A 00 00    	ld	a,(_player_onstair)
1215  0298  B7          	or	a, a
1216  0299  20 05       	jr	NZ,l_player_move_input_00131
1217  029B  2E 12       	ld	l,0x12
1218  029D  CD B2 05    	call	_player_check_stairs_vertical
1219  02A0              l_player_move_input_00131:
1220  02A0  3A 00 00    	ld	a,(_player_onstair)
1221  02A3  B7          	or	a, a
1222  02A4  28 05       	jr	Z,l_player_move_input_00136
1223  02A6  CD 00 00    	call	_spr_move_down
1224  02A9  18 12       	jr	l_player_move_input_00139
1225  02AB              l_player_move_input_00136:
1226  02AB  21 00 00    	ld	hl,_dirs
1227  02AE  CB 5E       	bit	3, (hl)
1228  02B0  20 0B       	jr	NZ,l_player_move_input_00139
1229  02B2  21 00 00    	ld	hl,_dirs
1230  02B5  CB 56       	bit	2, (hl)
1231  02B7  20 04       	jr	NZ,l_player_move_input_00139
1232  02B9  2E 00       	ld	l,0x00
1233  02BB  18 48       	jr	l_player_move_input_00149
1234  02BD              l_player_move_input_00139:
1235  02BD  3A 00 00    	ld	a,(_s_state)
1236  02C0  32 07 00    	ld	((_state + 0x0007)),a
1237  02C3  3A 00 00    	ld	a,(_player_onstair)
1238  02C6  B7          	or	a, a
1239  02C7  28 0A       	jr	Z,l_player_move_input_00141
1240  02C9  21 72 00    	ld	hl,0x0072
1241  02CC  E5          	push	hl
1242  02CD  CD 26 07    	call	_player_tile
1243  02D0  F1          	pop	af
1244  02D1  18 08       	jr	l_player_move_input_00142
1245  02D3              l_player_move_input_00141:
1246  02D3  21 60 08    	ld	hl,0x0860
1247  02D6  E5          	push	hl
1248  02D7  CD 26 07    	call	_player_tile
1249  02DA  F1          	pop	af
1250  02DB              l_player_move_input_00142:
1251  02DB  2E 01       	ld	l,0x01
1252  02DD  18 26       	jr	l_player_move_input_00149
1253  02DF              l_player_move_input_00147:
1254  02DF  21 07 00    	ld	hl, +(_colint + 0x0007)
1255  02E2  36 00       	ld	(hl),0x00
1256  02E4  3A 00 00    	ld	a,(_player_onstair)
1257  02E7  B7          	or	a, a
1258  02E8  28 0A       	jr	Z,l_player_move_input_00144
1259  02EA  21 72 00    	ld	hl,0x0072
1260  02ED  E5          	push	hl
1261  02EE  CD 26 07    	call	_player_tile
1262  02F1  F1          	pop	af
1263  02F2  18 08       	jr	l_player_move_input_00145
1264  02F4              l_player_move_input_00144:
1265  02F4  21 70 01    	ld	hl,0x0170
1266  02F7  E5          	push	hl
1267  02F8  CD 26 07    	call	_player_tile
1268  02FB  F1          	pop	af
1269  02FC              l_player_move_input_00145:
1270  02FC  21 00 00    	ld	hl,_s_state
1271  02FF  7E          	ld	a,(hl)
1272  0300  E6 F3       	and	a,+(0xf7&0xfb)
1273  0302  77          	ld	(hl),a
1274  0303  2E 00       	ld	l,0x00
1275  0305              l_player_move_input_00149:
1276  0305  C9          	ret
1277  0306              	SECTION code_compiler
1278  0306              ;	---------------------------------
1279  0306              ; Function player_fix_walk_lin
1280  0306              ; ---------------------------------
1281  0306              _player_fix_walk_lin:
1282  0306  3A 00 00    	ld	a,(_player_onstair)
1283  0309  B7          	or	a, a
1284  030A  C0          	ret	NZ
1285  030B  01 07 00    	ld	bc,_lin+7
1286  030E  3A 00 00    	ld	a,(_s_lin0)
1287  0311  07          	rlca
1288  0312  07          	rlca
1289  0313  07          	rlca
1290  0314  07          	rlca
1291  0315  E6 0F       	and	a,0x0f
1292  0317  07          	rlca
1293  0318  07          	rlca
1294  0319  07          	rlca
1295  031A  07          	rlca
1296  031B  E6 F0       	and	a,0xf0
1297  031D  02          	ld	(bc), a
1298  031E  C9          	ret
1299  031F              	SECTION code_compiler
1300  031F              ;	---------------------------------
1301  031F              ; Function player_fire
1302  031F              ; ---------------------------------
1303  031F              _player_fire:
1304  031F  CD 00 00    	call	___sdcc_enter_ix
1305  0322  3B          	dec	sp
1306  0323  3A 00 00    	ld	a,(_game_2buttons)
1307  0326  B7          	or	a, a
1308  0327  28 0A       	jr	Z,l_player_fire_00102
1309  0329  3A 00 00    	ld	a,(_dirs_alt)
1310  032C  E6 80       	and	a,0x80
1311  032E  32 00 00    	ld	(_player_onfire),a
1312  0331  18 1A       	jr	l_player_fire_00103
1313  0333              l_player_fire_00102:
1314  0333  21 00 00    	ld	hl,_dirs
1315  0336  7E          	ld	a, (hl)
1316  0337  CB 07       	rlc	a
1317  0339  E6 01       	and	a,0x01
1318  033B  CB 47       	bit	0, a
1319  033D  28 04       	jr	Z,l_player_fire_00120
1320  033F  CB 46       	bit	0, (hl)
1321  0341  28 04       	jr	Z,l_player_fire_00121
1322  0343              l_player_fire_00120:
1323  0343  0E 00       	ld	c,0x00
1324  0345  18 02       	jr	l_player_fire_00122
1325  0347              l_player_fire_00121:
1326  0347  0E 01       	ld	c,0x01
1327  0349              l_player_fire_00122:
1328  0349  21 00 00    	ld	hl,_player_onfire
1329  034C  71          	ld	(hl), c
1330  034D              l_player_fire_00103:
1331  034D  3A 00 00    	ld	a,(_player_onfire)
1332  0350  B7          	or	a, a
1333  0351  28 65       	jr	Z,l_player_fire_00117
1334  0353  3A 07 00    	ld	a,(_tile + 0x0007)
1335  0356  FE 70       	cp	a,0x70
1336  0358  28 04       	jr	Z,l_player_fire_00104
1337  035A  D6 71       	sub	a,0x71
1338  035C  20 0D       	jr	NZ,l_player_fire_00105
1339  035E              l_player_fire_00104:
1340  035E  21 60 08    	ld	hl,0x0860
1341  0361  E5          	push	hl
1342  0362  CD 26 07    	call	_player_tile
1343  0365  F1          	pop	af
1344  0366  21 07 00    	ld	hl, +(_colint + 0x0007)
1345  0369  36 00       	ld	(hl),0x00
1346  036B              l_player_fire_00105:
1347  036B  21 00 00    	ld	hl,_player_mana
1348  036E  7E          	ld	a, (hl)
1349  036F  B7          	or	a, a
1350  0370  28 37       	jr	Z,l_player_fire_00113
1351  0372  3A 07 00    	ld	a,(_bullet_col + 0x0007)
1352  0375  3C          	inc	a
1353  0376  20 31       	jr	NZ,l_player_fire_00113
1354  0378  3E 05       	ld	a,0x05
1355  037A  96          	sub	a, (hl)
1356  037B  30 0F       	jr	NC,l_player_fire_00110
1357  037D  3A 00 00    	ld	a,(_game_inmune)
1358  0380  B7          	or	a, a
1359  0381  20 0E       	jr	NZ,l_player_fire_00111
1360  0383  21 00 00    	ld	hl,_player_mana
1361  0386  7E          	ld	a, (hl)
1362  0387  C6 FB       	add	a,0xfb
1363  0389  77          	ld	(hl), a
1364  038A  18 05       	jr	l_player_fire_00111
1365  038C              l_player_fire_00110:
1366  038C  21 00 00    	ld	hl,_player_mana
1367  038F  36 00       	ld	(hl),0x00
1368  0391              l_player_fire_00111:
1369  0391  CD 00 00    	call	_game_update_stats
1370  0394  21 00 00    	ld	hl,_ay_fx_06_disparo1
1371  0397  E5          	push	hl
1372  0398  21 01 06    	ld	hl,0x0601
1373  039B  E5          	push	hl
1374  039C  CD 00 00    	call	_ay_song_play
1375  039F  21 07 78    	ld	hl,0x7807
1376  03A2  E5          	push	hl
1377  03A3  CD 00 00    	call	_game_shoot_fire
1378  03A6  F1          	pop	af
1379  03A7  18 0B       	jr	l_player_fire_00114
1380  03A9              l_player_fire_00113:
1381  03A9  21 00 00    	ld	hl,_ay_fx_04_sin_mana
1382  03AC  E5          	push	hl
1383  03AD  21 01 04    	ld	hl,0x0401
1384  03B0  E5          	push	hl
1385  03B1  CD 00 00    	call	_ay_song_play
1386  03B4              l_player_fire_00114:
1387  03B4  2E 01       	ld	l,0x01
1388  03B6  18 02       	jr	l_player_fire_00118
1389  03B8              l_player_fire_00117:
1390  03B8  2E 00       	ld	l,0x00
1391  03BA              l_player_fire_00118:
1392  03BA  33          	inc	sp
1393  03BB  DD E1       	pop	ix
1394  03BD  C9          	ret
1395  03BE              	SECTION code_compiler
1396  03BE              ;	---------------------------------
1397  03BE              ; Function player_collision
1398  03BE              ; ---------------------------------
1399  03BE              _player_collision:
1400  03BE  3E 19       	ld	a,0x19
1401  03C0  F5          	push	af
1402  03C1  33          	inc	sp
1403  03C2  21 00 00    	ld	hl,_player_hit_time
1404  03C5  E5          	push	hl
1405  03C6  CD 00 00    	call	_game_check_time
1406  03C9  F1          	pop	af
1407  03CA  33          	inc	sp
1408  03CB  7D          	ld	a, l
1409  03CC  B7          	or	a, a
1410  03CD  CA 5E 05    	jp	Z, l_player_collision_00137
1411  03D0  21 00 00    	ld	hl,_sprite
1412  03D3  36 00       	ld	(hl),0x00
1413  03D5  3A 07 00    	ld	a,(_col + 7)
1414  03D8  32 00 00    	ld	(_s_col1),a
1415  03DB  3A 07 00    	ld	a,(_lin + 7)
1416  03DE  32 00 00    	ld	(_s_lin1),a
1417  03E1  C6 08       	add	a,0x08
1418  03E3  4F          	ld	c, a
1419  03E4  3A 00 00    	ld	a, (_s_col1)
1420  03E7  47          	ld	b,a
1421  03E8  C5          	push	bc
1422  03E9  CD 00 00    	call	_spr_calc_index
1423  03EC  F1          	pop	af
1424  03ED  4D          	ld	c, l
1425  03EE  21 00 00    	ld	hl,_sprite_curr_index
1426  03F1  71          	ld	(hl), c
1427  03F2  3E 00       	ld	a, +((_scr_map) & 0xFF)
1428  03F4  86          	add	a, (hl)
1429  03F5  4F          	ld	c, a
1430  03F6  3E 00       	ld	a, +((_scr_map) / 256)
1431  03F8  CE 00       	adc	a,0x00
1432  03FA  47          	ld	b, a
1433  03FB  0A          	ld	a, (bc)
1434  03FC  4F          	ld	c,a
1435  03FD  D6 15       	sub	a,0x15
1436  03FF  20 26       	jr	NZ,l_player_collision_00104
1437  0401  21 00 00    	ld	hl,_s_state
1438  0404  CB 46       	bit	0, (hl)
1439  0406  20 1F       	jr	NZ,l_player_collision_00104
1440  0408  3A 00 00    	ld	a,(_game_checkpoint_scr)
1441  040B  21 00 00    	ld	hl,_scr_curr
1442  040E  96          	sub	a, (hl)
1443  040F  28 05       	jr	Z,l_player_collision_00102
1444  0411  2E 01       	ld	l,0x01
1445  0413  CD 00 00    	call	_zx_border_fastcall
1446  0416              l_player_collision_00102:
1447  0416  3A 00 00    	ld	a,(_s_col1)
1448  0419  32 00 00    	ld	(_player_col_scr),a
1449  041C  3A 00 00    	ld	a,(_s_lin1)
1450  041F  32 00 00    	ld	(_player_lin_scr),a
1451  0422  C5          	push	bc
1452  0423  CD 00 00    	call	_game_set_checkpoint
1453  0426  C1          	pop	bc
1454  0427              l_player_collision_00104:
1455  0427  3E 2F       	ld	a,0x2f
1456  0429  91          	sub	a, c
1457  042A  30 5F       	jr	NC,l_player_collision_00159
1458  042C  79          	ld	a,c
1459  042D  FE 3A       	cp	a,0x3a
1460  042F  30 5A       	jr	NC,l_player_collision_00159
1461  0431  D6 39       	sub	a,0x39
1462  0433  20 32       	jr	NZ,l_player_collision_00112
1463  0435  21 00 00    	ld	hl,_ay_song_04_lotr_level_complete
1464  0438  E5          	push	hl
1465  0439  21 01 04    	ld	hl,0x0401
1466  043C  E5          	push	hl
1467  043D  CD 00 00    	call	_ay_song_play
1468  0440  21 00 00    	ld	hl,___str_0
1469  0443  E5          	push	hl
1470  0444  21 0C 08    	ld	hl,0x080c
1471  0447  E5          	push	hl
1472  0448  CD 00 00    	call	_zx_print_str
1473  044B  AF          	xor	a, a
1474  044C  F5          	push	af
1475  044D  33          	inc	sp
1476  044E  21 E8 03    	ld	hl,0x03e8
1477  0451  E5          	push	hl
1478  0452  21 08 17    	ld	hl,0x1708
1479  0455  E5          	push	hl
1480  0456  3E 0C       	ld	a,0x0c
1481  0458  F5          	push	af
1482  0459  33          	inc	sp
1483  045A  CD 00 00    	call	_game_colour_message
1484  045D  F1          	pop	af
1485  045E  F1          	pop	af
1486  045F  F1          	pop	af
1487  0460  21 00 00    	ld	hl,_game_worldup
1488  0463  36 01       	ld	(hl),0x01
1489  0465  18 24       	jr	l_player_collision_00159
1490  0467              l_player_collision_00112:
1491  0467  21 00 00    	ld	hl,_game_inmune
1492  046A  7E          	ld	a, (hl)
1493  046B  B7          	or	a,a
1494  046C  20 13       	jr	NZ,l_player_collision_00107
1495  046E  B6          	or	a,(hl)
1496  046F  20 10       	jr	NZ,l_player_collision_00107
1497  0471  3E 82       	ld	a,0x82
1498  0473  21 00 00    	ld	hl,_s_lin1
1499  0476  96          	sub	a, (hl)
1500  0477  30 08       	jr	NC,l_player_collision_00107
1501  0479  CD A7 10    	call	_player_lost_life
1502  047C  2E 00       	ld	l,0x00
1503  047E  C3 60 05    	jp	l_player_collision_00138
1504  0481              l_player_collision_00107:
1505  0481  2E 06       	ld	l,0x06
1506  0483  CD 00 00    	call	_zx_border_fastcall
1507  0486  2E 32       	ld	l,0x32
1508  0488  CD 3D 12    	call	_player_hit
1509  048B              l_player_collision_00159:
1510  048B              l_player_collision_00133:
1511  048B  21 00 00    	ld	hl,_sprite
1512  048E  7E          	ld	a, (hl)
1513  048F  D6 07       	sub	a,0x07
1514  0491  D2 5E 05    	jp	NC, l_player_collision_00137
1515  0494  4E          	ld	c,(hl)
1516  0495  06 00       	ld	b,0x00
1517  0497  21 00 00    	ld	hl,_class
1518  049A  09          	add	hl,bc
1519  049B  7E          	ld	a,(hl)
1520  049C  32 00 00    	ld	(_s_class),a
1521  049F  B7          	or	a, a
1522  04A0  CA 57 05    	jp	Z, l_player_collision_00132
1523  04A3  2A 00 00    	ld	hl,(_sprite)
1524  04A6  26 00       	ld	h,0x00
1525  04A8  01 00 00    	ld	bc,_col
1526  04AB  09          	add	hl,bc
1527  04AC  4E          	ld	c,(hl)
1528  04AD  06 00       	ld	b,0x00
1529  04AF  3A 00 00    	ld	a,(_s_col1)
1530  04B2  5F          	ld	e,a
1531  04B3  16 00       	ld	d,0x00
1532  04B5  79          	ld	a, c
1533  04B6  93          	sub	a, e
1534  04B7  6F          	ld	l, a
1535  04B8  78          	ld	a, b
1536  04B9  9A          	sbc	a, d
1537  04BA  67          	ld	h, a
1538  04BB  CD 00 00    	call	_abs_fastcall
1539  04BE  7D          	ld	a,l
1540  04BF  D6 02       	sub	a,0x02
1541  04C1  7C          	ld	a,h
1542  04C2  17          	rla
1543  04C3  3F          	ccf
1544  04C4  1F          	rra
1545  04C5  DE 80       	sbc	a,0x80
1546  04C7  D2 57 05    	jp	NC, l_player_collision_00132
1547  04CA  2A 00 00    	ld	hl,(_sprite)
1548  04CD  26 00       	ld	h,0x00
1549  04CF  01 00 00    	ld	bc,_lin
1550  04D2  09          	add	hl,bc
1551  04D3  4E          	ld	c,(hl)
1552  04D4  06 00       	ld	b,0x00
1553  04D6  3A 00 00    	ld	a,(_s_lin1)
1554  04D9  5F          	ld	e,a
1555  04DA  16 00       	ld	d,0x00
1556  04DC  79          	ld	a, c
1557  04DD  93          	sub	a, e
1558  04DE  6F          	ld	l, a
1559  04DF  78          	ld	a, b
1560  04E0  9A          	sbc	a, d
1561  04E1  67          	ld	h, a
1562  04E2  CD 00 00    	call	_abs_fastcall
1563  04E5  7D          	ld	a,l
1564  04E6  D6 0E       	sub	a,0x0e
1565  04E8  7C          	ld	a,h
1566  04E9  17          	rla
1567  04EA  3F          	ccf
1568  04EB  1F          	rra
1569  04EC  DE 80       	sbc	a,0x80
1570  04EE  30 67       	jr	NC,l_player_collision_00132
1571  04F0  3A 00 00    	ld	a,(_s_class)
1572  04F3  D6 06       	sub	a,0x06
1573  04F5  20 1D       	jr	NZ,l_player_collision_00120
1574  04F7  21 00 00    	ld	hl,_player_vita
1575  04FA  7E          	ld	a, (hl)
1576  04FB  C6 32       	add	a,0x32
1577  04FD  77          	ld	(hl), a
1578  04FE  3A 00 00    	ld	a,(_player_max_vita)
1579  0501  21 00 00    	ld	hl,_player_vita
1580  0504  96          	sub	a, (hl)
1581  0505  30 06       	jr	NC,l_player_collision_00118
1582  0507  3A 00 00    	ld	a,(_player_max_vita)
1583  050A  32 00 00    	ld	(_player_vita),a
1584  050D              l_player_collision_00118:
1585  050D  CD 61 05    	call	_player_pick_mushroom
1586  0510  2E 00       	ld	l,0x00
1587  0512  18 4C       	jr	l_player_collision_00138
1588  0514              l_player_collision_00120:
1589  0514  3A 00 00    	ld	a,(_s_class)
1590  0517  D6 07       	sub	a,0x07
1591  0519  20 1D       	jr	NZ,l_player_collision_00124
1592  051B  21 00 00    	ld	hl,_player_mana
1593  051E  7E          	ld	a, (hl)
1594  051F  C6 32       	add	a,0x32
1595  0521  77          	ld	(hl), a
1596  0522  3A 00 00    	ld	a,(_player_max_mana)
1597  0525  21 00 00    	ld	hl,_player_mana
1598  0528  96          	sub	a, (hl)
1599  0529  30 06       	jr	NC,l_player_collision_00122
1600  052B  3A 00 00    	ld	a,(_player_max_mana)
1601  052E  32 00 00    	ld	(_player_mana),a
1602  0531              l_player_collision_00122:
1603  0531  CD 61 05    	call	_player_pick_mushroom
1604  0534  2E 00       	ld	l,0x00
1605  0536  18 28       	jr	l_player_collision_00138
1606  0538              l_player_collision_00124:
1607  0538  3A 00 00    	ld	a,(_s_class)
1608  053B  D6 08       	sub	a,0x08
1609  053D  20 0A       	jr	NZ,l_player_collision_00126
1610  053F  CD 61 05    	call	_player_pick_mushroom
1611  0542  CD 80 05    	call	_player_1up
1612  0545  2E 00       	ld	l,0x00
1613  0547  18 17       	jr	l_player_collision_00138
1614  0549              l_player_collision_00126:
1615  0549  2E 02       	ld	l,0x02
1616  054B  CD 00 00    	call	_zx_border_fastcall
1617  054E  2E 14       	ld	l,0x14
1618  0550  CD 3D 12    	call	_player_hit
1619  0553  2E 01       	ld	l,0x01
1620  0555  18 09       	jr	l_player_collision_00138
1621  0557              l_player_collision_00132:
1622  0557  21 00 00    	ld	hl,_sprite
1623  055A  34          	inc	(hl)
1624  055B  C3 8B 04    	jp	l_player_collision_00133
1625  055E              l_player_collision_00137:
1626  055E  2E 00       	ld	l,0x00
1627  0560              l_player_collision_00138:
1628  0560  C9          	ret
1629  0561              	SECTION rodata_compiler
1630  0000              ___str_0:
1631  0000  52 4F 55 4E 44 20 43 4F 4D 50 4C 45 54 45 21 
                        	DEFM "ROUND COMPLETE!"
1632  000F  00          	DEFB 0x00
1633  0010              	SECTION code_compiler
1634  0561              ;	---------------------------------
1635  0561              ; Function player_pick_mushroom
1636  0561              ; ---------------------------------
1637  0561              _player_pick_mushroom:
1638  0561  21 00 00    	ld	hl,_ay_fx_04_magia1
1639  0564  E5          	push	hl
1640  0565  21 01 04    	ld	hl,0x0401
1641  0568  E5          	push	hl
1642  0569  CD 00 00    	call	_ay_song_play
1643  056C  21 01 00    	ld	hl,0x0001
1644  056F  CD 79 0C    	call	_player_score_add
1645  0572  CD 00 00    	call	_game_update_stats
1646  0575  2A 00 00    	ld	hl,(_sprite)
1647  0578  CD 00 00    	call	_spr_destroy
1648  057B  21 00 00    	ld	hl,_game_mush_count
1649  057E  35          	dec	(hl)
1650  057F  C9          	ret
1651  0580              	SECTION code_compiler
1652  0580              ;	---------------------------------
1653  0580              ; Function player_1up
1654  0580              ; ---------------------------------
1655  0580              _player_1up:
1656  0580  21 00 00    	ld	hl,_player_lives
1657  0583  7E          	ld	a, (hl)
1658  0584  D6 64       	sub	a,0x64
1659  0586  D0          	ret	NC
1660  0587  34          	inc	(hl)
1661  0588  CD 00 00    	call	_spr_flatten
1662  058B  21 10 00    	ld	hl,___str_1
1663  058E  E5          	push	hl
1664  058F  21 0C 0C    	ld	hl,0x0c0c
1665  0592  E5          	push	hl
1666  0593  CD 00 00    	call	_zx_print_str
1667  0596  AF          	xor	a, a
1668  0597  F5          	push	af
1669  0598  33          	inc	sp
1670  0599  21 19 00    	ld	hl,0x0019
1671  059C  E5          	push	hl
1672  059D  21 0C 11    	ld	hl,0x110c
1673  05A0  E5          	push	hl
1674  05A1  3E 0C       	ld	a,0x0c
1675  05A3  F5          	push	af
1676  05A4  33          	inc	sp
1677  05A5  CD 00 00    	call	_game_colour_message
1678  05A8  F1          	pop	af
1679  05A9  F1          	pop	af
1680  05AA  F1          	pop	af
1681  05AB  CD 00 00    	call	_game_update_stats
1682  05AE  CD 00 00    	call	_spr_unflatten
1683  05B1  C9          	ret
1684  05B2              	SECTION rodata_compiler
1685  0010              ___str_1:
1686  0010  31 20 55 50 21 
                        	DEFM "1 UP!"
1687  0015  00          	DEFB 0x00
1688  0016              	SECTION code_compiler
1689  05B2              ;	---------------------------------
1690  05B2              ; Function player_check_stairs_vertical
1691  05B2              ; ---------------------------------
1692  05B2              _player_check_stairs_vertical:
1693  05B2  CD 00 00    	call	___sdcc_enter_ix
1694  05B5  3B          	dec	sp
1695  05B6  4D          	ld	c, l
1696  05B7  21 07 00    	ld	hl,+(_col + 0x0007)
1697  05BA  46          	ld	b, (hl)
1698  05BB  CB 40       	bit	0, b
1699  05BD  20 2A       	jr	NZ,l_player_check_stairs_vertical_00102
1700  05BF  3A 07 00    	ld	a,(_lin + 0x0007)
1701  05C2  81          	add	a, c
1702  05C3  4F          	ld	c,a
1703  05C4  C5          	push	bc
1704  05C5  CD 00 00    	call	_spr_calc_index
1705  05C8  F1          	pop	af
1706  05C9  7D          	ld	a,l
1707  05CA  32 00 00    	ld	(_sprite_curr_index),a
1708  05CD  4F          	ld	c,a
1709  05CE  06 00       	ld	b,0x00
1710  05D0  21 00 00    	ld	hl,_scr_map
1711  05D3  09          	add	hl,bc
1712  05D4  7E          	ld	a,(hl)
1713  05D5  4F          	ld	c,a
1714  05D6  D6 44       	sub	a,0x44
1715  05D8  38 05       	jr	C,l_player_check_stairs_vertical_00110
1716  05DA  3E 47       	ld	a,0x47
1717  05DC  91          	sub	a, c
1718  05DD  30 04       	jr	NC,l_player_check_stairs_vertical_00111
1719  05DF              l_player_check_stairs_vertical_00110:
1720  05DF  1E 00       	ld	e,0x00
1721  05E1  18 02       	jr	l_player_check_stairs_vertical_00112
1722  05E3              l_player_check_stairs_vertical_00111:
1723  05E3  1E 01       	ld	e,0x01
1724  05E5              l_player_check_stairs_vertical_00112:
1725  05E5  0E 00       	ld	c,0x00
1726  05E7  18 52       	jr	l_player_check_stairs_vertical_00103
1727  05E9              l_player_check_stairs_vertical_00102:
1728  05E9  78          	ld	a, b
1729  05EA  91          	sub	a, c
1730  05EB  57          	ld	d, a
1731  05EC  3A 07 00    	ld	a,(_lin + 0x0007)
1732  05EF  81          	add	a, c
1733  05F0  47          	ld	b, a
1734  05F1  C5          	push	bc
1735  05F2  58          	ld	e,b
1736  05F3  D5          	push	de
1737  05F4  CD 00 00    	call	_spr_calc_index
1738  05F7  F1          	pop	af
1739  05F8  C1          	pop	bc
1740  05F9  7D          	ld	a,l
1741  05FA  32 00 00    	ld	(_sprite_curr_index),a
1742  05FD  5F          	ld	e,a
1743  05FE  16 00       	ld	d,0x00
1744  0600  21 00 00    	ld	hl,_scr_map
1745  0603  19          	add	hl,de
1746  0604  7E          	ld	a,(hl)
1747  0605  47          	ld	b,a
1748  0606  D6 44       	sub	a,0x44
1749  0608  38 05       	jr	C,l_player_check_stairs_vertical_00113
1750  060A  3E 47       	ld	a,0x47
1751  060C  90          	sub	a, b
1752  060D  30 04       	jr	NC,l_player_check_stairs_vertical_00114
1753  060F              l_player_check_stairs_vertical_00113:
1754  060F  1E 00       	ld	e,0x00
1755  0611  18 02       	jr	l_player_check_stairs_vertical_00115
1756  0613              l_player_check_stairs_vertical_00114:
1757  0613  1E 01       	ld	e,0x01
1758  0615              l_player_check_stairs_vertical_00115:
1759  0615  3A 07 00    	ld	a,(_col + 0x0007)
1760  0618  91          	sub	a, c
1761  0619  47          	ld	b, a
1762  061A  3A 07 00    	ld	a,(_lin + 0x0007)
1763  061D  81          	add	a, c
1764  061E  57          	ld	d, a
1765  061F  D5          	push	de
1766  0620  4A          	ld	c, d
1767  0621  C5          	push	bc
1768  0622  CD 00 00    	call	_spr_calc_index
1769  0625  F1          	pop	af
1770  0626  D1          	pop	de
1771  0627  7D          	ld	a,l
1772  0628  32 00 00    	ld	(_sprite_curr_index),a
1773  062B  7B          	ld	a, e
1774  062C  D6 44       	sub	a,0x44
1775  062E  38 05       	jr	C,l_player_check_stairs_vertical_00116
1776  0630  3E 47       	ld	a,0x47
1777  0632  93          	sub	a, e
1778  0633  30 04       	jr	NC,l_player_check_stairs_vertical_00117
1779  0635              l_player_check_stairs_vertical_00116:
1780  0635  0E 00       	ld	c,0x00
1781  0637  18 02       	jr	l_player_check_stairs_vertical_00118
1782  0639              l_player_check_stairs_vertical_00117:
1783  0639  0E 01       	ld	c,0x01
1784  063B              l_player_check_stairs_vertical_00118:
1785  063B              l_player_check_stairs_vertical_00103:
1786  063B  7B          	ld	a, e
1787  063C  B7          	or	a,a
1788  063D  20 03       	jr	NZ,l_player_check_stairs_vertical_00104
1789  063F  B1          	or	a,c
1790  0640  28 07       	jr	Z,l_player_check_stairs_vertical_00105
1791  0642              l_player_check_stairs_vertical_00104:
1792  0642  21 00 00    	ld	hl,_player_onstair
1793  0645  36 01       	ld	(hl),0x01
1794  0647  18 05       	jr	l_player_check_stairs_vertical_00108
1795  0649              l_player_check_stairs_vertical_00105:
1796  0649  21 00 00    	ld	hl,_player_onstair
1797  064C  36 00       	ld	(hl),0x00
1798  064E              l_player_check_stairs_vertical_00108:
1799  064E  33          	inc	sp
1800  064F  DD E1       	pop	ix
1801  0651  C9          	ret
1802  0652              	SECTION code_compiler
1803  0652              ;	---------------------------------
1804  0652              ; Function player_check_stairs
1805  0652              ; ---------------------------------
1806  0652              _player_check_stairs:
1807  0652  CD 00 00    	call	___sdcc_enter_ix
1808  0655  3B          	dec	sp
1809  0656  45          	ld	b, l
1810  0657  3A 07 00    	ld	a,(_col + 0x0007)
1811  065A  4F          	ld	c,a
1812  065B  80          	add	a, b
1813  065C  57          	ld	d, a
1814  065D  3A 07 00    	ld	a,(_lin + 0x0007)
1815  0660  C5          	push	bc
1816  0661  5F          	ld	e,a
1817  0662  D5          	push	de
1818  0663  CD 00 00    	call	_spr_calc_index
1819  0666  F1          	pop	af
1820  0667  C1          	pop	bc
1821  0668  7D          	ld	a,l
1822  0669  32 00 00    	ld	(_sprite_curr_index),a
1823  066C  5F          	ld	e,a
1824  066D  16 00       	ld	d,0x00
1825  066F  21 00 00    	ld	hl,_scr_map
1826  0672  19          	add	hl,de
1827  0673  7E          	ld	a,(hl)
1828  0674  4F          	ld	c,a
1829  0675  D6 44       	sub	a,0x44
1830  0677  38 05       	jr	C,l_player_check_stairs_00111
1831  0679  3E 47       	ld	a,0x47
1832  067B  91          	sub	a, c
1833  067C  30 04       	jr	NC,l_player_check_stairs_00112
1834  067E              l_player_check_stairs_00111:
1835  067E  0E 00       	ld	c,0x00
1836  0680  18 02       	jr	l_player_check_stairs_00113
1837  0682              l_player_check_stairs_00112:
1838  0682  0E 01       	ld	c,0x01
1839  0684              l_player_check_stairs_00113:
1840  0684  3A 07 00    	ld	a,(_col + 0x0007)
1841  0687  80          	add	a, b
1842  0688  57          	ld	d, a
1843  0689  3A 07 00    	ld	a,(_lin + 0x0007)
1844  068C  C6 0F       	add	a,0x0f
1845  068E  47          	ld	b, a
1846  068F  C5          	push	bc
1847  0690  58          	ld	e,b
1848  0691  D5          	push	de
1849  0692  CD 00 00    	call	_spr_calc_index
1850  0695  F1          	pop	af
1851  0696  C1          	pop	bc
1852  0697  7D          	ld	a,l
1853  0698  32 00 00    	ld	(_sprite_curr_index),a
1854  069B  5F          	ld	e,a
1855  069C  16 00       	ld	d,0x00
1856  069E  21 00 00    	ld	hl,_scr_map
1857  06A1  19          	add	hl,de
1858  06A2  7E          	ld	a,(hl)
1859  06A3  47          	ld	b,a
1860  06A4  D6 44       	sub	a,0x44
1861  06A6  38 05       	jr	C,l_player_check_stairs_00114
1862  06A8  3E 47       	ld	a,0x47
1863  06AA  90          	sub	a, b
1864  06AB  30 04       	jr	NC,l_player_check_stairs_00115
1865  06AD              l_player_check_stairs_00114:
1866  06AD  06 00       	ld	b,0x00
1867  06AF  18 02       	jr	l_player_check_stairs_00116
1868  06B1              l_player_check_stairs_00115:
1869  06B1  06 01       	ld	b,0x01
1870  06B3              l_player_check_stairs_00116:
1871  06B3  79          	ld	a, c
1872  06B4  B7          	or	a,a
1873  06B5  20 03       	jr	NZ,l_player_check_stairs_00105
1874  06B7  B0          	or	a,b
1875  06B8  28 13       	jr	Z,l_player_check_stairs_00106
1876  06BA              l_player_check_stairs_00105:
1877  06BA  21 00 00    	ld	hl,_player_onstair
1878  06BD  7E          	ld	a, (hl)
1879  06BE  B7          	or	a, a
1880  06BF  20 1D       	jr	NZ,l_player_check_stairs_00109
1881  06C1  36 01       	ld	(hl),0x01
1882  06C3  21 72 00    	ld	hl,0x0072
1883  06C6  E5          	push	hl
1884  06C7  CD 26 07    	call	_player_tile
1885  06CA  F1          	pop	af
1886  06CB  18 11       	jr	l_player_check_stairs_00109
1887  06CD              l_player_check_stairs_00106:
1888  06CD  21 00 00    	ld	hl,_player_onstair
1889  06D0  7E          	ld	a, (hl)
1890  06D1  B7          	or	a, a
1891  06D2  28 0A       	jr	Z,l_player_check_stairs_00109
1892  06D4  36 00       	ld	(hl),0x00
1893  06D6  21 60 08    	ld	hl,0x0860
1894  06D9  E5          	push	hl
1895  06DA  CD 26 07    	call	_player_tile
1896  06DD  F1          	pop	af
1897  06DE              l_player_check_stairs_00109:
1898  06DE  33          	inc	sp
1899  06DF  DD E1       	pop	ix
1900  06E1  C9          	ret
1901  06E2              	SECTION code_compiler
1902  06E2              ;	---------------------------------
1903  06E2              ; Function player_anim_tile
1904  06E2              ; ---------------------------------
1905  06E2              _player_anim_tile:
1906  06E2  21 07 00    	ld	hl,+(_tile + 0x0007)
1907  06E5  4E          	ld	c, (hl)
1908  06E6  21 07 00    	ld	hl,+(_colint + 0x0007)
1909  06E9  46          	ld	b, (hl)
1910  06EA  79          	ld	a, c
1911  06EB  80          	add	a, b
1912  06EC  32 00 00    	ld	(_s_tile1),a
1913  06EF  3A 00 00    	ld	a,(_player_onstair)
1914  06F2  B7          	or	a, a
1915  06F3  28 17       	jr	Z,l_player_anim_tile_00109
1916  06F5  21 00 00    	ld	hl,_player_anim_stair
1917  06F8  34          	inc	(hl)
1918  06F9  3E 01       	ld	a,0x01
1919  06FB  96          	sub	a, (hl)
1920  06FC  30 02       	jr	NC,l_player_anim_tile_00102
1921  06FE  36 00       	ld	(hl),0x00
1922  0700              l_player_anim_tile_00102:
1923  0700  79          	ld	a, c
1924  0701  21 00 00    	ld	hl,_player_anim_stair
1925  0704  86          	add	a, (hl)
1926  0705  C6 04       	add	a,0x04
1927  0707  32 00 00    	ld	(_s_tile1),a
1928  070A  18 19       	jr	l_player_anim_tile_00111
1929  070C              l_player_anim_tile_00109:
1930  070C  3A 00 00    	ld	a,(_player_onfire)
1931  070F  B7          	or	a, a
1932  0710  28 13       	jr	Z,l_player_anim_tile_00111
1933  0712  21 00 00    	ld	hl,_s_state
1934  0715  CB 56       	bit	2, (hl)
1935  0717  28 07       	jr	Z,l_player_anim_tile_00104
1936  0719  21 00 00    	ld	hl,_s_tile1
1937  071C  36 60       	ld	(hl),0x60
1938  071E  18 05       	jr	l_player_anim_tile_00111
1939  0720              l_player_anim_tile_00104:
1940  0720  21 00 00    	ld	hl,_s_tile1
1941  0723  36 68       	ld	(hl),0x68
1942  0725              l_player_anim_tile_00111:
1943  0725  C9          	ret
1944  0726              	SECTION code_compiler
1945  0726              ;	---------------------------------
1946  0726              ; Function player_tile
1947  0726              ; ---------------------------------
1948  0726              _player_tile:
1949  0726  CD 00 00    	call	___sdcc_enter_ix
1950  0729  21 05 00    	ld	hl,0x0005
1951  072C  39          	add	hl, sp
1952  072D  EB          	ex	de,hl
1953  072E  21 04 00    	ld	hl,0x0004
1954  0731  39          	add	hl, sp
1955  0732  4D          	ld	c, l
1956  0733  44          	ld	b, h
1957  0734  D5          	push	de
1958  0735  21 00 00    	ld	hl,_sprite
1959  0738  E5          	push	hl
1960  0739  C5          	push	bc
1961  073A  CD 00 00    	call	_spr_tile_dir
1962  073D  F1          	pop	af
1963  073E  F1          	pop	af
1964  073F  F1          	pop	af
1965  0740  7D          	ld	a,l
1966  0741  32 07 00    	ld	((_tile + 0x0007)),a
1967  0744  DD E1       	pop	ix
1968  0746  C9          	ret
1969  0747              	SECTION code_compiler
1970  0747              ;	---------------------------------
1971  0747              ; Function player_check_map
1972  0747              ; ---------------------------------
1973  0747              _player_check_map:
1974  0747  21 07 00    	ld	hl,+(_col + 0x0007)
1975  074A  46          	ld	b, (hl)
1976  074B  21 07 00    	ld	hl,+(_lin + 0x0007)
1977  074E  4E          	ld	c, (hl)
1978  074F  C5          	push	bc
1979  0750  CD 00 00    	call	_spr_calc_index
1980  0753  F1          	pop	af
1981  0754  7D          	ld	a,l
1982  0755  32 00 00    	ld	(_sprite_curr_index),a
1983  0758  21 07 00    	ld	hl,+(_col + 0x0007)
1984  075B  4E          	ld	c, (hl)
1985  075C  3A 07 00    	ld	a,(_lin + 0x0007)
1986  075F  E6 0F       	and	a,0x0f
1987  0761  CB 41       	bit	0, c
1988  0763  20 17       	jr	NZ,l_player_check_map_00108
1989  0765  B7          	or	a, a
1990  0766  20 05       	jr	NZ,l_player_check_map_00102
1991  0768  CD A7 07    	call	_player_pick_item
1992  076B  18 39       	jr	l_player_check_map_00110
1993  076D              l_player_check_map_00102:
1994  076D  CD A7 07    	call	_player_pick_item
1995  0770  21 00 00    	ld	hl,_sprite_curr_index
1996  0773  7E          	ld	a, (hl)
1997  0774  C6 10       	add	a,0x10
1998  0776  77          	ld	(hl), a
1999  0777  CD A7 07    	call	_player_pick_item
2000  077A  18 2A       	jr	l_player_check_map_00110
2001  077C              l_player_check_map_00108:
2002  077C  B7          	or	a, a
2003  077D  20 0C       	jr	NZ,l_player_check_map_00105
2004  077F  CD A7 07    	call	_player_pick_item
2005  0782  21 00 00    	ld	hl,_sprite_curr_index
2006  0785  34          	inc	(hl)
2007  0786  CD A7 07    	call	_player_pick_item
2008  0789  18 1B       	jr	l_player_check_map_00110
2009  078B              l_player_check_map_00105:
2010  078B  CD A7 07    	call	_player_pick_item
2011  078E  21 00 00    	ld	hl,_sprite_curr_index
2012  0791  34          	inc	(hl)
2013  0792  CD A7 07    	call	_player_pick_item
2014  0795  21 00 00    	ld	hl,_sprite_curr_index
2015  0798  7E          	ld	a, (hl)
2016  0799  C6 0F       	add	a,0x0f
2017  079B  77          	ld	(hl), a
2018  079C  CD A7 07    	call	_player_pick_item
2019  079F  21 00 00    	ld	hl,_sprite_curr_index
2020  07A2  34          	inc	(hl)
2021  07A3  CD A7 07    	call	_player_pick_item
2022  07A6              l_player_check_map_00110:
2023  07A6  C9          	ret
2024  07A7              	SECTION code_compiler
2025  07A7              ;	---------------------------------
2026  07A7              ; Function player_pick_item
2027  07A7              ; ---------------------------------
2028  07A7              _player_pick_item:
2029  07A7  CD 00 00    	call	___sdcc_enter_ix
2030  07AA  3B          	dec	sp
2031  07AB  01 00 00    	ld	bc,_scr_map+0
2032  07AE  2A 00 00    	ld	hl,(_sprite_curr_index)
2033  07B1  26 00       	ld	h,0x00
2034  07B3  09          	add	hl,bc
2035  07B4  7E          	ld	a,(hl)
2036  07B5  DD 77 FF    	ld	(ix-1),a
2037  07B8  D6 24       	sub	a,0x24
2038  07BA  DA AF 09    	jp	C, l_player_pick_item_00131
2039  07BD  3E 2F       	ld	a,0x2f
2040  07BF  DD 96 FF    	sub	a,(ix-1)
2041  07C2  DA AF 09    	jp	C, l_player_pick_item_00131
2042  07C5  CD 00 00    	call	_ay_reset
2043  07C8  79          	ld	a, c
2044  07C9  21 00 00    	ld	hl,_sprite_curr_index
2045  07CC  86          	add	a, (hl)
2046  07CD  4F          	ld	c, a
2047  07CE  78          	ld	a, b
2048  07CF  CE 00       	adc	a,0x00
2049  07D1  47          	ld	b, a
2050  07D2  5E          	ld	e, (hl)
2051  07D3  16 00       	ld	d,0x00
2052  07D5  C5          	push	bc
2053  07D6  EB          	ex	de,hl
2054  07D7  CD 00 00    	call	_game_match_back
2055  07DA  C1          	pop	bc
2056  07DB  7D          	ld	a,l
2057  07DC  02          	ld	(bc), a
2058  07DD  2A 00 00    	ld	hl,(_sprite_curr_index)
2059  07E0  26 00       	ld	h,0x00
2060  07E2  CD 00 00    	call	_game_obj_set
2061  07E5  3A 00 00    	ld	a,(_sprite_curr_index)
2062  07E8  07          	rlca
2063  07E9  07          	rlca
2064  07EA  07          	rlca
2065  07EB  07          	rlca
2066  07EC  E6 0F       	and	a,0x0f
2067  07EE  07          	rlca
2068  07EF  07          	rlca
2069  07F0  07          	rlca
2070  07F1  07          	rlca
2071  07F2  E6 F0       	and	a,0xf0
2072  07F4  32 00 00    	ld	(_s_lin1),a
2073  07F7  3A 00 00    	ld	a,(_sprite_curr_index)
2074  07FA  E6 0F       	and	a,0x0f
2075  07FC  87          	add	a, a
2076  07FD  32 00 00    	ld	(_s_col1),a
2077  0800  21 00 00    	ld	hl,0x0000
2078  0803  E5          	push	hl
2079  0804  21 84 03    	ld	hl,0x0384
2080  0807  E5          	push	hl
2081  0808  F5          	push	af
2082  0809  33          	inc	sp
2083  080A  3A 00 00    	ld	a,(_s_lin1)
2084  080D  F5          	push	af
2085  080E  33          	inc	sp
2086  080F  CD 00 00    	call	_spr_add_anim
2087  0812  F1          	pop	af
2088  0813  F1          	pop	af
2089  0814  F1          	pop	af
2090  0815  DD 7E FF    	ld	a,(ix-1)
2091  0818  D6 24       	sub	a,0x24
2092  081A  DA AF 09    	jp	C, l_player_pick_item_00131
2093  081D  3E 2F       	ld	a,0x2f
2094  081F  DD 96 FF    	sub	a,(ix-1)
2095  0822  DA AF 09    	jp	C, l_player_pick_item_00131
2096  0825  DD 7E FF    	ld	a,(ix-1)
2097  0828  C6 DC       	add	a,0xdc
2098  082A  4F          	ld	c, a
2099  082B  06 00       	ld	b,0x00
2100  082D  21 34 08    	ld	hl,l_player_pick_item_00177
2101  0830  09          	add	hl, bc
2102  0831  09          	add	hl, bc
2103  0832  09          	add	hl, bc
2104  0833  E9          	jp	(hl)
2105  0834              l_player_pick_item_00177:
2106  0834  C3 58 08    	jp	l_player_pick_item_00101
2107  0837  C3 6E 08    	jp	l_player_pick_item_00102
2108  083A  C3 84 08    	jp	l_player_pick_item_00103
2109  083D  C3 9A 08    	jp	l_player_pick_item_00104
2110  0840  C3 B0 08    	jp	l_player_pick_item_00105
2111  0843  C3 ED 08    	jp	l_player_pick_item_00109
2112  0846  C3 0F 09    	jp	l_player_pick_item_00112
2113  0849  C3 31 09    	jp	l_player_pick_item_00115
2114  084C  C3 51 09    	jp	l_player_pick_item_00118
2115  084F  C3 71 09    	jp	l_player_pick_item_00121
2116  0852  C3 91 09    	jp	l_player_pick_item_00124
2117  0855  C3 D9 08    	jp	l_player_pick_item_00108
2118  0858              l_player_pick_item_00101:
2119  0858  21 00 00    	ld	hl,_ay_fx_06_efecto
2120  085B  E5          	push	hl
2121  085C  21 01 06    	ld	hl,0x0601
2122  085F  E5          	push	hl
2123  0860  CD 00 00    	call	_ay_song_play
2124  0863  21 00 00    	ld	hl,_player_keys
2125  0866  36 01       	ld	(hl),0x01
2126  0868  CD 00 00    	call	_game_update_stats
2127  086B  C3 AF 09    	jp	l_player_pick_item_00131
2128  086E              l_player_pick_item_00102:
2129  086E  21 00 00    	ld	hl,_ay_fx_06_efecto
2130  0871  E5          	push	hl
2131  0872  21 01 06    	ld	hl,0x0601
2132  0875  E5          	push	hl
2133  0876  CD 00 00    	call	_ay_song_play
2134  0879  21 01 00    	ld	hl, +(_player_keys + 0x0001)
2135  087C  36 01       	ld	(hl),0x01
2136  087E  CD 00 00    	call	_game_update_stats
2137  0881  C3 AF 09    	jp	l_player_pick_item_00131
2138  0884              l_player_pick_item_00103:
2139  0884  21 00 00    	ld	hl,_ay_fx_06_efecto
2140  0887  E5          	push	hl
2141  0888  21 01 06    	ld	hl,0x0601
2142  088B  E5          	push	hl
2143  088C  CD 00 00    	call	_ay_song_play
2144  088F  21 02 00    	ld	hl, +(_player_keys + 0x0002)
2145  0892  36 01       	ld	(hl),0x01
2146  0894  CD 00 00    	call	_game_update_stats
2147  0897  C3 AF 09    	jp	l_player_pick_item_00131
2148  089A              l_player_pick_item_00104:
2149  089A  21 00 00    	ld	hl,_ay_fx_06_efecto
2150  089D  E5          	push	hl
2151  089E  21 01 06    	ld	hl,0x0601
2152  08A1  E5          	push	hl
2153  08A2  CD 00 00    	call	_ay_song_play
2154  08A5  21 03 00    	ld	hl, +(_player_keys + 0x0003)
2155  08A8  36 01       	ld	(hl),0x01
2156  08AA  CD 00 00    	call	_game_update_stats
2157  08AD  C3 AF 09    	jp	l_player_pick_item_00131
2158  08B0              l_player_pick_item_00105:
2159  08B0  21 00 00    	ld	hl,_ay_fx_04_coin
2160  08B3  E5          	push	hl
2161  08B4  21 01 04    	ld	hl,0x0401
2162  08B7  E5          	push	hl
2163  08B8  CD 00 00    	call	_ay_song_play
2164  08BB  21 01 00    	ld	hl,0x0001
2165  08BE  CD 79 0C    	call	_player_score_add
2166  08C1  21 00 00    	ld	hl,_player_coins
2167  08C4  7E          	ld	a,(hl)
2168  08C5  3C          	inc	a
2169  08C6  77          	ld	(hl),a
2170  08C7  D6 64       	sub	a,0x64
2171  08C9  20 08       	jr	NZ,l_player_pick_item_00107
2172  08CB  CD 80 05    	call	_player_1up
2173  08CE  21 00 00    	ld	hl,_player_coins
2174  08D1  36 00       	ld	(hl),0x00
2175  08D3              l_player_pick_item_00107:
2176  08D3  CD 00 00    	call	_game_update_stats
2177  08D6  C3 AF 09    	jp	l_player_pick_item_00131
2178  08D9              l_player_pick_item_00108:
2179  08D9  21 00 00    	ld	hl,_ay_fx_04_magia1
2180  08DC  E5          	push	hl
2181  08DD  21 01 04    	ld	hl,0x0401
2182  08E0  E5          	push	hl
2183  08E1  CD 00 00    	call	_ay_song_play
2184  08E4  21 0A 00    	ld	hl,0x000a
2185  08E7  CD 79 0C    	call	_player_score_add
2186  08EA  C3 AF 09    	jp	l_player_pick_item_00131
2187  08ED              l_player_pick_item_00109:
2188  08ED  21 00 00    	ld	hl,_ay_fx_06_efecto
2189  08F0  E5          	push	hl
2190  08F1  21 01 06    	ld	hl,0x0601
2191  08F4  E5          	push	hl
2192  08F5  CD 00 00    	call	_ay_song_play
2193  08F8  21 00 00    	ld	hl,_player_str
2194  08FB  34          	inc	(hl)
2195  08FC  21 00 00    	ld	hl,_player_max_vita
2196  08FF  7E          	ld	a, (hl)
2197  0900  D6 C8       	sub	a,0xc8
2198  0902  D2 AF 09    	jp	NC, l_player_pick_item_00131
2199  0905  7E          	ld	a, (hl)
2200  0906  C6 0A       	add	a,0x0a
2201  0908  77          	ld	(hl), a
2202  0909  CD 00 00    	call	_game_update_stats
2203  090C  C3 AF 09    	jp	l_player_pick_item_00131
2204  090F              l_player_pick_item_00112:
2205  090F  21 00 00    	ld	hl,_ay_fx_06_efecto
2206  0912  E5          	push	hl
2207  0913  21 01 06    	ld	hl,0x0601
2208  0916  E5          	push	hl
2209  0917  CD 00 00    	call	_ay_song_play
2210  091A  21 00 00    	ld	hl,_player_str
2211  091D  34          	inc	(hl)
2212  091E  21 00 00    	ld	hl,_player_max_vita
2213  0921  7E          	ld	a, (hl)
2214  0922  D6 C8       	sub	a,0xc8
2215  0924  D2 AF 09    	jp	NC, l_player_pick_item_00131
2216  0927  7E          	ld	a, (hl)
2217  0928  C6 0A       	add	a,0x0a
2218  092A  77          	ld	(hl), a
2219  092B  CD 00 00    	call	_game_update_stats
2220  092E  C3 AF 09    	jp	l_player_pick_item_00131
2221  0931              l_player_pick_item_00115:
2222  0931  21 00 00    	ld	hl,_ay_fx_06_efecto
2223  0934  E5          	push	hl
2224  0935  21 01 06    	ld	hl,0x0601
2225  0938  E5          	push	hl
2226  0939  CD 00 00    	call	_ay_song_play
2227  093C  21 00 00    	ld	hl,_player_str
2228  093F  34          	inc	(hl)
2229  0940  21 00 00    	ld	hl,_player_max_vita
2230  0943  7E          	ld	a, (hl)
2231  0944  D6 C8       	sub	a,0xc8
2232  0946  30 67       	jr	NC,l_player_pick_item_00131
2233  0948  7E          	ld	a, (hl)
2234  0949  C6 0A       	add	a,0x0a
2235  094B  77          	ld	(hl), a
2236  094C  CD 00 00    	call	_game_update_stats
2237  094F  18 5E       	jr	l_player_pick_item_00131
2238  0951              l_player_pick_item_00118:
2239  0951  21 00 00    	ld	hl,_ay_fx_06_efecto
2240  0954  E5          	push	hl
2241  0955  21 01 06    	ld	hl,0x0601
2242  0958  E5          	push	hl
2243  0959  CD 00 00    	call	_ay_song_play
2244  095C  21 00 00    	ld	hl,_player_int
2245  095F  34          	inc	(hl)
2246  0960  21 00 00    	ld	hl,_player_max_mana
2247  0963  7E          	ld	a, (hl)
2248  0964  D6 C8       	sub	a,0xc8
2249  0966  30 47       	jr	NC,l_player_pick_item_00131
2250  0968  7E          	ld	a, (hl)
2251  0969  C6 0A       	add	a,0x0a
2252  096B  77          	ld	(hl), a
2253  096C  CD 00 00    	call	_game_update_stats
2254  096F  18 3E       	jr	l_player_pick_item_00131
2255  0971              l_player_pick_item_00121:
2256  0971  21 00 00    	ld	hl,_ay_fx_06_efecto
2257  0974  E5          	push	hl
2258  0975  21 01 06    	ld	hl,0x0601
2259  0978  E5          	push	hl
2260  0979  CD 00 00    	call	_ay_song_play
2261  097C  21 00 00    	ld	hl,_player_int
2262  097F  34          	inc	(hl)
2263  0980  21 00 00    	ld	hl,_player_max_mana
2264  0983  7E          	ld	a, (hl)
2265  0984  D6 C8       	sub	a,0xc8
2266  0986  30 27       	jr	NC,l_player_pick_item_00131
2267  0988  7E          	ld	a, (hl)
2268  0989  C6 0A       	add	a,0x0a
2269  098B  77          	ld	(hl), a
2270  098C  CD 00 00    	call	_game_update_stats
2271  098F  18 1E       	jr	l_player_pick_item_00131
2272  0991              l_player_pick_item_00124:
2273  0991  21 00 00    	ld	hl,_ay_fx_06_efecto
2274  0994  E5          	push	hl
2275  0995  21 01 06    	ld	hl,0x0601
2276  0998  E5          	push	hl
2277  0999  CD 00 00    	call	_ay_song_play
2278  099C  21 00 00    	ld	hl,_player_int
2279  099F  34          	inc	(hl)
2280  09A0  21 00 00    	ld	hl,_player_max_mana
2281  09A3  7E          	ld	a, (hl)
2282  09A4  D6 C8       	sub	a,0xc8
2283  09A6  30 07       	jr	NC,l_player_pick_item_00131
2284  09A8  7E          	ld	a, (hl)
2285  09A9  C6 0A       	add	a,0x0a
2286  09AB  77          	ld	(hl), a
2287  09AC  CD 00 00    	call	_game_update_stats
2288  09AF              l_player_pick_item_00131:
2289  09AF  33          	inc	sp
2290  09B0  DD E1       	pop	ix
2291  09B2  C9          	ret
2292  09B3              	SECTION code_compiler
2293  09B3              ;	---------------------------------
2294  09B3              ; Function player_hit_platform
2295  09B3              ; ---------------------------------
2296  09B3              _player_hit_platform:
2297  09B3  CD 00 00    	call	___sdcc_enter_ix
2298  09B6  3B          	dec	sp
2299  09B7  3A 00 00    	ld	a,(_player_hit_lin)
2300  09BA  B7          	or	a, a
2301  09BB  C2 44 0C    	jp	NZ, l_player_hit_platform_00145
2302  09BE  21 07 00    	ld	hl,+(_lin + 0x0007)
2303  09C1  4E          	ld	c, (hl)
2304  09C2  3E 10       	ld	a,0x10
2305  09C4  91          	sub	a, c
2306  09C5  D2 44 0C    	jp	NC, l_player_hit_platform_00145
2307  09C8  01 00 00    	ld	bc,_scr_map
2308  09CB  2A 00 00    	ld	hl,(_index1)
2309  09CE  09          	add	hl,bc
2310  09CF  7E          	ld	a,(hl)
2311  09D0  D6 45       	sub	a,0x45
2312  09D2  DA 44 0C    	jp	C, l_player_hit_platform_00145
2313  09D5  2A 00 00    	ld	hl,(_curr_time)
2314  09D8  22 0E 00    	ld	(_spr_timer + 0x000e),hl
2315  09DB  3A 07 00    	ld	a,(_lin + 0x0007)
2316  09DE  06 00       	ld	b,0x00
2317  09E0  C6 F8       	add	a,0xf8
2318  09E2  4F          	ld	c, a
2319  09E3  78          	ld	a, b
2320  09E4  CE FF       	adc	a,0xff
2321  09E6  5F          	ld	e, a
2322  09E7  06 04       	ld	b,0x04
2323  09E9              l_player_hit_platform_00252:
2324  09E9  CB 2B       	sra	e
2325  09EB  CB 19       	rr	c
2326  09ED  10 FA       	djnz	l_player_hit_platform_00252
2327  09EF  79          	ld	a, c
2328  09F0  07          	rlca
2329  09F1  07          	rlca
2330  09F2  07          	rlca
2331  09F3  07          	rlca
2332  09F4  E6 F0       	and	a,0xf0
2333  09F6  C6 08       	add	a,0x08
2334  09F8  32 00 00    	ld	(_player_hit_lin),a
2335  09FB  21 07 00    	ld	hl,+(_col + 0x0007)
2336  09FE  4E          	ld	c, (hl)
2337  09FF  CB 41       	bit	0, c
2338  0A01  20 06       	jr	NZ,l_player_hit_platform_00111
2339  0A03  21 00 00    	ld	hl,_player_hit_col
2340  0A06  71          	ld	(hl), c
2341  0A07  18 2D       	jr	l_player_hit_platform_00112
2342  0A09              l_player_hit_platform_00111:
2343  0A09  21 07 00    	ld	hl,+(_state + 0x0007)
2344  0A0C  5E          	ld	e, (hl)
2345  0A0D  41          	ld	b, c
2346  0A0E  04          	inc	b
2347  0A0F  0D          	dec	c
2348  0A10  CB 5B       	bit	3, e
2349  0A12  28 12       	jr	Z,l_player_hit_platform_00108
2350  0A14  3A 00 00    	ld	a,(_g_player_hit_right)
2351  0A17  B7          	or	a, a
2352  0A18  28 06       	jr	Z,l_player_hit_platform_00102
2353  0A1A  21 00 00    	ld	hl,_player_hit_col
2354  0A1D  70          	ld	(hl), b
2355  0A1E  18 16       	jr	l_player_hit_platform_00112
2356  0A20              l_player_hit_platform_00102:
2357  0A20  21 00 00    	ld	hl,_player_hit_col
2358  0A23  71          	ld	(hl), c
2359  0A24  18 10       	jr	l_player_hit_platform_00112
2360  0A26              l_player_hit_platform_00108:
2361  0A26  3A 00 00    	ld	a,(_g_player_hit_left)
2362  0A29  B7          	or	a, a
2363  0A2A  28 06       	jr	Z,l_player_hit_platform_00105
2364  0A2C  21 00 00    	ld	hl,_player_hit_col
2365  0A2F  71          	ld	(hl), c
2366  0A30  18 04       	jr	l_player_hit_platform_00112
2367  0A32              l_player_hit_platform_00105:
2368  0A32  21 00 00    	ld	hl,_player_hit_col
2369  0A35  70          	ld	(hl), b
2370  0A36              l_player_hit_platform_00112:
2371  0A36  2A 00 00    	ld	hl,(_index1)
2372  0A39  01 00 00    	ld	bc,_scr_map
2373  0A3C  09          	add	hl,bc
2374  0A3D  7E          	ld	a,(hl)
2375  0A3E  FE 4D       	cp	a,0x4d
2376  0A40  20 4A       	jr	NZ,l_player_hit_platform_00114
2377  0A42  E5          	push	hl
2378  0A43  2A 00 00    	ld	hl,(_index1)
2379  0A46  CD 00 00    	call	_game_match_back
2380  0A49  C1          	pop	bc
2381  0A4A  7D          	ld	a,l
2382  0A4B  02          	ld	(bc), a
2383  0A4C  2A 00 00    	ld	hl,(_index1)
2384  0A4F  CD 00 00    	call	_game_obj_set
2385  0A52  21 00 00    	ld	hl,_ay_fx_04_explosion
2386  0A55  E5          	push	hl
2387  0A56  21 01 04    	ld	hl,0x0401
2388  0A59  E5          	push	hl
2389  0A5A  CD 00 00    	call	_ay_song_play
2390  0A5D  21 00 00    	ld	hl,_index1
2391  0A60  7E          	ld	a, (hl)
2392  0A61  E6 0F       	and	a,0x0f
2393  0A63  87          	add	a, a
2394  0A64  57          	ld	d, a
2395  0A65  4E          	ld	c, (hl)
2396  0A66  23          	inc	hl
2397  0A67  5E          	ld	e, (hl)
2398  0A68  06 04       	ld	b,0x04
2399  0A6A  79          	ld	a,c
2400  0A6B              l_player_hit_platform_00258:
2401  0A6B  CB 3B       	srl	e
2402  0A6D  1F          	rra
2403  0A6E  10 FB       	djnz	l_player_hit_platform_00258
2404  0A70  07          	rlca
2405  0A71  07          	rlca
2406  0A72  07          	rlca
2407  0A73  07          	rlca
2408  0A74  E6 F0       	and	a,0xf0
2409  0A76  47          	ld	b, a
2410  0A77  21 00 00    	ld	hl,0x0000
2411  0A7A  E5          	push	hl
2412  0A7B  21 87 03    	ld	hl,0x0387
2413  0A7E  E5          	push	hl
2414  0A7F  58          	ld	e,b
2415  0A80  D5          	push	de
2416  0A81  CD 00 00    	call	_spr_add_anim
2417  0A84  F1          	pop	af
2418  0A85  F1          	pop	af
2419  0A86  F1          	pop	af
2420  0A87  2E 01       	ld	l,0x01
2421  0A89  C3 46 0C    	jp	l_player_hit_platform_00148
2422  0A8C              l_player_hit_platform_00114:
2423  0A8C  FE 5A       	cp	a,0x5a
2424  0A8E  28 05       	jr	Z,l_player_hit_platform_00141
2425  0A90  D6 5D       	sub	a,0x5d
2426  0A92  C2 30 0C    	jp	NZ,l_player_hit_platform_00142
2427  0A95              l_player_hit_platform_00141:
2428  0A95  3A 00 00    	ld	a,(_game_boss)
2429  0A98  B7          	or	a, a
2430  0A99  28 0B       	jr	Z,l_player_hit_platform_00174
2431  0A9B  3A 00 00    	ld	a,(_game_mush_count)
2432  0A9E  B7          	or	a, a
2433  0A9F  28 05       	jr	Z,l_player_hit_platform_00174
2434  0AA1  2E 00       	ld	l,0x00
2435  0AA3  C3 46 0C    	jp	l_player_hit_platform_00148
2436  0AA6              l_player_hit_platform_00174:
2437  0AA6  DD 36 FF 00 	ld	(ix-1),0x00
2438  0AAA              l_player_hit_platform_00138:
2439  0AAA  DD 7E FF    	ld	a,(ix-1)
2440  0AAD  D6 07       	sub	a,0x07
2441  0AAF  D2 30 0C    	jp	NC, l_player_hit_platform_00142
2442  0AB2  3E 00       	ld	a, +((_mush_index) & 0xFF)
2443  0AB4  DD 86 FF    	add	a,(ix-1)
2444  0AB7  6F          	ld	l, a
2445  0AB8  3E 00       	ld	a, +((_mush_index) / 256)
2446  0ABA  CE 00       	adc	a,0x00
2447  0ABC  67          	ld	h, a
2448  0ABD  4E          	ld	c, (hl)
2449  0ABE  06 00       	ld	b,0x00
2450  0AC0  2A 00 00    	ld	hl,(_index1)
2451  0AC3  AF          	xor	a,a
2452  0AC4  ED 42       	sbc	hl,bc
2453  0AC6  C2 2A 0C    	jp	NZ,l_player_hit_platform_00137
2454  0AC9  3A 07 00    	ld	a,(_lin + 0x0007)
2455  0ACC  07          	rlca
2456  0ACD  07          	rlca
2457  0ACE  07          	rlca
2458  0ACF  07          	rlca
2459  0AD0  E6 0F       	and	a,0x0f
2460  0AD2  07          	rlca
2461  0AD3  07          	rlca
2462  0AD4  07          	rlca
2463  0AD5  07          	rlca
2464  0AD6  E6 F0       	and	a,0xf0
2465  0AD8  C6 E0       	add	a,0xe0
2466  0ADA  32 00 00    	ld	(_s_lin1),a
2467  0ADD  3A 07 00    	ld	a,(_col + 0x0007)
2468  0AE0  CB 3F       	srl	a
2469  0AE2  87          	add	a, a
2470  0AE3  32 00 00    	ld	(_s_col1),a
2471  0AE6  0E 00       	ld	c,0x00
2472  0AE8              l_player_hit_platform_00120:
2473  0AE8  79          	ld	a, c
2474  0AE9  D6 07       	sub	a,0x07
2475  0AEB  30 18       	jr	NC,l_player_hit_platform_00122
2476  0AED  06 00       	ld	b,0x00
2477  0AEF  21 00 00    	ld	hl,_mush_index
2478  0AF2  09          	add	hl, bc
2479  0AF3  46          	ld	b, (hl)
2480  0AF4  1E 00       	ld	e,0x00
2481  0AF6  21 00 00    	ld	hl,_index1
2482  0AF9  7E          	ld	a, (hl)
2483  0AFA  90          	sub	a, b
2484  0AFB  20 05       	jr	NZ,l_player_hit_platform_00264
2485  0AFD  23          	inc	hl
2486  0AFE  7E          	ld	a, (hl)
2487  0AFF  93          	sub	a, e
2488  0B00  28 03       	jr	Z,l_player_hit_platform_00122
2489  0B02              l_player_hit_platform_00264:
2490  0B02  0C          	inc	c
2491  0B03  18 E3       	jr	l_player_hit_platform_00120
2492  0B05              l_player_hit_platform_00122:
2493  0B05  06 00       	ld	b,0x00
2494  0B07  21 00 00    	ld	hl,_mush_class
2495  0B0A  09          	add	hl, bc
2496  0B0B  7E          	ld	a, (hl)
2497  0B0C  FE 79       	cp	a,0x79
2498  0B0E  28 18       	jr	Z,l_player_hit_platform_00123
2499  0B10  FE 7A       	cp	a,0x7a
2500  0B12  28 2F       	jr	Z,l_player_hit_platform_00124
2501  0B14  FE 7B       	cp	a,0x7b
2502  0B16  28 5F       	jr	Z,l_player_hit_platform_00126
2503  0B18  FE 7C       	cp	a,0x7c
2504  0B1A  28 41       	jr	Z,l_player_hit_platform_00125
2505  0B1C  FE 7D       	cp	a,0x7d
2506  0B1E  CA AB 0B    	jp	Z,l_player_hit_platform_00128
2507  0B21  D6 7E       	sub	a,0x7e
2508  0B23  28 6C       	jr	Z,l_player_hit_platform_00127
2509  0B25  C3 C3 0B    	jp	l_player_hit_platform_00129
2510  0B28              l_player_hit_platform_00123:
2511  0B28  2E 02       	ld	l,0x02
2512  0B2A  CD 00 00    	call	_zx_border_fastcall
2513  0B2D  3A 00 00    	ld	a,(_s_col1)
2514  0B30  21 06 FF    	ld	hl,0xff06
2515  0B33  E5          	push	hl
2516  0B34  F5          	push	af
2517  0B35  33          	inc	sp
2518  0B36  3A 00 00    	ld	a,(_s_lin1)
2519  0B39  F5          	push	af
2520  0B3A  33          	inc	sp
2521  0B3B  CD 00 00    	call	_enemy_init
2522  0B3E  F1          	pop	af
2523  0B3F  F1          	pop	af
2524  0B40  C3 C3 0B    	jp	l_player_hit_platform_00129
2525  0B43              l_player_hit_platform_00124:
2526  0B43  2E 02       	ld	l,0x02
2527  0B45  CD 00 00    	call	_zx_border_fastcall
2528  0B48  3A 00 00    	ld	a,(_s_col1)
2529  0B4B  21 06 01    	ld	hl,0x0106
2530  0B4E  E5          	push	hl
2531  0B4F  F5          	push	af
2532  0B50  33          	inc	sp
2533  0B51  3A 00 00    	ld	a,(_s_lin1)
2534  0B54  F5          	push	af
2535  0B55  33          	inc	sp
2536  0B56  CD 00 00    	call	_enemy_init
2537  0B59  F1          	pop	af
2538  0B5A  F1          	pop	af
2539  0B5B  18 66       	jr	l_player_hit_platform_00129
2540  0B5D              l_player_hit_platform_00125:
2541  0B5D  2E 01       	ld	l,0x01
2542  0B5F  CD 00 00    	call	_zx_border_fastcall
2543  0B62  3A 00 00    	ld	a,(_s_col1)
2544  0B65  21 07 01    	ld	hl,0x0107
2545  0B68  E5          	push	hl
2546  0B69  F5          	push	af
2547  0B6A  33          	inc	sp
2548  0B6B  3A 00 00    	ld	a,(_s_lin1)
2549  0B6E  F5          	push	af
2550  0B6F  33          	inc	sp
2551  0B70  CD 00 00    	call	_enemy_init
2552  0B73  F1          	pop	af
2553  0B74  F1          	pop	af
2554  0B75  18 4C       	jr	l_player_hit_platform_00129
2555  0B77              l_player_hit_platform_00126:
2556  0B77  2E 01       	ld	l,0x01
2557  0B79  CD 00 00    	call	_zx_border_fastcall
2558  0B7C  3A 00 00    	ld	a,(_s_col1)
2559  0B7F  21 07 FF    	ld	hl,0xff07
2560  0B82  E5          	push	hl
2561  0B83  F5          	push	af
2562  0B84  33          	inc	sp
2563  0B85  3A 00 00    	ld	a,(_s_lin1)
2564  0B88  F5          	push	af
2565  0B89  33          	inc	sp
2566  0B8A  CD 00 00    	call	_enemy_init
2567  0B8D  F1          	pop	af
2568  0B8E  F1          	pop	af
2569  0B8F  18 32       	jr	l_player_hit_platform_00129
2570  0B91              l_player_hit_platform_00127:
2571  0B91  2E 04       	ld	l,0x04
2572  0B93  CD 00 00    	call	_zx_border_fastcall
2573  0B96  3A 00 00    	ld	a,(_s_col1)
2574  0B99  21 08 01    	ld	hl,0x0108
2575  0B9C  E5          	push	hl
2576  0B9D  F5          	push	af
2577  0B9E  33          	inc	sp
2578  0B9F  3A 00 00    	ld	a,(_s_lin1)
2579  0BA2  F5          	push	af
2580  0BA3  33          	inc	sp
2581  0BA4  CD 00 00    	call	_enemy_init
2582  0BA7  F1          	pop	af
2583  0BA8  F1          	pop	af
2584  0BA9  18 18       	jr	l_player_hit_platform_00129
2585  0BAB              l_player_hit_platform_00128:
2586  0BAB  2E 04       	ld	l,0x04
2587  0BAD  CD 00 00    	call	_zx_border_fastcall
2588  0BB0  3A 00 00    	ld	a,(_s_col1)
2589  0BB3  21 08 FF    	ld	hl,0xff08
2590  0BB6  E5          	push	hl
2591  0BB7  F5          	push	af
2592  0BB8  33          	inc	sp
2593  0BB9  3A 00 00    	ld	a,(_s_lin1)
2594  0BBC  F5          	push	af
2595  0BBD  33          	inc	sp
2596  0BBE  CD 00 00    	call	_enemy_init
2597  0BC1  F1          	pop	af
2598  0BC2  F1          	pop	af
2599  0BC3              l_player_hit_platform_00129:
2600  0BC3  21 00 00    	ld	hl,_game_mush_count
2601  0BC6  34          	inc	(hl)
2602  0BC7  3A 00 00    	ld	a,(_game_boss)
2603  0BCA  B7          	or	a, a
2604  0BCB  20 5D       	jr	NZ,l_player_hit_platform_00137
2605  0BCD  3A 00 00    	ld	a,(_index1)
2606  0BD0  C6 F0       	add	a,0xf0
2607  0BD2  32 00 00    	ld	(_index0),a
2608  0BD5  3A 01 00    	ld	a,(_index1 + 1)
2609  0BD8  CE FF       	adc	a,0xff
2610  0BDA  21 01 00    	ld	hl,_index0 + 1
2611  0BDD  77          	ld	(hl), a
2612  0BDE  3E 00       	ld	a, +((_scr_map) & 0xFF)
2613  0BE0  2B          	dec	hl
2614  0BE1  86          	add	a, (hl)
2615  0BE2  4F          	ld	c, a
2616  0BE3  3E 00       	ld	a, +((_scr_map) / 256)
2617  0BE5  23          	inc	hl
2618  0BE6  8E          	adc	a, (hl)
2619  0BE7  47          	ld	b, a
2620  0BE8  C5          	push	bc
2621  0BE9  2B          	dec	hl
2622  0BEA  7E          	ld	a, (hl)
2623  0BEB  23          	inc	hl
2624  0BEC  66          	ld	h, (hl)
2625  0BED  6F          	ld	l, a
2626  0BEE  CD 00 00    	call	_game_match_back
2627  0BF1  C1          	pop	bc
2628  0BF2  7D          	ld	a,l
2629  0BF3  02          	ld	(bc), a
2630  0BF4  01 00 00    	ld	bc,_scr_map
2631  0BF7  2A 00 00    	ld	hl,(_index1)
2632  0BFA  09          	add	hl,bc
2633  0BFB  7E          	ld	a,(hl)
2634  0BFC  FE 5A       	cp	a,0x5a
2635  0BFE  4D          	ld	c,l
2636  0BFF  44          	ld	b,h
2637  0C00  28 04       	jr	Z,l_player_hit_platform_00130
2638  0C02  D6 5D       	sub	a,0x5d
2639  0C04  20 05       	jr	NZ,l_player_hit_platform_00131
2640  0C06              l_player_hit_platform_00130:
2641  0C06  3E 4F       	ld	a,0x4f
2642  0C08  02          	ld	(bc), a
2643  0C09  18 03       	jr	l_player_hit_platform_00132
2644  0C0B              l_player_hit_platform_00131:
2645  0C0B  3E 54       	ld	a,0x54
2646  0C0D  02          	ld	(bc), a
2647  0C0E              l_player_hit_platform_00132:
2648  0C0E  2A 00 00    	ld	hl,(_index1)
2649  0C11  01 F0 FF    	ld	bc,0xfff0
2650  0C14  09          	add	hl,bc
2651  0C15  CD 00 00    	call	_game_obj_set
2652  0C18  3A 00 00    	ld	a,(_s_lin1)
2653  0C1B  C6 10       	add	a,0x10
2654  0C1D  4F          	ld	c, a
2655  0C1E  3A 00 00    	ld	a, (_s_col1)
2656  0C21  47          	ld	b,a
2657  0C22  C5          	push	bc
2658  0C23  3E 4F       	ld	a,0x4f
2659  0C25  F5          	push	af
2660  0C26  33          	inc	sp
2661  0C27  CD 00 00    	call	_NIRVANAP_drawT_callee
2662  0C2A              l_player_hit_platform_00137:
2663  0C2A  DD 34 FF    	inc	(ix-1)
2664  0C2D  C3 AA 0A    	jp	l_player_hit_platform_00138
2665  0C30              l_player_hit_platform_00142:
2666  0C30  21 00 00    	ld	hl,_ay_fx_04_golpe
2667  0C33  E5          	push	hl
2668  0C34  21 01 04    	ld	hl,0x0401
2669  0C37  E5          	push	hl
2670  0C38  CD 00 00    	call	_ay_song_play
2671  0C3B  2E 01       	ld	l,0x01
2672  0C3D  CD 00 00    	call	_spr_brick_anim
2673  0C40  2E 01       	ld	l,0x01
2674  0C42  18 02       	jr	l_player_hit_platform_00148
2675  0C44              l_player_hit_platform_00145:
2676  0C44  2E 00       	ld	l,0x00
2677  0C46              l_player_hit_platform_00148:
2678  0C46  33          	inc	sp
2679  0C47  DD E1       	pop	ix
2680  0C49  C9          	ret
2681  0C4A              	SECTION code_compiler
2682  0C4A              ;	---------------------------------
2683  0C4A              ; Function player_hit_platform_clear
2684  0C4A              ; ---------------------------------
2685  0C4A              _player_hit_platform_clear:
2686  0C4A  3E 04       	ld	a,0x04
2687  0C4C  F5          	push	af
2688  0C4D  33          	inc	sp
2689  0C4E  21 0E 00    	ld	hl, +(_spr_timer + 0x000e)
2690  0C51  E5          	push	hl
2691  0C52  CD 00 00    	call	_game_check_time
2692  0C55  F1          	pop	af
2693  0C56  33          	inc	sp
2694  0C57  7D          	ld	a, l
2695  0C58  B7          	or	a, a
2696  0C59  C8          	ret	Z
2697  0C5A  2A FF FF    	ld	hl,(_player_hit_col - 1)
2698  0C5D  3A 00 00    	ld	a,(_player_hit_lin)
2699  0C60  6F          	ld	l,a
2700  0C61  E5          	push	hl
2701  0C62  CD 00 00    	call	_spr_calc_index
2702  0C65  F1          	pop	af
2703  0C66  22 00 00    	ld	(_index1),hl
2704  0C69  2E 00       	ld	l,0x00
2705  0C6B  CD 00 00    	call	_spr_brick_anim
2706  0C6E  21 00 00    	ld	hl,_player_hit_lin
2707  0C71  36 00       	ld	(hl),0x00
2708  0C73  21 00 00    	ld	hl,_player_hit_col
2709  0C76  36 00       	ld	(hl),0x00
2710  0C78  C9          	ret
2711  0C79              	SECTION code_compiler
2712  0C79              ;	---------------------------------
2713  0C79              ; Function player_score_add
2714  0C79              ; ---------------------------------
2715  0C79              _player_score_add:
2716  0C79  ED 4B 00 00 	ld	bc,(_player_score)
2717  0C7D  09          	add	hl,bc
2718  0C7E  22 00 00    	ld	(_player_score),hl
2719  0C81  21 00 00    	ld	hl,_player_lvl
2720  0C84  7E          	ld	a, (hl)
2721  0C85  D6 14       	sub	a,0x14
2722  0C87  30 42       	jr	NC,l_player_score_add_00104
2723  0C89  01 00 00    	ld	bc,_player_lvl_table+0
2724  0C8C  6E          	ld	l,(hl)
2725  0C8D  26 00       	ld	h,0x00
2726  0C8F  29          	add	hl, hl
2727  0C90  09          	add	hl, bc
2728  0C91  4E          	ld	c, (hl)
2729  0C92  23          	inc	hl
2730  0C93  46          	ld	b, (hl)
2731  0C94  21 00 00    	ld	hl,_player_score
2732  0C97  7E          	ld	a, (hl)
2733  0C98  91          	sub	a, c
2734  0C99  23          	inc	hl
2735  0C9A  7E          	ld	a, (hl)
2736  0C9B  98          	sbc	a, b
2737  0C9C  38 2D       	jr	C,l_player_score_add_00104
2738  0C9E  21 00 00    	ld	hl,_player_lvl
2739  0CA1  34          	inc	(hl)
2740  0CA2  CD 00 00    	call	_game_update_stats
2741  0CA5  CD 00 00    	call	_spr_flatten
2742  0CA8  21 16 00    	ld	hl,___str_2
2743  0CAB  E5          	push	hl
2744  0CAC  21 0C 0C    	ld	hl,0x0c0c
2745  0CAF  E5          	push	hl
2746  0CB0  CD 00 00    	call	_zx_print_str
2747  0CB3  AF          	xor	a, a
2748  0CB4  F5          	push	af
2749  0CB5  33          	inc	sp
2750  0CB6  21 3C 00    	ld	hl,0x003c
2751  0CB9  E5          	push	hl
2752  0CBA  21 0C 15    	ld	hl,0x150c
2753  0CBD  E5          	push	hl
2754  0CBE  3E 0C       	ld	a,0x0c
2755  0CC0  F5          	push	af
2756  0CC1  33          	inc	sp
2757  0CC2  CD 00 00    	call	_game_colour_message
2758  0CC5  F1          	pop	af
2759  0CC6  F1          	pop	af
2760  0CC7  F1          	pop	af
2761  0CC8  CD 00 00    	call	_spr_unflatten
2762  0CCB              l_player_score_add_00104:
2763  0CCB  3A 00 00    	ld	a,(_game_score_top)
2764  0CCE  21 00 00    	ld	hl,_player_score
2765  0CD1  96          	sub	a, (hl)
2766  0CD2  3A 01 00    	ld	a,(_game_score_top + 1)
2767  0CD5  23          	inc	hl
2768  0CD6  9E          	sbc	a, (hl)
2769  0CD7  30 06       	jr	NC,l_player_score_add_00106
2770  0CD9  2A 00 00    	ld	hl,(_player_score)
2771  0CDC  22 00 00    	ld	(_game_score_top),hl
2772  0CDF              l_player_score_add_00106:
2773  0CDF  CD 00 00    	call	_game_print_score
2774  0CE2  C9          	ret
2775  0CE3              	SECTION rodata_compiler
2776  0016              ___str_2:
2777  0016  4C 45 56 45 4C 20 55 50 21 
                        	DEFM "LEVEL UP!"
2778  001F  00          	DEFB 0x00
2779  0020              	SECTION code_compiler
2780  0CE3              ;	---------------------------------
2781  0CE3              ; Function player_check_floor
2782  0CE3              ; ---------------------------------
2783  0CE3              _player_check_floor:
2784  0CE3  CD 00 00    	call	___sdcc_enter_ix
2785  0CE6  F5          	push	af
2786  0CE7  F5          	push	af
2787  0CE8  F5          	push	af
2788  0CE9  21 07 00    	ld	hl,+(_col + 0x0007)
2789  0CEC  56          	ld	d, (hl)
2790  0CED  3A 07 00    	ld	a,(_lin + 0x0007)
2791  0CF0  C6 10       	add	a,0x10
2792  0CF2  5F          	ld	e, a
2793  0CF3  D5          	push	de
2794  0CF4  CD 00 00    	call	_spr_calc_index
2795  0CF7  F1          	pop	af
2796  0CF8  DD 75 FC    	ld	(ix-4),l
2797  0CFB  DD 74 FD    	ld	(ix-3),h
2798  0CFE  01 00 00    	ld	bc,_scr_map+0
2799  0D01  79          	ld	a, c
2800  0D02  DD 86 FC    	add	a,(ix-4)
2801  0D05  DD 77 FE    	ld	(ix-2),a
2802  0D08  78          	ld	a, b
2803  0D09  DD 8E FD    	adc	a,(ix-3)
2804  0D0C  DD 6E FE    	ld	l,(ix-2)
2805  0D0F  DD 77 FF    	ld	(ix-1),a
2806  0D12  67          	ld	h,a
2807  0D13  7E          	ld	a, (hl)
2808  0D14  DD 77 FB    	ld	(ix-5),a
2809  0D17  DD 6E FC    	ld	l,(ix-4)
2810  0D1A  DD 66 FD    	ld	h,(ix-3)
2811  0D1D  23          	inc	hl
2812  0D1E  09          	add	hl,bc
2813  0D1F  3A 00 00    	ld	a,(_s_lin0)
2814  0D22  D6 90       	sub	a,0x90
2815  0D24  4D          	ld	c,l
2816  0D25  44          	ld	b,h
2817  0D26  20 26       	jr	NZ,l_player_check_floor_00108
2818  0D28  3A 00 00    	ld	a,(_map_heigth)
2819  0D2B  C5          	push	bc
2820  0D2C  F5          	push	af
2821  0D2D  33          	inc	sp
2822  0D2E  3A 00 00    	ld	a,(_scr_curr)
2823  0D31  F5          	push	af
2824  0D32  33          	inc	sp
2825  0D33  CD 00 00    	call	__divuchar_callee
2826  0D36  C1          	pop	bc
2827  0D37  7D          	ld	a,l
2828  0D38  3C          	inc	a
2829  0D39  32 00 00    	ld	(_tmp1),a
2830  0D3C  21 00 00    	ld	hl,_map_heigth
2831  0D3F  96          	sub	a, (hl)
2832  0D40  30 06       	jr	NC,l_player_check_floor_00102
2833  0D42  DD 36 FB 00 	ld	(ix-5),0x00
2834  0D46  18 16       	jr	l_player_check_floor_00109
2835  0D48              l_player_check_floor_00102:
2836  0D48  DD 36 FB 48 	ld	(ix-5),0x48
2837  0D4C  18 10       	jr	l_player_check_floor_00109
2838  0D4E              l_player_check_floor_00108:
2839  0D4E  3A 07 00    	ld	a,(_col + 0x0007)
2840  0D51  0F          	rrca
2841  0D52  38 06       	jr	C,l_player_check_floor_00105
2842  0D54  DD 36 FA 00 	ld	(ix-6),0x00
2843  0D58  18 04       	jr	l_player_check_floor_00109
2844  0D5A              l_player_check_floor_00105:
2845  0D5A  0A          	ld	a, (bc)
2846  0D5B  DD 77 FA    	ld	(ix-6),a
2847  0D5E              l_player_check_floor_00109:
2848  0D5E  DD 7E FB    	ld	a,(ix-5)
2849  0D61  D6 3A       	sub	a,0x3a
2850  0D63  38 07       	jr	C,l_player_check_floor_00132
2851  0D65  DD 7E FB    	ld	a,(ix-5)
2852  0D68  D6 60       	sub	a,0x60
2853  0D6A  38 32       	jr	C,l_player_check_floor_00128
2854  0D6C              l_player_check_floor_00132:
2855  0D6C  DD 7E FA    	ld	a,(ix-6)
2856  0D6F  D6 3A       	sub	a,0x3a
2857  0D71  38 07       	jr	C,l_player_check_floor_00127
2858  0D73  DD 7E FA    	ld	a,(ix-6)
2859  0D76  D6 60       	sub	a,0x60
2860  0D78  38 24       	jr	C,l_player_check_floor_00128
2861  0D7A              l_player_check_floor_00127:
2862  0D7A  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
2863  0D7D  36 02       	ld	(hl),0x02
2864  0D7F  21 00 00    	ld	hl,_s_state
2865  0D82  CB CE       	set	1, (hl)
2866  0D84  2E 00       	ld	l,0x00
2867  0D86  CD 52 06    	call	_player_check_stairs
2868  0D89  3A 00 00    	ld	a,(_player_onstair)
2869  0D8C  B7          	or	a, a
2870  0D8D  C2 34 0E    	jp	NZ, l_player_check_floor_00133
2871  0D90  3A 00 00    	ld	a,(_s_lin0)
2872  0D93  D6 90       	sub	a,0x90
2873  0D95  C2 34 0E    	jp	NZ,l_player_check_floor_00133
2874  0D98  CD 00 00    	call	_spr_page_down
2875  0D9B  C3 34 0E    	jp	l_player_check_floor_00133
2876  0D9E              l_player_check_floor_00128:
2877  0D9E  C5          	push	bc
2878  0D9F  3E 10       	ld	a,0x10
2879  0DA1  F5          	push	af
2880  0DA2  33          	inc	sp
2881  0DA3  21 00 00    	ld	hl,_player_brick_time
2882  0DA6  E5          	push	hl
2883  0DA7  CD 00 00    	call	_game_check_time
2884  0DAA  F1          	pop	af
2885  0DAB  33          	inc	sp
2886  0DAC  C1          	pop	bc
2887  0DAD  7D          	ld	a,l
2888  0DAE  B7          	or	a, a
2889  0DAF  CA 34 0E    	jp	Z, l_player_check_floor_00133
2890  0DB2  2A 00 00    	ld	hl,(_curr_time)
2891  0DB5  22 00 00    	ld	(_player_brick_time),hl
2892  0DB8  DD 7E FB    	ld	a,(ix-5)
2893  0DBB  D6 40       	sub	a,0x40
2894  0DBD  20 18       	jr	NZ,l_player_check_floor_00114
2895  0DBF  C5          	push	bc
2896  0DC0  DD 6E FC    	ld	l,(ix-4)
2897  0DC3  DD 66 FD    	ld	h,(ix-3)
2898  0DC6  CD 00 00    	call	_game_match_back
2899  0DC9  C1          	pop	bc
2900  0DCA  5D          	ld	e,l
2901  0DCB  DD 6E FE    	ld	l,(ix-2)
2902  0DCE  DD 66 FF    	ld	h,(ix-1)
2903  0DD1  73          	ld	(hl), e
2904  0DD2  C5          	push	bc
2905  0DD3  CD 39 0E    	call	_player_gasta_brick
2906  0DD6  C1          	pop	bc
2907  0DD7              l_player_check_floor_00114:
2908  0DD7  DD 7E FB    	ld	a,(ix-5)
2909  0DDA  D6 3F       	sub	a,0x3f
2910  0DDC  20 0D       	jr	NZ,l_player_check_floor_00116
2911  0DDE  DD 6E FE    	ld	l,(ix-2)
2912  0DE1  DD 66 FF    	ld	h,(ix-1)
2913  0DE4  36 40       	ld	(hl),0x40
2914  0DE6  C5          	push	bc
2915  0DE7  CD 39 0E    	call	_player_gasta_brick
2916  0DEA  C1          	pop	bc
2917  0DEB              l_player_check_floor_00116:
2918  0DEB  DD 7E FB    	ld	a,(ix-5)
2919  0DEE  D6 3E       	sub	a,0x3e
2920  0DF0  20 0D       	jr	NZ,l_player_check_floor_00118
2921  0DF2  DD 6E FE    	ld	l,(ix-2)
2922  0DF5  DD 66 FF    	ld	h,(ix-1)
2923  0DF8  36 3F       	ld	(hl),0x3f
2924  0DFA  C5          	push	bc
2925  0DFB  CD 39 0E    	call	_player_gasta_brick
2926  0DFE  C1          	pop	bc
2927  0DFF              l_player_check_floor_00118:
2928  0DFF  DD 7E FA    	ld	a,(ix-6)
2929  0E02  D6 40       	sub	a,0x40
2930  0E04  20 12       	jr	NZ,l_player_check_floor_00120
2931  0E06  C5          	push	bc
2932  0E07  DD 6E FC    	ld	l,(ix-4)
2933  0E0A  DD 66 FD    	ld	h,(ix-3)
2934  0E0D  CD 00 00    	call	_game_match_back
2935  0E10  C1          	pop	bc
2936  0E11  7D          	ld	a,l
2937  0E12  02          	ld	(bc), a
2938  0E13  C5          	push	bc
2939  0E14  CD 39 0E    	call	_player_gasta_brick
2940  0E17  C1          	pop	bc
2941  0E18              l_player_check_floor_00120:
2942  0E18  DD 7E FA    	ld	a,(ix-6)
2943  0E1B  D6 3F       	sub	a,0x3f
2944  0E1D  20 08       	jr	NZ,l_player_check_floor_00122
2945  0E1F  3E 40       	ld	a,0x40
2946  0E21  02          	ld	(bc), a
2947  0E22  C5          	push	bc
2948  0E23  CD 39 0E    	call	_player_gasta_brick
2949  0E26  C1          	pop	bc
2950  0E27              l_player_check_floor_00122:
2951  0E27  DD 7E FA    	ld	a,(ix-6)
2952  0E2A  D6 3E       	sub	a,0x3e
2953  0E2C  20 06       	jr	NZ,l_player_check_floor_00133
2954  0E2E  3E 3F       	ld	a,0x3f
2955  0E30  02          	ld	(bc), a
2956  0E31  CD 39 0E    	call	_player_gasta_brick
2957  0E34              l_player_check_floor_00133:
2958  0E34  DD F9       	ld	sp, ix
2959  0E36  DD E1       	pop	ix
2960  0E38  C9          	ret
2961  0E39              	SECTION code_compiler
2962  0E39              ;	---------------------------------
2963  0E39              ; Function player_gasta_brick
2964  0E39              ; ---------------------------------
2965  0E39              _player_gasta_brick:
2966  0E39  3A 00 00    	ld	a,(_s_lin0)
2967  0E3C  32 00 00    	ld	(_s_lin1),a
2968  0E3F  3A 00 00    	ld	a,(_s_col0)
2969  0E42  32 00 00    	ld	(_s_col1),a
2970  0E45  3A 07 00    	ld	a,(_lin + 0x0007)
2971  0E48  C6 10       	add	a,0x10
2972  0E4A  32 00 00    	ld	(_s_lin0),a
2973  0E4D  3A 07 00    	ld	a,(_col + 0x0007)
2974  0E50  32 00 00    	ld	(_s_col0),a
2975  0E53  CD 00 00    	call	_spr_back_repaint
2976  0E56  3A 00 00    	ld	a,(_s_lin1)
2977  0E59  32 00 00    	ld	(_s_lin0),a
2978  0E5C  3A 00 00    	ld	a,(_s_col1)
2979  0E5F  32 00 00    	ld	(_s_col0),a
2980  0E62  C9          	ret
2981  0E63              	SECTION code_compiler
2982  0E63              ;	---------------------------------
2983  0E63              ; Function player_move_jump
2984  0E63              ; ---------------------------------
2985  0E63              _player_move_jump:
2986  0E63  21 00 00    	ld	hl,_game_gravity
2987  0E66  4E          	ld	c, (hl)
2988  0E67  21 00 00    	ld	hl,_player_vel_y
2989  0E6A  7E          	ld	a, (hl)
2990  0E6B  81          	add	a, c
2991  0E6C  77          	ld	(hl), a
2992  0E6D  21 00 00    	ld	hl,_sprite_on_air
2993  0E70  36 01       	ld	(hl),0x01
2994  0E72  3A 00 00    	ld	a,(_player_vel_inc)
2995  0E75  B7          	or	a, a
2996  0E76  28 4A       	jr	Z,l_player_move_jump_00109
2997  0E78  3A 00 00    	ld	a,(_dirs)
2998  0E7B  CB 07       	rlc	a
2999  0E7D  E6 01       	and	a,0x01
3000  0E7F  4F          	ld	c, a
3001  0E80  3A 00 00    	ld	a,(_game_2buttons)
3002  0E83  B7          	or	a, a
3003  0E84  28 06       	jr	Z,l_player_move_jump_00102
3004  0E86  79          	ld	a, c
3005  0E87  EE 01       	xor	a,0x01
3006  0E89  4F          	ld	c, a
3007  0E8A  18 15       	jr	l_player_move_jump_00103
3008  0E8C              l_player_move_jump_00102:
3009  0E8C  CB 41       	bit	0, c
3010  0E8E  28 07       	jr	Z,l_player_move_jump_00154
3011  0E90  21 00 00    	ld	hl,_dirs
3012  0E93  CB 46       	bit	0, (hl)
3013  0E95  20 04       	jr	NZ,l_player_move_jump_00155
3014  0E97              l_player_move_jump_00154:
3015  0E97  0E 00       	ld	c,0x00
3016  0E99  18 02       	jr	l_player_move_jump_00156
3017  0E9B              l_player_move_jump_00155:
3018  0E9B  0E 01       	ld	c,0x01
3019  0E9D              l_player_move_jump_00156:
3020  0E9D  79          	ld	a, c
3021  0E9E  EE 01       	xor	a,0x01
3022  0EA0  4F          	ld	c, a
3023  0EA1              l_player_move_jump_00103:
3024  0EA1  79          	ld	a, c
3025  0EA2  B7          	or	a, a
3026  0EA3  28 1D       	jr	Z,l_player_move_jump_00109
3027  0EA5  3A 00 00    	ld	a,(_player_vel_y1)
3028  0EA8  21 00 00    	ld	hl,_player_vel_y
3029  0EAB  96          	sub	a, (hl)
3030  0EAC  E2 B1 0E    	jp	PO, l_player_move_jump_00259
3031  0EAF  EE 80       	xor	a,0x80
3032  0EB1              l_player_move_jump_00259:
3033  0EB1  F2 C2 0E    	jp	P, l_player_move_jump_00109
3034  0EB4  21 00 00    	ld	hl,_player_vel_y
3035  0EB7  CB 7E       	bit	7,(hl)
3036  0EB9  28 07       	jr	Z,l_player_move_jump_00109
3037  0EBB  36 00       	ld	(hl),0x00
3038  0EBD  21 00 00    	ld	hl,_player_vel_inc
3039  0EC0  36 00       	ld	(hl),0x00
3040  0EC2              l_player_move_jump_00109:
3041  0EC2  3E 78       	ld	a,0x78
3042  0EC4  21 00 00    	ld	hl,_player_vel_y
3043  0EC7  96          	sub	a, (hl)
3044  0EC8  E2 CD 0E    	jp	PO, l_player_move_jump_00260
3045  0ECB  EE 80       	xor	a,0x80
3046  0ECD              l_player_move_jump_00260:
3047  0ECD  F2 D5 0E    	jp	P, l_player_move_jump_00111
3048  0ED0  21 00 00    	ld	hl,_player_vel_y
3049  0ED3  36 78       	ld	(hl),0x78
3050  0ED5              l_player_move_jump_00111:
3051  0ED5  21 00 00    	ld	hl,_player_vel_y
3052  0ED8  7E          	ld	a, (hl)
3053  0ED9  EE 80       	xor	a,0x80
3054  0EDB  D6 08       	sub	a,0x08
3055  0EDD  30 02       	jr	NC,l_player_move_jump_00113
3056  0EDF  36 88       	ld	(hl),0x88
3057  0EE1              l_player_move_jump_00113:
3058  0EE1  3A 00 00    	ld	a,(_player_vel_y)
3059  0EE4  4F          	ld	c,a
3060  0EE5  17          	rla
3061  0EE6  9F          	sbc	a, a
3062  0EE7  47          	ld	b, a
3063  0EE8  CB 41       	bit	0,c
3064  0EEA  21 00 00    	ld	hl,_s_lin1
3065  0EED  71          	ld	(hl),c
3066  0EEE  28 04       	jr	Z,l_player_move_jump_00115
3067  0EF0  21 00 00    	ld	hl,_s_lin1
3068  0EF3  35          	dec	(hl)
3069  0EF4              l_player_move_jump_00115:
3070  0EF4  3A 07 00    	ld	a,(_lin + 0x0007)
3071  0EF7  21 00 00    	ld	hl,_s_lin1
3072  0EFA  86          	add	a, (hl)
3073  0EFB  77          	ld	(hl), a
3074  0EFC  CB 78       	bit	7, b
3075  0EFE  28 5C       	jr	Z,l_player_move_jump_00141
3076  0F00  21 00 00    	ld	hl,_s_state
3077  0F03  CD 00 00    	call	_spr_set_up
3078  0F06  3E 90       	ld	a,0x90
3079  0F08  21 00 00    	ld	hl,_s_lin1
3080  0F0B  96          	sub	a, (hl)
3081  0F0C  30 11       	jr	NC,l_player_move_jump_00120
3082  0F0E  CD 00 00    	call	_spr_page_up
3083  0F11  7D          	ld	a, l
3084  0F12  B7          	or	a, a
3085  0F13  28 05       	jr	Z,l_player_move_jump_00117
3086  0F15  2E 00       	ld	l,0x00
3087  0F17  C3 13 10    	jp	l_player_move_jump_00152
3088  0F1A              l_player_move_jump_00117:
3089  0F1A  21 00 00    	ld	hl,_s_lin1
3090  0F1D  36 00       	ld	(hl),0x00
3091  0F1F              l_player_move_jump_00120:
3092  0F1F  21 07 00    	ld	hl,+(_col + 0x0007)
3093  0F22  46          	ld	b, (hl)
3094  0F23  C5          	push	bc
3095  0F24  33          	inc	sp
3096  0F25  3A 00 00    	ld	a,(_s_lin1)
3097  0F28  F5          	push	af
3098  0F29  33          	inc	sp
3099  0F2A  CD 00 00    	call	_game_check_map
3100  0F2D  F1          	pop	af
3101  0F2E  7C          	ld	a,h
3102  0F2F  B5          	or	a,l
3103  0F30  28 21       	jr	Z,l_player_move_jump_00124
3104  0F32  CD B3 09    	call	_player_hit_platform
3105  0F35  7D          	ld	a, l
3106  0F36  B7          	or	a, a
3107  0F37  28 12       	jr	Z,l_player_move_jump_00122
3108  0F39  3A 07 00    	ld	a,(_lin + 0x0007)
3109  0F3C  07          	rlca
3110  0F3D  07          	rlca
3111  0F3E  07          	rlca
3112  0F3F  07          	rlca
3113  0F40  E6 0F       	and	a,0x0f
3114  0F42  07          	rlca
3115  0F43  07          	rlca
3116  0F44  07          	rlca
3117  0F45  07          	rlca
3118  0F46  E6 F0       	and	a,0xf0
3119  0F48  32 07 00    	ld	((_lin + 0x0007)),a
3120  0F4B              l_player_move_jump_00122:
3121  0F4B  21 00 00    	ld	hl,_player_vel_y
3122  0F4E  36 00       	ld	(hl),0x00
3123  0F50  C3 DB 0F    	jp	l_player_move_jump_00142
3124  0F53              l_player_move_jump_00124:
3125  0F53  3A 00 00    	ld	a,(_s_lin1)
3126  0F56  32 07 00    	ld	((_lin + 0x0007)),a
3127  0F59  C3 DB 0F    	jp	l_player_move_jump_00142
3128  0F5C              l_player_move_jump_00141:
3129  0F5C  21 00 00    	ld	hl,_s_state
3130  0F5F  CD 00 00    	call	_spr_set_down
3131  0F62  3E 90       	ld	a,0x90
3132  0F64  21 00 00    	ld	hl,_s_lin1
3133  0F67  96          	sub	a, (hl)
3134  0F68  30 11       	jr	NC,l_player_move_jump_00130
3135  0F6A  CD 00 00    	call	_spr_page_down
3136  0F6D  7D          	ld	a, l
3137  0F6E  B7          	or	a, a
3138  0F6F  28 05       	jr	Z,l_player_move_jump_00127
3139  0F71  2E 00       	ld	l,0x00
3140  0F73  C3 13 10    	jp	l_player_move_jump_00152
3141  0F76              l_player_move_jump_00127:
3142  0F76  21 00 00    	ld	hl,_s_lin1
3143  0F79  36 90       	ld	(hl),0x90
3144  0F7B              l_player_move_jump_00130:
3145  0F7B  21 07 00    	ld	hl,+(_col + 0x0007)
3146  0F7E  56          	ld	d, (hl)
3147  0F7F  3A 00 00    	ld	a,(_s_lin1)
3148  0F82  C6 10       	add	a,0x10
3149  0F84  5F          	ld	e, a
3150  0F85  D5          	push	de
3151  0F86  CD 00 00    	call	_game_check_map
3152  0F89  F1          	pop	af
3153  0F8A  7C          	ld	a,h
3154  0F8B  B5          	or	a,l
3155  0F8C  28 47       	jr	Z,l_player_move_jump_00138
3156  0F8E  2E 00       	ld	l,0x00
3157  0F90  CD 52 06    	call	_player_check_stairs
3158  0F93  3A 00 00    	ld	a,(_player_onstair)
3159  0F96  B7          	or	a, a
3160  0F97  20 05       	jr	NZ,l_player_move_jump_00132
3161  0F99  2E 01       	ld	l,0x01
3162  0F9B  CD 52 06    	call	_player_check_stairs
3163  0F9E              l_player_move_jump_00132:
3164  0F9E  3A 00 00    	ld	a,(_player_onstair)
3165  0FA1  B7          	or	a, a
3166  0FA2  20 12       	jr	NZ,l_player_move_jump_00134
3167  0FA4  3A 00 00    	ld	a,(_s_lin1)
3168  0FA7  07          	rlca
3169  0FA8  07          	rlca
3170  0FA9  07          	rlca
3171  0FAA  07          	rlca
3172  0FAB  E6 0F       	and	a,0x0f
3173  0FAD  07          	rlca
3174  0FAE  07          	rlca
3175  0FAF  07          	rlca
3176  0FB0  07          	rlca
3177  0FB1  E6 F0       	and	a,0xf0
3178  0FB3  32 07 00    	ld	((_lin + 0x0007)),a
3179  0FB6              l_player_move_jump_00134:
3180  0FB6  21 00 00    	ld	hl,_player_vel_y
3181  0FB9  36 00       	ld	(hl),0x00
3182  0FBB  21 00 00    	ld	hl,_s_state
3183  0FBE  7E          	ld	a,(hl)
3184  0FBF  E6 FC       	and	a,+(0xfd&0xfe)
3185  0FC1  77          	ld	(hl),a
3186  0FC2  3A 07 00    	ld	a,(_lin + 0x0007)
3187  0FC5  D6 90       	sub	a,0x90
3188  0FC7  38 03       	jr	C,l_player_move_jump_00136
3189  0FC9  CD 00 00    	call	_spr_page_down
3190  0FCC              l_player_move_jump_00136:
3191  0FCC  21 07 00    	ld	hl, +(_colint + 0x0007)
3192  0FCF  36 00       	ld	(hl),0x00
3193  0FD1  2E 01       	ld	l,0x01
3194  0FD3  18 3E       	jr	l_player_move_jump_00152
3195  0FD5              l_player_move_jump_00138:
3196  0FD5  3A 00 00    	ld	a,(_s_lin1)
3197  0FD8  32 07 00    	ld	((_lin + 0x0007)),a
3198  0FDB              l_player_move_jump_00142:
3199  0FDB  21 00 00    	ld	hl,_s_state
3200  0FDE  CB 5E       	bit	3, (hl)
3201  0FE0  20 21       	jr	NZ,l_player_move_jump_00148
3202  0FE2  21 00 00    	ld	hl,_s_state
3203  0FE5  CB 56       	bit	2, (hl)
3204  0FE7  20 1A       	jr	NZ,l_player_move_jump_00148
3205  0FE9  21 00 00    	ld	hl,_dirs
3206  0FEC  CB 56       	bit	2, (hl)
3207  0FEE  28 06       	jr	Z,l_player_move_jump_00144
3208  0FF0  21 00 00    	ld	hl,_s_state
3209  0FF3  CD 00 00    	call	_spr_set_left
3210  0FF6              l_player_move_jump_00144:
3211  0FF6  21 00 00    	ld	hl,_dirs
3212  0FF9  CB 5E       	bit	3, (hl)
3213  0FFB  28 06       	jr	Z,l_player_move_jump_00148
3214  0FFD  21 00 00    	ld	hl,_s_state
3215  1000  CD 00 00    	call	_spr_set_right
3216  1003              l_player_move_jump_00148:
3217  1003  CD 00 00    	call	_spr_move_horizontal
3218  1006  7D          	ld	a, l
3219  1007  B7          	or	a, a
3220  1008  28 07       	jr	Z,l_player_move_jump_00151
3221  100A  21 00 00    	ld	hl,_s_state
3222  100D  7E          	ld	a,(hl)
3223  100E  E6 F3       	and	a,+(0xf7&0xfb)
3224  1010  77          	ld	(hl),a
3225  1011              l_player_move_jump_00151:
3226  1011  2E 00       	ld	l,0x00
3227  1013              l_player_move_jump_00152:
3228  1013  C9          	ret
3229  1014              	SECTION code_compiler
3230  1014              ;	---------------------------------
3231  1014              ; Function player_open_door
3232  1014              ; ---------------------------------
3233  1014              _player_open_door:
3234  1014  CD 00 00    	call	___sdcc_enter_ix
3235  1017  21 00 00    	ld	hl,_ay_fx_04_pierto_abierta
3236  101A  E5          	push	hl
3237  101B  21 01 04    	ld	hl,0x0401
3238  101E  E5          	push	hl
3239  101F  CD 00 00    	call	_ay_song_play
3240  1022  0E 00       	ld	c,0x00
3241  1024  DD 7E 06    	ld	a,(ix+6)
3242  1027  D6 48       	sub	a,0x48
3243  1029  28 17       	jr	Z,l_player_open_door_00101
3244  102B  DD 7E 06    	ld	a,(ix+6)
3245  102E  D6 49       	sub	a,0x49
3246  1030  28 1F       	jr	Z,l_player_open_door_00104
3247  1032  DD 7E 06    	ld	a,(ix+6)
3248  1035  D6 4A       	sub	a,0x4a
3249  1037  28 27       	jr	Z,l_player_open_door_00107
3250  1039  DD 7E 06    	ld	a,(ix+6)
3251  103C  D6 4B       	sub	a,0x4b
3252  103E  28 2F       	jr	Z,l_player_open_door_00110
3253  1040  18 3A       	jr	l_player_open_door_00113
3254  1042              l_player_open_door_00101:
3255  1042  3A 00 00    	ld	a,(_player_keys)
3256  1045  B7          	or	a, a
3257  1046  28 34       	jr	Z,l_player_open_door_00113
3258  1048  2E 07       	ld	l,0x07
3259  104A  CD 00 00    	call	_zx_border_fastcall
3260  104D  0E 01       	ld	c,0x01
3261  104F  18 2B       	jr	l_player_open_door_00113
3262  1051              l_player_open_door_00104:
3263  1051  3A 01 00    	ld	a,(_player_keys + 0x0001)
3264  1054  B7          	or	a, a
3265  1055  28 25       	jr	Z,l_player_open_door_00113
3266  1057  2E 02       	ld	l,0x02
3267  1059  CD 00 00    	call	_zx_border_fastcall
3268  105C  0E 01       	ld	c,0x01
3269  105E  18 1C       	jr	l_player_open_door_00113
3270  1060              l_player_open_door_00107:
3271  1060  3A 02 00    	ld	a,(_player_keys + 0x0002)
3272  1063  B7          	or	a, a
3273  1064  28 16       	jr	Z,l_player_open_door_00113
3274  1066  2E 04       	ld	l,0x04
3275  1068  CD 00 00    	call	_zx_border_fastcall
3276  106B  0E 01       	ld	c,0x01
3277  106D  18 0D       	jr	l_player_open_door_00113
3278  106F              l_player_open_door_00110:
3279  106F  3A 03 00    	ld	a,(_player_keys + 0x0003)
3280  1072  B7          	or	a, a
3281  1073  28 07       	jr	Z,l_player_open_door_00113
3282  1075  2E 05       	ld	l,0x05
3283  1077  CD 00 00    	call	_zx_border_fastcall
3284  107A  0E 01       	ld	c,0x01
3285  107C              l_player_open_door_00113:
3286  107C  79          	ld	a, c
3287  107D  B7          	or	a, a
3288  107E  20 06       	jr	NZ,l_player_open_door_00114
3289  1080  3A 00 00    	ld	a,(_game_inmune)
3290  1083  B7          	or	a, a
3291  1084  28 1E       	jr	Z,l_player_open_door_00117
3292  1086              l_player_open_door_00114:
3293  1086  3E 00       	ld	a, +((_scr_map) & 0xFF)
3294  1088  DD 86 04    	add	a,(ix+4)
3295  108B  4F          	ld	c, a
3296  108C  3E 00       	ld	a, +((_scr_map) / 256)
3297  108E  DD 8E 05    	adc	a,(ix+5)
3298  1091  47          	ld	b, a
3299  1092  AF          	xor	a, a
3300  1093  02          	ld	(bc), a
3301  1094  DD 6E 04    	ld	l,(ix+4)
3302  1097  DD 66 05    	ld	h,(ix+5)
3303  109A  CD 00 00    	call	_game_obj_set
3304  109D  21 04 00    	ld	hl,0x0004
3305  10A0  39          	add	hl, sp
3306  10A1  CD 00 00    	call	_spr_draw_index
3307  10A4              l_player_open_door_00117:
3308  10A4  DD E1       	pop	ix
3309  10A6  C9          	ret
3310  10A7              	SECTION code_compiler
3311  10A7              ;	---------------------------------
3312  10A7              ; Function player_lost_life
3313  10A7              ; ---------------------------------
3314  10A7              _player_lost_life:
3315  10A7  CD 00 00    	call	___sdcc_enter_ix
3316  10AA  F5          	push	af
3317  10AB  21 00 00    	ld	hl,_ay_song_04_lotr_lose_a_life
3318  10AE  E5          	push	hl
3319  10AF  21 01 04    	ld	hl,0x0401
3320  10B2  E5          	push	hl
3321  10B3  CD 00 00    	call	_ay_song_play
3322  10B6  21 00 00    	ld	hl,_player_vita
3323  10B9  36 00       	ld	(hl),0x00
3324  10BB  CD 00 00    	call	_game_update_stats
3325  10BE  3A 07 00    	ld	a,(_lin + 7)
3326  10C1  32 00 00    	ld	(_s_lin0),a
3327  10C4  3A 07 00    	ld	a,(_col + 7)
3328  10C7  32 00 00    	ld	(_s_col0),a
3329  10CA  CD 00 00    	call	_spr_init_effects
3330  10CD  06 00       	ld	b,0x00
3331  10CF              l_player_lost_life_00121:
3332  10CF  C5          	push	bc
3333  10D0  21 00 00    	ld	hl,0x0000
3334  10D3  E5          	push	hl
3335  10D4  AF          	xor	a, a
3336  10D5  48          	ld	c,b
3337  10D6  47          	ld	b,a
3338  10D7  C5          	push	bc
3339  10D8  CD 00 00    	call	_NIRVANAP_spriteT_callee
3340  10DB  C1          	pop	bc
3341  10DC  04          	inc	b
3342  10DD  3E 07       	ld	a,0x07
3343  10DF  90          	sub	a, b
3344  10E0  30 ED       	jr	NC,l_player_lost_life_00121
3345  10E2  76          	halt
3346  10E3  3A 00 00    	ld	a,(_s_lin0)
3347  10E6  C6 F0       	add	a,0xf0
3348  10E8  47          	ld	b, a
3349  10E9  3A 00 00    	ld	a,(_s_col0)
3350  10EC  21 00 00    	ld	hl,0x0000
3351  10EF  E5          	push	hl
3352  10F0  21 87 03    	ld	hl,0x0387
3353  10F3  E5          	push	hl
3354  10F4  48          	ld	c,b
3355  10F5  47          	ld	b,a
3356  10F6  C5          	push	bc
3357  10F7  CD 00 00    	call	_spr_add_anim
3358  10FA  F1          	pop	af
3359  10FB  F1          	pop	af
3360  10FC  F1          	pop	af
3361  10FD  21 00 00    	ld	hl,_s_col0
3362  1100  46          	ld	b, (hl)
3363  1101  05          	dec	b
3364  1102  05          	dec	b
3365  1103  21 00 00    	ld	hl,0x0000
3366  1106  E5          	push	hl
3367  1107  21 87 03    	ld	hl,0x0387
3368  110A  E5          	push	hl
3369  110B  C5          	push	bc
3370  110C  33          	inc	sp
3371  110D  3A 00 00    	ld	a,(_s_lin0)
3372  1110  F5          	push	af
3373  1111  33          	inc	sp
3374  1112  CD 00 00    	call	_spr_add_anim
3375  1115  F1          	pop	af
3376  1116  F1          	pop	af
3377  1117  21 00 00    	ld	hl,0x0000
3378  111A  E3          	ex	(sp),hl
3379  111B  3A 00 00    	ld	a,(_s_col0)
3380  111E  21 87 03    	ld	hl,0x0387
3381  1121  E5          	push	hl
3382  1122  F5          	push	af
3383  1123  33          	inc	sp
3384  1124  3A 00 00    	ld	a,(_s_lin0)
3385  1127  F5          	push	af
3386  1128  33          	inc	sp
3387  1129  CD 00 00    	call	_spr_add_anim
3388  112C  F1          	pop	af
3389  112D  F1          	pop	af
3390  112E  F1          	pop	af
3391  112F  21 00 00    	ld	hl,_s_col0
3392  1132  46          	ld	b, (hl)
3393  1133  04          	inc	b
3394  1134  04          	inc	b
3395  1135  21 00 00    	ld	hl,0x0000
3396  1138  E5          	push	hl
3397  1139  21 87 03    	ld	hl,0x0387
3398  113C  E5          	push	hl
3399  113D  C5          	push	bc
3400  113E  33          	inc	sp
3401  113F  3A 00 00    	ld	a,(_s_lin0)
3402  1142  F5          	push	af
3403  1143  33          	inc	sp
3404  1144  CD 00 00    	call	_spr_add_anim
3405  1147  F1          	pop	af
3406  1148  F1          	pop	af
3407  1149  F1          	pop	af
3408  114A  3A 00 00    	ld	a,(_s_lin0)
3409  114D  C6 10       	add	a,0x10
3410  114F  47          	ld	b, a
3411  1150  3A 00 00    	ld	a,(_s_col0)
3412  1153  21 00 00    	ld	hl,0x0000
3413  1156  E5          	push	hl
3414  1157  21 87 03    	ld	hl,0x0387
3415  115A  E5          	push	hl
3416  115B  48          	ld	c,b
3417  115C  47          	ld	b,a
3418  115D  C5          	push	bc
3419  115E  CD 00 00    	call	_spr_add_anim
3420  1161  F1          	pop	af
3421  1162  F1          	pop	af
3422  1163  F1          	pop	af
3423  1164  2E 00       	ld	l,0x00
3424  1166  CD 00 00    	call	_zx_border_fastcall
3425  1169  DD 36 FE 01 	ld	(ix-2),0x01
3426  116D  2A 00 00    	ld	hl,(_curr_time)
3427  1170  22 00 00    	ld	(_anim_time),hl
3428  1173              l_player_lost_life_00107:
3429  1173  DD 7E FE    	ld	a,(ix-2)
3430  1176  B7          	or	a, a
3431  1177  28 28       	jr	Z,l_player_lost_life_00109
3432  1179  3E 0C       	ld	a,0x0c
3433  117B  F5          	push	af
3434  117C  33          	inc	sp
3435  117D  21 00 00    	ld	hl,_anim_time
3436  1180  E5          	push	hl
3437  1181  CD 00 00    	call	_game_check_time
3438  1184  F1          	pop	af
3439  1185  33          	inc	sp
3440  1186  7D          	ld	a, l
3441  1187  B7          	or	a, a
3442  1188  28 E9       	jr	Z,l_player_lost_life_00107
3443  118A  2A 00 00    	ld	hl,(_curr_time)
3444  118D  22 00 00    	ld	(_anim_time),hl
3445  1190  3A 00 00    	ld	a,(_anim_count)
3446  1193  B7          	or	a,a
3447  1194  28 05       	jr	Z,l_player_lost_life_00103
3448  1196  CD 00 00    	call	_spr_play_anim
3449  1199  18 D8       	jr	l_player_lost_life_00107
3450  119B              l_player_lost_life_00103:
3451  119B  DD 36 FE 00 	ld	(ix-2),0x00
3452  119F  18 D2       	jr	l_player_lost_life_00107
3453  11A1              l_player_lost_life_00109:
3454  11A1  3A 00 00    	ld	a,(_game_boss)
3455  11A4  B7          	or	a, a
3456  11A5  28 11       	jr	Z,l_player_lost_life_00135
3457  11A7  3A 00 00    	ld	a,(_boss_lin)
3458  11AA  32 00 00    	ld	(_s_lin1),a
3459  11AD  3A 00 00    	ld	a,(_boss_col)
3460  11B0  32 00 00    	ld	(_s_col1),a
3461  11B3  CD 00 00    	call	_boss_draw
3462  11B6  18 40       	jr	l_player_lost_life_00115
3463  11B8              l_player_lost_life_00135:
3464  11B8  0E 00       	ld	c,0x00
3465  11BA              l_player_lost_life_00123:
3466  11BA  06 00       	ld	b,0x00
3467  11BC  21 00 00    	ld	hl,_class
3468  11BF  09          	add	hl, bc
3469  11C0  7E          	ld	a, (hl)
3470  11C1  B7          	or	a, a
3471  11C2  28 2E       	jr	Z,l_player_lost_life_00124
3472  11C4  06 00       	ld	b,0x00
3473  11C6  21 00 00    	ld	hl,_col
3474  11C9  09          	add	hl, bc
3475  11CA  5E          	ld	e, (hl)
3476  11CB  06 00       	ld	b,0x00
3477  11CD  21 00 00    	ld	hl,_lin
3478  11D0  09          	add	hl, bc
3479  11D1  56          	ld	d, (hl)
3480  11D2  06 00       	ld	b,0x00
3481  11D4  21 00 00    	ld	hl,_tile
3482  11D7  09          	add	hl, bc
3483  11D8  7E          	ld	a, (hl)
3484  11D9  DD 77 FF    	ld	(ix-1),a
3485  11DC  06 00       	ld	b,0x00
3486  11DE  21 00 00    	ld	hl,_colint
3487  11E1  09          	add	hl, bc
3488  11E2  6E          	ld	l, (hl)
3489  11E3  DD 7E FF    	ld	a,(ix-1)
3490  11E6  85          	add	a, l
3491  11E7  47          	ld	b, a
3492  11E8  C5          	push	bc
3493  11E9  7B          	ld	a, e
3494  11EA  5A          	ld	e,d
3495  11EB  57          	ld	d,a
3496  11EC  D5          	push	de
3497  11ED  C5          	push	bc
3498  11EE  CD 00 00    	call	_NIRVANAP_spriteT_callee
3499  11F1  C1          	pop	bc
3500  11F2              l_player_lost_life_00124:
3501  11F2  0C          	inc	c
3502  11F3  79          	ld	a, c
3503  11F4  D6 07       	sub	a,0x07
3504  11F6  38 C2       	jr	C,l_player_lost_life_00123
3505  11F8              l_player_lost_life_00115:
3506  11F8  3A 00 00    	ld	a,(_game_inf_lives)
3507  11FB  B7          	or	a, a
3508  11FC  20 04       	jr	NZ,l_player_lost_life_00117
3509  11FE  21 00 00    	ld	hl,_player_lives
3510  1201  35          	dec	(hl)
3511  1202              l_player_lost_life_00117:
3512  1202  21 00 00    	ld	hl,_player_mana
3513  1205  36 64       	ld	(hl),0x64
3514  1207  21 00 00    	ld	hl,_player_vita
3515  120A  36 64       	ld	(hl),0x64
3516  120C  3A 00 00    	ld	a,(_player_lives)
3517  120F  B7          	or	a, a
3518  1210  28 1D       	jr	Z,l_player_lost_life_00119
3519  1212  21 F4 01    	ld	hl,0x01f4
3520  1215  CD 00 00    	call	_z80_delay_ms_fastcall
3521  1218  3A 00 00    	ld	a,(_game_checkpoint_col)
3522  121B  32 00 00    	ld	(_player_col_scr),a
3523  121E  3A 00 00    	ld	a,(_game_checkpoint_lin)
3524  1221  32 00 00    	ld	(_player_lin_scr),a
3525  1224  3A 00 00    	ld	a,(_game_checkpoint_scr)
3526  1227  32 00 00    	ld	(_scr_curr),a
3527  122A  CD 00 00    	call	_game_round_init
3528  122D  18 0A       	jr	l_player_lost_life_00125
3529  122F              l_player_lost_life_00119:
3530  122F  21 00 00    	ld	hl,_player_lives
3531  1232  36 00       	ld	(hl),0x00
3532  1234  21 00 00    	ld	hl,_game_over
3533  1237  36 01       	ld	(hl),0x01
3534  1239              l_player_lost_life_00125:
3535  1239  F1          	pop	af
3536  123A  DD E1       	pop	ix
3537  123C  C9          	ret
3538  123D              	SECTION code_compiler
3539  123D              ;	---------------------------------
3540  123D              ; Function player_hit
3541  123D              ; ---------------------------------
3542  123D              _player_hit:
3543  123D  7D          	ld	a,l
3544  123E  4D          	ld	c,l
3545  123F  21 00 00    	ld	hl,_player_vita
3546  1242  96          	sub	a, (hl)
3547  1243  30 22       	jr	NC,l_player_hit_00104
3548  1245  3A 00 00    	ld	a,(_game_inmune)
3549  1248  B7          	or	a, a
3550  1249  20 06       	jr	NZ,l_player_hit_00102
3551  124B  21 00 00    	ld	hl,_player_vita
3552  124E  7E          	ld	a, (hl)
3553  124F  91          	sub	a, c
3554  1250  77          	ld	(hl), a
3555  1251              l_player_hit_00102:
3556  1251  2A 00 00    	ld	hl,(_curr_time)
3557  1254  22 00 00    	ld	(_player_hit_time),hl
3558  1257  21 00 00    	ld	hl,_ay_fx_04_golpe
3559  125A  E5          	push	hl
3560  125B  21 01 04    	ld	hl,0x0401
3561  125E  E5          	push	hl
3562  125F  CD 00 00    	call	_ay_song_play
3563  1262  CD 00 00    	call	_game_update_stats
3564  1265  18 03       	jr	l_player_hit_00106
3565  1267              l_player_hit_00104:
3566  1267  CD A7 10    	call	_player_lost_life
3567  126A              l_player_hit_00106:
3568  126A  C9          	ret
3569  126B              	SECTION IGNORE
3570  0000              
