1     0000              MODULE game_player_c
2     0000              
3     0000              ;--------------------------------------------------------
4     0000              ; File Created by SDCC : free open source ANSI-C Compiler
5     0000              ; Version 3.6.5 #9958 (Mac OS X i386)
6     0000              ;--------------------------------------------------------
7     0000              ; Processed by Z88DK
8     0000              ;--------------------------------------------------------
9     0000              
10    0000              	EXTERN __divschar
11    0000              	EXTERN __divschar_callee
12    0000              	EXTERN __divsint
13    0000              	EXTERN __divsint_callee
14    0000              	EXTERN __divslong
15    0000              	EXTERN __divslong_callee
16    0000              	EXTERN __divslonglong
17    0000              	EXTERN __divslonglong_callee
18    0000              	EXTERN __divsuchar
19    0000              	EXTERN __divsuchar_callee
20    0000              	EXTERN __divuchar
21    0000              	EXTERN __divuchar_callee
22    0000              	EXTERN __divuint
23    0000              	EXTERN __divuint_callee
24    0000              	EXTERN __divulong
25    0000              	EXTERN __divulong_callee
26    0000              	EXTERN __divulonglong
27    0000              	EXTERN __divulonglong_callee
28    0000              	EXTERN __divuschar
29    0000              	EXTERN __divuschar_callee
30    0000              	EXTERN __modschar
31    0000              	EXTERN __modschar_callee
32    0000              	EXTERN __modsint
33    0000              	EXTERN __modsint_callee
34    0000              	EXTERN __modslong
35    0000              	EXTERN __modslong_callee
36    0000              	EXTERN __modslonglong
37    0000              	EXTERN __modslonglong_callee
38    0000              	EXTERN __modsuchar
39    0000              	EXTERN __modsuchar_callee
40    0000              	EXTERN __moduchar
41    0000              	EXTERN __moduchar_callee
42    0000              	EXTERN __moduint
43    0000              	EXTERN __moduint_callee
44    0000              	EXTERN __modulong
45    0000              	EXTERN __modulong_callee
46    0000              	EXTERN __modulonglong
47    0000              	EXTERN __modulonglong_callee
48    0000              	EXTERN __moduschar
49    0000              	EXTERN __moduschar_callee
50    0000              	EXTERN __mulint
51    0000              	EXTERN __mulint_callee
52    0000              	EXTERN __mullong
53    0000              	EXTERN __mullong_callee
54    0000              	EXTERN __mullonglong
55    0000              	EXTERN __mullonglong_callee
56    0000              	EXTERN __mulschar
57    0000              	EXTERN __mulschar_callee
58    0000              	EXTERN __mulsuchar
59    0000              	EXTERN __mulsuchar_callee
60    0000              	EXTERN __muluschar
61    0000              	EXTERN __muluschar_callee
62    0000              	EXTERN __rlslonglong
63    0000              	EXTERN __rlslonglong_callee
64    0000              	EXTERN __rlulonglong
65    0000              	EXTERN __rlulonglong_callee
66    0000              	EXTERN __rrslonglong
67    0000              	EXTERN __rrslonglong_callee
68    0000              	EXTERN __rrulonglong
69    0000              	EXTERN __rrulonglong_callee
70    0000              	EXTERN ___sdcc_call_hl
71    0000              	EXTERN ___sdcc_call_iy
72    0000              	EXTERN ___sdcc_enter_ix
73    0000              	EXTERN _banked_call
74    0000              	EXTERN _banked_ret
75    0000              	EXTERN ___fs2schar
76    0000              	EXTERN ___fs2schar_callee
77    0000              	EXTERN ___fs2sint
78    0000              	EXTERN ___fs2sint_callee
79    0000              	EXTERN ___fs2slong
80    0000              	EXTERN ___fs2slong_callee
81    0000              	EXTERN ___fs2slonglong
82    0000              	EXTERN ___fs2slonglong_callee
83    0000              	EXTERN ___fs2uchar
84    0000              	EXTERN ___fs2uchar_callee
85    0000              	EXTERN ___fs2uint
86    0000              	EXTERN ___fs2uint_callee
87    0000              	EXTERN ___fs2ulong
88    0000              	EXTERN ___fs2ulong_callee
89    0000              	EXTERN ___fs2ulonglong
90    0000              	EXTERN ___fs2ulonglong_callee
91    0000              	EXTERN ___fsadd
92    0000              	EXTERN ___fsadd_callee
93    0000              	EXTERN ___fsdiv
94    0000              	EXTERN ___fsdiv_callee
95    0000              	EXTERN ___fseq
96    0000              	EXTERN ___fseq_callee
97    0000              	EXTERN ___fsgt
98    0000              	EXTERN ___fsgt_callee
99    0000              	EXTERN ___fslt
100   0000              	EXTERN ___fslt_callee
101   0000              	EXTERN ___fsmul
102   0000              	EXTERN ___fsmul_callee
103   0000              	EXTERN ___fsneq
104   0000              	EXTERN ___fsneq_callee
105   0000              	EXTERN ___fssub
106   0000              	EXTERN ___fssub_callee
107   0000              	EXTERN ___schar2fs
108   0000              	EXTERN ___schar2fs_callee
109   0000              	EXTERN ___sint2fs
110   0000              	EXTERN ___sint2fs_callee
111   0000              	EXTERN ___slong2fs
112   0000              	EXTERN ___slong2fs_callee
113   0000              	EXTERN ___slonglong2fs
114   0000              	EXTERN ___slonglong2fs_callee
115   0000              	EXTERN ___uchar2fs
116   0000              	EXTERN ___uchar2fs_callee
117   0000              	EXTERN ___uint2fs
118   0000              	EXTERN ___uint2fs_callee
119   0000              	EXTERN ___ulong2fs
120   0000              	EXTERN ___ulong2fs_callee
121   0000              	EXTERN ___ulonglong2fs
122   0000              	EXTERN ___ulonglong2fs_callee
123   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
126   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
127   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
128   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
129   0000              	EXTERN ____sdcc_4_ldi_save_bc
130   0000              	EXTERN ____sdcc_4_push_hlix
131   0000              	EXTERN ____sdcc_4_push_mhl
132   0000              	EXTERN ____sdcc_lib_setmem_hl
133   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
134   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
135   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
136   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
137   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
138   0000              	EXTERN ____sdcc_ll_add_deix_hlix
139   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
140   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
141   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
142   0000              	EXTERN ____sdcc_ll_asr_hlix_a
143   0000              	EXTERN ____sdcc_ll_asr_mbc_a
144   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
145   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
146   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
147   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
148   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
149   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
150   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
151   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
152   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
153   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
155   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
156   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
157   0000              	EXTERN ____sdcc_ll_push_hlix
158   0000              	EXTERN ____sdcc_ll_push_mhl
159   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
160   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
161   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
162   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
163   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
164   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
165   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
166   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
167   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
168   0000              	EXTERN ____sdcc_load_debc_deix
169   0000              	EXTERN ____sdcc_load_dehl_deix
170   0000              	EXTERN ____sdcc_load_debc_mhl
171   0000              	EXTERN ____sdcc_load_hlde_mhl
172   0000              	EXTERN ____sdcc_store_dehl_bcix
173   0000              	EXTERN ____sdcc_store_debc_hlix
174   0000              	EXTERN ____sdcc_store_debc_mhl
175   0000              	EXTERN ____sdcc_cpu_pop_ei
176   0000              	EXTERN ____sdcc_cpu_pop_ei_jp
177   0000              	EXTERN ____sdcc_cpu_push_di
178   0000              	EXTERN ____sdcc_outi
179   0000              	EXTERN ____sdcc_outi_128
180   0000              	EXTERN ____sdcc_outi_256
181   0000              	EXTERN ____sdcc_ldi
182   0000              	EXTERN ____sdcc_ldi_128
183   0000              	EXTERN ____sdcc_ldi_256
184   0000              
185   0000              ;--------------------------------------------------------
186   0000              ; Public variables in this module
187   0000              ;--------------------------------------------------------
188   0000              	GLOBAL _player_check_map
189   0000              	GLOBAL _player_1up
190   0000              	GLOBAL _player_init
191   0000              	GLOBAL _player_turn
192   0000              	GLOBAL _player_move
193   0000              	GLOBAL _player_check_input
194   0000              	GLOBAL _player_move_input
195   0000              	GLOBAL _player_fix_walk_lin
196   0000              	GLOBAL _player_fire
197   0000              	GLOBAL _player_collision
198   0000              	GLOBAL _player_pick_mushroom
199   0000              	GLOBAL _player_check_stairs_vertical
200   0000              	GLOBAL _player_check_stairs
201   0000              	GLOBAL _player_tile
202   0000              	GLOBAL _player_pick_item
203   0000              	GLOBAL _player_hit_platform
204   0000              	GLOBAL _player_hit_platform_clear
205   0000              	GLOBAL _player_score_add
206   0000              	GLOBAL _player_check_floor
207   0000              	GLOBAL _player_gasta_brick
208   0000              	GLOBAL _player_move_jump
209   0000              	GLOBAL _player_open_door
210   0000              	GLOBAL _player_lost_life
211   0000              	GLOBAL _player_hit
212   0000              ;--------------------------------------------------------
213   0000              ; Externals used
214   0000              ;--------------------------------------------------------
215   0000              	GLOBAL _ulltoa_callee
216   0000              	GLOBAL _ulltoa
217   0000              	GLOBAL _strtoull_callee
218   0000              	GLOBAL _strtoull
219   0000              	GLOBAL _strtoll_callee
220   0000              	GLOBAL _strtoll
221   0000              	GLOBAL _lltoa_callee
222   0000              	GLOBAL _lltoa
223   0000              	GLOBAL _llabs_callee
224   0000              	GLOBAL _llabs
225   0000              	GLOBAL __lldivu__callee
226   0000              	GLOBAL __lldivu_
227   0000              	GLOBAL __lldiv__callee
228   0000              	GLOBAL __lldiv_
229   0000              	GLOBAL _atoll_callee
230   0000              	GLOBAL _atoll
231   0000              	GLOBAL _realloc_unlocked_callee
232   0000              	GLOBAL _realloc_unlocked
233   0000              	GLOBAL _malloc_unlocked_fastcall
234   0000              	GLOBAL _malloc_unlocked
235   0000              	GLOBAL _free_unlocked_fastcall
236   0000              	GLOBAL _free_unlocked
237   0000              	GLOBAL _calloc_unlocked_callee
238   0000              	GLOBAL _calloc_unlocked
239   0000              	GLOBAL _aligned_alloc_unlocked_callee
240   0000              	GLOBAL _aligned_alloc_unlocked
241   0000              	GLOBAL _realloc_callee
242   0000              	GLOBAL _realloc
243   0000              	GLOBAL _malloc_fastcall
244   0000              	GLOBAL _malloc
245   0000              	GLOBAL _free_fastcall
246   0000              	GLOBAL _free
247   0000              	GLOBAL _calloc_callee
248   0000              	GLOBAL _calloc
249   0000              	GLOBAL _aligned_alloc_callee
250   0000              	GLOBAL _aligned_alloc
251   0000              	GLOBAL _utoa_callee
252   0000              	GLOBAL _utoa
253   0000              	GLOBAL _ultoa_callee
254   0000              	GLOBAL _ultoa
255   0000              	GLOBAL _system_fastcall
256   0000              	GLOBAL _system
257   0000              	GLOBAL _strtoul_callee
258   0000              	GLOBAL _strtoul
259   0000              	GLOBAL _strtol_callee
260   0000              	GLOBAL _strtol
261   0000              	GLOBAL _strtof_callee
262   0000              	GLOBAL _strtof
263   0000              	GLOBAL _strtod_callee
264   0000              	GLOBAL _strtod
265   0000              	GLOBAL _srand_fastcall
266   0000              	GLOBAL _srand
267   0000              	GLOBAL _rand
268   0000              	GLOBAL _quick_exit_fastcall
269   0000              	GLOBAL _quick_exit
270   0000              	GLOBAL _qsort_callee
271   0000              	GLOBAL _qsort
272   0000              	GLOBAL _ltoa_callee
273   0000              	GLOBAL _ltoa
274   0000              	GLOBAL _labs_fastcall
275   0000              	GLOBAL _labs
276   0000              	GLOBAL _itoa_callee
277   0000              	GLOBAL _itoa
278   0000              	GLOBAL _ftoh_callee
279   0000              	GLOBAL _ftoh
280   0000              	GLOBAL _ftog_callee
281   0000              	GLOBAL _ftog
282   0000              	GLOBAL _ftoe_callee
283   0000              	GLOBAL _ftoe
284   0000              	GLOBAL _ftoa_callee
285   0000              	GLOBAL _ftoa
286   0000              	GLOBAL _exit_fastcall
287   0000              	GLOBAL _exit
288   0000              	GLOBAL _dtoh_callee
289   0000              	GLOBAL _dtoh
290   0000              	GLOBAL _dtog_callee
291   0000              	GLOBAL _dtog
292   0000              	GLOBAL _dtoe_callee
293   0000              	GLOBAL _dtoe
294   0000              	GLOBAL _dtoa_callee
295   0000              	GLOBAL _dtoa
296   0000              	GLOBAL _bsearch_callee
297   0000              	GLOBAL _bsearch
298   0000              	GLOBAL _atol_fastcall
299   0000              	GLOBAL _atol
300   0000              	GLOBAL _atoi_fastcall
301   0000              	GLOBAL _atoi
302   0000              	GLOBAL _atof_fastcall
303   0000              	GLOBAL _atof
304   0000              	GLOBAL _atexit_fastcall
305   0000              	GLOBAL _atexit
306   0000              	GLOBAL _at_quick_exit_fastcall
307   0000              	GLOBAL _at_quick_exit
308   0000              	GLOBAL _abs_fastcall
309   0000              	GLOBAL _abs
310   0000              	GLOBAL _abort
311   0000              	GLOBAL __strtou__callee
312   0000              	GLOBAL __strtou_
313   0000              	GLOBAL __strtoi__callee
314   0000              	GLOBAL __strtoi_
315   0000              	GLOBAL __random_uniform_xor_8__fastcall
316   0000              	GLOBAL __random_uniform_xor_8_
317   0000              	GLOBAL __random_uniform_xor_32__fastcall
318   0000              	GLOBAL __random_uniform_xor_32_
319   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
320   0000              	GLOBAL __random_uniform_cmwc_8_
321   0000              	GLOBAL __shellsort__callee
322   0000              	GLOBAL __shellsort_
323   0000              	GLOBAL __quicksort__callee
324   0000              	GLOBAL __quicksort_
325   0000              	GLOBAL __insertion_sort__callee
326   0000              	GLOBAL __insertion_sort_
327   0000              	GLOBAL __ldivu__callee
328   0000              	GLOBAL __ldivu_
329   0000              	GLOBAL __ldiv__callee
330   0000              	GLOBAL __ldiv_
331   0000              	GLOBAL __divu__callee
332   0000              	GLOBAL __divu_
333   0000              	GLOBAL __div__callee
334   0000              	GLOBAL __div_
335   0000              	GLOBAL _NIRVANAP_drawTW_raw_callee
336   0000              	GLOBAL _NIRVANAP_drawTW_raw
337   0000              	GLOBAL _NIRVANAP_drawTW_callee
338   0000              	GLOBAL _NIRVANAP_drawTW
339   0000              	GLOBAL _NIRVANAP_drawW_raw_callee
340   0000              	GLOBAL _NIRVANAP_drawW_raw
341   0000              	GLOBAL _NIRVANAP_drawW_callee
342   0000              	GLOBAL _NIRVANAP_drawW
343   0000              	GLOBAL _NIRVANAP_spriteT_callee
344   0000              	GLOBAL _NIRVANAP_spriteT
345   0000              	GLOBAL _NIRVANAP_fillC_callee
346   0000              	GLOBAL _NIRVANAP_fillC
347   0000              	GLOBAL _NIRVANAP_readC_callee
348   0000              	GLOBAL _NIRVANAP_readC
349   0000              	GLOBAL _NIRVANAP_paintC_callee
350   0000              	GLOBAL _NIRVANAP_paintC
351   0000              	GLOBAL _NIRVANAP_printC_callee
352   0000              	GLOBAL _NIRVANAP_printC
353   0000              	GLOBAL _NIRVANAP_fillT_raw_callee
354   0000              	GLOBAL _NIRVANAP_fillT_raw
355   0000              	GLOBAL _NIRVANAP_fillT_callee
356   0000              	GLOBAL _NIRVANAP_fillT
357   0000              	GLOBAL _NIRVANAP_drawT_raw_callee
358   0000              	GLOBAL _NIRVANAP_drawT_raw
359   0000              	GLOBAL _NIRVANAP_drawT_callee
360   0000              	GLOBAL _NIRVANAP_drawT
361   0000              	GLOBAL _NIRVANAP_stop
362   0000              	GLOBAL _NIRVANAP_start
363   0000              	GLOBAL _debug3
364   0000              	GLOBAL _debug2
365   0000              	GLOBAL _debug
366   0000              	GLOBAL _zx_print_str
367   0000              	GLOBAL _zx_print_int
368   0000              	GLOBAL _zx_print_chr
369   0000              	GLOBAL _zx_print_bonus_time
370   0000              	GLOBAL _zx_isr
371   0000              	GLOBAL _z80_otdr_callee
372   0000              	GLOBAL _z80_otdr
373   0000              	GLOBAL _z80_otir_callee
374   0000              	GLOBAL _z80_otir
375   0000              	GLOBAL _z80_outp_callee
376   0000              	GLOBAL _z80_outp
377   0000              	GLOBAL _z80_indr_callee
378   0000              	GLOBAL _z80_indr
379   0000              	GLOBAL _z80_inir_callee
380   0000              	GLOBAL _z80_inir
381   0000              	GLOBAL _z80_inp_fastcall
382   0000              	GLOBAL _z80_inp
383   0000              	GLOBAL _z80_set_int_state_fastcall
384   0000              	GLOBAL _z80_set_int_state
385   0000              	GLOBAL _z80_get_int_state
386   0000              	GLOBAL _z80_delay_tstate_fastcall
387   0000              	GLOBAL _z80_delay_tstate
388   0000              	GLOBAL _z80_delay_ms_fastcall
389   0000              	GLOBAL _z80_delay_ms
390   0000              	GLOBAL _im2_remove_generic_callback_callee
391   0000              	GLOBAL _im2_remove_generic_callback
392   0000              	GLOBAL _im2_prepend_generic_callback_callee
393   0000              	GLOBAL _im2_prepend_generic_callback
394   0000              	GLOBAL _im2_append_generic_callback_callee
395   0000              	GLOBAL _im2_append_generic_callback
396   0000              	GLOBAL _im2_create_generic_isr_8080_callee
397   0000              	GLOBAL _im2_create_generic_isr_8080
398   0000              	GLOBAL _im2_create_generic_isr_callee
399   0000              	GLOBAL _im2_create_generic_isr
400   0000              	GLOBAL _im2_install_isr_callee
401   0000              	GLOBAL _im2_install_isr
402   0000              	GLOBAL _im2_init_fastcall
403   0000              	GLOBAL _im2_init
404   0000              	GLOBAL _intrinsic_swap_word_32_fastcall
405   0000              	GLOBAL _intrinsic_swap_word_32
406   0000              	GLOBAL _intrinsic_swap_endian_32_fastcall
407   0000              	GLOBAL _intrinsic_swap_endian_32
408   0000              	GLOBAL _intrinsic_swap_endian_16_fastcall
409   0000              	GLOBAL _intrinsic_swap_endian_16
410   0000              	GLOBAL _intrinsic_return_de
411   0000              	GLOBAL _intrinsic_return_bc
412   0000              	GLOBAL _intrinsic_exx
413   0000              	GLOBAL _intrinsic_ex_de_hl
414   0000              	GLOBAL _intrinsic_nop
415   0000              	GLOBAL _intrinsic_im_2
416   0000              	GLOBAL _intrinsic_im_1
417   0000              	GLOBAL _intrinsic_im_0
418   0000              	GLOBAL _intrinsic_retn
419   0000              	GLOBAL _intrinsic_reti
420   0000              	GLOBAL _intrinsic_halt
421   0000              	GLOBAL _intrinsic_ei
422   0000              	GLOBAL _intrinsic_di
423   0000              	GLOBAL _intrinsic_stub
424   0000              	GLOBAL _intrinsic_outi
425   0000              	GLOBAL _intrinsic_ldi
426   0000              	GLOBAL _zx_pattern_fill_callee
427   0000              	GLOBAL _zx_pattern_fill
428   0000              	GLOBAL _zx_saddrpup_fastcall
429   0000              	GLOBAL _zx_saddrpup
430   0000              	GLOBAL _zx_saddrpright_callee
431   0000              	GLOBAL _zx_saddrpright
432   0000              	GLOBAL _zx_saddrpleft_callee
433   0000              	GLOBAL _zx_saddrpleft
434   0000              	GLOBAL _zx_saddrpdown_fastcall
435   0000              	GLOBAL _zx_saddrpdown
436   0000              	GLOBAL _zx_saddrcup_fastcall
437   0000              	GLOBAL _zx_saddrcup
438   0000              	GLOBAL _zx_saddrcright_fastcall
439   0000              	GLOBAL _zx_saddrcright
440   0000              	GLOBAL _zx_saddrcleft_fastcall
441   0000              	GLOBAL _zx_saddrcleft
442   0000              	GLOBAL _zx_saddrcdown_fastcall
443   0000              	GLOBAL _zx_saddrcdown
444   0000              	GLOBAL _zx_saddr2py_fastcall
445   0000              	GLOBAL _zx_saddr2py
446   0000              	GLOBAL _zx_saddr2px_fastcall
447   0000              	GLOBAL _zx_saddr2px
448   0000              	GLOBAL _zx_saddr2cy_fastcall
449   0000              	GLOBAL _zx_saddr2cy
450   0000              	GLOBAL _zx_saddr2cx_fastcall
451   0000              	GLOBAL _zx_saddr2cx
452   0000              	GLOBAL _zx_saddr2aaddr_fastcall
453   0000              	GLOBAL _zx_saddr2aaddr
454   0000              	GLOBAL _zx_py2saddr_fastcall
455   0000              	GLOBAL _zx_py2saddr
456   0000              	GLOBAL _zx_py2aaddr_fastcall
457   0000              	GLOBAL _zx_py2aaddr
458   0000              	GLOBAL _zx_pxy2saddr_callee
459   0000              	GLOBAL _zx_pxy2saddr
460   0000              	GLOBAL _zx_pxy2aaddr_callee
461   0000              	GLOBAL _zx_pxy2aaddr
462   0000              	GLOBAL _zx_px2bitmask_fastcall
463   0000              	GLOBAL _zx_px2bitmask
464   0000              	GLOBAL _zx_cy2saddr_fastcall
465   0000              	GLOBAL _zx_cy2saddr
466   0000              	GLOBAL _zx_cy2aaddr_fastcall
467   0000              	GLOBAL _zx_cy2aaddr
468   0000              	GLOBAL _zx_cxy2saddr_callee
469   0000              	GLOBAL _zx_cxy2saddr
470   0000              	GLOBAL _zx_cxy2aaddr_callee
471   0000              	GLOBAL _zx_cxy2aaddr
472   0000              	GLOBAL _zx_bitmask2px_fastcall
473   0000              	GLOBAL _zx_bitmask2px
474   0000              	GLOBAL _zx_aaddrcup_fastcall
475   0000              	GLOBAL _zx_aaddrcup
476   0000              	GLOBAL _zx_aaddrcright_fastcall
477   0000              	GLOBAL _zx_aaddrcright
478   0000              	GLOBAL _zx_aaddrcleft_fastcall
479   0000              	GLOBAL _zx_aaddrcleft
480   0000              	GLOBAL _zx_aaddrcdown_fastcall
481   0000              	GLOBAL _zx_aaddrcdown
482   0000              	GLOBAL _zx_aaddr2saddr_fastcall
483   0000              	GLOBAL _zx_aaddr2saddr
484   0000              	GLOBAL _zx_aaddr2py_fastcall
485   0000              	GLOBAL _zx_aaddr2py
486   0000              	GLOBAL _zx_aaddr2px_fastcall
487   0000              	GLOBAL _zx_aaddr2px
488   0000              	GLOBAL _zx_aaddr2cy_fastcall
489   0000              	GLOBAL _zx_aaddr2cy
490   0000              	GLOBAL _zx_aaddr2cx_fastcall
491   0000              	GLOBAL _zx_aaddr2cx
492   0000              	GLOBAL _zx_visit_wc_pix_callee
493   0000              	GLOBAL _zx_visit_wc_pix
494   0000              	GLOBAL _zx_visit_wc_attr_callee
495   0000              	GLOBAL _zx_visit_wc_attr
496   0000              	GLOBAL _zx_scroll_wc_up_pix_callee
497   0000              	GLOBAL _zx_scroll_wc_up_pix
498   0000              	GLOBAL _zx_scroll_wc_up_attr_callee
499   0000              	GLOBAL _zx_scroll_wc_up_attr
500   0000              	GLOBAL _zx_scroll_wc_up_callee
501   0000              	GLOBAL _zx_scroll_wc_up
502   0000              	GLOBAL _zx_scroll_up_pix_callee
503   0000              	GLOBAL _zx_scroll_up_pix
504   0000              	GLOBAL _zx_scroll_up_attr_callee
505   0000              	GLOBAL _zx_scroll_up_attr
506   0000              	GLOBAL _zx_scroll_up_callee
507   0000              	GLOBAL _zx_scroll_up
508   0000              	GLOBAL _zx_cls_wc_pix_callee
509   0000              	GLOBAL _zx_cls_wc_pix
510   0000              	GLOBAL _zx_cls_wc_attr_callee
511   0000              	GLOBAL _zx_cls_wc_attr
512   0000              	GLOBAL _zx_cls_wc_callee
513   0000              	GLOBAL _zx_cls_wc
514   0000              	GLOBAL _zx_cls_pix_fastcall
515   0000              	GLOBAL _zx_cls_pix
516   0000              	GLOBAL _zx_cls_attr_fastcall
517   0000              	GLOBAL _zx_cls_attr
518   0000              	GLOBAL _zx_cls_fastcall
519   0000              	GLOBAL _zx_cls
520   0000              	GLOBAL _zx_border_fastcall
521   0000              	GLOBAL _zx_border
522   0000              	GLOBAL _spr_btile_paint_back
523   0000              	GLOBAL _spr_explode_bullet
524   0000              	GLOBAL _spr_init_anim_bullets
525   0000              	GLOBAL _spr_turn_horizontal
526   0000              	GLOBAL _spr_play_bullets
527   0000              	GLOBAL _spr_play_anim
528   0000              	GLOBAL _spr_add_anim
529   0000              	GLOBAL _spr_clear_scr
530   0000              	GLOBAL _spr_page_map
531   0000              	GLOBAL _spr_page_down
532   0000              	GLOBAL _spr_page_up
533   0000              	GLOBAL _spr_page_right
534   0000              	GLOBAL _spr_page_left
535   0000              	GLOBAL _spr_tile_paint
536   0000              	GLOBAL _spr_calc_hor
537   0000              	GLOBAL _spr_draw_index
538   0000              	GLOBAL _spr_brick_anim
539   0000              	GLOBAL _spr_back_repaint
540   0000              	GLOBAL _spr_tile
541   0000              	GLOBAL _spr_destroy
542   0000              	GLOBAL _spr_tile_dir
543   0000              	GLOBAL _spr_redraw
544   0000              	GLOBAL _spr_move_left
545   0000              	GLOBAL _spr_move_right
546   0000              	GLOBAL _spr_move_horizontal
547   0000              	GLOBAL _spr_move_down
548   0000              	GLOBAL _spr_move_up
549   0000              	GLOBAL _spr_calc_index
550   0000              	GLOBAL _spr_chktime
551   0000              	GLOBAL _sound_hit_brick
552   0000              	GLOBAL _sound_hit_enemy
553   0000              	GLOBAL _sound_kill
554   0000              	GLOBAL _sound_enter_enemy
555   0000              	GLOBAL _sound_coin
556   0000              	GLOBAL _sound_jump
557   0000              	GLOBAL _sound_slide
558   0000              	GLOBAL _menu_define_key
559   0000              	GLOBAL _menu_redefine
560   0000              	GLOBAL _menu_main_print
561   0000              	GLOBAL _menu_main
562   0000              	GLOBAL _game_match_back
563   0000              	GLOBAL _game_attribs
564   0000              	GLOBAL _game_boss_clear
565   0000              	GLOBAL _game_obj_clear
566   0000              	GLOBAL _game_obj_chk
567   0000              	GLOBAL _game_obj_set
568   0000              	GLOBAL _game_shoot_fire_boss
569   0000              	GLOBAL _game_shoot_fire
570   0000              	GLOBAL _game_add_enemy
571   0000              	GLOBAL _game_print_header
572   0000              	GLOBAL _game_check_time
573   0000              	GLOBAL _game_rotate_attrib_osd
574   0000              	GLOBAL _game_rotate_attrib
575   0000              	GLOBAL _game_colour_message
576   0000              	GLOBAL _game_paint_attrib_lin_osd
577   0000              	GLOBAL _game_paint_attrib_lin_h
578   0000              	GLOBAL _game_paint_attrib_lin
579   0000              	GLOBAL _game_print_score
580   0000              	GLOBAL _game_check_cell
581   0000              	GLOBAL _game_check_map
582   0000              	GLOBAL _game_loop
583   0000              	GLOBAL _game_round_init
584   0000              	GLOBAL _game_start_timer
585   0000              	GLOBAL _game_update_stats
586   0000              	GLOBAL _game_print_footer
587   0000              	GLOBAL _game_fill_row
588   0000              	GLOBAL _game_fps
589   0000              	GLOBAL _game_respawn
590   0000              	GLOBAL _game_draw_screen
591   0000              	GLOBAL _boss_turn
592   0000              	GLOBAL _enemy_avoid_dead
593   0000              	GLOBAL _enemy_avoid_fall
594   0000              	GLOBAL _enemy_respawn
595   0000              	GLOBAL _enemy_init
596   0000              	GLOBAL _enemy_move
597   0000              	GLOBAL _enemy_turn
598   0000              	GLOBAL _enemy_hit
599   0000              	GLOBAL _enemy_static
600   0000              	GLOBAL _enemy_walk
601   0000              	GLOBAL _enemy_horizontal
602   0000              	GLOBAL _enemy_vertical
603   0000              	GLOBAL _ay_fx_play
604   0000              	GLOBAL _ay_midi_play
605   0000              	GLOBAL _ay_is_playing
606   0000              	GLOBAL _ay_reset
607   0000              	GLOBAL _test_func
608   0000              	GLOBAL _test_proc
609   0000              	GLOBAL _in_mouse_kempston_wheel_delta
610   0000              	GLOBAL _in_mouse_kempston_wheel
611   0000              	GLOBAL _in_mouse_kempston_callee
612   0000              	GLOBAL _in_mouse_kempston
613   0000              	GLOBAL _in_mouse_kempston_setpos_callee
614   0000              	GLOBAL _in_mouse_kempston_setpos
615   0000              	GLOBAL _in_mouse_kempston_reset
616   0000              	GLOBAL _in_mouse_kempston_init
617   0000              	GLOBAL _in_mouse_amx_wheel_delta
618   0000              	GLOBAL _in_mouse_amx_wheel
619   0000              	GLOBAL _in_mouse_amx_callee
620   0000              	GLOBAL _in_mouse_amx
621   0000              	GLOBAL _in_mouse_amx_setpos_callee
622   0000              	GLOBAL _in_mouse_amx_setpos
623   0000              	GLOBAL _in_mouse_amx_reset
624   0000              	GLOBAL _in_mouse_amx_init_callee
625   0000              	GLOBAL _in_mouse_amx_init
626   0000              	GLOBAL _in_stick_sinclair2
627   0000              	GLOBAL _in_stick_sinclair1
628   0000              	GLOBAL _in_stick_kempston
629   0000              	GLOBAL _in_stick_fuller
630   0000              	GLOBAL _in_stick_cursor
631   0000              	GLOBAL _in_stick_keyboard_fastcall
632   0000              	GLOBAL _in_stick_keyboard
633   0000              	GLOBAL _in_wait_nokey
634   0000              	GLOBAL _in_wait_key
635   0000              	GLOBAL _in_test_key
636   0000              	GLOBAL _in_pause_fastcall
637   0000              	GLOBAL _in_pause
638   0000              	GLOBAL _in_key_scancode_fastcall
639   0000              	GLOBAL _in_key_scancode
640   0000              	GLOBAL _in_key_pressed_fastcall
641   0000              	GLOBAL _in_key_pressed
642   0000              	GLOBAL _in_inkey
643   0000              	GLOBAL _NIRVANAP_CHAR_TABLE
644   0000              	GLOBAL _NIRVANAP_WIDE_IMAGES
645   0000              	GLOBAL _NIRVANAP_TILE_IMAGES
646   0000              	GLOBAL _NIRVANAP_HOLE
647   0000              	GLOBAL _NIRVANAP_ISR_HOOK
648   0000              	GLOBAL _player_lvl_table
649   0000              	GLOBAL _map_paper_last
650   0000              	GLOBAL _map_paper_clr
651   0000              	GLOBAL _map_paper
652   0000              	GLOBAL _draw_count
653   0000              	GLOBAL _g_player_hit_right
654   0000              	GLOBAL _g_player_hit_left
655   0000              	GLOBAL _bullet_count
656   0000              	GLOBAL _spr_hack
657   0000              	GLOBAL _boss_stat
658   0000              	GLOBAL _boss_time_fire
659   0000              	GLOBAL _boss_time
660   0000              	GLOBAL _boss_tile
661   0000              	GLOBAL _boss_inc
662   0000              	GLOBAL _boss_col
663   0000              	GLOBAL _boss_lin
664   0000              	GLOBAL _bullet_vel
665   0000              	GLOBAL _bullet_frames
666   0000              	GLOBAL _bullet_colint
667   0000              	GLOBAL _bullet_dir
668   0000              	GLOBAL _bullet_tile
669   0000              	GLOBAL _bullet_col
670   0000              	GLOBAL _bullet_lin
671   0000              	GLOBAL _bullet_col0
672   0000              	GLOBAL _bullet_lin0
673   0000              	GLOBAL _bullet_max
674   0000              	GLOBAL _bullet_class
675   0000              	GLOBAL _mush_class
676   0000              	GLOBAL _mush_index
677   0000              	GLOBAL _anim_count
678   0000              	GLOBAL _anim_respanwn
679   0000              	GLOBAL _anim_loop
680   0000              	GLOBAL _anim_end
681   0000              	GLOBAL _anim_int
682   0000              	GLOBAL _anim_tile
683   0000              	GLOBAL _anim_col
684   0000              	GLOBAL _anim_lin
685   0000              	GLOBAL _map_heigth
686   0000              	GLOBAL _map_width
687   0000              	GLOBAL _scr_curr
688   0000              	GLOBAL _scr_obj1
689   0000              	GLOBAL _scr_obj0
690   0000              	GLOBAL _scr_map
691   0000              	GLOBAL _sprite_speed_alt
692   0000              	GLOBAL _sprite_frames
693   0000              	GLOBAL _sprite_speed
694   0000              	GLOBAL _screen_ink
695   0000              	GLOBAL _screen_paper
696   0000              	GLOBAL _player_onstair
697   0000              	GLOBAL _game_start_scr
698   0000              	GLOBAL _game_respawn_tile
699   0000              	GLOBAL _game_respawn_index
700   0000              	GLOBAL _game_respawn_time
701   0000              	GLOBAL _game_score_top
702   0000              	GLOBAL _player_coins
703   0000              	GLOBAL _player_lives
704   0000              	GLOBAL _game_over
705   0000              	GLOBAL _game_sound
706   0000              	GLOBAL _game_inmune
707   0000              	GLOBAL _game_god_mode
708   0000              	GLOBAL _sprite_curr_index
709   0000              	GLOBAL _spr_count
710   0000              	GLOBAL _bullet_time
711   0000              	GLOBAL _anim_time
712   0000              	GLOBAL _frame_time
713   0000              	GLOBAL _curr_time
714   0000              	GLOBAL _s_state
715   0000              	GLOBAL _attrib_osd
716   0000              	GLOBAL _attrib_hl
717   0000              	GLOBAL _attrib
718   0000              	GLOBAL _zx_val_asm
719   0000              	GLOBAL _enemies
720   0000              	GLOBAL _tmp_ui
721   0000              	GLOBAL _tmp_sc
722   0000              	GLOBAL _tmp_uc
723   0000              	GLOBAL _tmp1
724   0000              	GLOBAL _tmp0
725   0000              	GLOBAL _tmp
726   0000              	GLOBAL _index1
727   0000              	GLOBAL _index0
728   0000              	GLOBAL _loop_count
729   0000              	GLOBAL _s_col1
730   0000              	GLOBAL _s_col0
731   0000              	GLOBAL _s_lin1
732   0000              	GLOBAL _s_lin0
733   0000              	GLOBAL _s_tile1
734   0000              	GLOBAL _s_tile0
735   0000              	GLOBAL _player_brick_time
736   0000              	GLOBAL _player_hit_count
737   0000              	GLOBAL _sprite_horizontal_check
738   0000              	GLOBAL _sprite_on_air
739   0000              	GLOBAL _sprite
740   0000              	GLOBAL _fps
741   0000              	GLOBAL _game_respawn_curr_time
742   0000              	GLOBAL _game_worldup
743   0000              	GLOBAL _game_mush_count
744   0000              	GLOBAL _game_boss_fix
745   0000              	GLOBAL _game_boss_hit
746   0000              	GLOBAL _game_boss_alive
747   0000              	GLOBAL _game_boss
748   0000              	GLOBAL _game_world
749   0000              	GLOBAL _game_gravity
750   0000              	GLOBAL _player_anim_stair
751   0000              	GLOBAL _player_hit_time
752   0000              	GLOBAL _player_lin_scr
753   0000              	GLOBAL _player_col_scr
754   0000              	GLOBAL _player_lvl
755   0000              	GLOBAL _player_int
756   0000              	GLOBAL _player_str
757   0000              	GLOBAL _player_max_vita
758   0000              	GLOBAL _player_max_mana
759   0000              	GLOBAL _player_vita
760   0000              	GLOBAL _player_mana
761   0000              	GLOBAL _player_keys
762   0000              	GLOBAL _player_vel_inc
763   0000              	GLOBAL _player_vel_y1
764   0000              	GLOBAL _player_vel_y0
765   0000              	GLOBAL _player_vel_y
766   0000              	GLOBAL _player_vel_x
767   0000              	GLOBAL _player_joy
768   0000              	GLOBAL _player_score
769   0000              	GLOBAL _last_time
770   0000              	GLOBAL _player_slide
771   0000              	GLOBAL _spr_timer
772   0000              	GLOBAL _jump_lin
773   0000              	GLOBAL _player_hit_col
774   0000              	GLOBAL _player_hit_lin
775   0000              	GLOBAL _colint
776   0000              	GLOBAL _col
777   0000              	GLOBAL _lin
778   0000              	GLOBAL _tile
779   0000              	GLOBAL _state_a
780   0000              	GLOBAL _state
781   0000              	GLOBAL _class
782   0000              	GLOBAL _tbuffer
783   0000              	GLOBAL _dirs
784   0000              	GLOBAL _k1
785   0000              	GLOBAL _joyfunc1
786   0000              	GLOBAL _btiles
787   0000              	GLOBAL _spec128
788   0000              	GLOBAL _GLOBAL_ZX_PORT_7FFD
789   0000              	GLOBAL _GLOBAL_ZX_PORT_1FFD
790   0000              	GLOBAL _GLOBAL_ZX_PORT_FE
791   0000              	GLOBAL _ay_effect_20
792   0000              	GLOBAL _ay_effect_19
793   0000              	GLOBAL _ay_effect_18
794   0000              	GLOBAL _ay_effect_17
795   0000              	GLOBAL _ay_effect_16
796   0000              	GLOBAL _ay_effect_15
797   0000              	GLOBAL _ay_effect_14
798   0000              	GLOBAL _ay_effect_13
799   0000              	GLOBAL _ay_effect_12
800   0000              	GLOBAL _ay_effect_11
801   0000              	GLOBAL _ay_effect_10
802   0000              	GLOBAL _ay_effect_09
803   0000              	GLOBAL _ay_effect_08
804   0000              	GLOBAL _ay_effect_07
805   0000              	GLOBAL _ay_effect_06
806   0000              	GLOBAL _ay_effect_05
807   0000              	GLOBAL _ay_effect_04
808   0000              	GLOBAL _ay_effect_03
809   0000              	GLOBAL _ay_effect_02
810   0000              	GLOBAL _ay_effect_01
811   0000              	GLOBAL _pb_midi_phase_1
812   0000              	GLOBAL _pb_midi_title
813   0000              	GLOBAL _control_method
814   0000              	GLOBAL _world1_h
815   0000              	GLOBAL _world1_w
816   0000              	GLOBAL _world1
817   0000              	GLOBAL _paper1
818   0000              	GLOBAL _lenght1
819   0000              	GLOBAL _start_scr1
820   0000              	GLOBAL _world0_h
821   0000              	GLOBAL _world0_w
822   0000              	GLOBAL _world0
823   0000              	GLOBAL _paper0
824   0000              	GLOBAL _lenght0
825   0000              	GLOBAL _start_scr0
826   0000              ;--------------------------------------------------------
827   0000              ; special function registers
828   0000              ;--------------------------------------------------------
829   0000              defc _IO_FE	=	0x00fe
830   0000              defc _IO_1FFD	=	0x1ffd
831   0000              defc _IO_7FFD	=	0x7ffd
832   0000              ;--------------------------------------------------------
833   0000              ; ram data
834   0000              ;--------------------------------------------------------
835   0000              	SECTION bss_compiler
836   0000              ;--------------------------------------------------------
837   0000              ; ram data
838   0000              ;--------------------------------------------------------
839   0000              
840   0000              IF 0
841   0000              
842   0000              ; .area _INITIALIZED removed by z88dk
843   0000              
844   0000              
845   0000              ENDIF
846   0000              
847   0000              ;--------------------------------------------------------
848   0000              ; absolute external ram data
849   0000              ;--------------------------------------------------------
850   0000              	SECTION IGNORE
851   0000              ;--------------------------------------------------------
852   0000              ; global & static initialisations
853   0000              ;--------------------------------------------------------
854   0000              	SECTION code_crt_init
855   0000              ;--------------------------------------------------------
856   0000              ; Home
857   0000              ;--------------------------------------------------------
858   0000              	SECTION IGNORE
859   0000              ;--------------------------------------------------------
860   0000              ; code
861   0000              ;--------------------------------------------------------
862   0000              	SECTION code_compiler
863   0000              ;	---------------------------------
864   0000              ; Function player_init
865   0000              ; ---------------------------------
866   0000              _player_init:
867   0000  CD 00 00    	call	___sdcc_enter_ix
868   0003  21 07 00    	ld	hl, +(_class + 0x0007)
869   0006  36 00       	ld	(hl),0x00
870   0008  21 07 00    	ld	hl, +(_tile + 0x0007)
871   000B  DD 7E 06    	ld	a,(ix+6)
872   000E  77          	ld	(hl), a
873   000F  21 07 00    	ld	hl, +(_lin + 0x0007)
874   0012  DD 7E 04    	ld	a,(ix+4)
875   0015  77          	ld	(hl), a
876   0016  21 07 00    	ld	hl, +(_col + 0x0007)
877   0019  DD 7E 05    	ld	a,(ix+5)
878   001C  77          	ld	(hl), a
879   001D  21 07 00    	ld	hl, +(_colint + 0x0007)
880   0020  36 00       	ld	(hl),0x00
881   0022  21 07 00    	ld	hl, +(_state + 0x0007)
882   0025  36 00       	ld	(hl),0x00
883   0027  01 07 00    	ld	bc,_state_a+7
884   002A  AF          	xor	a, a
885   002B  02          	ld	(bc), a
886   002C  21 07 00    	ld	hl, +(_jump_lin + 0x0007)
887   002F  DD 7E 04    	ld	a,(ix+4)
888   0032  77          	ld	(hl), a
889   0033  ED 5B 00 00 	ld	de,(_curr_time)
890   0037  ED 53 0E 00 	ld	(_last_time + 0x000e),de
891   003B  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
892   003E  36 00       	ld	(hl),0x00
893   0040  0A          	ld	a, (bc)
894   0041  F6 11       	or	a,+(0x01|0x10)
895   0043  02          	ld	(bc),a
896   0044  21 00 00    	ld	hl,_player_hit_col
897   0047  36 00       	ld	(hl),0x00
898   0049  21 00 00    	ld	hl,_player_hit_lin
899   004C  36 00       	ld	(hl),0x00
900   004E  21 00 00    	ld	hl,_player_slide
901   0051  36 00       	ld	(hl),0x00
902   0053  DD 66 05    	ld	h,(ix+5)
903   0056  DD 6E 04    	ld	l,(ix+4)
904   0059  E5          	push	hl
905   005A  DD 56 06    	ld	d,(ix+6)
906   005D  1E 07       	ld	e,0x07
907   005F  D5          	push	de
908   0060  CD 00 00    	call	_NIRVANAP_spriteT_callee
909   0063  DD E1       	pop	ix
910   0065  C9          	ret
911   0066              	SECTION code_compiler
912   0066              ;	---------------------------------
913   0066              ; Function player_turn
914   0066              ; ---------------------------------
915   0066              _player_turn:
916   0066  21 00 00    	ld	hl,_sprite
917   0069  CD 00 00    	call	_spr_chktime
918   006C  7D          	ld	a, l
919   006D  B7          	or	a, a
920   006E  C8          	ret	Z
921   006F  21 00 00    	ld	hl,_k1
922   0072  E5          	push	hl
923   0073  2A 00 00    	ld	hl,(_joyfunc1)
924   0076  CD 00 00    	call	___sdcc_call_hl
925   0079  F1          	pop	af
926   007A  7D          	ld	a,l
927   007B  32 00 00    	ld	(_dirs),a
928   007E  CD 84 00    	call	_player_move
929   0081  C3 59 03    	jp  _player_collision
930   0084              	SECTION code_compiler
931   0084              ;	---------------------------------
932   0084              ; Function player_move
933   0084              ; ---------------------------------
934   0084              _player_move:
935   0084  3A 07 00    	ld	a,(_lin + 0x0007)
936   0087  32 00 00    	ld	(_s_lin0),a
937   008A  3A 07 00    	ld	a,(_col + 0x0007)
938   008D  32 00 00    	ld	(_s_col0),a
939   0090  21 07 00    	ld	hl,+(_tile + 0x0007)
940   0093  4E          	ld	c, (hl)
941   0094  21 07 00    	ld	hl,+(_colint + 0x0007)
942   0097  46          	ld	b, (hl)
943   0098  79          	ld	a, c
944   0099  80          	add	a, b
945   009A  32 00 00    	ld	(_s_tile0),a
946   009D  3A 07 00    	ld	a,(_state + 0x0007)
947   00A0  32 00 00    	ld	(_s_state),a
948   00A3  21 00 00    	ld	hl,_s_state
949   00A6  CB 46       	bit	0, (hl)
950   00A8  20 07       	jr	NZ,l_player_move_00113
951   00AA  21 00 00    	ld	hl,_s_state
952   00AD  CB 4E       	bit	1, (hl)
953   00AF  28 49       	jr	Z,l_player_move_00114
954   00B1              l_player_move_00113:
955   00B1  CD 10 03    	call	_player_fire
956   00B4  3A 00 00    	ld	a,(_player_vel_y)
957   00B7  21 00 00    	ld	hl,_player_vel_y1
958   00BA  96          	sub	a, (hl)
959   00BB  E2 C0 00    	jp	PO, l_player_move_00162
960   00BE  EE 80       	xor	a,0x80
961   00C0              l_player_move_00162:
962   00C0  F2 E3 00    	jp	P, l_player_move_00106
963   00C3  21 00 00    	ld	hl,_dirs
964   00C6  CB 56       	bit	2, (hl)
965   00C8  28 09       	jr	Z,l_player_move_00102
966   00CA  21 00 00    	ld	hl,_s_state
967   00CD  7E          	ld	a,(hl)
968   00CE  F6 08       	or	a,0x08
969   00D0  E6 FB       	and	a,0xfb
970   00D2  77          	ld	(hl),a
971   00D3              l_player_move_00102:
972   00D3  21 00 00    	ld	hl,_dirs
973   00D6  CB 4E       	bit	1, (hl)
974   00D8  28 09       	jr	Z,l_player_move_00106
975   00DA  21 00 00    	ld	hl,_s_state
976   00DD  7E          	ld	a,(hl)
977   00DE  F6 04       	or	a,0x04
978   00E0  E6 F7       	and	a,0xf7
979   00E2  77          	ld	(hl),a
980   00E3              l_player_move_00106:
981   00E3  CD EA 0C    	call	_player_move_jump
982   00E6  7D          	ld	a, l
983   00E7  B7          	or	a, a
984   00E8  28 1C       	jr	Z,l_player_move_00115
985   00EA  3A 00 00    	ld	a,(_player_onstair)
986   00ED  B7          	or	a, a
987   00EE  20 16       	jr	NZ,l_player_move_00115
988   00F0  21 60 08    	ld	hl,0x0860
989   00F3  E5          	push	hl
990   00F4  CD 2A 06    	call	_player_tile
991   00F7  F1          	pop	af
992   00F8  18 0C       	jr	l_player_move_00115
993   00FA              l_player_move_00114:
994   00FA  CD 61 01    	call	_player_move_input
995   00FD  3A 00 00    	ld	a,(_player_onstair)
996   0100  B7          	or	a, a
997   0101  20 03       	jr	NZ,l_player_move_00115
998   0103  CD 65 0B    	call	_player_check_floor
999   0106              l_player_move_00115:
1000  0106  CD 00 00    	call	_spr_redraw
1001  0109  7D          	ld	a, l
1002  010A  B7          	or	a, a
1003  010B  28 03       	jr	Z,l_player_move_00118
1004  010D  CD 45 06    	call	_player_check_map
1005  0110              l_player_move_00118:
1006  0110  3A 00 00    	ld	a,(_player_hit_lin)
1007  0113  B7          	or	a, a
1008  0114  28 03       	jr	Z,l_player_move_00120
1009  0116  CD D2 0A    	call	_player_hit_platform_clear
1010  0119              l_player_move_00120:
1011  0119  3A 00 00    	ld	a,(_s_state)
1012  011C  32 07 00    	ld	((_state + 0x0007)),a
1013  011F  2E 00       	ld	l,0x00
1014  0121  C9          	ret
1015  0122              	SECTION code_compiler
1016  0122              ;	---------------------------------
1017  0122              ; Function player_check_input
1018  0122              ; ---------------------------------
1019  0122              _player_check_input:
1020  0122  21 00 00    	ld	hl,_dirs
1021  0125  CB 56       	bit	2, (hl)
1022  0127  28 0C       	jr	Z,l_player_check_input_00102
1023  0129  21 00 00    	ld	hl,_dirs
1024  012C  CB 5E       	bit	3, (hl)
1025  012E  28 05       	jr	Z,l_player_check_input_00102
1026  0130  21 00 00    	ld	hl,_dirs
1027  0133  36 00       	ld	(hl),0x00
1028  0135              l_player_check_input_00102:
1029  0135  21 00 00    	ld	hl,_dirs
1030  0138  7E          	ld	a, (hl)
1031  0139  CB 07       	rlc	a
1032  013B  E6 01       	and	a,0x01
1033  013D  CB 47       	bit	0, a
1034  013F  20 1D       	jr	NZ,l_player_check_input_00107
1035  0141  CB 56       	bit	2, (hl)
1036  0143  20 19       	jr	NZ,l_player_check_input_00107
1037  0145  21 00 00    	ld	hl,_dirs
1038  0148  CB 5E       	bit	3, (hl)
1039  014A  20 12       	jr	NZ,l_player_check_input_00107
1040  014C  21 00 00    	ld	hl,_dirs
1041  014F  CB 46       	bit	0, (hl)
1042  0151  20 0B       	jr	NZ,l_player_check_input_00107
1043  0153  21 00 00    	ld	hl,_dirs
1044  0156  CB 4E       	bit	1, (hl)
1045  0158  20 04       	jr	NZ,l_player_check_input_00107
1046  015A  2E 00       	ld	l,0x00
1047  015C  18 02       	jr	l_player_check_input_00108
1048  015E              l_player_check_input_00107:
1049  015E  2E 01       	ld	l,0x01
1050  0160              l_player_check_input_00108:
1051  0160  C9          	ret
1052  0161              	SECTION code_compiler
1053  0161              ;	---------------------------------
1054  0161              ; Function player_move_input
1055  0161              ; ---------------------------------
1056  0161              _player_move_input:
1057  0161  CD 22 01    	call	_player_check_input
1058  0164  7D          	ld	a, l
1059  0165  B7          	or	a, a
1060  0166  CA D0 02    	jp	Z, l_player_move_input_00147
1061  0169  CD 10 03    	call	_player_fire
1062  016C  7D          	ld	a, l
1063  016D  B7          	or	a, a
1064  016E  28 0A       	jr	Z,l_player_move_input_00102
1065  0170  21 00 00    	ld	hl,_dirs
1066  0173  36 00       	ld	(hl),0x00
1067  0175  2E 00       	ld	l,0x00
1068  0177  C3 F6 02    	jp	l_player_move_input_00149
1069  017A              l_player_move_input_00102:
1070  017A  21 00 00    	ld	hl,_dirs
1071  017D  CB 7E       	bit	7, (hl)
1072  017F  28 54       	jr	Z,l_player_move_input_00106
1073  0181  21 00 00    	ld	hl,_dirs
1074  0184  CB 46       	bit	0, (hl)
1075  0186  28 4D       	jr	Z,l_player_move_input_00106
1076  0188  21 00 00    	ld	hl,_player_vel_inc
1077  018B  36 01       	ld	(hl),0x01
1078  018D  CD 00 00    	call	_ay_is_playing
1079  0190  7D          	ld	a, l
1080  0191  D6 03       	sub	a,0x03
1081  0193  28 06       	jr	Z,l_player_move_input_00104
1082  0195  21 00 00    	ld	hl,_ay_effect_03
1083  0198  CD 00 00    	call	_ay_fx_play
1084  019B              l_player_move_input_00104:
1085  019B  21 00 00    	ld	hl,_player_onstair
1086  019E  36 00       	ld	(hl),0x00
1087  01A0  CD 00 00    	call	_sound_jump
1088  01A3  21 00 00    	ld	hl,_s_state
1089  01A6  7E          	ld	a,(hl)
1090  01A7  F6 01       	or	a,0x01
1091  01A9  E6 FD       	and	a,0xfd
1092  01AB  77          	ld	(hl),a
1093  01AC  3A 07 00    	ld	a,(_lin + 0x0007)
1094  01AF  32 07 00    	ld	((_jump_lin + 0x0007)),a
1095  01B2  3A 00 00    	ld	a,(_s_state)
1096  01B5  32 07 00    	ld	((_state + 0x0007)),a
1097  01B8  21 64 08    	ld	hl,0x0864
1098  01BB  E5          	push	hl
1099  01BC  CD 2A 06    	call	_player_tile
1100  01BF  F1          	pop	af
1101  01C0  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
1102  01C3  36 02       	ld	(hl),0x02
1103  01C5  21 00 00    	ld	hl,_player_slide
1104  01C8  36 00       	ld	(hl),0x00
1105  01CA  3A 00 00    	ld	a,(_player_vel_y0)
1106  01CD  32 00 00    	ld	(_player_vel_y),a
1107  01D0  2E 01       	ld	l,0x01
1108  01D2  C3 F6 02    	jp	l_player_move_input_00149
1109  01D5              l_player_move_input_00106:
1110  01D5  21 00 00    	ld	hl,_dirs
1111  01D8  CB 5E       	bit	3, (hl)
1112  01DA  28 23       	jr	Z,l_player_move_input_00111
1113  01DC  CD F7 02    	call	_player_fix_walk_lin
1114  01DF  21 00 00    	ld	hl,_s_state
1115  01E2  7E          	ld	a,(hl)
1116  01E3  F6 04       	or	a,0x04
1117  01E5  E6 F7       	and	a,0xf7
1118  01E7  77          	ld	(hl),a
1119  01E8  01 07 00    	ld	bc,_state_a+7
1120  01EB  0A          	ld	a, (bc)
1121  01EC  F6 10       	or	a,0x10
1122  01EE  E6 F7       	and	a,0xf7
1123  01F0  02          	ld	(bc),a
1124  01F1  3A 00 00    	ld	a,(_player_onstair)
1125  01F4  B7          	or	a, a
1126  01F5  28 05       	jr	Z,l_player_move_input_00109
1127  01F7  2E 00       	ld	l,0x00
1128  01F9  CD 98 05    	call	_player_check_stairs
1129  01FC              l_player_move_input_00109:
1130  01FC  CD 00 00    	call	_spr_move_horizontal
1131  01FF              l_player_move_input_00111:
1132  01FF  21 00 00    	ld	hl,_dirs
1133  0202  CB 56       	bit	2, (hl)
1134  0204  28 23       	jr	Z,l_player_move_input_00115
1135  0206  CD F7 02    	call	_player_fix_walk_lin
1136  0209  21 00 00    	ld	hl,_s_state
1137  020C  7E          	ld	a,(hl)
1138  020D  F6 08       	or	a,0x08
1139  020F  E6 FB       	and	a,0xfb
1140  0211  77          	ld	(hl),a
1141  0212  01 07 00    	ld	bc,_state_a+7
1142  0215  0A          	ld	a, (bc)
1143  0216  F6 08       	or	a,0x08
1144  0218  E6 EF       	and	a,0xef
1145  021A  02          	ld	(bc),a
1146  021B  3A 00 00    	ld	a,(_player_onstair)
1147  021E  B7          	or	a, a
1148  021F  28 05       	jr	Z,l_player_move_input_00113
1149  0221  2E 00       	ld	l,0x00
1150  0223  CD 98 05    	call	_player_check_stairs
1151  0226              l_player_move_input_00113:
1152  0226  CD 00 00    	call	_spr_move_horizontal
1153  0229              l_player_move_input_00115:
1154  0229  21 00 00    	ld	hl,_dirs
1155  022C  CB 46       	bit	0, (hl)
1156  022E  28 3C       	jr	Z,l_player_move_input_00127
1157  0230  2E 00       	ld	l,0x00
1158  0232  CD 98 05    	call	_player_check_stairs
1159  0235  3A 00 00    	ld	a,(_player_onstair)
1160  0238  B7          	or	a, a
1161  0239  20 13       	jr	NZ,l_player_move_input_00119
1162  023B  2E 01       	ld	l,0x01
1163  023D  CD 98 05    	call	_player_check_stairs
1164  0240  3A 00 00    	ld	a,(_player_onstair)
1165  0243  B7          	or	a, a
1166  0244  20 08       	jr	NZ,l_player_move_input_00119
1167  0246  3E FE       	ld	a,0xfe
1168  0248  F5          	push	af
1169  0249  33          	inc	sp
1170  024A  CD EF 04    	call	_player_check_stairs_vertical
1171  024D  33          	inc	sp
1172  024E              l_player_move_input_00119:
1173  024E  3A 00 00    	ld	a,(_player_onstair)
1174  0251  B7          	or	a, a
1175  0252  28 05       	jr	Z,l_player_move_input_00124
1176  0254  CD 00 00    	call	_spr_move_up
1177  0257  18 13       	jr	l_player_move_input_00127
1178  0259              l_player_move_input_00124:
1179  0259  21 00 00    	ld	hl,_dirs
1180  025C  CB 5E       	bit	3, (hl)
1181  025E  20 0C       	jr	NZ,l_player_move_input_00127
1182  0260  21 00 00    	ld	hl,_dirs
1183  0263  CB 56       	bit	2, (hl)
1184  0265  20 05       	jr	NZ,l_player_move_input_00127
1185  0267  2E 00       	ld	l,0x00
1186  0269  C3 F6 02    	jp	l_player_move_input_00149
1187  026C              l_player_move_input_00127:
1188  026C  21 00 00    	ld	hl,_dirs
1189  026F  CB 4E       	bit	1, (hl)
1190  0271  28 3B       	jr	Z,l_player_move_input_00139
1191  0273  2E 00       	ld	l,0x00
1192  0275  CD 98 05    	call	_player_check_stairs
1193  0278  3A 00 00    	ld	a,(_player_onstair)
1194  027B  B7          	or	a, a
1195  027C  20 13       	jr	NZ,l_player_move_input_00131
1196  027E  2E 01       	ld	l,0x01
1197  0280  CD 98 05    	call	_player_check_stairs
1198  0283  3A 00 00    	ld	a,(_player_onstair)
1199  0286  B7          	or	a, a
1200  0287  20 08       	jr	NZ,l_player_move_input_00131
1201  0289  3E 12       	ld	a,0x12
1202  028B  F5          	push	af
1203  028C  33          	inc	sp
1204  028D  CD EF 04    	call	_player_check_stairs_vertical
1205  0290  33          	inc	sp
1206  0291              l_player_move_input_00131:
1207  0291  3A 00 00    	ld	a,(_player_onstair)
1208  0294  B7          	or	a, a
1209  0295  28 05       	jr	Z,l_player_move_input_00136
1210  0297  CD 00 00    	call	_spr_move_down
1211  029A  18 12       	jr	l_player_move_input_00139
1212  029C              l_player_move_input_00136:
1213  029C  21 00 00    	ld	hl,_dirs
1214  029F  CB 5E       	bit	3, (hl)
1215  02A1  20 0B       	jr	NZ,l_player_move_input_00139
1216  02A3  21 00 00    	ld	hl,_dirs
1217  02A6  CB 56       	bit	2, (hl)
1218  02A8  20 04       	jr	NZ,l_player_move_input_00139
1219  02AA  2E 00       	ld	l,0x00
1220  02AC  18 48       	jr	l_player_move_input_00149
1221  02AE              l_player_move_input_00139:
1222  02AE  3A 00 00    	ld	a,(_s_state)
1223  02B1  32 07 00    	ld	((_state + 0x0007)),a
1224  02B4  3A 00 00    	ld	a,(_player_onstair)
1225  02B7  B7          	or	a, a
1226  02B8  28 0A       	jr	Z,l_player_move_input_00141
1227  02BA  21 72 00    	ld	hl,0x0072
1228  02BD  E5          	push	hl
1229  02BE  CD 2A 06    	call	_player_tile
1230  02C1  F1          	pop	af
1231  02C2  18 08       	jr	l_player_move_input_00142
1232  02C4              l_player_move_input_00141:
1233  02C4  21 60 08    	ld	hl,0x0860
1234  02C7  E5          	push	hl
1235  02C8  CD 2A 06    	call	_player_tile
1236  02CB  F1          	pop	af
1237  02CC              l_player_move_input_00142:
1238  02CC  2E 01       	ld	l,0x01
1239  02CE  18 26       	jr	l_player_move_input_00149
1240  02D0              l_player_move_input_00147:
1241  02D0  21 07 00    	ld	hl, +(_colint + 0x0007)
1242  02D3  36 00       	ld	(hl),0x00
1243  02D5  3A 00 00    	ld	a,(_player_onstair)
1244  02D8  B7          	or	a, a
1245  02D9  28 0A       	jr	Z,l_player_move_input_00144
1246  02DB  21 72 00    	ld	hl,0x0072
1247  02DE  E5          	push	hl
1248  02DF  CD 2A 06    	call	_player_tile
1249  02E2  F1          	pop	af
1250  02E3  18 08       	jr	l_player_move_input_00145
1251  02E5              l_player_move_input_00144:
1252  02E5  21 70 01    	ld	hl,0x0170
1253  02E8  E5          	push	hl
1254  02E9  CD 2A 06    	call	_player_tile
1255  02EC  F1          	pop	af
1256  02ED              l_player_move_input_00145:
1257  02ED  21 00 00    	ld	hl,_s_state
1258  02F0  7E          	ld	a,(hl)
1259  02F1  E6 F3       	and	a,+(0xf7&0xfb)
1260  02F3  77          	ld	(hl),a
1261  02F4  2E 00       	ld	l,0x00
1262  02F6              l_player_move_input_00149:
1263  02F6  C9          	ret
1264  02F7              	SECTION code_compiler
1265  02F7              ;	---------------------------------
1266  02F7              ; Function player_fix_walk_lin
1267  02F7              ; ---------------------------------
1268  02F7              _player_fix_walk_lin:
1269  02F7  3A 00 00    	ld	a,(_player_onstair)
1270  02FA  B7          	or	a, a
1271  02FB  C0          	ret	NZ
1272  02FC  01 07 00    	ld	bc,_lin+7
1273  02FF  3A 00 00    	ld	a,(_s_lin0)
1274  0302  07          	rlca
1275  0303  07          	rlca
1276  0304  07          	rlca
1277  0305  07          	rlca
1278  0306  E6 0F       	and	a,0x0f
1279  0308  07          	rlca
1280  0309  07          	rlca
1281  030A  07          	rlca
1282  030B  07          	rlca
1283  030C  E6 F0       	and	a,0xf0
1284  030E  02          	ld	(bc), a
1285  030F  C9          	ret
1286  0310              	SECTION code_compiler
1287  0310              ;	---------------------------------
1288  0310              ; Function player_fire
1289  0310              ; ---------------------------------
1290  0310              _player_fire:
1291  0310  21 00 00    	ld	hl,_dirs
1292  0313  CB 7E       	bit	7, (hl)
1293  0315  28 3F       	jr	Z,l_player_fire_00110
1294  0317  21 00 00    	ld	hl,_dirs
1295  031A  CB 46       	bit	0, (hl)
1296  031C  20 38       	jr	NZ,l_player_fire_00110
1297  031E  21 00 00    	ld	hl,_player_mana
1298  0321  7E          	ld	a, (hl)
1299  0322  B7          	or	a, a
1300  0323  28 2D       	jr	Z,l_player_fire_00107
1301  0325  3A 07 00    	ld	a,(_bullet_col + 0x0007)
1302  0328  3C          	inc	a
1303  0329  20 27       	jr	NZ,l_player_fire_00107
1304  032B  3E 05       	ld	a,0x05
1305  032D  96          	sub	a, (hl)
1306  032E  30 12       	jr	NC,l_player_fire_00104
1307  0330  CD 00 00    	call	_sound_hit_enemy
1308  0333  3A 00 00    	ld	a,(_game_god_mode)
1309  0336  B7          	or	a, a
1310  0337  20 0E       	jr	NZ,l_player_fire_00105
1311  0339  21 00 00    	ld	hl,_player_mana
1312  033C  7E          	ld	a, (hl)
1313  033D  C6 FB       	add	a,0xfb
1314  033F  77          	ld	(hl), a
1315  0340  18 05       	jr	l_player_fire_00105
1316  0342              l_player_fire_00104:
1317  0342  21 00 00    	ld	hl,_player_mana
1318  0345  36 00       	ld	(hl),0x00
1319  0347              l_player_fire_00105:
1320  0347  CD 00 00    	call	_game_update_stats
1321  034A  21 07 78    	ld	hl,0x7807
1322  034D  E5          	push	hl
1323  034E  CD 00 00    	call	_game_shoot_fire
1324  0351  F1          	pop	af
1325  0352              l_player_fire_00107:
1326  0352  2E 01       	ld	l,0x01
1327  0354  18 02       	jr	l_player_fire_00112
1328  0356              l_player_fire_00110:
1329  0356  2E 00       	ld	l,0x00
1330  0358              l_player_fire_00112:
1331  0358  C9          	ret
1332  0359              	SECTION code_compiler
1333  0359              ;	---------------------------------
1334  0359              ; Function player_collision
1335  0359              ; ---------------------------------
1336  0359              _player_collision:
1337  0359  CD 00 00    	call	___sdcc_enter_ix
1338  035C  F5          	push	af
1339  035D  21 19 00    	ld	hl,0x0019
1340  0360  E5          	push	hl
1341  0361  2A 00 00    	ld	hl,(_player_hit_time)
1342  0364  E5          	push	hl
1343  0365  CD 00 00    	call	_game_check_time
1344  0368  F1          	pop	af
1345  0369  F1          	pop	af
1346  036A  7D          	ld	a, l
1347  036B  B7          	or	a, a
1348  036C  CA A9 04    	jp	Z, l_player_collision_00127
1349  036F  21 00 00    	ld	hl,_sprite
1350  0372  36 00       	ld	(hl),0x00
1351  0374  01 00 00    	ld	bc,_col+0
1352  0377  3A 07 00    	ld	a,(_col + 7)
1353  037A  32 00 00    	ld	(_s_col1),a
1354  037D  3A 07 00    	ld	a,(_lin + 7)
1355  0380  32 00 00    	ld	(_s_lin1),a
1356  0383  C6 08       	add	a,0x08
1357  0385  57          	ld	d, a
1358  0386  3A 00 00    	ld	a,(_s_col1)
1359  0389  C5          	push	bc
1360  038A  5A          	ld	e,d
1361  038B  57          	ld	d,a
1362  038C  D5          	push	de
1363  038D  CD 00 00    	call	_spr_calc_index
1364  0390  F1          	pop	af
1365  0391  C1          	pop	bc
1366  0392  7D          	ld	a,l
1367  0393  32 00 00    	ld	(_sprite_curr_index),a
1368  0396  5F          	ld	e,a
1369  0397  16 00       	ld	d,0x00
1370  0399  21 00 00    	ld	hl,_scr_map
1371  039C  19          	add	hl,de
1372  039D  5E          	ld	e, (hl)
1373  039E  3E 2F       	ld	a,0x2f
1374  03A0  93          	sub	a, e
1375  03A1  30 1C       	jr	NC,l_player_collision_00123
1376  03A3  7B          	ld	a,e
1377  03A4  FE 3C       	cp	a,0x3c
1378  03A6  30 17       	jr	NC,l_player_collision_00123
1379  03A8  D6 39       	sub	a,0x39
1380  03AA  20 07       	jr	NZ,l_player_collision_00102
1381  03AC  21 00 00    	ld	hl,_game_worldup
1382  03AF  36 01       	ld	(hl),0x01
1383  03B1  18 0C       	jr	l_player_collision_00123
1384  03B3              l_player_collision_00102:
1385  03B3  2E 06       	ld	l,0x06
1386  03B5  CD 00 00    	call	_zx_border_fastcall
1387  03B8  C5          	push	bc
1388  03B9  2E 32       	ld	l,0x32
1389  03BB  CD 95 10    	call	_player_hit
1390  03BE  C1          	pop	bc
1391  03BF              l_player_collision_00123:
1392  03BF  21 00 00    	ld	hl,_sprite
1393  03C2  7E          	ld	a, (hl)
1394  03C3  D6 07       	sub	a,0x07
1395  03C5  D2 A9 04    	jp	NC, l_player_collision_00127
1396  03C8  3E 00       	ld	a, +((_class) & 0xFF)
1397  03CA  86          	add	a, (hl)
1398  03CB  5F          	ld	e, a
1399  03CC  3E 00       	ld	a, +((_class) / 256)
1400  03CE  CE 00       	adc	a,0x00
1401  03D0  57          	ld	d, a
1402  03D1  1A          	ld	a, (de)
1403  03D2  B7          	or	a, a
1404  03D3  CA A2 04    	jp	Z, l_player_collision_00122
1405  03D6  79          	ld	a, c
1406  03D7  86          	add	a, (hl)
1407  03D8  5F          	ld	e, a
1408  03D9  78          	ld	a, b
1409  03DA  CE 00       	adc	a,0x00
1410  03DC  57          	ld	d, a
1411  03DD  1A          	ld	a, (de)
1412  03DE  DD 77 FE    	ld	(ix-2),a
1413  03E1  DD 36 FF 00 	ld	(ix-1),0x00
1414  03E5  3A 00 00    	ld	a,(_s_col1)
1415  03E8  5F          	ld	e,a
1416  03E9  16 00       	ld	d,0x00
1417  03EB  DD 7E FE    	ld	a,(ix-2)
1418  03EE  93          	sub	a, e
1419  03EF  6F          	ld	l, a
1420  03F0  DD 7E FF    	ld	a,(ix-1)
1421  03F3  9A          	sbc	a, d
1422  03F4  67          	ld	h, a
1423  03F5  CD 00 00    	call	_abs_fastcall
1424  03F8  EB          	ex	de,hl
1425  03F9  7B          	ld	a, e
1426  03FA  D6 02       	sub	a,0x02
1427  03FC  7A          	ld	a, d
1428  03FD  17          	rla
1429  03FE  3F          	ccf
1430  03FF  1F          	rra
1431  0400  DE 80       	sbc	a,0x80
1432  0402  D2 A2 04    	jp	NC, l_player_collision_00122
1433  0405  2A 00 00    	ld	hl,(_sprite)
1434  0408  26 00       	ld	h,0x00
1435  040A  11 00 00    	ld	de,_lin
1436  040D  19          	add	hl,de
1437  040E  7E          	ld	a,(hl)
1438  040F  DD 77 FE    	ld	(ix-2),a
1439  0412  DD 36 FF 00 	ld	(ix-1),0x00
1440  0416  3A 00 00    	ld	a,(_s_lin1)
1441  0419  5F          	ld	e,a
1442  041A  16 00       	ld	d,0x00
1443  041C  DD 7E FE    	ld	a,(ix-2)
1444  041F  93          	sub	a, e
1445  0420  6F          	ld	l, a
1446  0421  DD 7E FF    	ld	a,(ix-1)
1447  0424  9A          	sbc	a, d
1448  0425  67          	ld	h, a
1449  0426  CD 00 00    	call	_abs_fastcall
1450  0429  EB          	ex	de,hl
1451  042A  7B          	ld	a, e
1452  042B  D6 0E       	sub	a,0x0e
1453  042D  7A          	ld	a, d
1454  042E  17          	rla
1455  042F  3F          	ccf
1456  0430  1F          	rra
1457  0431  DE 80       	sbc	a,0x80
1458  0433  30 6D       	jr	NC,l_player_collision_00122
1459  0435  2A 00 00    	ld	hl,(_sprite)
1460  0438  26 00       	ld	h,0x00
1461  043A  01 00 00    	ld	bc,_class
1462  043D  09          	add	hl,bc
1463  043E  7E          	ld	a,(hl)
1464  043F  FE 06       	cp	a,0x06
1465  0441  28 05       	jr	Z,l_player_collision_00189
1466  0443  21 00 00    	ld	hl,_sprite
1467  0446  18 1D       	jr	l_player_collision_00110
1468  0448              l_player_collision_00189:
1469  0448  21 00 00    	ld	hl,_player_vita
1470  044B  7E          	ld	a, (hl)
1471  044C  C6 19       	add	a,0x19
1472  044E  77          	ld	(hl), a
1473  044F  3A 00 00    	ld	a,(_player_max_vita)
1474  0452  21 00 00    	ld	hl,_player_vita
1475  0455  96          	sub	a, (hl)
1476  0456  30 06       	jr	NC,l_player_collision_00108
1477  0458  3A 00 00    	ld	a,(_player_max_vita)
1478  045B  32 00 00    	ld	(_player_vita),a
1479  045E              l_player_collision_00108:
1480  045E  CD AF 04    	call	_player_pick_mushroom
1481  0461  2E 00       	ld	l,0x00
1482  0463  18 46       	jr	l_player_collision_00128
1483  0465              l_player_collision_00110:
1484  0465  FE 07       	cp	a,0x07
1485  0467  20 1D       	jr	NZ,l_player_collision_00114
1486  0469  21 00 00    	ld	hl,_player_mana
1487  046C  7E          	ld	a, (hl)
1488  046D  C6 19       	add	a,0x19
1489  046F  77          	ld	(hl), a
1490  0470  3A 00 00    	ld	a,(_player_max_mana)
1491  0473  21 00 00    	ld	hl,_player_mana
1492  0476  96          	sub	a, (hl)
1493  0477  30 06       	jr	NC,l_player_collision_00112
1494  0479  3A 00 00    	ld	a,(_player_max_mana)
1495  047C  32 00 00    	ld	(_player_mana),a
1496  047F              l_player_collision_00112:
1497  047F  CD AF 04    	call	_player_pick_mushroom
1498  0482  2E 00       	ld	l,0x00
1499  0484  18 25       	jr	l_player_collision_00128
1500  0486              l_player_collision_00114:
1501  0486  D6 08       	sub	a,0x08
1502  0488  20 0A       	jr	NZ,l_player_collision_00116
1503  048A  CD C3 04    	call	_player_1up
1504  048D  CD AF 04    	call	_player_pick_mushroom
1505  0490  2E 00       	ld	l,0x00
1506  0492  18 17       	jr	l_player_collision_00128
1507  0494              l_player_collision_00116:
1508  0494  2E 02       	ld	l,0x02
1509  0496  CD 00 00    	call	_zx_border_fastcall
1510  0499  2E 14       	ld	l,0x14
1511  049B  CD 95 10    	call	_player_hit
1512  049E  2E 01       	ld	l,0x01
1513  04A0  18 09       	jr	l_player_collision_00128
1514  04A2              l_player_collision_00122:
1515  04A2  21 00 00    	ld	hl,_sprite
1516  04A5  34          	inc	(hl)
1517  04A6  C3 BF 03    	jp	l_player_collision_00123
1518  04A9              l_player_collision_00127:
1519  04A9  2E 00       	ld	l,0x00
1520  04AB              l_player_collision_00128:
1521  04AB  F1          	pop	af
1522  04AC  DD E1       	pop	ix
1523  04AE  C9          	ret
1524  04AF              	SECTION code_compiler
1525  04AF              ;	---------------------------------
1526  04AF              ; Function player_pick_mushroom
1527  04AF              ; ---------------------------------
1528  04AF              _player_pick_mushroom:
1529  04AF  21 01 00    	ld	hl,0x0001
1530  04B2  CD 01 0B    	call	_player_score_add
1531  04B5  CD 00 00    	call	_game_update_stats
1532  04B8  2A 00 00    	ld	hl,(_sprite)
1533  04BB  CD 00 00    	call	_spr_destroy
1534  04BE  21 00 00    	ld	hl,_game_mush_count
1535  04C1  35          	dec	(hl)
1536  04C2  C9          	ret
1537  04C3              	SECTION code_compiler
1538  04C3              ;	---------------------------------
1539  04C3              ; Function player_1up
1540  04C3              ; ---------------------------------
1541  04C3              _player_1up:
1542  04C3  21 00 00    	ld	hl,_player_lives
1543  04C6  7E          	ld	a, (hl)
1544  04C7  D6 FF       	sub	a,0xff
1545  04C9  D0          	ret	NC
1546  04CA  34          	inc	(hl)
1547  04CB  21 00 00    	ld	hl,___str_0
1548  04CE  E5          	push	hl
1549  04CF  21 0C 0C    	ld	hl,0x0c0c
1550  04D2  E5          	push	hl
1551  04D3  CD 00 00    	call	_zx_print_str
1552  04D6  AF          	xor	a, a
1553  04D7  F5          	push	af
1554  04D8  33          	inc	sp
1555  04D9  21 19 00    	ld	hl,0x0019
1556  04DC  E5          	push	hl
1557  04DD  21 0C 15    	ld	hl,0x150c
1558  04E0  E5          	push	hl
1559  04E1  3E 0C       	ld	a,0x0c
1560  04E3  F5          	push	af
1561  04E4  33          	inc	sp
1562  04E5  CD 00 00    	call	_game_colour_message
1563  04E8  F1          	pop	af
1564  04E9  F1          	pop	af
1565  04EA  F1          	pop	af
1566  04EB  CD 00 00    	call	_game_update_stats
1567  04EE  C9          	ret
1568  04EF              	SECTION rodata_compiler
1569  0000              ___str_0:
1570  0000  31 20 55 50 21 
                        	DEFM "1 UP!"
1571  0005  00          	DEFB 0x00
1572  0006              	SECTION code_compiler
1573  04EF              ;	---------------------------------
1574  04EF              ; Function player_check_stairs_vertical
1575  04EF              ; ---------------------------------
1576  04EF              _player_check_stairs_vertical:
1577  04EF  CD 00 00    	call	___sdcc_enter_ix
1578  04F2  3B          	dec	sp
1579  04F3  21 07 00    	ld	hl,+(_col + 0x0007)
1580  04F6  4E          	ld	c, (hl)
1581  04F7  CB 41       	bit	0, c
1582  04F9  20 2F       	jr	NZ,l_player_check_stairs_vertical_00102
1583  04FB  3A 07 00    	ld	a,(_lin + 0x0007)
1584  04FE  DD 86 04    	add	a,(ix+4)
1585  0501  47          	ld	b, a
1586  0502  79          	ld	a, c
1587  0503  48          	ld	c,b
1588  0504  47          	ld	b,a
1589  0505  C5          	push	bc
1590  0506  CD 00 00    	call	_spr_calc_index
1591  0509  F1          	pop	af
1592  050A  7D          	ld	a,l
1593  050B  32 00 00    	ld	(_sprite_curr_index),a
1594  050E  4F          	ld	c,a
1595  050F  06 00       	ld	b,0x00
1596  0511  21 00 00    	ld	hl,_scr_map
1597  0514  09          	add	hl,bc
1598  0515  7E          	ld	a,(hl)
1599  0516  4F          	ld	c,a
1600  0517  D6 44       	sub	a,0x44
1601  0519  38 05       	jr	C,l_player_check_stairs_vertical_00110
1602  051B  3E 47       	ld	a,0x47
1603  051D  91          	sub	a, c
1604  051E  30 04       	jr	NC,l_player_check_stairs_vertical_00111
1605  0520              l_player_check_stairs_vertical_00110:
1606  0520  1E 00       	ld	e,0x00
1607  0522  18 02       	jr	l_player_check_stairs_vertical_00112
1608  0524              l_player_check_stairs_vertical_00111:
1609  0524  1E 01       	ld	e,0x01
1610  0526              l_player_check_stairs_vertical_00112:
1611  0526  0E 00       	ld	c,0x00
1612  0528  18 57       	jr	l_player_check_stairs_vertical_00103
1613  052A              l_player_check_stairs_vertical_00102:
1614  052A  79          	ld	a, c
1615  052B  DD 96 04    	sub	a,(ix+4)
1616  052E  57          	ld	d, a
1617  052F  01 07 00    	ld	bc,_lin+7
1618  0532  0A          	ld	a, (bc)
1619  0533  DD 86 04    	add	a,(ix+4)
1620  0536  C5          	push	bc
1621  0537  5F          	ld	e,a
1622  0538  D5          	push	de
1623  0539  CD 00 00    	call	_spr_calc_index
1624  053C  F1          	pop	af
1625  053D  C1          	pop	bc
1626  053E  7D          	ld	a,l
1627  053F  32 00 00    	ld	(_sprite_curr_index),a
1628  0542  5F          	ld	e,a
1629  0543  16 00       	ld	d,0x00
1630  0545  21 00 00    	ld	hl,_scr_map
1631  0548  19          	add	hl,de
1632  0549  7E          	ld	a,(hl)
1633  054A  5F          	ld	e,a
1634  054B  D6 44       	sub	a,0x44
1635  054D  38 05       	jr	C,l_player_check_stairs_vertical_00113
1636  054F  3E 47       	ld	a,0x47
1637  0551  93          	sub	a, e
1638  0552  30 04       	jr	NC,l_player_check_stairs_vertical_00114
1639  0554              l_player_check_stairs_vertical_00113:
1640  0554  1E 00       	ld	e,0x00
1641  0556  18 02       	jr	l_player_check_stairs_vertical_00115
1642  0558              l_player_check_stairs_vertical_00114:
1643  0558  1E 01       	ld	e,0x01
1644  055A              l_player_check_stairs_vertical_00115:
1645  055A  3A 07 00    	ld	a,(_col + 0x0007)
1646  055D  DD 96 04    	sub	a,(ix+4)
1647  0560  57          	ld	d, a
1648  0561  0A          	ld	a, (bc)
1649  0562  DD 86 04    	add	a,(ix+4)
1650  0565  D5          	push	de
1651  0566  5F          	ld	e,a
1652  0567  D5          	push	de
1653  0568  CD 00 00    	call	_spr_calc_index
1654  056B  F1          	pop	af
1655  056C  D1          	pop	de
1656  056D  7D          	ld	a,l
1657  056E  32 00 00    	ld	(_sprite_curr_index),a
1658  0571  7B          	ld	a, e
1659  0572  D6 44       	sub	a,0x44
1660  0574  38 05       	jr	C,l_player_check_stairs_vertical_00116
1661  0576  3E 47       	ld	a,0x47
1662  0578  93          	sub	a, e
1663  0579  30 04       	jr	NC,l_player_check_stairs_vertical_00117
1664  057B              l_player_check_stairs_vertical_00116:
1665  057B  0E 00       	ld	c,0x00
1666  057D  18 02       	jr	l_player_check_stairs_vertical_00118
1667  057F              l_player_check_stairs_vertical_00117:
1668  057F  0E 01       	ld	c,0x01
1669  0581              l_player_check_stairs_vertical_00118:
1670  0581              l_player_check_stairs_vertical_00103:
1671  0581  7B          	ld	a, e
1672  0582  B7          	or	a,a
1673  0583  20 03       	jr	NZ,l_player_check_stairs_vertical_00104
1674  0585  B1          	or	a,c
1675  0586  28 07       	jr	Z,l_player_check_stairs_vertical_00105
1676  0588              l_player_check_stairs_vertical_00104:
1677  0588  21 00 00    	ld	hl,_player_onstair
1678  058B  36 01       	ld	(hl),0x01
1679  058D  18 05       	jr	l_player_check_stairs_vertical_00108
1680  058F              l_player_check_stairs_vertical_00105:
1681  058F  21 00 00    	ld	hl,_player_onstair
1682  0592  36 00       	ld	(hl),0x00
1683  0594              l_player_check_stairs_vertical_00108:
1684  0594  33          	inc	sp
1685  0595  DD E1       	pop	ix
1686  0597  C9          	ret
1687  0598              	SECTION code_compiler
1688  0598              ;	---------------------------------
1689  0598              ; Function player_check_stairs
1690  0598              ; ---------------------------------
1691  0598              _player_check_stairs:
1692  0598  CD 00 00    	call	___sdcc_enter_ix
1693  059B  3B          	dec	sp
1694  059C  5D          	ld	e, l
1695  059D  3A 07 00    	ld	a,(_col + 0x0007)
1696  05A0  83          	add	a, e
1697  05A1  4F          	ld	c, a
1698  05A2  21 07 00    	ld	hl,+(_lin + 0x0007)
1699  05A5  46          	ld	b, (hl)
1700  05A6  D5          	push	de
1701  05A7  79          	ld	a, c
1702  05A8  48          	ld	c,b
1703  05A9  47          	ld	b,a
1704  05AA  C5          	push	bc
1705  05AB  CD 00 00    	call	_spr_calc_index
1706  05AE  F1          	pop	af
1707  05AF  D1          	pop	de
1708  05B0  7D          	ld	a,l
1709  05B1  32 00 00    	ld	(_sprite_curr_index),a
1710  05B4  4F          	ld	c,a
1711  05B5  06 00       	ld	b,0x00
1712  05B7  21 00 00    	ld	hl,_scr_map
1713  05BA  09          	add	hl,bc
1714  05BB  7E          	ld	a,(hl)
1715  05BC  4F          	ld	c,a
1716  05BD  D6 44       	sub	a,0x44
1717  05BF  38 05       	jr	C,l_player_check_stairs_00111
1718  05C1  3E 47       	ld	a,0x47
1719  05C3  91          	sub	a, c
1720  05C4  30 04       	jr	NC,l_player_check_stairs_00112
1721  05C6              l_player_check_stairs_00111:
1722  05C6  0E 00       	ld	c,0x00
1723  05C8  18 02       	jr	l_player_check_stairs_00113
1724  05CA              l_player_check_stairs_00112:
1725  05CA  0E 01       	ld	c,0x01
1726  05CC              l_player_check_stairs_00113:
1727  05CC  3A 07 00    	ld	a,(_col + 0x0007)
1728  05CF  83          	add	a, e
1729  05D0  57          	ld	d, a
1730  05D1  3A 07 00    	ld	a,(_lin + 0x0007)
1731  05D4  C6 0F       	add	a,0x0f
1732  05D6  47          	ld	b, a
1733  05D7  C5          	push	bc
1734  05D8  58          	ld	e,b
1735  05D9  D5          	push	de
1736  05DA  CD 00 00    	call	_spr_calc_index
1737  05DD  F1          	pop	af
1738  05DE  C1          	pop	bc
1739  05DF  7D          	ld	a,l
1740  05E0  32 00 00    	ld	(_sprite_curr_index),a
1741  05E3  5F          	ld	e,a
1742  05E4  16 00       	ld	d,0x00
1743  05E6  21 00 00    	ld	hl,_scr_map
1744  05E9  19          	add	hl,de
1745  05EA  7E          	ld	a,(hl)
1746  05EB  47          	ld	b,a
1747  05EC  D6 44       	sub	a,0x44
1748  05EE  38 05       	jr	C,l_player_check_stairs_00114
1749  05F0  3E 47       	ld	a,0x47
1750  05F2  90          	sub	a, b
1751  05F3  30 04       	jr	NC,l_player_check_stairs_00115
1752  05F5              l_player_check_stairs_00114:
1753  05F5  06 00       	ld	b,0x00
1754  05F7  18 02       	jr	l_player_check_stairs_00116
1755  05F9              l_player_check_stairs_00115:
1756  05F9  06 01       	ld	b,0x01
1757  05FB              l_player_check_stairs_00116:
1758  05FB  79          	ld	a, c
1759  05FC  B7          	or	a,a
1760  05FD  20 03       	jr	NZ,l_player_check_stairs_00105
1761  05FF  B0          	or	a,b
1762  0600  28 13       	jr	Z,l_player_check_stairs_00106
1763  0602              l_player_check_stairs_00105:
1764  0602  21 00 00    	ld	hl,_player_onstair
1765  0605  7E          	ld	a, (hl)
1766  0606  B7          	or	a, a
1767  0607  20 1D       	jr	NZ,l_player_check_stairs_00109
1768  0609  36 01       	ld	(hl),0x01
1769  060B  21 72 00    	ld	hl,0x0072
1770  060E  E5          	push	hl
1771  060F  CD 2A 06    	call	_player_tile
1772  0612  F1          	pop	af
1773  0613  18 11       	jr	l_player_check_stairs_00109
1774  0615              l_player_check_stairs_00106:
1775  0615  21 00 00    	ld	hl,_player_onstair
1776  0618  7E          	ld	a, (hl)
1777  0619  B7          	or	a, a
1778  061A  28 0A       	jr	Z,l_player_check_stairs_00109
1779  061C  36 00       	ld	(hl),0x00
1780  061E  21 60 08    	ld	hl,0x0860
1781  0621  E5          	push	hl
1782  0622  CD 2A 06    	call	_player_tile
1783  0625  F1          	pop	af
1784  0626              l_player_check_stairs_00109:
1785  0626  33          	inc	sp
1786  0627  DD E1       	pop	ix
1787  0629  C9          	ret
1788  062A              	SECTION code_compiler
1789  062A              ;	---------------------------------
1790  062A              ; Function player_tile
1791  062A              ; ---------------------------------
1792  062A              _player_tile:
1793  062A  CD 00 00    	call	___sdcc_enter_ix
1794  062D  DD 7E 05    	ld	a,(ix+5)
1795  0630  F5          	push	af
1796  0631  33          	inc	sp
1797  0632  2A FF FF    	ld	hl,(_sprite-1)
1798  0635  DD 6E 04    	ld	l,(ix+4)
1799  0638  E5          	push	hl
1800  0639  CD 00 00    	call	_spr_tile_dir
1801  063C  F1          	pop	af
1802  063D  33          	inc	sp
1803  063E  7D          	ld	a,l
1804  063F  32 07 00    	ld	((_tile + 0x0007)),a
1805  0642  DD E1       	pop	ix
1806  0644  C9          	ret
1807  0645              	SECTION code_compiler
1808  0645              ;	---------------------------------
1809  0645              ; Function player_check_map
1810  0645              ; ---------------------------------
1811  0645              _player_check_map:
1812  0645  21 07 00    	ld	hl,+(_col + 0x0007)
1813  0648  46          	ld	b, (hl)
1814  0649  21 07 00    	ld	hl,+(_lin + 0x0007)
1815  064C  4E          	ld	c, (hl)
1816  064D  C5          	push	bc
1817  064E  CD 00 00    	call	_spr_calc_index
1818  0651  F1          	pop	af
1819  0652  7D          	ld	a,l
1820  0653  32 00 00    	ld	(_sprite_curr_index),a
1821  0656  21 07 00    	ld	hl,+(_col + 0x0007)
1822  0659  4E          	ld	c, (hl)
1823  065A  3A 07 00    	ld	a,(_lin + 0x0007)
1824  065D  E6 0F       	and	a,0x0f
1825  065F  CB 41       	bit	0, c
1826  0661  20 17       	jr	NZ,l_player_check_map_00108
1827  0663  B7          	or	a, a
1828  0664  20 05       	jr	NZ,l_player_check_map_00102
1829  0666  CD A5 06    	call	_player_pick_item
1830  0669  18 39       	jr	l_player_check_map_00110
1831  066B              l_player_check_map_00102:
1832  066B  CD A5 06    	call	_player_pick_item
1833  066E  21 00 00    	ld	hl,_sprite_curr_index
1834  0671  7E          	ld	a, (hl)
1835  0672  C6 10       	add	a,0x10
1836  0674  77          	ld	(hl), a
1837  0675  CD A5 06    	call	_player_pick_item
1838  0678  18 2A       	jr	l_player_check_map_00110
1839  067A              l_player_check_map_00108:
1840  067A  B7          	or	a, a
1841  067B  20 0C       	jr	NZ,l_player_check_map_00105
1842  067D  CD A5 06    	call	_player_pick_item
1843  0680  21 00 00    	ld	hl,_sprite_curr_index
1844  0683  34          	inc	(hl)
1845  0684  CD A5 06    	call	_player_pick_item
1846  0687  18 1B       	jr	l_player_check_map_00110
1847  0689              l_player_check_map_00105:
1848  0689  CD A5 06    	call	_player_pick_item
1849  068C  21 00 00    	ld	hl,_sprite_curr_index
1850  068F  34          	inc	(hl)
1851  0690  CD A5 06    	call	_player_pick_item
1852  0693  21 00 00    	ld	hl,_sprite_curr_index
1853  0696  7E          	ld	a, (hl)
1854  0697  C6 0F       	add	a,0x0f
1855  0699  77          	ld	(hl), a
1856  069A  CD A5 06    	call	_player_pick_item
1857  069D  21 00 00    	ld	hl,_sprite_curr_index
1858  06A0  34          	inc	(hl)
1859  06A1  CD A5 06    	call	_player_pick_item
1860  06A4              l_player_check_map_00110:
1861  06A4  C9          	ret
1862  06A5              	SECTION code_compiler
1863  06A5              ;	---------------------------------
1864  06A5              ; Function player_pick_item
1865  06A5              ; ---------------------------------
1866  06A5              _player_pick_item:
1867  06A5  CD 00 00    	call	___sdcc_enter_ix
1868  06A8  3B          	dec	sp
1869  06A9  2A 00 00    	ld	hl,(_sprite_curr_index)
1870  06AC  26 00       	ld	h,0x00
1871  06AE  01 00 00    	ld	bc,_scr_map
1872  06B1  09          	add	hl,bc
1873  06B2  7E          	ld	a,(hl)
1874  06B3  DD 77 FF    	ld	(ix-1),a
1875  06B6  D6 24       	sub	a,0x24
1876  06B8  DA 31 08    	jp	C, l_player_pick_item_00131
1877  06BB  3E 2F       	ld	a,0x2f
1878  06BD  DD 96 FF    	sub	a,(ix-1)
1879  06C0  DA 31 08    	jp	C, l_player_pick_item_00131
1880  06C3  CD 00 00    	call	_ay_reset
1881  06C6  21 00 00    	ld	hl,_ay_effect_10
1882  06C9  CD 00 00    	call	_ay_fx_play
1883  06CC  CD 00 00    	call	_sound_coin
1884  06CF  2A 00 00    	ld	hl,(_sprite_curr_index)
1885  06D2  26 00       	ld	h,0x00
1886  06D4  01 00 00    	ld	bc,_scr_map
1887  06D7  09          	add	hl,bc
1888  06D8  3A 00 00    	ld	a,(_sprite_curr_index)
1889  06DB  5F          	ld	e,a
1890  06DC  16 00       	ld	d,0x00
1891  06DE  E5          	push	hl
1892  06DF  D5          	push	de
1893  06E0  CD 00 00    	call	_game_match_back
1894  06E3  F1          	pop	af
1895  06E4  C1          	pop	bc
1896  06E5  7D          	ld	a,l
1897  06E6  02          	ld	(bc), a
1898  06E7  2A 00 00    	ld	hl,(_sprite_curr_index)
1899  06EA  26 00       	ld	h,0x00
1900  06EC  CD 00 00    	call	_game_obj_set
1901  06EF  3A 00 00    	ld	a,(_sprite_curr_index)
1902  06F2  07          	rlca
1903  06F3  07          	rlca
1904  06F4  07          	rlca
1905  06F5  07          	rlca
1906  06F6  E6 0F       	and	a,0x0f
1907  06F8  07          	rlca
1908  06F9  07          	rlca
1909  06FA  07          	rlca
1910  06FB  07          	rlca
1911  06FC  E6 F0       	and	a,0xf0
1912  06FE  32 00 00    	ld	(_s_lin1),a
1913  0701  3A 00 00    	ld	a,(_sprite_curr_index)
1914  0704  E6 0F       	and	a,0x0f
1915  0706  87          	add	a, a
1916  0707  32 00 00    	ld	(_s_col1),a
1917  070A  21 00 00    	ld	hl,0x0000
1918  070D  E5          	push	hl
1919  070E  21 84 03    	ld	hl,0x0384
1920  0711  E5          	push	hl
1921  0712  F5          	push	af
1922  0713  33          	inc	sp
1923  0714  3A 00 00    	ld	a,(_s_lin1)
1924  0717  F5          	push	af
1925  0718  33          	inc	sp
1926  0719  CD 00 00    	call	_spr_add_anim
1927  071C  F1          	pop	af
1928  071D  F1          	pop	af
1929  071E  F1          	pop	af
1930  071F  DD 7E FF    	ld	a,(ix-1)
1931  0722  D6 24       	sub	a,0x24
1932  0724  DA 31 08    	jp	C, l_player_pick_item_00131
1933  0727  3E 2F       	ld	a,0x2f
1934  0729  DD 96 FF    	sub	a,(ix-1)
1935  072C  DA 31 08    	jp	C, l_player_pick_item_00131
1936  072F  DD 7E FF    	ld	a,(ix-1)
1937  0732  C6 DC       	add	a,0xdc
1938  0734  4F          	ld	c, a
1939  0735  06 00       	ld	b,0x00
1940  0737  21 3E 07    	ld	hl,l_player_pick_item_00177
1941  073A  09          	add	hl, bc
1942  073B  09          	add	hl, bc
1943  073C  09          	add	hl, bc
1944  073D  E9          	jp	(hl)
1945  073E              l_player_pick_item_00177:
1946  073E  C3 62 07    	jp	l_player_pick_item_00101
1947  0741  C3 6D 07    	jp	l_player_pick_item_00102
1948  0744  C3 78 07    	jp	l_player_pick_item_00103
1949  0747  C3 83 07    	jp	l_player_pick_item_00104
1950  074A  C3 8E 07    	jp	l_player_pick_item_00105
1951  074D  C3 B5 07    	jp	l_player_pick_item_00109
1952  0750  C3 CA 07    	jp	l_player_pick_item_00112
1953  0753  C3 DF 07    	jp	l_player_pick_item_00115
1954  0756  C3 F4 07    	jp	l_player_pick_item_00118
1955  0759  C3 09 08    	jp	l_player_pick_item_00121
1956  075C  C3 1E 08    	jp	l_player_pick_item_00124
1957  075F  C3 AC 07    	jp	l_player_pick_item_00108
1958  0762              l_player_pick_item_00101:
1959  0762  21 00 00    	ld	hl,_player_keys
1960  0765  36 01       	ld	(hl),0x01
1961  0767  CD 00 00    	call	_game_update_stats
1962  076A  C3 31 08    	jp	l_player_pick_item_00131
1963  076D              l_player_pick_item_00102:
1964  076D  21 01 00    	ld	hl, +(_player_keys + 0x0001)
1965  0770  36 01       	ld	(hl),0x01
1966  0772  CD 00 00    	call	_game_update_stats
1967  0775  C3 31 08    	jp	l_player_pick_item_00131
1968  0778              l_player_pick_item_00103:
1969  0778  21 02 00    	ld	hl, +(_player_keys + 0x0002)
1970  077B  36 01       	ld	(hl),0x01
1971  077D  CD 00 00    	call	_game_update_stats
1972  0780  C3 31 08    	jp	l_player_pick_item_00131
1973  0783              l_player_pick_item_00104:
1974  0783  21 03 00    	ld	hl, +(_player_keys + 0x0003)
1975  0786  36 01       	ld	(hl),0x01
1976  0788  CD 00 00    	call	_game_update_stats
1977  078B  C3 31 08    	jp	l_player_pick_item_00131
1978  078E              l_player_pick_item_00105:
1979  078E  21 01 00    	ld	hl,0x0001
1980  0791  CD 01 0B    	call	_player_score_add
1981  0794  21 00 00    	ld	hl,_player_coins
1982  0797  7E          	ld	a,(hl)
1983  0798  3C          	inc	a
1984  0799  77          	ld	(hl),a
1985  079A  D6 64       	sub	a,0x64
1986  079C  20 08       	jr	NZ,l_player_pick_item_00107
1987  079E  CD C3 04    	call	_player_1up
1988  07A1  21 00 00    	ld	hl,_player_coins
1989  07A4  36 00       	ld	(hl),0x00
1990  07A6              l_player_pick_item_00107:
1991  07A6  CD 00 00    	call	_game_update_stats
1992  07A9  C3 31 08    	jp	l_player_pick_item_00131
1993  07AC              l_player_pick_item_00108:
1994  07AC  21 0A 00    	ld	hl,0x000a
1995  07AF  CD 01 0B    	call	_player_score_add
1996  07B2  C3 31 08    	jp	l_player_pick_item_00131
1997  07B5              l_player_pick_item_00109:
1998  07B5  21 00 00    	ld	hl,_player_str
1999  07B8  34          	inc	(hl)
2000  07B9  21 00 00    	ld	hl,_player_max_vita
2001  07BC  7E          	ld	a, (hl)
2002  07BD  D6 C8       	sub	a,0xc8
2003  07BF  30 70       	jr	NC,l_player_pick_item_00131
2004  07C1  7E          	ld	a, (hl)
2005  07C2  C6 0A       	add	a,0x0a
2006  07C4  77          	ld	(hl), a
2007  07C5  CD 00 00    	call	_game_update_stats
2008  07C8  18 67       	jr	l_player_pick_item_00131
2009  07CA              l_player_pick_item_00112:
2010  07CA  21 00 00    	ld	hl,_player_str
2011  07CD  34          	inc	(hl)
2012  07CE  21 00 00    	ld	hl,_player_max_vita
2013  07D1  7E          	ld	a, (hl)
2014  07D2  D6 C8       	sub	a,0xc8
2015  07D4  30 5B       	jr	NC,l_player_pick_item_00131
2016  07D6  7E          	ld	a, (hl)
2017  07D7  C6 0A       	add	a,0x0a
2018  07D9  77          	ld	(hl), a
2019  07DA  CD 00 00    	call	_game_update_stats
2020  07DD  18 52       	jr	l_player_pick_item_00131
2021  07DF              l_player_pick_item_00115:
2022  07DF  21 00 00    	ld	hl,_player_str
2023  07E2  34          	inc	(hl)
2024  07E3  21 00 00    	ld	hl,_player_max_vita
2025  07E6  7E          	ld	a, (hl)
2026  07E7  D6 C8       	sub	a,0xc8
2027  07E9  30 46       	jr	NC,l_player_pick_item_00131
2028  07EB  7E          	ld	a, (hl)
2029  07EC  C6 0A       	add	a,0x0a
2030  07EE  77          	ld	(hl), a
2031  07EF  CD 00 00    	call	_game_update_stats
2032  07F2  18 3D       	jr	l_player_pick_item_00131
2033  07F4              l_player_pick_item_00118:
2034  07F4  21 00 00    	ld	hl,_player_int
2035  07F7  34          	inc	(hl)
2036  07F8  21 00 00    	ld	hl,_player_max_mana
2037  07FB  7E          	ld	a, (hl)
2038  07FC  D6 C8       	sub	a,0xc8
2039  07FE  30 31       	jr	NC,l_player_pick_item_00131
2040  0800  7E          	ld	a, (hl)
2041  0801  C6 0A       	add	a,0x0a
2042  0803  77          	ld	(hl), a
2043  0804  CD 00 00    	call	_game_update_stats
2044  0807  18 28       	jr	l_player_pick_item_00131
2045  0809              l_player_pick_item_00121:
2046  0809  21 00 00    	ld	hl,_player_int
2047  080C  34          	inc	(hl)
2048  080D  21 00 00    	ld	hl,_player_max_mana
2049  0810  7E          	ld	a, (hl)
2050  0811  D6 C8       	sub	a,0xc8
2051  0813  30 1C       	jr	NC,l_player_pick_item_00131
2052  0815  7E          	ld	a, (hl)
2053  0816  C6 0A       	add	a,0x0a
2054  0818  77          	ld	(hl), a
2055  0819  CD 00 00    	call	_game_update_stats
2056  081C  18 13       	jr	l_player_pick_item_00131
2057  081E              l_player_pick_item_00124:
2058  081E  21 00 00    	ld	hl,_player_int
2059  0821  34          	inc	(hl)
2060  0822  21 00 00    	ld	hl,_player_max_mana
2061  0825  7E          	ld	a, (hl)
2062  0826  D6 C8       	sub	a,0xc8
2063  0828  30 07       	jr	NC,l_player_pick_item_00131
2064  082A  7E          	ld	a, (hl)
2065  082B  C6 0A       	add	a,0x0a
2066  082D  77          	ld	(hl), a
2067  082E  CD 00 00    	call	_game_update_stats
2068  0831              l_player_pick_item_00131:
2069  0831  33          	inc	sp
2070  0832  DD E1       	pop	ix
2071  0834  C9          	ret
2072  0835              	SECTION code_compiler
2073  0835              ;	---------------------------------
2074  0835              ; Function player_hit_platform
2075  0835              ; ---------------------------------
2076  0835              _player_hit_platform:
2077  0835  CD 00 00    	call	___sdcc_enter_ix
2078  0838  F5          	push	af
2079  0839  3A 00 00    	ld	a,(_player_hit_lin)
2080  083C  B7          	or	a, a
2081  083D  C2 CC 0A    	jp	NZ, l_player_hit_platform_00145
2082  0840  21 07 00    	ld	hl,+(_lin + 0x0007)
2083  0843  4E          	ld	c, (hl)
2084  0844  3E 10       	ld	a,0x10
2085  0846  91          	sub	a, c
2086  0847  D2 CC 0A    	jp	NC, l_player_hit_platform_00145
2087  084A  01 00 00    	ld	bc,_scr_map
2088  084D  2A 00 00    	ld	hl,(_index1)
2089  0850  09          	add	hl,bc
2090  0851  7E          	ld	a,(hl)
2091  0852  D6 45       	sub	a,0x45
2092  0854  DA CC 0A    	jp	C, l_player_hit_platform_00145
2093  0857  2A 00 00    	ld	hl,(_curr_time)
2094  085A  22 0E 00    	ld	(_spr_timer + 0x000e),hl
2095  085D  2A 07 00    	ld	hl,(_lin + 0x0007)
2096  0860  26 00       	ld	h,0x00
2097  0862  01 F8 FF    	ld	bc,0xfff8
2098  0865  09          	add	hl,bc
2099  0866  EB          	ex	de,hl
2100  0867  06 04       	ld	b,0x04
2101  0869              l_player_hit_platform_00250:
2102  0869  CB 2A       	sra	d
2103  086B  CB 1B       	rr	e
2104  086D  10 FA       	djnz	l_player_hit_platform_00250
2105  086F  7B          	ld	a, e
2106  0870  07          	rlca
2107  0871  07          	rlca
2108  0872  07          	rlca
2109  0873  07          	rlca
2110  0874  E6 F0       	and	a,0xf0
2111  0876  C6 08       	add	a,0x08
2112  0878  32 00 00    	ld	(_player_hit_lin),a
2113  087B  21 07 00    	ld	hl,+(_col + 0x0007)
2114  087E  4E          	ld	c, (hl)
2115  087F  CB 41       	bit	0, c
2116  0881  20 06       	jr	NZ,l_player_hit_platform_00111
2117  0883  21 00 00    	ld	hl,_player_hit_col
2118  0886  71          	ld	(hl), c
2119  0887  18 2D       	jr	l_player_hit_platform_00112
2120  0889              l_player_hit_platform_00111:
2121  0889  21 07 00    	ld	hl,+(_state + 0x0007)
2122  088C  5E          	ld	e, (hl)
2123  088D  41          	ld	b, c
2124  088E  04          	inc	b
2125  088F  0D          	dec	c
2126  0890  CB 5B       	bit	3, e
2127  0892  28 12       	jr	Z,l_player_hit_platform_00108
2128  0894  3A 00 00    	ld	a,(_g_player_hit_right)
2129  0897  B7          	or	a, a
2130  0898  28 06       	jr	Z,l_player_hit_platform_00102
2131  089A  21 00 00    	ld	hl,_player_hit_col
2132  089D  70          	ld	(hl), b
2133  089E  18 16       	jr	l_player_hit_platform_00112
2134  08A0              l_player_hit_platform_00102:
2135  08A0  21 00 00    	ld	hl,_player_hit_col
2136  08A3  71          	ld	(hl), c
2137  08A4  18 10       	jr	l_player_hit_platform_00112
2138  08A6              l_player_hit_platform_00108:
2139  08A6  3A 00 00    	ld	a,(_g_player_hit_left)
2140  08A9  B7          	or	a, a
2141  08AA  28 06       	jr	Z,l_player_hit_platform_00105
2142  08AC  21 00 00    	ld	hl,_player_hit_col
2143  08AF  71          	ld	(hl), c
2144  08B0  18 04       	jr	l_player_hit_platform_00112
2145  08B2              l_player_hit_platform_00105:
2146  08B2  21 00 00    	ld	hl,_player_hit_col
2147  08B5  70          	ld	(hl), b
2148  08B6              l_player_hit_platform_00112:
2149  08B6  2A 00 00    	ld	hl,(_index1)
2150  08B9  01 00 00    	ld	bc,_scr_map
2151  08BC  09          	add	hl,bc
2152  08BD  7E          	ld	a,(hl)
2153  08BE  FE 4D       	cp	a,0x4d
2154  08C0  20 43       	jr	NZ,l_player_hit_platform_00114
2155  08C2  E5          	push	hl
2156  08C3  2A 00 00    	ld	hl,(_index1)
2157  08C6  E5          	push	hl
2158  08C7  CD 00 00    	call	_game_match_back
2159  08CA  F1          	pop	af
2160  08CB  C1          	pop	bc
2161  08CC  7D          	ld	a,l
2162  08CD  02          	ld	(bc), a
2163  08CE  2A 00 00    	ld	hl,(_index1)
2164  08D1  CD 00 00    	call	_game_obj_set
2165  08D4  21 00 00    	ld	hl,_index1
2166  08D7  7E          	ld	a, (hl)
2167  08D8  E6 0F       	and	a,0x0f
2168  08DA  87          	add	a, a
2169  08DB  4F          	ld	c, a
2170  08DC  23          	inc	hl
2171  08DD  56          	ld	d,(hl)
2172  08DE  2B          	dec	hl
2173  08DF  7E          	ld	a, (hl)
2174  08E0  06 04       	ld	b,0x04
2175  08E2              l_player_hit_platform_00256:
2176  08E2  CB 3A       	srl	d
2177  08E4  1F          	rra
2178  08E5  10 FB       	djnz	l_player_hit_platform_00256
2179  08E7  07          	rlca
2180  08E8  07          	rlca
2181  08E9  07          	rlca
2182  08EA  07          	rlca
2183  08EB  E6 F0       	and	a,0xf0
2184  08ED  47          	ld	b, a
2185  08EE  21 00 00    	ld	hl,0x0000
2186  08F1  E5          	push	hl
2187  08F2  21 87 03    	ld	hl,0x0387
2188  08F5  E5          	push	hl
2189  08F6  79          	ld	a, c
2190  08F7  48          	ld	c,b
2191  08F8  47          	ld	b,a
2192  08F9  C5          	push	bc
2193  08FA  CD 00 00    	call	_spr_add_anim
2194  08FD  F1          	pop	af
2195  08FE  F1          	pop	af
2196  08FF  F1          	pop	af
2197  0900  2E 01       	ld	l,0x01
2198  0902  C3 CE 0A    	jp	l_player_hit_platform_00148
2199  0905              l_player_hit_platform_00114:
2200  0905  FE 5C       	cp	a,0x5c
2201  0907  28 05       	jr	Z,l_player_hit_platform_00141
2202  0909  D6 5D       	sub	a,0x5d
2203  090B  C2 C0 0A    	jp	NZ,l_player_hit_platform_00142
2204  090E              l_player_hit_platform_00141:
2205  090E  21 00 00    	ld	hl,_tmp0
2206  0911  36 00       	ld	(hl),0x00
2207  0913  3A 00 00    	ld	a,(_game_boss)
2208  0916  B7          	or	a, a
2209  0917  28 0B       	jr	Z,l_player_hit_platform_00174
2210  0919  3A 00 00    	ld	a,(_game_mush_count)
2211  091C  B7          	or	a, a
2212  091D  28 05       	jr	Z,l_player_hit_platform_00174
2213  091F  2E 00       	ld	l,0x00
2214  0921  C3 CE 0A    	jp	l_player_hit_platform_00148
2215  0924              l_player_hit_platform_00174:
2216  0924              l_player_hit_platform_00138:
2217  0924  21 00 00    	ld	hl,_tmp0
2218  0927  7E          	ld	a, (hl)
2219  0928  D6 07       	sub	a,0x07
2220  092A  D2 C0 0A    	jp	NC, l_player_hit_platform_00142
2221  092D  4E          	ld	c,(hl)
2222  092E  06 00       	ld	b,0x00
2223  0930  21 00 00    	ld	hl,_mush_index
2224  0933  09          	add	hl,bc
2225  0934  4E          	ld	c, (hl)
2226  0935  06 00       	ld	b,0x00
2227  0937  2A 00 00    	ld	hl,(_index1)
2228  093A  AF          	xor	a,a
2229  093B  ED 42       	sbc	hl,bc
2230  093D  C2 B9 0A    	jp	NZ,l_player_hit_platform_00137
2231  0940  3A 07 00    	ld	a,(_lin + 0x0007)
2232  0943  07          	rlca
2233  0944  07          	rlca
2234  0945  07          	rlca
2235  0946  07          	rlca
2236  0947  E6 0F       	and	a,0x0f
2237  0949  07          	rlca
2238  094A  07          	rlca
2239  094B  07          	rlca
2240  094C  07          	rlca
2241  094D  E6 F0       	and	a,0xf0
2242  094F  C6 E0       	add	a,0xe0
2243  0951  32 00 00    	ld	(_s_lin1),a
2244  0954  3A 07 00    	ld	a,(_col + 0x0007)
2245  0957  CB 3F       	srl	a
2246  0959  87          	add	a, a
2247  095A  32 00 00    	ld	(_s_col1),a
2248  095D  21 00 00    	ld	hl,_tmp
2249  0960  36 00       	ld	(hl),0x00
2250  0962              l_player_hit_platform_00120:
2251  0962  21 00 00    	ld	hl,_tmp
2252  0965  7E          	ld	a, (hl)
2253  0966  D6 07       	sub	a,0x07
2254  0968  30 1C       	jr	NC,l_player_hit_platform_00122
2255  096A  4E          	ld	c,(hl)
2256  096B  06 00       	ld	b,0x00
2257  096D  21 00 00    	ld	hl,_mush_index
2258  0970  09          	add	hl,bc
2259  0971  4E          	ld	c, (hl)
2260  0972  06 00       	ld	b,0x00
2261  0974  21 00 00    	ld	hl,_index1
2262  0977  7E          	ld	a, (hl)
2263  0978  91          	sub	a, c
2264  0979  20 05       	jr	NZ,l_player_hit_platform_00262
2265  097B  23          	inc	hl
2266  097C  7E          	ld	a, (hl)
2267  097D  90          	sub	a, b
2268  097E  28 06       	jr	Z,l_player_hit_platform_00122
2269  0980              l_player_hit_platform_00262:
2270  0980  21 00 00    	ld	hl,_tmp
2271  0983  34          	inc	(hl)
2272  0984  18 DC       	jr	l_player_hit_platform_00120
2273  0986              l_player_hit_platform_00122:
2274  0986  2A 00 00    	ld	hl,(_tmp)
2275  0989  26 00       	ld	h,0x00
2276  098B  01 00 00    	ld	bc,_mush_class
2277  098E  09          	add	hl,bc
2278  098F  7E          	ld	a,(hl)
2279  0990  FE 78       	cp	a,0x78
2280  0992  28 18       	jr	Z,l_player_hit_platform_00123
2281  0994  FE 79       	cp	a,0x79
2282  0996  28 2F       	jr	Z,l_player_hit_platform_00124
2283  0998  FE 7A       	cp	a,0x7a
2284  099A  28 5F       	jr	Z,l_player_hit_platform_00126
2285  099C  FE 7B       	cp	a,0x7b
2286  099E  28 41       	jr	Z,l_player_hit_platform_00125
2287  09A0  FE 7C       	cp	a,0x7c
2288  09A2  CA 2F 0A    	jp	Z,l_player_hit_platform_00128
2289  09A5  D6 7D       	sub	a,0x7d
2290  09A7  28 6C       	jr	Z,l_player_hit_platform_00127
2291  09A9  C3 47 0A    	jp	l_player_hit_platform_00129
2292  09AC              l_player_hit_platform_00123:
2293  09AC  2E 02       	ld	l,0x02
2294  09AE  CD 00 00    	call	_zx_border_fastcall
2295  09B1  3A 00 00    	ld	a,(_s_col1)
2296  09B4  21 06 FF    	ld	hl,0xff06
2297  09B7  E5          	push	hl
2298  09B8  F5          	push	af
2299  09B9  33          	inc	sp
2300  09BA  3A 00 00    	ld	a,(_s_lin1)
2301  09BD  F5          	push	af
2302  09BE  33          	inc	sp
2303  09BF  CD 00 00    	call	_enemy_init
2304  09C2  F1          	pop	af
2305  09C3  F1          	pop	af
2306  09C4  C3 47 0A    	jp	l_player_hit_platform_00129
2307  09C7              l_player_hit_platform_00124:
2308  09C7  2E 02       	ld	l,0x02
2309  09C9  CD 00 00    	call	_zx_border_fastcall
2310  09CC  3A 00 00    	ld	a,(_s_col1)
2311  09CF  21 06 01    	ld	hl,0x0106
2312  09D2  E5          	push	hl
2313  09D3  F5          	push	af
2314  09D4  33          	inc	sp
2315  09D5  3A 00 00    	ld	a,(_s_lin1)
2316  09D8  F5          	push	af
2317  09D9  33          	inc	sp
2318  09DA  CD 00 00    	call	_enemy_init
2319  09DD  F1          	pop	af
2320  09DE  F1          	pop	af
2321  09DF  18 66       	jr	l_player_hit_platform_00129
2322  09E1              l_player_hit_platform_00125:
2323  09E1  2E 01       	ld	l,0x01
2324  09E3  CD 00 00    	call	_zx_border_fastcall
2325  09E6  3A 00 00    	ld	a,(_s_col1)
2326  09E9  21 07 01    	ld	hl,0x0107
2327  09EC  E5          	push	hl
2328  09ED  F5          	push	af
2329  09EE  33          	inc	sp
2330  09EF  3A 00 00    	ld	a,(_s_lin1)
2331  09F2  F5          	push	af
2332  09F3  33          	inc	sp
2333  09F4  CD 00 00    	call	_enemy_init
2334  09F7  F1          	pop	af
2335  09F8  F1          	pop	af
2336  09F9  18 4C       	jr	l_player_hit_platform_00129
2337  09FB              l_player_hit_platform_00126:
2338  09FB  2E 01       	ld	l,0x01
2339  09FD  CD 00 00    	call	_zx_border_fastcall
2340  0A00  3A 00 00    	ld	a,(_s_col1)
2341  0A03  21 07 FF    	ld	hl,0xff07
2342  0A06  E5          	push	hl
2343  0A07  F5          	push	af
2344  0A08  33          	inc	sp
2345  0A09  3A 00 00    	ld	a,(_s_lin1)
2346  0A0C  F5          	push	af
2347  0A0D  33          	inc	sp
2348  0A0E  CD 00 00    	call	_enemy_init
2349  0A11  F1          	pop	af
2350  0A12  F1          	pop	af
2351  0A13  18 32       	jr	l_player_hit_platform_00129
2352  0A15              l_player_hit_platform_00127:
2353  0A15  2E 04       	ld	l,0x04
2354  0A17  CD 00 00    	call	_zx_border_fastcall
2355  0A1A  3A 00 00    	ld	a,(_s_col1)
2356  0A1D  21 08 01    	ld	hl,0x0108
2357  0A20  E5          	push	hl
2358  0A21  F5          	push	af
2359  0A22  33          	inc	sp
2360  0A23  3A 00 00    	ld	a,(_s_lin1)
2361  0A26  F5          	push	af
2362  0A27  33          	inc	sp
2363  0A28  CD 00 00    	call	_enemy_init
2364  0A2B  F1          	pop	af
2365  0A2C  F1          	pop	af
2366  0A2D  18 18       	jr	l_player_hit_platform_00129
2367  0A2F              l_player_hit_platform_00128:
2368  0A2F  2E 04       	ld	l,0x04
2369  0A31  CD 00 00    	call	_zx_border_fastcall
2370  0A34  3A 00 00    	ld	a,(_s_col1)
2371  0A37  21 08 FF    	ld	hl,0xff08
2372  0A3A  E5          	push	hl
2373  0A3B  F5          	push	af
2374  0A3C  33          	inc	sp
2375  0A3D  3A 00 00    	ld	a,(_s_lin1)
2376  0A40  F5          	push	af
2377  0A41  33          	inc	sp
2378  0A42  CD 00 00    	call	_enemy_init
2379  0A45  F1          	pop	af
2380  0A46  F1          	pop	af
2381  0A47              l_player_hit_platform_00129:
2382  0A47  21 00 00    	ld	hl,_game_mush_count
2383  0A4A  34          	inc	(hl)
2384  0A4B  3A 00 00    	ld	a,(_game_boss)
2385  0A4E  B7          	or	a, a
2386  0A4F  20 68       	jr	NZ,l_player_hit_platform_00137
2387  0A51  3A 00 00    	ld	a,(_index1)
2388  0A54  C6 F0       	add	a,0xf0
2389  0A56  32 00 00    	ld	(_index0),a
2390  0A59  3A 01 00    	ld	a,(_index1 + 1)
2391  0A5C  CE FF       	adc	a,0xff
2392  0A5E  21 01 00    	ld	hl,_index0 + 1
2393  0A61  77          	ld	(hl), a
2394  0A62  3E 00       	ld	a, +((_scr_map) & 0xFF)
2395  0A64  2B          	dec	hl
2396  0A65  86          	add	a, (hl)
2397  0A66  4F          	ld	c, a
2398  0A67  3E 00       	ld	a, +((_scr_map) / 256)
2399  0A69  23          	inc	hl
2400  0A6A  8E          	adc	a, (hl)
2401  0A6B  47          	ld	b, a
2402  0A6C  C5          	push	bc
2403  0A6D  46          	ld	b,(hl)
2404  0A6E  2B          	dec	hl
2405  0A6F  4E          	ld	c,(hl)
2406  0A70  C5          	push	bc
2407  0A71  CD 00 00    	call	_game_match_back
2408  0A74  F1          	pop	af
2409  0A75  C1          	pop	bc
2410  0A76  7D          	ld	a,l
2411  0A77  02          	ld	(bc), a
2412  0A78  3E 00       	ld	a, +((_scr_map) & 0xFF)
2413  0A7A  21 00 00    	ld	hl,_index1
2414  0A7D  86          	add	a, (hl)
2415  0A7E  DD 77 FE    	ld	(ix-2),a
2416  0A81  3E 00       	ld	a, +((_scr_map) / 256)
2417  0A83  23          	inc	hl
2418  0A84  8E          	adc	a, (hl)
2419  0A85  DD 77 FF    	ld	(ix-1),a
2420  0A88  E1          	pop	hl
2421  0A89  7E          	ld	a,(hl)
2422  0A8A  E5          	push	hl
2423  0A8B  FE 5C       	cp	a,0x5c
2424  0A8D  28 04       	jr	Z,l_player_hit_platform_00130
2425  0A8F  D6 5D       	sub	a,0x5d
2426  0A91  20 06       	jr	NZ,l_player_hit_platform_00131
2427  0A93              l_player_hit_platform_00130:
2428  0A93  E1          	pop	hl
2429  0A94  E5          	push	hl
2430  0A95  36 4F       	ld	(hl),0x4f
2431  0A97  18 04       	jr	l_player_hit_platform_00132
2432  0A99              l_player_hit_platform_00131:
2433  0A99  E1          	pop	hl
2434  0A9A  E5          	push	hl
2435  0A9B  36 54       	ld	(hl),0x54
2436  0A9D              l_player_hit_platform_00132:
2437  0A9D  2A 00 00    	ld	hl,(_index1)
2438  0AA0  01 F0 FF    	ld	bc,0xfff0
2439  0AA3  09          	add	hl,bc
2440  0AA4  CD 00 00    	call	_game_obj_set
2441  0AA7  3A 00 00    	ld	a,(_s_lin1)
2442  0AAA  C6 10       	add	a,0x10
2443  0AAC  4F          	ld	c, a
2444  0AAD  3A 00 00    	ld	a, (_s_col1)
2445  0AB0  47          	ld	b,a
2446  0AB1  C5          	push	bc
2447  0AB2  3E 4F       	ld	a,0x4f
2448  0AB4  F5          	push	af
2449  0AB5  33          	inc	sp
2450  0AB6  CD 00 00    	call	_NIRVANAP_drawT_callee
2451  0AB9              l_player_hit_platform_00137:
2452  0AB9  21 00 00    	ld	hl,_tmp0
2453  0ABC  34          	inc	(hl)
2454  0ABD  C3 24 09    	jp	l_player_hit_platform_00138
2455  0AC0              l_player_hit_platform_00142:
2456  0AC0  2E 01       	ld	l,0x01
2457  0AC2  CD 00 00    	call	_spr_brick_anim
2458  0AC5  CD 00 00    	call	_sound_hit_brick
2459  0AC8  2E 01       	ld	l,0x01
2460  0ACA  18 02       	jr	l_player_hit_platform_00148
2461  0ACC              l_player_hit_platform_00145:
2462  0ACC  2E 00       	ld	l,0x00
2463  0ACE              l_player_hit_platform_00148:
2464  0ACE  F1          	pop	af
2465  0ACF  DD E1       	pop	ix
2466  0AD1  C9          	ret
2467  0AD2              	SECTION code_compiler
2468  0AD2              ;	---------------------------------
2469  0AD2              ; Function player_hit_platform_clear
2470  0AD2              ; ---------------------------------
2471  0AD2              _player_hit_platform_clear:
2472  0AD2  01 04 00    	ld	bc,0x0004
2473  0AD5  C5          	push	bc
2474  0AD6  2A 0E 00    	ld	hl,(_spr_timer + 0x000e)
2475  0AD9  E5          	push	hl
2476  0ADA  CD 00 00    	call	_game_check_time
2477  0ADD  F1          	pop	af
2478  0ADE  F1          	pop	af
2479  0ADF  7D          	ld	a, l
2480  0AE0  B7          	or	a, a
2481  0AE1  C8          	ret	Z
2482  0AE2  2A FF FF    	ld	hl,(_player_hit_col - 1)
2483  0AE5  3A 00 00    	ld	a,(_player_hit_lin)
2484  0AE8  6F          	ld	l,a
2485  0AE9  E5          	push	hl
2486  0AEA  CD 00 00    	call	_spr_calc_index
2487  0AED  F1          	pop	af
2488  0AEE  22 00 00    	ld	(_index1),hl
2489  0AF1  2E 00       	ld	l,0x00
2490  0AF3  CD 00 00    	call	_spr_brick_anim
2491  0AF6  21 00 00    	ld	hl,_player_hit_lin
2492  0AF9  36 00       	ld	(hl),0x00
2493  0AFB  21 00 00    	ld	hl,_player_hit_col
2494  0AFE  36 00       	ld	(hl),0x00
2495  0B00  C9          	ret
2496  0B01              	SECTION code_compiler
2497  0B01              ;	---------------------------------
2498  0B01              ; Function player_score_add
2499  0B01              ; ---------------------------------
2500  0B01              _player_score_add:
2501  0B01  ED 4B 00 00 	ld	bc,(_player_score)
2502  0B05  09          	add	hl,bc
2503  0B06  22 00 00    	ld	(_player_score),hl
2504  0B09  21 00 00    	ld	hl,_player_lvl
2505  0B0C  7E          	ld	a, (hl)
2506  0B0D  D6 14       	sub	a,0x14
2507  0B0F  30 3C       	jr	NC,l_player_score_add_00104
2508  0B11  01 00 00    	ld	bc,_player_lvl_table+0
2509  0B14  6E          	ld	l,(hl)
2510  0B15  26 00       	ld	h,0x00
2511  0B17  29          	add	hl, hl
2512  0B18  09          	add	hl, bc
2513  0B19  4E          	ld	c, (hl)
2514  0B1A  23          	inc	hl
2515  0B1B  46          	ld	b, (hl)
2516  0B1C  21 00 00    	ld	hl,_player_score
2517  0B1F  7E          	ld	a, (hl)
2518  0B20  91          	sub	a, c
2519  0B21  23          	inc	hl
2520  0B22  7E          	ld	a, (hl)
2521  0B23  98          	sbc	a, b
2522  0B24  38 27       	jr	C,l_player_score_add_00104
2523  0B26  21 00 00    	ld	hl,_player_lvl
2524  0B29  34          	inc	(hl)
2525  0B2A  21 06 00    	ld	hl,___str_1
2526  0B2D  E5          	push	hl
2527  0B2E  21 0C 0C    	ld	hl,0x0c0c
2528  0B31  E5          	push	hl
2529  0B32  CD 00 00    	call	_zx_print_str
2530  0B35  AF          	xor	a, a
2531  0B36  F5          	push	af
2532  0B37  33          	inc	sp
2533  0B38  21 19 00    	ld	hl,0x0019
2534  0B3B  E5          	push	hl
2535  0B3C  21 0C 15    	ld	hl,0x150c
2536  0B3F  E5          	push	hl
2537  0B40  3E 0C       	ld	a,0x0c
2538  0B42  F5          	push	af
2539  0B43  33          	inc	sp
2540  0B44  CD 00 00    	call	_game_colour_message
2541  0B47  F1          	pop	af
2542  0B48  F1          	pop	af
2543  0B49  F1          	pop	af
2544  0B4A  CD 00 00    	call	_game_update_stats
2545  0B4D              l_player_score_add_00104:
2546  0B4D  3A 00 00    	ld	a,(_game_score_top)
2547  0B50  21 00 00    	ld	hl,_player_score
2548  0B53  96          	sub	a, (hl)
2549  0B54  3A 01 00    	ld	a,(_game_score_top + 1)
2550  0B57  23          	inc	hl
2551  0B58  9E          	sbc	a, (hl)
2552  0B59  30 06       	jr	NC,l_player_score_add_00106
2553  0B5B  2A 00 00    	ld	hl,(_player_score)
2554  0B5E  22 00 00    	ld	(_game_score_top),hl
2555  0B61              l_player_score_add_00106:
2556  0B61  CD 00 00    	call	_game_print_score
2557  0B64  C9          	ret
2558  0B65              	SECTION rodata_compiler
2559  0006              ___str_1:
2560  0006  4C 45 56 45 4C 20 55 50 21 
                        	DEFM "LEVEL UP!"
2561  000F  00          	DEFB 0x00
2562  0010              	SECTION code_compiler
2563  0B65              ;	---------------------------------
2564  0B65              ; Function player_check_floor
2565  0B65              ; ---------------------------------
2566  0B65              _player_check_floor:
2567  0B65  CD 00 00    	call	___sdcc_enter_ix
2568  0B68  F5          	push	af
2569  0B69  F5          	push	af
2570  0B6A  F5          	push	af
2571  0B6B  11 07 00    	ld	de,_col+7
2572  0B6E  1A          	ld	a, (de)
2573  0B6F  47          	ld	b, a
2574  0B70  3A 07 00    	ld	a,(_lin + 0x0007)
2575  0B73  C6 10       	add	a,0x10
2576  0B75  D5          	push	de
2577  0B76  4F          	ld	c,a
2578  0B77  C5          	push	bc
2579  0B78  CD 00 00    	call	_spr_calc_index
2580  0B7B  F1          	pop	af
2581  0B7C  D1          	pop	de
2582  0B7D  DD 75 FC    	ld	(ix-4),l
2583  0B80  DD 74 FD    	ld	(ix-3),h
2584  0B83  01 00 00    	ld	bc,_scr_map+0
2585  0B86  79          	ld	a, c
2586  0B87  DD 86 FC    	add	a,(ix-4)
2587  0B8A  DD 77 FE    	ld	(ix-2),a
2588  0B8D  78          	ld	a, b
2589  0B8E  DD 8E FD    	adc	a,(ix-3)
2590  0B91  DD 6E FE    	ld	l,(ix-2)
2591  0B94  DD 77 FF    	ld	(ix-1),a
2592  0B97  67          	ld	h,a
2593  0B98  7E          	ld	a, (hl)
2594  0B99  DD 77 FB    	ld	(ix-5),a
2595  0B9C  DD 6E FC    	ld	l,(ix-4)
2596  0B9F  DD 66 FD    	ld	h,(ix-3)
2597  0BA2  23          	inc	hl
2598  0BA3  09          	add	hl,bc
2599  0BA4  3A 00 00    	ld	a,(_s_lin0)
2600  0BA7  D6 90       	sub	a,0x90
2601  0BA9  4D          	ld	c,l
2602  0BAA  44          	ld	b,h
2603  0BAB  20 26       	jr	NZ,l_player_check_floor_00108
2604  0BAD  3A 00 00    	ld	a,(_map_heigth)
2605  0BB0  C5          	push	bc
2606  0BB1  F5          	push	af
2607  0BB2  33          	inc	sp
2608  0BB3  3A 00 00    	ld	a,(_scr_curr)
2609  0BB6  F5          	push	af
2610  0BB7  33          	inc	sp
2611  0BB8  CD 00 00    	call	__divuchar_callee
2612  0BBB  C1          	pop	bc
2613  0BBC  7D          	ld	a,l
2614  0BBD  3C          	inc	a
2615  0BBE  32 00 00    	ld	(_tmp1),a
2616  0BC1  21 00 00    	ld	hl,_map_heigth
2617  0BC4  96          	sub	a, (hl)
2618  0BC5  30 06       	jr	NC,l_player_check_floor_00102
2619  0BC7  DD 36 FB 00 	ld	(ix-5),0x00
2620  0BCB  18 14       	jr	l_player_check_floor_00109
2621  0BCD              l_player_check_floor_00102:
2622  0BCD  DD 36 FB 48 	ld	(ix-5),0x48
2623  0BD1  18 0E       	jr	l_player_check_floor_00109
2624  0BD3              l_player_check_floor_00108:
2625  0BD3  1A          	ld	a, (de)
2626  0BD4  0F          	rrca
2627  0BD5  38 06       	jr	C,l_player_check_floor_00105
2628  0BD7  DD 36 FA 00 	ld	(ix-6),0x00
2629  0BDB  18 04       	jr	l_player_check_floor_00109
2630  0BDD              l_player_check_floor_00105:
2631  0BDD  0A          	ld	a, (bc)
2632  0BDE  DD 77 FA    	ld	(ix-6),a
2633  0BE1              l_player_check_floor_00109:
2634  0BE1  DD 7E FB    	ld	a,(ix-5)
2635  0BE4  D6 3C       	sub	a,0x3c
2636  0BE6  38 07       	jr	C,l_player_check_floor_00132
2637  0BE8  DD 7E FB    	ld	a,(ix-5)
2638  0BEB  D6 60       	sub	a,0x60
2639  0BED  38 32       	jr	C,l_player_check_floor_00128
2640  0BEF              l_player_check_floor_00132:
2641  0BEF  DD 7E FA    	ld	a,(ix-6)
2642  0BF2  D6 3C       	sub	a,0x3c
2643  0BF4  38 07       	jr	C,l_player_check_floor_00127
2644  0BF6  DD 7E FA    	ld	a,(ix-6)
2645  0BF9  D6 60       	sub	a,0x60
2646  0BFB  38 24       	jr	C,l_player_check_floor_00128
2647  0BFD              l_player_check_floor_00127:
2648  0BFD  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
2649  0C00  36 02       	ld	(hl),0x02
2650  0C02  21 00 00    	ld	hl,_s_state
2651  0C05  CB CE       	set	1, (hl)
2652  0C07  2E 00       	ld	l,0x00
2653  0C09  CD 98 05    	call	_player_check_stairs
2654  0C0C  3A 00 00    	ld	a,(_player_onstair)
2655  0C0F  B7          	or	a, a
2656  0C10  C2 BB 0C    	jp	NZ, l_player_check_floor_00133
2657  0C13  3A 00 00    	ld	a,(_s_lin0)
2658  0C16  D6 90       	sub	a,0x90
2659  0C18  C2 BB 0C    	jp	NZ,l_player_check_floor_00133
2660  0C1B  CD 00 00    	call	_spr_page_down
2661  0C1E  C3 BB 0C    	jp	l_player_check_floor_00133
2662  0C21              l_player_check_floor_00128:
2663  0C21  C5          	push	bc
2664  0C22  21 10 00    	ld	hl,0x0010
2665  0C25  E5          	push	hl
2666  0C26  2A 00 00    	ld	hl,(_player_brick_time)
2667  0C29  E5          	push	hl
2668  0C2A  CD 00 00    	call	_game_check_time
2669  0C2D  F1          	pop	af
2670  0C2E  F1          	pop	af
2671  0C2F  C1          	pop	bc
2672  0C30  7D          	ld	a,l
2673  0C31  B7          	or	a, a
2674  0C32  CA BB 0C    	jp	Z, l_player_check_floor_00133
2675  0C35  2A 00 00    	ld	hl,(_curr_time)
2676  0C38  22 00 00    	ld	(_player_brick_time),hl
2677  0C3B  DD 7E FB    	ld	a,(ix-5)
2678  0C3E  D6 40       	sub	a,0x40
2679  0C40  20 1A       	jr	NZ,l_player_check_floor_00114
2680  0C42  C5          	push	bc
2681  0C43  DD 6E FC    	ld	l,(ix-4)
2682  0C46  DD 66 FD    	ld	h,(ix-3)
2683  0C49  E5          	push	hl
2684  0C4A  CD 00 00    	call	_game_match_back
2685  0C4D  F1          	pop	af
2686  0C4E  C1          	pop	bc
2687  0C4F  5D          	ld	e,l
2688  0C50  DD 6E FE    	ld	l,(ix-2)
2689  0C53  DD 66 FF    	ld	h,(ix-1)
2690  0C56  73          	ld	(hl), e
2691  0C57  C5          	push	bc
2692  0C58  CD C0 0C    	call	_player_gasta_brick
2693  0C5B  C1          	pop	bc
2694  0C5C              l_player_check_floor_00114:
2695  0C5C  DD 7E FB    	ld	a,(ix-5)
2696  0C5F  D6 3F       	sub	a,0x3f
2697  0C61  20 0D       	jr	NZ,l_player_check_floor_00116
2698  0C63  DD 6E FE    	ld	l,(ix-2)
2699  0C66  DD 66 FF    	ld	h,(ix-1)
2700  0C69  36 40       	ld	(hl),0x40
2701  0C6B  C5          	push	bc
2702  0C6C  CD C0 0C    	call	_player_gasta_brick
2703  0C6F  C1          	pop	bc
2704  0C70              l_player_check_floor_00116:
2705  0C70  DD 7E FB    	ld	a,(ix-5)
2706  0C73  D6 3E       	sub	a,0x3e
2707  0C75  20 0D       	jr	NZ,l_player_check_floor_00118
2708  0C77  DD 6E FE    	ld	l,(ix-2)
2709  0C7A  DD 66 FF    	ld	h,(ix-1)
2710  0C7D  36 3F       	ld	(hl),0x3f
2711  0C7F  C5          	push	bc
2712  0C80  CD C0 0C    	call	_player_gasta_brick
2713  0C83  C1          	pop	bc
2714  0C84              l_player_check_floor_00118:
2715  0C84  DD 7E FA    	ld	a,(ix-6)
2716  0C87  D6 40       	sub	a,0x40
2717  0C89  20 14       	jr	NZ,l_player_check_floor_00120
2718  0C8B  C5          	push	bc
2719  0C8C  DD 6E FC    	ld	l,(ix-4)
2720  0C8F  DD 66 FD    	ld	h,(ix-3)
2721  0C92  E5          	push	hl
2722  0C93  CD 00 00    	call	_game_match_back
2723  0C96  F1          	pop	af
2724  0C97  C1          	pop	bc
2725  0C98  7D          	ld	a,l
2726  0C99  02          	ld	(bc), a
2727  0C9A  C5          	push	bc
2728  0C9B  CD C0 0C    	call	_player_gasta_brick
2729  0C9E  C1          	pop	bc
2730  0C9F              l_player_check_floor_00120:
2731  0C9F  DD 7E FA    	ld	a,(ix-6)
2732  0CA2  D6 3F       	sub	a,0x3f
2733  0CA4  20 08       	jr	NZ,l_player_check_floor_00122
2734  0CA6  3E 40       	ld	a,0x40
2735  0CA8  02          	ld	(bc), a
2736  0CA9  C5          	push	bc
2737  0CAA  CD C0 0C    	call	_player_gasta_brick
2738  0CAD  C1          	pop	bc
2739  0CAE              l_player_check_floor_00122:
2740  0CAE  DD 7E FA    	ld	a,(ix-6)
2741  0CB1  D6 3E       	sub	a,0x3e
2742  0CB3  20 06       	jr	NZ,l_player_check_floor_00133
2743  0CB5  3E 3F       	ld	a,0x3f
2744  0CB7  02          	ld	(bc), a
2745  0CB8  CD C0 0C    	call	_player_gasta_brick
2746  0CBB              l_player_check_floor_00133:
2747  0CBB  DD F9       	ld	sp, ix
2748  0CBD  DD E1       	pop	ix
2749  0CBF  C9          	ret
2750  0CC0              	SECTION code_compiler
2751  0CC0              ;	---------------------------------
2752  0CC0              ; Function player_gasta_brick
2753  0CC0              ; ---------------------------------
2754  0CC0              _player_gasta_brick:
2755  0CC0  3A 00 00    	ld	a,(_s_lin0)
2756  0CC3  32 00 00    	ld	(_s_lin1),a
2757  0CC6  3A 00 00    	ld	a,(_s_col0)
2758  0CC9  32 00 00    	ld	(_s_col1),a
2759  0CCC  3A 07 00    	ld	a,(_lin + 0x0007)
2760  0CCF  C6 10       	add	a,0x10
2761  0CD1  32 00 00    	ld	(_s_lin0),a
2762  0CD4  3A 07 00    	ld	a,(_col + 0x0007)
2763  0CD7  32 00 00    	ld	(_s_col0),a
2764  0CDA  CD 00 00    	call	_spr_back_repaint
2765  0CDD  3A 00 00    	ld	a,(_s_lin1)
2766  0CE0  32 00 00    	ld	(_s_lin0),a
2767  0CE3  3A 00 00    	ld	a,(_s_col1)
2768  0CE6  32 00 00    	ld	(_s_col0),a
2769  0CE9  C9          	ret
2770  0CEA              	SECTION code_compiler
2771  0CEA              ;	---------------------------------
2772  0CEA              ; Function player_move_jump
2773  0CEA              ; ---------------------------------
2774  0CEA              _player_move_jump:
2775  0CEA  CD 00 00    	call	___sdcc_enter_ix
2776  0CED  3B          	dec	sp
2777  0CEE  21 00 00    	ld	hl,_game_gravity
2778  0CF1  4E          	ld	c, (hl)
2779  0CF2  21 00 00    	ld	hl,_player_vel_y
2780  0CF5  7E          	ld	a, (hl)
2781  0CF6  81          	add	a, c
2782  0CF7  77          	ld	(hl), a
2783  0CF8  21 00 00    	ld	hl,_sprite_on_air
2784  0CFB  36 01       	ld	(hl),0x01
2785  0CFD  3A 00 00    	ld	a,(_player_vel_inc)
2786  0D00  B7          	or	a, a
2787  0D01  28 2B       	jr	Z,l_player_move_jump_00107
2788  0D03  21 00 00    	ld	hl,_dirs
2789  0D06  CB 7E       	bit	7, (hl)
2790  0D08  28 07       	jr	Z,l_player_move_jump_00104
2791  0D0A  21 00 00    	ld	hl,_dirs
2792  0D0D  CB 46       	bit	0, (hl)
2793  0D0F  20 1D       	jr	NZ,l_player_move_jump_00107
2794  0D11              l_player_move_jump_00104:
2795  0D11  3A 00 00    	ld	a,(_player_vel_y1)
2796  0D14  21 00 00    	ld	hl,_player_vel_y
2797  0D17  96          	sub	a, (hl)
2798  0D18  E2 1D 0D    	jp	PO, l_player_move_jump_00247
2799  0D1B  EE 80       	xor	a,0x80
2800  0D1D              l_player_move_jump_00247:
2801  0D1D  F2 2E 0D    	jp	P, l_player_move_jump_00107
2802  0D20  21 00 00    	ld	hl,_player_vel_y
2803  0D23  CB 7E       	bit	7,(hl)
2804  0D25  28 07       	jr	Z,l_player_move_jump_00107
2805  0D27  36 00       	ld	(hl),0x00
2806  0D29  21 00 00    	ld	hl,_player_vel_inc
2807  0D2C  36 00       	ld	(hl),0x00
2808  0D2E              l_player_move_jump_00107:
2809  0D2E  3E 78       	ld	a,0x78
2810  0D30  21 00 00    	ld	hl,_player_vel_y
2811  0D33  96          	sub	a, (hl)
2812  0D34  E2 39 0D    	jp	PO, l_player_move_jump_00248
2813  0D37  EE 80       	xor	a,0x80
2814  0D39              l_player_move_jump_00248:
2815  0D39  F2 41 0D    	jp	P, l_player_move_jump_00109
2816  0D3C  21 00 00    	ld	hl,_player_vel_y
2817  0D3F  36 78       	ld	(hl),0x78
2818  0D41              l_player_move_jump_00109:
2819  0D41  21 00 00    	ld	hl,_player_vel_y
2820  0D44  7E          	ld	a, (hl)
2821  0D45  EE 80       	xor	a,0x80
2822  0D47  D6 08       	sub	a,0x08
2823  0D49  30 02       	jr	NC,l_player_move_jump_00111
2824  0D4B  36 88       	ld	(hl),0x88
2825  0D4D              l_player_move_jump_00111:
2826  0D4D  3A 00 00    	ld	a,(_player_vel_y)
2827  0D50  47          	ld	b,a
2828  0D51  17          	rla
2829  0D52  9F          	sbc	a, a
2830  0D53  5F          	ld	e, a
2831  0D54  CB 40       	bit	0,b
2832  0D56  21 00 00    	ld	hl,_s_lin1
2833  0D59  70          	ld	(hl),b
2834  0D5A  28 04       	jr	Z,l_player_move_jump_00113
2835  0D5C  21 00 00    	ld	hl,_s_lin1
2836  0D5F  35          	dec	(hl)
2837  0D60              l_player_move_jump_00113:
2838  0D60  3A 07 00    	ld	a,(_lin + 0x0007)
2839  0D63  21 00 00    	ld	hl,_s_lin1
2840  0D66  86          	add	a, (hl)
2841  0D67  77          	ld	(hl), a
2842  0D68  3E 90       	ld	a,0x90
2843  0D6A  96          	sub	a, (hl)
2844  0D6B  3E 00       	ld	a,0x00
2845  0D6D  17          	rla
2846  0D6E  4F          	ld	c, a
2847  0D6F  CB 7B       	bit	7, e
2848  0D71  28 64       	jr	Z,l_player_move_jump_00139
2849  0D73  21 00 00    	ld	hl,_s_state
2850  0D76  7E          	ld	a,(hl)
2851  0D77  F6 01       	or	a,0x01
2852  0D79  E6 FD       	and	a,0xfd
2853  0D7B  77          	ld	(hl),a
2854  0D7C  79          	ld	a, c
2855  0D7D  B7          	or	a, a
2856  0D7E  28 11       	jr	Z,l_player_move_jump_00118
2857  0D80  CD 00 00    	call	_spr_page_up
2858  0D83  7D          	ld	a, l
2859  0D84  B7          	or	a, a
2860  0D85  28 05       	jr	Z,l_player_move_jump_00115
2861  0D87  2E 00       	ld	l,0x00
2862  0D89  C3 96 0E    	jp	l_player_move_jump_00150
2863  0D8C              l_player_move_jump_00115:
2864  0D8C  21 00 00    	ld	hl,_s_lin1
2865  0D8F  36 00       	ld	(hl),0x00
2866  0D91              l_player_move_jump_00118:
2867  0D91  21 07 00    	ld	hl,+(_col + 0x0007)
2868  0D94  46          	ld	b, (hl)
2869  0D95  C5          	push	bc
2870  0D96  33          	inc	sp
2871  0D97  3A 00 00    	ld	a,(_s_lin1)
2872  0D9A  F5          	push	af
2873  0D9B  33          	inc	sp
2874  0D9C  CD 00 00    	call	_game_check_map
2875  0D9F  F1          	pop	af
2876  0DA0  7C          	ld	a,h
2877  0DA1  B5          	or	a,l
2878  0DA2  28 2A       	jr	Z,l_player_move_jump_00122
2879  0DA4  CD 35 08    	call	_player_hit_platform
2880  0DA7  DD 75 FF    	ld	(ix-1),l
2881  0DAA  7D          	ld	a, l
2882  0DAB  B7          	or	a, a
2883  0DAC  28 18       	jr	Z,l_player_move_jump_00120
2884  0DAE  3A 07 00    	ld	a,(_lin + 0x0007)
2885  0DB1  DD 77 FF    	ld	(ix-1),a
2886  0DB4  07          	rlca
2887  0DB5  07          	rlca
2888  0DB6  07          	rlca
2889  0DB7  07          	rlca
2890  0DB8  E6 0F       	and	a,0x0f
2891  0DBA  DD 77 FF    	ld	(ix-1),a
2892  0DBD  07          	rlca
2893  0DBE  07          	rlca
2894  0DBF  07          	rlca
2895  0DC0  07          	rlca
2896  0DC1  E6 F0       	and	a,0xf0
2897  0DC3  32 07 00    	ld	((_lin + 0x0007)),a
2898  0DC6              l_player_move_jump_00120:
2899  0DC6  21 00 00    	ld	hl,_player_vel_y
2900  0DC9  36 00       	ld	(hl),0x00
2901  0DCB  C3 58 0E    	jp	l_player_move_jump_00140
2902  0DCE              l_player_move_jump_00122:
2903  0DCE  3A 00 00    	ld	a,(_s_lin1)
2904  0DD1  32 07 00    	ld	((_lin + 0x0007)),a
2905  0DD4  C3 58 0E    	jp	l_player_move_jump_00140
2906  0DD7              l_player_move_jump_00139:
2907  0DD7  21 00 00    	ld	hl,_s_state
2908  0DDA  7E          	ld	a,(hl)
2909  0DDB  F6 02       	or	a,0x02
2910  0DDD  E6 FE       	and	a,0xfe
2911  0DDF  77          	ld	(hl),a
2912  0DE0  79          	ld	a, c
2913  0DE1  B7          	or	a, a
2914  0DE2  28 11       	jr	Z,l_player_move_jump_00128
2915  0DE4  CD 00 00    	call	_spr_page_down
2916  0DE7  7D          	ld	a, l
2917  0DE8  B7          	or	a, a
2918  0DE9  28 05       	jr	Z,l_player_move_jump_00125
2919  0DEB  2E 00       	ld	l,0x00
2920  0DED  C3 96 0E    	jp	l_player_move_jump_00150
2921  0DF0              l_player_move_jump_00125:
2922  0DF0  21 00 00    	ld	hl,_s_lin1
2923  0DF3  36 90       	ld	(hl),0x90
2924  0DF5              l_player_move_jump_00128:
2925  0DF5  21 07 00    	ld	hl,+(_col + 0x0007)
2926  0DF8  4E          	ld	c, (hl)
2927  0DF9  3A 00 00    	ld	a,(_s_lin1)
2928  0DFC  C6 10       	add	a,0x10
2929  0DFE  47          	ld	b, a
2930  0DFF  79          	ld	a, c
2931  0E00  48          	ld	c,b
2932  0E01  47          	ld	b,a
2933  0E02  C5          	push	bc
2934  0E03  CD 00 00    	call	_game_check_map
2935  0E06  F1          	pop	af
2936  0E07  7C          	ld	a,h
2937  0E08  B5          	or	a,l
2938  0E09  28 47       	jr	Z,l_player_move_jump_00136
2939  0E0B  2E 00       	ld	l,0x00
2940  0E0D  CD 98 05    	call	_player_check_stairs
2941  0E10  3A 00 00    	ld	a,(_player_onstair)
2942  0E13  B7          	or	a, a
2943  0E14  20 05       	jr	NZ,l_player_move_jump_00130
2944  0E16  2E 01       	ld	l,0x01
2945  0E18  CD 98 05    	call	_player_check_stairs
2946  0E1B              l_player_move_jump_00130:
2947  0E1B  3A 00 00    	ld	a,(_player_onstair)
2948  0E1E  B7          	or	a, a
2949  0E1F  20 12       	jr	NZ,l_player_move_jump_00132
2950  0E21  3A 00 00    	ld	a,(_s_lin1)
2951  0E24  07          	rlca
2952  0E25  07          	rlca
2953  0E26  07          	rlca
2954  0E27  07          	rlca
2955  0E28  E6 0F       	and	a,0x0f
2956  0E2A  07          	rlca
2957  0E2B  07          	rlca
2958  0E2C  07          	rlca
2959  0E2D  07          	rlca
2960  0E2E  E6 F0       	and	a,0xf0
2961  0E30  32 07 00    	ld	((_lin + 0x0007)),a
2962  0E33              l_player_move_jump_00132:
2963  0E33  21 00 00    	ld	hl,_player_vel_y
2964  0E36  36 00       	ld	(hl),0x00
2965  0E38  21 00 00    	ld	hl,_s_state
2966  0E3B  7E          	ld	a,(hl)
2967  0E3C  E6 FC       	and	a,+(0xfd&0xfe)
2968  0E3E  77          	ld	(hl),a
2969  0E3F  3A 07 00    	ld	a,(_lin + 0x0007)
2970  0E42  D6 90       	sub	a,0x90
2971  0E44  38 03       	jr	C,l_player_move_jump_00134
2972  0E46  CD 00 00    	call	_spr_page_down
2973  0E49              l_player_move_jump_00134:
2974  0E49  21 07 00    	ld	hl, +(_colint + 0x0007)
2975  0E4C  36 00       	ld	(hl),0x00
2976  0E4E  2E 01       	ld	l,0x01
2977  0E50  18 44       	jr	l_player_move_jump_00150
2978  0E52              l_player_move_jump_00136:
2979  0E52  3A 00 00    	ld	a,(_s_lin1)
2980  0E55  32 07 00    	ld	((_lin + 0x0007)),a
2981  0E58              l_player_move_jump_00140:
2982  0E58  21 00 00    	ld	hl,_s_state
2983  0E5B  CB 5E       	bit	3, (hl)
2984  0E5D  20 27       	jr	NZ,l_player_move_jump_00146
2985  0E5F  21 00 00    	ld	hl,_s_state
2986  0E62  CB 56       	bit	2, (hl)
2987  0E64  20 20       	jr	NZ,l_player_move_jump_00146
2988  0E66  21 00 00    	ld	hl,_dirs
2989  0E69  CB 56       	bit	2, (hl)
2990  0E6B  28 09       	jr	Z,l_player_move_jump_00142
2991  0E6D  21 00 00    	ld	hl,_s_state
2992  0E70  7E          	ld	a,(hl)
2993  0E71  F6 08       	or	a,0x08
2994  0E73  E6 FB       	and	a,0xfb
2995  0E75  77          	ld	(hl),a
2996  0E76              l_player_move_jump_00142:
2997  0E76  21 00 00    	ld	hl,_dirs
2998  0E79  CB 5E       	bit	3, (hl)
2999  0E7B  28 09       	jr	Z,l_player_move_jump_00146
3000  0E7D  21 00 00    	ld	hl,_s_state
3001  0E80  7E          	ld	a,(hl)
3002  0E81  F6 04       	or	a,0x04
3003  0E83  E6 F7       	and	a,0xf7
3004  0E85  77          	ld	(hl),a
3005  0E86              l_player_move_jump_00146:
3006  0E86  CD 00 00    	call	_spr_move_horizontal
3007  0E89  7D          	ld	a, l
3008  0E8A  B7          	or	a, a
3009  0E8B  28 07       	jr	Z,l_player_move_jump_00149
3010  0E8D  21 00 00    	ld	hl,_s_state
3011  0E90  7E          	ld	a,(hl)
3012  0E91  E6 F3       	and	a,+(0xf7&0xfb)
3013  0E93  77          	ld	(hl),a
3014  0E94              l_player_move_jump_00149:
3015  0E94  2E 00       	ld	l,0x00
3016  0E96              l_player_move_jump_00150:
3017  0E96  33          	inc	sp
3018  0E97  DD E1       	pop	ix
3019  0E99  C9          	ret
3020  0E9A              	SECTION code_compiler
3021  0E9A              ;	---------------------------------
3022  0E9A              ; Function player_open_door
3023  0E9A              ; ---------------------------------
3024  0E9A              _player_open_door:
3025  0E9A  CD 00 00    	call	___sdcc_enter_ix
3026  0E9D  0E 00       	ld	c,0x00
3027  0E9F  DD 7E 06    	ld	a,(ix+6)
3028  0EA2  D6 48       	sub	a,0x48
3029  0EA4  28 17       	jr	Z,l_player_open_door_00101
3030  0EA6  DD 7E 06    	ld	a,(ix+6)
3031  0EA9  D6 49       	sub	a,0x49
3032  0EAB  28 1F       	jr	Z,l_player_open_door_00104
3033  0EAD  DD 7E 06    	ld	a,(ix+6)
3034  0EB0  D6 4A       	sub	a,0x4a
3035  0EB2  28 27       	jr	Z,l_player_open_door_00107
3036  0EB4  DD 7E 06    	ld	a,(ix+6)
3037  0EB7  D6 4B       	sub	a,0x4b
3038  0EB9  28 2F       	jr	Z,l_player_open_door_00110
3039  0EBB  18 3A       	jr	l_player_open_door_00113
3040  0EBD              l_player_open_door_00101:
3041  0EBD  3A 00 00    	ld	a,(_player_keys)
3042  0EC0  B7          	or	a, a
3043  0EC1  28 34       	jr	Z,l_player_open_door_00113
3044  0EC3  2E 07       	ld	l,0x07
3045  0EC5  CD 00 00    	call	_zx_border_fastcall
3046  0EC8  0E 01       	ld	c,0x01
3047  0ECA  18 2B       	jr	l_player_open_door_00113
3048  0ECC              l_player_open_door_00104:
3049  0ECC  3A 01 00    	ld	a,(_player_keys + 0x0001)
3050  0ECF  B7          	or	a, a
3051  0ED0  28 25       	jr	Z,l_player_open_door_00113
3052  0ED2  2E 02       	ld	l,0x02
3053  0ED4  CD 00 00    	call	_zx_border_fastcall
3054  0ED7  0E 01       	ld	c,0x01
3055  0ED9  18 1C       	jr	l_player_open_door_00113
3056  0EDB              l_player_open_door_00107:
3057  0EDB  3A 02 00    	ld	a,(_player_keys + 0x0002)
3058  0EDE  B7          	or	a, a
3059  0EDF  28 16       	jr	Z,l_player_open_door_00113
3060  0EE1  2E 04       	ld	l,0x04
3061  0EE3  CD 00 00    	call	_zx_border_fastcall
3062  0EE6  0E 01       	ld	c,0x01
3063  0EE8  18 0D       	jr	l_player_open_door_00113
3064  0EEA              l_player_open_door_00110:
3065  0EEA  3A 03 00    	ld	a,(_player_keys + 0x0003)
3066  0EED  B7          	or	a, a
3067  0EEE  28 07       	jr	Z,l_player_open_door_00113
3068  0EF0  2E 05       	ld	l,0x05
3069  0EF2  CD 00 00    	call	_zx_border_fastcall
3070  0EF5  0E 01       	ld	c,0x01
3071  0EF7              l_player_open_door_00113:
3072  0EF7  79          	ld	a, c
3073  0EF8  B7          	or	a, a
3074  0EF9  20 06       	jr	NZ,l_player_open_door_00114
3075  0EFB  3A 00 00    	ld	a,(_game_inmune)
3076  0EFE  B7          	or	a, a
3077  0EFF  28 2F       	jr	Z,l_player_open_door_00117
3078  0F01              l_player_open_door_00114:
3079  0F01  3E 00       	ld	a, +((_scr_map) & 0xFF)
3080  0F03  DD 86 04    	add	a,(ix+4)
3081  0F06  4F          	ld	c, a
3082  0F07  3E 00       	ld	a, +((_scr_map) / 256)
3083  0F09  DD 8E 05    	adc	a,(ix+5)
3084  0F0C  47          	ld	b, a
3085  0F0D  C5          	push	bc
3086  0F0E  DD 6E 04    	ld	l,(ix+4)
3087  0F11  DD 66 05    	ld	h,(ix+5)
3088  0F14  E5          	push	hl
3089  0F15  CD 00 00    	call	_game_match_back
3090  0F18  F1          	pop	af
3091  0F19  C1          	pop	bc
3092  0F1A  7D          	ld	a,l
3093  0F1B  02          	ld	(bc), a
3094  0F1C  DD 6E 04    	ld	l,(ix+4)
3095  0F1F  DD 66 05    	ld	h,(ix+5)
3096  0F22  CD 00 00    	call	_game_obj_set
3097  0F25  DD 6E 04    	ld	l,(ix+4)
3098  0F28  DD 66 05    	ld	h,(ix+5)
3099  0F2B  E5          	push	hl
3100  0F2C  CD 00 00    	call	_spr_draw_index
3101  0F2F  F1          	pop	af
3102  0F30              l_player_open_door_00117:
3103  0F30  DD E1       	pop	ix
3104  0F32  C9          	ret
3105  0F33              	SECTION code_compiler
3106  0F33              ;	---------------------------------
3107  0F33              ; Function player_lost_life
3108  0F33              ; ---------------------------------
3109  0F33              _player_lost_life:
3110  0F33  CD 00 00    	call	___sdcc_enter_ix
3111  0F36  3B          	dec	sp
3112  0F37  3A 07 00    	ld	a,(_lin + 0x0007)
3113  0F3A  32 00 00    	ld	(_s_lin0),a
3114  0F3D  3A 07 00    	ld	a,(_col + 0x0007)
3115  0F40  32 00 00    	ld	(_s_col0),a
3116  0F43  CD 00 00    	call	_spr_init_anim_bullets
3117  0F46  01 00 00    	ld	bc,_anim_lin+0
3118  0F49  16 00       	ld	d,0x00
3119  0F4B              l_player_lost_life_00116:
3120  0F4B  C5          	push	bc
3121  0F4C  D5          	push	de
3122  0F4D  21 00 00    	ld	hl,0x0000
3123  0F50  E5          	push	hl
3124  0F51  AF          	xor	a, a
3125  0F52  5A          	ld	e,d
3126  0F53  57          	ld	d,a
3127  0F54  D5          	push	de
3128  0F55  CD 00 00    	call	_NIRVANAP_spriteT_callee
3129  0F58  D1          	pop	de
3130  0F59  C1          	pop	bc
3131  0F5A  6A          	ld	l,d
3132  0F5B  26 00       	ld	h,0x00
3133  0F5D  09          	add	hl, bc
3134  0F5E  36 FF       	ld	(hl),0xff
3135  0F60  14          	inc	d
3136  0F61  7A          	ld	a, d
3137  0F62  D6 08       	sub	a,0x08
3138  0F64  38 E5       	jr	C,l_player_lost_life_00116
3139  0F66  21 00 00    	ld	hl,_anim_count
3140  0F69  36 00       	ld	(hl),0x00
3141  0F6B  76          	halt
3142  0F6C  3A 00 00    	ld	a,(_s_lin0)
3143  0F6F  C6 F0       	add	a,0xf0
3144  0F71  47          	ld	b, a
3145  0F72  3A 00 00    	ld	a,(_s_col0)
3146  0F75  21 00 00    	ld	hl,0x0000
3147  0F78  E5          	push	hl
3148  0F79  21 87 03    	ld	hl,0x0387
3149  0F7C  E5          	push	hl
3150  0F7D  48          	ld	c,b
3151  0F7E  47          	ld	b,a
3152  0F7F  C5          	push	bc
3153  0F80  CD 00 00    	call	_spr_add_anim
3154  0F83  F1          	pop	af
3155  0F84  F1          	pop	af
3156  0F85  F1          	pop	af
3157  0F86  21 00 00    	ld	hl,_s_col0
3158  0F89  46          	ld	b, (hl)
3159  0F8A  05          	dec	b
3160  0F8B  05          	dec	b
3161  0F8C  21 00 00    	ld	hl,0x0000
3162  0F8F  E5          	push	hl
3163  0F90  21 87 03    	ld	hl,0x0387
3164  0F93  E5          	push	hl
3165  0F94  C5          	push	bc
3166  0F95  33          	inc	sp
3167  0F96  3A 00 00    	ld	a,(_s_lin0)
3168  0F99  F5          	push	af
3169  0F9A  33          	inc	sp
3170  0F9B  CD 00 00    	call	_spr_add_anim
3171  0F9E  F1          	pop	af
3172  0F9F  F1          	pop	af
3173  0FA0  21 00 00    	ld	hl,0x0000
3174  0FA3  E3          	ex	(sp),hl
3175  0FA4  3A 00 00    	ld	a,(_s_col0)
3176  0FA7  21 87 03    	ld	hl,0x0387
3177  0FAA  E5          	push	hl
3178  0FAB  F5          	push	af
3179  0FAC  33          	inc	sp
3180  0FAD  3A 00 00    	ld	a,(_s_lin0)
3181  0FB0  F5          	push	af
3182  0FB1  33          	inc	sp
3183  0FB2  CD 00 00    	call	_spr_add_anim
3184  0FB5  F1          	pop	af
3185  0FB6  F1          	pop	af
3186  0FB7  F1          	pop	af
3187  0FB8  21 00 00    	ld	hl,_s_col0
3188  0FBB  46          	ld	b, (hl)
3189  0FBC  04          	inc	b
3190  0FBD  04          	inc	b
3191  0FBE  21 00 00    	ld	hl,0x0000
3192  0FC1  E5          	push	hl
3193  0FC2  21 87 03    	ld	hl,0x0387
3194  0FC5  E5          	push	hl
3195  0FC6  C5          	push	bc
3196  0FC7  33          	inc	sp
3197  0FC8  3A 00 00    	ld	a,(_s_lin0)
3198  0FCB  F5          	push	af
3199  0FCC  33          	inc	sp
3200  0FCD  CD 00 00    	call	_spr_add_anim
3201  0FD0  F1          	pop	af
3202  0FD1  F1          	pop	af
3203  0FD2  F1          	pop	af
3204  0FD3  3A 00 00    	ld	a,(_s_lin0)
3205  0FD6  C6 10       	add	a,0x10
3206  0FD8  47          	ld	b, a
3207  0FD9  3A 00 00    	ld	a,(_s_col0)
3208  0FDC  21 00 00    	ld	hl,0x0000
3209  0FDF  E5          	push	hl
3210  0FE0  21 87 03    	ld	hl,0x0387
3211  0FE3  E5          	push	hl
3212  0FE4  48          	ld	c,b
3213  0FE5  47          	ld	b,a
3214  0FE6  C5          	push	bc
3215  0FE7  CD 00 00    	call	_spr_add_anim
3216  0FEA  F1          	pop	af
3217  0FEB  F1          	pop	af
3218  0FEC  F1          	pop	af
3219  0FED  2E 00       	ld	l,0x00
3220  0FEF  CD 00 00    	call	_zx_border_fastcall
3221  0FF2  DD 36 FF 01 	ld	(ix-1),0x01
3222  0FF6  2A 00 00    	ld	hl,(_curr_time)
3223  0FF9  22 00 00    	ld	(_anim_time),hl
3224  0FFC              l_player_lost_life_00107:
3225  0FFC  DD 7E FF    	ld	a,(ix-1)
3226  0FFF  B7          	or	a, a
3227  1000  28 28       	jr	Z,l_player_lost_life_00109
3228  1002  21 0C 00    	ld	hl,0x000c
3229  1005  E5          	push	hl
3230  1006  2A 00 00    	ld	hl,(_anim_time)
3231  1009  E5          	push	hl
3232  100A  CD 00 00    	call	_game_check_time
3233  100D  F1          	pop	af
3234  100E  F1          	pop	af
3235  100F  7D          	ld	a, l
3236  1010  B7          	or	a, a
3237  1011  28 E9       	jr	Z,l_player_lost_life_00107
3238  1013  2A 00 00    	ld	hl,(_curr_time)
3239  1016  22 00 00    	ld	(_anim_time),hl
3240  1019  3A 00 00    	ld	a,(_anim_count)
3241  101C  B7          	or	a,a
3242  101D  28 05       	jr	Z,l_player_lost_life_00103
3243  101F  CD 00 00    	call	_spr_play_anim
3244  1022  18 D8       	jr	l_player_lost_life_00107
3245  1024              l_player_lost_life_00103:
3246  1024  DD 36 FF 00 	ld	(ix-1),0x00
3247  1028  18 D2       	jr	l_player_lost_life_00107
3248  102A              l_player_lost_life_00109:
3249  102A  21 00 00    	ld	hl,_sprite
3250  102D  36 00       	ld	(hl),0x00
3251  102F              l_player_lost_life_00118:
3252  102F  3A 07 00    	ld	a,(_class + 0x0007)
3253  1032  B7          	or	a, a
3254  1033  28 1F       	jr	Z,l_player_lost_life_00111
3255  1035  21 07 00    	ld	hl,+(_col + 0x0007)
3256  1038  4E          	ld	c, (hl)
3257  1039  21 07 00    	ld	hl,+(_lin + 0x0007)
3258  103C  56          	ld	d, (hl)
3259  103D  21 07 00    	ld	hl,+(_tile + 0x0007)
3260  1040  5E          	ld	e, (hl)
3261  1041  21 07 00    	ld	hl,+(_colint + 0x0007)
3262  1044  46          	ld	b, (hl)
3263  1045  7B          	ld	a, e
3264  1046  80          	add	a, b
3265  1047  5F          	ld	e, a
3266  1048  79          	ld	a, c
3267  1049  F5          	push	af
3268  104A  33          	inc	sp
3269  104B  3A 00 00    	ld	a,(_sprite)
3270  104E  D5          	push	de
3271  104F  F5          	push	af
3272  1050  33          	inc	sp
3273  1051  CD 00 00    	call	_NIRVANAP_spriteT_callee
3274  1054              l_player_lost_life_00111:
3275  1054  21 07 00    	ld	hl, +(_class + 0x0007)
3276  1057  36 00       	ld	(hl),0x00
3277  1059  21 07 00    	ld	hl, +(_bullet_col + 0x0007)
3278  105C  36 FF       	ld	(hl),0xff
3279  105E  21 00 00    	ld	hl,_sprite
3280  1061  7E          	ld	a,(hl)
3281  1062  3C          	inc	a
3282  1063  77          	ld	(hl),a
3283  1064  D6 07       	sub	a,0x07
3284  1066  38 C7       	jr	C,l_player_lost_life_00118
3285  1068  21 00 00    	ld	hl,_player_lives
3286  106B  35          	dec	(hl)
3287  106C  21 00 00    	ld	hl,_player_mana
3288  106F  36 64       	ld	(hl),0x64
3289  1071  21 00 00    	ld	hl,_player_vita
3290  1074  36 64       	ld	(hl),0x64
3291  1076  3A 00 00    	ld	a,(_player_lives)
3292  1079  B7          	or	a, a
3293  107A  28 0B       	jr	Z,l_player_lost_life_00114
3294  107C  21 F4 01    	ld	hl,0x01f4
3295  107F  CD 00 00    	call	_z80_delay_ms_fastcall
3296  1082  CD 00 00    	call	_game_round_init
3297  1085  18 0A       	jr	l_player_lost_life_00120
3298  1087              l_player_lost_life_00114:
3299  1087  21 00 00    	ld	hl,_player_lives
3300  108A  36 00       	ld	(hl),0x00
3301  108C  21 00 00    	ld	hl,_game_over
3302  108F  36 01       	ld	(hl),0x01
3303  1091              l_player_lost_life_00120:
3304  1091  33          	inc	sp
3305  1092  DD E1       	pop	ix
3306  1094  C9          	ret
3307  1095              	SECTION code_compiler
3308  1095              ;	---------------------------------
3309  1095              ; Function player_hit
3310  1095              ; ---------------------------------
3311  1095              _player_hit:
3312  1095  7D          	ld	a,l
3313  1096  4D          	ld	c,l
3314  1097  21 00 00    	ld	hl,_player_vita
3315  109A  96          	sub	a, (hl)
3316  109B  30 17       	jr	NC,l_player_hit_00104
3317  109D  3A 00 00    	ld	a,(_game_inmune)
3318  10A0  B7          	or	a, a
3319  10A1  20 06       	jr	NZ,l_player_hit_00102
3320  10A3  21 00 00    	ld	hl,_player_vita
3321  10A6  7E          	ld	a, (hl)
3322  10A7  91          	sub	a, c
3323  10A8  77          	ld	(hl), a
3324  10A9              l_player_hit_00102:
3325  10A9  2A 00 00    	ld	hl,(_curr_time)
3326  10AC  22 00 00    	ld	(_player_hit_time),hl
3327  10AF  CD 00 00    	call	_game_update_stats
3328  10B2  18 0B       	jr	l_player_hit_00106
3329  10B4              l_player_hit_00104:
3330  10B4  21 00 00    	ld	hl,_player_vita
3331  10B7  36 00       	ld	(hl),0x00
3332  10B9  CD 00 00    	call	_game_update_stats
3333  10BC  CD 33 0F    	call	_player_lost_life
3334  10BF              l_player_hit_00106:
3335  10BF  C9          	ret
3336  10C0              	SECTION IGNORE
3337  0000              
