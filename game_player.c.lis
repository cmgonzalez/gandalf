1     0000              MODULE game_player_c
2     0000              
3     0000              ;--------------------------------------------------------
4     0000              ; File Created by SDCC : free open source ANSI-C Compiler
5     0000              ; Version 3.6.5 #9958 (Mac OS X i386)
6     0000              ;--------------------------------------------------------
7     0000              ; Processed by Z88DK
8     0000              ;--------------------------------------------------------
9     0000              
10    0000              	EXTERN __divschar
11    0000              	EXTERN __divschar_callee
12    0000              	EXTERN __divsint
13    0000              	EXTERN __divsint_callee
14    0000              	EXTERN __divslong
15    0000              	EXTERN __divslong_callee
16    0000              	EXTERN __divslonglong
17    0000              	EXTERN __divslonglong_callee
18    0000              	EXTERN __divsuchar
19    0000              	EXTERN __divsuchar_callee
20    0000              	EXTERN __divuchar
21    0000              	EXTERN __divuchar_callee
22    0000              	EXTERN __divuint
23    0000              	EXTERN __divuint_callee
24    0000              	EXTERN __divulong
25    0000              	EXTERN __divulong_callee
26    0000              	EXTERN __divulonglong
27    0000              	EXTERN __divulonglong_callee
28    0000              	EXTERN __divuschar
29    0000              	EXTERN __divuschar_callee
30    0000              	EXTERN __modschar
31    0000              	EXTERN __modschar_callee
32    0000              	EXTERN __modsint
33    0000              	EXTERN __modsint_callee
34    0000              	EXTERN __modslong
35    0000              	EXTERN __modslong_callee
36    0000              	EXTERN __modslonglong
37    0000              	EXTERN __modslonglong_callee
38    0000              	EXTERN __modsuchar
39    0000              	EXTERN __modsuchar_callee
40    0000              	EXTERN __moduchar
41    0000              	EXTERN __moduchar_callee
42    0000              	EXTERN __moduint
43    0000              	EXTERN __moduint_callee
44    0000              	EXTERN __modulong
45    0000              	EXTERN __modulong_callee
46    0000              	EXTERN __modulonglong
47    0000              	EXTERN __modulonglong_callee
48    0000              	EXTERN __moduschar
49    0000              	EXTERN __moduschar_callee
50    0000              	EXTERN __mulint
51    0000              	EXTERN __mulint_callee
52    0000              	EXTERN __mullong
53    0000              	EXTERN __mullong_callee
54    0000              	EXTERN __mullonglong
55    0000              	EXTERN __mullonglong_callee
56    0000              	EXTERN __mulschar
57    0000              	EXTERN __mulschar_callee
58    0000              	EXTERN __mulsuchar
59    0000              	EXTERN __mulsuchar_callee
60    0000              	EXTERN __muluschar
61    0000              	EXTERN __muluschar_callee
62    0000              	EXTERN __rlslonglong
63    0000              	EXTERN __rlslonglong_callee
64    0000              	EXTERN __rlulonglong
65    0000              	EXTERN __rlulonglong_callee
66    0000              	EXTERN __rrslonglong
67    0000              	EXTERN __rrslonglong_callee
68    0000              	EXTERN __rrulonglong
69    0000              	EXTERN __rrulonglong_callee
70    0000              	EXTERN ___sdcc_call_hl
71    0000              	EXTERN ___sdcc_call_iy
72    0000              	EXTERN ___sdcc_enter_ix
73    0000              	EXTERN _banked_call
74    0000              	EXTERN _banked_ret
75    0000              	EXTERN ___fs2schar
76    0000              	EXTERN ___fs2schar_callee
77    0000              	EXTERN ___fs2sint
78    0000              	EXTERN ___fs2sint_callee
79    0000              	EXTERN ___fs2slong
80    0000              	EXTERN ___fs2slong_callee
81    0000              	EXTERN ___fs2slonglong
82    0000              	EXTERN ___fs2slonglong_callee
83    0000              	EXTERN ___fs2uchar
84    0000              	EXTERN ___fs2uchar_callee
85    0000              	EXTERN ___fs2uint
86    0000              	EXTERN ___fs2uint_callee
87    0000              	EXTERN ___fs2ulong
88    0000              	EXTERN ___fs2ulong_callee
89    0000              	EXTERN ___fs2ulonglong
90    0000              	EXTERN ___fs2ulonglong_callee
91    0000              	EXTERN ___fsadd
92    0000              	EXTERN ___fsadd_callee
93    0000              	EXTERN ___fsdiv
94    0000              	EXTERN ___fsdiv_callee
95    0000              	EXTERN ___fseq
96    0000              	EXTERN ___fseq_callee
97    0000              	EXTERN ___fsgt
98    0000              	EXTERN ___fsgt_callee
99    0000              	EXTERN ___fslt
100   0000              	EXTERN ___fslt_callee
101   0000              	EXTERN ___fsmul
102   0000              	EXTERN ___fsmul_callee
103   0000              	EXTERN ___fsneq
104   0000              	EXTERN ___fsneq_callee
105   0000              	EXTERN ___fssub
106   0000              	EXTERN ___fssub_callee
107   0000              	EXTERN ___schar2fs
108   0000              	EXTERN ___schar2fs_callee
109   0000              	EXTERN ___sint2fs
110   0000              	EXTERN ___sint2fs_callee
111   0000              	EXTERN ___slong2fs
112   0000              	EXTERN ___slong2fs_callee
113   0000              	EXTERN ___slonglong2fs
114   0000              	EXTERN ___slonglong2fs_callee
115   0000              	EXTERN ___uchar2fs
116   0000              	EXTERN ___uchar2fs_callee
117   0000              	EXTERN ___uint2fs
118   0000              	EXTERN ___uint2fs_callee
119   0000              	EXTERN ___ulong2fs
120   0000              	EXTERN ___ulong2fs_callee
121   0000              	EXTERN ___ulonglong2fs
122   0000              	EXTERN ___ulonglong2fs_callee
123   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
126   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
127   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
128   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
129   0000              	EXTERN ____sdcc_4_ldi_save_bc
130   0000              	EXTERN ____sdcc_4_push_hlix
131   0000              	EXTERN ____sdcc_4_push_mhl
132   0000              	EXTERN ____sdcc_lib_setmem_hl
133   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
134   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
135   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
136   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
137   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
138   0000              	EXTERN ____sdcc_ll_add_deix_hlix
139   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
140   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
141   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
142   0000              	EXTERN ____sdcc_ll_asr_hlix_a
143   0000              	EXTERN ____sdcc_ll_asr_mbc_a
144   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
145   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
146   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
147   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
148   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
149   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
150   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
151   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
152   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
153   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
155   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
156   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
157   0000              	EXTERN ____sdcc_ll_push_hlix
158   0000              	EXTERN ____sdcc_ll_push_mhl
159   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
160   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
161   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
162   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
163   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
164   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
165   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
166   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
167   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
168   0000              	EXTERN ____sdcc_load_debc_deix
169   0000              	EXTERN ____sdcc_load_dehl_deix
170   0000              	EXTERN ____sdcc_load_debc_mhl
171   0000              	EXTERN ____sdcc_load_hlde_mhl
172   0000              	EXTERN ____sdcc_store_dehl_bcix
173   0000              	EXTERN ____sdcc_store_debc_hlix
174   0000              	EXTERN ____sdcc_store_debc_mhl
175   0000              	EXTERN ____sdcc_cpu_pop_ei
176   0000              	EXTERN ____sdcc_cpu_pop_ei_jp
177   0000              	EXTERN ____sdcc_cpu_push_di
178   0000              	EXTERN ____sdcc_outi
179   0000              	EXTERN ____sdcc_outi_128
180   0000              	EXTERN ____sdcc_outi_256
181   0000              	EXTERN ____sdcc_ldi
182   0000              	EXTERN ____sdcc_ldi_128
183   0000              	EXTERN ____sdcc_ldi_256
184   0000              
185   0000              ;--------------------------------------------------------
186   0000              ; Public variables in this module
187   0000              ;--------------------------------------------------------
188   0000              	GLOBAL _player_check_map
189   0000              	GLOBAL _player_init
190   0000              	GLOBAL _player_check_input
191   0000              	GLOBAL _player_collision
192   0000              	GLOBAL _player_kill
193   0000              	GLOBAL _player_restart
194   0000              	GLOBAL _player_turn
195   0000              	GLOBAL _player_move
196   0000              	GLOBAL _player_check_stairs_down
197   0000              	GLOBAL _player_check_stairs
198   0000              	GLOBAL _player_tile
199   0000              	GLOBAL _player_move_input
200   0000              	GLOBAL _player_fire
201   0000              	GLOBAL _player_pick_item
202   0000              	GLOBAL _player_hit_platform
203   0000              	GLOBAL _player_hit_platform_clear
204   0000              	GLOBAL _player_score_add
205   0000              	GLOBAL _player_check_floor
206   0000              	GLOBAL _player_move_jump
207   0000              	GLOBAL _player_open_door
208   0000              	GLOBAL _player_lost_life
209   0000              	GLOBAL _player_hit
210   0000              ;--------------------------------------------------------
211   0000              ; Externals used
212   0000              ;--------------------------------------------------------
213   0000              	GLOBAL _ulltoa_callee
214   0000              	GLOBAL _ulltoa
215   0000              	GLOBAL _strtoull_callee
216   0000              	GLOBAL _strtoull
217   0000              	GLOBAL _strtoll_callee
218   0000              	GLOBAL _strtoll
219   0000              	GLOBAL _lltoa_callee
220   0000              	GLOBAL _lltoa
221   0000              	GLOBAL _llabs_callee
222   0000              	GLOBAL _llabs
223   0000              	GLOBAL __lldivu__callee
224   0000              	GLOBAL __lldivu_
225   0000              	GLOBAL __lldiv__callee
226   0000              	GLOBAL __lldiv_
227   0000              	GLOBAL _atoll_callee
228   0000              	GLOBAL _atoll
229   0000              	GLOBAL _realloc_unlocked_callee
230   0000              	GLOBAL _realloc_unlocked
231   0000              	GLOBAL _malloc_unlocked_fastcall
232   0000              	GLOBAL _malloc_unlocked
233   0000              	GLOBAL _free_unlocked_fastcall
234   0000              	GLOBAL _free_unlocked
235   0000              	GLOBAL _calloc_unlocked_callee
236   0000              	GLOBAL _calloc_unlocked
237   0000              	GLOBAL _aligned_alloc_unlocked_callee
238   0000              	GLOBAL _aligned_alloc_unlocked
239   0000              	GLOBAL _realloc_callee
240   0000              	GLOBAL _realloc
241   0000              	GLOBAL _malloc_fastcall
242   0000              	GLOBAL _malloc
243   0000              	GLOBAL _free_fastcall
244   0000              	GLOBAL _free
245   0000              	GLOBAL _calloc_callee
246   0000              	GLOBAL _calloc
247   0000              	GLOBAL _aligned_alloc_callee
248   0000              	GLOBAL _aligned_alloc
249   0000              	GLOBAL _utoa_callee
250   0000              	GLOBAL _utoa
251   0000              	GLOBAL _ultoa_callee
252   0000              	GLOBAL _ultoa
253   0000              	GLOBAL _system_fastcall
254   0000              	GLOBAL _system
255   0000              	GLOBAL _strtoul_callee
256   0000              	GLOBAL _strtoul
257   0000              	GLOBAL _strtol_callee
258   0000              	GLOBAL _strtol
259   0000              	GLOBAL _strtof_callee
260   0000              	GLOBAL _strtof
261   0000              	GLOBAL _strtod_callee
262   0000              	GLOBAL _strtod
263   0000              	GLOBAL _srand_fastcall
264   0000              	GLOBAL _srand
265   0000              	GLOBAL _rand
266   0000              	GLOBAL _quick_exit_fastcall
267   0000              	GLOBAL _quick_exit
268   0000              	GLOBAL _qsort_callee
269   0000              	GLOBAL _qsort
270   0000              	GLOBAL _ltoa_callee
271   0000              	GLOBAL _ltoa
272   0000              	GLOBAL _labs_fastcall
273   0000              	GLOBAL _labs
274   0000              	GLOBAL _itoa_callee
275   0000              	GLOBAL _itoa
276   0000              	GLOBAL _ftoh_callee
277   0000              	GLOBAL _ftoh
278   0000              	GLOBAL _ftog_callee
279   0000              	GLOBAL _ftog
280   0000              	GLOBAL _ftoe_callee
281   0000              	GLOBAL _ftoe
282   0000              	GLOBAL _ftoa_callee
283   0000              	GLOBAL _ftoa
284   0000              	GLOBAL _exit_fastcall
285   0000              	GLOBAL _exit
286   0000              	GLOBAL _dtoh_callee
287   0000              	GLOBAL _dtoh
288   0000              	GLOBAL _dtog_callee
289   0000              	GLOBAL _dtog
290   0000              	GLOBAL _dtoe_callee
291   0000              	GLOBAL _dtoe
292   0000              	GLOBAL _dtoa_callee
293   0000              	GLOBAL _dtoa
294   0000              	GLOBAL _bsearch_callee
295   0000              	GLOBAL _bsearch
296   0000              	GLOBAL _atol_fastcall
297   0000              	GLOBAL _atol
298   0000              	GLOBAL _atoi_fastcall
299   0000              	GLOBAL _atoi
300   0000              	GLOBAL _atof_fastcall
301   0000              	GLOBAL _atof
302   0000              	GLOBAL _atexit_fastcall
303   0000              	GLOBAL _atexit
304   0000              	GLOBAL _at_quick_exit_fastcall
305   0000              	GLOBAL _at_quick_exit
306   0000              	GLOBAL _abs_fastcall
307   0000              	GLOBAL _abs
308   0000              	GLOBAL _abort
309   0000              	GLOBAL __strtou__callee
310   0000              	GLOBAL __strtou_
311   0000              	GLOBAL __strtoi__callee
312   0000              	GLOBAL __strtoi_
313   0000              	GLOBAL __random_uniform_xor_8__fastcall
314   0000              	GLOBAL __random_uniform_xor_8_
315   0000              	GLOBAL __random_uniform_xor_32__fastcall
316   0000              	GLOBAL __random_uniform_xor_32_
317   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
318   0000              	GLOBAL __random_uniform_cmwc_8_
319   0000              	GLOBAL __shellsort__callee
320   0000              	GLOBAL __shellsort_
321   0000              	GLOBAL __quicksort__callee
322   0000              	GLOBAL __quicksort_
323   0000              	GLOBAL __insertion_sort__callee
324   0000              	GLOBAL __insertion_sort_
325   0000              	GLOBAL __ldivu__callee
326   0000              	GLOBAL __ldivu_
327   0000              	GLOBAL __ldiv__callee
328   0000              	GLOBAL __ldiv_
329   0000              	GLOBAL __divu__callee
330   0000              	GLOBAL __divu_
331   0000              	GLOBAL __div__callee
332   0000              	GLOBAL __div_
333   0000              	GLOBAL _NIRVANAP_drawTW_raw_callee
334   0000              	GLOBAL _NIRVANAP_drawTW_raw
335   0000              	GLOBAL _NIRVANAP_drawTW_callee
336   0000              	GLOBAL _NIRVANAP_drawTW
337   0000              	GLOBAL _NIRVANAP_drawW_raw_callee
338   0000              	GLOBAL _NIRVANAP_drawW_raw
339   0000              	GLOBAL _NIRVANAP_drawW_callee
340   0000              	GLOBAL _NIRVANAP_drawW
341   0000              	GLOBAL _NIRVANAP_spriteT_callee
342   0000              	GLOBAL _NIRVANAP_spriteT
343   0000              	GLOBAL _NIRVANAP_fillC_callee
344   0000              	GLOBAL _NIRVANAP_fillC
345   0000              	GLOBAL _NIRVANAP_readC_callee
346   0000              	GLOBAL _NIRVANAP_readC
347   0000              	GLOBAL _NIRVANAP_paintC_callee
348   0000              	GLOBAL _NIRVANAP_paintC
349   0000              	GLOBAL _NIRVANAP_printC_callee
350   0000              	GLOBAL _NIRVANAP_printC
351   0000              	GLOBAL _NIRVANAP_fillT_raw_callee
352   0000              	GLOBAL _NIRVANAP_fillT_raw
353   0000              	GLOBAL _NIRVANAP_fillT_callee
354   0000              	GLOBAL _NIRVANAP_fillT
355   0000              	GLOBAL _NIRVANAP_drawT_raw_callee
356   0000              	GLOBAL _NIRVANAP_drawT_raw
357   0000              	GLOBAL _NIRVANAP_drawT_callee
358   0000              	GLOBAL _NIRVANAP_drawT
359   0000              	GLOBAL _NIRVANAP_stop
360   0000              	GLOBAL _NIRVANAP_start
361   0000              	GLOBAL _debug3
362   0000              	GLOBAL _debug2
363   0000              	GLOBAL _debug
364   0000              	GLOBAL _zx_print_str
365   0000              	GLOBAL _zx_print_int
366   0000              	GLOBAL _zx_print_chr
367   0000              	GLOBAL _zx_print_bonus_time
368   0000              	GLOBAL _zx_isr
369   0000              	GLOBAL _z80_otdr_callee
370   0000              	GLOBAL _z80_otdr
371   0000              	GLOBAL _z80_otir_callee
372   0000              	GLOBAL _z80_otir
373   0000              	GLOBAL _z80_outp_callee
374   0000              	GLOBAL _z80_outp
375   0000              	GLOBAL _z80_indr_callee
376   0000              	GLOBAL _z80_indr
377   0000              	GLOBAL _z80_inir_callee
378   0000              	GLOBAL _z80_inir
379   0000              	GLOBAL _z80_inp_fastcall
380   0000              	GLOBAL _z80_inp
381   0000              	GLOBAL _z80_set_int_state_fastcall
382   0000              	GLOBAL _z80_set_int_state
383   0000              	GLOBAL _z80_get_int_state
384   0000              	GLOBAL _z80_delay_tstate_fastcall
385   0000              	GLOBAL _z80_delay_tstate
386   0000              	GLOBAL _z80_delay_ms_fastcall
387   0000              	GLOBAL _z80_delay_ms
388   0000              	GLOBAL _im2_remove_generic_callback_callee
389   0000              	GLOBAL _im2_remove_generic_callback
390   0000              	GLOBAL _im2_prepend_generic_callback_callee
391   0000              	GLOBAL _im2_prepend_generic_callback
392   0000              	GLOBAL _im2_append_generic_callback_callee
393   0000              	GLOBAL _im2_append_generic_callback
394   0000              	GLOBAL _im2_create_generic_isr_8080_callee
395   0000              	GLOBAL _im2_create_generic_isr_8080
396   0000              	GLOBAL _im2_create_generic_isr_callee
397   0000              	GLOBAL _im2_create_generic_isr
398   0000              	GLOBAL _im2_install_isr_callee
399   0000              	GLOBAL _im2_install_isr
400   0000              	GLOBAL _im2_init_fastcall
401   0000              	GLOBAL _im2_init
402   0000              	GLOBAL _intrinsic_swap_word_32_fastcall
403   0000              	GLOBAL _intrinsic_swap_word_32
404   0000              	GLOBAL _intrinsic_swap_endian_32_fastcall
405   0000              	GLOBAL _intrinsic_swap_endian_32
406   0000              	GLOBAL _intrinsic_swap_endian_16_fastcall
407   0000              	GLOBAL _intrinsic_swap_endian_16
408   0000              	GLOBAL _intrinsic_return_de
409   0000              	GLOBAL _intrinsic_return_bc
410   0000              	GLOBAL _intrinsic_exx
411   0000              	GLOBAL _intrinsic_ex_de_hl
412   0000              	GLOBAL _intrinsic_nop
413   0000              	GLOBAL _intrinsic_im_2
414   0000              	GLOBAL _intrinsic_im_1
415   0000              	GLOBAL _intrinsic_im_0
416   0000              	GLOBAL _intrinsic_retn
417   0000              	GLOBAL _intrinsic_reti
418   0000              	GLOBAL _intrinsic_halt
419   0000              	GLOBAL _intrinsic_ei
420   0000              	GLOBAL _intrinsic_di
421   0000              	GLOBAL _intrinsic_stub
422   0000              	GLOBAL _intrinsic_outi
423   0000              	GLOBAL _intrinsic_ldi
424   0000              	GLOBAL _zx_pattern_fill_callee
425   0000              	GLOBAL _zx_pattern_fill
426   0000              	GLOBAL _zx_saddrpup_fastcall
427   0000              	GLOBAL _zx_saddrpup
428   0000              	GLOBAL _zx_saddrpright_callee
429   0000              	GLOBAL _zx_saddrpright
430   0000              	GLOBAL _zx_saddrpleft_callee
431   0000              	GLOBAL _zx_saddrpleft
432   0000              	GLOBAL _zx_saddrpdown_fastcall
433   0000              	GLOBAL _zx_saddrpdown
434   0000              	GLOBAL _zx_saddrcup_fastcall
435   0000              	GLOBAL _zx_saddrcup
436   0000              	GLOBAL _zx_saddrcright_fastcall
437   0000              	GLOBAL _zx_saddrcright
438   0000              	GLOBAL _zx_saddrcleft_fastcall
439   0000              	GLOBAL _zx_saddrcleft
440   0000              	GLOBAL _zx_saddrcdown_fastcall
441   0000              	GLOBAL _zx_saddrcdown
442   0000              	GLOBAL _zx_saddr2py_fastcall
443   0000              	GLOBAL _zx_saddr2py
444   0000              	GLOBAL _zx_saddr2px_fastcall
445   0000              	GLOBAL _zx_saddr2px
446   0000              	GLOBAL _zx_saddr2cy_fastcall
447   0000              	GLOBAL _zx_saddr2cy
448   0000              	GLOBAL _zx_saddr2cx_fastcall
449   0000              	GLOBAL _zx_saddr2cx
450   0000              	GLOBAL _zx_saddr2aaddr_fastcall
451   0000              	GLOBAL _zx_saddr2aaddr
452   0000              	GLOBAL _zx_py2saddr_fastcall
453   0000              	GLOBAL _zx_py2saddr
454   0000              	GLOBAL _zx_py2aaddr_fastcall
455   0000              	GLOBAL _zx_py2aaddr
456   0000              	GLOBAL _zx_pxy2saddr_callee
457   0000              	GLOBAL _zx_pxy2saddr
458   0000              	GLOBAL _zx_pxy2aaddr_callee
459   0000              	GLOBAL _zx_pxy2aaddr
460   0000              	GLOBAL _zx_px2bitmask_fastcall
461   0000              	GLOBAL _zx_px2bitmask
462   0000              	GLOBAL _zx_cy2saddr_fastcall
463   0000              	GLOBAL _zx_cy2saddr
464   0000              	GLOBAL _zx_cy2aaddr_fastcall
465   0000              	GLOBAL _zx_cy2aaddr
466   0000              	GLOBAL _zx_cxy2saddr_callee
467   0000              	GLOBAL _zx_cxy2saddr
468   0000              	GLOBAL _zx_cxy2aaddr_callee
469   0000              	GLOBAL _zx_cxy2aaddr
470   0000              	GLOBAL _zx_bitmask2px_fastcall
471   0000              	GLOBAL _zx_bitmask2px
472   0000              	GLOBAL _zx_aaddrcup_fastcall
473   0000              	GLOBAL _zx_aaddrcup
474   0000              	GLOBAL _zx_aaddrcright_fastcall
475   0000              	GLOBAL _zx_aaddrcright
476   0000              	GLOBAL _zx_aaddrcleft_fastcall
477   0000              	GLOBAL _zx_aaddrcleft
478   0000              	GLOBAL _zx_aaddrcdown_fastcall
479   0000              	GLOBAL _zx_aaddrcdown
480   0000              	GLOBAL _zx_aaddr2saddr_fastcall
481   0000              	GLOBAL _zx_aaddr2saddr
482   0000              	GLOBAL _zx_aaddr2py_fastcall
483   0000              	GLOBAL _zx_aaddr2py
484   0000              	GLOBAL _zx_aaddr2px_fastcall
485   0000              	GLOBAL _zx_aaddr2px
486   0000              	GLOBAL _zx_aaddr2cy_fastcall
487   0000              	GLOBAL _zx_aaddr2cy
488   0000              	GLOBAL _zx_aaddr2cx_fastcall
489   0000              	GLOBAL _zx_aaddr2cx
490   0000              	GLOBAL _zx_visit_wc_pix_callee
491   0000              	GLOBAL _zx_visit_wc_pix
492   0000              	GLOBAL _zx_visit_wc_attr_callee
493   0000              	GLOBAL _zx_visit_wc_attr
494   0000              	GLOBAL _zx_scroll_wc_up_pix_callee
495   0000              	GLOBAL _zx_scroll_wc_up_pix
496   0000              	GLOBAL _zx_scroll_wc_up_attr_callee
497   0000              	GLOBAL _zx_scroll_wc_up_attr
498   0000              	GLOBAL _zx_scroll_wc_up_callee
499   0000              	GLOBAL _zx_scroll_wc_up
500   0000              	GLOBAL _zx_scroll_up_pix_callee
501   0000              	GLOBAL _zx_scroll_up_pix
502   0000              	GLOBAL _zx_scroll_up_attr_callee
503   0000              	GLOBAL _zx_scroll_up_attr
504   0000              	GLOBAL _zx_scroll_up_callee
505   0000              	GLOBAL _zx_scroll_up
506   0000              	GLOBAL _zx_cls_wc_pix_callee
507   0000              	GLOBAL _zx_cls_wc_pix
508   0000              	GLOBAL _zx_cls_wc_attr_callee
509   0000              	GLOBAL _zx_cls_wc_attr
510   0000              	GLOBAL _zx_cls_wc_callee
511   0000              	GLOBAL _zx_cls_wc
512   0000              	GLOBAL _zx_cls_pix_fastcall
513   0000              	GLOBAL _zx_cls_pix
514   0000              	GLOBAL _zx_cls_attr_fastcall
515   0000              	GLOBAL _zx_cls_attr
516   0000              	GLOBAL _zx_cls_fastcall
517   0000              	GLOBAL _zx_cls
518   0000              	GLOBAL _zx_border_fastcall
519   0000              	GLOBAL _zx_border
520   0000              	GLOBAL _spr_btile_paint_back
521   0000              	GLOBAL _spr_explode_bullet
522   0000              	GLOBAL _spr_init_anim_bullets
523   0000              	GLOBAL _spr_turn_horizontal
524   0000              	GLOBAL _spr_play_bullets
525   0000              	GLOBAL _spr_play_anim
526   0000              	GLOBAL _spr_add_anim
527   0000              	GLOBAL _spr_page_map
528   0000              	GLOBAL _spr_page_right
529   0000              	GLOBAL _spr_page_left
530   0000              	GLOBAL _spr_tile_paint
531   0000              	GLOBAL _spr_calc_hor
532   0000              	GLOBAL _spr_draw_row
533   0000              	GLOBAL _spr_draw_index
534   0000              	GLOBAL _spr_draw_clear
535   0000              	GLOBAL _spr_brick_anim
536   0000              	GLOBAL _spr_back_repaint
537   0000              	GLOBAL _spr_tile
538   0000              	GLOBAL _spr_destroy
539   0000              	GLOBAL _spr_tile_dir
540   0000              	GLOBAL _spr_redraw
541   0000              	GLOBAL _spr_move_left
542   0000              	GLOBAL _spr_move_right
543   0000              	GLOBAL _spr_move_horizontal
544   0000              	GLOBAL _spr_move_down
545   0000              	GLOBAL _spr_move_up
546   0000              	GLOBAL _spr_calc_index
547   0000              	GLOBAL _spr_chktime
548   0000              	GLOBAL _sound_hit_brick
549   0000              	GLOBAL _sound_hit_enemy
550   0000              	GLOBAL _sound_kill
551   0000              	GLOBAL _sound_enter_enemy
552   0000              	GLOBAL _sound_coin
553   0000              	GLOBAL _sound_jump
554   0000              	GLOBAL _sound_slide
555   0000              	GLOBAL _player_player_hit_pow
556   0000              	GLOBAL _game_boss_clear
557   0000              	GLOBAL _game_obj_clear
558   0000              	GLOBAL _game_obj_chk
559   0000              	GLOBAL _game_obj_set
560   0000              	GLOBAL _game_shoot_fire_boss
561   0000              	GLOBAL _game_shoot_fire
562   0000              	GLOBAL _game_add_enemy
563   0000              	GLOBAL _game_joystick_set_menu
564   0000              	GLOBAL _game_joystick_set
565   0000              	GLOBAL _game_joystick_change
566   0000              	GLOBAL _game_print_header
567   0000              	GLOBAL _game_end
568   0000              	GLOBAL _game_phase_print_score_back
569   0000              	GLOBAL _game_check_time
570   0000              	GLOBAL _game_rotate_attrib
571   0000              	GLOBAL _game_colour_message
572   0000              	GLOBAL _game_paint_attrib_lin_h
573   0000              	GLOBAL _game_paint_attrib_lin
574   0000              	GLOBAL _game_paint_attrib
575   0000              	GLOBAL _game_print_score
576   0000              	GLOBAL _game_unfreeze_all
577   0000              	GLOBAL _game_freeze_all
578   0000              	GLOBAL _game_freeze
579   0000              	GLOBAL _game_enemy_add_get_index
580   0000              	GLOBAL _game_check_cell
581   0000              	GLOBAL _game_check_map
582   0000              	GLOBAL _game_loop
583   0000              	GLOBAL _game_round_init
584   0000              	GLOBAL _game_start_timer
585   0000              	GLOBAL _game_tick
586   0000              	GLOBAL _game_update_stats
587   0000              	GLOBAL _game_print_footer
588   0000              	GLOBAL _game_fill_row
589   0000              	GLOBAL _game_fps
590   0000              	GLOBAL _game_respawn
591   0000              	GLOBAL _game_draw_screen
592   0000              	GLOBAL _enemy_avoid_fall_dead
593   0000              	GLOBAL _enemy_avoid_fall
594   0000              	GLOBAL _enemy_respawn
595   0000              	GLOBAL _enemy_init
596   0000              	GLOBAL _enemy_move
597   0000              	GLOBAL _enemy_turn
598   0000              	GLOBAL _enemy_hit
599   0000              	GLOBAL _enemy_coin1
600   0000              	GLOBAL _enemy_static
601   0000              	GLOBAL _enemy_walk
602   0000              	GLOBAL _enemy_horizontal
603   0000              	GLOBAL _enemy_vertical
604   0000              	GLOBAL _ay_fx_play
605   0000              	GLOBAL _ay_midi_play
606   0000              	GLOBAL _ay_is_playing
607   0000              	GLOBAL _ay_reset
608   0000              	GLOBAL _test_func
609   0000              	GLOBAL _test_proc
610   0000              	GLOBAL _in_mouse_kempston_wheel_delta
611   0000              	GLOBAL _in_mouse_kempston_wheel
612   0000              	GLOBAL _in_mouse_kempston_callee
613   0000              	GLOBAL _in_mouse_kempston
614   0000              	GLOBAL _in_mouse_kempston_setpos_callee
615   0000              	GLOBAL _in_mouse_kempston_setpos
616   0000              	GLOBAL _in_mouse_kempston_reset
617   0000              	GLOBAL _in_mouse_kempston_init
618   0000              	GLOBAL _in_mouse_amx_wheel_delta
619   0000              	GLOBAL _in_mouse_amx_wheel
620   0000              	GLOBAL _in_mouse_amx_callee
621   0000              	GLOBAL _in_mouse_amx
622   0000              	GLOBAL _in_mouse_amx_setpos_callee
623   0000              	GLOBAL _in_mouse_amx_setpos
624   0000              	GLOBAL _in_mouse_amx_reset
625   0000              	GLOBAL _in_mouse_amx_init_callee
626   0000              	GLOBAL _in_mouse_amx_init
627   0000              	GLOBAL _in_stick_sinclair2
628   0000              	GLOBAL _in_stick_sinclair1
629   0000              	GLOBAL _in_stick_kempston
630   0000              	GLOBAL _in_stick_fuller
631   0000              	GLOBAL _in_stick_cursor
632   0000              	GLOBAL _in_stick_keyboard_fastcall
633   0000              	GLOBAL _in_stick_keyboard
634   0000              	GLOBAL _in_wait_nokey
635   0000              	GLOBAL _in_wait_key
636   0000              	GLOBAL _in_test_key
637   0000              	GLOBAL _in_pause_fastcall
638   0000              	GLOBAL _in_pause
639   0000              	GLOBAL _in_key_scancode_fastcall
640   0000              	GLOBAL _in_key_scancode
641   0000              	GLOBAL _in_key_pressed_fastcall
642   0000              	GLOBAL _in_key_pressed
643   0000              	GLOBAL _in_inkey
644   0000              	GLOBAL _NIRVANAP_CHAR_TABLE
645   0000              	GLOBAL _NIRVANAP_WIDE_IMAGES
646   0000              	GLOBAL _NIRVANAP_TILE_IMAGES
647   0000              	GLOBAL _NIRVANAP_HOLE
648   0000              	GLOBAL _NIRVANAP_ISR_HOOK
649   0000              	GLOBAL _player_lvl_table
650   0000              	GLOBAL _map_paper_last
651   0000              	GLOBAL _map_paper_clr
652   0000              	GLOBAL _map_paper
653   0000              	GLOBAL _draw_count
654   0000              	GLOBAL _g_player_hit_right
655   0000              	GLOBAL _g_player_hit_left
656   0000              	GLOBAL _joynames
657   0000              	GLOBAL _initials
658   0000              	GLOBAL _bullet_count
659   0000              	GLOBAL _spr_hack
660   0000              	GLOBAL _boss_stat
661   0000              	GLOBAL _boss_time_fire
662   0000              	GLOBAL _boss_time
663   0000              	GLOBAL _boss_tile
664   0000              	GLOBAL _boss_inc
665   0000              	GLOBAL _boss_col
666   0000              	GLOBAL _boss_lin
667   0000              	GLOBAL _bullet_vel
668   0000              	GLOBAL _bullet_frames
669   0000              	GLOBAL _bullet_colint
670   0000              	GLOBAL _bullet_dir
671   0000              	GLOBAL _bullet_tile
672   0000              	GLOBAL _bullet_col
673   0000              	GLOBAL _bullet_lin
674   0000              	GLOBAL _bullet_col0
675   0000              	GLOBAL _bullet_lin0
676   0000              	GLOBAL _bullet_max
677   0000              	GLOBAL _bullet_class
678   0000              	GLOBAL _mush_class
679   0000              	GLOBAL _mush_index
680   0000              	GLOBAL _anim_count
681   0000              	GLOBAL _anim_respanwn
682   0000              	GLOBAL _anim_loop
683   0000              	GLOBAL _anim_end
684   0000              	GLOBAL _anim_int
685   0000              	GLOBAL _anim_tile
686   0000              	GLOBAL _anim_col
687   0000              	GLOBAL _anim_lin
688   0000              	GLOBAL _map_heigth
689   0000              	GLOBAL _map_width
690   0000              	GLOBAL _scr_curr
691   0000              	GLOBAL _scr_obj1
692   0000              	GLOBAL _scr_obj0
693   0000              	GLOBAL _scr_map
694   0000              	GLOBAL _sprite_speed_alt
695   0000              	GLOBAL _sprite_frames
696   0000              	GLOBAL _sprite_speed
697   0000              	GLOBAL _screen_ink
698   0000              	GLOBAL _screen_paper
699   0000              	GLOBAL _player_over_stair
700   0000              	GLOBAL _game_start_scr
701   0000              	GLOBAL _game_respawn_tile
702   0000              	GLOBAL _game_respawn_index
703   0000              	GLOBAL _game_respawn_time
704   0000              	GLOBAL _game_menu_sel
705   0000              	GLOBAL _game_score_top
706   0000              	GLOBAL _player_lives
707   0000              	GLOBAL _game_over
708   0000              	GLOBAL _game_sound
709   0000              	GLOBAL _game_inmune
710   0000              	GLOBAL _game_god_mode
711   0000              	GLOBAL _game_two_player
712   0000              	GLOBAL _game_brick_tile
713   0000              	GLOBAL _sprite_curr_index
714   0000              	GLOBAL _spr_count
715   0000              	GLOBAL _bullet_time
716   0000              	GLOBAL _anim_time
717   0000              	GLOBAL _frame_time
718   0000              	GLOBAL _entry_time
719   0000              	GLOBAL _curr_time
720   0000              	GLOBAL _s_state
721   0000              	GLOBAL _attrib_hl
722   0000              	GLOBAL _attrib
723   0000              	GLOBAL _zx_val_asm
724   0000              	GLOBAL _enemies
725   0000              	GLOBAL _tmp_ui
726   0000              	GLOBAL _tmp_sc
727   0000              	GLOBAL _tmp_uc
728   0000              	GLOBAL _tmp1
729   0000              	GLOBAL _tmp0
730   0000              	GLOBAL _tmp
731   0000              	GLOBAL _index1
732   0000              	GLOBAL _index0
733   0000              	GLOBAL _loop_count
734   0000              	GLOBAL _s_col1
735   0000              	GLOBAL _s_col0
736   0000              	GLOBAL _s_lin1
737   0000              	GLOBAL _s_lin0
738   0000              	GLOBAL _s_tile1
739   0000              	GLOBAL _s_tile0
740   0000              	GLOBAL _player_brick_time
741   0000              	GLOBAL _player_hit_count
742   0000              	GLOBAL _sprite_horizontal_check
743   0000              	GLOBAL _sprite_on_air
744   0000              	GLOBAL _sprite
745   0000              	GLOBAL _fps
746   0000              	GLOBAL _game_respawn_curr_time
747   0000              	GLOBAL _game_worldup
748   0000              	GLOBAL _game_mush_count
749   0000              	GLOBAL _game_boss_fix
750   0000              	GLOBAL _game_boss_hit
751   0000              	GLOBAL _game_boss_alive
752   0000              	GLOBAL _game_boss
753   0000              	GLOBAL _game_world
754   0000              	GLOBAL _game_gravity
755   0000              	GLOBAL _player_hit_time
756   0000              	GLOBAL _player_lin_scr
757   0000              	GLOBAL _player_col_scr
758   0000              	GLOBAL _player_lvl
759   0000              	GLOBAL _player_int
760   0000              	GLOBAL _player_str
761   0000              	GLOBAL _player_max_vita
762   0000              	GLOBAL _player_max_mana
763   0000              	GLOBAL _player_vita
764   0000              	GLOBAL _player_mana
765   0000              	GLOBAL _player_keys
766   0000              	GLOBAL _player_vel_inc
767   0000              	GLOBAL _player_vel_y1
768   0000              	GLOBAL _player_vel_y0
769   0000              	GLOBAL _player_vel_y
770   0000              	GLOBAL _player_vel_x
771   0000              	GLOBAL _player_joy
772   0000              	GLOBAL _player_score
773   0000              	GLOBAL _last_time
774   0000              	GLOBAL _player_slide
775   0000              	GLOBAL _spr_timer
776   0000              	GLOBAL _jump_lin
777   0000              	GLOBAL _player_hit_col
778   0000              	GLOBAL _player_hit_lin
779   0000              	GLOBAL _colint
780   0000              	GLOBAL _col
781   0000              	GLOBAL _lin
782   0000              	GLOBAL _tile
783   0000              	GLOBAL _state_a
784   0000              	GLOBAL _state
785   0000              	GLOBAL _class
786   0000              	GLOBAL _tbuffer
787   0000              	GLOBAL _dirs
788   0000              	GLOBAL _k1
789   0000              	GLOBAL _joyfunc1
790   0000              	GLOBAL _btiles
791   0000              	GLOBAL _spec128
792   0000              	GLOBAL _GLOBAL_ZX_PORT_7FFD
793   0000              	GLOBAL _GLOBAL_ZX_PORT_1FFD
794   0000              	GLOBAL _GLOBAL_ZX_PORT_FE
795   0000              	GLOBAL _ay_effect_20
796   0000              	GLOBAL _ay_effect_19
797   0000              	GLOBAL _ay_effect_18
798   0000              	GLOBAL _ay_effect_17
799   0000              	GLOBAL _ay_effect_16
800   0000              	GLOBAL _ay_effect_15
801   0000              	GLOBAL _ay_effect_14
802   0000              	GLOBAL _ay_effect_13
803   0000              	GLOBAL _ay_effect_12
804   0000              	GLOBAL _ay_effect_11
805   0000              	GLOBAL _ay_effect_10
806   0000              	GLOBAL _ay_effect_09
807   0000              	GLOBAL _ay_effect_08
808   0000              	GLOBAL _ay_effect_07
809   0000              	GLOBAL _ay_effect_06
810   0000              	GLOBAL _ay_effect_05
811   0000              	GLOBAL _ay_effect_04
812   0000              	GLOBAL _ay_effect_03
813   0000              	GLOBAL _ay_effect_02
814   0000              	GLOBAL _ay_effect_01
815   0000              	GLOBAL _pb_midi_phase_1
816   0000              	GLOBAL _pb_midi_title
817   0000              	GLOBAL _control_method
818   0000              	GLOBAL _world0
819   0000              	GLOBAL _lenght0
820   0000              	GLOBAL _start_scr0
821   0000              ;--------------------------------------------------------
822   0000              ; special function registers
823   0000              ;--------------------------------------------------------
824   0000              defc _IO_FE	=	0x00fe
825   0000              defc _IO_1FFD	=	0x1ffd
826   0000              defc _IO_7FFD	=	0x7ffd
827   0000              ;--------------------------------------------------------
828   0000              ; ram data
829   0000              ;--------------------------------------------------------
830   0000              	SECTION bss_compiler
831   0000              ;--------------------------------------------------------
832   0000              ; ram data
833   0000              ;--------------------------------------------------------
834   0000              
835   0000              IF 0
836   0000              
837   0000              ; .area _INITIALIZED removed by z88dk
838   0000              
839   0000              
840   0000              ENDIF
841   0000              
842   0000              ;--------------------------------------------------------
843   0000              ; absolute external ram data
844   0000              ;--------------------------------------------------------
845   0000              	SECTION IGNORE
846   0000              ;--------------------------------------------------------
847   0000              ; global & static initialisations
848   0000              ;--------------------------------------------------------
849   0000              	SECTION code_crt_init
850   0000              ;--------------------------------------------------------
851   0000              ; Home
852   0000              ;--------------------------------------------------------
853   0000              	SECTION IGNORE
854   0000              ;--------------------------------------------------------
855   0000              ; code
856   0000              ;--------------------------------------------------------
857   0000              	SECTION code_compiler
858   0000              ;	---------------------------------
859   0000              ; Function player_init
860   0000              ; ---------------------------------
861   0000              _player_init:
862   0000  CD 00 00    	call	___sdcc_enter_ix
863   0003  F5          	push	af
864   0004  3E 00       	ld	a, +((_class) & 0xFF)
865   0006  DD 86 04    	add	a,(ix+4)
866   0009  4F          	ld	c, a
867   000A  3E 00       	ld	a, +((_class) / 256)
868   000C  CE 00       	adc	a,0x00
869   000E  47          	ld	b, a
870   000F  AF          	xor	a, a
871   0010  02          	ld	(bc), a
872   0011  3E 00       	ld	a, +((_tile) & 0xFF)
873   0013  DD 86 04    	add	a,(ix+4)
874   0016  4F          	ld	c, a
875   0017  3E 00       	ld	a, +((_tile) / 256)
876   0019  CE 00       	adc	a,0x00
877   001B  47          	ld	b, a
878   001C  DD 7E 07    	ld	a,(ix+7)
879   001F  02          	ld	(bc), a
880   0020  3E 00       	ld	a, +((_lin) & 0xFF)
881   0022  DD 86 04    	add	a,(ix+4)
882   0025  4F          	ld	c, a
883   0026  3E 00       	ld	a, +((_lin) / 256)
884   0028  CE 00       	adc	a,0x00
885   002A  47          	ld	b, a
886   002B  DD 7E 05    	ld	a,(ix+5)
887   002E  02          	ld	(bc), a
888   002F  3E 00       	ld	a, +((_col) & 0xFF)
889   0031  DD 86 04    	add	a,(ix+4)
890   0034  4F          	ld	c, a
891   0035  3E 00       	ld	a, +((_col) / 256)
892   0037  CE 00       	adc	a,0x00
893   0039  47          	ld	b, a
894   003A  DD 7E 06    	ld	a,(ix+6)
895   003D  02          	ld	(bc), a
896   003E  3E 00       	ld	a, +((_colint) & 0xFF)
897   0040  DD 86 04    	add	a,(ix+4)
898   0043  4F          	ld	c, a
899   0044  3E 00       	ld	a, +((_colint) / 256)
900   0046  CE 00       	adc	a,0x00
901   0048  47          	ld	b, a
902   0049  AF          	xor	a, a
903   004A  02          	ld	(bc), a
904   004B  3E 00       	ld	a, +((_state) & 0xFF)
905   004D  DD 86 04    	add	a,(ix+4)
906   0050  4F          	ld	c, a
907   0051  3E 00       	ld	a, +((_state) / 256)
908   0053  CE 00       	adc	a,0x00
909   0055  47          	ld	b, a
910   0056  AF          	xor	a, a
911   0057  02          	ld	(bc), a
912   0058  3E 00       	ld	a, +((_state_a) & 0xFF)
913   005A  DD 86 04    	add	a,(ix+4)
914   005D  4F          	ld	c, a
915   005E  3E 00       	ld	a, +((_state_a) / 256)
916   0060  CE 00       	adc	a,0x00
917   0062  47          	ld	b, a
918   0063  AF          	xor	a, a
919   0064  02          	ld	(bc), a
920   0065  3E 00       	ld	a, +((_jump_lin) & 0xFF)
921   0067  DD 86 04    	add	a,(ix+4)
922   006A  5F          	ld	e, a
923   006B  3E 00       	ld	a, +((_jump_lin) / 256)
924   006D  CE 00       	adc	a,0x00
925   006F  57          	ld	d, a
926   0070  DD 7E 05    	ld	a,(ix+5)
927   0073  12          	ld	(de), a
928   0074  DD 6E 04    	ld	l,(ix+4)
929   0077  26 00       	ld	h,0x00
930   0079  29          	add	hl,hl
931   007A  11 00 00    	ld	de,_last_time
932   007D  19          	add	hl, de
933   007E  E3          	ex	(sp), hl
934   007F  E1          	pop	hl
935   0080  ED 5B 00 00 	ld	de,(_curr_time)
936   0084  E5          	push	hl
937   0085  73          	ld	(hl), e
938   0086  23          	inc	hl
939   0087  72          	ld	(hl), d
940   0088  3E 00       	ld	a, +((_sprite_speed_alt) & 0xFF)
941   008A  DD 86 04    	add	a,(ix+4)
942   008D  5F          	ld	e, a
943   008E  3E 00       	ld	a, +((_sprite_speed_alt) / 256)
944   0090  CE 00       	adc	a,0x00
945   0092  57          	ld	d, a
946   0093  AF          	xor	a, a
947   0094  12          	ld	(de), a
948   0095  0A          	ld	a, (bc)
949   0096  F6 11       	or	a,+(0x01|0x10)
950   0098  02          	ld	(bc),a
951   0099  21 00 00    	ld	hl,_player_hit_col
952   009C  36 00       	ld	(hl),0x00
953   009E  21 00 00    	ld	hl,_player_hit_lin
954   00A1  36 00       	ld	(hl),0x00
955   00A3  21 00 00    	ld	hl,_player_slide
956   00A6  36 00       	ld	(hl),0x00
957   00A8  DD 66 06    	ld	h,(ix+6)
958   00AB  DD 6E 05    	ld	l,(ix+5)
959   00AE  E5          	push	hl
960   00AF  DD 66 07    	ld	h,(ix+7)
961   00B2  DD 6E 04    	ld	l,(ix+4)
962   00B5  E5          	push	hl
963   00B6  CD 00 00    	call	_NIRVANAP_spriteT_callee
964   00B9  F1          	pop	af
965   00BA  DD E1       	pop	ix
966   00BC  C9          	ret
967   00BD              	SECTION code_compiler
968   00BD              ;	---------------------------------
969   00BD              ; Function player_check_input
970   00BD              ; ---------------------------------
971   00BD              _player_check_input:
972   00BD  21 00 00    	ld	hl,_dirs
973   00C0  CB 56       	bit	2, (hl)
974   00C2  28 0C       	jr	Z,l_player_check_input_00102
975   00C4  21 00 00    	ld	hl,_dirs
976   00C7  CB 5E       	bit	3, (hl)
977   00C9  28 05       	jr	Z,l_player_check_input_00102
978   00CB  21 00 00    	ld	hl,_dirs
979   00CE  36 00       	ld	(hl),0x00
980   00D0              l_player_check_input_00102:
981   00D0  21 00 00    	ld	hl,_dirs
982   00D3  7E          	ld	a, (hl)
983   00D4  CB 07       	rlc	a
984   00D6  E6 01       	and	a,0x01
985   00D8  CB 47       	bit	0, a
986   00DA  20 1D       	jr	NZ,l_player_check_input_00107
987   00DC  CB 56       	bit	2, (hl)
988   00DE  20 19       	jr	NZ,l_player_check_input_00107
989   00E0  21 00 00    	ld	hl,_dirs
990   00E3  CB 5E       	bit	3, (hl)
991   00E5  20 12       	jr	NZ,l_player_check_input_00107
992   00E7  21 00 00    	ld	hl,_dirs
993   00EA  CB 46       	bit	0, (hl)
994   00EC  20 0B       	jr	NZ,l_player_check_input_00107
995   00EE  21 00 00    	ld	hl,_dirs
996   00F1  CB 4E       	bit	1, (hl)
997   00F3  20 04       	jr	NZ,l_player_check_input_00107
998   00F5  2E 00       	ld	l,0x00
999   00F7  18 02       	jr	l_player_check_input_00108
1000  00F9              l_player_check_input_00107:
1001  00F9  2E 01       	ld	l,0x01
1002  00FB              l_player_check_input_00108:
1003  00FB  C9          	ret
1004  00FC              	SECTION code_compiler
1005  00FC              ;	---------------------------------
1006  00FC              ; Function player_collision
1007  00FC              ; ---------------------------------
1008  00FC              _player_collision:
1009  00FC  21 19 00    	ld	hl,0x0019
1010  00FF  E5          	push	hl
1011  0100  2A 00 00    	ld	hl,(_player_hit_time)
1012  0103  E5          	push	hl
1013  0104  CD 00 00    	call	_game_check_time
1014  0107  F1          	pop	af
1015  0108  F1          	pop	af
1016  0109  7D          	ld	a, l
1017  010A  B7          	or	a, a
1018  010B  CA 4E 02    	jp	Z, l_player_collision_00124
1019  010E  21 00 00    	ld	hl,_sprite
1020  0111  36 00       	ld	(hl),0x00
1021  0113  3A 07 00    	ld	a,(_col + 7)
1022  0116  32 00 00    	ld	(_s_col1),a
1023  0119  3A 07 00    	ld	a,(_lin + 7)
1024  011C  32 00 00    	ld	(_s_lin1),a
1025  011F  C6 08       	add	a,0x08
1026  0121  4F          	ld	c, a
1027  0122  3A 00 00    	ld	a, (_s_col1)
1028  0125  47          	ld	b,a
1029  0126  C5          	push	bc
1030  0127  CD 00 00    	call	_spr_calc_index
1031  012A  F1          	pop	af
1032  012B  7D          	ld	a,l
1033  012C  32 00 00    	ld	(_sprite_curr_index),a
1034  012F  4F          	ld	c,a
1035  0130  06 00       	ld	b,0x00
1036  0132  21 00 00    	ld	hl,_scr_map
1037  0135  09          	add	hl,bc
1038  0136  4E          	ld	c, (hl)
1039  0137  3E 2F       	ld	a,0x2f
1040  0139  91          	sub	a, c
1041  013A  30 0F       	jr	NC,l_player_collision_00120
1042  013C  79          	ld	a, c
1043  013D  D6 3C       	sub	a,0x3c
1044  013F  30 0A       	jr	NC,l_player_collision_00120
1045  0141  2E 06       	ld	l,0x06
1046  0143  CD 00 00    	call	_zx_border_fastcall
1047  0146  2E 32       	ld	l,0x32
1048  0148  CD 24 12    	call	_player_hit
1049  014B              l_player_collision_00120:
1050  014B  21 00 00    	ld	hl,_sprite
1051  014E  7E          	ld	a, (hl)
1052  014F  D6 07       	sub	a,0x07
1053  0151  D2 4E 02    	jp	NC, l_player_collision_00124
1054  0154  3E 00       	ld	a, +((_class) & 0xFF)
1055  0156  86          	add	a, (hl)
1056  0157  4F          	ld	c, a
1057  0158  3E 00       	ld	a, +((_class) / 256)
1058  015A  CE 00       	adc	a,0x00
1059  015C  47          	ld	b, a
1060  015D  0A          	ld	a, (bc)
1061  015E  B7          	or	a, a
1062  015F  CA 47 02    	jp	Z, l_player_collision_00119
1063  0162  4E          	ld	c,(hl)
1064  0163  06 00       	ld	b,0x00
1065  0165  21 00 00    	ld	hl,_col
1066  0168  09          	add	hl,bc
1067  0169  4E          	ld	c, (hl)
1068  016A  06 00       	ld	b,0x00
1069  016C  3A 00 00    	ld	a,(_s_col1)
1070  016F  5F          	ld	e,a
1071  0170  16 00       	ld	d,0x00
1072  0172  79          	ld	a, c
1073  0173  93          	sub	a, e
1074  0174  6F          	ld	l, a
1075  0175  78          	ld	a, b
1076  0176  9A          	sbc	a, d
1077  0177  67          	ld	h, a
1078  0178  CD 00 00    	call	_abs_fastcall
1079  017B  7D          	ld	a,l
1080  017C  D6 02       	sub	a,0x02
1081  017E  7C          	ld	a,h
1082  017F  17          	rla
1083  0180  3F          	ccf
1084  0181  1F          	rra
1085  0182  DE 80       	sbc	a,0x80
1086  0184  D2 47 02    	jp	NC, l_player_collision_00119
1087  0187  2A 00 00    	ld	hl,(_sprite)
1088  018A  26 00       	ld	h,0x00
1089  018C  01 00 00    	ld	bc,_lin
1090  018F  09          	add	hl,bc
1091  0190  4E          	ld	c,(hl)
1092  0191  06 00       	ld	b,0x00
1093  0193  3A 00 00    	ld	a,(_s_lin1)
1094  0196  5F          	ld	e,a
1095  0197  16 00       	ld	d,0x00
1096  0199  79          	ld	a, c
1097  019A  93          	sub	a, e
1098  019B  6F          	ld	l, a
1099  019C  78          	ld	a, b
1100  019D  9A          	sbc	a, d
1101  019E  67          	ld	h, a
1102  019F  CD 00 00    	call	_abs_fastcall
1103  01A2  7D          	ld	a,l
1104  01A3  D6 0E       	sub	a,0x0e
1105  01A5  7C          	ld	a,h
1106  01A6  17          	rla
1107  01A7  3F          	ccf
1108  01A8  1F          	rra
1109  01A9  DE 80       	sbc	a,0x80
1110  01AB  D2 47 02    	jp	NC, l_player_collision_00119
1111  01AE  2A 00 00    	ld	hl,(_sprite)
1112  01B1  26 00       	ld	h,0x00
1113  01B3  01 00 00    	ld	bc,_class
1114  01B6  09          	add	hl,bc
1115  01B7  7E          	ld	a,(hl)
1116  01B8  FE 06       	cp	a,0x06
1117  01BA  20 2D       	jr	NZ,l_player_collision_00107
1118  01BC  21 00 00    	ld	hl,_player_vita
1119  01BF  7E          	ld	a, (hl)
1120  01C0  C6 19       	add	a,0x19
1121  01C2  77          	ld	(hl), a
1122  01C3  3A 00 00    	ld	a,(_player_max_vita)
1123  01C6  21 00 00    	ld	hl,_player_vita
1124  01C9  96          	sub	a, (hl)
1125  01CA  30 06       	jr	NC,l_player_collision_00105
1126  01CC  3A 00 00    	ld	a,(_player_max_vita)
1127  01CF  32 00 00    	ld	(_player_vita),a
1128  01D2              l_player_collision_00105:
1129  01D2  21 01 00    	ld	hl,0x0001
1130  01D5  CD 63 0C    	call	_player_score_add
1131  01D8  CD 00 00    	call	_game_update_stats
1132  01DB  2A 00 00    	ld	hl,(_sprite)
1133  01DE  CD 00 00    	call	_spr_destroy
1134  01E1  21 00 00    	ld	hl,_game_mush_count
1135  01E4  35          	dec	(hl)
1136  01E5  2E 00       	ld	l,0x00
1137  01E7  18 67       	jr	l_player_collision_00125
1138  01E9              l_player_collision_00107:
1139  01E9  FE 07       	cp	a,0x07
1140  01EB  20 2D       	jr	NZ,l_player_collision_00111
1141  01ED  21 00 00    	ld	hl,_player_mana
1142  01F0  7E          	ld	a, (hl)
1143  01F1  C6 19       	add	a,0x19
1144  01F3  77          	ld	(hl), a
1145  01F4  3A 00 00    	ld	a,(_player_max_mana)
1146  01F7  21 00 00    	ld	hl,_player_mana
1147  01FA  96          	sub	a, (hl)
1148  01FB  30 06       	jr	NC,l_player_collision_00109
1149  01FD  3A 00 00    	ld	a,(_player_max_mana)
1150  0200  32 00 00    	ld	(_player_mana),a
1151  0203              l_player_collision_00109:
1152  0203  21 01 00    	ld	hl,0x0001
1153  0206  CD 63 0C    	call	_player_score_add
1154  0209  CD 00 00    	call	_game_update_stats
1155  020C  2A 00 00    	ld	hl,(_sprite)
1156  020F  CD 00 00    	call	_spr_destroy
1157  0212  21 00 00    	ld	hl,_game_mush_count
1158  0215  35          	dec	(hl)
1159  0216  2E 00       	ld	l,0x00
1160  0218  18 36       	jr	l_player_collision_00125
1161  021A              l_player_collision_00111:
1162  021A  D6 08       	sub	a,0x08
1163  021C  20 1B       	jr	NZ,l_player_collision_00113
1164  021E  21 00 00    	ld	hl,_player_lives
1165  0221  34          	inc	(hl)
1166  0222  21 01 00    	ld	hl,0x0001
1167  0225  CD 63 0C    	call	_player_score_add
1168  0228  CD 00 00    	call	_game_update_stats
1169  022B  2A 00 00    	ld	hl,(_sprite)
1170  022E  CD 00 00    	call	_spr_destroy
1171  0231  21 00 00    	ld	hl,_game_mush_count
1172  0234  35          	dec	(hl)
1173  0235  2E 00       	ld	l,0x00
1174  0237  18 17       	jr	l_player_collision_00125
1175  0239              l_player_collision_00113:
1176  0239  2E 02       	ld	l,0x02
1177  023B  CD 00 00    	call	_zx_border_fastcall
1178  023E  2E 14       	ld	l,0x14
1179  0240  CD 24 12    	call	_player_hit
1180  0243  2E 01       	ld	l,0x01
1181  0245  18 09       	jr	l_player_collision_00125
1182  0247              l_player_collision_00119:
1183  0247  21 00 00    	ld	hl,_sprite
1184  024A  34          	inc	(hl)
1185  024B  C3 4B 01    	jp	l_player_collision_00120
1186  024E              l_player_collision_00124:
1187  024E  2E 00       	ld	l,0x00
1188  0250              l_player_collision_00125:
1189  0250  C9          	ret
1190  0251              	SECTION code_compiler
1191  0251              ;	---------------------------------
1192  0251              ; Function player_kill
1193  0251              ; ---------------------------------
1194  0251              _player_kill:
1195  0251  01 00 00    	ld	bc,_state+0
1196  0254  2A 00 00    	ld	hl,(_sprite)
1197  0257  26 00       	ld	h,0x00
1198  0259  09          	add	hl,bc
1199  025A  CB 6E       	bit	5,(hl)
1200  025C  C2 25 03    	jp	NZ,l_player_kill_00109
1201  025F  C5          	push	bc
1202  0260  CD 00 00    	call	_sound_hit_brick
1203  0263  C1          	pop	bc
1204  0264  79          	ld	a, c
1205  0265  21 00 00    	ld	hl,_sprite
1206  0268  86          	add	a, (hl)
1207  0269  5F          	ld	e, a
1208  026A  78          	ld	a, b
1209  026B  CE 00       	adc	a,0x00
1210  026D  57          	ld	d, a
1211  026E  1A          	ld	a, (de)
1212  026F  F6 20       	or	a,0x20
1213  0271  12          	ld	(de), a
1214  0272  3E 00       	ld	a, +((_sprite_speed_alt) & 0xFF)
1215  0274  86          	add	a, (hl)
1216  0275  5F          	ld	e, a
1217  0276  3E 00       	ld	a, +((_sprite_speed_alt) / 256)
1218  0278  CE 00       	adc	a,0x00
1219  027A  57          	ld	d, a
1220  027B  3E 03       	ld	a,0x03
1221  027D  12          	ld	(de), a
1222  027E  79          	ld	a, c
1223  027F  86          	add	a, (hl)
1224  0280  4F          	ld	c, a
1225  0281  78          	ld	a, b
1226  0282  CE 00       	adc	a,0x00
1227  0284  47          	ld	b, a
1228  0285  0A          	ld	a, (bc)
1229  0286  CB 57       	bit	2, a
1230  0288  28 0D       	jr	Z,l_player_kill_00102
1231  028A  2A 00 00    	ld	hl,(_sprite)
1232  028D  26 00       	ld	h,0x00
1233  028F  01 00 00    	ld	bc,_tile
1234  0292  09          	add	hl,bc
1235  0293  36 4C       	ld	(hl),0x4c
1236  0295  18 0B       	jr	l_player_kill_00103
1237  0297              l_player_kill_00102:
1238  0297  2A 00 00    	ld	hl,(_sprite)
1239  029A  26 00       	ld	h,0x00
1240  029C  01 00 00    	ld	bc,_tile
1241  029F  09          	add	hl,bc
1242  02A0  36 54       	ld	(hl),0x54
1243  02A2              l_player_kill_00103:
1244  02A2  CD 2A 0C    	call	_player_hit_platform_clear
1245  02A5  2A 00 00    	ld	hl,(_sprite)
1246  02A8  26 00       	ld	h,0x00
1247  02AA  01 00 00    	ld	bc,_col
1248  02AD  09          	add	hl,bc
1249  02AE  4E          	ld	c, (hl)
1250  02AF  2A 00 00    	ld	hl,(_sprite)
1251  02B2  26 00       	ld	h,0x00
1252  02B4  11 00 00    	ld	de,_lin
1253  02B7  19          	add	hl,de
1254  02B8  46          	ld	b, (hl)
1255  02B9  2A 00 00    	ld	hl,(_sprite)
1256  02BC  26 00       	ld	h,0x00
1257  02BE  11 00 00    	ld	de,_tile
1258  02C1  19          	add	hl,de
1259  02C2  5E          	ld	e, (hl)
1260  02C3  79          	ld	a,c
1261  02C4  48          	ld	c,b
1262  02C5  47          	ld	b,a
1263  02C6  21 00 00    	ld	hl,_sprite
1264  02C9  C5          	push	bc
1265  02CA  7B          	ld	a, e
1266  02CB  F5          	push	af
1267  02CC  33          	inc	sp
1268  02CD  7E          	ld	a, (hl)
1269  02CE  F5          	push	af
1270  02CF  33          	inc	sp
1271  02D0  CD 00 00    	call	_NIRVANAP_spriteT_callee
1272  02D3  01 00 00    	ld	bc,_spr_timer+0
1273  02D6  2A 00 00    	ld	hl,(_sprite)
1274  02D9  26 00       	ld	h,0x00
1275  02DB  29          	add	hl, hl
1276  02DC  09          	add	hl,bc
1277  02DD  ED 5B 00 00 	ld	de,(_curr_time)
1278  02E1  73          	ld	(hl),e
1279  02E2  23          	inc	hl
1280  02E3  72          	ld	(hl),d
1281  02E4  3A 00 00    	ld	a,(_sprite)
1282  02E7  D6 07       	sub	a,0x07
1283  02E9  20 1E       	jr	NZ,l_player_kill_00105
1284  02EB  01 00 00    	ld	bc,_state_a+0
1285  02EE  79          	ld	a, c
1286  02EF  21 00 00    	ld	hl,_sprite
1287  02F2  86          	add	a, (hl)
1288  02F3  5F          	ld	e, a
1289  02F4  78          	ld	a, b
1290  02F5  CE 00       	adc	a,0x00
1291  02F7  57          	ld	d, a
1292  02F8  1A          	ld	a, (de)
1293  02F9  F6 08       	or	a,0x08
1294  02FB  12          	ld	(de), a
1295  02FC  79          	ld	a, c
1296  02FD  86          	add	a, (hl)
1297  02FE  4F          	ld	c, a
1298  02FF  78          	ld	a, b
1299  0300  CE 00       	adc	a,0x00
1300  0302  47          	ld	b, a
1301  0303  0A          	ld	a, (bc)
1302  0304  E6 EF       	and	a,0xef
1303  0306  02          	ld	(bc), a
1304  0307  18 1C       	jr	l_player_kill_00109
1305  0309              l_player_kill_00105:
1306  0309  01 00 00    	ld	bc,_state_a+0
1307  030C  79          	ld	a, c
1308  030D  21 00 00    	ld	hl,_sprite
1309  0310  86          	add	a, (hl)
1310  0311  5F          	ld	e, a
1311  0312  78          	ld	a, b
1312  0313  CE 00       	adc	a,0x00
1313  0315  57          	ld	d, a
1314  0316  1A          	ld	a, (de)
1315  0317  F6 10       	or	a,0x10
1316  0319  12          	ld	(de), a
1317  031A  79          	ld	a, c
1318  031B  86          	add	a, (hl)
1319  031C  4F          	ld	c, a
1320  031D  78          	ld	a, b
1321  031E  CE 00       	adc	a,0x00
1322  0320  47          	ld	b, a
1323  0321  0A          	ld	a, (bc)
1324  0322  E6 F7       	and	a,0xf7
1325  0324  02          	ld	(bc), a
1326  0325              l_player_kill_00109:
1327  0325  C9          	ret
1328  0326              	SECTION code_compiler
1329  0326              ;	---------------------------------
1330  0326              ; Function player_restart
1331  0326              ; ---------------------------------
1332  0326              _player_restart:
1333  0326  CD 00 00    	call	___sdcc_enter_ix
1334  0329  F5          	push	af
1335  032A  4D          	ld	c, l
1336  032B  21 00 00    	ld	hl,_ay_effect_15
1337  032E  CD 00 00    	call	_ay_fx_play
1338  0331  C5          	push	bc
1339  0332  21 0E 70    	ld	hl,0x700e
1340  0335  E5          	push	hl
1341  0336  21 07 00    	ld	hl,0x0007
1342  0339  E5          	push	hl
1343  033A  CD 00 00    	call	_player_init
1344  033D  F1          	pop	af
1345  033E  F1          	pop	af
1346  033F  C1          	pop	bc
1347  0340  11 00 00    	ld	de,_state+0
1348  0343  69          	ld	l,c
1349  0344  26 00       	ld	h,0x00
1350  0346  19          	add	hl, de
1351  0347  CB E6       	set	4, (hl)
1352  0349  11 00 00    	ld	de,_state_a+0
1353  034C  69          	ld	l,c
1354  034D  26 00       	ld	h,0x00
1355  034F  19          	add	hl, de
1356  0350  CB C6       	set	0, (hl)
1357  0352  11 00 00    	ld	de,_spr_timer+0
1358  0355  69          	ld	l, c
1359  0356  26 00       	ld	h,0x00
1360  0358  29          	add	hl, hl
1361  0359  19          	add	hl,de
1362  035A  E3          	ex	(sp), hl
1363  035B  E1          	pop	hl
1364  035C  ED 5B 00 00 	ld	de,(_curr_time)
1365  0360  E5          	push	hl
1366  0361  73          	ld	(hl), e
1367  0362  23          	inc	hl
1368  0363  72          	ld	(hl), d
1369  0364  11 00 00    	ld	de,_sprite_speed_alt+0
1370  0367  69          	ld	l,c
1371  0368  26 00       	ld	h,0x00
1372  036A  19          	add	hl, de
1373  036B  F1          	pop	af
1374  036C  36 08       	ld	(hl),0x08
1375  036E  DD E1       	pop	ix
1376  0370  C9          	ret
1377  0371              	SECTION code_compiler
1378  0371              ;	---------------------------------
1379  0371              ; Function player_turn
1380  0371              ; ---------------------------------
1381  0371              _player_turn:
1382  0371  21 00 00    	ld	hl,_sprite
1383  0374  CD 00 00    	call	_spr_chktime
1384  0377  7D          	ld	a, l
1385  0378  B7          	or	a, a
1386  0379  C8          	ret	Z
1387  037A  21 00 00    	ld	hl,_k1
1388  037D  E5          	push	hl
1389  037E  2A 00 00    	ld	hl,(_joyfunc1)
1390  0381  CD 00 00    	call	___sdcc_call_hl
1391  0384  F1          	pop	af
1392  0385  7D          	ld	a,l
1393  0386  32 00 00    	ld	(_dirs),a
1394  0389  CD 8F 03    	call	_player_move
1395  038C  C3 FC 00    	jp  _player_collision
1396  038F              	SECTION code_compiler
1397  038F              ;	---------------------------------
1398  038F              ; Function player_move
1399  038F              ; ---------------------------------
1400  038F              _player_move:
1401  038F  2A 00 00    	ld	hl,(_sprite)
1402  0392  26 00       	ld	h,0x00
1403  0394  01 00 00    	ld	bc,_lin
1404  0397  09          	add	hl,bc
1405  0398  7E          	ld	a,(hl)
1406  0399  32 00 00    	ld	(_s_lin0),a
1407  039C  2A 00 00    	ld	hl,(_sprite)
1408  039F  26 00       	ld	h,0x00
1409  03A1  01 00 00    	ld	bc,_col
1410  03A4  09          	add	hl,bc
1411  03A5  7E          	ld	a,(hl)
1412  03A6  32 00 00    	ld	(_s_col0),a
1413  03A9  2A 00 00    	ld	hl,(_sprite)
1414  03AC  26 00       	ld	h,0x00
1415  03AE  01 00 00    	ld	bc,_tile
1416  03B1  09          	add	hl,bc
1417  03B2  4E          	ld	c, (hl)
1418  03B3  3A 00 00    	ld	a,(_sprite)
1419  03B6  5F          	ld	e,a
1420  03B7  16 00       	ld	d,0x00
1421  03B9  21 00 00    	ld	hl,_colint
1422  03BC  19          	add	hl,de
1423  03BD  7E          	ld	a,(hl)
1424  03BE  81          	add	a,c
1425  03BF  32 00 00    	ld	(_s_tile0),a
1426  03C2  2A 00 00    	ld	hl,(_sprite)
1427  03C5  26 00       	ld	h,0x00
1428  03C7  01 00 00    	ld	bc,_state
1429  03CA  09          	add	hl,bc
1430  03CB  7E          	ld	a,(hl)
1431  03CC  CB 47       	bit	0,a
1432  03CE  32 00 00    	ld	(_s_state),a
1433  03D1  20 07       	jr	NZ,l_player_move_00113
1434  03D3  21 00 00    	ld	hl,_s_state
1435  03D6  CB 4E       	bit	1, (hl)
1436  03D8  28 46       	jr	Z,l_player_move_00114
1437  03DA              l_player_move_00113:
1438  03DA  CD 26 07    	call	_player_fire
1439  03DD  3A 00 00    	ld	a,(_player_vel_y)
1440  03E0  21 00 00    	ld	hl,_player_vel_y1
1441  03E3  96          	sub	a, (hl)
1442  03E4  E2 E9 03    	jp	PO, l_player_move_00162
1443  03E7  EE 80       	xor	a,0x80
1444  03E9              l_player_move_00162:
1445  03E9  F2 0C 04    	jp	P, l_player_move_00106
1446  03EC  21 00 00    	ld	hl,_dirs
1447  03EF  CB 56       	bit	2, (hl)
1448  03F1  28 09       	jr	Z,l_player_move_00102
1449  03F3  21 00 00    	ld	hl,_s_state
1450  03F6  7E          	ld	a,(hl)
1451  03F7  F6 08       	or	a,0x08
1452  03F9  E6 FB       	and	a,0xfb
1453  03FB  77          	ld	(hl),a
1454  03FC              l_player_move_00102:
1455  03FC  21 00 00    	ld	hl,_dirs
1456  03FF  CB 4E       	bit	1, (hl)
1457  0401  28 09       	jr	Z,l_player_move_00106
1458  0403  21 00 00    	ld	hl,_s_state
1459  0406  7E          	ld	a,(hl)
1460  0407  F6 04       	or	a,0x04
1461  0409  E6 F7       	and	a,0xf7
1462  040B  77          	ld	(hl),a
1463  040C              l_player_move_00106:
1464  040C  CD F3 0D    	call	_player_move_jump
1465  040F  7D          	ld	a, l
1466  0410  B7          	or	a, a
1467  0411  28 2E       	jr	Z,l_player_move_00115
1468  0413  3A 00 00    	ld	a,(_player_over_stair)
1469  0416  B7          	or	a, a
1470  0417  20 28       	jr	NZ,l_player_move_00115
1471  0419  2E 60       	ld	l,0x60
1472  041B  CD 5A 05    	call	_player_tile
1473  041E  18 21       	jr	l_player_move_00115
1474  0420              l_player_move_00114:
1475  0420  CD B0 05    	call	_player_move_input
1476  0423  7D          	ld	a, l
1477  0424  B7          	or	a, a
1478  0425  20 17       	jr	NZ,l_player_move_00112
1479  0427  2A 00 00    	ld	hl,(_sprite)
1480  042A  26 00       	ld	h,0x00
1481  042C  01 00 00    	ld	bc,_colint
1482  042F  09          	add	hl,bc
1483  0430  AF          	xor	a,a
1484  0431  77          	ld	(hl),a
1485  0432  2E 70       	ld	l,0x70
1486  0434  CD 5A 05    	call	_player_tile
1487  0437  21 00 00    	ld	hl,_s_state
1488  043A  7E          	ld	a,(hl)
1489  043B  E6 F3       	and	a,+(0xf7&0xfb)
1490  043D  77          	ld	(hl),a
1491  043E              l_player_move_00112:
1492  043E  CD C7 0C    	call	_player_check_floor
1493  0441              l_player_move_00115:
1494  0441  CD 00 00    	call	_spr_redraw
1495  0444  7D          	ld	a, l
1496  0445  B7          	or	a, a
1497  0446  28 03       	jr	Z,l_player_move_00118
1498  0448  CD 69 07    	call	_player_check_map
1499  044B              l_player_move_00118:
1500  044B  3A 00 00    	ld	a,(_player_hit_lin)
1501  044E  B7          	or	a, a
1502  044F  28 03       	jr	Z,l_player_move_00120
1503  0451  CD 2A 0C    	call	_player_hit_platform_clear
1504  0454              l_player_move_00120:
1505  0454  2A 00 00    	ld	hl,(_sprite)
1506  0457  26 00       	ld	h,0x00
1507  0459  01 00 00    	ld	bc,_state
1508  045C  09          	add	hl,bc
1509  045D  3A 00 00    	ld	a,(_s_state)
1510  0460  77          	ld	(hl),a
1511  0461  2E 00       	ld	l,0x00
1512  0463  C9          	ret
1513  0464              	SECTION code_compiler
1514  0464              ;	---------------------------------
1515  0464              ; Function player_check_stairs_down
1516  0464              ; ---------------------------------
1517  0464              _player_check_stairs_down:
1518  0464  CD 00 00    	call	___sdcc_enter_ix
1519  0467  3B          	dec	sp
1520  0468  2A 00 00    	ld	hl,(_sprite)
1521  046B  26 00       	ld	h,0x00
1522  046D  5D          	ld	e,l
1523  046E  01 00 00    	ld	bc,_col
1524  0471  09          	add	hl,bc
1525  0472  46          	ld	b,(hl)
1526  0473  16 00       	ld	d,0x00
1527  0475  21 00 00    	ld	hl,_lin
1528  0478  19          	add	hl,de
1529  0479  7E          	ld	a,(hl)
1530  047A  C6 10       	add	a,0x10
1531  047C  4F          	ld	c,a
1532  047D  C5          	push	bc
1533  047E  CD 00 00    	call	_spr_calc_index
1534  0481  F1          	pop	af
1535  0482  7D          	ld	a,l
1536  0483  32 00 00    	ld	(_sprite_curr_index),a
1537  0486  4F          	ld	c,a
1538  0487  06 00       	ld	b,0x00
1539  0489  21 00 00    	ld	hl,_scr_map
1540  048C  09          	add	hl,bc
1541  048D  7E          	ld	a,(hl)
1542  048E  4F          	ld	c,a
1543  048F  D6 44       	sub	a,0x44
1544  0491  38 05       	jr	C,l_player_check_stairs_down_00105
1545  0493  3E 47       	ld	a,0x47
1546  0495  91          	sub	a, c
1547  0496  30 04       	jr	NC,l_player_check_stairs_down_00106
1548  0498              l_player_check_stairs_down_00105:
1549  0498  3E 00       	ld	a,0x00
1550  049A  18 02       	jr	l_player_check_stairs_down_00107
1551  049C              l_player_check_stairs_down_00106:
1552  049C  3E 01       	ld	a,0x01
1553  049E              l_player_check_stairs_down_00107:
1554  049E  B7          	or	a, a
1555  049F  28 05       	jr	Z,l_player_check_stairs_down_00103
1556  04A1  21 00 00    	ld	hl,_player_over_stair
1557  04A4  36 01       	ld	(hl),0x01
1558  04A6              l_player_check_stairs_down_00103:
1559  04A6  33          	inc	sp
1560  04A7  DD E1       	pop	ix
1561  04A9  C9          	ret
1562  04AA              	SECTION code_compiler
1563  04AA              ;	---------------------------------
1564  04AA              ; Function player_check_stairs
1565  04AA              ; ---------------------------------
1566  04AA              _player_check_stairs:
1567  04AA  CD 00 00    	call	___sdcc_enter_ix
1568  04AD  F5          	push	af
1569  04AE  4D          	ld	c, l
1570  04AF  2A 00 00    	ld	hl,(_sprite)
1571  04B2  26 00       	ld	h,0x00
1572  04B4  11 00 00    	ld	de,_col
1573  04B7  19          	add	hl,de
1574  04B8  7E          	ld	a,(hl)
1575  04B9  81          	add	a,c
1576  04BA  5F          	ld	e,a
1577  04BB  3E 00       	ld	a,+((_lin) & 0xFF)
1578  04BD  21 00 00    	ld	hl,_sprite
1579  04C0  86          	add	a, (hl)
1580  04C1  6F          	ld	l, a
1581  04C2  3E 00       	ld	a, +((_lin) / 256)
1582  04C4  CE 00       	adc	a,0x00
1583  04C6  67          	ld	h, a
1584  04C7  46          	ld	b, (hl)
1585  04C8  C5          	push	bc
1586  04C9  7B          	ld	a, e
1587  04CA  48          	ld	c,b
1588  04CB  47          	ld	b,a
1589  04CC  C5          	push	bc
1590  04CD  CD 00 00    	call	_spr_calc_index
1591  04D0  F1          	pop	af
1592  04D1  C1          	pop	bc
1593  04D2  7D          	ld	a,l
1594  04D3  32 00 00    	ld	(_sprite_curr_index),a
1595  04D6  5F          	ld	e,a
1596  04D7  16 00       	ld	d,0x00
1597  04D9  21 00 00    	ld	hl,_scr_map
1598  04DC  19          	add	hl,de
1599  04DD  7E          	ld	a,(hl)
1600  04DE  47          	ld	b,a
1601  04DF  D6 44       	sub	a,0x44
1602  04E1  38 05       	jr	C,l_player_check_stairs_00111
1603  04E3  3E 47       	ld	a,0x47
1604  04E5  90          	sub	a, b
1605  04E6  30 04       	jr	NC,l_player_check_stairs_00112
1606  04E8              l_player_check_stairs_00111:
1607  04E8  1E 00       	ld	e,0x00
1608  04EA  18 02       	jr	l_player_check_stairs_00113
1609  04EC              l_player_check_stairs_00112:
1610  04EC  1E 01       	ld	e,0x01
1611  04EE              l_player_check_stairs_00113:
1612  04EE  DD 73 FE    	ld	(ix-2),e
1613  04F1  2A 00 00    	ld	hl,(_sprite)
1614  04F4  26 00       	ld	h,0x00
1615  04F6  11 00 00    	ld	de,_col
1616  04F9  19          	add	hl,de
1617  04FA  7E          	ld	a,(hl)
1618  04FB  81          	add	a,c
1619  04FC  4F          	ld	c,a
1620  04FD  3A 00 00    	ld	a,(_sprite)
1621  0500  5F          	ld	e,a
1622  0501  16 00       	ld	d,0x00
1623  0503  21 00 00    	ld	hl,_lin
1624  0506  19          	add	hl,de
1625  0507  7E          	ld	a,(hl)
1626  0508  C6 0F       	add	a,0x0f
1627  050A  47          	ld	b, a
1628  050B  79          	ld	a, c
1629  050C  48          	ld	c,b
1630  050D  47          	ld	b,a
1631  050E  C5          	push	bc
1632  050F  CD 00 00    	call	_spr_calc_index
1633  0512  F1          	pop	af
1634  0513  7D          	ld	a,l
1635  0514  32 00 00    	ld	(_sprite_curr_index),a
1636  0517  4F          	ld	c,a
1637  0518  06 00       	ld	b,0x00
1638  051A  21 00 00    	ld	hl,_scr_map
1639  051D  09          	add	hl,bc
1640  051E  7E          	ld	a,(hl)
1641  051F  4F          	ld	c,a
1642  0520  D6 44       	sub	a,0x44
1643  0522  38 05       	jr	C,l_player_check_stairs_00114
1644  0524  3E 47       	ld	a,0x47
1645  0526  91          	sub	a, c
1646  0527  30 04       	jr	NC,l_player_check_stairs_00115
1647  0529              l_player_check_stairs_00114:
1648  0529  0E 00       	ld	c,0x00
1649  052B  18 02       	jr	l_player_check_stairs_00116
1650  052D              l_player_check_stairs_00115:
1651  052D  0E 01       	ld	c,0x01
1652  052F              l_player_check_stairs_00116:
1653  052F  DD 7E FE    	ld	a,(ix-2)
1654  0532  B7          	or	a,a
1655  0533  20 03       	jr	NZ,l_player_check_stairs_00105
1656  0535  B1          	or	a,c
1657  0536  28 10       	jr	Z,l_player_check_stairs_00106
1658  0538              l_player_check_stairs_00105:
1659  0538  21 00 00    	ld	hl,_player_over_stair
1660  053B  7E          	ld	a, (hl)
1661  053C  B7          	or	a, a
1662  053D  20 17       	jr	NZ,l_player_check_stairs_00109
1663  053F  36 01       	ld	(hl),0x01
1664  0541  2E 72       	ld	l,0x72
1665  0543  CD 5A 05    	call	_player_tile
1666  0546  18 0E       	jr	l_player_check_stairs_00109
1667  0548              l_player_check_stairs_00106:
1668  0548  21 00 00    	ld	hl,_player_over_stair
1669  054B  7E          	ld	a, (hl)
1670  054C  B7          	or	a, a
1671  054D  28 07       	jr	Z,l_player_check_stairs_00109
1672  054F  36 00       	ld	(hl),0x00
1673  0551  2E 60       	ld	l,0x60
1674  0553  CD 5A 05    	call	_player_tile
1675  0556              l_player_check_stairs_00109:
1676  0556  F1          	pop	af
1677  0557  DD E1       	pop	ix
1678  0559  C9          	ret
1679  055A              	SECTION code_compiler
1680  055A              ;	---------------------------------
1681  055A              ; Function player_tile
1682  055A              ; ---------------------------------
1683  055A              _player_tile:
1684  055A  45          	ld	b, l
1685  055B  3A 00 00    	ld	a,(_player_over_stair)
1686  055E  B7          	or	a, a
1687  055F  28 0D       	jr	Z,l_player_tile_00105
1688  0561  2A 00 00    	ld	hl,(_sprite)
1689  0564  26 00       	ld	h,0x00
1690  0566  01 00 00    	ld	bc,_tile
1691  0569  09          	add	hl,bc
1692  056A  36 72       	ld	(hl),0x72
1693  056C  18 41       	jr	l_player_tile_00107
1694  056E              l_player_tile_00105:
1695  056E  78          	ld	a, b
1696  056F  D6 70       	sub	a,0x70
1697  0571  20 1F       	jr	NZ,l_player_tile_00102
1698  0573  2A 00 00    	ld	hl,(_sprite)
1699  0576  26 00       	ld	h,0x00
1700  0578  11 00 00    	ld	de,_tile
1701  057B  19          	add	hl,de
1702  057C  E5          	push	hl
1703  057D  3E 01       	ld	a,0x01
1704  057F  21 00 00    	ld	hl,_sprite
1705  0582  F5          	push	af
1706  0583  33          	inc	sp
1707  0584  7E          	ld	a, (hl)
1708  0585  48          	ld	c,b
1709  0586  47          	ld	b,a
1710  0587  C5          	push	bc
1711  0588  CD 00 00    	call	_spr_tile_dir
1712  058B  F1          	pop	af
1713  058C  33          	inc	sp
1714  058D  D1          	pop	de
1715  058E  7D          	ld	a,l
1716  058F  12          	ld	(de), a
1717  0590  18 1D       	jr	l_player_tile_00107
1718  0592              l_player_tile_00102:
1719  0592  2A 00 00    	ld	hl,(_sprite)
1720  0595  26 00       	ld	h,0x00
1721  0597  11 00 00    	ld	de,_tile
1722  059A  19          	add	hl,de
1723  059B  E5          	push	hl
1724  059C  3E 08       	ld	a,0x08
1725  059E  21 00 00    	ld	hl,_sprite
1726  05A1  F5          	push	af
1727  05A2  33          	inc	sp
1728  05A3  7E          	ld	a, (hl)
1729  05A4  48          	ld	c,b
1730  05A5  47          	ld	b,a
1731  05A6  C5          	push	bc
1732  05A7  CD 00 00    	call	_spr_tile_dir
1733  05AA  F1          	pop	af
1734  05AB  33          	inc	sp
1735  05AC  D1          	pop	de
1736  05AD  7D          	ld	a,l
1737  05AE  12          	ld	(de), a
1738  05AF              l_player_tile_00107:
1739  05AF  C9          	ret
1740  05B0              	SECTION code_compiler
1741  05B0              ;	---------------------------------
1742  05B0              ; Function player_move_input
1743  05B0              ; ---------------------------------
1744  05B0              _player_move_input:
1745  05B0  CD BD 00    	call	_player_check_input
1746  05B3  7D          	ld	a, l
1747  05B4  B7          	or	a, a
1748  05B5  CA 23 07    	jp	Z, l_player_move_input_00136
1749  05B8  CD 26 07    	call	_player_fire
1750  05BB  7D          	ld	a, l
1751  05BC  B7          	or	a, a
1752  05BD  28 0A       	jr	Z,l_player_move_input_00102
1753  05BF  21 00 00    	ld	hl,_dirs
1754  05C2  36 00       	ld	(hl),0x00
1755  05C4  2E 00       	ld	l,0x00
1756  05C6  C3 25 07    	jp	l_player_move_input_00137
1757  05C9              l_player_move_input_00102:
1758  05C9  21 00 00    	ld	hl,_dirs
1759  05CC  CB 7E       	bit	7, (hl)
1760  05CE  28 67       	jr	Z,l_player_move_input_00106
1761  05D0  21 00 00    	ld	hl,_player_vel_inc
1762  05D3  36 01       	ld	(hl),0x01
1763  05D5  CD 00 00    	call	_ay_is_playing
1764  05D8  7D          	ld	a, l
1765  05D9  D6 03       	sub	a,0x03
1766  05DB  28 06       	jr	Z,l_player_move_input_00104
1767  05DD  21 00 00    	ld	hl,_ay_effect_03
1768  05E0  CD 00 00    	call	_ay_fx_play
1769  05E3              l_player_move_input_00104:
1770  05E3  21 00 00    	ld	hl,_player_over_stair
1771  05E6  36 00       	ld	(hl),0x00
1772  05E8  CD 00 00    	call	_sound_jump
1773  05EB  21 00 00    	ld	hl,_s_state
1774  05EE  7E          	ld	a,(hl)
1775  05EF  F6 01       	or	a,0x01
1776  05F1  E6 FD       	and	a,0xfd
1777  05F3  77          	ld	(hl),a
1778  05F4  2A 00 00    	ld	hl,(_sprite)
1779  05F7  26 00       	ld	h,0x00
1780  05F9  01 00 00    	ld	bc,_jump_lin
1781  05FC  09          	add	hl,bc
1782  05FD  4D          	ld	c,l
1783  05FE  44          	ld	b,h
1784  05FF  2A 00 00    	ld	hl,(_sprite)
1785  0602  26 00       	ld	h,0x00
1786  0604  11 00 00    	ld	de,_lin
1787  0607  19          	add	hl,de
1788  0608  7E          	ld	a,(hl)
1789  0609  02          	ld	(bc),a
1790  060A  2A 00 00    	ld	hl,(_sprite)
1791  060D  26 00       	ld	h,0x00
1792  060F  01 00 00    	ld	bc,_state
1793  0612  09          	add	hl,bc
1794  0613  3A 00 00    	ld	a,(_s_state)
1795  0616  77          	ld	(hl),a
1796  0617  2E 64       	ld	l,0x64
1797  0619  CD 5A 05    	call	_player_tile
1798  061C  2A 00 00    	ld	hl,(_sprite)
1799  061F  26 00       	ld	h,0x00
1800  0621  01 00 00    	ld	bc,_sprite_speed_alt
1801  0624  09          	add	hl,bc
1802  0625  36 02       	ld	(hl),0x02
1803  0627  21 00 00    	ld	hl,_player_slide
1804  062A  36 00       	ld	(hl),0x00
1805  062C  3A 00 00    	ld	a,(_player_vel_y0)
1806  062F  32 00 00    	ld	(_player_vel_y),a
1807  0632  2E 01       	ld	l,0x01
1808  0634  C3 25 07    	jp	l_player_move_input_00137
1809  0637              l_player_move_input_00106:
1810  0637  21 00 00    	ld	hl,_dirs
1811  063A  CB 5E       	bit	3, (hl)
1812  063C  28 33       	jr	Z,l_player_move_input_00110
1813  063E  21 00 00    	ld	hl,_s_state
1814  0641  7E          	ld	a,(hl)
1815  0642  F6 04       	or	a,0x04
1816  0644  E6 F7       	and	a,0xf7
1817  0646  77          	ld	(hl),a
1818  0647  01 00 00    	ld	bc,_state_a+0
1819  064A  79          	ld	a, c
1820  064B  21 00 00    	ld	hl,_sprite
1821  064E  86          	add	a, (hl)
1822  064F  5F          	ld	e, a
1823  0650  78          	ld	a, b
1824  0651  CE 00       	adc	a,0x00
1825  0653  57          	ld	d, a
1826  0654  1A          	ld	a, (de)
1827  0655  F6 10       	or	a,0x10
1828  0657  12          	ld	(de), a
1829  0658  79          	ld	a, c
1830  0659  86          	add	a, (hl)
1831  065A  4F          	ld	c, a
1832  065B  78          	ld	a, b
1833  065C  CE 00       	adc	a,0x00
1834  065E  47          	ld	b, a
1835  065F  0A          	ld	a, (bc)
1836  0660  E6 F7       	and	a,0xf7
1837  0662  02          	ld	(bc), a
1838  0663  3A 00 00    	ld	a,(_player_over_stair)
1839  0666  B7          	or	a, a
1840  0667  28 05       	jr	Z,l_player_move_input_00108
1841  0669  2E 00       	ld	l,0x00
1842  066B  CD AA 04    	call	_player_check_stairs
1843  066E              l_player_move_input_00108:
1844  066E  CD 00 00    	call	_spr_move_horizontal
1845  0671              l_player_move_input_00110:
1846  0671  21 00 00    	ld	hl,_dirs
1847  0674  CB 56       	bit	2, (hl)
1848  0676  28 33       	jr	Z,l_player_move_input_00114
1849  0678  21 00 00    	ld	hl,_s_state
1850  067B  7E          	ld	a,(hl)
1851  067C  F6 08       	or	a,0x08
1852  067E  E6 FB       	and	a,0xfb
1853  0680  77          	ld	(hl),a
1854  0681  01 00 00    	ld	bc,_state_a+0
1855  0684  79          	ld	a, c
1856  0685  21 00 00    	ld	hl,_sprite
1857  0688  86          	add	a, (hl)
1858  0689  5F          	ld	e, a
1859  068A  78          	ld	a, b
1860  068B  CE 00       	adc	a,0x00
1861  068D  57          	ld	d, a
1862  068E  1A          	ld	a, (de)
1863  068F  F6 08       	or	a,0x08
1864  0691  12          	ld	(de), a
1865  0692  79          	ld	a, c
1866  0693  86          	add	a, (hl)
1867  0694  4F          	ld	c, a
1868  0695  78          	ld	a, b
1869  0696  CE 00       	adc	a,0x00
1870  0698  47          	ld	b, a
1871  0699  0A          	ld	a, (bc)
1872  069A  E6 EF       	and	a,0xef
1873  069C  02          	ld	(bc), a
1874  069D  3A 00 00    	ld	a,(_player_over_stair)
1875  06A0  B7          	or	a, a
1876  06A1  28 05       	jr	Z,l_player_move_input_00112
1877  06A3  2E 00       	ld	l,0x00
1878  06A5  CD AA 04    	call	_player_check_stairs
1879  06A8              l_player_move_input_00112:
1880  06A8  CD 00 00    	call	_spr_move_horizontal
1881  06AB              l_player_move_input_00114:
1882  06AB  21 00 00    	ld	hl,_dirs
1883  06AE  CB 46       	bit	0, (hl)
1884  06B0  28 2B       	jr	Z,l_player_move_input_00124
1885  06B2  2E 00       	ld	l,0x00
1886  06B4  CD AA 04    	call	_player_check_stairs
1887  06B7  3A 00 00    	ld	a,(_player_over_stair)
1888  06BA  B7          	or	a, a
1889  06BB  28 0E       	jr	Z,l_player_move_input_00121
1890  06BD  CD 00 00    	call	_spr_move_up
1891  06C0  7D          	ld	a, l
1892  06C1  B7          	or	a, a
1893  06C2  28 19       	jr	Z,l_player_move_input_00124
1894  06C4  21 00 00    	ld	hl,_player_over_stair
1895  06C7  36 00       	ld	(hl),0x00
1896  06C9  18 12       	jr	l_player_move_input_00124
1897  06CB              l_player_move_input_00121:
1898  06CB  21 00 00    	ld	hl,_dirs
1899  06CE  CB 5E       	bit	3, (hl)
1900  06D0  20 0B       	jr	NZ,l_player_move_input_00124
1901  06D2  21 00 00    	ld	hl,_dirs
1902  06D5  CB 56       	bit	2, (hl)
1903  06D7  20 04       	jr	NZ,l_player_move_input_00124
1904  06D9  2E 00       	ld	l,0x00
1905  06DB  18 48       	jr	l_player_move_input_00137
1906  06DD              l_player_move_input_00124:
1907  06DD  21 00 00    	ld	hl,_dirs
1908  06E0  CB 4E       	bit	1, (hl)
1909  06E2  28 29       	jr	Z,l_player_move_input_00134
1910  06E4  CD 64 04    	call	_player_check_stairs_down
1911  06E7  3A 00 00    	ld	a,(_player_over_stair)
1912  06EA  B7          	or	a, a
1913  06EB  28 0E       	jr	Z,l_player_move_input_00131
1914  06ED  CD 00 00    	call	_spr_move_down
1915  06F0  7D          	ld	a, l
1916  06F1  B7          	or	a, a
1917  06F2  28 19       	jr	Z,l_player_move_input_00134
1918  06F4  21 00 00    	ld	hl,_player_over_stair
1919  06F7  36 00       	ld	(hl),0x00
1920  06F9  18 12       	jr	l_player_move_input_00134
1921  06FB              l_player_move_input_00131:
1922  06FB  21 00 00    	ld	hl,_dirs
1923  06FE  CB 5E       	bit	3, (hl)
1924  0700  20 0B       	jr	NZ,l_player_move_input_00134
1925  0702  21 00 00    	ld	hl,_dirs
1926  0705  CB 56       	bit	2, (hl)
1927  0707  20 04       	jr	NZ,l_player_move_input_00134
1928  0709  2E 00       	ld	l,0x00
1929  070B  18 18       	jr	l_player_move_input_00137
1930  070D              l_player_move_input_00134:
1931  070D  2A 00 00    	ld	hl,(_sprite)
1932  0710  26 00       	ld	h,0x00
1933  0712  01 00 00    	ld	bc,_state
1934  0715  09          	add	hl,bc
1935  0716  3A 00 00    	ld	a,(_s_state)
1936  0719  77          	ld	(hl),a
1937  071A  2E 60       	ld	l,0x60
1938  071C  CD 5A 05    	call	_player_tile
1939  071F  2E 01       	ld	l,0x01
1940  0721  18 02       	jr	l_player_move_input_00137
1941  0723              l_player_move_input_00136:
1942  0723  2E 00       	ld	l,0x00
1943  0725              l_player_move_input_00137:
1944  0725  C9          	ret
1945  0726              	SECTION code_compiler
1946  0726              ;	---------------------------------
1947  0726              ; Function player_fire
1948  0726              ; ---------------------------------
1949  0726              _player_fire:
1950  0726  21 00 00    	ld	hl,_dirs
1951  0729  CB 7E       	bit	7, (hl)
1952  072B  28 39       	jr	Z,l_player_fire_00108
1953  072D  21 00 00    	ld	hl,_dirs
1954  0730  CB 4E       	bit	1, (hl)
1955  0732  28 32       	jr	Z,l_player_fire_00108
1956  0734  21 00 00    	ld	hl,_player_mana
1957  0737  7E          	ld	a, (hl)
1958  0738  B7          	or	a, a
1959  0739  28 27       	jr	Z,l_player_fire_00105
1960  073B  3A 07 00    	ld	a,(_bullet_col + 0x0007)
1961  073E  3C          	inc	a
1962  073F  20 21       	jr	NZ,l_player_fire_00105
1963  0741  3E 05       	ld	a,0x05
1964  0743  96          	sub	a, (hl)
1965  0744  30 0C       	jr	NC,l_player_fire_00102
1966  0746  CD 00 00    	call	_sound_hit_enemy
1967  0749  21 00 00    	ld	hl,_player_mana
1968  074C  7E          	ld	a, (hl)
1969  074D  C6 FB       	add	a,0xfb
1970  074F  77          	ld	(hl), a
1971  0750  18 05       	jr	l_player_fire_00103
1972  0752              l_player_fire_00102:
1973  0752  21 00 00    	ld	hl,_player_mana
1974  0755  36 00       	ld	(hl),0x00
1975  0757              l_player_fire_00103:
1976  0757  CD 00 00    	call	_game_update_stats
1977  075A  21 07 78    	ld	hl,0x7807
1978  075D  E5          	push	hl
1979  075E  CD 00 00    	call	_game_shoot_fire
1980  0761  F1          	pop	af
1981  0762              l_player_fire_00105:
1982  0762  2E 01       	ld	l,0x01
1983  0764  18 02       	jr	l_player_fire_00110
1984  0766              l_player_fire_00108:
1985  0766  2E 00       	ld	l,0x00
1986  0768              l_player_fire_00110:
1987  0768  C9          	ret
1988  0769              	SECTION code_compiler
1989  0769              ;	---------------------------------
1990  0769              ; Function player_check_map
1991  0769              ; ---------------------------------
1992  0769              _player_check_map:
1993  0769  2A 00 00    	ld	hl,(_sprite)
1994  076C  26 00       	ld	h,0x00
1995  076E  01 00 00    	ld	bc,_col
1996  0771  09          	add	hl,bc
1997  0772  4E          	ld	c, (hl)
1998  0773  3A 00 00    	ld	a,(_sprite)
1999  0776  5F          	ld	e,a
2000  0777  16 00       	ld	d,0x00
2001  0779  21 00 00    	ld	hl,_lin
2002  077C  19          	add	hl,de
2003  077D  5E          	ld	e, (hl)
2004  077E  51          	ld	d,c
2005  077F  D5          	push	de
2006  0780  CD 00 00    	call	_spr_calc_index
2007  0783  F1          	pop	af
2008  0784  7D          	ld	a,l
2009  0785  32 00 00    	ld	(_sprite_curr_index),a
2010  0788  2A 00 00    	ld	hl,(_sprite)
2011  078B  26 00       	ld	h,0x00
2012  078D  01 00 00    	ld	bc,_col
2013  0790  09          	add	hl,bc
2014  0791  4E          	ld	c, (hl)
2015  0792  3A 00 00    	ld	a,(_sprite)
2016  0795  5F          	ld	e,a
2017  0796  16 00       	ld	d,0x00
2018  0798  21 00 00    	ld	hl,_lin
2019  079B  19          	add	hl,de
2020  079C  7E          	ld	a,(hl)
2021  079D  E6 0F       	and	a,0x0f
2022  079F  CB 41       	bit	0, c
2023  07A1  20 17       	jr	NZ,l_player_check_map_00108
2024  07A3  B7          	or	a, a
2025  07A4  20 05       	jr	NZ,l_player_check_map_00102
2026  07A6  CD E5 07    	call	_player_pick_item
2027  07A9  18 39       	jr	l_player_check_map_00110
2028  07AB              l_player_check_map_00102:
2029  07AB  CD E5 07    	call	_player_pick_item
2030  07AE  21 00 00    	ld	hl,_sprite_curr_index
2031  07B1  7E          	ld	a, (hl)
2032  07B2  C6 10       	add	a,0x10
2033  07B4  77          	ld	(hl), a
2034  07B5  CD E5 07    	call	_player_pick_item
2035  07B8  18 2A       	jr	l_player_check_map_00110
2036  07BA              l_player_check_map_00108:
2037  07BA  B7          	or	a, a
2038  07BB  20 0C       	jr	NZ,l_player_check_map_00105
2039  07BD  CD E5 07    	call	_player_pick_item
2040  07C0  21 00 00    	ld	hl,_sprite_curr_index
2041  07C3  34          	inc	(hl)
2042  07C4  CD E5 07    	call	_player_pick_item
2043  07C7  18 1B       	jr	l_player_check_map_00110
2044  07C9              l_player_check_map_00105:
2045  07C9  CD E5 07    	call	_player_pick_item
2046  07CC  21 00 00    	ld	hl,_sprite_curr_index
2047  07CF  34          	inc	(hl)
2048  07D0  CD E5 07    	call	_player_pick_item
2049  07D3  21 00 00    	ld	hl,_sprite_curr_index
2050  07D6  7E          	ld	a, (hl)
2051  07D7  C6 0F       	add	a,0x0f
2052  07D9  77          	ld	(hl), a
2053  07DA  CD E5 07    	call	_player_pick_item
2054  07DD  21 00 00    	ld	hl,_sprite_curr_index
2055  07E0  34          	inc	(hl)
2056  07E1  CD E5 07    	call	_player_pick_item
2057  07E4              l_player_check_map_00110:
2058  07E4  C9          	ret
2059  07E5              	SECTION code_compiler
2060  07E5              ;	---------------------------------
2061  07E5              ; Function player_pick_item
2062  07E5              ; ---------------------------------
2063  07E5              _player_pick_item:
2064  07E5  2A 00 00    	ld	hl,(_sprite_curr_index)
2065  07E8  26 00       	ld	h,0x00
2066  07EA  01 00 00    	ld	bc,_scr_map
2067  07ED  09          	add	hl,bc
2068  07EE  7E          	ld	a,(hl)
2069  07EF  4F          	ld	c,a
2070  07F0  D6 24       	sub	a,0x24
2071  07F2  DA 7E 09    	jp	C,l_player_pick_item_00129
2072  07F5  3E 2F       	ld	a,0x2f
2073  07F7  91          	sub	a,c
2074  07F8  DA 7E 09    	jp	C,l_player_pick_item_00129
2075  07FB  44          	ld	b,h
2076  07FC  CD 00 00    	call	_ay_reset
2077  07FF  21 00 00    	ld	hl,_ay_effect_10
2078  0802  CD 00 00    	call	_ay_fx_play
2079  0805  C5          	push	bc
2080  0806  CD 00 00    	call	_sound_coin
2081  0809  C1          	pop	bc
2082  080A  2A 00 00    	ld	hl,(_sprite_curr_index)
2083  080D  26 00       	ld	h,0x00
2084  080F  11 00 00    	ld	de,_scr_map
2085  0812  19          	add	hl,de
2086  0813  AF          	xor	a,a
2087  0814  77          	ld	(hl),a
2088  0815  3A 00 00    	ld	a,(_sprite_curr_index)
2089  0818  5F          	ld	e,a
2090  0819  16 00       	ld	d,0x00
2091  081B  C5          	push	bc
2092  081C  D5          	push	de
2093  081D  CD 00 00    	call	_game_obj_set
2094  0820  F1          	pop	af
2095  0821  C1          	pop	bc
2096  0822  3A 00 00    	ld	a,(_sprite_curr_index)
2097  0825  07          	rlca
2098  0826  07          	rlca
2099  0827  07          	rlca
2100  0828  07          	rlca
2101  0829  E6 0F       	and	a,0x0f
2102  082B  07          	rlca
2103  082C  07          	rlca
2104  082D  07          	rlca
2105  082E  07          	rlca
2106  082F  E6 F0       	and	a,0xf0
2107  0831  32 00 00    	ld	(_s_lin1),a
2108  0834  3A 00 00    	ld	a,(_sprite_curr_index)
2109  0837  E6 0F       	and	a,0x0f
2110  0839  87          	add	a, a
2111  083A  32 00 00    	ld	(_s_col1),a
2112  083D  C5          	push	bc
2113  083E  21 00 00    	ld	hl,0x0000
2114  0841  E5          	push	hl
2115  0842  21 84 03    	ld	hl,0x0384
2116  0845  E5          	push	hl
2117  0846  F5          	push	af
2118  0847  33          	inc	sp
2119  0848  3A 00 00    	ld	a,(_s_lin1)
2120  084B  F5          	push	af
2121  084C  33          	inc	sp
2122  084D  CD 00 00    	call	_spr_add_anim
2123  0850  F1          	pop	af
2124  0851  F1          	pop	af
2125  0852  F1          	pop	af
2126  0853  C1          	pop	bc
2127  0854  79          	ld	a, c
2128  0855  D6 24       	sub	a,0x24
2129  0857  DA 7E 09    	jp	C, l_player_pick_item_00129
2130  085A  3E 2F       	ld	a,0x2f
2131  085C  91          	sub	a, c
2132  085D  DA 7E 09    	jp	C, l_player_pick_item_00129
2133  0860  79          	ld	a, c
2134  0861  C6 DC       	add	a,0xdc
2135  0863  4F          	ld	c, a
2136  0864  06 00       	ld	b,0x00
2137  0866  21 6D 08    	ld	hl,l_player_pick_item_00171
2138  0869  09          	add	hl, bc
2139  086A  09          	add	hl, bc
2140  086B  09          	add	hl, bc
2141  086C  E9          	jp	(hl)
2142  086D              l_player_pick_item_00171:
2143  086D  C3 91 08    	jp	l_player_pick_item_00101
2144  0870  C3 A9 08    	jp	l_player_pick_item_00102
2145  0873  C3 C1 08    	jp	l_player_pick_item_00103
2146  0876  C3 D9 08    	jp	l_player_pick_item_00104
2147  0879  C3 F1 08    	jp	l_player_pick_item_00105
2148  087C  C3 03 09    	jp	l_player_pick_item_00107
2149  087F  C3 18 09    	jp	l_player_pick_item_00110
2150  0882  C3 2D 09    	jp	l_player_pick_item_00113
2151  0885  C3 42 09    	jp	l_player_pick_item_00116
2152  0888  C3 57 09    	jp	l_player_pick_item_00119
2153  088B  C3 6C 09    	jp	l_player_pick_item_00122
2154  088E  C3 FA 08    	jp	l_player_pick_item_00106
2155  0891              l_player_pick_item_00101:
2156  0891  21 00 00    	ld	hl,_player_keys
2157  0894  36 01       	ld	(hl),0x01
2158  0896  21 00 00    	ld	hl,_screen_ink
2159  0899  36 07       	ld	(hl),0x07
2160  089B  21 00 00    	ld	hl,___str_0
2161  089E  E5          	push	hl
2162  089F  21 14 14    	ld	hl,0x1414
2163  08A2  E5          	push	hl
2164  08A3  CD 00 00    	call	_zx_print_str
2165  08A6  C3 7E 09    	jp	l_player_pick_item_00129
2166  08A9              l_player_pick_item_00102:
2167  08A9  21 01 00    	ld	hl, +(_player_keys + 0x0001)
2168  08AC  36 01       	ld	(hl),0x01
2169  08AE  21 00 00    	ld	hl,_screen_ink
2170  08B1  36 02       	ld	(hl),0x02
2171  08B3  21 00 00    	ld	hl,___str_0
2172  08B6  E5          	push	hl
2173  08B7  21 14 15    	ld	hl,0x1514
2174  08BA  E5          	push	hl
2175  08BB  CD 00 00    	call	_zx_print_str
2176  08BE  C3 7E 09    	jp	l_player_pick_item_00129
2177  08C1              l_player_pick_item_00103:
2178  08C1  21 02 00    	ld	hl, +(_player_keys + 0x0002)
2179  08C4  36 01       	ld	(hl),0x01
2180  08C6  21 00 00    	ld	hl,_screen_ink
2181  08C9  36 04       	ld	(hl),0x04
2182  08CB  21 00 00    	ld	hl,___str_0
2183  08CE  E5          	push	hl
2184  08CF  21 14 16    	ld	hl,0x1614
2185  08D2  E5          	push	hl
2186  08D3  CD 00 00    	call	_zx_print_str
2187  08D6  C3 7E 09    	jp	l_player_pick_item_00129
2188  08D9              l_player_pick_item_00104:
2189  08D9  21 03 00    	ld	hl, +(_player_keys + 0x0003)
2190  08DC  36 01       	ld	(hl),0x01
2191  08DE  21 00 00    	ld	hl,_screen_ink
2192  08E1  36 05       	ld	(hl),0x05
2193  08E3  21 00 00    	ld	hl,___str_0
2194  08E6  E5          	push	hl
2195  08E7  21 14 17    	ld	hl,0x1714
2196  08EA  E5          	push	hl
2197  08EB  CD 00 00    	call	_zx_print_str
2198  08EE  C3 7E 09    	jp	l_player_pick_item_00129
2199  08F1              l_player_pick_item_00105:
2200  08F1  21 01 00    	ld	hl,0x0001
2201  08F4  CD 63 0C    	call	_player_score_add
2202  08F7  C3 7E 09    	jp	l_player_pick_item_00129
2203  08FA              l_player_pick_item_00106:
2204  08FA  21 0A 00    	ld	hl,0x000a
2205  08FD  CD 63 0C    	call	_player_score_add
2206  0900  C3 7E 09    	jp	l_player_pick_item_00129
2207  0903              l_player_pick_item_00107:
2208  0903  21 00 00    	ld	hl,_player_str
2209  0906  34          	inc	(hl)
2210  0907  21 00 00    	ld	hl,_player_max_vita
2211  090A  7E          	ld	a, (hl)
2212  090B  D6 C8       	sub	a,0xc8
2213  090D  30 6F       	jr	NC,l_player_pick_item_00129
2214  090F  7E          	ld	a, (hl)
2215  0910  C6 0A       	add	a,0x0a
2216  0912  77          	ld	(hl), a
2217  0913  CD 00 00    	call	_game_update_stats
2218  0916  18 66       	jr	l_player_pick_item_00129
2219  0918              l_player_pick_item_00110:
2220  0918  21 00 00    	ld	hl,_player_str
2221  091B  34          	inc	(hl)
2222  091C  21 00 00    	ld	hl,_player_max_vita
2223  091F  7E          	ld	a, (hl)
2224  0920  D6 C8       	sub	a,0xc8
2225  0922  30 5A       	jr	NC,l_player_pick_item_00129
2226  0924  7E          	ld	a, (hl)
2227  0925  C6 0A       	add	a,0x0a
2228  0927  77          	ld	(hl), a
2229  0928  CD 00 00    	call	_game_update_stats
2230  092B  18 51       	jr	l_player_pick_item_00129
2231  092D              l_player_pick_item_00113:
2232  092D  21 00 00    	ld	hl,_player_str
2233  0930  34          	inc	(hl)
2234  0931  21 00 00    	ld	hl,_player_max_vita
2235  0934  7E          	ld	a, (hl)
2236  0935  D6 C8       	sub	a,0xc8
2237  0937  30 45       	jr	NC,l_player_pick_item_00129
2238  0939  7E          	ld	a, (hl)
2239  093A  C6 0A       	add	a,0x0a
2240  093C  77          	ld	(hl), a
2241  093D  CD 00 00    	call	_game_update_stats
2242  0940  18 3C       	jr	l_player_pick_item_00129
2243  0942              l_player_pick_item_00116:
2244  0942  21 00 00    	ld	hl,_player_int
2245  0945  34          	inc	(hl)
2246  0946  21 00 00    	ld	hl,_player_max_mana
2247  0949  7E          	ld	a, (hl)
2248  094A  D6 C8       	sub	a,0xc8
2249  094C  30 30       	jr	NC,l_player_pick_item_00129
2250  094E  7E          	ld	a, (hl)
2251  094F  C6 0A       	add	a,0x0a
2252  0951  77          	ld	(hl), a
2253  0952  CD 00 00    	call	_game_update_stats
2254  0955  18 27       	jr	l_player_pick_item_00129
2255  0957              l_player_pick_item_00119:
2256  0957  21 00 00    	ld	hl,_player_int
2257  095A  34          	inc	(hl)
2258  095B  21 00 00    	ld	hl,_player_max_mana
2259  095E  7E          	ld	a, (hl)
2260  095F  D6 C8       	sub	a,0xc8
2261  0961  30 1B       	jr	NC,l_player_pick_item_00129
2262  0963  7E          	ld	a, (hl)
2263  0964  C6 0A       	add	a,0x0a
2264  0966  77          	ld	(hl), a
2265  0967  CD 00 00    	call	_game_update_stats
2266  096A  18 12       	jr	l_player_pick_item_00129
2267  096C              l_player_pick_item_00122:
2268  096C  21 00 00    	ld	hl,_player_int
2269  096F  34          	inc	(hl)
2270  0970  21 00 00    	ld	hl,_player_max_mana
2271  0973  7E          	ld	a, (hl)
2272  0974  D6 C8       	sub	a,0xc8
2273  0976  D0          	ret	NC
2274  0977  7E          	ld	a, (hl)
2275  0978  C6 0A       	add	a,0x0a
2276  097A  77          	ld	(hl), a
2277  097B  CD 00 00    	call	_game_update_stats
2278  097E              l_player_pick_item_00129:
2279  097E  C9          	ret
2280  097F              	SECTION rodata_compiler
2281  0000              ___str_0:
2282  0000  5D          	DEFM "]"
2283  0001  00          	DEFB 0x00
2284  0002              	SECTION code_compiler
2285  097F              ;	---------------------------------
2286  097F              ; Function player_hit_platform
2287  097F              ; ---------------------------------
2288  097F              _player_hit_platform:
2289  097F  CD 00 00    	call	___sdcc_enter_ix
2290  0982  F5          	push	af
2291  0983  3A 00 00    	ld	a,(_player_hit_lin)
2292  0986  B7          	or	a, a
2293  0987  C2 24 0C    	jp	NZ, l_player_hit_platform_00144
2294  098A  2A 00 00    	ld	hl,(_sprite)
2295  098D  26 00       	ld	h,0x00
2296  098F  01 00 00    	ld	bc,_lin
2297  0992  09          	add	hl,bc
2298  0993  4E          	ld	c,(hl)
2299  0994  3E 10       	ld	a,0x10
2300  0996  91          	sub	a, c
2301  0997  D2 24 0C    	jp	NC, l_player_hit_platform_00144
2302  099A  01 00 00    	ld	bc,_scr_map
2303  099D  2A 00 00    	ld	hl,(_index1)
2304  09A0  09          	add	hl,bc
2305  09A1  7E          	ld	a,(hl)
2306  09A2  D6 45       	sub	a,0x45
2307  09A4  DA 24 0C    	jp	C, l_player_hit_platform_00144
2308  09A7  01 00 00    	ld	bc,_spr_timer+0
2309  09AA  2A 00 00    	ld	hl,(_sprite)
2310  09AD  26 00       	ld	h,0x00
2311  09AF  29          	add	hl, hl
2312  09B0  09          	add	hl,bc
2313  09B1  ED 5B 00 00 	ld	de,(_curr_time)
2314  09B5  73          	ld	(hl),e
2315  09B6  23          	inc	hl
2316  09B7  72          	ld	(hl),d
2317  09B8  2A 00 00    	ld	hl,(_sprite)
2318  09BB  26 00       	ld	h,0x00
2319  09BD  01 00 00    	ld	bc,_lin
2320  09C0  09          	add	hl,bc
2321  09C1  4E          	ld	c,(hl)
2322  09C2  06 00       	ld	b,0x00
2323  09C4  21 F8 FF    	ld	hl,0xfff8
2324  09C7  09          	add	hl,bc
2325  09C8  EB          	ex	de,hl
2326  09C9  06 04       	ld	b,0x04
2327  09CB              l_player_hit_platform_00249:
2328  09CB  CB 2A       	sra	d
2329  09CD  CB 1B       	rr	e
2330  09CF  10 FA       	djnz	l_player_hit_platform_00249
2331  09D1  7B          	ld	a, e
2332  09D2  07          	rlca
2333  09D3  07          	rlca
2334  09D4  07          	rlca
2335  09D5  07          	rlca
2336  09D6  E6 F0       	and	a,0xf0
2337  09D8  C6 08       	add	a,0x08
2338  09DA  32 00 00    	ld	(_player_hit_lin),a
2339  09DD  2A 00 00    	ld	hl,(_sprite)
2340  09E0  26 00       	ld	h,0x00
2341  09E2  01 00 00    	ld	bc,_col
2342  09E5  09          	add	hl,bc
2343  09E6  4E          	ld	c,(hl)
2344  09E7  CB 41       	bit	0,c
2345  09E9  20 06       	jr	NZ,l_player_hit_platform_00111
2346  09EB  21 00 00    	ld	hl,_player_hit_col
2347  09EE  71          	ld	(hl), c
2348  09EF  18 33       	jr	l_player_hit_platform_00112
2349  09F1              l_player_hit_platform_00111:
2350  09F1  2A 00 00    	ld	hl,(_sprite)
2351  09F4  26 00       	ld	h,0x00
2352  09F6  11 00 00    	ld	de,_state
2353  09F9  19          	add	hl,de
2354  09FA  5E          	ld	e, (hl)
2355  09FB  41          	ld	b, c
2356  09FC  04          	inc	b
2357  09FD  0D          	dec	c
2358  09FE  CB 5B       	bit	3, e
2359  0A00  28 12       	jr	Z,l_player_hit_platform_00108
2360  0A02  3A 00 00    	ld	a,(_g_player_hit_right)
2361  0A05  B7          	or	a, a
2362  0A06  28 06       	jr	Z,l_player_hit_platform_00102
2363  0A08  21 00 00    	ld	hl,_player_hit_col
2364  0A0B  70          	ld	(hl), b
2365  0A0C  18 16       	jr	l_player_hit_platform_00112
2366  0A0E              l_player_hit_platform_00102:
2367  0A0E  21 00 00    	ld	hl,_player_hit_col
2368  0A11  71          	ld	(hl), c
2369  0A12  18 10       	jr	l_player_hit_platform_00112
2370  0A14              l_player_hit_platform_00108:
2371  0A14  3A 00 00    	ld	a,(_g_player_hit_left)
2372  0A17  B7          	or	a, a
2373  0A18  28 06       	jr	Z,l_player_hit_platform_00105
2374  0A1A  21 00 00    	ld	hl,_player_hit_col
2375  0A1D  71          	ld	(hl), c
2376  0A1E  18 04       	jr	l_player_hit_platform_00112
2377  0A20              l_player_hit_platform_00105:
2378  0A20  21 00 00    	ld	hl,_player_hit_col
2379  0A23  70          	ld	(hl), b
2380  0A24              l_player_hit_platform_00112:
2381  0A24  01 00 00    	ld	bc,_scr_map
2382  0A27  2A 00 00    	ld	hl,(_index1)
2383  0A2A  09          	add	hl,bc
2384  0A2B  7E          	ld	a,(hl)
2385  0A2C  FE 4D       	cp	a,0x4d
2386  0A2E  20 3B       	jr	NZ,l_player_hit_platform_00114
2387  0A30  AF          	xor	a,a
2388  0A31  77          	ld	(hl),a
2389  0A32  2A 00 00    	ld	hl,(_index0)
2390  0A35  E5          	push	hl
2391  0A36  CD 00 00    	call	_game_obj_set
2392  0A39  F1          	pop	af
2393  0A3A  21 00 00    	ld	hl,_index1
2394  0A3D  7E          	ld	a, (hl)
2395  0A3E  E6 0F       	and	a,0x0f
2396  0A40  87          	add	a, a
2397  0A41  4F          	ld	c, a
2398  0A42  23          	inc	hl
2399  0A43  56          	ld	d,(hl)
2400  0A44  2B          	dec	hl
2401  0A45  7E          	ld	a, (hl)
2402  0A46  06 04       	ld	b,0x04
2403  0A48              l_player_hit_platform_00255:
2404  0A48  CB 3A       	srl	d
2405  0A4A  1F          	rra
2406  0A4B  10 FB       	djnz	l_player_hit_platform_00255
2407  0A4D  07          	rlca
2408  0A4E  07          	rlca
2409  0A4F  07          	rlca
2410  0A50  07          	rlca
2411  0A51  E6 F0       	and	a,0xf0
2412  0A53  47          	ld	b, a
2413  0A54  21 00 00    	ld	hl,0x0000
2414  0A57  E5          	push	hl
2415  0A58  21 87 03    	ld	hl,0x0387
2416  0A5B  E5          	push	hl
2417  0A5C  79          	ld	a, c
2418  0A5D  48          	ld	c,b
2419  0A5E  47          	ld	b,a
2420  0A5F  C5          	push	bc
2421  0A60  CD 00 00    	call	_spr_add_anim
2422  0A63  F1          	pop	af
2423  0A64  F1          	pop	af
2424  0A65  F1          	pop	af
2425  0A66  2E 01       	ld	l,0x01
2426  0A68  C3 26 0C    	jp	l_player_hit_platform_00147
2427  0A6B              l_player_hit_platform_00114:
2428  0A6B  FE 5C       	cp	a,0x5c
2429  0A6D  28 05       	jr	Z,l_player_hit_platform_00140
2430  0A6F  D6 5D       	sub	a,0x5d
2431  0A71  C2 18 0C    	jp	NZ,l_player_hit_platform_00141
2432  0A74              l_player_hit_platform_00140:
2433  0A74  21 00 00    	ld	hl,_tmp0
2434  0A77  36 00       	ld	(hl),0x00
2435  0A79  3A 00 00    	ld	a,(_game_boss)
2436  0A7C  B7          	or	a, a
2437  0A7D  28 0B       	jr	Z,l_player_hit_platform_00173
2438  0A7F  3A 00 00    	ld	a,(_game_mush_count)
2439  0A82  B7          	or	a, a
2440  0A83  28 05       	jr	Z,l_player_hit_platform_00173
2441  0A85  2E 00       	ld	l,0x00
2442  0A87  C3 26 0C    	jp	l_player_hit_platform_00147
2443  0A8A              l_player_hit_platform_00173:
2444  0A8A              l_player_hit_platform_00137:
2445  0A8A  21 00 00    	ld	hl,_tmp0
2446  0A8D  7E          	ld	a, (hl)
2447  0A8E  D6 07       	sub	a,0x07
2448  0A90  D2 18 0C    	jp	NC, l_player_hit_platform_00141
2449  0A93  4E          	ld	c,(hl)
2450  0A94  06 00       	ld	b,0x00
2451  0A96  21 00 00    	ld	hl,_mush_index
2452  0A99  09          	add	hl,bc
2453  0A9A  4E          	ld	c, (hl)
2454  0A9B  06 00       	ld	b,0x00
2455  0A9D  2A 00 00    	ld	hl,(_index1)
2456  0AA0  AF          	xor	a,a
2457  0AA1  ED 42       	sbc	hl,bc
2458  0AA3  C2 11 0C    	jp	NZ,l_player_hit_platform_00136
2459  0AA6  2A 00 00    	ld	hl,(_sprite)
2460  0AA9  26 00       	ld	h,0x00
2461  0AAB  01 00 00    	ld	bc,_lin
2462  0AAE  09          	add	hl,bc
2463  0AAF  7E          	ld	a,(hl)
2464  0AB0  07          	rlca
2465  0AB1  07          	rlca
2466  0AB2  07          	rlca
2467  0AB3  07          	rlca
2468  0AB4  E6 0F       	and	a,0x0f
2469  0AB6  07          	rlca
2470  0AB7  07          	rlca
2471  0AB8  07          	rlca
2472  0AB9  07          	rlca
2473  0ABA  E6 F0       	and	a,0xf0
2474  0ABC  C6 E0       	add	a,0xe0
2475  0ABE  32 00 00    	ld	(_s_lin1),a
2476  0AC1  2A 00 00    	ld	hl,(_sprite)
2477  0AC4  26 00       	ld	h,0x00
2478  0AC6  01 00 00    	ld	bc,_col
2479  0AC9  09          	add	hl,bc
2480  0ACA  7E          	ld	a,(hl)
2481  0ACB  CB 3F       	srl	a
2482  0ACD  87          	add	a, a
2483  0ACE  32 00 00    	ld	(_s_col1),a
2484  0AD1  21 00 00    	ld	hl,_tmp
2485  0AD4  36 00       	ld	(hl),0x00
2486  0AD6              l_player_hit_platform_00120:
2487  0AD6  21 00 00    	ld	hl,_tmp
2488  0AD9  7E          	ld	a, (hl)
2489  0ADA  D6 07       	sub	a,0x07
2490  0ADC  30 1C       	jr	NC,l_player_hit_platform_00122
2491  0ADE  4E          	ld	c,(hl)
2492  0ADF  06 00       	ld	b,0x00
2493  0AE1  21 00 00    	ld	hl,_mush_index
2494  0AE4  09          	add	hl,bc
2495  0AE5  4E          	ld	c, (hl)
2496  0AE6  06 00       	ld	b,0x00
2497  0AE8  21 00 00    	ld	hl,_index1
2498  0AEB  7E          	ld	a, (hl)
2499  0AEC  91          	sub	a, c
2500  0AED  20 05       	jr	NZ,l_player_hit_platform_00261
2501  0AEF  23          	inc	hl
2502  0AF0  7E          	ld	a, (hl)
2503  0AF1  90          	sub	a, b
2504  0AF2  28 06       	jr	Z,l_player_hit_platform_00122
2505  0AF4              l_player_hit_platform_00261:
2506  0AF4  21 00 00    	ld	hl,_tmp
2507  0AF7  34          	inc	(hl)
2508  0AF8  18 DC       	jr	l_player_hit_platform_00120
2509  0AFA              l_player_hit_platform_00122:
2510  0AFA  2A 00 00    	ld	hl,(_tmp)
2511  0AFD  26 00       	ld	h,0x00
2512  0AFF  01 00 00    	ld	bc,_mush_class
2513  0B02  09          	add	hl,bc
2514  0B03  7E          	ld	a,(hl)
2515  0B04  FE 78       	cp	a,0x78
2516  0B06  28 18       	jr	Z,l_player_hit_platform_00123
2517  0B08  FE 79       	cp	a,0x79
2518  0B0A  28 2F       	jr	Z,l_player_hit_platform_00124
2519  0B0C  FE 7A       	cp	a,0x7a
2520  0B0E  28 5F       	jr	Z,l_player_hit_platform_00126
2521  0B10  FE 7B       	cp	a,0x7b
2522  0B12  28 41       	jr	Z,l_player_hit_platform_00125
2523  0B14  FE 7C       	cp	a,0x7c
2524  0B16  CA A3 0B    	jp	Z,l_player_hit_platform_00128
2525  0B19  D6 7D       	sub	a,0x7d
2526  0B1B  28 6C       	jr	Z,l_player_hit_platform_00127
2527  0B1D  C3 BB 0B    	jp	l_player_hit_platform_00129
2528  0B20              l_player_hit_platform_00123:
2529  0B20  2E 02       	ld	l,0x02
2530  0B22  CD 00 00    	call	_zx_border_fastcall
2531  0B25  3A 00 00    	ld	a,(_s_col1)
2532  0B28  21 06 FF    	ld	hl,0xff06
2533  0B2B  E5          	push	hl
2534  0B2C  F5          	push	af
2535  0B2D  33          	inc	sp
2536  0B2E  3A 00 00    	ld	a,(_s_lin1)
2537  0B31  F5          	push	af
2538  0B32  33          	inc	sp
2539  0B33  CD 00 00    	call	_enemy_init
2540  0B36  F1          	pop	af
2541  0B37  F1          	pop	af
2542  0B38  C3 BB 0B    	jp	l_player_hit_platform_00129
2543  0B3B              l_player_hit_platform_00124:
2544  0B3B  2E 02       	ld	l,0x02
2545  0B3D  CD 00 00    	call	_zx_border_fastcall
2546  0B40  3A 00 00    	ld	a,(_s_col1)
2547  0B43  21 06 01    	ld	hl,0x0106
2548  0B46  E5          	push	hl
2549  0B47  F5          	push	af
2550  0B48  33          	inc	sp
2551  0B49  3A 00 00    	ld	a,(_s_lin1)
2552  0B4C  F5          	push	af
2553  0B4D  33          	inc	sp
2554  0B4E  CD 00 00    	call	_enemy_init
2555  0B51  F1          	pop	af
2556  0B52  F1          	pop	af
2557  0B53  18 66       	jr	l_player_hit_platform_00129
2558  0B55              l_player_hit_platform_00125:
2559  0B55  2E 01       	ld	l,0x01
2560  0B57  CD 00 00    	call	_zx_border_fastcall
2561  0B5A  3A 00 00    	ld	a,(_s_col1)
2562  0B5D  21 07 01    	ld	hl,0x0107
2563  0B60  E5          	push	hl
2564  0B61  F5          	push	af
2565  0B62  33          	inc	sp
2566  0B63  3A 00 00    	ld	a,(_s_lin1)
2567  0B66  F5          	push	af
2568  0B67  33          	inc	sp
2569  0B68  CD 00 00    	call	_enemy_init
2570  0B6B  F1          	pop	af
2571  0B6C  F1          	pop	af
2572  0B6D  18 4C       	jr	l_player_hit_platform_00129
2573  0B6F              l_player_hit_platform_00126:
2574  0B6F  2E 01       	ld	l,0x01
2575  0B71  CD 00 00    	call	_zx_border_fastcall
2576  0B74  3A 00 00    	ld	a,(_s_col1)
2577  0B77  21 07 FF    	ld	hl,0xff07
2578  0B7A  E5          	push	hl
2579  0B7B  F5          	push	af
2580  0B7C  33          	inc	sp
2581  0B7D  3A 00 00    	ld	a,(_s_lin1)
2582  0B80  F5          	push	af
2583  0B81  33          	inc	sp
2584  0B82  CD 00 00    	call	_enemy_init
2585  0B85  F1          	pop	af
2586  0B86  F1          	pop	af
2587  0B87  18 32       	jr	l_player_hit_platform_00129
2588  0B89              l_player_hit_platform_00127:
2589  0B89  2E 04       	ld	l,0x04
2590  0B8B  CD 00 00    	call	_zx_border_fastcall
2591  0B8E  3A 00 00    	ld	a,(_s_col1)
2592  0B91  21 08 01    	ld	hl,0x0108
2593  0B94  E5          	push	hl
2594  0B95  F5          	push	af
2595  0B96  33          	inc	sp
2596  0B97  3A 00 00    	ld	a,(_s_lin1)
2597  0B9A  F5          	push	af
2598  0B9B  33          	inc	sp
2599  0B9C  CD 00 00    	call	_enemy_init
2600  0B9F  F1          	pop	af
2601  0BA0  F1          	pop	af
2602  0BA1  18 18       	jr	l_player_hit_platform_00129
2603  0BA3              l_player_hit_platform_00128:
2604  0BA3  2E 04       	ld	l,0x04
2605  0BA5  CD 00 00    	call	_zx_border_fastcall
2606  0BA8  3A 00 00    	ld	a,(_s_col1)
2607  0BAB  21 08 FF    	ld	hl,0xff08
2608  0BAE  E5          	push	hl
2609  0BAF  F5          	push	af
2610  0BB0  33          	inc	sp
2611  0BB1  3A 00 00    	ld	a,(_s_lin1)
2612  0BB4  F5          	push	af
2613  0BB5  33          	inc	sp
2614  0BB6  CD 00 00    	call	_enemy_init
2615  0BB9  F1          	pop	af
2616  0BBA  F1          	pop	af
2617  0BBB              l_player_hit_platform_00129:
2618  0BBB  21 00 00    	ld	hl,_game_mush_count
2619  0BBE  34          	inc	(hl)
2620  0BBF  3A 00 00    	ld	a,(_game_boss)
2621  0BC2  B7          	or	a, a
2622  0BC3  20 4C       	jr	NZ,l_player_hit_platform_00136
2623  0BC5  2A 00 00    	ld	hl,(_index1)
2624  0BC8  01 F0 FF    	ld	bc,0xfff0
2625  0BCB  09          	add	hl,bc
2626  0BCC  01 00 00    	ld	bc,_scr_map
2627  0BCF  09          	add	hl,bc
2628  0BD0  36 00       	ld	(hl),0x00
2629  0BD2  3E 00       	ld	a, +((_scr_map) & 0xFF)
2630  0BD4  21 00 00    	ld	hl,_index1
2631  0BD7  86          	add	a, (hl)
2632  0BD8  DD 77 FE    	ld	(ix-2),a
2633  0BDB  3E 00       	ld	a, +((_scr_map) / 256)
2634  0BDD  23          	inc	hl
2635  0BDE  8E          	adc	a, (hl)
2636  0BDF  DD 77 FF    	ld	(ix-1),a
2637  0BE2  E1          	pop	hl
2638  0BE3  7E          	ld	a,(hl)
2639  0BE4  E5          	push	hl
2640  0BE5  D6 5C       	sub	a,0x5c
2641  0BE7  20 06       	jr	NZ,l_player_hit_platform_00131
2642  0BE9  E1          	pop	hl
2643  0BEA  E5          	push	hl
2644  0BEB  36 4F       	ld	(hl),0x4f
2645  0BED  18 04       	jr	l_player_hit_platform_00132
2646  0BEF              l_player_hit_platform_00131:
2647  0BEF  E1          	pop	hl
2648  0BF0  E5          	push	hl
2649  0BF1  36 54       	ld	(hl),0x54
2650  0BF3              l_player_hit_platform_00132:
2651  0BF3  2A 00 00    	ld	hl,(_index1)
2652  0BF6  01 F0 FF    	ld	bc,0xfff0
2653  0BF9  09          	add	hl,bc
2654  0BFA  E5          	push	hl
2655  0BFB  CD 00 00    	call	_game_obj_set
2656  0BFE  F1          	pop	af
2657  0BFF  3A 00 00    	ld	a,(_s_lin1)
2658  0C02  C6 10       	add	a,0x10
2659  0C04  4F          	ld	c, a
2660  0C05  3A 00 00    	ld	a, (_s_col1)
2661  0C08  47          	ld	b,a
2662  0C09  C5          	push	bc
2663  0C0A  3E 4F       	ld	a,0x4f
2664  0C0C  F5          	push	af
2665  0C0D  33          	inc	sp
2666  0C0E  CD 00 00    	call	_NIRVANAP_drawT_callee
2667  0C11              l_player_hit_platform_00136:
2668  0C11  21 00 00    	ld	hl,_tmp0
2669  0C14  34          	inc	(hl)
2670  0C15  C3 8A 0A    	jp	l_player_hit_platform_00137
2671  0C18              l_player_hit_platform_00141:
2672  0C18  2E 01       	ld	l,0x01
2673  0C1A  CD 00 00    	call	_spr_brick_anim
2674  0C1D  CD 00 00    	call	_sound_hit_brick
2675  0C20  2E 01       	ld	l,0x01
2676  0C22  18 02       	jr	l_player_hit_platform_00147
2677  0C24              l_player_hit_platform_00144:
2678  0C24  2E 00       	ld	l,0x00
2679  0C26              l_player_hit_platform_00147:
2680  0C26  F1          	pop	af
2681  0C27  DD E1       	pop	ix
2682  0C29  C9          	ret
2683  0C2A              	SECTION code_compiler
2684  0C2A              ;	---------------------------------
2685  0C2A              ; Function player_hit_platform_clear
2686  0C2A              ; ---------------------------------
2687  0C2A              _player_hit_platform_clear:
2688  0C2A  2A 00 00    	ld	hl,(_sprite)
2689  0C2D  26 00       	ld	h,0x00
2690  0C2F  29          	add	hl, hl
2691  0C30  11 00 00    	ld	de,_spr_timer
2692  0C33  19          	add	hl, de
2693  0C34  4E          	ld	c, (hl)
2694  0C35  23          	inc	hl
2695  0C36  46          	ld	b, (hl)
2696  0C37  21 04 00    	ld	hl,0x0004
2697  0C3A  E5          	push	hl
2698  0C3B  C5          	push	bc
2699  0C3C  CD 00 00    	call	_game_check_time
2700  0C3F  F1          	pop	af
2701  0C40  F1          	pop	af
2702  0C41  7D          	ld	a, l
2703  0C42  B7          	or	a, a
2704  0C43  C8          	ret	Z
2705  0C44  2A FF FF    	ld	hl,(_player_hit_col - 1)
2706  0C47  3A 00 00    	ld	a,(_player_hit_lin)
2707  0C4A  6F          	ld	l,a
2708  0C4B  E5          	push	hl
2709  0C4C  CD 00 00    	call	_spr_calc_index
2710  0C4F  F1          	pop	af
2711  0C50  22 00 00    	ld	(_index1),hl
2712  0C53  2E 00       	ld	l,0x00
2713  0C55  CD 00 00    	call	_spr_brick_anim
2714  0C58  21 00 00    	ld	hl,_player_hit_lin
2715  0C5B  36 00       	ld	(hl),0x00
2716  0C5D  21 00 00    	ld	hl,_player_hit_col
2717  0C60  36 00       	ld	(hl),0x00
2718  0C62  C9          	ret
2719  0C63              	SECTION code_compiler
2720  0C63              ;	---------------------------------
2721  0C63              ; Function player_score_add
2722  0C63              ; ---------------------------------
2723  0C63              _player_score_add:
2724  0C63  ED 4B 00 00 	ld	bc,(_player_score)
2725  0C67  09          	add	hl,bc
2726  0C68  22 00 00    	ld	(_player_score),hl
2727  0C6B  21 00 00    	ld	hl,_player_lvl
2728  0C6E  7E          	ld	a, (hl)
2729  0C6F  D6 14       	sub	a,0x14
2730  0C71  30 3C       	jr	NC,l_player_score_add_00104
2731  0C73  01 00 00    	ld	bc,_player_lvl_table+0
2732  0C76  6E          	ld	l,(hl)
2733  0C77  26 00       	ld	h,0x00
2734  0C79  29          	add	hl, hl
2735  0C7A  09          	add	hl, bc
2736  0C7B  4E          	ld	c, (hl)
2737  0C7C  23          	inc	hl
2738  0C7D  46          	ld	b, (hl)
2739  0C7E  21 00 00    	ld	hl,_player_score
2740  0C81  7E          	ld	a, (hl)
2741  0C82  91          	sub	a, c
2742  0C83  23          	inc	hl
2743  0C84  7E          	ld	a, (hl)
2744  0C85  98          	sbc	a, b
2745  0C86  38 27       	jr	C,l_player_score_add_00104
2746  0C88  21 00 00    	ld	hl,_player_lvl
2747  0C8B  34          	inc	(hl)
2748  0C8C  21 02 00    	ld	hl,___str_1
2749  0C8F  E5          	push	hl
2750  0C90  21 0C 0C    	ld	hl,0x0c0c
2751  0C93  E5          	push	hl
2752  0C94  CD 00 00    	call	_zx_print_str
2753  0C97  AF          	xor	a, a
2754  0C98  F5          	push	af
2755  0C99  33          	inc	sp
2756  0C9A  21 19 00    	ld	hl,0x0019
2757  0C9D  E5          	push	hl
2758  0C9E  21 0C 15    	ld	hl,0x150c
2759  0CA1  E5          	push	hl
2760  0CA2  3E 0C       	ld	a,0x0c
2761  0CA4  F5          	push	af
2762  0CA5  33          	inc	sp
2763  0CA6  CD 00 00    	call	_game_colour_message
2764  0CA9  F1          	pop	af
2765  0CAA  F1          	pop	af
2766  0CAB  F1          	pop	af
2767  0CAC  CD 00 00    	call	_game_update_stats
2768  0CAF              l_player_score_add_00104:
2769  0CAF  3A 00 00    	ld	a,(_game_score_top)
2770  0CB2  21 00 00    	ld	hl,_player_score
2771  0CB5  96          	sub	a, (hl)
2772  0CB6  3A 01 00    	ld	a,(_game_score_top + 1)
2773  0CB9  23          	inc	hl
2774  0CBA  9E          	sbc	a, (hl)
2775  0CBB  30 06       	jr	NC,l_player_score_add_00106
2776  0CBD  2A 00 00    	ld	hl,(_player_score)
2777  0CC0  22 00 00    	ld	(_game_score_top),hl
2778  0CC3              l_player_score_add_00106:
2779  0CC3  CD 00 00    	call	_game_print_score
2780  0CC6  C9          	ret
2781  0CC7              	SECTION rodata_compiler
2782  0002              ___str_1:
2783  0002  4C 45 56 45 4C 20 55 50 21 
                        	DEFM "LEVEL UP!"
2784  000B  00          	DEFB 0x00
2785  000C              	SECTION code_compiler
2786  0CC7              ;	---------------------------------
2787  0CC7              ; Function player_check_floor
2788  0CC7              ; ---------------------------------
2789  0CC7              _player_check_floor:
2790  0CC7  CD 00 00    	call	___sdcc_enter_ix
2791  0CCA  F5          	push	af
2792  0CCB  3B          	dec	sp
2793  0CCC  2A 00 00    	ld	hl,(_sprite)
2794  0CCF  26 00       	ld	h,0x00
2795  0CD1  01 00 00    	ld	bc,_col
2796  0CD4  09          	add	hl,bc
2797  0CD5  56          	ld	d, (hl)
2798  0CD6  2A 00 00    	ld	hl,(_sprite)
2799  0CD9  26 00       	ld	h,0x00
2800  0CDB  01 00 00    	ld	bc,_lin
2801  0CDE  09          	add	hl,bc
2802  0CDF  7E          	ld	a,(hl)
2803  0CE0  C6 10       	add	a,0x10
2804  0CE2  5F          	ld	e, a
2805  0CE3  D5          	push	de
2806  0CE4  CD 00 00    	call	_spr_calc_index
2807  0CE7  F1          	pop	af
2808  0CE8  EB          	ex	de,hl
2809  0CE9  21 00 00    	ld	hl,_scr_map
2810  0CEC  19          	add	hl,de
2811  0CED  7E          	ld	a,(hl)
2812  0CEE  DD 77 FD    	ld	(ix-3),a
2813  0CF1  3E 00       	ld	a,+((_col) & 0xFF)
2814  0CF3  4D          	ld	c,l
2815  0CF4  44          	ld	b,h
2816  0CF5  21 00 00    	ld	hl,_sprite
2817  0CF8  86          	add	a, (hl)
2818  0CF9  DD 77 FE    	ld	(ix-2),a
2819  0CFC  6F          	ld	l,a
2820  0CFD  3E 00       	ld	a,+((_col) / 256)
2821  0CFF  CE 00       	adc	a,0x00
2822  0D01  DD 77 FF    	ld	(ix-1),a
2823  0D04  67          	ld	h,a
2824  0D05  7E          	ld	a, (hl)
2825  0D06  0F          	rrca
2826  0D07  38 04       	jr	C,l_player_check_floor_00102
2827  0D09  1E 01       	ld	e,0x01
2828  0D0B  18 06       	jr	l_player_check_floor_00103
2829  0D0D              l_player_check_floor_00102:
2830  0D0D  13          	inc	de
2831  0D0E  21 00 00    	ld	hl,_scr_map
2832  0D11  19          	add	hl, de
2833  0D12  5E          	ld	e, (hl)
2834  0D13              l_player_check_floor_00103:
2835  0D13  3A 00 00    	ld	a,(_s_lin0)
2836  0D16  D6 90       	sub	a,0x90
2837  0D18  20 04       	jr	NZ,l_player_check_floor_00105
2838  0D1A  DD 36 FD 48 	ld	(ix-3),0x48
2839  0D1E              l_player_check_floor_00105:
2840  0D1E  DD 7E FD    	ld	a,(ix-3)
2841  0D21  D6 3C       	sub	a,0x3c
2842  0D23  38 07       	jr	C,l_player_check_floor_00119
2843  0D25  DD 7E FD    	ld	a,(ix-3)
2844  0D28  D6 60       	sub	a,0x60
2845  0D2A  38 21       	jr	C,l_player_check_floor_00115
2846  0D2C              l_player_check_floor_00119:
2847  0D2C  7B          	ld	a,e
2848  0D2D  FE 3C       	cp	a,0x3c
2849  0D2F  38 04       	jr	C,l_player_check_floor_00114
2850  0D31  D6 60       	sub	a,0x60
2851  0D33  38 18       	jr	C,l_player_check_floor_00115
2852  0D35              l_player_check_floor_00114:
2853  0D35  2A 00 00    	ld	hl,(_sprite)
2854  0D38  26 00       	ld	h,0x00
2855  0D3A  01 00 00    	ld	bc,_sprite_speed_alt
2856  0D3D  09          	add	hl,bc
2857  0D3E  36 02       	ld	(hl),0x02
2858  0D40  21 00 00    	ld	hl,_s_state
2859  0D43  CB CE       	set	1, (hl)
2860  0D45  2E 00       	ld	l,0x00
2861  0D47  CD AA 04    	call	_player_check_stairs
2862  0D4A  C3 EE 0D    	jp	l_player_check_floor_00120
2863  0D4D              l_player_check_floor_00115:
2864  0D4D  C5          	push	bc
2865  0D4E  21 10 00    	ld	hl,0x0010
2866  0D51  E5          	push	hl
2867  0D52  2A 00 00    	ld	hl,(_player_brick_time)
2868  0D55  E5          	push	hl
2869  0D56  CD 00 00    	call	_game_check_time
2870  0D59  F1          	pop	af
2871  0D5A  F1          	pop	af
2872  0D5B  C1          	pop	bc
2873  0D5C  7D          	ld	a,l
2874  0D5D  B7          	or	a, a
2875  0D5E  CA EE 0D    	jp	Z, l_player_check_floor_00120
2876  0D61  2A 00 00    	ld	hl,(_curr_time)
2877  0D64  22 00 00    	ld	(_player_brick_time),hl
2878  0D67  DD 7E FD    	ld	a,(ix-3)
2879  0D6A  D6 40       	sub	a,0x40
2880  0D6C  20 23       	jr	NZ,l_player_check_floor_00107
2881  0D6E  AF          	xor	a, a
2882  0D6F  02          	ld	(bc), a
2883  0D70  2A 00 00    	ld	hl,(_sprite)
2884  0D73  26 00       	ld	h,0x00
2885  0D75  11 00 00    	ld	de,_lin
2886  0D78  19          	add	hl,de
2887  0D79  7E          	ld	a,(hl)
2888  0D7A  C6 10       	add	a,0x10
2889  0D7C  32 00 00    	ld	(_s_lin0),a
2890  0D7F  2A 00 00    	ld	hl,(_sprite)
2891  0D82  26 00       	ld	h,0x00
2892  0D84  11 00 00    	ld	de,_col
2893  0D87  19          	add	hl,de
2894  0D88  7E          	ld	a,(hl)
2895  0D89  32 00 00    	ld	(_s_col0),a
2896  0D8C  C5          	push	bc
2897  0D8D  CD 00 00    	call	_spr_back_repaint
2898  0D90  C1          	pop	bc
2899  0D91              l_player_check_floor_00107:
2900  0D91  DD 7E FD    	ld	a,(ix-3)
2901  0D94  D6 3F       	sub	a,0x3f
2902  0D96  20 2D       	jr	NZ,l_player_check_floor_00109
2903  0D98  3E 40       	ld	a,0x40
2904  0D9A  02          	ld	(bc), a
2905  0D9B  3E 00       	ld	a, +((_lin) & 0xFF)
2906  0D9D  21 00 00    	ld	hl,_sprite
2907  0DA0  86          	add	a, (hl)
2908  0DA1  DD 77 FE    	ld	(ix-2),a
2909  0DA4  6F          	ld	l,a
2910  0DA5  3E 00       	ld	a,+((_lin) / 256)
2911  0DA7  CE 00       	adc	a,0x00
2912  0DA9  DD 77 FF    	ld	(ix-1),a
2913  0DAC  67          	ld	h,a
2914  0DAD  7E          	ld	a, (hl)
2915  0DAE  C6 10       	add	a,0x10
2916  0DB0  32 00 00    	ld	(_s_lin0),a
2917  0DB3  2A 00 00    	ld	hl,(_sprite)
2918  0DB6  26 00       	ld	h,0x00
2919  0DB8  11 00 00    	ld	de,_col
2920  0DBB  19          	add	hl,de
2921  0DBC  7E          	ld	a,(hl)
2922  0DBD  32 00 00    	ld	(_s_col0),a
2923  0DC0  C5          	push	bc
2924  0DC1  CD 00 00    	call	_spr_back_repaint
2925  0DC4  C1          	pop	bc
2926  0DC5              l_player_check_floor_00109:
2927  0DC5  DD 7E FD    	ld	a,(ix-3)
2928  0DC8  D6 3E       	sub	a,0x3e
2929  0DCA  20 22       	jr	NZ,l_player_check_floor_00120
2930  0DCC  3E 3F       	ld	a,0x3f
2931  0DCE  02          	ld	(bc), a
2932  0DCF  2A 00 00    	ld	hl,(_sprite)
2933  0DD2  26 00       	ld	h,0x00
2934  0DD4  01 00 00    	ld	bc,_lin
2935  0DD7  09          	add	hl,bc
2936  0DD8  7E          	ld	a,(hl)
2937  0DD9  C6 10       	add	a,0x10
2938  0DDB  32 00 00    	ld	(_s_lin0),a
2939  0DDE  2A 00 00    	ld	hl,(_sprite)
2940  0DE1  26 00       	ld	h,0x00
2941  0DE3  01 00 00    	ld	bc,_col
2942  0DE6  09          	add	hl,bc
2943  0DE7  7E          	ld	a,(hl)
2944  0DE8  32 00 00    	ld	(_s_col0),a
2945  0DEB  CD 00 00    	call	_spr_back_repaint
2946  0DEE              l_player_check_floor_00120:
2947  0DEE  DD F9       	ld	sp, ix
2948  0DF0  DD E1       	pop	ix
2949  0DF2  C9          	ret
2950  0DF3              	SECTION code_compiler
2951  0DF3              ;	---------------------------------
2952  0DF3              ; Function player_move_jump
2953  0DF3              ; ---------------------------------
2954  0DF3              _player_move_jump:
2955  0DF3  CD 00 00    	call	___sdcc_enter_ix
2956  0DF6  F5          	push	af
2957  0DF7  21 00 00    	ld	hl,_game_gravity
2958  0DFA  4E          	ld	c, (hl)
2959  0DFB  21 00 00    	ld	hl,_player_vel_y
2960  0DFE  7E          	ld	a, (hl)
2961  0DFF  81          	add	a, c
2962  0E00  77          	ld	(hl), a
2963  0E01  21 00 00    	ld	hl,_sprite_on_air
2964  0E04  36 01       	ld	(hl),0x01
2965  0E06  3A 00 00    	ld	a,(_player_vel_inc)
2966  0E09  B7          	or	a, a
2967  0E0A  28 24       	jr	Z,l_player_move_jump_00106
2968  0E0C  21 00 00    	ld	hl,_dirs
2969  0E0F  CB 7E       	bit	7, (hl)
2970  0E11  20 1D       	jr	NZ,l_player_move_jump_00106
2971  0E13  3A 00 00    	ld	a,(_player_vel_y1)
2972  0E16  21 00 00    	ld	hl,_player_vel_y
2973  0E19  96          	sub	a, (hl)
2974  0E1A  E2 1F 0E    	jp	PO, l_player_move_jump_00247
2975  0E1D  EE 80       	xor	a,0x80
2976  0E1F              l_player_move_jump_00247:
2977  0E1F  F2 30 0E    	jp	P, l_player_move_jump_00106
2978  0E22  21 00 00    	ld	hl,_player_vel_y
2979  0E25  CB 7E       	bit	7,(hl)
2980  0E27  28 07       	jr	Z,l_player_move_jump_00106
2981  0E29  36 00       	ld	(hl),0x00
2982  0E2B  21 00 00    	ld	hl,_player_vel_inc
2983  0E2E  36 00       	ld	(hl),0x00
2984  0E30              l_player_move_jump_00106:
2985  0E30  3E 78       	ld	a,0x78
2986  0E32  21 00 00    	ld	hl,_player_vel_y
2987  0E35  96          	sub	a, (hl)
2988  0E36  E2 3B 0E    	jp	PO, l_player_move_jump_00248
2989  0E39  EE 80       	xor	a,0x80
2990  0E3B              l_player_move_jump_00248:
2991  0E3B  F2 43 0E    	jp	P, l_player_move_jump_00108
2992  0E3E  21 00 00    	ld	hl,_player_vel_y
2993  0E41  36 78       	ld	(hl),0x78
2994  0E43              l_player_move_jump_00108:
2995  0E43  21 00 00    	ld	hl,_player_vel_y
2996  0E46  7E          	ld	a, (hl)
2997  0E47  EE 80       	xor	a,0x80
2998  0E49  D6 08       	sub	a,0x08
2999  0E4B  30 02       	jr	NC,l_player_move_jump_00110
3000  0E4D  36 88       	ld	(hl),0x88
3001  0E4F              l_player_move_jump_00110:
3002  0E4F  3A 00 00    	ld	a,(_player_vel_y)
3003  0E52  47          	ld	b,a
3004  0E53  17          	rla
3005  0E54  9F          	sbc	a, a
3006  0E55  5F          	ld	e, a
3007  0E56  CB 40       	bit	0,b
3008  0E58  21 00 00    	ld	hl,_s_lin1
3009  0E5B  70          	ld	(hl),b
3010  0E5C  28 04       	jr	Z,l_player_move_jump_00112
3011  0E5E  21 00 00    	ld	hl,_s_lin1
3012  0E61  35          	dec	(hl)
3013  0E62              l_player_move_jump_00112:
3014  0E62  3E 00       	ld	a, +((_lin) & 0xFF)
3015  0E64  21 00 00    	ld	hl,_sprite
3016  0E67  86          	add	a, (hl)
3017  0E68  DD 77 FE    	ld	(ix-2),a
3018  0E6B  3E 00       	ld	a, +((_lin) / 256)
3019  0E6D  CE 00       	adc	a,0x00
3020  0E6F  DD 77 FF    	ld	(ix-1),a
3021  0E72  E1          	pop	hl
3022  0E73  7E          	ld	a,(hl)
3023  0E74  E5          	push	hl
3024  0E75  21 00 00    	ld	hl,_s_lin1
3025  0E78  86          	add	a, (hl)
3026  0E79  77          	ld	(hl), a
3027  0E7A  3E 90       	ld	a,0x90
3028  0E7C  96          	sub	a, (hl)
3029  0E7D  30 0E       	jr	NC,l_player_move_jump_00117
3030  0E7F  3E C8       	ld	a,0xc8
3031  0E81  96          	sub	a, (hl)
3032  0E82  30 04       	jr	NC,l_player_move_jump_00114
3033  0E84  36 00       	ld	(hl),0x00
3034  0E86  18 05       	jr	l_player_move_jump_00117
3035  0E88              l_player_move_jump_00114:
3036  0E88  21 00 00    	ld	hl,_s_lin1
3037  0E8B  36 90       	ld	(hl),0x90
3038  0E8D              l_player_move_jump_00117:
3039  0E8D  3A 00 00    	ld	a,(_s_lin0)
3040  0E90  07          	rlca
3041  0E91  07          	rlca
3042  0E92  07          	rlca
3043  0E93  07          	rlca
3044  0E94  E6 0F       	and	a,0x0f
3045  0E96  4F          	ld	c, a
3046  0E97  CB 7B       	bit	7, e
3047  0E99  28 74       	jr	Z,l_player_move_jump_00140
3048  0E9B  21 00 00    	ld	hl,_s_state
3049  0E9E  7E          	ld	a,(hl)
3050  0E9F  F6 01       	or	a,0x01
3051  0EA1  E6 FD       	and	a,0xfd
3052  0EA3  77          	ld	(hl),a
3053  0EA4  21 00 00    	ld	hl,_s_lin1
3054  0EA7  46          	ld	b, (hl)
3055  0EA8  79          	ld	a, c
3056  0EA9  90          	sub	a, b
3057  0EAA  20 04       	jr	NZ,l_player_move_jump_00250
3058  0EAC  3E 01       	ld	a,0x01
3059  0EAE  18 01       	jr	l_player_move_jump_00251
3060  0EB0              l_player_move_jump_00250:
3061  0EB0  AF          	xor	a,a
3062  0EB1              l_player_move_jump_00251:
3063  0EB1  EE 01       	xor	a,0x01
3064  0EB3  28 51       	jr	Z,l_player_move_jump_00124
3065  0EB5  2A 00 00    	ld	hl,(_sprite)
3066  0EB8  26 00       	ld	h,0x00
3067  0EBA  01 00 00    	ld	bc,_col
3068  0EBD  09          	add	hl,bc
3069  0EBE  7E          	ld	a,(hl)
3070  0EBF  F5          	push	af
3071  0EC0  33          	inc	sp
3072  0EC1  3A 00 00    	ld	a,(_s_lin1)
3073  0EC4  F5          	push	af
3074  0EC5  33          	inc	sp
3075  0EC6  CD 00 00    	call	_game_check_map
3076  0EC9  F1          	pop	af
3077  0ECA  7C          	ld	a,h
3078  0ECB  B5          	or	a,l
3079  0ECC  28 28       	jr	Z,l_player_move_jump_00121
3080  0ECE  CD 7F 09    	call	_player_hit_platform
3081  0ED1  7D          	ld	a, l
3082  0ED2  B7          	or	a, a
3083  0ED3  28 19       	jr	Z,l_player_move_jump_00119
3084  0ED5  2A 00 00    	ld	hl,(_sprite)
3085  0ED8  26 00       	ld	h,0x00
3086  0EDA  01 00 00    	ld	bc,_lin
3087  0EDD  09          	add	hl,bc
3088  0EDE  7E          	ld	a,(hl)
3089  0EDF  4D          	ld	c,l
3090  0EE0  44          	ld	b,h
3091  0EE1  07          	rlca
3092  0EE2  07          	rlca
3093  0EE3  07          	rlca
3094  0EE4  07          	rlca
3095  0EE5  E6 0F       	and	a,0x0f
3096  0EE7  07          	rlca
3097  0EE8  07          	rlca
3098  0EE9  07          	rlca
3099  0EEA  07          	rlca
3100  0EEB  E6 F0       	and	a,0xf0
3101  0EED  02          	ld	(bc), a
3102  0EEE              l_player_move_jump_00119:
3103  0EEE  21 00 00    	ld	hl,_player_vel_y
3104  0EF1  36 00       	ld	(hl),0x00
3105  0EF3  C3 D3 0F    	jp	l_player_move_jump_00141
3106  0EF6              l_player_move_jump_00121:
3107  0EF6  2A 00 00    	ld	hl,(_sprite)
3108  0EF9  26 00       	ld	h,0x00
3109  0EFB  01 00 00    	ld	bc,_lin
3110  0EFE  09          	add	hl,bc
3111  0EFF  3A 00 00    	ld	a,(_s_lin1)
3112  0F02  77          	ld	(hl),a
3113  0F03  C3 D3 0F    	jp	l_player_move_jump_00141
3114  0F06              l_player_move_jump_00124:
3115  0F06  E1          	pop	hl
3116  0F07  3A 00 00    	ld	a,(_s_lin1)
3117  0F0A  E5          	push	hl
3118  0F0B  77          	ld	(hl),a
3119  0F0C  C3 D3 0F    	jp	l_player_move_jump_00141
3120  0F0F              l_player_move_jump_00140:
3121  0F0F  21 00 00    	ld	hl,_s_state
3122  0F12  7E          	ld	a,(hl)
3123  0F13  F6 02       	or	a,0x02
3124  0F15  E6 FE       	and	a,0xfe
3125  0F17  77          	ld	(hl),a
3126  0F18  21 00 00    	ld	hl,_s_lin1
3127  0F1B  7E          	ld	a, (hl)
3128  0F1C  C6 10       	add	a,0x10
3129  0F1E  77          	ld	(hl),a
3130  0F1F  47          	ld	b,a
3131  0F20  79          	ld	a, c
3132  0F21  90          	sub	a, b
3133  0F22  20 04       	jr	NZ,l_player_move_jump_00252
3134  0F24  3E 01       	ld	a,0x01
3135  0F26  18 01       	jr	l_player_move_jump_00253
3136  0F28              l_player_move_jump_00252:
3137  0F28  AF          	xor	a,a
3138  0F29              l_player_move_jump_00253:
3139  0F29  EE 01       	xor	a,0x01
3140  0F2B  CA C6 0F    	jp	Z, l_player_move_jump_00137
3141  0F2E  2A 00 00    	ld	hl,(_sprite)
3142  0F31  26 00       	ld	h,0x00
3143  0F33  01 00 00    	ld	bc,_col
3144  0F36  09          	add	hl,bc
3145  0F37  7E          	ld	a,(hl)
3146  0F38  F5          	push	af
3147  0F39  33          	inc	sp
3148  0F3A  3A 00 00    	ld	a,(_s_lin1)
3149  0F3D  F5          	push	af
3150  0F3E  33          	inc	sp
3151  0F3F  CD 00 00    	call	_game_check_map
3152  0F42  F1          	pop	af
3153  0F43  45          	ld	b, l
3154  0F44  5C          	ld	e, h
3155  0F45  21 00 00    	ld	hl,_s_lin1
3156  0F48  7E          	ld	a, (hl)
3157  0F49  C6 F0       	add	a,0xf0
3158  0F4B  4F          	ld	c, a
3159  0F4C  7B          	ld	a, e
3160  0F4D  B0          	or	a,b
3161  0F4E  28 63       	jr	Z,l_player_move_jump_00134
3162  0F50  71          	ld	(hl), c
3163  0F51  2E 00       	ld	l,0x00
3164  0F53  CD AA 04    	call	_player_check_stairs
3165  0F56  3A 00 00    	ld	a,(_player_over_stair)
3166  0F59  B7          	or	a, a
3167  0F5A  20 05       	jr	NZ,l_player_move_jump_00127
3168  0F5C  2E 01       	ld	l,0x01
3169  0F5E  CD AA 04    	call	_player_check_stairs
3170  0F61              l_player_move_jump_00127:
3171  0F61  3A 00 00    	ld	a,(_player_over_stair)
3172  0F64  B7          	or	a, a
3173  0F65  20 31       	jr	NZ,l_player_move_jump_00132
3174  0F67  21 00 00    	ld	hl,_s_lin1
3175  0F6A  7E          	ld	a, (hl)
3176  0F6B  07          	rlca
3177  0F6C  07          	rlca
3178  0F6D  07          	rlca
3179  0F6E  07          	rlca
3180  0F6F  E6 0F       	and	a,0x0f
3181  0F71  07          	rlca
3182  0F72  07          	rlca
3183  0F73  07          	rlca
3184  0F74  07          	rlca
3185  0F75  E6 F0       	and	a,0xf0
3186  0F77  77          	ld	(hl), a
3187  0F78  2A 00 00    	ld	hl,(_sprite)
3188  0F7B  26 00       	ld	h,0x00
3189  0F7D  01 00 00    	ld	bc,_lin
3190  0F80  09          	add	hl,bc
3191  0F81  5E          	ld	e,(hl)
3192  0F82  4D          	ld	c,l
3193  0F83  44          	ld	b,h
3194  0F84  21 00 00    	ld	hl,_s_lin1
3195  0F87  7E          	ld	a, (hl)
3196  0F88  93          	sub	a, e
3197  0F89  30 09       	jr	NC,l_player_move_jump_00129
3198  0F8B  7E          	ld	a, (hl)
3199  0F8C  C6 10       	add	a,0x10
3200  0F8E  02          	ld	(bc), a
3201  0F8F  2E 00       	ld	l,0x00
3202  0F91  C3 11 10    	jp	l_player_move_jump_00151
3203  0F94              l_player_move_jump_00129:
3204  0F94  3A 00 00    	ld	a,(_s_lin1)
3205  0F97  02          	ld	(bc), a
3206  0F98              l_player_move_jump_00132:
3207  0F98  21 00 00    	ld	hl,_player_vel_y
3208  0F9B  36 00       	ld	(hl),0x00
3209  0F9D  21 00 00    	ld	hl,_s_state
3210  0FA0  7E          	ld	a,(hl)
3211  0FA1  E6 FC       	and	a,+(0xfd&0xfe)
3212  0FA3  77          	ld	(hl),a
3213  0FA4  2A 00 00    	ld	hl,(_sprite)
3214  0FA7  26 00       	ld	h,0x00
3215  0FA9  01 00 00    	ld	bc,_colint
3216  0FAC  09          	add	hl,bc
3217  0FAD  AF          	xor	a,a
3218  0FAE  77          	ld	(hl),a
3219  0FAF  2E 01       	ld	l,0x01
3220  0FB1  18 5E       	jr	l_player_move_jump_00151
3221  0FB3              l_player_move_jump_00134:
3222  0FB3  21 00 00    	ld	hl,_s_lin1
3223  0FB6  71          	ld	(hl), c
3224  0FB7  2A 00 00    	ld	hl,(_sprite)
3225  0FBA  26 00       	ld	h,0x00
3226  0FBC  01 00 00    	ld	bc,_lin
3227  0FBF  09          	add	hl,bc
3228  0FC0  3A 00 00    	ld	a,(_s_lin1)
3229  0FC3  77          	ld	(hl),a
3230  0FC4  18 0D       	jr	l_player_move_jump_00141
3231  0FC6              l_player_move_jump_00137:
3232  0FC6  21 00 00    	ld	hl,_s_lin1
3233  0FC9  7E          	ld	a, (hl)
3234  0FCA  C6 F0       	add	a,0xf0
3235  0FCC  77          	ld	(hl), a
3236  0FCD  E1          	pop	hl
3237  0FCE  3A 00 00    	ld	a,(_s_lin1)
3238  0FD1  E5          	push	hl
3239  0FD2  77          	ld	(hl),a
3240  0FD3              l_player_move_jump_00141:
3241  0FD3  21 00 00    	ld	hl,_s_state
3242  0FD6  CB 5E       	bit	3, (hl)
3243  0FD8  20 27       	jr	NZ,l_player_move_jump_00147
3244  0FDA  21 00 00    	ld	hl,_s_state
3245  0FDD  CB 56       	bit	2, (hl)
3246  0FDF  20 20       	jr	NZ,l_player_move_jump_00147
3247  0FE1  21 00 00    	ld	hl,_dirs
3248  0FE4  CB 56       	bit	2, (hl)
3249  0FE6  28 09       	jr	Z,l_player_move_jump_00143
3250  0FE8  21 00 00    	ld	hl,_s_state
3251  0FEB  7E          	ld	a,(hl)
3252  0FEC  F6 08       	or	a,0x08
3253  0FEE  E6 FB       	and	a,0xfb
3254  0FF0  77          	ld	(hl),a
3255  0FF1              l_player_move_jump_00143:
3256  0FF1  21 00 00    	ld	hl,_dirs
3257  0FF4  CB 5E       	bit	3, (hl)
3258  0FF6  28 09       	jr	Z,l_player_move_jump_00147
3259  0FF8  21 00 00    	ld	hl,_s_state
3260  0FFB  7E          	ld	a,(hl)
3261  0FFC  F6 04       	or	a,0x04
3262  0FFE  E6 F7       	and	a,0xf7
3263  1000  77          	ld	(hl),a
3264  1001              l_player_move_jump_00147:
3265  1001  CD 00 00    	call	_spr_move_horizontal
3266  1004  7D          	ld	a, l
3267  1005  B7          	or	a, a
3268  1006  28 07       	jr	Z,l_player_move_jump_00150
3269  1008  21 00 00    	ld	hl,_s_state
3270  100B  7E          	ld	a,(hl)
3271  100C  E6 F3       	and	a,+(0xf7&0xfb)
3272  100E  77          	ld	(hl),a
3273  100F              l_player_move_jump_00150:
3274  100F  2E 00       	ld	l,0x00
3275  1011              l_player_move_jump_00151:
3276  1011  F1          	pop	af
3277  1012  DD E1       	pop	ix
3278  1014  C9          	ret
3279  1015              	SECTION code_compiler
3280  1015              ;	---------------------------------
3281  1015              ; Function player_open_door
3282  1015              ; ---------------------------------
3283  1015              _player_open_door:
3284  1015  CD 00 00    	call	___sdcc_enter_ix
3285  1018  0E 00       	ld	c,0x00
3286  101A  DD 7E 06    	ld	a,(ix+6)
3287  101D  D6 48       	sub	a,0x48
3288  101F  28 17       	jr	Z,l_player_open_door_00101
3289  1021  DD 7E 06    	ld	a,(ix+6)
3290  1024  D6 49       	sub	a,0x49
3291  1026  28 1F       	jr	Z,l_player_open_door_00104
3292  1028  DD 7E 06    	ld	a,(ix+6)
3293  102B  D6 4A       	sub	a,0x4a
3294  102D  28 27       	jr	Z,l_player_open_door_00107
3295  102F  DD 7E 06    	ld	a,(ix+6)
3296  1032  D6 4B       	sub	a,0x4b
3297  1034  28 2F       	jr	Z,l_player_open_door_00110
3298  1036  18 3A       	jr	l_player_open_door_00113
3299  1038              l_player_open_door_00101:
3300  1038  3A 00 00    	ld	a,(_player_keys)
3301  103B  B7          	or	a, a
3302  103C  28 34       	jr	Z,l_player_open_door_00113
3303  103E  2E 07       	ld	l,0x07
3304  1040  CD 00 00    	call	_zx_border_fastcall
3305  1043  0E 01       	ld	c,0x01
3306  1045  18 2B       	jr	l_player_open_door_00113
3307  1047              l_player_open_door_00104:
3308  1047  3A 01 00    	ld	a,(_player_keys + 0x0001)
3309  104A  B7          	or	a, a
3310  104B  28 25       	jr	Z,l_player_open_door_00113
3311  104D  2E 02       	ld	l,0x02
3312  104F  CD 00 00    	call	_zx_border_fastcall
3313  1052  0E 01       	ld	c,0x01
3314  1054  18 1C       	jr	l_player_open_door_00113
3315  1056              l_player_open_door_00107:
3316  1056  3A 02 00    	ld	a,(_player_keys + 0x0002)
3317  1059  B7          	or	a, a
3318  105A  28 16       	jr	Z,l_player_open_door_00113
3319  105C  2E 04       	ld	l,0x04
3320  105E  CD 00 00    	call	_zx_border_fastcall
3321  1061  0E 01       	ld	c,0x01
3322  1063  18 0D       	jr	l_player_open_door_00113
3323  1065              l_player_open_door_00110:
3324  1065  3A 03 00    	ld	a,(_player_keys + 0x0003)
3325  1068  B7          	or	a, a
3326  1069  28 07       	jr	Z,l_player_open_door_00113
3327  106B  2E 05       	ld	l,0x05
3328  106D  CD 00 00    	call	_zx_border_fastcall
3329  1070  0E 01       	ld	c,0x01
3330  1072              l_player_open_door_00113:
3331  1072  79          	ld	a, c
3332  1073  B7          	or	a, a
3333  1074  20 06       	jr	NZ,l_player_open_door_00114
3334  1076  3A 00 00    	ld	a,(_game_inmune)
3335  1079  B7          	or	a, a
3336  107A  28 24       	jr	Z,l_player_open_door_00117
3337  107C              l_player_open_door_00114:
3338  107C  3E 00       	ld	a, +((_scr_map) & 0xFF)
3339  107E  DD 86 04    	add	a,(ix+4)
3340  1081  4F          	ld	c, a
3341  1082  3E 00       	ld	a, +((_scr_map) / 256)
3342  1084  DD 8E 05    	adc	a,(ix+5)
3343  1087  47          	ld	b, a
3344  1088  AF          	xor	a, a
3345  1089  02          	ld	(bc), a
3346  108A  DD 6E 04    	ld	l,(ix+4)
3347  108D  DD 66 05    	ld	h,(ix+5)
3348  1090  E5          	push	hl
3349  1091  CD 00 00    	call	_game_obj_set
3350  1094  F1          	pop	af
3351  1095  DD 6E 04    	ld	l,(ix+4)
3352  1098  DD 66 05    	ld	h,(ix+5)
3353  109B  E5          	push	hl
3354  109C  CD 00 00    	call	_spr_draw_index
3355  109F  F1          	pop	af
3356  10A0              l_player_open_door_00117:
3357  10A0  DD E1       	pop	ix
3358  10A2  C9          	ret
3359  10A3              	SECTION code_compiler
3360  10A3              ;	---------------------------------
3361  10A3              ; Function player_lost_life
3362  10A3              ; ---------------------------------
3363  10A3              _player_lost_life:
3364  10A3  CD 00 00    	call	___sdcc_enter_ix
3365  10A6  F5          	push	af
3366  10A7  3B          	dec	sp
3367  10A8  3A 07 00    	ld	a,(_lin + 7)
3368  10AB  32 00 00    	ld	(_s_lin0),a
3369  10AE  3A 07 00    	ld	a,(_col + 7)
3370  10B1  32 00 00    	ld	(_s_col0),a
3371  10B4  CD 00 00    	call	_spr_init_anim_bullets
3372  10B7  01 00 00    	ld	bc,_anim_lin+0
3373  10BA  16 00       	ld	d,0x00
3374  10BC              l_player_lost_life_00115:
3375  10BC  C5          	push	bc
3376  10BD  D5          	push	de
3377  10BE  21 00 00    	ld	hl,0x0000
3378  10C1  E5          	push	hl
3379  10C2  AF          	xor	a, a
3380  10C3  5A          	ld	e,d
3381  10C4  57          	ld	d,a
3382  10C5  D5          	push	de
3383  10C6  CD 00 00    	call	_NIRVANAP_spriteT_callee
3384  10C9  D1          	pop	de
3385  10CA  C1          	pop	bc
3386  10CB  6A          	ld	l,d
3387  10CC  26 00       	ld	h,0x00
3388  10CE  09          	add	hl, bc
3389  10CF  36 FF       	ld	(hl),0xff
3390  10D1  14          	inc	d
3391  10D2  7A          	ld	a, d
3392  10D3  D6 08       	sub	a,0x08
3393  10D5  38 E5       	jr	C,l_player_lost_life_00115
3394  10D7  21 00 00    	ld	hl,_anim_count
3395  10DA  36 00       	ld	(hl),0x00
3396  10DC  76          	halt
3397  10DD  3A 00 00    	ld	a,(_s_lin0)
3398  10E0  C6 F0       	add	a,0xf0
3399  10E2  47          	ld	b, a
3400  10E3  3A 00 00    	ld	a,(_s_col0)
3401  10E6  21 00 00    	ld	hl,0x0000
3402  10E9  E5          	push	hl
3403  10EA  21 87 03    	ld	hl,0x0387
3404  10ED  E5          	push	hl
3405  10EE  48          	ld	c,b
3406  10EF  47          	ld	b,a
3407  10F0  C5          	push	bc
3408  10F1  CD 00 00    	call	_spr_add_anim
3409  10F4  F1          	pop	af
3410  10F5  F1          	pop	af
3411  10F6  F1          	pop	af
3412  10F7  21 00 00    	ld	hl,_s_col0
3413  10FA  46          	ld	b, (hl)
3414  10FB  05          	dec	b
3415  10FC  05          	dec	b
3416  10FD  21 00 00    	ld	hl,0x0000
3417  1100  E5          	push	hl
3418  1101  21 87 03    	ld	hl,0x0387
3419  1104  E5          	push	hl
3420  1105  C5          	push	bc
3421  1106  33          	inc	sp
3422  1107  3A 00 00    	ld	a,(_s_lin0)
3423  110A  F5          	push	af
3424  110B  33          	inc	sp
3425  110C  CD 00 00    	call	_spr_add_anim
3426  110F  F1          	pop	af
3427  1110  F1          	pop	af
3428  1111  21 00 00    	ld	hl,0x0000
3429  1114  E3          	ex	(sp),hl
3430  1115  3A 00 00    	ld	a,(_s_col0)
3431  1118  21 87 03    	ld	hl,0x0387
3432  111B  E5          	push	hl
3433  111C  F5          	push	af
3434  111D  33          	inc	sp
3435  111E  3A 00 00    	ld	a,(_s_lin0)
3436  1121  F5          	push	af
3437  1122  33          	inc	sp
3438  1123  CD 00 00    	call	_spr_add_anim
3439  1126  F1          	pop	af
3440  1127  F1          	pop	af
3441  1128  F1          	pop	af
3442  1129  21 00 00    	ld	hl,_s_col0
3443  112C  46          	ld	b, (hl)
3444  112D  04          	inc	b
3445  112E  04          	inc	b
3446  112F  21 00 00    	ld	hl,0x0000
3447  1132  E5          	push	hl
3448  1133  21 87 03    	ld	hl,0x0387
3449  1136  E5          	push	hl
3450  1137  C5          	push	bc
3451  1138  33          	inc	sp
3452  1139  3A 00 00    	ld	a,(_s_lin0)
3453  113C  F5          	push	af
3454  113D  33          	inc	sp
3455  113E  CD 00 00    	call	_spr_add_anim
3456  1141  F1          	pop	af
3457  1142  F1          	pop	af
3458  1143  F1          	pop	af
3459  1144  3A 00 00    	ld	a,(_s_lin0)
3460  1147  C6 10       	add	a,0x10
3461  1149  47          	ld	b, a
3462  114A  3A 00 00    	ld	a,(_s_col0)
3463  114D  21 00 00    	ld	hl,0x0000
3464  1150  E5          	push	hl
3465  1151  21 87 03    	ld	hl,0x0387
3466  1154  E5          	push	hl
3467  1155  48          	ld	c,b
3468  1156  47          	ld	b,a
3469  1157  C5          	push	bc
3470  1158  CD 00 00    	call	_spr_add_anim
3471  115B  F1          	pop	af
3472  115C  F1          	pop	af
3473  115D  F1          	pop	af
3474  115E  2E 00       	ld	l,0x00
3475  1160  CD 00 00    	call	_zx_border_fastcall
3476  1163  DD 36 FD 01 	ld	(ix-3),0x01
3477  1167  2A 00 00    	ld	hl,(_curr_time)
3478  116A  22 00 00    	ld	(_anim_time),hl
3479  116D              l_player_lost_life_00107:
3480  116D  DD 7E FD    	ld	a,(ix-3)
3481  1170  B7          	or	a, a
3482  1171  28 28       	jr	Z,l_player_lost_life_00109
3483  1173  21 0C 00    	ld	hl,0x000c
3484  1176  E5          	push	hl
3485  1177  2A 00 00    	ld	hl,(_anim_time)
3486  117A  E5          	push	hl
3487  117B  CD 00 00    	call	_game_check_time
3488  117E  F1          	pop	af
3489  117F  F1          	pop	af
3490  1180  7D          	ld	a, l
3491  1181  B7          	or	a, a
3492  1182  28 E9       	jr	Z,l_player_lost_life_00107
3493  1184  2A 00 00    	ld	hl,(_curr_time)
3494  1187  22 00 00    	ld	(_anim_time),hl
3495  118A  3A 00 00    	ld	a,(_anim_count)
3496  118D  B7          	or	a,a
3497  118E  28 05       	jr	Z,l_player_lost_life_00103
3498  1190  CD 00 00    	call	_spr_play_anim
3499  1193  18 D8       	jr	l_player_lost_life_00107
3500  1195              l_player_lost_life_00103:
3501  1195  DD 36 FD 00 	ld	(ix-3),0x00
3502  1199  18 D2       	jr	l_player_lost_life_00107
3503  119B              l_player_lost_life_00109:
3504  119B  21 00 00    	ld	hl,_sprite
3505  119E  36 00       	ld	(hl),0x00
3506  11A0              l_player_lost_life_00117:
3507  11A0  2A 00 00    	ld	hl,(_sprite)
3508  11A3  26 00       	ld	h,0x00
3509  11A5  01 00 00    	ld	bc,_class
3510  11A8  09          	add	hl,bc
3511  11A9  7E          	ld	a,(hl)
3512  11AA  B7          	or	a,a
3513  11AB  28 43       	jr	Z,l_player_lost_life_00111
3514  11AD  2A 00 00    	ld	hl,(_sprite)
3515  11B0  26 00       	ld	h,0x00
3516  11B2  01 00 00    	ld	bc,_col
3517  11B5  09          	add	hl,bc
3518  11B6  4E          	ld	c, (hl)
3519  11B7  2A 00 00    	ld	hl,(_sprite)
3520  11BA  26 00       	ld	h,0x00
3521  11BC  11 00 00    	ld	de,_lin
3522  11BF  19          	add	hl,de
3523  11C0  46          	ld	b, (hl)
3524  11C1  2A 00 00    	ld	hl,(_sprite)
3525  11C4  26 00       	ld	h,0x00
3526  11C6  11 00 00    	ld	de,_tile
3527  11C9  19          	add	hl,de
3528  11CA  5E          	ld	e, (hl)
3529  11CB  3E 00       	ld	a,+((_colint) & 0xFF)
3530  11CD  21 00 00    	ld	hl,_sprite
3531  11D0  86          	add	a, (hl)
3532  11D1  DD 77 FE    	ld	(ix-2),a
3533  11D4  6F          	ld	l,a
3534  11D5  3E 00       	ld	a,+((_colint) / 256)
3535  11D7  CE 00       	adc	a,0x00
3536  11D9  DD 77 FF    	ld	(ix-1),a
3537  11DC  67          	ld	h,a
3538  11DD  6E          	ld	l, (hl)
3539  11DE  7B          	ld	a, e
3540  11DF  85          	add	a, l
3541  11E0  5F          	ld	e, a
3542  11E1  79          	ld	a, c
3543  11E2  48          	ld	c,b
3544  11E3  47          	ld	b,a
3545  11E4  C5          	push	bc
3546  11E5  7B          	ld	a, e
3547  11E6  F5          	push	af
3548  11E7  33          	inc	sp
3549  11E8  3A 00 00    	ld	a,(_sprite)
3550  11EB  F5          	push	af
3551  11EC  33          	inc	sp
3552  11ED  CD 00 00    	call	_NIRVANAP_spriteT_callee
3553  11F0              l_player_lost_life_00111:
3554  11F0  2A 00 00    	ld	hl,(_sprite)
3555  11F3  26 00       	ld	h,0x00
3556  11F5  01 00 00    	ld	bc,_class
3557  11F8  09          	add	hl,bc
3558  11F9  AF          	xor	a,a
3559  11FA  77          	ld	(hl),a
3560  11FB  2A 00 00    	ld	hl,(_sprite)
3561  11FE  26 00       	ld	h,0x00
3562  1200  01 00 00    	ld	bc,_bullet_col
3563  1203  09          	add	hl,bc
3564  1204  36 FF       	ld	(hl),0xff
3565  1206  21 00 00    	ld	hl,_sprite
3566  1209  7E          	ld	a,(hl)
3567  120A  3C          	inc	a
3568  120B  77          	ld	(hl),a
3569  120C  D6 07       	sub	a,0x07
3570  120E  38 90       	jr	C,l_player_lost_life_00117
3571  1210  3A 00 00    	ld	a,(_player_lives)
3572  1213  B7          	or	a, a
3573  1214  28 09       	jr	Z,l_player_lost_life_00119
3574  1216  21 F4 01    	ld	hl,0x01f4
3575  1219  CD 00 00    	call	_z80_delay_ms_fastcall
3576  121C  CD 00 00    	call	_game_round_init
3577  121F              l_player_lost_life_00119:
3578  121F  DD F9       	ld	sp, ix
3579  1221  DD E1       	pop	ix
3580  1223  C9          	ret
3581  1224              	SECTION code_compiler
3582  1224              ;	---------------------------------
3583  1224              ; Function player_hit
3584  1224              ; ---------------------------------
3585  1224              _player_hit:
3586  1224  7D          	ld	a,l
3587  1225  4D          	ld	c,l
3588  1226  21 00 00    	ld	hl,_player_vita
3589  1229  96          	sub	a, (hl)
3590  122A  30 17       	jr	NC,l_player_hit_00107
3591  122C  3A 00 00    	ld	a,(_game_inmune)
3592  122F  B7          	or	a, a
3593  1230  20 06       	jr	NZ,l_player_hit_00102
3594  1232  21 00 00    	ld	hl,_player_vita
3595  1235  7E          	ld	a, (hl)
3596  1236  91          	sub	a, c
3597  1237  77          	ld	(hl), a
3598  1238              l_player_hit_00102:
3599  1238  2A 00 00    	ld	hl,(_curr_time)
3600  123B  22 00 00    	ld	(_player_hit_time),hl
3601  123E  CD 00 00    	call	_game_update_stats
3602  1241  18 2C       	jr	l_player_hit_00109
3603  1243              l_player_hit_00107:
3604  1243  21 00 00    	ld	hl,_player_vita
3605  1246  36 00       	ld	(hl),0x00
3606  1248  CD 00 00    	call	_game_update_stats
3607  124B  CD A3 10    	call	_player_lost_life
3608  124E  21 00 00    	ld	hl,_player_lives
3609  1251  7E          	ld	a, (hl)
3610  1252  B7          	or	a, a
3611  1253  28 10       	jr	Z,l_player_hit_00104
3612  1255  35          	dec	(hl)
3613  1256  21 00 00    	ld	hl,_player_mana
3614  1259  36 64       	ld	(hl),0x64
3615  125B  21 00 00    	ld	hl,_player_vita
3616  125E  36 64       	ld	(hl),0x64
3617  1260  CD 00 00    	call	_game_update_stats
3618  1263  18 0A       	jr	l_player_hit_00109
3619  1265              l_player_hit_00104:
3620  1265  21 00 00    	ld	hl,_player_lives
3621  1268  36 00       	ld	(hl),0x00
3622  126A  21 00 00    	ld	hl,_game_over
3623  126D  36 01       	ld	(hl),0x01
3624  126F              l_player_hit_00109:
3625  126F  C9          	ret
3626  1270              	SECTION IGNORE
3627  0000              
