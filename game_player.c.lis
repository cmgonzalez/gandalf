1     0000              MODULE game_player_c
2     0000              
3     0000              ;--------------------------------------------------------
4     0000              ; File Created by SDCC : free open source ANSI-C Compiler
5     0000              ; Version 3.6.5 #9958 (Mac OS X i386)
6     0000              ;--------------------------------------------------------
7     0000              ; Processed by Z88DK
8     0000              ;--------------------------------------------------------
9     0000              
10    0000              	EXTERN __divschar
11    0000              	EXTERN __divschar_callee
12    0000              	EXTERN __divsint
13    0000              	EXTERN __divsint_callee
14    0000              	EXTERN __divslong
15    0000              	EXTERN __divslong_callee
16    0000              	EXTERN __divslonglong
17    0000              	EXTERN __divslonglong_callee
18    0000              	EXTERN __divsuchar
19    0000              	EXTERN __divsuchar_callee
20    0000              	EXTERN __divuchar
21    0000              	EXTERN __divuchar_callee
22    0000              	EXTERN __divuint
23    0000              	EXTERN __divuint_callee
24    0000              	EXTERN __divulong
25    0000              	EXTERN __divulong_callee
26    0000              	EXTERN __divulonglong
27    0000              	EXTERN __divulonglong_callee
28    0000              	EXTERN __divuschar
29    0000              	EXTERN __divuschar_callee
30    0000              	EXTERN __modschar
31    0000              	EXTERN __modschar_callee
32    0000              	EXTERN __modsint
33    0000              	EXTERN __modsint_callee
34    0000              	EXTERN __modslong
35    0000              	EXTERN __modslong_callee
36    0000              	EXTERN __modslonglong
37    0000              	EXTERN __modslonglong_callee
38    0000              	EXTERN __modsuchar
39    0000              	EXTERN __modsuchar_callee
40    0000              	EXTERN __moduchar
41    0000              	EXTERN __moduchar_callee
42    0000              	EXTERN __moduint
43    0000              	EXTERN __moduint_callee
44    0000              	EXTERN __modulong
45    0000              	EXTERN __modulong_callee
46    0000              	EXTERN __modulonglong
47    0000              	EXTERN __modulonglong_callee
48    0000              	EXTERN __moduschar
49    0000              	EXTERN __moduschar_callee
50    0000              	EXTERN __mulint
51    0000              	EXTERN __mulint_callee
52    0000              	EXTERN __mullong
53    0000              	EXTERN __mullong_callee
54    0000              	EXTERN __mullonglong
55    0000              	EXTERN __mullonglong_callee
56    0000              	EXTERN __mulschar
57    0000              	EXTERN __mulschar_callee
58    0000              	EXTERN __mulsuchar
59    0000              	EXTERN __mulsuchar_callee
60    0000              	EXTERN __muluschar
61    0000              	EXTERN __muluschar_callee
62    0000              	EXTERN __rlslonglong
63    0000              	EXTERN __rlslonglong_callee
64    0000              	EXTERN __rlulonglong
65    0000              	EXTERN __rlulonglong_callee
66    0000              	EXTERN __rrslonglong
67    0000              	EXTERN __rrslonglong_callee
68    0000              	EXTERN __rrulonglong
69    0000              	EXTERN __rrulonglong_callee
70    0000              	EXTERN ___sdcc_call_hl
71    0000              	EXTERN ___sdcc_call_iy
72    0000              	EXTERN ___sdcc_enter_ix
73    0000              	EXTERN _banked_call
74    0000              	EXTERN _banked_ret
75    0000              	EXTERN ___fs2schar
76    0000              	EXTERN ___fs2schar_callee
77    0000              	EXTERN ___fs2sint
78    0000              	EXTERN ___fs2sint_callee
79    0000              	EXTERN ___fs2slong
80    0000              	EXTERN ___fs2slong_callee
81    0000              	EXTERN ___fs2slonglong
82    0000              	EXTERN ___fs2slonglong_callee
83    0000              	EXTERN ___fs2uchar
84    0000              	EXTERN ___fs2uchar_callee
85    0000              	EXTERN ___fs2uint
86    0000              	EXTERN ___fs2uint_callee
87    0000              	EXTERN ___fs2ulong
88    0000              	EXTERN ___fs2ulong_callee
89    0000              	EXTERN ___fs2ulonglong
90    0000              	EXTERN ___fs2ulonglong_callee
91    0000              	EXTERN ___fsadd
92    0000              	EXTERN ___fsadd_callee
93    0000              	EXTERN ___fsdiv
94    0000              	EXTERN ___fsdiv_callee
95    0000              	EXTERN ___fseq
96    0000              	EXTERN ___fseq_callee
97    0000              	EXTERN ___fsgt
98    0000              	EXTERN ___fsgt_callee
99    0000              	EXTERN ___fslt
100   0000              	EXTERN ___fslt_callee
101   0000              	EXTERN ___fsmul
102   0000              	EXTERN ___fsmul_callee
103   0000              	EXTERN ___fsneq
104   0000              	EXTERN ___fsneq_callee
105   0000              	EXTERN ___fssub
106   0000              	EXTERN ___fssub_callee
107   0000              	EXTERN ___schar2fs
108   0000              	EXTERN ___schar2fs_callee
109   0000              	EXTERN ___sint2fs
110   0000              	EXTERN ___sint2fs_callee
111   0000              	EXTERN ___slong2fs
112   0000              	EXTERN ___slong2fs_callee
113   0000              	EXTERN ___slonglong2fs
114   0000              	EXTERN ___slonglong2fs_callee
115   0000              	EXTERN ___uchar2fs
116   0000              	EXTERN ___uchar2fs_callee
117   0000              	EXTERN ___uint2fs
118   0000              	EXTERN ___uint2fs_callee
119   0000              	EXTERN ___ulong2fs
120   0000              	EXTERN ___ulong2fs_callee
121   0000              	EXTERN ___ulonglong2fs
122   0000              	EXTERN ___ulonglong2fs_callee
123   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
126   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
127   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
128   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
129   0000              	EXTERN ____sdcc_4_ldi_save_bc
130   0000              	EXTERN ____sdcc_4_push_hlix
131   0000              	EXTERN ____sdcc_4_push_mhl
132   0000              	EXTERN ____sdcc_lib_setmem_hl
133   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
134   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
135   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
136   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
137   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
138   0000              	EXTERN ____sdcc_ll_add_deix_hlix
139   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
140   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
141   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
142   0000              	EXTERN ____sdcc_ll_asr_hlix_a
143   0000              	EXTERN ____sdcc_ll_asr_mbc_a
144   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
145   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
146   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
147   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
148   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
149   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
150   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
151   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
152   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
153   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
155   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
156   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
157   0000              	EXTERN ____sdcc_ll_push_hlix
158   0000              	EXTERN ____sdcc_ll_push_mhl
159   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
160   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
161   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
162   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
163   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
164   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
165   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
166   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
167   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
168   0000              	EXTERN ____sdcc_load_debc_deix
169   0000              	EXTERN ____sdcc_load_dehl_deix
170   0000              	EXTERN ____sdcc_load_debc_mhl
171   0000              	EXTERN ____sdcc_load_hlde_mhl
172   0000              	EXTERN ____sdcc_store_dehl_bcix
173   0000              	EXTERN ____sdcc_store_debc_hlix
174   0000              	EXTERN ____sdcc_store_debc_mhl
175   0000              	EXTERN ____sdcc_cpu_pop_ei
176   0000              	EXTERN ____sdcc_cpu_pop_ei_jp
177   0000              	EXTERN ____sdcc_cpu_push_di
178   0000              	EXTERN ____sdcc_outi
179   0000              	EXTERN ____sdcc_outi_128
180   0000              	EXTERN ____sdcc_outi_256
181   0000              	EXTERN ____sdcc_ldi
182   0000              	EXTERN ____sdcc_ldi_128
183   0000              	EXTERN ____sdcc_ldi_256
184   0000              
185   0000              ;--------------------------------------------------------
186   0000              ; Public variables in this module
187   0000              ;--------------------------------------------------------
188   0000              	GLOBAL _player_init
189   0000              	GLOBAL _player_calc_slide
190   0000              	GLOBAL _player_check_input
191   0000              	GLOBAL _player_collision
192   0000              	GLOBAL _player_kill
193   0000              	GLOBAL _player_restart
194   0000              	GLOBAL _player_lost_life
195   0000              	GLOBAL _player_turn
196   0000              	GLOBAL _player_move
197   0000              	GLOBAL _player_move_input
198   0000              	GLOBAL _player_hit_brick
199   0000              	GLOBAL _player_hit_brick_clear
200   0000              	GLOBAL _player_coin
201   0000              	GLOBAL _player_score_add
202   0000              	GLOBAL _player_check_floor
203   0000              ;--------------------------------------------------------
204   0000              ; Externals used
205   0000              ;--------------------------------------------------------
206   0000              	GLOBAL _debug3
207   0000              	GLOBAL _debug2
208   0000              	GLOBAL _debug
209   0000              	GLOBAL _zx_print_str
210   0000              	GLOBAL _zx_print_int
211   0000              	GLOBAL _zx_print_chr
212   0000              	GLOBAL _zx_print_bonus_time
213   0000              	GLOBAL _zx_isr
214   0000              	GLOBAL _z80_otdr_callee
215   0000              	GLOBAL _z80_otdr
216   0000              	GLOBAL _z80_otir_callee
217   0000              	GLOBAL _z80_otir
218   0000              	GLOBAL _z80_outp_callee
219   0000              	GLOBAL _z80_outp
220   0000              	GLOBAL _z80_indr_callee
221   0000              	GLOBAL _z80_indr
222   0000              	GLOBAL _z80_inir_callee
223   0000              	GLOBAL _z80_inir
224   0000              	GLOBAL _z80_inp_fastcall
225   0000              	GLOBAL _z80_inp
226   0000              	GLOBAL _z80_set_int_state_fastcall
227   0000              	GLOBAL _z80_set_int_state
228   0000              	GLOBAL _z80_get_int_state
229   0000              	GLOBAL _z80_delay_tstate_fastcall
230   0000              	GLOBAL _z80_delay_tstate
231   0000              	GLOBAL _z80_delay_ms_fastcall
232   0000              	GLOBAL _z80_delay_ms
233   0000              	GLOBAL _im2_remove_generic_callback_callee
234   0000              	GLOBAL _im2_remove_generic_callback
235   0000              	GLOBAL _im2_prepend_generic_callback_callee
236   0000              	GLOBAL _im2_prepend_generic_callback
237   0000              	GLOBAL _im2_append_generic_callback_callee
238   0000              	GLOBAL _im2_append_generic_callback
239   0000              	GLOBAL _im2_create_generic_isr_8080_callee
240   0000              	GLOBAL _im2_create_generic_isr_8080
241   0000              	GLOBAL _im2_create_generic_isr_callee
242   0000              	GLOBAL _im2_create_generic_isr
243   0000              	GLOBAL _im2_install_isr_callee
244   0000              	GLOBAL _im2_install_isr
245   0000              	GLOBAL _im2_init_fastcall
246   0000              	GLOBAL _im2_init
247   0000              	GLOBAL _sound_hit_brick
248   0000              	GLOBAL _sound_hit_enemy
249   0000              	GLOBAL _sound_kill
250   0000              	GLOBAL _sound_enter_enemy
251   0000              	GLOBAL _sound_coin
252   0000              	GLOBAL _sound_jump
253   0000              	GLOBAL _sound_slide
254   0000              	GLOBAL _spr_page_right
255   0000              	GLOBAL _spr_page_left
256   0000              	GLOBAL _spr_tile_paint
257   0000              	GLOBAL _spr_kill_all
258   0000              	GLOBAL _spr_collision_check
259   0000              	GLOBAL _spr_calc_hor
260   0000              	GLOBAL _spr_draw_row
261   0000              	GLOBAL _spr_draw_index
262   0000              	GLOBAL _spr_draw_clear
263   0000              	GLOBAL _spr_draw_background
264   0000              	GLOBAL _spr_brick_anim
265   0000              	GLOBAL _spr_back_paint
266   0000              	GLOBAL _spr_back_clr
267   0000              	GLOBAL _spr_tile
268   0000              	GLOBAL _spr_set_fall
269   0000              	GLOBAL _spr_destroy
270   0000              	GLOBAL _spr_tile_dir
271   0000              	GLOBAL _spr_anim_kill
272   0000              	GLOBAL _spr_killed
273   0000              	GLOBAL _spr_redraw
274   0000              	GLOBAL _spr_move_left
275   0000              	GLOBAL _spr_move_right
276   0000              	GLOBAL _spr_move_horizontal
277   0000              	GLOBAL _spr_move_down
278   0000              	GLOBAL _spr_move_up
279   0000              	GLOBAL _spr_check_map
280   0000              	GLOBAL _spr_calc_index
281   0000              	GLOBAL _spr_chktime
282   0000              	GLOBAL _game_joystick_set_menu
283   0000              	GLOBAL _game_joystick_set
284   0000              	GLOBAL _game_joystick_change
285   0000              	GLOBAL _game_print_header
286   0000              	GLOBAL _game_end
287   0000              	GLOBAL _game_score_osd
288   0000              	GLOBAL _game_phase_print_score_back
289   0000              	GLOBAL _game_bonus_clock
290   0000              	GLOBAL _game_bonus_summary_player
291   0000              	GLOBAL _game_bonus_summary
292   0000              	GLOBAL _game_check_time
293   0000              	GLOBAL _game_menu_config
294   0000              	GLOBAL _game_menu
295   0000              	GLOBAL _game_rotate_attrib
296   0000              	GLOBAL _game_colour_message
297   0000              	GLOBAL _game_paint_attrib_lin_h
298   0000              	GLOBAL _game_paint_attrib_lin
299   0000              	GLOBAL _game_paint_attrib
300   0000              	GLOBAL _game_menu_paint
301   0000              	GLOBAL _game_menu_top_paint
302   0000              	GLOBAL _game_menu_handle
303   0000              	GLOBAL _game_menu_e
304   0000              	GLOBAL _game_menu_back
305   0000              	GLOBAL _game_print_score
306   0000              	GLOBAL _game_unfreeze_all
307   0000              	GLOBAL _game_freeze_all
308   0000              	GLOBAL _game_freeze
309   0000              	GLOBAL _game_enemy_add_get_index
310   0000              	GLOBAL _game_check_maze_floor
311   0000              	GLOBAL _game_check_maze
312   0000              	GLOBAL _game_loop
313   0000              	GLOBAL _game_phase_init
314   0000              	GLOBAL _game_start_timer
315   0000              	GLOBAL _game_tick
316   0000              	GLOBAL _game_print_lives
317   0000              	GLOBAL _game_print_footer
318   0000              	GLOBAL _game_fill_row
319   0000              	GLOBAL _enemy_ugly_fix
320   0000              	GLOBAL _enemy_kill
321   0000              	GLOBAL _enemy_init
322   0000              	GLOBAL _enemy_walk
323   0000              	GLOBAL _enemy_upgrade
324   0000              	GLOBAL _enemy_evolve
325   0000              	GLOBAL _enemy_standard_hit
326   0000              	GLOBAL _enemy_trip_move
327   0000              	GLOBAL _enemy_trip
328   0000              	GLOBAL _enemy_fighterfly
329   0000              	GLOBAL _enemy_fireball_green
330   0000              	GLOBAL _enemy_fireball_red
331   0000              	GLOBAL _enemy_slipice
332   0000              	GLOBAL _enemy_standard
333   0000              	GLOBAL _enemy_turn
334   0000              	GLOBAL _enemy_flip_sidestepper
335   0000              	GLOBAL _enemy_flip
336   0000              	GLOBAL _enemy_flip_change_dir
337   0000              	GLOBAL _enemy_hit
338   0000              	GLOBAL _enemy_collision_turn_dir
339   0000              	GLOBAL _enemy_collision
340   0000              	GLOBAL _enemy_coin1
341   0000              	GLOBAL _ay_fx_play
342   0000              	GLOBAL _ay_midi_play
343   0000              	GLOBAL _ay_is_playing
344   0000              	GLOBAL _ay_reset
345   0000              	GLOBAL _player_hit_pow
346   0000              	GLOBAL _test_func
347   0000              	GLOBAL _NIRVANAP_drawTW_raw_callee
348   0000              	GLOBAL _NIRVANAP_drawTW_raw
349   0000              	GLOBAL _NIRVANAP_drawTW_callee
350   0000              	GLOBAL _NIRVANAP_drawTW
351   0000              	GLOBAL _NIRVANAP_drawW_raw_callee
352   0000              	GLOBAL _NIRVANAP_drawW_raw
353   0000              	GLOBAL _NIRVANAP_drawW_callee
354   0000              	GLOBAL _NIRVANAP_drawW
355   0000              	GLOBAL _NIRVANAP_spriteT_callee
356   0000              	GLOBAL _NIRVANAP_spriteT
357   0000              	GLOBAL _NIRVANAP_fillC_callee
358   0000              	GLOBAL _NIRVANAP_fillC
359   0000              	GLOBAL _NIRVANAP_readC_callee
360   0000              	GLOBAL _NIRVANAP_readC
361   0000              	GLOBAL _NIRVANAP_paintC_callee
362   0000              	GLOBAL _NIRVANAP_paintC
363   0000              	GLOBAL _NIRVANAP_printC_callee
364   0000              	GLOBAL _NIRVANAP_printC
365   0000              	GLOBAL _NIRVANAP_fillT_raw_callee
366   0000              	GLOBAL _NIRVANAP_fillT_raw
367   0000              	GLOBAL _NIRVANAP_fillT_callee
368   0000              	GLOBAL _NIRVANAP_fillT
369   0000              	GLOBAL _NIRVANAP_drawT_raw_callee
370   0000              	GLOBAL _NIRVANAP_drawT_raw
371   0000              	GLOBAL _NIRVANAP_drawT_callee
372   0000              	GLOBAL _NIRVANAP_drawT
373   0000              	GLOBAL _NIRVANAP_stop
374   0000              	GLOBAL _NIRVANAP_start
375   0000              	GLOBAL _intrinsic_swap_word_32_fastcall
376   0000              	GLOBAL _intrinsic_swap_word_32
377   0000              	GLOBAL _intrinsic_swap_endian_32_fastcall
378   0000              	GLOBAL _intrinsic_swap_endian_32
379   0000              	GLOBAL _intrinsic_swap_endian_16_fastcall
380   0000              	GLOBAL _intrinsic_swap_endian_16
381   0000              	GLOBAL _intrinsic_return_de
382   0000              	GLOBAL _intrinsic_return_bc
383   0000              	GLOBAL _intrinsic_exx
384   0000              	GLOBAL _intrinsic_ex_de_hl
385   0000              	GLOBAL _intrinsic_nop
386   0000              	GLOBAL _intrinsic_im_2
387   0000              	GLOBAL _intrinsic_im_1
388   0000              	GLOBAL _intrinsic_im_0
389   0000              	GLOBAL _intrinsic_retn
390   0000              	GLOBAL _intrinsic_reti
391   0000              	GLOBAL _intrinsic_halt
392   0000              	GLOBAL _intrinsic_ei
393   0000              	GLOBAL _intrinsic_di
394   0000              	GLOBAL _intrinsic_stub
395   0000              	GLOBAL _intrinsic_outi
396   0000              	GLOBAL _intrinsic_ldi
397   0000              	GLOBAL _ulltoa_callee
398   0000              	GLOBAL _ulltoa
399   0000              	GLOBAL _strtoull_callee
400   0000              	GLOBAL _strtoull
401   0000              	GLOBAL _strtoll_callee
402   0000              	GLOBAL _strtoll
403   0000              	GLOBAL _lltoa_callee
404   0000              	GLOBAL _lltoa
405   0000              	GLOBAL _llabs_callee
406   0000              	GLOBAL _llabs
407   0000              	GLOBAL __lldivu__callee
408   0000              	GLOBAL __lldivu_
409   0000              	GLOBAL __lldiv__callee
410   0000              	GLOBAL __lldiv_
411   0000              	GLOBAL _atoll_callee
412   0000              	GLOBAL _atoll
413   0000              	GLOBAL _realloc_unlocked_callee
414   0000              	GLOBAL _realloc_unlocked
415   0000              	GLOBAL _malloc_unlocked_fastcall
416   0000              	GLOBAL _malloc_unlocked
417   0000              	GLOBAL _free_unlocked_fastcall
418   0000              	GLOBAL _free_unlocked
419   0000              	GLOBAL _calloc_unlocked_callee
420   0000              	GLOBAL _calloc_unlocked
421   0000              	GLOBAL _aligned_alloc_unlocked_callee
422   0000              	GLOBAL _aligned_alloc_unlocked
423   0000              	GLOBAL _realloc_callee
424   0000              	GLOBAL _realloc
425   0000              	GLOBAL _malloc_fastcall
426   0000              	GLOBAL _malloc
427   0000              	GLOBAL _free_fastcall
428   0000              	GLOBAL _free
429   0000              	GLOBAL _calloc_callee
430   0000              	GLOBAL _calloc
431   0000              	GLOBAL _aligned_alloc_callee
432   0000              	GLOBAL _aligned_alloc
433   0000              	GLOBAL _utoa_callee
434   0000              	GLOBAL _utoa
435   0000              	GLOBAL _ultoa_callee
436   0000              	GLOBAL _ultoa
437   0000              	GLOBAL _system_fastcall
438   0000              	GLOBAL _system
439   0000              	GLOBAL _strtoul_callee
440   0000              	GLOBAL _strtoul
441   0000              	GLOBAL _strtol_callee
442   0000              	GLOBAL _strtol
443   0000              	GLOBAL _strtof_callee
444   0000              	GLOBAL _strtof
445   0000              	GLOBAL _strtod_callee
446   0000              	GLOBAL _strtod
447   0000              	GLOBAL _srand_fastcall
448   0000              	GLOBAL _srand
449   0000              	GLOBAL _rand
450   0000              	GLOBAL _quick_exit_fastcall
451   0000              	GLOBAL _quick_exit
452   0000              	GLOBAL _qsort_callee
453   0000              	GLOBAL _qsort
454   0000              	GLOBAL _ltoa_callee
455   0000              	GLOBAL _ltoa
456   0000              	GLOBAL _labs_fastcall
457   0000              	GLOBAL _labs
458   0000              	GLOBAL _itoa_callee
459   0000              	GLOBAL _itoa
460   0000              	GLOBAL _ftoh_callee
461   0000              	GLOBAL _ftoh
462   0000              	GLOBAL _ftog_callee
463   0000              	GLOBAL _ftog
464   0000              	GLOBAL _ftoe_callee
465   0000              	GLOBAL _ftoe
466   0000              	GLOBAL _ftoa_callee
467   0000              	GLOBAL _ftoa
468   0000              	GLOBAL _exit_fastcall
469   0000              	GLOBAL _exit
470   0000              	GLOBAL _dtoh_callee
471   0000              	GLOBAL _dtoh
472   0000              	GLOBAL _dtog_callee
473   0000              	GLOBAL _dtog
474   0000              	GLOBAL _dtoe_callee
475   0000              	GLOBAL _dtoe
476   0000              	GLOBAL _dtoa_callee
477   0000              	GLOBAL _dtoa
478   0000              	GLOBAL _bsearch_callee
479   0000              	GLOBAL _bsearch
480   0000              	GLOBAL _atol_fastcall
481   0000              	GLOBAL _atol
482   0000              	GLOBAL _atoi_fastcall
483   0000              	GLOBAL _atoi
484   0000              	GLOBAL _atof_fastcall
485   0000              	GLOBAL _atof
486   0000              	GLOBAL _atexit_fastcall
487   0000              	GLOBAL _atexit
488   0000              	GLOBAL _at_quick_exit_fastcall
489   0000              	GLOBAL _at_quick_exit
490   0000              	GLOBAL _abs_fastcall
491   0000              	GLOBAL _abs
492   0000              	GLOBAL _abort
493   0000              	GLOBAL __strtou__callee
494   0000              	GLOBAL __strtou_
495   0000              	GLOBAL __strtoi__callee
496   0000              	GLOBAL __strtoi_
497   0000              	GLOBAL __random_uniform_xor_8__fastcall
498   0000              	GLOBAL __random_uniform_xor_8_
499   0000              	GLOBAL __random_uniform_xor_32__fastcall
500   0000              	GLOBAL __random_uniform_xor_32_
501   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
502   0000              	GLOBAL __random_uniform_cmwc_8_
503   0000              	GLOBAL __shellsort__callee
504   0000              	GLOBAL __shellsort_
505   0000              	GLOBAL __quicksort__callee
506   0000              	GLOBAL __quicksort_
507   0000              	GLOBAL __insertion_sort__callee
508   0000              	GLOBAL __insertion_sort_
509   0000              	GLOBAL __ldivu__callee
510   0000              	GLOBAL __ldivu_
511   0000              	GLOBAL __ldiv__callee
512   0000              	GLOBAL __ldiv_
513   0000              	GLOBAL __divu__callee
514   0000              	GLOBAL __divu_
515   0000              	GLOBAL __div__callee
516   0000              	GLOBAL __div_
517   0000              	GLOBAL _in_mouse_kempston_wheel_delta
518   0000              	GLOBAL _in_mouse_kempston_wheel
519   0000              	GLOBAL _in_mouse_kempston_callee
520   0000              	GLOBAL _in_mouse_kempston
521   0000              	GLOBAL _in_mouse_kempston_setpos_callee
522   0000              	GLOBAL _in_mouse_kempston_setpos
523   0000              	GLOBAL _in_mouse_kempston_reset
524   0000              	GLOBAL _in_mouse_kempston_init
525   0000              	GLOBAL _in_mouse_amx_wheel_delta
526   0000              	GLOBAL _in_mouse_amx_wheel
527   0000              	GLOBAL _in_mouse_amx_callee
528   0000              	GLOBAL _in_mouse_amx
529   0000              	GLOBAL _in_mouse_amx_setpos_callee
530   0000              	GLOBAL _in_mouse_amx_setpos
531   0000              	GLOBAL _in_mouse_amx_reset
532   0000              	GLOBAL _in_mouse_amx_init_callee
533   0000              	GLOBAL _in_mouse_amx_init
534   0000              	GLOBAL _in_stick_sinclair2
535   0000              	GLOBAL _in_stick_sinclair1
536   0000              	GLOBAL _in_stick_kempston
537   0000              	GLOBAL _in_stick_fuller
538   0000              	GLOBAL _in_stick_cursor
539   0000              	GLOBAL _in_stick_keyboard_fastcall
540   0000              	GLOBAL _in_stick_keyboard
541   0000              	GLOBAL _in_wait_nokey
542   0000              	GLOBAL _in_wait_key
543   0000              	GLOBAL _in_test_key
544   0000              	GLOBAL _in_pause_fastcall
545   0000              	GLOBAL _in_pause
546   0000              	GLOBAL _in_key_scancode_fastcall
547   0000              	GLOBAL _in_key_scancode
548   0000              	GLOBAL _in_key_pressed_fastcall
549   0000              	GLOBAL _in_key_pressed
550   0000              	GLOBAL _in_inkey
551   0000              	GLOBAL _zx_pattern_fill_callee
552   0000              	GLOBAL _zx_pattern_fill
553   0000              	GLOBAL _zx_saddrpup_fastcall
554   0000              	GLOBAL _zx_saddrpup
555   0000              	GLOBAL _zx_saddrpright_callee
556   0000              	GLOBAL _zx_saddrpright
557   0000              	GLOBAL _zx_saddrpleft_callee
558   0000              	GLOBAL _zx_saddrpleft
559   0000              	GLOBAL _zx_saddrpdown_fastcall
560   0000              	GLOBAL _zx_saddrpdown
561   0000              	GLOBAL _zx_saddrcup_fastcall
562   0000              	GLOBAL _zx_saddrcup
563   0000              	GLOBAL _zx_saddrcright_fastcall
564   0000              	GLOBAL _zx_saddrcright
565   0000              	GLOBAL _zx_saddrcleft_fastcall
566   0000              	GLOBAL _zx_saddrcleft
567   0000              	GLOBAL _zx_saddrcdown_fastcall
568   0000              	GLOBAL _zx_saddrcdown
569   0000              	GLOBAL _zx_saddr2py_fastcall
570   0000              	GLOBAL _zx_saddr2py
571   0000              	GLOBAL _zx_saddr2px_fastcall
572   0000              	GLOBAL _zx_saddr2px
573   0000              	GLOBAL _zx_saddr2cy_fastcall
574   0000              	GLOBAL _zx_saddr2cy
575   0000              	GLOBAL _zx_saddr2cx_fastcall
576   0000              	GLOBAL _zx_saddr2cx
577   0000              	GLOBAL _zx_saddr2aaddr_fastcall
578   0000              	GLOBAL _zx_saddr2aaddr
579   0000              	GLOBAL _zx_py2saddr_fastcall
580   0000              	GLOBAL _zx_py2saddr
581   0000              	GLOBAL _zx_py2aaddr_fastcall
582   0000              	GLOBAL _zx_py2aaddr
583   0000              	GLOBAL _zx_pxy2saddr_callee
584   0000              	GLOBAL _zx_pxy2saddr
585   0000              	GLOBAL _zx_pxy2aaddr_callee
586   0000              	GLOBAL _zx_pxy2aaddr
587   0000              	GLOBAL _zx_px2bitmask_fastcall
588   0000              	GLOBAL _zx_px2bitmask
589   0000              	GLOBAL _zx_cy2saddr_fastcall
590   0000              	GLOBAL _zx_cy2saddr
591   0000              	GLOBAL _zx_cy2aaddr_fastcall
592   0000              	GLOBAL _zx_cy2aaddr
593   0000              	GLOBAL _zx_cxy2saddr_callee
594   0000              	GLOBAL _zx_cxy2saddr
595   0000              	GLOBAL _zx_cxy2aaddr_callee
596   0000              	GLOBAL _zx_cxy2aaddr
597   0000              	GLOBAL _zx_bitmask2px_fastcall
598   0000              	GLOBAL _zx_bitmask2px
599   0000              	GLOBAL _zx_aaddrcup_fastcall
600   0000              	GLOBAL _zx_aaddrcup
601   0000              	GLOBAL _zx_aaddrcright_fastcall
602   0000              	GLOBAL _zx_aaddrcright
603   0000              	GLOBAL _zx_aaddrcleft_fastcall
604   0000              	GLOBAL _zx_aaddrcleft
605   0000              	GLOBAL _zx_aaddrcdown_fastcall
606   0000              	GLOBAL _zx_aaddrcdown
607   0000              	GLOBAL _zx_aaddr2saddr_fastcall
608   0000              	GLOBAL _zx_aaddr2saddr
609   0000              	GLOBAL _zx_aaddr2py_fastcall
610   0000              	GLOBAL _zx_aaddr2py
611   0000              	GLOBAL _zx_aaddr2px_fastcall
612   0000              	GLOBAL _zx_aaddr2px
613   0000              	GLOBAL _zx_aaddr2cy_fastcall
614   0000              	GLOBAL _zx_aaddr2cy
615   0000              	GLOBAL _zx_aaddr2cx_fastcall
616   0000              	GLOBAL _zx_aaddr2cx
617   0000              	GLOBAL _zx_visit_wc_pix_callee
618   0000              	GLOBAL _zx_visit_wc_pix
619   0000              	GLOBAL _zx_visit_wc_attr_callee
620   0000              	GLOBAL _zx_visit_wc_attr
621   0000              	GLOBAL _zx_scroll_wc_up_pix_callee
622   0000              	GLOBAL _zx_scroll_wc_up_pix
623   0000              	GLOBAL _zx_scroll_wc_up_attr_callee
624   0000              	GLOBAL _zx_scroll_wc_up_attr
625   0000              	GLOBAL _zx_scroll_wc_up_callee
626   0000              	GLOBAL _zx_scroll_wc_up
627   0000              	GLOBAL _zx_scroll_up_pix_callee
628   0000              	GLOBAL _zx_scroll_up_pix
629   0000              	GLOBAL _zx_scroll_up_attr_callee
630   0000              	GLOBAL _zx_scroll_up_attr
631   0000              	GLOBAL _zx_scroll_up_callee
632   0000              	GLOBAL _zx_scroll_up
633   0000              	GLOBAL _zx_cls_wc_pix_callee
634   0000              	GLOBAL _zx_cls_wc_pix
635   0000              	GLOBAL _zx_cls_wc_attr_callee
636   0000              	GLOBAL _zx_cls_wc_attr
637   0000              	GLOBAL _zx_cls_wc_callee
638   0000              	GLOBAL _zx_cls_wc
639   0000              	GLOBAL _zx_cls_pix_fastcall
640   0000              	GLOBAL _zx_cls_pix
641   0000              	GLOBAL _zx_cls_attr_fastcall
642   0000              	GLOBAL _zx_cls_attr
643   0000              	GLOBAL _zx_cls_fastcall
644   0000              	GLOBAL _zx_cls
645   0000              	GLOBAL _zx_border_fastcall
646   0000              	GLOBAL _zx_border
647   0000              	GLOBAL _g_hit_right
648   0000              	GLOBAL _g_hit_left
649   0000              	GLOBAL _joynames
650   0000              	GLOBAL _initials
651   0000              	GLOBAL _score_osd_tile
652   0000              	GLOBAL _score_osd_update_time
653   0000              	GLOBAL _score_osd_col
654   0000              	GLOBAL _score_osd_lin
655   0000              	GLOBAL _phase_bonus_total
656   0000              	GLOBAL _phase_angry
657   0000              	GLOBAL _phase_curr
658   0000              	GLOBAL _phase_end
659   0000              	GLOBAL _phase_coins
660   0000              	GLOBAL _phase_pop
661   0000              	GLOBAL _phase_tot
662   0000              	GLOBAL _phase_left
663   0000              	GLOBAL _phase_quota
664   0000              	GLOBAL _map_heigth
665   0000              	GLOBAL _map_width
666   0000              	GLOBAL _scr_curr
667   0000              	GLOBAL _scr_2
668   0000              	GLOBAL _scr_1
669   0000              	GLOBAL _scr_map
670   0000              	GLOBAL _sprite_speed_alt
671   0000              	GLOBAL _sprite_speed
672   0000              	GLOBAL _screen_ink
673   0000              	GLOBAL _screen_paper
674   0000              	GLOBAL _game_menu_sel
675   0000              	GLOBAL _game_type
676   0000              	GLOBAL _game_osd
677   0000              	GLOBAL _game_bonus
678   0000              	GLOBAL _spr_water_time
679   0000              	GLOBAL _spr_water_clear
680   0000              	GLOBAL _game_time_fireball_start
681   0000              	GLOBAL _game_time_flipped
682   0000              	GLOBAL _game_score_top
683   0000              	GLOBAL _game_lives
684   0000              	GLOBAL _game_over
685   0000              	GLOBAL _game_sound
686   0000              	GLOBAL _game_inmune
687   0000              	GLOBAL _game_god_mode
688   0000              	GLOBAL _game_start_phase
689   0000              	GLOBAL _game_two_player
690   0000              	GLOBAL _game_brick_tile
691   0000              	GLOBAL _spr_count
692   0000              	GLOBAL _osd_show_time
693   0000              	GLOBAL _osd_update_time
694   0000              	GLOBAL _frame_time
695   0000              	GLOBAL _entry_time
696   0000              	GLOBAL _curr_time
697   0000              	GLOBAL _s_state
698   0000              	GLOBAL _attrib_hl
699   0000              	GLOBAL _attrib
700   0000              	GLOBAL _zx_val_asm
701   0000              	GLOBAL _enemies
702   0000              	GLOBAL _tmp_ui
703   0000              	GLOBAL _tmp_sc
704   0000              	GLOBAL _tmp_uc
705   0000              	GLOBAL _tmp1
706   0000              	GLOBAL _tmp0
707   0000              	GLOBAL _tmp
708   0000              	GLOBAL _index1
709   0000              	GLOBAL _loop_count
710   0000              	GLOBAL _sprite_lin_inc_mul
711   0000              	GLOBAL _s_col1
712   0000              	GLOBAL _s_col0
713   0000              	GLOBAL _s_lin1
714   0000              	GLOBAL _s_lin0
715   0000              	GLOBAL _s_tile1
716   0000              	GLOBAL _s_tile0
717   0000              	GLOBAL _hit_count
718   0000              	GLOBAL _index_player
719   0000              	GLOBAL _sprite
720   0000              	GLOBAL _player_joy
721   0000              	GLOBAL _player_next_extra
722   0000              	GLOBAL _player_score
723   0000              	GLOBAL _last_time
724   0000              	GLOBAL _sliding
725   0000              	GLOBAL _spr_timer
726   0000              	GLOBAL _jump_lin
727   0000              	GLOBAL _player_jump_c
728   0000              	GLOBAL _hit_col
729   0000              	GLOBAL _hit_lin
730   0000              	GLOBAL _colint
731   0000              	GLOBAL _col
732   0000              	GLOBAL _lin
733   0000              	GLOBAL _tile
734   0000              	GLOBAL _state_a
735   0000              	GLOBAL _state
736   0000              	GLOBAL _class
737   0000              	GLOBAL _tbuffer
738   0000              	GLOBAL _dirs
739   0000              	GLOBAL _sprites
740   0000              	GLOBAL _k2
741   0000              	GLOBAL _k1
742   0000              	GLOBAL _joyfunc2
743   0000              	GLOBAL _joyfunc1
744   0000              	GLOBAL _btiles
745   0000              	GLOBAL _spec128
746   0000              	GLOBAL _ay_effect_20
747   0000              	GLOBAL _ay_effect_19
748   0000              	GLOBAL _ay_effect_18
749   0000              	GLOBAL _ay_effect_17
750   0000              	GLOBAL _ay_effect_16
751   0000              	GLOBAL _ay_effect_15
752   0000              	GLOBAL _ay_effect_14
753   0000              	GLOBAL _ay_effect_13
754   0000              	GLOBAL _ay_effect_12
755   0000              	GLOBAL _ay_effect_11
756   0000              	GLOBAL _ay_effect_10
757   0000              	GLOBAL _ay_effect_09
758   0000              	GLOBAL _ay_effect_08
759   0000              	GLOBAL _ay_effect_07
760   0000              	GLOBAL _ay_effect_06
761   0000              	GLOBAL _ay_effect_05
762   0000              	GLOBAL _ay_effect_04
763   0000              	GLOBAL _ay_effect_03
764   0000              	GLOBAL _ay_effect_02
765   0000              	GLOBAL _ay_effect_01
766   0000              	GLOBAL _pb_midi_phase_1
767   0000              	GLOBAL _pb_midi_title
768   0000              	GLOBAL _NIRVANAP_CHAR_TABLE
769   0000              	GLOBAL _NIRVANAP_WIDE_IMAGES
770   0000              	GLOBAL _NIRVANAP_TILE_IMAGES
771   0000              	GLOBAL _NIRVANAP_HOLE
772   0000              	GLOBAL _NIRVANAP_ISR_HOOK
773   0000              	GLOBAL _GLOBAL_ZX_PORT_7FFD
774   0000              	GLOBAL _GLOBAL_ZX_PORT_1FFD
775   0000              	GLOBAL _GLOBAL_ZX_PORT_FE
776   0000              	GLOBAL _control_method
777   0000              ;--------------------------------------------------------
778   0000              ; special function registers
779   0000              ;--------------------------------------------------------
780   0000              defc _IO_FE	=	0x00fe
781   0000              defc _IO_1FFD	=	0x1ffd
782   0000              defc _IO_7FFD	=	0x7ffd
783   0000              ;--------------------------------------------------------
784   0000              ; ram data
785   0000              ;--------------------------------------------------------
786   0000              	SECTION bss_compiler
787   0000              ;--------------------------------------------------------
788   0000              ; ram data
789   0000              ;--------------------------------------------------------
790   0000              
791   0000              IF 0
792   0000              
793   0000              ; .area _INITIALIZED removed by z88dk
794   0000              
795   0000              
796   0000              ENDIF
797   0000              
798   0000              ;--------------------------------------------------------
799   0000              ; absolute external ram data
800   0000              ;--------------------------------------------------------
801   0000              	SECTION IGNORE
802   0000              ;--------------------------------------------------------
803   0000              ; global & static initialisations
804   0000              ;--------------------------------------------------------
805   0000              	SECTION code_crt_init
806   0000              ;--------------------------------------------------------
807   0000              ; Home
808   0000              ;--------------------------------------------------------
809   0000              	SECTION IGNORE
810   0000              ;--------------------------------------------------------
811   0000              ; code
812   0000              ;--------------------------------------------------------
813   0000              	SECTION code_compiler
814   0000              ;	---------------------------------
815   0000              ; Function player_init
816   0000              ; ---------------------------------
817   0000              _player_init:
818   0000  CD 00 00    	call	___sdcc_enter_ix
819   0003  F5          	push	af
820   0004  3E 00       	ld	a, +((_class) & 0xFF)
821   0006  DD 86 04    	add	a,(ix+4)
822   0009  4F          	ld	c, a
823   000A  3E 00       	ld	a, +((_class) / 256)
824   000C  CE 00       	adc	a,0x00
825   000E  47          	ld	b, a
826   000F  3E 10       	ld	a,0x10
827   0011  02          	ld	(bc), a
828   0012  3E 00       	ld	a, +((_tile) & 0xFF)
829   0014  DD 86 04    	add	a,(ix+4)
830   0017  4F          	ld	c, a
831   0018  3E 00       	ld	a, +((_tile) / 256)
832   001A  CE 00       	adc	a,0x00
833   001C  47          	ld	b, a
834   001D  DD 7E 07    	ld	a,(ix+7)
835   0020  02          	ld	(bc), a
836   0021  3E 00       	ld	a, +((_lin) & 0xFF)
837   0023  DD 86 04    	add	a,(ix+4)
838   0026  4F          	ld	c, a
839   0027  3E 00       	ld	a, +((_lin) / 256)
840   0029  CE 00       	adc	a,0x00
841   002B  47          	ld	b, a
842   002C  DD 7E 05    	ld	a,(ix+5)
843   002F  02          	ld	(bc), a
844   0030  3E 00       	ld	a, +((_col) & 0xFF)
845   0032  DD 86 04    	add	a,(ix+4)
846   0035  4F          	ld	c, a
847   0036  3E 00       	ld	a, +((_col) / 256)
848   0038  CE 00       	adc	a,0x00
849   003A  47          	ld	b, a
850   003B  DD 7E 06    	ld	a,(ix+6)
851   003E  02          	ld	(bc), a
852   003F  3E 00       	ld	a, +((_colint) & 0xFF)
853   0041  DD 86 04    	add	a,(ix+4)
854   0044  4F          	ld	c, a
855   0045  3E 00       	ld	a, +((_colint) / 256)
856   0047  CE 00       	adc	a,0x00
857   0049  47          	ld	b, a
858   004A  AF          	xor	a, a
859   004B  02          	ld	(bc), a
860   004C  3E 00       	ld	a, +((_state) & 0xFF)
861   004E  DD 86 04    	add	a,(ix+4)
862   0051  4F          	ld	c, a
863   0052  3E 00       	ld	a, +((_state) / 256)
864   0054  CE 00       	adc	a,0x00
865   0056  47          	ld	b, a
866   0057  AF          	xor	a, a
867   0058  02          	ld	(bc), a
868   0059  3E 00       	ld	a, +((_state_a) & 0xFF)
869   005B  DD 86 04    	add	a,(ix+4)
870   005E  4F          	ld	c, a
871   005F  3E 00       	ld	a, +((_state_a) / 256)
872   0061  CE 00       	adc	a,0x00
873   0063  47          	ld	b, a
874   0064  AF          	xor	a, a
875   0065  02          	ld	(bc), a
876   0066  3E 00       	ld	a, +((_jump_lin) & 0xFF)
877   0068  DD 86 04    	add	a,(ix+4)
878   006B  5F          	ld	e, a
879   006C  3E 00       	ld	a, +((_jump_lin) / 256)
880   006E  CE 00       	adc	a,0x00
881   0070  57          	ld	d, a
882   0071  DD 7E 05    	ld	a,(ix+5)
883   0074  12          	ld	(de), a
884   0075  DD 6E 04    	ld	l,(ix+4)
885   0078  26 00       	ld	h,0x00
886   007A  29          	add	hl,hl
887   007B  11 00 00    	ld	de,_last_time
888   007E  19          	add	hl, de
889   007F  E3          	ex	(sp), hl
890   0080  E1          	pop	hl
891   0081  ED 5B 00 00 	ld	de,(_curr_time)
892   0085  E5          	push	hl
893   0086  73          	ld	(hl), e
894   0087  23          	inc	hl
895   0088  72          	ld	(hl), d
896   0089  3E 00       	ld	a, +((_sprite_speed_alt) & 0xFF)
897   008B  DD 86 04    	add	a,(ix+4)
898   008E  5F          	ld	e, a
899   008F  3E 00       	ld	a, +((_sprite_speed_alt) / 256)
900   0091  CE 00       	adc	a,0x00
901   0093  57          	ld	d, a
902   0094  AF          	xor	a, a
903   0095  12          	ld	(de), a
904   0096  0A          	ld	a, (bc)
905   0097  F6 01       	or	a,0x01
906   0099  02          	ld	(bc),a
907   009A  5F          	ld	e, a
908   009B  DD 7E 04    	ld	a,(ix+4)
909   009E  D6 07       	sub	a,0x07
910   00A0  20 0B       	jr	NZ,l_player_init_00102
911   00A2  21 00 00    	ld	hl,_index_player
912   00A5  36 00       	ld	(hl),0x00
913   00A7  7B          	ld	a, e
914   00A8  F6 10       	or	a,0x10
915   00AA  02          	ld	(bc), a
916   00AB  18 09       	jr	l_player_init_00103
917   00AD              l_player_init_00102:
918   00AD  21 00 00    	ld	hl,_index_player
919   00B0  36 01       	ld	(hl),0x01
920   00B2  7B          	ld	a, e
921   00B3  F6 08       	or	a,0x08
922   00B5  02          	ld	(bc), a
923   00B6              l_player_init_00103:
924   00B6  2A 00 00    	ld	hl,(_index_player)
925   00B9  26 00       	ld	h,0x00
926   00BB  01 00 00    	ld	bc,_hit_col
927   00BE  09          	add	hl,bc
928   00BF  AF          	xor	a,a
929   00C0  77          	ld	(hl),a
930   00C1  2A 00 00    	ld	hl,(_index_player)
931   00C4  26 00       	ld	h,0x00
932   00C6  01 00 00    	ld	bc,_hit_lin
933   00C9  09          	add	hl,bc
934   00CA  AF          	xor	a,a
935   00CB  77          	ld	(hl),a
936   00CC  2A 00 00    	ld	hl,(_index_player)
937   00CF  26 00       	ld	h,0x00
938   00D1  01 00 00    	ld	bc,_sliding
939   00D4  09          	add	hl,bc
940   00D5  AF          	xor	a,a
941   00D6  77          	ld	(hl),a
942   00D7  2A 00 00    	ld	hl,(_index_player)
943   00DA  26 00       	ld	h,0x00
944   00DC  01 00 00    	ld	bc,_player_jump_c
945   00DF  09          	add	hl,bc
946   00E0  AF          	xor	a,a
947   00E1  77          	ld	(hl),a
948   00E2  DD 66 06    	ld	h,(ix+6)
949   00E5  DD 6E 05    	ld	l,(ix+5)
950   00E8  E5          	push	hl
951   00E9  DD 66 07    	ld	h,(ix+7)
952   00EC  DD 6E 04    	ld	l,(ix+4)
953   00EF  E5          	push	hl
954   00F0  CD 00 00    	call	_NIRVANAP_spriteT_callee
955   00F3  F1          	pop	af
956   00F4  DD E1       	pop	ix
957   00F6  C9          	ret
958   00F7              	SECTION code_compiler
959   00F7              ;	---------------------------------
960   00F7              ; Function player_calc_slide
961   00F7              ; ---------------------------------
962   00F7              _player_calc_slide:
963   00F7  2A 00 00    	ld	hl,(_index_player)
964   00FA  26 00       	ld	h,0x00
965   00FC  01 00 00    	ld	bc,_sliding
966   00FF  09          	add	hl,bc
967   0100  36 02       	ld	(hl),0x02
968   0102  C9          	ret
969   0103              	SECTION code_compiler
970   0103              ;	---------------------------------
971   0103              ; Function player_check_input
972   0103              ; ---------------------------------
973   0103              _player_check_input:
974   0103  21 00 00    	ld	hl,_dirs
975   0106  7E          	ld	a, (hl)
976   0107  CB 07       	rlc	a
977   0109  E6 01       	and	a,0x01
978   010B  CB 47       	bit	0, a
979   010D  20 0F       	jr	NZ,l_player_check_input_00104
980   010F  CB 56       	bit	2, (hl)
981   0111  20 0B       	jr	NZ,l_player_check_input_00104
982   0113  21 00 00    	ld	hl,_dirs
983   0116  CB 5E       	bit	3, (hl)
984   0118  20 04       	jr	NZ,l_player_check_input_00104
985   011A  2E 00       	ld	l,0x00
986   011C  18 02       	jr	l_player_check_input_00105
987   011E              l_player_check_input_00104:
988   011E  2E 01       	ld	l,0x01
989   0120              l_player_check_input_00105:
990   0120  C9          	ret
991   0121              	SECTION code_compiler
992   0121              ;	---------------------------------
993   0121              ; Function player_collision
994   0121              ; ---------------------------------
995   0121              _player_collision:
996   0121  2A 00 00    	ld	hl,(_sprite)
997   0124  26 00       	ld	h,0x00
998   0126  01 00 00    	ld	bc,_class
999   0129  09          	add	hl,bc
1000  012A  7E          	ld	a,(hl)
1001  012B  B7          	or	a,a
1002  012C  20 04       	jr	NZ,l_player_collision_00102
1003  012E  6F          	ld	l,a
1004  012F  C3 75 02    	jp	l_player_collision_00133
1005  0132              l_player_collision_00102:
1006  0132  2A 00 00    	ld	hl,(_sprite)
1007  0135  26 00       	ld	h,0x00
1008  0137  01 00 00    	ld	bc,_state
1009  013A  09          	add	hl,bc
1010  013B  7E          	ld	a,(hl)
1011  013C  CB 67       	bit	4, a
1012  013E  28 05       	jr	Z,l_player_collision_00104
1013  0140  2E 00       	ld	l,0x00
1014  0142  C3 75 02    	jp	l_player_collision_00133
1015  0145              l_player_collision_00104:
1016  0145  CB 6F       	bit	5, a
1017  0147  28 05       	jr	Z,l_player_collision_00106
1018  0149  2E 00       	ld	l,0x00
1019  014B  C3 75 02    	jp	l_player_collision_00133
1020  014E              l_player_collision_00106:
1021  014E  21 00 00    	ld	hl,_hit_count
1022  0151  36 00       	ld	(hl),0x00
1023  0153  21 00 00    	ld	hl,_enemies
1024  0156  36 00       	ld	(hl),0x00
1025  0158              l_player_collision_00131:
1026  0158  2A 00 00    	ld	hl,(_enemies)
1027  015B  26 0E       	ld	h,0x0e
1028  015D  3A 00 00    	ld	a,(_sprite)
1029  0160  E5          	push	hl
1030  0161  F5          	push	af
1031  0162  33          	inc	sp
1032  0163  CD 00 00    	call	_spr_collision_check
1033  0166  F1          	pop	af
1034  0167  33          	inc	sp
1035  0168  7D          	ld	a, l
1036  0169  B7          	or	a, a
1037  016A  28 50       	jr	Z,l_player_collision_00132
1038  016C  2A 00 00    	ld	hl,(_enemies)
1039  016F  26 00       	ld	h,0x00
1040  0171  01 00 00    	ld	bc,_state
1041  0174  09          	add	hl,bc
1042  0175  CB 66       	bit	4,(hl)
1043  0177  28 08       	jr	Z,l_player_collision_00117
1044  0179  2A 00 00    	ld	hl,(_enemies)
1045  017C  CD 00 00    	call	_enemy_kill
1046  017F  18 3B       	jr	l_player_collision_00132
1047  0181              l_player_collision_00117:
1048  0181  2A 00 00    	ld	hl,(_enemies)
1049  0184  26 00       	ld	h,0x00
1050  0186  01 00 00    	ld	bc,_class
1051  0189  09          	add	hl,bc
1052  018A  7E          	ld	a,(hl)
1053  018B  FE 08       	cp	a,0x08
1054  018D  28 04       	jr	Z,l_player_collision_00112
1055  018F  D6 0C       	sub	a,0x0c
1056  0191  20 0C       	jr	NZ,l_player_collision_00113
1057  0193              l_player_collision_00112:
1058  0193  2A 00 00    	ld	hl,(_enemies)
1059  0196  26 50       	ld	h,0x50
1060  0198  E5          	push	hl
1061  0199  CD 1C 0A    	call	_player_coin
1062  019C  F1          	pop	af
1063  019D  18 1D       	jr	l_player_collision_00132
1064  019F              l_player_collision_00113:
1065  019F  21 00 00    	ld	hl,_ay_effect_18
1066  01A2  CD 00 00    	call	_ay_fx_play
1067  01A5  3A 00 00    	ld	a,(_game_god_mode)
1068  01A8  B7          	or	a, a
1069  01A9  28 08       	jr	Z,l_player_collision_00110
1070  01AB  2A 00 00    	ld	hl,(_enemies)
1071  01AE  CD 00 00    	call	_enemy_kill
1072  01B1  18 09       	jr	l_player_collision_00132
1073  01B3              l_player_collision_00110:
1074  01B3  3A 00 00    	ld	a,(_game_inmune)
1075  01B6  B7          	or	a, a
1076  01B7  20 03       	jr	NZ,l_player_collision_00132
1077  01B9  CD 76 02    	call	_player_kill
1078  01BC              l_player_collision_00132:
1079  01BC  21 00 00    	ld	hl,_enemies
1080  01BF  7E          	ld	a,(hl)
1081  01C0  3C          	inc	a
1082  01C1  77          	ld	(hl),a
1083  01C2  D6 06       	sub	a,0x06
1084  01C4  38 92       	jr	C,l_player_collision_00131
1085  01C6  3A 00 00    	ld	a,(_hit_count)
1086  01C9  B7          	or	a, a
1087  01CA  CA 73 02    	jp	Z, l_player_collision_00129
1088  01CD  2A 00 00    	ld	hl,(_sprite)
1089  01D0  26 00       	ld	h,0x00
1090  01D2  01 00 00    	ld	bc,_lin
1091  01D5  09          	add	hl,bc
1092  01D6  4E          	ld	c,(hl)
1093  01D7  3E 18       	ld	a,0x18
1094  01D9  91          	sub	a, c
1095  01DA  D2 73 02    	jp	NC, l_player_collision_00129
1096  01DD  2A 00 00    	ld	hl,(_index_player)
1097  01E0  26 00       	ld	h,0x00
1098  01E2  01 00 00    	ld	bc,_score_osd_col
1099  01E5  09          	add	hl,bc
1100  01E6  7E          	ld	a,(hl)
1101  01E7  47          	ld	b,a
1102  01E8  3C          	inc	a
1103  01E9  28 12       	jr	Z,l_player_collision_00123
1104  01EB  3A 00 00    	ld	a,(_index_player)
1105  01EE  5F          	ld	e,a
1106  01EF  16 00       	ld	d,0x00
1107  01F1  21 00 00    	ld	hl,_score_osd_lin
1108  01F4  19          	add	hl,de
1109  01F5  4E          	ld	c, (hl)
1110  01F6  C5          	push	bc
1111  01F7  AF          	xor	a, a
1112  01F8  F5          	push	af
1113  01F9  33          	inc	sp
1114  01FA  CD 00 00    	call	_NIRVANAP_drawT_callee
1115  01FD              l_player_collision_00123:
1116  01FD  2A 00 00    	ld	hl,(_index_player)
1117  0200  26 00       	ld	h,0x00
1118  0202  01 00 00    	ld	bc,_score_osd_col
1119  0205  09          	add	hl,bc
1120  0206  4D          	ld	c,l
1121  0207  44          	ld	b,h
1122  0208  2A 00 00    	ld	hl,(_sprite)
1123  020B  26 00       	ld	h,0x00
1124  020D  11 00 00    	ld	de,_col
1125  0210  19          	add	hl,de
1126  0211  7E          	ld	a,(hl)
1127  0212  02          	ld	(bc), a
1128  0213  2A 00 00    	ld	hl,(_index_player)
1129  0216  26 00       	ld	h,0x00
1130  0218  01 00 00    	ld	bc,_score_osd_lin
1131  021B  09          	add	hl,bc
1132  021C  4D          	ld	c,l
1133  021D  44          	ld	b,h
1134  021E  2A 00 00    	ld	hl,(_sprite)
1135  0221  26 00       	ld	h,0x00
1136  0223  11 00 00    	ld	de,_lin
1137  0226  19          	add	hl,de
1138  0227  7E          	ld	a,(hl)
1139  0228  C6 FA       	add	a,0xfa
1140  022A  02          	ld	(bc), a
1141  022B  01 00 00    	ld	bc,_score_osd_update_time+0
1142  022E  2A 00 00    	ld	hl,(_index_player)
1143  0231  26 00       	ld	h,0x00
1144  0233  29          	add	hl, hl
1145  0234  09          	add	hl,bc
1146  0235  ED 5B 00 00 	ld	de,(_curr_time)
1147  0239  73          	ld	(hl),e
1148  023A  23          	inc	hl
1149  023B  72          	ld	(hl),d
1150  023C  01 00 00    	ld	bc,_score_osd_tile+0
1151  023F  2A 00 00    	ld	hl,(_index_player)
1152  0242  26 00       	ld	h,0x00
1153  0244  29          	add	hl, hl
1154  0245  09          	add	hl, bc
1155  0246  36 BC       	ld	(hl),0xbc
1156  0248  23          	inc	hl
1157  0249  36 00       	ld	(hl),0x00
1158  024B  3E 01       	ld	a,0x01
1159  024D  21 00 00    	ld	hl,_hit_count
1160  0250  96          	sub	a, (hl)
1161  0251  30 0C       	jr	NC,l_player_collision_00125
1162  0253  2A 00 00    	ld	hl,(_index_player)
1163  0256  26 00       	ld	h,0x00
1164  0258  29          	add	hl, hl
1165  0259  09          	add	hl, bc
1166  025A  36 D7       	ld	(hl),0xd7
1167  025C  23          	inc	hl
1168  025D  36 00       	ld	(hl),0x00
1169  025F              l_player_collision_00125:
1170  025F  3E 06       	ld	a,0x06
1171  0261  21 00 00    	ld	hl,_hit_count
1172  0264  96          	sub	a, (hl)
1173  0265  30 0C       	jr	NC,l_player_collision_00129
1174  0267  2A 00 00    	ld	hl,(_index_player)
1175  026A  26 00       	ld	h,0x00
1176  026C  29          	add	hl, hl
1177  026D  09          	add	hl, bc
1178  026E  36 CB       	ld	(hl),0xcb
1179  0270  23          	inc	hl
1180  0271  36 00       	ld	(hl),0x00
1181  0273              l_player_collision_00129:
1182  0273  2E 00       	ld	l,0x00
1183  0275              l_player_collision_00133:
1184  0275  C9          	ret
1185  0276              	SECTION code_compiler
1186  0276              ;	---------------------------------
1187  0276              ; Function player_kill
1188  0276              ; ---------------------------------
1189  0276              _player_kill:
1190  0276  01 00 00    	ld	bc,_state+0
1191  0279  2A 00 00    	ld	hl,(_sprite)
1192  027C  26 00       	ld	h,0x00
1193  027E  09          	add	hl,bc
1194  027F  CB 6E       	bit	5,(hl)
1195  0281  C2 48 03    	jp	NZ,l_player_kill_00109
1196  0284  C5          	push	bc
1197  0285  CD 00 00    	call	_sound_hit_brick
1198  0288  C1          	pop	bc
1199  0289  79          	ld	a, c
1200  028A  21 00 00    	ld	hl,_sprite
1201  028D  86          	add	a, (hl)
1202  028E  5F          	ld	e, a
1203  028F  78          	ld	a, b
1204  0290  CE 00       	adc	a,0x00
1205  0292  57          	ld	d, a
1206  0293  1A          	ld	a, (de)
1207  0294  F6 20       	or	a,0x20
1208  0296  12          	ld	(de), a
1209  0297  3E 00       	ld	a, +((_sprite_speed_alt) & 0xFF)
1210  0299  86          	add	a, (hl)
1211  029A  5F          	ld	e, a
1212  029B  3E 00       	ld	a, +((_sprite_speed_alt) / 256)
1213  029D  CE 00       	adc	a,0x00
1214  029F  57          	ld	d, a
1215  02A0  3E 03       	ld	a,0x03
1216  02A2  12          	ld	(de), a
1217  02A3  79          	ld	a, c
1218  02A4  86          	add	a, (hl)
1219  02A5  4F          	ld	c, a
1220  02A6  78          	ld	a, b
1221  02A7  CE 00       	adc	a,0x00
1222  02A9  47          	ld	b, a
1223  02AA  0A          	ld	a, (bc)
1224  02AB  CB 57       	bit	2, a
1225  02AD  28 0D       	jr	Z,l_player_kill_00102
1226  02AF  2A 00 00    	ld	hl,(_sprite)
1227  02B2  26 00       	ld	h,0x00
1228  02B4  01 00 00    	ld	bc,_tile
1229  02B7  09          	add	hl,bc
1230  02B8  36 40       	ld	(hl),0x40
1231  02BA  18 0B       	jr	l_player_kill_00103
1232  02BC              l_player_kill_00102:
1233  02BC  2A 00 00    	ld	hl,(_sprite)
1234  02BF  26 00       	ld	h,0x00
1235  02C1  01 00 00    	ld	bc,_tile
1236  02C4  09          	add	hl,bc
1237  02C5  36 48       	ld	(hl),0x48
1238  02C7              l_player_kill_00103:
1239  02C7  CD DE 09    	call	_player_hit_brick_clear
1240  02CA  2A 00 00    	ld	hl,(_sprite)
1241  02CD  26 00       	ld	h,0x00
1242  02CF  01 00 00    	ld	bc,_col
1243  02D2  09          	add	hl,bc
1244  02D3  4E          	ld	c, (hl)
1245  02D4  2A 00 00    	ld	hl,(_sprite)
1246  02D7  26 00       	ld	h,0x00
1247  02D9  11 00 00    	ld	de,_lin
1248  02DC  19          	add	hl,de
1249  02DD  46          	ld	b, (hl)
1250  02DE  2A 00 00    	ld	hl,(_sprite)
1251  02E1  26 00       	ld	h,0x00
1252  02E3  11 00 00    	ld	de,_tile
1253  02E6  19          	add	hl,de
1254  02E7  56          	ld	d, (hl)
1255  02E8  79          	ld	a,c
1256  02E9  21 00 00    	ld	hl,_sprite
1257  02EC  F5          	push	af
1258  02ED  33          	inc	sp
1259  02EE  4A          	ld	c, d
1260  02EF  7E          	ld	a,(hl)
1261  02F0  C5          	push	bc
1262  02F1  F5          	push	af
1263  02F2  33          	inc	sp
1264  02F3  CD 00 00    	call	_NIRVANAP_spriteT_callee
1265  02F6  01 00 00    	ld	bc,_spr_timer+0
1266  02F9  2A 00 00    	ld	hl,(_sprite)
1267  02FC  26 00       	ld	h,0x00
1268  02FE  29          	add	hl, hl
1269  02FF  09          	add	hl,bc
1270  0300  ED 5B 00 00 	ld	de,(_curr_time)
1271  0304  73          	ld	(hl),e
1272  0305  23          	inc	hl
1273  0306  72          	ld	(hl),d
1274  0307  3A 00 00    	ld	a,(_sprite)
1275  030A  D6 07       	sub	a,0x07
1276  030C  20 1E       	jr	NZ,l_player_kill_00105
1277  030E  01 00 00    	ld	bc,_state_a+0
1278  0311  79          	ld	a, c
1279  0312  21 00 00    	ld	hl,_sprite
1280  0315  86          	add	a, (hl)
1281  0316  5F          	ld	e, a
1282  0317  78          	ld	a, b
1283  0318  CE 00       	adc	a,0x00
1284  031A  57          	ld	d, a
1285  031B  1A          	ld	a, (de)
1286  031C  F6 08       	or	a,0x08
1287  031E  12          	ld	(de), a
1288  031F  79          	ld	a, c
1289  0320  86          	add	a, (hl)
1290  0321  4F          	ld	c, a
1291  0322  78          	ld	a, b
1292  0323  CE 00       	adc	a,0x00
1293  0325  47          	ld	b, a
1294  0326  0A          	ld	a, (bc)
1295  0327  E6 EF       	and	a,0xef
1296  0329  02          	ld	(bc), a
1297  032A  18 1C       	jr	l_player_kill_00109
1298  032C              l_player_kill_00105:
1299  032C  01 00 00    	ld	bc,_state_a+0
1300  032F  79          	ld	a, c
1301  0330  21 00 00    	ld	hl,_sprite
1302  0333  86          	add	a, (hl)
1303  0334  5F          	ld	e, a
1304  0335  78          	ld	a, b
1305  0336  CE 00       	adc	a,0x00
1306  0338  57          	ld	d, a
1307  0339  1A          	ld	a, (de)
1308  033A  F6 10       	or	a,0x10
1309  033C  12          	ld	(de), a
1310  033D  79          	ld	a, c
1311  033E  86          	add	a, (hl)
1312  033F  4F          	ld	c, a
1313  0340  78          	ld	a, b
1314  0341  CE 00       	adc	a,0x00
1315  0343  47          	ld	b, a
1316  0344  0A          	ld	a, (bc)
1317  0345  E6 F7       	and	a,0xf7
1318  0347  02          	ld	(bc), a
1319  0348              l_player_kill_00109:
1320  0348  C9          	ret
1321  0349              	SECTION code_compiler
1322  0349              ;	---------------------------------
1323  0349              ; Function player_restart
1324  0349              ; ---------------------------------
1325  0349              _player_restart:
1326  0349  CD 00 00    	call	___sdcc_enter_ix
1327  034C  F5          	push	af
1328  034D  3E 00       	ld	a,+((_col) & 0xFF)
1329  034F  85          	add	a,l
1330  0350  4D          	ld	c,l
1331  0351  5F          	ld	e, a
1332  0352  3E 00       	ld	a, +((_col) / 256)
1333  0354  CE 00       	adc	a,0x00
1334  0356  57          	ld	d, a
1335  0357  1A          	ld	a, (de)
1336  0358  D6 04       	sub	a,0x04
1337  035A  30 0C       	jr	NC,l_player_restart_00102
1338  035C  C5          	push	bc
1339  035D  D5          	push	de
1340  035E  21 E0 01    	ld	hl,0x01e0
1341  0361  E5          	push	hl
1342  0362  CD 00 00    	call	_spr_back_paint
1343  0365  F1          	pop	af
1344  0366  D1          	pop	de
1345  0367  C1          	pop	bc
1346  0368              l_player_restart_00102:
1347  0368  1A          	ld	a, (de)
1348  0369  47          	ld	b, a
1349  036A  3E 1A       	ld	a,0x1a
1350  036C  90          	sub	a, b
1351  036D  30 0A       	jr	NC,l_player_restart_00104
1352  036F  C5          	push	bc
1353  0370  21 FA 01    	ld	hl,0x01fa
1354  0373  E5          	push	hl
1355  0374  CD 00 00    	call	_spr_back_paint
1356  0377  F1          	pop	af
1357  0378  C1          	pop	bc
1358  0379              l_player_restart_00104:
1359  0379  21 00 00    	ld	hl,_ay_effect_15
1360  037C  CD 00 00    	call	_ay_fx_play
1361  037F  C5          	push	bc
1362  0380  21 0E 58    	ld	hl,0x580e
1363  0383  E5          	push	hl
1364  0384  21 07 00    	ld	hl,0x0007
1365  0387  E5          	push	hl
1366  0388  CD 00 00    	call	_player_init
1367  038B  F1          	pop	af
1368  038C  F1          	pop	af
1369  038D  C1          	pop	bc
1370  038E  11 00 00    	ld	de,_state+0
1371  0391  69          	ld	l,c
1372  0392  26 00       	ld	h,0x00
1373  0394  19          	add	hl, de
1374  0395  CB E6       	set	4, (hl)
1375  0397  11 00 00    	ld	de,_state_a+0
1376  039A  69          	ld	l,c
1377  039B  26 00       	ld	h,0x00
1378  039D  19          	add	hl, de
1379  039E  CB C6       	set	0, (hl)
1380  03A0  11 00 00    	ld	de,_spr_timer+0
1381  03A3  69          	ld	l, c
1382  03A4  26 00       	ld	h,0x00
1383  03A6  29          	add	hl, hl
1384  03A7  19          	add	hl,de
1385  03A8  E3          	ex	(sp), hl
1386  03A9  E1          	pop	hl
1387  03AA  ED 5B 00 00 	ld	de,(_curr_time)
1388  03AE  E5          	push	hl
1389  03AF  73          	ld	(hl), e
1390  03B0  23          	inc	hl
1391  03B1  72          	ld	(hl), d
1392  03B2  11 00 00    	ld	de,_sprite_speed_alt+0
1393  03B5  69          	ld	l,c
1394  03B6  26 00       	ld	h,0x00
1395  03B8  19          	add	hl, de
1396  03B9  F1          	pop	af
1397  03BA  36 08       	ld	(hl),0x08
1398  03BC  DD E1       	pop	ix
1399  03BE  C9          	ret
1400  03BF              	SECTION code_compiler
1401  03BF              ;	---------------------------------
1402  03BF              ; Function player_lost_life
1403  03BF              ; ---------------------------------
1404  03BF              _player_lost_life:
1405  03BF  CD 00 00    	call	_sound_hit_enemy
1406  03C2  01 00 00    	ld	bc,_game_lives+0
1407  03C5  79          	ld	a, c
1408  03C6  21 00 00    	ld	hl,_index_player
1409  03C9  86          	add	a, (hl)
1410  03CA  5F          	ld	e, a
1411  03CB  78          	ld	a, b
1412  03CC  CE 00       	adc	a,0x00
1413  03CE  57          	ld	d, a
1414  03CF  1A          	ld	a, (de)
1415  03D0  C6 FF       	add	a,0xff
1416  03D2  12          	ld	(de), a
1417  03D3  79          	ld	a, c
1418  03D4  86          	add	a, (hl)
1419  03D5  5F          	ld	e, a
1420  03D6  78          	ld	a, b
1421  03D7  CE 00       	adc	a,0x00
1422  03D9  57          	ld	d, a
1423  03DA  1A          	ld	a, (de)
1424  03DB  B7          	or	a, a
1425  03DC  20 13       	jr	NZ,l_player_lost_life_00105
1426  03DE  0A          	ld	a, (bc)
1427  03DF  B7          	or	a, a
1428  03E0  20 0B       	jr	NZ,l_player_lost_life_00102
1429  03E2  3A 01 00    	ld	a, (_game_lives + 1)
1430  03E5  B7          	or	a, a
1431  03E6  20 05       	jr	NZ,l_player_lost_life_00102
1432  03E8  21 00 00    	ld	hl,_game_over
1433  03EB  36 01       	ld	(hl),0x01
1434  03ED              l_player_lost_life_00102:
1435  03ED  2E 00       	ld	l,0x00
1436  03EF  18 05       	jr	l_player_lost_life_00106
1437  03F1              l_player_lost_life_00105:
1438  03F1  CD 00 00    	call	_game_print_lives
1439  03F4  2E 01       	ld	l,0x01
1440  03F6              l_player_lost_life_00106:
1441  03F6  C9          	ret
1442  03F7              	SECTION code_compiler
1443  03F7              ;	---------------------------------
1444  03F7              ; Function player_turn
1445  03F7              ; ---------------------------------
1446  03F7              _player_turn:
1447  03F7  2A 00 00    	ld	hl,(_sprite)
1448  03FA  26 00       	ld	h,0x00
1449  03FC  01 00 00    	ld	bc,_class
1450  03FF  09          	add	hl,bc
1451  0400  7E          	ld	a,(hl)
1452  0401  D6 10       	sub	a,0x10
1453  0403  C0          	ret	NZ
1454  0404  2A 00 00    	ld	hl,(_index_player)
1455  0407  26 00       	ld	h,0x00
1456  0409  01 00 00    	ld	bc,_game_lives
1457  040C  09          	add	hl,bc
1458  040D  7E          	ld	a,(hl)
1459  040E  B7          	or	a, a
1460  040F  C8          	ret	Z
1461  0410  21 00 00    	ld	hl,_sprite
1462  0413  CD 00 00    	call	_spr_chktime
1463  0416  7D          	ld	a, l
1464  0417  B7          	or	a, a
1465  0418  C8          	ret	Z
1466  0419  21 00 00    	ld	hl,_dirs
1467  041C  36 00       	ld	(hl),0x00
1468  041E  21 00 00    	ld	hl,_k1
1469  0421  E5          	push	hl
1470  0422  2A 00 00    	ld	hl,(_joyfunc1)
1471  0425  CD 00 00    	call	___sdcc_call_hl
1472  0428  F1          	pop	af
1473  0429  7D          	ld	a,l
1474  042A  32 00 00    	ld	(_dirs),a
1475  042D  CD 33 04    	call	_player_move
1476  0430  C3 21 01    	jp  _player_collision
1477  0433              	SECTION code_compiler
1478  0433              ;	---------------------------------
1479  0433              ; Function player_move
1480  0433              ; ---------------------------------
1481  0433              _player_move:
1482  0433  CD 00 00    	call	___sdcc_enter_ix
1483  0436  2A 00 00    	ld	hl,(_sprite)
1484  0439  F5          	push	af
1485  043A  26 00       	ld	h,0x00
1486  043C  01 00 00    	ld	bc,_lin
1487  043F  09          	add	hl,bc
1488  0440  7E          	ld	a,(hl)
1489  0441  32 00 00    	ld	(_s_lin0),a
1490  0444  2A 00 00    	ld	hl,(_sprite)
1491  0447  26 00       	ld	h,0x00
1492  0449  01 00 00    	ld	bc,_col
1493  044C  09          	add	hl,bc
1494  044D  7E          	ld	a,(hl)
1495  044E  32 00 00    	ld	(_s_col0),a
1496  0451  3E 00       	ld	a, +((_tile) & 0xFF)
1497  0453  21 00 00    	ld	hl,_sprite
1498  0456  86          	add	a, (hl)
1499  0457  DD 77 FE    	ld	(ix-2),a
1500  045A  3E 00       	ld	a, +((_tile) / 256)
1501  045C  CE 00       	adc	a,0x00
1502  045E  DD 77 FF    	ld	(ix-1),a
1503  0461  E1          	pop	hl
1504  0462  4E          	ld	c,(hl)
1505  0463  E5          	push	hl
1506  0464  2A 00 00    	ld	hl,(_sprite)
1507  0467  26 00       	ld	h,0x00
1508  0469  11 00 00    	ld	de,_colint
1509  046C  19          	add	hl,de
1510  046D  7E          	ld	a,(hl)
1511  046E  81          	add	a,c
1512  046F  32 00 00    	ld	(_s_tile0),a
1513  0472  2A 00 00    	ld	hl,(_sprite)
1514  0475  26 00       	ld	h,0x00
1515  0477  01 00 00    	ld	bc,_state
1516  047A  09          	add	hl,bc
1517  047B  7E          	ld	a,(hl)
1518  047C  CB 6F       	bit	5,a
1519  047E  32 00 00    	ld	(_s_state),a
1520  0481  28 2A       	jr	Z,l_player_move_00104
1521  0483  E1          	pop	hl
1522  0484  E5          	push	hl
1523  0485  36 40       	ld	(hl),0x40
1524  0487  01 00 00    	ld	bc,_spr_timer+0
1525  048A  2A 00 00    	ld	hl,(_sprite)
1526  048D  26 00       	ld	h,0x00
1527  048F  29          	add	hl, hl
1528  0490  09          	add	hl, bc
1529  0491  4E          	ld	c, (hl)
1530  0492  23          	inc	hl
1531  0493  46          	ld	b, (hl)
1532  0494  21 28 00    	ld	hl,0x0028
1533  0497  E5          	push	hl
1534  0498  C5          	push	bc
1535  0499  CD 00 00    	call	_game_check_time
1536  049C  F1          	pop	af
1537  049D  F1          	pop	af
1538  049E  7D          	ld	a, l
1539  049F  B7          	or	a, a
1540  04A0  28 06       	jr	Z,l_player_move_00102
1541  04A2  2A 00 00    	ld	hl,(_sprite)
1542  04A5  CD 00 00    	call	_spr_killed
1543  04A8              l_player_move_00102:
1544  04A8  2E 00       	ld	l,0x00
1545  04AA  C3 DB 05    	jp	l_player_move_00132
1546  04AD              l_player_move_00104:
1547  04AD  CD DF 05    	call	_player_move_input
1548  04B0  2A 00 00    	ld	hl,(_sprite)
1549  04B3  26 00       	ld	h,0x00
1550  04B5  01 00 00    	ld	bc,_state
1551  04B8  09          	add	hl,bc
1552  04B9  7E          	ld	a,(hl)
1553  04BA  21 00 00    	ld	hl,_s_state
1554  04BD  77          	ld	(hl),a
1555  04BE  E6 01       	and	a,0x01
1556  04C0  4F          	ld	c,a
1557  04C1  B7          	or	a, a
1558  04C2  20 0A       	jr	NZ,l_player_move_00127
1559  04C4  CB 4E       	bit	1, (hl)
1560  04C6  20 06       	jr	NZ,l_player_move_00127
1561  04C8  CD 67 0B    	call	_player_check_floor
1562  04CB  C3 AB 05    	jp	l_player_move_00128
1563  04CE              l_player_move_00127:
1564  04CE  21 00 00    	ld	hl,_sprite_lin_inc_mul
1565  04D1  36 02       	ld	(hl),0x02
1566  04D3  2A 00 00    	ld	hl,(_index_player)
1567  04D6  26 00       	ld	h,0x00
1568  04D8  11 00 00    	ld	de,_player_jump_c
1569  04DB  19          	add	hl,de
1570  04DC  46          	ld	b, (hl)
1571  04DD  3E 03       	ld	a,0x03
1572  04DF  90          	sub	a, b
1573  04E0  30 05       	jr	NC,l_player_move_00106
1574  04E2  21 00 00    	ld	hl,_sprite_lin_inc_mul
1575  04E5  36 01       	ld	(hl),0x01
1576  04E7              l_player_move_00106:
1577  04E7  3E 08       	ld	a,0x08
1578  04E9  90          	sub	a, b
1579  04EA  30 05       	jr	NC,l_player_move_00108
1580  04EC  21 00 00    	ld	hl,_sprite_lin_inc_mul
1581  04EF  36 00       	ld	(hl),0x00
1582  04F1              l_player_move_00108:
1583  04F1  3E 0C       	ld	a,0x0c
1584  04F3  90          	sub	a, b
1585  04F4  30 05       	jr	NC,l_player_move_00110
1586  04F6  21 00 00    	ld	hl,_sprite_lin_inc_mul
1587  04F9  36 01       	ld	(hl),0x01
1588  04FB              l_player_move_00110:
1589  04FB  3E 11       	ld	a,0x11
1590  04FD  90          	sub	a, b
1591  04FE  30 05       	jr	NC,l_player_move_00112
1592  0500  21 00 00    	ld	hl,_sprite_lin_inc_mul
1593  0503  36 02       	ld	(hl),0x02
1594  0505              l_player_move_00112:
1595  0505  79          	ld	a, c
1596  0506  B7          	or	a, a
1597  0507  28 1D       	jr	Z,l_player_move_00124
1598  0509  78          	ld	a, b
1599  050A  D6 0A       	sub	a,0x0a
1600  050C  30 13       	jr	NC,l_player_move_00116
1601  050E  2A 00 00    	ld	hl,(_sprite)
1602  0511  26 00       	ld	h,0x00
1603  0513  01 00 00    	ld	bc,_state_a
1604  0516  09          	add	hl,bc
1605  0517  7E          	ld	a,(hl)
1606  0518  07          	rlca
1607  0519  DA 99 05    	jp	C,l_player_move_00125
1608  051C  CD 00 00    	call	_spr_move_up
1609  051F  18 78       	jr	l_player_move_00125
1610  0521              l_player_move_00116:
1611  0521  CD 00 00    	call	_spr_set_fall
1612  0524  18 73       	jr	l_player_move_00125
1613  0526              l_player_move_00124:
1614  0526  CD 00 00    	call	_spr_move_down
1615  0529  7D          	ld	a, l
1616  052A  B7          	or	a, a
1617  052B  28 6C       	jr	Z,l_player_move_00125
1618  052D  21 00 00    	ld	hl,_s_state
1619  0530  CB 8E       	res	1, (hl)
1620  0532  2A 00 00    	ld	hl,(_sprite)
1621  0535  26 00       	ld	h,0x00
1622  0537  01 00 00    	ld	bc,_state_a
1623  053A  09          	add	hl,bc
1624  053B  7E          	ld	a,(hl)
1625  053C  E6 7F       	and	a,0x7f
1626  053E  77          	ld	(hl),a
1627  053F  2A 00 00    	ld	hl,(_index_player)
1628  0542  26 00       	ld	h,0x00
1629  0544  01 00 00    	ld	bc,_player_jump_c
1630  0547  09          	add	hl,bc
1631  0548  AF          	xor	a,a
1632  0549  77          	ld	(hl),a
1633  054A  2A 00 00    	ld	hl,(_sprite)
1634  054D  26 00       	ld	h,0x00
1635  054F  01 00 00    	ld	bc,_jump_lin
1636  0552  09          	add	hl,bc
1637  0553  AF          	xor	a,a
1638  0554  77          	ld	(hl),a
1639  0555  2A 00 00    	ld	hl,(_index_player)
1640  0558  26 00       	ld	h,0x00
1641  055A  01 00 00    	ld	bc,_sliding
1642  055D  09          	add	hl,bc
1643  055E  AF          	xor	a,a
1644  055F  77          	ld	(hl),a
1645  0560  2A 00 00    	ld	hl,(_sprite)
1646  0563  26 00       	ld	h,0x00
1647  0565  01 00 00    	ld	bc,_colint
1648  0568  09          	add	hl,bc
1649  0569  AF          	xor	a,a
1650  056A  77          	ld	(hl),a
1651  056B  2A 00 00    	ld	hl,(_sprite)
1652  056E  26 00       	ld	h,0x00
1653  0570  01 00 00    	ld	bc,_tile
1654  0573  09          	add	hl,bc
1655  0574  E5          	push	hl
1656  0575  3E 01       	ld	a,0x01
1657  0577  21 00 00    	ld	hl,_sprite
1658  057A  F5          	push	af
1659  057B  33          	inc	sp
1660  057C  56          	ld	d, (hl)
1661  057D  1E 58       	ld	e,0x58
1662  057F  D5          	push	de
1663  0580  CD 00 00    	call	_spr_tile_dir
1664  0583  F1          	pop	af
1665  0584  33          	inc	sp
1666  0585  C1          	pop	bc
1667  0586  7D          	ld	a,l
1668  0587  02          	ld	(bc), a
1669  0588  21 00 00    	ld	hl,_s_state
1670  058B  CB 5E       	bit	3, (hl)
1671  058D  20 07       	jr	NZ,l_player_move_00118
1672  058F  21 00 00    	ld	hl,_s_state
1673  0592  CB 56       	bit	2, (hl)
1674  0594  28 03       	jr	Z,l_player_move_00125
1675  0596              l_player_move_00118:
1676  0596  CD F7 00    	call	_player_calc_slide
1677  0599              l_player_move_00125:
1678  0599  CD 00 00    	call	_spr_move_horizontal
1679  059C  21 00 00    	ld	hl,_sprite_lin_inc_mul
1680  059F  36 00       	ld	(hl),0x00
1681  05A1  2A 00 00    	ld	hl,(_index_player)
1682  05A4  26 00       	ld	h,0x00
1683  05A6  01 00 00    	ld	bc,_player_jump_c
1684  05A9  09          	add	hl,bc
1685  05AA  34          	inc	(hl)
1686  05AB              l_player_move_00128:
1687  05AB  2A 00 00    	ld	hl,(_sprite)
1688  05AE  26 00       	ld	h,0x00
1689  05B0  29          	add	hl, hl
1690  05B1  11 00 00    	ld	de,_spr_timer
1691  05B4  19          	add	hl, de
1692  05B5  4E          	ld	c, (hl)
1693  05B6  23          	inc	hl
1694  05B7  46          	ld	b, (hl)
1695  05B8  21 04 00    	ld	hl,0x0004
1696  05BB  E5          	push	hl
1697  05BC  C5          	push	bc
1698  05BD  CD 00 00    	call	_game_check_time
1699  05C0  F1          	pop	af
1700  05C1  F1          	pop	af
1701  05C2  7D          	ld	a, l
1702  05C3  B7          	or	a, a
1703  05C4  28 03       	jr	Z,l_player_move_00131
1704  05C6  CD DE 09    	call	_player_hit_brick_clear
1705  05C9              l_player_move_00131:
1706  05C9  CD 00 00    	call	_spr_redraw
1707  05CC  2A 00 00    	ld	hl,(_sprite)
1708  05CF  26 00       	ld	h,0x00
1709  05D1  01 00 00    	ld	bc,_state
1710  05D4  09          	add	hl,bc
1711  05D5  3A 00 00    	ld	a,(_s_state)
1712  05D8  77          	ld	(hl),a
1713  05D9  2E 00       	ld	l,0x00
1714  05DB              l_player_move_00132:
1715  05DB  F1          	pop	af
1716  05DC  DD E1       	pop	ix
1717  05DE  C9          	ret
1718  05DF              	SECTION code_compiler
1719  05DF              ;	---------------------------------
1720  05DF              ; Function player_move_input
1721  05DF              ; ---------------------------------
1722  05DF              _player_move_input:
1723  05DF  21 00 00    	ld	hl,_s_state
1724  05E2  CB 46       	bit	0, (hl)
1725  05E4  20 07       	jr	NZ,l_player_move_input_00101
1726  05E6  21 00 00    	ld	hl,_s_state
1727  05E9  CB 4E       	bit	1, (hl)
1728  05EB  28 05       	jr	Z,l_player_move_input_00102
1729  05ED              l_player_move_input_00101:
1730  05ED  2E 00       	ld	l,0x00
1731  05EF  C3 66 08    	jp	l_player_move_input_00135
1732  05F2              l_player_move_input_00102:
1733  05F2  CD 03 01    	call	_player_check_input
1734  05F5  7D          	ld	a, l
1735  05F6  B7          	or	a, a
1736  05F7  CA 8E 07    	jp	Z, l_player_move_input_00131
1737  05FA  2A 00 00    	ld	hl,(_index_player)
1738  05FD  26 00       	ld	h,0x00
1739  05FF  01 00 00    	ld	bc,_sliding
1740  0602  09          	add	hl,bc
1741  0603  46          	ld	b,(hl)
1742  0604  3A 00 00    	ld	a,(_dirs)
1743  0607  E6 80       	and	a,0x80
1744  0609  4F          	ld	c, a
1745  060A  78          	ld	a, b
1746  060B  B7          	or	a, a
1747  060C  28 05       	jr	Z,l_player_move_input_00130
1748  060E  79          	ld	a, c
1749  060F  B7          	or	a, a
1750  0610  CA 8E 07    	jp	Z, l_player_move_input_00131
1751  0613              l_player_move_input_00130:
1752  0613  79          	ld	a, c
1753  0614  B7          	or	a, a
1754  0615  CA BD 06    	jp	Z, l_player_move_input_00110
1755  0618  CD 00 00    	call	_ay_is_playing
1756  061B  7D          	ld	a, l
1757  061C  D6 03       	sub	a,0x03
1758  061E  28 06       	jr	Z,l_player_move_input_00105
1759  0620  21 00 00    	ld	hl,_ay_effect_03
1760  0623  CD 00 00    	call	_ay_fx_play
1761  0626              l_player_move_input_00105:
1762  0626  CD 00 00    	call	_sound_jump
1763  0629  2A 00 00    	ld	hl,(_sprite)
1764  062C  26 00       	ld	h,0x00
1765  062E  01 00 00    	ld	bc,_state
1766  0631  09          	add	hl,bc
1767  0632  CB 56       	bit	2,(hl)
1768  0634  28 0D       	jr	Z,l_player_move_input_00107
1769  0636  2A 00 00    	ld	hl,(_sprite)
1770  0639  26 00       	ld	h,0x00
1771  063B  01 00 00    	ld	bc,_colint
1772  063E  09          	add	hl,bc
1773  063F  AF          	xor	a,a
1774  0640  77          	ld	(hl),a
1775  0641  18 0B       	jr	l_player_move_input_00108
1776  0643              l_player_move_input_00107:
1777  0643  2A 00 00    	ld	hl,(_sprite)
1778  0646  26 00       	ld	h,0x00
1779  0648  01 00 00    	ld	bc,_colint
1780  064B  09          	add	hl,bc
1781  064C  36 02       	ld	(hl),0x02
1782  064E              l_player_move_input_00108:
1783  064E  21 00 00    	ld	hl,_s_state
1784  0651  7E          	ld	a,(hl)
1785  0652  F6 01       	or	a,0x01
1786  0654  E6 FD       	and	a,0xfd
1787  0656  77          	ld	(hl),a
1788  0657  2A 00 00    	ld	hl,(_sprite)
1789  065A  26 00       	ld	h,0x00
1790  065C  01 00 00    	ld	bc,_jump_lin
1791  065F  09          	add	hl,bc
1792  0660  4D          	ld	c,l
1793  0661  44          	ld	b,h
1794  0662  2A 00 00    	ld	hl,(_sprite)
1795  0665  26 00       	ld	h,0x00
1796  0667  11 00 00    	ld	de,_lin
1797  066A  19          	add	hl,de
1798  066B  7E          	ld	a,(hl)
1799  066C  02          	ld	(bc),a
1800  066D  2A 00 00    	ld	hl,(_sprite)
1801  0670  26 00       	ld	h,0x00
1802  0672  01 00 00    	ld	bc,_state
1803  0675  09          	add	hl,bc
1804  0676  3A 00 00    	ld	a,(_s_state)
1805  0679  77          	ld	(hl),a
1806  067A  2A 00 00    	ld	hl,(_sprite)
1807  067D  26 00       	ld	h,0x00
1808  067F  01 00 00    	ld	bc,_tile
1809  0682  09          	add	hl,bc
1810  0683  E5          	push	hl
1811  0684  3E 08       	ld	a,0x08
1812  0686  21 00 00    	ld	hl,_sprite
1813  0689  F5          	push	af
1814  068A  33          	inc	sp
1815  068B  56          	ld	d, (hl)
1816  068C  1E 4C       	ld	e,0x4c
1817  068E  D5          	push	de
1818  068F  CD 00 00    	call	_spr_tile_dir
1819  0692  F1          	pop	af
1820  0693  33          	inc	sp
1821  0694  C1          	pop	bc
1822  0695  7D          	ld	a,l
1823  0696  02          	ld	(bc), a
1824  0697  2A 00 00    	ld	hl,(_sprite)
1825  069A  26 00       	ld	h,0x00
1826  069C  01 00 00    	ld	bc,_sprite_speed_alt
1827  069F  09          	add	hl,bc
1828  06A0  36 02       	ld	(hl),0x02
1829  06A2  2A 00 00    	ld	hl,(_index_player)
1830  06A5  26 00       	ld	h,0x00
1831  06A7  01 00 00    	ld	bc,_player_jump_c
1832  06AA  09          	add	hl,bc
1833  06AB  AF          	xor	a,a
1834  06AC  77          	ld	(hl),a
1835  06AD  2A 00 00    	ld	hl,(_index_player)
1836  06B0  26 00       	ld	h,0x00
1837  06B2  01 00 00    	ld	bc,_sliding
1838  06B5  09          	add	hl,bc
1839  06B6  AF          	xor	a,a
1840  06B7  77          	ld	(hl),a
1841  06B8  2E 01       	ld	l,0x01
1842  06BA  C3 66 08    	jp	l_player_move_input_00135
1843  06BD              l_player_move_input_00110:
1844  06BD  21 00 00    	ld	hl,_dirs
1845  06C0  CB 5E       	bit	3, (hl)
1846  06C2  28 3F       	jr	Z,l_player_move_input_00114
1847  06C4  21 00 00    	ld	hl,_s_state
1848  06C7  CB 5E       	bit	3, (hl)
1849  06C9  28 08       	jr	Z,l_player_move_input_00112
1850  06CB  CD F7 00    	call	_player_calc_slide
1851  06CE  2E 01       	ld	l,0x01
1852  06D0  C3 66 08    	jp	l_player_move_input_00135
1853  06D3              l_player_move_input_00112:
1854  06D3  21 00 00    	ld	hl,_s_state
1855  06D6  7E          	ld	a,(hl)
1856  06D7  F6 04       	or	a,0x04
1857  06D9  E6 F7       	and	a,0xf7
1858  06DB  77          	ld	(hl),a
1859  06DC  01 00 00    	ld	bc,_state_a+0
1860  06DF  79          	ld	a, c
1861  06E0  21 00 00    	ld	hl,_sprite
1862  06E3  86          	add	a, (hl)
1863  06E4  5F          	ld	e, a
1864  06E5  78          	ld	a, b
1865  06E6  CE 00       	adc	a,0x00
1866  06E8  57          	ld	d, a
1867  06E9  1A          	ld	a, (de)
1868  06EA  F6 10       	or	a,0x10
1869  06EC  12          	ld	(de), a
1870  06ED  79          	ld	a, c
1871  06EE  86          	add	a, (hl)
1872  06EF  5F          	ld	e, a
1873  06F0  78          	ld	a, b
1874  06F1  CE 00       	adc	a,0x00
1875  06F3  57          	ld	d, a
1876  06F4  1A          	ld	a, (de)
1877  06F5  E6 F7       	and	a,0xf7
1878  06F7  12          	ld	(de), a
1879  06F8  79          	ld	a, c
1880  06F9  86          	add	a, (hl)
1881  06FA  4F          	ld	c, a
1882  06FB  78          	ld	a, b
1883  06FC  CE 00       	adc	a,0x00
1884  06FE  47          	ld	b, a
1885  06FF  0A          	ld	a, (bc)
1886  0700  F6 20       	or	a,0x20
1887  0702  02          	ld	(bc), a
1888  0703              l_player_move_input_00114:
1889  0703  21 00 00    	ld	hl,_dirs
1890  0706  CB 56       	bit	2, (hl)
1891  0708  28 3F       	jr	Z,l_player_move_input_00118
1892  070A  21 00 00    	ld	hl,_s_state
1893  070D  CB 56       	bit	2, (hl)
1894  070F  28 08       	jr	Z,l_player_move_input_00116
1895  0711  CD F7 00    	call	_player_calc_slide
1896  0714  2E 01       	ld	l,0x01
1897  0716  C3 66 08    	jp	l_player_move_input_00135
1898  0719              l_player_move_input_00116:
1899  0719  21 00 00    	ld	hl,_s_state
1900  071C  7E          	ld	a,(hl)
1901  071D  F6 08       	or	a,0x08
1902  071F  E6 FB       	and	a,0xfb
1903  0721  77          	ld	(hl),a
1904  0722  01 00 00    	ld	bc,_state_a+0
1905  0725  79          	ld	a, c
1906  0726  21 00 00    	ld	hl,_sprite
1907  0729  86          	add	a, (hl)
1908  072A  5F          	ld	e, a
1909  072B  78          	ld	a, b
1910  072C  CE 00       	adc	a,0x00
1911  072E  57          	ld	d, a
1912  072F  1A          	ld	a, (de)
1913  0730  F6 08       	or	a,0x08
1914  0732  12          	ld	(de), a
1915  0733  79          	ld	a, c
1916  0734  86          	add	a, (hl)
1917  0735  5F          	ld	e, a
1918  0736  78          	ld	a, b
1919  0737  CE 00       	adc	a,0x00
1920  0739  57          	ld	d, a
1921  073A  1A          	ld	a, (de)
1922  073B  E6 EF       	and	a,0xef
1923  073D  12          	ld	(de), a
1924  073E  79          	ld	a, c
1925  073F  86          	add	a, (hl)
1926  0740  4F          	ld	c, a
1927  0741  78          	ld	a, b
1928  0742  CE 00       	adc	a,0x00
1929  0744  47          	ld	b, a
1930  0745  0A          	ld	a, (bc)
1931  0746  F6 20       	or	a,0x20
1932  0748  02          	ld	(bc), a
1933  0749              l_player_move_input_00118:
1934  0749  2A 00 00    	ld	hl,(_sprite)
1935  074C  26 00       	ld	h,0x00
1936  074E  01 00 00    	ld	bc,_state
1937  0751  09          	add	hl,bc
1938  0752  3A 00 00    	ld	a,(_s_state)
1939  0755  77          	ld	(hl),a
1940  0756  2A 00 00    	ld	hl,(_sprite)
1941  0759  26 00       	ld	h,0x00
1942  075B  01 00 00    	ld	bc,_tile
1943  075E  09          	add	hl,bc
1944  075F  E5          	push	hl
1945  0760  3E 08       	ld	a,0x08
1946  0762  21 00 00    	ld	hl,_sprite
1947  0765  F5          	push	af
1948  0766  33          	inc	sp
1949  0767  56          	ld	d, (hl)
1950  0768  1E 48       	ld	e,0x48
1951  076A  D5          	push	de
1952  076B  CD 00 00    	call	_spr_tile_dir
1953  076E  F1          	pop	af
1954  076F  33          	inc	sp
1955  0770  C1          	pop	bc
1956  0771  7D          	ld	a,l
1957  0772  02          	ld	(bc), a
1958  0773  CD 00 00    	call	_ay_is_playing
1959  0776  7D          	ld	a, l
1960  0777  B7          	or	a, a
1961  0778  20 0C       	jr	NZ,l_player_move_input_00120
1962  077A  3A 00 00    	ld	a,(_game_bonus)
1963  077D  B7          	or	a, a
1964  077E  20 06       	jr	NZ,l_player_move_input_00120
1965  0780  21 00 00    	ld	hl,_ay_effect_20
1966  0783  CD 00 00    	call	_ay_fx_play
1967  0786              l_player_move_input_00120:
1968  0786  CD 00 00    	call	_spr_move_horizontal
1969  0789  2E 01       	ld	l,0x01
1970  078B  C3 66 08    	jp	l_player_move_input_00135
1971  078E              l_player_move_input_00131:
1972  078E  2A 00 00    	ld	hl,(_sprite)
1973  0791  26 00       	ld	h,0x00
1974  0793  01 00 00    	ld	bc,_state_a
1975  0796  09          	add	hl,bc
1976  0797  CB 6E       	bit	5,(hl)
1977  0799  28 10       	jr	Z,l_player_move_input_00123
1978  079B  CD F7 00    	call	_player_calc_slide
1979  079E  2A 00 00    	ld	hl,(_sprite)
1980  07A1  26 00       	ld	h,0x00
1981  07A3  01 00 00    	ld	bc,_state_a
1982  07A6  09          	add	hl,bc
1983  07A7  7E          	ld	a,(hl)
1984  07A8  E6 DF       	and	a,0xdf
1985  07AA  77          	ld	(hl),a
1986  07AB              l_player_move_input_00123:
1987  07AB  2A 00 00    	ld	hl,(_index_player)
1988  07AE  26 00       	ld	h,0x00
1989  07B0  01 00 00    	ld	bc,_sliding
1990  07B3  09          	add	hl,bc
1991  07B4  7E          	ld	a,(hl)
1992  07B5  B7          	or	a, a
1993  07B6  CA 64 08    	jp	Z, l_player_move_input_00129
1994  07B9  CD 00 00    	call	_ay_is_playing
1995  07BC  7D          	ld	a, l
1996  07BD  D6 03       	sub	a,0x03
1997  07BF  28 06       	jr	Z,l_player_move_input_00125
1998  07C1  21 00 00    	ld	hl,_ay_effect_01
1999  07C4  CD 00 00    	call	_ay_fx_play
2000  07C7              l_player_move_input_00125:
2001  07C7  CD 00 00    	call	_sound_slide
2002  07CA  CD 00 00    	call	_spr_move_horizontal
2003  07CD  2A 00 00    	ld	hl,(_index_player)
2004  07D0  26 00       	ld	h,0x00
2005  07D2  01 00 00    	ld	bc,_sliding
2006  07D5  09          	add	hl,bc
2007  07D6  7E          	ld	a,(hl)
2008  07D7  C6 FF       	add	a,0xff
2009  07D9  77          	ld	(hl),a
2010  07DA  2A 00 00    	ld	hl,(_sprite)
2011  07DD  26 00       	ld	h,0x00
2012  07DF  01 00 00    	ld	bc,_sprite_speed_alt
2013  07E2  09          	add	hl,bc
2014  07E3  AF          	xor	a,a
2015  07E4  77          	ld	(hl),a
2016  07E5  2A 00 00    	ld	hl,(_sprite)
2017  07E8  26 00       	ld	h,0x00
2018  07EA  01 00 00    	ld	bc,_tile
2019  07ED  09          	add	hl,bc
2020  07EE  E5          	push	hl
2021  07EF  3E 08       	ld	a,0x08
2022  07F1  21 00 00    	ld	hl,_sprite
2023  07F4  F5          	push	af
2024  07F5  33          	inc	sp
2025  07F6  56          	ld	d, (hl)
2026  07F7  1E 48       	ld	e,0x48
2027  07F9  D5          	push	de
2028  07FA  CD 00 00    	call	_spr_tile_dir
2029  07FD  F1          	pop	af
2030  07FE  33          	inc	sp
2031  07FF  C1          	pop	bc
2032  0800  7D          	ld	a,l
2033  0801  02          	ld	(bc), a
2034  0802  2A 00 00    	ld	hl,(_index_player)
2035  0805  26 00       	ld	h,0x00
2036  0807  01 00 00    	ld	bc,_sliding
2037  080A  09          	add	hl,bc
2038  080B  7E          	ld	a,(hl)
2039  080C  B7          	or	a, a
2040  080D  20 55       	jr	NZ,l_player_move_input_00129
2041  080F  01 00 00    	ld	bc,_spr_timer+0
2042  0812  2A 00 00    	ld	hl,(_sprite)
2043  0815  26 00       	ld	h,0x00
2044  0817  29          	add	hl, hl
2045  0818  09          	add	hl, bc
2046  0819  AF          	xor	a, a
2047  081A  77          	ld	(hl), a
2048  081B  23          	inc	hl
2049  081C  77          	ld	(hl), a
2050  081D  2A 00 00    	ld	hl,(_sprite)
2051  0820  26 00       	ld	h,0x00
2052  0822  01 00 00    	ld	bc,_colint
2053  0825  09          	add	hl,bc
2054  0826  AF          	xor	a,a
2055  0827  77          	ld	(hl),a
2056  0828  2A 00 00    	ld	hl,(_sprite)
2057  082B  26 00       	ld	h,0x00
2058  082D  01 00 00    	ld	bc,_tile
2059  0830  09          	add	hl,bc
2060  0831  E5          	push	hl
2061  0832  3E 01       	ld	a,0x01
2062  0834  21 00 00    	ld	hl,_sprite
2063  0837  F5          	push	af
2064  0838  33          	inc	sp
2065  0839  56          	ld	d, (hl)
2066  083A  1E 58       	ld	e,0x58
2067  083C  D5          	push	de
2068  083D  CD 00 00    	call	_spr_tile_dir
2069  0840  F1          	pop	af
2070  0841  33          	inc	sp
2071  0842  C1          	pop	bc
2072  0843  7D          	ld	a,l
2073  0844  02          	ld	(bc), a
2074  0845  01 00 00    	ld	bc,_state+0
2075  0848  79          	ld	a, c
2076  0849  21 00 00    	ld	hl,_sprite
2077  084C  86          	add	a, (hl)
2078  084D  5F          	ld	e, a
2079  084E  78          	ld	a, b
2080  084F  CE 00       	adc	a,0x00
2081  0851  57          	ld	d, a
2082  0852  1A          	ld	a, (de)
2083  0853  E6 FB       	and	a,0xfb
2084  0855  12          	ld	(de), a
2085  0856  79          	ld	a, c
2086  0857  86          	add	a, (hl)
2087  0858  4F          	ld	c, a
2088  0859  78          	ld	a, b
2089  085A  CE 00       	adc	a,0x00
2090  085C  47          	ld	b, a
2091  085D  0A          	ld	a, (bc)
2092  085E  E6 F7       	and	a,0xf7
2093  0860  02          	ld	(bc), a
2094  0861  CD 67 0B    	call	_player_check_floor
2095  0864              l_player_move_input_00129:
2096  0864  2E 00       	ld	l,0x00
2097  0866              l_player_move_input_00135:
2098  0866  C9          	ret
2099  0867              	SECTION code_compiler
2100  0867              ;	---------------------------------
2101  0867              ; Function player_hit_brick
2102  0867              ; ---------------------------------
2103  0867              _player_hit_brick:
2104  0867  2A 00 00    	ld	hl,(_index_player)
2105  086A  26 00       	ld	h,0x00
2106  086C  01 00 00    	ld	bc,_hit_lin
2107  086F  09          	add	hl,bc
2108  0870  7E          	ld	a,(hl)
2109  0871  B7          	or	a, a
2110  0872  C2 DB 09    	jp	NZ, l_player_hit_brick_00120
2111  0875  2A 00 00    	ld	hl,(_sprite)
2112  0878  26 00       	ld	h,0x00
2113  087A  01 00 00    	ld	bc,_lin
2114  087D  09          	add	hl,bc
2115  087E  4E          	ld	c,(hl)
2116  087F  3E 10       	ld	a,0x10
2117  0881  91          	sub	a, c
2118  0882  D2 DB 09    	jp	NC, l_player_hit_brick_00120
2119  0885  21 00 00    	ld	hl,_enemies
2120  0888  36 00       	ld	(hl),0x00
2121  088A              l_player_hit_brick_00122:
2122  088A  2A 00 00    	ld	hl,(_enemies)
2123  088D  26 00       	ld	h,0x00
2124  088F  01 00 00    	ld	bc,_class
2125  0892  09          	add	hl,bc
2126  0893  7E          	ld	a,(hl)
2127  0894  B7          	or	a, a
2128  0895  28 64       	jr	Z,l_player_hit_brick_00123
2129  0897  2A 00 00    	ld	hl,(_sprite)
2130  089A  26 00       	ld	h,0x00
2131  089C  01 00 00    	ld	bc,_lin
2132  089F  09          	add	hl,bc
2133  08A0  4E          	ld	c,(hl)
2134  08A1  06 00       	ld	b,0x00
2135  08A3  2A 00 00    	ld	hl,(_enemies)
2136  08A6  60          	ld	h,b
2137  08A7  11 00 00    	ld	de,_lin
2138  08AA  19          	add	hl,de
2139  08AB  5E          	ld	e, (hl)
2140  08AC  16 00       	ld	d,0x00
2141  08AE  79          	ld	a,c
2142  08AF  93          	sub	a,e
2143  08B0  4F          	ld	c,a
2144  08B1  78          	ld	a,b
2145  08B2  9A          	sbc	a,d
2146  08B3  47          	ld	b,a
2147  08B4  79          	ld	a,c
2148  08B5  D6 18       	sub	a,0x18
2149  08B7  B0          	or	a,b
2150  08B8  20 41       	jr	NZ,l_player_hit_brick_00123
2151  08BA  2A 00 00    	ld	hl,(_enemies)
2152  08BD  26 00       	ld	h,0x00
2153  08BF  01 00 00    	ld	bc,_state
2154  08C2  09          	add	hl,bc
2155  08C3  CB 6E       	bit	5,(hl)
2156  08C5  20 34       	jr	NZ,l_player_hit_brick_00123
2157  08C7  2A 00 00    	ld	hl,(_sprite)
2158  08CA  26 00       	ld	h,0x00
2159  08CC  01 00 00    	ld	bc,_col
2160  08CF  09          	add	hl,bc
2161  08D0  4E          	ld	c,(hl)
2162  08D1  06 00       	ld	b,0x00
2163  08D3  2A 00 00    	ld	hl,(_enemies)
2164  08D6  60          	ld	h,b
2165  08D7  11 00 00    	ld	de,_col
2166  08DA  19          	add	hl,de
2167  08DB  5E          	ld	e, (hl)
2168  08DC  16 00       	ld	d,0x00
2169  08DE  79          	ld	a, c
2170  08DF  93          	sub	a, e
2171  08E0  6F          	ld	l, a
2172  08E1  78          	ld	a, b
2173  08E2  9A          	sbc	a, d
2174  08E3  67          	ld	h, a
2175  08E4  CD 00 00    	call	_abs_fastcall
2176  08E7  3E 02       	ld	a,0x02
2177  08E9  BD          	cp	a,l
2178  08EA  3E 00       	ld	a,0x00
2179  08EC  9C          	sbc	a,h
2180  08ED  E2 F2 08    	jp	PO, l_player_hit_brick_00178
2181  08F0  EE 80       	xor	a,0x80
2182  08F2              l_player_hit_brick_00178:
2183  08F2  FA FB 08    	jp	M, l_player_hit_brick_00123
2184  08F5  CD 00 00    	call	_enemy_hit
2185  08F8  CD 00 00    	call	_sound_hit_enemy
2186  08FB              l_player_hit_brick_00123:
2187  08FB  21 00 00    	ld	hl,_enemies
2188  08FE  7E          	ld	a,(hl)
2189  08FF  3C          	inc	a
2190  0900  77          	ld	(hl),a
2191  0901  D6 06       	sub	a,0x06
2192  0903  38 85       	jr	C,l_player_hit_brick_00122
2193  0905  2A 00 00    	ld	hl,(_sprite)
2194  0908  26 00       	ld	h,0x00
2195  090A  01 00 00    	ld	bc,_state_a
2196  090D  09          	add	hl,bc
2197  090E  7E          	ld	a,(hl)
2198  090F  F6 80       	or	a,0x80
2199  0911  77          	ld	(hl),a
2200  0912  2A 00 00    	ld	hl,(_index_player)
2201  0915  26 00       	ld	h,0x00
2202  0917  01 00 00    	ld	bc,_player_jump_c
2203  091A  09          	add	hl,bc
2204  091B  36 04       	ld	(hl),0x04
2205  091D  01 00 00    	ld	bc,_spr_timer+0
2206  0920  2A 00 00    	ld	hl,(_sprite)
2207  0923  26 00       	ld	h,0x00
2208  0925  29          	add	hl, hl
2209  0926  09          	add	hl,bc
2210  0927  ED 5B 00 00 	ld	de,(_curr_time)
2211  092B  73          	ld	(hl),e
2212  092C  23          	inc	hl
2213  092D  72          	ld	(hl),d
2214  092E  3A 00 00    	ld	a,(_index_player)
2215  0931  C6 00       	add	a,+((_hit_lin) & 0xFF)
2216  0933  5F          	ld	e,a
2217  0934  3E 00       	ld	a,+((_hit_lin) / 256)
2218  0936  CE 00       	adc	a,0x00
2219  0938  57          	ld	d,a
2220  0939  2A 00 00    	ld	hl,(_sprite)
2221  093C  26 00       	ld	h,0x00
2222  093E  01 00 00    	ld	bc,_lin
2223  0941  09          	add	hl,bc
2224  0942  4E          	ld	c,(hl)
2225  0943  06 00       	ld	b,0x00
2226  0945  21 F8 FF    	ld	hl,0xfff8
2227  0948  09          	add	hl,bc
2228  0949  06 04       	ld	b,0x04
2229  094B              l_player_hit_brick_00179:
2230  094B  CB 2C       	sra	h
2231  094D  CB 1D       	rr	l
2232  094F  10 FA       	djnz	l_player_hit_brick_00179
2233  0951  7D          	ld	a, l
2234  0952  07          	rlca
2235  0953  07          	rlca
2236  0954  07          	rlca
2237  0955  07          	rlca
2238  0956  E6 F0       	and	a,0xf0
2239  0958  C6 08       	add	a,0x08
2240  095A  12          	ld	(de), a
2241  095B  2A 00 00    	ld	hl,(_sprite)
2242  095E  26 00       	ld	h,0x00
2243  0960  01 00 00    	ld	bc,_col
2244  0963  09          	add	hl,bc
2245  0964  4E          	ld	c,(hl)
2246  0965  CB 41       	bit	0,c
2247  0967  20 0F       	jr	NZ,l_player_hit_brick_00117
2248  0969  3A 00 00    	ld	a,(_index_player)
2249  096C  C6 00       	add	a,+((_hit_col) & 0xFF)
2250  096E  5F          	ld	e,a
2251  096F  3E 00       	ld	a,+((_hit_col) / 256)
2252  0971  CE 00       	adc	a,0x00
2253  0973  57          	ld	d,a
2254  0974  79          	ld	a, c
2255  0975  12          	ld	(de), a
2256  0976  18 57       	jr	l_player_hit_brick_00118
2257  0978              l_player_hit_brick_00117:
2258  0978  2A 00 00    	ld	hl,(_sprite)
2259  097B  26 00       	ld	h,0x00
2260  097D  11 00 00    	ld	de,_state
2261  0980  19          	add	hl,de
2262  0981  5E          	ld	e, (hl)
2263  0982  41          	ld	b, c
2264  0983  04          	inc	b
2265  0984  0D          	dec	c
2266  0985  CB 5B       	bit	3, e
2267  0987  28 24       	jr	Z,l_player_hit_brick_00114
2268  0989  3A 00 00    	ld	a,(_g_hit_right)
2269  098C  B7          	or	a, a
2270  098D  28 0F       	jr	Z,l_player_hit_brick_00108
2271  098F  3A 00 00    	ld	a,(_index_player)
2272  0992  C6 00       	add	a,+((_hit_col) & 0xFF)
2273  0994  5F          	ld	e,a
2274  0995  3E 00       	ld	a,+((_hit_col) / 256)
2275  0997  CE 00       	adc	a,0x00
2276  0999  57          	ld	d,a
2277  099A  78          	ld	a, b
2278  099B  12          	ld	(de), a
2279  099C  18 31       	jr	l_player_hit_brick_00118
2280  099E              l_player_hit_brick_00108:
2281  099E  3A 00 00    	ld	a,(_index_player)
2282  09A1  C6 00       	add	a,+((_hit_col) & 0xFF)
2283  09A3  5F          	ld	e,a
2284  09A4  3E 00       	ld	a,+((_hit_col) / 256)
2285  09A6  CE 00       	adc	a,0x00
2286  09A8  57          	ld	d,a
2287  09A9  79          	ld	a, c
2288  09AA  12          	ld	(de), a
2289  09AB  18 22       	jr	l_player_hit_brick_00118
2290  09AD              l_player_hit_brick_00114:
2291  09AD  3A 00 00    	ld	a,(_g_hit_left)
2292  09B0  B7          	or	a, a
2293  09B1  28 0F       	jr	Z,l_player_hit_brick_00111
2294  09B3  3A 00 00    	ld	a,(_index_player)
2295  09B6  C6 00       	add	a,+((_hit_col) & 0xFF)
2296  09B8  5F          	ld	e,a
2297  09B9  3E 00       	ld	a,+((_hit_col) / 256)
2298  09BB  CE 00       	adc	a,0x00
2299  09BD  57          	ld	d,a
2300  09BE  79          	ld	a, c
2301  09BF  12          	ld	(de), a
2302  09C0  18 0D       	jr	l_player_hit_brick_00118
2303  09C2              l_player_hit_brick_00111:
2304  09C2  3A 00 00    	ld	a,(_index_player)
2305  09C5  C6 00       	add	a,+((_hit_col) & 0xFF)
2306  09C7  5F          	ld	e,a
2307  09C8  3E 00       	ld	a,+((_hit_col) / 256)
2308  09CA  CE 00       	adc	a,0x00
2309  09CC  57          	ld	d,a
2310  09CD  78          	ld	a, b
2311  09CE  12          	ld	(de), a
2312  09CF              l_player_hit_brick_00118:
2313  09CF  2E 01       	ld	l,0x01
2314  09D1  CD 00 00    	call	_spr_brick_anim
2315  09D4  CD 00 00    	call	_sound_hit_brick
2316  09D7  2E 01       	ld	l,0x01
2317  09D9  18 02       	jr	l_player_hit_brick_00124
2318  09DB              l_player_hit_brick_00120:
2319  09DB  2E 00       	ld	l,0x00
2320  09DD              l_player_hit_brick_00124:
2321  09DD  C9          	ret
2322  09DE              	SECTION code_compiler
2323  09DE              ;	---------------------------------
2324  09DE              ; Function player_hit_brick_clear
2325  09DE              ; ---------------------------------
2326  09DE              _player_hit_brick_clear:
2327  09DE  2A 00 00    	ld	hl,(_index_player)
2328  09E1  26 00       	ld	h,0x00
2329  09E3  01 00 00    	ld	bc,_hit_lin
2330  09E6  09          	add	hl,bc
2331  09E7  7E          	ld	a,(hl)
2332  09E8  47          	ld	b,a
2333  09E9  B7          	or	a,a
2334  09EA  C8          	ret	Z
2335  09EB  3A 00 00    	ld	a,(_index_player)
2336  09EE  5F          	ld	e,a
2337  09EF  16 00       	ld	d,0x00
2338  09F1  21 00 00    	ld	hl,_hit_col
2339  09F4  19          	add	hl,de
2340  09F5  7E          	ld	a,(hl)
2341  09F6  48          	ld	c,b
2342  09F7  47          	ld	b,a
2343  09F8  C5          	push	bc
2344  09F9  CD 00 00    	call	_spr_calc_index
2345  09FC  F1          	pop	af
2346  09FD  22 00 00    	ld	(_index1),hl
2347  0A00  2E 00       	ld	l,0x00
2348  0A02  CD 00 00    	call	_spr_brick_anim
2349  0A05  2A 00 00    	ld	hl,(_index_player)
2350  0A08  26 00       	ld	h,0x00
2351  0A0A  01 00 00    	ld	bc,_hit_lin
2352  0A0D  09          	add	hl,bc
2353  0A0E  AF          	xor	a,a
2354  0A0F  77          	ld	(hl),a
2355  0A10  2A 00 00    	ld	hl,(_index_player)
2356  0A13  26 00       	ld	h,0x00
2357  0A15  01 00 00    	ld	bc,_hit_col
2358  0A18  09          	add	hl,bc
2359  0A19  AF          	xor	a,a
2360  0A1A  77          	ld	(hl),a
2361  0A1B  C9          	ret
2362  0A1C              	SECTION code_compiler
2363  0A1C              ;	---------------------------------
2364  0A1C              ; Function player_coin
2365  0A1C              ; ---------------------------------
2366  0A1C              _player_coin:
2367  0A1C  CD 00 00    	call	___sdcc_enter_ix
2368  0A1F  3E 00       	ld	a, +((_class) & 0xFF)
2369  0A21  DD 86 04    	add	a,(ix+4)
2370  0A24  4F          	ld	c, a
2371  0A25  3E 00       	ld	a, +((_class) / 256)
2372  0A27  CE 00       	adc	a,0x00
2373  0A29  47          	ld	b, a
2374  0A2A  0A          	ld	a, (bc)
2375  0A2B  D6 07       	sub	a,0x07
2376  0A2D  20 16       	jr	NZ,l_player_coin_00102
2377  0A2F  21 00 00    	ld	hl,_ay_effect_12
2378  0A32  CD 00 00    	call	_ay_fx_play
2379  0A35  3E 00       	ld	a, +((_sprite_speed_alt) & 0xFF)
2380  0A37  DD 86 04    	add	a,(ix+4)
2381  0A3A  4F          	ld	c, a
2382  0A3B  3E 00       	ld	a, +((_sprite_speed_alt) / 256)
2383  0A3D  CE 00       	adc	a,0x00
2384  0A3F  47          	ld	b, a
2385  0A40  3E 03       	ld	a,0x03
2386  0A42  02          	ld	(bc), a
2387  0A43  18 17       	jr	l_player_coin_00103
2388  0A45              l_player_coin_00102:
2389  0A45  21 00 00    	ld	hl,_ay_effect_10
2390  0A48  CD 00 00    	call	_ay_fx_play
2391  0A4B  3E 00       	ld	a, +((_sprite_speed_alt) & 0xFF)
2392  0A4D  DD 86 04    	add	a,(ix+4)
2393  0A50  4F          	ld	c, a
2394  0A51  3E 00       	ld	a, +((_sprite_speed_alt) / 256)
2395  0A53  CE 00       	adc	a,0x00
2396  0A55  47          	ld	b, a
2397  0A56  3E 08       	ld	a,0x08
2398  0A58  02          	ld	(bc), a
2399  0A59  CD 00 00    	call	_sound_coin
2400  0A5C              l_player_coin_00103:
2401  0A5C  3E 00       	ld	a, +((_state) & 0xFF)
2402  0A5E  DD 86 04    	add	a,(ix+4)
2403  0A61  4F          	ld	c, a
2404  0A62  3E 00       	ld	a, +((_state) / 256)
2405  0A64  CE 00       	adc	a,0x00
2406  0A66  47          	ld	b, a
2407  0A67  0A          	ld	a, (bc)
2408  0A68  E6 FE       	and	a,0xfe
2409  0A6A  F6 20       	or	a,0x20
2410  0A6C  02          	ld	(bc),a
2411  0A6D  01 00 00    	ld	bc,_spr_timer+0
2412  0A70  DD 6E 04    	ld	l,(ix+4)
2413  0A73  26 00       	ld	h,0x00
2414  0A75  29          	add	hl, hl
2415  0A76  09          	add	hl,bc
2416  0A77  ED 5B 00 00 	ld	de,(_curr_time)
2417  0A7B  73          	ld	(hl),e
2418  0A7C  23          	inc	hl
2419  0A7D  72          	ld	(hl),d
2420  0A7E  3A 00 00    	ld	a,(_game_bonus)
2421  0A81  B7          	or	a, a
2422  0A82  28 1B       	jr	Z,l_player_coin_00107
2423  0A84  2A 00 00    	ld	hl,(_index_player)
2424  0A87  26 00       	ld	h,0x00
2425  0A89  01 00 00    	ld	bc,_phase_bonus_total
2426  0A8C  09          	add	hl,bc
2427  0A8D  7E          	ld	a,(hl)
2428  0A8E  3C          	inc	a
2429  0A8F  77          	ld	(hl),a
2430  0A90  4D          	ld	c,l
2431  0A91  44          	ld	b,h
2432  0A92  21 00 00    	ld	hl,_phase_left
2433  0A95  35          	dec (hl)
2434  0A96  20 0F       	jr	NZ,l_player_coin_00109
2435  0A98  21 00 00    	ld	hl,_phase_end
2436  0A9B  36 01       	ld	(hl),0x01
2437  0A9D  18 08       	jr	l_player_coin_00109
2438  0A9F              l_player_coin_00107:
2439  0A9F  DD 6E 05    	ld	l,(ix+5)
2440  0AA2  26 00       	ld	h,0x00
2441  0AA4  CD AA 0A    	call	_player_score_add
2442  0AA7              l_player_coin_00109:
2443  0AA7  DD E1       	pop	ix
2444  0AA9  C9          	ret
2445  0AAA              	SECTION code_compiler
2446  0AAA              ;	---------------------------------
2447  0AAA              ; Function player_score_add
2448  0AAA              ; ---------------------------------
2449  0AAA              _player_score_add:
2450  0AAA  4D          	ld	c, l
2451  0AAB  44          	ld	b, h
2452  0AAC  2A 00 00    	ld	hl,(_index_player)
2453  0AAF  26 00       	ld	h,0x00
2454  0AB1  29          	add	hl, hl
2455  0AB2  11 00 00    	ld	de,_player_score
2456  0AB5  19          	add	hl, de
2457  0AB6  5E          	ld	e,(hl)
2458  0AB7  23          	inc	hl
2459  0AB8  56          	ld	d,(hl)
2460  0AB9  2B          	dec	hl
2461  0ABA  7B          	ld	a, e
2462  0ABB  81          	add	a, c
2463  0ABC  4F          	ld	c, a
2464  0ABD  7A          	ld	a, d
2465  0ABE  88          	adc	a, b
2466  0ABF  47          	ld	b, a
2467  0AC0  71          	ld	(hl), c
2468  0AC1  23          	inc	hl
2469  0AC2  70          	ld	(hl), b
2470  0AC3  2A 00 00    	ld	hl,(_index_player)
2471  0AC6  26 00       	ld	h,0x00
2472  0AC8  29          	add	hl,hl
2473  0AC9  4D          	ld	c,l
2474  0ACA  44          	ld	b,h
2475  0ACB  21 00 00    	ld	hl,_player_score
2476  0ACE  09          	add	hl, bc
2477  0ACF  5E          	ld	e, (hl)
2478  0AD0  23          	inc	hl
2479  0AD1  56          	ld	d, (hl)
2480  0AD2  21 00 00    	ld	hl,_game_score_top
2481  0AD5  7E          	ld	a, (hl)
2482  0AD6  93          	sub	a, e
2483  0AD7  23          	inc	hl
2484  0AD8  7E          	ld	a, (hl)
2485  0AD9  9A          	sbc	a, d
2486  0ADA  30 04       	jr	NC,l_player_score_add_00102
2487  0ADC  2B          	dec	hl
2488  0ADD  73          	ld	(hl), e
2489  0ADE  23          	inc	hl
2490  0ADF  72          	ld	(hl), d
2491  0AE0              l_player_score_add_00102:
2492  0AE0  21 00 00    	ld	hl,_player_next_extra
2493  0AE3  09          	add	hl, bc
2494  0AE4  4E          	ld	c,(hl)
2495  0AE5  23          	inc	hl
2496  0AE6  46          	ld	b,(hl)
2497  0AE7  2B          	dec	hl
2498  0AE8  79          	ld	a, c
2499  0AE9  93          	sub	a, e
2500  0AEA  78          	ld	a, b
2501  0AEB  9A          	sbc	a, d
2502  0AEC  30 76       	jr	NC,l_player_score_add_00113
2503  0AEE  79          	ld	a,c
2504  0AEF  C6 D0       	add	a,0xd0
2505  0AF1  77          	ld	(hl),a
2506  0AF2  78          	ld	a,b
2507  0AF3  CE 07       	adc	a,0x07
2508  0AF5  23          	inc	hl
2509  0AF6  77          	ld	(hl),a
2510  0AF7  2A 00 00    	ld	hl,(_index_player)
2511  0AFA  26 00       	ld	h,0x00
2512  0AFC  01 00 00    	ld	bc,_game_lives
2513  0AFF  09          	add	hl,bc
2514  0B00  34          	inc	(hl)
2515  0B01  21 00 00    	ld	hl,_hit_count
2516  0B04  36 10       	ld	(hl),0x10
2517  0B06  3A 00 00    	ld	a,(_game_bonus)
2518  0B09  B7          	or	a, a
2519  0B0A  20 03       	jr	NZ,l_player_score_add_00104
2520  0B0C  CD 00 00    	call	_game_print_lives
2521  0B0F              l_player_score_add_00104:
2522  0B0F  21 00 00    	ld	hl,_tmp0
2523  0B12  36 00       	ld	(hl),0x00
2524  0B14              l_player_score_add_00114:
2525  0B14  3A 00 00    	ld	a,(_index_player)
2526  0B17  B7          	or	a, a
2527  0B18  20 07       	jr	NZ,l_player_score_add_00106
2528  0B1A  2E 01       	ld	l,0x01
2529  0B1C  CD 00 00    	call	_zx_border_fastcall
2530  0B1F  18 05       	jr	l_player_score_add_00107
2531  0B21              l_player_score_add_00106:
2532  0B21  2E 07       	ld	l,0x07
2533  0B23  CD 00 00    	call	_zx_border_fastcall
2534  0B26              l_player_score_add_00107:
2535  0B26  21 05 00    	ld	hl,0x0005
2536  0B29  CD 00 00    	call	_z80_delay_ms_fastcall
2537  0B2C  3A 00 00    	ld	a,(_index_player)
2538  0B2F  B7          	or	a, a
2539  0B30  20 07       	jr	NZ,l_player_score_add_00109
2540  0B32  2E 02       	ld	l,0x02
2541  0B34  CD 00 00    	call	_zx_border_fastcall
2542  0B37  18 05       	jr	l_player_score_add_00110
2543  0B39              l_player_score_add_00109:
2544  0B39  2E 04       	ld	l,0x04
2545  0B3B  CD 00 00    	call	_zx_border_fastcall
2546  0B3E              l_player_score_add_00110:
2547  0B3E  21 05 00    	ld	hl,0x0005
2548  0B41  CD 00 00    	call	_z80_delay_ms_fastcall
2549  0B44  21 00 00    	ld	hl,_tmp0
2550  0B47  7E          	ld	a,(hl)
2551  0B48  3C          	inc	a
2552  0B49  77          	ld	(hl),a
2553  0B4A  D6 06       	sub	a,0x06
2554  0B4C  38 C6       	jr	C,l_player_score_add_00114
2555  0B4E  CD 00 00    	call	_sound_coin
2556  0B51  CD 00 00    	call	_sound_coin
2557  0B54  CD 00 00    	call	_sound_coin
2558  0B57  CD 00 00    	call	_sound_coin
2559  0B5A  2E 00       	ld	l,0x00
2560  0B5C  CD 00 00    	call	_zx_border_fastcall
2561  0B5F  21 00 00    	ld	hl,_hit_count
2562  0B62  36 08       	ld	(hl),0x08
2563  0B64              l_player_score_add_00113:
2564  0B64  C3 00 00    	jp  _game_print_score
2565  0B67              	SECTION code_compiler
2566  0B67              ;	---------------------------------
2567  0B67              ; Function player_check_floor
2568  0B67              ; ---------------------------------
2569  0B67              _player_check_floor:
2570  0B67  CD 00 00    	call	___sdcc_enter_ix
2571  0B6A  3B          	dec	sp
2572  0B6B  2A 00 00    	ld	hl,(_sprite)
2573  0B6E  26 00       	ld	h,0x00
2574  0B70  01 00 00    	ld	bc,_col
2575  0B73  09          	add	hl,bc
2576  0B74  56          	ld	d, (hl)
2577  0B75  2A 00 00    	ld	hl,(_sprite)
2578  0B78  26 00       	ld	h,0x00
2579  0B7A  01 00 00    	ld	bc,_lin
2580  0B7D  09          	add	hl,bc
2581  0B7E  7E          	ld	a,(hl)
2582  0B7F  C6 10       	add	a,0x10
2583  0B81  5F          	ld	e, a
2584  0B82  D5          	push	de
2585  0B83  CD 00 00    	call	_spr_calc_index
2586  0B86  F1          	pop	af
2587  0B87  4D          	ld	c, l
2588  0B88  44          	ld	b, h
2589  0B89  21 00 00    	ld	hl,_scr_map
2590  0B8C  09          	add	hl, bc
2591  0B8D  7E          	ld	a, (hl)
2592  0B8E  DD 77 FF    	ld	(ix-1),a
2593  0B91  2A 00 00    	ld	hl,(_sprite)
2594  0B94  26 00       	ld	h,0x00
2595  0B96  11 00 00    	ld	de,_col
2596  0B99  19          	add	hl,de
2597  0B9A  7E          	ld	a,(hl)
2598  0B9B  0F          	rrca
2599  0B9C  38 04       	jr	C,l_player_check_floor_00102
2600  0B9E  0E 01       	ld	c,0x01
2601  0BA0  18 06       	jr	l_player_check_floor_00103
2602  0BA2              l_player_check_floor_00102:
2603  0BA2  03          	inc	bc
2604  0BA3  21 00 00    	ld	hl,_scr_map
2605  0BA6  09          	add	hl, bc
2606  0BA7  4E          	ld	c, (hl)
2607  0BA8              l_player_check_floor_00103:
2608  0BA8  3A 00 00    	ld	a,(_s_lin0)
2609  0BAB  D6 90       	sub	a,0x90
2610  0BAD  20 04       	jr	NZ,l_player_check_floor_00105
2611  0BAF  DD 36 FF 3C 	ld	(ix-1),0x3c
2612  0BB3              l_player_check_floor_00105:
2613  0BB3  DD 7E FF    	ld	a,(ix-1)
2614  0BB6  D6 30       	sub	a,0x30
2615  0BB8  38 07       	jr	C,l_player_check_floor_00110
2616  0BBA  3E 48       	ld	a,0x48
2617  0BBC  DD 96 FF    	sub	a,(ix-1)
2618  0BBF  30 1A       	jr	NC,l_player_check_floor_00111
2619  0BC1              l_player_check_floor_00110:
2620  0BC1  79          	ld	a, c
2621  0BC2  D6 30       	sub	a,0x30
2622  0BC4  38 05       	jr	C,l_player_check_floor_00106
2623  0BC6  3E 48       	ld	a,0x48
2624  0BC8  91          	sub	a, c
2625  0BC9  30 10       	jr	NC,l_player_check_floor_00111
2626  0BCB              l_player_check_floor_00106:
2627  0BCB  2A 00 00    	ld	hl,(_sprite)
2628  0BCE  26 00       	ld	h,0x00
2629  0BD0  01 00 00    	ld	bc,_sprite_speed_alt
2630  0BD3  09          	add	hl,bc
2631  0BD4  36 02       	ld	(hl),0x02
2632  0BD6  21 00 00    	ld	hl,_s_state
2633  0BD9  CB CE       	set	1, (hl)
2634  0BDB              l_player_check_floor_00111:
2635  0BDB  33          	inc	sp
2636  0BDC  DD E1       	pop	ix
2637  0BDE  C9          	ret
2638  0BDF              	SECTION IGNORE
2639  0000              
