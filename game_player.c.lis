1     0000              MODULE game_player_c
2     0000              
3     0000              ;--------------------------------------------------------
4     0000              ; File Created by SDCC : free open source ANSI-C Compiler
5     0000              ; Version 3.6.5 #9958 (Mac OS X i386)
6     0000              ;--------------------------------------------------------
7     0000              ; Processed by Z88DK
8     0000              ;--------------------------------------------------------
9     0000              
10    0000              	EXTERN __divschar
11    0000              	EXTERN __divschar_callee
12    0000              	EXTERN __divsint
13    0000              	EXTERN __divsint_callee
14    0000              	EXTERN __divslong
15    0000              	EXTERN __divslong_callee
16    0000              	EXTERN __divslonglong
17    0000              	EXTERN __divslonglong_callee
18    0000              	EXTERN __divsuchar
19    0000              	EXTERN __divsuchar_callee
20    0000              	EXTERN __divuchar
21    0000              	EXTERN __divuchar_callee
22    0000              	EXTERN __divuint
23    0000              	EXTERN __divuint_callee
24    0000              	EXTERN __divulong
25    0000              	EXTERN __divulong_callee
26    0000              	EXTERN __divulonglong
27    0000              	EXTERN __divulonglong_callee
28    0000              	EXTERN __divuschar
29    0000              	EXTERN __divuschar_callee
30    0000              	EXTERN __modschar
31    0000              	EXTERN __modschar_callee
32    0000              	EXTERN __modsint
33    0000              	EXTERN __modsint_callee
34    0000              	EXTERN __modslong
35    0000              	EXTERN __modslong_callee
36    0000              	EXTERN __modslonglong
37    0000              	EXTERN __modslonglong_callee
38    0000              	EXTERN __modsuchar
39    0000              	EXTERN __modsuchar_callee
40    0000              	EXTERN __moduchar
41    0000              	EXTERN __moduchar_callee
42    0000              	EXTERN __moduint
43    0000              	EXTERN __moduint_callee
44    0000              	EXTERN __modulong
45    0000              	EXTERN __modulong_callee
46    0000              	EXTERN __modulonglong
47    0000              	EXTERN __modulonglong_callee
48    0000              	EXTERN __moduschar
49    0000              	EXTERN __moduschar_callee
50    0000              	EXTERN __mulint
51    0000              	EXTERN __mulint_callee
52    0000              	EXTERN __mullong
53    0000              	EXTERN __mullong_callee
54    0000              	EXTERN __mullonglong
55    0000              	EXTERN __mullonglong_callee
56    0000              	EXTERN __mulschar
57    0000              	EXTERN __mulschar_callee
58    0000              	EXTERN __mulsuchar
59    0000              	EXTERN __mulsuchar_callee
60    0000              	EXTERN __muluschar
61    0000              	EXTERN __muluschar_callee
62    0000              	EXTERN __rlslonglong
63    0000              	EXTERN __rlslonglong_callee
64    0000              	EXTERN __rlulonglong
65    0000              	EXTERN __rlulonglong_callee
66    0000              	EXTERN __rrslonglong
67    0000              	EXTERN __rrslonglong_callee
68    0000              	EXTERN __rrulonglong
69    0000              	EXTERN __rrulonglong_callee
70    0000              	EXTERN ___sdcc_call_hl
71    0000              	EXTERN ___sdcc_call_iy
72    0000              	EXTERN ___sdcc_enter_ix
73    0000              	EXTERN _banked_call
74    0000              	EXTERN _banked_ret
75    0000              	EXTERN ___fs2schar
76    0000              	EXTERN ___fs2schar_callee
77    0000              	EXTERN ___fs2sint
78    0000              	EXTERN ___fs2sint_callee
79    0000              	EXTERN ___fs2slong
80    0000              	EXTERN ___fs2slong_callee
81    0000              	EXTERN ___fs2slonglong
82    0000              	EXTERN ___fs2slonglong_callee
83    0000              	EXTERN ___fs2uchar
84    0000              	EXTERN ___fs2uchar_callee
85    0000              	EXTERN ___fs2uint
86    0000              	EXTERN ___fs2uint_callee
87    0000              	EXTERN ___fs2ulong
88    0000              	EXTERN ___fs2ulong_callee
89    0000              	EXTERN ___fs2ulonglong
90    0000              	EXTERN ___fs2ulonglong_callee
91    0000              	EXTERN ___fsadd
92    0000              	EXTERN ___fsadd_callee
93    0000              	EXTERN ___fsdiv
94    0000              	EXTERN ___fsdiv_callee
95    0000              	EXTERN ___fseq
96    0000              	EXTERN ___fseq_callee
97    0000              	EXTERN ___fsgt
98    0000              	EXTERN ___fsgt_callee
99    0000              	EXTERN ___fslt
100   0000              	EXTERN ___fslt_callee
101   0000              	EXTERN ___fsmul
102   0000              	EXTERN ___fsmul_callee
103   0000              	EXTERN ___fsneq
104   0000              	EXTERN ___fsneq_callee
105   0000              	EXTERN ___fssub
106   0000              	EXTERN ___fssub_callee
107   0000              	EXTERN ___schar2fs
108   0000              	EXTERN ___schar2fs_callee
109   0000              	EXTERN ___sint2fs
110   0000              	EXTERN ___sint2fs_callee
111   0000              	EXTERN ___slong2fs
112   0000              	EXTERN ___slong2fs_callee
113   0000              	EXTERN ___slonglong2fs
114   0000              	EXTERN ___slonglong2fs_callee
115   0000              	EXTERN ___uchar2fs
116   0000              	EXTERN ___uchar2fs_callee
117   0000              	EXTERN ___uint2fs
118   0000              	EXTERN ___uint2fs_callee
119   0000              	EXTERN ___ulong2fs
120   0000              	EXTERN ___ulong2fs_callee
121   0000              	EXTERN ___ulonglong2fs
122   0000              	EXTERN ___ulonglong2fs_callee
123   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
126   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
127   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
128   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
129   0000              	EXTERN ____sdcc_4_ldi_save_bc
130   0000              	EXTERN ____sdcc_4_push_hlix
131   0000              	EXTERN ____sdcc_4_push_mhl
132   0000              	EXTERN ____sdcc_lib_setmem_hl
133   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
134   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
135   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
136   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
137   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
138   0000              	EXTERN ____sdcc_ll_add_deix_hlix
139   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
140   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
141   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
142   0000              	EXTERN ____sdcc_ll_asr_hlix_a
143   0000              	EXTERN ____sdcc_ll_asr_mbc_a
144   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
145   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
146   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
147   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
148   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
149   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
150   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
151   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
152   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
153   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
155   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
156   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
157   0000              	EXTERN ____sdcc_ll_push_hlix
158   0000              	EXTERN ____sdcc_ll_push_mhl
159   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
160   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
161   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
162   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
163   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
164   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
165   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
166   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
167   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
168   0000              	EXTERN ____sdcc_load_debc_deix
169   0000              	EXTERN ____sdcc_load_dehl_deix
170   0000              	EXTERN ____sdcc_load_debc_mhl
171   0000              	EXTERN ____sdcc_load_hlde_mhl
172   0000              	EXTERN ____sdcc_store_dehl_bcix
173   0000              	EXTERN ____sdcc_store_debc_hlix
174   0000              	EXTERN ____sdcc_store_debc_mhl
175   0000              	EXTERN ____sdcc_cpu_pop_ei
176   0000              	EXTERN ____sdcc_cpu_pop_ei_jp
177   0000              	EXTERN ____sdcc_cpu_push_di
178   0000              	EXTERN ____sdcc_outi
179   0000              	EXTERN ____sdcc_outi_128
180   0000              	EXTERN ____sdcc_outi_256
181   0000              	EXTERN ____sdcc_ldi
182   0000              	EXTERN ____sdcc_ldi_128
183   0000              	EXTERN ____sdcc_ldi_256
184   0000              
185   0000              ;--------------------------------------------------------
186   0000              ; Public variables in this module
187   0000              ;--------------------------------------------------------
188   0000              	GLOBAL _player_check_map
189   0000              	GLOBAL _player_init
190   0000              	GLOBAL _player_check_input
191   0000              	GLOBAL _player_collision
192   0000              	GLOBAL _player_kill
193   0000              	GLOBAL _player_restart
194   0000              	GLOBAL _player_turn
195   0000              	GLOBAL _player_move
196   0000              	GLOBAL _player_check_stairs_down
197   0000              	GLOBAL _player_check_stairs
198   0000              	GLOBAL _player_tile
199   0000              	GLOBAL _player_move_input
200   0000              	GLOBAL _player_fire
201   0000              	GLOBAL _player_pick_item
202   0000              	GLOBAL _player_hit_platform
203   0000              	GLOBAL _player_hit_platform_clear
204   0000              	GLOBAL _player_score_add
205   0000              	GLOBAL _player_check_floor
206   0000              	GLOBAL _player_move_jump
207   0000              	GLOBAL _player_open_door
208   0000              	GLOBAL _player_lost_life
209   0000              	GLOBAL _player_hit
210   0000              ;--------------------------------------------------------
211   0000              ; Externals used
212   0000              ;--------------------------------------------------------
213   0000              	GLOBAL _ulltoa_callee
214   0000              	GLOBAL _ulltoa
215   0000              	GLOBAL _strtoull_callee
216   0000              	GLOBAL _strtoull
217   0000              	GLOBAL _strtoll_callee
218   0000              	GLOBAL _strtoll
219   0000              	GLOBAL _lltoa_callee
220   0000              	GLOBAL _lltoa
221   0000              	GLOBAL _llabs_callee
222   0000              	GLOBAL _llabs
223   0000              	GLOBAL __lldivu__callee
224   0000              	GLOBAL __lldivu_
225   0000              	GLOBAL __lldiv__callee
226   0000              	GLOBAL __lldiv_
227   0000              	GLOBAL _atoll_callee
228   0000              	GLOBAL _atoll
229   0000              	GLOBAL _realloc_unlocked_callee
230   0000              	GLOBAL _realloc_unlocked
231   0000              	GLOBAL _malloc_unlocked_fastcall
232   0000              	GLOBAL _malloc_unlocked
233   0000              	GLOBAL _free_unlocked_fastcall
234   0000              	GLOBAL _free_unlocked
235   0000              	GLOBAL _calloc_unlocked_callee
236   0000              	GLOBAL _calloc_unlocked
237   0000              	GLOBAL _aligned_alloc_unlocked_callee
238   0000              	GLOBAL _aligned_alloc_unlocked
239   0000              	GLOBAL _realloc_callee
240   0000              	GLOBAL _realloc
241   0000              	GLOBAL _malloc_fastcall
242   0000              	GLOBAL _malloc
243   0000              	GLOBAL _free_fastcall
244   0000              	GLOBAL _free
245   0000              	GLOBAL _calloc_callee
246   0000              	GLOBAL _calloc
247   0000              	GLOBAL _aligned_alloc_callee
248   0000              	GLOBAL _aligned_alloc
249   0000              	GLOBAL _utoa_callee
250   0000              	GLOBAL _utoa
251   0000              	GLOBAL _ultoa_callee
252   0000              	GLOBAL _ultoa
253   0000              	GLOBAL _system_fastcall
254   0000              	GLOBAL _system
255   0000              	GLOBAL _strtoul_callee
256   0000              	GLOBAL _strtoul
257   0000              	GLOBAL _strtol_callee
258   0000              	GLOBAL _strtol
259   0000              	GLOBAL _strtof_callee
260   0000              	GLOBAL _strtof
261   0000              	GLOBAL _strtod_callee
262   0000              	GLOBAL _strtod
263   0000              	GLOBAL _srand_fastcall
264   0000              	GLOBAL _srand
265   0000              	GLOBAL _rand
266   0000              	GLOBAL _quick_exit_fastcall
267   0000              	GLOBAL _quick_exit
268   0000              	GLOBAL _qsort_callee
269   0000              	GLOBAL _qsort
270   0000              	GLOBAL _ltoa_callee
271   0000              	GLOBAL _ltoa
272   0000              	GLOBAL _labs_fastcall
273   0000              	GLOBAL _labs
274   0000              	GLOBAL _itoa_callee
275   0000              	GLOBAL _itoa
276   0000              	GLOBAL _ftoh_callee
277   0000              	GLOBAL _ftoh
278   0000              	GLOBAL _ftog_callee
279   0000              	GLOBAL _ftog
280   0000              	GLOBAL _ftoe_callee
281   0000              	GLOBAL _ftoe
282   0000              	GLOBAL _ftoa_callee
283   0000              	GLOBAL _ftoa
284   0000              	GLOBAL _exit_fastcall
285   0000              	GLOBAL _exit
286   0000              	GLOBAL _dtoh_callee
287   0000              	GLOBAL _dtoh
288   0000              	GLOBAL _dtog_callee
289   0000              	GLOBAL _dtog
290   0000              	GLOBAL _dtoe_callee
291   0000              	GLOBAL _dtoe
292   0000              	GLOBAL _dtoa_callee
293   0000              	GLOBAL _dtoa
294   0000              	GLOBAL _bsearch_callee
295   0000              	GLOBAL _bsearch
296   0000              	GLOBAL _atol_fastcall
297   0000              	GLOBAL _atol
298   0000              	GLOBAL _atoi_fastcall
299   0000              	GLOBAL _atoi
300   0000              	GLOBAL _atof_fastcall
301   0000              	GLOBAL _atof
302   0000              	GLOBAL _atexit_fastcall
303   0000              	GLOBAL _atexit
304   0000              	GLOBAL _at_quick_exit_fastcall
305   0000              	GLOBAL _at_quick_exit
306   0000              	GLOBAL _abs_fastcall
307   0000              	GLOBAL _abs
308   0000              	GLOBAL _abort
309   0000              	GLOBAL __strtou__callee
310   0000              	GLOBAL __strtou_
311   0000              	GLOBAL __strtoi__callee
312   0000              	GLOBAL __strtoi_
313   0000              	GLOBAL __random_uniform_xor_8__fastcall
314   0000              	GLOBAL __random_uniform_xor_8_
315   0000              	GLOBAL __random_uniform_xor_32__fastcall
316   0000              	GLOBAL __random_uniform_xor_32_
317   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
318   0000              	GLOBAL __random_uniform_cmwc_8_
319   0000              	GLOBAL __shellsort__callee
320   0000              	GLOBAL __shellsort_
321   0000              	GLOBAL __quicksort__callee
322   0000              	GLOBAL __quicksort_
323   0000              	GLOBAL __insertion_sort__callee
324   0000              	GLOBAL __insertion_sort_
325   0000              	GLOBAL __ldivu__callee
326   0000              	GLOBAL __ldivu_
327   0000              	GLOBAL __ldiv__callee
328   0000              	GLOBAL __ldiv_
329   0000              	GLOBAL __divu__callee
330   0000              	GLOBAL __divu_
331   0000              	GLOBAL __div__callee
332   0000              	GLOBAL __div_
333   0000              	GLOBAL _NIRVANAP_drawTW_raw_callee
334   0000              	GLOBAL _NIRVANAP_drawTW_raw
335   0000              	GLOBAL _NIRVANAP_drawTW_callee
336   0000              	GLOBAL _NIRVANAP_drawTW
337   0000              	GLOBAL _NIRVANAP_drawW_raw_callee
338   0000              	GLOBAL _NIRVANAP_drawW_raw
339   0000              	GLOBAL _NIRVANAP_drawW_callee
340   0000              	GLOBAL _NIRVANAP_drawW
341   0000              	GLOBAL _NIRVANAP_spriteT_callee
342   0000              	GLOBAL _NIRVANAP_spriteT
343   0000              	GLOBAL _NIRVANAP_fillC_callee
344   0000              	GLOBAL _NIRVANAP_fillC
345   0000              	GLOBAL _NIRVANAP_readC_callee
346   0000              	GLOBAL _NIRVANAP_readC
347   0000              	GLOBAL _NIRVANAP_paintC_callee
348   0000              	GLOBAL _NIRVANAP_paintC
349   0000              	GLOBAL _NIRVANAP_printC_callee
350   0000              	GLOBAL _NIRVANAP_printC
351   0000              	GLOBAL _NIRVANAP_fillT_raw_callee
352   0000              	GLOBAL _NIRVANAP_fillT_raw
353   0000              	GLOBAL _NIRVANAP_fillT_callee
354   0000              	GLOBAL _NIRVANAP_fillT
355   0000              	GLOBAL _NIRVANAP_drawT_raw_callee
356   0000              	GLOBAL _NIRVANAP_drawT_raw
357   0000              	GLOBAL _NIRVANAP_drawT_callee
358   0000              	GLOBAL _NIRVANAP_drawT
359   0000              	GLOBAL _NIRVANAP_stop
360   0000              	GLOBAL _NIRVANAP_start
361   0000              	GLOBAL _debug3
362   0000              	GLOBAL _debug2
363   0000              	GLOBAL _debug
364   0000              	GLOBAL _zx_print_str
365   0000              	GLOBAL _zx_print_int
366   0000              	GLOBAL _zx_print_chr
367   0000              	GLOBAL _zx_print_bonus_time
368   0000              	GLOBAL _zx_isr
369   0000              	GLOBAL _z80_otdr_callee
370   0000              	GLOBAL _z80_otdr
371   0000              	GLOBAL _z80_otir_callee
372   0000              	GLOBAL _z80_otir
373   0000              	GLOBAL _z80_outp_callee
374   0000              	GLOBAL _z80_outp
375   0000              	GLOBAL _z80_indr_callee
376   0000              	GLOBAL _z80_indr
377   0000              	GLOBAL _z80_inir_callee
378   0000              	GLOBAL _z80_inir
379   0000              	GLOBAL _z80_inp_fastcall
380   0000              	GLOBAL _z80_inp
381   0000              	GLOBAL _z80_set_int_state_fastcall
382   0000              	GLOBAL _z80_set_int_state
383   0000              	GLOBAL _z80_get_int_state
384   0000              	GLOBAL _z80_delay_tstate_fastcall
385   0000              	GLOBAL _z80_delay_tstate
386   0000              	GLOBAL _z80_delay_ms_fastcall
387   0000              	GLOBAL _z80_delay_ms
388   0000              	GLOBAL _im2_remove_generic_callback_callee
389   0000              	GLOBAL _im2_remove_generic_callback
390   0000              	GLOBAL _im2_prepend_generic_callback_callee
391   0000              	GLOBAL _im2_prepend_generic_callback
392   0000              	GLOBAL _im2_append_generic_callback_callee
393   0000              	GLOBAL _im2_append_generic_callback
394   0000              	GLOBAL _im2_create_generic_isr_8080_callee
395   0000              	GLOBAL _im2_create_generic_isr_8080
396   0000              	GLOBAL _im2_create_generic_isr_callee
397   0000              	GLOBAL _im2_create_generic_isr
398   0000              	GLOBAL _im2_install_isr_callee
399   0000              	GLOBAL _im2_install_isr
400   0000              	GLOBAL _im2_init_fastcall
401   0000              	GLOBAL _im2_init
402   0000              	GLOBAL _intrinsic_swap_word_32_fastcall
403   0000              	GLOBAL _intrinsic_swap_word_32
404   0000              	GLOBAL _intrinsic_swap_endian_32_fastcall
405   0000              	GLOBAL _intrinsic_swap_endian_32
406   0000              	GLOBAL _intrinsic_swap_endian_16_fastcall
407   0000              	GLOBAL _intrinsic_swap_endian_16
408   0000              	GLOBAL _intrinsic_return_de
409   0000              	GLOBAL _intrinsic_return_bc
410   0000              	GLOBAL _intrinsic_exx
411   0000              	GLOBAL _intrinsic_ex_de_hl
412   0000              	GLOBAL _intrinsic_nop
413   0000              	GLOBAL _intrinsic_im_2
414   0000              	GLOBAL _intrinsic_im_1
415   0000              	GLOBAL _intrinsic_im_0
416   0000              	GLOBAL _intrinsic_retn
417   0000              	GLOBAL _intrinsic_reti
418   0000              	GLOBAL _intrinsic_halt
419   0000              	GLOBAL _intrinsic_ei
420   0000              	GLOBAL _intrinsic_di
421   0000              	GLOBAL _intrinsic_stub
422   0000              	GLOBAL _intrinsic_outi
423   0000              	GLOBAL _intrinsic_ldi
424   0000              	GLOBAL _zx_pattern_fill_callee
425   0000              	GLOBAL _zx_pattern_fill
426   0000              	GLOBAL _zx_saddrpup_fastcall
427   0000              	GLOBAL _zx_saddrpup
428   0000              	GLOBAL _zx_saddrpright_callee
429   0000              	GLOBAL _zx_saddrpright
430   0000              	GLOBAL _zx_saddrpleft_callee
431   0000              	GLOBAL _zx_saddrpleft
432   0000              	GLOBAL _zx_saddrpdown_fastcall
433   0000              	GLOBAL _zx_saddrpdown
434   0000              	GLOBAL _zx_saddrcup_fastcall
435   0000              	GLOBAL _zx_saddrcup
436   0000              	GLOBAL _zx_saddrcright_fastcall
437   0000              	GLOBAL _zx_saddrcright
438   0000              	GLOBAL _zx_saddrcleft_fastcall
439   0000              	GLOBAL _zx_saddrcleft
440   0000              	GLOBAL _zx_saddrcdown_fastcall
441   0000              	GLOBAL _zx_saddrcdown
442   0000              	GLOBAL _zx_saddr2py_fastcall
443   0000              	GLOBAL _zx_saddr2py
444   0000              	GLOBAL _zx_saddr2px_fastcall
445   0000              	GLOBAL _zx_saddr2px
446   0000              	GLOBAL _zx_saddr2cy_fastcall
447   0000              	GLOBAL _zx_saddr2cy
448   0000              	GLOBAL _zx_saddr2cx_fastcall
449   0000              	GLOBAL _zx_saddr2cx
450   0000              	GLOBAL _zx_saddr2aaddr_fastcall
451   0000              	GLOBAL _zx_saddr2aaddr
452   0000              	GLOBAL _zx_py2saddr_fastcall
453   0000              	GLOBAL _zx_py2saddr
454   0000              	GLOBAL _zx_py2aaddr_fastcall
455   0000              	GLOBAL _zx_py2aaddr
456   0000              	GLOBAL _zx_pxy2saddr_callee
457   0000              	GLOBAL _zx_pxy2saddr
458   0000              	GLOBAL _zx_pxy2aaddr_callee
459   0000              	GLOBAL _zx_pxy2aaddr
460   0000              	GLOBAL _zx_px2bitmask_fastcall
461   0000              	GLOBAL _zx_px2bitmask
462   0000              	GLOBAL _zx_cy2saddr_fastcall
463   0000              	GLOBAL _zx_cy2saddr
464   0000              	GLOBAL _zx_cy2aaddr_fastcall
465   0000              	GLOBAL _zx_cy2aaddr
466   0000              	GLOBAL _zx_cxy2saddr_callee
467   0000              	GLOBAL _zx_cxy2saddr
468   0000              	GLOBAL _zx_cxy2aaddr_callee
469   0000              	GLOBAL _zx_cxy2aaddr
470   0000              	GLOBAL _zx_bitmask2px_fastcall
471   0000              	GLOBAL _zx_bitmask2px
472   0000              	GLOBAL _zx_aaddrcup_fastcall
473   0000              	GLOBAL _zx_aaddrcup
474   0000              	GLOBAL _zx_aaddrcright_fastcall
475   0000              	GLOBAL _zx_aaddrcright
476   0000              	GLOBAL _zx_aaddrcleft_fastcall
477   0000              	GLOBAL _zx_aaddrcleft
478   0000              	GLOBAL _zx_aaddrcdown_fastcall
479   0000              	GLOBAL _zx_aaddrcdown
480   0000              	GLOBAL _zx_aaddr2saddr_fastcall
481   0000              	GLOBAL _zx_aaddr2saddr
482   0000              	GLOBAL _zx_aaddr2py_fastcall
483   0000              	GLOBAL _zx_aaddr2py
484   0000              	GLOBAL _zx_aaddr2px_fastcall
485   0000              	GLOBAL _zx_aaddr2px
486   0000              	GLOBAL _zx_aaddr2cy_fastcall
487   0000              	GLOBAL _zx_aaddr2cy
488   0000              	GLOBAL _zx_aaddr2cx_fastcall
489   0000              	GLOBAL _zx_aaddr2cx
490   0000              	GLOBAL _zx_visit_wc_pix_callee
491   0000              	GLOBAL _zx_visit_wc_pix
492   0000              	GLOBAL _zx_visit_wc_attr_callee
493   0000              	GLOBAL _zx_visit_wc_attr
494   0000              	GLOBAL _zx_scroll_wc_up_pix_callee
495   0000              	GLOBAL _zx_scroll_wc_up_pix
496   0000              	GLOBAL _zx_scroll_wc_up_attr_callee
497   0000              	GLOBAL _zx_scroll_wc_up_attr
498   0000              	GLOBAL _zx_scroll_wc_up_callee
499   0000              	GLOBAL _zx_scroll_wc_up
500   0000              	GLOBAL _zx_scroll_up_pix_callee
501   0000              	GLOBAL _zx_scroll_up_pix
502   0000              	GLOBAL _zx_scroll_up_attr_callee
503   0000              	GLOBAL _zx_scroll_up_attr
504   0000              	GLOBAL _zx_scroll_up_callee
505   0000              	GLOBAL _zx_scroll_up
506   0000              	GLOBAL _zx_cls_wc_pix_callee
507   0000              	GLOBAL _zx_cls_wc_pix
508   0000              	GLOBAL _zx_cls_wc_attr_callee
509   0000              	GLOBAL _zx_cls_wc_attr
510   0000              	GLOBAL _zx_cls_wc_callee
511   0000              	GLOBAL _zx_cls_wc
512   0000              	GLOBAL _zx_cls_pix_fastcall
513   0000              	GLOBAL _zx_cls_pix
514   0000              	GLOBAL _zx_cls_attr_fastcall
515   0000              	GLOBAL _zx_cls_attr
516   0000              	GLOBAL _zx_cls_fastcall
517   0000              	GLOBAL _zx_cls
518   0000              	GLOBAL _zx_border_fastcall
519   0000              	GLOBAL _zx_border
520   0000              	GLOBAL _spr_btile_paint_back
521   0000              	GLOBAL _spr_explode_bullet
522   0000              	GLOBAL _spr_init_anim_bullets
523   0000              	GLOBAL _spr_turn_horizontal
524   0000              	GLOBAL _spr_play_bullets
525   0000              	GLOBAL _spr_play_anim
526   0000              	GLOBAL _spr_add_anim
527   0000              	GLOBAL _spr_page_map
528   0000              	GLOBAL _spr_page_right
529   0000              	GLOBAL _spr_page_left
530   0000              	GLOBAL _spr_tile_paint
531   0000              	GLOBAL _spr_calc_hor
532   0000              	GLOBAL _spr_draw_row
533   0000              	GLOBAL _spr_draw_index
534   0000              	GLOBAL _spr_draw_clear
535   0000              	GLOBAL _spr_brick_anim
536   0000              	GLOBAL _spr_back_repaint
537   0000              	GLOBAL _spr_tile
538   0000              	GLOBAL _spr_destroy
539   0000              	GLOBAL _spr_tile_dir
540   0000              	GLOBAL _spr_redraw
541   0000              	GLOBAL _spr_move_left
542   0000              	GLOBAL _spr_move_right
543   0000              	GLOBAL _spr_move_horizontal
544   0000              	GLOBAL _spr_move_down
545   0000              	GLOBAL _spr_move_up
546   0000              	GLOBAL _spr_calc_index
547   0000              	GLOBAL _spr_chktime
548   0000              	GLOBAL _sound_hit_brick
549   0000              	GLOBAL _sound_hit_enemy
550   0000              	GLOBAL _sound_kill
551   0000              	GLOBAL _sound_enter_enemy
552   0000              	GLOBAL _sound_coin
553   0000              	GLOBAL _sound_jump
554   0000              	GLOBAL _sound_slide
555   0000              	GLOBAL _player_player_hit_pow
556   0000              	GLOBAL _game_obj_clear
557   0000              	GLOBAL _game_obj_chk
558   0000              	GLOBAL _game_obj_set
559   0000              	GLOBAL _game_shoot_fire
560   0000              	GLOBAL _game_add_enemy
561   0000              	GLOBAL _game_joystick_set_menu
562   0000              	GLOBAL _game_joystick_set
563   0000              	GLOBAL _game_joystick_change
564   0000              	GLOBAL _game_print_header
565   0000              	GLOBAL _game_end
566   0000              	GLOBAL _game_phase_print_score_back
567   0000              	GLOBAL _game_check_time
568   0000              	GLOBAL _game_rotate_attrib
569   0000              	GLOBAL _game_colour_message
570   0000              	GLOBAL _game_paint_attrib_lin_h
571   0000              	GLOBAL _game_paint_attrib_lin
572   0000              	GLOBAL _game_paint_attrib
573   0000              	GLOBAL _game_print_score
574   0000              	GLOBAL _game_unfreeze_all
575   0000              	GLOBAL _game_freeze_all
576   0000              	GLOBAL _game_freeze
577   0000              	GLOBAL _game_enemy_add_get_index
578   0000              	GLOBAL _game_check_cell
579   0000              	GLOBAL _game_check_map
580   0000              	GLOBAL _game_loop
581   0000              	GLOBAL _game_round_init
582   0000              	GLOBAL _game_start_timer
583   0000              	GLOBAL _game_tick
584   0000              	GLOBAL _game_update_stats
585   0000              	GLOBAL _game_print_footer
586   0000              	GLOBAL _game_fill_row
587   0000              	GLOBAL _game_draw_screen
588   0000              	GLOBAL _enemy_avoid_fall_dead
589   0000              	GLOBAL _enemy_avoid_fall
590   0000              	GLOBAL _enemy_respawn
591   0000              	GLOBAL _enemy_init
592   0000              	GLOBAL _enemy_move
593   0000              	GLOBAL _enemy_turn
594   0000              	GLOBAL _enemy_hit
595   0000              	GLOBAL _enemy_coin1
596   0000              	GLOBAL _enemy_static
597   0000              	GLOBAL _enemy_walk
598   0000              	GLOBAL _enemy_horizontal
599   0000              	GLOBAL _enemy_vertical
600   0000              	GLOBAL _ay_fx_play
601   0000              	GLOBAL _ay_midi_play
602   0000              	GLOBAL _ay_is_playing
603   0000              	GLOBAL _ay_reset
604   0000              	GLOBAL _test_func
605   0000              	GLOBAL _test_proc
606   0000              	GLOBAL _in_mouse_kempston_wheel_delta
607   0000              	GLOBAL _in_mouse_kempston_wheel
608   0000              	GLOBAL _in_mouse_kempston_callee
609   0000              	GLOBAL _in_mouse_kempston
610   0000              	GLOBAL _in_mouse_kempston_setpos_callee
611   0000              	GLOBAL _in_mouse_kempston_setpos
612   0000              	GLOBAL _in_mouse_kempston_reset
613   0000              	GLOBAL _in_mouse_kempston_init
614   0000              	GLOBAL _in_mouse_amx_wheel_delta
615   0000              	GLOBAL _in_mouse_amx_wheel
616   0000              	GLOBAL _in_mouse_amx_callee
617   0000              	GLOBAL _in_mouse_amx
618   0000              	GLOBAL _in_mouse_amx_setpos_callee
619   0000              	GLOBAL _in_mouse_amx_setpos
620   0000              	GLOBAL _in_mouse_amx_reset
621   0000              	GLOBAL _in_mouse_amx_init_callee
622   0000              	GLOBAL _in_mouse_amx_init
623   0000              	GLOBAL _in_stick_sinclair2
624   0000              	GLOBAL _in_stick_sinclair1
625   0000              	GLOBAL _in_stick_kempston
626   0000              	GLOBAL _in_stick_fuller
627   0000              	GLOBAL _in_stick_cursor
628   0000              	GLOBAL _in_stick_keyboard_fastcall
629   0000              	GLOBAL _in_stick_keyboard
630   0000              	GLOBAL _in_wait_nokey
631   0000              	GLOBAL _in_wait_key
632   0000              	GLOBAL _in_test_key
633   0000              	GLOBAL _in_pause_fastcall
634   0000              	GLOBAL _in_pause
635   0000              	GLOBAL _in_key_scancode_fastcall
636   0000              	GLOBAL _in_key_scancode
637   0000              	GLOBAL _in_key_pressed_fastcall
638   0000              	GLOBAL _in_key_pressed
639   0000              	GLOBAL _in_inkey
640   0000              	GLOBAL _NIRVANAP_CHAR_TABLE
641   0000              	GLOBAL _NIRVANAP_WIDE_IMAGES
642   0000              	GLOBAL _NIRVANAP_TILE_IMAGES
643   0000              	GLOBAL _NIRVANAP_HOLE
644   0000              	GLOBAL _NIRVANAP_ISR_HOOK
645   0000              	GLOBAL _player_lvl_table
646   0000              	GLOBAL _map_paper_last
647   0000              	GLOBAL _map_paper_clr
648   0000              	GLOBAL _map_paper
649   0000              	GLOBAL _draw_count
650   0000              	GLOBAL _g_player_hit_right
651   0000              	GLOBAL _g_player_hit_left
652   0000              	GLOBAL _joynames
653   0000              	GLOBAL _initials
654   0000              	GLOBAL _bullet_count
655   0000              	GLOBAL _bullet_vel
656   0000              	GLOBAL _bullet_frames
657   0000              	GLOBAL _bullet_colint
658   0000              	GLOBAL _bullet_dir
659   0000              	GLOBAL _bullet_tile
660   0000              	GLOBAL _bullet_col
661   0000              	GLOBAL _bullet_lin
662   0000              	GLOBAL _bullet_col0
663   0000              	GLOBAL _bullet_lin0
664   0000              	GLOBAL _bullet_max
665   0000              	GLOBAL _bullet_class
666   0000              	GLOBAL _mush_class
667   0000              	GLOBAL _mush_index
668   0000              	GLOBAL _anim_count
669   0000              	GLOBAL _anim_respanwn
670   0000              	GLOBAL _anim_loop
671   0000              	GLOBAL _anim_end
672   0000              	GLOBAL _anim_int
673   0000              	GLOBAL _anim_tile
674   0000              	GLOBAL _anim_col
675   0000              	GLOBAL _anim_lin
676   0000              	GLOBAL _phase_curr
677   0000              	GLOBAL _map_heigth
678   0000              	GLOBAL _map_width
679   0000              	GLOBAL _scr_curr
680   0000              	GLOBAL _scr_obj1
681   0000              	GLOBAL _scr_obj0
682   0000              	GLOBAL _scr_map
683   0000              	GLOBAL _sprite_speed_alt
684   0000              	GLOBAL _sprite_frames
685   0000              	GLOBAL _sprite_speed
686   0000              	GLOBAL _screen_ink
687   0000              	GLOBAL _screen_paper
688   0000              	GLOBAL _player_over_stair
689   0000              	GLOBAL _game_start_scr
690   0000              	GLOBAL _game_respawn_tile
691   0000              	GLOBAL _game_respawn_index
692   0000              	GLOBAL _game_respawn_time
693   0000              	GLOBAL _game_menu_sel
694   0000              	GLOBAL _game_score_top
695   0000              	GLOBAL _player_lives
696   0000              	GLOBAL _game_over
697   0000              	GLOBAL _game_sound
698   0000              	GLOBAL _game_inmune
699   0000              	GLOBAL _game_god_mode
700   0000              	GLOBAL _game_two_player
701   0000              	GLOBAL _game_brick_tile
702   0000              	GLOBAL _sprite_curr_index
703   0000              	GLOBAL _spr_count
704   0000              	GLOBAL _bullet_time
705   0000              	GLOBAL _anim_time
706   0000              	GLOBAL _frame_time
707   0000              	GLOBAL _entry_time
708   0000              	GLOBAL _curr_time
709   0000              	GLOBAL _s_state
710   0000              	GLOBAL _attrib_hl
711   0000              	GLOBAL _attrib
712   0000              	GLOBAL _zx_val_asm
713   0000              	GLOBAL _enemies
714   0000              	GLOBAL _tmp_ui
715   0000              	GLOBAL _tmp_sc
716   0000              	GLOBAL _tmp_uc
717   0000              	GLOBAL _tmp1
718   0000              	GLOBAL _tmp0
719   0000              	GLOBAL _tmp
720   0000              	GLOBAL _index1
721   0000              	GLOBAL _index0
722   0000              	GLOBAL _loop_count
723   0000              	GLOBAL _s_col1
724   0000              	GLOBAL _s_col0
725   0000              	GLOBAL _s_lin1
726   0000              	GLOBAL _s_lin0
727   0000              	GLOBAL _s_tile1
728   0000              	GLOBAL _s_tile0
729   0000              	GLOBAL _player_hit_count
730   0000              	GLOBAL _sprite_horizontal_check
731   0000              	GLOBAL _sprite_on_air
732   0000              	GLOBAL _sprite
733   0000              	GLOBAL _game_gravity
734   0000              	GLOBAL _player_hit_time
735   0000              	GLOBAL _player_lin_scr
736   0000              	GLOBAL _player_col_scr
737   0000              	GLOBAL _player_lvl
738   0000              	GLOBAL _player_int
739   0000              	GLOBAL _player_str
740   0000              	GLOBAL _player_max_vita
741   0000              	GLOBAL _player_max_mana
742   0000              	GLOBAL _player_vita
743   0000              	GLOBAL _player_mana
744   0000              	GLOBAL _player_keys
745   0000              	GLOBAL _player_vel_inc
746   0000              	GLOBAL _player_vel_y1
747   0000              	GLOBAL _player_vel_y0
748   0000              	GLOBAL _player_vel_y
749   0000              	GLOBAL _player_vel_x
750   0000              	GLOBAL _player_joy
751   0000              	GLOBAL _player_score
752   0000              	GLOBAL _last_time
753   0000              	GLOBAL _player_slide
754   0000              	GLOBAL _spr_timer
755   0000              	GLOBAL _jump_lin
756   0000              	GLOBAL _player_hit_col
757   0000              	GLOBAL _player_hit_lin
758   0000              	GLOBAL _colint
759   0000              	GLOBAL _col
760   0000              	GLOBAL _lin
761   0000              	GLOBAL _tile
762   0000              	GLOBAL _state_a
763   0000              	GLOBAL _state
764   0000              	GLOBAL _class
765   0000              	GLOBAL _tbuffer
766   0000              	GLOBAL _dirs
767   0000              	GLOBAL _k1
768   0000              	GLOBAL _joyfunc1
769   0000              	GLOBAL _btiles
770   0000              	GLOBAL _spec128
771   0000              	GLOBAL _GLOBAL_ZX_PORT_7FFD
772   0000              	GLOBAL _GLOBAL_ZX_PORT_1FFD
773   0000              	GLOBAL _GLOBAL_ZX_PORT_FE
774   0000              	GLOBAL _ay_effect_20
775   0000              	GLOBAL _ay_effect_19
776   0000              	GLOBAL _ay_effect_18
777   0000              	GLOBAL _ay_effect_17
778   0000              	GLOBAL _ay_effect_16
779   0000              	GLOBAL _ay_effect_15
780   0000              	GLOBAL _ay_effect_14
781   0000              	GLOBAL _ay_effect_13
782   0000              	GLOBAL _ay_effect_12
783   0000              	GLOBAL _ay_effect_11
784   0000              	GLOBAL _ay_effect_10
785   0000              	GLOBAL _ay_effect_09
786   0000              	GLOBAL _ay_effect_08
787   0000              	GLOBAL _ay_effect_07
788   0000              	GLOBAL _ay_effect_06
789   0000              	GLOBAL _ay_effect_05
790   0000              	GLOBAL _ay_effect_04
791   0000              	GLOBAL _ay_effect_03
792   0000              	GLOBAL _ay_effect_02
793   0000              	GLOBAL _ay_effect_01
794   0000              	GLOBAL _pb_midi_phase_1
795   0000              	GLOBAL _pb_midi_title
796   0000              	GLOBAL _control_method
797   0000              	GLOBAL _world0
798   0000              	GLOBAL _lenght0
799   0000              	GLOBAL _start_scr0
800   0000              ;--------------------------------------------------------
801   0000              ; special function registers
802   0000              ;--------------------------------------------------------
803   0000              defc _IO_FE	=	0x00fe
804   0000              defc _IO_1FFD	=	0x1ffd
805   0000              defc _IO_7FFD	=	0x7ffd
806   0000              ;--------------------------------------------------------
807   0000              ; ram data
808   0000              ;--------------------------------------------------------
809   0000              	SECTION bss_compiler
810   0000              ;--------------------------------------------------------
811   0000              ; ram data
812   0000              ;--------------------------------------------------------
813   0000              
814   0000              IF 0
815   0000              
816   0000              ; .area _INITIALIZED removed by z88dk
817   0000              
818   0000              
819   0000              ENDIF
820   0000              
821   0000              ;--------------------------------------------------------
822   0000              ; absolute external ram data
823   0000              ;--------------------------------------------------------
824   0000              	SECTION IGNORE
825   0000              ;--------------------------------------------------------
826   0000              ; global & static initialisations
827   0000              ;--------------------------------------------------------
828   0000              	SECTION code_crt_init
829   0000              ;--------------------------------------------------------
830   0000              ; Home
831   0000              ;--------------------------------------------------------
832   0000              	SECTION IGNORE
833   0000              ;--------------------------------------------------------
834   0000              ; code
835   0000              ;--------------------------------------------------------
836   0000              	SECTION code_compiler
837   0000              ;	---------------------------------
838   0000              ; Function player_init
839   0000              ; ---------------------------------
840   0000              _player_init:
841   0000  CD 00 00    	call	___sdcc_enter_ix
842   0003  F5          	push	af
843   0004  3E 00       	ld	a, +((_class) & 0xFF)
844   0006  DD 86 04    	add	a,(ix+4)
845   0009  4F          	ld	c, a
846   000A  3E 00       	ld	a, +((_class) / 256)
847   000C  CE 00       	adc	a,0x00
848   000E  47          	ld	b, a
849   000F  AF          	xor	a, a
850   0010  02          	ld	(bc), a
851   0011  3E 00       	ld	a, +((_tile) & 0xFF)
852   0013  DD 86 04    	add	a,(ix+4)
853   0016  4F          	ld	c, a
854   0017  3E 00       	ld	a, +((_tile) / 256)
855   0019  CE 00       	adc	a,0x00
856   001B  47          	ld	b, a
857   001C  DD 7E 07    	ld	a,(ix+7)
858   001F  02          	ld	(bc), a
859   0020  3E 00       	ld	a, +((_lin) & 0xFF)
860   0022  DD 86 04    	add	a,(ix+4)
861   0025  4F          	ld	c, a
862   0026  3E 00       	ld	a, +((_lin) / 256)
863   0028  CE 00       	adc	a,0x00
864   002A  47          	ld	b, a
865   002B  DD 7E 05    	ld	a,(ix+5)
866   002E  02          	ld	(bc), a
867   002F  3E 00       	ld	a, +((_col) & 0xFF)
868   0031  DD 86 04    	add	a,(ix+4)
869   0034  4F          	ld	c, a
870   0035  3E 00       	ld	a, +((_col) / 256)
871   0037  CE 00       	adc	a,0x00
872   0039  47          	ld	b, a
873   003A  DD 7E 06    	ld	a,(ix+6)
874   003D  02          	ld	(bc), a
875   003E  3E 00       	ld	a, +((_colint) & 0xFF)
876   0040  DD 86 04    	add	a,(ix+4)
877   0043  4F          	ld	c, a
878   0044  3E 00       	ld	a, +((_colint) / 256)
879   0046  CE 00       	adc	a,0x00
880   0048  47          	ld	b, a
881   0049  AF          	xor	a, a
882   004A  02          	ld	(bc), a
883   004B  3E 00       	ld	a, +((_state) & 0xFF)
884   004D  DD 86 04    	add	a,(ix+4)
885   0050  4F          	ld	c, a
886   0051  3E 00       	ld	a, +((_state) / 256)
887   0053  CE 00       	adc	a,0x00
888   0055  47          	ld	b, a
889   0056  AF          	xor	a, a
890   0057  02          	ld	(bc), a
891   0058  3E 00       	ld	a, +((_state_a) & 0xFF)
892   005A  DD 86 04    	add	a,(ix+4)
893   005D  4F          	ld	c, a
894   005E  3E 00       	ld	a, +((_state_a) / 256)
895   0060  CE 00       	adc	a,0x00
896   0062  47          	ld	b, a
897   0063  AF          	xor	a, a
898   0064  02          	ld	(bc), a
899   0065  3E 00       	ld	a, +((_jump_lin) & 0xFF)
900   0067  DD 86 04    	add	a,(ix+4)
901   006A  5F          	ld	e, a
902   006B  3E 00       	ld	a, +((_jump_lin) / 256)
903   006D  CE 00       	adc	a,0x00
904   006F  57          	ld	d, a
905   0070  DD 7E 05    	ld	a,(ix+5)
906   0073  12          	ld	(de), a
907   0074  DD 6E 04    	ld	l,(ix+4)
908   0077  26 00       	ld	h,0x00
909   0079  29          	add	hl,hl
910   007A  11 00 00    	ld	de,_last_time
911   007D  19          	add	hl, de
912   007E  E3          	ex	(sp), hl
913   007F  E1          	pop	hl
914   0080  ED 5B 00 00 	ld	de,(_curr_time)
915   0084  E5          	push	hl
916   0085  73          	ld	(hl), e
917   0086  23          	inc	hl
918   0087  72          	ld	(hl), d
919   0088  3E 00       	ld	a, +((_sprite_speed_alt) & 0xFF)
920   008A  DD 86 04    	add	a,(ix+4)
921   008D  5F          	ld	e, a
922   008E  3E 00       	ld	a, +((_sprite_speed_alt) / 256)
923   0090  CE 00       	adc	a,0x00
924   0092  57          	ld	d, a
925   0093  AF          	xor	a, a
926   0094  12          	ld	(de), a
927   0095  0A          	ld	a, (bc)
928   0096  F6 11       	or	a,+(0x01|0x10)
929   0098  02          	ld	(bc),a
930   0099  21 00 00    	ld	hl,_player_hit_col
931   009C  36 00       	ld	(hl),0x00
932   009E  21 00 00    	ld	hl,_player_hit_lin
933   00A1  36 00       	ld	(hl),0x00
934   00A3  21 00 00    	ld	hl,_player_slide
935   00A6  36 00       	ld	(hl),0x00
936   00A8  DD 66 06    	ld	h,(ix+6)
937   00AB  DD 6E 05    	ld	l,(ix+5)
938   00AE  E5          	push	hl
939   00AF  DD 66 07    	ld	h,(ix+7)
940   00B2  DD 6E 04    	ld	l,(ix+4)
941   00B5  E5          	push	hl
942   00B6  CD 00 00    	call	_NIRVANAP_spriteT_callee
943   00B9  F1          	pop	af
944   00BA  DD E1       	pop	ix
945   00BC  C9          	ret
946   00BD              	SECTION code_compiler
947   00BD              ;	---------------------------------
948   00BD              ; Function player_check_input
949   00BD              ; ---------------------------------
950   00BD              _player_check_input:
951   00BD  21 00 00    	ld	hl,_dirs
952   00C0  CB 56       	bit	2, (hl)
953   00C2  28 0C       	jr	Z,l_player_check_input_00102
954   00C4  21 00 00    	ld	hl,_dirs
955   00C7  CB 5E       	bit	3, (hl)
956   00C9  28 05       	jr	Z,l_player_check_input_00102
957   00CB  21 00 00    	ld	hl,_dirs
958   00CE  36 00       	ld	(hl),0x00
959   00D0              l_player_check_input_00102:
960   00D0  21 00 00    	ld	hl,_dirs
961   00D3  7E          	ld	a, (hl)
962   00D4  CB 07       	rlc	a
963   00D6  E6 01       	and	a,0x01
964   00D8  CB 47       	bit	0, a
965   00DA  20 1D       	jr	NZ,l_player_check_input_00107
966   00DC  CB 56       	bit	2, (hl)
967   00DE  20 19       	jr	NZ,l_player_check_input_00107
968   00E0  21 00 00    	ld	hl,_dirs
969   00E3  CB 5E       	bit	3, (hl)
970   00E5  20 12       	jr	NZ,l_player_check_input_00107
971   00E7  21 00 00    	ld	hl,_dirs
972   00EA  CB 46       	bit	0, (hl)
973   00EC  20 0B       	jr	NZ,l_player_check_input_00107
974   00EE  21 00 00    	ld	hl,_dirs
975   00F1  CB 4E       	bit	1, (hl)
976   00F3  20 04       	jr	NZ,l_player_check_input_00107
977   00F5  2E 00       	ld	l,0x00
978   00F7  18 02       	jr	l_player_check_input_00108
979   00F9              l_player_check_input_00107:
980   00F9  2E 01       	ld	l,0x01
981   00FB              l_player_check_input_00108:
982   00FB  C9          	ret
983   00FC              	SECTION code_compiler
984   00FC              ;	---------------------------------
985   00FC              ; Function player_collision
986   00FC              ; ---------------------------------
987   00FC              _player_collision:
988   00FC  21 19 00    	ld	hl,0x0019
989   00FF  E5          	push	hl
990   0100  2A 00 00    	ld	hl,(_player_hit_time)
991   0103  E5          	push	hl
992   0104  CD 00 00    	call	_game_check_time
993   0107  F1          	pop	af
994   0108  F1          	pop	af
995   0109  7D          	ld	a, l
996   010A  B7          	or	a, a
997   010B  CA 42 02    	jp	Z, l_player_collision_00124
998   010E  21 00 00    	ld	hl,_sprite
999   0111  36 00       	ld	(hl),0x00
1000  0113  3A 07 00    	ld	a,(_col + 7)
1001  0116  32 00 00    	ld	(_s_col1),a
1002  0119  3A 07 00    	ld	a,(_lin + 7)
1003  011C  32 00 00    	ld	(_s_lin1),a
1004  011F  C6 08       	add	a,0x08
1005  0121  4F          	ld	c, a
1006  0122  3A 00 00    	ld	a, (_s_col1)
1007  0125  47          	ld	b,a
1008  0126  C5          	push	bc
1009  0127  CD 00 00    	call	_spr_calc_index
1010  012A  F1          	pop	af
1011  012B  7D          	ld	a,l
1012  012C  32 00 00    	ld	(_sprite_curr_index),a
1013  012F  4F          	ld	c,a
1014  0130  06 00       	ld	b,0x00
1015  0132  21 00 00    	ld	hl,_scr_map
1016  0135  09          	add	hl,bc
1017  0136  4E          	ld	c, (hl)
1018  0137  3E 2F       	ld	a,0x2f
1019  0139  91          	sub	a, c
1020  013A  30 0F       	jr	NC,l_player_collision_00120
1021  013C  79          	ld	a, c
1022  013D  D6 3C       	sub	a,0x3c
1023  013F  30 0A       	jr	NC,l_player_collision_00120
1024  0141  2E 06       	ld	l,0x06
1025  0143  CD 00 00    	call	_zx_border_fastcall
1026  0146  2E 32       	ld	l,0x32
1027  0148  CD 1B 11    	call	_player_hit
1028  014B              l_player_collision_00120:
1029  014B  21 00 00    	ld	hl,_sprite
1030  014E  7E          	ld	a, (hl)
1031  014F  D6 07       	sub	a,0x07
1032  0151  D2 42 02    	jp	NC, l_player_collision_00124
1033  0154  3E 00       	ld	a, +((_class) & 0xFF)
1034  0156  86          	add	a, (hl)
1035  0157  4F          	ld	c, a
1036  0158  3E 00       	ld	a, +((_class) / 256)
1037  015A  CE 00       	adc	a,0x00
1038  015C  47          	ld	b, a
1039  015D  0A          	ld	a, (bc)
1040  015E  B7          	or	a, a
1041  015F  CA 3B 02    	jp	Z, l_player_collision_00119
1042  0162  4E          	ld	c,(hl)
1043  0163  06 00       	ld	b,0x00
1044  0165  21 00 00    	ld	hl,_col
1045  0168  09          	add	hl,bc
1046  0169  4E          	ld	c, (hl)
1047  016A  06 00       	ld	b,0x00
1048  016C  3A 00 00    	ld	a,(_s_col1)
1049  016F  5F          	ld	e,a
1050  0170  16 00       	ld	d,0x00
1051  0172  79          	ld	a, c
1052  0173  93          	sub	a, e
1053  0174  6F          	ld	l, a
1054  0175  78          	ld	a, b
1055  0176  9A          	sbc	a, d
1056  0177  67          	ld	h, a
1057  0178  CD 00 00    	call	_abs_fastcall
1058  017B  7D          	ld	a,l
1059  017C  D6 02       	sub	a,0x02
1060  017E  7C          	ld	a,h
1061  017F  17          	rla
1062  0180  3F          	ccf
1063  0181  1F          	rra
1064  0182  DE 80       	sbc	a,0x80
1065  0184  D2 3B 02    	jp	NC, l_player_collision_00119
1066  0187  2A 00 00    	ld	hl,(_sprite)
1067  018A  26 00       	ld	h,0x00
1068  018C  01 00 00    	ld	bc,_lin
1069  018F  09          	add	hl,bc
1070  0190  4E          	ld	c,(hl)
1071  0191  06 00       	ld	b,0x00
1072  0193  3A 00 00    	ld	a,(_s_lin1)
1073  0196  5F          	ld	e,a
1074  0197  16 00       	ld	d,0x00
1075  0199  79          	ld	a, c
1076  019A  93          	sub	a, e
1077  019B  6F          	ld	l, a
1078  019C  78          	ld	a, b
1079  019D  9A          	sbc	a, d
1080  019E  67          	ld	h, a
1081  019F  CD 00 00    	call	_abs_fastcall
1082  01A2  7D          	ld	a,l
1083  01A3  D6 0E       	sub	a,0x0e
1084  01A5  7C          	ld	a,h
1085  01A6  17          	rla
1086  01A7  3F          	ccf
1087  01A8  1F          	rra
1088  01A9  DE 80       	sbc	a,0x80
1089  01AB  D2 3B 02    	jp	NC, l_player_collision_00119
1090  01AE  2A 00 00    	ld	hl,(_sprite)
1091  01B1  26 00       	ld	h,0x00
1092  01B3  01 00 00    	ld	bc,_class
1093  01B6  09          	add	hl,bc
1094  01B7  7E          	ld	a,(hl)
1095  01B8  FE 06       	cp	a,0x06
1096  01BA  20 29       	jr	NZ,l_player_collision_00107
1097  01BC  21 00 00    	ld	hl,_player_vita
1098  01BF  7E          	ld	a, (hl)
1099  01C0  C6 14       	add	a,0x14
1100  01C2  77          	ld	(hl), a
1101  01C3  3A 00 00    	ld	a,(_player_max_vita)
1102  01C6  21 00 00    	ld	hl,_player_vita
1103  01C9  96          	sub	a, (hl)
1104  01CA  30 06       	jr	NC,l_player_collision_00105
1105  01CC  3A 00 00    	ld	a,(_player_max_vita)
1106  01CF  32 00 00    	ld	(_player_vita),a
1107  01D2              l_player_collision_00105:
1108  01D2  21 01 00    	ld	hl,0x0001
1109  01D5  CD 1B 0C    	call	_player_score_add
1110  01D8  CD 00 00    	call	_game_update_stats
1111  01DB  2A 00 00    	ld	hl,(_sprite)
1112  01DE  CD 00 00    	call	_spr_destroy
1113  01E1  2E 00       	ld	l,0x00
1114  01E3  18 5F       	jr	l_player_collision_00125
1115  01E5              l_player_collision_00107:
1116  01E5  FE 07       	cp	a,0x07
1117  01E7  20 29       	jr	NZ,l_player_collision_00111
1118  01E9  21 00 00    	ld	hl,_player_mana
1119  01EC  7E          	ld	a, (hl)
1120  01ED  C6 14       	add	a,0x14
1121  01EF  77          	ld	(hl), a
1122  01F0  3A 00 00    	ld	a,(_player_max_mana)
1123  01F3  21 00 00    	ld	hl,_player_mana
1124  01F6  96          	sub	a, (hl)
1125  01F7  30 06       	jr	NC,l_player_collision_00109
1126  01F9  3A 00 00    	ld	a,(_player_max_mana)
1127  01FC  32 00 00    	ld	(_player_mana),a
1128  01FF              l_player_collision_00109:
1129  01FF  21 01 00    	ld	hl,0x0001
1130  0202  CD 1B 0C    	call	_player_score_add
1131  0205  CD 00 00    	call	_game_update_stats
1132  0208  2A 00 00    	ld	hl,(_sprite)
1133  020B  CD 00 00    	call	_spr_destroy
1134  020E  2E 00       	ld	l,0x00
1135  0210  18 32       	jr	l_player_collision_00125
1136  0212              l_player_collision_00111:
1137  0212  D6 08       	sub	a,0x08
1138  0214  20 17       	jr	NZ,l_player_collision_00113
1139  0216  21 00 00    	ld	hl,_player_lives
1140  0219  34          	inc	(hl)
1141  021A  21 01 00    	ld	hl,0x0001
1142  021D  CD 1B 0C    	call	_player_score_add
1143  0220  CD 00 00    	call	_game_update_stats
1144  0223  2A 00 00    	ld	hl,(_sprite)
1145  0226  CD 00 00    	call	_spr_destroy
1146  0229  2E 00       	ld	l,0x00
1147  022B  18 17       	jr	l_player_collision_00125
1148  022D              l_player_collision_00113:
1149  022D  2E 02       	ld	l,0x02
1150  022F  CD 00 00    	call	_zx_border_fastcall
1151  0232  2E 14       	ld	l,0x14
1152  0234  CD 1B 11    	call	_player_hit
1153  0237  2E 01       	ld	l,0x01
1154  0239  18 09       	jr	l_player_collision_00125
1155  023B              l_player_collision_00119:
1156  023B  21 00 00    	ld	hl,_sprite
1157  023E  34          	inc	(hl)
1158  023F  C3 4B 01    	jp	l_player_collision_00120
1159  0242              l_player_collision_00124:
1160  0242  2E 00       	ld	l,0x00
1161  0244              l_player_collision_00125:
1162  0244  C9          	ret
1163  0245              	SECTION code_compiler
1164  0245              ;	---------------------------------
1165  0245              ; Function player_kill
1166  0245              ; ---------------------------------
1167  0245              _player_kill:
1168  0245  01 00 00    	ld	bc,_state+0
1169  0248  2A 00 00    	ld	hl,(_sprite)
1170  024B  26 00       	ld	h,0x00
1171  024D  09          	add	hl,bc
1172  024E  CB 6E       	bit	5,(hl)
1173  0250  C2 17 03    	jp	NZ,l_player_kill_00109
1174  0253  C5          	push	bc
1175  0254  CD 00 00    	call	_sound_hit_brick
1176  0257  C1          	pop	bc
1177  0258  79          	ld	a, c
1178  0259  21 00 00    	ld	hl,_sprite
1179  025C  86          	add	a, (hl)
1180  025D  5F          	ld	e, a
1181  025E  78          	ld	a, b
1182  025F  CE 00       	adc	a,0x00
1183  0261  57          	ld	d, a
1184  0262  1A          	ld	a, (de)
1185  0263  F6 20       	or	a,0x20
1186  0265  12          	ld	(de), a
1187  0266  3E 00       	ld	a, +((_sprite_speed_alt) & 0xFF)
1188  0268  86          	add	a, (hl)
1189  0269  5F          	ld	e, a
1190  026A  3E 00       	ld	a, +((_sprite_speed_alt) / 256)
1191  026C  CE 00       	adc	a,0x00
1192  026E  57          	ld	d, a
1193  026F  3E 03       	ld	a,0x03
1194  0271  12          	ld	(de), a
1195  0272  79          	ld	a, c
1196  0273  86          	add	a, (hl)
1197  0274  4F          	ld	c, a
1198  0275  78          	ld	a, b
1199  0276  CE 00       	adc	a,0x00
1200  0278  47          	ld	b, a
1201  0279  0A          	ld	a, (bc)
1202  027A  CB 57       	bit	2, a
1203  027C  28 0D       	jr	Z,l_player_kill_00102
1204  027E  2A 00 00    	ld	hl,(_sprite)
1205  0281  26 00       	ld	h,0x00
1206  0283  01 00 00    	ld	bc,_tile
1207  0286  09          	add	hl,bc
1208  0287  36 4C       	ld	(hl),0x4c
1209  0289  18 0B       	jr	l_player_kill_00103
1210  028B              l_player_kill_00102:
1211  028B  2A 00 00    	ld	hl,(_sprite)
1212  028E  26 00       	ld	h,0x00
1213  0290  01 00 00    	ld	bc,_tile
1214  0293  09          	add	hl,bc
1215  0294  36 54       	ld	(hl),0x54
1216  0296              l_player_kill_00103:
1217  0296  CD E2 0B    	call	_player_hit_platform_clear
1218  0299  2A 00 00    	ld	hl,(_sprite)
1219  029C  26 00       	ld	h,0x00
1220  029E  01 00 00    	ld	bc,_col
1221  02A1  09          	add	hl,bc
1222  02A2  4E          	ld	c, (hl)
1223  02A3  2A 00 00    	ld	hl,(_sprite)
1224  02A6  26 00       	ld	h,0x00
1225  02A8  11 00 00    	ld	de,_lin
1226  02AB  19          	add	hl,de
1227  02AC  46          	ld	b, (hl)
1228  02AD  2A 00 00    	ld	hl,(_sprite)
1229  02B0  26 00       	ld	h,0x00
1230  02B2  11 00 00    	ld	de,_tile
1231  02B5  19          	add	hl,de
1232  02B6  56          	ld	d, (hl)
1233  02B7  79          	ld	a,c
1234  02B8  21 00 00    	ld	hl,_sprite
1235  02BB  F5          	push	af
1236  02BC  33          	inc	sp
1237  02BD  4A          	ld	c, d
1238  02BE  7E          	ld	a,(hl)
1239  02BF  C5          	push	bc
1240  02C0  F5          	push	af
1241  02C1  33          	inc	sp
1242  02C2  CD 00 00    	call	_NIRVANAP_spriteT_callee
1243  02C5  01 00 00    	ld	bc,_spr_timer+0
1244  02C8  2A 00 00    	ld	hl,(_sprite)
1245  02CB  26 00       	ld	h,0x00
1246  02CD  29          	add	hl, hl
1247  02CE  09          	add	hl,bc
1248  02CF  ED 5B 00 00 	ld	de,(_curr_time)
1249  02D3  73          	ld	(hl),e
1250  02D4  23          	inc	hl
1251  02D5  72          	ld	(hl),d
1252  02D6  3A 00 00    	ld	a,(_sprite)
1253  02D9  D6 07       	sub	a,0x07
1254  02DB  20 1E       	jr	NZ,l_player_kill_00105
1255  02DD  01 00 00    	ld	bc,_state_a+0
1256  02E0  79          	ld	a, c
1257  02E1  21 00 00    	ld	hl,_sprite
1258  02E4  86          	add	a, (hl)
1259  02E5  5F          	ld	e, a
1260  02E6  78          	ld	a, b
1261  02E7  CE 00       	adc	a,0x00
1262  02E9  57          	ld	d, a
1263  02EA  1A          	ld	a, (de)
1264  02EB  F6 08       	or	a,0x08
1265  02ED  12          	ld	(de), a
1266  02EE  79          	ld	a, c
1267  02EF  86          	add	a, (hl)
1268  02F0  4F          	ld	c, a
1269  02F1  78          	ld	a, b
1270  02F2  CE 00       	adc	a,0x00
1271  02F4  47          	ld	b, a
1272  02F5  0A          	ld	a, (bc)
1273  02F6  E6 EF       	and	a,0xef
1274  02F8  02          	ld	(bc), a
1275  02F9  18 1C       	jr	l_player_kill_00109
1276  02FB              l_player_kill_00105:
1277  02FB  01 00 00    	ld	bc,_state_a+0
1278  02FE  79          	ld	a, c
1279  02FF  21 00 00    	ld	hl,_sprite
1280  0302  86          	add	a, (hl)
1281  0303  5F          	ld	e, a
1282  0304  78          	ld	a, b
1283  0305  CE 00       	adc	a,0x00
1284  0307  57          	ld	d, a
1285  0308  1A          	ld	a, (de)
1286  0309  F6 10       	or	a,0x10
1287  030B  12          	ld	(de), a
1288  030C  79          	ld	a, c
1289  030D  86          	add	a, (hl)
1290  030E  4F          	ld	c, a
1291  030F  78          	ld	a, b
1292  0310  CE 00       	adc	a,0x00
1293  0312  47          	ld	b, a
1294  0313  0A          	ld	a, (bc)
1295  0314  E6 F7       	and	a,0xf7
1296  0316  02          	ld	(bc), a
1297  0317              l_player_kill_00109:
1298  0317  C9          	ret
1299  0318              	SECTION code_compiler
1300  0318              ;	---------------------------------
1301  0318              ; Function player_restart
1302  0318              ; ---------------------------------
1303  0318              _player_restart:
1304  0318  CD 00 00    	call	___sdcc_enter_ix
1305  031B  F5          	push	af
1306  031C  4D          	ld	c, l
1307  031D  21 00 00    	ld	hl,_ay_effect_15
1308  0320  CD 00 00    	call	_ay_fx_play
1309  0323  C5          	push	bc
1310  0324  21 0E 70    	ld	hl,0x700e
1311  0327  E5          	push	hl
1312  0328  21 07 00    	ld	hl,0x0007
1313  032B  E5          	push	hl
1314  032C  CD 00 00    	call	_player_init
1315  032F  F1          	pop	af
1316  0330  F1          	pop	af
1317  0331  C1          	pop	bc
1318  0332  11 00 00    	ld	de,_state+0
1319  0335  69          	ld	l,c
1320  0336  26 00       	ld	h,0x00
1321  0338  19          	add	hl, de
1322  0339  CB E6       	set	4, (hl)
1323  033B  11 00 00    	ld	de,_state_a+0
1324  033E  69          	ld	l,c
1325  033F  26 00       	ld	h,0x00
1326  0341  19          	add	hl, de
1327  0342  CB C6       	set	0, (hl)
1328  0344  11 00 00    	ld	de,_spr_timer+0
1329  0347  69          	ld	l, c
1330  0348  26 00       	ld	h,0x00
1331  034A  29          	add	hl, hl
1332  034B  19          	add	hl,de
1333  034C  E3          	ex	(sp), hl
1334  034D  E1          	pop	hl
1335  034E  ED 5B 00 00 	ld	de,(_curr_time)
1336  0352  E5          	push	hl
1337  0353  73          	ld	(hl), e
1338  0354  23          	inc	hl
1339  0355  72          	ld	(hl), d
1340  0356  11 00 00    	ld	de,_sprite_speed_alt+0
1341  0359  69          	ld	l,c
1342  035A  26 00       	ld	h,0x00
1343  035C  19          	add	hl, de
1344  035D  F1          	pop	af
1345  035E  36 08       	ld	(hl),0x08
1346  0360  DD E1       	pop	ix
1347  0362  C9          	ret
1348  0363              	SECTION code_compiler
1349  0363              ;	---------------------------------
1350  0363              ; Function player_turn
1351  0363              ; ---------------------------------
1352  0363              _player_turn:
1353  0363  21 00 00    	ld	hl,_sprite
1354  0366  CD 00 00    	call	_spr_chktime
1355  0369  7D          	ld	a, l
1356  036A  B7          	or	a, a
1357  036B  C8          	ret	Z
1358  036C  21 00 00    	ld	hl,_k1
1359  036F  E5          	push	hl
1360  0370  2A 00 00    	ld	hl,(_joyfunc1)
1361  0373  CD 00 00    	call	___sdcc_call_hl
1362  0376  F1          	pop	af
1363  0377  7D          	ld	a,l
1364  0378  32 00 00    	ld	(_dirs),a
1365  037B  CD 81 03    	call	_player_move
1366  037E  C3 FC 00    	jp  _player_collision
1367  0381              	SECTION code_compiler
1368  0381              ;	---------------------------------
1369  0381              ; Function player_move
1370  0381              ; ---------------------------------
1371  0381              _player_move:
1372  0381  2A 00 00    	ld	hl,(_sprite)
1373  0384  26 00       	ld	h,0x00
1374  0386  01 00 00    	ld	bc,_lin
1375  0389  09          	add	hl,bc
1376  038A  7E          	ld	a,(hl)
1377  038B  32 00 00    	ld	(_s_lin0),a
1378  038E  2A 00 00    	ld	hl,(_sprite)
1379  0391  26 00       	ld	h,0x00
1380  0393  01 00 00    	ld	bc,_col
1381  0396  09          	add	hl,bc
1382  0397  7E          	ld	a,(hl)
1383  0398  32 00 00    	ld	(_s_col0),a
1384  039B  2A 00 00    	ld	hl,(_sprite)
1385  039E  26 00       	ld	h,0x00
1386  03A0  01 00 00    	ld	bc,_tile
1387  03A3  09          	add	hl,bc
1388  03A4  4E          	ld	c, (hl)
1389  03A5  3A 00 00    	ld	a,(_sprite)
1390  03A8  5F          	ld	e,a
1391  03A9  16 00       	ld	d,0x00
1392  03AB  21 00 00    	ld	hl,_colint
1393  03AE  19          	add	hl,de
1394  03AF  7E          	ld	a,(hl)
1395  03B0  81          	add	a,c
1396  03B1  32 00 00    	ld	(_s_tile0),a
1397  03B4  2A 00 00    	ld	hl,(_sprite)
1398  03B7  26 00       	ld	h,0x00
1399  03B9  01 00 00    	ld	bc,_state
1400  03BC  09          	add	hl,bc
1401  03BD  7E          	ld	a,(hl)
1402  03BE  CB 47       	bit	0,a
1403  03C0  32 00 00    	ld	(_s_state),a
1404  03C3  20 07       	jr	NZ,l_player_move_00113
1405  03C5  21 00 00    	ld	hl,_s_state
1406  03C8  CB 4E       	bit	1, (hl)
1407  03CA  28 46       	jr	Z,l_player_move_00114
1408  03CC              l_player_move_00113:
1409  03CC  CD 10 07    	call	_player_fire
1410  03CF  3A 00 00    	ld	a,(_player_vel_y)
1411  03D2  21 00 00    	ld	hl,_player_vel_y1
1412  03D5  96          	sub	a, (hl)
1413  03D6  E2 DB 03    	jp	PO, l_player_move_00162
1414  03D9  EE 80       	xor	a,0x80
1415  03DB              l_player_move_00162:
1416  03DB  F2 FE 03    	jp	P, l_player_move_00106
1417  03DE  21 00 00    	ld	hl,_dirs
1418  03E1  CB 56       	bit	2, (hl)
1419  03E3  28 09       	jr	Z,l_player_move_00102
1420  03E5  21 00 00    	ld	hl,_s_state
1421  03E8  7E          	ld	a,(hl)
1422  03E9  F6 08       	or	a,0x08
1423  03EB  E6 FB       	and	a,0xfb
1424  03ED  77          	ld	(hl),a
1425  03EE              l_player_move_00102:
1426  03EE  21 00 00    	ld	hl,_dirs
1427  03F1  CB 4E       	bit	1, (hl)
1428  03F3  28 09       	jr	Z,l_player_move_00106
1429  03F5  21 00 00    	ld	hl,_s_state
1430  03F8  7E          	ld	a,(hl)
1431  03F9  F6 04       	or	a,0x04
1432  03FB  E6 F7       	and	a,0xf7
1433  03FD  77          	ld	(hl),a
1434  03FE              l_player_move_00106:
1435  03FE  CD FB 0C    	call	_player_move_jump
1436  0401  7D          	ld	a, l
1437  0402  B7          	or	a, a
1438  0403  28 2E       	jr	Z,l_player_move_00115
1439  0405  3A 00 00    	ld	a,(_player_over_stair)
1440  0408  B7          	or	a, a
1441  0409  20 28       	jr	NZ,l_player_move_00115
1442  040B  2E 60       	ld	l,0x60
1443  040D  CD 44 05    	call	_player_tile
1444  0410  18 21       	jr	l_player_move_00115
1445  0412              l_player_move_00114:
1446  0412  CD 9A 05    	call	_player_move_input
1447  0415  7D          	ld	a, l
1448  0416  B7          	or	a, a
1449  0417  20 17       	jr	NZ,l_player_move_00112
1450  0419  2A 00 00    	ld	hl,(_sprite)
1451  041C  26 00       	ld	h,0x00
1452  041E  01 00 00    	ld	bc,_colint
1453  0421  09          	add	hl,bc
1454  0422  AF          	xor	a,a
1455  0423  77          	ld	(hl),a
1456  0424  2E 70       	ld	l,0x70
1457  0426  CD 44 05    	call	_player_tile
1458  0429  21 00 00    	ld	hl,_s_state
1459  042C  7E          	ld	a,(hl)
1460  042D  E6 F3       	and	a,+(0xf7&0xfb)
1461  042F  77          	ld	(hl),a
1462  0430              l_player_move_00112:
1463  0430  CD 7F 0C    	call	_player_check_floor
1464  0433              l_player_move_00115:
1465  0433  CD 00 00    	call	_spr_redraw
1466  0436  7D          	ld	a, l
1467  0437  B7          	or	a, a
1468  0438  28 03       	jr	Z,l_player_move_00118
1469  043A  CD 53 07    	call	_player_check_map
1470  043D              l_player_move_00118:
1471  043D  3A 00 00    	ld	a,(_player_hit_lin)
1472  0440  B7          	or	a, a
1473  0441  28 03       	jr	Z,l_player_move_00120
1474  0443  CD E2 0B    	call	_player_hit_platform_clear
1475  0446              l_player_move_00120:
1476  0446  2A 00 00    	ld	hl,(_sprite)
1477  0449  26 00       	ld	h,0x00
1478  044B  01 00 00    	ld	bc,_state
1479  044E  09          	add	hl,bc
1480  044F  3A 00 00    	ld	a,(_s_state)
1481  0452  77          	ld	(hl),a
1482  0453  2E 00       	ld	l,0x00
1483  0455  C9          	ret
1484  0456              	SECTION code_compiler
1485  0456              ;	---------------------------------
1486  0456              ; Function player_check_stairs_down
1487  0456              ; ---------------------------------
1488  0456              _player_check_stairs_down:
1489  0456  CD 00 00    	call	___sdcc_enter_ix
1490  0459  3B          	dec	sp
1491  045A  2A 00 00    	ld	hl,(_sprite)
1492  045D  26 00       	ld	h,0x00
1493  045F  5D          	ld	e,l
1494  0460  01 00 00    	ld	bc,_col
1495  0463  09          	add	hl,bc
1496  0464  46          	ld	b,(hl)
1497  0465  16 00       	ld	d,0x00
1498  0467  21 00 00    	ld	hl,_lin
1499  046A  19          	add	hl,de
1500  046B  7E          	ld	a,(hl)
1501  046C  C6 10       	add	a,0x10
1502  046E  4F          	ld	c,a
1503  046F  C5          	push	bc
1504  0470  CD 00 00    	call	_spr_calc_index
1505  0473  F1          	pop	af
1506  0474  7D          	ld	a,l
1507  0475  32 00 00    	ld	(_sprite_curr_index),a
1508  0478  4F          	ld	c,a
1509  0479  06 00       	ld	b,0x00
1510  047B  21 00 00    	ld	hl,_scr_map
1511  047E  09          	add	hl,bc
1512  047F  7E          	ld	a,(hl)
1513  0480  4F          	ld	c,a
1514  0481  D6 44       	sub	a,0x44
1515  0483  38 05       	jr	C,l_player_check_stairs_down_00105
1516  0485  3E 47       	ld	a,0x47
1517  0487  91          	sub	a, c
1518  0488  30 04       	jr	NC,l_player_check_stairs_down_00106
1519  048A              l_player_check_stairs_down_00105:
1520  048A  3E 00       	ld	a,0x00
1521  048C  18 02       	jr	l_player_check_stairs_down_00107
1522  048E              l_player_check_stairs_down_00106:
1523  048E  3E 01       	ld	a,0x01
1524  0490              l_player_check_stairs_down_00107:
1525  0490  B7          	or	a, a
1526  0491  28 05       	jr	Z,l_player_check_stairs_down_00103
1527  0493  21 00 00    	ld	hl,_player_over_stair
1528  0496  36 01       	ld	(hl),0x01
1529  0498              l_player_check_stairs_down_00103:
1530  0498  33          	inc	sp
1531  0499  DD E1       	pop	ix
1532  049B  C9          	ret
1533  049C              	SECTION code_compiler
1534  049C              ;	---------------------------------
1535  049C              ; Function player_check_stairs
1536  049C              ; ---------------------------------
1537  049C              _player_check_stairs:
1538  049C  CD 00 00    	call	___sdcc_enter_ix
1539  049F  3B          	dec	sp
1540  04A0  5D          	ld	e, l
1541  04A1  2A 00 00    	ld	hl,(_sprite)
1542  04A4  26 00       	ld	h,0x00
1543  04A6  01 00 00    	ld	bc,_col
1544  04A9  09          	add	hl,bc
1545  04AA  7E          	ld	a,(hl)
1546  04AB  83          	add	a,e
1547  04AC  57          	ld	d,a
1548  04AD  2A 00 00    	ld	hl,(_sprite)
1549  04B0  26 00       	ld	h,0x00
1550  04B2  01 00 00    	ld	bc,_lin
1551  04B5  09          	add	hl,bc
1552  04B6  46          	ld	b, (hl)
1553  04B7  D5          	push	de
1554  04B8  58          	ld	e,b
1555  04B9  D5          	push	de
1556  04BA  CD 00 00    	call	_spr_calc_index
1557  04BD  F1          	pop	af
1558  04BE  D1          	pop	de
1559  04BF  7D          	ld	a,l
1560  04C0  32 00 00    	ld	(_sprite_curr_index),a
1561  04C3  4F          	ld	c,a
1562  04C4  06 00       	ld	b,0x00
1563  04C6  21 00 00    	ld	hl,_scr_map
1564  04C9  09          	add	hl,bc
1565  04CA  7E          	ld	a,(hl)
1566  04CB  4F          	ld	c,a
1567  04CC  D6 44       	sub	a,0x44
1568  04CE  38 05       	jr	C,l_player_check_stairs_00111
1569  04D0  3E 47       	ld	a,0x47
1570  04D2  91          	sub	a, c
1571  04D3  30 04       	jr	NC,l_player_check_stairs_00112
1572  04D5              l_player_check_stairs_00111:
1573  04D5  0E 00       	ld	c,0x00
1574  04D7  18 02       	jr	l_player_check_stairs_00113
1575  04D9              l_player_check_stairs_00112:
1576  04D9  0E 01       	ld	c,0x01
1577  04DB              l_player_check_stairs_00113:
1578  04DB  3E 00       	ld	a, +((_col) & 0xFF)
1579  04DD  21 00 00    	ld	hl,_sprite
1580  04E0  86          	add	a, (hl)
1581  04E1  6F          	ld	l, a
1582  04E2  3E 00       	ld	a, +((_col) / 256)
1583  04E4  CE 00       	adc	a,0x00
1584  04E6  67          	ld	h, a
1585  04E7  7E          	ld	a, (hl)
1586  04E8  83          	add	a, e
1587  04E9  47          	ld	b, a
1588  04EA  2A 00 00    	ld	hl,(_sprite)
1589  04ED  26 00       	ld	h,0x00
1590  04EF  11 00 00    	ld	de,_lin
1591  04F2  19          	add	hl,de
1592  04F3  7E          	ld	a,(hl)
1593  04F4  C6 0F       	add	a,0x0f
1594  04F6  57          	ld	d, a
1595  04F7  C5          	push	bc
1596  04F8  4A          	ld	c, d
1597  04F9  C5          	push	bc
1598  04FA  CD 00 00    	call	_spr_calc_index
1599  04FD  F1          	pop	af
1600  04FE  C1          	pop	bc
1601  04FF  7D          	ld	a,l
1602  0500  32 00 00    	ld	(_sprite_curr_index),a
1603  0503  5F          	ld	e,a
1604  0504  16 00       	ld	d,0x00
1605  0506  21 00 00    	ld	hl,_scr_map
1606  0509  19          	add	hl,de
1607  050A  7E          	ld	a,(hl)
1608  050B  47          	ld	b,a
1609  050C  D6 44       	sub	a,0x44
1610  050E  38 05       	jr	C,l_player_check_stairs_00114
1611  0510  3E 47       	ld	a,0x47
1612  0512  90          	sub	a, b
1613  0513  30 04       	jr	NC,l_player_check_stairs_00115
1614  0515              l_player_check_stairs_00114:
1615  0515  06 00       	ld	b,0x00
1616  0517  18 02       	jr	l_player_check_stairs_00116
1617  0519              l_player_check_stairs_00115:
1618  0519  06 01       	ld	b,0x01
1619  051B              l_player_check_stairs_00116:
1620  051B  79          	ld	a, c
1621  051C  B7          	or	a,a
1622  051D  20 03       	jr	NZ,l_player_check_stairs_00105
1623  051F  B0          	or	a,b
1624  0520  28 10       	jr	Z,l_player_check_stairs_00106
1625  0522              l_player_check_stairs_00105:
1626  0522  21 00 00    	ld	hl,_player_over_stair
1627  0525  7E          	ld	a, (hl)
1628  0526  B7          	or	a, a
1629  0527  20 17       	jr	NZ,l_player_check_stairs_00109
1630  0529  36 01       	ld	(hl),0x01
1631  052B  2E 72       	ld	l,0x72
1632  052D  CD 44 05    	call	_player_tile
1633  0530  18 0E       	jr	l_player_check_stairs_00109
1634  0532              l_player_check_stairs_00106:
1635  0532  21 00 00    	ld	hl,_player_over_stair
1636  0535  7E          	ld	a, (hl)
1637  0536  B7          	or	a, a
1638  0537  28 07       	jr	Z,l_player_check_stairs_00109
1639  0539  36 00       	ld	(hl),0x00
1640  053B  2E 60       	ld	l,0x60
1641  053D  CD 44 05    	call	_player_tile
1642  0540              l_player_check_stairs_00109:
1643  0540  33          	inc	sp
1644  0541  DD E1       	pop	ix
1645  0543  C9          	ret
1646  0544              	SECTION code_compiler
1647  0544              ;	---------------------------------
1648  0544              ; Function player_tile
1649  0544              ; ---------------------------------
1650  0544              _player_tile:
1651  0544  45          	ld	b, l
1652  0545  3A 00 00    	ld	a,(_player_over_stair)
1653  0548  B7          	or	a, a
1654  0549  28 0D       	jr	Z,l_player_tile_00105
1655  054B  2A 00 00    	ld	hl,(_sprite)
1656  054E  26 00       	ld	h,0x00
1657  0550  01 00 00    	ld	bc,_tile
1658  0553  09          	add	hl,bc
1659  0554  36 72       	ld	(hl),0x72
1660  0556  18 41       	jr	l_player_tile_00107
1661  0558              l_player_tile_00105:
1662  0558  78          	ld	a, b
1663  0559  D6 70       	sub	a,0x70
1664  055B  20 1F       	jr	NZ,l_player_tile_00102
1665  055D  2A 00 00    	ld	hl,(_sprite)
1666  0560  26 00       	ld	h,0x00
1667  0562  11 00 00    	ld	de,_tile
1668  0565  19          	add	hl,de
1669  0566  E5          	push	hl
1670  0567  3E 01       	ld	a,0x01
1671  0569  21 00 00    	ld	hl,_sprite
1672  056C  F5          	push	af
1673  056D  33          	inc	sp
1674  056E  7E          	ld	a, (hl)
1675  056F  48          	ld	c,b
1676  0570  47          	ld	b,a
1677  0571  C5          	push	bc
1678  0572  CD 00 00    	call	_spr_tile_dir
1679  0575  F1          	pop	af
1680  0576  33          	inc	sp
1681  0577  D1          	pop	de
1682  0578  7D          	ld	a,l
1683  0579  12          	ld	(de), a
1684  057A  18 1D       	jr	l_player_tile_00107
1685  057C              l_player_tile_00102:
1686  057C  2A 00 00    	ld	hl,(_sprite)
1687  057F  26 00       	ld	h,0x00
1688  0581  11 00 00    	ld	de,_tile
1689  0584  19          	add	hl,de
1690  0585  E5          	push	hl
1691  0586  3E 08       	ld	a,0x08
1692  0588  21 00 00    	ld	hl,_sprite
1693  058B  F5          	push	af
1694  058C  33          	inc	sp
1695  058D  7E          	ld	a, (hl)
1696  058E  48          	ld	c,b
1697  058F  47          	ld	b,a
1698  0590  C5          	push	bc
1699  0591  CD 00 00    	call	_spr_tile_dir
1700  0594  F1          	pop	af
1701  0595  33          	inc	sp
1702  0596  D1          	pop	de
1703  0597  7D          	ld	a,l
1704  0598  12          	ld	(de), a
1705  0599              l_player_tile_00107:
1706  0599  C9          	ret
1707  059A              	SECTION code_compiler
1708  059A              ;	---------------------------------
1709  059A              ; Function player_move_input
1710  059A              ; ---------------------------------
1711  059A              _player_move_input:
1712  059A  CD BD 00    	call	_player_check_input
1713  059D  7D          	ld	a, l
1714  059E  B7          	or	a, a
1715  059F  CA 0D 07    	jp	Z, l_player_move_input_00136
1716  05A2  CD 10 07    	call	_player_fire
1717  05A5  7D          	ld	a, l
1718  05A6  B7          	or	a, a
1719  05A7  28 0A       	jr	Z,l_player_move_input_00102
1720  05A9  21 00 00    	ld	hl,_dirs
1721  05AC  36 00       	ld	(hl),0x00
1722  05AE  2E 00       	ld	l,0x00
1723  05B0  C3 0F 07    	jp	l_player_move_input_00137
1724  05B3              l_player_move_input_00102:
1725  05B3  21 00 00    	ld	hl,_dirs
1726  05B6  CB 7E       	bit	7, (hl)
1727  05B8  28 67       	jr	Z,l_player_move_input_00106
1728  05BA  21 00 00    	ld	hl,_player_vel_inc
1729  05BD  36 01       	ld	(hl),0x01
1730  05BF  CD 00 00    	call	_ay_is_playing
1731  05C2  7D          	ld	a, l
1732  05C3  D6 03       	sub	a,0x03
1733  05C5  28 06       	jr	Z,l_player_move_input_00104
1734  05C7  21 00 00    	ld	hl,_ay_effect_03
1735  05CA  CD 00 00    	call	_ay_fx_play
1736  05CD              l_player_move_input_00104:
1737  05CD  21 00 00    	ld	hl,_player_over_stair
1738  05D0  36 00       	ld	(hl),0x00
1739  05D2  CD 00 00    	call	_sound_jump
1740  05D5  21 00 00    	ld	hl,_s_state
1741  05D8  7E          	ld	a,(hl)
1742  05D9  F6 01       	or	a,0x01
1743  05DB  E6 FD       	and	a,0xfd
1744  05DD  77          	ld	(hl),a
1745  05DE  2A 00 00    	ld	hl,(_sprite)
1746  05E1  26 00       	ld	h,0x00
1747  05E3  01 00 00    	ld	bc,_jump_lin
1748  05E6  09          	add	hl,bc
1749  05E7  4D          	ld	c,l
1750  05E8  44          	ld	b,h
1751  05E9  2A 00 00    	ld	hl,(_sprite)
1752  05EC  26 00       	ld	h,0x00
1753  05EE  11 00 00    	ld	de,_lin
1754  05F1  19          	add	hl,de
1755  05F2  7E          	ld	a,(hl)
1756  05F3  02          	ld	(bc),a
1757  05F4  2A 00 00    	ld	hl,(_sprite)
1758  05F7  26 00       	ld	h,0x00
1759  05F9  01 00 00    	ld	bc,_state
1760  05FC  09          	add	hl,bc
1761  05FD  3A 00 00    	ld	a,(_s_state)
1762  0600  77          	ld	(hl),a
1763  0601  2E 64       	ld	l,0x64
1764  0603  CD 44 05    	call	_player_tile
1765  0606  2A 00 00    	ld	hl,(_sprite)
1766  0609  26 00       	ld	h,0x00
1767  060B  01 00 00    	ld	bc,_sprite_speed_alt
1768  060E  09          	add	hl,bc
1769  060F  36 02       	ld	(hl),0x02
1770  0611  21 00 00    	ld	hl,_player_slide
1771  0614  36 00       	ld	(hl),0x00
1772  0616  3A 00 00    	ld	a,(_player_vel_y0)
1773  0619  32 00 00    	ld	(_player_vel_y),a
1774  061C  2E 01       	ld	l,0x01
1775  061E  C3 0F 07    	jp	l_player_move_input_00137
1776  0621              l_player_move_input_00106:
1777  0621  21 00 00    	ld	hl,_dirs
1778  0624  CB 5E       	bit	3, (hl)
1779  0626  28 33       	jr	Z,l_player_move_input_00110
1780  0628  21 00 00    	ld	hl,_s_state
1781  062B  7E          	ld	a,(hl)
1782  062C  F6 04       	or	a,0x04
1783  062E  E6 F7       	and	a,0xf7
1784  0630  77          	ld	(hl),a
1785  0631  01 00 00    	ld	bc,_state_a+0
1786  0634  79          	ld	a, c
1787  0635  21 00 00    	ld	hl,_sprite
1788  0638  86          	add	a, (hl)
1789  0639  5F          	ld	e, a
1790  063A  78          	ld	a, b
1791  063B  CE 00       	adc	a,0x00
1792  063D  57          	ld	d, a
1793  063E  1A          	ld	a, (de)
1794  063F  F6 10       	or	a,0x10
1795  0641  12          	ld	(de), a
1796  0642  79          	ld	a, c
1797  0643  86          	add	a, (hl)
1798  0644  4F          	ld	c, a
1799  0645  78          	ld	a, b
1800  0646  CE 00       	adc	a,0x00
1801  0648  47          	ld	b, a
1802  0649  0A          	ld	a, (bc)
1803  064A  E6 F7       	and	a,0xf7
1804  064C  02          	ld	(bc), a
1805  064D  3A 00 00    	ld	a,(_player_over_stair)
1806  0650  B7          	or	a, a
1807  0651  28 05       	jr	Z,l_player_move_input_00108
1808  0653  2E 00       	ld	l,0x00
1809  0655  CD 9C 04    	call	_player_check_stairs
1810  0658              l_player_move_input_00108:
1811  0658  CD 00 00    	call	_spr_move_horizontal
1812  065B              l_player_move_input_00110:
1813  065B  21 00 00    	ld	hl,_dirs
1814  065E  CB 56       	bit	2, (hl)
1815  0660  28 33       	jr	Z,l_player_move_input_00114
1816  0662  21 00 00    	ld	hl,_s_state
1817  0665  7E          	ld	a,(hl)
1818  0666  F6 08       	or	a,0x08
1819  0668  E6 FB       	and	a,0xfb
1820  066A  77          	ld	(hl),a
1821  066B  01 00 00    	ld	bc,_state_a+0
1822  066E  79          	ld	a, c
1823  066F  21 00 00    	ld	hl,_sprite
1824  0672  86          	add	a, (hl)
1825  0673  5F          	ld	e, a
1826  0674  78          	ld	a, b
1827  0675  CE 00       	adc	a,0x00
1828  0677  57          	ld	d, a
1829  0678  1A          	ld	a, (de)
1830  0679  F6 08       	or	a,0x08
1831  067B  12          	ld	(de), a
1832  067C  79          	ld	a, c
1833  067D  86          	add	a, (hl)
1834  067E  4F          	ld	c, a
1835  067F  78          	ld	a, b
1836  0680  CE 00       	adc	a,0x00
1837  0682  47          	ld	b, a
1838  0683  0A          	ld	a, (bc)
1839  0684  E6 EF       	and	a,0xef
1840  0686  02          	ld	(bc), a
1841  0687  3A 00 00    	ld	a,(_player_over_stair)
1842  068A  B7          	or	a, a
1843  068B  28 05       	jr	Z,l_player_move_input_00112
1844  068D  2E 00       	ld	l,0x00
1845  068F  CD 9C 04    	call	_player_check_stairs
1846  0692              l_player_move_input_00112:
1847  0692  CD 00 00    	call	_spr_move_horizontal
1848  0695              l_player_move_input_00114:
1849  0695  21 00 00    	ld	hl,_dirs
1850  0698  CB 46       	bit	0, (hl)
1851  069A  28 2B       	jr	Z,l_player_move_input_00124
1852  069C  2E 00       	ld	l,0x00
1853  069E  CD 9C 04    	call	_player_check_stairs
1854  06A1  3A 00 00    	ld	a,(_player_over_stair)
1855  06A4  B7          	or	a, a
1856  06A5  28 0E       	jr	Z,l_player_move_input_00121
1857  06A7  CD 00 00    	call	_spr_move_up
1858  06AA  7D          	ld	a, l
1859  06AB  B7          	or	a, a
1860  06AC  28 19       	jr	Z,l_player_move_input_00124
1861  06AE  21 00 00    	ld	hl,_player_over_stair
1862  06B1  36 00       	ld	(hl),0x00
1863  06B3  18 12       	jr	l_player_move_input_00124
1864  06B5              l_player_move_input_00121:
1865  06B5  21 00 00    	ld	hl,_dirs
1866  06B8  CB 5E       	bit	3, (hl)
1867  06BA  20 0B       	jr	NZ,l_player_move_input_00124
1868  06BC  21 00 00    	ld	hl,_dirs
1869  06BF  CB 56       	bit	2, (hl)
1870  06C1  20 04       	jr	NZ,l_player_move_input_00124
1871  06C3  2E 00       	ld	l,0x00
1872  06C5  18 48       	jr	l_player_move_input_00137
1873  06C7              l_player_move_input_00124:
1874  06C7  21 00 00    	ld	hl,_dirs
1875  06CA  CB 4E       	bit	1, (hl)
1876  06CC  28 29       	jr	Z,l_player_move_input_00134
1877  06CE  CD 56 04    	call	_player_check_stairs_down
1878  06D1  3A 00 00    	ld	a,(_player_over_stair)
1879  06D4  B7          	or	a, a
1880  06D5  28 0E       	jr	Z,l_player_move_input_00131
1881  06D7  CD 00 00    	call	_spr_move_down
1882  06DA  7D          	ld	a, l
1883  06DB  B7          	or	a, a
1884  06DC  28 19       	jr	Z,l_player_move_input_00134
1885  06DE  21 00 00    	ld	hl,_player_over_stair
1886  06E1  36 00       	ld	(hl),0x00
1887  06E3  18 12       	jr	l_player_move_input_00134
1888  06E5              l_player_move_input_00131:
1889  06E5  21 00 00    	ld	hl,_dirs
1890  06E8  CB 5E       	bit	3, (hl)
1891  06EA  20 0B       	jr	NZ,l_player_move_input_00134
1892  06EC  21 00 00    	ld	hl,_dirs
1893  06EF  CB 56       	bit	2, (hl)
1894  06F1  20 04       	jr	NZ,l_player_move_input_00134
1895  06F3  2E 00       	ld	l,0x00
1896  06F5  18 18       	jr	l_player_move_input_00137
1897  06F7              l_player_move_input_00134:
1898  06F7  2A 00 00    	ld	hl,(_sprite)
1899  06FA  26 00       	ld	h,0x00
1900  06FC  01 00 00    	ld	bc,_state
1901  06FF  09          	add	hl,bc
1902  0700  3A 00 00    	ld	a,(_s_state)
1903  0703  77          	ld	(hl),a
1904  0704  2E 60       	ld	l,0x60
1905  0706  CD 44 05    	call	_player_tile
1906  0709  2E 01       	ld	l,0x01
1907  070B  18 02       	jr	l_player_move_input_00137
1908  070D              l_player_move_input_00136:
1909  070D  2E 00       	ld	l,0x00
1910  070F              l_player_move_input_00137:
1911  070F  C9          	ret
1912  0710              	SECTION code_compiler
1913  0710              ;	---------------------------------
1914  0710              ; Function player_fire
1915  0710              ; ---------------------------------
1916  0710              _player_fire:
1917  0710  21 00 00    	ld	hl,_dirs
1918  0713  CB 7E       	bit	7, (hl)
1919  0715  28 39       	jr	Z,l_player_fire_00108
1920  0717  21 00 00    	ld	hl,_dirs
1921  071A  CB 4E       	bit	1, (hl)
1922  071C  28 32       	jr	Z,l_player_fire_00108
1923  071E  21 00 00    	ld	hl,_player_mana
1924  0721  7E          	ld	a, (hl)
1925  0722  B7          	or	a, a
1926  0723  28 27       	jr	Z,l_player_fire_00105
1927  0725  3A 07 00    	ld	a,(_bullet_col + 0x0007)
1928  0728  3C          	inc	a
1929  0729  20 21       	jr	NZ,l_player_fire_00105
1930  072B  3E 05       	ld	a,0x05
1931  072D  96          	sub	a, (hl)
1932  072E  30 0C       	jr	NC,l_player_fire_00102
1933  0730  CD 00 00    	call	_sound_hit_enemy
1934  0733  21 00 00    	ld	hl,_player_mana
1935  0736  7E          	ld	a, (hl)
1936  0737  C6 FB       	add	a,0xfb
1937  0739  77          	ld	(hl), a
1938  073A  18 05       	jr	l_player_fire_00103
1939  073C              l_player_fire_00102:
1940  073C  21 00 00    	ld	hl,_player_mana
1941  073F  36 00       	ld	(hl),0x00
1942  0741              l_player_fire_00103:
1943  0741  CD 00 00    	call	_game_update_stats
1944  0744  21 07 78    	ld	hl,0x7807
1945  0747  E5          	push	hl
1946  0748  CD 00 00    	call	_game_shoot_fire
1947  074B  F1          	pop	af
1948  074C              l_player_fire_00105:
1949  074C  2E 01       	ld	l,0x01
1950  074E  18 02       	jr	l_player_fire_00110
1951  0750              l_player_fire_00108:
1952  0750  2E 00       	ld	l,0x00
1953  0752              l_player_fire_00110:
1954  0752  C9          	ret
1955  0753              	SECTION code_compiler
1956  0753              ;	---------------------------------
1957  0753              ; Function player_check_map
1958  0753              ; ---------------------------------
1959  0753              _player_check_map:
1960  0753  2A 00 00    	ld	hl,(_sprite)
1961  0756  26 00       	ld	h,0x00
1962  0758  5D          	ld	e,l
1963  0759  01 00 00    	ld	bc,_col
1964  075C  09          	add	hl,bc
1965  075D  46          	ld	b,(hl)
1966  075E  16 00       	ld	d,0x00
1967  0760  21 00 00    	ld	hl,_lin
1968  0763  19          	add	hl,de
1969  0764  4E          	ld	c, (hl)
1970  0765  C5          	push	bc
1971  0766  CD 00 00    	call	_spr_calc_index
1972  0769  F1          	pop	af
1973  076A  7D          	ld	a,l
1974  076B  32 00 00    	ld	(_sprite_curr_index),a
1975  076E  2A 00 00    	ld	hl,(_sprite)
1976  0771  26 00       	ld	h,0x00
1977  0773  01 00 00    	ld	bc,_col
1978  0776  09          	add	hl,bc
1979  0777  4E          	ld	c, (hl)
1980  0778  3A 00 00    	ld	a,(_sprite)
1981  077B  5F          	ld	e,a
1982  077C  16 00       	ld	d,0x00
1983  077E  21 00 00    	ld	hl,_lin
1984  0781  19          	add	hl,de
1985  0782  7E          	ld	a,(hl)
1986  0783  E6 0F       	and	a,0x0f
1987  0785  CB 41       	bit	0, c
1988  0787  20 17       	jr	NZ,l_player_check_map_00108
1989  0789  B7          	or	a, a
1990  078A  20 05       	jr	NZ,l_player_check_map_00102
1991  078C  CD CB 07    	call	_player_pick_item
1992  078F  18 39       	jr	l_player_check_map_00110
1993  0791              l_player_check_map_00102:
1994  0791  CD CB 07    	call	_player_pick_item
1995  0794  21 00 00    	ld	hl,_sprite_curr_index
1996  0797  7E          	ld	a, (hl)
1997  0798  C6 10       	add	a,0x10
1998  079A  77          	ld	(hl), a
1999  079B  CD CB 07    	call	_player_pick_item
2000  079E  18 2A       	jr	l_player_check_map_00110
2001  07A0              l_player_check_map_00108:
2002  07A0  B7          	or	a, a
2003  07A1  20 0C       	jr	NZ,l_player_check_map_00105
2004  07A3  CD CB 07    	call	_player_pick_item
2005  07A6  21 00 00    	ld	hl,_sprite_curr_index
2006  07A9  34          	inc	(hl)
2007  07AA  CD CB 07    	call	_player_pick_item
2008  07AD  18 1B       	jr	l_player_check_map_00110
2009  07AF              l_player_check_map_00105:
2010  07AF  CD CB 07    	call	_player_pick_item
2011  07B2  21 00 00    	ld	hl,_sprite_curr_index
2012  07B5  34          	inc	(hl)
2013  07B6  CD CB 07    	call	_player_pick_item
2014  07B9  21 00 00    	ld	hl,_sprite_curr_index
2015  07BC  7E          	ld	a, (hl)
2016  07BD  C6 0F       	add	a,0x0f
2017  07BF  77          	ld	(hl), a
2018  07C0  CD CB 07    	call	_player_pick_item
2019  07C3  21 00 00    	ld	hl,_sprite_curr_index
2020  07C6  34          	inc	(hl)
2021  07C7  CD CB 07    	call	_player_pick_item
2022  07CA              l_player_check_map_00110:
2023  07CA  C9          	ret
2024  07CB              	SECTION code_compiler
2025  07CB              ;	---------------------------------
2026  07CB              ; Function player_pick_item
2027  07CB              ; ---------------------------------
2028  07CB              _player_pick_item:
2029  07CB  CD 00 00    	call	___sdcc_enter_ix
2030  07CE  3B          	dec	sp
2031  07CF  2A 00 00    	ld	hl,(_sprite_curr_index)
2032  07D2  26 00       	ld	h,0x00
2033  07D4  01 00 00    	ld	bc,_scr_map
2034  07D7  09          	add	hl,bc
2035  07D8  7E          	ld	a,(hl)
2036  07D9  4F          	ld	c,a
2037  07DA  D6 24       	sub	a,0x24
2038  07DC  3E 00       	ld	a,0x00
2039  07DE  17          	rla
2040  07DF  DD 77 FF    	ld	(ix-1),a
2041  07E2  CB 47       	bit	0,a
2042  07E4  C2 5F 09    	jp	NZ, l_player_pick_item_00117
2043  07E7  3E 2F       	ld	a,0x2f
2044  07E9  91          	sub	a, c
2045  07EA  3E 00       	ld	a,0x00
2046  07EC  17          	rla
2047  07ED  CB 47       	bit	0,a
2048  07EF  C2 5F 09    	jp	NZ,l_player_pick_item_00117
2049  07F2  47          	ld	b,a
2050  07F3  CD 00 00    	call	_ay_reset
2051  07F6  21 00 00    	ld	hl,_ay_effect_10
2052  07F9  CD 00 00    	call	_ay_fx_play
2053  07FC  C5          	push	bc
2054  07FD  CD 00 00    	call	_sound_coin
2055  0800  C1          	pop	bc
2056  0801  2A 00 00    	ld	hl,(_sprite_curr_index)
2057  0804  26 00       	ld	h,0x00
2058  0806  11 00 00    	ld	de,_scr_map
2059  0809  19          	add	hl,de
2060  080A  AF          	xor	a,a
2061  080B  77          	ld	(hl),a
2062  080C  3A 00 00    	ld	a,(_sprite_curr_index)
2063  080F  5F          	ld	e,a
2064  0810  16 00       	ld	d,0x00
2065  0812  C5          	push	bc
2066  0813  D5          	push	de
2067  0814  CD 00 00    	call	_game_obj_set
2068  0817  F1          	pop	af
2069  0818  C1          	pop	bc
2070  0819  3A 00 00    	ld	a,(_sprite_curr_index)
2071  081C  07          	rlca
2072  081D  07          	rlca
2073  081E  07          	rlca
2074  081F  07          	rlca
2075  0820  E6 0F       	and	a,0x0f
2076  0822  07          	rlca
2077  0823  07          	rlca
2078  0824  07          	rlca
2079  0825  07          	rlca
2080  0826  E6 F0       	and	a,0xf0
2081  0828  32 00 00    	ld	(_s_lin1),a
2082  082B  3A 00 00    	ld	a,(_sprite_curr_index)
2083  082E  E6 0F       	and	a,0x0f
2084  0830  87          	add	a, a
2085  0831  32 00 00    	ld	(_s_col1),a
2086  0834  C5          	push	bc
2087  0835  21 00 00    	ld	hl,0x0000
2088  0838  E5          	push	hl
2089  0839  21 84 03    	ld	hl,0x0384
2090  083C  E5          	push	hl
2091  083D  F5          	push	af
2092  083E  33          	inc	sp
2093  083F  3A 00 00    	ld	a,(_s_lin1)
2094  0842  F5          	push	af
2095  0843  33          	inc	sp
2096  0844  CD 00 00    	call	_spr_add_anim
2097  0847  F1          	pop	af
2098  0848  F1          	pop	af
2099  0849  F1          	pop	af
2100  084A  C1          	pop	bc
2101  084B  DD CB FF 46 	bit	0,(ix-1)
2102  084F  C2 5F 09    	jp	NZ, l_player_pick_item_00117
2103  0852  CB 40       	bit	0, b
2104  0854  C2 5F 09    	jp	NZ, l_player_pick_item_00117
2105  0857  79          	ld	a, c
2106  0858  C6 DC       	add	a,0xdc
2107  085A  DD 77 FF    	ld	(ix-1),a
2108  085D  21 00 00    	ld	hl,_player_str
2109  0860  56          	ld	d, (hl)
2110  0861  14          	inc	d
2111  0862  3A 00 00    	ld	a,(_player_max_vita)
2112  0865  C6 0A       	add	a,0x0a
2113  0867  5F          	ld	e, a
2114  0868  21 00 00    	ld	hl,_player_int
2115  086B  46          	ld	b, (hl)
2116  086C  04          	inc	b
2117  086D  3A 00 00    	ld	a,(_player_max_mana)
2118  0870  C6 0A       	add	a,0x0a
2119  0872  4F          	ld	c, a
2120  0873  D5          	push	de
2121  0874  DD 5E FF    	ld	e,(ix-1)
2122  0877  16 00       	ld	d,0x00
2123  0879  21 81 08    	ld	hl,l_player_pick_item_00135
2124  087C  19          	add	hl, de
2125  087D  19          	add	hl, de
2126  087E  19          	add	hl, de
2127  087F  D1          	pop	de
2128  0880  E9          	jp	(hl)
2129  0881              l_player_pick_item_00135:
2130  0881  C3 A5 08    	jp	l_player_pick_item_00101
2131  0884  C3 BD 08    	jp	l_player_pick_item_00102
2132  0887  C3 D5 08    	jp	l_player_pick_item_00103
2133  088A  C3 EC 08    	jp	l_player_pick_item_00104
2134  088D  C3 03 09    	jp	l_player_pick_item_00105
2135  0890  C3 13 09    	jp	l_player_pick_item_00107
2136  0893  C3 20 09    	jp	l_player_pick_item_00108
2137  0896  C3 2D 09    	jp	l_player_pick_item_00109
2138  0899  C3 3A 09    	jp	l_player_pick_item_00110
2139  089C  C3 47 09    	jp	l_player_pick_item_00111
2140  089F  C3 54 09    	jp	l_player_pick_item_00112
2141  08A2  C3 0B 09    	jp	l_player_pick_item_00106
2142  08A5              l_player_pick_item_00101:
2143  08A5  21 00 00    	ld	hl,_player_keys
2144  08A8  36 01       	ld	(hl),0x01
2145  08AA  21 00 00    	ld	hl,_screen_ink
2146  08AD  36 07       	ld	(hl),0x07
2147  08AF  21 00 00    	ld	hl,___str_0
2148  08B2  E5          	push	hl
2149  08B3  21 14 14    	ld	hl,0x1414
2150  08B6  E5          	push	hl
2151  08B7  CD 00 00    	call	_zx_print_str
2152  08BA  C3 5F 09    	jp	l_player_pick_item_00117
2153  08BD              l_player_pick_item_00102:
2154  08BD  21 01 00    	ld	hl, +(_player_keys + 0x0001)
2155  08C0  36 01       	ld	(hl),0x01
2156  08C2  21 00 00    	ld	hl,_screen_ink
2157  08C5  36 02       	ld	(hl),0x02
2158  08C7  21 00 00    	ld	hl,___str_0
2159  08CA  E5          	push	hl
2160  08CB  21 14 15    	ld	hl,0x1514
2161  08CE  E5          	push	hl
2162  08CF  CD 00 00    	call	_zx_print_str
2163  08D2  C3 5F 09    	jp	l_player_pick_item_00117
2164  08D5              l_player_pick_item_00103:
2165  08D5  21 02 00    	ld	hl, +(_player_keys + 0x0002)
2166  08D8  36 01       	ld	(hl),0x01
2167  08DA  21 00 00    	ld	hl,_screen_ink
2168  08DD  36 04       	ld	(hl),0x04
2169  08DF  21 00 00    	ld	hl,___str_0
2170  08E2  E5          	push	hl
2171  08E3  21 14 16    	ld	hl,0x1614
2172  08E6  E5          	push	hl
2173  08E7  CD 00 00    	call	_zx_print_str
2174  08EA  18 73       	jr	l_player_pick_item_00117
2175  08EC              l_player_pick_item_00104:
2176  08EC  21 03 00    	ld	hl, +(_player_keys + 0x0003)
2177  08EF  36 01       	ld	(hl),0x01
2178  08F1  21 00 00    	ld	hl,_screen_ink
2179  08F4  36 05       	ld	(hl),0x05
2180  08F6  21 00 00    	ld	hl,___str_0
2181  08F9  E5          	push	hl
2182  08FA  21 14 17    	ld	hl,0x1714
2183  08FD  E5          	push	hl
2184  08FE  CD 00 00    	call	_zx_print_str
2185  0901  18 5C       	jr	l_player_pick_item_00117
2186  0903              l_player_pick_item_00105:
2187  0903  21 01 00    	ld	hl,0x0001
2188  0906  CD 1B 0C    	call	_player_score_add
2189  0909  18 54       	jr	l_player_pick_item_00117
2190  090B              l_player_pick_item_00106:
2191  090B  21 0A 00    	ld	hl,0x000a
2192  090E  CD 1B 0C    	call	_player_score_add
2193  0911  18 4C       	jr	l_player_pick_item_00117
2194  0913              l_player_pick_item_00107:
2195  0913  21 00 00    	ld	hl,_player_str
2196  0916  72          	ld	(hl), d
2197  0917  21 00 00    	ld	hl,_player_max_vita
2198  091A  73          	ld	(hl), e
2199  091B  CD 00 00    	call	_game_update_stats
2200  091E  18 3F       	jr	l_player_pick_item_00117
2201  0920              l_player_pick_item_00108:
2202  0920  21 00 00    	ld	hl,_player_str
2203  0923  72          	ld	(hl), d
2204  0924  21 00 00    	ld	hl,_player_max_vita
2205  0927  73          	ld	(hl), e
2206  0928  CD 00 00    	call	_game_update_stats
2207  092B  18 32       	jr	l_player_pick_item_00117
2208  092D              l_player_pick_item_00109:
2209  092D  21 00 00    	ld	hl,_player_str
2210  0930  72          	ld	(hl), d
2211  0931  21 00 00    	ld	hl,_player_max_vita
2212  0934  73          	ld	(hl), e
2213  0935  CD 00 00    	call	_game_update_stats
2214  0938  18 25       	jr	l_player_pick_item_00117
2215  093A              l_player_pick_item_00110:
2216  093A  21 00 00    	ld	hl,_player_int
2217  093D  70          	ld	(hl), b
2218  093E  21 00 00    	ld	hl,_player_max_mana
2219  0941  71          	ld	(hl), c
2220  0942  CD 00 00    	call	_game_update_stats
2221  0945  18 18       	jr	l_player_pick_item_00117
2222  0947              l_player_pick_item_00111:
2223  0947  21 00 00    	ld	hl,_player_int
2224  094A  70          	ld	(hl), b
2225  094B  21 00 00    	ld	hl,_player_max_mana
2226  094E  71          	ld	(hl), c
2227  094F  CD 00 00    	call	_game_update_stats
2228  0952  18 0B       	jr	l_player_pick_item_00117
2229  0954              l_player_pick_item_00112:
2230  0954  21 00 00    	ld	hl,_player_int
2231  0957  70          	ld	(hl), b
2232  0958  21 00 00    	ld	hl,_player_max_mana
2233  095B  71          	ld	(hl), c
2234  095C  CD 00 00    	call	_game_update_stats
2235  095F              l_player_pick_item_00117:
2236  095F  33          	inc	sp
2237  0960  DD E1       	pop	ix
2238  0962  C9          	ret
2239  0963              	SECTION rodata_compiler
2240  0000              ___str_0:
2241  0000  5D          	DEFM "]"
2242  0001  00          	DEFB 0x00
2243  0002              	SECTION code_compiler
2244  0963              ;	---------------------------------
2245  0963              ; Function player_hit_platform
2246  0963              ; ---------------------------------
2247  0963              _player_hit_platform:
2248  0963  3A 00 00    	ld	a,(_player_hit_lin)
2249  0966  B7          	or	a, a
2250  0967  C2 DF 0B    	jp	NZ, l_player_hit_platform_00139
2251  096A  2A 00 00    	ld	hl,(_sprite)
2252  096D  26 00       	ld	h,0x00
2253  096F  01 00 00    	ld	bc,_lin
2254  0972  09          	add	hl,bc
2255  0973  4E          	ld	c,(hl)
2256  0974  3E 10       	ld	a,0x10
2257  0976  91          	sub	a, c
2258  0977  D2 DF 0B    	jp	NC, l_player_hit_platform_00139
2259  097A  01 00 00    	ld	bc,_scr_map
2260  097D  2A 00 00    	ld	hl,(_index1)
2261  0980  09          	add	hl,bc
2262  0981  7E          	ld	a,(hl)
2263  0982  D6 45       	sub	a,0x45
2264  0984  DA DF 0B    	jp	C, l_player_hit_platform_00139
2265  0987  01 00 00    	ld	bc,_spr_timer+0
2266  098A  2A 00 00    	ld	hl,(_sprite)
2267  098D  26 00       	ld	h,0x00
2268  098F  29          	add	hl, hl
2269  0990  09          	add	hl,bc
2270  0991  ED 5B 00 00 	ld	de,(_curr_time)
2271  0995  73          	ld	(hl),e
2272  0996  23          	inc	hl
2273  0997  72          	ld	(hl),d
2274  0998  2A 00 00    	ld	hl,(_sprite)
2275  099B  26 00       	ld	h,0x00
2276  099D  01 00 00    	ld	bc,_lin
2277  09A0  09          	add	hl,bc
2278  09A1  4E          	ld	c,(hl)
2279  09A2  06 00       	ld	b,0x00
2280  09A4  79          	ld	a, c
2281  09A5  C6 F8       	add	a,0xf8
2282  09A7  4F          	ld	c, a
2283  09A8  78          	ld	a, b
2284  09A9  CE FF       	adc	a,0xff
2285  09AB  5F          	ld	e, a
2286  09AC  06 04       	ld	b,0x04
2287  09AE              l_player_hit_platform_00232:
2288  09AE  CB 2B       	sra	e
2289  09B0  CB 19       	rr	c
2290  09B2  10 FA       	djnz	l_player_hit_platform_00232
2291  09B4  79          	ld	a, c
2292  09B5  07          	rlca
2293  09B6  07          	rlca
2294  09B7  07          	rlca
2295  09B8  07          	rlca
2296  09B9  E6 F0       	and	a,0xf0
2297  09BB  C6 08       	add	a,0x08
2298  09BD  32 00 00    	ld	(_player_hit_lin),a
2299  09C0  2A 00 00    	ld	hl,(_sprite)
2300  09C3  26 00       	ld	h,0x00
2301  09C5  01 00 00    	ld	bc,_col
2302  09C8  09          	add	hl,bc
2303  09C9  4E          	ld	c,(hl)
2304  09CA  CB 41       	bit	0,c
2305  09CC  20 06       	jr	NZ,l_player_hit_platform_00111
2306  09CE  21 00 00    	ld	hl,_player_hit_col
2307  09D1  71          	ld	(hl), c
2308  09D2  18 33       	jr	l_player_hit_platform_00112
2309  09D4              l_player_hit_platform_00111:
2310  09D4  2A 00 00    	ld	hl,(_sprite)
2311  09D7  26 00       	ld	h,0x00
2312  09D9  11 00 00    	ld	de,_state
2313  09DC  19          	add	hl,de
2314  09DD  5E          	ld	e, (hl)
2315  09DE  41          	ld	b, c
2316  09DF  04          	inc	b
2317  09E0  0D          	dec	c
2318  09E1  CB 5B       	bit	3, e
2319  09E3  28 12       	jr	Z,l_player_hit_platform_00108
2320  09E5  3A 00 00    	ld	a,(_g_player_hit_right)
2321  09E8  B7          	or	a, a
2322  09E9  28 06       	jr	Z,l_player_hit_platform_00102
2323  09EB  21 00 00    	ld	hl,_player_hit_col
2324  09EE  70          	ld	(hl), b
2325  09EF  18 16       	jr	l_player_hit_platform_00112
2326  09F1              l_player_hit_platform_00102:
2327  09F1  21 00 00    	ld	hl,_player_hit_col
2328  09F4  71          	ld	(hl), c
2329  09F5  18 10       	jr	l_player_hit_platform_00112
2330  09F7              l_player_hit_platform_00108:
2331  09F7  3A 00 00    	ld	a,(_g_player_hit_left)
2332  09FA  B7          	or	a, a
2333  09FB  28 06       	jr	Z,l_player_hit_platform_00105
2334  09FD  21 00 00    	ld	hl,_player_hit_col
2335  0A00  71          	ld	(hl), c
2336  0A01  18 04       	jr	l_player_hit_platform_00112
2337  0A03              l_player_hit_platform_00105:
2338  0A03  21 00 00    	ld	hl,_player_hit_col
2339  0A06  70          	ld	(hl), b
2340  0A07              l_player_hit_platform_00112:
2341  0A07  01 00 00    	ld	bc,_scr_map
2342  0A0A  2A 00 00    	ld	hl,(_index1)
2343  0A0D  09          	add	hl,bc
2344  0A0E  7E          	ld	a,(hl)
2345  0A0F  FE 4D       	cp	a,0x4d
2346  0A11  20 39       	jr	NZ,l_player_hit_platform_00114
2347  0A13  AF          	xor	a,a
2348  0A14  77          	ld	(hl),a
2349  0A15  2A 00 00    	ld	hl,(_index0)
2350  0A18  E5          	push	hl
2351  0A19  CD 00 00    	call	_game_obj_set
2352  0A1C  F1          	pop	af
2353  0A1D  21 00 00    	ld	hl,_index1
2354  0A20  7E          	ld	a, (hl)
2355  0A21  E6 0F       	and	a,0x0f
2356  0A23  87          	add	a, a
2357  0A24  57          	ld	d, a
2358  0A25  4E          	ld	c, (hl)
2359  0A26  23          	inc	hl
2360  0A27  5E          	ld	e, (hl)
2361  0A28  06 04       	ld	b,0x04
2362  0A2A  79          	ld	a,c
2363  0A2B              l_player_hit_platform_00238:
2364  0A2B  CB 3B       	srl	e
2365  0A2D  1F          	rra
2366  0A2E  10 FB       	djnz	l_player_hit_platform_00238
2367  0A30  07          	rlca
2368  0A31  07          	rlca
2369  0A32  07          	rlca
2370  0A33  07          	rlca
2371  0A34  E6 F0       	and	a,0xf0
2372  0A36  47          	ld	b, a
2373  0A37  21 00 00    	ld	hl,0x0000
2374  0A3A  E5          	push	hl
2375  0A3B  21 87 03    	ld	hl,0x0387
2376  0A3E  E5          	push	hl
2377  0A3F  58          	ld	e,b
2378  0A40  D5          	push	de
2379  0A41  CD 00 00    	call	_spr_add_anim
2380  0A44  F1          	pop	af
2381  0A45  F1          	pop	af
2382  0A46  F1          	pop	af
2383  0A47  2E 01       	ld	l,0x01
2384  0A49  C3 E1 0B    	jp	l_player_hit_platform_00142
2385  0A4C              l_player_hit_platform_00114:
2386  0A4C  FE 5C       	cp	a,0x5c
2387  0A4E  28 05       	jr	Z,l_player_hit_platform_00135
2388  0A50  D6 5D       	sub	a,0x5d
2389  0A52  C2 D3 0B    	jp	NZ,l_player_hit_platform_00136
2390  0A55              l_player_hit_platform_00135:
2391  0A55  21 00 00    	ld	hl,_tmp0
2392  0A58  36 00       	ld	(hl),0x00
2393  0A5A              l_player_hit_platform_00132:
2394  0A5A  21 00 00    	ld	hl,_tmp0
2395  0A5D  7E          	ld	a, (hl)
2396  0A5E  D6 07       	sub	a,0x07
2397  0A60  D2 D3 0B    	jp	NC, l_player_hit_platform_00136
2398  0A63  4E          	ld	c,(hl)
2399  0A64  06 00       	ld	b,0x00
2400  0A66  21 00 00    	ld	hl,_mush_index
2401  0A69  09          	add	hl,bc
2402  0A6A  4E          	ld	c, (hl)
2403  0A6B  06 00       	ld	b,0x00
2404  0A6D  2A 00 00    	ld	hl,(_index1)
2405  0A70  AF          	xor	a,a
2406  0A71  ED 42       	sbc	hl,bc
2407  0A73  C2 CC 0B    	jp	NZ,l_player_hit_platform_00131
2408  0A76  2A 00 00    	ld	hl,(_sprite)
2409  0A79  26 00       	ld	h,0x00
2410  0A7B  01 00 00    	ld	bc,_lin
2411  0A7E  09          	add	hl,bc
2412  0A7F  7E          	ld	a,(hl)
2413  0A80  07          	rlca
2414  0A81  07          	rlca
2415  0A82  07          	rlca
2416  0A83  07          	rlca
2417  0A84  E6 0F       	and	a,0x0f
2418  0A86  07          	rlca
2419  0A87  07          	rlca
2420  0A88  07          	rlca
2421  0A89  07          	rlca
2422  0A8A  E6 F0       	and	a,0xf0
2423  0A8C  C6 E0       	add	a,0xe0
2424  0A8E  32 00 00    	ld	(_s_lin1),a
2425  0A91  2A 00 00    	ld	hl,(_sprite)
2426  0A94  26 00       	ld	h,0x00
2427  0A96  01 00 00    	ld	bc,_col
2428  0A99  09          	add	hl,bc
2429  0A9A  7E          	ld	a,(hl)
2430  0A9B  CB 3F       	srl	a
2431  0A9D  87          	add	a, a
2432  0A9E  32 00 00    	ld	(_s_col1),a
2433  0AA1  21 00 00    	ld	hl,_tmp
2434  0AA4  36 00       	ld	(hl),0x00
2435  0AA6              l_player_hit_platform_00117:
2436  0AA6  21 00 00    	ld	hl,_tmp
2437  0AA9  7E          	ld	a, (hl)
2438  0AAA  D6 07       	sub	a,0x07
2439  0AAC  30 1C       	jr	NC,l_player_hit_platform_00119
2440  0AAE  4E          	ld	c,(hl)
2441  0AAF  06 00       	ld	b,0x00
2442  0AB1  21 00 00    	ld	hl,_mush_index
2443  0AB4  09          	add	hl,bc
2444  0AB5  4E          	ld	c, (hl)
2445  0AB6  06 00       	ld	b,0x00
2446  0AB8  21 00 00    	ld	hl,_index1
2447  0ABB  7E          	ld	a, (hl)
2448  0ABC  91          	sub	a, c
2449  0ABD  20 05       	jr	NZ,l_player_hit_platform_00244
2450  0ABF  23          	inc	hl
2451  0AC0  7E          	ld	a, (hl)
2452  0AC1  90          	sub	a, b
2453  0AC2  28 06       	jr	Z,l_player_hit_platform_00119
2454  0AC4              l_player_hit_platform_00244:
2455  0AC4  21 00 00    	ld	hl,_tmp
2456  0AC7  34          	inc	(hl)
2457  0AC8  18 DC       	jr	l_player_hit_platform_00117
2458  0ACA              l_player_hit_platform_00119:
2459  0ACA  2A 00 00    	ld	hl,(_tmp)
2460  0ACD  26 00       	ld	h,0x00
2461  0ACF  01 00 00    	ld	bc,_mush_class
2462  0AD2  09          	add	hl,bc
2463  0AD3  7E          	ld	a,(hl)
2464  0AD4  FE 78       	cp	a,0x78
2465  0AD6  28 18       	jr	Z,l_player_hit_platform_00120
2466  0AD8  FE 79       	cp	a,0x79
2467  0ADA  28 2F       	jr	Z,l_player_hit_platform_00121
2468  0ADC  FE 7A       	cp	a,0x7a
2469  0ADE  28 5F       	jr	Z,l_player_hit_platform_00123
2470  0AE0  FE 7B       	cp	a,0x7b
2471  0AE2  28 41       	jr	Z,l_player_hit_platform_00122
2472  0AE4  FE 7C       	cp	a,0x7c
2473  0AE6  CA 73 0B    	jp	Z,l_player_hit_platform_00125
2474  0AE9  D6 7D       	sub	a,0x7d
2475  0AEB  28 6C       	jr	Z,l_player_hit_platform_00124
2476  0AED  C3 8B 0B    	jp	l_player_hit_platform_00126
2477  0AF0              l_player_hit_platform_00120:
2478  0AF0  2E 02       	ld	l,0x02
2479  0AF2  CD 00 00    	call	_zx_border_fastcall
2480  0AF5  3A 00 00    	ld	a,(_s_col1)
2481  0AF8  21 06 FF    	ld	hl,0xff06
2482  0AFB  E5          	push	hl
2483  0AFC  F5          	push	af
2484  0AFD  33          	inc	sp
2485  0AFE  3A 00 00    	ld	a,(_s_lin1)
2486  0B01  F5          	push	af
2487  0B02  33          	inc	sp
2488  0B03  CD 00 00    	call	_enemy_init
2489  0B06  F1          	pop	af
2490  0B07  F1          	pop	af
2491  0B08  C3 8B 0B    	jp	l_player_hit_platform_00126
2492  0B0B              l_player_hit_platform_00121:
2493  0B0B  2E 02       	ld	l,0x02
2494  0B0D  CD 00 00    	call	_zx_border_fastcall
2495  0B10  3A 00 00    	ld	a,(_s_col1)
2496  0B13  21 06 01    	ld	hl,0x0106
2497  0B16  E5          	push	hl
2498  0B17  F5          	push	af
2499  0B18  33          	inc	sp
2500  0B19  3A 00 00    	ld	a,(_s_lin1)
2501  0B1C  F5          	push	af
2502  0B1D  33          	inc	sp
2503  0B1E  CD 00 00    	call	_enemy_init
2504  0B21  F1          	pop	af
2505  0B22  F1          	pop	af
2506  0B23  18 66       	jr	l_player_hit_platform_00126
2507  0B25              l_player_hit_platform_00122:
2508  0B25  2E 01       	ld	l,0x01
2509  0B27  CD 00 00    	call	_zx_border_fastcall
2510  0B2A  3A 00 00    	ld	a,(_s_col1)
2511  0B2D  21 07 01    	ld	hl,0x0107
2512  0B30  E5          	push	hl
2513  0B31  F5          	push	af
2514  0B32  33          	inc	sp
2515  0B33  3A 00 00    	ld	a,(_s_lin1)
2516  0B36  F5          	push	af
2517  0B37  33          	inc	sp
2518  0B38  CD 00 00    	call	_enemy_init
2519  0B3B  F1          	pop	af
2520  0B3C  F1          	pop	af
2521  0B3D  18 4C       	jr	l_player_hit_platform_00126
2522  0B3F              l_player_hit_platform_00123:
2523  0B3F  2E 01       	ld	l,0x01
2524  0B41  CD 00 00    	call	_zx_border_fastcall
2525  0B44  3A 00 00    	ld	a,(_s_col1)
2526  0B47  21 07 FF    	ld	hl,0xff07
2527  0B4A  E5          	push	hl
2528  0B4B  F5          	push	af
2529  0B4C  33          	inc	sp
2530  0B4D  3A 00 00    	ld	a,(_s_lin1)
2531  0B50  F5          	push	af
2532  0B51  33          	inc	sp
2533  0B52  CD 00 00    	call	_enemy_init
2534  0B55  F1          	pop	af
2535  0B56  F1          	pop	af
2536  0B57  18 32       	jr	l_player_hit_platform_00126
2537  0B59              l_player_hit_platform_00124:
2538  0B59  2E 04       	ld	l,0x04
2539  0B5B  CD 00 00    	call	_zx_border_fastcall
2540  0B5E  3A 00 00    	ld	a,(_s_col1)
2541  0B61  21 08 01    	ld	hl,0x0108
2542  0B64  E5          	push	hl
2543  0B65  F5          	push	af
2544  0B66  33          	inc	sp
2545  0B67  3A 00 00    	ld	a,(_s_lin1)
2546  0B6A  F5          	push	af
2547  0B6B  33          	inc	sp
2548  0B6C  CD 00 00    	call	_enemy_init
2549  0B6F  F1          	pop	af
2550  0B70  F1          	pop	af
2551  0B71  18 18       	jr	l_player_hit_platform_00126
2552  0B73              l_player_hit_platform_00125:
2553  0B73  2E 04       	ld	l,0x04
2554  0B75  CD 00 00    	call	_zx_border_fastcall
2555  0B78  3A 00 00    	ld	a,(_s_col1)
2556  0B7B  21 08 FF    	ld	hl,0xff08
2557  0B7E  E5          	push	hl
2558  0B7F  F5          	push	af
2559  0B80  33          	inc	sp
2560  0B81  3A 00 00    	ld	a,(_s_lin1)
2561  0B84  F5          	push	af
2562  0B85  33          	inc	sp
2563  0B86  CD 00 00    	call	_enemy_init
2564  0B89  F1          	pop	af
2565  0B8A  F1          	pop	af
2566  0B8B              l_player_hit_platform_00126:
2567  0B8B  2A 00 00    	ld	hl,(_index1)
2568  0B8E  01 F0 FF    	ld	bc,0xfff0
2569  0B91  09          	add	hl,bc
2570  0B92  01 00 00    	ld	bc,_scr_map
2571  0B95  09          	add	hl,bc
2572  0B96  36 00       	ld	(hl),0x00
2573  0B98  01 00 00    	ld	bc,_scr_map
2574  0B9B  2A 00 00    	ld	hl,(_index1)
2575  0B9E  09          	add	hl,bc
2576  0B9F  7E          	ld	a,(hl)
2577  0BA0  D6 5C       	sub	a,0x5c
2578  0BA2  4D          	ld	c,l
2579  0BA3  44          	ld	b,h
2580  0BA4  20 05       	jr	NZ,l_player_hit_platform_00128
2581  0BA6  3E 4F       	ld	a,0x4f
2582  0BA8  02          	ld	(bc), a
2583  0BA9  18 03       	jr	l_player_hit_platform_00129
2584  0BAB              l_player_hit_platform_00128:
2585  0BAB  3E 54       	ld	a,0x54
2586  0BAD  02          	ld	(bc), a
2587  0BAE              l_player_hit_platform_00129:
2588  0BAE  2A 00 00    	ld	hl,(_index1)
2589  0BB1  01 F0 FF    	ld	bc,0xfff0
2590  0BB4  09          	add	hl,bc
2591  0BB5  E5          	push	hl
2592  0BB6  CD 00 00    	call	_game_obj_set
2593  0BB9  F1          	pop	af
2594  0BBA  3A 00 00    	ld	a,(_s_lin1)
2595  0BBD  C6 10       	add	a,0x10
2596  0BBF  4F          	ld	c, a
2597  0BC0  3A 00 00    	ld	a, (_s_col1)
2598  0BC3  47          	ld	b,a
2599  0BC4  C5          	push	bc
2600  0BC5  3E 4F       	ld	a,0x4f
2601  0BC7  F5          	push	af
2602  0BC8  33          	inc	sp
2603  0BC9  CD 00 00    	call	_NIRVANAP_drawT_callee
2604  0BCC              l_player_hit_platform_00131:
2605  0BCC  21 00 00    	ld	hl,_tmp0
2606  0BCF  34          	inc	(hl)
2607  0BD0  C3 5A 0A    	jp	l_player_hit_platform_00132
2608  0BD3              l_player_hit_platform_00136:
2609  0BD3  2E 01       	ld	l,0x01
2610  0BD5  CD 00 00    	call	_spr_brick_anim
2611  0BD8  CD 00 00    	call	_sound_hit_brick
2612  0BDB  2E 01       	ld	l,0x01
2613  0BDD  18 02       	jr	l_player_hit_platform_00142
2614  0BDF              l_player_hit_platform_00139:
2615  0BDF  2E 00       	ld	l,0x00
2616  0BE1              l_player_hit_platform_00142:
2617  0BE1  C9          	ret
2618  0BE2              	SECTION code_compiler
2619  0BE2              ;	---------------------------------
2620  0BE2              ; Function player_hit_platform_clear
2621  0BE2              ; ---------------------------------
2622  0BE2              _player_hit_platform_clear:
2623  0BE2  2A 00 00    	ld	hl,(_sprite)
2624  0BE5  26 00       	ld	h,0x00
2625  0BE7  29          	add	hl, hl
2626  0BE8  11 00 00    	ld	de,_spr_timer
2627  0BEB  19          	add	hl, de
2628  0BEC  4E          	ld	c, (hl)
2629  0BED  23          	inc	hl
2630  0BEE  46          	ld	b, (hl)
2631  0BEF  21 04 00    	ld	hl,0x0004
2632  0BF2  E5          	push	hl
2633  0BF3  C5          	push	bc
2634  0BF4  CD 00 00    	call	_game_check_time
2635  0BF7  F1          	pop	af
2636  0BF8  F1          	pop	af
2637  0BF9  7D          	ld	a, l
2638  0BFA  B7          	or	a, a
2639  0BFB  C8          	ret	Z
2640  0BFC  2A FF FF    	ld	hl,(_player_hit_col - 1)
2641  0BFF  3A 00 00    	ld	a,(_player_hit_lin)
2642  0C02  6F          	ld	l,a
2643  0C03  E5          	push	hl
2644  0C04  CD 00 00    	call	_spr_calc_index
2645  0C07  F1          	pop	af
2646  0C08  22 00 00    	ld	(_index1),hl
2647  0C0B  2E 00       	ld	l,0x00
2648  0C0D  CD 00 00    	call	_spr_brick_anim
2649  0C10  21 00 00    	ld	hl,_player_hit_lin
2650  0C13  36 00       	ld	(hl),0x00
2651  0C15  21 00 00    	ld	hl,_player_hit_col
2652  0C18  36 00       	ld	(hl),0x00
2653  0C1A  C9          	ret
2654  0C1B              	SECTION code_compiler
2655  0C1B              ;	---------------------------------
2656  0C1B              ; Function player_score_add
2657  0C1B              ; ---------------------------------
2658  0C1B              _player_score_add:
2659  0C1B  ED 4B 00 00 	ld	bc,(_player_score)
2660  0C1F  09          	add	hl,bc
2661  0C20  22 00 00    	ld	(_player_score),hl
2662  0C23  21 00 00    	ld	hl,_player_lvl
2663  0C26  7E          	ld	a, (hl)
2664  0C27  D6 14       	sub	a,0x14
2665  0C29  30 3C       	jr	NC,l_player_score_add_00104
2666  0C2B  01 00 00    	ld	bc,_player_lvl_table+0
2667  0C2E  6E          	ld	l,(hl)
2668  0C2F  26 00       	ld	h,0x00
2669  0C31  29          	add	hl, hl
2670  0C32  09          	add	hl, bc
2671  0C33  4E          	ld	c, (hl)
2672  0C34  23          	inc	hl
2673  0C35  46          	ld	b, (hl)
2674  0C36  21 00 00    	ld	hl,_player_score
2675  0C39  7E          	ld	a, (hl)
2676  0C3A  91          	sub	a, c
2677  0C3B  23          	inc	hl
2678  0C3C  7E          	ld	a, (hl)
2679  0C3D  98          	sbc	a, b
2680  0C3E  38 27       	jr	C,l_player_score_add_00104
2681  0C40  21 00 00    	ld	hl,_player_lvl
2682  0C43  34          	inc	(hl)
2683  0C44  21 02 00    	ld	hl,___str_1
2684  0C47  E5          	push	hl
2685  0C48  21 0C 0C    	ld	hl,0x0c0c
2686  0C4B  E5          	push	hl
2687  0C4C  CD 00 00    	call	_zx_print_str
2688  0C4F  AF          	xor	a, a
2689  0C50  F5          	push	af
2690  0C51  33          	inc	sp
2691  0C52  21 19 00    	ld	hl,0x0019
2692  0C55  E5          	push	hl
2693  0C56  21 0C 15    	ld	hl,0x150c
2694  0C59  E5          	push	hl
2695  0C5A  3E 0C       	ld	a,0x0c
2696  0C5C  F5          	push	af
2697  0C5D  33          	inc	sp
2698  0C5E  CD 00 00    	call	_game_colour_message
2699  0C61  F1          	pop	af
2700  0C62  F1          	pop	af
2701  0C63  F1          	pop	af
2702  0C64  CD 00 00    	call	_game_update_stats
2703  0C67              l_player_score_add_00104:
2704  0C67  3A 00 00    	ld	a,(_game_score_top)
2705  0C6A  21 00 00    	ld	hl,_player_score
2706  0C6D  96          	sub	a, (hl)
2707  0C6E  3A 01 00    	ld	a,(_game_score_top + 1)
2708  0C71  23          	inc	hl
2709  0C72  9E          	sbc	a, (hl)
2710  0C73  30 06       	jr	NC,l_player_score_add_00106
2711  0C75  2A 00 00    	ld	hl,(_player_score)
2712  0C78  22 00 00    	ld	(_game_score_top),hl
2713  0C7B              l_player_score_add_00106:
2714  0C7B  CD 00 00    	call	_game_print_score
2715  0C7E  C9          	ret
2716  0C7F              	SECTION rodata_compiler
2717  0002              ___str_1:
2718  0002  4C 45 56 45 4C 20 55 50 21 
                        	DEFM "LEVEL UP!"
2719  000B  00          	DEFB 0x00
2720  000C              	SECTION code_compiler
2721  0C7F              ;	---------------------------------
2722  0C7F              ; Function player_check_floor
2723  0C7F              ; ---------------------------------
2724  0C7F              _player_check_floor:
2725  0C7F  CD 00 00    	call	___sdcc_enter_ix
2726  0C82  3B          	dec	sp
2727  0C83  2A 00 00    	ld	hl,(_sprite)
2728  0C86  26 00       	ld	h,0x00
2729  0C88  01 00 00    	ld	bc,_col
2730  0C8B  09          	add	hl,bc
2731  0C8C  56          	ld	d, (hl)
2732  0C8D  2A 00 00    	ld	hl,(_sprite)
2733  0C90  26 00       	ld	h,0x00
2734  0C92  01 00 00    	ld	bc,_lin
2735  0C95  09          	add	hl,bc
2736  0C96  7E          	ld	a,(hl)
2737  0C97  C6 10       	add	a,0x10
2738  0C99  5F          	ld	e, a
2739  0C9A  D5          	push	de
2740  0C9B  CD 00 00    	call	_spr_calc_index
2741  0C9E  F1          	pop	af
2742  0C9F  4D          	ld	c, l
2743  0CA0  44          	ld	b, h
2744  0CA1  21 00 00    	ld	hl,_scr_map
2745  0CA4  09          	add	hl, bc
2746  0CA5  7E          	ld	a, (hl)
2747  0CA6  DD 77 FF    	ld	(ix-1),a
2748  0CA9  2A 00 00    	ld	hl,(_sprite)
2749  0CAC  26 00       	ld	h,0x00
2750  0CAE  11 00 00    	ld	de,_col
2751  0CB1  19          	add	hl,de
2752  0CB2  7E          	ld	a,(hl)
2753  0CB3  0F          	rrca
2754  0CB4  38 04       	jr	C,l_player_check_floor_00102
2755  0CB6  0E 01       	ld	c,0x01
2756  0CB8  18 06       	jr	l_player_check_floor_00103
2757  0CBA              l_player_check_floor_00102:
2758  0CBA  03          	inc	bc
2759  0CBB  21 00 00    	ld	hl,_scr_map
2760  0CBE  09          	add	hl, bc
2761  0CBF  4E          	ld	c, (hl)
2762  0CC0              l_player_check_floor_00103:
2763  0CC0  3A 00 00    	ld	a,(_s_lin0)
2764  0CC3  D6 90       	sub	a,0x90
2765  0CC5  20 04       	jr	NZ,l_player_check_floor_00105
2766  0CC7  DD 36 FF 48 	ld	(ix-1),0x48
2767  0CCB              l_player_check_floor_00105:
2768  0CCB  DD 7E FF    	ld	a,(ix-1)
2769  0CCE  D6 3C       	sub	a,0x3c
2770  0CD0  38 07       	jr	C,l_player_check_floor_00110
2771  0CD2  DD 7E FF    	ld	a,(ix-1)
2772  0CD5  D6 60       	sub	a,0x60
2773  0CD7  38 1E       	jr	C,l_player_check_floor_00111
2774  0CD9              l_player_check_floor_00110:
2775  0CD9  79          	ld	a,c
2776  0CDA  FE 3C       	cp	a,0x3c
2777  0CDC  38 04       	jr	C,l_player_check_floor_00106
2778  0CDE  D6 60       	sub	a,0x60
2779  0CE0  38 15       	jr	C,l_player_check_floor_00111
2780  0CE2              l_player_check_floor_00106:
2781  0CE2  2A 00 00    	ld	hl,(_sprite)
2782  0CE5  26 00       	ld	h,0x00
2783  0CE7  01 00 00    	ld	bc,_sprite_speed_alt
2784  0CEA  09          	add	hl,bc
2785  0CEB  36 02       	ld	(hl),0x02
2786  0CED  21 00 00    	ld	hl,_s_state
2787  0CF0  CB CE       	set	1, (hl)
2788  0CF2  2E 00       	ld	l,0x00
2789  0CF4  CD 9C 04    	call	_player_check_stairs
2790  0CF7              l_player_check_floor_00111:
2791  0CF7  33          	inc	sp
2792  0CF8  DD E1       	pop	ix
2793  0CFA  C9          	ret
2794  0CFB              	SECTION code_compiler
2795  0CFB              ;	---------------------------------
2796  0CFB              ; Function player_move_jump
2797  0CFB              ; ---------------------------------
2798  0CFB              _player_move_jump:
2799  0CFB  CD 00 00    	call	___sdcc_enter_ix
2800  0CFE  3B          	dec	sp
2801  0CFF  21 00 00    	ld	hl,_game_gravity
2802  0D02  4E          	ld	c, (hl)
2803  0D03  21 00 00    	ld	hl,_player_vel_y
2804  0D06  7E          	ld	a, (hl)
2805  0D07  81          	add	a, c
2806  0D08  77          	ld	(hl), a
2807  0D09  21 00 00    	ld	hl,_sprite_on_air
2808  0D0C  36 01       	ld	(hl),0x01
2809  0D0E  3A 00 00    	ld	a,(_player_vel_inc)
2810  0D11  B7          	or	a, a
2811  0D12  28 24       	jr	Z,l_player_move_jump_00106
2812  0D14  21 00 00    	ld	hl,_dirs
2813  0D17  CB 7E       	bit	7, (hl)
2814  0D19  20 1D       	jr	NZ,l_player_move_jump_00106
2815  0D1B  3A 00 00    	ld	a,(_player_vel_y1)
2816  0D1E  21 00 00    	ld	hl,_player_vel_y
2817  0D21  96          	sub	a, (hl)
2818  0D22  E2 27 0D    	jp	PO, l_player_move_jump_00247
2819  0D25  EE 80       	xor	a,0x80
2820  0D27              l_player_move_jump_00247:
2821  0D27  F2 38 0D    	jp	P, l_player_move_jump_00106
2822  0D2A  21 00 00    	ld	hl,_player_vel_y
2823  0D2D  CB 7E       	bit	7,(hl)
2824  0D2F  28 07       	jr	Z,l_player_move_jump_00106
2825  0D31  36 00       	ld	(hl),0x00
2826  0D33  21 00 00    	ld	hl,_player_vel_inc
2827  0D36  36 00       	ld	(hl),0x00
2828  0D38              l_player_move_jump_00106:
2829  0D38  3E 78       	ld	a,0x78
2830  0D3A  21 00 00    	ld	hl,_player_vel_y
2831  0D3D  96          	sub	a, (hl)
2832  0D3E  E2 43 0D    	jp	PO, l_player_move_jump_00248
2833  0D41  EE 80       	xor	a,0x80
2834  0D43              l_player_move_jump_00248:
2835  0D43  F2 4B 0D    	jp	P, l_player_move_jump_00108
2836  0D46  21 00 00    	ld	hl,_player_vel_y
2837  0D49  36 78       	ld	(hl),0x78
2838  0D4B              l_player_move_jump_00108:
2839  0D4B  21 00 00    	ld	hl,_player_vel_y
2840  0D4E  7E          	ld	a, (hl)
2841  0D4F  EE 80       	xor	a,0x80
2842  0D51  D6 08       	sub	a,0x08
2843  0D53  30 02       	jr	NC,l_player_move_jump_00110
2844  0D55  36 88       	ld	(hl),0x88
2845  0D57              l_player_move_jump_00110:
2846  0D57  3A 00 00    	ld	a,(_player_vel_y)
2847  0D5A  5F          	ld	e,a
2848  0D5B  17          	rla
2849  0D5C  9F          	sbc	a, a
2850  0D5D  57          	ld	d, a
2851  0D5E  CB 43       	bit	0,e
2852  0D60  21 00 00    	ld	hl,_s_lin1
2853  0D63  73          	ld	(hl),e
2854  0D64  28 04       	jr	Z,l_player_move_jump_00112
2855  0D66  21 00 00    	ld	hl,_s_lin1
2856  0D69  35          	dec	(hl)
2857  0D6A              l_player_move_jump_00112:
2858  0D6A  2A 00 00    	ld	hl,(_sprite)
2859  0D6D  26 00       	ld	h,0x00
2860  0D6F  01 00 00    	ld	bc,_lin
2861  0D72  09          	add	hl,bc
2862  0D73  7E          	ld	a,(hl)
2863  0D74  DD 77 FF    	ld	(ix-1),a
2864  0D77  4D          	ld	c,l
2865  0D78  44          	ld	b,h
2866  0D79  21 00 00    	ld	hl,_s_lin1
2867  0D7C  86          	add	a, (hl)
2868  0D7D  77          	ld	(hl), a
2869  0D7E  3E 90       	ld	a,0x90
2870  0D80  96          	sub	a, (hl)
2871  0D81  30 0E       	jr	NC,l_player_move_jump_00117
2872  0D83  3E C8       	ld	a,0xc8
2873  0D85  96          	sub	a, (hl)
2874  0D86  30 04       	jr	NC,l_player_move_jump_00114
2875  0D88  36 00       	ld	(hl),0x00
2876  0D8A  18 05       	jr	l_player_move_jump_00117
2877  0D8C              l_player_move_jump_00114:
2878  0D8C  21 00 00    	ld	hl,_s_lin1
2879  0D8F  36 90       	ld	(hl),0x90
2880  0D91              l_player_move_jump_00117:
2881  0D91  3A 00 00    	ld	a,(_s_lin0)
2882  0D94  07          	rlca
2883  0D95  07          	rlca
2884  0D96  07          	rlca
2885  0D97  07          	rlca
2886  0D98  E6 0F       	and	a,0x0f
2887  0D9A  DD 77 FF    	ld	(ix-1),a
2888  0D9D  CB 7A       	bit	7, d
2889  0D9F  28 73       	jr	Z,l_player_move_jump_00140
2890  0DA1  21 00 00    	ld	hl,_s_state
2891  0DA4  7E          	ld	a,(hl)
2892  0DA5  F6 01       	or	a,0x01
2893  0DA7  E6 FD       	and	a,0xfd
2894  0DA9  77          	ld	(hl),a
2895  0DAA  21 00 00    	ld	hl,_s_lin1
2896  0DAD  DD 7E FF    	ld	a,(ix-1)
2897  0DB0  96          	sub	a,(hl)
2898  0DB1  20 04       	jr	NZ,l_player_move_jump_00250
2899  0DB3  3E 01       	ld	a,0x01
2900  0DB5  18 01       	jr	l_player_move_jump_00251
2901  0DB7              l_player_move_jump_00250:
2902  0DB7  AF          	xor	a,a
2903  0DB8              l_player_move_jump_00251:
2904  0DB8  EE 01       	xor	a,0x01
2905  0DBA  28 51       	jr	Z,l_player_move_jump_00124
2906  0DBC  2A 00 00    	ld	hl,(_sprite)
2907  0DBF  26 00       	ld	h,0x00
2908  0DC1  01 00 00    	ld	bc,_col
2909  0DC4  09          	add	hl,bc
2910  0DC5  7E          	ld	a,(hl)
2911  0DC6  F5          	push	af
2912  0DC7  33          	inc	sp
2913  0DC8  3A 00 00    	ld	a,(_s_lin1)
2914  0DCB  F5          	push	af
2915  0DCC  33          	inc	sp
2916  0DCD  CD 00 00    	call	_game_check_map
2917  0DD0  F1          	pop	af
2918  0DD1  7C          	ld	a,h
2919  0DD2  B5          	or	a,l
2920  0DD3  28 28       	jr	Z,l_player_move_jump_00121
2921  0DD5  CD 63 09    	call	_player_hit_platform
2922  0DD8  7D          	ld	a, l
2923  0DD9  B7          	or	a, a
2924  0DDA  28 19       	jr	Z,l_player_move_jump_00119
2925  0DDC  2A 00 00    	ld	hl,(_sprite)
2926  0DDF  26 00       	ld	h,0x00
2927  0DE1  01 00 00    	ld	bc,_lin
2928  0DE4  09          	add	hl,bc
2929  0DE5  7E          	ld	a,(hl)
2930  0DE6  4D          	ld	c,l
2931  0DE7  44          	ld	b,h
2932  0DE8  07          	rlca
2933  0DE9  07          	rlca
2934  0DEA  07          	rlca
2935  0DEB  07          	rlca
2936  0DEC  E6 0F       	and	a,0x0f
2937  0DEE  07          	rlca
2938  0DEF  07          	rlca
2939  0DF0  07          	rlca
2940  0DF1  07          	rlca
2941  0DF2  E6 F0       	and	a,0xf0
2942  0DF4  02          	ld	(bc), a
2943  0DF5              l_player_move_jump_00119:
2944  0DF5  21 00 00    	ld	hl,_player_vel_y
2945  0DF8  36 00       	ld	(hl),0x00
2946  0DFA  C3 D4 0E    	jp	l_player_move_jump_00141
2947  0DFD              l_player_move_jump_00121:
2948  0DFD  2A 00 00    	ld	hl,(_sprite)
2949  0E00  26 00       	ld	h,0x00
2950  0E02  01 00 00    	ld	bc,_lin
2951  0E05  09          	add	hl,bc
2952  0E06  3A 00 00    	ld	a,(_s_lin1)
2953  0E09  77          	ld	(hl),a
2954  0E0A  C3 D4 0E    	jp	l_player_move_jump_00141
2955  0E0D              l_player_move_jump_00124:
2956  0E0D  3A 00 00    	ld	a,(_s_lin1)
2957  0E10  02          	ld	(bc), a
2958  0E11  C3 D4 0E    	jp	l_player_move_jump_00141
2959  0E14              l_player_move_jump_00140:
2960  0E14  21 00 00    	ld	hl,_s_state
2961  0E17  7E          	ld	a,(hl)
2962  0E18  F6 02       	or	a,0x02
2963  0E1A  E6 FE       	and	a,0xfe
2964  0E1C  77          	ld	(hl),a
2965  0E1D  21 00 00    	ld	hl,_s_lin1
2966  0E20  7E          	ld	a, (hl)
2967  0E21  C6 10       	add	a,0x10
2968  0E23  77          	ld	(hl), a
2969  0E24  DD 7E FF    	ld	a,(ix-1)
2970  0E27  96          	sub	a,(hl)
2971  0E28  20 04       	jr	NZ,l_player_move_jump_00252
2972  0E2A  3E 01       	ld	a,0x01
2973  0E2C  18 01       	jr	l_player_move_jump_00253
2974  0E2E              l_player_move_jump_00252:
2975  0E2E  AF          	xor	a,a
2976  0E2F              l_player_move_jump_00253:
2977  0E2F  EE 01       	xor	a,0x01
2978  0E31  CA CC 0E    	jp	Z, l_player_move_jump_00137
2979  0E34  2A 00 00    	ld	hl,(_sprite)
2980  0E37  26 00       	ld	h,0x00
2981  0E39  01 00 00    	ld	bc,_col
2982  0E3C  09          	add	hl,bc
2983  0E3D  7E          	ld	a,(hl)
2984  0E3E  F5          	push	af
2985  0E3F  33          	inc	sp
2986  0E40  3A 00 00    	ld	a,(_s_lin1)
2987  0E43  F5          	push	af
2988  0E44  33          	inc	sp
2989  0E45  CD 00 00    	call	_game_check_map
2990  0E48  F1          	pop	af
2991  0E49  45          	ld	b, l
2992  0E4A  5C          	ld	e, h
2993  0E4B  21 00 00    	ld	hl,_s_lin1
2994  0E4E  7E          	ld	a, (hl)
2995  0E4F  C6 F0       	add	a,0xf0
2996  0E51  4F          	ld	c, a
2997  0E52  7B          	ld	a, e
2998  0E53  B0          	or	a,b
2999  0E54  28 63       	jr	Z,l_player_move_jump_00134
3000  0E56  71          	ld	(hl), c
3001  0E57  2E 00       	ld	l,0x00
3002  0E59  CD 9C 04    	call	_player_check_stairs
3003  0E5C  3A 00 00    	ld	a,(_player_over_stair)
3004  0E5F  B7          	or	a, a
3005  0E60  20 05       	jr	NZ,l_player_move_jump_00127
3006  0E62  2E 01       	ld	l,0x01
3007  0E64  CD 9C 04    	call	_player_check_stairs
3008  0E67              l_player_move_jump_00127:
3009  0E67  3A 00 00    	ld	a,(_player_over_stair)
3010  0E6A  B7          	or	a, a
3011  0E6B  20 31       	jr	NZ,l_player_move_jump_00132
3012  0E6D  21 00 00    	ld	hl,_s_lin1
3013  0E70  7E          	ld	a, (hl)
3014  0E71  07          	rlca
3015  0E72  07          	rlca
3016  0E73  07          	rlca
3017  0E74  07          	rlca
3018  0E75  E6 0F       	and	a,0x0f
3019  0E77  07          	rlca
3020  0E78  07          	rlca
3021  0E79  07          	rlca
3022  0E7A  07          	rlca
3023  0E7B  E6 F0       	and	a,0xf0
3024  0E7D  77          	ld	(hl), a
3025  0E7E  2A 00 00    	ld	hl,(_sprite)
3026  0E81  26 00       	ld	h,0x00
3027  0E83  01 00 00    	ld	bc,_lin
3028  0E86  09          	add	hl,bc
3029  0E87  5E          	ld	e,(hl)
3030  0E88  4D          	ld	c,l
3031  0E89  44          	ld	b,h
3032  0E8A  21 00 00    	ld	hl,_s_lin1
3033  0E8D  7E          	ld	a, (hl)
3034  0E8E  93          	sub	a, e
3035  0E8F  30 09       	jr	NC,l_player_move_jump_00129
3036  0E91  7E          	ld	a, (hl)
3037  0E92  C6 10       	add	a,0x10
3038  0E94  02          	ld	(bc), a
3039  0E95  2E 00       	ld	l,0x00
3040  0E97  C3 1C 0F    	jp	l_player_move_jump_00151
3041  0E9A              l_player_move_jump_00129:
3042  0E9A  3A 00 00    	ld	a,(_s_lin1)
3043  0E9D  02          	ld	(bc), a
3044  0E9E              l_player_move_jump_00132:
3045  0E9E  21 00 00    	ld	hl,_player_vel_y
3046  0EA1  36 00       	ld	(hl),0x00
3047  0EA3  21 00 00    	ld	hl,_s_state
3048  0EA6  7E          	ld	a,(hl)
3049  0EA7  E6 FC       	and	a,+(0xfd&0xfe)
3050  0EA9  77          	ld	(hl),a
3051  0EAA  2A 00 00    	ld	hl,(_sprite)
3052  0EAD  26 00       	ld	h,0x00
3053  0EAF  01 00 00    	ld	bc,_colint
3054  0EB2  09          	add	hl,bc
3055  0EB3  AF          	xor	a,a
3056  0EB4  77          	ld	(hl),a
3057  0EB5  2E 01       	ld	l,0x01
3058  0EB7  18 63       	jr	l_player_move_jump_00151
3059  0EB9              l_player_move_jump_00134:
3060  0EB9  21 00 00    	ld	hl,_s_lin1
3061  0EBC  71          	ld	(hl), c
3062  0EBD  2A 00 00    	ld	hl,(_sprite)
3063  0EC0  26 00       	ld	h,0x00
3064  0EC2  01 00 00    	ld	bc,_lin
3065  0EC5  09          	add	hl,bc
3066  0EC6  3A 00 00    	ld	a,(_s_lin1)
3067  0EC9  77          	ld	(hl),a
3068  0ECA  18 08       	jr	l_player_move_jump_00141
3069  0ECC              l_player_move_jump_00137:
3070  0ECC  21 00 00    	ld	hl,_s_lin1
3071  0ECF  7E          	ld	a, (hl)
3072  0ED0  C6 F0       	add	a,0xf0
3073  0ED2  77          	ld	(hl),a
3074  0ED3  02          	ld	(bc), a
3075  0ED4              l_player_move_jump_00141:
3076  0ED4  21 00 00    	ld	hl,_s_state
3077  0ED7  CB 5E       	bit	3, (hl)
3078  0ED9  20 27       	jr	NZ,l_player_move_jump_00147
3079  0EDB  21 00 00    	ld	hl,_s_state
3080  0EDE  CB 56       	bit	2, (hl)
3081  0EE0  20 20       	jr	NZ,l_player_move_jump_00147
3082  0EE2  21 00 00    	ld	hl,_dirs
3083  0EE5  CB 56       	bit	2, (hl)
3084  0EE7  28 09       	jr	Z,l_player_move_jump_00143
3085  0EE9  21 00 00    	ld	hl,_s_state
3086  0EEC  7E          	ld	a,(hl)
3087  0EED  F6 08       	or	a,0x08
3088  0EEF  E6 FB       	and	a,0xfb
3089  0EF1  77          	ld	(hl),a
3090  0EF2              l_player_move_jump_00143:
3091  0EF2  21 00 00    	ld	hl,_dirs
3092  0EF5  CB 5E       	bit	3, (hl)
3093  0EF7  28 09       	jr	Z,l_player_move_jump_00147
3094  0EF9  21 00 00    	ld	hl,_s_state
3095  0EFC  7E          	ld	a,(hl)
3096  0EFD  F6 04       	or	a,0x04
3097  0EFF  E6 F7       	and	a,0xf7
3098  0F01  77          	ld	(hl),a
3099  0F02              l_player_move_jump_00147:
3100  0F02  21 00 00    	ld	hl,_sprite_horizontal_check
3101  0F05  36 01       	ld	(hl),0x01
3102  0F07  CD 00 00    	call	_spr_move_horizontal
3103  0F0A  7D          	ld	a, l
3104  0F0B  B7          	or	a, a
3105  0F0C  28 07       	jr	Z,l_player_move_jump_00150
3106  0F0E  21 00 00    	ld	hl,_s_state
3107  0F11  7E          	ld	a,(hl)
3108  0F12  E6 F3       	and	a,+(0xf7&0xfb)
3109  0F14  77          	ld	(hl),a
3110  0F15              l_player_move_jump_00150:
3111  0F15  21 00 00    	ld	hl,_sprite_horizontal_check
3112  0F18  36 00       	ld	(hl),0x00
3113  0F1A  2E 00       	ld	l,0x00
3114  0F1C              l_player_move_jump_00151:
3115  0F1C  33          	inc	sp
3116  0F1D  DD E1       	pop	ix
3117  0F1F  C9          	ret
3118  0F20              	SECTION code_compiler
3119  0F20              ;	---------------------------------
3120  0F20              ; Function player_open_door
3121  0F20              ; ---------------------------------
3122  0F20              _player_open_door:
3123  0F20  CD 00 00    	call	___sdcc_enter_ix
3124  0F23  0E 00       	ld	c,0x00
3125  0F25  DD 7E 06    	ld	a,(ix+6)
3126  0F28  D6 48       	sub	a,0x48
3127  0F2A  28 17       	jr	Z,l_player_open_door_00101
3128  0F2C  DD 7E 06    	ld	a,(ix+6)
3129  0F2F  D6 49       	sub	a,0x49
3130  0F31  28 1F       	jr	Z,l_player_open_door_00104
3131  0F33  DD 7E 06    	ld	a,(ix+6)
3132  0F36  D6 4A       	sub	a,0x4a
3133  0F38  28 27       	jr	Z,l_player_open_door_00107
3134  0F3A  DD 7E 06    	ld	a,(ix+6)
3135  0F3D  D6 4B       	sub	a,0x4b
3136  0F3F  28 2F       	jr	Z,l_player_open_door_00110
3137  0F41  18 3A       	jr	l_player_open_door_00113
3138  0F43              l_player_open_door_00101:
3139  0F43  3A 00 00    	ld	a,(_player_keys)
3140  0F46  B7          	or	a, a
3141  0F47  28 34       	jr	Z,l_player_open_door_00113
3142  0F49  2E 07       	ld	l,0x07
3143  0F4B  CD 00 00    	call	_zx_border_fastcall
3144  0F4E  0E 01       	ld	c,0x01
3145  0F50  18 2B       	jr	l_player_open_door_00113
3146  0F52              l_player_open_door_00104:
3147  0F52  3A 01 00    	ld	a,(_player_keys + 0x0001)
3148  0F55  B7          	or	a, a
3149  0F56  28 25       	jr	Z,l_player_open_door_00113
3150  0F58  2E 02       	ld	l,0x02
3151  0F5A  CD 00 00    	call	_zx_border_fastcall
3152  0F5D  0E 01       	ld	c,0x01
3153  0F5F  18 1C       	jr	l_player_open_door_00113
3154  0F61              l_player_open_door_00107:
3155  0F61  3A 02 00    	ld	a,(_player_keys + 0x0002)
3156  0F64  B7          	or	a, a
3157  0F65  28 16       	jr	Z,l_player_open_door_00113
3158  0F67  2E 04       	ld	l,0x04
3159  0F69  CD 00 00    	call	_zx_border_fastcall
3160  0F6C  0E 01       	ld	c,0x01
3161  0F6E  18 0D       	jr	l_player_open_door_00113
3162  0F70              l_player_open_door_00110:
3163  0F70  3A 03 00    	ld	a,(_player_keys + 0x0003)
3164  0F73  B7          	or	a, a
3165  0F74  28 07       	jr	Z,l_player_open_door_00113
3166  0F76  2E 05       	ld	l,0x05
3167  0F78  CD 00 00    	call	_zx_border_fastcall
3168  0F7B  0E 01       	ld	c,0x01
3169  0F7D              l_player_open_door_00113:
3170  0F7D  79          	ld	a, c
3171  0F7E  B7          	or	a, a
3172  0F7F  20 06       	jr	NZ,l_player_open_door_00114
3173  0F81  3A 00 00    	ld	a,(_game_inmune)
3174  0F84  B7          	or	a, a
3175  0F85  28 24       	jr	Z,l_player_open_door_00117
3176  0F87              l_player_open_door_00114:
3177  0F87  3E 00       	ld	a, +((_scr_map) & 0xFF)
3178  0F89  DD 86 04    	add	a,(ix+4)
3179  0F8C  4F          	ld	c, a
3180  0F8D  3E 00       	ld	a, +((_scr_map) / 256)
3181  0F8F  DD 8E 05    	adc	a,(ix+5)
3182  0F92  47          	ld	b, a
3183  0F93  AF          	xor	a, a
3184  0F94  02          	ld	(bc), a
3185  0F95  DD 6E 04    	ld	l,(ix+4)
3186  0F98  DD 66 05    	ld	h,(ix+5)
3187  0F9B  E5          	push	hl
3188  0F9C  CD 00 00    	call	_game_obj_set
3189  0F9F  F1          	pop	af
3190  0FA0  DD 6E 04    	ld	l,(ix+4)
3191  0FA3  DD 66 05    	ld	h,(ix+5)
3192  0FA6  E5          	push	hl
3193  0FA7  CD 00 00    	call	_spr_draw_index
3194  0FAA  F1          	pop	af
3195  0FAB              l_player_open_door_00117:
3196  0FAB  DD E1       	pop	ix
3197  0FAD  C9          	ret
3198  0FAE              	SECTION code_compiler
3199  0FAE              ;	---------------------------------
3200  0FAE              ; Function player_lost_life
3201  0FAE              ; ---------------------------------
3202  0FAE              _player_lost_life:
3203  0FAE  CD 00 00    	call	___sdcc_enter_ix
3204  0FB1  3B          	dec	sp
3205  0FB2  3A 07 00    	ld	a,(_lin + 7)
3206  0FB5  32 00 00    	ld	(_s_lin0),a
3207  0FB8  3A 07 00    	ld	a,(_col + 7)
3208  0FBB  32 00 00    	ld	(_s_col0),a
3209  0FBE  CD 00 00    	call	_spr_init_anim_bullets
3210  0FC1  06 00       	ld	b,0x00
3211  0FC3              l_player_lost_life_00115:
3212  0FC3  C5          	push	bc
3213  0FC4  21 00 00    	ld	hl,0x0000
3214  0FC7  E5          	push	hl
3215  0FC8  AF          	xor	a, a
3216  0FC9  48          	ld	c,b
3217  0FCA  47          	ld	b,a
3218  0FCB  C5          	push	bc
3219  0FCC  CD 00 00    	call	_NIRVANAP_spriteT_callee
3220  0FCF  C1          	pop	bc
3221  0FD0  04          	inc	b
3222  0FD1  78          	ld	a, b
3223  0FD2  D6 08       	sub	a,0x08
3224  0FD4  38 ED       	jr	C,l_player_lost_life_00115
3225  0FD6  76          	halt
3226  0FD7  3A 00 00    	ld	a,(_s_lin0)
3227  0FDA  C6 F0       	add	a,0xf0
3228  0FDC  47          	ld	b, a
3229  0FDD  3A 00 00    	ld	a,(_s_col0)
3230  0FE0  21 00 00    	ld	hl,0x0000
3231  0FE3  E5          	push	hl
3232  0FE4  21 87 03    	ld	hl,0x0387
3233  0FE7  E5          	push	hl
3234  0FE8  48          	ld	c,b
3235  0FE9  47          	ld	b,a
3236  0FEA  C5          	push	bc
3237  0FEB  CD 00 00    	call	_spr_add_anim
3238  0FEE  F1          	pop	af
3239  0FEF  F1          	pop	af
3240  0FF0  F1          	pop	af
3241  0FF1  21 00 00    	ld	hl,_s_col0
3242  0FF4  46          	ld	b, (hl)
3243  0FF5  05          	dec	b
3244  0FF6  05          	dec	b
3245  0FF7  21 00 00    	ld	hl,0x0000
3246  0FFA  E5          	push	hl
3247  0FFB  21 87 03    	ld	hl,0x0387
3248  0FFE  E5          	push	hl
3249  0FFF  C5          	push	bc
3250  1000  33          	inc	sp
3251  1001  3A 00 00    	ld	a,(_s_lin0)
3252  1004  F5          	push	af
3253  1005  33          	inc	sp
3254  1006  CD 00 00    	call	_spr_add_anim
3255  1009  F1          	pop	af
3256  100A  F1          	pop	af
3257  100B  21 00 00    	ld	hl,0x0000
3258  100E  E3          	ex	(sp),hl
3259  100F  3A 00 00    	ld	a,(_s_col0)
3260  1012  21 87 03    	ld	hl,0x0387
3261  1015  E5          	push	hl
3262  1016  F5          	push	af
3263  1017  33          	inc	sp
3264  1018  3A 00 00    	ld	a,(_s_lin0)
3265  101B  F5          	push	af
3266  101C  33          	inc	sp
3267  101D  CD 00 00    	call	_spr_add_anim
3268  1020  F1          	pop	af
3269  1021  F1          	pop	af
3270  1022  F1          	pop	af
3271  1023  21 00 00    	ld	hl,_s_col0
3272  1026  46          	ld	b, (hl)
3273  1027  04          	inc	b
3274  1028  04          	inc	b
3275  1029  21 00 00    	ld	hl,0x0000
3276  102C  E5          	push	hl
3277  102D  21 87 03    	ld	hl,0x0387
3278  1030  E5          	push	hl
3279  1031  C5          	push	bc
3280  1032  33          	inc	sp
3281  1033  3A 00 00    	ld	a,(_s_lin0)
3282  1036  F5          	push	af
3283  1037  33          	inc	sp
3284  1038  CD 00 00    	call	_spr_add_anim
3285  103B  F1          	pop	af
3286  103C  F1          	pop	af
3287  103D  F1          	pop	af
3288  103E  3A 00 00    	ld	a,(_s_lin0)
3289  1041  C6 10       	add	a,0x10
3290  1043  47          	ld	b, a
3291  1044  3A 00 00    	ld	a,(_s_col0)
3292  1047  21 00 00    	ld	hl,0x0000
3293  104A  E5          	push	hl
3294  104B  21 87 03    	ld	hl,0x0387
3295  104E  E5          	push	hl
3296  104F  48          	ld	c,b
3297  1050  47          	ld	b,a
3298  1051  C5          	push	bc
3299  1052  CD 00 00    	call	_spr_add_anim
3300  1055  F1          	pop	af
3301  1056  F1          	pop	af
3302  1057  F1          	pop	af
3303  1058  2E 00       	ld	l,0x00
3304  105A  CD 00 00    	call	_zx_border_fastcall
3305  105D  21 00 00    	ld	hl,_tmp
3306  1060  36 01       	ld	(hl),0x01
3307  1062              l_player_lost_life_00107:
3308  1062  3A 00 00    	ld	a,(_tmp)
3309  1065  B7          	or	a, a
3310  1066  28 2F       	jr	Z,l_player_lost_life_00109
3311  1068  21 06 00    	ld	hl,0x0006
3312  106B  E5          	push	hl
3313  106C  2A 00 00    	ld	hl,(_anim_time)
3314  106F  E5          	push	hl
3315  1070  CD 00 00    	call	_game_check_time
3316  1073  F1          	pop	af
3317  1074  F1          	pop	af
3318  1075  7D          	ld	a, l
3319  1076  B7          	or	a, a
3320  1077  28 16       	jr	Z,l_player_lost_life_00106
3321  1079  2A 00 00    	ld	hl,(_curr_time)
3322  107C  22 00 00    	ld	(_anim_time),hl
3323  107F  3A 00 00    	ld	a,(_anim_count)
3324  1082  B7          	or	a,a
3325  1083  28 05       	jr	Z,l_player_lost_life_00103
3326  1085  CD 00 00    	call	_spr_play_anim
3327  1088  18 05       	jr	l_player_lost_life_00106
3328  108A              l_player_lost_life_00103:
3329  108A  21 00 00    	ld	hl,_tmp
3330  108D  36 00       	ld	(hl),0x00
3331  108F              l_player_lost_life_00106:
3332  108F  21 05 00    	ld	hl,0x0005
3333  1092  CD 00 00    	call	_z80_delay_ms_fastcall
3334  1095  18 CB       	jr	l_player_lost_life_00107
3335  1097              l_player_lost_life_00109:
3336  1097  21 00 00    	ld	hl,_sprite
3337  109A  36 00       	ld	(hl),0x00
3338  109C              l_player_lost_life_00117:
3339  109C  2A 00 00    	ld	hl,(_sprite)
3340  109F  26 00       	ld	h,0x00
3341  10A1  01 00 00    	ld	bc,_class
3342  10A4  09          	add	hl,bc
3343  10A5  7E          	ld	a,(hl)
3344  10A6  B7          	or	a,a
3345  10A7  28 3F       	jr	Z,l_player_lost_life_00111
3346  10A9  2A 00 00    	ld	hl,(_sprite)
3347  10AC  26 00       	ld	h,0x00
3348  10AE  01 00 00    	ld	bc,_col
3349  10B1  09          	add	hl,bc
3350  10B2  4E          	ld	c, (hl)
3351  10B3  2A 00 00    	ld	hl,(_sprite)
3352  10B6  26 00       	ld	h,0x00
3353  10B8  11 00 00    	ld	de,_lin
3354  10BB  19          	add	hl,de
3355  10BC  46          	ld	b, (hl)
3356  10BD  2A 00 00    	ld	hl,(_sprite)
3357  10C0  26 00       	ld	h,0x00
3358  10C2  11 00 00    	ld	de,_tile
3359  10C5  19          	add	hl,de
3360  10C6  7E          	ld	a,(hl)
3361  10C7  21 00 00    	ld	hl,_sprite
3362  10CA  DD 77 FF    	ld	(ix-1),a
3363  10CD  3E 00       	ld	a, +((_colint) & 0xFF)
3364  10CF  86          	add	a, (hl)
3365  10D0  5F          	ld	e, a
3366  10D1  3E 00       	ld	a, +((_colint) / 256)
3367  10D3  CE 00       	adc	a,0x00
3368  10D5  57          	ld	d, a
3369  10D6  1A          	ld	a, (de)
3370  10D7  5F          	ld	e, a
3371  10D8  DD 7E FF    	ld	a,(ix-1)
3372  10DB  83          	add	a, e
3373  10DC  57          	ld	d, a
3374  10DD  79          	ld	a, c
3375  10DE  F5          	push	af
3376  10DF  33          	inc	sp
3377  10E0  4A          	ld	c, d
3378  10E1  7E          	ld	a,(hl)
3379  10E2  C5          	push	bc
3380  10E3  F5          	push	af
3381  10E4  33          	inc	sp
3382  10E5  CD 00 00    	call	_NIRVANAP_spriteT_callee
3383  10E8              l_player_lost_life_00111:
3384  10E8  2A 00 00    	ld	hl,(_sprite)
3385  10EB  26 00       	ld	h,0x00
3386  10ED  01 00 00    	ld	bc,_class
3387  10F0  09          	add	hl,bc
3388  10F1  AF          	xor	a,a
3389  10F2  77          	ld	(hl),a
3390  10F3  2A 00 00    	ld	hl,(_sprite)
3391  10F6  26 00       	ld	h,0x00
3392  10F8  01 00 00    	ld	bc,_bullet_col
3393  10FB  09          	add	hl,bc
3394  10FC  36 FF       	ld	(hl),0xff
3395  10FE  21 00 00    	ld	hl,_sprite
3396  1101  7E          	ld	a,(hl)
3397  1102  3C          	inc	a
3398  1103  77          	ld	(hl),a
3399  1104  D6 07       	sub	a,0x07
3400  1106  38 94       	jr	C,l_player_lost_life_00117
3401  1108  3A 00 00    	ld	a,(_player_lives)
3402  110B  B7          	or	a, a
3403  110C  28 09       	jr	Z,l_player_lost_life_00119
3404  110E  21 F4 01    	ld	hl,0x01f4
3405  1111  CD 00 00    	call	_z80_delay_ms_fastcall
3406  1114  CD 00 00    	call	_game_round_init
3407  1117              l_player_lost_life_00119:
3408  1117  33          	inc	sp
3409  1118  DD E1       	pop	ix
3410  111A  C9          	ret
3411  111B              	SECTION code_compiler
3412  111B              ;	---------------------------------
3413  111B              ; Function player_hit
3414  111B              ; ---------------------------------
3415  111B              _player_hit:
3416  111B  7D          	ld	a,l
3417  111C  4D          	ld	c,l
3418  111D  21 00 00    	ld	hl,_player_vita
3419  1120  96          	sub	a, (hl)
3420  1121  30 17       	jr	NC,l_player_hit_00107
3421  1123  3A 00 00    	ld	a,(_game_inmune)
3422  1126  B7          	or	a, a
3423  1127  20 06       	jr	NZ,l_player_hit_00102
3424  1129  21 00 00    	ld	hl,_player_vita
3425  112C  7E          	ld	a, (hl)
3426  112D  91          	sub	a, c
3427  112E  77          	ld	(hl), a
3428  112F              l_player_hit_00102:
3429  112F  2A 00 00    	ld	hl,(_curr_time)
3430  1132  22 00 00    	ld	(_player_hit_time),hl
3431  1135  CD 00 00    	call	_game_update_stats
3432  1138  18 2C       	jr	l_player_hit_00109
3433  113A              l_player_hit_00107:
3434  113A  21 00 00    	ld	hl,_player_vita
3435  113D  36 00       	ld	(hl),0x00
3436  113F  CD 00 00    	call	_game_update_stats
3437  1142  CD AE 0F    	call	_player_lost_life
3438  1145  21 00 00    	ld	hl,_player_lives
3439  1148  7E          	ld	a, (hl)
3440  1149  B7          	or	a, a
3441  114A  28 10       	jr	Z,l_player_hit_00104
3442  114C  35          	dec	(hl)
3443  114D  21 00 00    	ld	hl,_player_mana
3444  1150  36 64       	ld	(hl),0x64
3445  1152  21 00 00    	ld	hl,_player_vita
3446  1155  36 64       	ld	(hl),0x64
3447  1157  CD 00 00    	call	_game_update_stats
3448  115A  18 0A       	jr	l_player_hit_00109
3449  115C              l_player_hit_00104:
3450  115C  21 00 00    	ld	hl,_player_lives
3451  115F  36 00       	ld	(hl),0x00
3452  1161  21 00 00    	ld	hl,_game_over
3453  1164  36 01       	ld	(hl),0x01
3454  1166              l_player_hit_00109:
3455  1166  C9          	ret
3456  1167              	SECTION IGNORE
3457  0000              
