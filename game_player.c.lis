1     0000              MODULE game_player_c
2     0000              
3     0000              ;--------------------------------------------------------
4     0000              ; File Created by SDCC : free open source ANSI-C Compiler
5     0000              ; Version 3.6.5 #9958 (Mac OS X i386)
6     0000              ;--------------------------------------------------------
7     0000              ; Processed by Z88DK
8     0000              ;--------------------------------------------------------
9     0000              
10    0000              	EXTERN __divschar
11    0000              	EXTERN __divschar_callee
12    0000              	EXTERN __divsint
13    0000              	EXTERN __divsint_callee
14    0000              	EXTERN __divslong
15    0000              	EXTERN __divslong_callee
16    0000              	EXTERN __divslonglong
17    0000              	EXTERN __divslonglong_callee
18    0000              	EXTERN __divsuchar
19    0000              	EXTERN __divsuchar_callee
20    0000              	EXTERN __divuchar
21    0000              	EXTERN __divuchar_callee
22    0000              	EXTERN __divuint
23    0000              	EXTERN __divuint_callee
24    0000              	EXTERN __divulong
25    0000              	EXTERN __divulong_callee
26    0000              	EXTERN __divulonglong
27    0000              	EXTERN __divulonglong_callee
28    0000              	EXTERN __divuschar
29    0000              	EXTERN __divuschar_callee
30    0000              	EXTERN __modschar
31    0000              	EXTERN __modschar_callee
32    0000              	EXTERN __modsint
33    0000              	EXTERN __modsint_callee
34    0000              	EXTERN __modslong
35    0000              	EXTERN __modslong_callee
36    0000              	EXTERN __modslonglong
37    0000              	EXTERN __modslonglong_callee
38    0000              	EXTERN __modsuchar
39    0000              	EXTERN __modsuchar_callee
40    0000              	EXTERN __moduchar
41    0000              	EXTERN __moduchar_callee
42    0000              	EXTERN __moduint
43    0000              	EXTERN __moduint_callee
44    0000              	EXTERN __modulong
45    0000              	EXTERN __modulong_callee
46    0000              	EXTERN __modulonglong
47    0000              	EXTERN __modulonglong_callee
48    0000              	EXTERN __moduschar
49    0000              	EXTERN __moduschar_callee
50    0000              	EXTERN __mulint
51    0000              	EXTERN __mulint_callee
52    0000              	EXTERN __mullong
53    0000              	EXTERN __mullong_callee
54    0000              	EXTERN __mullonglong
55    0000              	EXTERN __mullonglong_callee
56    0000              	EXTERN __mulschar
57    0000              	EXTERN __mulschar_callee
58    0000              	EXTERN __mulsuchar
59    0000              	EXTERN __mulsuchar_callee
60    0000              	EXTERN __muluschar
61    0000              	EXTERN __muluschar_callee
62    0000              	EXTERN __rlslonglong
63    0000              	EXTERN __rlslonglong_callee
64    0000              	EXTERN __rlulonglong
65    0000              	EXTERN __rlulonglong_callee
66    0000              	EXTERN __rrslonglong
67    0000              	EXTERN __rrslonglong_callee
68    0000              	EXTERN __rrulonglong
69    0000              	EXTERN __rrulonglong_callee
70    0000              	EXTERN ___sdcc_call_hl
71    0000              	EXTERN ___sdcc_call_iy
72    0000              	EXTERN ___sdcc_enter_ix
73    0000              	EXTERN _banked_call
74    0000              	EXTERN _banked_ret
75    0000              	EXTERN ___fs2schar
76    0000              	EXTERN ___fs2schar_callee
77    0000              	EXTERN ___fs2sint
78    0000              	EXTERN ___fs2sint_callee
79    0000              	EXTERN ___fs2slong
80    0000              	EXTERN ___fs2slong_callee
81    0000              	EXTERN ___fs2slonglong
82    0000              	EXTERN ___fs2slonglong_callee
83    0000              	EXTERN ___fs2uchar
84    0000              	EXTERN ___fs2uchar_callee
85    0000              	EXTERN ___fs2uint
86    0000              	EXTERN ___fs2uint_callee
87    0000              	EXTERN ___fs2ulong
88    0000              	EXTERN ___fs2ulong_callee
89    0000              	EXTERN ___fs2ulonglong
90    0000              	EXTERN ___fs2ulonglong_callee
91    0000              	EXTERN ___fsadd
92    0000              	EXTERN ___fsadd_callee
93    0000              	EXTERN ___fsdiv
94    0000              	EXTERN ___fsdiv_callee
95    0000              	EXTERN ___fseq
96    0000              	EXTERN ___fseq_callee
97    0000              	EXTERN ___fsgt
98    0000              	EXTERN ___fsgt_callee
99    0000              	EXTERN ___fslt
100   0000              	EXTERN ___fslt_callee
101   0000              	EXTERN ___fsmul
102   0000              	EXTERN ___fsmul_callee
103   0000              	EXTERN ___fsneq
104   0000              	EXTERN ___fsneq_callee
105   0000              	EXTERN ___fssub
106   0000              	EXTERN ___fssub_callee
107   0000              	EXTERN ___schar2fs
108   0000              	EXTERN ___schar2fs_callee
109   0000              	EXTERN ___sint2fs
110   0000              	EXTERN ___sint2fs_callee
111   0000              	EXTERN ___slong2fs
112   0000              	EXTERN ___slong2fs_callee
113   0000              	EXTERN ___slonglong2fs
114   0000              	EXTERN ___slonglong2fs_callee
115   0000              	EXTERN ___uchar2fs
116   0000              	EXTERN ___uchar2fs_callee
117   0000              	EXTERN ___uint2fs
118   0000              	EXTERN ___uint2fs_callee
119   0000              	EXTERN ___ulong2fs
120   0000              	EXTERN ___ulong2fs_callee
121   0000              	EXTERN ___ulonglong2fs
122   0000              	EXTERN ___ulonglong2fs_callee
123   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
126   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
127   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
128   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
129   0000              	EXTERN ____sdcc_4_ldi_save_bc
130   0000              	EXTERN ____sdcc_4_push_hlix
131   0000              	EXTERN ____sdcc_4_push_mhl
132   0000              	EXTERN ____sdcc_lib_setmem_hl
133   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
134   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
135   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
136   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
137   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
138   0000              	EXTERN ____sdcc_ll_add_deix_hlix
139   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
140   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
141   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
142   0000              	EXTERN ____sdcc_ll_asr_hlix_a
143   0000              	EXTERN ____sdcc_ll_asr_mbc_a
144   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
145   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
146   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
147   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
148   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
149   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
150   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
151   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
152   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
153   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
155   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
156   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
157   0000              	EXTERN ____sdcc_ll_push_hlix
158   0000              	EXTERN ____sdcc_ll_push_mhl
159   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
160   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
161   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
162   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
163   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
164   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
165   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
166   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
167   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
168   0000              	EXTERN ____sdcc_load_debc_deix
169   0000              	EXTERN ____sdcc_load_dehl_deix
170   0000              	EXTERN ____sdcc_load_debc_mhl
171   0000              	EXTERN ____sdcc_load_hlde_mhl
172   0000              	EXTERN ____sdcc_store_dehl_bcix
173   0000              	EXTERN ____sdcc_store_debc_hlix
174   0000              	EXTERN ____sdcc_store_debc_mhl
175   0000              	EXTERN ____sdcc_cpu_pop_ei
176   0000              	EXTERN ____sdcc_cpu_pop_ei_jp
177   0000              	EXTERN ____sdcc_cpu_push_di
178   0000              	EXTERN ____sdcc_outi
179   0000              	EXTERN ____sdcc_outi_128
180   0000              	EXTERN ____sdcc_outi_256
181   0000              	EXTERN ____sdcc_ldi
182   0000              	EXTERN ____sdcc_ldi_128
183   0000              	EXTERN ____sdcc_ldi_256
184   0000              
185   0000              ;--------------------------------------------------------
186   0000              ; Public variables in this module
187   0000              ;--------------------------------------------------------
188   0000              	GLOBAL _player_check_map
189   0000              	GLOBAL _player_init
190   0000              	GLOBAL _player_check_input
191   0000              	GLOBAL _player_collision
192   0000              	GLOBAL _player_kill
193   0000              	GLOBAL _player_restart
194   0000              	GLOBAL _player_lost_life
195   0000              	GLOBAL _player_turn
196   0000              	GLOBAL _player_move
197   0000              	GLOBAL _player_check_stairs_down
198   0000              	GLOBAL _player_check_stairs
199   0000              	GLOBAL _player_tile
200   0000              	GLOBAL _player_move_input
201   0000              	GLOBAL _player_pick_item
202   0000              	GLOBAL _player_hit_platform
203   0000              	GLOBAL _player_hit_platform_clear
204   0000              	GLOBAL _player_score_add
205   0000              	GLOBAL _player_check_floor
206   0000              ;--------------------------------------------------------
207   0000              ; Externals used
208   0000              ;--------------------------------------------------------
209   0000              	GLOBAL _ulltoa_callee
210   0000              	GLOBAL _ulltoa
211   0000              	GLOBAL _strtoull_callee
212   0000              	GLOBAL _strtoull
213   0000              	GLOBAL _strtoll_callee
214   0000              	GLOBAL _strtoll
215   0000              	GLOBAL _lltoa_callee
216   0000              	GLOBAL _lltoa
217   0000              	GLOBAL _llabs_callee
218   0000              	GLOBAL _llabs
219   0000              	GLOBAL __lldivu__callee
220   0000              	GLOBAL __lldivu_
221   0000              	GLOBAL __lldiv__callee
222   0000              	GLOBAL __lldiv_
223   0000              	GLOBAL _atoll_callee
224   0000              	GLOBAL _atoll
225   0000              	GLOBAL _realloc_unlocked_callee
226   0000              	GLOBAL _realloc_unlocked
227   0000              	GLOBAL _malloc_unlocked_fastcall
228   0000              	GLOBAL _malloc_unlocked
229   0000              	GLOBAL _free_unlocked_fastcall
230   0000              	GLOBAL _free_unlocked
231   0000              	GLOBAL _calloc_unlocked_callee
232   0000              	GLOBAL _calloc_unlocked
233   0000              	GLOBAL _aligned_alloc_unlocked_callee
234   0000              	GLOBAL _aligned_alloc_unlocked
235   0000              	GLOBAL _realloc_callee
236   0000              	GLOBAL _realloc
237   0000              	GLOBAL _malloc_fastcall
238   0000              	GLOBAL _malloc
239   0000              	GLOBAL _free_fastcall
240   0000              	GLOBAL _free
241   0000              	GLOBAL _calloc_callee
242   0000              	GLOBAL _calloc
243   0000              	GLOBAL _aligned_alloc_callee
244   0000              	GLOBAL _aligned_alloc
245   0000              	GLOBAL _utoa_callee
246   0000              	GLOBAL _utoa
247   0000              	GLOBAL _ultoa_callee
248   0000              	GLOBAL _ultoa
249   0000              	GLOBAL _system_fastcall
250   0000              	GLOBAL _system
251   0000              	GLOBAL _strtoul_callee
252   0000              	GLOBAL _strtoul
253   0000              	GLOBAL _strtol_callee
254   0000              	GLOBAL _strtol
255   0000              	GLOBAL _strtof_callee
256   0000              	GLOBAL _strtof
257   0000              	GLOBAL _strtod_callee
258   0000              	GLOBAL _strtod
259   0000              	GLOBAL _srand_fastcall
260   0000              	GLOBAL _srand
261   0000              	GLOBAL _rand
262   0000              	GLOBAL _quick_exit_fastcall
263   0000              	GLOBAL _quick_exit
264   0000              	GLOBAL _qsort_callee
265   0000              	GLOBAL _qsort
266   0000              	GLOBAL _ltoa_callee
267   0000              	GLOBAL _ltoa
268   0000              	GLOBAL _labs_fastcall
269   0000              	GLOBAL _labs
270   0000              	GLOBAL _itoa_callee
271   0000              	GLOBAL _itoa
272   0000              	GLOBAL _ftoh_callee
273   0000              	GLOBAL _ftoh
274   0000              	GLOBAL _ftog_callee
275   0000              	GLOBAL _ftog
276   0000              	GLOBAL _ftoe_callee
277   0000              	GLOBAL _ftoe
278   0000              	GLOBAL _ftoa_callee
279   0000              	GLOBAL _ftoa
280   0000              	GLOBAL _exit_fastcall
281   0000              	GLOBAL _exit
282   0000              	GLOBAL _dtoh_callee
283   0000              	GLOBAL _dtoh
284   0000              	GLOBAL _dtog_callee
285   0000              	GLOBAL _dtog
286   0000              	GLOBAL _dtoe_callee
287   0000              	GLOBAL _dtoe
288   0000              	GLOBAL _dtoa_callee
289   0000              	GLOBAL _dtoa
290   0000              	GLOBAL _bsearch_callee
291   0000              	GLOBAL _bsearch
292   0000              	GLOBAL _atol_fastcall
293   0000              	GLOBAL _atol
294   0000              	GLOBAL _atoi_fastcall
295   0000              	GLOBAL _atoi
296   0000              	GLOBAL _atof_fastcall
297   0000              	GLOBAL _atof
298   0000              	GLOBAL _atexit_fastcall
299   0000              	GLOBAL _atexit
300   0000              	GLOBAL _at_quick_exit_fastcall
301   0000              	GLOBAL _at_quick_exit
302   0000              	GLOBAL _abs_fastcall
303   0000              	GLOBAL _abs
304   0000              	GLOBAL _abort
305   0000              	GLOBAL __strtou__callee
306   0000              	GLOBAL __strtou_
307   0000              	GLOBAL __strtoi__callee
308   0000              	GLOBAL __strtoi_
309   0000              	GLOBAL __random_uniform_xor_8__fastcall
310   0000              	GLOBAL __random_uniform_xor_8_
311   0000              	GLOBAL __random_uniform_xor_32__fastcall
312   0000              	GLOBAL __random_uniform_xor_32_
313   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
314   0000              	GLOBAL __random_uniform_cmwc_8_
315   0000              	GLOBAL __shellsort__callee
316   0000              	GLOBAL __shellsort_
317   0000              	GLOBAL __quicksort__callee
318   0000              	GLOBAL __quicksort_
319   0000              	GLOBAL __insertion_sort__callee
320   0000              	GLOBAL __insertion_sort_
321   0000              	GLOBAL __ldivu__callee
322   0000              	GLOBAL __ldivu_
323   0000              	GLOBAL __ldiv__callee
324   0000              	GLOBAL __ldiv_
325   0000              	GLOBAL __divu__callee
326   0000              	GLOBAL __divu_
327   0000              	GLOBAL __div__callee
328   0000              	GLOBAL __div_
329   0000              	GLOBAL _NIRVANAP_drawTW_raw_callee
330   0000              	GLOBAL _NIRVANAP_drawTW_raw
331   0000              	GLOBAL _NIRVANAP_drawTW_callee
332   0000              	GLOBAL _NIRVANAP_drawTW
333   0000              	GLOBAL _NIRVANAP_drawW_raw_callee
334   0000              	GLOBAL _NIRVANAP_drawW_raw
335   0000              	GLOBAL _NIRVANAP_drawW_callee
336   0000              	GLOBAL _NIRVANAP_drawW
337   0000              	GLOBAL _NIRVANAP_spriteT_callee
338   0000              	GLOBAL _NIRVANAP_spriteT
339   0000              	GLOBAL _NIRVANAP_fillC_callee
340   0000              	GLOBAL _NIRVANAP_fillC
341   0000              	GLOBAL _NIRVANAP_readC_callee
342   0000              	GLOBAL _NIRVANAP_readC
343   0000              	GLOBAL _NIRVANAP_paintC_callee
344   0000              	GLOBAL _NIRVANAP_paintC
345   0000              	GLOBAL _NIRVANAP_printC_callee
346   0000              	GLOBAL _NIRVANAP_printC
347   0000              	GLOBAL _NIRVANAP_fillT_raw_callee
348   0000              	GLOBAL _NIRVANAP_fillT_raw
349   0000              	GLOBAL _NIRVANAP_fillT_callee
350   0000              	GLOBAL _NIRVANAP_fillT
351   0000              	GLOBAL _NIRVANAP_drawT_raw_callee
352   0000              	GLOBAL _NIRVANAP_drawT_raw
353   0000              	GLOBAL _NIRVANAP_drawT_callee
354   0000              	GLOBAL _NIRVANAP_drawT
355   0000              	GLOBAL _NIRVANAP_stop
356   0000              	GLOBAL _NIRVANAP_start
357   0000              	GLOBAL _debug3
358   0000              	GLOBAL _debug2
359   0000              	GLOBAL _debug
360   0000              	GLOBAL _zx_print_str
361   0000              	GLOBAL _zx_print_int
362   0000              	GLOBAL _zx_print_chr
363   0000              	GLOBAL _zx_print_bonus_time
364   0000              	GLOBAL _zx_isr
365   0000              	GLOBAL _z80_otdr_callee
366   0000              	GLOBAL _z80_otdr
367   0000              	GLOBAL _z80_otir_callee
368   0000              	GLOBAL _z80_otir
369   0000              	GLOBAL _z80_outp_callee
370   0000              	GLOBAL _z80_outp
371   0000              	GLOBAL _z80_indr_callee
372   0000              	GLOBAL _z80_indr
373   0000              	GLOBAL _z80_inir_callee
374   0000              	GLOBAL _z80_inir
375   0000              	GLOBAL _z80_inp_fastcall
376   0000              	GLOBAL _z80_inp
377   0000              	GLOBAL _z80_set_int_state_fastcall
378   0000              	GLOBAL _z80_set_int_state
379   0000              	GLOBAL _z80_get_int_state
380   0000              	GLOBAL _z80_delay_tstate_fastcall
381   0000              	GLOBAL _z80_delay_tstate
382   0000              	GLOBAL _z80_delay_ms_fastcall
383   0000              	GLOBAL _z80_delay_ms
384   0000              	GLOBAL _im2_remove_generic_callback_callee
385   0000              	GLOBAL _im2_remove_generic_callback
386   0000              	GLOBAL _im2_prepend_generic_callback_callee
387   0000              	GLOBAL _im2_prepend_generic_callback
388   0000              	GLOBAL _im2_append_generic_callback_callee
389   0000              	GLOBAL _im2_append_generic_callback
390   0000              	GLOBAL _im2_create_generic_isr_8080_callee
391   0000              	GLOBAL _im2_create_generic_isr_8080
392   0000              	GLOBAL _im2_create_generic_isr_callee
393   0000              	GLOBAL _im2_create_generic_isr
394   0000              	GLOBAL _im2_install_isr_callee
395   0000              	GLOBAL _im2_install_isr
396   0000              	GLOBAL _im2_init_fastcall
397   0000              	GLOBAL _im2_init
398   0000              	GLOBAL _intrinsic_swap_word_32_fastcall
399   0000              	GLOBAL _intrinsic_swap_word_32
400   0000              	GLOBAL _intrinsic_swap_endian_32_fastcall
401   0000              	GLOBAL _intrinsic_swap_endian_32
402   0000              	GLOBAL _intrinsic_swap_endian_16_fastcall
403   0000              	GLOBAL _intrinsic_swap_endian_16
404   0000              	GLOBAL _intrinsic_return_de
405   0000              	GLOBAL _intrinsic_return_bc
406   0000              	GLOBAL _intrinsic_exx
407   0000              	GLOBAL _intrinsic_ex_de_hl
408   0000              	GLOBAL _intrinsic_nop
409   0000              	GLOBAL _intrinsic_im_2
410   0000              	GLOBAL _intrinsic_im_1
411   0000              	GLOBAL _intrinsic_im_0
412   0000              	GLOBAL _intrinsic_retn
413   0000              	GLOBAL _intrinsic_reti
414   0000              	GLOBAL _intrinsic_halt
415   0000              	GLOBAL _intrinsic_ei
416   0000              	GLOBAL _intrinsic_di
417   0000              	GLOBAL _intrinsic_stub
418   0000              	GLOBAL _intrinsic_outi
419   0000              	GLOBAL _intrinsic_ldi
420   0000              	GLOBAL _zx_pattern_fill_callee
421   0000              	GLOBAL _zx_pattern_fill
422   0000              	GLOBAL _zx_saddrpup_fastcall
423   0000              	GLOBAL _zx_saddrpup
424   0000              	GLOBAL _zx_saddrpright_callee
425   0000              	GLOBAL _zx_saddrpright
426   0000              	GLOBAL _zx_saddrpleft_callee
427   0000              	GLOBAL _zx_saddrpleft
428   0000              	GLOBAL _zx_saddrpdown_fastcall
429   0000              	GLOBAL _zx_saddrpdown
430   0000              	GLOBAL _zx_saddrcup_fastcall
431   0000              	GLOBAL _zx_saddrcup
432   0000              	GLOBAL _zx_saddrcright_fastcall
433   0000              	GLOBAL _zx_saddrcright
434   0000              	GLOBAL _zx_saddrcleft_fastcall
435   0000              	GLOBAL _zx_saddrcleft
436   0000              	GLOBAL _zx_saddrcdown_fastcall
437   0000              	GLOBAL _zx_saddrcdown
438   0000              	GLOBAL _zx_saddr2py_fastcall
439   0000              	GLOBAL _zx_saddr2py
440   0000              	GLOBAL _zx_saddr2px_fastcall
441   0000              	GLOBAL _zx_saddr2px
442   0000              	GLOBAL _zx_saddr2cy_fastcall
443   0000              	GLOBAL _zx_saddr2cy
444   0000              	GLOBAL _zx_saddr2cx_fastcall
445   0000              	GLOBAL _zx_saddr2cx
446   0000              	GLOBAL _zx_saddr2aaddr_fastcall
447   0000              	GLOBAL _zx_saddr2aaddr
448   0000              	GLOBAL _zx_py2saddr_fastcall
449   0000              	GLOBAL _zx_py2saddr
450   0000              	GLOBAL _zx_py2aaddr_fastcall
451   0000              	GLOBAL _zx_py2aaddr
452   0000              	GLOBAL _zx_pxy2saddr_callee
453   0000              	GLOBAL _zx_pxy2saddr
454   0000              	GLOBAL _zx_pxy2aaddr_callee
455   0000              	GLOBAL _zx_pxy2aaddr
456   0000              	GLOBAL _zx_px2bitmask_fastcall
457   0000              	GLOBAL _zx_px2bitmask
458   0000              	GLOBAL _zx_cy2saddr_fastcall
459   0000              	GLOBAL _zx_cy2saddr
460   0000              	GLOBAL _zx_cy2aaddr_fastcall
461   0000              	GLOBAL _zx_cy2aaddr
462   0000              	GLOBAL _zx_cxy2saddr_callee
463   0000              	GLOBAL _zx_cxy2saddr
464   0000              	GLOBAL _zx_cxy2aaddr_callee
465   0000              	GLOBAL _zx_cxy2aaddr
466   0000              	GLOBAL _zx_bitmask2px_fastcall
467   0000              	GLOBAL _zx_bitmask2px
468   0000              	GLOBAL _zx_aaddrcup_fastcall
469   0000              	GLOBAL _zx_aaddrcup
470   0000              	GLOBAL _zx_aaddrcright_fastcall
471   0000              	GLOBAL _zx_aaddrcright
472   0000              	GLOBAL _zx_aaddrcleft_fastcall
473   0000              	GLOBAL _zx_aaddrcleft
474   0000              	GLOBAL _zx_aaddrcdown_fastcall
475   0000              	GLOBAL _zx_aaddrcdown
476   0000              	GLOBAL _zx_aaddr2saddr_fastcall
477   0000              	GLOBAL _zx_aaddr2saddr
478   0000              	GLOBAL _zx_aaddr2py_fastcall
479   0000              	GLOBAL _zx_aaddr2py
480   0000              	GLOBAL _zx_aaddr2px_fastcall
481   0000              	GLOBAL _zx_aaddr2px
482   0000              	GLOBAL _zx_aaddr2cy_fastcall
483   0000              	GLOBAL _zx_aaddr2cy
484   0000              	GLOBAL _zx_aaddr2cx_fastcall
485   0000              	GLOBAL _zx_aaddr2cx
486   0000              	GLOBAL _zx_visit_wc_pix_callee
487   0000              	GLOBAL _zx_visit_wc_pix
488   0000              	GLOBAL _zx_visit_wc_attr_callee
489   0000              	GLOBAL _zx_visit_wc_attr
490   0000              	GLOBAL _zx_scroll_wc_up_pix_callee
491   0000              	GLOBAL _zx_scroll_wc_up_pix
492   0000              	GLOBAL _zx_scroll_wc_up_attr_callee
493   0000              	GLOBAL _zx_scroll_wc_up_attr
494   0000              	GLOBAL _zx_scroll_wc_up_callee
495   0000              	GLOBAL _zx_scroll_wc_up
496   0000              	GLOBAL _zx_scroll_up_pix_callee
497   0000              	GLOBAL _zx_scroll_up_pix
498   0000              	GLOBAL _zx_scroll_up_attr_callee
499   0000              	GLOBAL _zx_scroll_up_attr
500   0000              	GLOBAL _zx_scroll_up_callee
501   0000              	GLOBAL _zx_scroll_up
502   0000              	GLOBAL _zx_cls_wc_pix_callee
503   0000              	GLOBAL _zx_cls_wc_pix
504   0000              	GLOBAL _zx_cls_wc_attr_callee
505   0000              	GLOBAL _zx_cls_wc_attr
506   0000              	GLOBAL _zx_cls_wc_callee
507   0000              	GLOBAL _zx_cls_wc
508   0000              	GLOBAL _zx_cls_pix_fastcall
509   0000              	GLOBAL _zx_cls_pix
510   0000              	GLOBAL _zx_cls_attr_fastcall
511   0000              	GLOBAL _zx_cls_attr
512   0000              	GLOBAL _zx_cls_fastcall
513   0000              	GLOBAL _zx_cls
514   0000              	GLOBAL _zx_border_fastcall
515   0000              	GLOBAL _zx_border
516   0000              	GLOBAL _spr_turn_horizontal
517   0000              	GLOBAL _spr_play_anim
518   0000              	GLOBAL _spr_add_anim
519   0000              	GLOBAL _spr_page_map
520   0000              	GLOBAL _spr_page_right
521   0000              	GLOBAL _spr_page_left
522   0000              	GLOBAL _spr_tile_paint
523   0000              	GLOBAL _spr_kill_all
524   0000              	GLOBAL _spr_collision_check
525   0000              	GLOBAL _spr_calc_hor
526   0000              	GLOBAL _spr_draw_row
527   0000              	GLOBAL _spr_draw_index
528   0000              	GLOBAL _spr_draw_clear
529   0000              	GLOBAL _spr_draw_map_background
530   0000              	GLOBAL _spr_brick_anim
531   0000              	GLOBAL _spr_back_clr
532   0000              	GLOBAL _spr_tile
533   0000              	GLOBAL _spr_destroy
534   0000              	GLOBAL _spr_tile_dir
535   0000              	GLOBAL _spr_anim_kill
536   0000              	GLOBAL _spr_redraw
537   0000              	GLOBAL _spr_move_left
538   0000              	GLOBAL _spr_move_right
539   0000              	GLOBAL _spr_move_horizontal
540   0000              	GLOBAL _spr_move_down
541   0000              	GLOBAL _spr_move_jump
542   0000              	GLOBAL _spr_move_up
543   0000              	GLOBAL _spr_check_map_fall
544   0000              	GLOBAL _spr_check_map
545   0000              	GLOBAL _spr_calc_index
546   0000              	GLOBAL _spr_chktime
547   0000              	GLOBAL _sound_hit_brick
548   0000              	GLOBAL _sound_hit_enemy
549   0000              	GLOBAL _sound_kill
550   0000              	GLOBAL _sound_enter_enemy
551   0000              	GLOBAL _sound_coin
552   0000              	GLOBAL _sound_jump
553   0000              	GLOBAL _sound_slide
554   0000              	GLOBAL _player_player_hit_pow
555   0000              	GLOBAL _game_joystick_set_menu
556   0000              	GLOBAL _game_joystick_set
557   0000              	GLOBAL _game_joystick_change
558   0000              	GLOBAL _game_print_header
559   0000              	GLOBAL _game_end
560   0000              	GLOBAL _game_phase_print_score_back
561   0000              	GLOBAL _game_check_time
562   0000              	GLOBAL _game_rotate_attrib
563   0000              	GLOBAL _game_colour_message
564   0000              	GLOBAL _game_paint_attrib_lin_h
565   0000              	GLOBAL _game_paint_attrib_lin
566   0000              	GLOBAL _game_paint_attrib
567   0000              	GLOBAL _game_print_score
568   0000              	GLOBAL _game_unfreeze_all
569   0000              	GLOBAL _game_freeze_all
570   0000              	GLOBAL _game_freeze
571   0000              	GLOBAL _game_enemy_add_get_index
572   0000              	GLOBAL _game_check_maze_floor
573   0000              	GLOBAL _game_check_maze
574   0000              	GLOBAL _game_loop
575   0000              	GLOBAL _game_phase_init
576   0000              	GLOBAL _game_start_timer
577   0000              	GLOBAL _game_tick
578   0000              	GLOBAL _game_print_lives
579   0000              	GLOBAL _game_print_footer
580   0000              	GLOBAL _game_fill_row
581   0000              	GLOBAL _enemy_avoid_edge
582   0000              	GLOBAL _enemy_kill
583   0000              	GLOBAL _enemy_init
584   0000              	GLOBAL _enemy_walk
585   0000              	GLOBAL _enemy_move
586   0000              	GLOBAL _enemy_turn
587   0000              	GLOBAL _enemy_hit
588   0000              	GLOBAL _enemy_coin1
589   0000              	GLOBAL _ay_fx_play
590   0000              	GLOBAL _ay_midi_play
591   0000              	GLOBAL _ay_is_playing
592   0000              	GLOBAL _ay_reset
593   0000              	GLOBAL _test_func
594   0000              	GLOBAL _test_proc
595   0000              	GLOBAL _in_mouse_kempston_wheel_delta
596   0000              	GLOBAL _in_mouse_kempston_wheel
597   0000              	GLOBAL _in_mouse_kempston_callee
598   0000              	GLOBAL _in_mouse_kempston
599   0000              	GLOBAL _in_mouse_kempston_setpos_callee
600   0000              	GLOBAL _in_mouse_kempston_setpos
601   0000              	GLOBAL _in_mouse_kempston_reset
602   0000              	GLOBAL _in_mouse_kempston_init
603   0000              	GLOBAL _in_mouse_amx_wheel_delta
604   0000              	GLOBAL _in_mouse_amx_wheel
605   0000              	GLOBAL _in_mouse_amx_callee
606   0000              	GLOBAL _in_mouse_amx
607   0000              	GLOBAL _in_mouse_amx_setpos_callee
608   0000              	GLOBAL _in_mouse_amx_setpos
609   0000              	GLOBAL _in_mouse_amx_reset
610   0000              	GLOBAL _in_mouse_amx_init_callee
611   0000              	GLOBAL _in_mouse_amx_init
612   0000              	GLOBAL _in_stick_sinclair2
613   0000              	GLOBAL _in_stick_sinclair1
614   0000              	GLOBAL _in_stick_kempston
615   0000              	GLOBAL _in_stick_fuller
616   0000              	GLOBAL _in_stick_cursor
617   0000              	GLOBAL _in_stick_keyboard_fastcall
618   0000              	GLOBAL _in_stick_keyboard
619   0000              	GLOBAL _in_wait_nokey
620   0000              	GLOBAL _in_wait_key
621   0000              	GLOBAL _in_test_key
622   0000              	GLOBAL _in_pause_fastcall
623   0000              	GLOBAL _in_pause
624   0000              	GLOBAL _in_key_scancode_fastcall
625   0000              	GLOBAL _in_key_scancode
626   0000              	GLOBAL _in_key_pressed_fastcall
627   0000              	GLOBAL _in_key_pressed
628   0000              	GLOBAL _in_inkey
629   0000              	GLOBAL _NIRVANAP_CHAR_TABLE
630   0000              	GLOBAL _NIRVANAP_WIDE_IMAGES
631   0000              	GLOBAL _NIRVANAP_TILE_IMAGES
632   0000              	GLOBAL _NIRVANAP_HOLE
633   0000              	GLOBAL _NIRVANAP_ISR_HOOK
634   0000              	GLOBAL _g_player_hit_right
635   0000              	GLOBAL _g_player_hit_left
636   0000              	GLOBAL _joynames
637   0000              	GLOBAL _initials
638   0000              	GLOBAL _anim_end
639   0000              	GLOBAL _anim_int
640   0000              	GLOBAL _anim_tile
641   0000              	GLOBAL _anim_col
642   0000              	GLOBAL _anim_lin
643   0000              	GLOBAL _phase_angry
644   0000              	GLOBAL _phase_curr
645   0000              	GLOBAL _phase_end
646   0000              	GLOBAL _phase_coins
647   0000              	GLOBAL _phase_pop
648   0000              	GLOBAL _phase_tot
649   0000              	GLOBAL _map_heigth
650   0000              	GLOBAL _map_width
651   0000              	GLOBAL _scr_curr
652   0000              	GLOBAL _scr_7
653   0000              	GLOBAL _scr_6
654   0000              	GLOBAL _scr_5
655   0000              	GLOBAL _scr_4
656   0000              	GLOBAL _scr_3
657   0000              	GLOBAL _scr_2
658   0000              	GLOBAL _scr_1
659   0000              	GLOBAL _scr_0
660   0000              	GLOBAL _scr_map
661   0000              	GLOBAL _sprite_speed_alt
662   0000              	GLOBAL _sprite_frames
663   0000              	GLOBAL _sprite_speed
664   0000              	GLOBAL _screen_ink
665   0000              	GLOBAL _screen_paper
666   0000              	GLOBAL _player_over_stair
667   0000              	GLOBAL _game_menu_sel
668   0000              	GLOBAL _game_type
669   0000              	GLOBAL _game_score_top
670   0000              	GLOBAL _player_lives
671   0000              	GLOBAL _game_over
672   0000              	GLOBAL _game_sound
673   0000              	GLOBAL _game_inmune
674   0000              	GLOBAL _game_god_mode
675   0000              	GLOBAL _game_start_phase
676   0000              	GLOBAL _game_two_player
677   0000              	GLOBAL _game_brick_tile
678   0000              	GLOBAL _sprite_curr_index
679   0000              	GLOBAL _spr_count
680   0000              	GLOBAL _anim_time
681   0000              	GLOBAL _frame_time
682   0000              	GLOBAL _entry_time
683   0000              	GLOBAL _curr_time
684   0000              	GLOBAL _s_state
685   0000              	GLOBAL _attrib_hl
686   0000              	GLOBAL _attrib
687   0000              	GLOBAL _zx_val_asm
688   0000              	GLOBAL _enemies
689   0000              	GLOBAL _tmp_ui
690   0000              	GLOBAL _tmp_sc
691   0000              	GLOBAL _tmp_uc
692   0000              	GLOBAL _tmp1
693   0000              	GLOBAL _tmp0
694   0000              	GLOBAL _tmp
695   0000              	GLOBAL _index1
696   0000              	GLOBAL _loop_count
697   0000              	GLOBAL _sprite_lin_inc_mul
698   0000              	GLOBAL _s_col1
699   0000              	GLOBAL _s_col0
700   0000              	GLOBAL _s_lin1
701   0000              	GLOBAL _s_lin0
702   0000              	GLOBAL _s_tile1
703   0000              	GLOBAL _s_tile0
704   0000              	GLOBAL _player_hit_count
705   0000              	GLOBAL _sprite
706   0000              	GLOBAL _game_gravity
707   0000              	GLOBAL _player_vel_y0
708   0000              	GLOBAL _player_vel_y
709   0000              	GLOBAL _player_vel_x
710   0000              	GLOBAL _player_joy
711   0000              	GLOBAL _player_score
712   0000              	GLOBAL _last_time
713   0000              	GLOBAL _player_slide
714   0000              	GLOBAL _spr_timer
715   0000              	GLOBAL _jump_lin
716   0000              	GLOBAL _player_hit_col
717   0000              	GLOBAL _player_hit_lin
718   0000              	GLOBAL _colint
719   0000              	GLOBAL _col
720   0000              	GLOBAL _lin
721   0000              	GLOBAL _tile
722   0000              	GLOBAL _state_a
723   0000              	GLOBAL _state
724   0000              	GLOBAL _class
725   0000              	GLOBAL _tbuffer
726   0000              	GLOBAL _dirs
727   0000              	GLOBAL _k1
728   0000              	GLOBAL _joyfunc1
729   0000              	GLOBAL _btiles
730   0000              	GLOBAL _spec128
731   0000              	GLOBAL _GLOBAL_ZX_PORT_7FFD
732   0000              	GLOBAL _GLOBAL_ZX_PORT_1FFD
733   0000              	GLOBAL _GLOBAL_ZX_PORT_FE
734   0000              	GLOBAL _ay_effect_20
735   0000              	GLOBAL _ay_effect_19
736   0000              	GLOBAL _ay_effect_18
737   0000              	GLOBAL _ay_effect_17
738   0000              	GLOBAL _ay_effect_16
739   0000              	GLOBAL _ay_effect_15
740   0000              	GLOBAL _ay_effect_14
741   0000              	GLOBAL _ay_effect_13
742   0000              	GLOBAL _ay_effect_12
743   0000              	GLOBAL _ay_effect_11
744   0000              	GLOBAL _ay_effect_10
745   0000              	GLOBAL _ay_effect_09
746   0000              	GLOBAL _ay_effect_08
747   0000              	GLOBAL _ay_effect_07
748   0000              	GLOBAL _ay_effect_06
749   0000              	GLOBAL _ay_effect_05
750   0000              	GLOBAL _ay_effect_04
751   0000              	GLOBAL _ay_effect_03
752   0000              	GLOBAL _ay_effect_02
753   0000              	GLOBAL _ay_effect_01
754   0000              	GLOBAL _pb_midi_phase_1
755   0000              	GLOBAL _pb_midi_title
756   0000              	GLOBAL _control_method
757   0000              ;--------------------------------------------------------
758   0000              ; special function registers
759   0000              ;--------------------------------------------------------
760   0000              defc _IO_FE	=	0x00fe
761   0000              defc _IO_1FFD	=	0x1ffd
762   0000              defc _IO_7FFD	=	0x7ffd
763   0000              ;--------------------------------------------------------
764   0000              ; ram data
765   0000              ;--------------------------------------------------------
766   0000              	SECTION bss_compiler
767   0000              ;--------------------------------------------------------
768   0000              ; ram data
769   0000              ;--------------------------------------------------------
770   0000              
771   0000              IF 0
772   0000              
773   0000              ; .area _INITIALIZED removed by z88dk
774   0000              
775   0000              
776   0000              ENDIF
777   0000              
778   0000              ;--------------------------------------------------------
779   0000              ; absolute external ram data
780   0000              ;--------------------------------------------------------
781   0000              	SECTION IGNORE
782   0000              ;--------------------------------------------------------
783   0000              ; global & static initialisations
784   0000              ;--------------------------------------------------------
785   0000              	SECTION code_crt_init
786   0000              ;--------------------------------------------------------
787   0000              ; Home
788   0000              ;--------------------------------------------------------
789   0000              	SECTION IGNORE
790   0000              ;--------------------------------------------------------
791   0000              ; code
792   0000              ;--------------------------------------------------------
793   0000              	SECTION code_compiler
794   0000              ;	---------------------------------
795   0000              ; Function player_init
796   0000              ; ---------------------------------
797   0000              _player_init:
798   0000  CD 00 00    	call	___sdcc_enter_ix
799   0003  F5          	push	af
800   0004  3E 00       	ld	a, +((_class) & 0xFF)
801   0006  DD 86 04    	add	a,(ix+4)
802   0009  4F          	ld	c, a
803   000A  3E 00       	ld	a, +((_class) / 256)
804   000C  CE 00       	adc	a,0x00
805   000E  47          	ld	b, a
806   000F  3E 10       	ld	a,0x10
807   0011  02          	ld	(bc), a
808   0012  3E 00       	ld	a, +((_tile) & 0xFF)
809   0014  DD 86 04    	add	a,(ix+4)
810   0017  4F          	ld	c, a
811   0018  3E 00       	ld	a, +((_tile) / 256)
812   001A  CE 00       	adc	a,0x00
813   001C  47          	ld	b, a
814   001D  DD 7E 07    	ld	a,(ix+7)
815   0020  02          	ld	(bc), a
816   0021  3E 00       	ld	a, +((_lin) & 0xFF)
817   0023  DD 86 04    	add	a,(ix+4)
818   0026  4F          	ld	c, a
819   0027  3E 00       	ld	a, +((_lin) / 256)
820   0029  CE 00       	adc	a,0x00
821   002B  47          	ld	b, a
822   002C  DD 7E 05    	ld	a,(ix+5)
823   002F  02          	ld	(bc), a
824   0030  3E 00       	ld	a, +((_col) & 0xFF)
825   0032  DD 86 04    	add	a,(ix+4)
826   0035  4F          	ld	c, a
827   0036  3E 00       	ld	a, +((_col) / 256)
828   0038  CE 00       	adc	a,0x00
829   003A  47          	ld	b, a
830   003B  DD 7E 06    	ld	a,(ix+6)
831   003E  02          	ld	(bc), a
832   003F  3E 00       	ld	a, +((_colint) & 0xFF)
833   0041  DD 86 04    	add	a,(ix+4)
834   0044  4F          	ld	c, a
835   0045  3E 00       	ld	a, +((_colint) / 256)
836   0047  CE 00       	adc	a,0x00
837   0049  47          	ld	b, a
838   004A  AF          	xor	a, a
839   004B  02          	ld	(bc), a
840   004C  3E 00       	ld	a, +((_state) & 0xFF)
841   004E  DD 86 04    	add	a,(ix+4)
842   0051  4F          	ld	c, a
843   0052  3E 00       	ld	a, +((_state) / 256)
844   0054  CE 00       	adc	a,0x00
845   0056  47          	ld	b, a
846   0057  AF          	xor	a, a
847   0058  02          	ld	(bc), a
848   0059  3E 00       	ld	a, +((_state_a) & 0xFF)
849   005B  DD 86 04    	add	a,(ix+4)
850   005E  4F          	ld	c, a
851   005F  3E 00       	ld	a, +((_state_a) / 256)
852   0061  CE 00       	adc	a,0x00
853   0063  47          	ld	b, a
854   0064  AF          	xor	a, a
855   0065  02          	ld	(bc), a
856   0066  3E 00       	ld	a, +((_jump_lin) & 0xFF)
857   0068  DD 86 04    	add	a,(ix+4)
858   006B  5F          	ld	e, a
859   006C  3E 00       	ld	a, +((_jump_lin) / 256)
860   006E  CE 00       	adc	a,0x00
861   0070  57          	ld	d, a
862   0071  DD 7E 05    	ld	a,(ix+5)
863   0074  12          	ld	(de), a
864   0075  DD 6E 04    	ld	l,(ix+4)
865   0078  26 00       	ld	h,0x00
866   007A  29          	add	hl,hl
867   007B  11 00 00    	ld	de,_last_time
868   007E  19          	add	hl, de
869   007F  E3          	ex	(sp), hl
870   0080  E1          	pop	hl
871   0081  ED 5B 00 00 	ld	de,(_curr_time)
872   0085  E5          	push	hl
873   0086  73          	ld	(hl), e
874   0087  23          	inc	hl
875   0088  72          	ld	(hl), d
876   0089  3E 00       	ld	a, +((_sprite_speed_alt) & 0xFF)
877   008B  DD 86 04    	add	a,(ix+4)
878   008E  5F          	ld	e, a
879   008F  3E 00       	ld	a, +((_sprite_speed_alt) / 256)
880   0091  CE 00       	adc	a,0x00
881   0093  57          	ld	d, a
882   0094  AF          	xor	a, a
883   0095  12          	ld	(de), a
884   0096  0A          	ld	a, (bc)
885   0097  F6 11       	or	a,+(0x01|0x10)
886   0099  02          	ld	(bc),a
887   009A  21 00 00    	ld	hl,_player_hit_col
888   009D  36 00       	ld	(hl),0x00
889   009F  21 00 00    	ld	hl,_player_hit_lin
890   00A2  36 00       	ld	(hl),0x00
891   00A4  21 00 00    	ld	hl,_player_slide
892   00A7  36 00       	ld	(hl),0x00
893   00A9  DD 66 06    	ld	h,(ix+6)
894   00AC  DD 6E 05    	ld	l,(ix+5)
895   00AF  E5          	push	hl
896   00B0  DD 66 07    	ld	h,(ix+7)
897   00B3  DD 6E 04    	ld	l,(ix+4)
898   00B6  E5          	push	hl
899   00B7  CD 00 00    	call	_NIRVANAP_spriteT_callee
900   00BA  F1          	pop	af
901   00BB  DD E1       	pop	ix
902   00BD  C9          	ret
903   00BE              	SECTION code_compiler
904   00BE              ;	---------------------------------
905   00BE              ; Function player_check_input
906   00BE              ; ---------------------------------
907   00BE              _player_check_input:
908   00BE  21 00 00    	ld	hl,_dirs
909   00C1  7E          	ld	a, (hl)
910   00C2  CB 07       	rlc	a
911   00C4  E6 01       	and	a,0x01
912   00C6  CB 47       	bit	0, a
913   00C8  20 1D       	jr	NZ,l_player_check_input_00104
914   00CA  CB 56       	bit	2, (hl)
915   00CC  20 19       	jr	NZ,l_player_check_input_00104
916   00CE  21 00 00    	ld	hl,_dirs
917   00D1  CB 5E       	bit	3, (hl)
918   00D3  20 12       	jr	NZ,l_player_check_input_00104
919   00D5  21 00 00    	ld	hl,_dirs
920   00D8  CB 46       	bit	0, (hl)
921   00DA  20 0B       	jr	NZ,l_player_check_input_00104
922   00DC  21 00 00    	ld	hl,_dirs
923   00DF  CB 4E       	bit	1, (hl)
924   00E1  20 04       	jr	NZ,l_player_check_input_00104
925   00E3  2E 00       	ld	l,0x00
926   00E5  18 02       	jr	l_player_check_input_00105
927   00E7              l_player_check_input_00104:
928   00E7  2E 01       	ld	l,0x01
929   00E9              l_player_check_input_00105:
930   00E9  C9          	ret
931   00EA              	SECTION code_compiler
932   00EA              ;	---------------------------------
933   00EA              ; Function player_collision
934   00EA              ; ---------------------------------
935   00EA              _player_collision:
936   00EA  2A 00 00    	ld	hl,(_sprite)
937   00ED  26 00       	ld	h,0x00
938   00EF  01 00 00    	ld	bc,_class
939   00F2  09          	add	hl,bc
940   00F3  7E          	ld	a,(hl)
941   00F4  B7          	or	a,a
942   00F5  20 03       	jr	NZ,l_player_collision_00102
943   00F7  6F          	ld	l,a
944   00F8  18 48       	jr	l_player_collision_00112
945   00FA              l_player_collision_00102:
946   00FA  2A 00 00    	ld	hl,(_sprite)
947   00FD  26 00       	ld	h,0x00
948   00FF  01 00 00    	ld	bc,_state
949   0102  09          	add	hl,bc
950   0103  7E          	ld	a,(hl)
951   0104  CB 67       	bit	4, a
952   0106  28 04       	jr	Z,l_player_collision_00104
953   0108  2E 00       	ld	l,0x00
954   010A  18 36       	jr	l_player_collision_00112
955   010C              l_player_collision_00104:
956   010C  CB 6F       	bit	5, a
957   010E  28 04       	jr	Z,l_player_collision_00106
958   0110  2E 00       	ld	l,0x00
959   0112  18 2E       	jr	l_player_collision_00112
960   0114              l_player_collision_00106:
961   0114  21 00 00    	ld	hl,_player_hit_count
962   0117  36 00       	ld	(hl),0x00
963   0119  21 00 00    	ld	hl,_enemies
964   011C  36 00       	ld	(hl),0x00
965   011E              l_player_collision_00110:
966   011E  2A 00 00    	ld	hl,(_enemies)
967   0121  26 0E       	ld	h,0x0e
968   0123  3A 00 00    	ld	a,(_sprite)
969   0126  E5          	push	hl
970   0127  F5          	push	af
971   0128  33          	inc	sp
972   0129  CD 00 00    	call	_spr_collision_check
973   012C  F1          	pop	af
974   012D  33          	inc	sp
975   012E  7D          	ld	a, l
976   012F  B7          	or	a, a
977   0130  28 04       	jr	Z,l_player_collision_00111
978   0132  21 00 00    	ld	hl,_player_hit_count
979   0135  34          	inc	(hl)
980   0136              l_player_collision_00111:
981   0136  21 00 00    	ld	hl,_enemies
982   0139  7E          	ld	a,(hl)
983   013A  3C          	inc	a
984   013B  77          	ld	(hl),a
985   013C  D6 06       	sub	a,0x06
986   013E  38 DE       	jr	C,l_player_collision_00110
987   0140  2E 00       	ld	l,0x00
988   0142              l_player_collision_00112:
989   0142  C9          	ret
990   0143              	SECTION code_compiler
991   0143              ;	---------------------------------
992   0143              ; Function player_kill
993   0143              ; ---------------------------------
994   0143              _player_kill:
995   0143  01 00 00    	ld	bc,_state+0
996   0146  2A 00 00    	ld	hl,(_sprite)
997   0149  26 00       	ld	h,0x00
998   014B  09          	add	hl,bc
999   014C  CB 6E       	bit	5,(hl)
1000  014E  C2 15 02    	jp	NZ,l_player_kill_00109
1001  0151  C5          	push	bc
1002  0152  CD 00 00    	call	_sound_hit_brick
1003  0155  C1          	pop	bc
1004  0156  79          	ld	a, c
1005  0157  21 00 00    	ld	hl,_sprite
1006  015A  86          	add	a, (hl)
1007  015B  5F          	ld	e, a
1008  015C  78          	ld	a, b
1009  015D  CE 00       	adc	a,0x00
1010  015F  57          	ld	d, a
1011  0160  1A          	ld	a, (de)
1012  0161  F6 20       	or	a,0x20
1013  0163  12          	ld	(de), a
1014  0164  3E 00       	ld	a, +((_sprite_speed_alt) & 0xFF)
1015  0166  86          	add	a, (hl)
1016  0167  5F          	ld	e, a
1017  0168  3E 00       	ld	a, +((_sprite_speed_alt) / 256)
1018  016A  CE 00       	adc	a,0x00
1019  016C  57          	ld	d, a
1020  016D  3E 03       	ld	a,0x03
1021  016F  12          	ld	(de), a
1022  0170  79          	ld	a, c
1023  0171  86          	add	a, (hl)
1024  0172  4F          	ld	c, a
1025  0173  78          	ld	a, b
1026  0174  CE 00       	adc	a,0x00
1027  0176  47          	ld	b, a
1028  0177  0A          	ld	a, (bc)
1029  0178  CB 57       	bit	2, a
1030  017A  28 0D       	jr	Z,l_player_kill_00102
1031  017C  2A 00 00    	ld	hl,(_sprite)
1032  017F  26 00       	ld	h,0x00
1033  0181  01 00 00    	ld	bc,_tile
1034  0184  09          	add	hl,bc
1035  0185  36 40       	ld	(hl),0x40
1036  0187  18 0B       	jr	l_player_kill_00103
1037  0189              l_player_kill_00102:
1038  0189  2A 00 00    	ld	hl,(_sprite)
1039  018C  26 00       	ld	h,0x00
1040  018E  01 00 00    	ld	bc,_tile
1041  0191  09          	add	hl,bc
1042  0192  36 48       	ld	(hl),0x48
1043  0194              l_player_kill_00103:
1044  0194  CD 1B 08    	call	_player_hit_platform_clear
1045  0197  2A 00 00    	ld	hl,(_sprite)
1046  019A  26 00       	ld	h,0x00
1047  019C  01 00 00    	ld	bc,_col
1048  019F  09          	add	hl,bc
1049  01A0  4E          	ld	c, (hl)
1050  01A1  2A 00 00    	ld	hl,(_sprite)
1051  01A4  26 00       	ld	h,0x00
1052  01A6  11 00 00    	ld	de,_lin
1053  01A9  19          	add	hl,de
1054  01AA  46          	ld	b, (hl)
1055  01AB  2A 00 00    	ld	hl,(_sprite)
1056  01AE  26 00       	ld	h,0x00
1057  01B0  11 00 00    	ld	de,_tile
1058  01B3  19          	add	hl,de
1059  01B4  56          	ld	d, (hl)
1060  01B5  79          	ld	a,c
1061  01B6  21 00 00    	ld	hl,_sprite
1062  01B9  F5          	push	af
1063  01BA  33          	inc	sp
1064  01BB  4A          	ld	c, d
1065  01BC  7E          	ld	a,(hl)
1066  01BD  C5          	push	bc
1067  01BE  F5          	push	af
1068  01BF  33          	inc	sp
1069  01C0  CD 00 00    	call	_NIRVANAP_spriteT_callee
1070  01C3  01 00 00    	ld	bc,_spr_timer+0
1071  01C6  2A 00 00    	ld	hl,(_sprite)
1072  01C9  26 00       	ld	h,0x00
1073  01CB  29          	add	hl, hl
1074  01CC  09          	add	hl,bc
1075  01CD  ED 5B 00 00 	ld	de,(_curr_time)
1076  01D1  73          	ld	(hl),e
1077  01D2  23          	inc	hl
1078  01D3  72          	ld	(hl),d
1079  01D4  3A 00 00    	ld	a,(_sprite)
1080  01D7  D6 07       	sub	a,0x07
1081  01D9  20 1E       	jr	NZ,l_player_kill_00105
1082  01DB  01 00 00    	ld	bc,_state_a+0
1083  01DE  79          	ld	a, c
1084  01DF  21 00 00    	ld	hl,_sprite
1085  01E2  86          	add	a, (hl)
1086  01E3  5F          	ld	e, a
1087  01E4  78          	ld	a, b
1088  01E5  CE 00       	adc	a,0x00
1089  01E7  57          	ld	d, a
1090  01E8  1A          	ld	a, (de)
1091  01E9  F6 08       	or	a,0x08
1092  01EB  12          	ld	(de), a
1093  01EC  79          	ld	a, c
1094  01ED  86          	add	a, (hl)
1095  01EE  4F          	ld	c, a
1096  01EF  78          	ld	a, b
1097  01F0  CE 00       	adc	a,0x00
1098  01F2  47          	ld	b, a
1099  01F3  0A          	ld	a, (bc)
1100  01F4  E6 EF       	and	a,0xef
1101  01F6  02          	ld	(bc), a
1102  01F7  18 1C       	jr	l_player_kill_00109
1103  01F9              l_player_kill_00105:
1104  01F9  01 00 00    	ld	bc,_state_a+0
1105  01FC  79          	ld	a, c
1106  01FD  21 00 00    	ld	hl,_sprite
1107  0200  86          	add	a, (hl)
1108  0201  5F          	ld	e, a
1109  0202  78          	ld	a, b
1110  0203  CE 00       	adc	a,0x00
1111  0205  57          	ld	d, a
1112  0206  1A          	ld	a, (de)
1113  0207  F6 10       	or	a,0x10
1114  0209  12          	ld	(de), a
1115  020A  79          	ld	a, c
1116  020B  86          	add	a, (hl)
1117  020C  4F          	ld	c, a
1118  020D  78          	ld	a, b
1119  020E  CE 00       	adc	a,0x00
1120  0210  47          	ld	b, a
1121  0211  0A          	ld	a, (bc)
1122  0212  E6 F7       	and	a,0xf7
1123  0214  02          	ld	(bc), a
1124  0215              l_player_kill_00109:
1125  0215  C9          	ret
1126  0216              	SECTION code_compiler
1127  0216              ;	---------------------------------
1128  0216              ; Function player_restart
1129  0216              ; ---------------------------------
1130  0216              _player_restart:
1131  0216  CD 00 00    	call	___sdcc_enter_ix
1132  0219  F5          	push	af
1133  021A  4D          	ld	c, l
1134  021B  21 00 00    	ld	hl,_ay_effect_15
1135  021E  CD 00 00    	call	_ay_fx_play
1136  0221  C5          	push	bc
1137  0222  21 0E 64    	ld	hl,0x640e
1138  0225  E5          	push	hl
1139  0226  21 07 00    	ld	hl,0x0007
1140  0229  E5          	push	hl
1141  022A  CD 00 00    	call	_player_init
1142  022D  F1          	pop	af
1143  022E  F1          	pop	af
1144  022F  C1          	pop	bc
1145  0230  11 00 00    	ld	de,_state+0
1146  0233  69          	ld	l,c
1147  0234  26 00       	ld	h,0x00
1148  0236  19          	add	hl, de
1149  0237  CB E6       	set	4, (hl)
1150  0239  11 00 00    	ld	de,_state_a+0
1151  023C  69          	ld	l,c
1152  023D  26 00       	ld	h,0x00
1153  023F  19          	add	hl, de
1154  0240  CB C6       	set	0, (hl)
1155  0242  11 00 00    	ld	de,_spr_timer+0
1156  0245  69          	ld	l, c
1157  0246  26 00       	ld	h,0x00
1158  0248  29          	add	hl, hl
1159  0249  19          	add	hl,de
1160  024A  E3          	ex	(sp), hl
1161  024B  E1          	pop	hl
1162  024C  ED 5B 00 00 	ld	de,(_curr_time)
1163  0250  E5          	push	hl
1164  0251  73          	ld	(hl), e
1165  0252  23          	inc	hl
1166  0253  72          	ld	(hl), d
1167  0254  11 00 00    	ld	de,_sprite_speed_alt+0
1168  0257  69          	ld	l,c
1169  0258  26 00       	ld	h,0x00
1170  025A  19          	add	hl, de
1171  025B  F1          	pop	af
1172  025C  36 08       	ld	(hl),0x08
1173  025E  DD E1       	pop	ix
1174  0260  C9          	ret
1175  0261              	SECTION code_compiler
1176  0261              ;	---------------------------------
1177  0261              ; Function player_lost_life
1178  0261              ; ---------------------------------
1179  0261              _player_lost_life:
1180  0261  CD 00 00    	call	_sound_hit_enemy
1181  0264  21 00 00    	ld	hl,_player_lives
1182  0267  35          	dec (hl)
1183  0268  20 09       	jr	NZ,l_player_lost_life_00102
1184  026A  21 00 00    	ld	hl,_game_over
1185  026D  36 01       	ld	(hl),0x01
1186  026F  2E 00       	ld	l,0x00
1187  0271  18 05       	jr	l_player_lost_life_00103
1188  0273              l_player_lost_life_00102:
1189  0273  CD 00 00    	call	_game_print_lives
1190  0276  2E 01       	ld	l,0x01
1191  0278              l_player_lost_life_00103:
1192  0278  C9          	ret
1193  0279              	SECTION code_compiler
1194  0279              ;	---------------------------------
1195  0279              ; Function player_turn
1196  0279              ; ---------------------------------
1197  0279              _player_turn:
1198  0279  2A 00 00    	ld	hl,(_sprite)
1199  027C  26 00       	ld	h,0x00
1200  027E  01 00 00    	ld	bc,_class
1201  0281  09          	add	hl,bc
1202  0282  7E          	ld	a,(hl)
1203  0283  D6 10       	sub	a,0x10
1204  0285  C0          	ret	NZ
1205  0286  3A 00 00    	ld	a,(_player_lives)
1206  0289  B7          	or	a, a
1207  028A  C8          	ret	Z
1208  028B  21 00 00    	ld	hl,_sprite
1209  028E  CD 00 00    	call	_spr_chktime
1210  0291  7D          	ld	a, l
1211  0292  B7          	or	a, a
1212  0293  C8          	ret	Z
1213  0294  21 00 00    	ld	hl,_dirs
1214  0297  36 00       	ld	(hl),0x00
1215  0299  21 00 00    	ld	hl,_k1
1216  029C  E5          	push	hl
1217  029D  2A 00 00    	ld	hl,(_joyfunc1)
1218  02A0  CD 00 00    	call	___sdcc_call_hl
1219  02A3  F1          	pop	af
1220  02A4  7D          	ld	a,l
1221  02A5  32 00 00    	ld	(_dirs),a
1222  02A8  CD AE 02    	call	_player_move
1223  02AB  C3 EA 00    	jp  _player_collision
1224  02AE              	SECTION code_compiler
1225  02AE              ;	---------------------------------
1226  02AE              ; Function player_move
1227  02AE              ; ---------------------------------
1228  02AE              _player_move:
1229  02AE  2A 00 00    	ld	hl,(_sprite)
1230  02B1  26 00       	ld	h,0x00
1231  02B3  01 00 00    	ld	bc,_lin
1232  02B6  09          	add	hl,bc
1233  02B7  7E          	ld	a,(hl)
1234  02B8  32 00 00    	ld	(_s_lin0),a
1235  02BB  2A 00 00    	ld	hl,(_sprite)
1236  02BE  26 00       	ld	h,0x00
1237  02C0  01 00 00    	ld	bc,_col
1238  02C3  09          	add	hl,bc
1239  02C4  7E          	ld	a,(hl)
1240  02C5  32 00 00    	ld	(_s_col0),a
1241  02C8  2A 00 00    	ld	hl,(_sprite)
1242  02CB  26 00       	ld	h,0x00
1243  02CD  01 00 00    	ld	bc,_tile
1244  02D0  09          	add	hl,bc
1245  02D1  4E          	ld	c, (hl)
1246  02D2  3A 00 00    	ld	a,(_sprite)
1247  02D5  5F          	ld	e,a
1248  02D6  16 00       	ld	d,0x00
1249  02D8  21 00 00    	ld	hl,_colint
1250  02DB  19          	add	hl,de
1251  02DC  7E          	ld	a,(hl)
1252  02DD  81          	add	a,c
1253  02DE  32 00 00    	ld	(_s_tile0),a
1254  02E1  2A 00 00    	ld	hl,(_sprite)
1255  02E4  26 00       	ld	h,0x00
1256  02E6  01 00 00    	ld	bc,_state
1257  02E9  09          	add	hl,bc
1258  02EA  7E          	ld	a,(hl)
1259  02EB  CB 47       	bit	0,a
1260  02ED  32 00 00    	ld	(_s_state),a
1261  02F0  20 07       	jr	NZ,l_player_move_00107
1262  02F2  21 00 00    	ld	hl,_s_state
1263  02F5  CB 4E       	bit	1, (hl)
1264  02F7  28 1E       	jr	Z,l_player_move_00108
1265  02F9              l_player_move_00107:
1266  02F9  CD 00 00    	call	_spr_move_jump
1267  02FC  7D          	ld	a, l
1268  02FD  B7          	or	a, a
1269  02FE  28 38       	jr	Z,l_player_move_00109
1270  0300  2E 00       	ld	l,0x00
1271  0302  CD B6 03    	call	_player_check_stairs
1272  0305  3A 00 00    	ld	a,(_player_over_stair)
1273  0308  B7          	or	a, a
1274  0309  20 05       	jr	NZ,l_player_move_00102
1275  030B  2E 01       	ld	l,0x01
1276  030D  CD B6 03    	call	_player_check_stairs
1277  0310              l_player_move_00102:
1278  0310  2E 54       	ld	l,0x54
1279  0312  CD 5E 04    	call	_player_tile
1280  0315  18 21       	jr	l_player_move_00109
1281  0317              l_player_move_00108:
1282  0317  CD B4 04    	call	_player_move_input
1283  031A  7D          	ld	a, l
1284  031B  B7          	or	a, a
1285  031C  20 17       	jr	NZ,l_player_move_00106
1286  031E  2A 00 00    	ld	hl,(_sprite)
1287  0321  26 00       	ld	h,0x00
1288  0323  01 00 00    	ld	bc,_colint
1289  0326  09          	add	hl,bc
1290  0327  AF          	xor	a,a
1291  0328  77          	ld	(hl),a
1292  0329  2E 64       	ld	l,0x64
1293  032B  CD 5E 04    	call	_player_tile
1294  032E  21 00 00    	ld	hl,_s_state
1295  0331  7E          	ld	a,(hl)
1296  0332  E6 F3       	and	a,+(0xf7&0xfb)
1297  0334  77          	ld	(hl),a
1298  0335              l_player_move_00106:
1299  0335  CD 5F 08    	call	_player_check_floor
1300  0338              l_player_move_00109:
1301  0338  CD 00 00    	call	_spr_redraw
1302  033B  7D          	ld	a, l
1303  033C  B7          	or	a, a
1304  033D  28 03       	jr	Z,l_player_move_00112
1305  033F  CD 3A 06    	call	_player_check_map
1306  0342              l_player_move_00112:
1307  0342  2A 00 00    	ld	hl,(_sprite)
1308  0345  26 00       	ld	h,0x00
1309  0347  29          	add	hl, hl
1310  0348  11 00 00    	ld	de,_spr_timer
1311  034B  19          	add	hl, de
1312  034C  4E          	ld	c, (hl)
1313  034D  23          	inc	hl
1314  034E  46          	ld	b, (hl)
1315  034F  21 04 00    	ld	hl,0x0004
1316  0352  E5          	push	hl
1317  0353  C5          	push	bc
1318  0354  CD 00 00    	call	_game_check_time
1319  0357  F1          	pop	af
1320  0358  F1          	pop	af
1321  0359  7D          	ld	a, l
1322  035A  B7          	or	a, a
1323  035B  28 03       	jr	Z,l_player_move_00114
1324  035D  CD 1B 08    	call	_player_hit_platform_clear
1325  0360              l_player_move_00114:
1326  0360  2A 00 00    	ld	hl,(_sprite)
1327  0363  26 00       	ld	h,0x00
1328  0365  01 00 00    	ld	bc,_state
1329  0368  09          	add	hl,bc
1330  0369  3A 00 00    	ld	a,(_s_state)
1331  036C  77          	ld	(hl),a
1332  036D  2E 00       	ld	l,0x00
1333  036F  C9          	ret
1334  0370              	SECTION code_compiler
1335  0370              ;	---------------------------------
1336  0370              ; Function player_check_stairs_down
1337  0370              ; ---------------------------------
1338  0370              _player_check_stairs_down:
1339  0370  CD 00 00    	call	___sdcc_enter_ix
1340  0373  3B          	dec	sp
1341  0374  2A 00 00    	ld	hl,(_sprite)
1342  0377  26 00       	ld	h,0x00
1343  0379  5D          	ld	e,l
1344  037A  01 00 00    	ld	bc,_col
1345  037D  09          	add	hl,bc
1346  037E  46          	ld	b,(hl)
1347  037F  16 00       	ld	d,0x00
1348  0381  21 00 00    	ld	hl,_lin
1349  0384  19          	add	hl,de
1350  0385  7E          	ld	a,(hl)
1351  0386  C6 10       	add	a,0x10
1352  0388  4F          	ld	c,a
1353  0389  C5          	push	bc
1354  038A  CD 00 00    	call	_spr_calc_index
1355  038D  F1          	pop	af
1356  038E  7D          	ld	a,l
1357  038F  32 00 00    	ld	(_sprite_curr_index),a
1358  0392  4F          	ld	c,a
1359  0393  06 00       	ld	b,0x00
1360  0395  21 00 00    	ld	hl,_scr_map
1361  0398  09          	add	hl,bc
1362  0399  7E          	ld	a,(hl)
1363  039A  4F          	ld	c,a
1364  039B  D6 38       	sub	a,0x38
1365  039D  38 05       	jr	C,l_player_check_stairs_down_00105
1366  039F  3E 3C       	ld	a,0x3c
1367  03A1  91          	sub	a, c
1368  03A2  30 04       	jr	NC,l_player_check_stairs_down_00106
1369  03A4              l_player_check_stairs_down_00105:
1370  03A4  3E 00       	ld	a,0x00
1371  03A6  18 02       	jr	l_player_check_stairs_down_00107
1372  03A8              l_player_check_stairs_down_00106:
1373  03A8  3E 01       	ld	a,0x01
1374  03AA              l_player_check_stairs_down_00107:
1375  03AA  B7          	or	a, a
1376  03AB  28 05       	jr	Z,l_player_check_stairs_down_00103
1377  03AD  21 00 00    	ld	hl,_player_over_stair
1378  03B0  36 01       	ld	(hl),0x01
1379  03B2              l_player_check_stairs_down_00103:
1380  03B2  33          	inc	sp
1381  03B3  DD E1       	pop	ix
1382  03B5  C9          	ret
1383  03B6              	SECTION code_compiler
1384  03B6              ;	---------------------------------
1385  03B6              ; Function player_check_stairs
1386  03B6              ; ---------------------------------
1387  03B6              _player_check_stairs:
1388  03B6  CD 00 00    	call	___sdcc_enter_ix
1389  03B9  3B          	dec	sp
1390  03BA  5D          	ld	e, l
1391  03BB  2A 00 00    	ld	hl,(_sprite)
1392  03BE  26 00       	ld	h,0x00
1393  03C0  01 00 00    	ld	bc,_col
1394  03C3  09          	add	hl,bc
1395  03C4  7E          	ld	a,(hl)
1396  03C5  83          	add	a,e
1397  03C6  57          	ld	d,a
1398  03C7  2A 00 00    	ld	hl,(_sprite)
1399  03CA  26 00       	ld	h,0x00
1400  03CC  01 00 00    	ld	bc,_lin
1401  03CF  09          	add	hl,bc
1402  03D0  46          	ld	b, (hl)
1403  03D1  D5          	push	de
1404  03D2  58          	ld	e,b
1405  03D3  D5          	push	de
1406  03D4  CD 00 00    	call	_spr_calc_index
1407  03D7  F1          	pop	af
1408  03D8  D1          	pop	de
1409  03D9  7D          	ld	a,l
1410  03DA  32 00 00    	ld	(_sprite_curr_index),a
1411  03DD  4F          	ld	c,a
1412  03DE  06 00       	ld	b,0x00
1413  03E0  21 00 00    	ld	hl,_scr_map
1414  03E3  09          	add	hl,bc
1415  03E4  7E          	ld	a,(hl)
1416  03E5  4F          	ld	c,a
1417  03E6  D6 38       	sub	a,0x38
1418  03E8  38 05       	jr	C,l_player_check_stairs_00111
1419  03EA  3E 3C       	ld	a,0x3c
1420  03EC  91          	sub	a, c
1421  03ED  30 04       	jr	NC,l_player_check_stairs_00112
1422  03EF              l_player_check_stairs_00111:
1423  03EF  0E 00       	ld	c,0x00
1424  03F1  18 02       	jr	l_player_check_stairs_00113
1425  03F3              l_player_check_stairs_00112:
1426  03F3  0E 01       	ld	c,0x01
1427  03F5              l_player_check_stairs_00113:
1428  03F5  3E 00       	ld	a, +((_col) & 0xFF)
1429  03F7  21 00 00    	ld	hl,_sprite
1430  03FA  86          	add	a, (hl)
1431  03FB  6F          	ld	l, a
1432  03FC  3E 00       	ld	a, +((_col) / 256)
1433  03FE  CE 00       	adc	a,0x00
1434  0400  67          	ld	h, a
1435  0401  7E          	ld	a, (hl)
1436  0402  83          	add	a, e
1437  0403  47          	ld	b, a
1438  0404  2A 00 00    	ld	hl,(_sprite)
1439  0407  26 00       	ld	h,0x00
1440  0409  11 00 00    	ld	de,_lin
1441  040C  19          	add	hl,de
1442  040D  7E          	ld	a,(hl)
1443  040E  C6 0F       	add	a,0x0f
1444  0410  57          	ld	d, a
1445  0411  C5          	push	bc
1446  0412  4A          	ld	c, d
1447  0413  C5          	push	bc
1448  0414  CD 00 00    	call	_spr_calc_index
1449  0417  F1          	pop	af
1450  0418  C1          	pop	bc
1451  0419  7D          	ld	a,l
1452  041A  32 00 00    	ld	(_sprite_curr_index),a
1453  041D  5F          	ld	e,a
1454  041E  16 00       	ld	d,0x00
1455  0420  21 00 00    	ld	hl,_scr_map
1456  0423  19          	add	hl,de
1457  0424  7E          	ld	a,(hl)
1458  0425  47          	ld	b,a
1459  0426  D6 38       	sub	a,0x38
1460  0428  38 05       	jr	C,l_player_check_stairs_00114
1461  042A  3E 3C       	ld	a,0x3c
1462  042C  90          	sub	a, b
1463  042D  30 04       	jr	NC,l_player_check_stairs_00115
1464  042F              l_player_check_stairs_00114:
1465  042F  06 00       	ld	b,0x00
1466  0431  18 02       	jr	l_player_check_stairs_00116
1467  0433              l_player_check_stairs_00115:
1468  0433  06 01       	ld	b,0x01
1469  0435              l_player_check_stairs_00116:
1470  0435  79          	ld	a, c
1471  0436  B7          	or	a,a
1472  0437  20 03       	jr	NZ,l_player_check_stairs_00105
1473  0439  B0          	or	a,b
1474  043A  28 10       	jr	Z,l_player_check_stairs_00106
1475  043C              l_player_check_stairs_00105:
1476  043C  21 00 00    	ld	hl,_player_over_stair
1477  043F  7E          	ld	a, (hl)
1478  0440  B7          	or	a, a
1479  0441  20 17       	jr	NZ,l_player_check_stairs_00109
1480  0443  36 01       	ld	(hl),0x01
1481  0445  2E 66       	ld	l,0x66
1482  0447  CD 5E 04    	call	_player_tile
1483  044A  18 0E       	jr	l_player_check_stairs_00109
1484  044C              l_player_check_stairs_00106:
1485  044C  21 00 00    	ld	hl,_player_over_stair
1486  044F  7E          	ld	a, (hl)
1487  0450  B7          	or	a, a
1488  0451  28 07       	jr	Z,l_player_check_stairs_00109
1489  0453  36 00       	ld	(hl),0x00
1490  0455  2E 54       	ld	l,0x54
1491  0457  CD 5E 04    	call	_player_tile
1492  045A              l_player_check_stairs_00109:
1493  045A  33          	inc	sp
1494  045B  DD E1       	pop	ix
1495  045D  C9          	ret
1496  045E              	SECTION code_compiler
1497  045E              ;	---------------------------------
1498  045E              ; Function player_tile
1499  045E              ; ---------------------------------
1500  045E              _player_tile:
1501  045E  45          	ld	b, l
1502  045F  3A 00 00    	ld	a,(_player_over_stair)
1503  0462  B7          	or	a, a
1504  0463  28 0D       	jr	Z,l_player_tile_00105
1505  0465  2A 00 00    	ld	hl,(_sprite)
1506  0468  26 00       	ld	h,0x00
1507  046A  01 00 00    	ld	bc,_tile
1508  046D  09          	add	hl,bc
1509  046E  36 66       	ld	(hl),0x66
1510  0470  18 41       	jr	l_player_tile_00107
1511  0472              l_player_tile_00105:
1512  0472  78          	ld	a, b
1513  0473  D6 64       	sub	a,0x64
1514  0475  20 1F       	jr	NZ,l_player_tile_00102
1515  0477  2A 00 00    	ld	hl,(_sprite)
1516  047A  26 00       	ld	h,0x00
1517  047C  11 00 00    	ld	de,_tile
1518  047F  19          	add	hl,de
1519  0480  E5          	push	hl
1520  0481  3E 01       	ld	a,0x01
1521  0483  21 00 00    	ld	hl,_sprite
1522  0486  F5          	push	af
1523  0487  33          	inc	sp
1524  0488  7E          	ld	a, (hl)
1525  0489  48          	ld	c,b
1526  048A  47          	ld	b,a
1527  048B  C5          	push	bc
1528  048C  CD 00 00    	call	_spr_tile_dir
1529  048F  F1          	pop	af
1530  0490  33          	inc	sp
1531  0491  D1          	pop	de
1532  0492  7D          	ld	a,l
1533  0493  12          	ld	(de), a
1534  0494  18 1D       	jr	l_player_tile_00107
1535  0496              l_player_tile_00102:
1536  0496  2A 00 00    	ld	hl,(_sprite)
1537  0499  26 00       	ld	h,0x00
1538  049B  11 00 00    	ld	de,_tile
1539  049E  19          	add	hl,de
1540  049F  E5          	push	hl
1541  04A0  3E 08       	ld	a,0x08
1542  04A2  21 00 00    	ld	hl,_sprite
1543  04A5  F5          	push	af
1544  04A6  33          	inc	sp
1545  04A7  7E          	ld	a, (hl)
1546  04A8  48          	ld	c,b
1547  04A9  47          	ld	b,a
1548  04AA  C5          	push	bc
1549  04AB  CD 00 00    	call	_spr_tile_dir
1550  04AE  F1          	pop	af
1551  04AF  33          	inc	sp
1552  04B0  D1          	pop	de
1553  04B1  7D          	ld	a,l
1554  04B2  12          	ld	(de), a
1555  04B3              l_player_tile_00107:
1556  04B3  C9          	ret
1557  04B4              	SECTION code_compiler
1558  04B4              ;	---------------------------------
1559  04B4              ; Function player_move_input
1560  04B4              ; ---------------------------------
1561  04B4              _player_move_input:
1562  04B4  CD BE 00    	call	_player_check_input
1563  04B7  7D          	ld	a, l
1564  04B8  B7          	or	a, a
1565  04B9  CA 37 06    	jp	Z, l_player_move_input_00137
1566  04BC  21 00 00    	ld	hl,_dirs
1567  04BF  CB 7E       	bit	7, (hl)
1568  04C1  CA 4B 05    	jp	Z,l_player_move_input_00107
1569  04C4  CD 00 00    	call	_ay_is_playing
1570  04C7  7D          	ld	a, l
1571  04C8  D6 03       	sub	a,0x03
1572  04CA  28 06       	jr	Z,l_player_move_input_00102
1573  04CC  21 00 00    	ld	hl,_ay_effect_03
1574  04CF  CD 00 00    	call	_ay_fx_play
1575  04D2              l_player_move_input_00102:
1576  04D2  21 00 00    	ld	hl,_player_over_stair
1577  04D5  36 00       	ld	(hl),0x00
1578  04D7  CD 00 00    	call	_sound_jump
1579  04DA  2A 00 00    	ld	hl,(_sprite)
1580  04DD  26 00       	ld	h,0x00
1581  04DF  01 00 00    	ld	bc,_state
1582  04E2  09          	add	hl,bc
1583  04E3  CB 56       	bit	2,(hl)
1584  04E5  28 0D       	jr	Z,l_player_move_input_00104
1585  04E7  2A 00 00    	ld	hl,(_sprite)
1586  04EA  26 00       	ld	h,0x00
1587  04EC  01 00 00    	ld	bc,_colint
1588  04EF  09          	add	hl,bc
1589  04F0  AF          	xor	a,a
1590  04F1  77          	ld	(hl),a
1591  04F2  18 0B       	jr	l_player_move_input_00105
1592  04F4              l_player_move_input_00104:
1593  04F4  2A 00 00    	ld	hl,(_sprite)
1594  04F7  26 00       	ld	h,0x00
1595  04F9  01 00 00    	ld	bc,_colint
1596  04FC  09          	add	hl,bc
1597  04FD  36 02       	ld	(hl),0x02
1598  04FF              l_player_move_input_00105:
1599  04FF  21 00 00    	ld	hl,_s_state
1600  0502  7E          	ld	a,(hl)
1601  0503  F6 01       	or	a,0x01
1602  0505  E6 FD       	and	a,0xfd
1603  0507  77          	ld	(hl),a
1604  0508  2A 00 00    	ld	hl,(_sprite)
1605  050B  26 00       	ld	h,0x00
1606  050D  01 00 00    	ld	bc,_jump_lin
1607  0510  09          	add	hl,bc
1608  0511  4D          	ld	c,l
1609  0512  44          	ld	b,h
1610  0513  2A 00 00    	ld	hl,(_sprite)
1611  0516  26 00       	ld	h,0x00
1612  0518  11 00 00    	ld	de,_lin
1613  051B  19          	add	hl,de
1614  051C  7E          	ld	a,(hl)
1615  051D  02          	ld	(bc),a
1616  051E  2A 00 00    	ld	hl,(_sprite)
1617  0521  26 00       	ld	h,0x00
1618  0523  01 00 00    	ld	bc,_state
1619  0526  09          	add	hl,bc
1620  0527  3A 00 00    	ld	a,(_s_state)
1621  052A  77          	ld	(hl),a
1622  052B  2E 58       	ld	l,0x58
1623  052D  CD 5E 04    	call	_player_tile
1624  0530  2A 00 00    	ld	hl,(_sprite)
1625  0533  26 00       	ld	h,0x00
1626  0535  01 00 00    	ld	bc,_sprite_speed_alt
1627  0538  09          	add	hl,bc
1628  0539  36 02       	ld	(hl),0x02
1629  053B  21 00 00    	ld	hl,_player_slide
1630  053E  36 00       	ld	(hl),0x00
1631  0540  2A 00 00    	ld	hl,(_player_vel_y0)
1632  0543  22 00 00    	ld	(_player_vel_y),hl
1633  0546  2E 01       	ld	l,0x01
1634  0548  C3 39 06    	jp	l_player_move_input_00138
1635  054B              l_player_move_input_00107:
1636  054B  21 00 00    	ld	hl,_dirs
1637  054E  CB 5E       	bit	3, (hl)
1638  0550  28 33       	jr	Z,l_player_move_input_00111
1639  0552  21 00 00    	ld	hl,_s_state
1640  0555  7E          	ld	a,(hl)
1641  0556  F6 04       	or	a,0x04
1642  0558  E6 F7       	and	a,0xf7
1643  055A  77          	ld	(hl),a
1644  055B  01 00 00    	ld	bc,_state_a+0
1645  055E  79          	ld	a, c
1646  055F  21 00 00    	ld	hl,_sprite
1647  0562  86          	add	a, (hl)
1648  0563  5F          	ld	e, a
1649  0564  78          	ld	a, b
1650  0565  CE 00       	adc	a,0x00
1651  0567  57          	ld	d, a
1652  0568  1A          	ld	a, (de)
1653  0569  F6 10       	or	a,0x10
1654  056B  12          	ld	(de), a
1655  056C  79          	ld	a, c
1656  056D  86          	add	a, (hl)
1657  056E  4F          	ld	c, a
1658  056F  78          	ld	a, b
1659  0570  CE 00       	adc	a,0x00
1660  0572  47          	ld	b, a
1661  0573  0A          	ld	a, (bc)
1662  0574  E6 F7       	and	a,0xf7
1663  0576  02          	ld	(bc), a
1664  0577  3A 00 00    	ld	a,(_player_over_stair)
1665  057A  B7          	or	a, a
1666  057B  28 05       	jr	Z,l_player_move_input_00109
1667  057D  2E 00       	ld	l,0x00
1668  057F  CD B6 03    	call	_player_check_stairs
1669  0582              l_player_move_input_00109:
1670  0582  CD 00 00    	call	_spr_move_horizontal
1671  0585              l_player_move_input_00111:
1672  0585  21 00 00    	ld	hl,_dirs
1673  0588  CB 56       	bit	2, (hl)
1674  058A  28 33       	jr	Z,l_player_move_input_00115
1675  058C  21 00 00    	ld	hl,_s_state
1676  058F  7E          	ld	a,(hl)
1677  0590  F6 08       	or	a,0x08
1678  0592  E6 FB       	and	a,0xfb
1679  0594  77          	ld	(hl),a
1680  0595  01 00 00    	ld	bc,_state_a+0
1681  0598  79          	ld	a, c
1682  0599  21 00 00    	ld	hl,_sprite
1683  059C  86          	add	a, (hl)
1684  059D  5F          	ld	e, a
1685  059E  78          	ld	a, b
1686  059F  CE 00       	adc	a,0x00
1687  05A1  57          	ld	d, a
1688  05A2  1A          	ld	a, (de)
1689  05A3  F6 08       	or	a,0x08
1690  05A5  12          	ld	(de), a
1691  05A6  79          	ld	a, c
1692  05A7  86          	add	a, (hl)
1693  05A8  4F          	ld	c, a
1694  05A9  78          	ld	a, b
1695  05AA  CE 00       	adc	a,0x00
1696  05AC  47          	ld	b, a
1697  05AD  0A          	ld	a, (bc)
1698  05AE  E6 EF       	and	a,0xef
1699  05B0  02          	ld	(bc), a
1700  05B1  3A 00 00    	ld	a,(_player_over_stair)
1701  05B4  B7          	or	a, a
1702  05B5  28 05       	jr	Z,l_player_move_input_00113
1703  05B7  2E 00       	ld	l,0x00
1704  05B9  CD B6 03    	call	_player_check_stairs
1705  05BC              l_player_move_input_00113:
1706  05BC  CD 00 00    	call	_spr_move_horizontal
1707  05BF              l_player_move_input_00115:
1708  05BF  21 00 00    	ld	hl,_dirs
1709  05C2  CB 46       	bit	0, (hl)
1710  05C4  28 2B       	jr	Z,l_player_move_input_00125
1711  05C6  2E 00       	ld	l,0x00
1712  05C8  CD B6 03    	call	_player_check_stairs
1713  05CB  3A 00 00    	ld	a,(_player_over_stair)
1714  05CE  B7          	or	a, a
1715  05CF  28 0E       	jr	Z,l_player_move_input_00122
1716  05D1  CD 00 00    	call	_spr_move_up
1717  05D4  7D          	ld	a, l
1718  05D5  B7          	or	a, a
1719  05D6  28 19       	jr	Z,l_player_move_input_00125
1720  05D8  21 00 00    	ld	hl,_player_over_stair
1721  05DB  36 00       	ld	(hl),0x00
1722  05DD  18 12       	jr	l_player_move_input_00125
1723  05DF              l_player_move_input_00122:
1724  05DF  21 00 00    	ld	hl,_dirs
1725  05E2  CB 5E       	bit	3, (hl)
1726  05E4  20 0B       	jr	NZ,l_player_move_input_00125
1727  05E6  21 00 00    	ld	hl,_dirs
1728  05E9  CB 56       	bit	2, (hl)
1729  05EB  20 04       	jr	NZ,l_player_move_input_00125
1730  05ED  2E 00       	ld	l,0x00
1731  05EF  18 48       	jr	l_player_move_input_00138
1732  05F1              l_player_move_input_00125:
1733  05F1  21 00 00    	ld	hl,_dirs
1734  05F4  CB 4E       	bit	1, (hl)
1735  05F6  28 29       	jr	Z,l_player_move_input_00135
1736  05F8  CD 70 03    	call	_player_check_stairs_down
1737  05FB  3A 00 00    	ld	a,(_player_over_stair)
1738  05FE  B7          	or	a, a
1739  05FF  28 0E       	jr	Z,l_player_move_input_00132
1740  0601  CD 00 00    	call	_spr_move_down
1741  0604  7D          	ld	a, l
1742  0605  B7          	or	a, a
1743  0606  28 19       	jr	Z,l_player_move_input_00135
1744  0608  21 00 00    	ld	hl,_player_over_stair
1745  060B  36 00       	ld	(hl),0x00
1746  060D  18 12       	jr	l_player_move_input_00135
1747  060F              l_player_move_input_00132:
1748  060F  21 00 00    	ld	hl,_dirs
1749  0612  CB 5E       	bit	3, (hl)
1750  0614  20 0B       	jr	NZ,l_player_move_input_00135
1751  0616  21 00 00    	ld	hl,_dirs
1752  0619  CB 56       	bit	2, (hl)
1753  061B  20 04       	jr	NZ,l_player_move_input_00135
1754  061D  2E 00       	ld	l,0x00
1755  061F  18 18       	jr	l_player_move_input_00138
1756  0621              l_player_move_input_00135:
1757  0621  2A 00 00    	ld	hl,(_sprite)
1758  0624  26 00       	ld	h,0x00
1759  0626  01 00 00    	ld	bc,_state
1760  0629  09          	add	hl,bc
1761  062A  3A 00 00    	ld	a,(_s_state)
1762  062D  77          	ld	(hl),a
1763  062E  2E 54       	ld	l,0x54
1764  0630  CD 5E 04    	call	_player_tile
1765  0633  2E 01       	ld	l,0x01
1766  0635  18 02       	jr	l_player_move_input_00138
1767  0637              l_player_move_input_00137:
1768  0637  2E 00       	ld	l,0x00
1769  0639              l_player_move_input_00138:
1770  0639  C9          	ret
1771  063A              	SECTION code_compiler
1772  063A              ;	---------------------------------
1773  063A              ; Function player_check_map
1774  063A              ; ---------------------------------
1775  063A              _player_check_map:
1776  063A  2A 00 00    	ld	hl,(_sprite)
1777  063D  26 00       	ld	h,0x00
1778  063F  5D          	ld	e,l
1779  0640  01 00 00    	ld	bc,_col
1780  0643  09          	add	hl,bc
1781  0644  46          	ld	b,(hl)
1782  0645  16 00       	ld	d,0x00
1783  0647  21 00 00    	ld	hl,_lin
1784  064A  19          	add	hl,de
1785  064B  4E          	ld	c, (hl)
1786  064C  C5          	push	bc
1787  064D  CD 00 00    	call	_spr_calc_index
1788  0650  F1          	pop	af
1789  0651  7D          	ld	a,l
1790  0652  32 00 00    	ld	(_sprite_curr_index),a
1791  0655  3A 00 00    	ld	a,(_s_lin0)
1792  0658  E6 0F       	and	a,0x0f
1793  065A  21 00 00    	ld	hl,_s_col0
1794  065D  CB 46       	bit	0, (hl)
1795  065F  20 17       	jr	NZ,l_player_check_map_00108
1796  0661  B7          	or	a, a
1797  0662  20 05       	jr	NZ,l_player_check_map_00102
1798  0664  CD A3 06    	call	_player_pick_item
1799  0667  18 39       	jr	l_player_check_map_00110
1800  0669              l_player_check_map_00102:
1801  0669  CD A3 06    	call	_player_pick_item
1802  066C  21 00 00    	ld	hl,_sprite_curr_index
1803  066F  7E          	ld	a, (hl)
1804  0670  C6 10       	add	a,0x10
1805  0672  77          	ld	(hl), a
1806  0673  CD A3 06    	call	_player_pick_item
1807  0676  18 2A       	jr	l_player_check_map_00110
1808  0678              l_player_check_map_00108:
1809  0678  B7          	or	a, a
1810  0679  20 0C       	jr	NZ,l_player_check_map_00105
1811  067B  CD A3 06    	call	_player_pick_item
1812  067E  21 00 00    	ld	hl,_sprite_curr_index
1813  0681  34          	inc	(hl)
1814  0682  CD A3 06    	call	_player_pick_item
1815  0685  18 1B       	jr	l_player_check_map_00110
1816  0687              l_player_check_map_00105:
1817  0687  CD A3 06    	call	_player_pick_item
1818  068A  21 00 00    	ld	hl,_sprite_curr_index
1819  068D  34          	inc	(hl)
1820  068E  CD A3 06    	call	_player_pick_item
1821  0691  21 00 00    	ld	hl,_sprite_curr_index
1822  0694  7E          	ld	a, (hl)
1823  0695  C6 0F       	add	a,0x0f
1824  0697  77          	ld	(hl), a
1825  0698  CD A3 06    	call	_player_pick_item
1826  069B  21 00 00    	ld	hl,_sprite_curr_index
1827  069E  34          	inc	(hl)
1828  069F  CD A3 06    	call	_player_pick_item
1829  06A2              l_player_check_map_00110:
1830  06A2  C9          	ret
1831  06A3              	SECTION code_compiler
1832  06A3              ;	---------------------------------
1833  06A3              ; Function player_pick_item
1834  06A3              ; ---------------------------------
1835  06A3              _player_pick_item:
1836  06A3  2A 00 00    	ld	hl,(_sprite_curr_index)
1837  06A6  26 00       	ld	h,0x00
1838  06A8  01 00 00    	ld	bc,_scr_map
1839  06AB  09          	add	hl,bc
1840  06AC  7E          	ld	a,(hl)
1841  06AD  4F          	ld	c,a
1842  06AE  D6 18       	sub	a,0x18
1843  06B0  D8          	ret	C
1844  06B1  3E 27       	ld	a,0x27
1845  06B3  91          	sub	a, c
1846  06B4  D8          	ret	C
1847  06B5  21 00 00    	ld	hl,_ay_effect_10
1848  06B8  CD 00 00    	call	_ay_fx_play
1849  06BB  CD 00 00    	call	_sound_coin
1850  06BE  2A 00 00    	ld	hl,(_sprite_curr_index)
1851  06C1  26 00       	ld	h,0x00
1852  06C3  01 00 00    	ld	bc,_scr_map
1853  06C6  09          	add	hl,bc
1854  06C7  AF          	xor	a,a
1855  06C8  77          	ld	(hl),a
1856  06C9  3A 00 00    	ld	a,(_sprite_curr_index)
1857  06CC  07          	rlca
1858  06CD  07          	rlca
1859  06CE  07          	rlca
1860  06CF  07          	rlca
1861  06D0  E6 0F       	and	a,0x0f
1862  06D2  07          	rlca
1863  06D3  07          	rlca
1864  06D4  07          	rlca
1865  06D5  07          	rlca
1866  06D6  E6 F0       	and	a,0xf0
1867  06D8  32 00 00    	ld	(_s_lin1),a
1868  06DB  3A 00 00    	ld	a,(_sprite_curr_index)
1869  06DE  E6 0F       	and	a,0x0f
1870  06E0  87          	add	a, a
1871  06E1  32 00 00    	ld	(_s_col1),a
1872  06E4  21 78 03    	ld	hl,0x0378
1873  06E7  E5          	push	hl
1874  06E8  F5          	push	af
1875  06E9  33          	inc	sp
1876  06EA  3A 00 00    	ld	a,(_s_lin1)
1877  06ED  F5          	push	af
1878  06EE  33          	inc	sp
1879  06EF  CD 00 00    	call	_spr_add_anim
1880  06F2  F1          	pop	af
1881  06F3  F1          	pop	af
1882  06F4  C9          	ret
1883  06F5              	SECTION code_compiler
1884  06F5              ;	---------------------------------
1885  06F5              ; Function player_hit_platform
1886  06F5              ; ---------------------------------
1887  06F5              _player_hit_platform:
1888  06F5  3A 00 00    	ld	a,(_player_hit_lin)
1889  06F8  B7          	or	a, a
1890  06F9  C2 18 08    	jp	NZ, l_player_hit_platform_00120
1891  06FC  2A 00 00    	ld	hl,(_sprite)
1892  06FF  26 00       	ld	h,0x00
1893  0701  01 00 00    	ld	bc,_lin
1894  0704  09          	add	hl,bc
1895  0705  4E          	ld	c,(hl)
1896  0706  3E 10       	ld	a,0x10
1897  0708  91          	sub	a, c
1898  0709  D2 18 08    	jp	NC, l_player_hit_platform_00120
1899  070C  21 00 00    	ld	hl,_enemies
1900  070F  36 00       	ld	(hl),0x00
1901  0711              l_player_hit_platform_00122:
1902  0711  2A 00 00    	ld	hl,(_enemies)
1903  0714  26 00       	ld	h,0x00
1904  0716  01 00 00    	ld	bc,_class
1905  0719  09          	add	hl,bc
1906  071A  7E          	ld	a,(hl)
1907  071B  B7          	or	a, a
1908  071C  28 64       	jr	Z,l_player_hit_platform_00123
1909  071E  2A 00 00    	ld	hl,(_sprite)
1910  0721  26 00       	ld	h,0x00
1911  0723  01 00 00    	ld	bc,_lin
1912  0726  09          	add	hl,bc
1913  0727  4E          	ld	c,(hl)
1914  0728  06 00       	ld	b,0x00
1915  072A  2A 00 00    	ld	hl,(_enemies)
1916  072D  60          	ld	h,b
1917  072E  11 00 00    	ld	de,_lin
1918  0731  19          	add	hl,de
1919  0732  5E          	ld	e, (hl)
1920  0733  16 00       	ld	d,0x00
1921  0735  79          	ld	a,c
1922  0736  93          	sub	a,e
1923  0737  4F          	ld	c,a
1924  0738  78          	ld	a,b
1925  0739  9A          	sbc	a,d
1926  073A  47          	ld	b,a
1927  073B  79          	ld	a,c
1928  073C  D6 18       	sub	a,0x18
1929  073E  B0          	or	a,b
1930  073F  20 41       	jr	NZ,l_player_hit_platform_00123
1931  0741  2A 00 00    	ld	hl,(_enemies)
1932  0744  26 00       	ld	h,0x00
1933  0746  01 00 00    	ld	bc,_state
1934  0749  09          	add	hl,bc
1935  074A  CB 6E       	bit	5,(hl)
1936  074C  20 34       	jr	NZ,l_player_hit_platform_00123
1937  074E  2A 00 00    	ld	hl,(_sprite)
1938  0751  26 00       	ld	h,0x00
1939  0753  01 00 00    	ld	bc,_col
1940  0756  09          	add	hl,bc
1941  0757  4E          	ld	c,(hl)
1942  0758  06 00       	ld	b,0x00
1943  075A  2A 00 00    	ld	hl,(_enemies)
1944  075D  60          	ld	h,b
1945  075E  11 00 00    	ld	de,_col
1946  0761  19          	add	hl,de
1947  0762  5E          	ld	e, (hl)
1948  0763  16 00       	ld	d,0x00
1949  0765  79          	ld	a, c
1950  0766  93          	sub	a, e
1951  0767  6F          	ld	l, a
1952  0768  78          	ld	a, b
1953  0769  9A          	sbc	a, d
1954  076A  67          	ld	h, a
1955  076B  CD 00 00    	call	_abs_fastcall
1956  076E  3E 02       	ld	a,0x02
1957  0770  BD          	cp	a,l
1958  0771  3E 00       	ld	a,0x00
1959  0773  9C          	sbc	a,h
1960  0774  E2 79 07    	jp	PO, l_player_hit_platform_00178
1961  0777  EE 80       	xor	a,0x80
1962  0779              l_player_hit_platform_00178:
1963  0779  FA 82 07    	jp	M, l_player_hit_platform_00123
1964  077C  CD 00 00    	call	_enemy_hit
1965  077F  CD 00 00    	call	_sound_hit_enemy
1966  0782              l_player_hit_platform_00123:
1967  0782  21 00 00    	ld	hl,_enemies
1968  0785  7E          	ld	a,(hl)
1969  0786  3C          	inc	a
1970  0787  77          	ld	(hl),a
1971  0788  D6 06       	sub	a,0x06
1972  078A  38 85       	jr	C,l_player_hit_platform_00122
1973  078C  01 00 00    	ld	bc,_spr_timer+0
1974  078F  2A 00 00    	ld	hl,(_sprite)
1975  0792  26 00       	ld	h,0x00
1976  0794  29          	add	hl, hl
1977  0795  09          	add	hl,bc
1978  0796  ED 5B 00 00 	ld	de,(_curr_time)
1979  079A  73          	ld	(hl),e
1980  079B  23          	inc	hl
1981  079C  72          	ld	(hl),d
1982  079D  2A 00 00    	ld	hl,(_sprite)
1983  07A0  26 00       	ld	h,0x00
1984  07A2  01 00 00    	ld	bc,_lin
1985  07A5  09          	add	hl,bc
1986  07A6  4E          	ld	c,(hl)
1987  07A7  06 00       	ld	b,0x00
1988  07A9  79          	ld	a, c
1989  07AA  C6 F8       	add	a,0xf8
1990  07AC  4F          	ld	c, a
1991  07AD  78          	ld	a, b
1992  07AE  CE FF       	adc	a,0xff
1993  07B0  5F          	ld	e, a
1994  07B1  06 04       	ld	b,0x04
1995  07B3              l_player_hit_platform_00179:
1996  07B3  CB 2B       	sra	e
1997  07B5  CB 19       	rr	c
1998  07B7  10 FA       	djnz	l_player_hit_platform_00179
1999  07B9  79          	ld	a, c
2000  07BA  07          	rlca
2001  07BB  07          	rlca
2002  07BC  07          	rlca
2003  07BD  07          	rlca
2004  07BE  E6 F0       	and	a,0xf0
2005  07C0  C6 08       	add	a,0x08
2006  07C2  32 00 00    	ld	(_player_hit_lin),a
2007  07C5  2A 00 00    	ld	hl,(_sprite)
2008  07C8  26 00       	ld	h,0x00
2009  07CA  01 00 00    	ld	bc,_col
2010  07CD  09          	add	hl,bc
2011  07CE  4E          	ld	c,(hl)
2012  07CF  CB 41       	bit	0,c
2013  07D1  20 06       	jr	NZ,l_player_hit_platform_00117
2014  07D3  21 00 00    	ld	hl,_player_hit_col
2015  07D6  71          	ld	(hl), c
2016  07D7  18 33       	jr	l_player_hit_platform_00118
2017  07D9              l_player_hit_platform_00117:
2018  07D9  2A 00 00    	ld	hl,(_sprite)
2019  07DC  26 00       	ld	h,0x00
2020  07DE  11 00 00    	ld	de,_state
2021  07E1  19          	add	hl,de
2022  07E2  5E          	ld	e, (hl)
2023  07E3  41          	ld	b, c
2024  07E4  04          	inc	b
2025  07E5  0D          	dec	c
2026  07E6  CB 5B       	bit	3, e
2027  07E8  28 12       	jr	Z,l_player_hit_platform_00114
2028  07EA  3A 00 00    	ld	a,(_g_player_hit_right)
2029  07ED  B7          	or	a, a
2030  07EE  28 06       	jr	Z,l_player_hit_platform_00108
2031  07F0  21 00 00    	ld	hl,_player_hit_col
2032  07F3  70          	ld	(hl), b
2033  07F4  18 16       	jr	l_player_hit_platform_00118
2034  07F6              l_player_hit_platform_00108:
2035  07F6  21 00 00    	ld	hl,_player_hit_col
2036  07F9  71          	ld	(hl), c
2037  07FA  18 10       	jr	l_player_hit_platform_00118
2038  07FC              l_player_hit_platform_00114:
2039  07FC  3A 00 00    	ld	a,(_g_player_hit_left)
2040  07FF  B7          	or	a, a
2041  0800  28 06       	jr	Z,l_player_hit_platform_00111
2042  0802  21 00 00    	ld	hl,_player_hit_col
2043  0805  71          	ld	(hl), c
2044  0806  18 04       	jr	l_player_hit_platform_00118
2045  0808              l_player_hit_platform_00111:
2046  0808  21 00 00    	ld	hl,_player_hit_col
2047  080B  70          	ld	(hl), b
2048  080C              l_player_hit_platform_00118:
2049  080C  2E 01       	ld	l,0x01
2050  080E  CD 00 00    	call	_spr_brick_anim
2051  0811  CD 00 00    	call	_sound_hit_brick
2052  0814  2E 01       	ld	l,0x01
2053  0816  18 02       	jr	l_player_hit_platform_00124
2054  0818              l_player_hit_platform_00120:
2055  0818  2E 00       	ld	l,0x00
2056  081A              l_player_hit_platform_00124:
2057  081A  C9          	ret
2058  081B              	SECTION code_compiler
2059  081B              ;	---------------------------------
2060  081B              ; Function player_hit_platform_clear
2061  081B              ; ---------------------------------
2062  081B              _player_hit_platform_clear:
2063  081B  3A 00 00    	ld	a,(_player_hit_lin)
2064  081E  B7          	or	a, a
2065  081F  C8          	ret	Z
2066  0820  2A FF FF    	ld	hl,(_player_hit_col - 1)
2067  0823  3A 00 00    	ld	a,(_player_hit_lin)
2068  0826  6F          	ld	l,a
2069  0827  E5          	push	hl
2070  0828  CD 00 00    	call	_spr_calc_index
2071  082B  F1          	pop	af
2072  082C  22 00 00    	ld	(_index1),hl
2073  082F  2E 00       	ld	l,0x00
2074  0831  CD 00 00    	call	_spr_brick_anim
2075  0834  21 00 00    	ld	hl,_player_hit_lin
2076  0837  36 00       	ld	(hl),0x00
2077  0839  21 00 00    	ld	hl,_player_hit_col
2078  083C  36 00       	ld	(hl),0x00
2079  083E  C9          	ret
2080  083F              	SECTION code_compiler
2081  083F              ;	---------------------------------
2082  083F              ; Function player_score_add
2083  083F              ; ---------------------------------
2084  083F              _player_score_add:
2085  083F  ED 4B 00 00 	ld	bc,(_player_score)
2086  0843  09          	add	hl,bc
2087  0844  22 00 00    	ld	(_player_score),hl
2088  0847  3A 00 00    	ld	a,(_game_score_top)
2089  084A  21 00 00    	ld	hl,_player_score
2090  084D  96          	sub	a, (hl)
2091  084E  3A 01 00    	ld	a,(_game_score_top + 1)
2092  0851  23          	inc	hl
2093  0852  9E          	sbc	a, (hl)
2094  0853  D2 00 00    	jp	NC,_game_print_score
2095  0856  2A 00 00    	ld	hl,(_player_score)
2096  0859  22 00 00    	ld	(_game_score_top),hl
2097  085C  C3 00 00    	jp  _game_print_score
2098  085F              	SECTION code_compiler
2099  085F              ;	---------------------------------
2100  085F              ; Function player_check_floor
2101  085F              ; ---------------------------------
2102  085F              _player_check_floor:
2103  085F  CD 00 00    	call	___sdcc_enter_ix
2104  0862  3B          	dec	sp
2105  0863  2A 00 00    	ld	hl,(_sprite)
2106  0866  26 00       	ld	h,0x00
2107  0868  01 00 00    	ld	bc,_col
2108  086B  09          	add	hl,bc
2109  086C  56          	ld	d, (hl)
2110  086D  2A 00 00    	ld	hl,(_sprite)
2111  0870  26 00       	ld	h,0x00
2112  0872  01 00 00    	ld	bc,_lin
2113  0875  09          	add	hl,bc
2114  0876  7E          	ld	a,(hl)
2115  0877  C6 10       	add	a,0x10
2116  0879  5F          	ld	e, a
2117  087A  D5          	push	de
2118  087B  CD 00 00    	call	_spr_calc_index
2119  087E  F1          	pop	af
2120  087F  4D          	ld	c, l
2121  0880  44          	ld	b, h
2122  0881  21 00 00    	ld	hl,_scr_map
2123  0884  09          	add	hl, bc
2124  0885  7E          	ld	a, (hl)
2125  0886  DD 77 FF    	ld	(ix-1),a
2126  0889  2A 00 00    	ld	hl,(_sprite)
2127  088C  26 00       	ld	h,0x00
2128  088E  11 00 00    	ld	de,_col
2129  0891  19          	add	hl,de
2130  0892  7E          	ld	a,(hl)
2131  0893  0F          	rrca
2132  0894  38 04       	jr	C,l_player_check_floor_00102
2133  0896  0E 01       	ld	c,0x01
2134  0898  18 06       	jr	l_player_check_floor_00103
2135  089A              l_player_check_floor_00102:
2136  089A  03          	inc	bc
2137  089B  21 00 00    	ld	hl,_scr_map
2138  089E  09          	add	hl, bc
2139  089F  4E          	ld	c, (hl)
2140  08A0              l_player_check_floor_00103:
2141  08A0  3A 00 00    	ld	a,(_s_lin0)
2142  08A3  D6 90       	sub	a,0x90
2143  08A5  20 04       	jr	NZ,l_player_check_floor_00105
2144  08A7  DD 36 FF 3C 	ld	(ix-1),0x3c
2145  08AB              l_player_check_floor_00105:
2146  08AB  DD 7E FF    	ld	a,(ix-1)
2147  08AE  D6 30       	sub	a,0x30
2148  08B0  38 07       	jr	C,l_player_check_floor_00110
2149  08B2  DD 7E FF    	ld	a,(ix-1)
2150  08B5  D6 54       	sub	a,0x54
2151  08B7  38 1E       	jr	C,l_player_check_floor_00111
2152  08B9              l_player_check_floor_00110:
2153  08B9  79          	ld	a,c
2154  08BA  FE 30       	cp	a,0x30
2155  08BC  38 04       	jr	C,l_player_check_floor_00106
2156  08BE  D6 54       	sub	a,0x54
2157  08C0  38 15       	jr	C,l_player_check_floor_00111
2158  08C2              l_player_check_floor_00106:
2159  08C2  2A 00 00    	ld	hl,(_sprite)
2160  08C5  26 00       	ld	h,0x00
2161  08C7  01 00 00    	ld	bc,_sprite_speed_alt
2162  08CA  09          	add	hl,bc
2163  08CB  36 02       	ld	(hl),0x02
2164  08CD  21 00 00    	ld	hl,_s_state
2165  08D0  CB CE       	set	1, (hl)
2166  08D2  2E 00       	ld	l,0x00
2167  08D4  CD B6 03    	call	_player_check_stairs
2168  08D7              l_player_check_floor_00111:
2169  08D7  33          	inc	sp
2170  08D8  DD E1       	pop	ix
2171  08DA  C9          	ret
2172  08DB              	SECTION IGNORE
2173  0000              
