1     0000              MODULE game_player_c
2     0000              
3     0000              ;--------------------------------------------------------
4     0000              ; File Created by SDCC : free open source ANSI-C Compiler
5     0000              ; Version 3.6.5 #9958 (Mac OS X i386)
6     0000              ;--------------------------------------------------------
7     0000              ; Processed by Z88DK
8     0000              ;--------------------------------------------------------
9     0000              
10    0000              	EXTERN __divschar
11    0000              	EXTERN __divschar_callee
12    0000              	EXTERN __divsint
13    0000              	EXTERN __divsint_callee
14    0000              	EXTERN __divslong
15    0000              	EXTERN __divslong_callee
16    0000              	EXTERN __divslonglong
17    0000              	EXTERN __divslonglong_callee
18    0000              	EXTERN __divsuchar
19    0000              	EXTERN __divsuchar_callee
20    0000              	EXTERN __divuchar
21    0000              	EXTERN __divuchar_callee
22    0000              	EXTERN __divuint
23    0000              	EXTERN __divuint_callee
24    0000              	EXTERN __divulong
25    0000              	EXTERN __divulong_callee
26    0000              	EXTERN __divulonglong
27    0000              	EXTERN __divulonglong_callee
28    0000              	EXTERN __divuschar
29    0000              	EXTERN __divuschar_callee
30    0000              	EXTERN __modschar
31    0000              	EXTERN __modschar_callee
32    0000              	EXTERN __modsint
33    0000              	EXTERN __modsint_callee
34    0000              	EXTERN __modslong
35    0000              	EXTERN __modslong_callee
36    0000              	EXTERN __modslonglong
37    0000              	EXTERN __modslonglong_callee
38    0000              	EXTERN __modsuchar
39    0000              	EXTERN __modsuchar_callee
40    0000              	EXTERN __moduchar
41    0000              	EXTERN __moduchar_callee
42    0000              	EXTERN __moduint
43    0000              	EXTERN __moduint_callee
44    0000              	EXTERN __modulong
45    0000              	EXTERN __modulong_callee
46    0000              	EXTERN __modulonglong
47    0000              	EXTERN __modulonglong_callee
48    0000              	EXTERN __moduschar
49    0000              	EXTERN __moduschar_callee
50    0000              	EXTERN __mulint
51    0000              	EXTERN __mulint_callee
52    0000              	EXTERN __mullong
53    0000              	EXTERN __mullong_callee
54    0000              	EXTERN __mullonglong
55    0000              	EXTERN __mullonglong_callee
56    0000              	EXTERN __mulschar
57    0000              	EXTERN __mulschar_callee
58    0000              	EXTERN __mulsuchar
59    0000              	EXTERN __mulsuchar_callee
60    0000              	EXTERN __muluschar
61    0000              	EXTERN __muluschar_callee
62    0000              	EXTERN __rlslonglong
63    0000              	EXTERN __rlslonglong_callee
64    0000              	EXTERN __rlulonglong
65    0000              	EXTERN __rlulonglong_callee
66    0000              	EXTERN __rrslonglong
67    0000              	EXTERN __rrslonglong_callee
68    0000              	EXTERN __rrulonglong
69    0000              	EXTERN __rrulonglong_callee
70    0000              	EXTERN ___sdcc_call_hl
71    0000              	EXTERN ___sdcc_call_iy
72    0000              	EXTERN ___sdcc_enter_ix
73    0000              	EXTERN _banked_call
74    0000              	EXTERN _banked_ret
75    0000              	EXTERN ___fs2schar
76    0000              	EXTERN ___fs2schar_callee
77    0000              	EXTERN ___fs2sint
78    0000              	EXTERN ___fs2sint_callee
79    0000              	EXTERN ___fs2slong
80    0000              	EXTERN ___fs2slong_callee
81    0000              	EXTERN ___fs2slonglong
82    0000              	EXTERN ___fs2slonglong_callee
83    0000              	EXTERN ___fs2uchar
84    0000              	EXTERN ___fs2uchar_callee
85    0000              	EXTERN ___fs2uint
86    0000              	EXTERN ___fs2uint_callee
87    0000              	EXTERN ___fs2ulong
88    0000              	EXTERN ___fs2ulong_callee
89    0000              	EXTERN ___fs2ulonglong
90    0000              	EXTERN ___fs2ulonglong_callee
91    0000              	EXTERN ___fsadd
92    0000              	EXTERN ___fsadd_callee
93    0000              	EXTERN ___fsdiv
94    0000              	EXTERN ___fsdiv_callee
95    0000              	EXTERN ___fseq
96    0000              	EXTERN ___fseq_callee
97    0000              	EXTERN ___fsgt
98    0000              	EXTERN ___fsgt_callee
99    0000              	EXTERN ___fslt
100   0000              	EXTERN ___fslt_callee
101   0000              	EXTERN ___fsmul
102   0000              	EXTERN ___fsmul_callee
103   0000              	EXTERN ___fsneq
104   0000              	EXTERN ___fsneq_callee
105   0000              	EXTERN ___fssub
106   0000              	EXTERN ___fssub_callee
107   0000              	EXTERN ___schar2fs
108   0000              	EXTERN ___schar2fs_callee
109   0000              	EXTERN ___sint2fs
110   0000              	EXTERN ___sint2fs_callee
111   0000              	EXTERN ___slong2fs
112   0000              	EXTERN ___slong2fs_callee
113   0000              	EXTERN ___slonglong2fs
114   0000              	EXTERN ___slonglong2fs_callee
115   0000              	EXTERN ___uchar2fs
116   0000              	EXTERN ___uchar2fs_callee
117   0000              	EXTERN ___uint2fs
118   0000              	EXTERN ___uint2fs_callee
119   0000              	EXTERN ___ulong2fs
120   0000              	EXTERN ___ulong2fs_callee
121   0000              	EXTERN ___ulonglong2fs
122   0000              	EXTERN ___ulonglong2fs_callee
123   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
126   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
127   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
128   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
129   0000              	EXTERN ____sdcc_4_ldi_save_bc
130   0000              	EXTERN ____sdcc_4_push_hlix
131   0000              	EXTERN ____sdcc_4_push_mhl
132   0000              	EXTERN ____sdcc_lib_setmem_hl
133   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
134   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
135   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
136   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
137   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
138   0000              	EXTERN ____sdcc_ll_add_deix_hlix
139   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
140   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
141   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
142   0000              	EXTERN ____sdcc_ll_asr_hlix_a
143   0000              	EXTERN ____sdcc_ll_asr_mbc_a
144   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
145   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
146   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
147   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
148   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
149   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
150   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
151   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
152   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
153   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
155   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
156   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
157   0000              	EXTERN ____sdcc_ll_push_hlix
158   0000              	EXTERN ____sdcc_ll_push_mhl
159   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
160   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
161   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
162   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
163   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
164   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
165   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
166   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
167   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
168   0000              	EXTERN ____sdcc_load_debc_deix
169   0000              	EXTERN ____sdcc_load_dehl_deix
170   0000              	EXTERN ____sdcc_load_debc_mhl
171   0000              	EXTERN ____sdcc_load_hlde_mhl
172   0000              	EXTERN ____sdcc_store_dehl_bcix
173   0000              	EXTERN ____sdcc_store_debc_hlix
174   0000              	EXTERN ____sdcc_store_debc_mhl
175   0000              	EXTERN ____sdcc_cpu_pop_ei
176   0000              	EXTERN ____sdcc_cpu_pop_ei_jp
177   0000              	EXTERN ____sdcc_cpu_push_di
178   0000              	EXTERN ____sdcc_outi
179   0000              	EXTERN ____sdcc_outi_128
180   0000              	EXTERN ____sdcc_outi_256
181   0000              	EXTERN ____sdcc_ldi
182   0000              	EXTERN ____sdcc_ldi_128
183   0000              	EXTERN ____sdcc_ldi_256
184   0000              
185   0000              ;--------------------------------------------------------
186   0000              ; Public variables in this module
187   0000              ;--------------------------------------------------------
188   0000              	GLOBAL _player_check_map
189   0000              	GLOBAL _player_1up
190   0000              	GLOBAL _player_init
191   0000              	GLOBAL _player_turn
192   0000              	GLOBAL _player_move
193   0000              	GLOBAL _player_check_input
194   0000              	GLOBAL _player_move_input
195   0000              	GLOBAL _player_fix_walk_lin
196   0000              	GLOBAL _player_fire
197   0000              	GLOBAL _player_collision
198   0000              	GLOBAL _player_pick_mushroom
199   0000              	GLOBAL _player_check_stairs_vertical
200   0000              	GLOBAL _player_check_stairs
201   0000              	GLOBAL _player_anim_tile
202   0000              	GLOBAL _player_tile
203   0000              	GLOBAL _player_pick_item
204   0000              	GLOBAL _player_hit_platform
205   0000              	GLOBAL _player_hit_platform_clear
206   0000              	GLOBAL _player_score_add
207   0000              	GLOBAL _player_check_floor
208   0000              	GLOBAL _player_gasta_brick
209   0000              	GLOBAL _player_move_jump
210   0000              	GLOBAL _player_open_door
211   0000              	GLOBAL _player_lost_life
212   0000              	GLOBAL _player_hit
213   0000              ;--------------------------------------------------------
214   0000              ; Externals used
215   0000              ;--------------------------------------------------------
216   0000              	GLOBAL _ulltoa_callee
217   0000              	GLOBAL _ulltoa
218   0000              	GLOBAL _strtoull_callee
219   0000              	GLOBAL _strtoull
220   0000              	GLOBAL _strtoll_callee
221   0000              	GLOBAL _strtoll
222   0000              	GLOBAL _lltoa_callee
223   0000              	GLOBAL _lltoa
224   0000              	GLOBAL _llabs_callee
225   0000              	GLOBAL _llabs
226   0000              	GLOBAL __lldivu__callee
227   0000              	GLOBAL __lldivu_
228   0000              	GLOBAL __lldiv__callee
229   0000              	GLOBAL __lldiv_
230   0000              	GLOBAL _atoll_callee
231   0000              	GLOBAL _atoll
232   0000              	GLOBAL _realloc_unlocked_callee
233   0000              	GLOBAL _realloc_unlocked
234   0000              	GLOBAL _malloc_unlocked_fastcall
235   0000              	GLOBAL _malloc_unlocked
236   0000              	GLOBAL _free_unlocked_fastcall
237   0000              	GLOBAL _free_unlocked
238   0000              	GLOBAL _calloc_unlocked_callee
239   0000              	GLOBAL _calloc_unlocked
240   0000              	GLOBAL _aligned_alloc_unlocked_callee
241   0000              	GLOBAL _aligned_alloc_unlocked
242   0000              	GLOBAL _realloc_callee
243   0000              	GLOBAL _realloc
244   0000              	GLOBAL _malloc_fastcall
245   0000              	GLOBAL _malloc
246   0000              	GLOBAL _free_fastcall
247   0000              	GLOBAL _free
248   0000              	GLOBAL _calloc_callee
249   0000              	GLOBAL _calloc
250   0000              	GLOBAL _aligned_alloc_callee
251   0000              	GLOBAL _aligned_alloc
252   0000              	GLOBAL _utoa_callee
253   0000              	GLOBAL _utoa
254   0000              	GLOBAL _ultoa_callee
255   0000              	GLOBAL _ultoa
256   0000              	GLOBAL _system_fastcall
257   0000              	GLOBAL _system
258   0000              	GLOBAL _strtoul_callee
259   0000              	GLOBAL _strtoul
260   0000              	GLOBAL _strtol_callee
261   0000              	GLOBAL _strtol
262   0000              	GLOBAL _strtof_callee
263   0000              	GLOBAL _strtof
264   0000              	GLOBAL _strtod_callee
265   0000              	GLOBAL _strtod
266   0000              	GLOBAL _srand_fastcall
267   0000              	GLOBAL _srand
268   0000              	GLOBAL _rand
269   0000              	GLOBAL _quick_exit_fastcall
270   0000              	GLOBAL _quick_exit
271   0000              	GLOBAL _qsort_callee
272   0000              	GLOBAL _qsort
273   0000              	GLOBAL _ltoa_callee
274   0000              	GLOBAL _ltoa
275   0000              	GLOBAL _labs_fastcall
276   0000              	GLOBAL _labs
277   0000              	GLOBAL _itoa_callee
278   0000              	GLOBAL _itoa
279   0000              	GLOBAL _ftoh_callee
280   0000              	GLOBAL _ftoh
281   0000              	GLOBAL _ftog_callee
282   0000              	GLOBAL _ftog
283   0000              	GLOBAL _ftoe_callee
284   0000              	GLOBAL _ftoe
285   0000              	GLOBAL _ftoa_callee
286   0000              	GLOBAL _ftoa
287   0000              	GLOBAL _exit_fastcall
288   0000              	GLOBAL _exit
289   0000              	GLOBAL _dtoh_callee
290   0000              	GLOBAL _dtoh
291   0000              	GLOBAL _dtog_callee
292   0000              	GLOBAL _dtog
293   0000              	GLOBAL _dtoe_callee
294   0000              	GLOBAL _dtoe
295   0000              	GLOBAL _dtoa_callee
296   0000              	GLOBAL _dtoa
297   0000              	GLOBAL _bsearch_callee
298   0000              	GLOBAL _bsearch
299   0000              	GLOBAL _atol_fastcall
300   0000              	GLOBAL _atol
301   0000              	GLOBAL _atoi_fastcall
302   0000              	GLOBAL _atoi
303   0000              	GLOBAL _atof_fastcall
304   0000              	GLOBAL _atof
305   0000              	GLOBAL _atexit_fastcall
306   0000              	GLOBAL _atexit
307   0000              	GLOBAL _at_quick_exit_fastcall
308   0000              	GLOBAL _at_quick_exit
309   0000              	GLOBAL _abs_fastcall
310   0000              	GLOBAL _abs
311   0000              	GLOBAL _abort
312   0000              	GLOBAL __strtou__callee
313   0000              	GLOBAL __strtou_
314   0000              	GLOBAL __strtoi__callee
315   0000              	GLOBAL __strtoi_
316   0000              	GLOBAL __random_uniform_xor_8__fastcall
317   0000              	GLOBAL __random_uniform_xor_8_
318   0000              	GLOBAL __random_uniform_xor_32__fastcall
319   0000              	GLOBAL __random_uniform_xor_32_
320   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
321   0000              	GLOBAL __random_uniform_cmwc_8_
322   0000              	GLOBAL __shellsort__callee
323   0000              	GLOBAL __shellsort_
324   0000              	GLOBAL __quicksort__callee
325   0000              	GLOBAL __quicksort_
326   0000              	GLOBAL __insertion_sort__callee
327   0000              	GLOBAL __insertion_sort_
328   0000              	GLOBAL __ldivu__callee
329   0000              	GLOBAL __ldivu_
330   0000              	GLOBAL __ldiv__callee
331   0000              	GLOBAL __ldiv_
332   0000              	GLOBAL __divu__callee
333   0000              	GLOBAL __divu_
334   0000              	GLOBAL __div__callee
335   0000              	GLOBAL __div_
336   0000              	GLOBAL _NIRVANAP_drawTW_raw_callee
337   0000              	GLOBAL _NIRVANAP_drawTW_raw
338   0000              	GLOBAL _NIRVANAP_drawTW_callee
339   0000              	GLOBAL _NIRVANAP_drawTW
340   0000              	GLOBAL _NIRVANAP_drawW_raw_callee
341   0000              	GLOBAL _NIRVANAP_drawW_raw
342   0000              	GLOBAL _NIRVANAP_drawW_callee
343   0000              	GLOBAL _NIRVANAP_drawW
344   0000              	GLOBAL _NIRVANAP_spriteT_callee
345   0000              	GLOBAL _NIRVANAP_spriteT
346   0000              	GLOBAL _NIRVANAP_fillC_callee
347   0000              	GLOBAL _NIRVANAP_fillC
348   0000              	GLOBAL _NIRVANAP_readC_callee
349   0000              	GLOBAL _NIRVANAP_readC
350   0000              	GLOBAL _NIRVANAP_paintC_callee
351   0000              	GLOBAL _NIRVANAP_paintC
352   0000              	GLOBAL _NIRVANAP_printC_callee
353   0000              	GLOBAL _NIRVANAP_printC
354   0000              	GLOBAL _NIRVANAP_fillT_raw_callee
355   0000              	GLOBAL _NIRVANAP_fillT_raw
356   0000              	GLOBAL _NIRVANAP_fillT_callee
357   0000              	GLOBAL _NIRVANAP_fillT
358   0000              	GLOBAL _NIRVANAP_drawT_raw_callee
359   0000              	GLOBAL _NIRVANAP_drawT_raw
360   0000              	GLOBAL _NIRVANAP_drawT_callee
361   0000              	GLOBAL _NIRVANAP_drawT
362   0000              	GLOBAL _NIRVANAP_stop
363   0000              	GLOBAL _NIRVANAP_start
364   0000              	GLOBAL _debug3
365   0000              	GLOBAL _debug2
366   0000              	GLOBAL _debug
367   0000              	GLOBAL _zx_print_str
368   0000              	GLOBAL _zx_print_int
369   0000              	GLOBAL _zx_print_chr
370   0000              	GLOBAL _zx_print_bonus_time
371   0000              	GLOBAL _zx_isr
372   0000              	GLOBAL _z80_otdr_callee
373   0000              	GLOBAL _z80_otdr
374   0000              	GLOBAL _z80_otir_callee
375   0000              	GLOBAL _z80_otir
376   0000              	GLOBAL _z80_outp_callee
377   0000              	GLOBAL _z80_outp
378   0000              	GLOBAL _z80_indr_callee
379   0000              	GLOBAL _z80_indr
380   0000              	GLOBAL _z80_inir_callee
381   0000              	GLOBAL _z80_inir
382   0000              	GLOBAL _z80_inp_fastcall
383   0000              	GLOBAL _z80_inp
384   0000              	GLOBAL _z80_set_int_state_fastcall
385   0000              	GLOBAL _z80_set_int_state
386   0000              	GLOBAL _z80_get_int_state
387   0000              	GLOBAL _z80_delay_tstate_fastcall
388   0000              	GLOBAL _z80_delay_tstate
389   0000              	GLOBAL _z80_delay_ms_fastcall
390   0000              	GLOBAL _z80_delay_ms
391   0000              	GLOBAL _im2_remove_generic_callback_callee
392   0000              	GLOBAL _im2_remove_generic_callback
393   0000              	GLOBAL _im2_prepend_generic_callback_callee
394   0000              	GLOBAL _im2_prepend_generic_callback
395   0000              	GLOBAL _im2_append_generic_callback_callee
396   0000              	GLOBAL _im2_append_generic_callback
397   0000              	GLOBAL _im2_create_generic_isr_8080_callee
398   0000              	GLOBAL _im2_create_generic_isr_8080
399   0000              	GLOBAL _im2_create_generic_isr_callee
400   0000              	GLOBAL _im2_create_generic_isr
401   0000              	GLOBAL _im2_install_isr_callee
402   0000              	GLOBAL _im2_install_isr
403   0000              	GLOBAL _im2_init_fastcall
404   0000              	GLOBAL _im2_init
405   0000              	GLOBAL _intrinsic_swap_word_32_fastcall
406   0000              	GLOBAL _intrinsic_swap_word_32
407   0000              	GLOBAL _intrinsic_swap_endian_32_fastcall
408   0000              	GLOBAL _intrinsic_swap_endian_32
409   0000              	GLOBAL _intrinsic_swap_endian_16_fastcall
410   0000              	GLOBAL _intrinsic_swap_endian_16
411   0000              	GLOBAL _intrinsic_return_de
412   0000              	GLOBAL _intrinsic_return_bc
413   0000              	GLOBAL _intrinsic_exx
414   0000              	GLOBAL _intrinsic_ex_de_hl
415   0000              	GLOBAL _intrinsic_nop
416   0000              	GLOBAL _intrinsic_im_2
417   0000              	GLOBAL _intrinsic_im_1
418   0000              	GLOBAL _intrinsic_im_0
419   0000              	GLOBAL _intrinsic_retn
420   0000              	GLOBAL _intrinsic_reti
421   0000              	GLOBAL _intrinsic_halt
422   0000              	GLOBAL _intrinsic_ei
423   0000              	GLOBAL _intrinsic_di
424   0000              	GLOBAL _intrinsic_stub
425   0000              	GLOBAL _intrinsic_outi
426   0000              	GLOBAL _intrinsic_ldi
427   0000              	GLOBAL _zx_pattern_fill_callee
428   0000              	GLOBAL _zx_pattern_fill
429   0000              	GLOBAL _zx_saddrpup_fastcall
430   0000              	GLOBAL _zx_saddrpup
431   0000              	GLOBAL _zx_saddrpright_callee
432   0000              	GLOBAL _zx_saddrpright
433   0000              	GLOBAL _zx_saddrpleft_callee
434   0000              	GLOBAL _zx_saddrpleft
435   0000              	GLOBAL _zx_saddrpdown_fastcall
436   0000              	GLOBAL _zx_saddrpdown
437   0000              	GLOBAL _zx_saddrcup_fastcall
438   0000              	GLOBAL _zx_saddrcup
439   0000              	GLOBAL _zx_saddrcright_fastcall
440   0000              	GLOBAL _zx_saddrcright
441   0000              	GLOBAL _zx_saddrcleft_fastcall
442   0000              	GLOBAL _zx_saddrcleft
443   0000              	GLOBAL _zx_saddrcdown_fastcall
444   0000              	GLOBAL _zx_saddrcdown
445   0000              	GLOBAL _zx_saddr2py_fastcall
446   0000              	GLOBAL _zx_saddr2py
447   0000              	GLOBAL _zx_saddr2px_fastcall
448   0000              	GLOBAL _zx_saddr2px
449   0000              	GLOBAL _zx_saddr2cy_fastcall
450   0000              	GLOBAL _zx_saddr2cy
451   0000              	GLOBAL _zx_saddr2cx_fastcall
452   0000              	GLOBAL _zx_saddr2cx
453   0000              	GLOBAL _zx_saddr2aaddr_fastcall
454   0000              	GLOBAL _zx_saddr2aaddr
455   0000              	GLOBAL _zx_py2saddr_fastcall
456   0000              	GLOBAL _zx_py2saddr
457   0000              	GLOBAL _zx_py2aaddr_fastcall
458   0000              	GLOBAL _zx_py2aaddr
459   0000              	GLOBAL _zx_pxy2saddr_callee
460   0000              	GLOBAL _zx_pxy2saddr
461   0000              	GLOBAL _zx_pxy2aaddr_callee
462   0000              	GLOBAL _zx_pxy2aaddr
463   0000              	GLOBAL _zx_px2bitmask_fastcall
464   0000              	GLOBAL _zx_px2bitmask
465   0000              	GLOBAL _zx_cy2saddr_fastcall
466   0000              	GLOBAL _zx_cy2saddr
467   0000              	GLOBAL _zx_cy2aaddr_fastcall
468   0000              	GLOBAL _zx_cy2aaddr
469   0000              	GLOBAL _zx_cxy2saddr_callee
470   0000              	GLOBAL _zx_cxy2saddr
471   0000              	GLOBAL _zx_cxy2aaddr_callee
472   0000              	GLOBAL _zx_cxy2aaddr
473   0000              	GLOBAL _zx_bitmask2px_fastcall
474   0000              	GLOBAL _zx_bitmask2px
475   0000              	GLOBAL _zx_aaddrcup_fastcall
476   0000              	GLOBAL _zx_aaddrcup
477   0000              	GLOBAL _zx_aaddrcright_fastcall
478   0000              	GLOBAL _zx_aaddrcright
479   0000              	GLOBAL _zx_aaddrcleft_fastcall
480   0000              	GLOBAL _zx_aaddrcleft
481   0000              	GLOBAL _zx_aaddrcdown_fastcall
482   0000              	GLOBAL _zx_aaddrcdown
483   0000              	GLOBAL _zx_aaddr2saddr_fastcall
484   0000              	GLOBAL _zx_aaddr2saddr
485   0000              	GLOBAL _zx_aaddr2py_fastcall
486   0000              	GLOBAL _zx_aaddr2py
487   0000              	GLOBAL _zx_aaddr2px_fastcall
488   0000              	GLOBAL _zx_aaddr2px
489   0000              	GLOBAL _zx_aaddr2cy_fastcall
490   0000              	GLOBAL _zx_aaddr2cy
491   0000              	GLOBAL _zx_aaddr2cx_fastcall
492   0000              	GLOBAL _zx_aaddr2cx
493   0000              	GLOBAL _zx_visit_wc_pix_callee
494   0000              	GLOBAL _zx_visit_wc_pix
495   0000              	GLOBAL _zx_visit_wc_attr_callee
496   0000              	GLOBAL _zx_visit_wc_attr
497   0000              	GLOBAL _zx_scroll_wc_up_pix_callee
498   0000              	GLOBAL _zx_scroll_wc_up_pix
499   0000              	GLOBAL _zx_scroll_wc_up_attr_callee
500   0000              	GLOBAL _zx_scroll_wc_up_attr
501   0000              	GLOBAL _zx_scroll_wc_up_callee
502   0000              	GLOBAL _zx_scroll_wc_up
503   0000              	GLOBAL _zx_scroll_up_pix_callee
504   0000              	GLOBAL _zx_scroll_up_pix
505   0000              	GLOBAL _zx_scroll_up_attr_callee
506   0000              	GLOBAL _zx_scroll_up_attr
507   0000              	GLOBAL _zx_scroll_up_callee
508   0000              	GLOBAL _zx_scroll_up
509   0000              	GLOBAL _zx_cls_wc_pix_callee
510   0000              	GLOBAL _zx_cls_wc_pix
511   0000              	GLOBAL _zx_cls_wc_attr_callee
512   0000              	GLOBAL _zx_cls_wc_attr
513   0000              	GLOBAL _zx_cls_wc_callee
514   0000              	GLOBAL _zx_cls_wc
515   0000              	GLOBAL _zx_cls_pix_fastcall
516   0000              	GLOBAL _zx_cls_pix
517   0000              	GLOBAL _zx_cls_attr_fastcall
518   0000              	GLOBAL _zx_cls_attr
519   0000              	GLOBAL _zx_cls_fastcall
520   0000              	GLOBAL _zx_cls
521   0000              	GLOBAL _zx_border_fastcall
522   0000              	GLOBAL _zx_border
523   0000              	GLOBAL _spr_colision_b2
524   0000              	GLOBAL _spr_colision_b
525   0000              	GLOBAL _spr_unflatten
526   0000              	GLOBAL _spr_flatten
527   0000              	GLOBAL _spr_btile_paint_back
528   0000              	GLOBAL _spr_bullet_explode
529   0000              	GLOBAL _spr_init_effects
530   0000              	GLOBAL _spr_turn_horizontal
531   0000              	GLOBAL _spr_bullets_play
532   0000              	GLOBAL _spr_play_anim
533   0000              	GLOBAL _spr_add_anim
534   0000              	GLOBAL _spr_clear_scr
535   0000              	GLOBAL _spr_page_map
536   0000              	GLOBAL _spr_page_down
537   0000              	GLOBAL _spr_page_up
538   0000              	GLOBAL _spr_page_right
539   0000              	GLOBAL _spr_page_left
540   0000              	GLOBAL _spr_tile_paint
541   0000              	GLOBAL _spr_calc_hor
542   0000              	GLOBAL _spr_draw_index
543   0000              	GLOBAL _spr_brick_anim
544   0000              	GLOBAL _spr_back_repaint
545   0000              	GLOBAL _spr_tile
546   0000              	GLOBAL _spr_destroy
547   0000              	GLOBAL _spr_tile_dir
548   0000              	GLOBAL _spr_redraw
549   0000              	GLOBAL _spr_move_left
550   0000              	GLOBAL _spr_move_right
551   0000              	GLOBAL _spr_move_horizontal
552   0000              	GLOBAL _spr_move_down
553   0000              	GLOBAL _spr_move_up
554   0000              	GLOBAL _spr_calc_index
555   0000              	GLOBAL _spr_chktime
556   0000              	GLOBAL _menu_define_key
557   0000              	GLOBAL _menu_redefine
558   0000              	GLOBAL _menu_main_print
559   0000              	GLOBAL _menu_main
560   0000              	GLOBAL _game_match_back
561   0000              	GLOBAL _game_attribs
562   0000              	GLOBAL _game_boss_clear
563   0000              	GLOBAL _game_boss_kill
564   0000              	GLOBAL _game_obj_clear
565   0000              	GLOBAL _game_obj_chk
566   0000              	GLOBAL _game_obj_set
567   0000              	GLOBAL _game_shoot_fire_boss
568   0000              	GLOBAL _game_shoot_fire
569   0000              	GLOBAL _game_add_enemy
570   0000              	GLOBAL _game_print_header
571   0000              	GLOBAL _game_check_time
572   0000              	GLOBAL _game_rotate_attrib_osd
573   0000              	GLOBAL _game_rotate_attrib
574   0000              	GLOBAL _game_colour_message
575   0000              	GLOBAL _game_paint_attrib_lin_osd
576   0000              	GLOBAL _game_paint_attrib_lin_h
577   0000              	GLOBAL _game_paint_attrib_lin
578   0000              	GLOBAL _game_print_score
579   0000              	GLOBAL _game_check_cell
580   0000              	GLOBAL _game_check_map
581   0000              	GLOBAL _game_loop
582   0000              	GLOBAL _game_round_init
583   0000              	GLOBAL _game_start_timer
584   0000              	GLOBAL _game_update_stats
585   0000              	GLOBAL _game_print_footer
586   0000              	GLOBAL _game_fill_row
587   0000              	GLOBAL _game_fps
588   0000              	GLOBAL _game_respawn
589   0000              	GLOBAL _game_draw_screen
590   0000              	GLOBAL _boss_turn
591   0000              	GLOBAL _enemy_avoid_dead
592   0000              	GLOBAL _enemy_avoid_fall
593   0000              	GLOBAL _enemy_respawn
594   0000              	GLOBAL _enemy_init
595   0000              	GLOBAL _enemy_move
596   0000              	GLOBAL _enemy_turn
597   0000              	GLOBAL _enemy_static
598   0000              	GLOBAL _enemy_walk
599   0000              	GLOBAL _enemy_horizontal
600   0000              	GLOBAL _enemy_vertical
601   0000              	GLOBAL _ay_fx_play
602   0000              	GLOBAL _ay_midi_play
603   0000              	GLOBAL _ay_is_playing
604   0000              	GLOBAL _ay_reset
605   0000              	GLOBAL _test_func
606   0000              	GLOBAL _test_proc
607   0000              	GLOBAL _in_mouse_kempston_wheel_delta
608   0000              	GLOBAL _in_mouse_kempston_wheel
609   0000              	GLOBAL _in_mouse_kempston_callee
610   0000              	GLOBAL _in_mouse_kempston
611   0000              	GLOBAL _in_mouse_kempston_setpos_callee
612   0000              	GLOBAL _in_mouse_kempston_setpos
613   0000              	GLOBAL _in_mouse_kempston_reset
614   0000              	GLOBAL _in_mouse_kempston_init
615   0000              	GLOBAL _in_mouse_amx_wheel_delta
616   0000              	GLOBAL _in_mouse_amx_wheel
617   0000              	GLOBAL _in_mouse_amx_callee
618   0000              	GLOBAL _in_mouse_amx
619   0000              	GLOBAL _in_mouse_amx_setpos_callee
620   0000              	GLOBAL _in_mouse_amx_setpos
621   0000              	GLOBAL _in_mouse_amx_reset
622   0000              	GLOBAL _in_mouse_amx_init_callee
623   0000              	GLOBAL _in_mouse_amx_init
624   0000              	GLOBAL _in_stick_sinclair2
625   0000              	GLOBAL _in_stick_sinclair1
626   0000              	GLOBAL _in_stick_kempston
627   0000              	GLOBAL _in_stick_fuller
628   0000              	GLOBAL _in_stick_cursor
629   0000              	GLOBAL _in_stick_keyboard_fastcall
630   0000              	GLOBAL _in_stick_keyboard
631   0000              	GLOBAL _in_wait_nokey
632   0000              	GLOBAL _in_wait_key
633   0000              	GLOBAL _in_test_key
634   0000              	GLOBAL _in_pause_fastcall
635   0000              	GLOBAL _in_pause
636   0000              	GLOBAL _in_key_scancode_fastcall
637   0000              	GLOBAL _in_key_scancode
638   0000              	GLOBAL _in_key_pressed_fastcall
639   0000              	GLOBAL _in_key_pressed
640   0000              	GLOBAL _in_inkey
641   0000              	GLOBAL _NIRVANAP_CHAR_TABLE
642   0000              	GLOBAL _NIRVANAP_WIDE_IMAGES
643   0000              	GLOBAL _NIRVANAP_TILE_IMAGES
644   0000              	GLOBAL _NIRVANAP_HOLE
645   0000              	GLOBAL _NIRVANAP_ISR_HOOK
646   0000              	GLOBAL _scan_map
647   0000              	GLOBAL _key_map
648   0000              	GLOBAL _player_lvl_table
649   0000              	GLOBAL _map_paper_last
650   0000              	GLOBAL _map_paper_clr
651   0000              	GLOBAL _map_paper
652   0000              	GLOBAL _draw_count
653   0000              	GLOBAL _g_player_hit_right
654   0000              	GLOBAL _g_player_hit_left
655   0000              	GLOBAL _bullet_count
656   0000              	GLOBAL _spr_hack
657   0000              	GLOBAL _boss_stat
658   0000              	GLOBAL _boss_time_fire
659   0000              	GLOBAL _boss_time
660   0000              	GLOBAL _boss_tile
661   0000              	GLOBAL _boss_inc
662   0000              	GLOBAL _boss_col
663   0000              	GLOBAL _boss_lin
664   0000              	GLOBAL _bullet
665   0000              	GLOBAL _bullet_vel
666   0000              	GLOBAL _bullet_frames
667   0000              	GLOBAL _bullet_colint
668   0000              	GLOBAL _bullet_dir
669   0000              	GLOBAL _bullet_tile
670   0000              	GLOBAL _bullet_col
671   0000              	GLOBAL _bullet_lin
672   0000              	GLOBAL _bullet_col0
673   0000              	GLOBAL _bullet_lin0
674   0000              	GLOBAL _bullet_max
675   0000              	GLOBAL _bullet_class
676   0000              	GLOBAL _mush_class
677   0000              	GLOBAL _mush_index
678   0000              	GLOBAL _anim_count
679   0000              	GLOBAL _anim_respanwn
680   0000              	GLOBAL _anim_loop
681   0000              	GLOBAL _anim_end
682   0000              	GLOBAL _anim_int
683   0000              	GLOBAL _anim_tile
684   0000              	GLOBAL _anim_col
685   0000              	GLOBAL _anim_lin
686   0000              	GLOBAL _map_heigth
687   0000              	GLOBAL _map_width
688   0000              	GLOBAL _scr_curr
689   0000              	GLOBAL _sprite_kind
690   0000              	GLOBAL _scr_obj1
691   0000              	GLOBAL _scr_obj0
692   0000              	GLOBAL _scr_map
693   0000              	GLOBAL _sprite_speed_alt
694   0000              	GLOBAL _spr_init
695   0000              	GLOBAL _spr_map_tile
696   0000              	GLOBAL _sprite_frames
697   0000              	GLOBAL _sprite_speed
698   0000              	GLOBAL _screen_ink
699   0000              	GLOBAL _screen_paper
700   0000              	GLOBAL _player_onstair
701   0000              	GLOBAL _game_start_scr
702   0000              	GLOBAL _game_respawn_tile
703   0000              	GLOBAL _game_respawn_index
704   0000              	GLOBAL _game_respawn_time
705   0000              	GLOBAL _game_score_top
706   0000              	GLOBAL _player_coins
707   0000              	GLOBAL _player_lives
708   0000              	GLOBAL _game_over
709   0000              	GLOBAL _game_sound
710   0000              	GLOBAL _game_inmune
711   0000              	GLOBAL _game_god_mode
712   0000              	GLOBAL _sprite_curr_index
713   0000              	GLOBAL _spr_count
714   0000              	GLOBAL _bullet_time
715   0000              	GLOBAL _anim_time
716   0000              	GLOBAL _frame_time
717   0000              	GLOBAL _curr_time
718   0000              	GLOBAL _s_state
719   0000              	GLOBAL _attrib_osd
720   0000              	GLOBAL _attrib_hl
721   0000              	GLOBAL _attrib
722   0000              	GLOBAL _zx_val_asm
723   0000              	GLOBAL _enemies
724   0000              	GLOBAL _tmp_ui
725   0000              	GLOBAL _tmp_sc
726   0000              	GLOBAL _tmp_uc
727   0000              	GLOBAL _tmp1
728   0000              	GLOBAL _tmp0
729   0000              	GLOBAL _tmp
730   0000              	GLOBAL _index1
731   0000              	GLOBAL _index0
732   0000              	GLOBAL _loop_count
733   0000              	GLOBAL _s_col1
734   0000              	GLOBAL _s_col0
735   0000              	GLOBAL _s_lin1
736   0000              	GLOBAL _s_lin0
737   0000              	GLOBAL _s_tile1
738   0000              	GLOBAL _s_tile0
739   0000              	GLOBAL _player_brick_time
740   0000              	GLOBAL _player_hit_count
741   0000              	GLOBAL _sprite_horizontal_check
742   0000              	GLOBAL _sprite_on_air
743   0000              	GLOBAL _sprite
744   0000              	GLOBAL _fps
745   0000              	GLOBAL _game_2buttons
746   0000              	GLOBAL _game_respawn_curr_time
747   0000              	GLOBAL _game_worldup
748   0000              	GLOBAL _game_mush_count
749   0000              	GLOBAL _game_boss_fix
750   0000              	GLOBAL _game_boss_hit
751   0000              	GLOBAL _game_boss_alive
752   0000              	GLOBAL _game_boss
753   0000              	GLOBAL _game_world
754   0000              	GLOBAL _game_gravity
755   0000              	GLOBAL _player_onfire
756   0000              	GLOBAL _player_anim_stair
757   0000              	GLOBAL _player_hit_time
758   0000              	GLOBAL _player_lin_scr
759   0000              	GLOBAL _player_col_scr
760   0000              	GLOBAL _player_lvl
761   0000              	GLOBAL _player_int
762   0000              	GLOBAL _player_str
763   0000              	GLOBAL _player_max_vita
764   0000              	GLOBAL _player_max_mana
765   0000              	GLOBAL _player_vita
766   0000              	GLOBAL _player_mana
767   0000              	GLOBAL _player_keys
768   0000              	GLOBAL _player_vel_inc
769   0000              	GLOBAL _player_vel_y1
770   0000              	GLOBAL _player_vel_y0
771   0000              	GLOBAL _player_vel_y
772   0000              	GLOBAL _player_vel_x
773   0000              	GLOBAL _player_score
774   0000              	GLOBAL _last_time
775   0000              	GLOBAL _player_slide
776   0000              	GLOBAL _spr_timer
777   0000              	GLOBAL _jump_lin
778   0000              	GLOBAL _player_hit_col
779   0000              	GLOBAL _player_hit_lin
780   0000              	GLOBAL _colint
781   0000              	GLOBAL _col
782   0000              	GLOBAL _lin
783   0000              	GLOBAL _tile
784   0000              	GLOBAL _state_a
785   0000              	GLOBAL _state
786   0000              	GLOBAL _class
787   0000              	GLOBAL _tbuffer
788   0000              	GLOBAL _dirs_alt
789   0000              	GLOBAL _dirs
790   0000              	GLOBAL _k2
791   0000              	GLOBAL _k1
792   0000              	GLOBAL _joyfunc2
793   0000              	GLOBAL _joyfunc1
794   0000              	GLOBAL _btiles
795   0000              	GLOBAL _spec128
796   0000              	GLOBAL _GLOBAL_ZX_PORT_7FFD
797   0000              	GLOBAL _GLOBAL_ZX_PORT_1FFD
798   0000              	GLOBAL _GLOBAL_ZX_PORT_FE
799   0000              	GLOBAL _ay_effect_20
800   0000              	GLOBAL _ay_effect_19
801   0000              	GLOBAL _ay_effect_18
802   0000              	GLOBAL _ay_effect_17
803   0000              	GLOBAL _ay_effect_16
804   0000              	GLOBAL _ay_effect_15
805   0000              	GLOBAL _ay_effect_14
806   0000              	GLOBAL _ay_effect_13
807   0000              	GLOBAL _ay_effect_12
808   0000              	GLOBAL _ay_effect_11
809   0000              	GLOBAL _ay_effect_10
810   0000              	GLOBAL _ay_effect_09
811   0000              	GLOBAL _ay_effect_08
812   0000              	GLOBAL _ay_effect_07
813   0000              	GLOBAL _ay_effect_06
814   0000              	GLOBAL _ay_effect_05
815   0000              	GLOBAL _ay_effect_04
816   0000              	GLOBAL _ay_effect_03
817   0000              	GLOBAL _ay_effect_02
818   0000              	GLOBAL _ay_effect_01
819   0000              	GLOBAL _pb_midi_phase_1
820   0000              	GLOBAL _pb_midi_title
821   0000              	GLOBAL _control_method
822   0000              	GLOBAL _world0_h
823   0000              	GLOBAL _world0_w
824   0000              	GLOBAL _world0
825   0000              	GLOBAL _paper0
826   0000              	GLOBAL _lenght0
827   0000              	GLOBAL _start_scr0
828   0000              ;--------------------------------------------------------
829   0000              ; special function registers
830   0000              ;--------------------------------------------------------
831   0000              defc _IO_FE	=	0x00fe
832   0000              defc _IO_1FFD	=	0x1ffd
833   0000              defc _IO_7FFD	=	0x7ffd
834   0000              ;--------------------------------------------------------
835   0000              ; ram data
836   0000              ;--------------------------------------------------------
837   0000              	SECTION bss_compiler
838   0000              ;--------------------------------------------------------
839   0000              ; ram data
840   0000              ;--------------------------------------------------------
841   0000              
842   0000              IF 0
843   0000              
844   0000              ; .area _INITIALIZED removed by z88dk
845   0000              
846   0000              
847   0000              ENDIF
848   0000              
849   0000              ;--------------------------------------------------------
850   0000              ; absolute external ram data
851   0000              ;--------------------------------------------------------
852   0000              	SECTION IGNORE
853   0000              ;--------------------------------------------------------
854   0000              ; global & static initialisations
855   0000              ;--------------------------------------------------------
856   0000              	SECTION code_crt_init
857   0000              ;--------------------------------------------------------
858   0000              ; Home
859   0000              ;--------------------------------------------------------
860   0000              	SECTION IGNORE
861   0000              ;--------------------------------------------------------
862   0000              ; code
863   0000              ;--------------------------------------------------------
864   0000              	SECTION code_compiler
865   0000              ;	---------------------------------
866   0000              ; Function player_init
867   0000              ; ---------------------------------
868   0000              _player_init:
869   0000  CD 00 00    	call	___sdcc_enter_ix
870   0003  21 07 00    	ld	hl, +(_class + 0x0007)
871   0006  36 00       	ld	(hl),0x00
872   0008  21 07 00    	ld	hl, +(_tile + 0x0007)
873   000B  DD 7E 06    	ld	a,(ix+6)
874   000E  77          	ld	(hl), a
875   000F  21 07 00    	ld	hl, +(_lin + 0x0007)
876   0012  DD 7E 04    	ld	a,(ix+4)
877   0015  77          	ld	(hl), a
878   0016  21 07 00    	ld	hl, +(_col + 0x0007)
879   0019  DD 7E 05    	ld	a,(ix+5)
880   001C  77          	ld	(hl), a
881   001D  21 07 00    	ld	hl, +(_colint + 0x0007)
882   0020  36 00       	ld	(hl),0x00
883   0022  21 07 00    	ld	hl, +(_state + 0x0007)
884   0025  36 00       	ld	(hl),0x00
885   0027  01 07 00    	ld	bc,_state_a+7
886   002A  AF          	xor	a, a
887   002B  02          	ld	(bc), a
888   002C  21 07 00    	ld	hl, +(_jump_lin + 0x0007)
889   002F  DD 7E 04    	ld	a,(ix+4)
890   0032  77          	ld	(hl), a
891   0033  ED 5B 00 00 	ld	de,(_curr_time)
892   0037  ED 53 0E 00 	ld	(_last_time + 0x000e),de
893   003B  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
894   003E  36 00       	ld	(hl),0x00
895   0040  0A          	ld	a, (bc)
896   0041  F6 11       	or	a,+(0x01|0x10)
897   0043  02          	ld	(bc),a
898   0044  21 00 00    	ld	hl,_player_hit_col
899   0047  36 00       	ld	(hl),0x00
900   0049  21 00 00    	ld	hl,_player_hit_lin
901   004C  36 00       	ld	(hl),0x00
902   004E  21 00 00    	ld	hl,_player_slide
903   0051  36 00       	ld	(hl),0x00
904   0053  21 00 00    	ld	hl,_player_onstair
905   0056  36 00       	ld	(hl),0x00
906   0058  21 00 00    	ld	hl,_player_onfire
907   005B  36 00       	ld	(hl),0x00
908   005D  DD 66 05    	ld	h,(ix+5)
909   0060  DD 6E 04    	ld	l,(ix+4)
910   0063  E5          	push	hl
911   0064  DD 56 06    	ld	d,(ix+6)
912   0067  1E 07       	ld	e,0x07
913   0069  D5          	push	de
914   006A  CD 00 00    	call	_NIRVANAP_spriteT_callee
915   006D  DD E1       	pop	ix
916   006F  C9          	ret
917   0070              	SECTION code_compiler
918   0070              ;	---------------------------------
919   0070              ; Function player_turn
920   0070              ; ---------------------------------
921   0070              _player_turn:
922   0070  21 00 00    	ld	hl,_sprite
923   0073  CD 00 00    	call	_spr_chktime
924   0076  7D          	ld	a, l
925   0077  B7          	or	a, a
926   0078  C8          	ret	Z
927   0079  21 00 00    	ld	hl,_k1
928   007C  E5          	push	hl
929   007D  2A 00 00    	ld	hl,(_joyfunc1)
930   0080  CD 00 00    	call	___sdcc_call_hl
931   0083  F1          	pop	af
932   0084  7D          	ld	a,l
933   0085  32 00 00    	ld	(_dirs),a
934   0088  21 00 00    	ld	hl,_k2
935   008B  E5          	push	hl
936   008C  2A 00 00    	ld	hl,(_joyfunc2)
937   008F  CD 00 00    	call	___sdcc_call_hl
938   0092  F1          	pop	af
939   0093  7D          	ld	a,l
940   0094  32 00 00    	ld	(_dirs_alt),a
941   0097  CD 9D 00    	call	_player_move
942   009A  C3 D6 03    	jp  _player_collision
943   009D              	SECTION code_compiler
944   009D              ;	---------------------------------
945   009D              ; Function player_move
946   009D              ; ---------------------------------
947   009D              _player_move:
948   009D  3A 07 00    	ld	a,(_lin + 0x0007)
949   00A0  32 00 00    	ld	(_s_lin0),a
950   00A3  3A 07 00    	ld	a,(_col + 0x0007)
951   00A6  32 00 00    	ld	(_s_col0),a
952   00A9  21 07 00    	ld	hl,+(_tile + 0x0007)
953   00AC  4E          	ld	c, (hl)
954   00AD  21 07 00    	ld	hl,+(_colint + 0x0007)
955   00B0  46          	ld	b, (hl)
956   00B1  79          	ld	a, c
957   00B2  80          	add	a, b
958   00B3  32 00 00    	ld	(_s_tile0),a
959   00B6  3A 07 00    	ld	a,(_state + 0x0007)
960   00B9  32 00 00    	ld	(_s_state),a
961   00BC  21 00 00    	ld	hl,_s_state
962   00BF  CB 46       	bit	0, (hl)
963   00C1  20 07       	jr	NZ,l_player_move_00113
964   00C3  21 00 00    	ld	hl,_s_state
965   00C6  CB 4E       	bit	1, (hl)
966   00C8  28 49       	jr	Z,l_player_move_00114
967   00CA              l_player_move_00113:
968   00CA  CD 49 03    	call	_player_fire
969   00CD  3A 00 00    	ld	a,(_player_vel_y)
970   00D0  21 00 00    	ld	hl,_player_vel_y1
971   00D3  96          	sub	a, (hl)
972   00D4  E2 D9 00    	jp	PO, l_player_move_00162
973   00D7  EE 80       	xor	a,0x80
974   00D9              l_player_move_00162:
975   00D9  F2 FC 00    	jp	P, l_player_move_00106
976   00DC  21 00 00    	ld	hl,_dirs
977   00DF  CB 56       	bit	2, (hl)
978   00E1  28 09       	jr	Z,l_player_move_00102
979   00E3  21 00 00    	ld	hl,_s_state
980   00E6  7E          	ld	a,(hl)
981   00E7  F6 08       	or	a,0x08
982   00E9  E6 FB       	and	a,0xfb
983   00EB  77          	ld	(hl),a
984   00EC              l_player_move_00102:
985   00EC  21 00 00    	ld	hl,_dirs
986   00EF  CB 4E       	bit	1, (hl)
987   00F1  28 09       	jr	Z,l_player_move_00106
988   00F3  21 00 00    	ld	hl,_s_state
989   00F6  7E          	ld	a,(hl)
990   00F7  F6 04       	or	a,0x04
991   00F9  E6 F7       	and	a,0xf7
992   00FB  77          	ld	(hl),a
993   00FC              l_player_move_00106:
994   00FC  CD 07 0E    	call	_player_move_jump
995   00FF  7D          	ld	a, l
996   0100  B7          	or	a, a
997   0101  28 1C       	jr	Z,l_player_move_00115
998   0103  3A 00 00    	ld	a,(_player_onstair)
999   0106  B7          	or	a, a
1000  0107  20 16       	jr	NZ,l_player_move_00115
1001  0109  21 60 08    	ld	hl,0x0860
1002  010C  E5          	push	hl
1003  010D  CD F7 06    	call	_player_tile
1004  0110  F1          	pop	af
1005  0111  18 0C       	jr	l_player_move_00115
1006  0113              l_player_move_00114:
1007  0113  CD 85 01    	call	_player_move_input
1008  0116  3A 00 00    	ld	a,(_player_onstair)
1009  0119  B7          	or	a, a
1010  011A  20 03       	jr	NZ,l_player_move_00115
1011  011C  CD 82 0C    	call	_player_check_floor
1012  011F              l_player_move_00115:
1013  011F  CD 00 00    	call	_spr_redraw
1014  0122  7D          	ld	a, l
1015  0123  B7          	or	a, a
1016  0124  28 03       	jr	Z,l_player_move_00118
1017  0126  CD 12 07    	call	_player_check_map
1018  0129              l_player_move_00118:
1019  0129  3A 00 00    	ld	a,(_player_hit_lin)
1020  012C  B7          	or	a, a
1021  012D  28 03       	jr	Z,l_player_move_00120
1022  012F  CD E9 0B    	call	_player_hit_platform_clear
1023  0132              l_player_move_00120:
1024  0132  3A 00 00    	ld	a,(_s_state)
1025  0135  32 07 00    	ld	((_state + 0x0007)),a
1026  0138  2E 00       	ld	l,0x00
1027  013A  C9          	ret
1028  013B              	SECTION code_compiler
1029  013B              ;	---------------------------------
1030  013B              ; Function player_check_input
1031  013B              ; ---------------------------------
1032  013B              _player_check_input:
1033  013B  21 00 00    	ld	hl,_dirs
1034  013E  CB 56       	bit	2, (hl)
1035  0140  28 0C       	jr	Z,l_player_check_input_00102
1036  0142  21 00 00    	ld	hl,_dirs
1037  0145  CB 5E       	bit	3, (hl)
1038  0147  28 05       	jr	Z,l_player_check_input_00102
1039  0149  21 00 00    	ld	hl,_dirs
1040  014C  36 00       	ld	(hl),0x00
1041  014E              l_player_check_input_00102:
1042  014E  21 00 00    	ld	hl,_dirs
1043  0151  7E          	ld	a, (hl)
1044  0152  CB 07       	rlc	a
1045  0154  E6 01       	and	a,0x01
1046  0156  CB 47       	bit	0, a
1047  0158  20 28       	jr	NZ,l_player_check_input_00107
1048  015A  CB 56       	bit	2, (hl)
1049  015C  20 24       	jr	NZ,l_player_check_input_00107
1050  015E  21 00 00    	ld	hl,_dirs
1051  0161  CB 5E       	bit	3, (hl)
1052  0163  20 1D       	jr	NZ,l_player_check_input_00107
1053  0165  21 00 00    	ld	hl,_dirs
1054  0168  CB 46       	bit	0, (hl)
1055  016A  20 16       	jr	NZ,l_player_check_input_00107
1056  016C  21 00 00    	ld	hl,_dirs
1057  016F  CB 4E       	bit	1, (hl)
1058  0171  20 0F       	jr	NZ,l_player_check_input_00107
1059  0173  3A 00 00    	ld	a,(_dirs_alt)
1060  0176  CB 07       	rlc	a
1061  0178  E6 01       	and	a,0x01
1062  017A  CB 47       	bit	0, a
1063  017C  20 04       	jr	NZ,l_player_check_input_00107
1064  017E  2E 00       	ld	l,0x00
1065  0180  18 02       	jr	l_player_check_input_00108
1066  0182              l_player_check_input_00107:
1067  0182  2E 01       	ld	l,0x01
1068  0184              l_player_check_input_00108:
1069  0184  C9          	ret
1070  0185              	SECTION code_compiler
1071  0185              ;	---------------------------------
1072  0185              ; Function player_move_input
1073  0185              ; ---------------------------------
1074  0185              _player_move_input:
1075  0185  CD 3B 01    	call	_player_check_input
1076  0188  7D          	ld	a, l
1077  0189  B7          	or	a, a
1078  018A  CA 09 03    	jp	Z, l_player_move_input_00149
1079  018D  CD 49 03    	call	_player_fire
1080  0190  7D          	ld	a, l
1081  0191  B7          	or	a, a
1082  0192  28 0A       	jr	Z,l_player_move_input_00102
1083  0194  21 00 00    	ld	hl,_dirs
1084  0197  36 00       	ld	(hl),0x00
1085  0199  2E 00       	ld	l,0x00
1086  019B  C3 2F 03    	jp	l_player_move_input_00151
1087  019E              l_player_move_input_00102:
1088  019E  3A 00 00    	ld	a,(_game_2buttons)
1089  01A1  B7          	or	a, a
1090  01A2  28 07       	jr	Z,l_player_move_input_00104
1091  01A4  3A 00 00    	ld	a,(_dirs)
1092  01A7  E6 80       	and	a,0x80
1093  01A9  18 16       	jr	l_player_move_input_00105
1094  01AB              l_player_move_input_00104:
1095  01AB  21 00 00    	ld	hl,_dirs
1096  01AE  7E          	ld	a, (hl)
1097  01AF  CB 07       	rlc	a
1098  01B1  E6 01       	and	a,0x01
1099  01B3  CB 47       	bit	0, a
1100  01B5  28 04       	jr	Z,l_player_move_input_00153
1101  01B7  CB 46       	bit	0, (hl)
1102  01B9  20 04       	jr	NZ,l_player_move_input_00154
1103  01BB              l_player_move_input_00153:
1104  01BB  3E 00       	ld	a,0x00
1105  01BD  18 02       	jr	l_player_move_input_00155
1106  01BF              l_player_move_input_00154:
1107  01BF  3E 01       	ld	a,0x01
1108  01C1              l_player_move_input_00155:
1109  01C1              l_player_move_input_00105:
1110  01C1  B7          	or	a, a
1111  01C2  28 4A       	jr	Z,l_player_move_input_00109
1112  01C4  21 00 00    	ld	hl,_player_vel_inc
1113  01C7  36 01       	ld	(hl),0x01
1114  01C9  CD 00 00    	call	_ay_is_playing
1115  01CC  7D          	ld	a, l
1116  01CD  D6 03       	sub	a,0x03
1117  01CF  28 06       	jr	Z,l_player_move_input_00107
1118  01D1  21 00 00    	ld	hl,_ay_effect_03
1119  01D4  CD 00 00    	call	_ay_fx_play
1120  01D7              l_player_move_input_00107:
1121  01D7  21 00 00    	ld	hl,_player_onstair
1122  01DA  36 00       	ld	(hl),0x00
1123  01DC  21 00 00    	ld	hl,_s_state
1124  01DF  7E          	ld	a,(hl)
1125  01E0  F6 01       	or	a,0x01
1126  01E2  E6 FD       	and	a,0xfd
1127  01E4  77          	ld	(hl),a
1128  01E5  3A 07 00    	ld	a,(_lin + 0x0007)
1129  01E8  32 07 00    	ld	((_jump_lin + 0x0007)),a
1130  01EB  3A 00 00    	ld	a,(_s_state)
1131  01EE  32 07 00    	ld	((_state + 0x0007)),a
1132  01F1  21 64 08    	ld	hl,0x0864
1133  01F4  E5          	push	hl
1134  01F5  CD F7 06    	call	_player_tile
1135  01F8  F1          	pop	af
1136  01F9  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
1137  01FC  36 02       	ld	(hl),0x02
1138  01FE  21 00 00    	ld	hl,_player_slide
1139  0201  36 00       	ld	(hl),0x00
1140  0203  3A 00 00    	ld	a,(_player_vel_y0)
1141  0206  32 00 00    	ld	(_player_vel_y),a
1142  0209  2E 01       	ld	l,0x01
1143  020B  C3 2F 03    	jp	l_player_move_input_00151
1144  020E              l_player_move_input_00109:
1145  020E  21 00 00    	ld	hl,_dirs
1146  0211  CB 5E       	bit	3, (hl)
1147  0213  28 23       	jr	Z,l_player_move_input_00113
1148  0215  CD 30 03    	call	_player_fix_walk_lin
1149  0218  21 00 00    	ld	hl,_s_state
1150  021B  7E          	ld	a,(hl)
1151  021C  F6 04       	or	a,0x04
1152  021E  E6 F7       	and	a,0xf7
1153  0220  77          	ld	(hl),a
1154  0221  01 07 00    	ld	bc,_state_a+7
1155  0224  0A          	ld	a, (bc)
1156  0225  F6 10       	or	a,0x10
1157  0227  E6 F7       	and	a,0xf7
1158  0229  02          	ld	(bc),a
1159  022A  3A 00 00    	ld	a,(_player_onstair)
1160  022D  B7          	or	a, a
1161  022E  28 05       	jr	Z,l_player_move_input_00111
1162  0230  2E 00       	ld	l,0x00
1163  0232  CD 21 06    	call	_player_check_stairs
1164  0235              l_player_move_input_00111:
1165  0235  CD 00 00    	call	_spr_move_horizontal
1166  0238              l_player_move_input_00113:
1167  0238  21 00 00    	ld	hl,_dirs
1168  023B  CB 56       	bit	2, (hl)
1169  023D  28 23       	jr	Z,l_player_move_input_00117
1170  023F  CD 30 03    	call	_player_fix_walk_lin
1171  0242  21 00 00    	ld	hl,_s_state
1172  0245  7E          	ld	a,(hl)
1173  0246  F6 08       	or	a,0x08
1174  0248  E6 FB       	and	a,0xfb
1175  024A  77          	ld	(hl),a
1176  024B  01 07 00    	ld	bc,_state_a+7
1177  024E  0A          	ld	a, (bc)
1178  024F  F6 08       	or	a,0x08
1179  0251  E6 EF       	and	a,0xef
1180  0253  02          	ld	(bc),a
1181  0254  3A 00 00    	ld	a,(_player_onstair)
1182  0257  B7          	or	a, a
1183  0258  28 05       	jr	Z,l_player_move_input_00115
1184  025A  2E 00       	ld	l,0x00
1185  025C  CD 21 06    	call	_player_check_stairs
1186  025F              l_player_move_input_00115:
1187  025F  CD 00 00    	call	_spr_move_horizontal
1188  0262              l_player_move_input_00117:
1189  0262  21 00 00    	ld	hl,_dirs
1190  0265  CB 46       	bit	0, (hl)
1191  0267  28 3C       	jr	Z,l_player_move_input_00129
1192  0269  2E 00       	ld	l,0x00
1193  026B  CD 21 06    	call	_player_check_stairs
1194  026E  3A 00 00    	ld	a,(_player_onstair)
1195  0271  B7          	or	a, a
1196  0272  20 13       	jr	NZ,l_player_move_input_00121
1197  0274  2E 01       	ld	l,0x01
1198  0276  CD 21 06    	call	_player_check_stairs
1199  0279  3A 00 00    	ld	a,(_player_onstair)
1200  027C  B7          	or	a, a
1201  027D  20 08       	jr	NZ,l_player_move_input_00121
1202  027F  3E FE       	ld	a,0xfe
1203  0281  F5          	push	af
1204  0282  33          	inc	sp
1205  0283  CD 78 05    	call	_player_check_stairs_vertical
1206  0286  33          	inc	sp
1207  0287              l_player_move_input_00121:
1208  0287  3A 00 00    	ld	a,(_player_onstair)
1209  028A  B7          	or	a, a
1210  028B  28 05       	jr	Z,l_player_move_input_00126
1211  028D  CD 00 00    	call	_spr_move_up
1212  0290  18 13       	jr	l_player_move_input_00129
1213  0292              l_player_move_input_00126:
1214  0292  21 00 00    	ld	hl,_dirs
1215  0295  CB 5E       	bit	3, (hl)
1216  0297  20 0C       	jr	NZ,l_player_move_input_00129
1217  0299  21 00 00    	ld	hl,_dirs
1218  029C  CB 56       	bit	2, (hl)
1219  029E  20 05       	jr	NZ,l_player_move_input_00129
1220  02A0  2E 00       	ld	l,0x00
1221  02A2  C3 2F 03    	jp	l_player_move_input_00151
1222  02A5              l_player_move_input_00129:
1223  02A5  21 00 00    	ld	hl,_dirs
1224  02A8  CB 4E       	bit	1, (hl)
1225  02AA  28 3B       	jr	Z,l_player_move_input_00141
1226  02AC  2E 00       	ld	l,0x00
1227  02AE  CD 21 06    	call	_player_check_stairs
1228  02B1  3A 00 00    	ld	a,(_player_onstair)
1229  02B4  B7          	or	a, a
1230  02B5  20 13       	jr	NZ,l_player_move_input_00133
1231  02B7  2E 01       	ld	l,0x01
1232  02B9  CD 21 06    	call	_player_check_stairs
1233  02BC  3A 00 00    	ld	a,(_player_onstair)
1234  02BF  B7          	or	a, a
1235  02C0  20 08       	jr	NZ,l_player_move_input_00133
1236  02C2  3E 12       	ld	a,0x12
1237  02C4  F5          	push	af
1238  02C5  33          	inc	sp
1239  02C6  CD 78 05    	call	_player_check_stairs_vertical
1240  02C9  33          	inc	sp
1241  02CA              l_player_move_input_00133:
1242  02CA  3A 00 00    	ld	a,(_player_onstair)
1243  02CD  B7          	or	a, a
1244  02CE  28 05       	jr	Z,l_player_move_input_00138
1245  02D0  CD 00 00    	call	_spr_move_down
1246  02D3  18 12       	jr	l_player_move_input_00141
1247  02D5              l_player_move_input_00138:
1248  02D5  21 00 00    	ld	hl,_dirs
1249  02D8  CB 5E       	bit	3, (hl)
1250  02DA  20 0B       	jr	NZ,l_player_move_input_00141
1251  02DC  21 00 00    	ld	hl,_dirs
1252  02DF  CB 56       	bit	2, (hl)
1253  02E1  20 04       	jr	NZ,l_player_move_input_00141
1254  02E3  2E 00       	ld	l,0x00
1255  02E5  18 48       	jr	l_player_move_input_00151
1256  02E7              l_player_move_input_00141:
1257  02E7  3A 00 00    	ld	a,(_s_state)
1258  02EA  32 07 00    	ld	((_state + 0x0007)),a
1259  02ED  3A 00 00    	ld	a,(_player_onstair)
1260  02F0  B7          	or	a, a
1261  02F1  28 0A       	jr	Z,l_player_move_input_00143
1262  02F3  21 72 00    	ld	hl,0x0072
1263  02F6  E5          	push	hl
1264  02F7  CD F7 06    	call	_player_tile
1265  02FA  F1          	pop	af
1266  02FB  18 08       	jr	l_player_move_input_00144
1267  02FD              l_player_move_input_00143:
1268  02FD  21 60 08    	ld	hl,0x0860
1269  0300  E5          	push	hl
1270  0301  CD F7 06    	call	_player_tile
1271  0304  F1          	pop	af
1272  0305              l_player_move_input_00144:
1273  0305  2E 01       	ld	l,0x01
1274  0307  18 26       	jr	l_player_move_input_00151
1275  0309              l_player_move_input_00149:
1276  0309  21 07 00    	ld	hl, +(_colint + 0x0007)
1277  030C  36 00       	ld	(hl),0x00
1278  030E  3A 00 00    	ld	a,(_player_onstair)
1279  0311  B7          	or	a, a
1280  0312  28 0A       	jr	Z,l_player_move_input_00146
1281  0314  21 72 00    	ld	hl,0x0072
1282  0317  E5          	push	hl
1283  0318  CD F7 06    	call	_player_tile
1284  031B  F1          	pop	af
1285  031C  18 08       	jr	l_player_move_input_00147
1286  031E              l_player_move_input_00146:
1287  031E  21 70 01    	ld	hl,0x0170
1288  0321  E5          	push	hl
1289  0322  CD F7 06    	call	_player_tile
1290  0325  F1          	pop	af
1291  0326              l_player_move_input_00147:
1292  0326  21 00 00    	ld	hl,_s_state
1293  0329  7E          	ld	a,(hl)
1294  032A  E6 F3       	and	a,+(0xf7&0xfb)
1295  032C  77          	ld	(hl),a
1296  032D  2E 00       	ld	l,0x00
1297  032F              l_player_move_input_00151:
1298  032F  C9          	ret
1299  0330              	SECTION code_compiler
1300  0330              ;	---------------------------------
1301  0330              ; Function player_fix_walk_lin
1302  0330              ; ---------------------------------
1303  0330              _player_fix_walk_lin:
1304  0330  3A 00 00    	ld	a,(_player_onstair)
1305  0333  B7          	or	a, a
1306  0334  C0          	ret	NZ
1307  0335  01 07 00    	ld	bc,_lin+7
1308  0338  3A 00 00    	ld	a,(_s_lin0)
1309  033B  07          	rlca
1310  033C  07          	rlca
1311  033D  07          	rlca
1312  033E  07          	rlca
1313  033F  E6 0F       	and	a,0x0f
1314  0341  07          	rlca
1315  0342  07          	rlca
1316  0343  07          	rlca
1317  0344  07          	rlca
1318  0345  E6 F0       	and	a,0xf0
1319  0347  02          	ld	(bc), a
1320  0348  C9          	ret
1321  0349              	SECTION code_compiler
1322  0349              ;	---------------------------------
1323  0349              ; Function player_fire
1324  0349              ; ---------------------------------
1325  0349              _player_fire:
1326  0349  CD 00 00    	call	___sdcc_enter_ix
1327  034C  3B          	dec	sp
1328  034D  3A 00 00    	ld	a,(_game_2buttons)
1329  0350  B7          	or	a, a
1330  0351  28 0A       	jr	Z,l_player_fire_00102
1331  0353  3A 00 00    	ld	a,(_dirs_alt)
1332  0356  E6 80       	and	a,0x80
1333  0358  32 00 00    	ld	(_player_onfire),a
1334  035B  18 1A       	jr	l_player_fire_00103
1335  035D              l_player_fire_00102:
1336  035D  21 00 00    	ld	hl,_dirs
1337  0360  7E          	ld	a, (hl)
1338  0361  CB 07       	rlc	a
1339  0363  E6 01       	and	a,0x01
1340  0365  CB 47       	bit	0, a
1341  0367  28 04       	jr	Z,l_player_fire_00119
1342  0369  CB 46       	bit	0, (hl)
1343  036B  28 04       	jr	Z,l_player_fire_00120
1344  036D              l_player_fire_00119:
1345  036D  0E 00       	ld	c,0x00
1346  036F  18 02       	jr	l_player_fire_00121
1347  0371              l_player_fire_00120:
1348  0371  0E 01       	ld	c,0x01
1349  0373              l_player_fire_00121:
1350  0373  21 00 00    	ld	hl,_player_onfire
1351  0376  71          	ld	(hl), c
1352  0377              l_player_fire_00103:
1353  0377  3A 00 00    	ld	a,(_player_onfire)
1354  037A  B7          	or	a, a
1355  037B  28 53       	jr	Z,l_player_fire_00116
1356  037D  3A 07 00    	ld	a,(_tile + 0x0007)
1357  0380  FE 70       	cp	a,0x70
1358  0382  28 04       	jr	Z,l_player_fire_00104
1359  0384  D6 71       	sub	a,0x71
1360  0386  20 0D       	jr	NZ,l_player_fire_00105
1361  0388              l_player_fire_00104:
1362  0388  21 60 08    	ld	hl,0x0860
1363  038B  E5          	push	hl
1364  038C  CD F7 06    	call	_player_tile
1365  038F  F1          	pop	af
1366  0390  21 07 00    	ld	hl, +(_colint + 0x0007)
1367  0393  36 00       	ld	(hl),0x00
1368  0395              l_player_fire_00105:
1369  0395  21 00 00    	ld	hl,_player_mana
1370  0398  7E          	ld	a, (hl)
1371  0399  B7          	or	a, a
1372  039A  28 30       	jr	Z,l_player_fire_00113
1373  039C  3A 07 00    	ld	a,(_bullet_col + 0x0007)
1374  039F  3C          	inc	a
1375  03A0  20 2A       	jr	NZ,l_player_fire_00113
1376  03A2  3E 05       	ld	a,0x05
1377  03A4  96          	sub	a, (hl)
1378  03A5  30 0F       	jr	NC,l_player_fire_00110
1379  03A7  3A 00 00    	ld	a,(_game_god_mode)
1380  03AA  B7          	or	a, a
1381  03AB  20 0E       	jr	NZ,l_player_fire_00111
1382  03AD  21 00 00    	ld	hl,_player_mana
1383  03B0  7E          	ld	a, (hl)
1384  03B1  C6 FB       	add	a,0xfb
1385  03B3  77          	ld	(hl), a
1386  03B4  18 05       	jr	l_player_fire_00111
1387  03B6              l_player_fire_00110:
1388  03B6  21 00 00    	ld	hl,_player_mana
1389  03B9  36 00       	ld	(hl),0x00
1390  03BB              l_player_fire_00111:
1391  03BB  CD 00 00    	call	_game_update_stats
1392  03BE  21 00 00    	ld	hl,_ay_effect_05
1393  03C1  CD 00 00    	call	_ay_fx_play
1394  03C4  21 07 78    	ld	hl,0x7807
1395  03C7  E5          	push	hl
1396  03C8  CD 00 00    	call	_game_shoot_fire
1397  03CB  F1          	pop	af
1398  03CC              l_player_fire_00113:
1399  03CC  2E 01       	ld	l,0x01
1400  03CE  18 02       	jr	l_player_fire_00117
1401  03D0              l_player_fire_00116:
1402  03D0  2E 00       	ld	l,0x00
1403  03D2              l_player_fire_00117:
1404  03D2  33          	inc	sp
1405  03D3  DD E1       	pop	ix
1406  03D5  C9          	ret
1407  03D6              	SECTION code_compiler
1408  03D6              ;	---------------------------------
1409  03D6              ; Function player_collision
1410  03D6              ; ---------------------------------
1411  03D6              _player_collision:
1412  03D6  21 19 00    	ld	hl,0x0019
1413  03D9  E5          	push	hl
1414  03DA  2A 00 00    	ld	hl,(_player_hit_time)
1415  03DD  E5          	push	hl
1416  03DE  CD 00 00    	call	_game_check_time
1417  03E1  F1          	pop	af
1418  03E2  F1          	pop	af
1419  03E3  7D          	ld	a,l
1420  03E4  B7          	or	a,a
1421  03E5  CA 29 05    	jp	Z, l_player_collision_00132
1422  03E8  21 00 00    	ld	hl,_sprite
1423  03EB  36 00       	ld	(hl),0x00
1424  03ED  3A 07 00    	ld	a,(_col + 7)
1425  03F0  32 00 00    	ld	(_s_col1),a
1426  03F3  3A 07 00    	ld	a,(_lin + 7)
1427  03F6  32 00 00    	ld	(_s_lin1),a
1428  03F9  C6 08       	add	a,0x08
1429  03FB  4F          	ld	c, a
1430  03FC  3A 00 00    	ld	a, (_s_col1)
1431  03FF  47          	ld	b,a
1432  0400  C5          	push	bc
1433  0401  CD 00 00    	call	_spr_calc_index
1434  0404  F1          	pop	af
1435  0405  7D          	ld	a,l
1436  0406  32 00 00    	ld	(_sprite_curr_index),a
1437  0409  4F          	ld	c,a
1438  040A  06 00       	ld	b,0x00
1439  040C  21 00 00    	ld	hl,_scr_map
1440  040F  09          	add	hl,bc
1441  0410  4E          	ld	c, (hl)
1442  0411  3E 2F       	ld	a,0x2f
1443  0413  91          	sub	a, c
1444  0414  30 3C       	jr	NC,l_player_collision_00128
1445  0416  79          	ld	a,c
1446  0417  FE 3A       	cp	a,0x3a
1447  0419  30 37       	jr	NC,l_player_collision_00128
1448  041B  D6 39       	sub	a,0x39
1449  041D  20 07       	jr	NZ,l_player_collision_00107
1450  041F  21 00 00    	ld	hl,_game_worldup
1451  0422  36 01       	ld	(hl),0x01
1452  0424  18 2C       	jr	l_player_collision_00128
1453  0426              l_player_collision_00107:
1454  0426  3A 00 00    	ld	a,(_game_god_mode)
1455  0429  B7          	or	a, a
1456  042A  20 16       	jr	NZ,l_player_collision_00102
1457  042C  3A 00 00    	ld	a,(_game_inmune)
1458  042F  B7          	or	a, a
1459  0430  20 10       	jr	NZ,l_player_collision_00102
1460  0432  3E 82       	ld	a,0x82
1461  0434  21 00 00    	ld	hl,_s_lin1
1462  0437  96          	sub	a, (hl)
1463  0438  30 08       	jr	NC,l_player_collision_00102
1464  043A  CD 65 10    	call	_player_lost_life
1465  043D  2E 00       	ld	l,0x00
1466  043F  C3 2B 05    	jp	l_player_collision_00133
1467  0442              l_player_collision_00102:
1468  0442  21 00 00    	ld	hl,_ay_effect_06
1469  0445  CD 00 00    	call	_ay_fx_play
1470  0448  2E 06       	ld	l,0x06
1471  044A  CD 00 00    	call	_zx_border_fastcall
1472  044D  2E 32       	ld	l,0x32
1473  044F  CD C9 11    	call	_player_hit
1474  0452              l_player_collision_00128:
1475  0452  21 00 00    	ld	hl,_sprite
1476  0455  7E          	ld	a, (hl)
1477  0456  D6 07       	sub	a,0x07
1478  0458  D2 29 05    	jp	NC, l_player_collision_00132
1479  045B  3E 00       	ld	a, +((_class) & 0xFF)
1480  045D  86          	add	a, (hl)
1481  045E  4F          	ld	c, a
1482  045F  3E 00       	ld	a, +((_class) / 256)
1483  0461  CE 00       	adc	a,0x00
1484  0463  47          	ld	b, a
1485  0464  0A          	ld	a, (bc)
1486  0465  B7          	or	a, a
1487  0466  CA 22 05    	jp	Z, l_player_collision_00127
1488  0469  4E          	ld	c,(hl)
1489  046A  06 00       	ld	b,0x00
1490  046C  21 00 00    	ld	hl,_col
1491  046F  09          	add	hl,bc
1492  0470  4E          	ld	c, (hl)
1493  0471  06 00       	ld	b,0x00
1494  0473  3A 00 00    	ld	a,(_s_col1)
1495  0476  5F          	ld	e,a
1496  0477  16 00       	ld	d,0x00
1497  0479  79          	ld	a, c
1498  047A  93          	sub	a, e
1499  047B  6F          	ld	l, a
1500  047C  78          	ld	a, b
1501  047D  9A          	sbc	a, d
1502  047E  67          	ld	h, a
1503  047F  CD 00 00    	call	_abs_fastcall
1504  0482  7D          	ld	a,l
1505  0483  D6 02       	sub	a,0x02
1506  0485  7C          	ld	a,h
1507  0486  17          	rla
1508  0487  3F          	ccf
1509  0488  1F          	rra
1510  0489  DE 80       	sbc	a,0x80
1511  048B  D2 22 05    	jp	NC, l_player_collision_00127
1512  048E  2A 00 00    	ld	hl,(_sprite)
1513  0491  26 00       	ld	h,0x00
1514  0493  01 00 00    	ld	bc,_lin
1515  0496  09          	add	hl,bc
1516  0497  4E          	ld	c,(hl)
1517  0498  06 00       	ld	b,0x00
1518  049A  3A 00 00    	ld	a,(_s_lin1)
1519  049D  5F          	ld	e,a
1520  049E  16 00       	ld	d,0x00
1521  04A0  79          	ld	a, c
1522  04A1  93          	sub	a, e
1523  04A2  6F          	ld	l, a
1524  04A3  78          	ld	a, b
1525  04A4  9A          	sbc	a, d
1526  04A5  67          	ld	h, a
1527  04A6  CD 00 00    	call	_abs_fastcall
1528  04A9  7D          	ld	a,l
1529  04AA  D6 0E       	sub	a,0x0e
1530  04AC  7C          	ld	a,h
1531  04AD  17          	rla
1532  04AE  3F          	ccf
1533  04AF  1F          	rra
1534  04B0  DE 80       	sbc	a,0x80
1535  04B2  30 6E       	jr	NC,l_player_collision_00127
1536  04B4  2A 00 00    	ld	hl,(_sprite)
1537  04B7  26 00       	ld	h,0x00
1538  04B9  01 00 00    	ld	bc,_class
1539  04BC  09          	add	hl,bc
1540  04BD  7E          	ld	a,(hl)
1541  04BE  FE 06       	cp	a,0x06
1542  04C0  20 1D       	jr	NZ,l_player_collision_00115
1543  04C2  21 00 00    	ld	hl,_player_vita
1544  04C5  7E          	ld	a, (hl)
1545  04C6  C6 19       	add	a,0x19
1546  04C8  77          	ld	(hl), a
1547  04C9  3A 00 00    	ld	a,(_player_max_vita)
1548  04CC  21 00 00    	ld	hl,_player_vita
1549  04CF  96          	sub	a, (hl)
1550  04D0  30 06       	jr	NC,l_player_collision_00113
1551  04D2  3A 00 00    	ld	a,(_player_max_vita)
1552  04D5  32 00 00    	ld	(_player_vita),a
1553  04D8              l_player_collision_00113:
1554  04D8  CD 2C 05    	call	_player_pick_mushroom
1555  04DB  2E 00       	ld	l,0x00
1556  04DD  18 4C       	jr	l_player_collision_00133
1557  04DF              l_player_collision_00115:
1558  04DF  FE 07       	cp	a,0x07
1559  04E1  20 1D       	jr	NZ,l_player_collision_00119
1560  04E3  21 00 00    	ld	hl,_player_mana
1561  04E6  7E          	ld	a, (hl)
1562  04E7  C6 19       	add	a,0x19
1563  04E9  77          	ld	(hl), a
1564  04EA  3A 00 00    	ld	a,(_player_max_mana)
1565  04ED  21 00 00    	ld	hl,_player_mana
1566  04F0  96          	sub	a, (hl)
1567  04F1  30 06       	jr	NC,l_player_collision_00117
1568  04F3  3A 00 00    	ld	a,(_player_max_mana)
1569  04F6  32 00 00    	ld	(_player_mana),a
1570  04F9              l_player_collision_00117:
1571  04F9  CD 2C 05    	call	_player_pick_mushroom
1572  04FC  2E 00       	ld	l,0x00
1573  04FE  18 2B       	jr	l_player_collision_00133
1574  0500              l_player_collision_00119:
1575  0500  D6 08       	sub	a,0x08
1576  0502  20 0A       	jr	NZ,l_player_collision_00121
1577  0504  CD 2C 05    	call	_player_pick_mushroom
1578  0507  CD 46 05    	call	_player_1up
1579  050A  2E 00       	ld	l,0x00
1580  050C  18 1D       	jr	l_player_collision_00133
1581  050E              l_player_collision_00121:
1582  050E  21 00 00    	ld	hl,_ay_effect_06
1583  0511  CD 00 00    	call	_ay_fx_play
1584  0514  2E 02       	ld	l,0x02
1585  0516  CD 00 00    	call	_zx_border_fastcall
1586  0519  2E 14       	ld	l,0x14
1587  051B  CD C9 11    	call	_player_hit
1588  051E  2E 01       	ld	l,0x01
1589  0520  18 09       	jr	l_player_collision_00133
1590  0522              l_player_collision_00127:
1591  0522  21 00 00    	ld	hl,_sprite
1592  0525  34          	inc	(hl)
1593  0526  C3 52 04    	jp	l_player_collision_00128
1594  0529              l_player_collision_00132:
1595  0529  2E 00       	ld	l,0x00
1596  052B              l_player_collision_00133:
1597  052B  C9          	ret
1598  052C              	SECTION code_compiler
1599  052C              ;	---------------------------------
1600  052C              ; Function player_pick_mushroom
1601  052C              ; ---------------------------------
1602  052C              _player_pick_mushroom:
1603  052C  21 00 00    	ld	hl,_ay_effect_12
1604  052F  CD 00 00    	call	_ay_fx_play
1605  0532  21 01 00    	ld	hl,0x0001
1606  0535  CD 18 0C    	call	_player_score_add
1607  0538  CD 00 00    	call	_game_update_stats
1608  053B  2A 00 00    	ld	hl,(_sprite)
1609  053E  CD 00 00    	call	_spr_destroy
1610  0541  21 00 00    	ld	hl,_game_mush_count
1611  0544  35          	dec	(hl)
1612  0545  C9          	ret
1613  0546              	SECTION code_compiler
1614  0546              ;	---------------------------------
1615  0546              ; Function player_1up
1616  0546              ; ---------------------------------
1617  0546              _player_1up:
1618  0546  21 00 00    	ld	hl,_player_lives
1619  0549  7E          	ld	a, (hl)
1620  054A  D6 FF       	sub	a,0xff
1621  054C  D0          	ret	NC
1622  054D  34          	inc	(hl)
1623  054E  CD 00 00    	call	_spr_flatten
1624  0551  21 00 00    	ld	hl,___str_0
1625  0554  E5          	push	hl
1626  0555  21 0C 0C    	ld	hl,0x0c0c
1627  0558  E5          	push	hl
1628  0559  CD 00 00    	call	_zx_print_str
1629  055C  AF          	xor	a, a
1630  055D  F5          	push	af
1631  055E  33          	inc	sp
1632  055F  21 19 00    	ld	hl,0x0019
1633  0562  E5          	push	hl
1634  0563  21 0C 15    	ld	hl,0x150c
1635  0566  E5          	push	hl
1636  0567  3E 0C       	ld	a,0x0c
1637  0569  F5          	push	af
1638  056A  33          	inc	sp
1639  056B  CD 00 00    	call	_game_colour_message
1640  056E  F1          	pop	af
1641  056F  F1          	pop	af
1642  0570  F1          	pop	af
1643  0571  CD 00 00    	call	_game_update_stats
1644  0574  CD 00 00    	call	_spr_unflatten
1645  0577  C9          	ret
1646  0578              	SECTION rodata_compiler
1647  0000              ___str_0:
1648  0000  31 20 55 50 21 
                        	DEFM "1 UP!"
1649  0005  00          	DEFB 0x00
1650  0006              	SECTION code_compiler
1651  0578              ;	---------------------------------
1652  0578              ; Function player_check_stairs_vertical
1653  0578              ; ---------------------------------
1654  0578              _player_check_stairs_vertical:
1655  0578  CD 00 00    	call	___sdcc_enter_ix
1656  057B  3B          	dec	sp
1657  057C  21 07 00    	ld	hl,+(_col + 0x0007)
1658  057F  4E          	ld	c, (hl)
1659  0580  CB 41       	bit	0, c
1660  0582  20 2F       	jr	NZ,l_player_check_stairs_vertical_00102
1661  0584  3A 07 00    	ld	a,(_lin + 0x0007)
1662  0587  DD 86 04    	add	a,(ix+4)
1663  058A  47          	ld	b, a
1664  058B  79          	ld	a, c
1665  058C  48          	ld	c,b
1666  058D  47          	ld	b,a
1667  058E  C5          	push	bc
1668  058F  CD 00 00    	call	_spr_calc_index
1669  0592  F1          	pop	af
1670  0593  7D          	ld	a,l
1671  0594  32 00 00    	ld	(_sprite_curr_index),a
1672  0597  4F          	ld	c,a
1673  0598  06 00       	ld	b,0x00
1674  059A  21 00 00    	ld	hl,_scr_map
1675  059D  09          	add	hl,bc
1676  059E  7E          	ld	a,(hl)
1677  059F  4F          	ld	c,a
1678  05A0  D6 44       	sub	a,0x44
1679  05A2  38 05       	jr	C,l_player_check_stairs_vertical_00110
1680  05A4  3E 47       	ld	a,0x47
1681  05A6  91          	sub	a, c
1682  05A7  30 04       	jr	NC,l_player_check_stairs_vertical_00111
1683  05A9              l_player_check_stairs_vertical_00110:
1684  05A9  1E 00       	ld	e,0x00
1685  05AB  18 02       	jr	l_player_check_stairs_vertical_00112
1686  05AD              l_player_check_stairs_vertical_00111:
1687  05AD  1E 01       	ld	e,0x01
1688  05AF              l_player_check_stairs_vertical_00112:
1689  05AF  0E 00       	ld	c,0x00
1690  05B1  18 57       	jr	l_player_check_stairs_vertical_00103
1691  05B3              l_player_check_stairs_vertical_00102:
1692  05B3  79          	ld	a, c
1693  05B4  DD 96 04    	sub	a,(ix+4)
1694  05B7  57          	ld	d, a
1695  05B8  01 07 00    	ld	bc,_lin+7
1696  05BB  0A          	ld	a, (bc)
1697  05BC  DD 86 04    	add	a,(ix+4)
1698  05BF  C5          	push	bc
1699  05C0  5F          	ld	e,a
1700  05C1  D5          	push	de
1701  05C2  CD 00 00    	call	_spr_calc_index
1702  05C5  F1          	pop	af
1703  05C6  C1          	pop	bc
1704  05C7  7D          	ld	a,l
1705  05C8  32 00 00    	ld	(_sprite_curr_index),a
1706  05CB  5F          	ld	e,a
1707  05CC  16 00       	ld	d,0x00
1708  05CE  21 00 00    	ld	hl,_scr_map
1709  05D1  19          	add	hl,de
1710  05D2  7E          	ld	a,(hl)
1711  05D3  5F          	ld	e,a
1712  05D4  D6 44       	sub	a,0x44
1713  05D6  38 05       	jr	C,l_player_check_stairs_vertical_00113
1714  05D8  3E 47       	ld	a,0x47
1715  05DA  93          	sub	a, e
1716  05DB  30 04       	jr	NC,l_player_check_stairs_vertical_00114
1717  05DD              l_player_check_stairs_vertical_00113:
1718  05DD  1E 00       	ld	e,0x00
1719  05DF  18 02       	jr	l_player_check_stairs_vertical_00115
1720  05E1              l_player_check_stairs_vertical_00114:
1721  05E1  1E 01       	ld	e,0x01
1722  05E3              l_player_check_stairs_vertical_00115:
1723  05E3  3A 07 00    	ld	a,(_col + 0x0007)
1724  05E6  DD 96 04    	sub	a,(ix+4)
1725  05E9  57          	ld	d, a
1726  05EA  0A          	ld	a, (bc)
1727  05EB  DD 86 04    	add	a,(ix+4)
1728  05EE  D5          	push	de
1729  05EF  5F          	ld	e,a
1730  05F0  D5          	push	de
1731  05F1  CD 00 00    	call	_spr_calc_index
1732  05F4  F1          	pop	af
1733  05F5  D1          	pop	de
1734  05F6  7D          	ld	a,l
1735  05F7  32 00 00    	ld	(_sprite_curr_index),a
1736  05FA  7B          	ld	a, e
1737  05FB  D6 44       	sub	a,0x44
1738  05FD  38 05       	jr	C,l_player_check_stairs_vertical_00116
1739  05FF  3E 47       	ld	a,0x47
1740  0601  93          	sub	a, e
1741  0602  30 04       	jr	NC,l_player_check_stairs_vertical_00117
1742  0604              l_player_check_stairs_vertical_00116:
1743  0604  0E 00       	ld	c,0x00
1744  0606  18 02       	jr	l_player_check_stairs_vertical_00118
1745  0608              l_player_check_stairs_vertical_00117:
1746  0608  0E 01       	ld	c,0x01
1747  060A              l_player_check_stairs_vertical_00118:
1748  060A              l_player_check_stairs_vertical_00103:
1749  060A  7B          	ld	a, e
1750  060B  B7          	or	a,a
1751  060C  20 03       	jr	NZ,l_player_check_stairs_vertical_00104
1752  060E  B1          	or	a,c
1753  060F  28 07       	jr	Z,l_player_check_stairs_vertical_00105
1754  0611              l_player_check_stairs_vertical_00104:
1755  0611  21 00 00    	ld	hl,_player_onstair
1756  0614  36 01       	ld	(hl),0x01
1757  0616  18 05       	jr	l_player_check_stairs_vertical_00108
1758  0618              l_player_check_stairs_vertical_00105:
1759  0618  21 00 00    	ld	hl,_player_onstair
1760  061B  36 00       	ld	(hl),0x00
1761  061D              l_player_check_stairs_vertical_00108:
1762  061D  33          	inc	sp
1763  061E  DD E1       	pop	ix
1764  0620  C9          	ret
1765  0621              	SECTION code_compiler
1766  0621              ;	---------------------------------
1767  0621              ; Function player_check_stairs
1768  0621              ; ---------------------------------
1769  0621              _player_check_stairs:
1770  0621  CD 00 00    	call	___sdcc_enter_ix
1771  0624  3B          	dec	sp
1772  0625  5D          	ld	e, l
1773  0626  3A 07 00    	ld	a,(_col + 0x0007)
1774  0629  83          	add	a, e
1775  062A  4F          	ld	c, a
1776  062B  21 07 00    	ld	hl,+(_lin + 0x0007)
1777  062E  46          	ld	b, (hl)
1778  062F  D5          	push	de
1779  0630  79          	ld	a, c
1780  0631  48          	ld	c,b
1781  0632  47          	ld	b,a
1782  0633  C5          	push	bc
1783  0634  CD 00 00    	call	_spr_calc_index
1784  0637  F1          	pop	af
1785  0638  D1          	pop	de
1786  0639  7D          	ld	a,l
1787  063A  32 00 00    	ld	(_sprite_curr_index),a
1788  063D  4F          	ld	c,a
1789  063E  06 00       	ld	b,0x00
1790  0640  21 00 00    	ld	hl,_scr_map
1791  0643  09          	add	hl,bc
1792  0644  7E          	ld	a,(hl)
1793  0645  4F          	ld	c,a
1794  0646  D6 44       	sub	a,0x44
1795  0648  38 05       	jr	C,l_player_check_stairs_00111
1796  064A  3E 47       	ld	a,0x47
1797  064C  91          	sub	a, c
1798  064D  30 04       	jr	NC,l_player_check_stairs_00112
1799  064F              l_player_check_stairs_00111:
1800  064F  0E 00       	ld	c,0x00
1801  0651  18 02       	jr	l_player_check_stairs_00113
1802  0653              l_player_check_stairs_00112:
1803  0653  0E 01       	ld	c,0x01
1804  0655              l_player_check_stairs_00113:
1805  0655  3A 07 00    	ld	a,(_col + 0x0007)
1806  0658  83          	add	a, e
1807  0659  57          	ld	d, a
1808  065A  3A 07 00    	ld	a,(_lin + 0x0007)
1809  065D  C6 0F       	add	a,0x0f
1810  065F  47          	ld	b, a
1811  0660  C5          	push	bc
1812  0661  58          	ld	e,b
1813  0662  D5          	push	de
1814  0663  CD 00 00    	call	_spr_calc_index
1815  0666  F1          	pop	af
1816  0667  C1          	pop	bc
1817  0668  7D          	ld	a,l
1818  0669  32 00 00    	ld	(_sprite_curr_index),a
1819  066C  5F          	ld	e,a
1820  066D  16 00       	ld	d,0x00
1821  066F  21 00 00    	ld	hl,_scr_map
1822  0672  19          	add	hl,de
1823  0673  7E          	ld	a,(hl)
1824  0674  47          	ld	b,a
1825  0675  D6 44       	sub	a,0x44
1826  0677  38 05       	jr	C,l_player_check_stairs_00114
1827  0679  3E 47       	ld	a,0x47
1828  067B  90          	sub	a, b
1829  067C  30 04       	jr	NC,l_player_check_stairs_00115
1830  067E              l_player_check_stairs_00114:
1831  067E  06 00       	ld	b,0x00
1832  0680  18 02       	jr	l_player_check_stairs_00116
1833  0682              l_player_check_stairs_00115:
1834  0682  06 01       	ld	b,0x01
1835  0684              l_player_check_stairs_00116:
1836  0684  79          	ld	a, c
1837  0685  B7          	or	a,a
1838  0686  20 03       	jr	NZ,l_player_check_stairs_00105
1839  0688  B0          	or	a,b
1840  0689  28 13       	jr	Z,l_player_check_stairs_00106
1841  068B              l_player_check_stairs_00105:
1842  068B  21 00 00    	ld	hl,_player_onstair
1843  068E  7E          	ld	a, (hl)
1844  068F  B7          	or	a, a
1845  0690  20 1D       	jr	NZ,l_player_check_stairs_00109
1846  0692  36 01       	ld	(hl),0x01
1847  0694  21 72 00    	ld	hl,0x0072
1848  0697  E5          	push	hl
1849  0698  CD F7 06    	call	_player_tile
1850  069B  F1          	pop	af
1851  069C  18 11       	jr	l_player_check_stairs_00109
1852  069E              l_player_check_stairs_00106:
1853  069E  21 00 00    	ld	hl,_player_onstair
1854  06A1  7E          	ld	a, (hl)
1855  06A2  B7          	or	a, a
1856  06A3  28 0A       	jr	Z,l_player_check_stairs_00109
1857  06A5  36 00       	ld	(hl),0x00
1858  06A7  21 60 08    	ld	hl,0x0860
1859  06AA  E5          	push	hl
1860  06AB  CD F7 06    	call	_player_tile
1861  06AE  F1          	pop	af
1862  06AF              l_player_check_stairs_00109:
1863  06AF  33          	inc	sp
1864  06B0  DD E1       	pop	ix
1865  06B2  C9          	ret
1866  06B3              	SECTION code_compiler
1867  06B3              ;	---------------------------------
1868  06B3              ; Function player_anim_tile
1869  06B3              ; ---------------------------------
1870  06B3              _player_anim_tile:
1871  06B3  21 07 00    	ld	hl,+(_tile + 0x0007)
1872  06B6  4E          	ld	c, (hl)
1873  06B7  21 07 00    	ld	hl,+(_colint + 0x0007)
1874  06BA  46          	ld	b, (hl)
1875  06BB  79          	ld	a, c
1876  06BC  80          	add	a, b
1877  06BD  32 00 00    	ld	(_s_tile1),a
1878  06C0  3A 00 00    	ld	a,(_player_onstair)
1879  06C3  B7          	or	a, a
1880  06C4  28 17       	jr	Z,l_player_anim_tile_00109
1881  06C6  21 00 00    	ld	hl,_player_anim_stair
1882  06C9  34          	inc	(hl)
1883  06CA  3E 01       	ld	a,0x01
1884  06CC  96          	sub	a, (hl)
1885  06CD  30 02       	jr	NC,l_player_anim_tile_00102
1886  06CF  36 00       	ld	(hl),0x00
1887  06D1              l_player_anim_tile_00102:
1888  06D1  79          	ld	a, c
1889  06D2  21 00 00    	ld	hl,_player_anim_stair
1890  06D5  86          	add	a, (hl)
1891  06D6  C6 04       	add	a,0x04
1892  06D8  32 00 00    	ld	(_s_tile1),a
1893  06DB  18 19       	jr	l_player_anim_tile_00111
1894  06DD              l_player_anim_tile_00109:
1895  06DD  3A 00 00    	ld	a,(_player_onfire)
1896  06E0  B7          	or	a, a
1897  06E1  28 13       	jr	Z,l_player_anim_tile_00111
1898  06E3  21 00 00    	ld	hl,_s_state
1899  06E6  CB 56       	bit	2, (hl)
1900  06E8  28 07       	jr	Z,l_player_anim_tile_00104
1901  06EA  21 00 00    	ld	hl,_s_tile1
1902  06ED  36 60       	ld	(hl),0x60
1903  06EF  18 05       	jr	l_player_anim_tile_00111
1904  06F1              l_player_anim_tile_00104:
1905  06F1  21 00 00    	ld	hl,_s_tile1
1906  06F4  36 68       	ld	(hl),0x68
1907  06F6              l_player_anim_tile_00111:
1908  06F6  C9          	ret
1909  06F7              	SECTION code_compiler
1910  06F7              ;	---------------------------------
1911  06F7              ; Function player_tile
1912  06F7              ; ---------------------------------
1913  06F7              _player_tile:
1914  06F7  CD 00 00    	call	___sdcc_enter_ix
1915  06FA  DD 7E 05    	ld	a,(ix+5)
1916  06FD  F5          	push	af
1917  06FE  33          	inc	sp
1918  06FF  2A FF FF    	ld	hl,(_sprite-1)
1919  0702  DD 6E 04    	ld	l,(ix+4)
1920  0705  E5          	push	hl
1921  0706  CD 00 00    	call	_spr_tile_dir
1922  0709  F1          	pop	af
1923  070A  33          	inc	sp
1924  070B  7D          	ld	a,l
1925  070C  32 07 00    	ld	((_tile + 0x0007)),a
1926  070F  DD E1       	pop	ix
1927  0711  C9          	ret
1928  0712              	SECTION code_compiler
1929  0712              ;	---------------------------------
1930  0712              ; Function player_check_map
1931  0712              ; ---------------------------------
1932  0712              _player_check_map:
1933  0712  21 07 00    	ld	hl,+(_col + 0x0007)
1934  0715  46          	ld	b, (hl)
1935  0716  21 07 00    	ld	hl,+(_lin + 0x0007)
1936  0719  4E          	ld	c, (hl)
1937  071A  C5          	push	bc
1938  071B  CD 00 00    	call	_spr_calc_index
1939  071E  F1          	pop	af
1940  071F  7D          	ld	a,l
1941  0720  32 00 00    	ld	(_sprite_curr_index),a
1942  0723  21 07 00    	ld	hl,+(_col + 0x0007)
1943  0726  4E          	ld	c, (hl)
1944  0727  3A 07 00    	ld	a,(_lin + 0x0007)
1945  072A  E6 0F       	and	a,0x0f
1946  072C  CB 41       	bit	0, c
1947  072E  20 17       	jr	NZ,l_player_check_map_00108
1948  0730  B7          	or	a, a
1949  0731  20 05       	jr	NZ,l_player_check_map_00102
1950  0733  CD 72 07    	call	_player_pick_item
1951  0736  18 39       	jr	l_player_check_map_00110
1952  0738              l_player_check_map_00102:
1953  0738  CD 72 07    	call	_player_pick_item
1954  073B  21 00 00    	ld	hl,_sprite_curr_index
1955  073E  7E          	ld	a, (hl)
1956  073F  C6 10       	add	a,0x10
1957  0741  77          	ld	(hl), a
1958  0742  CD 72 07    	call	_player_pick_item
1959  0745  18 2A       	jr	l_player_check_map_00110
1960  0747              l_player_check_map_00108:
1961  0747  B7          	or	a, a
1962  0748  20 0C       	jr	NZ,l_player_check_map_00105
1963  074A  CD 72 07    	call	_player_pick_item
1964  074D  21 00 00    	ld	hl,_sprite_curr_index
1965  0750  34          	inc	(hl)
1966  0751  CD 72 07    	call	_player_pick_item
1967  0754  18 1B       	jr	l_player_check_map_00110
1968  0756              l_player_check_map_00105:
1969  0756  CD 72 07    	call	_player_pick_item
1970  0759  21 00 00    	ld	hl,_sprite_curr_index
1971  075C  34          	inc	(hl)
1972  075D  CD 72 07    	call	_player_pick_item
1973  0760  21 00 00    	ld	hl,_sprite_curr_index
1974  0763  7E          	ld	a, (hl)
1975  0764  C6 0F       	add	a,0x0f
1976  0766  77          	ld	(hl), a
1977  0767  CD 72 07    	call	_player_pick_item
1978  076A  21 00 00    	ld	hl,_sprite_curr_index
1979  076D  34          	inc	(hl)
1980  076E  CD 72 07    	call	_player_pick_item
1981  0771              l_player_check_map_00110:
1982  0771  C9          	ret
1983  0772              	SECTION code_compiler
1984  0772              ;	---------------------------------
1985  0772              ; Function player_pick_item
1986  0772              ; ---------------------------------
1987  0772              _player_pick_item:
1988  0772  CD 00 00    	call	___sdcc_enter_ix
1989  0775  3B          	dec	sp
1990  0776  2A 00 00    	ld	hl,(_sprite_curr_index)
1991  0779  26 00       	ld	h,0x00
1992  077B  01 00 00    	ld	bc,_scr_map
1993  077E  09          	add	hl,bc
1994  077F  7E          	ld	a,(hl)
1995  0780  DD 77 FF    	ld	(ix-1),a
1996  0783  D6 24       	sub	a,0x24
1997  0785  DA 3F 09    	jp	C, l_player_pick_item_00131
1998  0788  3E 2F       	ld	a,0x2f
1999  078A  DD 96 FF    	sub	a,(ix-1)
2000  078D  DA 3F 09    	jp	C, l_player_pick_item_00131
2001  0790  CD 00 00    	call	_ay_reset
2002  0793  2A 00 00    	ld	hl,(_sprite_curr_index)
2003  0796  26 00       	ld	h,0x00
2004  0798  01 00 00    	ld	bc,_scr_map
2005  079B  09          	add	hl,bc
2006  079C  3A 00 00    	ld	a,(_sprite_curr_index)
2007  079F  5F          	ld	e,a
2008  07A0  16 00       	ld	d,0x00
2009  07A2  E5          	push	hl
2010  07A3  D5          	push	de
2011  07A4  CD 00 00    	call	_game_match_back
2012  07A7  F1          	pop	af
2013  07A8  C1          	pop	bc
2014  07A9  7D          	ld	a,l
2015  07AA  02          	ld	(bc), a
2016  07AB  2A 00 00    	ld	hl,(_sprite_curr_index)
2017  07AE  26 00       	ld	h,0x00
2018  07B0  CD 00 00    	call	_game_obj_set
2019  07B3  3A 00 00    	ld	a,(_sprite_curr_index)
2020  07B6  07          	rlca
2021  07B7  07          	rlca
2022  07B8  07          	rlca
2023  07B9  07          	rlca
2024  07BA  E6 0F       	and	a,0x0f
2025  07BC  07          	rlca
2026  07BD  07          	rlca
2027  07BE  07          	rlca
2028  07BF  07          	rlca
2029  07C0  E6 F0       	and	a,0xf0
2030  07C2  32 00 00    	ld	(_s_lin1),a
2031  07C5  3A 00 00    	ld	a,(_sprite_curr_index)
2032  07C8  E6 0F       	and	a,0x0f
2033  07CA  87          	add	a, a
2034  07CB  32 00 00    	ld	(_s_col1),a
2035  07CE  21 00 00    	ld	hl,0x0000
2036  07D1  E5          	push	hl
2037  07D2  21 84 03    	ld	hl,0x0384
2038  07D5  E5          	push	hl
2039  07D6  F5          	push	af
2040  07D7  33          	inc	sp
2041  07D8  3A 00 00    	ld	a,(_s_lin1)
2042  07DB  F5          	push	af
2043  07DC  33          	inc	sp
2044  07DD  CD 00 00    	call	_spr_add_anim
2045  07E0  F1          	pop	af
2046  07E1  F1          	pop	af
2047  07E2  F1          	pop	af
2048  07E3  DD 7E FF    	ld	a,(ix-1)
2049  07E6  D6 24       	sub	a,0x24
2050  07E8  DA 3F 09    	jp	C, l_player_pick_item_00131
2051  07EB  3E 2F       	ld	a,0x2f
2052  07ED  DD 96 FF    	sub	a,(ix-1)
2053  07F0  DA 3F 09    	jp	C, l_player_pick_item_00131
2054  07F3  DD 7E FF    	ld	a,(ix-1)
2055  07F6  C6 DC       	add	a,0xdc
2056  07F8  4F          	ld	c, a
2057  07F9  06 00       	ld	b,0x00
2058  07FB  21 02 08    	ld	hl,l_player_pick_item_00177
2059  07FE  09          	add	hl, bc
2060  07FF  09          	add	hl, bc
2061  0800  09          	add	hl, bc
2062  0801  E9          	jp	(hl)
2063  0802              l_player_pick_item_00177:
2064  0802  C3 26 08    	jp	l_player_pick_item_00101
2065  0805  C3 37 08    	jp	l_player_pick_item_00102
2066  0808  C3 48 08    	jp	l_player_pick_item_00103
2067  080B  C3 59 08    	jp	l_player_pick_item_00104
2068  080E  C3 6A 08    	jp	l_player_pick_item_00105
2069  0811  C3 9D 08    	jp	l_player_pick_item_00109
2070  0814  C3 BA 08    	jp	l_player_pick_item_00112
2071  0817  C3 D5 08    	jp	l_player_pick_item_00115
2072  081A  C3 F0 08    	jp	l_player_pick_item_00118
2073  081D  C3 0B 09    	jp	l_player_pick_item_00121
2074  0820  C3 26 09    	jp	l_player_pick_item_00124
2075  0823  C3 8E 08    	jp	l_player_pick_item_00108
2076  0826              l_player_pick_item_00101:
2077  0826  21 00 00    	ld	hl,_ay_effect_09
2078  0829  CD 00 00    	call	_ay_fx_play
2079  082C  21 00 00    	ld	hl,_player_keys
2080  082F  36 01       	ld	(hl),0x01
2081  0831  CD 00 00    	call	_game_update_stats
2082  0834  C3 3F 09    	jp	l_player_pick_item_00131
2083  0837              l_player_pick_item_00102:
2084  0837  21 00 00    	ld	hl,_ay_effect_09
2085  083A  CD 00 00    	call	_ay_fx_play
2086  083D  21 01 00    	ld	hl, +(_player_keys + 0x0001)
2087  0840  36 01       	ld	(hl),0x01
2088  0842  CD 00 00    	call	_game_update_stats
2089  0845  C3 3F 09    	jp	l_player_pick_item_00131
2090  0848              l_player_pick_item_00103:
2091  0848  21 00 00    	ld	hl,_ay_effect_09
2092  084B  CD 00 00    	call	_ay_fx_play
2093  084E  21 02 00    	ld	hl, +(_player_keys + 0x0002)
2094  0851  36 01       	ld	(hl),0x01
2095  0853  CD 00 00    	call	_game_update_stats
2096  0856  C3 3F 09    	jp	l_player_pick_item_00131
2097  0859              l_player_pick_item_00104:
2098  0859  21 00 00    	ld	hl,_ay_effect_09
2099  085C  CD 00 00    	call	_ay_fx_play
2100  085F  21 03 00    	ld	hl, +(_player_keys + 0x0003)
2101  0862  36 01       	ld	(hl),0x01
2102  0864  CD 00 00    	call	_game_update_stats
2103  0867  C3 3F 09    	jp	l_player_pick_item_00131
2104  086A              l_player_pick_item_00105:
2105  086A  21 00 00    	ld	hl,_ay_effect_10
2106  086D  CD 00 00    	call	_ay_fx_play
2107  0870  21 01 00    	ld	hl,0x0001
2108  0873  CD 18 0C    	call	_player_score_add
2109  0876  21 00 00    	ld	hl,_player_coins
2110  0879  7E          	ld	a,(hl)
2111  087A  3C          	inc	a
2112  087B  77          	ld	(hl),a
2113  087C  D6 64       	sub	a,0x64
2114  087E  20 08       	jr	NZ,l_player_pick_item_00107
2115  0880  CD 46 05    	call	_player_1up
2116  0883  21 00 00    	ld	hl,_player_coins
2117  0886  36 00       	ld	(hl),0x00
2118  0888              l_player_pick_item_00107:
2119  0888  CD 00 00    	call	_game_update_stats
2120  088B  C3 3F 09    	jp	l_player_pick_item_00131
2121  088E              l_player_pick_item_00108:
2122  088E  21 00 00    	ld	hl,_ay_effect_10
2123  0891  CD 00 00    	call	_ay_fx_play
2124  0894  21 0A 00    	ld	hl,0x000a
2125  0897  CD 18 0C    	call	_player_score_add
2126  089A  C3 3F 09    	jp	l_player_pick_item_00131
2127  089D              l_player_pick_item_00109:
2128  089D  21 00 00    	ld	hl,_ay_effect_09
2129  08A0  CD 00 00    	call	_ay_fx_play
2130  08A3  21 00 00    	ld	hl,_player_str
2131  08A6  34          	inc	(hl)
2132  08A7  21 00 00    	ld	hl,_player_max_vita
2133  08AA  7E          	ld	a, (hl)
2134  08AB  D6 C8       	sub	a,0xc8
2135  08AD  D2 3F 09    	jp	NC, l_player_pick_item_00131
2136  08B0  7E          	ld	a, (hl)
2137  08B1  C6 0A       	add	a,0x0a
2138  08B3  77          	ld	(hl), a
2139  08B4  CD 00 00    	call	_game_update_stats
2140  08B7  C3 3F 09    	jp	l_player_pick_item_00131
2141  08BA              l_player_pick_item_00112:
2142  08BA  21 00 00    	ld	hl,_ay_effect_09
2143  08BD  CD 00 00    	call	_ay_fx_play
2144  08C0  21 00 00    	ld	hl,_player_str
2145  08C3  34          	inc	(hl)
2146  08C4  21 00 00    	ld	hl,_player_max_vita
2147  08C7  7E          	ld	a, (hl)
2148  08C8  D6 C8       	sub	a,0xc8
2149  08CA  30 73       	jr	NC,l_player_pick_item_00131
2150  08CC  7E          	ld	a, (hl)
2151  08CD  C6 0A       	add	a,0x0a
2152  08CF  77          	ld	(hl), a
2153  08D0  CD 00 00    	call	_game_update_stats
2154  08D3  18 6A       	jr	l_player_pick_item_00131
2155  08D5              l_player_pick_item_00115:
2156  08D5  21 00 00    	ld	hl,_ay_effect_09
2157  08D8  CD 00 00    	call	_ay_fx_play
2158  08DB  21 00 00    	ld	hl,_player_str
2159  08DE  34          	inc	(hl)
2160  08DF  21 00 00    	ld	hl,_player_max_vita
2161  08E2  7E          	ld	a, (hl)
2162  08E3  D6 C8       	sub	a,0xc8
2163  08E5  30 58       	jr	NC,l_player_pick_item_00131
2164  08E7  7E          	ld	a, (hl)
2165  08E8  C6 0A       	add	a,0x0a
2166  08EA  77          	ld	(hl), a
2167  08EB  CD 00 00    	call	_game_update_stats
2168  08EE  18 4F       	jr	l_player_pick_item_00131
2169  08F0              l_player_pick_item_00118:
2170  08F0  21 00 00    	ld	hl,_ay_effect_09
2171  08F3  CD 00 00    	call	_ay_fx_play
2172  08F6  21 00 00    	ld	hl,_player_int
2173  08F9  34          	inc	(hl)
2174  08FA  21 00 00    	ld	hl,_player_max_mana
2175  08FD  7E          	ld	a, (hl)
2176  08FE  D6 C8       	sub	a,0xc8
2177  0900  30 3D       	jr	NC,l_player_pick_item_00131
2178  0902  7E          	ld	a, (hl)
2179  0903  C6 0A       	add	a,0x0a
2180  0905  77          	ld	(hl), a
2181  0906  CD 00 00    	call	_game_update_stats
2182  0909  18 34       	jr	l_player_pick_item_00131
2183  090B              l_player_pick_item_00121:
2184  090B  21 00 00    	ld	hl,_ay_effect_09
2185  090E  CD 00 00    	call	_ay_fx_play
2186  0911  21 00 00    	ld	hl,_player_int
2187  0914  34          	inc	(hl)
2188  0915  21 00 00    	ld	hl,_player_max_mana
2189  0918  7E          	ld	a, (hl)
2190  0919  D6 C8       	sub	a,0xc8
2191  091B  30 22       	jr	NC,l_player_pick_item_00131
2192  091D  7E          	ld	a, (hl)
2193  091E  C6 0A       	add	a,0x0a
2194  0920  77          	ld	(hl), a
2195  0921  CD 00 00    	call	_game_update_stats
2196  0924  18 19       	jr	l_player_pick_item_00131
2197  0926              l_player_pick_item_00124:
2198  0926  21 00 00    	ld	hl,_ay_effect_09
2199  0929  CD 00 00    	call	_ay_fx_play
2200  092C  21 00 00    	ld	hl,_player_int
2201  092F  34          	inc	(hl)
2202  0930  21 00 00    	ld	hl,_player_max_mana
2203  0933  7E          	ld	a, (hl)
2204  0934  D6 C8       	sub	a,0xc8
2205  0936  30 07       	jr	NC,l_player_pick_item_00131
2206  0938  7E          	ld	a, (hl)
2207  0939  C6 0A       	add	a,0x0a
2208  093B  77          	ld	(hl), a
2209  093C  CD 00 00    	call	_game_update_stats
2210  093F              l_player_pick_item_00131:
2211  093F  33          	inc	sp
2212  0940  DD E1       	pop	ix
2213  0942  C9          	ret
2214  0943              	SECTION code_compiler
2215  0943              ;	---------------------------------
2216  0943              ; Function player_hit_platform
2217  0943              ; ---------------------------------
2218  0943              _player_hit_platform:
2219  0943  CD 00 00    	call	___sdcc_enter_ix
2220  0946  F5          	push	af
2221  0947  3A 00 00    	ld	a,(_player_hit_lin)
2222  094A  B7          	or	a, a
2223  094B  C2 E3 0B    	jp	NZ, l_player_hit_platform_00145
2224  094E  21 07 00    	ld	hl,+(_lin + 0x0007)
2225  0951  4E          	ld	c, (hl)
2226  0952  3E 10       	ld	a,0x10
2227  0954  91          	sub	a, c
2228  0955  D2 E3 0B    	jp	NC, l_player_hit_platform_00145
2229  0958  01 00 00    	ld	bc,_scr_map
2230  095B  2A 00 00    	ld	hl,(_index1)
2231  095E  09          	add	hl,bc
2232  095F  7E          	ld	a,(hl)
2233  0960  D6 45       	sub	a,0x45
2234  0962  DA E3 0B    	jp	C, l_player_hit_platform_00145
2235  0965  2A 00 00    	ld	hl,(_curr_time)
2236  0968  22 0E 00    	ld	(_spr_timer + 0x000e),hl
2237  096B  2A 07 00    	ld	hl,(_lin + 0x0007)
2238  096E  26 00       	ld	h,0x00
2239  0970  01 F8 FF    	ld	bc,0xfff8
2240  0973  09          	add	hl,bc
2241  0974  EB          	ex	de,hl
2242  0975  06 04       	ld	b,0x04
2243  0977              l_player_hit_platform_00250:
2244  0977  CB 2A       	sra	d
2245  0979  CB 1B       	rr	e
2246  097B  10 FA       	djnz	l_player_hit_platform_00250
2247  097D  7B          	ld	a, e
2248  097E  07          	rlca
2249  097F  07          	rlca
2250  0980  07          	rlca
2251  0981  07          	rlca
2252  0982  E6 F0       	and	a,0xf0
2253  0984  C6 08       	add	a,0x08
2254  0986  32 00 00    	ld	(_player_hit_lin),a
2255  0989  21 07 00    	ld	hl,+(_col + 0x0007)
2256  098C  4E          	ld	c, (hl)
2257  098D  CB 41       	bit	0, c
2258  098F  20 06       	jr	NZ,l_player_hit_platform_00111
2259  0991  21 00 00    	ld	hl,_player_hit_col
2260  0994  71          	ld	(hl), c
2261  0995  18 2D       	jr	l_player_hit_platform_00112
2262  0997              l_player_hit_platform_00111:
2263  0997  21 07 00    	ld	hl,+(_state + 0x0007)
2264  099A  5E          	ld	e, (hl)
2265  099B  41          	ld	b, c
2266  099C  04          	inc	b
2267  099D  0D          	dec	c
2268  099E  CB 5B       	bit	3, e
2269  09A0  28 12       	jr	Z,l_player_hit_platform_00108
2270  09A2  3A 00 00    	ld	a,(_g_player_hit_right)
2271  09A5  B7          	or	a, a
2272  09A6  28 06       	jr	Z,l_player_hit_platform_00102
2273  09A8  21 00 00    	ld	hl,_player_hit_col
2274  09AB  70          	ld	(hl), b
2275  09AC  18 16       	jr	l_player_hit_platform_00112
2276  09AE              l_player_hit_platform_00102:
2277  09AE  21 00 00    	ld	hl,_player_hit_col
2278  09B1  71          	ld	(hl), c
2279  09B2  18 10       	jr	l_player_hit_platform_00112
2280  09B4              l_player_hit_platform_00108:
2281  09B4  3A 00 00    	ld	a,(_g_player_hit_left)
2282  09B7  B7          	or	a, a
2283  09B8  28 06       	jr	Z,l_player_hit_platform_00105
2284  09BA  21 00 00    	ld	hl,_player_hit_col
2285  09BD  71          	ld	(hl), c
2286  09BE  18 04       	jr	l_player_hit_platform_00112
2287  09C0              l_player_hit_platform_00105:
2288  09C0  21 00 00    	ld	hl,_player_hit_col
2289  09C3  70          	ld	(hl), b
2290  09C4              l_player_hit_platform_00112:
2291  09C4  2A 00 00    	ld	hl,(_index1)
2292  09C7  01 00 00    	ld	bc,_scr_map
2293  09CA  09          	add	hl,bc
2294  09CB  7E          	ld	a,(hl)
2295  09CC  FE 4D       	cp	a,0x4d
2296  09CE  20 43       	jr	NZ,l_player_hit_platform_00114
2297  09D0  E5          	push	hl
2298  09D1  2A 00 00    	ld	hl,(_index1)
2299  09D4  E5          	push	hl
2300  09D5  CD 00 00    	call	_game_match_back
2301  09D8  F1          	pop	af
2302  09D9  C1          	pop	bc
2303  09DA  7D          	ld	a,l
2304  09DB  02          	ld	(bc), a
2305  09DC  2A 00 00    	ld	hl,(_index1)
2306  09DF  CD 00 00    	call	_game_obj_set
2307  09E2  21 00 00    	ld	hl,_index1
2308  09E5  7E          	ld	a, (hl)
2309  09E6  E6 0F       	and	a,0x0f
2310  09E8  87          	add	a, a
2311  09E9  4F          	ld	c, a
2312  09EA  23          	inc	hl
2313  09EB  56          	ld	d,(hl)
2314  09EC  2B          	dec	hl
2315  09ED  7E          	ld	a, (hl)
2316  09EE  06 04       	ld	b,0x04
2317  09F0              l_player_hit_platform_00256:
2318  09F0  CB 3A       	srl	d
2319  09F2  1F          	rra
2320  09F3  10 FB       	djnz	l_player_hit_platform_00256
2321  09F5  07          	rlca
2322  09F6  07          	rlca
2323  09F7  07          	rlca
2324  09F8  07          	rlca
2325  09F9  E6 F0       	and	a,0xf0
2326  09FB  47          	ld	b, a
2327  09FC  21 00 00    	ld	hl,0x0000
2328  09FF  E5          	push	hl
2329  0A00  21 87 03    	ld	hl,0x0387
2330  0A03  E5          	push	hl
2331  0A04  79          	ld	a, c
2332  0A05  48          	ld	c,b
2333  0A06  47          	ld	b,a
2334  0A07  C5          	push	bc
2335  0A08  CD 00 00    	call	_spr_add_anim
2336  0A0B  F1          	pop	af
2337  0A0C  F1          	pop	af
2338  0A0D  F1          	pop	af
2339  0A0E  2E 01       	ld	l,0x01
2340  0A10  C3 E5 0B    	jp	l_player_hit_platform_00148
2341  0A13              l_player_hit_platform_00114:
2342  0A13  FE 5C       	cp	a,0x5c
2343  0A15  28 05       	jr	Z,l_player_hit_platform_00141
2344  0A17  D6 5D       	sub	a,0x5d
2345  0A19  C2 D4 0B    	jp	NZ,l_player_hit_platform_00142
2346  0A1C              l_player_hit_platform_00141:
2347  0A1C  21 00 00    	ld	hl,_tmp0
2348  0A1F  36 00       	ld	(hl),0x00
2349  0A21  3A 00 00    	ld	a,(_game_boss)
2350  0A24  B7          	or	a, a
2351  0A25  28 0B       	jr	Z,l_player_hit_platform_00174
2352  0A27  3A 00 00    	ld	a,(_game_mush_count)
2353  0A2A  B7          	or	a, a
2354  0A2B  28 05       	jr	Z,l_player_hit_platform_00174
2355  0A2D  2E 00       	ld	l,0x00
2356  0A2F  C3 E5 0B    	jp	l_player_hit_platform_00148
2357  0A32              l_player_hit_platform_00174:
2358  0A32              l_player_hit_platform_00138:
2359  0A32  21 00 00    	ld	hl,_tmp0
2360  0A35  7E          	ld	a, (hl)
2361  0A36  D6 07       	sub	a,0x07
2362  0A38  D2 D4 0B    	jp	NC, l_player_hit_platform_00142
2363  0A3B  4E          	ld	c,(hl)
2364  0A3C  06 00       	ld	b,0x00
2365  0A3E  21 00 00    	ld	hl,_mush_index
2366  0A41  09          	add	hl,bc
2367  0A42  4E          	ld	c, (hl)
2368  0A43  06 00       	ld	b,0x00
2369  0A45  2A 00 00    	ld	hl,(_index1)
2370  0A48  AF          	xor	a,a
2371  0A49  ED 42       	sbc	hl,bc
2372  0A4B  C2 CD 0B    	jp	NZ,l_player_hit_platform_00137
2373  0A4E  3A 07 00    	ld	a,(_lin + 0x0007)
2374  0A51  07          	rlca
2375  0A52  07          	rlca
2376  0A53  07          	rlca
2377  0A54  07          	rlca
2378  0A55  E6 0F       	and	a,0x0f
2379  0A57  07          	rlca
2380  0A58  07          	rlca
2381  0A59  07          	rlca
2382  0A5A  07          	rlca
2383  0A5B  E6 F0       	and	a,0xf0
2384  0A5D  C6 E0       	add	a,0xe0
2385  0A5F  32 00 00    	ld	(_s_lin1),a
2386  0A62  3A 07 00    	ld	a,(_col + 0x0007)
2387  0A65  CB 3F       	srl	a
2388  0A67  87          	add	a, a
2389  0A68  32 00 00    	ld	(_s_col1),a
2390  0A6B  21 00 00    	ld	hl,_tmp
2391  0A6E  36 00       	ld	(hl),0x00
2392  0A70              l_player_hit_platform_00120:
2393  0A70  21 00 00    	ld	hl,_tmp
2394  0A73  7E          	ld	a, (hl)
2395  0A74  D6 07       	sub	a,0x07
2396  0A76  30 1C       	jr	NC,l_player_hit_platform_00122
2397  0A78  4E          	ld	c,(hl)
2398  0A79  06 00       	ld	b,0x00
2399  0A7B  21 00 00    	ld	hl,_mush_index
2400  0A7E  09          	add	hl,bc
2401  0A7F  4E          	ld	c, (hl)
2402  0A80  06 00       	ld	b,0x00
2403  0A82  21 00 00    	ld	hl,_index1
2404  0A85  7E          	ld	a, (hl)
2405  0A86  91          	sub	a, c
2406  0A87  20 05       	jr	NZ,l_player_hit_platform_00262
2407  0A89  23          	inc	hl
2408  0A8A  7E          	ld	a, (hl)
2409  0A8B  90          	sub	a, b
2410  0A8C  28 06       	jr	Z,l_player_hit_platform_00122
2411  0A8E              l_player_hit_platform_00262:
2412  0A8E  21 00 00    	ld	hl,_tmp
2413  0A91  34          	inc	(hl)
2414  0A92  18 DC       	jr	l_player_hit_platform_00120
2415  0A94              l_player_hit_platform_00122:
2416  0A94  21 00 00    	ld	hl,_ay_effect_07
2417  0A97  CD 00 00    	call	_ay_fx_play
2418  0A9A  2A 00 00    	ld	hl,(_tmp)
2419  0A9D  26 00       	ld	h,0x00
2420  0A9F  01 00 00    	ld	bc,_mush_class
2421  0AA2  09          	add	hl,bc
2422  0AA3  7E          	ld	a,(hl)
2423  0AA4  FE 78       	cp	a,0x78
2424  0AA6  28 18       	jr	Z,l_player_hit_platform_00123
2425  0AA8  FE 79       	cp	a,0x79
2426  0AAA  28 2F       	jr	Z,l_player_hit_platform_00124
2427  0AAC  FE 7A       	cp	a,0x7a
2428  0AAE  28 5F       	jr	Z,l_player_hit_platform_00126
2429  0AB0  FE 7B       	cp	a,0x7b
2430  0AB2  28 41       	jr	Z,l_player_hit_platform_00125
2431  0AB4  FE 7C       	cp	a,0x7c
2432  0AB6  CA 43 0B    	jp	Z,l_player_hit_platform_00128
2433  0AB9  D6 7D       	sub	a,0x7d
2434  0ABB  28 6C       	jr	Z,l_player_hit_platform_00127
2435  0ABD  C3 5B 0B    	jp	l_player_hit_platform_00129
2436  0AC0              l_player_hit_platform_00123:
2437  0AC0  2E 02       	ld	l,0x02
2438  0AC2  CD 00 00    	call	_zx_border_fastcall
2439  0AC5  3A 00 00    	ld	a,(_s_col1)
2440  0AC8  21 06 FF    	ld	hl,0xff06
2441  0ACB  E5          	push	hl
2442  0ACC  F5          	push	af
2443  0ACD  33          	inc	sp
2444  0ACE  3A 00 00    	ld	a,(_s_lin1)
2445  0AD1  F5          	push	af
2446  0AD2  33          	inc	sp
2447  0AD3  CD 00 00    	call	_enemy_init
2448  0AD6  F1          	pop	af
2449  0AD7  F1          	pop	af
2450  0AD8  C3 5B 0B    	jp	l_player_hit_platform_00129
2451  0ADB              l_player_hit_platform_00124:
2452  0ADB  2E 02       	ld	l,0x02
2453  0ADD  CD 00 00    	call	_zx_border_fastcall
2454  0AE0  3A 00 00    	ld	a,(_s_col1)
2455  0AE3  21 06 01    	ld	hl,0x0106
2456  0AE6  E5          	push	hl
2457  0AE7  F5          	push	af
2458  0AE8  33          	inc	sp
2459  0AE9  3A 00 00    	ld	a,(_s_lin1)
2460  0AEC  F5          	push	af
2461  0AED  33          	inc	sp
2462  0AEE  CD 00 00    	call	_enemy_init
2463  0AF1  F1          	pop	af
2464  0AF2  F1          	pop	af
2465  0AF3  18 66       	jr	l_player_hit_platform_00129
2466  0AF5              l_player_hit_platform_00125:
2467  0AF5  2E 01       	ld	l,0x01
2468  0AF7  CD 00 00    	call	_zx_border_fastcall
2469  0AFA  3A 00 00    	ld	a,(_s_col1)
2470  0AFD  21 07 01    	ld	hl,0x0107
2471  0B00  E5          	push	hl
2472  0B01  F5          	push	af
2473  0B02  33          	inc	sp
2474  0B03  3A 00 00    	ld	a,(_s_lin1)
2475  0B06  F5          	push	af
2476  0B07  33          	inc	sp
2477  0B08  CD 00 00    	call	_enemy_init
2478  0B0B  F1          	pop	af
2479  0B0C  F1          	pop	af
2480  0B0D  18 4C       	jr	l_player_hit_platform_00129
2481  0B0F              l_player_hit_platform_00126:
2482  0B0F  2E 01       	ld	l,0x01
2483  0B11  CD 00 00    	call	_zx_border_fastcall
2484  0B14  3A 00 00    	ld	a,(_s_col1)
2485  0B17  21 07 FF    	ld	hl,0xff07
2486  0B1A  E5          	push	hl
2487  0B1B  F5          	push	af
2488  0B1C  33          	inc	sp
2489  0B1D  3A 00 00    	ld	a,(_s_lin1)
2490  0B20  F5          	push	af
2491  0B21  33          	inc	sp
2492  0B22  CD 00 00    	call	_enemy_init
2493  0B25  F1          	pop	af
2494  0B26  F1          	pop	af
2495  0B27  18 32       	jr	l_player_hit_platform_00129
2496  0B29              l_player_hit_platform_00127:
2497  0B29  2E 04       	ld	l,0x04
2498  0B2B  CD 00 00    	call	_zx_border_fastcall
2499  0B2E  3A 00 00    	ld	a,(_s_col1)
2500  0B31  21 08 01    	ld	hl,0x0108
2501  0B34  E5          	push	hl
2502  0B35  F5          	push	af
2503  0B36  33          	inc	sp
2504  0B37  3A 00 00    	ld	a,(_s_lin1)
2505  0B3A  F5          	push	af
2506  0B3B  33          	inc	sp
2507  0B3C  CD 00 00    	call	_enemy_init
2508  0B3F  F1          	pop	af
2509  0B40  F1          	pop	af
2510  0B41  18 18       	jr	l_player_hit_platform_00129
2511  0B43              l_player_hit_platform_00128:
2512  0B43  2E 04       	ld	l,0x04
2513  0B45  CD 00 00    	call	_zx_border_fastcall
2514  0B48  3A 00 00    	ld	a,(_s_col1)
2515  0B4B  21 08 FF    	ld	hl,0xff08
2516  0B4E  E5          	push	hl
2517  0B4F  F5          	push	af
2518  0B50  33          	inc	sp
2519  0B51  3A 00 00    	ld	a,(_s_lin1)
2520  0B54  F5          	push	af
2521  0B55  33          	inc	sp
2522  0B56  CD 00 00    	call	_enemy_init
2523  0B59  F1          	pop	af
2524  0B5A  F1          	pop	af
2525  0B5B              l_player_hit_platform_00129:
2526  0B5B  21 00 00    	ld	hl,_game_mush_count
2527  0B5E  34          	inc	(hl)
2528  0B5F  3A 00 00    	ld	a,(_game_boss)
2529  0B62  B7          	or	a, a
2530  0B63  20 68       	jr	NZ,l_player_hit_platform_00137
2531  0B65  3A 00 00    	ld	a,(_index1)
2532  0B68  C6 F0       	add	a,0xf0
2533  0B6A  32 00 00    	ld	(_index0),a
2534  0B6D  3A 01 00    	ld	a,(_index1 + 1)
2535  0B70  CE FF       	adc	a,0xff
2536  0B72  21 01 00    	ld	hl,_index0 + 1
2537  0B75  77          	ld	(hl), a
2538  0B76  3E 00       	ld	a, +((_scr_map) & 0xFF)
2539  0B78  2B          	dec	hl
2540  0B79  86          	add	a, (hl)
2541  0B7A  4F          	ld	c, a
2542  0B7B  3E 00       	ld	a, +((_scr_map) / 256)
2543  0B7D  23          	inc	hl
2544  0B7E  8E          	adc	a, (hl)
2545  0B7F  47          	ld	b, a
2546  0B80  C5          	push	bc
2547  0B81  46          	ld	b,(hl)
2548  0B82  2B          	dec	hl
2549  0B83  4E          	ld	c,(hl)
2550  0B84  C5          	push	bc
2551  0B85  CD 00 00    	call	_game_match_back
2552  0B88  F1          	pop	af
2553  0B89  C1          	pop	bc
2554  0B8A  7D          	ld	a,l
2555  0B8B  02          	ld	(bc), a
2556  0B8C  3E 00       	ld	a, +((_scr_map) & 0xFF)
2557  0B8E  21 00 00    	ld	hl,_index1
2558  0B91  86          	add	a, (hl)
2559  0B92  DD 77 FE    	ld	(ix-2),a
2560  0B95  3E 00       	ld	a, +((_scr_map) / 256)
2561  0B97  23          	inc	hl
2562  0B98  8E          	adc	a, (hl)
2563  0B99  DD 77 FF    	ld	(ix-1),a
2564  0B9C  E1          	pop	hl
2565  0B9D  7E          	ld	a,(hl)
2566  0B9E  E5          	push	hl
2567  0B9F  FE 5C       	cp	a,0x5c
2568  0BA1  28 04       	jr	Z,l_player_hit_platform_00130
2569  0BA3  D6 5D       	sub	a,0x5d
2570  0BA5  20 06       	jr	NZ,l_player_hit_platform_00131
2571  0BA7              l_player_hit_platform_00130:
2572  0BA7  E1          	pop	hl
2573  0BA8  E5          	push	hl
2574  0BA9  36 4F       	ld	(hl),0x4f
2575  0BAB  18 04       	jr	l_player_hit_platform_00132
2576  0BAD              l_player_hit_platform_00131:
2577  0BAD  E1          	pop	hl
2578  0BAE  E5          	push	hl
2579  0BAF  36 54       	ld	(hl),0x54
2580  0BB1              l_player_hit_platform_00132:
2581  0BB1  2A 00 00    	ld	hl,(_index1)
2582  0BB4  01 F0 FF    	ld	bc,0xfff0
2583  0BB7  09          	add	hl,bc
2584  0BB8  CD 00 00    	call	_game_obj_set
2585  0BBB  3A 00 00    	ld	a,(_s_lin1)
2586  0BBE  C6 10       	add	a,0x10
2587  0BC0  4F          	ld	c, a
2588  0BC1  3A 00 00    	ld	a, (_s_col1)
2589  0BC4  47          	ld	b,a
2590  0BC5  C5          	push	bc
2591  0BC6  3E 4F       	ld	a,0x4f
2592  0BC8  F5          	push	af
2593  0BC9  33          	inc	sp
2594  0BCA  CD 00 00    	call	_NIRVANAP_drawT_callee
2595  0BCD              l_player_hit_platform_00137:
2596  0BCD  21 00 00    	ld	hl,_tmp0
2597  0BD0  34          	inc	(hl)
2598  0BD1  C3 32 0A    	jp	l_player_hit_platform_00138
2599  0BD4              l_player_hit_platform_00142:
2600  0BD4  21 00 00    	ld	hl,_ay_effect_02
2601  0BD7  CD 00 00    	call	_ay_fx_play
2602  0BDA  2E 01       	ld	l,0x01
2603  0BDC  CD 00 00    	call	_spr_brick_anim
2604  0BDF  2E 01       	ld	l,0x01
2605  0BE1  18 02       	jr	l_player_hit_platform_00148
2606  0BE3              l_player_hit_platform_00145:
2607  0BE3  2E 00       	ld	l,0x00
2608  0BE5              l_player_hit_platform_00148:
2609  0BE5  F1          	pop	af
2610  0BE6  DD E1       	pop	ix
2611  0BE8  C9          	ret
2612  0BE9              	SECTION code_compiler
2613  0BE9              ;	---------------------------------
2614  0BE9              ; Function player_hit_platform_clear
2615  0BE9              ; ---------------------------------
2616  0BE9              _player_hit_platform_clear:
2617  0BE9  01 04 00    	ld	bc,0x0004
2618  0BEC  C5          	push	bc
2619  0BED  2A 0E 00    	ld	hl,(_spr_timer + 0x000e)
2620  0BF0  E5          	push	hl
2621  0BF1  CD 00 00    	call	_game_check_time
2622  0BF4  F1          	pop	af
2623  0BF5  F1          	pop	af
2624  0BF6  7D          	ld	a, l
2625  0BF7  B7          	or	a, a
2626  0BF8  C8          	ret	Z
2627  0BF9  2A FF FF    	ld	hl,(_player_hit_col - 1)
2628  0BFC  3A 00 00    	ld	a,(_player_hit_lin)
2629  0BFF  6F          	ld	l,a
2630  0C00  E5          	push	hl
2631  0C01  CD 00 00    	call	_spr_calc_index
2632  0C04  F1          	pop	af
2633  0C05  22 00 00    	ld	(_index1),hl
2634  0C08  2E 00       	ld	l,0x00
2635  0C0A  CD 00 00    	call	_spr_brick_anim
2636  0C0D  21 00 00    	ld	hl,_player_hit_lin
2637  0C10  36 00       	ld	(hl),0x00
2638  0C12  21 00 00    	ld	hl,_player_hit_col
2639  0C15  36 00       	ld	(hl),0x00
2640  0C17  C9          	ret
2641  0C18              	SECTION code_compiler
2642  0C18              ;	---------------------------------
2643  0C18              ; Function player_score_add
2644  0C18              ; ---------------------------------
2645  0C18              _player_score_add:
2646  0C18  ED 4B 00 00 	ld	bc,(_player_score)
2647  0C1C  09          	add	hl,bc
2648  0C1D  22 00 00    	ld	(_player_score),hl
2649  0C20  21 00 00    	ld	hl,_player_lvl
2650  0C23  7E          	ld	a, (hl)
2651  0C24  D6 14       	sub	a,0x14
2652  0C26  30 42       	jr	NC,l_player_score_add_00104
2653  0C28  01 00 00    	ld	bc,_player_lvl_table+0
2654  0C2B  6E          	ld	l,(hl)
2655  0C2C  26 00       	ld	h,0x00
2656  0C2E  29          	add	hl, hl
2657  0C2F  09          	add	hl, bc
2658  0C30  4E          	ld	c, (hl)
2659  0C31  23          	inc	hl
2660  0C32  46          	ld	b, (hl)
2661  0C33  21 00 00    	ld	hl,_player_score
2662  0C36  7E          	ld	a, (hl)
2663  0C37  91          	sub	a, c
2664  0C38  23          	inc	hl
2665  0C39  7E          	ld	a, (hl)
2666  0C3A  98          	sbc	a, b
2667  0C3B  38 2D       	jr	C,l_player_score_add_00104
2668  0C3D  21 00 00    	ld	hl,_player_lvl
2669  0C40  34          	inc	(hl)
2670  0C41  CD 00 00    	call	_game_update_stats
2671  0C44  CD 00 00    	call	_spr_flatten
2672  0C47  21 06 00    	ld	hl,___str_1
2673  0C4A  E5          	push	hl
2674  0C4B  21 0C 0C    	ld	hl,0x0c0c
2675  0C4E  E5          	push	hl
2676  0C4F  CD 00 00    	call	_zx_print_str
2677  0C52  AF          	xor	a, a
2678  0C53  F5          	push	af
2679  0C54  33          	inc	sp
2680  0C55  21 3C 00    	ld	hl,0x003c
2681  0C58  E5          	push	hl
2682  0C59  21 0C 15    	ld	hl,0x150c
2683  0C5C  E5          	push	hl
2684  0C5D  3E 0C       	ld	a,0x0c
2685  0C5F  F5          	push	af
2686  0C60  33          	inc	sp
2687  0C61  CD 00 00    	call	_game_colour_message
2688  0C64  F1          	pop	af
2689  0C65  F1          	pop	af
2690  0C66  F1          	pop	af
2691  0C67  CD 00 00    	call	_spr_unflatten
2692  0C6A              l_player_score_add_00104:
2693  0C6A  3A 00 00    	ld	a,(_game_score_top)
2694  0C6D  21 00 00    	ld	hl,_player_score
2695  0C70  96          	sub	a, (hl)
2696  0C71  3A 01 00    	ld	a,(_game_score_top + 1)
2697  0C74  23          	inc	hl
2698  0C75  9E          	sbc	a, (hl)
2699  0C76  30 06       	jr	NC,l_player_score_add_00106
2700  0C78  2A 00 00    	ld	hl,(_player_score)
2701  0C7B  22 00 00    	ld	(_game_score_top),hl
2702  0C7E              l_player_score_add_00106:
2703  0C7E  CD 00 00    	call	_game_print_score
2704  0C81  C9          	ret
2705  0C82              	SECTION rodata_compiler
2706  0006              ___str_1:
2707  0006  4C 45 56 45 4C 20 55 50 21 
                        	DEFM "LEVEL UP!"
2708  000F  00          	DEFB 0x00
2709  0010              	SECTION code_compiler
2710  0C82              ;	---------------------------------
2711  0C82              ; Function player_check_floor
2712  0C82              ; ---------------------------------
2713  0C82              _player_check_floor:
2714  0C82  CD 00 00    	call	___sdcc_enter_ix
2715  0C85  F5          	push	af
2716  0C86  F5          	push	af
2717  0C87  F5          	push	af
2718  0C88  11 07 00    	ld	de,_col+7
2719  0C8B  1A          	ld	a, (de)
2720  0C8C  47          	ld	b, a
2721  0C8D  3A 07 00    	ld	a,(_lin + 0x0007)
2722  0C90  C6 10       	add	a,0x10
2723  0C92  D5          	push	de
2724  0C93  4F          	ld	c,a
2725  0C94  C5          	push	bc
2726  0C95  CD 00 00    	call	_spr_calc_index
2727  0C98  F1          	pop	af
2728  0C99  D1          	pop	de
2729  0C9A  DD 75 FC    	ld	(ix-4),l
2730  0C9D  DD 74 FD    	ld	(ix-3),h
2731  0CA0  01 00 00    	ld	bc,_scr_map+0
2732  0CA3  79          	ld	a, c
2733  0CA4  DD 86 FC    	add	a,(ix-4)
2734  0CA7  DD 77 FE    	ld	(ix-2),a
2735  0CAA  78          	ld	a, b
2736  0CAB  DD 8E FD    	adc	a,(ix-3)
2737  0CAE  DD 6E FE    	ld	l,(ix-2)
2738  0CB1  DD 77 FF    	ld	(ix-1),a
2739  0CB4  67          	ld	h,a
2740  0CB5  7E          	ld	a, (hl)
2741  0CB6  DD 77 FB    	ld	(ix-5),a
2742  0CB9  DD 6E FC    	ld	l,(ix-4)
2743  0CBC  DD 66 FD    	ld	h,(ix-3)
2744  0CBF  23          	inc	hl
2745  0CC0  09          	add	hl,bc
2746  0CC1  3A 00 00    	ld	a,(_s_lin0)
2747  0CC4  D6 90       	sub	a,0x90
2748  0CC6  4D          	ld	c,l
2749  0CC7  44          	ld	b,h
2750  0CC8  20 26       	jr	NZ,l_player_check_floor_00108
2751  0CCA  3A 00 00    	ld	a,(_map_heigth)
2752  0CCD  C5          	push	bc
2753  0CCE  F5          	push	af
2754  0CCF  33          	inc	sp
2755  0CD0  3A 00 00    	ld	a,(_scr_curr)
2756  0CD3  F5          	push	af
2757  0CD4  33          	inc	sp
2758  0CD5  CD 00 00    	call	__divuchar_callee
2759  0CD8  C1          	pop	bc
2760  0CD9  7D          	ld	a,l
2761  0CDA  3C          	inc	a
2762  0CDB  32 00 00    	ld	(_tmp1),a
2763  0CDE  21 00 00    	ld	hl,_map_heigth
2764  0CE1  96          	sub	a, (hl)
2765  0CE2  30 06       	jr	NC,l_player_check_floor_00102
2766  0CE4  DD 36 FB 00 	ld	(ix-5),0x00
2767  0CE8  18 14       	jr	l_player_check_floor_00109
2768  0CEA              l_player_check_floor_00102:
2769  0CEA  DD 36 FB 48 	ld	(ix-5),0x48
2770  0CEE  18 0E       	jr	l_player_check_floor_00109
2771  0CF0              l_player_check_floor_00108:
2772  0CF0  1A          	ld	a, (de)
2773  0CF1  0F          	rrca
2774  0CF2  38 06       	jr	C,l_player_check_floor_00105
2775  0CF4  DD 36 FA 00 	ld	(ix-6),0x00
2776  0CF8  18 04       	jr	l_player_check_floor_00109
2777  0CFA              l_player_check_floor_00105:
2778  0CFA  0A          	ld	a, (bc)
2779  0CFB  DD 77 FA    	ld	(ix-6),a
2780  0CFE              l_player_check_floor_00109:
2781  0CFE  DD 7E FB    	ld	a,(ix-5)
2782  0D01  D6 3A       	sub	a,0x3a
2783  0D03  38 07       	jr	C,l_player_check_floor_00132
2784  0D05  DD 7E FB    	ld	a,(ix-5)
2785  0D08  D6 60       	sub	a,0x60
2786  0D0A  38 32       	jr	C,l_player_check_floor_00128
2787  0D0C              l_player_check_floor_00132:
2788  0D0C  DD 7E FA    	ld	a,(ix-6)
2789  0D0F  D6 3A       	sub	a,0x3a
2790  0D11  38 07       	jr	C,l_player_check_floor_00127
2791  0D13  DD 7E FA    	ld	a,(ix-6)
2792  0D16  D6 60       	sub	a,0x60
2793  0D18  38 24       	jr	C,l_player_check_floor_00128
2794  0D1A              l_player_check_floor_00127:
2795  0D1A  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
2796  0D1D  36 02       	ld	(hl),0x02
2797  0D1F  21 00 00    	ld	hl,_s_state
2798  0D22  CB CE       	set	1, (hl)
2799  0D24  2E 00       	ld	l,0x00
2800  0D26  CD 21 06    	call	_player_check_stairs
2801  0D29  3A 00 00    	ld	a,(_player_onstair)
2802  0D2C  B7          	or	a, a
2803  0D2D  C2 D8 0D    	jp	NZ, l_player_check_floor_00133
2804  0D30  3A 00 00    	ld	a,(_s_lin0)
2805  0D33  D6 90       	sub	a,0x90
2806  0D35  C2 D8 0D    	jp	NZ,l_player_check_floor_00133
2807  0D38  CD 00 00    	call	_spr_page_down
2808  0D3B  C3 D8 0D    	jp	l_player_check_floor_00133
2809  0D3E              l_player_check_floor_00128:
2810  0D3E  C5          	push	bc
2811  0D3F  21 10 00    	ld	hl,0x0010
2812  0D42  E5          	push	hl
2813  0D43  2A 00 00    	ld	hl,(_player_brick_time)
2814  0D46  E5          	push	hl
2815  0D47  CD 00 00    	call	_game_check_time
2816  0D4A  F1          	pop	af
2817  0D4B  F1          	pop	af
2818  0D4C  C1          	pop	bc
2819  0D4D  7D          	ld	a,l
2820  0D4E  B7          	or	a, a
2821  0D4F  CA D8 0D    	jp	Z, l_player_check_floor_00133
2822  0D52  2A 00 00    	ld	hl,(_curr_time)
2823  0D55  22 00 00    	ld	(_player_brick_time),hl
2824  0D58  DD 7E FB    	ld	a,(ix-5)
2825  0D5B  D6 40       	sub	a,0x40
2826  0D5D  20 1A       	jr	NZ,l_player_check_floor_00114
2827  0D5F  C5          	push	bc
2828  0D60  DD 6E FC    	ld	l,(ix-4)
2829  0D63  DD 66 FD    	ld	h,(ix-3)
2830  0D66  E5          	push	hl
2831  0D67  CD 00 00    	call	_game_match_back
2832  0D6A  F1          	pop	af
2833  0D6B  C1          	pop	bc
2834  0D6C  5D          	ld	e,l
2835  0D6D  DD 6E FE    	ld	l,(ix-2)
2836  0D70  DD 66 FF    	ld	h,(ix-1)
2837  0D73  73          	ld	(hl), e
2838  0D74  C5          	push	bc
2839  0D75  CD DD 0D    	call	_player_gasta_brick
2840  0D78  C1          	pop	bc
2841  0D79              l_player_check_floor_00114:
2842  0D79  DD 7E FB    	ld	a,(ix-5)
2843  0D7C  D6 3F       	sub	a,0x3f
2844  0D7E  20 0D       	jr	NZ,l_player_check_floor_00116
2845  0D80  DD 6E FE    	ld	l,(ix-2)
2846  0D83  DD 66 FF    	ld	h,(ix-1)
2847  0D86  36 40       	ld	(hl),0x40
2848  0D88  C5          	push	bc
2849  0D89  CD DD 0D    	call	_player_gasta_brick
2850  0D8C  C1          	pop	bc
2851  0D8D              l_player_check_floor_00116:
2852  0D8D  DD 7E FB    	ld	a,(ix-5)
2853  0D90  D6 3E       	sub	a,0x3e
2854  0D92  20 0D       	jr	NZ,l_player_check_floor_00118
2855  0D94  DD 6E FE    	ld	l,(ix-2)
2856  0D97  DD 66 FF    	ld	h,(ix-1)
2857  0D9A  36 3F       	ld	(hl),0x3f
2858  0D9C  C5          	push	bc
2859  0D9D  CD DD 0D    	call	_player_gasta_brick
2860  0DA0  C1          	pop	bc
2861  0DA1              l_player_check_floor_00118:
2862  0DA1  DD 7E FA    	ld	a,(ix-6)
2863  0DA4  D6 40       	sub	a,0x40
2864  0DA6  20 14       	jr	NZ,l_player_check_floor_00120
2865  0DA8  C5          	push	bc
2866  0DA9  DD 6E FC    	ld	l,(ix-4)
2867  0DAC  DD 66 FD    	ld	h,(ix-3)
2868  0DAF  E5          	push	hl
2869  0DB0  CD 00 00    	call	_game_match_back
2870  0DB3  F1          	pop	af
2871  0DB4  C1          	pop	bc
2872  0DB5  7D          	ld	a,l
2873  0DB6  02          	ld	(bc), a
2874  0DB7  C5          	push	bc
2875  0DB8  CD DD 0D    	call	_player_gasta_brick
2876  0DBB  C1          	pop	bc
2877  0DBC              l_player_check_floor_00120:
2878  0DBC  DD 7E FA    	ld	a,(ix-6)
2879  0DBF  D6 3F       	sub	a,0x3f
2880  0DC1  20 08       	jr	NZ,l_player_check_floor_00122
2881  0DC3  3E 40       	ld	a,0x40
2882  0DC5  02          	ld	(bc), a
2883  0DC6  C5          	push	bc
2884  0DC7  CD DD 0D    	call	_player_gasta_brick
2885  0DCA  C1          	pop	bc
2886  0DCB              l_player_check_floor_00122:
2887  0DCB  DD 7E FA    	ld	a,(ix-6)
2888  0DCE  D6 3E       	sub	a,0x3e
2889  0DD0  20 06       	jr	NZ,l_player_check_floor_00133
2890  0DD2  3E 3F       	ld	a,0x3f
2891  0DD4  02          	ld	(bc), a
2892  0DD5  CD DD 0D    	call	_player_gasta_brick
2893  0DD8              l_player_check_floor_00133:
2894  0DD8  DD F9       	ld	sp, ix
2895  0DDA  DD E1       	pop	ix
2896  0DDC  C9          	ret
2897  0DDD              	SECTION code_compiler
2898  0DDD              ;	---------------------------------
2899  0DDD              ; Function player_gasta_brick
2900  0DDD              ; ---------------------------------
2901  0DDD              _player_gasta_brick:
2902  0DDD  3A 00 00    	ld	a,(_s_lin0)
2903  0DE0  32 00 00    	ld	(_s_lin1),a
2904  0DE3  3A 00 00    	ld	a,(_s_col0)
2905  0DE6  32 00 00    	ld	(_s_col1),a
2906  0DE9  3A 07 00    	ld	a,(_lin + 0x0007)
2907  0DEC  C6 10       	add	a,0x10
2908  0DEE  32 00 00    	ld	(_s_lin0),a
2909  0DF1  3A 07 00    	ld	a,(_col + 0x0007)
2910  0DF4  32 00 00    	ld	(_s_col0),a
2911  0DF7  CD 00 00    	call	_spr_back_repaint
2912  0DFA  3A 00 00    	ld	a,(_s_lin1)
2913  0DFD  32 00 00    	ld	(_s_lin0),a
2914  0E00  3A 00 00    	ld	a,(_s_col1)
2915  0E03  32 00 00    	ld	(_s_col0),a
2916  0E06  C9          	ret
2917  0E07              	SECTION code_compiler
2918  0E07              ;	---------------------------------
2919  0E07              ; Function player_move_jump
2920  0E07              ; ---------------------------------
2921  0E07              _player_move_jump:
2922  0E07  21 00 00    	ld	hl,_game_gravity
2923  0E0A  4E          	ld	c, (hl)
2924  0E0B  21 00 00    	ld	hl,_player_vel_y
2925  0E0E  7E          	ld	a, (hl)
2926  0E0F  81          	add	a, c
2927  0E10  77          	ld	(hl), a
2928  0E11  21 00 00    	ld	hl,_sprite_on_air
2929  0E14  36 01       	ld	(hl),0x01
2930  0E16  3A 00 00    	ld	a,(_player_vel_inc)
2931  0E19  B7          	or	a, a
2932  0E1A  28 4A       	jr	Z,l_player_move_jump_00109
2933  0E1C  3A 00 00    	ld	a,(_dirs)
2934  0E1F  CB 07       	rlc	a
2935  0E21  E6 01       	and	a,0x01
2936  0E23  4F          	ld	c, a
2937  0E24  3A 00 00    	ld	a,(_game_2buttons)
2938  0E27  B7          	or	a, a
2939  0E28  28 06       	jr	Z,l_player_move_jump_00102
2940  0E2A  79          	ld	a, c
2941  0E2B  EE 01       	xor	a,0x01
2942  0E2D  4F          	ld	c, a
2943  0E2E  18 15       	jr	l_player_move_jump_00103
2944  0E30              l_player_move_jump_00102:
2945  0E30  CB 41       	bit	0, c
2946  0E32  28 07       	jr	Z,l_player_move_jump_00154
2947  0E34  21 00 00    	ld	hl,_dirs
2948  0E37  CB 46       	bit	0, (hl)
2949  0E39  20 04       	jr	NZ,l_player_move_jump_00155
2950  0E3B              l_player_move_jump_00154:
2951  0E3B  0E 00       	ld	c,0x00
2952  0E3D  18 02       	jr	l_player_move_jump_00156
2953  0E3F              l_player_move_jump_00155:
2954  0E3F  0E 01       	ld	c,0x01
2955  0E41              l_player_move_jump_00156:
2956  0E41  79          	ld	a, c
2957  0E42  EE 01       	xor	a,0x01
2958  0E44  4F          	ld	c, a
2959  0E45              l_player_move_jump_00103:
2960  0E45  79          	ld	a, c
2961  0E46  B7          	or	a, a
2962  0E47  28 1D       	jr	Z,l_player_move_jump_00109
2963  0E49  3A 00 00    	ld	a,(_player_vel_y1)
2964  0E4C  21 00 00    	ld	hl,_player_vel_y
2965  0E4F  96          	sub	a, (hl)
2966  0E50  E2 55 0E    	jp	PO, l_player_move_jump_00259
2967  0E53  EE 80       	xor	a,0x80
2968  0E55              l_player_move_jump_00259:
2969  0E55  F2 66 0E    	jp	P, l_player_move_jump_00109
2970  0E58  21 00 00    	ld	hl,_player_vel_y
2971  0E5B  CB 7E       	bit	7,(hl)
2972  0E5D  28 07       	jr	Z,l_player_move_jump_00109
2973  0E5F  36 00       	ld	(hl),0x00
2974  0E61  21 00 00    	ld	hl,_player_vel_inc
2975  0E64  36 00       	ld	(hl),0x00
2976  0E66              l_player_move_jump_00109:
2977  0E66  3E 78       	ld	a,0x78
2978  0E68  21 00 00    	ld	hl,_player_vel_y
2979  0E6B  96          	sub	a, (hl)
2980  0E6C  E2 71 0E    	jp	PO, l_player_move_jump_00260
2981  0E6F  EE 80       	xor	a,0x80
2982  0E71              l_player_move_jump_00260:
2983  0E71  F2 79 0E    	jp	P, l_player_move_jump_00111
2984  0E74  21 00 00    	ld	hl,_player_vel_y
2985  0E77  36 78       	ld	(hl),0x78
2986  0E79              l_player_move_jump_00111:
2987  0E79  21 00 00    	ld	hl,_player_vel_y
2988  0E7C  7E          	ld	a, (hl)
2989  0E7D  EE 80       	xor	a,0x80
2990  0E7F  D6 08       	sub	a,0x08
2991  0E81  30 02       	jr	NC,l_player_move_jump_00113
2992  0E83  36 88       	ld	(hl),0x88
2993  0E85              l_player_move_jump_00113:
2994  0E85  3A 00 00    	ld	a,(_player_vel_y)
2995  0E88  47          	ld	b,a
2996  0E89  17          	rla
2997  0E8A  9F          	sbc	a, a
2998  0E8B  5F          	ld	e, a
2999  0E8C  CB 40       	bit	0,b
3000  0E8E  21 00 00    	ld	hl,_s_lin1
3001  0E91  70          	ld	(hl),b
3002  0E92  28 04       	jr	Z,l_player_move_jump_00115
3003  0E94  21 00 00    	ld	hl,_s_lin1
3004  0E97  35          	dec	(hl)
3005  0E98              l_player_move_jump_00115:
3006  0E98  3A 07 00    	ld	a,(_lin + 0x0007)
3007  0E9B  21 00 00    	ld	hl,_s_lin1
3008  0E9E  86          	add	a, (hl)
3009  0E9F  77          	ld	(hl), a
3010  0EA0  3E 90       	ld	a,0x90
3011  0EA2  96          	sub	a, (hl)
3012  0EA3  3E 00       	ld	a,0x00
3013  0EA5  17          	rla
3014  0EA6  4F          	ld	c, a
3015  0EA7  CB 7B       	bit	7, e
3016  0EA9  28 5B       	jr	Z,l_player_move_jump_00141
3017  0EAB  21 00 00    	ld	hl,_s_state
3018  0EAE  7E          	ld	a,(hl)
3019  0EAF  F6 01       	or	a,0x01
3020  0EB1  E6 FD       	and	a,0xfd
3021  0EB3  77          	ld	(hl),a
3022  0EB4  79          	ld	a, c
3023  0EB5  B7          	or	a, a
3024  0EB6  28 11       	jr	Z,l_player_move_jump_00120
3025  0EB8  CD 00 00    	call	_spr_page_up
3026  0EBB  7D          	ld	a, l
3027  0EBC  B7          	or	a, a
3028  0EBD  28 05       	jr	Z,l_player_move_jump_00117
3029  0EBF  2E 00       	ld	l,0x00
3030  0EC1  C3 C5 0F    	jp	l_player_move_jump_00152
3031  0EC4              l_player_move_jump_00117:
3032  0EC4  21 00 00    	ld	hl,_s_lin1
3033  0EC7  36 00       	ld	(hl),0x00
3034  0EC9              l_player_move_jump_00120:
3035  0EC9  21 07 00    	ld	hl,+(_col + 0x0007)
3036  0ECC  46          	ld	b, (hl)
3037  0ECD  C5          	push	bc
3038  0ECE  33          	inc	sp
3039  0ECF  3A 00 00    	ld	a,(_s_lin1)
3040  0ED2  F5          	push	af
3041  0ED3  33          	inc	sp
3042  0ED4  CD 00 00    	call	_game_check_map
3043  0ED7  F1          	pop	af
3044  0ED8  7C          	ld	a,h
3045  0ED9  B5          	or	a,l
3046  0EDA  28 21       	jr	Z,l_player_move_jump_00124
3047  0EDC  CD 43 09    	call	_player_hit_platform
3048  0EDF  7D          	ld	a, l
3049  0EE0  B7          	or	a, a
3050  0EE1  28 12       	jr	Z,l_player_move_jump_00122
3051  0EE3  3A 07 00    	ld	a,(_lin + 0x0007)
3052  0EE6  07          	rlca
3053  0EE7  07          	rlca
3054  0EE8  07          	rlca
3055  0EE9  07          	rlca
3056  0EEA  E6 0F       	and	a,0x0f
3057  0EEC  07          	rlca
3058  0EED  07          	rlca
3059  0EEE  07          	rlca
3060  0EEF  07          	rlca
3061  0EF0  E6 F0       	and	a,0xf0
3062  0EF2  32 07 00    	ld	((_lin + 0x0007)),a
3063  0EF5              l_player_move_jump_00122:
3064  0EF5  21 00 00    	ld	hl,_player_vel_y
3065  0EF8  36 00       	ld	(hl),0x00
3066  0EFA  C3 87 0F    	jp	l_player_move_jump_00142
3067  0EFD              l_player_move_jump_00124:
3068  0EFD  3A 00 00    	ld	a,(_s_lin1)
3069  0F00  32 07 00    	ld	((_lin + 0x0007)),a
3070  0F03  C3 87 0F    	jp	l_player_move_jump_00142
3071  0F06              l_player_move_jump_00141:
3072  0F06  21 00 00    	ld	hl,_s_state
3073  0F09  7E          	ld	a,(hl)
3074  0F0A  F6 02       	or	a,0x02
3075  0F0C  E6 FE       	and	a,0xfe
3076  0F0E  77          	ld	(hl),a
3077  0F0F  79          	ld	a, c
3078  0F10  B7          	or	a, a
3079  0F11  28 11       	jr	Z,l_player_move_jump_00130
3080  0F13  CD 00 00    	call	_spr_page_down
3081  0F16  7D          	ld	a, l
3082  0F17  B7          	or	a, a
3083  0F18  28 05       	jr	Z,l_player_move_jump_00127
3084  0F1A  2E 00       	ld	l,0x00
3085  0F1C  C3 C5 0F    	jp	l_player_move_jump_00152
3086  0F1F              l_player_move_jump_00127:
3087  0F1F  21 00 00    	ld	hl,_s_lin1
3088  0F22  36 90       	ld	(hl),0x90
3089  0F24              l_player_move_jump_00130:
3090  0F24  21 07 00    	ld	hl,+(_col + 0x0007)
3091  0F27  4E          	ld	c, (hl)
3092  0F28  3A 00 00    	ld	a,(_s_lin1)
3093  0F2B  C6 10       	add	a,0x10
3094  0F2D  47          	ld	b, a
3095  0F2E  79          	ld	a, c
3096  0F2F  48          	ld	c,b
3097  0F30  47          	ld	b,a
3098  0F31  C5          	push	bc
3099  0F32  CD 00 00    	call	_game_check_map
3100  0F35  F1          	pop	af
3101  0F36  7C          	ld	a,h
3102  0F37  B5          	or	a,l
3103  0F38  28 47       	jr	Z,l_player_move_jump_00138
3104  0F3A  2E 00       	ld	l,0x00
3105  0F3C  CD 21 06    	call	_player_check_stairs
3106  0F3F  3A 00 00    	ld	a,(_player_onstair)
3107  0F42  B7          	or	a, a
3108  0F43  20 05       	jr	NZ,l_player_move_jump_00132
3109  0F45  2E 01       	ld	l,0x01
3110  0F47  CD 21 06    	call	_player_check_stairs
3111  0F4A              l_player_move_jump_00132:
3112  0F4A  3A 00 00    	ld	a,(_player_onstair)
3113  0F4D  B7          	or	a, a
3114  0F4E  20 12       	jr	NZ,l_player_move_jump_00134
3115  0F50  3A 00 00    	ld	a,(_s_lin1)
3116  0F53  07          	rlca
3117  0F54  07          	rlca
3118  0F55  07          	rlca
3119  0F56  07          	rlca
3120  0F57  E6 0F       	and	a,0x0f
3121  0F59  07          	rlca
3122  0F5A  07          	rlca
3123  0F5B  07          	rlca
3124  0F5C  07          	rlca
3125  0F5D  E6 F0       	and	a,0xf0
3126  0F5F  32 07 00    	ld	((_lin + 0x0007)),a
3127  0F62              l_player_move_jump_00134:
3128  0F62  21 00 00    	ld	hl,_player_vel_y
3129  0F65  36 00       	ld	(hl),0x00
3130  0F67  21 00 00    	ld	hl,_s_state
3131  0F6A  7E          	ld	a,(hl)
3132  0F6B  E6 FC       	and	a,+(0xfd&0xfe)
3133  0F6D  77          	ld	(hl),a
3134  0F6E  3A 07 00    	ld	a,(_lin + 0x0007)
3135  0F71  D6 90       	sub	a,0x90
3136  0F73  38 03       	jr	C,l_player_move_jump_00136
3137  0F75  CD 00 00    	call	_spr_page_down
3138  0F78              l_player_move_jump_00136:
3139  0F78  21 07 00    	ld	hl, +(_colint + 0x0007)
3140  0F7B  36 00       	ld	(hl),0x00
3141  0F7D  2E 01       	ld	l,0x01
3142  0F7F  18 44       	jr	l_player_move_jump_00152
3143  0F81              l_player_move_jump_00138:
3144  0F81  3A 00 00    	ld	a,(_s_lin1)
3145  0F84  32 07 00    	ld	((_lin + 0x0007)),a
3146  0F87              l_player_move_jump_00142:
3147  0F87  21 00 00    	ld	hl,_s_state
3148  0F8A  CB 5E       	bit	3, (hl)
3149  0F8C  20 27       	jr	NZ,l_player_move_jump_00148
3150  0F8E  21 00 00    	ld	hl,_s_state
3151  0F91  CB 56       	bit	2, (hl)
3152  0F93  20 20       	jr	NZ,l_player_move_jump_00148
3153  0F95  21 00 00    	ld	hl,_dirs
3154  0F98  CB 56       	bit	2, (hl)
3155  0F9A  28 09       	jr	Z,l_player_move_jump_00144
3156  0F9C  21 00 00    	ld	hl,_s_state
3157  0F9F  7E          	ld	a,(hl)
3158  0FA0  F6 08       	or	a,0x08
3159  0FA2  E6 FB       	and	a,0xfb
3160  0FA4  77          	ld	(hl),a
3161  0FA5              l_player_move_jump_00144:
3162  0FA5  21 00 00    	ld	hl,_dirs
3163  0FA8  CB 5E       	bit	3, (hl)
3164  0FAA  28 09       	jr	Z,l_player_move_jump_00148
3165  0FAC  21 00 00    	ld	hl,_s_state
3166  0FAF  7E          	ld	a,(hl)
3167  0FB0  F6 04       	or	a,0x04
3168  0FB2  E6 F7       	and	a,0xf7
3169  0FB4  77          	ld	(hl),a
3170  0FB5              l_player_move_jump_00148:
3171  0FB5  CD 00 00    	call	_spr_move_horizontal
3172  0FB8  7D          	ld	a, l
3173  0FB9  B7          	or	a, a
3174  0FBA  28 07       	jr	Z,l_player_move_jump_00151
3175  0FBC  21 00 00    	ld	hl,_s_state
3176  0FBF  7E          	ld	a,(hl)
3177  0FC0  E6 F3       	and	a,+(0xf7&0xfb)
3178  0FC2  77          	ld	(hl),a
3179  0FC3              l_player_move_jump_00151:
3180  0FC3  2E 00       	ld	l,0x00
3181  0FC5              l_player_move_jump_00152:
3182  0FC5  C9          	ret
3183  0FC6              	SECTION code_compiler
3184  0FC6              ;	---------------------------------
3185  0FC6              ; Function player_open_door
3186  0FC6              ; ---------------------------------
3187  0FC6              _player_open_door:
3188  0FC6  CD 00 00    	call	___sdcc_enter_ix
3189  0FC9  0E 00       	ld	c,0x00
3190  0FCB  21 00 00    	ld	hl,_ay_effect_05
3191  0FCE  CD 00 00    	call	_ay_fx_play
3192  0FD1  DD 7E 06    	ld	a,(ix+6)
3193  0FD4  D6 48       	sub	a,0x48
3194  0FD6  28 17       	jr	Z,l_player_open_door_00101
3195  0FD8  DD 7E 06    	ld	a,(ix+6)
3196  0FDB  D6 49       	sub	a,0x49
3197  0FDD  28 1F       	jr	Z,l_player_open_door_00104
3198  0FDF  DD 7E 06    	ld	a,(ix+6)
3199  0FE2  D6 4A       	sub	a,0x4a
3200  0FE4  28 27       	jr	Z,l_player_open_door_00107
3201  0FE6  DD 7E 06    	ld	a,(ix+6)
3202  0FE9  D6 4B       	sub	a,0x4b
3203  0FEB  28 2F       	jr	Z,l_player_open_door_00110
3204  0FED  18 3A       	jr	l_player_open_door_00113
3205  0FEF              l_player_open_door_00101:
3206  0FEF  3A 00 00    	ld	a,(_player_keys)
3207  0FF2  B7          	or	a, a
3208  0FF3  28 34       	jr	Z,l_player_open_door_00113
3209  0FF5  2E 07       	ld	l,0x07
3210  0FF7  CD 00 00    	call	_zx_border_fastcall
3211  0FFA  0E 01       	ld	c,0x01
3212  0FFC  18 2B       	jr	l_player_open_door_00113
3213  0FFE              l_player_open_door_00104:
3214  0FFE  3A 01 00    	ld	a,(_player_keys + 0x0001)
3215  1001  B7          	or	a, a
3216  1002  28 25       	jr	Z,l_player_open_door_00113
3217  1004  2E 02       	ld	l,0x02
3218  1006  CD 00 00    	call	_zx_border_fastcall
3219  1009  0E 01       	ld	c,0x01
3220  100B  18 1C       	jr	l_player_open_door_00113
3221  100D              l_player_open_door_00107:
3222  100D  3A 02 00    	ld	a,(_player_keys + 0x0002)
3223  1010  B7          	or	a, a
3224  1011  28 16       	jr	Z,l_player_open_door_00113
3225  1013  2E 04       	ld	l,0x04
3226  1015  CD 00 00    	call	_zx_border_fastcall
3227  1018  0E 01       	ld	c,0x01
3228  101A  18 0D       	jr	l_player_open_door_00113
3229  101C              l_player_open_door_00110:
3230  101C  3A 03 00    	ld	a,(_player_keys + 0x0003)
3231  101F  B7          	or	a, a
3232  1020  28 07       	jr	Z,l_player_open_door_00113
3233  1022  2E 05       	ld	l,0x05
3234  1024  CD 00 00    	call	_zx_border_fastcall
3235  1027  0E 01       	ld	c,0x01
3236  1029              l_player_open_door_00113:
3237  1029  79          	ld	a, c
3238  102A  B7          	or	a, a
3239  102B  20 06       	jr	NZ,l_player_open_door_00114
3240  102D  3A 00 00    	ld	a,(_game_inmune)
3241  1030  B7          	or	a, a
3242  1031  28 2F       	jr	Z,l_player_open_door_00117
3243  1033              l_player_open_door_00114:
3244  1033  3E 00       	ld	a, +((_scr_map) & 0xFF)
3245  1035  DD 86 04    	add	a,(ix+4)
3246  1038  4F          	ld	c, a
3247  1039  3E 00       	ld	a, +((_scr_map) / 256)
3248  103B  DD 8E 05    	adc	a,(ix+5)
3249  103E  47          	ld	b, a
3250  103F  C5          	push	bc
3251  1040  DD 6E 04    	ld	l,(ix+4)
3252  1043  DD 66 05    	ld	h,(ix+5)
3253  1046  E5          	push	hl
3254  1047  CD 00 00    	call	_game_match_back
3255  104A  F1          	pop	af
3256  104B  C1          	pop	bc
3257  104C  7D          	ld	a,l
3258  104D  02          	ld	(bc), a
3259  104E  DD 6E 04    	ld	l,(ix+4)
3260  1051  DD 66 05    	ld	h,(ix+5)
3261  1054  CD 00 00    	call	_game_obj_set
3262  1057  DD 6E 04    	ld	l,(ix+4)
3263  105A  DD 66 05    	ld	h,(ix+5)
3264  105D  E5          	push	hl
3265  105E  CD 00 00    	call	_spr_draw_index
3266  1061  F1          	pop	af
3267  1062              l_player_open_door_00117:
3268  1062  DD E1       	pop	ix
3269  1064  C9          	ret
3270  1065              	SECTION code_compiler
3271  1065              ;	---------------------------------
3272  1065              ; Function player_lost_life
3273  1065              ; ---------------------------------
3274  1065              _player_lost_life:
3275  1065  CD 00 00    	call	___sdcc_enter_ix
3276  1068  F5          	push	af
3277  1069  21 00 00    	ld	hl,_ay_effect_18
3278  106C  CD 00 00    	call	_ay_fx_play
3279  106F  21 00 00    	ld	hl,_player_vita
3280  1072  36 00       	ld	(hl),0x00
3281  1074  CD 00 00    	call	_game_update_stats
3282  1077  3A 07 00    	ld	a,(_lin + 7)
3283  107A  32 00 00    	ld	(_s_lin0),a
3284  107D  3A 07 00    	ld	a,(_col + 7)
3285  1080  32 00 00    	ld	(_s_col0),a
3286  1083  CD 00 00    	call	_spr_init_effects
3287  1086  06 00       	ld	b,0x00
3288  1088              l_player_lost_life_00116:
3289  1088  C5          	push	bc
3290  1089  21 00 00    	ld	hl,0x0000
3291  108C  E5          	push	hl
3292  108D  AF          	xor	a, a
3293  108E  48          	ld	c,b
3294  108F  47          	ld	b,a
3295  1090  C5          	push	bc
3296  1091  CD 00 00    	call	_NIRVANAP_spriteT_callee
3297  1094  C1          	pop	bc
3298  1095  04          	inc	b
3299  1096  3E 07       	ld	a,0x07
3300  1098  90          	sub	a, b
3301  1099  30 ED       	jr	NC,l_player_lost_life_00116
3302  109B  76          	halt
3303  109C  3A 00 00    	ld	a,(_s_lin0)
3304  109F  C6 F0       	add	a,0xf0
3305  10A1  47          	ld	b, a
3306  10A2  3A 00 00    	ld	a,(_s_col0)
3307  10A5  21 00 00    	ld	hl,0x0000
3308  10A8  E5          	push	hl
3309  10A9  21 87 03    	ld	hl,0x0387
3310  10AC  E5          	push	hl
3311  10AD  48          	ld	c,b
3312  10AE  47          	ld	b,a
3313  10AF  C5          	push	bc
3314  10B0  CD 00 00    	call	_spr_add_anim
3315  10B3  F1          	pop	af
3316  10B4  F1          	pop	af
3317  10B5  F1          	pop	af
3318  10B6  21 00 00    	ld	hl,_s_col0
3319  10B9  46          	ld	b, (hl)
3320  10BA  05          	dec	b
3321  10BB  05          	dec	b
3322  10BC  21 00 00    	ld	hl,0x0000
3323  10BF  E5          	push	hl
3324  10C0  21 87 03    	ld	hl,0x0387
3325  10C3  E5          	push	hl
3326  10C4  C5          	push	bc
3327  10C5  33          	inc	sp
3328  10C6  3A 00 00    	ld	a,(_s_lin0)
3329  10C9  F5          	push	af
3330  10CA  33          	inc	sp
3331  10CB  CD 00 00    	call	_spr_add_anim
3332  10CE  F1          	pop	af
3333  10CF  F1          	pop	af
3334  10D0  21 00 00    	ld	hl,0x0000
3335  10D3  E3          	ex	(sp),hl
3336  10D4  3A 00 00    	ld	a,(_s_col0)
3337  10D7  21 87 03    	ld	hl,0x0387
3338  10DA  E5          	push	hl
3339  10DB  F5          	push	af
3340  10DC  33          	inc	sp
3341  10DD  3A 00 00    	ld	a,(_s_lin0)
3342  10E0  F5          	push	af
3343  10E1  33          	inc	sp
3344  10E2  CD 00 00    	call	_spr_add_anim
3345  10E5  F1          	pop	af
3346  10E6  F1          	pop	af
3347  10E7  F1          	pop	af
3348  10E8  21 00 00    	ld	hl,_s_col0
3349  10EB  46          	ld	b, (hl)
3350  10EC  04          	inc	b
3351  10ED  04          	inc	b
3352  10EE  21 00 00    	ld	hl,0x0000
3353  10F1  E5          	push	hl
3354  10F2  21 87 03    	ld	hl,0x0387
3355  10F5  E5          	push	hl
3356  10F6  C5          	push	bc
3357  10F7  33          	inc	sp
3358  10F8  3A 00 00    	ld	a,(_s_lin0)
3359  10FB  F5          	push	af
3360  10FC  33          	inc	sp
3361  10FD  CD 00 00    	call	_spr_add_anim
3362  1100  F1          	pop	af
3363  1101  F1          	pop	af
3364  1102  F1          	pop	af
3365  1103  3A 00 00    	ld	a,(_s_lin0)
3366  1106  C6 10       	add	a,0x10
3367  1108  47          	ld	b, a
3368  1109  3A 00 00    	ld	a,(_s_col0)
3369  110C  21 00 00    	ld	hl,0x0000
3370  110F  E5          	push	hl
3371  1110  21 87 03    	ld	hl,0x0387
3372  1113  E5          	push	hl
3373  1114  48          	ld	c,b
3374  1115  47          	ld	b,a
3375  1116  C5          	push	bc
3376  1117  CD 00 00    	call	_spr_add_anim
3377  111A  F1          	pop	af
3378  111B  F1          	pop	af
3379  111C  F1          	pop	af
3380  111D  2E 00       	ld	l,0x00
3381  111F  CD 00 00    	call	_zx_border_fastcall
3382  1122  DD 36 FE 01 	ld	(ix-2),0x01
3383  1126  2A 00 00    	ld	hl,(_curr_time)
3384  1129  22 00 00    	ld	(_anim_time),hl
3385  112C              l_player_lost_life_00107:
3386  112C  DD 7E FE    	ld	a,(ix-2)
3387  112F  B7          	or	a, a
3388  1130  28 28       	jr	Z,l_player_lost_life_00129
3389  1132  21 0C 00    	ld	hl,0x000c
3390  1135  E5          	push	hl
3391  1136  2A 00 00    	ld	hl,(_anim_time)
3392  1139  E5          	push	hl
3393  113A  CD 00 00    	call	_game_check_time
3394  113D  F1          	pop	af
3395  113E  F1          	pop	af
3396  113F  7D          	ld	a, l
3397  1140  B7          	or	a, a
3398  1141  28 E9       	jr	Z,l_player_lost_life_00107
3399  1143  2A 00 00    	ld	hl,(_curr_time)
3400  1146  22 00 00    	ld	(_anim_time),hl
3401  1149  3A 00 00    	ld	a,(_anim_count)
3402  114C  B7          	or	a,a
3403  114D  28 05       	jr	Z,l_player_lost_life_00103
3404  114F  CD 00 00    	call	_spr_play_anim
3405  1152  18 D8       	jr	l_player_lost_life_00107
3406  1154              l_player_lost_life_00103:
3407  1154  DD 36 FE 00 	ld	(ix-2),0x00
3408  1158  18 D2       	jr	l_player_lost_life_00107
3409  115A              l_player_lost_life_00129:
3410  115A  1E 00       	ld	e,0x00
3411  115C              l_player_lost_life_00118:
3412  115C  16 00       	ld	d,0x00
3413  115E  21 00 00    	ld	hl,_class
3414  1161  19          	add	hl, de
3415  1162  7E          	ld	a, (hl)
3416  1163  B7          	or	a, a
3417  1164  28 30       	jr	Z,l_player_lost_life_00119
3418  1166  16 00       	ld	d,0x00
3419  1168  21 00 00    	ld	hl,_col
3420  116B  19          	add	hl, de
3421  116C  7E          	ld	a, (hl)
3422  116D  DD 77 FF    	ld	(ix-1),a
3423  1170  16 00       	ld	d,0x00
3424  1172  21 00 00    	ld	hl,_lin
3425  1175  19          	add	hl, de
3426  1176  46          	ld	b, (hl)
3427  1177  16 00       	ld	d,0x00
3428  1179  21 00 00    	ld	hl,_tile
3429  117C  19          	add	hl, de
3430  117D  4E          	ld	c, (hl)
3431  117E  16 00       	ld	d,0x00
3432  1180  21 00 00    	ld	hl,_colint
3433  1183  19          	add	hl, de
3434  1184  6E          	ld	l, (hl)
3435  1185  79          	ld	a, c
3436  1186  85          	add	a, l
3437  1187  4F          	ld	c, a
3438  1188  D5          	push	de
3439  1189  DD 7E FF    	ld	a,(ix-1)
3440  118C  F5          	push	af
3441  118D  33          	inc	sp
3442  118E  C5          	push	bc
3443  118F  33          	inc	sp
3444  1190  51          	ld	d,c
3445  1191  D5          	push	de
3446  1192  CD 00 00    	call	_NIRVANAP_spriteT_callee
3447  1195  D1          	pop	de
3448  1196              l_player_lost_life_00119:
3449  1196  1C          	inc	e
3450  1197  7B          	ld	a, e
3451  1198  D6 07       	sub	a,0x07
3452  119A  38 C0       	jr	C,l_player_lost_life_00118
3453  119C  21 00 00    	ld	hl,_player_lives
3454  119F  35          	dec	(hl)
3455  11A0  21 00 00    	ld	hl,_player_mana
3456  11A3  36 64       	ld	(hl),0x64
3457  11A5  21 00 00    	ld	hl,_player_vita
3458  11A8  36 64       	ld	(hl),0x64
3459  11AA  3A 00 00    	ld	a,(_player_lives)
3460  11AD  B7          	or	a, a
3461  11AE  28 0B       	jr	Z,l_player_lost_life_00114
3462  11B0  21 F4 01    	ld	hl,0x01f4
3463  11B3  CD 00 00    	call	_z80_delay_ms_fastcall
3464  11B6  CD 00 00    	call	_game_round_init
3465  11B9  18 0A       	jr	l_player_lost_life_00120
3466  11BB              l_player_lost_life_00114:
3467  11BB  21 00 00    	ld	hl,_player_lives
3468  11BE  36 00       	ld	(hl),0x00
3469  11C0  21 00 00    	ld	hl,_game_over
3470  11C3  36 01       	ld	(hl),0x01
3471  11C5              l_player_lost_life_00120:
3472  11C5  F1          	pop	af
3473  11C6  DD E1       	pop	ix
3474  11C8  C9          	ret
3475  11C9              	SECTION code_compiler
3476  11C9              ;	---------------------------------
3477  11C9              ; Function player_hit
3478  11C9              ; ---------------------------------
3479  11C9              _player_hit:
3480  11C9  7D          	ld	a,l
3481  11CA  4D          	ld	c,l
3482  11CB  21 00 00    	ld	hl,_player_vita
3483  11CE  96          	sub	a, (hl)
3484  11CF  30 17       	jr	NC,l_player_hit_00104
3485  11D1  3A 00 00    	ld	a,(_game_inmune)
3486  11D4  B7          	or	a, a
3487  11D5  20 06       	jr	NZ,l_player_hit_00102
3488  11D7  21 00 00    	ld	hl,_player_vita
3489  11DA  7E          	ld	a, (hl)
3490  11DB  91          	sub	a, c
3491  11DC  77          	ld	(hl), a
3492  11DD              l_player_hit_00102:
3493  11DD  2A 00 00    	ld	hl,(_curr_time)
3494  11E0  22 00 00    	ld	(_player_hit_time),hl
3495  11E3  CD 00 00    	call	_game_update_stats
3496  11E6  18 03       	jr	l_player_hit_00106
3497  11E8              l_player_hit_00104:
3498  11E8  CD 65 10    	call	_player_lost_life
3499  11EB              l_player_hit_00106:
3500  11EB  C9          	ret
3501  11EC              	SECTION IGNORE
3502  0000              
