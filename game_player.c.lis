1     0000              MODULE game_player_c
2     0000              
3     0000              ;--------------------------------------------------------
4     0000              ; File Created by SDCC : free open source ANSI-C Compiler
5     0000              ; Version 3.6.5 #9958 (Mac OS X i386)
6     0000              ;--------------------------------------------------------
7     0000              ; Processed by Z88DK
8     0000              ;--------------------------------------------------------
9     0000              
10    0000              	EXTERN __divschar
11    0000              	EXTERN __divschar_callee
12    0000              	EXTERN __divsint
13    0000              	EXTERN __divsint_callee
14    0000              	EXTERN __divslong
15    0000              	EXTERN __divslong_callee
16    0000              	EXTERN __divslonglong
17    0000              	EXTERN __divslonglong_callee
18    0000              	EXTERN __divsuchar
19    0000              	EXTERN __divsuchar_callee
20    0000              	EXTERN __divuchar
21    0000              	EXTERN __divuchar_callee
22    0000              	EXTERN __divuint
23    0000              	EXTERN __divuint_callee
24    0000              	EXTERN __divulong
25    0000              	EXTERN __divulong_callee
26    0000              	EXTERN __divulonglong
27    0000              	EXTERN __divulonglong_callee
28    0000              	EXTERN __divuschar
29    0000              	EXTERN __divuschar_callee
30    0000              	EXTERN __modschar
31    0000              	EXTERN __modschar_callee
32    0000              	EXTERN __modsint
33    0000              	EXTERN __modsint_callee
34    0000              	EXTERN __modslong
35    0000              	EXTERN __modslong_callee
36    0000              	EXTERN __modslonglong
37    0000              	EXTERN __modslonglong_callee
38    0000              	EXTERN __modsuchar
39    0000              	EXTERN __modsuchar_callee
40    0000              	EXTERN __moduchar
41    0000              	EXTERN __moduchar_callee
42    0000              	EXTERN __moduint
43    0000              	EXTERN __moduint_callee
44    0000              	EXTERN __modulong
45    0000              	EXTERN __modulong_callee
46    0000              	EXTERN __modulonglong
47    0000              	EXTERN __modulonglong_callee
48    0000              	EXTERN __moduschar
49    0000              	EXTERN __moduschar_callee
50    0000              	EXTERN __mulint
51    0000              	EXTERN __mulint_callee
52    0000              	EXTERN __mullong
53    0000              	EXTERN __mullong_callee
54    0000              	EXTERN __mullonglong
55    0000              	EXTERN __mullonglong_callee
56    0000              	EXTERN __mulschar
57    0000              	EXTERN __mulschar_callee
58    0000              	EXTERN __mulsuchar
59    0000              	EXTERN __mulsuchar_callee
60    0000              	EXTERN __muluschar
61    0000              	EXTERN __muluschar_callee
62    0000              	EXTERN __rlslonglong
63    0000              	EXTERN __rlslonglong_callee
64    0000              	EXTERN __rlulonglong
65    0000              	EXTERN __rlulonglong_callee
66    0000              	EXTERN __rrslonglong
67    0000              	EXTERN __rrslonglong_callee
68    0000              	EXTERN __rrulonglong
69    0000              	EXTERN __rrulonglong_callee
70    0000              	EXTERN ___sdcc_call_hl
71    0000              	EXTERN ___sdcc_call_iy
72    0000              	EXTERN ___sdcc_enter_ix
73    0000              	EXTERN _banked_call
74    0000              	EXTERN _banked_ret
75    0000              	EXTERN ___fs2schar
76    0000              	EXTERN ___fs2schar_callee
77    0000              	EXTERN ___fs2sint
78    0000              	EXTERN ___fs2sint_callee
79    0000              	EXTERN ___fs2slong
80    0000              	EXTERN ___fs2slong_callee
81    0000              	EXTERN ___fs2slonglong
82    0000              	EXTERN ___fs2slonglong_callee
83    0000              	EXTERN ___fs2uchar
84    0000              	EXTERN ___fs2uchar_callee
85    0000              	EXTERN ___fs2uint
86    0000              	EXTERN ___fs2uint_callee
87    0000              	EXTERN ___fs2ulong
88    0000              	EXTERN ___fs2ulong_callee
89    0000              	EXTERN ___fs2ulonglong
90    0000              	EXTERN ___fs2ulonglong_callee
91    0000              	EXTERN ___fsadd
92    0000              	EXTERN ___fsadd_callee
93    0000              	EXTERN ___fsdiv
94    0000              	EXTERN ___fsdiv_callee
95    0000              	EXTERN ___fseq
96    0000              	EXTERN ___fseq_callee
97    0000              	EXTERN ___fsgt
98    0000              	EXTERN ___fsgt_callee
99    0000              	EXTERN ___fslt
100   0000              	EXTERN ___fslt_callee
101   0000              	EXTERN ___fsmul
102   0000              	EXTERN ___fsmul_callee
103   0000              	EXTERN ___fsneq
104   0000              	EXTERN ___fsneq_callee
105   0000              	EXTERN ___fssub
106   0000              	EXTERN ___fssub_callee
107   0000              	EXTERN ___schar2fs
108   0000              	EXTERN ___schar2fs_callee
109   0000              	EXTERN ___sint2fs
110   0000              	EXTERN ___sint2fs_callee
111   0000              	EXTERN ___slong2fs
112   0000              	EXTERN ___slong2fs_callee
113   0000              	EXTERN ___slonglong2fs
114   0000              	EXTERN ___slonglong2fs_callee
115   0000              	EXTERN ___uchar2fs
116   0000              	EXTERN ___uchar2fs_callee
117   0000              	EXTERN ___uint2fs
118   0000              	EXTERN ___uint2fs_callee
119   0000              	EXTERN ___ulong2fs
120   0000              	EXTERN ___ulong2fs_callee
121   0000              	EXTERN ___ulonglong2fs
122   0000              	EXTERN ___ulonglong2fs_callee
123   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
126   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
127   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
128   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
129   0000              	EXTERN ____sdcc_4_ldi_save_bc
130   0000              	EXTERN ____sdcc_4_push_hlix
131   0000              	EXTERN ____sdcc_4_push_mhl
132   0000              	EXTERN ____sdcc_lib_setmem_hl
133   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
134   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
135   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
136   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
137   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
138   0000              	EXTERN ____sdcc_ll_add_deix_hlix
139   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
140   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
141   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
142   0000              	EXTERN ____sdcc_ll_asr_hlix_a
143   0000              	EXTERN ____sdcc_ll_asr_mbc_a
144   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
145   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
146   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
147   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
148   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
149   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
150   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
151   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
152   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
153   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
155   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
156   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
157   0000              	EXTERN ____sdcc_ll_push_hlix
158   0000              	EXTERN ____sdcc_ll_push_mhl
159   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
160   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
161   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
162   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
163   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
164   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
165   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
166   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
167   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
168   0000              	EXTERN ____sdcc_load_debc_deix
169   0000              	EXTERN ____sdcc_load_dehl_deix
170   0000              	EXTERN ____sdcc_load_debc_mhl
171   0000              	EXTERN ____sdcc_load_hlde_mhl
172   0000              	EXTERN ____sdcc_store_dehl_bcix
173   0000              	EXTERN ____sdcc_store_debc_hlix
174   0000              	EXTERN ____sdcc_store_debc_mhl
175   0000              	EXTERN ____sdcc_cpu_pop_ei
176   0000              	EXTERN ____sdcc_cpu_pop_ei_jp
177   0000              	EXTERN ____sdcc_cpu_push_di
178   0000              	EXTERN ____sdcc_outi
179   0000              	EXTERN ____sdcc_outi_128
180   0000              	EXTERN ____sdcc_outi_256
181   0000              	EXTERN ____sdcc_ldi
182   0000              	EXTERN ____sdcc_ldi_128
183   0000              	EXTERN ____sdcc_ldi_256
184   0000              
185   0000              ;--------------------------------------------------------
186   0000              ; Public variables in this module
187   0000              ;--------------------------------------------------------
188   0000              	GLOBAL _player_check_map
189   0000              	GLOBAL _player_init
190   0000              	GLOBAL _player_check_input
191   0000              	GLOBAL _player_collision
192   0000              	GLOBAL _player_kill
193   0000              	GLOBAL _player_restart
194   0000              	GLOBAL _player_turn
195   0000              	GLOBAL _player_move
196   0000              	GLOBAL _player_check_stairs_down
197   0000              	GLOBAL _player_check_stairs
198   0000              	GLOBAL _player_tile
199   0000              	GLOBAL _player_move_input
200   0000              	GLOBAL _player_fire
201   0000              	GLOBAL _player_pick_item
202   0000              	GLOBAL _player_hit_platform
203   0000              	GLOBAL _player_hit_platform_clear
204   0000              	GLOBAL _player_score_add
205   0000              	GLOBAL _player_check_floor
206   0000              	GLOBAL _player_move_jump
207   0000              	GLOBAL _player_open_door
208   0000              	GLOBAL _player_lost_life
209   0000              	GLOBAL _player_hit
210   0000              ;--------------------------------------------------------
211   0000              ; Externals used
212   0000              ;--------------------------------------------------------
213   0000              	GLOBAL _ulltoa_callee
214   0000              	GLOBAL _ulltoa
215   0000              	GLOBAL _strtoull_callee
216   0000              	GLOBAL _strtoull
217   0000              	GLOBAL _strtoll_callee
218   0000              	GLOBAL _strtoll
219   0000              	GLOBAL _lltoa_callee
220   0000              	GLOBAL _lltoa
221   0000              	GLOBAL _llabs_callee
222   0000              	GLOBAL _llabs
223   0000              	GLOBAL __lldivu__callee
224   0000              	GLOBAL __lldivu_
225   0000              	GLOBAL __lldiv__callee
226   0000              	GLOBAL __lldiv_
227   0000              	GLOBAL _atoll_callee
228   0000              	GLOBAL _atoll
229   0000              	GLOBAL _realloc_unlocked_callee
230   0000              	GLOBAL _realloc_unlocked
231   0000              	GLOBAL _malloc_unlocked_fastcall
232   0000              	GLOBAL _malloc_unlocked
233   0000              	GLOBAL _free_unlocked_fastcall
234   0000              	GLOBAL _free_unlocked
235   0000              	GLOBAL _calloc_unlocked_callee
236   0000              	GLOBAL _calloc_unlocked
237   0000              	GLOBAL _aligned_alloc_unlocked_callee
238   0000              	GLOBAL _aligned_alloc_unlocked
239   0000              	GLOBAL _realloc_callee
240   0000              	GLOBAL _realloc
241   0000              	GLOBAL _malloc_fastcall
242   0000              	GLOBAL _malloc
243   0000              	GLOBAL _free_fastcall
244   0000              	GLOBAL _free
245   0000              	GLOBAL _calloc_callee
246   0000              	GLOBAL _calloc
247   0000              	GLOBAL _aligned_alloc_callee
248   0000              	GLOBAL _aligned_alloc
249   0000              	GLOBAL _utoa_callee
250   0000              	GLOBAL _utoa
251   0000              	GLOBAL _ultoa_callee
252   0000              	GLOBAL _ultoa
253   0000              	GLOBAL _system_fastcall
254   0000              	GLOBAL _system
255   0000              	GLOBAL _strtoul_callee
256   0000              	GLOBAL _strtoul
257   0000              	GLOBAL _strtol_callee
258   0000              	GLOBAL _strtol
259   0000              	GLOBAL _strtof_callee
260   0000              	GLOBAL _strtof
261   0000              	GLOBAL _strtod_callee
262   0000              	GLOBAL _strtod
263   0000              	GLOBAL _srand_fastcall
264   0000              	GLOBAL _srand
265   0000              	GLOBAL _rand
266   0000              	GLOBAL _quick_exit_fastcall
267   0000              	GLOBAL _quick_exit
268   0000              	GLOBAL _qsort_callee
269   0000              	GLOBAL _qsort
270   0000              	GLOBAL _ltoa_callee
271   0000              	GLOBAL _ltoa
272   0000              	GLOBAL _labs_fastcall
273   0000              	GLOBAL _labs
274   0000              	GLOBAL _itoa_callee
275   0000              	GLOBAL _itoa
276   0000              	GLOBAL _ftoh_callee
277   0000              	GLOBAL _ftoh
278   0000              	GLOBAL _ftog_callee
279   0000              	GLOBAL _ftog
280   0000              	GLOBAL _ftoe_callee
281   0000              	GLOBAL _ftoe
282   0000              	GLOBAL _ftoa_callee
283   0000              	GLOBAL _ftoa
284   0000              	GLOBAL _exit_fastcall
285   0000              	GLOBAL _exit
286   0000              	GLOBAL _dtoh_callee
287   0000              	GLOBAL _dtoh
288   0000              	GLOBAL _dtog_callee
289   0000              	GLOBAL _dtog
290   0000              	GLOBAL _dtoe_callee
291   0000              	GLOBAL _dtoe
292   0000              	GLOBAL _dtoa_callee
293   0000              	GLOBAL _dtoa
294   0000              	GLOBAL _bsearch_callee
295   0000              	GLOBAL _bsearch
296   0000              	GLOBAL _atol_fastcall
297   0000              	GLOBAL _atol
298   0000              	GLOBAL _atoi_fastcall
299   0000              	GLOBAL _atoi
300   0000              	GLOBAL _atof_fastcall
301   0000              	GLOBAL _atof
302   0000              	GLOBAL _atexit_fastcall
303   0000              	GLOBAL _atexit
304   0000              	GLOBAL _at_quick_exit_fastcall
305   0000              	GLOBAL _at_quick_exit
306   0000              	GLOBAL _abs_fastcall
307   0000              	GLOBAL _abs
308   0000              	GLOBAL _abort
309   0000              	GLOBAL __strtou__callee
310   0000              	GLOBAL __strtou_
311   0000              	GLOBAL __strtoi__callee
312   0000              	GLOBAL __strtoi_
313   0000              	GLOBAL __random_uniform_xor_8__fastcall
314   0000              	GLOBAL __random_uniform_xor_8_
315   0000              	GLOBAL __random_uniform_xor_32__fastcall
316   0000              	GLOBAL __random_uniform_xor_32_
317   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
318   0000              	GLOBAL __random_uniform_cmwc_8_
319   0000              	GLOBAL __shellsort__callee
320   0000              	GLOBAL __shellsort_
321   0000              	GLOBAL __quicksort__callee
322   0000              	GLOBAL __quicksort_
323   0000              	GLOBAL __insertion_sort__callee
324   0000              	GLOBAL __insertion_sort_
325   0000              	GLOBAL __ldivu__callee
326   0000              	GLOBAL __ldivu_
327   0000              	GLOBAL __ldiv__callee
328   0000              	GLOBAL __ldiv_
329   0000              	GLOBAL __divu__callee
330   0000              	GLOBAL __divu_
331   0000              	GLOBAL __div__callee
332   0000              	GLOBAL __div_
333   0000              	GLOBAL _NIRVANAP_drawTW_raw_callee
334   0000              	GLOBAL _NIRVANAP_drawTW_raw
335   0000              	GLOBAL _NIRVANAP_drawTW_callee
336   0000              	GLOBAL _NIRVANAP_drawTW
337   0000              	GLOBAL _NIRVANAP_drawW_raw_callee
338   0000              	GLOBAL _NIRVANAP_drawW_raw
339   0000              	GLOBAL _NIRVANAP_drawW_callee
340   0000              	GLOBAL _NIRVANAP_drawW
341   0000              	GLOBAL _NIRVANAP_spriteT_callee
342   0000              	GLOBAL _NIRVANAP_spriteT
343   0000              	GLOBAL _NIRVANAP_fillC_callee
344   0000              	GLOBAL _NIRVANAP_fillC
345   0000              	GLOBAL _NIRVANAP_readC_callee
346   0000              	GLOBAL _NIRVANAP_readC
347   0000              	GLOBAL _NIRVANAP_paintC_callee
348   0000              	GLOBAL _NIRVANAP_paintC
349   0000              	GLOBAL _NIRVANAP_printC_callee
350   0000              	GLOBAL _NIRVANAP_printC
351   0000              	GLOBAL _NIRVANAP_fillT_raw_callee
352   0000              	GLOBAL _NIRVANAP_fillT_raw
353   0000              	GLOBAL _NIRVANAP_fillT_callee
354   0000              	GLOBAL _NIRVANAP_fillT
355   0000              	GLOBAL _NIRVANAP_drawT_raw_callee
356   0000              	GLOBAL _NIRVANAP_drawT_raw
357   0000              	GLOBAL _NIRVANAP_drawT_callee
358   0000              	GLOBAL _NIRVANAP_drawT
359   0000              	GLOBAL _NIRVANAP_stop
360   0000              	GLOBAL _NIRVANAP_start
361   0000              	GLOBAL _debug3
362   0000              	GLOBAL _debug2
363   0000              	GLOBAL _debug
364   0000              	GLOBAL _zx_print_str
365   0000              	GLOBAL _zx_print_int
366   0000              	GLOBAL _zx_print_chr
367   0000              	GLOBAL _zx_print_bonus_time
368   0000              	GLOBAL _zx_isr
369   0000              	GLOBAL _z80_otdr_callee
370   0000              	GLOBAL _z80_otdr
371   0000              	GLOBAL _z80_otir_callee
372   0000              	GLOBAL _z80_otir
373   0000              	GLOBAL _z80_outp_callee
374   0000              	GLOBAL _z80_outp
375   0000              	GLOBAL _z80_indr_callee
376   0000              	GLOBAL _z80_indr
377   0000              	GLOBAL _z80_inir_callee
378   0000              	GLOBAL _z80_inir
379   0000              	GLOBAL _z80_inp_fastcall
380   0000              	GLOBAL _z80_inp
381   0000              	GLOBAL _z80_set_int_state_fastcall
382   0000              	GLOBAL _z80_set_int_state
383   0000              	GLOBAL _z80_get_int_state
384   0000              	GLOBAL _z80_delay_tstate_fastcall
385   0000              	GLOBAL _z80_delay_tstate
386   0000              	GLOBAL _z80_delay_ms_fastcall
387   0000              	GLOBAL _z80_delay_ms
388   0000              	GLOBAL _im2_remove_generic_callback_callee
389   0000              	GLOBAL _im2_remove_generic_callback
390   0000              	GLOBAL _im2_prepend_generic_callback_callee
391   0000              	GLOBAL _im2_prepend_generic_callback
392   0000              	GLOBAL _im2_append_generic_callback_callee
393   0000              	GLOBAL _im2_append_generic_callback
394   0000              	GLOBAL _im2_create_generic_isr_8080_callee
395   0000              	GLOBAL _im2_create_generic_isr_8080
396   0000              	GLOBAL _im2_create_generic_isr_callee
397   0000              	GLOBAL _im2_create_generic_isr
398   0000              	GLOBAL _im2_install_isr_callee
399   0000              	GLOBAL _im2_install_isr
400   0000              	GLOBAL _im2_init_fastcall
401   0000              	GLOBAL _im2_init
402   0000              	GLOBAL _intrinsic_swap_word_32_fastcall
403   0000              	GLOBAL _intrinsic_swap_word_32
404   0000              	GLOBAL _intrinsic_swap_endian_32_fastcall
405   0000              	GLOBAL _intrinsic_swap_endian_32
406   0000              	GLOBAL _intrinsic_swap_endian_16_fastcall
407   0000              	GLOBAL _intrinsic_swap_endian_16
408   0000              	GLOBAL _intrinsic_return_de
409   0000              	GLOBAL _intrinsic_return_bc
410   0000              	GLOBAL _intrinsic_exx
411   0000              	GLOBAL _intrinsic_ex_de_hl
412   0000              	GLOBAL _intrinsic_nop
413   0000              	GLOBAL _intrinsic_im_2
414   0000              	GLOBAL _intrinsic_im_1
415   0000              	GLOBAL _intrinsic_im_0
416   0000              	GLOBAL _intrinsic_retn
417   0000              	GLOBAL _intrinsic_reti
418   0000              	GLOBAL _intrinsic_halt
419   0000              	GLOBAL _intrinsic_ei
420   0000              	GLOBAL _intrinsic_di
421   0000              	GLOBAL _intrinsic_stub
422   0000              	GLOBAL _intrinsic_outi
423   0000              	GLOBAL _intrinsic_ldi
424   0000              	GLOBAL _zx_pattern_fill_callee
425   0000              	GLOBAL _zx_pattern_fill
426   0000              	GLOBAL _zx_saddrpup_fastcall
427   0000              	GLOBAL _zx_saddrpup
428   0000              	GLOBAL _zx_saddrpright_callee
429   0000              	GLOBAL _zx_saddrpright
430   0000              	GLOBAL _zx_saddrpleft_callee
431   0000              	GLOBAL _zx_saddrpleft
432   0000              	GLOBAL _zx_saddrpdown_fastcall
433   0000              	GLOBAL _zx_saddrpdown
434   0000              	GLOBAL _zx_saddrcup_fastcall
435   0000              	GLOBAL _zx_saddrcup
436   0000              	GLOBAL _zx_saddrcright_fastcall
437   0000              	GLOBAL _zx_saddrcright
438   0000              	GLOBAL _zx_saddrcleft_fastcall
439   0000              	GLOBAL _zx_saddrcleft
440   0000              	GLOBAL _zx_saddrcdown_fastcall
441   0000              	GLOBAL _zx_saddrcdown
442   0000              	GLOBAL _zx_saddr2py_fastcall
443   0000              	GLOBAL _zx_saddr2py
444   0000              	GLOBAL _zx_saddr2px_fastcall
445   0000              	GLOBAL _zx_saddr2px
446   0000              	GLOBAL _zx_saddr2cy_fastcall
447   0000              	GLOBAL _zx_saddr2cy
448   0000              	GLOBAL _zx_saddr2cx_fastcall
449   0000              	GLOBAL _zx_saddr2cx
450   0000              	GLOBAL _zx_saddr2aaddr_fastcall
451   0000              	GLOBAL _zx_saddr2aaddr
452   0000              	GLOBAL _zx_py2saddr_fastcall
453   0000              	GLOBAL _zx_py2saddr
454   0000              	GLOBAL _zx_py2aaddr_fastcall
455   0000              	GLOBAL _zx_py2aaddr
456   0000              	GLOBAL _zx_pxy2saddr_callee
457   0000              	GLOBAL _zx_pxy2saddr
458   0000              	GLOBAL _zx_pxy2aaddr_callee
459   0000              	GLOBAL _zx_pxy2aaddr
460   0000              	GLOBAL _zx_px2bitmask_fastcall
461   0000              	GLOBAL _zx_px2bitmask
462   0000              	GLOBAL _zx_cy2saddr_fastcall
463   0000              	GLOBAL _zx_cy2saddr
464   0000              	GLOBAL _zx_cy2aaddr_fastcall
465   0000              	GLOBAL _zx_cy2aaddr
466   0000              	GLOBAL _zx_cxy2saddr_callee
467   0000              	GLOBAL _zx_cxy2saddr
468   0000              	GLOBAL _zx_cxy2aaddr_callee
469   0000              	GLOBAL _zx_cxy2aaddr
470   0000              	GLOBAL _zx_bitmask2px_fastcall
471   0000              	GLOBAL _zx_bitmask2px
472   0000              	GLOBAL _zx_aaddrcup_fastcall
473   0000              	GLOBAL _zx_aaddrcup
474   0000              	GLOBAL _zx_aaddrcright_fastcall
475   0000              	GLOBAL _zx_aaddrcright
476   0000              	GLOBAL _zx_aaddrcleft_fastcall
477   0000              	GLOBAL _zx_aaddrcleft
478   0000              	GLOBAL _zx_aaddrcdown_fastcall
479   0000              	GLOBAL _zx_aaddrcdown
480   0000              	GLOBAL _zx_aaddr2saddr_fastcall
481   0000              	GLOBAL _zx_aaddr2saddr
482   0000              	GLOBAL _zx_aaddr2py_fastcall
483   0000              	GLOBAL _zx_aaddr2py
484   0000              	GLOBAL _zx_aaddr2px_fastcall
485   0000              	GLOBAL _zx_aaddr2px
486   0000              	GLOBAL _zx_aaddr2cy_fastcall
487   0000              	GLOBAL _zx_aaddr2cy
488   0000              	GLOBAL _zx_aaddr2cx_fastcall
489   0000              	GLOBAL _zx_aaddr2cx
490   0000              	GLOBAL _zx_visit_wc_pix_callee
491   0000              	GLOBAL _zx_visit_wc_pix
492   0000              	GLOBAL _zx_visit_wc_attr_callee
493   0000              	GLOBAL _zx_visit_wc_attr
494   0000              	GLOBAL _zx_scroll_wc_up_pix_callee
495   0000              	GLOBAL _zx_scroll_wc_up_pix
496   0000              	GLOBAL _zx_scroll_wc_up_attr_callee
497   0000              	GLOBAL _zx_scroll_wc_up_attr
498   0000              	GLOBAL _zx_scroll_wc_up_callee
499   0000              	GLOBAL _zx_scroll_wc_up
500   0000              	GLOBAL _zx_scroll_up_pix_callee
501   0000              	GLOBAL _zx_scroll_up_pix
502   0000              	GLOBAL _zx_scroll_up_attr_callee
503   0000              	GLOBAL _zx_scroll_up_attr
504   0000              	GLOBAL _zx_scroll_up_callee
505   0000              	GLOBAL _zx_scroll_up
506   0000              	GLOBAL _zx_cls_wc_pix_callee
507   0000              	GLOBAL _zx_cls_wc_pix
508   0000              	GLOBAL _zx_cls_wc_attr_callee
509   0000              	GLOBAL _zx_cls_wc_attr
510   0000              	GLOBAL _zx_cls_wc_callee
511   0000              	GLOBAL _zx_cls_wc
512   0000              	GLOBAL _zx_cls_pix_fastcall
513   0000              	GLOBAL _zx_cls_pix
514   0000              	GLOBAL _zx_cls_attr_fastcall
515   0000              	GLOBAL _zx_cls_attr
516   0000              	GLOBAL _zx_cls_fastcall
517   0000              	GLOBAL _zx_cls
518   0000              	GLOBAL _zx_border_fastcall
519   0000              	GLOBAL _zx_border
520   0000              	GLOBAL _spr_btile_paint_back
521   0000              	GLOBAL _spr_explode_bullet
522   0000              	GLOBAL _spr_init_anim_bullets
523   0000              	GLOBAL _spr_turn_horizontal
524   0000              	GLOBAL _spr_play_bullets
525   0000              	GLOBAL _spr_play_anim
526   0000              	GLOBAL _spr_add_anim
527   0000              	GLOBAL _spr_page_map
528   0000              	GLOBAL _spr_page_right
529   0000              	GLOBAL _spr_page_left
530   0000              	GLOBAL _spr_tile_paint
531   0000              	GLOBAL _spr_calc_hor
532   0000              	GLOBAL _spr_draw_row
533   0000              	GLOBAL _spr_draw_index
534   0000              	GLOBAL _spr_draw_clear
535   0000              	GLOBAL _spr_brick_anim
536   0000              	GLOBAL _spr_back_repaint
537   0000              	GLOBAL _spr_tile
538   0000              	GLOBAL _spr_destroy
539   0000              	GLOBAL _spr_tile_dir
540   0000              	GLOBAL _spr_redraw
541   0000              	GLOBAL _spr_move_left
542   0000              	GLOBAL _spr_move_right
543   0000              	GLOBAL _spr_move_horizontal
544   0000              	GLOBAL _spr_move_down
545   0000              	GLOBAL _spr_move_up
546   0000              	GLOBAL _spr_calc_index
547   0000              	GLOBAL _spr_chktime
548   0000              	GLOBAL _sound_hit_brick
549   0000              	GLOBAL _sound_hit_enemy
550   0000              	GLOBAL _sound_kill
551   0000              	GLOBAL _sound_enter_enemy
552   0000              	GLOBAL _sound_coin
553   0000              	GLOBAL _sound_jump
554   0000              	GLOBAL _sound_slide
555   0000              	GLOBAL _player_player_hit_pow
556   0000              	GLOBAL _game_obj_clear
557   0000              	GLOBAL _game_obj_chk
558   0000              	GLOBAL _game_obj_set
559   0000              	GLOBAL _game_shoot_fire
560   0000              	GLOBAL _game_add_enemy
561   0000              	GLOBAL _game_joystick_set_menu
562   0000              	GLOBAL _game_joystick_set
563   0000              	GLOBAL _game_joystick_change
564   0000              	GLOBAL _game_print_header
565   0000              	GLOBAL _game_end
566   0000              	GLOBAL _game_phase_print_score_back
567   0000              	GLOBAL _game_check_time
568   0000              	GLOBAL _game_rotate_attrib
569   0000              	GLOBAL _game_colour_message
570   0000              	GLOBAL _game_paint_attrib_lin_h
571   0000              	GLOBAL _game_paint_attrib_lin
572   0000              	GLOBAL _game_paint_attrib
573   0000              	GLOBAL _game_print_score
574   0000              	GLOBAL _game_unfreeze_all
575   0000              	GLOBAL _game_freeze_all
576   0000              	GLOBAL _game_freeze
577   0000              	GLOBAL _game_enemy_add_get_index
578   0000              	GLOBAL _game_check_cell
579   0000              	GLOBAL _game_check_map
580   0000              	GLOBAL _game_loop
581   0000              	GLOBAL _game_round_init
582   0000              	GLOBAL _game_start_timer
583   0000              	GLOBAL _game_tick
584   0000              	GLOBAL _game_update_stats
585   0000              	GLOBAL _game_print_footer
586   0000              	GLOBAL _game_fill_row
587   0000              	GLOBAL _game_draw_screen
588   0000              	GLOBAL _enemy_avoid_fall_dead
589   0000              	GLOBAL _enemy_avoid_fall
590   0000              	GLOBAL _enemy_respawn
591   0000              	GLOBAL _enemy_init
592   0000              	GLOBAL _enemy_move
593   0000              	GLOBAL _enemy_turn
594   0000              	GLOBAL _enemy_hit
595   0000              	GLOBAL _enemy_coin1
596   0000              	GLOBAL _enemy_static
597   0000              	GLOBAL _enemy_walk
598   0000              	GLOBAL _enemy_horizontal
599   0000              	GLOBAL _enemy_vertical
600   0000              	GLOBAL _ay_fx_play
601   0000              	GLOBAL _ay_midi_play
602   0000              	GLOBAL _ay_is_playing
603   0000              	GLOBAL _ay_reset
604   0000              	GLOBAL _test_func
605   0000              	GLOBAL _test_proc
606   0000              	GLOBAL _in_mouse_kempston_wheel_delta
607   0000              	GLOBAL _in_mouse_kempston_wheel
608   0000              	GLOBAL _in_mouse_kempston_callee
609   0000              	GLOBAL _in_mouse_kempston
610   0000              	GLOBAL _in_mouse_kempston_setpos_callee
611   0000              	GLOBAL _in_mouse_kempston_setpos
612   0000              	GLOBAL _in_mouse_kempston_reset
613   0000              	GLOBAL _in_mouse_kempston_init
614   0000              	GLOBAL _in_mouse_amx_wheel_delta
615   0000              	GLOBAL _in_mouse_amx_wheel
616   0000              	GLOBAL _in_mouse_amx_callee
617   0000              	GLOBAL _in_mouse_amx
618   0000              	GLOBAL _in_mouse_amx_setpos_callee
619   0000              	GLOBAL _in_mouse_amx_setpos
620   0000              	GLOBAL _in_mouse_amx_reset
621   0000              	GLOBAL _in_mouse_amx_init_callee
622   0000              	GLOBAL _in_mouse_amx_init
623   0000              	GLOBAL _in_stick_sinclair2
624   0000              	GLOBAL _in_stick_sinclair1
625   0000              	GLOBAL _in_stick_kempston
626   0000              	GLOBAL _in_stick_fuller
627   0000              	GLOBAL _in_stick_cursor
628   0000              	GLOBAL _in_stick_keyboard_fastcall
629   0000              	GLOBAL _in_stick_keyboard
630   0000              	GLOBAL _in_wait_nokey
631   0000              	GLOBAL _in_wait_key
632   0000              	GLOBAL _in_test_key
633   0000              	GLOBAL _in_pause_fastcall
634   0000              	GLOBAL _in_pause
635   0000              	GLOBAL _in_key_scancode_fastcall
636   0000              	GLOBAL _in_key_scancode
637   0000              	GLOBAL _in_key_pressed_fastcall
638   0000              	GLOBAL _in_key_pressed
639   0000              	GLOBAL _in_inkey
640   0000              	GLOBAL _NIRVANAP_CHAR_TABLE
641   0000              	GLOBAL _NIRVANAP_WIDE_IMAGES
642   0000              	GLOBAL _NIRVANAP_TILE_IMAGES
643   0000              	GLOBAL _NIRVANAP_HOLE
644   0000              	GLOBAL _NIRVANAP_ISR_HOOK
645   0000              	GLOBAL _player_lvl_table
646   0000              	GLOBAL _map_paper_last
647   0000              	GLOBAL _map_paper_clr
648   0000              	GLOBAL _map_paper
649   0000              	GLOBAL _draw_count
650   0000              	GLOBAL _g_player_hit_right
651   0000              	GLOBAL _g_player_hit_left
652   0000              	GLOBAL _joynames
653   0000              	GLOBAL _initials
654   0000              	GLOBAL _bullet_count
655   0000              	GLOBAL _bullet_vel
656   0000              	GLOBAL _bullet_frames
657   0000              	GLOBAL _bullet_colint
658   0000              	GLOBAL _bullet_dir
659   0000              	GLOBAL _bullet_tile
660   0000              	GLOBAL _bullet_col
661   0000              	GLOBAL _bullet_lin
662   0000              	GLOBAL _bullet_col0
663   0000              	GLOBAL _bullet_lin0
664   0000              	GLOBAL _bullet_max
665   0000              	GLOBAL _bullet_class
666   0000              	GLOBAL _mush_class
667   0000              	GLOBAL _mush_index
668   0000              	GLOBAL _anim_count
669   0000              	GLOBAL _anim_respanwn
670   0000              	GLOBAL _anim_loop
671   0000              	GLOBAL _anim_end
672   0000              	GLOBAL _anim_int
673   0000              	GLOBAL _anim_tile
674   0000              	GLOBAL _anim_col
675   0000              	GLOBAL _anim_lin
676   0000              	GLOBAL _phase_curr
677   0000              	GLOBAL _map_heigth
678   0000              	GLOBAL _map_width
679   0000              	GLOBAL _scr_curr
680   0000              	GLOBAL _scr_obj1
681   0000              	GLOBAL _scr_obj0
682   0000              	GLOBAL _scr_map
683   0000              	GLOBAL _sprite_speed_alt
684   0000              	GLOBAL _sprite_frames
685   0000              	GLOBAL _sprite_speed
686   0000              	GLOBAL _screen_ink
687   0000              	GLOBAL _screen_paper
688   0000              	GLOBAL _player_over_stair
689   0000              	GLOBAL _game_start_scr
690   0000              	GLOBAL _game_respawning
691   0000              	GLOBAL _game_respawn_tile
692   0000              	GLOBAL _game_respawn_index
693   0000              	GLOBAL _game_menu_sel
694   0000              	GLOBAL _game_score_top
695   0000              	GLOBAL _player_lives
696   0000              	GLOBAL _game_over
697   0000              	GLOBAL _game_sound
698   0000              	GLOBAL _game_inmune
699   0000              	GLOBAL _game_god_mode
700   0000              	GLOBAL _game_two_player
701   0000              	GLOBAL _game_brick_tile
702   0000              	GLOBAL _sprite_curr_index
703   0000              	GLOBAL _spr_count
704   0000              	GLOBAL _bullet_time
705   0000              	GLOBAL _anim_time
706   0000              	GLOBAL _frame_time
707   0000              	GLOBAL _entry_time
708   0000              	GLOBAL _curr_time
709   0000              	GLOBAL _s_state
710   0000              	GLOBAL _attrib_hl
711   0000              	GLOBAL _attrib
712   0000              	GLOBAL _zx_val_asm
713   0000              	GLOBAL _enemies
714   0000              	GLOBAL _tmp_ui
715   0000              	GLOBAL _tmp_sc
716   0000              	GLOBAL _tmp_uc
717   0000              	GLOBAL _tmp1
718   0000              	GLOBAL _tmp0
719   0000              	GLOBAL _tmp
720   0000              	GLOBAL _index1
721   0000              	GLOBAL _index0
722   0000              	GLOBAL _loop_count
723   0000              	GLOBAL _s_col1
724   0000              	GLOBAL _s_col0
725   0000              	GLOBAL _s_lin1
726   0000              	GLOBAL _s_lin0
727   0000              	GLOBAL _s_tile1
728   0000              	GLOBAL _s_tile0
729   0000              	GLOBAL _player_hit_count
730   0000              	GLOBAL _sprite_horizontal_check
731   0000              	GLOBAL _sprite_on_air
732   0000              	GLOBAL _sprite
733   0000              	GLOBAL _game_gravity
734   0000              	GLOBAL _player_hit_time
735   0000              	GLOBAL _player_lvl
736   0000              	GLOBAL _player_int
737   0000              	GLOBAL _player_str
738   0000              	GLOBAL _player_max_vita
739   0000              	GLOBAL _player_max_mana
740   0000              	GLOBAL _player_vita
741   0000              	GLOBAL _player_mana
742   0000              	GLOBAL _player_keys
743   0000              	GLOBAL _player_vel_inc
744   0000              	GLOBAL _player_vel_y1
745   0000              	GLOBAL _player_vel_y0
746   0000              	GLOBAL _player_vel_y
747   0000              	GLOBAL _player_vel_x
748   0000              	GLOBAL _player_joy
749   0000              	GLOBAL _player_score
750   0000              	GLOBAL _last_time
751   0000              	GLOBAL _player_slide
752   0000              	GLOBAL _spr_timer
753   0000              	GLOBAL _jump_lin
754   0000              	GLOBAL _player_hit_col
755   0000              	GLOBAL _player_hit_lin
756   0000              	GLOBAL _colint
757   0000              	GLOBAL _col
758   0000              	GLOBAL _lin
759   0000              	GLOBAL _tile
760   0000              	GLOBAL _state_a
761   0000              	GLOBAL _state
762   0000              	GLOBAL _class
763   0000              	GLOBAL _tbuffer
764   0000              	GLOBAL _dirs
765   0000              	GLOBAL _k1
766   0000              	GLOBAL _joyfunc1
767   0000              	GLOBAL _btiles
768   0000              	GLOBAL _spec128
769   0000              	GLOBAL _GLOBAL_ZX_PORT_7FFD
770   0000              	GLOBAL _GLOBAL_ZX_PORT_1FFD
771   0000              	GLOBAL _GLOBAL_ZX_PORT_FE
772   0000              	GLOBAL _ay_effect_20
773   0000              	GLOBAL _ay_effect_19
774   0000              	GLOBAL _ay_effect_18
775   0000              	GLOBAL _ay_effect_17
776   0000              	GLOBAL _ay_effect_16
777   0000              	GLOBAL _ay_effect_15
778   0000              	GLOBAL _ay_effect_14
779   0000              	GLOBAL _ay_effect_13
780   0000              	GLOBAL _ay_effect_12
781   0000              	GLOBAL _ay_effect_11
782   0000              	GLOBAL _ay_effect_10
783   0000              	GLOBAL _ay_effect_09
784   0000              	GLOBAL _ay_effect_08
785   0000              	GLOBAL _ay_effect_07
786   0000              	GLOBAL _ay_effect_06
787   0000              	GLOBAL _ay_effect_05
788   0000              	GLOBAL _ay_effect_04
789   0000              	GLOBAL _ay_effect_03
790   0000              	GLOBAL _ay_effect_02
791   0000              	GLOBAL _ay_effect_01
792   0000              	GLOBAL _pb_midi_phase_1
793   0000              	GLOBAL _pb_midi_title
794   0000              	GLOBAL _control_method
795   0000              	GLOBAL _world0
796   0000              	GLOBAL _lenght0
797   0000              	GLOBAL _start_scr0
798   0000              ;--------------------------------------------------------
799   0000              ; special function registers
800   0000              ;--------------------------------------------------------
801   0000              defc _IO_FE	=	0x00fe
802   0000              defc _IO_1FFD	=	0x1ffd
803   0000              defc _IO_7FFD	=	0x7ffd
804   0000              ;--------------------------------------------------------
805   0000              ; ram data
806   0000              ;--------------------------------------------------------
807   0000              	SECTION bss_compiler
808   0000              ;--------------------------------------------------------
809   0000              ; ram data
810   0000              ;--------------------------------------------------------
811   0000              
812   0000              IF 0
813   0000              
814   0000              ; .area _INITIALIZED removed by z88dk
815   0000              
816   0000              
817   0000              ENDIF
818   0000              
819   0000              ;--------------------------------------------------------
820   0000              ; absolute external ram data
821   0000              ;--------------------------------------------------------
822   0000              	SECTION IGNORE
823   0000              ;--------------------------------------------------------
824   0000              ; global & static initialisations
825   0000              ;--------------------------------------------------------
826   0000              	SECTION code_crt_init
827   0000              ;--------------------------------------------------------
828   0000              ; Home
829   0000              ;--------------------------------------------------------
830   0000              	SECTION IGNORE
831   0000              ;--------------------------------------------------------
832   0000              ; code
833   0000              ;--------------------------------------------------------
834   0000              	SECTION code_compiler
835   0000              ;	---------------------------------
836   0000              ; Function player_init
837   0000              ; ---------------------------------
838   0000              _player_init:
839   0000  CD 00 00    	call	___sdcc_enter_ix
840   0003  F5          	push	af
841   0004  3E 00       	ld	a, +((_class) & 0xFF)
842   0006  DD 86 04    	add	a,(ix+4)
843   0009  4F          	ld	c, a
844   000A  3E 00       	ld	a, +((_class) / 256)
845   000C  CE 00       	adc	a,0x00
846   000E  47          	ld	b, a
847   000F  AF          	xor	a, a
848   0010  02          	ld	(bc), a
849   0011  3E 00       	ld	a, +((_tile) & 0xFF)
850   0013  DD 86 04    	add	a,(ix+4)
851   0016  4F          	ld	c, a
852   0017  3E 00       	ld	a, +((_tile) / 256)
853   0019  CE 00       	adc	a,0x00
854   001B  47          	ld	b, a
855   001C  DD 7E 07    	ld	a,(ix+7)
856   001F  02          	ld	(bc), a
857   0020  3E 00       	ld	a, +((_lin) & 0xFF)
858   0022  DD 86 04    	add	a,(ix+4)
859   0025  4F          	ld	c, a
860   0026  3E 00       	ld	a, +((_lin) / 256)
861   0028  CE 00       	adc	a,0x00
862   002A  47          	ld	b, a
863   002B  DD 7E 05    	ld	a,(ix+5)
864   002E  02          	ld	(bc), a
865   002F  3E 00       	ld	a, +((_col) & 0xFF)
866   0031  DD 86 04    	add	a,(ix+4)
867   0034  4F          	ld	c, a
868   0035  3E 00       	ld	a, +((_col) / 256)
869   0037  CE 00       	adc	a,0x00
870   0039  47          	ld	b, a
871   003A  DD 7E 06    	ld	a,(ix+6)
872   003D  02          	ld	(bc), a
873   003E  3E 00       	ld	a, +((_colint) & 0xFF)
874   0040  DD 86 04    	add	a,(ix+4)
875   0043  4F          	ld	c, a
876   0044  3E 00       	ld	a, +((_colint) / 256)
877   0046  CE 00       	adc	a,0x00
878   0048  47          	ld	b, a
879   0049  AF          	xor	a, a
880   004A  02          	ld	(bc), a
881   004B  3E 00       	ld	a, +((_state) & 0xFF)
882   004D  DD 86 04    	add	a,(ix+4)
883   0050  4F          	ld	c, a
884   0051  3E 00       	ld	a, +((_state) / 256)
885   0053  CE 00       	adc	a,0x00
886   0055  47          	ld	b, a
887   0056  AF          	xor	a, a
888   0057  02          	ld	(bc), a
889   0058  3E 00       	ld	a, +((_state_a) & 0xFF)
890   005A  DD 86 04    	add	a,(ix+4)
891   005D  4F          	ld	c, a
892   005E  3E 00       	ld	a, +((_state_a) / 256)
893   0060  CE 00       	adc	a,0x00
894   0062  47          	ld	b, a
895   0063  AF          	xor	a, a
896   0064  02          	ld	(bc), a
897   0065  3E 00       	ld	a, +((_jump_lin) & 0xFF)
898   0067  DD 86 04    	add	a,(ix+4)
899   006A  5F          	ld	e, a
900   006B  3E 00       	ld	a, +((_jump_lin) / 256)
901   006D  CE 00       	adc	a,0x00
902   006F  57          	ld	d, a
903   0070  DD 7E 05    	ld	a,(ix+5)
904   0073  12          	ld	(de), a
905   0074  DD 6E 04    	ld	l,(ix+4)
906   0077  26 00       	ld	h,0x00
907   0079  29          	add	hl,hl
908   007A  11 00 00    	ld	de,_last_time
909   007D  19          	add	hl, de
910   007E  E3          	ex	(sp), hl
911   007F  E1          	pop	hl
912   0080  ED 5B 00 00 	ld	de,(_curr_time)
913   0084  E5          	push	hl
914   0085  73          	ld	(hl), e
915   0086  23          	inc	hl
916   0087  72          	ld	(hl), d
917   0088  3E 00       	ld	a, +((_sprite_speed_alt) & 0xFF)
918   008A  DD 86 04    	add	a,(ix+4)
919   008D  5F          	ld	e, a
920   008E  3E 00       	ld	a, +((_sprite_speed_alt) / 256)
921   0090  CE 00       	adc	a,0x00
922   0092  57          	ld	d, a
923   0093  AF          	xor	a, a
924   0094  12          	ld	(de), a
925   0095  0A          	ld	a, (bc)
926   0096  F6 11       	or	a,+(0x01|0x10)
927   0098  02          	ld	(bc),a
928   0099  21 00 00    	ld	hl,_player_hit_col
929   009C  36 00       	ld	(hl),0x00
930   009E  21 00 00    	ld	hl,_player_hit_lin
931   00A1  36 00       	ld	(hl),0x00
932   00A3  21 00 00    	ld	hl,_player_slide
933   00A6  36 00       	ld	(hl),0x00
934   00A8  DD 66 06    	ld	h,(ix+6)
935   00AB  DD 6E 05    	ld	l,(ix+5)
936   00AE  E5          	push	hl
937   00AF  DD 66 07    	ld	h,(ix+7)
938   00B2  DD 6E 04    	ld	l,(ix+4)
939   00B5  E5          	push	hl
940   00B6  CD 00 00    	call	_NIRVANAP_spriteT_callee
941   00B9  F1          	pop	af
942   00BA  DD E1       	pop	ix
943   00BC  C9          	ret
944   00BD              	SECTION code_compiler
945   00BD              ;	---------------------------------
946   00BD              ; Function player_check_input
947   00BD              ; ---------------------------------
948   00BD              _player_check_input:
949   00BD  21 00 00    	ld	hl,_dirs
950   00C0  CB 56       	bit	2, (hl)
951   00C2  28 0C       	jr	Z,l_player_check_input_00102
952   00C4  21 00 00    	ld	hl,_dirs
953   00C7  CB 5E       	bit	3, (hl)
954   00C9  28 05       	jr	Z,l_player_check_input_00102
955   00CB  21 00 00    	ld	hl,_dirs
956   00CE  36 00       	ld	(hl),0x00
957   00D0              l_player_check_input_00102:
958   00D0  21 00 00    	ld	hl,_dirs
959   00D3  7E          	ld	a, (hl)
960   00D4  CB 07       	rlc	a
961   00D6  E6 01       	and	a,0x01
962   00D8  CB 47       	bit	0, a
963   00DA  20 1D       	jr	NZ,l_player_check_input_00107
964   00DC  CB 56       	bit	2, (hl)
965   00DE  20 19       	jr	NZ,l_player_check_input_00107
966   00E0  21 00 00    	ld	hl,_dirs
967   00E3  CB 5E       	bit	3, (hl)
968   00E5  20 12       	jr	NZ,l_player_check_input_00107
969   00E7  21 00 00    	ld	hl,_dirs
970   00EA  CB 46       	bit	0, (hl)
971   00EC  20 0B       	jr	NZ,l_player_check_input_00107
972   00EE  21 00 00    	ld	hl,_dirs
973   00F1  CB 4E       	bit	1, (hl)
974   00F3  20 04       	jr	NZ,l_player_check_input_00107
975   00F5  2E 00       	ld	l,0x00
976   00F7  18 02       	jr	l_player_check_input_00108
977   00F9              l_player_check_input_00107:
978   00F9  2E 01       	ld	l,0x01
979   00FB              l_player_check_input_00108:
980   00FB  C9          	ret
981   00FC              	SECTION code_compiler
982   00FC              ;	---------------------------------
983   00FC              ; Function player_collision
984   00FC              ; ---------------------------------
985   00FC              _player_collision:
986   00FC  21 19 00    	ld	hl,0x0019
987   00FF  E5          	push	hl
988   0100  2A 00 00    	ld	hl,(_player_hit_time)
989   0103  E5          	push	hl
990   0104  CD 00 00    	call	_game_check_time
991   0107  F1          	pop	af
992   0108  F1          	pop	af
993   0109  7D          	ld	a, l
994   010A  B7          	or	a, a
995   010B  CA 42 02    	jp	Z, l_player_collision_00124
996   010E  21 00 00    	ld	hl,_sprite
997   0111  36 00       	ld	(hl),0x00
998   0113  3A 07 00    	ld	a,(_col + 7)
999   0116  32 00 00    	ld	(_s_col1),a
1000  0119  3A 07 00    	ld	a,(_lin + 7)
1001  011C  32 00 00    	ld	(_s_lin1),a
1002  011F  C6 08       	add	a,0x08
1003  0121  4F          	ld	c, a
1004  0122  3A 00 00    	ld	a, (_s_col1)
1005  0125  47          	ld	b,a
1006  0126  C5          	push	bc
1007  0127  CD 00 00    	call	_spr_calc_index
1008  012A  F1          	pop	af
1009  012B  7D          	ld	a,l
1010  012C  32 00 00    	ld	(_sprite_curr_index),a
1011  012F  4F          	ld	c,a
1012  0130  06 00       	ld	b,0x00
1013  0132  21 00 00    	ld	hl,_scr_map
1014  0135  09          	add	hl,bc
1015  0136  4E          	ld	c, (hl)
1016  0137  3E 2F       	ld	a,0x2f
1017  0139  91          	sub	a, c
1018  013A  30 0F       	jr	NC,l_player_collision_00120
1019  013C  79          	ld	a, c
1020  013D  D6 3C       	sub	a,0x3c
1021  013F  30 0A       	jr	NC,l_player_collision_00120
1022  0141  2E 06       	ld	l,0x06
1023  0143  CD 00 00    	call	_zx_border_fastcall
1024  0146  2E 32       	ld	l,0x32
1025  0148  CD 76 10    	call	_player_hit
1026  014B              l_player_collision_00120:
1027  014B  21 00 00    	ld	hl,_sprite
1028  014E  7E          	ld	a, (hl)
1029  014F  D6 07       	sub	a,0x07
1030  0151  D2 42 02    	jp	NC, l_player_collision_00124
1031  0154  3E 00       	ld	a, +((_class) & 0xFF)
1032  0156  86          	add	a, (hl)
1033  0157  4F          	ld	c, a
1034  0158  3E 00       	ld	a, +((_class) / 256)
1035  015A  CE 00       	adc	a,0x00
1036  015C  47          	ld	b, a
1037  015D  0A          	ld	a, (bc)
1038  015E  B7          	or	a, a
1039  015F  CA 3B 02    	jp	Z, l_player_collision_00119
1040  0162  4E          	ld	c,(hl)
1041  0163  06 00       	ld	b,0x00
1042  0165  21 00 00    	ld	hl,_col
1043  0168  09          	add	hl,bc
1044  0169  4E          	ld	c, (hl)
1045  016A  06 00       	ld	b,0x00
1046  016C  3A 00 00    	ld	a,(_s_col1)
1047  016F  5F          	ld	e,a
1048  0170  16 00       	ld	d,0x00
1049  0172  79          	ld	a, c
1050  0173  93          	sub	a, e
1051  0174  6F          	ld	l, a
1052  0175  78          	ld	a, b
1053  0176  9A          	sbc	a, d
1054  0177  67          	ld	h, a
1055  0178  CD 00 00    	call	_abs_fastcall
1056  017B  7D          	ld	a,l
1057  017C  D6 02       	sub	a,0x02
1058  017E  7C          	ld	a,h
1059  017F  17          	rla
1060  0180  3F          	ccf
1061  0181  1F          	rra
1062  0182  DE 80       	sbc	a,0x80
1063  0184  D2 3B 02    	jp	NC, l_player_collision_00119
1064  0187  2A 00 00    	ld	hl,(_sprite)
1065  018A  26 00       	ld	h,0x00
1066  018C  01 00 00    	ld	bc,_lin
1067  018F  09          	add	hl,bc
1068  0190  4E          	ld	c,(hl)
1069  0191  06 00       	ld	b,0x00
1070  0193  3A 00 00    	ld	a,(_s_lin1)
1071  0196  5F          	ld	e,a
1072  0197  16 00       	ld	d,0x00
1073  0199  79          	ld	a, c
1074  019A  93          	sub	a, e
1075  019B  6F          	ld	l, a
1076  019C  78          	ld	a, b
1077  019D  9A          	sbc	a, d
1078  019E  67          	ld	h, a
1079  019F  CD 00 00    	call	_abs_fastcall
1080  01A2  7D          	ld	a,l
1081  01A3  D6 0E       	sub	a,0x0e
1082  01A5  7C          	ld	a,h
1083  01A6  17          	rla
1084  01A7  3F          	ccf
1085  01A8  1F          	rra
1086  01A9  DE 80       	sbc	a,0x80
1087  01AB  D2 3B 02    	jp	NC, l_player_collision_00119
1088  01AE  2A 00 00    	ld	hl,(_sprite)
1089  01B1  26 00       	ld	h,0x00
1090  01B3  01 00 00    	ld	bc,_class
1091  01B6  09          	add	hl,bc
1092  01B7  7E          	ld	a,(hl)
1093  01B8  FE 06       	cp	a,0x06
1094  01BA  20 29       	jr	NZ,l_player_collision_00107
1095  01BC  21 00 00    	ld	hl,_player_vita
1096  01BF  7E          	ld	a, (hl)
1097  01C0  C6 14       	add	a,0x14
1098  01C2  77          	ld	(hl), a
1099  01C3  3A 00 00    	ld	a,(_player_max_vita)
1100  01C6  21 00 00    	ld	hl,_player_vita
1101  01C9  96          	sub	a, (hl)
1102  01CA  30 06       	jr	NC,l_player_collision_00105
1103  01CC  3A 00 00    	ld	a,(_player_max_vita)
1104  01CF  32 00 00    	ld	(_player_vita),a
1105  01D2              l_player_collision_00105:
1106  01D2  21 01 00    	ld	hl,0x0001
1107  01D5  CD D8 0B    	call	_player_score_add
1108  01D8  CD 00 00    	call	_game_update_stats
1109  01DB  2A 00 00    	ld	hl,(_sprite)
1110  01DE  CD 00 00    	call	_spr_destroy
1111  01E1  2E 00       	ld	l,0x00
1112  01E3  18 5F       	jr	l_player_collision_00125
1113  01E5              l_player_collision_00107:
1114  01E5  FE 07       	cp	a,0x07
1115  01E7  20 29       	jr	NZ,l_player_collision_00111
1116  01E9  21 00 00    	ld	hl,_player_mana
1117  01EC  7E          	ld	a, (hl)
1118  01ED  C6 14       	add	a,0x14
1119  01EF  77          	ld	(hl), a
1120  01F0  3A 00 00    	ld	a,(_player_max_mana)
1121  01F3  21 00 00    	ld	hl,_player_mana
1122  01F6  96          	sub	a, (hl)
1123  01F7  30 06       	jr	NC,l_player_collision_00109
1124  01F9  3A 00 00    	ld	a,(_player_max_mana)
1125  01FC  32 00 00    	ld	(_player_mana),a
1126  01FF              l_player_collision_00109:
1127  01FF  21 01 00    	ld	hl,0x0001
1128  0202  CD D8 0B    	call	_player_score_add
1129  0205  CD 00 00    	call	_game_update_stats
1130  0208  2A 00 00    	ld	hl,(_sprite)
1131  020B  CD 00 00    	call	_spr_destroy
1132  020E  2E 00       	ld	l,0x00
1133  0210  18 32       	jr	l_player_collision_00125
1134  0212              l_player_collision_00111:
1135  0212  D6 08       	sub	a,0x08
1136  0214  20 17       	jr	NZ,l_player_collision_00113
1137  0216  21 00 00    	ld	hl,_player_lives
1138  0219  34          	inc	(hl)
1139  021A  21 01 00    	ld	hl,0x0001
1140  021D  CD D8 0B    	call	_player_score_add
1141  0220  CD 00 00    	call	_game_update_stats
1142  0223  2A 00 00    	ld	hl,(_sprite)
1143  0226  CD 00 00    	call	_spr_destroy
1144  0229  2E 00       	ld	l,0x00
1145  022B  18 17       	jr	l_player_collision_00125
1146  022D              l_player_collision_00113:
1147  022D  2E 02       	ld	l,0x02
1148  022F  CD 00 00    	call	_zx_border_fastcall
1149  0232  2E 14       	ld	l,0x14
1150  0234  CD 76 10    	call	_player_hit
1151  0237  2E 01       	ld	l,0x01
1152  0239  18 09       	jr	l_player_collision_00125
1153  023B              l_player_collision_00119:
1154  023B  21 00 00    	ld	hl,_sprite
1155  023E  34          	inc	(hl)
1156  023F  C3 4B 01    	jp	l_player_collision_00120
1157  0242              l_player_collision_00124:
1158  0242  2E 00       	ld	l,0x00
1159  0244              l_player_collision_00125:
1160  0244  C9          	ret
1161  0245              	SECTION code_compiler
1162  0245              ;	---------------------------------
1163  0245              ; Function player_kill
1164  0245              ; ---------------------------------
1165  0245              _player_kill:
1166  0245  01 00 00    	ld	bc,_state+0
1167  0248  2A 00 00    	ld	hl,(_sprite)
1168  024B  26 00       	ld	h,0x00
1169  024D  09          	add	hl,bc
1170  024E  CB 6E       	bit	5,(hl)
1171  0250  C2 17 03    	jp	NZ,l_player_kill_00109
1172  0253  C5          	push	bc
1173  0254  CD 00 00    	call	_sound_hit_brick
1174  0257  C1          	pop	bc
1175  0258  79          	ld	a, c
1176  0259  21 00 00    	ld	hl,_sprite
1177  025C  86          	add	a, (hl)
1178  025D  5F          	ld	e, a
1179  025E  78          	ld	a, b
1180  025F  CE 00       	adc	a,0x00
1181  0261  57          	ld	d, a
1182  0262  1A          	ld	a, (de)
1183  0263  F6 20       	or	a,0x20
1184  0265  12          	ld	(de), a
1185  0266  3E 00       	ld	a, +((_sprite_speed_alt) & 0xFF)
1186  0268  86          	add	a, (hl)
1187  0269  5F          	ld	e, a
1188  026A  3E 00       	ld	a, +((_sprite_speed_alt) / 256)
1189  026C  CE 00       	adc	a,0x00
1190  026E  57          	ld	d, a
1191  026F  3E 03       	ld	a,0x03
1192  0271  12          	ld	(de), a
1193  0272  79          	ld	a, c
1194  0273  86          	add	a, (hl)
1195  0274  4F          	ld	c, a
1196  0275  78          	ld	a, b
1197  0276  CE 00       	adc	a,0x00
1198  0278  47          	ld	b, a
1199  0279  0A          	ld	a, (bc)
1200  027A  CB 57       	bit	2, a
1201  027C  28 0D       	jr	Z,l_player_kill_00102
1202  027E  2A 00 00    	ld	hl,(_sprite)
1203  0281  26 00       	ld	h,0x00
1204  0283  01 00 00    	ld	bc,_tile
1205  0286  09          	add	hl,bc
1206  0287  36 4C       	ld	(hl),0x4c
1207  0289  18 0B       	jr	l_player_kill_00103
1208  028B              l_player_kill_00102:
1209  028B  2A 00 00    	ld	hl,(_sprite)
1210  028E  26 00       	ld	h,0x00
1211  0290  01 00 00    	ld	bc,_tile
1212  0293  09          	add	hl,bc
1213  0294  36 54       	ld	(hl),0x54
1214  0296              l_player_kill_00103:
1215  0296  CD 9F 0B    	call	_player_hit_platform_clear
1216  0299  2A 00 00    	ld	hl,(_sprite)
1217  029C  26 00       	ld	h,0x00
1218  029E  01 00 00    	ld	bc,_col
1219  02A1  09          	add	hl,bc
1220  02A2  4E          	ld	c, (hl)
1221  02A3  2A 00 00    	ld	hl,(_sprite)
1222  02A6  26 00       	ld	h,0x00
1223  02A8  11 00 00    	ld	de,_lin
1224  02AB  19          	add	hl,de
1225  02AC  46          	ld	b, (hl)
1226  02AD  2A 00 00    	ld	hl,(_sprite)
1227  02B0  26 00       	ld	h,0x00
1228  02B2  11 00 00    	ld	de,_tile
1229  02B5  19          	add	hl,de
1230  02B6  56          	ld	d, (hl)
1231  02B7  79          	ld	a,c
1232  02B8  21 00 00    	ld	hl,_sprite
1233  02BB  F5          	push	af
1234  02BC  33          	inc	sp
1235  02BD  4A          	ld	c, d
1236  02BE  7E          	ld	a,(hl)
1237  02BF  C5          	push	bc
1238  02C0  F5          	push	af
1239  02C1  33          	inc	sp
1240  02C2  CD 00 00    	call	_NIRVANAP_spriteT_callee
1241  02C5  01 00 00    	ld	bc,_spr_timer+0
1242  02C8  2A 00 00    	ld	hl,(_sprite)
1243  02CB  26 00       	ld	h,0x00
1244  02CD  29          	add	hl, hl
1245  02CE  09          	add	hl,bc
1246  02CF  ED 5B 00 00 	ld	de,(_curr_time)
1247  02D3  73          	ld	(hl),e
1248  02D4  23          	inc	hl
1249  02D5  72          	ld	(hl),d
1250  02D6  3A 00 00    	ld	a,(_sprite)
1251  02D9  D6 07       	sub	a,0x07
1252  02DB  20 1E       	jr	NZ,l_player_kill_00105
1253  02DD  01 00 00    	ld	bc,_state_a+0
1254  02E0  79          	ld	a, c
1255  02E1  21 00 00    	ld	hl,_sprite
1256  02E4  86          	add	a, (hl)
1257  02E5  5F          	ld	e, a
1258  02E6  78          	ld	a, b
1259  02E7  CE 00       	adc	a,0x00
1260  02E9  57          	ld	d, a
1261  02EA  1A          	ld	a, (de)
1262  02EB  F6 08       	or	a,0x08
1263  02ED  12          	ld	(de), a
1264  02EE  79          	ld	a, c
1265  02EF  86          	add	a, (hl)
1266  02F0  4F          	ld	c, a
1267  02F1  78          	ld	a, b
1268  02F2  CE 00       	adc	a,0x00
1269  02F4  47          	ld	b, a
1270  02F5  0A          	ld	a, (bc)
1271  02F6  E6 EF       	and	a,0xef
1272  02F8  02          	ld	(bc), a
1273  02F9  18 1C       	jr	l_player_kill_00109
1274  02FB              l_player_kill_00105:
1275  02FB  01 00 00    	ld	bc,_state_a+0
1276  02FE  79          	ld	a, c
1277  02FF  21 00 00    	ld	hl,_sprite
1278  0302  86          	add	a, (hl)
1279  0303  5F          	ld	e, a
1280  0304  78          	ld	a, b
1281  0305  CE 00       	adc	a,0x00
1282  0307  57          	ld	d, a
1283  0308  1A          	ld	a, (de)
1284  0309  F6 10       	or	a,0x10
1285  030B  12          	ld	(de), a
1286  030C  79          	ld	a, c
1287  030D  86          	add	a, (hl)
1288  030E  4F          	ld	c, a
1289  030F  78          	ld	a, b
1290  0310  CE 00       	adc	a,0x00
1291  0312  47          	ld	b, a
1292  0313  0A          	ld	a, (bc)
1293  0314  E6 F7       	and	a,0xf7
1294  0316  02          	ld	(bc), a
1295  0317              l_player_kill_00109:
1296  0317  C9          	ret
1297  0318              	SECTION code_compiler
1298  0318              ;	---------------------------------
1299  0318              ; Function player_restart
1300  0318              ; ---------------------------------
1301  0318              _player_restart:
1302  0318  CD 00 00    	call	___sdcc_enter_ix
1303  031B  F5          	push	af
1304  031C  4D          	ld	c, l
1305  031D  21 00 00    	ld	hl,_ay_effect_15
1306  0320  CD 00 00    	call	_ay_fx_play
1307  0323  C5          	push	bc
1308  0324  21 0E 70    	ld	hl,0x700e
1309  0327  E5          	push	hl
1310  0328  21 07 00    	ld	hl,0x0007
1311  032B  E5          	push	hl
1312  032C  CD 00 00    	call	_player_init
1313  032F  F1          	pop	af
1314  0330  F1          	pop	af
1315  0331  C1          	pop	bc
1316  0332  11 00 00    	ld	de,_state+0
1317  0335  69          	ld	l,c
1318  0336  26 00       	ld	h,0x00
1319  0338  19          	add	hl, de
1320  0339  CB E6       	set	4, (hl)
1321  033B  11 00 00    	ld	de,_state_a+0
1322  033E  69          	ld	l,c
1323  033F  26 00       	ld	h,0x00
1324  0341  19          	add	hl, de
1325  0342  CB C6       	set	0, (hl)
1326  0344  11 00 00    	ld	de,_spr_timer+0
1327  0347  69          	ld	l, c
1328  0348  26 00       	ld	h,0x00
1329  034A  29          	add	hl, hl
1330  034B  19          	add	hl,de
1331  034C  E3          	ex	(sp), hl
1332  034D  E1          	pop	hl
1333  034E  ED 5B 00 00 	ld	de,(_curr_time)
1334  0352  E5          	push	hl
1335  0353  73          	ld	(hl), e
1336  0354  23          	inc	hl
1337  0355  72          	ld	(hl), d
1338  0356  11 00 00    	ld	de,_sprite_speed_alt+0
1339  0359  69          	ld	l,c
1340  035A  26 00       	ld	h,0x00
1341  035C  19          	add	hl, de
1342  035D  F1          	pop	af
1343  035E  36 08       	ld	(hl),0x08
1344  0360  DD E1       	pop	ix
1345  0362  C9          	ret
1346  0363              	SECTION code_compiler
1347  0363              ;	---------------------------------
1348  0363              ; Function player_turn
1349  0363              ; ---------------------------------
1350  0363              _player_turn:
1351  0363  21 00 00    	ld	hl,_sprite
1352  0366  CD 00 00    	call	_spr_chktime
1353  0369  7D          	ld	a, l
1354  036A  B7          	or	a, a
1355  036B  C8          	ret	Z
1356  036C  21 00 00    	ld	hl,_k1
1357  036F  E5          	push	hl
1358  0370  2A 00 00    	ld	hl,(_joyfunc1)
1359  0373  CD 00 00    	call	___sdcc_call_hl
1360  0376  F1          	pop	af
1361  0377  7D          	ld	a,l
1362  0378  32 00 00    	ld	(_dirs),a
1363  037B  CD 81 03    	call	_player_move
1364  037E  C3 FC 00    	jp  _player_collision
1365  0381              	SECTION code_compiler
1366  0381              ;	---------------------------------
1367  0381              ; Function player_move
1368  0381              ; ---------------------------------
1369  0381              _player_move:
1370  0381  2A 00 00    	ld	hl,(_sprite)
1371  0384  26 00       	ld	h,0x00
1372  0386  01 00 00    	ld	bc,_lin
1373  0389  09          	add	hl,bc
1374  038A  7E          	ld	a,(hl)
1375  038B  32 00 00    	ld	(_s_lin0),a
1376  038E  2A 00 00    	ld	hl,(_sprite)
1377  0391  26 00       	ld	h,0x00
1378  0393  01 00 00    	ld	bc,_col
1379  0396  09          	add	hl,bc
1380  0397  7E          	ld	a,(hl)
1381  0398  32 00 00    	ld	(_s_col0),a
1382  039B  2A 00 00    	ld	hl,(_sprite)
1383  039E  26 00       	ld	h,0x00
1384  03A0  01 00 00    	ld	bc,_tile
1385  03A3  09          	add	hl,bc
1386  03A4  4E          	ld	c, (hl)
1387  03A5  3A 00 00    	ld	a,(_sprite)
1388  03A8  5F          	ld	e,a
1389  03A9  16 00       	ld	d,0x00
1390  03AB  21 00 00    	ld	hl,_colint
1391  03AE  19          	add	hl,de
1392  03AF  7E          	ld	a,(hl)
1393  03B0  81          	add	a,c
1394  03B1  32 00 00    	ld	(_s_tile0),a
1395  03B4  2A 00 00    	ld	hl,(_sprite)
1396  03B7  26 00       	ld	h,0x00
1397  03B9  01 00 00    	ld	bc,_state
1398  03BC  09          	add	hl,bc
1399  03BD  7E          	ld	a,(hl)
1400  03BE  CB 47       	bit	0,a
1401  03C0  32 00 00    	ld	(_s_state),a
1402  03C3  20 07       	jr	NZ,l_player_move_00113
1403  03C5  21 00 00    	ld	hl,_s_state
1404  03C8  CB 4E       	bit	1, (hl)
1405  03CA  28 46       	jr	Z,l_player_move_00114
1406  03CC              l_player_move_00113:
1407  03CC  CD 10 07    	call	_player_fire
1408  03CF  3A 00 00    	ld	a,(_player_vel_y)
1409  03D2  21 00 00    	ld	hl,_player_vel_y1
1410  03D5  96          	sub	a, (hl)
1411  03D6  E2 DB 03    	jp	PO, l_player_move_00162
1412  03D9  EE 80       	xor	a,0x80
1413  03DB              l_player_move_00162:
1414  03DB  F2 FE 03    	jp	P, l_player_move_00106
1415  03DE  21 00 00    	ld	hl,_dirs
1416  03E1  CB 56       	bit	2, (hl)
1417  03E3  28 09       	jr	Z,l_player_move_00102
1418  03E5  21 00 00    	ld	hl,_s_state
1419  03E8  7E          	ld	a,(hl)
1420  03E9  F6 08       	or	a,0x08
1421  03EB  E6 FB       	and	a,0xfb
1422  03ED  77          	ld	(hl),a
1423  03EE              l_player_move_00102:
1424  03EE  21 00 00    	ld	hl,_dirs
1425  03F1  CB 4E       	bit	1, (hl)
1426  03F3  28 09       	jr	Z,l_player_move_00106
1427  03F5  21 00 00    	ld	hl,_s_state
1428  03F8  7E          	ld	a,(hl)
1429  03F9  F6 04       	or	a,0x04
1430  03FB  E6 F7       	and	a,0xf7
1431  03FD  77          	ld	(hl),a
1432  03FE              l_player_move_00106:
1433  03FE  CD B8 0C    	call	_player_move_jump
1434  0401  7D          	ld	a, l
1435  0402  B7          	or	a, a
1436  0403  28 2E       	jr	Z,l_player_move_00115
1437  0405  3A 00 00    	ld	a,(_player_over_stair)
1438  0408  B7          	or	a, a
1439  0409  20 28       	jr	NZ,l_player_move_00115
1440  040B  2E 60       	ld	l,0x60
1441  040D  CD 44 05    	call	_player_tile
1442  0410  18 21       	jr	l_player_move_00115
1443  0412              l_player_move_00114:
1444  0412  CD 9A 05    	call	_player_move_input
1445  0415  7D          	ld	a, l
1446  0416  B7          	or	a, a
1447  0417  20 17       	jr	NZ,l_player_move_00112
1448  0419  2A 00 00    	ld	hl,(_sprite)
1449  041C  26 00       	ld	h,0x00
1450  041E  01 00 00    	ld	bc,_colint
1451  0421  09          	add	hl,bc
1452  0422  AF          	xor	a,a
1453  0423  77          	ld	(hl),a
1454  0424  2E 70       	ld	l,0x70
1455  0426  CD 44 05    	call	_player_tile
1456  0429  21 00 00    	ld	hl,_s_state
1457  042C  7E          	ld	a,(hl)
1458  042D  E6 F3       	and	a,+(0xf7&0xfb)
1459  042F  77          	ld	(hl),a
1460  0430              l_player_move_00112:
1461  0430  CD 3C 0C    	call	_player_check_floor
1462  0433              l_player_move_00115:
1463  0433  CD 00 00    	call	_spr_redraw
1464  0436  7D          	ld	a, l
1465  0437  B7          	or	a, a
1466  0438  28 03       	jr	Z,l_player_move_00118
1467  043A  CD 4D 07    	call	_player_check_map
1468  043D              l_player_move_00118:
1469  043D  3A 00 00    	ld	a,(_player_hit_lin)
1470  0440  B7          	or	a, a
1471  0441  28 03       	jr	Z,l_player_move_00120
1472  0443  CD 9F 0B    	call	_player_hit_platform_clear
1473  0446              l_player_move_00120:
1474  0446  2A 00 00    	ld	hl,(_sprite)
1475  0449  26 00       	ld	h,0x00
1476  044B  01 00 00    	ld	bc,_state
1477  044E  09          	add	hl,bc
1478  044F  3A 00 00    	ld	a,(_s_state)
1479  0452  77          	ld	(hl),a
1480  0453  2E 00       	ld	l,0x00
1481  0455  C9          	ret
1482  0456              	SECTION code_compiler
1483  0456              ;	---------------------------------
1484  0456              ; Function player_check_stairs_down
1485  0456              ; ---------------------------------
1486  0456              _player_check_stairs_down:
1487  0456  CD 00 00    	call	___sdcc_enter_ix
1488  0459  3B          	dec	sp
1489  045A  2A 00 00    	ld	hl,(_sprite)
1490  045D  26 00       	ld	h,0x00
1491  045F  5D          	ld	e,l
1492  0460  01 00 00    	ld	bc,_col
1493  0463  09          	add	hl,bc
1494  0464  46          	ld	b,(hl)
1495  0465  16 00       	ld	d,0x00
1496  0467  21 00 00    	ld	hl,_lin
1497  046A  19          	add	hl,de
1498  046B  7E          	ld	a,(hl)
1499  046C  C6 10       	add	a,0x10
1500  046E  4F          	ld	c,a
1501  046F  C5          	push	bc
1502  0470  CD 00 00    	call	_spr_calc_index
1503  0473  F1          	pop	af
1504  0474  7D          	ld	a,l
1505  0475  32 00 00    	ld	(_sprite_curr_index),a
1506  0478  4F          	ld	c,a
1507  0479  06 00       	ld	b,0x00
1508  047B  21 00 00    	ld	hl,_scr_map
1509  047E  09          	add	hl,bc
1510  047F  7E          	ld	a,(hl)
1511  0480  4F          	ld	c,a
1512  0481  D6 44       	sub	a,0x44
1513  0483  38 05       	jr	C,l_player_check_stairs_down_00105
1514  0485  3E 47       	ld	a,0x47
1515  0487  91          	sub	a, c
1516  0488  30 04       	jr	NC,l_player_check_stairs_down_00106
1517  048A              l_player_check_stairs_down_00105:
1518  048A  3E 00       	ld	a,0x00
1519  048C  18 02       	jr	l_player_check_stairs_down_00107
1520  048E              l_player_check_stairs_down_00106:
1521  048E  3E 01       	ld	a,0x01
1522  0490              l_player_check_stairs_down_00107:
1523  0490  B7          	or	a, a
1524  0491  28 05       	jr	Z,l_player_check_stairs_down_00103
1525  0493  21 00 00    	ld	hl,_player_over_stair
1526  0496  36 01       	ld	(hl),0x01
1527  0498              l_player_check_stairs_down_00103:
1528  0498  33          	inc	sp
1529  0499  DD E1       	pop	ix
1530  049B  C9          	ret
1531  049C              	SECTION code_compiler
1532  049C              ;	---------------------------------
1533  049C              ; Function player_check_stairs
1534  049C              ; ---------------------------------
1535  049C              _player_check_stairs:
1536  049C  CD 00 00    	call	___sdcc_enter_ix
1537  049F  3B          	dec	sp
1538  04A0  5D          	ld	e, l
1539  04A1  2A 00 00    	ld	hl,(_sprite)
1540  04A4  26 00       	ld	h,0x00
1541  04A6  01 00 00    	ld	bc,_col
1542  04A9  09          	add	hl,bc
1543  04AA  7E          	ld	a,(hl)
1544  04AB  83          	add	a,e
1545  04AC  57          	ld	d,a
1546  04AD  2A 00 00    	ld	hl,(_sprite)
1547  04B0  26 00       	ld	h,0x00
1548  04B2  01 00 00    	ld	bc,_lin
1549  04B5  09          	add	hl,bc
1550  04B6  46          	ld	b, (hl)
1551  04B7  D5          	push	de
1552  04B8  58          	ld	e,b
1553  04B9  D5          	push	de
1554  04BA  CD 00 00    	call	_spr_calc_index
1555  04BD  F1          	pop	af
1556  04BE  D1          	pop	de
1557  04BF  7D          	ld	a,l
1558  04C0  32 00 00    	ld	(_sprite_curr_index),a
1559  04C3  4F          	ld	c,a
1560  04C4  06 00       	ld	b,0x00
1561  04C6  21 00 00    	ld	hl,_scr_map
1562  04C9  09          	add	hl,bc
1563  04CA  7E          	ld	a,(hl)
1564  04CB  4F          	ld	c,a
1565  04CC  D6 44       	sub	a,0x44
1566  04CE  38 05       	jr	C,l_player_check_stairs_00111
1567  04D0  3E 47       	ld	a,0x47
1568  04D2  91          	sub	a, c
1569  04D3  30 04       	jr	NC,l_player_check_stairs_00112
1570  04D5              l_player_check_stairs_00111:
1571  04D5  0E 00       	ld	c,0x00
1572  04D7  18 02       	jr	l_player_check_stairs_00113
1573  04D9              l_player_check_stairs_00112:
1574  04D9  0E 01       	ld	c,0x01
1575  04DB              l_player_check_stairs_00113:
1576  04DB  3E 00       	ld	a, +((_col) & 0xFF)
1577  04DD  21 00 00    	ld	hl,_sprite
1578  04E0  86          	add	a, (hl)
1579  04E1  6F          	ld	l, a
1580  04E2  3E 00       	ld	a, +((_col) / 256)
1581  04E4  CE 00       	adc	a,0x00
1582  04E6  67          	ld	h, a
1583  04E7  7E          	ld	a, (hl)
1584  04E8  83          	add	a, e
1585  04E9  47          	ld	b, a
1586  04EA  2A 00 00    	ld	hl,(_sprite)
1587  04ED  26 00       	ld	h,0x00
1588  04EF  11 00 00    	ld	de,_lin
1589  04F2  19          	add	hl,de
1590  04F3  7E          	ld	a,(hl)
1591  04F4  C6 0F       	add	a,0x0f
1592  04F6  57          	ld	d, a
1593  04F7  C5          	push	bc
1594  04F8  4A          	ld	c, d
1595  04F9  C5          	push	bc
1596  04FA  CD 00 00    	call	_spr_calc_index
1597  04FD  F1          	pop	af
1598  04FE  C1          	pop	bc
1599  04FF  7D          	ld	a,l
1600  0500  32 00 00    	ld	(_sprite_curr_index),a
1601  0503  5F          	ld	e,a
1602  0504  16 00       	ld	d,0x00
1603  0506  21 00 00    	ld	hl,_scr_map
1604  0509  19          	add	hl,de
1605  050A  7E          	ld	a,(hl)
1606  050B  47          	ld	b,a
1607  050C  D6 44       	sub	a,0x44
1608  050E  38 05       	jr	C,l_player_check_stairs_00114
1609  0510  3E 47       	ld	a,0x47
1610  0512  90          	sub	a, b
1611  0513  30 04       	jr	NC,l_player_check_stairs_00115
1612  0515              l_player_check_stairs_00114:
1613  0515  06 00       	ld	b,0x00
1614  0517  18 02       	jr	l_player_check_stairs_00116
1615  0519              l_player_check_stairs_00115:
1616  0519  06 01       	ld	b,0x01
1617  051B              l_player_check_stairs_00116:
1618  051B  79          	ld	a, c
1619  051C  B7          	or	a,a
1620  051D  20 03       	jr	NZ,l_player_check_stairs_00105
1621  051F  B0          	or	a,b
1622  0520  28 10       	jr	Z,l_player_check_stairs_00106
1623  0522              l_player_check_stairs_00105:
1624  0522  21 00 00    	ld	hl,_player_over_stair
1625  0525  7E          	ld	a, (hl)
1626  0526  B7          	or	a, a
1627  0527  20 17       	jr	NZ,l_player_check_stairs_00109
1628  0529  36 01       	ld	(hl),0x01
1629  052B  2E 72       	ld	l,0x72
1630  052D  CD 44 05    	call	_player_tile
1631  0530  18 0E       	jr	l_player_check_stairs_00109
1632  0532              l_player_check_stairs_00106:
1633  0532  21 00 00    	ld	hl,_player_over_stair
1634  0535  7E          	ld	a, (hl)
1635  0536  B7          	or	a, a
1636  0537  28 07       	jr	Z,l_player_check_stairs_00109
1637  0539  36 00       	ld	(hl),0x00
1638  053B  2E 60       	ld	l,0x60
1639  053D  CD 44 05    	call	_player_tile
1640  0540              l_player_check_stairs_00109:
1641  0540  33          	inc	sp
1642  0541  DD E1       	pop	ix
1643  0543  C9          	ret
1644  0544              	SECTION code_compiler
1645  0544              ;	---------------------------------
1646  0544              ; Function player_tile
1647  0544              ; ---------------------------------
1648  0544              _player_tile:
1649  0544  45          	ld	b, l
1650  0545  3A 00 00    	ld	a,(_player_over_stair)
1651  0548  B7          	or	a, a
1652  0549  28 0D       	jr	Z,l_player_tile_00105
1653  054B  2A 00 00    	ld	hl,(_sprite)
1654  054E  26 00       	ld	h,0x00
1655  0550  01 00 00    	ld	bc,_tile
1656  0553  09          	add	hl,bc
1657  0554  36 72       	ld	(hl),0x72
1658  0556  18 41       	jr	l_player_tile_00107
1659  0558              l_player_tile_00105:
1660  0558  78          	ld	a, b
1661  0559  D6 70       	sub	a,0x70
1662  055B  20 1F       	jr	NZ,l_player_tile_00102
1663  055D  2A 00 00    	ld	hl,(_sprite)
1664  0560  26 00       	ld	h,0x00
1665  0562  11 00 00    	ld	de,_tile
1666  0565  19          	add	hl,de
1667  0566  E5          	push	hl
1668  0567  3E 01       	ld	a,0x01
1669  0569  21 00 00    	ld	hl,_sprite
1670  056C  F5          	push	af
1671  056D  33          	inc	sp
1672  056E  7E          	ld	a, (hl)
1673  056F  48          	ld	c,b
1674  0570  47          	ld	b,a
1675  0571  C5          	push	bc
1676  0572  CD 00 00    	call	_spr_tile_dir
1677  0575  F1          	pop	af
1678  0576  33          	inc	sp
1679  0577  D1          	pop	de
1680  0578  7D          	ld	a,l
1681  0579  12          	ld	(de), a
1682  057A  18 1D       	jr	l_player_tile_00107
1683  057C              l_player_tile_00102:
1684  057C  2A 00 00    	ld	hl,(_sprite)
1685  057F  26 00       	ld	h,0x00
1686  0581  11 00 00    	ld	de,_tile
1687  0584  19          	add	hl,de
1688  0585  E5          	push	hl
1689  0586  3E 08       	ld	a,0x08
1690  0588  21 00 00    	ld	hl,_sprite
1691  058B  F5          	push	af
1692  058C  33          	inc	sp
1693  058D  7E          	ld	a, (hl)
1694  058E  48          	ld	c,b
1695  058F  47          	ld	b,a
1696  0590  C5          	push	bc
1697  0591  CD 00 00    	call	_spr_tile_dir
1698  0594  F1          	pop	af
1699  0595  33          	inc	sp
1700  0596  D1          	pop	de
1701  0597  7D          	ld	a,l
1702  0598  12          	ld	(de), a
1703  0599              l_player_tile_00107:
1704  0599  C9          	ret
1705  059A              	SECTION code_compiler
1706  059A              ;	---------------------------------
1707  059A              ; Function player_move_input
1708  059A              ; ---------------------------------
1709  059A              _player_move_input:
1710  059A  CD BD 00    	call	_player_check_input
1711  059D  7D          	ld	a, l
1712  059E  B7          	or	a, a
1713  059F  CA 0D 07    	jp	Z, l_player_move_input_00136
1714  05A2  CD 10 07    	call	_player_fire
1715  05A5  7D          	ld	a, l
1716  05A6  B7          	or	a, a
1717  05A7  28 0A       	jr	Z,l_player_move_input_00102
1718  05A9  21 00 00    	ld	hl,_dirs
1719  05AC  36 00       	ld	(hl),0x00
1720  05AE  2E 00       	ld	l,0x00
1721  05B0  C3 0F 07    	jp	l_player_move_input_00137
1722  05B3              l_player_move_input_00102:
1723  05B3  21 00 00    	ld	hl,_dirs
1724  05B6  CB 7E       	bit	7, (hl)
1725  05B8  28 67       	jr	Z,l_player_move_input_00106
1726  05BA  21 00 00    	ld	hl,_player_vel_inc
1727  05BD  36 01       	ld	(hl),0x01
1728  05BF  CD 00 00    	call	_ay_is_playing
1729  05C2  7D          	ld	a, l
1730  05C3  D6 03       	sub	a,0x03
1731  05C5  28 06       	jr	Z,l_player_move_input_00104
1732  05C7  21 00 00    	ld	hl,_ay_effect_03
1733  05CA  CD 00 00    	call	_ay_fx_play
1734  05CD              l_player_move_input_00104:
1735  05CD  21 00 00    	ld	hl,_player_over_stair
1736  05D0  36 00       	ld	(hl),0x00
1737  05D2  CD 00 00    	call	_sound_jump
1738  05D5  21 00 00    	ld	hl,_s_state
1739  05D8  7E          	ld	a,(hl)
1740  05D9  F6 01       	or	a,0x01
1741  05DB  E6 FD       	and	a,0xfd
1742  05DD  77          	ld	(hl),a
1743  05DE  2A 00 00    	ld	hl,(_sprite)
1744  05E1  26 00       	ld	h,0x00
1745  05E3  01 00 00    	ld	bc,_jump_lin
1746  05E6  09          	add	hl,bc
1747  05E7  4D          	ld	c,l
1748  05E8  44          	ld	b,h
1749  05E9  2A 00 00    	ld	hl,(_sprite)
1750  05EC  26 00       	ld	h,0x00
1751  05EE  11 00 00    	ld	de,_lin
1752  05F1  19          	add	hl,de
1753  05F2  7E          	ld	a,(hl)
1754  05F3  02          	ld	(bc),a
1755  05F4  2A 00 00    	ld	hl,(_sprite)
1756  05F7  26 00       	ld	h,0x00
1757  05F9  01 00 00    	ld	bc,_state
1758  05FC  09          	add	hl,bc
1759  05FD  3A 00 00    	ld	a,(_s_state)
1760  0600  77          	ld	(hl),a
1761  0601  2E 64       	ld	l,0x64
1762  0603  CD 44 05    	call	_player_tile
1763  0606  2A 00 00    	ld	hl,(_sprite)
1764  0609  26 00       	ld	h,0x00
1765  060B  01 00 00    	ld	bc,_sprite_speed_alt
1766  060E  09          	add	hl,bc
1767  060F  36 02       	ld	(hl),0x02
1768  0611  21 00 00    	ld	hl,_player_slide
1769  0614  36 00       	ld	(hl),0x00
1770  0616  3A 00 00    	ld	a,(_player_vel_y0)
1771  0619  32 00 00    	ld	(_player_vel_y),a
1772  061C  2E 01       	ld	l,0x01
1773  061E  C3 0F 07    	jp	l_player_move_input_00137
1774  0621              l_player_move_input_00106:
1775  0621  21 00 00    	ld	hl,_dirs
1776  0624  CB 5E       	bit	3, (hl)
1777  0626  28 33       	jr	Z,l_player_move_input_00110
1778  0628  21 00 00    	ld	hl,_s_state
1779  062B  7E          	ld	a,(hl)
1780  062C  F6 04       	or	a,0x04
1781  062E  E6 F7       	and	a,0xf7
1782  0630  77          	ld	(hl),a
1783  0631  01 00 00    	ld	bc,_state_a+0
1784  0634  79          	ld	a, c
1785  0635  21 00 00    	ld	hl,_sprite
1786  0638  86          	add	a, (hl)
1787  0639  5F          	ld	e, a
1788  063A  78          	ld	a, b
1789  063B  CE 00       	adc	a,0x00
1790  063D  57          	ld	d, a
1791  063E  1A          	ld	a, (de)
1792  063F  F6 10       	or	a,0x10
1793  0641  12          	ld	(de), a
1794  0642  79          	ld	a, c
1795  0643  86          	add	a, (hl)
1796  0644  4F          	ld	c, a
1797  0645  78          	ld	a, b
1798  0646  CE 00       	adc	a,0x00
1799  0648  47          	ld	b, a
1800  0649  0A          	ld	a, (bc)
1801  064A  E6 F7       	and	a,0xf7
1802  064C  02          	ld	(bc), a
1803  064D  3A 00 00    	ld	a,(_player_over_stair)
1804  0650  B7          	or	a, a
1805  0651  28 05       	jr	Z,l_player_move_input_00108
1806  0653  2E 00       	ld	l,0x00
1807  0655  CD 9C 04    	call	_player_check_stairs
1808  0658              l_player_move_input_00108:
1809  0658  CD 00 00    	call	_spr_move_horizontal
1810  065B              l_player_move_input_00110:
1811  065B  21 00 00    	ld	hl,_dirs
1812  065E  CB 56       	bit	2, (hl)
1813  0660  28 33       	jr	Z,l_player_move_input_00114
1814  0662  21 00 00    	ld	hl,_s_state
1815  0665  7E          	ld	a,(hl)
1816  0666  F6 08       	or	a,0x08
1817  0668  E6 FB       	and	a,0xfb
1818  066A  77          	ld	(hl),a
1819  066B  01 00 00    	ld	bc,_state_a+0
1820  066E  79          	ld	a, c
1821  066F  21 00 00    	ld	hl,_sprite
1822  0672  86          	add	a, (hl)
1823  0673  5F          	ld	e, a
1824  0674  78          	ld	a, b
1825  0675  CE 00       	adc	a,0x00
1826  0677  57          	ld	d, a
1827  0678  1A          	ld	a, (de)
1828  0679  F6 08       	or	a,0x08
1829  067B  12          	ld	(de), a
1830  067C  79          	ld	a, c
1831  067D  86          	add	a, (hl)
1832  067E  4F          	ld	c, a
1833  067F  78          	ld	a, b
1834  0680  CE 00       	adc	a,0x00
1835  0682  47          	ld	b, a
1836  0683  0A          	ld	a, (bc)
1837  0684  E6 EF       	and	a,0xef
1838  0686  02          	ld	(bc), a
1839  0687  3A 00 00    	ld	a,(_player_over_stair)
1840  068A  B7          	or	a, a
1841  068B  28 05       	jr	Z,l_player_move_input_00112
1842  068D  2E 00       	ld	l,0x00
1843  068F  CD 9C 04    	call	_player_check_stairs
1844  0692              l_player_move_input_00112:
1845  0692  CD 00 00    	call	_spr_move_horizontal
1846  0695              l_player_move_input_00114:
1847  0695  21 00 00    	ld	hl,_dirs
1848  0698  CB 46       	bit	0, (hl)
1849  069A  28 2B       	jr	Z,l_player_move_input_00124
1850  069C  2E 00       	ld	l,0x00
1851  069E  CD 9C 04    	call	_player_check_stairs
1852  06A1  3A 00 00    	ld	a,(_player_over_stair)
1853  06A4  B7          	or	a, a
1854  06A5  28 0E       	jr	Z,l_player_move_input_00121
1855  06A7  CD 00 00    	call	_spr_move_up
1856  06AA  7D          	ld	a, l
1857  06AB  B7          	or	a, a
1858  06AC  28 19       	jr	Z,l_player_move_input_00124
1859  06AE  21 00 00    	ld	hl,_player_over_stair
1860  06B1  36 00       	ld	(hl),0x00
1861  06B3  18 12       	jr	l_player_move_input_00124
1862  06B5              l_player_move_input_00121:
1863  06B5  21 00 00    	ld	hl,_dirs
1864  06B8  CB 5E       	bit	3, (hl)
1865  06BA  20 0B       	jr	NZ,l_player_move_input_00124
1866  06BC  21 00 00    	ld	hl,_dirs
1867  06BF  CB 56       	bit	2, (hl)
1868  06C1  20 04       	jr	NZ,l_player_move_input_00124
1869  06C3  2E 00       	ld	l,0x00
1870  06C5  18 48       	jr	l_player_move_input_00137
1871  06C7              l_player_move_input_00124:
1872  06C7  21 00 00    	ld	hl,_dirs
1873  06CA  CB 4E       	bit	1, (hl)
1874  06CC  28 29       	jr	Z,l_player_move_input_00134
1875  06CE  CD 56 04    	call	_player_check_stairs_down
1876  06D1  3A 00 00    	ld	a,(_player_over_stair)
1877  06D4  B7          	or	a, a
1878  06D5  28 0E       	jr	Z,l_player_move_input_00131
1879  06D7  CD 00 00    	call	_spr_move_down
1880  06DA  7D          	ld	a, l
1881  06DB  B7          	or	a, a
1882  06DC  28 19       	jr	Z,l_player_move_input_00134
1883  06DE  21 00 00    	ld	hl,_player_over_stair
1884  06E1  36 00       	ld	(hl),0x00
1885  06E3  18 12       	jr	l_player_move_input_00134
1886  06E5              l_player_move_input_00131:
1887  06E5  21 00 00    	ld	hl,_dirs
1888  06E8  CB 5E       	bit	3, (hl)
1889  06EA  20 0B       	jr	NZ,l_player_move_input_00134
1890  06EC  21 00 00    	ld	hl,_dirs
1891  06EF  CB 56       	bit	2, (hl)
1892  06F1  20 04       	jr	NZ,l_player_move_input_00134
1893  06F3  2E 00       	ld	l,0x00
1894  06F5  18 18       	jr	l_player_move_input_00137
1895  06F7              l_player_move_input_00134:
1896  06F7  2A 00 00    	ld	hl,(_sprite)
1897  06FA  26 00       	ld	h,0x00
1898  06FC  01 00 00    	ld	bc,_state
1899  06FF  09          	add	hl,bc
1900  0700  3A 00 00    	ld	a,(_s_state)
1901  0703  77          	ld	(hl),a
1902  0704  2E 60       	ld	l,0x60
1903  0706  CD 44 05    	call	_player_tile
1904  0709  2E 01       	ld	l,0x01
1905  070B  18 02       	jr	l_player_move_input_00137
1906  070D              l_player_move_input_00136:
1907  070D  2E 00       	ld	l,0x00
1908  070F              l_player_move_input_00137:
1909  070F  C9          	ret
1910  0710              	SECTION code_compiler
1911  0710              ;	---------------------------------
1912  0710              ; Function player_fire
1913  0710              ; ---------------------------------
1914  0710              _player_fire:
1915  0710  21 00 00    	ld	hl,_dirs
1916  0713  CB 7E       	bit	7, (hl)
1917  0715  28 33       	jr	Z,l_player_fire_00108
1918  0717  21 00 00    	ld	hl,_dirs
1919  071A  CB 4E       	bit	1, (hl)
1920  071C  28 2C       	jr	Z,l_player_fire_00108
1921  071E  21 00 00    	ld	hl,_player_mana
1922  0721  7E          	ld	a, (hl)
1923  0722  B7          	or	a, a
1924  0723  28 21       	jr	Z,l_player_fire_00105
1925  0725  3A 07 00    	ld	a,(_bullet_col + 0x0007)
1926  0728  3C          	inc	a
1927  0729  20 1B       	jr	NZ,l_player_fire_00105
1928  072B  3E 05       	ld	a,0x05
1929  072D  96          	sub	a, (hl)
1930  072E  30 06       	jr	NC,l_player_fire_00102
1931  0730  7E          	ld	a, (hl)
1932  0731  C6 FB       	add	a,0xfb
1933  0733  77          	ld	(hl), a
1934  0734  18 05       	jr	l_player_fire_00103
1935  0736              l_player_fire_00102:
1936  0736  21 00 00    	ld	hl,_player_mana
1937  0739  36 00       	ld	(hl),0x00
1938  073B              l_player_fire_00103:
1939  073B  CD 00 00    	call	_game_update_stats
1940  073E  21 07 78    	ld	hl,0x7807
1941  0741  E5          	push	hl
1942  0742  CD 00 00    	call	_game_shoot_fire
1943  0745  F1          	pop	af
1944  0746              l_player_fire_00105:
1945  0746  2E 01       	ld	l,0x01
1946  0748  18 02       	jr	l_player_fire_00110
1947  074A              l_player_fire_00108:
1948  074A  2E 00       	ld	l,0x00
1949  074C              l_player_fire_00110:
1950  074C  C9          	ret
1951  074D              	SECTION code_compiler
1952  074D              ;	---------------------------------
1953  074D              ; Function player_check_map
1954  074D              ; ---------------------------------
1955  074D              _player_check_map:
1956  074D  2A 00 00    	ld	hl,(_sprite)
1957  0750  26 00       	ld	h,0x00
1958  0752  5D          	ld	e,l
1959  0753  01 00 00    	ld	bc,_col
1960  0756  09          	add	hl,bc
1961  0757  46          	ld	b,(hl)
1962  0758  16 00       	ld	d,0x00
1963  075A  21 00 00    	ld	hl,_lin
1964  075D  19          	add	hl,de
1965  075E  4E          	ld	c, (hl)
1966  075F  C5          	push	bc
1967  0760  CD 00 00    	call	_spr_calc_index
1968  0763  F1          	pop	af
1969  0764  7D          	ld	a,l
1970  0765  32 00 00    	ld	(_sprite_curr_index),a
1971  0768  2A 00 00    	ld	hl,(_sprite)
1972  076B  26 00       	ld	h,0x00
1973  076D  01 00 00    	ld	bc,_col
1974  0770  09          	add	hl,bc
1975  0771  4E          	ld	c, (hl)
1976  0772  3A 00 00    	ld	a,(_sprite)
1977  0775  5F          	ld	e,a
1978  0776  16 00       	ld	d,0x00
1979  0778  21 00 00    	ld	hl,_lin
1980  077B  19          	add	hl,de
1981  077C  7E          	ld	a,(hl)
1982  077D  E6 0F       	and	a,0x0f
1983  077F  CB 41       	bit	0, c
1984  0781  20 17       	jr	NZ,l_player_check_map_00108
1985  0783  B7          	or	a, a
1986  0784  20 05       	jr	NZ,l_player_check_map_00102
1987  0786  CD C5 07    	call	_player_pick_item
1988  0789  18 39       	jr	l_player_check_map_00110
1989  078B              l_player_check_map_00102:
1990  078B  CD C5 07    	call	_player_pick_item
1991  078E  21 00 00    	ld	hl,_sprite_curr_index
1992  0791  7E          	ld	a, (hl)
1993  0792  C6 10       	add	a,0x10
1994  0794  77          	ld	(hl), a
1995  0795  CD C5 07    	call	_player_pick_item
1996  0798  18 2A       	jr	l_player_check_map_00110
1997  079A              l_player_check_map_00108:
1998  079A  B7          	or	a, a
1999  079B  20 0C       	jr	NZ,l_player_check_map_00105
2000  079D  CD C5 07    	call	_player_pick_item
2001  07A0  21 00 00    	ld	hl,_sprite_curr_index
2002  07A3  34          	inc	(hl)
2003  07A4  CD C5 07    	call	_player_pick_item
2004  07A7  18 1B       	jr	l_player_check_map_00110
2005  07A9              l_player_check_map_00105:
2006  07A9  CD C5 07    	call	_player_pick_item
2007  07AC  21 00 00    	ld	hl,_sprite_curr_index
2008  07AF  34          	inc	(hl)
2009  07B0  CD C5 07    	call	_player_pick_item
2010  07B3  21 00 00    	ld	hl,_sprite_curr_index
2011  07B6  7E          	ld	a, (hl)
2012  07B7  C6 0F       	add	a,0x0f
2013  07B9  77          	ld	(hl), a
2014  07BA  CD C5 07    	call	_player_pick_item
2015  07BD  21 00 00    	ld	hl,_sprite_curr_index
2016  07C0  34          	inc	(hl)
2017  07C1  CD C5 07    	call	_player_pick_item
2018  07C4              l_player_check_map_00110:
2019  07C4  C9          	ret
2020  07C5              	SECTION code_compiler
2021  07C5              ;	---------------------------------
2022  07C5              ; Function player_pick_item
2023  07C5              ; ---------------------------------
2024  07C5              _player_pick_item:
2025  07C5  CD 00 00    	call	___sdcc_enter_ix
2026  07C8  3B          	dec	sp
2027  07C9  2A 00 00    	ld	hl,(_sprite_curr_index)
2028  07CC  26 00       	ld	h,0x00
2029  07CE  01 00 00    	ld	bc,_scr_map
2030  07D1  09          	add	hl,bc
2031  07D2  7E          	ld	a,(hl)
2032  07D3  4F          	ld	c,a
2033  07D4  D6 24       	sub	a,0x24
2034  07D6  3E 00       	ld	a,0x00
2035  07D8  17          	rla
2036  07D9  DD 77 FF    	ld	(ix-1),a
2037  07DC  CB 47       	bit	0,a
2038  07DE  C2 59 09    	jp	NZ, l_player_pick_item_00117
2039  07E1  3E 2F       	ld	a,0x2f
2040  07E3  91          	sub	a, c
2041  07E4  3E 00       	ld	a,0x00
2042  07E6  17          	rla
2043  07E7  CB 47       	bit	0,a
2044  07E9  C2 59 09    	jp	NZ,l_player_pick_item_00117
2045  07EC  47          	ld	b,a
2046  07ED  CD 00 00    	call	_ay_reset
2047  07F0  21 00 00    	ld	hl,_ay_effect_10
2048  07F3  CD 00 00    	call	_ay_fx_play
2049  07F6  C5          	push	bc
2050  07F7  CD 00 00    	call	_sound_coin
2051  07FA  C1          	pop	bc
2052  07FB  2A 00 00    	ld	hl,(_sprite_curr_index)
2053  07FE  26 00       	ld	h,0x00
2054  0800  11 00 00    	ld	de,_scr_map
2055  0803  19          	add	hl,de
2056  0804  AF          	xor	a,a
2057  0805  77          	ld	(hl),a
2058  0806  3A 00 00    	ld	a,(_sprite_curr_index)
2059  0809  5F          	ld	e,a
2060  080A  16 00       	ld	d,0x00
2061  080C  C5          	push	bc
2062  080D  D5          	push	de
2063  080E  CD 00 00    	call	_game_obj_set
2064  0811  F1          	pop	af
2065  0812  C1          	pop	bc
2066  0813  3A 00 00    	ld	a,(_sprite_curr_index)
2067  0816  07          	rlca
2068  0817  07          	rlca
2069  0818  07          	rlca
2070  0819  07          	rlca
2071  081A  E6 0F       	and	a,0x0f
2072  081C  07          	rlca
2073  081D  07          	rlca
2074  081E  07          	rlca
2075  081F  07          	rlca
2076  0820  E6 F0       	and	a,0xf0
2077  0822  32 00 00    	ld	(_s_lin1),a
2078  0825  3A 00 00    	ld	a,(_sprite_curr_index)
2079  0828  E6 0F       	and	a,0x0f
2080  082A  87          	add	a, a
2081  082B  32 00 00    	ld	(_s_col1),a
2082  082E  C5          	push	bc
2083  082F  21 00 00    	ld	hl,0x0000
2084  0832  E5          	push	hl
2085  0833  21 84 03    	ld	hl,0x0384
2086  0836  E5          	push	hl
2087  0837  F5          	push	af
2088  0838  33          	inc	sp
2089  0839  3A 00 00    	ld	a,(_s_lin1)
2090  083C  F5          	push	af
2091  083D  33          	inc	sp
2092  083E  CD 00 00    	call	_spr_add_anim
2093  0841  F1          	pop	af
2094  0842  F1          	pop	af
2095  0843  F1          	pop	af
2096  0844  C1          	pop	bc
2097  0845  DD CB FF 46 	bit	0,(ix-1)
2098  0849  C2 59 09    	jp	NZ, l_player_pick_item_00117
2099  084C  CB 40       	bit	0, b
2100  084E  C2 59 09    	jp	NZ, l_player_pick_item_00117
2101  0851  79          	ld	a, c
2102  0852  C6 DC       	add	a,0xdc
2103  0854  DD 77 FF    	ld	(ix-1),a
2104  0857  21 00 00    	ld	hl,_player_str
2105  085A  56          	ld	d, (hl)
2106  085B  14          	inc	d
2107  085C  3A 00 00    	ld	a,(_player_max_vita)
2108  085F  C6 0A       	add	a,0x0a
2109  0861  5F          	ld	e, a
2110  0862  21 00 00    	ld	hl,_player_int
2111  0865  46          	ld	b, (hl)
2112  0866  04          	inc	b
2113  0867  3A 00 00    	ld	a,(_player_max_mana)
2114  086A  C6 0A       	add	a,0x0a
2115  086C  4F          	ld	c, a
2116  086D  D5          	push	de
2117  086E  DD 5E FF    	ld	e,(ix-1)
2118  0871  16 00       	ld	d,0x00
2119  0873  21 7B 08    	ld	hl,l_player_pick_item_00135
2120  0876  19          	add	hl, de
2121  0877  19          	add	hl, de
2122  0878  19          	add	hl, de
2123  0879  D1          	pop	de
2124  087A  E9          	jp	(hl)
2125  087B              l_player_pick_item_00135:
2126  087B  C3 9F 08    	jp	l_player_pick_item_00101
2127  087E  C3 B7 08    	jp	l_player_pick_item_00102
2128  0881  C3 CF 08    	jp	l_player_pick_item_00103
2129  0884  C3 E6 08    	jp	l_player_pick_item_00104
2130  0887  C3 FD 08    	jp	l_player_pick_item_00105
2131  088A  C3 0D 09    	jp	l_player_pick_item_00107
2132  088D  C3 1A 09    	jp	l_player_pick_item_00108
2133  0890  C3 27 09    	jp	l_player_pick_item_00109
2134  0893  C3 34 09    	jp	l_player_pick_item_00110
2135  0896  C3 41 09    	jp	l_player_pick_item_00111
2136  0899  C3 4E 09    	jp	l_player_pick_item_00112
2137  089C  C3 05 09    	jp	l_player_pick_item_00106
2138  089F              l_player_pick_item_00101:
2139  089F  21 00 00    	ld	hl,_player_keys
2140  08A2  36 01       	ld	(hl),0x01
2141  08A4  21 00 00    	ld	hl,_screen_ink
2142  08A7  36 07       	ld	(hl),0x07
2143  08A9  21 00 00    	ld	hl,___str_0
2144  08AC  E5          	push	hl
2145  08AD  21 14 14    	ld	hl,0x1414
2146  08B0  E5          	push	hl
2147  08B1  CD 00 00    	call	_zx_print_str
2148  08B4  C3 59 09    	jp	l_player_pick_item_00117
2149  08B7              l_player_pick_item_00102:
2150  08B7  21 01 00    	ld	hl, +(_player_keys + 0x0001)
2151  08BA  36 01       	ld	(hl),0x01
2152  08BC  21 00 00    	ld	hl,_screen_ink
2153  08BF  36 02       	ld	(hl),0x02
2154  08C1  21 00 00    	ld	hl,___str_0
2155  08C4  E5          	push	hl
2156  08C5  21 14 15    	ld	hl,0x1514
2157  08C8  E5          	push	hl
2158  08C9  CD 00 00    	call	_zx_print_str
2159  08CC  C3 59 09    	jp	l_player_pick_item_00117
2160  08CF              l_player_pick_item_00103:
2161  08CF  21 02 00    	ld	hl, +(_player_keys + 0x0002)
2162  08D2  36 01       	ld	(hl),0x01
2163  08D4  21 00 00    	ld	hl,_screen_ink
2164  08D7  36 04       	ld	(hl),0x04
2165  08D9  21 00 00    	ld	hl,___str_0
2166  08DC  E5          	push	hl
2167  08DD  21 14 16    	ld	hl,0x1614
2168  08E0  E5          	push	hl
2169  08E1  CD 00 00    	call	_zx_print_str
2170  08E4  18 73       	jr	l_player_pick_item_00117
2171  08E6              l_player_pick_item_00104:
2172  08E6  21 03 00    	ld	hl, +(_player_keys + 0x0003)
2173  08E9  36 01       	ld	(hl),0x01
2174  08EB  21 00 00    	ld	hl,_screen_ink
2175  08EE  36 05       	ld	(hl),0x05
2176  08F0  21 00 00    	ld	hl,___str_0
2177  08F3  E5          	push	hl
2178  08F4  21 14 17    	ld	hl,0x1714
2179  08F7  E5          	push	hl
2180  08F8  CD 00 00    	call	_zx_print_str
2181  08FB  18 5C       	jr	l_player_pick_item_00117
2182  08FD              l_player_pick_item_00105:
2183  08FD  21 01 00    	ld	hl,0x0001
2184  0900  CD D8 0B    	call	_player_score_add
2185  0903  18 54       	jr	l_player_pick_item_00117
2186  0905              l_player_pick_item_00106:
2187  0905  21 0A 00    	ld	hl,0x000a
2188  0908  CD D8 0B    	call	_player_score_add
2189  090B  18 4C       	jr	l_player_pick_item_00117
2190  090D              l_player_pick_item_00107:
2191  090D  21 00 00    	ld	hl,_player_str
2192  0910  72          	ld	(hl), d
2193  0911  21 00 00    	ld	hl,_player_max_vita
2194  0914  73          	ld	(hl), e
2195  0915  CD 00 00    	call	_game_update_stats
2196  0918  18 3F       	jr	l_player_pick_item_00117
2197  091A              l_player_pick_item_00108:
2198  091A  21 00 00    	ld	hl,_player_str
2199  091D  72          	ld	(hl), d
2200  091E  21 00 00    	ld	hl,_player_max_vita
2201  0921  73          	ld	(hl), e
2202  0922  CD 00 00    	call	_game_update_stats
2203  0925  18 32       	jr	l_player_pick_item_00117
2204  0927              l_player_pick_item_00109:
2205  0927  21 00 00    	ld	hl,_player_str
2206  092A  72          	ld	(hl), d
2207  092B  21 00 00    	ld	hl,_player_max_vita
2208  092E  73          	ld	(hl), e
2209  092F  CD 00 00    	call	_game_update_stats
2210  0932  18 25       	jr	l_player_pick_item_00117
2211  0934              l_player_pick_item_00110:
2212  0934  21 00 00    	ld	hl,_player_int
2213  0937  70          	ld	(hl), b
2214  0938  21 00 00    	ld	hl,_player_max_mana
2215  093B  71          	ld	(hl), c
2216  093C  CD 00 00    	call	_game_update_stats
2217  093F  18 18       	jr	l_player_pick_item_00117
2218  0941              l_player_pick_item_00111:
2219  0941  21 00 00    	ld	hl,_player_int
2220  0944  70          	ld	(hl), b
2221  0945  21 00 00    	ld	hl,_player_max_mana
2222  0948  71          	ld	(hl), c
2223  0949  CD 00 00    	call	_game_update_stats
2224  094C  18 0B       	jr	l_player_pick_item_00117
2225  094E              l_player_pick_item_00112:
2226  094E  21 00 00    	ld	hl,_player_int
2227  0951  70          	ld	(hl), b
2228  0952  21 00 00    	ld	hl,_player_max_mana
2229  0955  71          	ld	(hl), c
2230  0956  CD 00 00    	call	_game_update_stats
2231  0959              l_player_pick_item_00117:
2232  0959  33          	inc	sp
2233  095A  DD E1       	pop	ix
2234  095C  C9          	ret
2235  095D              	SECTION rodata_compiler
2236  0000              ___str_0:
2237  0000  5D          	DEFM "]"
2238  0001  00          	DEFB 0x00
2239  0002              	SECTION code_compiler
2240  095D              ;	---------------------------------
2241  095D              ; Function player_hit_platform
2242  095D              ; ---------------------------------
2243  095D              _player_hit_platform:
2244  095D  3A 00 00    	ld	a,(_player_hit_lin)
2245  0960  B7          	or	a, a
2246  0961  C2 9C 0B    	jp	NZ, l_player_hit_platform_00137
2247  0964  2A 00 00    	ld	hl,(_sprite)
2248  0967  26 00       	ld	h,0x00
2249  0969  01 00 00    	ld	bc,_lin
2250  096C  09          	add	hl,bc
2251  096D  4E          	ld	c,(hl)
2252  096E  3E 10       	ld	a,0x10
2253  0970  91          	sub	a, c
2254  0971  D2 9C 0B    	jp	NC, l_player_hit_platform_00137
2255  0974  01 00 00    	ld	bc,_scr_map
2256  0977  2A 00 00    	ld	hl,(_index1)
2257  097A  09          	add	hl,bc
2258  097B  7E          	ld	a,(hl)
2259  097C  D6 45       	sub	a,0x45
2260  097E  DA 9C 0B    	jp	C, l_player_hit_platform_00137
2261  0981  01 00 00    	ld	bc,_spr_timer+0
2262  0984  2A 00 00    	ld	hl,(_sprite)
2263  0987  26 00       	ld	h,0x00
2264  0989  29          	add	hl, hl
2265  098A  09          	add	hl,bc
2266  098B  ED 5B 00 00 	ld	de,(_curr_time)
2267  098F  73          	ld	(hl),e
2268  0990  23          	inc	hl
2269  0991  72          	ld	(hl),d
2270  0992  2A 00 00    	ld	hl,(_sprite)
2271  0995  26 00       	ld	h,0x00
2272  0997  01 00 00    	ld	bc,_lin
2273  099A  09          	add	hl,bc
2274  099B  4E          	ld	c,(hl)
2275  099C  06 00       	ld	b,0x00
2276  099E  79          	ld	a, c
2277  099F  C6 F8       	add	a,0xf8
2278  09A1  4F          	ld	c, a
2279  09A2  78          	ld	a, b
2280  09A3  CE FF       	adc	a,0xff
2281  09A5  5F          	ld	e, a
2282  09A6  06 04       	ld	b,0x04
2283  09A8              l_player_hit_platform_00226:
2284  09A8  CB 2B       	sra	e
2285  09AA  CB 19       	rr	c
2286  09AC  10 FA       	djnz	l_player_hit_platform_00226
2287  09AE  79          	ld	a, c
2288  09AF  07          	rlca
2289  09B0  07          	rlca
2290  09B1  07          	rlca
2291  09B2  07          	rlca
2292  09B3  E6 F0       	and	a,0xf0
2293  09B5  C6 08       	add	a,0x08
2294  09B7  32 00 00    	ld	(_player_hit_lin),a
2295  09BA  2A 00 00    	ld	hl,(_sprite)
2296  09BD  26 00       	ld	h,0x00
2297  09BF  01 00 00    	ld	bc,_col
2298  09C2  09          	add	hl,bc
2299  09C3  4E          	ld	c,(hl)
2300  09C4  CB 41       	bit	0,c
2301  09C6  20 06       	jr	NZ,l_player_hit_platform_00111
2302  09C8  21 00 00    	ld	hl,_player_hit_col
2303  09CB  71          	ld	(hl), c
2304  09CC  18 33       	jr	l_player_hit_platform_00112
2305  09CE              l_player_hit_platform_00111:
2306  09CE  2A 00 00    	ld	hl,(_sprite)
2307  09D1  26 00       	ld	h,0x00
2308  09D3  11 00 00    	ld	de,_state
2309  09D6  19          	add	hl,de
2310  09D7  5E          	ld	e, (hl)
2311  09D8  41          	ld	b, c
2312  09D9  04          	inc	b
2313  09DA  0D          	dec	c
2314  09DB  CB 5B       	bit	3, e
2315  09DD  28 12       	jr	Z,l_player_hit_platform_00108
2316  09DF  3A 00 00    	ld	a,(_g_player_hit_right)
2317  09E2  B7          	or	a, a
2318  09E3  28 06       	jr	Z,l_player_hit_platform_00102
2319  09E5  21 00 00    	ld	hl,_player_hit_col
2320  09E8  70          	ld	(hl), b
2321  09E9  18 16       	jr	l_player_hit_platform_00112
2322  09EB              l_player_hit_platform_00102:
2323  09EB  21 00 00    	ld	hl,_player_hit_col
2324  09EE  71          	ld	(hl), c
2325  09EF  18 10       	jr	l_player_hit_platform_00112
2326  09F1              l_player_hit_platform_00108:
2327  09F1  3A 00 00    	ld	a,(_g_player_hit_left)
2328  09F4  B7          	or	a, a
2329  09F5  28 06       	jr	Z,l_player_hit_platform_00105
2330  09F7  21 00 00    	ld	hl,_player_hit_col
2331  09FA  71          	ld	(hl), c
2332  09FB  18 04       	jr	l_player_hit_platform_00112
2333  09FD              l_player_hit_platform_00105:
2334  09FD  21 00 00    	ld	hl,_player_hit_col
2335  0A00  70          	ld	(hl), b
2336  0A01              l_player_hit_platform_00112:
2337  0A01  01 00 00    	ld	bc,_scr_map
2338  0A04  2A 00 00    	ld	hl,(_index1)
2339  0A07  09          	add	hl,bc
2340  0A08  7E          	ld	a,(hl)
2341  0A09  FE 5C       	cp	a,0x5c
2342  0A0B  28 05       	jr	Z,l_player_hit_platform_00133
2343  0A0D  D6 5D       	sub	a,0x5d
2344  0A0F  C2 90 0B    	jp	NZ,l_player_hit_platform_00134
2345  0A12              l_player_hit_platform_00133:
2346  0A12  21 00 00    	ld	hl,_tmp0
2347  0A15  36 00       	ld	(hl),0x00
2348  0A17              l_player_hit_platform_00130:
2349  0A17  21 00 00    	ld	hl,_tmp0
2350  0A1A  7E          	ld	a, (hl)
2351  0A1B  D6 07       	sub	a,0x07
2352  0A1D  D2 90 0B    	jp	NC, l_player_hit_platform_00134
2353  0A20  4E          	ld	c,(hl)
2354  0A21  06 00       	ld	b,0x00
2355  0A23  21 00 00    	ld	hl,_mush_index
2356  0A26  09          	add	hl,bc
2357  0A27  4E          	ld	c, (hl)
2358  0A28  06 00       	ld	b,0x00
2359  0A2A  2A 00 00    	ld	hl,(_index1)
2360  0A2D  AF          	xor	a,a
2361  0A2E  ED 42       	sbc	hl,bc
2362  0A30  C2 89 0B    	jp	NZ,l_player_hit_platform_00129
2363  0A33  2A 00 00    	ld	hl,(_sprite)
2364  0A36  26 00       	ld	h,0x00
2365  0A38  01 00 00    	ld	bc,_lin
2366  0A3B  09          	add	hl,bc
2367  0A3C  7E          	ld	a,(hl)
2368  0A3D  07          	rlca
2369  0A3E  07          	rlca
2370  0A3F  07          	rlca
2371  0A40  07          	rlca
2372  0A41  E6 0F       	and	a,0x0f
2373  0A43  07          	rlca
2374  0A44  07          	rlca
2375  0A45  07          	rlca
2376  0A46  07          	rlca
2377  0A47  E6 F0       	and	a,0xf0
2378  0A49  C6 E0       	add	a,0xe0
2379  0A4B  32 00 00    	ld	(_s_lin1),a
2380  0A4E  2A 00 00    	ld	hl,(_sprite)
2381  0A51  26 00       	ld	h,0x00
2382  0A53  01 00 00    	ld	bc,_col
2383  0A56  09          	add	hl,bc
2384  0A57  7E          	ld	a,(hl)
2385  0A58  CB 3F       	srl	a
2386  0A5A  87          	add	a, a
2387  0A5B  32 00 00    	ld	(_s_col1),a
2388  0A5E  21 00 00    	ld	hl,_tmp
2389  0A61  36 00       	ld	(hl),0x00
2390  0A63              l_player_hit_platform_00115:
2391  0A63  21 00 00    	ld	hl,_tmp
2392  0A66  7E          	ld	a, (hl)
2393  0A67  D6 07       	sub	a,0x07
2394  0A69  30 1C       	jr	NC,l_player_hit_platform_00117
2395  0A6B  4E          	ld	c,(hl)
2396  0A6C  06 00       	ld	b,0x00
2397  0A6E  21 00 00    	ld	hl,_mush_index
2398  0A71  09          	add	hl,bc
2399  0A72  4E          	ld	c, (hl)
2400  0A73  06 00       	ld	b,0x00
2401  0A75  21 00 00    	ld	hl,_index1
2402  0A78  7E          	ld	a, (hl)
2403  0A79  91          	sub	a, c
2404  0A7A  20 05       	jr	NZ,l_player_hit_platform_00235
2405  0A7C  23          	inc	hl
2406  0A7D  7E          	ld	a, (hl)
2407  0A7E  90          	sub	a, b
2408  0A7F  28 06       	jr	Z,l_player_hit_platform_00117
2409  0A81              l_player_hit_platform_00235:
2410  0A81  21 00 00    	ld	hl,_tmp
2411  0A84  34          	inc	(hl)
2412  0A85  18 DC       	jr	l_player_hit_platform_00115
2413  0A87              l_player_hit_platform_00117:
2414  0A87  2A 00 00    	ld	hl,(_tmp)
2415  0A8A  26 00       	ld	h,0x00
2416  0A8C  01 00 00    	ld	bc,_mush_class
2417  0A8F  09          	add	hl,bc
2418  0A90  7E          	ld	a,(hl)
2419  0A91  FE 78       	cp	a,0x78
2420  0A93  28 18       	jr	Z,l_player_hit_platform_00118
2421  0A95  FE 79       	cp	a,0x79
2422  0A97  28 2F       	jr	Z,l_player_hit_platform_00119
2423  0A99  FE 7A       	cp	a,0x7a
2424  0A9B  28 5F       	jr	Z,l_player_hit_platform_00121
2425  0A9D  FE 7B       	cp	a,0x7b
2426  0A9F  28 41       	jr	Z,l_player_hit_platform_00120
2427  0AA1  FE 7C       	cp	a,0x7c
2428  0AA3  CA 30 0B    	jp	Z,l_player_hit_platform_00123
2429  0AA6  D6 7D       	sub	a,0x7d
2430  0AA8  28 6C       	jr	Z,l_player_hit_platform_00122
2431  0AAA  C3 48 0B    	jp	l_player_hit_platform_00124
2432  0AAD              l_player_hit_platform_00118:
2433  0AAD  2E 02       	ld	l,0x02
2434  0AAF  CD 00 00    	call	_zx_border_fastcall
2435  0AB2  3A 00 00    	ld	a,(_s_col1)
2436  0AB5  21 06 FF    	ld	hl,0xff06
2437  0AB8  E5          	push	hl
2438  0AB9  F5          	push	af
2439  0ABA  33          	inc	sp
2440  0ABB  3A 00 00    	ld	a,(_s_lin1)
2441  0ABE  F5          	push	af
2442  0ABF  33          	inc	sp
2443  0AC0  CD 00 00    	call	_enemy_init
2444  0AC3  F1          	pop	af
2445  0AC4  F1          	pop	af
2446  0AC5  C3 48 0B    	jp	l_player_hit_platform_00124
2447  0AC8              l_player_hit_platform_00119:
2448  0AC8  2E 02       	ld	l,0x02
2449  0ACA  CD 00 00    	call	_zx_border_fastcall
2450  0ACD  3A 00 00    	ld	a,(_s_col1)
2451  0AD0  21 06 01    	ld	hl,0x0106
2452  0AD3  E5          	push	hl
2453  0AD4  F5          	push	af
2454  0AD5  33          	inc	sp
2455  0AD6  3A 00 00    	ld	a,(_s_lin1)
2456  0AD9  F5          	push	af
2457  0ADA  33          	inc	sp
2458  0ADB  CD 00 00    	call	_enemy_init
2459  0ADE  F1          	pop	af
2460  0ADF  F1          	pop	af
2461  0AE0  18 66       	jr	l_player_hit_platform_00124
2462  0AE2              l_player_hit_platform_00120:
2463  0AE2  2E 01       	ld	l,0x01
2464  0AE4  CD 00 00    	call	_zx_border_fastcall
2465  0AE7  3A 00 00    	ld	a,(_s_col1)
2466  0AEA  21 07 01    	ld	hl,0x0107
2467  0AED  E5          	push	hl
2468  0AEE  F5          	push	af
2469  0AEF  33          	inc	sp
2470  0AF0  3A 00 00    	ld	a,(_s_lin1)
2471  0AF3  F5          	push	af
2472  0AF4  33          	inc	sp
2473  0AF5  CD 00 00    	call	_enemy_init
2474  0AF8  F1          	pop	af
2475  0AF9  F1          	pop	af
2476  0AFA  18 4C       	jr	l_player_hit_platform_00124
2477  0AFC              l_player_hit_platform_00121:
2478  0AFC  2E 01       	ld	l,0x01
2479  0AFE  CD 00 00    	call	_zx_border_fastcall
2480  0B01  3A 00 00    	ld	a,(_s_col1)
2481  0B04  21 07 FF    	ld	hl,0xff07
2482  0B07  E5          	push	hl
2483  0B08  F5          	push	af
2484  0B09  33          	inc	sp
2485  0B0A  3A 00 00    	ld	a,(_s_lin1)
2486  0B0D  F5          	push	af
2487  0B0E  33          	inc	sp
2488  0B0F  CD 00 00    	call	_enemy_init
2489  0B12  F1          	pop	af
2490  0B13  F1          	pop	af
2491  0B14  18 32       	jr	l_player_hit_platform_00124
2492  0B16              l_player_hit_platform_00122:
2493  0B16  2E 04       	ld	l,0x04
2494  0B18  CD 00 00    	call	_zx_border_fastcall
2495  0B1B  3A 00 00    	ld	a,(_s_col1)
2496  0B1E  21 08 01    	ld	hl,0x0108
2497  0B21  E5          	push	hl
2498  0B22  F5          	push	af
2499  0B23  33          	inc	sp
2500  0B24  3A 00 00    	ld	a,(_s_lin1)
2501  0B27  F5          	push	af
2502  0B28  33          	inc	sp
2503  0B29  CD 00 00    	call	_enemy_init
2504  0B2C  F1          	pop	af
2505  0B2D  F1          	pop	af
2506  0B2E  18 18       	jr	l_player_hit_platform_00124
2507  0B30              l_player_hit_platform_00123:
2508  0B30  2E 04       	ld	l,0x04
2509  0B32  CD 00 00    	call	_zx_border_fastcall
2510  0B35  3A 00 00    	ld	a,(_s_col1)
2511  0B38  21 08 FF    	ld	hl,0xff08
2512  0B3B  E5          	push	hl
2513  0B3C  F5          	push	af
2514  0B3D  33          	inc	sp
2515  0B3E  3A 00 00    	ld	a,(_s_lin1)
2516  0B41  F5          	push	af
2517  0B42  33          	inc	sp
2518  0B43  CD 00 00    	call	_enemy_init
2519  0B46  F1          	pop	af
2520  0B47  F1          	pop	af
2521  0B48              l_player_hit_platform_00124:
2522  0B48  2A 00 00    	ld	hl,(_index1)
2523  0B4B  01 F0 FF    	ld	bc,0xfff0
2524  0B4E  09          	add	hl,bc
2525  0B4F  01 00 00    	ld	bc,_scr_map
2526  0B52  09          	add	hl,bc
2527  0B53  36 00       	ld	(hl),0x00
2528  0B55  01 00 00    	ld	bc,_scr_map
2529  0B58  2A 00 00    	ld	hl,(_index1)
2530  0B5B  09          	add	hl,bc
2531  0B5C  7E          	ld	a,(hl)
2532  0B5D  D6 5C       	sub	a,0x5c
2533  0B5F  4D          	ld	c,l
2534  0B60  44          	ld	b,h
2535  0B61  20 05       	jr	NZ,l_player_hit_platform_00126
2536  0B63  3E 4F       	ld	a,0x4f
2537  0B65  02          	ld	(bc), a
2538  0B66  18 03       	jr	l_player_hit_platform_00127
2539  0B68              l_player_hit_platform_00126:
2540  0B68  3E 54       	ld	a,0x54
2541  0B6A  02          	ld	(bc), a
2542  0B6B              l_player_hit_platform_00127:
2543  0B6B  2A 00 00    	ld	hl,(_index1)
2544  0B6E  01 F0 FF    	ld	bc,0xfff0
2545  0B71  09          	add	hl,bc
2546  0B72  E5          	push	hl
2547  0B73  CD 00 00    	call	_game_obj_set
2548  0B76  F1          	pop	af
2549  0B77  3A 00 00    	ld	a,(_s_lin1)
2550  0B7A  C6 10       	add	a,0x10
2551  0B7C  4F          	ld	c, a
2552  0B7D  3A 00 00    	ld	a, (_s_col1)
2553  0B80  47          	ld	b,a
2554  0B81  C5          	push	bc
2555  0B82  3E 4F       	ld	a,0x4f
2556  0B84  F5          	push	af
2557  0B85  33          	inc	sp
2558  0B86  CD 00 00    	call	_NIRVANAP_drawT_callee
2559  0B89              l_player_hit_platform_00129:
2560  0B89  21 00 00    	ld	hl,_tmp0
2561  0B8C  34          	inc	(hl)
2562  0B8D  C3 17 0A    	jp	l_player_hit_platform_00130
2563  0B90              l_player_hit_platform_00134:
2564  0B90  2E 01       	ld	l,0x01
2565  0B92  CD 00 00    	call	_spr_brick_anim
2566  0B95  CD 00 00    	call	_sound_hit_brick
2567  0B98  2E 01       	ld	l,0x01
2568  0B9A  18 02       	jr	l_player_hit_platform_00140
2569  0B9C              l_player_hit_platform_00137:
2570  0B9C  2E 00       	ld	l,0x00
2571  0B9E              l_player_hit_platform_00140:
2572  0B9E  C9          	ret
2573  0B9F              	SECTION code_compiler
2574  0B9F              ;	---------------------------------
2575  0B9F              ; Function player_hit_platform_clear
2576  0B9F              ; ---------------------------------
2577  0B9F              _player_hit_platform_clear:
2578  0B9F  2A 00 00    	ld	hl,(_sprite)
2579  0BA2  26 00       	ld	h,0x00
2580  0BA4  29          	add	hl, hl
2581  0BA5  11 00 00    	ld	de,_spr_timer
2582  0BA8  19          	add	hl, de
2583  0BA9  4E          	ld	c, (hl)
2584  0BAA  23          	inc	hl
2585  0BAB  46          	ld	b, (hl)
2586  0BAC  21 04 00    	ld	hl,0x0004
2587  0BAF  E5          	push	hl
2588  0BB0  C5          	push	bc
2589  0BB1  CD 00 00    	call	_game_check_time
2590  0BB4  F1          	pop	af
2591  0BB5  F1          	pop	af
2592  0BB6  7D          	ld	a, l
2593  0BB7  B7          	or	a, a
2594  0BB8  C8          	ret	Z
2595  0BB9  2A FF FF    	ld	hl,(_player_hit_col - 1)
2596  0BBC  3A 00 00    	ld	a,(_player_hit_lin)
2597  0BBF  6F          	ld	l,a
2598  0BC0  E5          	push	hl
2599  0BC1  CD 00 00    	call	_spr_calc_index
2600  0BC4  F1          	pop	af
2601  0BC5  22 00 00    	ld	(_index1),hl
2602  0BC8  2E 00       	ld	l,0x00
2603  0BCA  CD 00 00    	call	_spr_brick_anim
2604  0BCD  21 00 00    	ld	hl,_player_hit_lin
2605  0BD0  36 00       	ld	(hl),0x00
2606  0BD2  21 00 00    	ld	hl,_player_hit_col
2607  0BD5  36 00       	ld	(hl),0x00
2608  0BD7  C9          	ret
2609  0BD8              	SECTION code_compiler
2610  0BD8              ;	---------------------------------
2611  0BD8              ; Function player_score_add
2612  0BD8              ; ---------------------------------
2613  0BD8              _player_score_add:
2614  0BD8  ED 4B 00 00 	ld	bc,(_player_score)
2615  0BDC  09          	add	hl,bc
2616  0BDD  22 00 00    	ld	(_player_score),hl
2617  0BE0  21 00 00    	ld	hl,_player_lvl
2618  0BE3  7E          	ld	a, (hl)
2619  0BE4  D6 14       	sub	a,0x14
2620  0BE6  30 3C       	jr	NC,l_player_score_add_00104
2621  0BE8  01 00 00    	ld	bc,_player_lvl_table+0
2622  0BEB  6E          	ld	l,(hl)
2623  0BEC  26 00       	ld	h,0x00
2624  0BEE  29          	add	hl, hl
2625  0BEF  09          	add	hl, bc
2626  0BF0  4E          	ld	c, (hl)
2627  0BF1  23          	inc	hl
2628  0BF2  46          	ld	b, (hl)
2629  0BF3  21 00 00    	ld	hl,_player_score
2630  0BF6  7E          	ld	a, (hl)
2631  0BF7  91          	sub	a, c
2632  0BF8  23          	inc	hl
2633  0BF9  7E          	ld	a, (hl)
2634  0BFA  98          	sbc	a, b
2635  0BFB  38 27       	jr	C,l_player_score_add_00104
2636  0BFD  21 00 00    	ld	hl,_player_lvl
2637  0C00  34          	inc	(hl)
2638  0C01  21 02 00    	ld	hl,___str_1
2639  0C04  E5          	push	hl
2640  0C05  21 0C 0C    	ld	hl,0x0c0c
2641  0C08  E5          	push	hl
2642  0C09  CD 00 00    	call	_zx_print_str
2643  0C0C  AF          	xor	a, a
2644  0C0D  F5          	push	af
2645  0C0E  33          	inc	sp
2646  0C0F  21 19 00    	ld	hl,0x0019
2647  0C12  E5          	push	hl
2648  0C13  21 0C 15    	ld	hl,0x150c
2649  0C16  E5          	push	hl
2650  0C17  3E 0C       	ld	a,0x0c
2651  0C19  F5          	push	af
2652  0C1A  33          	inc	sp
2653  0C1B  CD 00 00    	call	_game_colour_message
2654  0C1E  F1          	pop	af
2655  0C1F  F1          	pop	af
2656  0C20  F1          	pop	af
2657  0C21  CD 00 00    	call	_game_update_stats
2658  0C24              l_player_score_add_00104:
2659  0C24  3A 00 00    	ld	a,(_game_score_top)
2660  0C27  21 00 00    	ld	hl,_player_score
2661  0C2A  96          	sub	a, (hl)
2662  0C2B  3A 01 00    	ld	a,(_game_score_top + 1)
2663  0C2E  23          	inc	hl
2664  0C2F  9E          	sbc	a, (hl)
2665  0C30  30 06       	jr	NC,l_player_score_add_00106
2666  0C32  2A 00 00    	ld	hl,(_player_score)
2667  0C35  22 00 00    	ld	(_game_score_top),hl
2668  0C38              l_player_score_add_00106:
2669  0C38  CD 00 00    	call	_game_print_score
2670  0C3B  C9          	ret
2671  0C3C              	SECTION rodata_compiler
2672  0002              ___str_1:
2673  0002  4C 45 56 45 4C 20 55 50 21 
                        	DEFM "LEVEL UP!"
2674  000B  00          	DEFB 0x00
2675  000C              	SECTION code_compiler
2676  0C3C              ;	---------------------------------
2677  0C3C              ; Function player_check_floor
2678  0C3C              ; ---------------------------------
2679  0C3C              _player_check_floor:
2680  0C3C  CD 00 00    	call	___sdcc_enter_ix
2681  0C3F  3B          	dec	sp
2682  0C40  2A 00 00    	ld	hl,(_sprite)
2683  0C43  26 00       	ld	h,0x00
2684  0C45  01 00 00    	ld	bc,_col
2685  0C48  09          	add	hl,bc
2686  0C49  56          	ld	d, (hl)
2687  0C4A  2A 00 00    	ld	hl,(_sprite)
2688  0C4D  26 00       	ld	h,0x00
2689  0C4F  01 00 00    	ld	bc,_lin
2690  0C52  09          	add	hl,bc
2691  0C53  7E          	ld	a,(hl)
2692  0C54  C6 10       	add	a,0x10
2693  0C56  5F          	ld	e, a
2694  0C57  D5          	push	de
2695  0C58  CD 00 00    	call	_spr_calc_index
2696  0C5B  F1          	pop	af
2697  0C5C  4D          	ld	c, l
2698  0C5D  44          	ld	b, h
2699  0C5E  21 00 00    	ld	hl,_scr_map
2700  0C61  09          	add	hl, bc
2701  0C62  7E          	ld	a, (hl)
2702  0C63  DD 77 FF    	ld	(ix-1),a
2703  0C66  2A 00 00    	ld	hl,(_sprite)
2704  0C69  26 00       	ld	h,0x00
2705  0C6B  11 00 00    	ld	de,_col
2706  0C6E  19          	add	hl,de
2707  0C6F  7E          	ld	a,(hl)
2708  0C70  0F          	rrca
2709  0C71  38 04       	jr	C,l_player_check_floor_00102
2710  0C73  0E 01       	ld	c,0x01
2711  0C75  18 06       	jr	l_player_check_floor_00103
2712  0C77              l_player_check_floor_00102:
2713  0C77  03          	inc	bc
2714  0C78  21 00 00    	ld	hl,_scr_map
2715  0C7B  09          	add	hl, bc
2716  0C7C  4E          	ld	c, (hl)
2717  0C7D              l_player_check_floor_00103:
2718  0C7D  3A 00 00    	ld	a,(_s_lin0)
2719  0C80  D6 90       	sub	a,0x90
2720  0C82  20 04       	jr	NZ,l_player_check_floor_00105
2721  0C84  DD 36 FF 48 	ld	(ix-1),0x48
2722  0C88              l_player_check_floor_00105:
2723  0C88  DD 7E FF    	ld	a,(ix-1)
2724  0C8B  D6 3C       	sub	a,0x3c
2725  0C8D  38 07       	jr	C,l_player_check_floor_00110
2726  0C8F  DD 7E FF    	ld	a,(ix-1)
2727  0C92  D6 60       	sub	a,0x60
2728  0C94  38 1E       	jr	C,l_player_check_floor_00111
2729  0C96              l_player_check_floor_00110:
2730  0C96  79          	ld	a,c
2731  0C97  FE 3C       	cp	a,0x3c
2732  0C99  38 04       	jr	C,l_player_check_floor_00106
2733  0C9B  D6 60       	sub	a,0x60
2734  0C9D  38 15       	jr	C,l_player_check_floor_00111
2735  0C9F              l_player_check_floor_00106:
2736  0C9F  2A 00 00    	ld	hl,(_sprite)
2737  0CA2  26 00       	ld	h,0x00
2738  0CA4  01 00 00    	ld	bc,_sprite_speed_alt
2739  0CA7  09          	add	hl,bc
2740  0CA8  36 02       	ld	(hl),0x02
2741  0CAA  21 00 00    	ld	hl,_s_state
2742  0CAD  CB CE       	set	1, (hl)
2743  0CAF  2E 00       	ld	l,0x00
2744  0CB1  CD 9C 04    	call	_player_check_stairs
2745  0CB4              l_player_check_floor_00111:
2746  0CB4  33          	inc	sp
2747  0CB5  DD E1       	pop	ix
2748  0CB7  C9          	ret
2749  0CB8              	SECTION code_compiler
2750  0CB8              ;	---------------------------------
2751  0CB8              ; Function player_move_jump
2752  0CB8              ; ---------------------------------
2753  0CB8              _player_move_jump:
2754  0CB8  CD 00 00    	call	___sdcc_enter_ix
2755  0CBB  3B          	dec	sp
2756  0CBC  21 00 00    	ld	hl,_game_gravity
2757  0CBF  4E          	ld	c, (hl)
2758  0CC0  21 00 00    	ld	hl,_player_vel_y
2759  0CC3  7E          	ld	a, (hl)
2760  0CC4  81          	add	a, c
2761  0CC5  77          	ld	(hl), a
2762  0CC6  21 00 00    	ld	hl,_sprite_on_air
2763  0CC9  36 01       	ld	(hl),0x01
2764  0CCB  3A 00 00    	ld	a,(_player_vel_inc)
2765  0CCE  B7          	or	a, a
2766  0CCF  28 24       	jr	Z,l_player_move_jump_00106
2767  0CD1  21 00 00    	ld	hl,_dirs
2768  0CD4  CB 7E       	bit	7, (hl)
2769  0CD6  20 1D       	jr	NZ,l_player_move_jump_00106
2770  0CD8  3A 00 00    	ld	a,(_player_vel_y1)
2771  0CDB  21 00 00    	ld	hl,_player_vel_y
2772  0CDE  96          	sub	a, (hl)
2773  0CDF  E2 E4 0C    	jp	PO, l_player_move_jump_00247
2774  0CE2  EE 80       	xor	a,0x80
2775  0CE4              l_player_move_jump_00247:
2776  0CE4  F2 F5 0C    	jp	P, l_player_move_jump_00106
2777  0CE7  21 00 00    	ld	hl,_player_vel_y
2778  0CEA  CB 7E       	bit	7,(hl)
2779  0CEC  28 07       	jr	Z,l_player_move_jump_00106
2780  0CEE  36 00       	ld	(hl),0x00
2781  0CF0  21 00 00    	ld	hl,_player_vel_inc
2782  0CF3  36 00       	ld	(hl),0x00
2783  0CF5              l_player_move_jump_00106:
2784  0CF5  3E 78       	ld	a,0x78
2785  0CF7  21 00 00    	ld	hl,_player_vel_y
2786  0CFA  96          	sub	a, (hl)
2787  0CFB  E2 00 0D    	jp	PO, l_player_move_jump_00248
2788  0CFE  EE 80       	xor	a,0x80
2789  0D00              l_player_move_jump_00248:
2790  0D00  F2 08 0D    	jp	P, l_player_move_jump_00108
2791  0D03  21 00 00    	ld	hl,_player_vel_y
2792  0D06  36 78       	ld	(hl),0x78
2793  0D08              l_player_move_jump_00108:
2794  0D08  21 00 00    	ld	hl,_player_vel_y
2795  0D0B  7E          	ld	a, (hl)
2796  0D0C  EE 80       	xor	a,0x80
2797  0D0E  D6 08       	sub	a,0x08
2798  0D10  30 02       	jr	NC,l_player_move_jump_00110
2799  0D12  36 88       	ld	(hl),0x88
2800  0D14              l_player_move_jump_00110:
2801  0D14  3A 00 00    	ld	a,(_player_vel_y)
2802  0D17  5F          	ld	e,a
2803  0D18  17          	rla
2804  0D19  9F          	sbc	a, a
2805  0D1A  57          	ld	d, a
2806  0D1B  CB 43       	bit	0,e
2807  0D1D  21 00 00    	ld	hl,_s_lin1
2808  0D20  73          	ld	(hl),e
2809  0D21  28 04       	jr	Z,l_player_move_jump_00112
2810  0D23  21 00 00    	ld	hl,_s_lin1
2811  0D26  35          	dec	(hl)
2812  0D27              l_player_move_jump_00112:
2813  0D27  2A 00 00    	ld	hl,(_sprite)
2814  0D2A  26 00       	ld	h,0x00
2815  0D2C  01 00 00    	ld	bc,_lin
2816  0D2F  09          	add	hl,bc
2817  0D30  7E          	ld	a,(hl)
2818  0D31  DD 77 FF    	ld	(ix-1),a
2819  0D34  4D          	ld	c,l
2820  0D35  44          	ld	b,h
2821  0D36  21 00 00    	ld	hl,_s_lin1
2822  0D39  86          	add	a, (hl)
2823  0D3A  77          	ld	(hl), a
2824  0D3B  3E 90       	ld	a,0x90
2825  0D3D  96          	sub	a, (hl)
2826  0D3E  30 0E       	jr	NC,l_player_move_jump_00117
2827  0D40  3E C8       	ld	a,0xc8
2828  0D42  96          	sub	a, (hl)
2829  0D43  30 04       	jr	NC,l_player_move_jump_00114
2830  0D45  36 00       	ld	(hl),0x00
2831  0D47  18 05       	jr	l_player_move_jump_00117
2832  0D49              l_player_move_jump_00114:
2833  0D49  21 00 00    	ld	hl,_s_lin1
2834  0D4C  36 90       	ld	(hl),0x90
2835  0D4E              l_player_move_jump_00117:
2836  0D4E  3A 00 00    	ld	a,(_s_lin0)
2837  0D51  07          	rlca
2838  0D52  07          	rlca
2839  0D53  07          	rlca
2840  0D54  07          	rlca
2841  0D55  E6 0F       	and	a,0x0f
2842  0D57  DD 77 FF    	ld	(ix-1),a
2843  0D5A  CB 7A       	bit	7, d
2844  0D5C  28 73       	jr	Z,l_player_move_jump_00140
2845  0D5E  21 00 00    	ld	hl,_s_state
2846  0D61  7E          	ld	a,(hl)
2847  0D62  F6 01       	or	a,0x01
2848  0D64  E6 FD       	and	a,0xfd
2849  0D66  77          	ld	(hl),a
2850  0D67  21 00 00    	ld	hl,_s_lin1
2851  0D6A  DD 7E FF    	ld	a,(ix-1)
2852  0D6D  96          	sub	a,(hl)
2853  0D6E  20 04       	jr	NZ,l_player_move_jump_00250
2854  0D70  3E 01       	ld	a,0x01
2855  0D72  18 01       	jr	l_player_move_jump_00251
2856  0D74              l_player_move_jump_00250:
2857  0D74  AF          	xor	a,a
2858  0D75              l_player_move_jump_00251:
2859  0D75  EE 01       	xor	a,0x01
2860  0D77  28 51       	jr	Z,l_player_move_jump_00124
2861  0D79  2A 00 00    	ld	hl,(_sprite)
2862  0D7C  26 00       	ld	h,0x00
2863  0D7E  01 00 00    	ld	bc,_col
2864  0D81  09          	add	hl,bc
2865  0D82  7E          	ld	a,(hl)
2866  0D83  F5          	push	af
2867  0D84  33          	inc	sp
2868  0D85  3A 00 00    	ld	a,(_s_lin1)
2869  0D88  F5          	push	af
2870  0D89  33          	inc	sp
2871  0D8A  CD 00 00    	call	_game_check_map
2872  0D8D  F1          	pop	af
2873  0D8E  7C          	ld	a,h
2874  0D8F  B5          	or	a,l
2875  0D90  28 28       	jr	Z,l_player_move_jump_00121
2876  0D92  CD 5D 09    	call	_player_hit_platform
2877  0D95  7D          	ld	a, l
2878  0D96  B7          	or	a, a
2879  0D97  28 19       	jr	Z,l_player_move_jump_00119
2880  0D99  2A 00 00    	ld	hl,(_sprite)
2881  0D9C  26 00       	ld	h,0x00
2882  0D9E  01 00 00    	ld	bc,_lin
2883  0DA1  09          	add	hl,bc
2884  0DA2  7E          	ld	a,(hl)
2885  0DA3  4D          	ld	c,l
2886  0DA4  44          	ld	b,h
2887  0DA5  07          	rlca
2888  0DA6  07          	rlca
2889  0DA7  07          	rlca
2890  0DA8  07          	rlca
2891  0DA9  E6 0F       	and	a,0x0f
2892  0DAB  07          	rlca
2893  0DAC  07          	rlca
2894  0DAD  07          	rlca
2895  0DAE  07          	rlca
2896  0DAF  E6 F0       	and	a,0xf0
2897  0DB1  02          	ld	(bc), a
2898  0DB2              l_player_move_jump_00119:
2899  0DB2  21 00 00    	ld	hl,_player_vel_y
2900  0DB5  36 00       	ld	(hl),0x00
2901  0DB7  C3 91 0E    	jp	l_player_move_jump_00141
2902  0DBA              l_player_move_jump_00121:
2903  0DBA  2A 00 00    	ld	hl,(_sprite)
2904  0DBD  26 00       	ld	h,0x00
2905  0DBF  01 00 00    	ld	bc,_lin
2906  0DC2  09          	add	hl,bc
2907  0DC3  3A 00 00    	ld	a,(_s_lin1)
2908  0DC6  77          	ld	(hl),a
2909  0DC7  C3 91 0E    	jp	l_player_move_jump_00141
2910  0DCA              l_player_move_jump_00124:
2911  0DCA  3A 00 00    	ld	a,(_s_lin1)
2912  0DCD  02          	ld	(bc), a
2913  0DCE  C3 91 0E    	jp	l_player_move_jump_00141
2914  0DD1              l_player_move_jump_00140:
2915  0DD1  21 00 00    	ld	hl,_s_state
2916  0DD4  7E          	ld	a,(hl)
2917  0DD5  F6 02       	or	a,0x02
2918  0DD7  E6 FE       	and	a,0xfe
2919  0DD9  77          	ld	(hl),a
2920  0DDA  21 00 00    	ld	hl,_s_lin1
2921  0DDD  7E          	ld	a, (hl)
2922  0DDE  C6 10       	add	a,0x10
2923  0DE0  77          	ld	(hl), a
2924  0DE1  DD 7E FF    	ld	a,(ix-1)
2925  0DE4  96          	sub	a,(hl)
2926  0DE5  20 04       	jr	NZ,l_player_move_jump_00252
2927  0DE7  3E 01       	ld	a,0x01
2928  0DE9  18 01       	jr	l_player_move_jump_00253
2929  0DEB              l_player_move_jump_00252:
2930  0DEB  AF          	xor	a,a
2931  0DEC              l_player_move_jump_00253:
2932  0DEC  EE 01       	xor	a,0x01
2933  0DEE  CA 89 0E    	jp	Z, l_player_move_jump_00137
2934  0DF1  2A 00 00    	ld	hl,(_sprite)
2935  0DF4  26 00       	ld	h,0x00
2936  0DF6  01 00 00    	ld	bc,_col
2937  0DF9  09          	add	hl,bc
2938  0DFA  7E          	ld	a,(hl)
2939  0DFB  F5          	push	af
2940  0DFC  33          	inc	sp
2941  0DFD  3A 00 00    	ld	a,(_s_lin1)
2942  0E00  F5          	push	af
2943  0E01  33          	inc	sp
2944  0E02  CD 00 00    	call	_game_check_map
2945  0E05  F1          	pop	af
2946  0E06  45          	ld	b, l
2947  0E07  5C          	ld	e, h
2948  0E08  21 00 00    	ld	hl,_s_lin1
2949  0E0B  7E          	ld	a, (hl)
2950  0E0C  C6 F0       	add	a,0xf0
2951  0E0E  4F          	ld	c, a
2952  0E0F  7B          	ld	a, e
2953  0E10  B0          	or	a,b
2954  0E11  28 63       	jr	Z,l_player_move_jump_00134
2955  0E13  71          	ld	(hl), c
2956  0E14  2E 00       	ld	l,0x00
2957  0E16  CD 9C 04    	call	_player_check_stairs
2958  0E19  3A 00 00    	ld	a,(_player_over_stair)
2959  0E1C  B7          	or	a, a
2960  0E1D  20 05       	jr	NZ,l_player_move_jump_00127
2961  0E1F  2E 01       	ld	l,0x01
2962  0E21  CD 9C 04    	call	_player_check_stairs
2963  0E24              l_player_move_jump_00127:
2964  0E24  3A 00 00    	ld	a,(_player_over_stair)
2965  0E27  B7          	or	a, a
2966  0E28  20 31       	jr	NZ,l_player_move_jump_00132
2967  0E2A  21 00 00    	ld	hl,_s_lin1
2968  0E2D  7E          	ld	a, (hl)
2969  0E2E  07          	rlca
2970  0E2F  07          	rlca
2971  0E30  07          	rlca
2972  0E31  07          	rlca
2973  0E32  E6 0F       	and	a,0x0f
2974  0E34  07          	rlca
2975  0E35  07          	rlca
2976  0E36  07          	rlca
2977  0E37  07          	rlca
2978  0E38  E6 F0       	and	a,0xf0
2979  0E3A  77          	ld	(hl), a
2980  0E3B  2A 00 00    	ld	hl,(_sprite)
2981  0E3E  26 00       	ld	h,0x00
2982  0E40  01 00 00    	ld	bc,_lin
2983  0E43  09          	add	hl,bc
2984  0E44  5E          	ld	e,(hl)
2985  0E45  4D          	ld	c,l
2986  0E46  44          	ld	b,h
2987  0E47  21 00 00    	ld	hl,_s_lin1
2988  0E4A  7E          	ld	a, (hl)
2989  0E4B  93          	sub	a, e
2990  0E4C  30 09       	jr	NC,l_player_move_jump_00129
2991  0E4E  7E          	ld	a, (hl)
2992  0E4F  C6 10       	add	a,0x10
2993  0E51  02          	ld	(bc), a
2994  0E52  2E 00       	ld	l,0x00
2995  0E54  C3 D9 0E    	jp	l_player_move_jump_00151
2996  0E57              l_player_move_jump_00129:
2997  0E57  3A 00 00    	ld	a,(_s_lin1)
2998  0E5A  02          	ld	(bc), a
2999  0E5B              l_player_move_jump_00132:
3000  0E5B  21 00 00    	ld	hl,_player_vel_y
3001  0E5E  36 00       	ld	(hl),0x00
3002  0E60  21 00 00    	ld	hl,_s_state
3003  0E63  7E          	ld	a,(hl)
3004  0E64  E6 FC       	and	a,+(0xfd&0xfe)
3005  0E66  77          	ld	(hl),a
3006  0E67  2A 00 00    	ld	hl,(_sprite)
3007  0E6A  26 00       	ld	h,0x00
3008  0E6C  01 00 00    	ld	bc,_colint
3009  0E6F  09          	add	hl,bc
3010  0E70  AF          	xor	a,a
3011  0E71  77          	ld	(hl),a
3012  0E72  2E 01       	ld	l,0x01
3013  0E74  18 63       	jr	l_player_move_jump_00151
3014  0E76              l_player_move_jump_00134:
3015  0E76  21 00 00    	ld	hl,_s_lin1
3016  0E79  71          	ld	(hl), c
3017  0E7A  2A 00 00    	ld	hl,(_sprite)
3018  0E7D  26 00       	ld	h,0x00
3019  0E7F  01 00 00    	ld	bc,_lin
3020  0E82  09          	add	hl,bc
3021  0E83  3A 00 00    	ld	a,(_s_lin1)
3022  0E86  77          	ld	(hl),a
3023  0E87  18 08       	jr	l_player_move_jump_00141
3024  0E89              l_player_move_jump_00137:
3025  0E89  21 00 00    	ld	hl,_s_lin1
3026  0E8C  7E          	ld	a, (hl)
3027  0E8D  C6 F0       	add	a,0xf0
3028  0E8F  77          	ld	(hl),a
3029  0E90  02          	ld	(bc), a
3030  0E91              l_player_move_jump_00141:
3031  0E91  21 00 00    	ld	hl,_s_state
3032  0E94  CB 5E       	bit	3, (hl)
3033  0E96  20 27       	jr	NZ,l_player_move_jump_00147
3034  0E98  21 00 00    	ld	hl,_s_state
3035  0E9B  CB 56       	bit	2, (hl)
3036  0E9D  20 20       	jr	NZ,l_player_move_jump_00147
3037  0E9F  21 00 00    	ld	hl,_dirs
3038  0EA2  CB 56       	bit	2, (hl)
3039  0EA4  28 09       	jr	Z,l_player_move_jump_00143
3040  0EA6  21 00 00    	ld	hl,_s_state
3041  0EA9  7E          	ld	a,(hl)
3042  0EAA  F6 08       	or	a,0x08
3043  0EAC  E6 FB       	and	a,0xfb
3044  0EAE  77          	ld	(hl),a
3045  0EAF              l_player_move_jump_00143:
3046  0EAF  21 00 00    	ld	hl,_dirs
3047  0EB2  CB 5E       	bit	3, (hl)
3048  0EB4  28 09       	jr	Z,l_player_move_jump_00147
3049  0EB6  21 00 00    	ld	hl,_s_state
3050  0EB9  7E          	ld	a,(hl)
3051  0EBA  F6 04       	or	a,0x04
3052  0EBC  E6 F7       	and	a,0xf7
3053  0EBE  77          	ld	(hl),a
3054  0EBF              l_player_move_jump_00147:
3055  0EBF  21 00 00    	ld	hl,_sprite_horizontal_check
3056  0EC2  36 01       	ld	(hl),0x01
3057  0EC4  CD 00 00    	call	_spr_move_horizontal
3058  0EC7  7D          	ld	a, l
3059  0EC8  B7          	or	a, a
3060  0EC9  28 07       	jr	Z,l_player_move_jump_00150
3061  0ECB  21 00 00    	ld	hl,_s_state
3062  0ECE  7E          	ld	a,(hl)
3063  0ECF  E6 F3       	and	a,+(0xf7&0xfb)
3064  0ED1  77          	ld	(hl),a
3065  0ED2              l_player_move_jump_00150:
3066  0ED2  21 00 00    	ld	hl,_sprite_horizontal_check
3067  0ED5  36 00       	ld	(hl),0x00
3068  0ED7  2E 00       	ld	l,0x00
3069  0ED9              l_player_move_jump_00151:
3070  0ED9  33          	inc	sp
3071  0EDA  DD E1       	pop	ix
3072  0EDC  C9          	ret
3073  0EDD              	SECTION code_compiler
3074  0EDD              ;	---------------------------------
3075  0EDD              ; Function player_open_door
3076  0EDD              ; ---------------------------------
3077  0EDD              _player_open_door:
3078  0EDD  CD 00 00    	call	___sdcc_enter_ix
3079  0EE0  0E 00       	ld	c,0x00
3080  0EE2  DD 7E 06    	ld	a,(ix+6)
3081  0EE5  D6 48       	sub	a,0x48
3082  0EE7  28 17       	jr	Z,l_player_open_door_00101
3083  0EE9  DD 7E 06    	ld	a,(ix+6)
3084  0EEC  D6 49       	sub	a,0x49
3085  0EEE  28 1F       	jr	Z,l_player_open_door_00104
3086  0EF0  DD 7E 06    	ld	a,(ix+6)
3087  0EF3  D6 4A       	sub	a,0x4a
3088  0EF5  28 27       	jr	Z,l_player_open_door_00107
3089  0EF7  DD 7E 06    	ld	a,(ix+6)
3090  0EFA  D6 4B       	sub	a,0x4b
3091  0EFC  28 2F       	jr	Z,l_player_open_door_00110
3092  0EFE  18 3A       	jr	l_player_open_door_00113
3093  0F00              l_player_open_door_00101:
3094  0F00  3A 00 00    	ld	a,(_player_keys)
3095  0F03  B7          	or	a, a
3096  0F04  28 34       	jr	Z,l_player_open_door_00113
3097  0F06  2E 07       	ld	l,0x07
3098  0F08  CD 00 00    	call	_zx_border_fastcall
3099  0F0B  0E 01       	ld	c,0x01
3100  0F0D  18 2B       	jr	l_player_open_door_00113
3101  0F0F              l_player_open_door_00104:
3102  0F0F  3A 01 00    	ld	a,(_player_keys + 0x0001)
3103  0F12  B7          	or	a, a
3104  0F13  28 25       	jr	Z,l_player_open_door_00113
3105  0F15  2E 02       	ld	l,0x02
3106  0F17  CD 00 00    	call	_zx_border_fastcall
3107  0F1A  0E 01       	ld	c,0x01
3108  0F1C  18 1C       	jr	l_player_open_door_00113
3109  0F1E              l_player_open_door_00107:
3110  0F1E  3A 02 00    	ld	a,(_player_keys + 0x0002)
3111  0F21  B7          	or	a, a
3112  0F22  28 16       	jr	Z,l_player_open_door_00113
3113  0F24  2E 04       	ld	l,0x04
3114  0F26  CD 00 00    	call	_zx_border_fastcall
3115  0F29  0E 01       	ld	c,0x01
3116  0F2B  18 0D       	jr	l_player_open_door_00113
3117  0F2D              l_player_open_door_00110:
3118  0F2D  3A 03 00    	ld	a,(_player_keys + 0x0003)
3119  0F30  B7          	or	a, a
3120  0F31  28 07       	jr	Z,l_player_open_door_00113
3121  0F33  2E 05       	ld	l,0x05
3122  0F35  CD 00 00    	call	_zx_border_fastcall
3123  0F38  0E 01       	ld	c,0x01
3124  0F3A              l_player_open_door_00113:
3125  0F3A  79          	ld	a, c
3126  0F3B  B7          	or	a, a
3127  0F3C  20 06       	jr	NZ,l_player_open_door_00114
3128  0F3E  3A 00 00    	ld	a,(_game_inmune)
3129  0F41  B7          	or	a, a
3130  0F42  28 24       	jr	Z,l_player_open_door_00117
3131  0F44              l_player_open_door_00114:
3132  0F44  3E 00       	ld	a, +((_scr_map) & 0xFF)
3133  0F46  DD 86 04    	add	a,(ix+4)
3134  0F49  4F          	ld	c, a
3135  0F4A  3E 00       	ld	a, +((_scr_map) / 256)
3136  0F4C  DD 8E 05    	adc	a,(ix+5)
3137  0F4F  47          	ld	b, a
3138  0F50  AF          	xor	a, a
3139  0F51  02          	ld	(bc), a
3140  0F52  DD 6E 04    	ld	l,(ix+4)
3141  0F55  DD 66 05    	ld	h,(ix+5)
3142  0F58  E5          	push	hl
3143  0F59  CD 00 00    	call	_game_obj_set
3144  0F5C  F1          	pop	af
3145  0F5D  DD 6E 04    	ld	l,(ix+4)
3146  0F60  DD 66 05    	ld	h,(ix+5)
3147  0F63  E5          	push	hl
3148  0F64  CD 00 00    	call	_spr_draw_index
3149  0F67  F1          	pop	af
3150  0F68              l_player_open_door_00117:
3151  0F68  DD E1       	pop	ix
3152  0F6A  C9          	ret
3153  0F6B              	SECTION code_compiler
3154  0F6B              ;	---------------------------------
3155  0F6B              ; Function player_lost_life
3156  0F6B              ; ---------------------------------
3157  0F6B              _player_lost_life:
3158  0F6B  3A 07 00    	ld	a,(_lin + 0x0007)
3159  0F6E  32 00 00    	ld	(_s_lin0),a
3160  0F71  3A 07 00    	ld	a,(_col + 0x0007)
3161  0F74  32 00 00    	ld	(_s_col0),a
3162  0F77  CD 00 00    	call	_spr_init_anim_bullets
3163  0F7A  01 00 00    	ld	bc,_class+0
3164  0F7D  16 00       	ld	d,0x00
3165  0F7F              l_player_lost_life_00114:
3166  0F7F  C5          	push	bc
3167  0F80  D5          	push	de
3168  0F81  21 00 00    	ld	hl,0x0000
3169  0F84  E5          	push	hl
3170  0F85  AF          	xor	a, a
3171  0F86  5A          	ld	e,d
3172  0F87  57          	ld	d,a
3173  0F88  D5          	push	de
3174  0F89  CD 00 00    	call	_NIRVANAP_spriteT_callee
3175  0F8C  D1          	pop	de
3176  0F8D  C1          	pop	bc
3177  0F8E  6A          	ld	l,d
3178  0F8F  26 00       	ld	h,0x00
3179  0F91  09          	add	hl, bc
3180  0F92  36 00       	ld	(hl),0x00
3181  0F94  14          	inc	d
3182  0F95  7A          	ld	a, d
3183  0F96  D6 08       	sub	a,0x08
3184  0F98  38 E5       	jr	C,l_player_lost_life_00114
3185  0F9A  76          	halt
3186  0F9B  3A 00 00    	ld	a,(_s_lin0)
3187  0F9E  C6 F0       	add	a,0xf0
3188  0FA0  47          	ld	b, a
3189  0FA1  3A 00 00    	ld	a,(_s_col0)
3190  0FA4  21 00 00    	ld	hl,0x0000
3191  0FA7  E5          	push	hl
3192  0FA8  21 87 03    	ld	hl,0x0387
3193  0FAB  E5          	push	hl
3194  0FAC  48          	ld	c,b
3195  0FAD  47          	ld	b,a
3196  0FAE  C5          	push	bc
3197  0FAF  CD 00 00    	call	_spr_add_anim
3198  0FB2  F1          	pop	af
3199  0FB3  F1          	pop	af
3200  0FB4  F1          	pop	af
3201  0FB5  21 00 00    	ld	hl,_s_col0
3202  0FB8  7E          	ld	a, (hl)
3203  0FB9  D6 02       	sub	a,0x02
3204  0FBB  38 18       	jr	C,l_player_lost_life_00103
3205  0FBD  46          	ld	b, (hl)
3206  0FBE  05          	dec	b
3207  0FBF  05          	dec	b
3208  0FC0  21 00 00    	ld	hl,0x0000
3209  0FC3  E5          	push	hl
3210  0FC4  21 87 03    	ld	hl,0x0387
3211  0FC7  E5          	push	hl
3212  0FC8  C5          	push	bc
3213  0FC9  33          	inc	sp
3214  0FCA  3A 00 00    	ld	a,(_s_lin0)
3215  0FCD  F5          	push	af
3216  0FCE  33          	inc	sp
3217  0FCF  CD 00 00    	call	_spr_add_anim
3218  0FD2  F1          	pop	af
3219  0FD3  F1          	pop	af
3220  0FD4  F1          	pop	af
3221  0FD5              l_player_lost_life_00103:
3222  0FD5  3A 00 00    	ld	a,(_s_col0)
3223  0FD8  21 00 00    	ld	hl,0x0000
3224  0FDB  E5          	push	hl
3225  0FDC  21 87 03    	ld	hl,0x0387
3226  0FDF  E5          	push	hl
3227  0FE0  F5          	push	af
3228  0FE1  33          	inc	sp
3229  0FE2  3A 00 00    	ld	a,(_s_lin0)
3230  0FE5  F5          	push	af
3231  0FE6  33          	inc	sp
3232  0FE7  CD 00 00    	call	_spr_add_anim
3233  0FEA  F1          	pop	af
3234  0FEB  F1          	pop	af
3235  0FEC  F1          	pop	af
3236  0FED  21 00 00    	ld	hl,_s_col0
3237  0FF0  7E          	ld	a, (hl)
3238  0FF1  D6 1E       	sub	a,0x1e
3239  0FF3  30 18       	jr	NC,l_player_lost_life_00105
3240  0FF5  46          	ld	b, (hl)
3241  0FF6  04          	inc	b
3242  0FF7  04          	inc	b
3243  0FF8  21 00 00    	ld	hl,0x0000
3244  0FFB  E5          	push	hl
3245  0FFC  21 87 03    	ld	hl,0x0387
3246  0FFF  E5          	push	hl
3247  1000  C5          	push	bc
3248  1001  33          	inc	sp
3249  1002  3A 00 00    	ld	a,(_s_lin0)
3250  1005  F5          	push	af
3251  1006  33          	inc	sp
3252  1007  CD 00 00    	call	_spr_add_anim
3253  100A  F1          	pop	af
3254  100B  F1          	pop	af
3255  100C  F1          	pop	af
3256  100D              l_player_lost_life_00105:
3257  100D  3A 00 00    	ld	a,(_s_lin0)
3258  1010  C6 10       	add	a,0x10
3259  1012  47          	ld	b, a
3260  1013  3A 00 00    	ld	a,(_s_col0)
3261  1016  21 00 00    	ld	hl,0x0000
3262  1019  E5          	push	hl
3263  101A  21 87 03    	ld	hl,0x0387
3264  101D  E5          	push	hl
3265  101E  48          	ld	c,b
3266  101F  47          	ld	b,a
3267  1020  C5          	push	bc
3268  1021  CD 00 00    	call	_spr_add_anim
3269  1024  F1          	pop	af
3270  1025  F1          	pop	af
3271  1026  F1          	pop	af
3272  1027  2E 00       	ld	l,0x00
3273  1029  CD 00 00    	call	_zx_border_fastcall
3274  102C  21 00 00    	ld	hl,_tmp
3275  102F  36 01       	ld	(hl),0x01
3276  1031              l_player_lost_life_00111:
3277  1031  3A 00 00    	ld	a,(_tmp)
3278  1034  B7          	or	a, a
3279  1035  28 2F       	jr	Z,l_player_lost_life_00113
3280  1037  21 06 00    	ld	hl,0x0006
3281  103A  E5          	push	hl
3282  103B  2A 00 00    	ld	hl,(_anim_time)
3283  103E  E5          	push	hl
3284  103F  CD 00 00    	call	_game_check_time
3285  1042  F1          	pop	af
3286  1043  F1          	pop	af
3287  1044  7D          	ld	a, l
3288  1045  B7          	or	a, a
3289  1046  28 16       	jr	Z,l_player_lost_life_00110
3290  1048  2A 00 00    	ld	hl,(_curr_time)
3291  104B  22 00 00    	ld	(_anim_time),hl
3292  104E  3A 00 00    	ld	a,(_anim_count)
3293  1051  B7          	or	a,a
3294  1052  28 05       	jr	Z,l_player_lost_life_00107
3295  1054  CD 00 00    	call	_spr_play_anim
3296  1057  18 05       	jr	l_player_lost_life_00110
3297  1059              l_player_lost_life_00107:
3298  1059  21 00 00    	ld	hl,_tmp
3299  105C  36 00       	ld	(hl),0x00
3300  105E              l_player_lost_life_00110:
3301  105E  21 05 00    	ld	hl,0x0005
3302  1061  CD 00 00    	call	_z80_delay_ms_fastcall
3303  1064  18 CB       	jr	l_player_lost_life_00111
3304  1066              l_player_lost_life_00113:
3305  1066  21 F4 01    	ld	hl,0x01f4
3306  1069  CD 00 00    	call	_z80_delay_ms_fastcall
3307  106C  3A 00 00    	ld	a,(_game_start_scr)
3308  106F  32 00 00    	ld	(_scr_curr),a
3309  1072  CD 00 00    	call	_game_round_init
3310  1075  C9          	ret
3311  1076              	SECTION code_compiler
3312  1076              ;	---------------------------------
3313  1076              ; Function player_hit
3314  1076              ; ---------------------------------
3315  1076              _player_hit:
3316  1076  7D          	ld	a,l
3317  1077  4D          	ld	c,l
3318  1078  21 00 00    	ld	hl,_player_vita
3319  107B  96          	sub	a, (hl)
3320  107C  30 17       	jr	NC,l_player_hit_00107
3321  107E  3A 00 00    	ld	a,(_game_inmune)
3322  1081  B7          	or	a, a
3323  1082  20 06       	jr	NZ,l_player_hit_00102
3324  1084  21 00 00    	ld	hl,_player_vita
3325  1087  7E          	ld	a, (hl)
3326  1088  91          	sub	a, c
3327  1089  77          	ld	(hl), a
3328  108A              l_player_hit_00102:
3329  108A  2A 00 00    	ld	hl,(_curr_time)
3330  108D  22 00 00    	ld	(_player_hit_time),hl
3331  1090  CD 00 00    	call	_game_update_stats
3332  1093  18 2C       	jr	l_player_hit_00109
3333  1095              l_player_hit_00107:
3334  1095  21 00 00    	ld	hl,_player_vita
3335  1098  36 00       	ld	(hl),0x00
3336  109A  CD 00 00    	call	_game_update_stats
3337  109D  CD 6B 0F    	call	_player_lost_life
3338  10A0  21 00 00    	ld	hl,_player_lives
3339  10A3  7E          	ld	a, (hl)
3340  10A4  B7          	or	a, a
3341  10A5  28 10       	jr	Z,l_player_hit_00104
3342  10A7  35          	dec	(hl)
3343  10A8  21 00 00    	ld	hl,_player_mana
3344  10AB  36 64       	ld	(hl),0x64
3345  10AD  21 00 00    	ld	hl,_player_vita
3346  10B0  36 64       	ld	(hl),0x64
3347  10B2  CD 00 00    	call	_game_update_stats
3348  10B5  18 0A       	jr	l_player_hit_00109
3349  10B7              l_player_hit_00104:
3350  10B7  21 00 00    	ld	hl,_player_lives
3351  10BA  36 00       	ld	(hl),0x00
3352  10BC  21 00 00    	ld	hl,_game_over
3353  10BF  36 01       	ld	(hl),0x01
3354  10C1              l_player_hit_00109:
3355  10C1  C9          	ret
3356  10C2              	SECTION IGNORE
3357  0000              
