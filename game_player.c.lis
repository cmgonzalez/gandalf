1     0000              MODULE game_player_c
2     0000              
3     0000              ;--------------------------------------------------------
4     0000              ; File Created by SDCC : free open source ANSI-C Compiler
5     0000              ; Version 3.6.5 #9958 (Mac OS X i386)
6     0000              ;--------------------------------------------------------
7     0000              ; Processed by Z88DK
8     0000              ;--------------------------------------------------------
9     0000              
10    0000              	EXTERN __divschar
11    0000              	EXTERN __divschar_callee
12    0000              	EXTERN __divsint
13    0000              	EXTERN __divsint_callee
14    0000              	EXTERN __divslong
15    0000              	EXTERN __divslong_callee
16    0000              	EXTERN __divslonglong
17    0000              	EXTERN __divslonglong_callee
18    0000              	EXTERN __divsuchar
19    0000              	EXTERN __divsuchar_callee
20    0000              	EXTERN __divuchar
21    0000              	EXTERN __divuchar_callee
22    0000              	EXTERN __divuint
23    0000              	EXTERN __divuint_callee
24    0000              	EXTERN __divulong
25    0000              	EXTERN __divulong_callee
26    0000              	EXTERN __divulonglong
27    0000              	EXTERN __divulonglong_callee
28    0000              	EXTERN __divuschar
29    0000              	EXTERN __divuschar_callee
30    0000              	EXTERN __modschar
31    0000              	EXTERN __modschar_callee
32    0000              	EXTERN __modsint
33    0000              	EXTERN __modsint_callee
34    0000              	EXTERN __modslong
35    0000              	EXTERN __modslong_callee
36    0000              	EXTERN __modslonglong
37    0000              	EXTERN __modslonglong_callee
38    0000              	EXTERN __modsuchar
39    0000              	EXTERN __modsuchar_callee
40    0000              	EXTERN __moduchar
41    0000              	EXTERN __moduchar_callee
42    0000              	EXTERN __moduint
43    0000              	EXTERN __moduint_callee
44    0000              	EXTERN __modulong
45    0000              	EXTERN __modulong_callee
46    0000              	EXTERN __modulonglong
47    0000              	EXTERN __modulonglong_callee
48    0000              	EXTERN __moduschar
49    0000              	EXTERN __moduschar_callee
50    0000              	EXTERN __mulint
51    0000              	EXTERN __mulint_callee
52    0000              	EXTERN __mullong
53    0000              	EXTERN __mullong_callee
54    0000              	EXTERN __mullonglong
55    0000              	EXTERN __mullonglong_callee
56    0000              	EXTERN __mulschar
57    0000              	EXTERN __mulschar_callee
58    0000              	EXTERN __mulsuchar
59    0000              	EXTERN __mulsuchar_callee
60    0000              	EXTERN __muluschar
61    0000              	EXTERN __muluschar_callee
62    0000              	EXTERN __rlslonglong
63    0000              	EXTERN __rlslonglong_callee
64    0000              	EXTERN __rlulonglong
65    0000              	EXTERN __rlulonglong_callee
66    0000              	EXTERN __rrslonglong
67    0000              	EXTERN __rrslonglong_callee
68    0000              	EXTERN __rrulonglong
69    0000              	EXTERN __rrulonglong_callee
70    0000              	EXTERN ___sdcc_call_hl
71    0000              	EXTERN ___sdcc_call_iy
72    0000              	EXTERN ___sdcc_enter_ix
73    0000              	EXTERN _banked_call
74    0000              	EXTERN _banked_ret
75    0000              	EXTERN ___fs2schar
76    0000              	EXTERN ___fs2schar_callee
77    0000              	EXTERN ___fs2sint
78    0000              	EXTERN ___fs2sint_callee
79    0000              	EXTERN ___fs2slong
80    0000              	EXTERN ___fs2slong_callee
81    0000              	EXTERN ___fs2slonglong
82    0000              	EXTERN ___fs2slonglong_callee
83    0000              	EXTERN ___fs2uchar
84    0000              	EXTERN ___fs2uchar_callee
85    0000              	EXTERN ___fs2uint
86    0000              	EXTERN ___fs2uint_callee
87    0000              	EXTERN ___fs2ulong
88    0000              	EXTERN ___fs2ulong_callee
89    0000              	EXTERN ___fs2ulonglong
90    0000              	EXTERN ___fs2ulonglong_callee
91    0000              	EXTERN ___fsadd
92    0000              	EXTERN ___fsadd_callee
93    0000              	EXTERN ___fsdiv
94    0000              	EXTERN ___fsdiv_callee
95    0000              	EXTERN ___fseq
96    0000              	EXTERN ___fseq_callee
97    0000              	EXTERN ___fsgt
98    0000              	EXTERN ___fsgt_callee
99    0000              	EXTERN ___fslt
100   0000              	EXTERN ___fslt_callee
101   0000              	EXTERN ___fsmul
102   0000              	EXTERN ___fsmul_callee
103   0000              	EXTERN ___fsneq
104   0000              	EXTERN ___fsneq_callee
105   0000              	EXTERN ___fssub
106   0000              	EXTERN ___fssub_callee
107   0000              	EXTERN ___schar2fs
108   0000              	EXTERN ___schar2fs_callee
109   0000              	EXTERN ___sint2fs
110   0000              	EXTERN ___sint2fs_callee
111   0000              	EXTERN ___slong2fs
112   0000              	EXTERN ___slong2fs_callee
113   0000              	EXTERN ___slonglong2fs
114   0000              	EXTERN ___slonglong2fs_callee
115   0000              	EXTERN ___uchar2fs
116   0000              	EXTERN ___uchar2fs_callee
117   0000              	EXTERN ___uint2fs
118   0000              	EXTERN ___uint2fs_callee
119   0000              	EXTERN ___ulong2fs
120   0000              	EXTERN ___ulong2fs_callee
121   0000              	EXTERN ___ulonglong2fs
122   0000              	EXTERN ___ulonglong2fs_callee
123   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
126   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
127   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
128   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
129   0000              	EXTERN ____sdcc_4_ldi_save_bc
130   0000              	EXTERN ____sdcc_4_push_hlix
131   0000              	EXTERN ____sdcc_4_push_mhl
132   0000              	EXTERN ____sdcc_lib_setmem_hl
133   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
134   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
135   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
136   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
137   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
138   0000              	EXTERN ____sdcc_ll_add_deix_hlix
139   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
140   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
141   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
142   0000              	EXTERN ____sdcc_ll_asr_hlix_a
143   0000              	EXTERN ____sdcc_ll_asr_mbc_a
144   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
145   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
146   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
147   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
148   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
149   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
150   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
151   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
152   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
153   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
155   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
156   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
157   0000              	EXTERN ____sdcc_ll_push_hlix
158   0000              	EXTERN ____sdcc_ll_push_mhl
159   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
160   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
161   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
162   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
163   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
164   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
165   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
166   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
167   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
168   0000              	EXTERN ____sdcc_load_debc_deix
169   0000              	EXTERN ____sdcc_load_dehl_deix
170   0000              	EXTERN ____sdcc_load_debc_mhl
171   0000              	EXTERN ____sdcc_load_hlde_mhl
172   0000              	EXTERN ____sdcc_store_dehl_bcix
173   0000              	EXTERN ____sdcc_store_debc_hlix
174   0000              	EXTERN ____sdcc_store_debc_mhl
175   0000              	EXTERN ____sdcc_cpu_pop_ei
176   0000              	EXTERN ____sdcc_cpu_pop_ei_jp
177   0000              	EXTERN ____sdcc_cpu_push_di
178   0000              	EXTERN ____sdcc_outi
179   0000              	EXTERN ____sdcc_outi_128
180   0000              	EXTERN ____sdcc_outi_256
181   0000              	EXTERN ____sdcc_ldi
182   0000              	EXTERN ____sdcc_ldi_128
183   0000              	EXTERN ____sdcc_ldi_256
184   0000              
185   0000              ;--------------------------------------------------------
186   0000              ; Public variables in this module
187   0000              ;--------------------------------------------------------
188   0000              	GLOBAL _player_check_map
189   0000              	GLOBAL _player_1up
190   0000              	GLOBAL _player_init
191   0000              	GLOBAL _player_turn
192   0000              	GLOBAL _player_move
193   0000              	GLOBAL _player_check_input
194   0000              	GLOBAL _player_move_input
195   0000              	GLOBAL _player_fix_walk_lin
196   0000              	GLOBAL _player_fire
197   0000              	GLOBAL _player_collision
198   0000              	GLOBAL _player_pick_mushroom
199   0000              	GLOBAL _player_check_stairs_vertical
200   0000              	GLOBAL _player_check_stairs
201   0000              	GLOBAL _player_anim_tile
202   0000              	GLOBAL _player_tile
203   0000              	GLOBAL _player_pick_item
204   0000              	GLOBAL _player_hit_platform
205   0000              	GLOBAL _player_hit_platform_clear
206   0000              	GLOBAL _player_score_add
207   0000              	GLOBAL _player_check_floor
208   0000              	GLOBAL _player_gasta_brick
209   0000              	GLOBAL _player_move_jump
210   0000              	GLOBAL _player_open_door
211   0000              	GLOBAL _player_lost_life
212   0000              	GLOBAL _player_hit
213   0000              ;--------------------------------------------------------
214   0000              ; Externals used
215   0000              ;--------------------------------------------------------
216   0000              	GLOBAL _ulltoa_callee
217   0000              	GLOBAL _ulltoa
218   0000              	GLOBAL _strtoull_callee
219   0000              	GLOBAL _strtoull
220   0000              	GLOBAL _strtoll_callee
221   0000              	GLOBAL _strtoll
222   0000              	GLOBAL _lltoa_callee
223   0000              	GLOBAL _lltoa
224   0000              	GLOBAL _llabs_callee
225   0000              	GLOBAL _llabs
226   0000              	GLOBAL __lldivu__callee
227   0000              	GLOBAL __lldivu_
228   0000              	GLOBAL __lldiv__callee
229   0000              	GLOBAL __lldiv_
230   0000              	GLOBAL _atoll_callee
231   0000              	GLOBAL _atoll
232   0000              	GLOBAL _realloc_unlocked_callee
233   0000              	GLOBAL _realloc_unlocked
234   0000              	GLOBAL _malloc_unlocked_fastcall
235   0000              	GLOBAL _malloc_unlocked
236   0000              	GLOBAL _free_unlocked_fastcall
237   0000              	GLOBAL _free_unlocked
238   0000              	GLOBAL _calloc_unlocked_callee
239   0000              	GLOBAL _calloc_unlocked
240   0000              	GLOBAL _aligned_alloc_unlocked_callee
241   0000              	GLOBAL _aligned_alloc_unlocked
242   0000              	GLOBAL _realloc_callee
243   0000              	GLOBAL _realloc
244   0000              	GLOBAL _malloc_fastcall
245   0000              	GLOBAL _malloc
246   0000              	GLOBAL _free_fastcall
247   0000              	GLOBAL _free
248   0000              	GLOBAL _calloc_callee
249   0000              	GLOBAL _calloc
250   0000              	GLOBAL _aligned_alloc_callee
251   0000              	GLOBAL _aligned_alloc
252   0000              	GLOBAL _utoa_callee
253   0000              	GLOBAL _utoa
254   0000              	GLOBAL _ultoa_callee
255   0000              	GLOBAL _ultoa
256   0000              	GLOBAL _system_fastcall
257   0000              	GLOBAL _system
258   0000              	GLOBAL _strtoul_callee
259   0000              	GLOBAL _strtoul
260   0000              	GLOBAL _strtol_callee
261   0000              	GLOBAL _strtol
262   0000              	GLOBAL _strtof_callee
263   0000              	GLOBAL _strtof
264   0000              	GLOBAL _strtod_callee
265   0000              	GLOBAL _strtod
266   0000              	GLOBAL _srand_fastcall
267   0000              	GLOBAL _srand
268   0000              	GLOBAL _rand
269   0000              	GLOBAL _quick_exit_fastcall
270   0000              	GLOBAL _quick_exit
271   0000              	GLOBAL _qsort_callee
272   0000              	GLOBAL _qsort
273   0000              	GLOBAL _ltoa_callee
274   0000              	GLOBAL _ltoa
275   0000              	GLOBAL _labs_fastcall
276   0000              	GLOBAL _labs
277   0000              	GLOBAL _itoa_callee
278   0000              	GLOBAL _itoa
279   0000              	GLOBAL _ftoh_callee
280   0000              	GLOBAL _ftoh
281   0000              	GLOBAL _ftog_callee
282   0000              	GLOBAL _ftog
283   0000              	GLOBAL _ftoe_callee
284   0000              	GLOBAL _ftoe
285   0000              	GLOBAL _ftoa_callee
286   0000              	GLOBAL _ftoa
287   0000              	GLOBAL _exit_fastcall
288   0000              	GLOBAL _exit
289   0000              	GLOBAL _dtoh_callee
290   0000              	GLOBAL _dtoh
291   0000              	GLOBAL _dtog_callee
292   0000              	GLOBAL _dtog
293   0000              	GLOBAL _dtoe_callee
294   0000              	GLOBAL _dtoe
295   0000              	GLOBAL _dtoa_callee
296   0000              	GLOBAL _dtoa
297   0000              	GLOBAL _bsearch_callee
298   0000              	GLOBAL _bsearch
299   0000              	GLOBAL _atol_fastcall
300   0000              	GLOBAL _atol
301   0000              	GLOBAL _atoi_fastcall
302   0000              	GLOBAL _atoi
303   0000              	GLOBAL _atof_fastcall
304   0000              	GLOBAL _atof
305   0000              	GLOBAL _atexit_fastcall
306   0000              	GLOBAL _atexit
307   0000              	GLOBAL _at_quick_exit_fastcall
308   0000              	GLOBAL _at_quick_exit
309   0000              	GLOBAL _abs_fastcall
310   0000              	GLOBAL _abs
311   0000              	GLOBAL _abort
312   0000              	GLOBAL __strtou__callee
313   0000              	GLOBAL __strtou_
314   0000              	GLOBAL __strtoi__callee
315   0000              	GLOBAL __strtoi_
316   0000              	GLOBAL __random_uniform_xor_8__fastcall
317   0000              	GLOBAL __random_uniform_xor_8_
318   0000              	GLOBAL __random_uniform_xor_32__fastcall
319   0000              	GLOBAL __random_uniform_xor_32_
320   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
321   0000              	GLOBAL __random_uniform_cmwc_8_
322   0000              	GLOBAL __shellsort__callee
323   0000              	GLOBAL __shellsort_
324   0000              	GLOBAL __quicksort__callee
325   0000              	GLOBAL __quicksort_
326   0000              	GLOBAL __insertion_sort__callee
327   0000              	GLOBAL __insertion_sort_
328   0000              	GLOBAL __ldivu__callee
329   0000              	GLOBAL __ldivu_
330   0000              	GLOBAL __ldiv__callee
331   0000              	GLOBAL __ldiv_
332   0000              	GLOBAL __divu__callee
333   0000              	GLOBAL __divu_
334   0000              	GLOBAL __div__callee
335   0000              	GLOBAL __div_
336   0000              	GLOBAL _NIRVANAP_drawTW_raw_callee
337   0000              	GLOBAL _NIRVANAP_drawTW_raw
338   0000              	GLOBAL _NIRVANAP_drawTW_callee
339   0000              	GLOBAL _NIRVANAP_drawTW
340   0000              	GLOBAL _NIRVANAP_drawW_raw_callee
341   0000              	GLOBAL _NIRVANAP_drawW_raw
342   0000              	GLOBAL _NIRVANAP_drawW_callee
343   0000              	GLOBAL _NIRVANAP_drawW
344   0000              	GLOBAL _NIRVANAP_spriteT_callee
345   0000              	GLOBAL _NIRVANAP_spriteT
346   0000              	GLOBAL _NIRVANAP_fillC_callee
347   0000              	GLOBAL _NIRVANAP_fillC
348   0000              	GLOBAL _NIRVANAP_readC_callee
349   0000              	GLOBAL _NIRVANAP_readC
350   0000              	GLOBAL _NIRVANAP_paintC_callee
351   0000              	GLOBAL _NIRVANAP_paintC
352   0000              	GLOBAL _NIRVANAP_printC_callee
353   0000              	GLOBAL _NIRVANAP_printC
354   0000              	GLOBAL _NIRVANAP_fillT_raw_callee
355   0000              	GLOBAL _NIRVANAP_fillT_raw
356   0000              	GLOBAL _NIRVANAP_fillT_callee
357   0000              	GLOBAL _NIRVANAP_fillT
358   0000              	GLOBAL _NIRVANAP_drawT_raw_callee
359   0000              	GLOBAL _NIRVANAP_drawT_raw
360   0000              	GLOBAL _NIRVANAP_drawT_callee
361   0000              	GLOBAL _NIRVANAP_drawT
362   0000              	GLOBAL _NIRVANAP_stop
363   0000              	GLOBAL _NIRVANAP_start
364   0000              	GLOBAL _debug3
365   0000              	GLOBAL _debug2
366   0000              	GLOBAL _debug
367   0000              	GLOBAL _zx_print_str
368   0000              	GLOBAL _zx_print_int
369   0000              	GLOBAL _zx_print_chr
370   0000              	GLOBAL _zx_print_bonus_time
371   0000              	GLOBAL _zx_isr
372   0000              	GLOBAL _z80_otdr_callee
373   0000              	GLOBAL _z80_otdr
374   0000              	GLOBAL _z80_otir_callee
375   0000              	GLOBAL _z80_otir
376   0000              	GLOBAL _z80_outp_callee
377   0000              	GLOBAL _z80_outp
378   0000              	GLOBAL _z80_indr_callee
379   0000              	GLOBAL _z80_indr
380   0000              	GLOBAL _z80_inir_callee
381   0000              	GLOBAL _z80_inir
382   0000              	GLOBAL _z80_inp_fastcall
383   0000              	GLOBAL _z80_inp
384   0000              	GLOBAL _z80_set_int_state_fastcall
385   0000              	GLOBAL _z80_set_int_state
386   0000              	GLOBAL _z80_get_int_state
387   0000              	GLOBAL _z80_delay_tstate_fastcall
388   0000              	GLOBAL _z80_delay_tstate
389   0000              	GLOBAL _z80_delay_ms_fastcall
390   0000              	GLOBAL _z80_delay_ms
391   0000              	GLOBAL _im2_remove_generic_callback_callee
392   0000              	GLOBAL _im2_remove_generic_callback
393   0000              	GLOBAL _im2_prepend_generic_callback_callee
394   0000              	GLOBAL _im2_prepend_generic_callback
395   0000              	GLOBAL _im2_append_generic_callback_callee
396   0000              	GLOBAL _im2_append_generic_callback
397   0000              	GLOBAL _im2_create_generic_isr_8080_callee
398   0000              	GLOBAL _im2_create_generic_isr_8080
399   0000              	GLOBAL _im2_create_generic_isr_callee
400   0000              	GLOBAL _im2_create_generic_isr
401   0000              	GLOBAL _im2_install_isr_callee
402   0000              	GLOBAL _im2_install_isr
403   0000              	GLOBAL _im2_init_fastcall
404   0000              	GLOBAL _im2_init
405   0000              	GLOBAL _intrinsic_swap_word_32_fastcall
406   0000              	GLOBAL _intrinsic_swap_word_32
407   0000              	GLOBAL _intrinsic_swap_endian_32_fastcall
408   0000              	GLOBAL _intrinsic_swap_endian_32
409   0000              	GLOBAL _intrinsic_swap_endian_16_fastcall
410   0000              	GLOBAL _intrinsic_swap_endian_16
411   0000              	GLOBAL _intrinsic_return_de
412   0000              	GLOBAL _intrinsic_return_bc
413   0000              	GLOBAL _intrinsic_exx
414   0000              	GLOBAL _intrinsic_ex_de_hl
415   0000              	GLOBAL _intrinsic_nop
416   0000              	GLOBAL _intrinsic_im_2
417   0000              	GLOBAL _intrinsic_im_1
418   0000              	GLOBAL _intrinsic_im_0
419   0000              	GLOBAL _intrinsic_retn
420   0000              	GLOBAL _intrinsic_reti
421   0000              	GLOBAL _intrinsic_halt
422   0000              	GLOBAL _intrinsic_ei
423   0000              	GLOBAL _intrinsic_di
424   0000              	GLOBAL _intrinsic_stub
425   0000              	GLOBAL _intrinsic_outi
426   0000              	GLOBAL _intrinsic_ldi
427   0000              	GLOBAL _zx_pattern_fill_callee
428   0000              	GLOBAL _zx_pattern_fill
429   0000              	GLOBAL _zx_saddrpup_fastcall
430   0000              	GLOBAL _zx_saddrpup
431   0000              	GLOBAL _zx_saddrpright_callee
432   0000              	GLOBAL _zx_saddrpright
433   0000              	GLOBAL _zx_saddrpleft_callee
434   0000              	GLOBAL _zx_saddrpleft
435   0000              	GLOBAL _zx_saddrpdown_fastcall
436   0000              	GLOBAL _zx_saddrpdown
437   0000              	GLOBAL _zx_saddrcup_fastcall
438   0000              	GLOBAL _zx_saddrcup
439   0000              	GLOBAL _zx_saddrcright_fastcall
440   0000              	GLOBAL _zx_saddrcright
441   0000              	GLOBAL _zx_saddrcleft_fastcall
442   0000              	GLOBAL _zx_saddrcleft
443   0000              	GLOBAL _zx_saddrcdown_fastcall
444   0000              	GLOBAL _zx_saddrcdown
445   0000              	GLOBAL _zx_saddr2py_fastcall
446   0000              	GLOBAL _zx_saddr2py
447   0000              	GLOBAL _zx_saddr2px_fastcall
448   0000              	GLOBAL _zx_saddr2px
449   0000              	GLOBAL _zx_saddr2cy_fastcall
450   0000              	GLOBAL _zx_saddr2cy
451   0000              	GLOBAL _zx_saddr2cx_fastcall
452   0000              	GLOBAL _zx_saddr2cx
453   0000              	GLOBAL _zx_saddr2aaddr_fastcall
454   0000              	GLOBAL _zx_saddr2aaddr
455   0000              	GLOBAL _zx_py2saddr_fastcall
456   0000              	GLOBAL _zx_py2saddr
457   0000              	GLOBAL _zx_py2aaddr_fastcall
458   0000              	GLOBAL _zx_py2aaddr
459   0000              	GLOBAL _zx_pxy2saddr_callee
460   0000              	GLOBAL _zx_pxy2saddr
461   0000              	GLOBAL _zx_pxy2aaddr_callee
462   0000              	GLOBAL _zx_pxy2aaddr
463   0000              	GLOBAL _zx_px2bitmask_fastcall
464   0000              	GLOBAL _zx_px2bitmask
465   0000              	GLOBAL _zx_cy2saddr_fastcall
466   0000              	GLOBAL _zx_cy2saddr
467   0000              	GLOBAL _zx_cy2aaddr_fastcall
468   0000              	GLOBAL _zx_cy2aaddr
469   0000              	GLOBAL _zx_cxy2saddr_callee
470   0000              	GLOBAL _zx_cxy2saddr
471   0000              	GLOBAL _zx_cxy2aaddr_callee
472   0000              	GLOBAL _zx_cxy2aaddr
473   0000              	GLOBAL _zx_bitmask2px_fastcall
474   0000              	GLOBAL _zx_bitmask2px
475   0000              	GLOBAL _zx_aaddrcup_fastcall
476   0000              	GLOBAL _zx_aaddrcup
477   0000              	GLOBAL _zx_aaddrcright_fastcall
478   0000              	GLOBAL _zx_aaddrcright
479   0000              	GLOBAL _zx_aaddrcleft_fastcall
480   0000              	GLOBAL _zx_aaddrcleft
481   0000              	GLOBAL _zx_aaddrcdown_fastcall
482   0000              	GLOBAL _zx_aaddrcdown
483   0000              	GLOBAL _zx_aaddr2saddr_fastcall
484   0000              	GLOBAL _zx_aaddr2saddr
485   0000              	GLOBAL _zx_aaddr2py_fastcall
486   0000              	GLOBAL _zx_aaddr2py
487   0000              	GLOBAL _zx_aaddr2px_fastcall
488   0000              	GLOBAL _zx_aaddr2px
489   0000              	GLOBAL _zx_aaddr2cy_fastcall
490   0000              	GLOBAL _zx_aaddr2cy
491   0000              	GLOBAL _zx_aaddr2cx_fastcall
492   0000              	GLOBAL _zx_aaddr2cx
493   0000              	GLOBAL _zx_visit_wc_pix_callee
494   0000              	GLOBAL _zx_visit_wc_pix
495   0000              	GLOBAL _zx_visit_wc_attr_callee
496   0000              	GLOBAL _zx_visit_wc_attr
497   0000              	GLOBAL _zx_scroll_wc_up_pix_callee
498   0000              	GLOBAL _zx_scroll_wc_up_pix
499   0000              	GLOBAL _zx_scroll_wc_up_attr_callee
500   0000              	GLOBAL _zx_scroll_wc_up_attr
501   0000              	GLOBAL _zx_scroll_wc_up_callee
502   0000              	GLOBAL _zx_scroll_wc_up
503   0000              	GLOBAL _zx_scroll_up_pix_callee
504   0000              	GLOBAL _zx_scroll_up_pix
505   0000              	GLOBAL _zx_scroll_up_attr_callee
506   0000              	GLOBAL _zx_scroll_up_attr
507   0000              	GLOBAL _zx_scroll_up_callee
508   0000              	GLOBAL _zx_scroll_up
509   0000              	GLOBAL _zx_cls_wc_pix_callee
510   0000              	GLOBAL _zx_cls_wc_pix
511   0000              	GLOBAL _zx_cls_wc_attr_callee
512   0000              	GLOBAL _zx_cls_wc_attr
513   0000              	GLOBAL _zx_cls_wc_callee
514   0000              	GLOBAL _zx_cls_wc
515   0000              	GLOBAL _zx_cls_pix_fastcall
516   0000              	GLOBAL _zx_cls_pix
517   0000              	GLOBAL _zx_cls_attr_fastcall
518   0000              	GLOBAL _zx_cls_attr
519   0000              	GLOBAL _zx_cls_fastcall
520   0000              	GLOBAL _zx_cls
521   0000              	GLOBAL _zx_border_fastcall
522   0000              	GLOBAL _zx_border
523   0000              	GLOBAL _spr_colision_b2
524   0000              	GLOBAL _spr_colision_b
525   0000              	GLOBAL _spr_unflatten
526   0000              	GLOBAL _spr_flatten
527   0000              	GLOBAL _spr_btile_paint_back
528   0000              	GLOBAL _spr_bullet_explode
529   0000              	GLOBAL _spr_init_effects
530   0000              	GLOBAL _spr_turn_horizontal
531   0000              	GLOBAL _spr_bullets_play
532   0000              	GLOBAL _spr_play_anim
533   0000              	GLOBAL _spr_add_anim
534   0000              	GLOBAL _spr_clear_scr
535   0000              	GLOBAL _spr_page_map
536   0000              	GLOBAL _spr_page_down
537   0000              	GLOBAL _spr_page_up
538   0000              	GLOBAL _spr_page_right
539   0000              	GLOBAL _spr_page_left
540   0000              	GLOBAL _spr_tile_paint
541   0000              	GLOBAL _spr_draw_index
542   0000              	GLOBAL _spr_brick_anim
543   0000              	GLOBAL _spr_back_repaint
544   0000              	GLOBAL _spr_tile
545   0000              	GLOBAL _spr_destroy
546   0000              	GLOBAL _spr_tile_dir
547   0000              	GLOBAL _spr_redraw
548   0000              	GLOBAL _spr_move_left
549   0000              	GLOBAL _spr_move_right
550   0000              	GLOBAL _spr_move_horizontal
551   0000              	GLOBAL _spr_move_down
552   0000              	GLOBAL _spr_move_up
553   0000              	GLOBAL _spr_set_right
554   0000              	GLOBAL _spr_set_left
555   0000              	GLOBAL _spr_set_down
556   0000              	GLOBAL _spr_set_up
557   0000              	GLOBAL _spr_calc_index
558   0000              	GLOBAL _spr_chktime
559   0000              	GLOBAL _menu_define_key
560   0000              	GLOBAL _menu_redefine
561   0000              	GLOBAL _menu_main_print
562   0000              	GLOBAL _menu_main
563   0000              	GLOBAL _game_match_back
564   0000              	GLOBAL _game_attribs
565   0000              	GLOBAL _game_boss_clear
566   0000              	GLOBAL _game_boss_kill
567   0000              	GLOBAL _game_obj_clear
568   0000              	GLOBAL _game_obj_chk
569   0000              	GLOBAL _game_obj_set
570   0000              	GLOBAL _game_shoot_fire_boss
571   0000              	GLOBAL _game_shoot_fire
572   0000              	GLOBAL _game_add_enemy
573   0000              	GLOBAL _game_print_header
574   0000              	GLOBAL _game_check_time
575   0000              	GLOBAL _game_rotate_attrib_osd
576   0000              	GLOBAL _game_rotate_attrib
577   0000              	GLOBAL _game_colour_message
578   0000              	GLOBAL _game_paint_attrib_lin_osd
579   0000              	GLOBAL _game_paint_attrib_lin_h
580   0000              	GLOBAL _game_paint_attrib_lin
581   0000              	GLOBAL _game_print_score
582   0000              	GLOBAL _game_check_cell
583   0000              	GLOBAL _game_check_map
584   0000              	GLOBAL _game_loop
585   0000              	GLOBAL _game_round_init
586   0000              	GLOBAL _game_set_checkpoint
587   0000              	GLOBAL _game_start_timer
588   0000              	GLOBAL _game_update_stats
589   0000              	GLOBAL _game_print_footer
590   0000              	GLOBAL _game_fill_row
591   0000              	GLOBAL _game_fps
592   0000              	GLOBAL _game_respawn
593   0000              	GLOBAL _game_draw_screen
594   0000              	GLOBAL _boss_draw
595   0000              	GLOBAL _boss_turn
596   0000              	GLOBAL _enemy_avoid_dead
597   0000              	GLOBAL _enemy_avoid_fall
598   0000              	GLOBAL _enemy_kill
599   0000              	GLOBAL _enemy_respawn
600   0000              	GLOBAL _enemy_init
601   0000              	GLOBAL _enemy_move
602   0000              	GLOBAL _enemy_turn
603   0000              	GLOBAL _enemy_static
604   0000              	GLOBAL _enemy_walk
605   0000              	GLOBAL _enemy_horizontal
606   0000              	GLOBAL _enemy_vertical
607   0000              	GLOBAL _ay_reset
608   0000              	GLOBAL _ay_song_stop
609   0000              	GLOBAL _ay_song_play
610   0000              	GLOBAL _ay_fx_stop
611   0000              	GLOBAL _ay_fx_play
612   0000              	GLOBAL _ay_is_playing
613   0000              	GLOBAL _test_func
614   0000              	GLOBAL _test_proc
615   0000              	GLOBAL _in_mouse_kempston_wheel_delta
616   0000              	GLOBAL _in_mouse_kempston_wheel
617   0000              	GLOBAL _in_mouse_kempston_callee
618   0000              	GLOBAL _in_mouse_kempston
619   0000              	GLOBAL _in_mouse_kempston_setpos_callee
620   0000              	GLOBAL _in_mouse_kempston_setpos
621   0000              	GLOBAL _in_mouse_kempston_reset
622   0000              	GLOBAL _in_mouse_kempston_init
623   0000              	GLOBAL _in_mouse_amx_wheel_delta
624   0000              	GLOBAL _in_mouse_amx_wheel
625   0000              	GLOBAL _in_mouse_amx_callee
626   0000              	GLOBAL _in_mouse_amx
627   0000              	GLOBAL _in_mouse_amx_setpos_callee
628   0000              	GLOBAL _in_mouse_amx_setpos
629   0000              	GLOBAL _in_mouse_amx_reset
630   0000              	GLOBAL _in_mouse_amx_init_callee
631   0000              	GLOBAL _in_mouse_amx_init
632   0000              	GLOBAL _in_stick_sinclair2
633   0000              	GLOBAL _in_stick_sinclair1
634   0000              	GLOBAL _in_stick_kempston
635   0000              	GLOBAL _in_stick_fuller
636   0000              	GLOBAL _in_stick_cursor
637   0000              	GLOBAL _in_stick_keyboard_fastcall
638   0000              	GLOBAL _in_stick_keyboard
639   0000              	GLOBAL _in_wait_nokey
640   0000              	GLOBAL _in_wait_key
641   0000              	GLOBAL _in_test_key
642   0000              	GLOBAL _in_pause_fastcall
643   0000              	GLOBAL _in_pause
644   0000              	GLOBAL _in_key_scancode_fastcall
645   0000              	GLOBAL _in_key_scancode
646   0000              	GLOBAL _in_key_pressed_fastcall
647   0000              	GLOBAL _in_key_pressed
648   0000              	GLOBAL _in_inkey
649   0000              	GLOBAL _NIRVANAP_CHAR_TABLE
650   0000              	GLOBAL _NIRVANAP_WIDE_IMAGES
651   0000              	GLOBAL _NIRVANAP_TILE_IMAGES
652   0000              	GLOBAL _NIRVANAP_HOLE
653   0000              	GLOBAL _NIRVANAP_ISR_HOOK
654   0000              	GLOBAL _scan_map
655   0000              	GLOBAL _key_map
656   0000              	GLOBAL _player_lvl_table
657   0000              	GLOBAL _stp_row
658   0000              	GLOBAL _stp_col
659   0000              	GLOBAL _stp_tile
660   0000              	GLOBAL _map_paper_last_a
661   0000              	GLOBAL _map_paper_last
662   0000              	GLOBAL _map_paper_clr
663   0000              	GLOBAL _map_paper
664   0000              	GLOBAL _draw_count
665   0000              	GLOBAL _g_player_hit_right
666   0000              	GLOBAL _g_player_hit_left
667   0000              	GLOBAL _bullet_count
668   0000              	GLOBAL _spr_hack
669   0000              	GLOBAL _boss_stat
670   0000              	GLOBAL _boss_time_fire
671   0000              	GLOBAL _boss_time
672   0000              	GLOBAL _boss_tile
673   0000              	GLOBAL _boss_inc
674   0000              	GLOBAL _boss_col
675   0000              	GLOBAL _boss_lin
676   0000              	GLOBAL _bullet
677   0000              	GLOBAL _bullet_vel
678   0000              	GLOBAL _bullet_frames
679   0000              	GLOBAL _bullet_colint
680   0000              	GLOBAL _bullet_dir
681   0000              	GLOBAL _bullet_tile
682   0000              	GLOBAL _bullet_col
683   0000              	GLOBAL _bullet_lin
684   0000              	GLOBAL _bullet_col0
685   0000              	GLOBAL _bullet_lin0
686   0000              	GLOBAL _bullet_max
687   0000              	GLOBAL _bullet_class
688   0000              	GLOBAL _mush_class
689   0000              	GLOBAL _mush_index
690   0000              	GLOBAL _anim_count
691   0000              	GLOBAL _anim_respanwn
692   0000              	GLOBAL _anim_loop
693   0000              	GLOBAL _anim_end
694   0000              	GLOBAL _anim_int
695   0000              	GLOBAL _anim_tile
696   0000              	GLOBAL _anim_col
697   0000              	GLOBAL _anim_lin
698   0000              	GLOBAL _map_heigth
699   0000              	GLOBAL _map_width
700   0000              	GLOBAL _scr_curr
701   0000              	GLOBAL _sprite_kind
702   0000              	GLOBAL _scr_obj1
703   0000              	GLOBAL _scr_obj0
704   0000              	GLOBAL _scr_map
705   0000              	GLOBAL _sprite_speed_alt
706   0000              	GLOBAL _spr_init
707   0000              	GLOBAL _spr_map_tile
708   0000              	GLOBAL _sprite_frames
709   0000              	GLOBAL _sprite_speed
710   0000              	GLOBAL _screen_ink
711   0000              	GLOBAL _screen_paper
712   0000              	GLOBAL _player_onstair
713   0000              	GLOBAL _game_start_scr
714   0000              	GLOBAL _game_respawn_tile
715   0000              	GLOBAL _game_respawn_index
716   0000              	GLOBAL _game_respawn_time
717   0000              	GLOBAL _game_score_top
718   0000              	GLOBAL _player_coins
719   0000              	GLOBAL _player_lives
720   0000              	GLOBAL _game_over
721   0000              	GLOBAL _game_sound
722   0000              	GLOBAL _game_inf_lives
723   0000              	GLOBAL _game_inmune
724   0000              	GLOBAL _sprite_curr_index
725   0000              	GLOBAL _spr_count
726   0000              	GLOBAL _bullet_time
727   0000              	GLOBAL _anim_time
728   0000              	GLOBAL _frame_time
729   0000              	GLOBAL _curr_time
730   0000              	GLOBAL _s_state
731   0000              	GLOBAL _attrib_osd
732   0000              	GLOBAL _attrib_hl
733   0000              	GLOBAL _attrib
734   0000              	GLOBAL _zx_val_asm
735   0000              	GLOBAL _enemies
736   0000              	GLOBAL _tmp_ui
737   0000              	GLOBAL _tmp_sc
738   0000              	GLOBAL _tmp_uc
739   0000              	GLOBAL _tmp1
740   0000              	GLOBAL _tmp0
741   0000              	GLOBAL _tmp
742   0000              	GLOBAL _index1
743   0000              	GLOBAL _index0
744   0000              	GLOBAL _loop_count
745   0000              	GLOBAL _s_class
746   0000              	GLOBAL _s_col1
747   0000              	GLOBAL _s_col0
748   0000              	GLOBAL _s_lin1
749   0000              	GLOBAL _s_lin0
750   0000              	GLOBAL _s_tile1
751   0000              	GLOBAL _s_tile0
752   0000              	GLOBAL _player_brick_time
753   0000              	GLOBAL _player_hit_count
754   0000              	GLOBAL _game_show_fps
755   0000              	GLOBAL _sprite_horizontal_check
756   0000              	GLOBAL _sprite_on_air
757   0000              	GLOBAL _sprite
758   0000              	GLOBAL _fps
759   0000              	GLOBAL _game_2buttons
760   0000              	GLOBAL _game_respawn_curr_time
761   0000              	GLOBAL _game_worldup
762   0000              	GLOBAL _game_mush_count
763   0000              	GLOBAL _game_boss_fix
764   0000              	GLOBAL _game_boss_hit
765   0000              	GLOBAL _game_boss_alive
766   0000              	GLOBAL _game_boss
767   0000              	GLOBAL _game_world
768   0000              	GLOBAL _game_gravity
769   0000              	GLOBAL _player_onfire
770   0000              	GLOBAL _player_anim_stair
771   0000              	GLOBAL _player_hit_time
772   0000              	GLOBAL _game_checkpoint_scr
773   0000              	GLOBAL _game_checkpoint_lin
774   0000              	GLOBAL _game_checkpoint_col
775   0000              	GLOBAL _player_lin_scr
776   0000              	GLOBAL _player_col_scr
777   0000              	GLOBAL _player_lvl
778   0000              	GLOBAL _player_int
779   0000              	GLOBAL _player_str
780   0000              	GLOBAL _player_max_vita
781   0000              	GLOBAL _player_max_mana
782   0000              	GLOBAL _player_vita
783   0000              	GLOBAL _player_mana
784   0000              	GLOBAL _player_keys
785   0000              	GLOBAL _player_vel_inc
786   0000              	GLOBAL _player_vel_y1
787   0000              	GLOBAL _player_vel_y0
788   0000              	GLOBAL _player_vel_y
789   0000              	GLOBAL _player_vel_x
790   0000              	GLOBAL _player_score
791   0000              	GLOBAL _last_time
792   0000              	GLOBAL _player_slide
793   0000              	GLOBAL _spr_timer
794   0000              	GLOBAL _jump_lin
795   0000              	GLOBAL _player_hit_col
796   0000              	GLOBAL _player_hit_lin
797   0000              	GLOBAL _colint
798   0000              	GLOBAL _col
799   0000              	GLOBAL _lin
800   0000              	GLOBAL _tile
801   0000              	GLOBAL _state_a
802   0000              	GLOBAL _state
803   0000              	GLOBAL _class
804   0000              	GLOBAL _tbuffer
805   0000              	GLOBAL _dirs_alt
806   0000              	GLOBAL _dirs
807   0000              	GLOBAL _k2
808   0000              	GLOBAL _k1
809   0000              	GLOBAL _joyfunc2
810   0000              	GLOBAL _joyfunc1
811   0000              	GLOBAL _btiles
812   0000              	GLOBAL _spec128
813   0000              	GLOBAL _GLOBAL_ZX_PORT_7FFD
814   0000              	GLOBAL _GLOBAL_ZX_PORT_1FFD
815   0000              	GLOBAL _GLOBAL_ZX_PORT_FE
816   0000              	GLOBAL _ay_song_06_ciel
817   0000              	GLOBAL _ay_song_04_sunflower
818   0000              	GLOBAL _ay_song_04_lotr_level_start
819   0000              	GLOBAL _ay_song_04_lotr_level_complete
820   0000              	GLOBAL _ay_song_04_lotr_lose_a_life
821   0000              	GLOBAL _ay_song_04_lotr
822   0000              	GLOBAL _ay_fx_06_explosion1
823   0000              	GLOBAL _ay_fx_06_efecto
824   0000              	GLOBAL _ay_fx_06_disparo2
825   0000              	GLOBAL _ay_fx_06_disparo1
826   0000              	GLOBAL _ay_fx_04_sin_mana
827   0000              	GLOBAL _ay_fx_04_salto
828   0000              	GLOBAL _ay_fx_04_pierto_abierta
829   0000              	GLOBAL _ay_fx_04_magia1
830   0000              	GLOBAL _ay_fx_04_golpe
831   0000              	GLOBAL _ay_fx_04_explosion
832   0000              	GLOBAL _ay_fx_04_dano_por_toque
833   0000              	GLOBAL _ay_fx_04_coin
834   0000              	GLOBAL _world0_h
835   0000              	GLOBAL _world0_w
836   0000              	GLOBAL _world0
837   0000              	GLOBAL _paper0
838   0000              	GLOBAL _lenght0
839   0000              	GLOBAL _start_scr0
840   0000              ;--------------------------------------------------------
841   0000              ; special function registers
842   0000              ;--------------------------------------------------------
843   0000              defc _IO_FE	=	0x00fe
844   0000              defc _IO_1FFD	=	0x1ffd
845   0000              defc _IO_7FFD	=	0x7ffd
846   0000              ;--------------------------------------------------------
847   0000              ; ram data
848   0000              ;--------------------------------------------------------
849   0000              	SECTION bss_compiler
850   0000              ;--------------------------------------------------------
851   0000              ; ram data
852   0000              ;--------------------------------------------------------
853   0000              
854   0000              IF 0
855   0000              
856   0000              ; .area _INITIALIZED removed by z88dk
857   0000              
858   0000              
859   0000              ENDIF
860   0000              
861   0000              ;--------------------------------------------------------
862   0000              ; absolute external ram data
863   0000              ;--------------------------------------------------------
864   0000              	SECTION IGNORE
865   0000              ;--------------------------------------------------------
866   0000              ; global & static initialisations
867   0000              ;--------------------------------------------------------
868   0000              	SECTION code_crt_init
869   0000              ;--------------------------------------------------------
870   0000              ; Home
871   0000              ;--------------------------------------------------------
872   0000              	SECTION IGNORE
873   0000              ;--------------------------------------------------------
874   0000              ; code
875   0000              ;--------------------------------------------------------
876   0000              	SECTION code_compiler
877   0000              ;	---------------------------------
878   0000              ; Function player_init
879   0000              ; ---------------------------------
880   0000              _player_init:
881   0000  CD 00 00    	call	___sdcc_enter_ix
882   0003  21 07 00    	ld	hl, +(_class + 0x0007)
883   0006  36 00       	ld	(hl),0x00
884   0008  21 07 00    	ld	hl, +(_tile + 0x0007)
885   000B  DD 7E 06    	ld	a,(ix+6)
886   000E  77          	ld	(hl), a
887   000F  21 07 00    	ld	hl, +(_lin + 0x0007)
888   0012  DD 7E 04    	ld	a,(ix+4)
889   0015  77          	ld	(hl), a
890   0016  21 07 00    	ld	hl, +(_col + 0x0007)
891   0019  DD 7E 05    	ld	a,(ix+5)
892   001C  77          	ld	(hl), a
893   001D  21 07 00    	ld	hl, +(_colint + 0x0007)
894   0020  36 00       	ld	(hl),0x00
895   0022  21 07 00    	ld	hl, +(_state + 0x0007)
896   0025  36 00       	ld	(hl),0x00
897   0027  01 07 00    	ld	bc,_state_a+7
898   002A  AF          	xor	a, a
899   002B  02          	ld	(bc), a
900   002C  21 07 00    	ld	hl, +(_jump_lin + 0x0007)
901   002F  DD 7E 04    	ld	a,(ix+4)
902   0032  77          	ld	(hl), a
903   0033  ED 5B 00 00 	ld	de,(_curr_time)
904   0037  ED 53 0E 00 	ld	(_last_time + 0x000e),de
905   003B  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
906   003E  36 00       	ld	(hl),0x00
907   0040  0A          	ld	a, (bc)
908   0041  F6 11       	or	a,+(0x01|0x10)
909   0043  02          	ld	(bc),a
910   0044  21 00 00    	ld	hl,_player_hit_col
911   0047  36 00       	ld	(hl),0x00
912   0049  21 00 00    	ld	hl,_player_hit_lin
913   004C  36 00       	ld	(hl),0x00
914   004E  21 00 00    	ld	hl,_player_slide
915   0051  36 00       	ld	(hl),0x00
916   0053  21 00 00    	ld	hl,_player_onstair
917   0056  36 00       	ld	(hl),0x00
918   0058  21 00 00    	ld	hl,_player_onfire
919   005B  36 00       	ld	(hl),0x00
920   005D  DD 66 05    	ld	h,(ix+5)
921   0060  DD 6E 04    	ld	l,(ix+4)
922   0063  E5          	push	hl
923   0064  DD 56 06    	ld	d,(ix+6)
924   0067  1E 07       	ld	e,0x07
925   0069  D5          	push	de
926   006A  CD 00 00    	call	_NIRVANAP_spriteT_callee
927   006D  DD E1       	pop	ix
928   006F  C9          	ret
929   0070              	SECTION code_compiler
930   0070              ;	---------------------------------
931   0070              ; Function player_turn
932   0070              ; ---------------------------------
933   0070              _player_turn:
934   0070  21 00 00    	ld	hl,_sprite
935   0073  CD 00 00    	call	_spr_chktime
936   0076  7D          	ld	a, l
937   0077  B7          	or	a, a
938   0078  C8          	ret	Z
939   0079  21 00 00    	ld	hl,_k1
940   007C  E5          	push	hl
941   007D  2A 00 00    	ld	hl,(_joyfunc1)
942   0080  CD 00 00    	call	___sdcc_call_hl
943   0083  F1          	pop	af
944   0084  7D          	ld	a,l
945   0085  32 00 00    	ld	(_dirs),a
946   0088  21 00 00    	ld	hl,_k2
947   008B  E5          	push	hl
948   008C  2A 00 00    	ld	hl,(_joyfunc2)
949   008F  CD 00 00    	call	___sdcc_call_hl
950   0092  F1          	pop	af
951   0093  7D          	ld	a,l
952   0094  32 00 00    	ld	(_dirs_alt),a
953   0097  21 00 00    	ld	hl,_s_class
954   009A  36 00       	ld	(hl),0x00
955   009C  CD A2 00    	call	_player_move
956   009F  C3 C8 03    	jp  _player_collision
957   00A2              	SECTION code_compiler
958   00A2              ;	---------------------------------
959   00A2              ; Function player_move
960   00A2              ; ---------------------------------
961   00A2              _player_move:
962   00A2  3A 07 00    	ld	a,(_lin + 0x0007)
963   00A5  32 00 00    	ld	(_s_lin0),a
964   00A8  3A 07 00    	ld	a,(_col + 0x0007)
965   00AB  32 00 00    	ld	(_s_col0),a
966   00AE  3A 07 00    	ld	a,(_state + 0x0007)
967   00B1  32 00 00    	ld	(_s_state),a
968   00B4  21 00 00    	ld	hl,_s_state
969   00B7  CB 46       	bit	0, (hl)
970   00B9  20 07       	jr	NZ,l_player_move_00113
971   00BB  21 00 00    	ld	hl,_s_state
972   00BE  CB 4E       	bit	1, (hl)
973   00C0  28 43       	jr	Z,l_player_move_00114
974   00C2              l_player_move_00113:
975   00C2  CD 29 03    	call	_player_fire
976   00C5  3A 00 00    	ld	a,(_player_vel_y)
977   00C8  21 00 00    	ld	hl,_player_vel_y1
978   00CB  96          	sub	a, (hl)
979   00CC  E2 D1 00    	jp	PO, l_player_move_00162
980   00CF  EE 80       	xor	a,0x80
981   00D1              l_player_move_00162:
982   00D1  F2 EE 00    	jp	P, l_player_move_00106
983   00D4  21 00 00    	ld	hl,_dirs
984   00D7  CB 56       	bit	2, (hl)
985   00D9  28 06       	jr	Z,l_player_move_00102
986   00DB  21 00 00    	ld	hl,_s_state
987   00DE  CD 00 00    	call	_spr_set_left
988   00E1              l_player_move_00102:
989   00E1  21 00 00    	ld	hl,_dirs
990   00E4  CB 4E       	bit	1, (hl)
991   00E6  28 06       	jr	Z,l_player_move_00106
992   00E8  21 00 00    	ld	hl,_s_state
993   00EB  CD 00 00    	call	_spr_set_right
994   00EE              l_player_move_00106:
995   00EE  CD 6F 0E    	call	_player_move_jump
996   00F1  7D          	ld	a, l
997   00F2  B7          	or	a, a
998   00F3  28 1C       	jr	Z,l_player_move_00115
999   00F5  3A 00 00    	ld	a,(_player_onstair)
1000  00F8  B7          	or	a, a
1001  00F9  20 16       	jr	NZ,l_player_move_00115
1002  00FB  21 60 08    	ld	hl,0x0860
1003  00FE  E5          	push	hl
1004  00FF  CD 28 07    	call	_player_tile
1005  0102  F1          	pop	af
1006  0103  18 0C       	jr	l_player_move_00115
1007  0105              l_player_move_00114:
1008  0105  CD 77 01    	call	_player_move_input
1009  0108  3A 00 00    	ld	a,(_player_onstair)
1010  010B  B7          	or	a, a
1011  010C  20 03       	jr	NZ,l_player_move_00115
1012  010E  CD F5 0C    	call	_player_check_floor
1013  0111              l_player_move_00115:
1014  0111  CD 00 00    	call	_spr_redraw
1015  0114  7D          	ld	a, l
1016  0115  B7          	or	a, a
1017  0116  28 03       	jr	Z,l_player_move_00118
1018  0118  CD 49 07    	call	_player_check_map
1019  011B              l_player_move_00118:
1020  011B  3A 00 00    	ld	a,(_player_hit_lin)
1021  011E  B7          	or	a, a
1022  011F  28 03       	jr	Z,l_player_move_00120
1023  0121  CD 5C 0C    	call	_player_hit_platform_clear
1024  0124              l_player_move_00120:
1025  0124  3A 00 00    	ld	a,(_s_state)
1026  0127  32 07 00    	ld	((_state + 0x0007)),a
1027  012A  2E 00       	ld	l,0x00
1028  012C  C9          	ret
1029  012D              	SECTION code_compiler
1030  012D              ;	---------------------------------
1031  012D              ; Function player_check_input
1032  012D              ; ---------------------------------
1033  012D              _player_check_input:
1034  012D  21 00 00    	ld	hl,_dirs
1035  0130  CB 56       	bit	2, (hl)
1036  0132  28 0C       	jr	Z,l_player_check_input_00102
1037  0134  21 00 00    	ld	hl,_dirs
1038  0137  CB 5E       	bit	3, (hl)
1039  0139  28 05       	jr	Z,l_player_check_input_00102
1040  013B  21 00 00    	ld	hl,_dirs
1041  013E  36 00       	ld	(hl),0x00
1042  0140              l_player_check_input_00102:
1043  0140  21 00 00    	ld	hl,_dirs
1044  0143  7E          	ld	a, (hl)
1045  0144  CB 07       	rlc	a
1046  0146  E6 01       	and	a,0x01
1047  0148  CB 47       	bit	0, a
1048  014A  20 28       	jr	NZ,l_player_check_input_00107
1049  014C  CB 56       	bit	2, (hl)
1050  014E  20 24       	jr	NZ,l_player_check_input_00107
1051  0150  21 00 00    	ld	hl,_dirs
1052  0153  CB 5E       	bit	3, (hl)
1053  0155  20 1D       	jr	NZ,l_player_check_input_00107
1054  0157  21 00 00    	ld	hl,_dirs
1055  015A  CB 46       	bit	0, (hl)
1056  015C  20 16       	jr	NZ,l_player_check_input_00107
1057  015E  21 00 00    	ld	hl,_dirs
1058  0161  CB 4E       	bit	1, (hl)
1059  0163  20 0F       	jr	NZ,l_player_check_input_00107
1060  0165  3A 00 00    	ld	a,(_dirs_alt)
1061  0168  CB 07       	rlc	a
1062  016A  E6 01       	and	a,0x01
1063  016C  CB 47       	bit	0, a
1064  016E  20 04       	jr	NZ,l_player_check_input_00107
1065  0170  2E 00       	ld	l,0x00
1066  0172  18 02       	jr	l_player_check_input_00108
1067  0174              l_player_check_input_00107:
1068  0174  2E 01       	ld	l,0x01
1069  0176              l_player_check_input_00108:
1070  0176  C9          	ret
1071  0177              	SECTION code_compiler
1072  0177              ;	---------------------------------
1073  0177              ; Function player_move_input
1074  0177              ; ---------------------------------
1075  0177              _player_move_input:
1076  0177  CD 2D 01    	call	_player_check_input
1077  017A  7D          	ld	a, l
1078  017B  B7          	or	a, a
1079  017C  CA E9 02    	jp	Z, l_player_move_input_00147
1080  017F  CD 29 03    	call	_player_fire
1081  0182  7D          	ld	a, l
1082  0183  B7          	or	a, a
1083  0184  28 0A       	jr	Z,l_player_move_input_00102
1084  0186  21 00 00    	ld	hl,_dirs
1085  0189  36 00       	ld	(hl),0x00
1086  018B  2E 00       	ld	l,0x00
1087  018D  C3 0F 03    	jp	l_player_move_input_00149
1088  0190              l_player_move_input_00102:
1089  0190  3A 00 00    	ld	a,(_game_2buttons)
1090  0193  B7          	or	a, a
1091  0194  28 07       	jr	Z,l_player_move_input_00104
1092  0196  3A 00 00    	ld	a,(_dirs)
1093  0199  E6 80       	and	a,0x80
1094  019B  18 16       	jr	l_player_move_input_00105
1095  019D              l_player_move_input_00104:
1096  019D  21 00 00    	ld	hl,_dirs
1097  01A0  7E          	ld	a, (hl)
1098  01A1  CB 07       	rlc	a
1099  01A3  E6 01       	and	a,0x01
1100  01A5  CB 47       	bit	0, a
1101  01A7  28 04       	jr	Z,l_player_move_input_00151
1102  01A9  CB 46       	bit	0, (hl)
1103  01AB  20 04       	jr	NZ,l_player_move_input_00152
1104  01AD              l_player_move_input_00151:
1105  01AD  3E 00       	ld	a,0x00
1106  01AF  18 02       	jr	l_player_move_input_00153
1107  01B1              l_player_move_input_00152:
1108  01B1  3E 01       	ld	a,0x01
1109  01B3              l_player_move_input_00153:
1110  01B3              l_player_move_input_00105:
1111  01B3  B7          	or	a, a
1112  01B4  28 44       	jr	Z,l_player_move_input_00107
1113  01B6  21 00 00    	ld	hl,_player_vel_inc
1114  01B9  36 01       	ld	(hl),0x01
1115  01BB  21 00 00    	ld	hl,_ay_fx_04_salto
1116  01BE  E5          	push	hl
1117  01BF  21 01 04    	ld	hl,0x0401
1118  01C2  E5          	push	hl
1119  01C3  CD 00 00    	call	_ay_song_play
1120  01C6  21 00 00    	ld	hl,_player_onstair
1121  01C9  36 00       	ld	(hl),0x00
1122  01CB  21 00 00    	ld	hl,_s_state
1123  01CE  CD 00 00    	call	_spr_set_up
1124  01D1  3A 07 00    	ld	a,(_lin + 0x0007)
1125  01D4  32 07 00    	ld	(_jump_lin+7),a
1126  01D7  3A 00 00    	ld	a,(_s_state)
1127  01DA  32 07 00    	ld	((_state + 0x0007)),a
1128  01DD  21 64 08    	ld	hl,0x0864
1129  01E0  E5          	push	hl
1130  01E1  CD 28 07    	call	_player_tile
1131  01E4  F1          	pop	af
1132  01E5  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
1133  01E8  36 02       	ld	(hl),0x02
1134  01EA  21 00 00    	ld	hl,_player_slide
1135  01ED  36 00       	ld	(hl),0x00
1136  01EF  3A 00 00    	ld	a,(_player_vel_y0)
1137  01F2  32 00 00    	ld	(_player_vel_y),a
1138  01F5  2E 01       	ld	l,0x01
1139  01F7  C3 0F 03    	jp	l_player_move_input_00149
1140  01FA              l_player_move_input_00107:
1141  01FA  21 00 00    	ld	hl,_dirs
1142  01FD  CB 5E       	bit	3, (hl)
1143  01FF  28 20       	jr	Z,l_player_move_input_00111
1144  0201  CD 10 03    	call	_player_fix_walk_lin
1145  0204  21 00 00    	ld	hl,_s_state
1146  0207  CD 00 00    	call	_spr_set_right
1147  020A  01 07 00    	ld	bc,_state_a+7
1148  020D  0A          	ld	a, (bc)
1149  020E  F6 10       	or	a,0x10
1150  0210  E6 F7       	and	a,0xf7
1151  0212  02          	ld	(bc),a
1152  0213  3A 00 00    	ld	a,(_player_onstair)
1153  0216  B7          	or	a, a
1154  0217  28 05       	jr	Z,l_player_move_input_00109
1155  0219  2E 00       	ld	l,0x00
1156  021B  CD 54 06    	call	_player_check_stairs
1157  021E              l_player_move_input_00109:
1158  021E  CD 00 00    	call	_spr_move_horizontal
1159  0221              l_player_move_input_00111:
1160  0221  21 00 00    	ld	hl,_dirs
1161  0224  CB 56       	bit	2, (hl)
1162  0226  28 20       	jr	Z,l_player_move_input_00115
1163  0228  CD 10 03    	call	_player_fix_walk_lin
1164  022B  21 00 00    	ld	hl,_s_state
1165  022E  CD 00 00    	call	_spr_set_left
1166  0231  01 07 00    	ld	bc,_state_a+7
1167  0234  0A          	ld	a, (bc)
1168  0235  F6 08       	or	a,0x08
1169  0237  E6 EF       	and	a,0xef
1170  0239  02          	ld	(bc),a
1171  023A  3A 00 00    	ld	a,(_player_onstair)
1172  023D  B7          	or	a, a
1173  023E  28 05       	jr	Z,l_player_move_input_00113
1174  0240  2E 00       	ld	l,0x00
1175  0242  CD 54 06    	call	_player_check_stairs
1176  0245              l_player_move_input_00113:
1177  0245  CD 00 00    	call	_spr_move_horizontal
1178  0248              l_player_move_input_00115:
1179  0248  21 00 00    	ld	hl,_dirs
1180  024B  CB 46       	bit	0, (hl)
1181  024D  28 39       	jr	Z,l_player_move_input_00127
1182  024F  2E 00       	ld	l,0x00
1183  0251  CD 54 06    	call	_player_check_stairs
1184  0254  3A 00 00    	ld	a,(_player_onstair)
1185  0257  B7          	or	a, a
1186  0258  20 10       	jr	NZ,l_player_move_input_00119
1187  025A  2E 01       	ld	l,0x01
1188  025C  CD 54 06    	call	_player_check_stairs
1189  025F  3A 00 00    	ld	a,(_player_onstair)
1190  0262  B7          	or	a, a
1191  0263  20 05       	jr	NZ,l_player_move_input_00119
1192  0265  2E FE       	ld	l,0xfe
1193  0267  CD B5 05    	call	_player_check_stairs_vertical
1194  026A              l_player_move_input_00119:
1195  026A  3A 00 00    	ld	a,(_player_onstair)
1196  026D  B7          	or	a, a
1197  026E  28 05       	jr	Z,l_player_move_input_00124
1198  0270  CD 00 00    	call	_spr_move_up
1199  0273  18 13       	jr	l_player_move_input_00127
1200  0275              l_player_move_input_00124:
1201  0275  21 00 00    	ld	hl,_dirs
1202  0278  CB 5E       	bit	3, (hl)
1203  027A  20 0C       	jr	NZ,l_player_move_input_00127
1204  027C  21 00 00    	ld	hl,_dirs
1205  027F  CB 56       	bit	2, (hl)
1206  0281  20 05       	jr	NZ,l_player_move_input_00127
1207  0283  2E 00       	ld	l,0x00
1208  0285  C3 0F 03    	jp	l_player_move_input_00149
1209  0288              l_player_move_input_00127:
1210  0288  21 00 00    	ld	hl,_dirs
1211  028B  CB 4E       	bit	1, (hl)
1212  028D  28 38       	jr	Z,l_player_move_input_00139
1213  028F  2E 00       	ld	l,0x00
1214  0291  CD 54 06    	call	_player_check_stairs
1215  0294  3A 00 00    	ld	a,(_player_onstair)
1216  0297  B7          	or	a, a
1217  0298  20 10       	jr	NZ,l_player_move_input_00131
1218  029A  2E 01       	ld	l,0x01
1219  029C  CD 54 06    	call	_player_check_stairs
1220  029F  3A 00 00    	ld	a,(_player_onstair)
1221  02A2  B7          	or	a, a
1222  02A3  20 05       	jr	NZ,l_player_move_input_00131
1223  02A5  2E 12       	ld	l,0x12
1224  02A7  CD B5 05    	call	_player_check_stairs_vertical
1225  02AA              l_player_move_input_00131:
1226  02AA  3A 00 00    	ld	a,(_player_onstair)
1227  02AD  B7          	or	a, a
1228  02AE  28 05       	jr	Z,l_player_move_input_00136
1229  02B0  CD 00 00    	call	_spr_move_down
1230  02B3  18 12       	jr	l_player_move_input_00139
1231  02B5              l_player_move_input_00136:
1232  02B5  21 00 00    	ld	hl,_dirs
1233  02B8  CB 5E       	bit	3, (hl)
1234  02BA  20 0B       	jr	NZ,l_player_move_input_00139
1235  02BC  21 00 00    	ld	hl,_dirs
1236  02BF  CB 56       	bit	2, (hl)
1237  02C1  20 04       	jr	NZ,l_player_move_input_00139
1238  02C3  2E 00       	ld	l,0x00
1239  02C5  18 48       	jr	l_player_move_input_00149
1240  02C7              l_player_move_input_00139:
1241  02C7  3A 00 00    	ld	a,(_s_state)
1242  02CA  32 07 00    	ld	((_state + 0x0007)),a
1243  02CD  3A 00 00    	ld	a,(_player_onstair)
1244  02D0  B7          	or	a, a
1245  02D1  28 0A       	jr	Z,l_player_move_input_00141
1246  02D3  21 72 00    	ld	hl,0x0072
1247  02D6  E5          	push	hl
1248  02D7  CD 28 07    	call	_player_tile
1249  02DA  F1          	pop	af
1250  02DB  18 08       	jr	l_player_move_input_00142
1251  02DD              l_player_move_input_00141:
1252  02DD  21 60 08    	ld	hl,0x0860
1253  02E0  E5          	push	hl
1254  02E1  CD 28 07    	call	_player_tile
1255  02E4  F1          	pop	af
1256  02E5              l_player_move_input_00142:
1257  02E5  2E 01       	ld	l,0x01
1258  02E7  18 26       	jr	l_player_move_input_00149
1259  02E9              l_player_move_input_00147:
1260  02E9  21 07 00    	ld	hl, +(_colint + 0x0007)
1261  02EC  36 00       	ld	(hl),0x00
1262  02EE  3A 00 00    	ld	a,(_player_onstair)
1263  02F1  B7          	or	a, a
1264  02F2  28 0A       	jr	Z,l_player_move_input_00144
1265  02F4  21 72 00    	ld	hl,0x0072
1266  02F7  E5          	push	hl
1267  02F8  CD 28 07    	call	_player_tile
1268  02FB  F1          	pop	af
1269  02FC  18 08       	jr	l_player_move_input_00145
1270  02FE              l_player_move_input_00144:
1271  02FE  21 70 01    	ld	hl,0x0170
1272  0301  E5          	push	hl
1273  0302  CD 28 07    	call	_player_tile
1274  0305  F1          	pop	af
1275  0306              l_player_move_input_00145:
1276  0306  21 00 00    	ld	hl,_s_state
1277  0309  7E          	ld	a,(hl)
1278  030A  E6 F3       	and	a,+(0xf7&0xfb)
1279  030C  77          	ld	(hl),a
1280  030D  2E 00       	ld	l,0x00
1281  030F              l_player_move_input_00149:
1282  030F  C9          	ret
1283  0310              	SECTION code_compiler
1284  0310              ;	---------------------------------
1285  0310              ; Function player_fix_walk_lin
1286  0310              ; ---------------------------------
1287  0310              _player_fix_walk_lin:
1288  0310  3A 00 00    	ld	a,(_player_onstair)
1289  0313  B7          	or	a, a
1290  0314  C0          	ret	NZ
1291  0315  01 07 00    	ld	bc,_lin+7
1292  0318  3A 00 00    	ld	a,(_s_lin0)
1293  031B  07          	rlca
1294  031C  07          	rlca
1295  031D  07          	rlca
1296  031E  07          	rlca
1297  031F  E6 0F       	and	a,0x0f
1298  0321  07          	rlca
1299  0322  07          	rlca
1300  0323  07          	rlca
1301  0324  07          	rlca
1302  0325  E6 F0       	and	a,0xf0
1303  0327  02          	ld	(bc), a
1304  0328  C9          	ret
1305  0329              	SECTION code_compiler
1306  0329              ;	---------------------------------
1307  0329              ; Function player_fire
1308  0329              ; ---------------------------------
1309  0329              _player_fire:
1310  0329  CD 00 00    	call	___sdcc_enter_ix
1311  032C  3B          	dec	sp
1312  032D  3A 00 00    	ld	a,(_game_2buttons)
1313  0330  B7          	or	a, a
1314  0331  28 0A       	jr	Z,l_player_fire_00102
1315  0333  3A 00 00    	ld	a,(_dirs_alt)
1316  0336  E6 80       	and	a,0x80
1317  0338  32 00 00    	ld	(_player_onfire),a
1318  033B  18 1A       	jr	l_player_fire_00103
1319  033D              l_player_fire_00102:
1320  033D  21 00 00    	ld	hl,_dirs
1321  0340  7E          	ld	a, (hl)
1322  0341  CB 07       	rlc	a
1323  0343  E6 01       	and	a,0x01
1324  0345  CB 47       	bit	0, a
1325  0347  28 04       	jr	Z,l_player_fire_00120
1326  0349  CB 46       	bit	0, (hl)
1327  034B  28 04       	jr	Z,l_player_fire_00121
1328  034D              l_player_fire_00120:
1329  034D  0E 00       	ld	c,0x00
1330  034F  18 02       	jr	l_player_fire_00122
1331  0351              l_player_fire_00121:
1332  0351  0E 01       	ld	c,0x01
1333  0353              l_player_fire_00122:
1334  0353  21 00 00    	ld	hl,_player_onfire
1335  0356  71          	ld	(hl), c
1336  0357              l_player_fire_00103:
1337  0357  3A 00 00    	ld	a,(_player_onfire)
1338  035A  B7          	or	a, a
1339  035B  28 65       	jr	Z,l_player_fire_00117
1340  035D  3A 07 00    	ld	a,(_tile + 0x0007)
1341  0360  FE 70       	cp	a,0x70
1342  0362  28 04       	jr	Z,l_player_fire_00104
1343  0364  D6 71       	sub	a,0x71
1344  0366  20 0D       	jr	NZ,l_player_fire_00105
1345  0368              l_player_fire_00104:
1346  0368  21 60 08    	ld	hl,0x0860
1347  036B  E5          	push	hl
1348  036C  CD 28 07    	call	_player_tile
1349  036F  F1          	pop	af
1350  0370  21 07 00    	ld	hl, +(_colint + 0x0007)
1351  0373  36 00       	ld	(hl),0x00
1352  0375              l_player_fire_00105:
1353  0375  21 00 00    	ld	hl,_player_mana
1354  0378  7E          	ld	a, (hl)
1355  0379  B7          	or	a, a
1356  037A  28 37       	jr	Z,l_player_fire_00113
1357  037C  3A 07 00    	ld	a,(_bullet_col + 0x0007)
1358  037F  3C          	inc	a
1359  0380  20 31       	jr	NZ,l_player_fire_00113
1360  0382  3E 05       	ld	a,0x05
1361  0384  96          	sub	a, (hl)
1362  0385  30 0F       	jr	NC,l_player_fire_00110
1363  0387  3A 00 00    	ld	a,(_game_inmune)
1364  038A  B7          	or	a, a
1365  038B  20 0E       	jr	NZ,l_player_fire_00111
1366  038D  21 00 00    	ld	hl,_player_mana
1367  0390  7E          	ld	a, (hl)
1368  0391  C6 FB       	add	a,0xfb
1369  0393  77          	ld	(hl), a
1370  0394  18 05       	jr	l_player_fire_00111
1371  0396              l_player_fire_00110:
1372  0396  21 00 00    	ld	hl,_player_mana
1373  0399  36 00       	ld	(hl),0x00
1374  039B              l_player_fire_00111:
1375  039B  CD 00 00    	call	_game_update_stats
1376  039E  21 00 00    	ld	hl,_ay_fx_06_disparo1
1377  03A1  E5          	push	hl
1378  03A2  21 01 06    	ld	hl,0x0601
1379  03A5  E5          	push	hl
1380  03A6  CD 00 00    	call	_ay_song_play
1381  03A9  21 07 78    	ld	hl,0x7807
1382  03AC  E5          	push	hl
1383  03AD  CD 00 00    	call	_game_shoot_fire
1384  03B0  F1          	pop	af
1385  03B1  18 0B       	jr	l_player_fire_00114
1386  03B3              l_player_fire_00113:
1387  03B3  21 00 00    	ld	hl,_ay_fx_04_sin_mana
1388  03B6  E5          	push	hl
1389  03B7  21 01 04    	ld	hl,0x0401
1390  03BA  E5          	push	hl
1391  03BB  CD 00 00    	call	_ay_song_play
1392  03BE              l_player_fire_00114:
1393  03BE  2E 01       	ld	l,0x01
1394  03C0  18 02       	jr	l_player_fire_00118
1395  03C2              l_player_fire_00117:
1396  03C2  2E 00       	ld	l,0x00
1397  03C4              l_player_fire_00118:
1398  03C4  33          	inc	sp
1399  03C5  DD E1       	pop	ix
1400  03C7  C9          	ret
1401  03C8              	SECTION code_compiler
1402  03C8              ;	---------------------------------
1403  03C8              ; Function player_collision
1404  03C8              ; ---------------------------------
1405  03C8              _player_collision:
1406  03C8  3E 19       	ld	a,0x19
1407  03CA  F5          	push	af
1408  03CB  33          	inc	sp
1409  03CC  21 00 00    	ld	hl,_player_hit_time
1410  03CF  E5          	push	hl
1411  03D0  CD 00 00    	call	_game_check_time
1412  03D3  F1          	pop	af
1413  03D4  33          	inc	sp
1414  03D5  7D          	ld	a, l
1415  03D6  B7          	or	a, a
1416  03D7  CA 61 05    	jp	Z, l_player_collision_00136
1417  03DA  21 00 00    	ld	hl,_sprite
1418  03DD  36 00       	ld	(hl),0x00
1419  03DF  3A 07 00    	ld	a,(_col + 7)
1420  03E2  32 00 00    	ld	(_s_col1),a
1421  03E5  3A 07 00    	ld	a,(_lin + 7)
1422  03E8  32 00 00    	ld	(_s_lin1),a
1423  03EB  C6 08       	add	a,0x08
1424  03ED  4F          	ld	c, a
1425  03EE  3A 00 00    	ld	a, (_s_col1)
1426  03F1  47          	ld	b,a
1427  03F2  C5          	push	bc
1428  03F3  CD 00 00    	call	_spr_calc_index
1429  03F6  F1          	pop	af
1430  03F7  4D          	ld	c, l
1431  03F8  21 00 00    	ld	hl,_sprite_curr_index
1432  03FB  71          	ld	(hl), c
1433  03FC  3E 00       	ld	a, +((_scr_map) & 0xFF)
1434  03FE  86          	add	a, (hl)
1435  03FF  4F          	ld	c, a
1436  0400  3E 00       	ld	a, +((_scr_map) / 256)
1437  0402  CE 00       	adc	a,0x00
1438  0404  47          	ld	b, a
1439  0405  0A          	ld	a, (bc)
1440  0406  4F          	ld	c,a
1441  0407  D6 15       	sub	a,0x15
1442  0409  20 1F       	jr	NZ,l_player_collision_00104
1443  040B  3A 00 00    	ld	a,(_game_checkpoint_scr)
1444  040E  21 00 00    	ld	hl,_scr_curr
1445  0411  96          	sub	a, (hl)
1446  0412  28 05       	jr	Z,l_player_collision_00102
1447  0414  2E 01       	ld	l,0x01
1448  0416  CD 00 00    	call	_zx_border_fastcall
1449  0419              l_player_collision_00102:
1450  0419  3A 00 00    	ld	a,(_s_col1)
1451  041C  32 00 00    	ld	(_player_col_scr),a
1452  041F  3A 00 00    	ld	a,(_s_lin1)
1453  0422  32 00 00    	ld	(_player_lin_scr),a
1454  0425  C5          	push	bc
1455  0426  CD 00 00    	call	_game_set_checkpoint
1456  0429  C1          	pop	bc
1457  042A              l_player_collision_00104:
1458  042A  3E 2F       	ld	a,0x2f
1459  042C  91          	sub	a, c
1460  042D  30 5F       	jr	NC,l_player_collision_00157
1461  042F  79          	ld	a,c
1462  0430  FE 3A       	cp	a,0x3a
1463  0432  30 5A       	jr	NC,l_player_collision_00157
1464  0434  D6 39       	sub	a,0x39
1465  0436  20 32       	jr	NZ,l_player_collision_00111
1466  0438  21 00 00    	ld	hl,_ay_song_04_lotr_level_complete
1467  043B  E5          	push	hl
1468  043C  21 01 04    	ld	hl,0x0401
1469  043F  E5          	push	hl
1470  0440  CD 00 00    	call	_ay_song_play
1471  0443  21 00 00    	ld	hl,___str_0
1472  0446  E5          	push	hl
1473  0447  21 0C 08    	ld	hl,0x080c
1474  044A  E5          	push	hl
1475  044B  CD 00 00    	call	_zx_print_str
1476  044E  AF          	xor	a, a
1477  044F  F5          	push	af
1478  0450  33          	inc	sp
1479  0451  21 E8 03    	ld	hl,0x03e8
1480  0454  E5          	push	hl
1481  0455  21 08 17    	ld	hl,0x1708
1482  0458  E5          	push	hl
1483  0459  3E 0C       	ld	a,0x0c
1484  045B  F5          	push	af
1485  045C  33          	inc	sp
1486  045D  CD 00 00    	call	_game_colour_message
1487  0460  F1          	pop	af
1488  0461  F1          	pop	af
1489  0462  F1          	pop	af
1490  0463  21 00 00    	ld	hl,_game_worldup
1491  0466  36 01       	ld	(hl),0x01
1492  0468  18 24       	jr	l_player_collision_00157
1493  046A              l_player_collision_00111:
1494  046A  21 00 00    	ld	hl,_game_inmune
1495  046D  7E          	ld	a, (hl)
1496  046E  B7          	or	a,a
1497  046F  20 13       	jr	NZ,l_player_collision_00106
1498  0471  B6          	or	a,(hl)
1499  0472  20 10       	jr	NZ,l_player_collision_00106
1500  0474  3E 82       	ld	a,0x82
1501  0476  21 00 00    	ld	hl,_s_lin1
1502  0479  96          	sub	a, (hl)
1503  047A  30 08       	jr	NC,l_player_collision_00106
1504  047C  CD B3 10    	call	_player_lost_life
1505  047F  2E 00       	ld	l,0x00
1506  0481  C3 63 05    	jp	l_player_collision_00137
1507  0484              l_player_collision_00106:
1508  0484  2E 06       	ld	l,0x06
1509  0486  CD 00 00    	call	_zx_border_fastcall
1510  0489  2E 32       	ld	l,0x32
1511  048B  CD 2B 12    	call	_player_hit
1512  048E              l_player_collision_00157:
1513  048E              l_player_collision_00132:
1514  048E  21 00 00    	ld	hl,_sprite
1515  0491  7E          	ld	a, (hl)
1516  0492  D6 07       	sub	a,0x07
1517  0494  D2 61 05    	jp	NC, l_player_collision_00136
1518  0497  4E          	ld	c,(hl)
1519  0498  06 00       	ld	b,0x00
1520  049A  21 00 00    	ld	hl,_class
1521  049D  09          	add	hl,bc
1522  049E  7E          	ld	a,(hl)
1523  049F  32 00 00    	ld	(_s_class),a
1524  04A2  B7          	or	a, a
1525  04A3  CA 5A 05    	jp	Z, l_player_collision_00131
1526  04A6  2A 00 00    	ld	hl,(_sprite)
1527  04A9  26 00       	ld	h,0x00
1528  04AB  01 00 00    	ld	bc,_col
1529  04AE  09          	add	hl,bc
1530  04AF  4E          	ld	c,(hl)
1531  04B0  06 00       	ld	b,0x00
1532  04B2  3A 00 00    	ld	a,(_s_col1)
1533  04B5  5F          	ld	e,a
1534  04B6  16 00       	ld	d,0x00
1535  04B8  79          	ld	a, c
1536  04B9  93          	sub	a, e
1537  04BA  6F          	ld	l, a
1538  04BB  78          	ld	a, b
1539  04BC  9A          	sbc	a, d
1540  04BD  67          	ld	h, a
1541  04BE  CD 00 00    	call	_abs_fastcall
1542  04C1  7D          	ld	a,l
1543  04C2  D6 02       	sub	a,0x02
1544  04C4  7C          	ld	a,h
1545  04C5  17          	rla
1546  04C6  3F          	ccf
1547  04C7  1F          	rra
1548  04C8  DE 80       	sbc	a,0x80
1549  04CA  D2 5A 05    	jp	NC, l_player_collision_00131
1550  04CD  2A 00 00    	ld	hl,(_sprite)
1551  04D0  26 00       	ld	h,0x00
1552  04D2  01 00 00    	ld	bc,_lin
1553  04D5  09          	add	hl,bc
1554  04D6  4E          	ld	c,(hl)
1555  04D7  06 00       	ld	b,0x00
1556  04D9  3A 00 00    	ld	a,(_s_lin1)
1557  04DC  5F          	ld	e,a
1558  04DD  16 00       	ld	d,0x00
1559  04DF  79          	ld	a, c
1560  04E0  93          	sub	a, e
1561  04E1  6F          	ld	l, a
1562  04E2  78          	ld	a, b
1563  04E3  9A          	sbc	a, d
1564  04E4  67          	ld	h, a
1565  04E5  CD 00 00    	call	_abs_fastcall
1566  04E8  7D          	ld	a,l
1567  04E9  D6 0E       	sub	a,0x0e
1568  04EB  7C          	ld	a,h
1569  04EC  17          	rla
1570  04ED  3F          	ccf
1571  04EE  1F          	rra
1572  04EF  DE 80       	sbc	a,0x80
1573  04F1  30 67       	jr	NC,l_player_collision_00131
1574  04F3  3A 00 00    	ld	a,(_s_class)
1575  04F6  D6 06       	sub	a,0x06
1576  04F8  20 1D       	jr	NZ,l_player_collision_00119
1577  04FA  21 00 00    	ld	hl,_player_vita
1578  04FD  7E          	ld	a, (hl)
1579  04FE  C6 32       	add	a,0x32
1580  0500  77          	ld	(hl), a
1581  0501  3A 00 00    	ld	a,(_player_max_vita)
1582  0504  21 00 00    	ld	hl,_player_vita
1583  0507  96          	sub	a, (hl)
1584  0508  30 06       	jr	NC,l_player_collision_00117
1585  050A  3A 00 00    	ld	a,(_player_max_vita)
1586  050D  32 00 00    	ld	(_player_vita),a
1587  0510              l_player_collision_00117:
1588  0510  CD 64 05    	call	_player_pick_mushroom
1589  0513  2E 00       	ld	l,0x00
1590  0515  18 4C       	jr	l_player_collision_00137
1591  0517              l_player_collision_00119:
1592  0517  3A 00 00    	ld	a,(_s_class)
1593  051A  D6 07       	sub	a,0x07
1594  051C  20 1D       	jr	NZ,l_player_collision_00123
1595  051E  21 00 00    	ld	hl,_player_mana
1596  0521  7E          	ld	a, (hl)
1597  0522  C6 32       	add	a,0x32
1598  0524  77          	ld	(hl), a
1599  0525  3A 00 00    	ld	a,(_player_max_mana)
1600  0528  21 00 00    	ld	hl,_player_mana
1601  052B  96          	sub	a, (hl)
1602  052C  30 06       	jr	NC,l_player_collision_00121
1603  052E  3A 00 00    	ld	a,(_player_max_mana)
1604  0531  32 00 00    	ld	(_player_mana),a
1605  0534              l_player_collision_00121:
1606  0534  CD 64 05    	call	_player_pick_mushroom
1607  0537  2E 00       	ld	l,0x00
1608  0539  18 28       	jr	l_player_collision_00137
1609  053B              l_player_collision_00123:
1610  053B  3A 00 00    	ld	a,(_s_class)
1611  053E  D6 08       	sub	a,0x08
1612  0540  20 0A       	jr	NZ,l_player_collision_00125
1613  0542  CD 64 05    	call	_player_pick_mushroom
1614  0545  CD 83 05    	call	_player_1up
1615  0548  2E 00       	ld	l,0x00
1616  054A  18 17       	jr	l_player_collision_00137
1617  054C              l_player_collision_00125:
1618  054C  2E 02       	ld	l,0x02
1619  054E  CD 00 00    	call	_zx_border_fastcall
1620  0551  2E 14       	ld	l,0x14
1621  0553  CD 2B 12    	call	_player_hit
1622  0556  2E 01       	ld	l,0x01
1623  0558  18 09       	jr	l_player_collision_00137
1624  055A              l_player_collision_00131:
1625  055A  21 00 00    	ld	hl,_sprite
1626  055D  34          	inc	(hl)
1627  055E  C3 8E 04    	jp	l_player_collision_00132
1628  0561              l_player_collision_00136:
1629  0561  2E 00       	ld	l,0x00
1630  0563              l_player_collision_00137:
1631  0563  C9          	ret
1632  0564              	SECTION rodata_compiler
1633  0000              ___str_0:
1634  0000  52 4F 55 4E 44 20 43 4F 4D 50 4C 45 54 45 21 
                        	DEFM "ROUND COMPLETE!"
1635  000F  00          	DEFB 0x00
1636  0010              	SECTION code_compiler
1637  0564              ;	---------------------------------
1638  0564              ; Function player_pick_mushroom
1639  0564              ; ---------------------------------
1640  0564              _player_pick_mushroom:
1641  0564  21 00 00    	ld	hl,_ay_fx_04_magia1
1642  0567  E5          	push	hl
1643  0568  21 01 04    	ld	hl,0x0401
1644  056B  E5          	push	hl
1645  056C  CD 00 00    	call	_ay_song_play
1646  056F  21 01 00    	ld	hl,0x0001
1647  0572  CD 8B 0C    	call	_player_score_add
1648  0575  CD 00 00    	call	_game_update_stats
1649  0578  2A 00 00    	ld	hl,(_sprite)
1650  057B  CD 00 00    	call	_spr_destroy
1651  057E  21 00 00    	ld	hl,_game_mush_count
1652  0581  35          	dec	(hl)
1653  0582  C9          	ret
1654  0583              	SECTION code_compiler
1655  0583              ;	---------------------------------
1656  0583              ; Function player_1up
1657  0583              ; ---------------------------------
1658  0583              _player_1up:
1659  0583  21 00 00    	ld	hl,_player_lives
1660  0586  7E          	ld	a, (hl)
1661  0587  D6 64       	sub	a,0x64
1662  0589  D0          	ret	NC
1663  058A  34          	inc	(hl)
1664  058B  CD 00 00    	call	_spr_flatten
1665  058E  21 10 00    	ld	hl,___str_1
1666  0591  E5          	push	hl
1667  0592  21 0C 0C    	ld	hl,0x0c0c
1668  0595  E5          	push	hl
1669  0596  CD 00 00    	call	_zx_print_str
1670  0599  AF          	xor	a, a
1671  059A  F5          	push	af
1672  059B  33          	inc	sp
1673  059C  21 19 00    	ld	hl,0x0019
1674  059F  E5          	push	hl
1675  05A0  21 0C 11    	ld	hl,0x110c
1676  05A3  E5          	push	hl
1677  05A4  3E 0C       	ld	a,0x0c
1678  05A6  F5          	push	af
1679  05A7  33          	inc	sp
1680  05A8  CD 00 00    	call	_game_colour_message
1681  05AB  F1          	pop	af
1682  05AC  F1          	pop	af
1683  05AD  F1          	pop	af
1684  05AE  CD 00 00    	call	_game_update_stats
1685  05B1  CD 00 00    	call	_spr_unflatten
1686  05B4  C9          	ret
1687  05B5              	SECTION rodata_compiler
1688  0010              ___str_1:
1689  0010  31 20 55 50 21 
                        	DEFM "1 UP!"
1690  0015  00          	DEFB 0x00
1691  0016              	SECTION code_compiler
1692  05B5              ;	---------------------------------
1693  05B5              ; Function player_check_stairs_vertical
1694  05B5              ; ---------------------------------
1695  05B5              _player_check_stairs_vertical:
1696  05B5  CD 00 00    	call	___sdcc_enter_ix
1697  05B8  3B          	dec	sp
1698  05B9  4D          	ld	c, l
1699  05BA  21 07 00    	ld	hl,+(_col + 0x0007)
1700  05BD  46          	ld	b, (hl)
1701  05BE  CB 40       	bit	0, b
1702  05C0  20 2A       	jr	NZ,l_player_check_stairs_vertical_00102
1703  05C2  3A 07 00    	ld	a,(_lin + 0x0007)
1704  05C5  81          	add	a, c
1705  05C6  4F          	ld	c,a
1706  05C7  C5          	push	bc
1707  05C8  CD 00 00    	call	_spr_calc_index
1708  05CB  F1          	pop	af
1709  05CC  7D          	ld	a,l
1710  05CD  32 00 00    	ld	(_sprite_curr_index),a
1711  05D0  4F          	ld	c,a
1712  05D1  06 00       	ld	b,0x00
1713  05D3  21 00 00    	ld	hl,_scr_map
1714  05D6  09          	add	hl,bc
1715  05D7  7E          	ld	a,(hl)
1716  05D8  4F          	ld	c,a
1717  05D9  D6 44       	sub	a,0x44
1718  05DB  38 05       	jr	C,l_player_check_stairs_vertical_00110
1719  05DD  3E 47       	ld	a,0x47
1720  05DF  91          	sub	a, c
1721  05E0  30 04       	jr	NC,l_player_check_stairs_vertical_00111
1722  05E2              l_player_check_stairs_vertical_00110:
1723  05E2  06 00       	ld	b,0x00
1724  05E4  18 02       	jr	l_player_check_stairs_vertical_00112
1725  05E6              l_player_check_stairs_vertical_00111:
1726  05E6  06 01       	ld	b,0x01
1727  05E8              l_player_check_stairs_vertical_00112:
1728  05E8  0E 00       	ld	c,0x00
1729  05EA  18 51       	jr	l_player_check_stairs_vertical_00103
1730  05EC              l_player_check_stairs_vertical_00102:
1731  05EC  78          	ld	a, b
1732  05ED  91          	sub	a, c
1733  05EE  57          	ld	d, a
1734  05EF  3A 07 00    	ld	a,(_lin + 0x0007)
1735  05F2  81          	add	a, c
1736  05F3  47          	ld	b, a
1737  05F4  C5          	push	bc
1738  05F5  58          	ld	e,b
1739  05F6  D5          	push	de
1740  05F7  CD 00 00    	call	_spr_calc_index
1741  05FA  F1          	pop	af
1742  05FB  C1          	pop	bc
1743  05FC  7D          	ld	a,l
1744  05FD  32 00 00    	ld	(_sprite_curr_index),a
1745  0600  5F          	ld	e,a
1746  0601  16 00       	ld	d,0x00
1747  0603  21 00 00    	ld	hl,_scr_map
1748  0606  19          	add	hl,de
1749  0607  7E          	ld	a,(hl)
1750  0608  47          	ld	b,a
1751  0609  D6 44       	sub	a,0x44
1752  060B  38 05       	jr	C,l_player_check_stairs_vertical_00113
1753  060D  3E 47       	ld	a,0x47
1754  060F  90          	sub	a, b
1755  0610  30 04       	jr	NC,l_player_check_stairs_vertical_00114
1756  0612              l_player_check_stairs_vertical_00113:
1757  0612  06 00       	ld	b,0x00
1758  0614  18 02       	jr	l_player_check_stairs_vertical_00115
1759  0616              l_player_check_stairs_vertical_00114:
1760  0616  06 01       	ld	b,0x01
1761  0618              l_player_check_stairs_vertical_00115:
1762  0618  3A 07 00    	ld	a,(_col + 0x0007)
1763  061B  91          	sub	a, c
1764  061C  57          	ld	d, a
1765  061D  3A 07 00    	ld	a,(_lin + 0x0007)
1766  0620  81          	add	a, c
1767  0621  C5          	push	bc
1768  0622  5F          	ld	e,a
1769  0623  D5          	push	de
1770  0624  CD 00 00    	call	_spr_calc_index
1771  0627  F1          	pop	af
1772  0628  C1          	pop	bc
1773  0629  7D          	ld	a,l
1774  062A  32 00 00    	ld	(_sprite_curr_index),a
1775  062D  78          	ld	a, b
1776  062E  D6 44       	sub	a,0x44
1777  0630  38 05       	jr	C,l_player_check_stairs_vertical_00116
1778  0632  3E 47       	ld	a,0x47
1779  0634  90          	sub	a, b
1780  0635  30 04       	jr	NC,l_player_check_stairs_vertical_00117
1781  0637              l_player_check_stairs_vertical_00116:
1782  0637  0E 00       	ld	c,0x00
1783  0639  18 02       	jr	l_player_check_stairs_vertical_00118
1784  063B              l_player_check_stairs_vertical_00117:
1785  063B  0E 01       	ld	c,0x01
1786  063D              l_player_check_stairs_vertical_00118:
1787  063D              l_player_check_stairs_vertical_00103:
1788  063D  78          	ld	a, b
1789  063E  B7          	or	a,a
1790  063F  20 03       	jr	NZ,l_player_check_stairs_vertical_00104
1791  0641  B1          	or	a,c
1792  0642  28 07       	jr	Z,l_player_check_stairs_vertical_00105
1793  0644              l_player_check_stairs_vertical_00104:
1794  0644  21 00 00    	ld	hl,_player_onstair
1795  0647  36 01       	ld	(hl),0x01
1796  0649  18 05       	jr	l_player_check_stairs_vertical_00108
1797  064B              l_player_check_stairs_vertical_00105:
1798  064B  21 00 00    	ld	hl,_player_onstair
1799  064E  36 00       	ld	(hl),0x00
1800  0650              l_player_check_stairs_vertical_00108:
1801  0650  33          	inc	sp
1802  0651  DD E1       	pop	ix
1803  0653  C9          	ret
1804  0654              	SECTION code_compiler
1805  0654              ;	---------------------------------
1806  0654              ; Function player_check_stairs
1807  0654              ; ---------------------------------
1808  0654              _player_check_stairs:
1809  0654  CD 00 00    	call	___sdcc_enter_ix
1810  0657  3B          	dec	sp
1811  0658  45          	ld	b, l
1812  0659  3A 07 00    	ld	a,(_col + 0x0007)
1813  065C  4F          	ld	c,a
1814  065D  80          	add	a, b
1815  065E  57          	ld	d, a
1816  065F  3A 07 00    	ld	a,(_lin + 0x0007)
1817  0662  C5          	push	bc
1818  0663  5F          	ld	e,a
1819  0664  D5          	push	de
1820  0665  CD 00 00    	call	_spr_calc_index
1821  0668  F1          	pop	af
1822  0669  C1          	pop	bc
1823  066A  7D          	ld	a,l
1824  066B  32 00 00    	ld	(_sprite_curr_index),a
1825  066E  5F          	ld	e,a
1826  066F  16 00       	ld	d,0x00
1827  0671  21 00 00    	ld	hl,_scr_map
1828  0674  19          	add	hl,de
1829  0675  7E          	ld	a,(hl)
1830  0676  4F          	ld	c,a
1831  0677  D6 44       	sub	a,0x44
1832  0679  38 05       	jr	C,l_player_check_stairs_00111
1833  067B  3E 47       	ld	a,0x47
1834  067D  91          	sub	a, c
1835  067E  30 04       	jr	NC,l_player_check_stairs_00112
1836  0680              l_player_check_stairs_00111:
1837  0680  0E 00       	ld	c,0x00
1838  0682  18 02       	jr	l_player_check_stairs_00113
1839  0684              l_player_check_stairs_00112:
1840  0684  0E 01       	ld	c,0x01
1841  0686              l_player_check_stairs_00113:
1842  0686  3A 07 00    	ld	a,(_col + 0x0007)
1843  0689  80          	add	a, b
1844  068A  57          	ld	d, a
1845  068B  3A 07 00    	ld	a,(_lin + 0x0007)
1846  068E  C6 0F       	add	a,0x0f
1847  0690  47          	ld	b, a
1848  0691  C5          	push	bc
1849  0692  58          	ld	e,b
1850  0693  D5          	push	de
1851  0694  CD 00 00    	call	_spr_calc_index
1852  0697  F1          	pop	af
1853  0698  C1          	pop	bc
1854  0699  7D          	ld	a,l
1855  069A  32 00 00    	ld	(_sprite_curr_index),a
1856  069D  5F          	ld	e,a
1857  069E  16 00       	ld	d,0x00
1858  06A0  21 00 00    	ld	hl,_scr_map
1859  06A3  19          	add	hl,de
1860  06A4  7E          	ld	a,(hl)
1861  06A5  47          	ld	b,a
1862  06A6  D6 44       	sub	a,0x44
1863  06A8  38 05       	jr	C,l_player_check_stairs_00114
1864  06AA  3E 47       	ld	a,0x47
1865  06AC  90          	sub	a, b
1866  06AD  30 04       	jr	NC,l_player_check_stairs_00115
1867  06AF              l_player_check_stairs_00114:
1868  06AF  06 00       	ld	b,0x00
1869  06B1  18 02       	jr	l_player_check_stairs_00116
1870  06B3              l_player_check_stairs_00115:
1871  06B3  06 01       	ld	b,0x01
1872  06B5              l_player_check_stairs_00116:
1873  06B5  79          	ld	a, c
1874  06B6  B7          	or	a,a
1875  06B7  20 03       	jr	NZ,l_player_check_stairs_00105
1876  06B9  B0          	or	a,b
1877  06BA  28 13       	jr	Z,l_player_check_stairs_00106
1878  06BC              l_player_check_stairs_00105:
1879  06BC  21 00 00    	ld	hl,_player_onstair
1880  06BF  7E          	ld	a, (hl)
1881  06C0  B7          	or	a, a
1882  06C1  20 1D       	jr	NZ,l_player_check_stairs_00109
1883  06C3  36 01       	ld	(hl),0x01
1884  06C5  21 72 00    	ld	hl,0x0072
1885  06C8  E5          	push	hl
1886  06C9  CD 28 07    	call	_player_tile
1887  06CC  F1          	pop	af
1888  06CD  18 11       	jr	l_player_check_stairs_00109
1889  06CF              l_player_check_stairs_00106:
1890  06CF  21 00 00    	ld	hl,_player_onstair
1891  06D2  7E          	ld	a, (hl)
1892  06D3  B7          	or	a, a
1893  06D4  28 0A       	jr	Z,l_player_check_stairs_00109
1894  06D6  36 00       	ld	(hl),0x00
1895  06D8  21 60 08    	ld	hl,0x0860
1896  06DB  E5          	push	hl
1897  06DC  CD 28 07    	call	_player_tile
1898  06DF  F1          	pop	af
1899  06E0              l_player_check_stairs_00109:
1900  06E0  33          	inc	sp
1901  06E1  DD E1       	pop	ix
1902  06E3  C9          	ret
1903  06E4              	SECTION code_compiler
1904  06E4              ;	---------------------------------
1905  06E4              ; Function player_anim_tile
1906  06E4              ; ---------------------------------
1907  06E4              _player_anim_tile:
1908  06E4  21 07 00    	ld	hl,+(_tile + 0x0007)
1909  06E7  4E          	ld	c, (hl)
1910  06E8  21 07 00    	ld	hl,+(_colint + 0x0007)
1911  06EB  46          	ld	b, (hl)
1912  06EC  79          	ld	a, c
1913  06ED  80          	add	a, b
1914  06EE  32 00 00    	ld	(_s_tile1),a
1915  06F1  3A 00 00    	ld	a,(_player_onstair)
1916  06F4  B7          	or	a, a
1917  06F5  28 17       	jr	Z,l_player_anim_tile_00109
1918  06F7  21 00 00    	ld	hl,_player_anim_stair
1919  06FA  34          	inc	(hl)
1920  06FB  3E 01       	ld	a,0x01
1921  06FD  96          	sub	a, (hl)
1922  06FE  30 02       	jr	NC,l_player_anim_tile_00102
1923  0700  36 00       	ld	(hl),0x00
1924  0702              l_player_anim_tile_00102:
1925  0702  79          	ld	a, c
1926  0703  21 00 00    	ld	hl,_player_anim_stair
1927  0706  86          	add	a, (hl)
1928  0707  C6 04       	add	a,0x04
1929  0709  32 00 00    	ld	(_s_tile1),a
1930  070C  18 19       	jr	l_player_anim_tile_00111
1931  070E              l_player_anim_tile_00109:
1932  070E  3A 00 00    	ld	a,(_player_onfire)
1933  0711  B7          	or	a, a
1934  0712  28 13       	jr	Z,l_player_anim_tile_00111
1935  0714  21 00 00    	ld	hl,_s_state
1936  0717  CB 56       	bit	2, (hl)
1937  0719  28 07       	jr	Z,l_player_anim_tile_00104
1938  071B  21 00 00    	ld	hl,_s_tile1
1939  071E  36 60       	ld	(hl),0x60
1940  0720  18 05       	jr	l_player_anim_tile_00111
1941  0722              l_player_anim_tile_00104:
1942  0722  21 00 00    	ld	hl,_s_tile1
1943  0725  36 68       	ld	(hl),0x68
1944  0727              l_player_anim_tile_00111:
1945  0727  C9          	ret
1946  0728              	SECTION code_compiler
1947  0728              ;	---------------------------------
1948  0728              ; Function player_tile
1949  0728              ; ---------------------------------
1950  0728              _player_tile:
1951  0728  CD 00 00    	call	___sdcc_enter_ix
1952  072B  21 05 00    	ld	hl,0x0005
1953  072E  39          	add	hl, sp
1954  072F  EB          	ex	de,hl
1955  0730  21 04 00    	ld	hl,0x0004
1956  0733  39          	add	hl, sp
1957  0734  4D          	ld	c, l
1958  0735  44          	ld	b, h
1959  0736  D5          	push	de
1960  0737  21 00 00    	ld	hl,_sprite
1961  073A  E5          	push	hl
1962  073B  C5          	push	bc
1963  073C  CD 00 00    	call	_spr_tile_dir
1964  073F  F1          	pop	af
1965  0740  F1          	pop	af
1966  0741  F1          	pop	af
1967  0742  7D          	ld	a,l
1968  0743  32 07 00    	ld	((_tile + 0x0007)),a
1969  0746  DD E1       	pop	ix
1970  0748  C9          	ret
1971  0749              	SECTION code_compiler
1972  0749              ;	---------------------------------
1973  0749              ; Function player_check_map
1974  0749              ; ---------------------------------
1975  0749              _player_check_map:
1976  0749  21 07 00    	ld	hl,+(_col + 0x0007)
1977  074C  46          	ld	b, (hl)
1978  074D  21 07 00    	ld	hl,+(_lin + 0x0007)
1979  0750  4E          	ld	c, (hl)
1980  0751  C5          	push	bc
1981  0752  CD 00 00    	call	_spr_calc_index
1982  0755  F1          	pop	af
1983  0756  7D          	ld	a,l
1984  0757  32 00 00    	ld	(_sprite_curr_index),a
1985  075A  21 07 00    	ld	hl,+(_col + 0x0007)
1986  075D  4E          	ld	c, (hl)
1987  075E  3A 07 00    	ld	a,(_lin + 0x0007)
1988  0761  E6 0F       	and	a,0x0f
1989  0763  CB 41       	bit	0, c
1990  0765  20 17       	jr	NZ,l_player_check_map_00108
1991  0767  B7          	or	a, a
1992  0768  20 05       	jr	NZ,l_player_check_map_00102
1993  076A  CD A9 07    	call	_player_pick_item
1994  076D  18 39       	jr	l_player_check_map_00110
1995  076F              l_player_check_map_00102:
1996  076F  CD A9 07    	call	_player_pick_item
1997  0772  21 00 00    	ld	hl,_sprite_curr_index
1998  0775  7E          	ld	a, (hl)
1999  0776  C6 10       	add	a,0x10
2000  0778  77          	ld	(hl), a
2001  0779  CD A9 07    	call	_player_pick_item
2002  077C  18 2A       	jr	l_player_check_map_00110
2003  077E              l_player_check_map_00108:
2004  077E  B7          	or	a, a
2005  077F  20 0C       	jr	NZ,l_player_check_map_00105
2006  0781  CD A9 07    	call	_player_pick_item
2007  0784  21 00 00    	ld	hl,_sprite_curr_index
2008  0787  34          	inc	(hl)
2009  0788  CD A9 07    	call	_player_pick_item
2010  078B  18 1B       	jr	l_player_check_map_00110
2011  078D              l_player_check_map_00105:
2012  078D  CD A9 07    	call	_player_pick_item
2013  0790  21 00 00    	ld	hl,_sprite_curr_index
2014  0793  34          	inc	(hl)
2015  0794  CD A9 07    	call	_player_pick_item
2016  0797  21 00 00    	ld	hl,_sprite_curr_index
2017  079A  7E          	ld	a, (hl)
2018  079B  C6 0F       	add	a,0x0f
2019  079D  77          	ld	(hl), a
2020  079E  CD A9 07    	call	_player_pick_item
2021  07A1  21 00 00    	ld	hl,_sprite_curr_index
2022  07A4  34          	inc	(hl)
2023  07A5  CD A9 07    	call	_player_pick_item
2024  07A8              l_player_check_map_00110:
2025  07A8  C9          	ret
2026  07A9              	SECTION code_compiler
2027  07A9              ;	---------------------------------
2028  07A9              ; Function player_pick_item
2029  07A9              ; ---------------------------------
2030  07A9              _player_pick_item:
2031  07A9  CD 00 00    	call	___sdcc_enter_ix
2032  07AC  F5          	push	af
2033  07AD  3B          	dec	sp
2034  07AE  01 00 00    	ld	bc,_scr_map+0
2035  07B1  2A 00 00    	ld	hl,(_sprite_curr_index)
2036  07B4  26 00       	ld	h,0x00
2037  07B6  09          	add	hl,bc
2038  07B7  7E          	ld	a,(hl)
2039  07B8  DD 77 FD    	ld	(ix-3),a
2040  07BB  D6 24       	sub	a,0x24
2041  07BD  3E 00       	ld	a,0x00
2042  07BF  17          	rla
2043  07C0  DD 77 FE    	ld	(ix-2),a
2044  07C3  CB 47       	bit	0,a
2045  07C5  C2 C0 09    	jp	NZ, l_player_pick_item_00131
2046  07C8  3E 2F       	ld	a,0x2f
2047  07CA  DD 96 FD    	sub	a,(ix-3)
2048  07CD  3E 00       	ld	a,0x00
2049  07CF  17          	rla
2050  07D0  DD 77 FF    	ld	(ix-1),a
2051  07D3  CB 47       	bit	0,a
2052  07D5  C2 C0 09    	jp	NZ, l_player_pick_item_00131
2053  07D8  CD 00 00    	call	_ay_reset
2054  07DB  79          	ld	a, c
2055  07DC  21 00 00    	ld	hl,_sprite_curr_index
2056  07DF  86          	add	a, (hl)
2057  07E0  4F          	ld	c, a
2058  07E1  78          	ld	a, b
2059  07E2  CE 00       	adc	a,0x00
2060  07E4  47          	ld	b, a
2061  07E5  5E          	ld	e, (hl)
2062  07E6  16 00       	ld	d,0x00
2063  07E8  C5          	push	bc
2064  07E9  EB          	ex	de,hl
2065  07EA  CD 00 00    	call	_game_match_back
2066  07ED  C1          	pop	bc
2067  07EE  7D          	ld	a,l
2068  07EF  02          	ld	(bc), a
2069  07F0  2A 00 00    	ld	hl,(_sprite_curr_index)
2070  07F3  26 00       	ld	h,0x00
2071  07F5  CD 00 00    	call	_game_obj_set
2072  07F8  3A 00 00    	ld	a,(_sprite_curr_index)
2073  07FB  07          	rlca
2074  07FC  07          	rlca
2075  07FD  07          	rlca
2076  07FE  07          	rlca
2077  07FF  E6 0F       	and	a,0x0f
2078  0801  07          	rlca
2079  0802  07          	rlca
2080  0803  07          	rlca
2081  0804  07          	rlca
2082  0805  E6 F0       	and	a,0xf0
2083  0807  32 00 00    	ld	(_s_lin1),a
2084  080A  3A 00 00    	ld	a,(_sprite_curr_index)
2085  080D  E6 0F       	and	a,0x0f
2086  080F  87          	add	a, a
2087  0810  32 00 00    	ld	(_s_col1),a
2088  0813  21 00 00    	ld	hl,0x0000
2089  0816  E5          	push	hl
2090  0817  21 84 03    	ld	hl,0x0384
2091  081A  E5          	push	hl
2092  081B  F5          	push	af
2093  081C  33          	inc	sp
2094  081D  3A 00 00    	ld	a,(_s_lin1)
2095  0820  F5          	push	af
2096  0821  33          	inc	sp
2097  0822  CD 00 00    	call	_spr_add_anim
2098  0825  F1          	pop	af
2099  0826  F1          	pop	af
2100  0827  F1          	pop	af
2101  0828  DD CB FE 46 	bit	0,(ix-2)
2102  082C  C2 C0 09    	jp	NZ, l_player_pick_item_00131
2103  082F  DD CB FF 46 	bit	0,(ix-1)
2104  0833  C2 C0 09    	jp	NZ, l_player_pick_item_00131
2105  0836  DD 7E FD    	ld	a,(ix-3)
2106  0839  C6 DC       	add	a,0xdc
2107  083B  4F          	ld	c, a
2108  083C  06 00       	ld	b,0x00
2109  083E  21 45 08    	ld	hl,l_player_pick_item_00177
2110  0841  09          	add	hl, bc
2111  0842  09          	add	hl, bc
2112  0843  09          	add	hl, bc
2113  0844  E9          	jp	(hl)
2114  0845              l_player_pick_item_00177:
2115  0845  C3 69 08    	jp	l_player_pick_item_00101
2116  0848  C3 7F 08    	jp	l_player_pick_item_00102
2117  084B  C3 95 08    	jp	l_player_pick_item_00103
2118  084E  C3 AB 08    	jp	l_player_pick_item_00104
2119  0851  C3 C1 08    	jp	l_player_pick_item_00105
2120  0854  C3 FE 08    	jp	l_player_pick_item_00109
2121  0857  C3 20 09    	jp	l_player_pick_item_00112
2122  085A  C3 42 09    	jp	l_player_pick_item_00115
2123  085D  C3 62 09    	jp	l_player_pick_item_00118
2124  0860  C3 82 09    	jp	l_player_pick_item_00121
2125  0863  C3 A2 09    	jp	l_player_pick_item_00124
2126  0866  C3 EA 08    	jp	l_player_pick_item_00108
2127  0869              l_player_pick_item_00101:
2128  0869  21 00 00    	ld	hl,_ay_fx_06_efecto
2129  086C  E5          	push	hl
2130  086D  21 01 06    	ld	hl,0x0601
2131  0870  E5          	push	hl
2132  0871  CD 00 00    	call	_ay_song_play
2133  0874  21 00 00    	ld	hl,_player_keys
2134  0877  36 01       	ld	(hl),0x01
2135  0879  CD 00 00    	call	_game_update_stats
2136  087C  C3 C0 09    	jp	l_player_pick_item_00131
2137  087F              l_player_pick_item_00102:
2138  087F  21 00 00    	ld	hl,_ay_fx_06_efecto
2139  0882  E5          	push	hl
2140  0883  21 01 06    	ld	hl,0x0601
2141  0886  E5          	push	hl
2142  0887  CD 00 00    	call	_ay_song_play
2143  088A  21 01 00    	ld	hl, +(_player_keys + 0x0001)
2144  088D  36 01       	ld	(hl),0x01
2145  088F  CD 00 00    	call	_game_update_stats
2146  0892  C3 C0 09    	jp	l_player_pick_item_00131
2147  0895              l_player_pick_item_00103:
2148  0895  21 00 00    	ld	hl,_ay_fx_06_efecto
2149  0898  E5          	push	hl
2150  0899  21 01 06    	ld	hl,0x0601
2151  089C  E5          	push	hl
2152  089D  CD 00 00    	call	_ay_song_play
2153  08A0  21 02 00    	ld	hl, +(_player_keys + 0x0002)
2154  08A3  36 01       	ld	(hl),0x01
2155  08A5  CD 00 00    	call	_game_update_stats
2156  08A8  C3 C0 09    	jp	l_player_pick_item_00131
2157  08AB              l_player_pick_item_00104:
2158  08AB  21 00 00    	ld	hl,_ay_fx_06_efecto
2159  08AE  E5          	push	hl
2160  08AF  21 01 06    	ld	hl,0x0601
2161  08B2  E5          	push	hl
2162  08B3  CD 00 00    	call	_ay_song_play
2163  08B6  21 03 00    	ld	hl, +(_player_keys + 0x0003)
2164  08B9  36 01       	ld	(hl),0x01
2165  08BB  CD 00 00    	call	_game_update_stats
2166  08BE  C3 C0 09    	jp	l_player_pick_item_00131
2167  08C1              l_player_pick_item_00105:
2168  08C1  21 00 00    	ld	hl,_ay_fx_04_coin
2169  08C4  E5          	push	hl
2170  08C5  21 01 04    	ld	hl,0x0401
2171  08C8  E5          	push	hl
2172  08C9  CD 00 00    	call	_ay_song_play
2173  08CC  21 01 00    	ld	hl,0x0001
2174  08CF  CD 8B 0C    	call	_player_score_add
2175  08D2  21 00 00    	ld	hl,_player_coins
2176  08D5  7E          	ld	a,(hl)
2177  08D6  3C          	inc	a
2178  08D7  77          	ld	(hl),a
2179  08D8  D6 64       	sub	a,0x64
2180  08DA  20 08       	jr	NZ,l_player_pick_item_00107
2181  08DC  CD 83 05    	call	_player_1up
2182  08DF  21 00 00    	ld	hl,_player_coins
2183  08E2  36 00       	ld	(hl),0x00
2184  08E4              l_player_pick_item_00107:
2185  08E4  CD 00 00    	call	_game_update_stats
2186  08E7  C3 C0 09    	jp	l_player_pick_item_00131
2187  08EA              l_player_pick_item_00108:
2188  08EA  21 00 00    	ld	hl,_ay_fx_04_magia1
2189  08ED  E5          	push	hl
2190  08EE  21 01 04    	ld	hl,0x0401
2191  08F1  E5          	push	hl
2192  08F2  CD 00 00    	call	_ay_song_play
2193  08F5  21 0A 00    	ld	hl,0x000a
2194  08F8  CD 8B 0C    	call	_player_score_add
2195  08FB  C3 C0 09    	jp	l_player_pick_item_00131
2196  08FE              l_player_pick_item_00109:
2197  08FE  21 00 00    	ld	hl,_ay_fx_06_efecto
2198  0901  E5          	push	hl
2199  0902  21 01 06    	ld	hl,0x0601
2200  0905  E5          	push	hl
2201  0906  CD 00 00    	call	_ay_song_play
2202  0909  21 00 00    	ld	hl,_player_str
2203  090C  34          	inc	(hl)
2204  090D  21 00 00    	ld	hl,_player_max_vita
2205  0910  7E          	ld	a, (hl)
2206  0911  D6 C8       	sub	a,0xc8
2207  0913  D2 C0 09    	jp	NC, l_player_pick_item_00131
2208  0916  7E          	ld	a, (hl)
2209  0917  C6 0A       	add	a,0x0a
2210  0919  77          	ld	(hl), a
2211  091A  CD 00 00    	call	_game_update_stats
2212  091D  C3 C0 09    	jp	l_player_pick_item_00131
2213  0920              l_player_pick_item_00112:
2214  0920  21 00 00    	ld	hl,_ay_fx_06_efecto
2215  0923  E5          	push	hl
2216  0924  21 01 06    	ld	hl,0x0601
2217  0927  E5          	push	hl
2218  0928  CD 00 00    	call	_ay_song_play
2219  092B  21 00 00    	ld	hl,_player_str
2220  092E  34          	inc	(hl)
2221  092F  21 00 00    	ld	hl,_player_max_vita
2222  0932  7E          	ld	a, (hl)
2223  0933  D6 C8       	sub	a,0xc8
2224  0935  D2 C0 09    	jp	NC, l_player_pick_item_00131
2225  0938  7E          	ld	a, (hl)
2226  0939  C6 0A       	add	a,0x0a
2227  093B  77          	ld	(hl), a
2228  093C  CD 00 00    	call	_game_update_stats
2229  093F  C3 C0 09    	jp	l_player_pick_item_00131
2230  0942              l_player_pick_item_00115:
2231  0942  21 00 00    	ld	hl,_ay_fx_06_efecto
2232  0945  E5          	push	hl
2233  0946  21 01 06    	ld	hl,0x0601
2234  0949  E5          	push	hl
2235  094A  CD 00 00    	call	_ay_song_play
2236  094D  21 00 00    	ld	hl,_player_str
2237  0950  34          	inc	(hl)
2238  0951  21 00 00    	ld	hl,_player_max_vita
2239  0954  7E          	ld	a, (hl)
2240  0955  D6 C8       	sub	a,0xc8
2241  0957  30 67       	jr	NC,l_player_pick_item_00131
2242  0959  7E          	ld	a, (hl)
2243  095A  C6 0A       	add	a,0x0a
2244  095C  77          	ld	(hl), a
2245  095D  CD 00 00    	call	_game_update_stats
2246  0960  18 5E       	jr	l_player_pick_item_00131
2247  0962              l_player_pick_item_00118:
2248  0962  21 00 00    	ld	hl,_ay_fx_06_efecto
2249  0965  E5          	push	hl
2250  0966  21 01 06    	ld	hl,0x0601
2251  0969  E5          	push	hl
2252  096A  CD 00 00    	call	_ay_song_play
2253  096D  21 00 00    	ld	hl,_player_int
2254  0970  34          	inc	(hl)
2255  0971  21 00 00    	ld	hl,_player_max_mana
2256  0974  7E          	ld	a, (hl)
2257  0975  D6 C8       	sub	a,0xc8
2258  0977  30 47       	jr	NC,l_player_pick_item_00131
2259  0979  7E          	ld	a, (hl)
2260  097A  C6 0A       	add	a,0x0a
2261  097C  77          	ld	(hl), a
2262  097D  CD 00 00    	call	_game_update_stats
2263  0980  18 3E       	jr	l_player_pick_item_00131
2264  0982              l_player_pick_item_00121:
2265  0982  21 00 00    	ld	hl,_ay_fx_06_efecto
2266  0985  E5          	push	hl
2267  0986  21 01 06    	ld	hl,0x0601
2268  0989  E5          	push	hl
2269  098A  CD 00 00    	call	_ay_song_play
2270  098D  21 00 00    	ld	hl,_player_int
2271  0990  34          	inc	(hl)
2272  0991  21 00 00    	ld	hl,_player_max_mana
2273  0994  7E          	ld	a, (hl)
2274  0995  D6 C8       	sub	a,0xc8
2275  0997  30 27       	jr	NC,l_player_pick_item_00131
2276  0999  7E          	ld	a, (hl)
2277  099A  C6 0A       	add	a,0x0a
2278  099C  77          	ld	(hl), a
2279  099D  CD 00 00    	call	_game_update_stats
2280  09A0  18 1E       	jr	l_player_pick_item_00131
2281  09A2              l_player_pick_item_00124:
2282  09A2  21 00 00    	ld	hl,_ay_fx_06_efecto
2283  09A5  E5          	push	hl
2284  09A6  21 01 06    	ld	hl,0x0601
2285  09A9  E5          	push	hl
2286  09AA  CD 00 00    	call	_ay_song_play
2287  09AD  21 00 00    	ld	hl,_player_int
2288  09B0  34          	inc	(hl)
2289  09B1  21 00 00    	ld	hl,_player_max_mana
2290  09B4  7E          	ld	a, (hl)
2291  09B5  D6 C8       	sub	a,0xc8
2292  09B7  30 07       	jr	NC,l_player_pick_item_00131
2293  09B9  7E          	ld	a, (hl)
2294  09BA  C6 0A       	add	a,0x0a
2295  09BC  77          	ld	(hl), a
2296  09BD  CD 00 00    	call	_game_update_stats
2297  09C0              l_player_pick_item_00131:
2298  09C0  DD F9       	ld	sp, ix
2299  09C2  DD E1       	pop	ix
2300  09C4  C9          	ret
2301  09C5              	SECTION code_compiler
2302  09C5              ;	---------------------------------
2303  09C5              ; Function player_hit_platform
2304  09C5              ; ---------------------------------
2305  09C5              _player_hit_platform:
2306  09C5  CD 00 00    	call	___sdcc_enter_ix
2307  09C8  3B          	dec	sp
2308  09C9  3A 00 00    	ld	a,(_player_hit_lin)
2309  09CC  B7          	or	a, a
2310  09CD  C2 56 0C    	jp	NZ, l_player_hit_platform_00145
2311  09D0  21 07 00    	ld	hl,+(_lin + 0x0007)
2312  09D3  4E          	ld	c, (hl)
2313  09D4  3E 10       	ld	a,0x10
2314  09D6  91          	sub	a, c
2315  09D7  D2 56 0C    	jp	NC, l_player_hit_platform_00145
2316  09DA  01 00 00    	ld	bc,_scr_map
2317  09DD  2A 00 00    	ld	hl,(_index1)
2318  09E0  09          	add	hl,bc
2319  09E1  7E          	ld	a,(hl)
2320  09E2  D6 45       	sub	a,0x45
2321  09E4  DA 56 0C    	jp	C, l_player_hit_platform_00145
2322  09E7  2A 00 00    	ld	hl,(_curr_time)
2323  09EA  22 0E 00    	ld	(_spr_timer + 0x000e),hl
2324  09ED  3A 07 00    	ld	a,(_lin + 0x0007)
2325  09F0  06 00       	ld	b,0x00
2326  09F2  C6 F8       	add	a,0xf8
2327  09F4  4F          	ld	c, a
2328  09F5  78          	ld	a, b
2329  09F6  CE FF       	adc	a,0xff
2330  09F8  5F          	ld	e, a
2331  09F9  06 04       	ld	b,0x04
2332  09FB              l_player_hit_platform_00252:
2333  09FB  CB 2B       	sra	e
2334  09FD  CB 19       	rr	c
2335  09FF  10 FA       	djnz	l_player_hit_platform_00252
2336  0A01  79          	ld	a, c
2337  0A02  07          	rlca
2338  0A03  07          	rlca
2339  0A04  07          	rlca
2340  0A05  07          	rlca
2341  0A06  E6 F0       	and	a,0xf0
2342  0A08  C6 08       	add	a,0x08
2343  0A0A  32 00 00    	ld	(_player_hit_lin),a
2344  0A0D  21 07 00    	ld	hl,+(_col + 0x0007)
2345  0A10  4E          	ld	c, (hl)
2346  0A11  CB 41       	bit	0, c
2347  0A13  20 06       	jr	NZ,l_player_hit_platform_00111
2348  0A15  21 00 00    	ld	hl,_player_hit_col
2349  0A18  71          	ld	(hl), c
2350  0A19  18 2D       	jr	l_player_hit_platform_00112
2351  0A1B              l_player_hit_platform_00111:
2352  0A1B  21 07 00    	ld	hl,+(_state + 0x0007)
2353  0A1E  5E          	ld	e, (hl)
2354  0A1F  41          	ld	b, c
2355  0A20  04          	inc	b
2356  0A21  0D          	dec	c
2357  0A22  CB 5B       	bit	3, e
2358  0A24  28 12       	jr	Z,l_player_hit_platform_00108
2359  0A26  3A 00 00    	ld	a,(_g_player_hit_right)
2360  0A29  B7          	or	a, a
2361  0A2A  28 06       	jr	Z,l_player_hit_platform_00102
2362  0A2C  21 00 00    	ld	hl,_player_hit_col
2363  0A2F  70          	ld	(hl), b
2364  0A30  18 16       	jr	l_player_hit_platform_00112
2365  0A32              l_player_hit_platform_00102:
2366  0A32  21 00 00    	ld	hl,_player_hit_col
2367  0A35  71          	ld	(hl), c
2368  0A36  18 10       	jr	l_player_hit_platform_00112
2369  0A38              l_player_hit_platform_00108:
2370  0A38  3A 00 00    	ld	a,(_g_player_hit_left)
2371  0A3B  B7          	or	a, a
2372  0A3C  28 06       	jr	Z,l_player_hit_platform_00105
2373  0A3E  21 00 00    	ld	hl,_player_hit_col
2374  0A41  71          	ld	(hl), c
2375  0A42  18 04       	jr	l_player_hit_platform_00112
2376  0A44              l_player_hit_platform_00105:
2377  0A44  21 00 00    	ld	hl,_player_hit_col
2378  0A47  70          	ld	(hl), b
2379  0A48              l_player_hit_platform_00112:
2380  0A48  2A 00 00    	ld	hl,(_index1)
2381  0A4B  01 00 00    	ld	bc,_scr_map
2382  0A4E  09          	add	hl,bc
2383  0A4F  7E          	ld	a,(hl)
2384  0A50  FE 4D       	cp	a,0x4d
2385  0A52  20 4A       	jr	NZ,l_player_hit_platform_00114
2386  0A54  E5          	push	hl
2387  0A55  2A 00 00    	ld	hl,(_index1)
2388  0A58  CD 00 00    	call	_game_match_back
2389  0A5B  C1          	pop	bc
2390  0A5C  7D          	ld	a,l
2391  0A5D  02          	ld	(bc), a
2392  0A5E  2A 00 00    	ld	hl,(_index1)
2393  0A61  CD 00 00    	call	_game_obj_set
2394  0A64  21 00 00    	ld	hl,_ay_fx_04_explosion
2395  0A67  E5          	push	hl
2396  0A68  21 01 04    	ld	hl,0x0401
2397  0A6B  E5          	push	hl
2398  0A6C  CD 00 00    	call	_ay_song_play
2399  0A6F  21 00 00    	ld	hl,_index1
2400  0A72  7E          	ld	a, (hl)
2401  0A73  E6 0F       	and	a,0x0f
2402  0A75  87          	add	a, a
2403  0A76  57          	ld	d, a
2404  0A77  4E          	ld	c, (hl)
2405  0A78  23          	inc	hl
2406  0A79  5E          	ld	e, (hl)
2407  0A7A  06 04       	ld	b,0x04
2408  0A7C  79          	ld	a,c
2409  0A7D              l_player_hit_platform_00258:
2410  0A7D  CB 3B       	srl	e
2411  0A7F  1F          	rra
2412  0A80  10 FB       	djnz	l_player_hit_platform_00258
2413  0A82  07          	rlca
2414  0A83  07          	rlca
2415  0A84  07          	rlca
2416  0A85  07          	rlca
2417  0A86  E6 F0       	and	a,0xf0
2418  0A88  47          	ld	b, a
2419  0A89  21 00 00    	ld	hl,0x0000
2420  0A8C  E5          	push	hl
2421  0A8D  21 87 03    	ld	hl,0x0387
2422  0A90  E5          	push	hl
2423  0A91  58          	ld	e,b
2424  0A92  D5          	push	de
2425  0A93  CD 00 00    	call	_spr_add_anim
2426  0A96  F1          	pop	af
2427  0A97  F1          	pop	af
2428  0A98  F1          	pop	af
2429  0A99  2E 01       	ld	l,0x01
2430  0A9B  C3 58 0C    	jp	l_player_hit_platform_00148
2431  0A9E              l_player_hit_platform_00114:
2432  0A9E  FE 5A       	cp	a,0x5a
2433  0AA0  28 05       	jr	Z,l_player_hit_platform_00141
2434  0AA2  D6 5D       	sub	a,0x5d
2435  0AA4  C2 42 0C    	jp	NZ,l_player_hit_platform_00142
2436  0AA7              l_player_hit_platform_00141:
2437  0AA7  3A 00 00    	ld	a,(_game_boss)
2438  0AAA  B7          	or	a, a
2439  0AAB  28 0B       	jr	Z,l_player_hit_platform_00174
2440  0AAD  3A 00 00    	ld	a,(_game_mush_count)
2441  0AB0  B7          	or	a, a
2442  0AB1  28 05       	jr	Z,l_player_hit_platform_00174
2443  0AB3  2E 00       	ld	l,0x00
2444  0AB5  C3 58 0C    	jp	l_player_hit_platform_00148
2445  0AB8              l_player_hit_platform_00174:
2446  0AB8  DD 36 FF 00 	ld	(ix-1),0x00
2447  0ABC              l_player_hit_platform_00138:
2448  0ABC  DD 7E FF    	ld	a,(ix-1)
2449  0ABF  D6 07       	sub	a,0x07
2450  0AC1  D2 42 0C    	jp	NC, l_player_hit_platform_00142
2451  0AC4  3E 00       	ld	a, +((_mush_index) & 0xFF)
2452  0AC6  DD 86 FF    	add	a,(ix-1)
2453  0AC9  6F          	ld	l, a
2454  0ACA  3E 00       	ld	a, +((_mush_index) / 256)
2455  0ACC  CE 00       	adc	a,0x00
2456  0ACE  67          	ld	h, a
2457  0ACF  4E          	ld	c, (hl)
2458  0AD0  06 00       	ld	b,0x00
2459  0AD2  2A 00 00    	ld	hl,(_index1)
2460  0AD5  AF          	xor	a,a
2461  0AD6  ED 42       	sbc	hl,bc
2462  0AD8  C2 3C 0C    	jp	NZ,l_player_hit_platform_00137
2463  0ADB  3A 07 00    	ld	a,(_lin + 0x0007)
2464  0ADE  07          	rlca
2465  0ADF  07          	rlca
2466  0AE0  07          	rlca
2467  0AE1  07          	rlca
2468  0AE2  E6 0F       	and	a,0x0f
2469  0AE4  07          	rlca
2470  0AE5  07          	rlca
2471  0AE6  07          	rlca
2472  0AE7  07          	rlca
2473  0AE8  E6 F0       	and	a,0xf0
2474  0AEA  C6 E0       	add	a,0xe0
2475  0AEC  32 00 00    	ld	(_s_lin1),a
2476  0AEF  3A 07 00    	ld	a,(_col + 0x0007)
2477  0AF2  CB 3F       	srl	a
2478  0AF4  87          	add	a, a
2479  0AF5  32 00 00    	ld	(_s_col1),a
2480  0AF8  0E 00       	ld	c,0x00
2481  0AFA              l_player_hit_platform_00120:
2482  0AFA  79          	ld	a, c
2483  0AFB  D6 07       	sub	a,0x07
2484  0AFD  30 18       	jr	NC,l_player_hit_platform_00122
2485  0AFF  06 00       	ld	b,0x00
2486  0B01  21 00 00    	ld	hl,_mush_index
2487  0B04  09          	add	hl, bc
2488  0B05  46          	ld	b, (hl)
2489  0B06  1E 00       	ld	e,0x00
2490  0B08  21 00 00    	ld	hl,_index1
2491  0B0B  7E          	ld	a, (hl)
2492  0B0C  90          	sub	a, b
2493  0B0D  20 05       	jr	NZ,l_player_hit_platform_00264
2494  0B0F  23          	inc	hl
2495  0B10  7E          	ld	a, (hl)
2496  0B11  93          	sub	a, e
2497  0B12  28 03       	jr	Z,l_player_hit_platform_00122
2498  0B14              l_player_hit_platform_00264:
2499  0B14  0C          	inc	c
2500  0B15  18 E3       	jr	l_player_hit_platform_00120
2501  0B17              l_player_hit_platform_00122:
2502  0B17  06 00       	ld	b,0x00
2503  0B19  21 00 00    	ld	hl,_mush_class
2504  0B1C  09          	add	hl, bc
2505  0B1D  7E          	ld	a, (hl)
2506  0B1E  FE 79       	cp	a,0x79
2507  0B20  28 18       	jr	Z,l_player_hit_platform_00123
2508  0B22  FE 7A       	cp	a,0x7a
2509  0B24  28 2F       	jr	Z,l_player_hit_platform_00124
2510  0B26  FE 7B       	cp	a,0x7b
2511  0B28  28 5F       	jr	Z,l_player_hit_platform_00126
2512  0B2A  FE 7C       	cp	a,0x7c
2513  0B2C  28 41       	jr	Z,l_player_hit_platform_00125
2514  0B2E  FE 7D       	cp	a,0x7d
2515  0B30  CA BD 0B    	jp	Z,l_player_hit_platform_00128
2516  0B33  D6 7E       	sub	a,0x7e
2517  0B35  28 6C       	jr	Z,l_player_hit_platform_00127
2518  0B37  C3 D5 0B    	jp	l_player_hit_platform_00129
2519  0B3A              l_player_hit_platform_00123:
2520  0B3A  2E 02       	ld	l,0x02
2521  0B3C  CD 00 00    	call	_zx_border_fastcall
2522  0B3F  3A 00 00    	ld	a,(_s_col1)
2523  0B42  21 06 FF    	ld	hl,0xff06
2524  0B45  E5          	push	hl
2525  0B46  F5          	push	af
2526  0B47  33          	inc	sp
2527  0B48  3A 00 00    	ld	a,(_s_lin1)
2528  0B4B  F5          	push	af
2529  0B4C  33          	inc	sp
2530  0B4D  CD 00 00    	call	_enemy_init
2531  0B50  F1          	pop	af
2532  0B51  F1          	pop	af
2533  0B52  C3 D5 0B    	jp	l_player_hit_platform_00129
2534  0B55              l_player_hit_platform_00124:
2535  0B55  2E 02       	ld	l,0x02
2536  0B57  CD 00 00    	call	_zx_border_fastcall
2537  0B5A  3A 00 00    	ld	a,(_s_col1)
2538  0B5D  21 06 01    	ld	hl,0x0106
2539  0B60  E5          	push	hl
2540  0B61  F5          	push	af
2541  0B62  33          	inc	sp
2542  0B63  3A 00 00    	ld	a,(_s_lin1)
2543  0B66  F5          	push	af
2544  0B67  33          	inc	sp
2545  0B68  CD 00 00    	call	_enemy_init
2546  0B6B  F1          	pop	af
2547  0B6C  F1          	pop	af
2548  0B6D  18 66       	jr	l_player_hit_platform_00129
2549  0B6F              l_player_hit_platform_00125:
2550  0B6F  2E 01       	ld	l,0x01
2551  0B71  CD 00 00    	call	_zx_border_fastcall
2552  0B74  3A 00 00    	ld	a,(_s_col1)
2553  0B77  21 07 01    	ld	hl,0x0107
2554  0B7A  E5          	push	hl
2555  0B7B  F5          	push	af
2556  0B7C  33          	inc	sp
2557  0B7D  3A 00 00    	ld	a,(_s_lin1)
2558  0B80  F5          	push	af
2559  0B81  33          	inc	sp
2560  0B82  CD 00 00    	call	_enemy_init
2561  0B85  F1          	pop	af
2562  0B86  F1          	pop	af
2563  0B87  18 4C       	jr	l_player_hit_platform_00129
2564  0B89              l_player_hit_platform_00126:
2565  0B89  2E 01       	ld	l,0x01
2566  0B8B  CD 00 00    	call	_zx_border_fastcall
2567  0B8E  3A 00 00    	ld	a,(_s_col1)
2568  0B91  21 07 FF    	ld	hl,0xff07
2569  0B94  E5          	push	hl
2570  0B95  F5          	push	af
2571  0B96  33          	inc	sp
2572  0B97  3A 00 00    	ld	a,(_s_lin1)
2573  0B9A  F5          	push	af
2574  0B9B  33          	inc	sp
2575  0B9C  CD 00 00    	call	_enemy_init
2576  0B9F  F1          	pop	af
2577  0BA0  F1          	pop	af
2578  0BA1  18 32       	jr	l_player_hit_platform_00129
2579  0BA3              l_player_hit_platform_00127:
2580  0BA3  2E 04       	ld	l,0x04
2581  0BA5  CD 00 00    	call	_zx_border_fastcall
2582  0BA8  3A 00 00    	ld	a,(_s_col1)
2583  0BAB  21 08 01    	ld	hl,0x0108
2584  0BAE  E5          	push	hl
2585  0BAF  F5          	push	af
2586  0BB0  33          	inc	sp
2587  0BB1  3A 00 00    	ld	a,(_s_lin1)
2588  0BB4  F5          	push	af
2589  0BB5  33          	inc	sp
2590  0BB6  CD 00 00    	call	_enemy_init
2591  0BB9  F1          	pop	af
2592  0BBA  F1          	pop	af
2593  0BBB  18 18       	jr	l_player_hit_platform_00129
2594  0BBD              l_player_hit_platform_00128:
2595  0BBD  2E 04       	ld	l,0x04
2596  0BBF  CD 00 00    	call	_zx_border_fastcall
2597  0BC2  3A 00 00    	ld	a,(_s_col1)
2598  0BC5  21 08 FF    	ld	hl,0xff08
2599  0BC8  E5          	push	hl
2600  0BC9  F5          	push	af
2601  0BCA  33          	inc	sp
2602  0BCB  3A 00 00    	ld	a,(_s_lin1)
2603  0BCE  F5          	push	af
2604  0BCF  33          	inc	sp
2605  0BD0  CD 00 00    	call	_enemy_init
2606  0BD3  F1          	pop	af
2607  0BD4  F1          	pop	af
2608  0BD5              l_player_hit_platform_00129:
2609  0BD5  21 00 00    	ld	hl,_game_mush_count
2610  0BD8  34          	inc	(hl)
2611  0BD9  3A 00 00    	ld	a,(_game_boss)
2612  0BDC  B7          	or	a, a
2613  0BDD  20 5D       	jr	NZ,l_player_hit_platform_00137
2614  0BDF  3A 00 00    	ld	a,(_index1)
2615  0BE2  C6 F0       	add	a,0xf0
2616  0BE4  32 00 00    	ld	(_index0),a
2617  0BE7  3A 01 00    	ld	a,(_index1 + 1)
2618  0BEA  CE FF       	adc	a,0xff
2619  0BEC  21 01 00    	ld	hl,_index0 + 1
2620  0BEF  77          	ld	(hl), a
2621  0BF0  3E 00       	ld	a, +((_scr_map) & 0xFF)
2622  0BF2  2B          	dec	hl
2623  0BF3  86          	add	a, (hl)
2624  0BF4  4F          	ld	c, a
2625  0BF5  3E 00       	ld	a, +((_scr_map) / 256)
2626  0BF7  23          	inc	hl
2627  0BF8  8E          	adc	a, (hl)
2628  0BF9  47          	ld	b, a
2629  0BFA  C5          	push	bc
2630  0BFB  2B          	dec	hl
2631  0BFC  7E          	ld	a, (hl)
2632  0BFD  23          	inc	hl
2633  0BFE  66          	ld	h, (hl)
2634  0BFF  6F          	ld	l, a
2635  0C00  CD 00 00    	call	_game_match_back
2636  0C03  C1          	pop	bc
2637  0C04  7D          	ld	a,l
2638  0C05  02          	ld	(bc), a
2639  0C06  01 00 00    	ld	bc,_scr_map
2640  0C09  2A 00 00    	ld	hl,(_index1)
2641  0C0C  09          	add	hl,bc
2642  0C0D  7E          	ld	a,(hl)
2643  0C0E  FE 5A       	cp	a,0x5a
2644  0C10  4D          	ld	c,l
2645  0C11  44          	ld	b,h
2646  0C12  28 04       	jr	Z,l_player_hit_platform_00130
2647  0C14  D6 5D       	sub	a,0x5d
2648  0C16  20 05       	jr	NZ,l_player_hit_platform_00131
2649  0C18              l_player_hit_platform_00130:
2650  0C18  3E 4F       	ld	a,0x4f
2651  0C1A  02          	ld	(bc), a
2652  0C1B  18 03       	jr	l_player_hit_platform_00132
2653  0C1D              l_player_hit_platform_00131:
2654  0C1D  3E 54       	ld	a,0x54
2655  0C1F  02          	ld	(bc), a
2656  0C20              l_player_hit_platform_00132:
2657  0C20  2A 00 00    	ld	hl,(_index1)
2658  0C23  01 F0 FF    	ld	bc,0xfff0
2659  0C26  09          	add	hl,bc
2660  0C27  CD 00 00    	call	_game_obj_set
2661  0C2A  3A 00 00    	ld	a,(_s_lin1)
2662  0C2D  C6 10       	add	a,0x10
2663  0C2F  4F          	ld	c, a
2664  0C30  3A 00 00    	ld	a, (_s_col1)
2665  0C33  47          	ld	b,a
2666  0C34  C5          	push	bc
2667  0C35  3E 4F       	ld	a,0x4f
2668  0C37  F5          	push	af
2669  0C38  33          	inc	sp
2670  0C39  CD 00 00    	call	_NIRVANAP_drawT_callee
2671  0C3C              l_player_hit_platform_00137:
2672  0C3C  DD 34 FF    	inc	(ix-1)
2673  0C3F  C3 BC 0A    	jp	l_player_hit_platform_00138
2674  0C42              l_player_hit_platform_00142:
2675  0C42  21 00 00    	ld	hl,_ay_fx_04_golpe
2676  0C45  E5          	push	hl
2677  0C46  21 01 04    	ld	hl,0x0401
2678  0C49  E5          	push	hl
2679  0C4A  CD 00 00    	call	_ay_song_play
2680  0C4D  2E 01       	ld	l,0x01
2681  0C4F  CD 00 00    	call	_spr_brick_anim
2682  0C52  2E 01       	ld	l,0x01
2683  0C54  18 02       	jr	l_player_hit_platform_00148
2684  0C56              l_player_hit_platform_00145:
2685  0C56  2E 00       	ld	l,0x00
2686  0C58              l_player_hit_platform_00148:
2687  0C58  33          	inc	sp
2688  0C59  DD E1       	pop	ix
2689  0C5B  C9          	ret
2690  0C5C              	SECTION code_compiler
2691  0C5C              ;	---------------------------------
2692  0C5C              ; Function player_hit_platform_clear
2693  0C5C              ; ---------------------------------
2694  0C5C              _player_hit_platform_clear:
2695  0C5C  3E 04       	ld	a,0x04
2696  0C5E  F5          	push	af
2697  0C5F  33          	inc	sp
2698  0C60  21 0E 00    	ld	hl, +(_spr_timer + 0x000e)
2699  0C63  E5          	push	hl
2700  0C64  CD 00 00    	call	_game_check_time
2701  0C67  F1          	pop	af
2702  0C68  33          	inc	sp
2703  0C69  7D          	ld	a, l
2704  0C6A  B7          	or	a, a
2705  0C6B  C8          	ret	Z
2706  0C6C  2A FF FF    	ld	hl,(_player_hit_col - 1)
2707  0C6F  3A 00 00    	ld	a,(_player_hit_lin)
2708  0C72  6F          	ld	l,a
2709  0C73  E5          	push	hl
2710  0C74  CD 00 00    	call	_spr_calc_index
2711  0C77  F1          	pop	af
2712  0C78  22 00 00    	ld	(_index1),hl
2713  0C7B  2E 00       	ld	l,0x00
2714  0C7D  CD 00 00    	call	_spr_brick_anim
2715  0C80  21 00 00    	ld	hl,_player_hit_lin
2716  0C83  36 00       	ld	(hl),0x00
2717  0C85  21 00 00    	ld	hl,_player_hit_col
2718  0C88  36 00       	ld	(hl),0x00
2719  0C8A  C9          	ret
2720  0C8B              	SECTION code_compiler
2721  0C8B              ;	---------------------------------
2722  0C8B              ; Function player_score_add
2723  0C8B              ; ---------------------------------
2724  0C8B              _player_score_add:
2725  0C8B  ED 4B 00 00 	ld	bc,(_player_score)
2726  0C8F  09          	add	hl,bc
2727  0C90  22 00 00    	ld	(_player_score),hl
2728  0C93  21 00 00    	ld	hl,_player_lvl
2729  0C96  7E          	ld	a, (hl)
2730  0C97  D6 14       	sub	a,0x14
2731  0C99  30 42       	jr	NC,l_player_score_add_00104
2732  0C9B  01 00 00    	ld	bc,_player_lvl_table+0
2733  0C9E  6E          	ld	l,(hl)
2734  0C9F  26 00       	ld	h,0x00
2735  0CA1  29          	add	hl, hl
2736  0CA2  09          	add	hl, bc
2737  0CA3  4E          	ld	c, (hl)
2738  0CA4  23          	inc	hl
2739  0CA5  46          	ld	b, (hl)
2740  0CA6  21 00 00    	ld	hl,_player_score
2741  0CA9  7E          	ld	a, (hl)
2742  0CAA  91          	sub	a, c
2743  0CAB  23          	inc	hl
2744  0CAC  7E          	ld	a, (hl)
2745  0CAD  98          	sbc	a, b
2746  0CAE  38 2D       	jr	C,l_player_score_add_00104
2747  0CB0  21 00 00    	ld	hl,_player_lvl
2748  0CB3  34          	inc	(hl)
2749  0CB4  CD 00 00    	call	_game_update_stats
2750  0CB7  CD 00 00    	call	_spr_flatten
2751  0CBA  21 16 00    	ld	hl,___str_2
2752  0CBD  E5          	push	hl
2753  0CBE  21 0C 0C    	ld	hl,0x0c0c
2754  0CC1  E5          	push	hl
2755  0CC2  CD 00 00    	call	_zx_print_str
2756  0CC5  AF          	xor	a, a
2757  0CC6  F5          	push	af
2758  0CC7  33          	inc	sp
2759  0CC8  21 3C 00    	ld	hl,0x003c
2760  0CCB  E5          	push	hl
2761  0CCC  21 0C 15    	ld	hl,0x150c
2762  0CCF  E5          	push	hl
2763  0CD0  3E 0C       	ld	a,0x0c
2764  0CD2  F5          	push	af
2765  0CD3  33          	inc	sp
2766  0CD4  CD 00 00    	call	_game_colour_message
2767  0CD7  F1          	pop	af
2768  0CD8  F1          	pop	af
2769  0CD9  F1          	pop	af
2770  0CDA  CD 00 00    	call	_spr_unflatten
2771  0CDD              l_player_score_add_00104:
2772  0CDD  3A 00 00    	ld	a,(_game_score_top)
2773  0CE0  21 00 00    	ld	hl,_player_score
2774  0CE3  96          	sub	a, (hl)
2775  0CE4  3A 01 00    	ld	a,(_game_score_top + 1)
2776  0CE7  23          	inc	hl
2777  0CE8  9E          	sbc	a, (hl)
2778  0CE9  30 06       	jr	NC,l_player_score_add_00106
2779  0CEB  2A 00 00    	ld	hl,(_player_score)
2780  0CEE  22 00 00    	ld	(_game_score_top),hl
2781  0CF1              l_player_score_add_00106:
2782  0CF1  CD 00 00    	call	_game_print_score
2783  0CF4  C9          	ret
2784  0CF5              	SECTION rodata_compiler
2785  0016              ___str_2:
2786  0016  4C 45 56 45 4C 20 55 50 21 
                        	DEFM "LEVEL UP!"
2787  001F  00          	DEFB 0x00
2788  0020              	SECTION code_compiler
2789  0CF5              ;	---------------------------------
2790  0CF5              ; Function player_check_floor
2791  0CF5              ; ---------------------------------
2792  0CF5              _player_check_floor:
2793  0CF5  CD 00 00    	call	___sdcc_enter_ix
2794  0CF8  F5          	push	af
2795  0CF9  F5          	push	af
2796  0CFA  F5          	push	af
2797  0CFB  21 07 00    	ld	hl,+(_col + 0x0007)
2798  0CFE  56          	ld	d, (hl)
2799  0CFF  3A 07 00    	ld	a,(_lin + 0x0007)
2800  0D02  C6 10       	add	a,0x10
2801  0D04  5F          	ld	e, a
2802  0D05  D5          	push	de
2803  0D06  CD 00 00    	call	_spr_calc_index
2804  0D09  F1          	pop	af
2805  0D0A  DD 75 FB    	ld	(ix-5),l
2806  0D0D  DD 74 FC    	ld	(ix-4),h
2807  0D10  11 00 00    	ld	de,_scr_map+0
2808  0D13  7B          	ld	a, e
2809  0D14  DD 86 FB    	add	a,(ix-5)
2810  0D17  4F          	ld	c, a
2811  0D18  7A          	ld	a, d
2812  0D19  DD 8E FC    	adc	a,(ix-4)
2813  0D1C  47          	ld	b, a
2814  0D1D  0A          	ld	a, (bc)
2815  0D1E  DD 77 FA    	ld	(ix-6),a
2816  0D21  DD 6E FB    	ld	l,(ix-5)
2817  0D24  DD 66 FC    	ld	h,(ix-4)
2818  0D27  23          	inc	hl
2819  0D28  19          	add	hl,de
2820  0D29  DD 75 FE    	ld	(ix-2),l
2821  0D2C  DD 74 FF    	ld	(ix-1),h
2822  0D2F  3A 00 00    	ld	a,(_s_lin0)
2823  0D32  D6 90       	sub	a,0x90
2824  0D34  20 26       	jr	NZ,l_player_check_floor_00108
2825  0D36  3A 00 00    	ld	a,(_map_heigth)
2826  0D39  C5          	push	bc
2827  0D3A  F5          	push	af
2828  0D3B  33          	inc	sp
2829  0D3C  3A 00 00    	ld	a,(_scr_curr)
2830  0D3F  F5          	push	af
2831  0D40  33          	inc	sp
2832  0D41  CD 00 00    	call	__divuchar_callee
2833  0D44  C1          	pop	bc
2834  0D45  7D          	ld	a,l
2835  0D46  3C          	inc	a
2836  0D47  32 00 00    	ld	(_tmp1),a
2837  0D4A  21 00 00    	ld	hl,_map_heigth
2838  0D4D  96          	sub	a, (hl)
2839  0D4E  30 06       	jr	NC,l_player_check_floor_00102
2840  0D50  DD 36 FA 00 	ld	(ix-6),0x00
2841  0D54  18 1C       	jr	l_player_check_floor_00109
2842  0D56              l_player_check_floor_00102:
2843  0D56  DD 36 FA 48 	ld	(ix-6),0x48
2844  0D5A  18 16       	jr	l_player_check_floor_00109
2845  0D5C              l_player_check_floor_00108:
2846  0D5C  3A 07 00    	ld	a,(_col + 0x0007)
2847  0D5F  0F          	rrca
2848  0D60  38 06       	jr	C,l_player_check_floor_00105
2849  0D62  DD 36 FD 00 	ld	(ix-3),0x00
2850  0D66  18 0A       	jr	l_player_check_floor_00109
2851  0D68              l_player_check_floor_00105:
2852  0D68  DD 6E FE    	ld	l,(ix-2)
2853  0D6B  DD 66 FF    	ld	h,(ix-1)
2854  0D6E  7E          	ld	a, (hl)
2855  0D6F  DD 77 FD    	ld	(ix-3),a
2856  0D72              l_player_check_floor_00109:
2857  0D72  DD 7E FA    	ld	a,(ix-6)
2858  0D75  D6 3A       	sub	a,0x3a
2859  0D77  38 07       	jr	C,l_player_check_floor_00132
2860  0D79  DD 7E FA    	ld	a,(ix-6)
2861  0D7C  D6 60       	sub	a,0x60
2862  0D7E  38 32       	jr	C,l_player_check_floor_00128
2863  0D80              l_player_check_floor_00132:
2864  0D80  DD 7E FD    	ld	a,(ix-3)
2865  0D83  D6 3A       	sub	a,0x3a
2866  0D85  38 07       	jr	C,l_player_check_floor_00127
2867  0D87  DD 7E FD    	ld	a,(ix-3)
2868  0D8A  D6 60       	sub	a,0x60
2869  0D8C  38 24       	jr	C,l_player_check_floor_00128
2870  0D8E              l_player_check_floor_00127:
2871  0D8E  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
2872  0D91  36 02       	ld	(hl),0x02
2873  0D93  21 00 00    	ld	hl,_s_state
2874  0D96  CB CE       	set	1, (hl)
2875  0D98  2E 00       	ld	l,0x00
2876  0D9A  CD 54 06    	call	_player_check_stairs
2877  0D9D  3A 00 00    	ld	a,(_player_onstair)
2878  0DA0  B7          	or	a, a
2879  0DA1  C2 40 0E    	jp	NZ, l_player_check_floor_00133
2880  0DA4  3A 00 00    	ld	a,(_s_lin0)
2881  0DA7  D6 90       	sub	a,0x90
2882  0DA9  C2 40 0E    	jp	NZ,l_player_check_floor_00133
2883  0DAC  CD 00 00    	call	_spr_page_down
2884  0DAF  C3 40 0E    	jp	l_player_check_floor_00133
2885  0DB2              l_player_check_floor_00128:
2886  0DB2  C5          	push	bc
2887  0DB3  3E 10       	ld	a,0x10
2888  0DB5  F5          	push	af
2889  0DB6  33          	inc	sp
2890  0DB7  21 00 00    	ld	hl,_player_brick_time
2891  0DBA  E5          	push	hl
2892  0DBB  CD 00 00    	call	_game_check_time
2893  0DBE  F1          	pop	af
2894  0DBF  33          	inc	sp
2895  0DC0  C1          	pop	bc
2896  0DC1  7D          	ld	a,l
2897  0DC2  B7          	or	a, a
2898  0DC3  CA 40 0E    	jp	Z, l_player_check_floor_00133
2899  0DC6  2A 00 00    	ld	hl,(_curr_time)
2900  0DC9  22 00 00    	ld	(_player_brick_time),hl
2901  0DCC  DD 7E FA    	ld	a,(ix-6)
2902  0DCF  D6 40       	sub	a,0x40
2903  0DD1  20 12       	jr	NZ,l_player_check_floor_00114
2904  0DD3  C5          	push	bc
2905  0DD4  DD 6E FB    	ld	l,(ix-5)
2906  0DD7  DD 66 FC    	ld	h,(ix-4)
2907  0DDA  CD 00 00    	call	_game_match_back
2908  0DDD  C1          	pop	bc
2909  0DDE  7D          	ld	a,l
2910  0DDF  02          	ld	(bc), a
2911  0DE0  C5          	push	bc
2912  0DE1  CD 45 0E    	call	_player_gasta_brick
2913  0DE4  C1          	pop	bc
2914  0DE5              l_player_check_floor_00114:
2915  0DE5  DD 7E FA    	ld	a,(ix-6)
2916  0DE8  D6 3F       	sub	a,0x3f
2917  0DEA  20 08       	jr	NZ,l_player_check_floor_00116
2918  0DEC  3E 40       	ld	a,0x40
2919  0DEE  02          	ld	(bc), a
2920  0DEF  C5          	push	bc
2921  0DF0  CD 45 0E    	call	_player_gasta_brick
2922  0DF3  C1          	pop	bc
2923  0DF4              l_player_check_floor_00116:
2924  0DF4  DD 7E FA    	ld	a,(ix-6)
2925  0DF7  D6 3E       	sub	a,0x3e
2926  0DF9  20 06       	jr	NZ,l_player_check_floor_00118
2927  0DFB  3E 3F       	ld	a,0x3f
2928  0DFD  02          	ld	(bc), a
2929  0DFE  CD 45 0E    	call	_player_gasta_brick
2930  0E01              l_player_check_floor_00118:
2931  0E01  DD 7E FD    	ld	a,(ix-3)
2932  0E04  D6 40       	sub	a,0x40
2933  0E06  20 14       	jr	NZ,l_player_check_floor_00120
2934  0E08  DD 6E FB    	ld	l,(ix-5)
2935  0E0B  DD 66 FC    	ld	h,(ix-4)
2936  0E0E  CD 00 00    	call	_game_match_back
2937  0E11  4D          	ld	c, l
2938  0E12  DD 6E FE    	ld	l,(ix-2)
2939  0E15  DD 66 FF    	ld	h,(ix-1)
2940  0E18  71          	ld	(hl), c
2941  0E19  CD 45 0E    	call	_player_gasta_brick
2942  0E1C              l_player_check_floor_00120:
2943  0E1C  DD 7E FD    	ld	a,(ix-3)
2944  0E1F  D6 3F       	sub	a,0x3f
2945  0E21  20 0B       	jr	NZ,l_player_check_floor_00122
2946  0E23  DD 6E FE    	ld	l,(ix-2)
2947  0E26  DD 66 FF    	ld	h,(ix-1)
2948  0E29  36 40       	ld	(hl),0x40
2949  0E2B  CD 45 0E    	call	_player_gasta_brick
2950  0E2E              l_player_check_floor_00122:
2951  0E2E  DD 7E FD    	ld	a,(ix-3)
2952  0E31  D6 3E       	sub	a,0x3e
2953  0E33  20 0B       	jr	NZ,l_player_check_floor_00133
2954  0E35  DD 6E FE    	ld	l,(ix-2)
2955  0E38  DD 66 FF    	ld	h,(ix-1)
2956  0E3B  36 3F       	ld	(hl),0x3f
2957  0E3D  CD 45 0E    	call	_player_gasta_brick
2958  0E40              l_player_check_floor_00133:
2959  0E40  DD F9       	ld	sp, ix
2960  0E42  DD E1       	pop	ix
2961  0E44  C9          	ret
2962  0E45              	SECTION code_compiler
2963  0E45              ;	---------------------------------
2964  0E45              ; Function player_gasta_brick
2965  0E45              ; ---------------------------------
2966  0E45              _player_gasta_brick:
2967  0E45  3A 00 00    	ld	a,(_s_lin0)
2968  0E48  32 00 00    	ld	(_s_lin1),a
2969  0E4B  3A 00 00    	ld	a,(_s_col0)
2970  0E4E  32 00 00    	ld	(_s_col1),a
2971  0E51  3A 07 00    	ld	a,(_lin + 0x0007)
2972  0E54  C6 10       	add	a,0x10
2973  0E56  32 00 00    	ld	(_s_lin0),a
2974  0E59  3A 07 00    	ld	a,(_col + 0x0007)
2975  0E5C  32 00 00    	ld	(_s_col0),a
2976  0E5F  CD 00 00    	call	_spr_back_repaint
2977  0E62  3A 00 00    	ld	a,(_s_lin1)
2978  0E65  32 00 00    	ld	(_s_lin0),a
2979  0E68  3A 00 00    	ld	a,(_s_col1)
2980  0E6B  32 00 00    	ld	(_s_col0),a
2981  0E6E  C9          	ret
2982  0E6F              	SECTION code_compiler
2983  0E6F              ;	---------------------------------
2984  0E6F              ; Function player_move_jump
2985  0E6F              ; ---------------------------------
2986  0E6F              _player_move_jump:
2987  0E6F  21 00 00    	ld	hl,_game_gravity
2988  0E72  4E          	ld	c, (hl)
2989  0E73  21 00 00    	ld	hl,_player_vel_y
2990  0E76  7E          	ld	a, (hl)
2991  0E77  81          	add	a, c
2992  0E78  77          	ld	(hl), a
2993  0E79  21 00 00    	ld	hl,_sprite_on_air
2994  0E7C  36 01       	ld	(hl),0x01
2995  0E7E  3A 00 00    	ld	a,(_player_vel_inc)
2996  0E81  B7          	or	a, a
2997  0E82  28 4A       	jr	Z,l_player_move_jump_00109
2998  0E84  3A 00 00    	ld	a,(_dirs)
2999  0E87  CB 07       	rlc	a
3000  0E89  E6 01       	and	a,0x01
3001  0E8B  4F          	ld	c, a
3002  0E8C  3A 00 00    	ld	a,(_game_2buttons)
3003  0E8F  B7          	or	a, a
3004  0E90  28 06       	jr	Z,l_player_move_jump_00102
3005  0E92  79          	ld	a, c
3006  0E93  EE 01       	xor	a,0x01
3007  0E95  4F          	ld	c, a
3008  0E96  18 15       	jr	l_player_move_jump_00103
3009  0E98              l_player_move_jump_00102:
3010  0E98  CB 41       	bit	0, c
3011  0E9A  28 07       	jr	Z,l_player_move_jump_00154
3012  0E9C  21 00 00    	ld	hl,_dirs
3013  0E9F  CB 46       	bit	0, (hl)
3014  0EA1  20 04       	jr	NZ,l_player_move_jump_00155
3015  0EA3              l_player_move_jump_00154:
3016  0EA3  0E 00       	ld	c,0x00
3017  0EA5  18 02       	jr	l_player_move_jump_00156
3018  0EA7              l_player_move_jump_00155:
3019  0EA7  0E 01       	ld	c,0x01
3020  0EA9              l_player_move_jump_00156:
3021  0EA9  79          	ld	a, c
3022  0EAA  EE 01       	xor	a,0x01
3023  0EAC  4F          	ld	c, a
3024  0EAD              l_player_move_jump_00103:
3025  0EAD  79          	ld	a, c
3026  0EAE  B7          	or	a, a
3027  0EAF  28 1D       	jr	Z,l_player_move_jump_00109
3028  0EB1  3A 00 00    	ld	a,(_player_vel_y1)
3029  0EB4  21 00 00    	ld	hl,_player_vel_y
3030  0EB7  96          	sub	a, (hl)
3031  0EB8  E2 BD 0E    	jp	PO, l_player_move_jump_00259
3032  0EBB  EE 80       	xor	a,0x80
3033  0EBD              l_player_move_jump_00259:
3034  0EBD  F2 CE 0E    	jp	P, l_player_move_jump_00109
3035  0EC0  21 00 00    	ld	hl,_player_vel_y
3036  0EC3  CB 7E       	bit	7,(hl)
3037  0EC5  28 07       	jr	Z,l_player_move_jump_00109
3038  0EC7  36 00       	ld	(hl),0x00
3039  0EC9  21 00 00    	ld	hl,_player_vel_inc
3040  0ECC  36 00       	ld	(hl),0x00
3041  0ECE              l_player_move_jump_00109:
3042  0ECE  3E 78       	ld	a,0x78
3043  0ED0  21 00 00    	ld	hl,_player_vel_y
3044  0ED3  96          	sub	a, (hl)
3045  0ED4  E2 D9 0E    	jp	PO, l_player_move_jump_00260
3046  0ED7  EE 80       	xor	a,0x80
3047  0ED9              l_player_move_jump_00260:
3048  0ED9  F2 E1 0E    	jp	P, l_player_move_jump_00111
3049  0EDC  21 00 00    	ld	hl,_player_vel_y
3050  0EDF  36 78       	ld	(hl),0x78
3051  0EE1              l_player_move_jump_00111:
3052  0EE1  21 00 00    	ld	hl,_player_vel_y
3053  0EE4  7E          	ld	a, (hl)
3054  0EE5  EE 80       	xor	a,0x80
3055  0EE7  D6 08       	sub	a,0x08
3056  0EE9  30 02       	jr	NC,l_player_move_jump_00113
3057  0EEB  36 88       	ld	(hl),0x88
3058  0EED              l_player_move_jump_00113:
3059  0EED  3A 00 00    	ld	a,(_player_vel_y)
3060  0EF0  4F          	ld	c,a
3061  0EF1  17          	rla
3062  0EF2  9F          	sbc	a, a
3063  0EF3  47          	ld	b, a
3064  0EF4  CB 41       	bit	0,c
3065  0EF6  21 00 00    	ld	hl,_s_lin1
3066  0EF9  71          	ld	(hl),c
3067  0EFA  28 04       	jr	Z,l_player_move_jump_00115
3068  0EFC  21 00 00    	ld	hl,_s_lin1
3069  0EFF  35          	dec	(hl)
3070  0F00              l_player_move_jump_00115:
3071  0F00  3A 07 00    	ld	a,(_lin + 0x0007)
3072  0F03  21 00 00    	ld	hl,_s_lin1
3073  0F06  86          	add	a, (hl)
3074  0F07  77          	ld	(hl), a
3075  0F08  CB 78       	bit	7, b
3076  0F0A  28 5C       	jr	Z,l_player_move_jump_00141
3077  0F0C  21 00 00    	ld	hl,_s_state
3078  0F0F  CD 00 00    	call	_spr_set_up
3079  0F12  3E 90       	ld	a,0x90
3080  0F14  21 00 00    	ld	hl,_s_lin1
3081  0F17  96          	sub	a, (hl)
3082  0F18  30 11       	jr	NC,l_player_move_jump_00120
3083  0F1A  CD 00 00    	call	_spr_page_up
3084  0F1D  7D          	ld	a, l
3085  0F1E  B7          	or	a, a
3086  0F1F  28 05       	jr	Z,l_player_move_jump_00117
3087  0F21  2E 00       	ld	l,0x00
3088  0F23  C3 1F 10    	jp	l_player_move_jump_00152
3089  0F26              l_player_move_jump_00117:
3090  0F26  21 00 00    	ld	hl,_s_lin1
3091  0F29  36 00       	ld	(hl),0x00
3092  0F2B              l_player_move_jump_00120:
3093  0F2B  21 07 00    	ld	hl,+(_col + 0x0007)
3094  0F2E  46          	ld	b, (hl)
3095  0F2F  C5          	push	bc
3096  0F30  33          	inc	sp
3097  0F31  3A 00 00    	ld	a,(_s_lin1)
3098  0F34  F5          	push	af
3099  0F35  33          	inc	sp
3100  0F36  CD 00 00    	call	_game_check_map
3101  0F39  F1          	pop	af
3102  0F3A  7C          	ld	a,h
3103  0F3B  B5          	or	a,l
3104  0F3C  28 21       	jr	Z,l_player_move_jump_00124
3105  0F3E  CD C5 09    	call	_player_hit_platform
3106  0F41  7D          	ld	a, l
3107  0F42  B7          	or	a, a
3108  0F43  28 12       	jr	Z,l_player_move_jump_00122
3109  0F45  3A 07 00    	ld	a,(_lin + 0x0007)
3110  0F48  07          	rlca
3111  0F49  07          	rlca
3112  0F4A  07          	rlca
3113  0F4B  07          	rlca
3114  0F4C  E6 0F       	and	a,0x0f
3115  0F4E  07          	rlca
3116  0F4F  07          	rlca
3117  0F50  07          	rlca
3118  0F51  07          	rlca
3119  0F52  E6 F0       	and	a,0xf0
3120  0F54  32 07 00    	ld	((_lin + 0x0007)),a
3121  0F57              l_player_move_jump_00122:
3122  0F57  21 00 00    	ld	hl,_player_vel_y
3123  0F5A  36 00       	ld	(hl),0x00
3124  0F5C  C3 E7 0F    	jp	l_player_move_jump_00142
3125  0F5F              l_player_move_jump_00124:
3126  0F5F  3A 00 00    	ld	a,(_s_lin1)
3127  0F62  32 07 00    	ld	((_lin + 0x0007)),a
3128  0F65  C3 E7 0F    	jp	l_player_move_jump_00142
3129  0F68              l_player_move_jump_00141:
3130  0F68  21 00 00    	ld	hl,_s_state
3131  0F6B  CD 00 00    	call	_spr_set_down
3132  0F6E  3E 90       	ld	a,0x90
3133  0F70  21 00 00    	ld	hl,_s_lin1
3134  0F73  96          	sub	a, (hl)
3135  0F74  30 11       	jr	NC,l_player_move_jump_00130
3136  0F76  CD 00 00    	call	_spr_page_down
3137  0F79  7D          	ld	a, l
3138  0F7A  B7          	or	a, a
3139  0F7B  28 05       	jr	Z,l_player_move_jump_00127
3140  0F7D  2E 00       	ld	l,0x00
3141  0F7F  C3 1F 10    	jp	l_player_move_jump_00152
3142  0F82              l_player_move_jump_00127:
3143  0F82  21 00 00    	ld	hl,_s_lin1
3144  0F85  36 90       	ld	(hl),0x90
3145  0F87              l_player_move_jump_00130:
3146  0F87  21 07 00    	ld	hl,+(_col + 0x0007)
3147  0F8A  56          	ld	d, (hl)
3148  0F8B  3A 00 00    	ld	a,(_s_lin1)
3149  0F8E  C6 10       	add	a,0x10
3150  0F90  5F          	ld	e, a
3151  0F91  D5          	push	de
3152  0F92  CD 00 00    	call	_game_check_map
3153  0F95  F1          	pop	af
3154  0F96  7C          	ld	a,h
3155  0F97  B5          	or	a,l
3156  0F98  28 47       	jr	Z,l_player_move_jump_00138
3157  0F9A  2E 00       	ld	l,0x00
3158  0F9C  CD 54 06    	call	_player_check_stairs
3159  0F9F  3A 00 00    	ld	a,(_player_onstair)
3160  0FA2  B7          	or	a, a
3161  0FA3  20 05       	jr	NZ,l_player_move_jump_00132
3162  0FA5  2E 01       	ld	l,0x01
3163  0FA7  CD 54 06    	call	_player_check_stairs
3164  0FAA              l_player_move_jump_00132:
3165  0FAA  3A 00 00    	ld	a,(_player_onstair)
3166  0FAD  B7          	or	a, a
3167  0FAE  20 12       	jr	NZ,l_player_move_jump_00134
3168  0FB0  3A 00 00    	ld	a,(_s_lin1)
3169  0FB3  07          	rlca
3170  0FB4  07          	rlca
3171  0FB5  07          	rlca
3172  0FB6  07          	rlca
3173  0FB7  E6 0F       	and	a,0x0f
3174  0FB9  07          	rlca
3175  0FBA  07          	rlca
3176  0FBB  07          	rlca
3177  0FBC  07          	rlca
3178  0FBD  E6 F0       	and	a,0xf0
3179  0FBF  32 07 00    	ld	((_lin + 0x0007)),a
3180  0FC2              l_player_move_jump_00134:
3181  0FC2  21 00 00    	ld	hl,_player_vel_y
3182  0FC5  36 00       	ld	(hl),0x00
3183  0FC7  21 00 00    	ld	hl,_s_state
3184  0FCA  7E          	ld	a,(hl)
3185  0FCB  E6 FC       	and	a,+(0xfd&0xfe)
3186  0FCD  77          	ld	(hl),a
3187  0FCE  3A 07 00    	ld	a,(_lin + 0x0007)
3188  0FD1  D6 90       	sub	a,0x90
3189  0FD3  38 03       	jr	C,l_player_move_jump_00136
3190  0FD5  CD 00 00    	call	_spr_page_down
3191  0FD8              l_player_move_jump_00136:
3192  0FD8  21 07 00    	ld	hl, +(_colint + 0x0007)
3193  0FDB  36 00       	ld	(hl),0x00
3194  0FDD  2E 01       	ld	l,0x01
3195  0FDF  18 3E       	jr	l_player_move_jump_00152
3196  0FE1              l_player_move_jump_00138:
3197  0FE1  3A 00 00    	ld	a,(_s_lin1)
3198  0FE4  32 07 00    	ld	((_lin + 0x0007)),a
3199  0FE7              l_player_move_jump_00142:
3200  0FE7  21 00 00    	ld	hl,_s_state
3201  0FEA  CB 5E       	bit	3, (hl)
3202  0FEC  20 21       	jr	NZ,l_player_move_jump_00148
3203  0FEE  21 00 00    	ld	hl,_s_state
3204  0FF1  CB 56       	bit	2, (hl)
3205  0FF3  20 1A       	jr	NZ,l_player_move_jump_00148
3206  0FF5  21 00 00    	ld	hl,_dirs
3207  0FF8  CB 56       	bit	2, (hl)
3208  0FFA  28 06       	jr	Z,l_player_move_jump_00144
3209  0FFC  21 00 00    	ld	hl,_s_state
3210  0FFF  CD 00 00    	call	_spr_set_left
3211  1002              l_player_move_jump_00144:
3212  1002  21 00 00    	ld	hl,_dirs
3213  1005  CB 5E       	bit	3, (hl)
3214  1007  28 06       	jr	Z,l_player_move_jump_00148
3215  1009  21 00 00    	ld	hl,_s_state
3216  100C  CD 00 00    	call	_spr_set_right
3217  100F              l_player_move_jump_00148:
3218  100F  CD 00 00    	call	_spr_move_horizontal
3219  1012  7D          	ld	a, l
3220  1013  B7          	or	a, a
3221  1014  28 07       	jr	Z,l_player_move_jump_00151
3222  1016  21 00 00    	ld	hl,_s_state
3223  1019  7E          	ld	a,(hl)
3224  101A  E6 F3       	and	a,+(0xf7&0xfb)
3225  101C  77          	ld	(hl),a
3226  101D              l_player_move_jump_00151:
3227  101D  2E 00       	ld	l,0x00
3228  101F              l_player_move_jump_00152:
3229  101F  C9          	ret
3230  1020              	SECTION code_compiler
3231  1020              ;	---------------------------------
3232  1020              ; Function player_open_door
3233  1020              ; ---------------------------------
3234  1020              _player_open_door:
3235  1020  CD 00 00    	call	___sdcc_enter_ix
3236  1023  21 00 00    	ld	hl,_ay_fx_04_pierto_abierta
3237  1026  E5          	push	hl
3238  1027  21 01 04    	ld	hl,0x0401
3239  102A  E5          	push	hl
3240  102B  CD 00 00    	call	_ay_song_play
3241  102E  0E 00       	ld	c,0x00
3242  1030  DD 7E 06    	ld	a,(ix+6)
3243  1033  D6 48       	sub	a,0x48
3244  1035  28 17       	jr	Z,l_player_open_door_00101
3245  1037  DD 7E 06    	ld	a,(ix+6)
3246  103A  D6 49       	sub	a,0x49
3247  103C  28 1F       	jr	Z,l_player_open_door_00104
3248  103E  DD 7E 06    	ld	a,(ix+6)
3249  1041  D6 4A       	sub	a,0x4a
3250  1043  28 27       	jr	Z,l_player_open_door_00107
3251  1045  DD 7E 06    	ld	a,(ix+6)
3252  1048  D6 4B       	sub	a,0x4b
3253  104A  28 2F       	jr	Z,l_player_open_door_00110
3254  104C  18 3A       	jr	l_player_open_door_00113
3255  104E              l_player_open_door_00101:
3256  104E  3A 00 00    	ld	a,(_player_keys)
3257  1051  B7          	or	a, a
3258  1052  28 34       	jr	Z,l_player_open_door_00113
3259  1054  2E 07       	ld	l,0x07
3260  1056  CD 00 00    	call	_zx_border_fastcall
3261  1059  0E 01       	ld	c,0x01
3262  105B  18 2B       	jr	l_player_open_door_00113
3263  105D              l_player_open_door_00104:
3264  105D  3A 01 00    	ld	a,(_player_keys + 0x0001)
3265  1060  B7          	or	a, a
3266  1061  28 25       	jr	Z,l_player_open_door_00113
3267  1063  2E 02       	ld	l,0x02
3268  1065  CD 00 00    	call	_zx_border_fastcall
3269  1068  0E 01       	ld	c,0x01
3270  106A  18 1C       	jr	l_player_open_door_00113
3271  106C              l_player_open_door_00107:
3272  106C  3A 02 00    	ld	a,(_player_keys + 0x0002)
3273  106F  B7          	or	a, a
3274  1070  28 16       	jr	Z,l_player_open_door_00113
3275  1072  2E 04       	ld	l,0x04
3276  1074  CD 00 00    	call	_zx_border_fastcall
3277  1077  0E 01       	ld	c,0x01
3278  1079  18 0D       	jr	l_player_open_door_00113
3279  107B              l_player_open_door_00110:
3280  107B  3A 03 00    	ld	a,(_player_keys + 0x0003)
3281  107E  B7          	or	a, a
3282  107F  28 07       	jr	Z,l_player_open_door_00113
3283  1081  2E 05       	ld	l,0x05
3284  1083  CD 00 00    	call	_zx_border_fastcall
3285  1086  0E 01       	ld	c,0x01
3286  1088              l_player_open_door_00113:
3287  1088  79          	ld	a, c
3288  1089  B7          	or	a, a
3289  108A  20 06       	jr	NZ,l_player_open_door_00114
3290  108C  3A 00 00    	ld	a,(_game_inmune)
3291  108F  B7          	or	a, a
3292  1090  28 1E       	jr	Z,l_player_open_door_00117
3293  1092              l_player_open_door_00114:
3294  1092  3E 00       	ld	a, +((_scr_map) & 0xFF)
3295  1094  DD 86 04    	add	a,(ix+4)
3296  1097  4F          	ld	c, a
3297  1098  3E 00       	ld	a, +((_scr_map) / 256)
3298  109A  DD 8E 05    	adc	a,(ix+5)
3299  109D  47          	ld	b, a
3300  109E  AF          	xor	a, a
3301  109F  02          	ld	(bc), a
3302  10A0  DD 6E 04    	ld	l,(ix+4)
3303  10A3  DD 66 05    	ld	h,(ix+5)
3304  10A6  CD 00 00    	call	_game_obj_set
3305  10A9  21 04 00    	ld	hl,0x0004
3306  10AC  39          	add	hl, sp
3307  10AD  CD 00 00    	call	_spr_draw_index
3308  10B0              l_player_open_door_00117:
3309  10B0  DD E1       	pop	ix
3310  10B2  C9          	ret
3311  10B3              	SECTION code_compiler
3312  10B3              ;	---------------------------------
3313  10B3              ; Function player_lost_life
3314  10B3              ; ---------------------------------
3315  10B3              _player_lost_life:
3316  10B3  CD 00 00    	call	___sdcc_enter_ix
3317  10B6  3B          	dec	sp
3318  10B7  21 00 00    	ld	hl,_ay_song_04_lotr_lose_a_life
3319  10BA  E5          	push	hl
3320  10BB  21 01 04    	ld	hl,0x0401
3321  10BE  E5          	push	hl
3322  10BF  CD 00 00    	call	_ay_song_play
3323  10C2  21 00 00    	ld	hl,_player_vita
3324  10C5  36 00       	ld	(hl),0x00
3325  10C7  CD 00 00    	call	_game_update_stats
3326  10CA  3A 07 00    	ld	a,(_lin + 7)
3327  10CD  32 00 00    	ld	(_s_lin0),a
3328  10D0  3A 07 00    	ld	a,(_col + 7)
3329  10D3  32 00 00    	ld	(_s_col0),a
3330  10D6  CD 00 00    	call	_spr_init_effects
3331  10D9  06 00       	ld	b,0x00
3332  10DB              l_player_lost_life_00118:
3333  10DB  C5          	push	bc
3334  10DC  21 00 00    	ld	hl,0x0000
3335  10DF  E5          	push	hl
3336  10E0  AF          	xor	a, a
3337  10E1  48          	ld	c,b
3338  10E2  47          	ld	b,a
3339  10E3  C5          	push	bc
3340  10E4  CD 00 00    	call	_NIRVANAP_spriteT_callee
3341  10E7  C1          	pop	bc
3342  10E8  04          	inc	b
3343  10E9  3E 07       	ld	a,0x07
3344  10EB  90          	sub	a, b
3345  10EC  30 ED       	jr	NC,l_player_lost_life_00118
3346  10EE  76          	halt
3347  10EF  3A 00 00    	ld	a,(_s_lin0)
3348  10F2  C6 F0       	add	a,0xf0
3349  10F4  47          	ld	b, a
3350  10F5  3A 00 00    	ld	a,(_s_col0)
3351  10F8  21 00 00    	ld	hl,0x0000
3352  10FB  E5          	push	hl
3353  10FC  21 87 03    	ld	hl,0x0387
3354  10FF  E5          	push	hl
3355  1100  48          	ld	c,b
3356  1101  47          	ld	b,a
3357  1102  C5          	push	bc
3358  1103  CD 00 00    	call	_spr_add_anim
3359  1106  F1          	pop	af
3360  1107  F1          	pop	af
3361  1108  F1          	pop	af
3362  1109  21 00 00    	ld	hl,_s_col0
3363  110C  46          	ld	b, (hl)
3364  110D  05          	dec	b
3365  110E  05          	dec	b
3366  110F  21 00 00    	ld	hl,0x0000
3367  1112  E5          	push	hl
3368  1113  21 87 03    	ld	hl,0x0387
3369  1116  E5          	push	hl
3370  1117  C5          	push	bc
3371  1118  33          	inc	sp
3372  1119  3A 00 00    	ld	a,(_s_lin0)
3373  111C  F5          	push	af
3374  111D  33          	inc	sp
3375  111E  CD 00 00    	call	_spr_add_anim
3376  1121  F1          	pop	af
3377  1122  F1          	pop	af
3378  1123  21 00 00    	ld	hl,0x0000
3379  1126  E3          	ex	(sp),hl
3380  1127  3A 00 00    	ld	a,(_s_col0)
3381  112A  21 87 03    	ld	hl,0x0387
3382  112D  E5          	push	hl
3383  112E  F5          	push	af
3384  112F  33          	inc	sp
3385  1130  3A 00 00    	ld	a,(_s_lin0)
3386  1133  F5          	push	af
3387  1134  33          	inc	sp
3388  1135  CD 00 00    	call	_spr_add_anim
3389  1138  F1          	pop	af
3390  1139  F1          	pop	af
3391  113A  F1          	pop	af
3392  113B  21 00 00    	ld	hl,_s_col0
3393  113E  46          	ld	b, (hl)
3394  113F  04          	inc	b
3395  1140  04          	inc	b
3396  1141  21 00 00    	ld	hl,0x0000
3397  1144  E5          	push	hl
3398  1145  21 87 03    	ld	hl,0x0387
3399  1148  E5          	push	hl
3400  1149  C5          	push	bc
3401  114A  33          	inc	sp
3402  114B  3A 00 00    	ld	a,(_s_lin0)
3403  114E  F5          	push	af
3404  114F  33          	inc	sp
3405  1150  CD 00 00    	call	_spr_add_anim
3406  1153  F1          	pop	af
3407  1154  F1          	pop	af
3408  1155  F1          	pop	af
3409  1156  3A 00 00    	ld	a,(_s_lin0)
3410  1159  C6 10       	add	a,0x10
3411  115B  47          	ld	b, a
3412  115C  3A 00 00    	ld	a,(_s_col0)
3413  115F  21 00 00    	ld	hl,0x0000
3414  1162  E5          	push	hl
3415  1163  21 87 03    	ld	hl,0x0387
3416  1166  E5          	push	hl
3417  1167  48          	ld	c,b
3418  1168  47          	ld	b,a
3419  1169  C5          	push	bc
3420  116A  CD 00 00    	call	_spr_add_anim
3421  116D  F1          	pop	af
3422  116E  F1          	pop	af
3423  116F  F1          	pop	af
3424  1170  2E 00       	ld	l,0x00
3425  1172  CD 00 00    	call	_zx_border_fastcall
3426  1175  DD 36 FF 01 	ld	(ix-1),0x01
3427  1179  2A 00 00    	ld	hl,(_curr_time)
3428  117C  22 00 00    	ld	(_anim_time),hl
3429  117F              l_player_lost_life_00107:
3430  117F  DD 7E FF    	ld	a,(ix-1)
3431  1182  B7          	or	a, a
3432  1183  28 28       	jr	Z,l_player_lost_life_00131
3433  1185  3E 0C       	ld	a,0x0c
3434  1187  F5          	push	af
3435  1188  33          	inc	sp
3436  1189  21 00 00    	ld	hl,_anim_time
3437  118C  E5          	push	hl
3438  118D  CD 00 00    	call	_game_check_time
3439  1190  F1          	pop	af
3440  1191  33          	inc	sp
3441  1192  7D          	ld	a, l
3442  1193  B7          	or	a, a
3443  1194  28 E9       	jr	Z,l_player_lost_life_00107
3444  1196  2A 00 00    	ld	hl,(_curr_time)
3445  1199  22 00 00    	ld	(_anim_time),hl
3446  119C  3A 00 00    	ld	a,(_anim_count)
3447  119F  B7          	or	a,a
3448  11A0  28 05       	jr	Z,l_player_lost_life_00103
3449  11A2  CD 00 00    	call	_spr_play_anim
3450  11A5  18 D8       	jr	l_player_lost_life_00107
3451  11A7              l_player_lost_life_00103:
3452  11A7  DD 36 FF 00 	ld	(ix-1),0x00
3453  11AB  18 D2       	jr	l_player_lost_life_00107
3454  11AD              l_player_lost_life_00131:
3455  11AD  0E 00       	ld	c,0x00
3456  11AF              l_player_lost_life_00120:
3457  11AF  06 00       	ld	b,0x00
3458  11B1  21 00 00    	ld	hl,_class
3459  11B4  09          	add	hl, bc
3460  11B5  7E          	ld	a, (hl)
3461  11B6  B7          	or	a, a
3462  11B7  28 27       	jr	Z,l_player_lost_life_00121
3463  11B9  06 00       	ld	b,0x00
3464  11BB  21 00 00    	ld	hl,_col
3465  11BE  09          	add	hl, bc
3466  11BF  5E          	ld	e, (hl)
3467  11C0  06 00       	ld	b,0x00
3468  11C2  21 00 00    	ld	hl,_lin
3469  11C5  09          	add	hl, bc
3470  11C6  56          	ld	d, (hl)
3471  11C7  06 00       	ld	b,0x00
3472  11C9  21 00 00    	ld	hl,_tile
3473  11CC  09          	add	hl, bc
3474  11CD  06 00       	ld	b,0x00
3475  11CF  21 00 00    	ld	hl,_colint
3476  11D2  09          	add	hl,bc
3477  11D3  7E          	ld	a,(hl)
3478  11D4  87          	add	a,a
3479  11D5  47          	ld	b, a
3480  11D6  C5          	push	bc
3481  11D7  7B          	ld	a, e
3482  11D8  5A          	ld	e,d
3483  11D9  57          	ld	d,a
3484  11DA  D5          	push	de
3485  11DB  C5          	push	bc
3486  11DC  CD 00 00    	call	_NIRVANAP_spriteT_callee
3487  11DF  C1          	pop	bc
3488  11E0              l_player_lost_life_00121:
3489  11E0  0C          	inc	c
3490  11E1  79          	ld	a, c
3491  11E2  D6 07       	sub	a,0x07
3492  11E4  38 C9       	jr	C,l_player_lost_life_00120
3493  11E6  3A 00 00    	ld	a,(_game_inf_lives)
3494  11E9  B7          	or	a, a
3495  11EA  20 04       	jr	NZ,l_player_lost_life_00114
3496  11EC  21 00 00    	ld	hl,_player_lives
3497  11EF  35          	dec	(hl)
3498  11F0              l_player_lost_life_00114:
3499  11F0  21 00 00    	ld	hl,_player_mana
3500  11F3  36 64       	ld	(hl),0x64
3501  11F5  21 00 00    	ld	hl,_player_vita
3502  11F8  36 64       	ld	(hl),0x64
3503  11FA  3A 00 00    	ld	a,(_player_lives)
3504  11FD  B7          	or	a, a
3505  11FE  28 1D       	jr	Z,l_player_lost_life_00116
3506  1200  21 F4 01    	ld	hl,0x01f4
3507  1203  CD 00 00    	call	_z80_delay_ms_fastcall
3508  1206  3A 00 00    	ld	a,(_game_checkpoint_col)
3509  1209  32 00 00    	ld	(_player_col_scr),a
3510  120C  3A 00 00    	ld	a,(_game_checkpoint_lin)
3511  120F  32 00 00    	ld	(_player_lin_scr),a
3512  1212  3A 00 00    	ld	a,(_game_checkpoint_scr)
3513  1215  32 00 00    	ld	(_scr_curr),a
3514  1218  CD 00 00    	call	_game_round_init
3515  121B  18 0A       	jr	l_player_lost_life_00122
3516  121D              l_player_lost_life_00116:
3517  121D  21 00 00    	ld	hl,_player_lives
3518  1220  36 00       	ld	(hl),0x00
3519  1222  21 00 00    	ld	hl,_game_over
3520  1225  36 01       	ld	(hl),0x01
3521  1227              l_player_lost_life_00122:
3522  1227  33          	inc	sp
3523  1228  DD E1       	pop	ix
3524  122A  C9          	ret
3525  122B              	SECTION code_compiler
3526  122B              ;	---------------------------------
3527  122B              ; Function player_hit
3528  122B              ; ---------------------------------
3529  122B              _player_hit:
3530  122B  7D          	ld	a,l
3531  122C  4D          	ld	c,l
3532  122D  21 00 00    	ld	hl,_player_vita
3533  1230  96          	sub	a, (hl)
3534  1231  30 22       	jr	NC,l_player_hit_00104
3535  1233  3A 00 00    	ld	a,(_game_inmune)
3536  1236  B7          	or	a, a
3537  1237  20 06       	jr	NZ,l_player_hit_00102
3538  1239  21 00 00    	ld	hl,_player_vita
3539  123C  7E          	ld	a, (hl)
3540  123D  91          	sub	a, c
3541  123E  77          	ld	(hl), a
3542  123F              l_player_hit_00102:
3543  123F  2A 00 00    	ld	hl,(_curr_time)
3544  1242  22 00 00    	ld	(_player_hit_time),hl
3545  1245  21 00 00    	ld	hl,_ay_fx_04_golpe
3546  1248  E5          	push	hl
3547  1249  21 01 04    	ld	hl,0x0401
3548  124C  E5          	push	hl
3549  124D  CD 00 00    	call	_ay_song_play
3550  1250  CD 00 00    	call	_game_update_stats
3551  1253  18 03       	jr	l_player_hit_00106
3552  1255              l_player_hit_00104:
3553  1255  CD B3 10    	call	_player_lost_life
3554  1258              l_player_hit_00106:
3555  1258  C9          	ret
3556  1259              	SECTION IGNORE
3557  0000              
