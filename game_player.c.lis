1     0000              MODULE game_player_c
2     0000              
3     0000              ;--------------------------------------------------------
4     0000              ; File Created by SDCC : free open source ANSI-C Compiler
5     0000              ; Version 3.6.5 #9958 (Mac OS X i386)
6     0000              ;--------------------------------------------------------
7     0000              ; Processed by Z88DK
8     0000              ;--------------------------------------------------------
9     0000              
10    0000              	EXTERN __divschar
11    0000              	EXTERN __divschar_callee
12    0000              	EXTERN __divsint
13    0000              	EXTERN __divsint_callee
14    0000              	EXTERN __divslong
15    0000              	EXTERN __divslong_callee
16    0000              	EXTERN __divslonglong
17    0000              	EXTERN __divslonglong_callee
18    0000              	EXTERN __divsuchar
19    0000              	EXTERN __divsuchar_callee
20    0000              	EXTERN __divuchar
21    0000              	EXTERN __divuchar_callee
22    0000              	EXTERN __divuint
23    0000              	EXTERN __divuint_callee
24    0000              	EXTERN __divulong
25    0000              	EXTERN __divulong_callee
26    0000              	EXTERN __divulonglong
27    0000              	EXTERN __divulonglong_callee
28    0000              	EXTERN __divuschar
29    0000              	EXTERN __divuschar_callee
30    0000              	EXTERN __modschar
31    0000              	EXTERN __modschar_callee
32    0000              	EXTERN __modsint
33    0000              	EXTERN __modsint_callee
34    0000              	EXTERN __modslong
35    0000              	EXTERN __modslong_callee
36    0000              	EXTERN __modslonglong
37    0000              	EXTERN __modslonglong_callee
38    0000              	EXTERN __modsuchar
39    0000              	EXTERN __modsuchar_callee
40    0000              	EXTERN __moduchar
41    0000              	EXTERN __moduchar_callee
42    0000              	EXTERN __moduint
43    0000              	EXTERN __moduint_callee
44    0000              	EXTERN __modulong
45    0000              	EXTERN __modulong_callee
46    0000              	EXTERN __modulonglong
47    0000              	EXTERN __modulonglong_callee
48    0000              	EXTERN __moduschar
49    0000              	EXTERN __moduschar_callee
50    0000              	EXTERN __mulint
51    0000              	EXTERN __mulint_callee
52    0000              	EXTERN __mullong
53    0000              	EXTERN __mullong_callee
54    0000              	EXTERN __mullonglong
55    0000              	EXTERN __mullonglong_callee
56    0000              	EXTERN __mulschar
57    0000              	EXTERN __mulschar_callee
58    0000              	EXTERN __mulsuchar
59    0000              	EXTERN __mulsuchar_callee
60    0000              	EXTERN __muluschar
61    0000              	EXTERN __muluschar_callee
62    0000              	EXTERN __rlslonglong
63    0000              	EXTERN __rlslonglong_callee
64    0000              	EXTERN __rlulonglong
65    0000              	EXTERN __rlulonglong_callee
66    0000              	EXTERN __rrslonglong
67    0000              	EXTERN __rrslonglong_callee
68    0000              	EXTERN __rrulonglong
69    0000              	EXTERN __rrulonglong_callee
70    0000              	EXTERN ___sdcc_call_hl
71    0000              	EXTERN ___sdcc_call_iy
72    0000              	EXTERN ___sdcc_enter_ix
73    0000              	EXTERN _banked_call
74    0000              	EXTERN _banked_ret
75    0000              	EXTERN ___fs2schar
76    0000              	EXTERN ___fs2schar_callee
77    0000              	EXTERN ___fs2sint
78    0000              	EXTERN ___fs2sint_callee
79    0000              	EXTERN ___fs2slong
80    0000              	EXTERN ___fs2slong_callee
81    0000              	EXTERN ___fs2slonglong
82    0000              	EXTERN ___fs2slonglong_callee
83    0000              	EXTERN ___fs2uchar
84    0000              	EXTERN ___fs2uchar_callee
85    0000              	EXTERN ___fs2uint
86    0000              	EXTERN ___fs2uint_callee
87    0000              	EXTERN ___fs2ulong
88    0000              	EXTERN ___fs2ulong_callee
89    0000              	EXTERN ___fs2ulonglong
90    0000              	EXTERN ___fs2ulonglong_callee
91    0000              	EXTERN ___fsadd
92    0000              	EXTERN ___fsadd_callee
93    0000              	EXTERN ___fsdiv
94    0000              	EXTERN ___fsdiv_callee
95    0000              	EXTERN ___fseq
96    0000              	EXTERN ___fseq_callee
97    0000              	EXTERN ___fsgt
98    0000              	EXTERN ___fsgt_callee
99    0000              	EXTERN ___fslt
100   0000              	EXTERN ___fslt_callee
101   0000              	EXTERN ___fsmul
102   0000              	EXTERN ___fsmul_callee
103   0000              	EXTERN ___fsneq
104   0000              	EXTERN ___fsneq_callee
105   0000              	EXTERN ___fssub
106   0000              	EXTERN ___fssub_callee
107   0000              	EXTERN ___schar2fs
108   0000              	EXTERN ___schar2fs_callee
109   0000              	EXTERN ___sint2fs
110   0000              	EXTERN ___sint2fs_callee
111   0000              	EXTERN ___slong2fs
112   0000              	EXTERN ___slong2fs_callee
113   0000              	EXTERN ___slonglong2fs
114   0000              	EXTERN ___slonglong2fs_callee
115   0000              	EXTERN ___uchar2fs
116   0000              	EXTERN ___uchar2fs_callee
117   0000              	EXTERN ___uint2fs
118   0000              	EXTERN ___uint2fs_callee
119   0000              	EXTERN ___ulong2fs
120   0000              	EXTERN ___ulong2fs_callee
121   0000              	EXTERN ___ulonglong2fs
122   0000              	EXTERN ___ulonglong2fs_callee
123   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
126   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
127   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
128   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
129   0000              	EXTERN ____sdcc_4_ldi_save_bc
130   0000              	EXTERN ____sdcc_4_push_hlix
131   0000              	EXTERN ____sdcc_4_push_mhl
132   0000              	EXTERN ____sdcc_lib_setmem_hl
133   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
134   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
135   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
136   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
137   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
138   0000              	EXTERN ____sdcc_ll_add_deix_hlix
139   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
140   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
141   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
142   0000              	EXTERN ____sdcc_ll_asr_hlix_a
143   0000              	EXTERN ____sdcc_ll_asr_mbc_a
144   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
145   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
146   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
147   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
148   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
149   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
150   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
151   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
152   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
153   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
155   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
156   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
157   0000              	EXTERN ____sdcc_ll_push_hlix
158   0000              	EXTERN ____sdcc_ll_push_mhl
159   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
160   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
161   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
162   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
163   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
164   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
165   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
166   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
167   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
168   0000              	EXTERN ____sdcc_load_debc_deix
169   0000              	EXTERN ____sdcc_load_dehl_deix
170   0000              	EXTERN ____sdcc_load_debc_mhl
171   0000              	EXTERN ____sdcc_load_hlde_mhl
172   0000              	EXTERN ____sdcc_store_dehl_bcix
173   0000              	EXTERN ____sdcc_store_debc_hlix
174   0000              	EXTERN ____sdcc_store_debc_mhl
175   0000              	EXTERN ____sdcc_cpu_pop_ei
176   0000              	EXTERN ____sdcc_cpu_pop_ei_jp
177   0000              	EXTERN ____sdcc_cpu_push_di
178   0000              	EXTERN ____sdcc_outi
179   0000              	EXTERN ____sdcc_outi_128
180   0000              	EXTERN ____sdcc_outi_256
181   0000              	EXTERN ____sdcc_ldi
182   0000              	EXTERN ____sdcc_ldi_128
183   0000              	EXTERN ____sdcc_ldi_256
184   0000              
185   0000              ;--------------------------------------------------------
186   0000              ; Public variables in this module
187   0000              ;--------------------------------------------------------
188   0000              	GLOBAL _player_check_map
189   0000              	GLOBAL _player_1up
190   0000              	GLOBAL _player_init
191   0000              	GLOBAL _player_turn
192   0000              	GLOBAL _player_move
193   0000              	GLOBAL _player_check_input
194   0000              	GLOBAL _player_move_input
195   0000              	GLOBAL _player_fix_walk_lin
196   0000              	GLOBAL _player_fire
197   0000              	GLOBAL _player_collision
198   0000              	GLOBAL _player_pick_mushroom
199   0000              	GLOBAL _player_check_stairs_vertical
200   0000              	GLOBAL _player_check_stairs
201   0000              	GLOBAL _player_anim_tile
202   0000              	GLOBAL _player_tile
203   0000              	GLOBAL _player_pick_item
204   0000              	GLOBAL _player_hit_platform
205   0000              	GLOBAL _player_hit_platform_clear
206   0000              	GLOBAL _player_score_add
207   0000              	GLOBAL _player_check_floor
208   0000              	GLOBAL _player_gasta_brick
209   0000              	GLOBAL _player_move_jump
210   0000              	GLOBAL _player_open_door
211   0000              	GLOBAL _player_lost_life
212   0000              	GLOBAL _player_hit
213   0000              ;--------------------------------------------------------
214   0000              ; Externals used
215   0000              ;--------------------------------------------------------
216   0000              	GLOBAL _ulltoa_callee
217   0000              	GLOBAL _ulltoa
218   0000              	GLOBAL _strtoull_callee
219   0000              	GLOBAL _strtoull
220   0000              	GLOBAL _strtoll_callee
221   0000              	GLOBAL _strtoll
222   0000              	GLOBAL _lltoa_callee
223   0000              	GLOBAL _lltoa
224   0000              	GLOBAL _llabs_callee
225   0000              	GLOBAL _llabs
226   0000              	GLOBAL __lldivu__callee
227   0000              	GLOBAL __lldivu_
228   0000              	GLOBAL __lldiv__callee
229   0000              	GLOBAL __lldiv_
230   0000              	GLOBAL _atoll_callee
231   0000              	GLOBAL _atoll
232   0000              	GLOBAL _realloc_unlocked_callee
233   0000              	GLOBAL _realloc_unlocked
234   0000              	GLOBAL _malloc_unlocked_fastcall
235   0000              	GLOBAL _malloc_unlocked
236   0000              	GLOBAL _free_unlocked_fastcall
237   0000              	GLOBAL _free_unlocked
238   0000              	GLOBAL _calloc_unlocked_callee
239   0000              	GLOBAL _calloc_unlocked
240   0000              	GLOBAL _aligned_alloc_unlocked_callee
241   0000              	GLOBAL _aligned_alloc_unlocked
242   0000              	GLOBAL _realloc_callee
243   0000              	GLOBAL _realloc
244   0000              	GLOBAL _malloc_fastcall
245   0000              	GLOBAL _malloc
246   0000              	GLOBAL _free_fastcall
247   0000              	GLOBAL _free
248   0000              	GLOBAL _calloc_callee
249   0000              	GLOBAL _calloc
250   0000              	GLOBAL _aligned_alloc_callee
251   0000              	GLOBAL _aligned_alloc
252   0000              	GLOBAL _utoa_callee
253   0000              	GLOBAL _utoa
254   0000              	GLOBAL _ultoa_callee
255   0000              	GLOBAL _ultoa
256   0000              	GLOBAL _system_fastcall
257   0000              	GLOBAL _system
258   0000              	GLOBAL _strtoul_callee
259   0000              	GLOBAL _strtoul
260   0000              	GLOBAL _strtol_callee
261   0000              	GLOBAL _strtol
262   0000              	GLOBAL _strtof_callee
263   0000              	GLOBAL _strtof
264   0000              	GLOBAL _strtod_callee
265   0000              	GLOBAL _strtod
266   0000              	GLOBAL _srand_fastcall
267   0000              	GLOBAL _srand
268   0000              	GLOBAL _rand
269   0000              	GLOBAL _quick_exit_fastcall
270   0000              	GLOBAL _quick_exit
271   0000              	GLOBAL _qsort_callee
272   0000              	GLOBAL _qsort
273   0000              	GLOBAL _ltoa_callee
274   0000              	GLOBAL _ltoa
275   0000              	GLOBAL _labs_fastcall
276   0000              	GLOBAL _labs
277   0000              	GLOBAL _itoa_callee
278   0000              	GLOBAL _itoa
279   0000              	GLOBAL _ftoh_callee
280   0000              	GLOBAL _ftoh
281   0000              	GLOBAL _ftog_callee
282   0000              	GLOBAL _ftog
283   0000              	GLOBAL _ftoe_callee
284   0000              	GLOBAL _ftoe
285   0000              	GLOBAL _ftoa_callee
286   0000              	GLOBAL _ftoa
287   0000              	GLOBAL _exit_fastcall
288   0000              	GLOBAL _exit
289   0000              	GLOBAL _dtoh_callee
290   0000              	GLOBAL _dtoh
291   0000              	GLOBAL _dtog_callee
292   0000              	GLOBAL _dtog
293   0000              	GLOBAL _dtoe_callee
294   0000              	GLOBAL _dtoe
295   0000              	GLOBAL _dtoa_callee
296   0000              	GLOBAL _dtoa
297   0000              	GLOBAL _bsearch_callee
298   0000              	GLOBAL _bsearch
299   0000              	GLOBAL _atol_fastcall
300   0000              	GLOBAL _atol
301   0000              	GLOBAL _atoi_fastcall
302   0000              	GLOBAL _atoi
303   0000              	GLOBAL _atof_fastcall
304   0000              	GLOBAL _atof
305   0000              	GLOBAL _atexit_fastcall
306   0000              	GLOBAL _atexit
307   0000              	GLOBAL _at_quick_exit_fastcall
308   0000              	GLOBAL _at_quick_exit
309   0000              	GLOBAL _abs_fastcall
310   0000              	GLOBAL _abs
311   0000              	GLOBAL _abort
312   0000              	GLOBAL __strtou__callee
313   0000              	GLOBAL __strtou_
314   0000              	GLOBAL __strtoi__callee
315   0000              	GLOBAL __strtoi_
316   0000              	GLOBAL __random_uniform_xor_8__fastcall
317   0000              	GLOBAL __random_uniform_xor_8_
318   0000              	GLOBAL __random_uniform_xor_32__fastcall
319   0000              	GLOBAL __random_uniform_xor_32_
320   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
321   0000              	GLOBAL __random_uniform_cmwc_8_
322   0000              	GLOBAL __shellsort__callee
323   0000              	GLOBAL __shellsort_
324   0000              	GLOBAL __quicksort__callee
325   0000              	GLOBAL __quicksort_
326   0000              	GLOBAL __insertion_sort__callee
327   0000              	GLOBAL __insertion_sort_
328   0000              	GLOBAL __ldivu__callee
329   0000              	GLOBAL __ldivu_
330   0000              	GLOBAL __ldiv__callee
331   0000              	GLOBAL __ldiv_
332   0000              	GLOBAL __divu__callee
333   0000              	GLOBAL __divu_
334   0000              	GLOBAL __div__callee
335   0000              	GLOBAL __div_
336   0000              	GLOBAL _NIRVANAP_drawTW_raw_callee
337   0000              	GLOBAL _NIRVANAP_drawTW_raw
338   0000              	GLOBAL _NIRVANAP_drawTW_callee
339   0000              	GLOBAL _NIRVANAP_drawTW
340   0000              	GLOBAL _NIRVANAP_drawW_raw_callee
341   0000              	GLOBAL _NIRVANAP_drawW_raw
342   0000              	GLOBAL _NIRVANAP_drawW_callee
343   0000              	GLOBAL _NIRVANAP_drawW
344   0000              	GLOBAL _NIRVANAP_spriteT_callee
345   0000              	GLOBAL _NIRVANAP_spriteT
346   0000              	GLOBAL _NIRVANAP_fillC_callee
347   0000              	GLOBAL _NIRVANAP_fillC
348   0000              	GLOBAL _NIRVANAP_readC_callee
349   0000              	GLOBAL _NIRVANAP_readC
350   0000              	GLOBAL _NIRVANAP_paintC_callee
351   0000              	GLOBAL _NIRVANAP_paintC
352   0000              	GLOBAL _NIRVANAP_printC_callee
353   0000              	GLOBAL _NIRVANAP_printC
354   0000              	GLOBAL _NIRVANAP_fillT_raw_callee
355   0000              	GLOBAL _NIRVANAP_fillT_raw
356   0000              	GLOBAL _NIRVANAP_fillT_callee
357   0000              	GLOBAL _NIRVANAP_fillT
358   0000              	GLOBAL _NIRVANAP_drawT_raw_callee
359   0000              	GLOBAL _NIRVANAP_drawT_raw
360   0000              	GLOBAL _NIRVANAP_drawT_callee
361   0000              	GLOBAL _NIRVANAP_drawT
362   0000              	GLOBAL _NIRVANAP_stop
363   0000              	GLOBAL _NIRVANAP_start
364   0000              	GLOBAL _debug3
365   0000              	GLOBAL _debug2
366   0000              	GLOBAL _debug
367   0000              	GLOBAL _zx_print_str
368   0000              	GLOBAL _zx_print_int
369   0000              	GLOBAL _zx_print_chr
370   0000              	GLOBAL _zx_print_bonus_time
371   0000              	GLOBAL _zx_isr
372   0000              	GLOBAL _z80_otdr_callee
373   0000              	GLOBAL _z80_otdr
374   0000              	GLOBAL _z80_otir_callee
375   0000              	GLOBAL _z80_otir
376   0000              	GLOBAL _z80_outp_callee
377   0000              	GLOBAL _z80_outp
378   0000              	GLOBAL _z80_indr_callee
379   0000              	GLOBAL _z80_indr
380   0000              	GLOBAL _z80_inir_callee
381   0000              	GLOBAL _z80_inir
382   0000              	GLOBAL _z80_inp_fastcall
383   0000              	GLOBAL _z80_inp
384   0000              	GLOBAL _z80_set_int_state_fastcall
385   0000              	GLOBAL _z80_set_int_state
386   0000              	GLOBAL _z80_get_int_state
387   0000              	GLOBAL _z80_delay_tstate_fastcall
388   0000              	GLOBAL _z80_delay_tstate
389   0000              	GLOBAL _z80_delay_ms_fastcall
390   0000              	GLOBAL _z80_delay_ms
391   0000              	GLOBAL _im2_remove_generic_callback_callee
392   0000              	GLOBAL _im2_remove_generic_callback
393   0000              	GLOBAL _im2_prepend_generic_callback_callee
394   0000              	GLOBAL _im2_prepend_generic_callback
395   0000              	GLOBAL _im2_append_generic_callback_callee
396   0000              	GLOBAL _im2_append_generic_callback
397   0000              	GLOBAL _im2_create_generic_isr_8080_callee
398   0000              	GLOBAL _im2_create_generic_isr_8080
399   0000              	GLOBAL _im2_create_generic_isr_callee
400   0000              	GLOBAL _im2_create_generic_isr
401   0000              	GLOBAL _im2_install_isr_callee
402   0000              	GLOBAL _im2_install_isr
403   0000              	GLOBAL _im2_init_fastcall
404   0000              	GLOBAL _im2_init
405   0000              	GLOBAL _intrinsic_swap_word_32_fastcall
406   0000              	GLOBAL _intrinsic_swap_word_32
407   0000              	GLOBAL _intrinsic_swap_endian_32_fastcall
408   0000              	GLOBAL _intrinsic_swap_endian_32
409   0000              	GLOBAL _intrinsic_swap_endian_16_fastcall
410   0000              	GLOBAL _intrinsic_swap_endian_16
411   0000              	GLOBAL _intrinsic_return_de
412   0000              	GLOBAL _intrinsic_return_bc
413   0000              	GLOBAL _intrinsic_exx
414   0000              	GLOBAL _intrinsic_ex_de_hl
415   0000              	GLOBAL _intrinsic_nop
416   0000              	GLOBAL _intrinsic_im_2
417   0000              	GLOBAL _intrinsic_im_1
418   0000              	GLOBAL _intrinsic_im_0
419   0000              	GLOBAL _intrinsic_retn
420   0000              	GLOBAL _intrinsic_reti
421   0000              	GLOBAL _intrinsic_halt
422   0000              	GLOBAL _intrinsic_ei
423   0000              	GLOBAL _intrinsic_di
424   0000              	GLOBAL _intrinsic_stub
425   0000              	GLOBAL _intrinsic_outi
426   0000              	GLOBAL _intrinsic_ldi
427   0000              	GLOBAL _zx_pattern_fill_callee
428   0000              	GLOBAL _zx_pattern_fill
429   0000              	GLOBAL _zx_saddrpup_fastcall
430   0000              	GLOBAL _zx_saddrpup
431   0000              	GLOBAL _zx_saddrpright_callee
432   0000              	GLOBAL _zx_saddrpright
433   0000              	GLOBAL _zx_saddrpleft_callee
434   0000              	GLOBAL _zx_saddrpleft
435   0000              	GLOBAL _zx_saddrpdown_fastcall
436   0000              	GLOBAL _zx_saddrpdown
437   0000              	GLOBAL _zx_saddrcup_fastcall
438   0000              	GLOBAL _zx_saddrcup
439   0000              	GLOBAL _zx_saddrcright_fastcall
440   0000              	GLOBAL _zx_saddrcright
441   0000              	GLOBAL _zx_saddrcleft_fastcall
442   0000              	GLOBAL _zx_saddrcleft
443   0000              	GLOBAL _zx_saddrcdown_fastcall
444   0000              	GLOBAL _zx_saddrcdown
445   0000              	GLOBAL _zx_saddr2py_fastcall
446   0000              	GLOBAL _zx_saddr2py
447   0000              	GLOBAL _zx_saddr2px_fastcall
448   0000              	GLOBAL _zx_saddr2px
449   0000              	GLOBAL _zx_saddr2cy_fastcall
450   0000              	GLOBAL _zx_saddr2cy
451   0000              	GLOBAL _zx_saddr2cx_fastcall
452   0000              	GLOBAL _zx_saddr2cx
453   0000              	GLOBAL _zx_saddr2aaddr_fastcall
454   0000              	GLOBAL _zx_saddr2aaddr
455   0000              	GLOBAL _zx_py2saddr_fastcall
456   0000              	GLOBAL _zx_py2saddr
457   0000              	GLOBAL _zx_py2aaddr_fastcall
458   0000              	GLOBAL _zx_py2aaddr
459   0000              	GLOBAL _zx_pxy2saddr_callee
460   0000              	GLOBAL _zx_pxy2saddr
461   0000              	GLOBAL _zx_pxy2aaddr_callee
462   0000              	GLOBAL _zx_pxy2aaddr
463   0000              	GLOBAL _zx_px2bitmask_fastcall
464   0000              	GLOBAL _zx_px2bitmask
465   0000              	GLOBAL _zx_cy2saddr_fastcall
466   0000              	GLOBAL _zx_cy2saddr
467   0000              	GLOBAL _zx_cy2aaddr_fastcall
468   0000              	GLOBAL _zx_cy2aaddr
469   0000              	GLOBAL _zx_cxy2saddr_callee
470   0000              	GLOBAL _zx_cxy2saddr
471   0000              	GLOBAL _zx_cxy2aaddr_callee
472   0000              	GLOBAL _zx_cxy2aaddr
473   0000              	GLOBAL _zx_bitmask2px_fastcall
474   0000              	GLOBAL _zx_bitmask2px
475   0000              	GLOBAL _zx_aaddrcup_fastcall
476   0000              	GLOBAL _zx_aaddrcup
477   0000              	GLOBAL _zx_aaddrcright_fastcall
478   0000              	GLOBAL _zx_aaddrcright
479   0000              	GLOBAL _zx_aaddrcleft_fastcall
480   0000              	GLOBAL _zx_aaddrcleft
481   0000              	GLOBAL _zx_aaddrcdown_fastcall
482   0000              	GLOBAL _zx_aaddrcdown
483   0000              	GLOBAL _zx_aaddr2saddr_fastcall
484   0000              	GLOBAL _zx_aaddr2saddr
485   0000              	GLOBAL _zx_aaddr2py_fastcall
486   0000              	GLOBAL _zx_aaddr2py
487   0000              	GLOBAL _zx_aaddr2px_fastcall
488   0000              	GLOBAL _zx_aaddr2px
489   0000              	GLOBAL _zx_aaddr2cy_fastcall
490   0000              	GLOBAL _zx_aaddr2cy
491   0000              	GLOBAL _zx_aaddr2cx_fastcall
492   0000              	GLOBAL _zx_aaddr2cx
493   0000              	GLOBAL _zx_visit_wc_pix_callee
494   0000              	GLOBAL _zx_visit_wc_pix
495   0000              	GLOBAL _zx_visit_wc_attr_callee
496   0000              	GLOBAL _zx_visit_wc_attr
497   0000              	GLOBAL _zx_scroll_wc_up_pix_callee
498   0000              	GLOBAL _zx_scroll_wc_up_pix
499   0000              	GLOBAL _zx_scroll_wc_up_attr_callee
500   0000              	GLOBAL _zx_scroll_wc_up_attr
501   0000              	GLOBAL _zx_scroll_wc_up_callee
502   0000              	GLOBAL _zx_scroll_wc_up
503   0000              	GLOBAL _zx_scroll_up_pix_callee
504   0000              	GLOBAL _zx_scroll_up_pix
505   0000              	GLOBAL _zx_scroll_up_attr_callee
506   0000              	GLOBAL _zx_scroll_up_attr
507   0000              	GLOBAL _zx_scroll_up_callee
508   0000              	GLOBAL _zx_scroll_up
509   0000              	GLOBAL _zx_cls_wc_pix_callee
510   0000              	GLOBAL _zx_cls_wc_pix
511   0000              	GLOBAL _zx_cls_wc_attr_callee
512   0000              	GLOBAL _zx_cls_wc_attr
513   0000              	GLOBAL _zx_cls_wc_callee
514   0000              	GLOBAL _zx_cls_wc
515   0000              	GLOBAL _zx_cls_pix_fastcall
516   0000              	GLOBAL _zx_cls_pix
517   0000              	GLOBAL _zx_cls_attr_fastcall
518   0000              	GLOBAL _zx_cls_attr
519   0000              	GLOBAL _zx_cls_fastcall
520   0000              	GLOBAL _zx_cls
521   0000              	GLOBAL _zx_border_fastcall
522   0000              	GLOBAL _zx_border
523   0000              	GLOBAL _spr_colision_b2
524   0000              	GLOBAL _spr_colision_b
525   0000              	GLOBAL _spr_unflatten
526   0000              	GLOBAL _spr_flatten
527   0000              	GLOBAL _spr_btile_paint_back
528   0000              	GLOBAL _spr_bullet_explode
529   0000              	GLOBAL _spr_init_effects
530   0000              	GLOBAL _spr_turn_horizontal
531   0000              	GLOBAL _spr_bullets_play
532   0000              	GLOBAL _spr_play_anim
533   0000              	GLOBAL _spr_add_anim
534   0000              	GLOBAL _spr_clear_scr
535   0000              	GLOBAL _spr_page_map
536   0000              	GLOBAL _spr_page_down
537   0000              	GLOBAL _spr_page_up
538   0000              	GLOBAL _spr_page_right
539   0000              	GLOBAL _spr_page_left
540   0000              	GLOBAL _spr_tile_paint
541   0000              	GLOBAL _spr_draw_index
542   0000              	GLOBAL _spr_brick_anim
543   0000              	GLOBAL _spr_back_repaint
544   0000              	GLOBAL _spr_tile
545   0000              	GLOBAL _spr_destroy
546   0000              	GLOBAL _spr_tile_dir
547   0000              	GLOBAL _spr_redraw
548   0000              	GLOBAL _spr_move_left
549   0000              	GLOBAL _spr_move_right
550   0000              	GLOBAL _spr_move_horizontal
551   0000              	GLOBAL _spr_move_down
552   0000              	GLOBAL _spr_move_up
553   0000              	GLOBAL _spr_set_right
554   0000              	GLOBAL _spr_set_left
555   0000              	GLOBAL _spr_set_down
556   0000              	GLOBAL _spr_set_up
557   0000              	GLOBAL _spr_calc_index
558   0000              	GLOBAL _spr_chktime
559   0000              	GLOBAL _menu_define_key
560   0000              	GLOBAL _menu_redefine
561   0000              	GLOBAL _menu_main_print
562   0000              	GLOBAL _menu_main
563   0000              	GLOBAL _game_match_back
564   0000              	GLOBAL _game_attribs
565   0000              	GLOBAL _game_boss_clear
566   0000              	GLOBAL _game_boss_kill
567   0000              	GLOBAL _game_obj_clear
568   0000              	GLOBAL _game_obj_chk
569   0000              	GLOBAL _game_obj_set
570   0000              	GLOBAL _game_shoot_fire_boss
571   0000              	GLOBAL _game_shoot_fire
572   0000              	GLOBAL _game_add_enemy
573   0000              	GLOBAL _game_print_header
574   0000              	GLOBAL _game_check_time
575   0000              	GLOBAL _game_rotate_attrib_osd
576   0000              	GLOBAL _game_rotate_attrib
577   0000              	GLOBAL _game_colour_message
578   0000              	GLOBAL _game_paint_attrib_lin_osd
579   0000              	GLOBAL _game_paint_attrib_lin_h
580   0000              	GLOBAL _game_paint_attrib_lin
581   0000              	GLOBAL _game_print_score
582   0000              	GLOBAL _game_check_cell
583   0000              	GLOBAL _game_check_map
584   0000              	GLOBAL _game_loop
585   0000              	GLOBAL _game_round_init
586   0000              	GLOBAL _game_start_timer
587   0000              	GLOBAL _game_update_stats
588   0000              	GLOBAL _game_print_footer
589   0000              	GLOBAL _game_fill_row
590   0000              	GLOBAL _game_fps
591   0000              	GLOBAL _game_respawn
592   0000              	GLOBAL _game_draw_screen
593   0000              	GLOBAL _boss_draw
594   0000              	GLOBAL _boss_turn
595   0000              	GLOBAL _enemy_avoid_dead
596   0000              	GLOBAL _enemy_avoid_fall
597   0000              	GLOBAL _enemy_kill
598   0000              	GLOBAL _enemy_respawn
599   0000              	GLOBAL _enemy_init
600   0000              	GLOBAL _enemy_move
601   0000              	GLOBAL _enemy_turn
602   0000              	GLOBAL _enemy_static
603   0000              	GLOBAL _enemy_walk
604   0000              	GLOBAL _enemy_horizontal
605   0000              	GLOBAL _enemy_vertical
606   0000              	GLOBAL _ay_fx_play
607   0000              	GLOBAL _ay_midi_play
608   0000              	GLOBAL _ay_is_playing
609   0000              	GLOBAL _ay_reset
610   0000              	GLOBAL _test_func
611   0000              	GLOBAL _test_proc
612   0000              	GLOBAL _in_mouse_kempston_wheel_delta
613   0000              	GLOBAL _in_mouse_kempston_wheel
614   0000              	GLOBAL _in_mouse_kempston_callee
615   0000              	GLOBAL _in_mouse_kempston
616   0000              	GLOBAL _in_mouse_kempston_setpos_callee
617   0000              	GLOBAL _in_mouse_kempston_setpos
618   0000              	GLOBAL _in_mouse_kempston_reset
619   0000              	GLOBAL _in_mouse_kempston_init
620   0000              	GLOBAL _in_mouse_amx_wheel_delta
621   0000              	GLOBAL _in_mouse_amx_wheel
622   0000              	GLOBAL _in_mouse_amx_callee
623   0000              	GLOBAL _in_mouse_amx
624   0000              	GLOBAL _in_mouse_amx_setpos_callee
625   0000              	GLOBAL _in_mouse_amx_setpos
626   0000              	GLOBAL _in_mouse_amx_reset
627   0000              	GLOBAL _in_mouse_amx_init_callee
628   0000              	GLOBAL _in_mouse_amx_init
629   0000              	GLOBAL _in_stick_sinclair2
630   0000              	GLOBAL _in_stick_sinclair1
631   0000              	GLOBAL _in_stick_kempston
632   0000              	GLOBAL _in_stick_fuller
633   0000              	GLOBAL _in_stick_cursor
634   0000              	GLOBAL _in_stick_keyboard_fastcall
635   0000              	GLOBAL _in_stick_keyboard
636   0000              	GLOBAL _in_wait_nokey
637   0000              	GLOBAL _in_wait_key
638   0000              	GLOBAL _in_test_key
639   0000              	GLOBAL _in_pause_fastcall
640   0000              	GLOBAL _in_pause
641   0000              	GLOBAL _in_key_scancode_fastcall
642   0000              	GLOBAL _in_key_scancode
643   0000              	GLOBAL _in_key_pressed_fastcall
644   0000              	GLOBAL _in_key_pressed
645   0000              	GLOBAL _in_inkey
646   0000              	GLOBAL _NIRVANAP_CHAR_TABLE
647   0000              	GLOBAL _NIRVANAP_WIDE_IMAGES
648   0000              	GLOBAL _NIRVANAP_TILE_IMAGES
649   0000              	GLOBAL _NIRVANAP_HOLE
650   0000              	GLOBAL _NIRVANAP_ISR_HOOK
651   0000              	GLOBAL _scan_map
652   0000              	GLOBAL _key_map
653   0000              	GLOBAL _player_lvl_table
654   0000              	GLOBAL _stp_row
655   0000              	GLOBAL _stp_col
656   0000              	GLOBAL _stp_tile
657   0000              	GLOBAL _map_paper_last_a
658   0000              	GLOBAL _map_paper_last
659   0000              	GLOBAL _map_paper_clr
660   0000              	GLOBAL _map_paper
661   0000              	GLOBAL _draw_count
662   0000              	GLOBAL _g_player_hit_right
663   0000              	GLOBAL _g_player_hit_left
664   0000              	GLOBAL _bullet_count
665   0000              	GLOBAL _spr_hack
666   0000              	GLOBAL _boss_stat
667   0000              	GLOBAL _boss_time_fire
668   0000              	GLOBAL _boss_time
669   0000              	GLOBAL _boss_tile
670   0000              	GLOBAL _boss_inc
671   0000              	GLOBAL _boss_col
672   0000              	GLOBAL _boss_lin
673   0000              	GLOBAL _bullet
674   0000              	GLOBAL _bullet_vel
675   0000              	GLOBAL _bullet_frames
676   0000              	GLOBAL _bullet_colint
677   0000              	GLOBAL _bullet_dir
678   0000              	GLOBAL _bullet_tile
679   0000              	GLOBAL _bullet_col
680   0000              	GLOBAL _bullet_lin
681   0000              	GLOBAL _bullet_col0
682   0000              	GLOBAL _bullet_lin0
683   0000              	GLOBAL _bullet_max
684   0000              	GLOBAL _bullet_class
685   0000              	GLOBAL _mush_class
686   0000              	GLOBAL _mush_index
687   0000              	GLOBAL _anim_count
688   0000              	GLOBAL _anim_respanwn
689   0000              	GLOBAL _anim_loop
690   0000              	GLOBAL _anim_end
691   0000              	GLOBAL _anim_int
692   0000              	GLOBAL _anim_tile
693   0000              	GLOBAL _anim_col
694   0000              	GLOBAL _anim_lin
695   0000              	GLOBAL _map_heigth
696   0000              	GLOBAL _map_width
697   0000              	GLOBAL _scr_curr
698   0000              	GLOBAL _sprite_kind
699   0000              	GLOBAL _scr_obj1
700   0000              	GLOBAL _scr_obj0
701   0000              	GLOBAL _scr_map
702   0000              	GLOBAL _sprite_speed_alt
703   0000              	GLOBAL _spr_init
704   0000              	GLOBAL _spr_map_tile
705   0000              	GLOBAL _sprite_frames
706   0000              	GLOBAL _sprite_speed
707   0000              	GLOBAL _screen_ink
708   0000              	GLOBAL _screen_paper
709   0000              	GLOBAL _player_onstair
710   0000              	GLOBAL _game_start_scr
711   0000              	GLOBAL _game_respawn_tile
712   0000              	GLOBAL _game_respawn_index
713   0000              	GLOBAL _game_respawn_time
714   0000              	GLOBAL _game_score_top
715   0000              	GLOBAL _player_coins
716   0000              	GLOBAL _player_lives
717   0000              	GLOBAL _game_over
718   0000              	GLOBAL _game_sound
719   0000              	GLOBAL _game_inf_lives
720   0000              	GLOBAL _game_inmune
721   0000              	GLOBAL _sprite_curr_index
722   0000              	GLOBAL _spr_count
723   0000              	GLOBAL _bullet_time
724   0000              	GLOBAL _anim_time
725   0000              	GLOBAL _frame_time
726   0000              	GLOBAL _curr_time
727   0000              	GLOBAL _s_state
728   0000              	GLOBAL _attrib_osd
729   0000              	GLOBAL _attrib_hl
730   0000              	GLOBAL _attrib
731   0000              	GLOBAL _zx_val_asm
732   0000              	GLOBAL _enemies
733   0000              	GLOBAL _tmp_ui
734   0000              	GLOBAL _tmp_sc
735   0000              	GLOBAL _tmp_uc
736   0000              	GLOBAL _tmp1
737   0000              	GLOBAL _tmp0
738   0000              	GLOBAL _tmp
739   0000              	GLOBAL _index1
740   0000              	GLOBAL _index0
741   0000              	GLOBAL _loop_count
742   0000              	GLOBAL _s_class
743   0000              	GLOBAL _s_col1
744   0000              	GLOBAL _s_col0
745   0000              	GLOBAL _s_lin1
746   0000              	GLOBAL _s_lin0
747   0000              	GLOBAL _s_tile1
748   0000              	GLOBAL _s_tile0
749   0000              	GLOBAL _player_brick_time
750   0000              	GLOBAL _player_hit_count
751   0000              	GLOBAL _sprite_horizontal_check
752   0000              	GLOBAL _sprite_on_air
753   0000              	GLOBAL _sprite
754   0000              	GLOBAL _fps
755   0000              	GLOBAL _game_2buttons
756   0000              	GLOBAL _game_respawn_curr_time
757   0000              	GLOBAL _game_worldup
758   0000              	GLOBAL _game_mush_count
759   0000              	GLOBAL _game_boss_fix
760   0000              	GLOBAL _game_boss_hit
761   0000              	GLOBAL _game_boss_alive
762   0000              	GLOBAL _game_boss
763   0000              	GLOBAL _game_world
764   0000              	GLOBAL _game_gravity
765   0000              	GLOBAL _player_onfire
766   0000              	GLOBAL _player_anim_stair
767   0000              	GLOBAL _player_hit_time
768   0000              	GLOBAL _game_checkpoint_scr
769   0000              	GLOBAL _game_checkpoint_lin
770   0000              	GLOBAL _game_checkpoint_col
771   0000              	GLOBAL _player_lin_scr
772   0000              	GLOBAL _player_col_scr
773   0000              	GLOBAL _player_lvl
774   0000              	GLOBAL _player_int
775   0000              	GLOBAL _player_str
776   0000              	GLOBAL _player_max_vita
777   0000              	GLOBAL _player_max_mana
778   0000              	GLOBAL _player_vita
779   0000              	GLOBAL _player_mana
780   0000              	GLOBAL _player_keys
781   0000              	GLOBAL _player_vel_inc
782   0000              	GLOBAL _player_vel_y1
783   0000              	GLOBAL _player_vel_y0
784   0000              	GLOBAL _player_vel_y
785   0000              	GLOBAL _player_vel_x
786   0000              	GLOBAL _player_score
787   0000              	GLOBAL _last_time
788   0000              	GLOBAL _player_slide
789   0000              	GLOBAL _spr_timer
790   0000              	GLOBAL _jump_lin
791   0000              	GLOBAL _player_hit_col
792   0000              	GLOBAL _player_hit_lin
793   0000              	GLOBAL _colint
794   0000              	GLOBAL _col
795   0000              	GLOBAL _lin
796   0000              	GLOBAL _tile
797   0000              	GLOBAL _state_a
798   0000              	GLOBAL _state
799   0000              	GLOBAL _class
800   0000              	GLOBAL _tbuffer
801   0000              	GLOBAL _dirs_alt
802   0000              	GLOBAL _dirs
803   0000              	GLOBAL _k2
804   0000              	GLOBAL _k1
805   0000              	GLOBAL _joyfunc2
806   0000              	GLOBAL _joyfunc1
807   0000              	GLOBAL _btiles
808   0000              	GLOBAL _spec128
809   0000              	GLOBAL _GLOBAL_ZX_PORT_7FFD
810   0000              	GLOBAL _GLOBAL_ZX_PORT_1FFD
811   0000              	GLOBAL _GLOBAL_ZX_PORT_FE
812   0000              	GLOBAL _ay_effect_20
813   0000              	GLOBAL _ay_effect_19
814   0000              	GLOBAL _ay_effect_18
815   0000              	GLOBAL _ay_effect_17
816   0000              	GLOBAL _ay_effect_16
817   0000              	GLOBAL _ay_effect_15
818   0000              	GLOBAL _ay_effect_14
819   0000              	GLOBAL _ay_effect_13
820   0000              	GLOBAL _ay_effect_12
821   0000              	GLOBAL _ay_effect_11
822   0000              	GLOBAL _ay_effect_10
823   0000              	GLOBAL _ay_effect_09
824   0000              	GLOBAL _ay_effect_08
825   0000              	GLOBAL _ay_effect_07
826   0000              	GLOBAL _ay_effect_06
827   0000              	GLOBAL _ay_effect_05
828   0000              	GLOBAL _ay_effect_04
829   0000              	GLOBAL _ay_effect_03
830   0000              	GLOBAL _ay_effect_02
831   0000              	GLOBAL _ay_effect_01
832   0000              	GLOBAL _pb_midi_phase_1
833   0000              	GLOBAL _pb_midi_title
834   0000              	GLOBAL _world0_h
835   0000              	GLOBAL _world0_w
836   0000              	GLOBAL _world0
837   0000              	GLOBAL _paper0
838   0000              	GLOBAL _lenght0
839   0000              	GLOBAL _start_scr0
840   0000              ;--------------------------------------------------------
841   0000              ; special function registers
842   0000              ;--------------------------------------------------------
843   0000              defc _IO_FE	=	0x00fe
844   0000              defc _IO_1FFD	=	0x1ffd
845   0000              defc _IO_7FFD	=	0x7ffd
846   0000              ;--------------------------------------------------------
847   0000              ; ram data
848   0000              ;--------------------------------------------------------
849   0000              	SECTION bss_compiler
850   0000              ;--------------------------------------------------------
851   0000              ; ram data
852   0000              ;--------------------------------------------------------
853   0000              
854   0000              IF 0
855   0000              
856   0000              ; .area _INITIALIZED removed by z88dk
857   0000              
858   0000              
859   0000              ENDIF
860   0000              
861   0000              ;--------------------------------------------------------
862   0000              ; absolute external ram data
863   0000              ;--------------------------------------------------------
864   0000              	SECTION IGNORE
865   0000              ;--------------------------------------------------------
866   0000              ; global & static initialisations
867   0000              ;--------------------------------------------------------
868   0000              	SECTION code_crt_init
869   0000              ;--------------------------------------------------------
870   0000              ; Home
871   0000              ;--------------------------------------------------------
872   0000              	SECTION IGNORE
873   0000              ;--------------------------------------------------------
874   0000              ; code
875   0000              ;--------------------------------------------------------
876   0000              	SECTION code_compiler
877   0000              ;	---------------------------------
878   0000              ; Function player_init
879   0000              ; ---------------------------------
880   0000              _player_init:
881   0000  CD 00 00    	call	___sdcc_enter_ix
882   0003  21 07 00    	ld	hl, +(_class + 0x0007)
883   0006  36 00       	ld	(hl),0x00
884   0008  21 07 00    	ld	hl, +(_tile + 0x0007)
885   000B  DD 7E 06    	ld	a,(ix+6)
886   000E  77          	ld	(hl), a
887   000F  21 07 00    	ld	hl, +(_lin + 0x0007)
888   0012  DD 7E 04    	ld	a,(ix+4)
889   0015  77          	ld	(hl), a
890   0016  21 07 00    	ld	hl, +(_col + 0x0007)
891   0019  DD 7E 05    	ld	a,(ix+5)
892   001C  77          	ld	(hl), a
893   001D  21 07 00    	ld	hl, +(_colint + 0x0007)
894   0020  36 00       	ld	(hl),0x00
895   0022  21 07 00    	ld	hl, +(_state + 0x0007)
896   0025  36 00       	ld	(hl),0x00
897   0027  01 07 00    	ld	bc,_state_a+7
898   002A  AF          	xor	a, a
899   002B  02          	ld	(bc), a
900   002C  21 07 00    	ld	hl, +(_jump_lin + 0x0007)
901   002F  DD 7E 04    	ld	a,(ix+4)
902   0032  77          	ld	(hl), a
903   0033  ED 5B 00 00 	ld	de,(_curr_time)
904   0037  ED 53 0E 00 	ld	(_last_time + 0x000e),de
905   003B  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
906   003E  36 00       	ld	(hl),0x00
907   0040  0A          	ld	a, (bc)
908   0041  F6 11       	or	a,+(0x01|0x10)
909   0043  02          	ld	(bc),a
910   0044  21 00 00    	ld	hl,_player_hit_col
911   0047  36 00       	ld	(hl),0x00
912   0049  21 00 00    	ld	hl,_player_hit_lin
913   004C  36 00       	ld	(hl),0x00
914   004E  21 00 00    	ld	hl,_player_slide
915   0051  36 00       	ld	(hl),0x00
916   0053  21 00 00    	ld	hl,_player_onstair
917   0056  36 00       	ld	(hl),0x00
918   0058  21 00 00    	ld	hl,_player_onfire
919   005B  36 00       	ld	(hl),0x00
920   005D  DD 66 05    	ld	h,(ix+5)
921   0060  DD 6E 04    	ld	l,(ix+4)
922   0063  E5          	push	hl
923   0064  DD 56 06    	ld	d,(ix+6)
924   0067  1E 07       	ld	e,0x07
925   0069  D5          	push	de
926   006A  CD 00 00    	call	_NIRVANAP_spriteT_callee
927   006D  DD 66 05    	ld	h,(ix+5)
928   0070  DD 6E 04    	ld	l,(ix+4)
929   0073  E5          	push	hl
930   0074  CD 00 00    	call	_spr_calc_index
931   0077  F1          	pop	af
932   0078  22 00 00    	ld	(_index0),hl
933   007B  01 00 00    	ld	bc,_scr_map
934   007E  09          	add	hl,bc
935   007F  36 15       	ld	(hl),0x15
936   0081  DD E1       	pop	ix
937   0083  C9          	ret
938   0084              	SECTION code_compiler
939   0084              ;	---------------------------------
940   0084              ; Function player_turn
941   0084              ; ---------------------------------
942   0084              _player_turn:
943   0084  21 00 00    	ld	hl,_sprite
944   0087  CD 00 00    	call	_spr_chktime
945   008A  7D          	ld	a, l
946   008B  B7          	or	a, a
947   008C  C8          	ret	Z
948   008D  21 00 00    	ld	hl,_k1
949   0090  E5          	push	hl
950   0091  2A 00 00    	ld	hl,(_joyfunc1)
951   0094  CD 00 00    	call	___sdcc_call_hl
952   0097  F1          	pop	af
953   0098  7D          	ld	a,l
954   0099  32 00 00    	ld	(_dirs),a
955   009C  21 00 00    	ld	hl,_k2
956   009F  E5          	push	hl
957   00A0  2A 00 00    	ld	hl,(_joyfunc2)
958   00A3  CD 00 00    	call	___sdcc_call_hl
959   00A6  F1          	pop	af
960   00A7  7D          	ld	a,l
961   00A8  32 00 00    	ld	(_dirs_alt),a
962   00AB  21 00 00    	ld	hl,_s_class
963   00AE  36 00       	ld	(hl),0x00
964   00B0  CD B6 00    	call	_player_move
965   00B3  C3 CD 03    	jp  _player_collision
966   00B6              	SECTION code_compiler
967   00B6              ;	---------------------------------
968   00B6              ; Function player_move
969   00B6              ; ---------------------------------
970   00B6              _player_move:
971   00B6  3A 07 00    	ld	a,(_lin + 0x0007)
972   00B9  32 00 00    	ld	(_s_lin0),a
973   00BC  3A 07 00    	ld	a,(_col + 0x0007)
974   00BF  32 00 00    	ld	(_s_col0),a
975   00C2  3A 07 00    	ld	a,(_state + 0x0007)
976   00C5  32 00 00    	ld	(_s_state),a
977   00C8  21 00 00    	ld	hl,_s_state
978   00CB  CB 46       	bit	0, (hl)
979   00CD  20 07       	jr	NZ,l_player_move_00113
980   00CF  21 00 00    	ld	hl,_s_state
981   00D2  CB 4E       	bit	1, (hl)
982   00D4  28 43       	jr	Z,l_player_move_00114
983   00D6              l_player_move_00113:
984   00D6  CD 40 03    	call	_player_fire
985   00D9  3A 00 00    	ld	a,(_player_vel_y)
986   00DC  21 00 00    	ld	hl,_player_vel_y1
987   00DF  96          	sub	a, (hl)
988   00E0  E2 E5 00    	jp	PO, l_player_move_00162
989   00E3  EE 80       	xor	a,0x80
990   00E5              l_player_move_00162:
991   00E5  F2 02 01    	jp	P, l_player_move_00106
992   00E8  21 00 00    	ld	hl,_dirs
993   00EB  CB 56       	bit	2, (hl)
994   00ED  28 06       	jr	Z,l_player_move_00102
995   00EF  21 00 00    	ld	hl,_s_state
996   00F2  CD 00 00    	call	_spr_set_left
997   00F5              l_player_move_00102:
998   00F5  21 00 00    	ld	hl,_dirs
999   00F8  CB 4E       	bit	1, (hl)
1000  00FA  28 06       	jr	Z,l_player_move_00106
1001  00FC  21 00 00    	ld	hl,_s_state
1002  00FF  CD 00 00    	call	_spr_set_right
1003  0102              l_player_move_00106:
1004  0102  CD 55 0E    	call	_player_move_jump
1005  0105  7D          	ld	a, l
1006  0106  B7          	or	a, a
1007  0107  28 1C       	jr	Z,l_player_move_00115
1008  0109  3A 00 00    	ld	a,(_player_onstair)
1009  010C  B7          	or	a, a
1010  010D  20 16       	jr	NZ,l_player_move_00115
1011  010F  21 60 08    	ld	hl,0x0860
1012  0112  E5          	push	hl
1013  0113  CD 32 07    	call	_player_tile
1014  0116  F1          	pop	af
1015  0117  18 0C       	jr	l_player_move_00115
1016  0119              l_player_move_00114:
1017  0119  CD 8B 01    	call	_player_move_input
1018  011C  3A 00 00    	ld	a,(_player_onstair)
1019  011F  B7          	or	a, a
1020  0120  20 03       	jr	NZ,l_player_move_00115
1021  0122  CD D4 0C    	call	_player_check_floor
1022  0125              l_player_move_00115:
1023  0125  CD 00 00    	call	_spr_redraw
1024  0128  7D          	ld	a, l
1025  0129  B7          	or	a, a
1026  012A  28 03       	jr	Z,l_player_move_00118
1027  012C  CD 53 07    	call	_player_check_map
1028  012F              l_player_move_00118:
1029  012F  3A 00 00    	ld	a,(_player_hit_lin)
1030  0132  B7          	or	a, a
1031  0133  28 03       	jr	Z,l_player_move_00120
1032  0135  CD 3B 0C    	call	_player_hit_platform_clear
1033  0138              l_player_move_00120:
1034  0138  3A 00 00    	ld	a,(_s_state)
1035  013B  32 07 00    	ld	((_state + 0x0007)),a
1036  013E  2E 00       	ld	l,0x00
1037  0140  C9          	ret
1038  0141              	SECTION code_compiler
1039  0141              ;	---------------------------------
1040  0141              ; Function player_check_input
1041  0141              ; ---------------------------------
1042  0141              _player_check_input:
1043  0141  21 00 00    	ld	hl,_dirs
1044  0144  CB 56       	bit	2, (hl)
1045  0146  28 0C       	jr	Z,l_player_check_input_00102
1046  0148  21 00 00    	ld	hl,_dirs
1047  014B  CB 5E       	bit	3, (hl)
1048  014D  28 05       	jr	Z,l_player_check_input_00102
1049  014F  21 00 00    	ld	hl,_dirs
1050  0152  36 00       	ld	(hl),0x00
1051  0154              l_player_check_input_00102:
1052  0154  21 00 00    	ld	hl,_dirs
1053  0157  7E          	ld	a, (hl)
1054  0158  CB 07       	rlc	a
1055  015A  E6 01       	and	a,0x01
1056  015C  CB 47       	bit	0, a
1057  015E  20 28       	jr	NZ,l_player_check_input_00107
1058  0160  CB 56       	bit	2, (hl)
1059  0162  20 24       	jr	NZ,l_player_check_input_00107
1060  0164  21 00 00    	ld	hl,_dirs
1061  0167  CB 5E       	bit	3, (hl)
1062  0169  20 1D       	jr	NZ,l_player_check_input_00107
1063  016B  21 00 00    	ld	hl,_dirs
1064  016E  CB 46       	bit	0, (hl)
1065  0170  20 16       	jr	NZ,l_player_check_input_00107
1066  0172  21 00 00    	ld	hl,_dirs
1067  0175  CB 4E       	bit	1, (hl)
1068  0177  20 0F       	jr	NZ,l_player_check_input_00107
1069  0179  3A 00 00    	ld	a,(_dirs_alt)
1070  017C  CB 07       	rlc	a
1071  017E  E6 01       	and	a,0x01
1072  0180  CB 47       	bit	0, a
1073  0182  20 04       	jr	NZ,l_player_check_input_00107
1074  0184  2E 00       	ld	l,0x00
1075  0186  18 02       	jr	l_player_check_input_00108
1076  0188              l_player_check_input_00107:
1077  0188  2E 01       	ld	l,0x01
1078  018A              l_player_check_input_00108:
1079  018A  C9          	ret
1080  018B              	SECTION code_compiler
1081  018B              ;	---------------------------------
1082  018B              ; Function player_move_input
1083  018B              ; ---------------------------------
1084  018B              _player_move_input:
1085  018B  CD 41 01    	call	_player_check_input
1086  018E  7D          	ld	a, l
1087  018F  B7          	or	a, a
1088  0190  CA 00 03    	jp	Z, l_player_move_input_00149
1089  0193  CD 40 03    	call	_player_fire
1090  0196  7D          	ld	a, l
1091  0197  B7          	or	a, a
1092  0198  28 0A       	jr	Z,l_player_move_input_00102
1093  019A  21 00 00    	ld	hl,_dirs
1094  019D  36 00       	ld	(hl),0x00
1095  019F  2E 00       	ld	l,0x00
1096  01A1  C3 26 03    	jp	l_player_move_input_00151
1097  01A4              l_player_move_input_00102:
1098  01A4  3A 00 00    	ld	a,(_game_2buttons)
1099  01A7  B7          	or	a, a
1100  01A8  28 07       	jr	Z,l_player_move_input_00104
1101  01AA  3A 00 00    	ld	a,(_dirs)
1102  01AD  E6 80       	and	a,0x80
1103  01AF  18 16       	jr	l_player_move_input_00105
1104  01B1              l_player_move_input_00104:
1105  01B1  21 00 00    	ld	hl,_dirs
1106  01B4  7E          	ld	a, (hl)
1107  01B5  CB 07       	rlc	a
1108  01B7  E6 01       	and	a,0x01
1109  01B9  CB 47       	bit	0, a
1110  01BB  28 04       	jr	Z,l_player_move_input_00153
1111  01BD  CB 46       	bit	0, (hl)
1112  01BF  20 04       	jr	NZ,l_player_move_input_00154
1113  01C1              l_player_move_input_00153:
1114  01C1  3E 00       	ld	a,0x00
1115  01C3  18 02       	jr	l_player_move_input_00155
1116  01C5              l_player_move_input_00154:
1117  01C5  3E 01       	ld	a,0x01
1118  01C7              l_player_move_input_00155:
1119  01C7              l_player_move_input_00105:
1120  01C7  B7          	or	a, a
1121  01C8  28 47       	jr	Z,l_player_move_input_00109
1122  01CA  21 00 00    	ld	hl,_player_vel_inc
1123  01CD  36 01       	ld	(hl),0x01
1124  01CF  CD 00 00    	call	_ay_is_playing
1125  01D2  7D          	ld	a, l
1126  01D3  D6 03       	sub	a,0x03
1127  01D5  28 06       	jr	Z,l_player_move_input_00107
1128  01D7  21 00 00    	ld	hl,_ay_effect_03
1129  01DA  CD 00 00    	call	_ay_fx_play
1130  01DD              l_player_move_input_00107:
1131  01DD  21 00 00    	ld	hl,_player_onstair
1132  01E0  36 00       	ld	(hl),0x00
1133  01E2  21 00 00    	ld	hl,_s_state
1134  01E5  CD 00 00    	call	_spr_set_up
1135  01E8  3A 07 00    	ld	a,(_lin + 0x0007)
1136  01EB  32 07 00    	ld	((_jump_lin + 0x0007)),a
1137  01EE  3A 00 00    	ld	a,(_s_state)
1138  01F1  32 07 00    	ld	((_state + 0x0007)),a
1139  01F4  21 64 08    	ld	hl,0x0864
1140  01F7  E5          	push	hl
1141  01F8  CD 32 07    	call	_player_tile
1142  01FB  F1          	pop	af
1143  01FC  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
1144  01FF  36 02       	ld	(hl),0x02
1145  0201  21 00 00    	ld	hl,_player_slide
1146  0204  36 00       	ld	(hl),0x00
1147  0206  3A 00 00    	ld	a,(_player_vel_y0)
1148  0209  32 00 00    	ld	(_player_vel_y),a
1149  020C  2E 01       	ld	l,0x01
1150  020E  C3 26 03    	jp	l_player_move_input_00151
1151  0211              l_player_move_input_00109:
1152  0211  21 00 00    	ld	hl,_dirs
1153  0214  CB 5E       	bit	3, (hl)
1154  0216  28 20       	jr	Z,l_player_move_input_00113
1155  0218  CD 27 03    	call	_player_fix_walk_lin
1156  021B  21 00 00    	ld	hl,_s_state
1157  021E  CD 00 00    	call	_spr_set_right
1158  0221  01 07 00    	ld	bc,_state_a+7
1159  0224  0A          	ld	a, (bc)
1160  0225  F6 10       	or	a,0x10
1161  0227  E6 F7       	and	a,0xf7
1162  0229  02          	ld	(bc),a
1163  022A  3A 00 00    	ld	a,(_player_onstair)
1164  022D  B7          	or	a, a
1165  022E  28 05       	jr	Z,l_player_move_input_00111
1166  0230  2E 00       	ld	l,0x00
1167  0232  CD 5C 06    	call	_player_check_stairs
1168  0235              l_player_move_input_00111:
1169  0235  CD 00 00    	call	_spr_move_horizontal
1170  0238              l_player_move_input_00113:
1171  0238  21 00 00    	ld	hl,_dirs
1172  023B  CB 56       	bit	2, (hl)
1173  023D  28 20       	jr	Z,l_player_move_input_00117
1174  023F  CD 27 03    	call	_player_fix_walk_lin
1175  0242  21 00 00    	ld	hl,_s_state
1176  0245  CD 00 00    	call	_spr_set_left
1177  0248  01 07 00    	ld	bc,_state_a+7
1178  024B  0A          	ld	a, (bc)
1179  024C  F6 08       	or	a,0x08
1180  024E  E6 EF       	and	a,0xef
1181  0250  02          	ld	(bc),a
1182  0251  3A 00 00    	ld	a,(_player_onstair)
1183  0254  B7          	or	a, a
1184  0255  28 05       	jr	Z,l_player_move_input_00115
1185  0257  2E 00       	ld	l,0x00
1186  0259  CD 5C 06    	call	_player_check_stairs
1187  025C              l_player_move_input_00115:
1188  025C  CD 00 00    	call	_spr_move_horizontal
1189  025F              l_player_move_input_00117:
1190  025F  21 00 00    	ld	hl,_dirs
1191  0262  CB 46       	bit	0, (hl)
1192  0264  28 39       	jr	Z,l_player_move_input_00129
1193  0266  2E 00       	ld	l,0x00
1194  0268  CD 5C 06    	call	_player_check_stairs
1195  026B  3A 00 00    	ld	a,(_player_onstair)
1196  026E  B7          	or	a, a
1197  026F  20 10       	jr	NZ,l_player_move_input_00121
1198  0271  2E 01       	ld	l,0x01
1199  0273  CD 5C 06    	call	_player_check_stairs
1200  0276  3A 00 00    	ld	a,(_player_onstair)
1201  0279  B7          	or	a, a
1202  027A  20 05       	jr	NZ,l_player_move_input_00121
1203  027C  2E FE       	ld	l,0xfe
1204  027E  CD BB 05    	call	_player_check_stairs_vertical
1205  0281              l_player_move_input_00121:
1206  0281  3A 00 00    	ld	a,(_player_onstair)
1207  0284  B7          	or	a, a
1208  0285  28 05       	jr	Z,l_player_move_input_00126
1209  0287  CD 00 00    	call	_spr_move_up
1210  028A  18 13       	jr	l_player_move_input_00129
1211  028C              l_player_move_input_00126:
1212  028C  21 00 00    	ld	hl,_dirs
1213  028F  CB 5E       	bit	3, (hl)
1214  0291  20 0C       	jr	NZ,l_player_move_input_00129
1215  0293  21 00 00    	ld	hl,_dirs
1216  0296  CB 56       	bit	2, (hl)
1217  0298  20 05       	jr	NZ,l_player_move_input_00129
1218  029A  2E 00       	ld	l,0x00
1219  029C  C3 26 03    	jp	l_player_move_input_00151
1220  029F              l_player_move_input_00129:
1221  029F  21 00 00    	ld	hl,_dirs
1222  02A2  CB 4E       	bit	1, (hl)
1223  02A4  28 38       	jr	Z,l_player_move_input_00141
1224  02A6  2E 00       	ld	l,0x00
1225  02A8  CD 5C 06    	call	_player_check_stairs
1226  02AB  3A 00 00    	ld	a,(_player_onstair)
1227  02AE  B7          	or	a, a
1228  02AF  20 10       	jr	NZ,l_player_move_input_00133
1229  02B1  2E 01       	ld	l,0x01
1230  02B3  CD 5C 06    	call	_player_check_stairs
1231  02B6  3A 00 00    	ld	a,(_player_onstair)
1232  02B9  B7          	or	a, a
1233  02BA  20 05       	jr	NZ,l_player_move_input_00133
1234  02BC  2E 12       	ld	l,0x12
1235  02BE  CD BB 05    	call	_player_check_stairs_vertical
1236  02C1              l_player_move_input_00133:
1237  02C1  3A 00 00    	ld	a,(_player_onstair)
1238  02C4  B7          	or	a, a
1239  02C5  28 05       	jr	Z,l_player_move_input_00138
1240  02C7  CD 00 00    	call	_spr_move_down
1241  02CA  18 12       	jr	l_player_move_input_00141
1242  02CC              l_player_move_input_00138:
1243  02CC  21 00 00    	ld	hl,_dirs
1244  02CF  CB 5E       	bit	3, (hl)
1245  02D1  20 0B       	jr	NZ,l_player_move_input_00141
1246  02D3  21 00 00    	ld	hl,_dirs
1247  02D6  CB 56       	bit	2, (hl)
1248  02D8  20 04       	jr	NZ,l_player_move_input_00141
1249  02DA  2E 00       	ld	l,0x00
1250  02DC  18 48       	jr	l_player_move_input_00151
1251  02DE              l_player_move_input_00141:
1252  02DE  3A 00 00    	ld	a,(_s_state)
1253  02E1  32 07 00    	ld	((_state + 0x0007)),a
1254  02E4  3A 00 00    	ld	a,(_player_onstair)
1255  02E7  B7          	or	a, a
1256  02E8  28 0A       	jr	Z,l_player_move_input_00143
1257  02EA  21 72 00    	ld	hl,0x0072
1258  02ED  E5          	push	hl
1259  02EE  CD 32 07    	call	_player_tile
1260  02F1  F1          	pop	af
1261  02F2  18 08       	jr	l_player_move_input_00144
1262  02F4              l_player_move_input_00143:
1263  02F4  21 60 08    	ld	hl,0x0860
1264  02F7  E5          	push	hl
1265  02F8  CD 32 07    	call	_player_tile
1266  02FB  F1          	pop	af
1267  02FC              l_player_move_input_00144:
1268  02FC  2E 01       	ld	l,0x01
1269  02FE  18 26       	jr	l_player_move_input_00151
1270  0300              l_player_move_input_00149:
1271  0300  21 07 00    	ld	hl, +(_colint + 0x0007)
1272  0303  36 00       	ld	(hl),0x00
1273  0305  3A 00 00    	ld	a,(_player_onstair)
1274  0308  B7          	or	a, a
1275  0309  28 0A       	jr	Z,l_player_move_input_00146
1276  030B  21 72 00    	ld	hl,0x0072
1277  030E  E5          	push	hl
1278  030F  CD 32 07    	call	_player_tile
1279  0312  F1          	pop	af
1280  0313  18 08       	jr	l_player_move_input_00147
1281  0315              l_player_move_input_00146:
1282  0315  21 70 01    	ld	hl,0x0170
1283  0318  E5          	push	hl
1284  0319  CD 32 07    	call	_player_tile
1285  031C  F1          	pop	af
1286  031D              l_player_move_input_00147:
1287  031D  21 00 00    	ld	hl,_s_state
1288  0320  7E          	ld	a,(hl)
1289  0321  E6 F3       	and	a,+(0xf7&0xfb)
1290  0323  77          	ld	(hl),a
1291  0324  2E 00       	ld	l,0x00
1292  0326              l_player_move_input_00151:
1293  0326  C9          	ret
1294  0327              	SECTION code_compiler
1295  0327              ;	---------------------------------
1296  0327              ; Function player_fix_walk_lin
1297  0327              ; ---------------------------------
1298  0327              _player_fix_walk_lin:
1299  0327  3A 00 00    	ld	a,(_player_onstair)
1300  032A  B7          	or	a, a
1301  032B  C0          	ret	NZ
1302  032C  01 07 00    	ld	bc,_lin+7
1303  032F  3A 00 00    	ld	a,(_s_lin0)
1304  0332  07          	rlca
1305  0333  07          	rlca
1306  0334  07          	rlca
1307  0335  07          	rlca
1308  0336  E6 0F       	and	a,0x0f
1309  0338  07          	rlca
1310  0339  07          	rlca
1311  033A  07          	rlca
1312  033B  07          	rlca
1313  033C  E6 F0       	and	a,0xf0
1314  033E  02          	ld	(bc), a
1315  033F  C9          	ret
1316  0340              	SECTION code_compiler
1317  0340              ;	---------------------------------
1318  0340              ; Function player_fire
1319  0340              ; ---------------------------------
1320  0340              _player_fire:
1321  0340  CD 00 00    	call	___sdcc_enter_ix
1322  0343  3B          	dec	sp
1323  0344  3A 00 00    	ld	a,(_game_2buttons)
1324  0347  B7          	or	a, a
1325  0348  28 0A       	jr	Z,l_player_fire_00102
1326  034A  3A 00 00    	ld	a,(_dirs_alt)
1327  034D  E6 80       	and	a,0x80
1328  034F  32 00 00    	ld	(_player_onfire),a
1329  0352  18 1A       	jr	l_player_fire_00103
1330  0354              l_player_fire_00102:
1331  0354  21 00 00    	ld	hl,_dirs
1332  0357  7E          	ld	a, (hl)
1333  0358  CB 07       	rlc	a
1334  035A  E6 01       	and	a,0x01
1335  035C  CB 47       	bit	0, a
1336  035E  28 04       	jr	Z,l_player_fire_00119
1337  0360  CB 46       	bit	0, (hl)
1338  0362  28 04       	jr	Z,l_player_fire_00120
1339  0364              l_player_fire_00119:
1340  0364  0E 00       	ld	c,0x00
1341  0366  18 02       	jr	l_player_fire_00121
1342  0368              l_player_fire_00120:
1343  0368  0E 01       	ld	c,0x01
1344  036A              l_player_fire_00121:
1345  036A  21 00 00    	ld	hl,_player_onfire
1346  036D  71          	ld	(hl), c
1347  036E              l_player_fire_00103:
1348  036E  3A 00 00    	ld	a,(_player_onfire)
1349  0371  B7          	or	a, a
1350  0372  28 53       	jr	Z,l_player_fire_00116
1351  0374  3A 07 00    	ld	a,(_tile + 0x0007)
1352  0377  FE 70       	cp	a,0x70
1353  0379  28 04       	jr	Z,l_player_fire_00104
1354  037B  D6 71       	sub	a,0x71
1355  037D  20 0D       	jr	NZ,l_player_fire_00105
1356  037F              l_player_fire_00104:
1357  037F  21 60 08    	ld	hl,0x0860
1358  0382  E5          	push	hl
1359  0383  CD 32 07    	call	_player_tile
1360  0386  F1          	pop	af
1361  0387  21 07 00    	ld	hl, +(_colint + 0x0007)
1362  038A  36 00       	ld	(hl),0x00
1363  038C              l_player_fire_00105:
1364  038C  21 00 00    	ld	hl,_player_mana
1365  038F  7E          	ld	a, (hl)
1366  0390  B7          	or	a, a
1367  0391  28 30       	jr	Z,l_player_fire_00113
1368  0393  3A 07 00    	ld	a,(_bullet_col + 0x0007)
1369  0396  3C          	inc	a
1370  0397  20 2A       	jr	NZ,l_player_fire_00113
1371  0399  3E 05       	ld	a,0x05
1372  039B  96          	sub	a, (hl)
1373  039C  30 0F       	jr	NC,l_player_fire_00110
1374  039E  3A 00 00    	ld	a,(_game_inmune)
1375  03A1  B7          	or	a, a
1376  03A2  20 0E       	jr	NZ,l_player_fire_00111
1377  03A4  21 00 00    	ld	hl,_player_mana
1378  03A7  7E          	ld	a, (hl)
1379  03A8  C6 FB       	add	a,0xfb
1380  03AA  77          	ld	(hl), a
1381  03AB  18 05       	jr	l_player_fire_00111
1382  03AD              l_player_fire_00110:
1383  03AD  21 00 00    	ld	hl,_player_mana
1384  03B0  36 00       	ld	(hl),0x00
1385  03B2              l_player_fire_00111:
1386  03B2  CD 00 00    	call	_game_update_stats
1387  03B5  21 00 00    	ld	hl,_ay_effect_05
1388  03B8  CD 00 00    	call	_ay_fx_play
1389  03BB  21 07 78    	ld	hl,0x7807
1390  03BE  E5          	push	hl
1391  03BF  CD 00 00    	call	_game_shoot_fire
1392  03C2  F1          	pop	af
1393  03C3              l_player_fire_00113:
1394  03C3  2E 01       	ld	l,0x01
1395  03C5  18 02       	jr	l_player_fire_00117
1396  03C7              l_player_fire_00116:
1397  03C7  2E 00       	ld	l,0x00
1398  03C9              l_player_fire_00117:
1399  03C9  33          	inc	sp
1400  03CA  DD E1       	pop	ix
1401  03CC  C9          	ret
1402  03CD              	SECTION code_compiler
1403  03CD              ;	---------------------------------
1404  03CD              ; Function player_collision
1405  03CD              ; ---------------------------------
1406  03CD              _player_collision:
1407  03CD  CD 00 00    	call	___sdcc_enter_ix
1408  03D0  F5          	push	af
1409  03D1  3E 19       	ld	a,0x19
1410  03D3  F5          	push	af
1411  03D4  33          	inc	sp
1412  03D5  21 00 00    	ld	hl,_player_hit_time
1413  03D8  E5          	push	hl
1414  03D9  CD 00 00    	call	_game_check_time
1415  03DC  F1          	pop	af
1416  03DD  33          	inc	sp
1417  03DE  7D          	ld	a, l
1418  03DF  B7          	or	a, a
1419  03E0  CA 69 05    	jp	Z, l_player_collision_00137
1420  03E3  21 00 00    	ld	hl,_sprite
1421  03E6  36 00       	ld	(hl),0x00
1422  03E8  01 00 00    	ld	bc,_col+0
1423  03EB  3A 07 00    	ld	a,(_col + 7)
1424  03EE  32 00 00    	ld	(_s_col1),a
1425  03F1  3A 07 00    	ld	a,(_lin + 7)
1426  03F4  32 00 00    	ld	(_s_lin1),a
1427  03F7  C6 08       	add	a,0x08
1428  03F9  57          	ld	d, a
1429  03FA  3A 00 00    	ld	a,(_s_col1)
1430  03FD  C5          	push	bc
1431  03FE  5A          	ld	e,d
1432  03FF  57          	ld	d,a
1433  0400  D5          	push	de
1434  0401  CD 00 00    	call	_spr_calc_index
1435  0404  F1          	pop	af
1436  0405  C1          	pop	bc
1437  0406  7D          	ld	a,l
1438  0407  32 00 00    	ld	(_sprite_curr_index),a
1439  040A  5F          	ld	e,a
1440  040B  16 00       	ld	d,0x00
1441  040D  21 00 00    	ld	hl,_scr_map
1442  0410  19          	add	hl,de
1443  0411  5E          	ld	e, (hl)
1444  0412  21 00 00    	ld	hl,_s_col1
1445  0415  CB 46       	bit	0, (hl)
1446  0417  20 25       	jr	NZ,l_player_collision_00104
1447  0419  7B          	ld	a, e
1448  041A  D6 15       	sub	a,0x15
1449  041C  20 20       	jr	NZ,l_player_collision_00104
1450  041E  3A 00 00    	ld	a,(_game_checkpoint_scr)
1451  0421  21 00 00    	ld	hl,_scr_curr
1452  0424  96          	sub	a, (hl)
1453  0425  28 05       	jr	Z,l_player_collision_00102
1454  0427  2E 01       	ld	l,0x01
1455  0429  CD 00 00    	call	_zx_border_fastcall
1456  042C              l_player_collision_00102:
1457  042C  3A 00 00    	ld	a,(_s_col1)
1458  042F  32 00 00    	ld	(_game_checkpoint_col),a
1459  0432  3A 00 00    	ld	a,(_s_lin1)
1460  0435  32 00 00    	ld	(_game_checkpoint_lin),a
1461  0438  3A 00 00    	ld	a,(_scr_curr)
1462  043B  32 00 00    	ld	(_game_checkpoint_scr),a
1463  043E              l_player_collision_00104:
1464  043E  3E 2F       	ld	a,0x2f
1465  0440  93          	sub	a, e
1466  0441  30 3C       	jr	NC,l_player_collision_00159
1467  0443  7B          	ld	a,e
1468  0444  FE 3A       	cp	a,0x3a
1469  0446  30 37       	jr	NC,l_player_collision_00159
1470  0448  D6 39       	sub	a,0x39
1471  044A  20 07       	jr	NZ,l_player_collision_00112
1472  044C  21 00 00    	ld	hl,_game_worldup
1473  044F  36 01       	ld	(hl),0x01
1474  0451  18 2C       	jr	l_player_collision_00159
1475  0453              l_player_collision_00112:
1476  0453  21 00 00    	ld	hl,_game_inmune
1477  0456  7E          	ld	a, (hl)
1478  0457  B7          	or	a,a
1479  0458  20 13       	jr	NZ,l_player_collision_00107
1480  045A  B6          	or	a,(hl)
1481  045B  20 10       	jr	NZ,l_player_collision_00107
1482  045D  3E 82       	ld	a,0x82
1483  045F  21 00 00    	ld	hl,_s_lin1
1484  0462  96          	sub	a, (hl)
1485  0463  30 08       	jr	NC,l_player_collision_00107
1486  0465  CD 94 10    	call	_player_lost_life
1487  0468  2E 00       	ld	l,0x00
1488  046A  C3 6B 05    	jp	l_player_collision_00138
1489  046D              l_player_collision_00107:
1490  046D  21 00 00    	ld	hl,_ay_effect_06
1491  0470  CD 00 00    	call	_ay_fx_play
1492  0473  2E 06       	ld	l,0x06
1493  0475  CD 00 00    	call	_zx_border_fastcall
1494  0478  C5          	push	bc
1495  0479  2E 32       	ld	l,0x32
1496  047B  CD 10 12    	call	_player_hit
1497  047E  C1          	pop	bc
1498  047F              l_player_collision_00159:
1499  047F              l_player_collision_00133:
1500  047F  21 00 00    	ld	hl,_sprite
1501  0482  7E          	ld	a, (hl)
1502  0483  D6 07       	sub	a,0x07
1503  0485  D2 69 05    	jp	NC, l_player_collision_00137
1504  0488  5E          	ld	e,(hl)
1505  0489  16 00       	ld	d,0x00
1506  048B  21 00 00    	ld	hl,_class
1507  048E  19          	add	hl,de
1508  048F  7E          	ld	a,(hl)
1509  0490  32 00 00    	ld	(_s_class),a
1510  0493  B7          	or	a, a
1511  0494  CA 62 05    	jp	Z, l_player_collision_00132
1512  0497  2A 00 00    	ld	hl,(_sprite)
1513  049A  26 00       	ld	h,0x00
1514  049C  09          	add	hl,bc
1515  049D  7E          	ld	a,(hl)
1516  049E  DD 77 FE    	ld	(ix-2),a
1517  04A1  DD 36 FF 00 	ld	(ix-1),0x00
1518  04A5  3A 00 00    	ld	a,(_s_col1)
1519  04A8  5F          	ld	e,a
1520  04A9  16 00       	ld	d,0x00
1521  04AB  DD 7E FE    	ld	a,(ix-2)
1522  04AE  93          	sub	a, e
1523  04AF  6F          	ld	l, a
1524  04B0  DD 7E FF    	ld	a,(ix-1)
1525  04B3  9A          	sbc	a, d
1526  04B4  67          	ld	h, a
1527  04B5  CD 00 00    	call	_abs_fastcall
1528  04B8  EB          	ex	de,hl
1529  04B9  7B          	ld	a, e
1530  04BA  D6 02       	sub	a,0x02
1531  04BC  7A          	ld	a, d
1532  04BD  17          	rla
1533  04BE  3F          	ccf
1534  04BF  1F          	rra
1535  04C0  DE 80       	sbc	a,0x80
1536  04C2  D2 62 05    	jp	NC, l_player_collision_00132
1537  04C5  2A 00 00    	ld	hl,(_sprite)
1538  04C8  26 00       	ld	h,0x00
1539  04CA  11 00 00    	ld	de,_lin
1540  04CD  19          	add	hl,de
1541  04CE  7E          	ld	a,(hl)
1542  04CF  DD 77 FE    	ld	(ix-2),a
1543  04D2  DD 36 FF 00 	ld	(ix-1),0x00
1544  04D6  3A 00 00    	ld	a,(_s_lin1)
1545  04D9  5F          	ld	e,a
1546  04DA  16 00       	ld	d,0x00
1547  04DC  DD 7E FE    	ld	a,(ix-2)
1548  04DF  93          	sub	a, e
1549  04E0  6F          	ld	l, a
1550  04E1  DD 7E FF    	ld	a,(ix-1)
1551  04E4  9A          	sbc	a, d
1552  04E5  67          	ld	h, a
1553  04E6  CD 00 00    	call	_abs_fastcall
1554  04E9  EB          	ex	de,hl
1555  04EA  7B          	ld	a, e
1556  04EB  D6 0E       	sub	a,0x0e
1557  04ED  7A          	ld	a, d
1558  04EE  17          	rla
1559  04EF  3F          	ccf
1560  04F0  1F          	rra
1561  04F1  DE 80       	sbc	a,0x80
1562  04F3  30 6D       	jr	NC,l_player_collision_00132
1563  04F5  3A 00 00    	ld	a,(_s_class)
1564  04F8  D6 06       	sub	a,0x06
1565  04FA  20 1D       	jr	NZ,l_player_collision_00120
1566  04FC  21 00 00    	ld	hl,_player_vita
1567  04FF  7E          	ld	a, (hl)
1568  0500  C6 32       	add	a,0x32
1569  0502  77          	ld	(hl), a
1570  0503  3A 00 00    	ld	a,(_player_max_vita)
1571  0506  21 00 00    	ld	hl,_player_vita
1572  0509  96          	sub	a, (hl)
1573  050A  30 06       	jr	NC,l_player_collision_00118
1574  050C  3A 00 00    	ld	a,(_player_max_vita)
1575  050F  32 00 00    	ld	(_player_vita),a
1576  0512              l_player_collision_00118:
1577  0512  CD 6F 05    	call	_player_pick_mushroom
1578  0515  2E 00       	ld	l,0x00
1579  0517  18 52       	jr	l_player_collision_00138
1580  0519              l_player_collision_00120:
1581  0519  3A 00 00    	ld	a,(_s_class)
1582  051C  D6 07       	sub	a,0x07
1583  051E  20 1D       	jr	NZ,l_player_collision_00124
1584  0520  21 00 00    	ld	hl,_player_mana
1585  0523  7E          	ld	a, (hl)
1586  0524  C6 32       	add	a,0x32
1587  0526  77          	ld	(hl), a
1588  0527  3A 00 00    	ld	a,(_player_max_mana)
1589  052A  21 00 00    	ld	hl,_player_mana
1590  052D  96          	sub	a, (hl)
1591  052E  30 06       	jr	NC,l_player_collision_00122
1592  0530  3A 00 00    	ld	a,(_player_max_mana)
1593  0533  32 00 00    	ld	(_player_mana),a
1594  0536              l_player_collision_00122:
1595  0536  CD 6F 05    	call	_player_pick_mushroom
1596  0539  2E 00       	ld	l,0x00
1597  053B  18 2E       	jr	l_player_collision_00138
1598  053D              l_player_collision_00124:
1599  053D  3A 00 00    	ld	a,(_s_class)
1600  0540  D6 08       	sub	a,0x08
1601  0542  20 0A       	jr	NZ,l_player_collision_00126
1602  0544  CD 6F 05    	call	_player_pick_mushroom
1603  0547  CD 89 05    	call	_player_1up
1604  054A  2E 00       	ld	l,0x00
1605  054C  18 1D       	jr	l_player_collision_00138
1606  054E              l_player_collision_00126:
1607  054E  21 00 00    	ld	hl,_ay_effect_06
1608  0551  CD 00 00    	call	_ay_fx_play
1609  0554  2E 02       	ld	l,0x02
1610  0556  CD 00 00    	call	_zx_border_fastcall
1611  0559  2E 14       	ld	l,0x14
1612  055B  CD 10 12    	call	_player_hit
1613  055E  2E 01       	ld	l,0x01
1614  0560  18 09       	jr	l_player_collision_00138
1615  0562              l_player_collision_00132:
1616  0562  21 00 00    	ld	hl,_sprite
1617  0565  34          	inc	(hl)
1618  0566  C3 7F 04    	jp	l_player_collision_00133
1619  0569              l_player_collision_00137:
1620  0569  2E 00       	ld	l,0x00
1621  056B              l_player_collision_00138:
1622  056B  F1          	pop	af
1623  056C  DD E1       	pop	ix
1624  056E  C9          	ret
1625  056F              	SECTION code_compiler
1626  056F              ;	---------------------------------
1627  056F              ; Function player_pick_mushroom
1628  056F              ; ---------------------------------
1629  056F              _player_pick_mushroom:
1630  056F  21 00 00    	ld	hl,_ay_effect_12
1631  0572  CD 00 00    	call	_ay_fx_play
1632  0575  21 01 00    	ld	hl,0x0001
1633  0578  CD 6A 0C    	call	_player_score_add
1634  057B  CD 00 00    	call	_game_update_stats
1635  057E  2A 00 00    	ld	hl,(_sprite)
1636  0581  CD 00 00    	call	_spr_destroy
1637  0584  21 00 00    	ld	hl,_game_mush_count
1638  0587  35          	dec	(hl)
1639  0588  C9          	ret
1640  0589              	SECTION code_compiler
1641  0589              ;	---------------------------------
1642  0589              ; Function player_1up
1643  0589              ; ---------------------------------
1644  0589              _player_1up:
1645  0589  21 00 00    	ld	hl,_player_lives
1646  058C  7E          	ld	a, (hl)
1647  058D  D6 64       	sub	a,0x64
1648  058F  D0          	ret	NC
1649  0590  34          	inc	(hl)
1650  0591  CD 00 00    	call	_spr_flatten
1651  0594  21 00 00    	ld	hl,___str_0
1652  0597  E5          	push	hl
1653  0598  21 0C 0C    	ld	hl,0x0c0c
1654  059B  E5          	push	hl
1655  059C  CD 00 00    	call	_zx_print_str
1656  059F  AF          	xor	a, a
1657  05A0  F5          	push	af
1658  05A1  33          	inc	sp
1659  05A2  21 19 00    	ld	hl,0x0019
1660  05A5  E5          	push	hl
1661  05A6  21 0C 11    	ld	hl,0x110c
1662  05A9  E5          	push	hl
1663  05AA  3E 0C       	ld	a,0x0c
1664  05AC  F5          	push	af
1665  05AD  33          	inc	sp
1666  05AE  CD 00 00    	call	_game_colour_message
1667  05B1  F1          	pop	af
1668  05B2  F1          	pop	af
1669  05B3  F1          	pop	af
1670  05B4  CD 00 00    	call	_game_update_stats
1671  05B7  CD 00 00    	call	_spr_unflatten
1672  05BA  C9          	ret
1673  05BB              	SECTION rodata_compiler
1674  0000              ___str_0:
1675  0000  31 20 55 50 21 
                        	DEFM "1 UP!"
1676  0005  00          	DEFB 0x00
1677  0006              	SECTION code_compiler
1678  05BB              ;	---------------------------------
1679  05BB              ; Function player_check_stairs_vertical
1680  05BB              ; ---------------------------------
1681  05BB              _player_check_stairs_vertical:
1682  05BB  CD 00 00    	call	___sdcc_enter_ix
1683  05BE  3B          	dec	sp
1684  05BF  4D          	ld	c, l
1685  05C0  21 07 00    	ld	hl,+(_col + 0x0007)
1686  05C3  5E          	ld	e, (hl)
1687  05C4  CB 43       	bit	0, e
1688  05C6  20 2B       	jr	NZ,l_player_check_stairs_vertical_00102
1689  05C8  3A 07 00    	ld	a,(_lin + 0x0007)
1690  05CB  81          	add	a, c
1691  05CC  4F          	ld	c, a
1692  05CD  43          	ld	b, e
1693  05CE  C5          	push	bc
1694  05CF  CD 00 00    	call	_spr_calc_index
1695  05D2  F1          	pop	af
1696  05D3  7D          	ld	a,l
1697  05D4  32 00 00    	ld	(_sprite_curr_index),a
1698  05D7  4F          	ld	c,a
1699  05D8  06 00       	ld	b,0x00
1700  05DA  21 00 00    	ld	hl,_scr_map
1701  05DD  09          	add	hl,bc
1702  05DE  7E          	ld	a,(hl)
1703  05DF  4F          	ld	c,a
1704  05E0  D6 44       	sub	a,0x44
1705  05E2  38 05       	jr	C,l_player_check_stairs_vertical_00110
1706  05E4  3E 47       	ld	a,0x47
1707  05E6  91          	sub	a, c
1708  05E7  30 04       	jr	NC,l_player_check_stairs_vertical_00111
1709  05E9              l_player_check_stairs_vertical_00110:
1710  05E9  1E 00       	ld	e,0x00
1711  05EB  18 02       	jr	l_player_check_stairs_vertical_00112
1712  05ED              l_player_check_stairs_vertical_00111:
1713  05ED  1E 01       	ld	e,0x01
1714  05EF              l_player_check_stairs_vertical_00112:
1715  05EF  0E 00       	ld	c,0x00
1716  05F1  18 52       	jr	l_player_check_stairs_vertical_00103
1717  05F3              l_player_check_stairs_vertical_00102:
1718  05F3  7B          	ld	a, e
1719  05F4  91          	sub	a, c
1720  05F5  57          	ld	d, a
1721  05F6  3A 07 00    	ld	a,(_lin + 0x0007)
1722  05F9  81          	add	a, c
1723  05FA  47          	ld	b, a
1724  05FB  C5          	push	bc
1725  05FC  58          	ld	e,b
1726  05FD  D5          	push	de
1727  05FE  CD 00 00    	call	_spr_calc_index
1728  0601  F1          	pop	af
1729  0602  C1          	pop	bc
1730  0603  7D          	ld	a,l
1731  0604  32 00 00    	ld	(_sprite_curr_index),a
1732  0607  5F          	ld	e,a
1733  0608  16 00       	ld	d,0x00
1734  060A  21 00 00    	ld	hl,_scr_map
1735  060D  19          	add	hl,de
1736  060E  7E          	ld	a,(hl)
1737  060F  47          	ld	b,a
1738  0610  D6 44       	sub	a,0x44
1739  0612  38 05       	jr	C,l_player_check_stairs_vertical_00113
1740  0614  3E 47       	ld	a,0x47
1741  0616  90          	sub	a, b
1742  0617  30 04       	jr	NC,l_player_check_stairs_vertical_00114
1743  0619              l_player_check_stairs_vertical_00113:
1744  0619  1E 00       	ld	e,0x00
1745  061B  18 02       	jr	l_player_check_stairs_vertical_00115
1746  061D              l_player_check_stairs_vertical_00114:
1747  061D  1E 01       	ld	e,0x01
1748  061F              l_player_check_stairs_vertical_00115:
1749  061F  3A 07 00    	ld	a,(_col + 0x0007)
1750  0622  91          	sub	a, c
1751  0623  47          	ld	b, a
1752  0624  3A 07 00    	ld	a,(_lin + 0x0007)
1753  0627  81          	add	a, c
1754  0628  57          	ld	d, a
1755  0629  D5          	push	de
1756  062A  4A          	ld	c, d
1757  062B  C5          	push	bc
1758  062C  CD 00 00    	call	_spr_calc_index
1759  062F  F1          	pop	af
1760  0630  D1          	pop	de
1761  0631  7D          	ld	a,l
1762  0632  32 00 00    	ld	(_sprite_curr_index),a
1763  0635  7B          	ld	a, e
1764  0636  D6 44       	sub	a,0x44
1765  0638  38 05       	jr	C,l_player_check_stairs_vertical_00116
1766  063A  3E 47       	ld	a,0x47
1767  063C  93          	sub	a, e
1768  063D  30 04       	jr	NC,l_player_check_stairs_vertical_00117
1769  063F              l_player_check_stairs_vertical_00116:
1770  063F  0E 00       	ld	c,0x00
1771  0641  18 02       	jr	l_player_check_stairs_vertical_00118
1772  0643              l_player_check_stairs_vertical_00117:
1773  0643  0E 01       	ld	c,0x01
1774  0645              l_player_check_stairs_vertical_00118:
1775  0645              l_player_check_stairs_vertical_00103:
1776  0645  7B          	ld	a, e
1777  0646  B7          	or	a,a
1778  0647  20 03       	jr	NZ,l_player_check_stairs_vertical_00104
1779  0649  B1          	or	a,c
1780  064A  28 07       	jr	Z,l_player_check_stairs_vertical_00105
1781  064C              l_player_check_stairs_vertical_00104:
1782  064C  21 00 00    	ld	hl,_player_onstair
1783  064F  36 01       	ld	(hl),0x01
1784  0651  18 05       	jr	l_player_check_stairs_vertical_00108
1785  0653              l_player_check_stairs_vertical_00105:
1786  0653  21 00 00    	ld	hl,_player_onstair
1787  0656  36 00       	ld	(hl),0x00
1788  0658              l_player_check_stairs_vertical_00108:
1789  0658  33          	inc	sp
1790  0659  DD E1       	pop	ix
1791  065B  C9          	ret
1792  065C              	SECTION code_compiler
1793  065C              ;	---------------------------------
1794  065C              ; Function player_check_stairs
1795  065C              ; ---------------------------------
1796  065C              _player_check_stairs:
1797  065C  CD 00 00    	call	___sdcc_enter_ix
1798  065F  3B          	dec	sp
1799  0660  5D          	ld	e, l
1800  0661  3A 07 00    	ld	a,(_col + 0x0007)
1801  0664  83          	add	a, e
1802  0665  4F          	ld	c, a
1803  0666  21 07 00    	ld	hl,+(_lin + 0x0007)
1804  0669  46          	ld	b, (hl)
1805  066A  D5          	push	de
1806  066B  79          	ld	a, c
1807  066C  48          	ld	c,b
1808  066D  47          	ld	b,a
1809  066E  C5          	push	bc
1810  066F  CD 00 00    	call	_spr_calc_index
1811  0672  F1          	pop	af
1812  0673  D1          	pop	de
1813  0674  7D          	ld	a,l
1814  0675  32 00 00    	ld	(_sprite_curr_index),a
1815  0678  4F          	ld	c,a
1816  0679  06 00       	ld	b,0x00
1817  067B  21 00 00    	ld	hl,_scr_map
1818  067E  09          	add	hl,bc
1819  067F  7E          	ld	a,(hl)
1820  0680  4F          	ld	c,a
1821  0681  D6 44       	sub	a,0x44
1822  0683  38 05       	jr	C,l_player_check_stairs_00111
1823  0685  3E 47       	ld	a,0x47
1824  0687  91          	sub	a, c
1825  0688  30 04       	jr	NC,l_player_check_stairs_00112
1826  068A              l_player_check_stairs_00111:
1827  068A  0E 00       	ld	c,0x00
1828  068C  18 02       	jr	l_player_check_stairs_00113
1829  068E              l_player_check_stairs_00112:
1830  068E  0E 01       	ld	c,0x01
1831  0690              l_player_check_stairs_00113:
1832  0690  3A 07 00    	ld	a,(_col + 0x0007)
1833  0693  83          	add	a, e
1834  0694  57          	ld	d, a
1835  0695  3A 07 00    	ld	a,(_lin + 0x0007)
1836  0698  C6 0F       	add	a,0x0f
1837  069A  47          	ld	b, a
1838  069B  C5          	push	bc
1839  069C  58          	ld	e,b
1840  069D  D5          	push	de
1841  069E  CD 00 00    	call	_spr_calc_index
1842  06A1  F1          	pop	af
1843  06A2  C1          	pop	bc
1844  06A3  7D          	ld	a,l
1845  06A4  32 00 00    	ld	(_sprite_curr_index),a
1846  06A7  5F          	ld	e,a
1847  06A8  16 00       	ld	d,0x00
1848  06AA  21 00 00    	ld	hl,_scr_map
1849  06AD  19          	add	hl,de
1850  06AE  7E          	ld	a,(hl)
1851  06AF  47          	ld	b,a
1852  06B0  D6 44       	sub	a,0x44
1853  06B2  38 05       	jr	C,l_player_check_stairs_00114
1854  06B4  3E 47       	ld	a,0x47
1855  06B6  90          	sub	a, b
1856  06B7  30 04       	jr	NC,l_player_check_stairs_00115
1857  06B9              l_player_check_stairs_00114:
1858  06B9  06 00       	ld	b,0x00
1859  06BB  18 02       	jr	l_player_check_stairs_00116
1860  06BD              l_player_check_stairs_00115:
1861  06BD  06 01       	ld	b,0x01
1862  06BF              l_player_check_stairs_00116:
1863  06BF  79          	ld	a, c
1864  06C0  B7          	or	a,a
1865  06C1  20 03       	jr	NZ,l_player_check_stairs_00105
1866  06C3  B0          	or	a,b
1867  06C4  28 13       	jr	Z,l_player_check_stairs_00106
1868  06C6              l_player_check_stairs_00105:
1869  06C6  21 00 00    	ld	hl,_player_onstair
1870  06C9  7E          	ld	a, (hl)
1871  06CA  B7          	or	a, a
1872  06CB  20 1D       	jr	NZ,l_player_check_stairs_00109
1873  06CD  36 01       	ld	(hl),0x01
1874  06CF  21 72 00    	ld	hl,0x0072
1875  06D2  E5          	push	hl
1876  06D3  CD 32 07    	call	_player_tile
1877  06D6  F1          	pop	af
1878  06D7  18 11       	jr	l_player_check_stairs_00109
1879  06D9              l_player_check_stairs_00106:
1880  06D9  21 00 00    	ld	hl,_player_onstair
1881  06DC  7E          	ld	a, (hl)
1882  06DD  B7          	or	a, a
1883  06DE  28 0A       	jr	Z,l_player_check_stairs_00109
1884  06E0  36 00       	ld	(hl),0x00
1885  06E2  21 60 08    	ld	hl,0x0860
1886  06E5  E5          	push	hl
1887  06E6  CD 32 07    	call	_player_tile
1888  06E9  F1          	pop	af
1889  06EA              l_player_check_stairs_00109:
1890  06EA  33          	inc	sp
1891  06EB  DD E1       	pop	ix
1892  06ED  C9          	ret
1893  06EE              	SECTION code_compiler
1894  06EE              ;	---------------------------------
1895  06EE              ; Function player_anim_tile
1896  06EE              ; ---------------------------------
1897  06EE              _player_anim_tile:
1898  06EE  21 07 00    	ld	hl,+(_tile + 0x0007)
1899  06F1  4E          	ld	c, (hl)
1900  06F2  21 07 00    	ld	hl,+(_colint + 0x0007)
1901  06F5  46          	ld	b, (hl)
1902  06F6  79          	ld	a, c
1903  06F7  80          	add	a, b
1904  06F8  32 00 00    	ld	(_s_tile1),a
1905  06FB  3A 00 00    	ld	a,(_player_onstair)
1906  06FE  B7          	or	a, a
1907  06FF  28 17       	jr	Z,l_player_anim_tile_00109
1908  0701  21 00 00    	ld	hl,_player_anim_stair
1909  0704  34          	inc	(hl)
1910  0705  3E 01       	ld	a,0x01
1911  0707  96          	sub	a, (hl)
1912  0708  30 02       	jr	NC,l_player_anim_tile_00102
1913  070A  36 00       	ld	(hl),0x00
1914  070C              l_player_anim_tile_00102:
1915  070C  79          	ld	a, c
1916  070D  21 00 00    	ld	hl,_player_anim_stair
1917  0710  86          	add	a, (hl)
1918  0711  C6 04       	add	a,0x04
1919  0713  32 00 00    	ld	(_s_tile1),a
1920  0716  18 19       	jr	l_player_anim_tile_00111
1921  0718              l_player_anim_tile_00109:
1922  0718  3A 00 00    	ld	a,(_player_onfire)
1923  071B  B7          	or	a, a
1924  071C  28 13       	jr	Z,l_player_anim_tile_00111
1925  071E  21 00 00    	ld	hl,_s_state
1926  0721  CB 56       	bit	2, (hl)
1927  0723  28 07       	jr	Z,l_player_anim_tile_00104
1928  0725  21 00 00    	ld	hl,_s_tile1
1929  0728  36 60       	ld	(hl),0x60
1930  072A  18 05       	jr	l_player_anim_tile_00111
1931  072C              l_player_anim_tile_00104:
1932  072C  21 00 00    	ld	hl,_s_tile1
1933  072F  36 68       	ld	(hl),0x68
1934  0731              l_player_anim_tile_00111:
1935  0731  C9          	ret
1936  0732              	SECTION code_compiler
1937  0732              ;	---------------------------------
1938  0732              ; Function player_tile
1939  0732              ; ---------------------------------
1940  0732              _player_tile:
1941  0732  CD 00 00    	call	___sdcc_enter_ix
1942  0735  21 05 00    	ld	hl,0x0005
1943  0738  39          	add	hl, sp
1944  0739  EB          	ex	de,hl
1945  073A  21 04 00    	ld	hl,0x0004
1946  073D  39          	add	hl, sp
1947  073E  4D          	ld	c, l
1948  073F  44          	ld	b, h
1949  0740  D5          	push	de
1950  0741  21 00 00    	ld	hl,_sprite
1951  0744  E5          	push	hl
1952  0745  C5          	push	bc
1953  0746  CD 00 00    	call	_spr_tile_dir
1954  0749  F1          	pop	af
1955  074A  F1          	pop	af
1956  074B  F1          	pop	af
1957  074C  7D          	ld	a,l
1958  074D  32 07 00    	ld	((_tile + 0x0007)),a
1959  0750  DD E1       	pop	ix
1960  0752  C9          	ret
1961  0753              	SECTION code_compiler
1962  0753              ;	---------------------------------
1963  0753              ; Function player_check_map
1964  0753              ; ---------------------------------
1965  0753              _player_check_map:
1966  0753  21 07 00    	ld	hl,+(_col + 0x0007)
1967  0756  46          	ld	b, (hl)
1968  0757  21 07 00    	ld	hl,+(_lin + 0x0007)
1969  075A  4E          	ld	c, (hl)
1970  075B  C5          	push	bc
1971  075C  CD 00 00    	call	_spr_calc_index
1972  075F  F1          	pop	af
1973  0760  7D          	ld	a,l
1974  0761  32 00 00    	ld	(_sprite_curr_index),a
1975  0764  21 07 00    	ld	hl,+(_col + 0x0007)
1976  0767  4E          	ld	c, (hl)
1977  0768  3A 07 00    	ld	a,(_lin + 0x0007)
1978  076B  E6 0F       	and	a,0x0f
1979  076D  CB 41       	bit	0, c
1980  076F  20 17       	jr	NZ,l_player_check_map_00108
1981  0771  B7          	or	a, a
1982  0772  20 05       	jr	NZ,l_player_check_map_00102
1983  0774  CD B3 07    	call	_player_pick_item
1984  0777  18 39       	jr	l_player_check_map_00110
1985  0779              l_player_check_map_00102:
1986  0779  CD B3 07    	call	_player_pick_item
1987  077C  21 00 00    	ld	hl,_sprite_curr_index
1988  077F  7E          	ld	a, (hl)
1989  0780  C6 10       	add	a,0x10
1990  0782  77          	ld	(hl), a
1991  0783  CD B3 07    	call	_player_pick_item
1992  0786  18 2A       	jr	l_player_check_map_00110
1993  0788              l_player_check_map_00108:
1994  0788  B7          	or	a, a
1995  0789  20 0C       	jr	NZ,l_player_check_map_00105
1996  078B  CD B3 07    	call	_player_pick_item
1997  078E  21 00 00    	ld	hl,_sprite_curr_index
1998  0791  34          	inc	(hl)
1999  0792  CD B3 07    	call	_player_pick_item
2000  0795  18 1B       	jr	l_player_check_map_00110
2001  0797              l_player_check_map_00105:
2002  0797  CD B3 07    	call	_player_pick_item
2003  079A  21 00 00    	ld	hl,_sprite_curr_index
2004  079D  34          	inc	(hl)
2005  079E  CD B3 07    	call	_player_pick_item
2006  07A1  21 00 00    	ld	hl,_sprite_curr_index
2007  07A4  7E          	ld	a, (hl)
2008  07A5  C6 0F       	add	a,0x0f
2009  07A7  77          	ld	(hl), a
2010  07A8  CD B3 07    	call	_player_pick_item
2011  07AB  21 00 00    	ld	hl,_sprite_curr_index
2012  07AE  34          	inc	(hl)
2013  07AF  CD B3 07    	call	_player_pick_item
2014  07B2              l_player_check_map_00110:
2015  07B2  C9          	ret
2016  07B3              	SECTION code_compiler
2017  07B3              ;	---------------------------------
2018  07B3              ; Function player_pick_item
2019  07B3              ; ---------------------------------
2020  07B3              _player_pick_item:
2021  07B3  CD 00 00    	call	___sdcc_enter_ix
2022  07B6  3B          	dec	sp
2023  07B7  2A 00 00    	ld	hl,(_sprite_curr_index)
2024  07BA  26 00       	ld	h,0x00
2025  07BC  01 00 00    	ld	bc,_scr_map
2026  07BF  09          	add	hl,bc
2027  07C0  7E          	ld	a,(hl)
2028  07C1  DD 77 FF    	ld	(ix-1),a
2029  07C4  D6 24       	sub	a,0x24
2030  07C6  DA 81 09    	jp	C, l_player_pick_item_00131
2031  07C9  3E 2F       	ld	a,0x2f
2032  07CB  DD 96 FF    	sub	a,(ix-1)
2033  07CE  DA 81 09    	jp	C, l_player_pick_item_00131
2034  07D1  CD 00 00    	call	_ay_reset
2035  07D4  2A 00 00    	ld	hl,(_sprite_curr_index)
2036  07D7  26 00       	ld	h,0x00
2037  07D9  01 00 00    	ld	bc,_scr_map
2038  07DC  09          	add	hl,bc
2039  07DD  4D          	ld	c,l
2040  07DE  44          	ld	b,h
2041  07DF  21 00 00    	ld	hl,_sprite_curr_index
2042  07E2  5E          	ld	e, (hl)
2043  07E3  16 00       	ld	d,0x00
2044  07E5  C5          	push	bc
2045  07E6  EB          	ex	de,hl
2046  07E7  CD 00 00    	call	_game_match_back
2047  07EA  C1          	pop	bc
2048  07EB  7D          	ld	a,l
2049  07EC  02          	ld	(bc), a
2050  07ED  2A 00 00    	ld	hl,(_sprite_curr_index)
2051  07F0  26 00       	ld	h,0x00
2052  07F2  CD 00 00    	call	_game_obj_set
2053  07F5  3A 00 00    	ld	a,(_sprite_curr_index)
2054  07F8  07          	rlca
2055  07F9  07          	rlca
2056  07FA  07          	rlca
2057  07FB  07          	rlca
2058  07FC  E6 0F       	and	a,0x0f
2059  07FE  07          	rlca
2060  07FF  07          	rlca
2061  0800  07          	rlca
2062  0801  07          	rlca
2063  0802  E6 F0       	and	a,0xf0
2064  0804  32 00 00    	ld	(_s_lin1),a
2065  0807  3A 00 00    	ld	a,(_sprite_curr_index)
2066  080A  E6 0F       	and	a,0x0f
2067  080C  87          	add	a, a
2068  080D  32 00 00    	ld	(_s_col1),a
2069  0810  21 00 00    	ld	hl,0x0000
2070  0813  E5          	push	hl
2071  0814  21 84 03    	ld	hl,0x0384
2072  0817  E5          	push	hl
2073  0818  F5          	push	af
2074  0819  33          	inc	sp
2075  081A  3A 00 00    	ld	a,(_s_lin1)
2076  081D  F5          	push	af
2077  081E  33          	inc	sp
2078  081F  CD 00 00    	call	_spr_add_anim
2079  0822  F1          	pop	af
2080  0823  F1          	pop	af
2081  0824  F1          	pop	af
2082  0825  DD 7E FF    	ld	a,(ix-1)
2083  0828  D6 24       	sub	a,0x24
2084  082A  DA 81 09    	jp	C, l_player_pick_item_00131
2085  082D  3E 2F       	ld	a,0x2f
2086  082F  DD 96 FF    	sub	a,(ix-1)
2087  0832  DA 81 09    	jp	C, l_player_pick_item_00131
2088  0835  DD 7E FF    	ld	a,(ix-1)
2089  0838  C6 DC       	add	a,0xdc
2090  083A  4F          	ld	c, a
2091  083B  06 00       	ld	b,0x00
2092  083D  21 44 08    	ld	hl,l_player_pick_item_00177
2093  0840  09          	add	hl, bc
2094  0841  09          	add	hl, bc
2095  0842  09          	add	hl, bc
2096  0843  E9          	jp	(hl)
2097  0844              l_player_pick_item_00177:
2098  0844  C3 68 08    	jp	l_player_pick_item_00101
2099  0847  C3 79 08    	jp	l_player_pick_item_00102
2100  084A  C3 8A 08    	jp	l_player_pick_item_00103
2101  084D  C3 9B 08    	jp	l_player_pick_item_00104
2102  0850  C3 AC 08    	jp	l_player_pick_item_00105
2103  0853  C3 DF 08    	jp	l_player_pick_item_00109
2104  0856  C3 FC 08    	jp	l_player_pick_item_00112
2105  0859  C3 17 09    	jp	l_player_pick_item_00115
2106  085C  C3 32 09    	jp	l_player_pick_item_00118
2107  085F  C3 4D 09    	jp	l_player_pick_item_00121
2108  0862  C3 68 09    	jp	l_player_pick_item_00124
2109  0865  C3 D0 08    	jp	l_player_pick_item_00108
2110  0868              l_player_pick_item_00101:
2111  0868  21 00 00    	ld	hl,_ay_effect_09
2112  086B  CD 00 00    	call	_ay_fx_play
2113  086E  21 00 00    	ld	hl,_player_keys
2114  0871  36 01       	ld	(hl),0x01
2115  0873  CD 00 00    	call	_game_update_stats
2116  0876  C3 81 09    	jp	l_player_pick_item_00131
2117  0879              l_player_pick_item_00102:
2118  0879  21 00 00    	ld	hl,_ay_effect_09
2119  087C  CD 00 00    	call	_ay_fx_play
2120  087F  21 01 00    	ld	hl, +(_player_keys + 0x0001)
2121  0882  36 01       	ld	(hl),0x01
2122  0884  CD 00 00    	call	_game_update_stats
2123  0887  C3 81 09    	jp	l_player_pick_item_00131
2124  088A              l_player_pick_item_00103:
2125  088A  21 00 00    	ld	hl,_ay_effect_09
2126  088D  CD 00 00    	call	_ay_fx_play
2127  0890  21 02 00    	ld	hl, +(_player_keys + 0x0002)
2128  0893  36 01       	ld	(hl),0x01
2129  0895  CD 00 00    	call	_game_update_stats
2130  0898  C3 81 09    	jp	l_player_pick_item_00131
2131  089B              l_player_pick_item_00104:
2132  089B  21 00 00    	ld	hl,_ay_effect_09
2133  089E  CD 00 00    	call	_ay_fx_play
2134  08A1  21 03 00    	ld	hl, +(_player_keys + 0x0003)
2135  08A4  36 01       	ld	(hl),0x01
2136  08A6  CD 00 00    	call	_game_update_stats
2137  08A9  C3 81 09    	jp	l_player_pick_item_00131
2138  08AC              l_player_pick_item_00105:
2139  08AC  21 00 00    	ld	hl,_ay_effect_10
2140  08AF  CD 00 00    	call	_ay_fx_play
2141  08B2  21 01 00    	ld	hl,0x0001
2142  08B5  CD 6A 0C    	call	_player_score_add
2143  08B8  21 00 00    	ld	hl,_player_coins
2144  08BB  7E          	ld	a,(hl)
2145  08BC  3C          	inc	a
2146  08BD  77          	ld	(hl),a
2147  08BE  D6 64       	sub	a,0x64
2148  08C0  20 08       	jr	NZ,l_player_pick_item_00107
2149  08C2  CD 89 05    	call	_player_1up
2150  08C5  21 00 00    	ld	hl,_player_coins
2151  08C8  36 00       	ld	(hl),0x00
2152  08CA              l_player_pick_item_00107:
2153  08CA  CD 00 00    	call	_game_update_stats
2154  08CD  C3 81 09    	jp	l_player_pick_item_00131
2155  08D0              l_player_pick_item_00108:
2156  08D0  21 00 00    	ld	hl,_ay_effect_10
2157  08D3  CD 00 00    	call	_ay_fx_play
2158  08D6  21 0A 00    	ld	hl,0x000a
2159  08D9  CD 6A 0C    	call	_player_score_add
2160  08DC  C3 81 09    	jp	l_player_pick_item_00131
2161  08DF              l_player_pick_item_00109:
2162  08DF  21 00 00    	ld	hl,_ay_effect_09
2163  08E2  CD 00 00    	call	_ay_fx_play
2164  08E5  21 00 00    	ld	hl,_player_str
2165  08E8  34          	inc	(hl)
2166  08E9  21 00 00    	ld	hl,_player_max_vita
2167  08EC  7E          	ld	a, (hl)
2168  08ED  D6 C8       	sub	a,0xc8
2169  08EF  D2 81 09    	jp	NC, l_player_pick_item_00131
2170  08F2  7E          	ld	a, (hl)
2171  08F3  C6 0A       	add	a,0x0a
2172  08F5  77          	ld	(hl), a
2173  08F6  CD 00 00    	call	_game_update_stats
2174  08F9  C3 81 09    	jp	l_player_pick_item_00131
2175  08FC              l_player_pick_item_00112:
2176  08FC  21 00 00    	ld	hl,_ay_effect_09
2177  08FF  CD 00 00    	call	_ay_fx_play
2178  0902  21 00 00    	ld	hl,_player_str
2179  0905  34          	inc	(hl)
2180  0906  21 00 00    	ld	hl,_player_max_vita
2181  0909  7E          	ld	a, (hl)
2182  090A  D6 C8       	sub	a,0xc8
2183  090C  30 73       	jr	NC,l_player_pick_item_00131
2184  090E  7E          	ld	a, (hl)
2185  090F  C6 0A       	add	a,0x0a
2186  0911  77          	ld	(hl), a
2187  0912  CD 00 00    	call	_game_update_stats
2188  0915  18 6A       	jr	l_player_pick_item_00131
2189  0917              l_player_pick_item_00115:
2190  0917  21 00 00    	ld	hl,_ay_effect_09
2191  091A  CD 00 00    	call	_ay_fx_play
2192  091D  21 00 00    	ld	hl,_player_str
2193  0920  34          	inc	(hl)
2194  0921  21 00 00    	ld	hl,_player_max_vita
2195  0924  7E          	ld	a, (hl)
2196  0925  D6 C8       	sub	a,0xc8
2197  0927  30 58       	jr	NC,l_player_pick_item_00131
2198  0929  7E          	ld	a, (hl)
2199  092A  C6 0A       	add	a,0x0a
2200  092C  77          	ld	(hl), a
2201  092D  CD 00 00    	call	_game_update_stats
2202  0930  18 4F       	jr	l_player_pick_item_00131
2203  0932              l_player_pick_item_00118:
2204  0932  21 00 00    	ld	hl,_ay_effect_09
2205  0935  CD 00 00    	call	_ay_fx_play
2206  0938  21 00 00    	ld	hl,_player_int
2207  093B  34          	inc	(hl)
2208  093C  21 00 00    	ld	hl,_player_max_mana
2209  093F  7E          	ld	a, (hl)
2210  0940  D6 C8       	sub	a,0xc8
2211  0942  30 3D       	jr	NC,l_player_pick_item_00131
2212  0944  7E          	ld	a, (hl)
2213  0945  C6 0A       	add	a,0x0a
2214  0947  77          	ld	(hl), a
2215  0948  CD 00 00    	call	_game_update_stats
2216  094B  18 34       	jr	l_player_pick_item_00131
2217  094D              l_player_pick_item_00121:
2218  094D  21 00 00    	ld	hl,_ay_effect_09
2219  0950  CD 00 00    	call	_ay_fx_play
2220  0953  21 00 00    	ld	hl,_player_int
2221  0956  34          	inc	(hl)
2222  0957  21 00 00    	ld	hl,_player_max_mana
2223  095A  7E          	ld	a, (hl)
2224  095B  D6 C8       	sub	a,0xc8
2225  095D  30 22       	jr	NC,l_player_pick_item_00131
2226  095F  7E          	ld	a, (hl)
2227  0960  C6 0A       	add	a,0x0a
2228  0962  77          	ld	(hl), a
2229  0963  CD 00 00    	call	_game_update_stats
2230  0966  18 19       	jr	l_player_pick_item_00131
2231  0968              l_player_pick_item_00124:
2232  0968  21 00 00    	ld	hl,_ay_effect_09
2233  096B  CD 00 00    	call	_ay_fx_play
2234  096E  21 00 00    	ld	hl,_player_int
2235  0971  34          	inc	(hl)
2236  0972  21 00 00    	ld	hl,_player_max_mana
2237  0975  7E          	ld	a, (hl)
2238  0976  D6 C8       	sub	a,0xc8
2239  0978  30 07       	jr	NC,l_player_pick_item_00131
2240  097A  7E          	ld	a, (hl)
2241  097B  C6 0A       	add	a,0x0a
2242  097D  77          	ld	(hl), a
2243  097E  CD 00 00    	call	_game_update_stats
2244  0981              l_player_pick_item_00131:
2245  0981  33          	inc	sp
2246  0982  DD E1       	pop	ix
2247  0984  C9          	ret
2248  0985              	SECTION code_compiler
2249  0985              ;	---------------------------------
2250  0985              ; Function player_hit_platform
2251  0985              ; ---------------------------------
2252  0985              _player_hit_platform:
2253  0985  CD 00 00    	call	___sdcc_enter_ix
2254  0988  F5          	push	af
2255  0989  3B          	dec	sp
2256  098A  3A 00 00    	ld	a,(_player_hit_lin)
2257  098D  B7          	or	a, a
2258  098E  C2 34 0C    	jp	NZ, l_player_hit_platform_00145
2259  0991  21 07 00    	ld	hl,+(_lin + 0x0007)
2260  0994  4E          	ld	c, (hl)
2261  0995  3E 10       	ld	a,0x10
2262  0997  91          	sub	a, c
2263  0998  D2 34 0C    	jp	NC, l_player_hit_platform_00145
2264  099B  01 00 00    	ld	bc,_scr_map
2265  099E  2A 00 00    	ld	hl,(_index1)
2266  09A1  09          	add	hl,bc
2267  09A2  7E          	ld	a,(hl)
2268  09A3  D6 45       	sub	a,0x45
2269  09A5  DA 34 0C    	jp	C, l_player_hit_platform_00145
2270  09A8  2A 00 00    	ld	hl,(_curr_time)
2271  09AB  22 0E 00    	ld	(_spr_timer + 0x000e),hl
2272  09AE  2A 07 00    	ld	hl,(_lin + 0x0007)
2273  09B1  26 00       	ld	h,0x00
2274  09B3  01 F8 FF    	ld	bc,0xfff8
2275  09B6  09          	add	hl,bc
2276  09B7  EB          	ex	de,hl
2277  09B8  06 04       	ld	b,0x04
2278  09BA              l_player_hit_platform_00252:
2279  09BA  CB 2A       	sra	d
2280  09BC  CB 1B       	rr	e
2281  09BE  10 FA       	djnz	l_player_hit_platform_00252
2282  09C0  7B          	ld	a, e
2283  09C1  07          	rlca
2284  09C2  07          	rlca
2285  09C3  07          	rlca
2286  09C4  07          	rlca
2287  09C5  E6 F0       	and	a,0xf0
2288  09C7  C6 08       	add	a,0x08
2289  09C9  32 00 00    	ld	(_player_hit_lin),a
2290  09CC  21 07 00    	ld	hl,+(_col + 0x0007)
2291  09CF  4E          	ld	c, (hl)
2292  09D0  CB 41       	bit	0, c
2293  09D2  20 06       	jr	NZ,l_player_hit_platform_00111
2294  09D4  21 00 00    	ld	hl,_player_hit_col
2295  09D7  71          	ld	(hl), c
2296  09D8  18 2D       	jr	l_player_hit_platform_00112
2297  09DA              l_player_hit_platform_00111:
2298  09DA  21 07 00    	ld	hl,+(_state + 0x0007)
2299  09DD  5E          	ld	e, (hl)
2300  09DE  41          	ld	b, c
2301  09DF  04          	inc	b
2302  09E0  0D          	dec	c
2303  09E1  CB 5B       	bit	3, e
2304  09E3  28 12       	jr	Z,l_player_hit_platform_00108
2305  09E5  3A 00 00    	ld	a,(_g_player_hit_right)
2306  09E8  B7          	or	a, a
2307  09E9  28 06       	jr	Z,l_player_hit_platform_00102
2308  09EB  21 00 00    	ld	hl,_player_hit_col
2309  09EE  70          	ld	(hl), b
2310  09EF  18 16       	jr	l_player_hit_platform_00112
2311  09F1              l_player_hit_platform_00102:
2312  09F1  21 00 00    	ld	hl,_player_hit_col
2313  09F4  71          	ld	(hl), c
2314  09F5  18 10       	jr	l_player_hit_platform_00112
2315  09F7              l_player_hit_platform_00108:
2316  09F7  3A 00 00    	ld	a,(_g_player_hit_left)
2317  09FA  B7          	or	a, a
2318  09FB  28 06       	jr	Z,l_player_hit_platform_00105
2319  09FD  21 00 00    	ld	hl,_player_hit_col
2320  0A00  71          	ld	(hl), c
2321  0A01  18 04       	jr	l_player_hit_platform_00112
2322  0A03              l_player_hit_platform_00105:
2323  0A03  21 00 00    	ld	hl,_player_hit_col
2324  0A06  70          	ld	(hl), b
2325  0A07              l_player_hit_platform_00112:
2326  0A07  2A 00 00    	ld	hl,(_index1)
2327  0A0A  01 00 00    	ld	bc,_scr_map
2328  0A0D  09          	add	hl,bc
2329  0A0E  7E          	ld	a,(hl)
2330  0A0F  FE 4D       	cp	a,0x4d
2331  0A11  20 41       	jr	NZ,l_player_hit_platform_00114
2332  0A13  E5          	push	hl
2333  0A14  2A 00 00    	ld	hl,(_index1)
2334  0A17  CD 00 00    	call	_game_match_back
2335  0A1A  C1          	pop	bc
2336  0A1B  7D          	ld	a,l
2337  0A1C  02          	ld	(bc), a
2338  0A1D  2A 00 00    	ld	hl,(_index1)
2339  0A20  CD 00 00    	call	_game_obj_set
2340  0A23  21 00 00    	ld	hl,_index1
2341  0A26  7E          	ld	a, (hl)
2342  0A27  E6 0F       	and	a,0x0f
2343  0A29  87          	add	a, a
2344  0A2A  4F          	ld	c, a
2345  0A2B  23          	inc	hl
2346  0A2C  56          	ld	d,(hl)
2347  0A2D  2B          	dec	hl
2348  0A2E  7E          	ld	a, (hl)
2349  0A2F  06 04       	ld	b,0x04
2350  0A31              l_player_hit_platform_00258:
2351  0A31  CB 3A       	srl	d
2352  0A33  1F          	rra
2353  0A34  10 FB       	djnz	l_player_hit_platform_00258
2354  0A36  07          	rlca
2355  0A37  07          	rlca
2356  0A38  07          	rlca
2357  0A39  07          	rlca
2358  0A3A  E6 F0       	and	a,0xf0
2359  0A3C  47          	ld	b, a
2360  0A3D  21 00 00    	ld	hl,0x0000
2361  0A40  E5          	push	hl
2362  0A41  21 87 03    	ld	hl,0x0387
2363  0A44  E5          	push	hl
2364  0A45  79          	ld	a, c
2365  0A46  48          	ld	c,b
2366  0A47  47          	ld	b,a
2367  0A48  C5          	push	bc
2368  0A49  CD 00 00    	call	_spr_add_anim
2369  0A4C  F1          	pop	af
2370  0A4D  F1          	pop	af
2371  0A4E  F1          	pop	af
2372  0A4F  2E 01       	ld	l,0x01
2373  0A51  C3 36 0C    	jp	l_player_hit_platform_00148
2374  0A54              l_player_hit_platform_00114:
2375  0A54  FE 5A       	cp	a,0x5a
2376  0A56  28 05       	jr	Z,l_player_hit_platform_00141
2377  0A58  D6 5D       	sub	a,0x5d
2378  0A5A  C2 25 0C    	jp	NZ,l_player_hit_platform_00142
2379  0A5D              l_player_hit_platform_00141:
2380  0A5D  3A 00 00    	ld	a,(_game_boss)
2381  0A60  B7          	or	a, a
2382  0A61  28 0B       	jr	Z,l_player_hit_platform_00174
2383  0A63  3A 00 00    	ld	a,(_game_mush_count)
2384  0A66  B7          	or	a, a
2385  0A67  28 05       	jr	Z,l_player_hit_platform_00174
2386  0A69  2E 00       	ld	l,0x00
2387  0A6B  C3 36 0C    	jp	l_player_hit_platform_00148
2388  0A6E              l_player_hit_platform_00174:
2389  0A6E  DD 36 FD 00 	ld	(ix-3),0x00
2390  0A72              l_player_hit_platform_00138:
2391  0A72  DD 7E FD    	ld	a,(ix-3)
2392  0A75  D6 07       	sub	a,0x07
2393  0A77  D2 25 0C    	jp	NC, l_player_hit_platform_00142
2394  0A7A  01 00 00    	ld	bc,_mush_index
2395  0A7D  DD 6E FD    	ld	l,(ix-3)
2396  0A80  26 00       	ld	h,0x00
2397  0A82  09          	add	hl,bc
2398  0A83  DD 75 FE    	ld	(ix-2),l
2399  0A86  DD 74 FF    	ld	(ix-1),h
2400  0A89  7E          	ld	a, (hl)
2401  0A8A  DD 77 FE    	ld	(ix-2),a
2402  0A8D  DD 36 FF 00 	ld	(ix-1),0x00
2403  0A91  21 00 00    	ld	hl,_index1
2404  0A94  7E          	ld	a, (hl)
2405  0A95  DD 96 FE    	sub	a,(ix-2)
2406  0A98  C2 1F 0C    	jp	NZ,l_player_hit_platform_00137
2407  0A9B  23          	inc	hl
2408  0A9C  7E          	ld	a, (hl)
2409  0A9D  DD 96 FF    	sub	a,(ix-1)
2410  0AA0  C2 1F 0C    	jp	NZ,l_player_hit_platform_00137
2411  0AA3  3A 07 00    	ld	a,(_lin + 0x0007)
2412  0AA6  07          	rlca
2413  0AA7  07          	rlca
2414  0AA8  07          	rlca
2415  0AA9  07          	rlca
2416  0AAA  E6 0F       	and	a,0x0f
2417  0AAC  07          	rlca
2418  0AAD  07          	rlca
2419  0AAE  07          	rlca
2420  0AAF  07          	rlca
2421  0AB0  E6 F0       	and	a,0xf0
2422  0AB2  C6 E0       	add	a,0xe0
2423  0AB4  32 00 00    	ld	(_s_lin1),a
2424  0AB7  3A 07 00    	ld	a,(_col + 0x0007)
2425  0ABA  CB 3F       	srl	a
2426  0ABC  87          	add	a, a
2427  0ABD  32 00 00    	ld	(_s_col1),a
2428  0AC0  0E 00       	ld	c,0x00
2429  0AC2              l_player_hit_platform_00120:
2430  0AC2  79          	ld	a, c
2431  0AC3  D6 07       	sub	a,0x07
2432  0AC5  30 18       	jr	NC,l_player_hit_platform_00122
2433  0AC7  06 00       	ld	b,0x00
2434  0AC9  21 00 00    	ld	hl,_mush_index
2435  0ACC  09          	add	hl, bc
2436  0ACD  5E          	ld	e, (hl)
2437  0ACE  16 00       	ld	d,0x00
2438  0AD0  21 00 00    	ld	hl,_index1
2439  0AD3  7E          	ld	a, (hl)
2440  0AD4  93          	sub	a, e
2441  0AD5  20 05       	jr	NZ,l_player_hit_platform_00264
2442  0AD7  23          	inc	hl
2443  0AD8  7E          	ld	a, (hl)
2444  0AD9  92          	sub	a, d
2445  0ADA  28 03       	jr	Z,l_player_hit_platform_00122
2446  0ADC              l_player_hit_platform_00264:
2447  0ADC  0C          	inc	c
2448  0ADD  18 E3       	jr	l_player_hit_platform_00120
2449  0ADF              l_player_hit_platform_00122:
2450  0ADF  21 00 00    	ld	hl,_ay_effect_07
2451  0AE2  CD 00 00    	call	_ay_fx_play
2452  0AE5  06 00       	ld	b,0x00
2453  0AE7  21 00 00    	ld	hl,_mush_class
2454  0AEA  09          	add	hl, bc
2455  0AEB  7E          	ld	a, (hl)
2456  0AEC  FE 79       	cp	a,0x79
2457  0AEE  28 18       	jr	Z,l_player_hit_platform_00123
2458  0AF0  FE 7A       	cp	a,0x7a
2459  0AF2  28 2F       	jr	Z,l_player_hit_platform_00124
2460  0AF4  FE 7B       	cp	a,0x7b
2461  0AF6  28 5F       	jr	Z,l_player_hit_platform_00126
2462  0AF8  FE 7C       	cp	a,0x7c
2463  0AFA  28 41       	jr	Z,l_player_hit_platform_00125
2464  0AFC  FE 7D       	cp	a,0x7d
2465  0AFE  CA 8B 0B    	jp	Z,l_player_hit_platform_00128
2466  0B01  D6 7E       	sub	a,0x7e
2467  0B03  28 6C       	jr	Z,l_player_hit_platform_00127
2468  0B05  C3 A3 0B    	jp	l_player_hit_platform_00129
2469  0B08              l_player_hit_platform_00123:
2470  0B08  2E 02       	ld	l,0x02
2471  0B0A  CD 00 00    	call	_zx_border_fastcall
2472  0B0D  3A 00 00    	ld	a,(_s_col1)
2473  0B10  21 06 FF    	ld	hl,0xff06
2474  0B13  E5          	push	hl
2475  0B14  F5          	push	af
2476  0B15  33          	inc	sp
2477  0B16  3A 00 00    	ld	a,(_s_lin1)
2478  0B19  F5          	push	af
2479  0B1A  33          	inc	sp
2480  0B1B  CD 00 00    	call	_enemy_init
2481  0B1E  F1          	pop	af
2482  0B1F  F1          	pop	af
2483  0B20  C3 A3 0B    	jp	l_player_hit_platform_00129
2484  0B23              l_player_hit_platform_00124:
2485  0B23  2E 02       	ld	l,0x02
2486  0B25  CD 00 00    	call	_zx_border_fastcall
2487  0B28  3A 00 00    	ld	a,(_s_col1)
2488  0B2B  21 06 01    	ld	hl,0x0106
2489  0B2E  E5          	push	hl
2490  0B2F  F5          	push	af
2491  0B30  33          	inc	sp
2492  0B31  3A 00 00    	ld	a,(_s_lin1)
2493  0B34  F5          	push	af
2494  0B35  33          	inc	sp
2495  0B36  CD 00 00    	call	_enemy_init
2496  0B39  F1          	pop	af
2497  0B3A  F1          	pop	af
2498  0B3B  18 66       	jr	l_player_hit_platform_00129
2499  0B3D              l_player_hit_platform_00125:
2500  0B3D  2E 01       	ld	l,0x01
2501  0B3F  CD 00 00    	call	_zx_border_fastcall
2502  0B42  3A 00 00    	ld	a,(_s_col1)
2503  0B45  21 07 01    	ld	hl,0x0107
2504  0B48  E5          	push	hl
2505  0B49  F5          	push	af
2506  0B4A  33          	inc	sp
2507  0B4B  3A 00 00    	ld	a,(_s_lin1)
2508  0B4E  F5          	push	af
2509  0B4F  33          	inc	sp
2510  0B50  CD 00 00    	call	_enemy_init
2511  0B53  F1          	pop	af
2512  0B54  F1          	pop	af
2513  0B55  18 4C       	jr	l_player_hit_platform_00129
2514  0B57              l_player_hit_platform_00126:
2515  0B57  2E 01       	ld	l,0x01
2516  0B59  CD 00 00    	call	_zx_border_fastcall
2517  0B5C  3A 00 00    	ld	a,(_s_col1)
2518  0B5F  21 07 FF    	ld	hl,0xff07
2519  0B62  E5          	push	hl
2520  0B63  F5          	push	af
2521  0B64  33          	inc	sp
2522  0B65  3A 00 00    	ld	a,(_s_lin1)
2523  0B68  F5          	push	af
2524  0B69  33          	inc	sp
2525  0B6A  CD 00 00    	call	_enemy_init
2526  0B6D  F1          	pop	af
2527  0B6E  F1          	pop	af
2528  0B6F  18 32       	jr	l_player_hit_platform_00129
2529  0B71              l_player_hit_platform_00127:
2530  0B71  2E 04       	ld	l,0x04
2531  0B73  CD 00 00    	call	_zx_border_fastcall
2532  0B76  3A 00 00    	ld	a,(_s_col1)
2533  0B79  21 08 01    	ld	hl,0x0108
2534  0B7C  E5          	push	hl
2535  0B7D  F5          	push	af
2536  0B7E  33          	inc	sp
2537  0B7F  3A 00 00    	ld	a,(_s_lin1)
2538  0B82  F5          	push	af
2539  0B83  33          	inc	sp
2540  0B84  CD 00 00    	call	_enemy_init
2541  0B87  F1          	pop	af
2542  0B88  F1          	pop	af
2543  0B89  18 18       	jr	l_player_hit_platform_00129
2544  0B8B              l_player_hit_platform_00128:
2545  0B8B  2E 04       	ld	l,0x04
2546  0B8D  CD 00 00    	call	_zx_border_fastcall
2547  0B90  3A 00 00    	ld	a,(_s_col1)
2548  0B93  21 08 FF    	ld	hl,0xff08
2549  0B96  E5          	push	hl
2550  0B97  F5          	push	af
2551  0B98  33          	inc	sp
2552  0B99  3A 00 00    	ld	a,(_s_lin1)
2553  0B9C  F5          	push	af
2554  0B9D  33          	inc	sp
2555  0B9E  CD 00 00    	call	_enemy_init
2556  0BA1  F1          	pop	af
2557  0BA2  F1          	pop	af
2558  0BA3              l_player_hit_platform_00129:
2559  0BA3  21 00 00    	ld	hl,_game_mush_count
2560  0BA6  34          	inc	(hl)
2561  0BA7  3A 00 00    	ld	a,(_game_boss)
2562  0BAA  B7          	or	a, a
2563  0BAB  20 72       	jr	NZ,l_player_hit_platform_00137
2564  0BAD  3A 00 00    	ld	a,(_index1)
2565  0BB0  C6 F0       	add	a,0xf0
2566  0BB2  32 00 00    	ld	(_index0),a
2567  0BB5  3A 01 00    	ld	a,(_index1 + 1)
2568  0BB8  CE FF       	adc	a,0xff
2569  0BBA  21 01 00    	ld	hl,_index0 + 1
2570  0BBD  77          	ld	(hl), a
2571  0BBE  3E 00       	ld	a, +((_scr_map) & 0xFF)
2572  0BC0  2B          	dec	hl
2573  0BC1  86          	add	a, (hl)
2574  0BC2  4F          	ld	c, a
2575  0BC3  3E 00       	ld	a, +((_scr_map) / 256)
2576  0BC5  23          	inc	hl
2577  0BC6  8E          	adc	a, (hl)
2578  0BC7  47          	ld	b, a
2579  0BC8  C5          	push	bc
2580  0BC9  2B          	dec	hl
2581  0BCA  7E          	ld	a, (hl)
2582  0BCB  23          	inc	hl
2583  0BCC  66          	ld	h, (hl)
2584  0BCD  6F          	ld	l, a
2585  0BCE  CD 00 00    	call	_game_match_back
2586  0BD1  C1          	pop	bc
2587  0BD2  7D          	ld	a,l
2588  0BD3  02          	ld	(bc), a
2589  0BD4  3E 00       	ld	a, +((_scr_map) & 0xFF)
2590  0BD6  21 00 00    	ld	hl,_index1
2591  0BD9  86          	add	a, (hl)
2592  0BDA  DD 77 FE    	ld	(ix-2),a
2593  0BDD  3E 00       	ld	a, +((_scr_map) / 256)
2594  0BDF  23          	inc	hl
2595  0BE0  8E          	adc	a, (hl)
2596  0BE1  DD 6E FE    	ld	l,(ix-2)
2597  0BE4  DD 77 FF    	ld	(ix-1),a
2598  0BE7  67          	ld	h,a
2599  0BE8  7E          	ld	a, (hl)
2600  0BE9  FE 5A       	cp	a,0x5a
2601  0BEB  28 04       	jr	Z,l_player_hit_platform_00130
2602  0BED  D6 5D       	sub	a,0x5d
2603  0BEF  20 0A       	jr	NZ,l_player_hit_platform_00131
2604  0BF1              l_player_hit_platform_00130:
2605  0BF1  DD 6E FE    	ld	l,(ix-2)
2606  0BF4  DD 66 FF    	ld	h,(ix-1)
2607  0BF7  36 4F       	ld	(hl),0x4f
2608  0BF9  18 08       	jr	l_player_hit_platform_00132
2609  0BFB              l_player_hit_platform_00131:
2610  0BFB  DD 6E FE    	ld	l,(ix-2)
2611  0BFE  DD 66 FF    	ld	h,(ix-1)
2612  0C01  36 54       	ld	(hl),0x54
2613  0C03              l_player_hit_platform_00132:
2614  0C03  2A 00 00    	ld	hl,(_index1)
2615  0C06  01 F0 FF    	ld	bc,0xfff0
2616  0C09  09          	add	hl,bc
2617  0C0A  CD 00 00    	call	_game_obj_set
2618  0C0D  3A 00 00    	ld	a,(_s_lin1)
2619  0C10  C6 10       	add	a,0x10
2620  0C12  4F          	ld	c, a
2621  0C13  3A 00 00    	ld	a, (_s_col1)
2622  0C16  47          	ld	b,a
2623  0C17  C5          	push	bc
2624  0C18  3E 4F       	ld	a,0x4f
2625  0C1A  F5          	push	af
2626  0C1B  33          	inc	sp
2627  0C1C  CD 00 00    	call	_NIRVANAP_drawT_callee
2628  0C1F              l_player_hit_platform_00137:
2629  0C1F  DD 34 FD    	inc	(ix-3)
2630  0C22  C3 72 0A    	jp	l_player_hit_platform_00138
2631  0C25              l_player_hit_platform_00142:
2632  0C25  21 00 00    	ld	hl,_ay_effect_02
2633  0C28  CD 00 00    	call	_ay_fx_play
2634  0C2B  2E 01       	ld	l,0x01
2635  0C2D  CD 00 00    	call	_spr_brick_anim
2636  0C30  2E 01       	ld	l,0x01
2637  0C32  18 02       	jr	l_player_hit_platform_00148
2638  0C34              l_player_hit_platform_00145:
2639  0C34  2E 00       	ld	l,0x00
2640  0C36              l_player_hit_platform_00148:
2641  0C36  DD F9       	ld	sp, ix
2642  0C38  DD E1       	pop	ix
2643  0C3A  C9          	ret
2644  0C3B              	SECTION code_compiler
2645  0C3B              ;	---------------------------------
2646  0C3B              ; Function player_hit_platform_clear
2647  0C3B              ; ---------------------------------
2648  0C3B              _player_hit_platform_clear:
2649  0C3B  3E 04       	ld	a,0x04
2650  0C3D  F5          	push	af
2651  0C3E  33          	inc	sp
2652  0C3F  21 0E 00    	ld	hl, +(_spr_timer + 0x000e)
2653  0C42  E5          	push	hl
2654  0C43  CD 00 00    	call	_game_check_time
2655  0C46  F1          	pop	af
2656  0C47  33          	inc	sp
2657  0C48  7D          	ld	a, l
2658  0C49  B7          	or	a, a
2659  0C4A  C8          	ret	Z
2660  0C4B  2A FF FF    	ld	hl,(_player_hit_col - 1)
2661  0C4E  3A 00 00    	ld	a,(_player_hit_lin)
2662  0C51  6F          	ld	l,a
2663  0C52  E5          	push	hl
2664  0C53  CD 00 00    	call	_spr_calc_index
2665  0C56  F1          	pop	af
2666  0C57  22 00 00    	ld	(_index1),hl
2667  0C5A  2E 00       	ld	l,0x00
2668  0C5C  CD 00 00    	call	_spr_brick_anim
2669  0C5F  21 00 00    	ld	hl,_player_hit_lin
2670  0C62  36 00       	ld	(hl),0x00
2671  0C64  21 00 00    	ld	hl,_player_hit_col
2672  0C67  36 00       	ld	(hl),0x00
2673  0C69  C9          	ret
2674  0C6A              	SECTION code_compiler
2675  0C6A              ;	---------------------------------
2676  0C6A              ; Function player_score_add
2677  0C6A              ; ---------------------------------
2678  0C6A              _player_score_add:
2679  0C6A  ED 4B 00 00 	ld	bc,(_player_score)
2680  0C6E  09          	add	hl,bc
2681  0C6F  22 00 00    	ld	(_player_score),hl
2682  0C72  21 00 00    	ld	hl,_player_lvl
2683  0C75  7E          	ld	a, (hl)
2684  0C76  D6 14       	sub	a,0x14
2685  0C78  30 42       	jr	NC,l_player_score_add_00104
2686  0C7A  01 00 00    	ld	bc,_player_lvl_table+0
2687  0C7D  6E          	ld	l,(hl)
2688  0C7E  26 00       	ld	h,0x00
2689  0C80  29          	add	hl, hl
2690  0C81  09          	add	hl, bc
2691  0C82  4E          	ld	c, (hl)
2692  0C83  23          	inc	hl
2693  0C84  46          	ld	b, (hl)
2694  0C85  21 00 00    	ld	hl,_player_score
2695  0C88  7E          	ld	a, (hl)
2696  0C89  91          	sub	a, c
2697  0C8A  23          	inc	hl
2698  0C8B  7E          	ld	a, (hl)
2699  0C8C  98          	sbc	a, b
2700  0C8D  38 2D       	jr	C,l_player_score_add_00104
2701  0C8F  21 00 00    	ld	hl,_player_lvl
2702  0C92  34          	inc	(hl)
2703  0C93  CD 00 00    	call	_game_update_stats
2704  0C96  CD 00 00    	call	_spr_flatten
2705  0C99  21 06 00    	ld	hl,___str_1
2706  0C9C  E5          	push	hl
2707  0C9D  21 0C 0C    	ld	hl,0x0c0c
2708  0CA0  E5          	push	hl
2709  0CA1  CD 00 00    	call	_zx_print_str
2710  0CA4  AF          	xor	a, a
2711  0CA5  F5          	push	af
2712  0CA6  33          	inc	sp
2713  0CA7  21 3C 00    	ld	hl,0x003c
2714  0CAA  E5          	push	hl
2715  0CAB  21 0C 15    	ld	hl,0x150c
2716  0CAE  E5          	push	hl
2717  0CAF  3E 0C       	ld	a,0x0c
2718  0CB1  F5          	push	af
2719  0CB2  33          	inc	sp
2720  0CB3  CD 00 00    	call	_game_colour_message
2721  0CB6  F1          	pop	af
2722  0CB7  F1          	pop	af
2723  0CB8  F1          	pop	af
2724  0CB9  CD 00 00    	call	_spr_unflatten
2725  0CBC              l_player_score_add_00104:
2726  0CBC  3A 00 00    	ld	a,(_game_score_top)
2727  0CBF  21 00 00    	ld	hl,_player_score
2728  0CC2  96          	sub	a, (hl)
2729  0CC3  3A 01 00    	ld	a,(_game_score_top + 1)
2730  0CC6  23          	inc	hl
2731  0CC7  9E          	sbc	a, (hl)
2732  0CC8  30 06       	jr	NC,l_player_score_add_00106
2733  0CCA  2A 00 00    	ld	hl,(_player_score)
2734  0CCD  22 00 00    	ld	(_game_score_top),hl
2735  0CD0              l_player_score_add_00106:
2736  0CD0  CD 00 00    	call	_game_print_score
2737  0CD3  C9          	ret
2738  0CD4              	SECTION rodata_compiler
2739  0006              ___str_1:
2740  0006  4C 45 56 45 4C 20 55 50 21 
                        	DEFM "LEVEL UP!"
2741  000F  00          	DEFB 0x00
2742  0010              	SECTION code_compiler
2743  0CD4              ;	---------------------------------
2744  0CD4              ; Function player_check_floor
2745  0CD4              ; ---------------------------------
2746  0CD4              _player_check_floor:
2747  0CD4  CD 00 00    	call	___sdcc_enter_ix
2748  0CD7  F5          	push	af
2749  0CD8  F5          	push	af
2750  0CD9  F5          	push	af
2751  0CDA  11 07 00    	ld	de,_col+7
2752  0CDD  1A          	ld	a, (de)
2753  0CDE  47          	ld	b, a
2754  0CDF  3A 07 00    	ld	a,(_lin + 0x0007)
2755  0CE2  C6 10       	add	a,0x10
2756  0CE4  D5          	push	de
2757  0CE5  4F          	ld	c,a
2758  0CE6  C5          	push	bc
2759  0CE7  CD 00 00    	call	_spr_calc_index
2760  0CEA  F1          	pop	af
2761  0CEB  D1          	pop	de
2762  0CEC  DD 75 FC    	ld	(ix-4),l
2763  0CEF  DD 74 FD    	ld	(ix-3),h
2764  0CF2  01 00 00    	ld	bc,_scr_map+0
2765  0CF5  79          	ld	a, c
2766  0CF6  DD 86 FC    	add	a,(ix-4)
2767  0CF9  DD 77 FE    	ld	(ix-2),a
2768  0CFC  78          	ld	a, b
2769  0CFD  DD 8E FD    	adc	a,(ix-3)
2770  0D00  DD 6E FE    	ld	l,(ix-2)
2771  0D03  DD 77 FF    	ld	(ix-1),a
2772  0D06  67          	ld	h,a
2773  0D07  7E          	ld	a, (hl)
2774  0D08  DD 77 FB    	ld	(ix-5),a
2775  0D0B  DD 6E FC    	ld	l,(ix-4)
2776  0D0E  DD 66 FD    	ld	h,(ix-3)
2777  0D11  23          	inc	hl
2778  0D12  09          	add	hl,bc
2779  0D13  3A 00 00    	ld	a,(_s_lin0)
2780  0D16  D6 90       	sub	a,0x90
2781  0D18  4D          	ld	c,l
2782  0D19  44          	ld	b,h
2783  0D1A  20 26       	jr	NZ,l_player_check_floor_00108
2784  0D1C  3A 00 00    	ld	a,(_map_heigth)
2785  0D1F  C5          	push	bc
2786  0D20  F5          	push	af
2787  0D21  33          	inc	sp
2788  0D22  3A 00 00    	ld	a,(_scr_curr)
2789  0D25  F5          	push	af
2790  0D26  33          	inc	sp
2791  0D27  CD 00 00    	call	__divuchar_callee
2792  0D2A  C1          	pop	bc
2793  0D2B  7D          	ld	a,l
2794  0D2C  3C          	inc	a
2795  0D2D  32 00 00    	ld	(_tmp1),a
2796  0D30  21 00 00    	ld	hl,_map_heigth
2797  0D33  96          	sub	a, (hl)
2798  0D34  30 06       	jr	NC,l_player_check_floor_00102
2799  0D36  DD 36 FB 00 	ld	(ix-5),0x00
2800  0D3A  18 14       	jr	l_player_check_floor_00109
2801  0D3C              l_player_check_floor_00102:
2802  0D3C  DD 36 FB 48 	ld	(ix-5),0x48
2803  0D40  18 0E       	jr	l_player_check_floor_00109
2804  0D42              l_player_check_floor_00108:
2805  0D42  1A          	ld	a, (de)
2806  0D43  0F          	rrca
2807  0D44  38 06       	jr	C,l_player_check_floor_00105
2808  0D46  DD 36 FA 00 	ld	(ix-6),0x00
2809  0D4A  18 04       	jr	l_player_check_floor_00109
2810  0D4C              l_player_check_floor_00105:
2811  0D4C  0A          	ld	a, (bc)
2812  0D4D  DD 77 FA    	ld	(ix-6),a
2813  0D50              l_player_check_floor_00109:
2814  0D50  DD 7E FB    	ld	a,(ix-5)
2815  0D53  D6 3A       	sub	a,0x3a
2816  0D55  38 07       	jr	C,l_player_check_floor_00132
2817  0D57  DD 7E FB    	ld	a,(ix-5)
2818  0D5A  D6 60       	sub	a,0x60
2819  0D5C  38 32       	jr	C,l_player_check_floor_00128
2820  0D5E              l_player_check_floor_00132:
2821  0D5E  DD 7E FA    	ld	a,(ix-6)
2822  0D61  D6 3A       	sub	a,0x3a
2823  0D63  38 07       	jr	C,l_player_check_floor_00127
2824  0D65  DD 7E FA    	ld	a,(ix-6)
2825  0D68  D6 60       	sub	a,0x60
2826  0D6A  38 24       	jr	C,l_player_check_floor_00128
2827  0D6C              l_player_check_floor_00127:
2828  0D6C  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
2829  0D6F  36 02       	ld	(hl),0x02
2830  0D71  21 00 00    	ld	hl,_s_state
2831  0D74  CB CE       	set	1, (hl)
2832  0D76  2E 00       	ld	l,0x00
2833  0D78  CD 5C 06    	call	_player_check_stairs
2834  0D7B  3A 00 00    	ld	a,(_player_onstair)
2835  0D7E  B7          	or	a, a
2836  0D7F  C2 26 0E    	jp	NZ, l_player_check_floor_00133
2837  0D82  3A 00 00    	ld	a,(_s_lin0)
2838  0D85  D6 90       	sub	a,0x90
2839  0D87  C2 26 0E    	jp	NZ,l_player_check_floor_00133
2840  0D8A  CD 00 00    	call	_spr_page_down
2841  0D8D  C3 26 0E    	jp	l_player_check_floor_00133
2842  0D90              l_player_check_floor_00128:
2843  0D90  C5          	push	bc
2844  0D91  3E 10       	ld	a,0x10
2845  0D93  F5          	push	af
2846  0D94  33          	inc	sp
2847  0D95  21 00 00    	ld	hl,_player_brick_time
2848  0D98  E5          	push	hl
2849  0D99  CD 00 00    	call	_game_check_time
2850  0D9C  F1          	pop	af
2851  0D9D  33          	inc	sp
2852  0D9E  C1          	pop	bc
2853  0D9F  7D          	ld	a,l
2854  0DA0  B7          	or	a, a
2855  0DA1  CA 26 0E    	jp	Z, l_player_check_floor_00133
2856  0DA4  2A 00 00    	ld	hl,(_curr_time)
2857  0DA7  22 00 00    	ld	(_player_brick_time),hl
2858  0DAA  DD 7E FB    	ld	a,(ix-5)
2859  0DAD  D6 40       	sub	a,0x40
2860  0DAF  20 18       	jr	NZ,l_player_check_floor_00114
2861  0DB1  C5          	push	bc
2862  0DB2  DD 6E FC    	ld	l,(ix-4)
2863  0DB5  DD 66 FD    	ld	h,(ix-3)
2864  0DB8  CD 00 00    	call	_game_match_back
2865  0DBB  C1          	pop	bc
2866  0DBC  5D          	ld	e,l
2867  0DBD  DD 6E FE    	ld	l,(ix-2)
2868  0DC0  DD 66 FF    	ld	h,(ix-1)
2869  0DC3  73          	ld	(hl), e
2870  0DC4  C5          	push	bc
2871  0DC5  CD 2B 0E    	call	_player_gasta_brick
2872  0DC8  C1          	pop	bc
2873  0DC9              l_player_check_floor_00114:
2874  0DC9  DD 7E FB    	ld	a,(ix-5)
2875  0DCC  D6 3F       	sub	a,0x3f
2876  0DCE  20 0D       	jr	NZ,l_player_check_floor_00116
2877  0DD0  DD 6E FE    	ld	l,(ix-2)
2878  0DD3  DD 66 FF    	ld	h,(ix-1)
2879  0DD6  36 40       	ld	(hl),0x40
2880  0DD8  C5          	push	bc
2881  0DD9  CD 2B 0E    	call	_player_gasta_brick
2882  0DDC  C1          	pop	bc
2883  0DDD              l_player_check_floor_00116:
2884  0DDD  DD 7E FB    	ld	a,(ix-5)
2885  0DE0  D6 3E       	sub	a,0x3e
2886  0DE2  20 0D       	jr	NZ,l_player_check_floor_00118
2887  0DE4  DD 6E FE    	ld	l,(ix-2)
2888  0DE7  DD 66 FF    	ld	h,(ix-1)
2889  0DEA  36 3F       	ld	(hl),0x3f
2890  0DEC  C5          	push	bc
2891  0DED  CD 2B 0E    	call	_player_gasta_brick
2892  0DF0  C1          	pop	bc
2893  0DF1              l_player_check_floor_00118:
2894  0DF1  DD 7E FA    	ld	a,(ix-6)
2895  0DF4  D6 40       	sub	a,0x40
2896  0DF6  20 12       	jr	NZ,l_player_check_floor_00120
2897  0DF8  C5          	push	bc
2898  0DF9  DD 6E FC    	ld	l,(ix-4)
2899  0DFC  DD 66 FD    	ld	h,(ix-3)
2900  0DFF  CD 00 00    	call	_game_match_back
2901  0E02  C1          	pop	bc
2902  0E03  7D          	ld	a,l
2903  0E04  02          	ld	(bc), a
2904  0E05  C5          	push	bc
2905  0E06  CD 2B 0E    	call	_player_gasta_brick
2906  0E09  C1          	pop	bc
2907  0E0A              l_player_check_floor_00120:
2908  0E0A  DD 7E FA    	ld	a,(ix-6)
2909  0E0D  D6 3F       	sub	a,0x3f
2910  0E0F  20 08       	jr	NZ,l_player_check_floor_00122
2911  0E11  3E 40       	ld	a,0x40
2912  0E13  02          	ld	(bc), a
2913  0E14  C5          	push	bc
2914  0E15  CD 2B 0E    	call	_player_gasta_brick
2915  0E18  C1          	pop	bc
2916  0E19              l_player_check_floor_00122:
2917  0E19  DD 7E FA    	ld	a,(ix-6)
2918  0E1C  D6 3E       	sub	a,0x3e
2919  0E1E  20 06       	jr	NZ,l_player_check_floor_00133
2920  0E20  3E 3F       	ld	a,0x3f
2921  0E22  02          	ld	(bc), a
2922  0E23  CD 2B 0E    	call	_player_gasta_brick
2923  0E26              l_player_check_floor_00133:
2924  0E26  DD F9       	ld	sp, ix
2925  0E28  DD E1       	pop	ix
2926  0E2A  C9          	ret
2927  0E2B              	SECTION code_compiler
2928  0E2B              ;	---------------------------------
2929  0E2B              ; Function player_gasta_brick
2930  0E2B              ; ---------------------------------
2931  0E2B              _player_gasta_brick:
2932  0E2B  3A 00 00    	ld	a,(_s_lin0)
2933  0E2E  32 00 00    	ld	(_s_lin1),a
2934  0E31  3A 00 00    	ld	a,(_s_col0)
2935  0E34  32 00 00    	ld	(_s_col1),a
2936  0E37  3A 07 00    	ld	a,(_lin + 0x0007)
2937  0E3A  C6 10       	add	a,0x10
2938  0E3C  32 00 00    	ld	(_s_lin0),a
2939  0E3F  3A 07 00    	ld	a,(_col + 0x0007)
2940  0E42  32 00 00    	ld	(_s_col0),a
2941  0E45  CD 00 00    	call	_spr_back_repaint
2942  0E48  3A 00 00    	ld	a,(_s_lin1)
2943  0E4B  32 00 00    	ld	(_s_lin0),a
2944  0E4E  3A 00 00    	ld	a,(_s_col1)
2945  0E51  32 00 00    	ld	(_s_col0),a
2946  0E54  C9          	ret
2947  0E55              	SECTION code_compiler
2948  0E55              ;	---------------------------------
2949  0E55              ; Function player_move_jump
2950  0E55              ; ---------------------------------
2951  0E55              _player_move_jump:
2952  0E55  21 00 00    	ld	hl,_game_gravity
2953  0E58  4E          	ld	c, (hl)
2954  0E59  21 00 00    	ld	hl,_player_vel_y
2955  0E5C  7E          	ld	a, (hl)
2956  0E5D  81          	add	a, c
2957  0E5E  77          	ld	(hl), a
2958  0E5F  21 00 00    	ld	hl,_sprite_on_air
2959  0E62  36 01       	ld	(hl),0x01
2960  0E64  3A 00 00    	ld	a,(_player_vel_inc)
2961  0E67  B7          	or	a, a
2962  0E68  28 4A       	jr	Z,l_player_move_jump_00109
2963  0E6A  3A 00 00    	ld	a,(_dirs)
2964  0E6D  CB 07       	rlc	a
2965  0E6F  E6 01       	and	a,0x01
2966  0E71  4F          	ld	c, a
2967  0E72  3A 00 00    	ld	a,(_game_2buttons)
2968  0E75  B7          	or	a, a
2969  0E76  28 06       	jr	Z,l_player_move_jump_00102
2970  0E78  79          	ld	a, c
2971  0E79  EE 01       	xor	a,0x01
2972  0E7B  4F          	ld	c, a
2973  0E7C  18 15       	jr	l_player_move_jump_00103
2974  0E7E              l_player_move_jump_00102:
2975  0E7E  CB 41       	bit	0, c
2976  0E80  28 07       	jr	Z,l_player_move_jump_00154
2977  0E82  21 00 00    	ld	hl,_dirs
2978  0E85  CB 46       	bit	0, (hl)
2979  0E87  20 04       	jr	NZ,l_player_move_jump_00155
2980  0E89              l_player_move_jump_00154:
2981  0E89  0E 00       	ld	c,0x00
2982  0E8B  18 02       	jr	l_player_move_jump_00156
2983  0E8D              l_player_move_jump_00155:
2984  0E8D  0E 01       	ld	c,0x01
2985  0E8F              l_player_move_jump_00156:
2986  0E8F  79          	ld	a, c
2987  0E90  EE 01       	xor	a,0x01
2988  0E92  4F          	ld	c, a
2989  0E93              l_player_move_jump_00103:
2990  0E93  79          	ld	a, c
2991  0E94  B7          	or	a, a
2992  0E95  28 1D       	jr	Z,l_player_move_jump_00109
2993  0E97  3A 00 00    	ld	a,(_player_vel_y1)
2994  0E9A  21 00 00    	ld	hl,_player_vel_y
2995  0E9D  96          	sub	a, (hl)
2996  0E9E  E2 A3 0E    	jp	PO, l_player_move_jump_00259
2997  0EA1  EE 80       	xor	a,0x80
2998  0EA3              l_player_move_jump_00259:
2999  0EA3  F2 B4 0E    	jp	P, l_player_move_jump_00109
3000  0EA6  21 00 00    	ld	hl,_player_vel_y
3001  0EA9  CB 7E       	bit	7,(hl)
3002  0EAB  28 07       	jr	Z,l_player_move_jump_00109
3003  0EAD  36 00       	ld	(hl),0x00
3004  0EAF  21 00 00    	ld	hl,_player_vel_inc
3005  0EB2  36 00       	ld	(hl),0x00
3006  0EB4              l_player_move_jump_00109:
3007  0EB4  3E 78       	ld	a,0x78
3008  0EB6  21 00 00    	ld	hl,_player_vel_y
3009  0EB9  96          	sub	a, (hl)
3010  0EBA  E2 BF 0E    	jp	PO, l_player_move_jump_00260
3011  0EBD  EE 80       	xor	a,0x80
3012  0EBF              l_player_move_jump_00260:
3013  0EBF  F2 C7 0E    	jp	P, l_player_move_jump_00111
3014  0EC2  21 00 00    	ld	hl,_player_vel_y
3015  0EC5  36 78       	ld	(hl),0x78
3016  0EC7              l_player_move_jump_00111:
3017  0EC7  21 00 00    	ld	hl,_player_vel_y
3018  0ECA  7E          	ld	a, (hl)
3019  0ECB  EE 80       	xor	a,0x80
3020  0ECD  D6 08       	sub	a,0x08
3021  0ECF  30 02       	jr	NC,l_player_move_jump_00113
3022  0ED1  36 88       	ld	(hl),0x88
3023  0ED3              l_player_move_jump_00113:
3024  0ED3  3A 00 00    	ld	a,(_player_vel_y)
3025  0ED6  4F          	ld	c,a
3026  0ED7  17          	rla
3027  0ED8  9F          	sbc	a, a
3028  0ED9  47          	ld	b, a
3029  0EDA  CB 41       	bit	0,c
3030  0EDC  21 00 00    	ld	hl,_s_lin1
3031  0EDF  71          	ld	(hl),c
3032  0EE0  28 04       	jr	Z,l_player_move_jump_00115
3033  0EE2  21 00 00    	ld	hl,_s_lin1
3034  0EE5  35          	dec	(hl)
3035  0EE6              l_player_move_jump_00115:
3036  0EE6  3A 07 00    	ld	a,(_lin + 0x0007)
3037  0EE9  21 00 00    	ld	hl,_s_lin1
3038  0EEC  86          	add	a, (hl)
3039  0EED  77          	ld	(hl), a
3040  0EEE  CB 78       	bit	7, b
3041  0EF0  28 5C       	jr	Z,l_player_move_jump_00141
3042  0EF2  21 00 00    	ld	hl,_s_state
3043  0EF5  CD 00 00    	call	_spr_set_up
3044  0EF8  3E 90       	ld	a,0x90
3045  0EFA  21 00 00    	ld	hl,_s_lin1
3046  0EFD  96          	sub	a, (hl)
3047  0EFE  30 11       	jr	NC,l_player_move_jump_00120
3048  0F00  CD 00 00    	call	_spr_page_up
3049  0F03  7D          	ld	a, l
3050  0F04  B7          	or	a, a
3051  0F05  28 05       	jr	Z,l_player_move_jump_00117
3052  0F07  2E 00       	ld	l,0x00
3053  0F09  C3 05 10    	jp	l_player_move_jump_00152
3054  0F0C              l_player_move_jump_00117:
3055  0F0C  21 00 00    	ld	hl,_s_lin1
3056  0F0F  36 00       	ld	(hl),0x00
3057  0F11              l_player_move_jump_00120:
3058  0F11  21 07 00    	ld	hl,+(_col + 0x0007)
3059  0F14  46          	ld	b, (hl)
3060  0F15  C5          	push	bc
3061  0F16  33          	inc	sp
3062  0F17  3A 00 00    	ld	a,(_s_lin1)
3063  0F1A  F5          	push	af
3064  0F1B  33          	inc	sp
3065  0F1C  CD 00 00    	call	_game_check_map
3066  0F1F  F1          	pop	af
3067  0F20  7C          	ld	a,h
3068  0F21  B5          	or	a,l
3069  0F22  28 21       	jr	Z,l_player_move_jump_00124
3070  0F24  CD 85 09    	call	_player_hit_platform
3071  0F27  7D          	ld	a, l
3072  0F28  B7          	or	a, a
3073  0F29  28 12       	jr	Z,l_player_move_jump_00122
3074  0F2B  3A 07 00    	ld	a,(_lin + 0x0007)
3075  0F2E  07          	rlca
3076  0F2F  07          	rlca
3077  0F30  07          	rlca
3078  0F31  07          	rlca
3079  0F32  E6 0F       	and	a,0x0f
3080  0F34  07          	rlca
3081  0F35  07          	rlca
3082  0F36  07          	rlca
3083  0F37  07          	rlca
3084  0F38  E6 F0       	and	a,0xf0
3085  0F3A  32 07 00    	ld	((_lin + 0x0007)),a
3086  0F3D              l_player_move_jump_00122:
3087  0F3D  21 00 00    	ld	hl,_player_vel_y
3088  0F40  36 00       	ld	(hl),0x00
3089  0F42  C3 CD 0F    	jp	l_player_move_jump_00142
3090  0F45              l_player_move_jump_00124:
3091  0F45  3A 00 00    	ld	a,(_s_lin1)
3092  0F48  32 07 00    	ld	((_lin + 0x0007)),a
3093  0F4B  C3 CD 0F    	jp	l_player_move_jump_00142
3094  0F4E              l_player_move_jump_00141:
3095  0F4E  21 00 00    	ld	hl,_s_state
3096  0F51  CD 00 00    	call	_spr_set_down
3097  0F54  3E 90       	ld	a,0x90
3098  0F56  21 00 00    	ld	hl,_s_lin1
3099  0F59  96          	sub	a, (hl)
3100  0F5A  30 11       	jr	NC,l_player_move_jump_00130
3101  0F5C  CD 00 00    	call	_spr_page_down
3102  0F5F  7D          	ld	a, l
3103  0F60  B7          	or	a, a
3104  0F61  28 05       	jr	Z,l_player_move_jump_00127
3105  0F63  2E 00       	ld	l,0x00
3106  0F65  C3 05 10    	jp	l_player_move_jump_00152
3107  0F68              l_player_move_jump_00127:
3108  0F68  21 00 00    	ld	hl,_s_lin1
3109  0F6B  36 90       	ld	(hl),0x90
3110  0F6D              l_player_move_jump_00130:
3111  0F6D  21 07 00    	ld	hl,+(_col + 0x0007)
3112  0F70  56          	ld	d, (hl)
3113  0F71  3A 00 00    	ld	a,(_s_lin1)
3114  0F74  C6 10       	add	a,0x10
3115  0F76  5F          	ld	e, a
3116  0F77  D5          	push	de
3117  0F78  CD 00 00    	call	_game_check_map
3118  0F7B  F1          	pop	af
3119  0F7C  7C          	ld	a,h
3120  0F7D  B5          	or	a,l
3121  0F7E  28 47       	jr	Z,l_player_move_jump_00138
3122  0F80  2E 00       	ld	l,0x00
3123  0F82  CD 5C 06    	call	_player_check_stairs
3124  0F85  3A 00 00    	ld	a,(_player_onstair)
3125  0F88  B7          	or	a, a
3126  0F89  20 05       	jr	NZ,l_player_move_jump_00132
3127  0F8B  2E 01       	ld	l,0x01
3128  0F8D  CD 5C 06    	call	_player_check_stairs
3129  0F90              l_player_move_jump_00132:
3130  0F90  3A 00 00    	ld	a,(_player_onstair)
3131  0F93  B7          	or	a, a
3132  0F94  20 12       	jr	NZ,l_player_move_jump_00134
3133  0F96  3A 00 00    	ld	a,(_s_lin1)
3134  0F99  07          	rlca
3135  0F9A  07          	rlca
3136  0F9B  07          	rlca
3137  0F9C  07          	rlca
3138  0F9D  E6 0F       	and	a,0x0f
3139  0F9F  07          	rlca
3140  0FA0  07          	rlca
3141  0FA1  07          	rlca
3142  0FA2  07          	rlca
3143  0FA3  E6 F0       	and	a,0xf0
3144  0FA5  32 07 00    	ld	((_lin + 0x0007)),a
3145  0FA8              l_player_move_jump_00134:
3146  0FA8  21 00 00    	ld	hl,_player_vel_y
3147  0FAB  36 00       	ld	(hl),0x00
3148  0FAD  21 00 00    	ld	hl,_s_state
3149  0FB0  7E          	ld	a,(hl)
3150  0FB1  E6 FC       	and	a,+(0xfd&0xfe)
3151  0FB3  77          	ld	(hl),a
3152  0FB4  3A 07 00    	ld	a,(_lin + 0x0007)
3153  0FB7  D6 90       	sub	a,0x90
3154  0FB9  38 03       	jr	C,l_player_move_jump_00136
3155  0FBB  CD 00 00    	call	_spr_page_down
3156  0FBE              l_player_move_jump_00136:
3157  0FBE  21 07 00    	ld	hl, +(_colint + 0x0007)
3158  0FC1  36 00       	ld	(hl),0x00
3159  0FC3  2E 01       	ld	l,0x01
3160  0FC5  18 3E       	jr	l_player_move_jump_00152
3161  0FC7              l_player_move_jump_00138:
3162  0FC7  3A 00 00    	ld	a,(_s_lin1)
3163  0FCA  32 07 00    	ld	((_lin + 0x0007)),a
3164  0FCD              l_player_move_jump_00142:
3165  0FCD  21 00 00    	ld	hl,_s_state
3166  0FD0  CB 5E       	bit	3, (hl)
3167  0FD2  20 21       	jr	NZ,l_player_move_jump_00148
3168  0FD4  21 00 00    	ld	hl,_s_state
3169  0FD7  CB 56       	bit	2, (hl)
3170  0FD9  20 1A       	jr	NZ,l_player_move_jump_00148
3171  0FDB  21 00 00    	ld	hl,_dirs
3172  0FDE  CB 56       	bit	2, (hl)
3173  0FE0  28 06       	jr	Z,l_player_move_jump_00144
3174  0FE2  21 00 00    	ld	hl,_s_state
3175  0FE5  CD 00 00    	call	_spr_set_left
3176  0FE8              l_player_move_jump_00144:
3177  0FE8  21 00 00    	ld	hl,_dirs
3178  0FEB  CB 5E       	bit	3, (hl)
3179  0FED  28 06       	jr	Z,l_player_move_jump_00148
3180  0FEF  21 00 00    	ld	hl,_s_state
3181  0FF2  CD 00 00    	call	_spr_set_right
3182  0FF5              l_player_move_jump_00148:
3183  0FF5  CD 00 00    	call	_spr_move_horizontal
3184  0FF8  7D          	ld	a, l
3185  0FF9  B7          	or	a, a
3186  0FFA  28 07       	jr	Z,l_player_move_jump_00151
3187  0FFC  21 00 00    	ld	hl,_s_state
3188  0FFF  7E          	ld	a,(hl)
3189  1000  E6 F3       	and	a,+(0xf7&0xfb)
3190  1002  77          	ld	(hl),a
3191  1003              l_player_move_jump_00151:
3192  1003  2E 00       	ld	l,0x00
3193  1005              l_player_move_jump_00152:
3194  1005  C9          	ret
3195  1006              	SECTION code_compiler
3196  1006              ;	---------------------------------
3197  1006              ; Function player_open_door
3198  1006              ; ---------------------------------
3199  1006              _player_open_door:
3200  1006  CD 00 00    	call	___sdcc_enter_ix
3201  1009  0E 00       	ld	c,0x00
3202  100B  21 00 00    	ld	hl,_ay_effect_05
3203  100E  CD 00 00    	call	_ay_fx_play
3204  1011  DD 7E 06    	ld	a,(ix+6)
3205  1014  D6 48       	sub	a,0x48
3206  1016  28 17       	jr	Z,l_player_open_door_00101
3207  1018  DD 7E 06    	ld	a,(ix+6)
3208  101B  D6 49       	sub	a,0x49
3209  101D  28 1F       	jr	Z,l_player_open_door_00104
3210  101F  DD 7E 06    	ld	a,(ix+6)
3211  1022  D6 4A       	sub	a,0x4a
3212  1024  28 27       	jr	Z,l_player_open_door_00107
3213  1026  DD 7E 06    	ld	a,(ix+6)
3214  1029  D6 4B       	sub	a,0x4b
3215  102B  28 2F       	jr	Z,l_player_open_door_00110
3216  102D  18 3A       	jr	l_player_open_door_00113
3217  102F              l_player_open_door_00101:
3218  102F  3A 00 00    	ld	a,(_player_keys)
3219  1032  B7          	or	a, a
3220  1033  28 34       	jr	Z,l_player_open_door_00113
3221  1035  2E 07       	ld	l,0x07
3222  1037  CD 00 00    	call	_zx_border_fastcall
3223  103A  0E 01       	ld	c,0x01
3224  103C  18 2B       	jr	l_player_open_door_00113
3225  103E              l_player_open_door_00104:
3226  103E  3A 01 00    	ld	a,(_player_keys + 0x0001)
3227  1041  B7          	or	a, a
3228  1042  28 25       	jr	Z,l_player_open_door_00113
3229  1044  2E 02       	ld	l,0x02
3230  1046  CD 00 00    	call	_zx_border_fastcall
3231  1049  0E 01       	ld	c,0x01
3232  104B  18 1C       	jr	l_player_open_door_00113
3233  104D              l_player_open_door_00107:
3234  104D  3A 02 00    	ld	a,(_player_keys + 0x0002)
3235  1050  B7          	or	a, a
3236  1051  28 16       	jr	Z,l_player_open_door_00113
3237  1053  2E 04       	ld	l,0x04
3238  1055  CD 00 00    	call	_zx_border_fastcall
3239  1058  0E 01       	ld	c,0x01
3240  105A  18 0D       	jr	l_player_open_door_00113
3241  105C              l_player_open_door_00110:
3242  105C  3A 03 00    	ld	a,(_player_keys + 0x0003)
3243  105F  B7          	or	a, a
3244  1060  28 07       	jr	Z,l_player_open_door_00113
3245  1062  2E 05       	ld	l,0x05
3246  1064  CD 00 00    	call	_zx_border_fastcall
3247  1067  0E 01       	ld	c,0x01
3248  1069              l_player_open_door_00113:
3249  1069  79          	ld	a, c
3250  106A  B7          	or	a, a
3251  106B  20 06       	jr	NZ,l_player_open_door_00114
3252  106D  3A 00 00    	ld	a,(_game_inmune)
3253  1070  B7          	or	a, a
3254  1071  28 1E       	jr	Z,l_player_open_door_00117
3255  1073              l_player_open_door_00114:
3256  1073  3E 00       	ld	a, +((_scr_map) & 0xFF)
3257  1075  DD 86 04    	add	a,(ix+4)
3258  1078  4F          	ld	c, a
3259  1079  3E 00       	ld	a, +((_scr_map) / 256)
3260  107B  DD 8E 05    	adc	a,(ix+5)
3261  107E  47          	ld	b, a
3262  107F  AF          	xor	a, a
3263  1080  02          	ld	(bc), a
3264  1081  DD 6E 04    	ld	l,(ix+4)
3265  1084  DD 66 05    	ld	h,(ix+5)
3266  1087  CD 00 00    	call	_game_obj_set
3267  108A  21 04 00    	ld	hl,0x0004
3268  108D  39          	add	hl, sp
3269  108E  CD 00 00    	call	_spr_draw_index
3270  1091              l_player_open_door_00117:
3271  1091  DD E1       	pop	ix
3272  1093  C9          	ret
3273  1094              	SECTION code_compiler
3274  1094              ;	---------------------------------
3275  1094              ; Function player_lost_life
3276  1094              ; ---------------------------------
3277  1094              _player_lost_life:
3278  1094  CD 00 00    	call	___sdcc_enter_ix
3279  1097  F5          	push	af
3280  1098  21 00 00    	ld	hl,_ay_effect_18
3281  109B  CD 00 00    	call	_ay_fx_play
3282  109E  21 00 00    	ld	hl,_player_vita
3283  10A1  36 00       	ld	(hl),0x00
3284  10A3  CD 00 00    	call	_game_update_stats
3285  10A6  3A 07 00    	ld	a,(_lin + 7)
3286  10A9  32 00 00    	ld	(_s_lin0),a
3287  10AC  3A 07 00    	ld	a,(_col + 7)
3288  10AF  32 00 00    	ld	(_s_col0),a
3289  10B2  CD 00 00    	call	_spr_init_effects
3290  10B5  06 00       	ld	b,0x00
3291  10B7              l_player_lost_life_00118:
3292  10B7  C5          	push	bc
3293  10B8  21 00 00    	ld	hl,0x0000
3294  10BB  E5          	push	hl
3295  10BC  AF          	xor	a, a
3296  10BD  48          	ld	c,b
3297  10BE  47          	ld	b,a
3298  10BF  C5          	push	bc
3299  10C0  CD 00 00    	call	_NIRVANAP_spriteT_callee
3300  10C3  C1          	pop	bc
3301  10C4  04          	inc	b
3302  10C5  3E 07       	ld	a,0x07
3303  10C7  90          	sub	a, b
3304  10C8  30 ED       	jr	NC,l_player_lost_life_00118
3305  10CA  76          	halt
3306  10CB  3A 00 00    	ld	a,(_s_lin0)
3307  10CE  C6 F0       	add	a,0xf0
3308  10D0  47          	ld	b, a
3309  10D1  3A 00 00    	ld	a,(_s_col0)
3310  10D4  21 00 00    	ld	hl,0x0000
3311  10D7  E5          	push	hl
3312  10D8  21 87 03    	ld	hl,0x0387
3313  10DB  E5          	push	hl
3314  10DC  48          	ld	c,b
3315  10DD  47          	ld	b,a
3316  10DE  C5          	push	bc
3317  10DF  CD 00 00    	call	_spr_add_anim
3318  10E2  F1          	pop	af
3319  10E3  F1          	pop	af
3320  10E4  F1          	pop	af
3321  10E5  21 00 00    	ld	hl,_s_col0
3322  10E8  46          	ld	b, (hl)
3323  10E9  05          	dec	b
3324  10EA  05          	dec	b
3325  10EB  21 00 00    	ld	hl,0x0000
3326  10EE  E5          	push	hl
3327  10EF  21 87 03    	ld	hl,0x0387
3328  10F2  E5          	push	hl
3329  10F3  C5          	push	bc
3330  10F4  33          	inc	sp
3331  10F5  3A 00 00    	ld	a,(_s_lin0)
3332  10F8  F5          	push	af
3333  10F9  33          	inc	sp
3334  10FA  CD 00 00    	call	_spr_add_anim
3335  10FD  F1          	pop	af
3336  10FE  F1          	pop	af
3337  10FF  21 00 00    	ld	hl,0x0000
3338  1102  E3          	ex	(sp),hl
3339  1103  3A 00 00    	ld	a,(_s_col0)
3340  1106  21 87 03    	ld	hl,0x0387
3341  1109  E5          	push	hl
3342  110A  F5          	push	af
3343  110B  33          	inc	sp
3344  110C  3A 00 00    	ld	a,(_s_lin0)
3345  110F  F5          	push	af
3346  1110  33          	inc	sp
3347  1111  CD 00 00    	call	_spr_add_anim
3348  1114  F1          	pop	af
3349  1115  F1          	pop	af
3350  1116  F1          	pop	af
3351  1117  21 00 00    	ld	hl,_s_col0
3352  111A  46          	ld	b, (hl)
3353  111B  04          	inc	b
3354  111C  04          	inc	b
3355  111D  21 00 00    	ld	hl,0x0000
3356  1120  E5          	push	hl
3357  1121  21 87 03    	ld	hl,0x0387
3358  1124  E5          	push	hl
3359  1125  C5          	push	bc
3360  1126  33          	inc	sp
3361  1127  3A 00 00    	ld	a,(_s_lin0)
3362  112A  F5          	push	af
3363  112B  33          	inc	sp
3364  112C  CD 00 00    	call	_spr_add_anim
3365  112F  F1          	pop	af
3366  1130  F1          	pop	af
3367  1131  F1          	pop	af
3368  1132  3A 00 00    	ld	a,(_s_lin0)
3369  1135  C6 10       	add	a,0x10
3370  1137  47          	ld	b, a
3371  1138  3A 00 00    	ld	a,(_s_col0)
3372  113B  21 00 00    	ld	hl,0x0000
3373  113E  E5          	push	hl
3374  113F  21 87 03    	ld	hl,0x0387
3375  1142  E5          	push	hl
3376  1143  48          	ld	c,b
3377  1144  47          	ld	b,a
3378  1145  C5          	push	bc
3379  1146  CD 00 00    	call	_spr_add_anim
3380  1149  F1          	pop	af
3381  114A  F1          	pop	af
3382  114B  F1          	pop	af
3383  114C  2E 00       	ld	l,0x00
3384  114E  CD 00 00    	call	_zx_border_fastcall
3385  1151  DD 36 FE 01 	ld	(ix-2),0x01
3386  1155  2A 00 00    	ld	hl,(_curr_time)
3387  1158  22 00 00    	ld	(_anim_time),hl
3388  115B              l_player_lost_life_00107:
3389  115B  DD 7E FE    	ld	a,(ix-2)
3390  115E  B7          	or	a, a
3391  115F  28 28       	jr	Z,l_player_lost_life_00131
3392  1161  3E 0C       	ld	a,0x0c
3393  1163  F5          	push	af
3394  1164  33          	inc	sp
3395  1165  21 00 00    	ld	hl,_anim_time
3396  1168  E5          	push	hl
3397  1169  CD 00 00    	call	_game_check_time
3398  116C  F1          	pop	af
3399  116D  33          	inc	sp
3400  116E  7D          	ld	a, l
3401  116F  B7          	or	a, a
3402  1170  28 E9       	jr	Z,l_player_lost_life_00107
3403  1172  2A 00 00    	ld	hl,(_curr_time)
3404  1175  22 00 00    	ld	(_anim_time),hl
3405  1178  3A 00 00    	ld	a,(_anim_count)
3406  117B  B7          	or	a,a
3407  117C  28 05       	jr	Z,l_player_lost_life_00103
3408  117E  CD 00 00    	call	_spr_play_anim
3409  1181  18 D8       	jr	l_player_lost_life_00107
3410  1183              l_player_lost_life_00103:
3411  1183  DD 36 FE 00 	ld	(ix-2),0x00
3412  1187  18 D2       	jr	l_player_lost_life_00107
3413  1189              l_player_lost_life_00131:
3414  1189  1E 00       	ld	e,0x00
3415  118B              l_player_lost_life_00120:
3416  118B  16 00       	ld	d,0x00
3417  118D  21 00 00    	ld	hl,_class
3418  1190  19          	add	hl, de
3419  1191  7E          	ld	a, (hl)
3420  1192  B7          	or	a, a
3421  1193  28 30       	jr	Z,l_player_lost_life_00121
3422  1195  16 00       	ld	d,0x00
3423  1197  21 00 00    	ld	hl,_col
3424  119A  19          	add	hl, de
3425  119B  7E          	ld	a, (hl)
3426  119C  DD 77 FF    	ld	(ix-1),a
3427  119F  16 00       	ld	d,0x00
3428  11A1  21 00 00    	ld	hl,_lin
3429  11A4  19          	add	hl, de
3430  11A5  46          	ld	b, (hl)
3431  11A6  16 00       	ld	d,0x00
3432  11A8  21 00 00    	ld	hl,_tile
3433  11AB  19          	add	hl, de
3434  11AC  4E          	ld	c, (hl)
3435  11AD  16 00       	ld	d,0x00
3436  11AF  21 00 00    	ld	hl,_colint
3437  11B2  19          	add	hl, de
3438  11B3  6E          	ld	l, (hl)
3439  11B4  79          	ld	a, c
3440  11B5  85          	add	a, l
3441  11B6  4F          	ld	c, a
3442  11B7  D5          	push	de
3443  11B8  DD 7E FF    	ld	a,(ix-1)
3444  11BB  F5          	push	af
3445  11BC  33          	inc	sp
3446  11BD  C5          	push	bc
3447  11BE  33          	inc	sp
3448  11BF  51          	ld	d,c
3449  11C0  D5          	push	de
3450  11C1  CD 00 00    	call	_NIRVANAP_spriteT_callee
3451  11C4  D1          	pop	de
3452  11C5              l_player_lost_life_00121:
3453  11C5  1C          	inc	e
3454  11C6  7B          	ld	a, e
3455  11C7  D6 07       	sub	a,0x07
3456  11C9  38 C0       	jr	C,l_player_lost_life_00120
3457  11CB  3A 00 00    	ld	a,(_game_inf_lives)
3458  11CE  B7          	or	a, a
3459  11CF  20 04       	jr	NZ,l_player_lost_life_00114
3460  11D1  21 00 00    	ld	hl,_player_lives
3461  11D4  35          	dec	(hl)
3462  11D5              l_player_lost_life_00114:
3463  11D5  21 00 00    	ld	hl,_player_mana
3464  11D8  36 64       	ld	(hl),0x64
3465  11DA  21 00 00    	ld	hl,_player_vita
3466  11DD  36 64       	ld	(hl),0x64
3467  11DF  3A 00 00    	ld	a,(_player_lives)
3468  11E2  B7          	or	a, a
3469  11E3  28 1D       	jr	Z,l_player_lost_life_00116
3470  11E5  21 F4 01    	ld	hl,0x01f4
3471  11E8  CD 00 00    	call	_z80_delay_ms_fastcall
3472  11EB  3A 00 00    	ld	a,(_game_checkpoint_col)
3473  11EE  32 00 00    	ld	(_player_col_scr),a
3474  11F1  3A 00 00    	ld	a,(_game_checkpoint_lin)
3475  11F4  32 00 00    	ld	(_player_lin_scr),a
3476  11F7  3A 00 00    	ld	a,(_game_checkpoint_scr)
3477  11FA  32 00 00    	ld	(_scr_curr),a
3478  11FD  CD 00 00    	call	_game_round_init
3479  1200  18 0A       	jr	l_player_lost_life_00122
3480  1202              l_player_lost_life_00116:
3481  1202  21 00 00    	ld	hl,_player_lives
3482  1205  36 00       	ld	(hl),0x00
3483  1207  21 00 00    	ld	hl,_game_over
3484  120A  36 01       	ld	(hl),0x01
3485  120C              l_player_lost_life_00122:
3486  120C  F1          	pop	af
3487  120D  DD E1       	pop	ix
3488  120F  C9          	ret
3489  1210              	SECTION code_compiler
3490  1210              ;	---------------------------------
3491  1210              ; Function player_hit
3492  1210              ; ---------------------------------
3493  1210              _player_hit:
3494  1210  7D          	ld	a,l
3495  1211  4D          	ld	c,l
3496  1212  21 00 00    	ld	hl,_player_vita
3497  1215  96          	sub	a, (hl)
3498  1216  30 17       	jr	NC,l_player_hit_00104
3499  1218  3A 00 00    	ld	a,(_game_inmune)
3500  121B  B7          	or	a, a
3501  121C  20 06       	jr	NZ,l_player_hit_00102
3502  121E  21 00 00    	ld	hl,_player_vita
3503  1221  7E          	ld	a, (hl)
3504  1222  91          	sub	a, c
3505  1223  77          	ld	(hl), a
3506  1224              l_player_hit_00102:
3507  1224  2A 00 00    	ld	hl,(_curr_time)
3508  1227  22 00 00    	ld	(_player_hit_time),hl
3509  122A  CD 00 00    	call	_game_update_stats
3510  122D  18 03       	jr	l_player_hit_00106
3511  122F              l_player_hit_00104:
3512  122F  CD 94 10    	call	_player_lost_life
3513  1232              l_player_hit_00106:
3514  1232  C9          	ret
3515  1233              	SECTION IGNORE
3516  0000              
