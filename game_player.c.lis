1     0000              MODULE game_player_c
2     0000              
3     0000              ;--------------------------------------------------------
4     0000              ; File Created by SDCC : free open source ANSI-C Compiler
5     0000              ; Version 3.6.5 #9958 (Mac OS X i386)
6     0000              ;--------------------------------------------------------
7     0000              ; Processed by Z88DK
8     0000              ;--------------------------------------------------------
9     0000              
10    0000              	EXTERN __divschar
11    0000              	EXTERN __divschar_callee
12    0000              	EXTERN __divsint
13    0000              	EXTERN __divsint_callee
14    0000              	EXTERN __divslong
15    0000              	EXTERN __divslong_callee
16    0000              	EXTERN __divslonglong
17    0000              	EXTERN __divslonglong_callee
18    0000              	EXTERN __divsuchar
19    0000              	EXTERN __divsuchar_callee
20    0000              	EXTERN __divuchar
21    0000              	EXTERN __divuchar_callee
22    0000              	EXTERN __divuint
23    0000              	EXTERN __divuint_callee
24    0000              	EXTERN __divulong
25    0000              	EXTERN __divulong_callee
26    0000              	EXTERN __divulonglong
27    0000              	EXTERN __divulonglong_callee
28    0000              	EXTERN __divuschar
29    0000              	EXTERN __divuschar_callee
30    0000              	EXTERN __modschar
31    0000              	EXTERN __modschar_callee
32    0000              	EXTERN __modsint
33    0000              	EXTERN __modsint_callee
34    0000              	EXTERN __modslong
35    0000              	EXTERN __modslong_callee
36    0000              	EXTERN __modslonglong
37    0000              	EXTERN __modslonglong_callee
38    0000              	EXTERN __modsuchar
39    0000              	EXTERN __modsuchar_callee
40    0000              	EXTERN __moduchar
41    0000              	EXTERN __moduchar_callee
42    0000              	EXTERN __moduint
43    0000              	EXTERN __moduint_callee
44    0000              	EXTERN __modulong
45    0000              	EXTERN __modulong_callee
46    0000              	EXTERN __modulonglong
47    0000              	EXTERN __modulonglong_callee
48    0000              	EXTERN __moduschar
49    0000              	EXTERN __moduschar_callee
50    0000              	EXTERN __mulint
51    0000              	EXTERN __mulint_callee
52    0000              	EXTERN __mullong
53    0000              	EXTERN __mullong_callee
54    0000              	EXTERN __mullonglong
55    0000              	EXTERN __mullonglong_callee
56    0000              	EXTERN __mulschar
57    0000              	EXTERN __mulschar_callee
58    0000              	EXTERN __mulsuchar
59    0000              	EXTERN __mulsuchar_callee
60    0000              	EXTERN __muluschar
61    0000              	EXTERN __muluschar_callee
62    0000              	EXTERN __rlslonglong
63    0000              	EXTERN __rlslonglong_callee
64    0000              	EXTERN __rlulonglong
65    0000              	EXTERN __rlulonglong_callee
66    0000              	EXTERN __rrslonglong
67    0000              	EXTERN __rrslonglong_callee
68    0000              	EXTERN __rrulonglong
69    0000              	EXTERN __rrulonglong_callee
70    0000              	EXTERN ___sdcc_call_hl
71    0000              	EXTERN ___sdcc_call_iy
72    0000              	EXTERN ___sdcc_enter_ix
73    0000              	EXTERN _banked_call
74    0000              	EXTERN _banked_ret
75    0000              	EXTERN ___fs2schar
76    0000              	EXTERN ___fs2schar_callee
77    0000              	EXTERN ___fs2sint
78    0000              	EXTERN ___fs2sint_callee
79    0000              	EXTERN ___fs2slong
80    0000              	EXTERN ___fs2slong_callee
81    0000              	EXTERN ___fs2slonglong
82    0000              	EXTERN ___fs2slonglong_callee
83    0000              	EXTERN ___fs2uchar
84    0000              	EXTERN ___fs2uchar_callee
85    0000              	EXTERN ___fs2uint
86    0000              	EXTERN ___fs2uint_callee
87    0000              	EXTERN ___fs2ulong
88    0000              	EXTERN ___fs2ulong_callee
89    0000              	EXTERN ___fs2ulonglong
90    0000              	EXTERN ___fs2ulonglong_callee
91    0000              	EXTERN ___fsadd
92    0000              	EXTERN ___fsadd_callee
93    0000              	EXTERN ___fsdiv
94    0000              	EXTERN ___fsdiv_callee
95    0000              	EXTERN ___fseq
96    0000              	EXTERN ___fseq_callee
97    0000              	EXTERN ___fsgt
98    0000              	EXTERN ___fsgt_callee
99    0000              	EXTERN ___fslt
100   0000              	EXTERN ___fslt_callee
101   0000              	EXTERN ___fsmul
102   0000              	EXTERN ___fsmul_callee
103   0000              	EXTERN ___fsneq
104   0000              	EXTERN ___fsneq_callee
105   0000              	EXTERN ___fssub
106   0000              	EXTERN ___fssub_callee
107   0000              	EXTERN ___schar2fs
108   0000              	EXTERN ___schar2fs_callee
109   0000              	EXTERN ___sint2fs
110   0000              	EXTERN ___sint2fs_callee
111   0000              	EXTERN ___slong2fs
112   0000              	EXTERN ___slong2fs_callee
113   0000              	EXTERN ___slonglong2fs
114   0000              	EXTERN ___slonglong2fs_callee
115   0000              	EXTERN ___uchar2fs
116   0000              	EXTERN ___uchar2fs_callee
117   0000              	EXTERN ___uint2fs
118   0000              	EXTERN ___uint2fs_callee
119   0000              	EXTERN ___ulong2fs
120   0000              	EXTERN ___ulong2fs_callee
121   0000              	EXTERN ___ulonglong2fs
122   0000              	EXTERN ___ulonglong2fs_callee
123   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
126   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
127   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
128   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
129   0000              	EXTERN ____sdcc_4_ldi_save_bc
130   0000              	EXTERN ____sdcc_4_push_hlix
131   0000              	EXTERN ____sdcc_4_push_mhl
132   0000              	EXTERN ____sdcc_lib_setmem_hl
133   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
134   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
135   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
136   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
137   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
138   0000              	EXTERN ____sdcc_ll_add_deix_hlix
139   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
140   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
141   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
142   0000              	EXTERN ____sdcc_ll_asr_hlix_a
143   0000              	EXTERN ____sdcc_ll_asr_mbc_a
144   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
145   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
146   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
147   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
148   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
149   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
150   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
151   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
152   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
153   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
155   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
156   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
157   0000              	EXTERN ____sdcc_ll_push_hlix
158   0000              	EXTERN ____sdcc_ll_push_mhl
159   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
160   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
161   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
162   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
163   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
164   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
165   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
166   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
167   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
168   0000              	EXTERN ____sdcc_load_debc_deix
169   0000              	EXTERN ____sdcc_load_dehl_deix
170   0000              	EXTERN ____sdcc_load_debc_mhl
171   0000              	EXTERN ____sdcc_load_hlde_mhl
172   0000              	EXTERN ____sdcc_store_dehl_bcix
173   0000              	EXTERN ____sdcc_store_debc_hlix
174   0000              	EXTERN ____sdcc_store_debc_mhl
175   0000              	EXTERN ____sdcc_cpu_pop_ei
176   0000              	EXTERN ____sdcc_cpu_pop_ei_jp
177   0000              	EXTERN ____sdcc_cpu_push_di
178   0000              	EXTERN ____sdcc_outi
179   0000              	EXTERN ____sdcc_outi_128
180   0000              	EXTERN ____sdcc_outi_256
181   0000              	EXTERN ____sdcc_ldi
182   0000              	EXTERN ____sdcc_ldi_128
183   0000              	EXTERN ____sdcc_ldi_256
184   0000              
185   0000              ;--------------------------------------------------------
186   0000              ; Public variables in this module
187   0000              ;--------------------------------------------------------
188   0000              	GLOBAL _player_check_map
189   0000              	GLOBAL _player_1up
190   0000              	GLOBAL _player_init
191   0000              	GLOBAL _player_turn
192   0000              	GLOBAL _player_move
193   0000              	GLOBAL _player_check_input
194   0000              	GLOBAL _player_move_input
195   0000              	GLOBAL _player_fix_walk_lin
196   0000              	GLOBAL _player_fire
197   0000              	GLOBAL _player_collision
198   0000              	GLOBAL _player_pick_mushroom
199   0000              	GLOBAL _player_check_stairs_vertical
200   0000              	GLOBAL _player_check_stairs
201   0000              	GLOBAL _player_anim_tile
202   0000              	GLOBAL _player_tile
203   0000              	GLOBAL _player_pick_item
204   0000              	GLOBAL _player_hit_platform
205   0000              	GLOBAL _player_hit_platform_clear
206   0000              	GLOBAL _player_score_add
207   0000              	GLOBAL _player_check_floor
208   0000              	GLOBAL _player_gasta_brick
209   0000              	GLOBAL _player_move_jump
210   0000              	GLOBAL _player_open_door
211   0000              	GLOBAL _player_lost_life
212   0000              	GLOBAL _player_hit
213   0000              ;--------------------------------------------------------
214   0000              ; Externals used
215   0000              ;--------------------------------------------------------
216   0000              	GLOBAL _ulltoa_callee
217   0000              	GLOBAL _ulltoa
218   0000              	GLOBAL _strtoull_callee
219   0000              	GLOBAL _strtoull
220   0000              	GLOBAL _strtoll_callee
221   0000              	GLOBAL _strtoll
222   0000              	GLOBAL _lltoa_callee
223   0000              	GLOBAL _lltoa
224   0000              	GLOBAL _llabs_callee
225   0000              	GLOBAL _llabs
226   0000              	GLOBAL __lldivu__callee
227   0000              	GLOBAL __lldivu_
228   0000              	GLOBAL __lldiv__callee
229   0000              	GLOBAL __lldiv_
230   0000              	GLOBAL _atoll_callee
231   0000              	GLOBAL _atoll
232   0000              	GLOBAL _realloc_unlocked_callee
233   0000              	GLOBAL _realloc_unlocked
234   0000              	GLOBAL _malloc_unlocked_fastcall
235   0000              	GLOBAL _malloc_unlocked
236   0000              	GLOBAL _free_unlocked_fastcall
237   0000              	GLOBAL _free_unlocked
238   0000              	GLOBAL _calloc_unlocked_callee
239   0000              	GLOBAL _calloc_unlocked
240   0000              	GLOBAL _aligned_alloc_unlocked_callee
241   0000              	GLOBAL _aligned_alloc_unlocked
242   0000              	GLOBAL _realloc_callee
243   0000              	GLOBAL _realloc
244   0000              	GLOBAL _malloc_fastcall
245   0000              	GLOBAL _malloc
246   0000              	GLOBAL _free_fastcall
247   0000              	GLOBAL _free
248   0000              	GLOBAL _calloc_callee
249   0000              	GLOBAL _calloc
250   0000              	GLOBAL _aligned_alloc_callee
251   0000              	GLOBAL _aligned_alloc
252   0000              	GLOBAL _utoa_callee
253   0000              	GLOBAL _utoa
254   0000              	GLOBAL _ultoa_callee
255   0000              	GLOBAL _ultoa
256   0000              	GLOBAL _system_fastcall
257   0000              	GLOBAL _system
258   0000              	GLOBAL _strtoul_callee
259   0000              	GLOBAL _strtoul
260   0000              	GLOBAL _strtol_callee
261   0000              	GLOBAL _strtol
262   0000              	GLOBAL _strtof_callee
263   0000              	GLOBAL _strtof
264   0000              	GLOBAL _strtod_callee
265   0000              	GLOBAL _strtod
266   0000              	GLOBAL _srand_fastcall
267   0000              	GLOBAL _srand
268   0000              	GLOBAL _rand
269   0000              	GLOBAL _quick_exit_fastcall
270   0000              	GLOBAL _quick_exit
271   0000              	GLOBAL _qsort_callee
272   0000              	GLOBAL _qsort
273   0000              	GLOBAL _ltoa_callee
274   0000              	GLOBAL _ltoa
275   0000              	GLOBAL _labs_fastcall
276   0000              	GLOBAL _labs
277   0000              	GLOBAL _itoa_callee
278   0000              	GLOBAL _itoa
279   0000              	GLOBAL _ftoh_callee
280   0000              	GLOBAL _ftoh
281   0000              	GLOBAL _ftog_callee
282   0000              	GLOBAL _ftog
283   0000              	GLOBAL _ftoe_callee
284   0000              	GLOBAL _ftoe
285   0000              	GLOBAL _ftoa_callee
286   0000              	GLOBAL _ftoa
287   0000              	GLOBAL _exit_fastcall
288   0000              	GLOBAL _exit
289   0000              	GLOBAL _dtoh_callee
290   0000              	GLOBAL _dtoh
291   0000              	GLOBAL _dtog_callee
292   0000              	GLOBAL _dtog
293   0000              	GLOBAL _dtoe_callee
294   0000              	GLOBAL _dtoe
295   0000              	GLOBAL _dtoa_callee
296   0000              	GLOBAL _dtoa
297   0000              	GLOBAL _bsearch_callee
298   0000              	GLOBAL _bsearch
299   0000              	GLOBAL _atol_fastcall
300   0000              	GLOBAL _atol
301   0000              	GLOBAL _atoi_fastcall
302   0000              	GLOBAL _atoi
303   0000              	GLOBAL _atof_fastcall
304   0000              	GLOBAL _atof
305   0000              	GLOBAL _atexit_fastcall
306   0000              	GLOBAL _atexit
307   0000              	GLOBAL _at_quick_exit_fastcall
308   0000              	GLOBAL _at_quick_exit
309   0000              	GLOBAL _abs_fastcall
310   0000              	GLOBAL _abs
311   0000              	GLOBAL _abort
312   0000              	GLOBAL __strtou__callee
313   0000              	GLOBAL __strtou_
314   0000              	GLOBAL __strtoi__callee
315   0000              	GLOBAL __strtoi_
316   0000              	GLOBAL __random_uniform_xor_8__fastcall
317   0000              	GLOBAL __random_uniform_xor_8_
318   0000              	GLOBAL __random_uniform_xor_32__fastcall
319   0000              	GLOBAL __random_uniform_xor_32_
320   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
321   0000              	GLOBAL __random_uniform_cmwc_8_
322   0000              	GLOBAL __shellsort__callee
323   0000              	GLOBAL __shellsort_
324   0000              	GLOBAL __quicksort__callee
325   0000              	GLOBAL __quicksort_
326   0000              	GLOBAL __insertion_sort__callee
327   0000              	GLOBAL __insertion_sort_
328   0000              	GLOBAL __ldivu__callee
329   0000              	GLOBAL __ldivu_
330   0000              	GLOBAL __ldiv__callee
331   0000              	GLOBAL __ldiv_
332   0000              	GLOBAL __divu__callee
333   0000              	GLOBAL __divu_
334   0000              	GLOBAL __div__callee
335   0000              	GLOBAL __div_
336   0000              	GLOBAL _NIRVANAP_drawTW_raw_callee
337   0000              	GLOBAL _NIRVANAP_drawTW_raw
338   0000              	GLOBAL _NIRVANAP_drawTW_callee
339   0000              	GLOBAL _NIRVANAP_drawTW
340   0000              	GLOBAL _NIRVANAP_drawW_raw_callee
341   0000              	GLOBAL _NIRVANAP_drawW_raw
342   0000              	GLOBAL _NIRVANAP_drawW_callee
343   0000              	GLOBAL _NIRVANAP_drawW
344   0000              	GLOBAL _NIRVANAP_spriteT_callee
345   0000              	GLOBAL _NIRVANAP_spriteT
346   0000              	GLOBAL _NIRVANAP_fillC_callee
347   0000              	GLOBAL _NIRVANAP_fillC
348   0000              	GLOBAL _NIRVANAP_readC_callee
349   0000              	GLOBAL _NIRVANAP_readC
350   0000              	GLOBAL _NIRVANAP_paintC_callee
351   0000              	GLOBAL _NIRVANAP_paintC
352   0000              	GLOBAL _NIRVANAP_printC_callee
353   0000              	GLOBAL _NIRVANAP_printC
354   0000              	GLOBAL _NIRVANAP_fillT_raw_callee
355   0000              	GLOBAL _NIRVANAP_fillT_raw
356   0000              	GLOBAL _NIRVANAP_fillT_callee
357   0000              	GLOBAL _NIRVANAP_fillT
358   0000              	GLOBAL _NIRVANAP_drawT_raw_callee
359   0000              	GLOBAL _NIRVANAP_drawT_raw
360   0000              	GLOBAL _NIRVANAP_drawT_callee
361   0000              	GLOBAL _NIRVANAP_drawT
362   0000              	GLOBAL _NIRVANAP_stop
363   0000              	GLOBAL _NIRVANAP_start
364   0000              	GLOBAL _debug3
365   0000              	GLOBAL _debug2
366   0000              	GLOBAL _debug
367   0000              	GLOBAL _zx_print_str
368   0000              	GLOBAL _zx_print_int
369   0000              	GLOBAL _zx_print_chr
370   0000              	GLOBAL _zx_print_bonus_time
371   0000              	GLOBAL _zx_isr
372   0000              	GLOBAL _z80_otdr_callee
373   0000              	GLOBAL _z80_otdr
374   0000              	GLOBAL _z80_otir_callee
375   0000              	GLOBAL _z80_otir
376   0000              	GLOBAL _z80_outp_callee
377   0000              	GLOBAL _z80_outp
378   0000              	GLOBAL _z80_indr_callee
379   0000              	GLOBAL _z80_indr
380   0000              	GLOBAL _z80_inir_callee
381   0000              	GLOBAL _z80_inir
382   0000              	GLOBAL _z80_inp_fastcall
383   0000              	GLOBAL _z80_inp
384   0000              	GLOBAL _z80_set_int_state_fastcall
385   0000              	GLOBAL _z80_set_int_state
386   0000              	GLOBAL _z80_get_int_state
387   0000              	GLOBAL _z80_delay_tstate_fastcall
388   0000              	GLOBAL _z80_delay_tstate
389   0000              	GLOBAL _z80_delay_ms_fastcall
390   0000              	GLOBAL _z80_delay_ms
391   0000              	GLOBAL _im2_remove_generic_callback_callee
392   0000              	GLOBAL _im2_remove_generic_callback
393   0000              	GLOBAL _im2_prepend_generic_callback_callee
394   0000              	GLOBAL _im2_prepend_generic_callback
395   0000              	GLOBAL _im2_append_generic_callback_callee
396   0000              	GLOBAL _im2_append_generic_callback
397   0000              	GLOBAL _im2_create_generic_isr_8080_callee
398   0000              	GLOBAL _im2_create_generic_isr_8080
399   0000              	GLOBAL _im2_create_generic_isr_callee
400   0000              	GLOBAL _im2_create_generic_isr
401   0000              	GLOBAL _im2_install_isr_callee
402   0000              	GLOBAL _im2_install_isr
403   0000              	GLOBAL _im2_init_fastcall
404   0000              	GLOBAL _im2_init
405   0000              	GLOBAL _intrinsic_swap_word_32_fastcall
406   0000              	GLOBAL _intrinsic_swap_word_32
407   0000              	GLOBAL _intrinsic_swap_endian_32_fastcall
408   0000              	GLOBAL _intrinsic_swap_endian_32
409   0000              	GLOBAL _intrinsic_swap_endian_16_fastcall
410   0000              	GLOBAL _intrinsic_swap_endian_16
411   0000              	GLOBAL _intrinsic_return_de
412   0000              	GLOBAL _intrinsic_return_bc
413   0000              	GLOBAL _intrinsic_exx
414   0000              	GLOBAL _intrinsic_ex_de_hl
415   0000              	GLOBAL _intrinsic_nop
416   0000              	GLOBAL _intrinsic_im_2
417   0000              	GLOBAL _intrinsic_im_1
418   0000              	GLOBAL _intrinsic_im_0
419   0000              	GLOBAL _intrinsic_retn
420   0000              	GLOBAL _intrinsic_reti
421   0000              	GLOBAL _intrinsic_halt
422   0000              	GLOBAL _intrinsic_ei
423   0000              	GLOBAL _intrinsic_di
424   0000              	GLOBAL _intrinsic_stub
425   0000              	GLOBAL _intrinsic_outi
426   0000              	GLOBAL _intrinsic_ldi
427   0000              	GLOBAL _zx_pattern_fill_callee
428   0000              	GLOBAL _zx_pattern_fill
429   0000              	GLOBAL _zx_saddrpup_fastcall
430   0000              	GLOBAL _zx_saddrpup
431   0000              	GLOBAL _zx_saddrpright_callee
432   0000              	GLOBAL _zx_saddrpright
433   0000              	GLOBAL _zx_saddrpleft_callee
434   0000              	GLOBAL _zx_saddrpleft
435   0000              	GLOBAL _zx_saddrpdown_fastcall
436   0000              	GLOBAL _zx_saddrpdown
437   0000              	GLOBAL _zx_saddrcup_fastcall
438   0000              	GLOBAL _zx_saddrcup
439   0000              	GLOBAL _zx_saddrcright_fastcall
440   0000              	GLOBAL _zx_saddrcright
441   0000              	GLOBAL _zx_saddrcleft_fastcall
442   0000              	GLOBAL _zx_saddrcleft
443   0000              	GLOBAL _zx_saddrcdown_fastcall
444   0000              	GLOBAL _zx_saddrcdown
445   0000              	GLOBAL _zx_saddr2py_fastcall
446   0000              	GLOBAL _zx_saddr2py
447   0000              	GLOBAL _zx_saddr2px_fastcall
448   0000              	GLOBAL _zx_saddr2px
449   0000              	GLOBAL _zx_saddr2cy_fastcall
450   0000              	GLOBAL _zx_saddr2cy
451   0000              	GLOBAL _zx_saddr2cx_fastcall
452   0000              	GLOBAL _zx_saddr2cx
453   0000              	GLOBAL _zx_saddr2aaddr_fastcall
454   0000              	GLOBAL _zx_saddr2aaddr
455   0000              	GLOBAL _zx_py2saddr_fastcall
456   0000              	GLOBAL _zx_py2saddr
457   0000              	GLOBAL _zx_py2aaddr_fastcall
458   0000              	GLOBAL _zx_py2aaddr
459   0000              	GLOBAL _zx_pxy2saddr_callee
460   0000              	GLOBAL _zx_pxy2saddr
461   0000              	GLOBAL _zx_pxy2aaddr_callee
462   0000              	GLOBAL _zx_pxy2aaddr
463   0000              	GLOBAL _zx_px2bitmask_fastcall
464   0000              	GLOBAL _zx_px2bitmask
465   0000              	GLOBAL _zx_cy2saddr_fastcall
466   0000              	GLOBAL _zx_cy2saddr
467   0000              	GLOBAL _zx_cy2aaddr_fastcall
468   0000              	GLOBAL _zx_cy2aaddr
469   0000              	GLOBAL _zx_cxy2saddr_callee
470   0000              	GLOBAL _zx_cxy2saddr
471   0000              	GLOBAL _zx_cxy2aaddr_callee
472   0000              	GLOBAL _zx_cxy2aaddr
473   0000              	GLOBAL _zx_bitmask2px_fastcall
474   0000              	GLOBAL _zx_bitmask2px
475   0000              	GLOBAL _zx_aaddrcup_fastcall
476   0000              	GLOBAL _zx_aaddrcup
477   0000              	GLOBAL _zx_aaddrcright_fastcall
478   0000              	GLOBAL _zx_aaddrcright
479   0000              	GLOBAL _zx_aaddrcleft_fastcall
480   0000              	GLOBAL _zx_aaddrcleft
481   0000              	GLOBAL _zx_aaddrcdown_fastcall
482   0000              	GLOBAL _zx_aaddrcdown
483   0000              	GLOBAL _zx_aaddr2saddr_fastcall
484   0000              	GLOBAL _zx_aaddr2saddr
485   0000              	GLOBAL _zx_aaddr2py_fastcall
486   0000              	GLOBAL _zx_aaddr2py
487   0000              	GLOBAL _zx_aaddr2px_fastcall
488   0000              	GLOBAL _zx_aaddr2px
489   0000              	GLOBAL _zx_aaddr2cy_fastcall
490   0000              	GLOBAL _zx_aaddr2cy
491   0000              	GLOBAL _zx_aaddr2cx_fastcall
492   0000              	GLOBAL _zx_aaddr2cx
493   0000              	GLOBAL _zx_visit_wc_pix_callee
494   0000              	GLOBAL _zx_visit_wc_pix
495   0000              	GLOBAL _zx_visit_wc_attr_callee
496   0000              	GLOBAL _zx_visit_wc_attr
497   0000              	GLOBAL _zx_scroll_wc_up_pix_callee
498   0000              	GLOBAL _zx_scroll_wc_up_pix
499   0000              	GLOBAL _zx_scroll_wc_up_attr_callee
500   0000              	GLOBAL _zx_scroll_wc_up_attr
501   0000              	GLOBAL _zx_scroll_wc_up_callee
502   0000              	GLOBAL _zx_scroll_wc_up
503   0000              	GLOBAL _zx_scroll_up_pix_callee
504   0000              	GLOBAL _zx_scroll_up_pix
505   0000              	GLOBAL _zx_scroll_up_attr_callee
506   0000              	GLOBAL _zx_scroll_up_attr
507   0000              	GLOBAL _zx_scroll_up_callee
508   0000              	GLOBAL _zx_scroll_up
509   0000              	GLOBAL _zx_cls_wc_pix_callee
510   0000              	GLOBAL _zx_cls_wc_pix
511   0000              	GLOBAL _zx_cls_wc_attr_callee
512   0000              	GLOBAL _zx_cls_wc_attr
513   0000              	GLOBAL _zx_cls_wc_callee
514   0000              	GLOBAL _zx_cls_wc
515   0000              	GLOBAL _zx_cls_pix_fastcall
516   0000              	GLOBAL _zx_cls_pix
517   0000              	GLOBAL _zx_cls_attr_fastcall
518   0000              	GLOBAL _zx_cls_attr
519   0000              	GLOBAL _zx_cls_fastcall
520   0000              	GLOBAL _zx_cls
521   0000              	GLOBAL _zx_border_fastcall
522   0000              	GLOBAL _zx_border
523   0000              	GLOBAL _spr_colision_b2
524   0000              	GLOBAL _spr_colision_b
525   0000              	GLOBAL _spr_unflatten
526   0000              	GLOBAL _spr_flatten
527   0000              	GLOBAL _spr_btile_paint_back
528   0000              	GLOBAL _spr_bullet_explode
529   0000              	GLOBAL _spr_init_effects
530   0000              	GLOBAL _spr_turn_horizontal
531   0000              	GLOBAL _spr_bullets_play
532   0000              	GLOBAL _spr_play_anim
533   0000              	GLOBAL _spr_add_anim
534   0000              	GLOBAL _spr_clear_scr
535   0000              	GLOBAL _spr_page_map
536   0000              	GLOBAL _spr_page_down
537   0000              	GLOBAL _spr_page_up
538   0000              	GLOBAL _spr_page_right
539   0000              	GLOBAL _spr_page_left
540   0000              	GLOBAL _spr_tile_paint
541   0000              	GLOBAL _spr_calc_hor
542   0000              	GLOBAL _spr_draw_index
543   0000              	GLOBAL _spr_brick_anim
544   0000              	GLOBAL _spr_back_repaint
545   0000              	GLOBAL _spr_tile
546   0000              	GLOBAL _spr_destroy
547   0000              	GLOBAL _spr_tile_dir
548   0000              	GLOBAL _spr_redraw
549   0000              	GLOBAL _spr_move_left
550   0000              	GLOBAL _spr_move_right
551   0000              	GLOBAL _spr_move_horizontal
552   0000              	GLOBAL _spr_move_down
553   0000              	GLOBAL _spr_move_up
554   0000              	GLOBAL _spr_turn_vertical
555   0000              	GLOBAL _spr_calc_index
556   0000              	GLOBAL _spr_chktime
557   0000              	GLOBAL _menu_define_key
558   0000              	GLOBAL _menu_redefine
559   0000              	GLOBAL _menu_main_print
560   0000              	GLOBAL _menu_main
561   0000              	GLOBAL _game_match_back
562   0000              	GLOBAL _game_attribs
563   0000              	GLOBAL _game_boss_clear
564   0000              	GLOBAL _game_boss_kill
565   0000              	GLOBAL _game_obj_clear
566   0000              	GLOBAL _game_obj_chk
567   0000              	GLOBAL _game_obj_set
568   0000              	GLOBAL _game_shoot_fire_boss
569   0000              	GLOBAL _game_shoot_fire
570   0000              	GLOBAL _game_add_enemy
571   0000              	GLOBAL _game_print_header
572   0000              	GLOBAL _game_check_time
573   0000              	GLOBAL _game_rotate_attrib_osd
574   0000              	GLOBAL _game_rotate_attrib
575   0000              	GLOBAL _game_colour_message
576   0000              	GLOBAL _game_paint_attrib_lin_osd
577   0000              	GLOBAL _game_paint_attrib_lin_h
578   0000              	GLOBAL _game_paint_attrib_lin
579   0000              	GLOBAL _game_print_score
580   0000              	GLOBAL _game_check_cell
581   0000              	GLOBAL _game_check_map
582   0000              	GLOBAL _game_loop
583   0000              	GLOBAL _game_round_init
584   0000              	GLOBAL _game_start_timer
585   0000              	GLOBAL _game_update_stats
586   0000              	GLOBAL _game_print_footer
587   0000              	GLOBAL _game_fill_row
588   0000              	GLOBAL _game_fps
589   0000              	GLOBAL _game_respawn
590   0000              	GLOBAL _game_draw_screen
591   0000              	GLOBAL _boss_turn
592   0000              	GLOBAL _enemy_avoid_dead
593   0000              	GLOBAL _enemy_avoid_fall
594   0000              	GLOBAL _enemy_kill
595   0000              	GLOBAL _enemy_respawn
596   0000              	GLOBAL _enemy_init
597   0000              	GLOBAL _enemy_move
598   0000              	GLOBAL _enemy_turn
599   0000              	GLOBAL _enemy_static
600   0000              	GLOBAL _enemy_walk
601   0000              	GLOBAL _enemy_horizontal
602   0000              	GLOBAL _enemy_vertical
603   0000              	GLOBAL _ay_fx_play
604   0000              	GLOBAL _ay_midi_play
605   0000              	GLOBAL _ay_is_playing
606   0000              	GLOBAL _ay_reset
607   0000              	GLOBAL _test_func
608   0000              	GLOBAL _test_proc
609   0000              	GLOBAL _in_mouse_kempston_wheel_delta
610   0000              	GLOBAL _in_mouse_kempston_wheel
611   0000              	GLOBAL _in_mouse_kempston_callee
612   0000              	GLOBAL _in_mouse_kempston
613   0000              	GLOBAL _in_mouse_kempston_setpos_callee
614   0000              	GLOBAL _in_mouse_kempston_setpos
615   0000              	GLOBAL _in_mouse_kempston_reset
616   0000              	GLOBAL _in_mouse_kempston_init
617   0000              	GLOBAL _in_mouse_amx_wheel_delta
618   0000              	GLOBAL _in_mouse_amx_wheel
619   0000              	GLOBAL _in_mouse_amx_callee
620   0000              	GLOBAL _in_mouse_amx
621   0000              	GLOBAL _in_mouse_amx_setpos_callee
622   0000              	GLOBAL _in_mouse_amx_setpos
623   0000              	GLOBAL _in_mouse_amx_reset
624   0000              	GLOBAL _in_mouse_amx_init_callee
625   0000              	GLOBAL _in_mouse_amx_init
626   0000              	GLOBAL _in_stick_sinclair2
627   0000              	GLOBAL _in_stick_sinclair1
628   0000              	GLOBAL _in_stick_kempston
629   0000              	GLOBAL _in_stick_fuller
630   0000              	GLOBAL _in_stick_cursor
631   0000              	GLOBAL _in_stick_keyboard_fastcall
632   0000              	GLOBAL _in_stick_keyboard
633   0000              	GLOBAL _in_wait_nokey
634   0000              	GLOBAL _in_wait_key
635   0000              	GLOBAL _in_test_key
636   0000              	GLOBAL _in_pause_fastcall
637   0000              	GLOBAL _in_pause
638   0000              	GLOBAL _in_key_scancode_fastcall
639   0000              	GLOBAL _in_key_scancode
640   0000              	GLOBAL _in_key_pressed_fastcall
641   0000              	GLOBAL _in_key_pressed
642   0000              	GLOBAL _in_inkey
643   0000              	GLOBAL _NIRVANAP_CHAR_TABLE
644   0000              	GLOBAL _NIRVANAP_WIDE_IMAGES
645   0000              	GLOBAL _NIRVANAP_TILE_IMAGES
646   0000              	GLOBAL _NIRVANAP_HOLE
647   0000              	GLOBAL _NIRVANAP_ISR_HOOK
648   0000              	GLOBAL _scan_map
649   0000              	GLOBAL _key_map
650   0000              	GLOBAL _player_lvl_table
651   0000              	GLOBAL _map_paper_last
652   0000              	GLOBAL _map_paper_clr
653   0000              	GLOBAL _map_paper
654   0000              	GLOBAL _draw_count
655   0000              	GLOBAL _g_player_hit_right
656   0000              	GLOBAL _g_player_hit_left
657   0000              	GLOBAL _bullet_count
658   0000              	GLOBAL _spr_hack
659   0000              	GLOBAL _boss_stat
660   0000              	GLOBAL _boss_time_fire
661   0000              	GLOBAL _boss_time
662   0000              	GLOBAL _boss_tile
663   0000              	GLOBAL _boss_inc
664   0000              	GLOBAL _boss_col
665   0000              	GLOBAL _boss_lin
666   0000              	GLOBAL _bullet
667   0000              	GLOBAL _bullet_vel
668   0000              	GLOBAL _bullet_frames
669   0000              	GLOBAL _bullet_colint
670   0000              	GLOBAL _bullet_dir
671   0000              	GLOBAL _bullet_tile
672   0000              	GLOBAL _bullet_col
673   0000              	GLOBAL _bullet_lin
674   0000              	GLOBAL _bullet_col0
675   0000              	GLOBAL _bullet_lin0
676   0000              	GLOBAL _bullet_max
677   0000              	GLOBAL _bullet_class
678   0000              	GLOBAL _mush_class
679   0000              	GLOBAL _mush_index
680   0000              	GLOBAL _anim_count
681   0000              	GLOBAL _anim_respanwn
682   0000              	GLOBAL _anim_loop
683   0000              	GLOBAL _anim_end
684   0000              	GLOBAL _anim_int
685   0000              	GLOBAL _anim_tile
686   0000              	GLOBAL _anim_col
687   0000              	GLOBAL _anim_lin
688   0000              	GLOBAL _map_heigth
689   0000              	GLOBAL _map_width
690   0000              	GLOBAL _scr_curr
691   0000              	GLOBAL _sprite_kind
692   0000              	GLOBAL _scr_obj1
693   0000              	GLOBAL _scr_obj0
694   0000              	GLOBAL _scr_map
695   0000              	GLOBAL _sprite_speed_alt
696   0000              	GLOBAL _spr_init
697   0000              	GLOBAL _spr_map_tile
698   0000              	GLOBAL _sprite_frames
699   0000              	GLOBAL _sprite_speed
700   0000              	GLOBAL _screen_ink
701   0000              	GLOBAL _screen_paper
702   0000              	GLOBAL _player_onstair
703   0000              	GLOBAL _game_start_scr
704   0000              	GLOBAL _game_respawn_tile
705   0000              	GLOBAL _game_respawn_index
706   0000              	GLOBAL _game_respawn_time
707   0000              	GLOBAL _game_score_top
708   0000              	GLOBAL _player_coins
709   0000              	GLOBAL _player_lives
710   0000              	GLOBAL _game_over
711   0000              	GLOBAL _game_sound
712   0000              	GLOBAL _game_inmune
713   0000              	GLOBAL _game_god_mode
714   0000              	GLOBAL _sprite_curr_index
715   0000              	GLOBAL _spr_count
716   0000              	GLOBAL _bullet_time
717   0000              	GLOBAL _anim_time
718   0000              	GLOBAL _frame_time
719   0000              	GLOBAL _curr_time
720   0000              	GLOBAL _s_state
721   0000              	GLOBAL _attrib_osd
722   0000              	GLOBAL _attrib_hl
723   0000              	GLOBAL _attrib
724   0000              	GLOBAL _zx_val_asm
725   0000              	GLOBAL _enemies
726   0000              	GLOBAL _tmp_ui
727   0000              	GLOBAL _tmp_sc
728   0000              	GLOBAL _tmp_uc
729   0000              	GLOBAL _tmp1
730   0000              	GLOBAL _tmp0
731   0000              	GLOBAL _tmp
732   0000              	GLOBAL _index1
733   0000              	GLOBAL _index0
734   0000              	GLOBAL _loop_count
735   0000              	GLOBAL _s_col1
736   0000              	GLOBAL _s_col0
737   0000              	GLOBAL _s_lin1
738   0000              	GLOBAL _s_lin0
739   0000              	GLOBAL _s_tile1
740   0000              	GLOBAL _s_tile0
741   0000              	GLOBAL _player_brick_time
742   0000              	GLOBAL _player_hit_count
743   0000              	GLOBAL _sprite_horizontal_check
744   0000              	GLOBAL _sprite_on_air
745   0000              	GLOBAL _sprite
746   0000              	GLOBAL _fps
747   0000              	GLOBAL _game_2buttons
748   0000              	GLOBAL _game_respawn_curr_time
749   0000              	GLOBAL _game_worldup
750   0000              	GLOBAL _game_mush_count
751   0000              	GLOBAL _game_boss_fix
752   0000              	GLOBAL _game_boss_hit
753   0000              	GLOBAL _game_boss_alive
754   0000              	GLOBAL _game_boss
755   0000              	GLOBAL _game_world
756   0000              	GLOBAL _game_gravity
757   0000              	GLOBAL _player_onfire
758   0000              	GLOBAL _player_anim_stair
759   0000              	GLOBAL _player_hit_time
760   0000              	GLOBAL _player_lin_scr
761   0000              	GLOBAL _player_col_scr
762   0000              	GLOBAL _player_lvl
763   0000              	GLOBAL _player_int
764   0000              	GLOBAL _player_str
765   0000              	GLOBAL _player_max_vita
766   0000              	GLOBAL _player_max_mana
767   0000              	GLOBAL _player_vita
768   0000              	GLOBAL _player_mana
769   0000              	GLOBAL _player_keys
770   0000              	GLOBAL _player_vel_inc
771   0000              	GLOBAL _player_vel_y1
772   0000              	GLOBAL _player_vel_y0
773   0000              	GLOBAL _player_vel_y
774   0000              	GLOBAL _player_vel_x
775   0000              	GLOBAL _player_score
776   0000              	GLOBAL _last_time
777   0000              	GLOBAL _player_slide
778   0000              	GLOBAL _spr_timer
779   0000              	GLOBAL _jump_lin
780   0000              	GLOBAL _player_hit_col
781   0000              	GLOBAL _player_hit_lin
782   0000              	GLOBAL _colint
783   0000              	GLOBAL _col
784   0000              	GLOBAL _lin
785   0000              	GLOBAL _tile
786   0000              	GLOBAL _state_a
787   0000              	GLOBAL _state
788   0000              	GLOBAL _class
789   0000              	GLOBAL _tbuffer
790   0000              	GLOBAL _dirs_alt
791   0000              	GLOBAL _dirs
792   0000              	GLOBAL _k2
793   0000              	GLOBAL _k1
794   0000              	GLOBAL _joyfunc2
795   0000              	GLOBAL _joyfunc1
796   0000              	GLOBAL _btiles
797   0000              	GLOBAL _spec128
798   0000              	GLOBAL _GLOBAL_ZX_PORT_7FFD
799   0000              	GLOBAL _GLOBAL_ZX_PORT_1FFD
800   0000              	GLOBAL _GLOBAL_ZX_PORT_FE
801   0000              	GLOBAL _ay_effect_20
802   0000              	GLOBAL _ay_effect_19
803   0000              	GLOBAL _ay_effect_18
804   0000              	GLOBAL _ay_effect_17
805   0000              	GLOBAL _ay_effect_16
806   0000              	GLOBAL _ay_effect_15
807   0000              	GLOBAL _ay_effect_14
808   0000              	GLOBAL _ay_effect_13
809   0000              	GLOBAL _ay_effect_12
810   0000              	GLOBAL _ay_effect_11
811   0000              	GLOBAL _ay_effect_10
812   0000              	GLOBAL _ay_effect_09
813   0000              	GLOBAL _ay_effect_08
814   0000              	GLOBAL _ay_effect_07
815   0000              	GLOBAL _ay_effect_06
816   0000              	GLOBAL _ay_effect_05
817   0000              	GLOBAL _ay_effect_04
818   0000              	GLOBAL _ay_effect_03
819   0000              	GLOBAL _ay_effect_02
820   0000              	GLOBAL _ay_effect_01
821   0000              	GLOBAL _pb_midi_phase_1
822   0000              	GLOBAL _pb_midi_title
823   0000              	GLOBAL _control_method
824   0000              	GLOBAL _world0_h
825   0000              	GLOBAL _world0_w
826   0000              	GLOBAL _world0
827   0000              	GLOBAL _paper0
828   0000              	GLOBAL _lenght0
829   0000              	GLOBAL _start_scr0
830   0000              ;--------------------------------------------------------
831   0000              ; special function registers
832   0000              ;--------------------------------------------------------
833   0000              defc _IO_FE	=	0x00fe
834   0000              defc _IO_1FFD	=	0x1ffd
835   0000              defc _IO_7FFD	=	0x7ffd
836   0000              ;--------------------------------------------------------
837   0000              ; ram data
838   0000              ;--------------------------------------------------------
839   0000              	SECTION bss_compiler
840   0000              ;--------------------------------------------------------
841   0000              ; ram data
842   0000              ;--------------------------------------------------------
843   0000              
844   0000              IF 0
845   0000              
846   0000              ; .area _INITIALIZED removed by z88dk
847   0000              
848   0000              
849   0000              ENDIF
850   0000              
851   0000              ;--------------------------------------------------------
852   0000              ; absolute external ram data
853   0000              ;--------------------------------------------------------
854   0000              	SECTION IGNORE
855   0000              ;--------------------------------------------------------
856   0000              ; global & static initialisations
857   0000              ;--------------------------------------------------------
858   0000              	SECTION code_crt_init
859   0000              ;--------------------------------------------------------
860   0000              ; Home
861   0000              ;--------------------------------------------------------
862   0000              	SECTION IGNORE
863   0000              ;--------------------------------------------------------
864   0000              ; code
865   0000              ;--------------------------------------------------------
866   0000              	SECTION code_compiler
867   0000              ;	---------------------------------
868   0000              ; Function player_init
869   0000              ; ---------------------------------
870   0000              _player_init:
871   0000  CD 00 00    	call	___sdcc_enter_ix
872   0003  21 07 00    	ld	hl, +(_class + 0x0007)
873   0006  36 00       	ld	(hl),0x00
874   0008  21 07 00    	ld	hl, +(_tile + 0x0007)
875   000B  DD 7E 06    	ld	a,(ix+6)
876   000E  77          	ld	(hl), a
877   000F  21 07 00    	ld	hl, +(_lin + 0x0007)
878   0012  DD 7E 04    	ld	a,(ix+4)
879   0015  77          	ld	(hl), a
880   0016  21 07 00    	ld	hl, +(_col + 0x0007)
881   0019  DD 7E 05    	ld	a,(ix+5)
882   001C  77          	ld	(hl), a
883   001D  21 07 00    	ld	hl, +(_colint + 0x0007)
884   0020  36 00       	ld	(hl),0x00
885   0022  21 07 00    	ld	hl, +(_state + 0x0007)
886   0025  36 00       	ld	(hl),0x00
887   0027  01 07 00    	ld	bc,_state_a+7
888   002A  AF          	xor	a, a
889   002B  02          	ld	(bc), a
890   002C  21 07 00    	ld	hl, +(_jump_lin + 0x0007)
891   002F  DD 7E 04    	ld	a,(ix+4)
892   0032  77          	ld	(hl), a
893   0033  ED 5B 00 00 	ld	de,(_curr_time)
894   0037  ED 53 0E 00 	ld	(_last_time + 0x000e),de
895   003B  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
896   003E  36 00       	ld	(hl),0x00
897   0040  0A          	ld	a, (bc)
898   0041  F6 11       	or	a,+(0x01|0x10)
899   0043  02          	ld	(bc),a
900   0044  21 00 00    	ld	hl,_player_hit_col
901   0047  36 00       	ld	(hl),0x00
902   0049  21 00 00    	ld	hl,_player_hit_lin
903   004C  36 00       	ld	(hl),0x00
904   004E  21 00 00    	ld	hl,_player_slide
905   0051  36 00       	ld	(hl),0x00
906   0053  21 00 00    	ld	hl,_player_onstair
907   0056  36 00       	ld	(hl),0x00
908   0058  21 00 00    	ld	hl,_player_onfire
909   005B  36 00       	ld	(hl),0x00
910   005D  DD 66 05    	ld	h,(ix+5)
911   0060  DD 6E 04    	ld	l,(ix+4)
912   0063  E5          	push	hl
913   0064  DD 56 06    	ld	d,(ix+6)
914   0067  1E 07       	ld	e,0x07
915   0069  D5          	push	de
916   006A  CD 00 00    	call	_NIRVANAP_spriteT_callee
917   006D  DD E1       	pop	ix
918   006F  C9          	ret
919   0070              	SECTION code_compiler
920   0070              ;	---------------------------------
921   0070              ; Function player_turn
922   0070              ; ---------------------------------
923   0070              _player_turn:
924   0070  21 00 00    	ld	hl,_sprite
925   0073  CD 00 00    	call	_spr_chktime
926   0076  7D          	ld	a, l
927   0077  B7          	or	a, a
928   0078  C8          	ret	Z
929   0079  21 00 00    	ld	hl,_k1
930   007C  E5          	push	hl
931   007D  2A 00 00    	ld	hl,(_joyfunc1)
932   0080  CD 00 00    	call	___sdcc_call_hl
933   0083  F1          	pop	af
934   0084  7D          	ld	a,l
935   0085  32 00 00    	ld	(_dirs),a
936   0088  21 00 00    	ld	hl,_k2
937   008B  E5          	push	hl
938   008C  2A 00 00    	ld	hl,(_joyfunc2)
939   008F  CD 00 00    	call	___sdcc_call_hl
940   0092  F1          	pop	af
941   0093  7D          	ld	a,l
942   0094  32 00 00    	ld	(_dirs_alt),a
943   0097  CD 9D 00    	call	_player_move
944   009A  C3 D6 03    	jp  _player_collision
945   009D              	SECTION code_compiler
946   009D              ;	---------------------------------
947   009D              ; Function player_move
948   009D              ; ---------------------------------
949   009D              _player_move:
950   009D  3A 07 00    	ld	a,(_lin + 0x0007)
951   00A0  32 00 00    	ld	(_s_lin0),a
952   00A3  3A 07 00    	ld	a,(_col + 0x0007)
953   00A6  32 00 00    	ld	(_s_col0),a
954   00A9  21 07 00    	ld	hl,+(_tile + 0x0007)
955   00AC  4E          	ld	c, (hl)
956   00AD  21 07 00    	ld	hl,+(_colint + 0x0007)
957   00B0  46          	ld	b, (hl)
958   00B1  79          	ld	a, c
959   00B2  80          	add	a, b
960   00B3  32 00 00    	ld	(_s_tile0),a
961   00B6  3A 07 00    	ld	a,(_state + 0x0007)
962   00B9  32 00 00    	ld	(_s_state),a
963   00BC  21 00 00    	ld	hl,_s_state
964   00BF  CB 46       	bit	0, (hl)
965   00C1  20 07       	jr	NZ,l_player_move_00113
966   00C3  21 00 00    	ld	hl,_s_state
967   00C6  CB 4E       	bit	1, (hl)
968   00C8  28 49       	jr	Z,l_player_move_00114
969   00CA              l_player_move_00113:
970   00CA  CD 49 03    	call	_player_fire
971   00CD  3A 00 00    	ld	a,(_player_vel_y)
972   00D0  21 00 00    	ld	hl,_player_vel_y1
973   00D3  96          	sub	a, (hl)
974   00D4  E2 D9 00    	jp	PO, l_player_move_00162
975   00D7  EE 80       	xor	a,0x80
976   00D9              l_player_move_00162:
977   00D9  F2 FC 00    	jp	P, l_player_move_00106
978   00DC  21 00 00    	ld	hl,_dirs
979   00DF  CB 56       	bit	2, (hl)
980   00E1  28 09       	jr	Z,l_player_move_00102
981   00E3  21 00 00    	ld	hl,_s_state
982   00E6  7E          	ld	a,(hl)
983   00E7  F6 08       	or	a,0x08
984   00E9  E6 FB       	and	a,0xfb
985   00EB  77          	ld	(hl),a
986   00EC              l_player_move_00102:
987   00EC  21 00 00    	ld	hl,_dirs
988   00EF  CB 4E       	bit	1, (hl)
989   00F1  28 09       	jr	Z,l_player_move_00106
990   00F3  21 00 00    	ld	hl,_s_state
991   00F6  7E          	ld	a,(hl)
992   00F7  F6 04       	or	a,0x04
993   00F9  E6 F7       	and	a,0xf7
994   00FB  77          	ld	(hl),a
995   00FC              l_player_move_00106:
996   00FC  CD 19 0E    	call	_player_move_jump
997   00FF  7D          	ld	a, l
998   0100  B7          	or	a, a
999   0101  28 1C       	jr	Z,l_player_move_00115
1000  0103  3A 00 00    	ld	a,(_player_onstair)
1001  0106  B7          	or	a, a
1002  0107  20 16       	jr	NZ,l_player_move_00115
1003  0109  21 60 08    	ld	hl,0x0860
1004  010C  E5          	push	hl
1005  010D  CD F7 06    	call	_player_tile
1006  0110  F1          	pop	af
1007  0111  18 0C       	jr	l_player_move_00115
1008  0113              l_player_move_00114:
1009  0113  CD 85 01    	call	_player_move_input
1010  0116  3A 00 00    	ld	a,(_player_onstair)
1011  0119  B7          	or	a, a
1012  011A  20 03       	jr	NZ,l_player_move_00115
1013  011C  CD 94 0C    	call	_player_check_floor
1014  011F              l_player_move_00115:
1015  011F  CD 00 00    	call	_spr_redraw
1016  0122  7D          	ld	a, l
1017  0123  B7          	or	a, a
1018  0124  28 03       	jr	Z,l_player_move_00118
1019  0126  CD 12 07    	call	_player_check_map
1020  0129              l_player_move_00118:
1021  0129  3A 00 00    	ld	a,(_player_hit_lin)
1022  012C  B7          	or	a, a
1023  012D  28 03       	jr	Z,l_player_move_00120
1024  012F  CD FB 0B    	call	_player_hit_platform_clear
1025  0132              l_player_move_00120:
1026  0132  3A 00 00    	ld	a,(_s_state)
1027  0135  32 07 00    	ld	((_state + 0x0007)),a
1028  0138  2E 00       	ld	l,0x00
1029  013A  C9          	ret
1030  013B              	SECTION code_compiler
1031  013B              ;	---------------------------------
1032  013B              ; Function player_check_input
1033  013B              ; ---------------------------------
1034  013B              _player_check_input:
1035  013B  21 00 00    	ld	hl,_dirs
1036  013E  CB 56       	bit	2, (hl)
1037  0140  28 0C       	jr	Z,l_player_check_input_00102
1038  0142  21 00 00    	ld	hl,_dirs
1039  0145  CB 5E       	bit	3, (hl)
1040  0147  28 05       	jr	Z,l_player_check_input_00102
1041  0149  21 00 00    	ld	hl,_dirs
1042  014C  36 00       	ld	(hl),0x00
1043  014E              l_player_check_input_00102:
1044  014E  21 00 00    	ld	hl,_dirs
1045  0151  7E          	ld	a, (hl)
1046  0152  CB 07       	rlc	a
1047  0154  E6 01       	and	a,0x01
1048  0156  CB 47       	bit	0, a
1049  0158  20 28       	jr	NZ,l_player_check_input_00107
1050  015A  CB 56       	bit	2, (hl)
1051  015C  20 24       	jr	NZ,l_player_check_input_00107
1052  015E  21 00 00    	ld	hl,_dirs
1053  0161  CB 5E       	bit	3, (hl)
1054  0163  20 1D       	jr	NZ,l_player_check_input_00107
1055  0165  21 00 00    	ld	hl,_dirs
1056  0168  CB 46       	bit	0, (hl)
1057  016A  20 16       	jr	NZ,l_player_check_input_00107
1058  016C  21 00 00    	ld	hl,_dirs
1059  016F  CB 4E       	bit	1, (hl)
1060  0171  20 0F       	jr	NZ,l_player_check_input_00107
1061  0173  3A 00 00    	ld	a,(_dirs_alt)
1062  0176  CB 07       	rlc	a
1063  0178  E6 01       	and	a,0x01
1064  017A  CB 47       	bit	0, a
1065  017C  20 04       	jr	NZ,l_player_check_input_00107
1066  017E  2E 00       	ld	l,0x00
1067  0180  18 02       	jr	l_player_check_input_00108
1068  0182              l_player_check_input_00107:
1069  0182  2E 01       	ld	l,0x01
1070  0184              l_player_check_input_00108:
1071  0184  C9          	ret
1072  0185              	SECTION code_compiler
1073  0185              ;	---------------------------------
1074  0185              ; Function player_move_input
1075  0185              ; ---------------------------------
1076  0185              _player_move_input:
1077  0185  CD 3B 01    	call	_player_check_input
1078  0188  7D          	ld	a, l
1079  0189  B7          	or	a, a
1080  018A  CA 09 03    	jp	Z, l_player_move_input_00149
1081  018D  CD 49 03    	call	_player_fire
1082  0190  7D          	ld	a, l
1083  0191  B7          	or	a, a
1084  0192  28 0A       	jr	Z,l_player_move_input_00102
1085  0194  21 00 00    	ld	hl,_dirs
1086  0197  36 00       	ld	(hl),0x00
1087  0199  2E 00       	ld	l,0x00
1088  019B  C3 2F 03    	jp	l_player_move_input_00151
1089  019E              l_player_move_input_00102:
1090  019E  3A 00 00    	ld	a,(_game_2buttons)
1091  01A1  B7          	or	a, a
1092  01A2  28 07       	jr	Z,l_player_move_input_00104
1093  01A4  3A 00 00    	ld	a,(_dirs)
1094  01A7  E6 80       	and	a,0x80
1095  01A9  18 16       	jr	l_player_move_input_00105
1096  01AB              l_player_move_input_00104:
1097  01AB  21 00 00    	ld	hl,_dirs
1098  01AE  7E          	ld	a, (hl)
1099  01AF  CB 07       	rlc	a
1100  01B1  E6 01       	and	a,0x01
1101  01B3  CB 47       	bit	0, a
1102  01B5  28 04       	jr	Z,l_player_move_input_00153
1103  01B7  CB 46       	bit	0, (hl)
1104  01B9  20 04       	jr	NZ,l_player_move_input_00154
1105  01BB              l_player_move_input_00153:
1106  01BB  3E 00       	ld	a,0x00
1107  01BD  18 02       	jr	l_player_move_input_00155
1108  01BF              l_player_move_input_00154:
1109  01BF  3E 01       	ld	a,0x01
1110  01C1              l_player_move_input_00155:
1111  01C1              l_player_move_input_00105:
1112  01C1  B7          	or	a, a
1113  01C2  28 4A       	jr	Z,l_player_move_input_00109
1114  01C4  21 00 00    	ld	hl,_player_vel_inc
1115  01C7  36 01       	ld	(hl),0x01
1116  01C9  CD 00 00    	call	_ay_is_playing
1117  01CC  7D          	ld	a, l
1118  01CD  D6 03       	sub	a,0x03
1119  01CF  28 06       	jr	Z,l_player_move_input_00107
1120  01D1  21 00 00    	ld	hl,_ay_effect_03
1121  01D4  CD 00 00    	call	_ay_fx_play
1122  01D7              l_player_move_input_00107:
1123  01D7  21 00 00    	ld	hl,_player_onstair
1124  01DA  36 00       	ld	(hl),0x00
1125  01DC  21 00 00    	ld	hl,_s_state
1126  01DF  7E          	ld	a,(hl)
1127  01E0  F6 01       	or	a,0x01
1128  01E2  E6 FD       	and	a,0xfd
1129  01E4  77          	ld	(hl),a
1130  01E5  3A 07 00    	ld	a,(_lin + 0x0007)
1131  01E8  32 07 00    	ld	((_jump_lin + 0x0007)),a
1132  01EB  3A 00 00    	ld	a,(_s_state)
1133  01EE  32 07 00    	ld	((_state + 0x0007)),a
1134  01F1  21 64 08    	ld	hl,0x0864
1135  01F4  E5          	push	hl
1136  01F5  CD F7 06    	call	_player_tile
1137  01F8  F1          	pop	af
1138  01F9  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
1139  01FC  36 02       	ld	(hl),0x02
1140  01FE  21 00 00    	ld	hl,_player_slide
1141  0201  36 00       	ld	(hl),0x00
1142  0203  3A 00 00    	ld	a,(_player_vel_y0)
1143  0206  32 00 00    	ld	(_player_vel_y),a
1144  0209  2E 01       	ld	l,0x01
1145  020B  C3 2F 03    	jp	l_player_move_input_00151
1146  020E              l_player_move_input_00109:
1147  020E  21 00 00    	ld	hl,_dirs
1148  0211  CB 5E       	bit	3, (hl)
1149  0213  28 23       	jr	Z,l_player_move_input_00113
1150  0215  CD 30 03    	call	_player_fix_walk_lin
1151  0218  21 00 00    	ld	hl,_s_state
1152  021B  7E          	ld	a,(hl)
1153  021C  F6 04       	or	a,0x04
1154  021E  E6 F7       	and	a,0xf7
1155  0220  77          	ld	(hl),a
1156  0221  01 07 00    	ld	bc,_state_a+7
1157  0224  0A          	ld	a, (bc)
1158  0225  F6 10       	or	a,0x10
1159  0227  E6 F7       	and	a,0xf7
1160  0229  02          	ld	(bc),a
1161  022A  3A 00 00    	ld	a,(_player_onstair)
1162  022D  B7          	or	a, a
1163  022E  28 05       	jr	Z,l_player_move_input_00111
1164  0230  2E 00       	ld	l,0x00
1165  0232  CD 21 06    	call	_player_check_stairs
1166  0235              l_player_move_input_00111:
1167  0235  CD 00 00    	call	_spr_move_horizontal
1168  0238              l_player_move_input_00113:
1169  0238  21 00 00    	ld	hl,_dirs
1170  023B  CB 56       	bit	2, (hl)
1171  023D  28 23       	jr	Z,l_player_move_input_00117
1172  023F  CD 30 03    	call	_player_fix_walk_lin
1173  0242  21 00 00    	ld	hl,_s_state
1174  0245  7E          	ld	a,(hl)
1175  0246  F6 08       	or	a,0x08
1176  0248  E6 FB       	and	a,0xfb
1177  024A  77          	ld	(hl),a
1178  024B  01 07 00    	ld	bc,_state_a+7
1179  024E  0A          	ld	a, (bc)
1180  024F  F6 08       	or	a,0x08
1181  0251  E6 EF       	and	a,0xef
1182  0253  02          	ld	(bc),a
1183  0254  3A 00 00    	ld	a,(_player_onstair)
1184  0257  B7          	or	a, a
1185  0258  28 05       	jr	Z,l_player_move_input_00115
1186  025A  2E 00       	ld	l,0x00
1187  025C  CD 21 06    	call	_player_check_stairs
1188  025F              l_player_move_input_00115:
1189  025F  CD 00 00    	call	_spr_move_horizontal
1190  0262              l_player_move_input_00117:
1191  0262  21 00 00    	ld	hl,_dirs
1192  0265  CB 46       	bit	0, (hl)
1193  0267  28 3C       	jr	Z,l_player_move_input_00129
1194  0269  2E 00       	ld	l,0x00
1195  026B  CD 21 06    	call	_player_check_stairs
1196  026E  3A 00 00    	ld	a,(_player_onstair)
1197  0271  B7          	or	a, a
1198  0272  20 13       	jr	NZ,l_player_move_input_00121
1199  0274  2E 01       	ld	l,0x01
1200  0276  CD 21 06    	call	_player_check_stairs
1201  0279  3A 00 00    	ld	a,(_player_onstair)
1202  027C  B7          	or	a, a
1203  027D  20 08       	jr	NZ,l_player_move_input_00121
1204  027F  3E FE       	ld	a,0xfe
1205  0281  F5          	push	af
1206  0282  33          	inc	sp
1207  0283  CD 78 05    	call	_player_check_stairs_vertical
1208  0286  33          	inc	sp
1209  0287              l_player_move_input_00121:
1210  0287  3A 00 00    	ld	a,(_player_onstair)
1211  028A  B7          	or	a, a
1212  028B  28 05       	jr	Z,l_player_move_input_00126
1213  028D  CD 00 00    	call	_spr_move_up
1214  0290  18 13       	jr	l_player_move_input_00129
1215  0292              l_player_move_input_00126:
1216  0292  21 00 00    	ld	hl,_dirs
1217  0295  CB 5E       	bit	3, (hl)
1218  0297  20 0C       	jr	NZ,l_player_move_input_00129
1219  0299  21 00 00    	ld	hl,_dirs
1220  029C  CB 56       	bit	2, (hl)
1221  029E  20 05       	jr	NZ,l_player_move_input_00129
1222  02A0  2E 00       	ld	l,0x00
1223  02A2  C3 2F 03    	jp	l_player_move_input_00151
1224  02A5              l_player_move_input_00129:
1225  02A5  21 00 00    	ld	hl,_dirs
1226  02A8  CB 4E       	bit	1, (hl)
1227  02AA  28 3B       	jr	Z,l_player_move_input_00141
1228  02AC  2E 00       	ld	l,0x00
1229  02AE  CD 21 06    	call	_player_check_stairs
1230  02B1  3A 00 00    	ld	a,(_player_onstair)
1231  02B4  B7          	or	a, a
1232  02B5  20 13       	jr	NZ,l_player_move_input_00133
1233  02B7  2E 01       	ld	l,0x01
1234  02B9  CD 21 06    	call	_player_check_stairs
1235  02BC  3A 00 00    	ld	a,(_player_onstair)
1236  02BF  B7          	or	a, a
1237  02C0  20 08       	jr	NZ,l_player_move_input_00133
1238  02C2  3E 12       	ld	a,0x12
1239  02C4  F5          	push	af
1240  02C5  33          	inc	sp
1241  02C6  CD 78 05    	call	_player_check_stairs_vertical
1242  02C9  33          	inc	sp
1243  02CA              l_player_move_input_00133:
1244  02CA  3A 00 00    	ld	a,(_player_onstair)
1245  02CD  B7          	or	a, a
1246  02CE  28 05       	jr	Z,l_player_move_input_00138
1247  02D0  CD 00 00    	call	_spr_move_down
1248  02D3  18 12       	jr	l_player_move_input_00141
1249  02D5              l_player_move_input_00138:
1250  02D5  21 00 00    	ld	hl,_dirs
1251  02D8  CB 5E       	bit	3, (hl)
1252  02DA  20 0B       	jr	NZ,l_player_move_input_00141
1253  02DC  21 00 00    	ld	hl,_dirs
1254  02DF  CB 56       	bit	2, (hl)
1255  02E1  20 04       	jr	NZ,l_player_move_input_00141
1256  02E3  2E 00       	ld	l,0x00
1257  02E5  18 48       	jr	l_player_move_input_00151
1258  02E7              l_player_move_input_00141:
1259  02E7  3A 00 00    	ld	a,(_s_state)
1260  02EA  32 07 00    	ld	((_state + 0x0007)),a
1261  02ED  3A 00 00    	ld	a,(_player_onstair)
1262  02F0  B7          	or	a, a
1263  02F1  28 0A       	jr	Z,l_player_move_input_00143
1264  02F3  21 72 00    	ld	hl,0x0072
1265  02F6  E5          	push	hl
1266  02F7  CD F7 06    	call	_player_tile
1267  02FA  F1          	pop	af
1268  02FB  18 08       	jr	l_player_move_input_00144
1269  02FD              l_player_move_input_00143:
1270  02FD  21 60 08    	ld	hl,0x0860
1271  0300  E5          	push	hl
1272  0301  CD F7 06    	call	_player_tile
1273  0304  F1          	pop	af
1274  0305              l_player_move_input_00144:
1275  0305  2E 01       	ld	l,0x01
1276  0307  18 26       	jr	l_player_move_input_00151
1277  0309              l_player_move_input_00149:
1278  0309  21 07 00    	ld	hl, +(_colint + 0x0007)
1279  030C  36 00       	ld	(hl),0x00
1280  030E  3A 00 00    	ld	a,(_player_onstair)
1281  0311  B7          	or	a, a
1282  0312  28 0A       	jr	Z,l_player_move_input_00146
1283  0314  21 72 00    	ld	hl,0x0072
1284  0317  E5          	push	hl
1285  0318  CD F7 06    	call	_player_tile
1286  031B  F1          	pop	af
1287  031C  18 08       	jr	l_player_move_input_00147
1288  031E              l_player_move_input_00146:
1289  031E  21 70 01    	ld	hl,0x0170
1290  0321  E5          	push	hl
1291  0322  CD F7 06    	call	_player_tile
1292  0325  F1          	pop	af
1293  0326              l_player_move_input_00147:
1294  0326  21 00 00    	ld	hl,_s_state
1295  0329  7E          	ld	a,(hl)
1296  032A  E6 F3       	and	a,+(0xf7&0xfb)
1297  032C  77          	ld	(hl),a
1298  032D  2E 00       	ld	l,0x00
1299  032F              l_player_move_input_00151:
1300  032F  C9          	ret
1301  0330              	SECTION code_compiler
1302  0330              ;	---------------------------------
1303  0330              ; Function player_fix_walk_lin
1304  0330              ; ---------------------------------
1305  0330              _player_fix_walk_lin:
1306  0330  3A 00 00    	ld	a,(_player_onstair)
1307  0333  B7          	or	a, a
1308  0334  C0          	ret	NZ
1309  0335  01 07 00    	ld	bc,_lin+7
1310  0338  3A 00 00    	ld	a,(_s_lin0)
1311  033B  07          	rlca
1312  033C  07          	rlca
1313  033D  07          	rlca
1314  033E  07          	rlca
1315  033F  E6 0F       	and	a,0x0f
1316  0341  07          	rlca
1317  0342  07          	rlca
1318  0343  07          	rlca
1319  0344  07          	rlca
1320  0345  E6 F0       	and	a,0xf0
1321  0347  02          	ld	(bc), a
1322  0348  C9          	ret
1323  0349              	SECTION code_compiler
1324  0349              ;	---------------------------------
1325  0349              ; Function player_fire
1326  0349              ; ---------------------------------
1327  0349              _player_fire:
1328  0349  CD 00 00    	call	___sdcc_enter_ix
1329  034C  3B          	dec	sp
1330  034D  3A 00 00    	ld	a,(_game_2buttons)
1331  0350  B7          	or	a, a
1332  0351  28 0A       	jr	Z,l_player_fire_00102
1333  0353  3A 00 00    	ld	a,(_dirs_alt)
1334  0356  E6 80       	and	a,0x80
1335  0358  32 00 00    	ld	(_player_onfire),a
1336  035B  18 1A       	jr	l_player_fire_00103
1337  035D              l_player_fire_00102:
1338  035D  21 00 00    	ld	hl,_dirs
1339  0360  7E          	ld	a, (hl)
1340  0361  CB 07       	rlc	a
1341  0363  E6 01       	and	a,0x01
1342  0365  CB 47       	bit	0, a
1343  0367  28 04       	jr	Z,l_player_fire_00119
1344  0369  CB 46       	bit	0, (hl)
1345  036B  28 04       	jr	Z,l_player_fire_00120
1346  036D              l_player_fire_00119:
1347  036D  0E 00       	ld	c,0x00
1348  036F  18 02       	jr	l_player_fire_00121
1349  0371              l_player_fire_00120:
1350  0371  0E 01       	ld	c,0x01
1351  0373              l_player_fire_00121:
1352  0373  21 00 00    	ld	hl,_player_onfire
1353  0376  71          	ld	(hl), c
1354  0377              l_player_fire_00103:
1355  0377  3A 00 00    	ld	a,(_player_onfire)
1356  037A  B7          	or	a, a
1357  037B  28 53       	jr	Z,l_player_fire_00116
1358  037D  3A 07 00    	ld	a,(_tile + 0x0007)
1359  0380  FE 70       	cp	a,0x70
1360  0382  28 04       	jr	Z,l_player_fire_00104
1361  0384  D6 71       	sub	a,0x71
1362  0386  20 0D       	jr	NZ,l_player_fire_00105
1363  0388              l_player_fire_00104:
1364  0388  21 60 08    	ld	hl,0x0860
1365  038B  E5          	push	hl
1366  038C  CD F7 06    	call	_player_tile
1367  038F  F1          	pop	af
1368  0390  21 07 00    	ld	hl, +(_colint + 0x0007)
1369  0393  36 00       	ld	(hl),0x00
1370  0395              l_player_fire_00105:
1371  0395  21 00 00    	ld	hl,_player_mana
1372  0398  7E          	ld	a, (hl)
1373  0399  B7          	or	a, a
1374  039A  28 30       	jr	Z,l_player_fire_00113
1375  039C  3A 07 00    	ld	a,(_bullet_col + 0x0007)
1376  039F  3C          	inc	a
1377  03A0  20 2A       	jr	NZ,l_player_fire_00113
1378  03A2  3E 05       	ld	a,0x05
1379  03A4  96          	sub	a, (hl)
1380  03A5  30 0F       	jr	NC,l_player_fire_00110
1381  03A7  3A 00 00    	ld	a,(_game_god_mode)
1382  03AA  B7          	or	a, a
1383  03AB  20 0E       	jr	NZ,l_player_fire_00111
1384  03AD  21 00 00    	ld	hl,_player_mana
1385  03B0  7E          	ld	a, (hl)
1386  03B1  C6 FB       	add	a,0xfb
1387  03B3  77          	ld	(hl), a
1388  03B4  18 05       	jr	l_player_fire_00111
1389  03B6              l_player_fire_00110:
1390  03B6  21 00 00    	ld	hl,_player_mana
1391  03B9  36 00       	ld	(hl),0x00
1392  03BB              l_player_fire_00111:
1393  03BB  CD 00 00    	call	_game_update_stats
1394  03BE  21 00 00    	ld	hl,_ay_effect_05
1395  03C1  CD 00 00    	call	_ay_fx_play
1396  03C4  21 07 78    	ld	hl,0x7807
1397  03C7  E5          	push	hl
1398  03C8  CD 00 00    	call	_game_shoot_fire
1399  03CB  F1          	pop	af
1400  03CC              l_player_fire_00113:
1401  03CC  2E 01       	ld	l,0x01
1402  03CE  18 02       	jr	l_player_fire_00117
1403  03D0              l_player_fire_00116:
1404  03D0  2E 00       	ld	l,0x00
1405  03D2              l_player_fire_00117:
1406  03D2  33          	inc	sp
1407  03D3  DD E1       	pop	ix
1408  03D5  C9          	ret
1409  03D6              	SECTION code_compiler
1410  03D6              ;	---------------------------------
1411  03D6              ; Function player_collision
1412  03D6              ; ---------------------------------
1413  03D6              _player_collision:
1414  03D6  21 19 00    	ld	hl,0x0019
1415  03D9  E5          	push	hl
1416  03DA  2A 00 00    	ld	hl,(_player_hit_time)
1417  03DD  E5          	push	hl
1418  03DE  CD 00 00    	call	_game_check_time
1419  03E1  F1          	pop	af
1420  03E2  F1          	pop	af
1421  03E3  7D          	ld	a,l
1422  03E4  B7          	or	a,a
1423  03E5  CA 29 05    	jp	Z, l_player_collision_00132
1424  03E8  21 00 00    	ld	hl,_sprite
1425  03EB  36 00       	ld	(hl),0x00
1426  03ED  3A 07 00    	ld	a,(_col + 7)
1427  03F0  32 00 00    	ld	(_s_col1),a
1428  03F3  3A 07 00    	ld	a,(_lin + 7)
1429  03F6  32 00 00    	ld	(_s_lin1),a
1430  03F9  C6 08       	add	a,0x08
1431  03FB  4F          	ld	c, a
1432  03FC  3A 00 00    	ld	a, (_s_col1)
1433  03FF  47          	ld	b,a
1434  0400  C5          	push	bc
1435  0401  CD 00 00    	call	_spr_calc_index
1436  0404  F1          	pop	af
1437  0405  7D          	ld	a,l
1438  0406  32 00 00    	ld	(_sprite_curr_index),a
1439  0409  4F          	ld	c,a
1440  040A  06 00       	ld	b,0x00
1441  040C  21 00 00    	ld	hl,_scr_map
1442  040F  09          	add	hl,bc
1443  0410  4E          	ld	c, (hl)
1444  0411  3E 2F       	ld	a,0x2f
1445  0413  91          	sub	a, c
1446  0414  30 3C       	jr	NC,l_player_collision_00128
1447  0416  79          	ld	a,c
1448  0417  FE 3A       	cp	a,0x3a
1449  0419  30 37       	jr	NC,l_player_collision_00128
1450  041B  D6 39       	sub	a,0x39
1451  041D  20 07       	jr	NZ,l_player_collision_00107
1452  041F  21 00 00    	ld	hl,_game_worldup
1453  0422  36 01       	ld	(hl),0x01
1454  0424  18 2C       	jr	l_player_collision_00128
1455  0426              l_player_collision_00107:
1456  0426  3A 00 00    	ld	a,(_game_god_mode)
1457  0429  B7          	or	a, a
1458  042A  20 16       	jr	NZ,l_player_collision_00102
1459  042C  3A 00 00    	ld	a,(_game_inmune)
1460  042F  B7          	or	a, a
1461  0430  20 10       	jr	NZ,l_player_collision_00102
1462  0432  3E 82       	ld	a,0x82
1463  0434  21 00 00    	ld	hl,_s_lin1
1464  0437  96          	sub	a, (hl)
1465  0438  30 08       	jr	NC,l_player_collision_00102
1466  043A  CD 77 10    	call	_player_lost_life
1467  043D  2E 00       	ld	l,0x00
1468  043F  C3 2B 05    	jp	l_player_collision_00133
1469  0442              l_player_collision_00102:
1470  0442  21 00 00    	ld	hl,_ay_effect_06
1471  0445  CD 00 00    	call	_ay_fx_play
1472  0448  2E 06       	ld	l,0x06
1473  044A  CD 00 00    	call	_zx_border_fastcall
1474  044D  2E 32       	ld	l,0x32
1475  044F  CD DB 11    	call	_player_hit
1476  0452              l_player_collision_00128:
1477  0452  21 00 00    	ld	hl,_sprite
1478  0455  7E          	ld	a, (hl)
1479  0456  D6 07       	sub	a,0x07
1480  0458  D2 29 05    	jp	NC, l_player_collision_00132
1481  045B  3E 00       	ld	a, +((_class) & 0xFF)
1482  045D  86          	add	a, (hl)
1483  045E  4F          	ld	c, a
1484  045F  3E 00       	ld	a, +((_class) / 256)
1485  0461  CE 00       	adc	a,0x00
1486  0463  47          	ld	b, a
1487  0464  0A          	ld	a, (bc)
1488  0465  B7          	or	a, a
1489  0466  CA 22 05    	jp	Z, l_player_collision_00127
1490  0469  4E          	ld	c,(hl)
1491  046A  06 00       	ld	b,0x00
1492  046C  21 00 00    	ld	hl,_col
1493  046F  09          	add	hl,bc
1494  0470  4E          	ld	c, (hl)
1495  0471  06 00       	ld	b,0x00
1496  0473  3A 00 00    	ld	a,(_s_col1)
1497  0476  5F          	ld	e,a
1498  0477  16 00       	ld	d,0x00
1499  0479  79          	ld	a, c
1500  047A  93          	sub	a, e
1501  047B  6F          	ld	l, a
1502  047C  78          	ld	a, b
1503  047D  9A          	sbc	a, d
1504  047E  67          	ld	h, a
1505  047F  CD 00 00    	call	_abs_fastcall
1506  0482  7D          	ld	a,l
1507  0483  D6 02       	sub	a,0x02
1508  0485  7C          	ld	a,h
1509  0486  17          	rla
1510  0487  3F          	ccf
1511  0488  1F          	rra
1512  0489  DE 80       	sbc	a,0x80
1513  048B  D2 22 05    	jp	NC, l_player_collision_00127
1514  048E  2A 00 00    	ld	hl,(_sprite)
1515  0491  26 00       	ld	h,0x00
1516  0493  01 00 00    	ld	bc,_lin
1517  0496  09          	add	hl,bc
1518  0497  4E          	ld	c,(hl)
1519  0498  06 00       	ld	b,0x00
1520  049A  3A 00 00    	ld	a,(_s_lin1)
1521  049D  5F          	ld	e,a
1522  049E  16 00       	ld	d,0x00
1523  04A0  79          	ld	a, c
1524  04A1  93          	sub	a, e
1525  04A2  6F          	ld	l, a
1526  04A3  78          	ld	a, b
1527  04A4  9A          	sbc	a, d
1528  04A5  67          	ld	h, a
1529  04A6  CD 00 00    	call	_abs_fastcall
1530  04A9  7D          	ld	a,l
1531  04AA  D6 0E       	sub	a,0x0e
1532  04AC  7C          	ld	a,h
1533  04AD  17          	rla
1534  04AE  3F          	ccf
1535  04AF  1F          	rra
1536  04B0  DE 80       	sbc	a,0x80
1537  04B2  30 6E       	jr	NC,l_player_collision_00127
1538  04B4  2A 00 00    	ld	hl,(_sprite)
1539  04B7  26 00       	ld	h,0x00
1540  04B9  01 00 00    	ld	bc,_class
1541  04BC  09          	add	hl,bc
1542  04BD  7E          	ld	a,(hl)
1543  04BE  FE 06       	cp	a,0x06
1544  04C0  20 1D       	jr	NZ,l_player_collision_00115
1545  04C2  21 00 00    	ld	hl,_player_vita
1546  04C5  7E          	ld	a, (hl)
1547  04C6  C6 19       	add	a,0x19
1548  04C8  77          	ld	(hl), a
1549  04C9  3A 00 00    	ld	a,(_player_max_vita)
1550  04CC  21 00 00    	ld	hl,_player_vita
1551  04CF  96          	sub	a, (hl)
1552  04D0  30 06       	jr	NC,l_player_collision_00113
1553  04D2  3A 00 00    	ld	a,(_player_max_vita)
1554  04D5  32 00 00    	ld	(_player_vita),a
1555  04D8              l_player_collision_00113:
1556  04D8  CD 2C 05    	call	_player_pick_mushroom
1557  04DB  2E 00       	ld	l,0x00
1558  04DD  18 4C       	jr	l_player_collision_00133
1559  04DF              l_player_collision_00115:
1560  04DF  FE 07       	cp	a,0x07
1561  04E1  20 1D       	jr	NZ,l_player_collision_00119
1562  04E3  21 00 00    	ld	hl,_player_mana
1563  04E6  7E          	ld	a, (hl)
1564  04E7  C6 19       	add	a,0x19
1565  04E9  77          	ld	(hl), a
1566  04EA  3A 00 00    	ld	a,(_player_max_mana)
1567  04ED  21 00 00    	ld	hl,_player_mana
1568  04F0  96          	sub	a, (hl)
1569  04F1  30 06       	jr	NC,l_player_collision_00117
1570  04F3  3A 00 00    	ld	a,(_player_max_mana)
1571  04F6  32 00 00    	ld	(_player_mana),a
1572  04F9              l_player_collision_00117:
1573  04F9  CD 2C 05    	call	_player_pick_mushroom
1574  04FC  2E 00       	ld	l,0x00
1575  04FE  18 2B       	jr	l_player_collision_00133
1576  0500              l_player_collision_00119:
1577  0500  D6 08       	sub	a,0x08
1578  0502  20 0A       	jr	NZ,l_player_collision_00121
1579  0504  CD 2C 05    	call	_player_pick_mushroom
1580  0507  CD 46 05    	call	_player_1up
1581  050A  2E 00       	ld	l,0x00
1582  050C  18 1D       	jr	l_player_collision_00133
1583  050E              l_player_collision_00121:
1584  050E  21 00 00    	ld	hl,_ay_effect_06
1585  0511  CD 00 00    	call	_ay_fx_play
1586  0514  2E 02       	ld	l,0x02
1587  0516  CD 00 00    	call	_zx_border_fastcall
1588  0519  2E 14       	ld	l,0x14
1589  051B  CD DB 11    	call	_player_hit
1590  051E  2E 01       	ld	l,0x01
1591  0520  18 09       	jr	l_player_collision_00133
1592  0522              l_player_collision_00127:
1593  0522  21 00 00    	ld	hl,_sprite
1594  0525  34          	inc	(hl)
1595  0526  C3 52 04    	jp	l_player_collision_00128
1596  0529              l_player_collision_00132:
1597  0529  2E 00       	ld	l,0x00
1598  052B              l_player_collision_00133:
1599  052B  C9          	ret
1600  052C              	SECTION code_compiler
1601  052C              ;	---------------------------------
1602  052C              ; Function player_pick_mushroom
1603  052C              ; ---------------------------------
1604  052C              _player_pick_mushroom:
1605  052C  21 00 00    	ld	hl,_ay_effect_12
1606  052F  CD 00 00    	call	_ay_fx_play
1607  0532  21 01 00    	ld	hl,0x0001
1608  0535  CD 2A 0C    	call	_player_score_add
1609  0538  CD 00 00    	call	_game_update_stats
1610  053B  2A 00 00    	ld	hl,(_sprite)
1611  053E  CD 00 00    	call	_spr_destroy
1612  0541  21 00 00    	ld	hl,_game_mush_count
1613  0544  35          	dec	(hl)
1614  0545  C9          	ret
1615  0546              	SECTION code_compiler
1616  0546              ;	---------------------------------
1617  0546              ; Function player_1up
1618  0546              ; ---------------------------------
1619  0546              _player_1up:
1620  0546  21 00 00    	ld	hl,_player_lives
1621  0549  7E          	ld	a, (hl)
1622  054A  D6 FF       	sub	a,0xff
1623  054C  D0          	ret	NC
1624  054D  34          	inc	(hl)
1625  054E  CD 00 00    	call	_spr_flatten
1626  0551  21 00 00    	ld	hl,___str_0
1627  0554  E5          	push	hl
1628  0555  21 0C 0C    	ld	hl,0x0c0c
1629  0558  E5          	push	hl
1630  0559  CD 00 00    	call	_zx_print_str
1631  055C  AF          	xor	a, a
1632  055D  F5          	push	af
1633  055E  33          	inc	sp
1634  055F  21 19 00    	ld	hl,0x0019
1635  0562  E5          	push	hl
1636  0563  21 0C 15    	ld	hl,0x150c
1637  0566  E5          	push	hl
1638  0567  3E 0C       	ld	a,0x0c
1639  0569  F5          	push	af
1640  056A  33          	inc	sp
1641  056B  CD 00 00    	call	_game_colour_message
1642  056E  F1          	pop	af
1643  056F  F1          	pop	af
1644  0570  F1          	pop	af
1645  0571  CD 00 00    	call	_game_update_stats
1646  0574  CD 00 00    	call	_spr_unflatten
1647  0577  C9          	ret
1648  0578              	SECTION rodata_compiler
1649  0000              ___str_0:
1650  0000  31 20 55 50 21 
                        	DEFM "1 UP!"
1651  0005  00          	DEFB 0x00
1652  0006              	SECTION code_compiler
1653  0578              ;	---------------------------------
1654  0578              ; Function player_check_stairs_vertical
1655  0578              ; ---------------------------------
1656  0578              _player_check_stairs_vertical:
1657  0578  CD 00 00    	call	___sdcc_enter_ix
1658  057B  3B          	dec	sp
1659  057C  21 07 00    	ld	hl,+(_col + 0x0007)
1660  057F  4E          	ld	c, (hl)
1661  0580  CB 41       	bit	0, c
1662  0582  20 2F       	jr	NZ,l_player_check_stairs_vertical_00102
1663  0584  3A 07 00    	ld	a,(_lin + 0x0007)
1664  0587  DD 86 04    	add	a,(ix+4)
1665  058A  47          	ld	b, a
1666  058B  79          	ld	a, c
1667  058C  48          	ld	c,b
1668  058D  47          	ld	b,a
1669  058E  C5          	push	bc
1670  058F  CD 00 00    	call	_spr_calc_index
1671  0592  F1          	pop	af
1672  0593  7D          	ld	a,l
1673  0594  32 00 00    	ld	(_sprite_curr_index),a
1674  0597  4F          	ld	c,a
1675  0598  06 00       	ld	b,0x00
1676  059A  21 00 00    	ld	hl,_scr_map
1677  059D  09          	add	hl,bc
1678  059E  7E          	ld	a,(hl)
1679  059F  4F          	ld	c,a
1680  05A0  D6 44       	sub	a,0x44
1681  05A2  38 05       	jr	C,l_player_check_stairs_vertical_00110
1682  05A4  3E 47       	ld	a,0x47
1683  05A6  91          	sub	a, c
1684  05A7  30 04       	jr	NC,l_player_check_stairs_vertical_00111
1685  05A9              l_player_check_stairs_vertical_00110:
1686  05A9  1E 00       	ld	e,0x00
1687  05AB  18 02       	jr	l_player_check_stairs_vertical_00112
1688  05AD              l_player_check_stairs_vertical_00111:
1689  05AD  1E 01       	ld	e,0x01
1690  05AF              l_player_check_stairs_vertical_00112:
1691  05AF  0E 00       	ld	c,0x00
1692  05B1  18 57       	jr	l_player_check_stairs_vertical_00103
1693  05B3              l_player_check_stairs_vertical_00102:
1694  05B3  79          	ld	a, c
1695  05B4  DD 96 04    	sub	a,(ix+4)
1696  05B7  57          	ld	d, a
1697  05B8  01 07 00    	ld	bc,_lin+7
1698  05BB  0A          	ld	a, (bc)
1699  05BC  DD 86 04    	add	a,(ix+4)
1700  05BF  C5          	push	bc
1701  05C0  5F          	ld	e,a
1702  05C1  D5          	push	de
1703  05C2  CD 00 00    	call	_spr_calc_index
1704  05C5  F1          	pop	af
1705  05C6  C1          	pop	bc
1706  05C7  7D          	ld	a,l
1707  05C8  32 00 00    	ld	(_sprite_curr_index),a
1708  05CB  5F          	ld	e,a
1709  05CC  16 00       	ld	d,0x00
1710  05CE  21 00 00    	ld	hl,_scr_map
1711  05D1  19          	add	hl,de
1712  05D2  7E          	ld	a,(hl)
1713  05D3  5F          	ld	e,a
1714  05D4  D6 44       	sub	a,0x44
1715  05D6  38 05       	jr	C,l_player_check_stairs_vertical_00113
1716  05D8  3E 47       	ld	a,0x47
1717  05DA  93          	sub	a, e
1718  05DB  30 04       	jr	NC,l_player_check_stairs_vertical_00114
1719  05DD              l_player_check_stairs_vertical_00113:
1720  05DD  1E 00       	ld	e,0x00
1721  05DF  18 02       	jr	l_player_check_stairs_vertical_00115
1722  05E1              l_player_check_stairs_vertical_00114:
1723  05E1  1E 01       	ld	e,0x01
1724  05E3              l_player_check_stairs_vertical_00115:
1725  05E3  3A 07 00    	ld	a,(_col + 0x0007)
1726  05E6  DD 96 04    	sub	a,(ix+4)
1727  05E9  57          	ld	d, a
1728  05EA  0A          	ld	a, (bc)
1729  05EB  DD 86 04    	add	a,(ix+4)
1730  05EE  D5          	push	de
1731  05EF  5F          	ld	e,a
1732  05F0  D5          	push	de
1733  05F1  CD 00 00    	call	_spr_calc_index
1734  05F4  F1          	pop	af
1735  05F5  D1          	pop	de
1736  05F6  7D          	ld	a,l
1737  05F7  32 00 00    	ld	(_sprite_curr_index),a
1738  05FA  7B          	ld	a, e
1739  05FB  D6 44       	sub	a,0x44
1740  05FD  38 05       	jr	C,l_player_check_stairs_vertical_00116
1741  05FF  3E 47       	ld	a,0x47
1742  0601  93          	sub	a, e
1743  0602  30 04       	jr	NC,l_player_check_stairs_vertical_00117
1744  0604              l_player_check_stairs_vertical_00116:
1745  0604  0E 00       	ld	c,0x00
1746  0606  18 02       	jr	l_player_check_stairs_vertical_00118
1747  0608              l_player_check_stairs_vertical_00117:
1748  0608  0E 01       	ld	c,0x01
1749  060A              l_player_check_stairs_vertical_00118:
1750  060A              l_player_check_stairs_vertical_00103:
1751  060A  7B          	ld	a, e
1752  060B  B7          	or	a,a
1753  060C  20 03       	jr	NZ,l_player_check_stairs_vertical_00104
1754  060E  B1          	or	a,c
1755  060F  28 07       	jr	Z,l_player_check_stairs_vertical_00105
1756  0611              l_player_check_stairs_vertical_00104:
1757  0611  21 00 00    	ld	hl,_player_onstair
1758  0614  36 01       	ld	(hl),0x01
1759  0616  18 05       	jr	l_player_check_stairs_vertical_00108
1760  0618              l_player_check_stairs_vertical_00105:
1761  0618  21 00 00    	ld	hl,_player_onstair
1762  061B  36 00       	ld	(hl),0x00
1763  061D              l_player_check_stairs_vertical_00108:
1764  061D  33          	inc	sp
1765  061E  DD E1       	pop	ix
1766  0620  C9          	ret
1767  0621              	SECTION code_compiler
1768  0621              ;	---------------------------------
1769  0621              ; Function player_check_stairs
1770  0621              ; ---------------------------------
1771  0621              _player_check_stairs:
1772  0621  CD 00 00    	call	___sdcc_enter_ix
1773  0624  3B          	dec	sp
1774  0625  5D          	ld	e, l
1775  0626  3A 07 00    	ld	a,(_col + 0x0007)
1776  0629  83          	add	a, e
1777  062A  4F          	ld	c, a
1778  062B  21 07 00    	ld	hl,+(_lin + 0x0007)
1779  062E  46          	ld	b, (hl)
1780  062F  D5          	push	de
1781  0630  79          	ld	a, c
1782  0631  48          	ld	c,b
1783  0632  47          	ld	b,a
1784  0633  C5          	push	bc
1785  0634  CD 00 00    	call	_spr_calc_index
1786  0637  F1          	pop	af
1787  0638  D1          	pop	de
1788  0639  7D          	ld	a,l
1789  063A  32 00 00    	ld	(_sprite_curr_index),a
1790  063D  4F          	ld	c,a
1791  063E  06 00       	ld	b,0x00
1792  0640  21 00 00    	ld	hl,_scr_map
1793  0643  09          	add	hl,bc
1794  0644  7E          	ld	a,(hl)
1795  0645  4F          	ld	c,a
1796  0646  D6 44       	sub	a,0x44
1797  0648  38 05       	jr	C,l_player_check_stairs_00111
1798  064A  3E 47       	ld	a,0x47
1799  064C  91          	sub	a, c
1800  064D  30 04       	jr	NC,l_player_check_stairs_00112
1801  064F              l_player_check_stairs_00111:
1802  064F  0E 00       	ld	c,0x00
1803  0651  18 02       	jr	l_player_check_stairs_00113
1804  0653              l_player_check_stairs_00112:
1805  0653  0E 01       	ld	c,0x01
1806  0655              l_player_check_stairs_00113:
1807  0655  3A 07 00    	ld	a,(_col + 0x0007)
1808  0658  83          	add	a, e
1809  0659  57          	ld	d, a
1810  065A  3A 07 00    	ld	a,(_lin + 0x0007)
1811  065D  C6 0F       	add	a,0x0f
1812  065F  47          	ld	b, a
1813  0660  C5          	push	bc
1814  0661  58          	ld	e,b
1815  0662  D5          	push	de
1816  0663  CD 00 00    	call	_spr_calc_index
1817  0666  F1          	pop	af
1818  0667  C1          	pop	bc
1819  0668  7D          	ld	a,l
1820  0669  32 00 00    	ld	(_sprite_curr_index),a
1821  066C  5F          	ld	e,a
1822  066D  16 00       	ld	d,0x00
1823  066F  21 00 00    	ld	hl,_scr_map
1824  0672  19          	add	hl,de
1825  0673  7E          	ld	a,(hl)
1826  0674  47          	ld	b,a
1827  0675  D6 44       	sub	a,0x44
1828  0677  38 05       	jr	C,l_player_check_stairs_00114
1829  0679  3E 47       	ld	a,0x47
1830  067B  90          	sub	a, b
1831  067C  30 04       	jr	NC,l_player_check_stairs_00115
1832  067E              l_player_check_stairs_00114:
1833  067E  06 00       	ld	b,0x00
1834  0680  18 02       	jr	l_player_check_stairs_00116
1835  0682              l_player_check_stairs_00115:
1836  0682  06 01       	ld	b,0x01
1837  0684              l_player_check_stairs_00116:
1838  0684  79          	ld	a, c
1839  0685  B7          	or	a,a
1840  0686  20 03       	jr	NZ,l_player_check_stairs_00105
1841  0688  B0          	or	a,b
1842  0689  28 13       	jr	Z,l_player_check_stairs_00106
1843  068B              l_player_check_stairs_00105:
1844  068B  21 00 00    	ld	hl,_player_onstair
1845  068E  7E          	ld	a, (hl)
1846  068F  B7          	or	a, a
1847  0690  20 1D       	jr	NZ,l_player_check_stairs_00109
1848  0692  36 01       	ld	(hl),0x01
1849  0694  21 72 00    	ld	hl,0x0072
1850  0697  E5          	push	hl
1851  0698  CD F7 06    	call	_player_tile
1852  069B  F1          	pop	af
1853  069C  18 11       	jr	l_player_check_stairs_00109
1854  069E              l_player_check_stairs_00106:
1855  069E  21 00 00    	ld	hl,_player_onstair
1856  06A1  7E          	ld	a, (hl)
1857  06A2  B7          	or	a, a
1858  06A3  28 0A       	jr	Z,l_player_check_stairs_00109
1859  06A5  36 00       	ld	(hl),0x00
1860  06A7  21 60 08    	ld	hl,0x0860
1861  06AA  E5          	push	hl
1862  06AB  CD F7 06    	call	_player_tile
1863  06AE  F1          	pop	af
1864  06AF              l_player_check_stairs_00109:
1865  06AF  33          	inc	sp
1866  06B0  DD E1       	pop	ix
1867  06B2  C9          	ret
1868  06B3              	SECTION code_compiler
1869  06B3              ;	---------------------------------
1870  06B3              ; Function player_anim_tile
1871  06B3              ; ---------------------------------
1872  06B3              _player_anim_tile:
1873  06B3  21 07 00    	ld	hl,+(_tile + 0x0007)
1874  06B6  4E          	ld	c, (hl)
1875  06B7  21 07 00    	ld	hl,+(_colint + 0x0007)
1876  06BA  46          	ld	b, (hl)
1877  06BB  79          	ld	a, c
1878  06BC  80          	add	a, b
1879  06BD  32 00 00    	ld	(_s_tile1),a
1880  06C0  3A 00 00    	ld	a,(_player_onstair)
1881  06C3  B7          	or	a, a
1882  06C4  28 17       	jr	Z,l_player_anim_tile_00109
1883  06C6  21 00 00    	ld	hl,_player_anim_stair
1884  06C9  34          	inc	(hl)
1885  06CA  3E 01       	ld	a,0x01
1886  06CC  96          	sub	a, (hl)
1887  06CD  30 02       	jr	NC,l_player_anim_tile_00102
1888  06CF  36 00       	ld	(hl),0x00
1889  06D1              l_player_anim_tile_00102:
1890  06D1  79          	ld	a, c
1891  06D2  21 00 00    	ld	hl,_player_anim_stair
1892  06D5  86          	add	a, (hl)
1893  06D6  C6 04       	add	a,0x04
1894  06D8  32 00 00    	ld	(_s_tile1),a
1895  06DB  18 19       	jr	l_player_anim_tile_00111
1896  06DD              l_player_anim_tile_00109:
1897  06DD  3A 00 00    	ld	a,(_player_onfire)
1898  06E0  B7          	or	a, a
1899  06E1  28 13       	jr	Z,l_player_anim_tile_00111
1900  06E3  21 00 00    	ld	hl,_s_state
1901  06E6  CB 56       	bit	2, (hl)
1902  06E8  28 07       	jr	Z,l_player_anim_tile_00104
1903  06EA  21 00 00    	ld	hl,_s_tile1
1904  06ED  36 60       	ld	(hl),0x60
1905  06EF  18 05       	jr	l_player_anim_tile_00111
1906  06F1              l_player_anim_tile_00104:
1907  06F1  21 00 00    	ld	hl,_s_tile1
1908  06F4  36 68       	ld	(hl),0x68
1909  06F6              l_player_anim_tile_00111:
1910  06F6  C9          	ret
1911  06F7              	SECTION code_compiler
1912  06F7              ;	---------------------------------
1913  06F7              ; Function player_tile
1914  06F7              ; ---------------------------------
1915  06F7              _player_tile:
1916  06F7  CD 00 00    	call	___sdcc_enter_ix
1917  06FA  DD 7E 05    	ld	a,(ix+5)
1918  06FD  F5          	push	af
1919  06FE  33          	inc	sp
1920  06FF  2A FF FF    	ld	hl,(_sprite-1)
1921  0702  DD 6E 04    	ld	l,(ix+4)
1922  0705  E5          	push	hl
1923  0706  CD 00 00    	call	_spr_tile_dir
1924  0709  F1          	pop	af
1925  070A  33          	inc	sp
1926  070B  7D          	ld	a,l
1927  070C  32 07 00    	ld	((_tile + 0x0007)),a
1928  070F  DD E1       	pop	ix
1929  0711  C9          	ret
1930  0712              	SECTION code_compiler
1931  0712              ;	---------------------------------
1932  0712              ; Function player_check_map
1933  0712              ; ---------------------------------
1934  0712              _player_check_map:
1935  0712  21 07 00    	ld	hl,+(_col + 0x0007)
1936  0715  46          	ld	b, (hl)
1937  0716  21 07 00    	ld	hl,+(_lin + 0x0007)
1938  0719  4E          	ld	c, (hl)
1939  071A  C5          	push	bc
1940  071B  CD 00 00    	call	_spr_calc_index
1941  071E  F1          	pop	af
1942  071F  7D          	ld	a,l
1943  0720  32 00 00    	ld	(_sprite_curr_index),a
1944  0723  21 07 00    	ld	hl,+(_col + 0x0007)
1945  0726  4E          	ld	c, (hl)
1946  0727  3A 07 00    	ld	a,(_lin + 0x0007)
1947  072A  E6 0F       	and	a,0x0f
1948  072C  CB 41       	bit	0, c
1949  072E  20 17       	jr	NZ,l_player_check_map_00108
1950  0730  B7          	or	a, a
1951  0731  20 05       	jr	NZ,l_player_check_map_00102
1952  0733  CD 72 07    	call	_player_pick_item
1953  0736  18 39       	jr	l_player_check_map_00110
1954  0738              l_player_check_map_00102:
1955  0738  CD 72 07    	call	_player_pick_item
1956  073B  21 00 00    	ld	hl,_sprite_curr_index
1957  073E  7E          	ld	a, (hl)
1958  073F  C6 10       	add	a,0x10
1959  0741  77          	ld	(hl), a
1960  0742  CD 72 07    	call	_player_pick_item
1961  0745  18 2A       	jr	l_player_check_map_00110
1962  0747              l_player_check_map_00108:
1963  0747  B7          	or	a, a
1964  0748  20 0C       	jr	NZ,l_player_check_map_00105
1965  074A  CD 72 07    	call	_player_pick_item
1966  074D  21 00 00    	ld	hl,_sprite_curr_index
1967  0750  34          	inc	(hl)
1968  0751  CD 72 07    	call	_player_pick_item
1969  0754  18 1B       	jr	l_player_check_map_00110
1970  0756              l_player_check_map_00105:
1971  0756  CD 72 07    	call	_player_pick_item
1972  0759  21 00 00    	ld	hl,_sprite_curr_index
1973  075C  34          	inc	(hl)
1974  075D  CD 72 07    	call	_player_pick_item
1975  0760  21 00 00    	ld	hl,_sprite_curr_index
1976  0763  7E          	ld	a, (hl)
1977  0764  C6 0F       	add	a,0x0f
1978  0766  77          	ld	(hl), a
1979  0767  CD 72 07    	call	_player_pick_item
1980  076A  21 00 00    	ld	hl,_sprite_curr_index
1981  076D  34          	inc	(hl)
1982  076E  CD 72 07    	call	_player_pick_item
1983  0771              l_player_check_map_00110:
1984  0771  C9          	ret
1985  0772              	SECTION code_compiler
1986  0772              ;	---------------------------------
1987  0772              ; Function player_pick_item
1988  0772              ; ---------------------------------
1989  0772              _player_pick_item:
1990  0772  CD 00 00    	call	___sdcc_enter_ix
1991  0775  3B          	dec	sp
1992  0776  2A 00 00    	ld	hl,(_sprite_curr_index)
1993  0779  26 00       	ld	h,0x00
1994  077B  01 00 00    	ld	bc,_scr_map
1995  077E  09          	add	hl,bc
1996  077F  7E          	ld	a,(hl)
1997  0780  DD 77 FF    	ld	(ix-1),a
1998  0783  D6 24       	sub	a,0x24
1999  0785  DA 3F 09    	jp	C, l_player_pick_item_00131
2000  0788  3E 2F       	ld	a,0x2f
2001  078A  DD 96 FF    	sub	a,(ix-1)
2002  078D  DA 3F 09    	jp	C, l_player_pick_item_00131
2003  0790  CD 00 00    	call	_ay_reset
2004  0793  2A 00 00    	ld	hl,(_sprite_curr_index)
2005  0796  26 00       	ld	h,0x00
2006  0798  01 00 00    	ld	bc,_scr_map
2007  079B  09          	add	hl,bc
2008  079C  3A 00 00    	ld	a,(_sprite_curr_index)
2009  079F  5F          	ld	e,a
2010  07A0  16 00       	ld	d,0x00
2011  07A2  E5          	push	hl
2012  07A3  D5          	push	de
2013  07A4  CD 00 00    	call	_game_match_back
2014  07A7  F1          	pop	af
2015  07A8  C1          	pop	bc
2016  07A9  7D          	ld	a,l
2017  07AA  02          	ld	(bc), a
2018  07AB  2A 00 00    	ld	hl,(_sprite_curr_index)
2019  07AE  26 00       	ld	h,0x00
2020  07B0  CD 00 00    	call	_game_obj_set
2021  07B3  3A 00 00    	ld	a,(_sprite_curr_index)
2022  07B6  07          	rlca
2023  07B7  07          	rlca
2024  07B8  07          	rlca
2025  07B9  07          	rlca
2026  07BA  E6 0F       	and	a,0x0f
2027  07BC  07          	rlca
2028  07BD  07          	rlca
2029  07BE  07          	rlca
2030  07BF  07          	rlca
2031  07C0  E6 F0       	and	a,0xf0
2032  07C2  32 00 00    	ld	(_s_lin1),a
2033  07C5  3A 00 00    	ld	a,(_sprite_curr_index)
2034  07C8  E6 0F       	and	a,0x0f
2035  07CA  87          	add	a, a
2036  07CB  32 00 00    	ld	(_s_col1),a
2037  07CE  21 00 00    	ld	hl,0x0000
2038  07D1  E5          	push	hl
2039  07D2  21 84 03    	ld	hl,0x0384
2040  07D5  E5          	push	hl
2041  07D6  F5          	push	af
2042  07D7  33          	inc	sp
2043  07D8  3A 00 00    	ld	a,(_s_lin1)
2044  07DB  F5          	push	af
2045  07DC  33          	inc	sp
2046  07DD  CD 00 00    	call	_spr_add_anim
2047  07E0  F1          	pop	af
2048  07E1  F1          	pop	af
2049  07E2  F1          	pop	af
2050  07E3  DD 7E FF    	ld	a,(ix-1)
2051  07E6  D6 24       	sub	a,0x24
2052  07E8  DA 3F 09    	jp	C, l_player_pick_item_00131
2053  07EB  3E 2F       	ld	a,0x2f
2054  07ED  DD 96 FF    	sub	a,(ix-1)
2055  07F0  DA 3F 09    	jp	C, l_player_pick_item_00131
2056  07F3  DD 7E FF    	ld	a,(ix-1)
2057  07F6  C6 DC       	add	a,0xdc
2058  07F8  4F          	ld	c, a
2059  07F9  06 00       	ld	b,0x00
2060  07FB  21 02 08    	ld	hl,l_player_pick_item_00177
2061  07FE  09          	add	hl, bc
2062  07FF  09          	add	hl, bc
2063  0800  09          	add	hl, bc
2064  0801  E9          	jp	(hl)
2065  0802              l_player_pick_item_00177:
2066  0802  C3 26 08    	jp	l_player_pick_item_00101
2067  0805  C3 37 08    	jp	l_player_pick_item_00102
2068  0808  C3 48 08    	jp	l_player_pick_item_00103
2069  080B  C3 59 08    	jp	l_player_pick_item_00104
2070  080E  C3 6A 08    	jp	l_player_pick_item_00105
2071  0811  C3 9D 08    	jp	l_player_pick_item_00109
2072  0814  C3 BA 08    	jp	l_player_pick_item_00112
2073  0817  C3 D5 08    	jp	l_player_pick_item_00115
2074  081A  C3 F0 08    	jp	l_player_pick_item_00118
2075  081D  C3 0B 09    	jp	l_player_pick_item_00121
2076  0820  C3 26 09    	jp	l_player_pick_item_00124
2077  0823  C3 8E 08    	jp	l_player_pick_item_00108
2078  0826              l_player_pick_item_00101:
2079  0826  21 00 00    	ld	hl,_ay_effect_09
2080  0829  CD 00 00    	call	_ay_fx_play
2081  082C  21 00 00    	ld	hl,_player_keys
2082  082F  36 01       	ld	(hl),0x01
2083  0831  CD 00 00    	call	_game_update_stats
2084  0834  C3 3F 09    	jp	l_player_pick_item_00131
2085  0837              l_player_pick_item_00102:
2086  0837  21 00 00    	ld	hl,_ay_effect_09
2087  083A  CD 00 00    	call	_ay_fx_play
2088  083D  21 01 00    	ld	hl, +(_player_keys + 0x0001)
2089  0840  36 01       	ld	(hl),0x01
2090  0842  CD 00 00    	call	_game_update_stats
2091  0845  C3 3F 09    	jp	l_player_pick_item_00131
2092  0848              l_player_pick_item_00103:
2093  0848  21 00 00    	ld	hl,_ay_effect_09
2094  084B  CD 00 00    	call	_ay_fx_play
2095  084E  21 02 00    	ld	hl, +(_player_keys + 0x0002)
2096  0851  36 01       	ld	(hl),0x01
2097  0853  CD 00 00    	call	_game_update_stats
2098  0856  C3 3F 09    	jp	l_player_pick_item_00131
2099  0859              l_player_pick_item_00104:
2100  0859  21 00 00    	ld	hl,_ay_effect_09
2101  085C  CD 00 00    	call	_ay_fx_play
2102  085F  21 03 00    	ld	hl, +(_player_keys + 0x0003)
2103  0862  36 01       	ld	(hl),0x01
2104  0864  CD 00 00    	call	_game_update_stats
2105  0867  C3 3F 09    	jp	l_player_pick_item_00131
2106  086A              l_player_pick_item_00105:
2107  086A  21 00 00    	ld	hl,_ay_effect_10
2108  086D  CD 00 00    	call	_ay_fx_play
2109  0870  21 01 00    	ld	hl,0x0001
2110  0873  CD 2A 0C    	call	_player_score_add
2111  0876  21 00 00    	ld	hl,_player_coins
2112  0879  7E          	ld	a,(hl)
2113  087A  3C          	inc	a
2114  087B  77          	ld	(hl),a
2115  087C  D6 64       	sub	a,0x64
2116  087E  20 08       	jr	NZ,l_player_pick_item_00107
2117  0880  CD 46 05    	call	_player_1up
2118  0883  21 00 00    	ld	hl,_player_coins
2119  0886  36 00       	ld	(hl),0x00
2120  0888              l_player_pick_item_00107:
2121  0888  CD 00 00    	call	_game_update_stats
2122  088B  C3 3F 09    	jp	l_player_pick_item_00131
2123  088E              l_player_pick_item_00108:
2124  088E  21 00 00    	ld	hl,_ay_effect_10
2125  0891  CD 00 00    	call	_ay_fx_play
2126  0894  21 0A 00    	ld	hl,0x000a
2127  0897  CD 2A 0C    	call	_player_score_add
2128  089A  C3 3F 09    	jp	l_player_pick_item_00131
2129  089D              l_player_pick_item_00109:
2130  089D  21 00 00    	ld	hl,_ay_effect_09
2131  08A0  CD 00 00    	call	_ay_fx_play
2132  08A3  21 00 00    	ld	hl,_player_str
2133  08A6  34          	inc	(hl)
2134  08A7  21 00 00    	ld	hl,_player_max_vita
2135  08AA  7E          	ld	a, (hl)
2136  08AB  D6 C8       	sub	a,0xc8
2137  08AD  D2 3F 09    	jp	NC, l_player_pick_item_00131
2138  08B0  7E          	ld	a, (hl)
2139  08B1  C6 0A       	add	a,0x0a
2140  08B3  77          	ld	(hl), a
2141  08B4  CD 00 00    	call	_game_update_stats
2142  08B7  C3 3F 09    	jp	l_player_pick_item_00131
2143  08BA              l_player_pick_item_00112:
2144  08BA  21 00 00    	ld	hl,_ay_effect_09
2145  08BD  CD 00 00    	call	_ay_fx_play
2146  08C0  21 00 00    	ld	hl,_player_str
2147  08C3  34          	inc	(hl)
2148  08C4  21 00 00    	ld	hl,_player_max_vita
2149  08C7  7E          	ld	a, (hl)
2150  08C8  D6 C8       	sub	a,0xc8
2151  08CA  30 73       	jr	NC,l_player_pick_item_00131
2152  08CC  7E          	ld	a, (hl)
2153  08CD  C6 0A       	add	a,0x0a
2154  08CF  77          	ld	(hl), a
2155  08D0  CD 00 00    	call	_game_update_stats
2156  08D3  18 6A       	jr	l_player_pick_item_00131
2157  08D5              l_player_pick_item_00115:
2158  08D5  21 00 00    	ld	hl,_ay_effect_09
2159  08D8  CD 00 00    	call	_ay_fx_play
2160  08DB  21 00 00    	ld	hl,_player_str
2161  08DE  34          	inc	(hl)
2162  08DF  21 00 00    	ld	hl,_player_max_vita
2163  08E2  7E          	ld	a, (hl)
2164  08E3  D6 C8       	sub	a,0xc8
2165  08E5  30 58       	jr	NC,l_player_pick_item_00131
2166  08E7  7E          	ld	a, (hl)
2167  08E8  C6 0A       	add	a,0x0a
2168  08EA  77          	ld	(hl), a
2169  08EB  CD 00 00    	call	_game_update_stats
2170  08EE  18 4F       	jr	l_player_pick_item_00131
2171  08F0              l_player_pick_item_00118:
2172  08F0  21 00 00    	ld	hl,_ay_effect_09
2173  08F3  CD 00 00    	call	_ay_fx_play
2174  08F6  21 00 00    	ld	hl,_player_int
2175  08F9  34          	inc	(hl)
2176  08FA  21 00 00    	ld	hl,_player_max_mana
2177  08FD  7E          	ld	a, (hl)
2178  08FE  D6 C8       	sub	a,0xc8
2179  0900  30 3D       	jr	NC,l_player_pick_item_00131
2180  0902  7E          	ld	a, (hl)
2181  0903  C6 0A       	add	a,0x0a
2182  0905  77          	ld	(hl), a
2183  0906  CD 00 00    	call	_game_update_stats
2184  0909  18 34       	jr	l_player_pick_item_00131
2185  090B              l_player_pick_item_00121:
2186  090B  21 00 00    	ld	hl,_ay_effect_09
2187  090E  CD 00 00    	call	_ay_fx_play
2188  0911  21 00 00    	ld	hl,_player_int
2189  0914  34          	inc	(hl)
2190  0915  21 00 00    	ld	hl,_player_max_mana
2191  0918  7E          	ld	a, (hl)
2192  0919  D6 C8       	sub	a,0xc8
2193  091B  30 22       	jr	NC,l_player_pick_item_00131
2194  091D  7E          	ld	a, (hl)
2195  091E  C6 0A       	add	a,0x0a
2196  0920  77          	ld	(hl), a
2197  0921  CD 00 00    	call	_game_update_stats
2198  0924  18 19       	jr	l_player_pick_item_00131
2199  0926              l_player_pick_item_00124:
2200  0926  21 00 00    	ld	hl,_ay_effect_09
2201  0929  CD 00 00    	call	_ay_fx_play
2202  092C  21 00 00    	ld	hl,_player_int
2203  092F  34          	inc	(hl)
2204  0930  21 00 00    	ld	hl,_player_max_mana
2205  0933  7E          	ld	a, (hl)
2206  0934  D6 C8       	sub	a,0xc8
2207  0936  30 07       	jr	NC,l_player_pick_item_00131
2208  0938  7E          	ld	a, (hl)
2209  0939  C6 0A       	add	a,0x0a
2210  093B  77          	ld	(hl), a
2211  093C  CD 00 00    	call	_game_update_stats
2212  093F              l_player_pick_item_00131:
2213  093F  33          	inc	sp
2214  0940  DD E1       	pop	ix
2215  0942  C9          	ret
2216  0943              	SECTION code_compiler
2217  0943              ;	---------------------------------
2218  0943              ; Function player_hit_platform
2219  0943              ; ---------------------------------
2220  0943              _player_hit_platform:
2221  0943  CD 00 00    	call	___sdcc_enter_ix
2222  0946  F5          	push	af
2223  0947  3B          	dec	sp
2224  0948  3A 00 00    	ld	a,(_player_hit_lin)
2225  094B  B7          	or	a, a
2226  094C  C2 F4 0B    	jp	NZ, l_player_hit_platform_00145
2227  094F  21 07 00    	ld	hl,+(_lin + 0x0007)
2228  0952  4E          	ld	c, (hl)
2229  0953  3E 10       	ld	a,0x10
2230  0955  91          	sub	a, c
2231  0956  D2 F4 0B    	jp	NC, l_player_hit_platform_00145
2232  0959  01 00 00    	ld	bc,_scr_map
2233  095C  2A 00 00    	ld	hl,(_index1)
2234  095F  09          	add	hl,bc
2235  0960  7E          	ld	a,(hl)
2236  0961  D6 45       	sub	a,0x45
2237  0963  DA F4 0B    	jp	C, l_player_hit_platform_00145
2238  0966  2A 00 00    	ld	hl,(_curr_time)
2239  0969  22 0E 00    	ld	(_spr_timer + 0x000e),hl
2240  096C  2A 07 00    	ld	hl,(_lin + 0x0007)
2241  096F  26 00       	ld	h,0x00
2242  0971  01 F8 FF    	ld	bc,0xfff8
2243  0974  09          	add	hl,bc
2244  0975  EB          	ex	de,hl
2245  0976  06 04       	ld	b,0x04
2246  0978              l_player_hit_platform_00252:
2247  0978  CB 2A       	sra	d
2248  097A  CB 1B       	rr	e
2249  097C  10 FA       	djnz	l_player_hit_platform_00252
2250  097E  7B          	ld	a, e
2251  097F  07          	rlca
2252  0980  07          	rlca
2253  0981  07          	rlca
2254  0982  07          	rlca
2255  0983  E6 F0       	and	a,0xf0
2256  0985  C6 08       	add	a,0x08
2257  0987  32 00 00    	ld	(_player_hit_lin),a
2258  098A  21 07 00    	ld	hl,+(_col + 0x0007)
2259  098D  4E          	ld	c, (hl)
2260  098E  CB 41       	bit	0, c
2261  0990  20 06       	jr	NZ,l_player_hit_platform_00111
2262  0992  21 00 00    	ld	hl,_player_hit_col
2263  0995  71          	ld	(hl), c
2264  0996  18 2D       	jr	l_player_hit_platform_00112
2265  0998              l_player_hit_platform_00111:
2266  0998  21 07 00    	ld	hl,+(_state + 0x0007)
2267  099B  5E          	ld	e, (hl)
2268  099C  41          	ld	b, c
2269  099D  04          	inc	b
2270  099E  0D          	dec	c
2271  099F  CB 5B       	bit	3, e
2272  09A1  28 12       	jr	Z,l_player_hit_platform_00108
2273  09A3  3A 00 00    	ld	a,(_g_player_hit_right)
2274  09A6  B7          	or	a, a
2275  09A7  28 06       	jr	Z,l_player_hit_platform_00102
2276  09A9  21 00 00    	ld	hl,_player_hit_col
2277  09AC  70          	ld	(hl), b
2278  09AD  18 16       	jr	l_player_hit_platform_00112
2279  09AF              l_player_hit_platform_00102:
2280  09AF  21 00 00    	ld	hl,_player_hit_col
2281  09B2  71          	ld	(hl), c
2282  09B3  18 10       	jr	l_player_hit_platform_00112
2283  09B5              l_player_hit_platform_00108:
2284  09B5  3A 00 00    	ld	a,(_g_player_hit_left)
2285  09B8  B7          	or	a, a
2286  09B9  28 06       	jr	Z,l_player_hit_platform_00105
2287  09BB  21 00 00    	ld	hl,_player_hit_col
2288  09BE  71          	ld	(hl), c
2289  09BF  18 04       	jr	l_player_hit_platform_00112
2290  09C1              l_player_hit_platform_00105:
2291  09C1  21 00 00    	ld	hl,_player_hit_col
2292  09C4  70          	ld	(hl), b
2293  09C5              l_player_hit_platform_00112:
2294  09C5  2A 00 00    	ld	hl,(_index1)
2295  09C8  01 00 00    	ld	bc,_scr_map
2296  09CB  09          	add	hl,bc
2297  09CC  7E          	ld	a,(hl)
2298  09CD  FE 4D       	cp	a,0x4d
2299  09CF  20 43       	jr	NZ,l_player_hit_platform_00114
2300  09D1  E5          	push	hl
2301  09D2  2A 00 00    	ld	hl,(_index1)
2302  09D5  E5          	push	hl
2303  09D6  CD 00 00    	call	_game_match_back
2304  09D9  F1          	pop	af
2305  09DA  C1          	pop	bc
2306  09DB  7D          	ld	a,l
2307  09DC  02          	ld	(bc), a
2308  09DD  2A 00 00    	ld	hl,(_index1)
2309  09E0  CD 00 00    	call	_game_obj_set
2310  09E3  21 00 00    	ld	hl,_index1
2311  09E6  7E          	ld	a, (hl)
2312  09E7  E6 0F       	and	a,0x0f
2313  09E9  87          	add	a, a
2314  09EA  4F          	ld	c, a
2315  09EB  23          	inc	hl
2316  09EC  56          	ld	d,(hl)
2317  09ED  2B          	dec	hl
2318  09EE  7E          	ld	a, (hl)
2319  09EF  06 04       	ld	b,0x04
2320  09F1              l_player_hit_platform_00258:
2321  09F1  CB 3A       	srl	d
2322  09F3  1F          	rra
2323  09F4  10 FB       	djnz	l_player_hit_platform_00258
2324  09F6  07          	rlca
2325  09F7  07          	rlca
2326  09F8  07          	rlca
2327  09F9  07          	rlca
2328  09FA  E6 F0       	and	a,0xf0
2329  09FC  47          	ld	b, a
2330  09FD  21 00 00    	ld	hl,0x0000
2331  0A00  E5          	push	hl
2332  0A01  21 87 03    	ld	hl,0x0387
2333  0A04  E5          	push	hl
2334  0A05  79          	ld	a, c
2335  0A06  48          	ld	c,b
2336  0A07  47          	ld	b,a
2337  0A08  C5          	push	bc
2338  0A09  CD 00 00    	call	_spr_add_anim
2339  0A0C  F1          	pop	af
2340  0A0D  F1          	pop	af
2341  0A0E  F1          	pop	af
2342  0A0F  2E 01       	ld	l,0x01
2343  0A11  C3 F6 0B    	jp	l_player_hit_platform_00148
2344  0A14              l_player_hit_platform_00114:
2345  0A14  FE 5C       	cp	a,0x5c
2346  0A16  28 05       	jr	Z,l_player_hit_platform_00141
2347  0A18  D6 5D       	sub	a,0x5d
2348  0A1A  C2 E5 0B    	jp	NZ,l_player_hit_platform_00142
2349  0A1D              l_player_hit_platform_00141:
2350  0A1D  3A 00 00    	ld	a,(_game_boss)
2351  0A20  B7          	or	a, a
2352  0A21  28 0B       	jr	Z,l_player_hit_platform_00174
2353  0A23  3A 00 00    	ld	a,(_game_mush_count)
2354  0A26  B7          	or	a, a
2355  0A27  28 05       	jr	Z,l_player_hit_platform_00174
2356  0A29  2E 00       	ld	l,0x00
2357  0A2B  C3 F6 0B    	jp	l_player_hit_platform_00148
2358  0A2E              l_player_hit_platform_00174:
2359  0A2E  DD 36 FD 00 	ld	(ix-3),0x00
2360  0A32              l_player_hit_platform_00138:
2361  0A32  DD 7E FD    	ld	a,(ix-3)
2362  0A35  D6 07       	sub	a,0x07
2363  0A37  D2 E5 0B    	jp	NC, l_player_hit_platform_00142
2364  0A3A  01 00 00    	ld	bc,_mush_index
2365  0A3D  DD 6E FD    	ld	l,(ix-3)
2366  0A40  26 00       	ld	h,0x00
2367  0A42  09          	add	hl,bc
2368  0A43  DD 75 FE    	ld	(ix-2),l
2369  0A46  DD 74 FF    	ld	(ix-1),h
2370  0A49  7E          	ld	a, (hl)
2371  0A4A  DD 77 FE    	ld	(ix-2),a
2372  0A4D  DD 36 FF 00 	ld	(ix-1),0x00
2373  0A51  21 00 00    	ld	hl,_index1
2374  0A54  7E          	ld	a, (hl)
2375  0A55  DD 96 FE    	sub	a,(ix-2)
2376  0A58  C2 DF 0B    	jp	NZ,l_player_hit_platform_00137
2377  0A5B  23          	inc	hl
2378  0A5C  7E          	ld	a, (hl)
2379  0A5D  DD 96 FF    	sub	a,(ix-1)
2380  0A60  C2 DF 0B    	jp	NZ,l_player_hit_platform_00137
2381  0A63  3A 07 00    	ld	a,(_lin + 0x0007)
2382  0A66  07          	rlca
2383  0A67  07          	rlca
2384  0A68  07          	rlca
2385  0A69  07          	rlca
2386  0A6A  E6 0F       	and	a,0x0f
2387  0A6C  07          	rlca
2388  0A6D  07          	rlca
2389  0A6E  07          	rlca
2390  0A6F  07          	rlca
2391  0A70  E6 F0       	and	a,0xf0
2392  0A72  C6 E0       	add	a,0xe0
2393  0A74  32 00 00    	ld	(_s_lin1),a
2394  0A77  3A 07 00    	ld	a,(_col + 0x0007)
2395  0A7A  CB 3F       	srl	a
2396  0A7C  87          	add	a, a
2397  0A7D  32 00 00    	ld	(_s_col1),a
2398  0A80  0E 00       	ld	c,0x00
2399  0A82              l_player_hit_platform_00120:
2400  0A82  79          	ld	a, c
2401  0A83  D6 07       	sub	a,0x07
2402  0A85  30 18       	jr	NC,l_player_hit_platform_00122
2403  0A87  06 00       	ld	b,0x00
2404  0A89  21 00 00    	ld	hl,_mush_index
2405  0A8C  09          	add	hl, bc
2406  0A8D  5E          	ld	e, (hl)
2407  0A8E  16 00       	ld	d,0x00
2408  0A90  21 00 00    	ld	hl,_index1
2409  0A93  7E          	ld	a, (hl)
2410  0A94  93          	sub	a, e
2411  0A95  20 05       	jr	NZ,l_player_hit_platform_00264
2412  0A97  23          	inc	hl
2413  0A98  7E          	ld	a, (hl)
2414  0A99  92          	sub	a, d
2415  0A9A  28 03       	jr	Z,l_player_hit_platform_00122
2416  0A9C              l_player_hit_platform_00264:
2417  0A9C  0C          	inc	c
2418  0A9D  18 E3       	jr	l_player_hit_platform_00120
2419  0A9F              l_player_hit_platform_00122:
2420  0A9F  21 00 00    	ld	hl,_ay_effect_07
2421  0AA2  CD 00 00    	call	_ay_fx_play
2422  0AA5  06 00       	ld	b,0x00
2423  0AA7  21 00 00    	ld	hl,_mush_class
2424  0AAA  09          	add	hl, bc
2425  0AAB  7E          	ld	a, (hl)
2426  0AAC  FE 79       	cp	a,0x79
2427  0AAE  28 18       	jr	Z,l_player_hit_platform_00123
2428  0AB0  FE 7A       	cp	a,0x7a
2429  0AB2  28 2F       	jr	Z,l_player_hit_platform_00124
2430  0AB4  FE 7B       	cp	a,0x7b
2431  0AB6  28 5F       	jr	Z,l_player_hit_platform_00126
2432  0AB8  FE 7C       	cp	a,0x7c
2433  0ABA  28 41       	jr	Z,l_player_hit_platform_00125
2434  0ABC  FE 7D       	cp	a,0x7d
2435  0ABE  CA 4B 0B    	jp	Z,l_player_hit_platform_00128
2436  0AC1  D6 7E       	sub	a,0x7e
2437  0AC3  28 6C       	jr	Z,l_player_hit_platform_00127
2438  0AC5  C3 63 0B    	jp	l_player_hit_platform_00129
2439  0AC8              l_player_hit_platform_00123:
2440  0AC8  2E 02       	ld	l,0x02
2441  0ACA  CD 00 00    	call	_zx_border_fastcall
2442  0ACD  3A 00 00    	ld	a,(_s_col1)
2443  0AD0  21 06 FF    	ld	hl,0xff06
2444  0AD3  E5          	push	hl
2445  0AD4  F5          	push	af
2446  0AD5  33          	inc	sp
2447  0AD6  3A 00 00    	ld	a,(_s_lin1)
2448  0AD9  F5          	push	af
2449  0ADA  33          	inc	sp
2450  0ADB  CD 00 00    	call	_enemy_init
2451  0ADE  F1          	pop	af
2452  0ADF  F1          	pop	af
2453  0AE0  C3 63 0B    	jp	l_player_hit_platform_00129
2454  0AE3              l_player_hit_platform_00124:
2455  0AE3  2E 02       	ld	l,0x02
2456  0AE5  CD 00 00    	call	_zx_border_fastcall
2457  0AE8  3A 00 00    	ld	a,(_s_col1)
2458  0AEB  21 06 01    	ld	hl,0x0106
2459  0AEE  E5          	push	hl
2460  0AEF  F5          	push	af
2461  0AF0  33          	inc	sp
2462  0AF1  3A 00 00    	ld	a,(_s_lin1)
2463  0AF4  F5          	push	af
2464  0AF5  33          	inc	sp
2465  0AF6  CD 00 00    	call	_enemy_init
2466  0AF9  F1          	pop	af
2467  0AFA  F1          	pop	af
2468  0AFB  18 66       	jr	l_player_hit_platform_00129
2469  0AFD              l_player_hit_platform_00125:
2470  0AFD  2E 01       	ld	l,0x01
2471  0AFF  CD 00 00    	call	_zx_border_fastcall
2472  0B02  3A 00 00    	ld	a,(_s_col1)
2473  0B05  21 07 01    	ld	hl,0x0107
2474  0B08  E5          	push	hl
2475  0B09  F5          	push	af
2476  0B0A  33          	inc	sp
2477  0B0B  3A 00 00    	ld	a,(_s_lin1)
2478  0B0E  F5          	push	af
2479  0B0F  33          	inc	sp
2480  0B10  CD 00 00    	call	_enemy_init
2481  0B13  F1          	pop	af
2482  0B14  F1          	pop	af
2483  0B15  18 4C       	jr	l_player_hit_platform_00129
2484  0B17              l_player_hit_platform_00126:
2485  0B17  2E 01       	ld	l,0x01
2486  0B19  CD 00 00    	call	_zx_border_fastcall
2487  0B1C  3A 00 00    	ld	a,(_s_col1)
2488  0B1F  21 07 FF    	ld	hl,0xff07
2489  0B22  E5          	push	hl
2490  0B23  F5          	push	af
2491  0B24  33          	inc	sp
2492  0B25  3A 00 00    	ld	a,(_s_lin1)
2493  0B28  F5          	push	af
2494  0B29  33          	inc	sp
2495  0B2A  CD 00 00    	call	_enemy_init
2496  0B2D  F1          	pop	af
2497  0B2E  F1          	pop	af
2498  0B2F  18 32       	jr	l_player_hit_platform_00129
2499  0B31              l_player_hit_platform_00127:
2500  0B31  2E 04       	ld	l,0x04
2501  0B33  CD 00 00    	call	_zx_border_fastcall
2502  0B36  3A 00 00    	ld	a,(_s_col1)
2503  0B39  21 08 01    	ld	hl,0x0108
2504  0B3C  E5          	push	hl
2505  0B3D  F5          	push	af
2506  0B3E  33          	inc	sp
2507  0B3F  3A 00 00    	ld	a,(_s_lin1)
2508  0B42  F5          	push	af
2509  0B43  33          	inc	sp
2510  0B44  CD 00 00    	call	_enemy_init
2511  0B47  F1          	pop	af
2512  0B48  F1          	pop	af
2513  0B49  18 18       	jr	l_player_hit_platform_00129
2514  0B4B              l_player_hit_platform_00128:
2515  0B4B  2E 04       	ld	l,0x04
2516  0B4D  CD 00 00    	call	_zx_border_fastcall
2517  0B50  3A 00 00    	ld	a,(_s_col1)
2518  0B53  21 08 FF    	ld	hl,0xff08
2519  0B56  E5          	push	hl
2520  0B57  F5          	push	af
2521  0B58  33          	inc	sp
2522  0B59  3A 00 00    	ld	a,(_s_lin1)
2523  0B5C  F5          	push	af
2524  0B5D  33          	inc	sp
2525  0B5E  CD 00 00    	call	_enemy_init
2526  0B61  F1          	pop	af
2527  0B62  F1          	pop	af
2528  0B63              l_player_hit_platform_00129:
2529  0B63  21 00 00    	ld	hl,_game_mush_count
2530  0B66  34          	inc	(hl)
2531  0B67  3A 00 00    	ld	a,(_game_boss)
2532  0B6A  B7          	or	a, a
2533  0B6B  20 72       	jr	NZ,l_player_hit_platform_00137
2534  0B6D  3A 00 00    	ld	a,(_index1)
2535  0B70  C6 F0       	add	a,0xf0
2536  0B72  32 00 00    	ld	(_index0),a
2537  0B75  3A 01 00    	ld	a,(_index1 + 1)
2538  0B78  CE FF       	adc	a,0xff
2539  0B7A  21 01 00    	ld	hl,_index0 + 1
2540  0B7D  77          	ld	(hl), a
2541  0B7E  3E 00       	ld	a, +((_scr_map) & 0xFF)
2542  0B80  2B          	dec	hl
2543  0B81  86          	add	a, (hl)
2544  0B82  4F          	ld	c, a
2545  0B83  3E 00       	ld	a, +((_scr_map) / 256)
2546  0B85  23          	inc	hl
2547  0B86  8E          	adc	a, (hl)
2548  0B87  47          	ld	b, a
2549  0B88  C5          	push	bc
2550  0B89  46          	ld	b,(hl)
2551  0B8A  2B          	dec	hl
2552  0B8B  4E          	ld	c,(hl)
2553  0B8C  C5          	push	bc
2554  0B8D  CD 00 00    	call	_game_match_back
2555  0B90  F1          	pop	af
2556  0B91  C1          	pop	bc
2557  0B92  7D          	ld	a,l
2558  0B93  02          	ld	(bc), a
2559  0B94  3E 00       	ld	a, +((_scr_map) & 0xFF)
2560  0B96  21 00 00    	ld	hl,_index1
2561  0B99  86          	add	a, (hl)
2562  0B9A  DD 77 FE    	ld	(ix-2),a
2563  0B9D  3E 00       	ld	a, +((_scr_map) / 256)
2564  0B9F  23          	inc	hl
2565  0BA0  8E          	adc	a, (hl)
2566  0BA1  DD 6E FE    	ld	l,(ix-2)
2567  0BA4  DD 77 FF    	ld	(ix-1),a
2568  0BA7  67          	ld	h,a
2569  0BA8  7E          	ld	a, (hl)
2570  0BA9  FE 5C       	cp	a,0x5c
2571  0BAB  28 04       	jr	Z,l_player_hit_platform_00130
2572  0BAD  D6 5D       	sub	a,0x5d
2573  0BAF  20 0A       	jr	NZ,l_player_hit_platform_00131
2574  0BB1              l_player_hit_platform_00130:
2575  0BB1  DD 6E FE    	ld	l,(ix-2)
2576  0BB4  DD 66 FF    	ld	h,(ix-1)
2577  0BB7  36 4F       	ld	(hl),0x4f
2578  0BB9  18 08       	jr	l_player_hit_platform_00132
2579  0BBB              l_player_hit_platform_00131:
2580  0BBB  DD 6E FE    	ld	l,(ix-2)
2581  0BBE  DD 66 FF    	ld	h,(ix-1)
2582  0BC1  36 54       	ld	(hl),0x54
2583  0BC3              l_player_hit_platform_00132:
2584  0BC3  2A 00 00    	ld	hl,(_index1)
2585  0BC6  01 F0 FF    	ld	bc,0xfff0
2586  0BC9  09          	add	hl,bc
2587  0BCA  CD 00 00    	call	_game_obj_set
2588  0BCD  3A 00 00    	ld	a,(_s_lin1)
2589  0BD0  C6 10       	add	a,0x10
2590  0BD2  4F          	ld	c, a
2591  0BD3  3A 00 00    	ld	a, (_s_col1)
2592  0BD6  47          	ld	b,a
2593  0BD7  C5          	push	bc
2594  0BD8  3E 4F       	ld	a,0x4f
2595  0BDA  F5          	push	af
2596  0BDB  33          	inc	sp
2597  0BDC  CD 00 00    	call	_NIRVANAP_drawT_callee
2598  0BDF              l_player_hit_platform_00137:
2599  0BDF  DD 34 FD    	inc	(ix-3)
2600  0BE2  C3 32 0A    	jp	l_player_hit_platform_00138
2601  0BE5              l_player_hit_platform_00142:
2602  0BE5  21 00 00    	ld	hl,_ay_effect_02
2603  0BE8  CD 00 00    	call	_ay_fx_play
2604  0BEB  2E 01       	ld	l,0x01
2605  0BED  CD 00 00    	call	_spr_brick_anim
2606  0BF0  2E 01       	ld	l,0x01
2607  0BF2  18 02       	jr	l_player_hit_platform_00148
2608  0BF4              l_player_hit_platform_00145:
2609  0BF4  2E 00       	ld	l,0x00
2610  0BF6              l_player_hit_platform_00148:
2611  0BF6  DD F9       	ld	sp, ix
2612  0BF8  DD E1       	pop	ix
2613  0BFA  C9          	ret
2614  0BFB              	SECTION code_compiler
2615  0BFB              ;	---------------------------------
2616  0BFB              ; Function player_hit_platform_clear
2617  0BFB              ; ---------------------------------
2618  0BFB              _player_hit_platform_clear:
2619  0BFB  01 04 00    	ld	bc,0x0004
2620  0BFE  C5          	push	bc
2621  0BFF  2A 0E 00    	ld	hl,(_spr_timer + 0x000e)
2622  0C02  E5          	push	hl
2623  0C03  CD 00 00    	call	_game_check_time
2624  0C06  F1          	pop	af
2625  0C07  F1          	pop	af
2626  0C08  7D          	ld	a, l
2627  0C09  B7          	or	a, a
2628  0C0A  C8          	ret	Z
2629  0C0B  2A FF FF    	ld	hl,(_player_hit_col - 1)
2630  0C0E  3A 00 00    	ld	a,(_player_hit_lin)
2631  0C11  6F          	ld	l,a
2632  0C12  E5          	push	hl
2633  0C13  CD 00 00    	call	_spr_calc_index
2634  0C16  F1          	pop	af
2635  0C17  22 00 00    	ld	(_index1),hl
2636  0C1A  2E 00       	ld	l,0x00
2637  0C1C  CD 00 00    	call	_spr_brick_anim
2638  0C1F  21 00 00    	ld	hl,_player_hit_lin
2639  0C22  36 00       	ld	(hl),0x00
2640  0C24  21 00 00    	ld	hl,_player_hit_col
2641  0C27  36 00       	ld	(hl),0x00
2642  0C29  C9          	ret
2643  0C2A              	SECTION code_compiler
2644  0C2A              ;	---------------------------------
2645  0C2A              ; Function player_score_add
2646  0C2A              ; ---------------------------------
2647  0C2A              _player_score_add:
2648  0C2A  ED 4B 00 00 	ld	bc,(_player_score)
2649  0C2E  09          	add	hl,bc
2650  0C2F  22 00 00    	ld	(_player_score),hl
2651  0C32  21 00 00    	ld	hl,_player_lvl
2652  0C35  7E          	ld	a, (hl)
2653  0C36  D6 14       	sub	a,0x14
2654  0C38  30 42       	jr	NC,l_player_score_add_00104
2655  0C3A  01 00 00    	ld	bc,_player_lvl_table+0
2656  0C3D  6E          	ld	l,(hl)
2657  0C3E  26 00       	ld	h,0x00
2658  0C40  29          	add	hl, hl
2659  0C41  09          	add	hl, bc
2660  0C42  4E          	ld	c, (hl)
2661  0C43  23          	inc	hl
2662  0C44  46          	ld	b, (hl)
2663  0C45  21 00 00    	ld	hl,_player_score
2664  0C48  7E          	ld	a, (hl)
2665  0C49  91          	sub	a, c
2666  0C4A  23          	inc	hl
2667  0C4B  7E          	ld	a, (hl)
2668  0C4C  98          	sbc	a, b
2669  0C4D  38 2D       	jr	C,l_player_score_add_00104
2670  0C4F  21 00 00    	ld	hl,_player_lvl
2671  0C52  34          	inc	(hl)
2672  0C53  CD 00 00    	call	_game_update_stats
2673  0C56  CD 00 00    	call	_spr_flatten
2674  0C59  21 06 00    	ld	hl,___str_1
2675  0C5C  E5          	push	hl
2676  0C5D  21 0C 0C    	ld	hl,0x0c0c
2677  0C60  E5          	push	hl
2678  0C61  CD 00 00    	call	_zx_print_str
2679  0C64  AF          	xor	a, a
2680  0C65  F5          	push	af
2681  0C66  33          	inc	sp
2682  0C67  21 3C 00    	ld	hl,0x003c
2683  0C6A  E5          	push	hl
2684  0C6B  21 0C 15    	ld	hl,0x150c
2685  0C6E  E5          	push	hl
2686  0C6F  3E 0C       	ld	a,0x0c
2687  0C71  F5          	push	af
2688  0C72  33          	inc	sp
2689  0C73  CD 00 00    	call	_game_colour_message
2690  0C76  F1          	pop	af
2691  0C77  F1          	pop	af
2692  0C78  F1          	pop	af
2693  0C79  CD 00 00    	call	_spr_unflatten
2694  0C7C              l_player_score_add_00104:
2695  0C7C  3A 00 00    	ld	a,(_game_score_top)
2696  0C7F  21 00 00    	ld	hl,_player_score
2697  0C82  96          	sub	a, (hl)
2698  0C83  3A 01 00    	ld	a,(_game_score_top + 1)
2699  0C86  23          	inc	hl
2700  0C87  9E          	sbc	a, (hl)
2701  0C88  30 06       	jr	NC,l_player_score_add_00106
2702  0C8A  2A 00 00    	ld	hl,(_player_score)
2703  0C8D  22 00 00    	ld	(_game_score_top),hl
2704  0C90              l_player_score_add_00106:
2705  0C90  CD 00 00    	call	_game_print_score
2706  0C93  C9          	ret
2707  0C94              	SECTION rodata_compiler
2708  0006              ___str_1:
2709  0006  4C 45 56 45 4C 20 55 50 21 
                        	DEFM "LEVEL UP!"
2710  000F  00          	DEFB 0x00
2711  0010              	SECTION code_compiler
2712  0C94              ;	---------------------------------
2713  0C94              ; Function player_check_floor
2714  0C94              ; ---------------------------------
2715  0C94              _player_check_floor:
2716  0C94  CD 00 00    	call	___sdcc_enter_ix
2717  0C97  F5          	push	af
2718  0C98  F5          	push	af
2719  0C99  F5          	push	af
2720  0C9A  11 07 00    	ld	de,_col+7
2721  0C9D  1A          	ld	a, (de)
2722  0C9E  47          	ld	b, a
2723  0C9F  3A 07 00    	ld	a,(_lin + 0x0007)
2724  0CA2  C6 10       	add	a,0x10
2725  0CA4  D5          	push	de
2726  0CA5  4F          	ld	c,a
2727  0CA6  C5          	push	bc
2728  0CA7  CD 00 00    	call	_spr_calc_index
2729  0CAA  F1          	pop	af
2730  0CAB  D1          	pop	de
2731  0CAC  DD 75 FC    	ld	(ix-4),l
2732  0CAF  DD 74 FD    	ld	(ix-3),h
2733  0CB2  01 00 00    	ld	bc,_scr_map+0
2734  0CB5  79          	ld	a, c
2735  0CB6  DD 86 FC    	add	a,(ix-4)
2736  0CB9  DD 77 FE    	ld	(ix-2),a
2737  0CBC  78          	ld	a, b
2738  0CBD  DD 8E FD    	adc	a,(ix-3)
2739  0CC0  DD 6E FE    	ld	l,(ix-2)
2740  0CC3  DD 77 FF    	ld	(ix-1),a
2741  0CC6  67          	ld	h,a
2742  0CC7  7E          	ld	a, (hl)
2743  0CC8  DD 77 FB    	ld	(ix-5),a
2744  0CCB  DD 6E FC    	ld	l,(ix-4)
2745  0CCE  DD 66 FD    	ld	h,(ix-3)
2746  0CD1  23          	inc	hl
2747  0CD2  09          	add	hl,bc
2748  0CD3  3A 00 00    	ld	a,(_s_lin0)
2749  0CD6  D6 90       	sub	a,0x90
2750  0CD8  4D          	ld	c,l
2751  0CD9  44          	ld	b,h
2752  0CDA  20 26       	jr	NZ,l_player_check_floor_00108
2753  0CDC  3A 00 00    	ld	a,(_map_heigth)
2754  0CDF  C5          	push	bc
2755  0CE0  F5          	push	af
2756  0CE1  33          	inc	sp
2757  0CE2  3A 00 00    	ld	a,(_scr_curr)
2758  0CE5  F5          	push	af
2759  0CE6  33          	inc	sp
2760  0CE7  CD 00 00    	call	__divuchar_callee
2761  0CEA  C1          	pop	bc
2762  0CEB  7D          	ld	a,l
2763  0CEC  3C          	inc	a
2764  0CED  32 00 00    	ld	(_tmp1),a
2765  0CF0  21 00 00    	ld	hl,_map_heigth
2766  0CF3  96          	sub	a, (hl)
2767  0CF4  30 06       	jr	NC,l_player_check_floor_00102
2768  0CF6  DD 36 FB 00 	ld	(ix-5),0x00
2769  0CFA  18 14       	jr	l_player_check_floor_00109
2770  0CFC              l_player_check_floor_00102:
2771  0CFC  DD 36 FB 48 	ld	(ix-5),0x48
2772  0D00  18 0E       	jr	l_player_check_floor_00109
2773  0D02              l_player_check_floor_00108:
2774  0D02  1A          	ld	a, (de)
2775  0D03  0F          	rrca
2776  0D04  38 06       	jr	C,l_player_check_floor_00105
2777  0D06  DD 36 FA 00 	ld	(ix-6),0x00
2778  0D0A  18 04       	jr	l_player_check_floor_00109
2779  0D0C              l_player_check_floor_00105:
2780  0D0C  0A          	ld	a, (bc)
2781  0D0D  DD 77 FA    	ld	(ix-6),a
2782  0D10              l_player_check_floor_00109:
2783  0D10  DD 7E FB    	ld	a,(ix-5)
2784  0D13  D6 3A       	sub	a,0x3a
2785  0D15  38 07       	jr	C,l_player_check_floor_00132
2786  0D17  DD 7E FB    	ld	a,(ix-5)
2787  0D1A  D6 60       	sub	a,0x60
2788  0D1C  38 32       	jr	C,l_player_check_floor_00128
2789  0D1E              l_player_check_floor_00132:
2790  0D1E  DD 7E FA    	ld	a,(ix-6)
2791  0D21  D6 3A       	sub	a,0x3a
2792  0D23  38 07       	jr	C,l_player_check_floor_00127
2793  0D25  DD 7E FA    	ld	a,(ix-6)
2794  0D28  D6 60       	sub	a,0x60
2795  0D2A  38 24       	jr	C,l_player_check_floor_00128
2796  0D2C              l_player_check_floor_00127:
2797  0D2C  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
2798  0D2F  36 02       	ld	(hl),0x02
2799  0D31  21 00 00    	ld	hl,_s_state
2800  0D34  CB CE       	set	1, (hl)
2801  0D36  2E 00       	ld	l,0x00
2802  0D38  CD 21 06    	call	_player_check_stairs
2803  0D3B  3A 00 00    	ld	a,(_player_onstair)
2804  0D3E  B7          	or	a, a
2805  0D3F  C2 EA 0D    	jp	NZ, l_player_check_floor_00133
2806  0D42  3A 00 00    	ld	a,(_s_lin0)
2807  0D45  D6 90       	sub	a,0x90
2808  0D47  C2 EA 0D    	jp	NZ,l_player_check_floor_00133
2809  0D4A  CD 00 00    	call	_spr_page_down
2810  0D4D  C3 EA 0D    	jp	l_player_check_floor_00133
2811  0D50              l_player_check_floor_00128:
2812  0D50  C5          	push	bc
2813  0D51  21 10 00    	ld	hl,0x0010
2814  0D54  E5          	push	hl
2815  0D55  2A 00 00    	ld	hl,(_player_brick_time)
2816  0D58  E5          	push	hl
2817  0D59  CD 00 00    	call	_game_check_time
2818  0D5C  F1          	pop	af
2819  0D5D  F1          	pop	af
2820  0D5E  C1          	pop	bc
2821  0D5F  7D          	ld	a,l
2822  0D60  B7          	or	a, a
2823  0D61  CA EA 0D    	jp	Z, l_player_check_floor_00133
2824  0D64  2A 00 00    	ld	hl,(_curr_time)
2825  0D67  22 00 00    	ld	(_player_brick_time),hl
2826  0D6A  DD 7E FB    	ld	a,(ix-5)
2827  0D6D  D6 40       	sub	a,0x40
2828  0D6F  20 1A       	jr	NZ,l_player_check_floor_00114
2829  0D71  C5          	push	bc
2830  0D72  DD 6E FC    	ld	l,(ix-4)
2831  0D75  DD 66 FD    	ld	h,(ix-3)
2832  0D78  E5          	push	hl
2833  0D79  CD 00 00    	call	_game_match_back
2834  0D7C  F1          	pop	af
2835  0D7D  C1          	pop	bc
2836  0D7E  5D          	ld	e,l
2837  0D7F  DD 6E FE    	ld	l,(ix-2)
2838  0D82  DD 66 FF    	ld	h,(ix-1)
2839  0D85  73          	ld	(hl), e
2840  0D86  C5          	push	bc
2841  0D87  CD EF 0D    	call	_player_gasta_brick
2842  0D8A  C1          	pop	bc
2843  0D8B              l_player_check_floor_00114:
2844  0D8B  DD 7E FB    	ld	a,(ix-5)
2845  0D8E  D6 3F       	sub	a,0x3f
2846  0D90  20 0D       	jr	NZ,l_player_check_floor_00116
2847  0D92  DD 6E FE    	ld	l,(ix-2)
2848  0D95  DD 66 FF    	ld	h,(ix-1)
2849  0D98  36 40       	ld	(hl),0x40
2850  0D9A  C5          	push	bc
2851  0D9B  CD EF 0D    	call	_player_gasta_brick
2852  0D9E  C1          	pop	bc
2853  0D9F              l_player_check_floor_00116:
2854  0D9F  DD 7E FB    	ld	a,(ix-5)
2855  0DA2  D6 3E       	sub	a,0x3e
2856  0DA4  20 0D       	jr	NZ,l_player_check_floor_00118
2857  0DA6  DD 6E FE    	ld	l,(ix-2)
2858  0DA9  DD 66 FF    	ld	h,(ix-1)
2859  0DAC  36 3F       	ld	(hl),0x3f
2860  0DAE  C5          	push	bc
2861  0DAF  CD EF 0D    	call	_player_gasta_brick
2862  0DB2  C1          	pop	bc
2863  0DB3              l_player_check_floor_00118:
2864  0DB3  DD 7E FA    	ld	a,(ix-6)
2865  0DB6  D6 40       	sub	a,0x40
2866  0DB8  20 14       	jr	NZ,l_player_check_floor_00120
2867  0DBA  C5          	push	bc
2868  0DBB  DD 6E FC    	ld	l,(ix-4)
2869  0DBE  DD 66 FD    	ld	h,(ix-3)
2870  0DC1  E5          	push	hl
2871  0DC2  CD 00 00    	call	_game_match_back
2872  0DC5  F1          	pop	af
2873  0DC6  C1          	pop	bc
2874  0DC7  7D          	ld	a,l
2875  0DC8  02          	ld	(bc), a
2876  0DC9  C5          	push	bc
2877  0DCA  CD EF 0D    	call	_player_gasta_brick
2878  0DCD  C1          	pop	bc
2879  0DCE              l_player_check_floor_00120:
2880  0DCE  DD 7E FA    	ld	a,(ix-6)
2881  0DD1  D6 3F       	sub	a,0x3f
2882  0DD3  20 08       	jr	NZ,l_player_check_floor_00122
2883  0DD5  3E 40       	ld	a,0x40
2884  0DD7  02          	ld	(bc), a
2885  0DD8  C5          	push	bc
2886  0DD9  CD EF 0D    	call	_player_gasta_brick
2887  0DDC  C1          	pop	bc
2888  0DDD              l_player_check_floor_00122:
2889  0DDD  DD 7E FA    	ld	a,(ix-6)
2890  0DE0  D6 3E       	sub	a,0x3e
2891  0DE2  20 06       	jr	NZ,l_player_check_floor_00133
2892  0DE4  3E 3F       	ld	a,0x3f
2893  0DE6  02          	ld	(bc), a
2894  0DE7  CD EF 0D    	call	_player_gasta_brick
2895  0DEA              l_player_check_floor_00133:
2896  0DEA  DD F9       	ld	sp, ix
2897  0DEC  DD E1       	pop	ix
2898  0DEE  C9          	ret
2899  0DEF              	SECTION code_compiler
2900  0DEF              ;	---------------------------------
2901  0DEF              ; Function player_gasta_brick
2902  0DEF              ; ---------------------------------
2903  0DEF              _player_gasta_brick:
2904  0DEF  3A 00 00    	ld	a,(_s_lin0)
2905  0DF2  32 00 00    	ld	(_s_lin1),a
2906  0DF5  3A 00 00    	ld	a,(_s_col0)
2907  0DF8  32 00 00    	ld	(_s_col1),a
2908  0DFB  3A 07 00    	ld	a,(_lin + 0x0007)
2909  0DFE  C6 10       	add	a,0x10
2910  0E00  32 00 00    	ld	(_s_lin0),a
2911  0E03  3A 07 00    	ld	a,(_col + 0x0007)
2912  0E06  32 00 00    	ld	(_s_col0),a
2913  0E09  CD 00 00    	call	_spr_back_repaint
2914  0E0C  3A 00 00    	ld	a,(_s_lin1)
2915  0E0F  32 00 00    	ld	(_s_lin0),a
2916  0E12  3A 00 00    	ld	a,(_s_col1)
2917  0E15  32 00 00    	ld	(_s_col0),a
2918  0E18  C9          	ret
2919  0E19              	SECTION code_compiler
2920  0E19              ;	---------------------------------
2921  0E19              ; Function player_move_jump
2922  0E19              ; ---------------------------------
2923  0E19              _player_move_jump:
2924  0E19  21 00 00    	ld	hl,_game_gravity
2925  0E1C  4E          	ld	c, (hl)
2926  0E1D  21 00 00    	ld	hl,_player_vel_y
2927  0E20  7E          	ld	a, (hl)
2928  0E21  81          	add	a, c
2929  0E22  77          	ld	(hl), a
2930  0E23  21 00 00    	ld	hl,_sprite_on_air
2931  0E26  36 01       	ld	(hl),0x01
2932  0E28  3A 00 00    	ld	a,(_player_vel_inc)
2933  0E2B  B7          	or	a, a
2934  0E2C  28 4A       	jr	Z,l_player_move_jump_00109
2935  0E2E  3A 00 00    	ld	a,(_dirs)
2936  0E31  CB 07       	rlc	a
2937  0E33  E6 01       	and	a,0x01
2938  0E35  4F          	ld	c, a
2939  0E36  3A 00 00    	ld	a,(_game_2buttons)
2940  0E39  B7          	or	a, a
2941  0E3A  28 06       	jr	Z,l_player_move_jump_00102
2942  0E3C  79          	ld	a, c
2943  0E3D  EE 01       	xor	a,0x01
2944  0E3F  4F          	ld	c, a
2945  0E40  18 15       	jr	l_player_move_jump_00103
2946  0E42              l_player_move_jump_00102:
2947  0E42  CB 41       	bit	0, c
2948  0E44  28 07       	jr	Z,l_player_move_jump_00154
2949  0E46  21 00 00    	ld	hl,_dirs
2950  0E49  CB 46       	bit	0, (hl)
2951  0E4B  20 04       	jr	NZ,l_player_move_jump_00155
2952  0E4D              l_player_move_jump_00154:
2953  0E4D  0E 00       	ld	c,0x00
2954  0E4F  18 02       	jr	l_player_move_jump_00156
2955  0E51              l_player_move_jump_00155:
2956  0E51  0E 01       	ld	c,0x01
2957  0E53              l_player_move_jump_00156:
2958  0E53  79          	ld	a, c
2959  0E54  EE 01       	xor	a,0x01
2960  0E56  4F          	ld	c, a
2961  0E57              l_player_move_jump_00103:
2962  0E57  79          	ld	a, c
2963  0E58  B7          	or	a, a
2964  0E59  28 1D       	jr	Z,l_player_move_jump_00109
2965  0E5B  3A 00 00    	ld	a,(_player_vel_y1)
2966  0E5E  21 00 00    	ld	hl,_player_vel_y
2967  0E61  96          	sub	a, (hl)
2968  0E62  E2 67 0E    	jp	PO, l_player_move_jump_00259
2969  0E65  EE 80       	xor	a,0x80
2970  0E67              l_player_move_jump_00259:
2971  0E67  F2 78 0E    	jp	P, l_player_move_jump_00109
2972  0E6A  21 00 00    	ld	hl,_player_vel_y
2973  0E6D  CB 7E       	bit	7,(hl)
2974  0E6F  28 07       	jr	Z,l_player_move_jump_00109
2975  0E71  36 00       	ld	(hl),0x00
2976  0E73  21 00 00    	ld	hl,_player_vel_inc
2977  0E76  36 00       	ld	(hl),0x00
2978  0E78              l_player_move_jump_00109:
2979  0E78  3E 78       	ld	a,0x78
2980  0E7A  21 00 00    	ld	hl,_player_vel_y
2981  0E7D  96          	sub	a, (hl)
2982  0E7E  E2 83 0E    	jp	PO, l_player_move_jump_00260
2983  0E81  EE 80       	xor	a,0x80
2984  0E83              l_player_move_jump_00260:
2985  0E83  F2 8B 0E    	jp	P, l_player_move_jump_00111
2986  0E86  21 00 00    	ld	hl,_player_vel_y
2987  0E89  36 78       	ld	(hl),0x78
2988  0E8B              l_player_move_jump_00111:
2989  0E8B  21 00 00    	ld	hl,_player_vel_y
2990  0E8E  7E          	ld	a, (hl)
2991  0E8F  EE 80       	xor	a,0x80
2992  0E91  D6 08       	sub	a,0x08
2993  0E93  30 02       	jr	NC,l_player_move_jump_00113
2994  0E95  36 88       	ld	(hl),0x88
2995  0E97              l_player_move_jump_00113:
2996  0E97  3A 00 00    	ld	a,(_player_vel_y)
2997  0E9A  47          	ld	b,a
2998  0E9B  17          	rla
2999  0E9C  9F          	sbc	a, a
3000  0E9D  5F          	ld	e, a
3001  0E9E  CB 40       	bit	0,b
3002  0EA0  21 00 00    	ld	hl,_s_lin1
3003  0EA3  70          	ld	(hl),b
3004  0EA4  28 04       	jr	Z,l_player_move_jump_00115
3005  0EA6  21 00 00    	ld	hl,_s_lin1
3006  0EA9  35          	dec	(hl)
3007  0EAA              l_player_move_jump_00115:
3008  0EAA  3A 07 00    	ld	a,(_lin + 0x0007)
3009  0EAD  21 00 00    	ld	hl,_s_lin1
3010  0EB0  86          	add	a, (hl)
3011  0EB1  77          	ld	(hl), a
3012  0EB2  3E 90       	ld	a,0x90
3013  0EB4  96          	sub	a, (hl)
3014  0EB5  3E 00       	ld	a,0x00
3015  0EB7  17          	rla
3016  0EB8  4F          	ld	c, a
3017  0EB9  CB 7B       	bit	7, e
3018  0EBB  28 5B       	jr	Z,l_player_move_jump_00141
3019  0EBD  21 00 00    	ld	hl,_s_state
3020  0EC0  7E          	ld	a,(hl)
3021  0EC1  F6 01       	or	a,0x01
3022  0EC3  E6 FD       	and	a,0xfd
3023  0EC5  77          	ld	(hl),a
3024  0EC6  79          	ld	a, c
3025  0EC7  B7          	or	a, a
3026  0EC8  28 11       	jr	Z,l_player_move_jump_00120
3027  0ECA  CD 00 00    	call	_spr_page_up
3028  0ECD  7D          	ld	a, l
3029  0ECE  B7          	or	a, a
3030  0ECF  28 05       	jr	Z,l_player_move_jump_00117
3031  0ED1  2E 00       	ld	l,0x00
3032  0ED3  C3 D7 0F    	jp	l_player_move_jump_00152
3033  0ED6              l_player_move_jump_00117:
3034  0ED6  21 00 00    	ld	hl,_s_lin1
3035  0ED9  36 00       	ld	(hl),0x00
3036  0EDB              l_player_move_jump_00120:
3037  0EDB  21 07 00    	ld	hl,+(_col + 0x0007)
3038  0EDE  46          	ld	b, (hl)
3039  0EDF  C5          	push	bc
3040  0EE0  33          	inc	sp
3041  0EE1  3A 00 00    	ld	a,(_s_lin1)
3042  0EE4  F5          	push	af
3043  0EE5  33          	inc	sp
3044  0EE6  CD 00 00    	call	_game_check_map
3045  0EE9  F1          	pop	af
3046  0EEA  7C          	ld	a,h
3047  0EEB  B5          	or	a,l
3048  0EEC  28 21       	jr	Z,l_player_move_jump_00124
3049  0EEE  CD 43 09    	call	_player_hit_platform
3050  0EF1  7D          	ld	a, l
3051  0EF2  B7          	or	a, a
3052  0EF3  28 12       	jr	Z,l_player_move_jump_00122
3053  0EF5  3A 07 00    	ld	a,(_lin + 0x0007)
3054  0EF8  07          	rlca
3055  0EF9  07          	rlca
3056  0EFA  07          	rlca
3057  0EFB  07          	rlca
3058  0EFC  E6 0F       	and	a,0x0f
3059  0EFE  07          	rlca
3060  0EFF  07          	rlca
3061  0F00  07          	rlca
3062  0F01  07          	rlca
3063  0F02  E6 F0       	and	a,0xf0
3064  0F04  32 07 00    	ld	((_lin + 0x0007)),a
3065  0F07              l_player_move_jump_00122:
3066  0F07  21 00 00    	ld	hl,_player_vel_y
3067  0F0A  36 00       	ld	(hl),0x00
3068  0F0C  C3 99 0F    	jp	l_player_move_jump_00142
3069  0F0F              l_player_move_jump_00124:
3070  0F0F  3A 00 00    	ld	a,(_s_lin1)
3071  0F12  32 07 00    	ld	((_lin + 0x0007)),a
3072  0F15  C3 99 0F    	jp	l_player_move_jump_00142
3073  0F18              l_player_move_jump_00141:
3074  0F18  21 00 00    	ld	hl,_s_state
3075  0F1B  7E          	ld	a,(hl)
3076  0F1C  F6 02       	or	a,0x02
3077  0F1E  E6 FE       	and	a,0xfe
3078  0F20  77          	ld	(hl),a
3079  0F21  79          	ld	a, c
3080  0F22  B7          	or	a, a
3081  0F23  28 11       	jr	Z,l_player_move_jump_00130
3082  0F25  CD 00 00    	call	_spr_page_down
3083  0F28  7D          	ld	a, l
3084  0F29  B7          	or	a, a
3085  0F2A  28 05       	jr	Z,l_player_move_jump_00127
3086  0F2C  2E 00       	ld	l,0x00
3087  0F2E  C3 D7 0F    	jp	l_player_move_jump_00152
3088  0F31              l_player_move_jump_00127:
3089  0F31  21 00 00    	ld	hl,_s_lin1
3090  0F34  36 90       	ld	(hl),0x90
3091  0F36              l_player_move_jump_00130:
3092  0F36  21 07 00    	ld	hl,+(_col + 0x0007)
3093  0F39  4E          	ld	c, (hl)
3094  0F3A  3A 00 00    	ld	a,(_s_lin1)
3095  0F3D  C6 10       	add	a,0x10
3096  0F3F  47          	ld	b, a
3097  0F40  79          	ld	a, c
3098  0F41  48          	ld	c,b
3099  0F42  47          	ld	b,a
3100  0F43  C5          	push	bc
3101  0F44  CD 00 00    	call	_game_check_map
3102  0F47  F1          	pop	af
3103  0F48  7C          	ld	a,h
3104  0F49  B5          	or	a,l
3105  0F4A  28 47       	jr	Z,l_player_move_jump_00138
3106  0F4C  2E 00       	ld	l,0x00
3107  0F4E  CD 21 06    	call	_player_check_stairs
3108  0F51  3A 00 00    	ld	a,(_player_onstair)
3109  0F54  B7          	or	a, a
3110  0F55  20 05       	jr	NZ,l_player_move_jump_00132
3111  0F57  2E 01       	ld	l,0x01
3112  0F59  CD 21 06    	call	_player_check_stairs
3113  0F5C              l_player_move_jump_00132:
3114  0F5C  3A 00 00    	ld	a,(_player_onstair)
3115  0F5F  B7          	or	a, a
3116  0F60  20 12       	jr	NZ,l_player_move_jump_00134
3117  0F62  3A 00 00    	ld	a,(_s_lin1)
3118  0F65  07          	rlca
3119  0F66  07          	rlca
3120  0F67  07          	rlca
3121  0F68  07          	rlca
3122  0F69  E6 0F       	and	a,0x0f
3123  0F6B  07          	rlca
3124  0F6C  07          	rlca
3125  0F6D  07          	rlca
3126  0F6E  07          	rlca
3127  0F6F  E6 F0       	and	a,0xf0
3128  0F71  32 07 00    	ld	((_lin + 0x0007)),a
3129  0F74              l_player_move_jump_00134:
3130  0F74  21 00 00    	ld	hl,_player_vel_y
3131  0F77  36 00       	ld	(hl),0x00
3132  0F79  21 00 00    	ld	hl,_s_state
3133  0F7C  7E          	ld	a,(hl)
3134  0F7D  E6 FC       	and	a,+(0xfd&0xfe)
3135  0F7F  77          	ld	(hl),a
3136  0F80  3A 07 00    	ld	a,(_lin + 0x0007)
3137  0F83  D6 90       	sub	a,0x90
3138  0F85  38 03       	jr	C,l_player_move_jump_00136
3139  0F87  CD 00 00    	call	_spr_page_down
3140  0F8A              l_player_move_jump_00136:
3141  0F8A  21 07 00    	ld	hl, +(_colint + 0x0007)
3142  0F8D  36 00       	ld	(hl),0x00
3143  0F8F  2E 01       	ld	l,0x01
3144  0F91  18 44       	jr	l_player_move_jump_00152
3145  0F93              l_player_move_jump_00138:
3146  0F93  3A 00 00    	ld	a,(_s_lin1)
3147  0F96  32 07 00    	ld	((_lin + 0x0007)),a
3148  0F99              l_player_move_jump_00142:
3149  0F99  21 00 00    	ld	hl,_s_state
3150  0F9C  CB 5E       	bit	3, (hl)
3151  0F9E  20 27       	jr	NZ,l_player_move_jump_00148
3152  0FA0  21 00 00    	ld	hl,_s_state
3153  0FA3  CB 56       	bit	2, (hl)
3154  0FA5  20 20       	jr	NZ,l_player_move_jump_00148
3155  0FA7  21 00 00    	ld	hl,_dirs
3156  0FAA  CB 56       	bit	2, (hl)
3157  0FAC  28 09       	jr	Z,l_player_move_jump_00144
3158  0FAE  21 00 00    	ld	hl,_s_state
3159  0FB1  7E          	ld	a,(hl)
3160  0FB2  F6 08       	or	a,0x08
3161  0FB4  E6 FB       	and	a,0xfb
3162  0FB6  77          	ld	(hl),a
3163  0FB7              l_player_move_jump_00144:
3164  0FB7  21 00 00    	ld	hl,_dirs
3165  0FBA  CB 5E       	bit	3, (hl)
3166  0FBC  28 09       	jr	Z,l_player_move_jump_00148
3167  0FBE  21 00 00    	ld	hl,_s_state
3168  0FC1  7E          	ld	a,(hl)
3169  0FC2  F6 04       	or	a,0x04
3170  0FC4  E6 F7       	and	a,0xf7
3171  0FC6  77          	ld	(hl),a
3172  0FC7              l_player_move_jump_00148:
3173  0FC7  CD 00 00    	call	_spr_move_horizontal
3174  0FCA  7D          	ld	a, l
3175  0FCB  B7          	or	a, a
3176  0FCC  28 07       	jr	Z,l_player_move_jump_00151
3177  0FCE  21 00 00    	ld	hl,_s_state
3178  0FD1  7E          	ld	a,(hl)
3179  0FD2  E6 F3       	and	a,+(0xf7&0xfb)
3180  0FD4  77          	ld	(hl),a
3181  0FD5              l_player_move_jump_00151:
3182  0FD5  2E 00       	ld	l,0x00
3183  0FD7              l_player_move_jump_00152:
3184  0FD7  C9          	ret
3185  0FD8              	SECTION code_compiler
3186  0FD8              ;	---------------------------------
3187  0FD8              ; Function player_open_door
3188  0FD8              ; ---------------------------------
3189  0FD8              _player_open_door:
3190  0FD8  CD 00 00    	call	___sdcc_enter_ix
3191  0FDB  0E 00       	ld	c,0x00
3192  0FDD  21 00 00    	ld	hl,_ay_effect_05
3193  0FE0  CD 00 00    	call	_ay_fx_play
3194  0FE3  DD 7E 06    	ld	a,(ix+6)
3195  0FE6  D6 48       	sub	a,0x48
3196  0FE8  28 17       	jr	Z,l_player_open_door_00101
3197  0FEA  DD 7E 06    	ld	a,(ix+6)
3198  0FED  D6 49       	sub	a,0x49
3199  0FEF  28 1F       	jr	Z,l_player_open_door_00104
3200  0FF1  DD 7E 06    	ld	a,(ix+6)
3201  0FF4  D6 4A       	sub	a,0x4a
3202  0FF6  28 27       	jr	Z,l_player_open_door_00107
3203  0FF8  DD 7E 06    	ld	a,(ix+6)
3204  0FFB  D6 4B       	sub	a,0x4b
3205  0FFD  28 2F       	jr	Z,l_player_open_door_00110
3206  0FFF  18 3A       	jr	l_player_open_door_00113
3207  1001              l_player_open_door_00101:
3208  1001  3A 00 00    	ld	a,(_player_keys)
3209  1004  B7          	or	a, a
3210  1005  28 34       	jr	Z,l_player_open_door_00113
3211  1007  2E 07       	ld	l,0x07
3212  1009  CD 00 00    	call	_zx_border_fastcall
3213  100C  0E 01       	ld	c,0x01
3214  100E  18 2B       	jr	l_player_open_door_00113
3215  1010              l_player_open_door_00104:
3216  1010  3A 01 00    	ld	a,(_player_keys + 0x0001)
3217  1013  B7          	or	a, a
3218  1014  28 25       	jr	Z,l_player_open_door_00113
3219  1016  2E 02       	ld	l,0x02
3220  1018  CD 00 00    	call	_zx_border_fastcall
3221  101B  0E 01       	ld	c,0x01
3222  101D  18 1C       	jr	l_player_open_door_00113
3223  101F              l_player_open_door_00107:
3224  101F  3A 02 00    	ld	a,(_player_keys + 0x0002)
3225  1022  B7          	or	a, a
3226  1023  28 16       	jr	Z,l_player_open_door_00113
3227  1025  2E 04       	ld	l,0x04
3228  1027  CD 00 00    	call	_zx_border_fastcall
3229  102A  0E 01       	ld	c,0x01
3230  102C  18 0D       	jr	l_player_open_door_00113
3231  102E              l_player_open_door_00110:
3232  102E  3A 03 00    	ld	a,(_player_keys + 0x0003)
3233  1031  B7          	or	a, a
3234  1032  28 07       	jr	Z,l_player_open_door_00113
3235  1034  2E 05       	ld	l,0x05
3236  1036  CD 00 00    	call	_zx_border_fastcall
3237  1039  0E 01       	ld	c,0x01
3238  103B              l_player_open_door_00113:
3239  103B  79          	ld	a, c
3240  103C  B7          	or	a, a
3241  103D  20 06       	jr	NZ,l_player_open_door_00114
3242  103F  3A 00 00    	ld	a,(_game_inmune)
3243  1042  B7          	or	a, a
3244  1043  28 2F       	jr	Z,l_player_open_door_00117
3245  1045              l_player_open_door_00114:
3246  1045  3E 00       	ld	a, +((_scr_map) & 0xFF)
3247  1047  DD 86 04    	add	a,(ix+4)
3248  104A  4F          	ld	c, a
3249  104B  3E 00       	ld	a, +((_scr_map) / 256)
3250  104D  DD 8E 05    	adc	a,(ix+5)
3251  1050  47          	ld	b, a
3252  1051  C5          	push	bc
3253  1052  DD 6E 04    	ld	l,(ix+4)
3254  1055  DD 66 05    	ld	h,(ix+5)
3255  1058  E5          	push	hl
3256  1059  CD 00 00    	call	_game_match_back
3257  105C  F1          	pop	af
3258  105D  C1          	pop	bc
3259  105E  7D          	ld	a,l
3260  105F  02          	ld	(bc), a
3261  1060  DD 6E 04    	ld	l,(ix+4)
3262  1063  DD 66 05    	ld	h,(ix+5)
3263  1066  CD 00 00    	call	_game_obj_set
3264  1069  DD 6E 04    	ld	l,(ix+4)
3265  106C  DD 66 05    	ld	h,(ix+5)
3266  106F  E5          	push	hl
3267  1070  CD 00 00    	call	_spr_draw_index
3268  1073  F1          	pop	af
3269  1074              l_player_open_door_00117:
3270  1074  DD E1       	pop	ix
3271  1076  C9          	ret
3272  1077              	SECTION code_compiler
3273  1077              ;	---------------------------------
3274  1077              ; Function player_lost_life
3275  1077              ; ---------------------------------
3276  1077              _player_lost_life:
3277  1077  CD 00 00    	call	___sdcc_enter_ix
3278  107A  F5          	push	af
3279  107B  21 00 00    	ld	hl,_ay_effect_18
3280  107E  CD 00 00    	call	_ay_fx_play
3281  1081  21 00 00    	ld	hl,_player_vita
3282  1084  36 00       	ld	(hl),0x00
3283  1086  CD 00 00    	call	_game_update_stats
3284  1089  3A 07 00    	ld	a,(_lin + 7)
3285  108C  32 00 00    	ld	(_s_lin0),a
3286  108F  3A 07 00    	ld	a,(_col + 7)
3287  1092  32 00 00    	ld	(_s_col0),a
3288  1095  CD 00 00    	call	_spr_init_effects
3289  1098  06 00       	ld	b,0x00
3290  109A              l_player_lost_life_00116:
3291  109A  C5          	push	bc
3292  109B  21 00 00    	ld	hl,0x0000
3293  109E  E5          	push	hl
3294  109F  AF          	xor	a, a
3295  10A0  48          	ld	c,b
3296  10A1  47          	ld	b,a
3297  10A2  C5          	push	bc
3298  10A3  CD 00 00    	call	_NIRVANAP_spriteT_callee
3299  10A6  C1          	pop	bc
3300  10A7  04          	inc	b
3301  10A8  3E 07       	ld	a,0x07
3302  10AA  90          	sub	a, b
3303  10AB  30 ED       	jr	NC,l_player_lost_life_00116
3304  10AD  76          	halt
3305  10AE  3A 00 00    	ld	a,(_s_lin0)
3306  10B1  C6 F0       	add	a,0xf0
3307  10B3  47          	ld	b, a
3308  10B4  3A 00 00    	ld	a,(_s_col0)
3309  10B7  21 00 00    	ld	hl,0x0000
3310  10BA  E5          	push	hl
3311  10BB  21 87 03    	ld	hl,0x0387
3312  10BE  E5          	push	hl
3313  10BF  48          	ld	c,b
3314  10C0  47          	ld	b,a
3315  10C1  C5          	push	bc
3316  10C2  CD 00 00    	call	_spr_add_anim
3317  10C5  F1          	pop	af
3318  10C6  F1          	pop	af
3319  10C7  F1          	pop	af
3320  10C8  21 00 00    	ld	hl,_s_col0
3321  10CB  46          	ld	b, (hl)
3322  10CC  05          	dec	b
3323  10CD  05          	dec	b
3324  10CE  21 00 00    	ld	hl,0x0000
3325  10D1  E5          	push	hl
3326  10D2  21 87 03    	ld	hl,0x0387
3327  10D5  E5          	push	hl
3328  10D6  C5          	push	bc
3329  10D7  33          	inc	sp
3330  10D8  3A 00 00    	ld	a,(_s_lin0)
3331  10DB  F5          	push	af
3332  10DC  33          	inc	sp
3333  10DD  CD 00 00    	call	_spr_add_anim
3334  10E0  F1          	pop	af
3335  10E1  F1          	pop	af
3336  10E2  21 00 00    	ld	hl,0x0000
3337  10E5  E3          	ex	(sp),hl
3338  10E6  3A 00 00    	ld	a,(_s_col0)
3339  10E9  21 87 03    	ld	hl,0x0387
3340  10EC  E5          	push	hl
3341  10ED  F5          	push	af
3342  10EE  33          	inc	sp
3343  10EF  3A 00 00    	ld	a,(_s_lin0)
3344  10F2  F5          	push	af
3345  10F3  33          	inc	sp
3346  10F4  CD 00 00    	call	_spr_add_anim
3347  10F7  F1          	pop	af
3348  10F8  F1          	pop	af
3349  10F9  F1          	pop	af
3350  10FA  21 00 00    	ld	hl,_s_col0
3351  10FD  46          	ld	b, (hl)
3352  10FE  04          	inc	b
3353  10FF  04          	inc	b
3354  1100  21 00 00    	ld	hl,0x0000
3355  1103  E5          	push	hl
3356  1104  21 87 03    	ld	hl,0x0387
3357  1107  E5          	push	hl
3358  1108  C5          	push	bc
3359  1109  33          	inc	sp
3360  110A  3A 00 00    	ld	a,(_s_lin0)
3361  110D  F5          	push	af
3362  110E  33          	inc	sp
3363  110F  CD 00 00    	call	_spr_add_anim
3364  1112  F1          	pop	af
3365  1113  F1          	pop	af
3366  1114  F1          	pop	af
3367  1115  3A 00 00    	ld	a,(_s_lin0)
3368  1118  C6 10       	add	a,0x10
3369  111A  47          	ld	b, a
3370  111B  3A 00 00    	ld	a,(_s_col0)
3371  111E  21 00 00    	ld	hl,0x0000
3372  1121  E5          	push	hl
3373  1122  21 87 03    	ld	hl,0x0387
3374  1125  E5          	push	hl
3375  1126  48          	ld	c,b
3376  1127  47          	ld	b,a
3377  1128  C5          	push	bc
3378  1129  CD 00 00    	call	_spr_add_anim
3379  112C  F1          	pop	af
3380  112D  F1          	pop	af
3381  112E  F1          	pop	af
3382  112F  2E 00       	ld	l,0x00
3383  1131  CD 00 00    	call	_zx_border_fastcall
3384  1134  DD 36 FE 01 	ld	(ix-2),0x01
3385  1138  2A 00 00    	ld	hl,(_curr_time)
3386  113B  22 00 00    	ld	(_anim_time),hl
3387  113E              l_player_lost_life_00107:
3388  113E  DD 7E FE    	ld	a,(ix-2)
3389  1141  B7          	or	a, a
3390  1142  28 28       	jr	Z,l_player_lost_life_00129
3391  1144  21 0C 00    	ld	hl,0x000c
3392  1147  E5          	push	hl
3393  1148  2A 00 00    	ld	hl,(_anim_time)
3394  114B  E5          	push	hl
3395  114C  CD 00 00    	call	_game_check_time
3396  114F  F1          	pop	af
3397  1150  F1          	pop	af
3398  1151  7D          	ld	a, l
3399  1152  B7          	or	a, a
3400  1153  28 E9       	jr	Z,l_player_lost_life_00107
3401  1155  2A 00 00    	ld	hl,(_curr_time)
3402  1158  22 00 00    	ld	(_anim_time),hl
3403  115B  3A 00 00    	ld	a,(_anim_count)
3404  115E  B7          	or	a,a
3405  115F  28 05       	jr	Z,l_player_lost_life_00103
3406  1161  CD 00 00    	call	_spr_play_anim
3407  1164  18 D8       	jr	l_player_lost_life_00107
3408  1166              l_player_lost_life_00103:
3409  1166  DD 36 FE 00 	ld	(ix-2),0x00
3410  116A  18 D2       	jr	l_player_lost_life_00107
3411  116C              l_player_lost_life_00129:
3412  116C  1E 00       	ld	e,0x00
3413  116E              l_player_lost_life_00118:
3414  116E  16 00       	ld	d,0x00
3415  1170  21 00 00    	ld	hl,_class
3416  1173  19          	add	hl, de
3417  1174  7E          	ld	a, (hl)
3418  1175  B7          	or	a, a
3419  1176  28 30       	jr	Z,l_player_lost_life_00119
3420  1178  16 00       	ld	d,0x00
3421  117A  21 00 00    	ld	hl,_col
3422  117D  19          	add	hl, de
3423  117E  7E          	ld	a, (hl)
3424  117F  DD 77 FF    	ld	(ix-1),a
3425  1182  16 00       	ld	d,0x00
3426  1184  21 00 00    	ld	hl,_lin
3427  1187  19          	add	hl, de
3428  1188  46          	ld	b, (hl)
3429  1189  16 00       	ld	d,0x00
3430  118B  21 00 00    	ld	hl,_tile
3431  118E  19          	add	hl, de
3432  118F  4E          	ld	c, (hl)
3433  1190  16 00       	ld	d,0x00
3434  1192  21 00 00    	ld	hl,_colint
3435  1195  19          	add	hl, de
3436  1196  6E          	ld	l, (hl)
3437  1197  79          	ld	a, c
3438  1198  85          	add	a, l
3439  1199  4F          	ld	c, a
3440  119A  D5          	push	de
3441  119B  DD 7E FF    	ld	a,(ix-1)
3442  119E  F5          	push	af
3443  119F  33          	inc	sp
3444  11A0  C5          	push	bc
3445  11A1  33          	inc	sp
3446  11A2  51          	ld	d,c
3447  11A3  D5          	push	de
3448  11A4  CD 00 00    	call	_NIRVANAP_spriteT_callee
3449  11A7  D1          	pop	de
3450  11A8              l_player_lost_life_00119:
3451  11A8  1C          	inc	e
3452  11A9  7B          	ld	a, e
3453  11AA  D6 07       	sub	a,0x07
3454  11AC  38 C0       	jr	C,l_player_lost_life_00118
3455  11AE  21 00 00    	ld	hl,_player_lives
3456  11B1  35          	dec	(hl)
3457  11B2  21 00 00    	ld	hl,_player_mana
3458  11B5  36 64       	ld	(hl),0x64
3459  11B7  21 00 00    	ld	hl,_player_vita
3460  11BA  36 64       	ld	(hl),0x64
3461  11BC  3A 00 00    	ld	a,(_player_lives)
3462  11BF  B7          	or	a, a
3463  11C0  28 0B       	jr	Z,l_player_lost_life_00114
3464  11C2  21 F4 01    	ld	hl,0x01f4
3465  11C5  CD 00 00    	call	_z80_delay_ms_fastcall
3466  11C8  CD 00 00    	call	_game_round_init
3467  11CB  18 0A       	jr	l_player_lost_life_00120
3468  11CD              l_player_lost_life_00114:
3469  11CD  21 00 00    	ld	hl,_player_lives
3470  11D0  36 00       	ld	(hl),0x00
3471  11D2  21 00 00    	ld	hl,_game_over
3472  11D5  36 01       	ld	(hl),0x01
3473  11D7              l_player_lost_life_00120:
3474  11D7  F1          	pop	af
3475  11D8  DD E1       	pop	ix
3476  11DA  C9          	ret
3477  11DB              	SECTION code_compiler
3478  11DB              ;	---------------------------------
3479  11DB              ; Function player_hit
3480  11DB              ; ---------------------------------
3481  11DB              _player_hit:
3482  11DB  7D          	ld	a,l
3483  11DC  4D          	ld	c,l
3484  11DD  21 00 00    	ld	hl,_player_vita
3485  11E0  96          	sub	a, (hl)
3486  11E1  30 17       	jr	NC,l_player_hit_00104
3487  11E3  3A 00 00    	ld	a,(_game_inmune)
3488  11E6  B7          	or	a, a
3489  11E7  20 06       	jr	NZ,l_player_hit_00102
3490  11E9  21 00 00    	ld	hl,_player_vita
3491  11EC  7E          	ld	a, (hl)
3492  11ED  91          	sub	a, c
3493  11EE  77          	ld	(hl), a
3494  11EF              l_player_hit_00102:
3495  11EF  2A 00 00    	ld	hl,(_curr_time)
3496  11F2  22 00 00    	ld	(_player_hit_time),hl
3497  11F5  CD 00 00    	call	_game_update_stats
3498  11F8  18 03       	jr	l_player_hit_00106
3499  11FA              l_player_hit_00104:
3500  11FA  CD 77 10    	call	_player_lost_life
3501  11FD              l_player_hit_00106:
3502  11FD  C9          	ret
3503  11FE              	SECTION IGNORE
3504  0000              
