1     0000              MODULE game_player_c
2     0000              LINE -1, "game_player.c"
-1    0000              
0     0000              
1     0000              ;--------------------------------------------------------
2     0000              ; File Created by SDCC : free open source ANSI-C Compiler
3     0000              ; Version 3.6.5 #9958 (Mac OS X i386)
4     0000              ;--------------------------------------------------------
5     0000              ; Processed by Z88DK
6     0000              ;--------------------------------------------------------
7     0000              
8     0000              	EXTERN __divschar
9     0000              	EXTERN __divschar_callee
10    0000              	EXTERN __divsint
11    0000              	EXTERN __divsint_callee
12    0000              	EXTERN __divslong
13    0000              	EXTERN __divslong_callee
14    0000              	EXTERN __divslonglong
15    0000              	EXTERN __divslonglong_callee
16    0000              	EXTERN __divsuchar
17    0000              	EXTERN __divsuchar_callee
18    0000              	EXTERN __divuchar
19    0000              	EXTERN __divuchar_callee
20    0000              	EXTERN __divuint
21    0000              	EXTERN __divuint_callee
22    0000              	EXTERN __divulong
23    0000              	EXTERN __divulong_callee
24    0000              	EXTERN __divulonglong
25    0000              	EXTERN __divulonglong_callee
26    0000              	EXTERN __divuschar
27    0000              	EXTERN __divuschar_callee
28    0000              	EXTERN __modschar
29    0000              	EXTERN __modschar_callee
30    0000              	EXTERN __modsint
31    0000              	EXTERN __modsint_callee
32    0000              	EXTERN __modslong
33    0000              	EXTERN __modslong_callee
34    0000              	EXTERN __modslonglong
35    0000              	EXTERN __modslonglong_callee
36    0000              	EXTERN __modsuchar
37    0000              	EXTERN __modsuchar_callee
38    0000              	EXTERN __moduchar
39    0000              	EXTERN __moduchar_callee
40    0000              	EXTERN __moduint
41    0000              	EXTERN __moduint_callee
42    0000              	EXTERN __modulong
43    0000              	EXTERN __modulong_callee
44    0000              	EXTERN __modulonglong
45    0000              	EXTERN __modulonglong_callee
46    0000              	EXTERN __moduschar
47    0000              	EXTERN __moduschar_callee
48    0000              	EXTERN __mulint
49    0000              	EXTERN __mulint_callee
50    0000              	EXTERN __mullong
51    0000              	EXTERN __mullong_callee
52    0000              	EXTERN __mullonglong
53    0000              	EXTERN __mullonglong_callee
54    0000              	EXTERN __mulschar
55    0000              	EXTERN __mulschar_callee
56    0000              	EXTERN __mulsuchar
57    0000              	EXTERN __mulsuchar_callee
58    0000              	EXTERN __muluschar
59    0000              	EXTERN __muluschar_callee
60    0000              	EXTERN __rlslonglong
61    0000              	EXTERN __rlslonglong_callee
62    0000              	EXTERN __rlulonglong
63    0000              	EXTERN __rlulonglong_callee
64    0000              	EXTERN __rrslonglong
65    0000              	EXTERN __rrslonglong_callee
66    0000              	EXTERN __rrulonglong
67    0000              	EXTERN __rrulonglong_callee
68    0000              	EXTERN ___sdcc_call_hl
69    0000              	EXTERN ___sdcc_call_iy
70    0000              	EXTERN ___sdcc_enter_ix
71    0000              	EXTERN _banked_call
72    0000              	EXTERN _banked_ret
73    0000              	EXTERN ___fs2schar
74    0000              	EXTERN ___fs2schar_callee
75    0000              	EXTERN ___fs2sint
76    0000              	EXTERN ___fs2sint_callee
77    0000              	EXTERN ___fs2slong
78    0000              	EXTERN ___fs2slong_callee
79    0000              	EXTERN ___fs2slonglong
80    0000              	EXTERN ___fs2slonglong_callee
81    0000              	EXTERN ___fs2uchar
82    0000              	EXTERN ___fs2uchar_callee
83    0000              	EXTERN ___fs2uint
84    0000              	EXTERN ___fs2uint_callee
85    0000              	EXTERN ___fs2ulong
86    0000              	EXTERN ___fs2ulong_callee
87    0000              	EXTERN ___fs2ulonglong
88    0000              	EXTERN ___fs2ulonglong_callee
89    0000              	EXTERN ___fsadd
90    0000              	EXTERN ___fsadd_callee
91    0000              	EXTERN ___fsdiv
92    0000              	EXTERN ___fsdiv_callee
93    0000              	EXTERN ___fseq
94    0000              	EXTERN ___fseq_callee
95    0000              	EXTERN ___fsgt
96    0000              	EXTERN ___fsgt_callee
97    0000              	EXTERN ___fslt
98    0000              	EXTERN ___fslt_callee
99    0000              	EXTERN ___fsmul
100   0000              	EXTERN ___fsmul_callee
101   0000              	EXTERN ___fsneq
102   0000              	EXTERN ___fsneq_callee
103   0000              	EXTERN ___fssub
104   0000              	EXTERN ___fssub_callee
105   0000              	EXTERN ___schar2fs
106   0000              	EXTERN ___schar2fs_callee
107   0000              	EXTERN ___sint2fs
108   0000              	EXTERN ___sint2fs_callee
109   0000              	EXTERN ___slong2fs
110   0000              	EXTERN ___slong2fs_callee
111   0000              	EXTERN ___slonglong2fs
112   0000              	EXTERN ___slonglong2fs_callee
113   0000              	EXTERN ___uchar2fs
114   0000              	EXTERN ___uchar2fs_callee
115   0000              	EXTERN ___uint2fs
116   0000              	EXTERN ___uint2fs_callee
117   0000              	EXTERN ___ulong2fs
118   0000              	EXTERN ___ulong2fs_callee
119   0000              	EXTERN ___ulonglong2fs
120   0000              	EXTERN ___ulonglong2fs_callee
121   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
122   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
123   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
126   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
127   0000              	EXTERN ____sdcc_4_ldi_save_bc
128   0000              	EXTERN ____sdcc_4_push_hlix
129   0000              	EXTERN ____sdcc_4_push_mhl
130   0000              	EXTERN ____sdcc_lib_setmem_hl
131   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
132   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
133   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
134   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
135   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
136   0000              	EXTERN ____sdcc_ll_add_deix_hlix
137   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
138   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
139   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
140   0000              	EXTERN ____sdcc_ll_asr_hlix_a
141   0000              	EXTERN ____sdcc_ll_asr_mbc_a
142   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
143   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
144   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
145   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
146   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
147   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
148   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
149   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
150   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
151   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
152   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
153   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
155   0000              	EXTERN ____sdcc_ll_push_hlix
156   0000              	EXTERN ____sdcc_ll_push_mhl
157   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
158   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
159   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
160   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
161   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
162   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
163   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
164   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
165   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
166   0000              	EXTERN ____sdcc_load_debc_deix
167   0000              	EXTERN ____sdcc_load_dehl_deix
168   0000              	EXTERN ____sdcc_load_debc_mhl
169   0000              	EXTERN ____sdcc_load_hlde_mhl
170   0000              	EXTERN ____sdcc_store_dehl_bcix
171   0000              	EXTERN ____sdcc_store_debc_hlix
172   0000              	EXTERN ____sdcc_store_debc_mhl
173   0000              	EXTERN ____sdcc_cpu_pop_ei
174   0000              	EXTERN ____sdcc_cpu_pop_ei_jp
175   0000              	EXTERN ____sdcc_cpu_push_di
176   0000              	EXTERN ____sdcc_outi
177   0000              	EXTERN ____sdcc_outi_128
178   0000              	EXTERN ____sdcc_outi_256
179   0000              	EXTERN ____sdcc_ldi
180   0000              	EXTERN ____sdcc_ldi_128
181   0000              	EXTERN ____sdcc_ldi_256
182   0000              	EXTERN ____sdcc_4_copy_srcd_hlix_dst_deix
183   0000              	EXTERN ____sdcc_4_and_src_mbc_mhl_dst_deix
184   0000              	EXTERN ____sdcc_4_or_src_mbc_mhl_dst_deix
185   0000              	EXTERN ____sdcc_4_xor_src_mbc_mhl_dst_deix
186   0000              	EXTERN ____sdcc_4_or_src_dehl_dst_bcix
187   0000              	EXTERN ____sdcc_4_xor_src_dehl_dst_bcix
188   0000              	EXTERN ____sdcc_4_and_src_dehl_dst_bcix
189   0000              	EXTERN ____sdcc_4_xor_src_mbc_mhl_dst_debc
190   0000              	EXTERN ____sdcc_4_or_src_mbc_mhl_dst_debc
191   0000              	EXTERN ____sdcc_4_and_src_mbc_mhl_dst_debc
192   0000              	EXTERN ____sdcc_4_cpl_src_mhl_dst_debc
193   0000              	EXTERN ____sdcc_4_xor_src_debc_mhl_dst_debc
194   0000              	EXTERN ____sdcc_4_or_src_debc_mhl_dst_debc
195   0000              	EXTERN ____sdcc_4_and_src_debc_mhl_dst_debc
196   0000              	EXTERN ____sdcc_4_and_src_debc_hlix_dst_debc
197   0000              	EXTERN ____sdcc_4_or_src_debc_hlix_dst_debc
198   0000              	EXTERN ____sdcc_4_xor_src_debc_hlix_dst_debc
199   0000              
200   0000              ;--------------------------------------------------------
201   0000              ; Public variables in this module
202   0000              ;--------------------------------------------------------
203   0000              	GLOBAL _player_check_map
204   0000              	GLOBAL _player_1up
205   0000              	GLOBAL _player_init
206   0000              	GLOBAL _player_turn
207   0000              	GLOBAL _player_move
208   0000              	GLOBAL _player_check_input
209   0000              	GLOBAL _player_action_fire
210   0000              	GLOBAL _player_action_jump
211   0000              	GLOBAL _player_move_input
212   0000              	GLOBAL _player_fix_walk_lin
213   0000              	GLOBAL _player_fire
214   0000              	GLOBAL _player_collision
215   0000              	GLOBAL _player_pick_mushroom
216   0000              	GLOBAL _player_check_stairs_vertical
217   0000              	GLOBAL _player_check_stairs
218   0000              	GLOBAL _player_anim_stairs
219   0000              	GLOBAL _player_tile
220   0000              	GLOBAL _player_pick_item
221   0000              	GLOBAL _player_hit_platform
222   0000              	GLOBAL _player_hit_platform_clear
223   0000              	GLOBAL _player_score_add
224   0000              	GLOBAL _player_check_floor
225   0000              	GLOBAL _player_gasta_brick
226   0000              	GLOBAL _player_move_jump
227   0000              	GLOBAL _player_open_door
228   0000              	GLOBAL _player_lost_life
229   0000              	GLOBAL _player_damage
230   0000              ;--------------------------------------------------------
231   0000              ; Externals used
232   0000              ;--------------------------------------------------------
233   0000              	GLOBAL _ulltoa_callee
234   0000              	GLOBAL _ulltoa
235   0000              	GLOBAL _strtoull_callee
236   0000              	GLOBAL _strtoull
237   0000              	GLOBAL _strtoll_callee
238   0000              	GLOBAL _strtoll
239   0000              	GLOBAL _lltoa_callee
240   0000              	GLOBAL _lltoa
241   0000              	GLOBAL _llabs_callee
242   0000              	GLOBAL _llabs
243   0000              	GLOBAL __lldivu__callee
244   0000              	GLOBAL __lldivu_
245   0000              	GLOBAL __lldiv__callee
246   0000              	GLOBAL __lldiv_
247   0000              	GLOBAL _atoll_callee
248   0000              	GLOBAL _atoll
249   0000              	GLOBAL _realloc_unlocked_callee
250   0000              	GLOBAL _realloc_unlocked
251   0000              	GLOBAL _malloc_unlocked_fastcall
252   0000              	GLOBAL _malloc_unlocked
253   0000              	GLOBAL _free_unlocked_fastcall
254   0000              	GLOBAL _free_unlocked
255   0000              	GLOBAL _calloc_unlocked_callee
256   0000              	GLOBAL _calloc_unlocked
257   0000              	GLOBAL _aligned_alloc_unlocked_callee
258   0000              	GLOBAL _aligned_alloc_unlocked
259   0000              	GLOBAL _realloc_callee
260   0000              	GLOBAL _realloc
261   0000              	GLOBAL _malloc_fastcall
262   0000              	GLOBAL _malloc
263   0000              	GLOBAL _free_fastcall
264   0000              	GLOBAL _free
265   0000              	GLOBAL _calloc_callee
266   0000              	GLOBAL _calloc
267   0000              	GLOBAL _aligned_alloc_callee
268   0000              	GLOBAL _aligned_alloc
269   0000              	GLOBAL _utoa_callee
270   0000              	GLOBAL _utoa
271   0000              	GLOBAL _ultoa_callee
272   0000              	GLOBAL _ultoa
273   0000              	GLOBAL _system_fastcall
274   0000              	GLOBAL _system
275   0000              	GLOBAL _strtoul_callee
276   0000              	GLOBAL _strtoul
277   0000              	GLOBAL _strtol_callee
278   0000              	GLOBAL _strtol
279   0000              	GLOBAL _strtof_callee
280   0000              	GLOBAL _strtof
281   0000              	GLOBAL _strtod_callee
282   0000              	GLOBAL _strtod
283   0000              	GLOBAL _srand_fastcall
284   0000              	GLOBAL _srand
285   0000              	GLOBAL _rand
286   0000              	GLOBAL _quick_exit_fastcall
287   0000              	GLOBAL _quick_exit
288   0000              	GLOBAL _qsort_callee
289   0000              	GLOBAL _qsort
290   0000              	GLOBAL _ltoa_callee
291   0000              	GLOBAL _ltoa
292   0000              	GLOBAL _labs_fastcall
293   0000              	GLOBAL _labs
294   0000              	GLOBAL _itoa_callee
295   0000              	GLOBAL _itoa
296   0000              	GLOBAL _ftoh_callee
297   0000              	GLOBAL _ftoh
298   0000              	GLOBAL _ftog_callee
299   0000              	GLOBAL _ftog
300   0000              	GLOBAL _ftoe_callee
301   0000              	GLOBAL _ftoe
302   0000              	GLOBAL _ftoa_callee
303   0000              	GLOBAL _ftoa
304   0000              	GLOBAL _exit_fastcall
305   0000              	GLOBAL _exit
306   0000              	GLOBAL _dtoh_callee
307   0000              	GLOBAL _dtoh
308   0000              	GLOBAL _dtog_callee
309   0000              	GLOBAL _dtog
310   0000              	GLOBAL _dtoe_callee
311   0000              	GLOBAL _dtoe
312   0000              	GLOBAL _dtoa_callee
313   0000              	GLOBAL _dtoa
314   0000              	GLOBAL _bsearch_callee
315   0000              	GLOBAL _bsearch
316   0000              	GLOBAL _atol_fastcall
317   0000              	GLOBAL _atol
318   0000              	GLOBAL _atoi_fastcall
319   0000              	GLOBAL _atoi
320   0000              	GLOBAL _atof_fastcall
321   0000              	GLOBAL _atof
322   0000              	GLOBAL _atexit_fastcall
323   0000              	GLOBAL _atexit
324   0000              	GLOBAL _at_quick_exit_fastcall
325   0000              	GLOBAL _at_quick_exit
326   0000              	GLOBAL _abs_fastcall
327   0000              	GLOBAL _abs
328   0000              	GLOBAL _abort
329   0000              	GLOBAL __strtou__callee
330   0000              	GLOBAL __strtou_
331   0000              	GLOBAL __strtoi__callee
332   0000              	GLOBAL __strtoi_
333   0000              	GLOBAL __random_uniform_xor_8__fastcall
334   0000              	GLOBAL __random_uniform_xor_8_
335   0000              	GLOBAL __random_uniform_xor_32__fastcall
336   0000              	GLOBAL __random_uniform_xor_32_
337   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
338   0000              	GLOBAL __random_uniform_cmwc_8_
339   0000              	GLOBAL __shellsort__callee
340   0000              	GLOBAL __shellsort_
341   0000              	GLOBAL __quicksort__callee
342   0000              	GLOBAL __quicksort_
343   0000              	GLOBAL __insertion_sort__callee
344   0000              	GLOBAL __insertion_sort_
345   0000              	GLOBAL __ldivu__callee
346   0000              	GLOBAL __ldivu_
347   0000              	GLOBAL __ldiv__callee
348   0000              	GLOBAL __ldiv_
349   0000              	GLOBAL __divu__callee
350   0000              	GLOBAL __divu_
351   0000              	GLOBAL __div__callee
352   0000              	GLOBAL __div_
353   0000              	GLOBAL _NIRVANAP_drawTW_raw_callee
354   0000              	GLOBAL _NIRVANAP_drawTW_raw
355   0000              	GLOBAL _NIRVANAP_drawTW_callee
356   0000              	GLOBAL _NIRVANAP_drawTW
357   0000              	GLOBAL _NIRVANAP_drawW_raw_callee
358   0000              	GLOBAL _NIRVANAP_drawW_raw
359   0000              	GLOBAL _NIRVANAP_drawW_callee
360   0000              	GLOBAL _NIRVANAP_drawW
361   0000              	GLOBAL _NIRVANAP_spriteT_callee
362   0000              	GLOBAL _NIRVANAP_spriteT
363   0000              	GLOBAL _NIRVANAP_fillC_callee
364   0000              	GLOBAL _NIRVANAP_fillC
365   0000              	GLOBAL _NIRVANAP_readC_callee
366   0000              	GLOBAL _NIRVANAP_readC
367   0000              	GLOBAL _NIRVANAP_paintC_callee
368   0000              	GLOBAL _NIRVANAP_paintC
369   0000              	GLOBAL _NIRVANAP_printC_callee
370   0000              	GLOBAL _NIRVANAP_printC
371   0000              	GLOBAL _NIRVANAP_fillT_raw_callee
372   0000              	GLOBAL _NIRVANAP_fillT_raw
373   0000              	GLOBAL _NIRVANAP_fillT_callee
374   0000              	GLOBAL _NIRVANAP_fillT
375   0000              	GLOBAL _NIRVANAP_drawT_raw_callee
376   0000              	GLOBAL _NIRVANAP_drawT_raw
377   0000              	GLOBAL _NIRVANAP_drawT_callee
378   0000              	GLOBAL _NIRVANAP_drawT
379   0000              	GLOBAL _NIRVANAP_stop
380   0000              	GLOBAL _NIRVANAP_start
381   0000              	GLOBAL _debug3
382   0000              	GLOBAL _debug2
383   0000              	GLOBAL _debug
384   0000              	GLOBAL _zx_print_str
385   0000              	GLOBAL _zx_print_int
386   0000              	GLOBAL _zx_print_chr
387   0000              	GLOBAL _zx_print_bonus_time
388   0000              	GLOBAL _zx_isr
389   0000              	GLOBAL _z80_otdr_callee
390   0000              	GLOBAL _z80_otdr
391   0000              	GLOBAL _z80_otir_callee
392   0000              	GLOBAL _z80_otir
393   0000              	GLOBAL _z80_outp_callee
394   0000              	GLOBAL _z80_outp
395   0000              	GLOBAL _z80_indr_callee
396   0000              	GLOBAL _z80_indr
397   0000              	GLOBAL _z80_inir_callee
398   0000              	GLOBAL _z80_inir
399   0000              	GLOBAL _z80_inp_fastcall
400   0000              	GLOBAL _z80_inp
401   0000              	GLOBAL _z80_set_int_state_fastcall
402   0000              	GLOBAL _z80_set_int_state
403   0000              	GLOBAL _z80_get_int_state
404   0000              	GLOBAL _z80_delay_tstate_fastcall
405   0000              	GLOBAL _z80_delay_tstate
406   0000              	GLOBAL _z80_delay_ms_fastcall
407   0000              	GLOBAL _z80_delay_ms
408   0000              	GLOBAL _im2_remove_generic_callback_callee
409   0000              	GLOBAL _im2_remove_generic_callback
410   0000              	GLOBAL _im2_prepend_generic_callback_callee
411   0000              	GLOBAL _im2_prepend_generic_callback
412   0000              	GLOBAL _im2_append_generic_callback_callee
413   0000              	GLOBAL _im2_append_generic_callback
414   0000              	GLOBAL _im2_create_generic_isr_8080_callee
415   0000              	GLOBAL _im2_create_generic_isr_8080
416   0000              	GLOBAL _im2_create_generic_isr_callee
417   0000              	GLOBAL _im2_create_generic_isr
418   0000              	GLOBAL _im2_install_isr_callee
419   0000              	GLOBAL _im2_install_isr
420   0000              	GLOBAL _im2_init_fastcall
421   0000              	GLOBAL _im2_init
422   0000              	GLOBAL _intrinsic_swap_word_32_fastcall
423   0000              	GLOBAL _intrinsic_swap_word_32
424   0000              	GLOBAL _intrinsic_swap_endian_32_fastcall
425   0000              	GLOBAL _intrinsic_swap_endian_32
426   0000              	GLOBAL _intrinsic_swap_endian_16_fastcall
427   0000              	GLOBAL _intrinsic_swap_endian_16
428   0000              	GLOBAL _intrinsic_return_de
429   0000              	GLOBAL _intrinsic_return_bc
430   0000              	GLOBAL _intrinsic_exx
431   0000              	GLOBAL _intrinsic_ex_de_hl
432   0000              	GLOBAL _intrinsic_nop
433   0000              	GLOBAL _intrinsic_im_2
434   0000              	GLOBAL _intrinsic_im_1
435   0000              	GLOBAL _intrinsic_im_0
436   0000              	GLOBAL _intrinsic_retn
437   0000              	GLOBAL _intrinsic_reti
438   0000              	GLOBAL _intrinsic_halt
439   0000              	GLOBAL _intrinsic_ei
440   0000              	GLOBAL _intrinsic_di
441   0000              	GLOBAL _intrinsic_stub
442   0000              	GLOBAL _intrinsic_outi
443   0000              	GLOBAL _intrinsic_ldi
444   0000              	GLOBAL _zx_pattern_fill_callee
445   0000              	GLOBAL _zx_pattern_fill
446   0000              	GLOBAL _zx_saddrpup_fastcall
447   0000              	GLOBAL _zx_saddrpup
448   0000              	GLOBAL _zx_saddrpright_callee
449   0000              	GLOBAL _zx_saddrpright
450   0000              	GLOBAL _zx_saddrpleft_callee
451   0000              	GLOBAL _zx_saddrpleft
452   0000              	GLOBAL _zx_saddrpdown_fastcall
453   0000              	GLOBAL _zx_saddrpdown
454   0000              	GLOBAL _zx_saddrcup_fastcall
455   0000              	GLOBAL _zx_saddrcup
456   0000              	GLOBAL _zx_saddrcright_fastcall
457   0000              	GLOBAL _zx_saddrcright
458   0000              	GLOBAL _zx_saddrcleft_fastcall
459   0000              	GLOBAL _zx_saddrcleft
460   0000              	GLOBAL _zx_saddrcdown_fastcall
461   0000              	GLOBAL _zx_saddrcdown
462   0000              	GLOBAL _zx_saddr2py_fastcall
463   0000              	GLOBAL _zx_saddr2py
464   0000              	GLOBAL _zx_saddr2px_fastcall
465   0000              	GLOBAL _zx_saddr2px
466   0000              	GLOBAL _zx_saddr2cy_fastcall
467   0000              	GLOBAL _zx_saddr2cy
468   0000              	GLOBAL _zx_saddr2cx_fastcall
469   0000              	GLOBAL _zx_saddr2cx
470   0000              	GLOBAL _zx_saddr2aaddr_fastcall
471   0000              	GLOBAL _zx_saddr2aaddr
472   0000              	GLOBAL _zx_py2saddr_fastcall
473   0000              	GLOBAL _zx_py2saddr
474   0000              	GLOBAL _zx_py2aaddr_fastcall
475   0000              	GLOBAL _zx_py2aaddr
476   0000              	GLOBAL _zx_pxy2saddr_callee
477   0000              	GLOBAL _zx_pxy2saddr
478   0000              	GLOBAL _zx_pxy2aaddr_callee
479   0000              	GLOBAL _zx_pxy2aaddr
480   0000              	GLOBAL _zx_px2bitmask_fastcall
481   0000              	GLOBAL _zx_px2bitmask
482   0000              	GLOBAL _zx_cy2saddr_fastcall
483   0000              	GLOBAL _zx_cy2saddr
484   0000              	GLOBAL _zx_cy2aaddr_fastcall
485   0000              	GLOBAL _zx_cy2aaddr
486   0000              	GLOBAL _zx_cxy2saddr_callee
487   0000              	GLOBAL _zx_cxy2saddr
488   0000              	GLOBAL _zx_cxy2aaddr_callee
489   0000              	GLOBAL _zx_cxy2aaddr
490   0000              	GLOBAL _zx_bitmask2px_fastcall
491   0000              	GLOBAL _zx_bitmask2px
492   0000              	GLOBAL _zx_aaddrcup_fastcall
493   0000              	GLOBAL _zx_aaddrcup
494   0000              	GLOBAL _zx_aaddrcright_fastcall
495   0000              	GLOBAL _zx_aaddrcright
496   0000              	GLOBAL _zx_aaddrcleft_fastcall
497   0000              	GLOBAL _zx_aaddrcleft
498   0000              	GLOBAL _zx_aaddrcdown_fastcall
499   0000              	GLOBAL _zx_aaddrcdown
500   0000              	GLOBAL _zx_aaddr2saddr_fastcall
501   0000              	GLOBAL _zx_aaddr2saddr
502   0000              	GLOBAL _zx_aaddr2py_fastcall
503   0000              	GLOBAL _zx_aaddr2py
504   0000              	GLOBAL _zx_aaddr2px_fastcall
505   0000              	GLOBAL _zx_aaddr2px
506   0000              	GLOBAL _zx_aaddr2cy_fastcall
507   0000              	GLOBAL _zx_aaddr2cy
508   0000              	GLOBAL _zx_aaddr2cx_fastcall
509   0000              	GLOBAL _zx_aaddr2cx
510   0000              	GLOBAL _zx_visit_wc_pix_callee
511   0000              	GLOBAL _zx_visit_wc_pix
512   0000              	GLOBAL _zx_visit_wc_attr_callee
513   0000              	GLOBAL _zx_visit_wc_attr
514   0000              	GLOBAL _zx_scroll_wc_up_pix_callee
515   0000              	GLOBAL _zx_scroll_wc_up_pix
516   0000              	GLOBAL _zx_scroll_wc_up_attr_callee
517   0000              	GLOBAL _zx_scroll_wc_up_attr
518   0000              	GLOBAL _zx_scroll_wc_up_callee
519   0000              	GLOBAL _zx_scroll_wc_up
520   0000              	GLOBAL _zx_scroll_up_pix_callee
521   0000              	GLOBAL _zx_scroll_up_pix
522   0000              	GLOBAL _zx_scroll_up_attr_callee
523   0000              	GLOBAL _zx_scroll_up_attr
524   0000              	GLOBAL _zx_scroll_up_callee
525   0000              	GLOBAL _zx_scroll_up
526   0000              	GLOBAL _zx_cls_wc_pix_callee
527   0000              	GLOBAL _zx_cls_wc_pix
528   0000              	GLOBAL _zx_cls_wc_attr_callee
529   0000              	GLOBAL _zx_cls_wc_attr
530   0000              	GLOBAL _zx_cls_wc_callee
531   0000              	GLOBAL _zx_cls_wc
532   0000              	GLOBAL _zx_cls_pix_fastcall
533   0000              	GLOBAL _zx_cls_pix
534   0000              	GLOBAL _zx_cls_attr_fastcall
535   0000              	GLOBAL _zx_cls_attr
536   0000              	GLOBAL _zx_cls_fastcall
537   0000              	GLOBAL _zx_cls
538   0000              	GLOBAL _zx_border_fastcall
539   0000              	GLOBAL _zx_border
540   0000              	GLOBAL _zx_tape_verify_block_callee
541   0000              	GLOBAL _zx_tape_verify_block
542   0000              	GLOBAL _zx_tape_save_block_callee
543   0000              	GLOBAL _zx_tape_save_block
544   0000              	GLOBAL _zx_tape_load_block_callee
545   0000              	GLOBAL _zx_tape_load_block
546   0000              	GLOBAL _spr_destroy
547   0000              	GLOBAL _spr_colision_boss
548   0000              	GLOBAL _spr_colision_b
549   0000              	GLOBAL _spr_unflattenP1
550   0000              	GLOBAL _spr_flatten
551   0000              	GLOBAL _spr_btile_paint_back
552   0000              	GLOBAL _spr_bullet_explode
553   0000              	GLOBAL _spr_init_effects
554   0000              	GLOBAL _spr_turn_horizontal
555   0000              	GLOBAL _spr_bullets_play
556   0000              	GLOBAL _spr_play_anim
557   0000              	GLOBAL _spr_add_anim
558   0000              	GLOBAL _spr_clear_scr
559   0000              	GLOBAL _spr_page_map
560   0000              	GLOBAL _spr_page_down
561   0000              	GLOBAL _spr_page_up
562   0000              	GLOBAL _spr_page_right
563   0000              	GLOBAL _spr_page_left
564   0000              	GLOBAL _spr_tile_paint
565   0000              	GLOBAL _spr_draw_index
566   0000              	GLOBAL _spr_brick_anim
567   0000              	GLOBAL _spr_back_repaint
568   0000              	GLOBAL _spr_tile_dir
569   0000              	GLOBAL _spr_tile
570   0000              	GLOBAL _spr_paint_player
571   0000              	GLOBAL _spr_paint
572   0000              	GLOBAL _spr_move_left
573   0000              	GLOBAL _spr_move_right
574   0000              	GLOBAL _spr_move_horizontal
575   0000              	GLOBAL _spr_move_down
576   0000              	GLOBAL _spr_move_up
577   0000              	GLOBAL _spr_set_right
578   0000              	GLOBAL _spr_set_left
579   0000              	GLOBAL _spr_set_down
580   0000              	GLOBAL _spr_set_up
581   0000              	GLOBAL _spr_calc_index
582   0000              	GLOBAL _spr_chktime
583   0000              	GLOBAL _game_match_back_strict
584   0000              	GLOBAL _game_match_back
585   0000              	GLOBAL _game_attribs
586   0000              	GLOBAL _game_boss_clear
587   0000              	GLOBAL _game_boss_kill
588   0000              	GLOBAL _game_obj_clear
589   0000              	GLOBAL _game_obj_chk
590   0000              	GLOBAL _game_obj_set
591   0000              	GLOBAL _game_shoot_fire_boss
592   0000              	GLOBAL _game_shoot_fire
593   0000              	GLOBAL _game_add_enemy
594   0000              	GLOBAL _game_print_header
595   0000              	GLOBAL _game_check_time
596   0000              	GLOBAL _game_rotate_attrib_osd
597   0000              	GLOBAL _game_rotate_attrib
598   0000              	GLOBAL _game_colour_message
599   0000              	GLOBAL _game_paint_attrib
600   0000              	GLOBAL _game_print_score
601   0000              	GLOBAL _game_check_cell
602   0000              	GLOBAL _game_check_map
603   0000              	GLOBAL _game_loop
604   0000              	GLOBAL _game_round_init
605   0000              	GLOBAL _game_set_checkpoint
606   0000              	GLOBAL _game_start_timer
607   0000              	GLOBAL _game_update_stats
608   0000              	GLOBAL _game_print_footer
609   0000              	GLOBAL _game_fill_row
610   0000              	GLOBAL _game_cls
611   0000              	GLOBAL _game_fps
612   0000              	GLOBAL _game_respawn
613   0000              	GLOBAL _game_draw_screen
614   0000              	GLOBAL _boss_draw_frame
615   0000              	GLOBAL _boss_draw
616   0000              	GLOBAL _boss_turn
617   0000              	GLOBAL _enemy_avoid_dead
618   0000              	GLOBAL _enemy_avoid_fall
619   0000              	GLOBAL _enemy_kill
620   0000              	GLOBAL _enemy_respawn
621   0000              	GLOBAL _enemy_init
622   0000              	GLOBAL _enemy_move
623   0000              	GLOBAL _enemy_turn
624   0000              	GLOBAL _enemy_static
625   0000              	GLOBAL _enemy_walk
626   0000              	GLOBAL _enemy_horizontal
627   0000              	GLOBAL _enemy_vertical
628   0000              	GLOBAL _ay_reset
629   0000              	GLOBAL _ay_song_stop
630   0000              	GLOBAL _ay_song_play
631   0000              	GLOBAL _ay_fx_stop
632   0000              	GLOBAL _ay_fx_play
633   0000              	GLOBAL _ay_is_playing
634   0000              	GLOBAL _audio_levelup
635   0000              	GLOBAL _audio_checkpoint
636   0000              	GLOBAL _audio_menu
637   0000              	GLOBAL _audio_game_end
638   0000              	GLOBAL _audio_level_complete
639   0000              	GLOBAL _audio_level_start
640   0000              	GLOBAL _audio_lotr_lose_a_life
641   0000              	GLOBAL _audio_mushroom
642   0000              	GLOBAL _audio_puerta
643   0000              	GLOBAL _audio_sin_mana
644   0000              	GLOBAL _audio_magic1
645   0000              	GLOBAL _audio_coin
646   0000              	GLOBAL _audio_golpe
647   0000              	GLOBAL _audio_salto
648   0000              	GLOBAL _audio_efecto
649   0000              	GLOBAL _audio_boss_explode
650   0000              	GLOBAL _audio_disparo_fire
651   0000              	GLOBAL _audio_disparo_axe
652   0000              	GLOBAL _audio_disparo2
653   0000              	GLOBAL _audio_disparo1
654   0000              	GLOBAL _audio_respawn
655   0000              	GLOBAL _audio_explosion1
656   0000              	GLOBAL _audio_explosion
657   0000              	GLOBAL _audio_ingame
658   0000              	GLOBAL _test_func
659   0000              	GLOBAL _test_proc
660   0000              	GLOBAL _in_mouse_kempston_wheel_delta
661   0000              	GLOBAL _in_mouse_kempston_wheel
662   0000              	GLOBAL _in_mouse_kempston_callee
663   0000              	GLOBAL _in_mouse_kempston
664   0000              	GLOBAL _in_mouse_kempston_setpos_callee
665   0000              	GLOBAL _in_mouse_kempston_setpos
666   0000              	GLOBAL _in_mouse_kempston_reset
667   0000              	GLOBAL _in_mouse_kempston_init
668   0000              	GLOBAL _in_mouse_amx_wheel_delta
669   0000              	GLOBAL _in_mouse_amx_wheel
670   0000              	GLOBAL _in_mouse_amx_callee
671   0000              	GLOBAL _in_mouse_amx
672   0000              	GLOBAL _in_mouse_amx_setpos_callee
673   0000              	GLOBAL _in_mouse_amx_setpos
674   0000              	GLOBAL _in_mouse_amx_reset
675   0000              	GLOBAL _in_mouse_amx_init_callee
676   0000              	GLOBAL _in_mouse_amx_init
677   0000              	GLOBAL _in_stick_sinclair2
678   0000              	GLOBAL _in_stick_sinclair1
679   0000              	GLOBAL _in_stick_kempston
680   0000              	GLOBAL _in_stick_fuller
681   0000              	GLOBAL _in_stick_cursor
682   0000              	GLOBAL _in_stick_keyboard_fastcall
683   0000              	GLOBAL _in_stick_keyboard
684   0000              	GLOBAL _in_wait_nokey
685   0000              	GLOBAL _in_wait_key
686   0000              	GLOBAL _in_test_key
687   0000              	GLOBAL _in_pause_fastcall
688   0000              	GLOBAL _in_pause
689   0000              	GLOBAL _in_key_scancode_fastcall
690   0000              	GLOBAL _in_key_scancode
691   0000              	GLOBAL _in_key_pressed_fastcall
692   0000              	GLOBAL _in_key_pressed
693   0000              	GLOBAL _in_inkey
694   0000              	GLOBAL _NIRVANAP_CHAR_TABLE
695   0000              	GLOBAL _NIRVANAP_WIDE_IMAGES
696   0000              	GLOBAL _NIRVANAP_TILE_IMAGES
697   0000              	GLOBAL _NIRVANAP_HOLE
698   0000              	GLOBAL _NIRVANAP_ISR_HOOK
699   0000              	GLOBAL _scan_map
700   0000              	GLOBAL _key_map
701   0000              	GLOBAL _player_lvl_table
702   0000              	GLOBAL _stp_row
703   0000              	GLOBAL _stp_col
704   0000              	GLOBAL _stp_tile
705   0000              	GLOBAL _map_paper_last_a
706   0000              	GLOBAL _map_paper_last
707   0000              	GLOBAL _map_paper_clr
708   0000              	GLOBAL _map_paper
709   0000              	GLOBAL _draw_count
710   0000              	GLOBAL _g_player_hit_right
711   0000              	GLOBAL _g_player_hit_left
712   0000              	GLOBAL _bullet_count
713   0000              	GLOBAL _boss_stat
714   0000              	GLOBAL _boss_time_fire
715   0000              	GLOBAL _boss_time
716   0000              	GLOBAL _boss_tile
717   0000              	GLOBAL _boss_inc
718   0000              	GLOBAL _boss_col
719   0000              	GLOBAL _boss_lin
720   0000              	GLOBAL _bullet
721   0000              	GLOBAL _bullet_vel
722   0000              	GLOBAL _bullet_frames
723   0000              	GLOBAL _bullet_colint
724   0000              	GLOBAL _bullet_dir
725   0000              	GLOBAL _bullet_tile
726   0000              	GLOBAL _bullet_col
727   0000              	GLOBAL _bullet_lin
728   0000              	GLOBAL _bullet_col0
729   0000              	GLOBAL _bullet_lin0
730   0000              	GLOBAL _bullet_max
731   0000              	GLOBAL _bullet_class
732   0000              	GLOBAL _mush_class
733   0000              	GLOBAL _mush_index
734   0000              	GLOBAL _anim_count
735   0000              	GLOBAL _anim_respanwn
736   0000              	GLOBAL _anim_loop
737   0000              	GLOBAL _anim_end
738   0000              	GLOBAL _anim_int
739   0000              	GLOBAL _anim_tile
740   0000              	GLOBAL _anim_col
741   0000              	GLOBAL _anim_lin
742   0000              	GLOBAL _map_heigth
743   0000              	GLOBAL _map_width
744   0000              	GLOBAL _scr_curr
745   0000              	GLOBAL _sprite_kind
746   0000              	GLOBAL _scr_obj1
747   0000              	GLOBAL _scr_obj0
748   0000              	GLOBAL _scr_map
749   0000              	GLOBAL _spr_init
750   0000              	GLOBAL _spr_map_tile
751   0000              	GLOBAL _sprite_frames
752   0000              	GLOBAL _sprite_base_speed
753   0000              	GLOBAL _sprite_speed
754   0000              	GLOBAL _screen_ink
755   0000              	GLOBAL _screen_paper
756   0000              	GLOBAL _player_onstair
757   0000              	GLOBAL _game_start_scr
758   0000              	GLOBAL _game_respawn_tile
759   0000              	GLOBAL _game_respawn_index
760   0000              	GLOBAL _game_respawn_time
761   0000              	GLOBAL _game_score_top
762   0000              	GLOBAL _player_coins
763   0000              	GLOBAL _player_lives
764   0000              	GLOBAL _game_over
765   0000              	GLOBAL _game_sound
766   0000              	GLOBAL _game_inf_lives
767   0000              	GLOBAL _game_inmune
768   0000              	GLOBAL _sprite_curr_index
769   0000              	GLOBAL _spr_count
770   0000              	GLOBAL _bullet_time
771   0000              	GLOBAL _anim_time
772   0000              	GLOBAL _frame_time
773   0000              	GLOBAL _curr_time
774   0000              	GLOBAL _s_state
775   0000              	GLOBAL _attrib_osd
776   0000              	GLOBAL _attrib_hl
777   0000              	GLOBAL _attrib
778   0000              	GLOBAL _zx_val_asm
779   0000              	GLOBAL _enemies
780   0000              	GLOBAL _tmp_ui
781   0000              	GLOBAL _tmp_sc
782   0000              	GLOBAL _tmp_uc
783   0000              	GLOBAL _tmp1
784   0000              	GLOBAL _tmp0
785   0000              	GLOBAL _tmp
786   0000              	GLOBAL _index1
787   0000              	GLOBAL _index0
788   0000              	GLOBAL _loop_count
789   0000              	GLOBAL _s_class
790   0000              	GLOBAL _s_col1
791   0000              	GLOBAL _s_col0
792   0000              	GLOBAL _s_lin1
793   0000              	GLOBAL _s_lin0
794   0000              	GLOBAL _s_tile1
795   0000              	GLOBAL _s_tile0
796   0000              	GLOBAL _player_brick_time
797   0000              	GLOBAL _player_hit_count
798   0000              	GLOBAL _game_debug
799   0000              	GLOBAL _sprite_horizontal_check
800   0000              	GLOBAL _sprite_on_air
801   0000              	GLOBAL _sprite
802   0000              	GLOBAL _fps
803   0000              	GLOBAL _menu_curr_sel
804   0000              	GLOBAL _game_control_jump_lock
805   0000              	GLOBAL _game_control_fire_lock
806   0000              	GLOBAL _game_control_mode
807   0000              	GLOBAL _game_respawn_curr_time
808   0000              	GLOBAL _game_round_up
809   0000              	GLOBAL _game_mush_count
810   0000              	GLOBAL _game_song_play_start
811   0000              	GLOBAL _game_song_play
812   0000              	GLOBAL _game_boss_fix
813   0000              	GLOBAL _game_boss_hit
814   0000              	GLOBAL _game_boss_alive
815   0000              	GLOBAL _game_boss
816   0000              	GLOBAL _game_world
817   0000              	GLOBAL _game_gravity
818   0000              	GLOBAL _player_onfire
819   0000              	GLOBAL _player_anim_stair
820   0000              	GLOBAL _player_hit
821   0000              	GLOBAL _player_hit_time
822   0000              	GLOBAL _game_level_up
823   0000              	GLOBAL _game_checkpoint_scr
824   0000              	GLOBAL _game_checkpoint_lin
825   0000              	GLOBAL _game_checkpoint_col
826   0000              	GLOBAL _player_jump_check
827   0000              	GLOBAL _player_lin_scr
828   0000              	GLOBAL _player_col_scr
829   0000              	GLOBAL _player_lvl
830   0000              	GLOBAL _player_int
831   0000              	GLOBAL _player_str
832   0000              	GLOBAL _player_max_vita
833   0000              	GLOBAL _player_max_mana
834   0000              	GLOBAL _player_vita
835   0000              	GLOBAL _player_mana
836   0000              	GLOBAL _player_stand
837   0000              	GLOBAL _player_keys
838   0000              	GLOBAL _player_vel_inc
839   0000              	GLOBAL _player_vel_y1
840   0000              	GLOBAL _player_vel_y0
841   0000              	GLOBAL _player_vel_y
842   0000              	GLOBAL _player_vel_x
843   0000              	GLOBAL _player_score
844   0000              	GLOBAL _last_time
845   0000              	GLOBAL _spr_timer
846   0000              	GLOBAL _jump_lin
847   0000              	GLOBAL _player_hit_col
848   0000              	GLOBAL _player_hit_lin
849   0000              	GLOBAL _colint
850   0000              	GLOBAL _col
851   0000              	GLOBAL _tbuffer
852   0000              	GLOBAL _lin
853   0000              	GLOBAL _tile
854   0000              	GLOBAL _state_a
855   0000              	GLOBAL _state
856   0000              	GLOBAL _class
857   0000              	GLOBAL _dirs_alt
858   0000              	GLOBAL _dirs
859   0000              	GLOBAL _k2
860   0000              	GLOBAL _k1
861   0000              	GLOBAL _joyfunc2
862   0000              	GLOBAL _joyfunc1
863   0000              	GLOBAL _btiles
864   0000              	GLOBAL _spec128
865   0000              	GLOBAL _GLOBAL_ZX_PORT_7FFD
866   0000              	GLOBAL _GLOBAL_ZX_PORT_1FFD
867   0000              	GLOBAL _GLOBAL_ZX_PORT_FE
868   0000              	GLOBAL _ay_fx_06_boss_explode
869   0000              	GLOBAL _ay_fx_06_disparo_fire
870   0000              	GLOBAL _ay_fx_06_disparo_axe
871   0000              	GLOBAL _ay_fx_06_respawn
872   0000              	GLOBAL _ay_fx_06_explosion1
873   0000              	GLOBAL _ay_fx_06_efecto
874   0000              	GLOBAL _ay_fx_06_disparo2
875   0000              	GLOBAL _ay_fx_06_disparo1
876   0000              	GLOBAL _ay_fx_06_checkpoint
877   0000              	GLOBAL _ay_fx_06_levelup
878   0000              	GLOBAL _ay_fx_06_mushroom
879   0000              	GLOBAL _ay_fx_06_magic
880   0000              	GLOBAL _ay_fx_06_sin_mana
881   0000              	GLOBAL _ay_fx_06_salto
882   0000              	GLOBAL _ay_fx_06_puerta
883   0000              	GLOBAL _ay_fx_06_magic1
884   0000              	GLOBAL _ay_fx_06_golpe
885   0000              	GLOBAL _ay_fx_06_explosion
886   0000              	GLOBAL _ay_fx_06_dano_por_toque
887   0000              	GLOBAL _ay_fx_06_coin
888   0000              	GLOBAL _ay_song_06_lotr_level_start
889   0000              	GLOBAL _ay_song_06_lotr_level_complete
890   0000              	GLOBAL _ay_song_06_lotr_lose_a_life
891   0000              	GLOBAL _ay_song_04_doom
892   0000              	GLOBAL _ay_song_04_luna
893   0000              	GLOBAL _ay_song_04_ciel
894   0000              	GLOBAL _ay_song_04_hope
895   0000              	GLOBAL _ay_song_03_regis
896   0000              	GLOBAL _ay_song_03_sunflower
897   0000              	GLOBAL _ay_song_03_lotr
898   0000              	GLOBAL _world0_h
899   0000              	GLOBAL _world0_w
900   0000              	GLOBAL _world0
901   0000              	GLOBAL _paper0
902   0000              	GLOBAL _lenght0
903   0000              	GLOBAL _start_scr0
904   0000              ;--------------------------------------------------------
905   0000              ; special function registers
906   0000              ;--------------------------------------------------------
907   0000              defc _IO_FE	=	0x00fe
908   0000              defc _IO_1FFD	=	0x1ffd
909   0000              defc _IO_7FFD	=	0x7ffd
910   0000              ;--------------------------------------------------------
911   0000              ; ram data
912   0000              ;--------------------------------------------------------
913   0000              	SECTION bss_compiler
914   0000              ;--------------------------------------------------------
915   0000              ; ram data
916   0000              ;--------------------------------------------------------
917   0000              
918   0000              IF 0
919   0000              
920   0000              ; .area _INITIALIZED removed by z88dk
921   0000              
922   0000              
923   0000              ENDIF
924   0000              
925   0000              ;--------------------------------------------------------
926   0000              ; absolute external ram data
927   0000              ;--------------------------------------------------------
928   0000              	SECTION IGNORE
929   0000              ;--------------------------------------------------------
930   0000              ; global & static initialisations
931   0000              ;--------------------------------------------------------
932   0000              	SECTION code_crt_init
933   0000              ;--------------------------------------------------------
934   0000              ; Home
935   0000              ;--------------------------------------------------------
936   0000              	SECTION IGNORE
937   0000              ;--------------------------------------------------------
938   0000              ; code
939   0000              ;--------------------------------------------------------
940   0000              	SECTION code_compiler
941   0000              ;	---------------------------------
942   0000              ; Function player_init
943   0000              ; ---------------------------------
944   0000              _player_init:
945   0000  CD 00 00    	call	___sdcc_enter_ix
946   0003  21 07 00    	ld	hl, +(_class + 0x0007)
947   0006  36 FF       	ld	(hl),0xff
948   0008  3A 00 00    	ld	a,(_sprite_base_speed)
949   000B  32 07 00    	ld	(_sprite_speed+7),a
950   000E  21 07 00    	ld	hl, +(_tile + 0x0007)
951   0011  DD 7E 06    	ld	a,(ix+6)
952   0014  77          	ld	(hl), a
953   0015  21 07 00    	ld	hl, +(_lin + 0x0007)
954   0018  DD 7E 04    	ld	a,(ix+4)
955   001B  77          	ld	(hl), a
956   001C  21 07 00    	ld	hl, +(_col + 0x0007)
957   001F  DD 7E 05    	ld	a,(ix+5)
958   0022  77          	ld	(hl), a
959   0023  21 07 00    	ld	hl, +(_colint + 0x0007)
960   0026  36 00       	ld	(hl),0x00
961   0028  21 07 00    	ld	hl, +(_state + 0x0007)
962   002B  36 00       	ld	(hl),0x00
963   002D  01 07 00    	ld	bc,_state_a+7
964   0030  AF          	xor	a, a
965   0031  02          	ld	(bc), a
966   0032  21 07 00    	ld	hl, +(_jump_lin + 0x0007)
967   0035  DD 7E 04    	ld	a,(ix+4)
968   0038  77          	ld	(hl), a
969   0039  ED 5B 00 00 	ld	de,(_curr_time)
970   003D  ED 53 0E 00 	ld	(_last_time + 0x000e),de
971   0041  0A          	ld	a, (bc)
972   0042  F6 11       	or	a,+(0x01|0x10)
973   0044  02          	ld	(bc),a
974   0045  21 00 00    	ld	hl,_player_hit_col
975   0048  36 00       	ld	(hl),0x00
976   004A  21 00 00    	ld	hl,_player_hit_lin
977   004D  36 00       	ld	(hl),0x00
978   004F  21 00 00    	ld	hl,_player_onstair
979   0052  36 00       	ld	(hl),0x00
980   0054  21 00 00    	ld	hl,_player_onfire
981   0057  36 00       	ld	(hl),0x00
982   0059  DD 66 05    	ld	h,(ix+5)
983   005C  DD 6E 04    	ld	l,(ix+4)
984   005F  E5          	push	hl
985   0060  DD 56 06    	ld	d,(ix+6)
986   0063  1E 07       	ld	e,0x07
987   0065  D5          	push	de
988   0066  CD 00 00    	call	_NIRVANAP_spriteT_callee
989   0069  DD E1       	pop	ix
990   006B  C9          	ret
991   006C              	SECTION code_compiler
992   006C              ;	---------------------------------
993   006C              ; Function player_turn
994   006C              ; ---------------------------------
995   006C              _player_turn:
996   006C  21 00 00    	ld	hl,_sprite
997   006F  CD 00 00    	call	_spr_chktime
998   0072  7D          	ld	a, l
999   0073  B7          	or	a, a
1000  0074  C8          	ret	Z
1001  0075  21 00 00    	ld	hl,_k1
1002  0078  E5          	push	hl
1003  0079  2A 00 00    	ld	hl,(_joyfunc1)
1004  007C  CD 00 00    	call	___sdcc_call_hl
1005  007F  F1          	pop	af
1006  0080  7D          	ld	a,l
1007  0081  32 00 00    	ld	(_dirs),a
1008  0084  21 00 00    	ld	hl,_k2
1009  0087  E5          	push	hl
1010  0088  2A 00 00    	ld	hl,(_joyfunc2)
1011  008B  CD 00 00    	call	___sdcc_call_hl
1012  008E  F1          	pop	af
1013  008F  7D          	ld	a,l
1014  0090  32 00 00    	ld	(_dirs_alt),a
1015  0093  3A 07 00    	ld	a,(_lin + 0x0007)
1016  0096  32 00 00    	ld	(_s_lin0),a
1017  0099  3A 07 00    	ld	a,(_col + 0x0007)
1018  009C  32 00 00    	ld	(_s_col0),a
1019  009F  3A 07 00    	ld	a,(_state + 0x0007)
1020  00A2  32 00 00    	ld	(_s_state),a
1021  00A5  21 00 00    	ld	hl,_s_class
1022  00A8  36 00       	ld	(hl),0x00
1023  00AA  CD B7 00    	call	_player_move
1024  00AD  CD 4E 04    	call	_player_collision
1025  00B0  3A 00 00    	ld	a,(_s_state)
1026  00B3  32 07 00    	ld	((_state + 0x0007)),a
1027  00B6  C9          	ret
1028  00B7              	SECTION code_compiler
1029  00B7              ;	---------------------------------
1030  00B7              ; Function player_move
1031  00B7              ; ---------------------------------
1032  00B7              _player_move:
1033  00B7  CD 08 04    	call	_player_fire
1034  00BA  21 00 00    	ld	hl,_s_state
1035  00BD  CB 46       	bit	0,(hl)
1036  00BF  20 04       	jr	NZ,l_player_move_00105
1037  00C1  CB 4E       	bit	1, (hl)
1038  00C3  28 0A       	jr	Z,l_player_move_00106
1039  00C5              l_player_move_00105:
1040  00C5  21 00 00    	ld	hl,_sprite_on_air
1041  00C8  36 01       	ld	(hl),0x01
1042  00CA  CD 1B 0E    	call	_player_move_jump
1043  00CD  18 17       	jr	l_player_move_00107
1044  00CF              l_player_move_00106:
1045  00CF  21 00 00    	ld	hl,_sprite_on_air
1046  00D2  36 00       	ld	(hl),0x00
1047  00D4  3A 00 00    	ld	a,(_player_onfire)
1048  00D7  B7          	or	a, a
1049  00D8  20 03       	jr	NZ,l_player_move_00102
1050  00DA  CD 4F 02    	call	_player_move_input
1051  00DD              l_player_move_00102:
1052  00DD  3A 00 00    	ld	a,(_player_onstair)
1053  00E0  B7          	or	a, a
1054  00E1  20 03       	jr	NZ,l_player_move_00107
1055  00E3  CD AA 0C    	call	_player_check_floor
1056  00E6              l_player_move_00107:
1057  00E6  3A 00 00    	ld	a,(_player_onfire)
1058  00E9  B7          	or	a, a
1059  00EA  20 0C       	jr	NZ,l_player_move_00116
1060  00EC  CD 00 00    	call	_spr_paint_player
1061  00EF  7D          	ld	a, l
1062  00F0  B7          	or	a, a
1063  00F1  28 39       	jr	Z,l_player_move_00117
1064  00F3  CD AD 07    	call	_player_check_map
1065  00F6  18 34       	jr	l_player_move_00117
1066  00F8              l_player_move_00116:
1067  00F8  CD 00 00    	call	_spr_back_repaint
1068  00FB  3A 07 00    	ld	a,(_state_a + 0x0007)
1069  00FE  CB 67       	bit	4, a
1070  0100  28 10       	jr	Z,l_player_move_00112
1071  0102  21 07 00    	ld	hl,+(_col + 0x0007)
1072  0105  46          	ld	b, (hl)
1073  0106  21 07 00    	ld	hl,+(_lin + 0x0007)
1074  0109  4E          	ld	c, (hl)
1075  010A  C5          	push	bc
1076  010B  21 07 D0    	ld	hl,0xd007
1077  010E  E5          	push	hl
1078  010F  CD 00 00    	call	_NIRVANAP_spriteT_callee
1079  0112              l_player_move_00112:
1080  0112  3A 07 00    	ld	a,(_state_a + 0x0007)
1081  0115  CB 5F       	bit	3, a
1082  0117  28 10       	jr	Z,l_player_move_00114
1083  0119  21 07 00    	ld	hl,+(_col + 0x0007)
1084  011C  56          	ld	d, (hl)
1085  011D  21 07 00    	ld	hl,+(_lin + 0x0007)
1086  0120  5E          	ld	e, (hl)
1087  0121  D5          	push	de
1088  0122  21 07 D1    	ld	hl,0xd107
1089  0125  E5          	push	hl
1090  0126  CD 00 00    	call	_NIRVANAP_spriteT_callee
1091  0129              l_player_move_00114:
1092  0129  CD AD 07    	call	_player_check_map
1093  012C              l_player_move_00117:
1094  012C  3A 00 00    	ld	a,(_player_hit_lin)
1095  012F  B7          	or	a, a
1096  0130  28 03       	jr	Z,l_player_move_00119
1097  0132  CD 39 0C    	call	_player_hit_platform_clear
1098  0135              l_player_move_00119:
1099  0135  2E 00       	ld	l,0x00
1100  0137  C9          	ret
1101  0138              	SECTION code_compiler
1102  0138              ;	---------------------------------
1103  0138              ; Function player_check_input
1104  0138              ; ---------------------------------
1105  0138              _player_check_input:
1106  0138  21 00 00    	ld	hl,_dirs
1107  013B  CB 56       	bit	2,(hl)
1108  013D  28 06       	jr	Z,l_player_check_input_00102
1109  013F  CB 5E       	bit	3,(hl)
1110  0141  28 02       	jr	Z,l_player_check_input_00102
1111  0143  36 00       	ld	(hl),0x00
1112  0145              l_player_check_input_00102:
1113  0145  21 00 00    	ld	hl,_dirs
1114  0148  CB 7E       	bit	7, (hl)
1115  014A  28 04       	jr	Z,l_player_check_input_00105
1116  014C  2E 01       	ld	l,0x01
1117  014E  18 40       	jr	l_player_check_input_00115
1118  0150              l_player_check_input_00105:
1119  0150  21 00 00    	ld	hl,_dirs
1120  0153  CB 46       	bit	0, (hl)
1121  0155  28 04       	jr	Z,l_player_check_input_00107
1122  0157  2E 01       	ld	l,0x01
1123  0159  18 35       	jr	l_player_check_input_00115
1124  015B              l_player_check_input_00107:
1125  015B  21 00 00    	ld	hl,_dirs
1126  015E  CB 56       	bit	2,(hl)
1127  0160  20 08       	jr	NZ,l_player_check_input_00108
1128  0162  CB 5E       	bit	3,(hl)
1129  0164  20 04       	jr	NZ,l_player_check_input_00108
1130  0166  CB 4E       	bit	1, (hl)
1131  0168  28 09       	jr	Z,l_player_check_input_00109
1132  016A              l_player_check_input_00108:
1133  016A  21 00 00    	ld	hl,_game_control_jump_lock
1134  016D  36 00       	ld	(hl),0x00
1135  016F  2E 01       	ld	l,0x01
1136  0171  18 1D       	jr	l_player_check_input_00115
1137  0173              l_player_check_input_00109:
1138  0173  3A 00 00    	ld	a,(_game_control_mode)
1139  0176  B7          	or	a, a
1140  0177  20 0B       	jr	NZ,l_player_check_input_00113
1141  0179  21 00 00    	ld	hl,_dirs_alt
1142  017C  CB 7E       	bit	7, (hl)
1143  017E  28 04       	jr	Z,l_player_check_input_00113
1144  0180  2E 01       	ld	l,0x01
1145  0182  18 0C       	jr	l_player_check_input_00115
1146  0184              l_player_check_input_00113:
1147  0184  21 00 00    	ld	hl,_game_control_fire_lock
1148  0187  36 00       	ld	(hl),0x00
1149  0189  21 00 00    	ld	hl,_game_control_jump_lock
1150  018C  36 00       	ld	(hl),0x00
1151  018E  2E 00       	ld	l,0x00
1152  0190              l_player_check_input_00115:
1153  0190  C9          	ret
1154  0191              	SECTION code_compiler
1155  0191              ;	---------------------------------
1156  0191              ; Function player_action_fire
1157  0191              ; ---------------------------------
1158  0191              _player_action_fire:
1159  0191  3A 00 00    	ld	a,(_game_control_mode)
1160  0194  B7          	or	a, a
1161  0195  28 1C       	jr	Z,l_player_action_fire_00101
1162  0197  21 00 00    	ld	hl,_dirs
1163  019A  7E          	ld	a, (hl)
1164  019B  CB 07       	rlc	a
1165  019D  E6 01       	and	a,0x01
1166  019F  4F          	ld	c, a
1167  01A0  7E          	ld	a, (hl)
1168  01A1  E6 01       	and	a,0x01
1169  01A3  47          	ld	b, a
1170  01A4  3A 00 00    	ld	a,(_game_control_mode)
1171  01A7  3D          	dec	a
1172  01A8  28 11       	jr	Z,l_player_action_fire_00102
1173  01AA  3A 00 00    	ld	a,(_game_control_mode)
1174  01AD  D6 02       	sub	a,0x02
1175  01AF  28 1A       	jr	Z,l_player_action_fire_00103
1176  01B1  18 3C       	jr	l_player_action_fire_00109
1177  01B3              l_player_action_fire_00101:
1178  01B3  3A 00 00    	ld	a,(_dirs_alt)
1179  01B6  E6 80       	and	a,0x80
1180  01B8  6F          	ld	l, a
1181  01B9  18 36       	jr	l_player_action_fire_00110
1182  01BB              l_player_action_fire_00102:
1183  01BB  CB 41       	bit	0, c
1184  01BD  28 04       	jr	Z,l_player_action_fire_00112
1185  01BF  78          	ld	a, b
1186  01C0  B7          	or	a, a
1187  01C1  28 04       	jr	Z,l_player_action_fire_00113
1188  01C3              l_player_action_fire_00112:
1189  01C3  2E 00       	ld	l,0x00
1190  01C5  18 02       	jr	l_player_action_fire_00114
1191  01C7              l_player_action_fire_00113:
1192  01C7  2E 01       	ld	l,0x01
1193  01C9              l_player_action_fire_00114:
1194  01C9  18 26       	jr	l_player_action_fire_00110
1195  01CB              l_player_action_fire_00103:
1196  01CB  3A 00 00    	ld	a,(_game_control_fire_lock)
1197  01CE  B7          	or	a, a
1198  01CF  20 1E       	jr	NZ,l_player_action_fire_00109
1199  01D1  3A 00 00    	ld	a,(_player_onstair)
1200  01D4  B7          	or	a, a
1201  01D5  28 10       	jr	Z,l_player_action_fire_00105
1202  01D7  CB 41       	bit	0, c
1203  01D9  28 04       	jr	Z,l_player_action_fire_00115
1204  01DB  78          	ld	a, b
1205  01DC  B7          	or	a, a
1206  01DD  28 04       	jr	Z,l_player_action_fire_00116
1207  01DF              l_player_action_fire_00115:
1208  01DF  2E 00       	ld	l,0x00
1209  01E1  18 02       	jr	l_player_action_fire_00117
1210  01E3              l_player_action_fire_00116:
1211  01E3  2E 01       	ld	l,0x01
1212  01E5              l_player_action_fire_00117:
1213  01E5  18 0A       	jr	l_player_action_fire_00110
1214  01E7              l_player_action_fire_00105:
1215  01E7  3A 00 00    	ld	a,(_dirs)
1216  01EA  E6 80       	and	a,0x80
1217  01EC  6F          	ld	l, a
1218  01ED  18 02       	jr	l_player_action_fire_00110
1219  01EF              l_player_action_fire_00109:
1220  01EF  2E 00       	ld	l,0x00
1221  01F1              l_player_action_fire_00110:
1222  01F1  C9          	ret
1223  01F2              	SECTION code_compiler
1224  01F2              ;	---------------------------------
1225  01F2              ; Function player_action_jump
1226  01F2              ; ---------------------------------
1227  01F2              _player_action_jump:
1228  01F2  3A 00 00    	ld	a,(_dirs)
1229  01F5  E6 80       	and	a,0x80
1230  01F7  4F          	ld	c, a
1231  01F8  3A 00 00    	ld	a,(_game_control_mode)
1232  01FB  B7          	or	a, a
1233  01FC  28 15       	jr	Z,l_player_action_jump_00101
1234  01FE  3A 00 00    	ld	a,(_dirs)
1235  0201  E6 01       	and	a,0x01
1236  0203  47          	ld	b, a
1237  0204  3A 00 00    	ld	a,(_game_control_mode)
1238  0207  3D          	dec	a
1239  0208  28 11       	jr	Z,l_player_action_jump_00104
1240  020A  3A 00 00    	ld	a,(_game_control_mode)
1241  020D  D6 02       	sub	a,0x02
1242  020F  28 21       	jr	Z,l_player_action_jump_00105
1243  0211  18 39       	jr	l_player_action_jump_00114
1244  0213              l_player_action_jump_00101:
1245  0213  79          	ld	a, c
1246  0214  B7          	or	a, a
1247  0215  28 35       	jr	Z,l_player_action_jump_00114
1248  0217  2E 01       	ld	l,0x01
1249  0219  18 33       	jr	l_player_action_jump_00115
1250  021B              l_player_action_jump_00104:
1251  021B  3A 00 00    	ld	a,(_dirs)
1252  021E  CB 07       	rlc	a
1253  0220  E6 01       	and	a,0x01
1254  0222  CB 47       	bit	0, a
1255  0224  28 04       	jr	Z,l_player_action_jump_00117
1256  0226  78          	ld	a, b
1257  0227  B7          	or	a, a
1258  0228  20 04       	jr	NZ,l_player_action_jump_00118
1259  022A              l_player_action_jump_00117:
1260  022A  2E 00       	ld	l,0x00
1261  022C  18 02       	jr	l_player_action_jump_00119
1262  022E              l_player_action_jump_00118:
1263  022E  2E 01       	ld	l,0x01
1264  0230              l_player_action_jump_00119:
1265  0230  18 1C       	jr	l_player_action_jump_00115
1266  0232              l_player_action_jump_00105:
1267  0232  3A 00 00    	ld	a,(_player_onstair)
1268  0235  B7          	or	a, a
1269  0236  28 0C       	jr	Z,l_player_action_jump_00112
1270  0238  79          	ld	a, c
1271  0239  B7          	or	a, a
1272  023A  28 10       	jr	Z,l_player_action_jump_00114
1273  023C  78          	ld	a, b
1274  023D  B7          	or	a, a
1275  023E  28 0C       	jr	Z,l_player_action_jump_00114
1276  0240  2E 01       	ld	l,0x01
1277  0242  18 0A       	jr	l_player_action_jump_00115
1278  0244              l_player_action_jump_00112:
1279  0244  78          	ld	a, b
1280  0245  B7          	or	a, a
1281  0246  28 04       	jr	Z,l_player_action_jump_00114
1282  0248  2E 01       	ld	l,0x01
1283  024A  18 02       	jr	l_player_action_jump_00115
1284  024C              l_player_action_jump_00114:
1285  024C  2E 00       	ld	l,0x00
1286  024E              l_player_action_jump_00115:
1287  024E  C9          	ret
1288  024F              	SECTION code_compiler
1289  024F              ;	---------------------------------
1290  024F              ; Function player_move_input
1291  024F              ; ---------------------------------
1292  024F              _player_move_input:
1293  024F  CD 38 01    	call	_player_check_input
1294  0252  7D          	ld	a, l
1295  0253  B7          	or	a, a
1296  0254  CA C3 03    	jp	Z, l_player_move_input_00154
1297  0257  3A 00 00    	ld	a,(_game_control_jump_lock)
1298  025A  B7          	or	a, a
1299  025B  20 61       	jr	NZ,l_player_move_input_00109
1300  025D  CD F2 01    	call	_player_action_jump
1301  0260  7D          	ld	a, l
1302  0261  B7          	or	a, a
1303  0262  28 5A       	jr	Z,l_player_move_input_00109
1304  0264  21 00 00    	ld	hl,_game_control_jump_lock
1305  0267  36 01       	ld	(hl),0x01
1306  0269  21 00 00    	ld	hl,_player_vel_inc
1307  026C  36 01       	ld	(hl),0x01
1308  026E  CD 00 00    	call	_audio_salto
1309  0271  21 00 00    	ld	hl,_player_onstair
1310  0274  36 00       	ld	(hl),0x00
1311  0276  21 00 00    	ld	hl,_s_state
1312  0279  CD 00 00    	call	_spr_set_up
1313  027C  3A 07 00    	ld	a,(_lin + 0x0007)
1314  027F  32 07 00    	ld	(_jump_lin+7),a
1315  0282  3A 00 00    	ld	a,(_s_state)
1316  0285  32 07 00    	ld	((_state + 0x0007)),a
1317  0288  21 64 08    	ld	hl,0x0864
1318  028B  E5          	push	hl
1319  028C  CD 8C 07    	call	_player_tile
1320  028F  E3          	ex	(sp),hl
1321  0290  E1          	pop	hl
1322  0291  3A 00 00    	ld	a,(_player_vel_y0)
1323  0294  32 00 00    	ld	(_player_vel_y),a
1324  0297  21 00 00    	ld	hl,_dirs
1325  029A  CB 56       	bit	2,(hl)
1326  029C  20 1B       	jr	NZ,l_player_move_input_00106
1327  029E  CB 5E       	bit	3, (hl)
1328  02A0  20 17       	jr	NZ,l_player_move_input_00106
1329  02A2  01 07 00    	ld	bc,_state_a+7
1330  02A5  0A          	ld	a, (bc)
1331  02A6  CB 5F       	bit	3, a
1332  02A8  28 05       	jr	Z,l_player_move_input_00102
1333  02AA  21 07 00    	ld	hl, +(_colint + 0x0007)
1334  02AD  36 02       	ld	(hl),0x02
1335  02AF              l_player_move_input_00102:
1336  02AF  0A          	ld	a, (bc)
1337  02B0  CB 67       	bit	4, a
1338  02B2  28 05       	jr	Z,l_player_move_input_00106
1339  02B4  21 07 00    	ld	hl, +(_colint + 0x0007)
1340  02B7  36 01       	ld	(hl),0x01
1341  02B9              l_player_move_input_00106:
1342  02B9  2E 01       	ld	l,0x01
1343  02BB  C3 EE 03    	jp	l_player_move_input_00156
1344  02BE              l_player_move_input_00109:
1345  02BE  21 00 00    	ld	hl,_dirs
1346  02C1  CB 5E       	bit	3, (hl)
1347  02C3  28 2E       	jr	Z,l_player_move_input_00116
1348  02C5  21 00 00    	ld	hl,_player_stand
1349  02C8  7E          	ld	a, (hl)
1350  02C9  B7          	or	a, a
1351  02CA  28 07       	jr	Z,l_player_move_input_00112
1352  02CC  36 00       	ld	(hl),0x00
1353  02CE  21 07 00    	ld	hl, +(_colint + 0x0007)
1354  02D1  36 03       	ld	(hl),0x03
1355  02D3              l_player_move_input_00112:
1356  02D3  CD EF 03    	call	_player_fix_walk_lin
1357  02D6  21 00 00    	ld	hl,_s_state
1358  02D9  CD 00 00    	call	_spr_set_right
1359  02DC  01 07 00    	ld	bc,_state_a+7
1360  02DF  0A          	ld	a, (bc)
1361  02E0  F6 10       	or	a,0x10
1362  02E2  E6 F7       	and	a,0xf7
1363  02E4  02          	ld	(bc),a
1364  02E5  3A 00 00    	ld	a,(_player_onstair)
1365  02E8  B7          	or	a, a
1366  02E9  28 05       	jr	Z,l_player_move_input_00114
1367  02EB  2E 00       	ld	l,0x00
1368  02ED  CD E4 06    	call	_player_check_stairs
1369  02F0              l_player_move_input_00114:
1370  02F0  CD 00 00    	call	_spr_move_horizontal
1371  02F3              l_player_move_input_00116:
1372  02F3  21 00 00    	ld	hl,_dirs
1373  02F6  CB 56       	bit	2, (hl)
1374  02F8  28 2E       	jr	Z,l_player_move_input_00122
1375  02FA  21 00 00    	ld	hl,_player_stand
1376  02FD  7E          	ld	a, (hl)
1377  02FE  B7          	or	a, a
1378  02FF  28 07       	jr	Z,l_player_move_input_00118
1379  0301  36 00       	ld	(hl),0x00
1380  0303  21 07 00    	ld	hl, +(_colint + 0x0007)
1381  0306  36 00       	ld	(hl),0x00
1382  0308              l_player_move_input_00118:
1383  0308  CD EF 03    	call	_player_fix_walk_lin
1384  030B  21 00 00    	ld	hl,_s_state
1385  030E  CD 00 00    	call	_spr_set_left
1386  0311  01 07 00    	ld	bc,_state_a+7
1387  0314  0A          	ld	a, (bc)
1388  0315  F6 08       	or	a,0x08
1389  0317  E6 EF       	and	a,0xef
1390  0319  02          	ld	(bc),a
1391  031A  3A 00 00    	ld	a,(_player_onstair)
1392  031D  B7          	or	a, a
1393  031E  28 05       	jr	Z,l_player_move_input_00120
1394  0320  2E 00       	ld	l,0x00
1395  0322  CD E4 06    	call	_player_check_stairs
1396  0325              l_player_move_input_00120:
1397  0325  CD 00 00    	call	_spr_move_horizontal
1398  0328              l_player_move_input_00122:
1399  0328  21 00 00    	ld	hl,_dirs
1400  032B  CB 46       	bit	0, (hl)
1401  032D  28 36       	jr	Z,l_player_move_input_00134
1402  032F  2E 00       	ld	l,0x00
1403  0331  CD E4 06    	call	_player_check_stairs
1404  0334  3A 00 00    	ld	a,(_player_onstair)
1405  0337  B7          	or	a, a
1406  0338  20 10       	jr	NZ,l_player_move_input_00126
1407  033A  2E 01       	ld	l,0x01
1408  033C  CD E4 06    	call	_player_check_stairs
1409  033F  3A 00 00    	ld	a,(_player_onstair)
1410  0342  B7          	or	a, a
1411  0343  20 05       	jr	NZ,l_player_move_input_00126
1412  0345  2E FE       	ld	l,0xfe
1413  0347  CD 45 06    	call	_player_check_stairs_vertical
1414  034A              l_player_move_input_00126:
1415  034A  3A 00 00    	ld	a,(_player_onstair)
1416  034D  B7          	or	a, a
1417  034E  28 05       	jr	Z,l_player_move_input_00131
1418  0350  CD 00 00    	call	_spr_move_up
1419  0353  18 10       	jr	l_player_move_input_00134
1420  0355              l_player_move_input_00131:
1421  0355  21 00 00    	ld	hl,_dirs
1422  0358  CB 5E       	bit	3,(hl)
1423  035A  20 09       	jr	NZ,l_player_move_input_00134
1424  035C  CB 56       	bit	2, (hl)
1425  035E  20 05       	jr	NZ,l_player_move_input_00134
1426  0360  2E 00       	ld	l,0x00
1427  0362  C3 EE 03    	jp	l_player_move_input_00156
1428  0365              l_player_move_input_00134:
1429  0365  21 00 00    	ld	hl,_dirs
1430  0368  CB 4E       	bit	1, (hl)
1431  036A  28 35       	jr	Z,l_player_move_input_00146
1432  036C  2E 00       	ld	l,0x00
1433  036E  CD E4 06    	call	_player_check_stairs
1434  0371  3A 00 00    	ld	a,(_player_onstair)
1435  0374  B7          	or	a, a
1436  0375  20 10       	jr	NZ,l_player_move_input_00138
1437  0377  2E 01       	ld	l,0x01
1438  0379  CD E4 06    	call	_player_check_stairs
1439  037C  3A 00 00    	ld	a,(_player_onstair)
1440  037F  B7          	or	a, a
1441  0380  20 05       	jr	NZ,l_player_move_input_00138
1442  0382  2E 12       	ld	l,0x12
1443  0384  CD 45 06    	call	_player_check_stairs_vertical
1444  0387              l_player_move_input_00138:
1445  0387  3A 00 00    	ld	a,(_player_onstair)
1446  038A  B7          	or	a, a
1447  038B  28 05       	jr	Z,l_player_move_input_00143
1448  038D  CD 00 00    	call	_spr_move_down
1449  0390  18 0F       	jr	l_player_move_input_00146
1450  0392              l_player_move_input_00143:
1451  0392  21 00 00    	ld	hl,_dirs
1452  0395  CB 5E       	bit	3,(hl)
1453  0397  20 08       	jr	NZ,l_player_move_input_00146
1454  0399  CB 56       	bit	2, (hl)
1455  039B  20 04       	jr	NZ,l_player_move_input_00146
1456  039D  2E 00       	ld	l,0x00
1457  039F  18 4D       	jr	l_player_move_input_00156
1458  03A1              l_player_move_input_00146:
1459  03A1  3A 00 00    	ld	a,(_s_state)
1460  03A4  32 07 00    	ld	((_state + 0x0007)),a
1461  03A7  3A 00 00    	ld	a,(_player_onstair)
1462  03AA  B7          	or	a, a
1463  03AB  28 0A       	jr	Z,l_player_move_input_00148
1464  03AD  21 72 00    	ld	hl,0x0072
1465  03B0  E5          	push	hl
1466  03B1  CD 8C 07    	call	_player_tile
1467  03B4  F1          	pop	af
1468  03B5  18 08       	jr	l_player_move_input_00149
1469  03B7              l_player_move_input_00148:
1470  03B7  21 60 08    	ld	hl,0x0860
1471  03BA  E5          	push	hl
1472  03BB  CD 8C 07    	call	_player_tile
1473  03BE  F1          	pop	af
1474  03BF              l_player_move_input_00149:
1475  03BF  2E 01       	ld	l,0x01
1476  03C1  18 2B       	jr	l_player_move_input_00156
1477  03C3              l_player_move_input_00154:
1478  03C3  21 07 00    	ld	hl, +(_colint + 0x0007)
1479  03C6  36 00       	ld	(hl),0x00
1480  03C8  21 00 00    	ld	hl,_player_stand
1481  03CB  36 01       	ld	(hl),0x01
1482  03CD  3A 00 00    	ld	a,(_player_onstair)
1483  03D0  B7          	or	a, a
1484  03D1  28 0A       	jr	Z,l_player_move_input_00151
1485  03D3  21 72 00    	ld	hl,0x0072
1486  03D6  E5          	push	hl
1487  03D7  CD 8C 07    	call	_player_tile
1488  03DA  F1          	pop	af
1489  03DB  18 08       	jr	l_player_move_input_00152
1490  03DD              l_player_move_input_00151:
1491  03DD  21 70 01    	ld	hl,0x0170
1492  03E0  E5          	push	hl
1493  03E1  CD 8C 07    	call	_player_tile
1494  03E4  F1          	pop	af
1495  03E5              l_player_move_input_00152:
1496  03E5  21 00 00    	ld	hl,_s_state
1497  03E8  7E          	ld	a,(hl)
1498  03E9  E6 F3       	and	a,+(0xf7&0xfb)
1499  03EB  77          	ld	(hl),a
1500  03EC  2E 00       	ld	l,0x00
1501  03EE              l_player_move_input_00156:
1502  03EE  C9          	ret
1503  03EF              	SECTION code_compiler
1504  03EF              ;	---------------------------------
1505  03EF              ; Function player_fix_walk_lin
1506  03EF              ; ---------------------------------
1507  03EF              _player_fix_walk_lin:
1508  03EF  3A 00 00    	ld	a,(_player_onstair)
1509  03F2  B7          	or	a, a
1510  03F3  C0          	ret	NZ
1511  03F4  01 07 00    	ld	bc,_lin+7
1512  03F7  3A 00 00    	ld	a,(_s_lin0)
1513  03FA  07          	rlca
1514  03FB  07          	rlca
1515  03FC  07          	rlca
1516  03FD  07          	rlca
1517  03FE  E6 0F       	and	a,0x0f
1518  0400  07          	rlca
1519  0401  07          	rlca
1520  0402  07          	rlca
1521  0403  07          	rlca
1522  0404  E6 F0       	and	a,0xf0
1523  0406  02          	ld	(bc), a
1524  0407  C9          	ret
1525  0408              	SECTION code_compiler
1526  0408              ;	---------------------------------
1527  0408              ; Function player_fire
1528  0408              ; ---------------------------------
1529  0408              _player_fire:
1530  0408  CD 91 01    	call	_player_action_fire
1531  040B  4D          	ld	c, l
1532  040C  21 00 00    	ld	hl,_player_onfire
1533  040F  71          	ld	(hl), c
1534  0410  3A 07 00    	ld	a,(_bullet_col + 0x0007)
1535  0413  3C          	inc	a
1536  0414  20 37       	jr	NZ,l_player_fire_00113
1537  0416  7E          	ld	a, (hl)
1538  0417  B7          	or	a, a
1539  0418  28 33       	jr	Z,l_player_fire_00113
1540  041A  21 00 00    	ld	hl,_player_mana
1541  041D  7E          	ld	a, (hl)
1542  041E  B7          	or	a, a
1543  041F  28 29       	jr	Z,l_player_fire_00107
1544  0421  3E 05       	ld	a,0x05
1545  0423  96          	sub	a, (hl)
1546  0424  30 0F       	jr	NC,l_player_fire_00104
1547  0426  3A 00 00    	ld	a,(_game_inmune)
1548  0429  B7          	or	a, a
1549  042A  20 0E       	jr	NZ,l_player_fire_00105
1550  042C  21 00 00    	ld	hl,_player_mana
1551  042F  7E          	ld	a, (hl)
1552  0430  C6 FB       	add	a,0xfb
1553  0432  77          	ld	(hl), a
1554  0433  18 05       	jr	l_player_fire_00105
1555  0435              l_player_fire_00104:
1556  0435  21 00 00    	ld	hl,_player_mana
1557  0438  36 00       	ld	(hl),0x00
1558  043A              l_player_fire_00105:
1559  043A  CD 00 00    	call	_game_update_stats
1560  043D  CD 00 00    	call	_audio_disparo1
1561  0440  21 07 78    	ld	hl,0x7807
1562  0443  E5          	push	hl
1563  0444  CD 00 00    	call	_game_shoot_fire
1564  0447  F1          	pop	af
1565  0448  18 03       	jr	l_player_fire_00113
1566  044A              l_player_fire_00107:
1567  044A  CD 00 00    	call	_audio_sin_mana
1568  044D              l_player_fire_00113:
1569  044D  C9          	ret
1570  044E              	SECTION code_compiler
1571  044E              ;	---------------------------------
1572  044E              ; Function player_collision
1573  044E              ; ---------------------------------
1574  044E              _player_collision:
1575  044E  3E 1E       	ld	a,0x1e
1576  0450  F5          	push	af
1577  0451  33          	inc	sp
1578  0452  21 00 00    	ld	hl,_player_hit_time
1579  0455  E5          	push	hl
1580  0456  CD 00 00    	call	_game_check_time
1581  0459  F1          	pop	af
1582  045A  33          	inc	sp
1583  045B  7D          	ld	a, l
1584  045C  B7          	or	a, a
1585  045D  CA F9 05    	jp	Z, l_player_collision_00135
1586  0460  21 00 00    	ld	hl,_player_hit
1587  0463  36 00       	ld	(hl),0x00
1588  0465  21 00 00    	ld	hl,_sprite
1589  0468  36 00       	ld	(hl),0x00
1590  046A  3A 07 00    	ld	a,(_col + 7)
1591  046D  32 00 00    	ld	(_s_col1),a
1592  0470  3A 07 00    	ld	a,(_lin + 7)
1593  0473  32 00 00    	ld	(_s_lin1),a
1594  0476  C6 08       	add	a,0x08
1595  0478  4F          	ld	c, a
1596  0479  3A 00 00    	ld	a, (_s_col1)
1597  047C  47          	ld	b,a
1598  047D  C5          	push	bc
1599  047E  CD 00 00    	call	_spr_calc_index
1600  0481  F1          	pop	af
1601  0482  4D          	ld	c, l
1602  0483  21 00 00    	ld	hl,_sprite_curr_index
1603  0486  71          	ld	(hl), c
1604  0487  3E 00       	ld	a, +((_scr_map) & 0xFF)
1605  0489  86          	add	a, (hl)
1606  048A  4F          	ld	c, a
1607  048B  3E 00       	ld	a, +((_scr_map) / 256)
1608  048D  CE 00       	adc	a,0x00
1609  048F  47          	ld	b, a
1610  0490  0A          	ld	a, (bc)
1611  0491  4F          	ld	c,a
1612  0492  D6 15       	sub	a,0x15
1613  0494  20 2E       	jr	NZ,l_player_collision_00104
1614  0496  3A 00 00    	ld	a,(_game_checkpoint_scr)
1615  0499  21 00 00    	ld	hl,_scr_curr
1616  049C  96          	sub	a, (hl)
1617  049D  28 20       	jr	Z,l_player_collision_00102
1618  049F  C5          	push	bc
1619  04A0  CD 00 00    	call	_audio_checkpoint
1620  04A3  C1          	pop	bc
1621  04A4  3A 00 00    	ld	a,(_sprite_curr_index)
1622  04A7  E6 0F       	and	a,0x0f
1623  04A9  87          	add	a, a
1624  04AA  32 00 00    	ld	(_player_col_scr),a
1625  04AD  3A 00 00    	ld	a,(_sprite_curr_index)
1626  04B0  07          	rlca
1627  04B1  07          	rlca
1628  04B2  07          	rlca
1629  04B3  07          	rlca
1630  04B4  E6 0F       	and	a,0x0f
1631  04B6  07          	rlca
1632  04B7  07          	rlca
1633  04B8  07          	rlca
1634  04B9  07          	rlca
1635  04BA  E6 F0       	and	a,0xf0
1636  04BC  32 00 00    	ld	(_player_lin_scr),a
1637  04BF              l_player_collision_00102:
1638  04BF  C5          	push	bc
1639  04C0  CD 00 00    	call	_game_set_checkpoint
1640  04C3  C1          	pop	bc
1641  04C4              l_player_collision_00104:
1642  04C4  3E 2F       	ld	a,0x2f
1643  04C6  91          	sub	a, c
1644  04C7  30 58       	jr	NC,l_player_collision_00155
1645  04C9  79          	ld	a,c
1646  04CA  FE 3A       	cp	a,0x3a
1647  04CC  30 53       	jr	NC,l_player_collision_00155
1648  04CE  D6 39       	sub	a,0x39
1649  04D0  20 2A       	jr	NZ,l_player_collision_00110
1650  04D2  CD 00 00    	call	_audio_level_complete
1651  04D5  21 00 00    	ld	hl,___str_0
1652  04D8  E5          	push	hl
1653  04D9  21 0C 08    	ld	hl,0x080c
1654  04DC  E5          	push	hl
1655  04DD  CD 00 00    	call	_zx_print_str
1656  04E0  AF          	xor	a, a
1657  04E1  F5          	push	af
1658  04E2  33          	inc	sp
1659  04E3  21 E8 03    	ld	hl,0x03e8
1660  04E6  E5          	push	hl
1661  04E7  21 08 17    	ld	hl,0x1708
1662  04EA  E5          	push	hl
1663  04EB  3E 0C       	ld	a,0x0c
1664  04ED  F5          	push	af
1665  04EE  33          	inc	sp
1666  04EF  CD 00 00    	call	_game_colour_message
1667  04F2  F1          	pop	af
1668  04F3  F1          	pop	af
1669  04F4  F1          	pop	af
1670  04F5  21 00 00    	ld	hl,_game_round_up
1671  04F8  36 01       	ld	(hl),0x01
1672  04FA  18 25       	jr	l_player_collision_00155
1673  04FC              l_player_collision_00110:
1674  04FC  3A 00 00    	ld	a,(_game_inmune)
1675  04FF  B7          	or	a, a
1676  0500  20 10       	jr	NZ,l_player_collision_00106
1677  0502  3E 82       	ld	a,0x82
1678  0504  21 00 00    	ld	hl,_s_lin1
1679  0507  96          	sub	a, (hl)
1680  0508  30 08       	jr	NC,l_player_collision_00106
1681  050A  CD 25 10    	call	_player_lost_life
1682  050D  2E 00       	ld	l,0x00
1683  050F  C3 FB 05    	jp	l_player_collision_00136
1684  0512              l_player_collision_00106:
1685  0512  21 00 00    	ld	hl,_s_state
1686  0515  CB E6       	set	4, (hl)
1687  0517  2E 32       	ld	l,0x32
1688  0519  CD 6B 11    	call	_player_damage
1689  051C  2E 01       	ld	l,0x01
1690  051E  C3 FB 05    	jp	l_player_collision_00136
1691  0521              l_player_collision_00155:
1692  0521              l_player_collision_00131:
1693  0521  21 00 00    	ld	hl,_sprite
1694  0524  7E          	ld	a, (hl)
1695  0525  D6 07       	sub	a,0x07
1696  0527  D2 F4 05    	jp	NC, l_player_collision_00133
1697  052A  4E          	ld	c,(hl)
1698  052B  06 00       	ld	b,0x00
1699  052D  21 00 00    	ld	hl,_class
1700  0530  09          	add	hl,bc
1701  0531  7E          	ld	a,(hl)
1702  0532  32 00 00    	ld	(_s_class),a
1703  0535  B7          	or	a, a
1704  0536  CA ED 05    	jp	Z, l_player_collision_00130
1705  0539  2A 00 00    	ld	hl,(_sprite)
1706  053C  26 00       	ld	h,0x00
1707  053E  01 00 00    	ld	bc,_col
1708  0541  09          	add	hl,bc
1709  0542  4E          	ld	c,(hl)
1710  0543  06 00       	ld	b,0x00
1711  0545  3A 00 00    	ld	a,(_s_col1)
1712  0548  5F          	ld	e,a
1713  0549  16 00       	ld	d,0x00
1714  054B  79          	ld	a, c
1715  054C  93          	sub	a, e
1716  054D  6F          	ld	l, a
1717  054E  78          	ld	a, b
1718  054F  9A          	sbc	a, d
1719  0550  67          	ld	h, a
1720  0551  CD 00 00    	call	_abs_fastcall
1721  0554  7D          	ld	a,l
1722  0555  D6 02       	sub	a,0x02
1723  0557  7C          	ld	a,h
1724  0558  17          	rla
1725  0559  3F          	ccf
1726  055A  1F          	rra
1727  055B  DE 80       	sbc	a,0x80
1728  055D  D2 ED 05    	jp	NC, l_player_collision_00130
1729  0560  2A 00 00    	ld	hl,(_sprite)
1730  0563  26 00       	ld	h,0x00
1731  0565  01 00 00    	ld	bc,_lin
1732  0568  09          	add	hl,bc
1733  0569  4E          	ld	c,(hl)
1734  056A  06 00       	ld	b,0x00
1735  056C  3A 00 00    	ld	a,(_s_lin1)
1736  056F  5F          	ld	e,a
1737  0570  16 00       	ld	d,0x00
1738  0572  79          	ld	a, c
1739  0573  93          	sub	a, e
1740  0574  6F          	ld	l, a
1741  0575  78          	ld	a, b
1742  0576  9A          	sbc	a, d
1743  0577  67          	ld	h, a
1744  0578  CD 00 00    	call	_abs_fastcall
1745  057B  7D          	ld	a,l
1746  057C  D6 0E       	sub	a,0x0e
1747  057E  7C          	ld	a,h
1748  057F  17          	rla
1749  0580  3F          	ccf
1750  0581  1F          	rra
1751  0582  DE 80       	sbc	a,0x80
1752  0584  30 67       	jr	NC,l_player_collision_00130
1753  0586  3A 00 00    	ld	a,(_s_class)
1754  0589  D6 06       	sub	a,0x06
1755  058B  20 1D       	jr	NZ,l_player_collision_00118
1756  058D  21 00 00    	ld	hl,_player_vita
1757  0590  7E          	ld	a, (hl)
1758  0591  C6 32       	add	a,0x32
1759  0593  77          	ld	(hl), a
1760  0594  3A 00 00    	ld	a,(_player_max_vita)
1761  0597  21 00 00    	ld	hl,_player_vita
1762  059A  96          	sub	a, (hl)
1763  059B  30 06       	jr	NC,l_player_collision_00116
1764  059D  3A 00 00    	ld	a,(_player_max_vita)
1765  05A0  32 00 00    	ld	(_player_vita),a
1766  05A3              l_player_collision_00116:
1767  05A3  CD FC 05    	call	_player_pick_mushroom
1768  05A6  2E 00       	ld	l,0x00
1769  05A8  18 51       	jr	l_player_collision_00136
1770  05AA              l_player_collision_00118:
1771  05AA  3A 00 00    	ld	a,(_s_class)
1772  05AD  D6 07       	sub	a,0x07
1773  05AF  20 1D       	jr	NZ,l_player_collision_00122
1774  05B1  21 00 00    	ld	hl,_player_mana
1775  05B4  7E          	ld	a, (hl)
1776  05B5  C6 32       	add	a,0x32
1777  05B7  77          	ld	(hl), a
1778  05B8  3A 00 00    	ld	a,(_player_max_mana)
1779  05BB  21 00 00    	ld	hl,_player_mana
1780  05BE  96          	sub	a, (hl)
1781  05BF  30 06       	jr	NC,l_player_collision_00120
1782  05C1  3A 00 00    	ld	a,(_player_max_mana)
1783  05C4  32 00 00    	ld	(_player_mana),a
1784  05C7              l_player_collision_00120:
1785  05C7  CD FC 05    	call	_player_pick_mushroom
1786  05CA  2E 00       	ld	l,0x00
1787  05CC  18 2D       	jr	l_player_collision_00136
1788  05CE              l_player_collision_00122:
1789  05CE  3A 00 00    	ld	a,(_s_class)
1790  05D1  D6 08       	sub	a,0x08
1791  05D3  20 0A       	jr	NZ,l_player_collision_00124
1792  05D5  CD FC 05    	call	_player_pick_mushroom
1793  05D8  CD 13 06    	call	_player_1up
1794  05DB  2E 00       	ld	l,0x00
1795  05DD  18 1C       	jr	l_player_collision_00136
1796  05DF              l_player_collision_00124:
1797  05DF  21 00 00    	ld	hl,_s_state
1798  05E2  CB E6       	set	4, (hl)
1799  05E4  2E 14       	ld	l,0x14
1800  05E6  CD 6B 11    	call	_player_damage
1801  05E9  2E 01       	ld	l,0x01
1802  05EB  18 0E       	jr	l_player_collision_00136
1803  05ED              l_player_collision_00130:
1804  05ED  21 00 00    	ld	hl,_sprite
1805  05F0  34          	inc	(hl)
1806  05F1  C3 21 05    	jp	l_player_collision_00131
1807  05F4              l_player_collision_00133:
1808  05F4  21 00 00    	ld	hl,_s_state
1809  05F7  CB A6       	res	4, (hl)
1810  05F9              l_player_collision_00135:
1811  05F9  2E 00       	ld	l,0x00
1812  05FB              l_player_collision_00136:
1813  05FB  C9          	ret
1814  05FC              	SECTION rodata_compiler
1815  0000              ___str_0:
1816  0000  52 4F 55 4E 44 20 43 4F 4D 50 4C 45 54 45 21 
                        	DEFM "ROUND COMPLETE!"
1817  000F  00          	DEFB 0x00
1818  0010              	SECTION code_compiler
1819  05FC              ;	---------------------------------
1820  05FC              ; Function player_pick_mushroom
1821  05FC              ; ---------------------------------
1822  05FC              _player_pick_mushroom:
1823  05FC  CD 00 00    	call	_audio_magic1
1824  05FF  21 01 00    	ld	hl,0x0001
1825  0602  CD 68 0C    	call	_player_score_add
1826  0605  CD 00 00    	call	_game_update_stats
1827  0608  2A 00 00    	ld	hl,(_sprite)
1828  060B  CD 00 00    	call	_spr_destroy
1829  060E  21 00 00    	ld	hl,_game_mush_count
1830  0611  35          	dec	(hl)
1831  0612  C9          	ret
1832  0613              	SECTION code_compiler
1833  0613              ;	---------------------------------
1834  0613              ; Function player_1up
1835  0613              ; ---------------------------------
1836  0613              _player_1up:
1837  0613  21 00 00    	ld	hl,_player_lives
1838  0616  7E          	ld	a, (hl)
1839  0617  D6 64       	sub	a,0x64
1840  0619  D0          	ret	NC
1841  061A  34          	inc	(hl)
1842  061B  CD 00 00    	call	_spr_flatten
1843  061E  21 10 00    	ld	hl,___str_1
1844  0621  E5          	push	hl
1845  0622  21 0C 0C    	ld	hl,0x0c0c
1846  0625  E5          	push	hl
1847  0626  CD 00 00    	call	_zx_print_str
1848  0629  AF          	xor	a, a
1849  062A  F5          	push	af
1850  062B  33          	inc	sp
1851  062C  21 19 00    	ld	hl,0x0019
1852  062F  E5          	push	hl
1853  0630  21 0C 11    	ld	hl,0x110c
1854  0633  E5          	push	hl
1855  0634  3E 0C       	ld	a,0x0c
1856  0636  F5          	push	af
1857  0637  33          	inc	sp
1858  0638  CD 00 00    	call	_game_colour_message
1859  063B  F1          	pop	af
1860  063C  F1          	pop	af
1861  063D  F1          	pop	af
1862  063E  CD 00 00    	call	_game_update_stats
1863  0641  CD 00 00    	call	_spr_unflattenP1
1864  0644  C9          	ret
1865  0645              	SECTION rodata_compiler
1866  0010              ___str_1:
1867  0010  31 20 55 50 21 
                        	DEFM "1 UP!"
1868  0015  00          	DEFB 0x00
1869  0016              	SECTION code_compiler
1870  0645              ;	---------------------------------
1871  0645              ; Function player_check_stairs_vertical
1872  0645              ; ---------------------------------
1873  0645              _player_check_stairs_vertical:
1874  0645  CD 00 00    	call	___sdcc_enter_ix
1875  0648  3B          	dec	sp
1876  0649  4D          	ld	c, l
1877  064A  21 07 00    	ld	hl,+(_col + 0x0007)
1878  064D  46          	ld	b, (hl)
1879  064E  CB 40       	bit	0, b
1880  0650  20 2A       	jr	NZ,l_player_check_stairs_vertical_00102
1881  0652  3A 07 00    	ld	a,(_lin + 0x0007)
1882  0655  81          	add	a, c
1883  0656  4F          	ld	c,a
1884  0657  C5          	push	bc
1885  0658  CD 00 00    	call	_spr_calc_index
1886  065B  F1          	pop	af
1887  065C  7D          	ld	a,l
1888  065D  32 00 00    	ld	(_sprite_curr_index),a
1889  0660  4F          	ld	c,a
1890  0661  06 00       	ld	b,0x00
1891  0663  21 00 00    	ld	hl,_scr_map
1892  0666  09          	add	hl,bc
1893  0667  7E          	ld	a,(hl)
1894  0668  4F          	ld	c,a
1895  0669  D6 44       	sub	a,0x44
1896  066B  38 05       	jr	C,l_player_check_stairs_vertical_00110
1897  066D  3E 47       	ld	a,0x47
1898  066F  91          	sub	a, c
1899  0670  30 04       	jr	NC,l_player_check_stairs_vertical_00111
1900  0672              l_player_check_stairs_vertical_00110:
1901  0672  06 00       	ld	b,0x00
1902  0674  18 02       	jr	l_player_check_stairs_vertical_00112
1903  0676              l_player_check_stairs_vertical_00111:
1904  0676  06 01       	ld	b,0x01
1905  0678              l_player_check_stairs_vertical_00112:
1906  0678  0E 00       	ld	c,0x00
1907  067A  18 51       	jr	l_player_check_stairs_vertical_00103
1908  067C              l_player_check_stairs_vertical_00102:
1909  067C  78          	ld	a, b
1910  067D  91          	sub	a, c
1911  067E  57          	ld	d, a
1912  067F  3A 07 00    	ld	a,(_lin + 0x0007)
1913  0682  81          	add	a, c
1914  0683  47          	ld	b, a
1915  0684  C5          	push	bc
1916  0685  58          	ld	e,b
1917  0686  D5          	push	de
1918  0687  CD 00 00    	call	_spr_calc_index
1919  068A  F1          	pop	af
1920  068B  C1          	pop	bc
1921  068C  7D          	ld	a,l
1922  068D  32 00 00    	ld	(_sprite_curr_index),a
1923  0690  5F          	ld	e,a
1924  0691  16 00       	ld	d,0x00
1925  0693  21 00 00    	ld	hl,_scr_map
1926  0696  19          	add	hl,de
1927  0697  7E          	ld	a,(hl)
1928  0698  47          	ld	b,a
1929  0699  D6 44       	sub	a,0x44
1930  069B  38 05       	jr	C,l_player_check_stairs_vertical_00113
1931  069D  3E 47       	ld	a,0x47
1932  069F  90          	sub	a, b
1933  06A0  30 04       	jr	NC,l_player_check_stairs_vertical_00114
1934  06A2              l_player_check_stairs_vertical_00113:
1935  06A2  06 00       	ld	b,0x00
1936  06A4  18 02       	jr	l_player_check_stairs_vertical_00115
1937  06A6              l_player_check_stairs_vertical_00114:
1938  06A6  06 01       	ld	b,0x01
1939  06A8              l_player_check_stairs_vertical_00115:
1940  06A8  3A 07 00    	ld	a,(_col + 0x0007)
1941  06AB  91          	sub	a, c
1942  06AC  57          	ld	d, a
1943  06AD  3A 07 00    	ld	a,(_lin + 0x0007)
1944  06B0  81          	add	a, c
1945  06B1  C5          	push	bc
1946  06B2  5F          	ld	e,a
1947  06B3  D5          	push	de
1948  06B4  CD 00 00    	call	_spr_calc_index
1949  06B7  F1          	pop	af
1950  06B8  C1          	pop	bc
1951  06B9  7D          	ld	a,l
1952  06BA  32 00 00    	ld	(_sprite_curr_index),a
1953  06BD  78          	ld	a, b
1954  06BE  D6 44       	sub	a,0x44
1955  06C0  38 05       	jr	C,l_player_check_stairs_vertical_00116
1956  06C2  3E 47       	ld	a,0x47
1957  06C4  90          	sub	a, b
1958  06C5  30 04       	jr	NC,l_player_check_stairs_vertical_00117
1959  06C7              l_player_check_stairs_vertical_00116:
1960  06C7  0E 00       	ld	c,0x00
1961  06C9  18 02       	jr	l_player_check_stairs_vertical_00118
1962  06CB              l_player_check_stairs_vertical_00117:
1963  06CB  0E 01       	ld	c,0x01
1964  06CD              l_player_check_stairs_vertical_00118:
1965  06CD              l_player_check_stairs_vertical_00103:
1966  06CD  78          	ld	a, b
1967  06CE  B7          	or	a,a
1968  06CF  20 03       	jr	NZ,l_player_check_stairs_vertical_00104
1969  06D1  B1          	or	a,c
1970  06D2  28 07       	jr	Z,l_player_check_stairs_vertical_00105
1971  06D4              l_player_check_stairs_vertical_00104:
1972  06D4  21 00 00    	ld	hl,_player_onstair
1973  06D7  36 01       	ld	(hl),0x01
1974  06D9  18 05       	jr	l_player_check_stairs_vertical_00108
1975  06DB              l_player_check_stairs_vertical_00105:
1976  06DB  21 00 00    	ld	hl,_player_onstair
1977  06DE  36 00       	ld	(hl),0x00
1978  06E0              l_player_check_stairs_vertical_00108:
1979  06E0  33          	inc	sp
1980  06E1  DD E1       	pop	ix
1981  06E3  C9          	ret
1982  06E4              	SECTION code_compiler
1983  06E4              ;	---------------------------------
1984  06E4              ; Function player_check_stairs
1985  06E4              ; ---------------------------------
1986  06E4              _player_check_stairs:
1987  06E4  CD 00 00    	call	___sdcc_enter_ix
1988  06E7  3B          	dec	sp
1989  06E8  45          	ld	b, l
1990  06E9  3A 07 00    	ld	a,(_col + 0x0007)
1991  06EC  4F          	ld	c,a
1992  06ED  80          	add	a, b
1993  06EE  57          	ld	d, a
1994  06EF  3A 07 00    	ld	a,(_lin + 0x0007)
1995  06F2  C5          	push	bc
1996  06F3  5F          	ld	e,a
1997  06F4  D5          	push	de
1998  06F5  CD 00 00    	call	_spr_calc_index
1999  06F8  F1          	pop	af
2000  06F9  C1          	pop	bc
2001  06FA  7D          	ld	a,l
2002  06FB  32 00 00    	ld	(_sprite_curr_index),a
2003  06FE  5F          	ld	e,a
2004  06FF  16 00       	ld	d,0x00
2005  0701  21 00 00    	ld	hl,_scr_map
2006  0704  19          	add	hl,de
2007  0705  7E          	ld	a,(hl)
2008  0706  4F          	ld	c,a
2009  0707  D6 44       	sub	a,0x44
2010  0709  38 05       	jr	C,l_player_check_stairs_00111
2011  070B  3E 47       	ld	a,0x47
2012  070D  91          	sub	a, c
2013  070E  30 04       	jr	NC,l_player_check_stairs_00112
2014  0710              l_player_check_stairs_00111:
2015  0710  0E 00       	ld	c,0x00
2016  0712  18 02       	jr	l_player_check_stairs_00113
2017  0714              l_player_check_stairs_00112:
2018  0714  0E 01       	ld	c,0x01
2019  0716              l_player_check_stairs_00113:
2020  0716  3A 07 00    	ld	a,(_col + 0x0007)
2021  0719  80          	add	a, b
2022  071A  57          	ld	d, a
2023  071B  3A 07 00    	ld	a,(_lin + 0x0007)
2024  071E  C6 0F       	add	a,0x0f
2025  0720  47          	ld	b, a
2026  0721  C5          	push	bc
2027  0722  58          	ld	e,b
2028  0723  D5          	push	de
2029  0724  CD 00 00    	call	_spr_calc_index
2030  0727  F1          	pop	af
2031  0728  C1          	pop	bc
2032  0729  7D          	ld	a,l
2033  072A  32 00 00    	ld	(_sprite_curr_index),a
2034  072D  5F          	ld	e,a
2035  072E  16 00       	ld	d,0x00
2036  0730  21 00 00    	ld	hl,_scr_map
2037  0733  19          	add	hl,de
2038  0734  7E          	ld	a,(hl)
2039  0735  47          	ld	b,a
2040  0736  D6 44       	sub	a,0x44
2041  0738  38 05       	jr	C,l_player_check_stairs_00114
2042  073A  3E 47       	ld	a,0x47
2043  073C  90          	sub	a, b
2044  073D  30 04       	jr	NC,l_player_check_stairs_00115
2045  073F              l_player_check_stairs_00114:
2046  073F  06 00       	ld	b,0x00
2047  0741  18 02       	jr	l_player_check_stairs_00116
2048  0743              l_player_check_stairs_00115:
2049  0743  06 01       	ld	b,0x01
2050  0745              l_player_check_stairs_00116:
2051  0745  79          	ld	a, c
2052  0746  B7          	or	a,a
2053  0747  20 03       	jr	NZ,l_player_check_stairs_00105
2054  0749  B0          	or	a,b
2055  074A  28 13       	jr	Z,l_player_check_stairs_00106
2056  074C              l_player_check_stairs_00105:
2057  074C  21 00 00    	ld	hl,_player_onstair
2058  074F  7E          	ld	a, (hl)
2059  0750  B7          	or	a, a
2060  0751  20 1D       	jr	NZ,l_player_check_stairs_00109
2061  0753  36 01       	ld	(hl),0x01
2062  0755  21 72 00    	ld	hl,0x0072
2063  0758  E5          	push	hl
2064  0759  CD 8C 07    	call	_player_tile
2065  075C  F1          	pop	af
2066  075D  18 11       	jr	l_player_check_stairs_00109
2067  075F              l_player_check_stairs_00106:
2068  075F  21 00 00    	ld	hl,_player_onstair
2069  0762  7E          	ld	a, (hl)
2070  0763  B7          	or	a, a
2071  0764  28 0A       	jr	Z,l_player_check_stairs_00109
2072  0766  36 00       	ld	(hl),0x00
2073  0768  21 60 08    	ld	hl,0x0860
2074  076B  E5          	push	hl
2075  076C  CD 8C 07    	call	_player_tile
2076  076F  F1          	pop	af
2077  0770              l_player_check_stairs_00109:
2078  0770  33          	inc	sp
2079  0771  DD E1       	pop	ix
2080  0773  C9          	ret
2081  0774              	SECTION code_compiler
2082  0774              ;	---------------------------------
2083  0774              ; Function player_anim_stairs
2084  0774              ; ---------------------------------
2085  0774              _player_anim_stairs:
2086  0774  21 00 00    	ld	hl,_player_anim_stair
2087  0777  34          	inc	(hl)
2088  0778  3E 01       	ld	a,0x01
2089  077A  96          	sub	a, (hl)
2090  077B  30 02       	jr	NC,l_player_anim_stairs_00102
2091  077D  36 00       	ld	(hl),0x00
2092  077F              l_player_anim_stairs_00102:
2093  077F  3A 07 00    	ld	a,(_tile + 0x0007)
2094  0782  21 00 00    	ld	hl,_player_anim_stair
2095  0785  86          	add	a, (hl)
2096  0786  C6 04       	add	a,0x04
2097  0788  32 00 00    	ld	(_s_tile1),a
2098  078B  C9          	ret
2099  078C              	SECTION code_compiler
2100  078C              ;	---------------------------------
2101  078C              ; Function player_tile
2102  078C              ; ---------------------------------
2103  078C              _player_tile:
2104  078C  CD 00 00    	call	___sdcc_enter_ix
2105  078F  21 05 00    	ld	hl,0x0005
2106  0792  39          	add	hl, sp
2107  0793  EB          	ex	de,hl
2108  0794  21 04 00    	ld	hl,0x0004
2109  0797  39          	add	hl, sp
2110  0798  4D          	ld	c, l
2111  0799  44          	ld	b, h
2112  079A  D5          	push	de
2113  079B  21 00 00    	ld	hl,_sprite
2114  079E  E5          	push	hl
2115  079F  C5          	push	bc
2116  07A0  CD 00 00    	call	_spr_tile_dir
2117  07A3  F1          	pop	af
2118  07A4  F1          	pop	af
2119  07A5  F1          	pop	af
2120  07A6  7D          	ld	a,l
2121  07A7  32 07 00    	ld	((_tile + 0x0007)),a
2122  07AA  DD E1       	pop	ix
2123  07AC  C9          	ret
2124  07AD              	SECTION code_compiler
2125  07AD              ;	---------------------------------
2126  07AD              ; Function player_check_map
2127  07AD              ; ---------------------------------
2128  07AD              _player_check_map:
2129  07AD  21 07 00    	ld	hl,+(_col + 0x0007)
2130  07B0  56          	ld	d, (hl)
2131  07B1  21 07 00    	ld	hl,+(_lin + 0x0007)
2132  07B4  5E          	ld	e, (hl)
2133  07B5  D5          	push	de
2134  07B6  CD 00 00    	call	_spr_calc_index
2135  07B9  F1          	pop	af
2136  07BA  7D          	ld	a,l
2137  07BB  32 00 00    	ld	(_sprite_curr_index),a
2138  07BE  CD 07 08    	call	_player_pick_item
2139  07C1  21 07 00    	ld	hl,+(_col + 0x0007)
2140  07C4  46          	ld	b, (hl)
2141  07C5  3A 07 00    	ld	a,(_lin + 0x0007)
2142  07C8  E6 0F       	and	a,0x0f
2143  07CA  4F          	ld	c, a
2144  07CB  CB 40       	bit	0, b
2145  07CD  20 10       	jr	NZ,l_player_check_map_00108
2146  07CF  79          	ld	a, c
2147  07D0  B7          	or	a, a
2148  07D1  28 33       	jr	Z,l_player_check_map_00110
2149  07D3  21 00 00    	ld	hl,_sprite_curr_index
2150  07D6  7E          	ld	a, (hl)
2151  07D7  C6 10       	add	a,0x10
2152  07D9  77          	ld	(hl), a
2153  07DA  CD 07 08    	call	_player_pick_item
2154  07DD  18 27       	jr	l_player_check_map_00110
2155  07DF              l_player_check_map_00108:
2156  07DF  21 00 00    	ld	hl,_sprite_curr_index
2157  07E2  46          	ld	b, (hl)
2158  07E3  04          	inc	b
2159  07E4  79          	ld	a, c
2160  07E5  B7          	or	a, a
2161  07E6  20 06       	jr	NZ,l_player_check_map_00105
2162  07E8  70          	ld	(hl), b
2163  07E9  CD 07 08    	call	_player_pick_item
2164  07EC  18 18       	jr	l_player_check_map_00110
2165  07EE              l_player_check_map_00105:
2166  07EE  21 00 00    	ld	hl,_sprite_curr_index
2167  07F1  70          	ld	(hl), b
2168  07F2  CD 07 08    	call	_player_pick_item
2169  07F5  21 00 00    	ld	hl,_sprite_curr_index
2170  07F8  7E          	ld	a, (hl)
2171  07F9  C6 0F       	add	a,0x0f
2172  07FB  77          	ld	(hl), a
2173  07FC  CD 07 08    	call	_player_pick_item
2174  07FF  21 00 00    	ld	hl,_sprite_curr_index
2175  0802  34          	inc	(hl)
2176  0803  CD 07 08    	call	_player_pick_item
2177  0806              l_player_check_map_00110:
2178  0806  C9          	ret
2179  0807              	SECTION code_compiler
2180  0807              ;	---------------------------------
2181  0807              ; Function player_pick_item
2182  0807              ; ---------------------------------
2183  0807              _player_pick_item:
2184  0807  CD 00 00    	call	___sdcc_enter_ix
2185  080A  F5          	push	af
2186  080B  3B          	dec	sp
2187  080C  2A 00 00    	ld	hl,(_sprite_curr_index)
2188  080F  26 00       	ld	h,0x00
2189  0811  01 00 00    	ld	bc,_scr_map
2190  0814  09          	add	hl,bc
2191  0815  7E          	ld	a,(hl)
2192  0816  4D          	ld	c,l
2193  0817  44          	ld	b,h
2194  0818  21 00 00    	ld	hl,_sprite_curr_index
2195  081B  DD 77 FD    	ld	(ix-3),a
2196  081E  D6 24       	sub	a,0x24
2197  0820  3E 00       	ld	a,0x00
2198  0822  17          	rla
2199  0823  DD 77 FF    	ld	(ix-1),a
2200  0826  CB 47       	bit	0,a
2201  0828  C2 B2 09    	jp	NZ, l_player_pick_item_00131
2202  082B  3E 2F       	ld	a,0x2f
2203  082D  DD 96 FD    	sub	a,(ix-3)
2204  0830  3E 00       	ld	a,0x00
2205  0832  17          	rla
2206  0833  DD 77 FE    	ld	(ix-2),a
2207  0836  CB 47       	bit	0,a
2208  0838  C2 B2 09    	jp	NZ, l_player_pick_item_00131
2209  083B  5E          	ld	e, (hl)
2210  083C  16 00       	ld	d,0x00
2211  083E  C5          	push	bc
2212  083F  EB          	ex	de,hl
2213  0840  CD 00 00    	call	_game_match_back
2214  0843  C1          	pop	bc
2215  0844  7D          	ld	a,l
2216  0845  02          	ld	(bc), a
2217  0846  2A 00 00    	ld	hl,(_sprite_curr_index)
2218  0849  26 00       	ld	h,0x00
2219  084B  CD 00 00    	call	_game_obj_set
2220  084E  3A 00 00    	ld	a,(_sprite_curr_index)
2221  0851  07          	rlca
2222  0852  07          	rlca
2223  0853  07          	rlca
2224  0854  07          	rlca
2225  0855  E6 0F       	and	a,0x0f
2226  0857  07          	rlca
2227  0858  07          	rlca
2228  0859  07          	rlca
2229  085A  07          	rlca
2230  085B  E6 F0       	and	a,0xf0
2231  085D  32 00 00    	ld	(_s_lin1),a
2232  0860  3A 00 00    	ld	a,(_sprite_curr_index)
2233  0863  E6 0F       	and	a,0x0f
2234  0865  87          	add	a, a
2235  0866  32 00 00    	ld	(_s_col1),a
2236  0869  21 00 00    	ld	hl,0x0000
2237  086C  E5          	push	hl
2238  086D  21 84 03    	ld	hl,0x0384
2239  0870  E5          	push	hl
2240  0871  2A 00 00    	ld	hl,(_s_lin1)
2241  0874  67          	ld	h,a
2242  0875  E5          	push	hl
2243  0876  CD 00 00    	call	_spr_add_anim
2244  0879  F1          	pop	af
2245  087A  F1          	pop	af
2246  087B  F1          	pop	af
2247  087C  DD CB FF 46 	bit	0,(ix-1)
2248  0880  C2 B2 09    	jp	NZ, l_player_pick_item_00131
2249  0883  DD CB FE 46 	bit	0,(ix-2)
2250  0887  C2 B2 09    	jp	NZ, l_player_pick_item_00131
2251  088A  DD 7E FD    	ld	a,(ix-3)
2252  088D  C6 DC       	add	a,0xdc
2253  088F  4F          	ld	c, a
2254  0890  06 00       	ld	b,0x00
2255  0892  21 99 08    	ld	hl,l_player_pick_item_00177
2256  0895  09          	add	hl, bc
2257  0896  09          	add	hl, bc
2258  0897  09          	add	hl, bc
2259  0898  E9          	jp	(hl)
2260  0899              l_player_pick_item_00177:
2261  0899  C3 BD 08    	jp	l_player_pick_item_00101
2262  089C  C3 CB 08    	jp	l_player_pick_item_00102
2263  089F  C3 D9 08    	jp	l_player_pick_item_00103
2264  08A2  C3 E7 08    	jp	l_player_pick_item_00104
2265  08A5  C3 F5 08    	jp	l_player_pick_item_00105
2266  08A8  C3 22 09    	jp	l_player_pick_item_00109
2267  08AB  C3 3C 09    	jp	l_player_pick_item_00112
2268  08AE  C3 54 09    	jp	l_player_pick_item_00115
2269  08B1  C3 6C 09    	jp	l_player_pick_item_00118
2270  08B4  C3 84 09    	jp	l_player_pick_item_00121
2271  08B7  C3 9C 09    	jp	l_player_pick_item_00124
2272  08BA  C3 16 09    	jp	l_player_pick_item_00108
2273  08BD              l_player_pick_item_00101:
2274  08BD  CD 00 00    	call	_audio_efecto
2275  08C0  21 00 00    	ld	hl,_player_keys
2276  08C3  36 01       	ld	(hl),0x01
2277  08C5  CD 00 00    	call	_game_update_stats
2278  08C8  C3 B2 09    	jp	l_player_pick_item_00131
2279  08CB              l_player_pick_item_00102:
2280  08CB  CD 00 00    	call	_audio_efecto
2281  08CE  21 01 00    	ld	hl, +(_player_keys + 0x0001)
2282  08D1  36 01       	ld	(hl),0x01
2283  08D3  CD 00 00    	call	_game_update_stats
2284  08D6  C3 B2 09    	jp	l_player_pick_item_00131
2285  08D9              l_player_pick_item_00103:
2286  08D9  CD 00 00    	call	_audio_efecto
2287  08DC  21 02 00    	ld	hl, +(_player_keys + 0x0002)
2288  08DF  36 01       	ld	(hl),0x01
2289  08E1  CD 00 00    	call	_game_update_stats
2290  08E4  C3 B2 09    	jp	l_player_pick_item_00131
2291  08E7              l_player_pick_item_00104:
2292  08E7  CD 00 00    	call	_audio_efecto
2293  08EA  21 03 00    	ld	hl, +(_player_keys + 0x0003)
2294  08ED  36 01       	ld	(hl),0x01
2295  08EF  CD 00 00    	call	_game_update_stats
2296  08F2  C3 B2 09    	jp	l_player_pick_item_00131
2297  08F5              l_player_pick_item_00105:
2298  08F5  CD 00 00    	call	_audio_coin
2299  08F8  21 01 00    	ld	hl,0x0001
2300  08FB  CD 68 0C    	call	_player_score_add
2301  08FE  21 00 00    	ld	hl,_player_coins
2302  0901  7E          	ld	a,(hl)
2303  0902  3C          	inc	a
2304  0903  77          	ld	(hl),a
2305  0904  D6 64       	sub	a,0x64
2306  0906  20 08       	jr	NZ,l_player_pick_item_00107
2307  0908  CD 13 06    	call	_player_1up
2308  090B  21 00 00    	ld	hl,_player_coins
2309  090E  36 00       	ld	(hl),0x00
2310  0910              l_player_pick_item_00107:
2311  0910  CD 00 00    	call	_game_update_stats
2312  0913  C3 B2 09    	jp	l_player_pick_item_00131
2313  0916              l_player_pick_item_00108:
2314  0916  CD 00 00    	call	_audio_magic1
2315  0919  21 0A 00    	ld	hl,0x000a
2316  091C  CD 68 0C    	call	_player_score_add
2317  091F  C3 B2 09    	jp	l_player_pick_item_00131
2318  0922              l_player_pick_item_00109:
2319  0922  CD 00 00    	call	_audio_efecto
2320  0925  21 00 00    	ld	hl,_player_str
2321  0928  34          	inc	(hl)
2322  0929  21 00 00    	ld	hl,_player_max_vita
2323  092C  7E          	ld	a, (hl)
2324  092D  D6 C8       	sub	a,0xc8
2325  092F  D2 B2 09    	jp	NC, l_player_pick_item_00131
2326  0932  7E          	ld	a, (hl)
2327  0933  C6 0A       	add	a,0x0a
2328  0935  77          	ld	(hl), a
2329  0936  CD 00 00    	call	_game_update_stats
2330  0939  C3 B2 09    	jp	l_player_pick_item_00131
2331  093C              l_player_pick_item_00112:
2332  093C  CD 00 00    	call	_audio_efecto
2333  093F  21 00 00    	ld	hl,_player_str
2334  0942  34          	inc	(hl)
2335  0943  21 00 00    	ld	hl,_player_max_vita
2336  0946  7E          	ld	a, (hl)
2337  0947  D6 C8       	sub	a,0xc8
2338  0949  30 67       	jr	NC,l_player_pick_item_00131
2339  094B  7E          	ld	a, (hl)
2340  094C  C6 0A       	add	a,0x0a
2341  094E  77          	ld	(hl), a
2342  094F  CD 00 00    	call	_game_update_stats
2343  0952  18 5E       	jr	l_player_pick_item_00131
2344  0954              l_player_pick_item_00115:
2345  0954  CD 00 00    	call	_audio_efecto
2346  0957  21 00 00    	ld	hl,_player_str
2347  095A  34          	inc	(hl)
2348  095B  21 00 00    	ld	hl,_player_max_vita
2349  095E  7E          	ld	a, (hl)
2350  095F  D6 C8       	sub	a,0xc8
2351  0961  30 4F       	jr	NC,l_player_pick_item_00131
2352  0963  7E          	ld	a, (hl)
2353  0964  C6 0A       	add	a,0x0a
2354  0966  77          	ld	(hl), a
2355  0967  CD 00 00    	call	_game_update_stats
2356  096A  18 46       	jr	l_player_pick_item_00131
2357  096C              l_player_pick_item_00118:
2358  096C  CD 00 00    	call	_audio_efecto
2359  096F  21 00 00    	ld	hl,_player_int
2360  0972  34          	inc	(hl)
2361  0973  21 00 00    	ld	hl,_player_max_mana
2362  0976  7E          	ld	a, (hl)
2363  0977  D6 C8       	sub	a,0xc8
2364  0979  30 37       	jr	NC,l_player_pick_item_00131
2365  097B  7E          	ld	a, (hl)
2366  097C  C6 0A       	add	a,0x0a
2367  097E  77          	ld	(hl), a
2368  097F  CD 00 00    	call	_game_update_stats
2369  0982  18 2E       	jr	l_player_pick_item_00131
2370  0984              l_player_pick_item_00121:
2371  0984  CD 00 00    	call	_audio_efecto
2372  0987  21 00 00    	ld	hl,_player_int
2373  098A  34          	inc	(hl)
2374  098B  21 00 00    	ld	hl,_player_max_mana
2375  098E  7E          	ld	a, (hl)
2376  098F  D6 C8       	sub	a,0xc8
2377  0991  30 1F       	jr	NC,l_player_pick_item_00131
2378  0993  7E          	ld	a, (hl)
2379  0994  C6 0A       	add	a,0x0a
2380  0996  77          	ld	(hl), a
2381  0997  CD 00 00    	call	_game_update_stats
2382  099A  18 16       	jr	l_player_pick_item_00131
2383  099C              l_player_pick_item_00124:
2384  099C  CD 00 00    	call	_audio_efecto
2385  099F  21 00 00    	ld	hl,_player_int
2386  09A2  34          	inc	(hl)
2387  09A3  21 00 00    	ld	hl,_player_max_mana
2388  09A6  7E          	ld	a, (hl)
2389  09A7  D6 C8       	sub	a,0xc8
2390  09A9  30 07       	jr	NC,l_player_pick_item_00131
2391  09AB  7E          	ld	a, (hl)
2392  09AC  C6 0A       	add	a,0x0a
2393  09AE  77          	ld	(hl), a
2394  09AF  CD 00 00    	call	_game_update_stats
2395  09B2              l_player_pick_item_00131:
2396  09B2  DD F9       	ld	sp, ix
2397  09B4  DD E1       	pop	ix
2398  09B6  C9          	ret
2399  09B7              	SECTION code_compiler
2400  09B7              ;	---------------------------------
2401  09B7              ; Function player_hit_platform
2402  09B7              ; ---------------------------------
2403  09B7              _player_hit_platform:
2404  09B7  CD 00 00    	call	___sdcc_enter_ix
2405  09BA  3B          	dec	sp
2406  09BB  3A 00 00    	ld	a,(_player_hit_lin)
2407  09BE  B7          	or	a, a
2408  09BF  C2 33 0C    	jp	NZ, l_player_hit_platform_00148
2409  09C2  21 07 00    	ld	hl,+(_lin + 0x0007)
2410  09C5  4E          	ld	c, (hl)
2411  09C6  3E 10       	ld	a,0x10
2412  09C8  91          	sub	a, c
2413  09C9  D2 33 0C    	jp	NC, l_player_hit_platform_00148
2414  09CC  2A 00 00    	ld	hl,(_index1)
2415  09CF  01 00 00    	ld	bc,_scr_map
2416  09D2  09          	add	hl,bc
2417  09D3  7E          	ld	a,(hl)
2418  09D4  FE 45       	cp	a,0x45
2419  09D6  DA 33 0C    	jp	C,l_player_hit_platform_00148
2420  09D9  D6 4D       	sub	a,0x4d
2421  09DB  20 42       	jr	NZ,l_player_hit_platform_00102
2422  09DD  E5          	push	hl
2423  09DE  2A 00 00    	ld	hl,(_index1)
2424  09E1  CD 00 00    	call	_game_match_back
2425  09E4  C1          	pop	bc
2426  09E5  7D          	ld	a,l
2427  09E6  02          	ld	(bc), a
2428  09E7  2A 00 00    	ld	hl,(_index1)
2429  09EA  CD 00 00    	call	_game_obj_set
2430  09ED  CD 00 00    	call	_audio_explosion
2431  09F0  21 00 00    	ld	hl,_index1
2432  09F3  7E          	ld	a, (hl)
2433  09F4  E6 0F       	and	a,0x0f
2434  09F6  87          	add	a, a
2435  09F7  57          	ld	d, a
2436  09F8  4E          	ld	c, (hl)
2437  09F9  23          	inc	hl
2438  09FA  5E          	ld	e, (hl)
2439  09FB  06 04       	ld	b,0x04
2440  09FD  79          	ld	a,c
2441  09FE              l_player_hit_platform_00261:
2442  09FE  CB 3B       	srl	e
2443  0A00  1F          	rra
2444  0A01  10 FB       	djnz	l_player_hit_platform_00261
2445  0A03  07          	rlca
2446  0A04  07          	rlca
2447  0A05  07          	rlca
2448  0A06  07          	rlca
2449  0A07  E6 F0       	and	a,0xf0
2450  0A09  47          	ld	b, a
2451  0A0A  21 00 00    	ld	hl,0x0000
2452  0A0D  E5          	push	hl
2453  0A0E  21 87 03    	ld	hl,0x0387
2454  0A11  E5          	push	hl
2455  0A12  58          	ld	e,b
2456  0A13  D5          	push	de
2457  0A14  CD 00 00    	call	_spr_add_anim
2458  0A17  F1          	pop	af
2459  0A18  F1          	pop	af
2460  0A19  F1          	pop	af
2461  0A1A  2E 01       	ld	l,0x01
2462  0A1C  C3 35 0C    	jp	l_player_hit_platform_00151
2463  0A1F              l_player_hit_platform_00102:
2464  0A1F  2A 00 00    	ld	hl,(_curr_time)
2465  0A22  22 0E 00    	ld	(_spr_timer + 0x000e),hl
2466  0A25  3A 07 00    	ld	a,(_lin + 0x0007)
2467  0A28  06 00       	ld	b,0x00
2468  0A2A  C6 F8       	add	a,0xf8
2469  0A2C  4F          	ld	c, a
2470  0A2D  78          	ld	a, b
2471  0A2E  CE FF       	adc	a,0xff
2472  0A30  5F          	ld	e, a
2473  0A31  06 04       	ld	b,0x04
2474  0A33              l_player_hit_platform_00262:
2475  0A33  CB 2B       	sra	e
2476  0A35  CB 19       	rr	c
2477  0A37  10 FA       	djnz	l_player_hit_platform_00262
2478  0A39  79          	ld	a, c
2479  0A3A  07          	rlca
2480  0A3B  07          	rlca
2481  0A3C  07          	rlca
2482  0A3D  07          	rlca
2483  0A3E  E6 F0       	and	a,0xf0
2484  0A40  C6 08       	add	a,0x08
2485  0A42  32 00 00    	ld	(_player_hit_lin),a
2486  0A45  21 07 00    	ld	hl,+(_col + 0x0007)
2487  0A48  4E          	ld	c, (hl)
2488  0A49  CB 41       	bit	0, c
2489  0A4B  20 06       	jr	NZ,l_player_hit_platform_00113
2490  0A4D  21 00 00    	ld	hl,_player_hit_col
2491  0A50  71          	ld	(hl), c
2492  0A51  18 2D       	jr	l_player_hit_platform_00114
2493  0A53              l_player_hit_platform_00113:
2494  0A53  21 07 00    	ld	hl,+(_state + 0x0007)
2495  0A56  5E          	ld	e, (hl)
2496  0A57  41          	ld	b, c
2497  0A58  04          	inc	b
2498  0A59  0D          	dec	c
2499  0A5A  CB 5B       	bit	3, e
2500  0A5C  28 12       	jr	Z,l_player_hit_platform_00110
2501  0A5E  3A 00 00    	ld	a,(_g_player_hit_right)
2502  0A61  B7          	or	a, a
2503  0A62  28 06       	jr	Z,l_player_hit_platform_00104
2504  0A64  21 00 00    	ld	hl,_player_hit_col
2505  0A67  70          	ld	(hl), b
2506  0A68  18 16       	jr	l_player_hit_platform_00114
2507  0A6A              l_player_hit_platform_00104:
2508  0A6A  21 00 00    	ld	hl,_player_hit_col
2509  0A6D  71          	ld	(hl), c
2510  0A6E  18 10       	jr	l_player_hit_platform_00114
2511  0A70              l_player_hit_platform_00110:
2512  0A70  3A 00 00    	ld	a,(_g_player_hit_left)
2513  0A73  B7          	or	a, a
2514  0A74  28 06       	jr	Z,l_player_hit_platform_00107
2515  0A76  21 00 00    	ld	hl,_player_hit_col
2516  0A79  71          	ld	(hl), c
2517  0A7A  18 04       	jr	l_player_hit_platform_00114
2518  0A7C              l_player_hit_platform_00107:
2519  0A7C  21 00 00    	ld	hl,_player_hit_col
2520  0A7F  70          	ld	(hl), b
2521  0A80              l_player_hit_platform_00114:
2522  0A80  01 00 00    	ld	bc,_scr_map
2523  0A83  2A 00 00    	ld	hl,(_index1)
2524  0A86  09          	add	hl,bc
2525  0A87  7E          	ld	a,(hl)
2526  0A88  FE 58       	cp	a,0x58
2527  0A8A  28 05       	jr	Z,l_player_hit_platform_00141
2528  0A8C  D6 5D       	sub	a,0x5d
2529  0A8E  C2 02 0C    	jp	NZ,l_player_hit_platform_00142
2530  0A91              l_player_hit_platform_00141:
2531  0A91  3A 00 00    	ld	a,(_game_boss)
2532  0A94  B7          	or	a, a
2533  0A95  28 0B       	jr	Z,l_player_hit_platform_00177
2534  0A97  3A 00 00    	ld	a,(_game_mush_count)
2535  0A9A  B7          	or	a, a
2536  0A9B  28 05       	jr	Z,l_player_hit_platform_00177
2537  0A9D  2E 00       	ld	l,0x00
2538  0A9F  C3 35 0C    	jp	l_player_hit_platform_00151
2539  0AA2              l_player_hit_platform_00177:
2540  0AA2  DD 36 FF 00 	ld	(ix-1),0x00
2541  0AA6              l_player_hit_platform_00138:
2542  0AA6  DD 7E FF    	ld	a,(ix-1)
2543  0AA9  D6 07       	sub	a,0x07
2544  0AAB  D2 05 0C    	jp	NC, l_player_hit_platform_00143
2545  0AAE  3E 00       	ld	a, +((_mush_index) & 0xFF)
2546  0AB0  DD 86 FF    	add	a,(ix-1)
2547  0AB3  6F          	ld	l, a
2548  0AB4  3E 00       	ld	a, +((_mush_index) / 256)
2549  0AB6  CE 00       	adc	a,0x00
2550  0AB8  67          	ld	h, a
2551  0AB9  4E          	ld	c, (hl)
2552  0ABA  06 00       	ld	b,0x00
2553  0ABC  2A 00 00    	ld	hl,(_index1)
2554  0ABF  AF          	xor	a,a
2555  0AC0  ED 42       	sbc	hl,bc
2556  0AC2  C2 FC 0B    	jp	NZ,l_player_hit_platform_00137
2557  0AC5  3A 07 00    	ld	a,(_lin + 0x0007)
2558  0AC8  07          	rlca
2559  0AC9  07          	rlca
2560  0ACA  07          	rlca
2561  0ACB  07          	rlca
2562  0ACC  E6 0F       	and	a,0x0f
2563  0ACE  07          	rlca
2564  0ACF  07          	rlca
2565  0AD0  07          	rlca
2566  0AD1  07          	rlca
2567  0AD2  E6 F0       	and	a,0xf0
2568  0AD4  C6 E0       	add	a,0xe0
2569  0AD6  32 00 00    	ld	(_s_lin1),a
2570  0AD9  3A 00 00    	ld	a,(_player_hit_col)
2571  0ADC  CB 3F       	srl	a
2572  0ADE  87          	add	a, a
2573  0ADF  32 00 00    	ld	(_s_col1),a
2574  0AE2  0E 00       	ld	c,0x00
2575  0AE4              l_player_hit_platform_00120:
2576  0AE4  79          	ld	a, c
2577  0AE5  D6 07       	sub	a,0x07
2578  0AE7  30 18       	jr	NC,l_player_hit_platform_00122
2579  0AE9  06 00       	ld	b,0x00
2580  0AEB  21 00 00    	ld	hl,_mush_index
2581  0AEE  09          	add	hl, bc
2582  0AEF  46          	ld	b, (hl)
2583  0AF0  1E 00       	ld	e,0x00
2584  0AF2  21 00 00    	ld	hl,_index1
2585  0AF5  7E          	ld	a, (hl)
2586  0AF6  90          	sub	a, b
2587  0AF7  20 05       	jr	NZ,l_player_hit_platform_00271
2588  0AF9  23          	inc	hl
2589  0AFA  7E          	ld	a, (hl)
2590  0AFB  93          	sub	a, e
2591  0AFC  28 03       	jr	Z,l_player_hit_platform_00122
2592  0AFE              l_player_hit_platform_00271:
2593  0AFE  0C          	inc	c
2594  0AFF  18 E3       	jr	l_player_hit_platform_00120
2595  0B01              l_player_hit_platform_00122:
2596  0B01  06 00       	ld	b,0x00
2597  0B03  21 00 00    	ld	hl,_mush_class
2598  0B06  09          	add	hl, bc
2599  0B07  7E          	ld	a, (hl)
2600  0B08  FE 79       	cp	a,0x79
2601  0B0A  28 16       	jr	Z,l_player_hit_platform_00123
2602  0B0C  FE 7A       	cp	a,0x7a
2603  0B0E  28 25       	jr	Z,l_player_hit_platform_00124
2604  0B10  FE 7B       	cp	a,0x7b
2605  0B12  28 47       	jr	Z,l_player_hit_platform_00126
2606  0B14  FE 7C       	cp	a,0x7c
2607  0B16  28 30       	jr	Z,l_player_hit_platform_00125
2608  0B18  FE 7D       	cp	a,0x7d
2609  0B1A  28 65       	jr	Z,l_player_hit_platform_00128
2610  0B1C  D6 7E       	sub	a,0x7e
2611  0B1E  28 4E       	jr	Z,l_player_hit_platform_00127
2612  0B20  18 70       	jr	l_player_hit_platform_00129
2613  0B22              l_player_hit_platform_00123:
2614  0B22  3A 00 00    	ld	a,(_s_col1)
2615  0B25  21 06 FF    	ld	hl,0xff06
2616  0B28  E5          	push	hl
2617  0B29  2A 00 00    	ld	hl,(_s_lin1)
2618  0B2C  67          	ld	h,a
2619  0B2D  E5          	push	hl
2620  0B2E  CD 00 00    	call	_enemy_init
2621  0B31  F1          	pop	af
2622  0B32  F1          	pop	af
2623  0B33  18 5D       	jr	l_player_hit_platform_00129
2624  0B35              l_player_hit_platform_00124:
2625  0B35  3A 00 00    	ld	a,(_s_col1)
2626  0B38  21 06 01    	ld	hl,0x0106
2627  0B3B  E5          	push	hl
2628  0B3C  2A 00 00    	ld	hl,(_s_lin1)
2629  0B3F  67          	ld	h,a
2630  0B40  E5          	push	hl
2631  0B41  CD 00 00    	call	_enemy_init
2632  0B44  F1          	pop	af
2633  0B45  F1          	pop	af
2634  0B46  18 4A       	jr	l_player_hit_platform_00129
2635  0B48              l_player_hit_platform_00125:
2636  0B48  3A 00 00    	ld	a,(_s_col1)
2637  0B4B  21 07 01    	ld	hl,0x0107
2638  0B4E  E5          	push	hl
2639  0B4F  2A 00 00    	ld	hl,(_s_lin1)
2640  0B52  67          	ld	h,a
2641  0B53  E5          	push	hl
2642  0B54  CD 00 00    	call	_enemy_init
2643  0B57  F1          	pop	af
2644  0B58  F1          	pop	af
2645  0B59  18 37       	jr	l_player_hit_platform_00129
2646  0B5B              l_player_hit_platform_00126:
2647  0B5B  3A 00 00    	ld	a,(_s_col1)
2648  0B5E  21 07 FF    	ld	hl,0xff07
2649  0B61  E5          	push	hl
2650  0B62  2A 00 00    	ld	hl,(_s_lin1)
2651  0B65  67          	ld	h,a
2652  0B66  E5          	push	hl
2653  0B67  CD 00 00    	call	_enemy_init
2654  0B6A  F1          	pop	af
2655  0B6B  F1          	pop	af
2656  0B6C  18 24       	jr	l_player_hit_platform_00129
2657  0B6E              l_player_hit_platform_00127:
2658  0B6E  3A 00 00    	ld	a,(_s_col1)
2659  0B71  21 08 01    	ld	hl,0x0108
2660  0B74  E5          	push	hl
2661  0B75  2A 00 00    	ld	hl,(_s_lin1)
2662  0B78  67          	ld	h,a
2663  0B79  E5          	push	hl
2664  0B7A  CD 00 00    	call	_enemy_init
2665  0B7D  F1          	pop	af
2666  0B7E  F1          	pop	af
2667  0B7F  18 11       	jr	l_player_hit_platform_00129
2668  0B81              l_player_hit_platform_00128:
2669  0B81  3A 00 00    	ld	a,(_s_col1)
2670  0B84  21 08 FF    	ld	hl,0xff08
2671  0B87  E5          	push	hl
2672  0B88  2A 00 00    	ld	hl,(_s_lin1)
2673  0B8B  67          	ld	h,a
2674  0B8C  E5          	push	hl
2675  0B8D  CD 00 00    	call	_enemy_init
2676  0B90  F1          	pop	af
2677  0B91  F1          	pop	af
2678  0B92              l_player_hit_platform_00129:
2679  0B92  CD 00 00    	call	_audio_mushroom
2680  0B95  21 00 00    	ld	hl,_game_mush_count
2681  0B98  34          	inc	(hl)
2682  0B99  3A 00 00    	ld	a,(_game_boss)
2683  0B9C  B7          	or	a, a
2684  0B9D  20 5D       	jr	NZ,l_player_hit_platform_00137
2685  0B9F  3A 00 00    	ld	a,(_index1)
2686  0BA2  C6 F0       	add	a,0xf0
2687  0BA4  32 00 00    	ld	(_index0),a
2688  0BA7  3A 01 00    	ld	a,(_index1 + 1)
2689  0BAA  CE FF       	adc	a,0xff
2690  0BAC  21 01 00    	ld	hl,_index0 + 1
2691  0BAF  77          	ld	(hl), a
2692  0BB0  3E 00       	ld	a, +((_scr_map) & 0xFF)
2693  0BB2  2B          	dec	hl
2694  0BB3  86          	add	a, (hl)
2695  0BB4  4F          	ld	c, a
2696  0BB5  3E 00       	ld	a, +((_scr_map) / 256)
2697  0BB7  23          	inc	hl
2698  0BB8  8E          	adc	a, (hl)
2699  0BB9  47          	ld	b, a
2700  0BBA  C5          	push	bc
2701  0BBB  2B          	dec	hl
2702  0BBC  7E          	ld	a, (hl)
2703  0BBD  23          	inc	hl
2704  0BBE  66          	ld	h, (hl)
2705  0BBF  6F          	ld	l, a
2706  0BC0  CD 00 00    	call	_game_match_back
2707  0BC3  C1          	pop	bc
2708  0BC4  7D          	ld	a,l
2709  0BC5  02          	ld	(bc), a
2710  0BC6  01 00 00    	ld	bc,_scr_map
2711  0BC9  2A 00 00    	ld	hl,(_index1)
2712  0BCC  09          	add	hl,bc
2713  0BCD  7E          	ld	a,(hl)
2714  0BCE  FE 58       	cp	a,0x58
2715  0BD0  4D          	ld	c,l
2716  0BD1  44          	ld	b,h
2717  0BD2  28 04       	jr	Z,l_player_hit_platform_00130
2718  0BD4  D6 5D       	sub	a,0x5d
2719  0BD6  20 05       	jr	NZ,l_player_hit_platform_00131
2720  0BD8              l_player_hit_platform_00130:
2721  0BD8  3E 4F       	ld	a,0x4f
2722  0BDA  02          	ld	(bc), a
2723  0BDB  18 03       	jr	l_player_hit_platform_00132
2724  0BDD              l_player_hit_platform_00131:
2725  0BDD  3E 54       	ld	a,0x54
2726  0BDF  02          	ld	(bc), a
2727  0BE0              l_player_hit_platform_00132:
2728  0BE0  2A 00 00    	ld	hl,(_index1)
2729  0BE3  01 F0 FF    	ld	bc,0xfff0
2730  0BE6  09          	add	hl,bc
2731  0BE7  CD 00 00    	call	_game_obj_set
2732  0BEA  3A 00 00    	ld	a,(_s_lin1)
2733  0BED  C6 10       	add	a,0x10
2734  0BEF  4F          	ld	c, a
2735  0BF0  3A 00 00    	ld	a, (_s_col1)
2736  0BF3  47          	ld	b,a
2737  0BF4  C5          	push	bc
2738  0BF5  3E 4F       	ld	a,0x4f
2739  0BF7  F5          	push	af
2740  0BF8  33          	inc	sp
2741  0BF9  CD 00 00    	call	_NIRVANAP_drawT_callee
2742  0BFC              l_player_hit_platform_00137:
2743  0BFC  DD 34 FF    	inc	(ix-1)
2744  0BFF  C3 A6 0A    	jp	l_player_hit_platform_00138
2745  0C02              l_player_hit_platform_00142:
2746  0C02  CD 00 00    	call	_audio_golpe
2747  0C05              l_player_hit_platform_00143:
2748  0C05  2E 01       	ld	l,0x01
2749  0C07  CD 00 00    	call	_spr_brick_anim
2750  0C0A  2A FF FF    	ld	hl,(_player_hit_col - 1)
2751  0C0D  3A 00 00    	ld	a,(_player_hit_lin)
2752  0C10  6F          	ld	l,a
2753  0C11  E5          	push	hl
2754  0C12  CD 00 00    	call	_spr_calc_index
2755  0C15  F1          	pop	af
2756  0C16  22 00 00    	ld	(_index1),hl
2757  0C19  3E 10       	ld	a,0x10
2758  0C1B  21 00 00    	ld	hl,_index1
2759  0C1E  BE          	cp	a, (hl)
2760  0C1F  3E 00       	ld	a,0x00
2761  0C21  23          	inc	hl
2762  0C22  9E          	sbc	a, (hl)
2763  0C23  30 0A       	jr	NC,l_player_hit_platform_00146
2764  0C25  2B          	dec	hl
2765  0C26  7E          	ld	a, (hl)
2766  0C27  C6 F0       	add	a,0xf0
2767  0C29  32 00 00    	ld	(_sprite_curr_index),a
2768  0C2C  CD 07 08    	call	_player_pick_item
2769  0C2F              l_player_hit_platform_00146:
2770  0C2F  2E 01       	ld	l,0x01
2771  0C31  18 02       	jr	l_player_hit_platform_00151
2772  0C33              l_player_hit_platform_00148:
2773  0C33  2E 00       	ld	l,0x00
2774  0C35              l_player_hit_platform_00151:
2775  0C35  33          	inc	sp
2776  0C36  DD E1       	pop	ix
2777  0C38  C9          	ret
2778  0C39              	SECTION code_compiler
2779  0C39              ;	---------------------------------
2780  0C39              ; Function player_hit_platform_clear
2781  0C39              ; ---------------------------------
2782  0C39              _player_hit_platform_clear:
2783  0C39  3E 04       	ld	a,0x04
2784  0C3B  F5          	push	af
2785  0C3C  33          	inc	sp
2786  0C3D  21 0E 00    	ld	hl, +(_spr_timer + 0x000e)
2787  0C40  E5          	push	hl
2788  0C41  CD 00 00    	call	_game_check_time
2789  0C44  F1          	pop	af
2790  0C45  33          	inc	sp
2791  0C46  7D          	ld	a, l
2792  0C47  B7          	or	a, a
2793  0C48  C8          	ret	Z
2794  0C49  2A FF FF    	ld	hl,(_player_hit_col - 1)
2795  0C4C  3A 00 00    	ld	a,(_player_hit_lin)
2796  0C4F  6F          	ld	l,a
2797  0C50  E5          	push	hl
2798  0C51  CD 00 00    	call	_spr_calc_index
2799  0C54  F1          	pop	af
2800  0C55  22 00 00    	ld	(_index1),hl
2801  0C58  2E 00       	ld	l,0x00
2802  0C5A  CD 00 00    	call	_spr_brick_anim
2803  0C5D  21 00 00    	ld	hl,_player_hit_lin
2804  0C60  36 00       	ld	(hl),0x00
2805  0C62  21 00 00    	ld	hl,_player_hit_col
2806  0C65  36 00       	ld	(hl),0x00
2807  0C67  C9          	ret
2808  0C68              	SECTION code_compiler
2809  0C68              ;	---------------------------------
2810  0C68              ; Function player_score_add
2811  0C68              ; ---------------------------------
2812  0C68              _player_score_add:
2813  0C68  ED 4B 00 00 	ld	bc,(_player_score)
2814  0C6C  09          	add	hl,bc
2815  0C6D  22 00 00    	ld	(_player_score),hl
2816  0C70  21 00 00    	ld	hl,_player_lvl
2817  0C73  7E          	ld	a, (hl)
2818  0C74  D6 0A       	sub	a,0x0a
2819  0C76  30 1A       	jr	NC,l_player_score_add_00104
2820  0C78  01 00 00    	ld	bc,_player_lvl_table+0
2821  0C7B  6E          	ld	l,(hl)
2822  0C7C  26 00       	ld	h,0x00
2823  0C7E  29          	add	hl, hl
2824  0C7F  09          	add	hl, bc
2825  0C80  4E          	ld	c, (hl)
2826  0C81  23          	inc	hl
2827  0C82  46          	ld	b, (hl)
2828  0C83  21 00 00    	ld	hl,_player_score
2829  0C86  7E          	ld	a, (hl)
2830  0C87  91          	sub	a, c
2831  0C88  23          	inc	hl
2832  0C89  7E          	ld	a, (hl)
2833  0C8A  98          	sbc	a, b
2834  0C8B  38 05       	jr	C,l_player_score_add_00104
2835  0C8D  21 00 00    	ld	hl,_game_level_up
2836  0C90  36 01       	ld	(hl),0x01
2837  0C92              l_player_score_add_00104:
2838  0C92  3A 00 00    	ld	a,(_game_score_top)
2839  0C95  21 00 00    	ld	hl,_player_score
2840  0C98  96          	sub	a, (hl)
2841  0C99  3A 01 00    	ld	a,(_game_score_top + 1)
2842  0C9C  23          	inc	hl
2843  0C9D  9E          	sbc	a, (hl)
2844  0C9E  D2 00 00    	jp	NC,_game_print_score
2845  0CA1  2A 00 00    	ld	hl,(_player_score)
2846  0CA4  22 00 00    	ld	(_game_score_top),hl
2847  0CA7  C3 00 00    	jp  _game_print_score
2848  0CAA              	SECTION code_compiler
2849  0CAA              ;	---------------------------------
2850  0CAA              ; Function player_check_floor
2851  0CAA              ; ---------------------------------
2852  0CAA              _player_check_floor:
2853  0CAA  CD 00 00    	call	___sdcc_enter_ix
2854  0CAD  F5          	push	af
2855  0CAE  F5          	push	af
2856  0CAF  F5          	push	af
2857  0CB0  21 07 00    	ld	hl,+(_col + 0x0007)
2858  0CB3  56          	ld	d, (hl)
2859  0CB4  3A 07 00    	ld	a,(_lin + 0x0007)
2860  0CB7  C6 10       	add	a,0x10
2861  0CB9  5F          	ld	e, a
2862  0CBA  D5          	push	de
2863  0CBB  CD 00 00    	call	_spr_calc_index
2864  0CBE  F1          	pop	af
2865  0CBF  DD 75 FC    	ld	(ix-4),l
2866  0CC2  DD 74 FD    	ld	(ix-3),h
2867  0CC5  11 00 00    	ld	de,_scr_map+0
2868  0CC8  7B          	ld	a, e
2869  0CC9  DD 86 FC    	add	a,(ix-4)
2870  0CCC  4F          	ld	c, a
2871  0CCD  7A          	ld	a, d
2872  0CCE  DD 8E FD    	adc	a,(ix-3)
2873  0CD1  47          	ld	b, a
2874  0CD2  0A          	ld	a, (bc)
2875  0CD3  DD 77 FB    	ld	(ix-5),a
2876  0CD6  DD 6E FC    	ld	l,(ix-4)
2877  0CD9  DD 66 FD    	ld	h,(ix-3)
2878  0CDC  23          	inc	hl
2879  0CDD  19          	add	hl,de
2880  0CDE  DD 75 FE    	ld	(ix-2),l
2881  0CE1  DD 74 FF    	ld	(ix-1),h
2882  0CE4  3A 00 00    	ld	a,(_s_lin0)
2883  0CE7  D6 90       	sub	a,0x90
2884  0CE9  20 24       	jr	NZ,l_player_check_floor_00108
2885  0CEB  3A 00 00    	ld	a,(_map_heigth)
2886  0CEE  2A 00 00    	ld	hl,(_scr_curr)
2887  0CF1  C5          	push	bc
2888  0CF2  67          	ld	h,a
2889  0CF3  E5          	push	hl
2890  0CF4  CD 00 00    	call	__divuchar_callee
2891  0CF7  C1          	pop	bc
2892  0CF8  7D          	ld	a,l
2893  0CF9  3C          	inc	a
2894  0CFA  32 00 00    	ld	(_tmp1),a
2895  0CFD  21 00 00    	ld	hl,_map_heigth
2896  0D00  96          	sub	a, (hl)
2897  0D01  30 06       	jr	NC,l_player_check_floor_00102
2898  0D03  DD 36 FB 00 	ld	(ix-5),0x00
2899  0D07  18 1C       	jr	l_player_check_floor_00109
2900  0D09              l_player_check_floor_00102:
2901  0D09  DD 36 FB 48 	ld	(ix-5),0x48
2902  0D0D  18 16       	jr	l_player_check_floor_00109
2903  0D0F              l_player_check_floor_00108:
2904  0D0F  3A 07 00    	ld	a,(_col + 0x0007)
2905  0D12  0F          	rrca
2906  0D13  38 06       	jr	C,l_player_check_floor_00105
2907  0D15  DD 36 FA 00 	ld	(ix-6),0x00
2908  0D19  18 0A       	jr	l_player_check_floor_00109
2909  0D1B              l_player_check_floor_00105:
2910  0D1B  DD 6E FE    	ld	l,(ix-2)
2911  0D1E  DD 66 FF    	ld	h,(ix-1)
2912  0D21  7E          	ld	a, (hl)
2913  0D22  DD 77 FA    	ld	(ix-6),a
2914  0D25              l_player_check_floor_00109:
2915  0D25  DD 7E FB    	ld	a,(ix-5)
2916  0D28  D6 3A       	sub	a,0x3a
2917  0D2A  38 07       	jr	C,l_player_check_floor_00132
2918  0D2C  DD 7E FB    	ld	a,(ix-5)
2919  0D2F  D6 60       	sub	a,0x60
2920  0D31  38 2D       	jr	C,l_player_check_floor_00128
2921  0D33              l_player_check_floor_00132:
2922  0D33  DD 7E FA    	ld	a,(ix-6)
2923  0D36  D6 3A       	sub	a,0x3a
2924  0D38  38 07       	jr	C,l_player_check_floor_00127
2925  0D3A  DD 7E FA    	ld	a,(ix-6)
2926  0D3D  D6 60       	sub	a,0x60
2927  0D3F  38 1F       	jr	C,l_player_check_floor_00128
2928  0D41              l_player_check_floor_00127:
2929  0D41  21 00 00    	ld	hl,_s_state
2930  0D44  CB CE       	set	1, (hl)
2931  0D46  2E 00       	ld	l,0x00
2932  0D48  CD E4 06    	call	_player_check_stairs
2933  0D4B  3A 00 00    	ld	a,(_player_onstair)
2934  0D4E  B7          	or	a, a
2935  0D4F  C2 EC 0D    	jp	NZ, l_player_check_floor_00133
2936  0D52  3A 00 00    	ld	a,(_s_lin0)
2937  0D55  D6 90       	sub	a,0x90
2938  0D57  C2 EC 0D    	jp	NZ,l_player_check_floor_00133
2939  0D5A  CD 00 00    	call	_spr_page_down
2940  0D5D  C3 EC 0D    	jp	l_player_check_floor_00133
2941  0D60              l_player_check_floor_00128:
2942  0D60  C5          	push	bc
2943  0D61  3E 10       	ld	a,0x10
2944  0D63  F5          	push	af
2945  0D64  33          	inc	sp
2946  0D65  21 00 00    	ld	hl,_player_brick_time
2947  0D68  E5          	push	hl
2948  0D69  CD 00 00    	call	_game_check_time
2949  0D6C  F1          	pop	af
2950  0D6D  33          	inc	sp
2951  0D6E  C1          	pop	bc
2952  0D6F  7D          	ld	a,l
2953  0D70  B7          	or	a, a
2954  0D71  CA EC 0D    	jp	Z, l_player_check_floor_00133
2955  0D74  2A 00 00    	ld	hl,(_curr_time)
2956  0D77  22 00 00    	ld	(_player_brick_time),hl
2957  0D7A  DD 7E FB    	ld	a,(ix-5)
2958  0D7D  D6 40       	sub	a,0x40
2959  0D7F  20 12       	jr	NZ,l_player_check_floor_00114
2960  0D81  C5          	push	bc
2961  0D82  DD 6E FC    	ld	l,(ix-4)
2962  0D85  DD 66 FD    	ld	h,(ix-3)
2963  0D88  CD 00 00    	call	_game_match_back
2964  0D8B  C1          	pop	bc
2965  0D8C  7D          	ld	a,l
2966  0D8D  02          	ld	(bc), a
2967  0D8E  C5          	push	bc
2968  0D8F  CD F1 0D    	call	_player_gasta_brick
2969  0D92  C1          	pop	bc
2970  0D93              l_player_check_floor_00114:
2971  0D93  DD 7E FB    	ld	a,(ix-5)
2972  0D96  D6 3F       	sub	a,0x3f
2973  0D98  20 08       	jr	NZ,l_player_check_floor_00116
2974  0D9A  3E 40       	ld	a,0x40
2975  0D9C  02          	ld	(bc), a
2976  0D9D  C5          	push	bc
2977  0D9E  CD F1 0D    	call	_player_gasta_brick
2978  0DA1  C1          	pop	bc
2979  0DA2              l_player_check_floor_00116:
2980  0DA2  DD 7E FB    	ld	a,(ix-5)
2981  0DA5  D6 3E       	sub	a,0x3e
2982  0DA7  20 06       	jr	NZ,l_player_check_floor_00118
2983  0DA9  3E 3F       	ld	a,0x3f
2984  0DAB  02          	ld	(bc), a
2985  0DAC  CD F1 0D    	call	_player_gasta_brick
2986  0DAF              l_player_check_floor_00118:
2987  0DAF  DD 7E FA    	ld	a,(ix-6)
2988  0DB2  D6 40       	sub	a,0x40
2989  0DB4  20 12       	jr	NZ,l_player_check_floor_00120
2990  0DB6  C1          	pop	bc
2991  0DB7  E1          	pop	hl
2992  0DB8  E5          	push	hl
2993  0DB9  C5          	push	bc
2994  0DBA  CD 00 00    	call	_game_match_back
2995  0DBD  4D          	ld	c, l
2996  0DBE  DD 6E FE    	ld	l,(ix-2)
2997  0DC1  DD 66 FF    	ld	h,(ix-1)
2998  0DC4  71          	ld	(hl), c
2999  0DC5  CD F1 0D    	call	_player_gasta_brick
3000  0DC8              l_player_check_floor_00120:
3001  0DC8  DD 7E FA    	ld	a,(ix-6)
3002  0DCB  D6 3F       	sub	a,0x3f
3003  0DCD  20 0B       	jr	NZ,l_player_check_floor_00122
3004  0DCF  DD 6E FE    	ld	l,(ix-2)
3005  0DD2  DD 66 FF    	ld	h,(ix-1)
3006  0DD5  36 40       	ld	(hl),0x40
3007  0DD7  CD F1 0D    	call	_player_gasta_brick
3008  0DDA              l_player_check_floor_00122:
3009  0DDA  DD 7E FA    	ld	a,(ix-6)
3010  0DDD  D6 3E       	sub	a,0x3e
3011  0DDF  20 0B       	jr	NZ,l_player_check_floor_00133
3012  0DE1  DD 6E FE    	ld	l,(ix-2)
3013  0DE4  DD 66 FF    	ld	h,(ix-1)
3014  0DE7  36 3F       	ld	(hl),0x3f
3015  0DE9  CD F1 0D    	call	_player_gasta_brick
3016  0DEC              l_player_check_floor_00133:
3017  0DEC  DD F9       	ld	sp, ix
3018  0DEE  DD E1       	pop	ix
3019  0DF0  C9          	ret
3020  0DF1              	SECTION code_compiler
3021  0DF1              ;	---------------------------------
3022  0DF1              ; Function player_gasta_brick
3023  0DF1              ; ---------------------------------
3024  0DF1              _player_gasta_brick:
3025  0DF1  3A 00 00    	ld	a,(_s_lin0)
3026  0DF4  32 00 00    	ld	(_s_lin1),a
3027  0DF7  3A 00 00    	ld	a,(_s_col0)
3028  0DFA  32 00 00    	ld	(_s_col1),a
3029  0DFD  3A 07 00    	ld	a,(_lin + 0x0007)
3030  0E00  C6 10       	add	a,0x10
3031  0E02  32 00 00    	ld	(_s_lin0),a
3032  0E05  3A 07 00    	ld	a,(_col + 0x0007)
3033  0E08  32 00 00    	ld	(_s_col0),a
3034  0E0B  CD 00 00    	call	_spr_back_repaint
3035  0E0E  3A 00 00    	ld	a,(_s_lin1)
3036  0E11  32 00 00    	ld	(_s_lin0),a
3037  0E14  3A 00 00    	ld	a,(_s_col1)
3038  0E17  32 00 00    	ld	(_s_col0),a
3039  0E1A  C9          	ret
3040  0E1B              	SECTION code_compiler
3041  0E1B              ;	---------------------------------
3042  0E1B              ; Function player_move_jump
3043  0E1B              ; ---------------------------------
3044  0E1B              _player_move_jump:
3045  0E1B  21 00 00    	ld	hl,_game_gravity
3046  0E1E  4E          	ld	c, (hl)
3047  0E1F  21 00 00    	ld	hl,_player_vel_y
3048  0E22  7E          	ld	a, (hl)
3049  0E23  81          	add	a, c
3050  0E24  77          	ld	(hl), a
3051  0E25  3A 00 00    	ld	a,(_player_vel_inc)
3052  0E28  B7          	or	a, a
3053  0E29  28 27       	jr	Z,l_player_move_jump_00106
3054  0E2B  3A 00 00    	ld	a,(_player_vel_y1)
3055  0E2E  21 00 00    	ld	hl,_player_vel_y
3056  0E31  96          	sub	a, (hl)
3057  0E32  E2 37 0E    	jp	PO, l_player_move_jump_00243
3058  0E35  EE 80       	xor	a,0x80
3059  0E37              l_player_move_jump_00243:
3060  0E37  F2 52 0E    	jp	P, l_player_move_jump_00106
3061  0E3A  3A 00 00    	ld	a,(_player_vel_y)
3062  0E3D  CB 7F       	bit	7, a
3063  0E3F  28 11       	jr	Z,l_player_move_jump_00106
3064  0E41  CD F2 01    	call	_player_action_jump
3065  0E44  7D          	ld	a, l
3066  0E45  B7          	or	a, a
3067  0E46  20 0A       	jr	NZ,l_player_move_jump_00106
3068  0E48  21 00 00    	ld	hl,_player_vel_y
3069  0E4B  36 00       	ld	(hl),0x00
3070  0E4D  21 00 00    	ld	hl,_player_vel_inc
3071  0E50  36 00       	ld	(hl),0x00
3072  0E52              l_player_move_jump_00106:
3073  0E52  3E 78       	ld	a,0x78
3074  0E54  21 00 00    	ld	hl,_player_vel_y
3075  0E57  96          	sub	a, (hl)
3076  0E58  E2 5D 0E    	jp	PO, l_player_move_jump_00244
3077  0E5B  EE 80       	xor	a,0x80
3078  0E5D              l_player_move_jump_00244:
3079  0E5D  F2 65 0E    	jp	P, l_player_move_jump_00108
3080  0E60  21 00 00    	ld	hl,_player_vel_y
3081  0E63  36 78       	ld	(hl),0x78
3082  0E65              l_player_move_jump_00108:
3083  0E65  21 00 00    	ld	hl,_player_vel_y
3084  0E68  7E          	ld	a, (hl)
3085  0E69  EE 80       	xor	a,0x80
3086  0E6B  D6 08       	sub	a,0x08
3087  0E6D  30 02       	jr	NC,l_player_move_jump_00110
3088  0E6F  36 88       	ld	(hl),0x88
3089  0E71              l_player_move_jump_00110:
3090  0E71  3A 00 00    	ld	a,(_player_vel_y)
3091  0E74  4F          	ld	c,a
3092  0E75  17          	rla
3093  0E76  9F          	sbc	a, a
3094  0E77  47          	ld	b, a
3095  0E78  CB 41       	bit	0,c
3096  0E7A  21 00 00    	ld	hl,_s_lin1
3097  0E7D  71          	ld	(hl),c
3098  0E7E  28 04       	jr	Z,l_player_move_jump_00112
3099  0E80  21 00 00    	ld	hl,_s_lin1
3100  0E83  35          	dec	(hl)
3101  0E84              l_player_move_jump_00112:
3102  0E84  3A 07 00    	ld	a,(_lin + 0x0007)
3103  0E87  21 00 00    	ld	hl,_s_lin1
3104  0E8A  86          	add	a, (hl)
3105  0E8B  77          	ld	(hl), a
3106  0E8C  CB 78       	bit	7, b
3107  0E8E  28 5A       	jr	Z,l_player_move_jump_00138
3108  0E90  21 00 00    	ld	hl,_s_state
3109  0E93  CD 00 00    	call	_spr_set_up
3110  0E96  3E 90       	ld	a,0x90
3111  0E98  21 00 00    	ld	hl,_s_lin1
3112  0E9B  96          	sub	a, (hl)
3113  0E9C  30 11       	jr	NC,l_player_move_jump_00117
3114  0E9E  CD 00 00    	call	_spr_page_up
3115  0EA1  7D          	ld	a, l
3116  0EA2  B7          	or	a, a
3117  0EA3  28 05       	jr	Z,l_player_move_jump_00114
3118  0EA5  2E 00       	ld	l,0x00
3119  0EA7  C3 A8 0F    	jp	l_player_move_jump_00149
3120  0EAA              l_player_move_jump_00114:
3121  0EAA  21 00 00    	ld	hl,_s_lin1
3122  0EAD  36 00       	ld	(hl),0x00
3123  0EAF              l_player_move_jump_00117:
3124  0EAF  21 07 00    	ld	hl,+(_col + 0x0007)
3125  0EB2  46          	ld	b, (hl)
3126  0EB3  3A 00 00    	ld	a,(_s_lin1)
3127  0EB6  4F          	ld	c,a
3128  0EB7  C5          	push	bc
3129  0EB8  CD 00 00    	call	_game_check_map
3130  0EBB  F1          	pop	af
3131  0EBC  7C          	ld	a,h
3132  0EBD  B5          	or	a,l
3133  0EBE  28 21       	jr	Z,l_player_move_jump_00121
3134  0EC0  CD B7 09    	call	_player_hit_platform
3135  0EC3  7D          	ld	a, l
3136  0EC4  B7          	or	a, a
3137  0EC5  28 12       	jr	Z,l_player_move_jump_00119
3138  0EC7  3A 07 00    	ld	a,(_lin + 0x0007)
3139  0ECA  07          	rlca
3140  0ECB  07          	rlca
3141  0ECC  07          	rlca
3142  0ECD  07          	rlca
3143  0ECE  E6 0F       	and	a,0x0f
3144  0ED0  07          	rlca
3145  0ED1  07          	rlca
3146  0ED2  07          	rlca
3147  0ED3  07          	rlca
3148  0ED4  E6 F0       	and	a,0xf0
3149  0ED6  32 07 00    	ld	((_lin + 0x0007)),a
3150  0ED9              l_player_move_jump_00119:
3151  0ED9  21 00 00    	ld	hl,_player_vel_y
3152  0EDC  36 00       	ld	(hl),0x00
3153  0EDE  C3 69 0F    	jp	l_player_move_jump_00139
3154  0EE1              l_player_move_jump_00121:
3155  0EE1  3A 00 00    	ld	a,(_s_lin1)
3156  0EE4  32 07 00    	ld	((_lin + 0x0007)),a
3157  0EE7  C3 69 0F    	jp	l_player_move_jump_00139
3158  0EEA              l_player_move_jump_00138:
3159  0EEA  21 00 00    	ld	hl,_s_state
3160  0EED  CD 00 00    	call	_spr_set_down
3161  0EF0  3E 90       	ld	a,0x90
3162  0EF2  21 00 00    	ld	hl,_s_lin1
3163  0EF5  96          	sub	a, (hl)
3164  0EF6  30 11       	jr	NC,l_player_move_jump_00127
3165  0EF8  CD 00 00    	call	_spr_page_down
3166  0EFB  7D          	ld	a, l
3167  0EFC  B7          	or	a, a
3168  0EFD  28 05       	jr	Z,l_player_move_jump_00124
3169  0EFF  2E 00       	ld	l,0x00
3170  0F01  C3 A8 0F    	jp	l_player_move_jump_00149
3171  0F04              l_player_move_jump_00124:
3172  0F04  21 00 00    	ld	hl,_s_lin1
3173  0F07  36 90       	ld	(hl),0x90
3174  0F09              l_player_move_jump_00127:
3175  0F09  21 07 00    	ld	hl,+(_col + 0x0007)
3176  0F0C  56          	ld	d, (hl)
3177  0F0D  3A 00 00    	ld	a,(_s_lin1)
3178  0F10  C6 10       	add	a,0x10
3179  0F12  5F          	ld	e, a
3180  0F13  D5          	push	de
3181  0F14  CD 00 00    	call	_game_check_map
3182  0F17  F1          	pop	af
3183  0F18  7C          	ld	a,h
3184  0F19  B5          	or	a,l
3185  0F1A  28 47       	jr	Z,l_player_move_jump_00135
3186  0F1C  2E 00       	ld	l,0x00
3187  0F1E  CD E4 06    	call	_player_check_stairs
3188  0F21  3A 00 00    	ld	a,(_player_onstair)
3189  0F24  B7          	or	a, a
3190  0F25  20 05       	jr	NZ,l_player_move_jump_00129
3191  0F27  2E 01       	ld	l,0x01
3192  0F29  CD E4 06    	call	_player_check_stairs
3193  0F2C              l_player_move_jump_00129:
3194  0F2C  3A 00 00    	ld	a,(_player_onstair)
3195  0F2F  B7          	or	a, a
3196  0F30  20 12       	jr	NZ,l_player_move_jump_00131
3197  0F32  3A 00 00    	ld	a,(_s_lin1)
3198  0F35  07          	rlca
3199  0F36  07          	rlca
3200  0F37  07          	rlca
3201  0F38  07          	rlca
3202  0F39  E6 0F       	and	a,0x0f
3203  0F3B  07          	rlca
3204  0F3C  07          	rlca
3205  0F3D  07          	rlca
3206  0F3E  07          	rlca
3207  0F3F  E6 F0       	and	a,0xf0
3208  0F41  32 07 00    	ld	((_lin + 0x0007)),a
3209  0F44              l_player_move_jump_00131:
3210  0F44  21 00 00    	ld	hl,_player_vel_y
3211  0F47  36 00       	ld	(hl),0x00
3212  0F49  21 00 00    	ld	hl,_s_state
3213  0F4C  7E          	ld	a,(hl)
3214  0F4D  E6 FC       	and	a,+(0xfd&0xfe)
3215  0F4F  77          	ld	(hl),a
3216  0F50  3A 07 00    	ld	a,(_lin + 0x0007)
3217  0F53  D6 90       	sub	a,0x90
3218  0F55  38 03       	jr	C,l_player_move_jump_00133
3219  0F57  CD 00 00    	call	_spr_page_down
3220  0F5A              l_player_move_jump_00133:
3221  0F5A  21 07 00    	ld	hl, +(_colint + 0x0007)
3222  0F5D  36 00       	ld	(hl),0x00
3223  0F5F  2E 01       	ld	l,0x01
3224  0F61  18 45       	jr	l_player_move_jump_00149
3225  0F63              l_player_move_jump_00135:
3226  0F63  3A 00 00    	ld	a,(_s_lin1)
3227  0F66  32 07 00    	ld	((_lin + 0x0007)),a
3228  0F69              l_player_move_jump_00139:
3229  0F69  21 00 00    	ld	hl,_s_state
3230  0F6C  CB 5E       	bit	3,(hl)
3231  0F6E  20 1E       	jr	NZ,l_player_move_jump_00145
3232  0F70  CB 56       	bit	2, (hl)
3233  0F72  20 1A       	jr	NZ,l_player_move_jump_00145
3234  0F74  21 00 00    	ld	hl,_dirs
3235  0F77  CB 56       	bit	2, (hl)
3236  0F79  28 06       	jr	Z,l_player_move_jump_00141
3237  0F7B  21 00 00    	ld	hl,_s_state
3238  0F7E  CD 00 00    	call	_spr_set_left
3239  0F81              l_player_move_jump_00141:
3240  0F81  21 00 00    	ld	hl,_dirs
3241  0F84  CB 5E       	bit	3, (hl)
3242  0F86  28 06       	jr	Z,l_player_move_jump_00145
3243  0F88  21 00 00    	ld	hl,_s_state
3244  0F8B  CD 00 00    	call	_spr_set_right
3245  0F8E              l_player_move_jump_00145:
3246  0F8E  21 00 00    	ld	hl,_player_jump_check
3247  0F91  36 01       	ld	(hl),0x01
3248  0F93  CD 00 00    	call	_spr_move_horizontal
3249  0F96  7D          	ld	a, l
3250  0F97  B7          	or	a, a
3251  0F98  28 07       	jr	Z,l_player_move_jump_00148
3252  0F9A  21 00 00    	ld	hl,_s_state
3253  0F9D  7E          	ld	a,(hl)
3254  0F9E  E6 F3       	and	a,+(0xf7&0xfb)
3255  0FA0  77          	ld	(hl),a
3256  0FA1              l_player_move_jump_00148:
3257  0FA1  21 00 00    	ld	hl,_player_jump_check
3258  0FA4  36 00       	ld	(hl),0x00
3259  0FA6  2E 00       	ld	l,0x00
3260  0FA8              l_player_move_jump_00149:
3261  0FA8  C9          	ret
3262  0FA9              	SECTION code_compiler
3263  0FA9              ;	---------------------------------
3264  0FA9              ; Function player_open_door
3265  0FA9              ; ---------------------------------
3266  0FA9              _player_open_door:
3267  0FA9  CD 00 00    	call	___sdcc_enter_ix
3268  0FAC  0E 00       	ld	c,0x00
3269  0FAE  DD 7E 06    	ld	a,(ix+6)
3270  0FB1  D6 48       	sub	a,0x48
3271  0FB3  28 17       	jr	Z,l_player_open_door_00101
3272  0FB5  DD 7E 06    	ld	a,(ix+6)
3273  0FB8  D6 49       	sub	a,0x49
3274  0FBA  28 1A       	jr	Z,l_player_open_door_00104
3275  0FBC  DD 7E 06    	ld	a,(ix+6)
3276  0FBF  D6 4A       	sub	a,0x4a
3277  0FC1  28 1D       	jr	Z,l_player_open_door_00107
3278  0FC3  DD 7E 06    	ld	a,(ix+6)
3279  0FC6  D6 4B       	sub	a,0x4b
3280  0FC8  28 20       	jr	Z,l_player_open_door_00110
3281  0FCA  18 26       	jr	l_player_open_door_00113
3282  0FCC              l_player_open_door_00101:
3283  0FCC  3A 00 00    	ld	a,(_player_keys)
3284  0FCF  B7          	or	a, a
3285  0FD0  28 20       	jr	Z,l_player_open_door_00113
3286  0FD2  0E 01       	ld	c,0x01
3287  0FD4  18 1C       	jr	l_player_open_door_00113
3288  0FD6              l_player_open_door_00104:
3289  0FD6  3A 01 00    	ld	a,(_player_keys + 0x0001)
3290  0FD9  B7          	or	a, a
3291  0FDA  28 16       	jr	Z,l_player_open_door_00113
3292  0FDC  0E 01       	ld	c,0x01
3293  0FDE  18 12       	jr	l_player_open_door_00113
3294  0FE0              l_player_open_door_00107:
3295  0FE0  3A 02 00    	ld	a,(_player_keys + 0x0002)
3296  0FE3  B7          	or	a, a
3297  0FE4  28 0C       	jr	Z,l_player_open_door_00113
3298  0FE6  0E 01       	ld	c,0x01
3299  0FE8  18 08       	jr	l_player_open_door_00113
3300  0FEA              l_player_open_door_00110:
3301  0FEA  3A 03 00    	ld	a,(_player_keys + 0x0003)
3302  0FED  B7          	or	a, a
3303  0FEE  28 02       	jr	Z,l_player_open_door_00113
3304  0FF0  0E 01       	ld	c,0x01
3305  0FF2              l_player_open_door_00113:
3306  0FF2  79          	ld	a, c
3307  0FF3  B7          	or	a, a
3308  0FF4  20 06       	jr	NZ,l_player_open_door_00114
3309  0FF6  3A 00 00    	ld	a,(_game_inmune)
3310  0FF9  B7          	or	a, a
3311  0FFA  28 23       	jr	Z,l_player_open_door_00115
3312  0FFC              l_player_open_door_00114:
3313  0FFC  CD 00 00    	call	_audio_puerta
3314  0FFF  3E 00       	ld	a, +((_scr_map) & 0xFF)
3315  1001  DD 86 04    	add	a,(ix+4)
3316  1004  4F          	ld	c, a
3317  1005  3E 00       	ld	a, +((_scr_map) / 256)
3318  1007  DD 8E 05    	adc	a,(ix+5)
3319  100A  47          	ld	b, a
3320  100B  AF          	xor	a, a
3321  100C  02          	ld	(bc), a
3322  100D  DD 6E 04    	ld	l,(ix+4)
3323  1010  DD 66 05    	ld	h,(ix+5)
3324  1013  CD 00 00    	call	_game_obj_set
3325  1016  21 04 00    	ld	hl,0x0004
3326  1019  39          	add	hl, sp
3327  101A  CD 00 00    	call	_spr_draw_index
3328  101D  18 03       	jr	l_player_open_door_00118
3329  101F              l_player_open_door_00115:
3330  101F  CD 00 00    	call	_audio_sin_mana
3331  1022              l_player_open_door_00118:
3332  1022  DD E1       	pop	ix
3333  1024  C9          	ret
3334  1025              	SECTION code_compiler
3335  1025              ;	---------------------------------
3336  1025              ; Function player_lost_life
3337  1025              ; ---------------------------------
3338  1025              _player_lost_life:
3339  1025  CD 00 00    	call	___sdcc_enter_ix
3340  1028  3B          	dec	sp
3341  1029  21 00 00    	ld	hl,_player_vita
3342  102C  36 00       	ld	(hl),0x00
3343  102E  CD 00 00    	call	_game_update_stats
3344  1031  3A 07 00    	ld	a,(_lin + 0x0007)
3345  1034  32 00 00    	ld	(_s_lin0),a
3346  1037  3A 07 00    	ld	a,(_col + 0x0007)
3347  103A  32 00 00    	ld	(_s_col0),a
3348  103D  CD 00 00    	call	_spr_init_effects
3349  1040  06 00       	ld	b,0x00
3350  1042              l_player_lost_life_00117:
3351  1042  C5          	push	bc
3352  1043  21 00 00    	ld	hl,0x0000
3353  1046  E5          	push	hl
3354  1047  AF          	xor	a, a
3355  1048  48          	ld	c,b
3356  1049  47          	ld	b,a
3357  104A  C5          	push	bc
3358  104B  CD 00 00    	call	_NIRVANAP_spriteT_callee
3359  104E  C1          	pop	bc
3360  104F  04          	inc	b
3361  1050  3E 07       	ld	a,0x07
3362  1052  90          	sub	a, b
3363  1053  30 ED       	jr	NC,l_player_lost_life_00117
3364  1055  CD 00 00    	call	_ay_reset
3365  1058  CD 00 00    	call	_audio_explosion
3366  105B  3A 00 00    	ld	a,(_s_lin0)
3367  105E  C6 F0       	add	a,0xf0
3368  1060  47          	ld	b, a
3369  1061  3A 00 00    	ld	a,(_s_col0)
3370  1064  21 00 00    	ld	hl,0x0000
3371  1067  E5          	push	hl
3372  1068  21 87 03    	ld	hl,0x0387
3373  106B  E5          	push	hl
3374  106C  48          	ld	c,b
3375  106D  47          	ld	b,a
3376  106E  C5          	push	bc
3377  106F  CD 00 00    	call	_spr_add_anim
3378  1072  F1          	pop	af
3379  1073  F1          	pop	af
3380  1074  F1          	pop	af
3381  1075  21 00 00    	ld	hl,_s_col0
3382  1078  46          	ld	b, (hl)
3383  1079  05          	dec	b
3384  107A  05          	dec	b
3385  107B  3A 00 00    	ld	a,(_s_lin0)
3386  107E  21 00 00    	ld	hl,0x0000
3387  1081  E5          	push	hl
3388  1082  21 87 03    	ld	hl,0x0387
3389  1085  E5          	push	hl
3390  1086  4F          	ld	c,a
3391  1087  C5          	push	bc
3392  1088  CD 00 00    	call	_spr_add_anim
3393  108B  F1          	pop	af
3394  108C  F1          	pop	af
3395  108D  21 00 00    	ld	hl,0x0000
3396  1090  E3          	ex	(sp),hl
3397  1091  3A 00 00    	ld	a,(_s_col0)
3398  1094  21 87 03    	ld	hl,0x0387
3399  1097  E5          	push	hl
3400  1098  2A 00 00    	ld	hl,(_s_lin0)
3401  109B  67          	ld	h,a
3402  109C  E5          	push	hl
3403  109D  CD 00 00    	call	_spr_add_anim
3404  10A0  F1          	pop	af
3405  10A1  F1          	pop	af
3406  10A2  F1          	pop	af
3407  10A3  21 00 00    	ld	hl,_s_col0
3408  10A6  46          	ld	b, (hl)
3409  10A7  04          	inc	b
3410  10A8  04          	inc	b
3411  10A9  3A 00 00    	ld	a,(_s_lin0)
3412  10AC  21 00 00    	ld	hl,0x0000
3413  10AF  E5          	push	hl
3414  10B0  21 87 03    	ld	hl,0x0387
3415  10B3  E5          	push	hl
3416  10B4  4F          	ld	c,a
3417  10B5  C5          	push	bc
3418  10B6  CD 00 00    	call	_spr_add_anim
3419  10B9  F1          	pop	af
3420  10BA  F1          	pop	af
3421  10BB  F1          	pop	af
3422  10BC  3A 00 00    	ld	a,(_s_lin0)
3423  10BF  C6 10       	add	a,0x10
3424  10C1  47          	ld	b, a
3425  10C2  3A 00 00    	ld	a,(_s_col0)
3426  10C5  21 00 00    	ld	hl,0x0000
3427  10C8  E5          	push	hl
3428  10C9  21 87 03    	ld	hl,0x0387
3429  10CC  E5          	push	hl
3430  10CD  48          	ld	c,b
3431  10CE  47          	ld	b,a
3432  10CF  C5          	push	bc
3433  10D0  CD 00 00    	call	_spr_add_anim
3434  10D3  F1          	pop	af
3435  10D4  F1          	pop	af
3436  10D5  F1          	pop	af
3437  10D6  DD 36 FF 01 	ld	(ix-1),0x01
3438  10DA  2A 00 00    	ld	hl,(_curr_time)
3439  10DD  22 00 00    	ld	(_anim_time),hl
3440  10E0              l_player_lost_life_00107:
3441  10E0  DD 7E FF    	ld	a,(ix-1)
3442  10E3  B7          	or	a, a
3443  10E4  28 28       	jr	Z,l_player_lost_life_00109
3444  10E6  3E 0C       	ld	a,0x0c
3445  10E8  F5          	push	af
3446  10E9  33          	inc	sp
3447  10EA  21 00 00    	ld	hl,_anim_time
3448  10ED  E5          	push	hl
3449  10EE  CD 00 00    	call	_game_check_time
3450  10F1  F1          	pop	af
3451  10F2  33          	inc	sp
3452  10F3  7D          	ld	a, l
3453  10F4  B7          	or	a, a
3454  10F5  28 E9       	jr	Z,l_player_lost_life_00107
3455  10F7  2A 00 00    	ld	hl,(_curr_time)
3456  10FA  22 00 00    	ld	(_anim_time),hl
3457  10FD  3A 00 00    	ld	a,(_anim_count)
3458  1100  B7          	or	a,a
3459  1101  28 05       	jr	Z,l_player_lost_life_00103
3460  1103  CD 00 00    	call	_spr_play_anim
3461  1106  18 D8       	jr	l_player_lost_life_00107
3462  1108              l_player_lost_life_00103:
3463  1108  DD 36 FF 00 	ld	(ix-1),0x00
3464  110C  18 D2       	jr	l_player_lost_life_00107
3465  110E              l_player_lost_life_00109:
3466  110E  CD 00 00    	call	_audio_lotr_lose_a_life
3467  1111  3A 00 00    	ld	a,(_game_boss)
3468  1114  B7          	or	a, a
3469  1115  28 0F       	jr	Z,l_player_lost_life_00111
3470  1117  3A 00 00    	ld	a,(_boss_lin)
3471  111A  32 00 00    	ld	(_s_lin1),a
3472  111D  3A 00 00    	ld	a,(_boss_col)
3473  1120  32 00 00    	ld	(_s_col1),a
3474  1123  CD 00 00    	call	_boss_draw
3475  1126              l_player_lost_life_00111:
3476  1126  3A 00 00    	ld	a,(_game_inf_lives)
3477  1129  B7          	or	a, a
3478  112A  20 04       	jr	NZ,l_player_lost_life_00113
3479  112C  21 00 00    	ld	hl,_player_lives
3480  112F  35          	dec	(hl)
3481  1130              l_player_lost_life_00113:
3482  1130  21 00 00    	ld	hl,_player_mana
3483  1133  36 64       	ld	(hl),0x64
3484  1135  21 00 00    	ld	hl,_player_vita
3485  1138  36 64       	ld	(hl),0x64
3486  113A  3A 00 00    	ld	a,(_player_lives)
3487  113D  B7          	or	a, a
3488  113E  28 1D       	jr	Z,l_player_lost_life_00115
3489  1140  21 F4 01    	ld	hl,0x01f4
3490  1143  CD 00 00    	call	_z80_delay_ms_fastcall
3491  1146  3A 00 00    	ld	a,(_game_checkpoint_col)
3492  1149  32 00 00    	ld	(_player_col_scr),a
3493  114C  3A 00 00    	ld	a,(_game_checkpoint_lin)
3494  114F  32 00 00    	ld	(_player_lin_scr),a
3495  1152  3A 00 00    	ld	a,(_game_checkpoint_scr)
3496  1155  32 00 00    	ld	(_scr_curr),a
3497  1158  CD 00 00    	call	_game_round_init
3498  115B  18 0A       	jr	l_player_lost_life_00119
3499  115D              l_player_lost_life_00115:
3500  115D  21 00 00    	ld	hl,_player_lives
3501  1160  36 00       	ld	(hl),0x00
3502  1162  21 00 00    	ld	hl,_game_over
3503  1165  36 01       	ld	(hl),0x01
3504  1167              l_player_lost_life_00119:
3505  1167  33          	inc	sp
3506  1168  DD E1       	pop	ix
3507  116A  C9          	ret
3508  116B              	SECTION code_compiler
3509  116B              ;	---------------------------------
3510  116B              ; Function player_damage
3511  116B              ; ---------------------------------
3512  116B              _player_damage:
3513  116B  7D          	ld	a,l
3514  116C  4D          	ld	c,l
3515  116D  21 00 00    	ld	hl,_player_vita
3516  1170  96          	sub	a, (hl)
3517  1171  30 1F       	jr	NC,l_player_damage_00104
3518  1173  3A 00 00    	ld	a,(_game_inmune)
3519  1176  B7          	or	a, a
3520  1177  20 06       	jr	NZ,l_player_damage_00102
3521  1179  21 00 00    	ld	hl,_player_vita
3522  117C  7E          	ld	a, (hl)
3523  117D  91          	sub	a, c
3524  117E  77          	ld	(hl), a
3525  117F              l_player_damage_00102:
3526  117F  2A 00 00    	ld	hl,(_curr_time)
3527  1182  22 00 00    	ld	(_player_hit_time),hl
3528  1185  21 00 00    	ld	hl,_player_hit
3529  1188  36 01       	ld	(hl),0x01
3530  118A  CD 00 00    	call	_audio_golpe
3531  118D  CD 00 00    	call	_game_update_stats
3532  1190  18 03       	jr	l_player_damage_00106
3533  1192              l_player_damage_00104:
3534  1192  CD 25 10    	call	_player_lost_life
3535  1195              l_player_damage_00106:
3536  1195  C9          	ret
3537  1196              	SECTION IGNORE
3538  0000              
