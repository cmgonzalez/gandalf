1     0000              MODULE game_player_c
2     0000              LINE -1, "game_player.c"
-1    0000              
0     0000              
1     0000              ;--------------------------------------------------------
2     0000              ; File Created by SDCC : free open source ANSI-C Compiler
3     0000              ; Version 3.6.5 #9958 (Mac OS X i386)
4     0000              ;--------------------------------------------------------
5     0000              ; Processed by Z88DK
6     0000              ;--------------------------------------------------------
7     0000              
8     0000              	EXTERN __divschar
9     0000              	EXTERN __divschar_callee
10    0000              	EXTERN __divsint
11    0000              	EXTERN __divsint_callee
12    0000              	EXTERN __divslong
13    0000              	EXTERN __divslong_callee
14    0000              	EXTERN __divslonglong
15    0000              	EXTERN __divslonglong_callee
16    0000              	EXTERN __divsuchar
17    0000              	EXTERN __divsuchar_callee
18    0000              	EXTERN __divuchar
19    0000              	EXTERN __divuchar_callee
20    0000              	EXTERN __divuint
21    0000              	EXTERN __divuint_callee
22    0000              	EXTERN __divulong
23    0000              	EXTERN __divulong_callee
24    0000              	EXTERN __divulonglong
25    0000              	EXTERN __divulonglong_callee
26    0000              	EXTERN __divuschar
27    0000              	EXTERN __divuschar_callee
28    0000              	EXTERN __modschar
29    0000              	EXTERN __modschar_callee
30    0000              	EXTERN __modsint
31    0000              	EXTERN __modsint_callee
32    0000              	EXTERN __modslong
33    0000              	EXTERN __modslong_callee
34    0000              	EXTERN __modslonglong
35    0000              	EXTERN __modslonglong_callee
36    0000              	EXTERN __modsuchar
37    0000              	EXTERN __modsuchar_callee
38    0000              	EXTERN __moduchar
39    0000              	EXTERN __moduchar_callee
40    0000              	EXTERN __moduint
41    0000              	EXTERN __moduint_callee
42    0000              	EXTERN __modulong
43    0000              	EXTERN __modulong_callee
44    0000              	EXTERN __modulonglong
45    0000              	EXTERN __modulonglong_callee
46    0000              	EXTERN __moduschar
47    0000              	EXTERN __moduschar_callee
48    0000              	EXTERN __mulint
49    0000              	EXTERN __mulint_callee
50    0000              	EXTERN __mullong
51    0000              	EXTERN __mullong_callee
52    0000              	EXTERN __mullonglong
53    0000              	EXTERN __mullonglong_callee
54    0000              	EXTERN __mulschar
55    0000              	EXTERN __mulschar_callee
56    0000              	EXTERN __mulsuchar
57    0000              	EXTERN __mulsuchar_callee
58    0000              	EXTERN __muluschar
59    0000              	EXTERN __muluschar_callee
60    0000              	EXTERN __rlslonglong
61    0000              	EXTERN __rlslonglong_callee
62    0000              	EXTERN __rlulonglong
63    0000              	EXTERN __rlulonglong_callee
64    0000              	EXTERN __rrslonglong
65    0000              	EXTERN __rrslonglong_callee
66    0000              	EXTERN __rrulonglong
67    0000              	EXTERN __rrulonglong_callee
68    0000              	EXTERN ___sdcc_call_hl
69    0000              	EXTERN ___sdcc_call_iy
70    0000              	EXTERN ___sdcc_enter_ix
71    0000              	EXTERN _banked_call
72    0000              	EXTERN _banked_ret
73    0000              	EXTERN ___fs2schar
74    0000              	EXTERN ___fs2schar_callee
75    0000              	EXTERN ___fs2sint
76    0000              	EXTERN ___fs2sint_callee
77    0000              	EXTERN ___fs2slong
78    0000              	EXTERN ___fs2slong_callee
79    0000              	EXTERN ___fs2slonglong
80    0000              	EXTERN ___fs2slonglong_callee
81    0000              	EXTERN ___fs2uchar
82    0000              	EXTERN ___fs2uchar_callee
83    0000              	EXTERN ___fs2uint
84    0000              	EXTERN ___fs2uint_callee
85    0000              	EXTERN ___fs2ulong
86    0000              	EXTERN ___fs2ulong_callee
87    0000              	EXTERN ___fs2ulonglong
88    0000              	EXTERN ___fs2ulonglong_callee
89    0000              	EXTERN ___fsadd
90    0000              	EXTERN ___fsadd_callee
91    0000              	EXTERN ___fsdiv
92    0000              	EXTERN ___fsdiv_callee
93    0000              	EXTERN ___fseq
94    0000              	EXTERN ___fseq_callee
95    0000              	EXTERN ___fsgt
96    0000              	EXTERN ___fsgt_callee
97    0000              	EXTERN ___fslt
98    0000              	EXTERN ___fslt_callee
99    0000              	EXTERN ___fsmul
100   0000              	EXTERN ___fsmul_callee
101   0000              	EXTERN ___fsneq
102   0000              	EXTERN ___fsneq_callee
103   0000              	EXTERN ___fssub
104   0000              	EXTERN ___fssub_callee
105   0000              	EXTERN ___schar2fs
106   0000              	EXTERN ___schar2fs_callee
107   0000              	EXTERN ___sint2fs
108   0000              	EXTERN ___sint2fs_callee
109   0000              	EXTERN ___slong2fs
110   0000              	EXTERN ___slong2fs_callee
111   0000              	EXTERN ___slonglong2fs
112   0000              	EXTERN ___slonglong2fs_callee
113   0000              	EXTERN ___uchar2fs
114   0000              	EXTERN ___uchar2fs_callee
115   0000              	EXTERN ___uint2fs
116   0000              	EXTERN ___uint2fs_callee
117   0000              	EXTERN ___ulong2fs
118   0000              	EXTERN ___ulong2fs_callee
119   0000              	EXTERN ___ulonglong2fs
120   0000              	EXTERN ___ulonglong2fs_callee
121   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
122   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
123   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
126   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
127   0000              	EXTERN ____sdcc_4_ldi_save_bc
128   0000              	EXTERN ____sdcc_4_push_hlix
129   0000              	EXTERN ____sdcc_4_push_mhl
130   0000              	EXTERN ____sdcc_lib_setmem_hl
131   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
132   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
133   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
134   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
135   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
136   0000              	EXTERN ____sdcc_ll_add_deix_hlix
137   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
138   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
139   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
140   0000              	EXTERN ____sdcc_ll_asr_hlix_a
141   0000              	EXTERN ____sdcc_ll_asr_mbc_a
142   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
143   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
144   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
145   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
146   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
147   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
148   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
149   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
150   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
151   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
152   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
153   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
155   0000              	EXTERN ____sdcc_ll_push_hlix
156   0000              	EXTERN ____sdcc_ll_push_mhl
157   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
158   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
159   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
160   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
161   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
162   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
163   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
164   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
165   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
166   0000              	EXTERN ____sdcc_load_debc_deix
167   0000              	EXTERN ____sdcc_load_dehl_deix
168   0000              	EXTERN ____sdcc_load_debc_mhl
169   0000              	EXTERN ____sdcc_load_hlde_mhl
170   0000              	EXTERN ____sdcc_store_dehl_bcix
171   0000              	EXTERN ____sdcc_store_debc_hlix
172   0000              	EXTERN ____sdcc_store_debc_mhl
173   0000              	EXTERN ____sdcc_cpu_pop_ei
174   0000              	EXTERN ____sdcc_cpu_pop_ei_jp
175   0000              	EXTERN ____sdcc_cpu_push_di
176   0000              	EXTERN ____sdcc_outi
177   0000              	EXTERN ____sdcc_outi_128
178   0000              	EXTERN ____sdcc_outi_256
179   0000              	EXTERN ____sdcc_ldi
180   0000              	EXTERN ____sdcc_ldi_128
181   0000              	EXTERN ____sdcc_ldi_256
182   0000              	EXTERN ____sdcc_4_copy_srcd_hlix_dst_deix
183   0000              	EXTERN ____sdcc_4_and_src_mbc_mhl_dst_deix
184   0000              	EXTERN ____sdcc_4_or_src_mbc_mhl_dst_deix
185   0000              	EXTERN ____sdcc_4_xor_src_mbc_mhl_dst_deix
186   0000              	EXTERN ____sdcc_4_or_src_dehl_dst_bcix
187   0000              	EXTERN ____sdcc_4_xor_src_dehl_dst_bcix
188   0000              	EXTERN ____sdcc_4_and_src_dehl_dst_bcix
189   0000              	EXTERN ____sdcc_4_xor_src_mbc_mhl_dst_debc
190   0000              	EXTERN ____sdcc_4_or_src_mbc_mhl_dst_debc
191   0000              	EXTERN ____sdcc_4_and_src_mbc_mhl_dst_debc
192   0000              	EXTERN ____sdcc_4_cpl_src_mhl_dst_debc
193   0000              	EXTERN ____sdcc_4_xor_src_debc_mhl_dst_debc
194   0000              	EXTERN ____sdcc_4_or_src_debc_mhl_dst_debc
195   0000              	EXTERN ____sdcc_4_and_src_debc_mhl_dst_debc
196   0000              	EXTERN ____sdcc_4_and_src_debc_hlix_dst_debc
197   0000              	EXTERN ____sdcc_4_or_src_debc_hlix_dst_debc
198   0000              	EXTERN ____sdcc_4_xor_src_debc_hlix_dst_debc
199   0000              
200   0000              ;--------------------------------------------------------
201   0000              ; Public variables in this module
202   0000              ;--------------------------------------------------------
203   0000              	GLOBAL _player_check_map
204   0000              	GLOBAL _player_1up
205   0000              	GLOBAL _player_init
206   0000              	GLOBAL _player_turn
207   0000              	GLOBAL _player_move
208   0000              	GLOBAL _player_check_input
209   0000              	GLOBAL _player_move_input
210   0000              	GLOBAL _player_fix_walk_lin
211   0000              	GLOBAL _player_fire
212   0000              	GLOBAL _player_collision
213   0000              	GLOBAL _player_pick_mushroom
214   0000              	GLOBAL _player_check_stairs_vertical
215   0000              	GLOBAL _player_check_stairs
216   0000              	GLOBAL _player_anim_stairs
217   0000              	GLOBAL _player_tile
218   0000              	GLOBAL _player_pick_item
219   0000              	GLOBAL _player_hit_platform
220   0000              	GLOBAL _player_hit_platform_clear
221   0000              	GLOBAL _player_score_add
222   0000              	GLOBAL _player_check_floor
223   0000              	GLOBAL _player_gasta_brick
224   0000              	GLOBAL _player_move_jump
225   0000              	GLOBAL _player_open_door
226   0000              	GLOBAL _player_lost_life
227   0000              	GLOBAL _player_damage
228   0000              ;--------------------------------------------------------
229   0000              ; Externals used
230   0000              ;--------------------------------------------------------
231   0000              	GLOBAL _ulltoa_callee
232   0000              	GLOBAL _ulltoa
233   0000              	GLOBAL _strtoull_callee
234   0000              	GLOBAL _strtoull
235   0000              	GLOBAL _strtoll_callee
236   0000              	GLOBAL _strtoll
237   0000              	GLOBAL _lltoa_callee
238   0000              	GLOBAL _lltoa
239   0000              	GLOBAL _llabs_callee
240   0000              	GLOBAL _llabs
241   0000              	GLOBAL __lldivu__callee
242   0000              	GLOBAL __lldivu_
243   0000              	GLOBAL __lldiv__callee
244   0000              	GLOBAL __lldiv_
245   0000              	GLOBAL _atoll_callee
246   0000              	GLOBAL _atoll
247   0000              	GLOBAL _realloc_unlocked_callee
248   0000              	GLOBAL _realloc_unlocked
249   0000              	GLOBAL _malloc_unlocked_fastcall
250   0000              	GLOBAL _malloc_unlocked
251   0000              	GLOBAL _free_unlocked_fastcall
252   0000              	GLOBAL _free_unlocked
253   0000              	GLOBAL _calloc_unlocked_callee
254   0000              	GLOBAL _calloc_unlocked
255   0000              	GLOBAL _aligned_alloc_unlocked_callee
256   0000              	GLOBAL _aligned_alloc_unlocked
257   0000              	GLOBAL _realloc_callee
258   0000              	GLOBAL _realloc
259   0000              	GLOBAL _malloc_fastcall
260   0000              	GLOBAL _malloc
261   0000              	GLOBAL _free_fastcall
262   0000              	GLOBAL _free
263   0000              	GLOBAL _calloc_callee
264   0000              	GLOBAL _calloc
265   0000              	GLOBAL _aligned_alloc_callee
266   0000              	GLOBAL _aligned_alloc
267   0000              	GLOBAL _utoa_callee
268   0000              	GLOBAL _utoa
269   0000              	GLOBAL _ultoa_callee
270   0000              	GLOBAL _ultoa
271   0000              	GLOBAL _system_fastcall
272   0000              	GLOBAL _system
273   0000              	GLOBAL _strtoul_callee
274   0000              	GLOBAL _strtoul
275   0000              	GLOBAL _strtol_callee
276   0000              	GLOBAL _strtol
277   0000              	GLOBAL _strtof_callee
278   0000              	GLOBAL _strtof
279   0000              	GLOBAL _strtod_callee
280   0000              	GLOBAL _strtod
281   0000              	GLOBAL _srand_fastcall
282   0000              	GLOBAL _srand
283   0000              	GLOBAL _rand
284   0000              	GLOBAL _quick_exit_fastcall
285   0000              	GLOBAL _quick_exit
286   0000              	GLOBAL _qsort_callee
287   0000              	GLOBAL _qsort
288   0000              	GLOBAL _ltoa_callee
289   0000              	GLOBAL _ltoa
290   0000              	GLOBAL _labs_fastcall
291   0000              	GLOBAL _labs
292   0000              	GLOBAL _itoa_callee
293   0000              	GLOBAL _itoa
294   0000              	GLOBAL _ftoh_callee
295   0000              	GLOBAL _ftoh
296   0000              	GLOBAL _ftog_callee
297   0000              	GLOBAL _ftog
298   0000              	GLOBAL _ftoe_callee
299   0000              	GLOBAL _ftoe
300   0000              	GLOBAL _ftoa_callee
301   0000              	GLOBAL _ftoa
302   0000              	GLOBAL _exit_fastcall
303   0000              	GLOBAL _exit
304   0000              	GLOBAL _dtoh_callee
305   0000              	GLOBAL _dtoh
306   0000              	GLOBAL _dtog_callee
307   0000              	GLOBAL _dtog
308   0000              	GLOBAL _dtoe_callee
309   0000              	GLOBAL _dtoe
310   0000              	GLOBAL _dtoa_callee
311   0000              	GLOBAL _dtoa
312   0000              	GLOBAL _bsearch_callee
313   0000              	GLOBAL _bsearch
314   0000              	GLOBAL _atol_fastcall
315   0000              	GLOBAL _atol
316   0000              	GLOBAL _atoi_fastcall
317   0000              	GLOBAL _atoi
318   0000              	GLOBAL _atof_fastcall
319   0000              	GLOBAL _atof
320   0000              	GLOBAL _atexit_fastcall
321   0000              	GLOBAL _atexit
322   0000              	GLOBAL _at_quick_exit_fastcall
323   0000              	GLOBAL _at_quick_exit
324   0000              	GLOBAL _abs_fastcall
325   0000              	GLOBAL _abs
326   0000              	GLOBAL _abort
327   0000              	GLOBAL __strtou__callee
328   0000              	GLOBAL __strtou_
329   0000              	GLOBAL __strtoi__callee
330   0000              	GLOBAL __strtoi_
331   0000              	GLOBAL __random_uniform_xor_8__fastcall
332   0000              	GLOBAL __random_uniform_xor_8_
333   0000              	GLOBAL __random_uniform_xor_32__fastcall
334   0000              	GLOBAL __random_uniform_xor_32_
335   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
336   0000              	GLOBAL __random_uniform_cmwc_8_
337   0000              	GLOBAL __shellsort__callee
338   0000              	GLOBAL __shellsort_
339   0000              	GLOBAL __quicksort__callee
340   0000              	GLOBAL __quicksort_
341   0000              	GLOBAL __insertion_sort__callee
342   0000              	GLOBAL __insertion_sort_
343   0000              	GLOBAL __ldivu__callee
344   0000              	GLOBAL __ldivu_
345   0000              	GLOBAL __ldiv__callee
346   0000              	GLOBAL __ldiv_
347   0000              	GLOBAL __divu__callee
348   0000              	GLOBAL __divu_
349   0000              	GLOBAL __div__callee
350   0000              	GLOBAL __div_
351   0000              	GLOBAL _NIRVANAP_drawTW_raw_callee
352   0000              	GLOBAL _NIRVANAP_drawTW_raw
353   0000              	GLOBAL _NIRVANAP_drawTW_callee
354   0000              	GLOBAL _NIRVANAP_drawTW
355   0000              	GLOBAL _NIRVANAP_drawW_raw_callee
356   0000              	GLOBAL _NIRVANAP_drawW_raw
357   0000              	GLOBAL _NIRVANAP_drawW_callee
358   0000              	GLOBAL _NIRVANAP_drawW
359   0000              	GLOBAL _NIRVANAP_spriteT_callee
360   0000              	GLOBAL _NIRVANAP_spriteT
361   0000              	GLOBAL _NIRVANAP_fillC_callee
362   0000              	GLOBAL _NIRVANAP_fillC
363   0000              	GLOBAL _NIRVANAP_readC_callee
364   0000              	GLOBAL _NIRVANAP_readC
365   0000              	GLOBAL _NIRVANAP_paintC_callee
366   0000              	GLOBAL _NIRVANAP_paintC
367   0000              	GLOBAL _NIRVANAP_printC_callee
368   0000              	GLOBAL _NIRVANAP_printC
369   0000              	GLOBAL _NIRVANAP_fillT_raw_callee
370   0000              	GLOBAL _NIRVANAP_fillT_raw
371   0000              	GLOBAL _NIRVANAP_fillT_callee
372   0000              	GLOBAL _NIRVANAP_fillT
373   0000              	GLOBAL _NIRVANAP_drawT_raw_callee
374   0000              	GLOBAL _NIRVANAP_drawT_raw
375   0000              	GLOBAL _NIRVANAP_drawT_callee
376   0000              	GLOBAL _NIRVANAP_drawT
377   0000              	GLOBAL _NIRVANAP_stop
378   0000              	GLOBAL _NIRVANAP_start
379   0000              	GLOBAL _debug3
380   0000              	GLOBAL _debug2
381   0000              	GLOBAL _debug
382   0000              	GLOBAL _zx_print_str
383   0000              	GLOBAL _zx_print_int
384   0000              	GLOBAL _zx_print_chr
385   0000              	GLOBAL _zx_print_bonus_time
386   0000              	GLOBAL _zx_isr
387   0000              	GLOBAL _z80_otdr_callee
388   0000              	GLOBAL _z80_otdr
389   0000              	GLOBAL _z80_otir_callee
390   0000              	GLOBAL _z80_otir
391   0000              	GLOBAL _z80_outp_callee
392   0000              	GLOBAL _z80_outp
393   0000              	GLOBAL _z80_indr_callee
394   0000              	GLOBAL _z80_indr
395   0000              	GLOBAL _z80_inir_callee
396   0000              	GLOBAL _z80_inir
397   0000              	GLOBAL _z80_inp_fastcall
398   0000              	GLOBAL _z80_inp
399   0000              	GLOBAL _z80_set_int_state_fastcall
400   0000              	GLOBAL _z80_set_int_state
401   0000              	GLOBAL _z80_get_int_state
402   0000              	GLOBAL _z80_delay_tstate_fastcall
403   0000              	GLOBAL _z80_delay_tstate
404   0000              	GLOBAL _z80_delay_ms_fastcall
405   0000              	GLOBAL _z80_delay_ms
406   0000              	GLOBAL _im2_remove_generic_callback_callee
407   0000              	GLOBAL _im2_remove_generic_callback
408   0000              	GLOBAL _im2_prepend_generic_callback_callee
409   0000              	GLOBAL _im2_prepend_generic_callback
410   0000              	GLOBAL _im2_append_generic_callback_callee
411   0000              	GLOBAL _im2_append_generic_callback
412   0000              	GLOBAL _im2_create_generic_isr_8080_callee
413   0000              	GLOBAL _im2_create_generic_isr_8080
414   0000              	GLOBAL _im2_create_generic_isr_callee
415   0000              	GLOBAL _im2_create_generic_isr
416   0000              	GLOBAL _im2_install_isr_callee
417   0000              	GLOBAL _im2_install_isr
418   0000              	GLOBAL _im2_init_fastcall
419   0000              	GLOBAL _im2_init
420   0000              	GLOBAL _intrinsic_swap_word_32_fastcall
421   0000              	GLOBAL _intrinsic_swap_word_32
422   0000              	GLOBAL _intrinsic_swap_endian_32_fastcall
423   0000              	GLOBAL _intrinsic_swap_endian_32
424   0000              	GLOBAL _intrinsic_swap_endian_16_fastcall
425   0000              	GLOBAL _intrinsic_swap_endian_16
426   0000              	GLOBAL _intrinsic_return_de
427   0000              	GLOBAL _intrinsic_return_bc
428   0000              	GLOBAL _intrinsic_exx
429   0000              	GLOBAL _intrinsic_ex_de_hl
430   0000              	GLOBAL _intrinsic_nop
431   0000              	GLOBAL _intrinsic_im_2
432   0000              	GLOBAL _intrinsic_im_1
433   0000              	GLOBAL _intrinsic_im_0
434   0000              	GLOBAL _intrinsic_retn
435   0000              	GLOBAL _intrinsic_reti
436   0000              	GLOBAL _intrinsic_halt
437   0000              	GLOBAL _intrinsic_ei
438   0000              	GLOBAL _intrinsic_di
439   0000              	GLOBAL _intrinsic_stub
440   0000              	GLOBAL _intrinsic_outi
441   0000              	GLOBAL _intrinsic_ldi
442   0000              	GLOBAL _zx_pattern_fill_callee
443   0000              	GLOBAL _zx_pattern_fill
444   0000              	GLOBAL _zx_saddrpup_fastcall
445   0000              	GLOBAL _zx_saddrpup
446   0000              	GLOBAL _zx_saddrpright_callee
447   0000              	GLOBAL _zx_saddrpright
448   0000              	GLOBAL _zx_saddrpleft_callee
449   0000              	GLOBAL _zx_saddrpleft
450   0000              	GLOBAL _zx_saddrpdown_fastcall
451   0000              	GLOBAL _zx_saddrpdown
452   0000              	GLOBAL _zx_saddrcup_fastcall
453   0000              	GLOBAL _zx_saddrcup
454   0000              	GLOBAL _zx_saddrcright_fastcall
455   0000              	GLOBAL _zx_saddrcright
456   0000              	GLOBAL _zx_saddrcleft_fastcall
457   0000              	GLOBAL _zx_saddrcleft
458   0000              	GLOBAL _zx_saddrcdown_fastcall
459   0000              	GLOBAL _zx_saddrcdown
460   0000              	GLOBAL _zx_saddr2py_fastcall
461   0000              	GLOBAL _zx_saddr2py
462   0000              	GLOBAL _zx_saddr2px_fastcall
463   0000              	GLOBAL _zx_saddr2px
464   0000              	GLOBAL _zx_saddr2cy_fastcall
465   0000              	GLOBAL _zx_saddr2cy
466   0000              	GLOBAL _zx_saddr2cx_fastcall
467   0000              	GLOBAL _zx_saddr2cx
468   0000              	GLOBAL _zx_saddr2aaddr_fastcall
469   0000              	GLOBAL _zx_saddr2aaddr
470   0000              	GLOBAL _zx_py2saddr_fastcall
471   0000              	GLOBAL _zx_py2saddr
472   0000              	GLOBAL _zx_py2aaddr_fastcall
473   0000              	GLOBAL _zx_py2aaddr
474   0000              	GLOBAL _zx_pxy2saddr_callee
475   0000              	GLOBAL _zx_pxy2saddr
476   0000              	GLOBAL _zx_pxy2aaddr_callee
477   0000              	GLOBAL _zx_pxy2aaddr
478   0000              	GLOBAL _zx_px2bitmask_fastcall
479   0000              	GLOBAL _zx_px2bitmask
480   0000              	GLOBAL _zx_cy2saddr_fastcall
481   0000              	GLOBAL _zx_cy2saddr
482   0000              	GLOBAL _zx_cy2aaddr_fastcall
483   0000              	GLOBAL _zx_cy2aaddr
484   0000              	GLOBAL _zx_cxy2saddr_callee
485   0000              	GLOBAL _zx_cxy2saddr
486   0000              	GLOBAL _zx_cxy2aaddr_callee
487   0000              	GLOBAL _zx_cxy2aaddr
488   0000              	GLOBAL _zx_bitmask2px_fastcall
489   0000              	GLOBAL _zx_bitmask2px
490   0000              	GLOBAL _zx_aaddrcup_fastcall
491   0000              	GLOBAL _zx_aaddrcup
492   0000              	GLOBAL _zx_aaddrcright_fastcall
493   0000              	GLOBAL _zx_aaddrcright
494   0000              	GLOBAL _zx_aaddrcleft_fastcall
495   0000              	GLOBAL _zx_aaddrcleft
496   0000              	GLOBAL _zx_aaddrcdown_fastcall
497   0000              	GLOBAL _zx_aaddrcdown
498   0000              	GLOBAL _zx_aaddr2saddr_fastcall
499   0000              	GLOBAL _zx_aaddr2saddr
500   0000              	GLOBAL _zx_aaddr2py_fastcall
501   0000              	GLOBAL _zx_aaddr2py
502   0000              	GLOBAL _zx_aaddr2px_fastcall
503   0000              	GLOBAL _zx_aaddr2px
504   0000              	GLOBAL _zx_aaddr2cy_fastcall
505   0000              	GLOBAL _zx_aaddr2cy
506   0000              	GLOBAL _zx_aaddr2cx_fastcall
507   0000              	GLOBAL _zx_aaddr2cx
508   0000              	GLOBAL _zx_visit_wc_pix_callee
509   0000              	GLOBAL _zx_visit_wc_pix
510   0000              	GLOBAL _zx_visit_wc_attr_callee
511   0000              	GLOBAL _zx_visit_wc_attr
512   0000              	GLOBAL _zx_scroll_wc_up_pix_callee
513   0000              	GLOBAL _zx_scroll_wc_up_pix
514   0000              	GLOBAL _zx_scroll_wc_up_attr_callee
515   0000              	GLOBAL _zx_scroll_wc_up_attr
516   0000              	GLOBAL _zx_scroll_wc_up_callee
517   0000              	GLOBAL _zx_scroll_wc_up
518   0000              	GLOBAL _zx_scroll_up_pix_callee
519   0000              	GLOBAL _zx_scroll_up_pix
520   0000              	GLOBAL _zx_scroll_up_attr_callee
521   0000              	GLOBAL _zx_scroll_up_attr
522   0000              	GLOBAL _zx_scroll_up_callee
523   0000              	GLOBAL _zx_scroll_up
524   0000              	GLOBAL _zx_cls_wc_pix_callee
525   0000              	GLOBAL _zx_cls_wc_pix
526   0000              	GLOBAL _zx_cls_wc_attr_callee
527   0000              	GLOBAL _zx_cls_wc_attr
528   0000              	GLOBAL _zx_cls_wc_callee
529   0000              	GLOBAL _zx_cls_wc
530   0000              	GLOBAL _zx_cls_pix_fastcall
531   0000              	GLOBAL _zx_cls_pix
532   0000              	GLOBAL _zx_cls_attr_fastcall
533   0000              	GLOBAL _zx_cls_attr
534   0000              	GLOBAL _zx_cls_fastcall
535   0000              	GLOBAL _zx_cls
536   0000              	GLOBAL _zx_border_fastcall
537   0000              	GLOBAL _zx_border
538   0000              	GLOBAL _zx_tape_verify_block_callee
539   0000              	GLOBAL _zx_tape_verify_block
540   0000              	GLOBAL _zx_tape_save_block_callee
541   0000              	GLOBAL _zx_tape_save_block
542   0000              	GLOBAL _zx_tape_load_block_callee
543   0000              	GLOBAL _zx_tape_load_block
544   0000              	GLOBAL _spr_destroy
545   0000              	GLOBAL _spr_colision_boss
546   0000              	GLOBAL _spr_colision_b
547   0000              	GLOBAL _spr_unflattenP1
548   0000              	GLOBAL _spr_flatten
549   0000              	GLOBAL _spr_btile_paint_back
550   0000              	GLOBAL _spr_bullet_explode
551   0000              	GLOBAL _spr_init_effects
552   0000              	GLOBAL _spr_turn_horizontal
553   0000              	GLOBAL _spr_bullets_play
554   0000              	GLOBAL _spr_play_anim
555   0000              	GLOBAL _spr_add_anim
556   0000              	GLOBAL _spr_clear_scr
557   0000              	GLOBAL _spr_page_map
558   0000              	GLOBAL _spr_page_down
559   0000              	GLOBAL _spr_page_up
560   0000              	GLOBAL _spr_page_right
561   0000              	GLOBAL _spr_page_left
562   0000              	GLOBAL _spr_tile_paint
563   0000              	GLOBAL _spr_draw_index
564   0000              	GLOBAL _spr_brick_anim
565   0000              	GLOBAL _spr_back_repaint
566   0000              	GLOBAL _spr_tile_dir
567   0000              	GLOBAL _spr_tile
568   0000              	GLOBAL _spr_paint_player
569   0000              	GLOBAL _spr_paint
570   0000              	GLOBAL _spr_move_left
571   0000              	GLOBAL _spr_move_right
572   0000              	GLOBAL _spr_move_horizontal
573   0000              	GLOBAL _spr_move_down
574   0000              	GLOBAL _spr_move_up
575   0000              	GLOBAL _spr_set_right
576   0000              	GLOBAL _spr_set_left
577   0000              	GLOBAL _spr_set_down
578   0000              	GLOBAL _spr_set_up
579   0000              	GLOBAL _spr_calc_index
580   0000              	GLOBAL _spr_chktime
581   0000              	GLOBAL _game_match_back_strict
582   0000              	GLOBAL _game_match_back
583   0000              	GLOBAL _game_attribs
584   0000              	GLOBAL _game_boss_clear
585   0000              	GLOBAL _game_boss_kill
586   0000              	GLOBAL _game_obj_clear
587   0000              	GLOBAL _game_obj_chk
588   0000              	GLOBAL _game_obj_set
589   0000              	GLOBAL _game_shoot_fire_boss
590   0000              	GLOBAL _game_shoot_fire
591   0000              	GLOBAL _game_add_enemy
592   0000              	GLOBAL _game_print_header
593   0000              	GLOBAL _game_check_time
594   0000              	GLOBAL _game_rotate_attrib_osd
595   0000              	GLOBAL _game_rotate_attrib
596   0000              	GLOBAL _game_colour_message
597   0000              	GLOBAL _game_paint_attrib
598   0000              	GLOBAL _game_print_score
599   0000              	GLOBAL _game_check_cell
600   0000              	GLOBAL _game_check_map
601   0000              	GLOBAL _game_loop
602   0000              	GLOBAL _game_round_init
603   0000              	GLOBAL _game_set_checkpoint
604   0000              	GLOBAL _game_start_timer
605   0000              	GLOBAL _game_update_stats
606   0000              	GLOBAL _game_print_footer
607   0000              	GLOBAL _game_fill_row
608   0000              	GLOBAL _game_fps
609   0000              	GLOBAL _game_respawn
610   0000              	GLOBAL _game_draw_screen
611   0000              	GLOBAL _boss_draw_frame
612   0000              	GLOBAL _boss_draw
613   0000              	GLOBAL _boss_turn
614   0000              	GLOBAL _enemy_avoid_dead
615   0000              	GLOBAL _enemy_avoid_fall
616   0000              	GLOBAL _enemy_kill
617   0000              	GLOBAL _enemy_respawn
618   0000              	GLOBAL _enemy_init
619   0000              	GLOBAL _enemy_move
620   0000              	GLOBAL _enemy_turn
621   0000              	GLOBAL _enemy_static
622   0000              	GLOBAL _enemy_walk
623   0000              	GLOBAL _enemy_horizontal
624   0000              	GLOBAL _enemy_vertical
625   0000              	GLOBAL _ay_reset
626   0000              	GLOBAL _ay_song_stop
627   0000              	GLOBAL _ay_song_play
628   0000              	GLOBAL _ay_fx_stop
629   0000              	GLOBAL _ay_fx_play
630   0000              	GLOBAL _ay_is_playing
631   0000              	GLOBAL _audio_menu
632   0000              	GLOBAL _audio_game_end
633   0000              	GLOBAL _audio_level_complete
634   0000              	GLOBAL _audio_level_start
635   0000              	GLOBAL _audio_lotr_lose_a_life
636   0000              	GLOBAL _audio_pierto_abierta
637   0000              	GLOBAL _audio_sin_mana
638   0000              	GLOBAL _audio_magia1
639   0000              	GLOBAL _audio_coin
640   0000              	GLOBAL _audio_golpe
641   0000              	GLOBAL _audio_salto
642   0000              	GLOBAL _audio_efecto
643   0000              	GLOBAL _audio_disparo2
644   0000              	GLOBAL _audio_disparo1
645   0000              	GLOBAL _audio_explosion1
646   0000              	GLOBAL _audio_explosion
647   0000              	GLOBAL _test_func
648   0000              	GLOBAL _test_proc
649   0000              	GLOBAL _in_mouse_kempston_wheel_delta
650   0000              	GLOBAL _in_mouse_kempston_wheel
651   0000              	GLOBAL _in_mouse_kempston_callee
652   0000              	GLOBAL _in_mouse_kempston
653   0000              	GLOBAL _in_mouse_kempston_setpos_callee
654   0000              	GLOBAL _in_mouse_kempston_setpos
655   0000              	GLOBAL _in_mouse_kempston_reset
656   0000              	GLOBAL _in_mouse_kempston_init
657   0000              	GLOBAL _in_mouse_amx_wheel_delta
658   0000              	GLOBAL _in_mouse_amx_wheel
659   0000              	GLOBAL _in_mouse_amx_callee
660   0000              	GLOBAL _in_mouse_amx
661   0000              	GLOBAL _in_mouse_amx_setpos_callee
662   0000              	GLOBAL _in_mouse_amx_setpos
663   0000              	GLOBAL _in_mouse_amx_reset
664   0000              	GLOBAL _in_mouse_amx_init_callee
665   0000              	GLOBAL _in_mouse_amx_init
666   0000              	GLOBAL _in_stick_sinclair2
667   0000              	GLOBAL _in_stick_sinclair1
668   0000              	GLOBAL _in_stick_kempston
669   0000              	GLOBAL _in_stick_fuller
670   0000              	GLOBAL _in_stick_cursor
671   0000              	GLOBAL _in_stick_keyboard_fastcall
672   0000              	GLOBAL _in_stick_keyboard
673   0000              	GLOBAL _in_wait_nokey
674   0000              	GLOBAL _in_wait_key
675   0000              	GLOBAL _in_test_key
676   0000              	GLOBAL _in_pause_fastcall
677   0000              	GLOBAL _in_pause
678   0000              	GLOBAL _in_key_scancode_fastcall
679   0000              	GLOBAL _in_key_scancode
680   0000              	GLOBAL _in_key_pressed_fastcall
681   0000              	GLOBAL _in_key_pressed
682   0000              	GLOBAL _in_inkey
683   0000              	GLOBAL _NIRVANAP_CHAR_TABLE
684   0000              	GLOBAL _NIRVANAP_WIDE_IMAGES
685   0000              	GLOBAL _NIRVANAP_TILE_IMAGES
686   0000              	GLOBAL _NIRVANAP_HOLE
687   0000              	GLOBAL _NIRVANAP_ISR_HOOK
688   0000              	GLOBAL _scan_map
689   0000              	GLOBAL _key_map
690   0000              	GLOBAL _player_lvl_table
691   0000              	GLOBAL _stp_row
692   0000              	GLOBAL _stp_col
693   0000              	GLOBAL _stp_tile
694   0000              	GLOBAL _map_paper_last_a
695   0000              	GLOBAL _map_paper_last
696   0000              	GLOBAL _map_paper_clr
697   0000              	GLOBAL _map_paper
698   0000              	GLOBAL _draw_count
699   0000              	GLOBAL _g_player_hit_right
700   0000              	GLOBAL _g_player_hit_left
701   0000              	GLOBAL _bullet_count
702   0000              	GLOBAL _spr_hack
703   0000              	GLOBAL _boss_stat
704   0000              	GLOBAL _boss_time_fire
705   0000              	GLOBAL _boss_time
706   0000              	GLOBAL _boss_tile
707   0000              	GLOBAL _boss_inc
708   0000              	GLOBAL _boss_col
709   0000              	GLOBAL _boss_lin
710   0000              	GLOBAL _bullet
711   0000              	GLOBAL _bullet_vel
712   0000              	GLOBAL _bullet_frames
713   0000              	GLOBAL _bullet_colint
714   0000              	GLOBAL _bullet_dir
715   0000              	GLOBAL _bullet_tile
716   0000              	GLOBAL _bullet_col
717   0000              	GLOBAL _bullet_lin
718   0000              	GLOBAL _bullet_col0
719   0000              	GLOBAL _bullet_lin0
720   0000              	GLOBAL _bullet_max
721   0000              	GLOBAL _bullet_class
722   0000              	GLOBAL _mush_class
723   0000              	GLOBAL _mush_index
724   0000              	GLOBAL _anim_count
725   0000              	GLOBAL _anim_respanwn
726   0000              	GLOBAL _anim_loop
727   0000              	GLOBAL _anim_end
728   0000              	GLOBAL _anim_int
729   0000              	GLOBAL _anim_tile
730   0000              	GLOBAL _anim_col
731   0000              	GLOBAL _anim_lin
732   0000              	GLOBAL _map_heigth
733   0000              	GLOBAL _map_width
734   0000              	GLOBAL _scr_curr
735   0000              	GLOBAL _sprite_kind
736   0000              	GLOBAL _scr_obj1
737   0000              	GLOBAL _scr_obj0
738   0000              	GLOBAL _scr_map
739   0000              	GLOBAL _sprite_speed_alt
740   0000              	GLOBAL _spr_init
741   0000              	GLOBAL _spr_map_tile
742   0000              	GLOBAL _sprite_frames
743   0000              	GLOBAL _sprite_speed
744   0000              	GLOBAL _screen_ink
745   0000              	GLOBAL _screen_paper
746   0000              	GLOBAL _player_onstair
747   0000              	GLOBAL _game_start_scr
748   0000              	GLOBAL _game_respawn_tile
749   0000              	GLOBAL _game_respawn_index
750   0000              	GLOBAL _game_respawn_time
751   0000              	GLOBAL _game_score_top
752   0000              	GLOBAL _player_coins
753   0000              	GLOBAL _player_lives
754   0000              	GLOBAL _game_over
755   0000              	GLOBAL _game_sound
756   0000              	GLOBAL _game_inf_lives
757   0000              	GLOBAL _game_inmune
758   0000              	GLOBAL _sprite_curr_index
759   0000              	GLOBAL _spr_count
760   0000              	GLOBAL _bullet_time
761   0000              	GLOBAL _anim_time
762   0000              	GLOBAL _frame_time
763   0000              	GLOBAL _curr_time
764   0000              	GLOBAL _s_state
765   0000              	GLOBAL _attrib_osd
766   0000              	GLOBAL _attrib_hl
767   0000              	GLOBAL _attrib
768   0000              	GLOBAL _zx_val_asm
769   0000              	GLOBAL _enemies
770   0000              	GLOBAL _tmp_ui
771   0000              	GLOBAL _tmp_sc
772   0000              	GLOBAL _tmp_uc
773   0000              	GLOBAL _tmp1
774   0000              	GLOBAL _tmp0
775   0000              	GLOBAL _tmp
776   0000              	GLOBAL _index1
777   0000              	GLOBAL _index0
778   0000              	GLOBAL _loop_count
779   0000              	GLOBAL _s_class
780   0000              	GLOBAL _s_col1
781   0000              	GLOBAL _s_col0
782   0000              	GLOBAL _s_lin1
783   0000              	GLOBAL _s_lin0
784   0000              	GLOBAL _s_tile1
785   0000              	GLOBAL _s_tile0
786   0000              	GLOBAL _player_brick_time
787   0000              	GLOBAL _player_hit_count
788   0000              	GLOBAL _game_debug
789   0000              	GLOBAL _sprite_horizontal_check
790   0000              	GLOBAL _sprite_on_air
791   0000              	GLOBAL _sprite
792   0000              	GLOBAL _fps
793   0000              	GLOBAL _menu_curr_sel
794   0000              	GLOBAL _game_2buttons
795   0000              	GLOBAL _game_respawn_curr_time
796   0000              	GLOBAL _game_round_up
797   0000              	GLOBAL _game_mush_count
798   0000              	GLOBAL _game_boss_fix
799   0000              	GLOBAL _game_boss_hit
800   0000              	GLOBAL _game_boss_alive
801   0000              	GLOBAL _game_boss
802   0000              	GLOBAL _game_world
803   0000              	GLOBAL _game_gravity
804   0000              	GLOBAL _player_onfire
805   0000              	GLOBAL _player_anim_stair
806   0000              	GLOBAL _player_hit_time
807   0000              	GLOBAL _game_checkpoint_scr
808   0000              	GLOBAL _game_checkpoint_lin
809   0000              	GLOBAL _game_checkpoint_col
810   0000              	GLOBAL _player_lin_scr
811   0000              	GLOBAL _player_col_scr
812   0000              	GLOBAL _player_lvl
813   0000              	GLOBAL _player_int
814   0000              	GLOBAL _player_str
815   0000              	GLOBAL _player_max_vita
816   0000              	GLOBAL _player_max_mana
817   0000              	GLOBAL _player_vita
818   0000              	GLOBAL _player_mana
819   0000              	GLOBAL _player_keys
820   0000              	GLOBAL _player_vel_inc
821   0000              	GLOBAL _player_vel_y1
822   0000              	GLOBAL _player_vel_y0
823   0000              	GLOBAL _player_vel_y
824   0000              	GLOBAL _player_vel_x
825   0000              	GLOBAL _player_score
826   0000              	GLOBAL _last_time
827   0000              	GLOBAL _spr_timer
828   0000              	GLOBAL _jump_lin
829   0000              	GLOBAL _player_hit_col
830   0000              	GLOBAL _player_hit_lin
831   0000              	GLOBAL _colint
832   0000              	GLOBAL _col
833   0000              	GLOBAL _tbuffer
834   0000              	GLOBAL _lin
835   0000              	GLOBAL _tile
836   0000              	GLOBAL _state_a
837   0000              	GLOBAL _state
838   0000              	GLOBAL _class
839   0000              	GLOBAL _dirs_alt
840   0000              	GLOBAL _dirs
841   0000              	GLOBAL _k2
842   0000              	GLOBAL _k1
843   0000              	GLOBAL _joyfunc2
844   0000              	GLOBAL _joyfunc1
845   0000              	GLOBAL _btiles
846   0000              	GLOBAL _spec128
847   0000              	GLOBAL _GLOBAL_ZX_PORT_7FFD
848   0000              	GLOBAL _GLOBAL_ZX_PORT_1FFD
849   0000              	GLOBAL _GLOBAL_ZX_PORT_FE
850   0000              	GLOBAL _ay_song_06_ciel
851   0000              	GLOBAL _ay_song_04_sunflower
852   0000              	GLOBAL _ay_song_04_lotr_level_start
853   0000              	GLOBAL _ay_song_04_lotr_level_complete
854   0000              	GLOBAL _ay_song_04_lotr_lose_a_life
855   0000              	GLOBAL _ay_song_04_lotr
856   0000              	GLOBAL _ay_fx_06_explosion1
857   0000              	GLOBAL _ay_fx_06_efecto
858   0000              	GLOBAL _ay_fx_06_disparo2
859   0000              	GLOBAL _ay_fx_06_disparo1
860   0000              	GLOBAL _ay_fx_04_sin_mana
861   0000              	GLOBAL _ay_fx_04_salto
862   0000              	GLOBAL _ay_fx_04_pierto_abierta
863   0000              	GLOBAL _ay_fx_04_magia1
864   0000              	GLOBAL _ay_fx_04_golpe
865   0000              	GLOBAL _ay_fx_04_explosion
866   0000              	GLOBAL _ay_fx_04_dano_por_toque
867   0000              	GLOBAL _ay_fx_04_coin
868   0000              	GLOBAL _world0_h
869   0000              	GLOBAL _world0_w
870   0000              	GLOBAL _world0
871   0000              	GLOBAL _paper0
872   0000              	GLOBAL _lenght0
873   0000              	GLOBAL _start_scr0
874   0000              ;--------------------------------------------------------
875   0000              ; special function registers
876   0000              ;--------------------------------------------------------
877   0000              defc _IO_FE	=	0x00fe
878   0000              defc _IO_1FFD	=	0x1ffd
879   0000              defc _IO_7FFD	=	0x7ffd
880   0000              ;--------------------------------------------------------
881   0000              ; ram data
882   0000              ;--------------------------------------------------------
883   0000              	SECTION bss_compiler
884   0000              ;--------------------------------------------------------
885   0000              ; ram data
886   0000              ;--------------------------------------------------------
887   0000              
888   0000              IF 0
889   0000              
890   0000              ; .area _INITIALIZED removed by z88dk
891   0000              
892   0000              
893   0000              ENDIF
894   0000              
895   0000              ;--------------------------------------------------------
896   0000              ; absolute external ram data
897   0000              ;--------------------------------------------------------
898   0000              	SECTION IGNORE
899   0000              ;--------------------------------------------------------
900   0000              ; global & static initialisations
901   0000              ;--------------------------------------------------------
902   0000              	SECTION code_crt_init
903   0000              ;--------------------------------------------------------
904   0000              ; Home
905   0000              ;--------------------------------------------------------
906   0000              	SECTION IGNORE
907   0000              ;--------------------------------------------------------
908   0000              ; code
909   0000              ;--------------------------------------------------------
910   0000              	SECTION code_compiler
911   0000              ;	---------------------------------
912   0000              ; Function player_init
913   0000              ; ---------------------------------
914   0000              _player_init:
915   0000  CD 00 00    	call	___sdcc_enter_ix
916   0003  21 07 00    	ld	hl, +(_class + 0x0007)
917   0006  36 00       	ld	(hl),0x00
918   0008  21 07 00    	ld	hl, +(_tile + 0x0007)
919   000B  DD 7E 06    	ld	a,(ix+6)
920   000E  77          	ld	(hl), a
921   000F  21 07 00    	ld	hl, +(_lin + 0x0007)
922   0012  DD 7E 04    	ld	a,(ix+4)
923   0015  77          	ld	(hl), a
924   0016  21 07 00    	ld	hl, +(_col + 0x0007)
925   0019  DD 7E 05    	ld	a,(ix+5)
926   001C  77          	ld	(hl), a
927   001D  21 07 00    	ld	hl, +(_colint + 0x0007)
928   0020  36 00       	ld	(hl),0x00
929   0022  21 07 00    	ld	hl, +(_state + 0x0007)
930   0025  36 00       	ld	(hl),0x00
931   0027  01 07 00    	ld	bc,_state_a+7
932   002A  AF          	xor	a, a
933   002B  02          	ld	(bc), a
934   002C  21 07 00    	ld	hl, +(_jump_lin + 0x0007)
935   002F  DD 7E 04    	ld	a,(ix+4)
936   0032  77          	ld	(hl), a
937   0033  ED 5B 00 00 	ld	de,(_curr_time)
938   0037  ED 53 0E 00 	ld	(_last_time + 0x000e),de
939   003B  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
940   003E  36 00       	ld	(hl),0x00
941   0040  0A          	ld	a, (bc)
942   0041  F6 11       	or	a,+(0x01|0x10)
943   0043  02          	ld	(bc),a
944   0044  21 00 00    	ld	hl,_player_hit_col
945   0047  36 00       	ld	(hl),0x00
946   0049  21 00 00    	ld	hl,_player_hit_lin
947   004C  36 00       	ld	(hl),0x00
948   004E  21 00 00    	ld	hl,_player_onstair
949   0051  36 00       	ld	(hl),0x00
950   0053  21 00 00    	ld	hl,_player_onfire
951   0056  36 00       	ld	(hl),0x00
952   0058  DD 66 05    	ld	h,(ix+5)
953   005B  DD 6E 04    	ld	l,(ix+4)
954   005E  E5          	push	hl
955   005F  DD 56 06    	ld	d,(ix+6)
956   0062  1E 07       	ld	e,0x07
957   0064  D5          	push	de
958   0065  CD 00 00    	call	_NIRVANAP_spriteT_callee
959   0068  DD E1       	pop	ix
960   006A  C9          	ret
961   006B              	SECTION code_compiler
962   006B              ;	---------------------------------
963   006B              ; Function player_turn
964   006B              ; ---------------------------------
965   006B              _player_turn:
966   006B  21 00 00    	ld	hl,_sprite
967   006E  CD 00 00    	call	_spr_chktime
968   0071  7D          	ld	a, l
969   0072  B7          	or	a, a
970   0073  C8          	ret	Z
971   0074  21 00 00    	ld	hl,_k1
972   0077  E5          	push	hl
973   0078  2A 00 00    	ld	hl,(_joyfunc1)
974   007B  CD 00 00    	call	___sdcc_call_hl
975   007E  F1          	pop	af
976   007F  7D          	ld	a,l
977   0080  32 00 00    	ld	(_dirs),a
978   0083  21 00 00    	ld	hl,_k2
979   0086  E5          	push	hl
980   0087  2A 00 00    	ld	hl,(_joyfunc2)
981   008A  CD 00 00    	call	___sdcc_call_hl
982   008D  F1          	pop	af
983   008E  7D          	ld	a,l
984   008F  32 00 00    	ld	(_dirs_alt),a
985   0092  3A 07 00    	ld	a,(_lin + 0x0007)
986   0095  32 00 00    	ld	(_s_lin0),a
987   0098  3A 07 00    	ld	a,(_col + 0x0007)
988   009B  32 00 00    	ld	(_s_col0),a
989   009E  3A 07 00    	ld	a,(_state + 0x0007)
990   00A1  32 00 00    	ld	(_s_state),a
991   00A4  21 00 00    	ld	hl,_s_class
992   00A7  36 00       	ld	(hl),0x00
993   00A9  CD B6 00    	call	_player_move
994   00AC  CD 8E 03    	call	_player_collision
995   00AF  3A 00 00    	ld	a,(_s_state)
996   00B2  32 07 00    	ld	((_state + 0x0007)),a
997   00B5  C9          	ret
998   00B6              	SECTION code_compiler
999   00B6              ;	---------------------------------
1000  00B6              ; Function player_move
1001  00B6              ; ---------------------------------
1002  00B6              _player_move:
1003  00B6  CD 18 03    	call	_player_fire
1004  00B9  21 00 00    	ld	hl,_s_state
1005  00BC  CB 46       	bit	0, (hl)
1006  00BE  20 07       	jr	NZ,l_player_move_00105
1007  00C0  21 00 00    	ld	hl,_s_state
1008  00C3  CB 4E       	bit	1, (hl)
1009  00C5  28 0A       	jr	Z,l_player_move_00106
1010  00C7              l_player_move_00105:
1011  00C7  21 00 00    	ld	hl,_sprite_on_air
1012  00CA  36 01       	ld	(hl),0x01
1013  00CC  CD F0 0D    	call	_player_move_jump
1014  00CF  18 17       	jr	l_player_move_00107
1015  00D1              l_player_move_00106:
1016  00D1  21 00 00    	ld	hl,_sprite_on_air
1017  00D4  36 00       	ld	(hl),0x00
1018  00D6  3A 00 00    	ld	a,(_player_onfire)
1019  00D9  B7          	or	a, a
1020  00DA  20 03       	jr	NZ,l_player_move_00102
1021  00DC  CD 84 01    	call	_player_move_input
1022  00DF              l_player_move_00102:
1023  00DF  3A 00 00    	ld	a,(_player_onstair)
1024  00E2  B7          	or	a, a
1025  00E3  20 03       	jr	NZ,l_player_move_00107
1026  00E5  CD 70 0C    	call	_player_check_floor
1027  00E8              l_player_move_00107:
1028  00E8  3A 00 00    	ld	a,(_player_onfire)
1029  00EB  B7          	or	a, a
1030  00EC  20 0C       	jr	NZ,l_player_move_00116
1031  00EE  CD 00 00    	call	_spr_paint_player
1032  00F1  7D          	ld	a, l
1033  00F2  B7          	or	a, a
1034  00F3  28 39       	jr	Z,l_player_move_00117
1035  00F5  CD FD 06    	call	_player_check_map
1036  00F8  18 34       	jr	l_player_move_00117
1037  00FA              l_player_move_00116:
1038  00FA  CD 00 00    	call	_spr_back_repaint
1039  00FD  3A 07 00    	ld	a,(_state_a + 0x0007)
1040  0100  CB 67       	bit	4, a
1041  0102  28 10       	jr	Z,l_player_move_00112
1042  0104  21 07 00    	ld	hl,+(_col + 0x0007)
1043  0107  46          	ld	b, (hl)
1044  0108  21 07 00    	ld	hl,+(_lin + 0x0007)
1045  010B  4E          	ld	c, (hl)
1046  010C  C5          	push	bc
1047  010D  21 07 D0    	ld	hl,0xd007
1048  0110  E5          	push	hl
1049  0111  CD 00 00    	call	_NIRVANAP_spriteT_callee
1050  0114              l_player_move_00112:
1051  0114  3A 07 00    	ld	a,(_state_a + 0x0007)
1052  0117  CB 5F       	bit	3, a
1053  0119  28 10       	jr	Z,l_player_move_00114
1054  011B  21 07 00    	ld	hl,+(_col + 0x0007)
1055  011E  56          	ld	d, (hl)
1056  011F  21 07 00    	ld	hl,+(_lin + 0x0007)
1057  0122  5E          	ld	e, (hl)
1058  0123  D5          	push	de
1059  0124  21 07 D1    	ld	hl,0xd107
1060  0127  E5          	push	hl
1061  0128  CD 00 00    	call	_NIRVANAP_spriteT_callee
1062  012B              l_player_move_00114:
1063  012B  CD FD 06    	call	_player_check_map
1064  012E              l_player_move_00117:
1065  012E  3A 00 00    	ld	a,(_player_hit_lin)
1066  0131  B7          	or	a, a
1067  0132  28 03       	jr	Z,l_player_move_00119
1068  0134  CD D4 0B    	call	_player_hit_platform_clear
1069  0137              l_player_move_00119:
1070  0137  2E 00       	ld	l,0x00
1071  0139  C9          	ret
1072  013A              	SECTION code_compiler
1073  013A              ;	---------------------------------
1074  013A              ; Function player_check_input
1075  013A              ; ---------------------------------
1076  013A              _player_check_input:
1077  013A  21 00 00    	ld	hl,_dirs
1078  013D  CB 56       	bit	2, (hl)
1079  013F  28 0C       	jr	Z,l_player_check_input_00102
1080  0141  21 00 00    	ld	hl,_dirs
1081  0144  CB 5E       	bit	3, (hl)
1082  0146  28 05       	jr	Z,l_player_check_input_00102
1083  0148  21 00 00    	ld	hl,_dirs
1084  014B  36 00       	ld	(hl),0x00
1085  014D              l_player_check_input_00102:
1086  014D  21 00 00    	ld	hl,_dirs
1087  0150  7E          	ld	a, (hl)
1088  0151  CB 07       	rlc	a
1089  0153  E6 01       	and	a,0x01
1090  0155  CB 47       	bit	0, a
1091  0157  20 28       	jr	NZ,l_player_check_input_00107
1092  0159  CB 56       	bit	2, (hl)
1093  015B  20 24       	jr	NZ,l_player_check_input_00107
1094  015D  21 00 00    	ld	hl,_dirs
1095  0160  CB 5E       	bit	3, (hl)
1096  0162  20 1D       	jr	NZ,l_player_check_input_00107
1097  0164  21 00 00    	ld	hl,_dirs
1098  0167  CB 46       	bit	0, (hl)
1099  0169  20 16       	jr	NZ,l_player_check_input_00107
1100  016B  21 00 00    	ld	hl,_dirs
1101  016E  CB 4E       	bit	1, (hl)
1102  0170  20 0F       	jr	NZ,l_player_check_input_00107
1103  0172  3A 00 00    	ld	a,(_dirs_alt)
1104  0175  CB 07       	rlc	a
1105  0177  E6 01       	and	a,0x01
1106  0179  CB 47       	bit	0, a
1107  017B  20 04       	jr	NZ,l_player_check_input_00107
1108  017D  2E 00       	ld	l,0x00
1109  017F  18 02       	jr	l_player_check_input_00108
1110  0181              l_player_check_input_00107:
1111  0181  2E 01       	ld	l,0x01
1112  0183              l_player_check_input_00108:
1113  0183  C9          	ret
1114  0184              	SECTION code_compiler
1115  0184              ;	---------------------------------
1116  0184              ; Function player_move_input
1117  0184              ; ---------------------------------
1118  0184              _player_move_input:
1119  0184  CD 3A 01    	call	_player_check_input
1120  0187  7D          	ld	a, l
1121  0188  B7          	or	a, a
1122  0189  CA D8 02    	jp	Z, l_player_move_input_00145
1123  018C  3A 00 00    	ld	a,(_game_2buttons)
1124  018F  B7          	or	a, a
1125  0190  28 07       	jr	Z,l_player_move_input_00102
1126  0192  3A 00 00    	ld	a,(_dirs)
1127  0195  E6 80       	and	a,0x80
1128  0197  18 16       	jr	l_player_move_input_00103
1129  0199              l_player_move_input_00102:
1130  0199  21 00 00    	ld	hl,_dirs
1131  019C  7E          	ld	a, (hl)
1132  019D  CB 07       	rlc	a
1133  019F  E6 01       	and	a,0x01
1134  01A1  CB 47       	bit	0, a
1135  01A3  28 04       	jr	Z,l_player_move_input_00149
1136  01A5  CB 46       	bit	0, (hl)
1137  01A7  20 04       	jr	NZ,l_player_move_input_00150
1138  01A9              l_player_move_input_00149:
1139  01A9  3E 00       	ld	a,0x00
1140  01AB  18 02       	jr	l_player_move_input_00151
1141  01AD              l_player_move_input_00150:
1142  01AD  3E 01       	ld	a,0x01
1143  01AF              l_player_move_input_00151:
1144  01AF              l_player_move_input_00103:
1145  01AF  B7          	or	a, a
1146  01B0  28 37       	jr	Z,l_player_move_input_00105
1147  01B2  21 00 00    	ld	hl,_player_vel_inc
1148  01B5  36 01       	ld	(hl),0x01
1149  01B7  CD 00 00    	call	_audio_salto
1150  01BA  21 00 00    	ld	hl,_player_onstair
1151  01BD  36 00       	ld	(hl),0x00
1152  01BF  21 00 00    	ld	hl,_s_state
1153  01C2  CD 00 00    	call	_spr_set_up
1154  01C5  3A 07 00    	ld	a,(_lin + 0x0007)
1155  01C8  32 07 00    	ld	(_jump_lin+7),a
1156  01CB  3A 00 00    	ld	a,(_s_state)
1157  01CE  32 07 00    	ld	((_state + 0x0007)),a
1158  01D1  21 64 08    	ld	hl,0x0864
1159  01D4  E5          	push	hl
1160  01D5  CD DC 06    	call	_player_tile
1161  01D8  F1          	pop	af
1162  01D9  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
1163  01DC  36 02       	ld	(hl),0x02
1164  01DE  3A 00 00    	ld	a,(_player_vel_y0)
1165  01E1  32 00 00    	ld	(_player_vel_y),a
1166  01E4  2E 01       	ld	l,0x01
1167  01E6  C3 FE 02    	jp	l_player_move_input_00147
1168  01E9              l_player_move_input_00105:
1169  01E9  21 00 00    	ld	hl,_dirs
1170  01EC  CB 5E       	bit	3, (hl)
1171  01EE  28 20       	jr	Z,l_player_move_input_00109
1172  01F0  CD FF 02    	call	_player_fix_walk_lin
1173  01F3  21 00 00    	ld	hl,_s_state
1174  01F6  CD 00 00    	call	_spr_set_right
1175  01F9  01 07 00    	ld	bc,_state_a+7
1176  01FC  0A          	ld	a, (bc)
1177  01FD  F6 10       	or	a,0x10
1178  01FF  E6 F7       	and	a,0xf7
1179  0201  02          	ld	(bc),a
1180  0202  3A 00 00    	ld	a,(_player_onstair)
1181  0205  B7          	or	a, a
1182  0206  28 05       	jr	Z,l_player_move_input_00107
1183  0208  2E 00       	ld	l,0x00
1184  020A  CD 34 06    	call	_player_check_stairs
1185  020D              l_player_move_input_00107:
1186  020D  CD 00 00    	call	_spr_move_horizontal
1187  0210              l_player_move_input_00109:
1188  0210  21 00 00    	ld	hl,_dirs
1189  0213  CB 56       	bit	2, (hl)
1190  0215  28 20       	jr	Z,l_player_move_input_00113
1191  0217  CD FF 02    	call	_player_fix_walk_lin
1192  021A  21 00 00    	ld	hl,_s_state
1193  021D  CD 00 00    	call	_spr_set_left
1194  0220  01 07 00    	ld	bc,_state_a+7
1195  0223  0A          	ld	a, (bc)
1196  0224  F6 08       	or	a,0x08
1197  0226  E6 EF       	and	a,0xef
1198  0228  02          	ld	(bc),a
1199  0229  3A 00 00    	ld	a,(_player_onstair)
1200  022C  B7          	or	a, a
1201  022D  28 05       	jr	Z,l_player_move_input_00111
1202  022F  2E 00       	ld	l,0x00
1203  0231  CD 34 06    	call	_player_check_stairs
1204  0234              l_player_move_input_00111:
1205  0234  CD 00 00    	call	_spr_move_horizontal
1206  0237              l_player_move_input_00113:
1207  0237  21 00 00    	ld	hl,_dirs
1208  023A  CB 46       	bit	0, (hl)
1209  023C  28 39       	jr	Z,l_player_move_input_00125
1210  023E  2E 00       	ld	l,0x00
1211  0240  CD 34 06    	call	_player_check_stairs
1212  0243  3A 00 00    	ld	a,(_player_onstair)
1213  0246  B7          	or	a, a
1214  0247  20 10       	jr	NZ,l_player_move_input_00117
1215  0249  2E 01       	ld	l,0x01
1216  024B  CD 34 06    	call	_player_check_stairs
1217  024E  3A 00 00    	ld	a,(_player_onstair)
1218  0251  B7          	or	a, a
1219  0252  20 05       	jr	NZ,l_player_move_input_00117
1220  0254  2E FE       	ld	l,0xfe
1221  0256  CD 87 05    	call	_player_check_stairs_vertical
1222  0259              l_player_move_input_00117:
1223  0259  3A 00 00    	ld	a,(_player_onstair)
1224  025C  B7          	or	a, a
1225  025D  28 05       	jr	Z,l_player_move_input_00122
1226  025F  CD 00 00    	call	_spr_move_up
1227  0262  18 13       	jr	l_player_move_input_00125
1228  0264              l_player_move_input_00122:
1229  0264  21 00 00    	ld	hl,_dirs
1230  0267  CB 5E       	bit	3, (hl)
1231  0269  20 0C       	jr	NZ,l_player_move_input_00125
1232  026B  21 00 00    	ld	hl,_dirs
1233  026E  CB 56       	bit	2, (hl)
1234  0270  20 05       	jr	NZ,l_player_move_input_00125
1235  0272  2E 00       	ld	l,0x00
1236  0274  C3 FE 02    	jp	l_player_move_input_00147
1237  0277              l_player_move_input_00125:
1238  0277  21 00 00    	ld	hl,_dirs
1239  027A  CB 4E       	bit	1, (hl)
1240  027C  28 38       	jr	Z,l_player_move_input_00137
1241  027E  2E 00       	ld	l,0x00
1242  0280  CD 34 06    	call	_player_check_stairs
1243  0283  3A 00 00    	ld	a,(_player_onstair)
1244  0286  B7          	or	a, a
1245  0287  20 10       	jr	NZ,l_player_move_input_00129
1246  0289  2E 01       	ld	l,0x01
1247  028B  CD 34 06    	call	_player_check_stairs
1248  028E  3A 00 00    	ld	a,(_player_onstair)
1249  0291  B7          	or	a, a
1250  0292  20 05       	jr	NZ,l_player_move_input_00129
1251  0294  2E 12       	ld	l,0x12
1252  0296  CD 87 05    	call	_player_check_stairs_vertical
1253  0299              l_player_move_input_00129:
1254  0299  3A 00 00    	ld	a,(_player_onstair)
1255  029C  B7          	or	a, a
1256  029D  28 05       	jr	Z,l_player_move_input_00134
1257  029F  CD 00 00    	call	_spr_move_down
1258  02A2  18 12       	jr	l_player_move_input_00137
1259  02A4              l_player_move_input_00134:
1260  02A4  21 00 00    	ld	hl,_dirs
1261  02A7  CB 5E       	bit	3, (hl)
1262  02A9  20 0B       	jr	NZ,l_player_move_input_00137
1263  02AB  21 00 00    	ld	hl,_dirs
1264  02AE  CB 56       	bit	2, (hl)
1265  02B0  20 04       	jr	NZ,l_player_move_input_00137
1266  02B2  2E 00       	ld	l,0x00
1267  02B4  18 48       	jr	l_player_move_input_00147
1268  02B6              l_player_move_input_00137:
1269  02B6  3A 00 00    	ld	a,(_s_state)
1270  02B9  32 07 00    	ld	((_state + 0x0007)),a
1271  02BC  3A 00 00    	ld	a,(_player_onstair)
1272  02BF  B7          	or	a, a
1273  02C0  28 0A       	jr	Z,l_player_move_input_00139
1274  02C2  21 72 00    	ld	hl,0x0072
1275  02C5  E5          	push	hl
1276  02C6  CD DC 06    	call	_player_tile
1277  02C9  F1          	pop	af
1278  02CA  18 08       	jr	l_player_move_input_00140
1279  02CC              l_player_move_input_00139:
1280  02CC  21 60 08    	ld	hl,0x0860
1281  02CF  E5          	push	hl
1282  02D0  CD DC 06    	call	_player_tile
1283  02D3  F1          	pop	af
1284  02D4              l_player_move_input_00140:
1285  02D4  2E 01       	ld	l,0x01
1286  02D6  18 26       	jr	l_player_move_input_00147
1287  02D8              l_player_move_input_00145:
1288  02D8  21 07 00    	ld	hl, +(_colint + 0x0007)
1289  02DB  36 00       	ld	(hl),0x00
1290  02DD  3A 00 00    	ld	a,(_player_onstair)
1291  02E0  B7          	or	a, a
1292  02E1  28 0A       	jr	Z,l_player_move_input_00142
1293  02E3  21 72 00    	ld	hl,0x0072
1294  02E6  E5          	push	hl
1295  02E7  CD DC 06    	call	_player_tile
1296  02EA  F1          	pop	af
1297  02EB  18 08       	jr	l_player_move_input_00143
1298  02ED              l_player_move_input_00142:
1299  02ED  21 70 01    	ld	hl,0x0170
1300  02F0  E5          	push	hl
1301  02F1  CD DC 06    	call	_player_tile
1302  02F4  F1          	pop	af
1303  02F5              l_player_move_input_00143:
1304  02F5  21 00 00    	ld	hl,_s_state
1305  02F8  7E          	ld	a,(hl)
1306  02F9  E6 F3       	and	a,+(0xf7&0xfb)
1307  02FB  77          	ld	(hl),a
1308  02FC  2E 00       	ld	l,0x00
1309  02FE              l_player_move_input_00147:
1310  02FE  C9          	ret
1311  02FF              	SECTION code_compiler
1312  02FF              ;	---------------------------------
1313  02FF              ; Function player_fix_walk_lin
1314  02FF              ; ---------------------------------
1315  02FF              _player_fix_walk_lin:
1316  02FF  3A 00 00    	ld	a,(_player_onstair)
1317  0302  B7          	or	a, a
1318  0303  C0          	ret	NZ
1319  0304  01 07 00    	ld	bc,_lin+7
1320  0307  3A 00 00    	ld	a,(_s_lin0)
1321  030A  07          	rlca
1322  030B  07          	rlca
1323  030C  07          	rlca
1324  030D  07          	rlca
1325  030E  E6 0F       	and	a,0x0f
1326  0310  07          	rlca
1327  0311  07          	rlca
1328  0312  07          	rlca
1329  0313  07          	rlca
1330  0314  E6 F0       	and	a,0xf0
1331  0316  02          	ld	(bc), a
1332  0317  C9          	ret
1333  0318              	SECTION code_compiler
1334  0318              ;	---------------------------------
1335  0318              ; Function player_fire
1336  0318              ; ---------------------------------
1337  0318              _player_fire:
1338  0318  CD 00 00    	call	___sdcc_enter_ix
1339  031B  3B          	dec	sp
1340  031C  21 00 00    	ld	hl,_player_onfire
1341  031F  36 00       	ld	(hl),0x00
1342  0321  3A 00 00    	ld	a,(_game_2buttons)
1343  0324  B7          	or	a, a
1344  0325  28 0A       	jr	Z,l_player_fire_00102
1345  0327  3A 00 00    	ld	a,(_dirs_alt)
1346  032A  E6 80       	and	a,0x80
1347  032C  32 00 00    	ld	(_player_onfire),a
1348  032F  18 1A       	jr	l_player_fire_00103
1349  0331              l_player_fire_00102:
1350  0331  21 00 00    	ld	hl,_dirs
1351  0334  7E          	ld	a, (hl)
1352  0335  CB 07       	rlc	a
1353  0337  E6 01       	and	a,0x01
1354  0339  CB 47       	bit	0, a
1355  033B  28 04       	jr	Z,l_player_fire_00118
1356  033D  CB 46       	bit	0, (hl)
1357  033F  28 04       	jr	Z,l_player_fire_00119
1358  0341              l_player_fire_00118:
1359  0341  0E 00       	ld	c,0x00
1360  0343  18 02       	jr	l_player_fire_00120
1361  0345              l_player_fire_00119:
1362  0345  0E 01       	ld	c,0x01
1363  0347              l_player_fire_00120:
1364  0347  21 00 00    	ld	hl,_player_onfire
1365  034A  71          	ld	(hl), c
1366  034B              l_player_fire_00103:
1367  034B  3A 07 00    	ld	a,(_bullet_col + 0x0007)
1368  034E  3C          	inc	a
1369  034F  20 39       	jr	NZ,l_player_fire_00116
1370  0351  3A 00 00    	ld	a,(_player_onfire)
1371  0354  B7          	or	a, a
1372  0355  28 33       	jr	Z,l_player_fire_00116
1373  0357  21 00 00    	ld	hl,_player_mana
1374  035A  7E          	ld	a, (hl)
1375  035B  B7          	or	a, a
1376  035C  28 29       	jr	Z,l_player_fire_00110
1377  035E  3E 05       	ld	a,0x05
1378  0360  96          	sub	a, (hl)
1379  0361  30 0F       	jr	NC,l_player_fire_00107
1380  0363  3A 00 00    	ld	a,(_game_inmune)
1381  0366  B7          	or	a, a
1382  0367  20 0E       	jr	NZ,l_player_fire_00108
1383  0369  21 00 00    	ld	hl,_player_mana
1384  036C  7E          	ld	a, (hl)
1385  036D  C6 FB       	add	a,0xfb
1386  036F  77          	ld	(hl), a
1387  0370  18 05       	jr	l_player_fire_00108
1388  0372              l_player_fire_00107:
1389  0372  21 00 00    	ld	hl,_player_mana
1390  0375  36 00       	ld	(hl),0x00
1391  0377              l_player_fire_00108:
1392  0377  CD 00 00    	call	_game_update_stats
1393  037A  CD 00 00    	call	_audio_disparo1
1394  037D  21 07 78    	ld	hl,0x7807
1395  0380  E5          	push	hl
1396  0381  CD 00 00    	call	_game_shoot_fire
1397  0384  F1          	pop	af
1398  0385  18 03       	jr	l_player_fire_00116
1399  0387              l_player_fire_00110:
1400  0387  CD 00 00    	call	_audio_sin_mana
1401  038A              l_player_fire_00116:
1402  038A  33          	inc	sp
1403  038B  DD E1       	pop	ix
1404  038D  C9          	ret
1405  038E              	SECTION code_compiler
1406  038E              ;	---------------------------------
1407  038E              ; Function player_collision
1408  038E              ; ---------------------------------
1409  038E              _player_collision:
1410  038E  3E 1E       	ld	a,0x1e
1411  0390  F5          	push	af
1412  0391  33          	inc	sp
1413  0392  21 00 00    	ld	hl,_player_hit_time
1414  0395  E5          	push	hl
1415  0396  CD 00 00    	call	_game_check_time
1416  0399  F1          	pop	af
1417  039A  33          	inc	sp
1418  039B  7D          	ld	a, l
1419  039C  B7          	or	a, a
1420  039D  CA 3B 05    	jp	Z, l_player_collision_00136
1421  03A0  21 00 00    	ld	hl,_sprite
1422  03A3  36 00       	ld	(hl),0x00
1423  03A5  3A 07 00    	ld	a,(_col + 7)
1424  03A8  32 00 00    	ld	(_s_col1),a
1425  03AB  3A 07 00    	ld	a,(_lin + 7)
1426  03AE  32 00 00    	ld	(_s_lin1),a
1427  03B1  C6 08       	add	a,0x08
1428  03B3  4F          	ld	c, a
1429  03B4  3A 00 00    	ld	a, (_s_col1)
1430  03B7  47          	ld	b,a
1431  03B8  C5          	push	bc
1432  03B9  CD 00 00    	call	_spr_calc_index
1433  03BC  F1          	pop	af
1434  03BD  4D          	ld	c, l
1435  03BE  21 00 00    	ld	hl,_sprite_curr_index
1436  03C1  71          	ld	(hl), c
1437  03C2  3E 00       	ld	a, +((_scr_map) & 0xFF)
1438  03C4  86          	add	a, (hl)
1439  03C5  4F          	ld	c, a
1440  03C6  3E 00       	ld	a, +((_scr_map) / 256)
1441  03C8  CE 00       	adc	a,0x00
1442  03CA  47          	ld	b, a
1443  03CB  0A          	ld	a, (bc)
1444  03CC  4F          	ld	c,a
1445  03CD  D6 15       	sub	a,0x15
1446  03CF  20 2B       	jr	NZ,l_player_collision_00104
1447  03D1  21 00 00    	ld	hl,_s_state
1448  03D4  CB 46       	bit	0, (hl)
1449  03D6  20 24       	jr	NZ,l_player_collision_00104
1450  03D8  3A 00 00    	ld	a,(_game_checkpoint_scr)
1451  03DB  21 00 00    	ld	hl,_scr_curr
1452  03DE  96          	sub	a, (hl)
1453  03DF  28 16       	jr	Z,l_player_collision_00102
1454  03E1  C5          	push	bc
1455  03E2  CD 00 00    	call	_audio_efecto
1456  03E5  C1          	pop	bc
1457  03E6  2E 07       	ld	l,0x07
1458  03E8  CD 00 00    	call	_zx_border_fastcall
1459  03EB  3A 00 00    	ld	a,(_s_col1)
1460  03EE  32 00 00    	ld	(_player_col_scr),a
1461  03F1  3A 00 00    	ld	a,(_s_lin1)
1462  03F4  32 00 00    	ld	(_player_lin_scr),a
1463  03F7              l_player_collision_00102:
1464  03F7  C5          	push	bc
1465  03F8  CD 00 00    	call	_game_set_checkpoint
1466  03FB  C1          	pop	bc
1467  03FC              l_player_collision_00104:
1468  03FC  3E 2F       	ld	a,0x2f
1469  03FE  91          	sub	a, c
1470  03FF  30 5D       	jr	NC,l_player_collision_00157
1471  0401  79          	ld	a,c
1472  0402  FE 3A       	cp	a,0x3a
1473  0404  30 58       	jr	NC,l_player_collision_00157
1474  0406  D6 39       	sub	a,0x39
1475  0408  20 2A       	jr	NZ,l_player_collision_00111
1476  040A  CD 00 00    	call	_audio_level_complete
1477  040D  21 00 00    	ld	hl,___str_0
1478  0410  E5          	push	hl
1479  0411  21 0C 08    	ld	hl,0x080c
1480  0414  E5          	push	hl
1481  0415  CD 00 00    	call	_zx_print_str
1482  0418  AF          	xor	a, a
1483  0419  F5          	push	af
1484  041A  33          	inc	sp
1485  041B  21 E8 03    	ld	hl,0x03e8
1486  041E  E5          	push	hl
1487  041F  21 08 17    	ld	hl,0x1708
1488  0422  E5          	push	hl
1489  0423  3E 0C       	ld	a,0x0c
1490  0425  F5          	push	af
1491  0426  33          	inc	sp
1492  0427  CD 00 00    	call	_game_colour_message
1493  042A  F1          	pop	af
1494  042B  F1          	pop	af
1495  042C  F1          	pop	af
1496  042D  21 00 00    	ld	hl,_game_round_up
1497  0430  36 01       	ld	(hl),0x01
1498  0432  18 2A       	jr	l_player_collision_00157
1499  0434              l_player_collision_00111:
1500  0434  3A 00 00    	ld	a,(_game_inmune)
1501  0437  B7          	or	a, a
1502  0438  20 10       	jr	NZ,l_player_collision_00107
1503  043A  3E 82       	ld	a,0x82
1504  043C  21 00 00    	ld	hl,_s_lin1
1505  043F  96          	sub	a, (hl)
1506  0440  30 08       	jr	NC,l_player_collision_00107
1507  0442  CD 2C 10    	call	_player_lost_life
1508  0445  2E 00       	ld	l,0x00
1509  0447  C3 3D 05    	jp	l_player_collision_00137
1510  044A              l_player_collision_00107:
1511  044A  21 00 00    	ld	hl,_s_state
1512  044D  CB E6       	set	4, (hl)
1513  044F  2E 06       	ld	l,0x06
1514  0451  CD 00 00    	call	_zx_border_fastcall
1515  0454  2E 32       	ld	l,0x32
1516  0456  CD 7A 11    	call	_player_damage
1517  0459  2E 01       	ld	l,0x01
1518  045B  C3 3D 05    	jp	l_player_collision_00137
1519  045E              l_player_collision_00157:
1520  045E              l_player_collision_00132:
1521  045E  21 00 00    	ld	hl,_sprite
1522  0461  7E          	ld	a, (hl)
1523  0462  D6 07       	sub	a,0x07
1524  0464  D2 36 05    	jp	NC, l_player_collision_00134
1525  0467  4E          	ld	c,(hl)
1526  0468  06 00       	ld	b,0x00
1527  046A  21 00 00    	ld	hl,_class
1528  046D  09          	add	hl,bc
1529  046E  7E          	ld	a,(hl)
1530  046F  32 00 00    	ld	(_s_class),a
1531  0472  B7          	or	a, a
1532  0473  CA 2F 05    	jp	Z, l_player_collision_00131
1533  0476  2A 00 00    	ld	hl,(_sprite)
1534  0479  26 00       	ld	h,0x00
1535  047B  01 00 00    	ld	bc,_col
1536  047E  09          	add	hl,bc
1537  047F  4E          	ld	c,(hl)
1538  0480  06 00       	ld	b,0x00
1539  0482  3A 00 00    	ld	a,(_s_col1)
1540  0485  5F          	ld	e,a
1541  0486  16 00       	ld	d,0x00
1542  0488  79          	ld	a, c
1543  0489  93          	sub	a, e
1544  048A  6F          	ld	l, a
1545  048B  78          	ld	a, b
1546  048C  9A          	sbc	a, d
1547  048D  67          	ld	h, a
1548  048E  CD 00 00    	call	_abs_fastcall
1549  0491  7D          	ld	a,l
1550  0492  D6 02       	sub	a,0x02
1551  0494  7C          	ld	a,h
1552  0495  17          	rla
1553  0496  3F          	ccf
1554  0497  1F          	rra
1555  0498  DE 80       	sbc	a,0x80
1556  049A  D2 2F 05    	jp	NC, l_player_collision_00131
1557  049D  2A 00 00    	ld	hl,(_sprite)
1558  04A0  26 00       	ld	h,0x00
1559  04A2  01 00 00    	ld	bc,_lin
1560  04A5  09          	add	hl,bc
1561  04A6  4E          	ld	c,(hl)
1562  04A7  06 00       	ld	b,0x00
1563  04A9  3A 00 00    	ld	a,(_s_lin1)
1564  04AC  5F          	ld	e,a
1565  04AD  16 00       	ld	d,0x00
1566  04AF  79          	ld	a, c
1567  04B0  93          	sub	a, e
1568  04B1  6F          	ld	l, a
1569  04B2  78          	ld	a, b
1570  04B3  9A          	sbc	a, d
1571  04B4  67          	ld	h, a
1572  04B5  CD 00 00    	call	_abs_fastcall
1573  04B8  7D          	ld	a,l
1574  04B9  D6 0E       	sub	a,0x0e
1575  04BB  7C          	ld	a,h
1576  04BC  17          	rla
1577  04BD  3F          	ccf
1578  04BE  1F          	rra
1579  04BF  DE 80       	sbc	a,0x80
1580  04C1  30 6C       	jr	NC,l_player_collision_00131
1581  04C3  3A 00 00    	ld	a,(_s_class)
1582  04C6  D6 06       	sub	a,0x06
1583  04C8  20 1D       	jr	NZ,l_player_collision_00119
1584  04CA  21 00 00    	ld	hl,_player_vita
1585  04CD  7E          	ld	a, (hl)
1586  04CE  C6 32       	add	a,0x32
1587  04D0  77          	ld	(hl), a
1588  04D1  3A 00 00    	ld	a,(_player_max_vita)
1589  04D4  21 00 00    	ld	hl,_player_vita
1590  04D7  96          	sub	a, (hl)
1591  04D8  30 06       	jr	NC,l_player_collision_00117
1592  04DA  3A 00 00    	ld	a,(_player_max_vita)
1593  04DD  32 00 00    	ld	(_player_vita),a
1594  04E0              l_player_collision_00117:
1595  04E0  CD 3E 05    	call	_player_pick_mushroom
1596  04E3  2E 00       	ld	l,0x00
1597  04E5  18 56       	jr	l_player_collision_00137
1598  04E7              l_player_collision_00119:
1599  04E7  3A 00 00    	ld	a,(_s_class)
1600  04EA  D6 07       	sub	a,0x07
1601  04EC  20 1D       	jr	NZ,l_player_collision_00123
1602  04EE  21 00 00    	ld	hl,_player_mana
1603  04F1  7E          	ld	a, (hl)
1604  04F2  C6 32       	add	a,0x32
1605  04F4  77          	ld	(hl), a
1606  04F5  3A 00 00    	ld	a,(_player_max_mana)
1607  04F8  21 00 00    	ld	hl,_player_mana
1608  04FB  96          	sub	a, (hl)
1609  04FC  30 06       	jr	NC,l_player_collision_00121
1610  04FE  3A 00 00    	ld	a,(_player_max_mana)
1611  0501  32 00 00    	ld	(_player_mana),a
1612  0504              l_player_collision_00121:
1613  0504  CD 3E 05    	call	_player_pick_mushroom
1614  0507  2E 00       	ld	l,0x00
1615  0509  18 32       	jr	l_player_collision_00137
1616  050B              l_player_collision_00123:
1617  050B  3A 00 00    	ld	a,(_s_class)
1618  050E  D6 08       	sub	a,0x08
1619  0510  20 0A       	jr	NZ,l_player_collision_00125
1620  0512  CD 3E 05    	call	_player_pick_mushroom
1621  0515  CD 55 05    	call	_player_1up
1622  0518  2E 00       	ld	l,0x00
1623  051A  18 21       	jr	l_player_collision_00137
1624  051C              l_player_collision_00125:
1625  051C  21 00 00    	ld	hl,_s_state
1626  051F  CB E6       	set	4, (hl)
1627  0521  2E 02       	ld	l,0x02
1628  0523  CD 00 00    	call	_zx_border_fastcall
1629  0526  2E 14       	ld	l,0x14
1630  0528  CD 7A 11    	call	_player_damage
1631  052B  2E 01       	ld	l,0x01
1632  052D  18 0E       	jr	l_player_collision_00137
1633  052F              l_player_collision_00131:
1634  052F  21 00 00    	ld	hl,_sprite
1635  0532  34          	inc	(hl)
1636  0533  C3 5E 04    	jp	l_player_collision_00132
1637  0536              l_player_collision_00134:
1638  0536  21 00 00    	ld	hl,_s_state
1639  0539  CB A6       	res	4, (hl)
1640  053B              l_player_collision_00136:
1641  053B  2E 00       	ld	l,0x00
1642  053D              l_player_collision_00137:
1643  053D  C9          	ret
1644  053E              	SECTION rodata_compiler
1645  0000              ___str_0:
1646  0000  52 4F 55 4E 44 20 43 4F 4D 50 4C 45 54 45 21 
                        	DEFM "ROUND COMPLETE!"
1647  000F  00          	DEFB 0x00
1648  0010              	SECTION code_compiler
1649  053E              ;	---------------------------------
1650  053E              ; Function player_pick_mushroom
1651  053E              ; ---------------------------------
1652  053E              _player_pick_mushroom:
1653  053E  CD 00 00    	call	_audio_magia1
1654  0541  21 01 00    	ld	hl,0x0001
1655  0544  CD 03 0C    	call	_player_score_add
1656  0547  CD 00 00    	call	_game_update_stats
1657  054A  2A 00 00    	ld	hl,(_sprite)
1658  054D  CD 00 00    	call	_spr_destroy
1659  0550  21 00 00    	ld	hl,_game_mush_count
1660  0553  35          	dec	(hl)
1661  0554  C9          	ret
1662  0555              	SECTION code_compiler
1663  0555              ;	---------------------------------
1664  0555              ; Function player_1up
1665  0555              ; ---------------------------------
1666  0555              _player_1up:
1667  0555  21 00 00    	ld	hl,_player_lives
1668  0558  7E          	ld	a, (hl)
1669  0559  D6 64       	sub	a,0x64
1670  055B  D0          	ret	NC
1671  055C  34          	inc	(hl)
1672  055D  CD 00 00    	call	_spr_flatten
1673  0560  21 10 00    	ld	hl,___str_1
1674  0563  E5          	push	hl
1675  0564  21 0C 0C    	ld	hl,0x0c0c
1676  0567  E5          	push	hl
1677  0568  CD 00 00    	call	_zx_print_str
1678  056B  AF          	xor	a, a
1679  056C  F5          	push	af
1680  056D  33          	inc	sp
1681  056E  21 19 00    	ld	hl,0x0019
1682  0571  E5          	push	hl
1683  0572  21 0C 11    	ld	hl,0x110c
1684  0575  E5          	push	hl
1685  0576  3E 0C       	ld	a,0x0c
1686  0578  F5          	push	af
1687  0579  33          	inc	sp
1688  057A  CD 00 00    	call	_game_colour_message
1689  057D  F1          	pop	af
1690  057E  F1          	pop	af
1691  057F  F1          	pop	af
1692  0580  CD 00 00    	call	_game_update_stats
1693  0583  CD 00 00    	call	_spr_unflattenP1
1694  0586  C9          	ret
1695  0587              	SECTION rodata_compiler
1696  0010              ___str_1:
1697  0010  31 20 55 50 21 
                        	DEFM "1 UP!"
1698  0015  00          	DEFB 0x00
1699  0016              	SECTION code_compiler
1700  0587              ;	---------------------------------
1701  0587              ; Function player_check_stairs_vertical
1702  0587              ; ---------------------------------
1703  0587              _player_check_stairs_vertical:
1704  0587  CD 00 00    	call	___sdcc_enter_ix
1705  058A  F5          	push	af
1706  058B  DD 75 FF    	ld	(ix-1),l
1707  058E  21 07 00    	ld	hl,+(_col + 0x0007)
1708  0591  4E          	ld	c, (hl)
1709  0592  CB 41       	bit	0, c
1710  0594  20 2F       	jr	NZ,l_player_check_stairs_vertical_00102
1711  0596  3A 07 00    	ld	a,(_lin + 0x0007)
1712  0599  DD 86 FF    	add	a,(ix-1)
1713  059C  47          	ld	b, a
1714  059D  79          	ld	a, c
1715  059E  48          	ld	c,b
1716  059F  47          	ld	b,a
1717  05A0  C5          	push	bc
1718  05A1  CD 00 00    	call	_spr_calc_index
1719  05A4  F1          	pop	af
1720  05A5  7D          	ld	a,l
1721  05A6  32 00 00    	ld	(_sprite_curr_index),a
1722  05A9  4F          	ld	c,a
1723  05AA  06 00       	ld	b,0x00
1724  05AC  21 00 00    	ld	hl,_scr_map
1725  05AF  09          	add	hl,bc
1726  05B0  7E          	ld	a,(hl)
1727  05B1  4F          	ld	c,a
1728  05B2  D6 44       	sub	a,0x44
1729  05B4  38 05       	jr	C,l_player_check_stairs_vertical_00110
1730  05B6  3E 47       	ld	a,0x47
1731  05B8  91          	sub	a, c
1732  05B9  30 04       	jr	NC,l_player_check_stairs_vertical_00111
1733  05BB              l_player_check_stairs_vertical_00110:
1734  05BB  1E 00       	ld	e,0x00
1735  05BD  18 02       	jr	l_player_check_stairs_vertical_00112
1736  05BF              l_player_check_stairs_vertical_00111:
1737  05BF  1E 01       	ld	e,0x01
1738  05C1              l_player_check_stairs_vertical_00112:
1739  05C1  0E 00       	ld	c,0x00
1740  05C3  18 58       	jr	l_player_check_stairs_vertical_00103
1741  05C5              l_player_check_stairs_vertical_00102:
1742  05C5  79          	ld	a, c
1743  05C6  DD 96 FF    	sub	a,(ix-1)
1744  05C9  57          	ld	d, a
1745  05CA  01 07 00    	ld	bc,_lin+7
1746  05CD  0A          	ld	a, (bc)
1747  05CE  DD 86 FF    	add	a,(ix-1)
1748  05D1  C5          	push	bc
1749  05D2  5F          	ld	e,a
1750  05D3  D5          	push	de
1751  05D4  CD 00 00    	call	_spr_calc_index
1752  05D7  F1          	pop	af
1753  05D8  C1          	pop	bc
1754  05D9  7D          	ld	a,l
1755  05DA  32 00 00    	ld	(_sprite_curr_index),a
1756  05DD  5F          	ld	e,a
1757  05DE  16 00       	ld	d,0x00
1758  05E0  21 00 00    	ld	hl,_scr_map
1759  05E3  19          	add	hl,de
1760  05E4  7E          	ld	a,(hl)
1761  05E5  5F          	ld	e,a
1762  05E6  D6 44       	sub	a,0x44
1763  05E8  38 05       	jr	C,l_player_check_stairs_vertical_00113
1764  05EA  3E 47       	ld	a,0x47
1765  05EC  93          	sub	a, e
1766  05ED  30 04       	jr	NC,l_player_check_stairs_vertical_00114
1767  05EF              l_player_check_stairs_vertical_00113:
1768  05EF  1E 00       	ld	e,0x00
1769  05F1  18 02       	jr	l_player_check_stairs_vertical_00115
1770  05F3              l_player_check_stairs_vertical_00114:
1771  05F3  1E 01       	ld	e,0x01
1772  05F5              l_player_check_stairs_vertical_00115:
1773  05F5  3A 07 00    	ld	a,(_col + 0x0007)
1774  05F8  DD 96 FF    	sub	a,(ix-1)
1775  05FB  57          	ld	d, a
1776  05FC  0A          	ld	a, (bc)
1777  05FD  DD 86 FF    	add	a,(ix-1)
1778  0600  47          	ld	b, a
1779  0601  D5          	push	de
1780  0602  58          	ld	e,b
1781  0603  D5          	push	de
1782  0604  CD 00 00    	call	_spr_calc_index
1783  0607  F1          	pop	af
1784  0608  D1          	pop	de
1785  0609  7D          	ld	a,l
1786  060A  32 00 00    	ld	(_sprite_curr_index),a
1787  060D  7B          	ld	a, e
1788  060E  D6 44       	sub	a,0x44
1789  0610  38 05       	jr	C,l_player_check_stairs_vertical_00116
1790  0612  3E 47       	ld	a,0x47
1791  0614  93          	sub	a, e
1792  0615  30 04       	jr	NC,l_player_check_stairs_vertical_00117
1793  0617              l_player_check_stairs_vertical_00116:
1794  0617  0E 00       	ld	c,0x00
1795  0619  18 02       	jr	l_player_check_stairs_vertical_00118
1796  061B              l_player_check_stairs_vertical_00117:
1797  061B  0E 01       	ld	c,0x01
1798  061D              l_player_check_stairs_vertical_00118:
1799  061D              l_player_check_stairs_vertical_00103:
1800  061D  7B          	ld	a, e
1801  061E  B7          	or	a,a
1802  061F  20 03       	jr	NZ,l_player_check_stairs_vertical_00104
1803  0621  B1          	or	a,c
1804  0622  28 07       	jr	Z,l_player_check_stairs_vertical_00105
1805  0624              l_player_check_stairs_vertical_00104:
1806  0624  21 00 00    	ld	hl,_player_onstair
1807  0627  36 01       	ld	(hl),0x01
1808  0629  18 05       	jr	l_player_check_stairs_vertical_00108
1809  062B              l_player_check_stairs_vertical_00105:
1810  062B  21 00 00    	ld	hl,_player_onstair
1811  062E  36 00       	ld	(hl),0x00
1812  0630              l_player_check_stairs_vertical_00108:
1813  0630  F1          	pop	af
1814  0631  DD E1       	pop	ix
1815  0633  C9          	ret
1816  0634              	SECTION code_compiler
1817  0634              ;	---------------------------------
1818  0634              ; Function player_check_stairs
1819  0634              ; ---------------------------------
1820  0634              _player_check_stairs:
1821  0634  CD 00 00    	call	___sdcc_enter_ix
1822  0637  3B          	dec	sp
1823  0638  45          	ld	b, l
1824  0639  3A 07 00    	ld	a,(_col + 0x0007)
1825  063C  4F          	ld	c,a
1826  063D  80          	add	a, b
1827  063E  57          	ld	d, a
1828  063F  3A 07 00    	ld	a,(_lin + 0x0007)
1829  0642  C5          	push	bc
1830  0643  5F          	ld	e,a
1831  0644  D5          	push	de
1832  0645  CD 00 00    	call	_spr_calc_index
1833  0648  F1          	pop	af
1834  0649  C1          	pop	bc
1835  064A  7D          	ld	a,l
1836  064B  32 00 00    	ld	(_sprite_curr_index),a
1837  064E  5F          	ld	e,a
1838  064F  16 00       	ld	d,0x00
1839  0651  21 00 00    	ld	hl,_scr_map
1840  0654  19          	add	hl,de
1841  0655  7E          	ld	a,(hl)
1842  0656  4F          	ld	c,a
1843  0657  D6 44       	sub	a,0x44
1844  0659  38 05       	jr	C,l_player_check_stairs_00111
1845  065B  3E 47       	ld	a,0x47
1846  065D  91          	sub	a, c
1847  065E  30 04       	jr	NC,l_player_check_stairs_00112
1848  0660              l_player_check_stairs_00111:
1849  0660  0E 00       	ld	c,0x00
1850  0662  18 02       	jr	l_player_check_stairs_00113
1851  0664              l_player_check_stairs_00112:
1852  0664  0E 01       	ld	c,0x01
1853  0666              l_player_check_stairs_00113:
1854  0666  3A 07 00    	ld	a,(_col + 0x0007)
1855  0669  80          	add	a, b
1856  066A  57          	ld	d, a
1857  066B  3A 07 00    	ld	a,(_lin + 0x0007)
1858  066E  C6 0F       	add	a,0x0f
1859  0670  47          	ld	b, a
1860  0671  C5          	push	bc
1861  0672  58          	ld	e,b
1862  0673  D5          	push	de
1863  0674  CD 00 00    	call	_spr_calc_index
1864  0677  F1          	pop	af
1865  0678  C1          	pop	bc
1866  0679  7D          	ld	a,l
1867  067A  32 00 00    	ld	(_sprite_curr_index),a
1868  067D  5F          	ld	e,a
1869  067E  16 00       	ld	d,0x00
1870  0680  21 00 00    	ld	hl,_scr_map
1871  0683  19          	add	hl,de
1872  0684  7E          	ld	a,(hl)
1873  0685  47          	ld	b,a
1874  0686  D6 44       	sub	a,0x44
1875  0688  38 05       	jr	C,l_player_check_stairs_00114
1876  068A  3E 47       	ld	a,0x47
1877  068C  90          	sub	a, b
1878  068D  30 04       	jr	NC,l_player_check_stairs_00115
1879  068F              l_player_check_stairs_00114:
1880  068F  06 00       	ld	b,0x00
1881  0691  18 02       	jr	l_player_check_stairs_00116
1882  0693              l_player_check_stairs_00115:
1883  0693  06 01       	ld	b,0x01
1884  0695              l_player_check_stairs_00116:
1885  0695  79          	ld	a, c
1886  0696  B7          	or	a,a
1887  0697  20 03       	jr	NZ,l_player_check_stairs_00105
1888  0699  B0          	or	a,b
1889  069A  28 13       	jr	Z,l_player_check_stairs_00106
1890  069C              l_player_check_stairs_00105:
1891  069C  21 00 00    	ld	hl,_player_onstair
1892  069F  7E          	ld	a, (hl)
1893  06A0  B7          	or	a, a
1894  06A1  20 1D       	jr	NZ,l_player_check_stairs_00109
1895  06A3  36 01       	ld	(hl),0x01
1896  06A5  21 72 00    	ld	hl,0x0072
1897  06A8  E5          	push	hl
1898  06A9  CD DC 06    	call	_player_tile
1899  06AC  F1          	pop	af
1900  06AD  18 11       	jr	l_player_check_stairs_00109
1901  06AF              l_player_check_stairs_00106:
1902  06AF  21 00 00    	ld	hl,_player_onstair
1903  06B2  7E          	ld	a, (hl)
1904  06B3  B7          	or	a, a
1905  06B4  28 0A       	jr	Z,l_player_check_stairs_00109
1906  06B6  36 00       	ld	(hl),0x00
1907  06B8  21 60 08    	ld	hl,0x0860
1908  06BB  E5          	push	hl
1909  06BC  CD DC 06    	call	_player_tile
1910  06BF  F1          	pop	af
1911  06C0              l_player_check_stairs_00109:
1912  06C0  33          	inc	sp
1913  06C1  DD E1       	pop	ix
1914  06C3  C9          	ret
1915  06C4              	SECTION code_compiler
1916  06C4              ;	---------------------------------
1917  06C4              ; Function player_anim_stairs
1918  06C4              ; ---------------------------------
1919  06C4              _player_anim_stairs:
1920  06C4  21 00 00    	ld	hl,_player_anim_stair
1921  06C7  34          	inc	(hl)
1922  06C8  3E 01       	ld	a,0x01
1923  06CA  96          	sub	a, (hl)
1924  06CB  30 02       	jr	NC,l_player_anim_stairs_00102
1925  06CD  36 00       	ld	(hl),0x00
1926  06CF              l_player_anim_stairs_00102:
1927  06CF  3A 07 00    	ld	a,(_tile + 0x0007)
1928  06D2  21 00 00    	ld	hl,_player_anim_stair
1929  06D5  86          	add	a, (hl)
1930  06D6  C6 04       	add	a,0x04
1931  06D8  32 00 00    	ld	(_s_tile1),a
1932  06DB  C9          	ret
1933  06DC              	SECTION code_compiler
1934  06DC              ;	---------------------------------
1935  06DC              ; Function player_tile
1936  06DC              ; ---------------------------------
1937  06DC              _player_tile:
1938  06DC  CD 00 00    	call	___sdcc_enter_ix
1939  06DF  21 05 00    	ld	hl,0x0005
1940  06E2  39          	add	hl, sp
1941  06E3  EB          	ex	de,hl
1942  06E4  21 04 00    	ld	hl,0x0004
1943  06E7  39          	add	hl, sp
1944  06E8  4D          	ld	c, l
1945  06E9  44          	ld	b, h
1946  06EA  D5          	push	de
1947  06EB  21 00 00    	ld	hl,_sprite
1948  06EE  E5          	push	hl
1949  06EF  C5          	push	bc
1950  06F0  CD 00 00    	call	_spr_tile_dir
1951  06F3  F1          	pop	af
1952  06F4  F1          	pop	af
1953  06F5  F1          	pop	af
1954  06F6  7D          	ld	a,l
1955  06F7  32 07 00    	ld	((_tile + 0x0007)),a
1956  06FA  DD E1       	pop	ix
1957  06FC  C9          	ret
1958  06FD              	SECTION code_compiler
1959  06FD              ;	---------------------------------
1960  06FD              ; Function player_check_map
1961  06FD              ; ---------------------------------
1962  06FD              _player_check_map:
1963  06FD  21 07 00    	ld	hl,+(_col + 0x0007)
1964  0700  56          	ld	d, (hl)
1965  0701  21 07 00    	ld	hl,+(_lin + 0x0007)
1966  0704  5E          	ld	e, (hl)
1967  0705  D5          	push	de
1968  0706  CD 00 00    	call	_spr_calc_index
1969  0709  F1          	pop	af
1970  070A  7D          	ld	a,l
1971  070B  32 00 00    	ld	(_sprite_curr_index),a
1972  070E  CD 57 07    	call	_player_pick_item
1973  0711  21 07 00    	ld	hl,+(_col + 0x0007)
1974  0714  46          	ld	b, (hl)
1975  0715  3A 07 00    	ld	a,(_lin + 0x0007)
1976  0718  E6 0F       	and	a,0x0f
1977  071A  4F          	ld	c, a
1978  071B  CB 40       	bit	0, b
1979  071D  20 10       	jr	NZ,l_player_check_map_00108
1980  071F  79          	ld	a, c
1981  0720  B7          	or	a, a
1982  0721  28 33       	jr	Z,l_player_check_map_00110
1983  0723  21 00 00    	ld	hl,_sprite_curr_index
1984  0726  7E          	ld	a, (hl)
1985  0727  C6 10       	add	a,0x10
1986  0729  77          	ld	(hl), a
1987  072A  CD 57 07    	call	_player_pick_item
1988  072D  18 27       	jr	l_player_check_map_00110
1989  072F              l_player_check_map_00108:
1990  072F  21 00 00    	ld	hl,_sprite_curr_index
1991  0732  46          	ld	b, (hl)
1992  0733  04          	inc	b
1993  0734  79          	ld	a, c
1994  0735  B7          	or	a, a
1995  0736  20 06       	jr	NZ,l_player_check_map_00105
1996  0738  70          	ld	(hl), b
1997  0739  CD 57 07    	call	_player_pick_item
1998  073C  18 18       	jr	l_player_check_map_00110
1999  073E              l_player_check_map_00105:
2000  073E  21 00 00    	ld	hl,_sprite_curr_index
2001  0741  70          	ld	(hl), b
2002  0742  CD 57 07    	call	_player_pick_item
2003  0745  21 00 00    	ld	hl,_sprite_curr_index
2004  0748  7E          	ld	a, (hl)
2005  0749  C6 0F       	add	a,0x0f
2006  074B  77          	ld	(hl), a
2007  074C  CD 57 07    	call	_player_pick_item
2008  074F  21 00 00    	ld	hl,_sprite_curr_index
2009  0752  34          	inc	(hl)
2010  0753  CD 57 07    	call	_player_pick_item
2011  0756              l_player_check_map_00110:
2012  0756  C9          	ret
2013  0757              	SECTION code_compiler
2014  0757              ;	---------------------------------
2015  0757              ; Function player_pick_item
2016  0757              ; ---------------------------------
2017  0757              _player_pick_item:
2018  0757  CD 00 00    	call	___sdcc_enter_ix
2019  075A  3B          	dec	sp
2020  075B  2A 00 00    	ld	hl,(_sprite_curr_index)
2021  075E  26 00       	ld	h,0x00
2022  0760  01 00 00    	ld	bc,_scr_map
2023  0763  09          	add	hl,bc
2024  0764  7E          	ld	a,(hl)
2025  0765  DD 77 FF    	ld	(ix-1),a
2026  0768  D6 24       	sub	a,0x24
2027  076A  DA 01 09    	jp	C, l_player_pick_item_00131
2028  076D  3E 2F       	ld	a,0x2f
2029  076F  DD 96 FF    	sub	a,(ix-1)
2030  0772  DA 01 09    	jp	C, l_player_pick_item_00131
2031  0775  CD 00 00    	call	_ay_reset
2032  0778  2A 00 00    	ld	hl,(_sprite_curr_index)
2033  077B  26 00       	ld	h,0x00
2034  077D  01 00 00    	ld	bc,_scr_map
2035  0780  09          	add	hl,bc
2036  0781  4D          	ld	c,l
2037  0782  44          	ld	b,h
2038  0783  21 00 00    	ld	hl,_sprite_curr_index
2039  0786  5E          	ld	e, (hl)
2040  0787  16 00       	ld	d,0x00
2041  0789  C5          	push	bc
2042  078A  EB          	ex	de,hl
2043  078B  CD 00 00    	call	_game_match_back
2044  078E  C1          	pop	bc
2045  078F  7D          	ld	a,l
2046  0790  02          	ld	(bc), a
2047  0791  2A 00 00    	ld	hl,(_sprite_curr_index)
2048  0794  26 00       	ld	h,0x00
2049  0796  CD 00 00    	call	_game_obj_set
2050  0799  3A 00 00    	ld	a,(_sprite_curr_index)
2051  079C  07          	rlca
2052  079D  07          	rlca
2053  079E  07          	rlca
2054  079F  07          	rlca
2055  07A0  E6 0F       	and	a,0x0f
2056  07A2  07          	rlca
2057  07A3  07          	rlca
2058  07A4  07          	rlca
2059  07A5  07          	rlca
2060  07A6  E6 F0       	and	a,0xf0
2061  07A8  32 00 00    	ld	(_s_lin1),a
2062  07AB  3A 00 00    	ld	a,(_sprite_curr_index)
2063  07AE  E6 0F       	and	a,0x0f
2064  07B0  87          	add	a, a
2065  07B1  32 00 00    	ld	(_s_col1),a
2066  07B4  21 00 00    	ld	hl,0x0000
2067  07B7  E5          	push	hl
2068  07B8  21 84 03    	ld	hl,0x0384
2069  07BB  E5          	push	hl
2070  07BC  F5          	push	af
2071  07BD  33          	inc	sp
2072  07BE  3A 00 00    	ld	a,(_s_lin1)
2073  07C1  F5          	push	af
2074  07C2  33          	inc	sp
2075  07C3  CD 00 00    	call	_spr_add_anim
2076  07C6  F1          	pop	af
2077  07C7  F1          	pop	af
2078  07C8  F1          	pop	af
2079  07C9  DD 7E FF    	ld	a,(ix-1)
2080  07CC  D6 24       	sub	a,0x24
2081  07CE  DA 01 09    	jp	C, l_player_pick_item_00131
2082  07D1  3E 2F       	ld	a,0x2f
2083  07D3  DD 96 FF    	sub	a,(ix-1)
2084  07D6  DA 01 09    	jp	C, l_player_pick_item_00131
2085  07D9  DD 7E FF    	ld	a,(ix-1)
2086  07DC  C6 DC       	add	a,0xdc
2087  07DE  4F          	ld	c, a
2088  07DF  06 00       	ld	b,0x00
2089  07E1  21 E8 07    	ld	hl,l_player_pick_item_00177
2090  07E4  09          	add	hl, bc
2091  07E5  09          	add	hl, bc
2092  07E6  09          	add	hl, bc
2093  07E7  E9          	jp	(hl)
2094  07E8              l_player_pick_item_00177:
2095  07E8  C3 0C 08    	jp	l_player_pick_item_00101
2096  07EB  C3 1A 08    	jp	l_player_pick_item_00102
2097  07EE  C3 28 08    	jp	l_player_pick_item_00103
2098  07F1  C3 36 08    	jp	l_player_pick_item_00104
2099  07F4  C3 44 08    	jp	l_player_pick_item_00105
2100  07F7  C3 71 08    	jp	l_player_pick_item_00109
2101  07FA  C3 8B 08    	jp	l_player_pick_item_00112
2102  07FD  C3 A3 08    	jp	l_player_pick_item_00115
2103  0800  C3 BB 08    	jp	l_player_pick_item_00118
2104  0803  C3 D3 08    	jp	l_player_pick_item_00121
2105  0806  C3 EB 08    	jp	l_player_pick_item_00124
2106  0809  C3 65 08    	jp	l_player_pick_item_00108
2107  080C              l_player_pick_item_00101:
2108  080C  CD 00 00    	call	_audio_efecto
2109  080F  21 00 00    	ld	hl,_player_keys
2110  0812  36 01       	ld	(hl),0x01
2111  0814  CD 00 00    	call	_game_update_stats
2112  0817  C3 01 09    	jp	l_player_pick_item_00131
2113  081A              l_player_pick_item_00102:
2114  081A  CD 00 00    	call	_audio_efecto
2115  081D  21 01 00    	ld	hl, +(_player_keys + 0x0001)
2116  0820  36 01       	ld	(hl),0x01
2117  0822  CD 00 00    	call	_game_update_stats
2118  0825  C3 01 09    	jp	l_player_pick_item_00131
2119  0828              l_player_pick_item_00103:
2120  0828  CD 00 00    	call	_audio_efecto
2121  082B  21 02 00    	ld	hl, +(_player_keys + 0x0002)
2122  082E  36 01       	ld	(hl),0x01
2123  0830  CD 00 00    	call	_game_update_stats
2124  0833  C3 01 09    	jp	l_player_pick_item_00131
2125  0836              l_player_pick_item_00104:
2126  0836  CD 00 00    	call	_audio_efecto
2127  0839  21 03 00    	ld	hl, +(_player_keys + 0x0003)
2128  083C  36 01       	ld	(hl),0x01
2129  083E  CD 00 00    	call	_game_update_stats
2130  0841  C3 01 09    	jp	l_player_pick_item_00131
2131  0844              l_player_pick_item_00105:
2132  0844  CD 00 00    	call	_audio_coin
2133  0847  21 01 00    	ld	hl,0x0001
2134  084A  CD 03 0C    	call	_player_score_add
2135  084D  21 00 00    	ld	hl,_player_coins
2136  0850  7E          	ld	a,(hl)
2137  0851  3C          	inc	a
2138  0852  77          	ld	(hl),a
2139  0853  D6 64       	sub	a,0x64
2140  0855  20 08       	jr	NZ,l_player_pick_item_00107
2141  0857  CD 55 05    	call	_player_1up
2142  085A  21 00 00    	ld	hl,_player_coins
2143  085D  36 00       	ld	(hl),0x00
2144  085F              l_player_pick_item_00107:
2145  085F  CD 00 00    	call	_game_update_stats
2146  0862  C3 01 09    	jp	l_player_pick_item_00131
2147  0865              l_player_pick_item_00108:
2148  0865  CD 00 00    	call	_audio_magia1
2149  0868  21 0A 00    	ld	hl,0x000a
2150  086B  CD 03 0C    	call	_player_score_add
2151  086E  C3 01 09    	jp	l_player_pick_item_00131
2152  0871              l_player_pick_item_00109:
2153  0871  CD 00 00    	call	_audio_efecto
2154  0874  21 00 00    	ld	hl,_player_str
2155  0877  34          	inc	(hl)
2156  0878  21 00 00    	ld	hl,_player_max_vita
2157  087B  7E          	ld	a, (hl)
2158  087C  D6 C8       	sub	a,0xc8
2159  087E  D2 01 09    	jp	NC, l_player_pick_item_00131
2160  0881  7E          	ld	a, (hl)
2161  0882  C6 0A       	add	a,0x0a
2162  0884  77          	ld	(hl), a
2163  0885  CD 00 00    	call	_game_update_stats
2164  0888  C3 01 09    	jp	l_player_pick_item_00131
2165  088B              l_player_pick_item_00112:
2166  088B  CD 00 00    	call	_audio_efecto
2167  088E  21 00 00    	ld	hl,_player_str
2168  0891  34          	inc	(hl)
2169  0892  21 00 00    	ld	hl,_player_max_vita
2170  0895  7E          	ld	a, (hl)
2171  0896  D6 C8       	sub	a,0xc8
2172  0898  30 67       	jr	NC,l_player_pick_item_00131
2173  089A  7E          	ld	a, (hl)
2174  089B  C6 0A       	add	a,0x0a
2175  089D  77          	ld	(hl), a
2176  089E  CD 00 00    	call	_game_update_stats
2177  08A1  18 5E       	jr	l_player_pick_item_00131
2178  08A3              l_player_pick_item_00115:
2179  08A3  CD 00 00    	call	_audio_efecto
2180  08A6  21 00 00    	ld	hl,_player_str
2181  08A9  34          	inc	(hl)
2182  08AA  21 00 00    	ld	hl,_player_max_vita
2183  08AD  7E          	ld	a, (hl)
2184  08AE  D6 C8       	sub	a,0xc8
2185  08B0  30 4F       	jr	NC,l_player_pick_item_00131
2186  08B2  7E          	ld	a, (hl)
2187  08B3  C6 0A       	add	a,0x0a
2188  08B5  77          	ld	(hl), a
2189  08B6  CD 00 00    	call	_game_update_stats
2190  08B9  18 46       	jr	l_player_pick_item_00131
2191  08BB              l_player_pick_item_00118:
2192  08BB  CD 00 00    	call	_audio_efecto
2193  08BE  21 00 00    	ld	hl,_player_int
2194  08C1  34          	inc	(hl)
2195  08C2  21 00 00    	ld	hl,_player_max_mana
2196  08C5  7E          	ld	a, (hl)
2197  08C6  D6 C8       	sub	a,0xc8
2198  08C8  30 37       	jr	NC,l_player_pick_item_00131
2199  08CA  7E          	ld	a, (hl)
2200  08CB  C6 0A       	add	a,0x0a
2201  08CD  77          	ld	(hl), a
2202  08CE  CD 00 00    	call	_game_update_stats
2203  08D1  18 2E       	jr	l_player_pick_item_00131
2204  08D3              l_player_pick_item_00121:
2205  08D3  CD 00 00    	call	_audio_efecto
2206  08D6  21 00 00    	ld	hl,_player_int
2207  08D9  34          	inc	(hl)
2208  08DA  21 00 00    	ld	hl,_player_max_mana
2209  08DD  7E          	ld	a, (hl)
2210  08DE  D6 C8       	sub	a,0xc8
2211  08E0  30 1F       	jr	NC,l_player_pick_item_00131
2212  08E2  7E          	ld	a, (hl)
2213  08E3  C6 0A       	add	a,0x0a
2214  08E5  77          	ld	(hl), a
2215  08E6  CD 00 00    	call	_game_update_stats
2216  08E9  18 16       	jr	l_player_pick_item_00131
2217  08EB              l_player_pick_item_00124:
2218  08EB  CD 00 00    	call	_audio_efecto
2219  08EE  21 00 00    	ld	hl,_player_int
2220  08F1  34          	inc	(hl)
2221  08F2  21 00 00    	ld	hl,_player_max_mana
2222  08F5  7E          	ld	a, (hl)
2223  08F6  D6 C8       	sub	a,0xc8
2224  08F8  30 07       	jr	NC,l_player_pick_item_00131
2225  08FA  7E          	ld	a, (hl)
2226  08FB  C6 0A       	add	a,0x0a
2227  08FD  77          	ld	(hl), a
2228  08FE  CD 00 00    	call	_game_update_stats
2229  0901              l_player_pick_item_00131:
2230  0901  33          	inc	sp
2231  0902  DD E1       	pop	ix
2232  0904  C9          	ret
2233  0905              	SECTION code_compiler
2234  0905              ;	---------------------------------
2235  0905              ; Function player_hit_platform
2236  0905              ; ---------------------------------
2237  0905              _player_hit_platform:
2238  0905  CD 00 00    	call	___sdcc_enter_ix
2239  0908  F5          	push	af
2240  0909  3B          	dec	sp
2241  090A  3A 00 00    	ld	a,(_player_hit_lin)
2242  090D  B7          	or	a, a
2243  090E  C2 CD 0B    	jp	NZ, l_player_hit_platform_00147
2244  0911  01 07 00    	ld	bc,_lin+7
2245  0914  0A          	ld	a, (bc)
2246  0915  5F          	ld	e, a
2247  0916  3E 10       	ld	a,0x10
2248  0918  93          	sub	a, e
2249  0919  D2 CD 0B    	jp	NC, l_player_hit_platform_00147
2250  091C  2A 00 00    	ld	hl,(_index1)
2251  091F  11 00 00    	ld	de,_scr_map
2252  0922  19          	add	hl,de
2253  0923  7E          	ld	a,(hl)
2254  0924  EB          	ex	de,hl
2255  0925  FE 45       	cp	a,0x45
2256  0927  DA CD 0B    	jp	C,l_player_hit_platform_00147
2257  092A  D6 4D       	sub	a,0x4d
2258  092C  20 42       	jr	NZ,l_player_hit_platform_00102
2259  092E  2A 00 00    	ld	hl,(_index1)
2260  0931  D5          	push	de
2261  0932  CD 00 00    	call	_game_match_back
2262  0935  D1          	pop	de
2263  0936  7D          	ld	a,l
2264  0937  12          	ld	(de), a
2265  0938  2A 00 00    	ld	hl,(_index1)
2266  093B  CD 00 00    	call	_game_obj_set
2267  093E  CD 00 00    	call	_audio_explosion
2268  0941  21 00 00    	ld	hl,_index1
2269  0944  7E          	ld	a, (hl)
2270  0945  E6 0F       	and	a,0x0f
2271  0947  87          	add	a, a
2272  0948  57          	ld	d, a
2273  0949  4E          	ld	c, (hl)
2274  094A  23          	inc	hl
2275  094B  5E          	ld	e, (hl)
2276  094C  06 04       	ld	b,0x04
2277  094E  79          	ld	a,c
2278  094F              l_player_hit_platform_00260:
2279  094F  CB 3B       	srl	e
2280  0951  1F          	rra
2281  0952  10 FB       	djnz	l_player_hit_platform_00260
2282  0954  07          	rlca
2283  0955  07          	rlca
2284  0956  07          	rlca
2285  0957  07          	rlca
2286  0958  E6 F0       	and	a,0xf0
2287  095A  47          	ld	b, a
2288  095B  21 00 00    	ld	hl,0x0000
2289  095E  E5          	push	hl
2290  095F  21 87 03    	ld	hl,0x0387
2291  0962  E5          	push	hl
2292  0963  58          	ld	e,b
2293  0964  D5          	push	de
2294  0965  CD 00 00    	call	_spr_add_anim
2295  0968  F1          	pop	af
2296  0969  F1          	pop	af
2297  096A  F1          	pop	af
2298  096B  2E 01       	ld	l,0x01
2299  096D  C3 CF 0B    	jp	l_player_hit_platform_00150
2300  0970              l_player_hit_platform_00102:
2301  0970  ED 5B 00 00 	ld	de,(_curr_time)
2302  0974  ED 53 0E 00 	ld	(_spr_timer + 0x000e),de
2303  0978  0A          	ld	a, (bc)
2304  0979  5F          	ld	e, a
2305  097A  16 00       	ld	d,0x00
2306  097C  21 F8 FF    	ld	hl,0xfff8
2307  097F  19          	add	hl,de
2308  0980  EB          	ex	de,hl
2309  0981  7B          	ld	a,e
2310  0982  1E 04       	ld	e,0x04
2311  0984              l_player_hit_platform_00261:
2312  0984  CB 2A       	sra	d
2313  0986  1F          	rra
2314  0987  1D          	dec	e
2315  0988  20 FA       	jr	NZ,l_player_hit_platform_00261
2316  098A  07          	rlca
2317  098B  07          	rlca
2318  098C  07          	rlca
2319  098D  07          	rlca
2320  098E  E6 F0       	and	a,0xf0
2321  0990  C6 08       	add	a,0x08
2322  0992  32 00 00    	ld	(_player_hit_lin),a
2323  0995  21 07 00    	ld	hl,+(_col + 0x0007)
2324  0998  5E          	ld	e, (hl)
2325  0999  CB 43       	bit	0, e
2326  099B  20 06       	jr	NZ,l_player_hit_platform_00113
2327  099D  21 00 00    	ld	hl,_player_hit_col
2328  09A0  73          	ld	(hl), e
2329  09A1  18 2C       	jr	l_player_hit_platform_00114
2330  09A3              l_player_hit_platform_00113:
2331  09A3  2A 07 00    	ld	hl,(_state + 0x0007)
2332  09A6  53          	ld	d, e
2333  09A7  14          	inc	d
2334  09A8  1D          	dec	e
2335  09A9  CB 5D       	bit	3, l
2336  09AB  28 12       	jr	Z,l_player_hit_platform_00110
2337  09AD  3A 00 00    	ld	a,(_g_player_hit_right)
2338  09B0  B7          	or	a, a
2339  09B1  28 06       	jr	Z,l_player_hit_platform_00104
2340  09B3  21 00 00    	ld	hl,_player_hit_col
2341  09B6  72          	ld	(hl), d
2342  09B7  18 16       	jr	l_player_hit_platform_00114
2343  09B9              l_player_hit_platform_00104:
2344  09B9  21 00 00    	ld	hl,_player_hit_col
2345  09BC  73          	ld	(hl), e
2346  09BD  18 10       	jr	l_player_hit_platform_00114
2347  09BF              l_player_hit_platform_00110:
2348  09BF  3A 00 00    	ld	a,(_g_player_hit_left)
2349  09C2  B7          	or	a, a
2350  09C3  28 06       	jr	Z,l_player_hit_platform_00107
2351  09C5  21 00 00    	ld	hl,_player_hit_col
2352  09C8  73          	ld	(hl), e
2353  09C9  18 04       	jr	l_player_hit_platform_00114
2354  09CB              l_player_hit_platform_00107:
2355  09CB  21 00 00    	ld	hl,_player_hit_col
2356  09CE  72          	ld	(hl), d
2357  09CF              l_player_hit_platform_00114:
2358  09CF  11 00 00    	ld	de,_scr_map
2359  09D2  2A 00 00    	ld	hl,(_index1)
2360  09D5  19          	add	hl,de
2361  09D6  7E          	ld	a,(hl)
2362  09D7  FE 5A       	cp	a,0x5a
2363  09D9  28 05       	jr	Z,l_player_hit_platform_00141
2364  09DB  D6 5D       	sub	a,0x5d
2365  09DD  C2 9C 0B    	jp	NZ,l_player_hit_platform_00142
2366  09E0              l_player_hit_platform_00141:
2367  09E0  3A 00 00    	ld	a,(_game_boss)
2368  09E3  B7          	or	a, a
2369  09E4  28 0B       	jr	Z,l_player_hit_platform_00176
2370  09E6  3A 00 00    	ld	a,(_game_mush_count)
2371  09E9  B7          	or	a, a
2372  09EA  28 05       	jr	Z,l_player_hit_platform_00176
2373  09EC  2E 00       	ld	l,0x00
2374  09EE  C3 CF 0B    	jp	l_player_hit_platform_00150
2375  09F1              l_player_hit_platform_00176:
2376  09F1  DD 36 FD 00 	ld	(ix-3),0x00
2377  09F5              l_player_hit_platform_00138:
2378  09F5  DD 7E FD    	ld	a,(ix-3)
2379  09F8  D6 07       	sub	a,0x07
2380  09FA  D2 9C 0B    	jp	NC, l_player_hit_platform_00142
2381  09FD  3E 00       	ld	a, +((_mush_index) & 0xFF)
2382  09FF  DD 86 FD    	add	a,(ix-3)
2383  0A02  6F          	ld	l, a
2384  0A03  3E 00       	ld	a, +((_mush_index) / 256)
2385  0A05  CE 00       	adc	a,0x00
2386  0A07  67          	ld	h, a
2387  0A08  5E          	ld	e, (hl)
2388  0A09  16 00       	ld	d,0x00
2389  0A0B  21 00 00    	ld	hl,_index1
2390  0A0E  7E          	ld	a, (hl)
2391  0A0F  93          	sub	a, e
2392  0A10  C2 96 0B    	jp	NZ,l_player_hit_platform_00137
2393  0A13  23          	inc	hl
2394  0A14  7E          	ld	a, (hl)
2395  0A15  92          	sub	a, d
2396  0A16  C2 96 0B    	jp	NZ,l_player_hit_platform_00137
2397  0A19  0A          	ld	a, (bc)
2398  0A1A  07          	rlca
2399  0A1B  07          	rlca
2400  0A1C  07          	rlca
2401  0A1D  07          	rlca
2402  0A1E  E6 0F       	and	a,0x0f
2403  0A20  07          	rlca
2404  0A21  07          	rlca
2405  0A22  07          	rlca
2406  0A23  07          	rlca
2407  0A24  E6 F0       	and	a,0xf0
2408  0A26  C6 E0       	add	a,0xe0
2409  0A28  32 00 00    	ld	(_s_lin1),a
2410  0A2B  3A 00 00    	ld	a,(_player_hit_col)
2411  0A2E  CB 3F       	srl	a
2412  0A30  87          	add	a, a
2413  0A31  32 00 00    	ld	(_s_col1),a
2414  0A34  1E 00       	ld	e,0x00
2415  0A36              l_player_hit_platform_00120:
2416  0A36  7B          	ld	a, e
2417  0A37  D6 07       	sub	a,0x07
2418  0A39  30 21       	jr	NC,l_player_hit_platform_00122
2419  0A3B  16 00       	ld	d,0x00
2420  0A3D  21 00 00    	ld	hl,_mush_index
2421  0A40  19          	add	hl, de
2422  0A41  56          	ld	d, (hl)
2423  0A42  DD 72 FE    	ld	(ix-2),d
2424  0A45  DD 36 FF 00 	ld	(ix-1),0x00
2425  0A49  21 00 00    	ld	hl,_index1
2426  0A4C  7E          	ld	a, (hl)
2427  0A4D  DD 96 FE    	sub	a,(ix-2)
2428  0A50  20 07       	jr	NZ,l_player_hit_platform_00270
2429  0A52  23          	inc	hl
2430  0A53  7E          	ld	a, (hl)
2431  0A54  DD 96 FF    	sub	a,(ix-1)
2432  0A57  28 03       	jr	Z,l_player_hit_platform_00122
2433  0A59              l_player_hit_platform_00270:
2434  0A59  1C          	inc	e
2435  0A5A  18 DA       	jr	l_player_hit_platform_00120
2436  0A5C              l_player_hit_platform_00122:
2437  0A5C  16 00       	ld	d,0x00
2438  0A5E  21 00 00    	ld	hl,_mush_class
2439  0A61  19          	add	hl, de
2440  0A62  7E          	ld	a, (hl)
2441  0A63  FE 79       	cp	a,0x79
2442  0A65  28 18       	jr	Z,l_player_hit_platform_00123
2443  0A67  FE 7A       	cp	a,0x7a
2444  0A69  28 31       	jr	Z,l_player_hit_platform_00124
2445  0A6B  FE 7B       	cp	a,0x7b
2446  0A6D  28 65       	jr	Z,l_player_hit_platform_00126
2447  0A6F  FE 7C       	cp	a,0x7c
2448  0A71  28 45       	jr	Z,l_player_hit_platform_00125
2449  0A73  FE 7D       	cp	a,0x7d
2450  0A75  CA 0C 0B    	jp	Z,l_player_hit_platform_00128
2451  0A78  D6 7E       	sub	a,0x7e
2452  0A7A  28 74       	jr	Z,l_player_hit_platform_00127
2453  0A7C  C3 26 0B    	jp	l_player_hit_platform_00129
2454  0A7F              l_player_hit_platform_00123:
2455  0A7F  2E 02       	ld	l,0x02
2456  0A81  CD 00 00    	call	_zx_border_fastcall
2457  0A84  3A 00 00    	ld	a,(_s_col1)
2458  0A87  C5          	push	bc
2459  0A88  21 06 FF    	ld	hl,0xff06
2460  0A8B  E5          	push	hl
2461  0A8C  F5          	push	af
2462  0A8D  33          	inc	sp
2463  0A8E  3A 00 00    	ld	a,(_s_lin1)
2464  0A91  F5          	push	af
2465  0A92  33          	inc	sp
2466  0A93  CD 00 00    	call	_enemy_init
2467  0A96  F1          	pop	af
2468  0A97  F1          	pop	af
2469  0A98  C1          	pop	bc
2470  0A99  C3 26 0B    	jp	l_player_hit_platform_00129
2471  0A9C              l_player_hit_platform_00124:
2472  0A9C  2E 02       	ld	l,0x02
2473  0A9E  CD 00 00    	call	_zx_border_fastcall
2474  0AA1  3A 00 00    	ld	a,(_s_col1)
2475  0AA4  C5          	push	bc
2476  0AA5  21 06 01    	ld	hl,0x0106
2477  0AA8  E5          	push	hl
2478  0AA9  F5          	push	af
2479  0AAA  33          	inc	sp
2480  0AAB  3A 00 00    	ld	a,(_s_lin1)
2481  0AAE  F5          	push	af
2482  0AAF  33          	inc	sp
2483  0AB0  CD 00 00    	call	_enemy_init
2484  0AB3  F1          	pop	af
2485  0AB4  F1          	pop	af
2486  0AB5  C1          	pop	bc
2487  0AB6  18 6E       	jr	l_player_hit_platform_00129
2488  0AB8              l_player_hit_platform_00125:
2489  0AB8  2E 01       	ld	l,0x01
2490  0ABA  CD 00 00    	call	_zx_border_fastcall
2491  0ABD  3A 00 00    	ld	a,(_s_col1)
2492  0AC0  C5          	push	bc
2493  0AC1  21 07 01    	ld	hl,0x0107
2494  0AC4  E5          	push	hl
2495  0AC5  F5          	push	af
2496  0AC6  33          	inc	sp
2497  0AC7  3A 00 00    	ld	a,(_s_lin1)
2498  0ACA  F5          	push	af
2499  0ACB  33          	inc	sp
2500  0ACC  CD 00 00    	call	_enemy_init
2501  0ACF  F1          	pop	af
2502  0AD0  F1          	pop	af
2503  0AD1  C1          	pop	bc
2504  0AD2  18 52       	jr	l_player_hit_platform_00129
2505  0AD4              l_player_hit_platform_00126:
2506  0AD4  2E 01       	ld	l,0x01
2507  0AD6  CD 00 00    	call	_zx_border_fastcall
2508  0AD9  3A 00 00    	ld	a,(_s_col1)
2509  0ADC  C5          	push	bc
2510  0ADD  21 07 FF    	ld	hl,0xff07
2511  0AE0  E5          	push	hl
2512  0AE1  F5          	push	af
2513  0AE2  33          	inc	sp
2514  0AE3  3A 00 00    	ld	a,(_s_lin1)
2515  0AE6  F5          	push	af
2516  0AE7  33          	inc	sp
2517  0AE8  CD 00 00    	call	_enemy_init
2518  0AEB  F1          	pop	af
2519  0AEC  F1          	pop	af
2520  0AED  C1          	pop	bc
2521  0AEE  18 36       	jr	l_player_hit_platform_00129
2522  0AF0              l_player_hit_platform_00127:
2523  0AF0  2E 04       	ld	l,0x04
2524  0AF2  CD 00 00    	call	_zx_border_fastcall
2525  0AF5  3A 00 00    	ld	a,(_s_col1)
2526  0AF8  C5          	push	bc
2527  0AF9  21 08 01    	ld	hl,0x0108
2528  0AFC  E5          	push	hl
2529  0AFD  F5          	push	af
2530  0AFE  33          	inc	sp
2531  0AFF  3A 00 00    	ld	a,(_s_lin1)
2532  0B02  F5          	push	af
2533  0B03  33          	inc	sp
2534  0B04  CD 00 00    	call	_enemy_init
2535  0B07  F1          	pop	af
2536  0B08  F1          	pop	af
2537  0B09  C1          	pop	bc
2538  0B0A  18 1A       	jr	l_player_hit_platform_00129
2539  0B0C              l_player_hit_platform_00128:
2540  0B0C  2E 04       	ld	l,0x04
2541  0B0E  CD 00 00    	call	_zx_border_fastcall
2542  0B11  3A 00 00    	ld	a,(_s_col1)
2543  0B14  C5          	push	bc
2544  0B15  21 08 FF    	ld	hl,0xff08
2545  0B18  E5          	push	hl
2546  0B19  F5          	push	af
2547  0B1A  33          	inc	sp
2548  0B1B  3A 00 00    	ld	a,(_s_lin1)
2549  0B1E  F5          	push	af
2550  0B1F  33          	inc	sp
2551  0B20  CD 00 00    	call	_enemy_init
2552  0B23  F1          	pop	af
2553  0B24  F1          	pop	af
2554  0B25  C1          	pop	bc
2555  0B26              l_player_hit_platform_00129:
2556  0B26  21 00 00    	ld	hl,_game_mush_count
2557  0B29  34          	inc	(hl)
2558  0B2A  3A 00 00    	ld	a,(_game_boss)
2559  0B2D  B7          	or	a, a
2560  0B2E  20 66       	jr	NZ,l_player_hit_platform_00137
2561  0B30  3A 00 00    	ld	a,(_index1)
2562  0B33  C6 F0       	add	a,0xf0
2563  0B35  32 00 00    	ld	(_index0),a
2564  0B38  3A 01 00    	ld	a,(_index1 + 1)
2565  0B3B  CE FF       	adc	a,0xff
2566  0B3D  21 01 00    	ld	hl,_index0 + 1
2567  0B40  77          	ld	(hl), a
2568  0B41  3E 00       	ld	a, +((_scr_map) & 0xFF)
2569  0B43  2B          	dec	hl
2570  0B44  86          	add	a, (hl)
2571  0B45  5F          	ld	e, a
2572  0B46  3E 00       	ld	a, +((_scr_map) / 256)
2573  0B48  23          	inc	hl
2574  0B49  8E          	adc	a, (hl)
2575  0B4A  57          	ld	d, a
2576  0B4B  C5          	push	bc
2577  0B4C  D5          	push	de
2578  0B4D  2B          	dec	hl
2579  0B4E  7E          	ld	a, (hl)
2580  0B4F  23          	inc	hl
2581  0B50  66          	ld	h, (hl)
2582  0B51  6F          	ld	l, a
2583  0B52  CD 00 00    	call	_game_match_back
2584  0B55  D1          	pop	de
2585  0B56  C1          	pop	bc
2586  0B57  7D          	ld	a,l
2587  0B58  12          	ld	(de), a
2588  0B59  11 00 00    	ld	de,_scr_map
2589  0B5C  2A 00 00    	ld	hl,(_index1)
2590  0B5F  19          	add	hl,de
2591  0B60  7E          	ld	a,(hl)
2592  0B61  EB          	ex	de,hl
2593  0B62  FE 5A       	cp	a,0x5a
2594  0B64  28 04       	jr	Z,l_player_hit_platform_00130
2595  0B66  D6 5D       	sub	a,0x5d
2596  0B68  20 05       	jr	NZ,l_player_hit_platform_00131
2597  0B6A              l_player_hit_platform_00130:
2598  0B6A  3E 4F       	ld	a,0x4f
2599  0B6C  12          	ld	(de), a
2600  0B6D  18 03       	jr	l_player_hit_platform_00132
2601  0B6F              l_player_hit_platform_00131:
2602  0B6F  3E 54       	ld	a,0x54
2603  0B71  12          	ld	(de), a
2604  0B72              l_player_hit_platform_00132:
2605  0B72  2A 00 00    	ld	hl,(_index1)
2606  0B75  11 F0 FF    	ld	de,0xfff0
2607  0B78  19          	add	hl,de
2608  0B79  EB          	ex	de,hl
2609  0B7A  21 01 00    	ld	hl,_index1 + 1
2610  0B7D  C5          	push	bc
2611  0B7E  EB          	ex	de,hl
2612  0B7F  CD 00 00    	call	_game_obj_set
2613  0B82  C1          	pop	bc
2614  0B83  3A 00 00    	ld	a,(_s_lin1)
2615  0B86  C6 10       	add	a,0x10
2616  0B88  57          	ld	d, a
2617  0B89  3A 00 00    	ld	a,(_s_col1)
2618  0B8C  C5          	push	bc
2619  0B8D  F5          	push	af
2620  0B8E  33          	inc	sp
2621  0B8F  1E 4F       	ld	e,0x4f
2622  0B91  D5          	push	de
2623  0B92  CD 00 00    	call	_NIRVANAP_drawT_callee
2624  0B95  C1          	pop	bc
2625  0B96              l_player_hit_platform_00137:
2626  0B96  DD 34 FD    	inc	(ix-3)
2627  0B99  C3 F5 09    	jp	l_player_hit_platform_00138
2628  0B9C              l_player_hit_platform_00142:
2629  0B9C  CD 00 00    	call	_audio_golpe
2630  0B9F  2E 01       	ld	l,0x01
2631  0BA1  CD 00 00    	call	_spr_brick_anim
2632  0BA4  2A FF FF    	ld	hl,(_player_hit_col - 1)
2633  0BA7  3A 00 00    	ld	a,(_player_hit_lin)
2634  0BAA  6F          	ld	l,a
2635  0BAB  E5          	push	hl
2636  0BAC  CD 00 00    	call	_spr_calc_index
2637  0BAF  F1          	pop	af
2638  0BB0  22 00 00    	ld	(_index1),hl
2639  0BB3  3E 10       	ld	a,0x10
2640  0BB5  21 00 00    	ld	hl,_index1
2641  0BB8  BE          	cp	a, (hl)
2642  0BB9  3E 00       	ld	a,0x00
2643  0BBB  23          	inc	hl
2644  0BBC  9E          	sbc	a, (hl)
2645  0BBD  30 0A       	jr	NC,l_player_hit_platform_00145
2646  0BBF  2B          	dec	hl
2647  0BC0  7E          	ld	a, (hl)
2648  0BC1  C6 F0       	add	a,0xf0
2649  0BC3  32 00 00    	ld	(_sprite_curr_index),a
2650  0BC6  CD 57 07    	call	_player_pick_item
2651  0BC9              l_player_hit_platform_00145:
2652  0BC9  2E 01       	ld	l,0x01
2653  0BCB  18 02       	jr	l_player_hit_platform_00150
2654  0BCD              l_player_hit_platform_00147:
2655  0BCD  2E 00       	ld	l,0x00
2656  0BCF              l_player_hit_platform_00150:
2657  0BCF  DD F9       	ld	sp, ix
2658  0BD1  DD E1       	pop	ix
2659  0BD3  C9          	ret
2660  0BD4              	SECTION code_compiler
2661  0BD4              ;	---------------------------------
2662  0BD4              ; Function player_hit_platform_clear
2663  0BD4              ; ---------------------------------
2664  0BD4              _player_hit_platform_clear:
2665  0BD4  3E 04       	ld	a,0x04
2666  0BD6  F5          	push	af
2667  0BD7  33          	inc	sp
2668  0BD8  21 0E 00    	ld	hl, +(_spr_timer + 0x000e)
2669  0BDB  E5          	push	hl
2670  0BDC  CD 00 00    	call	_game_check_time
2671  0BDF  F1          	pop	af
2672  0BE0  33          	inc	sp
2673  0BE1  7D          	ld	a, l
2674  0BE2  B7          	or	a, a
2675  0BE3  C8          	ret	Z
2676  0BE4  2A FF FF    	ld	hl,(_player_hit_col - 1)
2677  0BE7  3A 00 00    	ld	a,(_player_hit_lin)
2678  0BEA  6F          	ld	l,a
2679  0BEB  E5          	push	hl
2680  0BEC  CD 00 00    	call	_spr_calc_index
2681  0BEF  F1          	pop	af
2682  0BF0  22 00 00    	ld	(_index1),hl
2683  0BF3  2E 00       	ld	l,0x00
2684  0BF5  CD 00 00    	call	_spr_brick_anim
2685  0BF8  21 00 00    	ld	hl,_player_hit_lin
2686  0BFB  36 00       	ld	(hl),0x00
2687  0BFD  21 00 00    	ld	hl,_player_hit_col
2688  0C00  36 00       	ld	(hl),0x00
2689  0C02  C9          	ret
2690  0C03              	SECTION code_compiler
2691  0C03              ;	---------------------------------
2692  0C03              ; Function player_score_add
2693  0C03              ; ---------------------------------
2694  0C03              _player_score_add:
2695  0C03  ED 4B 00 00 	ld	bc,(_player_score)
2696  0C07  09          	add	hl,bc
2697  0C08  22 00 00    	ld	(_player_score),hl
2698  0C0B  21 00 00    	ld	hl,_player_lvl
2699  0C0E  7E          	ld	a, (hl)
2700  0C0F  D6 0A       	sub	a,0x0a
2701  0C11  30 45       	jr	NC,l_player_score_add_00104
2702  0C13  01 00 00    	ld	bc,_player_lvl_table+0
2703  0C16  6E          	ld	l,(hl)
2704  0C17  26 00       	ld	h,0x00
2705  0C19  29          	add	hl, hl
2706  0C1A  09          	add	hl, bc
2707  0C1B  4E          	ld	c, (hl)
2708  0C1C  23          	inc	hl
2709  0C1D  46          	ld	b, (hl)
2710  0C1E  21 00 00    	ld	hl,_player_score
2711  0C21  7E          	ld	a, (hl)
2712  0C22  91          	sub	a, c
2713  0C23  23          	inc	hl
2714  0C24  7E          	ld	a, (hl)
2715  0C25  98          	sbc	a, b
2716  0C26  38 30       	jr	C,l_player_score_add_00104
2717  0C28  21 00 00    	ld	hl,_player_lvl
2718  0C2B  34          	inc	(hl)
2719  0C2C  CD 00 00    	call	_game_update_stats
2720  0C2F  CD 00 00    	call	_spr_flatten
2721  0C32  CD 00 00    	call	_audio_efecto
2722  0C35  21 16 00    	ld	hl,___str_2
2723  0C38  E5          	push	hl
2724  0C39  21 0C 0C    	ld	hl,0x0c0c
2725  0C3C  E5          	push	hl
2726  0C3D  CD 00 00    	call	_zx_print_str
2727  0C40  AF          	xor	a, a
2728  0C41  F5          	push	af
2729  0C42  33          	inc	sp
2730  0C43  21 3C 00    	ld	hl,0x003c
2731  0C46  E5          	push	hl
2732  0C47  21 0C 15    	ld	hl,0x150c
2733  0C4A  E5          	push	hl
2734  0C4B  3E 0C       	ld	a,0x0c
2735  0C4D  F5          	push	af
2736  0C4E  33          	inc	sp
2737  0C4F  CD 00 00    	call	_game_colour_message
2738  0C52  F1          	pop	af
2739  0C53  F1          	pop	af
2740  0C54  F1          	pop	af
2741  0C55  CD 00 00    	call	_spr_unflattenP1
2742  0C58              l_player_score_add_00104:
2743  0C58  3A 00 00    	ld	a,(_game_score_top)
2744  0C5B  21 00 00    	ld	hl,_player_score
2745  0C5E  96          	sub	a, (hl)
2746  0C5F  3A 01 00    	ld	a,(_game_score_top + 1)
2747  0C62  23          	inc	hl
2748  0C63  9E          	sbc	a, (hl)
2749  0C64  30 06       	jr	NC,l_player_score_add_00106
2750  0C66  2A 00 00    	ld	hl,(_player_score)
2751  0C69  22 00 00    	ld	(_game_score_top),hl
2752  0C6C              l_player_score_add_00106:
2753  0C6C  CD 00 00    	call	_game_print_score
2754  0C6F  C9          	ret
2755  0C70              	SECTION rodata_compiler
2756  0016              ___str_2:
2757  0016  4C 45 56 45 4C 20 55 50 21 
                        	DEFM "LEVEL UP!"
2758  001F  00          	DEFB 0x00
2759  0020              	SECTION code_compiler
2760  0C70              ;	---------------------------------
2761  0C70              ; Function player_check_floor
2762  0C70              ; ---------------------------------
2763  0C70              _player_check_floor:
2764  0C70  CD 00 00    	call	___sdcc_enter_ix
2765  0C73  F5          	push	af
2766  0C74  F5          	push	af
2767  0C75  F5          	push	af
2768  0C76  21 07 00    	ld	hl,+(_col + 0x0007)
2769  0C79  56          	ld	d, (hl)
2770  0C7A  3A 07 00    	ld	a,(_lin + 0x0007)
2771  0C7D  C6 10       	add	a,0x10
2772  0C7F  5F          	ld	e, a
2773  0C80  D5          	push	de
2774  0C81  CD 00 00    	call	_spr_calc_index
2775  0C84  F1          	pop	af
2776  0C85  DD 75 FC    	ld	(ix-4),l
2777  0C88  DD 74 FD    	ld	(ix-3),h
2778  0C8B  01 00 00    	ld	bc,_scr_map+0
2779  0C8E  79          	ld	a, c
2780  0C8F  DD 86 FC    	add	a,(ix-4)
2781  0C92  DD 77 FE    	ld	(ix-2),a
2782  0C95  78          	ld	a, b
2783  0C96  DD 8E FD    	adc	a,(ix-3)
2784  0C99  DD 6E FE    	ld	l,(ix-2)
2785  0C9C  DD 77 FF    	ld	(ix-1),a
2786  0C9F  67          	ld	h,a
2787  0CA0  7E          	ld	a, (hl)
2788  0CA1  DD 77 FB    	ld	(ix-5),a
2789  0CA4  DD 6E FC    	ld	l,(ix-4)
2790  0CA7  DD 66 FD    	ld	h,(ix-3)
2791  0CAA  23          	inc	hl
2792  0CAB  09          	add	hl,bc
2793  0CAC  3A 00 00    	ld	a,(_s_lin0)
2794  0CAF  D6 90       	sub	a,0x90
2795  0CB1  4D          	ld	c,l
2796  0CB2  44          	ld	b,h
2797  0CB3  20 26       	jr	NZ,l_player_check_floor_00108
2798  0CB5  3A 00 00    	ld	a,(_map_heigth)
2799  0CB8  C5          	push	bc
2800  0CB9  F5          	push	af
2801  0CBA  33          	inc	sp
2802  0CBB  3A 00 00    	ld	a,(_scr_curr)
2803  0CBE  F5          	push	af
2804  0CBF  33          	inc	sp
2805  0CC0  CD 00 00    	call	__divuchar_callee
2806  0CC3  C1          	pop	bc
2807  0CC4  7D          	ld	a,l
2808  0CC5  3C          	inc	a
2809  0CC6  32 00 00    	ld	(_tmp1),a
2810  0CC9  21 00 00    	ld	hl,_map_heigth
2811  0CCC  96          	sub	a, (hl)
2812  0CCD  30 06       	jr	NC,l_player_check_floor_00102
2813  0CCF  DD 36 FB 00 	ld	(ix-5),0x00
2814  0CD3  18 16       	jr	l_player_check_floor_00109
2815  0CD5              l_player_check_floor_00102:
2816  0CD5  DD 36 FB 48 	ld	(ix-5),0x48
2817  0CD9  18 10       	jr	l_player_check_floor_00109
2818  0CDB              l_player_check_floor_00108:
2819  0CDB  3A 07 00    	ld	a,(_col + 0x0007)
2820  0CDE  0F          	rrca
2821  0CDF  38 06       	jr	C,l_player_check_floor_00105
2822  0CE1  DD 36 FA 00 	ld	(ix-6),0x00
2823  0CE5  18 04       	jr	l_player_check_floor_00109
2824  0CE7              l_player_check_floor_00105:
2825  0CE7  0A          	ld	a, (bc)
2826  0CE8  DD 77 FA    	ld	(ix-6),a
2827  0CEB              l_player_check_floor_00109:
2828  0CEB  DD 7E FB    	ld	a,(ix-5)
2829  0CEE  D6 3A       	sub	a,0x3a
2830  0CF0  38 07       	jr	C,l_player_check_floor_00132
2831  0CF2  DD 7E FB    	ld	a,(ix-5)
2832  0CF5  D6 60       	sub	a,0x60
2833  0CF7  38 32       	jr	C,l_player_check_floor_00128
2834  0CF9              l_player_check_floor_00132:
2835  0CF9  DD 7E FA    	ld	a,(ix-6)
2836  0CFC  D6 3A       	sub	a,0x3a
2837  0CFE  38 07       	jr	C,l_player_check_floor_00127
2838  0D00  DD 7E FA    	ld	a,(ix-6)
2839  0D03  D6 60       	sub	a,0x60
2840  0D05  38 24       	jr	C,l_player_check_floor_00128
2841  0D07              l_player_check_floor_00127:
2842  0D07  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
2843  0D0A  36 02       	ld	(hl),0x02
2844  0D0C  21 00 00    	ld	hl,_s_state
2845  0D0F  CB CE       	set	1, (hl)
2846  0D11  2E 00       	ld	l,0x00
2847  0D13  CD 34 06    	call	_player_check_stairs
2848  0D16  3A 00 00    	ld	a,(_player_onstair)
2849  0D19  B7          	or	a, a
2850  0D1A  C2 C1 0D    	jp	NZ, l_player_check_floor_00133
2851  0D1D  3A 00 00    	ld	a,(_s_lin0)
2852  0D20  D6 90       	sub	a,0x90
2853  0D22  C2 C1 0D    	jp	NZ,l_player_check_floor_00133
2854  0D25  CD 00 00    	call	_spr_page_down
2855  0D28  C3 C1 0D    	jp	l_player_check_floor_00133
2856  0D2B              l_player_check_floor_00128:
2857  0D2B  C5          	push	bc
2858  0D2C  3E 10       	ld	a,0x10
2859  0D2E  F5          	push	af
2860  0D2F  33          	inc	sp
2861  0D30  21 00 00    	ld	hl,_player_brick_time
2862  0D33  E5          	push	hl
2863  0D34  CD 00 00    	call	_game_check_time
2864  0D37  F1          	pop	af
2865  0D38  33          	inc	sp
2866  0D39  C1          	pop	bc
2867  0D3A  7D          	ld	a,l
2868  0D3B  B7          	or	a, a
2869  0D3C  CA C1 0D    	jp	Z, l_player_check_floor_00133
2870  0D3F  2A 00 00    	ld	hl,(_curr_time)
2871  0D42  22 00 00    	ld	(_player_brick_time),hl
2872  0D45  DD 7E FB    	ld	a,(ix-5)
2873  0D48  D6 40       	sub	a,0x40
2874  0D4A  20 18       	jr	NZ,l_player_check_floor_00114
2875  0D4C  C5          	push	bc
2876  0D4D  DD 6E FC    	ld	l,(ix-4)
2877  0D50  DD 66 FD    	ld	h,(ix-3)
2878  0D53  CD 00 00    	call	_game_match_back
2879  0D56  C1          	pop	bc
2880  0D57  5D          	ld	e,l
2881  0D58  DD 6E FE    	ld	l,(ix-2)
2882  0D5B  DD 66 FF    	ld	h,(ix-1)
2883  0D5E  73          	ld	(hl), e
2884  0D5F  C5          	push	bc
2885  0D60  CD C6 0D    	call	_player_gasta_brick
2886  0D63  C1          	pop	bc
2887  0D64              l_player_check_floor_00114:
2888  0D64  DD 7E FB    	ld	a,(ix-5)
2889  0D67  D6 3F       	sub	a,0x3f
2890  0D69  20 0D       	jr	NZ,l_player_check_floor_00116
2891  0D6B  DD 6E FE    	ld	l,(ix-2)
2892  0D6E  DD 66 FF    	ld	h,(ix-1)
2893  0D71  36 40       	ld	(hl),0x40
2894  0D73  C5          	push	bc
2895  0D74  CD C6 0D    	call	_player_gasta_brick
2896  0D77  C1          	pop	bc
2897  0D78              l_player_check_floor_00116:
2898  0D78  DD 7E FB    	ld	a,(ix-5)
2899  0D7B  D6 3E       	sub	a,0x3e
2900  0D7D  20 0D       	jr	NZ,l_player_check_floor_00118
2901  0D7F  DD 6E FE    	ld	l,(ix-2)
2902  0D82  DD 66 FF    	ld	h,(ix-1)
2903  0D85  36 3F       	ld	(hl),0x3f
2904  0D87  C5          	push	bc
2905  0D88  CD C6 0D    	call	_player_gasta_brick
2906  0D8B  C1          	pop	bc
2907  0D8C              l_player_check_floor_00118:
2908  0D8C  DD 7E FA    	ld	a,(ix-6)
2909  0D8F  D6 40       	sub	a,0x40
2910  0D91  20 12       	jr	NZ,l_player_check_floor_00120
2911  0D93  C5          	push	bc
2912  0D94  DD 6E FC    	ld	l,(ix-4)
2913  0D97  DD 66 FD    	ld	h,(ix-3)
2914  0D9A  CD 00 00    	call	_game_match_back
2915  0D9D  C1          	pop	bc
2916  0D9E  7D          	ld	a,l
2917  0D9F  02          	ld	(bc), a
2918  0DA0  C5          	push	bc
2919  0DA1  CD C6 0D    	call	_player_gasta_brick
2920  0DA4  C1          	pop	bc
2921  0DA5              l_player_check_floor_00120:
2922  0DA5  DD 7E FA    	ld	a,(ix-6)
2923  0DA8  D6 3F       	sub	a,0x3f
2924  0DAA  20 08       	jr	NZ,l_player_check_floor_00122
2925  0DAC  3E 40       	ld	a,0x40
2926  0DAE  02          	ld	(bc), a
2927  0DAF  C5          	push	bc
2928  0DB0  CD C6 0D    	call	_player_gasta_brick
2929  0DB3  C1          	pop	bc
2930  0DB4              l_player_check_floor_00122:
2931  0DB4  DD 7E FA    	ld	a,(ix-6)
2932  0DB7  D6 3E       	sub	a,0x3e
2933  0DB9  20 06       	jr	NZ,l_player_check_floor_00133
2934  0DBB  3E 3F       	ld	a,0x3f
2935  0DBD  02          	ld	(bc), a
2936  0DBE  CD C6 0D    	call	_player_gasta_brick
2937  0DC1              l_player_check_floor_00133:
2938  0DC1  DD F9       	ld	sp, ix
2939  0DC3  DD E1       	pop	ix
2940  0DC5  C9          	ret
2941  0DC6              	SECTION code_compiler
2942  0DC6              ;	---------------------------------
2943  0DC6              ; Function player_gasta_brick
2944  0DC6              ; ---------------------------------
2945  0DC6              _player_gasta_brick:
2946  0DC6  3A 00 00    	ld	a,(_s_lin0)
2947  0DC9  32 00 00    	ld	(_s_lin1),a
2948  0DCC  3A 00 00    	ld	a,(_s_col0)
2949  0DCF  32 00 00    	ld	(_s_col1),a
2950  0DD2  3A 07 00    	ld	a,(_lin + 0x0007)
2951  0DD5  C6 10       	add	a,0x10
2952  0DD7  32 00 00    	ld	(_s_lin0),a
2953  0DDA  3A 07 00    	ld	a,(_col + 0x0007)
2954  0DDD  32 00 00    	ld	(_s_col0),a
2955  0DE0  CD 00 00    	call	_spr_back_repaint
2956  0DE3  3A 00 00    	ld	a,(_s_lin1)
2957  0DE6  32 00 00    	ld	(_s_lin0),a
2958  0DE9  3A 00 00    	ld	a,(_s_col1)
2959  0DEC  32 00 00    	ld	(_s_col0),a
2960  0DEF  C9          	ret
2961  0DF0              	SECTION code_compiler
2962  0DF0              ;	---------------------------------
2963  0DF0              ; Function player_move_jump
2964  0DF0              ; ---------------------------------
2965  0DF0              _player_move_jump:
2966  0DF0  21 00 00    	ld	hl,_game_gravity
2967  0DF3  4E          	ld	c, (hl)
2968  0DF4  21 00 00    	ld	hl,_player_vel_y
2969  0DF7  7E          	ld	a, (hl)
2970  0DF8  81          	add	a, c
2971  0DF9  77          	ld	(hl), a
2972  0DFA  3A 00 00    	ld	a,(_player_vel_inc)
2973  0DFD  B7          	or	a, a
2974  0DFE  28 4A       	jr	Z,l_player_move_jump_00109
2975  0E00  3A 00 00    	ld	a,(_dirs)
2976  0E03  CB 07       	rlc	a
2977  0E05  E6 01       	and	a,0x01
2978  0E07  4F          	ld	c, a
2979  0E08  3A 00 00    	ld	a,(_game_2buttons)
2980  0E0B  B7          	or	a, a
2981  0E0C  28 06       	jr	Z,l_player_move_jump_00102
2982  0E0E  79          	ld	a, c
2983  0E0F  EE 01       	xor	a,0x01
2984  0E11  4F          	ld	c, a
2985  0E12  18 15       	jr	l_player_move_jump_00103
2986  0E14              l_player_move_jump_00102:
2987  0E14  CB 41       	bit	0, c
2988  0E16  28 07       	jr	Z,l_player_move_jump_00154
2989  0E18  21 00 00    	ld	hl,_dirs
2990  0E1B  CB 46       	bit	0, (hl)
2991  0E1D  20 04       	jr	NZ,l_player_move_jump_00155
2992  0E1F              l_player_move_jump_00154:
2993  0E1F  0E 00       	ld	c,0x00
2994  0E21  18 02       	jr	l_player_move_jump_00156
2995  0E23              l_player_move_jump_00155:
2996  0E23  0E 01       	ld	c,0x01
2997  0E25              l_player_move_jump_00156:
2998  0E25  79          	ld	a, c
2999  0E26  EE 01       	xor	a,0x01
3000  0E28  4F          	ld	c, a
3001  0E29              l_player_move_jump_00103:
3002  0E29  79          	ld	a, c
3003  0E2A  B7          	or	a, a
3004  0E2B  28 1D       	jr	Z,l_player_move_jump_00109
3005  0E2D  3A 00 00    	ld	a,(_player_vel_y1)
3006  0E30  21 00 00    	ld	hl,_player_vel_y
3007  0E33  96          	sub	a, (hl)
3008  0E34  E2 39 0E    	jp	PO, l_player_move_jump_00259
3009  0E37  EE 80       	xor	a,0x80
3010  0E39              l_player_move_jump_00259:
3011  0E39  F2 4A 0E    	jp	P, l_player_move_jump_00109
3012  0E3C  21 00 00    	ld	hl,_player_vel_y
3013  0E3F  CB 7E       	bit	7,(hl)
3014  0E41  28 07       	jr	Z,l_player_move_jump_00109
3015  0E43  36 00       	ld	(hl),0x00
3016  0E45  21 00 00    	ld	hl,_player_vel_inc
3017  0E48  36 00       	ld	(hl),0x00
3018  0E4A              l_player_move_jump_00109:
3019  0E4A  3E 78       	ld	a,0x78
3020  0E4C  21 00 00    	ld	hl,_player_vel_y
3021  0E4F  96          	sub	a, (hl)
3022  0E50  E2 55 0E    	jp	PO, l_player_move_jump_00260
3023  0E53  EE 80       	xor	a,0x80
3024  0E55              l_player_move_jump_00260:
3025  0E55  F2 5D 0E    	jp	P, l_player_move_jump_00111
3026  0E58  21 00 00    	ld	hl,_player_vel_y
3027  0E5B  36 78       	ld	(hl),0x78
3028  0E5D              l_player_move_jump_00111:
3029  0E5D  21 00 00    	ld	hl,_player_vel_y
3030  0E60  7E          	ld	a, (hl)
3031  0E61  EE 80       	xor	a,0x80
3032  0E63  D6 08       	sub	a,0x08
3033  0E65  30 02       	jr	NC,l_player_move_jump_00113
3034  0E67  36 88       	ld	(hl),0x88
3035  0E69              l_player_move_jump_00113:
3036  0E69  3A 00 00    	ld	a,(_player_vel_y)
3037  0E6C  4F          	ld	c,a
3038  0E6D  17          	rla
3039  0E6E  9F          	sbc	a, a
3040  0E6F  47          	ld	b, a
3041  0E70  CB 41       	bit	0,c
3042  0E72  21 00 00    	ld	hl,_s_lin1
3043  0E75  71          	ld	(hl),c
3044  0E76  28 04       	jr	Z,l_player_move_jump_00115
3045  0E78  21 00 00    	ld	hl,_s_lin1
3046  0E7B  35          	dec	(hl)
3047  0E7C              l_player_move_jump_00115:
3048  0E7C  3A 07 00    	ld	a,(_lin + 0x0007)
3049  0E7F  21 00 00    	ld	hl,_s_lin1
3050  0E82  86          	add	a, (hl)
3051  0E83  77          	ld	(hl), a
3052  0E84  CB 78       	bit	7, b
3053  0E86  28 5C       	jr	Z,l_player_move_jump_00141
3054  0E88  21 00 00    	ld	hl,_s_state
3055  0E8B  CD 00 00    	call	_spr_set_up
3056  0E8E  3E 90       	ld	a,0x90
3057  0E90  21 00 00    	ld	hl,_s_lin1
3058  0E93  96          	sub	a, (hl)
3059  0E94  30 11       	jr	NC,l_player_move_jump_00120
3060  0E96  CD 00 00    	call	_spr_page_up
3061  0E99  7D          	ld	a, l
3062  0E9A  B7          	or	a, a
3063  0E9B  28 05       	jr	Z,l_player_move_jump_00117
3064  0E9D  2E 00       	ld	l,0x00
3065  0E9F  C3 9B 0F    	jp	l_player_move_jump_00152
3066  0EA2              l_player_move_jump_00117:
3067  0EA2  21 00 00    	ld	hl,_s_lin1
3068  0EA5  36 00       	ld	(hl),0x00
3069  0EA7              l_player_move_jump_00120:
3070  0EA7  21 07 00    	ld	hl,+(_col + 0x0007)
3071  0EAA  46          	ld	b, (hl)
3072  0EAB  C5          	push	bc
3073  0EAC  33          	inc	sp
3074  0EAD  3A 00 00    	ld	a,(_s_lin1)
3075  0EB0  F5          	push	af
3076  0EB1  33          	inc	sp
3077  0EB2  CD 00 00    	call	_game_check_map
3078  0EB5  F1          	pop	af
3079  0EB6  7C          	ld	a,h
3080  0EB7  B5          	or	a,l
3081  0EB8  28 21       	jr	Z,l_player_move_jump_00124
3082  0EBA  CD 05 09    	call	_player_hit_platform
3083  0EBD  7D          	ld	a, l
3084  0EBE  B7          	or	a, a
3085  0EBF  28 12       	jr	Z,l_player_move_jump_00122
3086  0EC1  3A 07 00    	ld	a,(_lin + 0x0007)
3087  0EC4  07          	rlca
3088  0EC5  07          	rlca
3089  0EC6  07          	rlca
3090  0EC7  07          	rlca
3091  0EC8  E6 0F       	and	a,0x0f
3092  0ECA  07          	rlca
3093  0ECB  07          	rlca
3094  0ECC  07          	rlca
3095  0ECD  07          	rlca
3096  0ECE  E6 F0       	and	a,0xf0
3097  0ED0  32 07 00    	ld	((_lin + 0x0007)),a
3098  0ED3              l_player_move_jump_00122:
3099  0ED3  21 00 00    	ld	hl,_player_vel_y
3100  0ED6  36 00       	ld	(hl),0x00
3101  0ED8  C3 63 0F    	jp	l_player_move_jump_00142
3102  0EDB              l_player_move_jump_00124:
3103  0EDB  3A 00 00    	ld	a,(_s_lin1)
3104  0EDE  32 07 00    	ld	((_lin + 0x0007)),a
3105  0EE1  C3 63 0F    	jp	l_player_move_jump_00142
3106  0EE4              l_player_move_jump_00141:
3107  0EE4  21 00 00    	ld	hl,_s_state
3108  0EE7  CD 00 00    	call	_spr_set_down
3109  0EEA  3E 90       	ld	a,0x90
3110  0EEC  21 00 00    	ld	hl,_s_lin1
3111  0EEF  96          	sub	a, (hl)
3112  0EF0  30 11       	jr	NC,l_player_move_jump_00130
3113  0EF2  CD 00 00    	call	_spr_page_down
3114  0EF5  7D          	ld	a, l
3115  0EF6  B7          	or	a, a
3116  0EF7  28 05       	jr	Z,l_player_move_jump_00127
3117  0EF9  2E 00       	ld	l,0x00
3118  0EFB  C3 9B 0F    	jp	l_player_move_jump_00152
3119  0EFE              l_player_move_jump_00127:
3120  0EFE  21 00 00    	ld	hl,_s_lin1
3121  0F01  36 90       	ld	(hl),0x90
3122  0F03              l_player_move_jump_00130:
3123  0F03  21 07 00    	ld	hl,+(_col + 0x0007)
3124  0F06  56          	ld	d, (hl)
3125  0F07  3A 00 00    	ld	a,(_s_lin1)
3126  0F0A  C6 10       	add	a,0x10
3127  0F0C  5F          	ld	e, a
3128  0F0D  D5          	push	de
3129  0F0E  CD 00 00    	call	_game_check_map
3130  0F11  F1          	pop	af
3131  0F12  7C          	ld	a,h
3132  0F13  B5          	or	a,l
3133  0F14  28 47       	jr	Z,l_player_move_jump_00138
3134  0F16  2E 00       	ld	l,0x00
3135  0F18  CD 34 06    	call	_player_check_stairs
3136  0F1B  3A 00 00    	ld	a,(_player_onstair)
3137  0F1E  B7          	or	a, a
3138  0F1F  20 05       	jr	NZ,l_player_move_jump_00132
3139  0F21  2E 01       	ld	l,0x01
3140  0F23  CD 34 06    	call	_player_check_stairs
3141  0F26              l_player_move_jump_00132:
3142  0F26  3A 00 00    	ld	a,(_player_onstair)
3143  0F29  B7          	or	a, a
3144  0F2A  20 12       	jr	NZ,l_player_move_jump_00134
3145  0F2C  3A 00 00    	ld	a,(_s_lin1)
3146  0F2F  07          	rlca
3147  0F30  07          	rlca
3148  0F31  07          	rlca
3149  0F32  07          	rlca
3150  0F33  E6 0F       	and	a,0x0f
3151  0F35  07          	rlca
3152  0F36  07          	rlca
3153  0F37  07          	rlca
3154  0F38  07          	rlca
3155  0F39  E6 F0       	and	a,0xf0
3156  0F3B  32 07 00    	ld	((_lin + 0x0007)),a
3157  0F3E              l_player_move_jump_00134:
3158  0F3E  21 00 00    	ld	hl,_player_vel_y
3159  0F41  36 00       	ld	(hl),0x00
3160  0F43  21 00 00    	ld	hl,_s_state
3161  0F46  7E          	ld	a,(hl)
3162  0F47  E6 FC       	and	a,+(0xfd&0xfe)
3163  0F49  77          	ld	(hl),a
3164  0F4A  3A 07 00    	ld	a,(_lin + 0x0007)
3165  0F4D  D6 90       	sub	a,0x90
3166  0F4F  38 03       	jr	C,l_player_move_jump_00136
3167  0F51  CD 00 00    	call	_spr_page_down
3168  0F54              l_player_move_jump_00136:
3169  0F54  21 07 00    	ld	hl, +(_colint + 0x0007)
3170  0F57  36 00       	ld	(hl),0x00
3171  0F59  2E 01       	ld	l,0x01
3172  0F5B  18 3E       	jr	l_player_move_jump_00152
3173  0F5D              l_player_move_jump_00138:
3174  0F5D  3A 00 00    	ld	a,(_s_lin1)
3175  0F60  32 07 00    	ld	((_lin + 0x0007)),a
3176  0F63              l_player_move_jump_00142:
3177  0F63  21 00 00    	ld	hl,_s_state
3178  0F66  CB 5E       	bit	3, (hl)
3179  0F68  20 21       	jr	NZ,l_player_move_jump_00148
3180  0F6A  21 00 00    	ld	hl,_s_state
3181  0F6D  CB 56       	bit	2, (hl)
3182  0F6F  20 1A       	jr	NZ,l_player_move_jump_00148
3183  0F71  21 00 00    	ld	hl,_dirs
3184  0F74  CB 56       	bit	2, (hl)
3185  0F76  28 06       	jr	Z,l_player_move_jump_00144
3186  0F78  21 00 00    	ld	hl,_s_state
3187  0F7B  CD 00 00    	call	_spr_set_left
3188  0F7E              l_player_move_jump_00144:
3189  0F7E  21 00 00    	ld	hl,_dirs
3190  0F81  CB 5E       	bit	3, (hl)
3191  0F83  28 06       	jr	Z,l_player_move_jump_00148
3192  0F85  21 00 00    	ld	hl,_s_state
3193  0F88  CD 00 00    	call	_spr_set_right
3194  0F8B              l_player_move_jump_00148:
3195  0F8B  CD 00 00    	call	_spr_move_horizontal
3196  0F8E  7D          	ld	a, l
3197  0F8F  B7          	or	a, a
3198  0F90  28 07       	jr	Z,l_player_move_jump_00151
3199  0F92  21 00 00    	ld	hl,_s_state
3200  0F95  7E          	ld	a,(hl)
3201  0F96  E6 F3       	and	a,+(0xf7&0xfb)
3202  0F98  77          	ld	(hl),a
3203  0F99              l_player_move_jump_00151:
3204  0F99  2E 00       	ld	l,0x00
3205  0F9B              l_player_move_jump_00152:
3206  0F9B  C9          	ret
3207  0F9C              	SECTION code_compiler
3208  0F9C              ;	---------------------------------
3209  0F9C              ; Function player_open_door
3210  0F9C              ; ---------------------------------
3211  0F9C              _player_open_door:
3212  0F9C  CD 00 00    	call	___sdcc_enter_ix
3213  0F9F  0E 00       	ld	c,0x00
3214  0FA1  DD 7E 06    	ld	a,(ix+6)
3215  0FA4  D6 48       	sub	a,0x48
3216  0FA6  28 17       	jr	Z,l_player_open_door_00101
3217  0FA8  DD 7E 06    	ld	a,(ix+6)
3218  0FAB  D6 49       	sub	a,0x49
3219  0FAD  28 1F       	jr	Z,l_player_open_door_00104
3220  0FAF  DD 7E 06    	ld	a,(ix+6)
3221  0FB2  D6 4A       	sub	a,0x4a
3222  0FB4  28 27       	jr	Z,l_player_open_door_00107
3223  0FB6  DD 7E 06    	ld	a,(ix+6)
3224  0FB9  D6 4B       	sub	a,0x4b
3225  0FBB  28 2F       	jr	Z,l_player_open_door_00110
3226  0FBD  18 3A       	jr	l_player_open_door_00113
3227  0FBF              l_player_open_door_00101:
3228  0FBF  3A 00 00    	ld	a,(_player_keys)
3229  0FC2  B7          	or	a, a
3230  0FC3  28 34       	jr	Z,l_player_open_door_00113
3231  0FC5  2E 07       	ld	l,0x07
3232  0FC7  CD 00 00    	call	_zx_border_fastcall
3233  0FCA  0E 01       	ld	c,0x01
3234  0FCC  18 2B       	jr	l_player_open_door_00113
3235  0FCE              l_player_open_door_00104:
3236  0FCE  3A 01 00    	ld	a,(_player_keys + 0x0001)
3237  0FD1  B7          	or	a, a
3238  0FD2  28 25       	jr	Z,l_player_open_door_00113
3239  0FD4  2E 02       	ld	l,0x02
3240  0FD6  CD 00 00    	call	_zx_border_fastcall
3241  0FD9  0E 01       	ld	c,0x01
3242  0FDB  18 1C       	jr	l_player_open_door_00113
3243  0FDD              l_player_open_door_00107:
3244  0FDD  3A 02 00    	ld	a,(_player_keys + 0x0002)
3245  0FE0  B7          	or	a, a
3246  0FE1  28 16       	jr	Z,l_player_open_door_00113
3247  0FE3  2E 04       	ld	l,0x04
3248  0FE5  CD 00 00    	call	_zx_border_fastcall
3249  0FE8  0E 01       	ld	c,0x01
3250  0FEA  18 0D       	jr	l_player_open_door_00113
3251  0FEC              l_player_open_door_00110:
3252  0FEC  3A 03 00    	ld	a,(_player_keys + 0x0003)
3253  0FEF  B7          	or	a, a
3254  0FF0  28 07       	jr	Z,l_player_open_door_00113
3255  0FF2  2E 05       	ld	l,0x05
3256  0FF4  CD 00 00    	call	_zx_border_fastcall
3257  0FF7  0E 01       	ld	c,0x01
3258  0FF9              l_player_open_door_00113:
3259  0FF9  79          	ld	a, c
3260  0FFA  B7          	or	a, a
3261  0FFB  20 06       	jr	NZ,l_player_open_door_00114
3262  0FFD  3A 00 00    	ld	a,(_game_inmune)
3263  1000  B7          	or	a, a
3264  1001  28 23       	jr	Z,l_player_open_door_00115
3265  1003              l_player_open_door_00114:
3266  1003  CD 00 00    	call	_audio_pierto_abierta
3267  1006  3E 00       	ld	a, +((_scr_map) & 0xFF)
3268  1008  DD 86 04    	add	a,(ix+4)
3269  100B  4F          	ld	c, a
3270  100C  3E 00       	ld	a, +((_scr_map) / 256)
3271  100E  DD 8E 05    	adc	a,(ix+5)
3272  1011  47          	ld	b, a
3273  1012  AF          	xor	a, a
3274  1013  02          	ld	(bc), a
3275  1014  DD 6E 04    	ld	l,(ix+4)
3276  1017  DD 66 05    	ld	h,(ix+5)
3277  101A  CD 00 00    	call	_game_obj_set
3278  101D  21 04 00    	ld	hl,0x0004
3279  1020  39          	add	hl, sp
3280  1021  CD 00 00    	call	_spr_draw_index
3281  1024  18 03       	jr	l_player_open_door_00118
3282  1026              l_player_open_door_00115:
3283  1026  CD 00 00    	call	_audio_sin_mana
3284  1029              l_player_open_door_00118:
3285  1029  DD E1       	pop	ix
3286  102B  C9          	ret
3287  102C              	SECTION code_compiler
3288  102C              ;	---------------------------------
3289  102C              ; Function player_lost_life
3290  102C              ; ---------------------------------
3291  102C              _player_lost_life:
3292  102C  CD 00 00    	call	___sdcc_enter_ix
3293  102F  3B          	dec	sp
3294  1030  21 00 00    	ld	hl,_player_vita
3295  1033  36 00       	ld	(hl),0x00
3296  1035  CD 00 00    	call	_game_update_stats
3297  1038  3A 07 00    	ld	a,(_lin + 0x0007)
3298  103B  32 00 00    	ld	(_s_lin0),a
3299  103E  3A 07 00    	ld	a,(_col + 0x0007)
3300  1041  32 00 00    	ld	(_s_col0),a
3301  1044  CD 00 00    	call	_spr_init_effects
3302  1047  06 00       	ld	b,0x00
3303  1049              l_player_lost_life_00117:
3304  1049  C5          	push	bc
3305  104A  21 00 00    	ld	hl,0x0000
3306  104D  E5          	push	hl
3307  104E  AF          	xor	a, a
3308  104F  48          	ld	c,b
3309  1050  47          	ld	b,a
3310  1051  C5          	push	bc
3311  1052  CD 00 00    	call	_NIRVANAP_spriteT_callee
3312  1055  C1          	pop	bc
3313  1056  04          	inc	b
3314  1057  3E 07       	ld	a,0x07
3315  1059  90          	sub	a, b
3316  105A  30 ED       	jr	NC,l_player_lost_life_00117
3317  105C  CD 00 00    	call	_audio_explosion
3318  105F  3A 00 00    	ld	a,(_s_lin0)
3319  1062  C6 F0       	add	a,0xf0
3320  1064  47          	ld	b, a
3321  1065  3A 00 00    	ld	a,(_s_col0)
3322  1068  21 00 00    	ld	hl,0x0000
3323  106B  E5          	push	hl
3324  106C  21 87 03    	ld	hl,0x0387
3325  106F  E5          	push	hl
3326  1070  48          	ld	c,b
3327  1071  47          	ld	b,a
3328  1072  C5          	push	bc
3329  1073  CD 00 00    	call	_spr_add_anim
3330  1076  F1          	pop	af
3331  1077  F1          	pop	af
3332  1078  F1          	pop	af
3333  1079  21 00 00    	ld	hl,_s_col0
3334  107C  46          	ld	b, (hl)
3335  107D  05          	dec	b
3336  107E  05          	dec	b
3337  107F  21 00 00    	ld	hl,0x0000
3338  1082  E5          	push	hl
3339  1083  21 87 03    	ld	hl,0x0387
3340  1086  E5          	push	hl
3341  1087  C5          	push	bc
3342  1088  33          	inc	sp
3343  1089  3A 00 00    	ld	a,(_s_lin0)
3344  108C  F5          	push	af
3345  108D  33          	inc	sp
3346  108E  CD 00 00    	call	_spr_add_anim
3347  1091  F1          	pop	af
3348  1092  F1          	pop	af
3349  1093  21 00 00    	ld	hl,0x0000
3350  1096  E3          	ex	(sp),hl
3351  1097  3A 00 00    	ld	a,(_s_col0)
3352  109A  21 87 03    	ld	hl,0x0387
3353  109D  E5          	push	hl
3354  109E  F5          	push	af
3355  109F  33          	inc	sp
3356  10A0  3A 00 00    	ld	a,(_s_lin0)
3357  10A3  F5          	push	af
3358  10A4  33          	inc	sp
3359  10A5  CD 00 00    	call	_spr_add_anim
3360  10A8  F1          	pop	af
3361  10A9  F1          	pop	af
3362  10AA  F1          	pop	af
3363  10AB  21 00 00    	ld	hl,_s_col0
3364  10AE  46          	ld	b, (hl)
3365  10AF  04          	inc	b
3366  10B0  04          	inc	b
3367  10B1  21 00 00    	ld	hl,0x0000
3368  10B4  E5          	push	hl
3369  10B5  21 87 03    	ld	hl,0x0387
3370  10B8  E5          	push	hl
3371  10B9  C5          	push	bc
3372  10BA  33          	inc	sp
3373  10BB  3A 00 00    	ld	a,(_s_lin0)
3374  10BE  F5          	push	af
3375  10BF  33          	inc	sp
3376  10C0  CD 00 00    	call	_spr_add_anim
3377  10C3  F1          	pop	af
3378  10C4  F1          	pop	af
3379  10C5  F1          	pop	af
3380  10C6  3A 00 00    	ld	a,(_s_lin0)
3381  10C9  C6 10       	add	a,0x10
3382  10CB  47          	ld	b, a
3383  10CC  3A 00 00    	ld	a,(_s_col0)
3384  10CF  21 00 00    	ld	hl,0x0000
3385  10D2  E5          	push	hl
3386  10D3  21 87 03    	ld	hl,0x0387
3387  10D6  E5          	push	hl
3388  10D7  48          	ld	c,b
3389  10D8  47          	ld	b,a
3390  10D9  C5          	push	bc
3391  10DA  CD 00 00    	call	_spr_add_anim
3392  10DD  F1          	pop	af
3393  10DE  F1          	pop	af
3394  10DF  F1          	pop	af
3395  10E0  2E 00       	ld	l,0x00
3396  10E2  CD 00 00    	call	_zx_border_fastcall
3397  10E5  DD 36 FF 01 	ld	(ix-1),0x01
3398  10E9  2A 00 00    	ld	hl,(_curr_time)
3399  10EC  22 00 00    	ld	(_anim_time),hl
3400  10EF              l_player_lost_life_00107:
3401  10EF  DD 7E FF    	ld	a,(ix-1)
3402  10F2  B7          	or	a, a
3403  10F3  28 28       	jr	Z,l_player_lost_life_00109
3404  10F5  3E 0C       	ld	a,0x0c
3405  10F7  F5          	push	af
3406  10F8  33          	inc	sp
3407  10F9  21 00 00    	ld	hl,_anim_time
3408  10FC  E5          	push	hl
3409  10FD  CD 00 00    	call	_game_check_time
3410  1100  F1          	pop	af
3411  1101  33          	inc	sp
3412  1102  7D          	ld	a, l
3413  1103  B7          	or	a, a
3414  1104  28 E9       	jr	Z,l_player_lost_life_00107
3415  1106  2A 00 00    	ld	hl,(_curr_time)
3416  1109  22 00 00    	ld	(_anim_time),hl
3417  110C  3A 00 00    	ld	a,(_anim_count)
3418  110F  B7          	or	a,a
3419  1110  28 05       	jr	Z,l_player_lost_life_00103
3420  1112  CD 00 00    	call	_spr_play_anim
3421  1115  18 D8       	jr	l_player_lost_life_00107
3422  1117              l_player_lost_life_00103:
3423  1117  DD 36 FF 00 	ld	(ix-1),0x00
3424  111B  18 D2       	jr	l_player_lost_life_00107
3425  111D              l_player_lost_life_00109:
3426  111D  CD 00 00    	call	_audio_lotr_lose_a_life
3427  1120  3A 00 00    	ld	a,(_game_boss)
3428  1123  B7          	or	a, a
3429  1124  28 0F       	jr	Z,l_player_lost_life_00111
3430  1126  3A 00 00    	ld	a,(_boss_lin)
3431  1129  32 00 00    	ld	(_s_lin1),a
3432  112C  3A 00 00    	ld	a,(_boss_col)
3433  112F  32 00 00    	ld	(_s_col1),a
3434  1132  CD 00 00    	call	_boss_draw
3435  1135              l_player_lost_life_00111:
3436  1135  3A 00 00    	ld	a,(_game_inf_lives)
3437  1138  B7          	or	a, a
3438  1139  20 04       	jr	NZ,l_player_lost_life_00113
3439  113B  21 00 00    	ld	hl,_player_lives
3440  113E  35          	dec	(hl)
3441  113F              l_player_lost_life_00113:
3442  113F  21 00 00    	ld	hl,_player_mana
3443  1142  36 64       	ld	(hl),0x64
3444  1144  21 00 00    	ld	hl,_player_vita
3445  1147  36 64       	ld	(hl),0x64
3446  1149  3A 00 00    	ld	a,(_player_lives)
3447  114C  B7          	or	a, a
3448  114D  28 1D       	jr	Z,l_player_lost_life_00115
3449  114F  21 F4 01    	ld	hl,0x01f4
3450  1152  CD 00 00    	call	_z80_delay_ms_fastcall
3451  1155  3A 00 00    	ld	a,(_game_checkpoint_col)
3452  1158  32 00 00    	ld	(_player_col_scr),a
3453  115B  3A 00 00    	ld	a,(_game_checkpoint_lin)
3454  115E  32 00 00    	ld	(_player_lin_scr),a
3455  1161  3A 00 00    	ld	a,(_game_checkpoint_scr)
3456  1164  32 00 00    	ld	(_scr_curr),a
3457  1167  CD 00 00    	call	_game_round_init
3458  116A  18 0A       	jr	l_player_lost_life_00119
3459  116C              l_player_lost_life_00115:
3460  116C  21 00 00    	ld	hl,_player_lives
3461  116F  36 00       	ld	(hl),0x00
3462  1171  21 00 00    	ld	hl,_game_over
3463  1174  36 01       	ld	(hl),0x01
3464  1176              l_player_lost_life_00119:
3465  1176  33          	inc	sp
3466  1177  DD E1       	pop	ix
3467  1179  C9          	ret
3468  117A              	SECTION code_compiler
3469  117A              ;	---------------------------------
3470  117A              ; Function player_damage
3471  117A              ; ---------------------------------
3472  117A              _player_damage:
3473  117A  7D          	ld	a,l
3474  117B  4D          	ld	c,l
3475  117C  21 00 00    	ld	hl,_player_vita
3476  117F  96          	sub	a, (hl)
3477  1180  30 1A       	jr	NC,l_player_damage_00104
3478  1182  3A 00 00    	ld	a,(_game_inmune)
3479  1185  B7          	or	a, a
3480  1186  20 06       	jr	NZ,l_player_damage_00102
3481  1188  21 00 00    	ld	hl,_player_vita
3482  118B  7E          	ld	a, (hl)
3483  118C  91          	sub	a, c
3484  118D  77          	ld	(hl), a
3485  118E              l_player_damage_00102:
3486  118E  2A 00 00    	ld	hl,(_curr_time)
3487  1191  22 00 00    	ld	(_player_hit_time),hl
3488  1194  CD 00 00    	call	_audio_golpe
3489  1197  CD 00 00    	call	_game_update_stats
3490  119A  18 03       	jr	l_player_damage_00106
3491  119C              l_player_damage_00104:
3492  119C  CD 2C 10    	call	_player_lost_life
3493  119F              l_player_damage_00106:
3494  119F  C9          	ret
3495  11A0              	SECTION IGNORE
3496  0000              
