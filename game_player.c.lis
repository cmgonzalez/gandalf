1     0000              MODULE game_player_c
2     0000              
3     0000              ;--------------------------------------------------------
4     0000              ; File Created by SDCC : free open source ANSI-C Compiler
5     0000              ; Version 3.6.5 #9958 (Mac OS X i386)
6     0000              ;--------------------------------------------------------
7     0000              ; Processed by Z88DK
8     0000              ;--------------------------------------------------------
9     0000              
10    0000              	EXTERN __divschar
11    0000              	EXTERN __divschar_callee
12    0000              	EXTERN __divsint
13    0000              	EXTERN __divsint_callee
14    0000              	EXTERN __divslong
15    0000              	EXTERN __divslong_callee
16    0000              	EXTERN __divslonglong
17    0000              	EXTERN __divslonglong_callee
18    0000              	EXTERN __divsuchar
19    0000              	EXTERN __divsuchar_callee
20    0000              	EXTERN __divuchar
21    0000              	EXTERN __divuchar_callee
22    0000              	EXTERN __divuint
23    0000              	EXTERN __divuint_callee
24    0000              	EXTERN __divulong
25    0000              	EXTERN __divulong_callee
26    0000              	EXTERN __divulonglong
27    0000              	EXTERN __divulonglong_callee
28    0000              	EXTERN __divuschar
29    0000              	EXTERN __divuschar_callee
30    0000              	EXTERN __modschar
31    0000              	EXTERN __modschar_callee
32    0000              	EXTERN __modsint
33    0000              	EXTERN __modsint_callee
34    0000              	EXTERN __modslong
35    0000              	EXTERN __modslong_callee
36    0000              	EXTERN __modslonglong
37    0000              	EXTERN __modslonglong_callee
38    0000              	EXTERN __modsuchar
39    0000              	EXTERN __modsuchar_callee
40    0000              	EXTERN __moduchar
41    0000              	EXTERN __moduchar_callee
42    0000              	EXTERN __moduint
43    0000              	EXTERN __moduint_callee
44    0000              	EXTERN __modulong
45    0000              	EXTERN __modulong_callee
46    0000              	EXTERN __modulonglong
47    0000              	EXTERN __modulonglong_callee
48    0000              	EXTERN __moduschar
49    0000              	EXTERN __moduschar_callee
50    0000              	EXTERN __mulint
51    0000              	EXTERN __mulint_callee
52    0000              	EXTERN __mullong
53    0000              	EXTERN __mullong_callee
54    0000              	EXTERN __mullonglong
55    0000              	EXTERN __mullonglong_callee
56    0000              	EXTERN __mulschar
57    0000              	EXTERN __mulschar_callee
58    0000              	EXTERN __mulsuchar
59    0000              	EXTERN __mulsuchar_callee
60    0000              	EXTERN __muluschar
61    0000              	EXTERN __muluschar_callee
62    0000              	EXTERN __rlslonglong
63    0000              	EXTERN __rlslonglong_callee
64    0000              	EXTERN __rlulonglong
65    0000              	EXTERN __rlulonglong_callee
66    0000              	EXTERN __rrslonglong
67    0000              	EXTERN __rrslonglong_callee
68    0000              	EXTERN __rrulonglong
69    0000              	EXTERN __rrulonglong_callee
70    0000              	EXTERN ___sdcc_call_hl
71    0000              	EXTERN ___sdcc_call_iy
72    0000              	EXTERN ___sdcc_enter_ix
73    0000              	EXTERN _banked_call
74    0000              	EXTERN _banked_ret
75    0000              	EXTERN ___fs2schar
76    0000              	EXTERN ___fs2schar_callee
77    0000              	EXTERN ___fs2sint
78    0000              	EXTERN ___fs2sint_callee
79    0000              	EXTERN ___fs2slong
80    0000              	EXTERN ___fs2slong_callee
81    0000              	EXTERN ___fs2slonglong
82    0000              	EXTERN ___fs2slonglong_callee
83    0000              	EXTERN ___fs2uchar
84    0000              	EXTERN ___fs2uchar_callee
85    0000              	EXTERN ___fs2uint
86    0000              	EXTERN ___fs2uint_callee
87    0000              	EXTERN ___fs2ulong
88    0000              	EXTERN ___fs2ulong_callee
89    0000              	EXTERN ___fs2ulonglong
90    0000              	EXTERN ___fs2ulonglong_callee
91    0000              	EXTERN ___fsadd
92    0000              	EXTERN ___fsadd_callee
93    0000              	EXTERN ___fsdiv
94    0000              	EXTERN ___fsdiv_callee
95    0000              	EXTERN ___fseq
96    0000              	EXTERN ___fseq_callee
97    0000              	EXTERN ___fsgt
98    0000              	EXTERN ___fsgt_callee
99    0000              	EXTERN ___fslt
100   0000              	EXTERN ___fslt_callee
101   0000              	EXTERN ___fsmul
102   0000              	EXTERN ___fsmul_callee
103   0000              	EXTERN ___fsneq
104   0000              	EXTERN ___fsneq_callee
105   0000              	EXTERN ___fssub
106   0000              	EXTERN ___fssub_callee
107   0000              	EXTERN ___schar2fs
108   0000              	EXTERN ___schar2fs_callee
109   0000              	EXTERN ___sint2fs
110   0000              	EXTERN ___sint2fs_callee
111   0000              	EXTERN ___slong2fs
112   0000              	EXTERN ___slong2fs_callee
113   0000              	EXTERN ___slonglong2fs
114   0000              	EXTERN ___slonglong2fs_callee
115   0000              	EXTERN ___uchar2fs
116   0000              	EXTERN ___uchar2fs_callee
117   0000              	EXTERN ___uint2fs
118   0000              	EXTERN ___uint2fs_callee
119   0000              	EXTERN ___ulong2fs
120   0000              	EXTERN ___ulong2fs_callee
121   0000              	EXTERN ___ulonglong2fs
122   0000              	EXTERN ___ulonglong2fs_callee
123   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
126   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
127   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
128   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
129   0000              	EXTERN ____sdcc_4_ldi_save_bc
130   0000              	EXTERN ____sdcc_4_push_hlix
131   0000              	EXTERN ____sdcc_4_push_mhl
132   0000              	EXTERN ____sdcc_lib_setmem_hl
133   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
134   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
135   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
136   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
137   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
138   0000              	EXTERN ____sdcc_ll_add_deix_hlix
139   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
140   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
141   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
142   0000              	EXTERN ____sdcc_ll_asr_hlix_a
143   0000              	EXTERN ____sdcc_ll_asr_mbc_a
144   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
145   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
146   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
147   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
148   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
149   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
150   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
151   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
152   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
153   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
155   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
156   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
157   0000              	EXTERN ____sdcc_ll_push_hlix
158   0000              	EXTERN ____sdcc_ll_push_mhl
159   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
160   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
161   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
162   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
163   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
164   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
165   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
166   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
167   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
168   0000              	EXTERN ____sdcc_load_debc_deix
169   0000              	EXTERN ____sdcc_load_dehl_deix
170   0000              	EXTERN ____sdcc_load_debc_mhl
171   0000              	EXTERN ____sdcc_load_hlde_mhl
172   0000              	EXTERN ____sdcc_store_dehl_bcix
173   0000              	EXTERN ____sdcc_store_debc_hlix
174   0000              	EXTERN ____sdcc_store_debc_mhl
175   0000              	EXTERN ____sdcc_cpu_pop_ei
176   0000              	EXTERN ____sdcc_cpu_pop_ei_jp
177   0000              	EXTERN ____sdcc_cpu_push_di
178   0000              	EXTERN ____sdcc_outi
179   0000              	EXTERN ____sdcc_outi_128
180   0000              	EXTERN ____sdcc_outi_256
181   0000              	EXTERN ____sdcc_ldi
182   0000              	EXTERN ____sdcc_ldi_128
183   0000              	EXTERN ____sdcc_ldi_256
184   0000              
185   0000              ;--------------------------------------------------------
186   0000              ; Public variables in this module
187   0000              ;--------------------------------------------------------
188   0000              	GLOBAL _player_check_map
189   0000              	GLOBAL _player_fix_walk_lin
190   0000              	GLOBAL _player_1up
191   0000              	GLOBAL _player_init
192   0000              	GLOBAL _player_check_input
193   0000              	GLOBAL _player_collision
194   0000              	GLOBAL _player_kill
195   0000              	GLOBAL _player_turn
196   0000              	GLOBAL _player_move
197   0000              	GLOBAL _player_check_stairs_down
198   0000              	GLOBAL _player_check_stairs
199   0000              	GLOBAL _player_tile
200   0000              	GLOBAL _player_move_input
201   0000              	GLOBAL _player_fire
202   0000              	GLOBAL _player_pick_item
203   0000              	GLOBAL _player_hit_platform
204   0000              	GLOBAL _player_hit_platform_clear
205   0000              	GLOBAL _player_score_add
206   0000              	GLOBAL _player_check_floor
207   0000              	GLOBAL _player_gasta_brick
208   0000              	GLOBAL _player_move_jump
209   0000              	GLOBAL _player_open_door
210   0000              	GLOBAL _player_lost_life
211   0000              	GLOBAL _player_hit
212   0000              ;--------------------------------------------------------
213   0000              ; Externals used
214   0000              ;--------------------------------------------------------
215   0000              	GLOBAL _ulltoa_callee
216   0000              	GLOBAL _ulltoa
217   0000              	GLOBAL _strtoull_callee
218   0000              	GLOBAL _strtoull
219   0000              	GLOBAL _strtoll_callee
220   0000              	GLOBAL _strtoll
221   0000              	GLOBAL _lltoa_callee
222   0000              	GLOBAL _lltoa
223   0000              	GLOBAL _llabs_callee
224   0000              	GLOBAL _llabs
225   0000              	GLOBAL __lldivu__callee
226   0000              	GLOBAL __lldivu_
227   0000              	GLOBAL __lldiv__callee
228   0000              	GLOBAL __lldiv_
229   0000              	GLOBAL _atoll_callee
230   0000              	GLOBAL _atoll
231   0000              	GLOBAL _realloc_unlocked_callee
232   0000              	GLOBAL _realloc_unlocked
233   0000              	GLOBAL _malloc_unlocked_fastcall
234   0000              	GLOBAL _malloc_unlocked
235   0000              	GLOBAL _free_unlocked_fastcall
236   0000              	GLOBAL _free_unlocked
237   0000              	GLOBAL _calloc_unlocked_callee
238   0000              	GLOBAL _calloc_unlocked
239   0000              	GLOBAL _aligned_alloc_unlocked_callee
240   0000              	GLOBAL _aligned_alloc_unlocked
241   0000              	GLOBAL _realloc_callee
242   0000              	GLOBAL _realloc
243   0000              	GLOBAL _malloc_fastcall
244   0000              	GLOBAL _malloc
245   0000              	GLOBAL _free_fastcall
246   0000              	GLOBAL _free
247   0000              	GLOBAL _calloc_callee
248   0000              	GLOBAL _calloc
249   0000              	GLOBAL _aligned_alloc_callee
250   0000              	GLOBAL _aligned_alloc
251   0000              	GLOBAL _utoa_callee
252   0000              	GLOBAL _utoa
253   0000              	GLOBAL _ultoa_callee
254   0000              	GLOBAL _ultoa
255   0000              	GLOBAL _system_fastcall
256   0000              	GLOBAL _system
257   0000              	GLOBAL _strtoul_callee
258   0000              	GLOBAL _strtoul
259   0000              	GLOBAL _strtol_callee
260   0000              	GLOBAL _strtol
261   0000              	GLOBAL _strtof_callee
262   0000              	GLOBAL _strtof
263   0000              	GLOBAL _strtod_callee
264   0000              	GLOBAL _strtod
265   0000              	GLOBAL _srand_fastcall
266   0000              	GLOBAL _srand
267   0000              	GLOBAL _rand
268   0000              	GLOBAL _quick_exit_fastcall
269   0000              	GLOBAL _quick_exit
270   0000              	GLOBAL _qsort_callee
271   0000              	GLOBAL _qsort
272   0000              	GLOBAL _ltoa_callee
273   0000              	GLOBAL _ltoa
274   0000              	GLOBAL _labs_fastcall
275   0000              	GLOBAL _labs
276   0000              	GLOBAL _itoa_callee
277   0000              	GLOBAL _itoa
278   0000              	GLOBAL _ftoh_callee
279   0000              	GLOBAL _ftoh
280   0000              	GLOBAL _ftog_callee
281   0000              	GLOBAL _ftog
282   0000              	GLOBAL _ftoe_callee
283   0000              	GLOBAL _ftoe
284   0000              	GLOBAL _ftoa_callee
285   0000              	GLOBAL _ftoa
286   0000              	GLOBAL _exit_fastcall
287   0000              	GLOBAL _exit
288   0000              	GLOBAL _dtoh_callee
289   0000              	GLOBAL _dtoh
290   0000              	GLOBAL _dtog_callee
291   0000              	GLOBAL _dtog
292   0000              	GLOBAL _dtoe_callee
293   0000              	GLOBAL _dtoe
294   0000              	GLOBAL _dtoa_callee
295   0000              	GLOBAL _dtoa
296   0000              	GLOBAL _bsearch_callee
297   0000              	GLOBAL _bsearch
298   0000              	GLOBAL _atol_fastcall
299   0000              	GLOBAL _atol
300   0000              	GLOBAL _atoi_fastcall
301   0000              	GLOBAL _atoi
302   0000              	GLOBAL _atof_fastcall
303   0000              	GLOBAL _atof
304   0000              	GLOBAL _atexit_fastcall
305   0000              	GLOBAL _atexit
306   0000              	GLOBAL _at_quick_exit_fastcall
307   0000              	GLOBAL _at_quick_exit
308   0000              	GLOBAL _abs_fastcall
309   0000              	GLOBAL _abs
310   0000              	GLOBAL _abort
311   0000              	GLOBAL __strtou__callee
312   0000              	GLOBAL __strtou_
313   0000              	GLOBAL __strtoi__callee
314   0000              	GLOBAL __strtoi_
315   0000              	GLOBAL __random_uniform_xor_8__fastcall
316   0000              	GLOBAL __random_uniform_xor_8_
317   0000              	GLOBAL __random_uniform_xor_32__fastcall
318   0000              	GLOBAL __random_uniform_xor_32_
319   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
320   0000              	GLOBAL __random_uniform_cmwc_8_
321   0000              	GLOBAL __shellsort__callee
322   0000              	GLOBAL __shellsort_
323   0000              	GLOBAL __quicksort__callee
324   0000              	GLOBAL __quicksort_
325   0000              	GLOBAL __insertion_sort__callee
326   0000              	GLOBAL __insertion_sort_
327   0000              	GLOBAL __ldivu__callee
328   0000              	GLOBAL __ldivu_
329   0000              	GLOBAL __ldiv__callee
330   0000              	GLOBAL __ldiv_
331   0000              	GLOBAL __divu__callee
332   0000              	GLOBAL __divu_
333   0000              	GLOBAL __div__callee
334   0000              	GLOBAL __div_
335   0000              	GLOBAL _NIRVANAP_drawTW_raw_callee
336   0000              	GLOBAL _NIRVANAP_drawTW_raw
337   0000              	GLOBAL _NIRVANAP_drawTW_callee
338   0000              	GLOBAL _NIRVANAP_drawTW
339   0000              	GLOBAL _NIRVANAP_drawW_raw_callee
340   0000              	GLOBAL _NIRVANAP_drawW_raw
341   0000              	GLOBAL _NIRVANAP_drawW_callee
342   0000              	GLOBAL _NIRVANAP_drawW
343   0000              	GLOBAL _NIRVANAP_spriteT_callee
344   0000              	GLOBAL _NIRVANAP_spriteT
345   0000              	GLOBAL _NIRVANAP_fillC_callee
346   0000              	GLOBAL _NIRVANAP_fillC
347   0000              	GLOBAL _NIRVANAP_readC_callee
348   0000              	GLOBAL _NIRVANAP_readC
349   0000              	GLOBAL _NIRVANAP_paintC_callee
350   0000              	GLOBAL _NIRVANAP_paintC
351   0000              	GLOBAL _NIRVANAP_printC_callee
352   0000              	GLOBAL _NIRVANAP_printC
353   0000              	GLOBAL _NIRVANAP_fillT_raw_callee
354   0000              	GLOBAL _NIRVANAP_fillT_raw
355   0000              	GLOBAL _NIRVANAP_fillT_callee
356   0000              	GLOBAL _NIRVANAP_fillT
357   0000              	GLOBAL _NIRVANAP_drawT_raw_callee
358   0000              	GLOBAL _NIRVANAP_drawT_raw
359   0000              	GLOBAL _NIRVANAP_drawT_callee
360   0000              	GLOBAL _NIRVANAP_drawT
361   0000              	GLOBAL _NIRVANAP_stop
362   0000              	GLOBAL _NIRVANAP_start
363   0000              	GLOBAL _debug3
364   0000              	GLOBAL _debug2
365   0000              	GLOBAL _debug
366   0000              	GLOBAL _zx_print_str
367   0000              	GLOBAL _zx_print_int
368   0000              	GLOBAL _zx_print_chr
369   0000              	GLOBAL _zx_print_bonus_time
370   0000              	GLOBAL _zx_isr
371   0000              	GLOBAL _z80_otdr_callee
372   0000              	GLOBAL _z80_otdr
373   0000              	GLOBAL _z80_otir_callee
374   0000              	GLOBAL _z80_otir
375   0000              	GLOBAL _z80_outp_callee
376   0000              	GLOBAL _z80_outp
377   0000              	GLOBAL _z80_indr_callee
378   0000              	GLOBAL _z80_indr
379   0000              	GLOBAL _z80_inir_callee
380   0000              	GLOBAL _z80_inir
381   0000              	GLOBAL _z80_inp_fastcall
382   0000              	GLOBAL _z80_inp
383   0000              	GLOBAL _z80_set_int_state_fastcall
384   0000              	GLOBAL _z80_set_int_state
385   0000              	GLOBAL _z80_get_int_state
386   0000              	GLOBAL _z80_delay_tstate_fastcall
387   0000              	GLOBAL _z80_delay_tstate
388   0000              	GLOBAL _z80_delay_ms_fastcall
389   0000              	GLOBAL _z80_delay_ms
390   0000              	GLOBAL _im2_remove_generic_callback_callee
391   0000              	GLOBAL _im2_remove_generic_callback
392   0000              	GLOBAL _im2_prepend_generic_callback_callee
393   0000              	GLOBAL _im2_prepend_generic_callback
394   0000              	GLOBAL _im2_append_generic_callback_callee
395   0000              	GLOBAL _im2_append_generic_callback
396   0000              	GLOBAL _im2_create_generic_isr_8080_callee
397   0000              	GLOBAL _im2_create_generic_isr_8080
398   0000              	GLOBAL _im2_create_generic_isr_callee
399   0000              	GLOBAL _im2_create_generic_isr
400   0000              	GLOBAL _im2_install_isr_callee
401   0000              	GLOBAL _im2_install_isr
402   0000              	GLOBAL _im2_init_fastcall
403   0000              	GLOBAL _im2_init
404   0000              	GLOBAL _intrinsic_swap_word_32_fastcall
405   0000              	GLOBAL _intrinsic_swap_word_32
406   0000              	GLOBAL _intrinsic_swap_endian_32_fastcall
407   0000              	GLOBAL _intrinsic_swap_endian_32
408   0000              	GLOBAL _intrinsic_swap_endian_16_fastcall
409   0000              	GLOBAL _intrinsic_swap_endian_16
410   0000              	GLOBAL _intrinsic_return_de
411   0000              	GLOBAL _intrinsic_return_bc
412   0000              	GLOBAL _intrinsic_exx
413   0000              	GLOBAL _intrinsic_ex_de_hl
414   0000              	GLOBAL _intrinsic_nop
415   0000              	GLOBAL _intrinsic_im_2
416   0000              	GLOBAL _intrinsic_im_1
417   0000              	GLOBAL _intrinsic_im_0
418   0000              	GLOBAL _intrinsic_retn
419   0000              	GLOBAL _intrinsic_reti
420   0000              	GLOBAL _intrinsic_halt
421   0000              	GLOBAL _intrinsic_ei
422   0000              	GLOBAL _intrinsic_di
423   0000              	GLOBAL _intrinsic_stub
424   0000              	GLOBAL _intrinsic_outi
425   0000              	GLOBAL _intrinsic_ldi
426   0000              	GLOBAL _zx_pattern_fill_callee
427   0000              	GLOBAL _zx_pattern_fill
428   0000              	GLOBAL _zx_saddrpup_fastcall
429   0000              	GLOBAL _zx_saddrpup
430   0000              	GLOBAL _zx_saddrpright_callee
431   0000              	GLOBAL _zx_saddrpright
432   0000              	GLOBAL _zx_saddrpleft_callee
433   0000              	GLOBAL _zx_saddrpleft
434   0000              	GLOBAL _zx_saddrpdown_fastcall
435   0000              	GLOBAL _zx_saddrpdown
436   0000              	GLOBAL _zx_saddrcup_fastcall
437   0000              	GLOBAL _zx_saddrcup
438   0000              	GLOBAL _zx_saddrcright_fastcall
439   0000              	GLOBAL _zx_saddrcright
440   0000              	GLOBAL _zx_saddrcleft_fastcall
441   0000              	GLOBAL _zx_saddrcleft
442   0000              	GLOBAL _zx_saddrcdown_fastcall
443   0000              	GLOBAL _zx_saddrcdown
444   0000              	GLOBAL _zx_saddr2py_fastcall
445   0000              	GLOBAL _zx_saddr2py
446   0000              	GLOBAL _zx_saddr2px_fastcall
447   0000              	GLOBAL _zx_saddr2px
448   0000              	GLOBAL _zx_saddr2cy_fastcall
449   0000              	GLOBAL _zx_saddr2cy
450   0000              	GLOBAL _zx_saddr2cx_fastcall
451   0000              	GLOBAL _zx_saddr2cx
452   0000              	GLOBAL _zx_saddr2aaddr_fastcall
453   0000              	GLOBAL _zx_saddr2aaddr
454   0000              	GLOBAL _zx_py2saddr_fastcall
455   0000              	GLOBAL _zx_py2saddr
456   0000              	GLOBAL _zx_py2aaddr_fastcall
457   0000              	GLOBAL _zx_py2aaddr
458   0000              	GLOBAL _zx_pxy2saddr_callee
459   0000              	GLOBAL _zx_pxy2saddr
460   0000              	GLOBAL _zx_pxy2aaddr_callee
461   0000              	GLOBAL _zx_pxy2aaddr
462   0000              	GLOBAL _zx_px2bitmask_fastcall
463   0000              	GLOBAL _zx_px2bitmask
464   0000              	GLOBAL _zx_cy2saddr_fastcall
465   0000              	GLOBAL _zx_cy2saddr
466   0000              	GLOBAL _zx_cy2aaddr_fastcall
467   0000              	GLOBAL _zx_cy2aaddr
468   0000              	GLOBAL _zx_cxy2saddr_callee
469   0000              	GLOBAL _zx_cxy2saddr
470   0000              	GLOBAL _zx_cxy2aaddr_callee
471   0000              	GLOBAL _zx_cxy2aaddr
472   0000              	GLOBAL _zx_bitmask2px_fastcall
473   0000              	GLOBAL _zx_bitmask2px
474   0000              	GLOBAL _zx_aaddrcup_fastcall
475   0000              	GLOBAL _zx_aaddrcup
476   0000              	GLOBAL _zx_aaddrcright_fastcall
477   0000              	GLOBAL _zx_aaddrcright
478   0000              	GLOBAL _zx_aaddrcleft_fastcall
479   0000              	GLOBAL _zx_aaddrcleft
480   0000              	GLOBAL _zx_aaddrcdown_fastcall
481   0000              	GLOBAL _zx_aaddrcdown
482   0000              	GLOBAL _zx_aaddr2saddr_fastcall
483   0000              	GLOBAL _zx_aaddr2saddr
484   0000              	GLOBAL _zx_aaddr2py_fastcall
485   0000              	GLOBAL _zx_aaddr2py
486   0000              	GLOBAL _zx_aaddr2px_fastcall
487   0000              	GLOBAL _zx_aaddr2px
488   0000              	GLOBAL _zx_aaddr2cy_fastcall
489   0000              	GLOBAL _zx_aaddr2cy
490   0000              	GLOBAL _zx_aaddr2cx_fastcall
491   0000              	GLOBAL _zx_aaddr2cx
492   0000              	GLOBAL _zx_visit_wc_pix_callee
493   0000              	GLOBAL _zx_visit_wc_pix
494   0000              	GLOBAL _zx_visit_wc_attr_callee
495   0000              	GLOBAL _zx_visit_wc_attr
496   0000              	GLOBAL _zx_scroll_wc_up_pix_callee
497   0000              	GLOBAL _zx_scroll_wc_up_pix
498   0000              	GLOBAL _zx_scroll_wc_up_attr_callee
499   0000              	GLOBAL _zx_scroll_wc_up_attr
500   0000              	GLOBAL _zx_scroll_wc_up_callee
501   0000              	GLOBAL _zx_scroll_wc_up
502   0000              	GLOBAL _zx_scroll_up_pix_callee
503   0000              	GLOBAL _zx_scroll_up_pix
504   0000              	GLOBAL _zx_scroll_up_attr_callee
505   0000              	GLOBAL _zx_scroll_up_attr
506   0000              	GLOBAL _zx_scroll_up_callee
507   0000              	GLOBAL _zx_scroll_up
508   0000              	GLOBAL _zx_cls_wc_pix_callee
509   0000              	GLOBAL _zx_cls_wc_pix
510   0000              	GLOBAL _zx_cls_wc_attr_callee
511   0000              	GLOBAL _zx_cls_wc_attr
512   0000              	GLOBAL _zx_cls_wc_callee
513   0000              	GLOBAL _zx_cls_wc
514   0000              	GLOBAL _zx_cls_pix_fastcall
515   0000              	GLOBAL _zx_cls_pix
516   0000              	GLOBAL _zx_cls_attr_fastcall
517   0000              	GLOBAL _zx_cls_attr
518   0000              	GLOBAL _zx_cls_fastcall
519   0000              	GLOBAL _zx_cls
520   0000              	GLOBAL _zx_border_fastcall
521   0000              	GLOBAL _zx_border
522   0000              	GLOBAL _spr_btile_paint_back
523   0000              	GLOBAL _spr_explode_bullet
524   0000              	GLOBAL _spr_init_anim_bullets
525   0000              	GLOBAL _spr_turn_horizontal
526   0000              	GLOBAL _spr_play_bullets
527   0000              	GLOBAL _spr_play_anim
528   0000              	GLOBAL _spr_add_anim
529   0000              	GLOBAL _spr_page_map
530   0000              	GLOBAL _spr_page_down
531   0000              	GLOBAL _spr_page_up
532   0000              	GLOBAL _spr_page_right
533   0000              	GLOBAL _spr_page_left
534   0000              	GLOBAL _spr_tile_paint
535   0000              	GLOBAL _spr_calc_hor
536   0000              	GLOBAL _spr_draw_row
537   0000              	GLOBAL _spr_draw_index
538   0000              	GLOBAL _spr_brick_anim
539   0000              	GLOBAL _spr_back_repaint
540   0000              	GLOBAL _spr_tile
541   0000              	GLOBAL _spr_destroy
542   0000              	GLOBAL _spr_tile_dir
543   0000              	GLOBAL _spr_redraw
544   0000              	GLOBAL _spr_move_left
545   0000              	GLOBAL _spr_move_right
546   0000              	GLOBAL _spr_move_horizontal
547   0000              	GLOBAL _spr_move_down
548   0000              	GLOBAL _spr_move_up
549   0000              	GLOBAL _spr_calc_index
550   0000              	GLOBAL _spr_chktime
551   0000              	GLOBAL _sound_hit_brick
552   0000              	GLOBAL _sound_hit_enemy
553   0000              	GLOBAL _sound_kill
554   0000              	GLOBAL _sound_enter_enemy
555   0000              	GLOBAL _sound_coin
556   0000              	GLOBAL _sound_jump
557   0000              	GLOBAL _sound_slide
558   0000              	GLOBAL _player_player_hit_pow
559   0000              	GLOBAL _game_match_back
560   0000              	GLOBAL _game_attribs
561   0000              	GLOBAL _game_boss_clear
562   0000              	GLOBAL _game_obj_clear
563   0000              	GLOBAL _game_obj_chk
564   0000              	GLOBAL _game_obj_set
565   0000              	GLOBAL _game_shoot_fire_boss
566   0000              	GLOBAL _game_shoot_fire
567   0000              	GLOBAL _game_add_enemy
568   0000              	GLOBAL _game_joystick_set_menu
569   0000              	GLOBAL _game_joystick_set
570   0000              	GLOBAL _game_joystick_change
571   0000              	GLOBAL _game_print_header
572   0000              	GLOBAL _game_end
573   0000              	GLOBAL _game_phase_print_score_back
574   0000              	GLOBAL _game_check_time
575   0000              	GLOBAL _game_rotate_attrib
576   0000              	GLOBAL _game_colour_message
577   0000              	GLOBAL _game_paint_attrib_lin_h
578   0000              	GLOBAL _game_paint_attrib_lin
579   0000              	GLOBAL _game_paint_attrib
580   0000              	GLOBAL _game_print_score
581   0000              	GLOBAL _game_unfreeze_all
582   0000              	GLOBAL _game_freeze_all
583   0000              	GLOBAL _game_freeze
584   0000              	GLOBAL _game_enemy_add_get_index
585   0000              	GLOBAL _game_check_cell
586   0000              	GLOBAL _game_check_map
587   0000              	GLOBAL _game_loop
588   0000              	GLOBAL _game_round_init
589   0000              	GLOBAL _game_start_timer
590   0000              	GLOBAL _game_tick
591   0000              	GLOBAL _game_update_stats
592   0000              	GLOBAL _game_print_footer
593   0000              	GLOBAL _game_fill_row
594   0000              	GLOBAL _game_fps
595   0000              	GLOBAL _game_respawn
596   0000              	GLOBAL _game_draw_screen
597   0000              	GLOBAL _boss_turn
598   0000              	GLOBAL _enemy_avoid_dead
599   0000              	GLOBAL _enemy_avoid_fall
600   0000              	GLOBAL _enemy_respawn
601   0000              	GLOBAL _enemy_init
602   0000              	GLOBAL _enemy_move
603   0000              	GLOBAL _enemy_turn
604   0000              	GLOBAL _enemy_hit
605   0000              	GLOBAL _enemy_coin1
606   0000              	GLOBAL _enemy_static
607   0000              	GLOBAL _enemy_walk
608   0000              	GLOBAL _enemy_horizontal
609   0000              	GLOBAL _enemy_vertical
610   0000              	GLOBAL _ay_fx_play
611   0000              	GLOBAL _ay_midi_play
612   0000              	GLOBAL _ay_is_playing
613   0000              	GLOBAL _ay_reset
614   0000              	GLOBAL _test_func
615   0000              	GLOBAL _test_proc
616   0000              	GLOBAL _in_mouse_kempston_wheel_delta
617   0000              	GLOBAL _in_mouse_kempston_wheel
618   0000              	GLOBAL _in_mouse_kempston_callee
619   0000              	GLOBAL _in_mouse_kempston
620   0000              	GLOBAL _in_mouse_kempston_setpos_callee
621   0000              	GLOBAL _in_mouse_kempston_setpos
622   0000              	GLOBAL _in_mouse_kempston_reset
623   0000              	GLOBAL _in_mouse_kempston_init
624   0000              	GLOBAL _in_mouse_amx_wheel_delta
625   0000              	GLOBAL _in_mouse_amx_wheel
626   0000              	GLOBAL _in_mouse_amx_callee
627   0000              	GLOBAL _in_mouse_amx
628   0000              	GLOBAL _in_mouse_amx_setpos_callee
629   0000              	GLOBAL _in_mouse_amx_setpos
630   0000              	GLOBAL _in_mouse_amx_reset
631   0000              	GLOBAL _in_mouse_amx_init_callee
632   0000              	GLOBAL _in_mouse_amx_init
633   0000              	GLOBAL _in_stick_sinclair2
634   0000              	GLOBAL _in_stick_sinclair1
635   0000              	GLOBAL _in_stick_kempston
636   0000              	GLOBAL _in_stick_fuller
637   0000              	GLOBAL _in_stick_cursor
638   0000              	GLOBAL _in_stick_keyboard_fastcall
639   0000              	GLOBAL _in_stick_keyboard
640   0000              	GLOBAL _in_wait_nokey
641   0000              	GLOBAL _in_wait_key
642   0000              	GLOBAL _in_test_key
643   0000              	GLOBAL _in_pause_fastcall
644   0000              	GLOBAL _in_pause
645   0000              	GLOBAL _in_key_scancode_fastcall
646   0000              	GLOBAL _in_key_scancode
647   0000              	GLOBAL _in_key_pressed_fastcall
648   0000              	GLOBAL _in_key_pressed
649   0000              	GLOBAL _in_inkey
650   0000              	GLOBAL _NIRVANAP_CHAR_TABLE
651   0000              	GLOBAL _NIRVANAP_WIDE_IMAGES
652   0000              	GLOBAL _NIRVANAP_TILE_IMAGES
653   0000              	GLOBAL _NIRVANAP_HOLE
654   0000              	GLOBAL _NIRVANAP_ISR_HOOK
655   0000              	GLOBAL _player_lvl_table
656   0000              	GLOBAL _map_paper_last
657   0000              	GLOBAL _map_paper_clr
658   0000              	GLOBAL _map_paper
659   0000              	GLOBAL _draw_count
660   0000              	GLOBAL _g_player_hit_right
661   0000              	GLOBAL _g_player_hit_left
662   0000              	GLOBAL _joynames
663   0000              	GLOBAL _initials
664   0000              	GLOBAL _bullet_count
665   0000              	GLOBAL _spr_hack
666   0000              	GLOBAL _boss_stat
667   0000              	GLOBAL _boss_time_fire
668   0000              	GLOBAL _boss_time
669   0000              	GLOBAL _boss_tile
670   0000              	GLOBAL _boss_inc
671   0000              	GLOBAL _boss_col
672   0000              	GLOBAL _boss_lin
673   0000              	GLOBAL _bullet_vel
674   0000              	GLOBAL _bullet_frames
675   0000              	GLOBAL _bullet_colint
676   0000              	GLOBAL _bullet_dir
677   0000              	GLOBAL _bullet_tile
678   0000              	GLOBAL _bullet_col
679   0000              	GLOBAL _bullet_lin
680   0000              	GLOBAL _bullet_col0
681   0000              	GLOBAL _bullet_lin0
682   0000              	GLOBAL _bullet_max
683   0000              	GLOBAL _bullet_class
684   0000              	GLOBAL _mush_class
685   0000              	GLOBAL _mush_index
686   0000              	GLOBAL _anim_count
687   0000              	GLOBAL _anim_respanwn
688   0000              	GLOBAL _anim_loop
689   0000              	GLOBAL _anim_end
690   0000              	GLOBAL _anim_int
691   0000              	GLOBAL _anim_tile
692   0000              	GLOBAL _anim_col
693   0000              	GLOBAL _anim_lin
694   0000              	GLOBAL _map_heigth
695   0000              	GLOBAL _map_width
696   0000              	GLOBAL _scr_curr
697   0000              	GLOBAL _scr_obj1
698   0000              	GLOBAL _scr_obj0
699   0000              	GLOBAL _scr_map
700   0000              	GLOBAL _sprite_speed_alt
701   0000              	GLOBAL _sprite_frames
702   0000              	GLOBAL _sprite_speed
703   0000              	GLOBAL _screen_ink
704   0000              	GLOBAL _screen_paper
705   0000              	GLOBAL _player_over_stair
706   0000              	GLOBAL _game_start_scr
707   0000              	GLOBAL _game_respawn_tile
708   0000              	GLOBAL _game_respawn_index
709   0000              	GLOBAL _game_respawn_time
710   0000              	GLOBAL _game_menu_sel
711   0000              	GLOBAL _game_score_top
712   0000              	GLOBAL _player_coins
713   0000              	GLOBAL _player_lives
714   0000              	GLOBAL _game_over
715   0000              	GLOBAL _game_sound
716   0000              	GLOBAL _game_inmune
717   0000              	GLOBAL _game_god_mode
718   0000              	GLOBAL _game_two_player
719   0000              	GLOBAL _game_brick_tile
720   0000              	GLOBAL _sprite_curr_index
721   0000              	GLOBAL _spr_count
722   0000              	GLOBAL _bullet_time
723   0000              	GLOBAL _anim_time
724   0000              	GLOBAL _frame_time
725   0000              	GLOBAL _entry_time
726   0000              	GLOBAL _curr_time
727   0000              	GLOBAL _s_state
728   0000              	GLOBAL _attrib_hl
729   0000              	GLOBAL _attrib
730   0000              	GLOBAL _zx_val_asm
731   0000              	GLOBAL _enemies
732   0000              	GLOBAL _tmp_ui
733   0000              	GLOBAL _tmp_sc
734   0000              	GLOBAL _tmp_uc
735   0000              	GLOBAL _tmp1
736   0000              	GLOBAL _tmp0
737   0000              	GLOBAL _tmp
738   0000              	GLOBAL _index1
739   0000              	GLOBAL _index0
740   0000              	GLOBAL _loop_count
741   0000              	GLOBAL _s_col1
742   0000              	GLOBAL _s_col0
743   0000              	GLOBAL _s_lin1
744   0000              	GLOBAL _s_lin0
745   0000              	GLOBAL _s_tile1
746   0000              	GLOBAL _s_tile0
747   0000              	GLOBAL _player_brick_time
748   0000              	GLOBAL _player_hit_count
749   0000              	GLOBAL _sprite_horizontal_check
750   0000              	GLOBAL _sprite_on_air
751   0000              	GLOBAL _sprite
752   0000              	GLOBAL _fps
753   0000              	GLOBAL _game_respawn_curr_time
754   0000              	GLOBAL _game_worldup
755   0000              	GLOBAL _game_mush_count
756   0000              	GLOBAL _game_boss_fix
757   0000              	GLOBAL _game_boss_hit
758   0000              	GLOBAL _game_boss_alive
759   0000              	GLOBAL _game_boss
760   0000              	GLOBAL _game_world
761   0000              	GLOBAL _game_gravity
762   0000              	GLOBAL _player_anim_stair
763   0000              	GLOBAL _player_hit_time
764   0000              	GLOBAL _player_lin_scr
765   0000              	GLOBAL _player_col_scr
766   0000              	GLOBAL _player_lvl
767   0000              	GLOBAL _player_int
768   0000              	GLOBAL _player_str
769   0000              	GLOBAL _player_max_vita
770   0000              	GLOBAL _player_max_mana
771   0000              	GLOBAL _player_vita
772   0000              	GLOBAL _player_mana
773   0000              	GLOBAL _player_keys
774   0000              	GLOBAL _player_vel_inc
775   0000              	GLOBAL _player_vel_y1
776   0000              	GLOBAL _player_vel_y0
777   0000              	GLOBAL _player_vel_y
778   0000              	GLOBAL _player_vel_x
779   0000              	GLOBAL _player_joy
780   0000              	GLOBAL _player_score
781   0000              	GLOBAL _last_time
782   0000              	GLOBAL _player_slide
783   0000              	GLOBAL _spr_timer
784   0000              	GLOBAL _jump_lin
785   0000              	GLOBAL _player_hit_col
786   0000              	GLOBAL _player_hit_lin
787   0000              	GLOBAL _colint
788   0000              	GLOBAL _col
789   0000              	GLOBAL _lin
790   0000              	GLOBAL _tile
791   0000              	GLOBAL _state_a
792   0000              	GLOBAL _state
793   0000              	GLOBAL _class
794   0000              	GLOBAL _tbuffer
795   0000              	GLOBAL _dirs
796   0000              	GLOBAL _k1
797   0000              	GLOBAL _joyfunc1
798   0000              	GLOBAL _btiles
799   0000              	GLOBAL _spec128
800   0000              	GLOBAL _GLOBAL_ZX_PORT_7FFD
801   0000              	GLOBAL _GLOBAL_ZX_PORT_1FFD
802   0000              	GLOBAL _GLOBAL_ZX_PORT_FE
803   0000              	GLOBAL _ay_effect_20
804   0000              	GLOBAL _ay_effect_19
805   0000              	GLOBAL _ay_effect_18
806   0000              	GLOBAL _ay_effect_17
807   0000              	GLOBAL _ay_effect_16
808   0000              	GLOBAL _ay_effect_15
809   0000              	GLOBAL _ay_effect_14
810   0000              	GLOBAL _ay_effect_13
811   0000              	GLOBAL _ay_effect_12
812   0000              	GLOBAL _ay_effect_11
813   0000              	GLOBAL _ay_effect_10
814   0000              	GLOBAL _ay_effect_09
815   0000              	GLOBAL _ay_effect_08
816   0000              	GLOBAL _ay_effect_07
817   0000              	GLOBAL _ay_effect_06
818   0000              	GLOBAL _ay_effect_05
819   0000              	GLOBAL _ay_effect_04
820   0000              	GLOBAL _ay_effect_03
821   0000              	GLOBAL _ay_effect_02
822   0000              	GLOBAL _ay_effect_01
823   0000              	GLOBAL _pb_midi_phase_1
824   0000              	GLOBAL _pb_midi_title
825   0000              	GLOBAL _control_method
826   0000              	GLOBAL _world1_h
827   0000              	GLOBAL _world1_w
828   0000              	GLOBAL _world1
829   0000              	GLOBAL _paper1
830   0000              	GLOBAL _lenght1
831   0000              	GLOBAL _start_scr1
832   0000              	GLOBAL _world0_h
833   0000              	GLOBAL _world0_w
834   0000              	GLOBAL _world0
835   0000              	GLOBAL _paper0
836   0000              	GLOBAL _lenght0
837   0000              	GLOBAL _start_scr0
838   0000              ;--------------------------------------------------------
839   0000              ; special function registers
840   0000              ;--------------------------------------------------------
841   0000              defc _IO_FE	=	0x00fe
842   0000              defc _IO_1FFD	=	0x1ffd
843   0000              defc _IO_7FFD	=	0x7ffd
844   0000              ;--------------------------------------------------------
845   0000              ; ram data
846   0000              ;--------------------------------------------------------
847   0000              	SECTION bss_compiler
848   0000              ;--------------------------------------------------------
849   0000              ; ram data
850   0000              ;--------------------------------------------------------
851   0000              
852   0000              IF 0
853   0000              
854   0000              ; .area _INITIALIZED removed by z88dk
855   0000              
856   0000              
857   0000              ENDIF
858   0000              
859   0000              ;--------------------------------------------------------
860   0000              ; absolute external ram data
861   0000              ;--------------------------------------------------------
862   0000              	SECTION IGNORE
863   0000              ;--------------------------------------------------------
864   0000              ; global & static initialisations
865   0000              ;--------------------------------------------------------
866   0000              	SECTION code_crt_init
867   0000              ;--------------------------------------------------------
868   0000              ; Home
869   0000              ;--------------------------------------------------------
870   0000              	SECTION IGNORE
871   0000              ;--------------------------------------------------------
872   0000              ; code
873   0000              ;--------------------------------------------------------
874   0000              	SECTION code_compiler
875   0000              ;	---------------------------------
876   0000              ; Function player_init
877   0000              ; ---------------------------------
878   0000              _player_init:
879   0000  CD 00 00    	call	___sdcc_enter_ix
880   0003  21 07 00    	ld	hl, +(_class + 0x0007)
881   0006  36 00       	ld	(hl),0x00
882   0008  21 07 00    	ld	hl, +(_tile + 0x0007)
883   000B  DD 7E 06    	ld	a,(ix+6)
884   000E  77          	ld	(hl), a
885   000F  21 07 00    	ld	hl, +(_lin + 0x0007)
886   0012  DD 7E 04    	ld	a,(ix+4)
887   0015  77          	ld	(hl), a
888   0016  21 07 00    	ld	hl, +(_col + 0x0007)
889   0019  DD 7E 05    	ld	a,(ix+5)
890   001C  77          	ld	(hl), a
891   001D  21 07 00    	ld	hl, +(_colint + 0x0007)
892   0020  36 00       	ld	(hl),0x00
893   0022  21 07 00    	ld	hl, +(_state + 0x0007)
894   0025  36 00       	ld	(hl),0x00
895   0027  01 07 00    	ld	bc,_state_a+7
896   002A  AF          	xor	a, a
897   002B  02          	ld	(bc), a
898   002C  21 07 00    	ld	hl, +(_jump_lin + 0x0007)
899   002F  DD 7E 04    	ld	a,(ix+4)
900   0032  77          	ld	(hl), a
901   0033  ED 5B 00 00 	ld	de,(_curr_time)
902   0037  ED 53 0E 00 	ld	(_last_time + 0x000e),de
903   003B  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
904   003E  36 00       	ld	(hl),0x00
905   0040  0A          	ld	a, (bc)
906   0041  F6 11       	or	a,+(0x01|0x10)
907   0043  02          	ld	(bc),a
908   0044  21 00 00    	ld	hl,_player_hit_col
909   0047  36 00       	ld	(hl),0x00
910   0049  21 00 00    	ld	hl,_player_hit_lin
911   004C  36 00       	ld	(hl),0x00
912   004E  21 00 00    	ld	hl,_player_slide
913   0051  36 00       	ld	(hl),0x00
914   0053  DD 66 05    	ld	h,(ix+5)
915   0056  DD 6E 04    	ld	l,(ix+4)
916   0059  E5          	push	hl
917   005A  DD 56 06    	ld	d,(ix+6)
918   005D  1E 07       	ld	e,0x07
919   005F  D5          	push	de
920   0060  CD 00 00    	call	_NIRVANAP_spriteT_callee
921   0063  DD E1       	pop	ix
922   0065  C9          	ret
923   0066              	SECTION code_compiler
924   0066              ;	---------------------------------
925   0066              ; Function player_check_input
926   0066              ; ---------------------------------
927   0066              _player_check_input:
928   0066  21 00 00    	ld	hl,_dirs
929   0069  CB 56       	bit	2, (hl)
930   006B  28 0C       	jr	Z,l_player_check_input_00102
931   006D  21 00 00    	ld	hl,_dirs
932   0070  CB 5E       	bit	3, (hl)
933   0072  28 05       	jr	Z,l_player_check_input_00102
934   0074  21 00 00    	ld	hl,_dirs
935   0077  36 00       	ld	(hl),0x00
936   0079              l_player_check_input_00102:
937   0079  21 00 00    	ld	hl,_dirs
938   007C  7E          	ld	a, (hl)
939   007D  CB 07       	rlc	a
940   007F  E6 01       	and	a,0x01
941   0081  CB 47       	bit	0, a
942   0083  20 1D       	jr	NZ,l_player_check_input_00107
943   0085  CB 56       	bit	2, (hl)
944   0087  20 19       	jr	NZ,l_player_check_input_00107
945   0089  21 00 00    	ld	hl,_dirs
946   008C  CB 5E       	bit	3, (hl)
947   008E  20 12       	jr	NZ,l_player_check_input_00107
948   0090  21 00 00    	ld	hl,_dirs
949   0093  CB 46       	bit	0, (hl)
950   0095  20 0B       	jr	NZ,l_player_check_input_00107
951   0097  21 00 00    	ld	hl,_dirs
952   009A  CB 4E       	bit	1, (hl)
953   009C  20 04       	jr	NZ,l_player_check_input_00107
954   009E  2E 00       	ld	l,0x00
955   00A0  18 02       	jr	l_player_check_input_00108
956   00A2              l_player_check_input_00107:
957   00A2  2E 01       	ld	l,0x01
958   00A4              l_player_check_input_00108:
959   00A4  C9          	ret
960   00A5              	SECTION code_compiler
961   00A5              ;	---------------------------------
962   00A5              ; Function player_collision
963   00A5              ; ---------------------------------
964   00A5              _player_collision:
965   00A5  CD 00 00    	call	___sdcc_enter_ix
966   00A8  F5          	push	af
967   00A9  21 19 00    	ld	hl,0x0019
968   00AC  E5          	push	hl
969   00AD  2A 00 00    	ld	hl,(_player_hit_time)
970   00B0  E5          	push	hl
971   00B1  CD 00 00    	call	_game_check_time
972   00B4  F1          	pop	af
973   00B5  F1          	pop	af
974   00B6  7D          	ld	a, l
975   00B7  B7          	or	a, a
976   00B8  CA 26 02    	jp	Z, l_player_collision_00127
977   00BB  21 00 00    	ld	hl,_sprite
978   00BE  36 00       	ld	(hl),0x00
979   00C0  01 00 00    	ld	bc,_col+0
980   00C3  3A 07 00    	ld	a,(_col + 7)
981   00C6  32 00 00    	ld	(_s_col1),a
982   00C9  3A 07 00    	ld	a,(_lin + 7)
983   00CC  32 00 00    	ld	(_s_lin1),a
984   00CF  C6 08       	add	a,0x08
985   00D1  57          	ld	d, a
986   00D2  3A 00 00    	ld	a,(_s_col1)
987   00D5  C5          	push	bc
988   00D6  5A          	ld	e,d
989   00D7  57          	ld	d,a
990   00D8  D5          	push	de
991   00D9  CD 00 00    	call	_spr_calc_index
992   00DC  F1          	pop	af
993   00DD  C1          	pop	bc
994   00DE  7D          	ld	a,l
995   00DF  32 00 00    	ld	(_sprite_curr_index),a
996   00E2  5F          	ld	e,a
997   00E3  16 00       	ld	d,0x00
998   00E5  21 00 00    	ld	hl,_scr_map
999   00E8  19          	add	hl,de
1000  00E9  5E          	ld	e, (hl)
1001  00EA  3E 2F       	ld	a,0x2f
1002  00EC  93          	sub	a, e
1003  00ED  30 1C       	jr	NC,l_player_collision_00123
1004  00EF  7B          	ld	a,e
1005  00F0  FE 3C       	cp	a,0x3c
1006  00F2  30 17       	jr	NC,l_player_collision_00123
1007  00F4  D6 39       	sub	a,0x39
1008  00F6  20 07       	jr	NZ,l_player_collision_00102
1009  00F8  21 00 00    	ld	hl,_game_worldup
1010  00FB  36 01       	ld	(hl),0x01
1011  00FD  18 0C       	jr	l_player_collision_00123
1012  00FF              l_player_collision_00102:
1013  00FF  2E 06       	ld	l,0x06
1014  0101  CD 00 00    	call	_zx_border_fastcall
1015  0104  C5          	push	bc
1016  0105  2E 32       	ld	l,0x32
1017  0107  CD 07 11    	call	_player_hit
1018  010A  C1          	pop	bc
1019  010B              l_player_collision_00123:
1020  010B  21 00 00    	ld	hl,_sprite
1021  010E  7E          	ld	a, (hl)
1022  010F  D6 07       	sub	a,0x07
1023  0111  D2 26 02    	jp	NC, l_player_collision_00127
1024  0114  3E 00       	ld	a, +((_class) & 0xFF)
1025  0116  86          	add	a, (hl)
1026  0117  5F          	ld	e, a
1027  0118  3E 00       	ld	a, +((_class) / 256)
1028  011A  CE 00       	adc	a,0x00
1029  011C  57          	ld	d, a
1030  011D  1A          	ld	a, (de)
1031  011E  B7          	or	a, a
1032  011F  CA 1F 02    	jp	Z, l_player_collision_00122
1033  0122  79          	ld	a, c
1034  0123  86          	add	a, (hl)
1035  0124  5F          	ld	e, a
1036  0125  78          	ld	a, b
1037  0126  CE 00       	adc	a,0x00
1038  0128  57          	ld	d, a
1039  0129  1A          	ld	a, (de)
1040  012A  DD 77 FE    	ld	(ix-2),a
1041  012D  DD 36 FF 00 	ld	(ix-1),0x00
1042  0131  3A 00 00    	ld	a,(_s_col1)
1043  0134  5F          	ld	e,a
1044  0135  16 00       	ld	d,0x00
1045  0137  DD 7E FE    	ld	a,(ix-2)
1046  013A  93          	sub	a, e
1047  013B  6F          	ld	l, a
1048  013C  DD 7E FF    	ld	a,(ix-1)
1049  013F  9A          	sbc	a, d
1050  0140  67          	ld	h, a
1051  0141  CD 00 00    	call	_abs_fastcall
1052  0144  EB          	ex	de,hl
1053  0145  7B          	ld	a, e
1054  0146  D6 02       	sub	a,0x02
1055  0148  7A          	ld	a, d
1056  0149  17          	rla
1057  014A  3F          	ccf
1058  014B  1F          	rra
1059  014C  DE 80       	sbc	a,0x80
1060  014E  D2 1F 02    	jp	NC, l_player_collision_00122
1061  0151  2A 00 00    	ld	hl,(_sprite)
1062  0154  26 00       	ld	h,0x00
1063  0156  11 00 00    	ld	de,_lin
1064  0159  19          	add	hl,de
1065  015A  7E          	ld	a,(hl)
1066  015B  DD 77 FE    	ld	(ix-2),a
1067  015E  DD 36 FF 00 	ld	(ix-1),0x00
1068  0162  3A 00 00    	ld	a,(_s_lin1)
1069  0165  5F          	ld	e,a
1070  0166  16 00       	ld	d,0x00
1071  0168  DD 7E FE    	ld	a,(ix-2)
1072  016B  93          	sub	a, e
1073  016C  6F          	ld	l, a
1074  016D  DD 7E FF    	ld	a,(ix-1)
1075  0170  9A          	sbc	a, d
1076  0171  67          	ld	h, a
1077  0172  CD 00 00    	call	_abs_fastcall
1078  0175  EB          	ex	de,hl
1079  0176  7B          	ld	a, e
1080  0177  D6 0E       	sub	a,0x0e
1081  0179  7A          	ld	a, d
1082  017A  17          	rla
1083  017B  3F          	ccf
1084  017C  1F          	rra
1085  017D  DE 80       	sbc	a,0x80
1086  017F  D2 1F 02    	jp	NC, l_player_collision_00122
1087  0182  2A 00 00    	ld	hl,(_sprite)
1088  0185  26 00       	ld	h,0x00
1089  0187  01 00 00    	ld	bc,_class
1090  018A  09          	add	hl,bc
1091  018B  7E          	ld	a,(hl)
1092  018C  FE 06       	cp	a,0x06
1093  018E  28 05       	jr	Z,l_player_collision_00189
1094  0190  21 00 00    	ld	hl,_sprite
1095  0193  18 2D       	jr	l_player_collision_00110
1096  0195              l_player_collision_00189:
1097  0195  21 00 00    	ld	hl,_player_vita
1098  0198  7E          	ld	a, (hl)
1099  0199  C6 19       	add	a,0x19
1100  019B  77          	ld	(hl), a
1101  019C  3A 00 00    	ld	a,(_player_max_vita)
1102  019F  21 00 00    	ld	hl,_player_vita
1103  01A2  96          	sub	a, (hl)
1104  01A3  30 06       	jr	NC,l_player_collision_00108
1105  01A5  3A 00 00    	ld	a,(_player_max_vita)
1106  01A8  32 00 00    	ld	(_player_vita),a
1107  01AB              l_player_collision_00108:
1108  01AB  21 01 00    	ld	hl,0x0001
1109  01AE  CD 23 0B    	call	_player_score_add
1110  01B1  CD 00 00    	call	_game_update_stats
1111  01B4  2A 00 00    	ld	hl,(_sprite)
1112  01B7  CD 00 00    	call	_spr_destroy
1113  01BA  21 00 00    	ld	hl,_game_mush_count
1114  01BD  35          	dec	(hl)
1115  01BE  2E 00       	ld	l,0x00
1116  01C0  18 66       	jr	l_player_collision_00128
1117  01C2              l_player_collision_00110:
1118  01C2  FE 07       	cp	a,0x07
1119  01C4  20 2D       	jr	NZ,l_player_collision_00114
1120  01C6  21 00 00    	ld	hl,_player_mana
1121  01C9  7E          	ld	a, (hl)
1122  01CA  C6 19       	add	a,0x19
1123  01CC  77          	ld	(hl), a
1124  01CD  3A 00 00    	ld	a,(_player_max_mana)
1125  01D0  21 00 00    	ld	hl,_player_mana
1126  01D3  96          	sub	a, (hl)
1127  01D4  30 06       	jr	NC,l_player_collision_00112
1128  01D6  3A 00 00    	ld	a,(_player_max_mana)
1129  01D9  32 00 00    	ld	(_player_mana),a
1130  01DC              l_player_collision_00112:
1131  01DC  21 01 00    	ld	hl,0x0001
1132  01DF  CD 23 0B    	call	_player_score_add
1133  01E2  CD 00 00    	call	_game_update_stats
1134  01E5  2A 00 00    	ld	hl,(_sprite)
1135  01E8  CD 00 00    	call	_spr_destroy
1136  01EB  21 00 00    	ld	hl,_game_mush_count
1137  01EE  35          	dec	(hl)
1138  01EF  2E 00       	ld	l,0x00
1139  01F1  18 35       	jr	l_player_collision_00128
1140  01F3              l_player_collision_00114:
1141  01F3  D6 08       	sub	a,0x08
1142  01F5  20 1A       	jr	NZ,l_player_collision_00116
1143  01F7  CD 2C 02    	call	_player_1up
1144  01FA  21 01 00    	ld	hl,0x0001
1145  01FD  CD 23 0B    	call	_player_score_add
1146  0200  CD 00 00    	call	_game_update_stats
1147  0203  2A 00 00    	ld	hl,(_sprite)
1148  0206  CD 00 00    	call	_spr_destroy
1149  0209  21 00 00    	ld	hl,_game_mush_count
1150  020C  35          	dec	(hl)
1151  020D  2E 00       	ld	l,0x00
1152  020F  18 17       	jr	l_player_collision_00128
1153  0211              l_player_collision_00116:
1154  0211  2E 02       	ld	l,0x02
1155  0213  CD 00 00    	call	_zx_border_fastcall
1156  0216  2E 14       	ld	l,0x14
1157  0218  CD 07 11    	call	_player_hit
1158  021B  2E 01       	ld	l,0x01
1159  021D  18 09       	jr	l_player_collision_00128
1160  021F              l_player_collision_00122:
1161  021F  21 00 00    	ld	hl,_sprite
1162  0222  34          	inc	(hl)
1163  0223  C3 0B 01    	jp	l_player_collision_00123
1164  0226              l_player_collision_00127:
1165  0226  2E 00       	ld	l,0x00
1166  0228              l_player_collision_00128:
1167  0228  F1          	pop	af
1168  0229  DD E1       	pop	ix
1169  022B  C9          	ret
1170  022C              	SECTION code_compiler
1171  022C              ;	---------------------------------
1172  022C              ; Function player_1up
1173  022C              ; ---------------------------------
1174  022C              _player_1up:
1175  022C  21 00 00    	ld	hl,_player_lives
1176  022F  7E          	ld	a, (hl)
1177  0230  D6 FF       	sub	a,0xff
1178  0232  D0          	ret	NC
1179  0233  34          	inc	(hl)
1180  0234  21 00 00    	ld	hl,___str_0
1181  0237  E5          	push	hl
1182  0238  21 0C 0C    	ld	hl,0x0c0c
1183  023B  E5          	push	hl
1184  023C  CD 00 00    	call	_zx_print_str
1185  023F  AF          	xor	a, a
1186  0240  F5          	push	af
1187  0241  33          	inc	sp
1188  0242  21 19 00    	ld	hl,0x0019
1189  0245  E5          	push	hl
1190  0246  21 0C 15    	ld	hl,0x150c
1191  0249  E5          	push	hl
1192  024A  3E 0C       	ld	a,0x0c
1193  024C  F5          	push	af
1194  024D  33          	inc	sp
1195  024E  CD 00 00    	call	_game_colour_message
1196  0251  F1          	pop	af
1197  0252  F1          	pop	af
1198  0253  F1          	pop	af
1199  0254  CD 00 00    	call	_game_update_stats
1200  0257  C9          	ret
1201  0258              	SECTION rodata_compiler
1202  0000              ___str_0:
1203  0000  31 20 55 50 21 
                        	DEFM "1 UP!"
1204  0005  00          	DEFB 0x00
1205  0006              	SECTION code_compiler
1206  0258              ;	---------------------------------
1207  0258              ; Function player_kill
1208  0258              ; ---------------------------------
1209  0258              _player_kill:
1210  0258  01 07 00    	ld	bc,_state+7
1211  025B  0A          	ld	a, (bc)
1212  025C  CB 6F       	bit	5, a
1213  025E  20 5E       	jr	NZ,l_player_kill_00109
1214  0260  C5          	push	bc
1215  0261  CD 00 00    	call	_sound_hit_brick
1216  0264  C1          	pop	bc
1217  0265  0A          	ld	a, (bc)
1218  0266  F6 20       	or	a,0x20
1219  0268  5F          	ld	e,a
1220  0269  02          	ld	(bc), a
1221  026A  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
1222  026D  36 03       	ld	(hl),0x03
1223  026F  CB 53       	bit	2, e
1224  0271  28 07       	jr	Z,l_player_kill_00102
1225  0273  21 07 00    	ld	hl, +(_tile + 0x0007)
1226  0276  36 4C       	ld	(hl),0x4c
1227  0278  18 05       	jr	l_player_kill_00103
1228  027A              l_player_kill_00102:
1229  027A  21 07 00    	ld	hl, +(_tile + 0x0007)
1230  027D  36 54       	ld	(hl),0x54
1231  027F              l_player_kill_00103:
1232  027F  CD F4 0A    	call	_player_hit_platform_clear
1233  0282  21 07 00    	ld	hl,+(_col + 0x0007)
1234  0285  5E          	ld	e, (hl)
1235  0286  21 07 00    	ld	hl,+(_lin + 0x0007)
1236  0289  4E          	ld	c, (hl)
1237  028A  21 07 00    	ld	hl,+(_tile + 0x0007)
1238  028D  46          	ld	b, (hl)
1239  028E  7B          	ld	a, e
1240  028F  F5          	push	af
1241  0290  33          	inc	sp
1242  0291  79          	ld	a, c
1243  0292  48          	ld	c,b
1244  0293  47          	ld	b,a
1245  0294  3A 00 00    	ld	a,(_sprite)
1246  0297  C5          	push	bc
1247  0298  F5          	push	af
1248  0299  33          	inc	sp
1249  029A  CD 00 00    	call	_NIRVANAP_spriteT_callee
1250  029D  2A 00 00    	ld	hl,(_curr_time)
1251  02A0  22 0E 00    	ld	(_spr_timer + 0x000e),hl
1252  02A3  3A 00 00    	ld	a,(_sprite)
1253  02A6  D6 07       	sub	a,0x07
1254  02A8  20 0B       	jr	NZ,l_player_kill_00105
1255  02AA  01 07 00    	ld	bc,_state_a+7
1256  02AD  0A          	ld	a, (bc)
1257  02AE  F6 08       	or	a,0x08
1258  02B0  E6 EF       	and	a,0xef
1259  02B2  02          	ld	(bc),a
1260  02B3  18 09       	jr	l_player_kill_00109
1261  02B5              l_player_kill_00105:
1262  02B5  01 07 00    	ld	bc,_state_a+7
1263  02B8  0A          	ld	a, (bc)
1264  02B9  F6 10       	or	a,0x10
1265  02BB  E6 F7       	and	a,0xf7
1266  02BD  02          	ld	(bc),a
1267  02BE              l_player_kill_00109:
1268  02BE  C9          	ret
1269  02BF              	SECTION code_compiler
1270  02BF              ;	---------------------------------
1271  02BF              ; Function player_turn
1272  02BF              ; ---------------------------------
1273  02BF              _player_turn:
1274  02BF  21 00 00    	ld	hl,_sprite
1275  02C2  CD 00 00    	call	_spr_chktime
1276  02C5  7D          	ld	a, l
1277  02C6  B7          	or	a, a
1278  02C7  C8          	ret	Z
1279  02C8  21 00 00    	ld	hl,_k1
1280  02CB  E5          	push	hl
1281  02CC  2A 00 00    	ld	hl,(_joyfunc1)
1282  02CF  CD 00 00    	call	___sdcc_call_hl
1283  02D2  F1          	pop	af
1284  02D3  7D          	ld	a,l
1285  02D4  32 00 00    	ld	(_dirs),a
1286  02D7  CD DD 02    	call	_player_move
1287  02DA  C3 A5 00    	jp  _player_collision
1288  02DD              	SECTION code_compiler
1289  02DD              ;	---------------------------------
1290  02DD              ; Function player_move
1291  02DD              ; ---------------------------------
1292  02DD              _player_move:
1293  02DD  3A 07 00    	ld	a,(_lin + 0x0007)
1294  02E0  32 00 00    	ld	(_s_lin0),a
1295  02E3  3A 07 00    	ld	a,(_col + 0x0007)
1296  02E6  32 00 00    	ld	(_s_col0),a
1297  02E9  21 07 00    	ld	hl,+(_tile + 0x0007)
1298  02EC  4E          	ld	c, (hl)
1299  02ED  21 07 00    	ld	hl,+(_colint + 0x0007)
1300  02F0  46          	ld	b, (hl)
1301  02F1  79          	ld	a, c
1302  02F2  80          	add	a, b
1303  02F3  32 00 00    	ld	(_s_tile0),a
1304  02F6  3A 07 00    	ld	a,(_state + 0x0007)
1305  02F9  32 00 00    	ld	(_s_state),a
1306  02FC  21 00 00    	ld	hl,_s_state
1307  02FF  CB 46       	bit	0, (hl)
1308  0301  20 07       	jr	NZ,l_player_move_00111
1309  0303  21 00 00    	ld	hl,_s_state
1310  0306  CB 4E       	bit	1, (hl)
1311  0308  28 49       	jr	Z,l_player_move_00112
1312  030A              l_player_move_00111:
1313  030A  CD 1B 06    	call	_player_fire
1314  030D  3A 00 00    	ld	a,(_player_vel_y)
1315  0310  21 00 00    	ld	hl,_player_vel_y1
1316  0313  96          	sub	a, (hl)
1317  0314  E2 19 03    	jp	PO, l_player_move_00156
1318  0317  EE 80       	xor	a,0x80
1319  0319              l_player_move_00156:
1320  0319  F2 3C 03    	jp	P, l_player_move_00106
1321  031C  21 00 00    	ld	hl,_dirs
1322  031F  CB 56       	bit	2, (hl)
1323  0321  28 09       	jr	Z,l_player_move_00102
1324  0323  21 00 00    	ld	hl,_s_state
1325  0326  7E          	ld	a,(hl)
1326  0327  F6 08       	or	a,0x08
1327  0329  E6 FB       	and	a,0xfb
1328  032B  77          	ld	(hl),a
1329  032C              l_player_move_00102:
1330  032C  21 00 00    	ld	hl,_dirs
1331  032F  CB 4E       	bit	1, (hl)
1332  0331  28 09       	jr	Z,l_player_move_00106
1333  0333  21 00 00    	ld	hl,_s_state
1334  0336  7E          	ld	a,(hl)
1335  0337  F6 04       	or	a,0x04
1336  0339  E6 F7       	and	a,0xf7
1337  033B  77          	ld	(hl),a
1338  033C              l_player_move_00106:
1339  033C  CD 0C 0D    	call	_player_move_jump
1340  033F  7D          	ld	a, l
1341  0340  B7          	or	a, a
1342  0341  28 16       	jr	Z,l_player_move_00113
1343  0343  3A 00 00    	ld	a,(_player_over_stair)
1344  0346  B7          	or	a, a
1345  0347  20 10       	jr	NZ,l_player_move_00113
1346  0349  21 60 08    	ld	hl,0x0860
1347  034C  E5          	push	hl
1348  034D  CD 49 04    	call	_player_tile
1349  0350  F1          	pop	af
1350  0351  18 06       	jr	l_player_move_00113
1351  0353              l_player_move_00112:
1352  0353  CD 64 04    	call	_player_move_input
1353  0356  CD 87 0B    	call	_player_check_floor
1354  0359              l_player_move_00113:
1355  0359  CD 00 00    	call	_spr_redraw
1356  035C  7D          	ld	a, l
1357  035D  B7          	or	a, a
1358  035E  28 03       	jr	Z,l_player_move_00116
1359  0360  CD 64 06    	call	_player_check_map
1360  0363              l_player_move_00116:
1361  0363  3A 00 00    	ld	a,(_player_hit_lin)
1362  0366  B7          	or	a, a
1363  0367  28 03       	jr	Z,l_player_move_00118
1364  0369  CD F4 0A    	call	_player_hit_platform_clear
1365  036C              l_player_move_00118:
1366  036C  3A 00 00    	ld	a,(_s_state)
1367  036F  32 07 00    	ld	((_state + 0x0007)),a
1368  0372  2E 00       	ld	l,0x00
1369  0374  C9          	ret
1370  0375              	SECTION code_compiler
1371  0375              ;	---------------------------------
1372  0375              ; Function player_check_stairs_down
1373  0375              ; ---------------------------------
1374  0375              _player_check_stairs_down:
1375  0375  CD 00 00    	call	___sdcc_enter_ix
1376  0378  3B          	dec	sp
1377  0379  3A 07 00    	ld	a,(_col + 0x0007)
1378  037C  DD 86 04    	add	a,(ix+4)
1379  037F  47          	ld	b, a
1380  0380  3A 07 00    	ld	a,(_lin + 0x0007)
1381  0383  C6 10       	add	a,0x10
1382  0385  4F          	ld	c,a
1383  0386  C5          	push	bc
1384  0387  CD 00 00    	call	_spr_calc_index
1385  038A  F1          	pop	af
1386  038B  7D          	ld	a,l
1387  038C  32 00 00    	ld	(_sprite_curr_index),a
1388  038F  4F          	ld	c,a
1389  0390  06 00       	ld	b,0x00
1390  0392  21 00 00    	ld	hl,_scr_map
1391  0395  09          	add	hl,bc
1392  0396  7E          	ld	a,(hl)
1393  0397  4F          	ld	c,a
1394  0398  D6 44       	sub	a,0x44
1395  039A  38 05       	jr	C,l_player_check_stairs_down_00107
1396  039C  3E 47       	ld	a,0x47
1397  039E  91          	sub	a, c
1398  039F  30 04       	jr	NC,l_player_check_stairs_down_00108
1399  03A1              l_player_check_stairs_down_00107:
1400  03A1  3E 00       	ld	a,0x00
1401  03A3  18 02       	jr	l_player_check_stairs_down_00109
1402  03A5              l_player_check_stairs_down_00108:
1403  03A5  3E 01       	ld	a,0x01
1404  03A7              l_player_check_stairs_down_00109:
1405  03A7  B7          	or	a, a
1406  03A8  28 09       	jr	Z,l_player_check_stairs_down_00105
1407  03AA  21 00 00    	ld	hl,_player_over_stair
1408  03AD  7E          	ld	a, (hl)
1409  03AE  B7          	or	a, a
1410  03AF  20 02       	jr	NZ,l_player_check_stairs_down_00105
1411  03B1  36 01       	ld	(hl),0x01
1412  03B3              l_player_check_stairs_down_00105:
1413  03B3  33          	inc	sp
1414  03B4  DD E1       	pop	ix
1415  03B6  C9          	ret
1416  03B7              	SECTION code_compiler
1417  03B7              ;	---------------------------------
1418  03B7              ; Function player_check_stairs
1419  03B7              ; ---------------------------------
1420  03B7              _player_check_stairs:
1421  03B7  CD 00 00    	call	___sdcc_enter_ix
1422  03BA  3B          	dec	sp
1423  03BB  5D          	ld	e, l
1424  03BC  3A 07 00    	ld	a,(_col + 0x0007)
1425  03BF  83          	add	a, e
1426  03C0  4F          	ld	c, a
1427  03C1  21 07 00    	ld	hl,+(_lin + 0x0007)
1428  03C4  46          	ld	b, (hl)
1429  03C5  D5          	push	de
1430  03C6  79          	ld	a, c
1431  03C7  48          	ld	c,b
1432  03C8  47          	ld	b,a
1433  03C9  C5          	push	bc
1434  03CA  CD 00 00    	call	_spr_calc_index
1435  03CD  F1          	pop	af
1436  03CE  D1          	pop	de
1437  03CF  7D          	ld	a,l
1438  03D0  32 00 00    	ld	(_sprite_curr_index),a
1439  03D3  4F          	ld	c,a
1440  03D4  06 00       	ld	b,0x00
1441  03D6  21 00 00    	ld	hl,_scr_map
1442  03D9  09          	add	hl,bc
1443  03DA  7E          	ld	a,(hl)
1444  03DB  4F          	ld	c,a
1445  03DC  D6 44       	sub	a,0x44
1446  03DE  38 05       	jr	C,l_player_check_stairs_00111
1447  03E0  3E 47       	ld	a,0x47
1448  03E2  91          	sub	a, c
1449  03E3  30 04       	jr	NC,l_player_check_stairs_00112
1450  03E5              l_player_check_stairs_00111:
1451  03E5  0E 00       	ld	c,0x00
1452  03E7  18 02       	jr	l_player_check_stairs_00113
1453  03E9              l_player_check_stairs_00112:
1454  03E9  0E 01       	ld	c,0x01
1455  03EB              l_player_check_stairs_00113:
1456  03EB  3A 07 00    	ld	a,(_col + 0x0007)
1457  03EE  83          	add	a, e
1458  03EF  57          	ld	d, a
1459  03F0  3A 07 00    	ld	a,(_lin + 0x0007)
1460  03F3  C6 0F       	add	a,0x0f
1461  03F5  47          	ld	b, a
1462  03F6  C5          	push	bc
1463  03F7  58          	ld	e,b
1464  03F8  D5          	push	de
1465  03F9  CD 00 00    	call	_spr_calc_index
1466  03FC  F1          	pop	af
1467  03FD  C1          	pop	bc
1468  03FE  7D          	ld	a,l
1469  03FF  32 00 00    	ld	(_sprite_curr_index),a
1470  0402  5F          	ld	e,a
1471  0403  16 00       	ld	d,0x00
1472  0405  21 00 00    	ld	hl,_scr_map
1473  0408  19          	add	hl,de
1474  0409  7E          	ld	a,(hl)
1475  040A  47          	ld	b,a
1476  040B  D6 44       	sub	a,0x44
1477  040D  38 05       	jr	C,l_player_check_stairs_00114
1478  040F  3E 47       	ld	a,0x47
1479  0411  90          	sub	a, b
1480  0412  30 04       	jr	NC,l_player_check_stairs_00115
1481  0414              l_player_check_stairs_00114:
1482  0414  06 00       	ld	b,0x00
1483  0416  18 02       	jr	l_player_check_stairs_00116
1484  0418              l_player_check_stairs_00115:
1485  0418  06 01       	ld	b,0x01
1486  041A              l_player_check_stairs_00116:
1487  041A  79          	ld	a, c
1488  041B  B7          	or	a,a
1489  041C  20 03       	jr	NZ,l_player_check_stairs_00105
1490  041E  B0          	or	a,b
1491  041F  28 13       	jr	Z,l_player_check_stairs_00106
1492  0421              l_player_check_stairs_00105:
1493  0421  21 00 00    	ld	hl,_player_over_stair
1494  0424  7E          	ld	a, (hl)
1495  0425  B7          	or	a, a
1496  0426  20 1D       	jr	NZ,l_player_check_stairs_00109
1497  0428  36 01       	ld	(hl),0x01
1498  042A  21 72 00    	ld	hl,0x0072
1499  042D  E5          	push	hl
1500  042E  CD 49 04    	call	_player_tile
1501  0431  F1          	pop	af
1502  0432  18 11       	jr	l_player_check_stairs_00109
1503  0434              l_player_check_stairs_00106:
1504  0434  21 00 00    	ld	hl,_player_over_stair
1505  0437  7E          	ld	a, (hl)
1506  0438  B7          	or	a, a
1507  0439  28 0A       	jr	Z,l_player_check_stairs_00109
1508  043B  36 00       	ld	(hl),0x00
1509  043D  21 60 08    	ld	hl,0x0860
1510  0440  E5          	push	hl
1511  0441  CD 49 04    	call	_player_tile
1512  0444  F1          	pop	af
1513  0445              l_player_check_stairs_00109:
1514  0445  33          	inc	sp
1515  0446  DD E1       	pop	ix
1516  0448  C9          	ret
1517  0449              	SECTION code_compiler
1518  0449              ;	---------------------------------
1519  0449              ; Function player_tile
1520  0449              ; ---------------------------------
1521  0449              _player_tile:
1522  0449  CD 00 00    	call	___sdcc_enter_ix
1523  044C  DD 7E 05    	ld	a,(ix+5)
1524  044F  F5          	push	af
1525  0450  33          	inc	sp
1526  0451  2A FF FF    	ld	hl,(_sprite-1)
1527  0454  DD 6E 04    	ld	l,(ix+4)
1528  0457  E5          	push	hl
1529  0458  CD 00 00    	call	_spr_tile_dir
1530  045B  F1          	pop	af
1531  045C  33          	inc	sp
1532  045D  7D          	ld	a,l
1533  045E  32 07 00    	ld	((_tile + 0x0007)),a
1534  0461  DD E1       	pop	ix
1535  0463  C9          	ret
1536  0464              	SECTION code_compiler
1537  0464              ;	---------------------------------
1538  0464              ; Function player_move_input
1539  0464              ; ---------------------------------
1540  0464              _player_move_input:
1541  0464  CD 66 00    	call	_player_check_input
1542  0467  7D          	ld	a, l
1543  0468  B7          	or	a, a
1544  0469  CA CE 05    	jp	Z, l_player_move_input_00147
1545  046C  CD 1B 06    	call	_player_fire
1546  046F  7D          	ld	a, l
1547  0470  B7          	or	a, a
1548  0471  28 0A       	jr	Z,l_player_move_input_00102
1549  0473  21 00 00    	ld	hl,_dirs
1550  0476  36 00       	ld	(hl),0x00
1551  0478  2E 00       	ld	l,0x00
1552  047A  C3 F4 05    	jp	l_player_move_input_00149
1553  047D              l_player_move_input_00102:
1554  047D  21 00 00    	ld	hl,_dirs
1555  0480  CB 7E       	bit	7, (hl)
1556  0482  28 54       	jr	Z,l_player_move_input_00106
1557  0484  21 00 00    	ld	hl,_dirs
1558  0487  CB 46       	bit	0, (hl)
1559  0489  28 4D       	jr	Z,l_player_move_input_00106
1560  048B  21 00 00    	ld	hl,_player_vel_inc
1561  048E  36 01       	ld	(hl),0x01
1562  0490  CD 00 00    	call	_ay_is_playing
1563  0493  7D          	ld	a, l
1564  0494  D6 03       	sub	a,0x03
1565  0496  28 06       	jr	Z,l_player_move_input_00104
1566  0498  21 00 00    	ld	hl,_ay_effect_03
1567  049B  CD 00 00    	call	_ay_fx_play
1568  049E              l_player_move_input_00104:
1569  049E  21 00 00    	ld	hl,_player_over_stair
1570  04A1  36 00       	ld	(hl),0x00
1571  04A3  CD 00 00    	call	_sound_jump
1572  04A6  21 00 00    	ld	hl,_s_state
1573  04A9  7E          	ld	a,(hl)
1574  04AA  F6 01       	or	a,0x01
1575  04AC  E6 FD       	and	a,0xfd
1576  04AE  77          	ld	(hl),a
1577  04AF  3A 07 00    	ld	a,(_lin + 0x0007)
1578  04B2  32 07 00    	ld	((_jump_lin + 0x0007)),a
1579  04B5  3A 00 00    	ld	a,(_s_state)
1580  04B8  32 07 00    	ld	((_state + 0x0007)),a
1581  04BB  21 64 08    	ld	hl,0x0864
1582  04BE  E5          	push	hl
1583  04BF  CD 49 04    	call	_player_tile
1584  04C2  F1          	pop	af
1585  04C3  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
1586  04C6  36 02       	ld	(hl),0x02
1587  04C8  21 00 00    	ld	hl,_player_slide
1588  04CB  36 00       	ld	(hl),0x00
1589  04CD  3A 00 00    	ld	a,(_player_vel_y0)
1590  04D0  32 00 00    	ld	(_player_vel_y),a
1591  04D3  2E 01       	ld	l,0x01
1592  04D5  C3 F4 05    	jp	l_player_move_input_00149
1593  04D8              l_player_move_input_00106:
1594  04D8  21 00 00    	ld	hl,_dirs
1595  04DB  CB 5E       	bit	3, (hl)
1596  04DD  28 23       	jr	Z,l_player_move_input_00111
1597  04DF  CD F5 05    	call	_player_fix_walk_lin
1598  04E2  21 00 00    	ld	hl,_s_state
1599  04E5  7E          	ld	a,(hl)
1600  04E6  F6 04       	or	a,0x04
1601  04E8  E6 F7       	and	a,0xf7
1602  04EA  77          	ld	(hl),a
1603  04EB  01 07 00    	ld	bc,_state_a+7
1604  04EE  0A          	ld	a, (bc)
1605  04EF  F6 10       	or	a,0x10
1606  04F1  E6 F7       	and	a,0xf7
1607  04F3  02          	ld	(bc),a
1608  04F4  3A 00 00    	ld	a,(_player_over_stair)
1609  04F7  B7          	or	a, a
1610  04F8  28 05       	jr	Z,l_player_move_input_00109
1611  04FA  2E 00       	ld	l,0x00
1612  04FC  CD B7 03    	call	_player_check_stairs
1613  04FF              l_player_move_input_00109:
1614  04FF  CD 00 00    	call	_spr_move_horizontal
1615  0502              l_player_move_input_00111:
1616  0502  21 00 00    	ld	hl,_dirs
1617  0505  CB 56       	bit	2, (hl)
1618  0507  28 23       	jr	Z,l_player_move_input_00115
1619  0509  CD F5 05    	call	_player_fix_walk_lin
1620  050C  21 00 00    	ld	hl,_s_state
1621  050F  7E          	ld	a,(hl)
1622  0510  F6 08       	or	a,0x08
1623  0512  E6 FB       	and	a,0xfb
1624  0514  77          	ld	(hl),a
1625  0515  01 07 00    	ld	bc,_state_a+7
1626  0518  0A          	ld	a, (bc)
1627  0519  F6 08       	or	a,0x08
1628  051B  E6 EF       	and	a,0xef
1629  051D  02          	ld	(bc),a
1630  051E  3A 00 00    	ld	a,(_player_over_stair)
1631  0521  B7          	or	a, a
1632  0522  28 05       	jr	Z,l_player_move_input_00113
1633  0524  2E 00       	ld	l,0x00
1634  0526  CD B7 03    	call	_player_check_stairs
1635  0529              l_player_move_input_00113:
1636  0529  CD 00 00    	call	_spr_move_horizontal
1637  052C              l_player_move_input_00115:
1638  052C  21 00 00    	ld	hl,_dirs
1639  052F  CB 46       	bit	0, (hl)
1640  0531  28 37       	jr	Z,l_player_move_input_00127
1641  0533  2E 00       	ld	l,0x00
1642  0535  CD B7 03    	call	_player_check_stairs
1643  0538  3A 00 00    	ld	a,(_player_over_stair)
1644  053B  B7          	or	a, a
1645  053C  20 05       	jr	NZ,l_player_move_input_00117
1646  053E  2E 01       	ld	l,0x01
1647  0540  CD B7 03    	call	_player_check_stairs
1648  0543              l_player_move_input_00117:
1649  0543  3A 00 00    	ld	a,(_player_over_stair)
1650  0546  B7          	or	a, a
1651  0547  28 0E       	jr	Z,l_player_move_input_00124
1652  0549  CD 00 00    	call	_spr_move_up
1653  054C  7D          	ld	a, l
1654  054D  B7          	or	a, a
1655  054E  28 1A       	jr	Z,l_player_move_input_00127
1656  0550  21 00 00    	ld	hl,_player_over_stair
1657  0553  36 00       	ld	(hl),0x00
1658  0555  18 13       	jr	l_player_move_input_00127
1659  0557              l_player_move_input_00124:
1660  0557  21 00 00    	ld	hl,_dirs
1661  055A  CB 5E       	bit	3, (hl)
1662  055C  20 0C       	jr	NZ,l_player_move_input_00127
1663  055E  21 00 00    	ld	hl,_dirs
1664  0561  CB 56       	bit	2, (hl)
1665  0563  20 05       	jr	NZ,l_player_move_input_00127
1666  0565  2E 00       	ld	l,0x00
1667  0567  C3 F4 05    	jp	l_player_move_input_00149
1668  056A              l_player_move_input_00127:
1669  056A  21 00 00    	ld	hl,_dirs
1670  056D  CB 4E       	bit	1, (hl)
1671  056F  28 3B       	jr	Z,l_player_move_input_00139
1672  0571  AF          	xor	a, a
1673  0572  F5          	push	af
1674  0573  33          	inc	sp
1675  0574  CD 75 03    	call	_player_check_stairs_down
1676  0577  33          	inc	sp
1677  0578  3A 00 00    	ld	a,(_player_over_stair)
1678  057B  B7          	or	a, a
1679  057C  20 08       	jr	NZ,l_player_move_input_00129
1680  057E  3E 01       	ld	a,0x01
1681  0580  F5          	push	af
1682  0581  33          	inc	sp
1683  0582  CD 75 03    	call	_player_check_stairs_down
1684  0585  33          	inc	sp
1685  0586              l_player_move_input_00129:
1686  0586  3A 00 00    	ld	a,(_player_over_stair)
1687  0589  B7          	or	a, a
1688  058A  28 0E       	jr	Z,l_player_move_input_00136
1689  058C  CD 00 00    	call	_spr_move_down
1690  058F  7D          	ld	a, l
1691  0590  B7          	or	a, a
1692  0591  28 19       	jr	Z,l_player_move_input_00139
1693  0593  21 00 00    	ld	hl,_player_over_stair
1694  0596  36 00       	ld	(hl),0x00
1695  0598  18 12       	jr	l_player_move_input_00139
1696  059A              l_player_move_input_00136:
1697  059A  21 00 00    	ld	hl,_dirs
1698  059D  CB 5E       	bit	3, (hl)
1699  059F  20 0B       	jr	NZ,l_player_move_input_00139
1700  05A1  21 00 00    	ld	hl,_dirs
1701  05A4  CB 56       	bit	2, (hl)
1702  05A6  20 04       	jr	NZ,l_player_move_input_00139
1703  05A8  2E 00       	ld	l,0x00
1704  05AA  18 48       	jr	l_player_move_input_00149
1705  05AC              l_player_move_input_00139:
1706  05AC  3A 00 00    	ld	a,(_s_state)
1707  05AF  32 07 00    	ld	((_state + 0x0007)),a
1708  05B2  3A 00 00    	ld	a,(_player_over_stair)
1709  05B5  B7          	or	a, a
1710  05B6  28 0A       	jr	Z,l_player_move_input_00141
1711  05B8  21 72 00    	ld	hl,0x0072
1712  05BB  E5          	push	hl
1713  05BC  CD 49 04    	call	_player_tile
1714  05BF  F1          	pop	af
1715  05C0  18 08       	jr	l_player_move_input_00142
1716  05C2              l_player_move_input_00141:
1717  05C2  21 60 08    	ld	hl,0x0860
1718  05C5  E5          	push	hl
1719  05C6  CD 49 04    	call	_player_tile
1720  05C9  F1          	pop	af
1721  05CA              l_player_move_input_00142:
1722  05CA  2E 01       	ld	l,0x01
1723  05CC  18 26       	jr	l_player_move_input_00149
1724  05CE              l_player_move_input_00147:
1725  05CE  21 07 00    	ld	hl, +(_colint + 0x0007)
1726  05D1  36 00       	ld	(hl),0x00
1727  05D3  3A 00 00    	ld	a,(_player_over_stair)
1728  05D6  B7          	or	a, a
1729  05D7  28 0A       	jr	Z,l_player_move_input_00144
1730  05D9  21 72 00    	ld	hl,0x0072
1731  05DC  E5          	push	hl
1732  05DD  CD 49 04    	call	_player_tile
1733  05E0  F1          	pop	af
1734  05E1  18 08       	jr	l_player_move_input_00145
1735  05E3              l_player_move_input_00144:
1736  05E3  21 70 01    	ld	hl,0x0170
1737  05E6  E5          	push	hl
1738  05E7  CD 49 04    	call	_player_tile
1739  05EA  F1          	pop	af
1740  05EB              l_player_move_input_00145:
1741  05EB  21 00 00    	ld	hl,_s_state
1742  05EE  7E          	ld	a,(hl)
1743  05EF  E6 F3       	and	a,+(0xf7&0xfb)
1744  05F1  77          	ld	(hl),a
1745  05F2  2E 00       	ld	l,0x00
1746  05F4              l_player_move_input_00149:
1747  05F4  C9          	ret
1748  05F5              	SECTION code_compiler
1749  05F5              ;	---------------------------------
1750  05F5              ; Function player_fix_walk_lin
1751  05F5              ; ---------------------------------
1752  05F5              _player_fix_walk_lin:
1753  05F5  3A 00 00    	ld	a,(_player_over_stair)
1754  05F8  B7          	or	a, a
1755  05F9  C0          	ret	NZ
1756  05FA  3A 00 00    	ld	a,(_s_lin0)
1757  05FD  07          	rlca
1758  05FE  07          	rlca
1759  05FF  07          	rlca
1760  0600  07          	rlca
1761  0601  E6 0F       	and	a,0x0f
1762  0603  07          	rlca
1763  0604  07          	rlca
1764  0605  07          	rlca
1765  0606  07          	rlca
1766  0607  E6 F0       	and	a,0xf0
1767  0609  32 00 00    	ld	(_s_lin1),a
1768  060C  3A 00 00    	ld	a,(_s_lin0)
1769  060F  21 00 00    	ld	hl,_s_lin1
1770  0612  96          	sub	a, (hl)
1771  0613  C8          	ret	Z
1772  0614  3A 00 00    	ld	a,(_s_lin1)
1773  0617  32 07 00    	ld	((_lin + 0x0007)),a
1774  061A  C9          	ret
1775  061B              	SECTION code_compiler
1776  061B              ;	---------------------------------
1777  061B              ; Function player_fire
1778  061B              ; ---------------------------------
1779  061B              _player_fire:
1780  061B  21 00 00    	ld	hl,_dirs
1781  061E  CB 7E       	bit	7, (hl)
1782  0620  28 3F       	jr	Z,l_player_fire_00110
1783  0622  21 00 00    	ld	hl,_dirs
1784  0625  CB 46       	bit	0, (hl)
1785  0627  20 38       	jr	NZ,l_player_fire_00110
1786  0629  21 00 00    	ld	hl,_player_mana
1787  062C  7E          	ld	a, (hl)
1788  062D  B7          	or	a, a
1789  062E  28 2D       	jr	Z,l_player_fire_00107
1790  0630  3A 07 00    	ld	a,(_bullet_col + 0x0007)
1791  0633  3C          	inc	a
1792  0634  20 27       	jr	NZ,l_player_fire_00107
1793  0636  3E 05       	ld	a,0x05
1794  0638  96          	sub	a, (hl)
1795  0639  30 12       	jr	NC,l_player_fire_00104
1796  063B  CD 00 00    	call	_sound_hit_enemy
1797  063E  3A 00 00    	ld	a,(_game_god_mode)
1798  0641  B7          	or	a, a
1799  0642  20 0E       	jr	NZ,l_player_fire_00105
1800  0644  21 00 00    	ld	hl,_player_mana
1801  0647  7E          	ld	a, (hl)
1802  0648  C6 FB       	add	a,0xfb
1803  064A  77          	ld	(hl), a
1804  064B  18 05       	jr	l_player_fire_00105
1805  064D              l_player_fire_00104:
1806  064D  21 00 00    	ld	hl,_player_mana
1807  0650  36 00       	ld	(hl),0x00
1808  0652              l_player_fire_00105:
1809  0652  CD 00 00    	call	_game_update_stats
1810  0655  21 07 78    	ld	hl,0x7807
1811  0658  E5          	push	hl
1812  0659  CD 00 00    	call	_game_shoot_fire
1813  065C  F1          	pop	af
1814  065D              l_player_fire_00107:
1815  065D  2E 01       	ld	l,0x01
1816  065F  18 02       	jr	l_player_fire_00112
1817  0661              l_player_fire_00110:
1818  0661  2E 00       	ld	l,0x00
1819  0663              l_player_fire_00112:
1820  0663  C9          	ret
1821  0664              	SECTION code_compiler
1822  0664              ;	---------------------------------
1823  0664              ; Function player_check_map
1824  0664              ; ---------------------------------
1825  0664              _player_check_map:
1826  0664  21 07 00    	ld	hl,+(_col + 0x0007)
1827  0667  46          	ld	b, (hl)
1828  0668  21 07 00    	ld	hl,+(_lin + 0x0007)
1829  066B  4E          	ld	c, (hl)
1830  066C  C5          	push	bc
1831  066D  CD 00 00    	call	_spr_calc_index
1832  0670  F1          	pop	af
1833  0671  7D          	ld	a,l
1834  0672  32 00 00    	ld	(_sprite_curr_index),a
1835  0675  21 07 00    	ld	hl,+(_col + 0x0007)
1836  0678  4E          	ld	c, (hl)
1837  0679  3A 07 00    	ld	a,(_lin + 0x0007)
1838  067C  E6 0F       	and	a,0x0f
1839  067E  CB 41       	bit	0, c
1840  0680  20 17       	jr	NZ,l_player_check_map_00108
1841  0682  B7          	or	a, a
1842  0683  20 05       	jr	NZ,l_player_check_map_00102
1843  0685  CD C4 06    	call	_player_pick_item
1844  0688  18 39       	jr	l_player_check_map_00110
1845  068A              l_player_check_map_00102:
1846  068A  CD C4 06    	call	_player_pick_item
1847  068D  21 00 00    	ld	hl,_sprite_curr_index
1848  0690  7E          	ld	a, (hl)
1849  0691  C6 10       	add	a,0x10
1850  0693  77          	ld	(hl), a
1851  0694  CD C4 06    	call	_player_pick_item
1852  0697  18 2A       	jr	l_player_check_map_00110
1853  0699              l_player_check_map_00108:
1854  0699  B7          	or	a, a
1855  069A  20 0C       	jr	NZ,l_player_check_map_00105
1856  069C  CD C4 06    	call	_player_pick_item
1857  069F  21 00 00    	ld	hl,_sprite_curr_index
1858  06A2  34          	inc	(hl)
1859  06A3  CD C4 06    	call	_player_pick_item
1860  06A6  18 1B       	jr	l_player_check_map_00110
1861  06A8              l_player_check_map_00105:
1862  06A8  CD C4 06    	call	_player_pick_item
1863  06AB  21 00 00    	ld	hl,_sprite_curr_index
1864  06AE  34          	inc	(hl)
1865  06AF  CD C4 06    	call	_player_pick_item
1866  06B2  21 00 00    	ld	hl,_sprite_curr_index
1867  06B5  7E          	ld	a, (hl)
1868  06B6  C6 0F       	add	a,0x0f
1869  06B8  77          	ld	(hl), a
1870  06B9  CD C4 06    	call	_player_pick_item
1871  06BC  21 00 00    	ld	hl,_sprite_curr_index
1872  06BF  34          	inc	(hl)
1873  06C0  CD C4 06    	call	_player_pick_item
1874  06C3              l_player_check_map_00110:
1875  06C3  C9          	ret
1876  06C4              	SECTION code_compiler
1877  06C4              ;	---------------------------------
1878  06C4              ; Function player_pick_item
1879  06C4              ; ---------------------------------
1880  06C4              _player_pick_item:
1881  06C4  CD 00 00    	call	___sdcc_enter_ix
1882  06C7  3B          	dec	sp
1883  06C8  2A 00 00    	ld	hl,(_sprite_curr_index)
1884  06CB  26 00       	ld	h,0x00
1885  06CD  01 00 00    	ld	bc,_scr_map
1886  06D0  09          	add	hl,bc
1887  06D1  7E          	ld	a,(hl)
1888  06D2  DD 77 FF    	ld	(ix-1),a
1889  06D5  D6 24       	sub	a,0x24
1890  06D7  DA 53 08    	jp	C, l_player_pick_item_00131
1891  06DA  3E 2F       	ld	a,0x2f
1892  06DC  DD 96 FF    	sub	a,(ix-1)
1893  06DF  DA 53 08    	jp	C, l_player_pick_item_00131
1894  06E2  CD 00 00    	call	_ay_reset
1895  06E5  21 00 00    	ld	hl,_ay_effect_10
1896  06E8  CD 00 00    	call	_ay_fx_play
1897  06EB  CD 00 00    	call	_sound_coin
1898  06EE  2A 00 00    	ld	hl,(_sprite_curr_index)
1899  06F1  26 00       	ld	h,0x00
1900  06F3  01 00 00    	ld	bc,_scr_map
1901  06F6  09          	add	hl,bc
1902  06F7  3A 00 00    	ld	a,(_sprite_curr_index)
1903  06FA  5F          	ld	e,a
1904  06FB  16 00       	ld	d,0x00
1905  06FD  E5          	push	hl
1906  06FE  D5          	push	de
1907  06FF  CD 00 00    	call	_game_match_back
1908  0702  F1          	pop	af
1909  0703  C1          	pop	bc
1910  0704  7D          	ld	a,l
1911  0705  02          	ld	(bc), a
1912  0706  3A 00 00    	ld	a,(_sprite_curr_index)
1913  0709  4F          	ld	c,a
1914  070A  06 00       	ld	b,0x00
1915  070C  C5          	push	bc
1916  070D  CD 00 00    	call	_game_obj_set
1917  0710  F1          	pop	af
1918  0711  3A 00 00    	ld	a,(_sprite_curr_index)
1919  0714  07          	rlca
1920  0715  07          	rlca
1921  0716  07          	rlca
1922  0717  07          	rlca
1923  0718  E6 0F       	and	a,0x0f
1924  071A  07          	rlca
1925  071B  07          	rlca
1926  071C  07          	rlca
1927  071D  07          	rlca
1928  071E  E6 F0       	and	a,0xf0
1929  0720  32 00 00    	ld	(_s_lin1),a
1930  0723  3A 00 00    	ld	a,(_sprite_curr_index)
1931  0726  E6 0F       	and	a,0x0f
1932  0728  87          	add	a, a
1933  0729  32 00 00    	ld	(_s_col1),a
1934  072C  21 00 00    	ld	hl,0x0000
1935  072F  E5          	push	hl
1936  0730  21 84 03    	ld	hl,0x0384
1937  0733  E5          	push	hl
1938  0734  F5          	push	af
1939  0735  33          	inc	sp
1940  0736  3A 00 00    	ld	a,(_s_lin1)
1941  0739  F5          	push	af
1942  073A  33          	inc	sp
1943  073B  CD 00 00    	call	_spr_add_anim
1944  073E  F1          	pop	af
1945  073F  F1          	pop	af
1946  0740  F1          	pop	af
1947  0741  DD 7E FF    	ld	a,(ix-1)
1948  0744  D6 24       	sub	a,0x24
1949  0746  DA 53 08    	jp	C, l_player_pick_item_00131
1950  0749  3E 2F       	ld	a,0x2f
1951  074B  DD 96 FF    	sub	a,(ix-1)
1952  074E  DA 53 08    	jp	C, l_player_pick_item_00131
1953  0751  DD 7E FF    	ld	a,(ix-1)
1954  0754  C6 DC       	add	a,0xdc
1955  0756  4F          	ld	c, a
1956  0757  06 00       	ld	b,0x00
1957  0759  21 60 07    	ld	hl,l_player_pick_item_00177
1958  075C  09          	add	hl, bc
1959  075D  09          	add	hl, bc
1960  075E  09          	add	hl, bc
1961  075F  E9          	jp	(hl)
1962  0760              l_player_pick_item_00177:
1963  0760  C3 84 07    	jp	l_player_pick_item_00101
1964  0763  C3 8F 07    	jp	l_player_pick_item_00102
1965  0766  C3 9A 07    	jp	l_player_pick_item_00103
1966  0769  C3 A5 07    	jp	l_player_pick_item_00104
1967  076C  C3 B0 07    	jp	l_player_pick_item_00105
1968  076F  C3 D7 07    	jp	l_player_pick_item_00109
1969  0772  C3 EC 07    	jp	l_player_pick_item_00112
1970  0775  C3 01 08    	jp	l_player_pick_item_00115
1971  0778  C3 16 08    	jp	l_player_pick_item_00118
1972  077B  C3 2B 08    	jp	l_player_pick_item_00121
1973  077E  C3 40 08    	jp	l_player_pick_item_00124
1974  0781  C3 CE 07    	jp	l_player_pick_item_00108
1975  0784              l_player_pick_item_00101:
1976  0784  21 00 00    	ld	hl,_player_keys
1977  0787  36 01       	ld	(hl),0x01
1978  0789  CD 00 00    	call	_game_update_stats
1979  078C  C3 53 08    	jp	l_player_pick_item_00131
1980  078F              l_player_pick_item_00102:
1981  078F  21 01 00    	ld	hl, +(_player_keys + 0x0001)
1982  0792  36 01       	ld	(hl),0x01
1983  0794  CD 00 00    	call	_game_update_stats
1984  0797  C3 53 08    	jp	l_player_pick_item_00131
1985  079A              l_player_pick_item_00103:
1986  079A  21 02 00    	ld	hl, +(_player_keys + 0x0002)
1987  079D  36 01       	ld	(hl),0x01
1988  079F  CD 00 00    	call	_game_update_stats
1989  07A2  C3 53 08    	jp	l_player_pick_item_00131
1990  07A5              l_player_pick_item_00104:
1991  07A5  21 03 00    	ld	hl, +(_player_keys + 0x0003)
1992  07A8  36 01       	ld	(hl),0x01
1993  07AA  CD 00 00    	call	_game_update_stats
1994  07AD  C3 53 08    	jp	l_player_pick_item_00131
1995  07B0              l_player_pick_item_00105:
1996  07B0  21 01 00    	ld	hl,0x0001
1997  07B3  CD 23 0B    	call	_player_score_add
1998  07B6  21 00 00    	ld	hl,_player_coins
1999  07B9  7E          	ld	a,(hl)
2000  07BA  3C          	inc	a
2001  07BB  77          	ld	(hl),a
2002  07BC  D6 64       	sub	a,0x64
2003  07BE  20 08       	jr	NZ,l_player_pick_item_00107
2004  07C0  CD 2C 02    	call	_player_1up
2005  07C3  21 00 00    	ld	hl,_player_coins
2006  07C6  36 00       	ld	(hl),0x00
2007  07C8              l_player_pick_item_00107:
2008  07C8  CD 00 00    	call	_game_update_stats
2009  07CB  C3 53 08    	jp	l_player_pick_item_00131
2010  07CE              l_player_pick_item_00108:
2011  07CE  21 0A 00    	ld	hl,0x000a
2012  07D1  CD 23 0B    	call	_player_score_add
2013  07D4  C3 53 08    	jp	l_player_pick_item_00131
2014  07D7              l_player_pick_item_00109:
2015  07D7  21 00 00    	ld	hl,_player_str
2016  07DA  34          	inc	(hl)
2017  07DB  21 00 00    	ld	hl,_player_max_vita
2018  07DE  7E          	ld	a, (hl)
2019  07DF  D6 C8       	sub	a,0xc8
2020  07E1  30 70       	jr	NC,l_player_pick_item_00131
2021  07E3  7E          	ld	a, (hl)
2022  07E4  C6 0A       	add	a,0x0a
2023  07E6  77          	ld	(hl), a
2024  07E7  CD 00 00    	call	_game_update_stats
2025  07EA  18 67       	jr	l_player_pick_item_00131
2026  07EC              l_player_pick_item_00112:
2027  07EC  21 00 00    	ld	hl,_player_str
2028  07EF  34          	inc	(hl)
2029  07F0  21 00 00    	ld	hl,_player_max_vita
2030  07F3  7E          	ld	a, (hl)
2031  07F4  D6 C8       	sub	a,0xc8
2032  07F6  30 5B       	jr	NC,l_player_pick_item_00131
2033  07F8  7E          	ld	a, (hl)
2034  07F9  C6 0A       	add	a,0x0a
2035  07FB  77          	ld	(hl), a
2036  07FC  CD 00 00    	call	_game_update_stats
2037  07FF  18 52       	jr	l_player_pick_item_00131
2038  0801              l_player_pick_item_00115:
2039  0801  21 00 00    	ld	hl,_player_str
2040  0804  34          	inc	(hl)
2041  0805  21 00 00    	ld	hl,_player_max_vita
2042  0808  7E          	ld	a, (hl)
2043  0809  D6 C8       	sub	a,0xc8
2044  080B  30 46       	jr	NC,l_player_pick_item_00131
2045  080D  7E          	ld	a, (hl)
2046  080E  C6 0A       	add	a,0x0a
2047  0810  77          	ld	(hl), a
2048  0811  CD 00 00    	call	_game_update_stats
2049  0814  18 3D       	jr	l_player_pick_item_00131
2050  0816              l_player_pick_item_00118:
2051  0816  21 00 00    	ld	hl,_player_int
2052  0819  34          	inc	(hl)
2053  081A  21 00 00    	ld	hl,_player_max_mana
2054  081D  7E          	ld	a, (hl)
2055  081E  D6 C8       	sub	a,0xc8
2056  0820  30 31       	jr	NC,l_player_pick_item_00131
2057  0822  7E          	ld	a, (hl)
2058  0823  C6 0A       	add	a,0x0a
2059  0825  77          	ld	(hl), a
2060  0826  CD 00 00    	call	_game_update_stats
2061  0829  18 28       	jr	l_player_pick_item_00131
2062  082B              l_player_pick_item_00121:
2063  082B  21 00 00    	ld	hl,_player_int
2064  082E  34          	inc	(hl)
2065  082F  21 00 00    	ld	hl,_player_max_mana
2066  0832  7E          	ld	a, (hl)
2067  0833  D6 C8       	sub	a,0xc8
2068  0835  30 1C       	jr	NC,l_player_pick_item_00131
2069  0837  7E          	ld	a, (hl)
2070  0838  C6 0A       	add	a,0x0a
2071  083A  77          	ld	(hl), a
2072  083B  CD 00 00    	call	_game_update_stats
2073  083E  18 13       	jr	l_player_pick_item_00131
2074  0840              l_player_pick_item_00124:
2075  0840  21 00 00    	ld	hl,_player_int
2076  0843  34          	inc	(hl)
2077  0844  21 00 00    	ld	hl,_player_max_mana
2078  0847  7E          	ld	a, (hl)
2079  0848  D6 C8       	sub	a,0xc8
2080  084A  30 07       	jr	NC,l_player_pick_item_00131
2081  084C  7E          	ld	a, (hl)
2082  084D  C6 0A       	add	a,0x0a
2083  084F  77          	ld	(hl), a
2084  0850  CD 00 00    	call	_game_update_stats
2085  0853              l_player_pick_item_00131:
2086  0853  33          	inc	sp
2087  0854  DD E1       	pop	ix
2088  0856  C9          	ret
2089  0857              	SECTION code_compiler
2090  0857              ;	---------------------------------
2091  0857              ; Function player_hit_platform
2092  0857              ; ---------------------------------
2093  0857              _player_hit_platform:
2094  0857  CD 00 00    	call	___sdcc_enter_ix
2095  085A  F5          	push	af
2096  085B  3A 00 00    	ld	a,(_player_hit_lin)
2097  085E  B7          	or	a, a
2098  085F  C2 EE 0A    	jp	NZ, l_player_hit_platform_00144
2099  0862  21 07 00    	ld	hl,+(_lin + 0x0007)
2100  0865  4E          	ld	c, (hl)
2101  0866  3E 10       	ld	a,0x10
2102  0868  91          	sub	a, c
2103  0869  D2 EE 0A    	jp	NC, l_player_hit_platform_00144
2104  086C  01 00 00    	ld	bc,_scr_map
2105  086F  2A 00 00    	ld	hl,(_index1)
2106  0872  09          	add	hl,bc
2107  0873  7E          	ld	a,(hl)
2108  0874  D6 45       	sub	a,0x45
2109  0876  DA EE 0A    	jp	C, l_player_hit_platform_00144
2110  0879  2A 00 00    	ld	hl,(_curr_time)
2111  087C  22 0E 00    	ld	(_spr_timer + 0x000e),hl
2112  087F  2A 07 00    	ld	hl,(_lin + 0x0007)
2113  0882  26 00       	ld	h,0x00
2114  0884  01 F8 FF    	ld	bc,0xfff8
2115  0887  09          	add	hl,bc
2116  0888  EB          	ex	de,hl
2117  0889  06 04       	ld	b,0x04
2118  088B              l_player_hit_platform_00249:
2119  088B  CB 2A       	sra	d
2120  088D  CB 1B       	rr	e
2121  088F  10 FA       	djnz	l_player_hit_platform_00249
2122  0891  7B          	ld	a, e
2123  0892  07          	rlca
2124  0893  07          	rlca
2125  0894  07          	rlca
2126  0895  07          	rlca
2127  0896  E6 F0       	and	a,0xf0
2128  0898  C6 08       	add	a,0x08
2129  089A  32 00 00    	ld	(_player_hit_lin),a
2130  089D  21 07 00    	ld	hl,+(_col + 0x0007)
2131  08A0  4E          	ld	c, (hl)
2132  08A1  CB 41       	bit	0, c
2133  08A3  20 06       	jr	NZ,l_player_hit_platform_00111
2134  08A5  21 00 00    	ld	hl,_player_hit_col
2135  08A8  71          	ld	(hl), c
2136  08A9  18 2D       	jr	l_player_hit_platform_00112
2137  08AB              l_player_hit_platform_00111:
2138  08AB  21 07 00    	ld	hl,+(_state + 0x0007)
2139  08AE  5E          	ld	e, (hl)
2140  08AF  41          	ld	b, c
2141  08B0  04          	inc	b
2142  08B1  0D          	dec	c
2143  08B2  CB 5B       	bit	3, e
2144  08B4  28 12       	jr	Z,l_player_hit_platform_00108
2145  08B6  3A 00 00    	ld	a,(_g_player_hit_right)
2146  08B9  B7          	or	a, a
2147  08BA  28 06       	jr	Z,l_player_hit_platform_00102
2148  08BC  21 00 00    	ld	hl,_player_hit_col
2149  08BF  70          	ld	(hl), b
2150  08C0  18 16       	jr	l_player_hit_platform_00112
2151  08C2              l_player_hit_platform_00102:
2152  08C2  21 00 00    	ld	hl,_player_hit_col
2153  08C5  71          	ld	(hl), c
2154  08C6  18 10       	jr	l_player_hit_platform_00112
2155  08C8              l_player_hit_platform_00108:
2156  08C8  3A 00 00    	ld	a,(_g_player_hit_left)
2157  08CB  B7          	or	a, a
2158  08CC  28 06       	jr	Z,l_player_hit_platform_00105
2159  08CE  21 00 00    	ld	hl,_player_hit_col
2160  08D1  71          	ld	(hl), c
2161  08D2  18 04       	jr	l_player_hit_platform_00112
2162  08D4              l_player_hit_platform_00105:
2163  08D4  21 00 00    	ld	hl,_player_hit_col
2164  08D7  70          	ld	(hl), b
2165  08D8              l_player_hit_platform_00112:
2166  08D8  2A 00 00    	ld	hl,(_index1)
2167  08DB  01 00 00    	ld	bc,_scr_map
2168  08DE  09          	add	hl,bc
2169  08DF  7E          	ld	a,(hl)
2170  08E0  FE 4D       	cp	a,0x4d
2171  08E2  20 45       	jr	NZ,l_player_hit_platform_00114
2172  08E4  E5          	push	hl
2173  08E5  2A 00 00    	ld	hl,(_index1)
2174  08E8  E5          	push	hl
2175  08E9  CD 00 00    	call	_game_match_back
2176  08EC  F1          	pop	af
2177  08ED  C1          	pop	bc
2178  08EE  7D          	ld	a,l
2179  08EF  02          	ld	(bc), a
2180  08F0  2A 00 00    	ld	hl,(_index1)
2181  08F3  E5          	push	hl
2182  08F4  CD 00 00    	call	_game_obj_set
2183  08F7  F1          	pop	af
2184  08F8  21 00 00    	ld	hl,_index1
2185  08FB  7E          	ld	a, (hl)
2186  08FC  E6 0F       	and	a,0x0f
2187  08FE  87          	add	a, a
2188  08FF  4F          	ld	c, a
2189  0900  23          	inc	hl
2190  0901  56          	ld	d,(hl)
2191  0902  2B          	dec	hl
2192  0903  7E          	ld	a, (hl)
2193  0904  06 04       	ld	b,0x04
2194  0906              l_player_hit_platform_00255:
2195  0906  CB 3A       	srl	d
2196  0908  1F          	rra
2197  0909  10 FB       	djnz	l_player_hit_platform_00255
2198  090B  07          	rlca
2199  090C  07          	rlca
2200  090D  07          	rlca
2201  090E  07          	rlca
2202  090F  E6 F0       	and	a,0xf0
2203  0911  47          	ld	b, a
2204  0912  21 00 00    	ld	hl,0x0000
2205  0915  E5          	push	hl
2206  0916  21 87 03    	ld	hl,0x0387
2207  0919  E5          	push	hl
2208  091A  79          	ld	a, c
2209  091B  48          	ld	c,b
2210  091C  47          	ld	b,a
2211  091D  C5          	push	bc
2212  091E  CD 00 00    	call	_spr_add_anim
2213  0921  F1          	pop	af
2214  0922  F1          	pop	af
2215  0923  F1          	pop	af
2216  0924  2E 01       	ld	l,0x01
2217  0926  C3 F0 0A    	jp	l_player_hit_platform_00147
2218  0929              l_player_hit_platform_00114:
2219  0929  FE 5C       	cp	a,0x5c
2220  092B  28 05       	jr	Z,l_player_hit_platform_00140
2221  092D  D6 5D       	sub	a,0x5d
2222  092F  C2 E2 0A    	jp	NZ,l_player_hit_platform_00141
2223  0932              l_player_hit_platform_00140:
2224  0932  21 00 00    	ld	hl,_tmp0
2225  0935  36 00       	ld	(hl),0x00
2226  0937  3A 00 00    	ld	a,(_game_boss)
2227  093A  B7          	or	a, a
2228  093B  28 0B       	jr	Z,l_player_hit_platform_00173
2229  093D  3A 00 00    	ld	a,(_game_mush_count)
2230  0940  B7          	or	a, a
2231  0941  28 05       	jr	Z,l_player_hit_platform_00173
2232  0943  2E 00       	ld	l,0x00
2233  0945  C3 F0 0A    	jp	l_player_hit_platform_00147
2234  0948              l_player_hit_platform_00173:
2235  0948              l_player_hit_platform_00137:
2236  0948  21 00 00    	ld	hl,_tmp0
2237  094B  7E          	ld	a, (hl)
2238  094C  D6 07       	sub	a,0x07
2239  094E  D2 E2 0A    	jp	NC, l_player_hit_platform_00141
2240  0951  4E          	ld	c,(hl)
2241  0952  06 00       	ld	b,0x00
2242  0954  21 00 00    	ld	hl,_mush_index
2243  0957  09          	add	hl,bc
2244  0958  4E          	ld	c, (hl)
2245  0959  06 00       	ld	b,0x00
2246  095B  2A 00 00    	ld	hl,(_index1)
2247  095E  AF          	xor	a,a
2248  095F  ED 42       	sbc	hl,bc
2249  0961  C2 DB 0A    	jp	NZ,l_player_hit_platform_00136
2250  0964  3A 07 00    	ld	a,(_lin + 0x0007)
2251  0967  07          	rlca
2252  0968  07          	rlca
2253  0969  07          	rlca
2254  096A  07          	rlca
2255  096B  E6 0F       	and	a,0x0f
2256  096D  07          	rlca
2257  096E  07          	rlca
2258  096F  07          	rlca
2259  0970  07          	rlca
2260  0971  E6 F0       	and	a,0xf0
2261  0973  C6 E0       	add	a,0xe0
2262  0975  32 00 00    	ld	(_s_lin1),a
2263  0978  3A 07 00    	ld	a,(_col + 0x0007)
2264  097B  CB 3F       	srl	a
2265  097D  87          	add	a, a
2266  097E  32 00 00    	ld	(_s_col1),a
2267  0981  21 00 00    	ld	hl,_tmp
2268  0984  36 00       	ld	(hl),0x00
2269  0986              l_player_hit_platform_00120:
2270  0986  21 00 00    	ld	hl,_tmp
2271  0989  7E          	ld	a, (hl)
2272  098A  D6 07       	sub	a,0x07
2273  098C  30 1C       	jr	NC,l_player_hit_platform_00122
2274  098E  4E          	ld	c,(hl)
2275  098F  06 00       	ld	b,0x00
2276  0991  21 00 00    	ld	hl,_mush_index
2277  0994  09          	add	hl,bc
2278  0995  4E          	ld	c, (hl)
2279  0996  06 00       	ld	b,0x00
2280  0998  21 00 00    	ld	hl,_index1
2281  099B  7E          	ld	a, (hl)
2282  099C  91          	sub	a, c
2283  099D  20 05       	jr	NZ,l_player_hit_platform_00261
2284  099F  23          	inc	hl
2285  09A0  7E          	ld	a, (hl)
2286  09A1  90          	sub	a, b
2287  09A2  28 06       	jr	Z,l_player_hit_platform_00122
2288  09A4              l_player_hit_platform_00261:
2289  09A4  21 00 00    	ld	hl,_tmp
2290  09A7  34          	inc	(hl)
2291  09A8  18 DC       	jr	l_player_hit_platform_00120
2292  09AA              l_player_hit_platform_00122:
2293  09AA  2A 00 00    	ld	hl,(_tmp)
2294  09AD  26 00       	ld	h,0x00
2295  09AF  01 00 00    	ld	bc,_mush_class
2296  09B2  09          	add	hl,bc
2297  09B3  7E          	ld	a,(hl)
2298  09B4  FE 78       	cp	a,0x78
2299  09B6  28 18       	jr	Z,l_player_hit_platform_00123
2300  09B8  FE 79       	cp	a,0x79
2301  09BA  28 2F       	jr	Z,l_player_hit_platform_00124
2302  09BC  FE 7A       	cp	a,0x7a
2303  09BE  28 5F       	jr	Z,l_player_hit_platform_00126
2304  09C0  FE 7B       	cp	a,0x7b
2305  09C2  28 41       	jr	Z,l_player_hit_platform_00125
2306  09C4  FE 7C       	cp	a,0x7c
2307  09C6  CA 53 0A    	jp	Z,l_player_hit_platform_00128
2308  09C9  D6 7D       	sub	a,0x7d
2309  09CB  28 6C       	jr	Z,l_player_hit_platform_00127
2310  09CD  C3 6B 0A    	jp	l_player_hit_platform_00129
2311  09D0              l_player_hit_platform_00123:
2312  09D0  2E 02       	ld	l,0x02
2313  09D2  CD 00 00    	call	_zx_border_fastcall
2314  09D5  3A 00 00    	ld	a,(_s_col1)
2315  09D8  21 06 FF    	ld	hl,0xff06
2316  09DB  E5          	push	hl
2317  09DC  F5          	push	af
2318  09DD  33          	inc	sp
2319  09DE  3A 00 00    	ld	a,(_s_lin1)
2320  09E1  F5          	push	af
2321  09E2  33          	inc	sp
2322  09E3  CD 00 00    	call	_enemy_init
2323  09E6  F1          	pop	af
2324  09E7  F1          	pop	af
2325  09E8  C3 6B 0A    	jp	l_player_hit_platform_00129
2326  09EB              l_player_hit_platform_00124:
2327  09EB  2E 02       	ld	l,0x02
2328  09ED  CD 00 00    	call	_zx_border_fastcall
2329  09F0  3A 00 00    	ld	a,(_s_col1)
2330  09F3  21 06 01    	ld	hl,0x0106
2331  09F6  E5          	push	hl
2332  09F7  F5          	push	af
2333  09F8  33          	inc	sp
2334  09F9  3A 00 00    	ld	a,(_s_lin1)
2335  09FC  F5          	push	af
2336  09FD  33          	inc	sp
2337  09FE  CD 00 00    	call	_enemy_init
2338  0A01  F1          	pop	af
2339  0A02  F1          	pop	af
2340  0A03  18 66       	jr	l_player_hit_platform_00129
2341  0A05              l_player_hit_platform_00125:
2342  0A05  2E 01       	ld	l,0x01
2343  0A07  CD 00 00    	call	_zx_border_fastcall
2344  0A0A  3A 00 00    	ld	a,(_s_col1)
2345  0A0D  21 07 01    	ld	hl,0x0107
2346  0A10  E5          	push	hl
2347  0A11  F5          	push	af
2348  0A12  33          	inc	sp
2349  0A13  3A 00 00    	ld	a,(_s_lin1)
2350  0A16  F5          	push	af
2351  0A17  33          	inc	sp
2352  0A18  CD 00 00    	call	_enemy_init
2353  0A1B  F1          	pop	af
2354  0A1C  F1          	pop	af
2355  0A1D  18 4C       	jr	l_player_hit_platform_00129
2356  0A1F              l_player_hit_platform_00126:
2357  0A1F  2E 01       	ld	l,0x01
2358  0A21  CD 00 00    	call	_zx_border_fastcall
2359  0A24  3A 00 00    	ld	a,(_s_col1)
2360  0A27  21 07 FF    	ld	hl,0xff07
2361  0A2A  E5          	push	hl
2362  0A2B  F5          	push	af
2363  0A2C  33          	inc	sp
2364  0A2D  3A 00 00    	ld	a,(_s_lin1)
2365  0A30  F5          	push	af
2366  0A31  33          	inc	sp
2367  0A32  CD 00 00    	call	_enemy_init
2368  0A35  F1          	pop	af
2369  0A36  F1          	pop	af
2370  0A37  18 32       	jr	l_player_hit_platform_00129
2371  0A39              l_player_hit_platform_00127:
2372  0A39  2E 04       	ld	l,0x04
2373  0A3B  CD 00 00    	call	_zx_border_fastcall
2374  0A3E  3A 00 00    	ld	a,(_s_col1)
2375  0A41  21 08 01    	ld	hl,0x0108
2376  0A44  E5          	push	hl
2377  0A45  F5          	push	af
2378  0A46  33          	inc	sp
2379  0A47  3A 00 00    	ld	a,(_s_lin1)
2380  0A4A  F5          	push	af
2381  0A4B  33          	inc	sp
2382  0A4C  CD 00 00    	call	_enemy_init
2383  0A4F  F1          	pop	af
2384  0A50  F1          	pop	af
2385  0A51  18 18       	jr	l_player_hit_platform_00129
2386  0A53              l_player_hit_platform_00128:
2387  0A53  2E 04       	ld	l,0x04
2388  0A55  CD 00 00    	call	_zx_border_fastcall
2389  0A58  3A 00 00    	ld	a,(_s_col1)
2390  0A5B  21 08 FF    	ld	hl,0xff08
2391  0A5E  E5          	push	hl
2392  0A5F  F5          	push	af
2393  0A60  33          	inc	sp
2394  0A61  3A 00 00    	ld	a,(_s_lin1)
2395  0A64  F5          	push	af
2396  0A65  33          	inc	sp
2397  0A66  CD 00 00    	call	_enemy_init
2398  0A69  F1          	pop	af
2399  0A6A  F1          	pop	af
2400  0A6B              l_player_hit_platform_00129:
2401  0A6B  21 00 00    	ld	hl,_game_mush_count
2402  0A6E  34          	inc	(hl)
2403  0A6F  3A 00 00    	ld	a,(_game_boss)
2404  0A72  B7          	or	a, a
2405  0A73  20 66       	jr	NZ,l_player_hit_platform_00136
2406  0A75  3A 00 00    	ld	a,(_index1)
2407  0A78  C6 F0       	add	a,0xf0
2408  0A7A  32 00 00    	ld	(_index0),a
2409  0A7D  3A 01 00    	ld	a,(_index1 + 1)
2410  0A80  CE FF       	adc	a,0xff
2411  0A82  21 01 00    	ld	hl,_index0 + 1
2412  0A85  77          	ld	(hl), a
2413  0A86  3E 00       	ld	a, +((_scr_map) & 0xFF)
2414  0A88  2B          	dec	hl
2415  0A89  86          	add	a, (hl)
2416  0A8A  4F          	ld	c, a
2417  0A8B  3E 00       	ld	a, +((_scr_map) / 256)
2418  0A8D  23          	inc	hl
2419  0A8E  8E          	adc	a, (hl)
2420  0A8F  47          	ld	b, a
2421  0A90  C5          	push	bc
2422  0A91  46          	ld	b,(hl)
2423  0A92  2B          	dec	hl
2424  0A93  4E          	ld	c,(hl)
2425  0A94  C5          	push	bc
2426  0A95  CD 00 00    	call	_game_match_back
2427  0A98  F1          	pop	af
2428  0A99  C1          	pop	bc
2429  0A9A  7D          	ld	a,l
2430  0A9B  02          	ld	(bc), a
2431  0A9C  3E 00       	ld	a, +((_scr_map) & 0xFF)
2432  0A9E  21 00 00    	ld	hl,_index1
2433  0AA1  86          	add	a, (hl)
2434  0AA2  DD 77 FE    	ld	(ix-2),a
2435  0AA5  3E 00       	ld	a, +((_scr_map) / 256)
2436  0AA7  23          	inc	hl
2437  0AA8  8E          	adc	a, (hl)
2438  0AA9  DD 77 FF    	ld	(ix-1),a
2439  0AAC  E1          	pop	hl
2440  0AAD  7E          	ld	a,(hl)
2441  0AAE  E5          	push	hl
2442  0AAF  D6 5C       	sub	a,0x5c
2443  0AB1  20 06       	jr	NZ,l_player_hit_platform_00131
2444  0AB3  E1          	pop	hl
2445  0AB4  E5          	push	hl
2446  0AB5  36 4F       	ld	(hl),0x4f
2447  0AB7  18 04       	jr	l_player_hit_platform_00132
2448  0AB9              l_player_hit_platform_00131:
2449  0AB9  E1          	pop	hl
2450  0ABA  E5          	push	hl
2451  0ABB  36 54       	ld	(hl),0x54
2452  0ABD              l_player_hit_platform_00132:
2453  0ABD  2A 00 00    	ld	hl,(_index1)
2454  0AC0  01 F0 FF    	ld	bc,0xfff0
2455  0AC3  09          	add	hl,bc
2456  0AC4  E5          	push	hl
2457  0AC5  CD 00 00    	call	_game_obj_set
2458  0AC8  F1          	pop	af
2459  0AC9  3A 00 00    	ld	a,(_s_lin1)
2460  0ACC  C6 10       	add	a,0x10
2461  0ACE  4F          	ld	c, a
2462  0ACF  3A 00 00    	ld	a, (_s_col1)
2463  0AD2  47          	ld	b,a
2464  0AD3  C5          	push	bc
2465  0AD4  3E 4F       	ld	a,0x4f
2466  0AD6  F5          	push	af
2467  0AD7  33          	inc	sp
2468  0AD8  CD 00 00    	call	_NIRVANAP_drawT_callee
2469  0ADB              l_player_hit_platform_00136:
2470  0ADB  21 00 00    	ld	hl,_tmp0
2471  0ADE  34          	inc	(hl)
2472  0ADF  C3 48 09    	jp	l_player_hit_platform_00137
2473  0AE2              l_player_hit_platform_00141:
2474  0AE2  2E 01       	ld	l,0x01
2475  0AE4  CD 00 00    	call	_spr_brick_anim
2476  0AE7  CD 00 00    	call	_sound_hit_brick
2477  0AEA  2E 01       	ld	l,0x01
2478  0AEC  18 02       	jr	l_player_hit_platform_00147
2479  0AEE              l_player_hit_platform_00144:
2480  0AEE  2E 00       	ld	l,0x00
2481  0AF0              l_player_hit_platform_00147:
2482  0AF0  F1          	pop	af
2483  0AF1  DD E1       	pop	ix
2484  0AF3  C9          	ret
2485  0AF4              	SECTION code_compiler
2486  0AF4              ;	---------------------------------
2487  0AF4              ; Function player_hit_platform_clear
2488  0AF4              ; ---------------------------------
2489  0AF4              _player_hit_platform_clear:
2490  0AF4  01 04 00    	ld	bc,0x0004
2491  0AF7  C5          	push	bc
2492  0AF8  2A 0E 00    	ld	hl,(_spr_timer + 0x000e)
2493  0AFB  E5          	push	hl
2494  0AFC  CD 00 00    	call	_game_check_time
2495  0AFF  F1          	pop	af
2496  0B00  F1          	pop	af
2497  0B01  7D          	ld	a, l
2498  0B02  B7          	or	a, a
2499  0B03  C8          	ret	Z
2500  0B04  2A FF FF    	ld	hl,(_player_hit_col - 1)
2501  0B07  3A 00 00    	ld	a,(_player_hit_lin)
2502  0B0A  6F          	ld	l,a
2503  0B0B  E5          	push	hl
2504  0B0C  CD 00 00    	call	_spr_calc_index
2505  0B0F  F1          	pop	af
2506  0B10  22 00 00    	ld	(_index1),hl
2507  0B13  2E 00       	ld	l,0x00
2508  0B15  CD 00 00    	call	_spr_brick_anim
2509  0B18  21 00 00    	ld	hl,_player_hit_lin
2510  0B1B  36 00       	ld	(hl),0x00
2511  0B1D  21 00 00    	ld	hl,_player_hit_col
2512  0B20  36 00       	ld	(hl),0x00
2513  0B22  C9          	ret
2514  0B23              	SECTION code_compiler
2515  0B23              ;	---------------------------------
2516  0B23              ; Function player_score_add
2517  0B23              ; ---------------------------------
2518  0B23              _player_score_add:
2519  0B23  ED 4B 00 00 	ld	bc,(_player_score)
2520  0B27  09          	add	hl,bc
2521  0B28  22 00 00    	ld	(_player_score),hl
2522  0B2B  21 00 00    	ld	hl,_player_lvl
2523  0B2E  7E          	ld	a, (hl)
2524  0B2F  D6 14       	sub	a,0x14
2525  0B31  30 3C       	jr	NC,l_player_score_add_00104
2526  0B33  01 00 00    	ld	bc,_player_lvl_table+0
2527  0B36  6E          	ld	l,(hl)
2528  0B37  26 00       	ld	h,0x00
2529  0B39  29          	add	hl, hl
2530  0B3A  09          	add	hl, bc
2531  0B3B  4E          	ld	c, (hl)
2532  0B3C  23          	inc	hl
2533  0B3D  46          	ld	b, (hl)
2534  0B3E  21 00 00    	ld	hl,_player_score
2535  0B41  7E          	ld	a, (hl)
2536  0B42  91          	sub	a, c
2537  0B43  23          	inc	hl
2538  0B44  7E          	ld	a, (hl)
2539  0B45  98          	sbc	a, b
2540  0B46  38 27       	jr	C,l_player_score_add_00104
2541  0B48  21 00 00    	ld	hl,_player_lvl
2542  0B4B  34          	inc	(hl)
2543  0B4C  21 06 00    	ld	hl,___str_1
2544  0B4F  E5          	push	hl
2545  0B50  21 0C 0C    	ld	hl,0x0c0c
2546  0B53  E5          	push	hl
2547  0B54  CD 00 00    	call	_zx_print_str
2548  0B57  AF          	xor	a, a
2549  0B58  F5          	push	af
2550  0B59  33          	inc	sp
2551  0B5A  21 19 00    	ld	hl,0x0019
2552  0B5D  E5          	push	hl
2553  0B5E  21 0C 15    	ld	hl,0x150c
2554  0B61  E5          	push	hl
2555  0B62  3E 0C       	ld	a,0x0c
2556  0B64  F5          	push	af
2557  0B65  33          	inc	sp
2558  0B66  CD 00 00    	call	_game_colour_message
2559  0B69  F1          	pop	af
2560  0B6A  F1          	pop	af
2561  0B6B  F1          	pop	af
2562  0B6C  CD 00 00    	call	_game_update_stats
2563  0B6F              l_player_score_add_00104:
2564  0B6F  3A 00 00    	ld	a,(_game_score_top)
2565  0B72  21 00 00    	ld	hl,_player_score
2566  0B75  96          	sub	a, (hl)
2567  0B76  3A 01 00    	ld	a,(_game_score_top + 1)
2568  0B79  23          	inc	hl
2569  0B7A  9E          	sbc	a, (hl)
2570  0B7B  30 06       	jr	NC,l_player_score_add_00106
2571  0B7D  2A 00 00    	ld	hl,(_player_score)
2572  0B80  22 00 00    	ld	(_game_score_top),hl
2573  0B83              l_player_score_add_00106:
2574  0B83  CD 00 00    	call	_game_print_score
2575  0B86  C9          	ret
2576  0B87              	SECTION rodata_compiler
2577  0006              ___str_1:
2578  0006  4C 45 56 45 4C 20 55 50 21 
                        	DEFM "LEVEL UP!"
2579  000F  00          	DEFB 0x00
2580  0010              	SECTION code_compiler
2581  0B87              ;	---------------------------------
2582  0B87              ; Function player_check_floor
2583  0B87              ; ---------------------------------
2584  0B87              _player_check_floor:
2585  0B87  CD 00 00    	call	___sdcc_enter_ix
2586  0B8A  F5          	push	af
2587  0B8B  F5          	push	af
2588  0B8C  F5          	push	af
2589  0B8D  11 07 00    	ld	de,_col+7
2590  0B90  1A          	ld	a, (de)
2591  0B91  47          	ld	b, a
2592  0B92  3A 07 00    	ld	a,(_lin + 0x0007)
2593  0B95  C6 10       	add	a,0x10
2594  0B97  D5          	push	de
2595  0B98  4F          	ld	c,a
2596  0B99  C5          	push	bc
2597  0B9A  CD 00 00    	call	_spr_calc_index
2598  0B9D  F1          	pop	af
2599  0B9E  D1          	pop	de
2600  0B9F  DD 75 FC    	ld	(ix-4),l
2601  0BA2  DD 74 FD    	ld	(ix-3),h
2602  0BA5  01 00 00    	ld	bc,_scr_map+0
2603  0BA8  79          	ld	a, c
2604  0BA9  DD 86 FC    	add	a,(ix-4)
2605  0BAC  DD 77 FE    	ld	(ix-2),a
2606  0BAF  78          	ld	a, b
2607  0BB0  DD 8E FD    	adc	a,(ix-3)
2608  0BB3  DD 6E FE    	ld	l,(ix-2)
2609  0BB6  DD 77 FF    	ld	(ix-1),a
2610  0BB9  67          	ld	h,a
2611  0BBA  7E          	ld	a, (hl)
2612  0BBB  DD 77 FB    	ld	(ix-5),a
2613  0BBE  DD 6E FC    	ld	l,(ix-4)
2614  0BC1  DD 66 FD    	ld	h,(ix-3)
2615  0BC4  23          	inc	hl
2616  0BC5  09          	add	hl,bc
2617  0BC6  3A 00 00    	ld	a,(_s_lin0)
2618  0BC9  D6 90       	sub	a,0x90
2619  0BCB  4D          	ld	c,l
2620  0BCC  44          	ld	b,h
2621  0BCD  20 26       	jr	NZ,l_player_check_floor_00108
2622  0BCF  3A 00 00    	ld	a,(_map_heigth)
2623  0BD2  C5          	push	bc
2624  0BD3  F5          	push	af
2625  0BD4  33          	inc	sp
2626  0BD5  3A 00 00    	ld	a,(_scr_curr)
2627  0BD8  F5          	push	af
2628  0BD9  33          	inc	sp
2629  0BDA  CD 00 00    	call	__divuchar_callee
2630  0BDD  C1          	pop	bc
2631  0BDE  7D          	ld	a,l
2632  0BDF  3C          	inc	a
2633  0BE0  32 00 00    	ld	(_tmp1),a
2634  0BE3  21 00 00    	ld	hl,_map_heigth
2635  0BE6  96          	sub	a, (hl)
2636  0BE7  30 06       	jr	NC,l_player_check_floor_00102
2637  0BE9  DD 36 FB 00 	ld	(ix-5),0x00
2638  0BED  18 14       	jr	l_player_check_floor_00109
2639  0BEF              l_player_check_floor_00102:
2640  0BEF  DD 36 FB 48 	ld	(ix-5),0x48
2641  0BF3  18 0E       	jr	l_player_check_floor_00109
2642  0BF5              l_player_check_floor_00108:
2643  0BF5  1A          	ld	a, (de)
2644  0BF6  0F          	rrca
2645  0BF7  38 06       	jr	C,l_player_check_floor_00105
2646  0BF9  DD 36 FA 00 	ld	(ix-6),0x00
2647  0BFD  18 04       	jr	l_player_check_floor_00109
2648  0BFF              l_player_check_floor_00105:
2649  0BFF  0A          	ld	a, (bc)
2650  0C00  DD 77 FA    	ld	(ix-6),a
2651  0C03              l_player_check_floor_00109:
2652  0C03  DD 7E FB    	ld	a,(ix-5)
2653  0C06  D6 3C       	sub	a,0x3c
2654  0C08  38 07       	jr	C,l_player_check_floor_00132
2655  0C0A  DD 7E FB    	ld	a,(ix-5)
2656  0C0D  D6 60       	sub	a,0x60
2657  0C0F  38 32       	jr	C,l_player_check_floor_00128
2658  0C11              l_player_check_floor_00132:
2659  0C11  DD 7E FA    	ld	a,(ix-6)
2660  0C14  D6 3C       	sub	a,0x3c
2661  0C16  38 07       	jr	C,l_player_check_floor_00127
2662  0C18  DD 7E FA    	ld	a,(ix-6)
2663  0C1B  D6 60       	sub	a,0x60
2664  0C1D  38 24       	jr	C,l_player_check_floor_00128
2665  0C1F              l_player_check_floor_00127:
2666  0C1F  21 07 00    	ld	hl, +(_sprite_speed_alt + 0x0007)
2667  0C22  36 02       	ld	(hl),0x02
2668  0C24  21 00 00    	ld	hl,_s_state
2669  0C27  CB CE       	set	1, (hl)
2670  0C29  2E 00       	ld	l,0x00
2671  0C2B  CD B7 03    	call	_player_check_stairs
2672  0C2E  3A 00 00    	ld	a,(_player_over_stair)
2673  0C31  B7          	or	a, a
2674  0C32  C2 DD 0C    	jp	NZ, l_player_check_floor_00133
2675  0C35  3A 00 00    	ld	a,(_s_lin0)
2676  0C38  D6 90       	sub	a,0x90
2677  0C3A  C2 DD 0C    	jp	NZ,l_player_check_floor_00133
2678  0C3D  CD 00 00    	call	_spr_page_down
2679  0C40  C3 DD 0C    	jp	l_player_check_floor_00133
2680  0C43              l_player_check_floor_00128:
2681  0C43  C5          	push	bc
2682  0C44  21 10 00    	ld	hl,0x0010
2683  0C47  E5          	push	hl
2684  0C48  2A 00 00    	ld	hl,(_player_brick_time)
2685  0C4B  E5          	push	hl
2686  0C4C  CD 00 00    	call	_game_check_time
2687  0C4F  F1          	pop	af
2688  0C50  F1          	pop	af
2689  0C51  C1          	pop	bc
2690  0C52  7D          	ld	a,l
2691  0C53  B7          	or	a, a
2692  0C54  CA DD 0C    	jp	Z, l_player_check_floor_00133
2693  0C57  2A 00 00    	ld	hl,(_curr_time)
2694  0C5A  22 00 00    	ld	(_player_brick_time),hl
2695  0C5D  DD 7E FB    	ld	a,(ix-5)
2696  0C60  D6 40       	sub	a,0x40
2697  0C62  20 1A       	jr	NZ,l_player_check_floor_00114
2698  0C64  C5          	push	bc
2699  0C65  DD 6E FC    	ld	l,(ix-4)
2700  0C68  DD 66 FD    	ld	h,(ix-3)
2701  0C6B  E5          	push	hl
2702  0C6C  CD 00 00    	call	_game_match_back
2703  0C6F  F1          	pop	af
2704  0C70  C1          	pop	bc
2705  0C71  5D          	ld	e,l
2706  0C72  DD 6E FE    	ld	l,(ix-2)
2707  0C75  DD 66 FF    	ld	h,(ix-1)
2708  0C78  73          	ld	(hl), e
2709  0C79  C5          	push	bc
2710  0C7A  CD E2 0C    	call	_player_gasta_brick
2711  0C7D  C1          	pop	bc
2712  0C7E              l_player_check_floor_00114:
2713  0C7E  DD 7E FB    	ld	a,(ix-5)
2714  0C81  D6 3F       	sub	a,0x3f
2715  0C83  20 0D       	jr	NZ,l_player_check_floor_00116
2716  0C85  DD 6E FE    	ld	l,(ix-2)
2717  0C88  DD 66 FF    	ld	h,(ix-1)
2718  0C8B  36 40       	ld	(hl),0x40
2719  0C8D  C5          	push	bc
2720  0C8E  CD E2 0C    	call	_player_gasta_brick
2721  0C91  C1          	pop	bc
2722  0C92              l_player_check_floor_00116:
2723  0C92  DD 7E FB    	ld	a,(ix-5)
2724  0C95  D6 3E       	sub	a,0x3e
2725  0C97  20 0D       	jr	NZ,l_player_check_floor_00118
2726  0C99  DD 6E FE    	ld	l,(ix-2)
2727  0C9C  DD 66 FF    	ld	h,(ix-1)
2728  0C9F  36 3F       	ld	(hl),0x3f
2729  0CA1  C5          	push	bc
2730  0CA2  CD E2 0C    	call	_player_gasta_brick
2731  0CA5  C1          	pop	bc
2732  0CA6              l_player_check_floor_00118:
2733  0CA6  DD 7E FA    	ld	a,(ix-6)
2734  0CA9  D6 40       	sub	a,0x40
2735  0CAB  20 14       	jr	NZ,l_player_check_floor_00120
2736  0CAD  C5          	push	bc
2737  0CAE  DD 6E FC    	ld	l,(ix-4)
2738  0CB1  DD 66 FD    	ld	h,(ix-3)
2739  0CB4  E5          	push	hl
2740  0CB5  CD 00 00    	call	_game_match_back
2741  0CB8  F1          	pop	af
2742  0CB9  C1          	pop	bc
2743  0CBA  7D          	ld	a,l
2744  0CBB  02          	ld	(bc), a
2745  0CBC  C5          	push	bc
2746  0CBD  CD E2 0C    	call	_player_gasta_brick
2747  0CC0  C1          	pop	bc
2748  0CC1              l_player_check_floor_00120:
2749  0CC1  DD 7E FA    	ld	a,(ix-6)
2750  0CC4  D6 3F       	sub	a,0x3f
2751  0CC6  20 08       	jr	NZ,l_player_check_floor_00122
2752  0CC8  3E 40       	ld	a,0x40
2753  0CCA  02          	ld	(bc), a
2754  0CCB  C5          	push	bc
2755  0CCC  CD E2 0C    	call	_player_gasta_brick
2756  0CCF  C1          	pop	bc
2757  0CD0              l_player_check_floor_00122:
2758  0CD0  DD 7E FA    	ld	a,(ix-6)
2759  0CD3  D6 3E       	sub	a,0x3e
2760  0CD5  20 06       	jr	NZ,l_player_check_floor_00133
2761  0CD7  3E 3F       	ld	a,0x3f
2762  0CD9  02          	ld	(bc), a
2763  0CDA  CD E2 0C    	call	_player_gasta_brick
2764  0CDD              l_player_check_floor_00133:
2765  0CDD  DD F9       	ld	sp, ix
2766  0CDF  DD E1       	pop	ix
2767  0CE1  C9          	ret
2768  0CE2              	SECTION code_compiler
2769  0CE2              ;	---------------------------------
2770  0CE2              ; Function player_gasta_brick
2771  0CE2              ; ---------------------------------
2772  0CE2              _player_gasta_brick:
2773  0CE2  3A 00 00    	ld	a,(_s_lin0)
2774  0CE5  32 00 00    	ld	(_s_lin1),a
2775  0CE8  3A 00 00    	ld	a,(_s_col0)
2776  0CEB  32 00 00    	ld	(_s_col1),a
2777  0CEE  3A 07 00    	ld	a,(_lin + 0x0007)
2778  0CF1  C6 10       	add	a,0x10
2779  0CF3  32 00 00    	ld	(_s_lin0),a
2780  0CF6  3A 07 00    	ld	a,(_col + 0x0007)
2781  0CF9  32 00 00    	ld	(_s_col0),a
2782  0CFC  CD 00 00    	call	_spr_back_repaint
2783  0CFF  3A 00 00    	ld	a,(_s_lin1)
2784  0D02  32 00 00    	ld	(_s_lin0),a
2785  0D05  3A 00 00    	ld	a,(_s_col1)
2786  0D08  32 00 00    	ld	(_s_col0),a
2787  0D0B  C9          	ret
2788  0D0C              	SECTION code_compiler
2789  0D0C              ;	---------------------------------
2790  0D0C              ; Function player_move_jump
2791  0D0C              ; ---------------------------------
2792  0D0C              _player_move_jump:
2793  0D0C  CD 00 00    	call	___sdcc_enter_ix
2794  0D0F  F5          	push	af
2795  0D10  21 00 00    	ld	hl,_game_gravity
2796  0D13  4E          	ld	c, (hl)
2797  0D14  21 00 00    	ld	hl,_player_vel_y
2798  0D17  7E          	ld	a, (hl)
2799  0D18  81          	add	a, c
2800  0D19  77          	ld	(hl), a
2801  0D1A  21 00 00    	ld	hl,_sprite_on_air
2802  0D1D  36 01       	ld	(hl),0x01
2803  0D1F  3A 00 00    	ld	a,(_player_vel_inc)
2804  0D22  B7          	or	a, a
2805  0D23  28 2B       	jr	Z,l_player_move_jump_00107
2806  0D25  21 00 00    	ld	hl,_dirs
2807  0D28  CB 7E       	bit	7, (hl)
2808  0D2A  28 07       	jr	Z,l_player_move_jump_00104
2809  0D2C  21 00 00    	ld	hl,_dirs
2810  0D2F  CB 46       	bit	0, (hl)
2811  0D31  20 1D       	jr	NZ,l_player_move_jump_00107
2812  0D33              l_player_move_jump_00104:
2813  0D33  3A 00 00    	ld	a,(_player_vel_y1)
2814  0D36  21 00 00    	ld	hl,_player_vel_y
2815  0D39  96          	sub	a, (hl)
2816  0D3A  E2 3F 0D    	jp	PO, l_player_move_jump_00263
2817  0D3D  EE 80       	xor	a,0x80
2818  0D3F              l_player_move_jump_00263:
2819  0D3F  F2 50 0D    	jp	P, l_player_move_jump_00107
2820  0D42  21 00 00    	ld	hl,_player_vel_y
2821  0D45  CB 7E       	bit	7,(hl)
2822  0D47  28 07       	jr	Z,l_player_move_jump_00107
2823  0D49  36 00       	ld	(hl),0x00
2824  0D4B  21 00 00    	ld	hl,_player_vel_inc
2825  0D4E  36 00       	ld	(hl),0x00
2826  0D50              l_player_move_jump_00107:
2827  0D50  3E 78       	ld	a,0x78
2828  0D52  21 00 00    	ld	hl,_player_vel_y
2829  0D55  96          	sub	a, (hl)
2830  0D56  E2 5B 0D    	jp	PO, l_player_move_jump_00264
2831  0D59  EE 80       	xor	a,0x80
2832  0D5B              l_player_move_jump_00264:
2833  0D5B  F2 63 0D    	jp	P, l_player_move_jump_00109
2834  0D5E  21 00 00    	ld	hl,_player_vel_y
2835  0D61  36 78       	ld	(hl),0x78
2836  0D63              l_player_move_jump_00109:
2837  0D63  21 00 00    	ld	hl,_player_vel_y
2838  0D66  7E          	ld	a, (hl)
2839  0D67  EE 80       	xor	a,0x80
2840  0D69  D6 08       	sub	a,0x08
2841  0D6B  30 02       	jr	NC,l_player_move_jump_00111
2842  0D6D  36 88       	ld	(hl),0x88
2843  0D6F              l_player_move_jump_00111:
2844  0D6F  21 00 00    	ld	hl,_player_vel_y
2845  0D72  7E          	ld	a, (hl)
2846  0D73  DD 77 FE    	ld	(ix-2),a
2847  0D76  7E          	ld	a, (hl)
2848  0D77  17          	rla
2849  0D78  9F          	sbc	a, a
2850  0D79  DD 77 FF    	ld	(ix-1),a
2851  0D7C  DD 7E FE    	ld	a,(ix-2)
2852  0D7F  CB 47       	bit	0,a
2853  0D81  32 00 00    	ld	(_s_lin1),a
2854  0D84  28 04       	jr	Z,l_player_move_jump_00113
2855  0D86  21 00 00    	ld	hl,_s_lin1
2856  0D89  35          	dec	(hl)
2857  0D8A              l_player_move_jump_00113:
2858  0D8A  3A 07 00    	ld	a,(_lin + 0x0007)
2859  0D8D  21 00 00    	ld	hl,_s_lin1
2860  0D90  86          	add	a, (hl)
2861  0D91  77          	ld	(hl), a
2862  0D92  3E 90       	ld	a,0x90
2863  0D94  96          	sub	a, (hl)
2864  0D95  30 2B       	jr	NC,l_player_move_jump_00124
2865  0D97  3E C8       	ld	a,0xc8
2866  0D99  96          	sub	a, (hl)
2867  0D9A  30 13       	jr	NC,l_player_move_jump_00121
2868  0D9C  CD 00 00    	call	_spr_page_up
2869  0D9F  7D          	ld	a, l
2870  0DA0  B7          	or	a, a
2871  0DA1  28 05       	jr	Z,l_player_move_jump_00115
2872  0DA3  2E 00       	ld	l,0x00
2873  0DA5  C3 20 0F    	jp	l_player_move_jump_00158
2874  0DA8              l_player_move_jump_00115:
2875  0DA8  21 00 00    	ld	hl,_s_lin1
2876  0DAB  36 00       	ld	(hl),0x00
2877  0DAD  18 13       	jr	l_player_move_jump_00124
2878  0DAF              l_player_move_jump_00121:
2879  0DAF  CD 00 00    	call	_spr_page_down
2880  0DB2  7D          	ld	a, l
2881  0DB3  B7          	or	a, a
2882  0DB4  28 07       	jr	Z,l_player_move_jump_00118
2883  0DB6  21 00 00    	ld	hl,_s_lin1
2884  0DB9  36 10       	ld	(hl),0x10
2885  0DBB  18 05       	jr	l_player_move_jump_00124
2886  0DBD              l_player_move_jump_00118:
2887  0DBD  21 00 00    	ld	hl,_s_lin1
2888  0DC0  36 90       	ld	(hl),0x90
2889  0DC2              l_player_move_jump_00124:
2890  0DC2  3A 00 00    	ld	a,(_s_lin0)
2891  0DC5  07          	rlca
2892  0DC6  07          	rlca
2893  0DC7  07          	rlca
2894  0DC8  07          	rlca
2895  0DC9  E6 0F       	and	a,0x0f
2896  0DCB  4F          	ld	c, a
2897  0DCC  DD CB FF 7E 	bit	7,(ix-1)
2898  0DD0  28 62       	jr	Z,l_player_move_jump_00147
2899  0DD2  21 00 00    	ld	hl,_s_state
2900  0DD5  7E          	ld	a,(hl)
2901  0DD6  F6 01       	or	a,0x01
2902  0DD8  E6 FD       	and	a,0xfd
2903  0DDA  77          	ld	(hl),a
2904  0DDB  21 00 00    	ld	hl,_s_lin1
2905  0DDE  46          	ld	b, (hl)
2906  0DDF  79          	ld	a, c
2907  0DE0  90          	sub	a, b
2908  0DE1  20 04       	jr	NZ,l_player_move_jump_00266
2909  0DE3  3E 01       	ld	a,0x01
2910  0DE5  18 01       	jr	l_player_move_jump_00267
2911  0DE7              l_player_move_jump_00266:
2912  0DE7  AF          	xor	a,a
2913  0DE8              l_player_move_jump_00267:
2914  0DE8  EE 01       	xor	a,0x01
2915  0DEA  4F          	ld	c,a
2916  0DEB  B7          	or	a, a
2917  0DEC  28 3D       	jr	Z,l_player_move_jump_00131
2918  0DEE  21 07 00    	ld	hl,+(_col + 0x0007)
2919  0DF1  46          	ld	b, (hl)
2920  0DF2  C5          	push	bc
2921  0DF3  33          	inc	sp
2922  0DF4  3A 00 00    	ld	a,(_s_lin1)
2923  0DF7  F5          	push	af
2924  0DF8  33          	inc	sp
2925  0DF9  CD 00 00    	call	_game_check_map
2926  0DFC  F1          	pop	af
2927  0DFD  7C          	ld	a,h
2928  0DFE  B5          	or	a,l
2929  0DFF  28 21       	jr	Z,l_player_move_jump_00128
2930  0E01  CD 57 08    	call	_player_hit_platform
2931  0E04  7D          	ld	a, l
2932  0E05  B7          	or	a, a
2933  0E06  28 12       	jr	Z,l_player_move_jump_00126
2934  0E08  3A 07 00    	ld	a,(_lin + 0x0007)
2935  0E0B  07          	rlca
2936  0E0C  07          	rlca
2937  0E0D  07          	rlca
2938  0E0E  07          	rlca
2939  0E0F  E6 0F       	and	a,0x0f
2940  0E11  07          	rlca
2941  0E12  07          	rlca
2942  0E13  07          	rlca
2943  0E14  07          	rlca
2944  0E15  E6 F0       	and	a,0xf0
2945  0E17  32 07 00    	ld	((_lin + 0x0007)),a
2946  0E1A              l_player_move_jump_00126:
2947  0E1A  21 00 00    	ld	hl,_player_vel_y
2948  0E1D  36 00       	ld	(hl),0x00
2949  0E1F  C3 E2 0E    	jp	l_player_move_jump_00148
2950  0E22              l_player_move_jump_00128:
2951  0E22  3A 00 00    	ld	a,(_s_lin1)
2952  0E25  32 07 00    	ld	((_lin + 0x0007)),a
2953  0E28  C3 E2 0E    	jp	l_player_move_jump_00148
2954  0E2B              l_player_move_jump_00131:
2955  0E2B  3A 00 00    	ld	a,(_s_lin1)
2956  0E2E  32 07 00    	ld	((_lin + 0x0007)),a
2957  0E31  C3 E2 0E    	jp	l_player_move_jump_00148
2958  0E34              l_player_move_jump_00147:
2959  0E34  21 00 00    	ld	hl,_s_state
2960  0E37  7E          	ld	a,(hl)
2961  0E38  F6 02       	or	a,0x02
2962  0E3A  E6 FE       	and	a,0xfe
2963  0E3C  77          	ld	(hl),a
2964  0E3D  21 00 00    	ld	hl,_s_lin1
2965  0E40  7E          	ld	a, (hl)
2966  0E41  C6 10       	add	a,0x10
2967  0E43  77          	ld	(hl),a
2968  0E44  47          	ld	b,a
2969  0E45  79          	ld	a, c
2970  0E46  90          	sub	a, b
2971  0E47  20 04       	jr	NZ,l_player_move_jump_00268
2972  0E49  3E 01       	ld	a,0x01
2973  0E4B  18 01       	jr	l_player_move_jump_00269
2974  0E4D              l_player_move_jump_00268:
2975  0E4D  AF          	xor	a,a
2976  0E4E              l_player_move_jump_00269:
2977  0E4E  EE 01       	xor	a,0x01
2978  0E50  4F          	ld	c,a
2979  0E51  B7          	or	a, a
2980  0E52  CA D5 0E    	jp	Z, l_player_move_jump_00144
2981  0E55  21 07 00    	ld	hl,+(_col + 0x0007)
2982  0E58  46          	ld	b, (hl)
2983  0E59  C5          	push	bc
2984  0E5A  33          	inc	sp
2985  0E5B  3A 00 00    	ld	a,(_s_lin1)
2986  0E5E  F5          	push	af
2987  0E5F  33          	inc	sp
2988  0E60  CD 00 00    	call	_game_check_map
2989  0E63  F1          	pop	af
2990  0E64  45          	ld	b, l
2991  0E65  5C          	ld	e, h
2992  0E66  21 00 00    	ld	hl,_s_lin1
2993  0E69  7E          	ld	a, (hl)
2994  0E6A  C6 F0       	add	a,0xf0
2995  0E6C  4F          	ld	c, a
2996  0E6D  7B          	ld	a, e
2997  0E6E  B0          	or	a,b
2998  0E6F  28 58       	jr	Z,l_player_move_jump_00141
2999  0E71  71          	ld	(hl), c
3000  0E72  2E 00       	ld	l,0x00
3001  0E74  CD B7 03    	call	_player_check_stairs
3002  0E77  3A 00 00    	ld	a,(_player_over_stair)
3003  0E7A  B7          	or	a, a
3004  0E7B  20 05       	jr	NZ,l_player_move_jump_00134
3005  0E7D  2E 01       	ld	l,0x01
3006  0E7F  CD B7 03    	call	_player_check_stairs
3007  0E82              l_player_move_jump_00134:
3008  0E82  3A 00 00    	ld	a,(_player_over_stair)
3009  0E85  B7          	or	a, a
3010  0E86  20 2C       	jr	NZ,l_player_move_jump_00139
3011  0E88  21 00 00    	ld	hl,_s_lin1
3012  0E8B  7E          	ld	a, (hl)
3013  0E8C  07          	rlca
3014  0E8D  07          	rlca
3015  0E8E  07          	rlca
3016  0E8F  07          	rlca
3017  0E90  E6 0F       	and	a,0x0f
3018  0E92  07          	rlca
3019  0E93  07          	rlca
3020  0E94  07          	rlca
3021  0E95  07          	rlca
3022  0E96  E6 F0       	and	a,0xf0
3023  0E98  77          	ld	(hl), a
3024  0E99  21 07 00    	ld	hl,+(_lin + 0x0007)
3025  0E9C  4E          	ld	c, (hl)
3026  0E9D  21 00 00    	ld	hl,_s_lin1
3027  0EA0  7E          	ld	a, (hl)
3028  0EA1  91          	sub	a, c
3029  0EA2  30 0A       	jr	NC,l_player_move_jump_00136
3030  0EA4  7E          	ld	a, (hl)
3031  0EA5  C6 10       	add	a,0x10
3032  0EA7  32 07 00    	ld	((_lin + 0x0007)),a
3033  0EAA  2E 00       	ld	l,0x00
3034  0EAC  18 72       	jr	l_player_move_jump_00158
3035  0EAE              l_player_move_jump_00136:
3036  0EAE  3A 00 00    	ld	a,(_s_lin1)
3037  0EB1  32 07 00    	ld	((_lin + 0x0007)),a
3038  0EB4              l_player_move_jump_00139:
3039  0EB4  21 00 00    	ld	hl,_player_vel_y
3040  0EB7  36 00       	ld	(hl),0x00
3041  0EB9  21 00 00    	ld	hl,_s_state
3042  0EBC  7E          	ld	a,(hl)
3043  0EBD  E6 FC       	and	a,+(0xfd&0xfe)
3044  0EBF  77          	ld	(hl),a
3045  0EC0  21 07 00    	ld	hl, +(_colint + 0x0007)
3046  0EC3  36 00       	ld	(hl),0x00
3047  0EC5  2E 01       	ld	l,0x01
3048  0EC7  18 57       	jr	l_player_move_jump_00158
3049  0EC9              l_player_move_jump_00141:
3050  0EC9  21 00 00    	ld	hl,_s_lin1
3051  0ECC  71          	ld	(hl), c
3052  0ECD  3A 00 00    	ld	a,(_s_lin1)
3053  0ED0  32 07 00    	ld	((_lin + 0x0007)),a
3054  0ED3  18 0D       	jr	l_player_move_jump_00148
3055  0ED5              l_player_move_jump_00144:
3056  0ED5  21 00 00    	ld	hl,_s_lin1
3057  0ED8  7E          	ld	a, (hl)
3058  0ED9  C6 F0       	add	a,0xf0
3059  0EDB  77          	ld	(hl), a
3060  0EDC  3A 00 00    	ld	a,(_s_lin1)
3061  0EDF  32 07 00    	ld	((_lin + 0x0007)),a
3062  0EE2              l_player_move_jump_00148:
3063  0EE2  21 00 00    	ld	hl,_s_state
3064  0EE5  CB 5E       	bit	3, (hl)
3065  0EE7  20 27       	jr	NZ,l_player_move_jump_00154
3066  0EE9  21 00 00    	ld	hl,_s_state
3067  0EEC  CB 56       	bit	2, (hl)
3068  0EEE  20 20       	jr	NZ,l_player_move_jump_00154
3069  0EF0  21 00 00    	ld	hl,_dirs
3070  0EF3  CB 56       	bit	2, (hl)
3071  0EF5  28 09       	jr	Z,l_player_move_jump_00150
3072  0EF7  21 00 00    	ld	hl,_s_state
3073  0EFA  7E          	ld	a,(hl)
3074  0EFB  F6 08       	or	a,0x08
3075  0EFD  E6 FB       	and	a,0xfb
3076  0EFF  77          	ld	(hl),a
3077  0F00              l_player_move_jump_00150:
3078  0F00  21 00 00    	ld	hl,_dirs
3079  0F03  CB 5E       	bit	3, (hl)
3080  0F05  28 09       	jr	Z,l_player_move_jump_00154
3081  0F07  21 00 00    	ld	hl,_s_state
3082  0F0A  7E          	ld	a,(hl)
3083  0F0B  F6 04       	or	a,0x04
3084  0F0D  E6 F7       	and	a,0xf7
3085  0F0F  77          	ld	(hl),a
3086  0F10              l_player_move_jump_00154:
3087  0F10  CD 00 00    	call	_spr_move_horizontal
3088  0F13  7D          	ld	a, l
3089  0F14  B7          	or	a, a
3090  0F15  28 07       	jr	Z,l_player_move_jump_00157
3091  0F17  21 00 00    	ld	hl,_s_state
3092  0F1A  7E          	ld	a,(hl)
3093  0F1B  E6 F3       	and	a,+(0xf7&0xfb)
3094  0F1D  77          	ld	(hl),a
3095  0F1E              l_player_move_jump_00157:
3096  0F1E  2E 00       	ld	l,0x00
3097  0F20              l_player_move_jump_00158:
3098  0F20  F1          	pop	af
3099  0F21  DD E1       	pop	ix
3100  0F23  C9          	ret
3101  0F24              	SECTION code_compiler
3102  0F24              ;	---------------------------------
3103  0F24              ; Function player_open_door
3104  0F24              ; ---------------------------------
3105  0F24              _player_open_door:
3106  0F24  CD 00 00    	call	___sdcc_enter_ix
3107  0F27  0E 00       	ld	c,0x00
3108  0F29  DD 7E 06    	ld	a,(ix+6)
3109  0F2C  D6 48       	sub	a,0x48
3110  0F2E  28 17       	jr	Z,l_player_open_door_00101
3111  0F30  DD 7E 06    	ld	a,(ix+6)
3112  0F33  D6 49       	sub	a,0x49
3113  0F35  28 1F       	jr	Z,l_player_open_door_00104
3114  0F37  DD 7E 06    	ld	a,(ix+6)
3115  0F3A  D6 4A       	sub	a,0x4a
3116  0F3C  28 27       	jr	Z,l_player_open_door_00107
3117  0F3E  DD 7E 06    	ld	a,(ix+6)
3118  0F41  D6 4B       	sub	a,0x4b
3119  0F43  28 2F       	jr	Z,l_player_open_door_00110
3120  0F45  18 3A       	jr	l_player_open_door_00113
3121  0F47              l_player_open_door_00101:
3122  0F47  3A 00 00    	ld	a,(_player_keys)
3123  0F4A  B7          	or	a, a
3124  0F4B  28 34       	jr	Z,l_player_open_door_00113
3125  0F4D  2E 07       	ld	l,0x07
3126  0F4F  CD 00 00    	call	_zx_border_fastcall
3127  0F52  0E 01       	ld	c,0x01
3128  0F54  18 2B       	jr	l_player_open_door_00113
3129  0F56              l_player_open_door_00104:
3130  0F56  3A 01 00    	ld	a,(_player_keys + 0x0001)
3131  0F59  B7          	or	a, a
3132  0F5A  28 25       	jr	Z,l_player_open_door_00113
3133  0F5C  2E 02       	ld	l,0x02
3134  0F5E  CD 00 00    	call	_zx_border_fastcall
3135  0F61  0E 01       	ld	c,0x01
3136  0F63  18 1C       	jr	l_player_open_door_00113
3137  0F65              l_player_open_door_00107:
3138  0F65  3A 02 00    	ld	a,(_player_keys + 0x0002)
3139  0F68  B7          	or	a, a
3140  0F69  28 16       	jr	Z,l_player_open_door_00113
3141  0F6B  2E 04       	ld	l,0x04
3142  0F6D  CD 00 00    	call	_zx_border_fastcall
3143  0F70  0E 01       	ld	c,0x01
3144  0F72  18 0D       	jr	l_player_open_door_00113
3145  0F74              l_player_open_door_00110:
3146  0F74  3A 03 00    	ld	a,(_player_keys + 0x0003)
3147  0F77  B7          	or	a, a
3148  0F78  28 07       	jr	Z,l_player_open_door_00113
3149  0F7A  2E 05       	ld	l,0x05
3150  0F7C  CD 00 00    	call	_zx_border_fastcall
3151  0F7F  0E 01       	ld	c,0x01
3152  0F81              l_player_open_door_00113:
3153  0F81  79          	ld	a, c
3154  0F82  B7          	or	a, a
3155  0F83  20 06       	jr	NZ,l_player_open_door_00114
3156  0F85  3A 00 00    	ld	a,(_game_inmune)
3157  0F88  B7          	or	a, a
3158  0F89  28 31       	jr	Z,l_player_open_door_00117
3159  0F8B              l_player_open_door_00114:
3160  0F8B  3E 00       	ld	a, +((_scr_map) & 0xFF)
3161  0F8D  DD 86 04    	add	a,(ix+4)
3162  0F90  4F          	ld	c, a
3163  0F91  3E 00       	ld	a, +((_scr_map) / 256)
3164  0F93  DD 8E 05    	adc	a,(ix+5)
3165  0F96  47          	ld	b, a
3166  0F97  C5          	push	bc
3167  0F98  DD 6E 04    	ld	l,(ix+4)
3168  0F9B  DD 66 05    	ld	h,(ix+5)
3169  0F9E  E5          	push	hl
3170  0F9F  CD 00 00    	call	_game_match_back
3171  0FA2  F1          	pop	af
3172  0FA3  C1          	pop	bc
3173  0FA4  7D          	ld	a,l
3174  0FA5  02          	ld	(bc), a
3175  0FA6  DD 6E 04    	ld	l,(ix+4)
3176  0FA9  DD 66 05    	ld	h,(ix+5)
3177  0FAC  E5          	push	hl
3178  0FAD  CD 00 00    	call	_game_obj_set
3179  0FB0  F1          	pop	af
3180  0FB1  DD 6E 04    	ld	l,(ix+4)
3181  0FB4  DD 66 05    	ld	h,(ix+5)
3182  0FB7  E5          	push	hl
3183  0FB8  CD 00 00    	call	_spr_draw_index
3184  0FBB  F1          	pop	af
3185  0FBC              l_player_open_door_00117:
3186  0FBC  DD E1       	pop	ix
3187  0FBE  C9          	ret
3188  0FBF              	SECTION code_compiler
3189  0FBF              ;	---------------------------------
3190  0FBF              ; Function player_lost_life
3191  0FBF              ; ---------------------------------
3192  0FBF              _player_lost_life:
3193  0FBF  CD 00 00    	call	___sdcc_enter_ix
3194  0FC2  3B          	dec	sp
3195  0FC3  3A 07 00    	ld	a,(_lin + 0x0007)
3196  0FC6  32 00 00    	ld	(_s_lin0),a
3197  0FC9  3A 07 00    	ld	a,(_col + 0x0007)
3198  0FCC  32 00 00    	ld	(_s_col0),a
3199  0FCF  CD 00 00    	call	_spr_init_anim_bullets
3200  0FD2  01 00 00    	ld	bc,_anim_lin+0
3201  0FD5  16 00       	ld	d,0x00
3202  0FD7              l_player_lost_life_00115:
3203  0FD7  C5          	push	bc
3204  0FD8  D5          	push	de
3205  0FD9  21 00 00    	ld	hl,0x0000
3206  0FDC  E5          	push	hl
3207  0FDD  AF          	xor	a, a
3208  0FDE  5A          	ld	e,d
3209  0FDF  57          	ld	d,a
3210  0FE0  D5          	push	de
3211  0FE1  CD 00 00    	call	_NIRVANAP_spriteT_callee
3212  0FE4  D1          	pop	de
3213  0FE5  C1          	pop	bc
3214  0FE6  6A          	ld	l,d
3215  0FE7  26 00       	ld	h,0x00
3216  0FE9  09          	add	hl, bc
3217  0FEA  36 FF       	ld	(hl),0xff
3218  0FEC  14          	inc	d
3219  0FED  7A          	ld	a, d
3220  0FEE  D6 08       	sub	a,0x08
3221  0FF0  38 E5       	jr	C,l_player_lost_life_00115
3222  0FF2  21 00 00    	ld	hl,_anim_count
3223  0FF5  36 00       	ld	(hl),0x00
3224  0FF7  76          	halt
3225  0FF8  3A 00 00    	ld	a,(_s_lin0)
3226  0FFB  C6 F0       	add	a,0xf0
3227  0FFD  47          	ld	b, a
3228  0FFE  3A 00 00    	ld	a,(_s_col0)
3229  1001  21 00 00    	ld	hl,0x0000
3230  1004  E5          	push	hl
3231  1005  21 87 03    	ld	hl,0x0387
3232  1008  E5          	push	hl
3233  1009  48          	ld	c,b
3234  100A  47          	ld	b,a
3235  100B  C5          	push	bc
3236  100C  CD 00 00    	call	_spr_add_anim
3237  100F  F1          	pop	af
3238  1010  F1          	pop	af
3239  1011  F1          	pop	af
3240  1012  21 00 00    	ld	hl,_s_col0
3241  1015  46          	ld	b, (hl)
3242  1016  05          	dec	b
3243  1017  05          	dec	b
3244  1018  21 00 00    	ld	hl,0x0000
3245  101B  E5          	push	hl
3246  101C  21 87 03    	ld	hl,0x0387
3247  101F  E5          	push	hl
3248  1020  C5          	push	bc
3249  1021  33          	inc	sp
3250  1022  3A 00 00    	ld	a,(_s_lin0)
3251  1025  F5          	push	af
3252  1026  33          	inc	sp
3253  1027  CD 00 00    	call	_spr_add_anim
3254  102A  F1          	pop	af
3255  102B  F1          	pop	af
3256  102C  21 00 00    	ld	hl,0x0000
3257  102F  E3          	ex	(sp),hl
3258  1030  3A 00 00    	ld	a,(_s_col0)
3259  1033  21 87 03    	ld	hl,0x0387
3260  1036  E5          	push	hl
3261  1037  F5          	push	af
3262  1038  33          	inc	sp
3263  1039  3A 00 00    	ld	a,(_s_lin0)
3264  103C  F5          	push	af
3265  103D  33          	inc	sp
3266  103E  CD 00 00    	call	_spr_add_anim
3267  1041  F1          	pop	af
3268  1042  F1          	pop	af
3269  1043  F1          	pop	af
3270  1044  21 00 00    	ld	hl,_s_col0
3271  1047  46          	ld	b, (hl)
3272  1048  04          	inc	b
3273  1049  04          	inc	b
3274  104A  21 00 00    	ld	hl,0x0000
3275  104D  E5          	push	hl
3276  104E  21 87 03    	ld	hl,0x0387
3277  1051  E5          	push	hl
3278  1052  C5          	push	bc
3279  1053  33          	inc	sp
3280  1054  3A 00 00    	ld	a,(_s_lin0)
3281  1057  F5          	push	af
3282  1058  33          	inc	sp
3283  1059  CD 00 00    	call	_spr_add_anim
3284  105C  F1          	pop	af
3285  105D  F1          	pop	af
3286  105E  F1          	pop	af
3287  105F  3A 00 00    	ld	a,(_s_lin0)
3288  1062  C6 10       	add	a,0x10
3289  1064  47          	ld	b, a
3290  1065  3A 00 00    	ld	a,(_s_col0)
3291  1068  21 00 00    	ld	hl,0x0000
3292  106B  E5          	push	hl
3293  106C  21 87 03    	ld	hl,0x0387
3294  106F  E5          	push	hl
3295  1070  48          	ld	c,b
3296  1071  47          	ld	b,a
3297  1072  C5          	push	bc
3298  1073  CD 00 00    	call	_spr_add_anim
3299  1076  F1          	pop	af
3300  1077  F1          	pop	af
3301  1078  F1          	pop	af
3302  1079  2E 00       	ld	l,0x00
3303  107B  CD 00 00    	call	_zx_border_fastcall
3304  107E  DD 36 FF 01 	ld	(ix-1),0x01
3305  1082  2A 00 00    	ld	hl,(_curr_time)
3306  1085  22 00 00    	ld	(_anim_time),hl
3307  1088              l_player_lost_life_00107:
3308  1088  DD 7E FF    	ld	a,(ix-1)
3309  108B  B7          	or	a, a
3310  108C  28 28       	jr	Z,l_player_lost_life_00109
3311  108E  21 0C 00    	ld	hl,0x000c
3312  1091  E5          	push	hl
3313  1092  2A 00 00    	ld	hl,(_anim_time)
3314  1095  E5          	push	hl
3315  1096  CD 00 00    	call	_game_check_time
3316  1099  F1          	pop	af
3317  109A  F1          	pop	af
3318  109B  7D          	ld	a, l
3319  109C  B7          	or	a, a
3320  109D  28 E9       	jr	Z,l_player_lost_life_00107
3321  109F  2A 00 00    	ld	hl,(_curr_time)
3322  10A2  22 00 00    	ld	(_anim_time),hl
3323  10A5  3A 00 00    	ld	a,(_anim_count)
3324  10A8  B7          	or	a,a
3325  10A9  28 05       	jr	Z,l_player_lost_life_00103
3326  10AB  CD 00 00    	call	_spr_play_anim
3327  10AE  18 D8       	jr	l_player_lost_life_00107
3328  10B0              l_player_lost_life_00103:
3329  10B0  DD 36 FF 00 	ld	(ix-1),0x00
3330  10B4  18 D2       	jr	l_player_lost_life_00107
3331  10B6              l_player_lost_life_00109:
3332  10B6  21 00 00    	ld	hl,_sprite
3333  10B9  36 00       	ld	(hl),0x00
3334  10BB              l_player_lost_life_00117:
3335  10BB  3A 07 00    	ld	a,(_class + 0x0007)
3336  10BE  B7          	or	a, a
3337  10BF  28 1F       	jr	Z,l_player_lost_life_00111
3338  10C1  21 07 00    	ld	hl,+(_col + 0x0007)
3339  10C4  4E          	ld	c, (hl)
3340  10C5  21 07 00    	ld	hl,+(_lin + 0x0007)
3341  10C8  56          	ld	d, (hl)
3342  10C9  21 07 00    	ld	hl,+(_tile + 0x0007)
3343  10CC  5E          	ld	e, (hl)
3344  10CD  21 07 00    	ld	hl,+(_colint + 0x0007)
3345  10D0  46          	ld	b, (hl)
3346  10D1  7B          	ld	a, e
3347  10D2  80          	add	a, b
3348  10D3  5F          	ld	e, a
3349  10D4  79          	ld	a, c
3350  10D5  F5          	push	af
3351  10D6  33          	inc	sp
3352  10D7  3A 00 00    	ld	a,(_sprite)
3353  10DA  D5          	push	de
3354  10DB  F5          	push	af
3355  10DC  33          	inc	sp
3356  10DD  CD 00 00    	call	_NIRVANAP_spriteT_callee
3357  10E0              l_player_lost_life_00111:
3358  10E0  21 07 00    	ld	hl, +(_class + 0x0007)
3359  10E3  36 00       	ld	(hl),0x00
3360  10E5  21 07 00    	ld	hl, +(_bullet_col + 0x0007)
3361  10E8  36 FF       	ld	(hl),0xff
3362  10EA  21 00 00    	ld	hl,_sprite
3363  10ED  7E          	ld	a,(hl)
3364  10EE  3C          	inc	a
3365  10EF  77          	ld	(hl),a
3366  10F0  D6 07       	sub	a,0x07
3367  10F2  38 C7       	jr	C,l_player_lost_life_00117
3368  10F4  3A 00 00    	ld	a,(_player_lives)
3369  10F7  B7          	or	a, a
3370  10F8  28 09       	jr	Z,l_player_lost_life_00119
3371  10FA  21 F4 01    	ld	hl,0x01f4
3372  10FD  CD 00 00    	call	_z80_delay_ms_fastcall
3373  1100  CD 00 00    	call	_game_round_init
3374  1103              l_player_lost_life_00119:
3375  1103  33          	inc	sp
3376  1104  DD E1       	pop	ix
3377  1106  C9          	ret
3378  1107              	SECTION code_compiler
3379  1107              ;	---------------------------------
3380  1107              ; Function player_hit
3381  1107              ; ---------------------------------
3382  1107              _player_hit:
3383  1107  7D          	ld	a,l
3384  1108  4D          	ld	c,l
3385  1109  21 00 00    	ld	hl,_player_vita
3386  110C  96          	sub	a, (hl)
3387  110D  30 17       	jr	NC,l_player_hit_00107
3388  110F  3A 00 00    	ld	a,(_game_inmune)
3389  1112  B7          	or	a, a
3390  1113  20 06       	jr	NZ,l_player_hit_00102
3391  1115  21 00 00    	ld	hl,_player_vita
3392  1118  7E          	ld	a, (hl)
3393  1119  91          	sub	a, c
3394  111A  77          	ld	(hl), a
3395  111B              l_player_hit_00102:
3396  111B  2A 00 00    	ld	hl,(_curr_time)
3397  111E  22 00 00    	ld	(_player_hit_time),hl
3398  1121  CD 00 00    	call	_game_update_stats
3399  1124  18 2C       	jr	l_player_hit_00109
3400  1126              l_player_hit_00107:
3401  1126  21 00 00    	ld	hl,_player_vita
3402  1129  36 00       	ld	(hl),0x00
3403  112B  CD 00 00    	call	_game_update_stats
3404  112E  CD BF 0F    	call	_player_lost_life
3405  1131  21 00 00    	ld	hl,_player_lives
3406  1134  7E          	ld	a, (hl)
3407  1135  B7          	or	a, a
3408  1136  28 10       	jr	Z,l_player_hit_00104
3409  1138  35          	dec	(hl)
3410  1139  21 00 00    	ld	hl,_player_mana
3411  113C  36 64       	ld	(hl),0x64
3412  113E  21 00 00    	ld	hl,_player_vita
3413  1141  36 64       	ld	(hl),0x64
3414  1143  CD 00 00    	call	_game_update_stats
3415  1146  18 0A       	jr	l_player_hit_00109
3416  1148              l_player_hit_00104:
3417  1148  21 00 00    	ld	hl,_player_lives
3418  114B  36 00       	ld	(hl),0x00
3419  114D  21 00 00    	ld	hl,_game_over
3420  1150  36 01       	ld	(hl),0x01
3421  1152              l_player_hit_00109:
3422  1152  C9          	ret
3423  1153              	SECTION IGNORE
3424  0000              
