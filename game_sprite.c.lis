1     0000              MODULE game_sprite_c
2     0000              LINE -1, "game_sprite.c"
-1    0000              
0     0000              
1     0000              ;--------------------------------------------------------
2     0000              ; File Created by SDCC : free open source ANSI-C Compiler
3     0000              ; Version 3.6.9 #9958 (MSVC)
4     0000              ;--------------------------------------------------------
5     0000              ; Processed by Z88DK
6     0000              ;--------------------------------------------------------
7     0000              
8     0000              	EXTERN __divschar
9     0000              	EXTERN __divschar_callee
10    0000              	EXTERN __divsint
11    0000              	EXTERN __divsint_callee
12    0000              	EXTERN __divslong
13    0000              	EXTERN __divslong_callee
14    0000              	EXTERN __divslonglong
15    0000              	EXTERN __divslonglong_callee
16    0000              	EXTERN __divsuchar
17    0000              	EXTERN __divsuchar_callee
18    0000              	EXTERN __divuchar
19    0000              	EXTERN __divuchar_callee
20    0000              	EXTERN __divuint
21    0000              	EXTERN __divuint_callee
22    0000              	EXTERN __divulong
23    0000              	EXTERN __divulong_callee
24    0000              	EXTERN __divulonglong
25    0000              	EXTERN __divulonglong_callee
26    0000              	EXTERN __divuschar
27    0000              	EXTERN __divuschar_callee
28    0000              	EXTERN __modschar
29    0000              	EXTERN __modschar_callee
30    0000              	EXTERN __modsint
31    0000              	EXTERN __modsint_callee
32    0000              	EXTERN __modslong
33    0000              	EXTERN __modslong_callee
34    0000              	EXTERN __modslonglong
35    0000              	EXTERN __modslonglong_callee
36    0000              	EXTERN __modsuchar
37    0000              	EXTERN __modsuchar_callee
38    0000              	EXTERN __moduchar
39    0000              	EXTERN __moduchar_callee
40    0000              	EXTERN __moduint
41    0000              	EXTERN __moduint_callee
42    0000              	EXTERN __modulong
43    0000              	EXTERN __modulong_callee
44    0000              	EXTERN __modulonglong
45    0000              	EXTERN __modulonglong_callee
46    0000              	EXTERN __moduschar
47    0000              	EXTERN __moduschar_callee
48    0000              	EXTERN __mulint
49    0000              	EXTERN __mulint_callee
50    0000              	EXTERN __mullong
51    0000              	EXTERN __mullong_callee
52    0000              	EXTERN __mullonglong
53    0000              	EXTERN __mullonglong_callee
54    0000              	EXTERN __mulschar
55    0000              	EXTERN __mulschar_callee
56    0000              	EXTERN __mulsuchar
57    0000              	EXTERN __mulsuchar_callee
58    0000              	EXTERN __muluschar
59    0000              	EXTERN __muluschar_callee
60    0000              	EXTERN __rlslonglong
61    0000              	EXTERN __rlslonglong_callee
62    0000              	EXTERN __rlulonglong
63    0000              	EXTERN __rlulonglong_callee
64    0000              	EXTERN __rrslonglong
65    0000              	EXTERN __rrslonglong_callee
66    0000              	EXTERN __rrulonglong
67    0000              	EXTERN __rrulonglong_callee
68    0000              	EXTERN ___sdcc_call_hl
69    0000              	EXTERN ___sdcc_call_iy
70    0000              	EXTERN ___sdcc_enter_ix
71    0000              	EXTERN _banked_call
72    0000              	EXTERN _banked_ret
73    0000              	EXTERN ___fs2schar
74    0000              	EXTERN ___fs2schar_callee
75    0000              	EXTERN ___fs2sint
76    0000              	EXTERN ___fs2sint_callee
77    0000              	EXTERN ___fs2slong
78    0000              	EXTERN ___fs2slong_callee
79    0000              	EXTERN ___fs2slonglong
80    0000              	EXTERN ___fs2slonglong_callee
81    0000              	EXTERN ___fs2uchar
82    0000              	EXTERN ___fs2uchar_callee
83    0000              	EXTERN ___fs2uint
84    0000              	EXTERN ___fs2uint_callee
85    0000              	EXTERN ___fs2ulong
86    0000              	EXTERN ___fs2ulong_callee
87    0000              	EXTERN ___fs2ulonglong
88    0000              	EXTERN ___fs2ulonglong_callee
89    0000              	EXTERN ___fsadd
90    0000              	EXTERN ___fsadd_callee
91    0000              	EXTERN ___fsdiv
92    0000              	EXTERN ___fsdiv_callee
93    0000              	EXTERN ___fseq
94    0000              	EXTERN ___fseq_callee
95    0000              	EXTERN ___fsgt
96    0000              	EXTERN ___fsgt_callee
97    0000              	EXTERN ___fslt
98    0000              	EXTERN ___fslt_callee
99    0000              	EXTERN ___fsmul
100   0000              	EXTERN ___fsmul_callee
101   0000              	EXTERN ___fsneq
102   0000              	EXTERN ___fsneq_callee
103   0000              	EXTERN ___fssub
104   0000              	EXTERN ___fssub_callee
105   0000              	EXTERN ___schar2fs
106   0000              	EXTERN ___schar2fs_callee
107   0000              	EXTERN ___sint2fs
108   0000              	EXTERN ___sint2fs_callee
109   0000              	EXTERN ___slong2fs
110   0000              	EXTERN ___slong2fs_callee
111   0000              	EXTERN ___slonglong2fs
112   0000              	EXTERN ___slonglong2fs_callee
113   0000              	EXTERN ___uchar2fs
114   0000              	EXTERN ___uchar2fs_callee
115   0000              	EXTERN ___uint2fs
116   0000              	EXTERN ___uint2fs_callee
117   0000              	EXTERN ___ulong2fs
118   0000              	EXTERN ___ulong2fs_callee
119   0000              	EXTERN ___ulonglong2fs
120   0000              	EXTERN ___ulonglong2fs_callee
121   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
122   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
123   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
126   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
127   0000              	EXTERN ____sdcc_4_ldi_save_bc
128   0000              	EXTERN ____sdcc_4_push_hlix
129   0000              	EXTERN ____sdcc_4_push_mhl
130   0000              	EXTERN ____sdcc_lib_setmem_hl
131   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
132   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
133   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
134   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
135   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
136   0000              	EXTERN ____sdcc_ll_add_deix_hlix
137   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
138   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
139   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
140   0000              	EXTERN ____sdcc_ll_asr_hlix_a
141   0000              	EXTERN ____sdcc_ll_asr_mbc_a
142   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
143   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
144   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
145   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
146   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
147   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
148   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
149   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
150   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
151   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
152   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
153   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
155   0000              	EXTERN ____sdcc_ll_push_hlix
156   0000              	EXTERN ____sdcc_ll_push_mhl
157   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
158   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
159   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
160   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
161   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
162   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
163   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
164   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
165   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
166   0000              	EXTERN ____sdcc_load_debc_deix
167   0000              	EXTERN ____sdcc_load_dehl_deix
168   0000              	EXTERN ____sdcc_load_debc_mhl
169   0000              	EXTERN ____sdcc_load_hlde_mhl
170   0000              	EXTERN ____sdcc_store_dehl_bcix
171   0000              	EXTERN ____sdcc_store_debc_hlix
172   0000              	EXTERN ____sdcc_store_debc_mhl
173   0000              	EXTERN ____sdcc_cpu_pop_ei
174   0000              	EXTERN ____sdcc_cpu_pop_ei_jp
175   0000              	EXTERN ____sdcc_cpu_push_di
176   0000              	EXTERN ____sdcc_outi
177   0000              	EXTERN ____sdcc_outi_128
178   0000              	EXTERN ____sdcc_outi_256
179   0000              	EXTERN ____sdcc_ldi
180   0000              	EXTERN ____sdcc_ldi_128
181   0000              	EXTERN ____sdcc_ldi_256
182   0000              	EXTERN ____sdcc_4_copy_srcd_hlix_dst_deix
183   0000              	EXTERN ____sdcc_4_and_src_mbc_mhl_dst_deix
184   0000              	EXTERN ____sdcc_4_or_src_mbc_mhl_dst_deix
185   0000              	EXTERN ____sdcc_4_xor_src_mbc_mhl_dst_deix
186   0000              	EXTERN ____sdcc_4_or_src_dehl_dst_bcix
187   0000              	EXTERN ____sdcc_4_xor_src_dehl_dst_bcix
188   0000              	EXTERN ____sdcc_4_and_src_dehl_dst_bcix
189   0000              	EXTERN ____sdcc_4_xor_src_mbc_mhl_dst_debc
190   0000              	EXTERN ____sdcc_4_or_src_mbc_mhl_dst_debc
191   0000              	EXTERN ____sdcc_4_and_src_mbc_mhl_dst_debc
192   0000              	EXTERN ____sdcc_4_cpl_src_mhl_dst_debc
193   0000              	EXTERN ____sdcc_4_xor_src_debc_mhl_dst_debc
194   0000              	EXTERN ____sdcc_4_or_src_debc_mhl_dst_debc
195   0000              	EXTERN ____sdcc_4_and_src_debc_mhl_dst_debc
196   0000              	EXTERN ____sdcc_4_and_src_debc_hlix_dst_debc
197   0000              	EXTERN ____sdcc_4_or_src_debc_hlix_dst_debc
198   0000              	EXTERN ____sdcc_4_xor_src_debc_hlix_dst_debc
199   0000              
200   0000              ;--------------------------------------------------------
201   0000              ; Public variables in this module
202   0000              ;--------------------------------------------------------
203   0000              	GLOBAL _spr_bullet_player_colision
204   0000              	GLOBAL _spr_bullet_enemy_colision
205   0000              	GLOBAL _spr_bullet_axe
206   0000              	GLOBAL _spr_bullet_fireball
207   0000              	GLOBAL _spr_calc_index
208   0000              	GLOBAL _spr_chktime
209   0000              	GLOBAL _spr_set_up
210   0000              	GLOBAL _spr_set_down
211   0000              	GLOBAL _spr_set_left
212   0000              	GLOBAL _spr_set_right
213   0000              	GLOBAL _spr_move_up
214   0000              	GLOBAL _spr_move_down
215   0000              	GLOBAL _spr_move_horizontal
216   0000              	GLOBAL _spr_move_right
217   0000              	GLOBAL _spr_move_left
218   0000              	GLOBAL _spr_page_right
219   0000              	GLOBAL _spr_page_left
220   0000              	GLOBAL _spr_page_down
221   0000              	GLOBAL _spr_page_up
222   0000              	GLOBAL _spr_clear_scr
223   0000              	GLOBAL _spr_page_map
224   0000              	GLOBAL _spr_paint_player
225   0000              	GLOBAL _spr_paint
226   0000              	GLOBAL _spr_destroy
227   0000              	GLOBAL _spr_tile
228   0000              	GLOBAL _spr_tile_dir
229   0000              	GLOBAL _spr_brick_anim
230   0000              	GLOBAL _spr_draw_index
231   0000              	GLOBAL _spr_back_repaint
232   0000              	GLOBAL _spr_tile_paint
233   0000              	GLOBAL _spr_init_effects
234   0000              	GLOBAL _spr_add_anim
235   0000              	GLOBAL _spr_play_anim
236   0000              	GLOBAL _spr_colision_b
237   0000              	GLOBAL _spr_colision_boss
238   0000              	GLOBAL _spr_bullets_play
239   0000              	GLOBAL _spr_bullet_explode
240   0000              	GLOBAL _spr_turn_horizontal
241   0000              	GLOBAL _spr_btile_paint_back
242   0000              	GLOBAL _spr_flatten
243   0000              	GLOBAL _spr_unflattenP1
244   0000              ;--------------------------------------------------------
245   0000              ; Externals used
246   0000              ;--------------------------------------------------------
247   0000              	GLOBAL _ulltoa_callee
248   0000              	GLOBAL _ulltoa
249   0000              	GLOBAL _strtoull_callee
250   0000              	GLOBAL _strtoull
251   0000              	GLOBAL _strtoll_callee
252   0000              	GLOBAL _strtoll
253   0000              	GLOBAL _lltoa_callee
254   0000              	GLOBAL _lltoa
255   0000              	GLOBAL _llabs_callee
256   0000              	GLOBAL _llabs
257   0000              	GLOBAL __lldivu__callee
258   0000              	GLOBAL __lldivu_
259   0000              	GLOBAL __lldiv__callee
260   0000              	GLOBAL __lldiv_
261   0000              	GLOBAL _atoll_callee
262   0000              	GLOBAL _atoll
263   0000              	GLOBAL _realloc_unlocked_callee
264   0000              	GLOBAL _realloc_unlocked
265   0000              	GLOBAL _malloc_unlocked_fastcall
266   0000              	GLOBAL _malloc_unlocked
267   0000              	GLOBAL _free_unlocked_fastcall
268   0000              	GLOBAL _free_unlocked
269   0000              	GLOBAL _calloc_unlocked_callee
270   0000              	GLOBAL _calloc_unlocked
271   0000              	GLOBAL _aligned_alloc_unlocked_callee
272   0000              	GLOBAL _aligned_alloc_unlocked
273   0000              	GLOBAL _realloc_callee
274   0000              	GLOBAL _realloc
275   0000              	GLOBAL _malloc_fastcall
276   0000              	GLOBAL _malloc
277   0000              	GLOBAL _free_fastcall
278   0000              	GLOBAL _free
279   0000              	GLOBAL _calloc_callee
280   0000              	GLOBAL _calloc
281   0000              	GLOBAL _aligned_alloc_callee
282   0000              	GLOBAL _aligned_alloc
283   0000              	GLOBAL _utoa_callee
284   0000              	GLOBAL _utoa
285   0000              	GLOBAL _ultoa_callee
286   0000              	GLOBAL _ultoa
287   0000              	GLOBAL _system_fastcall
288   0000              	GLOBAL _system
289   0000              	GLOBAL _strtoul_callee
290   0000              	GLOBAL _strtoul
291   0000              	GLOBAL _strtol_callee
292   0000              	GLOBAL _strtol
293   0000              	GLOBAL _strtof_callee
294   0000              	GLOBAL _strtof
295   0000              	GLOBAL _strtod_callee
296   0000              	GLOBAL _strtod
297   0000              	GLOBAL _srand_fastcall
298   0000              	GLOBAL _srand
299   0000              	GLOBAL _rand
300   0000              	GLOBAL _quick_exit_fastcall
301   0000              	GLOBAL _quick_exit
302   0000              	GLOBAL _qsort_callee
303   0000              	GLOBAL _qsort
304   0000              	GLOBAL _ltoa_callee
305   0000              	GLOBAL _ltoa
306   0000              	GLOBAL _labs_fastcall
307   0000              	GLOBAL _labs
308   0000              	GLOBAL _itoa_callee
309   0000              	GLOBAL _itoa
310   0000              	GLOBAL _ftoh_callee
311   0000              	GLOBAL _ftoh
312   0000              	GLOBAL _ftog_callee
313   0000              	GLOBAL _ftog
314   0000              	GLOBAL _ftoe_callee
315   0000              	GLOBAL _ftoe
316   0000              	GLOBAL _ftoa_callee
317   0000              	GLOBAL _ftoa
318   0000              	GLOBAL _exit_fastcall
319   0000              	GLOBAL _exit
320   0000              	GLOBAL _dtoh_callee
321   0000              	GLOBAL _dtoh
322   0000              	GLOBAL _dtog_callee
323   0000              	GLOBAL _dtog
324   0000              	GLOBAL _dtoe_callee
325   0000              	GLOBAL _dtoe
326   0000              	GLOBAL _dtoa_callee
327   0000              	GLOBAL _dtoa
328   0000              	GLOBAL _bsearch_callee
329   0000              	GLOBAL _bsearch
330   0000              	GLOBAL _atol_fastcall
331   0000              	GLOBAL _atol
332   0000              	GLOBAL _atoi_fastcall
333   0000              	GLOBAL _atoi
334   0000              	GLOBAL _atof_fastcall
335   0000              	GLOBAL _atof
336   0000              	GLOBAL _atexit_fastcall
337   0000              	GLOBAL _atexit
338   0000              	GLOBAL _at_quick_exit_fastcall
339   0000              	GLOBAL _at_quick_exit
340   0000              	GLOBAL _abs_fastcall
341   0000              	GLOBAL _abs
342   0000              	GLOBAL _abort
343   0000              	GLOBAL __strtou__callee
344   0000              	GLOBAL __strtou_
345   0000              	GLOBAL __strtoi__callee
346   0000              	GLOBAL __strtoi_
347   0000              	GLOBAL __random_uniform_xor_8__fastcall
348   0000              	GLOBAL __random_uniform_xor_8_
349   0000              	GLOBAL __random_uniform_xor_32__fastcall
350   0000              	GLOBAL __random_uniform_xor_32_
351   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
352   0000              	GLOBAL __random_uniform_cmwc_8_
353   0000              	GLOBAL __shellsort__callee
354   0000              	GLOBAL __shellsort_
355   0000              	GLOBAL __quicksort__callee
356   0000              	GLOBAL __quicksort_
357   0000              	GLOBAL __insertion_sort__callee
358   0000              	GLOBAL __insertion_sort_
359   0000              	GLOBAL __ldivu__callee
360   0000              	GLOBAL __ldivu_
361   0000              	GLOBAL __ldiv__callee
362   0000              	GLOBAL __ldiv_
363   0000              	GLOBAL __divu__callee
364   0000              	GLOBAL __divu_
365   0000              	GLOBAL __div__callee
366   0000              	GLOBAL __div_
367   0000              	GLOBAL _NIRVANAP_drawTW_raw_callee
368   0000              	GLOBAL _NIRVANAP_drawTW_raw
369   0000              	GLOBAL _NIRVANAP_drawTW_callee
370   0000              	GLOBAL _NIRVANAP_drawTW
371   0000              	GLOBAL _NIRVANAP_drawW_raw_callee
372   0000              	GLOBAL _NIRVANAP_drawW_raw
373   0000              	GLOBAL _NIRVANAP_drawW_callee
374   0000              	GLOBAL _NIRVANAP_drawW
375   0000              	GLOBAL _NIRVANAP_spriteT_callee
376   0000              	GLOBAL _NIRVANAP_spriteT
377   0000              	GLOBAL _NIRVANAP_fillC_callee
378   0000              	GLOBAL _NIRVANAP_fillC
379   0000              	GLOBAL _NIRVANAP_readC_callee
380   0000              	GLOBAL _NIRVANAP_readC
381   0000              	GLOBAL _NIRVANAP_paintC_callee
382   0000              	GLOBAL _NIRVANAP_paintC
383   0000              	GLOBAL _NIRVANAP_printC_callee
384   0000              	GLOBAL _NIRVANAP_printC
385   0000              	GLOBAL _NIRVANAP_fillT_raw_callee
386   0000              	GLOBAL _NIRVANAP_fillT_raw
387   0000              	GLOBAL _NIRVANAP_fillT_callee
388   0000              	GLOBAL _NIRVANAP_fillT
389   0000              	GLOBAL _NIRVANAP_drawT_raw_callee
390   0000              	GLOBAL _NIRVANAP_drawT_raw
391   0000              	GLOBAL _NIRVANAP_drawT_callee
392   0000              	GLOBAL _NIRVANAP_drawT
393   0000              	GLOBAL _NIRVANAP_stop
394   0000              	GLOBAL _NIRVANAP_start
395   0000              	GLOBAL _debug3
396   0000              	GLOBAL _debug2
397   0000              	GLOBAL _debug
398   0000              	GLOBAL _zx_print_str
399   0000              	GLOBAL _zx_print_int
400   0000              	GLOBAL _zx_print_chr
401   0000              	GLOBAL _zx_print_bonus_time
402   0000              	GLOBAL _zx_isr
403   0000              	GLOBAL _z80_otdr_callee
404   0000              	GLOBAL _z80_otdr
405   0000              	GLOBAL _z80_otir_callee
406   0000              	GLOBAL _z80_otir
407   0000              	GLOBAL _z80_outp_callee
408   0000              	GLOBAL _z80_outp
409   0000              	GLOBAL _z80_indr_callee
410   0000              	GLOBAL _z80_indr
411   0000              	GLOBAL _z80_inir_callee
412   0000              	GLOBAL _z80_inir
413   0000              	GLOBAL _z80_inp_fastcall
414   0000              	GLOBAL _z80_inp
415   0000              	GLOBAL _z80_set_int_state_fastcall
416   0000              	GLOBAL _z80_set_int_state
417   0000              	GLOBAL _z80_get_int_state
418   0000              	GLOBAL _z80_delay_tstate_fastcall
419   0000              	GLOBAL _z80_delay_tstate
420   0000              	GLOBAL _z80_delay_ms_fastcall
421   0000              	GLOBAL _z80_delay_ms
422   0000              	GLOBAL _im2_remove_generic_callback_callee
423   0000              	GLOBAL _im2_remove_generic_callback
424   0000              	GLOBAL _im2_prepend_generic_callback_callee
425   0000              	GLOBAL _im2_prepend_generic_callback
426   0000              	GLOBAL _im2_append_generic_callback_callee
427   0000              	GLOBAL _im2_append_generic_callback
428   0000              	GLOBAL _im2_create_generic_isr_8080_callee
429   0000              	GLOBAL _im2_create_generic_isr_8080
430   0000              	GLOBAL _im2_create_generic_isr_callee
431   0000              	GLOBAL _im2_create_generic_isr
432   0000              	GLOBAL _im2_install_isr_callee
433   0000              	GLOBAL _im2_install_isr
434   0000              	GLOBAL _im2_init_fastcall
435   0000              	GLOBAL _im2_init
436   0000              	GLOBAL _intrinsic_swap_word_32_fastcall
437   0000              	GLOBAL _intrinsic_swap_word_32
438   0000              	GLOBAL _intrinsic_swap_endian_32_fastcall
439   0000              	GLOBAL _intrinsic_swap_endian_32
440   0000              	GLOBAL _intrinsic_swap_endian_16_fastcall
441   0000              	GLOBAL _intrinsic_swap_endian_16
442   0000              	GLOBAL _intrinsic_return_de
443   0000              	GLOBAL _intrinsic_return_bc
444   0000              	GLOBAL _intrinsic_exx
445   0000              	GLOBAL _intrinsic_ex_de_hl
446   0000              	GLOBAL _intrinsic_nop
447   0000              	GLOBAL _intrinsic_im_2
448   0000              	GLOBAL _intrinsic_im_1
449   0000              	GLOBAL _intrinsic_im_0
450   0000              	GLOBAL _intrinsic_retn
451   0000              	GLOBAL _intrinsic_reti
452   0000              	GLOBAL _intrinsic_halt
453   0000              	GLOBAL _intrinsic_ei
454   0000              	GLOBAL _intrinsic_di
455   0000              	GLOBAL _intrinsic_stub
456   0000              	GLOBAL _intrinsic_outi
457   0000              	GLOBAL _intrinsic_ldi
458   0000              	GLOBAL _zx_pattern_fill_callee
459   0000              	GLOBAL _zx_pattern_fill
460   0000              	GLOBAL _zx_saddrpup_fastcall
461   0000              	GLOBAL _zx_saddrpup
462   0000              	GLOBAL _zx_saddrpright_callee
463   0000              	GLOBAL _zx_saddrpright
464   0000              	GLOBAL _zx_saddrpleft_callee
465   0000              	GLOBAL _zx_saddrpleft
466   0000              	GLOBAL _zx_saddrpdown_fastcall
467   0000              	GLOBAL _zx_saddrpdown
468   0000              	GLOBAL _zx_saddrcup_fastcall
469   0000              	GLOBAL _zx_saddrcup
470   0000              	GLOBAL _zx_saddrcright_fastcall
471   0000              	GLOBAL _zx_saddrcright
472   0000              	GLOBAL _zx_saddrcleft_fastcall
473   0000              	GLOBAL _zx_saddrcleft
474   0000              	GLOBAL _zx_saddrcdown_fastcall
475   0000              	GLOBAL _zx_saddrcdown
476   0000              	GLOBAL _zx_saddr2py_fastcall
477   0000              	GLOBAL _zx_saddr2py
478   0000              	GLOBAL _zx_saddr2px_fastcall
479   0000              	GLOBAL _zx_saddr2px
480   0000              	GLOBAL _zx_saddr2cy_fastcall
481   0000              	GLOBAL _zx_saddr2cy
482   0000              	GLOBAL _zx_saddr2cx_fastcall
483   0000              	GLOBAL _zx_saddr2cx
484   0000              	GLOBAL _zx_saddr2aaddr_fastcall
485   0000              	GLOBAL _zx_saddr2aaddr
486   0000              	GLOBAL _zx_py2saddr_fastcall
487   0000              	GLOBAL _zx_py2saddr
488   0000              	GLOBAL _zx_py2aaddr_fastcall
489   0000              	GLOBAL _zx_py2aaddr
490   0000              	GLOBAL _zx_pxy2saddr_callee
491   0000              	GLOBAL _zx_pxy2saddr
492   0000              	GLOBAL _zx_pxy2aaddr_callee
493   0000              	GLOBAL _zx_pxy2aaddr
494   0000              	GLOBAL _zx_px2bitmask_fastcall
495   0000              	GLOBAL _zx_px2bitmask
496   0000              	GLOBAL _zx_cy2saddr_fastcall
497   0000              	GLOBAL _zx_cy2saddr
498   0000              	GLOBAL _zx_cy2aaddr_fastcall
499   0000              	GLOBAL _zx_cy2aaddr
500   0000              	GLOBAL _zx_cxy2saddr_callee
501   0000              	GLOBAL _zx_cxy2saddr
502   0000              	GLOBAL _zx_cxy2aaddr_callee
503   0000              	GLOBAL _zx_cxy2aaddr
504   0000              	GLOBAL _zx_bitmask2px_fastcall
505   0000              	GLOBAL _zx_bitmask2px
506   0000              	GLOBAL _zx_aaddrcup_fastcall
507   0000              	GLOBAL _zx_aaddrcup
508   0000              	GLOBAL _zx_aaddrcright_fastcall
509   0000              	GLOBAL _zx_aaddrcright
510   0000              	GLOBAL _zx_aaddrcleft_fastcall
511   0000              	GLOBAL _zx_aaddrcleft
512   0000              	GLOBAL _zx_aaddrcdown_fastcall
513   0000              	GLOBAL _zx_aaddrcdown
514   0000              	GLOBAL _zx_aaddr2saddr_fastcall
515   0000              	GLOBAL _zx_aaddr2saddr
516   0000              	GLOBAL _zx_aaddr2py_fastcall
517   0000              	GLOBAL _zx_aaddr2py
518   0000              	GLOBAL _zx_aaddr2px_fastcall
519   0000              	GLOBAL _zx_aaddr2px
520   0000              	GLOBAL _zx_aaddr2cy_fastcall
521   0000              	GLOBAL _zx_aaddr2cy
522   0000              	GLOBAL _zx_aaddr2cx_fastcall
523   0000              	GLOBAL _zx_aaddr2cx
524   0000              	GLOBAL _zx_visit_wc_pix_callee
525   0000              	GLOBAL _zx_visit_wc_pix
526   0000              	GLOBAL _zx_visit_wc_attr_callee
527   0000              	GLOBAL _zx_visit_wc_attr
528   0000              	GLOBAL _zx_scroll_wc_up_pix_callee
529   0000              	GLOBAL _zx_scroll_wc_up_pix
530   0000              	GLOBAL _zx_scroll_wc_up_attr_callee
531   0000              	GLOBAL _zx_scroll_wc_up_attr
532   0000              	GLOBAL _zx_scroll_wc_up_callee
533   0000              	GLOBAL _zx_scroll_wc_up
534   0000              	GLOBAL _zx_scroll_up_pix_callee
535   0000              	GLOBAL _zx_scroll_up_pix
536   0000              	GLOBAL _zx_scroll_up_attr_callee
537   0000              	GLOBAL _zx_scroll_up_attr
538   0000              	GLOBAL _zx_scroll_up_callee
539   0000              	GLOBAL _zx_scroll_up
540   0000              	GLOBAL _zx_cls_wc_pix_callee
541   0000              	GLOBAL _zx_cls_wc_pix
542   0000              	GLOBAL _zx_cls_wc_attr_callee
543   0000              	GLOBAL _zx_cls_wc_attr
544   0000              	GLOBAL _zx_cls_wc_callee
545   0000              	GLOBAL _zx_cls_wc
546   0000              	GLOBAL _zx_cls_pix_fastcall
547   0000              	GLOBAL _zx_cls_pix
548   0000              	GLOBAL _zx_cls_attr_fastcall
549   0000              	GLOBAL _zx_cls_attr
550   0000              	GLOBAL _zx_cls_fastcall
551   0000              	GLOBAL _zx_cls
552   0000              	GLOBAL _zx_border_fastcall
553   0000              	GLOBAL _zx_border
554   0000              	GLOBAL _zx_tape_verify_block_callee
555   0000              	GLOBAL _zx_tape_verify_block
556   0000              	GLOBAL _zx_tape_save_block_callee
557   0000              	GLOBAL _zx_tape_save_block
558   0000              	GLOBAL _zx_tape_load_block_callee
559   0000              	GLOBAL _zx_tape_load_block
560   0000              	GLOBAL _audio_levelup
561   0000              	GLOBAL _audio_checkpoint
562   0000              	GLOBAL _audio_menu
563   0000              	GLOBAL _audio_game_end
564   0000              	GLOBAL _audio_level_complete
565   0000              	GLOBAL _audio_level_start
566   0000              	GLOBAL _audio_lotr_lose_a_life
567   0000              	GLOBAL _audio_mushroom
568   0000              	GLOBAL _audio_puerta
569   0000              	GLOBAL _audio_sin_mana
570   0000              	GLOBAL _audio_magic1
571   0000              	GLOBAL _audio_coin
572   0000              	GLOBAL _audio_golpe
573   0000              	GLOBAL _audio_salto
574   0000              	GLOBAL _audio_efecto
575   0000              	GLOBAL _audio_disparo_fire
576   0000              	GLOBAL _audio_disparo_axe
577   0000              	GLOBAL _audio_disparo2
578   0000              	GLOBAL _audio_disparo1
579   0000              	GLOBAL _audio_respawn
580   0000              	GLOBAL _audio_explosion1
581   0000              	GLOBAL _audio_explosion
582   0000              	GLOBAL _audio_ingame
583   0000              	GLOBAL _player_fix_walk_lin
584   0000              	GLOBAL _player_gasta_brick
585   0000              	GLOBAL _player_lost_life
586   0000              	GLOBAL _player_damage
587   0000              	GLOBAL _player_open_door
588   0000              	GLOBAL _player_move_jump
589   0000              	GLOBAL _player_fire
590   0000              	GLOBAL _player_check_stairs_vertical
591   0000              	GLOBAL _player_check_stairs
592   0000              	GLOBAL _player_tile
593   0000              	GLOBAL _player_anim_stairs
594   0000              	GLOBAL _player_pick_item
595   0000              	GLOBAL _player_check_floor
596   0000              	GLOBAL _player_hit_platform_clear
597   0000              	GLOBAL _player_score_add
598   0000              	GLOBAL _player_hit_platform
599   0000              	GLOBAL _player_move_input
600   0000              	GLOBAL _player_turn
601   0000              	GLOBAL _player_move
602   0000              	GLOBAL _player_action_jump
603   0000              	GLOBAL _player_action_fire
604   0000              	GLOBAL _player_check_input
605   0000              	GLOBAL _player_pick_mushroom
606   0000              	GLOBAL _player_collision
607   0000              	GLOBAL _player_init
608   0000              	GLOBAL _game_match_back_strict
609   0000              	GLOBAL _game_match_back
610   0000              	GLOBAL _game_attribs
611   0000              	GLOBAL _game_boss_clear
612   0000              	GLOBAL _game_boss_kill
613   0000              	GLOBAL _game_obj_clear
614   0000              	GLOBAL _game_obj_chk
615   0000              	GLOBAL _game_obj_set
616   0000              	GLOBAL _game_shoot_fire_boss
617   0000              	GLOBAL _game_shoot_fire
618   0000              	GLOBAL _game_add_enemy
619   0000              	GLOBAL _game_print_header
620   0000              	GLOBAL _game_check_time
621   0000              	GLOBAL _game_rotate_attrib_osd
622   0000              	GLOBAL _game_rotate_attrib
623   0000              	GLOBAL _game_colour_message
624   0000              	GLOBAL _game_paint_attrib
625   0000              	GLOBAL _game_print_score
626   0000              	GLOBAL _game_check_cell
627   0000              	GLOBAL _game_check_map
628   0000              	GLOBAL _game_loop
629   0000              	GLOBAL _game_round_init
630   0000              	GLOBAL _game_set_checkpoint
631   0000              	GLOBAL _game_start_timer
632   0000              	GLOBAL _game_update_stats
633   0000              	GLOBAL _game_print_footer
634   0000              	GLOBAL _game_fill_row
635   0000              	GLOBAL _game_cls
636   0000              	GLOBAL _game_fps
637   0000              	GLOBAL _game_respawn
638   0000              	GLOBAL _game_draw_screen
639   0000              	GLOBAL _boss_draw_frame
640   0000              	GLOBAL _boss_draw
641   0000              	GLOBAL _boss_turn
642   0000              	GLOBAL _enemy_avoid_dead
643   0000              	GLOBAL _enemy_avoid_fall
644   0000              	GLOBAL _enemy_kill
645   0000              	GLOBAL _enemy_respawn
646   0000              	GLOBAL _enemy_init
647   0000              	GLOBAL _enemy_move
648   0000              	GLOBAL _enemy_turn
649   0000              	GLOBAL _enemy_static
650   0000              	GLOBAL _enemy_walk
651   0000              	GLOBAL _enemy_horizontal
652   0000              	GLOBAL _enemy_vertical
653   0000              	GLOBAL _ay_reset
654   0000              	GLOBAL _ay_song_stop
655   0000              	GLOBAL _ay_song_play
656   0000              	GLOBAL _ay_fx_stop
657   0000              	GLOBAL _ay_fx_play
658   0000              	GLOBAL _ay_is_playing
659   0000              	GLOBAL _test_func
660   0000              	GLOBAL _test_proc
661   0000              	GLOBAL _in_mouse_kempston_wheel_delta
662   0000              	GLOBAL _in_mouse_kempston_wheel
663   0000              	GLOBAL _in_mouse_kempston_callee
664   0000              	GLOBAL _in_mouse_kempston
665   0000              	GLOBAL _in_mouse_kempston_setpos_callee
666   0000              	GLOBAL _in_mouse_kempston_setpos
667   0000              	GLOBAL _in_mouse_kempston_reset
668   0000              	GLOBAL _in_mouse_kempston_init
669   0000              	GLOBAL _in_mouse_amx_wheel_delta
670   0000              	GLOBAL _in_mouse_amx_wheel
671   0000              	GLOBAL _in_mouse_amx_callee
672   0000              	GLOBAL _in_mouse_amx
673   0000              	GLOBAL _in_mouse_amx_setpos_callee
674   0000              	GLOBAL _in_mouse_amx_setpos
675   0000              	GLOBAL _in_mouse_amx_reset
676   0000              	GLOBAL _in_mouse_amx_init_callee
677   0000              	GLOBAL _in_mouse_amx_init
678   0000              	GLOBAL _in_stick_sinclair2
679   0000              	GLOBAL _in_stick_sinclair1
680   0000              	GLOBAL _in_stick_kempston
681   0000              	GLOBAL _in_stick_fuller
682   0000              	GLOBAL _in_stick_cursor
683   0000              	GLOBAL _in_stick_keyboard_fastcall
684   0000              	GLOBAL _in_stick_keyboard
685   0000              	GLOBAL _in_wait_nokey
686   0000              	GLOBAL _in_wait_key
687   0000              	GLOBAL _in_test_key
688   0000              	GLOBAL _in_pause_fastcall
689   0000              	GLOBAL _in_pause
690   0000              	GLOBAL _in_key_scancode_fastcall
691   0000              	GLOBAL _in_key_scancode
692   0000              	GLOBAL _in_key_pressed_fastcall
693   0000              	GLOBAL _in_key_pressed
694   0000              	GLOBAL _in_inkey
695   0000              	GLOBAL _NIRVANAP_CHAR_TABLE
696   0000              	GLOBAL _NIRVANAP_WIDE_IMAGES
697   0000              	GLOBAL _NIRVANAP_TILE_IMAGES
698   0000              	GLOBAL _NIRVANAP_HOLE
699   0000              	GLOBAL _NIRVANAP_ISR_HOOK
700   0000              	GLOBAL _scan_map
701   0000              	GLOBAL _key_map
702   0000              	GLOBAL _player_lvl_table
703   0000              	GLOBAL _stp_row
704   0000              	GLOBAL _stp_col
705   0000              	GLOBAL _stp_tile
706   0000              	GLOBAL _map_paper_last_a
707   0000              	GLOBAL _map_paper_last
708   0000              	GLOBAL _map_paper_clr
709   0000              	GLOBAL _map_paper
710   0000              	GLOBAL _draw_count
711   0000              	GLOBAL _g_player_hit_right
712   0000              	GLOBAL _g_player_hit_left
713   0000              	GLOBAL _bullet_count
714   0000              	GLOBAL _spr_hack
715   0000              	GLOBAL _boss_stat
716   0000              	GLOBAL _boss_time_fire
717   0000              	GLOBAL _boss_time
718   0000              	GLOBAL _boss_tile
719   0000              	GLOBAL _boss_inc
720   0000              	GLOBAL _boss_col
721   0000              	GLOBAL _boss_lin
722   0000              	GLOBAL _bullet
723   0000              	GLOBAL _bullet_vel
724   0000              	GLOBAL _bullet_frames
725   0000              	GLOBAL _bullet_colint
726   0000              	GLOBAL _bullet_dir
727   0000              	GLOBAL _bullet_tile
728   0000              	GLOBAL _bullet_col
729   0000              	GLOBAL _bullet_lin
730   0000              	GLOBAL _bullet_col0
731   0000              	GLOBAL _bullet_lin0
732   0000              	GLOBAL _bullet_max
733   0000              	GLOBAL _bullet_class
734   0000              	GLOBAL _mush_class
735   0000              	GLOBAL _mush_index
736   0000              	GLOBAL _anim_count
737   0000              	GLOBAL _anim_respanwn
738   0000              	GLOBAL _anim_loop
739   0000              	GLOBAL _anim_end
740   0000              	GLOBAL _anim_int
741   0000              	GLOBAL _anim_tile
742   0000              	GLOBAL _anim_col
743   0000              	GLOBAL _anim_lin
744   0000              	GLOBAL _map_heigth
745   0000              	GLOBAL _map_width
746   0000              	GLOBAL _scr_curr
747   0000              	GLOBAL _sprite_kind
748   0000              	GLOBAL _scr_obj1
749   0000              	GLOBAL _scr_obj0
750   0000              	GLOBAL _scr_map
751   0000              	GLOBAL _sprite_speed_alt
752   0000              	GLOBAL _spr_init
753   0000              	GLOBAL _spr_map_tile
754   0000              	GLOBAL _sprite_frames
755   0000              	GLOBAL _sprite_speed
756   0000              	GLOBAL _screen_ink
757   0000              	GLOBAL _screen_paper
758   0000              	GLOBAL _player_onstair
759   0000              	GLOBAL _game_start_scr
760   0000              	GLOBAL _game_respawn_tile
761   0000              	GLOBAL _game_respawn_index
762   0000              	GLOBAL _game_respawn_time
763   0000              	GLOBAL _game_score_top
764   0000              	GLOBAL _player_coins
765   0000              	GLOBAL _player_lives
766   0000              	GLOBAL _game_over
767   0000              	GLOBAL _game_sound
768   0000              	GLOBAL _game_inf_lives
769   0000              	GLOBAL _game_inmune
770   0000              	GLOBAL _sprite_curr_index
771   0000              	GLOBAL _spr_count
772   0000              	GLOBAL _bullet_time
773   0000              	GLOBAL _anim_time
774   0000              	GLOBAL _frame_time
775   0000              	GLOBAL _curr_time
776   0000              	GLOBAL _s_state
777   0000              	GLOBAL _attrib_osd
778   0000              	GLOBAL _attrib_hl
779   0000              	GLOBAL _attrib
780   0000              	GLOBAL _zx_val_asm
781   0000              	GLOBAL _enemies
782   0000              	GLOBAL _tmp_ui
783   0000              	GLOBAL _tmp_sc
784   0000              	GLOBAL _tmp_uc
785   0000              	GLOBAL _tmp1
786   0000              	GLOBAL _tmp0
787   0000              	GLOBAL _tmp
788   0000              	GLOBAL _index1
789   0000              	GLOBAL _index0
790   0000              	GLOBAL _loop_count
791   0000              	GLOBAL _s_class
792   0000              	GLOBAL _s_col1
793   0000              	GLOBAL _s_col0
794   0000              	GLOBAL _s_lin1
795   0000              	GLOBAL _s_lin0
796   0000              	GLOBAL _s_tile1
797   0000              	GLOBAL _s_tile0
798   0000              	GLOBAL _player_brick_time
799   0000              	GLOBAL _player_hit_count
800   0000              	GLOBAL _game_debug
801   0000              	GLOBAL _sprite_horizontal_check
802   0000              	GLOBAL _sprite_on_air
803   0000              	GLOBAL _sprite
804   0000              	GLOBAL _fps
805   0000              	GLOBAL _menu_curr_sel
806   0000              	GLOBAL _game_control_fire_lock
807   0000              	GLOBAL _game_control_mode
808   0000              	GLOBAL _game_respawn_curr_time
809   0000              	GLOBAL _game_round_up
810   0000              	GLOBAL _game_mush_count
811   0000              	GLOBAL _game_song_play_start
812   0000              	GLOBAL _game_song_play
813   0000              	GLOBAL _game_boss_fix
814   0000              	GLOBAL _game_boss_hit
815   0000              	GLOBAL _game_boss_alive
816   0000              	GLOBAL _game_boss
817   0000              	GLOBAL _game_world
818   0000              	GLOBAL _game_gravity
819   0000              	GLOBAL _player_onfire
820   0000              	GLOBAL _player_anim_stair
821   0000              	GLOBAL _player_hit_time
822   0000              	GLOBAL _game_checkpoint_scr
823   0000              	GLOBAL _game_checkpoint_lin
824   0000              	GLOBAL _game_checkpoint_col
825   0000              	GLOBAL _player_jump_check
826   0000              	GLOBAL _player_lin_scr
827   0000              	GLOBAL _player_col_scr
828   0000              	GLOBAL _player_lvl
829   0000              	GLOBAL _player_int
830   0000              	GLOBAL _player_str
831   0000              	GLOBAL _player_max_vita
832   0000              	GLOBAL _player_max_mana
833   0000              	GLOBAL _player_vita
834   0000              	GLOBAL _player_mana
835   0000              	GLOBAL _player_keys
836   0000              	GLOBAL _player_vel_inc
837   0000              	GLOBAL _player_vel_y1
838   0000              	GLOBAL _player_vel_y0
839   0000              	GLOBAL _player_vel_y
840   0000              	GLOBAL _player_vel_x
841   0000              	GLOBAL _player_score
842   0000              	GLOBAL _last_time
843   0000              	GLOBAL _spr_timer
844   0000              	GLOBAL _jump_lin
845   0000              	GLOBAL _player_hit_col
846   0000              	GLOBAL _player_hit_lin
847   0000              	GLOBAL _colint
848   0000              	GLOBAL _col
849   0000              	GLOBAL _tbuffer
850   0000              	GLOBAL _lin
851   0000              	GLOBAL _tile
852   0000              	GLOBAL _state_a
853   0000              	GLOBAL _state
854   0000              	GLOBAL _class
855   0000              	GLOBAL _dirs_alt
856   0000              	GLOBAL _dirs
857   0000              	GLOBAL _k2
858   0000              	GLOBAL _k1
859   0000              	GLOBAL _joyfunc2
860   0000              	GLOBAL _joyfunc1
861   0000              	GLOBAL _btiles
862   0000              	GLOBAL _spec128
863   0000              	GLOBAL _GLOBAL_ZX_PORT_7FFD
864   0000              	GLOBAL _GLOBAL_ZX_PORT_1FFD
865   0000              	GLOBAL _GLOBAL_ZX_PORT_FE
866   0000              	GLOBAL _ay_fx_06_disparo_fire
867   0000              	GLOBAL _ay_fx_06_disparo_axe
868   0000              	GLOBAL _ay_fx_06_respawn
869   0000              	GLOBAL _ay_fx_06_explosion1
870   0000              	GLOBAL _ay_fx_06_efecto
871   0000              	GLOBAL _ay_fx_06_disparo2
872   0000              	GLOBAL _ay_fx_06_disparo1
873   0000              	GLOBAL _ay_fx_06_checkpoint
874   0000              	GLOBAL _ay_fx_06_levelup
875   0000              	GLOBAL _ay_fx_06_mushroom
876   0000              	GLOBAL _ay_fx_06_magic
877   0000              	GLOBAL _ay_fx_06_sin_mana
878   0000              	GLOBAL _ay_fx_06_salto
879   0000              	GLOBAL _ay_fx_06_puerta
880   0000              	GLOBAL _ay_fx_06_magic1
881   0000              	GLOBAL _ay_fx_06_golpe
882   0000              	GLOBAL _ay_fx_06_explosion
883   0000              	GLOBAL _ay_fx_06_dano_por_toque
884   0000              	GLOBAL _ay_fx_06_coin
885   0000              	GLOBAL _ay_song_06_lotr_level_start
886   0000              	GLOBAL _ay_song_06_lotr_level_complete
887   0000              	GLOBAL _ay_song_06_lotr_lose_a_life
888   0000              	GLOBAL _ay_song_04_ciel
889   0000              	GLOBAL _ay_song_04_lotr
890   0000              	GLOBAL _ay_song_04_luna
891   0000              	GLOBAL _ay_song_04_sunflower
892   0000              	GLOBAL _world0_h
893   0000              	GLOBAL _world0_w
894   0000              	GLOBAL _world0
895   0000              	GLOBAL _paper0
896   0000              	GLOBAL _lenght0
897   0000              	GLOBAL _start_scr0
898   0000              ;--------------------------------------------------------
899   0000              ; special function registers
900   0000              ;--------------------------------------------------------
901   0000              defc _IO_FE	=	0x00fe
902   0000              defc _IO_1FFD	=	0x1ffd
903   0000              defc _IO_7FFD	=	0x7ffd
904   0000              ;--------------------------------------------------------
905   0000              ; ram data
906   0000              ;--------------------------------------------------------
907   0000              	SECTION bss_compiler
908   0000              ;--------------------------------------------------------
909   0000              ; ram data
910   0000              ;--------------------------------------------------------
911   0000              
912   0000              IF 0
913   0000              
914   0000              ; .area _INITIALIZED removed by z88dk
915   0000              
916   0000              
917   0000              ENDIF
918   0000              
919   0000              ;--------------------------------------------------------
920   0000              ; absolute external ram data
921   0000              ;--------------------------------------------------------
922   0000              	SECTION IGNORE
923   0000              ;--------------------------------------------------------
924   0000              ; global & static initialisations
925   0000              ;--------------------------------------------------------
926   0000              	SECTION code_crt_init
927   0000              ;--------------------------------------------------------
928   0000              ; Home
929   0000              ;--------------------------------------------------------
930   0000              	SECTION IGNORE
931   0000              ;--------------------------------------------------------
932   0000              ; code
933   0000              ;--------------------------------------------------------
934   0000              	SECTION code_compiler
935   0000              ;	---------------------------------
936   0000              ; Function spr_calc_index
937   0000              ; ---------------------------------
938   0000              _spr_calc_index:
939   0000  CD 00 00    	call	___sdcc_enter_ix
940   0003  DD 4E 05    	ld	c,(ix+5)
941   0006  CB 39       	srl	c
942   0008  06 00       	ld	b,0x00
943   000A  DD 7E 04    	ld	a,(ix+4)
944   000D  07          	rlca
945   000E  07          	rlca
946   000F  07          	rlca
947   0010  07          	rlca
948   0011  E6 0F       	and	a,0x0f
949   0013  6F          	ld	l, a
950   0014  26 00       	ld	h,0x00
951   0016  29          	add	hl, hl
952   0017  29          	add	hl, hl
953   0018  29          	add	hl, hl
954   0019  29          	add	hl, hl
955   001A  09          	add	hl, bc
956   001B  DD E1       	pop	ix
957   001D  C9          	ret
958   001E              	SECTION code_compiler
959   001E              ;	---------------------------------
960   001E              ; Function spr_chktime
961   001E              ; ---------------------------------
962   001E              _spr_chktime:
963   001E  5E          	ld	e,(hl)
964   001F  16 00       	ld	d,0x00
965   0021  4D          	ld	c,l
966   0022  44          	ld	b,h
967   0023  21 00 00    	ld	hl,_sprite_speed_alt
968   0026  19          	add	hl, de
969   0027  7E          	ld	a, (hl)
970   0028  B7          	or	a,a
971   0029  20 15       	jr	NZ,l_spr_chktime_00102
972   002B  57          	ld	d,a
973   002C  21 00 00    	ld	hl,_class
974   002F  19          	add	hl, de
975   0030  56          	ld	d, (hl)
976   0031  3E 00       	ld	a, +((_sprite_speed) & 0xFF)
977   0033  82          	add	a, d
978   0034  6F          	ld	l, a
979   0035  3E 00       	ld	a, +((_sprite_speed) / 256)
980   0037  CE 00       	adc	a,0x00
981   0039  67          	ld	h, a
982   003A  7E          	ld	a, (hl)
983   003B  32 00 00    	ld	(_tmp),a
984   003E  18 03       	jr	l_spr_chktime_00103
985   0040              l_spr_chktime_00102:
986   0040  32 00 00    	ld	(_tmp),a
987   0043              l_spr_chktime_00103:
988   0043  26 00       	ld	h,0x00
989   0045  6B          	ld	l, e
990   0046  29          	add	hl, hl
991   0047  11 00 00    	ld	de,_last_time
992   004A  19          	add	hl, de
993   004B  3A 00 00    	ld	a,(_tmp)
994   004E  EB          	ex	de,hl
995   004F  C5          	push	bc
996   0050  F5          	push	af
997   0051  33          	inc	sp
998   0052  D5          	push	de
999   0053  CD 00 00    	call	_game_check_time
1000  0056  F1          	pop	af
1001  0057  33          	inc	sp
1002  0058  C1          	pop	bc
1003  0059  7D          	ld	a,l
1004  005A  B7          	or	a, a
1005  005B  28 14       	jr	Z,l_spr_chktime_00105
1006  005D  0A          	ld	a, (bc)
1007  005E  6F          	ld	l, a
1008  005F  26 00       	ld	h,0x00
1009  0061  29          	add	hl, hl
1010  0062  01 00 00    	ld	bc,_last_time
1011  0065  09          	add	hl,bc
1012  0066  ED 5B 00 00 	ld	de,(_curr_time)
1013  006A  73          	ld	(hl),e
1014  006B  23          	inc	hl
1015  006C  72          	ld	(hl),d
1016  006D  2E 01       	ld	l,0x01
1017  006F  18 02       	jr	l_spr_chktime_00106
1018  0071              l_spr_chktime_00105:
1019  0071  2E 00       	ld	l,0x00
1020  0073              l_spr_chktime_00106:
1021  0073  C9          	ret
1022  0074              	SECTION code_compiler
1023  0074              ;	---------------------------------
1024  0074              ; Function spr_set_up
1025  0074              ; ---------------------------------
1026  0074              _spr_set_up:
1027  0074  CB C6       	set	0, (hl)
1028  0076  7E          	ld	a, (hl)
1029  0077  E6 FD       	and	a,0xfd
1030  0079  77          	ld	(hl), a
1031  007A  C9          	ret
1032  007B              	SECTION code_compiler
1033  007B              ;	---------------------------------
1034  007B              ; Function spr_set_down
1035  007B              ; ---------------------------------
1036  007B              _spr_set_down:
1037  007B  CB CE       	set	1, (hl)
1038  007D  7E          	ld	a, (hl)
1039  007E  E6 FE       	and	a,0xfe
1040  0080  77          	ld	(hl), a
1041  0081  C9          	ret
1042  0082              	SECTION code_compiler
1043  0082              ;	---------------------------------
1044  0082              ; Function spr_set_left
1045  0082              ; ---------------------------------
1046  0082              _spr_set_left:
1047  0082  CB DE       	set	3, (hl)
1048  0084  7E          	ld	a, (hl)
1049  0085  E6 FB       	and	a,0xfb
1050  0087  77          	ld	(hl), a
1051  0088  C9          	ret
1052  0089              	SECTION code_compiler
1053  0089              ;	---------------------------------
1054  0089              ; Function spr_set_right
1055  0089              ; ---------------------------------
1056  0089              _spr_set_right:
1057  0089  CB D6       	set	2, (hl)
1058  008B  7E          	ld	a, (hl)
1059  008C  E6 F7       	and	a,0xf7
1060  008E  77          	ld	(hl), a
1061  008F  C9          	ret
1062  0090              	SECTION code_compiler
1063  0090              ;	---------------------------------
1064  0090              ; Function spr_move_up
1065  0090              ; ---------------------------------
1066  0090              _spr_move_up:
1067  0090  2A 00 00    	ld	hl,(_sprite)
1068  0093  26 00       	ld	h,0x00
1069  0095  01 00 00    	ld	bc,_lin
1070  0098  09          	add	hl,bc
1071  0099  4E          	ld	c,(hl)
1072  009A  3E 10       	ld	a,0x10
1073  009C  91          	sub	a,c
1074  009D  38 16       	jr	C,l_spr_move_up_00109
1075  009F  3A 00 00    	ld	a,(_sprite)
1076  00A2  D6 07       	sub	a,0x07
1077  00A4  20 0B       	jr	NZ,l_spr_move_up_00104
1078  00A6  CD 44 04    	call	_spr_page_up
1079  00A9  7D          	ld	a, l
1080  00AA  B7          	or	a, a
1081  00AB  28 04       	jr	Z,l_spr_move_up_00104
1082  00AD  2E 00       	ld	l,0x00
1083  00AF  18 50       	jr	l_spr_move_up_00111
1084  00B1              l_spr_move_up_00104:
1085  00B1  2E 01       	ld	l,0x01
1086  00B3  18 4C       	jr	l_spr_move_up_00111
1087  00B5              l_spr_move_up_00109:
1088  00B5  79          	ld	a, c
1089  00B6  C6 FE       	add	a,0xfe
1090  00B8  32 00 00    	ld	(_s_lin1),a
1091  00BB  07          	rlca
1092  00BC  07          	rlca
1093  00BD  07          	rlca
1094  00BE  07          	rlca
1095  00BF  E6 0F       	and	a,0x0f
1096  00C1  4F          	ld	c, a
1097  00C2  3A 00 00    	ld	a,(_s_lin0)
1098  00C5  07          	rlca
1099  00C6  07          	rlca
1100  00C7  07          	rlca
1101  00C8  07          	rlca
1102  00C9  E6 0F       	and	a,0x0f
1103  00CB  47          	ld	b, a
1104  00CC  79          	ld	a, c
1105  00CD  90          	sub	a, b
1106  00CE  20 04       	jr	NZ,l_spr_move_up_00135
1107  00D0  3E 01       	ld	a,0x01
1108  00D2  18 01       	jr	l_spr_move_up_00136
1109  00D4              l_spr_move_up_00135:
1110  00D4  AF          	xor	a,a
1111  00D5              l_spr_move_up_00136:
1112  00D5  EE 01       	xor	a,0x01
1113  00D7  28 19       	jr	Z,l_spr_move_up_00106
1114  00D9  2A 00 00    	ld	hl,(_sprite)
1115  00DC  26 00       	ld	h,0x00
1116  00DE  01 00 00    	ld	bc,_col
1117  00E1  09          	add	hl,bc
1118  00E2  2A 00 00    	ld	hl, (_s_lin1)
1119  00E5  E5          	push	hl
1120  00E6  CD 00 00    	call	_game_check_map
1121  00E9  F1          	pop	af
1122  00EA  7C          	ld	a,h
1123  00EB  B5          	or	a,l
1124  00EC  28 04       	jr	Z,l_spr_move_up_00106
1125  00EE  2E 01       	ld	l,0x01
1126  00F0  18 0F       	jr	l_spr_move_up_00111
1127  00F2              l_spr_move_up_00106:
1128  00F2  2A 00 00    	ld	hl,(_sprite)
1129  00F5  26 00       	ld	h,0x00
1130  00F7  01 00 00    	ld	bc,_lin
1131  00FA  09          	add	hl,bc
1132  00FB  3A 00 00    	ld	a,(_s_lin1)
1133  00FE  77          	ld	(hl),a
1134  00FF  2E 00       	ld	l,0x00
1135  0101              l_spr_move_up_00111:
1136  0101  C9          	ret
1137  0102              	SECTION code_compiler
1138  0102              ;	---------------------------------
1139  0102              ; Function spr_move_down
1140  0102              ; ---------------------------------
1141  0102              _spr_move_down:
1142  0102  2A 00 00    	ld	hl,(_sprite)
1143  0105  26 00       	ld	h,0x00
1144  0107  01 00 00    	ld	bc,_lin
1145  010A  09          	add	hl,bc
1146  010B  7E          	ld	a,(hl)
1147  010C  FE 90       	cp	a,0x90
1148  010E  38 2C       	jr	C,l_spr_move_down_00112
1149  0110  3A 00 00    	ld	a,(_sprite)
1150  0113  D6 07       	sub	a,0x07
1151  0115  28 04       	jr	Z,l_spr_move_down_00137
1152  0117  4D          	ld	c,l
1153  0118  44          	ld	b,h
1154  0119  18 1A       	jr	l_spr_move_down_00105
1155  011B              l_spr_move_down_00137:
1156  011B  CD F5 03    	call	_spr_page_down
1157  011E  7D          	ld	a, l
1158  011F  B7          	or	a, a
1159  0120  28 04       	jr	Z,l_spr_move_down_00102
1160  0122  2E 01       	ld	l,0x01
1161  0124  18 63       	jr	l_spr_move_down_00114
1162  0126              l_spr_move_down_00102:
1163  0126  2A 00 00    	ld	hl,(_sprite)
1164  0129  26 00       	ld	h,0x00
1165  012B  01 00 00    	ld	bc,_lin
1166  012E  09          	add	hl,bc
1167  012F  36 90       	ld	(hl),0x90
1168  0131  2E 01       	ld	l,0x01
1169  0133  18 54       	jr	l_spr_move_down_00114
1170  0135              l_spr_move_down_00105:
1171  0135  3E 90       	ld	a,0x90
1172  0137  02          	ld	(bc), a
1173  0138  2E 01       	ld	l,0x01
1174  013A  18 4D       	jr	l_spr_move_down_00114
1175  013C              l_spr_move_down_00112:
1176  013C  C6 10       	add	a,0x10
1177  013E  32 00 00    	ld	(_s_lin1),a
1178  0141  07          	rlca
1179  0142  07          	rlca
1180  0143  07          	rlca
1181  0144  07          	rlca
1182  0145  E6 0F       	and	a,0x0f
1183  0147  4F          	ld	c, a
1184  0148  3A 00 00    	ld	a,(_s_lin0)
1185  014B  07          	rlca
1186  014C  07          	rlca
1187  014D  07          	rlca
1188  014E  07          	rlca
1189  014F  E6 0F       	and	a,0x0f
1190  0151  47          	ld	b, a
1191  0152  79          	ld	a, c
1192  0153  90          	sub	a, b
1193  0154  20 04       	jr	NZ,l_spr_move_down_00138
1194  0156  3E 01       	ld	a,0x01
1195  0158  18 01       	jr	l_spr_move_down_00139
1196  015A              l_spr_move_down_00138:
1197  015A  AF          	xor	a,a
1198  015B              l_spr_move_down_00139:
1199  015B  EE 01       	xor	a,0x01
1200  015D  28 19       	jr	Z,l_spr_move_down_00110
1201  015F  2A 00 00    	ld	hl,(_sprite)
1202  0162  26 00       	ld	h,0x00
1203  0164  01 00 00    	ld	bc,_col
1204  0167  09          	add	hl,bc
1205  0168  2A 00 00    	ld	hl, (_s_lin1)
1206  016B  E5          	push	hl
1207  016C  CD 00 00    	call	_game_check_map
1208  016F  F1          	pop	af
1209  0170  7C          	ld	a,h
1210  0171  B5          	or	a,l
1211  0172  28 04       	jr	Z,l_spr_move_down_00110
1212  0174  2E 01       	ld	l,0x01
1213  0176  18 11       	jr	l_spr_move_down_00114
1214  0178              l_spr_move_down_00110:
1215  0178  2A 00 00    	ld	hl,(_sprite)
1216  017B  26 00       	ld	h,0x00
1217  017D  01 00 00    	ld	bc,_lin
1218  0180  09          	add	hl,bc
1219  0181  3A 00 00    	ld	a,(_s_lin1)
1220  0184  C6 F2       	add	a,0xf2
1221  0186  77          	ld	(hl),a
1222  0187  2E 00       	ld	l,0x00
1223  0189              l_spr_move_down_00114:
1224  0189  C9          	ret
1225  018A              	SECTION code_compiler
1226  018A              ;	---------------------------------
1227  018A              ; Function spr_move_horizontal
1228  018A              ; ---------------------------------
1229  018A              _spr_move_horizontal:
1230  018A  2A 00 00    	ld	hl,(_sprite)
1231  018D  26 00       	ld	h,0x00
1232  018F  01 00 00    	ld	bc,_state
1233  0192  09          	add	hl,bc
1234  0193  7E          	ld	a,(hl)
1235  0194  CB 57       	bit	2, a
1236  0196  28 05       	jr	Z,l_spr_move_horizontal_00104
1237  0198  CD A9 01    	call	_spr_move_right
1238  019B  18 0B       	jr	l_spr_move_horizontal_00106
1239  019D              l_spr_move_horizontal_00104:
1240  019D  CB 5F       	bit	3, a
1241  019F  28 05       	jr	Z,l_spr_move_horizontal_00105
1242  01A1  CD 9D 02    	call	_spr_move_left
1243  01A4  18 02       	jr	l_spr_move_horizontal_00106
1244  01A6              l_spr_move_horizontal_00105:
1245  01A6  2E 00       	ld	l,0x00
1246  01A8              l_spr_move_horizontal_00106:
1247  01A8  C9          	ret
1248  01A9              	SECTION code_compiler
1249  01A9              ;	---------------------------------
1250  01A9              ; Function spr_move_right
1251  01A9              ; ---------------------------------
1252  01A9              _spr_move_right:
1253  01A9  2A 00 00    	ld	hl,(_sprite)
1254  01AC  26 00       	ld	h,0x00
1255  01AE  01 00 00    	ld	bc,_colint
1256  01B1  09          	add	hl,bc
1257  01B2  7E          	ld	a,(hl)
1258  01B3  3C          	inc	a
1259  01B4  77          	ld	(hl),a
1260  01B5  4F          	ld	c, a
1261  01B6  2A 00 00    	ld	hl,(_s_class)
1262  01B9  26 00       	ld	h,0x00
1263  01BB  11 00 00    	ld	de,_sprite_frames
1264  01BE  19          	add	hl,de
1265  01BF  7E          	ld	a,(hl)
1266  01C0  91          	sub	a, c
1267  01C1  C2 9A 02    	jp	NZ,l_spr_move_right_00118
1268  01C4  2A 00 00    	ld	hl,(_sprite)
1269  01C7  26 00       	ld	h,0x00
1270  01C9  01 00 00    	ld	bc,_lin
1271  01CC  09          	add	hl,bc
1272  01CD  7E          	ld	a,(hl)
1273  01CE  32 00 00    	ld	(_s_lin1),a
1274  01D1  2A 00 00    	ld	hl,(_sprite)
1275  01D4  26 00       	ld	h,0x00
1276  01D6  01 00 00    	ld	bc,_col
1277  01D9  09          	add	hl,bc
1278  01DA  7E          	ld	a,(hl)
1279  01DB  FE 1E       	cp	a,0x1e
1280  01DD  30 5E       	jr	NC,l_spr_move_right_00108
1281  01DF  3C          	inc	a
1282  01E0  32 00 00    	ld	(_s_col1),a
1283  01E3  21 00 00    	ld	hl,_sprite_horizontal_check
1284  01E6  36 01       	ld	(hl),0x01
1285  01E8  2A FF FF    	ld	hl,(_s_col1 - 1)
1286  01EB  3A 00 00    	ld	a,(_s_lin1)
1287  01EE  6F          	ld	l,a
1288  01EF  E5          	push	hl
1289  01F0  CD 00 00    	call	_game_check_map
1290  01F3  F1          	pop	af
1291  01F4  7D          	ld	a,l
1292  01F5  32 00 00    	ld	(_tmp0),a
1293  01F8  B7          	or	a, a
1294  01F9  20 13       	jr	NZ,l_spr_move_right_00102
1295  01FB  3A 00 00    	ld	a,(_s_lin1)
1296  01FE  C6 0F       	add	a,0x0f
1297  0200  4F          	ld	c, a
1298  0201  3A 00 00    	ld	a, (_s_col1)
1299  0204  47          	ld	b,a
1300  0205  C5          	push	bc
1301  0206  CD 00 00    	call	_game_check_map
1302  0209  F1          	pop	af
1303  020A  7D          	ld	a,l
1304  020B  32 00 00    	ld	(_tmp0),a
1305  020E              l_spr_move_right_00102:
1306  020E  21 00 00    	ld	hl,_sprite_horizontal_check
1307  0211  36 00       	ld	(hl),0x00
1308  0213  3A 00 00    	ld	a,(_tmp0)
1309  0216  B7          	or	a, a
1310  0217  28 24       	jr	Z,l_spr_move_right_00108
1311  0219  2A 00 00    	ld	hl,(_sprite)
1312  021C  26 00       	ld	h,0x00
1313  021E  01 00 00    	ld	bc,_colint
1314  0221  09          	add	hl,bc
1315  0222  7E          	ld	a,(hl)
1316  0223  C6 FF       	add	a,0xff
1317  0225  77          	ld	(hl),a
1318  0226  3A 00 00    	ld	a,(_sprite_on_air)
1319  0229  B7          	or	a,a
1320  022A  20 0D       	jr	NZ,l_spr_move_right_00104
1321  022C  2A 00 00    	ld	hl,(_sprite)
1322  022F  26 00       	ld	h,0x00
1323  0231  01 00 00    	ld	bc,_colint
1324  0234  09          	add	hl,bc
1325  0235  7E          	ld	a,(hl)
1326  0236  C6 FF       	add	a,0xff
1327  0238  77          	ld	(hl),a
1328  0239              l_spr_move_right_00104:
1329  0239  2E 01       	ld	l,0x01
1330  023B  18 5F       	jr	l_spr_move_right_00119
1331  023D              l_spr_move_right_00108:
1332  023D  2A 00 00    	ld	hl,(_sprite)
1333  0240  26 00       	ld	h,0x00
1334  0242  01 00 00    	ld	bc,_col
1335  0245  09          	add	hl,bc
1336  0246  34          	inc	(hl)
1337  0247  2A 00 00    	ld	hl,(_sprite)
1338  024A  26 00       	ld	h,0x00
1339  024C  01 00 00    	ld	bc,_colint
1340  024F  09          	add	hl,bc
1341  0250  AF          	xor	a,a
1342  0251  77          	ld	(hl),a
1343  0252  2A 00 00    	ld	hl,(_sprite)
1344  0255  26 00       	ld	h,0x00
1345  0257  01 00 00    	ld	bc,_col
1346  025A  09          	add	hl,bc
1347  025B  5E          	ld	e,(hl)
1348  025C  3E 1E       	ld	a,0x1e
1349  025E  93          	sub	a,e
1350  025F  30 39       	jr	NC,l_spr_move_right_00118
1351  0261  3A 00 00    	ld	a,(_sprite)
1352  0264  D6 07       	sub	a,0x07
1353  0266  28 04       	jr	Z,l_spr_move_right_00156
1354  0268  4D          	ld	c,l
1355  0269  44          	ld	b,h
1356  026A  18 27       	jr	l_spr_move_right_00113
1357  026C              l_spr_move_right_00156:
1358  026C  CD 93 03    	call	_spr_page_right
1359  026F  3A 00 00    	ld	a,(_sprite)
1360  0272  C6 00       	add	a,+((_col) & 0xFF)
1361  0274  4D          	ld	c,l
1362  0275  5F          	ld	e,a
1363  0276  3E 00       	ld	a,+((_col) / 256)
1364  0278  CE 00       	adc	a,0x00
1365  027A  57          	ld	d,a
1366  027B  79          	ld	a, c
1367  027C  B7          	or	a, a
1368  027D  28 0F       	jr	Z,l_spr_move_right_00110
1369  027F  AF          	xor	a, a
1370  0280  12          	ld	(de), a
1371  0281  3A 07 00    	ld	a,(_lin + 7)
1372  0284  32 00 00    	ld	(_player_lin_scr),a
1373  0287  21 00 00    	ld	hl,_player_col_scr
1374  028A  36 00       	ld	(hl),0x00
1375  028C  18 08       	jr	l_spr_move_right_00114
1376  028E              l_spr_move_right_00110:
1377  028E  3E 1E       	ld	a,0x1e
1378  0290  12          	ld	(de), a
1379  0291  18 03       	jr	l_spr_move_right_00114
1380  0293              l_spr_move_right_00113:
1381  0293  3E 1E       	ld	a,0x1e
1382  0295  02          	ld	(bc), a
1383  0296              l_spr_move_right_00114:
1384  0296  2E 01       	ld	l,0x01
1385  0298  18 02       	jr	l_spr_move_right_00119
1386  029A              l_spr_move_right_00118:
1387  029A  2E 00       	ld	l,0x00
1388  029C              l_spr_move_right_00119:
1389  029C  C9          	ret
1390  029D              	SECTION code_compiler
1391  029D              ;	---------------------------------
1392  029D              ; Function spr_move_left
1393  029D              ; ---------------------------------
1394  029D              _spr_move_left:
1395  029D  01 00 00    	ld	bc,_colint+0
1396  02A0  79          	ld	a, c
1397  02A1  21 00 00    	ld	hl,_sprite
1398  02A4  86          	add	a, (hl)
1399  02A5  5F          	ld	e, a
1400  02A6  78          	ld	a, b
1401  02A7  CE 00       	adc	a,0x00
1402  02A9  57          	ld	d, a
1403  02AA  1A          	ld	a, (de)
1404  02AB  C6 FF       	add	a,0xff
1405  02AD  12          	ld	(de), a
1406  02AE  79          	ld	a, c
1407  02AF  86          	add	a, (hl)
1408  02B0  5F          	ld	e, a
1409  02B1  78          	ld	a, b
1410  02B2  CE 00       	adc	a,0x00
1411  02B4  57          	ld	d, a
1412  02B5  1A          	ld	a, (de)
1413  02B6  3C          	inc	a
1414  02B7  C2 90 03    	jp	NZ,l_spr_move_left_00118
1415  02BA  5E          	ld	e,(hl)
1416  02BB  16 00       	ld	d,0x00
1417  02BD  21 00 00    	ld	hl,_lin
1418  02C0  19          	add	hl,de
1419  02C1  7E          	ld	a,(hl)
1420  02C2  32 00 00    	ld	(_s_lin1),a
1421  02C5  2A 00 00    	ld	hl,(_sprite)
1422  02C8  26 00       	ld	h,0x00
1423  02CA  11 00 00    	ld	de,_col
1424  02CD  19          	add	hl,de
1425  02CE  7E          	ld	a,(hl)
1426  02CF  B7          	or	a, a
1427  02D0  28 58       	jr	Z,l_spr_move_left_00108
1428  02D2  C6 FF       	add	a,0xff
1429  02D4  32 00 00    	ld	(_s_col1),a
1430  02D7  21 00 00    	ld	hl,_sprite_horizontal_check
1431  02DA  36 01       	ld	(hl),0x01
1432  02DC  3A 00 00    	ld	a,(_s_col1)
1433  02DF  2A 00 00    	ld	hl,(_s_lin1)
1434  02E2  C5          	push	bc
1435  02E3  67          	ld	h,a
1436  02E4  E5          	push	hl
1437  02E5  CD 00 00    	call	_game_check_map
1438  02E8  F1          	pop	af
1439  02E9  C1          	pop	bc
1440  02EA  7D          	ld	a,l
1441  02EB  32 00 00    	ld	(_tmp0),a
1442  02EE  B7          	or	a, a
1443  02EF  20 16       	jr	NZ,l_spr_move_left_00102
1444  02F1  3A 00 00    	ld	a,(_s_lin1)
1445  02F4  C6 0F       	add	a,0x0f
1446  02F6  57          	ld	d, a
1447  02F7  3A 00 00    	ld	a,(_s_col1)
1448  02FA  C5          	push	bc
1449  02FB  5A          	ld	e,d
1450  02FC  57          	ld	d,a
1451  02FD  D5          	push	de
1452  02FE  CD 00 00    	call	_game_check_map
1453  0301  F1          	pop	af
1454  0302  C1          	pop	bc
1455  0303  7D          	ld	a,l
1456  0304  32 00 00    	ld	(_tmp0),a
1457  0307              l_spr_move_left_00102:
1458  0307  21 00 00    	ld	hl,_sprite_horizontal_check
1459  030A  36 00       	ld	(hl),0x00
1460  030C  3A 00 00    	ld	a,(_tmp0)
1461  030F  B7          	or	a, a
1462  0310  28 18       	jr	Z,l_spr_move_left_00108
1463  0312  2A 00 00    	ld	hl,(_sprite)
1464  0315  26 00       	ld	h,0x00
1465  0317  09          	add	hl,bc
1466  0318  34          	inc	(hl)
1467  0319  3A 00 00    	ld	a,(_sprite_on_air)
1468  031C  B7          	or	a, a
1469  031D  20 07       	jr	NZ,l_spr_move_left_00104
1470  031F  2A 00 00    	ld	hl,(_sprite)
1471  0322  26 00       	ld	h,0x00
1472  0324  09          	add	hl,bc
1473  0325  34          	inc	(hl)
1474  0326              l_spr_move_left_00104:
1475  0326  2E 01       	ld	l,0x01
1476  0328  18 68       	jr	l_spr_move_left_00119
1477  032A              l_spr_move_left_00108:
1478  032A  2A 00 00    	ld	hl,(_sprite)
1479  032D  26 00       	ld	h,0x00
1480  032F  11 00 00    	ld	de,_col
1481  0332  19          	add	hl,de
1482  0333  7E          	ld	a,(hl)
1483  0334  EB          	ex	de,hl
1484  0335  C6 FF       	add	a,0xff
1485  0337  12          	ld	(de),a
1486  0338  2A 00 00    	ld	hl,(_sprite)
1487  033B  26 00       	ld	h,0x00
1488  033D  09          	add	hl,bc
1489  033E  4D          	ld	c,l
1490  033F  44          	ld	b,h
1491  0340  2A 00 00    	ld	hl,(_s_class)
1492  0343  26 00       	ld	h,0x00
1493  0345  11 00 00    	ld	de,_sprite_frames
1494  0348  19          	add	hl,de
1495  0349  7E          	ld	a,(hl)
1496  034A  C6 FF       	add	a,0xff
1497  034C  02          	ld	(bc), a
1498  034D  2A 00 00    	ld	hl,(_sprite)
1499  0350  26 00       	ld	h,0x00
1500  0352  01 00 00    	ld	bc,_col
1501  0355  09          	add	hl,bc
1502  0356  7E          	ld	a,(hl)
1503  0357  3C          	inc	a
1504  0358  20 36       	jr	NZ,l_spr_move_left_00118
1505  035A  3A 00 00    	ld	a,(_sprite)
1506  035D  D6 07       	sub	a,0x07
1507  035F  4D          	ld	c,l
1508  0360  44          	ld	b,h
1509  0361  20 27       	jr	NZ,l_spr_move_left_00113
1510  0363  CD C6 03    	call	_spr_page_left
1511  0366  3A 00 00    	ld	a,(_sprite)
1512  0369  C6 00       	add	a,+((_col) & 0xFF)
1513  036B  4D          	ld	c,l
1514  036C  5F          	ld	e,a
1515  036D  3E 00       	ld	a,+((_col) / 256)
1516  036F  CE 00       	adc	a,0x00
1517  0371  57          	ld	d,a
1518  0372  79          	ld	a, c
1519  0373  B7          	or	a, a
1520  0374  28 10       	jr	Z,l_spr_move_left_00110
1521  0376  3E 1E       	ld	a,0x1e
1522  0378  12          	ld	(de), a
1523  0379  3A 07 00    	ld	a,(_lin + 7)
1524  037C  32 00 00    	ld	(_player_lin_scr),a
1525  037F  21 00 00    	ld	hl,_player_col_scr
1526  0382  36 1E       	ld	(hl),0x1e
1527  0384  18 06       	jr	l_spr_move_left_00114
1528  0386              l_spr_move_left_00110:
1529  0386  AF          	xor	a, a
1530  0387  12          	ld	(de), a
1531  0388  18 02       	jr	l_spr_move_left_00114
1532  038A              l_spr_move_left_00113:
1533  038A  AF          	xor	a, a
1534  038B  02          	ld	(bc), a
1535  038C              l_spr_move_left_00114:
1536  038C  2E 01       	ld	l,0x01
1537  038E  18 02       	jr	l_spr_move_left_00119
1538  0390              l_spr_move_left_00118:
1539  0390  2E 00       	ld	l,0x00
1540  0392              l_spr_move_left_00119:
1541  0392  C9          	ret
1542  0393              	SECTION code_compiler
1543  0393              ;	---------------------------------
1544  0393              ; Function spr_page_right
1545  0393              ; ---------------------------------
1546  0393              _spr_page_right:
1547  0393  2A FF FF    	ld	hl,(_map_width - 1)
1548  0396  3A 00 00    	ld	a,(_scr_curr)
1549  0399  6F          	ld	l,a
1550  039A  E5          	push	hl
1551  039B  CD 00 00    	call	__moduchar_callee
1552  039E  7D          	ld	a, l
1553  039F  3C          	inc	a
1554  03A0  32 00 00    	ld	(_tmp1),a
1555  03A3  21 00 00    	ld	hl,_map_width
1556  03A6  96          	sub	a, (hl)
1557  03A7  30 1A       	jr	NC,l_spr_page_right_00102
1558  03A9  3A 00 00    	ld	a,(_game_boss)
1559  03AC  B7          	or	a, a
1560  03AD  28 06       	jr	Z,l_spr_page_right_00101
1561  03AF  3A 00 00    	ld	a,(_game_inmune)
1562  03B2  B7          	or	a, a
1563  03B3  28 0E       	jr	Z,l_spr_page_right_00102
1564  03B5              l_spr_page_right_00101:
1565  03B5  21 00 00    	ld	hl,_scr_curr
1566  03B8  34          	inc	(hl)
1567  03B9  CD F2 04    	call	_spr_page_map
1568  03BC  CD 00 00    	call	_game_draw_screen
1569  03BF  2E 01       	ld	l,0x01
1570  03C1  18 02       	jr	l_spr_page_right_00105
1571  03C3              l_spr_page_right_00102:
1572  03C3  2E 00       	ld	l,0x00
1573  03C5              l_spr_page_right_00105:
1574  03C5  C9          	ret
1575  03C6              	SECTION code_compiler
1576  03C6              ;	---------------------------------
1577  03C6              ; Function spr_page_left
1578  03C6              ; ---------------------------------
1579  03C6              _spr_page_left:
1580  03C6  2A FF FF    	ld	hl,(_map_width - 1)
1581  03C9  3A 00 00    	ld	a,(_scr_curr)
1582  03CC  6F          	ld	l,a
1583  03CD  E5          	push	hl
1584  03CE  CD 00 00    	call	__moduchar_callee
1585  03D1  7D          	ld	a,l
1586  03D2  32 00 00    	ld	(_tmp1),a
1587  03D5  B7          	or	a, a
1588  03D6  28 1A       	jr	Z,l_spr_page_left_00102
1589  03D8  3A 00 00    	ld	a,(_game_boss)
1590  03DB  B7          	or	a, a
1591  03DC  28 06       	jr	Z,l_spr_page_left_00101
1592  03DE  3A 00 00    	ld	a,(_game_inmune)
1593  03E1  B7          	or	a, a
1594  03E2  28 0E       	jr	Z,l_spr_page_left_00102
1595  03E4              l_spr_page_left_00101:
1596  03E4  21 00 00    	ld	hl,_scr_curr
1597  03E7  35          	dec	(hl)
1598  03E8  CD F2 04    	call	_spr_page_map
1599  03EB  CD 00 00    	call	_game_draw_screen
1600  03EE  2E 01       	ld	l,0x01
1601  03F0  18 02       	jr	l_spr_page_left_00105
1602  03F2              l_spr_page_left_00102:
1603  03F2  2E 00       	ld	l,0x00
1604  03F4              l_spr_page_left_00105:
1605  03F4  C9          	ret
1606  03F5              	SECTION code_compiler
1607  03F5              ;	---------------------------------
1608  03F5              ; Function spr_page_down
1609  03F5              ; ---------------------------------
1610  03F5              _spr_page_down:
1611  03F5  2A FF FF    	ld	hl,(_map_width - 1)
1612  03F8  3A 00 00    	ld	a,(_scr_curr)
1613  03FB  6F          	ld	l,a
1614  03FC  E5          	push	hl
1615  03FD  CD 00 00    	call	__divuchar_callee
1616  0400  7D          	ld	a, l
1617  0401  3C          	inc	a
1618  0402  32 00 00    	ld	(_tmp1),a
1619  0405  21 00 00    	ld	hl,_map_heigth
1620  0408  96          	sub	a, (hl)
1621  0409  30 36       	jr	NC,l_spr_page_down_00102
1622  040B  3A 00 00    	ld	a,(_game_boss)
1623  040E  B7          	or	a, a
1624  040F  28 06       	jr	Z,l_spr_page_down_00101
1625  0411  3A 00 00    	ld	a,(_game_inmune)
1626  0414  B7          	or	a, a
1627  0415  28 2A       	jr	Z,l_spr_page_down_00102
1628  0417              l_spr_page_down_00101:
1629  0417  3A 00 00    	ld	a,(_scr_curr)
1630  041A  21 00 00    	ld	hl,_map_width
1631  041D  86          	add	a, (hl)
1632  041E  32 00 00    	ld	(_scr_curr),a
1633  0421  CD F2 04    	call	_spr_page_map
1634  0424  CD 00 00    	call	_game_draw_screen
1635  0427  21 00 00    	ld	hl,_player_lin_scr
1636  042A  36 08       	ld	(hl),0x08
1637  042C  2A 00 00    	ld	hl,(_sprite)
1638  042F  26 00       	ld	h,0x00
1639  0431  01 00 00    	ld	bc,_lin
1640  0434  09          	add	hl,bc
1641  0435  36 08       	ld	(hl),0x08
1642  0437  3A 07 00    	ld	a,(_col + 0x0007)
1643  043A  32 00 00    	ld	(_player_col_scr),a
1644  043D  2E 01       	ld	l,0x01
1645  043F  18 02       	jr	l_spr_page_down_00105
1646  0441              l_spr_page_down_00102:
1647  0441  2E 00       	ld	l,0x00
1648  0443              l_spr_page_down_00105:
1649  0443  C9          	ret
1650  0444              	SECTION code_compiler
1651  0444              ;	---------------------------------
1652  0444              ; Function spr_page_up
1653  0444              ; ---------------------------------
1654  0444              _spr_page_up:
1655  0444  2A FF FF    	ld	hl,(_map_width - 1)
1656  0447  3A 00 00    	ld	a,(_scr_curr)
1657  044A  6F          	ld	l,a
1658  044B  E5          	push	hl
1659  044C  CD 00 00    	call	__divuchar_callee
1660  044F  7D          	ld	a,l
1661  0450  32 00 00    	ld	(_tmp1),a
1662  0453  B7          	or	a, a
1663  0454  28 36       	jr	Z,l_spr_page_up_00102
1664  0456  3A 00 00    	ld	a,(_game_boss)
1665  0459  B7          	or	a, a
1666  045A  28 06       	jr	Z,l_spr_page_up_00101
1667  045C  3A 00 00    	ld	a,(_game_inmune)
1668  045F  B7          	or	a, a
1669  0460  28 2A       	jr	Z,l_spr_page_up_00102
1670  0462              l_spr_page_up_00101:
1671  0462  3A 00 00    	ld	a,(_scr_curr)
1672  0465  21 00 00    	ld	hl,_map_width
1673  0468  96          	sub	a, (hl)
1674  0469  32 00 00    	ld	(_scr_curr),a
1675  046C  CD F2 04    	call	_spr_page_map
1676  046F  CD 00 00    	call	_game_draw_screen
1677  0472  2A 00 00    	ld	hl,(_sprite)
1678  0475  26 00       	ld	h,0x00
1679  0477  01 00 00    	ld	bc,_lin
1680  047A  09          	add	hl,bc
1681  047B  36 8C       	ld	(hl),0x8c
1682  047D  21 00 00    	ld	hl,_player_lin_scr
1683  0480  36 8C       	ld	(hl),0x8c
1684  0482  3A 07 00    	ld	a,(_col + 0x0007)
1685  0485  32 00 00    	ld	(_player_col_scr),a
1686  0488  2E 01       	ld	l,0x01
1687  048A  18 02       	jr	l_spr_page_up_00105
1688  048C              l_spr_page_up_00102:
1689  048C  2E 00       	ld	l,0x00
1690  048E              l_spr_page_up_00105:
1691  048E  C9          	ret
1692  048F              	SECTION code_compiler
1693  048F              ;	---------------------------------
1694  048F              ; Function spr_clear_scr
1695  048F              ; ---------------------------------
1696  048F              _spr_clear_scr:
1697  048F  06 00       	ld	b,0x00
1698  0491              l_spr_clear_scr_00105:
1699  0491  C5          	push	bc
1700  0492  21 00 00    	ld	hl,0x0000
1701  0495  E5          	push	hl
1702  0496  AF          	xor	a, a
1703  0497  48          	ld	c,b
1704  0498  47          	ld	b,a
1705  0499  C5          	push	bc
1706  049A  CD 00 00    	call	_NIRVANAP_spriteT_callee
1707  049D  C1          	pop	bc
1708  049E  04          	inc	b
1709  049F  78          	ld	a, b
1710  04A0  D6 08       	sub	a,0x08
1711  04A2  38 ED       	jr	C,l_spr_clear_scr_00105
1712  04A4  76          	halt
1713  04A5  F3          	di
1714  04A6  0E 00       	ld	c,0x00
1715  04A8              l_spr_clear_scr_00117:
1716  04A8  79          	ld	a, c
1717  04A9  87          	add	a, a
1718  04AA  47          	ld	b, a
1719  04AB  50          	ld	d, b
1720  04AC  1E 01       	ld	e,0x01
1721  04AE              l_spr_clear_scr_00107:
1722  04AE  7B          	ld	a, e
1723  04AF  07          	rlca
1724  04B0  07          	rlca
1725  04B1  07          	rlca
1726  04B2  07          	rlca
1727  04B3  E6 F0       	and	a,0xf0
1728  04B5  C5          	push	bc
1729  04B6  D5          	push	de
1730  04B7  5F          	ld	e,a
1731  04B8  D5          	push	de
1732  04B9  AF          	xor	a, a
1733  04BA  F5          	push	af
1734  04BB  33          	inc	sp
1735  04BC  CD 00 00    	call	_NIRVANAP_fillT_raw_callee
1736  04BF  D1          	pop	de
1737  04C0  C1          	pop	bc
1738  04C1  1C          	inc	e
1739  04C2  7B          	ld	a, e
1740  04C3  D6 0A       	sub	a,0x0a
1741  04C5  38 E7       	jr	C,l_spr_clear_scr_00107
1742  04C7  3E 1E       	ld	a,0x1e
1743  04C9  90          	sub	a, b
1744  04CA  47          	ld	b, a
1745  04CB  1E 01       	ld	e,0x01
1746  04CD              l_spr_clear_scr_00109:
1747  04CD  7B          	ld	a, e
1748  04CE  07          	rlca
1749  04CF  07          	rlca
1750  04D0  07          	rlca
1751  04D1  07          	rlca
1752  04D2  E6 F0       	and	a,0xf0
1753  04D4  57          	ld	d, a
1754  04D5  C5          	push	bc
1755  04D6  D5          	push	de
1756  04D7  4A          	ld	c, d
1757  04D8  C5          	push	bc
1758  04D9  AF          	xor	a, a
1759  04DA  F5          	push	af
1760  04DB  33          	inc	sp
1761  04DC  CD 00 00    	call	_NIRVANAP_fillT_raw_callee
1762  04DF  D1          	pop	de
1763  04E0  C1          	pop	bc
1764  04E1  1C          	inc	e
1765  04E2  7B          	ld	a, e
1766  04E3  D6 0A       	sub	a,0x0a
1767  04E5  38 E6       	jr	C,l_spr_clear_scr_00109
1768  04E7  FB          	ei
1769  04E8  76          	halt
1770  04E9  F3          	di
1771  04EA  0C          	inc	c
1772  04EB  79          	ld	a, c
1773  04EC  D6 08       	sub	a,0x08
1774  04EE  38 B8       	jr	C,l_spr_clear_scr_00117
1775  04F0  FB          	ei
1776  04F1  C9          	ret
1777  04F2              	SECTION code_compiler
1778  04F2              ;	---------------------------------
1779  04F2              ; Function spr_page_map
1780  04F2              ; ---------------------------------
1781  04F2              _spr_page_map:
1782  04F2  CD 00 00    	call	___sdcc_enter_ix
1783  04F5  21 F3 FF    	ld	hl, -13
1784  04F8  39          	add	hl, sp
1785  04F9  F9          	ld	sp, hl
1786  04FA  21 00 00    	ld	hl,_game_world
1787  04FD  5E          	ld	e, (hl)
1788  04FE  3A 00 00    	ld	a,(_scr_curr)
1789  0501  DD 77 FD    	ld	(ix-3),a
1790  0504  7B          	ld	a, e
1791  0505  07          	rlca
1792  0506  07          	rlca
1793  0507  07          	rlca
1794  0508  07          	rlca
1795  0509  E6 F0       	and	a,0xf0
1796  050B  47          	ld	b,a
1797  050C  DD 86 FD    	add	a,(ix-3)
1798  050F  4F          	ld	c, a
1799  0510  DD 36 F8 10 	ld	(ix-8),0x10
1800  0514  C5          	push	bc
1801  0515  D5          	push	de
1802  0516  CD 8F 04    	call	_spr_clear_scr
1803  0519  D1          	pop	de
1804  051A  C1          	pop	bc
1805  051B  F3          	di
1806  051C  21 00 00    	ld	hl,_GLOBAL_ZX_PORT_7FFD
1807  051F  36 16       	ld	(hl),0x16
1808  0521  C5          	push	bc
1809  0522  3E 16       	ld	a,0x16
1810  0524  01 FD 7F    	ld	bc,_IO_7FFD
1811  0527  ED 79       	out	(c),a
1812  0529  C1          	pop	bc
1813  052A  DD 7E FD    	ld	a,(ix-3)
1814  052D  3C          	inc	a
1815  052E  20 0E       	jr	NZ,l_spr_page_map_00102
1816  0530  57          	ld	d,a
1817  0531  21 00 00    	ld	hl,_start_scr0
1818  0534  19          	add	hl, de
1819  0535  7E          	ld	a, (hl)
1820  0536  DD 77 FD    	ld	(ix-3),a
1821  0539  78          	ld	a, b
1822  053A  DD 86 FD    	add	a,(ix-3)
1823  053D  4F          	ld	c, a
1824  053E              l_spr_page_map_00102:
1825  053E  06 00       	ld	b,0x00
1826  0540  21 00 00    	ld	hl,_paper0
1827  0543  09          	add	hl, bc
1828  0544  7E          	ld	a, (hl)
1829  0545  DD 77 F4    	ld	(ix-12),a
1830  0548  16 00       	ld	d,0x00
1831  054A  21 00 00    	ld	hl,_world0_w
1832  054D  19          	add	hl, de
1833  054E  7E          	ld	a, (hl)
1834  054F  DD 77 FA    	ld	(ix-6),a
1835  0552  16 00       	ld	d,0x00
1836  0554  21 00 00    	ld	hl,_world0_h
1837  0557  19          	add	hl, de
1838  0558  7E          	ld	a, (hl)
1839  0559  DD 77 F5    	ld	(ix-11),a
1840  055C  21 00 00    	ld	hl,_GLOBAL_ZX_PORT_7FFD
1841  055F  36 10       	ld	(hl),0x10
1842  0561  C5          	push	bc
1843  0562  3E 10       	ld	a,0x10
1844  0564  01 FD 7F    	ld	bc,_IO_7FFD
1845  0567  ED 79       	out	(c),a
1846  0569  C1          	pop	bc
1847  056A  1E 00       	ld	e,0x00
1848  056C  DD 73 F6    	ld	(ix-10),e
1849  056F  DD 73 F7    	ld	(ix-9),e
1850  0572              l_spr_page_map_00103:
1851  0572  7B          	ld	a, e
1852  0573  91          	sub	a, c
1853  0574  30 31       	jr	NC,l_spr_page_map_00105
1854  0576  C5          	push	bc
1855  0577  3E 16       	ld	a,0x16
1856  0579  01 FD 7F    	ld	bc,_IO_7FFD
1857  057C  ED 79       	out	(c),a
1858  057E  C1          	pop	bc
1859  057F  16 00       	ld	d,0x00
1860  0581  21 00 00    	ld	hl,_lenght0
1861  0584  19          	add	hl, de
1862  0585  46          	ld	b, (hl)
1863  0586  16 00       	ld	d,0x00
1864  0588  21 00 00    	ld	hl,_GLOBAL_ZX_PORT_7FFD
1865  058B  36 10       	ld	(hl),0x10
1866  058D  C5          	push	bc
1867  058E  3E 10       	ld	a,0x10
1868  0590  01 FD 7F    	ld	bc,_IO_7FFD
1869  0593  ED 79       	out	(c),a
1870  0595  C1          	pop	bc
1871  0596  DD 7E F6    	ld	a,(ix-10)
1872  0599  80          	add	a, b
1873  059A  DD 77 F6    	ld	(ix-10),a
1874  059D  DD 7E F7    	ld	a,(ix-9)
1875  05A0  8A          	adc	a, d
1876  05A1  DD 77 F7    	ld	(ix-9),a
1877  05A4  1C          	inc	e
1878  05A5  18 CB       	jr	l_spr_page_map_00103
1879  05A7              l_spr_page_map_00105:
1880  05A7  FB          	ei
1881  05A8  F3          	di
1882  05A9  0E 00       	ld	c,0x00
1883  05AB              l_spr_page_map_00128:
1884  05AB  C5          	push	bc
1885  05AC  3E 16       	ld	a,0x16
1886  05AE  01 FD 7F    	ld	bc,_IO_7FFD
1887  05B1  ED 79       	out	(c),a
1888  05B3  C1          	pop	bc
1889  05B4  59          	ld	e, c
1890  05B5  16 00       	ld	d,0x00
1891  05B7  DD 6E F6    	ld	l,(ix-10)
1892  05BA  DD 66 F7    	ld	h,(ix-9)
1893  05BD  19          	add	hl,de
1894  05BE  EB          	ex	de,hl
1895  05BF  21 00 00    	ld	hl,_world0
1896  05C2  19          	add	hl, de
1897  05C3  7E          	ld	a, (hl)
1898  05C4  DD 77 FB    	ld	(ix-5),a
1899  05C7  13          	inc	de
1900  05C8  21 00 00    	ld	hl,_world0
1901  05CB  19          	add	hl, de
1902  05CC  7E          	ld	a, (hl)
1903  05CD  DD 77 F3    	ld	(ix-13),a
1904  05D0  21 00 00    	ld	hl,_GLOBAL_ZX_PORT_7FFD
1905  05D3  36 10       	ld	(hl),0x10
1906  05D5  C5          	push	bc
1907  05D6  3E 10       	ld	a,0x10
1908  05D8  01 FD 7F    	ld	bc,_IO_7FFD
1909  05DB  ED 79       	out	(c),a
1910  05DD  C1          	pop	bc
1911  05DE  DD 7E FB    	ld	a,(ix-5)
1912  05E1  D6 80       	sub	a,0x80
1913  05E3  30 4F       	jr	NC,l_spr_page_map_00116
1914  05E5  DD 7E F8    	ld	a,(ix-8)
1915  05E8  DD 77 FE    	ld	(ix-2),a
1916  05EB  DD 36 FF 00 	ld	(ix-1),0x00
1917  05EF  C5          	push	bc
1918  05F0  DD 6E FE    	ld	l,(ix-2)
1919  05F3  DD 66 FF    	ld	h,(ix-1)
1920  05F6  CD 00 00    	call	_game_obj_chk
1921  05F9  C1          	pop	bc
1922  05FA  45          	ld	b, l
1923  05FB  3E 00       	ld	a, +((_scr_map) & 0xFF)
1924  05FD  DD 86 F8    	add	a,(ix-8)
1925  0600  5F          	ld	e, a
1926  0601  3E 00       	ld	a, +((_scr_map) / 256)
1927  0603  CE 00       	adc	a,0x00
1928  0605  57          	ld	d, a
1929  0606  78          	ld	a, b
1930  0607  B7          	or	a, a
1931  0608  20 06       	jr	NZ,l_spr_page_map_00107
1932  060A  DD 7E FB    	ld	a,(ix-5)
1933  060D  12          	ld	(de), a
1934  060E  18 1F       	jr	l_spr_page_map_00108
1935  0610              l_spr_page_map_00107:
1936  0610  DD 6E F8    	ld	l,(ix-8)
1937  0613  26 00       	ld	h,0x00
1938  0615  23          	inc	hl
1939  0616  3E 00       	ld	a, +((_scr_map) & 0xFF)
1940  0618  85          	add	a, l
1941  0619  6F          	ld	l, a
1942  061A  3E 00       	ld	a, +((_scr_map) / 256)
1943  061C  8C          	adc	a, h
1944  061D  67          	ld	h, a
1945  061E  36 00       	ld	(hl),0x00
1946  0620  C5          	push	bc
1947  0621  D5          	push	de
1948  0622  DD 6E FE    	ld	l,(ix-2)
1949  0625  DD 66 FF    	ld	h,(ix-1)
1950  0628  CD 00 00    	call	_game_match_back
1951  062B  D1          	pop	de
1952  062C  C1          	pop	bc
1953  062D  7D          	ld	a,l
1954  062E  12          	ld	(de), a
1955  062F              l_spr_page_map_00108:
1956  062F  DD 34 F8    	inc	(ix-8)
1957  0632  18 6D       	jr	l_spr_page_map_00117
1958  0634              l_spr_page_map_00116:
1959  0634  DD 7E FB    	ld	a,(ix-5)
1960  0637  C6 80       	add	a,0x80
1961  0639  DD 77 F9    	ld	(ix-7),a
1962  063C  DD 46 F8    	ld	b,(ix-8)
1963  063F  DD 36 FC 00 	ld	(ix-4),0x00
1964  0643              l_spr_page_map_00126:
1965  0643  DD 7E FC    	ld	a,(ix-4)
1966  0646  DD 96 F9    	sub	a,(ix-7)
1967  0649  30 52       	jr	NC,l_spr_page_map_00146
1968  064B  DD 70 FE    	ld	(ix-2),b
1969  064E  DD 36 FF 00 	ld	(ix-1),0x00
1970  0652  C5          	push	bc
1971  0653  DD 6E FE    	ld	l,(ix-2)
1972  0656  DD 66 FF    	ld	h,(ix-1)
1973  0659  CD 00 00    	call	_game_obj_chk
1974  065C  C1          	pop	bc
1975  065D  7D          	ld	a,l
1976  065E  B7          	or	a, a
1977  065F  20 0F       	jr	NZ,l_spr_page_map_00110
1978  0661  3E 00       	ld	a, +((_scr_map) & 0xFF)
1979  0663  80          	add	a, b
1980  0664  5F          	ld	e, a
1981  0665  3E 00       	ld	a, +((_scr_map) / 256)
1982  0667  CE 00       	adc	a,0x00
1983  0669  57          	ld	d, a
1984  066A  DD 7E F3    	ld	a,(ix-13)
1985  066D  12          	ld	(de), a
1986  066E  18 22       	jr	l_spr_page_map_00111
1987  0670              l_spr_page_map_00110:
1988  0670  58          	ld	e, b
1989  0671  16 00       	ld	d,0x00
1990  0673  13          	inc	de
1991  0674  21 00 00    	ld	hl,_scr_map
1992  0677  19          	add	hl, de
1993  0678  36 00       	ld	(hl),0x00
1994  067A  3E 00       	ld	a, +((_scr_map) & 0xFF)
1995  067C  80          	add	a, b
1996  067D  5F          	ld	e, a
1997  067E  3E 00       	ld	a, +((_scr_map) / 256)
1998  0680  CE 00       	adc	a,0x00
1999  0682  57          	ld	d, a
2000  0683  C5          	push	bc
2001  0684  D5          	push	de
2002  0685  DD 6E FE    	ld	l,(ix-2)
2003  0688  DD 66 FF    	ld	h,(ix-1)
2004  068B  CD 00 00    	call	_game_match_back
2005  068E  D1          	pop	de
2006  068F  C1          	pop	bc
2007  0690  7D          	ld	a,l
2008  0691  12          	ld	(de), a
2009  0692              l_spr_page_map_00111:
2010  0692  04          	inc	b
2011  0693  78          	ld	a, b
2012  0694  D6 A0       	sub	a,0xa0
2013  0696  30 05       	jr	NC,l_spr_page_map_00146
2014  0698  DD 34 FC    	inc	(ix-4)
2015  069B  18 A6       	jr	l_spr_page_map_00126
2016  069D              l_spr_page_map_00146:
2017  069D  DD 70 F8    	ld	(ix-8),b
2018  06A0  0C          	inc	c
2019  06A1              l_spr_page_map_00117:
2020  06A1  DD 7E F8    	ld	a,(ix-8)
2021  06A4  D6 A0       	sub	a,0xa0
2022  06A6  30 07       	jr	NC,l_spr_page_map_00120
2023  06A8  0C          	inc	c
2024  06A9  79          	ld	a, c
2025  06AA  D6 A0       	sub	a,0xa0
2026  06AC  DA AB 05    	jp	C, l_spr_page_map_00128
2027  06AF              l_spr_page_map_00120:
2028  06AF  DD 7E FD    	ld	a,(ix-3)
2029  06B2  32 00 00    	ld	(_scr_curr),a
2030  06B5  DD 7E FA    	ld	a,(ix-6)
2031  06B8  32 00 00    	ld	(_map_width),a
2032  06BB  DD 7E F5    	ld	a,(ix-11)
2033  06BE  32 00 00    	ld	(_map_heigth),a
2034  06C1  DD 7E F4    	ld	a,(ix-12)
2035  06C4  32 00 00    	ld	(_map_paper),a
2036  06C7  CD 16 0C    	call	_spr_init_effects
2037  06CA  3A 00 00    	ld	a,(_map_paper_last)
2038  06CD  21 00 00    	ld	hl,_map_paper
2039  06D0  96          	sub	a, (hl)
2040  06D1  28 03       	jr	Z,l_spr_page_map_00122
2041  06D3  CD A8 13    	call	_spr_btile_paint_back
2042  06D6              l_spr_page_map_00122:
2043  06D6  FB          	ei
2044  06D7  CD 00 00    	call	_NIRVANAP_start
2045  06DA  21 00 00    	ld	hl,_screen_ink
2046  06DD  36 06       	ld	(hl),0x06
2047  06DF  3A 00 00    	ld	a,(_game_debug)
2048  06E2  B7          	or	a, a
2049  06E3  28 17       	jr	Z,l_spr_page_map_00130
2050  06E5  21 00 00    	ld	hl,___str_0
2051  06E8  E5          	push	hl
2052  06E9  21 17 0C    	ld	hl,0x0c17
2053  06EC  E5          	push	hl
2054  06ED  CD 00 00    	call	_zx_print_str
2055  06F0  3A 00 00    	ld	a,(_scr_curr)
2056  06F3  F5          	push	af
2057  06F4  33          	inc	sp
2058  06F5  21 17 10    	ld	hl,0x1017
2059  06F8  E5          	push	hl
2060  06F9  CD 00 00    	call	_zx_print_chr
2061  06FC              l_spr_page_map_00130:
2062  06FC  DD F9       	ld	sp, ix
2063  06FE  DD E1       	pop	ix
2064  0700  C9          	ret
2065  0701              	SECTION rodata_compiler
2066  0000              ___str_0:
2067  0000  53 43 52 3A 	DEFM "SCR:"
2068  0004  00          	DEFB 0x00
2069  0005              	SECTION code_compiler
2070  0701              ;	---------------------------------
2071  0701              ; Function spr_paint_player
2072  0701              ; ---------------------------------
2073  0701              _spr_paint_player:
2074  0701  3A 07 00    	ld	a,(_col + 0x0007)
2075  0704  32 00 00    	ld	(_s_col1),a
2076  0707  3A 07 00    	ld	a,(_lin + 0x0007)
2077  070A  32 00 00    	ld	(_s_lin1),a
2078  070D  21 00 00    	ld	hl,_s_lin0
2079  0710  96          	sub	a, (hl)
2080  0711  20 09       	jr	NZ,l_spr_paint_player_00105
2081  0713  3A 00 00    	ld	a,(_s_col1)
2082  0716  21 00 00    	ld	hl,_s_col0
2083  0719  96          	sub	a, (hl)
2084  071A  28 30       	jr	Z,l_spr_paint_player_00106
2085  071C              l_spr_paint_player_00105:
2086  071C  21 07 00    	ld	hl,+(_tile + 0x0007)
2087  071F  4E          	ld	c, (hl)
2088  0720  21 07 00    	ld	hl,+(_colint + 0x0007)
2089  0723  46          	ld	b, (hl)
2090  0724  79          	ld	a, c
2091  0725  80          	add	a, b
2092  0726  32 00 00    	ld	(_s_tile1),a
2093  0729  3A 00 00    	ld	a,(_player_onstair)
2094  072C  B7          	or	a, a
2095  072D  28 03       	jr	Z,l_spr_paint_player_00102
2096  072F  CD 00 00    	call	_player_anim_stairs
2097  0732              l_spr_paint_player_00102:
2098  0732  CD 51 0A    	call	_spr_back_repaint
2099  0735  2A FF FF    	ld	hl,(_s_col1 - 1)
2100  0738  3A 00 00    	ld	a,(_s_lin1)
2101  073B  6F          	ld	l,a
2102  073C  E5          	push	hl
2103  073D  2A FF FF    	ld	hl,(_s_tile1 - 1)
2104  0740  3A 00 00    	ld	a,(_sprite)
2105  0743  6F          	ld	l,a
2106  0744  E5          	push	hl
2107  0745  CD 00 00    	call	_NIRVANAP_spriteT_callee
2108  0748  2E 01       	ld	l,0x01
2109  074A  18 3F       	jr	l_spr_paint_player_00109
2110  074C              l_spr_paint_player_00106:
2111  074C  3A 00 00    	ld	a,(_sprite)
2112  074F  07          	rlca
2113  0750  07          	rlca
2114  0751  07          	rlca
2115  0752  E6 F8       	and	a,0xf8
2116  0754  4F          	ld	c, a
2117  0755  06 00       	ld	b,0x00
2118  0757  21 98 DC    	ld	hl,0xdc98
2119  075A  09          	add	hl, bc
2120  075B  7E          	ld	a, (hl)
2121  075C  32 00 00    	ld	(_s_tile0),a
2122  075F  21 07 00    	ld	hl,+(_tile + 0x0007)
2123  0762  4E          	ld	c, (hl)
2124  0763  21 07 00    	ld	hl,+(_colint + 0x0007)
2125  0766  46          	ld	b, (hl)
2126  0767  79          	ld	a, c
2127  0768  80          	add	a, b
2128  0769  32 00 00    	ld	(_s_tile1),a
2129  076C  21 00 00    	ld	hl,_s_tile0
2130  076F  96          	sub	a, (hl)
2131  0770  28 17       	jr	Z,l_spr_paint_player_00107
2132  0772  2A FF FF    	ld	hl,(_s_col1 - 1)
2133  0775  3A 00 00    	ld	a,(_s_lin1)
2134  0778  6F          	ld	l,a
2135  0779  E5          	push	hl
2136  077A  2A FF FF    	ld	hl,(_s_tile1 - 1)
2137  077D  3A 00 00    	ld	a,(_sprite)
2138  0780  6F          	ld	l,a
2139  0781  E5          	push	hl
2140  0782  CD 00 00    	call	_NIRVANAP_spriteT_callee
2141  0785  2E 00       	ld	l,0x00
2142  0787  18 02       	jr	l_spr_paint_player_00109
2143  0789              l_spr_paint_player_00107:
2144  0789  2E 00       	ld	l,0x00
2145  078B              l_spr_paint_player_00109:
2146  078B  C9          	ret
2147  078C              	SECTION code_compiler
2148  078C              ;	---------------------------------
2149  078C              ; Function spr_paint
2150  078C              ; ---------------------------------
2151  078C              _spr_paint:
2152  078C  2A 00 00    	ld	hl,(_sprite)
2153  078F  26 00       	ld	h,0x00
2154  0791  01 00 00    	ld	bc,_col
2155  0794  09          	add	hl,bc
2156  0795  7E          	ld	a,(hl)
2157  0796  32 00 00    	ld	(_s_col1),a
2158  0799  2A 00 00    	ld	hl,(_sprite)
2159  079C  26 00       	ld	h,0x00
2160  079E  01 00 00    	ld	bc,_lin
2161  07A1  09          	add	hl,bc
2162  07A2  7E          	ld	a,(hl)
2163  07A3  32 00 00    	ld	(_s_lin1),a
2164  07A6  21 00 00    	ld	hl,_s_lin0
2165  07A9  96          	sub	a, (hl)
2166  07AA  20 09       	jr	NZ,l_spr_paint_00106
2167  07AC  3A 00 00    	ld	a,(_s_col1)
2168  07AF  21 00 00    	ld	hl,_s_col0
2169  07B2  96          	sub	a, (hl)
2170  07B3  28 4C       	jr	Z,l_spr_paint_00107
2171  07B5              l_spr_paint_00106:
2172  07B5  2A 00 00    	ld	hl,(_sprite)
2173  07B8  26 00       	ld	h,0x00
2174  07BA  01 00 00    	ld	bc,_tile
2175  07BD  09          	add	hl,bc
2176  07BE  4E          	ld	c, (hl)
2177  07BF  3A 00 00    	ld	a,(_sprite)
2178  07C2  5F          	ld	e,a
2179  07C3  16 00       	ld	d,0x00
2180  07C5  21 00 00    	ld	hl,_colint
2181  07C8  19          	add	hl,de
2182  07C9  7E          	ld	a,(hl)
2183  07CA  81          	add	a,c
2184  07CB  32 00 00    	ld	(_s_tile1),a
2185  07CE  3A 00 00    	ld	a,(_s_lin1)
2186  07D1  E6 07       	and	a,0x07
2187  07D3  20 05       	jr	NZ,l_spr_paint_00102
2188  07D5  CD 51 0A    	call	_spr_back_repaint
2189  07D8  18 10       	jr	l_spr_paint_00103
2190  07DA              l_spr_paint_00102:
2191  07DA  2A FF FF    	ld	hl,(_s_col0 - 1)
2192  07DD  3A 00 00    	ld	a,(_s_lin0)
2193  07E0  6F          	ld	l,a
2194  07E1  3A 00 00    	ld	a,(_map_paper_clr)
2195  07E4  E5          	push	hl
2196  07E5  F5          	push	af
2197  07E6  33          	inc	sp
2198  07E7  CD 00 00    	call	_NIRVANAP_fillT_callee
2199  07EA              l_spr_paint_00103:
2200  07EA  2A FF FF    	ld	hl,(_s_col1 - 1)
2201  07ED  3A 00 00    	ld	a,(_s_lin1)
2202  07F0  6F          	ld	l,a
2203  07F1  E5          	push	hl
2204  07F2  2A FF FF    	ld	hl,(_s_tile1 - 1)
2205  07F5  3A 00 00    	ld	a,(_sprite)
2206  07F8  6F          	ld	l,a
2207  07F9  E5          	push	hl
2208  07FA  CD 00 00    	call	_NIRVANAP_spriteT_callee
2209  07FD  2E 01       	ld	l,0x01
2210  07FF  18 4B       	jr	l_spr_paint_00110
2211  0801              l_spr_paint_00107:
2212  0801  3A 00 00    	ld	a,(_sprite)
2213  0804  07          	rlca
2214  0805  07          	rlca
2215  0806  07          	rlca
2216  0807  E6 F8       	and	a,0xf8
2217  0809  4F          	ld	c, a
2218  080A  06 00       	ld	b,0x00
2219  080C  21 98 DC    	ld	hl,0xdc98
2220  080F  09          	add	hl, bc
2221  0810  7E          	ld	a, (hl)
2222  0811  32 00 00    	ld	(_s_tile0),a
2223  0814  2A 00 00    	ld	hl,(_sprite)
2224  0817  26 00       	ld	h,0x00
2225  0819  01 00 00    	ld	bc,_tile
2226  081C  09          	add	hl,bc
2227  081D  4E          	ld	c, (hl)
2228  081E  3A 00 00    	ld	a,(_sprite)
2229  0821  5F          	ld	e,a
2230  0822  16 00       	ld	d,0x00
2231  0824  21 00 00    	ld	hl,_colint
2232  0827  19          	add	hl,de
2233  0828  7E          	ld	a,(hl)
2234  0829  81          	add	a,c
2235  082A  32 00 00    	ld	(_s_tile1),a
2236  082D  21 00 00    	ld	hl,_s_tile0
2237  0830  96          	sub	a, (hl)
2238  0831  28 17       	jr	Z,l_spr_paint_00108
2239  0833  2A FF FF    	ld	hl,(_s_col1 - 1)
2240  0836  3A 00 00    	ld	a,(_s_lin1)
2241  0839  6F          	ld	l,a
2242  083A  E5          	push	hl
2243  083B  2A FF FF    	ld	hl,(_s_tile1 - 1)
2244  083E  3A 00 00    	ld	a,(_sprite)
2245  0841  6F          	ld	l,a
2246  0842  E5          	push	hl
2247  0843  CD 00 00    	call	_NIRVANAP_spriteT_callee
2248  0846  2E 00       	ld	l,0x00
2249  0848  18 02       	jr	l_spr_paint_00110
2250  084A              l_spr_paint_00108:
2251  084A  2E 00       	ld	l,0x00
2252  084C              l_spr_paint_00110:
2253  084C  C9          	ret
2254  084D              	SECTION code_compiler
2255  084D              ;	---------------------------------
2256  084D              ; Function spr_destroy
2257  084D              ; ---------------------------------
2258  084D              _spr_destroy:
2259  084D  CD 00 00    	call	___sdcc_enter_ix
2260  0850  F5          	push	af
2261  0851  F5          	push	af
2262  0852  45          	ld	b, l
2263  0853  21 00 00    	ld	hl,_spr_count
2264  0856  35          	dec	(hl)
2265  0857  3E 00       	ld	a, +((_lin) & 0xFF)
2266  0859  80          	add	a, b
2267  085A  DD 77 FC    	ld	(ix-4),a
2268  085D  3E 00       	ld	a, +((_lin) / 256)
2269  085F  CE 00       	adc	a,0x00
2270  0861  DD 77 FD    	ld	(ix-3),a
2271  0864  E1          	pop	hl
2272  0865  7E          	ld	a,(hl)
2273  0866  E5          	push	hl
2274  0867  32 00 00    	ld	(_s_lin0),a
2275  086A  3E 00       	ld	a, +((_col) & 0xFF)
2276  086C  80          	add	a, b
2277  086D  DD 77 FE    	ld	(ix-2),a
2278  0870  6F          	ld	l,a
2279  0871  3E 00       	ld	a,+((_col) / 256)
2280  0873  CE 00       	adc	a,0x00
2281  0875  DD 77 FF    	ld	(ix-1),a
2282  0878  67          	ld	h,a
2283  0879  7E          	ld	a, (hl)
2284  087A  32 00 00    	ld	(_s_col0),a
2285  087D  2A 00 00    	ld	hl,(_s_lin0)
2286  0880  C5          	push	bc
2287  0881  67          	ld	h,a
2288  0882  E5          	push	hl
2289  0883  CD 00 00    	call	_spr_calc_index
2290  0886  F1          	pop	af
2291  0887  EB          	ex	de,hl
2292  0888  C1          	pop	bc
2293  0889  EB          	ex	de,hl
2294  088A  22 00 00    	ld	(_index0),hl
2295  088D  C5          	push	bc
2296  088E  CD 00 00    	call	_game_match_back
2297  0891  C1          	pop	bc
2298  0892  7D          	ld	a,l
2299  0893  32 00 00    	ld	(_s_tile0),a
2300  0896  C5          	push	bc
2301  0897  21 00 00    	ld	hl,0x0000
2302  089A  E5          	push	hl
2303  089B  48          	ld	c,b
2304  089C  47          	ld	b,a
2305  089D  C5          	push	bc
2306  089E  CD 00 00    	call	_NIRVANAP_spriteT_callee
2307  08A1  CD 51 0A    	call	_spr_back_repaint
2308  08A4  C1          	pop	bc
2309  08A5  3E 00       	ld	a, +((_tile) & 0xFF)
2310  08A7  80          	add	a, b
2311  08A8  5F          	ld	e, a
2312  08A9  3E 00       	ld	a, +((_tile) / 256)
2313  08AB  CE 00       	adc	a,0x00
2314  08AD  57          	ld	d, a
2315  08AE  3A 00 00    	ld	a,(_s_tile0)
2316  08B1  12          	ld	(de), a
2317  08B2  DD 6E FE    	ld	l,(ix-2)
2318  08B5  DD 66 FF    	ld	h,(ix-1)
2319  08B8  36 00       	ld	(hl),0x00
2320  08BA  E1          	pop	hl
2321  08BB  E5          	push	hl
2322  08BC  36 00       	ld	(hl),0x00
2323  08BE  11 00 00    	ld	de,_class+0
2324  08C1  68          	ld	l,b
2325  08C2  26 00       	ld	h,0x00
2326  08C4  19          	add	hl, de
2327  08C5  36 00       	ld	(hl),0x00
2328  08C7  11 00 00    	ld	de,_state+0
2329  08CA  68          	ld	l,b
2330  08CB  26 00       	ld	h,0x00
2331  08CD  19          	add	hl, de
2332  08CE  36 00       	ld	(hl),0x00
2333  08D0  11 00 00    	ld	de,_state_a+0
2334  08D3  68          	ld	l,b
2335  08D4  26 00       	ld	h,0x00
2336  08D6  19          	add	hl, de
2337  08D7  36 00       	ld	(hl),0x00
2338  08D9  DD F9       	ld	sp, ix
2339  08DB  DD E1       	pop	ix
2340  08DD  C9          	ret
2341  08DE              	SECTION code_compiler
2342  08DE              ;	---------------------------------
2343  08DE              ; Function spr_tile
2344  08DE              ; ---------------------------------
2345  08DE              _spr_tile:
2346  08DE  CD 00 00    	call	___sdcc_enter_ix
2347  08E1  3B          	dec	sp
2348  08E2  4D          	ld	c, l
2349  08E3  44          	ld	b, h
2350  08E4  21 00 00    	ld	hl,_tmp0
2351  08E7  36 00       	ld	(hl),0x00
2352  08E9  11 00 00    	ld	de,_class+0
2353  08EC  0A          	ld	a, (bc)
2354  08ED  6F          	ld	l, a
2355  08EE  26 00       	ld	h,0x00
2356  08F0  19          	add	hl, de
2357  08F1  7E          	ld	a, (hl)
2358  08F2  DD 77 FF    	ld	(ix-1),a
2359  08F5              l_spr_tile_00103:
2360  08F5  21 00 00    	ld	hl,_tmp0
2361  08F8  7E          	ld	a, (hl)
2362  08F9  D6 14       	sub	a,0x14
2363  08FB  30 41       	jr	NC,l_spr_tile_00105
2364  08FD  7E          	ld	a, (hl)
2365  08FE  5F          	ld	e, a
2366  08FF  87          	add	a, a
2367  0900  83          	add	a, e
2368  0901  21 00 00    	ld	hl,_tmp1
2369  0904  77          	ld	(hl), a
2370  0905  C6 00       	add	a,+((_spr_map_tile) & 0xFF)
2371  0907  5F          	ld	e, a
2372  0908  3E 00       	ld	a, +((_spr_map_tile) / 256)
2373  090A  CE 00       	adc	a,0x00
2374  090C  57          	ld	d, a
2375  090D  1A          	ld	a, (de)
2376  090E  5F          	ld	e, a
2377  090F  DD 7E FF    	ld	a,(ix-1)
2378  0912  93          	sub	a, e
2379  0913  20 23       	jr	NZ,l_spr_tile_00102
2380  0915  6E          	ld	l,(hl)
2381  0916  26 00       	ld	h,0x00
2382  0918  5D          	ld	e,l
2383  0919  54          	ld	d,h
2384  091A  23          	inc	hl
2385  091B  23          	inc	hl
2386  091C  3E 00       	ld	a, +((_spr_map_tile) & 0xFF)
2387  091E  85          	add	a, l
2388  091F  6F          	ld	l, a
2389  0920  3E 00       	ld	a, +((_spr_map_tile) / 256)
2390  0922  8C          	adc	a, h
2391  0923  67          	ld	h, a
2392  0924  13          	inc	de
2393  0925  3E 00       	ld	a, +((_spr_map_tile) & 0xFF)
2394  0927  83          	add	a, e
2395  0928  5F          	ld	e, a
2396  0929  3E 00       	ld	a, +((_spr_map_tile) / 256)
2397  092B  8A          	adc	a, d
2398  092C  57          	ld	d, a
2399  092D  E5          	push	hl
2400  092E  C5          	push	bc
2401  092F  D5          	push	de
2402  0930  CD 44 09    	call	_spr_tile_dir
2403  0933  F1          	pop	af
2404  0934  F1          	pop	af
2405  0935  F1          	pop	af
2406  0936  18 08       	jr	l_spr_tile_00106
2407  0938              l_spr_tile_00102:
2408  0938  21 00 00    	ld	hl,_tmp0
2409  093B  34          	inc	(hl)
2410  093C  18 B7       	jr	l_spr_tile_00103
2411  093E              l_spr_tile_00105:
2412  093E  2E 00       	ld	l,0x00
2413  0940              l_spr_tile_00106:
2414  0940  33          	inc	sp
2415  0941  DD E1       	pop	ix
2416  0943  C9          	ret
2417  0944              	SECTION code_compiler
2418  0944              ;	---------------------------------
2419  0944              ; Function spr_tile_dir
2420  0944              ; ---------------------------------
2421  0944              _spr_tile_dir:
2422  0944  CD 00 00    	call	___sdcc_enter_ix
2423  0947  F5          	push	af
2424  0948  01 00 00    	ld	bc,_state+0
2425  094B  DD 5E 06    	ld	e,(ix+6)
2426  094E  DD 56 07    	ld	d,(ix+7)
2427  0951  1A          	ld	a, (de)
2428  0952  5F          	ld	e,a
2429  0953  6F          	ld	l,a
2430  0954  26 00       	ld	h,0x00
2431  0956  09          	add	hl, bc
2432  0957  46          	ld	b, (hl)
2433  0958  DD 6E 04    	ld	l,(ix+4)
2434  095B  DD 66 05    	ld	h,(ix+5)
2435  095E  4E          	ld	c, (hl)
2436  095F  CB 50       	bit	2, b
2437  0961  28 03       	jr	Z,l_spr_tile_dir_00102
2438  0963  69          	ld	l, c
2439  0964  18 2F       	jr	l_spr_tile_dir_00109
2440  0966              l_spr_tile_dir_00102:
2441  0966  DD 7E 08    	ld	a,(ix+8)
2442  0969  DD 77 FE    	ld	(ix-2),a
2443  096C  DD 7E 09    	ld	a,(ix+9)
2444  096F  DD 77 FF    	ld	(ix-1),a
2445  0972  CB 58       	bit	3, b
2446  0974  28 06       	jr	Z,l_spr_tile_dir_00104
2447  0976  E1          	pop	hl
2448  0977  E5          	push	hl
2449  0978  6E          	ld	l, (hl)
2450  0979  09          	add	hl, bc
2451  097A  18 19       	jr	l_spr_tile_dir_00109
2452  097C              l_spr_tile_dir_00104:
2453  097C  16 00       	ld	d,0x00
2454  097E  21 00 00    	ld	hl,_state_a
2455  0981  19          	add	hl, de
2456  0982  46          	ld	b, (hl)
2457  0983  CB 60       	bit	4, b
2458  0985  28 03       	jr	Z,l_spr_tile_dir_00106
2459  0987  69          	ld	l, c
2460  0988  18 0B       	jr	l_spr_tile_dir_00109
2461  098A              l_spr_tile_dir_00106:
2462  098A  CB 58       	bit	3, b
2463  098C  28 06       	jr	Z,l_spr_tile_dir_00108
2464  098E  E1          	pop	hl
2465  098F  E5          	push	hl
2466  0990  6E          	ld	l, (hl)
2467  0991  09          	add	hl, bc
2468  0992  18 01       	jr	l_spr_tile_dir_00109
2469  0994              l_spr_tile_dir_00108:
2470  0994  69          	ld	l, c
2471  0995              l_spr_tile_dir_00109:
2472  0995  F1          	pop	af
2473  0996  DD E1       	pop	ix
2474  0998  C9          	ret
2475  0999              	SECTION code_compiler
2476  0999              ;	---------------------------------
2477  0999              ; Function spr_brick_anim
2478  0999              ; ---------------------------------
2479  0999              _spr_brick_anim:
2480  0999  CD 00 00    	call	___sdcc_enter_ix
2481  099C  F5          	push	af
2482  099D  DD 75 FF    	ld	(ix-1),l
2483  09A0  21 00 00    	ld	hl,_player_hit_col
2484  09A3  46          	ld	b, (hl)
2485  09A4  21 00 00    	ld	hl,_player_hit_lin
2486  09A7  4E          	ld	c, (hl)
2487  09A8  C5          	push	bc
2488  09A9  C5          	push	bc
2489  09AA  CD 00 00    	call	_spr_calc_index
2490  09AD  F1          	pop	af
2491  09AE  C1          	pop	bc
2492  09AF  22 00 00    	ld	(_index1),hl
2493  09B2  11 F0 FF    	ld	de,0xfff0
2494  09B5  19          	add	hl,de
2495  09B6  11 00 00    	ld	de,_scr_map
2496  09B9  19          	add	hl, de
2497  09BA  7E          	ld	a, (hl)
2498  09BB  DD 77 FE    	ld	(ix-2),a
2499  09BE  11 00 00    	ld	de,_scr_map
2500  09C1  2A 00 00    	ld	hl,(_index1)
2501  09C4  19          	add	hl,de
2502  09C5  6E          	ld	l, (hl)
2503  09C6  EB          	ex	de,hl
2504  09C7  DD 7E FF    	ld	a,(ix-1)
2505  09CA  B7          	or	a, a
2506  09CB  28 06       	jr	Z,l_spr_brick_anim_00102
2507  09CD  79          	ld	a, c
2508  09CE  C6 F6       	add	a,0xf6
2509  09D0  57          	ld	d, a
2510  09D1  18 04       	jr	l_spr_brick_anim_00103
2511  09D3              l_spr_brick_anim_00102:
2512  09D3  79          	ld	a, c
2513  09D4  C6 F8       	add	a,0xf8
2514  09D6  57          	ld	d, a
2515  09D7              l_spr_brick_anim_00103:
2516  09D7  F3          	di
2517  09D8  DD 7E FF    	ld	a,(ix-1)
2518  09DB  B7          	or	a, a
2519  09DC  28 17       	jr	Z,l_spr_brick_anim_00107
2520  09DE  3A 00 00    	ld	a,(_map_paper_clr)
2521  09E1  C5          	push	bc
2522  09E2  D5          	push	de
2523  09E3  C5          	push	bc
2524  09E4  F5          	push	af
2525  09E5  33          	inc	sp
2526  09E6  CD 00 00    	call	_NIRVANAP_fillT_raw_callee
2527  09E9  D1          	pop	de
2528  09EA  C1          	pop	bc
2529  09EB  4A          	ld	c, d
2530  09EC  C5          	push	bc
2531  09ED  7B          	ld	a, e
2532  09EE  F5          	push	af
2533  09EF  33          	inc	sp
2534  09F0  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2535  09F3  18 20       	jr	l_spr_brick_anim_00108
2536  09F5              l_spr_brick_anim_00107:
2537  09F5  DD 7E FE    	ld	a,(ix-2)
2538  09F8  D6 80       	sub	a,0x80
2539  09FA  30 11       	jr	NC,l_spr_brick_anim_00105
2540  09FC  7A          	ld	a, d
2541  09FD  C6 F0       	add	a,0xf0
2542  09FF  C5          	push	bc
2543  0A00  D5          	push	de
2544  0A01  4F          	ld	c,a
2545  0A02  C5          	push	bc
2546  0A03  DD 7E FE    	ld	a,(ix-2)
2547  0A06  F5          	push	af
2548  0A07  33          	inc	sp
2549  0A08  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2550  0A0B  D1          	pop	de
2551  0A0C  C1          	pop	bc
2552  0A0D              l_spr_brick_anim_00105:
2553  0A0D  4A          	ld	c, d
2554  0A0E  C5          	push	bc
2555  0A0F  7B          	ld	a, e
2556  0A10  F5          	push	af
2557  0A11  33          	inc	sp
2558  0A12  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2559  0A15              l_spr_brick_anim_00108:
2560  0A15  FB          	ei
2561  0A16  F1          	pop	af
2562  0A17  DD E1       	pop	ix
2563  0A19  C9          	ret
2564  0A1A              	SECTION code_compiler
2565  0A1A              ;	---------------------------------
2566  0A1A              ; Function spr_draw_index
2567  0A1A              ; ---------------------------------
2568  0A1A              _spr_draw_index:
2569  0A1A  7E          	ld	a,(hl)
2570  0A1B  5F          	ld	e,a
2571  0A1C  E6 0F       	and	a,0x0f
2572  0A1E  87          	add	a,a
2573  0A1F  32 00 00    	ld	(_s_col1),a
2574  0A22  4D          	ld	c,l
2575  0A23  44          	ld	b,h
2576  0A24  21 00 00    	ld	hl,_s_lin1
2577  0A27  73          	ld	(hl),e
2578  0A28  7B          	ld	a,e
2579  0A29  07          	rlca
2580  0A2A  07          	rlca
2581  0A2B  07          	rlca
2582  0A2C  07          	rlca
2583  0A2D  E6 0F       	and	a,0x0f
2584  0A2F  07          	rlca
2585  0A30  07          	rlca
2586  0A31  07          	rlca
2587  0A32  07          	rlca
2588  0A33  E6 F0       	and	a,0xf0
2589  0A35  77          	ld	(hl), a
2590  0A36  F3          	di
2591  0A37  69          	ld	l, c
2592  0A38  60          	ld	h, b
2593  0A39  4E          	ld	c, (hl)
2594  0A3A  23          	inc	hl
2595  0A3B  46          	ld	b, (hl)
2596  0A3C  21 00 00    	ld	hl,_scr_map
2597  0A3F  09          	add	hl, bc
2598  0A40  46          	ld	b, (hl)
2599  0A41  3A 00 00    	ld	a,(_s_col1)
2600  0A44  F5          	push	af
2601  0A45  33          	inc	sp
2602  0A46  3A 00 00    	ld	a,(_s_lin1)
2603  0A49  48          	ld	c,b
2604  0A4A  47          	ld	b,a
2605  0A4B  C5          	push	bc
2606  0A4C  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2607  0A4F  FB          	ei
2608  0A50  C9          	ret
2609  0A51              	SECTION code_compiler
2610  0A51              ;	---------------------------------
2611  0A51              ; Function spr_back_repaint
2612  0A51              ; ---------------------------------
2613  0A51              _spr_back_repaint:
2614  0A51  CD 00 00    	call	___sdcc_enter_ix
2615  0A54  3B          	dec	sp
2616  0A55  3A 00 00    	ld	a,(_spr_hack)
2617  0A58  B7          	or	a, a
2618  0A59  20 02       	jr	NZ,l_spr_back_repaint_00102
2619  0A5B  76          	halt
2620  0A5C  F3          	di
2621  0A5D              l_spr_back_repaint_00102:
2622  0A5D  2A FF FF    	ld	hl,(_s_col0 - 1)
2623  0A60  3A 00 00    	ld	a,(_s_lin0)
2624  0A63  6F          	ld	l,a
2625  0A64  E5          	push	hl
2626  0A65  CD 00 00    	call	_spr_calc_index
2627  0A68  F1          	pop	af
2628  0A69  7D          	ld	a,l
2629  0A6A  32 00 00    	ld	(_sprite_curr_index),a
2630  0A6D  21 00 00    	ld	hl,_s_lin0
2631  0A70  7E          	ld	a, (hl)
2632  0A71  E6 0F       	and	a,0x0f
2633  0A73  DD 77 FF    	ld	(ix-1),a
2634  0A76  7E          	ld	a,(hl)
2635  0A77  4F          	ld	c,a
2636  0A78  07          	rlca
2637  0A79  07          	rlca
2638  0A7A  07          	rlca
2639  0A7B  07          	rlca
2640  0A7C  E6 0F       	and	a,0x0f
2641  0A7E  07          	rlca
2642  0A7F  07          	rlca
2643  0A80  07          	rlca
2644  0A81  07          	rlca
2645  0A82  E6 F0       	and	a,0xf0
2646  0A84  47          	ld	b, a
2647  0A85  21 00 00    	ld	hl,_s_col0
2648  0A88  CB 46       	bit	0, (hl)
2649  0A8A  20 48       	jr	NZ,l_spr_back_repaint_00110
2650  0A8C  2A 00 00    	ld	hl,(_sprite_curr_index)
2651  0A8F  26 00       	ld	h,0x00
2652  0A91  11 00 00    	ld	de,_scr_map
2653  0A94  19          	add	hl,de
2654  0A95  7E          	ld	a,(hl)
2655  0A96  32 00 00    	ld	(_stp_tile),a
2656  0A99  3A 00 00    	ld	a,(_s_col0)
2657  0A9C  32 00 00    	ld	(_stp_col),a
2658  0A9F  DD 7E FF    	ld	a,(ix-1)
2659  0AA2  B7          	or	a, a
2660  0AA3  20 0A       	jr	NZ,l_spr_back_repaint_00104
2661  0AA5  21 00 00    	ld	hl,_stp_row
2662  0AA8  71          	ld	(hl), c
2663  0AA9  CD 7D 0B    	call	_spr_tile_paint
2664  0AAC  C3 72 0B    	jp	l_spr_back_repaint_00111
2665  0AAF              l_spr_back_repaint_00104:
2666  0AAF  21 00 00    	ld	hl,_stp_row
2667  0AB2  70          	ld	(hl), b
2668  0AB3  CD 7D 0B    	call	_spr_tile_paint
2669  0AB6  21 00 00    	ld	hl,_stp_row
2670  0AB9  7E          	ld	a, (hl)
2671  0ABA  C6 10       	add	a,0x10
2672  0ABC  77          	ld	(hl), a
2673  0ABD  2A 00 00    	ld	hl,(_sprite_curr_index)
2674  0AC0  26 00       	ld	h,0x00
2675  0AC2  01 10 00    	ld	bc,0x0010
2676  0AC5  09          	add	hl,bc
2677  0AC6  11 00 00    	ld	de,_scr_map
2678  0AC9  19          	add	hl, de
2679  0ACA  7E          	ld	a, (hl)
2680  0ACB  32 00 00    	ld	(_stp_tile),a
2681  0ACE  CD 7D 0B    	call	_spr_tile_paint
2682  0AD1  C3 72 0B    	jp	l_spr_back_repaint_00111
2683  0AD4              l_spr_back_repaint_00110:
2684  0AD4  2A 00 00    	ld	hl,(_sprite_curr_index)
2685  0AD7  26 00       	ld	h,0x00
2686  0AD9  11 00 00    	ld	de,_scr_map
2687  0ADC  19          	add	hl,de
2688  0ADD  7E          	ld	a,(hl)
2689  0ADE  32 00 00    	ld	(_stp_tile),a
2690  0AE1  3A 00 00    	ld	a,(_s_col0)
2691  0AE4  C6 FF       	add	a,0xff
2692  0AE6  32 00 00    	ld	(_stp_col),a
2693  0AE9  DD 7E FF    	ld	a,(ix-1)
2694  0AEC  B7          	or	a, a
2695  0AED  20 23       	jr	NZ,l_spr_back_repaint_00107
2696  0AEF  21 00 00    	ld	hl,_stp_row
2697  0AF2  71          	ld	(hl), c
2698  0AF3  CD 7D 0B    	call	_spr_tile_paint
2699  0AF6  21 00 00    	ld	hl,_sprite_curr_index
2700  0AF9  4E          	ld	c,(hl)
2701  0AFA  0C          	inc	c
2702  0AFB  71          	ld	(hl),c
2703  0AFC  06 00       	ld	b,0x00
2704  0AFE  21 00 00    	ld	hl,_scr_map
2705  0B01  09          	add	hl,bc
2706  0B02  7E          	ld	a,(hl)
2707  0B03  32 00 00    	ld	(_stp_tile),a
2708  0B06  3A 00 00    	ld	a,(_s_col0)
2709  0B09  3C          	inc	a
2710  0B0A  32 00 00    	ld	(_stp_col),a
2711  0B0D  CD 7D 0B    	call	_spr_tile_paint
2712  0B10  18 60       	jr	l_spr_back_repaint_00111
2713  0B12              l_spr_back_repaint_00107:
2714  0B12  21 00 00    	ld	hl,_stp_row
2715  0B15  70          	ld	(hl), b
2716  0B16  CD 7D 0B    	call	_spr_tile_paint
2717  0B19  3A 00 00    	ld	a,(_s_col0)
2718  0B1C  3C          	inc	a
2719  0B1D  32 00 00    	ld	(_stp_col),a
2720  0B20  21 00 00    	ld	hl,_sprite_curr_index
2721  0B23  4E          	ld	c,(hl)
2722  0B24  0C          	inc	c
2723  0B25  71          	ld	(hl),c
2724  0B26  06 00       	ld	b,0x00
2725  0B28  21 00 00    	ld	hl,_scr_map
2726  0B2B  09          	add	hl,bc
2727  0B2C  7E          	ld	a,(hl)
2728  0B2D  32 00 00    	ld	(_stp_tile),a
2729  0B30  CD 7D 0B    	call	_spr_tile_paint
2730  0B33  3A 00 00    	ld	a,(_s_col0)
2731  0B36  C6 FF       	add	a,0xff
2732  0B38  32 00 00    	ld	(_stp_col),a
2733  0B3B  21 00 00    	ld	hl,_stp_row
2734  0B3E  7E          	ld	a, (hl)
2735  0B3F  C6 10       	add	a,0x10
2736  0B41  77          	ld	(hl), a
2737  0B42  21 00 00    	ld	hl,_sprite_curr_index
2738  0B45  7E          	ld	a, (hl)
2739  0B46  C6 0F       	add	a,0x0f
2740  0B48  77          	ld	(hl), a
2741  0B49  C6 00       	add	a,+((_scr_map) & 0xFF)
2742  0B4B  4F          	ld	c, a
2743  0B4C  3E 00       	ld	a, +((_scr_map) / 256)
2744  0B4E  CE 00       	adc	a,0x00
2745  0B50  47          	ld	b, a
2746  0B51  0A          	ld	a, (bc)
2747  0B52  32 00 00    	ld	(_stp_tile),a
2748  0B55  CD 7D 0B    	call	_spr_tile_paint
2749  0B58  21 00 00    	ld	hl,_sprite_curr_index
2750  0B5B  4E          	ld	c,(hl)
2751  0B5C  0C          	inc	c
2752  0B5D  71          	ld	(hl),c
2753  0B5E  06 00       	ld	b,0x00
2754  0B60  21 00 00    	ld	hl,_scr_map
2755  0B63  09          	add	hl,bc
2756  0B64  7E          	ld	a,(hl)
2757  0B65  32 00 00    	ld	(_stp_tile),a
2758  0B68  3A 00 00    	ld	a,(_s_col0)
2759  0B6B  3C          	inc	a
2760  0B6C  32 00 00    	ld	(_stp_col),a
2761  0B6F  CD 7D 0B    	call	_spr_tile_paint
2762  0B72              l_spr_back_repaint_00111:
2763  0B72  3A 00 00    	ld	a,(_spr_hack)
2764  0B75  B7          	or	a, a
2765  0B76  20 01       	jr	NZ,l_spr_back_repaint_00114
2766  0B78  FB          	ei
2767  0B79              l_spr_back_repaint_00114:
2768  0B79  33          	inc	sp
2769  0B7A  DD E1       	pop	ix
2770  0B7C  C9          	ret
2771  0B7D              	SECTION code_compiler
2772  0B7D              ;	---------------------------------
2773  0B7D              ; Function spr_tile_paint
2774  0B7D              ; ---------------------------------
2775  0B7D              _spr_tile_paint:
2776  0B7D  3A 00 00    	ld	a,(_stp_tile)
2777  0B80  B7          	or	a, a
2778  0B81  20 13       	jr	NZ,l_spr_tile_paint_00111
2779  0B83  2A FF FF    	ld	hl,(_stp_col - 1)
2780  0B86  3A 00 00    	ld	a,(_stp_row)
2781  0B89  6F          	ld	l,a
2782  0B8A  3A 00 00    	ld	a,(_map_paper_clr)
2783  0B8D  E5          	push	hl
2784  0B8E  F5          	push	af
2785  0B8F  33          	inc	sp
2786  0B90  CD 00 00    	call	_NIRVANAP_fillT_raw_callee
2787  0B93  C3 15 0C    	jp	l_spr_tile_paint_00113
2788  0B96              l_spr_tile_paint_00111:
2789  0B96  21 00 00    	ld	hl,_stp_tile
2790  0B99  7E          	ld	a, (hl)
2791  0B9A  D6 80       	sub	a,0x80
2792  0B9C  30 35       	jr	NC,l_spr_tile_paint_00108
2793  0B9E  7E          	ld	a, (hl)
2794  0B9F  D6 23       	sub	a,0x23
2795  0BA1  28 12       	jr	Z,l_spr_tile_paint_00102
2796  0BA3  2A FF FF    	ld	hl,(_stp_col - 1)
2797  0BA6  3A 00 00    	ld	a,(_stp_row)
2798  0BA9  6F          	ld	l,a
2799  0BAA  3A 00 00    	ld	a,(_stp_tile)
2800  0BAD  E5          	push	hl
2801  0BAE  F5          	push	af
2802  0BAF  33          	inc	sp
2803  0BB0  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2804  0BB3  18 60       	jr	l_spr_tile_paint_00113
2805  0BB5              l_spr_tile_paint_00102:
2806  0BB5  2A 00 00    	ld	hl,(_sprite_curr_index)
2807  0BB8  26 00       	ld	h,0x00
2808  0BBA  CD 00 00    	call	_game_match_back
2809  0BBD  7D          	ld	a,l
2810  0BBE  32 00 00    	ld	(_stp_tile),a
2811  0BC1  2A FF FF    	ld	hl,(_stp_col - 1)
2812  0BC4  3A 00 00    	ld	a,(_stp_row)
2813  0BC7  6F          	ld	l,a
2814  0BC8  3A 00 00    	ld	a,(_stp_tile)
2815  0BCB  E5          	push	hl
2816  0BCC  F5          	push	af
2817  0BCD  33          	inc	sp
2818  0BCE  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2819  0BD1  18 42       	jr	l_spr_tile_paint_00113
2820  0BD3              l_spr_tile_paint_00108:
2821  0BD3  3A 00 00    	ld	a,(_stp_tile)
2822  0BD6  C6 80       	add	a,0x80
2823  0BD8  4F          	ld	c, a
2824  0BD9  06 00       	ld	b,0x00
2825  0BDB  21 00 00    	ld	hl,_anim_end
2826  0BDE  09          	add	hl, bc
2827  0BDF  46          	ld	b, (hl)
2828  0BE0  11 00 00    	ld	de,_anim_int+0
2829  0BE3  69          	ld	l,c
2830  0BE4  26 00       	ld	h,0x00
2831  0BE6  19          	add	hl, de
2832  0BE7  7E          	ld	a,(hl)
2833  0BE8  5F          	ld	e,a
2834  0BE9  90          	sub	a, b
2835  0BEA  30 19       	jr	NC,l_spr_tile_paint_00105
2836  0BEC  06 00       	ld	b,0x00
2837  0BEE  21 00 00    	ld	hl,_anim_tile
2838  0BF1  09          	add	hl, bc
2839  0BF2  7E          	ld	a,(hl)
2840  0BF3  83          	add	a, e
2841  0BF4  47          	ld	b, a
2842  0BF5  3A 00 00    	ld	a,(_stp_col)
2843  0BF8  F5          	push	af
2844  0BF9  33          	inc	sp
2845  0BFA  3A 00 00    	ld	a,(_stp_row)
2846  0BFD  48          	ld	c,b
2847  0BFE  47          	ld	b,a
2848  0BFF  C5          	push	bc
2849  0C00  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2850  0C03  18 10       	jr	l_spr_tile_paint_00113
2851  0C05              l_spr_tile_paint_00105:
2852  0C05  2A FF FF    	ld	hl,(_stp_col - 1)
2853  0C08  3A 00 00    	ld	a,(_stp_row)
2854  0C0B  6F          	ld	l,a
2855  0C0C  3A 00 00    	ld	a,(_map_paper_clr)
2856  0C0F  E5          	push	hl
2857  0C10  F5          	push	af
2858  0C11  33          	inc	sp
2859  0C12  CD 00 00    	call	_NIRVANAP_fillT_raw_callee
2860  0C15              l_spr_tile_paint_00113:
2861  0C15  C9          	ret
2862  0C16              	SECTION code_compiler
2863  0C16              ;	---------------------------------
2864  0C16              ; Function spr_init_effects
2865  0C16              ; ---------------------------------
2866  0C16              _spr_init_effects:
2867  0C16  01 00 00    	ld	bc,_anim_lin+0
2868  0C19  1E 00       	ld	e,0x00
2869  0C1B              l_spr_init_effects_00102:
2870  0C1B  6B          	ld	l,e
2871  0C1C  26 00       	ld	h,0x00
2872  0C1E  09          	add	hl, bc
2873  0C1F  36 FF       	ld	(hl),0xff
2874  0C21  16 00       	ld	d,0x00
2875  0C23  21 00 00    	ld	hl,_bullet_col
2876  0C26  19          	add	hl, de
2877  0C27  36 FF       	ld	(hl),0xff
2878  0C29  1C          	inc	e
2879  0C2A  3E 07       	ld	a,0x07
2880  0C2C  93          	sub	a, e
2881  0C2D  30 EC       	jr	NC,l_spr_init_effects_00102
2882  0C2F  21 00 00    	ld	hl,_bullet_count
2883  0C32  36 00       	ld	(hl),0x00
2884  0C34  21 00 00    	ld	hl,_anim_count
2885  0C37  36 00       	ld	(hl),0x00
2886  0C39  C9          	ret
2887  0C3A              	SECTION code_compiler
2888  0C3A              ;	---------------------------------
2889  0C3A              ; Function spr_add_anim
2890  0C3A              ; ---------------------------------
2891  0C3A              _spr_add_anim:
2892  0C3A  CD 00 00    	call	___sdcc_enter_ix
2893  0C3D  F5          	push	af
2894  0C3E  F5          	push	af
2895  0C3F  3B          	dec	sp
2896  0C40  DD 7E 05    	ld	a,(ix+5)
2897  0C43  D6 1F       	sub	a,0x1f
2898  0C45  D2 08 0D    	jp	NC, l_spr_add_anim_00111
2899  0C48  DD 7E 04    	ld	a,(ix+4)
2900  0C4B  D6 B8       	sub	a,0xb8
2901  0C4D  D2 08 0D    	jp	NC, l_spr_add_anim_00111
2902  0C50  0E 00       	ld	c,0x00
2903  0C52  DD 71 FF    	ld	(ix-1),c
2904  0C55              l_spr_add_anim_00109:
2905  0C55  3E 00       	ld	a, +((_anim_lin) & 0xFF)
2906  0C57  81          	add	a, c
2907  0C58  5F          	ld	e, a
2908  0C59  3E 00       	ld	a, +((_anim_lin) / 256)
2909  0C5B  CE 00       	adc	a,0x00
2910  0C5D  57          	ld	d, a
2911  0C5E  1A          	ld	a, (de)
2912  0C5F  3C          	inc	a
2913  0C60  C2 FE 0C    	jp	NZ,l_spr_add_anim_00110
2914  0C63  21 00 00    	ld	hl,_anim_count
2915  0C66  34          	inc	(hl)
2916  0C67  DD 7E 04    	ld	a,(ix+4)
2917  0C6A  12          	ld	(de), a
2918  0C6B  3E 00       	ld	a, +((_anim_col) & 0xFF)
2919  0C6D  DD 86 FF    	add	a,(ix-1)
2920  0C70  DD 77 FB    	ld	(ix-5),a
2921  0C73  3E 00       	ld	a, +((_anim_col) / 256)
2922  0C75  CE 00       	adc	a,0x00
2923  0C77  DD 77 FC    	ld	(ix-4),a
2924  0C7A  E1          	pop	hl
2925  0C7B  E5          	push	hl
2926  0C7C  DD 7E 05    	ld	a,(ix+5)
2927  0C7F  77          	ld	(hl), a
2928  0C80  01 00 00    	ld	bc,_anim_tile
2929  0C83  DD 6E FF    	ld	l,(ix-1)
2930  0C86  26 00       	ld	h,0x00
2931  0C88  09          	add	hl,bc
2932  0C89  DD 75 FD    	ld	(ix-3),l
2933  0C8C  DD 74 FE    	ld	(ix-2),h
2934  0C8F  DD 7E 06    	ld	a,(ix+6)
2935  0C92  77          	ld	(hl), a
2936  0C93  3E 00       	ld	a, +((_anim_loop) & 0xFF)
2937  0C95  DD 86 FF    	add	a,(ix-1)
2938  0C98  4F          	ld	c, a
2939  0C99  3E 00       	ld	a, +((_anim_loop) / 256)
2940  0C9B  CE 00       	adc	a,0x00
2941  0C9D  47          	ld	b, a
2942  0C9E  DD 7E 08    	ld	a,(ix+8)
2943  0CA1  02          	ld	(bc), a
2944  0CA2  01 00 00    	ld	bc,_anim_int+0
2945  0CA5  DD 6E FF    	ld	l,(ix-1)
2946  0CA8  26 00       	ld	h,0x00
2947  0CAA  09          	add	hl, bc
2948  0CAB  36 00       	ld	(hl),0x00
2949  0CAD  3E 00       	ld	a, +((_anim_end) & 0xFF)
2950  0CAF  DD 86 FF    	add	a,(ix-1)
2951  0CB2  4F          	ld	c, a
2952  0CB3  3E 00       	ld	a, +((_anim_end) / 256)
2953  0CB5  CE 00       	adc	a,0x00
2954  0CB7  47          	ld	b, a
2955  0CB8  DD 7E 07    	ld	a,(ix+7)
2956  0CBB  02          	ld	(bc), a
2957  0CBC  3E 00       	ld	a, +((_anim_respanwn) & 0xFF)
2958  0CBE  DD 86 FF    	add	a,(ix-1)
2959  0CC1  4F          	ld	c, a
2960  0CC2  3E 00       	ld	a, +((_anim_respanwn) / 256)
2961  0CC4  CE 00       	adc	a,0x00
2962  0CC6  47          	ld	b, a
2963  0CC7  DD 7E 09    	ld	a,(ix+9)
2964  0CCA  02          	ld	(bc), a
2965  0CCB  F3          	di
2966  0CCC  E1          	pop	hl
2967  0CCD  46          	ld	b,(hl)
2968  0CCE  1A          	ld	a,(de)
2969  0CCF  E5          	push	hl
2970  0CD0  DD 6E FD    	ld	l,(ix-3)
2971  0CD3  DD 66 FE    	ld	h,(ix-2)
2972  0CD6  56          	ld	d, (hl)
2973  0CD7  C5          	push	bc
2974  0CD8  33          	inc	sp
2975  0CD9  5A          	ld	e,d
2976  0CDA  57          	ld	d,a
2977  0CDB  D5          	push	de
2978  0CDC  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2979  0CDF  FB          	ei
2980  0CE0  DD 66 05    	ld	h,(ix+5)
2981  0CE3  DD 6E 04    	ld	l,(ix+4)
2982  0CE6  E5          	push	hl
2983  0CE7  CD 00 00    	call	_spr_calc_index
2984  0CEA  F1          	pop	af
2985  0CEB  22 00 00    	ld	(_index0),hl
2986  0CEE  01 00 00    	ld	bc,_scr_map
2987  0CF1  09          	add	hl,bc
2988  0CF2  7E          	ld	a,(hl)
2989  0CF3  B7          	or	a,a
2990  0CF4  20 12       	jr	NZ,l_spr_add_anim_00111
2991  0CF6  DD 7E FF    	ld	a,(ix-1)
2992  0CF9  C6 80       	add	a,0x80
2993  0CFB  77          	ld	(hl),a
2994  0CFC  18 0A       	jr	l_spr_add_anim_00111
2995  0CFE              l_spr_add_anim_00110:
2996  0CFE  0C          	inc	c
2997  0CFF  DD 71 FF    	ld	(ix-1),c
2998  0D02  79          	ld	a, c
2999  0D03  D6 08       	sub	a,0x08
3000  0D05  DA 55 0C    	jp	C, l_spr_add_anim_00109
3001  0D08              l_spr_add_anim_00111:
3002  0D08  DD F9       	ld	sp, ix
3003  0D0A  DD E1       	pop	ix
3004  0D0C  C9          	ret
3005  0D0D              	SECTION code_compiler
3006  0D0D              ;	---------------------------------
3007  0D0D              ; Function spr_play_anim
3008  0D0D              ; ---------------------------------
3009  0D0D              _spr_play_anim:
3010  0D0D  CD 00 00    	call	___sdcc_enter_ix
3011  0D10  F5          	push	af
3012  0D11  F5          	push	af
3013  0D12  3B          	dec	sp
3014  0D13  0E 00       	ld	c,0x00
3015  0D15              l_spr_play_anim_00114:
3016  0D15  3E 00       	ld	a, +((_anim_lin) & 0xFF)
3017  0D17  81          	add	a, c
3018  0D18  DD 77 FD    	ld	(ix-3),a
3019  0D1B  6F          	ld	l,a
3020  0D1C  3E 00       	ld	a,+((_anim_lin) / 256)
3021  0D1E  CE 00       	adc	a,0x00
3022  0D20  DD 77 FE    	ld	(ix-2),a
3023  0D23  67          	ld	h,a
3024  0D24  7E          	ld	a,(hl)
3025  0D25  5F          	ld	e,a
3026  0D26  3C          	inc	a
3027  0D27  CA E9 0D    	jp	Z,l_spr_play_anim_00115
3028  0D2A  3E 00       	ld	a, +((_anim_int) & 0xFF)
3029  0D2C  81          	add	a, c
3030  0D2D  DD 77 FB    	ld	(ix-5),a
3031  0D30  3E 00       	ld	a, +((_anim_int) / 256)
3032  0D32  CE 00       	adc	a,0x00
3033  0D34  DD 77 FC    	ld	(ix-4),a
3034  0D37  E1          	pop	hl
3035  0D38  56          	ld	d,(hl)
3036  0D39  E5          	push	hl
3037  0D3A  06 00       	ld	b,0x00
3038  0D3C  21 00 00    	ld	hl,_anim_end
3039  0D3F  09          	add	hl, bc
3040  0D40  46          	ld	b, (hl)
3041  0D41  7A          	ld	a, d
3042  0D42  90          	sub	a, b
3043  0D43  30 2F       	jr	NC,l_spr_play_anim_00109
3044  0D45  F3          	di
3045  0D46  06 00       	ld	b,0x00
3046  0D48  21 00 00    	ld	hl,_anim_col
3047  0D4B  09          	add	hl, bc
3048  0D4C  5E          	ld	e, (hl)
3049  0D4D  DD 6E FD    	ld	l,(ix-3)
3050  0D50  DD 66 FE    	ld	h,(ix-2)
3051  0D53  56          	ld	d, (hl)
3052  0D54  06 00       	ld	b,0x00
3053  0D56  21 00 00    	ld	hl,_anim_tile
3054  0D59  09          	add	hl, bc
3055  0D5A  46          	ld	b, (hl)
3056  0D5B  E1          	pop	hl
3057  0D5C  E5          	push	hl
3058  0D5D  6E          	ld	l, (hl)
3059  0D5E  78          	ld	a, b
3060  0D5F  85          	add	a, l
3061  0D60  47          	ld	b, a
3062  0D61  C5          	push	bc
3063  0D62  7B          	ld	a, e
3064  0D63  5A          	ld	e,d
3065  0D64  57          	ld	d,a
3066  0D65  D5          	push	de
3067  0D66  C5          	push	bc
3068  0D67  33          	inc	sp
3069  0D68  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
3070  0D6B  C1          	pop	bc
3071  0D6C  FB          	ei
3072  0D6D  E1          	pop	hl
3073  0D6E  46          	ld	b,(hl)
3074  0D6F  04          	inc	b
3075  0D70  E5          	push	hl
3076  0D71  70          	ld	(hl), b
3077  0D72  18 75       	jr	l_spr_play_anim_00115
3078  0D74              l_spr_play_anim_00109:
3079  0D74  06 00       	ld	b,0x00
3080  0D76  21 00 00    	ld	hl,_anim_loop
3081  0D79  09          	add	hl, bc
3082  0D7A  7E          	ld	a, (hl)
3083  0D7B  DD 77 FF    	ld	(ix-1),a
3084  0D7E  B7          	or	a, a
3085  0D7F  20 5F       	jr	NZ,l_spr_play_anim_00106
3086  0D81  21 00 00    	ld	hl,_anim_count
3087  0D84  35          	dec	(hl)
3088  0D85  06 00       	ld	b,0x00
3089  0D87  21 00 00    	ld	hl,_anim_col
3090  0D8A  09          	add	hl, bc
3091  0D8B  7E          	ld	a, (hl)
3092  0D8C  32 00 00    	ld	(_s_col0),a
3093  0D8F  21 00 00    	ld	hl,_s_lin0
3094  0D92  73          	ld	(hl), e
3095  0D93  3A 00 00    	ld	a,(_s_col0)
3096  0D96  2A 00 00    	ld	hl,(_s_lin0)
3097  0D99  C5          	push	bc
3098  0D9A  67          	ld	h,a
3099  0D9B  E5          	push	hl
3100  0D9C  CD 00 00    	call	_spr_calc_index
3101  0D9F  F1          	pop	af
3102  0DA0  EB          	ex	de,hl
3103  0DA1  C1          	pop	bc
3104  0DA2  EB          	ex	de,hl
3105  0DA3  22 00 00    	ld	(_index0),hl
3106  0DA6  11 00 00    	ld	de,_scr_map
3107  0DA9  19          	add	hl,de
3108  0DAA  7E          	ld	a,(hl)
3109  0DAB  EB          	ex	de,hl
3110  0DAC  D6 80       	sub	a,0x80
3111  0DAE  38 11       	jr	C,l_spr_play_anim_00102
3112  0DB0  21 01 00    	ld	hl,_index0 + 1
3113  0DB3  C5          	push	bc
3114  0DB4  D5          	push	de
3115  0DB5  2B          	dec	hl
3116  0DB6  7E          	ld	a, (hl)
3117  0DB7  23          	inc	hl
3118  0DB8  66          	ld	h, (hl)
3119  0DB9  6F          	ld	l, a
3120  0DBA  CD 00 00    	call	_game_match_back_strict
3121  0DBD  D1          	pop	de
3122  0DBE  C1          	pop	bc
3123  0DBF  7D          	ld	a,l
3124  0DC0  12          	ld	(de), a
3125  0DC1              l_spr_play_anim_00102:
3126  0DC1  C5          	push	bc
3127  0DC2  CD 51 0A    	call	_spr_back_repaint
3128  0DC5  C1          	pop	bc
3129  0DC6  06 00       	ld	b,0x00
3130  0DC8  21 00 00    	ld	hl,_anim_respanwn
3131  0DCB  09          	add	hl, bc
3132  0DCC  7E          	ld	a, (hl)
3133  0DCD  B7          	or	a, a
3134  0DCE  28 06       	jr	Z,l_spr_play_anim_00104
3135  0DD0  C5          	push	bc
3136  0DD1  69          	ld	l, c
3137  0DD2  CD 00 00    	call	_enemy_respawn
3138  0DD5  C1          	pop	bc
3139  0DD6              l_spr_play_anim_00104:
3140  0DD6  DD 6E FD    	ld	l,(ix-3)
3141  0DD9  DD 66 FE    	ld	h,(ix-2)
3142  0DDC  36 FF       	ld	(hl),0xff
3143  0DDE  18 09       	jr	l_spr_play_anim_00115
3144  0DE0              l_spr_play_anim_00106:
3145  0DE0  DD 46 FF    	ld	b,(ix-1)
3146  0DE3  05          	dec	b
3147  0DE4  70          	ld	(hl), b
3148  0DE5  E1          	pop	hl
3149  0DE6  E5          	push	hl
3150  0DE7  36 FF       	ld	(hl),0xff
3151  0DE9              l_spr_play_anim_00115:
3152  0DE9  0C          	inc	c
3153  0DEA  79          	ld	a, c
3154  0DEB  D6 08       	sub	a,0x08
3155  0DED  DA 15 0D    	jp	C, l_spr_play_anim_00114
3156  0DF0  DD F9       	ld	sp, ix
3157  0DF2  DD E1       	pop	ix
3158  0DF4  C9          	ret
3159  0DF5              	SECTION code_compiler
3160  0DF5              ;	---------------------------------
3161  0DF5              ; Function spr_bullet_fireball
3162  0DF5              ; ---------------------------------
3163  0DF5              _spr_bullet_fireball:
3164  0DF5  CD 00 00    	call	___sdcc_enter_ix
3165  0DF8  3A 00 00    	ld	a,(_s_lin0)
3166  0DFB  4F          	ld	c,a
3167  0DFC  06 00       	ld	b,0x00
3168  0DFE  2A 00 00    	ld	hl,(_bullet)
3169  0E01  60          	ld	h,b
3170  0E02  11 00 00    	ld	de,_bullet_lin0
3171  0E05  19          	add	hl,de
3172  0E06  5E          	ld	e, (hl)
3173  0E07  16 00       	ld	d,0x00
3174  0E09  79          	ld	a, c
3175  0E0A  93          	sub	a, e
3176  0E0B  6F          	ld	l, a
3177  0E0C  78          	ld	a, b
3178  0E0D  9A          	sbc	a, d
3179  0E0E  67          	ld	h, a
3180  0E0F  CD 00 00    	call	_abs_fastcall
3181  0E12  4D          	ld	c, l
3182  0E13  44          	ld	b, h
3183  0E14  21 00 00    	ld	hl,_s_lin0
3184  0E17  5E          	ld	e, (hl)
3185  0E18  3E 08       	ld	a,0x08
3186  0E1A  B9          	cp	a, c
3187  0E1B  3E 00       	ld	a,0x00
3188  0E1D  98          	sbc	a, b
3189  0E1E  E2 23 0E    	jp	PO, l_spr_bullet_fireball_00110
3190  0E21  EE 80       	xor	a,0x80
3191  0E23              l_spr_bullet_fireball_00110:
3192  0E23  FA 3C 0E    	jp	M, l_spr_bullet_fireball_00102
3193  0E26  7B          	ld	a, e
3194  0E27  DD 86 04    	add	a,(ix+4)
3195  0E2A  32 00 00    	ld	(_s_lin0),a
3196  0E2D  2A 00 00    	ld	hl,(_bullet)
3197  0E30  26 00       	ld	h,0x00
3198  0E32  01 00 00    	ld	bc,_bullet_lin
3199  0E35  09          	add	hl,bc
3200  0E36  3A 00 00    	ld	a,(_s_lin0)
3201  0E39  77          	ld	(hl),a
3202  0E3A  18 21       	jr	l_spr_bullet_fireball_00104
3203  0E3C              l_spr_bullet_fireball_00102:
3204  0E3C  7B          	ld	a, e
3205  0E3D  DD 96 04    	sub	a,(ix+4)
3206  0E40  32 00 00    	ld	(_s_lin0),a
3207  0E43  2A 00 00    	ld	hl,(_bullet)
3208  0E46  26 00       	ld	h,0x00
3209  0E48  01 00 00    	ld	bc,_bullet_lin
3210  0E4B  09          	add	hl,bc
3211  0E4C  3A 00 00    	ld	a,(_s_lin0)
3212  0E4F  77          	ld	(hl),a
3213  0E50  2A 00 00    	ld	hl,(_bullet)
3214  0E53  26 00       	ld	h,0x00
3215  0E55  01 00 00    	ld	bc,_bullet_class
3216  0E58  09          	add	hl,bc
3217  0E59  DD 7E 05    	ld	a,(ix+5)
3218  0E5C  77          	ld	(hl),a
3219  0E5D              l_spr_bullet_fireball_00104:
3220  0E5D  DD E1       	pop	ix
3221  0E5F  C9          	ret
3222  0E60              	SECTION code_compiler
3223  0E60              ;	---------------------------------
3224  0E60              ; Function spr_bullet_axe
3225  0E60              ; ---------------------------------
3226  0E60              _spr_bullet_axe:
3227  0E60  2A 00 00    	ld	hl,(_bullet)
3228  0E63  26 00       	ld	h,0x00
3229  0E65  01 00 00    	ld	bc,_bullet_lin
3230  0E68  09          	add	hl,bc
3231  0E69  7E          	ld	a,(hl)
3232  0E6A  32 00 00    	ld	(_s_lin0),a
3233  0E6D  2A 00 00    	ld	hl,(_bullet)
3234  0E70  26 00       	ld	h,0x00
3235  0E72  01 00 00    	ld	bc,_bullet_col
3236  0E75  09          	add	hl,bc
3237  0E76  7E          	ld	a,(hl)
3238  0E77  C6 FF       	add	a,0xff
3239  0E79  32 00 00    	ld	(_s_col0),a
3240  0E7C  2A 00 00    	ld	hl,(_bullet)
3241  0E7F  26 00       	ld	h,0x00
3242  0E81  01 00 00    	ld	bc,_bullet_vel
3243  0E84  09          	add	hl,bc
3244  0E85  5E          	ld	e,(hl)
3245  0E86  4D          	ld	c,l
3246  0E87  44          	ld	b,h
3247  0E88  21 00 00    	ld	hl,_game_gravity
3248  0E8B  56          	ld	d, (hl)
3249  0E8C  7B          	ld	a, e
3250  0E8D  82          	add	a, d
3251  0E8E  02          	ld	(bc), a
3252  0E8F  2A 00 00    	ld	hl,(_bullet)
3253  0E92  26 00       	ld	h,0x00
3254  0E94  01 00 00    	ld	bc,_bullet_vel
3255  0E97  09          	add	hl,bc
3256  0E98  5E          	ld	e,(hl)
3257  0E99  3E 78       	ld	a,0x78
3258  0E9B  93          	sub	a,e
3259  0E9C  4D          	ld	c,l
3260  0E9D  44          	ld	b,h
3261  0E9E  E2 A3 0E    	jp	PO, l_spr_bullet_axe_00128
3262  0EA1  EE 80       	xor	a,0x80
3263  0EA3              l_spr_bullet_axe_00128:
3264  0EA3  F2 A9 0E    	jp	P, l_spr_bullet_axe_00102
3265  0EA6  3E 78       	ld	a,0x78
3266  0EA8  02          	ld	(bc), a
3267  0EA9              l_spr_bullet_axe_00102:
3268  0EA9  2A 00 00    	ld	hl,(_bullet)
3269  0EAC  26 00       	ld	h,0x00
3270  0EAE  01 00 00    	ld	bc,_bullet_vel
3271  0EB1  09          	add	hl,bc
3272  0EB2  7E          	ld	a,(hl)
3273  0EB3  EE 80       	xor	a,0x80
3274  0EB5  D6 08       	sub	a,0x08
3275  0EB7  30 02       	jr	NC,l_spr_bullet_axe_00104
3276  0EB9  36 88       	ld	(hl),0x88
3277  0EBB              l_spr_bullet_axe_00104:
3278  0EBB  2A 00 00    	ld	hl,(_bullet)
3279  0EBE  26 00       	ld	h,0x00
3280  0EC0  01 00 00    	ld	bc,_bullet_vel
3281  0EC3  09          	add	hl,bc
3282  0EC4  7E          	ld	a,(hl)
3283  0EC5  CB 47       	bit	0,a
3284  0EC7  32 00 00    	ld	(_s_lin1),a
3285  0ECA  28 04       	jr	Z,l_spr_bullet_axe_00106
3286  0ECC  21 00 00    	ld	hl,_s_lin1
3287  0ECF  35          	dec	(hl)
3288  0ED0              l_spr_bullet_axe_00106:
3289  0ED0  2A 00 00    	ld	hl,(_bullet)
3290  0ED3  26 00       	ld	h,0x00
3291  0ED5  01 00 00    	ld	bc,_bullet_lin
3292  0ED8  09          	add	hl,bc
3293  0ED9  7E          	ld	a,(hl)
3294  0EDA  4D          	ld	c,l
3295  0EDB  44          	ld	b,h
3296  0EDC  21 00 00    	ld	hl,_s_lin1
3297  0EDF  86          	add	a, (hl)
3298  0EE0  21 00 00    	ld	hl,_s_lin0
3299  0EE3  77          	ld	(hl), a
3300  0EE4  3E 90       	ld	a,0x90
3301  0EE6  96          	sub	a, (hl)
3302  0EE7  30 11       	jr	NC,l_spr_bullet_axe_00108
3303  0EE9  21 00 00    	ld	hl,_bullet_count
3304  0EEC  35          	dec	(hl)
3305  0EED  2A 00 00    	ld	hl,(_bullet)
3306  0EF0  26 00       	ld	h,0x00
3307  0EF2  01 00 00    	ld	bc,_bullet_col
3308  0EF5  09          	add	hl,bc
3309  0EF6  36 FF       	ld	(hl),0xff
3310  0EF8  18 04       	jr	l_spr_bullet_axe_00110
3311  0EFA              l_spr_bullet_axe_00108:
3312  0EFA  3A 00 00    	ld	a,(_s_lin0)
3313  0EFD  02          	ld	(bc), a
3314  0EFE              l_spr_bullet_axe_00110:
3315  0EFE  C9          	ret
3316  0EFF              	SECTION code_compiler
3317  0EFF              ;	---------------------------------
3318  0EFF              ; Function spr_colision_b
3319  0EFF              ; ---------------------------------
3320  0EFF              _spr_colision_b:
3321  0EFF  CD 00 00    	call	___sdcc_enter_ix
3322  0F02  3E 00       	ld	a, +((_bullet_class) & 0xFF)
3323  0F04  DD 86 05    	add	a,(ix+5)
3324  0F07  4F          	ld	c, a
3325  0F08  3E 00       	ld	a, +((_bullet_class) / 256)
3326  0F0A  CE 00       	adc	a,0x00
3327  0F0C  47          	ld	b, a
3328  0F0D  0A          	ld	a, (bc)
3329  0F0E  D6 04       	sub	a,0x04
3330  0F10  20 69       	jr	NZ,l_spr_colision_b_00110
3331  0F12  3E 00       	ld	a, +((_lin) & 0xFF)
3332  0F14  DD 86 04    	add	a,(ix+4)
3333  0F17  4F          	ld	c, a
3334  0F18  3E 00       	ld	a, +((_lin) / 256)
3335  0F1A  CE 00       	adc	a,0x00
3336  0F1C  47          	ld	b, a
3337  0F1D  0A          	ld	a, (bc)
3338  0F1E  4F          	ld	c, a
3339  0F1F  06 00       	ld	b,0x00
3340  0F21  3E 00       	ld	a, +((_bullet_lin) & 0xFF)
3341  0F23  DD 86 05    	add	a,(ix+5)
3342  0F26  5F          	ld	e, a
3343  0F27  3E 00       	ld	a, +((_bullet_lin) / 256)
3344  0F29  CE 00       	adc	a,0x00
3345  0F2B  57          	ld	d, a
3346  0F2C  1A          	ld	a, (de)
3347  0F2D  5F          	ld	e, a
3348  0F2E  16 00       	ld	d,0x00
3349  0F30  79          	ld	a, c
3350  0F31  93          	sub	a, e
3351  0F32  6F          	ld	l, a
3352  0F33  78          	ld	a, b
3353  0F34  9A          	sbc	a, d
3354  0F35  67          	ld	h, a
3355  0F36  CD 00 00    	call	_abs_fastcall
3356  0F39  7D          	ld	a,l
3357  0F3A  D6 10       	sub	a,0x10
3358  0F3C  7C          	ld	a,h
3359  0F3D  17          	rla
3360  0F3E  3F          	ccf
3361  0F3F  1F          	rra
3362  0F40  DE 80       	sbc	a,0x80
3363  0F42  D2 E6 0F    	jp	NC, l_spr_colision_b_00111
3364  0F45  3E 00       	ld	a, +((_col) & 0xFF)
3365  0F47  DD 86 04    	add	a,(ix+4)
3366  0F4A  4F          	ld	c, a
3367  0F4B  3E 00       	ld	a, +((_col) / 256)
3368  0F4D  CE 00       	adc	a,0x00
3369  0F4F  47          	ld	b, a
3370  0F50  0A          	ld	a, (bc)
3371  0F51  4F          	ld	c, a
3372  0F52  06 00       	ld	b,0x00
3373  0F54  3E 00       	ld	a, +((_bullet_col) & 0xFF)
3374  0F56  DD 86 05    	add	a,(ix+5)
3375  0F59  5F          	ld	e, a
3376  0F5A  3E 00       	ld	a, +((_bullet_col) / 256)
3377  0F5C  CE 00       	adc	a,0x00
3378  0F5E  57          	ld	d, a
3379  0F5F  1A          	ld	a, (de)
3380  0F60  5F          	ld	e, a
3381  0F61  16 00       	ld	d,0x00
3382  0F63  79          	ld	a, c
3383  0F64  93          	sub	a, e
3384  0F65  6F          	ld	l, a
3385  0F66  78          	ld	a, b
3386  0F67  9A          	sbc	a, d
3387  0F68  67          	ld	h, a
3388  0F69  CD 00 00    	call	_abs_fastcall
3389  0F6C  7D          	ld	a,l
3390  0F6D  D6 02       	sub	a,0x02
3391  0F6F  7C          	ld	a,h
3392  0F70  17          	rla
3393  0F71  3F          	ccf
3394  0F72  1F          	rra
3395  0F73  DE 80       	sbc	a,0x80
3396  0F75  30 6F       	jr	NC,l_spr_colision_b_00111
3397  0F77  2E 01       	ld	l,0x01
3398  0F79  18 6D       	jr	l_spr_colision_b_00112
3399  0F7B              l_spr_colision_b_00110:
3400  0F7B  3E 00       	ld	a, +((_lin) & 0xFF)
3401  0F7D  DD 86 04    	add	a,(ix+4)
3402  0F80  4F          	ld	c, a
3403  0F81  3E 00       	ld	a, +((_lin) / 256)
3404  0F83  CE 00       	adc	a,0x00
3405  0F85  47          	ld	b, a
3406  0F86  0A          	ld	a, (bc)
3407  0F87  4F          	ld	c, a
3408  0F88  06 00       	ld	b,0x00
3409  0F8A  3E 00       	ld	a, +((_bullet_lin) & 0xFF)
3410  0F8C  DD 86 05    	add	a,(ix+5)
3411  0F8F  5F          	ld	e, a
3412  0F90  3E 00       	ld	a, +((_bullet_lin) / 256)
3413  0F92  CE 00       	adc	a,0x00
3414  0F94  57          	ld	d, a
3415  0F95  1A          	ld	a, (de)
3416  0F96  5F          	ld	e, a
3417  0F97  16 00       	ld	d,0x00
3418  0F99  79          	ld	a, c
3419  0F9A  93          	sub	a, e
3420  0F9B  6F          	ld	l, a
3421  0F9C  78          	ld	a, b
3422  0F9D  9A          	sbc	a, d
3423  0F9E  67          	ld	h, a
3424  0F9F  CD 00 00    	call	_abs_fastcall
3425  0FA2  3E 08       	ld	a,0x08
3426  0FA4  BD          	cp	a,l
3427  0FA5  3E 00       	ld	a,0x00
3428  0FA7  9C          	sbc	a,h
3429  0FA8  E2 AD 0F    	jp	PO, l_spr_colision_b_00136
3430  0FAB  EE 80       	xor	a,0x80
3431  0FAD              l_spr_colision_b_00136:
3432  0FAD  FA E6 0F    	jp	M, l_spr_colision_b_00111
3433  0FB0  3E 00       	ld	a, +((_col) & 0xFF)
3434  0FB2  DD 86 04    	add	a,(ix+4)
3435  0FB5  4F          	ld	c, a
3436  0FB6  3E 00       	ld	a, +((_col) / 256)
3437  0FB8  CE 00       	adc	a,0x00
3438  0FBA  47          	ld	b, a
3439  0FBB  0A          	ld	a, (bc)
3440  0FBC  4F          	ld	c, a
3441  0FBD  06 00       	ld	b,0x00
3442  0FBF  3E 00       	ld	a, +((_bullet_col) & 0xFF)
3443  0FC1  DD 86 05    	add	a,(ix+5)
3444  0FC4  5F          	ld	e, a
3445  0FC5  3E 00       	ld	a, +((_bullet_col) / 256)
3446  0FC7  CE 00       	adc	a,0x00
3447  0FC9  57          	ld	d, a
3448  0FCA  1A          	ld	a, (de)
3449  0FCB  5F          	ld	e, a
3450  0FCC  16 00       	ld	d,0x00
3451  0FCE  79          	ld	a, c
3452  0FCF  93          	sub	a, e
3453  0FD0  6F          	ld	l, a
3454  0FD1  78          	ld	a, b
3455  0FD2  9A          	sbc	a, d
3456  0FD3  67          	ld	h, a
3457  0FD4  CD 00 00    	call	_abs_fastcall
3458  0FD7  7D          	ld	a,l
3459  0FD8  D6 02       	sub	a,0x02
3460  0FDA  7C          	ld	a,h
3461  0FDB  17          	rla
3462  0FDC  3F          	ccf
3463  0FDD  1F          	rra
3464  0FDE  DE 80       	sbc	a,0x80
3465  0FE0  30 04       	jr	NC,l_spr_colision_b_00111
3466  0FE2  2E 01       	ld	l,0x01
3467  0FE4  18 02       	jr	l_spr_colision_b_00112
3468  0FE6              l_spr_colision_b_00111:
3469  0FE6  2E 00       	ld	l,0x00
3470  0FE8              l_spr_colision_b_00112:
3471  0FE8  DD E1       	pop	ix
3472  0FEA  C9          	ret
3473  0FEB              	SECTION code_compiler
3474  0FEB              ;	---------------------------------
3475  0FEB              ; Function spr_colision_boss
3476  0FEB              ; ---------------------------------
3477  0FEB              _spr_colision_boss:
3478  0FEB  CD 00 00    	call	___sdcc_enter_ix
3479  0FEE  DD 4E 05    	ld	c,(ix+5)
3480  0FF1  06 00       	ld	b,0x00
3481  0FF3  03          	inc	bc
3482  0FF4  3A 00 00    	ld	a,(_boss_col)
3483  0FF7  5F          	ld	e,a
3484  0FF8  16 00       	ld	d,0x00
3485  0FFA  13          	inc	de
3486  0FFB  13          	inc	de
3487  0FFC  62          	ld	h, d
3488  0FFD  79          	ld	a, c
3489  0FFE  93          	sub	a, e
3490  0FFF  6F          	ld	l, a
3491  1000  78          	ld	a, b
3492  1001  9C          	sbc	a, h
3493  1002  67          	ld	h, a
3494  1003  CD 00 00    	call	_abs_fastcall
3495  1006  7D          	ld	a,l
3496  1007  32 00 00    	ld	(_tmp0),a
3497  100A  D6 02       	sub	a,0x02
3498  100C  30 2A       	jr	NC,l_spr_colision_boss_00104
3499  100E  DD 4E 04    	ld	c,(ix+4)
3500  1011  06 00       	ld	b,0x00
3501  1013  21 08 00    	ld	hl,0x0008
3502  1016  09          	add	hl,bc
3503  1017  3A 00 00    	ld	a,(_boss_lin)
3504  101A  5F          	ld	e,a
3505  101B  16 00       	ld	d,0x00
3506  101D  4D          	ld	c,l
3507  101E  44          	ld	b,h
3508  101F  21 10 00    	ld	hl,0x0010
3509  1022  19          	add	hl, de
3510  1023  79          	ld	a, c
3511  1024  95          	sub	a, l
3512  1025  6F          	ld	l, a
3513  1026  78          	ld	a, b
3514  1027  9C          	sbc	a, h
3515  1028  67          	ld	h, a
3516  1029  CD 00 00    	call	_abs_fastcall
3517  102C  7D          	ld	a,l
3518  102D  32 00 00    	ld	(_tmp1),a
3519  1030  D6 10       	sub	a,0x10
3520  1032  30 04       	jr	NC,l_spr_colision_boss_00104
3521  1034  2E 01       	ld	l,0x01
3522  1036  18 02       	jr	l_spr_colision_boss_00105
3523  1038              l_spr_colision_boss_00104:
3524  1038  2E 00       	ld	l,0x00
3525  103A              l_spr_colision_boss_00105:
3526  103A  DD E1       	pop	ix
3527  103C  C9          	ret
3528  103D              	SECTION code_compiler
3529  103D              ;	---------------------------------
3530  103D              ; Function spr_bullets_play
3531  103D              ; ---------------------------------
3532  103D              _spr_bullets_play:
3533  103D  CD 00 00    	call	___sdcc_enter_ix
3534  1040  F5          	push	af
3535  1041  21 00 00    	ld	hl,_bullet
3536  1044  36 00       	ld	(hl),0x00
3537  1046              l_spr_bullets_play_00143:
3538  1046  2A 00 00    	ld	hl,(_bullet)
3539  1049  26 00       	ld	h,0x00
3540  104B  01 00 00    	ld	bc,_bullet_col
3541  104E  09          	add	hl,bc
3542  104F  7E          	ld	a,(hl)
3543  1050  4F          	ld	c,a
3544  1051  3C          	inc	a
3545  1052  CA 8F 12    	jp	Z,l_spr_bullets_play_00141
3546  1055  3A 00 00    	ld	a,(_bullet)
3547  1058  5F          	ld	e,a
3548  1059  16 00       	ld	d,0x00
3549  105B  21 00 00    	ld	hl,_bullet_lin
3550  105E  19          	add	hl,de
3551  105F  7E          	ld	a,(hl)
3552  1060  32 00 00    	ld	(_s_lin0),a
3553  1063  21 00 00    	ld	hl,_s_col0
3554  1066  71          	ld	(hl),c
3555  1067  DD 71 FE    	ld	(ix-2),c
3556  106A  CD 51 0A    	call	_spr_back_repaint
3557  106D  2A 00 00    	ld	hl,(_bullet)
3558  1070  26 00       	ld	h,0x00
3559  1072  01 00 00    	ld	bc,_bullet_class
3560  1075  09          	add	hl,bc
3561  1076  7E          	ld	a,(hl)
3562  1077  FE 02       	cp	a,0x02
3563  1079  28 0A       	jr	Z,l_spr_bullets_play_00103
3564  107B  FE 03       	cp	a,0x03
3565  107D  28 10       	jr	Z,l_spr_bullets_play_00104
3566  107F  D6 04       	sub	a,0x04
3567  1081  28 16       	jr	Z,l_spr_bullets_play_00105
3568  1083  18 25       	jr	l_spr_bullets_play_00108
3569  1085              l_spr_bullets_play_00103:
3570  1085  21 FE 03    	ld	hl,0x03fe
3571  1088  E5          	push	hl
3572  1089  CD F5 0D    	call	_spr_bullet_fireball
3573  108C  F1          	pop	af
3574  108D  18 1B       	jr	l_spr_bullets_play_00108
3575  108F              l_spr_bullets_play_00104:
3576  108F  21 02 02    	ld	hl,0x0202
3577  1092  E5          	push	hl
3578  1093  CD F5 0D    	call	_spr_bullet_fireball
3579  1096  F1          	pop	af
3580  1097  18 11       	jr	l_spr_bullets_play_00108
3581  1099              l_spr_bullets_play_00105:
3582  1099  CD 60 0E    	call	_spr_bullet_axe
3583  109C  2A 00 00    	ld	hl,(_bullet)
3584  109F  26 00       	ld	h,0x00
3585  10A1  01 00 00    	ld	bc,_bullet_col
3586  10A4  09          	add	hl,bc
3587  10A5  7E          	ld	a,(hl)
3588  10A6  3C          	inc	a
3589  10A7  CA 8F 12    	jp	Z,l_spr_bullets_play_00141
3590  10AA              l_spr_bullets_play_00108:
3591  10AA  2A 00 00    	ld	hl,(_bullet)
3592  10AD  26 00       	ld	h,0x00
3593  10AF  01 00 00    	ld	bc,_bullet_dir
3594  10B2  09          	add	hl,bc
3595  10B3  56          	ld	d, (hl)
3596  10B4  2A 00 00    	ld	hl,(_bullet)
3597  10B7  26 00       	ld	h,0x00
3598  10B9  01 00 00    	ld	bc,_bullet_colint
3599  10BC  09          	add	hl,bc
3600  10BD  5E          	ld	e,(hl)
3601  10BE  14          	inc	d
3602  10BF  4D          	ld	c,l
3603  10C0  44          	ld	b,h
3604  10C1  20 45       	jr	NZ,l_spr_bullets_play_00118
3605  10C3  1C          	inc	e
3606  10C4  7B          	ld	a,e
3607  10C5  02          	ld	(bc),a
3608  10C6  2A 00 00    	ld	hl,(_bullet)
3609  10C9  26 00       	ld	h,0x00
3610  10CB  01 00 00    	ld	bc,_bullet_colint
3611  10CE  09          	add	hl,bc
3612  10CF  7E          	ld	a,(hl)
3613  10D0  4D          	ld	c,l
3614  10D1  44          	ld	b,h
3615  10D2  21 00 00    	ld	hl,_bullet
3616  10D5  DD 77 FF    	ld	(ix-1),a
3617  10D8  3E 00       	ld	a, +((_bullet_frames) & 0xFF)
3618  10DA  86          	add	a, (hl)
3619  10DB  5F          	ld	e, a
3620  10DC  3E 00       	ld	a, +((_bullet_frames) / 256)
3621  10DE  CE 00       	adc	a,0x00
3622  10E0  57          	ld	d, a
3623  10E1  1A          	ld	a, (de)
3624  10E2  5F          	ld	e, a
3625  10E3  DD 7E FF    	ld	a,(ix-1)
3626  10E6  93          	sub	a, e
3627  10E7  38 5E       	jr	C,l_spr_bullets_play_00119
3628  10E9  5E          	ld	e,(hl)
3629  10EA  16 00       	ld	d,0x00
3630  10EC  21 00 00    	ld	hl,_bullet_col
3631  10EF  19          	add	hl,de
3632  10F0  7E          	ld	a,(hl)
3633  10F1  3C          	inc	a
3634  10F2  DD 77 FE    	ld	(ix-2),a
3635  10F5  AF          	xor	a, a
3636  10F6  02          	ld	(bc), a
3637  10F7  DD 7E FE    	ld	a,(ix-2)
3638  10FA  E6 01       	and	a,0x01
3639  10FC  3D          	dec	a
3640  10FD  20 48       	jr	NZ,l_spr_bullets_play_00119
3641  10FF  DD 7E FE    	ld	a,(ix-2)
3642  1102  3C          	inc	a
3643  1103  32 00 00    	ld	(_s_col0),a
3644  1106  18 3F       	jr	l_spr_bullets_play_00119
3645  1108              l_spr_bullets_play_00118:
3646  1108  1D          	dec	e
3647  1109  7B          	ld	a, e
3648  110A  02          	ld	(bc), a
3649  110B  2A 00 00    	ld	hl,(_bullet)
3650  110E  26 00       	ld	h,0x00
3651  1110  01 00 00    	ld	bc,_bullet_colint
3652  1113  09          	add	hl,bc
3653  1114  7E          	ld	a,(hl)
3654  1115  3C          	inc	a
3655  1116  20 2F       	jr	NZ,l_spr_bullets_play_00119
3656  1118  4D          	ld	c,l
3657  1119  44          	ld	b,h
3658  111A  2A 00 00    	ld	hl,(_bullet)
3659  111D  26 00       	ld	h,0x00
3660  111F  11 00 00    	ld	de,_bullet_col
3661  1122  19          	add	hl,de
3662  1123  7E          	ld	a,(hl)
3663  1124  C6 FF       	add	a,0xff
3664  1126  21 00 00    	ld	hl,_bullet
3665  1129  DD 77 FE    	ld	(ix-2),a
3666  112C  5E          	ld	e,(hl)
3667  112D  16 00       	ld	d,0x00
3668  112F  21 00 00    	ld	hl,_bullet_frames
3669  1132  19          	add	hl,de
3670  1133  7E          	ld	a,(hl)
3671  1134  C6 FF       	add	a,0xff
3672  1136  02          	ld	(bc), a
3673  1137  DD 7E FE    	ld	a,(ix-2)
3674  113A  E6 01       	and	a,0x01
3675  113C  3D          	dec	a
3676  113D  20 08       	jr	NZ,l_spr_bullets_play_00119
3677  113F  DD 7E FE    	ld	a,(ix-2)
3678  1142  C6 FF       	add	a,0xff
3679  1144  32 00 00    	ld	(_s_col0),a
3680  1147              l_spr_bullets_play_00119:
3681  1147  2A 00 00    	ld	hl,(_bullet)
3682  114A  26 00       	ld	h,0x00
3683  114C  01 00 00    	ld	bc,_bullet_max
3684  114F  09          	add	hl,bc
3685  1150  7E          	ld	a,(hl)
3686  1151  B7          	or	a,a
3687  1152  28 40       	jr	Z,l_spr_bullets_play_00123
3688  1154  21 00 00    	ld	hl,_bullet
3689  1157  DD 4E FE    	ld	c,(ix-2)
3690  115A  06 00       	ld	b,0x00
3691  115C  5E          	ld	e,(hl)
3692  115D  50          	ld	d,b
3693  115E  21 00 00    	ld	hl,_bullet_col0
3694  1161  19          	add	hl,de
3695  1162  5E          	ld	e, (hl)
3696  1163  16 00       	ld	d,0x00
3697  1165  79          	ld	a, c
3698  1166  93          	sub	a, e
3699  1167  6F          	ld	l, a
3700  1168  78          	ld	a, b
3701  1169  9A          	sbc	a, d
3702  116A  67          	ld	h, a
3703  116B  CD 00 00    	call	_abs_fastcall
3704  116E  7D          	ld	a,l
3705  116F  32 00 00    	ld	(_tmp0),a
3706  1172  2A 00 00    	ld	hl,(_bullet)
3707  1175  26 00       	ld	h,0x00
3708  1177  01 00 00    	ld	bc,_bullet_max
3709  117A  09          	add	hl,bc
3710  117B  7E          	ld	a,(hl)
3711  117C  21 00 00    	ld	hl,_tmp0
3712  117F  96          	sub	a, (hl)
3713  1180  30 12       	jr	NC,l_spr_bullets_play_00123
3714  1182  21 00 00    	ld	hl,_bullet_count
3715  1185  35          	dec	(hl)
3716  1186  2A 00 00    	ld	hl,(_bullet)
3717  1189  26 00       	ld	h,0x00
3718  118B  01 00 00    	ld	bc,_bullet_col
3719  118E  09          	add	hl,bc
3720  118F  36 FF       	ld	(hl),0xff
3721  1191  C3 8F 12    	jp	l_spr_bullets_play_00141
3722  1194              l_spr_bullets_play_00123:
3723  1194  2A 00 00    	ld	hl,(_bullet)
3724  1197  26 00       	ld	h,0x00
3725  1199  01 00 00    	ld	bc,_bullet_col
3726  119C  09          	add	hl,bc
3727  119D  3E 1E       	ld	a,0x1e
3728  119F  DD 96 FE    	sub	a,(ix-2)
3729  11A2  4D          	ld	c,l
3730  11A3  44          	ld	b,h
3731  11A4  30 0A       	jr	NC,l_spr_bullets_play_00125
3732  11A6  21 00 00    	ld	hl,_bullet_count
3733  11A9  35          	dec	(hl)
3734  11AA  3E FF       	ld	a,0xff
3735  11AC  02          	ld	(bc), a
3736  11AD  C3 8F 12    	jp	l_spr_bullets_play_00141
3737  11B0              l_spr_bullets_play_00125:
3738  11B0  0A          	ld	a, (bc)
3739  11B1  4F          	ld	c, a
3740  11B2  DD 7E FE    	ld	a,(ix-2)
3741  11B5  91          	sub	a, c
3742  11B6  CA 54 12    	jp	Z,l_spr_bullets_play_00137
3743  11B9  3A 00 00    	ld	a,(_s_lin0)
3744  11BC  C6 08       	add	a,0x08
3745  11BE  4F          	ld	c, a
3746  11BF  3A 00 00    	ld	a, (_s_col0)
3747  11C2  47          	ld	b,a
3748  11C3  C5          	push	bc
3749  11C4  CD 00 00    	call	_spr_calc_index
3750  11C7  F1          	pop	af
3751  11C8  22 00 00    	ld	(_index0),hl
3752  11CB  01 00 00    	ld	bc,_scr_map
3753  11CE  09          	add	hl,bc
3754  11CF  7E          	ld	a,(hl)
3755  11D0  5F          	ld	e,a
3756  11D1  D6 4D       	sub	a,0x4d
3757  11D3  20 4C       	jr	NZ,l_spr_bullets_play_00127
3758  11D5  3A 00 00    	ld	a,(_bullet)
3759  11D8  D6 07       	sub	a,0x07
3760  11DA  20 45       	jr	NZ,l_spr_bullets_play_00127
3761  11DC  E5          	push	hl
3762  11DD  2A 00 00    	ld	hl,(_index0)
3763  11E0  CD 00 00    	call	_game_match_back
3764  11E3  C1          	pop	bc
3765  11E4  7D          	ld	a,l
3766  11E5  02          	ld	(bc), a
3767  11E6  2A 00 00    	ld	hl,(_index0)
3768  11E9  CD 00 00    	call	_game_obj_set
3769  11EC  2A 00 00    	ld	hl,(_bullet)
3770  11EF  26 00       	ld	h,0x00
3771  11F1  01 00 00    	ld	bc,_bullet_lin
3772  11F4  09          	add	hl,bc
3773  11F5  ED 5B 00 00 	ld	de,(_index0)
3774  11F9  3E 04       	ld	a,0x04
3775  11FB  4D          	ld	c,l
3776  11FC  44          	ld	b,h
3777  11FD              l_spr_bullets_play_00252:
3778  11FD  CB 3A       	srl	d
3779  11FF  CB 1B       	rr	e
3780  1201  3D          	dec	a
3781  1202  20 F9       	jr	NZ,l_spr_bullets_play_00252
3782  1204  7B          	ld	a, e
3783  1205  07          	rlca
3784  1206  07          	rlca
3785  1207  07          	rlca
3786  1208  07          	rlca
3787  1209  E6 F0       	and	a,0xf0
3788  120B  02          	ld	(bc), a
3789  120C  2A 00 00    	ld	hl,(_bullet)
3790  120F  26 00       	ld	h,0x00
3791  1211  01 00 00    	ld	bc,_bullet_col
3792  1214  09          	add	hl,bc
3793  1215  3A 00 00    	ld	a,(_index0)
3794  1218  E6 0F       	and	a,0x0f
3795  121A  87          	add	a,a
3796  121B  77          	ld	(hl),a
3797  121C  CD 3E 13    	call	_spr_bullet_explode
3798  121F  18 6E       	jr	l_spr_bullets_play_00141
3799  1221              l_spr_bullets_play_00127:
3800  1221  7B          	ld	a,e
3801  1222  FE 48       	cp	a,0x48
3802  1224  38 09       	jr	C,l_spr_bullets_play_00130
3803  1226  D6 80       	sub	a,0x80
3804  1228  30 05       	jr	NC,l_spr_bullets_play_00130
3805  122A  CD 3E 13    	call	_spr_bullet_explode
3806  122D  18 60       	jr	l_spr_bullets_play_00141
3807  122F              l_spr_bullets_play_00130:
3808  122F  2A 00 00    	ld	hl,(_bullet)
3809  1232  26 00       	ld	h,0x00
3810  1234  01 00 00    	ld	bc,_bullet_col
3811  1237  09          	add	hl,bc
3812  1238  4D          	ld	c,l
3813  1239  44          	ld	b,h
3814  123A  21 00 00    	ld	hl,_bullet
3815  123D  DD 7E FE    	ld	a,(ix-2)
3816  1240  02          	ld	(bc), a
3817  1241  7E          	ld	a, (hl)
3818  1242  D6 07       	sub	a,0x07
3819  1244  20 0B       	jr	NZ,l_spr_bullets_play_00133
3820  1246  3A 07 00    	ld	a, (_bullet_col + 7)
3821  1249  3C          	inc	a
3822  124A  28 05       	jr	Z,l_spr_bullets_play_00133
3823  124C  CD D0 12    	call	_spr_bullet_player_colision
3824  124F  18 03       	jr	l_spr_bullets_play_00137
3825  1251              l_spr_bullets_play_00133:
3826  1251  CD 9E 12    	call	_spr_bullet_enemy_colision
3827  1254              l_spr_bullets_play_00137:
3828  1254  2A 00 00    	ld	hl,(_bullet)
3829  1257  26 00       	ld	h,0x00
3830  1259  01 00 00    	ld	bc,_bullet_col
3831  125C  09          	add	hl,bc
3832  125D  7E          	ld	a,(hl)
3833  125E  3C          	inc	a
3834  125F  28 2E       	jr	Z,l_spr_bullets_play_00141
3835  1261  DD 7E FE    	ld	a,(ix-2)
3836  1264  D6 20       	sub	a,0x20
3837  1266  30 27       	jr	NC,l_spr_bullets_play_00141
3838  1268  F3          	di
3839  1269  2A 00 00    	ld	hl,(_bullet)
3840  126C  26 00       	ld	h,0x00
3841  126E  01 00 00    	ld	bc,_bullet_tile
3842  1271  09          	add	hl,bc
3843  1272  4E          	ld	c, (hl)
3844  1273  3A 00 00    	ld	a,(_bullet)
3845  1276  5F          	ld	e,a
3846  1277  16 00       	ld	d,0x00
3847  1279  21 00 00    	ld	hl,_bullet_colint
3848  127C  19          	add	hl,de
3849  127D  7E          	ld	a,(hl)
3850  127E  81          	add	a,c
3851  127F  47          	ld	b, a
3852  1280  DD 7E FE    	ld	a,(ix-2)
3853  1283  F5          	push	af
3854  1284  33          	inc	sp
3855  1285  3A 00 00    	ld	a,(_s_lin0)
3856  1288  48          	ld	c,b
3857  1289  47          	ld	b,a
3858  128A  C5          	push	bc
3859  128B  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
3860  128E  FB          	ei
3861  128F              l_spr_bullets_play_00141:
3862  128F  21 00 00    	ld	hl,_bullet
3863  1292  7E          	ld	a,(hl)
3864  1293  3C          	inc	a
3865  1294  77          	ld	(hl),a
3866  1295  D6 08       	sub	a,0x08
3867  1297  DA 46 10    	jp	C, l_spr_bullets_play_00143
3868  129A  F1          	pop	af
3869  129B  DD E1       	pop	ix
3870  129D  C9          	ret
3871  129E              	SECTION code_compiler
3872  129E              ;	---------------------------------
3873  129E              ; Function spr_bullet_enemy_colision
3874  129E              ; ---------------------------------
3875  129E              _spr_bullet_enemy_colision:
3876  129E  3A 00 00    	ld	a,(_bullet)
3877  12A1  57          	ld	d,a
3878  12A2  1E 07       	ld	e,0x07
3879  12A4  D5          	push	de
3880  12A5  CD FF 0E    	call	_spr_colision_b
3881  12A8  F1          	pop	af
3882  12A9  7D          	ld	a, l
3883  12AA  B7          	or	a, a
3884  12AB  28 22       	jr	Z,l_spr_bullet_enemy_colision_00106
3885  12AD  2A 00 00    	ld	hl,(_bullet)
3886  12B0  26 00       	ld	h,0x00
3887  12B2  01 00 00    	ld	bc,_bullet_col
3888  12B5  09          	add	hl,bc
3889  12B6  3A 00 00    	ld	a,(_s_col0)
3890  12B9  77          	ld	(hl),a
3891  12BA  CD 3E 13    	call	_spr_bullet_explode
3892  12BD  3A 00 00    	ld	a,(_game_boss)
3893  12C0  B7          	or	a, a
3894  12C1  28 07       	jr	Z,l_spr_bullet_enemy_colision_00102
3895  12C3  2E 14       	ld	l,0x14
3896  12C5  CD 00 00    	call	_player_damage
3897  12C8  18 05       	jr	l_spr_bullet_enemy_colision_00106
3898  12CA              l_spr_bullet_enemy_colision_00102:
3899  12CA  2E 0A       	ld	l,0x0a
3900  12CC  CD 00 00    	call	_player_damage
3901  12CF              l_spr_bullet_enemy_colision_00106:
3902  12CF  C9          	ret
3903  12D0              	SECTION code_compiler
3904  12D0              ;	---------------------------------
3905  12D0              ; Function spr_bullet_player_colision
3906  12D0              ; ---------------------------------
3907  12D0              _spr_bullet_player_colision:
3908  12D0  0E 00       	ld	c,0x00
3909  12D2  11 00 00    	ld	de,_class+0
3910  12D5  41          	ld	b,c
3911  12D6              l_spr_bullet_player_colision_00106:
3912  12D6  78          	ld	a, b
3913  12D7  D6 07       	sub	a,0x07
3914  12D9  30 3C       	jr	NC,l_spr_bullet_player_colision_00108
3915  12DB  68          	ld	l,b
3916  12DC  26 00       	ld	h,0x00
3917  12DE  19          	add	hl, de
3918  12DF  7E          	ld	a, (hl)
3919  12E0  B7          	or	a, a
3920  12E1  28 30       	jr	Z,l_spr_bullet_player_colision_00102
3921  12E3  FE 01       	cp	a,0x01
3922  12E5  28 2C       	jr	Z,l_spr_bullet_player_colision_00102
3923  12E7  D6 09       	sub	a,0x09
3924  12E9  28 28       	jr	Z,l_spr_bullet_player_colision_00102
3925  12EB  3A 00 00    	ld	a,(_bullet)
3926  12EE  C5          	push	bc
3927  12EF  D5          	push	de
3928  12F0  48          	ld	c,b
3929  12F1  47          	ld	b,a
3930  12F2  C5          	push	bc
3931  12F3  CD FF 0E    	call	_spr_colision_b
3932  12F6  F1          	pop	af
3933  12F7  D1          	pop	de
3934  12F8  C1          	pop	bc
3935  12F9  7D          	ld	a,l
3936  12FA  B7          	or	a, a
3937  12FB  28 16       	jr	Z,l_spr_bullet_player_colision_00102
3938  12FD  C5          	push	bc
3939  12FE  CD 00 00    	call	_rand
3940  1301  11 06 00    	ld	de,0x0006
3941  1304  D5          	push	de
3942  1305  E5          	push	hl
3943  1306  CD 00 00    	call	__modsint_callee
3944  1309  CD 00 00    	call	_player_score_add
3945  130C  C1          	pop	bc
3946  130D  69          	ld	l, c
3947  130E  CD 00 00    	call	_enemy_kill
3948  1311  18 04       	jr	l_spr_bullet_player_colision_00108
3949  1313              l_spr_bullet_player_colision_00102:
3950  1313  04          	inc	b
3951  1314  48          	ld	c, b
3952  1315  18 BF       	jr	l_spr_bullet_player_colision_00106
3953  1317              l_spr_bullet_player_colision_00108:
3954  1317  3A 00 00    	ld	a,(_game_boss)
3955  131A  B7          	or	a, a
3956  131B  C8          	ret	Z
3957  131C  21 07 00    	ld	hl,+(_bullet_col + 0x0007)
3958  131F  46          	ld	b, (hl)
3959  1320  21 07 00    	ld	hl,+(_bullet_lin + 0x0007)
3960  1323  4E          	ld	c, (hl)
3961  1324  C5          	push	bc
3962  1325  CD EB 0F    	call	_spr_colision_boss
3963  1328  F1          	pop	af
3964  1329  7D          	ld	a, l
3965  132A  B7          	or	a, a
3966  132B  C8          	ret	Z
3967  132C  CD 3E 13    	call	_spr_bullet_explode
3968  132F  21 00 00    	ld	hl,_game_boss_hit
3969  1332  35          	dec	(hl)
3970  1333  CD 00 00    	call	_game_update_stats
3971  1336  3A 00 00    	ld	a,(_game_boss_hit)
3972  1339  B7          	or	a, a
3973  133A  C0          	ret	NZ
3974  133B  C3 00 00    	jp  _game_boss_kill
3975  133E              	SECTION code_compiler
3976  133E              ;	---------------------------------
3977  133E              ; Function spr_bullet_explode
3978  133E              ; ---------------------------------
3979  133E              _spr_bullet_explode:
3980  133E  CD 00 00    	call	_audio_explosion
3981  1341  2A 00 00    	ld	hl,(_bullet)
3982  1344  26 00       	ld	h,0x00
3983  1346  01 00 00    	ld	bc,_bullet_col
3984  1349  09          	add	hl,bc
3985  134A  56          	ld	d, (hl)
3986  134B  2A 00 00    	ld	hl,(_bullet)
3987  134E  26 00       	ld	h,0x00
3988  1350  01 00 00    	ld	bc,_bullet_lin
3989  1353  09          	add	hl,bc
3990  1354  46          	ld	b, (hl)
3991  1355  21 00 00    	ld	hl,0x0000
3992  1358  E5          	push	hl
3993  1359  21 87 03    	ld	hl,0x0387
3994  135C  E5          	push	hl
3995  135D  58          	ld	e,b
3996  135E  D5          	push	de
3997  135F  CD 3A 0C    	call	_spr_add_anim
3998  1362  F1          	pop	af
3999  1363  F1          	pop	af
4000  1364  F1          	pop	af
4001  1365  21 00 00    	ld	hl,_bullet_count
4002  1368  35          	dec	(hl)
4003  1369  2A 00 00    	ld	hl,(_bullet)
4004  136C  26 00       	ld	h,0x00
4005  136E  01 00 00    	ld	bc,_bullet_col
4006  1371  09          	add	hl,bc
4007  1372  36 FF       	ld	(hl),0xff
4008  1374  C9          	ret
4009  1375              	SECTION code_compiler
4010  1375              ;	---------------------------------
4011  1375              ; Function spr_turn_horizontal
4012  1375              ; ---------------------------------
4013  1375              _spr_turn_horizontal:
4014  1375  21 00 00    	ld	hl,_s_state
4015  1378  CB 56       	bit	2,(hl)
4016  137A  28 05       	jr	Z,l_spr_turn_horizontal_00102
4017  137C  CD 82 00    	call	_spr_set_left
4018  137F  18 06       	jr	l_spr_turn_horizontal_00103
4019  1381              l_spr_turn_horizontal_00102:
4020  1381  21 00 00    	ld	hl,_s_state
4021  1384  CD 89 00    	call	_spr_set_right
4022  1387              l_spr_turn_horizontal_00103:
4023  1387  2A 00 00    	ld	hl,(_sprite)
4024  138A  26 00       	ld	h,0x00
4025  138C  01 00 00    	ld	bc,_state
4026  138F  09          	add	hl,bc
4027  1390  3A 00 00    	ld	a,(_s_state)
4028  1393  77          	ld	(hl),a
4029  1394  2A 00 00    	ld	hl,(_sprite)
4030  1397  26 00       	ld	h,0x00
4031  1399  01 00 00    	ld	bc,_tile
4032  139C  09          	add	hl,bc
4033  139D  E5          	push	hl
4034  139E  21 00 00    	ld	hl,_sprite
4035  13A1  CD DE 08    	call	_spr_tile
4036  13A4  C1          	pop	bc
4037  13A5  7D          	ld	a,l
4038  13A6  02          	ld	(bc), a
4039  13A7  C9          	ret
4040  13A8              	SECTION code_compiler
4041  13A8              ;	---------------------------------
4042  13A8              ; Function spr_btile_paint_back
4043  13A8              ; ---------------------------------
4044  13A8              _spr_btile_paint_back:
4045  13A8  21 20 00    	ld	hl,0x0020
4046  13AB  22 00 00    	ld	(_tmp_ui),hl
4047  13AE  21 00 00    	ld	hl,_map_paper
4048  13B1  7E          	ld	a, (hl)
4049  13B2  0F          	rrca
4050  13B3  0F          	rrca
4051  13B4  0F          	rrca
4052  13B5  E6 1F       	and	a,0x1f
4053  13B7  B6          	or	a, (hl)
4054  13B8  F6 40       	or	a,0x40
4055  13BA  32 00 00    	ld	(_map_paper_clr),a
4056  13BD  0E 00       	ld	c,0x00
4057  13BF              l_spr_btile_paint_back_00120:
4058  13BF  21 00 00    	ld	hl,_tmp_ui
4059  13C2  7E          	ld	a, (hl)
4060  13C3  D6 20       	sub	a,0x20
4061  13C5  23          	inc	hl
4062  13C6  7E          	ld	a, (hl)
4063  13C7  DE 2D       	sbc	a,0x2d
4064  13C9  D2 58 14    	jp	NC, l_spr_btile_paint_back_00122
4065  13CC  79          	ld	a,c
4066  13CD  FE 49       	cp	a,0x49
4067  13CF  30 09       	jr	NC,l_spr_btile_paint_back_00119
4068  13D1  D6 0D       	sub	a,0x0d
4069  13D3  28 05       	jr	Z,l_spr_btile_paint_back_00119
4070  13D5  79          	ld	a, c
4071  13D6  D6 0E       	sub	a,0x0e
4072  13D8  20 05       	jr	NZ,l_spr_btile_paint_back_00115
4073  13DA              l_spr_btile_paint_back_00119:
4074  13DA  3E 5A       	ld	a,0x5a
4075  13DC  91          	sub	a, c
4076  13DD  30 6B       	jr	NC,l_spr_btile_paint_back_00116
4077  13DF              l_spr_btile_paint_back_00115:
4078  13DF  21 00 00    	ld	hl,_tmp0
4079  13E2  36 00       	ld	(hl),0x00
4080  13E4  21 00 00    	ld	hl,_map_paper_last
4081  13E7  5E          	ld	e, (hl)
4082  13E8  43          	ld	b, e
4083  13E9  3E 38       	ld	a,0x38
4084  13EB  91          	sub	a, c
4085  13EC  30 05       	jr	NC,l_spr_btile_paint_back_00109
4086  13EE  79          	ld	a, c
4087  13EF  D6 41       	sub	a,0x41
4088  13F1  38 0A       	jr	C,l_spr_btile_paint_back_00105
4089  13F3              l_spr_btile_paint_back_00109:
4090  13F3  3E 10       	ld	a,0x10
4091  13F5  91          	sub	a, c
4092  13F6  30 20       	jr	NC,l_spr_btile_paint_back_00112
4093  13F8  79          	ld	a, c
4094  13F9  D6 14       	sub	a,0x14
4095  13FB  30 1B       	jr	NC,l_spr_btile_paint_back_00112
4096  13FD              l_spr_btile_paint_back_00105:
4097  13FD  3A 00 00    	ld	a,(_map_paper)
4098  1400  D6 10       	sub	a,0x10
4099  1402  20 09       	jr	NZ,l_spr_btile_paint_back_00102
4100  1404  21 00 00    	ld	hl,_tmp0
4101  1407  36 10       	ld	(hl),0x10
4102  1409  21 00 00    	ld	hl,_map_paper_last_a
4103  140C  73          	ld	(hl), e
4104  140D              l_spr_btile_paint_back_00102:
4105  140D  3A 00 00    	ld	a,(_map_paper_last)
4106  1410  D6 10       	sub	a,0x10
4107  1412  20 04       	jr	NZ,l_spr_btile_paint_back_00112
4108  1414  21 00 00    	ld	hl,_map_paper_last_a
4109  1417  46          	ld	b, (hl)
4110  1418              l_spr_btile_paint_back_00112:
4111  1418  3A 00 00    	ld	a,(_tmp0)
4112  141B  D6 10       	sub	a,0x10
4113  141D  30 2B       	jr	NC,l_spr_btile_paint_back_00116
4114  141F  11 00 00    	ld	de,_btiles
4115  1422  2A 00 00    	ld	hl,(_tmp_ui)
4116  1425  19          	add	hl,de
4117  1426  EB          	ex	de,hl
4118  1427  2A 00 00    	ld	hl,(_tmp0)
4119  142A  26 00       	ld	h,0x00
4120  142C  19          	add	hl,de
4121  142D  7E          	ld	a,(hl)
4122  142E  EB          	ex	de,hl
4123  142F  21 00 00    	ld	hl,_tmp
4124  1432  77          	ld	(hl),a
4125  1433  E6 38       	and	a,0x38
4126  1435  90          	sub	a, b
4127  1436  20 0C       	jr	NZ,l_spr_btile_paint_back_00111
4128  1438  7E          	ld	a, (hl)
4129  1439  E6 C7       	and	a,0xc7
4130  143B  77          	ld	(hl),a
4131  143C  21 00 00    	ld	hl,_map_paper
4132  143F  B6          	or	a, (hl)
4133  1440  32 00 00    	ld	(_tmp),a
4134  1443  12          	ld	(de), a
4135  1444              l_spr_btile_paint_back_00111:
4136  1444  21 00 00    	ld	hl,_tmp0
4137  1447  34          	inc	(hl)
4138  1448  18 CE       	jr	l_spr_btile_paint_back_00112
4139  144A              l_spr_btile_paint_back_00116:
4140  144A  2A 00 00    	ld	hl,(_tmp_ui)
4141  144D  11 30 00    	ld	de,0x0030
4142  1450  19          	add	hl,de
4143  1451  22 00 00    	ld	(_tmp_ui),hl
4144  1454  0C          	inc	c
4145  1455  C3 BF 13    	jp	l_spr_btile_paint_back_00120
4146  1458              l_spr_btile_paint_back_00122:
4147  1458  3A 00 00    	ld	a,(_map_paper)
4148  145B  32 00 00    	ld	(_map_paper_last),a
4149  145E  C3 00 00    	jp  _game_attribs
4150  1461              	SECTION code_compiler
4151  1461              ;	---------------------------------
4152  1461              ; Function spr_flatten
4153  1461              ; ---------------------------------
4154  1461              _spr_flatten:
4155  1461  06 00       	ld	b,0x00
4156  1463              l_spr_flatten_00102:
4157  1463  78          	ld	a, b
4158  1464  07          	rlca
4159  1465  07          	rlca
4160  1466  07          	rlca
4161  1467  E6 F8       	and	a,0xf8
4162  1469  5F          	ld	e, a
4163  146A  16 00       	ld	d,0x00
4164  146C  21 96 DC    	ld	hl,0xdc96
4165  146F  19          	add	hl, de
4166  1470  7E          	ld	a, (hl)
4167  1471  32 00 00    	ld	(_s_lin1),a
4168  1474  16 00       	ld	d,0x00
4169  1476  21 95 DC    	ld	hl,0xdc95
4170  1479  19          	add	hl, de
4171  147A  7E          	ld	a, (hl)
4172  147B  32 00 00    	ld	(_s_col1),a
4173  147E  16 00       	ld	d,0x00
4174  1480  21 98 DC    	ld	hl,0xdc98
4175  1483  19          	add	hl, de
4176  1484  7E          	ld	a, (hl)
4177  1485  32 00 00    	ld	(_s_tile1),a
4178  1488  C5          	push	bc
4179  1489  21 00 00    	ld	hl,0x0000
4180  148C  E5          	push	hl
4181  148D  AF          	xor	a, a
4182  148E  48          	ld	c,b
4183  148F  47          	ld	b,a
4184  1490  C5          	push	bc
4185  1491  CD 00 00    	call	_NIRVANAP_spriteT_callee
4186  1494  2A FF FF    	ld	hl,(_s_col1 - 1)
4187  1497  3A 00 00    	ld	a,(_s_lin1)
4188  149A  6F          	ld	l,a
4189  149B  3A 00 00    	ld	a,(_s_tile1)
4190  149E  E5          	push	hl
4191  149F  F5          	push	af
4192  14A0  33          	inc	sp
4193  14A1  CD 00 00    	call	_NIRVANAP_drawT_callee
4194  14A4  C1          	pop	bc
4195  14A5  04          	inc	b
4196  14A6  3E 07       	ld	a,0x07
4197  14A8  90          	sub	a, b
4198  14A9  30 B8       	jr	NC,l_spr_flatten_00102
4199  14AB  C9          	ret
4200  14AC              	SECTION code_compiler
4201  14AC              ;	---------------------------------
4202  14AC              ; Function spr_unflattenP1
4203  14AC              ; ---------------------------------
4204  14AC              _spr_unflattenP1:
4205  14AC  CD 00 00    	call	_player_anim_stairs
4206  14AF  21 07 00    	ld	hl,+(_col + 0x0007)
4207  14B2  46          	ld	b, (hl)
4208  14B3  21 07 00    	ld	hl,+(_lin + 0x0007)
4209  14B6  4E          	ld	c, (hl)
4210  14B7  3A 00 00    	ld	a,(_s_tile1)
4211  14BA  C5          	push	bc
4212  14BB  F5          	push	af
4213  14BC  33          	inc	sp
4214  14BD  CD 00 00    	call	_NIRVANAP_drawT_callee
4215  14C0  C9          	ret
4216  14C1              	SECTION IGNORE
4217  0000              
