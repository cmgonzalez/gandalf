1     0000              MODULE game_sprite_c
2     0000              
3     0000              ;--------------------------------------------------------
4     0000              ; File Created by SDCC : free open source ANSI-C Compiler
5     0000              ; Version 3.6.5 #9958 (Mac OS X i386)
6     0000              ;--------------------------------------------------------
7     0000              ; Processed by Z88DK
8     0000              ;--------------------------------------------------------
9     0000              
10    0000              	EXTERN __divschar
11    0000              	EXTERN __divschar_callee
12    0000              	EXTERN __divsint
13    0000              	EXTERN __divsint_callee
14    0000              	EXTERN __divslong
15    0000              	EXTERN __divslong_callee
16    0000              	EXTERN __divslonglong
17    0000              	EXTERN __divslonglong_callee
18    0000              	EXTERN __divsuchar
19    0000              	EXTERN __divsuchar_callee
20    0000              	EXTERN __divuchar
21    0000              	EXTERN __divuchar_callee
22    0000              	EXTERN __divuint
23    0000              	EXTERN __divuint_callee
24    0000              	EXTERN __divulong
25    0000              	EXTERN __divulong_callee
26    0000              	EXTERN __divulonglong
27    0000              	EXTERN __divulonglong_callee
28    0000              	EXTERN __divuschar
29    0000              	EXTERN __divuschar_callee
30    0000              	EXTERN __modschar
31    0000              	EXTERN __modschar_callee
32    0000              	EXTERN __modsint
33    0000              	EXTERN __modsint_callee
34    0000              	EXTERN __modslong
35    0000              	EXTERN __modslong_callee
36    0000              	EXTERN __modslonglong
37    0000              	EXTERN __modslonglong_callee
38    0000              	EXTERN __modsuchar
39    0000              	EXTERN __modsuchar_callee
40    0000              	EXTERN __moduchar
41    0000              	EXTERN __moduchar_callee
42    0000              	EXTERN __moduint
43    0000              	EXTERN __moduint_callee
44    0000              	EXTERN __modulong
45    0000              	EXTERN __modulong_callee
46    0000              	EXTERN __modulonglong
47    0000              	EXTERN __modulonglong_callee
48    0000              	EXTERN __moduschar
49    0000              	EXTERN __moduschar_callee
50    0000              	EXTERN __mulint
51    0000              	EXTERN __mulint_callee
52    0000              	EXTERN __mullong
53    0000              	EXTERN __mullong_callee
54    0000              	EXTERN __mullonglong
55    0000              	EXTERN __mullonglong_callee
56    0000              	EXTERN __mulschar
57    0000              	EXTERN __mulschar_callee
58    0000              	EXTERN __mulsuchar
59    0000              	EXTERN __mulsuchar_callee
60    0000              	EXTERN __muluschar
61    0000              	EXTERN __muluschar_callee
62    0000              	EXTERN __rlslonglong
63    0000              	EXTERN __rlslonglong_callee
64    0000              	EXTERN __rlulonglong
65    0000              	EXTERN __rlulonglong_callee
66    0000              	EXTERN __rrslonglong
67    0000              	EXTERN __rrslonglong_callee
68    0000              	EXTERN __rrulonglong
69    0000              	EXTERN __rrulonglong_callee
70    0000              	EXTERN ___sdcc_call_hl
71    0000              	EXTERN ___sdcc_call_iy
72    0000              	EXTERN ___sdcc_enter_ix
73    0000              	EXTERN _banked_call
74    0000              	EXTERN _banked_ret
75    0000              	EXTERN ___fs2schar
76    0000              	EXTERN ___fs2schar_callee
77    0000              	EXTERN ___fs2sint
78    0000              	EXTERN ___fs2sint_callee
79    0000              	EXTERN ___fs2slong
80    0000              	EXTERN ___fs2slong_callee
81    0000              	EXTERN ___fs2slonglong
82    0000              	EXTERN ___fs2slonglong_callee
83    0000              	EXTERN ___fs2uchar
84    0000              	EXTERN ___fs2uchar_callee
85    0000              	EXTERN ___fs2uint
86    0000              	EXTERN ___fs2uint_callee
87    0000              	EXTERN ___fs2ulong
88    0000              	EXTERN ___fs2ulong_callee
89    0000              	EXTERN ___fs2ulonglong
90    0000              	EXTERN ___fs2ulonglong_callee
91    0000              	EXTERN ___fsadd
92    0000              	EXTERN ___fsadd_callee
93    0000              	EXTERN ___fsdiv
94    0000              	EXTERN ___fsdiv_callee
95    0000              	EXTERN ___fseq
96    0000              	EXTERN ___fseq_callee
97    0000              	EXTERN ___fsgt
98    0000              	EXTERN ___fsgt_callee
99    0000              	EXTERN ___fslt
100   0000              	EXTERN ___fslt_callee
101   0000              	EXTERN ___fsmul
102   0000              	EXTERN ___fsmul_callee
103   0000              	EXTERN ___fsneq
104   0000              	EXTERN ___fsneq_callee
105   0000              	EXTERN ___fssub
106   0000              	EXTERN ___fssub_callee
107   0000              	EXTERN ___schar2fs
108   0000              	EXTERN ___schar2fs_callee
109   0000              	EXTERN ___sint2fs
110   0000              	EXTERN ___sint2fs_callee
111   0000              	EXTERN ___slong2fs
112   0000              	EXTERN ___slong2fs_callee
113   0000              	EXTERN ___slonglong2fs
114   0000              	EXTERN ___slonglong2fs_callee
115   0000              	EXTERN ___uchar2fs
116   0000              	EXTERN ___uchar2fs_callee
117   0000              	EXTERN ___uint2fs
118   0000              	EXTERN ___uint2fs_callee
119   0000              	EXTERN ___ulong2fs
120   0000              	EXTERN ___ulong2fs_callee
121   0000              	EXTERN ___ulonglong2fs
122   0000              	EXTERN ___ulonglong2fs_callee
123   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
126   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
127   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
128   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
129   0000              	EXTERN ____sdcc_4_ldi_save_bc
130   0000              	EXTERN ____sdcc_4_push_hlix
131   0000              	EXTERN ____sdcc_4_push_mhl
132   0000              	EXTERN ____sdcc_lib_setmem_hl
133   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
134   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
135   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
136   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
137   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
138   0000              	EXTERN ____sdcc_ll_add_deix_hlix
139   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
140   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
141   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
142   0000              	EXTERN ____sdcc_ll_asr_hlix_a
143   0000              	EXTERN ____sdcc_ll_asr_mbc_a
144   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
145   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
146   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
147   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
148   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
149   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
150   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
151   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
152   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
153   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
155   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
156   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
157   0000              	EXTERN ____sdcc_ll_push_hlix
158   0000              	EXTERN ____sdcc_ll_push_mhl
159   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
160   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
161   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
162   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
163   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
164   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
165   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
166   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
167   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
168   0000              	EXTERN ____sdcc_load_debc_deix
169   0000              	EXTERN ____sdcc_load_dehl_deix
170   0000              	EXTERN ____sdcc_load_debc_mhl
171   0000              	EXTERN ____sdcc_load_hlde_mhl
172   0000              	EXTERN ____sdcc_store_dehl_bcix
173   0000              	EXTERN ____sdcc_store_debc_hlix
174   0000              	EXTERN ____sdcc_store_debc_mhl
175   0000              	EXTERN ____sdcc_cpu_pop_ei
176   0000              	EXTERN ____sdcc_cpu_pop_ei_jp
177   0000              	EXTERN ____sdcc_cpu_push_di
178   0000              	EXTERN ____sdcc_outi
179   0000              	EXTERN ____sdcc_outi_128
180   0000              	EXTERN ____sdcc_outi_256
181   0000              	EXTERN ____sdcc_ldi
182   0000              	EXTERN ____sdcc_ldi_128
183   0000              	EXTERN ____sdcc_ldi_256
184   0000              
185   0000              ;--------------------------------------------------------
186   0000              ; Public variables in this module
187   0000              ;--------------------------------------------------------
188   0000              	GLOBAL _spr_bullet_axe
189   0000              	GLOBAL _spr_bullet_fireball
190   0000              	GLOBAL _spr_calc_index
191   0000              	GLOBAL _spr_chktime
192   0000              	GLOBAL _spr_move_up
193   0000              	GLOBAL _spr_move_down
194   0000              	GLOBAL _spr_move_horizontal
195   0000              	GLOBAL _spr_move_right
196   0000              	GLOBAL _spr_move_left
197   0000              	GLOBAL _spr_page_right
198   0000              	GLOBAL _spr_page_left
199   0000              	GLOBAL _spr_page_down
200   0000              	GLOBAL _spr_page_up
201   0000              	GLOBAL _spr_clear_scr
202   0000              	GLOBAL _spr_page_map
203   0000              	GLOBAL _spr_redraw
204   0000              	GLOBAL _spr_destroy
205   0000              	GLOBAL _spr_tile
206   0000              	GLOBAL _spr_tile_dir
207   0000              	GLOBAL _spr_brick_anim
208   0000              	GLOBAL _spr_draw_index
209   0000              	GLOBAL _spr_calc_hor
210   0000              	GLOBAL _spr_back_repaint
211   0000              	GLOBAL _spr_tile_paint
212   0000              	GLOBAL _spr_init_anim_bullets
213   0000              	GLOBAL _spr_add_anim
214   0000              	GLOBAL _spr_play_anim
215   0000              	GLOBAL _spr_play_bullets
216   0000              	GLOBAL _spr_explode_bullet
217   0000              	GLOBAL _spr_turn_horizontal
218   0000              	GLOBAL _spr_btile_paint_back
219   0000              ;--------------------------------------------------------
220   0000              ; Externals used
221   0000              ;--------------------------------------------------------
222   0000              	GLOBAL _ulltoa_callee
223   0000              	GLOBAL _ulltoa
224   0000              	GLOBAL _strtoull_callee
225   0000              	GLOBAL _strtoull
226   0000              	GLOBAL _strtoll_callee
227   0000              	GLOBAL _strtoll
228   0000              	GLOBAL _lltoa_callee
229   0000              	GLOBAL _lltoa
230   0000              	GLOBAL _llabs_callee
231   0000              	GLOBAL _llabs
232   0000              	GLOBAL __lldivu__callee
233   0000              	GLOBAL __lldivu_
234   0000              	GLOBAL __lldiv__callee
235   0000              	GLOBAL __lldiv_
236   0000              	GLOBAL _atoll_callee
237   0000              	GLOBAL _atoll
238   0000              	GLOBAL _realloc_unlocked_callee
239   0000              	GLOBAL _realloc_unlocked
240   0000              	GLOBAL _malloc_unlocked_fastcall
241   0000              	GLOBAL _malloc_unlocked
242   0000              	GLOBAL _free_unlocked_fastcall
243   0000              	GLOBAL _free_unlocked
244   0000              	GLOBAL _calloc_unlocked_callee
245   0000              	GLOBAL _calloc_unlocked
246   0000              	GLOBAL _aligned_alloc_unlocked_callee
247   0000              	GLOBAL _aligned_alloc_unlocked
248   0000              	GLOBAL _realloc_callee
249   0000              	GLOBAL _realloc
250   0000              	GLOBAL _malloc_fastcall
251   0000              	GLOBAL _malloc
252   0000              	GLOBAL _free_fastcall
253   0000              	GLOBAL _free
254   0000              	GLOBAL _calloc_callee
255   0000              	GLOBAL _calloc
256   0000              	GLOBAL _aligned_alloc_callee
257   0000              	GLOBAL _aligned_alloc
258   0000              	GLOBAL _utoa_callee
259   0000              	GLOBAL _utoa
260   0000              	GLOBAL _ultoa_callee
261   0000              	GLOBAL _ultoa
262   0000              	GLOBAL _system_fastcall
263   0000              	GLOBAL _system
264   0000              	GLOBAL _strtoul_callee
265   0000              	GLOBAL _strtoul
266   0000              	GLOBAL _strtol_callee
267   0000              	GLOBAL _strtol
268   0000              	GLOBAL _strtof_callee
269   0000              	GLOBAL _strtof
270   0000              	GLOBAL _strtod_callee
271   0000              	GLOBAL _strtod
272   0000              	GLOBAL _srand_fastcall
273   0000              	GLOBAL _srand
274   0000              	GLOBAL _rand
275   0000              	GLOBAL _quick_exit_fastcall
276   0000              	GLOBAL _quick_exit
277   0000              	GLOBAL _qsort_callee
278   0000              	GLOBAL _qsort
279   0000              	GLOBAL _ltoa_callee
280   0000              	GLOBAL _ltoa
281   0000              	GLOBAL _labs_fastcall
282   0000              	GLOBAL _labs
283   0000              	GLOBAL _itoa_callee
284   0000              	GLOBAL _itoa
285   0000              	GLOBAL _ftoh_callee
286   0000              	GLOBAL _ftoh
287   0000              	GLOBAL _ftog_callee
288   0000              	GLOBAL _ftog
289   0000              	GLOBAL _ftoe_callee
290   0000              	GLOBAL _ftoe
291   0000              	GLOBAL _ftoa_callee
292   0000              	GLOBAL _ftoa
293   0000              	GLOBAL _exit_fastcall
294   0000              	GLOBAL _exit
295   0000              	GLOBAL _dtoh_callee
296   0000              	GLOBAL _dtoh
297   0000              	GLOBAL _dtog_callee
298   0000              	GLOBAL _dtog
299   0000              	GLOBAL _dtoe_callee
300   0000              	GLOBAL _dtoe
301   0000              	GLOBAL _dtoa_callee
302   0000              	GLOBAL _dtoa
303   0000              	GLOBAL _bsearch_callee
304   0000              	GLOBAL _bsearch
305   0000              	GLOBAL _atol_fastcall
306   0000              	GLOBAL _atol
307   0000              	GLOBAL _atoi_fastcall
308   0000              	GLOBAL _atoi
309   0000              	GLOBAL _atof_fastcall
310   0000              	GLOBAL _atof
311   0000              	GLOBAL _atexit_fastcall
312   0000              	GLOBAL _atexit
313   0000              	GLOBAL _at_quick_exit_fastcall
314   0000              	GLOBAL _at_quick_exit
315   0000              	GLOBAL _abs_fastcall
316   0000              	GLOBAL _abs
317   0000              	GLOBAL _abort
318   0000              	GLOBAL __strtou__callee
319   0000              	GLOBAL __strtou_
320   0000              	GLOBAL __strtoi__callee
321   0000              	GLOBAL __strtoi_
322   0000              	GLOBAL __random_uniform_xor_8__fastcall
323   0000              	GLOBAL __random_uniform_xor_8_
324   0000              	GLOBAL __random_uniform_xor_32__fastcall
325   0000              	GLOBAL __random_uniform_xor_32_
326   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
327   0000              	GLOBAL __random_uniform_cmwc_8_
328   0000              	GLOBAL __shellsort__callee
329   0000              	GLOBAL __shellsort_
330   0000              	GLOBAL __quicksort__callee
331   0000              	GLOBAL __quicksort_
332   0000              	GLOBAL __insertion_sort__callee
333   0000              	GLOBAL __insertion_sort_
334   0000              	GLOBAL __ldivu__callee
335   0000              	GLOBAL __ldivu_
336   0000              	GLOBAL __ldiv__callee
337   0000              	GLOBAL __ldiv_
338   0000              	GLOBAL __divu__callee
339   0000              	GLOBAL __divu_
340   0000              	GLOBAL __div__callee
341   0000              	GLOBAL __div_
342   0000              	GLOBAL _NIRVANAP_drawTW_raw_callee
343   0000              	GLOBAL _NIRVANAP_drawTW_raw
344   0000              	GLOBAL _NIRVANAP_drawTW_callee
345   0000              	GLOBAL _NIRVANAP_drawTW
346   0000              	GLOBAL _NIRVANAP_drawW_raw_callee
347   0000              	GLOBAL _NIRVANAP_drawW_raw
348   0000              	GLOBAL _NIRVANAP_drawW_callee
349   0000              	GLOBAL _NIRVANAP_drawW
350   0000              	GLOBAL _NIRVANAP_spriteT_callee
351   0000              	GLOBAL _NIRVANAP_spriteT
352   0000              	GLOBAL _NIRVANAP_fillC_callee
353   0000              	GLOBAL _NIRVANAP_fillC
354   0000              	GLOBAL _NIRVANAP_readC_callee
355   0000              	GLOBAL _NIRVANAP_readC
356   0000              	GLOBAL _NIRVANAP_paintC_callee
357   0000              	GLOBAL _NIRVANAP_paintC
358   0000              	GLOBAL _NIRVANAP_printC_callee
359   0000              	GLOBAL _NIRVANAP_printC
360   0000              	GLOBAL _NIRVANAP_fillT_raw_callee
361   0000              	GLOBAL _NIRVANAP_fillT_raw
362   0000              	GLOBAL _NIRVANAP_fillT_callee
363   0000              	GLOBAL _NIRVANAP_fillT
364   0000              	GLOBAL _NIRVANAP_drawT_raw_callee
365   0000              	GLOBAL _NIRVANAP_drawT_raw
366   0000              	GLOBAL _NIRVANAP_drawT_callee
367   0000              	GLOBAL _NIRVANAP_drawT
368   0000              	GLOBAL _NIRVANAP_stop
369   0000              	GLOBAL _NIRVANAP_start
370   0000              	GLOBAL _debug3
371   0000              	GLOBAL _debug2
372   0000              	GLOBAL _debug
373   0000              	GLOBAL _zx_print_str
374   0000              	GLOBAL _zx_print_int
375   0000              	GLOBAL _zx_print_chr
376   0000              	GLOBAL _zx_print_bonus_time
377   0000              	GLOBAL _zx_isr
378   0000              	GLOBAL _z80_otdr_callee
379   0000              	GLOBAL _z80_otdr
380   0000              	GLOBAL _z80_otir_callee
381   0000              	GLOBAL _z80_otir
382   0000              	GLOBAL _z80_outp_callee
383   0000              	GLOBAL _z80_outp
384   0000              	GLOBAL _z80_indr_callee
385   0000              	GLOBAL _z80_indr
386   0000              	GLOBAL _z80_inir_callee
387   0000              	GLOBAL _z80_inir
388   0000              	GLOBAL _z80_inp_fastcall
389   0000              	GLOBAL _z80_inp
390   0000              	GLOBAL _z80_set_int_state_fastcall
391   0000              	GLOBAL _z80_set_int_state
392   0000              	GLOBAL _z80_get_int_state
393   0000              	GLOBAL _z80_delay_tstate_fastcall
394   0000              	GLOBAL _z80_delay_tstate
395   0000              	GLOBAL _z80_delay_ms_fastcall
396   0000              	GLOBAL _z80_delay_ms
397   0000              	GLOBAL _im2_remove_generic_callback_callee
398   0000              	GLOBAL _im2_remove_generic_callback
399   0000              	GLOBAL _im2_prepend_generic_callback_callee
400   0000              	GLOBAL _im2_prepend_generic_callback
401   0000              	GLOBAL _im2_append_generic_callback_callee
402   0000              	GLOBAL _im2_append_generic_callback
403   0000              	GLOBAL _im2_create_generic_isr_8080_callee
404   0000              	GLOBAL _im2_create_generic_isr_8080
405   0000              	GLOBAL _im2_create_generic_isr_callee
406   0000              	GLOBAL _im2_create_generic_isr
407   0000              	GLOBAL _im2_install_isr_callee
408   0000              	GLOBAL _im2_install_isr
409   0000              	GLOBAL _im2_init_fastcall
410   0000              	GLOBAL _im2_init
411   0000              	GLOBAL _intrinsic_swap_word_32_fastcall
412   0000              	GLOBAL _intrinsic_swap_word_32
413   0000              	GLOBAL _intrinsic_swap_endian_32_fastcall
414   0000              	GLOBAL _intrinsic_swap_endian_32
415   0000              	GLOBAL _intrinsic_swap_endian_16_fastcall
416   0000              	GLOBAL _intrinsic_swap_endian_16
417   0000              	GLOBAL _intrinsic_return_de
418   0000              	GLOBAL _intrinsic_return_bc
419   0000              	GLOBAL _intrinsic_exx
420   0000              	GLOBAL _intrinsic_ex_de_hl
421   0000              	GLOBAL _intrinsic_nop
422   0000              	GLOBAL _intrinsic_im_2
423   0000              	GLOBAL _intrinsic_im_1
424   0000              	GLOBAL _intrinsic_im_0
425   0000              	GLOBAL _intrinsic_retn
426   0000              	GLOBAL _intrinsic_reti
427   0000              	GLOBAL _intrinsic_halt
428   0000              	GLOBAL _intrinsic_ei
429   0000              	GLOBAL _intrinsic_di
430   0000              	GLOBAL _intrinsic_stub
431   0000              	GLOBAL _intrinsic_outi
432   0000              	GLOBAL _intrinsic_ldi
433   0000              	GLOBAL _zx_pattern_fill_callee
434   0000              	GLOBAL _zx_pattern_fill
435   0000              	GLOBAL _zx_saddrpup_fastcall
436   0000              	GLOBAL _zx_saddrpup
437   0000              	GLOBAL _zx_saddrpright_callee
438   0000              	GLOBAL _zx_saddrpright
439   0000              	GLOBAL _zx_saddrpleft_callee
440   0000              	GLOBAL _zx_saddrpleft
441   0000              	GLOBAL _zx_saddrpdown_fastcall
442   0000              	GLOBAL _zx_saddrpdown
443   0000              	GLOBAL _zx_saddrcup_fastcall
444   0000              	GLOBAL _zx_saddrcup
445   0000              	GLOBAL _zx_saddrcright_fastcall
446   0000              	GLOBAL _zx_saddrcright
447   0000              	GLOBAL _zx_saddrcleft_fastcall
448   0000              	GLOBAL _zx_saddrcleft
449   0000              	GLOBAL _zx_saddrcdown_fastcall
450   0000              	GLOBAL _zx_saddrcdown
451   0000              	GLOBAL _zx_saddr2py_fastcall
452   0000              	GLOBAL _zx_saddr2py
453   0000              	GLOBAL _zx_saddr2px_fastcall
454   0000              	GLOBAL _zx_saddr2px
455   0000              	GLOBAL _zx_saddr2cy_fastcall
456   0000              	GLOBAL _zx_saddr2cy
457   0000              	GLOBAL _zx_saddr2cx_fastcall
458   0000              	GLOBAL _zx_saddr2cx
459   0000              	GLOBAL _zx_saddr2aaddr_fastcall
460   0000              	GLOBAL _zx_saddr2aaddr
461   0000              	GLOBAL _zx_py2saddr_fastcall
462   0000              	GLOBAL _zx_py2saddr
463   0000              	GLOBAL _zx_py2aaddr_fastcall
464   0000              	GLOBAL _zx_py2aaddr
465   0000              	GLOBAL _zx_pxy2saddr_callee
466   0000              	GLOBAL _zx_pxy2saddr
467   0000              	GLOBAL _zx_pxy2aaddr_callee
468   0000              	GLOBAL _zx_pxy2aaddr
469   0000              	GLOBAL _zx_px2bitmask_fastcall
470   0000              	GLOBAL _zx_px2bitmask
471   0000              	GLOBAL _zx_cy2saddr_fastcall
472   0000              	GLOBAL _zx_cy2saddr
473   0000              	GLOBAL _zx_cy2aaddr_fastcall
474   0000              	GLOBAL _zx_cy2aaddr
475   0000              	GLOBAL _zx_cxy2saddr_callee
476   0000              	GLOBAL _zx_cxy2saddr
477   0000              	GLOBAL _zx_cxy2aaddr_callee
478   0000              	GLOBAL _zx_cxy2aaddr
479   0000              	GLOBAL _zx_bitmask2px_fastcall
480   0000              	GLOBAL _zx_bitmask2px
481   0000              	GLOBAL _zx_aaddrcup_fastcall
482   0000              	GLOBAL _zx_aaddrcup
483   0000              	GLOBAL _zx_aaddrcright_fastcall
484   0000              	GLOBAL _zx_aaddrcright
485   0000              	GLOBAL _zx_aaddrcleft_fastcall
486   0000              	GLOBAL _zx_aaddrcleft
487   0000              	GLOBAL _zx_aaddrcdown_fastcall
488   0000              	GLOBAL _zx_aaddrcdown
489   0000              	GLOBAL _zx_aaddr2saddr_fastcall
490   0000              	GLOBAL _zx_aaddr2saddr
491   0000              	GLOBAL _zx_aaddr2py_fastcall
492   0000              	GLOBAL _zx_aaddr2py
493   0000              	GLOBAL _zx_aaddr2px_fastcall
494   0000              	GLOBAL _zx_aaddr2px
495   0000              	GLOBAL _zx_aaddr2cy_fastcall
496   0000              	GLOBAL _zx_aaddr2cy
497   0000              	GLOBAL _zx_aaddr2cx_fastcall
498   0000              	GLOBAL _zx_aaddr2cx
499   0000              	GLOBAL _zx_visit_wc_pix_callee
500   0000              	GLOBAL _zx_visit_wc_pix
501   0000              	GLOBAL _zx_visit_wc_attr_callee
502   0000              	GLOBAL _zx_visit_wc_attr
503   0000              	GLOBAL _zx_scroll_wc_up_pix_callee
504   0000              	GLOBAL _zx_scroll_wc_up_pix
505   0000              	GLOBAL _zx_scroll_wc_up_attr_callee
506   0000              	GLOBAL _zx_scroll_wc_up_attr
507   0000              	GLOBAL _zx_scroll_wc_up_callee
508   0000              	GLOBAL _zx_scroll_wc_up
509   0000              	GLOBAL _zx_scroll_up_pix_callee
510   0000              	GLOBAL _zx_scroll_up_pix
511   0000              	GLOBAL _zx_scroll_up_attr_callee
512   0000              	GLOBAL _zx_scroll_up_attr
513   0000              	GLOBAL _zx_scroll_up_callee
514   0000              	GLOBAL _zx_scroll_up
515   0000              	GLOBAL _zx_cls_wc_pix_callee
516   0000              	GLOBAL _zx_cls_wc_pix
517   0000              	GLOBAL _zx_cls_wc_attr_callee
518   0000              	GLOBAL _zx_cls_wc_attr
519   0000              	GLOBAL _zx_cls_wc_callee
520   0000              	GLOBAL _zx_cls_wc
521   0000              	GLOBAL _zx_cls_pix_fastcall
522   0000              	GLOBAL _zx_cls_pix
523   0000              	GLOBAL _zx_cls_attr_fastcall
524   0000              	GLOBAL _zx_cls_attr
525   0000              	GLOBAL _zx_cls_fastcall
526   0000              	GLOBAL _zx_cls
527   0000              	GLOBAL _zx_border_fastcall
528   0000              	GLOBAL _zx_border
529   0000              	GLOBAL _player_fix_walk_lin
530   0000              	GLOBAL _player_gasta_brick
531   0000              	GLOBAL _player_lost_life
532   0000              	GLOBAL _player_hit
533   0000              	GLOBAL _player_open_door
534   0000              	GLOBAL _player_move_jump
535   0000              	GLOBAL _player_fire
536   0000              	GLOBAL _player_check_stairs_vertical
537   0000              	GLOBAL _player_check_stairs
538   0000              	GLOBAL _player_tile
539   0000              	GLOBAL _player_pick_item
540   0000              	GLOBAL _player_check_floor
541   0000              	GLOBAL _player_hit_platform_clear
542   0000              	GLOBAL _player_score_add
543   0000              	GLOBAL _player_hit_platform
544   0000              	GLOBAL _player_move_input
545   0000              	GLOBAL _player_turn
546   0000              	GLOBAL _player_move
547   0000              	GLOBAL _player_check_input
548   0000              	GLOBAL _player_pick_mushroom
549   0000              	GLOBAL _player_collision
550   0000              	GLOBAL _player_init
551   0000              	GLOBAL _menu_define_key
552   0000              	GLOBAL _menu_redefine
553   0000              	GLOBAL _menu_main_print
554   0000              	GLOBAL _menu_main
555   0000              	GLOBAL _game_match_back
556   0000              	GLOBAL _game_attribs
557   0000              	GLOBAL _game_boss_clear
558   0000              	GLOBAL _game_obj_clear
559   0000              	GLOBAL _game_obj_chk
560   0000              	GLOBAL _game_obj_set
561   0000              	GLOBAL _game_shoot_fire_boss
562   0000              	GLOBAL _game_shoot_fire
563   0000              	GLOBAL _game_add_enemy
564   0000              	GLOBAL _game_print_header
565   0000              	GLOBAL _game_check_time
566   0000              	GLOBAL _game_rotate_attrib_osd
567   0000              	GLOBAL _game_rotate_attrib
568   0000              	GLOBAL _game_colour_message
569   0000              	GLOBAL _game_paint_attrib_lin_osd
570   0000              	GLOBAL _game_paint_attrib_lin_h
571   0000              	GLOBAL _game_paint_attrib_lin
572   0000              	GLOBAL _game_print_score
573   0000              	GLOBAL _game_check_cell
574   0000              	GLOBAL _game_check_map
575   0000              	GLOBAL _game_loop
576   0000              	GLOBAL _game_round_init
577   0000              	GLOBAL _game_start_timer
578   0000              	GLOBAL _game_update_stats
579   0000              	GLOBAL _game_print_footer
580   0000              	GLOBAL _game_fill_row
581   0000              	GLOBAL _game_fps
582   0000              	GLOBAL _game_respawn
583   0000              	GLOBAL _game_draw_screen
584   0000              	GLOBAL _boss_turn
585   0000              	GLOBAL _enemy_avoid_dead
586   0000              	GLOBAL _enemy_avoid_fall
587   0000              	GLOBAL _enemy_respawn
588   0000              	GLOBAL _enemy_init
589   0000              	GLOBAL _enemy_move
590   0000              	GLOBAL _enemy_turn
591   0000              	GLOBAL _enemy_static
592   0000              	GLOBAL _enemy_walk
593   0000              	GLOBAL _enemy_horizontal
594   0000              	GLOBAL _enemy_vertical
595   0000              	GLOBAL _ay_fx_play
596   0000              	GLOBAL _ay_midi_play
597   0000              	GLOBAL _ay_is_playing
598   0000              	GLOBAL _ay_reset
599   0000              	GLOBAL _test_func
600   0000              	GLOBAL _test_proc
601   0000              	GLOBAL _in_mouse_kempston_wheel_delta
602   0000              	GLOBAL _in_mouse_kempston_wheel
603   0000              	GLOBAL _in_mouse_kempston_callee
604   0000              	GLOBAL _in_mouse_kempston
605   0000              	GLOBAL _in_mouse_kempston_setpos_callee
606   0000              	GLOBAL _in_mouse_kempston_setpos
607   0000              	GLOBAL _in_mouse_kempston_reset
608   0000              	GLOBAL _in_mouse_kempston_init
609   0000              	GLOBAL _in_mouse_amx_wheel_delta
610   0000              	GLOBAL _in_mouse_amx_wheel
611   0000              	GLOBAL _in_mouse_amx_callee
612   0000              	GLOBAL _in_mouse_amx
613   0000              	GLOBAL _in_mouse_amx_setpos_callee
614   0000              	GLOBAL _in_mouse_amx_setpos
615   0000              	GLOBAL _in_mouse_amx_reset
616   0000              	GLOBAL _in_mouse_amx_init_callee
617   0000              	GLOBAL _in_mouse_amx_init
618   0000              	GLOBAL _in_stick_sinclair2
619   0000              	GLOBAL _in_stick_sinclair1
620   0000              	GLOBAL _in_stick_kempston
621   0000              	GLOBAL _in_stick_fuller
622   0000              	GLOBAL _in_stick_cursor
623   0000              	GLOBAL _in_stick_keyboard_fastcall
624   0000              	GLOBAL _in_stick_keyboard
625   0000              	GLOBAL _in_wait_nokey
626   0000              	GLOBAL _in_wait_key
627   0000              	GLOBAL _in_test_key
628   0000              	GLOBAL _in_pause_fastcall
629   0000              	GLOBAL _in_pause
630   0000              	GLOBAL _in_key_scancode_fastcall
631   0000              	GLOBAL _in_key_scancode
632   0000              	GLOBAL _in_key_pressed_fastcall
633   0000              	GLOBAL _in_key_pressed
634   0000              	GLOBAL _in_inkey
635   0000              	GLOBAL _NIRVANAP_CHAR_TABLE
636   0000              	GLOBAL _NIRVANAP_WIDE_IMAGES
637   0000              	GLOBAL _NIRVANAP_TILE_IMAGES
638   0000              	GLOBAL _NIRVANAP_HOLE
639   0000              	GLOBAL _NIRVANAP_ISR_HOOK
640   0000              	GLOBAL _scan_map
641   0000              	GLOBAL _key_map
642   0000              	GLOBAL _player_lvl_table
643   0000              	GLOBAL _map_paper_last
644   0000              	GLOBAL _map_paper_clr
645   0000              	GLOBAL _map_paper
646   0000              	GLOBAL _draw_count
647   0000              	GLOBAL _g_player_hit_right
648   0000              	GLOBAL _g_player_hit_left
649   0000              	GLOBAL _bullet_count
650   0000              	GLOBAL _spr_hack
651   0000              	GLOBAL _boss_stat
652   0000              	GLOBAL _boss_time_fire
653   0000              	GLOBAL _boss_time
654   0000              	GLOBAL _boss_tile
655   0000              	GLOBAL _boss_inc
656   0000              	GLOBAL _boss_col
657   0000              	GLOBAL _boss_lin
658   0000              	GLOBAL _bullet
659   0000              	GLOBAL _bullet_vel
660   0000              	GLOBAL _bullet_frames
661   0000              	GLOBAL _bullet_colint
662   0000              	GLOBAL _bullet_dir
663   0000              	GLOBAL _bullet_tile
664   0000              	GLOBAL _bullet_col
665   0000              	GLOBAL _bullet_lin
666   0000              	GLOBAL _bullet_col0
667   0000              	GLOBAL _bullet_lin0
668   0000              	GLOBAL _bullet_max
669   0000              	GLOBAL _bullet_class
670   0000              	GLOBAL _mush_class
671   0000              	GLOBAL _mush_index
672   0000              	GLOBAL _anim_count
673   0000              	GLOBAL _anim_respanwn
674   0000              	GLOBAL _anim_loop
675   0000              	GLOBAL _anim_end
676   0000              	GLOBAL _anim_int
677   0000              	GLOBAL _anim_tile
678   0000              	GLOBAL _anim_col
679   0000              	GLOBAL _anim_lin
680   0000              	GLOBAL _map_heigth
681   0000              	GLOBAL _map_width
682   0000              	GLOBAL _scr_curr
683   0000              	GLOBAL _scr_obj1
684   0000              	GLOBAL _scr_obj0
685   0000              	GLOBAL _scr_map
686   0000              	GLOBAL _sprite_speed_alt
687   0000              	GLOBAL _spr_init
688   0000              	GLOBAL _spr_map_tile
689   0000              	GLOBAL _sprite_frames
690   0000              	GLOBAL _sprite_speed
691   0000              	GLOBAL _screen_ink
692   0000              	GLOBAL _screen_paper
693   0000              	GLOBAL _player_onstair
694   0000              	GLOBAL _game_start_scr
695   0000              	GLOBAL _game_respawn_tile
696   0000              	GLOBAL _game_respawn_index
697   0000              	GLOBAL _game_respawn_time
698   0000              	GLOBAL _game_score_top
699   0000              	GLOBAL _player_coins
700   0000              	GLOBAL _player_lives
701   0000              	GLOBAL _game_over
702   0000              	GLOBAL _game_sound
703   0000              	GLOBAL _game_inmune
704   0000              	GLOBAL _game_god_mode
705   0000              	GLOBAL _sprite_curr_index
706   0000              	GLOBAL _spr_count
707   0000              	GLOBAL _bullet_time
708   0000              	GLOBAL _anim_time
709   0000              	GLOBAL _frame_time
710   0000              	GLOBAL _curr_time
711   0000              	GLOBAL _s_state
712   0000              	GLOBAL _attrib_osd
713   0000              	GLOBAL _attrib_hl
714   0000              	GLOBAL _attrib
715   0000              	GLOBAL _zx_val_asm
716   0000              	GLOBAL _enemies
717   0000              	GLOBAL _tmp_ui
718   0000              	GLOBAL _tmp_sc
719   0000              	GLOBAL _tmp_uc
720   0000              	GLOBAL _tmp1
721   0000              	GLOBAL _tmp0
722   0000              	GLOBAL _tmp
723   0000              	GLOBAL _index1
724   0000              	GLOBAL _index0
725   0000              	GLOBAL _loop_count
726   0000              	GLOBAL _s_col1
727   0000              	GLOBAL _s_col0
728   0000              	GLOBAL _s_lin1
729   0000              	GLOBAL _s_lin0
730   0000              	GLOBAL _s_tile1
731   0000              	GLOBAL _s_tile0
732   0000              	GLOBAL _player_brick_time
733   0000              	GLOBAL _player_hit_count
734   0000              	GLOBAL _sprite_horizontal_check
735   0000              	GLOBAL _sprite_on_air
736   0000              	GLOBAL _sprite
737   0000              	GLOBAL _fps
738   0000              	GLOBAL _game_2buttons
739   0000              	GLOBAL _game_respawn_curr_time
740   0000              	GLOBAL _game_worldup
741   0000              	GLOBAL _game_mush_count
742   0000              	GLOBAL _game_boss_fix
743   0000              	GLOBAL _game_boss_hit
744   0000              	GLOBAL _game_boss_alive
745   0000              	GLOBAL _game_boss
746   0000              	GLOBAL _game_world
747   0000              	GLOBAL _game_gravity
748   0000              	GLOBAL _player_anim_stair
749   0000              	GLOBAL _player_hit_time
750   0000              	GLOBAL _player_lin_scr
751   0000              	GLOBAL _player_col_scr
752   0000              	GLOBAL _player_lvl
753   0000              	GLOBAL _player_int
754   0000              	GLOBAL _player_str
755   0000              	GLOBAL _player_max_vita
756   0000              	GLOBAL _player_max_mana
757   0000              	GLOBAL _player_vita
758   0000              	GLOBAL _player_mana
759   0000              	GLOBAL _player_keys
760   0000              	GLOBAL _player_vel_inc
761   0000              	GLOBAL _player_vel_y1
762   0000              	GLOBAL _player_vel_y0
763   0000              	GLOBAL _player_vel_y
764   0000              	GLOBAL _player_vel_x
765   0000              	GLOBAL _player_joy
766   0000              	GLOBAL _player_score
767   0000              	GLOBAL _last_time
768   0000              	GLOBAL _player_slide
769   0000              	GLOBAL _spr_timer
770   0000              	GLOBAL _jump_lin
771   0000              	GLOBAL _player_hit_col
772   0000              	GLOBAL _player_hit_lin
773   0000              	GLOBAL _colint
774   0000              	GLOBAL _col
775   0000              	GLOBAL _lin
776   0000              	GLOBAL _tile
777   0000              	GLOBAL _state_a
778   0000              	GLOBAL _state
779   0000              	GLOBAL _class
780   0000              	GLOBAL _tbuffer
781   0000              	GLOBAL _dirs_alt
782   0000              	GLOBAL _dirs
783   0000              	GLOBAL _k2
784   0000              	GLOBAL _k1
785   0000              	GLOBAL _joyfunc2
786   0000              	GLOBAL _joyfunc1
787   0000              	GLOBAL _btiles
788   0000              	GLOBAL _spec128
789   0000              	GLOBAL _GLOBAL_ZX_PORT_7FFD
790   0000              	GLOBAL _GLOBAL_ZX_PORT_1FFD
791   0000              	GLOBAL _GLOBAL_ZX_PORT_FE
792   0000              	GLOBAL _ay_effect_20
793   0000              	GLOBAL _ay_effect_19
794   0000              	GLOBAL _ay_effect_18
795   0000              	GLOBAL _ay_effect_17
796   0000              	GLOBAL _ay_effect_16
797   0000              	GLOBAL _ay_effect_15
798   0000              	GLOBAL _ay_effect_14
799   0000              	GLOBAL _ay_effect_13
800   0000              	GLOBAL _ay_effect_12
801   0000              	GLOBAL _ay_effect_11
802   0000              	GLOBAL _ay_effect_10
803   0000              	GLOBAL _ay_effect_09
804   0000              	GLOBAL _ay_effect_08
805   0000              	GLOBAL _ay_effect_07
806   0000              	GLOBAL _ay_effect_06
807   0000              	GLOBAL _ay_effect_05
808   0000              	GLOBAL _ay_effect_04
809   0000              	GLOBAL _ay_effect_03
810   0000              	GLOBAL _ay_effect_02
811   0000              	GLOBAL _ay_effect_01
812   0000              	GLOBAL _pb_midi_phase_1
813   0000              	GLOBAL _pb_midi_title
814   0000              	GLOBAL _control_method
815   0000              	GLOBAL _world1_h
816   0000              	GLOBAL _world1_w
817   0000              	GLOBAL _world1
818   0000              	GLOBAL _paper1
819   0000              	GLOBAL _lenght1
820   0000              	GLOBAL _start_scr1
821   0000              	GLOBAL _world0_h
822   0000              	GLOBAL _world0_w
823   0000              	GLOBAL _world0
824   0000              	GLOBAL _paper0
825   0000              	GLOBAL _lenght0
826   0000              	GLOBAL _start_scr0
827   0000              ;--------------------------------------------------------
828   0000              ; special function registers
829   0000              ;--------------------------------------------------------
830   0000              defc _IO_FE	=	0x00fe
831   0000              defc _IO_1FFD	=	0x1ffd
832   0000              defc _IO_7FFD	=	0x7ffd
833   0000              ;--------------------------------------------------------
834   0000              ; ram data
835   0000              ;--------------------------------------------------------
836   0000              	SECTION bss_compiler
837   0000              ;--------------------------------------------------------
838   0000              ; ram data
839   0000              ;--------------------------------------------------------
840   0000              
841   0000              IF 0
842   0000              
843   0000              ; .area _INITIALIZED removed by z88dk
844   0000              
845   0000              
846   0000              ENDIF
847   0000              
848   0000              ;--------------------------------------------------------
849   0000              ; absolute external ram data
850   0000              ;--------------------------------------------------------
851   0000              	SECTION IGNORE
852   0000              ;--------------------------------------------------------
853   0000              ; global & static initialisations
854   0000              ;--------------------------------------------------------
855   0000              	SECTION code_crt_init
856   0000              ;--------------------------------------------------------
857   0000              ; Home
858   0000              ;--------------------------------------------------------
859   0000              	SECTION IGNORE
860   0000              ;--------------------------------------------------------
861   0000              ; code
862   0000              ;--------------------------------------------------------
863   0000              	SECTION code_compiler
864   0000              ;	---------------------------------
865   0000              ; Function spr_calc_index
866   0000              ; ---------------------------------
867   0000              _spr_calc_index:
868   0000  CD 00 00    	call	___sdcc_enter_ix
869   0003  DD 4E 05    	ld	c,(ix+5)
870   0006  CB 39       	srl	c
871   0008  06 00       	ld	b,0x00
872   000A  DD 7E 04    	ld	a,(ix+4)
873   000D  07          	rlca
874   000E  07          	rlca
875   000F  07          	rlca
876   0010  07          	rlca
877   0011  E6 0F       	and	a,0x0f
878   0013  6F          	ld	l, a
879   0014  26 00       	ld	h,0x00
880   0016  29          	add	hl, hl
881   0017  29          	add	hl, hl
882   0018  29          	add	hl, hl
883   0019  29          	add	hl, hl
884   001A  09          	add	hl, bc
885   001B  DD E1       	pop	ix
886   001D  C9          	ret
887   001E              	SECTION code_compiler
888   001E              ;	---------------------------------
889   001E              ; Function spr_chktime
890   001E              ; ---------------------------------
891   001E              _spr_chktime:
892   001E  CD 00 00    	call	___sdcc_enter_ix
893   0021  F5          	push	af
894   0022  DD 75 FE    	ld	(ix-2),l
895   0025  DD 74 FF    	ld	(ix-1),h
896   0028  E1          	pop	hl
897   0029  01 00 00    	ld	bc,_sprite_speed_alt+0
898   002C  5E          	ld	e,(hl)
899   002D  E5          	push	hl
900   002E  6B          	ld	l,e
901   002F  26 00       	ld	h,0x00
902   0031  09          	add	hl, bc
903   0032  7E          	ld	a,(hl)
904   0033  57          	ld	d,a
905   0034  B7          	or	a, a
906   0035  20 13       	jr	NZ,l_spr_chktime_00102
907   0037  01 00 00    	ld	bc,_sprite_speed+0
908   003A  16 00       	ld	d,0x00
909   003C  21 00 00    	ld	hl,_class
910   003F  19          	add	hl, de
911   0040  6E          	ld	l, (hl)
912   0041  26 00       	ld	h,0x00
913   0043  09          	add	hl, bc
914   0044  7E          	ld	a, (hl)
915   0045  32 00 00    	ld	(_tmp),a
916   0048  18 04       	jr	l_spr_chktime_00103
917   004A              l_spr_chktime_00102:
918   004A  21 00 00    	ld	hl,_tmp
919   004D  72          	ld	(hl), d
920   004E              l_spr_chktime_00103:
921   004E  3A 00 00    	ld	a,(_tmp)
922   0051  4F          	ld	c,a
923   0052  06 00       	ld	b,0x00
924   0054  60          	ld	h,b
925   0055  6B          	ld	l, e
926   0056  29          	add	hl, hl
927   0057  11 00 00    	ld	de,_last_time
928   005A  19          	add	hl, de
929   005B  5E          	ld	e, (hl)
930   005C  23          	inc	hl
931   005D  56          	ld	d, (hl)
932   005E  C5          	push	bc
933   005F  D5          	push	de
934   0060  CD 00 00    	call	_game_check_time
935   0063  F1          	pop	af
936   0064  F1          	pop	af
937   0065  7D          	ld	a, l
938   0066  B7          	or	a, a
939   0067  28 15       	jr	Z,l_spr_chktime_00105
940   0069  E1          	pop	hl
941   006A  E5          	push	hl
942   006B  6E          	ld	l, (hl)
943   006C  26 00       	ld	h,0x00
944   006E  29          	add	hl, hl
945   006F  01 00 00    	ld	bc,_last_time
946   0072  09          	add	hl,bc
947   0073  ED 5B 00 00 	ld	de,(_curr_time)
948   0077  73          	ld	(hl),e
949   0078  23          	inc	hl
950   0079  72          	ld	(hl),d
951   007A  2E 01       	ld	l,0x01
952   007C  18 02       	jr	l_spr_chktime_00106
953   007E              l_spr_chktime_00105:
954   007E  2E 00       	ld	l,0x00
955   0080              l_spr_chktime_00106:
956   0080  F1          	pop	af
957   0081  DD E1       	pop	ix
958   0083  C9          	ret
959   0084              	SECTION code_compiler
960   0084              ;	---------------------------------
961   0084              ; Function spr_move_up
962   0084              ; ---------------------------------
963   0084              _spr_move_up:
964   0084  2A 00 00    	ld	hl,(_sprite)
965   0087  26 00       	ld	h,0x00
966   0089  01 00 00    	ld	bc,_lin
967   008C  09          	add	hl,bc
968   008D  4E          	ld	c,(hl)
969   008E  3E 10       	ld	a,0x10
970   0090  91          	sub	a,c
971   0091  38 16       	jr	C,l_spr_move_up_00109
972   0093  3A 00 00    	ld	a,(_sprite)
973   0096  D6 07       	sub	a,0x07
974   0098  20 0B       	jr	NZ,l_spr_move_up_00104
975   009A  CD 51 04    	call	_spr_page_up
976   009D  7D          	ld	a, l
977   009E  B7          	or	a, a
978   009F  28 04       	jr	Z,l_spr_move_up_00104
979   00A1  2E 00       	ld	l,0x00
980   00A3  18 54       	jr	l_spr_move_up_00111
981   00A5              l_spr_move_up_00104:
982   00A5  2E 01       	ld	l,0x01
983   00A7  18 50       	jr	l_spr_move_up_00111
984   00A9              l_spr_move_up_00109:
985   00A9  79          	ld	a, c
986   00AA  C6 FE       	add	a,0xfe
987   00AC  32 00 00    	ld	(_s_lin1),a
988   00AF  07          	rlca
989   00B0  07          	rlca
990   00B1  07          	rlca
991   00B2  07          	rlca
992   00B3  E6 0F       	and	a,0x0f
993   00B5  4F          	ld	c, a
994   00B6  3A 00 00    	ld	a,(_s_lin0)
995   00B9  07          	rlca
996   00BA  07          	rlca
997   00BB  07          	rlca
998   00BC  07          	rlca
999   00BD  E6 0F       	and	a,0x0f
1000  00BF  47          	ld	b, a
1001  00C0  79          	ld	a, c
1002  00C1  90          	sub	a, b
1003  00C2  20 04       	jr	NZ,l_spr_move_up_00135
1004  00C4  3E 01       	ld	a,0x01
1005  00C6  18 01       	jr	l_spr_move_up_00136
1006  00C8              l_spr_move_up_00135:
1007  00C8  AF          	xor	a,a
1008  00C9              l_spr_move_up_00136:
1009  00C9  EE 01       	xor	a,0x01
1010  00CB  28 1D       	jr	Z,l_spr_move_up_00106
1011  00CD  2A 00 00    	ld	hl,(_sprite)
1012  00D0  26 00       	ld	h,0x00
1013  00D2  01 00 00    	ld	bc,_col
1014  00D5  09          	add	hl,bc
1015  00D6  7E          	ld	a,(hl)
1016  00D7  F5          	push	af
1017  00D8  33          	inc	sp
1018  00D9  3A 00 00    	ld	a,(_s_lin1)
1019  00DC  F5          	push	af
1020  00DD  33          	inc	sp
1021  00DE  CD 00 00    	call	_game_check_map
1022  00E1  F1          	pop	af
1023  00E2  7C          	ld	a,h
1024  00E3  B5          	or	a,l
1025  00E4  28 04       	jr	Z,l_spr_move_up_00106
1026  00E6  2E 01       	ld	l,0x01
1027  00E8  18 0F       	jr	l_spr_move_up_00111
1028  00EA              l_spr_move_up_00106:
1029  00EA  2A 00 00    	ld	hl,(_sprite)
1030  00ED  26 00       	ld	h,0x00
1031  00EF  01 00 00    	ld	bc,_lin
1032  00F2  09          	add	hl,bc
1033  00F3  3A 00 00    	ld	a,(_s_lin1)
1034  00F6  77          	ld	(hl),a
1035  00F7  2E 00       	ld	l,0x00
1036  00F9              l_spr_move_up_00111:
1037  00F9  C9          	ret
1038  00FA              	SECTION code_compiler
1039  00FA              ;	---------------------------------
1040  00FA              ; Function spr_move_down
1041  00FA              ; ---------------------------------
1042  00FA              _spr_move_down:
1043  00FA  2A 00 00    	ld	hl,(_sprite)
1044  00FD  26 00       	ld	h,0x00
1045  00FF  01 00 00    	ld	bc,_lin
1046  0102  09          	add	hl,bc
1047  0103  7E          	ld	a,(hl)
1048  0104  FE 90       	cp	a,0x90
1049  0106  38 2C       	jr	C,l_spr_move_down_00112
1050  0108  3A 00 00    	ld	a,(_sprite)
1051  010B  D6 07       	sub	a,0x07
1052  010D  28 04       	jr	Z,l_spr_move_down_00137
1053  010F  4D          	ld	c,l
1054  0110  44          	ld	b,h
1055  0111  18 1A       	jr	l_spr_move_down_00105
1056  0113              l_spr_move_down_00137:
1057  0113  CD 02 04    	call	_spr_page_down
1058  0116  7D          	ld	a, l
1059  0117  B7          	or	a, a
1060  0118  28 04       	jr	Z,l_spr_move_down_00102
1061  011A  2E 01       	ld	l,0x01
1062  011C  18 67       	jr	l_spr_move_down_00114
1063  011E              l_spr_move_down_00102:
1064  011E  2A 00 00    	ld	hl,(_sprite)
1065  0121  26 00       	ld	h,0x00
1066  0123  01 00 00    	ld	bc,_lin
1067  0126  09          	add	hl,bc
1068  0127  36 90       	ld	(hl),0x90
1069  0129  2E 01       	ld	l,0x01
1070  012B  18 58       	jr	l_spr_move_down_00114
1071  012D              l_spr_move_down_00105:
1072  012D  3E 90       	ld	a,0x90
1073  012F  02          	ld	(bc), a
1074  0130  2E 01       	ld	l,0x01
1075  0132  18 51       	jr	l_spr_move_down_00114
1076  0134              l_spr_move_down_00112:
1077  0134  C6 10       	add	a,0x10
1078  0136  32 00 00    	ld	(_s_lin1),a
1079  0139  07          	rlca
1080  013A  07          	rlca
1081  013B  07          	rlca
1082  013C  07          	rlca
1083  013D  E6 0F       	and	a,0x0f
1084  013F  4F          	ld	c, a
1085  0140  3A 00 00    	ld	a,(_s_lin0)
1086  0143  07          	rlca
1087  0144  07          	rlca
1088  0145  07          	rlca
1089  0146  07          	rlca
1090  0147  E6 0F       	and	a,0x0f
1091  0149  5F          	ld	e, a
1092  014A  79          	ld	a, c
1093  014B  93          	sub	a, e
1094  014C  20 04       	jr	NZ,l_spr_move_down_00138
1095  014E  3E 01       	ld	a,0x01
1096  0150  18 01       	jr	l_spr_move_down_00139
1097  0152              l_spr_move_down_00138:
1098  0152  AF          	xor	a,a
1099  0153              l_spr_move_down_00139:
1100  0153  EE 01       	xor	a,0x01
1101  0155  28 1D       	jr	Z,l_spr_move_down_00110
1102  0157  2A 00 00    	ld	hl,(_sprite)
1103  015A  26 00       	ld	h,0x00
1104  015C  01 00 00    	ld	bc,_col
1105  015F  09          	add	hl,bc
1106  0160  7E          	ld	a,(hl)
1107  0161  F5          	push	af
1108  0162  33          	inc	sp
1109  0163  3A 00 00    	ld	a,(_s_lin1)
1110  0166  F5          	push	af
1111  0167  33          	inc	sp
1112  0168  CD 00 00    	call	_game_check_map
1113  016B  F1          	pop	af
1114  016C  7C          	ld	a,h
1115  016D  B5          	or	a,l
1116  016E  28 04       	jr	Z,l_spr_move_down_00110
1117  0170  2E 01       	ld	l,0x01
1118  0172  18 11       	jr	l_spr_move_down_00114
1119  0174              l_spr_move_down_00110:
1120  0174  2A 00 00    	ld	hl,(_sprite)
1121  0177  26 00       	ld	h,0x00
1122  0179  01 00 00    	ld	bc,_lin
1123  017C  09          	add	hl,bc
1124  017D  3A 00 00    	ld	a,(_s_lin1)
1125  0180  C6 F2       	add	a,0xf2
1126  0182  77          	ld	(hl),a
1127  0183  2E 00       	ld	l,0x00
1128  0185              l_spr_move_down_00114:
1129  0185  C9          	ret
1130  0186              	SECTION code_compiler
1131  0186              ;	---------------------------------
1132  0186              ; Function spr_move_horizontal
1133  0186              ; ---------------------------------
1134  0186              _spr_move_horizontal:
1135  0186  2A 00 00    	ld	hl,(_sprite)
1136  0189  26 00       	ld	h,0x00
1137  018B  01 00 00    	ld	bc,_state
1138  018E  09          	add	hl,bc
1139  018F  7E          	ld	a,(hl)
1140  0190  CB 57       	bit	2, a
1141  0192  28 05       	jr	Z,l_spr_move_horizontal_00104
1142  0194  CD A5 01    	call	_spr_move_right
1143  0197  18 0B       	jr	l_spr_move_horizontal_00106
1144  0199              l_spr_move_horizontal_00104:
1145  0199  CB 5F       	bit	3, a
1146  019B  28 05       	jr	Z,l_spr_move_horizontal_00105
1147  019D  CD A1 02    	call	_spr_move_left
1148  01A0  18 02       	jr	l_spr_move_horizontal_00106
1149  01A2              l_spr_move_horizontal_00105:
1150  01A2  2E 00       	ld	l,0x00
1151  01A4              l_spr_move_horizontal_00106:
1152  01A4  C9          	ret
1153  01A5              	SECTION code_compiler
1154  01A5              ;	---------------------------------
1155  01A5              ; Function spr_move_right
1156  01A5              ; ---------------------------------
1157  01A5              _spr_move_right:
1158  01A5  2A 00 00    	ld	hl,(_sprite)
1159  01A8  26 00       	ld	h,0x00
1160  01AA  01 00 00    	ld	bc,_colint
1161  01AD  09          	add	hl,bc
1162  01AE  7E          	ld	a,(hl)
1163  01AF  3C          	inc	a
1164  01B0  77          	ld	(hl),a
1165  01B1  4F          	ld	c,a
1166  01B2  3A 00 00    	ld	a,(_sprite)
1167  01B5  5F          	ld	e,a
1168  01B6  16 00       	ld	d,0x00
1169  01B8  21 00 00    	ld	hl,_class
1170  01BB  19          	add	hl,de
1171  01BC  5E          	ld	e, (hl)
1172  01BD  16 00       	ld	d,0x00
1173  01BF  21 00 00    	ld	hl,_sprite_frames
1174  01C2  19          	add	hl, de
1175  01C3  7E          	ld	a, (hl)
1176  01C4  91          	sub	a, c
1177  01C5  C2 9E 02    	jp	NZ,l_spr_move_right_00118
1178  01C8  2A 00 00    	ld	hl,(_sprite)
1179  01CB  26 00       	ld	h,0x00
1180  01CD  01 00 00    	ld	bc,_lin
1181  01D0  09          	add	hl,bc
1182  01D1  7E          	ld	a,(hl)
1183  01D2  32 00 00    	ld	(_s_lin1),a
1184  01D5  2A 00 00    	ld	hl,(_sprite)
1185  01D8  26 00       	ld	h,0x00
1186  01DA  01 00 00    	ld	bc,_col
1187  01DD  09          	add	hl,bc
1188  01DE  7E          	ld	a,(hl)
1189  01DF  FE 1E       	cp	a,0x1e
1190  01E1  30 5E       	jr	NC,l_spr_move_right_00108
1191  01E3  3C          	inc	a
1192  01E4  32 00 00    	ld	(_s_col1),a
1193  01E7  21 00 00    	ld	hl,_sprite_horizontal_check
1194  01EA  36 01       	ld	(hl),0x01
1195  01EC  2A FF FF    	ld	hl,(_s_col1 - 1)
1196  01EF  3A 00 00    	ld	a,(_s_lin1)
1197  01F2  6F          	ld	l,a
1198  01F3  E5          	push	hl
1199  01F4  CD 00 00    	call	_game_check_map
1200  01F7  F1          	pop	af
1201  01F8  7D          	ld	a,l
1202  01F9  32 00 00    	ld	(_tmp0),a
1203  01FC  B7          	or	a, a
1204  01FD  20 13       	jr	NZ,l_spr_move_right_00102
1205  01FF  3A 00 00    	ld	a,(_s_lin1)
1206  0202  C6 0F       	add	a,0x0f
1207  0204  4F          	ld	c, a
1208  0205  3A 00 00    	ld	a, (_s_col1)
1209  0208  47          	ld	b,a
1210  0209  C5          	push	bc
1211  020A  CD 00 00    	call	_game_check_map
1212  020D  F1          	pop	af
1213  020E  7D          	ld	a,l
1214  020F  32 00 00    	ld	(_tmp0),a
1215  0212              l_spr_move_right_00102:
1216  0212  21 00 00    	ld	hl,_sprite_horizontal_check
1217  0215  36 00       	ld	(hl),0x00
1218  0217  3A 00 00    	ld	a,(_tmp0)
1219  021A  B7          	or	a, a
1220  021B  28 24       	jr	Z,l_spr_move_right_00108
1221  021D  2A 00 00    	ld	hl,(_sprite)
1222  0220  26 00       	ld	h,0x00
1223  0222  01 00 00    	ld	bc,_colint
1224  0225  09          	add	hl,bc
1225  0226  7E          	ld	a,(hl)
1226  0227  C6 FF       	add	a,0xff
1227  0229  77          	ld	(hl),a
1228  022A  3A 00 00    	ld	a,(_sprite_on_air)
1229  022D  B7          	or	a,a
1230  022E  20 0D       	jr	NZ,l_spr_move_right_00104
1231  0230  2A 00 00    	ld	hl,(_sprite)
1232  0233  26 00       	ld	h,0x00
1233  0235  01 00 00    	ld	bc,_colint
1234  0238  09          	add	hl,bc
1235  0239  7E          	ld	a,(hl)
1236  023A  C6 FF       	add	a,0xff
1237  023C  77          	ld	(hl),a
1238  023D              l_spr_move_right_00104:
1239  023D  2E 01       	ld	l,0x01
1240  023F  18 5F       	jr	l_spr_move_right_00119
1241  0241              l_spr_move_right_00108:
1242  0241  2A 00 00    	ld	hl,(_sprite)
1243  0244  26 00       	ld	h,0x00
1244  0246  01 00 00    	ld	bc,_col
1245  0249  09          	add	hl,bc
1246  024A  34          	inc	(hl)
1247  024B  2A 00 00    	ld	hl,(_sprite)
1248  024E  26 00       	ld	h,0x00
1249  0250  01 00 00    	ld	bc,_colint
1250  0253  09          	add	hl,bc
1251  0254  AF          	xor	a,a
1252  0255  77          	ld	(hl),a
1253  0256  2A 00 00    	ld	hl,(_sprite)
1254  0259  26 00       	ld	h,0x00
1255  025B  01 00 00    	ld	bc,_col
1256  025E  09          	add	hl,bc
1257  025F  5E          	ld	e,(hl)
1258  0260  3E 1E       	ld	a,0x1e
1259  0262  93          	sub	a,e
1260  0263  30 39       	jr	NC,l_spr_move_right_00118
1261  0265  3A 00 00    	ld	a,(_sprite)
1262  0268  D6 07       	sub	a,0x07
1263  026A  28 04       	jr	Z,l_spr_move_right_00156
1264  026C  4D          	ld	c,l
1265  026D  44          	ld	b,h
1266  026E  18 27       	jr	l_spr_move_right_00113
1267  0270              l_spr_move_right_00156:
1268  0270  CD A0 03    	call	_spr_page_right
1269  0273  3A 00 00    	ld	a,(_sprite)
1270  0276  C6 00       	add	a,+((_col) & 0xFF)
1271  0278  4D          	ld	c,l
1272  0279  5F          	ld	e,a
1273  027A  3E 00       	ld	a,+((_col) / 256)
1274  027C  CE 00       	adc	a,0x00
1275  027E  57          	ld	d,a
1276  027F  79          	ld	a, c
1277  0280  B7          	or	a, a
1278  0281  28 0F       	jr	Z,l_spr_move_right_00110
1279  0283  AF          	xor	a, a
1280  0284  12          	ld	(de), a
1281  0285  3A 07 00    	ld	a,(_lin + 7)
1282  0288  32 00 00    	ld	(_player_lin_scr),a
1283  028B  21 00 00    	ld	hl,_player_col_scr
1284  028E  36 00       	ld	(hl),0x00
1285  0290  18 08       	jr	l_spr_move_right_00114
1286  0292              l_spr_move_right_00110:
1287  0292  3E 1E       	ld	a,0x1e
1288  0294  12          	ld	(de), a
1289  0295  18 03       	jr	l_spr_move_right_00114
1290  0297              l_spr_move_right_00113:
1291  0297  3E 1E       	ld	a,0x1e
1292  0299  02          	ld	(bc), a
1293  029A              l_spr_move_right_00114:
1294  029A  2E 01       	ld	l,0x01
1295  029C  18 02       	jr	l_spr_move_right_00119
1296  029E              l_spr_move_right_00118:
1297  029E  2E 00       	ld	l,0x00
1298  02A0              l_spr_move_right_00119:
1299  02A0  C9          	ret
1300  02A1              	SECTION code_compiler
1301  02A1              ;	---------------------------------
1302  02A1              ; Function spr_move_left
1303  02A1              ; ---------------------------------
1304  02A1              _spr_move_left:
1305  02A1  01 00 00    	ld	bc,_colint+0
1306  02A4  79          	ld	a, c
1307  02A5  21 00 00    	ld	hl,_sprite
1308  02A8  86          	add	a, (hl)
1309  02A9  5F          	ld	e, a
1310  02AA  78          	ld	a, b
1311  02AB  CE 00       	adc	a,0x00
1312  02AD  57          	ld	d, a
1313  02AE  1A          	ld	a, (de)
1314  02AF  C6 FF       	add	a,0xff
1315  02B1  12          	ld	(de), a
1316  02B2  79          	ld	a, c
1317  02B3  86          	add	a, (hl)
1318  02B4  5F          	ld	e, a
1319  02B5  78          	ld	a, b
1320  02B6  CE 00       	adc	a,0x00
1321  02B8  57          	ld	d, a
1322  02B9  1A          	ld	a, (de)
1323  02BA  3C          	inc	a
1324  02BB  C2 9D 03    	jp	NZ,l_spr_move_left_00118
1325  02BE  5E          	ld	e,(hl)
1326  02BF  16 00       	ld	d,0x00
1327  02C1  21 00 00    	ld	hl,_lin
1328  02C4  19          	add	hl,de
1329  02C5  7E          	ld	a,(hl)
1330  02C6  32 00 00    	ld	(_s_lin1),a
1331  02C9  2A 00 00    	ld	hl,(_sprite)
1332  02CC  26 00       	ld	h,0x00
1333  02CE  11 00 00    	ld	de,_col
1334  02D1  19          	add	hl,de
1335  02D2  7E          	ld	a,(hl)
1336  02D3  B7          	or	a, a
1337  02D4  28 5A       	jr	Z,l_spr_move_left_00108
1338  02D6  C6 FF       	add	a,0xff
1339  02D8  32 00 00    	ld	(_s_col1),a
1340  02DB  21 00 00    	ld	hl,_sprite_horizontal_check
1341  02DE  36 01       	ld	(hl),0x01
1342  02E0  3A 00 00    	ld	a,(_s_col1)
1343  02E3  C5          	push	bc
1344  02E4  F5          	push	af
1345  02E5  33          	inc	sp
1346  02E6  3A 00 00    	ld	a,(_s_lin1)
1347  02E9  F5          	push	af
1348  02EA  33          	inc	sp
1349  02EB  CD 00 00    	call	_game_check_map
1350  02EE  F1          	pop	af
1351  02EF  C1          	pop	bc
1352  02F0  7D          	ld	a,l
1353  02F1  32 00 00    	ld	(_tmp0),a
1354  02F4  B7          	or	a, a
1355  02F5  20 16       	jr	NZ,l_spr_move_left_00102
1356  02F7  3A 00 00    	ld	a,(_s_lin1)
1357  02FA  C6 0F       	add	a,0x0f
1358  02FC  57          	ld	d, a
1359  02FD  3A 00 00    	ld	a,(_s_col1)
1360  0300  C5          	push	bc
1361  0301  5A          	ld	e,d
1362  0302  57          	ld	d,a
1363  0303  D5          	push	de
1364  0304  CD 00 00    	call	_game_check_map
1365  0307  F1          	pop	af
1366  0308  C1          	pop	bc
1367  0309  7D          	ld	a,l
1368  030A  32 00 00    	ld	(_tmp0),a
1369  030D              l_spr_move_left_00102:
1370  030D  21 00 00    	ld	hl,_sprite_horizontal_check
1371  0310  36 00       	ld	(hl),0x00
1372  0312  3A 00 00    	ld	a,(_tmp0)
1373  0315  B7          	or	a, a
1374  0316  28 18       	jr	Z,l_spr_move_left_00108
1375  0318  2A 00 00    	ld	hl,(_sprite)
1376  031B  26 00       	ld	h,0x00
1377  031D  09          	add	hl,bc
1378  031E  34          	inc	(hl)
1379  031F  3A 00 00    	ld	a,(_sprite_on_air)
1380  0322  B7          	or	a, a
1381  0323  20 07       	jr	NZ,l_spr_move_left_00104
1382  0325  2A 00 00    	ld	hl,(_sprite)
1383  0328  26 00       	ld	h,0x00
1384  032A  09          	add	hl,bc
1385  032B  34          	inc	(hl)
1386  032C              l_spr_move_left_00104:
1387  032C  2E 01       	ld	l,0x01
1388  032E  18 6F       	jr	l_spr_move_left_00119
1389  0330              l_spr_move_left_00108:
1390  0330  2A 00 00    	ld	hl,(_sprite)
1391  0333  26 00       	ld	h,0x00
1392  0335  11 00 00    	ld	de,_col
1393  0338  19          	add	hl,de
1394  0339  7E          	ld	a,(hl)
1395  033A  EB          	ex	de,hl
1396  033B  C6 FF       	add	a,0xff
1397  033D  12          	ld	(de),a
1398  033E  79          	ld	a,c
1399  033F  21 00 00    	ld	hl,_sprite
1400  0342  86          	add	a, (hl)
1401  0343  4F          	ld	c, a
1402  0344  78          	ld	a, b
1403  0345  CE 00       	adc	a,0x00
1404  0347  47          	ld	b, a
1405  0348  5E          	ld	e,(hl)
1406  0349  16 00       	ld	d,0x00
1407  034B  21 00 00    	ld	hl,_class
1408  034E  19          	add	hl,de
1409  034F  5E          	ld	e, (hl)
1410  0350  16 00       	ld	d,0x00
1411  0352  21 00 00    	ld	hl,_sprite_frames
1412  0355  19          	add	hl, de
1413  0356  5E          	ld	e, (hl)
1414  0357  1D          	dec	e
1415  0358  7B          	ld	a, e
1416  0359  02          	ld	(bc), a
1417  035A  2A 00 00    	ld	hl,(_sprite)
1418  035D  26 00       	ld	h,0x00
1419  035F  01 00 00    	ld	bc,_col
1420  0362  09          	add	hl,bc
1421  0363  7E          	ld	a,(hl)
1422  0364  3C          	inc	a
1423  0365  20 36       	jr	NZ,l_spr_move_left_00118
1424  0367  3A 00 00    	ld	a,(_sprite)
1425  036A  D6 07       	sub	a,0x07
1426  036C  4D          	ld	c,l
1427  036D  44          	ld	b,h
1428  036E  20 27       	jr	NZ,l_spr_move_left_00113
1429  0370  CD D3 03    	call	_spr_page_left
1430  0373  3A 00 00    	ld	a,(_sprite)
1431  0376  C6 00       	add	a,+((_col) & 0xFF)
1432  0378  4D          	ld	c,l
1433  0379  5F          	ld	e,a
1434  037A  3E 00       	ld	a,+((_col) / 256)
1435  037C  CE 00       	adc	a,0x00
1436  037E  57          	ld	d,a
1437  037F  79          	ld	a, c
1438  0380  B7          	or	a, a
1439  0381  28 10       	jr	Z,l_spr_move_left_00110
1440  0383  3E 1E       	ld	a,0x1e
1441  0385  12          	ld	(de), a
1442  0386  3A 07 00    	ld	a,(_lin + 7)
1443  0389  32 00 00    	ld	(_player_lin_scr),a
1444  038C  21 00 00    	ld	hl,_player_col_scr
1445  038F  36 1E       	ld	(hl),0x1e
1446  0391  18 06       	jr	l_spr_move_left_00114
1447  0393              l_spr_move_left_00110:
1448  0393  AF          	xor	a, a
1449  0394  12          	ld	(de), a
1450  0395  18 02       	jr	l_spr_move_left_00114
1451  0397              l_spr_move_left_00113:
1452  0397  AF          	xor	a, a
1453  0398  02          	ld	(bc), a
1454  0399              l_spr_move_left_00114:
1455  0399  2E 01       	ld	l,0x01
1456  039B  18 02       	jr	l_spr_move_left_00119
1457  039D              l_spr_move_left_00118:
1458  039D  2E 00       	ld	l,0x00
1459  039F              l_spr_move_left_00119:
1460  039F  C9          	ret
1461  03A0              	SECTION code_compiler
1462  03A0              ;	---------------------------------
1463  03A0              ; Function spr_page_right
1464  03A0              ; ---------------------------------
1465  03A0              _spr_page_right:
1466  03A0  2A FF FF    	ld	hl,(_map_width - 1)
1467  03A3  3A 00 00    	ld	a,(_scr_curr)
1468  03A6  6F          	ld	l,a
1469  03A7  E5          	push	hl
1470  03A8  CD 00 00    	call	__moduchar_callee
1471  03AB  7D          	ld	a, l
1472  03AC  3C          	inc	a
1473  03AD  32 00 00    	ld	(_tmp1),a
1474  03B0  21 00 00    	ld	hl,_map_width
1475  03B3  96          	sub	a, (hl)
1476  03B4  30 1A       	jr	NC,l_spr_page_right_00102
1477  03B6  3A 00 00    	ld	a,(_game_boss)
1478  03B9  B7          	or	a, a
1479  03BA  28 06       	jr	Z,l_spr_page_right_00101
1480  03BC  3A 00 00    	ld	a,(_game_god_mode)
1481  03BF  B7          	or	a, a
1482  03C0  28 0E       	jr	Z,l_spr_page_right_00102
1483  03C2              l_spr_page_right_00101:
1484  03C2  21 00 00    	ld	hl,_scr_curr
1485  03C5  34          	inc	(hl)
1486  03C6  CD FF 04    	call	_spr_page_map
1487  03C9  CD 00 00    	call	_game_draw_screen
1488  03CC  2E 01       	ld	l,0x01
1489  03CE  18 02       	jr	l_spr_page_right_00105
1490  03D0              l_spr_page_right_00102:
1491  03D0  2E 00       	ld	l,0x00
1492  03D2              l_spr_page_right_00105:
1493  03D2  C9          	ret
1494  03D3              	SECTION code_compiler
1495  03D3              ;	---------------------------------
1496  03D3              ; Function spr_page_left
1497  03D3              ; ---------------------------------
1498  03D3              _spr_page_left:
1499  03D3  2A FF FF    	ld	hl,(_map_width - 1)
1500  03D6  3A 00 00    	ld	a,(_scr_curr)
1501  03D9  6F          	ld	l,a
1502  03DA  E5          	push	hl
1503  03DB  CD 00 00    	call	__moduchar_callee
1504  03DE  7D          	ld	a,l
1505  03DF  32 00 00    	ld	(_tmp1),a
1506  03E2  B7          	or	a, a
1507  03E3  28 1A       	jr	Z,l_spr_page_left_00102
1508  03E5  3A 00 00    	ld	a,(_game_boss)
1509  03E8  B7          	or	a, a
1510  03E9  28 06       	jr	Z,l_spr_page_left_00101
1511  03EB  3A 00 00    	ld	a,(_game_god_mode)
1512  03EE  B7          	or	a, a
1513  03EF  28 0E       	jr	Z,l_spr_page_left_00102
1514  03F1              l_spr_page_left_00101:
1515  03F1  21 00 00    	ld	hl,_scr_curr
1516  03F4  35          	dec	(hl)
1517  03F5  CD FF 04    	call	_spr_page_map
1518  03F8  CD 00 00    	call	_game_draw_screen
1519  03FB  2E 01       	ld	l,0x01
1520  03FD  18 02       	jr	l_spr_page_left_00105
1521  03FF              l_spr_page_left_00102:
1522  03FF  2E 00       	ld	l,0x00
1523  0401              l_spr_page_left_00105:
1524  0401  C9          	ret
1525  0402              	SECTION code_compiler
1526  0402              ;	---------------------------------
1527  0402              ; Function spr_page_down
1528  0402              ; ---------------------------------
1529  0402              _spr_page_down:
1530  0402  2A FF FF    	ld	hl,(_map_heigth - 1)
1531  0405  3A 00 00    	ld	a,(_scr_curr)
1532  0408  6F          	ld	l,a
1533  0409  E5          	push	hl
1534  040A  CD 00 00    	call	__divuchar_callee
1535  040D  7D          	ld	a, l
1536  040E  3C          	inc	a
1537  040F  32 00 00    	ld	(_tmp1),a
1538  0412  21 00 00    	ld	hl,_map_heigth
1539  0415  96          	sub	a, (hl)
1540  0416  30 36       	jr	NC,l_spr_page_down_00102
1541  0418  3A 00 00    	ld	a,(_game_boss)
1542  041B  B7          	or	a, a
1543  041C  28 06       	jr	Z,l_spr_page_down_00101
1544  041E  3A 00 00    	ld	a,(_game_god_mode)
1545  0421  B7          	or	a, a
1546  0422  28 2A       	jr	Z,l_spr_page_down_00102
1547  0424              l_spr_page_down_00101:
1548  0424  3A 00 00    	ld	a,(_scr_curr)
1549  0427  21 00 00    	ld	hl,_map_width
1550  042A  86          	add	a, (hl)
1551  042B  32 00 00    	ld	(_scr_curr),a
1552  042E  CD FF 04    	call	_spr_page_map
1553  0431  CD 00 00    	call	_game_draw_screen
1554  0434  21 00 00    	ld	hl,_player_lin_scr
1555  0437  36 08       	ld	(hl),0x08
1556  0439  2A 00 00    	ld	hl,(_sprite)
1557  043C  26 00       	ld	h,0x00
1558  043E  01 00 00    	ld	bc,_lin
1559  0441  09          	add	hl,bc
1560  0442  36 08       	ld	(hl),0x08
1561  0444  3A 07 00    	ld	a,(_col + 0x0007)
1562  0447  32 00 00    	ld	(_player_col_scr),a
1563  044A  2E 01       	ld	l,0x01
1564  044C  18 02       	jr	l_spr_page_down_00105
1565  044E              l_spr_page_down_00102:
1566  044E  2E 00       	ld	l,0x00
1567  0450              l_spr_page_down_00105:
1568  0450  C9          	ret
1569  0451              	SECTION code_compiler
1570  0451              ;	---------------------------------
1571  0451              ; Function spr_page_up
1572  0451              ; ---------------------------------
1573  0451              _spr_page_up:
1574  0451  2A FF FF    	ld	hl,(_map_width - 1)
1575  0454  3A 00 00    	ld	a,(_scr_curr)
1576  0457  6F          	ld	l,a
1577  0458  E5          	push	hl
1578  0459  CD 00 00    	call	__divuchar_callee
1579  045C  7D          	ld	a,l
1580  045D  32 00 00    	ld	(_tmp1),a
1581  0460  B7          	or	a, a
1582  0461  28 36       	jr	Z,l_spr_page_up_00102
1583  0463  3A 00 00    	ld	a,(_game_boss)
1584  0466  B7          	or	a, a
1585  0467  28 06       	jr	Z,l_spr_page_up_00101
1586  0469  3A 00 00    	ld	a,(_game_god_mode)
1587  046C  B7          	or	a, a
1588  046D  28 2A       	jr	Z,l_spr_page_up_00102
1589  046F              l_spr_page_up_00101:
1590  046F  3A 00 00    	ld	a,(_scr_curr)
1591  0472  21 00 00    	ld	hl,_map_width
1592  0475  96          	sub	a, (hl)
1593  0476  32 00 00    	ld	(_scr_curr),a
1594  0479  CD FF 04    	call	_spr_page_map
1595  047C  CD 00 00    	call	_game_draw_screen
1596  047F  2A 00 00    	ld	hl,(_sprite)
1597  0482  26 00       	ld	h,0x00
1598  0484  01 00 00    	ld	bc,_lin
1599  0487  09          	add	hl,bc
1600  0488  36 8C       	ld	(hl),0x8c
1601  048A  21 00 00    	ld	hl,_player_lin_scr
1602  048D  36 8C       	ld	(hl),0x8c
1603  048F  3A 07 00    	ld	a,(_col + 0x0007)
1604  0492  32 00 00    	ld	(_player_col_scr),a
1605  0495  2E 01       	ld	l,0x01
1606  0497  18 02       	jr	l_spr_page_up_00105
1607  0499              l_spr_page_up_00102:
1608  0499  2E 00       	ld	l,0x00
1609  049B              l_spr_page_up_00105:
1610  049B  C9          	ret
1611  049C              	SECTION code_compiler
1612  049C              ;	---------------------------------
1613  049C              ; Function spr_clear_scr
1614  049C              ; ---------------------------------
1615  049C              _spr_clear_scr:
1616  049C  06 00       	ld	b,0x00
1617  049E              l_spr_clear_scr_00105:
1618  049E  C5          	push	bc
1619  049F  21 00 00    	ld	hl,0x0000
1620  04A2  E5          	push	hl
1621  04A3  AF          	xor	a, a
1622  04A4  48          	ld	c,b
1623  04A5  47          	ld	b,a
1624  04A6  C5          	push	bc
1625  04A7  CD 00 00    	call	_NIRVANAP_spriteT_callee
1626  04AA  C1          	pop	bc
1627  04AB  04          	inc	b
1628  04AC  78          	ld	a, b
1629  04AD  D6 08       	sub	a,0x08
1630  04AF  38 ED       	jr	C,l_spr_clear_scr_00105
1631  04B1  76          	halt
1632  04B2  F3          	di
1633  04B3  0E 00       	ld	c,0x00
1634  04B5              l_spr_clear_scr_00117:
1635  04B5  79          	ld	a, c
1636  04B6  87          	add	a, a
1637  04B7  47          	ld	b, a
1638  04B8  50          	ld	d, b
1639  04B9  1E 01       	ld	e,0x01
1640  04BB              l_spr_clear_scr_00107:
1641  04BB  7B          	ld	a, e
1642  04BC  07          	rlca
1643  04BD  07          	rlca
1644  04BE  07          	rlca
1645  04BF  07          	rlca
1646  04C0  E6 F0       	and	a,0xf0
1647  04C2  C5          	push	bc
1648  04C3  D5          	push	de
1649  04C4  5F          	ld	e,a
1650  04C5  D5          	push	de
1651  04C6  AF          	xor	a, a
1652  04C7  F5          	push	af
1653  04C8  33          	inc	sp
1654  04C9  CD 00 00    	call	_NIRVANAP_fillT_raw_callee
1655  04CC  D1          	pop	de
1656  04CD  C1          	pop	bc
1657  04CE  1C          	inc	e
1658  04CF  7B          	ld	a, e
1659  04D0  D6 0A       	sub	a,0x0a
1660  04D2  38 E7       	jr	C,l_spr_clear_scr_00107
1661  04D4  3E 1E       	ld	a,0x1e
1662  04D6  90          	sub	a, b
1663  04D7  47          	ld	b, a
1664  04D8  1E 01       	ld	e,0x01
1665  04DA              l_spr_clear_scr_00109:
1666  04DA  7B          	ld	a, e
1667  04DB  07          	rlca
1668  04DC  07          	rlca
1669  04DD  07          	rlca
1670  04DE  07          	rlca
1671  04DF  E6 F0       	and	a,0xf0
1672  04E1  57          	ld	d, a
1673  04E2  C5          	push	bc
1674  04E3  D5          	push	de
1675  04E4  4A          	ld	c, d
1676  04E5  C5          	push	bc
1677  04E6  AF          	xor	a, a
1678  04E7  F5          	push	af
1679  04E8  33          	inc	sp
1680  04E9  CD 00 00    	call	_NIRVANAP_fillT_raw_callee
1681  04EC  D1          	pop	de
1682  04ED  C1          	pop	bc
1683  04EE  1C          	inc	e
1684  04EF  7B          	ld	a, e
1685  04F0  D6 0A       	sub	a,0x0a
1686  04F2  38 E6       	jr	C,l_spr_clear_scr_00109
1687  04F4  FB          	ei
1688  04F5  76          	halt
1689  04F6  F3          	di
1690  04F7  0C          	inc	c
1691  04F8  79          	ld	a, c
1692  04F9  D6 08       	sub	a,0x08
1693  04FB  38 B8       	jr	C,l_spr_clear_scr_00117
1694  04FD  FB          	ei
1695  04FE  C9          	ret
1696  04FF              	SECTION code_compiler
1697  04FF              ;	---------------------------------
1698  04FF              ; Function spr_page_map
1699  04FF              ; ---------------------------------
1700  04FF              _spr_page_map:
1701  04FF  CD 00 00    	call	___sdcc_enter_ix
1702  0502  21 F1 FF    	ld	hl, -15
1703  0505  39          	add	hl, sp
1704  0506  F9          	ld	sp, hl
1705  0507  21 00 00    	ld	hl,_game_world
1706  050A  4E          	ld	c, (hl)
1707  050B  21 00 00    	ld	hl,_scr_curr
1708  050E  46          	ld	b, (hl)
1709  050F  DD 36 F3 10 	ld	(ix-13),0x10
1710  0513  C5          	push	bc
1711  0514  CD 9C 04    	call	_spr_clear_scr
1712  0517  C1          	pop	bc
1713  0518  F3          	di
1714  0519  21 00 00    	ld	hl,_GLOBAL_ZX_PORT_7FFD
1715  051C  36 16       	ld	(hl),0x16
1716  051E  C5          	push	bc
1717  051F  3E 16       	ld	a,0x16
1718  0521  01 FD 7F    	ld	bc,_IO_7FFD
1719  0524  ED 79       	out	(c),a
1720  0526  C1          	pop	bc
1721  0527  78          	ld	a, b
1722  0528  3C          	inc	a
1723  0529  20 04       	jr	NZ,l_spr_page_map_00207
1724  052B  3E 01       	ld	a,0x01
1725  052D  18 01       	jr	l_spr_page_map_00208
1726  052F              l_spr_page_map_00207:
1727  052F  AF          	xor	a,a
1728  0530              l_spr_page_map_00208:
1729  0530  5F          	ld	e, a
1730  0531  79          	ld	a, c
1731  0532  B7          	or	a,a
1732  0533  20 22       	jr	NZ,l_spr_page_map_00106
1733  0535  B3          	or	a,e
1734  0536  28 04       	jr	Z,l_spr_page_map_00102
1735  0538  21 00 00    	ld	hl,_start_scr0
1736  053B  46          	ld	b, (hl)
1737  053C              l_spr_page_map_00102:
1738  053C  11 00 00    	ld	de,_paper0+0
1739  053F  68          	ld	l,b
1740  0540  26 00       	ld	h,0x00
1741  0542  19          	add	hl, de
1742  0543  7E          	ld	a, (hl)
1743  0544  DD 77 F9    	ld	(ix-7),a
1744  0547  21 00 00    	ld	hl,_world0_w
1745  054A  5E          	ld	e, (hl)
1746  054B  DD 73 FF    	ld	(ix-1),e
1747  054E  21 00 00    	ld	hl,_world0_h
1748  0551  5E          	ld	e, (hl)
1749  0552  DD 73 FE    	ld	(ix-2),e
1750  0555  18 21       	jr	l_spr_page_map_00107
1751  0557              l_spr_page_map_00106:
1752  0557  7B          	ld	a, e
1753  0558  B7          	or	a, a
1754  0559  28 04       	jr	Z,l_spr_page_map_00104
1755  055B  21 00 00    	ld	hl,_start_scr1
1756  055E  46          	ld	b, (hl)
1757  055F              l_spr_page_map_00104:
1758  055F  11 00 00    	ld	de,_paper1+0
1759  0562  68          	ld	l,b
1760  0563  26 00       	ld	h,0x00
1761  0565  19          	add	hl, de
1762  0566  7E          	ld	a, (hl)
1763  0567  DD 77 F9    	ld	(ix-7),a
1764  056A  21 00 00    	ld	hl,_world1_w
1765  056D  5E          	ld	e, (hl)
1766  056E  DD 73 FF    	ld	(ix-1),e
1767  0571  21 00 00    	ld	hl,_world1_h
1768  0574  5E          	ld	e, (hl)
1769  0575  DD 73 FE    	ld	(ix-2),e
1770  0578              l_spr_page_map_00107:
1771  0578  21 00 00    	ld	hl,_GLOBAL_ZX_PORT_7FFD
1772  057B  36 10       	ld	(hl),0x10
1773  057D  C5          	push	bc
1774  057E  3E 10       	ld	a,0x10
1775  0580  01 FD 7F    	ld	bc,_IO_7FFD
1776  0583  ED 79       	out	(c),a
1777  0585  C1          	pop	bc
1778  0586  21 00 00    	ld	hl,0x0000
1779  0589  E3          	ex	(sp), hl
1780  058A  DD 36 F4 00 	ld	(ix-12),0x00
1781  058E              l_spr_page_map_00111:
1782  058E  DD 7E F4    	ld	a,(ix-12)
1783  0591  90          	sub	a, b
1784  0592  30 51       	jr	NC,l_spr_page_map_00113
1785  0594  21 00 00    	ld	hl,_GLOBAL_ZX_PORT_7FFD
1786  0597  36 16       	ld	(hl),0x16
1787  0599  C5          	push	bc
1788  059A  3E 16       	ld	a,0x16
1789  059C  01 FD 7F    	ld	bc,_IO_7FFD
1790  059F  ED 79       	out	(c),a
1791  05A1  C1          	pop	bc
1792  05A2  79          	ld	a, c
1793  05A3  B7          	or	a, a
1794  05A4  20 10       	jr	NZ,l_spr_page_map_00109
1795  05A6  3E 00       	ld	a, +((_lenght0) & 0xFF)
1796  05A8  DD 86 F4    	add	a,(ix-12)
1797  05AB  6F          	ld	l, a
1798  05AC  3E 00       	ld	a, +((_lenght0) / 256)
1799  05AE  CE 00       	adc	a,0x00
1800  05B0  67          	ld	h, a
1801  05B1  5E          	ld	e, (hl)
1802  05B2  16 00       	ld	d,0x00
1803  05B4  18 0E       	jr	l_spr_page_map_00110
1804  05B6              l_spr_page_map_00109:
1805  05B6  3E 00       	ld	a, +((_lenght1) & 0xFF)
1806  05B8  DD 86 F4    	add	a,(ix-12)
1807  05BB  6F          	ld	l, a
1808  05BC  3E 00       	ld	a, +((_lenght1) / 256)
1809  05BE  CE 00       	adc	a,0x00
1810  05C0  67          	ld	h, a
1811  05C1  5E          	ld	e, (hl)
1812  05C2  16 00       	ld	d,0x00
1813  05C4              l_spr_page_map_00110:
1814  05C4  21 00 00    	ld	hl,_GLOBAL_ZX_PORT_7FFD
1815  05C7  36 10       	ld	(hl),0x10
1816  05C9  C5          	push	bc
1817  05CA  3E 10       	ld	a,0x10
1818  05CC  01 FD 7F    	ld	bc,_IO_7FFD
1819  05CF  ED 79       	out	(c),a
1820  05D1  C1          	pop	bc
1821  05D2  DD 7E F1    	ld	a,(ix-15)
1822  05D5  83          	add	a, e
1823  05D6  DD 77 F1    	ld	(ix-15),a
1824  05D9  DD 7E F2    	ld	a,(ix-14)
1825  05DC  8A          	adc	a, d
1826  05DD  DD 77 F2    	ld	(ix-14),a
1827  05E0  DD 34 F4    	inc	(ix-12)
1828  05E3  18 A9       	jr	l_spr_page_map_00111
1829  05E5              l_spr_page_map_00113:
1830  05E5  FB          	ei
1831  05E6  F3          	di
1832  05E7  DD 36 F5 00 	ld	(ix-11),0x00
1833  05EB              l_spr_page_map_00137:
1834  05EB  21 00 00    	ld	hl,_GLOBAL_ZX_PORT_7FFD
1835  05EE  36 16       	ld	(hl),0x16
1836  05F0  C5          	push	bc
1837  05F1  3E 16       	ld	a,0x16
1838  05F3  01 FD 7F    	ld	bc,_IO_7FFD
1839  05F6  ED 79       	out	(c),a
1840  05F8  C1          	pop	bc
1841  05F9  DD 5E F5    	ld	e,(ix-11)
1842  05FC  16 00       	ld	d,0x00
1843  05FE  DD 6E F1    	ld	l,(ix-15)
1844  0601  DD 66 F2    	ld	h,(ix-14)
1845  0604  19          	add	hl,de
1846  0605  EB          	ex	de,hl
1847  0606  21 01 00    	ld	hl,0x0001
1848  0609  19          	add	hl,de
1849  060A  DD 75 FC    	ld	(ix-4),l
1850  060D  DD 74 FD    	ld	(ix-3),h
1851  0610  79          	ld	a, c
1852  0611  B7          	or	a, a
1853  0612  20 18       	jr	NZ,l_spr_page_map_00115
1854  0614  21 00 00    	ld	hl,_world0
1855  0617  19          	add	hl, de
1856  0618  7E          	ld	a, (hl)
1857  0619  DD 77 F8    	ld	(ix-8),a
1858  061C  11 00 00    	ld	de,_world0
1859  061F  DD 6E FC    	ld	l,(ix-4)
1860  0622  DD 66 FD    	ld	h,(ix-3)
1861  0625  19          	add	hl,de
1862  0626  7E          	ld	a, (hl)
1863  0627  DD 77 F7    	ld	(ix-9),a
1864  062A  18 16       	jr	l_spr_page_map_00116
1865  062C              l_spr_page_map_00115:
1866  062C  21 00 00    	ld	hl,_world1
1867  062F  19          	add	hl, de
1868  0630  7E          	ld	a, (hl)
1869  0631  DD 77 F8    	ld	(ix-8),a
1870  0634  11 00 00    	ld	de,_world1
1871  0637  DD 6E FC    	ld	l,(ix-4)
1872  063A  DD 66 FD    	ld	h,(ix-3)
1873  063D  19          	add	hl,de
1874  063E  7E          	ld	a, (hl)
1875  063F  DD 77 F7    	ld	(ix-9),a
1876  0642              l_spr_page_map_00116:
1877  0642  21 00 00    	ld	hl,_GLOBAL_ZX_PORT_7FFD
1878  0645  36 10       	ld	(hl),0x10
1879  0647  C5          	push	bc
1880  0648  3E 10       	ld	a,0x10
1881  064A  01 FD 7F    	ld	bc,_IO_7FFD
1882  064D  ED 79       	out	(c),a
1883  064F  C1          	pop	bc
1884  0650  DD 7E F8    	ld	a,(ix-8)
1885  0653  D6 80       	sub	a,0x80
1886  0655  30 4F       	jr	NC,l_spr_page_map_00127
1887  0657  DD 7E F3    	ld	a,(ix-13)
1888  065A  DD 77 FC    	ld	(ix-4),a
1889  065D  DD 36 FD 00 	ld	(ix-3),0x00
1890  0661  C5          	push	bc
1891  0662  DD 6E FC    	ld	l,(ix-4)
1892  0665  DD 66 FD    	ld	h,(ix-3)
1893  0668  CD 00 00    	call	_game_obj_chk
1894  066B  C1          	pop	bc
1895  066C  5D          	ld	e,l
1896  066D  3E 00       	ld	a, +((_scr_map) & 0xFF)
1897  066F  DD 86 F3    	add	a,(ix-13)
1898  0672  DD 77 FA    	ld	(ix-6),a
1899  0675  3E 00       	ld	a, +((_scr_map) / 256)
1900  0677  CE 00       	adc	a,0x00
1901  0679  DD 77 FB    	ld	(ix-5),a
1902  067C  7B          	ld	a, e
1903  067D  B7          	or	a, a
1904  067E  20 0C       	jr	NZ,l_spr_page_map_00118
1905  0680  DD 6E FA    	ld	l,(ix-6)
1906  0683  DD 66 FB    	ld	h,(ix-5)
1907  0686  DD 7E F8    	ld	a,(ix-8)
1908  0689  77          	ld	(hl), a
1909  068A  18 15       	jr	l_spr_page_map_00119
1910  068C              l_spr_page_map_00118:
1911  068C  C5          	push	bc
1912  068D  DD 6E FC    	ld	l,(ix-4)
1913  0690  DD 66 FD    	ld	h,(ix-3)
1914  0693  E5          	push	hl
1915  0694  CD 00 00    	call	_game_match_back
1916  0697  F1          	pop	af
1917  0698  C1          	pop	bc
1918  0699  5D          	ld	e,l
1919  069A  DD 6E FA    	ld	l,(ix-6)
1920  069D  DD 66 FB    	ld	h,(ix-5)
1921  06A0  73          	ld	(hl), e
1922  06A1              l_spr_page_map_00119:
1923  06A1  DD 34 F3    	inc	(ix-13)
1924  06A4  18 6D       	jr	l_spr_page_map_00128
1925  06A6              l_spr_page_map_00127:
1926  06A6  DD 7E F8    	ld	a,(ix-8)
1927  06A9  C6 80       	add	a,0x80
1928  06AB  DD 77 F6    	ld	(ix-10),a
1929  06AE  DD 5E F3    	ld	e,(ix-13)
1930  06B1  16 00       	ld	d,0x00
1931  06B3              l_spr_page_map_00135:
1932  06B3  7A          	ld	a, d
1933  06B4  DD 96 F6    	sub	a,(ix-10)
1934  06B7  30 54       	jr	NC,l_spr_page_map_00158
1935  06B9  DD 73 FA    	ld	(ix-6),e
1936  06BC  DD 36 FB 00 	ld	(ix-5),0x00
1937  06C0  C5          	push	bc
1938  06C1  D5          	push	de
1939  06C2  DD 6E FA    	ld	l,(ix-6)
1940  06C5  DD 66 FB    	ld	h,(ix-5)
1941  06C8  CD 00 00    	call	_game_obj_chk
1942  06CB  D1          	pop	de
1943  06CC  C1          	pop	bc
1944  06CD  7D          	ld	a,l
1945  06CE  B7          	or	a, a
1946  06CF  20 0F       	jr	NZ,l_spr_page_map_00121
1947  06D1  3E 00       	ld	a, +((_scr_map) & 0xFF)
1948  06D3  83          	add	a, e
1949  06D4  6F          	ld	l, a
1950  06D5  3E 00       	ld	a, +((_scr_map) / 256)
1951  06D7  CE 00       	adc	a,0x00
1952  06D9  67          	ld	h, a
1953  06DA  DD 7E F7    	ld	a,(ix-9)
1954  06DD  77          	ld	(hl), a
1955  06DE  18 24       	jr	l_spr_page_map_00122
1956  06E0              l_spr_page_map_00121:
1957  06E0  3E 00       	ld	a, +((_scr_map) & 0xFF)
1958  06E2  83          	add	a, e
1959  06E3  DD 77 FC    	ld	(ix-4),a
1960  06E6  3E 00       	ld	a, +((_scr_map) / 256)
1961  06E8  CE 00       	adc	a,0x00
1962  06EA  DD 77 FD    	ld	(ix-3),a
1963  06ED  C5          	push	bc
1964  06EE  D5          	push	de
1965  06EF  DD 6E FA    	ld	l,(ix-6)
1966  06F2  DD 66 FB    	ld	h,(ix-5)
1967  06F5  E5          	push	hl
1968  06F6  CD 00 00    	call	_game_match_back
1969  06F9  F1          	pop	af
1970  06FA  D1          	pop	de
1971  06FB  C1          	pop	bc
1972  06FC  7D          	ld	a,l
1973  06FD  DD 6E FC    	ld	l,(ix-4)
1974  0700  DD 66 FD    	ld	h,(ix-3)
1975  0703  77          	ld	(hl), a
1976  0704              l_spr_page_map_00122:
1977  0704  1C          	inc	e
1978  0705  7B          	ld	a, e
1979  0706  D6 A0       	sub	a,0xa0
1980  0708  30 03       	jr	NC,l_spr_page_map_00158
1981  070A  14          	inc	d
1982  070B  18 A6       	jr	l_spr_page_map_00135
1983  070D              l_spr_page_map_00158:
1984  070D  DD 73 F3    	ld	(ix-13),e
1985  0710  DD 34 F5    	inc	(ix-11)
1986  0713              l_spr_page_map_00128:
1987  0713  DD 7E F3    	ld	a,(ix-13)
1988  0716  D6 A0       	sub	a,0xa0
1989  0718  30 0B       	jr	NC,l_spr_page_map_00131
1990  071A  DD 34 F5    	inc	(ix-11)
1991  071D  DD 7E F5    	ld	a,(ix-11)
1992  0720  D6 A0       	sub	a,0xa0
1993  0722  DA EB 05    	jp	C, l_spr_page_map_00137
1994  0725              l_spr_page_map_00131:
1995  0725  21 00 00    	ld	hl,_scr_curr
1996  0728  70          	ld	(hl), b
1997  0729  DD 7E FF    	ld	a,(ix-1)
1998  072C  32 00 00    	ld	(_map_width),a
1999  072F  DD 7E FE    	ld	a,(ix-2)
2000  0732  32 00 00    	ld	(_map_heigth),a
2001  0735  DD 7E F9    	ld	a,(ix-7)
2002  0738  32 00 00    	ld	(_map_paper),a
2003  073B  CD 3A 0C    	call	_spr_init_anim_bullets
2004  073E  3A 00 00    	ld	a,(_map_paper_last)
2005  0741  21 00 00    	ld	hl,_map_paper
2006  0744  96          	sub	a, (hl)
2007  0745  28 03       	jr	Z,l_spr_page_map_00133
2008  0747  CD AF 14    	call	_spr_btile_paint_back
2009  074A              l_spr_page_map_00133:
2010  074A  3A 00 00    	ld	a,(_map_paper)
2011  074D  32 00 00    	ld	(_map_paper_last),a
2012  0750  FB          	ei
2013  0751  CD 00 00    	call	_NIRVANAP_start
2014  0754  21 00 00    	ld	hl,_screen_ink
2015  0757  36 06       	ld	(hl),0x06
2016  0759  21 00 00    	ld	hl,___str_0
2017  075C  E5          	push	hl
2018  075D  21 17 0C    	ld	hl,0x0c17
2019  0760  E5          	push	hl
2020  0761  CD 00 00    	call	_zx_print_str
2021  0764  3A 00 00    	ld	a,(_scr_curr)
2022  0767  F5          	push	af
2023  0768  33          	inc	sp
2024  0769  21 17 10    	ld	hl,0x1017
2025  076C  E5          	push	hl
2026  076D  CD 00 00    	call	_zx_print_chr
2027  0770  DD F9       	ld	sp, ix
2028  0772  DD E1       	pop	ix
2029  0774  C9          	ret
2030  0775              	SECTION rodata_compiler
2031  0000              ___str_0:
2032  0000  53 43 52 3A 	DEFM "SCR:"
2033  0004  00          	DEFB 0x00
2034  0005              	SECTION code_compiler
2035  0775              ;	---------------------------------
2036  0775              ; Function spr_redraw
2037  0775              ; ---------------------------------
2038  0775              _spr_redraw:
2039  0775  2A 00 00    	ld	hl,(_sprite)
2040  0778  26 00       	ld	h,0x00
2041  077A  01 00 00    	ld	bc,_tile
2042  077D  09          	add	hl,bc
2043  077E  4E          	ld	c, (hl)
2044  077F  3A 00 00    	ld	a,(_sprite)
2045  0782  5F          	ld	e,a
2046  0783  16 00       	ld	d,0x00
2047  0785  21 00 00    	ld	hl,_colint
2048  0788  19          	add	hl,de
2049  0789  7E          	ld	a,(hl)
2050  078A  81          	add	a,c
2051  078B  32 00 00    	ld	(_s_tile1),a
2052  078E  2A 00 00    	ld	hl,(_sprite)
2053  0791  26 00       	ld	h,0x00
2054  0793  01 00 00    	ld	bc,_col
2055  0796  09          	add	hl,bc
2056  0797  7E          	ld	a,(hl)
2057  0798  32 00 00    	ld	(_s_col1),a
2058  079B  2A 00 00    	ld	hl,(_sprite)
2059  079E  26 00       	ld	h,0x00
2060  07A0  01 00 00    	ld	bc,_lin
2061  07A3  09          	add	hl,bc
2062  07A4  7E          	ld	a,(hl)
2063  07A5  4D          	ld	c,l
2064  07A6  32 00 00    	ld	(_s_lin1),a
2065  07A9  21 00 00    	ld	hl,_s_lin0
2066  07AC  96          	sub	a, (hl)
2067  07AD  20 0A       	jr	NZ,l_spr_redraw_00117
2068  07AF  3A 00 00    	ld	a,(_s_col1)
2069  07B2  21 00 00    	ld	hl,_s_col0
2070  07B5  96          	sub	a, (hl)
2071  07B6  CA 6C 08    	jp	Z,l_spr_redraw_00118
2072  07B9              l_spr_redraw_00117:
2073  07B9  3A 00 00    	ld	a,(_sprite)
2074  07BC  D6 07       	sub	a,0x07
2075  07BE  20 3A       	jr	NZ,l_spr_redraw_00113
2076  07C0  3A 00 00    	ld	a,(_player_onstair)
2077  07C3  B7          	or	a, a
2078  07C4  28 2F       	jr	Z,l_spr_redraw_00104
2079  07C6  3A 07 00    	ld	a, (_lin + 7)
2080  07C9  E6 03       	and	a,0x03
2081  07CB  20 28       	jr	NZ,l_spr_redraw_00104
2082  07CD  21 00 00    	ld	hl,_player_anim_stair
2083  07D0  34          	inc	(hl)
2084  07D1  20 02       	jr	NZ,l_spr_redraw_00162
2085  07D3  23          	inc	hl
2086  07D4  34          	inc	(hl)
2087  07D5              l_spr_redraw_00162:
2088  07D5  3E 01       	ld	a,0x01
2089  07D7  21 00 00    	ld	hl,_player_anim_stair
2090  07DA  BE          	cp	a, (hl)
2091  07DB  3E 00       	ld	a,0x00
2092  07DD  23          	inc	hl
2093  07DE  9E          	sbc	a, (hl)
2094  07DF  30 05       	jr	NC,l_spr_redraw_00102
2095  07E1  2B          	dec	hl
2096  07E2  AF          	xor	a, a
2097  07E3  77          	ld	(hl), a
2098  07E4  23          	inc	hl
2099  07E5  77          	ld	(hl), a
2100  07E6              l_spr_redraw_00102:
2101  07E6  21 07 00    	ld	hl,_tile + 7
2102  07E9  4E          	ld	c, (hl)
2103  07EA  21 00 00    	ld	hl,_player_anim_stair
2104  07ED  46          	ld	b, (hl)
2105  07EE  79          	ld	a, c
2106  07EF  80          	add	a, b
2107  07F0  C6 04       	add	a,0x04
2108  07F2  32 00 00    	ld	(_s_tile1),a
2109  07F5              l_spr_redraw_00104:
2110  07F5  CD B1 0A    	call	_spr_back_repaint
2111  07F8  18 5B       	jr	l_spr_redraw_00114
2112  07FA              l_spr_redraw_00113:
2113  07FA  3A 00 00    	ld	a,(_s_lin1)
2114  07FD  E6 07       	and	a,0x07
2115  07FF  20 05       	jr	NZ,l_spr_redraw_00110
2116  0801  CD B1 0A    	call	_spr_back_repaint
2117  0804  18 4F       	jr	l_spr_redraw_00114
2118  0806              l_spr_redraw_00110:
2119  0806  21 00 00    	ld	hl,_s_state
2120  0809  CB 46       	bit	0, (hl)
2121  080B  28 26       	jr	Z,l_spr_redraw_00107
2122  080D  3A 00 00    	ld	a,(_s_lin0)
2123  0810  C6 08       	add	a,0x08
2124  0812  47          	ld	b, a
2125  0813  3A 00 00    	ld	a,(_s_col0)
2126  0816  F5          	push	af
2127  0817  33          	inc	sp
2128  0818  C5          	push	bc
2129  0819  33          	inc	sp
2130  081A  3A 00 00    	ld	a,(_map_paper_clr)
2131  081D  F5          	push	af
2132  081E  33          	inc	sp
2133  081F  CD 00 00    	call	_NIRVANAP_fillC_callee
2134  0822  21 00 00    	ld	hl,_s_col0
2135  0825  56          	ld	d, (hl)
2136  0826  14          	inc	d
2137  0827  58          	ld	e,b
2138  0828  3A 00 00    	ld	a,(_map_paper_clr)
2139  082B  D5          	push	de
2140  082C  F5          	push	af
2141  082D  33          	inc	sp
2142  082E  CD 00 00    	call	_NIRVANAP_fillC_callee
2143  0831  18 22       	jr	l_spr_redraw_00114
2144  0833              l_spr_redraw_00107:
2145  0833  2A FF FF    	ld	hl,(_s_col0 - 1)
2146  0836  3A 00 00    	ld	a,(_s_lin0)
2147  0839  6F          	ld	l,a
2148  083A  3A 00 00    	ld	a,(_map_paper_clr)
2149  083D  E5          	push	hl
2150  083E  F5          	push	af
2151  083F  33          	inc	sp
2152  0840  CD 00 00    	call	_NIRVANAP_fillC_callee
2153  0843  21 00 00    	ld	hl,_s_col0
2154  0846  46          	ld	b, (hl)
2155  0847  04          	inc	b
2156  0848  C5          	push	bc
2157  0849  33          	inc	sp
2158  084A  2A FF FF    	ld	hl,(_s_lin0 - 1)
2159  084D  3A 00 00    	ld	a,(_map_paper_clr)
2160  0850  6F          	ld	l,a
2161  0851  E5          	push	hl
2162  0852  CD 00 00    	call	_NIRVANAP_fillC_callee
2163  0855              l_spr_redraw_00114:
2164  0855  2A FF FF    	ld	hl,(_s_col1 - 1)
2165  0858  3A 00 00    	ld	a,(_s_lin1)
2166  085B  6F          	ld	l,a
2167  085C  E5          	push	hl
2168  085D  2A FF FF    	ld	hl,(_s_tile1 - 1)
2169  0860  3A 00 00    	ld	a,(_sprite)
2170  0863  6F          	ld	l,a
2171  0864  E5          	push	hl
2172  0865  CD 00 00    	call	_NIRVANAP_spriteT_callee
2173  0868  2E 01       	ld	l,0x01
2174  086A  18 22       	jr	l_spr_redraw_00121
2175  086C              l_spr_redraw_00118:
2176  086C  3A 00 00    	ld	a,(_s_tile1)
2177  086F  21 00 00    	ld	hl,_s_tile0
2178  0872  96          	sub	a, (hl)
2179  0873  28 17       	jr	Z,l_spr_redraw_00119
2180  0875  2A FF FF    	ld	hl,(_s_col1 - 1)
2181  0878  3A 00 00    	ld	a,(_s_lin1)
2182  087B  6F          	ld	l,a
2183  087C  E5          	push	hl
2184  087D  2A FF FF    	ld	hl,(_s_tile1 - 1)
2185  0880  3A 00 00    	ld	a,(_sprite)
2186  0883  6F          	ld	l,a
2187  0884  E5          	push	hl
2188  0885  CD 00 00    	call	_NIRVANAP_spriteT_callee
2189  0888  2E 00       	ld	l,0x00
2190  088A  18 02       	jr	l_spr_redraw_00121
2191  088C              l_spr_redraw_00119:
2192  088C  2E 00       	ld	l,0x00
2193  088E              l_spr_redraw_00121:
2194  088E  C9          	ret
2195  088F              	SECTION code_compiler
2196  088F              ;	---------------------------------
2197  088F              ; Function spr_destroy
2198  088F              ; ---------------------------------
2199  088F              _spr_destroy:
2200  088F  CD 00 00    	call	___sdcc_enter_ix
2201  0892  F5          	push	af
2202  0893  F5          	push	af
2203  0894  45          	ld	b, l
2204  0895  21 00 00    	ld	hl,_spr_count
2205  0898  35          	dec	(hl)
2206  0899  3E 00       	ld	a, +((_lin) & 0xFF)
2207  089B  80          	add	a, b
2208  089C  DD 77 FC    	ld	(ix-4),a
2209  089F  3E 00       	ld	a, +((_lin) / 256)
2210  08A1  CE 00       	adc	a,0x00
2211  08A3  DD 77 FD    	ld	(ix-3),a
2212  08A6  E1          	pop	hl
2213  08A7  7E          	ld	a,(hl)
2214  08A8  E5          	push	hl
2215  08A9  32 00 00    	ld	(_s_lin0),a
2216  08AC  3E 00       	ld	a, +((_col) & 0xFF)
2217  08AE  80          	add	a, b
2218  08AF  DD 77 FE    	ld	(ix-2),a
2219  08B2  6F          	ld	l,a
2220  08B3  3E 00       	ld	a,+((_col) / 256)
2221  08B5  CE 00       	adc	a,0x00
2222  08B7  DD 77 FF    	ld	(ix-1),a
2223  08BA  67          	ld	h,a
2224  08BB  7E          	ld	a, (hl)
2225  08BC  32 00 00    	ld	(_s_col0),a
2226  08BF  C5          	push	bc
2227  08C0  F5          	push	af
2228  08C1  33          	inc	sp
2229  08C2  3A 00 00    	ld	a,(_s_lin0)
2230  08C5  F5          	push	af
2231  08C6  33          	inc	sp
2232  08C7  CD 00 00    	call	_spr_calc_index
2233  08CA  F1          	pop	af
2234  08CB  EB          	ex	de,hl
2235  08CC  C1          	pop	bc
2236  08CD  EB          	ex	de,hl
2237  08CE  22 00 00    	ld	(_index0),hl
2238  08D1  C5          	push	bc
2239  08D2  E5          	push	hl
2240  08D3  CD 00 00    	call	_game_match_back
2241  08D6  F1          	pop	af
2242  08D7  C1          	pop	bc
2243  08D8  7D          	ld	a,l
2244  08D9  32 00 00    	ld	(_s_tile0),a
2245  08DC  C5          	push	bc
2246  08DD  21 00 00    	ld	hl,0x0000
2247  08E0  E5          	push	hl
2248  08E1  48          	ld	c,b
2249  08E2  47          	ld	b,a
2250  08E3  C5          	push	bc
2251  08E4  CD 00 00    	call	_NIRVANAP_spriteT_callee
2252  08E7  CD B1 0A    	call	_spr_back_repaint
2253  08EA  C1          	pop	bc
2254  08EB  3E 00       	ld	a, +((_tile) & 0xFF)
2255  08ED  80          	add	a, b
2256  08EE  5F          	ld	e, a
2257  08EF  3E 00       	ld	a, +((_tile) / 256)
2258  08F1  CE 00       	adc	a,0x00
2259  08F3  57          	ld	d, a
2260  08F4  3A 00 00    	ld	a,(_s_tile0)
2261  08F7  12          	ld	(de), a
2262  08F8  DD 6E FE    	ld	l,(ix-2)
2263  08FB  DD 66 FF    	ld	h,(ix-1)
2264  08FE  36 00       	ld	(hl),0x00
2265  0900  E1          	pop	hl
2266  0901  E5          	push	hl
2267  0902  36 00       	ld	(hl),0x00
2268  0904  11 00 00    	ld	de,_class+0
2269  0907  68          	ld	l,b
2270  0908  26 00       	ld	h,0x00
2271  090A  19          	add	hl, de
2272  090B  36 00       	ld	(hl),0x00
2273  090D  11 00 00    	ld	de,_state+0
2274  0910  68          	ld	l,b
2275  0911  26 00       	ld	h,0x00
2276  0913  19          	add	hl, de
2277  0914  36 00       	ld	(hl),0x00
2278  0916  11 00 00    	ld	de,_state_a+0
2279  0919  68          	ld	l,b
2280  091A  26 00       	ld	h,0x00
2281  091C  19          	add	hl, de
2282  091D  36 00       	ld	(hl),0x00
2283  091F  DD F9       	ld	sp, ix
2284  0921  DD E1       	pop	ix
2285  0923  C9          	ret
2286  0924              	SECTION code_compiler
2287  0924              ;	---------------------------------
2288  0924              ; Function spr_tile
2289  0924              ; ---------------------------------
2290  0924              _spr_tile:
2291  0924  45          	ld	b, l
2292  0925  21 00 00    	ld	hl,_tmp0
2293  0928  36 00       	ld	(hl),0x00
2294  092A  11 00 00    	ld	de,_class+0
2295  092D  68          	ld	l,b
2296  092E  26 00       	ld	h,0x00
2297  0930  19          	add	hl, de
2298  0931  4E          	ld	c, (hl)
2299  0932              l_spr_tile_00103:
2300  0932  21 00 00    	ld	hl,_tmp0
2301  0935  7E          	ld	a, (hl)
2302  0936  D6 10       	sub	a,0x10
2303  0938  30 3E       	jr	NC,l_spr_tile_00105
2304  093A  7E          	ld	a, (hl)
2305  093B  5F          	ld	e, a
2306  093C  87          	add	a, a
2307  093D  83          	add	a, e
2308  093E  21 00 00    	ld	hl,_tmp1
2309  0941  77          	ld	(hl), a
2310  0942  C6 00       	add	a,+((_spr_map_tile) & 0xFF)
2311  0944  5F          	ld	e, a
2312  0945  3E 00       	ld	a, +((_spr_map_tile) / 256)
2313  0947  CE 00       	adc	a,0x00
2314  0949  57          	ld	d, a
2315  094A  1A          	ld	a, (de)
2316  094B  5F          	ld	e, a
2317  094C  79          	ld	a, c
2318  094D  93          	sub	a, e
2319  094E  20 22       	jr	NZ,l_spr_tile_00102
2320  0950  6E          	ld	l,(hl)
2321  0951  26 00       	ld	h,0x00
2322  0953  5D          	ld	e,l
2323  0954  54          	ld	d,h
2324  0955  23          	inc	hl
2325  0956  23          	inc	hl
2326  0957  3E 00       	ld	a, +((_spr_map_tile) & 0xFF)
2327  0959  85          	add	a, l
2328  095A  6F          	ld	l, a
2329  095B  3E 00       	ld	a, +((_spr_map_tile) / 256)
2330  095D  8C          	adc	a, h
2331  095E  67          	ld	h, a
2332  095F  4E          	ld	c, (hl)
2333  0960  13          	inc	de
2334  0961  21 00 00    	ld	hl,_spr_map_tile
2335  0964  19          	add	hl, de
2336  0965  56          	ld	d, (hl)
2337  0966  79          	ld	a, c
2338  0967  F5          	push	af
2339  0968  33          	inc	sp
2340  0969  4A          	ld	c, d
2341  096A  C5          	push	bc
2342  096B  CD 7B 09    	call	_spr_tile_dir
2343  096E  F1          	pop	af
2344  096F  33          	inc	sp
2345  0970  18 08       	jr	l_spr_tile_00106
2346  0972              l_spr_tile_00102:
2347  0972  21 00 00    	ld	hl,_tmp0
2348  0975  34          	inc	(hl)
2349  0976  18 BA       	jr	l_spr_tile_00103
2350  0978              l_spr_tile_00105:
2351  0978  2E 00       	ld	l,0x00
2352  097A              l_spr_tile_00106:
2353  097A  C9          	ret
2354  097B              	SECTION code_compiler
2355  097B              ;	---------------------------------
2356  097B              ; Function spr_tile_dir
2357  097B              ; ---------------------------------
2358  097B              _spr_tile_dir:
2359  097B  CD 00 00    	call	___sdcc_enter_ix
2360  097E  3E 00       	ld	a, +((_state) & 0xFF)
2361  0980  DD 86 05    	add	a,(ix+5)
2362  0983  4F          	ld	c, a
2363  0984  3E 00       	ld	a, +((_state) / 256)
2364  0986  CE 00       	adc	a,0x00
2365  0988  47          	ld	b, a
2366  0989  0A          	ld	a, (bc)
2367  098A  4F          	ld	c,a
2368  098B  CB 57       	bit	2,a
2369  098D  28 05       	jr	Z,l_spr_tile_dir_00102
2370  098F  DD 6E 04    	ld	l,(ix+4)
2371  0992  18 2D       	jr	l_spr_tile_dir_00109
2372  0994              l_spr_tile_dir_00102:
2373  0994  DD 7E 04    	ld	a,(ix+4)
2374  0997  DD 86 06    	add	a,(ix+6)
2375  099A  47          	ld	b, a
2376  099B  CB 59       	bit	3, c
2377  099D  28 03       	jr	Z,l_spr_tile_dir_00104
2378  099F  68          	ld	l, b
2379  09A0  18 1F       	jr	l_spr_tile_dir_00109
2380  09A2              l_spr_tile_dir_00104:
2381  09A2  3E 00       	ld	a, +((_state_a) & 0xFF)
2382  09A4  DD 86 05    	add	a,(ix+5)
2383  09A7  5F          	ld	e, a
2384  09A8  3E 00       	ld	a, +((_state_a) / 256)
2385  09AA  CE 00       	adc	a,0x00
2386  09AC  57          	ld	d, a
2387  09AD  1A          	ld	a, (de)
2388  09AE  CB 67       	bit	4, a
2389  09B0  28 05       	jr	Z,l_spr_tile_dir_00106
2390  09B2  DD 6E 04    	ld	l,(ix+4)
2391  09B5  18 0A       	jr	l_spr_tile_dir_00109
2392  09B7              l_spr_tile_dir_00106:
2393  09B7  CB 5F       	bit	3, a
2394  09B9  28 03       	jr	Z,l_spr_tile_dir_00108
2395  09BB  68          	ld	l, b
2396  09BC  18 03       	jr	l_spr_tile_dir_00109
2397  09BE              l_spr_tile_dir_00108:
2398  09BE  DD 6E 04    	ld	l,(ix+4)
2399  09C1              l_spr_tile_dir_00109:
2400  09C1  DD E1       	pop	ix
2401  09C3  C9          	ret
2402  09C4              	SECTION code_compiler
2403  09C4              ;	---------------------------------
2404  09C4              ; Function spr_brick_anim
2405  09C4              ; ---------------------------------
2406  09C4              _spr_brick_anim:
2407  09C4  CD 00 00    	call	___sdcc_enter_ix
2408  09C7  F5          	push	af
2409  09C8  DD 75 FF    	ld	(ix-1),l
2410  09CB  21 00 00    	ld	hl,_player_hit_col
2411  09CE  46          	ld	b, (hl)
2412  09CF  21 00 00    	ld	hl,_player_hit_lin
2413  09D2  4E          	ld	c, (hl)
2414  09D3  C5          	push	bc
2415  09D4  C5          	push	bc
2416  09D5  CD 00 00    	call	_spr_calc_index
2417  09D8  F1          	pop	af
2418  09D9  C1          	pop	bc
2419  09DA  22 00 00    	ld	(_index1),hl
2420  09DD  11 F0 FF    	ld	de,0xfff0
2421  09E0  19          	add	hl,de
2422  09E1  11 00 00    	ld	de,_scr_map
2423  09E4  19          	add	hl, de
2424  09E5  7E          	ld	a, (hl)
2425  09E6  DD 77 FE    	ld	(ix-2),a
2426  09E9  11 00 00    	ld	de,_scr_map
2427  09EC  2A 00 00    	ld	hl,(_index1)
2428  09EF  19          	add	hl,de
2429  09F0  66          	ld	h, (hl)
2430  09F1  EB          	ex	de,hl
2431  09F2  DD 7E FF    	ld	a,(ix-1)
2432  09F5  B7          	or	a, a
2433  09F6  28 08       	jr	Z,l_spr_brick_anim_00102
2434  09F8  79          	ld	a, c
2435  09F9  C6 F6       	add	a,0xf6
2436  09FB  32 00 00    	ld	(_tmp),a
2437  09FE  18 06       	jr	l_spr_brick_anim_00103
2438  0A00              l_spr_brick_anim_00102:
2439  0A00  79          	ld	a, c
2440  0A01  C6 F8       	add	a,0xf8
2441  0A03  32 00 00    	ld	(_tmp),a
2442  0A06              l_spr_brick_anim_00103:
2443  0A06  F3          	di
2444  0A07  DD 7E FF    	ld	a,(ix-1)
2445  0A0A  B7          	or	a, a
2446  0A0B  28 18       	jr	Z,l_spr_brick_anim_00105
2447  0A0D  3A 00 00    	ld	a,(_map_paper_clr)
2448  0A10  C5          	push	bc
2449  0A11  D5          	push	de
2450  0A12  C5          	push	bc
2451  0A13  F5          	push	af
2452  0A14  33          	inc	sp
2453  0A15  CD 00 00    	call	_NIRVANAP_fillT_raw_callee
2454  0A18  D1          	pop	de
2455  0A19  33          	inc	sp
2456  0A1A  3A 00 00    	ld	a,(_tmp)
2457  0A1D  5A          	ld	e,d
2458  0A1E  57          	ld	d,a
2459  0A1F  D5          	push	de
2460  0A20  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2461  0A23  18 1C       	jr	l_spr_brick_anim_00106
2462  0A25              l_spr_brick_anim_00105:
2463  0A25  3A 00 00    	ld	a,(_tmp)
2464  0A28  C6 F0       	add	a,0xf0
2465  0A2A  C5          	push	bc
2466  0A2B  D5          	push	de
2467  0A2C  4F          	ld	c,a
2468  0A2D  C5          	push	bc
2469  0A2E  DD 7E FE    	ld	a,(ix-2)
2470  0A31  F5          	push	af
2471  0A32  33          	inc	sp
2472  0A33  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2473  0A36  D1          	pop	de
2474  0A37  33          	inc	sp
2475  0A38  3A 00 00    	ld	a,(_tmp)
2476  0A3B  5A          	ld	e,d
2477  0A3C  57          	ld	d,a
2478  0A3D  D5          	push	de
2479  0A3E  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2480  0A41              l_spr_brick_anim_00106:
2481  0A41  FB          	ei
2482  0A42  F1          	pop	af
2483  0A43  DD E1       	pop	ix
2484  0A45  C9          	ret
2485  0A46              	SECTION code_compiler
2486  0A46              ;	---------------------------------
2487  0A46              ; Function spr_draw_index
2488  0A46              ; ---------------------------------
2489  0A46              _spr_draw_index:
2490  0A46  CD 00 00    	call	___sdcc_enter_ix
2491  0A49  DD 4E 04    	ld	c,(ix+4)
2492  0A4C  79          	ld	a, c
2493  0A4D  E6 0F       	and	a,0x0f
2494  0A4F  87          	add	a, a
2495  0A50  32 00 00    	ld	(_s_col1),a
2496  0A53  21 00 00    	ld	hl,_s_lin1
2497  0A56  71          	ld	(hl),c
2498  0A57  79          	ld	a,c
2499  0A58  07          	rlca
2500  0A59  07          	rlca
2501  0A5A  07          	rlca
2502  0A5B  07          	rlca
2503  0A5C  E6 0F       	and	a,0x0f
2504  0A5E  07          	rlca
2505  0A5F  07          	rlca
2506  0A60  07          	rlca
2507  0A61  07          	rlca
2508  0A62  E6 F0       	and	a,0xf0
2509  0A64  77          	ld	(hl), a
2510  0A65  F3          	di
2511  0A66  3E 00       	ld	a, +((_scr_map) & 0xFF)
2512  0A68  DD 86 04    	add	a,(ix+4)
2513  0A6B  4F          	ld	c, a
2514  0A6C  3E 00       	ld	a, +((_scr_map) / 256)
2515  0A6E  DD 8E 05    	adc	a,(ix+5)
2516  0A71  47          	ld	b, a
2517  0A72  0A          	ld	a, (bc)
2518  0A73  47          	ld	b, a
2519  0A74  3A 00 00    	ld	a,(_s_col1)
2520  0A77  F5          	push	af
2521  0A78  33          	inc	sp
2522  0A79  3A 00 00    	ld	a,(_s_lin1)
2523  0A7C  48          	ld	c,b
2524  0A7D  47          	ld	b,a
2525  0A7E  C5          	push	bc
2526  0A7F  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2527  0A82  FB          	ei
2528  0A83  DD E1       	pop	ix
2529  0A85  C9          	ret
2530  0A86              	SECTION code_compiler
2531  0A86              ;	---------------------------------
2532  0A86              ; Function spr_calc_hor
2533  0A86              ; ---------------------------------
2534  0A86              _spr_calc_hor:
2535  0A86  CD 00 00    	call	___sdcc_enter_ix
2536  0A89  3E 00       	ld	a, +((_col) & 0xFF)
2537  0A8B  DD 86 04    	add	a,(ix+4)
2538  0A8E  4F          	ld	c, a
2539  0A8F  3E 00       	ld	a, +((_col) / 256)
2540  0A91  CE 00       	adc	a,0x00
2541  0A93  47          	ld	b, a
2542  0A94  0A          	ld	a, (bc)
2543  0A95  5F          	ld	e, a
2544  0A96  3E 00       	ld	a, +((_sprite_frames) & 0xFF)
2545  0A98  DD 86 04    	add	a,(ix+4)
2546  0A9B  4F          	ld	c, a
2547  0A9C  3E 00       	ld	a, +((_sprite_frames) / 256)
2548  0A9E  CE 00       	adc	a,0x00
2549  0AA0  47          	ld	b, a
2550  0AA1  0A          	ld	a, (bc)
2551  0AA2  67          	ld	h, a
2552  0AA3  2E 00       	ld	l,0x00
2553  0AA5  55          	ld	d, l
2554  0AA6  06 08       	ld	b,0x08
2555  0AA8              l_spr_calc_hor_00103:
2556  0AA8  29          	add	hl, hl
2557  0AA9  30 01       	jr	NC,l_spr_calc_hor_00104
2558  0AAB  19          	add	hl, de
2559  0AAC              l_spr_calc_hor_00104:
2560  0AAC  10 FA       	djnz	l_spr_calc_hor_00103
2561  0AAE  DD E1       	pop	ix
2562  0AB0  C9          	ret
2563  0AB1              	SECTION code_compiler
2564  0AB1              ;	---------------------------------
2565  0AB1              ; Function spr_back_repaint
2566  0AB1              ; ---------------------------------
2567  0AB1              _spr_back_repaint:
2568  0AB1  3A 00 00    	ld	a,(_spr_hack)
2569  0AB4  B7          	or	a, a
2570  0AB5  20 02       	jr	NZ,l_spr_back_repaint_00102
2571  0AB7  76          	halt
2572  0AB8  F3          	di
2573  0AB9              l_spr_back_repaint_00102:
2574  0AB9  2A FF FF    	ld	hl,(_s_col0 - 1)
2575  0ABC  3A 00 00    	ld	a,(_s_lin0)
2576  0ABF  6F          	ld	l,a
2577  0AC0  E5          	push	hl
2578  0AC1  CD 00 00    	call	_spr_calc_index
2579  0AC4  F1          	pop	af
2580  0AC5  7D          	ld	a,l
2581  0AC6  32 00 00    	ld	(_sprite_curr_index),a
2582  0AC9  21 00 00    	ld	hl,_s_lin0
2583  0ACC  7E          	ld	a, (hl)
2584  0ACD  E6 0F       	and	a,0x0f
2585  0ACF  4F          	ld	c, a
2586  0AD0  7E          	ld	a, (hl)
2587  0AD1  07          	rlca
2588  0AD2  07          	rlca
2589  0AD3  07          	rlca
2590  0AD4  07          	rlca
2591  0AD5  E6 0F       	and	a,0x0f
2592  0AD7  5F          	ld	e, a
2593  0AD8  21 00 00    	ld	hl,_s_col0
2594  0ADB  CB 46       	bit	0, (hl)
2595  0ADD  20 66       	jr	NZ,l_spr_back_repaint_00110
2596  0ADF  79          	ld	a, c
2597  0AE0  B7          	or	a, a
2598  0AE1  20 1D       	jr	NZ,l_spr_back_repaint_00104
2599  0AE3  2A 00 00    	ld	hl,(_sprite_curr_index)
2600  0AE6  26 00       	ld	h,0x00
2601  0AE8  01 00 00    	ld	bc,_scr_map
2602  0AEB  09          	add	hl,bc
2603  0AEC  46          	ld	b,(hl)
2604  0AED  3A 00 00    	ld	a,(_s_col0)
2605  0AF0  F5          	push	af
2606  0AF1  33          	inc	sp
2607  0AF2  3A 00 00    	ld	a,(_s_lin0)
2608  0AF5  48          	ld	c,b
2609  0AF6  47          	ld	b,a
2610  0AF7  C5          	push	bc
2611  0AF8  CD 09 0C    	call	_spr_tile_paint
2612  0AFB  F1          	pop	af
2613  0AFC  33          	inc	sp
2614  0AFD  C3 02 0C    	jp	l_spr_back_repaint_00111
2615  0B00              l_spr_back_repaint_00104:
2616  0B00  7B          	ld	a, e
2617  0B01  07          	rlca
2618  0B02  07          	rlca
2619  0B03  07          	rlca
2620  0B04  07          	rlca
2621  0B05  E6 F0       	and	a,0xf0
2622  0B07  47          	ld	b, a
2623  0B08  2A 00 00    	ld	hl,(_sprite_curr_index)
2624  0B0B  26 00       	ld	h,0x00
2625  0B0D  11 00 00    	ld	de,_scr_map
2626  0B10  19          	add	hl,de
2627  0B11  56          	ld	d, (hl)
2628  0B12  3A 00 00    	ld	a,(_s_col0)
2629  0B15  C5          	push	bc
2630  0B16  F5          	push	af
2631  0B17  33          	inc	sp
2632  0B18  4A          	ld	c, d
2633  0B19  C5          	push	bc
2634  0B1A  CD 09 0C    	call	_spr_tile_paint
2635  0B1D  F1          	pop	af
2636  0B1E  33          	inc	sp
2637  0B1F  C1          	pop	bc
2638  0B20  78          	ld	a, b
2639  0B21  C6 10       	add	a,0x10
2640  0B23  57          	ld	d, a
2641  0B24  21 00 00    	ld	hl,_sprite_curr_index
2642  0B27  7E          	ld	a, (hl)
2643  0B28  C6 10       	add	a,0x10
2644  0B2A  77          	ld	(hl), a
2645  0B2B  C6 00       	add	a,+((_scr_map) & 0xFF)
2646  0B2D  4F          	ld	c, a
2647  0B2E  3E 00       	ld	a, +((_scr_map) / 256)
2648  0B30  CE 00       	adc	a,0x00
2649  0B32  47          	ld	b, a
2650  0B33  0A          	ld	a, (bc)
2651  0B34  47          	ld	b, a
2652  0B35  3A 00 00    	ld	a,(_s_col0)
2653  0B38  5A          	ld	e,d
2654  0B39  57          	ld	d,a
2655  0B3A  D5          	push	de
2656  0B3B  C5          	push	bc
2657  0B3C  33          	inc	sp
2658  0B3D  CD 09 0C    	call	_spr_tile_paint
2659  0B40  F1          	pop	af
2660  0B41  33          	inc	sp
2661  0B42  C3 02 0C    	jp	l_spr_back_repaint_00111
2662  0B45              l_spr_back_repaint_00110:
2663  0B45  21 00 00    	ld	hl,_s_col0
2664  0B48  46          	ld	b, (hl)
2665  0B49  05          	dec	b
2666  0B4A  79          	ld	a, c
2667  0B4B  B7          	or	a, a
2668  0B4C  20 39       	jr	NZ,l_spr_back_repaint_00107
2669  0B4E  2A 00 00    	ld	hl,(_sprite_curr_index)
2670  0B51  26 00       	ld	h,0x00
2671  0B53  11 00 00    	ld	de,_scr_map
2672  0B56  19          	add	hl,de
2673  0B57  56          	ld	d, (hl)
2674  0B58  C5          	push	bc
2675  0B59  33          	inc	sp
2676  0B5A  3A 00 00    	ld	a,(_s_lin0)
2677  0B5D  5A          	ld	e,d
2678  0B5E  57          	ld	d,a
2679  0B5F  D5          	push	de
2680  0B60  CD 09 0C    	call	_spr_tile_paint
2681  0B63  F1          	pop	af
2682  0B64  33          	inc	sp
2683  0B65  21 00 00    	ld	hl,_sprite_curr_index
2684  0B68  34          	inc	(hl)
2685  0B69  21 00 00    	ld	hl,_s_col0
2686  0B6C  46          	ld	b, (hl)
2687  0B6D  04          	inc	b
2688  0B6E  2A 00 00    	ld	hl,(_sprite_curr_index)
2689  0B71  26 00       	ld	h,0x00
2690  0B73  11 00 00    	ld	de,_scr_map
2691  0B76  19          	add	hl,de
2692  0B77  56          	ld	d, (hl)
2693  0B78  C5          	push	bc
2694  0B79  33          	inc	sp
2695  0B7A  3A 00 00    	ld	a,(_s_lin0)
2696  0B7D  5A          	ld	e,d
2697  0B7E  57          	ld	d,a
2698  0B7F  D5          	push	de
2699  0B80  CD 09 0C    	call	_spr_tile_paint
2700  0B83  F1          	pop	af
2701  0B84  33          	inc	sp
2702  0B85  18 7B       	jr	l_spr_back_repaint_00111
2703  0B87              l_spr_back_repaint_00107:
2704  0B87  7B          	ld	a, e
2705  0B88  07          	rlca
2706  0B89  07          	rlca
2707  0B8A  07          	rlca
2708  0B8B  07          	rlca
2709  0B8C  E6 F0       	and	a,0xf0
2710  0B8E  4F          	ld	c, a
2711  0B8F  2A 00 00    	ld	hl,(_sprite_curr_index)
2712  0B92  26 00       	ld	h,0x00
2713  0B94  11 00 00    	ld	de,_scr_map
2714  0B97  19          	add	hl,de
2715  0B98  66          	ld	h, (hl)
2716  0B99  EB          	ex	de,hl
2717  0B9A  C5          	push	bc
2718  0B9B  C5          	push	bc
2719  0B9C  D5          	push	de
2720  0B9D  33          	inc	sp
2721  0B9E  CD 09 0C    	call	_spr_tile_paint
2722  0BA1  F1          	pop	af
2723  0BA2  33          	inc	sp
2724  0BA3  C1          	pop	bc
2725  0BA4  21 00 00    	ld	hl,_sprite_curr_index
2726  0BA7  34          	inc	(hl)
2727  0BA8  21 00 00    	ld	hl,_s_col0
2728  0BAB  46          	ld	b, (hl)
2729  0BAC  04          	inc	b
2730  0BAD  2A 00 00    	ld	hl,(_sprite_curr_index)
2731  0BB0  26 00       	ld	h,0x00
2732  0BB2  11 00 00    	ld	de,_scr_map
2733  0BB5  19          	add	hl,de
2734  0BB6  66          	ld	h, (hl)
2735  0BB7  EB          	ex	de,hl
2736  0BB8  C5          	push	bc
2737  0BB9  C5          	push	bc
2738  0BBA  D5          	push	de
2739  0BBB  33          	inc	sp
2740  0BBC  CD 09 0C    	call	_spr_tile_paint
2741  0BBF  F1          	pop	af
2742  0BC0  33          	inc	sp
2743  0BC1  C1          	pop	bc
2744  0BC2  79          	ld	a, c
2745  0BC3  C6 10       	add	a,0x10
2746  0BC5  4F          	ld	c, a
2747  0BC6  21 00 00    	ld	hl,_sprite_curr_index
2748  0BC9  7E          	ld	a, (hl)
2749  0BCA  C6 0F       	add	a,0x0f
2750  0BCC  77          	ld	(hl), a
2751  0BCD  21 00 00    	ld	hl,_s_col0
2752  0BD0  46          	ld	b, (hl)
2753  0BD1  05          	dec	b
2754  0BD2  2A 00 00    	ld	hl,(_sprite_curr_index)
2755  0BD5  26 00       	ld	h,0x00
2756  0BD7  11 00 00    	ld	de,_scr_map
2757  0BDA  19          	add	hl,de
2758  0BDB  66          	ld	h, (hl)
2759  0BDC  EB          	ex	de,hl
2760  0BDD  C5          	push	bc
2761  0BDE  C5          	push	bc
2762  0BDF  D5          	push	de
2763  0BE0  33          	inc	sp
2764  0BE1  CD 09 0C    	call	_spr_tile_paint
2765  0BE4  F1          	pop	af
2766  0BE5  33          	inc	sp
2767  0BE6  C1          	pop	bc
2768  0BE7  21 00 00    	ld	hl,_sprite_curr_index
2769  0BEA  34          	inc	(hl)
2770  0BEB  21 00 00    	ld	hl,_s_col0
2771  0BEE  46          	ld	b, (hl)
2772  0BEF  04          	inc	b
2773  0BF0  2A 00 00    	ld	hl,(_sprite_curr_index)
2774  0BF3  26 00       	ld	h,0x00
2775  0BF5  11 00 00    	ld	de,_scr_map
2776  0BF8  19          	add	hl,de
2777  0BF9  66          	ld	h, (hl)
2778  0BFA  C5          	push	bc
2779  0BFB  E5          	push	hl
2780  0BFC  33          	inc	sp
2781  0BFD  CD 09 0C    	call	_spr_tile_paint
2782  0C00  F1          	pop	af
2783  0C01  33          	inc	sp
2784  0C02              l_spr_back_repaint_00111:
2785  0C02  3A 00 00    	ld	a,(_spr_hack)
2786  0C05  B7          	or	a, a
2787  0C06  C0          	ret	NZ
2788  0C07  FB          	ei
2789  0C08  C9          	ret
2790  0C09              	SECTION code_compiler
2791  0C09              ;	---------------------------------
2792  0C09              ; Function spr_tile_paint
2793  0C09              ; ---------------------------------
2794  0C09              _spr_tile_paint:
2795  0C09  CD 00 00    	call	___sdcc_enter_ix
2796  0C0C  DD 7E 04    	ld	a,(ix+4)
2797  0C0F  B7          	or	a, a
2798  0C10  28 05       	jr	Z,l_spr_tile_paint_00101
2799  0C12  3C          	inc	a
2800  0C13  28 22       	jr	Z,l_spr_tile_paint_00105
2801  0C15  18 11       	jr	l_spr_tile_paint_00103
2802  0C17              l_spr_tile_paint_00101:
2803  0C17  DD 66 06    	ld	h,(ix+6)
2804  0C1A  DD 6E 05    	ld	l,(ix+5)
2805  0C1D  3A 00 00    	ld	a,(_map_paper_clr)
2806  0C20  E5          	push	hl
2807  0C21  F5          	push	af
2808  0C22  33          	inc	sp
2809  0C23  CD 00 00    	call	_NIRVANAP_fillT_raw_callee
2810  0C26  18 0F       	jr	l_spr_tile_paint_00105
2811  0C28              l_spr_tile_paint_00103:
2812  0C28  DD 66 06    	ld	h,(ix+6)
2813  0C2B  DD 6E 05    	ld	l,(ix+5)
2814  0C2E  E5          	push	hl
2815  0C2F  DD 7E 04    	ld	a,(ix+4)
2816  0C32  F5          	push	af
2817  0C33  33          	inc	sp
2818  0C34  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2819  0C37              l_spr_tile_paint_00105:
2820  0C37  DD E1       	pop	ix
2821  0C39  C9          	ret
2822  0C3A              	SECTION code_compiler
2823  0C3A              ;	---------------------------------
2824  0C3A              ; Function spr_init_anim_bullets
2825  0C3A              ; ---------------------------------
2826  0C3A              _spr_init_anim_bullets:
2827  0C3A  01 00 00    	ld	bc,_anim_lin+0
2828  0C3D  1E 00       	ld	e,0x00
2829  0C3F              l_spr_init_anim_bullets_00102:
2830  0C3F  6B          	ld	l,e
2831  0C40  26 00       	ld	h,0x00
2832  0C42  09          	add	hl, bc
2833  0C43  36 FF       	ld	(hl),0xff
2834  0C45  16 00       	ld	d,0x00
2835  0C47  21 00 00    	ld	hl,_bullet_col
2836  0C4A  19          	add	hl, de
2837  0C4B  36 FF       	ld	(hl),0xff
2838  0C4D  1C          	inc	e
2839  0C4E  7B          	ld	a, e
2840  0C4F  D6 08       	sub	a,0x08
2841  0C51  38 EC       	jr	C,l_spr_init_anim_bullets_00102
2842  0C53  21 00 00    	ld	hl,_bullet_count
2843  0C56  36 00       	ld	(hl),0x00
2844  0C58  21 00 00    	ld	hl,_anim_count
2845  0C5B  36 00       	ld	(hl),0x00
2846  0C5D  C9          	ret
2847  0C5E              	SECTION code_compiler
2848  0C5E              ;	---------------------------------
2849  0C5E              ; Function spr_add_anim
2850  0C5E              ; ---------------------------------
2851  0C5E              _spr_add_anim:
2852  0C5E  CD 00 00    	call	___sdcc_enter_ix
2853  0C61  F5          	push	af
2854  0C62  F5          	push	af
2855  0C63  3B          	dec	sp
2856  0C64  DD 7E 05    	ld	a,(ix+5)
2857  0C67  D6 1F       	sub	a,0x1f
2858  0C69  D2 28 0D    	jp	NC, l_spr_add_anim_00111
2859  0C6C  DD 7E 04    	ld	a,(ix+4)
2860  0C6F  D6 B8       	sub	a,0xb8
2861  0C71  D2 28 0D    	jp	NC, l_spr_add_anim_00111
2862  0C74  0E 00       	ld	c,0x00
2863  0C76  DD 71 FF    	ld	(ix-1),c
2864  0C79              l_spr_add_anim_00109:
2865  0C79  3E 00       	ld	a, +((_anim_lin) & 0xFF)
2866  0C7B  81          	add	a, c
2867  0C7C  5F          	ld	e, a
2868  0C7D  3E 00       	ld	a, +((_anim_lin) / 256)
2869  0C7F  CE 00       	adc	a,0x00
2870  0C81  57          	ld	d, a
2871  0C82  1A          	ld	a, (de)
2872  0C83  3C          	inc	a
2873  0C84  C2 1E 0D    	jp	NZ,l_spr_add_anim_00110
2874  0C87  21 00 00    	ld	hl,_anim_count
2875  0C8A  34          	inc	(hl)
2876  0C8B  DD 7E 04    	ld	a,(ix+4)
2877  0C8E  12          	ld	(de), a
2878  0C8F  3E 00       	ld	a, +((_anim_col) & 0xFF)
2879  0C91  DD 86 FF    	add	a,(ix-1)
2880  0C94  DD 77 FB    	ld	(ix-5),a
2881  0C97  3E 00       	ld	a, +((_anim_col) / 256)
2882  0C99  CE 00       	adc	a,0x00
2883  0C9B  DD 77 FC    	ld	(ix-4),a
2884  0C9E  E1          	pop	hl
2885  0C9F  E5          	push	hl
2886  0CA0  DD 7E 05    	ld	a,(ix+5)
2887  0CA3  77          	ld	(hl), a
2888  0CA4  01 00 00    	ld	bc,_anim_tile
2889  0CA7  DD 6E FF    	ld	l,(ix-1)
2890  0CAA  26 00       	ld	h,0x00
2891  0CAC  09          	add	hl,bc
2892  0CAD  DD 75 FD    	ld	(ix-3),l
2893  0CB0  DD 74 FE    	ld	(ix-2),h
2894  0CB3  DD 7E 06    	ld	a,(ix+6)
2895  0CB6  77          	ld	(hl), a
2896  0CB7  3E 00       	ld	a, +((_anim_loop) & 0xFF)
2897  0CB9  DD 86 FF    	add	a,(ix-1)
2898  0CBC  4F          	ld	c, a
2899  0CBD  3E 00       	ld	a, +((_anim_loop) / 256)
2900  0CBF  CE 00       	adc	a,0x00
2901  0CC1  47          	ld	b, a
2902  0CC2  DD 7E 08    	ld	a,(ix+8)
2903  0CC5  02          	ld	(bc), a
2904  0CC6  01 00 00    	ld	bc,_anim_int+0
2905  0CC9  DD 6E FF    	ld	l,(ix-1)
2906  0CCC  26 00       	ld	h,0x00
2907  0CCE  09          	add	hl, bc
2908  0CCF  36 00       	ld	(hl),0x00
2909  0CD1  3E 00       	ld	a, +((_anim_end) & 0xFF)
2910  0CD3  DD 86 FF    	add	a,(ix-1)
2911  0CD6  4F          	ld	c, a
2912  0CD7  3E 00       	ld	a, +((_anim_end) / 256)
2913  0CD9  CE 00       	adc	a,0x00
2914  0CDB  47          	ld	b, a
2915  0CDC  DD 7E 07    	ld	a,(ix+7)
2916  0CDF  02          	ld	(bc), a
2917  0CE0  3E 00       	ld	a, +((_anim_respanwn) & 0xFF)
2918  0CE2  DD 86 FF    	add	a,(ix-1)
2919  0CE5  4F          	ld	c, a
2920  0CE6  3E 00       	ld	a, +((_anim_respanwn) / 256)
2921  0CE8  CE 00       	adc	a,0x00
2922  0CEA  47          	ld	b, a
2923  0CEB  DD 7E 09    	ld	a,(ix+9)
2924  0CEE  02          	ld	(bc), a
2925  0CEF  F3          	di
2926  0CF0  E1          	pop	hl
2927  0CF1  46          	ld	b,(hl)
2928  0CF2  1A          	ld	a,(de)
2929  0CF3  E5          	push	hl
2930  0CF4  DD 6E FD    	ld	l,(ix-3)
2931  0CF7  DD 66 FE    	ld	h,(ix-2)
2932  0CFA  56          	ld	d, (hl)
2933  0CFB  C5          	push	bc
2934  0CFC  33          	inc	sp
2935  0CFD  5A          	ld	e,d
2936  0CFE  57          	ld	d,a
2937  0CFF  D5          	push	de
2938  0D00  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2939  0D03  FB          	ei
2940  0D04  DD 66 05    	ld	h,(ix+5)
2941  0D07  DD 6E 04    	ld	l,(ix+4)
2942  0D0A  E5          	push	hl
2943  0D0B  CD 00 00    	call	_spr_calc_index
2944  0D0E  F1          	pop	af
2945  0D0F  22 00 00    	ld	(_index0),hl
2946  0D12  01 00 00    	ld	bc,_scr_map
2947  0D15  09          	add	hl,bc
2948  0D16  7E          	ld	a,(hl)
2949  0D17  B7          	or	a,a
2950  0D18  20 0E       	jr	NZ,l_spr_add_anim_00111
2951  0D1A  36 FF       	ld	(hl),0xff
2952  0D1C  18 0A       	jr	l_spr_add_anim_00111
2953  0D1E              l_spr_add_anim_00110:
2954  0D1E  0C          	inc	c
2955  0D1F  DD 71 FF    	ld	(ix-1),c
2956  0D22  79          	ld	a, c
2957  0D23  D6 08       	sub	a,0x08
2958  0D25  DA 79 0C    	jp	C, l_spr_add_anim_00109
2959  0D28              l_spr_add_anim_00111:
2960  0D28  DD F9       	ld	sp, ix
2961  0D2A  DD E1       	pop	ix
2962  0D2C  C9          	ret
2963  0D2D              	SECTION code_compiler
2964  0D2D              ;	---------------------------------
2965  0D2D              ; Function spr_play_anim
2966  0D2D              ; ---------------------------------
2967  0D2D              _spr_play_anim:
2968  0D2D  CD 00 00    	call	___sdcc_enter_ix
2969  0D30  F5          	push	af
2970  0D31  F5          	push	af
2971  0D32  F5          	push	af
2972  0D33  3B          	dec	sp
2973  0D34  DD 36 F9 00 	ld	(ix-7),0x00
2974  0D38              l_spr_play_anim_00114:
2975  0D38  01 00 00    	ld	bc,_anim_lin
2976  0D3B  DD 6E F9    	ld	l,(ix-7)
2977  0D3E  26 00       	ld	h,0x00
2978  0D40  09          	add	hl,bc
2979  0D41  DD 75 FC    	ld	(ix-4),l
2980  0D44  DD 74 FD    	ld	(ix-3),h
2981  0D47  4E          	ld	c, (hl)
2982  0D48  0C          	inc	c
2983  0D49  CA 52 0E    	jp	Z,l_spr_play_anim_00115
2984  0D4C  21 01 00    	ld	hl,0x0001
2985  0D4F  CD 00 00    	call	_z80_delay_ms_fastcall
2986  0D52  01 00 00    	ld	bc,_anim_int
2987  0D55  DD 6E F9    	ld	l,(ix-7)
2988  0D58  26 00       	ld	h,0x00
2989  0D5A  09          	add	hl,bc
2990  0D5B  DD 75 FA    	ld	(ix-6),l
2991  0D5E  DD 74 FB    	ld	(ix-5),h
2992  0D61  4E          	ld	c, (hl)
2993  0D62  3E 00       	ld	a, +((_anim_end) & 0xFF)
2994  0D64  DD 86 F9    	add	a,(ix-7)
2995  0D67  6F          	ld	l, a
2996  0D68  3E 00       	ld	a, +((_anim_end) / 256)
2997  0D6A  CE 00       	adc	a,0x00
2998  0D6C  67          	ld	h, a
2999  0D6D  46          	ld	b, (hl)
3000  0D6E  79          	ld	a, c
3001  0D6F  90          	sub	a, b
3002  0D70  30 3D       	jr	NC,l_spr_play_anim_00109
3003  0D72  F3          	di
3004  0D73  3E 00       	ld	a, +((_anim_col) & 0xFF)
3005  0D75  DD 86 F9    	add	a,(ix-7)
3006  0D78  6F          	ld	l, a
3007  0D79  3E 00       	ld	a, +((_anim_col) / 256)
3008  0D7B  CE 00       	adc	a,0x00
3009  0D7D  67          	ld	h, a
3010  0D7E  56          	ld	d, (hl)
3011  0D7F  DD 6E FC    	ld	l,(ix-4)
3012  0D82  DD 66 FD    	ld	h,(ix-3)
3013  0D85  46          	ld	b, (hl)
3014  0D86  3E 00       	ld	a, +((_anim_tile) & 0xFF)
3015  0D88  DD 86 F9    	add	a,(ix-7)
3016  0D8B  6F          	ld	l, a
3017  0D8C  3E 00       	ld	a, +((_anim_tile) / 256)
3018  0D8E  CE 00       	adc	a,0x00
3019  0D90  67          	ld	h, a
3020  0D91  4E          	ld	c, (hl)
3021  0D92  DD 6E FA    	ld	l,(ix-6)
3022  0D95  DD 66 FB    	ld	h,(ix-5)
3023  0D98  5E          	ld	e, (hl)
3024  0D99  79          	ld	a, c
3025  0D9A  83          	add	a, e
3026  0D9B  58          	ld	e,b
3027  0D9C  D5          	push	de
3028  0D9D  F5          	push	af
3029  0D9E  33          	inc	sp
3030  0D9F  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
3031  0DA2  FB          	ei
3032  0DA3  DD 6E FA    	ld	l,(ix-6)
3033  0DA6  DD 66 FB    	ld	h,(ix-5)
3034  0DA9  4E          	ld	c,(hl)
3035  0DAA  0C          	inc	c
3036  0DAB  71          	ld	(hl), c
3037  0DAC  C3 52 0E    	jp	l_spr_play_anim_00115
3038  0DAF              l_spr_play_anim_00109:
3039  0DAF  01 00 00    	ld	bc,_anim_loop
3040  0DB2  DD 6E F9    	ld	l,(ix-7)
3041  0DB5  26 00       	ld	h,0x00
3042  0DB7  09          	add	hl,bc
3043  0DB8  DD 75 FE    	ld	(ix-2),l
3044  0DBB  DD 74 FF    	ld	(ix-1),h
3045  0DBE  7E          	ld	a,(hl)
3046  0DBF  4F          	ld	c,a
3047  0DC0  B7          	or	a, a
3048  0DC1  C2 42 0E    	jp	NZ, l_spr_play_anim_00106
3049  0DC4  21 00 00    	ld	hl,_anim_count
3050  0DC7  35          	dec	(hl)
3051  0DC8  3E 00       	ld	a, +((_anim_col) & 0xFF)
3052  0DCA  DD 86 F9    	add	a,(ix-7)
3053  0DCD  6F          	ld	l, a
3054  0DCE  3E 00       	ld	a, +((_anim_col) / 256)
3055  0DD0  CE 00       	adc	a,0x00
3056  0DD2  67          	ld	h, a
3057  0DD3  7E          	ld	a, (hl)
3058  0DD4  32 00 00    	ld	(_s_col0),a
3059  0DD7  DD 6E FC    	ld	l,(ix-4)
3060  0DDA  DD 66 FD    	ld	h,(ix-3)
3061  0DDD  7E          	ld	a, (hl)
3062  0DDE  32 00 00    	ld	(_s_lin0),a
3063  0DE1  2A FF FF    	ld	hl,(_s_col0 - 1)
3064  0DE4  6F          	ld	l,a
3065  0DE5  E5          	push	hl
3066  0DE6  CD 00 00    	call	_spr_calc_index
3067  0DE9  F1          	pop	af
3068  0DEA  2A FF FF    	ld	hl,(_s_col0 - 1)
3069  0DED  3A 00 00    	ld	a,(_s_lin0)
3070  0DF0  6F          	ld	l,a
3071  0DF1  E5          	push	hl
3072  0DF2  CD 00 00    	call	_spr_calc_index
3073  0DF5  F1          	pop	af
3074  0DF6  01 00 00    	ld	bc,_scr_map
3075  0DF9  09          	add	hl,bc
3076  0DFA  4E          	ld	c, (hl)
3077  0DFB  0C          	inc	c
3078  0DFC  20 1F       	jr	NZ,l_spr_play_anim_00102
3079  0DFE  2A FF FF    	ld	hl,(_s_col0 - 1)
3080  0E01  3A 00 00    	ld	a,(_s_lin0)
3081  0E04  6F          	ld	l,a
3082  0E05  E5          	push	hl
3083  0E06  CD 00 00    	call	_spr_calc_index
3084  0E09  F1          	pop	af
3085  0E0A  22 00 00    	ld	(_index0),hl
3086  0E0D  01 00 00    	ld	bc,_scr_map
3087  0E10  09          	add	hl,bc
3088  0E11  E5          	push	hl
3089  0E12  2A 00 00    	ld	hl,(_index0)
3090  0E15  E5          	push	hl
3091  0E16  CD 00 00    	call	_game_match_back
3092  0E19  F1          	pop	af
3093  0E1A  C1          	pop	bc
3094  0E1B  7D          	ld	a,l
3095  0E1C  02          	ld	(bc), a
3096  0E1D              l_spr_play_anim_00102:
3097  0E1D  CD B1 0A    	call	_spr_back_repaint
3098  0E20  3E 00       	ld	a, +((_anim_respanwn) & 0xFF)
3099  0E22  DD 86 F9    	add	a,(ix-7)
3100  0E25  4F          	ld	c, a
3101  0E26  3E 00       	ld	a, +((_anim_respanwn) / 256)
3102  0E28  CE 00       	adc	a,0x00
3103  0E2A  47          	ld	b, a
3104  0E2B  0A          	ld	a, (bc)
3105  0E2C  B7          	or	a, a
3106  0E2D  28 09       	jr	Z,l_spr_play_anim_00104
3107  0E2F  DD 7E F9    	ld	a,(ix-7)
3108  0E32  F5          	push	af
3109  0E33  33          	inc	sp
3110  0E34  CD 00 00    	call	_enemy_respawn
3111  0E37  33          	inc	sp
3112  0E38              l_spr_play_anim_00104:
3113  0E38  DD 6E FC    	ld	l,(ix-4)
3114  0E3B  DD 66 FD    	ld	h,(ix-3)
3115  0E3E  36 FF       	ld	(hl),0xff
3116  0E40  18 10       	jr	l_spr_play_anim_00115
3117  0E42              l_spr_play_anim_00106:
3118  0E42  0D          	dec	c
3119  0E43  DD 6E FE    	ld	l,(ix-2)
3120  0E46  DD 66 FF    	ld	h,(ix-1)
3121  0E49  71          	ld	(hl), c
3122  0E4A  DD 6E FA    	ld	l,(ix-6)
3123  0E4D  DD 66 FB    	ld	h,(ix-5)
3124  0E50  36 00       	ld	(hl),0x00
3125  0E52              l_spr_play_anim_00115:
3126  0E52  DD 34 F9    	inc	(ix-7)
3127  0E55  DD 7E F9    	ld	a,(ix-7)
3128  0E58  D6 08       	sub	a,0x08
3129  0E5A  DA 38 0D    	jp	C, l_spr_play_anim_00114
3130  0E5D  DD F9       	ld	sp, ix
3131  0E5F  DD E1       	pop	ix
3132  0E61  C9          	ret
3133  0E62              	SECTION code_compiler
3134  0E62              ;	---------------------------------
3135  0E62              ; Function spr_bullet_fireball
3136  0E62              ; ---------------------------------
3137  0E62              _spr_bullet_fireball:
3138  0E62  CD 00 00    	call	___sdcc_enter_ix
3139  0E65  3A 00 00    	ld	a,(_s_lin0)
3140  0E68  4F          	ld	c,a
3141  0E69  06 00       	ld	b,0x00
3142  0E6B  2A 00 00    	ld	hl,(_bullet)
3143  0E6E  60          	ld	h,b
3144  0E6F  11 00 00    	ld	de,_bullet_lin0
3145  0E72  19          	add	hl,de
3146  0E73  5E          	ld	e, (hl)
3147  0E74  16 00       	ld	d,0x00
3148  0E76  79          	ld	a, c
3149  0E77  93          	sub	a, e
3150  0E78  6F          	ld	l, a
3151  0E79  78          	ld	a, b
3152  0E7A  9A          	sbc	a, d
3153  0E7B  67          	ld	h, a
3154  0E7C  CD 00 00    	call	_abs_fastcall
3155  0E7F  3E 08       	ld	a,0x08
3156  0E81  BD          	cp	a,l
3157  0E82  3E 00       	ld	a,0x00
3158  0E84  9C          	sbc	a,h
3159  0E85  E2 8A 0E    	jp	PO, l_spr_bullet_fireball_00110
3160  0E88  EE 80       	xor	a,0x80
3161  0E8A              l_spr_bullet_fireball_00110:
3162  0E8A  FA AD 0E    	jp	M, l_spr_bullet_fireball_00102
3163  0E8D  2A 00 00    	ld	hl,(_bullet)
3164  0E90  26 00       	ld	h,0x00
3165  0E92  01 00 00    	ld	bc,_bullet_lin
3166  0E95  09          	add	hl,bc
3167  0E96  7E          	ld	a,(hl)
3168  0E97  4D          	ld	c,l
3169  0E98  44          	ld	b,h
3170  0E99  21 00 00    	ld	hl,_bullet
3171  0E9C  DD 86 04    	add	a,(ix+4)
3172  0E9F  02          	ld	(bc), a
3173  0EA0  4E          	ld	c,(hl)
3174  0EA1  06 00       	ld	b,0x00
3175  0EA3  21 00 00    	ld	hl,_bullet_lin
3176  0EA6  09          	add	hl,bc
3177  0EA7  7E          	ld	a,(hl)
3178  0EA8  32 00 00    	ld	(_s_lin0),a
3179  0EAB  18 0D       	jr	l_spr_bullet_fireball_00104
3180  0EAD              l_spr_bullet_fireball_00102:
3181  0EAD  2A 00 00    	ld	hl,(_bullet)
3182  0EB0  26 00       	ld	h,0x00
3183  0EB2  01 00 00    	ld	bc,_bullet_class
3184  0EB5  09          	add	hl,bc
3185  0EB6  DD 7E 05    	ld	a,(ix+5)
3186  0EB9  77          	ld	(hl),a
3187  0EBA              l_spr_bullet_fireball_00104:
3188  0EBA  DD E1       	pop	ix
3189  0EBC  C9          	ret
3190  0EBD              	SECTION code_compiler
3191  0EBD              ;	---------------------------------
3192  0EBD              ; Function spr_bullet_axe
3193  0EBD              ; ---------------------------------
3194  0EBD              _spr_bullet_axe:
3195  0EBD  2A 00 00    	ld	hl,(_bullet)
3196  0EC0  26 00       	ld	h,0x00
3197  0EC2  01 00 00    	ld	bc,_bullet_lin
3198  0EC5  09          	add	hl,bc
3199  0EC6  7E          	ld	a,(hl)
3200  0EC7  32 00 00    	ld	(_s_lin0),a
3201  0ECA  2A 00 00    	ld	hl,(_bullet)
3202  0ECD  26 00       	ld	h,0x00
3203  0ECF  01 00 00    	ld	bc,_bullet_col
3204  0ED2  09          	add	hl,bc
3205  0ED3  7E          	ld	a,(hl)
3206  0ED4  C6 FF       	add	a,0xff
3207  0ED6  32 00 00    	ld	(_s_col0),a
3208  0ED9  D6 20       	sub	a,0x20
3209  0EDB  30 03       	jr	NC,l_spr_bullet_axe_00102
3210  0EDD  CD B1 0A    	call	_spr_back_repaint
3211  0EE0              l_spr_bullet_axe_00102:
3212  0EE0  2A 00 00    	ld	hl,(_bullet)
3213  0EE3  26 00       	ld	h,0x00
3214  0EE5  01 00 00    	ld	bc,_bullet_vel
3215  0EE8  09          	add	hl,bc
3216  0EE9  5E          	ld	e,(hl)
3217  0EEA  4D          	ld	c,l
3218  0EEB  44          	ld	b,h
3219  0EEC  21 00 00    	ld	hl,_game_gravity
3220  0EEF  56          	ld	d, (hl)
3221  0EF0  7B          	ld	a, e
3222  0EF1  82          	add	a, d
3223  0EF2  02          	ld	(bc), a
3224  0EF3  2A 00 00    	ld	hl,(_bullet)
3225  0EF6  26 00       	ld	h,0x00
3226  0EF8  01 00 00    	ld	bc,_bullet_vel
3227  0EFB  09          	add	hl,bc
3228  0EFC  5E          	ld	e,(hl)
3229  0EFD  3E 78       	ld	a,0x78
3230  0EFF  93          	sub	a,e
3231  0F00  4D          	ld	c,l
3232  0F01  44          	ld	b,h
3233  0F02  E2 07 0F    	jp	PO, l_spr_bullet_axe_00134
3234  0F05  EE 80       	xor	a,0x80
3235  0F07              l_spr_bullet_axe_00134:
3236  0F07  F2 0D 0F    	jp	P, l_spr_bullet_axe_00104
3237  0F0A  3E 78       	ld	a,0x78
3238  0F0C  02          	ld	(bc), a
3239  0F0D              l_spr_bullet_axe_00104:
3240  0F0D  2A 00 00    	ld	hl,(_bullet)
3241  0F10  26 00       	ld	h,0x00
3242  0F12  01 00 00    	ld	bc,_bullet_vel
3243  0F15  09          	add	hl,bc
3244  0F16  7E          	ld	a,(hl)
3245  0F17  EE 80       	xor	a,0x80
3246  0F19  D6 08       	sub	a,0x08
3247  0F1B  30 02       	jr	NC,l_spr_bullet_axe_00106
3248  0F1D  36 88       	ld	(hl),0x88
3249  0F1F              l_spr_bullet_axe_00106:
3250  0F1F  2A 00 00    	ld	hl,(_bullet)
3251  0F22  26 00       	ld	h,0x00
3252  0F24  01 00 00    	ld	bc,_bullet_vel
3253  0F27  09          	add	hl,bc
3254  0F28  7E          	ld	a,(hl)
3255  0F29  CB 47       	bit	0,a
3256  0F2B  32 00 00    	ld	(_s_lin1),a
3257  0F2E  28 04       	jr	Z,l_spr_bullet_axe_00108
3258  0F30  21 00 00    	ld	hl,_s_lin1
3259  0F33  35          	dec	(hl)
3260  0F34              l_spr_bullet_axe_00108:
3261  0F34  2A 00 00    	ld	hl,(_bullet)
3262  0F37  26 00       	ld	h,0x00
3263  0F39  01 00 00    	ld	bc,_bullet_lin
3264  0F3C  09          	add	hl,bc
3265  0F3D  7E          	ld	a,(hl)
3266  0F3E  4D          	ld	c,l
3267  0F3F  44          	ld	b,h
3268  0F40  21 00 00    	ld	hl,_s_lin1
3269  0F43  86          	add	a, (hl)
3270  0F44  21 00 00    	ld	hl,_s_lin0
3271  0F47  77          	ld	(hl), a
3272  0F48  3E 90       	ld	a,0x90
3273  0F4A  96          	sub	a, (hl)
3274  0F4B  30 11       	jr	NC,l_spr_bullet_axe_00110
3275  0F4D  21 00 00    	ld	hl,_bullet_count
3276  0F50  35          	dec	(hl)
3277  0F51  2A 00 00    	ld	hl,(_bullet)
3278  0F54  26 00       	ld	h,0x00
3279  0F56  01 00 00    	ld	bc,_bullet_col
3280  0F59  09          	add	hl,bc
3281  0F5A  36 FF       	ld	(hl),0xff
3282  0F5C  18 04       	jr	l_spr_bullet_axe_00112
3283  0F5E              l_spr_bullet_axe_00110:
3284  0F5E  3A 00 00    	ld	a,(_s_lin0)
3285  0F61  02          	ld	(bc), a
3286  0F62              l_spr_bullet_axe_00112:
3287  0F62  C9          	ret
3288  0F63              	SECTION code_compiler
3289  0F63              ;	---------------------------------
3290  0F63              ; Function spr_play_bullets
3291  0F63              ; ---------------------------------
3292  0F63              _spr_play_bullets:
3293  0F63  CD 00 00    	call	___sdcc_enter_ix
3294  0F66  F5          	push	af
3295  0F67  F5          	push	af
3296  0F68  3B          	dec	sp
3297  0F69  21 00 00    	ld	hl,_bullet
3298  0F6C  36 00       	ld	(hl),0x00
3299  0F6E              l_spr_play_bullets_00180:
3300  0F6E  2A 00 00    	ld	hl,(_bullet)
3301  0F71  26 00       	ld	h,0x00
3302  0F73  01 00 00    	ld	bc,_bullet_col
3303  0F76  09          	add	hl,bc
3304  0F77  7E          	ld	a,(hl)
3305  0F78  4F          	ld	c,a
3306  0F79  3C          	inc	a
3307  0F7A  CA 2A 14    	jp	Z,l_spr_play_bullets_00174
3308  0F7D  3A 00 00    	ld	a,(_bullet)
3309  0F80  5F          	ld	e,a
3310  0F81  16 00       	ld	d,0x00
3311  0F83  21 00 00    	ld	hl,_bullet_lin
3312  0F86  19          	add	hl,de
3313  0F87  7E          	ld	a,(hl)
3314  0F88  32 00 00    	ld	(_s_lin0),a
3315  0F8B  21 00 00    	ld	hl,_s_col0
3316  0F8E  71          	ld	(hl),c
3317  0F8F  DD 71 FC    	ld	(ix-4),c
3318  0F92  CD B1 0A    	call	_spr_back_repaint
3319  0F95  2A 00 00    	ld	hl,(_bullet)
3320  0F98  26 00       	ld	h,0x00
3321  0F9A  01 00 00    	ld	bc,_bullet_class
3322  0F9D  09          	add	hl,bc
3323  0F9E  7E          	ld	a,(hl)
3324  0F9F  D6 02       	sub	a,0x02
3325  0FA1  20 08       	jr	NZ,l_spr_play_bullets_00104
3326  0FA3  21 02 03    	ld	hl,0x0302
3327  0FA6  E5          	push	hl
3328  0FA7  CD 62 0E    	call	_spr_bullet_fireball
3329  0FAA  F1          	pop	af
3330  0FAB              l_spr_play_bullets_00104:
3331  0FAB  2A 00 00    	ld	hl,(_bullet)
3332  0FAE  26 00       	ld	h,0x00
3333  0FB0  01 00 00    	ld	bc,_bullet_class
3334  0FB3  09          	add	hl,bc
3335  0FB4  7E          	ld	a,(hl)
3336  0FB5  D6 03       	sub	a,0x03
3337  0FB7  20 08       	jr	NZ,l_spr_play_bullets_00106
3338  0FB9  21 02 03    	ld	hl,0x0302
3339  0FBC  E5          	push	hl
3340  0FBD  CD 62 0E    	call	_spr_bullet_fireball
3341  0FC0  F1          	pop	af
3342  0FC1              l_spr_play_bullets_00106:
3343  0FC1  2A 00 00    	ld	hl,(_bullet)
3344  0FC4  26 00       	ld	h,0x00
3345  0FC6  01 00 00    	ld	bc,_bullet_class
3346  0FC9  09          	add	hl,bc
3347  0FCA  7E          	ld	a,(hl)
3348  0FCB  D6 04       	sub	a,0x04
3349  0FCD  20 11       	jr	NZ,l_spr_play_bullets_00110
3350  0FCF  CD BD 0E    	call	_spr_bullet_axe
3351  0FD2  2A 00 00    	ld	hl,(_bullet)
3352  0FD5  26 00       	ld	h,0x00
3353  0FD7  01 00 00    	ld	bc,_bullet_col
3354  0FDA  09          	add	hl,bc
3355  0FDB  7E          	ld	a,(hl)
3356  0FDC  3C          	inc	a
3357  0FDD  CA 2A 14    	jp	Z,l_spr_play_bullets_00174
3358  0FE0              l_spr_play_bullets_00110:
3359  0FE0  2A 00 00    	ld	hl,(_bullet)
3360  0FE3  26 00       	ld	h,0x00
3361  0FE5  01 00 00    	ld	bc,_bullet_dir
3362  0FE8  09          	add	hl,bc
3363  0FE9  7E          	ld	a,(hl)
3364  0FEA  3C          	inc	a
3365  0FEB  20 44       	jr	NZ,l_spr_play_bullets_00120
3366  0FED  2A 00 00    	ld	hl,(_bullet)
3367  0FF0  26 00       	ld	h,0x00
3368  0FF2  01 00 00    	ld	bc,_bullet_colint
3369  0FF5  09          	add	hl,bc
3370  0FF6  7E          	ld	a,(hl)
3371  0FF7  3C          	inc	a
3372  0FF8  77          	ld	(hl),a
3373  0FF9  4D          	ld	c,l
3374  0FFA  44          	ld	b,h
3375  0FFB  21 00 00    	ld	hl,_bullet
3376  0FFE  DD 77 FD    	ld	(ix-3),a
3377  1001  3E 00       	ld	a, +((_bullet_frames) & 0xFF)
3378  1003  86          	add	a, (hl)
3379  1004  5F          	ld	e, a
3380  1005  3E 00       	ld	a, +((_bullet_frames) / 256)
3381  1007  CE 00       	adc	a,0x00
3382  1009  57          	ld	d, a
3383  100A  1A          	ld	a, (de)
3384  100B  5F          	ld	e, a
3385  100C  DD 7E FD    	ld	a,(ix-3)
3386  100F  93          	sub	a, e
3387  1010  38 76       	jr	C,l_spr_play_bullets_00121
3388  1012  5E          	ld	e,(hl)
3389  1013  16 00       	ld	d,0x00
3390  1015  21 00 00    	ld	hl,_bullet_col
3391  1018  19          	add	hl,de
3392  1019  7E          	ld	a,(hl)
3393  101A  3C          	inc	a
3394  101B  DD 77 FC    	ld	(ix-4),a
3395  101E  AF          	xor	a, a
3396  101F  02          	ld	(bc), a
3397  1020  DD 7E FC    	ld	a,(ix-4)
3398  1023  E6 01       	and	a,0x01
3399  1025  3D          	dec	a
3400  1026  20 60       	jr	NZ,l_spr_play_bullets_00121
3401  1028  DD 7E FC    	ld	a,(ix-4)
3402  102B  3C          	inc	a
3403  102C  32 00 00    	ld	(_s_col0),a
3404  102F  18 57       	jr	l_spr_play_bullets_00121
3405  1031              l_spr_play_bullets_00120:
3406  1031  3E 00       	ld	a, +((_bullet_colint) & 0xFF)
3407  1033  21 00 00    	ld	hl,_bullet
3408  1036  86          	add	a, (hl)
3409  1037  DD 77 FE    	ld	(ix-2),a
3410  103A  6F          	ld	l,a
3411  103B  3E 00       	ld	a,+((_bullet_colint) / 256)
3412  103D  CE 00       	adc	a,0x00
3413  103F  DD 77 FF    	ld	(ix-1),a
3414  1042  67          	ld	h,a
3415  1043  4E          	ld	c, (hl)
3416  1044  0D          	dec	c
3417  1045  DD 6E FE    	ld	l,(ix-2)
3418  1048  DD 66 FF    	ld	h,(ix-1)
3419  104B  71          	ld	(hl), c
3420  104C  2A 00 00    	ld	hl,(_bullet)
3421  104F  26 00       	ld	h,0x00
3422  1051  01 00 00    	ld	bc,_bullet_colint
3423  1054  09          	add	hl,bc
3424  1055  7E          	ld	a,(hl)
3425  1056  3C          	inc	a
3426  1057  20 2F       	jr	NZ,l_spr_play_bullets_00121
3427  1059  4D          	ld	c,l
3428  105A  44          	ld	b,h
3429  105B  2A 00 00    	ld	hl,(_bullet)
3430  105E  26 00       	ld	h,0x00
3431  1060  11 00 00    	ld	de,_bullet_col
3432  1063  19          	add	hl,de
3433  1064  7E          	ld	a,(hl)
3434  1065  C6 FF       	add	a,0xff
3435  1067  21 00 00    	ld	hl,_bullet
3436  106A  DD 77 FC    	ld	(ix-4),a
3437  106D  5E          	ld	e,(hl)
3438  106E  16 00       	ld	d,0x00
3439  1070  21 00 00    	ld	hl,_bullet_frames
3440  1073  19          	add	hl,de
3441  1074  7E          	ld	a,(hl)
3442  1075  C6 FF       	add	a,0xff
3443  1077  02          	ld	(bc), a
3444  1078  DD 7E FC    	ld	a,(ix-4)
3445  107B  E6 01       	and	a,0x01
3446  107D  3D          	dec	a
3447  107E  20 08       	jr	NZ,l_spr_play_bullets_00121
3448  1080  DD 7E FC    	ld	a,(ix-4)
3449  1083  C6 FF       	add	a,0xff
3450  1085  32 00 00    	ld	(_s_col0),a
3451  1088              l_spr_play_bullets_00121:
3452  1088  2A 00 00    	ld	hl,(_bullet)
3453  108B  26 00       	ld	h,0x00
3454  108D  01 00 00    	ld	bc,_bullet_max
3455  1090  09          	add	hl,bc
3456  1091  7E          	ld	a,(hl)
3457  1092  B7          	or	a,a
3458  1093  28 40       	jr	Z,l_spr_play_bullets_00125
3459  1095  21 00 00    	ld	hl,_bullet
3460  1098  DD 4E FC    	ld	c,(ix-4)
3461  109B  06 00       	ld	b,0x00
3462  109D  5E          	ld	e,(hl)
3463  109E  50          	ld	d,b
3464  109F  21 00 00    	ld	hl,_bullet_col0
3465  10A2  19          	add	hl,de
3466  10A3  5E          	ld	e, (hl)
3467  10A4  16 00       	ld	d,0x00
3468  10A6  79          	ld	a, c
3469  10A7  93          	sub	a, e
3470  10A8  6F          	ld	l, a
3471  10A9  78          	ld	a, b
3472  10AA  9A          	sbc	a, d
3473  10AB  67          	ld	h, a
3474  10AC  CD 00 00    	call	_abs_fastcall
3475  10AF  7D          	ld	a,l
3476  10B0  32 00 00    	ld	(_tmp0),a
3477  10B3  2A 00 00    	ld	hl,(_bullet)
3478  10B6  26 00       	ld	h,0x00
3479  10B8  01 00 00    	ld	bc,_bullet_max
3480  10BB  09          	add	hl,bc
3481  10BC  7E          	ld	a,(hl)
3482  10BD  21 00 00    	ld	hl,_tmp0
3483  10C0  96          	sub	a, (hl)
3484  10C1  30 12       	jr	NC,l_spr_play_bullets_00125
3485  10C3  21 00 00    	ld	hl,_bullet_count
3486  10C6  35          	dec	(hl)
3487  10C7  2A 00 00    	ld	hl,(_bullet)
3488  10CA  26 00       	ld	h,0x00
3489  10CC  01 00 00    	ld	bc,_bullet_col
3490  10CF  09          	add	hl,bc
3491  10D0  36 FF       	ld	(hl),0xff
3492  10D2  C3 2A 14    	jp	l_spr_play_bullets_00174
3493  10D5              l_spr_play_bullets_00125:
3494  10D5  2A 00 00    	ld	hl,(_bullet)
3495  10D8  26 00       	ld	h,0x00
3496  10DA  01 00 00    	ld	bc,_bullet_col
3497  10DD  09          	add	hl,bc
3498  10DE  DD 7E FC    	ld	a,(ix-4)
3499  10E1  D6 1E       	sub	a,0x1e
3500  10E3  4D          	ld	c,l
3501  10E4  44          	ld	b,h
3502  10E5  38 0A       	jr	C,l_spr_play_bullets_00127
3503  10E7  21 00 00    	ld	hl,_bullet_count
3504  10EA  35          	dec	(hl)
3505  10EB  3E FF       	ld	a,0xff
3506  10ED  02          	ld	(bc), a
3507  10EE  C3 2A 14    	jp	l_spr_play_bullets_00174
3508  10F1              l_spr_play_bullets_00127:
3509  10F1  0A          	ld	a, (bc)
3510  10F2  4F          	ld	c, a
3511  10F3  DD 7E FC    	ld	a,(ix-4)
3512  10F6  91          	sub	a, c
3513  10F7  CA EF 13    	jp	Z,l_spr_play_bullets_00170
3514  10FA  3A 00 00    	ld	a,(_s_lin0)
3515  10FD  C6 08       	add	a,0x08
3516  10FF  4F          	ld	c, a
3517  1100  3A 00 00    	ld	a, (_s_col0)
3518  1103  47          	ld	b,a
3519  1104  C5          	push	bc
3520  1105  CD 00 00    	call	_spr_calc_index
3521  1108  F1          	pop	af
3522  1109  22 00 00    	ld	(_index0),hl
3523  110C  11 00 00    	ld	de,_scr_map
3524  110F  19          	add	hl,de
3525  1110  7E          	ld	a,(hl)
3526  1111  EB          	ex	de,hl
3527  1112  4F          	ld	c,a
3528  1113  D6 4D       	sub	a,0x4d
3529  1115  20 4F       	jr	NZ,l_spr_play_bullets_00129
3530  1117  3A 00 00    	ld	a,(_bullet)
3531  111A  D6 07       	sub	a,0x07
3532  111C  20 48       	jr	NZ,l_spr_play_bullets_00129
3533  111E  2A 00 00    	ld	hl,(_index0)
3534  1121  D5          	push	de
3535  1122  E5          	push	hl
3536  1123  CD 00 00    	call	_game_match_back
3537  1126  F1          	pop	af
3538  1127  D1          	pop	de
3539  1128  7D          	ld	a,l
3540  1129  12          	ld	(de), a
3541  112A  2A 00 00    	ld	hl,(_index0)
3542  112D  CD 00 00    	call	_game_obj_set
3543  1130  2A 00 00    	ld	hl,(_bullet)
3544  1133  26 00       	ld	h,0x00
3545  1135  01 00 00    	ld	bc,_bullet_lin
3546  1138  09          	add	hl,bc
3547  1139  ED 5B 00 00 	ld	de,(_index0)
3548  113D  3E 04       	ld	a,0x04
3549  113F  4D          	ld	c,l
3550  1140  44          	ld	b,h
3551  1141              l_spr_play_bullets_00380:
3552  1141  CB 3A       	srl	d
3553  1143  CB 1B       	rr	e
3554  1145  3D          	dec	a
3555  1146  20 F9       	jr	NZ,l_spr_play_bullets_00380
3556  1148  7B          	ld	a, e
3557  1149  07          	rlca
3558  114A  07          	rlca
3559  114B  07          	rlca
3560  114C  07          	rlca
3561  114D  E6 F0       	and	a,0xf0
3562  114F  02          	ld	(bc), a
3563  1150  2A 00 00    	ld	hl,(_bullet)
3564  1153  26 00       	ld	h,0x00
3565  1155  01 00 00    	ld	bc,_bullet_col
3566  1158  09          	add	hl,bc
3567  1159  3A 00 00    	ld	a,(_index0)
3568  115C  E6 0F       	and	a,0x0f
3569  115E  87          	add	a,a
3570  115F  77          	ld	(hl),a
3571  1160  CD 3A 14    	call	_spr_explode_bullet
3572  1163  C3 2A 14    	jp	l_spr_play_bullets_00174
3573  1166              l_spr_play_bullets_00129:
3574  1166  79          	ld	a, c
3575  1167  D6 48       	sub	a,0x48
3576  1169  38 09       	jr	C,l_spr_play_bullets_00132
3577  116B  0C          	inc	c
3578  116C  28 06       	jr	Z,l_spr_play_bullets_00132
3579  116E  CD 3A 14    	call	_spr_explode_bullet
3580  1171  C3 2A 14    	jp	l_spr_play_bullets_00174
3581  1174              l_spr_play_bullets_00132:
3582  1174  2A 00 00    	ld	hl,(_bullet)
3583  1177  26 00       	ld	h,0x00
3584  1179  01 00 00    	ld	bc,_bullet_col
3585  117C  09          	add	hl,bc
3586  117D  4D          	ld	c,l
3587  117E  44          	ld	b,h
3588  117F  21 00 00    	ld	hl,_bullet
3589  1182  DD 7E FC    	ld	a,(ix-4)
3590  1185  02          	ld	(bc), a
3591  1186  4E          	ld	c,(hl)
3592  1187  06 00       	ld	b,0x00
3593  1189  21 00 00    	ld	hl,_bullet_class
3594  118C  09          	add	hl,bc
3595  118D  7E          	ld	a,(hl)
3596  118E  D6 04       	sub	a,0x04
3597  1190  20 17       	jr	NZ,l_spr_play_bullets_00135
3598  1192  21 00 00    	ld	hl,_s_lin0
3599  1195  7E          	ld	a, (hl)
3600  1196  C6 F0       	add	a,0xf0
3601  1198  4F          	ld	c, a
3602  1199  7E          	ld	a, (hl)
3603  119A  C6 10       	add	a,0x10
3604  119C  47          	ld	b, a
3605  119D  DD 35 FC    	dec	(ix-4)
3606  11A0  DD 7E FC    	ld	a,(ix-4)
3607  11A3  3C          	inc	a
3608  11A4  DD 77 FB    	ld	(ix-5),a
3609  11A7  18 12       	jr	l_spr_play_bullets_00136
3610  11A9              l_spr_play_bullets_00135:
3611  11A9  21 00 00    	ld	hl,_s_lin0
3612  11AC  7E          	ld	a, (hl)
3613  11AD  C6 F8       	add	a,0xf8
3614  11AF  4F          	ld	c, a
3615  11B0  7E          	ld	a, (hl)
3616  11B1  C6 08       	add	a,0x08
3617  11B3  47          	ld	b, a
3618  11B4  DD 7E FC    	ld	a,(ix-4)
3619  11B7  3C          	inc	a
3620  11B8  DD 77 FB    	ld	(ix-5),a
3621  11BB              l_spr_play_bullets_00136:
3622  11BB  3A 00 00    	ld	a,(_bullet)
3623  11BE  D6 07       	sub	a,0x07
3624  11C0  C2 B3 13    	jp	NZ,l_spr_play_bullets_00166
3625  11C3  3A 07 00    	ld	a,(_bullet_col + 0x0007)
3626  11C6  3C          	inc	a
3627  11C7  CA B3 13    	jp	Z,l_spr_play_bullets_00166
3628  11CA  21 00 00    	ld	hl,_tmp0
3629  11CD  36 00       	ld	(hl),0x00
3630  11CF              l_spr_play_bullets_00176:
3631  11CF  2A 00 00    	ld	hl,(_tmp0)
3632  11D2  26 00       	ld	h,0x00
3633  11D4  11 00 00    	ld	de,_class
3634  11D7  19          	add	hl,de
3635  11D8  7E          	ld	a,(hl)
3636  11D9  B7          	or	a,a
3637  11DA  CA 85 12    	jp	Z,l_spr_play_bullets_00177
3638  11DD  2A 00 00    	ld	hl,(_tmp0)
3639  11E0  26 00       	ld	h,0x00
3640  11E2  11 00 00    	ld	de,_col
3641  11E5  19          	add	hl,de
3642  11E6  7E          	ld	a,(hl)
3643  11E7  21 00 00    	ld	hl,_tmp0
3644  11EA  DD 77 FE    	ld	(ix-2),a
3645  11ED  DD 96 FC    	sub	a,(ix-4)
3646  11F0  DA 85 12    	jp	C, l_spr_play_bullets_00177
3647  11F3  DD 7E FB    	ld	a,(ix-5)
3648  11F6  DD 96 FE    	sub	a,(ix-2)
3649  11F9  DA 85 12    	jp	C, l_spr_play_bullets_00177
3650  11FC  5E          	ld	e,(hl)
3651  11FD  16 00       	ld	d,0x00
3652  11FF  21 00 00    	ld	hl,_lin
3653  1202  19          	add	hl,de
3654  1203  7E          	ld	a,(hl)
3655  1204  5F          	ld	e,a
3656  1205  91          	sub	a, c
3657  1206  DA 85 12    	jp	C, l_spr_play_bullets_00177
3658  1209  78          	ld	a, b
3659  120A  93          	sub	a, e
3660  120B  38 78       	jr	C,l_spr_play_bullets_00177
3661  120D  21 00 00    	ld	hl,_s_lin0
3662  1210  73          	ld	(hl), e
3663  1211  DD 7E FE    	ld	a,(ix-2)
3664  1214  32 00 00    	ld	(_s_col0),a
3665  1217  C5          	push	bc
3666  1218  CD 00 00    	call	_rand
3667  121B  11 06 00    	ld	de,0x0006
3668  121E  D5          	push	de
3669  121F  E5          	push	hl
3670  1220  CD 00 00    	call	__modsint_callee
3671  1223  CD 00 00    	call	_player_score_add
3672  1226  C1          	pop	bc
3673  1227  2A 00 00    	ld	hl,(_tmp0)
3674  122A  26 00       	ld	h,0x00
3675  122C  29          	add	hl,hl
3676  122D  11 00 00    	ld	de,_game_respawn_time
3677  1230  19          	add	hl, de
3678  1231  DD 75 FE    	ld	(ix-2),l
3679  1234  DD 74 FF    	ld	(ix-1),h
3680  1237  ED 5B 00 00 	ld	de,(_curr_time)
3681  123B  73          	ld	(hl), e
3682  123C  23          	inc	hl
3683  123D  72          	ld	(hl), d
3684  123E  2A 00 00    	ld	hl,(_tmp0)
3685  1241  C5          	push	bc
3686  1242  CD 8F 08    	call	_spr_destroy
3687  1245  C1          	pop	bc
3688  1246  2A 00 00    	ld	hl,(_tmp0)
3689  1249  26 00       	ld	h,0x00
3690  124B  11 00 00    	ld	de,_bullet_col
3691  124E  19          	add	hl,de
3692  124F  7E          	ld	a,(hl)
3693  1250  21 00 00    	ld	hl,_tmp0
3694  1253  DD 77 FE    	ld	(ix-2),a
3695  1256  3C          	inc	a
3696  1257  28 16       	jr	Z,l_spr_play_bullets_00138
3697  1259  5E          	ld	e,(hl)
3698  125A  16 00       	ld	d,0x00
3699  125C  21 00 00    	ld	hl,_bullet_lin
3700  125F  19          	add	hl,de
3701  1260  7E          	ld	a,(hl)
3702  1261  32 00 00    	ld	(_s_lin0),a
3703  1264  DD 7E FE    	ld	a,(ix-2)
3704  1267  32 00 00    	ld	(_s_col0),a
3705  126A  C5          	push	bc
3706  126B  CD B1 0A    	call	_spr_back_repaint
3707  126E  C1          	pop	bc
3708  126F              l_spr_play_bullets_00138:
3709  126F  3A 00 00    	ld	a,(_s_col0)
3710  1272  32 07 00    	ld	((_bullet_col + 0x0007)),a
3711  1275  C5          	push	bc
3712  1276  CD 3A 14    	call	_spr_explode_bullet
3713  1279  C1          	pop	bc
3714  127A  21 00 00    	ld	hl,_ay_effect_02
3715  127D  CD 00 00    	call	_ay_fx_play
3716  1280  21 00 00    	ld	hl,_tmp0
3717  1283  36 07       	ld	(hl),0x07
3718  1285              l_spr_play_bullets_00177:
3719  1285  21 00 00    	ld	hl,_tmp0
3720  1288  7E          	ld	a,(hl)
3721  1289  3C          	inc	a
3722  128A  77          	ld	(hl),a
3723  128B  D6 07       	sub	a,0x07
3724  128D  DA CF 11    	jp	C, l_spr_play_bullets_00176
3725  1290  3A 00 00    	ld	a,(_game_boss)
3726  1293  B7          	or	a, a
3727  1294  CA EF 13    	jp	Z, l_spr_play_bullets_00170
3728  1297  21 00 00    	ld	hl,_boss_lin
3729  129A  7E          	ld	a, (hl)
3730  129B  91          	sub	a, c
3731  129C  38 04       	jr	C,l_spr_play_bullets_00155
3732  129E  78          	ld	a, b
3733  129F  96          	sub	a, (hl)
3734  12A0  30 26       	jr	NC,l_spr_play_bullets_00156
3735  12A2              l_spr_play_bullets_00155:
3736  12A2  3A 00 00    	ld	a,(_boss_lin)
3737  12A5  5F          	ld	e,a
3738  12A6  16 00       	ld	d,0x00
3739  12A8  21 10 00    	ld	hl,0x0010
3740  12AB  19          	add	hl, de
3741  12AC  1E 00       	ld	e,0x00
3742  12AE  7D          	ld	a, l
3743  12AF  91          	sub	a, c
3744  12B0  7C          	ld	a, h
3745  12B1  9B          	sbc	a, e
3746  12B2  E2 B7 12    	jp	PO, l_spr_play_bullets_00390
3747  12B5  EE 80       	xor	a,0x80
3748  12B7              l_spr_play_bullets_00390:
3749  12B7  FA EF 13    	jp	M, l_spr_play_bullets_00170
3750  12BA  0E 00       	ld	c,0x00
3751  12BC  78          	ld	a, b
3752  12BD  95          	sub	a, l
3753  12BE  79          	ld	a, c
3754  12BF  9C          	sbc	a, h
3755  12C0  E2 C5 12    	jp	PO, l_spr_play_bullets_00391
3756  12C3  EE 80       	xor	a,0x80
3757  12C5              l_spr_play_bullets_00391:
3758  12C5  FA EF 13    	jp	M, l_spr_play_bullets_00170
3759  12C8              l_spr_play_bullets_00156:
3760  12C8  21 00 00    	ld	hl,_boss_col
3761  12CB  7E          	ld	a, (hl)
3762  12CC  DD 96 FC    	sub	a,(ix-4)
3763  12CF  DA EF 13    	jp	C, l_spr_play_bullets_00170
3764  12D2  DD 7E FB    	ld	a,(ix-5)
3765  12D5  96          	sub	a, (hl)
3766  12D6  DA EF 13    	jp	C, l_spr_play_bullets_00170
3767  12D9  CD 3A 14    	call	_spr_explode_bullet
3768  12DC  21 00 00    	ld	hl,_game_boss_hit
3769  12DF  35          	dec	(hl)
3770  12E0  CD 00 00    	call	_game_update_stats
3771  12E3  3A 00 00    	ld	a,(_game_boss_hit)
3772  12E6  B7          	or	a, a
3773  12E7  C2 EF 13    	jp	NZ, l_spr_play_bullets_00170
3774  12EA  21 00 00    	ld	hl,_game_boss
3775  12ED  36 00       	ld	(hl),0x00
3776  12EF  21 00 00    	ld	hl,_game_boss_alive
3777  12F2  36 00       	ld	(hl),0x00
3778  12F4  3A 00 00    	ld	a,(_boss_col)
3779  12F7  21 00 00    	ld	hl,0x0000
3780  12FA  E5          	push	hl
3781  12FB  21 87 03    	ld	hl,0x0387
3782  12FE  E5          	push	hl
3783  12FF  F5          	push	af
3784  1300  33          	inc	sp
3785  1301  3A 00 00    	ld	a,(_boss_lin)
3786  1304  F5          	push	af
3787  1305  33          	inc	sp
3788  1306  CD 5E 0C    	call	_spr_add_anim
3789  1309  F1          	pop	af
3790  130A  F1          	pop	af
3791  130B  F1          	pop	af
3792  130C  21 00 00    	ld	hl,_boss_col
3793  130F  46          	ld	b, (hl)
3794  1310  04          	inc	b
3795  1311  04          	inc	b
3796  1312  21 00 00    	ld	hl,0x0000
3797  1315  E5          	push	hl
3798  1316  21 87 03    	ld	hl,0x0387
3799  1319  E5          	push	hl
3800  131A  C5          	push	bc
3801  131B  33          	inc	sp
3802  131C  3A 00 00    	ld	a,(_boss_lin)
3803  131F  F5          	push	af
3804  1320  33          	inc	sp
3805  1321  CD 5E 0C    	call	_spr_add_anim
3806  1324  F1          	pop	af
3807  1325  F1          	pop	af
3808  1326  F1          	pop	af
3809  1327  3A 00 00    	ld	a,(_boss_lin)
3810  132A  C6 10       	add	a,0x10
3811  132C  47          	ld	b, a
3812  132D  3A 00 00    	ld	a,(_boss_col)
3813  1330  21 00 00    	ld	hl,0x0000
3814  1333  E5          	push	hl
3815  1334  21 87 03    	ld	hl,0x0387
3816  1337  E5          	push	hl
3817  1338  48          	ld	c,b
3818  1339  47          	ld	b,a
3819  133A  C5          	push	bc
3820  133B  CD 5E 0C    	call	_spr_add_anim
3821  133E  F1          	pop	af
3822  133F  F1          	pop	af
3823  1340  F1          	pop	af
3824  1341  21 00 00    	ld	hl,_boss_col
3825  1344  46          	ld	b, (hl)
3826  1345  04          	inc	b
3827  1346  04          	inc	b
3828  1347  3A 00 00    	ld	a,(_boss_lin)
3829  134A  C6 10       	add	a,0x10
3830  134C  57          	ld	d, a
3831  134D  21 00 00    	ld	hl,0x0000
3832  1350  E5          	push	hl
3833  1351  21 87 03    	ld	hl,0x0387
3834  1354  E5          	push	hl
3835  1355  4A          	ld	c, d
3836  1356  C5          	push	bc
3837  1357  CD 5E 0C    	call	_spr_add_anim
3838  135A  F1          	pop	af
3839  135B  F1          	pop	af
3840  135C  F1          	pop	af
3841  135D  21 00 00    	ld	hl,_tmp0
3842  1360  36 00       	ld	(hl),0x00
3843  1362              l_spr_play_bullets_00178:
3844  1362  2A 00 00    	ld	hl,(_tmp0)
3845  1365  26 00       	ld	h,0x00
3846  1367  01 00 00    	ld	bc,_bullet_col
3847  136A  09          	add	hl,bc
3848  136B  7E          	ld	a,(hl)
3849  136C  4F          	ld	c,a
3850  136D  3C          	inc	a
3851  136E  28 15       	jr	Z,l_spr_play_bullets_00147
3852  1370  3A 00 00    	ld	a,(_tmp0)
3853  1373  5F          	ld	e,a
3854  1374  16 00       	ld	d,0x00
3855  1376  21 00 00    	ld	hl,_bullet_lin
3856  1379  19          	add	hl,de
3857  137A  7E          	ld	a,(hl)
3858  137B  32 00 00    	ld	(_s_lin0),a
3859  137E  21 00 00    	ld	hl,_s_col0
3860  1381  71          	ld	(hl), c
3861  1382  CD B1 0A    	call	_spr_back_repaint
3862  1385              l_spr_play_bullets_00147:
3863  1385  2A 00 00    	ld	hl,(_tmp0)
3864  1388  26 00       	ld	h,0x00
3865  138A  01 00 00    	ld	bc,_bullet_col
3866  138D  09          	add	hl,bc
3867  138E  36 FF       	ld	(hl),0xff
3868  1390  2A 00 00    	ld	hl,(_tmp0)
3869  1393  CD 8F 08    	call	_spr_destroy
3870  1396  2A 00 00    	ld	hl,(_tmp0)
3871  1399  26 00       	ld	h,0x00
3872  139B  29          	add	hl, hl
3873  139C  11 00 00    	ld	de,_game_respawn_time
3874  139F  19          	add	hl, de
3875  13A0  AF          	xor	a, a
3876  13A1  77          	ld	(hl), a
3877  13A2  23          	inc	hl
3878  13A3  77          	ld	(hl), a
3879  13A4  21 00 00    	ld	hl,_tmp0
3880  13A7  7E          	ld	a,(hl)
3881  13A8  3C          	inc	a
3882  13A9  77          	ld	(hl),a
3883  13AA  D6 07       	sub	a,0x07
3884  13AC  38 B4       	jr	C,l_spr_play_bullets_00178
3885  13AE  CD 00 00    	call	_game_boss_clear
3886  13B1  18 3C       	jr	l_spr_play_bullets_00170
3887  13B3              l_spr_play_bullets_00166:
3888  13B3  3A 07 00    	ld	a,(_col + 7)
3889  13B6  5F          	ld	e,a
3890  13B7  DD 96 FC    	sub	a,(ix-4)
3891  13BA  38 33       	jr	C,l_spr_play_bullets_00170
3892  13BC  DD 7E FB    	ld	a,(ix-5)
3893  13BF  93          	sub	a, e
3894  13C0  38 2D       	jr	C,l_spr_play_bullets_00170
3895  13C2  3A 07 00    	ld	a,(_lin + 7)
3896  13C5  5F          	ld	e,a
3897  13C6  91          	sub	a, c
3898  13C7  38 26       	jr	C,l_spr_play_bullets_00170
3899  13C9  78          	ld	a, b
3900  13CA  93          	sub	a, e
3901  13CB  38 22       	jr	C,l_spr_play_bullets_00170
3902  13CD  21 00 00    	ld	hl,_ay_effect_06
3903  13D0  CD 00 00    	call	_ay_fx_play
3904  13D3  2E 03       	ld	l,0x03
3905  13D5  CD 00 00    	call	_zx_border_fastcall
3906  13D8  2E 0A       	ld	l,0x0a
3907  13DA  CD 00 00    	call	_player_hit
3908  13DD  2A 00 00    	ld	hl,(_bullet)
3909  13E0  26 00       	ld	h,0x00
3910  13E2  01 00 00    	ld	bc,_bullet_col
3911  13E5  09          	add	hl,bc
3912  13E6  3A 00 00    	ld	a,(_s_col0)
3913  13E9  77          	ld	(hl),a
3914  13EA  CD 3A 14    	call	_spr_explode_bullet
3915  13ED  18 46       	jr	l_spr_play_bullets_00181
3916  13EF              l_spr_play_bullets_00170:
3917  13EF  2A 00 00    	ld	hl,(_bullet)
3918  13F2  26 00       	ld	h,0x00
3919  13F4  01 00 00    	ld	bc,_bullet_col
3920  13F7  09          	add	hl,bc
3921  13F8  7E          	ld	a,(hl)
3922  13F9  3C          	inc	a
3923  13FA  28 2E       	jr	Z,l_spr_play_bullets_00174
3924  13FC  DD 7E FC    	ld	a,(ix-4)
3925  13FF  D6 20       	sub	a,0x20
3926  1401  30 27       	jr	NC,l_spr_play_bullets_00174
3927  1403  F3          	di
3928  1404  2A 00 00    	ld	hl,(_bullet)
3929  1407  26 00       	ld	h,0x00
3930  1409  01 00 00    	ld	bc,_bullet_tile
3931  140C  09          	add	hl,bc
3932  140D  4E          	ld	c, (hl)
3933  140E  3A 00 00    	ld	a,(_bullet)
3934  1411  5F          	ld	e,a
3935  1412  16 00       	ld	d,0x00
3936  1414  21 00 00    	ld	hl,_bullet_colint
3937  1417  19          	add	hl,de
3938  1418  7E          	ld	a,(hl)
3939  1419  81          	add	a,c
3940  141A  47          	ld	b, a
3941  141B  DD 7E FC    	ld	a,(ix-4)
3942  141E  F5          	push	af
3943  141F  33          	inc	sp
3944  1420  3A 00 00    	ld	a,(_s_lin0)
3945  1423  48          	ld	c,b
3946  1424  47          	ld	b,a
3947  1425  C5          	push	bc
3948  1426  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
3949  1429  FB          	ei
3950  142A              l_spr_play_bullets_00174:
3951  142A  21 00 00    	ld	hl,_bullet
3952  142D  7E          	ld	a,(hl)
3953  142E  3C          	inc	a
3954  142F  77          	ld	(hl),a
3955  1430  D6 08       	sub	a,0x08
3956  1432  DA 6E 0F    	jp	C, l_spr_play_bullets_00180
3957  1435              l_spr_play_bullets_00181:
3958  1435  DD F9       	ld	sp, ix
3959  1437  DD E1       	pop	ix
3960  1439  C9          	ret
3961  143A              	SECTION code_compiler
3962  143A              ;	---------------------------------
3963  143A              ; Function spr_explode_bullet
3964  143A              ; ---------------------------------
3965  143A              _spr_explode_bullet:
3966  143A  2A 00 00    	ld	hl,(_bullet)
3967  143D  26 00       	ld	h,0x00
3968  143F  01 00 00    	ld	bc,_bullet_col
3969  1442  09          	add	hl,bc
3970  1443  56          	ld	d, (hl)
3971  1444  2A 00 00    	ld	hl,(_bullet)
3972  1447  26 00       	ld	h,0x00
3973  1449  01 00 00    	ld	bc,_bullet_lin
3974  144C  09          	add	hl,bc
3975  144D  46          	ld	b, (hl)
3976  144E  21 00 00    	ld	hl,0x0000
3977  1451  E5          	push	hl
3978  1452  21 87 03    	ld	hl,0x0387
3979  1455  E5          	push	hl
3980  1456  58          	ld	e,b
3981  1457  D5          	push	de
3982  1458  CD 5E 0C    	call	_spr_add_anim
3983  145B  F1          	pop	af
3984  145C  F1          	pop	af
3985  145D  F1          	pop	af
3986  145E  21 00 00    	ld	hl,_bullet_count
3987  1461  35          	dec	(hl)
3988  1462  2A 00 00    	ld	hl,(_bullet)
3989  1465  26 00       	ld	h,0x00
3990  1467  01 00 00    	ld	bc,_bullet_col
3991  146A  09          	add	hl,bc
3992  146B  36 FF       	ld	(hl),0xff
3993  146D  21 00 00    	ld	hl,_ay_effect_11
3994  1470  C3 00 00    	jp  _ay_fx_play
3995  1473              	SECTION code_compiler
3996  1473              ;	---------------------------------
3997  1473              ; Function spr_turn_horizontal
3998  1473              ; ---------------------------------
3999  1473              _spr_turn_horizontal:
4000  1473  21 00 00    	ld	hl,_s_state
4001  1476  CB 56       	bit	2, (hl)
4002  1478  28 0B       	jr	Z,l_spr_turn_horizontal_00102
4003  147A  21 00 00    	ld	hl,_s_state
4004  147D  7E          	ld	a,(hl)
4005  147E  F6 08       	or	a,0x08
4006  1480  E6 FB       	and	a,0xfb
4007  1482  77          	ld	(hl),a
4008  1483  18 09       	jr	l_spr_turn_horizontal_00103
4009  1485              l_spr_turn_horizontal_00102:
4010  1485  21 00 00    	ld	hl,_s_state
4011  1488  7E          	ld	a,(hl)
4012  1489  E6 F7       	and	a,0xf7
4013  148B  F6 04       	or	a,0x04
4014  148D  77          	ld	(hl),a
4015  148E              l_spr_turn_horizontal_00103:
4016  148E  2A 00 00    	ld	hl,(_sprite)
4017  1491  26 00       	ld	h,0x00
4018  1493  01 00 00    	ld	bc,_state
4019  1496  09          	add	hl,bc
4020  1497  3A 00 00    	ld	a,(_s_state)
4021  149A  77          	ld	(hl),a
4022  149B  2A 00 00    	ld	hl,(_sprite)
4023  149E  26 00       	ld	h,0x00
4024  14A0  01 00 00    	ld	bc,_tile
4025  14A3  09          	add	hl,bc
4026  14A4  E5          	push	hl
4027  14A5  2A 00 00    	ld	hl,(_sprite)
4028  14A8  CD 24 09    	call	_spr_tile
4029  14AB  C1          	pop	bc
4030  14AC  7D          	ld	a,l
4031  14AD  02          	ld	(bc), a
4032  14AE  C9          	ret
4033  14AF              	SECTION code_compiler
4034  14AF              ;	---------------------------------
4035  14AF              ; Function spr_btile_paint_back
4036  14AF              ; ---------------------------------
4037  14AF              _spr_btile_paint_back:
4038  14AF  21 20 00    	ld	hl,0x0020
4039  14B2  22 00 00    	ld	(_tmp_ui),hl
4040  14B5  21 00 00    	ld	hl,_map_paper
4041  14B8  7E          	ld	a, (hl)
4042  14B9  0F          	rrca
4043  14BA  0F          	rrca
4044  14BB  0F          	rrca
4045  14BC  E6 1F       	and	a,0x1f
4046  14BE  B6          	or	a, (hl)
4047  14BF  F6 40       	or	a,0x40
4048  14C1  32 00 00    	ld	(_map_paper_clr),a
4049  14C4              l_spr_btile_paint_back_00106:
4050  14C4  21 00 00    	ld	hl,_tmp_ui
4051  14C7  7E          	ld	a, (hl)
4052  14C8  D6 20       	sub	a,0x20
4053  14CA  23          	inc	hl
4054  14CB  7E          	ld	a, (hl)
4055  14CC  DE 2D       	sbc	a,0x2d
4056  14CE  30 4C       	jr	NC,l_spr_btile_paint_back_00108
4057  14D0  21 00 00    	ld	hl,_tmp0
4058  14D3  36 00       	ld	(hl),0x00
4059  14D5              l_spr_btile_paint_back_00103:
4060  14D5  3A 00 00    	ld	a,(_tmp0)
4061  14D8  D6 10       	sub	a,0x10
4062  14DA  30 34       	jr	NC,l_spr_btile_paint_back_00105
4063  14DC  01 00 00    	ld	bc,_btiles
4064  14DF  2A 00 00    	ld	hl,(_tmp_ui)
4065  14E2  09          	add	hl,bc
4066  14E3  7D          	ld	a,l
4067  14E4  44          	ld	b,h
4068  14E5  21 00 00    	ld	hl,_tmp0
4069  14E8  86          	add	a, (hl)
4070  14E9  4F          	ld	c, a
4071  14EA  78          	ld	a, b
4072  14EB  CE 00       	adc	a,0x00
4073  14ED  47          	ld	b, a
4074  14EE  0A          	ld	a, (bc)
4075  14EF  32 00 00    	ld	(_tmp),a
4076  14F2  E6 38       	and	a,0x38
4077  14F4  5F          	ld	e, a
4078  14F5  3A 00 00    	ld	a,(_map_paper_last)
4079  14F8  93          	sub	a, e
4080  14F9  20 0F       	jr	NZ,l_spr_btile_paint_back_00102
4081  14FB  21 00 00    	ld	hl,_tmp
4082  14FE  7E          	ld	a, (hl)
4083  14FF  E6 C7       	and	a,0xc7
4084  1501  77          	ld	(hl),a
4085  1502  21 00 00    	ld	hl,_map_paper
4086  1505  B6          	or	a, (hl)
4087  1506  32 00 00    	ld	(_tmp),a
4088  1509  02          	ld	(bc), a
4089  150A              l_spr_btile_paint_back_00102:
4090  150A  21 00 00    	ld	hl,_tmp0
4091  150D  34          	inc	(hl)
4092  150E  18 C5       	jr	l_spr_btile_paint_back_00103
4093  1510              l_spr_btile_paint_back_00105:
4094  1510  2A 00 00    	ld	hl,(_tmp_ui)
4095  1513  11 30 00    	ld	de,0x0030
4096  1516  19          	add	hl,de
4097  1517  22 00 00    	ld	(_tmp_ui),hl
4098  151A  18 A8       	jr	l_spr_btile_paint_back_00106
4099  151C              l_spr_btile_paint_back_00108:
4100  151C  C3 00 00    	jp  _game_attribs
4101  151F              	SECTION IGNORE
4102  0000              
