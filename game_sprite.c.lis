1     0000              MODULE game_sprite_c
2     0000              
3     0000              ;--------------------------------------------------------
4     0000              ; File Created by SDCC : free open source ANSI-C Compiler
5     0000              ; Version 3.6.5 #9958 (Mac OS X i386)
6     0000              ;--------------------------------------------------------
7     0000              ; Processed by Z88DK
8     0000              ;--------------------------------------------------------
9     0000              
10    0000              	EXTERN __divschar
11    0000              	EXTERN __divschar_callee
12    0000              	EXTERN __divsint
13    0000              	EXTERN __divsint_callee
14    0000              	EXTERN __divslong
15    0000              	EXTERN __divslong_callee
16    0000              	EXTERN __divslonglong
17    0000              	EXTERN __divslonglong_callee
18    0000              	EXTERN __divsuchar
19    0000              	EXTERN __divsuchar_callee
20    0000              	EXTERN __divuchar
21    0000              	EXTERN __divuchar_callee
22    0000              	EXTERN __divuint
23    0000              	EXTERN __divuint_callee
24    0000              	EXTERN __divulong
25    0000              	EXTERN __divulong_callee
26    0000              	EXTERN __divulonglong
27    0000              	EXTERN __divulonglong_callee
28    0000              	EXTERN __divuschar
29    0000              	EXTERN __divuschar_callee
30    0000              	EXTERN __modschar
31    0000              	EXTERN __modschar_callee
32    0000              	EXTERN __modsint
33    0000              	EXTERN __modsint_callee
34    0000              	EXTERN __modslong
35    0000              	EXTERN __modslong_callee
36    0000              	EXTERN __modslonglong
37    0000              	EXTERN __modslonglong_callee
38    0000              	EXTERN __modsuchar
39    0000              	EXTERN __modsuchar_callee
40    0000              	EXTERN __moduchar
41    0000              	EXTERN __moduchar_callee
42    0000              	EXTERN __moduint
43    0000              	EXTERN __moduint_callee
44    0000              	EXTERN __modulong
45    0000              	EXTERN __modulong_callee
46    0000              	EXTERN __modulonglong
47    0000              	EXTERN __modulonglong_callee
48    0000              	EXTERN __moduschar
49    0000              	EXTERN __moduschar_callee
50    0000              	EXTERN __mulint
51    0000              	EXTERN __mulint_callee
52    0000              	EXTERN __mullong
53    0000              	EXTERN __mullong_callee
54    0000              	EXTERN __mullonglong
55    0000              	EXTERN __mullonglong_callee
56    0000              	EXTERN __mulschar
57    0000              	EXTERN __mulschar_callee
58    0000              	EXTERN __mulsuchar
59    0000              	EXTERN __mulsuchar_callee
60    0000              	EXTERN __muluschar
61    0000              	EXTERN __muluschar_callee
62    0000              	EXTERN __rlslonglong
63    0000              	EXTERN __rlslonglong_callee
64    0000              	EXTERN __rlulonglong
65    0000              	EXTERN __rlulonglong_callee
66    0000              	EXTERN __rrslonglong
67    0000              	EXTERN __rrslonglong_callee
68    0000              	EXTERN __rrulonglong
69    0000              	EXTERN __rrulonglong_callee
70    0000              	EXTERN ___sdcc_call_hl
71    0000              	EXTERN ___sdcc_call_iy
72    0000              	EXTERN ___sdcc_enter_ix
73    0000              	EXTERN _banked_call
74    0000              	EXTERN _banked_ret
75    0000              	EXTERN ___fs2schar
76    0000              	EXTERN ___fs2schar_callee
77    0000              	EXTERN ___fs2sint
78    0000              	EXTERN ___fs2sint_callee
79    0000              	EXTERN ___fs2slong
80    0000              	EXTERN ___fs2slong_callee
81    0000              	EXTERN ___fs2slonglong
82    0000              	EXTERN ___fs2slonglong_callee
83    0000              	EXTERN ___fs2uchar
84    0000              	EXTERN ___fs2uchar_callee
85    0000              	EXTERN ___fs2uint
86    0000              	EXTERN ___fs2uint_callee
87    0000              	EXTERN ___fs2ulong
88    0000              	EXTERN ___fs2ulong_callee
89    0000              	EXTERN ___fs2ulonglong
90    0000              	EXTERN ___fs2ulonglong_callee
91    0000              	EXTERN ___fsadd
92    0000              	EXTERN ___fsadd_callee
93    0000              	EXTERN ___fsdiv
94    0000              	EXTERN ___fsdiv_callee
95    0000              	EXTERN ___fseq
96    0000              	EXTERN ___fseq_callee
97    0000              	EXTERN ___fsgt
98    0000              	EXTERN ___fsgt_callee
99    0000              	EXTERN ___fslt
100   0000              	EXTERN ___fslt_callee
101   0000              	EXTERN ___fsmul
102   0000              	EXTERN ___fsmul_callee
103   0000              	EXTERN ___fsneq
104   0000              	EXTERN ___fsneq_callee
105   0000              	EXTERN ___fssub
106   0000              	EXTERN ___fssub_callee
107   0000              	EXTERN ___schar2fs
108   0000              	EXTERN ___schar2fs_callee
109   0000              	EXTERN ___sint2fs
110   0000              	EXTERN ___sint2fs_callee
111   0000              	EXTERN ___slong2fs
112   0000              	EXTERN ___slong2fs_callee
113   0000              	EXTERN ___slonglong2fs
114   0000              	EXTERN ___slonglong2fs_callee
115   0000              	EXTERN ___uchar2fs
116   0000              	EXTERN ___uchar2fs_callee
117   0000              	EXTERN ___uint2fs
118   0000              	EXTERN ___uint2fs_callee
119   0000              	EXTERN ___ulong2fs
120   0000              	EXTERN ___ulong2fs_callee
121   0000              	EXTERN ___ulonglong2fs
122   0000              	EXTERN ___ulonglong2fs_callee
123   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
126   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
127   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
128   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
129   0000              	EXTERN ____sdcc_4_ldi_save_bc
130   0000              	EXTERN ____sdcc_4_push_hlix
131   0000              	EXTERN ____sdcc_4_push_mhl
132   0000              	EXTERN ____sdcc_lib_setmem_hl
133   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
134   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
135   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
136   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
137   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
138   0000              	EXTERN ____sdcc_ll_add_deix_hlix
139   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
140   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
141   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
142   0000              	EXTERN ____sdcc_ll_asr_hlix_a
143   0000              	EXTERN ____sdcc_ll_asr_mbc_a
144   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
145   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
146   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
147   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
148   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
149   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
150   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
151   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
152   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
153   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
155   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
156   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
157   0000              	EXTERN ____sdcc_ll_push_hlix
158   0000              	EXTERN ____sdcc_ll_push_mhl
159   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
160   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
161   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
162   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
163   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
164   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
165   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
166   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
167   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
168   0000              	EXTERN ____sdcc_load_debc_deix
169   0000              	EXTERN ____sdcc_load_dehl_deix
170   0000              	EXTERN ____sdcc_load_debc_mhl
171   0000              	EXTERN ____sdcc_load_hlde_mhl
172   0000              	EXTERN ____sdcc_store_dehl_bcix
173   0000              	EXTERN ____sdcc_store_debc_hlix
174   0000              	EXTERN ____sdcc_store_debc_mhl
175   0000              	EXTERN ____sdcc_cpu_pop_ei
176   0000              	EXTERN ____sdcc_cpu_pop_ei_jp
177   0000              	EXTERN ____sdcc_cpu_push_di
178   0000              	EXTERN ____sdcc_outi
179   0000              	EXTERN ____sdcc_outi_128
180   0000              	EXTERN ____sdcc_outi_256
181   0000              	EXTERN ____sdcc_ldi
182   0000              	EXTERN ____sdcc_ldi_128
183   0000              	EXTERN ____sdcc_ldi_256
184   0000              
185   0000              ;--------------------------------------------------------
186   0000              ; Public variables in this module
187   0000              ;--------------------------------------------------------
188   0000              	GLOBAL _spr_calc_index
189   0000              	GLOBAL _spr_chktime
190   0000              	GLOBAL _spr_move_up
191   0000              	GLOBAL _spr_move_down
192   0000              	GLOBAL _spr_move_horizontal
193   0000              	GLOBAL _spr_move_right
194   0000              	GLOBAL _spr_move_left
195   0000              	GLOBAL _spr_page_right
196   0000              	GLOBAL _spr_page_left
197   0000              	GLOBAL _spr_page_map
198   0000              	GLOBAL _spr_redraw
199   0000              	GLOBAL _spr_destroy
200   0000              	GLOBAL _spr_tile
201   0000              	GLOBAL _spr_tile_dir
202   0000              	GLOBAL _spr_draw_clear
203   0000              	GLOBAL _spr_brick_anim
204   0000              	GLOBAL _spr_draw_index
205   0000              	GLOBAL _spr_draw_row
206   0000              	GLOBAL _spr_calc_hor
207   0000              	GLOBAL _spr_back_repaint
208   0000              	GLOBAL _spr_tile_paint
209   0000              	GLOBAL _spr_init_anim_bullets
210   0000              	GLOBAL _spr_add_anim
211   0000              	GLOBAL _spr_play_anim
212   0000              	GLOBAL _spr_play_bullets
213   0000              	GLOBAL _spr_explode_bullet
214   0000              	GLOBAL _spr_turn_horizontal
215   0000              	GLOBAL _spr_btile_paint_back
216   0000              ;--------------------------------------------------------
217   0000              ; Externals used
218   0000              ;--------------------------------------------------------
219   0000              	GLOBAL _ulltoa_callee
220   0000              	GLOBAL _ulltoa
221   0000              	GLOBAL _strtoull_callee
222   0000              	GLOBAL _strtoull
223   0000              	GLOBAL _strtoll_callee
224   0000              	GLOBAL _strtoll
225   0000              	GLOBAL _lltoa_callee
226   0000              	GLOBAL _lltoa
227   0000              	GLOBAL _llabs_callee
228   0000              	GLOBAL _llabs
229   0000              	GLOBAL __lldivu__callee
230   0000              	GLOBAL __lldivu_
231   0000              	GLOBAL __lldiv__callee
232   0000              	GLOBAL __lldiv_
233   0000              	GLOBAL _atoll_callee
234   0000              	GLOBAL _atoll
235   0000              	GLOBAL _realloc_unlocked_callee
236   0000              	GLOBAL _realloc_unlocked
237   0000              	GLOBAL _malloc_unlocked_fastcall
238   0000              	GLOBAL _malloc_unlocked
239   0000              	GLOBAL _free_unlocked_fastcall
240   0000              	GLOBAL _free_unlocked
241   0000              	GLOBAL _calloc_unlocked_callee
242   0000              	GLOBAL _calloc_unlocked
243   0000              	GLOBAL _aligned_alloc_unlocked_callee
244   0000              	GLOBAL _aligned_alloc_unlocked
245   0000              	GLOBAL _realloc_callee
246   0000              	GLOBAL _realloc
247   0000              	GLOBAL _malloc_fastcall
248   0000              	GLOBAL _malloc
249   0000              	GLOBAL _free_fastcall
250   0000              	GLOBAL _free
251   0000              	GLOBAL _calloc_callee
252   0000              	GLOBAL _calloc
253   0000              	GLOBAL _aligned_alloc_callee
254   0000              	GLOBAL _aligned_alloc
255   0000              	GLOBAL _utoa_callee
256   0000              	GLOBAL _utoa
257   0000              	GLOBAL _ultoa_callee
258   0000              	GLOBAL _ultoa
259   0000              	GLOBAL _system_fastcall
260   0000              	GLOBAL _system
261   0000              	GLOBAL _strtoul_callee
262   0000              	GLOBAL _strtoul
263   0000              	GLOBAL _strtol_callee
264   0000              	GLOBAL _strtol
265   0000              	GLOBAL _strtof_callee
266   0000              	GLOBAL _strtof
267   0000              	GLOBAL _strtod_callee
268   0000              	GLOBAL _strtod
269   0000              	GLOBAL _srand_fastcall
270   0000              	GLOBAL _srand
271   0000              	GLOBAL _rand
272   0000              	GLOBAL _quick_exit_fastcall
273   0000              	GLOBAL _quick_exit
274   0000              	GLOBAL _qsort_callee
275   0000              	GLOBAL _qsort
276   0000              	GLOBAL _ltoa_callee
277   0000              	GLOBAL _ltoa
278   0000              	GLOBAL _labs_fastcall
279   0000              	GLOBAL _labs
280   0000              	GLOBAL _itoa_callee
281   0000              	GLOBAL _itoa
282   0000              	GLOBAL _ftoh_callee
283   0000              	GLOBAL _ftoh
284   0000              	GLOBAL _ftog_callee
285   0000              	GLOBAL _ftog
286   0000              	GLOBAL _ftoe_callee
287   0000              	GLOBAL _ftoe
288   0000              	GLOBAL _ftoa_callee
289   0000              	GLOBAL _ftoa
290   0000              	GLOBAL _exit_fastcall
291   0000              	GLOBAL _exit
292   0000              	GLOBAL _dtoh_callee
293   0000              	GLOBAL _dtoh
294   0000              	GLOBAL _dtog_callee
295   0000              	GLOBAL _dtog
296   0000              	GLOBAL _dtoe_callee
297   0000              	GLOBAL _dtoe
298   0000              	GLOBAL _dtoa_callee
299   0000              	GLOBAL _dtoa
300   0000              	GLOBAL _bsearch_callee
301   0000              	GLOBAL _bsearch
302   0000              	GLOBAL _atol_fastcall
303   0000              	GLOBAL _atol
304   0000              	GLOBAL _atoi_fastcall
305   0000              	GLOBAL _atoi
306   0000              	GLOBAL _atof_fastcall
307   0000              	GLOBAL _atof
308   0000              	GLOBAL _atexit_fastcall
309   0000              	GLOBAL _atexit
310   0000              	GLOBAL _at_quick_exit_fastcall
311   0000              	GLOBAL _at_quick_exit
312   0000              	GLOBAL _abs_fastcall
313   0000              	GLOBAL _abs
314   0000              	GLOBAL _abort
315   0000              	GLOBAL __strtou__callee
316   0000              	GLOBAL __strtou_
317   0000              	GLOBAL __strtoi__callee
318   0000              	GLOBAL __strtoi_
319   0000              	GLOBAL __random_uniform_xor_8__fastcall
320   0000              	GLOBAL __random_uniform_xor_8_
321   0000              	GLOBAL __random_uniform_xor_32__fastcall
322   0000              	GLOBAL __random_uniform_xor_32_
323   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
324   0000              	GLOBAL __random_uniform_cmwc_8_
325   0000              	GLOBAL __shellsort__callee
326   0000              	GLOBAL __shellsort_
327   0000              	GLOBAL __quicksort__callee
328   0000              	GLOBAL __quicksort_
329   0000              	GLOBAL __insertion_sort__callee
330   0000              	GLOBAL __insertion_sort_
331   0000              	GLOBAL __ldivu__callee
332   0000              	GLOBAL __ldivu_
333   0000              	GLOBAL __ldiv__callee
334   0000              	GLOBAL __ldiv_
335   0000              	GLOBAL __divu__callee
336   0000              	GLOBAL __divu_
337   0000              	GLOBAL __div__callee
338   0000              	GLOBAL __div_
339   0000              	GLOBAL _NIRVANAP_drawTW_raw_callee
340   0000              	GLOBAL _NIRVANAP_drawTW_raw
341   0000              	GLOBAL _NIRVANAP_drawTW_callee
342   0000              	GLOBAL _NIRVANAP_drawTW
343   0000              	GLOBAL _NIRVANAP_drawW_raw_callee
344   0000              	GLOBAL _NIRVANAP_drawW_raw
345   0000              	GLOBAL _NIRVANAP_drawW_callee
346   0000              	GLOBAL _NIRVANAP_drawW
347   0000              	GLOBAL _NIRVANAP_spriteT_callee
348   0000              	GLOBAL _NIRVANAP_spriteT
349   0000              	GLOBAL _NIRVANAP_fillC_callee
350   0000              	GLOBAL _NIRVANAP_fillC
351   0000              	GLOBAL _NIRVANAP_readC_callee
352   0000              	GLOBAL _NIRVANAP_readC
353   0000              	GLOBAL _NIRVANAP_paintC_callee
354   0000              	GLOBAL _NIRVANAP_paintC
355   0000              	GLOBAL _NIRVANAP_printC_callee
356   0000              	GLOBAL _NIRVANAP_printC
357   0000              	GLOBAL _NIRVANAP_fillT_raw_callee
358   0000              	GLOBAL _NIRVANAP_fillT_raw
359   0000              	GLOBAL _NIRVANAP_fillT_callee
360   0000              	GLOBAL _NIRVANAP_fillT
361   0000              	GLOBAL _NIRVANAP_drawT_raw_callee
362   0000              	GLOBAL _NIRVANAP_drawT_raw
363   0000              	GLOBAL _NIRVANAP_drawT_callee
364   0000              	GLOBAL _NIRVANAP_drawT
365   0000              	GLOBAL _NIRVANAP_stop
366   0000              	GLOBAL _NIRVANAP_start
367   0000              	GLOBAL _debug3
368   0000              	GLOBAL _debug2
369   0000              	GLOBAL _debug
370   0000              	GLOBAL _zx_print_str
371   0000              	GLOBAL _zx_print_int
372   0000              	GLOBAL _zx_print_chr
373   0000              	GLOBAL _zx_print_bonus_time
374   0000              	GLOBAL _zx_isr
375   0000              	GLOBAL _z80_otdr_callee
376   0000              	GLOBAL _z80_otdr
377   0000              	GLOBAL _z80_otir_callee
378   0000              	GLOBAL _z80_otir
379   0000              	GLOBAL _z80_outp_callee
380   0000              	GLOBAL _z80_outp
381   0000              	GLOBAL _z80_indr_callee
382   0000              	GLOBAL _z80_indr
383   0000              	GLOBAL _z80_inir_callee
384   0000              	GLOBAL _z80_inir
385   0000              	GLOBAL _z80_inp_fastcall
386   0000              	GLOBAL _z80_inp
387   0000              	GLOBAL _z80_set_int_state_fastcall
388   0000              	GLOBAL _z80_set_int_state
389   0000              	GLOBAL _z80_get_int_state
390   0000              	GLOBAL _z80_delay_tstate_fastcall
391   0000              	GLOBAL _z80_delay_tstate
392   0000              	GLOBAL _z80_delay_ms_fastcall
393   0000              	GLOBAL _z80_delay_ms
394   0000              	GLOBAL _im2_remove_generic_callback_callee
395   0000              	GLOBAL _im2_remove_generic_callback
396   0000              	GLOBAL _im2_prepend_generic_callback_callee
397   0000              	GLOBAL _im2_prepend_generic_callback
398   0000              	GLOBAL _im2_append_generic_callback_callee
399   0000              	GLOBAL _im2_append_generic_callback
400   0000              	GLOBAL _im2_create_generic_isr_8080_callee
401   0000              	GLOBAL _im2_create_generic_isr_8080
402   0000              	GLOBAL _im2_create_generic_isr_callee
403   0000              	GLOBAL _im2_create_generic_isr
404   0000              	GLOBAL _im2_install_isr_callee
405   0000              	GLOBAL _im2_install_isr
406   0000              	GLOBAL _im2_init_fastcall
407   0000              	GLOBAL _im2_init
408   0000              	GLOBAL _intrinsic_swap_word_32_fastcall
409   0000              	GLOBAL _intrinsic_swap_word_32
410   0000              	GLOBAL _intrinsic_swap_endian_32_fastcall
411   0000              	GLOBAL _intrinsic_swap_endian_32
412   0000              	GLOBAL _intrinsic_swap_endian_16_fastcall
413   0000              	GLOBAL _intrinsic_swap_endian_16
414   0000              	GLOBAL _intrinsic_return_de
415   0000              	GLOBAL _intrinsic_return_bc
416   0000              	GLOBAL _intrinsic_exx
417   0000              	GLOBAL _intrinsic_ex_de_hl
418   0000              	GLOBAL _intrinsic_nop
419   0000              	GLOBAL _intrinsic_im_2
420   0000              	GLOBAL _intrinsic_im_1
421   0000              	GLOBAL _intrinsic_im_0
422   0000              	GLOBAL _intrinsic_retn
423   0000              	GLOBAL _intrinsic_reti
424   0000              	GLOBAL _intrinsic_halt
425   0000              	GLOBAL _intrinsic_ei
426   0000              	GLOBAL _intrinsic_di
427   0000              	GLOBAL _intrinsic_stub
428   0000              	GLOBAL _intrinsic_outi
429   0000              	GLOBAL _intrinsic_ldi
430   0000              	GLOBAL _zx_pattern_fill_callee
431   0000              	GLOBAL _zx_pattern_fill
432   0000              	GLOBAL _zx_saddrpup_fastcall
433   0000              	GLOBAL _zx_saddrpup
434   0000              	GLOBAL _zx_saddrpright_callee
435   0000              	GLOBAL _zx_saddrpright
436   0000              	GLOBAL _zx_saddrpleft_callee
437   0000              	GLOBAL _zx_saddrpleft
438   0000              	GLOBAL _zx_saddrpdown_fastcall
439   0000              	GLOBAL _zx_saddrpdown
440   0000              	GLOBAL _zx_saddrcup_fastcall
441   0000              	GLOBAL _zx_saddrcup
442   0000              	GLOBAL _zx_saddrcright_fastcall
443   0000              	GLOBAL _zx_saddrcright
444   0000              	GLOBAL _zx_saddrcleft_fastcall
445   0000              	GLOBAL _zx_saddrcleft
446   0000              	GLOBAL _zx_saddrcdown_fastcall
447   0000              	GLOBAL _zx_saddrcdown
448   0000              	GLOBAL _zx_saddr2py_fastcall
449   0000              	GLOBAL _zx_saddr2py
450   0000              	GLOBAL _zx_saddr2px_fastcall
451   0000              	GLOBAL _zx_saddr2px
452   0000              	GLOBAL _zx_saddr2cy_fastcall
453   0000              	GLOBAL _zx_saddr2cy
454   0000              	GLOBAL _zx_saddr2cx_fastcall
455   0000              	GLOBAL _zx_saddr2cx
456   0000              	GLOBAL _zx_saddr2aaddr_fastcall
457   0000              	GLOBAL _zx_saddr2aaddr
458   0000              	GLOBAL _zx_py2saddr_fastcall
459   0000              	GLOBAL _zx_py2saddr
460   0000              	GLOBAL _zx_py2aaddr_fastcall
461   0000              	GLOBAL _zx_py2aaddr
462   0000              	GLOBAL _zx_pxy2saddr_callee
463   0000              	GLOBAL _zx_pxy2saddr
464   0000              	GLOBAL _zx_pxy2aaddr_callee
465   0000              	GLOBAL _zx_pxy2aaddr
466   0000              	GLOBAL _zx_px2bitmask_fastcall
467   0000              	GLOBAL _zx_px2bitmask
468   0000              	GLOBAL _zx_cy2saddr_fastcall
469   0000              	GLOBAL _zx_cy2saddr
470   0000              	GLOBAL _zx_cy2aaddr_fastcall
471   0000              	GLOBAL _zx_cy2aaddr
472   0000              	GLOBAL _zx_cxy2saddr_callee
473   0000              	GLOBAL _zx_cxy2saddr
474   0000              	GLOBAL _zx_cxy2aaddr_callee
475   0000              	GLOBAL _zx_cxy2aaddr
476   0000              	GLOBAL _zx_bitmask2px_fastcall
477   0000              	GLOBAL _zx_bitmask2px
478   0000              	GLOBAL _zx_aaddrcup_fastcall
479   0000              	GLOBAL _zx_aaddrcup
480   0000              	GLOBAL _zx_aaddrcright_fastcall
481   0000              	GLOBAL _zx_aaddrcright
482   0000              	GLOBAL _zx_aaddrcleft_fastcall
483   0000              	GLOBAL _zx_aaddrcleft
484   0000              	GLOBAL _zx_aaddrcdown_fastcall
485   0000              	GLOBAL _zx_aaddrcdown
486   0000              	GLOBAL _zx_aaddr2saddr_fastcall
487   0000              	GLOBAL _zx_aaddr2saddr
488   0000              	GLOBAL _zx_aaddr2py_fastcall
489   0000              	GLOBAL _zx_aaddr2py
490   0000              	GLOBAL _zx_aaddr2px_fastcall
491   0000              	GLOBAL _zx_aaddr2px
492   0000              	GLOBAL _zx_aaddr2cy_fastcall
493   0000              	GLOBAL _zx_aaddr2cy
494   0000              	GLOBAL _zx_aaddr2cx_fastcall
495   0000              	GLOBAL _zx_aaddr2cx
496   0000              	GLOBAL _zx_visit_wc_pix_callee
497   0000              	GLOBAL _zx_visit_wc_pix
498   0000              	GLOBAL _zx_visit_wc_attr_callee
499   0000              	GLOBAL _zx_visit_wc_attr
500   0000              	GLOBAL _zx_scroll_wc_up_pix_callee
501   0000              	GLOBAL _zx_scroll_wc_up_pix
502   0000              	GLOBAL _zx_scroll_wc_up_attr_callee
503   0000              	GLOBAL _zx_scroll_wc_up_attr
504   0000              	GLOBAL _zx_scroll_wc_up_callee
505   0000              	GLOBAL _zx_scroll_wc_up
506   0000              	GLOBAL _zx_scroll_up_pix_callee
507   0000              	GLOBAL _zx_scroll_up_pix
508   0000              	GLOBAL _zx_scroll_up_attr_callee
509   0000              	GLOBAL _zx_scroll_up_attr
510   0000              	GLOBAL _zx_scroll_up_callee
511   0000              	GLOBAL _zx_scroll_up
512   0000              	GLOBAL _zx_cls_wc_pix_callee
513   0000              	GLOBAL _zx_cls_wc_pix
514   0000              	GLOBAL _zx_cls_wc_attr_callee
515   0000              	GLOBAL _zx_cls_wc_attr
516   0000              	GLOBAL _zx_cls_wc_callee
517   0000              	GLOBAL _zx_cls_wc
518   0000              	GLOBAL _zx_cls_pix_fastcall
519   0000              	GLOBAL _zx_cls_pix
520   0000              	GLOBAL _zx_cls_attr_fastcall
521   0000              	GLOBAL _zx_cls_attr
522   0000              	GLOBAL _zx_cls_fastcall
523   0000              	GLOBAL _zx_cls
524   0000              	GLOBAL _zx_border_fastcall
525   0000              	GLOBAL _zx_border
526   0000              	GLOBAL _sound_hit_brick
527   0000              	GLOBAL _sound_hit_enemy
528   0000              	GLOBAL _sound_kill
529   0000              	GLOBAL _sound_enter_enemy
530   0000              	GLOBAL _sound_coin
531   0000              	GLOBAL _sound_jump
532   0000              	GLOBAL _sound_slide
533   0000              	GLOBAL _player_lost_life
534   0000              	GLOBAL _player_hit
535   0000              	GLOBAL _player_open_door
536   0000              	GLOBAL _player_move_jump
537   0000              	GLOBAL _player_fire
538   0000              	GLOBAL _player_check_stairs_down
539   0000              	GLOBAL _player_check_stairs
540   0000              	GLOBAL _player_tile
541   0000              	GLOBAL _player_pick_item
542   0000              	GLOBAL _player_check_floor
543   0000              	GLOBAL _player_hit_platform_clear
544   0000              	GLOBAL _player_score_add
545   0000              	GLOBAL _player_player_hit_pow
546   0000              	GLOBAL _player_hit_platform
547   0000              	GLOBAL _player_move_input
548   0000              	GLOBAL _player_turn
549   0000              	GLOBAL _player_move
550   0000              	GLOBAL _player_restart
551   0000              	GLOBAL _player_kill
552   0000              	GLOBAL _player_check_input
553   0000              	GLOBAL _player_collision
554   0000              	GLOBAL _player_init
555   0000              	GLOBAL _game_obj_clear
556   0000              	GLOBAL _game_obj_chk
557   0000              	GLOBAL _game_obj_set
558   0000              	GLOBAL _game_shoot_fire
559   0000              	GLOBAL _game_add_enemy
560   0000              	GLOBAL _game_joystick_set_menu
561   0000              	GLOBAL _game_joystick_set
562   0000              	GLOBAL _game_joystick_change
563   0000              	GLOBAL _game_print_header
564   0000              	GLOBAL _game_end
565   0000              	GLOBAL _game_phase_print_score_back
566   0000              	GLOBAL _game_check_time
567   0000              	GLOBAL _game_rotate_attrib
568   0000              	GLOBAL _game_colour_message
569   0000              	GLOBAL _game_paint_attrib_lin_h
570   0000              	GLOBAL _game_paint_attrib_lin
571   0000              	GLOBAL _game_paint_attrib
572   0000              	GLOBAL _game_print_score
573   0000              	GLOBAL _game_unfreeze_all
574   0000              	GLOBAL _game_freeze_all
575   0000              	GLOBAL _game_freeze
576   0000              	GLOBAL _game_enemy_add_get_index
577   0000              	GLOBAL _game_check_cell
578   0000              	GLOBAL _game_check_map
579   0000              	GLOBAL _game_loop
580   0000              	GLOBAL _game_round_init
581   0000              	GLOBAL _game_start_timer
582   0000              	GLOBAL _game_tick
583   0000              	GLOBAL _game_update_stats
584   0000              	GLOBAL _game_print_footer
585   0000              	GLOBAL _game_fill_row
586   0000              	GLOBAL _game_draw_screen
587   0000              	GLOBAL _enemy_avoid_fall_dead
588   0000              	GLOBAL _enemy_avoid_fall
589   0000              	GLOBAL _enemy_respawn
590   0000              	GLOBAL _enemy_init
591   0000              	GLOBAL _enemy_move
592   0000              	GLOBAL _enemy_turn
593   0000              	GLOBAL _enemy_hit
594   0000              	GLOBAL _enemy_coin1
595   0000              	GLOBAL _enemy_static
596   0000              	GLOBAL _enemy_walk
597   0000              	GLOBAL _enemy_horizontal
598   0000              	GLOBAL _enemy_vertical
599   0000              	GLOBAL _ay_fx_play
600   0000              	GLOBAL _ay_midi_play
601   0000              	GLOBAL _ay_is_playing
602   0000              	GLOBAL _ay_reset
603   0000              	GLOBAL _test_func
604   0000              	GLOBAL _test_proc
605   0000              	GLOBAL _in_mouse_kempston_wheel_delta
606   0000              	GLOBAL _in_mouse_kempston_wheel
607   0000              	GLOBAL _in_mouse_kempston_callee
608   0000              	GLOBAL _in_mouse_kempston
609   0000              	GLOBAL _in_mouse_kempston_setpos_callee
610   0000              	GLOBAL _in_mouse_kempston_setpos
611   0000              	GLOBAL _in_mouse_kempston_reset
612   0000              	GLOBAL _in_mouse_kempston_init
613   0000              	GLOBAL _in_mouse_amx_wheel_delta
614   0000              	GLOBAL _in_mouse_amx_wheel
615   0000              	GLOBAL _in_mouse_amx_callee
616   0000              	GLOBAL _in_mouse_amx
617   0000              	GLOBAL _in_mouse_amx_setpos_callee
618   0000              	GLOBAL _in_mouse_amx_setpos
619   0000              	GLOBAL _in_mouse_amx_reset
620   0000              	GLOBAL _in_mouse_amx_init_callee
621   0000              	GLOBAL _in_mouse_amx_init
622   0000              	GLOBAL _in_stick_sinclair2
623   0000              	GLOBAL _in_stick_sinclair1
624   0000              	GLOBAL _in_stick_kempston
625   0000              	GLOBAL _in_stick_fuller
626   0000              	GLOBAL _in_stick_cursor
627   0000              	GLOBAL _in_stick_keyboard_fastcall
628   0000              	GLOBAL _in_stick_keyboard
629   0000              	GLOBAL _in_wait_nokey
630   0000              	GLOBAL _in_wait_key
631   0000              	GLOBAL _in_test_key
632   0000              	GLOBAL _in_pause_fastcall
633   0000              	GLOBAL _in_pause
634   0000              	GLOBAL _in_key_scancode_fastcall
635   0000              	GLOBAL _in_key_scancode
636   0000              	GLOBAL _in_key_pressed_fastcall
637   0000              	GLOBAL _in_key_pressed
638   0000              	GLOBAL _in_inkey
639   0000              	GLOBAL _NIRVANAP_CHAR_TABLE
640   0000              	GLOBAL _NIRVANAP_WIDE_IMAGES
641   0000              	GLOBAL _NIRVANAP_TILE_IMAGES
642   0000              	GLOBAL _NIRVANAP_HOLE
643   0000              	GLOBAL _NIRVANAP_ISR_HOOK
644   0000              	GLOBAL _player_lvl_table
645   0000              	GLOBAL _map_paper_last
646   0000              	GLOBAL _map_paper_clr
647   0000              	GLOBAL _map_paper
648   0000              	GLOBAL _draw_count
649   0000              	GLOBAL _g_player_hit_right
650   0000              	GLOBAL _g_player_hit_left
651   0000              	GLOBAL _joynames
652   0000              	GLOBAL _initials
653   0000              	GLOBAL _bullet_count
654   0000              	GLOBAL _bullet_vel
655   0000              	GLOBAL _bullet_frames
656   0000              	GLOBAL _bullet_colint
657   0000              	GLOBAL _bullet_dir
658   0000              	GLOBAL _bullet_tile
659   0000              	GLOBAL _bullet_col
660   0000              	GLOBAL _bullet_lin
661   0000              	GLOBAL _bullet_col0
662   0000              	GLOBAL _bullet_lin0
663   0000              	GLOBAL _bullet_max
664   0000              	GLOBAL _bullet_class
665   0000              	GLOBAL _mush_class
666   0000              	GLOBAL _mush_index
667   0000              	GLOBAL _anim_count
668   0000              	GLOBAL _anim_respanwn
669   0000              	GLOBAL _anim_loop
670   0000              	GLOBAL _anim_end
671   0000              	GLOBAL _anim_int
672   0000              	GLOBAL _anim_tile
673   0000              	GLOBAL _anim_col
674   0000              	GLOBAL _anim_lin
675   0000              	GLOBAL _phase_curr
676   0000              	GLOBAL _map_heigth
677   0000              	GLOBAL _map_width
678   0000              	GLOBAL _scr_curr
679   0000              	GLOBAL _scr_obj1
680   0000              	GLOBAL _scr_obj0
681   0000              	GLOBAL _scr_map
682   0000              	GLOBAL _sprite_speed_alt
683   0000              	GLOBAL _sprite_frames
684   0000              	GLOBAL _sprite_speed
685   0000              	GLOBAL _screen_ink
686   0000              	GLOBAL _screen_paper
687   0000              	GLOBAL _player_over_stair
688   0000              	GLOBAL _game_start_scr
689   0000              	GLOBAL _game_respawn_tile
690   0000              	GLOBAL _game_respawn_index
691   0000              	GLOBAL _game_respawn_time
692   0000              	GLOBAL _game_menu_sel
693   0000              	GLOBAL _game_score_top
694   0000              	GLOBAL _player_lives
695   0000              	GLOBAL _game_over
696   0000              	GLOBAL _game_sound
697   0000              	GLOBAL _game_inmune
698   0000              	GLOBAL _game_god_mode
699   0000              	GLOBAL _game_two_player
700   0000              	GLOBAL _game_brick_tile
701   0000              	GLOBAL _sprite_curr_index
702   0000              	GLOBAL _spr_count
703   0000              	GLOBAL _bullet_time
704   0000              	GLOBAL _anim_time
705   0000              	GLOBAL _frame_time
706   0000              	GLOBAL _entry_time
707   0000              	GLOBAL _curr_time
708   0000              	GLOBAL _s_state
709   0000              	GLOBAL _attrib_hl
710   0000              	GLOBAL _attrib
711   0000              	GLOBAL _zx_val_asm
712   0000              	GLOBAL _enemies
713   0000              	GLOBAL _tmp_ui
714   0000              	GLOBAL _tmp_sc
715   0000              	GLOBAL _tmp_uc
716   0000              	GLOBAL _tmp1
717   0000              	GLOBAL _tmp0
718   0000              	GLOBAL _tmp
719   0000              	GLOBAL _index1
720   0000              	GLOBAL _index0
721   0000              	GLOBAL _loop_count
722   0000              	GLOBAL _s_col1
723   0000              	GLOBAL _s_col0
724   0000              	GLOBAL _s_lin1
725   0000              	GLOBAL _s_lin0
726   0000              	GLOBAL _s_tile1
727   0000              	GLOBAL _s_tile0
728   0000              	GLOBAL _player_hit_count
729   0000              	GLOBAL _sprite_horizontal_check
730   0000              	GLOBAL _sprite_on_air
731   0000              	GLOBAL _sprite
732   0000              	GLOBAL _game_gravity
733   0000              	GLOBAL _player_hit_time
734   0000              	GLOBAL _player_lin_scr
735   0000              	GLOBAL _player_col_scr
736   0000              	GLOBAL _player_lvl
737   0000              	GLOBAL _player_int
738   0000              	GLOBAL _player_str
739   0000              	GLOBAL _player_max_vita
740   0000              	GLOBAL _player_max_mana
741   0000              	GLOBAL _player_vita
742   0000              	GLOBAL _player_mana
743   0000              	GLOBAL _player_keys
744   0000              	GLOBAL _player_vel_inc
745   0000              	GLOBAL _player_vel_y1
746   0000              	GLOBAL _player_vel_y0
747   0000              	GLOBAL _player_vel_y
748   0000              	GLOBAL _player_vel_x
749   0000              	GLOBAL _player_joy
750   0000              	GLOBAL _player_score
751   0000              	GLOBAL _last_time
752   0000              	GLOBAL _player_slide
753   0000              	GLOBAL _spr_timer
754   0000              	GLOBAL _jump_lin
755   0000              	GLOBAL _player_hit_col
756   0000              	GLOBAL _player_hit_lin
757   0000              	GLOBAL _colint
758   0000              	GLOBAL _col
759   0000              	GLOBAL _lin
760   0000              	GLOBAL _tile
761   0000              	GLOBAL _state_a
762   0000              	GLOBAL _state
763   0000              	GLOBAL _class
764   0000              	GLOBAL _tbuffer
765   0000              	GLOBAL _dirs
766   0000              	GLOBAL _k1
767   0000              	GLOBAL _joyfunc1
768   0000              	GLOBAL _btiles
769   0000              	GLOBAL _spec128
770   0000              	GLOBAL _GLOBAL_ZX_PORT_7FFD
771   0000              	GLOBAL _GLOBAL_ZX_PORT_1FFD
772   0000              	GLOBAL _GLOBAL_ZX_PORT_FE
773   0000              	GLOBAL _ay_effect_20
774   0000              	GLOBAL _ay_effect_19
775   0000              	GLOBAL _ay_effect_18
776   0000              	GLOBAL _ay_effect_17
777   0000              	GLOBAL _ay_effect_16
778   0000              	GLOBAL _ay_effect_15
779   0000              	GLOBAL _ay_effect_14
780   0000              	GLOBAL _ay_effect_13
781   0000              	GLOBAL _ay_effect_12
782   0000              	GLOBAL _ay_effect_11
783   0000              	GLOBAL _ay_effect_10
784   0000              	GLOBAL _ay_effect_09
785   0000              	GLOBAL _ay_effect_08
786   0000              	GLOBAL _ay_effect_07
787   0000              	GLOBAL _ay_effect_06
788   0000              	GLOBAL _ay_effect_05
789   0000              	GLOBAL _ay_effect_04
790   0000              	GLOBAL _ay_effect_03
791   0000              	GLOBAL _ay_effect_02
792   0000              	GLOBAL _ay_effect_01
793   0000              	GLOBAL _pb_midi_phase_1
794   0000              	GLOBAL _pb_midi_title
795   0000              	GLOBAL _control_method
796   0000              	GLOBAL _world0
797   0000              	GLOBAL _lenght0
798   0000              	GLOBAL _start_scr0
799   0000              ;--------------------------------------------------------
800   0000              ; special function registers
801   0000              ;--------------------------------------------------------
802   0000              defc _IO_FE	=	0x00fe
803   0000              defc _IO_1FFD	=	0x1ffd
804   0000              defc _IO_7FFD	=	0x7ffd
805   0000              ;--------------------------------------------------------
806   0000              ; ram data
807   0000              ;--------------------------------------------------------
808   0000              	SECTION bss_compiler
809   0000              ;--------------------------------------------------------
810   0000              ; ram data
811   0000              ;--------------------------------------------------------
812   0000              
813   0000              IF 0
814   0000              
815   0000              ; .area _INITIALIZED removed by z88dk
816   0000              
817   0000              
818   0000              ENDIF
819   0000              
820   0000              ;--------------------------------------------------------
821   0000              ; absolute external ram data
822   0000              ;--------------------------------------------------------
823   0000              	SECTION IGNORE
824   0000              ;--------------------------------------------------------
825   0000              ; global & static initialisations
826   0000              ;--------------------------------------------------------
827   0000              	SECTION code_crt_init
828   0000              ;--------------------------------------------------------
829   0000              ; Home
830   0000              ;--------------------------------------------------------
831   0000              	SECTION IGNORE
832   0000              ;--------------------------------------------------------
833   0000              ; code
834   0000              ;--------------------------------------------------------
835   0000              	SECTION code_compiler
836   0000              ;	---------------------------------
837   0000              ; Function spr_calc_index
838   0000              ; ---------------------------------
839   0000              _spr_calc_index:
840   0000  CD 00 00    	call	___sdcc_enter_ix
841   0003  DD 4E 05    	ld	c,(ix+5)
842   0006  CB 39       	srl	c
843   0008  06 00       	ld	b,0x00
844   000A  DD 7E 04    	ld	a,(ix+4)
845   000D  07          	rlca
846   000E  07          	rlca
847   000F  07          	rlca
848   0010  07          	rlca
849   0011  E6 0F       	and	a,0x0f
850   0013  6F          	ld	l, a
851   0014  26 00       	ld	h,0x00
852   0016  29          	add	hl, hl
853   0017  29          	add	hl, hl
854   0018  29          	add	hl, hl
855   0019  29          	add	hl, hl
856   001A  09          	add	hl, bc
857   001B  DD E1       	pop	ix
858   001D  C9          	ret
859   001E              	SECTION code_compiler
860   001E              ;	---------------------------------
861   001E              ; Function spr_chktime
862   001E              ; ---------------------------------
863   001E              _spr_chktime:
864   001E  CD 00 00    	call	___sdcc_enter_ix
865   0021  F5          	push	af
866   0022  DD 75 FE    	ld	(ix-2),l
867   0025  DD 74 FF    	ld	(ix-1),h
868   0028  E1          	pop	hl
869   0029  01 00 00    	ld	bc,_sprite_speed_alt+0
870   002C  5E          	ld	e,(hl)
871   002D  E5          	push	hl
872   002E  6B          	ld	l,e
873   002F  26 00       	ld	h,0x00
874   0031  09          	add	hl, bc
875   0032  7E          	ld	a, (hl)
876   0033  B7          	or	a, a
877   0034  20 13       	jr	NZ,l_spr_chktime_00102
878   0036  01 00 00    	ld	bc,_sprite_speed+0
879   0039  16 00       	ld	d,0x00
880   003B  21 00 00    	ld	hl,_class
881   003E  19          	add	hl, de
882   003F  6E          	ld	l, (hl)
883   0040  26 00       	ld	h,0x00
884   0042  09          	add	hl, bc
885   0043  7E          	ld	a, (hl)
886   0044  32 00 00    	ld	(_tmp),a
887   0047  18 03       	jr	l_spr_chktime_00103
888   0049              l_spr_chktime_00102:
889   0049  32 00 00    	ld	(_tmp),a
890   004C              l_spr_chktime_00103:
891   004C  3A 00 00    	ld	a,(_tmp)
892   004F  4F          	ld	c,a
893   0050  06 00       	ld	b,0x00
894   0052  60          	ld	h,b
895   0053  6B          	ld	l, e
896   0054  29          	add	hl, hl
897   0055  11 00 00    	ld	de,_last_time
898   0058  19          	add	hl, de
899   0059  5E          	ld	e, (hl)
900   005A  23          	inc	hl
901   005B  56          	ld	d, (hl)
902   005C  C5          	push	bc
903   005D  D5          	push	de
904   005E  CD 00 00    	call	_game_check_time
905   0061  F1          	pop	af
906   0062  F1          	pop	af
907   0063  7D          	ld	a, l
908   0064  B7          	or	a, a
909   0065  28 15       	jr	Z,l_spr_chktime_00105
910   0067  E1          	pop	hl
911   0068  E5          	push	hl
912   0069  6E          	ld	l, (hl)
913   006A  26 00       	ld	h,0x00
914   006C  29          	add	hl, hl
915   006D  01 00 00    	ld	bc,_last_time
916   0070  09          	add	hl,bc
917   0071  ED 5B 00 00 	ld	de,(_curr_time)
918   0075  73          	ld	(hl),e
919   0076  23          	inc	hl
920   0077  72          	ld	(hl),d
921   0078  2E 01       	ld	l,0x01
922   007A  18 02       	jr	l_spr_chktime_00106
923   007C              l_spr_chktime_00105:
924   007C  2E 00       	ld	l,0x00
925   007E              l_spr_chktime_00106:
926   007E  F1          	pop	af
927   007F  DD E1       	pop	ix
928   0081  C9          	ret
929   0082              	SECTION code_compiler
930   0082              ;	---------------------------------
931   0082              ; Function spr_move_up
932   0082              ; ---------------------------------
933   0082              _spr_move_up:
934   0082  2A 00 00    	ld	hl,(_sprite)
935   0085  26 00       	ld	h,0x00
936   0087  01 00 00    	ld	bc,_lin
937   008A  09          	add	hl,bc
938   008B  7E          	ld	a,(hl)
939   008C  C6 FE       	add	a,0xfe
940   008E  32 00 00    	ld	(_s_lin1),a
941   0091  07          	rlca
942   0092  07          	rlca
943   0093  07          	rlca
944   0094  07          	rlca
945   0095  E6 0F       	and	a,0x0f
946   0097  4F          	ld	c, a
947   0098  3A 00 00    	ld	a,(_s_lin0)
948   009B  07          	rlca
949   009C  07          	rlca
950   009D  07          	rlca
951   009E  07          	rlca
952   009F  E6 0F       	and	a,0x0f
953   00A1  47          	ld	b, a
954   00A2  79          	ld	a, c
955   00A3  90          	sub	a, b
956   00A4  20 04       	jr	NZ,l_spr_move_up_00122
957   00A6  3E 01       	ld	a,0x01
958   00A8  18 01       	jr	l_spr_move_up_00123
959   00AA              l_spr_move_up_00122:
960   00AA  AF          	xor	a,a
961   00AB              l_spr_move_up_00123:
962   00AB  EE 01       	xor	a,0x01
963   00AD  28 1D       	jr	Z,l_spr_move_up_00104
964   00AF  2A 00 00    	ld	hl,(_sprite)
965   00B2  26 00       	ld	h,0x00
966   00B4  01 00 00    	ld	bc,_col
967   00B7  09          	add	hl,bc
968   00B8  7E          	ld	a,(hl)
969   00B9  F5          	push	af
970   00BA  33          	inc	sp
971   00BB  3A 00 00    	ld	a,(_s_lin1)
972   00BE  F5          	push	af
973   00BF  33          	inc	sp
974   00C0  CD 00 00    	call	_game_check_map
975   00C3  F1          	pop	af
976   00C4  7C          	ld	a,h
977   00C5  B5          	or	a,l
978   00C6  28 04       	jr	Z,l_spr_move_up_00104
979   00C8  2E 01       	ld	l,0x01
980   00CA  18 1F       	jr	l_spr_move_up_00108
981   00CC              l_spr_move_up_00104:
982   00CC  2A 00 00    	ld	hl,(_sprite)
983   00CF  26 00       	ld	h,0x00
984   00D1  01 00 00    	ld	bc,_lin
985   00D4  09          	add	hl,bc
986   00D5  3E 90       	ld	a,0x90
987   00D7  4D          	ld	c,l
988   00D8  44          	ld	b,h
989   00D9  21 00 00    	ld	hl,_s_lin1
990   00DC  96          	sub	a, (hl)
991   00DD  30 06       	jr	NC,l_spr_move_up_00106
992   00DF  AF          	xor	a, a
993   00E0  02          	ld	(bc), a
994   00E1  2E 01       	ld	l,0x01
995   00E3  18 06       	jr	l_spr_move_up_00108
996   00E5              l_spr_move_up_00106:
997   00E5  3A 00 00    	ld	a,(_s_lin1)
998   00E8  02          	ld	(bc), a
999   00E9  2E 00       	ld	l,0x00
1000  00EB              l_spr_move_up_00108:
1001  00EB  C9          	ret
1002  00EC              	SECTION code_compiler
1003  00EC              ;	---------------------------------
1004  00EC              ; Function spr_move_down
1005  00EC              ; ---------------------------------
1006  00EC              _spr_move_down:
1007  00EC  2A 00 00    	ld	hl,(_sprite)
1008  00EF  26 00       	ld	h,0x00
1009  00F1  01 00 00    	ld	bc,_lin
1010  00F4  09          	add	hl,bc
1011  00F5  7E          	ld	a,(hl)
1012  00F6  C6 10       	add	a,0x10
1013  00F8  32 00 00    	ld	(_s_lin1),a
1014  00FB  07          	rlca
1015  00FC  07          	rlca
1016  00FD  07          	rlca
1017  00FE  07          	rlca
1018  00FF  E6 0F       	and	a,0x0f
1019  0101  4F          	ld	c, a
1020  0102  3A 00 00    	ld	a,(_s_lin0)
1021  0105  07          	rlca
1022  0106  07          	rlca
1023  0107  07          	rlca
1024  0108  07          	rlca
1025  0109  E6 0F       	and	a,0x0f
1026  010B  47          	ld	b, a
1027  010C  79          	ld	a, c
1028  010D  90          	sub	a, b
1029  010E  20 04       	jr	NZ,l_spr_move_down_00122
1030  0110  3E 01       	ld	a,0x01
1031  0112  18 01       	jr	l_spr_move_down_00123
1032  0114              l_spr_move_down_00122:
1033  0114  AF          	xor	a,a
1034  0115              l_spr_move_down_00123:
1035  0115  EE 01       	xor	a,0x01
1036  0117  28 1D       	jr	Z,l_spr_move_down_00104
1037  0119  2A 00 00    	ld	hl,(_sprite)
1038  011C  26 00       	ld	h,0x00
1039  011E  01 00 00    	ld	bc,_col
1040  0121  09          	add	hl,bc
1041  0122  7E          	ld	a,(hl)
1042  0123  F5          	push	af
1043  0124  33          	inc	sp
1044  0125  3A 00 00    	ld	a,(_s_lin1)
1045  0128  F5          	push	af
1046  0129  33          	inc	sp
1047  012A  CD 00 00    	call	_game_check_map
1048  012D  F1          	pop	af
1049  012E  7C          	ld	a,h
1050  012F  B5          	or	a,l
1051  0130  28 04       	jr	Z,l_spr_move_down_00104
1052  0132  2E 01       	ld	l,0x01
1053  0134  18 22       	jr	l_spr_move_down_00108
1054  0136              l_spr_move_down_00104:
1055  0136  2A 00 00    	ld	hl,(_sprite)
1056  0139  26 00       	ld	h,0x00
1057  013B  01 00 00    	ld	bc,_lin
1058  013E  09          	add	hl,bc
1059  013F  3E 90       	ld	a,0x90
1060  0141  4D          	ld	c,l
1061  0142  44          	ld	b,h
1062  0143  21 00 00    	ld	hl,_s_lin1
1063  0146  96          	sub	a, (hl)
1064  0147  30 07       	jr	NC,l_spr_move_down_00106
1065  0149  3E 90       	ld	a,0x90
1066  014B  02          	ld	(bc), a
1067  014C  2E 01       	ld	l,0x01
1068  014E  18 08       	jr	l_spr_move_down_00108
1069  0150              l_spr_move_down_00106:
1070  0150  3A 00 00    	ld	a,(_s_lin1)
1071  0153  C6 F2       	add	a,0xf2
1072  0155  02          	ld	(bc), a
1073  0156  2E 00       	ld	l,0x00
1074  0158              l_spr_move_down_00108:
1075  0158  C9          	ret
1076  0159              	SECTION code_compiler
1077  0159              ;	---------------------------------
1078  0159              ; Function spr_move_horizontal
1079  0159              ; ---------------------------------
1080  0159              _spr_move_horizontal:
1081  0159  2A 00 00    	ld	hl,(_sprite)
1082  015C  26 00       	ld	h,0x00
1083  015E  01 00 00    	ld	bc,_state
1084  0161  09          	add	hl,bc
1085  0162  7E          	ld	a,(hl)
1086  0163  CB 57       	bit	2, a
1087  0165  28 05       	jr	Z,l_spr_move_horizontal_00104
1088  0167  CD 78 01    	call	_spr_move_right
1089  016A  18 0B       	jr	l_spr_move_horizontal_00106
1090  016C              l_spr_move_horizontal_00104:
1091  016C  CB 5F       	bit	3, a
1092  016E  28 05       	jr	Z,l_spr_move_horizontal_00105
1093  0170  CD 60 02    	call	_spr_move_left
1094  0173  18 02       	jr	l_spr_move_horizontal_00106
1095  0175              l_spr_move_horizontal_00105:
1096  0175  2E 00       	ld	l,0x00
1097  0177              l_spr_move_horizontal_00106:
1098  0177  C9          	ret
1099  0178              	SECTION code_compiler
1100  0178              ;	---------------------------------
1101  0178              ; Function spr_move_right
1102  0178              ; ---------------------------------
1103  0178              _spr_move_right:
1104  0178  2A 00 00    	ld	hl,(_sprite)
1105  017B  26 00       	ld	h,0x00
1106  017D  01 00 00    	ld	bc,_colint
1107  0180  09          	add	hl,bc
1108  0181  7E          	ld	a,(hl)
1109  0182  3C          	inc	a
1110  0183  77          	ld	(hl),a
1111  0184  4F          	ld	c,a
1112  0185  3A 00 00    	ld	a,(_sprite)
1113  0188  5F          	ld	e,a
1114  0189  16 00       	ld	d,0x00
1115  018B  21 00 00    	ld	hl,_class
1116  018E  19          	add	hl,de
1117  018F  5E          	ld	e, (hl)
1118  0190  16 00       	ld	d,0x00
1119  0192  21 00 00    	ld	hl,_sprite_frames
1120  0195  19          	add	hl, de
1121  0196  7E          	ld	a, (hl)
1122  0197  91          	sub	a, c
1123  0198  C2 5D 02    	jp	NZ,l_spr_move_right_00117
1124  019B  2A 00 00    	ld	hl,(_sprite)
1125  019E  26 00       	ld	h,0x00
1126  01A0  01 00 00    	ld	bc,_lin
1127  01A3  09          	add	hl,bc
1128  01A4  7E          	ld	a,(hl)
1129  01A5  32 00 00    	ld	(_s_lin1),a
1130  01A8  2A 00 00    	ld	hl,(_sprite)
1131  01AB  26 00       	ld	h,0x00
1132  01AD  01 00 00    	ld	bc,_col
1133  01B0  09          	add	hl,bc
1134  01B1  7E          	ld	a,(hl)
1135  01B2  FE 1E       	cp	a,0x1e
1136  01B4  30 4A       	jr	NC,l_spr_move_right_00107
1137  01B6  3C          	inc	a
1138  01B7  32 00 00    	ld	(_s_col1),a
1139  01BA  F5          	push	af
1140  01BB  33          	inc	sp
1141  01BC  3A 00 00    	ld	a,(_s_lin1)
1142  01BF  F5          	push	af
1143  01C0  33          	inc	sp
1144  01C1  CD 00 00    	call	_game_check_map
1145  01C4  F1          	pop	af
1146  01C5  7C          	ld	a,h
1147  01C6  B5          	or	a,l
1148  01C7  20 13       	jr	NZ,l_spr_move_right_00103
1149  01C9  3A 00 00    	ld	a,(_s_lin1)
1150  01CC  C6 0F       	add	a,0x0f
1151  01CE  4F          	ld	c, a
1152  01CF  3A 00 00    	ld	a, (_s_col1)
1153  01D2  47          	ld	b,a
1154  01D3  C5          	push	bc
1155  01D4  CD 00 00    	call	_game_check_map
1156  01D7  F1          	pop	af
1157  01D8  7C          	ld	a,h
1158  01D9  B5          	or	a,l
1159  01DA  28 24       	jr	Z,l_spr_move_right_00107
1160  01DC              l_spr_move_right_00103:
1161  01DC  2A 00 00    	ld	hl,(_sprite)
1162  01DF  26 00       	ld	h,0x00
1163  01E1  01 00 00    	ld	bc,_colint
1164  01E4  09          	add	hl,bc
1165  01E5  7E          	ld	a,(hl)
1166  01E6  C6 FF       	add	a,0xff
1167  01E8  77          	ld	(hl),a
1168  01E9  3A 00 00    	ld	a,(_sprite_on_air)
1169  01EC  B7          	or	a,a
1170  01ED  20 0D       	jr	NZ,l_spr_move_right_00102
1171  01EF  2A 00 00    	ld	hl,(_sprite)
1172  01F2  26 00       	ld	h,0x00
1173  01F4  01 00 00    	ld	bc,_colint
1174  01F7  09          	add	hl,bc
1175  01F8  7E          	ld	a,(hl)
1176  01F9  C6 FF       	add	a,0xff
1177  01FB  77          	ld	(hl),a
1178  01FC              l_spr_move_right_00102:
1179  01FC  2E 01       	ld	l,0x01
1180  01FE  18 5F       	jr	l_spr_move_right_00118
1181  0200              l_spr_move_right_00107:
1182  0200  2A 00 00    	ld	hl,(_sprite)
1183  0203  26 00       	ld	h,0x00
1184  0205  01 00 00    	ld	bc,_col
1185  0208  09          	add	hl,bc
1186  0209  34          	inc	(hl)
1187  020A  2A 00 00    	ld	hl,(_sprite)
1188  020D  26 00       	ld	h,0x00
1189  020F  01 00 00    	ld	bc,_colint
1190  0212  09          	add	hl,bc
1191  0213  AF          	xor	a,a
1192  0214  77          	ld	(hl),a
1193  0215  2A 00 00    	ld	hl,(_sprite)
1194  0218  26 00       	ld	h,0x00
1195  021A  01 00 00    	ld	bc,_col
1196  021D  09          	add	hl,bc
1197  021E  5E          	ld	e,(hl)
1198  021F  3E 1E       	ld	a,0x1e
1199  0221  93          	sub	a,e
1200  0222  30 39       	jr	NC,l_spr_move_right_00117
1201  0224  3A 00 00    	ld	a,(_sprite)
1202  0227  D6 07       	sub	a,0x07
1203  0229  28 04       	jr	Z,l_spr_move_right_00151
1204  022B  4D          	ld	c,l
1205  022C  44          	ld	b,h
1206  022D  18 27       	jr	l_spr_move_right_00112
1207  022F              l_spr_move_right_00151:
1208  022F  CD 49 03    	call	_spr_page_right
1209  0232  3A 00 00    	ld	a,(_sprite)
1210  0235  C6 00       	add	a,+((_col) & 0xFF)
1211  0237  4D          	ld	c,l
1212  0238  5F          	ld	e,a
1213  0239  3E 00       	ld	a,+((_col) / 256)
1214  023B  CE 00       	adc	a,0x00
1215  023D  57          	ld	d,a
1216  023E  79          	ld	a, c
1217  023F  B7          	or	a, a
1218  0240  28 0F       	jr	Z,l_spr_move_right_00109
1219  0242  AF          	xor	a, a
1220  0243  12          	ld	(de), a
1221  0244  3A 07 00    	ld	a,(_lin + 7)
1222  0247  32 00 00    	ld	(_player_lin_scr),a
1223  024A  21 00 00    	ld	hl,_player_col_scr
1224  024D  36 00       	ld	(hl),0x00
1225  024F  18 08       	jr	l_spr_move_right_00113
1226  0251              l_spr_move_right_00109:
1227  0251  3E 1E       	ld	a,0x1e
1228  0253  12          	ld	(de), a
1229  0254  18 03       	jr	l_spr_move_right_00113
1230  0256              l_spr_move_right_00112:
1231  0256  3E 1E       	ld	a,0x1e
1232  0258  02          	ld	(bc), a
1233  0259              l_spr_move_right_00113:
1234  0259  2E 01       	ld	l,0x01
1235  025B  18 02       	jr	l_spr_move_right_00118
1236  025D              l_spr_move_right_00117:
1237  025D  2E 00       	ld	l,0x00
1238  025F              l_spr_move_right_00118:
1239  025F  C9          	ret
1240  0260              	SECTION code_compiler
1241  0260              ;	---------------------------------
1242  0260              ; Function spr_move_left
1243  0260              ; ---------------------------------
1244  0260              _spr_move_left:
1245  0260  01 00 00    	ld	bc,_colint+0
1246  0263  79          	ld	a, c
1247  0264  21 00 00    	ld	hl,_sprite
1248  0267  86          	add	a, (hl)
1249  0268  5F          	ld	e, a
1250  0269  78          	ld	a, b
1251  026A  CE 00       	adc	a,0x00
1252  026C  57          	ld	d, a
1253  026D  1A          	ld	a, (de)
1254  026E  C6 FF       	add	a,0xff
1255  0270  12          	ld	(de), a
1256  0271  79          	ld	a, c
1257  0272  86          	add	a, (hl)
1258  0273  5F          	ld	e, a
1259  0274  78          	ld	a, b
1260  0275  CE 00       	adc	a,0x00
1261  0277  57          	ld	d, a
1262  0278  1A          	ld	a, (de)
1263  0279  3C          	inc	a
1264  027A  C2 46 03    	jp	NZ,l_spr_move_left_00117
1265  027D  5E          	ld	e,(hl)
1266  027E  16 00       	ld	d,0x00
1267  0280  21 00 00    	ld	hl,_lin
1268  0283  19          	add	hl,de
1269  0284  7E          	ld	a,(hl)
1270  0285  32 00 00    	ld	(_s_lin1),a
1271  0288  2A 00 00    	ld	hl,(_sprite)
1272  028B  26 00       	ld	h,0x00
1273  028D  11 00 00    	ld	de,_col
1274  0290  19          	add	hl,de
1275  0291  7E          	ld	a,(hl)
1276  0292  B7          	or	a, a
1277  0293  28 44       	jr	Z,l_spr_move_left_00107
1278  0295  C6 FF       	add	a,0xff
1279  0297  32 00 00    	ld	(_s_col1),a
1280  029A  C5          	push	bc
1281  029B  F5          	push	af
1282  029C  33          	inc	sp
1283  029D  3A 00 00    	ld	a,(_s_lin1)
1284  02A0  F5          	push	af
1285  02A1  33          	inc	sp
1286  02A2  CD 00 00    	call	_game_check_map
1287  02A5  F1          	pop	af
1288  02A6  C1          	pop	bc
1289  02A7  7C          	ld	a,h
1290  02A8  B5          	or	a,l
1291  02A9  20 16       	jr	NZ,l_spr_move_left_00103
1292  02AB  3A 00 00    	ld	a,(_s_lin1)
1293  02AE  C6 0F       	add	a,0x0f
1294  02B0  57          	ld	d, a
1295  02B1  3A 00 00    	ld	a,(_s_col1)
1296  02B4  C5          	push	bc
1297  02B5  5A          	ld	e,d
1298  02B6  57          	ld	d,a
1299  02B7  D5          	push	de
1300  02B8  CD 00 00    	call	_game_check_map
1301  02BB  F1          	pop	af
1302  02BC  C1          	pop	bc
1303  02BD  7C          	ld	a,h
1304  02BE  B5          	or	a,l
1305  02BF  28 18       	jr	Z,l_spr_move_left_00107
1306  02C1              l_spr_move_left_00103:
1307  02C1  2A 00 00    	ld	hl,(_sprite)
1308  02C4  26 00       	ld	h,0x00
1309  02C6  09          	add	hl,bc
1310  02C7  34          	inc	(hl)
1311  02C8  3A 00 00    	ld	a,(_sprite_on_air)
1312  02CB  B7          	or	a, a
1313  02CC  20 07       	jr	NZ,l_spr_move_left_00102
1314  02CE  2A 00 00    	ld	hl,(_sprite)
1315  02D1  26 00       	ld	h,0x00
1316  02D3  09          	add	hl,bc
1317  02D4  34          	inc	(hl)
1318  02D5              l_spr_move_left_00102:
1319  02D5  2E 01       	ld	l,0x01
1320  02D7  18 6F       	jr	l_spr_move_left_00118
1321  02D9              l_spr_move_left_00107:
1322  02D9  2A 00 00    	ld	hl,(_sprite)
1323  02DC  26 00       	ld	h,0x00
1324  02DE  11 00 00    	ld	de,_col
1325  02E1  19          	add	hl,de
1326  02E2  7E          	ld	a,(hl)
1327  02E3  EB          	ex	de,hl
1328  02E4  C6 FF       	add	a,0xff
1329  02E6  12          	ld	(de),a
1330  02E7  79          	ld	a,c
1331  02E8  21 00 00    	ld	hl,_sprite
1332  02EB  86          	add	a, (hl)
1333  02EC  4F          	ld	c, a
1334  02ED  78          	ld	a, b
1335  02EE  CE 00       	adc	a,0x00
1336  02F0  47          	ld	b, a
1337  02F1  5E          	ld	e,(hl)
1338  02F2  16 00       	ld	d,0x00
1339  02F4  21 00 00    	ld	hl,_class
1340  02F7  19          	add	hl,de
1341  02F8  5E          	ld	e, (hl)
1342  02F9  16 00       	ld	d,0x00
1343  02FB  21 00 00    	ld	hl,_sprite_frames
1344  02FE  19          	add	hl, de
1345  02FF  5E          	ld	e, (hl)
1346  0300  1D          	dec	e
1347  0301  7B          	ld	a, e
1348  0302  02          	ld	(bc), a
1349  0303  2A 00 00    	ld	hl,(_sprite)
1350  0306  26 00       	ld	h,0x00
1351  0308  01 00 00    	ld	bc,_col
1352  030B  09          	add	hl,bc
1353  030C  7E          	ld	a,(hl)
1354  030D  3C          	inc	a
1355  030E  20 36       	jr	NZ,l_spr_move_left_00117
1356  0310  3A 00 00    	ld	a,(_sprite)
1357  0313  D6 07       	sub	a,0x07
1358  0315  4D          	ld	c,l
1359  0316  44          	ld	b,h
1360  0317  20 27       	jr	NZ,l_spr_move_left_00112
1361  0319  CD 63 03    	call	_spr_page_left
1362  031C  3A 00 00    	ld	a,(_sprite)
1363  031F  C6 00       	add	a,+((_col) & 0xFF)
1364  0321  4D          	ld	c,l
1365  0322  5F          	ld	e,a
1366  0323  3E 00       	ld	a,+((_col) / 256)
1367  0325  CE 00       	adc	a,0x00
1368  0327  57          	ld	d,a
1369  0328  79          	ld	a, c
1370  0329  B7          	or	a, a
1371  032A  28 10       	jr	Z,l_spr_move_left_00109
1372  032C  3E 1E       	ld	a,0x1e
1373  032E  12          	ld	(de), a
1374  032F  3A 07 00    	ld	a,(_lin + 7)
1375  0332  32 00 00    	ld	(_player_lin_scr),a
1376  0335  21 00 00    	ld	hl,_player_col_scr
1377  0338  36 1E       	ld	(hl),0x1e
1378  033A  18 06       	jr	l_spr_move_left_00113
1379  033C              l_spr_move_left_00109:
1380  033C  AF          	xor	a, a
1381  033D  12          	ld	(de), a
1382  033E  18 02       	jr	l_spr_move_left_00113
1383  0340              l_spr_move_left_00112:
1384  0340  AF          	xor	a, a
1385  0341  02          	ld	(bc), a
1386  0342              l_spr_move_left_00113:
1387  0342  2E 01       	ld	l,0x01
1388  0344  18 02       	jr	l_spr_move_left_00118
1389  0346              l_spr_move_left_00117:
1390  0346  2E 00       	ld	l,0x00
1391  0348              l_spr_move_left_00118:
1392  0348  C9          	ret
1393  0349              	SECTION code_compiler
1394  0349              ;	---------------------------------
1395  0349              ; Function spr_page_right
1396  0349              ; ---------------------------------
1397  0349              _spr_page_right:
1398  0349  3A 00 00    	ld	a,(_scr_curr)
1399  034C  21 00 00    	ld	hl,_map_width
1400  034F  96          	sub	a, (hl)
1401  0350  30 0E       	jr	NC,l_spr_page_right_00102
1402  0352  21 00 00    	ld	hl,_scr_curr
1403  0355  34          	inc	(hl)
1404  0356  CD 89 03    	call	_spr_page_map
1405  0359  CD 00 00    	call	_game_draw_screen
1406  035C  2E 01       	ld	l,0x01
1407  035E  18 02       	jr	l_spr_page_right_00103
1408  0360              l_spr_page_right_00102:
1409  0360  2E 00       	ld	l,0x00
1410  0362              l_spr_page_right_00103:
1411  0362  C9          	ret
1412  0363              	SECTION code_compiler
1413  0363              ;	---------------------------------
1414  0363              ; Function spr_page_left
1415  0363              ; ---------------------------------
1416  0363              _spr_page_left:
1417  0363  2A 00 00    	ld	hl,(_sprite)
1418  0366  26 00       	ld	h,0x00
1419  0368  01 00 00    	ld	bc,_class
1420  036B  09          	add	hl,bc
1421  036C  7E          	ld	a,(hl)
1422  036D  B7          	or	a, a
1423  036E  28 04       	jr	Z,l_spr_page_left_00102
1424  0370  2E 00       	ld	l,0x00
1425  0372  18 14       	jr	l_spr_page_left_00105
1426  0374              l_spr_page_left_00102:
1427  0374  21 00 00    	ld	hl,_scr_curr
1428  0377  7E          	ld	a, (hl)
1429  0378  B7          	or	a, a
1430  0379  28 0B       	jr	Z,l_spr_page_left_00104
1431  037B  35          	dec	(hl)
1432  037C  CD 89 03    	call	_spr_page_map
1433  037F  CD 00 00    	call	_game_draw_screen
1434  0382  2E 01       	ld	l,0x01
1435  0384  18 02       	jr	l_spr_page_left_00105
1436  0386              l_spr_page_left_00104:
1437  0386  2E 00       	ld	l,0x00
1438  0388              l_spr_page_left_00105:
1439  0388  C9          	ret
1440  0389              	SECTION code_compiler
1441  0389              ;	---------------------------------
1442  0389              ; Function spr_page_map
1443  0389              ; ---------------------------------
1444  0389              _spr_page_map:
1445  0389  CD 00 00    	call	___sdcc_enter_ix
1446  038C  F5          	push	af
1447  038D  F5          	push	af
1448  038E  0E 10       	ld	c,0x10
1449  0390  F3          	di
1450  0391  C5          	push	bc
1451  0392  3E 16       	ld	a,0x16
1452  0394  01 FD 7F    	ld	bc,_IO_7FFD
1453  0397  ED 79       	out	(c),a
1454  0399  C1          	pop	bc
1455  039A  21 00 00    	ld	hl,_start_scr0
1456  039D  46          	ld	b, (hl)
1457  039E  21 00 00    	ld	hl,_GLOBAL_ZX_PORT_7FFD
1458  03A1  36 10       	ld	(hl),0x10
1459  03A3  C5          	push	bc
1460  03A4  3E 10       	ld	a,0x10
1461  03A6  01 FD 7F    	ld	bc,_IO_7FFD
1462  03A9  ED 79       	out	(c),a
1463  03AB  C1          	pop	bc
1464  03AC  21 00 00    	ld	hl,_game_start_scr
1465  03AF  70          	ld	(hl), b
1466  03B0  21 00 00    	ld	hl,0x0000
1467  03B3  E3          	ex	(sp), hl
1468  03B4  3A 00 00    	ld	a,(_scr_curr)
1469  03B7  3C          	inc	a
1470  03B8  20 06       	jr	NZ,l_spr_page_map_00133
1471  03BA  3A 00 00    	ld	a,(_game_start_scr)
1472  03BD  32 00 00    	ld	(_scr_curr),a
1473  03C0              l_spr_page_map_00133:
1474  03C0  1E 00       	ld	e,0x00
1475  03C2              l_spr_page_map_00103:
1476  03C2  7B          	ld	a, e
1477  03C3  21 00 00    	ld	hl,_scr_curr
1478  03C6  96          	sub	a, (hl)
1479  03C7  30 31       	jr	NC,l_spr_page_map_00105
1480  03C9  C5          	push	bc
1481  03CA  3E 16       	ld	a,0x16
1482  03CC  01 FD 7F    	ld	bc,_IO_7FFD
1483  03CF  ED 79       	out	(c),a
1484  03D1  C1          	pop	bc
1485  03D2  16 00       	ld	d,0x00
1486  03D4  21 00 00    	ld	hl,_lenght0
1487  03D7  19          	add	hl, de
1488  03D8  46          	ld	b, (hl)
1489  03D9  16 00       	ld	d,0x00
1490  03DB  21 00 00    	ld	hl,_GLOBAL_ZX_PORT_7FFD
1491  03DE  36 10       	ld	(hl),0x10
1492  03E0  C5          	push	bc
1493  03E1  3E 10       	ld	a,0x10
1494  03E3  01 FD 7F    	ld	bc,_IO_7FFD
1495  03E6  ED 79       	out	(c),a
1496  03E8  C1          	pop	bc
1497  03E9  DD 7E FC    	ld	a,(ix-4)
1498  03EC  80          	add	a, b
1499  03ED  DD 77 FC    	ld	(ix-4),a
1500  03F0  DD 7E FD    	ld	a,(ix-3)
1501  03F3  8A          	adc	a, d
1502  03F4  DD 77 FD    	ld	(ix-3),a
1503  03F7  1C          	inc	e
1504  03F8  18 C8       	jr	l_spr_page_map_00103
1505  03FA              l_spr_page_map_00105:
1506  03FA  FB          	ei
1507  03FB  F3          	di
1508  03FC  DD 36 FE 00 	ld	(ix-2),0x00
1509  0400              l_spr_page_map_00125:
1510  0400  C5          	push	bc
1511  0401  3E 16       	ld	a,0x16
1512  0403  01 FD 7F    	ld	bc,_IO_7FFD
1513  0406  ED 79       	out	(c),a
1514  0408  C1          	pop	bc
1515  0409  DD 46 FE    	ld	b,(ix-2)
1516  040C  16 00       	ld	d,0x00
1517  040E  DD 7E FC    	ld	a,(ix-4)
1518  0411  80          	add	a, b
1519  0412  5F          	ld	e, a
1520  0413  DD 7E FD    	ld	a,(ix-3)
1521  0416  8A          	adc	a, d
1522  0417  57          	ld	d, a
1523  0418  21 00 00    	ld	hl,_world0
1524  041B  19          	add	hl, de
1525  041C  46          	ld	b, (hl)
1526  041D  13          	inc	de
1527  041E  21 00 00    	ld	hl,_world0
1528  0421  19          	add	hl, de
1529  0422  5E          	ld	e, (hl)
1530  0423  21 00 00    	ld	hl,_GLOBAL_ZX_PORT_7FFD
1531  0426  36 10       	ld	(hl),0x10
1532  0428  C5          	push	bc
1533  0429  3E 10       	ld	a,0x10
1534  042B  01 FD 7F    	ld	bc,_IO_7FFD
1535  042E  ED 79       	out	(c),a
1536  0430  C1          	pop	bc
1537  0431  78          	ld	a, b
1538  0432  D6 80       	sub	a,0x80
1539  0434  30 20       	jr	NC,l_spr_page_map_00116
1540  0436  59          	ld	e, c
1541  0437  16 00       	ld	d,0x00
1542  0439  C5          	push	bc
1543  043A  D5          	push	de
1544  043B  CD 00 00    	call	_game_obj_chk
1545  043E  F1          	pop	af
1546  043F  C1          	pop	bc
1547  0440  5D          	ld	e,l
1548  0441  3E 00       	ld	a, +((_scr_map) & 0xFF)
1549  0443  81          	add	a, c
1550  0444  6F          	ld	l, a
1551  0445  3E 00       	ld	a, +((_scr_map) / 256)
1552  0447  CE 00       	adc	a,0x00
1553  0449  67          	ld	h, a
1554  044A  7B          	ld	a, e
1555  044B  B7          	or	a, a
1556  044C  20 03       	jr	NZ,l_spr_page_map_00107
1557  044E  70          	ld	(hl), b
1558  044F  18 02       	jr	l_spr_page_map_00108
1559  0451              l_spr_page_map_00107:
1560  0451  36 00       	ld	(hl),0x00
1561  0453              l_spr_page_map_00108:
1562  0453  0C          	inc	c
1563  0454  18 3A       	jr	l_spr_page_map_00117
1564  0456              l_spr_page_map_00116:
1565  0456  78          	ld	a, b
1566  0457  C6 80       	add	a,0x80
1567  0459  DD 77 FF    	ld	(ix-1),a
1568  045C  16 00       	ld	d,0x00
1569  045E              l_spr_page_map_00123:
1570  045E  7A          	ld	a, d
1571  045F  DD 96 FF    	sub	a,(ix-1)
1572  0462  30 29       	jr	NC,l_spr_page_map_00144
1573  0464  69          	ld	l, c
1574  0465  26 00       	ld	h,0x00
1575  0467  C5          	push	bc
1576  0468  D5          	push	de
1577  0469  E5          	push	hl
1578  046A  CD 00 00    	call	_game_obj_chk
1579  046D  F1          	pop	af
1580  046E  D1          	pop	de
1581  046F  C1          	pop	bc
1582  0470  7D          	ld	a,l
1583  0471  B7          	or	a,a
1584  0472  20 08       	jr	NZ,l_spr_page_map_00110
1585  0474  47          	ld	b,a
1586  0475  21 00 00    	ld	hl,_scr_map
1587  0478  09          	add	hl, bc
1588  0479  73          	ld	(hl), e
1589  047A  18 08       	jr	l_spr_page_map_00111
1590  047C              l_spr_page_map_00110:
1591  047C  06 00       	ld	b,0x00
1592  047E  21 00 00    	ld	hl,_scr_map
1593  0481  09          	add	hl, bc
1594  0482  36 00       	ld	(hl),0x00
1595  0484              l_spr_page_map_00111:
1596  0484  0C          	inc	c
1597  0485  79          	ld	a, c
1598  0486  D6 A0       	sub	a,0xa0
1599  0488  30 03       	jr	NC,l_spr_page_map_00144
1600  048A  14          	inc	d
1601  048B  18 D1       	jr	l_spr_page_map_00123
1602  048D              l_spr_page_map_00144:
1603  048D  DD 34 FE    	inc	(ix-2)
1604  0490              l_spr_page_map_00117:
1605  0490  79          	ld	a, c
1606  0491  D6 A0       	sub	a,0xa0
1607  0493  30 0B       	jr	NC,l_spr_page_map_00120
1608  0495  DD 34 FE    	inc	(ix-2)
1609  0498  DD 7E FE    	ld	a,(ix-2)
1610  049B  D6 A0       	sub	a,0xa0
1611  049D  DA 00 04    	jp	C, l_spr_page_map_00125
1612  04A0              l_spr_page_map_00120:
1613  04A0  CD C5 0A    	call	_spr_init_anim_bullets
1614  04A3  FB          	ei
1615  04A4  CD 00 00    	call	_NIRVANAP_start
1616  04A7  0E 00       	ld	c,0x00
1617  04A9              l_spr_page_map_00127:
1618  04A9  06 00       	ld	b,0x00
1619  04AB  21 00 00    	ld	hl,_class
1620  04AE  09          	add	hl, bc
1621  04AF  36 00       	ld	(hl),0x00
1622  04B1  C5          	push	bc
1623  04B2  21 00 00    	ld	hl,0x0000
1624  04B5  E5          	push	hl
1625  04B6  AF          	xor	a, a
1626  04B7  F5          	push	af
1627  04B8  33          	inc	sp
1628  04B9  79          	ld	a, c
1629  04BA  F5          	push	af
1630  04BB  33          	inc	sp
1631  04BC  CD 00 00    	call	_NIRVANAP_spriteT_callee
1632  04BF  C1          	pop	bc
1633  04C0  0C          	inc	c
1634  04C1  79          	ld	a, c
1635  04C2  D6 07       	sub	a,0x07
1636  04C4  38 E3       	jr	C,l_spr_page_map_00127
1637  04C6  DD F9       	ld	sp, ix
1638  04C8  DD E1       	pop	ix
1639  04CA  C9          	ret
1640  04CB              	SECTION code_compiler
1641  04CB              ;	---------------------------------
1642  04CB              ; Function spr_redraw
1643  04CB              ; ---------------------------------
1644  04CB              _spr_redraw:
1645  04CB  2A 00 00    	ld	hl,(_sprite)
1646  04CE  26 00       	ld	h,0x00
1647  04D0  01 00 00    	ld	bc,_tile
1648  04D3  09          	add	hl,bc
1649  04D4  4E          	ld	c, (hl)
1650  04D5  3A 00 00    	ld	a,(_sprite)
1651  04D8  5F          	ld	e,a
1652  04D9  16 00       	ld	d,0x00
1653  04DB  21 00 00    	ld	hl,_colint
1654  04DE  19          	add	hl,de
1655  04DF  7E          	ld	a,(hl)
1656  04E0  81          	add	a,c
1657  04E1  32 00 00    	ld	(_s_tile1),a
1658  04E4  2A 00 00    	ld	hl,(_sprite)
1659  04E7  26 00       	ld	h,0x00
1660  04E9  01 00 00    	ld	bc,_col
1661  04EC  09          	add	hl,bc
1662  04ED  7E          	ld	a,(hl)
1663  04EE  32 00 00    	ld	(_s_col1),a
1664  04F1  2A 00 00    	ld	hl,(_sprite)
1665  04F4  26 00       	ld	h,0x00
1666  04F6  01 00 00    	ld	bc,_lin
1667  04F9  09          	add	hl,bc
1668  04FA  7E          	ld	a,(hl)
1669  04FB  21 00 00    	ld	hl,_s_lin1
1670  04FE  77          	ld	(hl),a
1671  04FF  4F          	ld	c,a
1672  0500  7E          	ld	a, (hl)
1673  0501  21 00 00    	ld	hl,_s_lin0
1674  0504  96          	sub	a, (hl)
1675  0505  20 0A       	jr	NZ,l_spr_redraw_00117
1676  0507  3A 00 00    	ld	a,(_s_col1)
1677  050A  21 00 00    	ld	hl,_s_col0
1678  050D  96          	sub	a, (hl)
1679  050E  CA AE 05    	jp	Z,l_spr_redraw_00118
1680  0511              l_spr_redraw_00117:
1681  0511  3A 00 00    	ld	a,(_sprite)
1682  0514  D6 07       	sub	a,0x07
1683  0516  20 04       	jr	NZ,l_spr_redraw_00158
1684  0518  3E 01       	ld	a,0x01
1685  051A  18 01       	jr	l_spr_redraw_00159
1686  051C              l_spr_redraw_00158:
1687  051C  AF          	xor	a,a
1688  051D              l_spr_redraw_00159:
1689  051D  47          	ld	b,a
1690  051E  B7          	or	a, a
1691  051F  28 12       	jr	Z,l_spr_redraw_00105
1692  0521  3A 00 00    	ld	a,(_player_over_stair)
1693  0524  B7          	or	a, a
1694  0525  28 0C       	jr	Z,l_spr_redraw_00105
1695  0527  79          	ld	a, c
1696  0528  E6 03       	and	a,0x03
1697  052A  20 07       	jr	NZ,l_spr_redraw_00105
1698  052C  21 00 00    	ld	hl,_s_tile1
1699  052F  34          	inc	(hl)
1700  0530  34          	inc	(hl)
1701  0531  34          	inc	(hl)
1702  0532  34          	inc	(hl)
1703  0533              l_spr_redraw_00105:
1704  0533  78          	ld	a, b
1705  0534  B7          	or	a, a
1706  0535  28 05       	jr	Z,l_spr_redraw_00113
1707  0537  CD 42 09    	call	_spr_back_repaint
1708  053A  18 5B       	jr	l_spr_redraw_00114
1709  053C              l_spr_redraw_00113:
1710  053C  3A 00 00    	ld	a,(_s_lin1)
1711  053F  E6 07       	and	a,0x07
1712  0541  20 05       	jr	NZ,l_spr_redraw_00110
1713  0543  CD 42 09    	call	_spr_back_repaint
1714  0546  18 4F       	jr	l_spr_redraw_00114
1715  0548              l_spr_redraw_00110:
1716  0548  21 00 00    	ld	hl,_s_state
1717  054B  CB 46       	bit	0, (hl)
1718  054D  28 26       	jr	Z,l_spr_redraw_00107
1719  054F  3A 00 00    	ld	a,(_s_lin0)
1720  0552  C6 08       	add	a,0x08
1721  0554  47          	ld	b, a
1722  0555  3A 00 00    	ld	a,(_s_col0)
1723  0558  F5          	push	af
1724  0559  33          	inc	sp
1725  055A  C5          	push	bc
1726  055B  33          	inc	sp
1727  055C  3A 00 00    	ld	a,(_map_paper_clr)
1728  055F  F5          	push	af
1729  0560  33          	inc	sp
1730  0561  CD 00 00    	call	_NIRVANAP_fillC_callee
1731  0564  21 00 00    	ld	hl,_s_col0
1732  0567  56          	ld	d, (hl)
1733  0568  14          	inc	d
1734  0569  58          	ld	e,b
1735  056A  3A 00 00    	ld	a,(_map_paper_clr)
1736  056D  D5          	push	de
1737  056E  F5          	push	af
1738  056F  33          	inc	sp
1739  0570  CD 00 00    	call	_NIRVANAP_fillC_callee
1740  0573  18 22       	jr	l_spr_redraw_00114
1741  0575              l_spr_redraw_00107:
1742  0575  2A FF FF    	ld	hl,(_s_col0 - 1)
1743  0578  3A 00 00    	ld	a,(_s_lin0)
1744  057B  6F          	ld	l,a
1745  057C  3A 00 00    	ld	a,(_map_paper_clr)
1746  057F  E5          	push	hl
1747  0580  F5          	push	af
1748  0581  33          	inc	sp
1749  0582  CD 00 00    	call	_NIRVANAP_fillC_callee
1750  0585  21 00 00    	ld	hl,_s_col0
1751  0588  46          	ld	b, (hl)
1752  0589  04          	inc	b
1753  058A  C5          	push	bc
1754  058B  33          	inc	sp
1755  058C  2A FF FF    	ld	hl,(_s_lin0 - 1)
1756  058F  3A 00 00    	ld	a,(_map_paper_clr)
1757  0592  6F          	ld	l,a
1758  0593  E5          	push	hl
1759  0594  CD 00 00    	call	_NIRVANAP_fillC_callee
1760  0597              l_spr_redraw_00114:
1761  0597  2A FF FF    	ld	hl,(_s_col1 - 1)
1762  059A  3A 00 00    	ld	a,(_s_lin1)
1763  059D  6F          	ld	l,a
1764  059E  E5          	push	hl
1765  059F  2A FF FF    	ld	hl,(_s_tile1 - 1)
1766  05A2  3A 00 00    	ld	a,(_sprite)
1767  05A5  6F          	ld	l,a
1768  05A6  E5          	push	hl
1769  05A7  CD 00 00    	call	_NIRVANAP_spriteT_callee
1770  05AA  2E 01       	ld	l,0x01
1771  05AC  18 22       	jr	l_spr_redraw_00121
1772  05AE              l_spr_redraw_00118:
1773  05AE  3A 00 00    	ld	a,(_s_tile1)
1774  05B1  21 00 00    	ld	hl,_s_tile0
1775  05B4  96          	sub	a, (hl)
1776  05B5  28 17       	jr	Z,l_spr_redraw_00119
1777  05B7  2A FF FF    	ld	hl,(_s_col1 - 1)
1778  05BA  3A 00 00    	ld	a,(_s_lin1)
1779  05BD  6F          	ld	l,a
1780  05BE  E5          	push	hl
1781  05BF  2A FF FF    	ld	hl,(_s_tile1 - 1)
1782  05C2  3A 00 00    	ld	a,(_sprite)
1783  05C5  6F          	ld	l,a
1784  05C6  E5          	push	hl
1785  05C7  CD 00 00    	call	_NIRVANAP_spriteT_callee
1786  05CA  2E 00       	ld	l,0x00
1787  05CC  18 02       	jr	l_spr_redraw_00121
1788  05CE              l_spr_redraw_00119:
1789  05CE  2E 00       	ld	l,0x00
1790  05D0              l_spr_redraw_00121:
1791  05D0  C9          	ret
1792  05D1              	SECTION code_compiler
1793  05D1              ;	---------------------------------
1794  05D1              ; Function spr_destroy
1795  05D1              ; ---------------------------------
1796  05D1              _spr_destroy:
1797  05D1  CD 00 00    	call	___sdcc_enter_ix
1798  05D4  F5          	push	af
1799  05D5  4D          	ld	c, l
1800  05D6  21 00 00    	ld	hl,_spr_count
1801  05D9  35          	dec	(hl)
1802  05DA  3E 00       	ld	a, +((_lin) & 0xFF)
1803  05DC  81          	add	a, c
1804  05DD  DD 77 FE    	ld	(ix-2),a
1805  05E0  3E 00       	ld	a, +((_lin) / 256)
1806  05E2  CE 00       	adc	a,0x00
1807  05E4  DD 77 FF    	ld	(ix-1),a
1808  05E7  E1          	pop	hl
1809  05E8  7E          	ld	a,(hl)
1810  05E9  E5          	push	hl
1811  05EA  32 00 00    	ld	(_s_lin0),a
1812  05ED  3E 00       	ld	a, +((_col) & 0xFF)
1813  05EF  81          	add	a, c
1814  05F0  5F          	ld	e, a
1815  05F1  3E 00       	ld	a, +((_col) / 256)
1816  05F3  CE 00       	adc	a,0x00
1817  05F5  57          	ld	d, a
1818  05F6  1A          	ld	a, (de)
1819  05F7  32 00 00    	ld	(_s_col0),a
1820  05FA  C5          	push	bc
1821  05FB  D5          	push	de
1822  05FC  21 00 00    	ld	hl,0x0000
1823  05FF  E5          	push	hl
1824  0600  AF          	xor	a, a
1825  0601  F5          	push	af
1826  0602  33          	inc	sp
1827  0603  79          	ld	a, c
1828  0604  F5          	push	af
1829  0605  33          	inc	sp
1830  0606  CD 00 00    	call	_NIRVANAP_spriteT_callee
1831  0609  CD 42 09    	call	_spr_back_repaint
1832  060C  D1          	pop	de
1833  060D  C1          	pop	bc
1834  060E  06 00       	ld	b,0x00
1835  0610  21 00 00    	ld	hl,_tile
1836  0613  09          	add	hl, bc
1837  0614  AF          	xor	a,a
1838  0615  77          	ld	(hl),a
1839  0616  E1          	pop	hl
1840  0617  12          	ld	(de),a
1841  0618  E5          	push	hl
1842  0619  36 00       	ld	(hl),0x00
1843  061B  11 00 00    	ld	de,_class+0
1844  061E  69          	ld	l,c
1845  061F  26 00       	ld	h,0x00
1846  0621  19          	add	hl, de
1847  0622  36 00       	ld	(hl),0x00
1848  0624  11 00 00    	ld	de,_state+0
1849  0627  69          	ld	l,c
1850  0628  26 00       	ld	h,0x00
1851  062A  19          	add	hl, de
1852  062B  36 00       	ld	(hl),0x00
1853  062D  11 00 00    	ld	de,_state_a+0
1854  0630  69          	ld	l,c
1855  0631  26 00       	ld	h,0x00
1856  0633  19          	add	hl, de
1857  0634  F1          	pop	af
1858  0635  36 00       	ld	(hl),0x00
1859  0637  DD E1       	pop	ix
1860  0639  C9          	ret
1861  063A              	SECTION code_compiler
1862  063A              ;	---------------------------------
1863  063A              ; Function spr_tile
1864  063A              ; ---------------------------------
1865  063A              _spr_tile:
1866  063A  45          	ld	b,l
1867  063B  11 00 00    	ld	de,_class+0
1868  063E  26 00       	ld	h,0x00
1869  0640  19          	add	hl, de
1870  0641  5E          	ld	e, (hl)
1871  0642  3E 13       	ld	a,0x13
1872  0644  93          	sub	a, e
1873  0645  DA 78 07    	jp	C, l_spr_tile_00116
1874  0648  16 00       	ld	d,0x00
1875  064A  21 51 06    	ld	hl,l_spr_tile_00123
1876  064D  19          	add	hl, de
1877  064E  19          	add	hl, de
1878  064F  19          	add	hl, de
1879  0650  E9          	jp	(hl)
1880  0651              l_spr_tile_00123:
1881  0651  C3 78 07    	jp	l_spr_tile_00116
1882  0654  C3 78 07    	jp	l_spr_tile_00116
1883  0657  C3 DF 06    	jp	l_spr_tile_00106
1884  065A  C3 F0 06    	jp	l_spr_tile_00107
1885  065D  C3 00 07    	jp	l_spr_tile_00108
1886  0660  C3 0F 07    	jp	l_spr_tile_00109
1887  0663  C3 4B 07    	jp	l_spr_tile_00113
1888  0666  C3 5A 07    	jp	l_spr_tile_00114
1889  0669  C3 69 07    	jp	l_spr_tile_00115
1890  066C  C3 78 07    	jp	l_spr_tile_00116
1891  066F  C3 78 07    	jp	l_spr_tile_00116
1892  0672  C3 8D 06    	jp	l_spr_tile_00101
1893  0675  C3 9D 06    	jp	l_spr_tile_00102
1894  0678  C3 AD 06    	jp	l_spr_tile_00103
1895  067B  C3 BE 06    	jp	l_spr_tile_00104
1896  067E  C3 CE 06    	jp	l_spr_tile_00105
1897  0681  C3 1E 07    	jp	l_spr_tile_00110
1898  0684  C3 78 07    	jp	l_spr_tile_00116
1899  0687  C3 2D 07    	jp	l_spr_tile_00111
1900  068A  C3 3C 07    	jp	l_spr_tile_00112
1901  068D              l_spr_tile_00101:
1902  068D  AF          	xor	a, a
1903  068E  48          	ld	c,b
1904  068F  47          	ld	b,a
1905  0690  C5          	push	bc
1906  0691  3E 90       	ld	a,0x90
1907  0693  F5          	push	af
1908  0694  33          	inc	sp
1909  0695  CD 7B 07    	call	_spr_tile_dir
1910  0698  F1          	pop	af
1911  0699  33          	inc	sp
1912  069A  C3 7A 07    	jp	l_spr_tile_00117
1913  069D              l_spr_tile_00102:
1914  069D  AF          	xor	a, a
1915  069E  48          	ld	c,b
1916  069F  47          	ld	b,a
1917  06A0  C5          	push	bc
1918  06A1  3E 94       	ld	a,0x94
1919  06A3  F5          	push	af
1920  06A4  33          	inc	sp
1921  06A5  CD 7B 07    	call	_spr_tile_dir
1922  06A8  F1          	pop	af
1923  06A9  33          	inc	sp
1924  06AA  C3 7A 07    	jp	l_spr_tile_00117
1925  06AD              l_spr_tile_00103:
1926  06AD  3E 02       	ld	a,0x02
1927  06AF  48          	ld	c,b
1928  06B0  47          	ld	b,a
1929  06B1  C5          	push	bc
1930  06B2  3E 98       	ld	a,0x98
1931  06B4  F5          	push	af
1932  06B5  33          	inc	sp
1933  06B6  CD 7B 07    	call	_spr_tile_dir
1934  06B9  F1          	pop	af
1935  06BA  33          	inc	sp
1936  06BB  C3 7A 07    	jp	l_spr_tile_00117
1937  06BE              l_spr_tile_00104:
1938  06BE  AF          	xor	a, a
1939  06BF  48          	ld	c,b
1940  06C0  47          	ld	b,a
1941  06C1  C5          	push	bc
1942  06C2  3E 9C       	ld	a,0x9c
1943  06C4  F5          	push	af
1944  06C5  33          	inc	sp
1945  06C6  CD 7B 07    	call	_spr_tile_dir
1946  06C9  F1          	pop	af
1947  06CA  33          	inc	sp
1948  06CB  C3 7A 07    	jp	l_spr_tile_00117
1949  06CE              l_spr_tile_00105:
1950  06CE  3E 04       	ld	a,0x04
1951  06D0  48          	ld	c,b
1952  06D1  47          	ld	b,a
1953  06D2  C5          	push	bc
1954  06D3  3E A0       	ld	a,0xa0
1955  06D5  F5          	push	af
1956  06D6  33          	inc	sp
1957  06D7  CD 7B 07    	call	_spr_tile_dir
1958  06DA  F1          	pop	af
1959  06DB  33          	inc	sp
1960  06DC  C3 7A 07    	jp	l_spr_tile_00117
1961  06DF              l_spr_tile_00106:
1962  06DF  3E 02       	ld	a,0x02
1963  06E1  48          	ld	c,b
1964  06E2  47          	ld	b,a
1965  06E3  C5          	push	bc
1966  06E4  3E A8       	ld	a,0xa8
1967  06E6  F5          	push	af
1968  06E7  33          	inc	sp
1969  06E8  CD 7B 07    	call	_spr_tile_dir
1970  06EB  F1          	pop	af
1971  06EC  33          	inc	sp
1972  06ED  C3 7A 07    	jp	l_spr_tile_00117
1973  06F0              l_spr_tile_00107:
1974  06F0  AF          	xor	a, a
1975  06F1  48          	ld	c,b
1976  06F2  47          	ld	b,a
1977  06F3  C5          	push	bc
1978  06F4  3E AC       	ld	a,0xac
1979  06F6  F5          	push	af
1980  06F7  33          	inc	sp
1981  06F8  CD 7B 07    	call	_spr_tile_dir
1982  06FB  F1          	pop	af
1983  06FC  33          	inc	sp
1984  06FD  C3 7A 07    	jp	l_spr_tile_00117
1985  0700              l_spr_tile_00108:
1986  0700  AF          	xor	a, a
1987  0701  48          	ld	c,b
1988  0702  47          	ld	b,a
1989  0703  C5          	push	bc
1990  0704  3E AE       	ld	a,0xae
1991  0706  F5          	push	af
1992  0707  33          	inc	sp
1993  0708  CD 7B 07    	call	_spr_tile_dir
1994  070B  F1          	pop	af
1995  070C  33          	inc	sp
1996  070D  18 6B       	jr	l_spr_tile_00117
1997  070F              l_spr_tile_00109:
1998  070F  AF          	xor	a, a
1999  0710  48          	ld	c,b
2000  0711  47          	ld	b,a
2001  0712  C5          	push	bc
2002  0713  3E B0       	ld	a,0xb0
2003  0715  F5          	push	af
2004  0716  33          	inc	sp
2005  0717  CD 7B 07    	call	_spr_tile_dir
2006  071A  F1          	pop	af
2007  071B  33          	inc	sp
2008  071C  18 5C       	jr	l_spr_tile_00117
2009  071E              l_spr_tile_00110:
2010  071E  AF          	xor	a, a
2011  071F  48          	ld	c,b
2012  0720  47          	ld	b,a
2013  0721  C5          	push	bc
2014  0722  3E B2       	ld	a,0xb2
2015  0724  F5          	push	af
2016  0725  33          	inc	sp
2017  0726  CD 7B 07    	call	_spr_tile_dir
2018  0729  F1          	pop	af
2019  072A  33          	inc	sp
2020  072B  18 4D       	jr	l_spr_tile_00117
2021  072D              l_spr_tile_00111:
2022  072D  AF          	xor	a, a
2023  072E  48          	ld	c,b
2024  072F  47          	ld	b,a
2025  0730  C5          	push	bc
2026  0731  3E B4       	ld	a,0xb4
2027  0733  F5          	push	af
2028  0734  33          	inc	sp
2029  0735  CD 7B 07    	call	_spr_tile_dir
2030  0738  F1          	pop	af
2031  0739  33          	inc	sp
2032  073A  18 3E       	jr	l_spr_tile_00117
2033  073C              l_spr_tile_00112:
2034  073C  AF          	xor	a, a
2035  073D  48          	ld	c,b
2036  073E  47          	ld	b,a
2037  073F  C5          	push	bc
2038  0740  3E B6       	ld	a,0xb6
2039  0742  F5          	push	af
2040  0743  33          	inc	sp
2041  0744  CD 7B 07    	call	_spr_tile_dir
2042  0747  F1          	pop	af
2043  0748  33          	inc	sp
2044  0749  18 2F       	jr	l_spr_tile_00117
2045  074B              l_spr_tile_00113:
2046  074B  AF          	xor	a, a
2047  074C  48          	ld	c,b
2048  074D  47          	ld	b,a
2049  074E  C5          	push	bc
2050  074F  3E C0       	ld	a,0xc0
2051  0751  F5          	push	af
2052  0752  33          	inc	sp
2053  0753  CD 7B 07    	call	_spr_tile_dir
2054  0756  F1          	pop	af
2055  0757  33          	inc	sp
2056  0758  18 20       	jr	l_spr_tile_00117
2057  075A              l_spr_tile_00114:
2058  075A  AF          	xor	a, a
2059  075B  48          	ld	c,b
2060  075C  47          	ld	b,a
2061  075D  C5          	push	bc
2062  075E  3E C2       	ld	a,0xc2
2063  0760  F5          	push	af
2064  0761  33          	inc	sp
2065  0762  CD 7B 07    	call	_spr_tile_dir
2066  0765  F1          	pop	af
2067  0766  33          	inc	sp
2068  0767  18 11       	jr	l_spr_tile_00117
2069  0769              l_spr_tile_00115:
2070  0769  AF          	xor	a, a
2071  076A  48          	ld	c,b
2072  076B  47          	ld	b,a
2073  076C  C5          	push	bc
2074  076D  3E C4       	ld	a,0xc4
2075  076F  F5          	push	af
2076  0770  33          	inc	sp
2077  0771  CD 7B 07    	call	_spr_tile_dir
2078  0774  F1          	pop	af
2079  0775  33          	inc	sp
2080  0776  18 02       	jr	l_spr_tile_00117
2081  0778              l_spr_tile_00116:
2082  0778  2E 00       	ld	l,0x00
2083  077A              l_spr_tile_00117:
2084  077A  C9          	ret
2085  077B              	SECTION code_compiler
2086  077B              ;	---------------------------------
2087  077B              ; Function spr_tile_dir
2088  077B              ; ---------------------------------
2089  077B              _spr_tile_dir:
2090  077B  CD 00 00    	call	___sdcc_enter_ix
2091  077E  3E 00       	ld	a, +((_state) & 0xFF)
2092  0780  DD 86 05    	add	a,(ix+5)
2093  0783  4F          	ld	c, a
2094  0784  3E 00       	ld	a, +((_state) / 256)
2095  0786  CE 00       	adc	a,0x00
2096  0788  47          	ld	b, a
2097  0789  0A          	ld	a, (bc)
2098  078A  4F          	ld	c,a
2099  078B  CB 57       	bit	2,a
2100  078D  28 05       	jr	Z,l_spr_tile_dir_00102
2101  078F  DD 6E 04    	ld	l,(ix+4)
2102  0792  18 2D       	jr	l_spr_tile_dir_00109
2103  0794              l_spr_tile_dir_00102:
2104  0794  DD 7E 04    	ld	a,(ix+4)
2105  0797  DD 86 06    	add	a,(ix+6)
2106  079A  47          	ld	b, a
2107  079B  CB 59       	bit	3, c
2108  079D  28 03       	jr	Z,l_spr_tile_dir_00104
2109  079F  68          	ld	l, b
2110  07A0  18 1F       	jr	l_spr_tile_dir_00109
2111  07A2              l_spr_tile_dir_00104:
2112  07A2  3E 00       	ld	a, +((_state_a) & 0xFF)
2113  07A4  DD 86 05    	add	a,(ix+5)
2114  07A7  5F          	ld	e, a
2115  07A8  3E 00       	ld	a, +((_state_a) / 256)
2116  07AA  CE 00       	adc	a,0x00
2117  07AC  57          	ld	d, a
2118  07AD  1A          	ld	a, (de)
2119  07AE  CB 67       	bit	4, a
2120  07B0  28 05       	jr	Z,l_spr_tile_dir_00106
2121  07B2  DD 6E 04    	ld	l,(ix+4)
2122  07B5  18 0A       	jr	l_spr_tile_dir_00109
2123  07B7              l_spr_tile_dir_00106:
2124  07B7  CB 5F       	bit	3, a
2125  07B9  28 03       	jr	Z,l_spr_tile_dir_00108
2126  07BB  68          	ld	l, b
2127  07BC  18 03       	jr	l_spr_tile_dir_00109
2128  07BE              l_spr_tile_dir_00108:
2129  07BE  DD 6E 04    	ld	l,(ix+4)
2130  07C1              l_spr_tile_dir_00109:
2131  07C1  DD E1       	pop	ix
2132  07C3  C9          	ret
2133  07C4              	SECTION code_compiler
2134  07C4              ;	---------------------------------
2135  07C4              ; Function spr_draw_clear
2136  07C4              ; ---------------------------------
2137  07C4              _spr_draw_clear:
2138  07C4  F3          	di
2139  07C5  2E 00       	ld	l,0x00
2140  07C7  CD 00 00    	call	_zx_cls_fastcall
2141  07CA  21 00 00    	ld	hl,_s_lin1
2142  07CD  36 10       	ld	(hl),0x10
2143  07CF              l_spr_draw_clear_00105:
2144  07CF  21 00 00    	ld	hl,_s_col1
2145  07D2  36 00       	ld	(hl),0x00
2146  07D4              l_spr_draw_clear_00103:
2147  07D4  2A FF FF    	ld	hl,(_s_col1 - 1)
2148  07D7  3A 00 00    	ld	a,(_s_lin1)
2149  07DA  6F          	ld	l,a
2150  07DB  E5          	push	hl
2151  07DC  AF          	xor	a, a
2152  07DD  F5          	push	af
2153  07DE  33          	inc	sp
2154  07DF  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2155  07E2  21 00 00    	ld	hl,_s_col1
2156  07E5  7E          	ld	a,(hl)
2157  07E6  C6 02       	add	a,0x02
2158  07E8  77          	ld	(hl),a
2159  07E9  D6 20       	sub	a,0x20
2160  07EB  38 E7       	jr	C,l_spr_draw_clear_00103
2161  07ED  21 00 00    	ld	hl,_s_lin1
2162  07F0  7E          	ld	a, (hl)
2163  07F1  C6 10       	add	a,0x10
2164  07F3  77          	ld	(hl), a
2165  07F4  3E A2       	ld	a,0xa2
2166  07F6  96          	sub	a, (hl)
2167  07F7  30 D6       	jr	NC,l_spr_draw_clear_00105
2168  07F9  FB          	ei
2169  07FA  C9          	ret
2170  07FB              	SECTION code_compiler
2171  07FB              ;	---------------------------------
2172  07FB              ; Function spr_brick_anim
2173  07FB              ; ---------------------------------
2174  07FB              _spr_brick_anim:
2175  07FB  CD 00 00    	call	___sdcc_enter_ix
2176  07FE  F5          	push	af
2177  07FF  DD 75 FF    	ld	(ix-1),l
2178  0802  21 00 00    	ld	hl,_player_hit_col
2179  0805  46          	ld	b, (hl)
2180  0806  21 00 00    	ld	hl,_player_hit_lin
2181  0809  4E          	ld	c, (hl)
2182  080A  C5          	push	bc
2183  080B  C5          	push	bc
2184  080C  CD 00 00    	call	_spr_calc_index
2185  080F  F1          	pop	af
2186  0810  C1          	pop	bc
2187  0811  22 00 00    	ld	(_index1),hl
2188  0814  11 F0 FF    	ld	de,0xfff0
2189  0817  19          	add	hl,de
2190  0818  11 00 00    	ld	de,_scr_map
2191  081B  19          	add	hl, de
2192  081C  7E          	ld	a, (hl)
2193  081D  DD 77 FE    	ld	(ix-2),a
2194  0820  11 00 00    	ld	de,_scr_map
2195  0823  2A 00 00    	ld	hl,(_index1)
2196  0826  19          	add	hl,de
2197  0827  66          	ld	h, (hl)
2198  0828  EB          	ex	de,hl
2199  0829  DD 7E FF    	ld	a,(ix-1)
2200  082C  B7          	or	a, a
2201  082D  28 08       	jr	Z,l_spr_brick_anim_00102
2202  082F  79          	ld	a, c
2203  0830  C6 F6       	add	a,0xf6
2204  0832  32 00 00    	ld	(_tmp),a
2205  0835  18 06       	jr	l_spr_brick_anim_00103
2206  0837              l_spr_brick_anim_00102:
2207  0837  79          	ld	a, c
2208  0838  C6 F8       	add	a,0xf8
2209  083A  32 00 00    	ld	(_tmp),a
2210  083D              l_spr_brick_anim_00103:
2211  083D  F3          	di
2212  083E  DD 7E FF    	ld	a,(ix-1)
2213  0841  B7          	or	a, a
2214  0842  28 18       	jr	Z,l_spr_brick_anim_00105
2215  0844  3A 00 00    	ld	a,(_map_paper_clr)
2216  0847  C5          	push	bc
2217  0848  D5          	push	de
2218  0849  C5          	push	bc
2219  084A  F5          	push	af
2220  084B  33          	inc	sp
2221  084C  CD 00 00    	call	_NIRVANAP_fillT_raw_callee
2222  084F  D1          	pop	de
2223  0850  33          	inc	sp
2224  0851  3A 00 00    	ld	a,(_tmp)
2225  0854  5A          	ld	e,d
2226  0855  57          	ld	d,a
2227  0856  D5          	push	de
2228  0857  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2229  085A  18 1C       	jr	l_spr_brick_anim_00106
2230  085C              l_spr_brick_anim_00105:
2231  085C  3A 00 00    	ld	a,(_tmp)
2232  085F  C6 F0       	add	a,0xf0
2233  0861  C5          	push	bc
2234  0862  D5          	push	de
2235  0863  4F          	ld	c,a
2236  0864  C5          	push	bc
2237  0865  DD 7E FE    	ld	a,(ix-2)
2238  0868  F5          	push	af
2239  0869  33          	inc	sp
2240  086A  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2241  086D  D1          	pop	de
2242  086E  33          	inc	sp
2243  086F  3A 00 00    	ld	a,(_tmp)
2244  0872  5A          	ld	e,d
2245  0873  57          	ld	d,a
2246  0874  D5          	push	de
2247  0875  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2248  0878              l_spr_brick_anim_00106:
2249  0878  FB          	ei
2250  0879  F1          	pop	af
2251  087A  DD E1       	pop	ix
2252  087C  C9          	ret
2253  087D              	SECTION code_compiler
2254  087D              ;	---------------------------------
2255  087D              ; Function spr_draw_index
2256  087D              ; ---------------------------------
2257  087D              _spr_draw_index:
2258  087D  CD 00 00    	call	___sdcc_enter_ix
2259  0880  DD 4E 04    	ld	c,(ix+4)
2260  0883  79          	ld	a, c
2261  0884  E6 0F       	and	a,0x0f
2262  0886  87          	add	a, a
2263  0887  32 00 00    	ld	(_s_col1),a
2264  088A  21 00 00    	ld	hl,_s_lin1
2265  088D  71          	ld	(hl),c
2266  088E  79          	ld	a,c
2267  088F  07          	rlca
2268  0890  07          	rlca
2269  0891  07          	rlca
2270  0892  07          	rlca
2271  0893  E6 0F       	and	a,0x0f
2272  0895  07          	rlca
2273  0896  07          	rlca
2274  0897  07          	rlca
2275  0898  07          	rlca
2276  0899  E6 F0       	and	a,0xf0
2277  089B  77          	ld	(hl), a
2278  089C  F3          	di
2279  089D  3E 00       	ld	a, +((_scr_map) & 0xFF)
2280  089F  DD 86 04    	add	a,(ix+4)
2281  08A2  4F          	ld	c, a
2282  08A3  3E 00       	ld	a, +((_scr_map) / 256)
2283  08A5  DD 8E 05    	adc	a,(ix+5)
2284  08A8  47          	ld	b, a
2285  08A9  0A          	ld	a, (bc)
2286  08AA  47          	ld	b, a
2287  08AB  3A 00 00    	ld	a,(_s_col1)
2288  08AE  F5          	push	af
2289  08AF  33          	inc	sp
2290  08B0  3A 00 00    	ld	a,(_s_lin1)
2291  08B3  48          	ld	c,b
2292  08B4  47          	ld	b,a
2293  08B5  C5          	push	bc
2294  08B6  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2295  08B9  FB          	ei
2296  08BA  DD E1       	pop	ix
2297  08BC  C9          	ret
2298  08BD              	SECTION code_compiler
2299  08BD              ;	---------------------------------
2300  08BD              ; Function spr_draw_row
2301  08BD              ; ---------------------------------
2302  08BD              _spr_draw_row:
2303  08BD  CD 00 00    	call	___sdcc_enter_ix
2304  08C0  3B          	dec	sp
2305  08C1  F3          	di
2306  08C2  21 00 00    	ld	hl,_tmp
2307  08C5  36 00       	ld	(hl),0x00
2308  08C7  DD 7E 04    	ld	a,(ix+4)
2309  08CA  07          	rlca
2310  08CB  07          	rlca
2311  08CC  07          	rlca
2312  08CD  E6 F8       	and	a,0xf8
2313  08CF  DD 77 FF    	ld	(ix-1),a
2314  08D2              l_spr_draw_row_00101:
2315  08D2  21 00 00    	ld	hl,_tmp
2316  08D5  7E          	ld	a, (hl)
2317  08D6  D6 20       	sub	a,0x20
2318  08D8  30 38       	jr	NC,l_spr_draw_row_00103
2319  08DA  DD 4E 04    	ld	c,(ix+4)
2320  08DD  3E 00       	ld	a,0x00
2321  08DF  CB 21       	sla	c
2322  08E1  17          	rla
2323  08E2  CB 21       	sla	c
2324  08E4  17          	rla
2325  08E5  CB 21       	sla	c
2326  08E7  17          	rla
2327  08E8  CB 21       	sla	c
2328  08EA  17          	rla
2329  08EB  CB 21       	sla	c
2330  08ED  17          	rla
2331  08EE  47          	ld	b,a
2332  08EF  5E          	ld	e, (hl)
2333  08F0  16 00       	ld	d,0x00
2334  08F2  79          	ld	a, c
2335  08F3  83          	add	a, e
2336  08F4  21 00 00    	ld	hl,_index1
2337  08F7  77          	ld	(hl), a
2338  08F8  78          	ld	a, b
2339  08F9  8A          	adc	a, d
2340  08FA  23          	inc	hl
2341  08FB  77          	ld	(hl), a
2342  08FC  2A FF FF    	ld	hl,(_tmp-1)
2343  08FF  DD 6E FF    	ld	l,(ix-1)
2344  0902  3A 00 00    	ld	a,(_game_brick_tile)
2345  0905  E5          	push	hl
2346  0906  F5          	push	af
2347  0907  33          	inc	sp
2348  0908  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2349  090B  21 00 00    	ld	hl,_tmp
2350  090E  34          	inc	(hl)
2351  090F  34          	inc	(hl)
2352  0910  18 C0       	jr	l_spr_draw_row_00101
2353  0912              l_spr_draw_row_00103:
2354  0912  FB          	ei
2355  0913  33          	inc	sp
2356  0914  DD E1       	pop	ix
2357  0916  C9          	ret
2358  0917              	SECTION code_compiler
2359  0917              ;	---------------------------------
2360  0917              ; Function spr_calc_hor
2361  0917              ; ---------------------------------
2362  0917              _spr_calc_hor:
2363  0917  CD 00 00    	call	___sdcc_enter_ix
2364  091A  3E 00       	ld	a, +((_col) & 0xFF)
2365  091C  DD 86 04    	add	a,(ix+4)
2366  091F  4F          	ld	c, a
2367  0920  3E 00       	ld	a, +((_col) / 256)
2368  0922  CE 00       	adc	a,0x00
2369  0924  47          	ld	b, a
2370  0925  0A          	ld	a, (bc)
2371  0926  5F          	ld	e, a
2372  0927  3E 00       	ld	a, +((_sprite_frames) & 0xFF)
2373  0929  DD 86 04    	add	a,(ix+4)
2374  092C  4F          	ld	c, a
2375  092D  3E 00       	ld	a, +((_sprite_frames) / 256)
2376  092F  CE 00       	adc	a,0x00
2377  0931  47          	ld	b, a
2378  0932  0A          	ld	a, (bc)
2379  0933  67          	ld	h, a
2380  0934  2E 00       	ld	l,0x00
2381  0936  55          	ld	d, l
2382  0937  06 08       	ld	b,0x08
2383  0939              l_spr_calc_hor_00103:
2384  0939  29          	add	hl, hl
2385  093A  30 01       	jr	NC,l_spr_calc_hor_00104
2386  093C  19          	add	hl, de
2387  093D              l_spr_calc_hor_00104:
2388  093D  10 FA       	djnz	l_spr_calc_hor_00103
2389  093F  DD E1       	pop	ix
2390  0941  C9          	ret
2391  0942              	SECTION code_compiler
2392  0942              ;	---------------------------------
2393  0942              ; Function spr_back_repaint
2394  0942              ; ---------------------------------
2395  0942              _spr_back_repaint:
2396  0942  76          	halt
2397  0943  F3          	di
2398  0944  2A FF FF    	ld	hl,(_s_col0 - 1)
2399  0947  3A 00 00    	ld	a,(_s_lin0)
2400  094A  6F          	ld	l,a
2401  094B  E5          	push	hl
2402  094C  CD 00 00    	call	_spr_calc_index
2403  094F  F1          	pop	af
2404  0950  7D          	ld	a,l
2405  0951  32 00 00    	ld	(_sprite_curr_index),a
2406  0954  21 00 00    	ld	hl,_s_lin0
2407  0957  7E          	ld	a, (hl)
2408  0958  E6 0F       	and	a,0x0f
2409  095A  4F          	ld	c, a
2410  095B  7E          	ld	a, (hl)
2411  095C  07          	rlca
2412  095D  07          	rlca
2413  095E  07          	rlca
2414  095F  07          	rlca
2415  0960  E6 0F       	and	a,0x0f
2416  0962  47          	ld	b, a
2417  0963  21 00 00    	ld	hl,_s_col0
2418  0966  CB 46       	bit	0, (hl)
2419  0968  20 66       	jr	NZ,l_spr_back_repaint_00108
2420  096A  79          	ld	a, c
2421  096B  B7          	or	a, a
2422  096C  20 1D       	jr	NZ,l_spr_back_repaint_00102
2423  096E  2A 00 00    	ld	hl,(_sprite_curr_index)
2424  0971  26 00       	ld	h,0x00
2425  0973  01 00 00    	ld	bc,_scr_map
2426  0976  09          	add	hl,bc
2427  0977  46          	ld	b,(hl)
2428  0978  3A 00 00    	ld	a,(_s_col0)
2429  097B  F5          	push	af
2430  097C  33          	inc	sp
2431  097D  3A 00 00    	ld	a,(_s_lin0)
2432  0980  48          	ld	c,b
2433  0981  47          	ld	b,a
2434  0982  C5          	push	bc
2435  0983  CD 94 0A    	call	_spr_tile_paint
2436  0986  F1          	pop	af
2437  0987  33          	inc	sp
2438  0988  C3 92 0A    	jp	l_spr_back_repaint_00109
2439  098B              l_spr_back_repaint_00102:
2440  098B  78          	ld	a, b
2441  098C  07          	rlca
2442  098D  07          	rlca
2443  098E  07          	rlca
2444  098F  07          	rlca
2445  0990  E6 F0       	and	a,0xf0
2446  0992  47          	ld	b, a
2447  0993  2A 00 00    	ld	hl,(_sprite_curr_index)
2448  0996  26 00       	ld	h,0x00
2449  0998  11 00 00    	ld	de,_scr_map
2450  099B  19          	add	hl,de
2451  099C  56          	ld	d, (hl)
2452  099D  3A 00 00    	ld	a,(_s_col0)
2453  09A0  C5          	push	bc
2454  09A1  F5          	push	af
2455  09A2  33          	inc	sp
2456  09A3  4A          	ld	c, d
2457  09A4  C5          	push	bc
2458  09A5  CD 94 0A    	call	_spr_tile_paint
2459  09A8  F1          	pop	af
2460  09A9  33          	inc	sp
2461  09AA  C1          	pop	bc
2462  09AB  78          	ld	a, b
2463  09AC  C6 10       	add	a,0x10
2464  09AE  57          	ld	d, a
2465  09AF  21 00 00    	ld	hl,_sprite_curr_index
2466  09B2  7E          	ld	a, (hl)
2467  09B3  C6 10       	add	a,0x10
2468  09B5  77          	ld	(hl), a
2469  09B6  C6 00       	add	a,+((_scr_map) & 0xFF)
2470  09B8  4F          	ld	c, a
2471  09B9  3E 00       	ld	a, +((_scr_map) / 256)
2472  09BB  CE 00       	adc	a,0x00
2473  09BD  47          	ld	b, a
2474  09BE  0A          	ld	a, (bc)
2475  09BF  47          	ld	b, a
2476  09C0  3A 00 00    	ld	a,(_s_col0)
2477  09C3  5A          	ld	e,d
2478  09C4  57          	ld	d,a
2479  09C5  D5          	push	de
2480  09C6  C5          	push	bc
2481  09C7  33          	inc	sp
2482  09C8  CD 94 0A    	call	_spr_tile_paint
2483  09CB  F1          	pop	af
2484  09CC  33          	inc	sp
2485  09CD  C3 92 0A    	jp	l_spr_back_repaint_00109
2486  09D0              l_spr_back_repaint_00108:
2487  09D0  21 00 00    	ld	hl,_s_col0
2488  09D3  56          	ld	d, (hl)
2489  09D4  15          	dec	d
2490  09D5  79          	ld	a, c
2491  09D6  B7          	or	a, a
2492  09D7  20 3A       	jr	NZ,l_spr_back_repaint_00105
2493  09D9  2A 00 00    	ld	hl,(_sprite_curr_index)
2494  09DC  26 00       	ld	h,0x00
2495  09DE  01 00 00    	ld	bc,_scr_map
2496  09E1  09          	add	hl,bc
2497  09E2  46          	ld	b,(hl)
2498  09E3  D5          	push	de
2499  09E4  33          	inc	sp
2500  09E5  3A 00 00    	ld	a,(_s_lin0)
2501  09E8  48          	ld	c,b
2502  09E9  47          	ld	b,a
2503  09EA  C5          	push	bc
2504  09EB  CD 94 0A    	call	_spr_tile_paint
2505  09EE  F1          	pop	af
2506  09EF  33          	inc	sp
2507  09F0  21 00 00    	ld	hl,_sprite_curr_index
2508  09F3  34          	inc	(hl)
2509  09F4  21 00 00    	ld	hl,_s_col0
2510  09F7  46          	ld	b, (hl)
2511  09F8  04          	inc	b
2512  09F9  2A 00 00    	ld	hl,(_sprite_curr_index)
2513  09FC  26 00       	ld	h,0x00
2514  09FE  11 00 00    	ld	de,_scr_map
2515  0A01  19          	add	hl,de
2516  0A02  56          	ld	d, (hl)
2517  0A03  C5          	push	bc
2518  0A04  33          	inc	sp
2519  0A05  3A 00 00    	ld	a,(_s_lin0)
2520  0A08  5A          	ld	e,d
2521  0A09  57          	ld	d,a
2522  0A0A  D5          	push	de
2523  0A0B  CD 94 0A    	call	_spr_tile_paint
2524  0A0E  F1          	pop	af
2525  0A0F  33          	inc	sp
2526  0A10  C3 92 0A    	jp	l_spr_back_repaint_00109
2527  0A13              l_spr_back_repaint_00105:
2528  0A13  78          	ld	a, b
2529  0A14  07          	rlca
2530  0A15  07          	rlca
2531  0A16  07          	rlca
2532  0A17  07          	rlca
2533  0A18  E6 F0       	and	a,0xf0
2534  0A1A  47          	ld	b, a
2535  0A1B  3A 00 00    	ld	a,(_sprite_curr_index)
2536  0A1E  C6 00       	add	a,+((_scr_map) & 0xFF)
2537  0A20  4F          	ld	c,a
2538  0A21  3E 00       	ld	a,+((_scr_map) / 256)
2539  0A23  CE 00       	adc	a,0x00
2540  0A25  67          	ld	h, a
2541  0A26  69          	ld	l, c
2542  0A27  7E          	ld	a, (hl)
2543  0A28  C5          	push	bc
2544  0A29  58          	ld	e,b
2545  0A2A  D5          	push	de
2546  0A2B  F5          	push	af
2547  0A2C  33          	inc	sp
2548  0A2D  CD 94 0A    	call	_spr_tile_paint
2549  0A30  F1          	pop	af
2550  0A31  33          	inc	sp
2551  0A32  C1          	pop	bc
2552  0A33  21 00 00    	ld	hl,_sprite_curr_index
2553  0A36  34          	inc	(hl)
2554  0A37  21 00 00    	ld	hl,_s_col0
2555  0A3A  4E          	ld	c, (hl)
2556  0A3B  0C          	inc	c
2557  0A3C  2A 00 00    	ld	hl,(_sprite_curr_index)
2558  0A3F  26 00       	ld	h,0x00
2559  0A41  11 00 00    	ld	de,_scr_map
2560  0A44  19          	add	hl,de
2561  0A45  56          	ld	d, (hl)
2562  0A46  C5          	push	bc
2563  0A47  79          	ld	a, c
2564  0A48  F5          	push	af
2565  0A49  33          	inc	sp
2566  0A4A  4A          	ld	c, d
2567  0A4B  C5          	push	bc
2568  0A4C  CD 94 0A    	call	_spr_tile_paint
2569  0A4F  F1          	pop	af
2570  0A50  33          	inc	sp
2571  0A51  C1          	pop	bc
2572  0A52  78          	ld	a, b
2573  0A53  C6 10       	add	a,0x10
2574  0A55  4F          	ld	c, a
2575  0A56  21 00 00    	ld	hl,_sprite_curr_index
2576  0A59  7E          	ld	a, (hl)
2577  0A5A  C6 0F       	add	a,0x0f
2578  0A5C  77          	ld	(hl), a
2579  0A5D  21 00 00    	ld	hl,_s_col0
2580  0A60  46          	ld	b, (hl)
2581  0A61  05          	dec	b
2582  0A62  2A 00 00    	ld	hl,(_sprite_curr_index)
2583  0A65  26 00       	ld	h,0x00
2584  0A67  11 00 00    	ld	de,_scr_map
2585  0A6A  19          	add	hl,de
2586  0A6B  66          	ld	h, (hl)
2587  0A6C  EB          	ex	de,hl
2588  0A6D  C5          	push	bc
2589  0A6E  C5          	push	bc
2590  0A6F  D5          	push	de
2591  0A70  33          	inc	sp
2592  0A71  CD 94 0A    	call	_spr_tile_paint
2593  0A74  F1          	pop	af
2594  0A75  33          	inc	sp
2595  0A76  C1          	pop	bc
2596  0A77  21 00 00    	ld	hl,_sprite_curr_index
2597  0A7A  34          	inc	(hl)
2598  0A7B  21 00 00    	ld	hl,_s_col0
2599  0A7E  46          	ld	b, (hl)
2600  0A7F  04          	inc	b
2601  0A80  2A 00 00    	ld	hl,(_sprite_curr_index)
2602  0A83  26 00       	ld	h,0x00
2603  0A85  11 00 00    	ld	de,_scr_map
2604  0A88  19          	add	hl,de
2605  0A89  66          	ld	h, (hl)
2606  0A8A  C5          	push	bc
2607  0A8B  E5          	push	hl
2608  0A8C  33          	inc	sp
2609  0A8D  CD 94 0A    	call	_spr_tile_paint
2610  0A90  F1          	pop	af
2611  0A91  33          	inc	sp
2612  0A92              l_spr_back_repaint_00109:
2613  0A92  FB          	ei
2614  0A93  C9          	ret
2615  0A94              	SECTION code_compiler
2616  0A94              ;	---------------------------------
2617  0A94              ; Function spr_tile_paint
2618  0A94              ; ---------------------------------
2619  0A94              _spr_tile_paint:
2620  0A94  CD 00 00    	call	___sdcc_enter_ix
2621  0A97  DD 7E 04    	ld	a,(ix+4)
2622  0A9A  B7          	or	a, a
2623  0A9B  28 05       	jr	Z,l_spr_tile_paint_00101
2624  0A9D  3C          	inc	a
2625  0A9E  28 22       	jr	Z,l_spr_tile_paint_00105
2626  0AA0  18 11       	jr	l_spr_tile_paint_00103
2627  0AA2              l_spr_tile_paint_00101:
2628  0AA2  DD 66 06    	ld	h,(ix+6)
2629  0AA5  DD 6E 05    	ld	l,(ix+5)
2630  0AA8  3A 00 00    	ld	a,(_map_paper_clr)
2631  0AAB  E5          	push	hl
2632  0AAC  F5          	push	af
2633  0AAD  33          	inc	sp
2634  0AAE  CD 00 00    	call	_NIRVANAP_fillT_raw_callee
2635  0AB1  18 0F       	jr	l_spr_tile_paint_00105
2636  0AB3              l_spr_tile_paint_00103:
2637  0AB3  DD 66 06    	ld	h,(ix+6)
2638  0AB6  DD 6E 05    	ld	l,(ix+5)
2639  0AB9  E5          	push	hl
2640  0ABA  DD 7E 04    	ld	a,(ix+4)
2641  0ABD  F5          	push	af
2642  0ABE  33          	inc	sp
2643  0ABF  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2644  0AC2              l_spr_tile_paint_00105:
2645  0AC2  DD E1       	pop	ix
2646  0AC4  C9          	ret
2647  0AC5              	SECTION code_compiler
2648  0AC5              ;	---------------------------------
2649  0AC5              ; Function spr_init_anim_bullets
2650  0AC5              ; ---------------------------------
2651  0AC5              _spr_init_anim_bullets:
2652  0AC5  01 00 00    	ld	bc,_anim_lin+0
2653  0AC8  1E 00       	ld	e,0x00
2654  0ACA              l_spr_init_anim_bullets_00102:
2655  0ACA  6B          	ld	l,e
2656  0ACB  26 00       	ld	h,0x00
2657  0ACD  09          	add	hl, bc
2658  0ACE  36 FF       	ld	(hl),0xff
2659  0AD0  16 00       	ld	d,0x00
2660  0AD2  21 00 00    	ld	hl,_bullet_col
2661  0AD5  19          	add	hl, de
2662  0AD6  36 FF       	ld	(hl),0xff
2663  0AD8  1C          	inc	e
2664  0AD9  7B          	ld	a, e
2665  0ADA  D6 08       	sub	a,0x08
2666  0ADC  38 EC       	jr	C,l_spr_init_anim_bullets_00102
2667  0ADE  21 00 00    	ld	hl,_bullet_count
2668  0AE1  36 00       	ld	(hl),0x00
2669  0AE3  21 00 00    	ld	hl,_anim_count
2670  0AE6  36 00       	ld	(hl),0x00
2671  0AE8  C9          	ret
2672  0AE9              	SECTION code_compiler
2673  0AE9              ;	---------------------------------
2674  0AE9              ; Function spr_add_anim
2675  0AE9              ; ---------------------------------
2676  0AE9              _spr_add_anim:
2677  0AE9  CD 00 00    	call	___sdcc_enter_ix
2678  0AEC  F5          	push	af
2679  0AED  F5          	push	af
2680  0AEE  3B          	dec	sp
2681  0AEF  DD 7E 05    	ld	a,(ix+5)
2682  0AF2  D6 1F       	sub	a,0x1f
2683  0AF4  D2 B3 0B    	jp	NC, l_spr_add_anim_00111
2684  0AF7  DD 7E 04    	ld	a,(ix+4)
2685  0AFA  D6 B8       	sub	a,0xb8
2686  0AFC  D2 B3 0B    	jp	NC, l_spr_add_anim_00111
2687  0AFF  0E 00       	ld	c,0x00
2688  0B01  DD 71 FF    	ld	(ix-1),c
2689  0B04              l_spr_add_anim_00109:
2690  0B04  3E 00       	ld	a, +((_anim_lin) & 0xFF)
2691  0B06  81          	add	a, c
2692  0B07  5F          	ld	e, a
2693  0B08  3E 00       	ld	a, +((_anim_lin) / 256)
2694  0B0A  CE 00       	adc	a,0x00
2695  0B0C  57          	ld	d, a
2696  0B0D  1A          	ld	a, (de)
2697  0B0E  3C          	inc	a
2698  0B0F  C2 A9 0B    	jp	NZ,l_spr_add_anim_00110
2699  0B12  21 00 00    	ld	hl,_anim_count
2700  0B15  34          	inc	(hl)
2701  0B16  DD 7E 04    	ld	a,(ix+4)
2702  0B19  12          	ld	(de), a
2703  0B1A  01 00 00    	ld	bc,_anim_col
2704  0B1D  DD 6E FF    	ld	l,(ix-1)
2705  0B20  26 00       	ld	h,0x00
2706  0B22  09          	add	hl,bc
2707  0B23  DD 75 FD    	ld	(ix-3),l
2708  0B26  DD 74 FE    	ld	(ix-2),h
2709  0B29  DD 7E 05    	ld	a,(ix+5)
2710  0B2C  77          	ld	(hl), a
2711  0B2D  3E 00       	ld	a, +((_anim_tile) & 0xFF)
2712  0B2F  DD 86 FF    	add	a,(ix-1)
2713  0B32  DD 77 FB    	ld	(ix-5),a
2714  0B35  3E 00       	ld	a, +((_anim_tile) / 256)
2715  0B37  CE 00       	adc	a,0x00
2716  0B39  DD 77 FC    	ld	(ix-4),a
2717  0B3C  E1          	pop	hl
2718  0B3D  E5          	push	hl
2719  0B3E  DD 7E 06    	ld	a,(ix+6)
2720  0B41  77          	ld	(hl), a
2721  0B42  3E 00       	ld	a, +((_anim_loop) & 0xFF)
2722  0B44  DD 86 FF    	add	a,(ix-1)
2723  0B47  4F          	ld	c, a
2724  0B48  3E 00       	ld	a, +((_anim_loop) / 256)
2725  0B4A  CE 00       	adc	a,0x00
2726  0B4C  47          	ld	b, a
2727  0B4D  DD 7E 08    	ld	a,(ix+8)
2728  0B50  02          	ld	(bc), a
2729  0B51  01 00 00    	ld	bc,_anim_int+0
2730  0B54  DD 6E FF    	ld	l,(ix-1)
2731  0B57  26 00       	ld	h,0x00
2732  0B59  09          	add	hl, bc
2733  0B5A  36 00       	ld	(hl),0x00
2734  0B5C  3E 00       	ld	a, +((_anim_end) & 0xFF)
2735  0B5E  DD 86 FF    	add	a,(ix-1)
2736  0B61  4F          	ld	c, a
2737  0B62  3E 00       	ld	a, +((_anim_end) / 256)
2738  0B64  CE 00       	adc	a,0x00
2739  0B66  47          	ld	b, a
2740  0B67  DD 7E 07    	ld	a,(ix+7)
2741  0B6A  02          	ld	(bc), a
2742  0B6B  3E 00       	ld	a, +((_anim_respanwn) & 0xFF)
2743  0B6D  DD 86 FF    	add	a,(ix-1)
2744  0B70  4F          	ld	c, a
2745  0B71  3E 00       	ld	a, +((_anim_respanwn) / 256)
2746  0B73  CE 00       	adc	a,0x00
2747  0B75  47          	ld	b, a
2748  0B76  DD 7E 09    	ld	a,(ix+9)
2749  0B79  02          	ld	(bc), a
2750  0B7A  F3          	di
2751  0B7B  DD 6E FD    	ld	l,(ix-3)
2752  0B7E  DD 66 FE    	ld	h,(ix-2)
2753  0B81  46          	ld	b, (hl)
2754  0B82  E1          	pop	hl
2755  0B83  1A          	ld	a,(de)
2756  0B84  56          	ld	d,(hl)
2757  0B85  E5          	push	hl
2758  0B86  C5          	push	bc
2759  0B87  33          	inc	sp
2760  0B88  5A          	ld	e,d
2761  0B89  57          	ld	d,a
2762  0B8A  D5          	push	de
2763  0B8B  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2764  0B8E  FB          	ei
2765  0B8F  DD 66 05    	ld	h,(ix+5)
2766  0B92  DD 6E 04    	ld	l,(ix+4)
2767  0B95  E5          	push	hl
2768  0B96  CD 00 00    	call	_spr_calc_index
2769  0B99  F1          	pop	af
2770  0B9A  22 00 00    	ld	(_index0),hl
2771  0B9D  01 00 00    	ld	bc,_scr_map
2772  0BA0  09          	add	hl,bc
2773  0BA1  7E          	ld	a,(hl)
2774  0BA2  B7          	or	a,a
2775  0BA3  20 0E       	jr	NZ,l_spr_add_anim_00111
2776  0BA5  36 FF       	ld	(hl),0xff
2777  0BA7  18 0A       	jr	l_spr_add_anim_00111
2778  0BA9              l_spr_add_anim_00110:
2779  0BA9  0C          	inc	c
2780  0BAA  DD 71 FF    	ld	(ix-1),c
2781  0BAD  79          	ld	a, c
2782  0BAE  D6 08       	sub	a,0x08
2783  0BB0  DA 04 0B    	jp	C, l_spr_add_anim_00109
2784  0BB3              l_spr_add_anim_00111:
2785  0BB3  DD F9       	ld	sp, ix
2786  0BB5  DD E1       	pop	ix
2787  0BB7  C9          	ret
2788  0BB8              	SECTION code_compiler
2789  0BB8              ;	---------------------------------
2790  0BB8              ; Function spr_play_anim
2791  0BB8              ; ---------------------------------
2792  0BB8              _spr_play_anim:
2793  0BB8  CD 00 00    	call	___sdcc_enter_ix
2794  0BBB  F5          	push	af
2795  0BBC  F5          	push	af
2796  0BBD  0E 00       	ld	c,0x00
2797  0BBF              l_spr_play_anim_00114:
2798  0BBF  3E 00       	ld	a, +((_anim_lin) & 0xFF)
2799  0BC1  81          	add	a, c
2800  0BC2  DD 77 FE    	ld	(ix-2),a
2801  0BC5  6F          	ld	l,a
2802  0BC6  3E 00       	ld	a,+((_anim_lin) / 256)
2803  0BC8  CE 00       	adc	a,0x00
2804  0BCA  DD 77 FF    	ld	(ix-1),a
2805  0BCD  67          	ld	h,a
2806  0BCE  7E          	ld	a,(hl)
2807  0BCF  5F          	ld	e,a
2808  0BD0  3C          	inc	a
2809  0BD1  CA A0 0C    	jp	Z,l_spr_play_anim_00115
2810  0BD4  3E 00       	ld	a, +((_anim_int) & 0xFF)
2811  0BD6  81          	add	a, c
2812  0BD7  DD 77 FC    	ld	(ix-4),a
2813  0BDA  3E 00       	ld	a, +((_anim_int) / 256)
2814  0BDC  CE 00       	adc	a,0x00
2815  0BDE  DD 77 FD    	ld	(ix-3),a
2816  0BE1  E1          	pop	hl
2817  0BE2  56          	ld	d,(hl)
2818  0BE3  E5          	push	hl
2819  0BE4  06 00       	ld	b,0x00
2820  0BE6  21 00 00    	ld	hl,_anim_end
2821  0BE9  09          	add	hl, bc
2822  0BEA  46          	ld	b, (hl)
2823  0BEB  7A          	ld	a, d
2824  0BEC  90          	sub	a, b
2825  0BED  30 30       	jr	NC,l_spr_play_anim_00109
2826  0BEF  F3          	di
2827  0BF0  06 00       	ld	b,0x00
2828  0BF2  21 00 00    	ld	hl,_anim_col
2829  0BF5  09          	add	hl, bc
2830  0BF6  5E          	ld	e, (hl)
2831  0BF7  DD 6E FE    	ld	l,(ix-2)
2832  0BFA  DD 66 FF    	ld	h,(ix-1)
2833  0BFD  56          	ld	d, (hl)
2834  0BFE  06 00       	ld	b,0x00
2835  0C00  21 00 00    	ld	hl,_anim_tile
2836  0C03  09          	add	hl, bc
2837  0C04  46          	ld	b, (hl)
2838  0C05  E1          	pop	hl
2839  0C06  E5          	push	hl
2840  0C07  6E          	ld	l, (hl)
2841  0C08  78          	ld	a, b
2842  0C09  85          	add	a, l
2843  0C0A  47          	ld	b, a
2844  0C0B  C5          	push	bc
2845  0C0C  7B          	ld	a, e
2846  0C0D  5A          	ld	e,d
2847  0C0E  57          	ld	d,a
2848  0C0F  D5          	push	de
2849  0C10  C5          	push	bc
2850  0C11  33          	inc	sp
2851  0C12  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2852  0C15  C1          	pop	bc
2853  0C16  FB          	ei
2854  0C17  E1          	pop	hl
2855  0C18  46          	ld	b,(hl)
2856  0C19  04          	inc	b
2857  0C1A  E5          	push	hl
2858  0C1B  70          	ld	(hl), b
2859  0C1C  C3 A0 0C    	jp	l_spr_play_anim_00115
2860  0C1F              l_spr_play_anim_00109:
2861  0C1F  06 00       	ld	b,0x00
2862  0C21  21 00 00    	ld	hl,_anim_loop
2863  0C24  09          	add	hl, bc
2864  0C25  7E          	ld	a, (hl)
2865  0C26  B7          	or	a, a
2866  0C27  20 70       	jr	NZ,l_spr_play_anim_00106
2867  0C29  21 00 00    	ld	hl,_anim_count
2868  0C2C  35          	dec	(hl)
2869  0C2D  06 00       	ld	b,0x00
2870  0C2F  21 00 00    	ld	hl,_anim_col
2871  0C32  09          	add	hl, bc
2872  0C33  7E          	ld	a, (hl)
2873  0C34  32 00 00    	ld	(_s_col0),a
2874  0C37  21 00 00    	ld	hl,_s_lin0
2875  0C3A  73          	ld	(hl), e
2876  0C3B  3A 00 00    	ld	a,(_s_col0)
2877  0C3E  C5          	push	bc
2878  0C3F  F5          	push	af
2879  0C40  33          	inc	sp
2880  0C41  3A 00 00    	ld	a,(_s_lin0)
2881  0C44  F5          	push	af
2882  0C45  33          	inc	sp
2883  0C46  CD 00 00    	call	_spr_calc_index
2884  0C49  F1          	pop	af
2885  0C4A  2A FF FF    	ld	hl,(_s_col0 - 1)
2886  0C4D  3A 00 00    	ld	a,(_s_lin0)
2887  0C50  6F          	ld	l,a
2888  0C51  E5          	push	hl
2889  0C52  CD 00 00    	call	_spr_calc_index
2890  0C55  F1          	pop	af
2891  0C56  EB          	ex	de,hl
2892  0C57  C1          	pop	bc
2893  0C58  21 00 00    	ld	hl,_scr_map
2894  0C5B  19          	add	hl, de
2895  0C5C  46          	ld	b, (hl)
2896  0C5D  04          	inc	b
2897  0C5E  20 17       	jr	NZ,l_spr_play_anim_00102
2898  0C60  3A 00 00    	ld	a,(_s_col0)
2899  0C63  C5          	push	bc
2900  0C64  F5          	push	af
2901  0C65  33          	inc	sp
2902  0C66  3A 00 00    	ld	a,(_s_lin0)
2903  0C69  F5          	push	af
2904  0C6A  33          	inc	sp
2905  0C6B  CD 00 00    	call	_spr_calc_index
2906  0C6E  F1          	pop	af
2907  0C6F  EB          	ex	de,hl
2908  0C70  C1          	pop	bc
2909  0C71  21 00 00    	ld	hl,_scr_map
2910  0C74  19          	add	hl, de
2911  0C75  36 00       	ld	(hl),0x00
2912  0C77              l_spr_play_anim_00102:
2913  0C77  C5          	push	bc
2914  0C78  CD 42 09    	call	_spr_back_repaint
2915  0C7B  C1          	pop	bc
2916  0C7C  06 00       	ld	b,0x00
2917  0C7E  21 00 00    	ld	hl,_anim_respanwn
2918  0C81  09          	add	hl, bc
2919  0C82  7E          	ld	a, (hl)
2920  0C83  B7          	or	a, a
2921  0C84  28 09       	jr	Z,l_spr_play_anim_00104
2922  0C86  C5          	push	bc
2923  0C87  79          	ld	a, c
2924  0C88  F5          	push	af
2925  0C89  33          	inc	sp
2926  0C8A  CD 00 00    	call	_enemy_respawn
2927  0C8D  33          	inc	sp
2928  0C8E  C1          	pop	bc
2929  0C8F              l_spr_play_anim_00104:
2930  0C8F  DD 6E FE    	ld	l,(ix-2)
2931  0C92  DD 66 FF    	ld	h,(ix-1)
2932  0C95  36 FF       	ld	(hl),0xff
2933  0C97  18 07       	jr	l_spr_play_anim_00115
2934  0C99              l_spr_play_anim_00106:
2935  0C99  47          	ld	b, a
2936  0C9A  05          	dec	b
2937  0C9B  70          	ld	(hl), b
2938  0C9C  E1          	pop	hl
2939  0C9D  E5          	push	hl
2940  0C9E  36 00       	ld	(hl),0x00
2941  0CA0              l_spr_play_anim_00115:
2942  0CA0  0C          	inc	c
2943  0CA1  79          	ld	a, c
2944  0CA2  D6 08       	sub	a,0x08
2945  0CA4  DA BF 0B    	jp	C, l_spr_play_anim_00114
2946  0CA7  DD F9       	ld	sp, ix
2947  0CA9  DD E1       	pop	ix
2948  0CAB  C9          	ret
2949  0CAC              	SECTION code_compiler
2950  0CAC              ;	---------------------------------
2951  0CAC              ; Function spr_play_bullets
2952  0CAC              ; ---------------------------------
2953  0CAC              _spr_play_bullets:
2954  0CAC  CD 00 00    	call	___sdcc_enter_ix
2955  0CAF  21 F3 FF    	ld	hl, -13
2956  0CB2  39          	add	hl, sp
2957  0CB3  F9          	ld	sp, hl
2958  0CB4  3E 00       	ld	a,0x00
2959  0CB6  DD 77 FF    	ld	(ix-1),a
2960  0CB9  DD 77 F5    	ld	(ix-11),a
2961  0CBC              l_spr_play_bullets_00175:
2962  0CBC  01 00 00    	ld	bc,_bullet_col
2963  0CBF  DD 6E F5    	ld	l,(ix-11)
2964  0CC2  26 00       	ld	h,0x00
2965  0CC4  09          	add	hl,bc
2966  0CC5  DD 75 FD    	ld	(ix-3),l
2967  0CC8  DD 74 FE    	ld	(ix-2),h
2968  0CCB  7E          	ld	a, (hl)
2969  0CCC  DD 77 FC    	ld	(ix-4),a
2970  0CCF  3C          	inc	a
2971  0CD0  CA C6 10    	jp	Z,l_spr_play_bullets_00171
2972  0CD3  01 00 00    	ld	bc,_bullet_lin
2973  0CD6  DD 6E F5    	ld	l,(ix-11)
2974  0CD9  26 00       	ld	h,0x00
2975  0CDB  09          	add	hl,bc
2976  0CDC  DD 75 FA    	ld	(ix-6),l
2977  0CDF  DD 74 FB    	ld	(ix-5),h
2978  0CE2  7E          	ld	a, (hl)
2979  0CE3  32 00 00    	ld	(_s_lin0),a
2980  0CE6  DD 7E FC    	ld	a,(ix-4)
2981  0CE9  32 00 00    	ld	(_s_col0),a
2982  0CEC  DD 77 F3    	ld	(ix-13),a
2983  0CEF  CD 42 09    	call	_spr_back_repaint
2984  0CF2  01 00 00    	ld	bc,_bullet_class
2985  0CF5  DD 6E F5    	ld	l,(ix-11)
2986  0CF8  26 00       	ld	h,0x00
2987  0CFA  09          	add	hl,bc
2988  0CFB  DD 75 F8    	ld	(ix-8),l
2989  0CFE  DD 74 F9    	ld	(ix-7),h
2990  0D01  7E          	ld	a, (hl)
2991  0D02  D6 02       	sub	a,0x02
2992  0D04  20 46       	jr	NZ,l_spr_play_bullets_00107
2993  0D06  3A 00 00    	ld	a,(_s_lin0)
2994  0D09  4F          	ld	c,a
2995  0D0A  06 00       	ld	b,0x00
2996  0D0C  3E 00       	ld	a, +((_bullet_lin0) & 0xFF)
2997  0D0E  DD 86 F5    	add	a,(ix-11)
2998  0D11  6F          	ld	l, a
2999  0D12  3E 00       	ld	a, +((_bullet_lin0) / 256)
3000  0D14  CE 00       	adc	a,0x00
3001  0D16  67          	ld	h, a
3002  0D17  5E          	ld	e, (hl)
3003  0D18  16 00       	ld	d,0x00
3004  0D1A  79          	ld	a, c
3005  0D1B  93          	sub	a, e
3006  0D1C  4F          	ld	c, a
3007  0D1D  78          	ld	a, b
3008  0D1E  9A          	sbc	a, d
3009  0D1F  47          	ld	b, a
3010  0D20  3E 08       	ld	a,0x08
3011  0D22  B9          	cp	a, c
3012  0D23  3E 00       	ld	a,0x00
3013  0D25  98          	sbc	a, b
3014  0D26  E2 2B 0D    	jp	PO, l_spr_play_bullets_00337
3015  0D29  EE 80       	xor	a,0x80
3016  0D2B              l_spr_play_bullets_00337:
3017  0D2B  FA 44 0D    	jp	M, l_spr_play_bullets_00104
3018  0D2E  DD 6E FA    	ld	l,(ix-6)
3019  0D31  DD 66 FB    	ld	h,(ix-5)
3020  0D34  4E          	ld	c, (hl)
3021  0D35  0C          	inc	c
3022  0D36  0C          	inc	c
3023  0D37  DD 6E FA    	ld	l,(ix-6)
3024  0D3A  DD 66 FB    	ld	h,(ix-5)
3025  0D3D  71          	ld	(hl), c
3026  0D3E  21 00 00    	ld	hl,_s_lin0
3027  0D41  71          	ld	(hl), c
3028  0D42  18 08       	jr	l_spr_play_bullets_00107
3029  0D44              l_spr_play_bullets_00104:
3030  0D44  DD 6E F8    	ld	l,(ix-8)
3031  0D47  DD 66 F9    	ld	h,(ix-7)
3032  0D4A  36 03       	ld	(hl),0x03
3033  0D4C              l_spr_play_bullets_00107:
3034  0D4C  DD 6E F8    	ld	l,(ix-8)
3035  0D4F  DD 66 F9    	ld	h,(ix-7)
3036  0D52  7E          	ld	a, (hl)
3037  0D53  D6 03       	sub	a,0x03
3038  0D55  20 46       	jr	NZ,l_spr_play_bullets_00112
3039  0D57  3E 00       	ld	a, +((_bullet_lin0) & 0xFF)
3040  0D59  DD 86 F5    	add	a,(ix-11)
3041  0D5C  6F          	ld	l, a
3042  0D5D  3E 00       	ld	a, +((_bullet_lin0) / 256)
3043  0D5F  CE 00       	adc	a,0x00
3044  0D61  67          	ld	h, a
3045  0D62  4E          	ld	c, (hl)
3046  0D63  06 00       	ld	b,0x00
3047  0D65  3A 00 00    	ld	a,(_s_lin0)
3048  0D68  5F          	ld	e,a
3049  0D69  16 00       	ld	d,0x00
3050  0D6B  79          	ld	a, c
3051  0D6C  93          	sub	a, e
3052  0D6D  4F          	ld	c, a
3053  0D6E  78          	ld	a, b
3054  0D6F  9A          	sbc	a, d
3055  0D70  47          	ld	b, a
3056  0D71  3E 08       	ld	a,0x08
3057  0D73  B9          	cp	a, c
3058  0D74  3E 00       	ld	a,0x00
3059  0D76  98          	sbc	a, b
3060  0D77  E2 7C 0D    	jp	PO, l_spr_play_bullets_00340
3061  0D7A  EE 80       	xor	a,0x80
3062  0D7C              l_spr_play_bullets_00340:
3063  0D7C  FA 95 0D    	jp	M, l_spr_play_bullets_00109
3064  0D7F  DD 6E FA    	ld	l,(ix-6)
3065  0D82  DD 66 FB    	ld	h,(ix-5)
3066  0D85  4E          	ld	c, (hl)
3067  0D86  0D          	dec	c
3068  0D87  0D          	dec	c
3069  0D88  DD 6E FA    	ld	l,(ix-6)
3070  0D8B  DD 66 FB    	ld	h,(ix-5)
3071  0D8E  71          	ld	(hl), c
3072  0D8F  21 00 00    	ld	hl,_s_lin0
3073  0D92  71          	ld	(hl), c
3074  0D93  18 08       	jr	l_spr_play_bullets_00112
3075  0D95              l_spr_play_bullets_00109:
3076  0D95  DD 6E F8    	ld	l,(ix-8)
3077  0D98  DD 66 F9    	ld	h,(ix-7)
3078  0D9B  36 02       	ld	(hl),0x02
3079  0D9D              l_spr_play_bullets_00112:
3080  0D9D  DD 6E F8    	ld	l,(ix-8)
3081  0DA0  DD 66 F9    	ld	h,(ix-7)
3082  0DA3  7E          	ld	a, (hl)
3083  0DA4  D6 04       	sub	a,0x04
3084  0DA6  20 66       	jr	NZ,l_spr_play_bullets_00123
3085  0DA8  3E 00       	ld	a, +((_bullet_vel) & 0xFF)
3086  0DAA  DD 86 F5    	add	a,(ix-11)
3087  0DAD  4F          	ld	c, a
3088  0DAE  3E 00       	ld	a, +((_bullet_vel) / 256)
3089  0DB0  CE 00       	adc	a,0x00
3090  0DB2  47          	ld	b, a
3091  0DB3  0A          	ld	a, (bc)
3092  0DB4  5F          	ld	e, a
3093  0DB5  21 00 00    	ld	hl,_game_gravity
3094  0DB8  56          	ld	d, (hl)
3095  0DB9  7B          	ld	a, e
3096  0DBA  82          	add	a, d
3097  0DBB  5F          	ld	e,a
3098  0DBC  02          	ld	(bc), a
3099  0DBD  3E 78       	ld	a,0x78
3100  0DBF  93          	sub	a, e
3101  0DC0  E2 C5 0D    	jp	PO, l_spr_play_bullets_00343
3102  0DC3  EE 80       	xor	a,0x80
3103  0DC5              l_spr_play_bullets_00343:
3104  0DC5  F2 CB 0D    	jp	P, l_spr_play_bullets_00114
3105  0DC8  3E 78       	ld	a,0x78
3106  0DCA  02          	ld	(bc), a
3107  0DCB              l_spr_play_bullets_00114:
3108  0DCB  0A          	ld	a, (bc)
3109  0DCC  EE 80       	xor	a,0x80
3110  0DCE  D6 08       	sub	a,0x08
3111  0DD0  30 03       	jr	NC,l_spr_play_bullets_00116
3112  0DD2  3E 88       	ld	a,0x88
3113  0DD4  02          	ld	(bc), a
3114  0DD5              l_spr_play_bullets_00116:
3115  0DD5  0A          	ld	a, (bc)
3116  0DD6  CB 47       	bit	0,a
3117  0DD8  32 00 00    	ld	(_s_lin1),a
3118  0DDB  28 04       	jr	Z,l_spr_play_bullets_00118
3119  0DDD  21 00 00    	ld	hl,_s_lin1
3120  0DE0  35          	dec	(hl)
3121  0DE1              l_spr_play_bullets_00118:
3122  0DE1  DD 6E FA    	ld	l,(ix-6)
3123  0DE4  DD 66 FB    	ld	h,(ix-5)
3124  0DE7  7E          	ld	a, (hl)
3125  0DE8  21 00 00    	ld	hl,_s_lin1
3126  0DEB  86          	add	a, (hl)
3127  0DEC  21 00 00    	ld	hl,_s_lin0
3128  0DEF  77          	ld	(hl), a
3129  0DF0  3E 90       	ld	a,0x90
3130  0DF2  96          	sub	a, (hl)
3131  0DF3  30 0F       	jr	NC,l_spr_play_bullets_00120
3132  0DF5  21 00 00    	ld	hl,_bullet_count
3133  0DF8  35          	dec	(hl)
3134  0DF9  DD 6E FD    	ld	l,(ix-3)
3135  0DFC  DD 66 FE    	ld	h,(ix-2)
3136  0DFF  36 FF       	ld	(hl),0xff
3137  0E01  C3 C6 10    	jp	l_spr_play_bullets_00171
3138  0E04              l_spr_play_bullets_00120:
3139  0E04  DD 6E FA    	ld	l,(ix-6)
3140  0E07  DD 66 FB    	ld	h,(ix-5)
3141  0E0A  3A 00 00    	ld	a,(_s_lin0)
3142  0E0D  77          	ld	(hl),a
3143  0E0E              l_spr_play_bullets_00123:
3144  0E0E  3E 00       	ld	a, +((_bullet_dir) & 0xFF)
3145  0E10  DD 86 F5    	add	a,(ix-11)
3146  0E13  6F          	ld	l, a
3147  0E14  3E 00       	ld	a, +((_bullet_dir) / 256)
3148  0E16  CE 00       	adc	a,0x00
3149  0E18  67          	ld	h, a
3150  0E19  4E          	ld	c, (hl)
3151  0E1A  0C          	inc	c
3152  0E1B  20 3D       	jr	NZ,l_spr_play_bullets_00133
3153  0E1D  3E 00       	ld	a, +((_bullet_colint) & 0xFF)
3154  0E1F  DD 86 F5    	add	a,(ix-11)
3155  0E22  4F          	ld	c, a
3156  0E23  3E 00       	ld	a, +((_bullet_colint) / 256)
3157  0E25  CE 00       	adc	a,0x00
3158  0E27  47          	ld	b, a
3159  0E28  0A          	ld	a, (bc)
3160  0E29  3C          	inc	a
3161  0E2A  5F          	ld	e,a
3162  0E2B  02          	ld	(bc), a
3163  0E2C  3E 00       	ld	a, +((_bullet_frames) & 0xFF)
3164  0E2E  DD 86 F5    	add	a,(ix-11)
3165  0E31  6F          	ld	l, a
3166  0E32  3E 00       	ld	a, +((_bullet_frames) / 256)
3167  0E34  CE 00       	adc	a,0x00
3168  0E36  67          	ld	h, a
3169  0E37  56          	ld	d, (hl)
3170  0E38  7B          	ld	a, e
3171  0E39  92          	sub	a, d
3172  0E3A  38 63       	jr	C,l_spr_play_bullets_00134
3173  0E3C  DD 6E FD    	ld	l,(ix-3)
3174  0E3F  DD 66 FE    	ld	h,(ix-2)
3175  0E42  7E          	ld	a, (hl)
3176  0E43  3C          	inc	a
3177  0E44  DD 77 F3    	ld	(ix-13),a
3178  0E47  AF          	xor	a, a
3179  0E48  02          	ld	(bc), a
3180  0E49  DD 7E F3    	ld	a,(ix-13)
3181  0E4C  E6 01       	and	a,0x01
3182  0E4E  3D          	dec	a
3183  0E4F  20 4E       	jr	NZ,l_spr_play_bullets_00134
3184  0E51  DD 7E F3    	ld	a,(ix-13)
3185  0E54  3C          	inc	a
3186  0E55  32 00 00    	ld	(_s_col0),a
3187  0E58  18 45       	jr	l_spr_play_bullets_00134
3188  0E5A              l_spr_play_bullets_00133:
3189  0E5A  01 00 00    	ld	bc,_bullet_colint
3190  0E5D  DD 6E F5    	ld	l,(ix-11)
3191  0E60  26 00       	ld	h,0x00
3192  0E62  09          	add	hl,bc
3193  0E63  DD 75 F6    	ld	(ix-10),l
3194  0E66  DD 74 F7    	ld	(ix-9),h
3195  0E69  4E          	ld	c,(hl)
3196  0E6A  0D          	dec	c
3197  0E6B  71          	ld	(hl), c
3198  0E6C  0C          	inc	c
3199  0E6D  20 30       	jr	NZ,l_spr_play_bullets_00134
3200  0E6F  DD 6E FD    	ld	l,(ix-3)
3201  0E72  DD 66 FE    	ld	h,(ix-2)
3202  0E75  7E          	ld	a, (hl)
3203  0E76  C6 FF       	add	a,0xff
3204  0E78  DD 77 F3    	ld	(ix-13),a
3205  0E7B  3E 00       	ld	a, +((_bullet_frames) & 0xFF)
3206  0E7D  DD 86 F5    	add	a,(ix-11)
3207  0E80  6F          	ld	l, a
3208  0E81  3E 00       	ld	a, +((_bullet_frames) / 256)
3209  0E83  CE 00       	adc	a,0x00
3210  0E85  67          	ld	h, a
3211  0E86  4E          	ld	c, (hl)
3212  0E87  0D          	dec	c
3213  0E88  DD 6E F6    	ld	l,(ix-10)
3214  0E8B  DD 66 F7    	ld	h,(ix-9)
3215  0E8E  71          	ld	(hl), c
3216  0E8F  DD 7E F3    	ld	a,(ix-13)
3217  0E92  E6 01       	and	a,0x01
3218  0E94  3D          	dec	a
3219  0E95  20 08       	jr	NZ,l_spr_play_bullets_00134
3220  0E97  DD 7E F3    	ld	a,(ix-13)
3221  0E9A  C6 FF       	add	a,0xff
3222  0E9C  32 00 00    	ld	(_s_col0),a
3223  0E9F              l_spr_play_bullets_00134:
3224  0E9F  21 00 00    	ld	hl,_tmp1
3225  0EA2  36 00       	ld	(hl),0x00
3226  0EA4  3E 00       	ld	a, +((_bullet_max) & 0xFF)
3227  0EA6  DD 86 F5    	add	a,(ix-11)
3228  0EA9  4F          	ld	c, a
3229  0EAA  3E 00       	ld	a, +((_bullet_max) / 256)
3230  0EAC  CE 00       	adc	a,0x00
3231  0EAE  47          	ld	b, a
3232  0EAF  0A          	ld	a, (bc)
3233  0EB0  B7          	or	a, a
3234  0EB1  28 27       	jr	Z,l_spr_play_bullets_00138
3235  0EB3  DD 5E F3    	ld	e,(ix-13)
3236  0EB6  16 00       	ld	d,0x00
3237  0EB8  3E 00       	ld	a, +((_bullet_col0) & 0xFF)
3238  0EBA  DD 86 F5    	add	a,(ix-11)
3239  0EBD  6F          	ld	l, a
3240  0EBE  3E 00       	ld	a, +((_bullet_col0) / 256)
3241  0EC0  CE 00       	adc	a,0x00
3242  0EC2  67          	ld	h, a
3243  0EC3  6E          	ld	l, (hl)
3244  0EC4  AF          	xor	a,a
3245  0EC5  67          	ld	h,a
3246  0EC6  EB          	ex	de,hl
3247  0EC7  ED 52       	sbc	hl,de
3248  0EC9  CD 00 00    	call	_abs_fastcall
3249  0ECC  5D          	ld	e, l
3250  0ECD  21 00 00    	ld	hl,_tmp0
3251  0ED0  73          	ld	(hl), e
3252  0ED1  0A          	ld	a, (bc)
3253  0ED2  96          	sub	a, (hl)
3254  0ED3  30 05       	jr	NC,l_spr_play_bullets_00138
3255  0ED5  21 00 00    	ld	hl,_tmp1
3256  0ED8  36 01       	ld	(hl),0x01
3257  0EDA              l_spr_play_bullets_00138:
3258  0EDA  DD 7E F3    	ld	a,(ix-13)
3259  0EDD  D6 1E       	sub	a,0x1e
3260  0EDF  38 05       	jr	C,l_spr_play_bullets_00140
3261  0EE1  21 00 00    	ld	hl,_tmp1
3262  0EE4  36 01       	ld	(hl),0x01
3263  0EE6              l_spr_play_bullets_00140:
3264  0EE6  3A 00 00    	ld	a,(_tmp1)
3265  0EE9  B7          	or	a, a
3266  0EEA  28 0F       	jr	Z,l_spr_play_bullets_00142
3267  0EEC  21 00 00    	ld	hl,_bullet_count
3268  0EEF  35          	dec	(hl)
3269  0EF0  DD 6E FD    	ld	l,(ix-3)
3270  0EF3  DD 66 FE    	ld	h,(ix-2)
3271  0EF6  36 FF       	ld	(hl),0xff
3272  0EF8  C3 C6 10    	jp	l_spr_play_bullets_00171
3273  0EFB              l_spr_play_bullets_00142:
3274  0EFB  DD 7E FD    	ld	a,(ix-3)
3275  0EFE  DD 77 F6    	ld	(ix-10),a
3276  0F01  DD 7E FE    	ld	a,(ix-2)
3277  0F04  DD 77 F7    	ld	(ix-9),a
3278  0F07  DD 6E FD    	ld	l,(ix-3)
3279  0F0A  DD 66 FE    	ld	h,(ix-2)
3280  0F0D  DD 7E F3    	ld	a,(ix-13)
3281  0F10  96          	sub	a,(hl)
3282  0F11  CA 91 10    	jp	Z,l_spr_play_bullets_00168
3283  0F14  3A 00 00    	ld	a,(_s_lin0)
3284  0F17  C6 08       	add	a,0x08
3285  0F19  4F          	ld	c, a
3286  0F1A  3A 00 00    	ld	a, (_s_col0)
3287  0F1D  47          	ld	b,a
3288  0F1E  C5          	push	bc
3289  0F1F  CD 00 00    	call	_spr_calc_index
3290  0F22  F1          	pop	af
3291  0F23  22 00 00    	ld	(_index0),hl
3292  0F26  11 00 00    	ld	de,_scr_map
3293  0F29  19          	add	hl,de
3294  0F2A  7E          	ld	a,(hl)
3295  0F2B  EB          	ex	de,hl
3296  0F2C  4F          	ld	c, a
3297  0F2D  DD 7E F5    	ld	a,(ix-11)
3298  0F30  D6 07       	sub	a,0x07
3299  0F32  20 04       	jr	NZ,l_spr_play_bullets_00354
3300  0F34  3E 01       	ld	a,0x01
3301  0F36  18 01       	jr	l_spr_play_bullets_00355
3302  0F38              l_spr_play_bullets_00354:
3303  0F38  AF          	xor	a,a
3304  0F39              l_spr_play_bullets_00355:
3305  0F39  47          	ld	b, a
3306  0F3A  79          	ld	a, c
3307  0F3B  D6 4D       	sub	a,0x4d
3308  0F3D  20 3D       	jr	NZ,l_spr_play_bullets_00144
3309  0F3F  B0          	or	a,b
3310  0F40  28 3A       	jr	Z,l_spr_play_bullets_00144
3311  0F42  AF          	xor	a, a
3312  0F43  12          	ld	(de), a
3313  0F44  2A 00 00    	ld	hl,(_index0)
3314  0F47  E5          	push	hl
3315  0F48  CD 00 00    	call	_game_obj_set
3316  0F4B  F1          	pop	af
3317  0F4C  2A 00 00    	ld	hl,(_index0)
3318  0F4F  4D          	ld	c,l
3319  0F50  5C          	ld	e,h
3320  0F51  06 04       	ld	b,0x04
3321  0F53  79          	ld	a,c
3322  0F54              l_spr_play_bullets_00358:
3323  0F54  CB 3B       	srl	e
3324  0F56  1F          	rra
3325  0F57  10 FB       	djnz	l_spr_play_bullets_00358
3326  0F59  07          	rlca
3327  0F5A  07          	rlca
3328  0F5B  07          	rlca
3329  0F5C  07          	rlca
3330  0F5D  E6 F0       	and	a,0xf0
3331  0F5F  DD 6E FA    	ld	l,(ix-6)
3332  0F62  DD 66 FB    	ld	h,(ix-5)
3333  0F65  77          	ld	(hl), a
3334  0F66  3A 00 00    	ld	a,(_index0)
3335  0F69  E6 0F       	and	a,0x0f
3336  0F6B  87          	add	a, a
3337  0F6C  DD 6E FD    	ld	l,(ix-3)
3338  0F6F  DD 66 FE    	ld	h,(ix-2)
3339  0F72  77          	ld	(hl), a
3340  0F73  DD 6E F5    	ld	l,(ix-11)
3341  0F76  CD D9 10    	call	_spr_explode_bullet
3342  0F79  C3 C6 10    	jp	l_spr_play_bullets_00171
3343  0F7C              l_spr_play_bullets_00144:
3344  0F7C  79          	ld	a, c
3345  0F7D  D6 3C       	sub	a,0x3c
3346  0F7F  38 0C       	jr	C,l_spr_play_bullets_00147
3347  0F81  0C          	inc	c
3348  0F82  28 09       	jr	Z,l_spr_play_bullets_00147
3349  0F84  DD 6E F5    	ld	l,(ix-11)
3350  0F87  CD D9 10    	call	_spr_explode_bullet
3351  0F8A  C3 C6 10    	jp	l_spr_play_bullets_00171
3352  0F8D              l_spr_play_bullets_00147:
3353  0F8D  DD 6E FD    	ld	l,(ix-3)
3354  0F90  DD 66 FE    	ld	h,(ix-2)
3355  0F93  DD 7E F3    	ld	a,(ix-13)
3356  0F96  77          	ld	(hl), a
3357  0F97  DD 6E F8    	ld	l,(ix-8)
3358  0F9A  DD 66 F9    	ld	h,(ix-7)
3359  0F9D  7E          	ld	a, (hl)
3360  0F9E  D6 04       	sub	a,0x04
3361  0FA0  20 16       	jr	NZ,l_spr_play_bullets_00150
3362  0FA2  21 00 00    	ld	hl,_s_lin0
3363  0FA5  7E          	ld	a, (hl)
3364  0FA6  C6 F0       	add	a,0xf0
3365  0FA8  DD 77 F4    	ld	(ix-12),a
3366  0FAB  7E          	ld	a, (hl)
3367  0FAC  C6 10       	add	a,0x10
3368  0FAE  5F          	ld	e, a
3369  0FAF  DD 35 F3    	dec	(ix-13)
3370  0FB2  DD 56 F3    	ld	d,(ix-13)
3371  0FB5  14          	inc	d
3372  0FB6  18 11       	jr	l_spr_play_bullets_00151
3373  0FB8              l_spr_play_bullets_00150:
3374  0FB8  21 00 00    	ld	hl,_s_lin0
3375  0FBB  7E          	ld	a, (hl)
3376  0FBC  C6 F8       	add	a,0xf8
3377  0FBE  DD 77 F4    	ld	(ix-12),a
3378  0FC1  7E          	ld	a, (hl)
3379  0FC2  C6 08       	add	a,0x08
3380  0FC4  5F          	ld	e, a
3381  0FC5  DD 56 F3    	ld	d,(ix-13)
3382  0FC8  14          	inc	d
3383  0FC9              l_spr_play_bullets_00151:
3384  0FC9  78          	ld	a, b
3385  0FCA  B7          	or	a, a
3386  0FCB  CA 5B 10    	jp	Z, l_spr_play_bullets_00165
3387  0FCE  21 00 00    	ld	hl,_tmp0
3388  0FD1  36 00       	ld	(hl),0x00
3389  0FD3              l_spr_play_bullets_00173:
3390  0FD3  2A 00 00    	ld	hl,(_tmp0)
3391  0FD6  26 00       	ld	h,0x00
3392  0FD8  01 00 00    	ld	bc,_class
3393  0FDB  09          	add	hl,bc
3394  0FDC  7E          	ld	a,(hl)
3395  0FDD  B7          	or	a,a
3396  0FDE  28 6E       	jr	Z,l_spr_play_bullets_00174
3397  0FE0  2A 00 00    	ld	hl,(_tmp0)
3398  0FE3  26 00       	ld	h,0x00
3399  0FE5  01 00 00    	ld	bc,_lin
3400  0FE8  09          	add	hl,bc
3401  0FE9  7E          	ld	a,(hl)
3402  0FEA  21 00 00    	ld	hl,_tmp0
3403  0FED  DD 77 F8    	ld	(ix-8),a
3404  0FF0  DD 96 F4    	sub	a,(ix-12)
3405  0FF3  38 59       	jr	C,l_spr_play_bullets_00174
3406  0FF5  7B          	ld	a, e
3407  0FF6  DD 96 F8    	sub	a,(ix-8)
3408  0FF9  38 53       	jr	C,l_spr_play_bullets_00174
3409  0FFB  4E          	ld	c,(hl)
3410  0FFC  06 00       	ld	b,0x00
3411  0FFE  21 00 00    	ld	hl,_col
3412  1001  09          	add	hl,bc
3413  1002  7E          	ld	a,(hl)
3414  1003  4F          	ld	c,a
3415  1004  DD 96 F3    	sub	a,(ix-13)
3416  1007  38 45       	jr	C,l_spr_play_bullets_00174
3417  1009  7A          	ld	a, d
3418  100A  91          	sub	a, c
3419  100B  38 41       	jr	C,l_spr_play_bullets_00174
3420  100D  DD 7E F8    	ld	a,(ix-8)
3421  1010  32 00 00    	ld	(_s_lin0),a
3422  1013  21 00 00    	ld	hl,_s_col0
3423  1016  71          	ld	(hl), c
3424  1017  CD 00 00    	call	_rand
3425  101A  01 06 00    	ld	bc,0x0006
3426  101D  C5          	push	bc
3427  101E  E5          	push	hl
3428  101F  CD 00 00    	call	__modsint_callee
3429  1022  CD 00 00    	call	_player_score_add
3430  1025  2A 00 00    	ld	hl,(_tmp0)
3431  1028  26 00       	ld	h,0x00
3432  102A  29          	add	hl,hl
3433  102B  01 00 00    	ld	bc,_game_respawn_time
3434  102E  09          	add	hl,bc
3435  102F  ED 5B 00 00 	ld	de,(_curr_time)
3436  1033  73          	ld	(hl),e
3437  1034  23          	inc	hl
3438  1035  72          	ld	(hl),d
3439  1036  2A 00 00    	ld	hl,(_tmp0)
3440  1039  CD D1 05    	call	_spr_destroy
3441  103C  DD 6E F6    	ld	l,(ix-10)
3442  103F  DD 66 F7    	ld	h,(ix-9)
3443  1042  3A 00 00    	ld	a,(_s_col0)
3444  1045  77          	ld	(hl),a
3445  1046  DD 6E F5    	ld	l,(ix-11)
3446  1049  CD D9 10    	call	_spr_explode_bullet
3447  104C  18 43       	jr	l_spr_play_bullets_00168
3448  104E              l_spr_play_bullets_00174:
3449  104E  21 00 00    	ld	hl,_tmp0
3450  1051  7E          	ld	a,(hl)
3451  1052  3C          	inc	a
3452  1053  77          	ld	(hl),a
3453  1054  D6 07       	sub	a,0x07
3454  1056  DA D3 0F    	jp	C, l_spr_play_bullets_00173
3455  1059  18 36       	jr	l_spr_play_bullets_00168
3456  105B              l_spr_play_bullets_00165:
3457  105B  3A 07 00    	ld	a,(_lin + 7)
3458  105E  4F          	ld	c,a
3459  105F  DD 96 F4    	sub	a,(ix-12)
3460  1062  38 2D       	jr	C,l_spr_play_bullets_00168
3461  1064  7B          	ld	a, e
3462  1065  91          	sub	a, c
3463  1066  38 29       	jr	C,l_spr_play_bullets_00168
3464  1068  3A 07 00    	ld	a,(_col + 7)
3465  106B  4F          	ld	c,a
3466  106C  DD 96 F3    	sub	a,(ix-13)
3467  106F  38 20       	jr	C,l_spr_play_bullets_00168
3468  1071  7A          	ld	a, d
3469  1072  91          	sub	a, c
3470  1073  38 1C       	jr	C,l_spr_play_bullets_00168
3471  1075  2E 03       	ld	l,0x03
3472  1077  CD 00 00    	call	_zx_border_fastcall
3473  107A  2E 0A       	ld	l,0x0a
3474  107C  CD 00 00    	call	_player_hit
3475  107F  DD 6E FD    	ld	l,(ix-3)
3476  1082  DD 66 FE    	ld	h,(ix-2)
3477  1085  3A 00 00    	ld	a,(_s_col0)
3478  1088  77          	ld	(hl),a
3479  1089  DD 6E FF    	ld	l,(ix-1)
3480  108C  CD D9 10    	call	_spr_explode_bullet
3481  108F  18 43       	jr	l_spr_play_bullets_00176
3482  1091              l_spr_play_bullets_00168:
3483  1091  DD 6E F6    	ld	l,(ix-10)
3484  1094  DD 66 F7    	ld	h,(ix-9)
3485  1097  4E          	ld	c, (hl)
3486  1098  0C          	inc	c
3487  1099  28 2B       	jr	Z,l_spr_play_bullets_00171
3488  109B  F3          	di
3489  109C  3E 00       	ld	a, +((_bullet_tile) & 0xFF)
3490  109E  DD 86 F5    	add	a,(ix-11)
3491  10A1  6F          	ld	l, a
3492  10A2  3E 00       	ld	a, +((_bullet_tile) / 256)
3493  10A4  CE 00       	adc	a,0x00
3494  10A6  67          	ld	h, a
3495  10A7  4E          	ld	c, (hl)
3496  10A8  3E 00       	ld	a, +((_bullet_colint) & 0xFF)
3497  10AA  DD 86 F5    	add	a,(ix-11)
3498  10AD  6F          	ld	l, a
3499  10AE  3E 00       	ld	a, +((_bullet_colint) / 256)
3500  10B0  CE 00       	adc	a,0x00
3501  10B2  67          	ld	h, a
3502  10B3  46          	ld	b, (hl)
3503  10B4  79          	ld	a, c
3504  10B5  80          	add	a, b
3505  10B6  47          	ld	b, a
3506  10B7  DD 7E F3    	ld	a,(ix-13)
3507  10BA  F5          	push	af
3508  10BB  33          	inc	sp
3509  10BC  3A 00 00    	ld	a,(_s_lin0)
3510  10BF  48          	ld	c,b
3511  10C0  47          	ld	b,a
3512  10C1  C5          	push	bc
3513  10C2  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
3514  10C5  FB          	ei
3515  10C6              l_spr_play_bullets_00171:
3516  10C6  DD 34 F5    	inc	(ix-11)
3517  10C9  DD 7E F5    	ld	a,(ix-11)
3518  10CC  DD 77 FF    	ld	(ix-1),a
3519  10CF  D6 08       	sub	a,0x08
3520  10D1  DA BC 0C    	jp	C, l_spr_play_bullets_00175
3521  10D4              l_spr_play_bullets_00176:
3522  10D4  DD F9       	ld	sp, ix
3523  10D6  DD E1       	pop	ix
3524  10D8  C9          	ret
3525  10D9              	SECTION code_compiler
3526  10D9              ;	---------------------------------
3527  10D9              ; Function spr_explode_bullet
3528  10D9              ; ---------------------------------
3529  10D9              _spr_explode_bullet:
3530  10D9  5D          	ld	e, l
3531  10DA  3E 00       	ld	a, +((_bullet_col) & 0xFF)
3532  10DC  83          	add	a, e
3533  10DD  4F          	ld	c, a
3534  10DE  3E 00       	ld	a, +((_bullet_col) / 256)
3535  10E0  CE 00       	adc	a,0x00
3536  10E2  47          	ld	b, a
3537  10E3  0A          	ld	a, (bc)
3538  10E4  57          	ld	d, a
3539  10E5  3E 00       	ld	a, +((_bullet_lin) & 0xFF)
3540  10E7  83          	add	a, e
3541  10E8  6F          	ld	l, a
3542  10E9  3E 00       	ld	a, +((_bullet_lin) / 256)
3543  10EB  CE 00       	adc	a,0x00
3544  10ED  67          	ld	h, a
3545  10EE  5E          	ld	e, (hl)
3546  10EF  C5          	push	bc
3547  10F0  21 00 00    	ld	hl,0x0000
3548  10F3  E5          	push	hl
3549  10F4  21 87 03    	ld	hl,0x0387
3550  10F7  E5          	push	hl
3551  10F8  D5          	push	de
3552  10F9  CD E9 0A    	call	_spr_add_anim
3553  10FC  F1          	pop	af
3554  10FD  F1          	pop	af
3555  10FE  F1          	pop	af
3556  10FF  C1          	pop	bc
3557  1100  21 00 00    	ld	hl,_bullet_count
3558  1103  35          	dec	(hl)
3559  1104  3E FF       	ld	a,0xff
3560  1106  02          	ld	(bc), a
3561  1107  C9          	ret
3562  1108              	SECTION code_compiler
3563  1108              ;	---------------------------------
3564  1108              ; Function spr_turn_horizontal
3565  1108              ; ---------------------------------
3566  1108              _spr_turn_horizontal:
3567  1108  21 00 00    	ld	hl,_s_state
3568  110B  CB 56       	bit	2, (hl)
3569  110D  28 0B       	jr	Z,l_spr_turn_horizontal_00102
3570  110F  21 00 00    	ld	hl,_s_state
3571  1112  7E          	ld	a,(hl)
3572  1113  F6 08       	or	a,0x08
3573  1115  E6 FB       	and	a,0xfb
3574  1117  77          	ld	(hl),a
3575  1118  18 09       	jr	l_spr_turn_horizontal_00103
3576  111A              l_spr_turn_horizontal_00102:
3577  111A  21 00 00    	ld	hl,_s_state
3578  111D  7E          	ld	a,(hl)
3579  111E  E6 F7       	and	a,0xf7
3580  1120  F6 04       	or	a,0x04
3581  1122  77          	ld	(hl),a
3582  1123              l_spr_turn_horizontal_00103:
3583  1123  2A 00 00    	ld	hl,(_sprite)
3584  1126  26 00       	ld	h,0x00
3585  1128  01 00 00    	ld	bc,_state
3586  112B  09          	add	hl,bc
3587  112C  3A 00 00    	ld	a,(_s_state)
3588  112F  77          	ld	(hl),a
3589  1130  2A 00 00    	ld	hl,(_sprite)
3590  1133  26 00       	ld	h,0x00
3591  1135  01 00 00    	ld	bc,_tile
3592  1138  09          	add	hl,bc
3593  1139  E5          	push	hl
3594  113A  2A 00 00    	ld	hl,(_sprite)
3595  113D  CD 3A 06    	call	_spr_tile
3596  1140  C1          	pop	bc
3597  1141  7D          	ld	a,l
3598  1142  02          	ld	(bc), a
3599  1143  C9          	ret
3600  1144              	SECTION code_compiler
3601  1144              ;	---------------------------------
3602  1144              ; Function spr_btile_paint_back
3603  1144              ; ---------------------------------
3604  1144              _spr_btile_paint_back:
3605  1144  21 20 00    	ld	hl,0x0020
3606  1147  22 00 00    	ld	(_tmp_ui),hl
3607  114A              l_spr_btile_paint_back_00106:
3608  114A  21 00 00    	ld	hl,_tmp_ui
3609  114D  7E          	ld	a, (hl)
3610  114E  D6 A0       	sub	a,0xa0
3611  1150  23          	inc	hl
3612  1151  7E          	ld	a, (hl)
3613  1152  DE 28       	sbc	a,0x28
3614  1154  30 4C       	jr	NC,l_spr_btile_paint_back_00109
3615  1156  21 00 00    	ld	hl,_tmp0
3616  1159  36 00       	ld	(hl),0x00
3617  115B              l_spr_btile_paint_back_00103:
3618  115B  3A 00 00    	ld	a,(_tmp0)
3619  115E  D6 10       	sub	a,0x10
3620  1160  30 34       	jr	NC,l_spr_btile_paint_back_00105
3621  1162  01 00 00    	ld	bc,_btiles
3622  1165  2A 00 00    	ld	hl,(_tmp_ui)
3623  1168  09          	add	hl,bc
3624  1169  7D          	ld	a,l
3625  116A  44          	ld	b,h
3626  116B  21 00 00    	ld	hl,_tmp0
3627  116E  86          	add	a, (hl)
3628  116F  4F          	ld	c, a
3629  1170  78          	ld	a, b
3630  1171  CE 00       	adc	a,0x00
3631  1173  47          	ld	b, a
3632  1174  0A          	ld	a, (bc)
3633  1175  32 00 00    	ld	(_tmp),a
3634  1178  E6 38       	and	a,0x38
3635  117A  5F          	ld	e, a
3636  117B  3A 00 00    	ld	a,(_map_paper_last)
3637  117E  93          	sub	a, e
3638  117F  20 0F       	jr	NZ,l_spr_btile_paint_back_00102
3639  1181  21 00 00    	ld	hl,_tmp
3640  1184  7E          	ld	a, (hl)
3641  1185  E6 C7       	and	a,0xc7
3642  1187  77          	ld	(hl),a
3643  1188  21 00 00    	ld	hl,_map_paper
3644  118B  B6          	or	a, (hl)
3645  118C  32 00 00    	ld	(_tmp),a
3646  118F  02          	ld	(bc), a
3647  1190              l_spr_btile_paint_back_00102:
3648  1190  21 00 00    	ld	hl,_tmp0
3649  1193  34          	inc	(hl)
3650  1194  18 C5       	jr	l_spr_btile_paint_back_00103
3651  1196              l_spr_btile_paint_back_00105:
3652  1196  2A 00 00    	ld	hl,(_tmp_ui)
3653  1199  11 30 00    	ld	de,0x0030
3654  119C  19          	add	hl,de
3655  119D  22 00 00    	ld	(_tmp_ui),hl
3656  11A0  18 A8       	jr	l_spr_btile_paint_back_00106
3657  11A2              l_spr_btile_paint_back_00109:
3658  11A2  C9          	ret
3659  11A3              	SECTION IGNORE
3660  0000              
