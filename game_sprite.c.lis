1     0000              MODULE game_sprite_c
2     0000              
3     0000              ;--------------------------------------------------------
4     0000              ; File Created by SDCC : free open source ANSI-C Compiler
5     0000              ; Version 3.6.5 #9958 (Mac OS X i386)
6     0000              ;--------------------------------------------------------
7     0000              ; Processed by Z88DK
8     0000              ;--------------------------------------------------------
9     0000              
10    0000              	EXTERN __divschar
11    0000              	EXTERN __divschar_callee
12    0000              	EXTERN __divsint
13    0000              	EXTERN __divsint_callee
14    0000              	EXTERN __divslong
15    0000              	EXTERN __divslong_callee
16    0000              	EXTERN __divslonglong
17    0000              	EXTERN __divslonglong_callee
18    0000              	EXTERN __divsuchar
19    0000              	EXTERN __divsuchar_callee
20    0000              	EXTERN __divuchar
21    0000              	EXTERN __divuchar_callee
22    0000              	EXTERN __divuint
23    0000              	EXTERN __divuint_callee
24    0000              	EXTERN __divulong
25    0000              	EXTERN __divulong_callee
26    0000              	EXTERN __divulonglong
27    0000              	EXTERN __divulonglong_callee
28    0000              	EXTERN __divuschar
29    0000              	EXTERN __divuschar_callee
30    0000              	EXTERN __modschar
31    0000              	EXTERN __modschar_callee
32    0000              	EXTERN __modsint
33    0000              	EXTERN __modsint_callee
34    0000              	EXTERN __modslong
35    0000              	EXTERN __modslong_callee
36    0000              	EXTERN __modslonglong
37    0000              	EXTERN __modslonglong_callee
38    0000              	EXTERN __modsuchar
39    0000              	EXTERN __modsuchar_callee
40    0000              	EXTERN __moduchar
41    0000              	EXTERN __moduchar_callee
42    0000              	EXTERN __moduint
43    0000              	EXTERN __moduint_callee
44    0000              	EXTERN __modulong
45    0000              	EXTERN __modulong_callee
46    0000              	EXTERN __modulonglong
47    0000              	EXTERN __modulonglong_callee
48    0000              	EXTERN __moduschar
49    0000              	EXTERN __moduschar_callee
50    0000              	EXTERN __mulint
51    0000              	EXTERN __mulint_callee
52    0000              	EXTERN __mullong
53    0000              	EXTERN __mullong_callee
54    0000              	EXTERN __mullonglong
55    0000              	EXTERN __mullonglong_callee
56    0000              	EXTERN __mulschar
57    0000              	EXTERN __mulschar_callee
58    0000              	EXTERN __mulsuchar
59    0000              	EXTERN __mulsuchar_callee
60    0000              	EXTERN __muluschar
61    0000              	EXTERN __muluschar_callee
62    0000              	EXTERN __rlslonglong
63    0000              	EXTERN __rlslonglong_callee
64    0000              	EXTERN __rlulonglong
65    0000              	EXTERN __rlulonglong_callee
66    0000              	EXTERN __rrslonglong
67    0000              	EXTERN __rrslonglong_callee
68    0000              	EXTERN __rrulonglong
69    0000              	EXTERN __rrulonglong_callee
70    0000              	EXTERN ___sdcc_call_hl
71    0000              	EXTERN ___sdcc_call_iy
72    0000              	EXTERN ___sdcc_enter_ix
73    0000              	EXTERN _banked_call
74    0000              	EXTERN _banked_ret
75    0000              	EXTERN ___fs2schar
76    0000              	EXTERN ___fs2schar_callee
77    0000              	EXTERN ___fs2sint
78    0000              	EXTERN ___fs2sint_callee
79    0000              	EXTERN ___fs2slong
80    0000              	EXTERN ___fs2slong_callee
81    0000              	EXTERN ___fs2slonglong
82    0000              	EXTERN ___fs2slonglong_callee
83    0000              	EXTERN ___fs2uchar
84    0000              	EXTERN ___fs2uchar_callee
85    0000              	EXTERN ___fs2uint
86    0000              	EXTERN ___fs2uint_callee
87    0000              	EXTERN ___fs2ulong
88    0000              	EXTERN ___fs2ulong_callee
89    0000              	EXTERN ___fs2ulonglong
90    0000              	EXTERN ___fs2ulonglong_callee
91    0000              	EXTERN ___fsadd
92    0000              	EXTERN ___fsadd_callee
93    0000              	EXTERN ___fsdiv
94    0000              	EXTERN ___fsdiv_callee
95    0000              	EXTERN ___fseq
96    0000              	EXTERN ___fseq_callee
97    0000              	EXTERN ___fsgt
98    0000              	EXTERN ___fsgt_callee
99    0000              	EXTERN ___fslt
100   0000              	EXTERN ___fslt_callee
101   0000              	EXTERN ___fsmul
102   0000              	EXTERN ___fsmul_callee
103   0000              	EXTERN ___fsneq
104   0000              	EXTERN ___fsneq_callee
105   0000              	EXTERN ___fssub
106   0000              	EXTERN ___fssub_callee
107   0000              	EXTERN ___schar2fs
108   0000              	EXTERN ___schar2fs_callee
109   0000              	EXTERN ___sint2fs
110   0000              	EXTERN ___sint2fs_callee
111   0000              	EXTERN ___slong2fs
112   0000              	EXTERN ___slong2fs_callee
113   0000              	EXTERN ___slonglong2fs
114   0000              	EXTERN ___slonglong2fs_callee
115   0000              	EXTERN ___uchar2fs
116   0000              	EXTERN ___uchar2fs_callee
117   0000              	EXTERN ___uint2fs
118   0000              	EXTERN ___uint2fs_callee
119   0000              	EXTERN ___ulong2fs
120   0000              	EXTERN ___ulong2fs_callee
121   0000              	EXTERN ___ulonglong2fs
122   0000              	EXTERN ___ulonglong2fs_callee
123   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
126   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
127   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
128   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
129   0000              	EXTERN ____sdcc_4_ldi_save_bc
130   0000              	EXTERN ____sdcc_4_push_hlix
131   0000              	EXTERN ____sdcc_4_push_mhl
132   0000              	EXTERN ____sdcc_lib_setmem_hl
133   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
134   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
135   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
136   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
137   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
138   0000              	EXTERN ____sdcc_ll_add_deix_hlix
139   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
140   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
141   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
142   0000              	EXTERN ____sdcc_ll_asr_hlix_a
143   0000              	EXTERN ____sdcc_ll_asr_mbc_a
144   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
145   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
146   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
147   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
148   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
149   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
150   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
151   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
152   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
153   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
155   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
156   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
157   0000              	EXTERN ____sdcc_ll_push_hlix
158   0000              	EXTERN ____sdcc_ll_push_mhl
159   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
160   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
161   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
162   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
163   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
164   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
165   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
166   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
167   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
168   0000              	EXTERN ____sdcc_load_debc_deix
169   0000              	EXTERN ____sdcc_load_dehl_deix
170   0000              	EXTERN ____sdcc_load_debc_mhl
171   0000              	EXTERN ____sdcc_load_hlde_mhl
172   0000              	EXTERN ____sdcc_store_dehl_bcix
173   0000              	EXTERN ____sdcc_store_debc_hlix
174   0000              	EXTERN ____sdcc_store_debc_mhl
175   0000              	EXTERN ____sdcc_cpu_pop_ei
176   0000              	EXTERN ____sdcc_cpu_pop_ei_jp
177   0000              	EXTERN ____sdcc_cpu_push_di
178   0000              	EXTERN ____sdcc_outi
179   0000              	EXTERN ____sdcc_outi_128
180   0000              	EXTERN ____sdcc_outi_256
181   0000              	EXTERN ____sdcc_ldi
182   0000              	EXTERN ____sdcc_ldi_128
183   0000              	EXTERN ____sdcc_ldi_256
184   0000              
185   0000              ;--------------------------------------------------------
186   0000              ; Public variables in this module
187   0000              ;--------------------------------------------------------
188   0000              	GLOBAL _spr_calc_index
189   0000              	GLOBAL _spr_check_map
190   0000              	GLOBAL _spr_check_map_fall
191   0000              	GLOBAL _spr_chktime
192   0000              	GLOBAL _spr_move_jump
193   0000              	GLOBAL _spr_move_up
194   0000              	GLOBAL _spr_move_down
195   0000              	GLOBAL _spr_move_horizontal
196   0000              	GLOBAL _spr_move_right
197   0000              	GLOBAL _spr_move_left
198   0000              	GLOBAL _spr_page_right
199   0000              	GLOBAL _spr_page_left
200   0000              	GLOBAL _spr_page_map
201   0000              	GLOBAL _spr_redraw
202   0000              	GLOBAL _spr_destroy
203   0000              	GLOBAL _spr_tile
204   0000              	GLOBAL _spr_tile_dir
205   0000              	GLOBAL _spr_draw_map_background
206   0000              	GLOBAL _spr_draw_clear
207   0000              	GLOBAL _spr_brick_anim
208   0000              	GLOBAL _spr_draw_index
209   0000              	GLOBAL _spr_draw_row
210   0000              	GLOBAL _spr_calc_hor
211   0000              	GLOBAL _spr_collision_check
212   0000              	GLOBAL _spr_kill_all
213   0000              	GLOBAL _spr_back_repaint
214   0000              	GLOBAL _spr_tile_paint
215   0000              	GLOBAL _spr_init_anim
216   0000              	GLOBAL _spr_init_bullet
217   0000              	GLOBAL _spr_add_anim
218   0000              	GLOBAL _spr_play_anim
219   0000              	GLOBAL _spr_play_bullets
220   0000              	GLOBAL _spr_turn_horizontal
221   0000              ;--------------------------------------------------------
222   0000              ; Externals used
223   0000              ;--------------------------------------------------------
224   0000              	GLOBAL _ulltoa_callee
225   0000              	GLOBAL _ulltoa
226   0000              	GLOBAL _strtoull_callee
227   0000              	GLOBAL _strtoull
228   0000              	GLOBAL _strtoll_callee
229   0000              	GLOBAL _strtoll
230   0000              	GLOBAL _lltoa_callee
231   0000              	GLOBAL _lltoa
232   0000              	GLOBAL _llabs_callee
233   0000              	GLOBAL _llabs
234   0000              	GLOBAL __lldivu__callee
235   0000              	GLOBAL __lldivu_
236   0000              	GLOBAL __lldiv__callee
237   0000              	GLOBAL __lldiv_
238   0000              	GLOBAL _atoll_callee
239   0000              	GLOBAL _atoll
240   0000              	GLOBAL _realloc_unlocked_callee
241   0000              	GLOBAL _realloc_unlocked
242   0000              	GLOBAL _malloc_unlocked_fastcall
243   0000              	GLOBAL _malloc_unlocked
244   0000              	GLOBAL _free_unlocked_fastcall
245   0000              	GLOBAL _free_unlocked
246   0000              	GLOBAL _calloc_unlocked_callee
247   0000              	GLOBAL _calloc_unlocked
248   0000              	GLOBAL _aligned_alloc_unlocked_callee
249   0000              	GLOBAL _aligned_alloc_unlocked
250   0000              	GLOBAL _realloc_callee
251   0000              	GLOBAL _realloc
252   0000              	GLOBAL _malloc_fastcall
253   0000              	GLOBAL _malloc
254   0000              	GLOBAL _free_fastcall
255   0000              	GLOBAL _free
256   0000              	GLOBAL _calloc_callee
257   0000              	GLOBAL _calloc
258   0000              	GLOBAL _aligned_alloc_callee
259   0000              	GLOBAL _aligned_alloc
260   0000              	GLOBAL _utoa_callee
261   0000              	GLOBAL _utoa
262   0000              	GLOBAL _ultoa_callee
263   0000              	GLOBAL _ultoa
264   0000              	GLOBAL _system_fastcall
265   0000              	GLOBAL _system
266   0000              	GLOBAL _strtoul_callee
267   0000              	GLOBAL _strtoul
268   0000              	GLOBAL _strtol_callee
269   0000              	GLOBAL _strtol
270   0000              	GLOBAL _strtof_callee
271   0000              	GLOBAL _strtof
272   0000              	GLOBAL _strtod_callee
273   0000              	GLOBAL _strtod
274   0000              	GLOBAL _srand_fastcall
275   0000              	GLOBAL _srand
276   0000              	GLOBAL _rand
277   0000              	GLOBAL _quick_exit_fastcall
278   0000              	GLOBAL _quick_exit
279   0000              	GLOBAL _qsort_callee
280   0000              	GLOBAL _qsort
281   0000              	GLOBAL _ltoa_callee
282   0000              	GLOBAL _ltoa
283   0000              	GLOBAL _labs_fastcall
284   0000              	GLOBAL _labs
285   0000              	GLOBAL _itoa_callee
286   0000              	GLOBAL _itoa
287   0000              	GLOBAL _ftoh_callee
288   0000              	GLOBAL _ftoh
289   0000              	GLOBAL _ftog_callee
290   0000              	GLOBAL _ftog
291   0000              	GLOBAL _ftoe_callee
292   0000              	GLOBAL _ftoe
293   0000              	GLOBAL _ftoa_callee
294   0000              	GLOBAL _ftoa
295   0000              	GLOBAL _exit_fastcall
296   0000              	GLOBAL _exit
297   0000              	GLOBAL _dtoh_callee
298   0000              	GLOBAL _dtoh
299   0000              	GLOBAL _dtog_callee
300   0000              	GLOBAL _dtog
301   0000              	GLOBAL _dtoe_callee
302   0000              	GLOBAL _dtoe
303   0000              	GLOBAL _dtoa_callee
304   0000              	GLOBAL _dtoa
305   0000              	GLOBAL _bsearch_callee
306   0000              	GLOBAL _bsearch
307   0000              	GLOBAL _atol_fastcall
308   0000              	GLOBAL _atol
309   0000              	GLOBAL _atoi_fastcall
310   0000              	GLOBAL _atoi
311   0000              	GLOBAL _atof_fastcall
312   0000              	GLOBAL _atof
313   0000              	GLOBAL _atexit_fastcall
314   0000              	GLOBAL _atexit
315   0000              	GLOBAL _at_quick_exit_fastcall
316   0000              	GLOBAL _at_quick_exit
317   0000              	GLOBAL _abs_fastcall
318   0000              	GLOBAL _abs
319   0000              	GLOBAL _abort
320   0000              	GLOBAL __strtou__callee
321   0000              	GLOBAL __strtou_
322   0000              	GLOBAL __strtoi__callee
323   0000              	GLOBAL __strtoi_
324   0000              	GLOBAL __random_uniform_xor_8__fastcall
325   0000              	GLOBAL __random_uniform_xor_8_
326   0000              	GLOBAL __random_uniform_xor_32__fastcall
327   0000              	GLOBAL __random_uniform_xor_32_
328   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
329   0000              	GLOBAL __random_uniform_cmwc_8_
330   0000              	GLOBAL __shellsort__callee
331   0000              	GLOBAL __shellsort_
332   0000              	GLOBAL __quicksort__callee
333   0000              	GLOBAL __quicksort_
334   0000              	GLOBAL __insertion_sort__callee
335   0000              	GLOBAL __insertion_sort_
336   0000              	GLOBAL __ldivu__callee
337   0000              	GLOBAL __ldivu_
338   0000              	GLOBAL __ldiv__callee
339   0000              	GLOBAL __ldiv_
340   0000              	GLOBAL __divu__callee
341   0000              	GLOBAL __divu_
342   0000              	GLOBAL __div__callee
343   0000              	GLOBAL __div_
344   0000              	GLOBAL _NIRVANAP_drawTW_raw_callee
345   0000              	GLOBAL _NIRVANAP_drawTW_raw
346   0000              	GLOBAL _NIRVANAP_drawTW_callee
347   0000              	GLOBAL _NIRVANAP_drawTW
348   0000              	GLOBAL _NIRVANAP_drawW_raw_callee
349   0000              	GLOBAL _NIRVANAP_drawW_raw
350   0000              	GLOBAL _NIRVANAP_drawW_callee
351   0000              	GLOBAL _NIRVANAP_drawW
352   0000              	GLOBAL _NIRVANAP_spriteT_callee
353   0000              	GLOBAL _NIRVANAP_spriteT
354   0000              	GLOBAL _NIRVANAP_fillC_callee
355   0000              	GLOBAL _NIRVANAP_fillC
356   0000              	GLOBAL _NIRVANAP_readC_callee
357   0000              	GLOBAL _NIRVANAP_readC
358   0000              	GLOBAL _NIRVANAP_paintC_callee
359   0000              	GLOBAL _NIRVANAP_paintC
360   0000              	GLOBAL _NIRVANAP_printC_callee
361   0000              	GLOBAL _NIRVANAP_printC
362   0000              	GLOBAL _NIRVANAP_fillT_raw_callee
363   0000              	GLOBAL _NIRVANAP_fillT_raw
364   0000              	GLOBAL _NIRVANAP_fillT_callee
365   0000              	GLOBAL _NIRVANAP_fillT
366   0000              	GLOBAL _NIRVANAP_drawT_raw_callee
367   0000              	GLOBAL _NIRVANAP_drawT_raw
368   0000              	GLOBAL _NIRVANAP_drawT_callee
369   0000              	GLOBAL _NIRVANAP_drawT
370   0000              	GLOBAL _NIRVANAP_stop
371   0000              	GLOBAL _NIRVANAP_start
372   0000              	GLOBAL _debug3
373   0000              	GLOBAL _debug2
374   0000              	GLOBAL _debug
375   0000              	GLOBAL _zx_print_str
376   0000              	GLOBAL _zx_print_int
377   0000              	GLOBAL _zx_print_chr
378   0000              	GLOBAL _zx_print_bonus_time
379   0000              	GLOBAL _zx_isr
380   0000              	GLOBAL _z80_otdr_callee
381   0000              	GLOBAL _z80_otdr
382   0000              	GLOBAL _z80_otir_callee
383   0000              	GLOBAL _z80_otir
384   0000              	GLOBAL _z80_outp_callee
385   0000              	GLOBAL _z80_outp
386   0000              	GLOBAL _z80_indr_callee
387   0000              	GLOBAL _z80_indr
388   0000              	GLOBAL _z80_inir_callee
389   0000              	GLOBAL _z80_inir
390   0000              	GLOBAL _z80_inp_fastcall
391   0000              	GLOBAL _z80_inp
392   0000              	GLOBAL _z80_set_int_state_fastcall
393   0000              	GLOBAL _z80_set_int_state
394   0000              	GLOBAL _z80_get_int_state
395   0000              	GLOBAL _z80_delay_tstate_fastcall
396   0000              	GLOBAL _z80_delay_tstate
397   0000              	GLOBAL _z80_delay_ms_fastcall
398   0000              	GLOBAL _z80_delay_ms
399   0000              	GLOBAL _im2_remove_generic_callback_callee
400   0000              	GLOBAL _im2_remove_generic_callback
401   0000              	GLOBAL _im2_prepend_generic_callback_callee
402   0000              	GLOBAL _im2_prepend_generic_callback
403   0000              	GLOBAL _im2_append_generic_callback_callee
404   0000              	GLOBAL _im2_append_generic_callback
405   0000              	GLOBAL _im2_create_generic_isr_8080_callee
406   0000              	GLOBAL _im2_create_generic_isr_8080
407   0000              	GLOBAL _im2_create_generic_isr_callee
408   0000              	GLOBAL _im2_create_generic_isr
409   0000              	GLOBAL _im2_install_isr_callee
410   0000              	GLOBAL _im2_install_isr
411   0000              	GLOBAL _im2_init_fastcall
412   0000              	GLOBAL _im2_init
413   0000              	GLOBAL _intrinsic_swap_word_32_fastcall
414   0000              	GLOBAL _intrinsic_swap_word_32
415   0000              	GLOBAL _intrinsic_swap_endian_32_fastcall
416   0000              	GLOBAL _intrinsic_swap_endian_32
417   0000              	GLOBAL _intrinsic_swap_endian_16_fastcall
418   0000              	GLOBAL _intrinsic_swap_endian_16
419   0000              	GLOBAL _intrinsic_return_de
420   0000              	GLOBAL _intrinsic_return_bc
421   0000              	GLOBAL _intrinsic_exx
422   0000              	GLOBAL _intrinsic_ex_de_hl
423   0000              	GLOBAL _intrinsic_nop
424   0000              	GLOBAL _intrinsic_im_2
425   0000              	GLOBAL _intrinsic_im_1
426   0000              	GLOBAL _intrinsic_im_0
427   0000              	GLOBAL _intrinsic_retn
428   0000              	GLOBAL _intrinsic_reti
429   0000              	GLOBAL _intrinsic_halt
430   0000              	GLOBAL _intrinsic_ei
431   0000              	GLOBAL _intrinsic_di
432   0000              	GLOBAL _intrinsic_stub
433   0000              	GLOBAL _intrinsic_outi
434   0000              	GLOBAL _intrinsic_ldi
435   0000              	GLOBAL _zx_pattern_fill_callee
436   0000              	GLOBAL _zx_pattern_fill
437   0000              	GLOBAL _zx_saddrpup_fastcall
438   0000              	GLOBAL _zx_saddrpup
439   0000              	GLOBAL _zx_saddrpright_callee
440   0000              	GLOBAL _zx_saddrpright
441   0000              	GLOBAL _zx_saddrpleft_callee
442   0000              	GLOBAL _zx_saddrpleft
443   0000              	GLOBAL _zx_saddrpdown_fastcall
444   0000              	GLOBAL _zx_saddrpdown
445   0000              	GLOBAL _zx_saddrcup_fastcall
446   0000              	GLOBAL _zx_saddrcup
447   0000              	GLOBAL _zx_saddrcright_fastcall
448   0000              	GLOBAL _zx_saddrcright
449   0000              	GLOBAL _zx_saddrcleft_fastcall
450   0000              	GLOBAL _zx_saddrcleft
451   0000              	GLOBAL _zx_saddrcdown_fastcall
452   0000              	GLOBAL _zx_saddrcdown
453   0000              	GLOBAL _zx_saddr2py_fastcall
454   0000              	GLOBAL _zx_saddr2py
455   0000              	GLOBAL _zx_saddr2px_fastcall
456   0000              	GLOBAL _zx_saddr2px
457   0000              	GLOBAL _zx_saddr2cy_fastcall
458   0000              	GLOBAL _zx_saddr2cy
459   0000              	GLOBAL _zx_saddr2cx_fastcall
460   0000              	GLOBAL _zx_saddr2cx
461   0000              	GLOBAL _zx_saddr2aaddr_fastcall
462   0000              	GLOBAL _zx_saddr2aaddr
463   0000              	GLOBAL _zx_py2saddr_fastcall
464   0000              	GLOBAL _zx_py2saddr
465   0000              	GLOBAL _zx_py2aaddr_fastcall
466   0000              	GLOBAL _zx_py2aaddr
467   0000              	GLOBAL _zx_pxy2saddr_callee
468   0000              	GLOBAL _zx_pxy2saddr
469   0000              	GLOBAL _zx_pxy2aaddr_callee
470   0000              	GLOBAL _zx_pxy2aaddr
471   0000              	GLOBAL _zx_px2bitmask_fastcall
472   0000              	GLOBAL _zx_px2bitmask
473   0000              	GLOBAL _zx_cy2saddr_fastcall
474   0000              	GLOBAL _zx_cy2saddr
475   0000              	GLOBAL _zx_cy2aaddr_fastcall
476   0000              	GLOBAL _zx_cy2aaddr
477   0000              	GLOBAL _zx_cxy2saddr_callee
478   0000              	GLOBAL _zx_cxy2saddr
479   0000              	GLOBAL _zx_cxy2aaddr_callee
480   0000              	GLOBAL _zx_cxy2aaddr
481   0000              	GLOBAL _zx_bitmask2px_fastcall
482   0000              	GLOBAL _zx_bitmask2px
483   0000              	GLOBAL _zx_aaddrcup_fastcall
484   0000              	GLOBAL _zx_aaddrcup
485   0000              	GLOBAL _zx_aaddrcright_fastcall
486   0000              	GLOBAL _zx_aaddrcright
487   0000              	GLOBAL _zx_aaddrcleft_fastcall
488   0000              	GLOBAL _zx_aaddrcleft
489   0000              	GLOBAL _zx_aaddrcdown_fastcall
490   0000              	GLOBAL _zx_aaddrcdown
491   0000              	GLOBAL _zx_aaddr2saddr_fastcall
492   0000              	GLOBAL _zx_aaddr2saddr
493   0000              	GLOBAL _zx_aaddr2py_fastcall
494   0000              	GLOBAL _zx_aaddr2py
495   0000              	GLOBAL _zx_aaddr2px_fastcall
496   0000              	GLOBAL _zx_aaddr2px
497   0000              	GLOBAL _zx_aaddr2cy_fastcall
498   0000              	GLOBAL _zx_aaddr2cy
499   0000              	GLOBAL _zx_aaddr2cx_fastcall
500   0000              	GLOBAL _zx_aaddr2cx
501   0000              	GLOBAL _zx_visit_wc_pix_callee
502   0000              	GLOBAL _zx_visit_wc_pix
503   0000              	GLOBAL _zx_visit_wc_attr_callee
504   0000              	GLOBAL _zx_visit_wc_attr
505   0000              	GLOBAL _zx_scroll_wc_up_pix_callee
506   0000              	GLOBAL _zx_scroll_wc_up_pix
507   0000              	GLOBAL _zx_scroll_wc_up_attr_callee
508   0000              	GLOBAL _zx_scroll_wc_up_attr
509   0000              	GLOBAL _zx_scroll_wc_up_callee
510   0000              	GLOBAL _zx_scroll_wc_up
511   0000              	GLOBAL _zx_scroll_up_pix_callee
512   0000              	GLOBAL _zx_scroll_up_pix
513   0000              	GLOBAL _zx_scroll_up_attr_callee
514   0000              	GLOBAL _zx_scroll_up_attr
515   0000              	GLOBAL _zx_scroll_up_callee
516   0000              	GLOBAL _zx_scroll_up
517   0000              	GLOBAL _zx_cls_wc_pix_callee
518   0000              	GLOBAL _zx_cls_wc_pix
519   0000              	GLOBAL _zx_cls_wc_attr_callee
520   0000              	GLOBAL _zx_cls_wc_attr
521   0000              	GLOBAL _zx_cls_wc_callee
522   0000              	GLOBAL _zx_cls_wc
523   0000              	GLOBAL _zx_cls_pix_fastcall
524   0000              	GLOBAL _zx_cls_pix
525   0000              	GLOBAL _zx_cls_attr_fastcall
526   0000              	GLOBAL _zx_cls_attr
527   0000              	GLOBAL _zx_cls_fastcall
528   0000              	GLOBAL _zx_cls
529   0000              	GLOBAL _zx_border_fastcall
530   0000              	GLOBAL _zx_border
531   0000              	GLOBAL _spr_anim_kill
532   0000              	GLOBAL _sound_hit_brick
533   0000              	GLOBAL _sound_hit_enemy
534   0000              	GLOBAL _sound_kill
535   0000              	GLOBAL _sound_enter_enemy
536   0000              	GLOBAL _sound_coin
537   0000              	GLOBAL _sound_jump
538   0000              	GLOBAL _sound_slide
539   0000              	GLOBAL _player_check_stairs_down
540   0000              	GLOBAL _player_check_stairs
541   0000              	GLOBAL _player_tile
542   0000              	GLOBAL _player_pick_item
543   0000              	GLOBAL _player_check_floor
544   0000              	GLOBAL _player_hit_platform_clear
545   0000              	GLOBAL _player_lost_life
546   0000              	GLOBAL _player_score_add
547   0000              	GLOBAL _player_player_hit_pow
548   0000              	GLOBAL _player_hit_platform
549   0000              	GLOBAL _player_move_input
550   0000              	GLOBAL _player_turn
551   0000              	GLOBAL _player_move
552   0000              	GLOBAL _player_restart
553   0000              	GLOBAL _player_kill
554   0000              	GLOBAL _player_check_input
555   0000              	GLOBAL _player_collision
556   0000              	GLOBAL _player_init
557   0000              	GLOBAL _game_joystick_set_menu
558   0000              	GLOBAL _game_joystick_set
559   0000              	GLOBAL _game_joystick_change
560   0000              	GLOBAL _game_print_header
561   0000              	GLOBAL _game_end
562   0000              	GLOBAL _game_phase_print_score_back
563   0000              	GLOBAL _game_check_time
564   0000              	GLOBAL _game_rotate_attrib
565   0000              	GLOBAL _game_colour_message
566   0000              	GLOBAL _game_paint_attrib_lin_h
567   0000              	GLOBAL _game_paint_attrib_lin
568   0000              	GLOBAL _game_paint_attrib
569   0000              	GLOBAL _game_print_score
570   0000              	GLOBAL _game_unfreeze_all
571   0000              	GLOBAL _game_freeze_all
572   0000              	GLOBAL _game_freeze
573   0000              	GLOBAL _game_enemy_add_get_index
574   0000              	GLOBAL _game_check_maze_floor
575   0000              	GLOBAL _game_check_maze
576   0000              	GLOBAL _game_loop
577   0000              	GLOBAL _game_phase_init
578   0000              	GLOBAL _game_start_timer
579   0000              	GLOBAL _game_tick
580   0000              	GLOBAL _game_print_lives
581   0000              	GLOBAL _game_print_footer
582   0000              	GLOBAL _game_fill_row
583   0000              	GLOBAL _enemy_avoid_edge
584   0000              	GLOBAL _enemy_kill
585   0000              	GLOBAL _enemy_init
586   0000              	GLOBAL _enemy_walk
587   0000              	GLOBAL _enemy_move
588   0000              	GLOBAL _enemy_turn
589   0000              	GLOBAL _enemy_hit
590   0000              	GLOBAL _enemy_coin1
591   0000              	GLOBAL _ay_fx_play
592   0000              	GLOBAL _ay_midi_play
593   0000              	GLOBAL _ay_is_playing
594   0000              	GLOBAL _ay_reset
595   0000              	GLOBAL _test_func
596   0000              	GLOBAL _test_proc
597   0000              	GLOBAL _in_mouse_kempston_wheel_delta
598   0000              	GLOBAL _in_mouse_kempston_wheel
599   0000              	GLOBAL _in_mouse_kempston_callee
600   0000              	GLOBAL _in_mouse_kempston
601   0000              	GLOBAL _in_mouse_kempston_setpos_callee
602   0000              	GLOBAL _in_mouse_kempston_setpos
603   0000              	GLOBAL _in_mouse_kempston_reset
604   0000              	GLOBAL _in_mouse_kempston_init
605   0000              	GLOBAL _in_mouse_amx_wheel_delta
606   0000              	GLOBAL _in_mouse_amx_wheel
607   0000              	GLOBAL _in_mouse_amx_callee
608   0000              	GLOBAL _in_mouse_amx
609   0000              	GLOBAL _in_mouse_amx_setpos_callee
610   0000              	GLOBAL _in_mouse_amx_setpos
611   0000              	GLOBAL _in_mouse_amx_reset
612   0000              	GLOBAL _in_mouse_amx_init_callee
613   0000              	GLOBAL _in_mouse_amx_init
614   0000              	GLOBAL _in_stick_sinclair2
615   0000              	GLOBAL _in_stick_sinclair1
616   0000              	GLOBAL _in_stick_kempston
617   0000              	GLOBAL _in_stick_fuller
618   0000              	GLOBAL _in_stick_cursor
619   0000              	GLOBAL _in_stick_keyboard_fastcall
620   0000              	GLOBAL _in_stick_keyboard
621   0000              	GLOBAL _in_wait_nokey
622   0000              	GLOBAL _in_wait_key
623   0000              	GLOBAL _in_test_key
624   0000              	GLOBAL _in_pause_fastcall
625   0000              	GLOBAL _in_pause
626   0000              	GLOBAL _in_key_scancode_fastcall
627   0000              	GLOBAL _in_key_scancode
628   0000              	GLOBAL _in_key_pressed_fastcall
629   0000              	GLOBAL _in_key_pressed
630   0000              	GLOBAL _in_inkey
631   0000              	GLOBAL _NIRVANAP_CHAR_TABLE
632   0000              	GLOBAL _NIRVANAP_WIDE_IMAGES
633   0000              	GLOBAL _NIRVANAP_TILE_IMAGES
634   0000              	GLOBAL _NIRVANAP_HOLE
635   0000              	GLOBAL _NIRVANAP_ISR_HOOK
636   0000              	GLOBAL _g_player_hit_right
637   0000              	GLOBAL _g_player_hit_left
638   0000              	GLOBAL _joynames
639   0000              	GLOBAL _initials
640   0000              	GLOBAL _bullet_frames
641   0000              	GLOBAL _bullet_colint
642   0000              	GLOBAL _bullet_dir
643   0000              	GLOBAL _bullet_tile
644   0000              	GLOBAL _bullet_col
645   0000              	GLOBAL _bullet_lin
646   0000              	GLOBAL _anim_end
647   0000              	GLOBAL _anim_int
648   0000              	GLOBAL _anim_tile
649   0000              	GLOBAL _anim_col
650   0000              	GLOBAL _anim_lin
651   0000              	GLOBAL _phase_angry
652   0000              	GLOBAL _phase_curr
653   0000              	GLOBAL _phase_end
654   0000              	GLOBAL _phase_coins
655   0000              	GLOBAL _phase_pop
656   0000              	GLOBAL _phase_tot
657   0000              	GLOBAL _map_heigth
658   0000              	GLOBAL _map_width
659   0000              	GLOBAL _scr_curr
660   0000              	GLOBAL _scr_7
661   0000              	GLOBAL _scr_6
662   0000              	GLOBAL _scr_5
663   0000              	GLOBAL _scr_4
664   0000              	GLOBAL _scr_3
665   0000              	GLOBAL _scr_2
666   0000              	GLOBAL _scr_1
667   0000              	GLOBAL _scr_0
668   0000              	GLOBAL _scr_map
669   0000              	GLOBAL _sprite_speed_alt
670   0000              	GLOBAL _sprite_frames
671   0000              	GLOBAL _sprite_speed
672   0000              	GLOBAL _screen_ink
673   0000              	GLOBAL _screen_paper
674   0000              	GLOBAL _player_over_stair
675   0000              	GLOBAL _game_menu_sel
676   0000              	GLOBAL _game_type
677   0000              	GLOBAL _game_score_top
678   0000              	GLOBAL _player_lives
679   0000              	GLOBAL _game_over
680   0000              	GLOBAL _game_sound
681   0000              	GLOBAL _game_inmune
682   0000              	GLOBAL _game_god_mode
683   0000              	GLOBAL _game_start_phase
684   0000              	GLOBAL _game_two_player
685   0000              	GLOBAL _game_brick_tile
686   0000              	GLOBAL _sprite_curr_index
687   0000              	GLOBAL _spr_count
688   0000              	GLOBAL _bullet_time
689   0000              	GLOBAL _anim_time
690   0000              	GLOBAL _frame_time
691   0000              	GLOBAL _entry_time
692   0000              	GLOBAL _curr_time
693   0000              	GLOBAL _s_state
694   0000              	GLOBAL _attrib_hl
695   0000              	GLOBAL _attrib
696   0000              	GLOBAL _zx_val_asm
697   0000              	GLOBAL _enemies
698   0000              	GLOBAL _tmp_ui
699   0000              	GLOBAL _tmp_sc
700   0000              	GLOBAL _tmp_uc
701   0000              	GLOBAL _tmp1
702   0000              	GLOBAL _tmp0
703   0000              	GLOBAL _tmp
704   0000              	GLOBAL _index1
705   0000              	GLOBAL _index0
706   0000              	GLOBAL _loop_count
707   0000              	GLOBAL _sprite_lin_inc_mul
708   0000              	GLOBAL _s_col1
709   0000              	GLOBAL _s_col0
710   0000              	GLOBAL _s_lin1
711   0000              	GLOBAL _s_lin0
712   0000              	GLOBAL _s_tile1
713   0000              	GLOBAL _s_tile0
714   0000              	GLOBAL _player_hit_count
715   0000              	GLOBAL _sprite
716   0000              	GLOBAL _game_gravity
717   0000              	GLOBAL _player_vel_y0
718   0000              	GLOBAL _player_vel_y
719   0000              	GLOBAL _player_vel_x
720   0000              	GLOBAL _player_joy
721   0000              	GLOBAL _player_score
722   0000              	GLOBAL _last_time
723   0000              	GLOBAL _player_slide
724   0000              	GLOBAL _spr_timer
725   0000              	GLOBAL _jump_lin
726   0000              	GLOBAL _player_hit_col
727   0000              	GLOBAL _player_hit_lin
728   0000              	GLOBAL _colint
729   0000              	GLOBAL _col
730   0000              	GLOBAL _lin
731   0000              	GLOBAL _tile
732   0000              	GLOBAL _state_a
733   0000              	GLOBAL _state
734   0000              	GLOBAL _class
735   0000              	GLOBAL _tbuffer
736   0000              	GLOBAL _dirs
737   0000              	GLOBAL _k1
738   0000              	GLOBAL _joyfunc1
739   0000              	GLOBAL _btiles
740   0000              	GLOBAL _spec128
741   0000              	GLOBAL _GLOBAL_ZX_PORT_7FFD
742   0000              	GLOBAL _GLOBAL_ZX_PORT_1FFD
743   0000              	GLOBAL _GLOBAL_ZX_PORT_FE
744   0000              	GLOBAL _ay_effect_20
745   0000              	GLOBAL _ay_effect_19
746   0000              	GLOBAL _ay_effect_18
747   0000              	GLOBAL _ay_effect_17
748   0000              	GLOBAL _ay_effect_16
749   0000              	GLOBAL _ay_effect_15
750   0000              	GLOBAL _ay_effect_14
751   0000              	GLOBAL _ay_effect_13
752   0000              	GLOBAL _ay_effect_12
753   0000              	GLOBAL _ay_effect_11
754   0000              	GLOBAL _ay_effect_10
755   0000              	GLOBAL _ay_effect_09
756   0000              	GLOBAL _ay_effect_08
757   0000              	GLOBAL _ay_effect_07
758   0000              	GLOBAL _ay_effect_06
759   0000              	GLOBAL _ay_effect_05
760   0000              	GLOBAL _ay_effect_04
761   0000              	GLOBAL _ay_effect_03
762   0000              	GLOBAL _ay_effect_02
763   0000              	GLOBAL _ay_effect_01
764   0000              	GLOBAL _pb_midi_phase_1
765   0000              	GLOBAL _pb_midi_title
766   0000              	GLOBAL _control_method
767   0000              ;--------------------------------------------------------
768   0000              ; special function registers
769   0000              ;--------------------------------------------------------
770   0000              defc _IO_FE	=	0x00fe
771   0000              defc _IO_1FFD	=	0x1ffd
772   0000              defc _IO_7FFD	=	0x7ffd
773   0000              ;--------------------------------------------------------
774   0000              ; ram data
775   0000              ;--------------------------------------------------------
776   0000              	SECTION bss_compiler
777   0000              ;--------------------------------------------------------
778   0000              ; ram data
779   0000              ;--------------------------------------------------------
780   0000              
781   0000              IF 0
782   0000              
783   0000              ; .area _INITIALIZED removed by z88dk
784   0000              
785   0000              
786   0000              ENDIF
787   0000              
788   0000              ;--------------------------------------------------------
789   0000              ; absolute external ram data
790   0000              ;--------------------------------------------------------
791   0000              	SECTION IGNORE
792   0000              ;--------------------------------------------------------
793   0000              ; global & static initialisations
794   0000              ;--------------------------------------------------------
795   0000              	SECTION code_crt_init
796   0000              ;--------------------------------------------------------
797   0000              ; Home
798   0000              ;--------------------------------------------------------
799   0000              	SECTION IGNORE
800   0000              ;--------------------------------------------------------
801   0000              ; code
802   0000              ;--------------------------------------------------------
803   0000              	SECTION code_compiler
804   0000              ;	---------------------------------
805   0000              ; Function spr_calc_index
806   0000              ; ---------------------------------
807   0000              _spr_calc_index:
808   0000  CD 00 00    	call	___sdcc_enter_ix
809   0003  DD 4E 05    	ld	c,(ix+5)
810   0006  CB 39       	srl	c
811   0008  06 00       	ld	b,0x00
812   000A  DD 7E 04    	ld	a,(ix+4)
813   000D  07          	rlca
814   000E  07          	rlca
815   000F  07          	rlca
816   0010  07          	rlca
817   0011  E6 0F       	and	a,0x0f
818   0013  6F          	ld	l, a
819   0014  26 00       	ld	h,0x00
820   0016  29          	add	hl, hl
821   0017  29          	add	hl, hl
822   0018  29          	add	hl, hl
823   0019  29          	add	hl, hl
824   001A  09          	add	hl, bc
825   001B  DD E1       	pop	ix
826   001D  C9          	ret
827   001E              	SECTION code_compiler
828   001E              ;	---------------------------------
829   001E              ; Function spr_check_map
830   001E              ; ---------------------------------
831   001E              _spr_check_map:
832   001E  CD 00 00    	call	___sdcc_enter_ix
833   0021  DD CB 05 46 	bit	0,(ix+5)
834   0025  20 15       	jr	NZ,l_spr_check_map_00106
835   0027  DD 66 05    	ld	h,(ix+5)
836   002A  DD 6E 04    	ld	l,(ix+4)
837   002D  E5          	push	hl
838   002E  CD 00 00    	call	_spr_calc_index
839   0031  F1          	pop	af
840   0032  22 00 00    	ld	(_index1),hl
841   0035  CD 00 00    	call	_game_check_maze
842   0038  26 00       	ld	h,0x00
843   003A  18 4B       	jr	l_spr_check_map_00108
844   003C              l_spr_check_map_00106:
845   003C  DD 46 05    	ld	b,(ix+5)
846   003F  05          	dec	b
847   0040  DD 4E 04    	ld	c,(ix+4)
848   0043  C5          	push	bc
849   0044  CD 00 00    	call	_spr_calc_index
850   0047  F1          	pop	af
851   0048  22 00 00    	ld	(_index1),hl
852   004B  21 00 00    	ld	hl,_g_player_hit_left
853   004E  36 00       	ld	(hl),0x00
854   0050  21 00 00    	ld	hl,_g_player_hit_right
855   0053  36 00       	ld	(hl),0x00
856   0055  2A 00 00    	ld	hl,(_index1)
857   0058  CD 00 00    	call	_game_check_maze
858   005B  7D          	ld	a, l
859   005C  B7          	or	a, a
860   005D  28 05       	jr	Z,l_spr_check_map_00102
861   005F  21 00 00    	ld	hl,_g_player_hit_left
862   0062  36 01       	ld	(hl),0x01
863   0064              l_spr_check_map_00102:
864   0064  2A 00 00    	ld	hl,(_index1)
865   0067  23          	inc	hl
866   0068  CD 00 00    	call	_game_check_maze
867   006B  7D          	ld	a, l
868   006C  B7          	or	a, a
869   006D  28 05       	jr	Z,l_spr_check_map_00104
870   006F  21 00 00    	ld	hl,_g_player_hit_right
871   0072  36 01       	ld	(hl),0x01
872   0074              l_spr_check_map_00104:
873   0074  3A 00 00    	ld	a,(_g_player_hit_left)
874   0077  B7          	or	a, a
875   0078  20 09       	jr	NZ,l_spr_check_map_00111
876   007A  3A 00 00    	ld	a,(_g_player_hit_right)
877   007D  B7          	or	a,a
878   007E  20 03       	jr	NZ,l_spr_check_map_00111
879   0080  6F          	ld	l,a
880   0081  18 02       	jr	l_spr_check_map_00112
881   0083              l_spr_check_map_00111:
882   0083  2E 01       	ld	l,0x01
883   0085              l_spr_check_map_00112:
884   0085  26 00       	ld	h,0x00
885   0087              l_spr_check_map_00108:
886   0087  DD E1       	pop	ix
887   0089  C9          	ret
888   008A              	SECTION code_compiler
889   008A              ;	---------------------------------
890   008A              ; Function spr_check_map_fall
891   008A              ; ---------------------------------
892   008A              _spr_check_map_fall:
893   008A  CD 00 00    	call	___sdcc_enter_ix
894   008D  DD CB 05 46 	bit	0,(ix+5)
895   0091  20 15       	jr	NZ,l_spr_check_map_fall_00106
896   0093  DD 66 05    	ld	h,(ix+5)
897   0096  DD 6E 04    	ld	l,(ix+4)
898   0099  E5          	push	hl
899   009A  CD 00 00    	call	_spr_calc_index
900   009D  F1          	pop	af
901   009E  22 00 00    	ld	(_index1),hl
902   00A1  CD 00 00    	call	_game_check_maze_floor
903   00A4  26 00       	ld	h,0x00
904   00A6  18 4B       	jr	l_spr_check_map_fall_00108
905   00A8              l_spr_check_map_fall_00106:
906   00A8  DD 46 05    	ld	b,(ix+5)
907   00AB  05          	dec	b
908   00AC  DD 4E 04    	ld	c,(ix+4)
909   00AF  C5          	push	bc
910   00B0  CD 00 00    	call	_spr_calc_index
911   00B3  F1          	pop	af
912   00B4  22 00 00    	ld	(_index1),hl
913   00B7  21 00 00    	ld	hl,_g_player_hit_left
914   00BA  36 00       	ld	(hl),0x00
915   00BC  21 00 00    	ld	hl,_g_player_hit_right
916   00BF  36 00       	ld	(hl),0x00
917   00C1  2A 00 00    	ld	hl,(_index1)
918   00C4  CD 00 00    	call	_game_check_maze_floor
919   00C7  7D          	ld	a, l
920   00C8  B7          	or	a, a
921   00C9  28 05       	jr	Z,l_spr_check_map_fall_00102
922   00CB  21 00 00    	ld	hl,_g_player_hit_left
923   00CE  36 01       	ld	(hl),0x01
924   00D0              l_spr_check_map_fall_00102:
925   00D0  2A 00 00    	ld	hl,(_index1)
926   00D3  23          	inc	hl
927   00D4  CD 00 00    	call	_game_check_maze_floor
928   00D7  7D          	ld	a, l
929   00D8  B7          	or	a, a
930   00D9  28 05       	jr	Z,l_spr_check_map_fall_00104
931   00DB  21 00 00    	ld	hl,_g_player_hit_right
932   00DE  36 01       	ld	(hl),0x01
933   00E0              l_spr_check_map_fall_00104:
934   00E0  3A 00 00    	ld	a,(_g_player_hit_left)
935   00E3  B7          	or	a, a
936   00E4  20 09       	jr	NZ,l_spr_check_map_fall_00111
937   00E6  3A 00 00    	ld	a,(_g_player_hit_right)
938   00E9  B7          	or	a,a
939   00EA  20 03       	jr	NZ,l_spr_check_map_fall_00111
940   00EC  6F          	ld	l,a
941   00ED  18 02       	jr	l_spr_check_map_fall_00112
942   00EF              l_spr_check_map_fall_00111:
943   00EF  2E 01       	ld	l,0x01
944   00F1              l_spr_check_map_fall_00112:
945   00F1  26 00       	ld	h,0x00
946   00F3              l_spr_check_map_fall_00108:
947   00F3  DD E1       	pop	ix
948   00F5  C9          	ret
949   00F6              	SECTION code_compiler
950   00F6              ;	---------------------------------
951   00F6              ; Function spr_chktime
952   00F6              ; ---------------------------------
953   00F6              _spr_chktime:
954   00F6  CD 00 00    	call	___sdcc_enter_ix
955   00F9  F5          	push	af
956   00FA  DD 75 FE    	ld	(ix-2),l
957   00FD  DD 74 FF    	ld	(ix-1),h
958   0100  E1          	pop	hl
959   0101  01 00 00    	ld	bc,_sprite_speed_alt+0
960   0104  5E          	ld	e,(hl)
961   0105  E5          	push	hl
962   0106  6B          	ld	l,e
963   0107  26 00       	ld	h,0x00
964   0109  09          	add	hl, bc
965   010A  7E          	ld	a, (hl)
966   010B  B7          	or	a, a
967   010C  20 13       	jr	NZ,l_spr_chktime_00102
968   010E  01 00 00    	ld	bc,_sprite_speed+0
969   0111  16 00       	ld	d,0x00
970   0113  21 00 00    	ld	hl,_class
971   0116  19          	add	hl, de
972   0117  6E          	ld	l, (hl)
973   0118  26 00       	ld	h,0x00
974   011A  09          	add	hl, bc
975   011B  7E          	ld	a, (hl)
976   011C  32 00 00    	ld	(_tmp),a
977   011F  18 03       	jr	l_spr_chktime_00103
978   0121              l_spr_chktime_00102:
979   0121  32 00 00    	ld	(_tmp),a
980   0124              l_spr_chktime_00103:
981   0124  3A 00 00    	ld	a,(_tmp)
982   0127  4F          	ld	c,a
983   0128  06 00       	ld	b,0x00
984   012A  60          	ld	h,b
985   012B  6B          	ld	l, e
986   012C  29          	add	hl, hl
987   012D  11 00 00    	ld	de,_last_time
988   0130  19          	add	hl, de
989   0131  5E          	ld	e, (hl)
990   0132  23          	inc	hl
991   0133  56          	ld	d, (hl)
992   0134  C5          	push	bc
993   0135  D5          	push	de
994   0136  CD 00 00    	call	_game_check_time
995   0139  F1          	pop	af
996   013A  F1          	pop	af
997   013B  7D          	ld	a, l
998   013C  B7          	or	a, a
999   013D  28 15       	jr	Z,l_spr_chktime_00105
1000  013F  E1          	pop	hl
1001  0140  E5          	push	hl
1002  0141  6E          	ld	l, (hl)
1003  0142  26 00       	ld	h,0x00
1004  0144  29          	add	hl, hl
1005  0145  01 00 00    	ld	bc,_last_time
1006  0148  09          	add	hl,bc
1007  0149  ED 5B 00 00 	ld	de,(_curr_time)
1008  014D  73          	ld	(hl),e
1009  014E  23          	inc	hl
1010  014F  72          	ld	(hl),d
1011  0150  2E 01       	ld	l,0x01
1012  0152  18 02       	jr	l_spr_chktime_00106
1013  0154              l_spr_chktime_00105:
1014  0154  2E 00       	ld	l,0x00
1015  0156              l_spr_chktime_00106:
1016  0156  F1          	pop	af
1017  0157  DD E1       	pop	ix
1018  0159  C9          	ret
1019  015A              	SECTION code_compiler
1020  015A              ;	---------------------------------
1021  015A              ; Function spr_move_jump
1022  015A              ; ---------------------------------
1023  015A              _spr_move_jump:
1024  015A  2A 00 00    	ld	hl,(_player_vel_y)
1025  015D  ED 4B 00 00 	ld	bc,(_game_gravity)
1026  0161  09          	add	hl,bc
1027  0162  22 00 00    	ld	(_player_vel_y),hl
1028  0165  3E 78       	ld	a,0x78
1029  0167  21 00 00    	ld	hl,_player_vel_y
1030  016A  BE          	cp	a, (hl)
1031  016B  3E 00       	ld	a,0x00
1032  016D  23          	inc	hl
1033  016E  9E          	sbc	a, (hl)
1034  016F  E2 74 01    	jp	PO, l_spr_move_jump_00155
1035  0172  EE 80       	xor	a,0x80
1036  0174              l_spr_move_jump_00155:
1037  0174  F2 7D 01    	jp	P, l_spr_move_jump_00102
1038  0177  21 78 00    	ld	hl,0x0078
1039  017A  22 00 00    	ld	(_player_vel_y),hl
1040  017D              l_spr_move_jump_00102:
1041  017D  21 00 00    	ld	hl,_player_vel_y
1042  0180  7E          	ld	a, (hl)
1043  0181  D6 88       	sub	a,0x88
1044  0183  23          	inc	hl
1045  0184  7E          	ld	a, (hl)
1046  0185  17          	rla
1047  0186  3F          	ccf
1048  0187  1F          	rra
1049  0188  DE 7F       	sbc	a,0x7f
1050  018A  30 06       	jr	NC,l_spr_move_jump_00104
1051  018C  2B          	dec	hl
1052  018D  36 88       	ld	(hl),0x88
1053  018F  23          	inc	hl
1054  0190  36 FF       	ld	(hl),0xff
1055  0192              l_spr_move_jump_00104:
1056  0192  21 0A 00    	ld	hl,0x000a
1057  0195  E5          	push	hl
1058  0196  2A 00 00    	ld	hl,(_player_vel_y)
1059  0199  E5          	push	hl
1060  019A  CD 00 00    	call	__divsint_callee
1061  019D  4D          	ld	c, l
1062  019E  44          	ld	b, h
1063  019F  CB 41       	bit	0,c
1064  01A1  21 00 00    	ld	hl,_s_lin1
1065  01A4  71          	ld	(hl),c
1066  01A5  28 04       	jr	Z,l_spr_move_jump_00106
1067  01A7  21 00 00    	ld	hl,_s_lin1
1068  01AA  34          	inc	(hl)
1069  01AB              l_spr_move_jump_00106:
1070  01AB  2A 00 00    	ld	hl,(_sprite)
1071  01AE  26 00       	ld	h,0x00
1072  01B0  11 00 00    	ld	de,_lin
1073  01B3  19          	add	hl,de
1074  01B4  7E          	ld	a,(hl)
1075  01B5  21 00 00    	ld	hl,_s_lin1
1076  01B8  86          	add	a, (hl)
1077  01B9  77          	ld	(hl), a
1078  01BA  3E 90       	ld	a,0x90
1079  01BC  96          	sub	a, (hl)
1080  01BD  30 02       	jr	NC,l_spr_move_jump_00108
1081  01BF  36 90       	ld	(hl),0x90
1082  01C1              l_spr_move_jump_00108:
1083  01C1  CB 78       	bit	7, b
1084  01C3  28 59       	jr	Z,l_spr_move_jump_00119
1085  01C5  2A 00 00    	ld	hl,(_sprite)
1086  01C8  26 00       	ld	h,0x00
1087  01CA  01 00 00    	ld	bc,_col
1088  01CD  09          	add	hl,bc
1089  01CE  7E          	ld	a,(hl)
1090  01CF  F5          	push	af
1091  01D0  33          	inc	sp
1092  01D1  3A 00 00    	ld	a,(_s_lin1)
1093  01D4  F5          	push	af
1094  01D5  33          	inc	sp
1095  01D6  CD 1E 00    	call	_spr_check_map
1096  01D9  F1          	pop	af
1097  01DA  7C          	ld	a,h
1098  01DB  B5          	or	a,l
1099  01DC  28 31       	jr	Z,l_spr_move_jump_00112
1100  01DE  CD 00 00    	call	_player_hit_platform
1101  01E1  7D          	ld	a, l
1102  01E2  B7          	or	a, a
1103  01E3  28 19       	jr	Z,l_spr_move_jump_00110
1104  01E5  2A 00 00    	ld	hl,(_sprite)
1105  01E8  26 00       	ld	h,0x00
1106  01EA  01 00 00    	ld	bc,_lin
1107  01ED  09          	add	hl,bc
1108  01EE  7E          	ld	a,(hl)
1109  01EF  4D          	ld	c,l
1110  01F0  44          	ld	b,h
1111  01F1  07          	rlca
1112  01F2  07          	rlca
1113  01F3  07          	rlca
1114  01F4  07          	rlca
1115  01F5  E6 0F       	and	a,0x0f
1116  01F7  07          	rlca
1117  01F8  07          	rlca
1118  01F9  07          	rlca
1119  01FA  07          	rlca
1120  01FB  E6 F0       	and	a,0xf0
1121  01FD  02          	ld	(bc), a
1122  01FE              l_spr_move_jump_00110:
1123  01FE  21 00 00    	ld	hl,0x0000
1124  0201  22 00 00    	ld	(_player_vel_y),hl
1125  0204  21 00 00    	ld	hl,_s_state
1126  0207  7E          	ld	a,(hl)
1127  0208  E6 FE       	and	a,0xfe
1128  020A  F6 02       	or	a,0x02
1129  020C  77          	ld	(hl),a
1130  020D  18 6B       	jr	l_spr_move_jump_00120
1131  020F              l_spr_move_jump_00112:
1132  020F  2A 00 00    	ld	hl,(_sprite)
1133  0212  26 00       	ld	h,0x00
1134  0214  01 00 00    	ld	bc,_lin
1135  0217  09          	add	hl,bc
1136  0218  3A 00 00    	ld	a,(_s_lin1)
1137  021B  77          	ld	(hl),a
1138  021C  18 5C       	jr	l_spr_move_jump_00120
1139  021E              l_spr_move_jump_00119:
1140  021E  2A 00 00    	ld	hl,(_sprite)
1141  0221  26 00       	ld	h,0x00
1142  0223  01 00 00    	ld	bc,_col
1143  0226  09          	add	hl,bc
1144  0227  46          	ld	b,(hl)
1145  0228  3A 00 00    	ld	a,(_s_lin1)
1146  022B  C6 10       	add	a,0x10
1147  022D  4F          	ld	c,a
1148  022E  C5          	push	bc
1149  022F  CD 8A 00    	call	_spr_check_map_fall
1150  0232  F1          	pop	af
1151  0233  4D          	ld	c,l
1152  0234  44          	ld	b,h
1153  0235  2A 00 00    	ld	hl,(_sprite)
1154  0238  26 00       	ld	h,0x00
1155  023A  11 00 00    	ld	de,_lin
1156  023D  19          	add	hl,de
1157  023E  78          	ld	a,b
1158  023F  EB          	ex	de,hl
1159  0240  B1          	or	a,c
1160  0241  20 07       	jr	NZ,l_spr_move_jump_00114
1161  0243  3A 00 00    	ld	a,(_s_lin1)
1162  0246  D6 90       	sub	a,0x90
1163  0248  38 2C       	jr	C,l_spr_move_jump_00115
1164  024A              l_spr_move_jump_00114:
1165  024A  3A 00 00    	ld	a,(_s_lin1)
1166  024D  07          	rlca
1167  024E  07          	rlca
1168  024F  07          	rlca
1169  0250  07          	rlca
1170  0251  E6 0F       	and	a,0x0f
1171  0253  07          	rlca
1172  0254  07          	rlca
1173  0255  07          	rlca
1174  0256  07          	rlca
1175  0257  E6 F0       	and	a,0xf0
1176  0259  12          	ld	(de), a
1177  025A  21 00 00    	ld	hl,0x0000
1178  025D  22 00 00    	ld	(_player_vel_y),hl
1179  0260  21 00 00    	ld	hl,_s_state
1180  0263  7E          	ld	a,(hl)
1181  0264  E6 FC       	and	a,+(0xfd&0xfe)
1182  0266  77          	ld	(hl),a
1183  0267  2A 00 00    	ld	hl,(_sprite)
1184  026A  26 00       	ld	h,0x00
1185  026C  01 00 00    	ld	bc,_colint
1186  026F  09          	add	hl,bc
1187  0270  AF          	xor	a,a
1188  0271  77          	ld	(hl),a
1189  0272  2E 01       	ld	l,0x01
1190  0274  18 09       	jr	l_spr_move_jump_00121
1191  0276              l_spr_move_jump_00115:
1192  0276  3A 00 00    	ld	a,(_s_lin1)
1193  0279  12          	ld	(de), a
1194  027A              l_spr_move_jump_00120:
1195  027A  CD 7F 03    	call	_spr_move_horizontal
1196  027D  2E 00       	ld	l,0x00
1197  027F              l_spr_move_jump_00121:
1198  027F  C9          	ret
1199  0280              	SECTION code_compiler
1200  0280              ;	---------------------------------
1201  0280              ; Function spr_move_up
1202  0280              ; ---------------------------------
1203  0280              _spr_move_up:
1204  0280  2A 00 00    	ld	hl,(_sprite)
1205  0283  26 00       	ld	h,0x00
1206  0285  01 00 00    	ld	bc,_lin
1207  0288  09          	add	hl,bc
1208  0289  4E          	ld	c,(hl)
1209  028A  21 00 00    	ld	hl,_sprite_lin_inc_mul
1210  028D  46          	ld	b, (hl)
1211  028E  1E 02       	ld	e,0x02
1212  0290  04          	inc	b
1213  0291  18 02       	jr	l_spr_move_up_00134
1214  0293              l_spr_move_up_00133:
1215  0293  CB 23       	sla	e
1216  0295              l_spr_move_up_00134:
1217  0295  10 FC       	djnz	l_spr_move_up_00133
1218  0297  79          	ld	a, c
1219  0298  93          	sub	a, e
1220  0299  32 00 00    	ld	(_tmp1),a
1221  029C  2A 00 00    	ld	hl,(_sprite)
1222  029F  26 00       	ld	h,0x00
1223  02A1  01 00 00    	ld	bc,_class
1224  02A4  09          	add	hl,bc
1225  02A5  7E          	ld	a,(hl)
1226  02A6  D6 10       	sub	a,0x10
1227  02A8  20 2D       	jr	NZ,l_spr_move_up_00107
1228  02AA  2A 00 00    	ld	hl,(_sprite)
1229  02AD  26 00       	ld	h,0x00
1230  02AF  01 00 00    	ld	bc,_col
1231  02B2  09          	add	hl,bc
1232  02B3  7E          	ld	a,(hl)
1233  02B4  F5          	push	af
1234  02B5  33          	inc	sp
1235  02B6  3A 00 00    	ld	a,(_tmp1)
1236  02B9  F5          	push	af
1237  02BA  33          	inc	sp
1238  02BB  CD 1E 00    	call	_spr_check_map
1239  02BE  F1          	pop	af
1240  02BF  7C          	ld	a,h
1241  02C0  B5          	or	a,l
1242  02C1  28 14       	jr	Z,l_spr_move_up_00107
1243  02C3  3A 00 00    	ld	a,(_sprite)
1244  02C6  D6 07       	sub	a,0x07
1245  02C8  20 09       	jr	NZ,l_spr_move_up_00102
1246  02CA  3A 07 00    	ld	a,(_state_a + 0x0007)
1247  02CD  07          	rlca
1248  02CE  38 03       	jr	C,l_spr_move_up_00102
1249  02D0  CD 00 00    	call	_player_hit_platform
1250  02D3              l_spr_move_up_00102:
1251  02D3  2E 01       	ld	l,0x01
1252  02D5  18 39       	jr	l_spr_move_up_00111
1253  02D7              l_spr_move_up_00107:
1254  02D7  2A 00 00    	ld	hl,(_sprite)
1255  02DA  26 00       	ld	h,0x00
1256  02DC  01 00 00    	ld	bc,_lin
1257  02DF  09          	add	hl,bc
1258  02E0  3A 00 00    	ld	a,(_tmp1)
1259  02E3  77          	ld	(hl),a
1260  02E4  2A 00 00    	ld	hl,(_sprite)
1261  02E7  26 00       	ld	h,0x00
1262  02E9  01 00 00    	ld	bc,_lin
1263  02EC  09          	add	hl,bc
1264  02ED  7E          	ld	a,(hl)
1265  02EE  5F          	ld	e,a
1266  02EF  B7          	or	a,a
1267  02F0  4D          	ld	c,l
1268  02F1  44          	ld	b,h
1269  02F2  28 05       	jr	Z,l_spr_move_up_00108
1270  02F4  3E 90       	ld	a,0x90
1271  02F6  93          	sub	a, e
1272  02F7  30 15       	jr	NC,l_spr_move_up_00109
1273  02F9              l_spr_move_up_00108:
1274  02F9  AF          	xor	a, a
1275  02FA  02          	ld	(bc), a
1276  02FB  3A 00 00    	ld	a,(_s_col0)
1277  02FE  F5          	push	af
1278  02FF  33          	inc	sp
1279  0300  3A 00 00    	ld	a,(_s_lin0)
1280  0303  57          	ld	d,a
1281  0304  1E 12       	ld	e,0x12
1282  0306  D5          	push	de
1283  0307  CD 00 00    	call	_NIRVANAP_fillT_callee
1284  030A  2E 01       	ld	l,0x01
1285  030C  18 02       	jr	l_spr_move_up_00111
1286  030E              l_spr_move_up_00109:
1287  030E  2E 00       	ld	l,0x00
1288  0310              l_spr_move_up_00111:
1289  0310  C9          	ret
1290  0311              	SECTION code_compiler
1291  0311              ;	---------------------------------
1292  0311              ; Function spr_move_down
1293  0311              ; ---------------------------------
1294  0311              _spr_move_down:
1295  0311  2A 00 00    	ld	hl,(_sprite)
1296  0314  26 00       	ld	h,0x00
1297  0316  01 00 00    	ld	bc,_lin
1298  0319  09          	add	hl,bc
1299  031A  4E          	ld	c,(hl)
1300  031B  21 00 00    	ld	hl,_sprite_lin_inc_mul
1301  031E  46          	ld	b, (hl)
1302  031F  1E 02       	ld	e,0x02
1303  0321  04          	inc	b
1304  0322  18 02       	jr	l_spr_move_down_00116
1305  0324              l_spr_move_down_00115:
1306  0324  CB 23       	sla	e
1307  0326              l_spr_move_down_00116:
1308  0326  10 FC       	djnz	l_spr_move_down_00115
1309  0328  79          	ld	a, c
1310  0329  83          	add	a, e
1311  032A  32 00 00    	ld	(_tmp1),a
1312  032D  2A 00 00    	ld	hl,(_sprite)
1313  0330  26 00       	ld	h,0x00
1314  0332  01 00 00    	ld	bc,_col
1315  0335  09          	add	hl,bc
1316  0336  56          	ld	d, (hl)
1317  0337  3A 00 00    	ld	a,(_tmp1)
1318  033A  C6 10       	add	a,0x10
1319  033C  5F          	ld	e, a
1320  033D  D5          	push	de
1321  033E  CD 8A 00    	call	_spr_check_map_fall
1322  0341  F1          	pop	af
1323  0342  4D          	ld	c,l
1324  0343  44          	ld	b,h
1325  0344  2A 00 00    	ld	hl,(_sprite)
1326  0347  26 00       	ld	h,0x00
1327  0349  11 00 00    	ld	de,_lin
1328  034C  19          	add	hl,de
1329  034D  78          	ld	a,b
1330  034E  EB          	ex	de,hl
1331  034F  B1          	or	a,c
1332  0350  28 12       	jr	Z,l_spr_move_down_00102
1333  0352  3A 00 00    	ld	a,(_tmp1)
1334  0355  0F          	rrca
1335  0356  0F          	rrca
1336  0357  0F          	rrca
1337  0358  E6 1F       	and	a,0x1f
1338  035A  07          	rlca
1339  035B  07          	rlca
1340  035C  07          	rlca
1341  035D  E6 F8       	and	a,0xf8
1342  035F  12          	ld	(de), a
1343  0360  2E 01       	ld	l,0x01
1344  0362  18 1A       	jr	l_spr_move_down_00105
1345  0364              l_spr_move_down_00102:
1346  0364  3A 00 00    	ld	a,(_tmp1)
1347  0367  12          	ld	(de), a
1348  0368  2A 00 00    	ld	hl,(_sprite)
1349  036B  26 00       	ld	h,0x00
1350  036D  01 00 00    	ld	bc,_lin
1351  0370  09          	add	hl,bc
1352  0371  5E          	ld	e,(hl)
1353  0372  3E 90       	ld	a,0x90
1354  0374  BB          	cp	a,e
1355  0375  30 05       	jr	NC,l_spr_move_down_00104
1356  0377  77          	ld	(hl),a
1357  0378  2E 01       	ld	l,0x01
1358  037A  18 02       	jr	l_spr_move_down_00105
1359  037C              l_spr_move_down_00104:
1360  037C  2E 00       	ld	l,0x00
1361  037E              l_spr_move_down_00105:
1362  037E  C9          	ret
1363  037F              	SECTION code_compiler
1364  037F              ;	---------------------------------
1365  037F              ; Function spr_move_horizontal
1366  037F              ; ---------------------------------
1367  037F              _spr_move_horizontal:
1368  037F  2A 00 00    	ld	hl,(_sprite)
1369  0382  26 00       	ld	h,0x00
1370  0384  01 00 00    	ld	bc,_state
1371  0387  09          	add	hl,bc
1372  0388  7E          	ld	a,(hl)
1373  0389  CB 57       	bit	2, a
1374  038B  28 05       	jr	Z,l_spr_move_horizontal_00104
1375  038D  CD 9E 03    	call	_spr_move_right
1376  0390  18 0B       	jr	l_spr_move_horizontal_00106
1377  0392              l_spr_move_horizontal_00104:
1378  0392  CB 5F       	bit	3, a
1379  0394  28 05       	jr	Z,l_spr_move_horizontal_00105
1380  0396  CD 77 04    	call	_spr_move_left
1381  0399  18 02       	jr	l_spr_move_horizontal_00106
1382  039B              l_spr_move_horizontal_00105:
1383  039B  2E 00       	ld	l,0x00
1384  039D              l_spr_move_horizontal_00106:
1385  039D  C9          	ret
1386  039E              	SECTION code_compiler
1387  039E              ;	---------------------------------
1388  039E              ; Function spr_move_right
1389  039E              ; ---------------------------------
1390  039E              _spr_move_right:
1391  039E  2A 00 00    	ld	hl,(_sprite)
1392  03A1  26 00       	ld	h,0x00
1393  03A3  01 00 00    	ld	bc,_colint
1394  03A6  09          	add	hl,bc
1395  03A7  7E          	ld	a,(hl)
1396  03A8  3C          	inc	a
1397  03A9  77          	ld	(hl),a
1398  03AA  4F          	ld	c,a
1399  03AB  3A 00 00    	ld	a,(_sprite)
1400  03AE  5F          	ld	e,a
1401  03AF  16 00       	ld	d,0x00
1402  03B1  21 00 00    	ld	hl,_class
1403  03B4  19          	add	hl,de
1404  03B5  5E          	ld	e, (hl)
1405  03B6  16 00       	ld	d,0x00
1406  03B8  21 00 00    	ld	hl,_sprite_frames
1407  03BB  19          	add	hl, de
1408  03BC  7E          	ld	a, (hl)
1409  03BD  91          	sub	a, c
1410  03BE  C2 74 04    	jp	NZ,l_spr_move_right_00115
1411  03C1  2A 00 00    	ld	hl,(_sprite)
1412  03C4  26 00       	ld	h,0x00
1413  03C6  01 00 00    	ld	bc,_lin
1414  03C9  09          	add	hl,bc
1415  03CA  7E          	ld	a,(hl)
1416  03CB  32 00 00    	ld	(_s_lin1),a
1417  03CE  2A 00 00    	ld	hl,(_sprite)
1418  03D1  26 00       	ld	h,0x00
1419  03D3  01 00 00    	ld	bc,_col
1420  03D6  09          	add	hl,bc
1421  03D7  7E          	ld	a,(hl)
1422  03D8  FE 1E       	cp	a,0x1e
1423  03DA  30 44       	jr	NC,l_spr_move_right_00105
1424  03DC  3C          	inc	a
1425  03DD  32 00 00    	ld	(_s_col1),a
1426  03E0  F5          	push	af
1427  03E1  33          	inc	sp
1428  03E2  3A 00 00    	ld	a,(_s_lin1)
1429  03E5  F5          	push	af
1430  03E6  33          	inc	sp
1431  03E7  CD 1E 00    	call	_spr_check_map
1432  03EA  F1          	pop	af
1433  03EB  7C          	ld	a,h
1434  03EC  B5          	or	a,l
1435  03ED  20 13       	jr	NZ,l_spr_move_right_00101
1436  03EF  3A 00 00    	ld	a,(_s_lin1)
1437  03F2  C6 0F       	add	a,0x0f
1438  03F4  4F          	ld	c, a
1439  03F5  3A 00 00    	ld	a, (_s_col1)
1440  03F8  47          	ld	b,a
1441  03F9  C5          	push	bc
1442  03FA  CD 1E 00    	call	_spr_check_map
1443  03FD  F1          	pop	af
1444  03FE  7C          	ld	a,h
1445  03FF  B5          	or	a,l
1446  0400  28 1E       	jr	Z,l_spr_move_right_00105
1447  0402              l_spr_move_right_00101:
1448  0402  2A 00 00    	ld	hl,(_sprite)
1449  0405  26 00       	ld	h,0x00
1450  0407  01 00 00    	ld	bc,_colint
1451  040A  09          	add	hl,bc
1452  040B  7E          	ld	a,(hl)
1453  040C  C6 FF       	add	a,0xff
1454  040E  77          	ld	(hl),a
1455  040F  2A 00 00    	ld	hl,(_sprite)
1456  0412  26 00       	ld	h,0x00
1457  0414  01 00 00    	ld	bc,_colint
1458  0417  09          	add	hl,bc
1459  0418  7E          	ld	a,(hl)
1460  0419  C6 FF       	add	a,0xff
1461  041B  77          	ld	(hl),a
1462  041C  2E 01       	ld	l,0x01
1463  041E  18 56       	jr	l_spr_move_right_00116
1464  0420              l_spr_move_right_00105:
1465  0420  2A 00 00    	ld	hl,(_sprite)
1466  0423  26 00       	ld	h,0x00
1467  0425  01 00 00    	ld	bc,_col
1468  0428  09          	add	hl,bc
1469  0429  34          	inc	(hl)
1470  042A  2A 00 00    	ld	hl,(_sprite)
1471  042D  26 00       	ld	h,0x00
1472  042F  01 00 00    	ld	bc,_colint
1473  0432  09          	add	hl,bc
1474  0433  AF          	xor	a,a
1475  0434  77          	ld	(hl),a
1476  0435  2A 00 00    	ld	hl,(_sprite)
1477  0438  26 00       	ld	h,0x00
1478  043A  01 00 00    	ld	bc,_col
1479  043D  09          	add	hl,bc
1480  043E  5E          	ld	e,(hl)
1481  043F  3E 1E       	ld	a,0x1e
1482  0441  93          	sub	a,e
1483  0442  30 30       	jr	NC,l_spr_move_right_00115
1484  0444  3A 00 00    	ld	a,(_sprite)
1485  0447  D6 07       	sub	a,0x07
1486  0449  28 04       	jr	Z,l_spr_move_right_00145
1487  044B  4D          	ld	c,l
1488  044C  44          	ld	b,h
1489  044D  18 1C       	jr	l_spr_move_right_00110
1490  044F              l_spr_move_right_00145:
1491  044F  CD 5A 05    	call	_spr_page_right
1492  0452  3A 00 00    	ld	a,(_sprite)
1493  0455  C6 00       	add	a,+((_col) & 0xFF)
1494  0457  4D          	ld	c,l
1495  0458  5F          	ld	e,a
1496  0459  3E 00       	ld	a,+((_col) / 256)
1497  045B  CE 00       	adc	a,0x00
1498  045D  57          	ld	d,a
1499  045E  79          	ld	a, c
1500  045F  B7          	or	a, a
1501  0460  28 04       	jr	Z,l_spr_move_right_00107
1502  0462  AF          	xor	a, a
1503  0463  12          	ld	(de), a
1504  0464  18 0E       	jr	l_spr_move_right_00115
1505  0466              l_spr_move_right_00107:
1506  0466  3E 1E       	ld	a,0x1e
1507  0468  12          	ld	(de), a
1508  0469  18 09       	jr	l_spr_move_right_00115
1509  046B              l_spr_move_right_00110:
1510  046B  3E 1E       	ld	a,0x1e
1511  046D  02          	ld	(bc), a
1512  046E  2A 00 00    	ld	hl,(_sprite)
1513  0471  CD A8 07    	call	_spr_destroy
1514  0474              l_spr_move_right_00115:
1515  0474  2E 00       	ld	l,0x00
1516  0476              l_spr_move_right_00116:
1517  0476  C9          	ret
1518  0477              	SECTION code_compiler
1519  0477              ;	---------------------------------
1520  0477              ; Function spr_move_left
1521  0477              ; ---------------------------------
1522  0477              _spr_move_left:
1523  0477  01 00 00    	ld	bc,_colint+0
1524  047A  79          	ld	a, c
1525  047B  21 00 00    	ld	hl,_sprite
1526  047E  86          	add	a, (hl)
1527  047F  5F          	ld	e, a
1528  0480  78          	ld	a, b
1529  0481  CE 00       	adc	a,0x00
1530  0483  57          	ld	d, a
1531  0484  1A          	ld	a, (de)
1532  0485  C6 FF       	add	a,0xff
1533  0487  12          	ld	(de), a
1534  0488  79          	ld	a, c
1535  0489  86          	add	a, (hl)
1536  048A  5F          	ld	e, a
1537  048B  78          	ld	a, b
1538  048C  CE 00       	adc	a,0x00
1539  048E  57          	ld	d, a
1540  048F  1A          	ld	a, (de)
1541  0490  3C          	inc	a
1542  0491  C2 57 05    	jp	NZ,l_spr_move_left_00115
1543  0494  5E          	ld	e,(hl)
1544  0495  16 00       	ld	d,0x00
1545  0497  21 00 00    	ld	hl,_lin
1546  049A  19          	add	hl,de
1547  049B  7E          	ld	a,(hl)
1548  049C  32 00 00    	ld	(_s_lin1),a
1549  049F  2A 00 00    	ld	hl,(_sprite)
1550  04A2  26 00       	ld	h,0x00
1551  04A4  11 00 00    	ld	de,_col
1552  04A7  19          	add	hl,de
1553  04A8  7E          	ld	a,(hl)
1554  04A9  B7          	or	a, a
1555  04AA  28 47       	jr	Z,l_spr_move_left_00105
1556  04AC  C6 FF       	add	a,0xff
1557  04AE  32 00 00    	ld	(_s_col1),a
1558  04B1  C5          	push	bc
1559  04B2  F5          	push	af
1560  04B3  33          	inc	sp
1561  04B4  3A 00 00    	ld	a,(_s_lin1)
1562  04B7  F5          	push	af
1563  04B8  33          	inc	sp
1564  04B9  CD 1E 00    	call	_spr_check_map
1565  04BC  F1          	pop	af
1566  04BD  C1          	pop	bc
1567  04BE  7C          	ld	a,h
1568  04BF  B5          	or	a,l
1569  04C0  20 16       	jr	NZ,l_spr_move_left_00101
1570  04C2  3A 00 00    	ld	a,(_s_lin1)
1571  04C5  C6 0F       	add	a,0x0f
1572  04C7  57          	ld	d, a
1573  04C8  3A 00 00    	ld	a,(_s_col1)
1574  04CB  C5          	push	bc
1575  04CC  5A          	ld	e,d
1576  04CD  57          	ld	d,a
1577  04CE  D5          	push	de
1578  04CF  CD 1E 00    	call	_spr_check_map
1579  04D2  F1          	pop	af
1580  04D3  C1          	pop	bc
1581  04D4  7C          	ld	a,h
1582  04D5  B5          	or	a,l
1583  04D6  28 1B       	jr	Z,l_spr_move_left_00105
1584  04D8              l_spr_move_left_00101:
1585  04D8  79          	ld	a, c
1586  04D9  21 00 00    	ld	hl,_sprite
1587  04DC  86          	add	a, (hl)
1588  04DD  5F          	ld	e, a
1589  04DE  78          	ld	a, b
1590  04DF  CE 00       	adc	a,0x00
1591  04E1  57          	ld	d, a
1592  04E2  1A          	ld	a, (de)
1593  04E3  3C          	inc	a
1594  04E4  12          	ld	(de), a
1595  04E5  79          	ld	a, c
1596  04E6  86          	add	a, (hl)
1597  04E7  4F          	ld	c, a
1598  04E8  78          	ld	a, b
1599  04E9  CE 00       	adc	a,0x00
1600  04EB  47          	ld	b, a
1601  04EC  0A          	ld	a, (bc)
1602  04ED  3C          	inc	a
1603  04EE  02          	ld	(bc), a
1604  04EF  2E 01       	ld	l,0x01
1605  04F1  18 66       	jr	l_spr_move_left_00116
1606  04F3              l_spr_move_left_00105:
1607  04F3  2A 00 00    	ld	hl,(_sprite)
1608  04F6  26 00       	ld	h,0x00
1609  04F8  11 00 00    	ld	de,_col
1610  04FB  19          	add	hl,de
1611  04FC  7E          	ld	a,(hl)
1612  04FD  EB          	ex	de,hl
1613  04FE  C6 FF       	add	a,0xff
1614  0500  12          	ld	(de),a
1615  0501  79          	ld	a,c
1616  0502  21 00 00    	ld	hl,_sprite
1617  0505  86          	add	a, (hl)
1618  0506  4F          	ld	c, a
1619  0507  78          	ld	a, b
1620  0508  CE 00       	adc	a,0x00
1621  050A  47          	ld	b, a
1622  050B  5E          	ld	e,(hl)
1623  050C  16 00       	ld	d,0x00
1624  050E  21 00 00    	ld	hl,_class
1625  0511  19          	add	hl,de
1626  0512  5E          	ld	e, (hl)
1627  0513  16 00       	ld	d,0x00
1628  0515  21 00 00    	ld	hl,_sprite_frames
1629  0518  19          	add	hl, de
1630  0519  5E          	ld	e, (hl)
1631  051A  1D          	dec	e
1632  051B  7B          	ld	a, e
1633  051C  02          	ld	(bc), a
1634  051D  2A 00 00    	ld	hl,(_sprite)
1635  0520  26 00       	ld	h,0x00
1636  0522  01 00 00    	ld	bc,_col
1637  0525  09          	add	hl,bc
1638  0526  7E          	ld	a,(hl)
1639  0527  3C          	inc	a
1640  0528  20 2D       	jr	NZ,l_spr_move_left_00115
1641  052A  3A 00 00    	ld	a,(_sprite)
1642  052D  D6 07       	sub	a,0x07
1643  052F  4D          	ld	c,l
1644  0530  44          	ld	b,h
1645  0531  20 1C       	jr	NZ,l_spr_move_left_00110
1646  0533  CD 74 05    	call	_spr_page_left
1647  0536  3A 00 00    	ld	a,(_sprite)
1648  0539  C6 00       	add	a,+((_col) & 0xFF)
1649  053B  4D          	ld	c,l
1650  053C  5F          	ld	e,a
1651  053D  3E 00       	ld	a,+((_col) / 256)
1652  053F  CE 00       	adc	a,0x00
1653  0541  57          	ld	d,a
1654  0542  79          	ld	a, c
1655  0543  B7          	or	a, a
1656  0544  28 05       	jr	Z,l_spr_move_left_00107
1657  0546  3E 1E       	ld	a,0x1e
1658  0548  12          	ld	(de), a
1659  0549  18 0C       	jr	l_spr_move_left_00115
1660  054B              l_spr_move_left_00107:
1661  054B  AF          	xor	a, a
1662  054C  12          	ld	(de), a
1663  054D  18 08       	jr	l_spr_move_left_00115
1664  054F              l_spr_move_left_00110:
1665  054F  AF          	xor	a, a
1666  0550  02          	ld	(bc), a
1667  0551  2A 00 00    	ld	hl,(_sprite)
1668  0554  CD A8 07    	call	_spr_destroy
1669  0557              l_spr_move_left_00115:
1670  0557  2E 00       	ld	l,0x00
1671  0559              l_spr_move_left_00116:
1672  0559  C9          	ret
1673  055A              	SECTION code_compiler
1674  055A              ;	---------------------------------
1675  055A              ; Function spr_page_right
1676  055A              ; ---------------------------------
1677  055A              _spr_page_right:
1678  055A  3A 00 00    	ld	a,(_scr_curr)
1679  055D  21 00 00    	ld	hl,_map_width
1680  0560  96          	sub	a, (hl)
1681  0561  30 0E       	jr	NC,l_spr_page_right_00102
1682  0563  21 00 00    	ld	hl,_scr_curr
1683  0566  34          	inc	(hl)
1684  0567  CD 9B 05    	call	_spr_page_map
1685  056A  CD C8 08    	call	_spr_draw_map_background
1686  056D  2E 01       	ld	l,0x01
1687  056F  18 02       	jr	l_spr_page_right_00103
1688  0571              l_spr_page_right_00102:
1689  0571  2E 00       	ld	l,0x00
1690  0573              l_spr_page_right_00103:
1691  0573  C9          	ret
1692  0574              	SECTION code_compiler
1693  0574              ;	---------------------------------
1694  0574              ; Function spr_page_left
1695  0574              ; ---------------------------------
1696  0574              _spr_page_left:
1697  0574  2A 00 00    	ld	hl,(_sprite)
1698  0577  26 00       	ld	h,0x00
1699  0579  01 00 00    	ld	bc,_class
1700  057C  09          	add	hl,bc
1701  057D  7E          	ld	a,(hl)
1702  057E  D6 10       	sub	a,0x10
1703  0580  28 04       	jr	Z,l_spr_page_left_00102
1704  0582  2E 00       	ld	l,0x00
1705  0584  18 14       	jr	l_spr_page_left_00105
1706  0586              l_spr_page_left_00102:
1707  0586  21 00 00    	ld	hl,_scr_curr
1708  0589  7E          	ld	a, (hl)
1709  058A  B7          	or	a, a
1710  058B  28 0B       	jr	Z,l_spr_page_left_00104
1711  058D  35          	dec	(hl)
1712  058E  CD 9B 05    	call	_spr_page_map
1713  0591  CD C8 08    	call	_spr_draw_map_background
1714  0594  2E 01       	ld	l,0x01
1715  0596  18 02       	jr	l_spr_page_left_00105
1716  0598              l_spr_page_left_00104:
1717  0598  2E 00       	ld	l,0x00
1718  059A              l_spr_page_left_00105:
1719  059A  C9          	ret
1720  059B              	SECTION code_compiler
1721  059B              ;	---------------------------------
1722  059B              ; Function spr_page_map
1723  059B              ; ---------------------------------
1724  059B              _spr_page_map:
1725  059B  CD 00 00    	call	___sdcc_enter_ix
1726  059E  F5          	push	af
1727  059F  3E 10       	ld	a,0x10
1728  05A1  F5          	push	af
1729  05A2  33          	inc	sp
1730  05A3  0E 00       	ld	c,0x00
1731  05A5              l_spr_page_map_00123:
1732  05A5  3E 07       	ld	a,0x07
1733  05A7  21 00 00    	ld	hl,_scr_curr
1734  05AA  96          	sub	a, (hl)
1735  05AB  DA 75 06    	jp	C, l_spr_page_map_00109
1736  05AE  59          	ld	e, c
1737  05AF  16 00       	ld	d,0x00
1738  05B1  13          	inc	de
1739  05B2  D5          	push	de
1740  05B3  5E          	ld	e, (hl)
1741  05B4  16 00       	ld	d,0x00
1742  05B6  21 BE 05    	ld	hl,l_spr_page_map_00167
1743  05B9  19          	add	hl, de
1744  05BA  19          	add	hl, de
1745  05BB  19          	add	hl, de
1746  05BC  D1          	pop	de
1747  05BD  E9          	jp	(hl)
1748  05BE              l_spr_page_map_00167:
1749  05BE  C3 D6 05    	jp	l_spr_page_map_00101
1750  05C1  C3 EB 05    	jp	l_spr_page_map_00102
1751  05C4  C3 FF 05    	jp	l_spr_page_map_00103
1752  05C7  C3 13 06    	jp	l_spr_page_map_00104
1753  05CA  C3 27 06    	jp	l_spr_page_map_00105
1754  05CD  C3 3B 06    	jp	l_spr_page_map_00106
1755  05D0  C3 4F 06    	jp	l_spr_page_map_00107
1756  05D3  C3 63 06    	jp	l_spr_page_map_00108
1757  05D6              l_spr_page_map_00101:
1758  05D6  06 00       	ld	b,0x00
1759  05D8  21 00 00    	ld	hl,_scr_0
1760  05DB  09          	add	hl, bc
1761  05DC  7E          	ld	a, (hl)
1762  05DD  DD 77 FF    	ld	(ix-1),a
1763  05E0  21 00 00    	ld	hl,_scr_0
1764  05E3  19          	add	hl, de
1765  05E4  7E          	ld	a, (hl)
1766  05E5  DD 77 FE    	ld	(ix-2),a
1767  05E8  C3 75 06    	jp	l_spr_page_map_00109
1768  05EB              l_spr_page_map_00102:
1769  05EB  06 00       	ld	b,0x00
1770  05ED  21 00 00    	ld	hl,_scr_1
1771  05F0  09          	add	hl, bc
1772  05F1  7E          	ld	a, (hl)
1773  05F2  DD 77 FF    	ld	(ix-1),a
1774  05F5  21 00 00    	ld	hl,_scr_1
1775  05F8  19          	add	hl, de
1776  05F9  7E          	ld	a, (hl)
1777  05FA  DD 77 FE    	ld	(ix-2),a
1778  05FD  18 76       	jr	l_spr_page_map_00109
1779  05FF              l_spr_page_map_00103:
1780  05FF  06 00       	ld	b,0x00
1781  0601  21 00 00    	ld	hl,_scr_2
1782  0604  09          	add	hl, bc
1783  0605  7E          	ld	a, (hl)
1784  0606  DD 77 FF    	ld	(ix-1),a
1785  0609  21 00 00    	ld	hl,_scr_2
1786  060C  19          	add	hl, de
1787  060D  7E          	ld	a, (hl)
1788  060E  DD 77 FE    	ld	(ix-2),a
1789  0611  18 62       	jr	l_spr_page_map_00109
1790  0613              l_spr_page_map_00104:
1791  0613  06 00       	ld	b,0x00
1792  0615  21 00 00    	ld	hl,_scr_3
1793  0618  09          	add	hl, bc
1794  0619  7E          	ld	a, (hl)
1795  061A  DD 77 FF    	ld	(ix-1),a
1796  061D  21 00 00    	ld	hl,_scr_3
1797  0620  19          	add	hl, de
1798  0621  7E          	ld	a, (hl)
1799  0622  DD 77 FE    	ld	(ix-2),a
1800  0625  18 4E       	jr	l_spr_page_map_00109
1801  0627              l_spr_page_map_00105:
1802  0627  06 00       	ld	b,0x00
1803  0629  21 00 00    	ld	hl,_scr_4
1804  062C  09          	add	hl, bc
1805  062D  7E          	ld	a, (hl)
1806  062E  DD 77 FF    	ld	(ix-1),a
1807  0631  21 00 00    	ld	hl,_scr_4
1808  0634  19          	add	hl, de
1809  0635  7E          	ld	a, (hl)
1810  0636  DD 77 FE    	ld	(ix-2),a
1811  0639  18 3A       	jr	l_spr_page_map_00109
1812  063B              l_spr_page_map_00106:
1813  063B  06 00       	ld	b,0x00
1814  063D  21 00 00    	ld	hl,_scr_5
1815  0640  09          	add	hl, bc
1816  0641  7E          	ld	a, (hl)
1817  0642  DD 77 FF    	ld	(ix-1),a
1818  0645  21 00 00    	ld	hl,_scr_5
1819  0648  19          	add	hl, de
1820  0649  7E          	ld	a, (hl)
1821  064A  DD 77 FE    	ld	(ix-2),a
1822  064D  18 26       	jr	l_spr_page_map_00109
1823  064F              l_spr_page_map_00107:
1824  064F  06 00       	ld	b,0x00
1825  0651  21 00 00    	ld	hl,_scr_6
1826  0654  09          	add	hl, bc
1827  0655  7E          	ld	a, (hl)
1828  0656  DD 77 FF    	ld	(ix-1),a
1829  0659  21 00 00    	ld	hl,_scr_6
1830  065C  19          	add	hl, de
1831  065D  7E          	ld	a, (hl)
1832  065E  DD 77 FE    	ld	(ix-2),a
1833  0661  18 12       	jr	l_spr_page_map_00109
1834  0663              l_spr_page_map_00108:
1835  0663  06 00       	ld	b,0x00
1836  0665  21 00 00    	ld	hl,_scr_7
1837  0668  09          	add	hl, bc
1838  0669  7E          	ld	a, (hl)
1839  066A  DD 77 FF    	ld	(ix-1),a
1840  066D  21 00 00    	ld	hl,_scr_7
1841  0670  19          	add	hl, de
1842  0671  7E          	ld	a, (hl)
1843  0672  DD 77 FE    	ld	(ix-2),a
1844  0675              l_spr_page_map_00109:
1845  0675  DD 7E FF    	ld	a,(ix-1)
1846  0678  D6 80       	sub	a,0x80
1847  067A  30 14       	jr	NC,l_spr_page_map_00114
1848  067C  3E 00       	ld	a, +((_scr_map) & 0xFF)
1849  067E  DD 86 FD    	add	a,(ix-3)
1850  0681  5F          	ld	e, a
1851  0682  3E 00       	ld	a, +((_scr_map) / 256)
1852  0684  CE 00       	adc	a,0x00
1853  0686  57          	ld	d, a
1854  0687  DD 7E FF    	ld	a,(ix-1)
1855  068A  12          	ld	(de), a
1856  068B  DD 34 FD    	inc	(ix-3)
1857  068E  18 29       	jr	l_spr_page_map_00115
1858  0690              l_spr_page_map_00114:
1859  0690  DD 7E FF    	ld	a,(ix-1)
1860  0693  C6 80       	add	a,0x80
1861  0695  47          	ld	b, a
1862  0696  DD 5E FD    	ld	e,(ix-3)
1863  0699  16 00       	ld	d,0x00
1864  069B              l_spr_page_map_00121:
1865  069B  7A          	ld	a, d
1866  069C  90          	sub	a, b
1867  069D  30 16       	jr	NC,l_spr_page_map_00138
1868  069F  3E 00       	ld	a, +((_scr_map) & 0xFF)
1869  06A1  83          	add	a, e
1870  06A2  6F          	ld	l, a
1871  06A3  3E 00       	ld	a, +((_scr_map) / 256)
1872  06A5  CE 00       	adc	a,0x00
1873  06A7  67          	ld	h, a
1874  06A8  DD 7E FE    	ld	a,(ix-2)
1875  06AB  77          	ld	(hl), a
1876  06AC  1C          	inc	e
1877  06AD  7B          	ld	a, e
1878  06AE  D6 A0       	sub	a,0xa0
1879  06B0  30 03       	jr	NC,l_spr_page_map_00138
1880  06B2  14          	inc	d
1881  06B3  18 E6       	jr	l_spr_page_map_00121
1882  06B5              l_spr_page_map_00138:
1883  06B5  DD 73 FD    	ld	(ix-3),e
1884  06B8  0C          	inc	c
1885  06B9              l_spr_page_map_00115:
1886  06B9  DD 7E FD    	ld	a,(ix-3)
1887  06BC  D6 A0       	sub	a,0xa0
1888  06BE  30 07       	jr	NC,l_spr_page_map_00136
1889  06C0  0C          	inc	c
1890  06C1  79          	ld	a, c
1891  06C2  D6 A0       	sub	a,0xa0
1892  06C4  DA A5 05    	jp	C, l_spr_page_map_00123
1893  06C7              l_spr_page_map_00136:
1894  06C7  0E 00       	ld	c,0x00
1895  06C9              l_spr_page_map_00125:
1896  06C9  06 00       	ld	b,0x00
1897  06CB  21 00 00    	ld	hl,_class
1898  06CE  09          	add	hl, bc
1899  06CF  36 00       	ld	(hl),0x00
1900  06D1  C5          	push	bc
1901  06D2  21 00 00    	ld	hl,0x0000
1902  06D5  E5          	push	hl
1903  06D6  AF          	xor	a, a
1904  06D7  F5          	push	af
1905  06D8  33          	inc	sp
1906  06D9  79          	ld	a, c
1907  06DA  F5          	push	af
1908  06DB  33          	inc	sp
1909  06DC  CD 00 00    	call	_NIRVANAP_spriteT_callee
1910  06DF  C1          	pop	bc
1911  06E0  0C          	inc	c
1912  06E1  79          	ld	a, c
1913  06E2  D6 07       	sub	a,0x07
1914  06E4  38 E3       	jr	C,l_spr_page_map_00125
1915  06E6  CD 26 0E    	call	_spr_init_anim
1916  06E9  CD 38 0E    	call	_spr_init_bullet
1917  06EC  DD F9       	ld	sp, ix
1918  06EE  DD E1       	pop	ix
1919  06F0  C9          	ret
1920  06F1              	SECTION code_compiler
1921  06F1              ;	---------------------------------
1922  06F1              ; Function spr_redraw
1923  06F1              ; ---------------------------------
1924  06F1              _spr_redraw:
1925  06F1  2A 00 00    	ld	hl,(_sprite)
1926  06F4  26 00       	ld	h,0x00
1927  06F6  01 00 00    	ld	bc,_tile
1928  06F9  09          	add	hl,bc
1929  06FA  4E          	ld	c, (hl)
1930  06FB  3A 00 00    	ld	a,(_sprite)
1931  06FE  5F          	ld	e,a
1932  06FF  16 00       	ld	d,0x00
1933  0701  21 00 00    	ld	hl,_colint
1934  0704  19          	add	hl,de
1935  0705  7E          	ld	a,(hl)
1936  0706  81          	add	a,c
1937  0707  32 00 00    	ld	(_s_tile1),a
1938  070A  2A 00 00    	ld	hl,(_sprite)
1939  070D  26 00       	ld	h,0x00
1940  070F  01 00 00    	ld	bc,_col
1941  0712  09          	add	hl,bc
1942  0713  7E          	ld	a,(hl)
1943  0714  32 00 00    	ld	(_s_col1),a
1944  0717  2A 00 00    	ld	hl,(_sprite)
1945  071A  26 00       	ld	h,0x00
1946  071C  01 00 00    	ld	bc,_lin
1947  071F  09          	add	hl,bc
1948  0720  7E          	ld	a,(hl)
1949  0721  32 00 00    	ld	(_s_lin1),a
1950  0724  21 00 00    	ld	hl,_s_lin0
1951  0727  96          	sub	a, (hl)
1952  0728  20 09       	jr	NZ,l_spr_redraw_00109
1953  072A  3A 00 00    	ld	a,(_s_col1)
1954  072D  21 00 00    	ld	hl,_s_col0
1955  0730  96          	sub	a, (hl)
1956  0731  28 52       	jr	Z,l_spr_redraw_00110
1957  0733              l_spr_redraw_00109:
1958  0733  3E 10       	ld	a,0x10
1959  0735  21 00 00    	ld	hl,_s_lin0
1960  0738  96          	sub	a, (hl)
1961  0739  38 0E       	jr	C,l_spr_redraw_00102
1962  073B  F3          	di
1963  073C  3A 00 00    	ld	a,(_s_col0)
1964  073F  F5          	push	af
1965  0740  33          	inc	sp
1966  0741  21 49 08    	ld	hl,0x0849
1967  0744  E5          	push	hl
1968  0745  CD 00 00    	call	_NIRVANAP_fillT_raw_callee
1969  0748  FB          	ei
1970  0749              l_spr_redraw_00102:
1971  0749  3A 00 00    	ld	a,(_sprite)
1972  074C  D6 07       	sub	a,0x07
1973  074E  20 1B       	jr	NZ,l_spr_redraw_00104
1974  0750  3A 00 00    	ld	a,(_player_over_stair)
1975  0753  B7          	or	a, a
1976  0754  28 15       	jr	Z,l_spr_redraw_00104
1977  0756  2A 00 00    	ld	hl,(_sprite)
1978  0759  26 00       	ld	h,0x00
1979  075B  01 00 00    	ld	bc,_lin
1980  075E  09          	add	hl,bc
1981  075F  7E          	ld	a,(hl)
1982  0760  E6 03       	and	a,0x03
1983  0762  20 07       	jr	NZ,l_spr_redraw_00104
1984  0764  21 00 00    	ld	hl,_s_tile1
1985  0767  34          	inc	(hl)
1986  0768  34          	inc	(hl)
1987  0769  34          	inc	(hl)
1988  076A  34          	inc	(hl)
1989  076B              l_spr_redraw_00104:
1990  076B  2A FF FF    	ld	hl,(_s_col1 - 1)
1991  076E  3A 00 00    	ld	a,(_s_lin1)
1992  0771  6F          	ld	l,a
1993  0772  E5          	push	hl
1994  0773  2A FF FF    	ld	hl,(_s_tile1 - 1)
1995  0776  3A 00 00    	ld	a,(_sprite)
1996  0779  6F          	ld	l,a
1997  077A  E5          	push	hl
1998  077B  CD 00 00    	call	_NIRVANAP_spriteT_callee
1999  077E  CD 7A 0C    	call	_spr_back_repaint
2000  0781  2E 01       	ld	l,0x01
2001  0783  18 22       	jr	l_spr_redraw_00113
2002  0785              l_spr_redraw_00110:
2003  0785  3A 00 00    	ld	a,(_s_tile1)
2004  0788  21 00 00    	ld	hl,_s_tile0
2005  078B  96          	sub	a, (hl)
2006  078C  28 17       	jr	Z,l_spr_redraw_00111
2007  078E  2A FF FF    	ld	hl,(_s_col1 - 1)
2008  0791  3A 00 00    	ld	a,(_s_lin1)
2009  0794  6F          	ld	l,a
2010  0795  E5          	push	hl
2011  0796  2A FF FF    	ld	hl,(_s_tile1 - 1)
2012  0799  3A 00 00    	ld	a,(_sprite)
2013  079C  6F          	ld	l,a
2014  079D  E5          	push	hl
2015  079E  CD 00 00    	call	_NIRVANAP_spriteT_callee
2016  07A1  2E 00       	ld	l,0x00
2017  07A3  18 02       	jr	l_spr_redraw_00113
2018  07A5              l_spr_redraw_00111:
2019  07A5  2E 00       	ld	l,0x00
2020  07A7              l_spr_redraw_00113:
2021  07A7  C9          	ret
2022  07A8              	SECTION code_compiler
2023  07A8              ;	---------------------------------
2024  07A8              ; Function spr_destroy
2025  07A8              ; ---------------------------------
2026  07A8              _spr_destroy:
2027  07A8  CD 00 00    	call	___sdcc_enter_ix
2028  07AB  F5          	push	af
2029  07AC  4D          	ld	c, l
2030  07AD  21 00 00    	ld	hl,_spr_count
2031  07B0  35          	dec	(hl)
2032  07B1  3E 00       	ld	a, +((_lin) & 0xFF)
2033  07B3  81          	add	a, c
2034  07B4  DD 77 FE    	ld	(ix-2),a
2035  07B7  3E 00       	ld	a, +((_lin) / 256)
2036  07B9  CE 00       	adc	a,0x00
2037  07BB  DD 77 FF    	ld	(ix-1),a
2038  07BE  E1          	pop	hl
2039  07BF  7E          	ld	a,(hl)
2040  07C0  E5          	push	hl
2041  07C1  32 00 00    	ld	(_s_lin0),a
2042  07C4  3E 00       	ld	a, +((_col) & 0xFF)
2043  07C6  81          	add	a, c
2044  07C7  5F          	ld	e, a
2045  07C8  3E 00       	ld	a, +((_col) / 256)
2046  07CA  CE 00       	adc	a,0x00
2047  07CC  57          	ld	d, a
2048  07CD  1A          	ld	a, (de)
2049  07CE  32 00 00    	ld	(_s_col0),a
2050  07D1  C5          	push	bc
2051  07D2  D5          	push	de
2052  07D3  21 00 00    	ld	hl,0x0000
2053  07D6  E5          	push	hl
2054  07D7  AF          	xor	a, a
2055  07D8  F5          	push	af
2056  07D9  33          	inc	sp
2057  07DA  79          	ld	a, c
2058  07DB  F5          	push	af
2059  07DC  33          	inc	sp
2060  07DD  CD 00 00    	call	_NIRVANAP_spriteT_callee
2061  07E0  CD 7A 0C    	call	_spr_back_repaint
2062  07E3  D1          	pop	de
2063  07E4  C1          	pop	bc
2064  07E5  06 00       	ld	b,0x00
2065  07E7  21 00 00    	ld	hl,_tile
2066  07EA  09          	add	hl, bc
2067  07EB  AF          	xor	a,a
2068  07EC  77          	ld	(hl),a
2069  07ED  E1          	pop	hl
2070  07EE  12          	ld	(de),a
2071  07EF  E5          	push	hl
2072  07F0  36 00       	ld	(hl),0x00
2073  07F2  11 00 00    	ld	de,_class+0
2074  07F5  69          	ld	l,c
2075  07F6  26 00       	ld	h,0x00
2076  07F8  19          	add	hl, de
2077  07F9  36 00       	ld	(hl),0x00
2078  07FB  11 00 00    	ld	de,_state+0
2079  07FE  69          	ld	l,c
2080  07FF  26 00       	ld	h,0x00
2081  0801  19          	add	hl, de
2082  0802  36 00       	ld	(hl),0x00
2083  0804  11 00 00    	ld	de,_state_a+0
2084  0807  69          	ld	l,c
2085  0808  26 00       	ld	h,0x00
2086  080A  19          	add	hl, de
2087  080B  F1          	pop	af
2088  080C  36 00       	ld	(hl),0x00
2089  080E  DD E1       	pop	ix
2090  0810  C9          	ret
2091  0811              	SECTION code_compiler
2092  0811              ;	---------------------------------
2093  0811              ; Function spr_tile
2094  0811              ; ---------------------------------
2095  0811              _spr_tile:
2096  0811  45          	ld	b,l
2097  0812  11 00 00    	ld	de,_class+0
2098  0815  26 00       	ld	h,0x00
2099  0817  19          	add	hl, de
2100  0818  7E          	ld	a, (hl)
2101  0819  FE 01       	cp	a,0x01
2102  081B  28 12       	jr	Z,l_spr_tile_00101
2103  081D  FE 02       	cp	a,0x02
2104  081F  28 1D       	jr	Z,l_spr_tile_00102
2105  0821  FE 03       	cp	a,0x03
2106  0823  28 28       	jr	Z,l_spr_tile_00103
2107  0825  FE 04       	cp	a,0x04
2108  0827  28 34       	jr	Z,l_spr_tile_00104
2109  0829  D6 05       	sub	a,0x05
2110  082B  28 3F       	jr	Z,l_spr_tile_00105
2111  082D  18 4D       	jr	l_spr_tile_00106
2112  082F              l_spr_tile_00101:
2113  082F  AF          	xor	a, a
2114  0830  48          	ld	c,b
2115  0831  47          	ld	b,a
2116  0832  C5          	push	bc
2117  0833  3E 84       	ld	a,0x84
2118  0835  F5          	push	af
2119  0836  33          	inc	sp
2120  0837  CD 7F 08    	call	_spr_tile_dir
2121  083A  F1          	pop	af
2122  083B  33          	inc	sp
2123  083C  18 40       	jr	l_spr_tile_00107
2124  083E              l_spr_tile_00102:
2125  083E  AF          	xor	a, a
2126  083F  48          	ld	c,b
2127  0840  47          	ld	b,a
2128  0841  C5          	push	bc
2129  0842  3E 88       	ld	a,0x88
2130  0844  F5          	push	af
2131  0845  33          	inc	sp
2132  0846  CD 7F 08    	call	_spr_tile_dir
2133  0849  F1          	pop	af
2134  084A  33          	inc	sp
2135  084B  18 31       	jr	l_spr_tile_00107
2136  084D              l_spr_tile_00103:
2137  084D  3E 02       	ld	a,0x02
2138  084F  48          	ld	c,b
2139  0850  47          	ld	b,a
2140  0851  C5          	push	bc
2141  0852  3E 8C       	ld	a,0x8c
2142  0854  F5          	push	af
2143  0855  33          	inc	sp
2144  0856  CD 7F 08    	call	_spr_tile_dir
2145  0859  F1          	pop	af
2146  085A  33          	inc	sp
2147  085B  18 21       	jr	l_spr_tile_00107
2148  085D              l_spr_tile_00104:
2149  085D  AF          	xor	a, a
2150  085E  48          	ld	c,b
2151  085F  47          	ld	b,a
2152  0860  C5          	push	bc
2153  0861  3E 90       	ld	a,0x90
2154  0863  F5          	push	af
2155  0864  33          	inc	sp
2156  0865  CD 7F 08    	call	_spr_tile_dir
2157  0868  F1          	pop	af
2158  0869  33          	inc	sp
2159  086A  18 12       	jr	l_spr_tile_00107
2160  086C              l_spr_tile_00105:
2161  086C  3E 04       	ld	a,0x04
2162  086E  48          	ld	c,b
2163  086F  47          	ld	b,a
2164  0870  C5          	push	bc
2165  0871  3E 94       	ld	a,0x94
2166  0873  F5          	push	af
2167  0874  33          	inc	sp
2168  0875  CD 7F 08    	call	_spr_tile_dir
2169  0878  F1          	pop	af
2170  0879  33          	inc	sp
2171  087A  18 02       	jr	l_spr_tile_00107
2172  087C              l_spr_tile_00106:
2173  087C  2E 00       	ld	l,0x00
2174  087E              l_spr_tile_00107:
2175  087E  C9          	ret
2176  087F              	SECTION code_compiler
2177  087F              ;	---------------------------------
2178  087F              ; Function spr_tile_dir
2179  087F              ; ---------------------------------
2180  087F              _spr_tile_dir:
2181  087F  CD 00 00    	call	___sdcc_enter_ix
2182  0882  3E 00       	ld	a, +((_state) & 0xFF)
2183  0884  DD 86 05    	add	a,(ix+5)
2184  0887  4F          	ld	c, a
2185  0888  3E 00       	ld	a, +((_state) / 256)
2186  088A  CE 00       	adc	a,0x00
2187  088C  47          	ld	b, a
2188  088D  0A          	ld	a, (bc)
2189  088E  4F          	ld	c,a
2190  088F  CB 57       	bit	2,a
2191  0891  28 05       	jr	Z,l_spr_tile_dir_00102
2192  0893  DD 6E 04    	ld	l,(ix+4)
2193  0896  18 2D       	jr	l_spr_tile_dir_00109
2194  0898              l_spr_tile_dir_00102:
2195  0898  DD 7E 04    	ld	a,(ix+4)
2196  089B  DD 86 06    	add	a,(ix+6)
2197  089E  47          	ld	b, a
2198  089F  CB 59       	bit	3, c
2199  08A1  28 03       	jr	Z,l_spr_tile_dir_00104
2200  08A3  68          	ld	l, b
2201  08A4  18 1F       	jr	l_spr_tile_dir_00109
2202  08A6              l_spr_tile_dir_00104:
2203  08A6  3E 00       	ld	a, +((_state_a) & 0xFF)
2204  08A8  DD 86 05    	add	a,(ix+5)
2205  08AB  5F          	ld	e, a
2206  08AC  3E 00       	ld	a, +((_state_a) / 256)
2207  08AE  CE 00       	adc	a,0x00
2208  08B0  57          	ld	d, a
2209  08B1  1A          	ld	a, (de)
2210  08B2  CB 67       	bit	4, a
2211  08B4  28 05       	jr	Z,l_spr_tile_dir_00106
2212  08B6  DD 6E 04    	ld	l,(ix+4)
2213  08B9  18 0A       	jr	l_spr_tile_dir_00109
2214  08BB              l_spr_tile_dir_00106:
2215  08BB  CB 5F       	bit	3, a
2216  08BD  28 03       	jr	Z,l_spr_tile_dir_00108
2217  08BF  68          	ld	l, b
2218  08C0  18 03       	jr	l_spr_tile_dir_00109
2219  08C2              l_spr_tile_dir_00108:
2220  08C2  DD 6E 04    	ld	l,(ix+4)
2221  08C5              l_spr_tile_dir_00109:
2222  08C5  DD E1       	pop	ix
2223  08C7  C9          	ret
2224  08C8              	SECTION code_compiler
2225  08C8              ;	---------------------------------
2226  08C8              ; Function spr_draw_map_background
2227  08C8              ; ---------------------------------
2228  08C8              _spr_draw_map_background:
2229  08C8  76          	halt
2230  08C9  21 10 00    	ld	hl,0x0010
2231  08CC  22 00 00    	ld	(_index1),hl
2232  08CF  21 00 00    	ld	hl,_s_lin1
2233  08D2  36 00       	ld	(hl),0x00
2234  08D4  21 00 00    	ld	hl,_s_col1
2235  08D7  36 02       	ld	(hl),0x02
2236  08D9  21 00 00    	ld	hl,_spr_count
2237  08DC  36 00       	ld	(hl),0x00
2238  08DE              l_spr_draw_map_background_00117:
2239  08DE  21 00 00    	ld	hl,_index1
2240  08E1  7E          	ld	a, (hl)
2241  08E2  D6 A0       	sub	a,0xa0
2242  08E4  23          	inc	hl
2243  08E5  7E          	ld	a, (hl)
2244  08E6  DE 00       	sbc	a,0x00
2245  08E8  D2 42 0A    	jp	NC, l_spr_draw_map_background_00120
2246  08EB  2B          	dec	hl
2247  08EC  7E          	ld	a, (hl)
2248  08ED  E6 0F       	and	a,0x0f
2249  08EF  20 0C       	jr	NZ,l_spr_draw_map_background_00102
2250  08F1  21 00 00    	ld	hl,_s_lin1
2251  08F4  7E          	ld	a, (hl)
2252  08F5  C6 10       	add	a,0x10
2253  08F7  77          	ld	(hl), a
2254  08F8  21 00 00    	ld	hl,_s_col1
2255  08FB  36 00       	ld	(hl),0x00
2256  08FD              l_spr_draw_map_background_00102:
2257  08FD  01 00 00    	ld	bc,_scr_map
2258  0900  2A 00 00    	ld	hl,(_index1)
2259  0903  09          	add	hl,bc
2260  0904  7E          	ld	a,(hl)
2261  0905  47          	ld	b,a
2262  0906  D6 54       	sub	a,0x54
2263  0908  3E 00       	ld	a,0x00
2264  090A  17          	rla
2265  090B  B7          	or	a, a
2266  090C  28 11       	jr	Z,l_spr_draw_map_background_00115
2267  090E  3A 00 00    	ld	a,(_s_col1)
2268  0911  F5          	push	af
2269  0912  33          	inc	sp
2270  0913  3A 00 00    	ld	a,(_s_lin1)
2271  0916  48          	ld	c,b
2272  0917  47          	ld	b,a
2273  0918  C5          	push	bc
2274  0919  CD 00 00    	call	_NIRVANAP_drawT_callee
2275  091C  C3 31 0A    	jp	l_spr_draw_map_background_00116
2276  091F              l_spr_draw_map_background_00115:
2277  091F  B7          	or	a, a
2278  0920  C2 28 0A    	jp	NZ, l_spr_draw_map_background_00113
2279  0923  3E 5D       	ld	a,0x5d
2280  0925  90          	sub	a, b
2281  0926  DA 28 0A    	jp	C, l_spr_draw_map_background_00113
2282  0929  78          	ld	a, b
2283  092A  C6 AC       	add	a,0xac
2284  092C  4F          	ld	c, a
2285  092D  06 00       	ld	b,0x00
2286  092F  21 36 09    	ld	hl,l_spr_draw_map_background_00148
2287  0932  09          	add	hl, bc
2288  0933  09          	add	hl, bc
2289  0934  09          	add	hl, bc
2290  0935  E9          	jp	(hl)
2291  0936              l_spr_draw_map_background_00148:
2292  0936  C3 6A 09    	jp	l_spr_draw_map_background_00104
2293  0939  C3 54 09    	jp	l_spr_draw_map_background_00103
2294  093C  C3 96 09    	jp	l_spr_draw_map_background_00106
2295  093F  C3 80 09    	jp	l_spr_draw_map_background_00105
2296  0942  C3 C1 09    	jp	l_spr_draw_map_background_00108
2297  0945  C3 AC 09    	jp	l_spr_draw_map_background_00107
2298  0948  C3 EB 09    	jp	l_spr_draw_map_background_00110
2299  094B  C3 D6 09    	jp	l_spr_draw_map_background_00109
2300  094E  C3 15 0A    	jp	l_spr_draw_map_background_00112
2301  0951  C3 00 0A    	jp	l_spr_draw_map_background_00111
2302  0954              l_spr_draw_map_background_00103:
2303  0954  3A 00 00    	ld	a,(_s_col1)
2304  0957  21 01 01    	ld	hl,0x0101
2305  095A  E5          	push	hl
2306  095B  F5          	push	af
2307  095C  33          	inc	sp
2308  095D  3A 00 00    	ld	a,(_s_lin1)
2309  0960  F5          	push	af
2310  0961  33          	inc	sp
2311  0962  CD 00 00    	call	_enemy_init
2312  0965  F1          	pop	af
2313  0966  F1          	pop	af
2314  0967  C3 28 0A    	jp	l_spr_draw_map_background_00113
2315  096A              l_spr_draw_map_background_00104:
2316  096A  3A 00 00    	ld	a,(_s_col1)
2317  096D  21 01 FF    	ld	hl,0xff01
2318  0970  E5          	push	hl
2319  0971  F5          	push	af
2320  0972  33          	inc	sp
2321  0973  3A 00 00    	ld	a,(_s_lin1)
2322  0976  F5          	push	af
2323  0977  33          	inc	sp
2324  0978  CD 00 00    	call	_enemy_init
2325  097B  F1          	pop	af
2326  097C  F1          	pop	af
2327  097D  C3 28 0A    	jp	l_spr_draw_map_background_00113
2328  0980              l_spr_draw_map_background_00105:
2329  0980  3A 00 00    	ld	a,(_s_col1)
2330  0983  21 02 01    	ld	hl,0x0102
2331  0986  E5          	push	hl
2332  0987  F5          	push	af
2333  0988  33          	inc	sp
2334  0989  3A 00 00    	ld	a,(_s_lin1)
2335  098C  F5          	push	af
2336  098D  33          	inc	sp
2337  098E  CD 00 00    	call	_enemy_init
2338  0991  F1          	pop	af
2339  0992  F1          	pop	af
2340  0993  C3 28 0A    	jp	l_spr_draw_map_background_00113
2341  0996              l_spr_draw_map_background_00106:
2342  0996  3A 00 00    	ld	a,(_s_col1)
2343  0999  21 02 FF    	ld	hl,0xff02
2344  099C  E5          	push	hl
2345  099D  F5          	push	af
2346  099E  33          	inc	sp
2347  099F  3A 00 00    	ld	a,(_s_lin1)
2348  09A2  F5          	push	af
2349  09A3  33          	inc	sp
2350  09A4  CD 00 00    	call	_enemy_init
2351  09A7  F1          	pop	af
2352  09A8  F1          	pop	af
2353  09A9  C3 28 0A    	jp	l_spr_draw_map_background_00113
2354  09AC              l_spr_draw_map_background_00107:
2355  09AC  3A 00 00    	ld	a,(_s_col1)
2356  09AF  21 03 01    	ld	hl,0x0103
2357  09B2  E5          	push	hl
2358  09B3  F5          	push	af
2359  09B4  33          	inc	sp
2360  09B5  3A 00 00    	ld	a,(_s_lin1)
2361  09B8  F5          	push	af
2362  09B9  33          	inc	sp
2363  09BA  CD 00 00    	call	_enemy_init
2364  09BD  F1          	pop	af
2365  09BE  F1          	pop	af
2366  09BF  18 67       	jr	l_spr_draw_map_background_00113
2367  09C1              l_spr_draw_map_background_00108:
2368  09C1  3A 00 00    	ld	a,(_s_col1)
2369  09C4  21 03 FF    	ld	hl,0xff03
2370  09C7  E5          	push	hl
2371  09C8  F5          	push	af
2372  09C9  33          	inc	sp
2373  09CA  3A 00 00    	ld	a,(_s_lin1)
2374  09CD  F5          	push	af
2375  09CE  33          	inc	sp
2376  09CF  CD 00 00    	call	_enemy_init
2377  09D2  F1          	pop	af
2378  09D3  F1          	pop	af
2379  09D4  18 52       	jr	l_spr_draw_map_background_00113
2380  09D6              l_spr_draw_map_background_00109:
2381  09D6  3A 00 00    	ld	a,(_s_col1)
2382  09D9  21 04 01    	ld	hl,0x0104
2383  09DC  E5          	push	hl
2384  09DD  F5          	push	af
2385  09DE  33          	inc	sp
2386  09DF  3A 00 00    	ld	a,(_s_lin1)
2387  09E2  F5          	push	af
2388  09E3  33          	inc	sp
2389  09E4  CD 00 00    	call	_enemy_init
2390  09E7  F1          	pop	af
2391  09E8  F1          	pop	af
2392  09E9  18 3D       	jr	l_spr_draw_map_background_00113
2393  09EB              l_spr_draw_map_background_00110:
2394  09EB  3A 00 00    	ld	a,(_s_col1)
2395  09EE  21 04 FF    	ld	hl,0xff04
2396  09F1  E5          	push	hl
2397  09F2  F5          	push	af
2398  09F3  33          	inc	sp
2399  09F4  3A 00 00    	ld	a,(_s_lin1)
2400  09F7  F5          	push	af
2401  09F8  33          	inc	sp
2402  09F9  CD 00 00    	call	_enemy_init
2403  09FC  F1          	pop	af
2404  09FD  F1          	pop	af
2405  09FE  18 28       	jr	l_spr_draw_map_background_00113
2406  0A00              l_spr_draw_map_background_00111:
2407  0A00  3A 00 00    	ld	a,(_s_col1)
2408  0A03  21 05 01    	ld	hl,0x0105
2409  0A06  E5          	push	hl
2410  0A07  F5          	push	af
2411  0A08  33          	inc	sp
2412  0A09  3A 00 00    	ld	a,(_s_lin1)
2413  0A0C  F5          	push	af
2414  0A0D  33          	inc	sp
2415  0A0E  CD 00 00    	call	_enemy_init
2416  0A11  F1          	pop	af
2417  0A12  F1          	pop	af
2418  0A13  18 13       	jr	l_spr_draw_map_background_00113
2419  0A15              l_spr_draw_map_background_00112:
2420  0A15  3A 00 00    	ld	a,(_s_col1)
2421  0A18  21 05 FF    	ld	hl,0xff05
2422  0A1B  E5          	push	hl
2423  0A1C  F5          	push	af
2424  0A1D  33          	inc	sp
2425  0A1E  3A 00 00    	ld	a,(_s_lin1)
2426  0A21  F5          	push	af
2427  0A22  33          	inc	sp
2428  0A23  CD 00 00    	call	_enemy_init
2429  0A26  F1          	pop	af
2430  0A27  F1          	pop	af
2431  0A28              l_spr_draw_map_background_00113:
2432  0A28  01 00 00    	ld	bc,_scr_map
2433  0A2B  2A 00 00    	ld	hl,(_index1)
2434  0A2E  09          	add	hl,bc
2435  0A2F  AF          	xor	a,a
2436  0A30  77          	ld	(hl),a
2437  0A31              l_spr_draw_map_background_00116:
2438  0A31  21 00 00    	ld	hl,_s_col1
2439  0A34  34          	inc	(hl)
2440  0A35  34          	inc	(hl)
2441  0A36  21 00 00    	ld	hl,_index1
2442  0A39  34          	inc	(hl)
2443  0A3A  C2 DE 08    	jp	NZ,l_spr_draw_map_background_00117
2444  0A3D  23          	inc	hl
2445  0A3E  34          	inc	(hl)
2446  0A3F  C3 DE 08    	jp	l_spr_draw_map_background_00117
2447  0A42              l_spr_draw_map_background_00120:
2448  0A42  C9          	ret
2449  0A43              	SECTION code_compiler
2450  0A43              ;	---------------------------------
2451  0A43              ; Function spr_draw_clear
2452  0A43              ; ---------------------------------
2453  0A43              _spr_draw_clear:
2454  0A43  F3          	di
2455  0A44  2E 00       	ld	l,0x00
2456  0A46  CD 00 00    	call	_zx_cls_fastcall
2457  0A49  21 00 00    	ld	hl,_s_lin1
2458  0A4C  36 10       	ld	(hl),0x10
2459  0A4E              l_spr_draw_clear_00105:
2460  0A4E  21 00 00    	ld	hl,_s_col1
2461  0A51  36 00       	ld	(hl),0x00
2462  0A53              l_spr_draw_clear_00103:
2463  0A53  2A FF FF    	ld	hl,(_s_col1 - 1)
2464  0A56  3A 00 00    	ld	a,(_s_lin1)
2465  0A59  6F          	ld	l,a
2466  0A5A  E5          	push	hl
2467  0A5B  AF          	xor	a, a
2468  0A5C  F5          	push	af
2469  0A5D  33          	inc	sp
2470  0A5E  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2471  0A61  21 00 00    	ld	hl,_s_col1
2472  0A64  7E          	ld	a,(hl)
2473  0A65  C6 02       	add	a,0x02
2474  0A67  77          	ld	(hl),a
2475  0A68  D6 20       	sub	a,0x20
2476  0A6A  38 E7       	jr	C,l_spr_draw_clear_00103
2477  0A6C  21 00 00    	ld	hl,_s_lin1
2478  0A6F  7E          	ld	a, (hl)
2479  0A70  C6 10       	add	a,0x10
2480  0A72  77          	ld	(hl), a
2481  0A73  3E A2       	ld	a,0xa2
2482  0A75  96          	sub	a, (hl)
2483  0A76  30 D6       	jr	NC,l_spr_draw_clear_00105
2484  0A78  FB          	ei
2485  0A79  C9          	ret
2486  0A7A              	SECTION code_compiler
2487  0A7A              ;	---------------------------------
2488  0A7A              ; Function spr_brick_anim
2489  0A7A              ; ---------------------------------
2490  0A7A              _spr_brick_anim:
2491  0A7A  CD 00 00    	call	___sdcc_enter_ix
2492  0A7D  F5          	push	af
2493  0A7E  DD 75 FF    	ld	(ix-1),l
2494  0A81  21 00 00    	ld	hl,_player_hit_col
2495  0A84  56          	ld	d, (hl)
2496  0A85  21 00 00    	ld	hl,_player_hit_lin
2497  0A88  5E          	ld	e, (hl)
2498  0A89  D5          	push	de
2499  0A8A  D5          	push	de
2500  0A8B  CD 00 00    	call	_spr_calc_index
2501  0A8E  F1          	pop	af
2502  0A8F  D1          	pop	de
2503  0A90  22 00 00    	ld	(_index1),hl
2504  0A93  01 F0 FF    	ld	bc,0xfff0
2505  0A96  09          	add	hl,bc
2506  0A97  01 00 00    	ld	bc,_scr_map
2507  0A9A  09          	add	hl,bc
2508  0A9B  7E          	ld	a, (hl)
2509  0A9C  DD 77 FE    	ld	(ix-2),a
2510  0A9F  01 00 00    	ld	bc,_scr_map
2511  0AA2  2A 00 00    	ld	hl,(_index1)
2512  0AA5  09          	add	hl,bc
2513  0AA6  4D          	ld	c,l
2514  0AA7  46          	ld	b, (hl)
2515  0AA8  DD 7E FF    	ld	a,(ix-1)
2516  0AAB  B7          	or	a, a
2517  0AAC  28 08       	jr	Z,l_spr_brick_anim_00102
2518  0AAE  7B          	ld	a, e
2519  0AAF  C6 F6       	add	a,0xf6
2520  0AB1  32 00 00    	ld	(_tmp),a
2521  0AB4  18 06       	jr	l_spr_brick_anim_00103
2522  0AB6              l_spr_brick_anim_00102:
2523  0AB6  7B          	ld	a, e
2524  0AB7  C6 F8       	add	a,0xf8
2525  0AB9  32 00 00    	ld	(_tmp),a
2526  0ABC              l_spr_brick_anim_00103:
2527  0ABC  DD 7E FF    	ld	a,(ix-1)
2528  0ABF  B7          	or	a, a
2529  0AC0  28 23       	jr	Z,l_spr_brick_anim_00105
2530  0AC2  D5          	push	de
2531  0AC3  D5          	push	de
2532  0AC4  33          	inc	sp
2533  0AC5  53          	ld	d, e
2534  0AC6  1E 49       	ld	e,0x49
2535  0AC8  D5          	push	de
2536  0AC9  CD 00 00    	call	_NIRVANAP_fillC_callee
2537  0ACC  D1          	pop	de
2538  0ACD  62          	ld	h, d
2539  0ACE  24          	inc	h
2540  0ACF  D5          	push	de
2541  0AD0  E5          	push	hl
2542  0AD1  33          	inc	sp
2543  0AD2  53          	ld	d, e
2544  0AD3  1E 49       	ld	e,0x49
2545  0AD5  D5          	push	de
2546  0AD6  CD 00 00    	call	_NIRVANAP_fillC_callee
2547  0AD9  33          	inc	sp
2548  0ADA  3A 00 00    	ld	a,(_tmp)
2549  0ADD  48          	ld	c,b
2550  0ADE  47          	ld	b,a
2551  0ADF  C5          	push	bc
2552  0AE0  CD 00 00    	call	_NIRVANAP_drawT_callee
2553  0AE3  18 1E       	jr	l_spr_brick_anim_00107
2554  0AE5              l_spr_brick_anim_00105:
2555  0AE5  3A 00 00    	ld	a,(_tmp)
2556  0AE8  C6 F0       	add	a,0xf0
2557  0AEA  C5          	push	bc
2558  0AEB  D5          	push	de
2559  0AEC  5F          	ld	e,a
2560  0AED  D5          	push	de
2561  0AEE  DD 7E FE    	ld	a,(ix-2)
2562  0AF1  F5          	push	af
2563  0AF2  33          	inc	sp
2564  0AF3  CD 00 00    	call	_NIRVANAP_drawT_callee
2565  0AF6  D1          	pop	de
2566  0AF7  C1          	pop	bc
2567  0AF8  D5          	push	de
2568  0AF9  33          	inc	sp
2569  0AFA  3A 00 00    	ld	a,(_tmp)
2570  0AFD  48          	ld	c,b
2571  0AFE  47          	ld	b,a
2572  0AFF  C5          	push	bc
2573  0B00  CD 00 00    	call	_NIRVANAP_drawT_callee
2574  0B03              l_spr_brick_anim_00107:
2575  0B03  F1          	pop	af
2576  0B04  DD E1       	pop	ix
2577  0B06  C9          	ret
2578  0B07              	SECTION code_compiler
2579  0B07              ;	---------------------------------
2580  0B07              ; Function spr_draw_index
2581  0B07              ; ---------------------------------
2582  0B07              _spr_draw_index:
2583  0B07  CD 00 00    	call	___sdcc_enter_ix
2584  0B0A  DD 7E 04    	ld	a,(ix+4)
2585  0B0D  E6 1F       	and	a,0x1f
2586  0B0F  32 00 00    	ld	(_s_col1),a
2587  0B12  DD 4E 04    	ld	c,(ix+4)
2588  0B15  DD 5E 05    	ld	e,(ix+5)
2589  0B18  06 05       	ld	b,0x05
2590  0B1A  79          	ld	a,c
2591  0B1B              l_spr_draw_index_00103:
2592  0B1B  CB 3B       	srl	e
2593  0B1D  1F          	rra
2594  0B1E  10 FB       	djnz	l_spr_draw_index_00103
2595  0B20  21 00 00    	ld	hl,_s_lin1
2596  0B23  77          	ld	(hl),a
2597  0B24  07          	rlca
2598  0B25  07          	rlca
2599  0B26  07          	rlca
2600  0B27  E6 F8       	and	a,0xf8
2601  0B29  77          	ld	(hl), a
2602  0B2A  3E 00       	ld	a, +((_scr_map) & 0xFF)
2603  0B2C  DD 86 04    	add	a,(ix+4)
2604  0B2F  4F          	ld	c, a
2605  0B30  3E 00       	ld	a, +((_scr_map) / 256)
2606  0B32  DD 8E 05    	adc	a,(ix+5)
2607  0B35  47          	ld	b, a
2608  0B36  0A          	ld	a, (bc)
2609  0B37  47          	ld	b, a
2610  0B38  3A 00 00    	ld	a,(_s_col1)
2611  0B3B  F5          	push	af
2612  0B3C  33          	inc	sp
2613  0B3D  3A 00 00    	ld	a,(_s_lin1)
2614  0B40  48          	ld	c,b
2615  0B41  47          	ld	b,a
2616  0B42  C5          	push	bc
2617  0B43  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2618  0B46  DD E1       	pop	ix
2619  0B48  C9          	ret
2620  0B49              	SECTION code_compiler
2621  0B49              ;	---------------------------------
2622  0B49              ; Function spr_draw_row
2623  0B49              ; ---------------------------------
2624  0B49              _spr_draw_row:
2625  0B49  CD 00 00    	call	___sdcc_enter_ix
2626  0B4C  3B          	dec	sp
2627  0B4D  F3          	di
2628  0B4E  21 00 00    	ld	hl,_tmp
2629  0B51  36 00       	ld	(hl),0x00
2630  0B53  DD 7E 04    	ld	a,(ix+4)
2631  0B56  07          	rlca
2632  0B57  07          	rlca
2633  0B58  07          	rlca
2634  0B59  E6 F8       	and	a,0xf8
2635  0B5B  DD 77 FF    	ld	(ix-1),a
2636  0B5E              l_spr_draw_row_00101:
2637  0B5E  21 00 00    	ld	hl,_tmp
2638  0B61  7E          	ld	a, (hl)
2639  0B62  D6 20       	sub	a,0x20
2640  0B64  30 38       	jr	NC,l_spr_draw_row_00103
2641  0B66  DD 4E 04    	ld	c,(ix+4)
2642  0B69  3E 00       	ld	a,0x00
2643  0B6B  CB 21       	sla	c
2644  0B6D  17          	rla
2645  0B6E  CB 21       	sla	c
2646  0B70  17          	rla
2647  0B71  CB 21       	sla	c
2648  0B73  17          	rla
2649  0B74  CB 21       	sla	c
2650  0B76  17          	rla
2651  0B77  CB 21       	sla	c
2652  0B79  17          	rla
2653  0B7A  47          	ld	b,a
2654  0B7B  5E          	ld	e, (hl)
2655  0B7C  16 00       	ld	d,0x00
2656  0B7E  79          	ld	a, c
2657  0B7F  83          	add	a, e
2658  0B80  21 00 00    	ld	hl,_index1
2659  0B83  77          	ld	(hl), a
2660  0B84  78          	ld	a, b
2661  0B85  8A          	adc	a, d
2662  0B86  23          	inc	hl
2663  0B87  77          	ld	(hl), a
2664  0B88  2A FF FF    	ld	hl,(_tmp-1)
2665  0B8B  DD 6E FF    	ld	l,(ix-1)
2666  0B8E  3A 00 00    	ld	a,(_game_brick_tile)
2667  0B91  E5          	push	hl
2668  0B92  F5          	push	af
2669  0B93  33          	inc	sp
2670  0B94  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2671  0B97  21 00 00    	ld	hl,_tmp
2672  0B9A  34          	inc	(hl)
2673  0B9B  34          	inc	(hl)
2674  0B9C  18 C0       	jr	l_spr_draw_row_00101
2675  0B9E              l_spr_draw_row_00103:
2676  0B9E  FB          	ei
2677  0B9F  33          	inc	sp
2678  0BA0  DD E1       	pop	ix
2679  0BA2  C9          	ret
2680  0BA3              	SECTION code_compiler
2681  0BA3              ;	---------------------------------
2682  0BA3              ; Function spr_calc_hor
2683  0BA3              ; ---------------------------------
2684  0BA3              _spr_calc_hor:
2685  0BA3  CD 00 00    	call	___sdcc_enter_ix
2686  0BA6  3E 00       	ld	a, +((_col) & 0xFF)
2687  0BA8  DD 86 04    	add	a,(ix+4)
2688  0BAB  4F          	ld	c, a
2689  0BAC  3E 00       	ld	a, +((_col) / 256)
2690  0BAE  CE 00       	adc	a,0x00
2691  0BB0  47          	ld	b, a
2692  0BB1  0A          	ld	a, (bc)
2693  0BB2  5F          	ld	e, a
2694  0BB3  3E 00       	ld	a, +((_sprite_frames) & 0xFF)
2695  0BB5  DD 86 04    	add	a,(ix+4)
2696  0BB8  4F          	ld	c, a
2697  0BB9  3E 00       	ld	a, +((_sprite_frames) / 256)
2698  0BBB  CE 00       	adc	a,0x00
2699  0BBD  47          	ld	b, a
2700  0BBE  0A          	ld	a, (bc)
2701  0BBF  67          	ld	h, a
2702  0BC0  2E 00       	ld	l,0x00
2703  0BC2  55          	ld	d, l
2704  0BC3  06 08       	ld	b,0x08
2705  0BC5              l_spr_calc_hor_00103:
2706  0BC5  29          	add	hl, hl
2707  0BC6  30 01       	jr	NC,l_spr_calc_hor_00104
2708  0BC8  19          	add	hl, de
2709  0BC9              l_spr_calc_hor_00104:
2710  0BC9  10 FA       	djnz	l_spr_calc_hor_00103
2711  0BCB  DD E1       	pop	ix
2712  0BCD  C9          	ret
2713  0BCE              	SECTION code_compiler
2714  0BCE              ;	---------------------------------
2715  0BCE              ; Function spr_collision_check
2716  0BCE              ; ---------------------------------
2717  0BCE              _spr_collision_check:
2718  0BCE  CD 00 00    	call	___sdcc_enter_ix
2719  0BD1  3E 00       	ld	a, +((_class) & 0xFF)
2720  0BD3  DD 86 05    	add	a,(ix+5)
2721  0BD6  4F          	ld	c, a
2722  0BD7  3E 00       	ld	a, +((_class) / 256)
2723  0BD9  CE 00       	adc	a,0x00
2724  0BDB  47          	ld	b, a
2725  0BDC  0A          	ld	a, (bc)
2726  0BDD  B7          	or	a, a
2727  0BDE  28 10       	jr	Z,l_spr_collision_check_00101
2728  0BE0  3E 00       	ld	a, +((_state) & 0xFF)
2729  0BE2  DD 86 05    	add	a,(ix+5)
2730  0BE5  4F          	ld	c, a
2731  0BE6  3E 00       	ld	a, +((_state) / 256)
2732  0BE8  CE 00       	adc	a,0x00
2733  0BEA  47          	ld	b, a
2734  0BEB  0A          	ld	a, (bc)
2735  0BEC  CB 6F       	bit	5, a
2736  0BEE  28 04       	jr	Z,l_spr_collision_check_00102
2737  0BF0              l_spr_collision_check_00101:
2738  0BF0  2E 00       	ld	l,0x00
2739  0BF2  18 6D       	jr	l_spr_collision_check_00109
2740  0BF4              l_spr_collision_check_00102:
2741  0BF4  01 00 00    	ld	bc,_lin+0
2742  0BF7  79          	ld	a, c
2743  0BF8  DD 86 05    	add	a,(ix+5)
2744  0BFB  5F          	ld	e, a
2745  0BFC  78          	ld	a, b
2746  0BFD  CE 00       	adc	a,0x00
2747  0BFF  57          	ld	d, a
2748  0C00  1A          	ld	a, (de)
2749  0C01  5F          	ld	e, a
2750  0C02  16 00       	ld	d,0x00
2751  0C04  79          	ld	a, c
2752  0C05  DD 86 04    	add	a,(ix+4)
2753  0C08  4F          	ld	c, a
2754  0C09  78          	ld	a, b
2755  0C0A  CE 00       	adc	a,0x00
2756  0C0C  47          	ld	b, a
2757  0C0D  0A          	ld	a, (bc)
2758  0C0E  4F          	ld	c, a
2759  0C0F  AF          	xor	a,a
2760  0C10  47          	ld	b,a
2761  0C11  EB          	ex	de,hl
2762  0C12  ED 42       	sbc	hl,bc
2763  0C14  CD 00 00    	call	_abs_fastcall
2764  0C17  22 00 00    	ld	(_tmp_ui),hl
2765  0C1A  21 01 00    	ld	hl,_tmp_ui + 1
2766  0C1D  DD 7E 06    	ld	a,(ix+6)
2767  0C20  06 00       	ld	b,0x00
2768  0C22  2B          	dec	hl
2769  0C23  96          	sub	a, (hl)
2770  0C24  78          	ld	a, b
2771  0C25  23          	inc	hl
2772  0C26  9E          	sbc	a, (hl)
2773  0C27  30 04       	jr	NC,l_spr_collision_check_00105
2774  0C29  2E 00       	ld	l,0x00
2775  0C2B  18 34       	jr	l_spr_collision_check_00109
2776  0C2D              l_spr_collision_check_00105:
2777  0C2D  DD 7E 04    	ld	a,(ix+4)
2778  0C30  F5          	push	af
2779  0C31  33          	inc	sp
2780  0C32  CD A3 0B    	call	_spr_calc_hor
2781  0C35  33          	inc	sp
2782  0C36  4D          	ld	c, l
2783  0C37  C5          	push	bc
2784  0C38  DD 7E 05    	ld	a,(ix+5)
2785  0C3B  F5          	push	af
2786  0C3C  33          	inc	sp
2787  0C3D  CD A3 0B    	call	_spr_calc_hor
2788  0C40  33          	inc	sp
2789  0C41  C1          	pop	bc
2790  0C42  5D          	ld	e,l
2791  0C43  69          	ld	l, c
2792  0C44  AF          	xor	a,a
2793  0C45  67          	ld	h,a
2794  0C46  57          	ld	d,a
2795  0C47  ED 52       	sbc	hl,de
2796  0C49  CD 00 00    	call	_abs_fastcall
2797  0C4C  22 00 00    	ld	(_tmp_ui),hl
2798  0C4F  3E 03       	ld	a,0x03
2799  0C51  21 00 00    	ld	hl,_tmp_ui
2800  0C54  BE          	cp	a, (hl)
2801  0C55  3E 00       	ld	a,0x00
2802  0C57  23          	inc	hl
2803  0C58  9E          	sbc	a, (hl)
2804  0C59  30 04       	jr	NC,l_spr_collision_check_00107
2805  0C5B  2E 00       	ld	l,0x00
2806  0C5D  18 02       	jr	l_spr_collision_check_00109
2807  0C5F              l_spr_collision_check_00107:
2808  0C5F  2E 01       	ld	l,0x01
2809  0C61              l_spr_collision_check_00109:
2810  0C61  DD E1       	pop	ix
2811  0C63  C9          	ret
2812  0C64              	SECTION code_compiler
2813  0C64              ;	---------------------------------
2814  0C64              ; Function spr_kill_all
2815  0C64              ; ---------------------------------
2816  0C64              _spr_kill_all:
2817  0C64  21 00 00    	ld	hl,_sprite
2818  0C67  36 00       	ld	(hl),0x00
2819  0C69              l_spr_kill_all_00102:
2820  0C69  2A 00 00    	ld	hl,(_sprite)
2821  0C6C  CD A8 07    	call	_spr_destroy
2822  0C6F  21 00 00    	ld	hl,_sprite
2823  0C72  7E          	ld	a,(hl)
2824  0C73  3C          	inc	a
2825  0C74  77          	ld	(hl),a
2826  0C75  D6 08       	sub	a,0x08
2827  0C77  38 F0       	jr	C,l_spr_kill_all_00102
2828  0C79  C9          	ret
2829  0C7A              	SECTION code_compiler
2830  0C7A              ;	---------------------------------
2831  0C7A              ; Function spr_back_repaint
2832  0C7A              ; ---------------------------------
2833  0C7A              _spr_back_repaint:
2834  0C7A  2A FF FF    	ld	hl,(_s_col0 - 1)
2835  0C7D  3A 00 00    	ld	a,(_s_lin0)
2836  0C80  6F          	ld	l,a
2837  0C81  E5          	push	hl
2838  0C82  CD 00 00    	call	_spr_calc_index
2839  0C85  F1          	pop	af
2840  0C86  7D          	ld	a,l
2841  0C87  32 00 00    	ld	(_sprite_curr_index),a
2842  0C8A  21 00 00    	ld	hl,_s_lin0
2843  0C8D  7E          	ld	a, (hl)
2844  0C8E  E6 0F       	and	a,0x0f
2845  0C90  4F          	ld	c, a
2846  0C91  7E          	ld	a, (hl)
2847  0C92  07          	rlca
2848  0C93  07          	rlca
2849  0C94  07          	rlca
2850  0C95  07          	rlca
2851  0C96  E6 0F       	and	a,0x0f
2852  0C98  47          	ld	b, a
2853  0C99  21 00 00    	ld	hl,_s_col0
2854  0C9C  CB 46       	bit	0, (hl)
2855  0C9E  20 66       	jr	NZ,l_spr_back_repaint_00108
2856  0CA0  79          	ld	a, c
2857  0CA1  B7          	or	a, a
2858  0CA2  20 1D       	jr	NZ,l_spr_back_repaint_00102
2859  0CA4  2A 00 00    	ld	hl,(_sprite_curr_index)
2860  0CA7  26 00       	ld	h,0x00
2861  0CA9  01 00 00    	ld	bc,_scr_map
2862  0CAC  09          	add	hl,bc
2863  0CAD  46          	ld	b,(hl)
2864  0CAE  3A 00 00    	ld	a,(_s_col0)
2865  0CB1  F5          	push	af
2866  0CB2  33          	inc	sp
2867  0CB3  3A 00 00    	ld	a,(_s_lin0)
2868  0CB6  48          	ld	c,b
2869  0CB7  47          	ld	b,a
2870  0CB8  C5          	push	bc
2871  0CB9  CD CD 0D    	call	_spr_tile_paint
2872  0CBC  F1          	pop	af
2873  0CBD  33          	inc	sp
2874  0CBE  C3 CC 0D    	jp	l_spr_back_repaint_00110
2875  0CC1              l_spr_back_repaint_00102:
2876  0CC1  78          	ld	a, b
2877  0CC2  07          	rlca
2878  0CC3  07          	rlca
2879  0CC4  07          	rlca
2880  0CC5  07          	rlca
2881  0CC6  E6 F0       	and	a,0xf0
2882  0CC8  47          	ld	b, a
2883  0CC9  2A 00 00    	ld	hl,(_sprite_curr_index)
2884  0CCC  26 00       	ld	h,0x00
2885  0CCE  11 00 00    	ld	de,_scr_map
2886  0CD1  19          	add	hl,de
2887  0CD2  56          	ld	d, (hl)
2888  0CD3  3A 00 00    	ld	a,(_s_col0)
2889  0CD6  C5          	push	bc
2890  0CD7  F5          	push	af
2891  0CD8  33          	inc	sp
2892  0CD9  4A          	ld	c, d
2893  0CDA  C5          	push	bc
2894  0CDB  CD CD 0D    	call	_spr_tile_paint
2895  0CDE  F1          	pop	af
2896  0CDF  33          	inc	sp
2897  0CE0  C1          	pop	bc
2898  0CE1  78          	ld	a, b
2899  0CE2  C6 10       	add	a,0x10
2900  0CE4  57          	ld	d, a
2901  0CE5  21 00 00    	ld	hl,_sprite_curr_index
2902  0CE8  7E          	ld	a, (hl)
2903  0CE9  C6 10       	add	a,0x10
2904  0CEB  77          	ld	(hl), a
2905  0CEC  C6 00       	add	a,+((_scr_map) & 0xFF)
2906  0CEE  4F          	ld	c, a
2907  0CEF  3E 00       	ld	a, +((_scr_map) / 256)
2908  0CF1  CE 00       	adc	a,0x00
2909  0CF3  47          	ld	b, a
2910  0CF4  0A          	ld	a, (bc)
2911  0CF5  47          	ld	b, a
2912  0CF6  3A 00 00    	ld	a,(_s_col0)
2913  0CF9  5A          	ld	e,d
2914  0CFA  57          	ld	d,a
2915  0CFB  D5          	push	de
2916  0CFC  C5          	push	bc
2917  0CFD  33          	inc	sp
2918  0CFE  CD CD 0D    	call	_spr_tile_paint
2919  0D01  F1          	pop	af
2920  0D02  33          	inc	sp
2921  0D03  C3 CC 0D    	jp	l_spr_back_repaint_00110
2922  0D06              l_spr_back_repaint_00108:
2923  0D06  79          	ld	a, c
2924  0D07  B7          	or	a, a
2925  0D08  20 3F       	jr	NZ,l_spr_back_repaint_00105
2926  0D0A  21 00 00    	ld	hl,_s_col0
2927  0D0D  56          	ld	d, (hl)
2928  0D0E  15          	dec	d
2929  0D0F  2A 00 00    	ld	hl,(_sprite_curr_index)
2930  0D12  26 00       	ld	h,0x00
2931  0D14  01 00 00    	ld	bc,_scr_map
2932  0D17  09          	add	hl,bc
2933  0D18  46          	ld	b,(hl)
2934  0D19  D5          	push	de
2935  0D1A  33          	inc	sp
2936  0D1B  3A 00 00    	ld	a,(_s_lin0)
2937  0D1E  48          	ld	c,b
2938  0D1F  47          	ld	b,a
2939  0D20  C5          	push	bc
2940  0D21  CD CD 0D    	call	_spr_tile_paint
2941  0D24  F1          	pop	af
2942  0D25  33          	inc	sp
2943  0D26  21 00 00    	ld	hl,_sprite_curr_index
2944  0D29  34          	inc	(hl)
2945  0D2A  21 00 00    	ld	hl,_s_col0
2946  0D2D  56          	ld	d, (hl)
2947  0D2E  14          	inc	d
2948  0D2F  2A 00 00    	ld	hl,(_sprite_curr_index)
2949  0D32  26 00       	ld	h,0x00
2950  0D34  01 00 00    	ld	bc,_scr_map
2951  0D37  09          	add	hl,bc
2952  0D38  46          	ld	b,(hl)
2953  0D39  D5          	push	de
2954  0D3A  33          	inc	sp
2955  0D3B  3A 00 00    	ld	a,(_s_lin0)
2956  0D3E  48          	ld	c,b
2957  0D3F  47          	ld	b,a
2958  0D40  C5          	push	bc
2959  0D41  CD CD 0D    	call	_spr_tile_paint
2960  0D44  F1          	pop	af
2961  0D45  33          	inc	sp
2962  0D46  C3 CC 0D    	jp	l_spr_back_repaint_00110
2963  0D49              l_spr_back_repaint_00105:
2964  0D49  78          	ld	a, b
2965  0D4A  07          	rlca
2966  0D4B  07          	rlca
2967  0D4C  07          	rlca
2968  0D4D  07          	rlca
2969  0D4E  E6 F0       	and	a,0xf0
2970  0D50  4F          	ld	c, a
2971  0D51  76          	halt
2972  0D52  21 00 00    	ld	hl,_s_col0
2973  0D55  46          	ld	b, (hl)
2974  0D56  05          	dec	b
2975  0D57  2A 00 00    	ld	hl,(_sprite_curr_index)
2976  0D5A  26 00       	ld	h,0x00
2977  0D5C  11 00 00    	ld	de,_scr_map
2978  0D5F  19          	add	hl,de
2979  0D60  66          	ld	h, (hl)
2980  0D61  EB          	ex	de,hl
2981  0D62  C5          	push	bc
2982  0D63  C5          	push	bc
2983  0D64  D5          	push	de
2984  0D65  33          	inc	sp
2985  0D66  CD CD 0D    	call	_spr_tile_paint
2986  0D69  F1          	pop	af
2987  0D6A  33          	inc	sp
2988  0D6B  C1          	pop	bc
2989  0D6C  21 00 00    	ld	hl,_sprite_curr_index
2990  0D6F  34          	inc	(hl)
2991  0D70  21 00 00    	ld	hl,_s_col0
2992  0D73  46          	ld	b, (hl)
2993  0D74  04          	inc	b
2994  0D75  2A 00 00    	ld	hl,(_sprite_curr_index)
2995  0D78  26 00       	ld	h,0x00
2996  0D7A  11 00 00    	ld	de,_scr_map
2997  0D7D  19          	add	hl,de
2998  0D7E  66          	ld	h, (hl)
2999  0D7F  EB          	ex	de,hl
3000  0D80  C5          	push	bc
3001  0D81  C5          	push	bc
3002  0D82  D5          	push	de
3003  0D83  33          	inc	sp
3004  0D84  CD CD 0D    	call	_spr_tile_paint
3005  0D87  F1          	pop	af
3006  0D88  33          	inc	sp
3007  0D89  C1          	pop	bc
3008  0D8A  79          	ld	a, c
3009  0D8B  C6 10       	add	a,0x10
3010  0D8D  5F          	ld	e, a
3011  0D8E  21 00 00    	ld	hl,_sprite_curr_index
3012  0D91  7E          	ld	a, (hl)
3013  0D92  C6 0F       	add	a,0x0f
3014  0D94  77          	ld	(hl), a
3015  0D95  76          	halt
3016  0D96  21 00 00    	ld	hl,_s_col0
3017  0D99  56          	ld	d, (hl)
3018  0D9A  15          	dec	d
3019  0D9B  2A 00 00    	ld	hl,(_sprite_curr_index)
3020  0D9E  26 00       	ld	h,0x00
3021  0DA0  01 00 00    	ld	bc,_scr_map
3022  0DA3  09          	add	hl,bc
3023  0DA4  4D          	ld	c,l
3024  0DA5  46          	ld	b,(hl)
3025  0DA6  D5          	push	de
3026  0DA7  D5          	push	de
3027  0DA8  C5          	push	bc
3028  0DA9  33          	inc	sp
3029  0DAA  CD CD 0D    	call	_spr_tile_paint
3030  0DAD  F1          	pop	af
3031  0DAE  33          	inc	sp
3032  0DAF  D1          	pop	de
3033  0DB0  21 00 00    	ld	hl,_sprite_curr_index
3034  0DB3  34          	inc	(hl)
3035  0DB4  21 00 00    	ld	hl,_s_col0
3036  0DB7  56          	ld	d, (hl)
3037  0DB8  14          	inc	d
3038  0DB9  2A 00 00    	ld	hl,(_sprite_curr_index)
3039  0DBC  26 00       	ld	h,0x00
3040  0DBE  01 00 00    	ld	bc,_scr_map
3041  0DC1  09          	add	hl,bc
3042  0DC2  4D          	ld	c,l
3043  0DC3  46          	ld	b,(hl)
3044  0DC4  D5          	push	de
3045  0DC5  C5          	push	bc
3046  0DC6  33          	inc	sp
3047  0DC7  CD CD 0D    	call	_spr_tile_paint
3048  0DCA  F1          	pop	af
3049  0DCB  33          	inc	sp
3050  0DCC              l_spr_back_repaint_00110:
3051  0DCC  C9          	ret
3052  0DCD              	SECTION code_compiler
3053  0DCD              ;	---------------------------------
3054  0DCD              ; Function spr_tile_paint
3055  0DCD              ; ---------------------------------
3056  0DCD              _spr_tile_paint:
3057  0DCD  CD 00 00    	call	___sdcc_enter_ix
3058  0DD0  DD 7E 04    	ld	a,(ix+4)
3059  0DD3  B7          	or	a, a
3060  0DD4  20 3E       	jr	NZ,l_spr_tile_paint_00102
3061  0DD6  DD 7E 06    	ld	a,(ix+6)
3062  0DD9  F5          	push	af
3063  0DDA  33          	inc	sp
3064  0DDB  DD 56 05    	ld	d,(ix+5)
3065  0DDE  1E 49       	ld	e,0x49
3066  0DE0  D5          	push	de
3067  0DE1  CD 00 00    	call	_NIRVANAP_fillC_callee
3068  0DE4  DD 7E 05    	ld	a,(ix+5)
3069  0DE7  C6 08       	add	a,0x08
3070  0DE9  47          	ld	b, a
3071  0DEA  DD 7E 06    	ld	a,(ix+6)
3072  0DED  F5          	push	af
3073  0DEE  33          	inc	sp
3074  0DEF  C5          	push	bc
3075  0DF0  33          	inc	sp
3076  0DF1  3E 49       	ld	a,0x49
3077  0DF3  F5          	push	af
3078  0DF4  33          	inc	sp
3079  0DF5  CD 00 00    	call	_NIRVANAP_fillC_callee
3080  0DF8  DD 56 06    	ld	d,(ix+6)
3081  0DFB  14          	inc	d
3082  0DFC  D5          	push	de
3083  0DFD  D5          	push	de
3084  0DFE  33          	inc	sp
3085  0DFF  DD 56 05    	ld	d,(ix+5)
3086  0E02  1E 49       	ld	e,0x49
3087  0E04  D5          	push	de
3088  0E05  CD 00 00    	call	_NIRVANAP_fillC_callee
3089  0E08  33          	inc	sp
3090  0E09  C5          	push	bc
3091  0E0A  33          	inc	sp
3092  0E0B  3E 49       	ld	a,0x49
3093  0E0D  F5          	push	af
3094  0E0E  33          	inc	sp
3095  0E0F  CD 00 00    	call	_NIRVANAP_fillC_callee
3096  0E12  18 0F       	jr	l_spr_tile_paint_00104
3097  0E14              l_spr_tile_paint_00102:
3098  0E14  DD 66 06    	ld	h,(ix+6)
3099  0E17  DD 6E 05    	ld	l,(ix+5)
3100  0E1A  E5          	push	hl
3101  0E1B  DD 7E 04    	ld	a,(ix+4)
3102  0E1E  F5          	push	af
3103  0E1F  33          	inc	sp
3104  0E20  CD 00 00    	call	_NIRVANAP_drawT_callee
3105  0E23              l_spr_tile_paint_00104:
3106  0E23  DD E1       	pop	ix
3107  0E25  C9          	ret
3108  0E26              	SECTION code_compiler
3109  0E26              ;	---------------------------------
3110  0E26              ; Function spr_init_anim
3111  0E26              ; ---------------------------------
3112  0E26              _spr_init_anim:
3113  0E26  01 00 00    	ld	bc,_anim_lin+0
3114  0E29  1E 00       	ld	e,0x00
3115  0E2B              l_spr_init_anim_00102:
3116  0E2B  6B          	ld	l,e
3117  0E2C  26 00       	ld	h,0x00
3118  0E2E  09          	add	hl, bc
3119  0E2F  36 FF       	ld	(hl),0xff
3120  0E31  1C          	inc	e
3121  0E32  7B          	ld	a, e
3122  0E33  D6 08       	sub	a,0x08
3123  0E35  38 F4       	jr	C,l_spr_init_anim_00102
3124  0E37  C9          	ret
3125  0E38              	SECTION code_compiler
3126  0E38              ;	---------------------------------
3127  0E38              ; Function spr_init_bullet
3128  0E38              ; ---------------------------------
3129  0E38              _spr_init_bullet:
3130  0E38  01 00 00    	ld	bc,_bullet_col+0
3131  0E3B  1E 00       	ld	e,0x00
3132  0E3D              l_spr_init_bullet_00102:
3133  0E3D  6B          	ld	l,e
3134  0E3E  26 00       	ld	h,0x00
3135  0E40  09          	add	hl, bc
3136  0E41  36 FF       	ld	(hl),0xff
3137  0E43  1C          	inc	e
3138  0E44  7B          	ld	a, e
3139  0E45  D6 08       	sub	a,0x08
3140  0E47  38 F4       	jr	C,l_spr_init_bullet_00102
3141  0E49  C9          	ret
3142  0E4A              	SECTION code_compiler
3143  0E4A              ;	---------------------------------
3144  0E4A              ; Function spr_add_anim
3145  0E4A              ; ---------------------------------
3146  0E4A              _spr_add_anim:
3147  0E4A  CD 00 00    	call	___sdcc_enter_ix
3148  0E4D  F5          	push	af
3149  0E4E  01 00 00    	ld	bc,0x0000
3150  0E51              l_spr_add_anim_00104:
3151  0E51  3E 00       	ld	a, +((_anim_lin) & 0xFF)
3152  0E53  80          	add	a, b
3153  0E54  DD 77 FE    	ld	(ix-2),a
3154  0E57  3E 00       	ld	a, +((_anim_lin) / 256)
3155  0E59  CE 00       	adc	a,0x00
3156  0E5B  DD 77 FF    	ld	(ix-1),a
3157  0E5E  E1          	pop	hl
3158  0E5F  5E          	ld	e,(hl)
3159  0E60  E5          	push	hl
3160  0E61  1C          	inc	e
3161  0E62  20 43       	jr	NZ,l_spr_add_anim_00105
3162  0E64  E1          	pop	hl
3163  0E65  E5          	push	hl
3164  0E66  DD 7E 04    	ld	a,(ix+4)
3165  0E69  77          	ld	(hl), a
3166  0E6A  3E 00       	ld	a, +((_anim_col) & 0xFF)
3167  0E6C  81          	add	a, c
3168  0E6D  5F          	ld	e, a
3169  0E6E  3E 00       	ld	a, +((_anim_col) / 256)
3170  0E70  CE 00       	adc	a,0x00
3171  0E72  57          	ld	d, a
3172  0E73  DD 7E 05    	ld	a,(ix+5)
3173  0E76  12          	ld	(de), a
3174  0E77  3E 00       	ld	a, +((_anim_tile) & 0xFF)
3175  0E79  81          	add	a, c
3176  0E7A  5F          	ld	e, a
3177  0E7B  3E 00       	ld	a, +((_anim_tile) / 256)
3178  0E7D  CE 00       	adc	a,0x00
3179  0E7F  57          	ld	d, a
3180  0E80  DD 7E 06    	ld	a,(ix+6)
3181  0E83  12          	ld	(de), a
3182  0E84  11 00 00    	ld	de,_anim_int+0
3183  0E87  69          	ld	l,c
3184  0E88  26 00       	ld	h,0x00
3185  0E8A  19          	add	hl, de
3186  0E8B  06 00       	ld	b,0x00
3187  0E8D  70          	ld	(hl),b
3188  0E8E  21 00 00    	ld	hl,_anim_end
3189  0E91  09          	add	hl,bc
3190  0E92  DD 7E 07    	ld	a,(ix+7)
3191  0E95  77          	ld	(hl),a
3192  0E96  DD 66 05    	ld	h,(ix+5)
3193  0E99  DD 6E 04    	ld	l,(ix+4)
3194  0E9C  E5          	push	hl
3195  0E9D  DD 7E 06    	ld	a,(ix+6)
3196  0EA0  F5          	push	af
3197  0EA1  33          	inc	sp
3198  0EA2  CD 00 00    	call	_NIRVANAP_drawT_callee
3199  0EA5  18 07       	jr	l_spr_add_anim_00106
3200  0EA7              l_spr_add_anim_00105:
3201  0EA7  04          	inc	b
3202  0EA8  78          	ld	a,b
3203  0EA9  48          	ld	c,b
3204  0EAA  D6 08       	sub	a,0x08
3205  0EAC  38 A3       	jr	C,l_spr_add_anim_00104
3206  0EAE              l_spr_add_anim_00106:
3207  0EAE  F1          	pop	af
3208  0EAF  DD E1       	pop	ix
3209  0EB1  C9          	ret
3210  0EB2              	SECTION code_compiler
3211  0EB2              ;	---------------------------------
3212  0EB2              ; Function spr_play_anim
3213  0EB2              ; ---------------------------------
3214  0EB2              _spr_play_anim:
3215  0EB2  CD 00 00    	call	___sdcc_enter_ix
3216  0EB5  F5          	push	af
3217  0EB6  F5          	push	af
3218  0EB7  3B          	dec	sp
3219  0EB8  DD 36 FB 01 	ld	(ix-5),0x01
3220  0EBC  0E 00       	ld	c,0x00
3221  0EBE              l_spr_play_anim_00109:
3222  0EBE  3E 00       	ld	a, +((_anim_lin) & 0xFF)
3223  0EC0  81          	add	a, c
3224  0EC1  5F          	ld	e, a
3225  0EC2  3E 00       	ld	a, +((_anim_lin) / 256)
3226  0EC4  CE 00       	adc	a,0x00
3227  0EC6  57          	ld	d, a
3228  0EC7  1A          	ld	a, (de)
3229  0EC8  3C          	inc	a
3230  0EC9  28 73       	jr	Z,l_spr_play_anim_00110
3231  0ECB  DD 7E FB    	ld	a,(ix-5)
3232  0ECE  B7          	or	a, a
3233  0ECF  28 05       	jr	Z,l_spr_play_anim_00102
3234  0ED1  76          	halt
3235  0ED2  DD 36 FB 00 	ld	(ix-5),0x00
3236  0ED6              l_spr_play_anim_00102:
3237  0ED6  3E 00       	ld	a, +((_anim_int) & 0xFF)
3238  0ED8  81          	add	a, c
3239  0ED9  DD 77 FD    	ld	(ix-3),a
3240  0EDC  6F          	ld	l,a
3241  0EDD  3E 00       	ld	a,+((_anim_int) / 256)
3242  0EDF  CE 00       	adc	a,0x00
3243  0EE1  DD 77 FE    	ld	(ix-2),a
3244  0EE4  67          	ld	h,a
3245  0EE5  7E          	ld	a, (hl)
3246  0EE6  DD 77 FF    	ld	(ix-1),a
3247  0EE9  06 00       	ld	b,0x00
3248  0EEB  21 00 00    	ld	hl,_anim_end
3249  0EEE  09          	add	hl, bc
3250  0EEF  46          	ld	b, (hl)
3251  0EF0  1A          	ld	a, (de)
3252  0EF1  DD 77 FC    	ld	(ix-4),a
3253  0EF4  DD 7E FF    	ld	a,(ix-1)
3254  0EF7  90          	sub	a, b
3255  0EF8  30 2A       	jr	NC,l_spr_play_anim_00104
3256  0EFA  06 00       	ld	b,0x00
3257  0EFC  21 00 00    	ld	hl,_anim_col
3258  0EFF  09          	add	hl, bc
3259  0F00  56          	ld	d, (hl)
3260  0F01  06 00       	ld	b,0x00
3261  0F03  21 00 00    	ld	hl,_anim_tile
3262  0F06  09          	add	hl, bc
3263  0F07  7E          	ld	a, (hl)
3264  0F08  DD 86 FF    	add	a,(ix-1)
3265  0F0B  47          	ld	b, a
3266  0F0C  C5          	push	bc
3267  0F0D  D5          	push	de
3268  0F0E  33          	inc	sp
3269  0F0F  DD 7E FC    	ld	a,(ix-4)
3270  0F12  48          	ld	c,b
3271  0F13  47          	ld	b,a
3272  0F14  C5          	push	bc
3273  0F15  CD 00 00    	call	_NIRVANAP_drawT_callee
3274  0F18  C1          	pop	bc
3275  0F19  DD 6E FD    	ld	l,(ix-3)
3276  0F1C  DD 66 FE    	ld	h,(ix-2)
3277  0F1F  46          	ld	b,(hl)
3278  0F20  04          	inc	b
3279  0F21  70          	ld	(hl), b
3280  0F22  18 1A       	jr	l_spr_play_anim_00110
3281  0F24              l_spr_play_anim_00104:
3282  0F24  06 00       	ld	b,0x00
3283  0F26  21 00 00    	ld	hl,_anim_col
3284  0F29  09          	add	hl, bc
3285  0F2A  7E          	ld	a, (hl)
3286  0F2B  32 00 00    	ld	(_s_col0),a
3287  0F2E  DD 7E FC    	ld	a,(ix-4)
3288  0F31  32 00 00    	ld	(_s_lin0),a
3289  0F34  C5          	push	bc
3290  0F35  D5          	push	de
3291  0F36  CD 7A 0C    	call	_spr_back_repaint
3292  0F39  D1          	pop	de
3293  0F3A  C1          	pop	bc
3294  0F3B  3E FF       	ld	a,0xff
3295  0F3D  12          	ld	(de), a
3296  0F3E              l_spr_play_anim_00110:
3297  0F3E  0C          	inc	c
3298  0F3F  79          	ld	a, c
3299  0F40  D6 08       	sub	a,0x08
3300  0F42  DA BE 0E    	jp	C, l_spr_play_anim_00109
3301  0F45  DD F9       	ld	sp, ix
3302  0F47  DD E1       	pop	ix
3303  0F49  C9          	ret
3304  0F4A              	SECTION code_compiler
3305  0F4A              ;	---------------------------------
3306  0F4A              ; Function spr_play_bullets
3307  0F4A              ; ---------------------------------
3308  0F4A              _spr_play_bullets:
3309  0F4A  CD 00 00    	call	___sdcc_enter_ix
3310  0F4D  F5          	push	af
3311  0F4E  F5          	push	af
3312  0F4F  3B          	dec	sp
3313  0F50  0E 00       	ld	c,0x00
3314  0F52              l_spr_play_bullets_00131:
3315  0F52  3E 00       	ld	a, +((_bullet_col) & 0xFF)
3316  0F54  81          	add	a, c
3317  0F55  DD 77 FE    	ld	(ix-2),a
3318  0F58  6F          	ld	l,a
3319  0F59  3E 00       	ld	a,+((_bullet_col) / 256)
3320  0F5B  CE 00       	adc	a,0x00
3321  0F5D  DD 77 FF    	ld	(ix-1),a
3322  0F60  67          	ld	h,a
3323  0F61  7E          	ld	a, (hl)
3324  0F62  DD 77 FD    	ld	(ix-3),a
3325  0F65  3C          	inc	a
3326  0F66  CA 15 11    	jp	Z,l_spr_play_bullets_00132
3327  0F69  06 00       	ld	b,0x00
3328  0F6B  21 00 00    	ld	hl,_bullet_lin
3329  0F6E  09          	add	hl, bc
3330  0F6F  7E          	ld	a, (hl)
3331  0F70  32 00 00    	ld	(_s_lin0),a
3332  0F73  DD 7E FD    	ld	a,(ix-3)
3333  0F76  32 00 00    	ld	(_s_col0),a
3334  0F79  32 00 00    	ld	(_s_col1),a
3335  0F7C  C5          	push	bc
3336  0F7D  CD 7A 0C    	call	_spr_back_repaint
3337  0F80  C1          	pop	bc
3338  0F81  06 00       	ld	b,0x00
3339  0F83  21 00 00    	ld	hl,_bullet_dir
3340  0F86  09          	add	hl, bc
3341  0F87  46          	ld	b, (hl)
3342  0F88  04          	inc	b
3343  0F89  20 3E       	jr	NZ,l_spr_play_bullets_00110
3344  0F8B  3E 00       	ld	a, +((_bullet_colint) & 0xFF)
3345  0F8D  81          	add	a, c
3346  0F8E  5F          	ld	e, a
3347  0F8F  3E 00       	ld	a, +((_bullet_colint) / 256)
3348  0F91  CE 00       	adc	a,0x00
3349  0F93  57          	ld	d, a
3350  0F94  1A          	ld	a, (de)
3351  0F95  3C          	inc	a
3352  0F96  47          	ld	b,a
3353  0F97  12          	ld	(de), a
3354  0F98  3E 00       	ld	a, +((_bullet_frames) & 0xFF)
3355  0F9A  81          	add	a, c
3356  0F9B  6F          	ld	l, a
3357  0F9C  3E 00       	ld	a, +((_bullet_frames) / 256)
3358  0F9E  CE 00       	adc	a,0x00
3359  0FA0  67          	ld	h, a
3360  0FA1  6E          	ld	l, (hl)
3361  0FA2  78          	ld	a, b
3362  0FA3  95          	sub	a, l
3363  0FA4  38 0B       	jr	C,l_spr_play_bullets_00102
3364  0FA6  DD 6E FE    	ld	l,(ix-2)
3365  0FA9  DD 66 FF    	ld	h,(ix-1)
3366  0FAC  46          	ld	b,(hl)
3367  0FAD  04          	inc	b
3368  0FAE  70          	ld	(hl), b
3369  0FAF  AF          	xor	a, a
3370  0FB0  12          	ld	(de), a
3371  0FB1              l_spr_play_bullets_00102:
3372  0FB1  DD 6E FE    	ld	l,(ix-2)
3373  0FB4  DD 66 FF    	ld	h,(ix-1)
3374  0FB7  46          	ld	b, (hl)
3375  0FB8  CB 40       	bit	0, b
3376  0FBA  28 46       	jr	Z,l_spr_play_bullets_00111
3377  0FBC  78          	ld	a, b
3378  0FBD  3C          	inc	a
3379  0FBE  32 00 00    	ld	(_s_col1),a
3380  0FC1  78          	ld	a, b
3381  0FC2  C6 FF       	add	a,0xff
3382  0FC4  32 00 00    	ld	(_tmp),a
3383  0FC7  18 39       	jr	l_spr_play_bullets_00111
3384  0FC9              l_spr_play_bullets_00110:
3385  0FC9  3E 00       	ld	a, +((_bullet_colint) & 0xFF)
3386  0FCB  81          	add	a, c
3387  0FCC  5F          	ld	e, a
3388  0FCD  3E 00       	ld	a, +((_bullet_colint) / 256)
3389  0FCF  CE 00       	adc	a,0x00
3390  0FD1  57          	ld	d, a
3391  0FD2  1A          	ld	a, (de)
3392  0FD3  C6 FF       	add	a,0xff
3393  0FD5  12          	ld	(de), a
3394  0FD6  3C          	inc	a
3395  0FD7  20 13       	jr	NZ,l_spr_play_bullets_00106
3396  0FD9  DD 6E FE    	ld	l,(ix-2)
3397  0FDC  DD 66 FF    	ld	h,(ix-1)
3398  0FDF  46          	ld	b,(hl)
3399  0FE0  05          	dec	b
3400  0FE1  70          	ld	(hl), b
3401  0FE2  06 00       	ld	b,0x00
3402  0FE4  21 00 00    	ld	hl,_bullet_frames
3403  0FE7  09          	add	hl, bc
3404  0FE8  46          	ld	b, (hl)
3405  0FE9  05          	dec	b
3406  0FEA  78          	ld	a, b
3407  0FEB  12          	ld	(de), a
3408  0FEC              l_spr_play_bullets_00106:
3409  0FEC  DD 6E FE    	ld	l,(ix-2)
3410  0FEF  DD 66 FF    	ld	h,(ix-1)
3411  0FF2  46          	ld	b, (hl)
3412  0FF3  CB 40       	bit	0, b
3413  0FF5  28 0B       	jr	Z,l_spr_play_bullets_00111
3414  0FF7  78          	ld	a, b
3415  0FF8  C6 FF       	add	a,0xff
3416  0FFA  32 00 00    	ld	(_s_col1),a
3417  0FFD  78          	ld	a, b
3418  0FFE  3C          	inc	a
3419  0FFF  32 00 00    	ld	(_tmp),a
3420  1002              l_spr_play_bullets_00111:
3421  1002  DD 7E FE    	ld	a,(ix-2)
3422  1005  DD 77 FB    	ld	(ix-5),a
3423  1008  DD 7E FF    	ld	a,(ix-1)
3424  100B  DD 77 FC    	ld	(ix-4),a
3425  100E  78          	ld	a,b
3426  100F  B7          	or	a, a
3427  1010  CA 0D 11    	jp	Z,l_spr_play_bullets_00123
3428  1013  D6 1E       	sub	a,0x1e
3429  1015  D2 0D 11    	jp	NC, l_spr_play_bullets_00123
3430  1018  3A 00 00    	ld	a,(_s_col1)
3431  101B  C5          	push	bc
3432  101C  F5          	push	af
3433  101D  33          	inc	sp
3434  101E  3A 00 00    	ld	a,(_s_lin0)
3435  1021  F5          	push	af
3436  1022  33          	inc	sp
3437  1023  CD 00 00    	call	_spr_calc_index
3438  1026  F1          	pop	af
3439  1027  EB          	ex	de,hl
3440  1028  C1          	pop	bc
3441  1029  ED 53 00 00 	ld	(_index0),de
3442  102D  21 00 00    	ld	hl,_tmp0
3443  1030  36 00       	ld	(hl),0x00
3444  1032              l_spr_play_bullets_00129:
3445  1032  2A 00 00    	ld	hl,(_tmp0)
3446  1035  26 00       	ld	h,0x00
3447  1037  11 00 00    	ld	de,_class
3448  103A  19          	add	hl,de
3449  103B  7E          	ld	a,(hl)
3450  103C  B7          	or	a,a
3451  103D  28 6F       	jr	Z,l_spr_play_bullets_00130
3452  103F  2A 00 00    	ld	hl,(_tmp0)
3453  1042  26 00       	ld	h,0x00
3454  1044  11 00 00    	ld	de,_col
3455  1047  19          	add	hl,de
3456  1048  46          	ld	b, (hl)
3457  1049  3A 00 00    	ld	a,(_tmp0)
3458  104C  5F          	ld	e,a
3459  104D  16 00       	ld	d,0x00
3460  104F  21 00 00    	ld	hl,_lin
3461  1052  19          	add	hl,de
3462  1053  56          	ld	d, (hl)
3463  1054  C5          	push	bc
3464  1055  4A          	ld	c, d
3465  1056  C5          	push	bc
3466  1057  CD 00 00    	call	_spr_calc_index
3467  105A  F1          	pop	af
3468  105B  EB          	ex	de,hl
3469  105C  C1          	pop	bc
3470  105D  ED 53 00 00 	ld	(_index1),de
3471  1061  3A 00 00    	ld	a,(_index0)
3472  1064  21 00 00    	ld	hl,_index1
3473  1067  96          	sub	a, (hl)
3474  1068  20 44       	jr	NZ,l_spr_play_bullets_00130
3475  106A  3A 01 00    	ld	a,(_index0 + 1)
3476  106D  23          	inc	hl
3477  106E  96          	sub	a, (hl)
3478  106F  20 3D       	jr	NZ,l_spr_play_bullets_00130
3479  1071  2A 00 00    	ld	hl,(_tmp0)
3480  1074  26 00       	ld	h,0x00
3481  1076  11 00 00    	ld	de,_lin
3482  1079  19          	add	hl,de
3483  107A  7E          	ld	a,(hl)
3484  107B  32 00 00    	ld	(_s_lin0),a
3485  107E  2A 00 00    	ld	hl,(_tmp0)
3486  1081  26 00       	ld	h,0x00
3487  1083  11 00 00    	ld	de,_col
3488  1086  19          	add	hl,de
3489  1087  7E          	ld	a,(hl)
3490  1088  32 00 00    	ld	(_s_col0),a
3491  108B  2A 00 00    	ld	hl,(_tmp0)
3492  108E  C5          	push	bc
3493  108F  CD A8 07    	call	_spr_destroy
3494  1092  C1          	pop	bc
3495  1093  E1          	pop	hl
3496  1094  E5          	push	hl
3497  1095  36 FF       	ld	(hl),0xff
3498  1097  3A 00 00    	ld	a,(_s_col0)
3499  109A  C5          	push	bc
3500  109B  21 7B 03    	ld	hl,0x037b
3501  109E  E5          	push	hl
3502  109F  F5          	push	af
3503  10A0  33          	inc	sp
3504  10A1  3A 00 00    	ld	a,(_s_lin0)
3505  10A4  F5          	push	af
3506  10A5  33          	inc	sp
3507  10A6  CD 4A 0E    	call	_spr_add_anim
3508  10A9  F1          	pop	af
3509  10AA  F1          	pop	af
3510  10AB  C1          	pop	bc
3511  10AC  18 0B       	jr	l_spr_play_bullets_00116
3512  10AE              l_spr_play_bullets_00130:
3513  10AE  21 00 00    	ld	hl,_tmp0
3514  10B1  7E          	ld	a,(hl)
3515  10B2  3C          	inc	a
3516  10B3  77          	ld	(hl),a
3517  10B4  D6 07       	sub	a,0x07
3518  10B6  DA 32 10    	jp	C, l_spr_play_bullets_00129
3519  10B9              l_spr_play_bullets_00116:
3520  10B9  E1          	pop	hl
3521  10BA  7E          	ld	a,(hl)
3522  10BB  E5          	push	hl
3523  10BC  57          	ld	d,a
3524  10BD  3C          	inc	a
3525  10BE  28 55       	jr	Z,l_spr_play_bullets_00132
3526  10C0  3E 00       	ld	a, +((_scr_map) & 0xFF)
3527  10C2  21 00 00    	ld	hl,_index0
3528  10C5  86          	add	a, (hl)
3529  10C6  47          	ld	b, a
3530  10C7  3E 00       	ld	a, +((_scr_map) / 256)
3531  10C9  23          	inc	hl
3532  10CA  8E          	adc	a, (hl)
3533  10CB  67          	ld	h, a
3534  10CC  68          	ld	l, b
3535  10CD  7E          	ld	a, (hl)
3536  10CE  D6 3C       	sub	a,0x3c
3537  10D0  30 20       	jr	NC,l_spr_play_bullets_00118
3538  10D2  06 00       	ld	b,0x00
3539  10D4  21 00 00    	ld	hl,_bullet_tile
3540  10D7  09          	add	hl, bc
3541  10D8  5E          	ld	e, (hl)
3542  10D9  06 00       	ld	b,0x00
3543  10DB  21 00 00    	ld	hl,_bullet_colint
3544  10DE  09          	add	hl, bc
3545  10DF  46          	ld	b, (hl)
3546  10E0  7B          	ld	a, e
3547  10E1  80          	add	a, b
3548  10E2  47          	ld	b, a
3549  10E3  C5          	push	bc
3550  10E4  D5          	push	de
3551  10E5  33          	inc	sp
3552  10E6  3A 00 00    	ld	a,(_s_lin0)
3553  10E9  48          	ld	c,b
3554  10EA  47          	ld	b,a
3555  10EB  C5          	push	bc
3556  10EC  CD 00 00    	call	_NIRVANAP_drawT_callee
3557  10EF  C1          	pop	bc
3558  10F0  18 23       	jr	l_spr_play_bullets_00132
3559  10F2              l_spr_play_bullets_00118:
3560  10F2  3A 00 00    	ld	a,(_tmp)
3561  10F5  C5          	push	bc
3562  10F6  21 7B 03    	ld	hl,0x037b
3563  10F9  E5          	push	hl
3564  10FA  F5          	push	af
3565  10FB  33          	inc	sp
3566  10FC  3A 00 00    	ld	a,(_s_lin0)
3567  10FF  F5          	push	af
3568  1100  33          	inc	sp
3569  1101  CD 4A 0E    	call	_spr_add_anim
3570  1104  F1          	pop	af
3571  1105  F1          	pop	af
3572  1106  C1          	pop	bc
3573  1107  E1          	pop	hl
3574  1108  E5          	push	hl
3575  1109  36 FF       	ld	(hl),0xff
3576  110B  18 08       	jr	l_spr_play_bullets_00132
3577  110D              l_spr_play_bullets_00123:
3578  110D  DD 6E FE    	ld	l,(ix-2)
3579  1110  DD 66 FF    	ld	h,(ix-1)
3580  1113  36 FF       	ld	(hl),0xff
3581  1115              l_spr_play_bullets_00132:
3582  1115  0C          	inc	c
3583  1116  79          	ld	a, c
3584  1117  D6 08       	sub	a,0x08
3585  1119  DA 52 0F    	jp	C, l_spr_play_bullets_00131
3586  111C  DD F9       	ld	sp, ix
3587  111E  DD E1       	pop	ix
3588  1120  C9          	ret
3589  1121              	SECTION code_compiler
3590  1121              ;	---------------------------------
3591  1121              ; Function spr_turn_horizontal
3592  1121              ; ---------------------------------
3593  1121              _spr_turn_horizontal:
3594  1121  21 00 00    	ld	hl,_s_state
3595  1124  CB 56       	bit	2, (hl)
3596  1126  28 0B       	jr	Z,l_spr_turn_horizontal_00102
3597  1128  21 00 00    	ld	hl,_s_state
3598  112B  7E          	ld	a,(hl)
3599  112C  F6 08       	or	a,0x08
3600  112E  E6 FB       	and	a,0xfb
3601  1130  77          	ld	(hl),a
3602  1131  18 09       	jr	l_spr_turn_horizontal_00103
3603  1133              l_spr_turn_horizontal_00102:
3604  1133  21 00 00    	ld	hl,_s_state
3605  1136  7E          	ld	a,(hl)
3606  1137  E6 F7       	and	a,0xf7
3607  1139  F6 04       	or	a,0x04
3608  113B  77          	ld	(hl),a
3609  113C              l_spr_turn_horizontal_00103:
3610  113C  2A 00 00    	ld	hl,(_sprite)
3611  113F  26 00       	ld	h,0x00
3612  1141  01 00 00    	ld	bc,_state
3613  1144  09          	add	hl,bc
3614  1145  3A 00 00    	ld	a,(_s_state)
3615  1148  77          	ld	(hl),a
3616  1149  2A 00 00    	ld	hl,(_sprite)
3617  114C  26 00       	ld	h,0x00
3618  114E  01 00 00    	ld	bc,_tile
3619  1151  09          	add	hl,bc
3620  1152  E5          	push	hl
3621  1153  2A 00 00    	ld	hl,(_sprite)
3622  1156  CD 11 08    	call	_spr_tile
3623  1159  C1          	pop	bc
3624  115A  7D          	ld	a,l
3625  115B  02          	ld	(bc), a
3626  115C  C9          	ret
3627  115D              	SECTION IGNORE
3628  0000              
