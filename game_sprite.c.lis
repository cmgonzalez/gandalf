1     0000              MODULE game_sprite_c
2     0000              
3     0000              ;--------------------------------------------------------
4     0000              ; File Created by SDCC : free open source ANSI-C Compiler
5     0000              ; Version 3.6.5 #9958 (Mac OS X i386)
6     0000              ;--------------------------------------------------------
7     0000              ; Processed by Z88DK
8     0000              ;--------------------------------------------------------
9     0000              
10    0000              	EXTERN __divschar
11    0000              	EXTERN __divschar_callee
12    0000              	EXTERN __divsint
13    0000              	EXTERN __divsint_callee
14    0000              	EXTERN __divslong
15    0000              	EXTERN __divslong_callee
16    0000              	EXTERN __divslonglong
17    0000              	EXTERN __divslonglong_callee
18    0000              	EXTERN __divsuchar
19    0000              	EXTERN __divsuchar_callee
20    0000              	EXTERN __divuchar
21    0000              	EXTERN __divuchar_callee
22    0000              	EXTERN __divuint
23    0000              	EXTERN __divuint_callee
24    0000              	EXTERN __divulong
25    0000              	EXTERN __divulong_callee
26    0000              	EXTERN __divulonglong
27    0000              	EXTERN __divulonglong_callee
28    0000              	EXTERN __divuschar
29    0000              	EXTERN __divuschar_callee
30    0000              	EXTERN __modschar
31    0000              	EXTERN __modschar_callee
32    0000              	EXTERN __modsint
33    0000              	EXTERN __modsint_callee
34    0000              	EXTERN __modslong
35    0000              	EXTERN __modslong_callee
36    0000              	EXTERN __modslonglong
37    0000              	EXTERN __modslonglong_callee
38    0000              	EXTERN __modsuchar
39    0000              	EXTERN __modsuchar_callee
40    0000              	EXTERN __moduchar
41    0000              	EXTERN __moduchar_callee
42    0000              	EXTERN __moduint
43    0000              	EXTERN __moduint_callee
44    0000              	EXTERN __modulong
45    0000              	EXTERN __modulong_callee
46    0000              	EXTERN __modulonglong
47    0000              	EXTERN __modulonglong_callee
48    0000              	EXTERN __moduschar
49    0000              	EXTERN __moduschar_callee
50    0000              	EXTERN __mulint
51    0000              	EXTERN __mulint_callee
52    0000              	EXTERN __mullong
53    0000              	EXTERN __mullong_callee
54    0000              	EXTERN __mullonglong
55    0000              	EXTERN __mullonglong_callee
56    0000              	EXTERN __mulschar
57    0000              	EXTERN __mulschar_callee
58    0000              	EXTERN __mulsuchar
59    0000              	EXTERN __mulsuchar_callee
60    0000              	EXTERN __muluschar
61    0000              	EXTERN __muluschar_callee
62    0000              	EXTERN __rlslonglong
63    0000              	EXTERN __rlslonglong_callee
64    0000              	EXTERN __rlulonglong
65    0000              	EXTERN __rlulonglong_callee
66    0000              	EXTERN __rrslonglong
67    0000              	EXTERN __rrslonglong_callee
68    0000              	EXTERN __rrulonglong
69    0000              	EXTERN __rrulonglong_callee
70    0000              	EXTERN ___sdcc_call_hl
71    0000              	EXTERN ___sdcc_call_iy
72    0000              	EXTERN ___sdcc_enter_ix
73    0000              	EXTERN _banked_call
74    0000              	EXTERN _banked_ret
75    0000              	EXTERN ___fs2schar
76    0000              	EXTERN ___fs2schar_callee
77    0000              	EXTERN ___fs2sint
78    0000              	EXTERN ___fs2sint_callee
79    0000              	EXTERN ___fs2slong
80    0000              	EXTERN ___fs2slong_callee
81    0000              	EXTERN ___fs2slonglong
82    0000              	EXTERN ___fs2slonglong_callee
83    0000              	EXTERN ___fs2uchar
84    0000              	EXTERN ___fs2uchar_callee
85    0000              	EXTERN ___fs2uint
86    0000              	EXTERN ___fs2uint_callee
87    0000              	EXTERN ___fs2ulong
88    0000              	EXTERN ___fs2ulong_callee
89    0000              	EXTERN ___fs2ulonglong
90    0000              	EXTERN ___fs2ulonglong_callee
91    0000              	EXTERN ___fsadd
92    0000              	EXTERN ___fsadd_callee
93    0000              	EXTERN ___fsdiv
94    0000              	EXTERN ___fsdiv_callee
95    0000              	EXTERN ___fseq
96    0000              	EXTERN ___fseq_callee
97    0000              	EXTERN ___fsgt
98    0000              	EXTERN ___fsgt_callee
99    0000              	EXTERN ___fslt
100   0000              	EXTERN ___fslt_callee
101   0000              	EXTERN ___fsmul
102   0000              	EXTERN ___fsmul_callee
103   0000              	EXTERN ___fsneq
104   0000              	EXTERN ___fsneq_callee
105   0000              	EXTERN ___fssub
106   0000              	EXTERN ___fssub_callee
107   0000              	EXTERN ___schar2fs
108   0000              	EXTERN ___schar2fs_callee
109   0000              	EXTERN ___sint2fs
110   0000              	EXTERN ___sint2fs_callee
111   0000              	EXTERN ___slong2fs
112   0000              	EXTERN ___slong2fs_callee
113   0000              	EXTERN ___slonglong2fs
114   0000              	EXTERN ___slonglong2fs_callee
115   0000              	EXTERN ___uchar2fs
116   0000              	EXTERN ___uchar2fs_callee
117   0000              	EXTERN ___uint2fs
118   0000              	EXTERN ___uint2fs_callee
119   0000              	EXTERN ___ulong2fs
120   0000              	EXTERN ___ulong2fs_callee
121   0000              	EXTERN ___ulonglong2fs
122   0000              	EXTERN ___ulonglong2fs_callee
123   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
126   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
127   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
128   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
129   0000              	EXTERN ____sdcc_4_ldi_save_bc
130   0000              	EXTERN ____sdcc_4_push_hlix
131   0000              	EXTERN ____sdcc_4_push_mhl
132   0000              	EXTERN ____sdcc_lib_setmem_hl
133   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
134   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
135   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
136   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
137   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
138   0000              	EXTERN ____sdcc_ll_add_deix_hlix
139   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
140   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
141   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
142   0000              	EXTERN ____sdcc_ll_asr_hlix_a
143   0000              	EXTERN ____sdcc_ll_asr_mbc_a
144   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
145   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
146   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
147   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
148   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
149   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
150   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
151   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
152   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
153   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
155   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
156   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
157   0000              	EXTERN ____sdcc_ll_push_hlix
158   0000              	EXTERN ____sdcc_ll_push_mhl
159   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
160   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
161   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
162   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
163   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
164   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
165   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
166   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
167   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
168   0000              	EXTERN ____sdcc_load_debc_deix
169   0000              	EXTERN ____sdcc_load_dehl_deix
170   0000              	EXTERN ____sdcc_load_debc_mhl
171   0000              	EXTERN ____sdcc_load_hlde_mhl
172   0000              	EXTERN ____sdcc_store_dehl_bcix
173   0000              	EXTERN ____sdcc_store_debc_hlix
174   0000              	EXTERN ____sdcc_store_debc_mhl
175   0000              	EXTERN ____sdcc_cpu_pop_ei
176   0000              	EXTERN ____sdcc_cpu_pop_ei_jp
177   0000              	EXTERN ____sdcc_cpu_push_di
178   0000              	EXTERN ____sdcc_outi
179   0000              	EXTERN ____sdcc_outi_128
180   0000              	EXTERN ____sdcc_outi_256
181   0000              	EXTERN ____sdcc_ldi
182   0000              	EXTERN ____sdcc_ldi_128
183   0000              	EXTERN ____sdcc_ldi_256
184   0000              
185   0000              ;--------------------------------------------------------
186   0000              ; Public variables in this module
187   0000              ;--------------------------------------------------------
188   0000              	GLOBAL _spr_calc_index
189   0000              	GLOBAL _spr_chktime
190   0000              	GLOBAL _spr_move_up
191   0000              	GLOBAL _spr_move_down
192   0000              	GLOBAL _spr_move_horizontal
193   0000              	GLOBAL _spr_move_right
194   0000              	GLOBAL _spr_move_left
195   0000              	GLOBAL _spr_page_right
196   0000              	GLOBAL _spr_page_left
197   0000              	GLOBAL _spr_page_map
198   0000              	GLOBAL _spr_redraw
199   0000              	GLOBAL _spr_destroy
200   0000              	GLOBAL _spr_tile
201   0000              	GLOBAL _spr_tile_dir
202   0000              	GLOBAL _spr_draw_clear
203   0000              	GLOBAL _spr_brick_anim
204   0000              	GLOBAL _spr_draw_index
205   0000              	GLOBAL _spr_draw_row
206   0000              	GLOBAL _spr_calc_hor
207   0000              	GLOBAL _spr_back_repaint
208   0000              	GLOBAL _spr_tile_paint
209   0000              	GLOBAL _spr_init_anim_bullets
210   0000              	GLOBAL _spr_add_anim
211   0000              	GLOBAL _spr_play_anim
212   0000              	GLOBAL _spr_play_bullets
213   0000              	GLOBAL _spr_explode_bullet
214   0000              	GLOBAL _spr_turn_horizontal
215   0000              	GLOBAL _spr_btile_paint_back
216   0000              ;--------------------------------------------------------
217   0000              ; Externals used
218   0000              ;--------------------------------------------------------
219   0000              	GLOBAL _ulltoa_callee
220   0000              	GLOBAL _ulltoa
221   0000              	GLOBAL _strtoull_callee
222   0000              	GLOBAL _strtoull
223   0000              	GLOBAL _strtoll_callee
224   0000              	GLOBAL _strtoll
225   0000              	GLOBAL _lltoa_callee
226   0000              	GLOBAL _lltoa
227   0000              	GLOBAL _llabs_callee
228   0000              	GLOBAL _llabs
229   0000              	GLOBAL __lldivu__callee
230   0000              	GLOBAL __lldivu_
231   0000              	GLOBAL __lldiv__callee
232   0000              	GLOBAL __lldiv_
233   0000              	GLOBAL _atoll_callee
234   0000              	GLOBAL _atoll
235   0000              	GLOBAL _realloc_unlocked_callee
236   0000              	GLOBAL _realloc_unlocked
237   0000              	GLOBAL _malloc_unlocked_fastcall
238   0000              	GLOBAL _malloc_unlocked
239   0000              	GLOBAL _free_unlocked_fastcall
240   0000              	GLOBAL _free_unlocked
241   0000              	GLOBAL _calloc_unlocked_callee
242   0000              	GLOBAL _calloc_unlocked
243   0000              	GLOBAL _aligned_alloc_unlocked_callee
244   0000              	GLOBAL _aligned_alloc_unlocked
245   0000              	GLOBAL _realloc_callee
246   0000              	GLOBAL _realloc
247   0000              	GLOBAL _malloc_fastcall
248   0000              	GLOBAL _malloc
249   0000              	GLOBAL _free_fastcall
250   0000              	GLOBAL _free
251   0000              	GLOBAL _calloc_callee
252   0000              	GLOBAL _calloc
253   0000              	GLOBAL _aligned_alloc_callee
254   0000              	GLOBAL _aligned_alloc
255   0000              	GLOBAL _utoa_callee
256   0000              	GLOBAL _utoa
257   0000              	GLOBAL _ultoa_callee
258   0000              	GLOBAL _ultoa
259   0000              	GLOBAL _system_fastcall
260   0000              	GLOBAL _system
261   0000              	GLOBAL _strtoul_callee
262   0000              	GLOBAL _strtoul
263   0000              	GLOBAL _strtol_callee
264   0000              	GLOBAL _strtol
265   0000              	GLOBAL _strtof_callee
266   0000              	GLOBAL _strtof
267   0000              	GLOBAL _strtod_callee
268   0000              	GLOBAL _strtod
269   0000              	GLOBAL _srand_fastcall
270   0000              	GLOBAL _srand
271   0000              	GLOBAL _rand
272   0000              	GLOBAL _quick_exit_fastcall
273   0000              	GLOBAL _quick_exit
274   0000              	GLOBAL _qsort_callee
275   0000              	GLOBAL _qsort
276   0000              	GLOBAL _ltoa_callee
277   0000              	GLOBAL _ltoa
278   0000              	GLOBAL _labs_fastcall
279   0000              	GLOBAL _labs
280   0000              	GLOBAL _itoa_callee
281   0000              	GLOBAL _itoa
282   0000              	GLOBAL _ftoh_callee
283   0000              	GLOBAL _ftoh
284   0000              	GLOBAL _ftog_callee
285   0000              	GLOBAL _ftog
286   0000              	GLOBAL _ftoe_callee
287   0000              	GLOBAL _ftoe
288   0000              	GLOBAL _ftoa_callee
289   0000              	GLOBAL _ftoa
290   0000              	GLOBAL _exit_fastcall
291   0000              	GLOBAL _exit
292   0000              	GLOBAL _dtoh_callee
293   0000              	GLOBAL _dtoh
294   0000              	GLOBAL _dtog_callee
295   0000              	GLOBAL _dtog
296   0000              	GLOBAL _dtoe_callee
297   0000              	GLOBAL _dtoe
298   0000              	GLOBAL _dtoa_callee
299   0000              	GLOBAL _dtoa
300   0000              	GLOBAL _bsearch_callee
301   0000              	GLOBAL _bsearch
302   0000              	GLOBAL _atol_fastcall
303   0000              	GLOBAL _atol
304   0000              	GLOBAL _atoi_fastcall
305   0000              	GLOBAL _atoi
306   0000              	GLOBAL _atof_fastcall
307   0000              	GLOBAL _atof
308   0000              	GLOBAL _atexit_fastcall
309   0000              	GLOBAL _atexit
310   0000              	GLOBAL _at_quick_exit_fastcall
311   0000              	GLOBAL _at_quick_exit
312   0000              	GLOBAL _abs_fastcall
313   0000              	GLOBAL _abs
314   0000              	GLOBAL _abort
315   0000              	GLOBAL __strtou__callee
316   0000              	GLOBAL __strtou_
317   0000              	GLOBAL __strtoi__callee
318   0000              	GLOBAL __strtoi_
319   0000              	GLOBAL __random_uniform_xor_8__fastcall
320   0000              	GLOBAL __random_uniform_xor_8_
321   0000              	GLOBAL __random_uniform_xor_32__fastcall
322   0000              	GLOBAL __random_uniform_xor_32_
323   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
324   0000              	GLOBAL __random_uniform_cmwc_8_
325   0000              	GLOBAL __shellsort__callee
326   0000              	GLOBAL __shellsort_
327   0000              	GLOBAL __quicksort__callee
328   0000              	GLOBAL __quicksort_
329   0000              	GLOBAL __insertion_sort__callee
330   0000              	GLOBAL __insertion_sort_
331   0000              	GLOBAL __ldivu__callee
332   0000              	GLOBAL __ldivu_
333   0000              	GLOBAL __ldiv__callee
334   0000              	GLOBAL __ldiv_
335   0000              	GLOBAL __divu__callee
336   0000              	GLOBAL __divu_
337   0000              	GLOBAL __div__callee
338   0000              	GLOBAL __div_
339   0000              	GLOBAL _NIRVANAP_drawTW_raw_callee
340   0000              	GLOBAL _NIRVANAP_drawTW_raw
341   0000              	GLOBAL _NIRVANAP_drawTW_callee
342   0000              	GLOBAL _NIRVANAP_drawTW
343   0000              	GLOBAL _NIRVANAP_drawW_raw_callee
344   0000              	GLOBAL _NIRVANAP_drawW_raw
345   0000              	GLOBAL _NIRVANAP_drawW_callee
346   0000              	GLOBAL _NIRVANAP_drawW
347   0000              	GLOBAL _NIRVANAP_spriteT_callee
348   0000              	GLOBAL _NIRVANAP_spriteT
349   0000              	GLOBAL _NIRVANAP_fillC_callee
350   0000              	GLOBAL _NIRVANAP_fillC
351   0000              	GLOBAL _NIRVANAP_readC_callee
352   0000              	GLOBAL _NIRVANAP_readC
353   0000              	GLOBAL _NIRVANAP_paintC_callee
354   0000              	GLOBAL _NIRVANAP_paintC
355   0000              	GLOBAL _NIRVANAP_printC_callee
356   0000              	GLOBAL _NIRVANAP_printC
357   0000              	GLOBAL _NIRVANAP_fillT_raw_callee
358   0000              	GLOBAL _NIRVANAP_fillT_raw
359   0000              	GLOBAL _NIRVANAP_fillT_callee
360   0000              	GLOBAL _NIRVANAP_fillT
361   0000              	GLOBAL _NIRVANAP_drawT_raw_callee
362   0000              	GLOBAL _NIRVANAP_drawT_raw
363   0000              	GLOBAL _NIRVANAP_drawT_callee
364   0000              	GLOBAL _NIRVANAP_drawT
365   0000              	GLOBAL _NIRVANAP_stop
366   0000              	GLOBAL _NIRVANAP_start
367   0000              	GLOBAL _debug3
368   0000              	GLOBAL _debug2
369   0000              	GLOBAL _debug
370   0000              	GLOBAL _zx_print_str
371   0000              	GLOBAL _zx_print_int
372   0000              	GLOBAL _zx_print_chr
373   0000              	GLOBAL _zx_print_bonus_time
374   0000              	GLOBAL _zx_isr
375   0000              	GLOBAL _z80_otdr_callee
376   0000              	GLOBAL _z80_otdr
377   0000              	GLOBAL _z80_otir_callee
378   0000              	GLOBAL _z80_otir
379   0000              	GLOBAL _z80_outp_callee
380   0000              	GLOBAL _z80_outp
381   0000              	GLOBAL _z80_indr_callee
382   0000              	GLOBAL _z80_indr
383   0000              	GLOBAL _z80_inir_callee
384   0000              	GLOBAL _z80_inir
385   0000              	GLOBAL _z80_inp_fastcall
386   0000              	GLOBAL _z80_inp
387   0000              	GLOBAL _z80_set_int_state_fastcall
388   0000              	GLOBAL _z80_set_int_state
389   0000              	GLOBAL _z80_get_int_state
390   0000              	GLOBAL _z80_delay_tstate_fastcall
391   0000              	GLOBAL _z80_delay_tstate
392   0000              	GLOBAL _z80_delay_ms_fastcall
393   0000              	GLOBAL _z80_delay_ms
394   0000              	GLOBAL _im2_remove_generic_callback_callee
395   0000              	GLOBAL _im2_remove_generic_callback
396   0000              	GLOBAL _im2_prepend_generic_callback_callee
397   0000              	GLOBAL _im2_prepend_generic_callback
398   0000              	GLOBAL _im2_append_generic_callback_callee
399   0000              	GLOBAL _im2_append_generic_callback
400   0000              	GLOBAL _im2_create_generic_isr_8080_callee
401   0000              	GLOBAL _im2_create_generic_isr_8080
402   0000              	GLOBAL _im2_create_generic_isr_callee
403   0000              	GLOBAL _im2_create_generic_isr
404   0000              	GLOBAL _im2_install_isr_callee
405   0000              	GLOBAL _im2_install_isr
406   0000              	GLOBAL _im2_init_fastcall
407   0000              	GLOBAL _im2_init
408   0000              	GLOBAL _intrinsic_swap_word_32_fastcall
409   0000              	GLOBAL _intrinsic_swap_word_32
410   0000              	GLOBAL _intrinsic_swap_endian_32_fastcall
411   0000              	GLOBAL _intrinsic_swap_endian_32
412   0000              	GLOBAL _intrinsic_swap_endian_16_fastcall
413   0000              	GLOBAL _intrinsic_swap_endian_16
414   0000              	GLOBAL _intrinsic_return_de
415   0000              	GLOBAL _intrinsic_return_bc
416   0000              	GLOBAL _intrinsic_exx
417   0000              	GLOBAL _intrinsic_ex_de_hl
418   0000              	GLOBAL _intrinsic_nop
419   0000              	GLOBAL _intrinsic_im_2
420   0000              	GLOBAL _intrinsic_im_1
421   0000              	GLOBAL _intrinsic_im_0
422   0000              	GLOBAL _intrinsic_retn
423   0000              	GLOBAL _intrinsic_reti
424   0000              	GLOBAL _intrinsic_halt
425   0000              	GLOBAL _intrinsic_ei
426   0000              	GLOBAL _intrinsic_di
427   0000              	GLOBAL _intrinsic_stub
428   0000              	GLOBAL _intrinsic_outi
429   0000              	GLOBAL _intrinsic_ldi
430   0000              	GLOBAL _zx_pattern_fill_callee
431   0000              	GLOBAL _zx_pattern_fill
432   0000              	GLOBAL _zx_saddrpup_fastcall
433   0000              	GLOBAL _zx_saddrpup
434   0000              	GLOBAL _zx_saddrpright_callee
435   0000              	GLOBAL _zx_saddrpright
436   0000              	GLOBAL _zx_saddrpleft_callee
437   0000              	GLOBAL _zx_saddrpleft
438   0000              	GLOBAL _zx_saddrpdown_fastcall
439   0000              	GLOBAL _zx_saddrpdown
440   0000              	GLOBAL _zx_saddrcup_fastcall
441   0000              	GLOBAL _zx_saddrcup
442   0000              	GLOBAL _zx_saddrcright_fastcall
443   0000              	GLOBAL _zx_saddrcright
444   0000              	GLOBAL _zx_saddrcleft_fastcall
445   0000              	GLOBAL _zx_saddrcleft
446   0000              	GLOBAL _zx_saddrcdown_fastcall
447   0000              	GLOBAL _zx_saddrcdown
448   0000              	GLOBAL _zx_saddr2py_fastcall
449   0000              	GLOBAL _zx_saddr2py
450   0000              	GLOBAL _zx_saddr2px_fastcall
451   0000              	GLOBAL _zx_saddr2px
452   0000              	GLOBAL _zx_saddr2cy_fastcall
453   0000              	GLOBAL _zx_saddr2cy
454   0000              	GLOBAL _zx_saddr2cx_fastcall
455   0000              	GLOBAL _zx_saddr2cx
456   0000              	GLOBAL _zx_saddr2aaddr_fastcall
457   0000              	GLOBAL _zx_saddr2aaddr
458   0000              	GLOBAL _zx_py2saddr_fastcall
459   0000              	GLOBAL _zx_py2saddr
460   0000              	GLOBAL _zx_py2aaddr_fastcall
461   0000              	GLOBAL _zx_py2aaddr
462   0000              	GLOBAL _zx_pxy2saddr_callee
463   0000              	GLOBAL _zx_pxy2saddr
464   0000              	GLOBAL _zx_pxy2aaddr_callee
465   0000              	GLOBAL _zx_pxy2aaddr
466   0000              	GLOBAL _zx_px2bitmask_fastcall
467   0000              	GLOBAL _zx_px2bitmask
468   0000              	GLOBAL _zx_cy2saddr_fastcall
469   0000              	GLOBAL _zx_cy2saddr
470   0000              	GLOBAL _zx_cy2aaddr_fastcall
471   0000              	GLOBAL _zx_cy2aaddr
472   0000              	GLOBAL _zx_cxy2saddr_callee
473   0000              	GLOBAL _zx_cxy2saddr
474   0000              	GLOBAL _zx_cxy2aaddr_callee
475   0000              	GLOBAL _zx_cxy2aaddr
476   0000              	GLOBAL _zx_bitmask2px_fastcall
477   0000              	GLOBAL _zx_bitmask2px
478   0000              	GLOBAL _zx_aaddrcup_fastcall
479   0000              	GLOBAL _zx_aaddrcup
480   0000              	GLOBAL _zx_aaddrcright_fastcall
481   0000              	GLOBAL _zx_aaddrcright
482   0000              	GLOBAL _zx_aaddrcleft_fastcall
483   0000              	GLOBAL _zx_aaddrcleft
484   0000              	GLOBAL _zx_aaddrcdown_fastcall
485   0000              	GLOBAL _zx_aaddrcdown
486   0000              	GLOBAL _zx_aaddr2saddr_fastcall
487   0000              	GLOBAL _zx_aaddr2saddr
488   0000              	GLOBAL _zx_aaddr2py_fastcall
489   0000              	GLOBAL _zx_aaddr2py
490   0000              	GLOBAL _zx_aaddr2px_fastcall
491   0000              	GLOBAL _zx_aaddr2px
492   0000              	GLOBAL _zx_aaddr2cy_fastcall
493   0000              	GLOBAL _zx_aaddr2cy
494   0000              	GLOBAL _zx_aaddr2cx_fastcall
495   0000              	GLOBAL _zx_aaddr2cx
496   0000              	GLOBAL _zx_visit_wc_pix_callee
497   0000              	GLOBAL _zx_visit_wc_pix
498   0000              	GLOBAL _zx_visit_wc_attr_callee
499   0000              	GLOBAL _zx_visit_wc_attr
500   0000              	GLOBAL _zx_scroll_wc_up_pix_callee
501   0000              	GLOBAL _zx_scroll_wc_up_pix
502   0000              	GLOBAL _zx_scroll_wc_up_attr_callee
503   0000              	GLOBAL _zx_scroll_wc_up_attr
504   0000              	GLOBAL _zx_scroll_wc_up_callee
505   0000              	GLOBAL _zx_scroll_wc_up
506   0000              	GLOBAL _zx_scroll_up_pix_callee
507   0000              	GLOBAL _zx_scroll_up_pix
508   0000              	GLOBAL _zx_scroll_up_attr_callee
509   0000              	GLOBAL _zx_scroll_up_attr
510   0000              	GLOBAL _zx_scroll_up_callee
511   0000              	GLOBAL _zx_scroll_up
512   0000              	GLOBAL _zx_cls_wc_pix_callee
513   0000              	GLOBAL _zx_cls_wc_pix
514   0000              	GLOBAL _zx_cls_wc_attr_callee
515   0000              	GLOBAL _zx_cls_wc_attr
516   0000              	GLOBAL _zx_cls_wc_callee
517   0000              	GLOBAL _zx_cls_wc
518   0000              	GLOBAL _zx_cls_pix_fastcall
519   0000              	GLOBAL _zx_cls_pix
520   0000              	GLOBAL _zx_cls_attr_fastcall
521   0000              	GLOBAL _zx_cls_attr
522   0000              	GLOBAL _zx_cls_fastcall
523   0000              	GLOBAL _zx_cls
524   0000              	GLOBAL _zx_border_fastcall
525   0000              	GLOBAL _zx_border
526   0000              	GLOBAL _sound_hit_brick
527   0000              	GLOBAL _sound_hit_enemy
528   0000              	GLOBAL _sound_kill
529   0000              	GLOBAL _sound_enter_enemy
530   0000              	GLOBAL _sound_coin
531   0000              	GLOBAL _sound_jump
532   0000              	GLOBAL _sound_slide
533   0000              	GLOBAL _player_lost_life
534   0000              	GLOBAL _player_hit
535   0000              	GLOBAL _player_open_door
536   0000              	GLOBAL _player_move_jump
537   0000              	GLOBAL _player_fire
538   0000              	GLOBAL _player_check_stairs_down
539   0000              	GLOBAL _player_check_stairs
540   0000              	GLOBAL _player_tile
541   0000              	GLOBAL _player_pick_item
542   0000              	GLOBAL _player_check_floor
543   0000              	GLOBAL _player_hit_platform_clear
544   0000              	GLOBAL _player_score_add
545   0000              	GLOBAL _player_player_hit_pow
546   0000              	GLOBAL _player_hit_platform
547   0000              	GLOBAL _player_move_input
548   0000              	GLOBAL _player_turn
549   0000              	GLOBAL _player_move
550   0000              	GLOBAL _player_restart
551   0000              	GLOBAL _player_kill
552   0000              	GLOBAL _player_check_input
553   0000              	GLOBAL _player_collision
554   0000              	GLOBAL _player_init
555   0000              	GLOBAL _game_obj_clear
556   0000              	GLOBAL _game_obj_chk
557   0000              	GLOBAL _game_obj_set
558   0000              	GLOBAL _game_shoot_fire
559   0000              	GLOBAL _game_add_enemy
560   0000              	GLOBAL _game_joystick_set_menu
561   0000              	GLOBAL _game_joystick_set
562   0000              	GLOBAL _game_joystick_change
563   0000              	GLOBAL _game_print_header
564   0000              	GLOBAL _game_end
565   0000              	GLOBAL _game_phase_print_score_back
566   0000              	GLOBAL _game_check_time
567   0000              	GLOBAL _game_rotate_attrib
568   0000              	GLOBAL _game_colour_message
569   0000              	GLOBAL _game_paint_attrib_lin_h
570   0000              	GLOBAL _game_paint_attrib_lin
571   0000              	GLOBAL _game_paint_attrib
572   0000              	GLOBAL _game_print_score
573   0000              	GLOBAL _game_unfreeze_all
574   0000              	GLOBAL _game_freeze_all
575   0000              	GLOBAL _game_freeze
576   0000              	GLOBAL _game_enemy_add_get_index
577   0000              	GLOBAL _game_check_cell
578   0000              	GLOBAL _game_check_map
579   0000              	GLOBAL _game_loop
580   0000              	GLOBAL _game_round_init
581   0000              	GLOBAL _game_start_timer
582   0000              	GLOBAL _game_tick
583   0000              	GLOBAL _game_update_stats
584   0000              	GLOBAL _game_print_footer
585   0000              	GLOBAL _game_fill_row
586   0000              	GLOBAL _game_draw_screen
587   0000              	GLOBAL _enemy_avoid_fall_dead
588   0000              	GLOBAL _enemy_avoid_fall
589   0000              	GLOBAL _enemy_respawn
590   0000              	GLOBAL _enemy_init
591   0000              	GLOBAL _enemy_move
592   0000              	GLOBAL _enemy_turn
593   0000              	GLOBAL _enemy_hit
594   0000              	GLOBAL _enemy_coin1
595   0000              	GLOBAL _enemy_static
596   0000              	GLOBAL _enemy_walk
597   0000              	GLOBAL _enemy_horizontal
598   0000              	GLOBAL _enemy_vertical
599   0000              	GLOBAL _ay_fx_play
600   0000              	GLOBAL _ay_midi_play
601   0000              	GLOBAL _ay_is_playing
602   0000              	GLOBAL _ay_reset
603   0000              	GLOBAL _test_func
604   0000              	GLOBAL _test_proc
605   0000              	GLOBAL _in_mouse_kempston_wheel_delta
606   0000              	GLOBAL _in_mouse_kempston_wheel
607   0000              	GLOBAL _in_mouse_kempston_callee
608   0000              	GLOBAL _in_mouse_kempston
609   0000              	GLOBAL _in_mouse_kempston_setpos_callee
610   0000              	GLOBAL _in_mouse_kempston_setpos
611   0000              	GLOBAL _in_mouse_kempston_reset
612   0000              	GLOBAL _in_mouse_kempston_init
613   0000              	GLOBAL _in_mouse_amx_wheel_delta
614   0000              	GLOBAL _in_mouse_amx_wheel
615   0000              	GLOBAL _in_mouse_amx_callee
616   0000              	GLOBAL _in_mouse_amx
617   0000              	GLOBAL _in_mouse_amx_setpos_callee
618   0000              	GLOBAL _in_mouse_amx_setpos
619   0000              	GLOBAL _in_mouse_amx_reset
620   0000              	GLOBAL _in_mouse_amx_init_callee
621   0000              	GLOBAL _in_mouse_amx_init
622   0000              	GLOBAL _in_stick_sinclair2
623   0000              	GLOBAL _in_stick_sinclair1
624   0000              	GLOBAL _in_stick_kempston
625   0000              	GLOBAL _in_stick_fuller
626   0000              	GLOBAL _in_stick_cursor
627   0000              	GLOBAL _in_stick_keyboard_fastcall
628   0000              	GLOBAL _in_stick_keyboard
629   0000              	GLOBAL _in_wait_nokey
630   0000              	GLOBAL _in_wait_key
631   0000              	GLOBAL _in_test_key
632   0000              	GLOBAL _in_pause_fastcall
633   0000              	GLOBAL _in_pause
634   0000              	GLOBAL _in_key_scancode_fastcall
635   0000              	GLOBAL _in_key_scancode
636   0000              	GLOBAL _in_key_pressed_fastcall
637   0000              	GLOBAL _in_key_pressed
638   0000              	GLOBAL _in_inkey
639   0000              	GLOBAL _NIRVANAP_CHAR_TABLE
640   0000              	GLOBAL _NIRVANAP_WIDE_IMAGES
641   0000              	GLOBAL _NIRVANAP_TILE_IMAGES
642   0000              	GLOBAL _NIRVANAP_HOLE
643   0000              	GLOBAL _NIRVANAP_ISR_HOOK
644   0000              	GLOBAL _player_lvl_table
645   0000              	GLOBAL _map_paper_last
646   0000              	GLOBAL _map_paper_clr
647   0000              	GLOBAL _map_paper
648   0000              	GLOBAL _draw_count
649   0000              	GLOBAL _g_player_hit_right
650   0000              	GLOBAL _g_player_hit_left
651   0000              	GLOBAL _joynames
652   0000              	GLOBAL _initials
653   0000              	GLOBAL _bullet_count
654   0000              	GLOBAL _bullet_vel
655   0000              	GLOBAL _bullet_frames
656   0000              	GLOBAL _bullet_colint
657   0000              	GLOBAL _bullet_dir
658   0000              	GLOBAL _bullet_tile
659   0000              	GLOBAL _bullet_col
660   0000              	GLOBAL _bullet_lin
661   0000              	GLOBAL _bullet_col0
662   0000              	GLOBAL _bullet_lin0
663   0000              	GLOBAL _bullet_max
664   0000              	GLOBAL _bullet_class
665   0000              	GLOBAL _mush_class
666   0000              	GLOBAL _mush_index
667   0000              	GLOBAL _anim_count
668   0000              	GLOBAL _anim_respanwn
669   0000              	GLOBAL _anim_loop
670   0000              	GLOBAL _anim_end
671   0000              	GLOBAL _anim_int
672   0000              	GLOBAL _anim_tile
673   0000              	GLOBAL _anim_col
674   0000              	GLOBAL _anim_lin
675   0000              	GLOBAL _map_heigth
676   0000              	GLOBAL _map_width
677   0000              	GLOBAL _scr_curr
678   0000              	GLOBAL _scr_obj1
679   0000              	GLOBAL _scr_obj0
680   0000              	GLOBAL _scr_map
681   0000              	GLOBAL _sprite_speed_alt
682   0000              	GLOBAL _sprite_frames
683   0000              	GLOBAL _sprite_speed
684   0000              	GLOBAL _screen_ink
685   0000              	GLOBAL _screen_paper
686   0000              	GLOBAL _player_over_stair
687   0000              	GLOBAL _game_start_scr
688   0000              	GLOBAL _game_respawn_tile
689   0000              	GLOBAL _game_respawn_index
690   0000              	GLOBAL _game_respawn_time
691   0000              	GLOBAL _game_menu_sel
692   0000              	GLOBAL _game_score_top
693   0000              	GLOBAL _player_lives
694   0000              	GLOBAL _game_over
695   0000              	GLOBAL _game_sound
696   0000              	GLOBAL _game_inmune
697   0000              	GLOBAL _game_god_mode
698   0000              	GLOBAL _game_two_player
699   0000              	GLOBAL _game_brick_tile
700   0000              	GLOBAL _sprite_curr_index
701   0000              	GLOBAL _spr_count
702   0000              	GLOBAL _bullet_time
703   0000              	GLOBAL _anim_time
704   0000              	GLOBAL _frame_time
705   0000              	GLOBAL _entry_time
706   0000              	GLOBAL _curr_time
707   0000              	GLOBAL _s_state
708   0000              	GLOBAL _attrib_hl
709   0000              	GLOBAL _attrib
710   0000              	GLOBAL _zx_val_asm
711   0000              	GLOBAL _enemies
712   0000              	GLOBAL _tmp_ui
713   0000              	GLOBAL _tmp_sc
714   0000              	GLOBAL _tmp_uc
715   0000              	GLOBAL _tmp1
716   0000              	GLOBAL _tmp0
717   0000              	GLOBAL _tmp
718   0000              	GLOBAL _index1
719   0000              	GLOBAL _index0
720   0000              	GLOBAL _loop_count
721   0000              	GLOBAL _s_col1
722   0000              	GLOBAL _s_col0
723   0000              	GLOBAL _s_lin1
724   0000              	GLOBAL _s_lin0
725   0000              	GLOBAL _s_tile1
726   0000              	GLOBAL _s_tile0
727   0000              	GLOBAL _player_hit_count
728   0000              	GLOBAL _sprite_horizontal_check
729   0000              	GLOBAL _sprite_on_air
730   0000              	GLOBAL _sprite
731   0000              	GLOBAL _game_respawn_curr_time
732   0000              	GLOBAL _game_world
733   0000              	GLOBAL _game_gravity
734   0000              	GLOBAL _player_hit_time
735   0000              	GLOBAL _player_lin_scr
736   0000              	GLOBAL _player_col_scr
737   0000              	GLOBAL _player_lvl
738   0000              	GLOBAL _player_int
739   0000              	GLOBAL _player_str
740   0000              	GLOBAL _player_max_vita
741   0000              	GLOBAL _player_max_mana
742   0000              	GLOBAL _player_vita
743   0000              	GLOBAL _player_mana
744   0000              	GLOBAL _player_keys
745   0000              	GLOBAL _player_vel_inc
746   0000              	GLOBAL _player_vel_y1
747   0000              	GLOBAL _player_vel_y0
748   0000              	GLOBAL _player_vel_y
749   0000              	GLOBAL _player_vel_x
750   0000              	GLOBAL _player_joy
751   0000              	GLOBAL _player_score
752   0000              	GLOBAL _last_time
753   0000              	GLOBAL _player_slide
754   0000              	GLOBAL _spr_timer
755   0000              	GLOBAL _jump_lin
756   0000              	GLOBAL _player_hit_col
757   0000              	GLOBAL _player_hit_lin
758   0000              	GLOBAL _colint
759   0000              	GLOBAL _col
760   0000              	GLOBAL _lin
761   0000              	GLOBAL _tile
762   0000              	GLOBAL _state_a
763   0000              	GLOBAL _state
764   0000              	GLOBAL _class
765   0000              	GLOBAL _tbuffer
766   0000              	GLOBAL _dirs
767   0000              	GLOBAL _k1
768   0000              	GLOBAL _joyfunc1
769   0000              	GLOBAL _btiles
770   0000              	GLOBAL _spec128
771   0000              	GLOBAL _GLOBAL_ZX_PORT_7FFD
772   0000              	GLOBAL _GLOBAL_ZX_PORT_1FFD
773   0000              	GLOBAL _GLOBAL_ZX_PORT_FE
774   0000              	GLOBAL _ay_effect_20
775   0000              	GLOBAL _ay_effect_19
776   0000              	GLOBAL _ay_effect_18
777   0000              	GLOBAL _ay_effect_17
778   0000              	GLOBAL _ay_effect_16
779   0000              	GLOBAL _ay_effect_15
780   0000              	GLOBAL _ay_effect_14
781   0000              	GLOBAL _ay_effect_13
782   0000              	GLOBAL _ay_effect_12
783   0000              	GLOBAL _ay_effect_11
784   0000              	GLOBAL _ay_effect_10
785   0000              	GLOBAL _ay_effect_09
786   0000              	GLOBAL _ay_effect_08
787   0000              	GLOBAL _ay_effect_07
788   0000              	GLOBAL _ay_effect_06
789   0000              	GLOBAL _ay_effect_05
790   0000              	GLOBAL _ay_effect_04
791   0000              	GLOBAL _ay_effect_03
792   0000              	GLOBAL _ay_effect_02
793   0000              	GLOBAL _ay_effect_01
794   0000              	GLOBAL _pb_midi_phase_1
795   0000              	GLOBAL _pb_midi_title
796   0000              	GLOBAL _control_method
797   0000              	GLOBAL _world0
798   0000              	GLOBAL _lenght0
799   0000              	GLOBAL _start_scr0
800   0000              ;--------------------------------------------------------
801   0000              ; special function registers
802   0000              ;--------------------------------------------------------
803   0000              defc _IO_FE	=	0x00fe
804   0000              defc _IO_1FFD	=	0x1ffd
805   0000              defc _IO_7FFD	=	0x7ffd
806   0000              ;--------------------------------------------------------
807   0000              ; ram data
808   0000              ;--------------------------------------------------------
809   0000              	SECTION bss_compiler
810   0000              ;--------------------------------------------------------
811   0000              ; ram data
812   0000              ;--------------------------------------------------------
813   0000              
814   0000              IF 0
815   0000              
816   0000              ; .area _INITIALIZED removed by z88dk
817   0000              
818   0000              
819   0000              ENDIF
820   0000              
821   0000              ;--------------------------------------------------------
822   0000              ; absolute external ram data
823   0000              ;--------------------------------------------------------
824   0000              	SECTION IGNORE
825   0000              ;--------------------------------------------------------
826   0000              ; global & static initialisations
827   0000              ;--------------------------------------------------------
828   0000              	SECTION code_crt_init
829   0000              ;--------------------------------------------------------
830   0000              ; Home
831   0000              ;--------------------------------------------------------
832   0000              	SECTION IGNORE
833   0000              ;--------------------------------------------------------
834   0000              ; code
835   0000              ;--------------------------------------------------------
836   0000              	SECTION code_compiler
837   0000              ;	---------------------------------
838   0000              ; Function spr_calc_index
839   0000              ; ---------------------------------
840   0000              _spr_calc_index:
841   0000  CD 00 00    	call	___sdcc_enter_ix
842   0003  DD 4E 05    	ld	c,(ix+5)
843   0006  CB 39       	srl	c
844   0008  06 00       	ld	b,0x00
845   000A  DD 7E 04    	ld	a,(ix+4)
846   000D  07          	rlca
847   000E  07          	rlca
848   000F  07          	rlca
849   0010  07          	rlca
850   0011  E6 0F       	and	a,0x0f
851   0013  6F          	ld	l, a
852   0014  26 00       	ld	h,0x00
853   0016  29          	add	hl, hl
854   0017  29          	add	hl, hl
855   0018  29          	add	hl, hl
856   0019  29          	add	hl, hl
857   001A  09          	add	hl, bc
858   001B  DD E1       	pop	ix
859   001D  C9          	ret
860   001E              	SECTION code_compiler
861   001E              ;	---------------------------------
862   001E              ; Function spr_chktime
863   001E              ; ---------------------------------
864   001E              _spr_chktime:
865   001E  CD 00 00    	call	___sdcc_enter_ix
866   0021  F5          	push	af
867   0022  DD 75 FE    	ld	(ix-2),l
868   0025  DD 74 FF    	ld	(ix-1),h
869   0028  E1          	pop	hl
870   0029  01 00 00    	ld	bc,_sprite_speed_alt+0
871   002C  5E          	ld	e,(hl)
872   002D  E5          	push	hl
873   002E  6B          	ld	l,e
874   002F  26 00       	ld	h,0x00
875   0031  09          	add	hl, bc
876   0032  7E          	ld	a,(hl)
877   0033  57          	ld	d,a
878   0034  B7          	or	a, a
879   0035  20 13       	jr	NZ,l_spr_chktime_00102
880   0037  01 00 00    	ld	bc,_sprite_speed+0
881   003A  16 00       	ld	d,0x00
882   003C  21 00 00    	ld	hl,_class
883   003F  19          	add	hl, de
884   0040  6E          	ld	l, (hl)
885   0041  26 00       	ld	h,0x00
886   0043  09          	add	hl, bc
887   0044  7E          	ld	a, (hl)
888   0045  32 00 00    	ld	(_tmp),a
889   0048  18 04       	jr	l_spr_chktime_00103
890   004A              l_spr_chktime_00102:
891   004A  21 00 00    	ld	hl,_tmp
892   004D  72          	ld	(hl), d
893   004E              l_spr_chktime_00103:
894   004E  3A 00 00    	ld	a,(_tmp)
895   0051  4F          	ld	c,a
896   0052  06 00       	ld	b,0x00
897   0054  60          	ld	h,b
898   0055  6B          	ld	l, e
899   0056  29          	add	hl, hl
900   0057  11 00 00    	ld	de,_last_time
901   005A  19          	add	hl, de
902   005B  5E          	ld	e, (hl)
903   005C  23          	inc	hl
904   005D  56          	ld	d, (hl)
905   005E  C5          	push	bc
906   005F  D5          	push	de
907   0060  CD 00 00    	call	_game_check_time
908   0063  F1          	pop	af
909   0064  F1          	pop	af
910   0065  7D          	ld	a, l
911   0066  B7          	or	a, a
912   0067  28 15       	jr	Z,l_spr_chktime_00105
913   0069  E1          	pop	hl
914   006A  E5          	push	hl
915   006B  6E          	ld	l, (hl)
916   006C  26 00       	ld	h,0x00
917   006E  29          	add	hl, hl
918   006F  01 00 00    	ld	bc,_last_time
919   0072  09          	add	hl,bc
920   0073  ED 5B 00 00 	ld	de,(_curr_time)
921   0077  73          	ld	(hl),e
922   0078  23          	inc	hl
923   0079  72          	ld	(hl),d
924   007A  2E 01       	ld	l,0x01
925   007C  18 02       	jr	l_spr_chktime_00106
926   007E              l_spr_chktime_00105:
927   007E  2E 00       	ld	l,0x00
928   0080              l_spr_chktime_00106:
929   0080  F1          	pop	af
930   0081  DD E1       	pop	ix
931   0083  C9          	ret
932   0084              	SECTION code_compiler
933   0084              ;	---------------------------------
934   0084              ; Function spr_move_up
935   0084              ; ---------------------------------
936   0084              _spr_move_up:
937   0084  2A 00 00    	ld	hl,(_sprite)
938   0087  26 00       	ld	h,0x00
939   0089  01 00 00    	ld	bc,_lin
940   008C  09          	add	hl,bc
941   008D  7E          	ld	a,(hl)
942   008E  C6 FE       	add	a,0xfe
943   0090  32 00 00    	ld	(_s_lin1),a
944   0093  07          	rlca
945   0094  07          	rlca
946   0095  07          	rlca
947   0096  07          	rlca
948   0097  E6 0F       	and	a,0x0f
949   0099  4F          	ld	c, a
950   009A  3A 00 00    	ld	a,(_s_lin0)
951   009D  07          	rlca
952   009E  07          	rlca
953   009F  07          	rlca
954   00A0  07          	rlca
955   00A1  E6 0F       	and	a,0x0f
956   00A3  47          	ld	b, a
957   00A4  79          	ld	a, c
958   00A5  90          	sub	a, b
959   00A6  20 04       	jr	NZ,l_spr_move_up_00122
960   00A8  3E 01       	ld	a,0x01
961   00AA  18 01       	jr	l_spr_move_up_00123
962   00AC              l_spr_move_up_00122:
963   00AC  AF          	xor	a,a
964   00AD              l_spr_move_up_00123:
965   00AD  EE 01       	xor	a,0x01
966   00AF  28 1D       	jr	Z,l_spr_move_up_00104
967   00B1  2A 00 00    	ld	hl,(_sprite)
968   00B4  26 00       	ld	h,0x00
969   00B6  01 00 00    	ld	bc,_col
970   00B9  09          	add	hl,bc
971   00BA  7E          	ld	a,(hl)
972   00BB  F5          	push	af
973   00BC  33          	inc	sp
974   00BD  3A 00 00    	ld	a,(_s_lin1)
975   00C0  F5          	push	af
976   00C1  33          	inc	sp
977   00C2  CD 00 00    	call	_game_check_map
978   00C5  F1          	pop	af
979   00C6  7C          	ld	a,h
980   00C7  B5          	or	a,l
981   00C8  28 04       	jr	Z,l_spr_move_up_00104
982   00CA  2E 01       	ld	l,0x01
983   00CC  18 1F       	jr	l_spr_move_up_00108
984   00CE              l_spr_move_up_00104:
985   00CE  2A 00 00    	ld	hl,(_sprite)
986   00D1  26 00       	ld	h,0x00
987   00D3  01 00 00    	ld	bc,_lin
988   00D6  09          	add	hl,bc
989   00D7  3E 90       	ld	a,0x90
990   00D9  4D          	ld	c,l
991   00DA  44          	ld	b,h
992   00DB  21 00 00    	ld	hl,_s_lin1
993   00DE  96          	sub	a, (hl)
994   00DF  30 06       	jr	NC,l_spr_move_up_00106
995   00E1  AF          	xor	a, a
996   00E2  02          	ld	(bc), a
997   00E3  2E 01       	ld	l,0x01
998   00E5  18 06       	jr	l_spr_move_up_00108
999   00E7              l_spr_move_up_00106:
1000  00E7  3A 00 00    	ld	a,(_s_lin1)
1001  00EA  02          	ld	(bc), a
1002  00EB  2E 00       	ld	l,0x00
1003  00ED              l_spr_move_up_00108:
1004  00ED  C9          	ret
1005  00EE              	SECTION code_compiler
1006  00EE              ;	---------------------------------
1007  00EE              ; Function spr_move_down
1008  00EE              ; ---------------------------------
1009  00EE              _spr_move_down:
1010  00EE  2A 00 00    	ld	hl,(_sprite)
1011  00F1  26 00       	ld	h,0x00
1012  00F3  01 00 00    	ld	bc,_lin
1013  00F6  09          	add	hl,bc
1014  00F7  7E          	ld	a,(hl)
1015  00F8  C6 10       	add	a,0x10
1016  00FA  32 00 00    	ld	(_s_lin1),a
1017  00FD  07          	rlca
1018  00FE  07          	rlca
1019  00FF  07          	rlca
1020  0100  07          	rlca
1021  0101  E6 0F       	and	a,0x0f
1022  0103  4F          	ld	c, a
1023  0104  3A 00 00    	ld	a,(_s_lin0)
1024  0107  07          	rlca
1025  0108  07          	rlca
1026  0109  07          	rlca
1027  010A  07          	rlca
1028  010B  E6 0F       	and	a,0x0f
1029  010D  47          	ld	b, a
1030  010E  79          	ld	a, c
1031  010F  90          	sub	a, b
1032  0110  20 04       	jr	NZ,l_spr_move_down_00122
1033  0112  3E 01       	ld	a,0x01
1034  0114  18 01       	jr	l_spr_move_down_00123
1035  0116              l_spr_move_down_00122:
1036  0116  AF          	xor	a,a
1037  0117              l_spr_move_down_00123:
1038  0117  EE 01       	xor	a,0x01
1039  0119  28 1D       	jr	Z,l_spr_move_down_00104
1040  011B  2A 00 00    	ld	hl,(_sprite)
1041  011E  26 00       	ld	h,0x00
1042  0120  01 00 00    	ld	bc,_col
1043  0123  09          	add	hl,bc
1044  0124  7E          	ld	a,(hl)
1045  0125  F5          	push	af
1046  0126  33          	inc	sp
1047  0127  3A 00 00    	ld	a,(_s_lin1)
1048  012A  F5          	push	af
1049  012B  33          	inc	sp
1050  012C  CD 00 00    	call	_game_check_map
1051  012F  F1          	pop	af
1052  0130  7C          	ld	a,h
1053  0131  B5          	or	a,l
1054  0132  28 04       	jr	Z,l_spr_move_down_00104
1055  0134  2E 01       	ld	l,0x01
1056  0136  18 22       	jr	l_spr_move_down_00108
1057  0138              l_spr_move_down_00104:
1058  0138  2A 00 00    	ld	hl,(_sprite)
1059  013B  26 00       	ld	h,0x00
1060  013D  01 00 00    	ld	bc,_lin
1061  0140  09          	add	hl,bc
1062  0141  3E 90       	ld	a,0x90
1063  0143  4D          	ld	c,l
1064  0144  44          	ld	b,h
1065  0145  21 00 00    	ld	hl,_s_lin1
1066  0148  96          	sub	a, (hl)
1067  0149  30 07       	jr	NC,l_spr_move_down_00106
1068  014B  3E 90       	ld	a,0x90
1069  014D  02          	ld	(bc), a
1070  014E  2E 01       	ld	l,0x01
1071  0150  18 08       	jr	l_spr_move_down_00108
1072  0152              l_spr_move_down_00106:
1073  0152  3A 00 00    	ld	a,(_s_lin1)
1074  0155  C6 F2       	add	a,0xf2
1075  0157  02          	ld	(bc), a
1076  0158  2E 00       	ld	l,0x00
1077  015A              l_spr_move_down_00108:
1078  015A  C9          	ret
1079  015B              	SECTION code_compiler
1080  015B              ;	---------------------------------
1081  015B              ; Function spr_move_horizontal
1082  015B              ; ---------------------------------
1083  015B              _spr_move_horizontal:
1084  015B  2A 00 00    	ld	hl,(_sprite)
1085  015E  26 00       	ld	h,0x00
1086  0160  01 00 00    	ld	bc,_state
1087  0163  09          	add	hl,bc
1088  0164  7E          	ld	a,(hl)
1089  0165  CB 57       	bit	2, a
1090  0167  28 05       	jr	Z,l_spr_move_horizontal_00104
1091  0169  CD 7A 01    	call	_spr_move_right
1092  016C  18 0B       	jr	l_spr_move_horizontal_00106
1093  016E              l_spr_move_horizontal_00104:
1094  016E  CB 5F       	bit	3, a
1095  0170  28 05       	jr	Z,l_spr_move_horizontal_00105
1096  0172  CD 76 02    	call	_spr_move_left
1097  0175  18 02       	jr	l_spr_move_horizontal_00106
1098  0177              l_spr_move_horizontal_00105:
1099  0177  2E 00       	ld	l,0x00
1100  0179              l_spr_move_horizontal_00106:
1101  0179  C9          	ret
1102  017A              	SECTION code_compiler
1103  017A              ;	---------------------------------
1104  017A              ; Function spr_move_right
1105  017A              ; ---------------------------------
1106  017A              _spr_move_right:
1107  017A  2A 00 00    	ld	hl,(_sprite)
1108  017D  26 00       	ld	h,0x00
1109  017F  01 00 00    	ld	bc,_colint
1110  0182  09          	add	hl,bc
1111  0183  7E          	ld	a,(hl)
1112  0184  3C          	inc	a
1113  0185  77          	ld	(hl),a
1114  0186  4F          	ld	c,a
1115  0187  3A 00 00    	ld	a,(_sprite)
1116  018A  5F          	ld	e,a
1117  018B  16 00       	ld	d,0x00
1118  018D  21 00 00    	ld	hl,_class
1119  0190  19          	add	hl,de
1120  0191  5E          	ld	e, (hl)
1121  0192  16 00       	ld	d,0x00
1122  0194  21 00 00    	ld	hl,_sprite_frames
1123  0197  19          	add	hl, de
1124  0198  7E          	ld	a, (hl)
1125  0199  91          	sub	a, c
1126  019A  C2 73 02    	jp	NZ,l_spr_move_right_00118
1127  019D  2A 00 00    	ld	hl,(_sprite)
1128  01A0  26 00       	ld	h,0x00
1129  01A2  01 00 00    	ld	bc,_lin
1130  01A5  09          	add	hl,bc
1131  01A6  7E          	ld	a,(hl)
1132  01A7  32 00 00    	ld	(_s_lin1),a
1133  01AA  2A 00 00    	ld	hl,(_sprite)
1134  01AD  26 00       	ld	h,0x00
1135  01AF  01 00 00    	ld	bc,_col
1136  01B2  09          	add	hl,bc
1137  01B3  7E          	ld	a,(hl)
1138  01B4  FE 1E       	cp	a,0x1e
1139  01B6  30 5E       	jr	NC,l_spr_move_right_00108
1140  01B8  3C          	inc	a
1141  01B9  32 00 00    	ld	(_s_col1),a
1142  01BC  21 00 00    	ld	hl,_sprite_horizontal_check
1143  01BF  36 01       	ld	(hl),0x01
1144  01C1  2A FF FF    	ld	hl,(_s_col1 - 1)
1145  01C4  3A 00 00    	ld	a,(_s_lin1)
1146  01C7  6F          	ld	l,a
1147  01C8  E5          	push	hl
1148  01C9  CD 00 00    	call	_game_check_map
1149  01CC  F1          	pop	af
1150  01CD  7D          	ld	a,l
1151  01CE  32 00 00    	ld	(_tmp0),a
1152  01D1  B7          	or	a, a
1153  01D2  20 13       	jr	NZ,l_spr_move_right_00102
1154  01D4  3A 00 00    	ld	a,(_s_lin1)
1155  01D7  C6 0F       	add	a,0x0f
1156  01D9  4F          	ld	c, a
1157  01DA  3A 00 00    	ld	a, (_s_col1)
1158  01DD  47          	ld	b,a
1159  01DE  C5          	push	bc
1160  01DF  CD 00 00    	call	_game_check_map
1161  01E2  F1          	pop	af
1162  01E3  7D          	ld	a,l
1163  01E4  32 00 00    	ld	(_tmp0),a
1164  01E7              l_spr_move_right_00102:
1165  01E7  21 00 00    	ld	hl,_sprite_horizontal_check
1166  01EA  36 00       	ld	(hl),0x00
1167  01EC  3A 00 00    	ld	a,(_tmp0)
1168  01EF  B7          	or	a, a
1169  01F0  28 24       	jr	Z,l_spr_move_right_00108
1170  01F2  2A 00 00    	ld	hl,(_sprite)
1171  01F5  26 00       	ld	h,0x00
1172  01F7  01 00 00    	ld	bc,_colint
1173  01FA  09          	add	hl,bc
1174  01FB  7E          	ld	a,(hl)
1175  01FC  C6 FF       	add	a,0xff
1176  01FE  77          	ld	(hl),a
1177  01FF  3A 00 00    	ld	a,(_sprite_on_air)
1178  0202  B7          	or	a,a
1179  0203  20 0D       	jr	NZ,l_spr_move_right_00104
1180  0205  2A 00 00    	ld	hl,(_sprite)
1181  0208  26 00       	ld	h,0x00
1182  020A  01 00 00    	ld	bc,_colint
1183  020D  09          	add	hl,bc
1184  020E  7E          	ld	a,(hl)
1185  020F  C6 FF       	add	a,0xff
1186  0211  77          	ld	(hl),a
1187  0212              l_spr_move_right_00104:
1188  0212  2E 01       	ld	l,0x01
1189  0214  18 5F       	jr	l_spr_move_right_00119
1190  0216              l_spr_move_right_00108:
1191  0216  2A 00 00    	ld	hl,(_sprite)
1192  0219  26 00       	ld	h,0x00
1193  021B  01 00 00    	ld	bc,_col
1194  021E  09          	add	hl,bc
1195  021F  34          	inc	(hl)
1196  0220  2A 00 00    	ld	hl,(_sprite)
1197  0223  26 00       	ld	h,0x00
1198  0225  01 00 00    	ld	bc,_colint
1199  0228  09          	add	hl,bc
1200  0229  AF          	xor	a,a
1201  022A  77          	ld	(hl),a
1202  022B  2A 00 00    	ld	hl,(_sprite)
1203  022E  26 00       	ld	h,0x00
1204  0230  01 00 00    	ld	bc,_col
1205  0233  09          	add	hl,bc
1206  0234  5E          	ld	e,(hl)
1207  0235  3E 1E       	ld	a,0x1e
1208  0237  93          	sub	a,e
1209  0238  30 39       	jr	NC,l_spr_move_right_00118
1210  023A  3A 00 00    	ld	a,(_sprite)
1211  023D  D6 07       	sub	a,0x07
1212  023F  28 04       	jr	Z,l_spr_move_right_00156
1213  0241  4D          	ld	c,l
1214  0242  44          	ld	b,h
1215  0243  18 27       	jr	l_spr_move_right_00113
1216  0245              l_spr_move_right_00156:
1217  0245  CD 75 03    	call	_spr_page_right
1218  0248  3A 00 00    	ld	a,(_sprite)
1219  024B  C6 00       	add	a,+((_col) & 0xFF)
1220  024D  4D          	ld	c,l
1221  024E  5F          	ld	e,a
1222  024F  3E 00       	ld	a,+((_col) / 256)
1223  0251  CE 00       	adc	a,0x00
1224  0253  57          	ld	d,a
1225  0254  79          	ld	a, c
1226  0255  B7          	or	a, a
1227  0256  28 0F       	jr	Z,l_spr_move_right_00110
1228  0258  AF          	xor	a, a
1229  0259  12          	ld	(de), a
1230  025A  3A 07 00    	ld	a,(_lin + 7)
1231  025D  32 00 00    	ld	(_player_lin_scr),a
1232  0260  21 00 00    	ld	hl,_player_col_scr
1233  0263  36 00       	ld	(hl),0x00
1234  0265  18 08       	jr	l_spr_move_right_00114
1235  0267              l_spr_move_right_00110:
1236  0267  3E 1E       	ld	a,0x1e
1237  0269  12          	ld	(de), a
1238  026A  18 03       	jr	l_spr_move_right_00114
1239  026C              l_spr_move_right_00113:
1240  026C  3E 1E       	ld	a,0x1e
1241  026E  02          	ld	(bc), a
1242  026F              l_spr_move_right_00114:
1243  026F  2E 01       	ld	l,0x01
1244  0271  18 02       	jr	l_spr_move_right_00119
1245  0273              l_spr_move_right_00118:
1246  0273  2E 00       	ld	l,0x00
1247  0275              l_spr_move_right_00119:
1248  0275  C9          	ret
1249  0276              	SECTION code_compiler
1250  0276              ;	---------------------------------
1251  0276              ; Function spr_move_left
1252  0276              ; ---------------------------------
1253  0276              _spr_move_left:
1254  0276  01 00 00    	ld	bc,_colint+0
1255  0279  79          	ld	a, c
1256  027A  21 00 00    	ld	hl,_sprite
1257  027D  86          	add	a, (hl)
1258  027E  5F          	ld	e, a
1259  027F  78          	ld	a, b
1260  0280  CE 00       	adc	a,0x00
1261  0282  57          	ld	d, a
1262  0283  1A          	ld	a, (de)
1263  0284  C6 FF       	add	a,0xff
1264  0286  12          	ld	(de), a
1265  0287  79          	ld	a, c
1266  0288  86          	add	a, (hl)
1267  0289  5F          	ld	e, a
1268  028A  78          	ld	a, b
1269  028B  CE 00       	adc	a,0x00
1270  028D  57          	ld	d, a
1271  028E  1A          	ld	a, (de)
1272  028F  3C          	inc	a
1273  0290  C2 72 03    	jp	NZ,l_spr_move_left_00118
1274  0293  5E          	ld	e,(hl)
1275  0294  16 00       	ld	d,0x00
1276  0296  21 00 00    	ld	hl,_lin
1277  0299  19          	add	hl,de
1278  029A  7E          	ld	a,(hl)
1279  029B  32 00 00    	ld	(_s_lin1),a
1280  029E  2A 00 00    	ld	hl,(_sprite)
1281  02A1  26 00       	ld	h,0x00
1282  02A3  11 00 00    	ld	de,_col
1283  02A6  19          	add	hl,de
1284  02A7  7E          	ld	a,(hl)
1285  02A8  B7          	or	a, a
1286  02A9  28 5A       	jr	Z,l_spr_move_left_00108
1287  02AB  C6 FF       	add	a,0xff
1288  02AD  32 00 00    	ld	(_s_col1),a
1289  02B0  21 00 00    	ld	hl,_sprite_horizontal_check
1290  02B3  36 01       	ld	(hl),0x01
1291  02B5  3A 00 00    	ld	a,(_s_col1)
1292  02B8  C5          	push	bc
1293  02B9  F5          	push	af
1294  02BA  33          	inc	sp
1295  02BB  3A 00 00    	ld	a,(_s_lin1)
1296  02BE  F5          	push	af
1297  02BF  33          	inc	sp
1298  02C0  CD 00 00    	call	_game_check_map
1299  02C3  F1          	pop	af
1300  02C4  C1          	pop	bc
1301  02C5  7D          	ld	a,l
1302  02C6  32 00 00    	ld	(_tmp0),a
1303  02C9  B7          	or	a, a
1304  02CA  20 16       	jr	NZ,l_spr_move_left_00102
1305  02CC  3A 00 00    	ld	a,(_s_lin1)
1306  02CF  C6 0F       	add	a,0x0f
1307  02D1  57          	ld	d, a
1308  02D2  3A 00 00    	ld	a,(_s_col1)
1309  02D5  C5          	push	bc
1310  02D6  5A          	ld	e,d
1311  02D7  57          	ld	d,a
1312  02D8  D5          	push	de
1313  02D9  CD 00 00    	call	_game_check_map
1314  02DC  F1          	pop	af
1315  02DD  C1          	pop	bc
1316  02DE  7D          	ld	a,l
1317  02DF  32 00 00    	ld	(_tmp0),a
1318  02E2              l_spr_move_left_00102:
1319  02E2  21 00 00    	ld	hl,_sprite_horizontal_check
1320  02E5  36 00       	ld	(hl),0x00
1321  02E7  3A 00 00    	ld	a,(_tmp0)
1322  02EA  B7          	or	a, a
1323  02EB  28 18       	jr	Z,l_spr_move_left_00108
1324  02ED  2A 00 00    	ld	hl,(_sprite)
1325  02F0  26 00       	ld	h,0x00
1326  02F2  09          	add	hl,bc
1327  02F3  34          	inc	(hl)
1328  02F4  3A 00 00    	ld	a,(_sprite_on_air)
1329  02F7  B7          	or	a, a
1330  02F8  20 07       	jr	NZ,l_spr_move_left_00104
1331  02FA  2A 00 00    	ld	hl,(_sprite)
1332  02FD  26 00       	ld	h,0x00
1333  02FF  09          	add	hl,bc
1334  0300  34          	inc	(hl)
1335  0301              l_spr_move_left_00104:
1336  0301  2E 01       	ld	l,0x01
1337  0303  18 6F       	jr	l_spr_move_left_00119
1338  0305              l_spr_move_left_00108:
1339  0305  2A 00 00    	ld	hl,(_sprite)
1340  0308  26 00       	ld	h,0x00
1341  030A  11 00 00    	ld	de,_col
1342  030D  19          	add	hl,de
1343  030E  7E          	ld	a,(hl)
1344  030F  EB          	ex	de,hl
1345  0310  C6 FF       	add	a,0xff
1346  0312  12          	ld	(de),a
1347  0313  79          	ld	a,c
1348  0314  21 00 00    	ld	hl,_sprite
1349  0317  86          	add	a, (hl)
1350  0318  4F          	ld	c, a
1351  0319  78          	ld	a, b
1352  031A  CE 00       	adc	a,0x00
1353  031C  47          	ld	b, a
1354  031D  5E          	ld	e,(hl)
1355  031E  16 00       	ld	d,0x00
1356  0320  21 00 00    	ld	hl,_class
1357  0323  19          	add	hl,de
1358  0324  5E          	ld	e, (hl)
1359  0325  16 00       	ld	d,0x00
1360  0327  21 00 00    	ld	hl,_sprite_frames
1361  032A  19          	add	hl, de
1362  032B  5E          	ld	e, (hl)
1363  032C  1D          	dec	e
1364  032D  7B          	ld	a, e
1365  032E  02          	ld	(bc), a
1366  032F  2A 00 00    	ld	hl,(_sprite)
1367  0332  26 00       	ld	h,0x00
1368  0334  01 00 00    	ld	bc,_col
1369  0337  09          	add	hl,bc
1370  0338  7E          	ld	a,(hl)
1371  0339  3C          	inc	a
1372  033A  20 36       	jr	NZ,l_spr_move_left_00118
1373  033C  3A 00 00    	ld	a,(_sprite)
1374  033F  D6 07       	sub	a,0x07
1375  0341  4D          	ld	c,l
1376  0342  44          	ld	b,h
1377  0343  20 27       	jr	NZ,l_spr_move_left_00113
1378  0345  CD 8F 03    	call	_spr_page_left
1379  0348  3A 00 00    	ld	a,(_sprite)
1380  034B  C6 00       	add	a,+((_col) & 0xFF)
1381  034D  4D          	ld	c,l
1382  034E  5F          	ld	e,a
1383  034F  3E 00       	ld	a,+((_col) / 256)
1384  0351  CE 00       	adc	a,0x00
1385  0353  57          	ld	d,a
1386  0354  79          	ld	a, c
1387  0355  B7          	or	a, a
1388  0356  28 10       	jr	Z,l_spr_move_left_00110
1389  0358  3E 1E       	ld	a,0x1e
1390  035A  12          	ld	(de), a
1391  035B  3A 07 00    	ld	a,(_lin + 7)
1392  035E  32 00 00    	ld	(_player_lin_scr),a
1393  0361  21 00 00    	ld	hl,_player_col_scr
1394  0364  36 1E       	ld	(hl),0x1e
1395  0366  18 06       	jr	l_spr_move_left_00114
1396  0368              l_spr_move_left_00110:
1397  0368  AF          	xor	a, a
1398  0369  12          	ld	(de), a
1399  036A  18 02       	jr	l_spr_move_left_00114
1400  036C              l_spr_move_left_00113:
1401  036C  AF          	xor	a, a
1402  036D  02          	ld	(bc), a
1403  036E              l_spr_move_left_00114:
1404  036E  2E 01       	ld	l,0x01
1405  0370  18 02       	jr	l_spr_move_left_00119
1406  0372              l_spr_move_left_00118:
1407  0372  2E 00       	ld	l,0x00
1408  0374              l_spr_move_left_00119:
1409  0374  C9          	ret
1410  0375              	SECTION code_compiler
1411  0375              ;	---------------------------------
1412  0375              ; Function spr_page_right
1413  0375              ; ---------------------------------
1414  0375              _spr_page_right:
1415  0375  3A 00 00    	ld	a,(_scr_curr)
1416  0378  21 00 00    	ld	hl,_map_width
1417  037B  96          	sub	a, (hl)
1418  037C  30 0E       	jr	NC,l_spr_page_right_00102
1419  037E  21 00 00    	ld	hl,_scr_curr
1420  0381  34          	inc	(hl)
1421  0382  CD B5 03    	call	_spr_page_map
1422  0385  CD 00 00    	call	_game_draw_screen
1423  0388  2E 01       	ld	l,0x01
1424  038A  18 02       	jr	l_spr_page_right_00103
1425  038C              l_spr_page_right_00102:
1426  038C  2E 00       	ld	l,0x00
1427  038E              l_spr_page_right_00103:
1428  038E  C9          	ret
1429  038F              	SECTION code_compiler
1430  038F              ;	---------------------------------
1431  038F              ; Function spr_page_left
1432  038F              ; ---------------------------------
1433  038F              _spr_page_left:
1434  038F  2A 00 00    	ld	hl,(_sprite)
1435  0392  26 00       	ld	h,0x00
1436  0394  01 00 00    	ld	bc,_class
1437  0397  09          	add	hl,bc
1438  0398  7E          	ld	a,(hl)
1439  0399  B7          	or	a, a
1440  039A  28 04       	jr	Z,l_spr_page_left_00102
1441  039C  2E 00       	ld	l,0x00
1442  039E  18 14       	jr	l_spr_page_left_00105
1443  03A0              l_spr_page_left_00102:
1444  03A0  21 00 00    	ld	hl,_scr_curr
1445  03A3  7E          	ld	a, (hl)
1446  03A4  B7          	or	a, a
1447  03A5  28 0B       	jr	Z,l_spr_page_left_00104
1448  03A7  35          	dec	(hl)
1449  03A8  CD B5 03    	call	_spr_page_map
1450  03AB  CD 00 00    	call	_game_draw_screen
1451  03AE  2E 01       	ld	l,0x01
1452  03B0  18 02       	jr	l_spr_page_left_00105
1453  03B2              l_spr_page_left_00104:
1454  03B2  2E 00       	ld	l,0x00
1455  03B4              l_spr_page_left_00105:
1456  03B4  C9          	ret
1457  03B5              	SECTION code_compiler
1458  03B5              ;	---------------------------------
1459  03B5              ; Function spr_page_map
1460  03B5              ; ---------------------------------
1461  03B5              _spr_page_map:
1462  03B5  CD 00 00    	call	___sdcc_enter_ix
1463  03B8  F5          	push	af
1464  03B9  F5          	push	af
1465  03BA  3B          	dec	sp
1466  03BB  0E 10       	ld	c,0x10
1467  03BD  F3          	di
1468  03BE  C5          	push	bc
1469  03BF  3E 16       	ld	a,0x16
1470  03C1  01 FD 7F    	ld	bc,_IO_7FFD
1471  03C4  ED 79       	out	(c),a
1472  03C6  C1          	pop	bc
1473  03C7  21 00 00    	ld	hl,_start_scr0
1474  03CA  46          	ld	b, (hl)
1475  03CB  21 00 00    	ld	hl,_GLOBAL_ZX_PORT_7FFD
1476  03CE  36 10       	ld	(hl),0x10
1477  03D0  C5          	push	bc
1478  03D1  3E 10       	ld	a,0x10
1479  03D3  01 FD 7F    	ld	bc,_IO_7FFD
1480  03D6  ED 79       	out	(c),a
1481  03D8  C1          	pop	bc
1482  03D9  21 00 00    	ld	hl,_game_start_scr
1483  03DC  70          	ld	(hl), b
1484  03DD  21 00 00    	ld	hl,0x0000
1485  03E0  E3          	ex	(sp), hl
1486  03E1  3A 00 00    	ld	a,(_scr_curr)
1487  03E4  3C          	inc	a
1488  03E5  20 06       	jr	NZ,l_spr_page_map_00133
1489  03E7  3A 00 00    	ld	a,(_game_start_scr)
1490  03EA  32 00 00    	ld	(_scr_curr),a
1491  03ED              l_spr_page_map_00133:
1492  03ED  06 00       	ld	b,0x00
1493  03EF              l_spr_page_map_00103:
1494  03EF  78          	ld	a, b
1495  03F0  21 00 00    	ld	hl,_scr_curr
1496  03F3  96          	sub	a, (hl)
1497  03F4  30 34       	jr	NC,l_spr_page_map_00105
1498  03F6  C5          	push	bc
1499  03F7  3E 16       	ld	a,0x16
1500  03F9  01 FD 7F    	ld	bc,_IO_7FFD
1501  03FC  ED 79       	out	(c),a
1502  03FE  C1          	pop	bc
1503  03FF  3E 00       	ld	a, +((_lenght0) & 0xFF)
1504  0401  80          	add	a, b
1505  0402  6F          	ld	l, a
1506  0403  3E 00       	ld	a, +((_lenght0) / 256)
1507  0405  CE 00       	adc	a,0x00
1508  0407  67          	ld	h, a
1509  0408  5E          	ld	e, (hl)
1510  0409  16 00       	ld	d,0x00
1511  040B  21 00 00    	ld	hl,_GLOBAL_ZX_PORT_7FFD
1512  040E  36 10       	ld	(hl),0x10
1513  0410  C5          	push	bc
1514  0411  3E 10       	ld	a,0x10
1515  0413  01 FD 7F    	ld	bc,_IO_7FFD
1516  0416  ED 79       	out	(c),a
1517  0418  C1          	pop	bc
1518  0419  DD 7E FB    	ld	a,(ix-5)
1519  041C  83          	add	a, e
1520  041D  DD 77 FB    	ld	(ix-5),a
1521  0420  DD 7E FC    	ld	a,(ix-4)
1522  0423  8A          	adc	a, d
1523  0424  DD 77 FC    	ld	(ix-4),a
1524  0427  04          	inc	b
1525  0428  18 C5       	jr	l_spr_page_map_00103
1526  042A              l_spr_page_map_00105:
1527  042A  FB          	ei
1528  042B  F3          	di
1529  042C  DD 36 FD 00 	ld	(ix-3),0x00
1530  0430              l_spr_page_map_00125:
1531  0430  C5          	push	bc
1532  0431  3E 16       	ld	a,0x16
1533  0433  01 FD 7F    	ld	bc,_IO_7FFD
1534  0436  ED 79       	out	(c),a
1535  0438  C1          	pop	bc
1536  0439  DD 5E FD    	ld	e,(ix-3)
1537  043C  16 00       	ld	d,0x00
1538  043E  DD 6E FB    	ld	l,(ix-5)
1539  0441  DD 66 FC    	ld	h,(ix-4)
1540  0444  19          	add	hl,de
1541  0445  EB          	ex	de,hl
1542  0446  21 00 00    	ld	hl,_world0
1543  0449  19          	add	hl, de
1544  044A  46          	ld	b, (hl)
1545  044B  13          	inc	de
1546  044C  21 00 00    	ld	hl,_world0
1547  044F  19          	add	hl, de
1548  0450  7E          	ld	a, (hl)
1549  0451  DD 77 FE    	ld	(ix-2),a
1550  0454  21 00 00    	ld	hl,_GLOBAL_ZX_PORT_7FFD
1551  0457  36 10       	ld	(hl),0x10
1552  0459  C5          	push	bc
1553  045A  3E 10       	ld	a,0x10
1554  045C  01 FD 7F    	ld	bc,_IO_7FFD
1555  045F  ED 79       	out	(c),a
1556  0461  C1          	pop	bc
1557  0462  78          	ld	a, b
1558  0463  D6 80       	sub	a,0x80
1559  0465  30 25       	jr	NC,l_spr_page_map_00116
1560  0467  59          	ld	e, c
1561  0468  16 00       	ld	d,0x00
1562  046A  C5          	push	bc
1563  046B  D5          	push	de
1564  046C  CD 00 00    	call	_game_obj_chk
1565  046F  F1          	pop	af
1566  0470  DD 75 FF    	ld	(ix-1),l
1567  0473  C1          	pop	bc
1568  0474  3E 00       	ld	a, +((_scr_map) & 0xFF)
1569  0476  81          	add	a, c
1570  0477  5F          	ld	e, a
1571  0478  3E 00       	ld	a, +((_scr_map) / 256)
1572  047A  CE 00       	adc	a,0x00
1573  047C  57          	ld	d, a
1574  047D  DD 7E FF    	ld	a,(ix-1)
1575  0480  B7          	or	a, a
1576  0481  20 04       	jr	NZ,l_spr_page_map_00107
1577  0483  78          	ld	a, b
1578  0484  12          	ld	(de), a
1579  0485  18 02       	jr	l_spr_page_map_00108
1580  0487              l_spr_page_map_00107:
1581  0487  AF          	xor	a, a
1582  0488  12          	ld	(de), a
1583  0489              l_spr_page_map_00108:
1584  0489  0C          	inc	c
1585  048A  18 39       	jr	l_spr_page_map_00117
1586  048C              l_spr_page_map_00116:
1587  048C  78          	ld	a, b
1588  048D  C6 80       	add	a,0x80
1589  048F  5F          	ld	e, a
1590  0490  16 00       	ld	d,0x00
1591  0492              l_spr_page_map_00123:
1592  0492  7A          	ld	a, d
1593  0493  93          	sub	a, e
1594  0494  30 2C       	jr	NC,l_spr_page_map_00144
1595  0496  69          	ld	l, c
1596  0497  26 00       	ld	h,0x00
1597  0499  C5          	push	bc
1598  049A  D5          	push	de
1599  049B  E5          	push	hl
1600  049C  CD 00 00    	call	_game_obj_chk
1601  049F  F1          	pop	af
1602  04A0  D1          	pop	de
1603  04A1  C1          	pop	bc
1604  04A2  7D          	ld	a,l
1605  04A3  B7          	or	a,a
1606  04A4  20 0B       	jr	NZ,l_spr_page_map_00110
1607  04A6  47          	ld	b,a
1608  04A7  21 00 00    	ld	hl,_scr_map
1609  04AA  09          	add	hl, bc
1610  04AB  DD 7E FE    	ld	a,(ix-2)
1611  04AE  77          	ld	(hl), a
1612  04AF  18 08       	jr	l_spr_page_map_00111
1613  04B1              l_spr_page_map_00110:
1614  04B1  06 00       	ld	b,0x00
1615  04B3  21 00 00    	ld	hl,_scr_map
1616  04B6  09          	add	hl, bc
1617  04B7  36 00       	ld	(hl),0x00
1618  04B9              l_spr_page_map_00111:
1619  04B9  0C          	inc	c
1620  04BA  79          	ld	a, c
1621  04BB  D6 A0       	sub	a,0xa0
1622  04BD  30 03       	jr	NC,l_spr_page_map_00144
1623  04BF  14          	inc	d
1624  04C0  18 D0       	jr	l_spr_page_map_00123
1625  04C2              l_spr_page_map_00144:
1626  04C2  DD 34 FD    	inc	(ix-3)
1627  04C5              l_spr_page_map_00117:
1628  04C5  79          	ld	a, c
1629  04C6  D6 A0       	sub	a,0xa0
1630  04C8  30 0B       	jr	NC,l_spr_page_map_00120
1631  04CA  DD 34 FD    	inc	(ix-3)
1632  04CD  DD 7E FD    	ld	a,(ix-3)
1633  04D0  D6 A0       	sub	a,0xa0
1634  04D2  DA 30 04    	jp	C, l_spr_page_map_00125
1635  04D5              l_spr_page_map_00120:
1636  04D5  CD F5 0A    	call	_spr_init_anim_bullets
1637  04D8  FB          	ei
1638  04D9  CD 00 00    	call	_NIRVANAP_start
1639  04DC  0E 00       	ld	c,0x00
1640  04DE              l_spr_page_map_00127:
1641  04DE  06 00       	ld	b,0x00
1642  04E0  21 00 00    	ld	hl,_class
1643  04E3  09          	add	hl, bc
1644  04E4  36 00       	ld	(hl),0x00
1645  04E6  C5          	push	bc
1646  04E7  21 00 00    	ld	hl,0x0000
1647  04EA  E5          	push	hl
1648  04EB  AF          	xor	a, a
1649  04EC  F5          	push	af
1650  04ED  33          	inc	sp
1651  04EE  79          	ld	a, c
1652  04EF  F5          	push	af
1653  04F0  33          	inc	sp
1654  04F1  CD 00 00    	call	_NIRVANAP_spriteT_callee
1655  04F4  C1          	pop	bc
1656  04F5  0C          	inc	c
1657  04F6  79          	ld	a, c
1658  04F7  D6 07       	sub	a,0x07
1659  04F9  38 E3       	jr	C,l_spr_page_map_00127
1660  04FB  DD F9       	ld	sp, ix
1661  04FD  DD E1       	pop	ix
1662  04FF  C9          	ret
1663  0500              	SECTION code_compiler
1664  0500              ;	---------------------------------
1665  0500              ; Function spr_redraw
1666  0500              ; ---------------------------------
1667  0500              _spr_redraw:
1668  0500  2A 00 00    	ld	hl,(_sprite)
1669  0503  26 00       	ld	h,0x00
1670  0505  01 00 00    	ld	bc,_tile
1671  0508  09          	add	hl,bc
1672  0509  4E          	ld	c, (hl)
1673  050A  3A 00 00    	ld	a,(_sprite)
1674  050D  5F          	ld	e,a
1675  050E  16 00       	ld	d,0x00
1676  0510  21 00 00    	ld	hl,_colint
1677  0513  19          	add	hl,de
1678  0514  7E          	ld	a,(hl)
1679  0515  81          	add	a,c
1680  0516  32 00 00    	ld	(_s_tile1),a
1681  0519  2A 00 00    	ld	hl,(_sprite)
1682  051C  26 00       	ld	h,0x00
1683  051E  01 00 00    	ld	bc,_col
1684  0521  09          	add	hl,bc
1685  0522  7E          	ld	a,(hl)
1686  0523  32 00 00    	ld	(_s_col1),a
1687  0526  2A 00 00    	ld	hl,(_sprite)
1688  0529  26 00       	ld	h,0x00
1689  052B  01 00 00    	ld	bc,_lin
1690  052E  09          	add	hl,bc
1691  052F  7E          	ld	a,(hl)
1692  0530  21 00 00    	ld	hl,_s_lin1
1693  0533  77          	ld	(hl),a
1694  0534  4F          	ld	c,a
1695  0535  7E          	ld	a, (hl)
1696  0536  21 00 00    	ld	hl,_s_lin0
1697  0539  96          	sub	a, (hl)
1698  053A  20 0A       	jr	NZ,l_spr_redraw_00117
1699  053C  3A 00 00    	ld	a,(_s_col1)
1700  053F  21 00 00    	ld	hl,_s_col0
1701  0542  96          	sub	a, (hl)
1702  0543  CA E3 05    	jp	Z,l_spr_redraw_00118
1703  0546              l_spr_redraw_00117:
1704  0546  3A 00 00    	ld	a,(_sprite)
1705  0549  D6 07       	sub	a,0x07
1706  054B  20 04       	jr	NZ,l_spr_redraw_00158
1707  054D  3E 01       	ld	a,0x01
1708  054F  18 01       	jr	l_spr_redraw_00159
1709  0551              l_spr_redraw_00158:
1710  0551  AF          	xor	a,a
1711  0552              l_spr_redraw_00159:
1712  0552  47          	ld	b,a
1713  0553  B7          	or	a, a
1714  0554  28 12       	jr	Z,l_spr_redraw_00105
1715  0556  3A 00 00    	ld	a,(_player_over_stair)
1716  0559  B7          	or	a, a
1717  055A  28 0C       	jr	Z,l_spr_redraw_00105
1718  055C  79          	ld	a, c
1719  055D  E6 03       	and	a,0x03
1720  055F  20 07       	jr	NZ,l_spr_redraw_00105
1721  0561  21 00 00    	ld	hl,_s_tile1
1722  0564  34          	inc	(hl)
1723  0565  34          	inc	(hl)
1724  0566  34          	inc	(hl)
1725  0567  34          	inc	(hl)
1726  0568              l_spr_redraw_00105:
1727  0568  78          	ld	a, b
1728  0569  B7          	or	a, a
1729  056A  28 05       	jr	Z,l_spr_redraw_00113
1730  056C  CD 77 09    	call	_spr_back_repaint
1731  056F  18 5B       	jr	l_spr_redraw_00114
1732  0571              l_spr_redraw_00113:
1733  0571  3A 00 00    	ld	a,(_s_lin1)
1734  0574  E6 07       	and	a,0x07
1735  0576  20 05       	jr	NZ,l_spr_redraw_00110
1736  0578  CD 77 09    	call	_spr_back_repaint
1737  057B  18 4F       	jr	l_spr_redraw_00114
1738  057D              l_spr_redraw_00110:
1739  057D  21 00 00    	ld	hl,_s_state
1740  0580  CB 46       	bit	0, (hl)
1741  0582  28 26       	jr	Z,l_spr_redraw_00107
1742  0584  3A 00 00    	ld	a,(_s_lin0)
1743  0587  C6 08       	add	a,0x08
1744  0589  47          	ld	b, a
1745  058A  3A 00 00    	ld	a,(_s_col0)
1746  058D  F5          	push	af
1747  058E  33          	inc	sp
1748  058F  C5          	push	bc
1749  0590  33          	inc	sp
1750  0591  3A 00 00    	ld	a,(_map_paper_clr)
1751  0594  F5          	push	af
1752  0595  33          	inc	sp
1753  0596  CD 00 00    	call	_NIRVANAP_fillC_callee
1754  0599  21 00 00    	ld	hl,_s_col0
1755  059C  56          	ld	d, (hl)
1756  059D  14          	inc	d
1757  059E  58          	ld	e,b
1758  059F  3A 00 00    	ld	a,(_map_paper_clr)
1759  05A2  D5          	push	de
1760  05A3  F5          	push	af
1761  05A4  33          	inc	sp
1762  05A5  CD 00 00    	call	_NIRVANAP_fillC_callee
1763  05A8  18 22       	jr	l_spr_redraw_00114
1764  05AA              l_spr_redraw_00107:
1765  05AA  2A FF FF    	ld	hl,(_s_col0 - 1)
1766  05AD  3A 00 00    	ld	a,(_s_lin0)
1767  05B0  6F          	ld	l,a
1768  05B1  3A 00 00    	ld	a,(_map_paper_clr)
1769  05B4  E5          	push	hl
1770  05B5  F5          	push	af
1771  05B6  33          	inc	sp
1772  05B7  CD 00 00    	call	_NIRVANAP_fillC_callee
1773  05BA  21 00 00    	ld	hl,_s_col0
1774  05BD  46          	ld	b, (hl)
1775  05BE  04          	inc	b
1776  05BF  C5          	push	bc
1777  05C0  33          	inc	sp
1778  05C1  2A FF FF    	ld	hl,(_s_lin0 - 1)
1779  05C4  3A 00 00    	ld	a,(_map_paper_clr)
1780  05C7  6F          	ld	l,a
1781  05C8  E5          	push	hl
1782  05C9  CD 00 00    	call	_NIRVANAP_fillC_callee
1783  05CC              l_spr_redraw_00114:
1784  05CC  2A FF FF    	ld	hl,(_s_col1 - 1)
1785  05CF  3A 00 00    	ld	a,(_s_lin1)
1786  05D2  6F          	ld	l,a
1787  05D3  E5          	push	hl
1788  05D4  2A FF FF    	ld	hl,(_s_tile1 - 1)
1789  05D7  3A 00 00    	ld	a,(_sprite)
1790  05DA  6F          	ld	l,a
1791  05DB  E5          	push	hl
1792  05DC  CD 00 00    	call	_NIRVANAP_spriteT_callee
1793  05DF  2E 01       	ld	l,0x01
1794  05E1  18 22       	jr	l_spr_redraw_00121
1795  05E3              l_spr_redraw_00118:
1796  05E3  3A 00 00    	ld	a,(_s_tile1)
1797  05E6  21 00 00    	ld	hl,_s_tile0
1798  05E9  96          	sub	a, (hl)
1799  05EA  28 17       	jr	Z,l_spr_redraw_00119
1800  05EC  2A FF FF    	ld	hl,(_s_col1 - 1)
1801  05EF  3A 00 00    	ld	a,(_s_lin1)
1802  05F2  6F          	ld	l,a
1803  05F3  E5          	push	hl
1804  05F4  2A FF FF    	ld	hl,(_s_tile1 - 1)
1805  05F7  3A 00 00    	ld	a,(_sprite)
1806  05FA  6F          	ld	l,a
1807  05FB  E5          	push	hl
1808  05FC  CD 00 00    	call	_NIRVANAP_spriteT_callee
1809  05FF  2E 00       	ld	l,0x00
1810  0601  18 02       	jr	l_spr_redraw_00121
1811  0603              l_spr_redraw_00119:
1812  0603  2E 00       	ld	l,0x00
1813  0605              l_spr_redraw_00121:
1814  0605  C9          	ret
1815  0606              	SECTION code_compiler
1816  0606              ;	---------------------------------
1817  0606              ; Function spr_destroy
1818  0606              ; ---------------------------------
1819  0606              _spr_destroy:
1820  0606  CD 00 00    	call	___sdcc_enter_ix
1821  0609  F5          	push	af
1822  060A  4D          	ld	c, l
1823  060B  21 00 00    	ld	hl,_spr_count
1824  060E  35          	dec	(hl)
1825  060F  3E 00       	ld	a, +((_lin) & 0xFF)
1826  0611  81          	add	a, c
1827  0612  DD 77 FE    	ld	(ix-2),a
1828  0615  3E 00       	ld	a, +((_lin) / 256)
1829  0617  CE 00       	adc	a,0x00
1830  0619  DD 77 FF    	ld	(ix-1),a
1831  061C  E1          	pop	hl
1832  061D  7E          	ld	a,(hl)
1833  061E  E5          	push	hl
1834  061F  32 00 00    	ld	(_s_lin0),a
1835  0622  3E 00       	ld	a, +((_col) & 0xFF)
1836  0624  81          	add	a, c
1837  0625  5F          	ld	e, a
1838  0626  3E 00       	ld	a, +((_col) / 256)
1839  0628  CE 00       	adc	a,0x00
1840  062A  57          	ld	d, a
1841  062B  1A          	ld	a, (de)
1842  062C  32 00 00    	ld	(_s_col0),a
1843  062F  C5          	push	bc
1844  0630  D5          	push	de
1845  0631  21 00 00    	ld	hl,0x0000
1846  0634  E5          	push	hl
1847  0635  AF          	xor	a, a
1848  0636  F5          	push	af
1849  0637  33          	inc	sp
1850  0638  79          	ld	a, c
1851  0639  F5          	push	af
1852  063A  33          	inc	sp
1853  063B  CD 00 00    	call	_NIRVANAP_spriteT_callee
1854  063E  CD 77 09    	call	_spr_back_repaint
1855  0641  D1          	pop	de
1856  0642  C1          	pop	bc
1857  0643  06 00       	ld	b,0x00
1858  0645  21 00 00    	ld	hl,_tile
1859  0648  09          	add	hl, bc
1860  0649  AF          	xor	a,a
1861  064A  77          	ld	(hl),a
1862  064B  E1          	pop	hl
1863  064C  12          	ld	(de),a
1864  064D  E5          	push	hl
1865  064E  36 00       	ld	(hl),0x00
1866  0650  11 00 00    	ld	de,_class+0
1867  0653  69          	ld	l,c
1868  0654  26 00       	ld	h,0x00
1869  0656  19          	add	hl, de
1870  0657  36 00       	ld	(hl),0x00
1871  0659  11 00 00    	ld	de,_state+0
1872  065C  69          	ld	l,c
1873  065D  26 00       	ld	h,0x00
1874  065F  19          	add	hl, de
1875  0660  36 00       	ld	(hl),0x00
1876  0662  11 00 00    	ld	de,_state_a+0
1877  0665  69          	ld	l,c
1878  0666  26 00       	ld	h,0x00
1879  0668  19          	add	hl, de
1880  0669  F1          	pop	af
1881  066A  36 00       	ld	(hl),0x00
1882  066C  DD E1       	pop	ix
1883  066E  C9          	ret
1884  066F              	SECTION code_compiler
1885  066F              ;	---------------------------------
1886  066F              ; Function spr_tile
1887  066F              ; ---------------------------------
1888  066F              _spr_tile:
1889  066F  45          	ld	b,l
1890  0670  11 00 00    	ld	de,_class+0
1891  0673  26 00       	ld	h,0x00
1892  0675  19          	add	hl, de
1893  0676  5E          	ld	e, (hl)
1894  0677  3E 13       	ld	a,0x13
1895  0679  93          	sub	a, e
1896  067A  DA AD 07    	jp	C, l_spr_tile_00116
1897  067D  16 00       	ld	d,0x00
1898  067F  21 86 06    	ld	hl,l_spr_tile_00123
1899  0682  19          	add	hl, de
1900  0683  19          	add	hl, de
1901  0684  19          	add	hl, de
1902  0685  E9          	jp	(hl)
1903  0686              l_spr_tile_00123:
1904  0686  C3 AD 07    	jp	l_spr_tile_00116
1905  0689  C3 AD 07    	jp	l_spr_tile_00116
1906  068C  C3 14 07    	jp	l_spr_tile_00106
1907  068F  C3 25 07    	jp	l_spr_tile_00107
1908  0692  C3 35 07    	jp	l_spr_tile_00108
1909  0695  C3 44 07    	jp	l_spr_tile_00109
1910  0698  C3 80 07    	jp	l_spr_tile_00113
1911  069B  C3 8F 07    	jp	l_spr_tile_00114
1912  069E  C3 9E 07    	jp	l_spr_tile_00115
1913  06A1  C3 AD 07    	jp	l_spr_tile_00116
1914  06A4  C3 AD 07    	jp	l_spr_tile_00116
1915  06A7  C3 C2 06    	jp	l_spr_tile_00101
1916  06AA  C3 D2 06    	jp	l_spr_tile_00102
1917  06AD  C3 E2 06    	jp	l_spr_tile_00103
1918  06B0  C3 F3 06    	jp	l_spr_tile_00104
1919  06B3  C3 03 07    	jp	l_spr_tile_00105
1920  06B6  C3 53 07    	jp	l_spr_tile_00110
1921  06B9  C3 AD 07    	jp	l_spr_tile_00116
1922  06BC  C3 62 07    	jp	l_spr_tile_00111
1923  06BF  C3 71 07    	jp	l_spr_tile_00112
1924  06C2              l_spr_tile_00101:
1925  06C2  AF          	xor	a, a
1926  06C3  48          	ld	c,b
1927  06C4  47          	ld	b,a
1928  06C5  C5          	push	bc
1929  06C6  3E 90       	ld	a,0x90
1930  06C8  F5          	push	af
1931  06C9  33          	inc	sp
1932  06CA  CD B0 07    	call	_spr_tile_dir
1933  06CD  F1          	pop	af
1934  06CE  33          	inc	sp
1935  06CF  C3 AF 07    	jp	l_spr_tile_00117
1936  06D2              l_spr_tile_00102:
1937  06D2  AF          	xor	a, a
1938  06D3  48          	ld	c,b
1939  06D4  47          	ld	b,a
1940  06D5  C5          	push	bc
1941  06D6  3E 94       	ld	a,0x94
1942  06D8  F5          	push	af
1943  06D9  33          	inc	sp
1944  06DA  CD B0 07    	call	_spr_tile_dir
1945  06DD  F1          	pop	af
1946  06DE  33          	inc	sp
1947  06DF  C3 AF 07    	jp	l_spr_tile_00117
1948  06E2              l_spr_tile_00103:
1949  06E2  3E 02       	ld	a,0x02
1950  06E4  48          	ld	c,b
1951  06E5  47          	ld	b,a
1952  06E6  C5          	push	bc
1953  06E7  3E 98       	ld	a,0x98
1954  06E9  F5          	push	af
1955  06EA  33          	inc	sp
1956  06EB  CD B0 07    	call	_spr_tile_dir
1957  06EE  F1          	pop	af
1958  06EF  33          	inc	sp
1959  06F0  C3 AF 07    	jp	l_spr_tile_00117
1960  06F3              l_spr_tile_00104:
1961  06F3  AF          	xor	a, a
1962  06F4  48          	ld	c,b
1963  06F5  47          	ld	b,a
1964  06F6  C5          	push	bc
1965  06F7  3E 9C       	ld	a,0x9c
1966  06F9  F5          	push	af
1967  06FA  33          	inc	sp
1968  06FB  CD B0 07    	call	_spr_tile_dir
1969  06FE  F1          	pop	af
1970  06FF  33          	inc	sp
1971  0700  C3 AF 07    	jp	l_spr_tile_00117
1972  0703              l_spr_tile_00105:
1973  0703  3E 04       	ld	a,0x04
1974  0705  48          	ld	c,b
1975  0706  47          	ld	b,a
1976  0707  C5          	push	bc
1977  0708  3E A0       	ld	a,0xa0
1978  070A  F5          	push	af
1979  070B  33          	inc	sp
1980  070C  CD B0 07    	call	_spr_tile_dir
1981  070F  F1          	pop	af
1982  0710  33          	inc	sp
1983  0711  C3 AF 07    	jp	l_spr_tile_00117
1984  0714              l_spr_tile_00106:
1985  0714  3E 02       	ld	a,0x02
1986  0716  48          	ld	c,b
1987  0717  47          	ld	b,a
1988  0718  C5          	push	bc
1989  0719  3E A8       	ld	a,0xa8
1990  071B  F5          	push	af
1991  071C  33          	inc	sp
1992  071D  CD B0 07    	call	_spr_tile_dir
1993  0720  F1          	pop	af
1994  0721  33          	inc	sp
1995  0722  C3 AF 07    	jp	l_spr_tile_00117
1996  0725              l_spr_tile_00107:
1997  0725  AF          	xor	a, a
1998  0726  48          	ld	c,b
1999  0727  47          	ld	b,a
2000  0728  C5          	push	bc
2001  0729  3E AC       	ld	a,0xac
2002  072B  F5          	push	af
2003  072C  33          	inc	sp
2004  072D  CD B0 07    	call	_spr_tile_dir
2005  0730  F1          	pop	af
2006  0731  33          	inc	sp
2007  0732  C3 AF 07    	jp	l_spr_tile_00117
2008  0735              l_spr_tile_00108:
2009  0735  AF          	xor	a, a
2010  0736  48          	ld	c,b
2011  0737  47          	ld	b,a
2012  0738  C5          	push	bc
2013  0739  3E AE       	ld	a,0xae
2014  073B  F5          	push	af
2015  073C  33          	inc	sp
2016  073D  CD B0 07    	call	_spr_tile_dir
2017  0740  F1          	pop	af
2018  0741  33          	inc	sp
2019  0742  18 6B       	jr	l_spr_tile_00117
2020  0744              l_spr_tile_00109:
2021  0744  AF          	xor	a, a
2022  0745  48          	ld	c,b
2023  0746  47          	ld	b,a
2024  0747  C5          	push	bc
2025  0748  3E B0       	ld	a,0xb0
2026  074A  F5          	push	af
2027  074B  33          	inc	sp
2028  074C  CD B0 07    	call	_spr_tile_dir
2029  074F  F1          	pop	af
2030  0750  33          	inc	sp
2031  0751  18 5C       	jr	l_spr_tile_00117
2032  0753              l_spr_tile_00110:
2033  0753  AF          	xor	a, a
2034  0754  48          	ld	c,b
2035  0755  47          	ld	b,a
2036  0756  C5          	push	bc
2037  0757  3E B2       	ld	a,0xb2
2038  0759  F5          	push	af
2039  075A  33          	inc	sp
2040  075B  CD B0 07    	call	_spr_tile_dir
2041  075E  F1          	pop	af
2042  075F  33          	inc	sp
2043  0760  18 4D       	jr	l_spr_tile_00117
2044  0762              l_spr_tile_00111:
2045  0762  AF          	xor	a, a
2046  0763  48          	ld	c,b
2047  0764  47          	ld	b,a
2048  0765  C5          	push	bc
2049  0766  3E B4       	ld	a,0xb4
2050  0768  F5          	push	af
2051  0769  33          	inc	sp
2052  076A  CD B0 07    	call	_spr_tile_dir
2053  076D  F1          	pop	af
2054  076E  33          	inc	sp
2055  076F  18 3E       	jr	l_spr_tile_00117
2056  0771              l_spr_tile_00112:
2057  0771  AF          	xor	a, a
2058  0772  48          	ld	c,b
2059  0773  47          	ld	b,a
2060  0774  C5          	push	bc
2061  0775  3E B6       	ld	a,0xb6
2062  0777  F5          	push	af
2063  0778  33          	inc	sp
2064  0779  CD B0 07    	call	_spr_tile_dir
2065  077C  F1          	pop	af
2066  077D  33          	inc	sp
2067  077E  18 2F       	jr	l_spr_tile_00117
2068  0780              l_spr_tile_00113:
2069  0780  AF          	xor	a, a
2070  0781  48          	ld	c,b
2071  0782  47          	ld	b,a
2072  0783  C5          	push	bc
2073  0784  3E C0       	ld	a,0xc0
2074  0786  F5          	push	af
2075  0787  33          	inc	sp
2076  0788  CD B0 07    	call	_spr_tile_dir
2077  078B  F1          	pop	af
2078  078C  33          	inc	sp
2079  078D  18 20       	jr	l_spr_tile_00117
2080  078F              l_spr_tile_00114:
2081  078F  AF          	xor	a, a
2082  0790  48          	ld	c,b
2083  0791  47          	ld	b,a
2084  0792  C5          	push	bc
2085  0793  3E C2       	ld	a,0xc2
2086  0795  F5          	push	af
2087  0796  33          	inc	sp
2088  0797  CD B0 07    	call	_spr_tile_dir
2089  079A  F1          	pop	af
2090  079B  33          	inc	sp
2091  079C  18 11       	jr	l_spr_tile_00117
2092  079E              l_spr_tile_00115:
2093  079E  AF          	xor	a, a
2094  079F  48          	ld	c,b
2095  07A0  47          	ld	b,a
2096  07A1  C5          	push	bc
2097  07A2  3E C4       	ld	a,0xc4
2098  07A4  F5          	push	af
2099  07A5  33          	inc	sp
2100  07A6  CD B0 07    	call	_spr_tile_dir
2101  07A9  F1          	pop	af
2102  07AA  33          	inc	sp
2103  07AB  18 02       	jr	l_spr_tile_00117
2104  07AD              l_spr_tile_00116:
2105  07AD  2E 00       	ld	l,0x00
2106  07AF              l_spr_tile_00117:
2107  07AF  C9          	ret
2108  07B0              	SECTION code_compiler
2109  07B0              ;	---------------------------------
2110  07B0              ; Function spr_tile_dir
2111  07B0              ; ---------------------------------
2112  07B0              _spr_tile_dir:
2113  07B0  CD 00 00    	call	___sdcc_enter_ix
2114  07B3  3E 00       	ld	a, +((_state) & 0xFF)
2115  07B5  DD 86 05    	add	a,(ix+5)
2116  07B8  4F          	ld	c, a
2117  07B9  3E 00       	ld	a, +((_state) / 256)
2118  07BB  CE 00       	adc	a,0x00
2119  07BD  47          	ld	b, a
2120  07BE  0A          	ld	a, (bc)
2121  07BF  4F          	ld	c,a
2122  07C0  CB 57       	bit	2,a
2123  07C2  28 05       	jr	Z,l_spr_tile_dir_00102
2124  07C4  DD 6E 04    	ld	l,(ix+4)
2125  07C7  18 2D       	jr	l_spr_tile_dir_00109
2126  07C9              l_spr_tile_dir_00102:
2127  07C9  DD 7E 04    	ld	a,(ix+4)
2128  07CC  DD 86 06    	add	a,(ix+6)
2129  07CF  47          	ld	b, a
2130  07D0  CB 59       	bit	3, c
2131  07D2  28 03       	jr	Z,l_spr_tile_dir_00104
2132  07D4  68          	ld	l, b
2133  07D5  18 1F       	jr	l_spr_tile_dir_00109
2134  07D7              l_spr_tile_dir_00104:
2135  07D7  3E 00       	ld	a, +((_state_a) & 0xFF)
2136  07D9  DD 86 05    	add	a,(ix+5)
2137  07DC  5F          	ld	e, a
2138  07DD  3E 00       	ld	a, +((_state_a) / 256)
2139  07DF  CE 00       	adc	a,0x00
2140  07E1  57          	ld	d, a
2141  07E2  1A          	ld	a, (de)
2142  07E3  CB 67       	bit	4, a
2143  07E5  28 05       	jr	Z,l_spr_tile_dir_00106
2144  07E7  DD 6E 04    	ld	l,(ix+4)
2145  07EA  18 0A       	jr	l_spr_tile_dir_00109
2146  07EC              l_spr_tile_dir_00106:
2147  07EC  CB 5F       	bit	3, a
2148  07EE  28 03       	jr	Z,l_spr_tile_dir_00108
2149  07F0  68          	ld	l, b
2150  07F1  18 03       	jr	l_spr_tile_dir_00109
2151  07F3              l_spr_tile_dir_00108:
2152  07F3  DD 6E 04    	ld	l,(ix+4)
2153  07F6              l_spr_tile_dir_00109:
2154  07F6  DD E1       	pop	ix
2155  07F8  C9          	ret
2156  07F9              	SECTION code_compiler
2157  07F9              ;	---------------------------------
2158  07F9              ; Function spr_draw_clear
2159  07F9              ; ---------------------------------
2160  07F9              _spr_draw_clear:
2161  07F9  F3          	di
2162  07FA  2E 00       	ld	l,0x00
2163  07FC  CD 00 00    	call	_zx_cls_fastcall
2164  07FF  21 00 00    	ld	hl,_s_lin1
2165  0802  36 10       	ld	(hl),0x10
2166  0804              l_spr_draw_clear_00105:
2167  0804  21 00 00    	ld	hl,_s_col1
2168  0807  36 00       	ld	(hl),0x00
2169  0809              l_spr_draw_clear_00103:
2170  0809  2A FF FF    	ld	hl,(_s_col1 - 1)
2171  080C  3A 00 00    	ld	a,(_s_lin1)
2172  080F  6F          	ld	l,a
2173  0810  E5          	push	hl
2174  0811  AF          	xor	a, a
2175  0812  F5          	push	af
2176  0813  33          	inc	sp
2177  0814  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2178  0817  21 00 00    	ld	hl,_s_col1
2179  081A  7E          	ld	a,(hl)
2180  081B  C6 02       	add	a,0x02
2181  081D  77          	ld	(hl),a
2182  081E  D6 20       	sub	a,0x20
2183  0820  38 E7       	jr	C,l_spr_draw_clear_00103
2184  0822  21 00 00    	ld	hl,_s_lin1
2185  0825  7E          	ld	a, (hl)
2186  0826  C6 10       	add	a,0x10
2187  0828  77          	ld	(hl), a
2188  0829  3E A2       	ld	a,0xa2
2189  082B  96          	sub	a, (hl)
2190  082C  30 D6       	jr	NC,l_spr_draw_clear_00105
2191  082E  FB          	ei
2192  082F  C9          	ret
2193  0830              	SECTION code_compiler
2194  0830              ;	---------------------------------
2195  0830              ; Function spr_brick_anim
2196  0830              ; ---------------------------------
2197  0830              _spr_brick_anim:
2198  0830  CD 00 00    	call	___sdcc_enter_ix
2199  0833  F5          	push	af
2200  0834  DD 75 FF    	ld	(ix-1),l
2201  0837  21 00 00    	ld	hl,_player_hit_col
2202  083A  46          	ld	b, (hl)
2203  083B  21 00 00    	ld	hl,_player_hit_lin
2204  083E  4E          	ld	c, (hl)
2205  083F  C5          	push	bc
2206  0840  C5          	push	bc
2207  0841  CD 00 00    	call	_spr_calc_index
2208  0844  F1          	pop	af
2209  0845  C1          	pop	bc
2210  0846  22 00 00    	ld	(_index1),hl
2211  0849  11 F0 FF    	ld	de,0xfff0
2212  084C  19          	add	hl,de
2213  084D  11 00 00    	ld	de,_scr_map
2214  0850  19          	add	hl, de
2215  0851  7E          	ld	a, (hl)
2216  0852  DD 77 FE    	ld	(ix-2),a
2217  0855  11 00 00    	ld	de,_scr_map
2218  0858  2A 00 00    	ld	hl,(_index1)
2219  085B  19          	add	hl,de
2220  085C  66          	ld	h, (hl)
2221  085D  EB          	ex	de,hl
2222  085E  DD 7E FF    	ld	a,(ix-1)
2223  0861  B7          	or	a, a
2224  0862  28 08       	jr	Z,l_spr_brick_anim_00102
2225  0864  79          	ld	a, c
2226  0865  C6 F6       	add	a,0xf6
2227  0867  32 00 00    	ld	(_tmp),a
2228  086A  18 06       	jr	l_spr_brick_anim_00103
2229  086C              l_spr_brick_anim_00102:
2230  086C  79          	ld	a, c
2231  086D  C6 F8       	add	a,0xf8
2232  086F  32 00 00    	ld	(_tmp),a
2233  0872              l_spr_brick_anim_00103:
2234  0872  F3          	di
2235  0873  DD 7E FF    	ld	a,(ix-1)
2236  0876  B7          	or	a, a
2237  0877  28 18       	jr	Z,l_spr_brick_anim_00105
2238  0879  3A 00 00    	ld	a,(_map_paper_clr)
2239  087C  C5          	push	bc
2240  087D  D5          	push	de
2241  087E  C5          	push	bc
2242  087F  F5          	push	af
2243  0880  33          	inc	sp
2244  0881  CD 00 00    	call	_NIRVANAP_fillT_raw_callee
2245  0884  D1          	pop	de
2246  0885  33          	inc	sp
2247  0886  3A 00 00    	ld	a,(_tmp)
2248  0889  5A          	ld	e,d
2249  088A  57          	ld	d,a
2250  088B  D5          	push	de
2251  088C  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2252  088F  18 1C       	jr	l_spr_brick_anim_00106
2253  0891              l_spr_brick_anim_00105:
2254  0891  3A 00 00    	ld	a,(_tmp)
2255  0894  C6 F0       	add	a,0xf0
2256  0896  C5          	push	bc
2257  0897  D5          	push	de
2258  0898  4F          	ld	c,a
2259  0899  C5          	push	bc
2260  089A  DD 7E FE    	ld	a,(ix-2)
2261  089D  F5          	push	af
2262  089E  33          	inc	sp
2263  089F  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2264  08A2  D1          	pop	de
2265  08A3  33          	inc	sp
2266  08A4  3A 00 00    	ld	a,(_tmp)
2267  08A7  5A          	ld	e,d
2268  08A8  57          	ld	d,a
2269  08A9  D5          	push	de
2270  08AA  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2271  08AD              l_spr_brick_anim_00106:
2272  08AD  FB          	ei
2273  08AE  F1          	pop	af
2274  08AF  DD E1       	pop	ix
2275  08B1  C9          	ret
2276  08B2              	SECTION code_compiler
2277  08B2              ;	---------------------------------
2278  08B2              ; Function spr_draw_index
2279  08B2              ; ---------------------------------
2280  08B2              _spr_draw_index:
2281  08B2  CD 00 00    	call	___sdcc_enter_ix
2282  08B5  DD 4E 04    	ld	c,(ix+4)
2283  08B8  79          	ld	a, c
2284  08B9  E6 0F       	and	a,0x0f
2285  08BB  87          	add	a, a
2286  08BC  32 00 00    	ld	(_s_col1),a
2287  08BF  21 00 00    	ld	hl,_s_lin1
2288  08C2  71          	ld	(hl),c
2289  08C3  79          	ld	a,c
2290  08C4  07          	rlca
2291  08C5  07          	rlca
2292  08C6  07          	rlca
2293  08C7  07          	rlca
2294  08C8  E6 0F       	and	a,0x0f
2295  08CA  07          	rlca
2296  08CB  07          	rlca
2297  08CC  07          	rlca
2298  08CD  07          	rlca
2299  08CE  E6 F0       	and	a,0xf0
2300  08D0  77          	ld	(hl), a
2301  08D1  F3          	di
2302  08D2  3E 00       	ld	a, +((_scr_map) & 0xFF)
2303  08D4  DD 86 04    	add	a,(ix+4)
2304  08D7  4F          	ld	c, a
2305  08D8  3E 00       	ld	a, +((_scr_map) / 256)
2306  08DA  DD 8E 05    	adc	a,(ix+5)
2307  08DD  47          	ld	b, a
2308  08DE  0A          	ld	a, (bc)
2309  08DF  47          	ld	b, a
2310  08E0  3A 00 00    	ld	a,(_s_col1)
2311  08E3  F5          	push	af
2312  08E4  33          	inc	sp
2313  08E5  3A 00 00    	ld	a,(_s_lin1)
2314  08E8  48          	ld	c,b
2315  08E9  47          	ld	b,a
2316  08EA  C5          	push	bc
2317  08EB  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2318  08EE  FB          	ei
2319  08EF  DD E1       	pop	ix
2320  08F1  C9          	ret
2321  08F2              	SECTION code_compiler
2322  08F2              ;	---------------------------------
2323  08F2              ; Function spr_draw_row
2324  08F2              ; ---------------------------------
2325  08F2              _spr_draw_row:
2326  08F2  CD 00 00    	call	___sdcc_enter_ix
2327  08F5  3B          	dec	sp
2328  08F6  F3          	di
2329  08F7  21 00 00    	ld	hl,_tmp
2330  08FA  36 00       	ld	(hl),0x00
2331  08FC  DD 7E 04    	ld	a,(ix+4)
2332  08FF  07          	rlca
2333  0900  07          	rlca
2334  0901  07          	rlca
2335  0902  E6 F8       	and	a,0xf8
2336  0904  DD 77 FF    	ld	(ix-1),a
2337  0907              l_spr_draw_row_00101:
2338  0907  21 00 00    	ld	hl,_tmp
2339  090A  7E          	ld	a, (hl)
2340  090B  D6 20       	sub	a,0x20
2341  090D  30 38       	jr	NC,l_spr_draw_row_00103
2342  090F  DD 4E 04    	ld	c,(ix+4)
2343  0912  3E 00       	ld	a,0x00
2344  0914  CB 21       	sla	c
2345  0916  17          	rla
2346  0917  CB 21       	sla	c
2347  0919  17          	rla
2348  091A  CB 21       	sla	c
2349  091C  17          	rla
2350  091D  CB 21       	sla	c
2351  091F  17          	rla
2352  0920  CB 21       	sla	c
2353  0922  17          	rla
2354  0923  47          	ld	b,a
2355  0924  5E          	ld	e, (hl)
2356  0925  16 00       	ld	d,0x00
2357  0927  79          	ld	a, c
2358  0928  83          	add	a, e
2359  0929  21 00 00    	ld	hl,_index1
2360  092C  77          	ld	(hl), a
2361  092D  78          	ld	a, b
2362  092E  8A          	adc	a, d
2363  092F  23          	inc	hl
2364  0930  77          	ld	(hl), a
2365  0931  2A FF FF    	ld	hl,(_tmp-1)
2366  0934  DD 6E FF    	ld	l,(ix-1)
2367  0937  3A 00 00    	ld	a,(_game_brick_tile)
2368  093A  E5          	push	hl
2369  093B  F5          	push	af
2370  093C  33          	inc	sp
2371  093D  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2372  0940  21 00 00    	ld	hl,_tmp
2373  0943  34          	inc	(hl)
2374  0944  34          	inc	(hl)
2375  0945  18 C0       	jr	l_spr_draw_row_00101
2376  0947              l_spr_draw_row_00103:
2377  0947  FB          	ei
2378  0948  33          	inc	sp
2379  0949  DD E1       	pop	ix
2380  094B  C9          	ret
2381  094C              	SECTION code_compiler
2382  094C              ;	---------------------------------
2383  094C              ; Function spr_calc_hor
2384  094C              ; ---------------------------------
2385  094C              _spr_calc_hor:
2386  094C  CD 00 00    	call	___sdcc_enter_ix
2387  094F  3E 00       	ld	a, +((_col) & 0xFF)
2388  0951  DD 86 04    	add	a,(ix+4)
2389  0954  4F          	ld	c, a
2390  0955  3E 00       	ld	a, +((_col) / 256)
2391  0957  CE 00       	adc	a,0x00
2392  0959  47          	ld	b, a
2393  095A  0A          	ld	a, (bc)
2394  095B  5F          	ld	e, a
2395  095C  3E 00       	ld	a, +((_sprite_frames) & 0xFF)
2396  095E  DD 86 04    	add	a,(ix+4)
2397  0961  4F          	ld	c, a
2398  0962  3E 00       	ld	a, +((_sprite_frames) / 256)
2399  0964  CE 00       	adc	a,0x00
2400  0966  47          	ld	b, a
2401  0967  0A          	ld	a, (bc)
2402  0968  67          	ld	h, a
2403  0969  2E 00       	ld	l,0x00
2404  096B  55          	ld	d, l
2405  096C  06 08       	ld	b,0x08
2406  096E              l_spr_calc_hor_00103:
2407  096E  29          	add	hl, hl
2408  096F  30 01       	jr	NC,l_spr_calc_hor_00104
2409  0971  19          	add	hl, de
2410  0972              l_spr_calc_hor_00104:
2411  0972  10 FA       	djnz	l_spr_calc_hor_00103
2412  0974  DD E1       	pop	ix
2413  0976  C9          	ret
2414  0977              	SECTION code_compiler
2415  0977              ;	---------------------------------
2416  0977              ; Function spr_back_repaint
2417  0977              ; ---------------------------------
2418  0977              _spr_back_repaint:
2419  0977  76          	halt
2420  0978  F3          	di
2421  0979  2A FF FF    	ld	hl,(_s_col0 - 1)
2422  097C  3A 00 00    	ld	a,(_s_lin0)
2423  097F  6F          	ld	l,a
2424  0980  E5          	push	hl
2425  0981  CD 00 00    	call	_spr_calc_index
2426  0984  F1          	pop	af
2427  0985  7D          	ld	a,l
2428  0986  32 00 00    	ld	(_sprite_curr_index),a
2429  0989  21 00 00    	ld	hl,_s_lin0
2430  098C  7E          	ld	a, (hl)
2431  098D  E6 0F       	and	a,0x0f
2432  098F  4F          	ld	c, a
2433  0990  7E          	ld	a, (hl)
2434  0991  07          	rlca
2435  0992  07          	rlca
2436  0993  07          	rlca
2437  0994  07          	rlca
2438  0995  E6 0F       	and	a,0x0f
2439  0997  5F          	ld	e, a
2440  0998  21 00 00    	ld	hl,_s_col0
2441  099B  CB 46       	bit	0, (hl)
2442  099D  20 66       	jr	NZ,l_spr_back_repaint_00108
2443  099F  79          	ld	a, c
2444  09A0  B7          	or	a, a
2445  09A1  20 1D       	jr	NZ,l_spr_back_repaint_00102
2446  09A3  2A 00 00    	ld	hl,(_sprite_curr_index)
2447  09A6  26 00       	ld	h,0x00
2448  09A8  01 00 00    	ld	bc,_scr_map
2449  09AB  09          	add	hl,bc
2450  09AC  46          	ld	b,(hl)
2451  09AD  3A 00 00    	ld	a,(_s_col0)
2452  09B0  F5          	push	af
2453  09B1  33          	inc	sp
2454  09B2  3A 00 00    	ld	a,(_s_lin0)
2455  09B5  48          	ld	c,b
2456  09B6  47          	ld	b,a
2457  09B7  C5          	push	bc
2458  09B8  CD C4 0A    	call	_spr_tile_paint
2459  09BB  F1          	pop	af
2460  09BC  33          	inc	sp
2461  09BD  C3 C2 0A    	jp	l_spr_back_repaint_00109
2462  09C0              l_spr_back_repaint_00102:
2463  09C0  7B          	ld	a, e
2464  09C1  07          	rlca
2465  09C2  07          	rlca
2466  09C3  07          	rlca
2467  09C4  07          	rlca
2468  09C5  E6 F0       	and	a,0xf0
2469  09C7  47          	ld	b, a
2470  09C8  2A 00 00    	ld	hl,(_sprite_curr_index)
2471  09CB  26 00       	ld	h,0x00
2472  09CD  11 00 00    	ld	de,_scr_map
2473  09D0  19          	add	hl,de
2474  09D1  56          	ld	d, (hl)
2475  09D2  3A 00 00    	ld	a,(_s_col0)
2476  09D5  C5          	push	bc
2477  09D6  F5          	push	af
2478  09D7  33          	inc	sp
2479  09D8  4A          	ld	c, d
2480  09D9  C5          	push	bc
2481  09DA  CD C4 0A    	call	_spr_tile_paint
2482  09DD  F1          	pop	af
2483  09DE  33          	inc	sp
2484  09DF  C1          	pop	bc
2485  09E0  78          	ld	a, b
2486  09E1  C6 10       	add	a,0x10
2487  09E3  57          	ld	d, a
2488  09E4  21 00 00    	ld	hl,_sprite_curr_index
2489  09E7  7E          	ld	a, (hl)
2490  09E8  C6 10       	add	a,0x10
2491  09EA  77          	ld	(hl), a
2492  09EB  C6 00       	add	a,+((_scr_map) & 0xFF)
2493  09ED  4F          	ld	c, a
2494  09EE  3E 00       	ld	a, +((_scr_map) / 256)
2495  09F0  CE 00       	adc	a,0x00
2496  09F2  47          	ld	b, a
2497  09F3  0A          	ld	a, (bc)
2498  09F4  47          	ld	b, a
2499  09F5  3A 00 00    	ld	a,(_s_col0)
2500  09F8  5A          	ld	e,d
2501  09F9  57          	ld	d,a
2502  09FA  D5          	push	de
2503  09FB  C5          	push	bc
2504  09FC  33          	inc	sp
2505  09FD  CD C4 0A    	call	_spr_tile_paint
2506  0A00  F1          	pop	af
2507  0A01  33          	inc	sp
2508  0A02  C3 C2 0A    	jp	l_spr_back_repaint_00109
2509  0A05              l_spr_back_repaint_00108:
2510  0A05  21 00 00    	ld	hl,_s_col0
2511  0A08  46          	ld	b, (hl)
2512  0A09  05          	dec	b
2513  0A0A  79          	ld	a, c
2514  0A0B  B7          	or	a, a
2515  0A0C  20 39       	jr	NZ,l_spr_back_repaint_00105
2516  0A0E  2A 00 00    	ld	hl,(_sprite_curr_index)
2517  0A11  26 00       	ld	h,0x00
2518  0A13  11 00 00    	ld	de,_scr_map
2519  0A16  19          	add	hl,de
2520  0A17  56          	ld	d, (hl)
2521  0A18  C5          	push	bc
2522  0A19  33          	inc	sp
2523  0A1A  3A 00 00    	ld	a,(_s_lin0)
2524  0A1D  5A          	ld	e,d
2525  0A1E  57          	ld	d,a
2526  0A1F  D5          	push	de
2527  0A20  CD C4 0A    	call	_spr_tile_paint
2528  0A23  F1          	pop	af
2529  0A24  33          	inc	sp
2530  0A25  21 00 00    	ld	hl,_sprite_curr_index
2531  0A28  34          	inc	(hl)
2532  0A29  21 00 00    	ld	hl,_s_col0
2533  0A2C  46          	ld	b, (hl)
2534  0A2D  04          	inc	b
2535  0A2E  2A 00 00    	ld	hl,(_sprite_curr_index)
2536  0A31  26 00       	ld	h,0x00
2537  0A33  11 00 00    	ld	de,_scr_map
2538  0A36  19          	add	hl,de
2539  0A37  56          	ld	d, (hl)
2540  0A38  C5          	push	bc
2541  0A39  33          	inc	sp
2542  0A3A  3A 00 00    	ld	a,(_s_lin0)
2543  0A3D  5A          	ld	e,d
2544  0A3E  57          	ld	d,a
2545  0A3F  D5          	push	de
2546  0A40  CD C4 0A    	call	_spr_tile_paint
2547  0A43  F1          	pop	af
2548  0A44  33          	inc	sp
2549  0A45  18 7B       	jr	l_spr_back_repaint_00109
2550  0A47              l_spr_back_repaint_00105:
2551  0A47  7B          	ld	a, e
2552  0A48  07          	rlca
2553  0A49  07          	rlca
2554  0A4A  07          	rlca
2555  0A4B  07          	rlca
2556  0A4C  E6 F0       	and	a,0xf0
2557  0A4E  4F          	ld	c, a
2558  0A4F  2A 00 00    	ld	hl,(_sprite_curr_index)
2559  0A52  26 00       	ld	h,0x00
2560  0A54  11 00 00    	ld	de,_scr_map
2561  0A57  19          	add	hl,de
2562  0A58  66          	ld	h, (hl)
2563  0A59  EB          	ex	de,hl
2564  0A5A  C5          	push	bc
2565  0A5B  C5          	push	bc
2566  0A5C  D5          	push	de
2567  0A5D  33          	inc	sp
2568  0A5E  CD C4 0A    	call	_spr_tile_paint
2569  0A61  F1          	pop	af
2570  0A62  33          	inc	sp
2571  0A63  C1          	pop	bc
2572  0A64  21 00 00    	ld	hl,_sprite_curr_index
2573  0A67  34          	inc	(hl)
2574  0A68  21 00 00    	ld	hl,_s_col0
2575  0A6B  46          	ld	b, (hl)
2576  0A6C  04          	inc	b
2577  0A6D  2A 00 00    	ld	hl,(_sprite_curr_index)
2578  0A70  26 00       	ld	h,0x00
2579  0A72  11 00 00    	ld	de,_scr_map
2580  0A75  19          	add	hl,de
2581  0A76  66          	ld	h, (hl)
2582  0A77  EB          	ex	de,hl
2583  0A78  C5          	push	bc
2584  0A79  C5          	push	bc
2585  0A7A  D5          	push	de
2586  0A7B  33          	inc	sp
2587  0A7C  CD C4 0A    	call	_spr_tile_paint
2588  0A7F  F1          	pop	af
2589  0A80  33          	inc	sp
2590  0A81  C1          	pop	bc
2591  0A82  79          	ld	a, c
2592  0A83  C6 10       	add	a,0x10
2593  0A85  4F          	ld	c, a
2594  0A86  21 00 00    	ld	hl,_sprite_curr_index
2595  0A89  7E          	ld	a, (hl)
2596  0A8A  C6 0F       	add	a,0x0f
2597  0A8C  77          	ld	(hl), a
2598  0A8D  21 00 00    	ld	hl,_s_col0
2599  0A90  46          	ld	b, (hl)
2600  0A91  05          	dec	b
2601  0A92  2A 00 00    	ld	hl,(_sprite_curr_index)
2602  0A95  26 00       	ld	h,0x00
2603  0A97  11 00 00    	ld	de,_scr_map
2604  0A9A  19          	add	hl,de
2605  0A9B  66          	ld	h, (hl)
2606  0A9C  EB          	ex	de,hl
2607  0A9D  C5          	push	bc
2608  0A9E  C5          	push	bc
2609  0A9F  D5          	push	de
2610  0AA0  33          	inc	sp
2611  0AA1  CD C4 0A    	call	_spr_tile_paint
2612  0AA4  F1          	pop	af
2613  0AA5  33          	inc	sp
2614  0AA6  C1          	pop	bc
2615  0AA7  21 00 00    	ld	hl,_sprite_curr_index
2616  0AAA  34          	inc	(hl)
2617  0AAB  21 00 00    	ld	hl,_s_col0
2618  0AAE  46          	ld	b, (hl)
2619  0AAF  04          	inc	b
2620  0AB0  2A 00 00    	ld	hl,(_sprite_curr_index)
2621  0AB3  26 00       	ld	h,0x00
2622  0AB5  11 00 00    	ld	de,_scr_map
2623  0AB8  19          	add	hl,de
2624  0AB9  66          	ld	h, (hl)
2625  0ABA  C5          	push	bc
2626  0ABB  E5          	push	hl
2627  0ABC  33          	inc	sp
2628  0ABD  CD C4 0A    	call	_spr_tile_paint
2629  0AC0  F1          	pop	af
2630  0AC1  33          	inc	sp
2631  0AC2              l_spr_back_repaint_00109:
2632  0AC2  FB          	ei
2633  0AC3  C9          	ret
2634  0AC4              	SECTION code_compiler
2635  0AC4              ;	---------------------------------
2636  0AC4              ; Function spr_tile_paint
2637  0AC4              ; ---------------------------------
2638  0AC4              _spr_tile_paint:
2639  0AC4  CD 00 00    	call	___sdcc_enter_ix
2640  0AC7  DD 7E 04    	ld	a,(ix+4)
2641  0ACA  B7          	or	a, a
2642  0ACB  28 05       	jr	Z,l_spr_tile_paint_00101
2643  0ACD  3C          	inc	a
2644  0ACE  28 22       	jr	Z,l_spr_tile_paint_00105
2645  0AD0  18 11       	jr	l_spr_tile_paint_00103
2646  0AD2              l_spr_tile_paint_00101:
2647  0AD2  DD 66 06    	ld	h,(ix+6)
2648  0AD5  DD 6E 05    	ld	l,(ix+5)
2649  0AD8  3A 00 00    	ld	a,(_map_paper_clr)
2650  0ADB  E5          	push	hl
2651  0ADC  F5          	push	af
2652  0ADD  33          	inc	sp
2653  0ADE  CD 00 00    	call	_NIRVANAP_fillT_raw_callee
2654  0AE1  18 0F       	jr	l_spr_tile_paint_00105
2655  0AE3              l_spr_tile_paint_00103:
2656  0AE3  DD 66 06    	ld	h,(ix+6)
2657  0AE6  DD 6E 05    	ld	l,(ix+5)
2658  0AE9  E5          	push	hl
2659  0AEA  DD 7E 04    	ld	a,(ix+4)
2660  0AED  F5          	push	af
2661  0AEE  33          	inc	sp
2662  0AEF  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2663  0AF2              l_spr_tile_paint_00105:
2664  0AF2  DD E1       	pop	ix
2665  0AF4  C9          	ret
2666  0AF5              	SECTION code_compiler
2667  0AF5              ;	---------------------------------
2668  0AF5              ; Function spr_init_anim_bullets
2669  0AF5              ; ---------------------------------
2670  0AF5              _spr_init_anim_bullets:
2671  0AF5  01 00 00    	ld	bc,_anim_lin+0
2672  0AF8  1E 00       	ld	e,0x00
2673  0AFA              l_spr_init_anim_bullets_00102:
2674  0AFA  6B          	ld	l,e
2675  0AFB  26 00       	ld	h,0x00
2676  0AFD  09          	add	hl, bc
2677  0AFE  36 FF       	ld	(hl),0xff
2678  0B00  16 00       	ld	d,0x00
2679  0B02  21 00 00    	ld	hl,_bullet_col
2680  0B05  19          	add	hl, de
2681  0B06  36 FF       	ld	(hl),0xff
2682  0B08  1C          	inc	e
2683  0B09  7B          	ld	a, e
2684  0B0A  D6 08       	sub	a,0x08
2685  0B0C  38 EC       	jr	C,l_spr_init_anim_bullets_00102
2686  0B0E  21 00 00    	ld	hl,_bullet_count
2687  0B11  36 00       	ld	(hl),0x00
2688  0B13  21 00 00    	ld	hl,_anim_count
2689  0B16  36 00       	ld	(hl),0x00
2690  0B18  C9          	ret
2691  0B19              	SECTION code_compiler
2692  0B19              ;	---------------------------------
2693  0B19              ; Function spr_add_anim
2694  0B19              ; ---------------------------------
2695  0B19              _spr_add_anim:
2696  0B19  CD 00 00    	call	___sdcc_enter_ix
2697  0B1C  F5          	push	af
2698  0B1D  F5          	push	af
2699  0B1E  3B          	dec	sp
2700  0B1F  DD 7E 05    	ld	a,(ix+5)
2701  0B22  D6 1F       	sub	a,0x1f
2702  0B24  D2 E3 0B    	jp	NC, l_spr_add_anim_00111
2703  0B27  DD 7E 04    	ld	a,(ix+4)
2704  0B2A  D6 B8       	sub	a,0xb8
2705  0B2C  D2 E3 0B    	jp	NC, l_spr_add_anim_00111
2706  0B2F  0E 00       	ld	c,0x00
2707  0B31  DD 71 FF    	ld	(ix-1),c
2708  0B34              l_spr_add_anim_00109:
2709  0B34  3E 00       	ld	a, +((_anim_lin) & 0xFF)
2710  0B36  81          	add	a, c
2711  0B37  5F          	ld	e, a
2712  0B38  3E 00       	ld	a, +((_anim_lin) / 256)
2713  0B3A  CE 00       	adc	a,0x00
2714  0B3C  57          	ld	d, a
2715  0B3D  1A          	ld	a, (de)
2716  0B3E  3C          	inc	a
2717  0B3F  C2 D9 0B    	jp	NZ,l_spr_add_anim_00110
2718  0B42  21 00 00    	ld	hl,_anim_count
2719  0B45  34          	inc	(hl)
2720  0B46  DD 7E 04    	ld	a,(ix+4)
2721  0B49  12          	ld	(de), a
2722  0B4A  01 00 00    	ld	bc,_anim_col
2723  0B4D  DD 6E FF    	ld	l,(ix-1)
2724  0B50  26 00       	ld	h,0x00
2725  0B52  09          	add	hl,bc
2726  0B53  DD 75 FD    	ld	(ix-3),l
2727  0B56  DD 74 FE    	ld	(ix-2),h
2728  0B59  DD 7E 05    	ld	a,(ix+5)
2729  0B5C  77          	ld	(hl), a
2730  0B5D  3E 00       	ld	a, +((_anim_tile) & 0xFF)
2731  0B5F  DD 86 FF    	add	a,(ix-1)
2732  0B62  DD 77 FB    	ld	(ix-5),a
2733  0B65  3E 00       	ld	a, +((_anim_tile) / 256)
2734  0B67  CE 00       	adc	a,0x00
2735  0B69  DD 77 FC    	ld	(ix-4),a
2736  0B6C  E1          	pop	hl
2737  0B6D  E5          	push	hl
2738  0B6E  DD 7E 06    	ld	a,(ix+6)
2739  0B71  77          	ld	(hl), a
2740  0B72  3E 00       	ld	a, +((_anim_loop) & 0xFF)
2741  0B74  DD 86 FF    	add	a,(ix-1)
2742  0B77  4F          	ld	c, a
2743  0B78  3E 00       	ld	a, +((_anim_loop) / 256)
2744  0B7A  CE 00       	adc	a,0x00
2745  0B7C  47          	ld	b, a
2746  0B7D  DD 7E 08    	ld	a,(ix+8)
2747  0B80  02          	ld	(bc), a
2748  0B81  01 00 00    	ld	bc,_anim_int+0
2749  0B84  DD 6E FF    	ld	l,(ix-1)
2750  0B87  26 00       	ld	h,0x00
2751  0B89  09          	add	hl, bc
2752  0B8A  36 00       	ld	(hl),0x00
2753  0B8C  3E 00       	ld	a, +((_anim_end) & 0xFF)
2754  0B8E  DD 86 FF    	add	a,(ix-1)
2755  0B91  4F          	ld	c, a
2756  0B92  3E 00       	ld	a, +((_anim_end) / 256)
2757  0B94  CE 00       	adc	a,0x00
2758  0B96  47          	ld	b, a
2759  0B97  DD 7E 07    	ld	a,(ix+7)
2760  0B9A  02          	ld	(bc), a
2761  0B9B  3E 00       	ld	a, +((_anim_respanwn) & 0xFF)
2762  0B9D  DD 86 FF    	add	a,(ix-1)
2763  0BA0  4F          	ld	c, a
2764  0BA1  3E 00       	ld	a, +((_anim_respanwn) / 256)
2765  0BA3  CE 00       	adc	a,0x00
2766  0BA5  47          	ld	b, a
2767  0BA6  DD 7E 09    	ld	a,(ix+9)
2768  0BA9  02          	ld	(bc), a
2769  0BAA  F3          	di
2770  0BAB  DD 6E FD    	ld	l,(ix-3)
2771  0BAE  DD 66 FE    	ld	h,(ix-2)
2772  0BB1  46          	ld	b, (hl)
2773  0BB2  E1          	pop	hl
2774  0BB3  1A          	ld	a,(de)
2775  0BB4  56          	ld	d,(hl)
2776  0BB5  E5          	push	hl
2777  0BB6  C5          	push	bc
2778  0BB7  33          	inc	sp
2779  0BB8  5A          	ld	e,d
2780  0BB9  57          	ld	d,a
2781  0BBA  D5          	push	de
2782  0BBB  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2783  0BBE  FB          	ei
2784  0BBF  DD 66 05    	ld	h,(ix+5)
2785  0BC2  DD 6E 04    	ld	l,(ix+4)
2786  0BC5  E5          	push	hl
2787  0BC6  CD 00 00    	call	_spr_calc_index
2788  0BC9  F1          	pop	af
2789  0BCA  22 00 00    	ld	(_index0),hl
2790  0BCD  01 00 00    	ld	bc,_scr_map
2791  0BD0  09          	add	hl,bc
2792  0BD1  7E          	ld	a,(hl)
2793  0BD2  B7          	or	a,a
2794  0BD3  20 0E       	jr	NZ,l_spr_add_anim_00111
2795  0BD5  36 FF       	ld	(hl),0xff
2796  0BD7  18 0A       	jr	l_spr_add_anim_00111
2797  0BD9              l_spr_add_anim_00110:
2798  0BD9  0C          	inc	c
2799  0BDA  DD 71 FF    	ld	(ix-1),c
2800  0BDD  79          	ld	a, c
2801  0BDE  D6 08       	sub	a,0x08
2802  0BE0  DA 34 0B    	jp	C, l_spr_add_anim_00109
2803  0BE3              l_spr_add_anim_00111:
2804  0BE3  DD F9       	ld	sp, ix
2805  0BE5  DD E1       	pop	ix
2806  0BE7  C9          	ret
2807  0BE8              	SECTION code_compiler
2808  0BE8              ;	---------------------------------
2809  0BE8              ; Function spr_play_anim
2810  0BE8              ; ---------------------------------
2811  0BE8              _spr_play_anim:
2812  0BE8  CD 00 00    	call	___sdcc_enter_ix
2813  0BEB  F5          	push	af
2814  0BEC  F5          	push	af
2815  0BED  F5          	push	af
2816  0BEE  0E 00       	ld	c,0x00
2817  0BF0              l_spr_play_anim_00114:
2818  0BF0  3E 00       	ld	a, +((_anim_lin) & 0xFF)
2819  0BF2  81          	add	a, c
2820  0BF3  DD 77 FC    	ld	(ix-4),a
2821  0BF6  6F          	ld	l,a
2822  0BF7  3E 00       	ld	a,+((_anim_lin) / 256)
2823  0BF9  CE 00       	adc	a,0x00
2824  0BFB  DD 77 FD    	ld	(ix-3),a
2825  0BFE  67          	ld	h,a
2826  0BFF  7E          	ld	a,(hl)
2827  0C00  5F          	ld	e,a
2828  0C01  3C          	inc	a
2829  0C02  CA E0 0C    	jp	Z,l_spr_play_anim_00115
2830  0C05  3E 00       	ld	a, +((_anim_int) & 0xFF)
2831  0C07  81          	add	a, c
2832  0C08  DD 77 FA    	ld	(ix-6),a
2833  0C0B  3E 00       	ld	a, +((_anim_int) / 256)
2834  0C0D  CE 00       	adc	a,0x00
2835  0C0F  DD 77 FB    	ld	(ix-5),a
2836  0C12  E1          	pop	hl
2837  0C13  56          	ld	d,(hl)
2838  0C14  E5          	push	hl
2839  0C15  06 00       	ld	b,0x00
2840  0C17  21 00 00    	ld	hl,_anim_end
2841  0C1A  09          	add	hl, bc
2842  0C1B  46          	ld	b, (hl)
2843  0C1C  7A          	ld	a, d
2844  0C1D  90          	sub	a, b
2845  0C1E  30 30       	jr	NC,l_spr_play_anim_00109
2846  0C20  F3          	di
2847  0C21  06 00       	ld	b,0x00
2848  0C23  21 00 00    	ld	hl,_anim_col
2849  0C26  09          	add	hl, bc
2850  0C27  46          	ld	b, (hl)
2851  0C28  DD 6E FC    	ld	l,(ix-4)
2852  0C2B  DD 66 FD    	ld	h,(ix-3)
2853  0C2E  56          	ld	d, (hl)
2854  0C2F  3E 00       	ld	a, +((_anim_tile) & 0xFF)
2855  0C31  81          	add	a, c
2856  0C32  6F          	ld	l, a
2857  0C33  3E 00       	ld	a, +((_anim_tile) / 256)
2858  0C35  CE 00       	adc	a,0x00
2859  0C37  67          	ld	h, a
2860  0C38  5E          	ld	e, (hl)
2861  0C39  E1          	pop	hl
2862  0C3A  E5          	push	hl
2863  0C3B  6E          	ld	l, (hl)
2864  0C3C  7B          	ld	a, e
2865  0C3D  85          	add	a, l
2866  0C3E  C5          	push	bc
2867  0C3F  4A          	ld	c, d
2868  0C40  C5          	push	bc
2869  0C41  F5          	push	af
2870  0C42  33          	inc	sp
2871  0C43  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2872  0C46  C1          	pop	bc
2873  0C47  FB          	ei
2874  0C48  E1          	pop	hl
2875  0C49  46          	ld	b,(hl)
2876  0C4A  04          	inc	b
2877  0C4B  E5          	push	hl
2878  0C4C  70          	ld	(hl), b
2879  0C4D  C3 E0 0C    	jp	l_spr_play_anim_00115
2880  0C50              l_spr_play_anim_00109:
2881  0C50  3E 00       	ld	a, +((_anim_loop) & 0xFF)
2882  0C52  81          	add	a, c
2883  0C53  DD 77 FE    	ld	(ix-2),a
2884  0C56  6F          	ld	l,a
2885  0C57  3E 00       	ld	a,+((_anim_loop) / 256)
2886  0C59  CE 00       	adc	a,0x00
2887  0C5B  DD 77 FF    	ld	(ix-1),a
2888  0C5E  67          	ld	h,a
2889  0C5F  7E          	ld	a, (hl)
2890  0C60  B7          	or	a, a
2891  0C61  20 70       	jr	NZ,l_spr_play_anim_00106
2892  0C63  21 00 00    	ld	hl,_anim_count
2893  0C66  35          	dec	(hl)
2894  0C67  06 00       	ld	b,0x00
2895  0C69  21 00 00    	ld	hl,_anim_col
2896  0C6C  09          	add	hl, bc
2897  0C6D  7E          	ld	a, (hl)
2898  0C6E  32 00 00    	ld	(_s_col0),a
2899  0C71  21 00 00    	ld	hl,_s_lin0
2900  0C74  73          	ld	(hl), e
2901  0C75  3A 00 00    	ld	a,(_s_col0)
2902  0C78  C5          	push	bc
2903  0C79  F5          	push	af
2904  0C7A  33          	inc	sp
2905  0C7B  3A 00 00    	ld	a,(_s_lin0)
2906  0C7E  F5          	push	af
2907  0C7F  33          	inc	sp
2908  0C80  CD 00 00    	call	_spr_calc_index
2909  0C83  F1          	pop	af
2910  0C84  2A FF FF    	ld	hl,(_s_col0 - 1)
2911  0C87  3A 00 00    	ld	a,(_s_lin0)
2912  0C8A  6F          	ld	l,a
2913  0C8B  E5          	push	hl
2914  0C8C  CD 00 00    	call	_spr_calc_index
2915  0C8F  F1          	pop	af
2916  0C90  EB          	ex	de,hl
2917  0C91  C1          	pop	bc
2918  0C92  21 00 00    	ld	hl,_scr_map
2919  0C95  19          	add	hl, de
2920  0C96  46          	ld	b, (hl)
2921  0C97  04          	inc	b
2922  0C98  20 17       	jr	NZ,l_spr_play_anim_00102
2923  0C9A  3A 00 00    	ld	a,(_s_col0)
2924  0C9D  C5          	push	bc
2925  0C9E  F5          	push	af
2926  0C9F  33          	inc	sp
2927  0CA0  3A 00 00    	ld	a,(_s_lin0)
2928  0CA3  F5          	push	af
2929  0CA4  33          	inc	sp
2930  0CA5  CD 00 00    	call	_spr_calc_index
2931  0CA8  F1          	pop	af
2932  0CA9  EB          	ex	de,hl
2933  0CAA  C1          	pop	bc
2934  0CAB  21 00 00    	ld	hl,_scr_map
2935  0CAE  19          	add	hl, de
2936  0CAF  36 00       	ld	(hl),0x00
2937  0CB1              l_spr_play_anim_00102:
2938  0CB1  C5          	push	bc
2939  0CB2  CD 77 09    	call	_spr_back_repaint
2940  0CB5  C1          	pop	bc
2941  0CB6  06 00       	ld	b,0x00
2942  0CB8  21 00 00    	ld	hl,_anim_respanwn
2943  0CBB  09          	add	hl, bc
2944  0CBC  7E          	ld	a, (hl)
2945  0CBD  B7          	or	a, a
2946  0CBE  28 09       	jr	Z,l_spr_play_anim_00104
2947  0CC0  C5          	push	bc
2948  0CC1  79          	ld	a, c
2949  0CC2  F5          	push	af
2950  0CC3  33          	inc	sp
2951  0CC4  CD 00 00    	call	_enemy_respawn
2952  0CC7  33          	inc	sp
2953  0CC8  C1          	pop	bc
2954  0CC9              l_spr_play_anim_00104:
2955  0CC9  DD 6E FC    	ld	l,(ix-4)
2956  0CCC  DD 66 FD    	ld	h,(ix-3)
2957  0CCF  36 FF       	ld	(hl),0xff
2958  0CD1  18 0D       	jr	l_spr_play_anim_00115
2959  0CD3              l_spr_play_anim_00106:
2960  0CD3  47          	ld	b, a
2961  0CD4  05          	dec	b
2962  0CD5  DD 6E FE    	ld	l,(ix-2)
2963  0CD8  DD 66 FF    	ld	h,(ix-1)
2964  0CDB  70          	ld	(hl), b
2965  0CDC  E1          	pop	hl
2966  0CDD  E5          	push	hl
2967  0CDE  36 00       	ld	(hl),0x00
2968  0CE0              l_spr_play_anim_00115:
2969  0CE0  0C          	inc	c
2970  0CE1  79          	ld	a, c
2971  0CE2  D6 08       	sub	a,0x08
2972  0CE4  DA F0 0B    	jp	C, l_spr_play_anim_00114
2973  0CE7  DD F9       	ld	sp, ix
2974  0CE9  DD E1       	pop	ix
2975  0CEB  C9          	ret
2976  0CEC              	SECTION code_compiler
2977  0CEC              ;	---------------------------------
2978  0CEC              ; Function spr_play_bullets
2979  0CEC              ; ---------------------------------
2980  0CEC              _spr_play_bullets:
2981  0CEC  CD 00 00    	call	___sdcc_enter_ix
2982  0CEF  21 F3 FF    	ld	hl, -13
2983  0CF2  39          	add	hl, sp
2984  0CF3  F9          	ld	sp, hl
2985  0CF4  3E 00       	ld	a,0x00
2986  0CF6  DD 77 FF    	ld	(ix-1),a
2987  0CF9  DD 77 F5    	ld	(ix-11),a
2988  0CFC              l_spr_play_bullets_00175:
2989  0CFC  01 00 00    	ld	bc,_bullet_col
2990  0CFF  DD 6E F5    	ld	l,(ix-11)
2991  0D02  26 00       	ld	h,0x00
2992  0D04  09          	add	hl,bc
2993  0D05  DD 75 FD    	ld	(ix-3),l
2994  0D08  DD 74 FE    	ld	(ix-2),h
2995  0D0B  7E          	ld	a, (hl)
2996  0D0C  DD 77 FC    	ld	(ix-4),a
2997  0D0F  3C          	inc	a
2998  0D10  CA 0E 11    	jp	Z,l_spr_play_bullets_00171
2999  0D13  01 00 00    	ld	bc,_bullet_lin
3000  0D16  DD 6E F5    	ld	l,(ix-11)
3001  0D19  26 00       	ld	h,0x00
3002  0D1B  09          	add	hl,bc
3003  0D1C  DD 75 FA    	ld	(ix-6),l
3004  0D1F  DD 74 FB    	ld	(ix-5),h
3005  0D22  7E          	ld	a, (hl)
3006  0D23  32 00 00    	ld	(_s_lin0),a
3007  0D26  DD 7E FC    	ld	a,(ix-4)
3008  0D29  32 00 00    	ld	(_s_col0),a
3009  0D2C  DD 77 F4    	ld	(ix-12),a
3010  0D2F  CD 77 09    	call	_spr_back_repaint
3011  0D32  01 00 00    	ld	bc,_bullet_class
3012  0D35  DD 6E F5    	ld	l,(ix-11)
3013  0D38  26 00       	ld	h,0x00
3014  0D3A  09          	add	hl,bc
3015  0D3B  DD 75 F8    	ld	(ix-8),l
3016  0D3E  DD 74 F9    	ld	(ix-7),h
3017  0D41  7E          	ld	a, (hl)
3018  0D42  D6 02       	sub	a,0x02
3019  0D44  20 46       	jr	NZ,l_spr_play_bullets_00107
3020  0D46  3A 00 00    	ld	a,(_s_lin0)
3021  0D49  4F          	ld	c,a
3022  0D4A  06 00       	ld	b,0x00
3023  0D4C  3E 00       	ld	a, +((_bullet_lin0) & 0xFF)
3024  0D4E  DD 86 F5    	add	a,(ix-11)
3025  0D51  6F          	ld	l, a
3026  0D52  3E 00       	ld	a, +((_bullet_lin0) / 256)
3027  0D54  CE 00       	adc	a,0x00
3028  0D56  67          	ld	h, a
3029  0D57  5E          	ld	e, (hl)
3030  0D58  16 00       	ld	d,0x00
3031  0D5A  79          	ld	a, c
3032  0D5B  93          	sub	a, e
3033  0D5C  4F          	ld	c, a
3034  0D5D  78          	ld	a, b
3035  0D5E  9A          	sbc	a, d
3036  0D5F  47          	ld	b, a
3037  0D60  3E 08       	ld	a,0x08
3038  0D62  B9          	cp	a, c
3039  0D63  3E 00       	ld	a,0x00
3040  0D65  98          	sbc	a, b
3041  0D66  E2 6B 0D    	jp	PO, l_spr_play_bullets_00337
3042  0D69  EE 80       	xor	a,0x80
3043  0D6B              l_spr_play_bullets_00337:
3044  0D6B  FA 84 0D    	jp	M, l_spr_play_bullets_00104
3045  0D6E  DD 6E FA    	ld	l,(ix-6)
3046  0D71  DD 66 FB    	ld	h,(ix-5)
3047  0D74  4E          	ld	c, (hl)
3048  0D75  0C          	inc	c
3049  0D76  0C          	inc	c
3050  0D77  DD 6E FA    	ld	l,(ix-6)
3051  0D7A  DD 66 FB    	ld	h,(ix-5)
3052  0D7D  71          	ld	(hl), c
3053  0D7E  21 00 00    	ld	hl,_s_lin0
3054  0D81  71          	ld	(hl), c
3055  0D82  18 08       	jr	l_spr_play_bullets_00107
3056  0D84              l_spr_play_bullets_00104:
3057  0D84  DD 6E F8    	ld	l,(ix-8)
3058  0D87  DD 66 F9    	ld	h,(ix-7)
3059  0D8A  36 03       	ld	(hl),0x03
3060  0D8C              l_spr_play_bullets_00107:
3061  0D8C  DD 6E F8    	ld	l,(ix-8)
3062  0D8F  DD 66 F9    	ld	h,(ix-7)
3063  0D92  7E          	ld	a, (hl)
3064  0D93  D6 03       	sub	a,0x03
3065  0D95  20 46       	jr	NZ,l_spr_play_bullets_00112
3066  0D97  3E 00       	ld	a, +((_bullet_lin0) & 0xFF)
3067  0D99  DD 86 F5    	add	a,(ix-11)
3068  0D9C  6F          	ld	l, a
3069  0D9D  3E 00       	ld	a, +((_bullet_lin0) / 256)
3070  0D9F  CE 00       	adc	a,0x00
3071  0DA1  67          	ld	h, a
3072  0DA2  4E          	ld	c, (hl)
3073  0DA3  06 00       	ld	b,0x00
3074  0DA5  3A 00 00    	ld	a,(_s_lin0)
3075  0DA8  5F          	ld	e,a
3076  0DA9  16 00       	ld	d,0x00
3077  0DAB  79          	ld	a, c
3078  0DAC  93          	sub	a, e
3079  0DAD  4F          	ld	c, a
3080  0DAE  78          	ld	a, b
3081  0DAF  9A          	sbc	a, d
3082  0DB0  47          	ld	b, a
3083  0DB1  3E 08       	ld	a,0x08
3084  0DB3  B9          	cp	a, c
3085  0DB4  3E 00       	ld	a,0x00
3086  0DB6  98          	sbc	a, b
3087  0DB7  E2 BC 0D    	jp	PO, l_spr_play_bullets_00340
3088  0DBA  EE 80       	xor	a,0x80
3089  0DBC              l_spr_play_bullets_00340:
3090  0DBC  FA D5 0D    	jp	M, l_spr_play_bullets_00109
3091  0DBF  DD 6E FA    	ld	l,(ix-6)
3092  0DC2  DD 66 FB    	ld	h,(ix-5)
3093  0DC5  4E          	ld	c, (hl)
3094  0DC6  0D          	dec	c
3095  0DC7  0D          	dec	c
3096  0DC8  DD 6E FA    	ld	l,(ix-6)
3097  0DCB  DD 66 FB    	ld	h,(ix-5)
3098  0DCE  71          	ld	(hl), c
3099  0DCF  21 00 00    	ld	hl,_s_lin0
3100  0DD2  71          	ld	(hl), c
3101  0DD3  18 08       	jr	l_spr_play_bullets_00112
3102  0DD5              l_spr_play_bullets_00109:
3103  0DD5  DD 6E F8    	ld	l,(ix-8)
3104  0DD8  DD 66 F9    	ld	h,(ix-7)
3105  0DDB  36 02       	ld	(hl),0x02
3106  0DDD              l_spr_play_bullets_00112:
3107  0DDD  DD 6E F8    	ld	l,(ix-8)
3108  0DE0  DD 66 F9    	ld	h,(ix-7)
3109  0DE3  7E          	ld	a, (hl)
3110  0DE4  D6 04       	sub	a,0x04
3111  0DE6  20 66       	jr	NZ,l_spr_play_bullets_00123
3112  0DE8  3E 00       	ld	a, +((_bullet_vel) & 0xFF)
3113  0DEA  DD 86 F5    	add	a,(ix-11)
3114  0DED  4F          	ld	c, a
3115  0DEE  3E 00       	ld	a, +((_bullet_vel) / 256)
3116  0DF0  CE 00       	adc	a,0x00
3117  0DF2  47          	ld	b, a
3118  0DF3  0A          	ld	a, (bc)
3119  0DF4  5F          	ld	e, a
3120  0DF5  21 00 00    	ld	hl,_game_gravity
3121  0DF8  56          	ld	d, (hl)
3122  0DF9  7B          	ld	a, e
3123  0DFA  82          	add	a, d
3124  0DFB  5F          	ld	e,a
3125  0DFC  02          	ld	(bc), a
3126  0DFD  3E 78       	ld	a,0x78
3127  0DFF  93          	sub	a, e
3128  0E00  E2 05 0E    	jp	PO, l_spr_play_bullets_00343
3129  0E03  EE 80       	xor	a,0x80
3130  0E05              l_spr_play_bullets_00343:
3131  0E05  F2 0B 0E    	jp	P, l_spr_play_bullets_00114
3132  0E08  3E 78       	ld	a,0x78
3133  0E0A  02          	ld	(bc), a
3134  0E0B              l_spr_play_bullets_00114:
3135  0E0B  0A          	ld	a, (bc)
3136  0E0C  EE 80       	xor	a,0x80
3137  0E0E  D6 08       	sub	a,0x08
3138  0E10  30 03       	jr	NC,l_spr_play_bullets_00116
3139  0E12  3E 88       	ld	a,0x88
3140  0E14  02          	ld	(bc), a
3141  0E15              l_spr_play_bullets_00116:
3142  0E15  0A          	ld	a, (bc)
3143  0E16  CB 47       	bit	0,a
3144  0E18  32 00 00    	ld	(_s_lin1),a
3145  0E1B  28 04       	jr	Z,l_spr_play_bullets_00118
3146  0E1D  21 00 00    	ld	hl,_s_lin1
3147  0E20  35          	dec	(hl)
3148  0E21              l_spr_play_bullets_00118:
3149  0E21  DD 6E FA    	ld	l,(ix-6)
3150  0E24  DD 66 FB    	ld	h,(ix-5)
3151  0E27  7E          	ld	a, (hl)
3152  0E28  21 00 00    	ld	hl,_s_lin1
3153  0E2B  86          	add	a, (hl)
3154  0E2C  21 00 00    	ld	hl,_s_lin0
3155  0E2F  77          	ld	(hl), a
3156  0E30  3E 90       	ld	a,0x90
3157  0E32  96          	sub	a, (hl)
3158  0E33  30 0F       	jr	NC,l_spr_play_bullets_00120
3159  0E35  21 00 00    	ld	hl,_bullet_count
3160  0E38  35          	dec	(hl)
3161  0E39  DD 6E FD    	ld	l,(ix-3)
3162  0E3C  DD 66 FE    	ld	h,(ix-2)
3163  0E3F  36 FF       	ld	(hl),0xff
3164  0E41  C3 0E 11    	jp	l_spr_play_bullets_00171
3165  0E44              l_spr_play_bullets_00120:
3166  0E44  DD 6E FA    	ld	l,(ix-6)
3167  0E47  DD 66 FB    	ld	h,(ix-5)
3168  0E4A  3A 00 00    	ld	a,(_s_lin0)
3169  0E4D  77          	ld	(hl),a
3170  0E4E              l_spr_play_bullets_00123:
3171  0E4E  3E 00       	ld	a, +((_bullet_dir) & 0xFF)
3172  0E50  DD 86 F5    	add	a,(ix-11)
3173  0E53  6F          	ld	l, a
3174  0E54  3E 00       	ld	a, +((_bullet_dir) / 256)
3175  0E56  CE 00       	adc	a,0x00
3176  0E58  67          	ld	h, a
3177  0E59  4E          	ld	c, (hl)
3178  0E5A  0C          	inc	c
3179  0E5B  20 3D       	jr	NZ,l_spr_play_bullets_00133
3180  0E5D  3E 00       	ld	a, +((_bullet_colint) & 0xFF)
3181  0E5F  DD 86 F5    	add	a,(ix-11)
3182  0E62  4F          	ld	c, a
3183  0E63  3E 00       	ld	a, +((_bullet_colint) / 256)
3184  0E65  CE 00       	adc	a,0x00
3185  0E67  47          	ld	b, a
3186  0E68  0A          	ld	a, (bc)
3187  0E69  3C          	inc	a
3188  0E6A  5F          	ld	e,a
3189  0E6B  02          	ld	(bc), a
3190  0E6C  3E 00       	ld	a, +((_bullet_frames) & 0xFF)
3191  0E6E  DD 86 F5    	add	a,(ix-11)
3192  0E71  6F          	ld	l, a
3193  0E72  3E 00       	ld	a, +((_bullet_frames) / 256)
3194  0E74  CE 00       	adc	a,0x00
3195  0E76  67          	ld	h, a
3196  0E77  56          	ld	d, (hl)
3197  0E78  7B          	ld	a, e
3198  0E79  92          	sub	a, d
3199  0E7A  38 63       	jr	C,l_spr_play_bullets_00134
3200  0E7C  DD 6E FD    	ld	l,(ix-3)
3201  0E7F  DD 66 FE    	ld	h,(ix-2)
3202  0E82  7E          	ld	a, (hl)
3203  0E83  3C          	inc	a
3204  0E84  DD 77 F4    	ld	(ix-12),a
3205  0E87  AF          	xor	a, a
3206  0E88  02          	ld	(bc), a
3207  0E89  DD 7E F4    	ld	a,(ix-12)
3208  0E8C  E6 01       	and	a,0x01
3209  0E8E  3D          	dec	a
3210  0E8F  20 4E       	jr	NZ,l_spr_play_bullets_00134
3211  0E91  DD 7E F4    	ld	a,(ix-12)
3212  0E94  3C          	inc	a
3213  0E95  32 00 00    	ld	(_s_col0),a
3214  0E98  18 45       	jr	l_spr_play_bullets_00134
3215  0E9A              l_spr_play_bullets_00133:
3216  0E9A  01 00 00    	ld	bc,_bullet_colint
3217  0E9D  DD 6E F5    	ld	l,(ix-11)
3218  0EA0  26 00       	ld	h,0x00
3219  0EA2  09          	add	hl,bc
3220  0EA3  DD 75 F6    	ld	(ix-10),l
3221  0EA6  DD 74 F7    	ld	(ix-9),h
3222  0EA9  4E          	ld	c,(hl)
3223  0EAA  0D          	dec	c
3224  0EAB  71          	ld	(hl), c
3225  0EAC  0C          	inc	c
3226  0EAD  20 30       	jr	NZ,l_spr_play_bullets_00134
3227  0EAF  DD 6E FD    	ld	l,(ix-3)
3228  0EB2  DD 66 FE    	ld	h,(ix-2)
3229  0EB5  7E          	ld	a, (hl)
3230  0EB6  C6 FF       	add	a,0xff
3231  0EB8  DD 77 F4    	ld	(ix-12),a
3232  0EBB  3E 00       	ld	a, +((_bullet_frames) & 0xFF)
3233  0EBD  DD 86 F5    	add	a,(ix-11)
3234  0EC0  6F          	ld	l, a
3235  0EC1  3E 00       	ld	a, +((_bullet_frames) / 256)
3236  0EC3  CE 00       	adc	a,0x00
3237  0EC5  67          	ld	h, a
3238  0EC6  4E          	ld	c, (hl)
3239  0EC7  0D          	dec	c
3240  0EC8  DD 6E F6    	ld	l,(ix-10)
3241  0ECB  DD 66 F7    	ld	h,(ix-9)
3242  0ECE  71          	ld	(hl), c
3243  0ECF  DD 7E F4    	ld	a,(ix-12)
3244  0ED2  E6 01       	and	a,0x01
3245  0ED4  3D          	dec	a
3246  0ED5  20 08       	jr	NZ,l_spr_play_bullets_00134
3247  0ED7  DD 7E F4    	ld	a,(ix-12)
3248  0EDA  C6 FF       	add	a,0xff
3249  0EDC  32 00 00    	ld	(_s_col0),a
3250  0EDF              l_spr_play_bullets_00134:
3251  0EDF  21 00 00    	ld	hl,_tmp1
3252  0EE2  36 00       	ld	(hl),0x00
3253  0EE4  3E 00       	ld	a, +((_bullet_max) & 0xFF)
3254  0EE6  DD 86 F5    	add	a,(ix-11)
3255  0EE9  4F          	ld	c, a
3256  0EEA  3E 00       	ld	a, +((_bullet_max) / 256)
3257  0EEC  CE 00       	adc	a,0x00
3258  0EEE  47          	ld	b, a
3259  0EEF  0A          	ld	a, (bc)
3260  0EF0  B7          	or	a, a
3261  0EF1  28 27       	jr	Z,l_spr_play_bullets_00138
3262  0EF3  DD 5E F4    	ld	e,(ix-12)
3263  0EF6  16 00       	ld	d,0x00
3264  0EF8  3E 00       	ld	a, +((_bullet_col0) & 0xFF)
3265  0EFA  DD 86 F5    	add	a,(ix-11)
3266  0EFD  6F          	ld	l, a
3267  0EFE  3E 00       	ld	a, +((_bullet_col0) / 256)
3268  0F00  CE 00       	adc	a,0x00
3269  0F02  67          	ld	h, a
3270  0F03  6E          	ld	l, (hl)
3271  0F04  AF          	xor	a,a
3272  0F05  67          	ld	h,a
3273  0F06  EB          	ex	de,hl
3274  0F07  ED 52       	sbc	hl,de
3275  0F09  CD 00 00    	call	_abs_fastcall
3276  0F0C  5D          	ld	e, l
3277  0F0D  21 00 00    	ld	hl,_tmp0
3278  0F10  73          	ld	(hl), e
3279  0F11  0A          	ld	a, (bc)
3280  0F12  96          	sub	a, (hl)
3281  0F13  30 05       	jr	NC,l_spr_play_bullets_00138
3282  0F15  21 00 00    	ld	hl,_tmp1
3283  0F18  36 01       	ld	(hl),0x01
3284  0F1A              l_spr_play_bullets_00138:
3285  0F1A  DD 7E F4    	ld	a,(ix-12)
3286  0F1D  D6 1E       	sub	a,0x1e
3287  0F1F  38 05       	jr	C,l_spr_play_bullets_00140
3288  0F21  21 00 00    	ld	hl,_tmp1
3289  0F24  36 01       	ld	(hl),0x01
3290  0F26              l_spr_play_bullets_00140:
3291  0F26  3A 00 00    	ld	a,(_tmp1)
3292  0F29  B7          	or	a, a
3293  0F2A  28 0F       	jr	Z,l_spr_play_bullets_00142
3294  0F2C  21 00 00    	ld	hl,_bullet_count
3295  0F2F  35          	dec	(hl)
3296  0F30  DD 6E FD    	ld	l,(ix-3)
3297  0F33  DD 66 FE    	ld	h,(ix-2)
3298  0F36  36 FF       	ld	(hl),0xff
3299  0F38  C3 0E 11    	jp	l_spr_play_bullets_00171
3300  0F3B              l_spr_play_bullets_00142:
3301  0F3B  DD 7E FD    	ld	a,(ix-3)
3302  0F3E  DD 77 F6    	ld	(ix-10),a
3303  0F41  DD 7E FE    	ld	a,(ix-2)
3304  0F44  DD 77 F7    	ld	(ix-9),a
3305  0F47  DD 6E FD    	ld	l,(ix-3)
3306  0F4A  DD 66 FE    	ld	h,(ix-2)
3307  0F4D  DD 7E F4    	ld	a,(ix-12)
3308  0F50  96          	sub	a,(hl)
3309  0F51  CA D9 10    	jp	Z,l_spr_play_bullets_00168
3310  0F54  3A 00 00    	ld	a,(_s_lin0)
3311  0F57  C6 08       	add	a,0x08
3312  0F59  4F          	ld	c, a
3313  0F5A  3A 00 00    	ld	a, (_s_col0)
3314  0F5D  47          	ld	b,a
3315  0F5E  C5          	push	bc
3316  0F5F  CD 00 00    	call	_spr_calc_index
3317  0F62  F1          	pop	af
3318  0F63  22 00 00    	ld	(_index0),hl
3319  0F66  11 00 00    	ld	de,_scr_map
3320  0F69  19          	add	hl,de
3321  0F6A  7E          	ld	a,(hl)
3322  0F6B  EB          	ex	de,hl
3323  0F6C  47          	ld	b, a
3324  0F6D  DD 7E F5    	ld	a,(ix-11)
3325  0F70  D6 07       	sub	a,0x07
3326  0F72  20 04       	jr	NZ,l_spr_play_bullets_00354
3327  0F74  3E 01       	ld	a,0x01
3328  0F76  18 01       	jr	l_spr_play_bullets_00355
3329  0F78              l_spr_play_bullets_00354:
3330  0F78  AF          	xor	a,a
3331  0F79              l_spr_play_bullets_00355:
3332  0F79  4F          	ld	c, a
3333  0F7A  78          	ld	a, b
3334  0F7B  D6 4D       	sub	a,0x4d
3335  0F7D  20 3D       	jr	NZ,l_spr_play_bullets_00144
3336  0F7F  B1          	or	a,c
3337  0F80  28 3A       	jr	Z,l_spr_play_bullets_00144
3338  0F82  AF          	xor	a, a
3339  0F83  12          	ld	(de), a
3340  0F84  2A 00 00    	ld	hl,(_index0)
3341  0F87  E5          	push	hl
3342  0F88  CD 00 00    	call	_game_obj_set
3343  0F8B  F1          	pop	af
3344  0F8C  2A 00 00    	ld	hl,(_index0)
3345  0F8F  4D          	ld	c,l
3346  0F90  5C          	ld	e,h
3347  0F91  06 04       	ld	b,0x04
3348  0F93  79          	ld	a,c
3349  0F94              l_spr_play_bullets_00358:
3350  0F94  CB 3B       	srl	e
3351  0F96  1F          	rra
3352  0F97  10 FB       	djnz	l_spr_play_bullets_00358
3353  0F99  07          	rlca
3354  0F9A  07          	rlca
3355  0F9B  07          	rlca
3356  0F9C  07          	rlca
3357  0F9D  E6 F0       	and	a,0xf0
3358  0F9F  DD 6E FA    	ld	l,(ix-6)
3359  0FA2  DD 66 FB    	ld	h,(ix-5)
3360  0FA5  77          	ld	(hl), a
3361  0FA6  3A 00 00    	ld	a,(_index0)
3362  0FA9  E6 0F       	and	a,0x0f
3363  0FAB  87          	add	a, a
3364  0FAC  DD 6E FD    	ld	l,(ix-3)
3365  0FAF  DD 66 FE    	ld	h,(ix-2)
3366  0FB2  77          	ld	(hl), a
3367  0FB3  DD 6E F5    	ld	l,(ix-11)
3368  0FB6  CD 21 11    	call	_spr_explode_bullet
3369  0FB9  C3 0E 11    	jp	l_spr_play_bullets_00171
3370  0FBC              l_spr_play_bullets_00144:
3371  0FBC  78          	ld	a, b
3372  0FBD  D6 3C       	sub	a,0x3c
3373  0FBF  38 0C       	jr	C,l_spr_play_bullets_00147
3374  0FC1  04          	inc	b
3375  0FC2  28 09       	jr	Z,l_spr_play_bullets_00147
3376  0FC4  DD 6E F5    	ld	l,(ix-11)
3377  0FC7  CD 21 11    	call	_spr_explode_bullet
3378  0FCA  C3 0E 11    	jp	l_spr_play_bullets_00171
3379  0FCD              l_spr_play_bullets_00147:
3380  0FCD  DD 6E FD    	ld	l,(ix-3)
3381  0FD0  DD 66 FE    	ld	h,(ix-2)
3382  0FD3  DD 7E F4    	ld	a,(ix-12)
3383  0FD6  77          	ld	(hl), a
3384  0FD7  DD 6E F8    	ld	l,(ix-8)
3385  0FDA  DD 66 F9    	ld	h,(ix-7)
3386  0FDD  7E          	ld	a, (hl)
3387  0FDE  D6 04       	sub	a,0x04
3388  0FE0  20 16       	jr	NZ,l_spr_play_bullets_00150
3389  0FE2  21 00 00    	ld	hl,_s_lin0
3390  0FE5  7E          	ld	a, (hl)
3391  0FE6  C6 F0       	add	a,0xf0
3392  0FE8  5F          	ld	e, a
3393  0FE9  7E          	ld	a, (hl)
3394  0FEA  C6 10       	add	a,0x10
3395  0FEC  DD 77 F3    	ld	(ix-13),a
3396  0FEF  DD 35 F4    	dec	(ix-12)
3397  0FF2  DD 46 F4    	ld	b,(ix-12)
3398  0FF5  04          	inc	b
3399  0FF6  18 11       	jr	l_spr_play_bullets_00151
3400  0FF8              l_spr_play_bullets_00150:
3401  0FF8  21 00 00    	ld	hl,_s_lin0
3402  0FFB  7E          	ld	a, (hl)
3403  0FFC  C6 F8       	add	a,0xf8
3404  0FFE  5F          	ld	e, a
3405  0FFF  7E          	ld	a, (hl)
3406  1000  C6 08       	add	a,0x08
3407  1002  DD 77 F3    	ld	(ix-13),a
3408  1005  DD 46 F4    	ld	b,(ix-12)
3409  1008  04          	inc	b
3410  1009              l_spr_play_bullets_00151:
3411  1009  79          	ld	a, c
3412  100A  B7          	or	a, a
3413  100B  CA A3 10    	jp	Z, l_spr_play_bullets_00165
3414  100E  21 00 00    	ld	hl,_tmp0
3415  1011  36 00       	ld	(hl),0x00
3416  1013              l_spr_play_bullets_00173:
3417  1013  3E 00       	ld	a, +((_class) & 0xFF)
3418  1015  21 00 00    	ld	hl,_tmp0
3419  1018  86          	add	a, (hl)
3420  1019  6F          	ld	l, a
3421  101A  3E 00       	ld	a, +((_class) / 256)
3422  101C  CE 00       	adc	a,0x00
3423  101E  67          	ld	h, a
3424  101F  7E          	ld	a, (hl)
3425  1020  B7          	or	a, a
3426  1021  28 73       	jr	Z,l_spr_play_bullets_00174
3427  1023  3E 00       	ld	a, +((_lin) & 0xFF)
3428  1025  21 00 00    	ld	hl,_tmp0
3429  1028  86          	add	a, (hl)
3430  1029  6F          	ld	l, a
3431  102A  3E 00       	ld	a, +((_lin) / 256)
3432  102C  CE 00       	adc	a,0x00
3433  102E  67          	ld	h, a
3434  102F  7E          	ld	a,(hl)
3435  1030  4F          	ld	c,a
3436  1031  93          	sub	a, e
3437  1032  38 62       	jr	C,l_spr_play_bullets_00174
3438  1034  DD 7E F3    	ld	a,(ix-13)
3439  1037  91          	sub	a, c
3440  1038  38 5C       	jr	C,l_spr_play_bullets_00174
3441  103A  3E 00       	ld	a, +((_col) & 0xFF)
3442  103C  21 00 00    	ld	hl,_tmp0
3443  103F  86          	add	a, (hl)
3444  1040  DD 77 F8    	ld	(ix-8),a
3445  1043  6F          	ld	l,a
3446  1044  3E 00       	ld	a,+((_col) / 256)
3447  1046  CE 00       	adc	a,0x00
3448  1048  DD 77 F9    	ld	(ix-7),a
3449  104B  67          	ld	h,a
3450  104C  7E          	ld	a,(hl)
3451  104D  57          	ld	d,a
3452  104E  DD 96 F4    	sub	a,(ix-12)
3453  1051  38 43       	jr	C,l_spr_play_bullets_00174
3454  1053  78          	ld	a, b
3455  1054  92          	sub	a, d
3456  1055  38 3F       	jr	C,l_spr_play_bullets_00174
3457  1057  21 00 00    	ld	hl,_s_lin0
3458  105A  71          	ld	(hl), c
3459  105B  21 00 00    	ld	hl,_s_col0
3460  105E  72          	ld	(hl), d
3461  105F  CD 00 00    	call	_rand
3462  1062  01 06 00    	ld	bc,0x0006
3463  1065  C5          	push	bc
3464  1066  E5          	push	hl
3465  1067  CD 00 00    	call	__modsint_callee
3466  106A  CD 00 00    	call	_player_score_add
3467  106D  2A 00 00    	ld	hl,(_tmp0)
3468  1070  26 00       	ld	h,0x00
3469  1072  29          	add	hl,hl
3470  1073  01 00 00    	ld	bc,_game_respawn_time
3471  1076  09          	add	hl,bc
3472  1077  ED 5B 00 00 	ld	de,(_curr_time)
3473  107B  73          	ld	(hl),e
3474  107C  23          	inc	hl
3475  107D  72          	ld	(hl),d
3476  107E  2A 00 00    	ld	hl,(_tmp0)
3477  1081  CD 06 06    	call	_spr_destroy
3478  1084  DD 6E F6    	ld	l,(ix-10)
3479  1087  DD 66 F7    	ld	h,(ix-9)
3480  108A  3A 00 00    	ld	a,(_s_col0)
3481  108D  77          	ld	(hl),a
3482  108E  DD 6E F5    	ld	l,(ix-11)
3483  1091  CD 21 11    	call	_spr_explode_bullet
3484  1094  18 43       	jr	l_spr_play_bullets_00168
3485  1096              l_spr_play_bullets_00174:
3486  1096  21 00 00    	ld	hl,_tmp0
3487  1099  7E          	ld	a,(hl)
3488  109A  3C          	inc	a
3489  109B  77          	ld	(hl),a
3490  109C  D6 07       	sub	a,0x07
3491  109E  DA 13 10    	jp	C, l_spr_play_bullets_00173
3492  10A1  18 36       	jr	l_spr_play_bullets_00168
3493  10A3              l_spr_play_bullets_00165:
3494  10A3  3A 07 00    	ld	a,(_lin + 7)
3495  10A6  4F          	ld	c,a
3496  10A7  93          	sub	a, e
3497  10A8  38 2F       	jr	C,l_spr_play_bullets_00168
3498  10AA  DD 7E F3    	ld	a,(ix-13)
3499  10AD  91          	sub	a, c
3500  10AE  38 29       	jr	C,l_spr_play_bullets_00168
3501  10B0  3A 07 00    	ld	a,(_col + 7)
3502  10B3  4F          	ld	c,a
3503  10B4  DD 96 F4    	sub	a,(ix-12)
3504  10B7  38 20       	jr	C,l_spr_play_bullets_00168
3505  10B9  78          	ld	a, b
3506  10BA  91          	sub	a, c
3507  10BB  38 1C       	jr	C,l_spr_play_bullets_00168
3508  10BD  2E 03       	ld	l,0x03
3509  10BF  CD 00 00    	call	_zx_border_fastcall
3510  10C2  2E 0A       	ld	l,0x0a
3511  10C4  CD 00 00    	call	_player_hit
3512  10C7  DD 6E FD    	ld	l,(ix-3)
3513  10CA  DD 66 FE    	ld	h,(ix-2)
3514  10CD  3A 00 00    	ld	a,(_s_col0)
3515  10D0  77          	ld	(hl),a
3516  10D1  DD 6E FF    	ld	l,(ix-1)
3517  10D4  CD 21 11    	call	_spr_explode_bullet
3518  10D7  18 43       	jr	l_spr_play_bullets_00176
3519  10D9              l_spr_play_bullets_00168:
3520  10D9  DD 6E F6    	ld	l,(ix-10)
3521  10DC  DD 66 F7    	ld	h,(ix-9)
3522  10DF  4E          	ld	c, (hl)
3523  10E0  0C          	inc	c
3524  10E1  28 2B       	jr	Z,l_spr_play_bullets_00171
3525  10E3  F3          	di
3526  10E4  3E 00       	ld	a, +((_bullet_tile) & 0xFF)
3527  10E6  DD 86 F5    	add	a,(ix-11)
3528  10E9  6F          	ld	l, a
3529  10EA  3E 00       	ld	a, +((_bullet_tile) / 256)
3530  10EC  CE 00       	adc	a,0x00
3531  10EE  67          	ld	h, a
3532  10EF  4E          	ld	c, (hl)
3533  10F0  3E 00       	ld	a, +((_bullet_colint) & 0xFF)
3534  10F2  DD 86 F5    	add	a,(ix-11)
3535  10F5  6F          	ld	l, a
3536  10F6  3E 00       	ld	a, +((_bullet_colint) / 256)
3537  10F8  CE 00       	adc	a,0x00
3538  10FA  67          	ld	h, a
3539  10FB  46          	ld	b, (hl)
3540  10FC  79          	ld	a, c
3541  10FD  80          	add	a, b
3542  10FE  47          	ld	b, a
3543  10FF  DD 7E F4    	ld	a,(ix-12)
3544  1102  F5          	push	af
3545  1103  33          	inc	sp
3546  1104  3A 00 00    	ld	a,(_s_lin0)
3547  1107  48          	ld	c,b
3548  1108  47          	ld	b,a
3549  1109  C5          	push	bc
3550  110A  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
3551  110D  FB          	ei
3552  110E              l_spr_play_bullets_00171:
3553  110E  DD 34 F5    	inc	(ix-11)
3554  1111  DD 7E F5    	ld	a,(ix-11)
3555  1114  DD 77 FF    	ld	(ix-1),a
3556  1117  D6 08       	sub	a,0x08
3557  1119  DA FC 0C    	jp	C, l_spr_play_bullets_00175
3558  111C              l_spr_play_bullets_00176:
3559  111C  DD F9       	ld	sp, ix
3560  111E  DD E1       	pop	ix
3561  1120  C9          	ret
3562  1121              	SECTION code_compiler
3563  1121              ;	---------------------------------
3564  1121              ; Function spr_explode_bullet
3565  1121              ; ---------------------------------
3566  1121              _spr_explode_bullet:
3567  1121  5D          	ld	e, l
3568  1122  3E 00       	ld	a, +((_bullet_col) & 0xFF)
3569  1124  83          	add	a, e
3570  1125  4F          	ld	c, a
3571  1126  3E 00       	ld	a, +((_bullet_col) / 256)
3572  1128  CE 00       	adc	a,0x00
3573  112A  47          	ld	b, a
3574  112B  0A          	ld	a, (bc)
3575  112C  57          	ld	d, a
3576  112D  3E 00       	ld	a, +((_bullet_lin) & 0xFF)
3577  112F  83          	add	a, e
3578  1130  6F          	ld	l, a
3579  1131  3E 00       	ld	a, +((_bullet_lin) / 256)
3580  1133  CE 00       	adc	a,0x00
3581  1135  67          	ld	h, a
3582  1136  5E          	ld	e, (hl)
3583  1137  C5          	push	bc
3584  1138  21 00 00    	ld	hl,0x0000
3585  113B  E5          	push	hl
3586  113C  21 87 03    	ld	hl,0x0387
3587  113F  E5          	push	hl
3588  1140  D5          	push	de
3589  1141  CD 19 0B    	call	_spr_add_anim
3590  1144  F1          	pop	af
3591  1145  F1          	pop	af
3592  1146  F1          	pop	af
3593  1147  C1          	pop	bc
3594  1148  21 00 00    	ld	hl,_bullet_count
3595  114B  35          	dec	(hl)
3596  114C  3E FF       	ld	a,0xff
3597  114E  02          	ld	(bc), a
3598  114F  C9          	ret
3599  1150              	SECTION code_compiler
3600  1150              ;	---------------------------------
3601  1150              ; Function spr_turn_horizontal
3602  1150              ; ---------------------------------
3603  1150              _spr_turn_horizontal:
3604  1150  21 00 00    	ld	hl,_s_state
3605  1153  CB 56       	bit	2, (hl)
3606  1155  28 0B       	jr	Z,l_spr_turn_horizontal_00102
3607  1157  21 00 00    	ld	hl,_s_state
3608  115A  7E          	ld	a,(hl)
3609  115B  F6 08       	or	a,0x08
3610  115D  E6 FB       	and	a,0xfb
3611  115F  77          	ld	(hl),a
3612  1160  18 09       	jr	l_spr_turn_horizontal_00103
3613  1162              l_spr_turn_horizontal_00102:
3614  1162  21 00 00    	ld	hl,_s_state
3615  1165  7E          	ld	a,(hl)
3616  1166  E6 F7       	and	a,0xf7
3617  1168  F6 04       	or	a,0x04
3618  116A  77          	ld	(hl),a
3619  116B              l_spr_turn_horizontal_00103:
3620  116B  2A 00 00    	ld	hl,(_sprite)
3621  116E  26 00       	ld	h,0x00
3622  1170  01 00 00    	ld	bc,_state
3623  1173  09          	add	hl,bc
3624  1174  3A 00 00    	ld	a,(_s_state)
3625  1177  77          	ld	(hl),a
3626  1178  2A 00 00    	ld	hl,(_sprite)
3627  117B  26 00       	ld	h,0x00
3628  117D  01 00 00    	ld	bc,_tile
3629  1180  09          	add	hl,bc
3630  1181  E5          	push	hl
3631  1182  2A 00 00    	ld	hl,(_sprite)
3632  1185  CD 6F 06    	call	_spr_tile
3633  1188  C1          	pop	bc
3634  1189  7D          	ld	a,l
3635  118A  02          	ld	(bc), a
3636  118B  C9          	ret
3637  118C              	SECTION code_compiler
3638  118C              ;	---------------------------------
3639  118C              ; Function spr_btile_paint_back
3640  118C              ; ---------------------------------
3641  118C              _spr_btile_paint_back:
3642  118C  21 20 00    	ld	hl,0x0020
3643  118F  22 00 00    	ld	(_tmp_ui),hl
3644  1192              l_spr_btile_paint_back_00106:
3645  1192  21 00 00    	ld	hl,_tmp_ui
3646  1195  7E          	ld	a, (hl)
3647  1196  D6 A0       	sub	a,0xa0
3648  1198  23          	inc	hl
3649  1199  7E          	ld	a, (hl)
3650  119A  DE 28       	sbc	a,0x28
3651  119C  30 4C       	jr	NC,l_spr_btile_paint_back_00109
3652  119E  21 00 00    	ld	hl,_tmp0
3653  11A1  36 00       	ld	(hl),0x00
3654  11A3              l_spr_btile_paint_back_00103:
3655  11A3  3A 00 00    	ld	a,(_tmp0)
3656  11A6  D6 10       	sub	a,0x10
3657  11A8  30 34       	jr	NC,l_spr_btile_paint_back_00105
3658  11AA  01 00 00    	ld	bc,_btiles
3659  11AD  2A 00 00    	ld	hl,(_tmp_ui)
3660  11B0  09          	add	hl,bc
3661  11B1  7D          	ld	a,l
3662  11B2  44          	ld	b,h
3663  11B3  21 00 00    	ld	hl,_tmp0
3664  11B6  86          	add	a, (hl)
3665  11B7  4F          	ld	c, a
3666  11B8  78          	ld	a, b
3667  11B9  CE 00       	adc	a,0x00
3668  11BB  47          	ld	b, a
3669  11BC  0A          	ld	a, (bc)
3670  11BD  32 00 00    	ld	(_tmp),a
3671  11C0  E6 38       	and	a,0x38
3672  11C2  5F          	ld	e, a
3673  11C3  3A 00 00    	ld	a,(_map_paper_last)
3674  11C6  93          	sub	a, e
3675  11C7  20 0F       	jr	NZ,l_spr_btile_paint_back_00102
3676  11C9  21 00 00    	ld	hl,_tmp
3677  11CC  7E          	ld	a, (hl)
3678  11CD  E6 C7       	and	a,0xc7
3679  11CF  77          	ld	(hl),a
3680  11D0  21 00 00    	ld	hl,_map_paper
3681  11D3  B6          	or	a, (hl)
3682  11D4  32 00 00    	ld	(_tmp),a
3683  11D7  02          	ld	(bc), a
3684  11D8              l_spr_btile_paint_back_00102:
3685  11D8  21 00 00    	ld	hl,_tmp0
3686  11DB  34          	inc	(hl)
3687  11DC  18 C5       	jr	l_spr_btile_paint_back_00103
3688  11DE              l_spr_btile_paint_back_00105:
3689  11DE  2A 00 00    	ld	hl,(_tmp_ui)
3690  11E1  11 30 00    	ld	de,0x0030
3691  11E4  19          	add	hl,de
3692  11E5  22 00 00    	ld	(_tmp_ui),hl
3693  11E8  18 A8       	jr	l_spr_btile_paint_back_00106
3694  11EA              l_spr_btile_paint_back_00109:
3695  11EA  C9          	ret
3696  11EB              	SECTION IGNORE
3697  0000              
