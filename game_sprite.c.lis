1     0000              MODULE game_sprite_c
2     0000              
3     0000              ;--------------------------------------------------------
4     0000              ; File Created by SDCC : free open source ANSI-C Compiler
5     0000              ; Version 3.6.5 #9958 (Mac OS X i386)
6     0000              ;--------------------------------------------------------
7     0000              ; Processed by Z88DK
8     0000              ;--------------------------------------------------------
9     0000              
10    0000              	EXTERN __divschar
11    0000              	EXTERN __divschar_callee
12    0000              	EXTERN __divsint
13    0000              	EXTERN __divsint_callee
14    0000              	EXTERN __divslong
15    0000              	EXTERN __divslong_callee
16    0000              	EXTERN __divslonglong
17    0000              	EXTERN __divslonglong_callee
18    0000              	EXTERN __divsuchar
19    0000              	EXTERN __divsuchar_callee
20    0000              	EXTERN __divuchar
21    0000              	EXTERN __divuchar_callee
22    0000              	EXTERN __divuint
23    0000              	EXTERN __divuint_callee
24    0000              	EXTERN __divulong
25    0000              	EXTERN __divulong_callee
26    0000              	EXTERN __divulonglong
27    0000              	EXTERN __divulonglong_callee
28    0000              	EXTERN __divuschar
29    0000              	EXTERN __divuschar_callee
30    0000              	EXTERN __modschar
31    0000              	EXTERN __modschar_callee
32    0000              	EXTERN __modsint
33    0000              	EXTERN __modsint_callee
34    0000              	EXTERN __modslong
35    0000              	EXTERN __modslong_callee
36    0000              	EXTERN __modslonglong
37    0000              	EXTERN __modslonglong_callee
38    0000              	EXTERN __modsuchar
39    0000              	EXTERN __modsuchar_callee
40    0000              	EXTERN __moduchar
41    0000              	EXTERN __moduchar_callee
42    0000              	EXTERN __moduint
43    0000              	EXTERN __moduint_callee
44    0000              	EXTERN __modulong
45    0000              	EXTERN __modulong_callee
46    0000              	EXTERN __modulonglong
47    0000              	EXTERN __modulonglong_callee
48    0000              	EXTERN __moduschar
49    0000              	EXTERN __moduschar_callee
50    0000              	EXTERN __mulint
51    0000              	EXTERN __mulint_callee
52    0000              	EXTERN __mullong
53    0000              	EXTERN __mullong_callee
54    0000              	EXTERN __mullonglong
55    0000              	EXTERN __mullonglong_callee
56    0000              	EXTERN __mulschar
57    0000              	EXTERN __mulschar_callee
58    0000              	EXTERN __mulsuchar
59    0000              	EXTERN __mulsuchar_callee
60    0000              	EXTERN __muluschar
61    0000              	EXTERN __muluschar_callee
62    0000              	EXTERN __rlslonglong
63    0000              	EXTERN __rlslonglong_callee
64    0000              	EXTERN __rlulonglong
65    0000              	EXTERN __rlulonglong_callee
66    0000              	EXTERN __rrslonglong
67    0000              	EXTERN __rrslonglong_callee
68    0000              	EXTERN __rrulonglong
69    0000              	EXTERN __rrulonglong_callee
70    0000              	EXTERN ___sdcc_call_hl
71    0000              	EXTERN ___sdcc_call_iy
72    0000              	EXTERN ___sdcc_enter_ix
73    0000              	EXTERN _banked_call
74    0000              	EXTERN _banked_ret
75    0000              	EXTERN ___fs2schar
76    0000              	EXTERN ___fs2schar_callee
77    0000              	EXTERN ___fs2sint
78    0000              	EXTERN ___fs2sint_callee
79    0000              	EXTERN ___fs2slong
80    0000              	EXTERN ___fs2slong_callee
81    0000              	EXTERN ___fs2slonglong
82    0000              	EXTERN ___fs2slonglong_callee
83    0000              	EXTERN ___fs2uchar
84    0000              	EXTERN ___fs2uchar_callee
85    0000              	EXTERN ___fs2uint
86    0000              	EXTERN ___fs2uint_callee
87    0000              	EXTERN ___fs2ulong
88    0000              	EXTERN ___fs2ulong_callee
89    0000              	EXTERN ___fs2ulonglong
90    0000              	EXTERN ___fs2ulonglong_callee
91    0000              	EXTERN ___fsadd
92    0000              	EXTERN ___fsadd_callee
93    0000              	EXTERN ___fsdiv
94    0000              	EXTERN ___fsdiv_callee
95    0000              	EXTERN ___fseq
96    0000              	EXTERN ___fseq_callee
97    0000              	EXTERN ___fsgt
98    0000              	EXTERN ___fsgt_callee
99    0000              	EXTERN ___fslt
100   0000              	EXTERN ___fslt_callee
101   0000              	EXTERN ___fsmul
102   0000              	EXTERN ___fsmul_callee
103   0000              	EXTERN ___fsneq
104   0000              	EXTERN ___fsneq_callee
105   0000              	EXTERN ___fssub
106   0000              	EXTERN ___fssub_callee
107   0000              	EXTERN ___schar2fs
108   0000              	EXTERN ___schar2fs_callee
109   0000              	EXTERN ___sint2fs
110   0000              	EXTERN ___sint2fs_callee
111   0000              	EXTERN ___slong2fs
112   0000              	EXTERN ___slong2fs_callee
113   0000              	EXTERN ___slonglong2fs
114   0000              	EXTERN ___slonglong2fs_callee
115   0000              	EXTERN ___uchar2fs
116   0000              	EXTERN ___uchar2fs_callee
117   0000              	EXTERN ___uint2fs
118   0000              	EXTERN ___uint2fs_callee
119   0000              	EXTERN ___ulong2fs
120   0000              	EXTERN ___ulong2fs_callee
121   0000              	EXTERN ___ulonglong2fs
122   0000              	EXTERN ___ulonglong2fs_callee
123   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
126   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
127   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
128   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
129   0000              	EXTERN ____sdcc_4_ldi_save_bc
130   0000              	EXTERN ____sdcc_4_push_hlix
131   0000              	EXTERN ____sdcc_4_push_mhl
132   0000              	EXTERN ____sdcc_lib_setmem_hl
133   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
134   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
135   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
136   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
137   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
138   0000              	EXTERN ____sdcc_ll_add_deix_hlix
139   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
140   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
141   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
142   0000              	EXTERN ____sdcc_ll_asr_hlix_a
143   0000              	EXTERN ____sdcc_ll_asr_mbc_a
144   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
145   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
146   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
147   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
148   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
149   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
150   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
151   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
152   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
153   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
155   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
156   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
157   0000              	EXTERN ____sdcc_ll_push_hlix
158   0000              	EXTERN ____sdcc_ll_push_mhl
159   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
160   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
161   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
162   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
163   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
164   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
165   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
166   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
167   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
168   0000              	EXTERN ____sdcc_load_debc_deix
169   0000              	EXTERN ____sdcc_load_dehl_deix
170   0000              	EXTERN ____sdcc_load_debc_mhl
171   0000              	EXTERN ____sdcc_load_hlde_mhl
172   0000              	EXTERN ____sdcc_store_dehl_bcix
173   0000              	EXTERN ____sdcc_store_debc_hlix
174   0000              	EXTERN ____sdcc_store_debc_mhl
175   0000              	EXTERN ____sdcc_cpu_pop_ei
176   0000              	EXTERN ____sdcc_cpu_pop_ei_jp
177   0000              	EXTERN ____sdcc_cpu_push_di
178   0000              	EXTERN ____sdcc_outi
179   0000              	EXTERN ____sdcc_outi_128
180   0000              	EXTERN ____sdcc_outi_256
181   0000              	EXTERN ____sdcc_ldi
182   0000              	EXTERN ____sdcc_ldi_128
183   0000              	EXTERN ____sdcc_ldi_256
184   0000              
185   0000              ;--------------------------------------------------------
186   0000              ; Public variables in this module
187   0000              ;--------------------------------------------------------
188   0000              	GLOBAL _spr_calc_index
189   0000              	GLOBAL _spr_chktime
190   0000              	GLOBAL _spr_move_up
191   0000              	GLOBAL _spr_move_down
192   0000              	GLOBAL _spr_move_horizontal
193   0000              	GLOBAL _spr_move_right
194   0000              	GLOBAL _spr_move_left
195   0000              	GLOBAL _spr_page_right
196   0000              	GLOBAL _spr_page_left
197   0000              	GLOBAL _spr_page_down
198   0000              	GLOBAL _spr_page_up
199   0000              	GLOBAL _spr_page_map
200   0000              	GLOBAL _spr_redraw
201   0000              	GLOBAL _spr_destroy
202   0000              	GLOBAL _spr_tile
203   0000              	GLOBAL _spr_tile_dir
204   0000              	GLOBAL _spr_draw_clear
205   0000              	GLOBAL _spr_brick_anim
206   0000              	GLOBAL _spr_draw_index
207   0000              	GLOBAL _spr_draw_row
208   0000              	GLOBAL _spr_calc_hor
209   0000              	GLOBAL _spr_back_repaint
210   0000              	GLOBAL _spr_tile_paint
211   0000              	GLOBAL _spr_init_anim_bullets
212   0000              	GLOBAL _spr_add_anim
213   0000              	GLOBAL _spr_play_anim
214   0000              	GLOBAL _spr_play_bullets
215   0000              	GLOBAL _spr_explode_bullet
216   0000              	GLOBAL _spr_turn_horizontal
217   0000              	GLOBAL _spr_btile_paint_back
218   0000              ;--------------------------------------------------------
219   0000              ; Externals used
220   0000              ;--------------------------------------------------------
221   0000              	GLOBAL _ulltoa_callee
222   0000              	GLOBAL _ulltoa
223   0000              	GLOBAL _strtoull_callee
224   0000              	GLOBAL _strtoull
225   0000              	GLOBAL _strtoll_callee
226   0000              	GLOBAL _strtoll
227   0000              	GLOBAL _lltoa_callee
228   0000              	GLOBAL _lltoa
229   0000              	GLOBAL _llabs_callee
230   0000              	GLOBAL _llabs
231   0000              	GLOBAL __lldivu__callee
232   0000              	GLOBAL __lldivu_
233   0000              	GLOBAL __lldiv__callee
234   0000              	GLOBAL __lldiv_
235   0000              	GLOBAL _atoll_callee
236   0000              	GLOBAL _atoll
237   0000              	GLOBAL _realloc_unlocked_callee
238   0000              	GLOBAL _realloc_unlocked
239   0000              	GLOBAL _malloc_unlocked_fastcall
240   0000              	GLOBAL _malloc_unlocked
241   0000              	GLOBAL _free_unlocked_fastcall
242   0000              	GLOBAL _free_unlocked
243   0000              	GLOBAL _calloc_unlocked_callee
244   0000              	GLOBAL _calloc_unlocked
245   0000              	GLOBAL _aligned_alloc_unlocked_callee
246   0000              	GLOBAL _aligned_alloc_unlocked
247   0000              	GLOBAL _realloc_callee
248   0000              	GLOBAL _realloc
249   0000              	GLOBAL _malloc_fastcall
250   0000              	GLOBAL _malloc
251   0000              	GLOBAL _free_fastcall
252   0000              	GLOBAL _free
253   0000              	GLOBAL _calloc_callee
254   0000              	GLOBAL _calloc
255   0000              	GLOBAL _aligned_alloc_callee
256   0000              	GLOBAL _aligned_alloc
257   0000              	GLOBAL _utoa_callee
258   0000              	GLOBAL _utoa
259   0000              	GLOBAL _ultoa_callee
260   0000              	GLOBAL _ultoa
261   0000              	GLOBAL _system_fastcall
262   0000              	GLOBAL _system
263   0000              	GLOBAL _strtoul_callee
264   0000              	GLOBAL _strtoul
265   0000              	GLOBAL _strtol_callee
266   0000              	GLOBAL _strtol
267   0000              	GLOBAL _strtof_callee
268   0000              	GLOBAL _strtof
269   0000              	GLOBAL _strtod_callee
270   0000              	GLOBAL _strtod
271   0000              	GLOBAL _srand_fastcall
272   0000              	GLOBAL _srand
273   0000              	GLOBAL _rand
274   0000              	GLOBAL _quick_exit_fastcall
275   0000              	GLOBAL _quick_exit
276   0000              	GLOBAL _qsort_callee
277   0000              	GLOBAL _qsort
278   0000              	GLOBAL _ltoa_callee
279   0000              	GLOBAL _ltoa
280   0000              	GLOBAL _labs_fastcall
281   0000              	GLOBAL _labs
282   0000              	GLOBAL _itoa_callee
283   0000              	GLOBAL _itoa
284   0000              	GLOBAL _ftoh_callee
285   0000              	GLOBAL _ftoh
286   0000              	GLOBAL _ftog_callee
287   0000              	GLOBAL _ftog
288   0000              	GLOBAL _ftoe_callee
289   0000              	GLOBAL _ftoe
290   0000              	GLOBAL _ftoa_callee
291   0000              	GLOBAL _ftoa
292   0000              	GLOBAL _exit_fastcall
293   0000              	GLOBAL _exit
294   0000              	GLOBAL _dtoh_callee
295   0000              	GLOBAL _dtoh
296   0000              	GLOBAL _dtog_callee
297   0000              	GLOBAL _dtog
298   0000              	GLOBAL _dtoe_callee
299   0000              	GLOBAL _dtoe
300   0000              	GLOBAL _dtoa_callee
301   0000              	GLOBAL _dtoa
302   0000              	GLOBAL _bsearch_callee
303   0000              	GLOBAL _bsearch
304   0000              	GLOBAL _atol_fastcall
305   0000              	GLOBAL _atol
306   0000              	GLOBAL _atoi_fastcall
307   0000              	GLOBAL _atoi
308   0000              	GLOBAL _atof_fastcall
309   0000              	GLOBAL _atof
310   0000              	GLOBAL _atexit_fastcall
311   0000              	GLOBAL _atexit
312   0000              	GLOBAL _at_quick_exit_fastcall
313   0000              	GLOBAL _at_quick_exit
314   0000              	GLOBAL _abs_fastcall
315   0000              	GLOBAL _abs
316   0000              	GLOBAL _abort
317   0000              	GLOBAL __strtou__callee
318   0000              	GLOBAL __strtou_
319   0000              	GLOBAL __strtoi__callee
320   0000              	GLOBAL __strtoi_
321   0000              	GLOBAL __random_uniform_xor_8__fastcall
322   0000              	GLOBAL __random_uniform_xor_8_
323   0000              	GLOBAL __random_uniform_xor_32__fastcall
324   0000              	GLOBAL __random_uniform_xor_32_
325   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
326   0000              	GLOBAL __random_uniform_cmwc_8_
327   0000              	GLOBAL __shellsort__callee
328   0000              	GLOBAL __shellsort_
329   0000              	GLOBAL __quicksort__callee
330   0000              	GLOBAL __quicksort_
331   0000              	GLOBAL __insertion_sort__callee
332   0000              	GLOBAL __insertion_sort_
333   0000              	GLOBAL __ldivu__callee
334   0000              	GLOBAL __ldivu_
335   0000              	GLOBAL __ldiv__callee
336   0000              	GLOBAL __ldiv_
337   0000              	GLOBAL __divu__callee
338   0000              	GLOBAL __divu_
339   0000              	GLOBAL __div__callee
340   0000              	GLOBAL __div_
341   0000              	GLOBAL _NIRVANAP_drawTW_raw_callee
342   0000              	GLOBAL _NIRVANAP_drawTW_raw
343   0000              	GLOBAL _NIRVANAP_drawTW_callee
344   0000              	GLOBAL _NIRVANAP_drawTW
345   0000              	GLOBAL _NIRVANAP_drawW_raw_callee
346   0000              	GLOBAL _NIRVANAP_drawW_raw
347   0000              	GLOBAL _NIRVANAP_drawW_callee
348   0000              	GLOBAL _NIRVANAP_drawW
349   0000              	GLOBAL _NIRVANAP_spriteT_callee
350   0000              	GLOBAL _NIRVANAP_spriteT
351   0000              	GLOBAL _NIRVANAP_fillC_callee
352   0000              	GLOBAL _NIRVANAP_fillC
353   0000              	GLOBAL _NIRVANAP_readC_callee
354   0000              	GLOBAL _NIRVANAP_readC
355   0000              	GLOBAL _NIRVANAP_paintC_callee
356   0000              	GLOBAL _NIRVANAP_paintC
357   0000              	GLOBAL _NIRVANAP_printC_callee
358   0000              	GLOBAL _NIRVANAP_printC
359   0000              	GLOBAL _NIRVANAP_fillT_raw_callee
360   0000              	GLOBAL _NIRVANAP_fillT_raw
361   0000              	GLOBAL _NIRVANAP_fillT_callee
362   0000              	GLOBAL _NIRVANAP_fillT
363   0000              	GLOBAL _NIRVANAP_drawT_raw_callee
364   0000              	GLOBAL _NIRVANAP_drawT_raw
365   0000              	GLOBAL _NIRVANAP_drawT_callee
366   0000              	GLOBAL _NIRVANAP_drawT
367   0000              	GLOBAL _NIRVANAP_stop
368   0000              	GLOBAL _NIRVANAP_start
369   0000              	GLOBAL _debug3
370   0000              	GLOBAL _debug2
371   0000              	GLOBAL _debug
372   0000              	GLOBAL _zx_print_str
373   0000              	GLOBAL _zx_print_int
374   0000              	GLOBAL _zx_print_chr
375   0000              	GLOBAL _zx_print_bonus_time
376   0000              	GLOBAL _zx_isr
377   0000              	GLOBAL _z80_otdr_callee
378   0000              	GLOBAL _z80_otdr
379   0000              	GLOBAL _z80_otir_callee
380   0000              	GLOBAL _z80_otir
381   0000              	GLOBAL _z80_outp_callee
382   0000              	GLOBAL _z80_outp
383   0000              	GLOBAL _z80_indr_callee
384   0000              	GLOBAL _z80_indr
385   0000              	GLOBAL _z80_inir_callee
386   0000              	GLOBAL _z80_inir
387   0000              	GLOBAL _z80_inp_fastcall
388   0000              	GLOBAL _z80_inp
389   0000              	GLOBAL _z80_set_int_state_fastcall
390   0000              	GLOBAL _z80_set_int_state
391   0000              	GLOBAL _z80_get_int_state
392   0000              	GLOBAL _z80_delay_tstate_fastcall
393   0000              	GLOBAL _z80_delay_tstate
394   0000              	GLOBAL _z80_delay_ms_fastcall
395   0000              	GLOBAL _z80_delay_ms
396   0000              	GLOBAL _im2_remove_generic_callback_callee
397   0000              	GLOBAL _im2_remove_generic_callback
398   0000              	GLOBAL _im2_prepend_generic_callback_callee
399   0000              	GLOBAL _im2_prepend_generic_callback
400   0000              	GLOBAL _im2_append_generic_callback_callee
401   0000              	GLOBAL _im2_append_generic_callback
402   0000              	GLOBAL _im2_create_generic_isr_8080_callee
403   0000              	GLOBAL _im2_create_generic_isr_8080
404   0000              	GLOBAL _im2_create_generic_isr_callee
405   0000              	GLOBAL _im2_create_generic_isr
406   0000              	GLOBAL _im2_install_isr_callee
407   0000              	GLOBAL _im2_install_isr
408   0000              	GLOBAL _im2_init_fastcall
409   0000              	GLOBAL _im2_init
410   0000              	GLOBAL _intrinsic_swap_word_32_fastcall
411   0000              	GLOBAL _intrinsic_swap_word_32
412   0000              	GLOBAL _intrinsic_swap_endian_32_fastcall
413   0000              	GLOBAL _intrinsic_swap_endian_32
414   0000              	GLOBAL _intrinsic_swap_endian_16_fastcall
415   0000              	GLOBAL _intrinsic_swap_endian_16
416   0000              	GLOBAL _intrinsic_return_de
417   0000              	GLOBAL _intrinsic_return_bc
418   0000              	GLOBAL _intrinsic_exx
419   0000              	GLOBAL _intrinsic_ex_de_hl
420   0000              	GLOBAL _intrinsic_nop
421   0000              	GLOBAL _intrinsic_im_2
422   0000              	GLOBAL _intrinsic_im_1
423   0000              	GLOBAL _intrinsic_im_0
424   0000              	GLOBAL _intrinsic_retn
425   0000              	GLOBAL _intrinsic_reti
426   0000              	GLOBAL _intrinsic_halt
427   0000              	GLOBAL _intrinsic_ei
428   0000              	GLOBAL _intrinsic_di
429   0000              	GLOBAL _intrinsic_stub
430   0000              	GLOBAL _intrinsic_outi
431   0000              	GLOBAL _intrinsic_ldi
432   0000              	GLOBAL _zx_pattern_fill_callee
433   0000              	GLOBAL _zx_pattern_fill
434   0000              	GLOBAL _zx_saddrpup_fastcall
435   0000              	GLOBAL _zx_saddrpup
436   0000              	GLOBAL _zx_saddrpright_callee
437   0000              	GLOBAL _zx_saddrpright
438   0000              	GLOBAL _zx_saddrpleft_callee
439   0000              	GLOBAL _zx_saddrpleft
440   0000              	GLOBAL _zx_saddrpdown_fastcall
441   0000              	GLOBAL _zx_saddrpdown
442   0000              	GLOBAL _zx_saddrcup_fastcall
443   0000              	GLOBAL _zx_saddrcup
444   0000              	GLOBAL _zx_saddrcright_fastcall
445   0000              	GLOBAL _zx_saddrcright
446   0000              	GLOBAL _zx_saddrcleft_fastcall
447   0000              	GLOBAL _zx_saddrcleft
448   0000              	GLOBAL _zx_saddrcdown_fastcall
449   0000              	GLOBAL _zx_saddrcdown
450   0000              	GLOBAL _zx_saddr2py_fastcall
451   0000              	GLOBAL _zx_saddr2py
452   0000              	GLOBAL _zx_saddr2px_fastcall
453   0000              	GLOBAL _zx_saddr2px
454   0000              	GLOBAL _zx_saddr2cy_fastcall
455   0000              	GLOBAL _zx_saddr2cy
456   0000              	GLOBAL _zx_saddr2cx_fastcall
457   0000              	GLOBAL _zx_saddr2cx
458   0000              	GLOBAL _zx_saddr2aaddr_fastcall
459   0000              	GLOBAL _zx_saddr2aaddr
460   0000              	GLOBAL _zx_py2saddr_fastcall
461   0000              	GLOBAL _zx_py2saddr
462   0000              	GLOBAL _zx_py2aaddr_fastcall
463   0000              	GLOBAL _zx_py2aaddr
464   0000              	GLOBAL _zx_pxy2saddr_callee
465   0000              	GLOBAL _zx_pxy2saddr
466   0000              	GLOBAL _zx_pxy2aaddr_callee
467   0000              	GLOBAL _zx_pxy2aaddr
468   0000              	GLOBAL _zx_px2bitmask_fastcall
469   0000              	GLOBAL _zx_px2bitmask
470   0000              	GLOBAL _zx_cy2saddr_fastcall
471   0000              	GLOBAL _zx_cy2saddr
472   0000              	GLOBAL _zx_cy2aaddr_fastcall
473   0000              	GLOBAL _zx_cy2aaddr
474   0000              	GLOBAL _zx_cxy2saddr_callee
475   0000              	GLOBAL _zx_cxy2saddr
476   0000              	GLOBAL _zx_cxy2aaddr_callee
477   0000              	GLOBAL _zx_cxy2aaddr
478   0000              	GLOBAL _zx_bitmask2px_fastcall
479   0000              	GLOBAL _zx_bitmask2px
480   0000              	GLOBAL _zx_aaddrcup_fastcall
481   0000              	GLOBAL _zx_aaddrcup
482   0000              	GLOBAL _zx_aaddrcright_fastcall
483   0000              	GLOBAL _zx_aaddrcright
484   0000              	GLOBAL _zx_aaddrcleft_fastcall
485   0000              	GLOBAL _zx_aaddrcleft
486   0000              	GLOBAL _zx_aaddrcdown_fastcall
487   0000              	GLOBAL _zx_aaddrcdown
488   0000              	GLOBAL _zx_aaddr2saddr_fastcall
489   0000              	GLOBAL _zx_aaddr2saddr
490   0000              	GLOBAL _zx_aaddr2py_fastcall
491   0000              	GLOBAL _zx_aaddr2py
492   0000              	GLOBAL _zx_aaddr2px_fastcall
493   0000              	GLOBAL _zx_aaddr2px
494   0000              	GLOBAL _zx_aaddr2cy_fastcall
495   0000              	GLOBAL _zx_aaddr2cy
496   0000              	GLOBAL _zx_aaddr2cx_fastcall
497   0000              	GLOBAL _zx_aaddr2cx
498   0000              	GLOBAL _zx_visit_wc_pix_callee
499   0000              	GLOBAL _zx_visit_wc_pix
500   0000              	GLOBAL _zx_visit_wc_attr_callee
501   0000              	GLOBAL _zx_visit_wc_attr
502   0000              	GLOBAL _zx_scroll_wc_up_pix_callee
503   0000              	GLOBAL _zx_scroll_wc_up_pix
504   0000              	GLOBAL _zx_scroll_wc_up_attr_callee
505   0000              	GLOBAL _zx_scroll_wc_up_attr
506   0000              	GLOBAL _zx_scroll_wc_up_callee
507   0000              	GLOBAL _zx_scroll_wc_up
508   0000              	GLOBAL _zx_scroll_up_pix_callee
509   0000              	GLOBAL _zx_scroll_up_pix
510   0000              	GLOBAL _zx_scroll_up_attr_callee
511   0000              	GLOBAL _zx_scroll_up_attr
512   0000              	GLOBAL _zx_scroll_up_callee
513   0000              	GLOBAL _zx_scroll_up
514   0000              	GLOBAL _zx_cls_wc_pix_callee
515   0000              	GLOBAL _zx_cls_wc_pix
516   0000              	GLOBAL _zx_cls_wc_attr_callee
517   0000              	GLOBAL _zx_cls_wc_attr
518   0000              	GLOBAL _zx_cls_wc_callee
519   0000              	GLOBAL _zx_cls_wc
520   0000              	GLOBAL _zx_cls_pix_fastcall
521   0000              	GLOBAL _zx_cls_pix
522   0000              	GLOBAL _zx_cls_attr_fastcall
523   0000              	GLOBAL _zx_cls_attr
524   0000              	GLOBAL _zx_cls_fastcall
525   0000              	GLOBAL _zx_cls
526   0000              	GLOBAL _zx_border_fastcall
527   0000              	GLOBAL _zx_border
528   0000              	GLOBAL _sound_hit_brick
529   0000              	GLOBAL _sound_hit_enemy
530   0000              	GLOBAL _sound_kill
531   0000              	GLOBAL _sound_enter_enemy
532   0000              	GLOBAL _sound_coin
533   0000              	GLOBAL _sound_jump
534   0000              	GLOBAL _sound_slide
535   0000              	GLOBAL _player_gasta_brick
536   0000              	GLOBAL _player_lost_life
537   0000              	GLOBAL _player_hit
538   0000              	GLOBAL _player_open_door
539   0000              	GLOBAL _player_move_jump
540   0000              	GLOBAL _player_fire
541   0000              	GLOBAL _player_check_stairs_down
542   0000              	GLOBAL _player_check_stairs
543   0000              	GLOBAL _player_tile
544   0000              	GLOBAL _player_pick_item
545   0000              	GLOBAL _player_check_floor
546   0000              	GLOBAL _player_hit_platform_clear
547   0000              	GLOBAL _player_score_add
548   0000              	GLOBAL _player_player_hit_pow
549   0000              	GLOBAL _player_hit_platform
550   0000              	GLOBAL _player_move_input
551   0000              	GLOBAL _player_turn
552   0000              	GLOBAL _player_move
553   0000              	GLOBAL _player_restart
554   0000              	GLOBAL _player_kill
555   0000              	GLOBAL _player_check_input
556   0000              	GLOBAL _player_collision
557   0000              	GLOBAL _player_init
558   0000              	GLOBAL _game_boss_clear
559   0000              	GLOBAL _game_obj_clear
560   0000              	GLOBAL _game_obj_chk
561   0000              	GLOBAL _game_obj_set
562   0000              	GLOBAL _game_shoot_fire_boss
563   0000              	GLOBAL _game_shoot_fire
564   0000              	GLOBAL _game_add_enemy
565   0000              	GLOBAL _game_joystick_set_menu
566   0000              	GLOBAL _game_joystick_set
567   0000              	GLOBAL _game_joystick_change
568   0000              	GLOBAL _game_print_header
569   0000              	GLOBAL _game_end
570   0000              	GLOBAL _game_phase_print_score_back
571   0000              	GLOBAL _game_check_time
572   0000              	GLOBAL _game_rotate_attrib
573   0000              	GLOBAL _game_colour_message
574   0000              	GLOBAL _game_paint_attrib_lin_h
575   0000              	GLOBAL _game_paint_attrib_lin
576   0000              	GLOBAL _game_paint_attrib
577   0000              	GLOBAL _game_print_score
578   0000              	GLOBAL _game_unfreeze_all
579   0000              	GLOBAL _game_freeze_all
580   0000              	GLOBAL _game_freeze
581   0000              	GLOBAL _game_enemy_add_get_index
582   0000              	GLOBAL _game_check_cell
583   0000              	GLOBAL _game_check_map
584   0000              	GLOBAL _game_loop
585   0000              	GLOBAL _game_round_init
586   0000              	GLOBAL _game_start_timer
587   0000              	GLOBAL _game_tick
588   0000              	GLOBAL _game_update_stats
589   0000              	GLOBAL _game_print_footer
590   0000              	GLOBAL _game_fill_row
591   0000              	GLOBAL _game_fps
592   0000              	GLOBAL _game_respawn
593   0000              	GLOBAL _game_draw_screen
594   0000              	GLOBAL _enemy_avoid_fall_dead
595   0000              	GLOBAL _enemy_avoid_fall
596   0000              	GLOBAL _enemy_respawn
597   0000              	GLOBAL _enemy_init
598   0000              	GLOBAL _enemy_move
599   0000              	GLOBAL _enemy_turn
600   0000              	GLOBAL _enemy_hit
601   0000              	GLOBAL _enemy_coin1
602   0000              	GLOBAL _enemy_static
603   0000              	GLOBAL _enemy_walk
604   0000              	GLOBAL _enemy_horizontal
605   0000              	GLOBAL _enemy_vertical
606   0000              	GLOBAL _ay_fx_play
607   0000              	GLOBAL _ay_midi_play
608   0000              	GLOBAL _ay_is_playing
609   0000              	GLOBAL _ay_reset
610   0000              	GLOBAL _test_func
611   0000              	GLOBAL _test_proc
612   0000              	GLOBAL _in_mouse_kempston_wheel_delta
613   0000              	GLOBAL _in_mouse_kempston_wheel
614   0000              	GLOBAL _in_mouse_kempston_callee
615   0000              	GLOBAL _in_mouse_kempston
616   0000              	GLOBAL _in_mouse_kempston_setpos_callee
617   0000              	GLOBAL _in_mouse_kempston_setpos
618   0000              	GLOBAL _in_mouse_kempston_reset
619   0000              	GLOBAL _in_mouse_kempston_init
620   0000              	GLOBAL _in_mouse_amx_wheel_delta
621   0000              	GLOBAL _in_mouse_amx_wheel
622   0000              	GLOBAL _in_mouse_amx_callee
623   0000              	GLOBAL _in_mouse_amx
624   0000              	GLOBAL _in_mouse_amx_setpos_callee
625   0000              	GLOBAL _in_mouse_amx_setpos
626   0000              	GLOBAL _in_mouse_amx_reset
627   0000              	GLOBAL _in_mouse_amx_init_callee
628   0000              	GLOBAL _in_mouse_amx_init
629   0000              	GLOBAL _in_stick_sinclair2
630   0000              	GLOBAL _in_stick_sinclair1
631   0000              	GLOBAL _in_stick_kempston
632   0000              	GLOBAL _in_stick_fuller
633   0000              	GLOBAL _in_stick_cursor
634   0000              	GLOBAL _in_stick_keyboard_fastcall
635   0000              	GLOBAL _in_stick_keyboard
636   0000              	GLOBAL _in_wait_nokey
637   0000              	GLOBAL _in_wait_key
638   0000              	GLOBAL _in_test_key
639   0000              	GLOBAL _in_pause_fastcall
640   0000              	GLOBAL _in_pause
641   0000              	GLOBAL _in_key_scancode_fastcall
642   0000              	GLOBAL _in_key_scancode
643   0000              	GLOBAL _in_key_pressed_fastcall
644   0000              	GLOBAL _in_key_pressed
645   0000              	GLOBAL _in_inkey
646   0000              	GLOBAL _NIRVANAP_CHAR_TABLE
647   0000              	GLOBAL _NIRVANAP_WIDE_IMAGES
648   0000              	GLOBAL _NIRVANAP_TILE_IMAGES
649   0000              	GLOBAL _NIRVANAP_HOLE
650   0000              	GLOBAL _NIRVANAP_ISR_HOOK
651   0000              	GLOBAL _player_lvl_table
652   0000              	GLOBAL _map_paper_last
653   0000              	GLOBAL _map_paper_clr
654   0000              	GLOBAL _map_paper
655   0000              	GLOBAL _draw_count
656   0000              	GLOBAL _g_player_hit_right
657   0000              	GLOBAL _g_player_hit_left
658   0000              	GLOBAL _joynames
659   0000              	GLOBAL _initials
660   0000              	GLOBAL _bullet_count
661   0000              	GLOBAL _spr_hack
662   0000              	GLOBAL _boss_stat
663   0000              	GLOBAL _boss_time_fire
664   0000              	GLOBAL _boss_time
665   0000              	GLOBAL _boss_tile
666   0000              	GLOBAL _boss_inc
667   0000              	GLOBAL _boss_col
668   0000              	GLOBAL _boss_lin
669   0000              	GLOBAL _bullet_vel
670   0000              	GLOBAL _bullet_frames
671   0000              	GLOBAL _bullet_colint
672   0000              	GLOBAL _bullet_dir
673   0000              	GLOBAL _bullet_tile
674   0000              	GLOBAL _bullet_col
675   0000              	GLOBAL _bullet_lin
676   0000              	GLOBAL _bullet_col0
677   0000              	GLOBAL _bullet_lin0
678   0000              	GLOBAL _bullet_max
679   0000              	GLOBAL _bullet_class
680   0000              	GLOBAL _mush_class
681   0000              	GLOBAL _mush_index
682   0000              	GLOBAL _anim_count
683   0000              	GLOBAL _anim_respanwn
684   0000              	GLOBAL _anim_loop
685   0000              	GLOBAL _anim_end
686   0000              	GLOBAL _anim_int
687   0000              	GLOBAL _anim_tile
688   0000              	GLOBAL _anim_col
689   0000              	GLOBAL _anim_lin
690   0000              	GLOBAL _map_heigth
691   0000              	GLOBAL _map_width
692   0000              	GLOBAL _scr_curr
693   0000              	GLOBAL _scr_obj1
694   0000              	GLOBAL _scr_obj0
695   0000              	GLOBAL _scr_map
696   0000              	GLOBAL _sprite_speed_alt
697   0000              	GLOBAL _sprite_frames
698   0000              	GLOBAL _sprite_speed
699   0000              	GLOBAL _screen_ink
700   0000              	GLOBAL _screen_paper
701   0000              	GLOBAL _player_over_stair
702   0000              	GLOBAL _game_start_scr
703   0000              	GLOBAL _game_respawn_tile
704   0000              	GLOBAL _game_respawn_index
705   0000              	GLOBAL _game_respawn_time
706   0000              	GLOBAL _game_menu_sel
707   0000              	GLOBAL _game_score_top
708   0000              	GLOBAL _player_lives
709   0000              	GLOBAL _game_over
710   0000              	GLOBAL _game_sound
711   0000              	GLOBAL _game_inmune
712   0000              	GLOBAL _game_god_mode
713   0000              	GLOBAL _game_two_player
714   0000              	GLOBAL _game_brick_tile
715   0000              	GLOBAL _sprite_curr_index
716   0000              	GLOBAL _spr_count
717   0000              	GLOBAL _bullet_time
718   0000              	GLOBAL _anim_time
719   0000              	GLOBAL _frame_time
720   0000              	GLOBAL _entry_time
721   0000              	GLOBAL _curr_time
722   0000              	GLOBAL _s_state
723   0000              	GLOBAL _attrib_hl
724   0000              	GLOBAL _attrib
725   0000              	GLOBAL _zx_val_asm
726   0000              	GLOBAL _enemies
727   0000              	GLOBAL _tmp_ui
728   0000              	GLOBAL _tmp_sc
729   0000              	GLOBAL _tmp_uc
730   0000              	GLOBAL _tmp1
731   0000              	GLOBAL _tmp0
732   0000              	GLOBAL _tmp
733   0000              	GLOBAL _index1
734   0000              	GLOBAL _index0
735   0000              	GLOBAL _loop_count
736   0000              	GLOBAL _s_col1
737   0000              	GLOBAL _s_col0
738   0000              	GLOBAL _s_lin1
739   0000              	GLOBAL _s_lin0
740   0000              	GLOBAL _s_tile1
741   0000              	GLOBAL _s_tile0
742   0000              	GLOBAL _player_brick_time
743   0000              	GLOBAL _player_hit_count
744   0000              	GLOBAL _sprite_horizontal_check
745   0000              	GLOBAL _sprite_on_air
746   0000              	GLOBAL _sprite
747   0000              	GLOBAL _fps
748   0000              	GLOBAL _game_respawn_curr_time
749   0000              	GLOBAL _game_worldup
750   0000              	GLOBAL _game_mush_count
751   0000              	GLOBAL _game_boss_fix
752   0000              	GLOBAL _game_boss_hit
753   0000              	GLOBAL _game_boss_alive
754   0000              	GLOBAL _game_boss
755   0000              	GLOBAL _game_world
756   0000              	GLOBAL _game_gravity
757   0000              	GLOBAL _player_hit_time
758   0000              	GLOBAL _player_lin_scr
759   0000              	GLOBAL _player_col_scr
760   0000              	GLOBAL _player_lvl
761   0000              	GLOBAL _player_int
762   0000              	GLOBAL _player_str
763   0000              	GLOBAL _player_max_vita
764   0000              	GLOBAL _player_max_mana
765   0000              	GLOBAL _player_vita
766   0000              	GLOBAL _player_mana
767   0000              	GLOBAL _player_keys
768   0000              	GLOBAL _player_vel_inc
769   0000              	GLOBAL _player_vel_y1
770   0000              	GLOBAL _player_vel_y0
771   0000              	GLOBAL _player_vel_y
772   0000              	GLOBAL _player_vel_x
773   0000              	GLOBAL _player_joy
774   0000              	GLOBAL _player_score
775   0000              	GLOBAL _last_time
776   0000              	GLOBAL _player_slide
777   0000              	GLOBAL _spr_timer
778   0000              	GLOBAL _jump_lin
779   0000              	GLOBAL _player_hit_col
780   0000              	GLOBAL _player_hit_lin
781   0000              	GLOBAL _colint
782   0000              	GLOBAL _col
783   0000              	GLOBAL _lin
784   0000              	GLOBAL _tile
785   0000              	GLOBAL _state_a
786   0000              	GLOBAL _state
787   0000              	GLOBAL _class
788   0000              	GLOBAL _tbuffer
789   0000              	GLOBAL _dirs
790   0000              	GLOBAL _k1
791   0000              	GLOBAL _joyfunc1
792   0000              	GLOBAL _btiles
793   0000              	GLOBAL _spec128
794   0000              	GLOBAL _GLOBAL_ZX_PORT_7FFD
795   0000              	GLOBAL _GLOBAL_ZX_PORT_1FFD
796   0000              	GLOBAL _GLOBAL_ZX_PORT_FE
797   0000              	GLOBAL _ay_effect_20
798   0000              	GLOBAL _ay_effect_19
799   0000              	GLOBAL _ay_effect_18
800   0000              	GLOBAL _ay_effect_17
801   0000              	GLOBAL _ay_effect_16
802   0000              	GLOBAL _ay_effect_15
803   0000              	GLOBAL _ay_effect_14
804   0000              	GLOBAL _ay_effect_13
805   0000              	GLOBAL _ay_effect_12
806   0000              	GLOBAL _ay_effect_11
807   0000              	GLOBAL _ay_effect_10
808   0000              	GLOBAL _ay_effect_09
809   0000              	GLOBAL _ay_effect_08
810   0000              	GLOBAL _ay_effect_07
811   0000              	GLOBAL _ay_effect_06
812   0000              	GLOBAL _ay_effect_05
813   0000              	GLOBAL _ay_effect_04
814   0000              	GLOBAL _ay_effect_03
815   0000              	GLOBAL _ay_effect_02
816   0000              	GLOBAL _ay_effect_01
817   0000              	GLOBAL _pb_midi_phase_1
818   0000              	GLOBAL _pb_midi_title
819   0000              	GLOBAL _control_method
820   0000              	GLOBAL _world1_h
821   0000              	GLOBAL _world1_w
822   0000              	GLOBAL _world1
823   0000              	GLOBAL _paper1
824   0000              	GLOBAL _lenght1
825   0000              	GLOBAL _start_scr1
826   0000              	GLOBAL _world0_h
827   0000              	GLOBAL _world0_w
828   0000              	GLOBAL _world0
829   0000              	GLOBAL _paper0
830   0000              	GLOBAL _lenght0
831   0000              	GLOBAL _start_scr0
832   0000              ;--------------------------------------------------------
833   0000              ; special function registers
834   0000              ;--------------------------------------------------------
835   0000              defc _IO_FE	=	0x00fe
836   0000              defc _IO_1FFD	=	0x1ffd
837   0000              defc _IO_7FFD	=	0x7ffd
838   0000              ;--------------------------------------------------------
839   0000              ; ram data
840   0000              ;--------------------------------------------------------
841   0000              	SECTION bss_compiler
842   0000              ;--------------------------------------------------------
843   0000              ; ram data
844   0000              ;--------------------------------------------------------
845   0000              
846   0000              IF 0
847   0000              
848   0000              ; .area _INITIALIZED removed by z88dk
849   0000              
850   0000              
851   0000              ENDIF
852   0000              
853   0000              ;--------------------------------------------------------
854   0000              ; absolute external ram data
855   0000              ;--------------------------------------------------------
856   0000              	SECTION IGNORE
857   0000              ;--------------------------------------------------------
858   0000              ; global & static initialisations
859   0000              ;--------------------------------------------------------
860   0000              	SECTION code_crt_init
861   0000              ;--------------------------------------------------------
862   0000              ; Home
863   0000              ;--------------------------------------------------------
864   0000              	SECTION IGNORE
865   0000              ;--------------------------------------------------------
866   0000              ; code
867   0000              ;--------------------------------------------------------
868   0000              	SECTION code_compiler
869   0000              ;	---------------------------------
870   0000              ; Function spr_calc_index
871   0000              ; ---------------------------------
872   0000              _spr_calc_index:
873   0000  CD 00 00    	call	___sdcc_enter_ix
874   0003  DD 4E 05    	ld	c,(ix+5)
875   0006  CB 39       	srl	c
876   0008  06 00       	ld	b,0x00
877   000A  DD 7E 04    	ld	a,(ix+4)
878   000D  07          	rlca
879   000E  07          	rlca
880   000F  07          	rlca
881   0010  07          	rlca
882   0011  E6 0F       	and	a,0x0f
883   0013  6F          	ld	l, a
884   0014  26 00       	ld	h,0x00
885   0016  29          	add	hl, hl
886   0017  29          	add	hl, hl
887   0018  29          	add	hl, hl
888   0019  29          	add	hl, hl
889   001A  09          	add	hl, bc
890   001B  DD E1       	pop	ix
891   001D  C9          	ret
892   001E              	SECTION code_compiler
893   001E              ;	---------------------------------
894   001E              ; Function spr_chktime
895   001E              ; ---------------------------------
896   001E              _spr_chktime:
897   001E  CD 00 00    	call	___sdcc_enter_ix
898   0021  5E          	ld	e,(hl)
899   0022  F5          	push	af
900   0023  16 00       	ld	d,0x00
901   0025  4D          	ld	c,l
902   0026  44          	ld	b,h
903   0027  21 00 00    	ld	hl,_sprite_speed_alt
904   002A  19          	add	hl, de
905   002B  7E          	ld	a, (hl)
906   002C  B7          	or	a,a
907   002D  20 15       	jr	NZ,l_spr_chktime_00102
908   002F  57          	ld	d,a
909   0030  21 00 00    	ld	hl,_class
910   0033  19          	add	hl, de
911   0034  56          	ld	d, (hl)
912   0035  3E 00       	ld	a, +((_sprite_speed) & 0xFF)
913   0037  82          	add	a, d
914   0038  6F          	ld	l, a
915   0039  3E 00       	ld	a, +((_sprite_speed) / 256)
916   003B  CE 00       	adc	a,0x00
917   003D  67          	ld	h, a
918   003E  7E          	ld	a, (hl)
919   003F  32 00 00    	ld	(_tmp),a
920   0042  18 03       	jr	l_spr_chktime_00103
921   0044              l_spr_chktime_00102:
922   0044  32 00 00    	ld	(_tmp),a
923   0047              l_spr_chktime_00103:
924   0047  3A 00 00    	ld	a,(_tmp)
925   004A  DD 77 FE    	ld	(ix-2),a
926   004D  26 00       	ld	h,0x00
927   004F  DD 74 FF    	ld	(ix-1),h
928   0052  6B          	ld	l, e
929   0053  29          	add	hl, hl
930   0054  11 00 00    	ld	de,_last_time
931   0057  19          	add	hl, de
932   0058  5E          	ld	e, (hl)
933   0059  23          	inc	hl
934   005A  56          	ld	d, (hl)
935   005B  C5          	push	bc
936   005C  DD 6E FE    	ld	l,(ix-2)
937   005F  DD 66 FF    	ld	h,(ix-1)
938   0062  E5          	push	hl
939   0063  D5          	push	de
940   0064  CD 00 00    	call	_game_check_time
941   0067  F1          	pop	af
942   0068  F1          	pop	af
943   0069  C1          	pop	bc
944   006A  7D          	ld	a,l
945   006B  B7          	or	a, a
946   006C  28 14       	jr	Z,l_spr_chktime_00105
947   006E  0A          	ld	a, (bc)
948   006F  6F          	ld	l, a
949   0070  26 00       	ld	h,0x00
950   0072  29          	add	hl, hl
951   0073  01 00 00    	ld	bc,_last_time
952   0076  09          	add	hl,bc
953   0077  ED 5B 00 00 	ld	de,(_curr_time)
954   007B  73          	ld	(hl),e
955   007C  23          	inc	hl
956   007D  72          	ld	(hl),d
957   007E  2E 01       	ld	l,0x01
958   0080  18 02       	jr	l_spr_chktime_00106
959   0082              l_spr_chktime_00105:
960   0082  2E 00       	ld	l,0x00
961   0084              l_spr_chktime_00106:
962   0084  F1          	pop	af
963   0085  DD E1       	pop	ix
964   0087  C9          	ret
965   0088              	SECTION code_compiler
966   0088              ;	---------------------------------
967   0088              ; Function spr_move_up
968   0088              ; ---------------------------------
969   0088              _spr_move_up:
970   0088  2A 00 00    	ld	hl,(_sprite)
971   008B  26 00       	ld	h,0x00
972   008D  01 00 00    	ld	bc,_lin
973   0090  09          	add	hl,bc
974   0091  7E          	ld	a,(hl)
975   0092  C6 FE       	add	a,0xfe
976   0094  32 00 00    	ld	(_s_lin1),a
977   0097  07          	rlca
978   0098  07          	rlca
979   0099  07          	rlca
980   009A  07          	rlca
981   009B  E6 0F       	and	a,0x0f
982   009D  4F          	ld	c, a
983   009E  3A 00 00    	ld	a,(_s_lin0)
984   00A1  07          	rlca
985   00A2  07          	rlca
986   00A3  07          	rlca
987   00A4  07          	rlca
988   00A5  E6 0F       	and	a,0x0f
989   00A7  47          	ld	b, a
990   00A8  79          	ld	a, c
991   00A9  90          	sub	a, b
992   00AA  20 04       	jr	NZ,l_spr_move_up_00136
993   00AC  3E 01       	ld	a,0x01
994   00AE  18 01       	jr	l_spr_move_up_00137
995   00B0              l_spr_move_up_00136:
996   00B0  AF          	xor	a,a
997   00B1              l_spr_move_up_00137:
998   00B1  EE 01       	xor	a,0x01
999   00B3  28 1D       	jr	Z,l_spr_move_up_00104
1000  00B5  2A 00 00    	ld	hl,(_sprite)
1001  00B8  26 00       	ld	h,0x00
1002  00BA  01 00 00    	ld	bc,_col
1003  00BD  09          	add	hl,bc
1004  00BE  7E          	ld	a,(hl)
1005  00BF  F5          	push	af
1006  00C0  33          	inc	sp
1007  00C1  3A 00 00    	ld	a,(_s_lin1)
1008  00C4  F5          	push	af
1009  00C5  33          	inc	sp
1010  00C6  CD 00 00    	call	_game_check_map
1011  00C9  F1          	pop	af
1012  00CA  7C          	ld	a,h
1013  00CB  B5          	or	a,l
1014  00CC  28 04       	jr	Z,l_spr_move_up_00104
1015  00CE  2E 01       	ld	l,0x01
1016  00D0  18 50       	jr	l_spr_move_up_00114
1017  00D2              l_spr_move_up_00104:
1018  00D2  2A 00 00    	ld	hl,(_sprite)
1019  00D5  26 00       	ld	h,0x00
1020  00D7  01 00 00    	ld	bc,_lin
1021  00DA  09          	add	hl,bc
1022  00DB  3A 00 00    	ld	a,(_s_lin1)
1023  00DE  D6 10       	sub	a,0x10
1024  00E0  4D          	ld	c,l
1025  00E1  44          	ld	b,h
1026  00E2  30 38       	jr	NC,l_spr_move_up_00112
1027  00E4  3A 00 00    	ld	a,(_sprite)
1028  00E7  D6 07       	sub	a,0x07
1029  00E9  20 2B       	jr	NZ,l_spr_move_up_00109
1030  00EB  CD 72 04    	call	_spr_page_up
1031  00EE  5D          	ld	e, l
1032  00EF  2A 00 00    	ld	hl,(_sprite)
1033  00F2  26 00       	ld	h,0x00
1034  00F4  01 00 00    	ld	bc,_lin
1035  00F7  09          	add	hl,bc
1036  00F8  7B          	ld	a,e
1037  00F9  B7          	or	a,a
1038  00FA  4D          	ld	c,l
1039  00FB  44          	ld	b,h
1040  00FC  28 12       	jr	Z,l_spr_move_up_00106
1041  00FE  3E 90       	ld	a,0x90
1042  0100  02          	ld	(bc), a
1043  0101  21 00 00    	ld	hl,_player_lin_scr
1044  0104  36 00       	ld	(hl),0x00
1045  0106  3A 07 00    	ld	a,(_col + 0x0007)
1046  0109  32 00 00    	ld	(_player_col_scr),a
1047  010C  2E 01       	ld	l,0x01
1048  010E  18 12       	jr	l_spr_move_up_00114
1049  0110              l_spr_move_up_00106:
1050  0110  AF          	xor	a, a
1051  0111  02          	ld	(bc), a
1052  0112  2E 01       	ld	l,0x01
1053  0114  18 0C       	jr	l_spr_move_up_00114
1054  0116              l_spr_move_up_00109:
1055  0116  AF          	xor	a, a
1056  0117  02          	ld	(bc), a
1057  0118  2E 01       	ld	l,0x01
1058  011A  18 06       	jr	l_spr_move_up_00114
1059  011C              l_spr_move_up_00112:
1060  011C  3A 00 00    	ld	a,(_s_lin1)
1061  011F  02          	ld	(bc), a
1062  0120  2E 00       	ld	l,0x00
1063  0122              l_spr_move_up_00114:
1064  0122  C9          	ret
1065  0123              	SECTION code_compiler
1066  0123              ;	---------------------------------
1067  0123              ; Function spr_move_down
1068  0123              ; ---------------------------------
1069  0123              _spr_move_down:
1070  0123  2A 00 00    	ld	hl,(_sprite)
1071  0126  26 00       	ld	h,0x00
1072  0128  01 00 00    	ld	bc,_lin
1073  012B  09          	add	hl,bc
1074  012C  7E          	ld	a,(hl)
1075  012D  C6 10       	add	a,0x10
1076  012F  32 00 00    	ld	(_s_lin1),a
1077  0132  07          	rlca
1078  0133  07          	rlca
1079  0134  07          	rlca
1080  0135  07          	rlca
1081  0136  E6 0F       	and	a,0x0f
1082  0138  4F          	ld	c, a
1083  0139  3A 00 00    	ld	a,(_s_lin0)
1084  013C  07          	rlca
1085  013D  07          	rlca
1086  013E  07          	rlca
1087  013F  07          	rlca
1088  0140  E6 0F       	and	a,0x0f
1089  0142  47          	ld	b, a
1090  0143  79          	ld	a, c
1091  0144  90          	sub	a, b
1092  0145  20 04       	jr	NZ,l_spr_move_down_00136
1093  0147  3E 01       	ld	a,0x01
1094  0149  18 01       	jr	l_spr_move_down_00137
1095  014B              l_spr_move_down_00136:
1096  014B  AF          	xor	a,a
1097  014C              l_spr_move_down_00137:
1098  014C  EE 01       	xor	a,0x01
1099  014E  28 1D       	jr	Z,l_spr_move_down_00104
1100  0150  2A 00 00    	ld	hl,(_sprite)
1101  0153  26 00       	ld	h,0x00
1102  0155  01 00 00    	ld	bc,_col
1103  0158  09          	add	hl,bc
1104  0159  7E          	ld	a,(hl)
1105  015A  F5          	push	af
1106  015B  33          	inc	sp
1107  015C  3A 00 00    	ld	a,(_s_lin1)
1108  015F  F5          	push	af
1109  0160  33          	inc	sp
1110  0161  CD 00 00    	call	_game_check_map
1111  0164  F1          	pop	af
1112  0165  7C          	ld	a,h
1113  0166  B5          	or	a,l
1114  0167  28 04       	jr	Z,l_spr_move_down_00104
1115  0169  2E 01       	ld	l,0x01
1116  016B  18 59       	jr	l_spr_move_down_00114
1117  016D              l_spr_move_down_00104:
1118  016D  2A 00 00    	ld	hl,(_sprite)
1119  0170  26 00       	ld	h,0x00
1120  0172  01 00 00    	ld	bc,_lin
1121  0175  09          	add	hl,bc
1122  0176  3E 90       	ld	a,0x90
1123  0178  4D          	ld	c,l
1124  0179  44          	ld	b,h
1125  017A  21 00 00    	ld	hl,_s_lin1
1126  017D  96          	sub	a, (hl)
1127  017E  30 3E       	jr	NC,l_spr_move_down_00112
1128  0180  3A 00 00    	ld	a,(_sprite)
1129  0183  D6 07       	sub	a,0x07
1130  0185  20 30       	jr	NZ,l_spr_move_down_00109
1131  0187  2E 06       	ld	l,0x06
1132  0189  CD 00 00    	call	_zx_border_fastcall
1133  018C  CD 3F 04    	call	_spr_page_down
1134  018F  5D          	ld	e, l
1135  0190  2A 00 00    	ld	hl,(_sprite)
1136  0193  26 00       	ld	h,0x00
1137  0195  01 00 00    	ld	bc,_lin
1138  0198  09          	add	hl,bc
1139  0199  7B          	ld	a,e
1140  019A  B7          	or	a,a
1141  019B  4D          	ld	c,l
1142  019C  44          	ld	b,h
1143  019D  28 11       	jr	Z,l_spr_move_down_00106
1144  019F  AF          	xor	a, a
1145  01A0  02          	ld	(bc), a
1146  01A1  21 00 00    	ld	hl,_player_lin_scr
1147  01A4  36 00       	ld	(hl),0x00
1148  01A6  3A 07 00    	ld	a,(_col + 0x0007)
1149  01A9  32 00 00    	ld	(_player_col_scr),a
1150  01AC  2E 01       	ld	l,0x01
1151  01AE  18 16       	jr	l_spr_move_down_00114
1152  01B0              l_spr_move_down_00106:
1153  01B0  3E 90       	ld	a,0x90
1154  01B2  02          	ld	(bc), a
1155  01B3  2E 01       	ld	l,0x01
1156  01B5  18 0F       	jr	l_spr_move_down_00114
1157  01B7              l_spr_move_down_00109:
1158  01B7  3E 90       	ld	a,0x90
1159  01B9  02          	ld	(bc), a
1160  01BA  2E 01       	ld	l,0x01
1161  01BC  18 08       	jr	l_spr_move_down_00114
1162  01BE              l_spr_move_down_00112:
1163  01BE  3A 00 00    	ld	a,(_s_lin1)
1164  01C1  C6 F2       	add	a,0xf2
1165  01C3  02          	ld	(bc), a
1166  01C4  2E 00       	ld	l,0x00
1167  01C6              l_spr_move_down_00114:
1168  01C6  C9          	ret
1169  01C7              	SECTION code_compiler
1170  01C7              ;	---------------------------------
1171  01C7              ; Function spr_move_horizontal
1172  01C7              ; ---------------------------------
1173  01C7              _spr_move_horizontal:
1174  01C7  2A 00 00    	ld	hl,(_sprite)
1175  01CA  26 00       	ld	h,0x00
1176  01CC  01 00 00    	ld	bc,_state
1177  01CF  09          	add	hl,bc
1178  01D0  7E          	ld	a,(hl)
1179  01D1  CB 57       	bit	2, a
1180  01D3  28 05       	jr	Z,l_spr_move_horizontal_00104
1181  01D5  CD E6 01    	call	_spr_move_right
1182  01D8  18 0B       	jr	l_spr_move_horizontal_00106
1183  01DA              l_spr_move_horizontal_00104:
1184  01DA  CB 5F       	bit	3, a
1185  01DC  28 05       	jr	Z,l_spr_move_horizontal_00105
1186  01DE  CD E5 02    	call	_spr_move_left
1187  01E1  18 02       	jr	l_spr_move_horizontal_00106
1188  01E3              l_spr_move_horizontal_00105:
1189  01E3  2E 00       	ld	l,0x00
1190  01E5              l_spr_move_horizontal_00106:
1191  01E5  C9          	ret
1192  01E6              	SECTION code_compiler
1193  01E6              ;	---------------------------------
1194  01E6              ; Function spr_move_right
1195  01E6              ; ---------------------------------
1196  01E6              _spr_move_right:
1197  01E6  2A 00 00    	ld	hl,(_sprite)
1198  01E9  26 00       	ld	h,0x00
1199  01EB  01 00 00    	ld	bc,_colint
1200  01EE  09          	add	hl,bc
1201  01EF  7E          	ld	a,(hl)
1202  01F0  3C          	inc	a
1203  01F1  77          	ld	(hl),a
1204  01F2  4F          	ld	c,a
1205  01F3  3A 00 00    	ld	a,(_sprite)
1206  01F6  5F          	ld	e,a
1207  01F7  16 00       	ld	d,0x00
1208  01F9  21 00 00    	ld	hl,_class
1209  01FC  19          	add	hl,de
1210  01FD  5E          	ld	e, (hl)
1211  01FE  16 00       	ld	d,0x00
1212  0200  21 00 00    	ld	hl,_sprite_frames
1213  0203  19          	add	hl, de
1214  0204  7E          	ld	a, (hl)
1215  0205  91          	sub	a, c
1216  0206  C2 E2 02    	jp	NZ,l_spr_move_right_00118
1217  0209  2A 00 00    	ld	hl,(_sprite)
1218  020C  26 00       	ld	h,0x00
1219  020E  01 00 00    	ld	bc,_lin
1220  0211  09          	add	hl,bc
1221  0212  7E          	ld	a,(hl)
1222  0213  32 00 00    	ld	(_s_lin1),a
1223  0216  2A 00 00    	ld	hl,(_sprite)
1224  0219  26 00       	ld	h,0x00
1225  021B  01 00 00    	ld	bc,_col
1226  021E  09          	add	hl,bc
1227  021F  7E          	ld	a,(hl)
1228  0220  FE 1E       	cp	a,0x1e
1229  0222  30 61       	jr	NC,l_spr_move_right_00108
1230  0224  3C          	inc	a
1231  0225  32 00 00    	ld	(_s_col1),a
1232  0228  21 00 00    	ld	hl,_sprite_horizontal_check
1233  022B  36 01       	ld	(hl),0x01
1234  022D  2A FF FF    	ld	hl,(_s_col1 - 1)
1235  0230  3A 00 00    	ld	a,(_s_lin1)
1236  0233  6F          	ld	l,a
1237  0234  E5          	push	hl
1238  0235  CD 00 00    	call	_game_check_map
1239  0238  F1          	pop	af
1240  0239  7D          	ld	a,l
1241  023A  32 00 00    	ld	(_tmp0),a
1242  023D  B7          	or	a, a
1243  023E  20 16       	jr	NZ,l_spr_move_right_00102
1244  0240  3A 00 00    	ld	a,(_s_lin1)
1245  0243  C6 0F       	add	a,0x0f
1246  0245  4F          	ld	c, a
1247  0246  3A 00 00    	ld	a,(_s_col1)
1248  0249  F5          	push	af
1249  024A  33          	inc	sp
1250  024B  79          	ld	a, c
1251  024C  F5          	push	af
1252  024D  33          	inc	sp
1253  024E  CD 00 00    	call	_game_check_map
1254  0251  F1          	pop	af
1255  0252  7D          	ld	a,l
1256  0253  32 00 00    	ld	(_tmp0),a
1257  0256              l_spr_move_right_00102:
1258  0256  21 00 00    	ld	hl,_sprite_horizontal_check
1259  0259  36 00       	ld	(hl),0x00
1260  025B  3A 00 00    	ld	a,(_tmp0)
1261  025E  B7          	or	a, a
1262  025F  28 24       	jr	Z,l_spr_move_right_00108
1263  0261  2A 00 00    	ld	hl,(_sprite)
1264  0264  26 00       	ld	h,0x00
1265  0266  01 00 00    	ld	bc,_colint
1266  0269  09          	add	hl,bc
1267  026A  7E          	ld	a,(hl)
1268  026B  C6 FF       	add	a,0xff
1269  026D  77          	ld	(hl),a
1270  026E  3A 00 00    	ld	a,(_sprite_on_air)
1271  0271  B7          	or	a,a
1272  0272  20 0D       	jr	NZ,l_spr_move_right_00104
1273  0274  2A 00 00    	ld	hl,(_sprite)
1274  0277  26 00       	ld	h,0x00
1275  0279  01 00 00    	ld	bc,_colint
1276  027C  09          	add	hl,bc
1277  027D  7E          	ld	a,(hl)
1278  027E  C6 FF       	add	a,0xff
1279  0280  77          	ld	(hl),a
1280  0281              l_spr_move_right_00104:
1281  0281  2E 01       	ld	l,0x01
1282  0283  18 5F       	jr	l_spr_move_right_00119
1283  0285              l_spr_move_right_00108:
1284  0285  2A 00 00    	ld	hl,(_sprite)
1285  0288  26 00       	ld	h,0x00
1286  028A  01 00 00    	ld	bc,_col
1287  028D  09          	add	hl,bc
1288  028E  34          	inc	(hl)
1289  028F  2A 00 00    	ld	hl,(_sprite)
1290  0292  26 00       	ld	h,0x00
1291  0294  01 00 00    	ld	bc,_colint
1292  0297  09          	add	hl,bc
1293  0298  AF          	xor	a,a
1294  0299  77          	ld	(hl),a
1295  029A  2A 00 00    	ld	hl,(_sprite)
1296  029D  26 00       	ld	h,0x00
1297  029F  01 00 00    	ld	bc,_col
1298  02A2  09          	add	hl,bc
1299  02A3  5E          	ld	e,(hl)
1300  02A4  3E 1E       	ld	a,0x1e
1301  02A6  93          	sub	a,e
1302  02A7  30 39       	jr	NC,l_spr_move_right_00118
1303  02A9  3A 00 00    	ld	a,(_sprite)
1304  02AC  D6 07       	sub	a,0x07
1305  02AE  28 04       	jr	Z,l_spr_move_right_00156
1306  02B0  4D          	ld	c,l
1307  02B1  44          	ld	b,h
1308  02B2  18 27       	jr	l_spr_move_right_00113
1309  02B4              l_spr_move_right_00156:
1310  02B4  CD E9 03    	call	_spr_page_right
1311  02B7  3A 00 00    	ld	a,(_sprite)
1312  02BA  C6 00       	add	a,+((_col) & 0xFF)
1313  02BC  4D          	ld	c,l
1314  02BD  5F          	ld	e,a
1315  02BE  3E 00       	ld	a,+((_col) / 256)
1316  02C0  CE 00       	adc	a,0x00
1317  02C2  57          	ld	d,a
1318  02C3  79          	ld	a, c
1319  02C4  B7          	or	a, a
1320  02C5  28 0F       	jr	Z,l_spr_move_right_00110
1321  02C7  AF          	xor	a, a
1322  02C8  12          	ld	(de), a
1323  02C9  3A 07 00    	ld	a,(_lin + 7)
1324  02CC  32 00 00    	ld	(_player_lin_scr),a
1325  02CF  21 00 00    	ld	hl,_player_col_scr
1326  02D2  36 00       	ld	(hl),0x00
1327  02D4  18 08       	jr	l_spr_move_right_00114
1328  02D6              l_spr_move_right_00110:
1329  02D6  3E 1E       	ld	a,0x1e
1330  02D8  12          	ld	(de), a
1331  02D9  18 03       	jr	l_spr_move_right_00114
1332  02DB              l_spr_move_right_00113:
1333  02DB  3E 1E       	ld	a,0x1e
1334  02DD  02          	ld	(bc), a
1335  02DE              l_spr_move_right_00114:
1336  02DE  2E 01       	ld	l,0x01
1337  02E0  18 02       	jr	l_spr_move_right_00119
1338  02E2              l_spr_move_right_00118:
1339  02E2  2E 00       	ld	l,0x00
1340  02E4              l_spr_move_right_00119:
1341  02E4  C9          	ret
1342  02E5              	SECTION code_compiler
1343  02E5              ;	---------------------------------
1344  02E5              ; Function spr_move_left
1345  02E5              ; ---------------------------------
1346  02E5              _spr_move_left:
1347  02E5  2A 00 00    	ld	hl,(_sprite)
1348  02E8  26 00       	ld	h,0x00
1349  02EA  01 00 00    	ld	bc,_colint
1350  02ED  09          	add	hl,bc
1351  02EE  7E          	ld	a,(hl)
1352  02EF  C6 FF       	add	a,0xff
1353  02F1  77          	ld	(hl),a
1354  02F2  2A 00 00    	ld	hl,(_sprite)
1355  02F5  26 00       	ld	h,0x00
1356  02F7  01 00 00    	ld	bc,_colint
1357  02FA  09          	add	hl,bc
1358  02FB  7E          	ld	a,(hl)
1359  02FC  3C          	inc	a
1360  02FD  C2 E6 03    	jp	NZ,l_spr_move_left_00118
1361  0300  2A 00 00    	ld	hl,(_sprite)
1362  0303  26 00       	ld	h,0x00
1363  0305  01 00 00    	ld	bc,_lin
1364  0308  09          	add	hl,bc
1365  0309  7E          	ld	a,(hl)
1366  030A  32 00 00    	ld	(_s_lin1),a
1367  030D  2A 00 00    	ld	hl,(_sprite)
1368  0310  26 00       	ld	h,0x00
1369  0312  01 00 00    	ld	bc,_col
1370  0315  09          	add	hl,bc
1371  0316  7E          	ld	a,(hl)
1372  0317  B7          	or	a, a
1373  0318  28 5C       	jr	Z,l_spr_move_left_00108
1374  031A  C6 FF       	add	a,0xff
1375  031C  32 00 00    	ld	(_s_col1),a
1376  031F  21 00 00    	ld	hl,_sprite_horizontal_check
1377  0322  36 01       	ld	(hl),0x01
1378  0324  2A FF FF    	ld	hl,(_s_col1 - 1)
1379  0327  3A 00 00    	ld	a,(_s_lin1)
1380  032A  6F          	ld	l,a
1381  032B  E5          	push	hl
1382  032C  CD 00 00    	call	_game_check_map
1383  032F  F1          	pop	af
1384  0330  7D          	ld	a,l
1385  0331  32 00 00    	ld	(_tmp0),a
1386  0334  B7          	or	a, a
1387  0335  20 16       	jr	NZ,l_spr_move_left_00102
1388  0337  3A 00 00    	ld	a,(_s_lin1)
1389  033A  C6 0F       	add	a,0x0f
1390  033C  4F          	ld	c, a
1391  033D  3A 00 00    	ld	a,(_s_col1)
1392  0340  F5          	push	af
1393  0341  33          	inc	sp
1394  0342  79          	ld	a, c
1395  0343  F5          	push	af
1396  0344  33          	inc	sp
1397  0345  CD 00 00    	call	_game_check_map
1398  0348  F1          	pop	af
1399  0349  7D          	ld	a,l
1400  034A  32 00 00    	ld	(_tmp0),a
1401  034D              l_spr_move_left_00102:
1402  034D  21 00 00    	ld	hl,_sprite_horizontal_check
1403  0350  36 00       	ld	(hl),0x00
1404  0352  3A 00 00    	ld	a,(_tmp0)
1405  0355  B7          	or	a, a
1406  0356  28 1E       	jr	Z,l_spr_move_left_00108
1407  0358  2A 00 00    	ld	hl,(_sprite)
1408  035B  26 00       	ld	h,0x00
1409  035D  01 00 00    	ld	bc,_colint
1410  0360  09          	add	hl,bc
1411  0361  34          	inc	(hl)
1412  0362  3A 00 00    	ld	a,(_sprite_on_air)
1413  0365  B7          	or	a,a
1414  0366  20 0A       	jr	NZ,l_spr_move_left_00104
1415  0368  2A 00 00    	ld	hl,(_sprite)
1416  036B  26 00       	ld	h,0x00
1417  036D  01 00 00    	ld	bc,_colint
1418  0370  09          	add	hl,bc
1419  0371  34          	inc	(hl)
1420  0372              l_spr_move_left_00104:
1421  0372  2E 01       	ld	l,0x01
1422  0374  18 72       	jr	l_spr_move_left_00119
1423  0376              l_spr_move_left_00108:
1424  0376  2A 00 00    	ld	hl,(_sprite)
1425  0379  26 00       	ld	h,0x00
1426  037B  01 00 00    	ld	bc,_col
1427  037E  09          	add	hl,bc
1428  037F  7E          	ld	a,(hl)
1429  0380  C6 FF       	add	a,0xff
1430  0382  77          	ld	(hl),a
1431  0383  2A 00 00    	ld	hl,(_sprite)
1432  0386  26 00       	ld	h,0x00
1433  0388  01 00 00    	ld	bc,_colint
1434  038B  09          	add	hl,bc
1435  038C  3A 00 00    	ld	a,(_sprite)
1436  038F  5F          	ld	e,a
1437  0390  16 00       	ld	d,0x00
1438  0392  4D          	ld	c,l
1439  0393  44          	ld	b,h
1440  0394  21 00 00    	ld	hl,_class
1441  0397  19          	add	hl,de
1442  0398  5E          	ld	e, (hl)
1443  0399  16 00       	ld	d,0x00
1444  039B  21 00 00    	ld	hl,_sprite_frames
1445  039E  19          	add	hl, de
1446  039F  5E          	ld	e, (hl)
1447  03A0  1D          	dec	e
1448  03A1  7B          	ld	a, e
1449  03A2  02          	ld	(bc), a
1450  03A3  2A 00 00    	ld	hl,(_sprite)
1451  03A6  26 00       	ld	h,0x00
1452  03A8  01 00 00    	ld	bc,_col
1453  03AB  09          	add	hl,bc
1454  03AC  7E          	ld	a,(hl)
1455  03AD  3C          	inc	a
1456  03AE  20 36       	jr	NZ,l_spr_move_left_00118
1457  03B0  3A 00 00    	ld	a,(_sprite)
1458  03B3  D6 07       	sub	a,0x07
1459  03B5  4D          	ld	c,l
1460  03B6  44          	ld	b,h
1461  03B7  20 27       	jr	NZ,l_spr_move_left_00113
1462  03B9  CD 16 04    	call	_spr_page_left
1463  03BC  3A 00 00    	ld	a,(_sprite)
1464  03BF  C6 00       	add	a,+((_col) & 0xFF)
1465  03C1  4D          	ld	c,l
1466  03C2  5F          	ld	e,a
1467  03C3  3E 00       	ld	a,+((_col) / 256)
1468  03C5  CE 00       	adc	a,0x00
1469  03C7  57          	ld	d,a
1470  03C8  79          	ld	a, c
1471  03C9  B7          	or	a, a
1472  03CA  28 10       	jr	Z,l_spr_move_left_00110
1473  03CC  3E 1E       	ld	a,0x1e
1474  03CE  12          	ld	(de), a
1475  03CF  3A 07 00    	ld	a,(_lin + 7)
1476  03D2  32 00 00    	ld	(_player_lin_scr),a
1477  03D5  21 00 00    	ld	hl,_player_col_scr
1478  03D8  36 1E       	ld	(hl),0x1e
1479  03DA  18 06       	jr	l_spr_move_left_00114
1480  03DC              l_spr_move_left_00110:
1481  03DC  AF          	xor	a, a
1482  03DD  12          	ld	(de), a
1483  03DE  18 02       	jr	l_spr_move_left_00114
1484  03E0              l_spr_move_left_00113:
1485  03E0  AF          	xor	a, a
1486  03E1  02          	ld	(bc), a
1487  03E2              l_spr_move_left_00114:
1488  03E2  2E 01       	ld	l,0x01
1489  03E4  18 02       	jr	l_spr_move_left_00119
1490  03E6              l_spr_move_left_00118:
1491  03E6  2E 00       	ld	l,0x00
1492  03E8              l_spr_move_left_00119:
1493  03E8  C9          	ret
1494  03E9              	SECTION code_compiler
1495  03E9              ;	---------------------------------
1496  03E9              ; Function spr_page_right
1497  03E9              ; ---------------------------------
1498  03E9              _spr_page_right:
1499  03E9  2A FF FF    	ld	hl,(_map_width - 1)
1500  03EC  3A 00 00    	ld	a,(_scr_curr)
1501  03EF  6F          	ld	l,a
1502  03F0  E5          	push	hl
1503  03F1  CD 00 00    	call	__moduchar_callee
1504  03F4  7D          	ld	a, l
1505  03F5  3C          	inc	a
1506  03F6  32 00 00    	ld	(_tmp1),a
1507  03F9  21 00 00    	ld	hl,_map_width
1508  03FC  96          	sub	a, (hl)
1509  03FD  30 14       	jr	NC,l_spr_page_right_00102
1510  03FF  3A 00 00    	ld	a,(_game_boss)
1511  0402  B7          	or	a, a
1512  0403  20 0E       	jr	NZ,l_spr_page_right_00102
1513  0405  21 00 00    	ld	hl,_scr_curr
1514  0408  34          	inc	(hl)
1515  0409  CD A1 04    	call	_spr_page_map
1516  040C  CD 00 00    	call	_game_draw_screen
1517  040F  2E 01       	ld	l,0x01
1518  0411  18 02       	jr	l_spr_page_right_00104
1519  0413              l_spr_page_right_00102:
1520  0413  2E 00       	ld	l,0x00
1521  0415              l_spr_page_right_00104:
1522  0415  C9          	ret
1523  0416              	SECTION code_compiler
1524  0416              ;	---------------------------------
1525  0416              ; Function spr_page_left
1526  0416              ; ---------------------------------
1527  0416              _spr_page_left:
1528  0416  2A FF FF    	ld	hl,(_map_width - 1)
1529  0419  3A 00 00    	ld	a,(_scr_curr)
1530  041C  6F          	ld	l,a
1531  041D  E5          	push	hl
1532  041E  CD 00 00    	call	__moduchar_callee
1533  0421  7D          	ld	a,l
1534  0422  32 00 00    	ld	(_tmp1),a
1535  0425  B7          	or	a, a
1536  0426  28 14       	jr	Z,l_spr_page_left_00102
1537  0428  3A 00 00    	ld	a,(_game_boss)
1538  042B  B7          	or	a, a
1539  042C  20 0E       	jr	NZ,l_spr_page_left_00102
1540  042E  21 00 00    	ld	hl,_scr_curr
1541  0431  35          	dec	(hl)
1542  0432  CD A1 04    	call	_spr_page_map
1543  0435  CD 00 00    	call	_game_draw_screen
1544  0438  2E 01       	ld	l,0x01
1545  043A  18 02       	jr	l_spr_page_left_00104
1546  043C              l_spr_page_left_00102:
1547  043C  2E 00       	ld	l,0x00
1548  043E              l_spr_page_left_00104:
1549  043E  C9          	ret
1550  043F              	SECTION code_compiler
1551  043F              ;	---------------------------------
1552  043F              ; Function spr_page_down
1553  043F              ; ---------------------------------
1554  043F              _spr_page_down:
1555  043F  2A FF FF    	ld	hl,(_map_heigth - 1)
1556  0442  3A 00 00    	ld	a,(_scr_curr)
1557  0445  6F          	ld	l,a
1558  0446  E5          	push	hl
1559  0447  CD 00 00    	call	__divuchar_callee
1560  044A  7D          	ld	a, l
1561  044B  3C          	inc	a
1562  044C  32 00 00    	ld	(_tmp1),a
1563  044F  21 00 00    	ld	hl,_map_heigth
1564  0452  96          	sub	a, (hl)
1565  0453  30 1A       	jr	NC,l_spr_page_down_00102
1566  0455  3A 00 00    	ld	a,(_game_boss)
1567  0458  B7          	or	a, a
1568  0459  20 14       	jr	NZ,l_spr_page_down_00102
1569  045B  3A 00 00    	ld	a,(_scr_curr)
1570  045E  21 00 00    	ld	hl,_map_width
1571  0461  86          	add	a, (hl)
1572  0462  32 00 00    	ld	(_scr_curr),a
1573  0465  CD A1 04    	call	_spr_page_map
1574  0468  CD 00 00    	call	_game_draw_screen
1575  046B  2E 01       	ld	l,0x01
1576  046D  18 02       	jr	l_spr_page_down_00104
1577  046F              l_spr_page_down_00102:
1578  046F  2E 00       	ld	l,0x00
1579  0471              l_spr_page_down_00104:
1580  0471  C9          	ret
1581  0472              	SECTION code_compiler
1582  0472              ;	---------------------------------
1583  0472              ; Function spr_page_up
1584  0472              ; ---------------------------------
1585  0472              _spr_page_up:
1586  0472  2A FF FF    	ld	hl,(_map_heigth - 1)
1587  0475  3A 00 00    	ld	a,(_scr_curr)
1588  0478  6F          	ld	l,a
1589  0479  E5          	push	hl
1590  047A  CD 00 00    	call	__divuchar_callee
1591  047D  7D          	ld	a,l
1592  047E  32 00 00    	ld	(_tmp1),a
1593  0481  B7          	or	a, a
1594  0482  28 1A       	jr	Z,l_spr_page_up_00102
1595  0484  3A 00 00    	ld	a,(_game_boss)
1596  0487  B7          	or	a, a
1597  0488  20 14       	jr	NZ,l_spr_page_up_00102
1598  048A  3A 00 00    	ld	a,(_scr_curr)
1599  048D  21 00 00    	ld	hl,_map_width
1600  0490  96          	sub	a, (hl)
1601  0491  32 00 00    	ld	(_scr_curr),a
1602  0494  CD A1 04    	call	_spr_page_map
1603  0497  CD 00 00    	call	_game_draw_screen
1604  049A  2E 01       	ld	l,0x01
1605  049C  18 02       	jr	l_spr_page_up_00104
1606  049E              l_spr_page_up_00102:
1607  049E  2E 00       	ld	l,0x00
1608  04A0              l_spr_page_up_00104:
1609  04A0  C9          	ret
1610  04A1              	SECTION code_compiler
1611  04A1              ;	---------------------------------
1612  04A1              ; Function spr_page_map
1613  04A1              ; ---------------------------------
1614  04A1              _spr_page_map:
1615  04A1  CD 00 00    	call	___sdcc_enter_ix
1616  04A4  21 EB FF    	ld	hl, -21
1617  04A7  39          	add	hl, sp
1618  04A8  F9          	ld	sp, hl
1619  04A9  3A 00 00    	ld	a,(_game_world)
1620  04AC  DD 77 EE    	ld	(ix-18),a
1621  04AF  3A 00 00    	ld	a,(_scr_curr)
1622  04B2  DD 77 EB    	ld	(ix-21),a
1623  04B5  DD 36 F1 10 	ld	(ix-15),0x10
1624  04B9  06 00       	ld	b,0x00
1625  04BB              l_spr_page_map_00138:
1626  04BB  C5          	push	bc
1627  04BC  21 00 00    	ld	hl,0x0000
1628  04BF  E5          	push	hl
1629  04C0  AF          	xor	a, a
1630  04C1  48          	ld	c,b
1631  04C2  47          	ld	b,a
1632  04C3  C5          	push	bc
1633  04C4  CD 00 00    	call	_NIRVANAP_spriteT_callee
1634  04C7  C1          	pop	bc
1635  04C8  04          	inc	b
1636  04C9  78          	ld	a, b
1637  04CA  D6 08       	sub	a,0x08
1638  04CC  38 ED       	jr	C,l_spr_page_map_00138
1639  04CE  76          	halt
1640  04CF  F3          	di
1641  04D0  DD 36 F3 00 	ld	(ix-13),0x00
1642  04D4              l_spr_page_map_00155:
1643  04D4  DD 7E F3    	ld	a,(ix-13)
1644  04D7  87          	add	a, a
1645  04D8  DD 77 F8    	ld	(ix-8),a
1646  04DB  DD 77 F7    	ld	(ix-9),a
1647  04DE  DD 36 F2 01 	ld	(ix-14),0x01
1648  04E2              l_spr_page_map_00140:
1649  04E2  DD 7E F2    	ld	a,(ix-14)
1650  04E5  07          	rlca
1651  04E6  07          	rlca
1652  04E7  07          	rlca
1653  04E8  07          	rlca
1654  04E9  E6 F0       	and	a,0xf0
1655  04EB  47          	ld	b, a
1656  04EC  DD 7E F7    	ld	a,(ix-9)
1657  04EF  48          	ld	c,b
1658  04F0  47          	ld	b,a
1659  04F1  C5          	push	bc
1660  04F2  AF          	xor	a, a
1661  04F3  F5          	push	af
1662  04F4  33          	inc	sp
1663  04F5  CD 00 00    	call	_NIRVANAP_fillT_raw_callee
1664  04F8  DD 34 F2    	inc	(ix-14)
1665  04FB  DD 7E F2    	ld	a,(ix-14)
1666  04FE  D6 0A       	sub	a,0x0a
1667  0500  38 E0       	jr	C,l_spr_page_map_00140
1668  0502  3E 1E       	ld	a,0x1e
1669  0504  DD 96 F8    	sub	a,(ix-8)
1670  0507  47          	ld	b, a
1671  0508  0E 01       	ld	c,0x01
1672  050A              l_spr_page_map_00142:
1673  050A  79          	ld	a, c
1674  050B  07          	rlca
1675  050C  07          	rlca
1676  050D  07          	rlca
1677  050E  07          	rlca
1678  050F  E6 F0       	and	a,0xf0
1679  0511  57          	ld	d, a
1680  0512  C5          	push	bc
1681  0513  4A          	ld	c, d
1682  0514  C5          	push	bc
1683  0515  AF          	xor	a, a
1684  0516  F5          	push	af
1685  0517  33          	inc	sp
1686  0518  CD 00 00    	call	_NIRVANAP_fillT_raw_callee
1687  051B  C1          	pop	bc
1688  051C  0C          	inc	c
1689  051D  79          	ld	a, c
1690  051E  D6 0A       	sub	a,0x0a
1691  0520  38 E8       	jr	C,l_spr_page_map_00142
1692  0522  FB          	ei
1693  0523  76          	halt
1694  0524  F3          	di
1695  0525  DD 34 F3    	inc	(ix-13)
1696  0528  DD 7E F3    	ld	a,(ix-13)
1697  052B  D6 08       	sub	a,0x08
1698  052D  38 A5       	jr	C,l_spr_page_map_00155
1699  052F  3E 16       	ld	a,0x16
1700  0531  32 00 00    	ld	(_GLOBAL_ZX_PORT_7FFD),a
1701  0534  01 FD 7F    	ld	bc,_IO_7FFD
1702  0537  ED 79       	out	(c),a
1703  0539  DD 7E EB    	ld	a,(ix-21)
1704  053C  3C          	inc	a
1705  053D  20 04       	jr	NZ,l_spr_page_map_00255
1706  053F  3E 01       	ld	a,0x01
1707  0541  18 01       	jr	l_spr_page_map_00256
1708  0543              l_spr_page_map_00255:
1709  0543  AF          	xor	a,a
1710  0544              l_spr_page_map_00256:
1711  0544  DD 77 F7    	ld	(ix-9),a
1712  0547  DD 7E EE    	ld	a,(ix-18)
1713  054A  B7          	or	a, a
1714  054B  20 32       	jr	NZ,l_spr_page_map_00110
1715  054D  DD 7E F7    	ld	a,(ix-9)
1716  0550  B7          	or	a, a
1717  0551  28 07       	jr	Z,l_spr_page_map_00106
1718  0553  21 00 00    	ld	hl,_start_scr0
1719  0556  4E          	ld	c, (hl)
1720  0557  DD 71 EB    	ld	(ix-21),c
1721  055A              l_spr_page_map_00106:
1722  055A  01 00 00    	ld	bc,_paper0
1723  055D  DD 6E EB    	ld	l,(ix-21)
1724  0560  26 00       	ld	h,0x00
1725  0562  09          	add	hl,bc
1726  0563  DD 75 F9    	ld	(ix-7),l
1727  0566  DD 74 FA    	ld	(ix-6),h
1728  0569  7E          	ld	a, (hl)
1729  056A  DD 77 F9    	ld	(ix-7),a
1730  056D  3A 00 00    	ld	a,(_world0_w)
1731  0570  DD 77 ED    	ld	(ix-19),a
1732  0573  DD 77 F8    	ld	(ix-8),a
1733  0576  21 00 00    	ld	hl,_world0_h
1734  0579  4E          	ld	c, (hl)
1735  057A  DD 71 FF    	ld	(ix-1),c
1736  057D  18 32       	jr	l_spr_page_map_00111
1737  057F              l_spr_page_map_00110:
1738  057F  DD 7E F7    	ld	a,(ix-9)
1739  0582  B7          	or	a, a
1740  0583  28 07       	jr	Z,l_spr_page_map_00108
1741  0585  21 00 00    	ld	hl,_start_scr1
1742  0588  4E          	ld	c, (hl)
1743  0589  DD 71 EB    	ld	(ix-21),c
1744  058C              l_spr_page_map_00108:
1745  058C  01 00 00    	ld	bc,_paper1
1746  058F  DD 6E EB    	ld	l,(ix-21)
1747  0592  26 00       	ld	h,0x00
1748  0594  09          	add	hl,bc
1749  0595  DD 75 FB    	ld	(ix-5),l
1750  0598  DD 74 FC    	ld	(ix-4),h
1751  059B  7E          	ld	a, (hl)
1752  059C  DD 77 F9    	ld	(ix-7),a
1753  059F  3A 00 00    	ld	a,(_world1_w)
1754  05A2  DD 77 ED    	ld	(ix-19),a
1755  05A5  DD 77 F8    	ld	(ix-8),a
1756  05A8  3A 00 00    	ld	a,(_world1_h)
1757  05AB  DD 77 EC    	ld	(ix-20),a
1758  05AE  DD 77 FF    	ld	(ix-1),a
1759  05B1              l_spr_page_map_00111:
1760  05B1  3E 10       	ld	a,0x10
1761  05B3  32 00 00    	ld	(_GLOBAL_ZX_PORT_7FFD),a
1762  05B6  01 FD 7F    	ld	bc,_IO_7FFD
1763  05B9  ED 79       	out	(c),a
1764  05BB  3E 00       	ld	a,0x00
1765  05BD  DD 77 EF    	ld	(ix-17),a
1766  05C0  DD 77 F0    	ld	(ix-16),a
1767  05C3  DD 77 F2    	ld	(ix-14),a
1768  05C6              l_spr_page_map_00115:
1769  05C6  DD 7E F2    	ld	a,(ix-14)
1770  05C9  DD 96 EB    	sub	a,(ix-21)
1771  05CC  30 64       	jr	NC,l_spr_page_map_00117
1772  05CE  3E 16       	ld	a,0x16
1773  05D0  32 00 00    	ld	(_GLOBAL_ZX_PORT_7FFD),a
1774  05D3  01 FD 7F    	ld	bc,_IO_7FFD
1775  05D6  ED 79       	out	(c),a
1776  05D8  DD 7E EE    	ld	a,(ix-18)
1777  05DB  B7          	or	a, a
1778  05DC  20 19       	jr	NZ,l_spr_page_map_00113
1779  05DE  01 00 00    	ld	bc,_lenght0
1780  05E1  DD 6E F2    	ld	l,(ix-14)
1781  05E4  26 00       	ld	h,0x00
1782  05E6  09          	add	hl,bc
1783  05E7  DD 75 FB    	ld	(ix-5),l
1784  05EA  DD 74 FC    	ld	(ix-4),h
1785  05ED  7E          	ld	a, (hl)
1786  05EE  DD 77 FB    	ld	(ix-5),a
1787  05F1  DD 36 FC 00 	ld	(ix-4),0x00
1788  05F5  18 1A       	jr	l_spr_page_map_00114
1789  05F7              l_spr_page_map_00113:
1790  05F7  01 00 00    	ld	bc,_lenght1
1791  05FA  DD 6E F2    	ld	l,(ix-14)
1792  05FD  26 00       	ld	h,0x00
1793  05FF  09          	add	hl,bc
1794  0600  DD 75 FD    	ld	(ix-3),l
1795  0603  DD 74 FE    	ld	(ix-2),h
1796  0606  7E          	ld	a, (hl)
1797  0607  DD 77 FD    	ld	(ix-3),a
1798  060A  DD 77 FB    	ld	(ix-5),a
1799  060D  DD 36 FC 00 	ld	(ix-4),0x00
1800  0611              l_spr_page_map_00114:
1801  0611  3E 10       	ld	a,0x10
1802  0613  32 00 00    	ld	(_GLOBAL_ZX_PORT_7FFD),a
1803  0616  01 FD 7F    	ld	bc,_IO_7FFD
1804  0619  ED 79       	out	(c),a
1805  061B  DD 7E EF    	ld	a,(ix-17)
1806  061E  DD 86 FB    	add	a,(ix-5)
1807  0621  DD 77 EF    	ld	(ix-17),a
1808  0624  DD 7E F0    	ld	a,(ix-16)
1809  0627  DD 8E FC    	adc	a,(ix-4)
1810  062A  DD 77 F0    	ld	(ix-16),a
1811  062D  DD 34 F2    	inc	(ix-14)
1812  0630  18 94       	jr	l_spr_page_map_00115
1813  0632              l_spr_page_map_00117:
1814  0632  FB          	ei
1815  0633  F3          	di
1816  0634  DD 36 F3 00 	ld	(ix-13),0x00
1817  0638              l_spr_page_map_00149:
1818  0638  3E 16       	ld	a,0x16
1819  063A  32 00 00    	ld	(_GLOBAL_ZX_PORT_7FFD),a
1820  063D  01 FD 7F    	ld	bc,_IO_7FFD
1821  0640  ED 79       	out	(c),a
1822  0642  DD 7E F3    	ld	a,(ix-13)
1823  0645  DD 77 FD    	ld	(ix-3),a
1824  0648  DD 36 FE 00 	ld	(ix-2),0x00
1825  064C  DD 7E EF    	ld	a,(ix-17)
1826  064F  DD 86 FD    	add	a,(ix-3)
1827  0652  DD 77 FD    	ld	(ix-3),a
1828  0655  DD 7E F0    	ld	a,(ix-16)
1829  0658  DD 8E FE    	adc	a,(ix-2)
1830  065B  DD 77 FE    	ld	(ix-2),a
1831  065E  DD 7E FD    	ld	a,(ix-3)
1832  0661  C6 01       	add	a,0x01
1833  0663  DD 77 FB    	ld	(ix-5),a
1834  0666  DD 7E FE    	ld	a,(ix-2)
1835  0669  CE 00       	adc	a,0x00
1836  066B  DD 77 FC    	ld	(ix-4),a
1837  066E  DD 7E EE    	ld	a,(ix-18)
1838  0671  B7          	or	a, a
1839  0672  20 1E       	jr	NZ,l_spr_page_map_00119
1840  0674  01 00 00    	ld	bc,_world0
1841  0677  DD 6E FD    	ld	l,(ix-3)
1842  067A  DD 66 FE    	ld	h,(ix-2)
1843  067D  09          	add	hl,bc
1844  067E  7E          	ld	a, (hl)
1845  067F  DD 77 F6    	ld	(ix-10),a
1846  0682  01 00 00    	ld	bc,_world0
1847  0685  DD 6E FB    	ld	l,(ix-5)
1848  0688  DD 66 FC    	ld	h,(ix-4)
1849  068B  09          	add	hl,bc
1850  068C  7E          	ld	a, (hl)
1851  068D  DD 77 F5    	ld	(ix-11),a
1852  0690  18 1C       	jr	l_spr_page_map_00120
1853  0692              l_spr_page_map_00119:
1854  0692  01 00 00    	ld	bc,_world1
1855  0695  DD 6E FD    	ld	l,(ix-3)
1856  0698  DD 66 FE    	ld	h,(ix-2)
1857  069B  09          	add	hl,bc
1858  069C  7E          	ld	a, (hl)
1859  069D  DD 77 F6    	ld	(ix-10),a
1860  06A0  01 00 00    	ld	bc,_world1
1861  06A3  DD 6E FB    	ld	l,(ix-5)
1862  06A6  DD 66 FC    	ld	h,(ix-4)
1863  06A9  09          	add	hl,bc
1864  06AA  7E          	ld	a, (hl)
1865  06AB  DD 77 F5    	ld	(ix-11),a
1866  06AE              l_spr_page_map_00120:
1867  06AE  3E 10       	ld	a,0x10
1868  06B0  32 00 00    	ld	(_GLOBAL_ZX_PORT_7FFD),a
1869  06B3  01 FD 7F    	ld	bc,_IO_7FFD
1870  06B6  ED 79       	out	(c),a
1871  06B8  DD 7E F6    	ld	a,(ix-10)
1872  06BB  D6 80       	sub	a,0x80
1873  06BD  30 42       	jr	NC,l_spr_page_map_00131
1874  06BF  DD 7E F1    	ld	a,(ix-15)
1875  06C2  DD 77 FD    	ld	(ix-3),a
1876  06C5  6F          	ld	l, a
1877  06C6  26 00       	ld	h,0x00
1878  06C8  DD 74 FE    	ld	(ix-2),h
1879  06CB  E5          	push	hl
1880  06CC  CD 00 00    	call	_game_obj_chk
1881  06CF  F1          	pop	af
1882  06D0  DD 75 FD    	ld	(ix-3),l
1883  06D3  3E 00       	ld	a, +((_scr_map) & 0xFF)
1884  06D5  DD 86 F1    	add	a,(ix-15)
1885  06D8  DD 77 FB    	ld	(ix-5),a
1886  06DB  3E 00       	ld	a, +((_scr_map) / 256)
1887  06DD  CE 00       	adc	a,0x00
1888  06DF  DD 77 FC    	ld	(ix-4),a
1889  06E2  DD 7E FD    	ld	a,(ix-3)
1890  06E5  B7          	or	a, a
1891  06E6  20 0C       	jr	NZ,l_spr_page_map_00122
1892  06E8  DD 6E FB    	ld	l,(ix-5)
1893  06EB  DD 66 FC    	ld	h,(ix-4)
1894  06EE  DD 7E F6    	ld	a,(ix-10)
1895  06F1  77          	ld	(hl), a
1896  06F2  18 08       	jr	l_spr_page_map_00123
1897  06F4              l_spr_page_map_00122:
1898  06F4  DD 6E FB    	ld	l,(ix-5)
1899  06F7  DD 66 FC    	ld	h,(ix-4)
1900  06FA  36 00       	ld	(hl),0x00
1901  06FC              l_spr_page_map_00123:
1902  06FC  DD 34 F1    	inc	(ix-15)
1903  06FF  18 6D       	jr	l_spr_page_map_00132
1904  0701              l_spr_page_map_00131:
1905  0701  DD 7E F6    	ld	a,(ix-10)
1906  0704  C6 80       	add	a,0x80
1907  0706  DD 77 F4    	ld	(ix-12),a
1908  0709  DD 7E F1    	ld	a,(ix-15)
1909  070C  DD 77 FD    	ld	(ix-3),a
1910  070F  DD 36 F2 00 	ld	(ix-14),0x00
1911  0713              l_spr_page_map_00147:
1912  0713  DD 7E F2    	ld	a,(ix-14)
1913  0716  DD 96 F4    	sub	a,(ix-12)
1914  0719  30 4A       	jr	NC,l_spr_page_map_00181
1915  071B  DD 7E FD    	ld	a,(ix-3)
1916  071E  DD 77 FB    	ld	(ix-5),a
1917  0721  6F          	ld	l, a
1918  0722  26 00       	ld	h,0x00
1919  0724  DD 74 FC    	ld	(ix-4),h
1920  0727  E5          	push	hl
1921  0728  CD 00 00    	call	_game_obj_chk
1922  072B  F1          	pop	af
1923  072C  7D          	ld	a, l
1924  072D  B7          	or	a, a
1925  072E  20 15       	jr	NZ,l_spr_page_map_00125
1926  0730  01 00 00    	ld	bc,_scr_map
1927  0733  DD 6E FD    	ld	l,(ix-3)
1928  0736  26 00       	ld	h,0x00
1929  0738  09          	add	hl,bc
1930  0739  DD 75 FB    	ld	(ix-5),l
1931  073C  DD 74 FC    	ld	(ix-4),h
1932  073F  DD 7E F5    	ld	a,(ix-11)
1933  0742  77          	ld	(hl), a
1934  0743  18 11       	jr	l_spr_page_map_00126
1935  0745              l_spr_page_map_00125:
1936  0745  01 00 00    	ld	bc,_scr_map
1937  0748  DD 6E FD    	ld	l,(ix-3)
1938  074B  26 00       	ld	h,0x00
1939  074D  09          	add	hl,bc
1940  074E  DD 75 FB    	ld	(ix-5),l
1941  0751  DD 74 FC    	ld	(ix-4),h
1942  0754  36 00       	ld	(hl),0x00
1943  0756              l_spr_page_map_00126:
1944  0756  DD 34 FD    	inc	(ix-3)
1945  0759  DD 7E FD    	ld	a,(ix-3)
1946  075C  D6 A0       	sub	a,0xa0
1947  075E  30 05       	jr	NC,l_spr_page_map_00181
1948  0760  DD 34 F2    	inc	(ix-14)
1949  0763  18 AE       	jr	l_spr_page_map_00147
1950  0765              l_spr_page_map_00181:
1951  0765  DD 7E FD    	ld	a,(ix-3)
1952  0768  DD 77 F1    	ld	(ix-15),a
1953  076B  DD 34 F3    	inc	(ix-13)
1954  076E              l_spr_page_map_00132:
1955  076E  DD 7E F1    	ld	a,(ix-15)
1956  0771  D6 A0       	sub	a,0xa0
1957  0773  30 0B       	jr	NC,l_spr_page_map_00135
1958  0775  DD 34 F3    	inc	(ix-13)
1959  0778  DD 7E F3    	ld	a,(ix-13)
1960  077B  D6 A0       	sub	a,0xa0
1961  077D  DA 38 06    	jp	C, l_spr_page_map_00149
1962  0780              l_spr_page_map_00135:
1963  0780  CD 03 0E    	call	_spr_init_anim_bullets
1964  0783  DD 7E EB    	ld	a,(ix-21)
1965  0786  32 00 00    	ld	(_scr_curr),a
1966  0789  DD 7E F8    	ld	a,(ix-8)
1967  078C  32 00 00    	ld	(_map_width),a
1968  078F  DD 7E FF    	ld	a,(ix-1)
1969  0792  32 00 00    	ld	(_map_heigth),a
1970  0795  DD 7E F9    	ld	a,(ix-7)
1971  0798  32 00 00    	ld	(_map_paper),a
1972  079B  3A 00 00    	ld	a,(_map_paper_last)
1973  079E  21 00 00    	ld	hl,_map_paper
1974  07A1  96          	sub	a, (hl)
1975  07A2  28 03       	jr	Z,l_spr_page_map_00137
1976  07A4  CD 51 16    	call	_spr_btile_paint_back
1977  07A7              l_spr_page_map_00137:
1978  07A7  3A 00 00    	ld	a,(_map_paper)
1979  07AA  32 00 00    	ld	(_map_paper_last),a
1980  07AD  FB          	ei
1981  07AE  CD 00 00    	call	_NIRVANAP_start
1982  07B1  DD F9       	ld	sp, ix
1983  07B3  DD E1       	pop	ix
1984  07B5  C9          	ret
1985  07B6              	SECTION code_compiler
1986  07B6              ;	---------------------------------
1987  07B6              ; Function spr_redraw
1988  07B6              ; ---------------------------------
1989  07B6              _spr_redraw:
1990  07B6  2A 00 00    	ld	hl,(_sprite)
1991  07B9  26 00       	ld	h,0x00
1992  07BB  01 00 00    	ld	bc,_tile
1993  07BE  09          	add	hl,bc
1994  07BF  4E          	ld	c, (hl)
1995  07C0  3A 00 00    	ld	a,(_sprite)
1996  07C3  5F          	ld	e,a
1997  07C4  16 00       	ld	d,0x00
1998  07C6  21 00 00    	ld	hl,_colint
1999  07C9  19          	add	hl,de
2000  07CA  7E          	ld	a,(hl)
2001  07CB  81          	add	a,c
2002  07CC  32 00 00    	ld	(_s_tile1),a
2003  07CF  2A 00 00    	ld	hl,(_sprite)
2004  07D2  26 00       	ld	h,0x00
2005  07D4  01 00 00    	ld	bc,_col
2006  07D7  09          	add	hl,bc
2007  07D8  7E          	ld	a,(hl)
2008  07D9  32 00 00    	ld	(_s_col1),a
2009  07DC  2A 00 00    	ld	hl,(_sprite)
2010  07DF  26 00       	ld	h,0x00
2011  07E1  01 00 00    	ld	bc,_lin
2012  07E4  09          	add	hl,bc
2013  07E5  7E          	ld	a,(hl)
2014  07E6  21 00 00    	ld	hl,_s_lin1
2015  07E9  77          	ld	(hl),a
2016  07EA  4F          	ld	c,a
2017  07EB  7E          	ld	a, (hl)
2018  07EC  21 00 00    	ld	hl,_s_lin0
2019  07EF  96          	sub	a, (hl)
2020  07F0  20 0A       	jr	NZ,l_spr_redraw_00117
2021  07F2  3A 00 00    	ld	a,(_s_col1)
2022  07F5  21 00 00    	ld	hl,_s_col0
2023  07F8  96          	sub	a, (hl)
2024  07F9  CA 99 08    	jp	Z,l_spr_redraw_00118
2025  07FC              l_spr_redraw_00117:
2026  07FC  3A 00 00    	ld	a,(_sprite)
2027  07FF  D6 07       	sub	a,0x07
2028  0801  20 04       	jr	NZ,l_spr_redraw_00158
2029  0803  3E 01       	ld	a,0x01
2030  0805  18 01       	jr	l_spr_redraw_00159
2031  0807              l_spr_redraw_00158:
2032  0807  AF          	xor	a,a
2033  0808              l_spr_redraw_00159:
2034  0808  47          	ld	b,a
2035  0809  B7          	or	a, a
2036  080A  28 12       	jr	Z,l_spr_redraw_00105
2037  080C  3A 00 00    	ld	a,(_player_over_stair)
2038  080F  B7          	or	a, a
2039  0810  28 0C       	jr	Z,l_spr_redraw_00105
2040  0812  79          	ld	a, c
2041  0813  E6 03       	and	a,0x03
2042  0815  20 07       	jr	NZ,l_spr_redraw_00105
2043  0817  21 00 00    	ld	hl,_s_tile1
2044  081A  34          	inc	(hl)
2045  081B  34          	inc	(hl)
2046  081C  34          	inc	(hl)
2047  081D  34          	inc	(hl)
2048  081E              l_spr_redraw_00105:
2049  081E  78          	ld	a, b
2050  081F  B7          	or	a, a
2051  0820  28 05       	jr	Z,l_spr_redraw_00113
2052  0822  CD 5B 0C    	call	_spr_back_repaint
2053  0825  18 5B       	jr	l_spr_redraw_00114
2054  0827              l_spr_redraw_00113:
2055  0827  3A 00 00    	ld	a,(_s_lin1)
2056  082A  E6 07       	and	a,0x07
2057  082C  20 05       	jr	NZ,l_spr_redraw_00110
2058  082E  CD 5B 0C    	call	_spr_back_repaint
2059  0831  18 4F       	jr	l_spr_redraw_00114
2060  0833              l_spr_redraw_00110:
2061  0833  21 00 00    	ld	hl,_s_state
2062  0836  CB 46       	bit	0, (hl)
2063  0838  28 26       	jr	Z,l_spr_redraw_00107
2064  083A  3A 00 00    	ld	a,(_s_lin0)
2065  083D  C6 08       	add	a,0x08
2066  083F  47          	ld	b, a
2067  0840  3A 00 00    	ld	a,(_s_col0)
2068  0843  F5          	push	af
2069  0844  33          	inc	sp
2070  0845  C5          	push	bc
2071  0846  33          	inc	sp
2072  0847  3A 00 00    	ld	a,(_map_paper_clr)
2073  084A  F5          	push	af
2074  084B  33          	inc	sp
2075  084C  CD 00 00    	call	_NIRVANAP_fillC_callee
2076  084F  21 00 00    	ld	hl,_s_col0
2077  0852  56          	ld	d, (hl)
2078  0853  14          	inc	d
2079  0854  58          	ld	e,b
2080  0855  3A 00 00    	ld	a,(_map_paper_clr)
2081  0858  D5          	push	de
2082  0859  F5          	push	af
2083  085A  33          	inc	sp
2084  085B  CD 00 00    	call	_NIRVANAP_fillC_callee
2085  085E  18 22       	jr	l_spr_redraw_00114
2086  0860              l_spr_redraw_00107:
2087  0860  2A FF FF    	ld	hl,(_s_col0 - 1)
2088  0863  3A 00 00    	ld	a,(_s_lin0)
2089  0866  6F          	ld	l,a
2090  0867  3A 00 00    	ld	a,(_map_paper_clr)
2091  086A  E5          	push	hl
2092  086B  F5          	push	af
2093  086C  33          	inc	sp
2094  086D  CD 00 00    	call	_NIRVANAP_fillC_callee
2095  0870  21 00 00    	ld	hl,_s_col0
2096  0873  46          	ld	b, (hl)
2097  0874  04          	inc	b
2098  0875  C5          	push	bc
2099  0876  33          	inc	sp
2100  0877  2A FF FF    	ld	hl,(_s_lin0 - 1)
2101  087A  3A 00 00    	ld	a,(_map_paper_clr)
2102  087D  6F          	ld	l,a
2103  087E  E5          	push	hl
2104  087F  CD 00 00    	call	_NIRVANAP_fillC_callee
2105  0882              l_spr_redraw_00114:
2106  0882  2A FF FF    	ld	hl,(_s_col1 - 1)
2107  0885  3A 00 00    	ld	a,(_s_lin1)
2108  0888  6F          	ld	l,a
2109  0889  E5          	push	hl
2110  088A  2A FF FF    	ld	hl,(_s_tile1 - 1)
2111  088D  3A 00 00    	ld	a,(_sprite)
2112  0890  6F          	ld	l,a
2113  0891  E5          	push	hl
2114  0892  CD 00 00    	call	_NIRVANAP_spriteT_callee
2115  0895  2E 01       	ld	l,0x01
2116  0897  18 22       	jr	l_spr_redraw_00121
2117  0899              l_spr_redraw_00118:
2118  0899  3A 00 00    	ld	a,(_s_tile1)
2119  089C  21 00 00    	ld	hl,_s_tile0
2120  089F  96          	sub	a, (hl)
2121  08A0  28 17       	jr	Z,l_spr_redraw_00119
2122  08A2  2A FF FF    	ld	hl,(_s_col1 - 1)
2123  08A5  3A 00 00    	ld	a,(_s_lin1)
2124  08A8  6F          	ld	l,a
2125  08A9  E5          	push	hl
2126  08AA  2A FF FF    	ld	hl,(_s_tile1 - 1)
2127  08AD  3A 00 00    	ld	a,(_sprite)
2128  08B0  6F          	ld	l,a
2129  08B1  E5          	push	hl
2130  08B2  CD 00 00    	call	_NIRVANAP_spriteT_callee
2131  08B5  2E 00       	ld	l,0x00
2132  08B7  18 02       	jr	l_spr_redraw_00121
2133  08B9              l_spr_redraw_00119:
2134  08B9  2E 00       	ld	l,0x00
2135  08BB              l_spr_redraw_00121:
2136  08BB  C9          	ret
2137  08BC              	SECTION code_compiler
2138  08BC              ;	---------------------------------
2139  08BC              ; Function spr_destroy
2140  08BC              ; ---------------------------------
2141  08BC              _spr_destroy:
2142  08BC  CD 00 00    	call	___sdcc_enter_ix
2143  08BF  F5          	push	af
2144  08C0  4D          	ld	c, l
2145  08C1  21 00 00    	ld	hl,_spr_count
2146  08C4  35          	dec	(hl)
2147  08C5  3E 00       	ld	a, +((_lin) & 0xFF)
2148  08C7  81          	add	a, c
2149  08C8  DD 77 FE    	ld	(ix-2),a
2150  08CB  3E 00       	ld	a, +((_lin) / 256)
2151  08CD  CE 00       	adc	a,0x00
2152  08CF  DD 77 FF    	ld	(ix-1),a
2153  08D2  E1          	pop	hl
2154  08D3  7E          	ld	a,(hl)
2155  08D4  E5          	push	hl
2156  08D5  32 00 00    	ld	(_s_lin0),a
2157  08D8  3E 00       	ld	a, +((_col) & 0xFF)
2158  08DA  81          	add	a, c
2159  08DB  5F          	ld	e, a
2160  08DC  3E 00       	ld	a, +((_col) / 256)
2161  08DE  CE 00       	adc	a,0x00
2162  08E0  57          	ld	d, a
2163  08E1  1A          	ld	a, (de)
2164  08E2  32 00 00    	ld	(_s_col0),a
2165  08E5  C5          	push	bc
2166  08E6  D5          	push	de
2167  08E7  21 00 00    	ld	hl,0x0000
2168  08EA  E5          	push	hl
2169  08EB  AF          	xor	a, a
2170  08EC  F5          	push	af
2171  08ED  33          	inc	sp
2172  08EE  79          	ld	a, c
2173  08EF  F5          	push	af
2174  08F0  33          	inc	sp
2175  08F1  CD 00 00    	call	_NIRVANAP_spriteT_callee
2176  08F4  CD 5B 0C    	call	_spr_back_repaint
2177  08F7  D1          	pop	de
2178  08F8  C1          	pop	bc
2179  08F9  06 00       	ld	b,0x00
2180  08FB  21 00 00    	ld	hl,_tile
2181  08FE  09          	add	hl, bc
2182  08FF  AF          	xor	a,a
2183  0900  77          	ld	(hl),a
2184  0901  E1          	pop	hl
2185  0902  12          	ld	(de),a
2186  0903  E5          	push	hl
2187  0904  36 00       	ld	(hl),0x00
2188  0906  11 00 00    	ld	de,_class+0
2189  0909  69          	ld	l,c
2190  090A  26 00       	ld	h,0x00
2191  090C  19          	add	hl, de
2192  090D  36 00       	ld	(hl),0x00
2193  090F  11 00 00    	ld	de,_state+0
2194  0912  69          	ld	l,c
2195  0913  26 00       	ld	h,0x00
2196  0915  19          	add	hl, de
2197  0916  36 00       	ld	(hl),0x00
2198  0918  11 00 00    	ld	de,_state_a+0
2199  091B  69          	ld	l,c
2200  091C  26 00       	ld	h,0x00
2201  091E  19          	add	hl, de
2202  091F  F1          	pop	af
2203  0920  36 00       	ld	(hl),0x00
2204  0922  DD E1       	pop	ix
2205  0924  C9          	ret
2206  0925              	SECTION code_compiler
2207  0925              ;	---------------------------------
2208  0925              ; Function spr_tile
2209  0925              ; ---------------------------------
2210  0925              _spr_tile:
2211  0925  45          	ld	b,l
2212  0926  11 00 00    	ld	de,_class+0
2213  0929  26 00       	ld	h,0x00
2214  092B  19          	add	hl, de
2215  092C  5E          	ld	e, (hl)
2216  092D  3E 13       	ld	a,0x13
2217  092F  93          	sub	a, e
2218  0930  DA 63 0A    	jp	C, l_spr_tile_00116
2219  0933  16 00       	ld	d,0x00
2220  0935  21 3C 09    	ld	hl,l_spr_tile_00123
2221  0938  19          	add	hl, de
2222  0939  19          	add	hl, de
2223  093A  19          	add	hl, de
2224  093B  E9          	jp	(hl)
2225  093C              l_spr_tile_00123:
2226  093C  C3 63 0A    	jp	l_spr_tile_00116
2227  093F  C3 63 0A    	jp	l_spr_tile_00116
2228  0942  C3 CA 09    	jp	l_spr_tile_00106
2229  0945  C3 DB 09    	jp	l_spr_tile_00107
2230  0948  C3 EB 09    	jp	l_spr_tile_00108
2231  094B  C3 FA 09    	jp	l_spr_tile_00109
2232  094E  C3 36 0A    	jp	l_spr_tile_00113
2233  0951  C3 45 0A    	jp	l_spr_tile_00114
2234  0954  C3 54 0A    	jp	l_spr_tile_00115
2235  0957  C3 63 0A    	jp	l_spr_tile_00116
2236  095A  C3 63 0A    	jp	l_spr_tile_00116
2237  095D  C3 78 09    	jp	l_spr_tile_00101
2238  0960  C3 88 09    	jp	l_spr_tile_00102
2239  0963  C3 98 09    	jp	l_spr_tile_00103
2240  0966  C3 A9 09    	jp	l_spr_tile_00104
2241  0969  C3 B9 09    	jp	l_spr_tile_00105
2242  096C  C3 09 0A    	jp	l_spr_tile_00110
2243  096F  C3 63 0A    	jp	l_spr_tile_00116
2244  0972  C3 18 0A    	jp	l_spr_tile_00111
2245  0975  C3 27 0A    	jp	l_spr_tile_00112
2246  0978              l_spr_tile_00101:
2247  0978  AF          	xor	a, a
2248  0979  48          	ld	c,b
2249  097A  47          	ld	b,a
2250  097B  C5          	push	bc
2251  097C  3E 90       	ld	a,0x90
2252  097E  F5          	push	af
2253  097F  33          	inc	sp
2254  0980  CD 66 0A    	call	_spr_tile_dir
2255  0983  F1          	pop	af
2256  0984  33          	inc	sp
2257  0985  C3 65 0A    	jp	l_spr_tile_00117
2258  0988              l_spr_tile_00102:
2259  0988  AF          	xor	a, a
2260  0989  48          	ld	c,b
2261  098A  47          	ld	b,a
2262  098B  C5          	push	bc
2263  098C  3E 94       	ld	a,0x94
2264  098E  F5          	push	af
2265  098F  33          	inc	sp
2266  0990  CD 66 0A    	call	_spr_tile_dir
2267  0993  F1          	pop	af
2268  0994  33          	inc	sp
2269  0995  C3 65 0A    	jp	l_spr_tile_00117
2270  0998              l_spr_tile_00103:
2271  0998  3E 02       	ld	a,0x02
2272  099A  48          	ld	c,b
2273  099B  47          	ld	b,a
2274  099C  C5          	push	bc
2275  099D  3E 98       	ld	a,0x98
2276  099F  F5          	push	af
2277  09A0  33          	inc	sp
2278  09A1  CD 66 0A    	call	_spr_tile_dir
2279  09A4  F1          	pop	af
2280  09A5  33          	inc	sp
2281  09A6  C3 65 0A    	jp	l_spr_tile_00117
2282  09A9              l_spr_tile_00104:
2283  09A9  AF          	xor	a, a
2284  09AA  48          	ld	c,b
2285  09AB  47          	ld	b,a
2286  09AC  C5          	push	bc
2287  09AD  3E 9C       	ld	a,0x9c
2288  09AF  F5          	push	af
2289  09B0  33          	inc	sp
2290  09B1  CD 66 0A    	call	_spr_tile_dir
2291  09B4  F1          	pop	af
2292  09B5  33          	inc	sp
2293  09B6  C3 65 0A    	jp	l_spr_tile_00117
2294  09B9              l_spr_tile_00105:
2295  09B9  3E 04       	ld	a,0x04
2296  09BB  48          	ld	c,b
2297  09BC  47          	ld	b,a
2298  09BD  C5          	push	bc
2299  09BE  3E A0       	ld	a,0xa0
2300  09C0  F5          	push	af
2301  09C1  33          	inc	sp
2302  09C2  CD 66 0A    	call	_spr_tile_dir
2303  09C5  F1          	pop	af
2304  09C6  33          	inc	sp
2305  09C7  C3 65 0A    	jp	l_spr_tile_00117
2306  09CA              l_spr_tile_00106:
2307  09CA  3E 02       	ld	a,0x02
2308  09CC  48          	ld	c,b
2309  09CD  47          	ld	b,a
2310  09CE  C5          	push	bc
2311  09CF  3E A8       	ld	a,0xa8
2312  09D1  F5          	push	af
2313  09D2  33          	inc	sp
2314  09D3  CD 66 0A    	call	_spr_tile_dir
2315  09D6  F1          	pop	af
2316  09D7  33          	inc	sp
2317  09D8  C3 65 0A    	jp	l_spr_tile_00117
2318  09DB              l_spr_tile_00107:
2319  09DB  AF          	xor	a, a
2320  09DC  48          	ld	c,b
2321  09DD  47          	ld	b,a
2322  09DE  C5          	push	bc
2323  09DF  3E AC       	ld	a,0xac
2324  09E1  F5          	push	af
2325  09E2  33          	inc	sp
2326  09E3  CD 66 0A    	call	_spr_tile_dir
2327  09E6  F1          	pop	af
2328  09E7  33          	inc	sp
2329  09E8  C3 65 0A    	jp	l_spr_tile_00117
2330  09EB              l_spr_tile_00108:
2331  09EB  AF          	xor	a, a
2332  09EC  48          	ld	c,b
2333  09ED  47          	ld	b,a
2334  09EE  C5          	push	bc
2335  09EF  3E AE       	ld	a,0xae
2336  09F1  F5          	push	af
2337  09F2  33          	inc	sp
2338  09F3  CD 66 0A    	call	_spr_tile_dir
2339  09F6  F1          	pop	af
2340  09F7  33          	inc	sp
2341  09F8  18 6B       	jr	l_spr_tile_00117
2342  09FA              l_spr_tile_00109:
2343  09FA  AF          	xor	a, a
2344  09FB  48          	ld	c,b
2345  09FC  47          	ld	b,a
2346  09FD  C5          	push	bc
2347  09FE  3E B0       	ld	a,0xb0
2348  0A00  F5          	push	af
2349  0A01  33          	inc	sp
2350  0A02  CD 66 0A    	call	_spr_tile_dir
2351  0A05  F1          	pop	af
2352  0A06  33          	inc	sp
2353  0A07  18 5C       	jr	l_spr_tile_00117
2354  0A09              l_spr_tile_00110:
2355  0A09  AF          	xor	a, a
2356  0A0A  48          	ld	c,b
2357  0A0B  47          	ld	b,a
2358  0A0C  C5          	push	bc
2359  0A0D  3E B2       	ld	a,0xb2
2360  0A0F  F5          	push	af
2361  0A10  33          	inc	sp
2362  0A11  CD 66 0A    	call	_spr_tile_dir
2363  0A14  F1          	pop	af
2364  0A15  33          	inc	sp
2365  0A16  18 4D       	jr	l_spr_tile_00117
2366  0A18              l_spr_tile_00111:
2367  0A18  AF          	xor	a, a
2368  0A19  48          	ld	c,b
2369  0A1A  47          	ld	b,a
2370  0A1B  C5          	push	bc
2371  0A1C  3E B4       	ld	a,0xb4
2372  0A1E  F5          	push	af
2373  0A1F  33          	inc	sp
2374  0A20  CD 66 0A    	call	_spr_tile_dir
2375  0A23  F1          	pop	af
2376  0A24  33          	inc	sp
2377  0A25  18 3E       	jr	l_spr_tile_00117
2378  0A27              l_spr_tile_00112:
2379  0A27  AF          	xor	a, a
2380  0A28  48          	ld	c,b
2381  0A29  47          	ld	b,a
2382  0A2A  C5          	push	bc
2383  0A2B  3E B6       	ld	a,0xb6
2384  0A2D  F5          	push	af
2385  0A2E  33          	inc	sp
2386  0A2F  CD 66 0A    	call	_spr_tile_dir
2387  0A32  F1          	pop	af
2388  0A33  33          	inc	sp
2389  0A34  18 2F       	jr	l_spr_tile_00117
2390  0A36              l_spr_tile_00113:
2391  0A36  AF          	xor	a, a
2392  0A37  48          	ld	c,b
2393  0A38  47          	ld	b,a
2394  0A39  C5          	push	bc
2395  0A3A  3E C0       	ld	a,0xc0
2396  0A3C  F5          	push	af
2397  0A3D  33          	inc	sp
2398  0A3E  CD 66 0A    	call	_spr_tile_dir
2399  0A41  F1          	pop	af
2400  0A42  33          	inc	sp
2401  0A43  18 20       	jr	l_spr_tile_00117
2402  0A45              l_spr_tile_00114:
2403  0A45  AF          	xor	a, a
2404  0A46  48          	ld	c,b
2405  0A47  47          	ld	b,a
2406  0A48  C5          	push	bc
2407  0A49  3E C2       	ld	a,0xc2
2408  0A4B  F5          	push	af
2409  0A4C  33          	inc	sp
2410  0A4D  CD 66 0A    	call	_spr_tile_dir
2411  0A50  F1          	pop	af
2412  0A51  33          	inc	sp
2413  0A52  18 11       	jr	l_spr_tile_00117
2414  0A54              l_spr_tile_00115:
2415  0A54  AF          	xor	a, a
2416  0A55  48          	ld	c,b
2417  0A56  47          	ld	b,a
2418  0A57  C5          	push	bc
2419  0A58  3E C4       	ld	a,0xc4
2420  0A5A  F5          	push	af
2421  0A5B  33          	inc	sp
2422  0A5C  CD 66 0A    	call	_spr_tile_dir
2423  0A5F  F1          	pop	af
2424  0A60  33          	inc	sp
2425  0A61  18 02       	jr	l_spr_tile_00117
2426  0A63              l_spr_tile_00116:
2427  0A63  2E 00       	ld	l,0x00
2428  0A65              l_spr_tile_00117:
2429  0A65  C9          	ret
2430  0A66              	SECTION code_compiler
2431  0A66              ;	---------------------------------
2432  0A66              ; Function spr_tile_dir
2433  0A66              ; ---------------------------------
2434  0A66              _spr_tile_dir:
2435  0A66  CD 00 00    	call	___sdcc_enter_ix
2436  0A69  3E 00       	ld	a, +((_state) & 0xFF)
2437  0A6B  DD 86 05    	add	a,(ix+5)
2438  0A6E  4F          	ld	c, a
2439  0A6F  3E 00       	ld	a, +((_state) / 256)
2440  0A71  CE 00       	adc	a,0x00
2441  0A73  47          	ld	b, a
2442  0A74  0A          	ld	a, (bc)
2443  0A75  4F          	ld	c,a
2444  0A76  CB 57       	bit	2,a
2445  0A78  28 05       	jr	Z,l_spr_tile_dir_00102
2446  0A7A  DD 6E 04    	ld	l,(ix+4)
2447  0A7D  18 2D       	jr	l_spr_tile_dir_00109
2448  0A7F              l_spr_tile_dir_00102:
2449  0A7F  DD 7E 04    	ld	a,(ix+4)
2450  0A82  DD 86 06    	add	a,(ix+6)
2451  0A85  47          	ld	b, a
2452  0A86  CB 59       	bit	3, c
2453  0A88  28 03       	jr	Z,l_spr_tile_dir_00104
2454  0A8A  68          	ld	l, b
2455  0A8B  18 1F       	jr	l_spr_tile_dir_00109
2456  0A8D              l_spr_tile_dir_00104:
2457  0A8D  3E 00       	ld	a, +((_state_a) & 0xFF)
2458  0A8F  DD 86 05    	add	a,(ix+5)
2459  0A92  5F          	ld	e, a
2460  0A93  3E 00       	ld	a, +((_state_a) / 256)
2461  0A95  CE 00       	adc	a,0x00
2462  0A97  57          	ld	d, a
2463  0A98  1A          	ld	a, (de)
2464  0A99  CB 67       	bit	4, a
2465  0A9B  28 05       	jr	Z,l_spr_tile_dir_00106
2466  0A9D  DD 6E 04    	ld	l,(ix+4)
2467  0AA0  18 0A       	jr	l_spr_tile_dir_00109
2468  0AA2              l_spr_tile_dir_00106:
2469  0AA2  CB 5F       	bit	3, a
2470  0AA4  28 03       	jr	Z,l_spr_tile_dir_00108
2471  0AA6  68          	ld	l, b
2472  0AA7  18 03       	jr	l_spr_tile_dir_00109
2473  0AA9              l_spr_tile_dir_00108:
2474  0AA9  DD 6E 04    	ld	l,(ix+4)
2475  0AAC              l_spr_tile_dir_00109:
2476  0AAC  DD E1       	pop	ix
2477  0AAE  C9          	ret
2478  0AAF              	SECTION code_compiler
2479  0AAF              ;	---------------------------------
2480  0AAF              ; Function spr_draw_clear
2481  0AAF              ; ---------------------------------
2482  0AAF              _spr_draw_clear:
2483  0AAF  F3          	di
2484  0AB0  2E 00       	ld	l,0x00
2485  0AB2  CD 00 00    	call	_zx_cls_fastcall
2486  0AB5  21 00 00    	ld	hl,_s_lin1
2487  0AB8  36 10       	ld	(hl),0x10
2488  0ABA              l_spr_draw_clear_00105:
2489  0ABA  21 00 00    	ld	hl,_s_col1
2490  0ABD  36 00       	ld	(hl),0x00
2491  0ABF              l_spr_draw_clear_00103:
2492  0ABF  2A FF FF    	ld	hl,(_s_col1 - 1)
2493  0AC2  3A 00 00    	ld	a,(_s_lin1)
2494  0AC5  6F          	ld	l,a
2495  0AC6  E5          	push	hl
2496  0AC7  AF          	xor	a, a
2497  0AC8  F5          	push	af
2498  0AC9  33          	inc	sp
2499  0ACA  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2500  0ACD  21 00 00    	ld	hl,_s_col1
2501  0AD0  7E          	ld	a,(hl)
2502  0AD1  C6 02       	add	a,0x02
2503  0AD3  77          	ld	(hl),a
2504  0AD4  D6 20       	sub	a,0x20
2505  0AD6  38 E7       	jr	C,l_spr_draw_clear_00103
2506  0AD8  21 00 00    	ld	hl,_s_lin1
2507  0ADB  7E          	ld	a, (hl)
2508  0ADC  C6 10       	add	a,0x10
2509  0ADE  77          	ld	(hl), a
2510  0ADF  3E A2       	ld	a,0xa2
2511  0AE1  96          	sub	a, (hl)
2512  0AE2  30 D6       	jr	NC,l_spr_draw_clear_00105
2513  0AE4  FB          	ei
2514  0AE5  C9          	ret
2515  0AE6              	SECTION code_compiler
2516  0AE6              ;	---------------------------------
2517  0AE6              ; Function spr_brick_anim
2518  0AE6              ; ---------------------------------
2519  0AE6              _spr_brick_anim:
2520  0AE6  CD 00 00    	call	___sdcc_enter_ix
2521  0AE9  F5          	push	af
2522  0AEA  3B          	dec	sp
2523  0AEB  4D          	ld	c, l
2524  0AEC  21 00 00    	ld	hl,_player_hit_col
2525  0AEF  56          	ld	d, (hl)
2526  0AF0  21 00 00    	ld	hl,_player_hit_lin
2527  0AF3  5E          	ld	e, (hl)
2528  0AF4  C5          	push	bc
2529  0AF5  D5          	push	de
2530  0AF6  D5          	push	de
2531  0AF7  CD 00 00    	call	_spr_calc_index
2532  0AFA  F1          	pop	af
2533  0AFB  DD 74 FF    	ld	(ix-1),h
2534  0AFE  DD 75 FE    	ld	(ix-2),l
2535  0B01  D1          	pop	de
2536  0B02  C1          	pop	bc
2537  0B03  DD 6E FE    	ld	l,(ix-2)
2538  0B06  DD 66 FF    	ld	h,(ix-1)
2539  0B09  22 00 00    	ld	(_index1),hl
2540  0B0C  21 00 00    	ld	hl,_index1
2541  0B0F  7E          	ld	a, (hl)
2542  0B10  C6 F0       	add	a,0xf0
2543  0B12  DD 77 FE    	ld	(ix-2),a
2544  0B15  23          	inc	hl
2545  0B16  7E          	ld	a, (hl)
2546  0B17  CE FF       	adc	a,0xff
2547  0B19  DD 77 FF    	ld	(ix-1),a
2548  0B1C  3E 00       	ld	a, +((_scr_map) & 0xFF)
2549  0B1E  DD 86 FE    	add	a,(ix-2)
2550  0B21  6F          	ld	l, a
2551  0B22  3E 00       	ld	a, +((_scr_map) / 256)
2552  0B24  DD 8E FF    	adc	a,(ix-1)
2553  0B27  67          	ld	h, a
2554  0B28  7E          	ld	a, (hl)
2555  0B29  DD 77 FD    	ld	(ix-3),a
2556  0B2C  3E 00       	ld	a, +((_scr_map) & 0xFF)
2557  0B2E  21 00 00    	ld	hl,_index1
2558  0B31  86          	add	a, (hl)
2559  0B32  DD 77 FE    	ld	(ix-2),a
2560  0B35  3E 00       	ld	a, +((_scr_map) / 256)
2561  0B37  23          	inc	hl
2562  0B38  8E          	adc	a, (hl)
2563  0B39  DD 6E FE    	ld	l,(ix-2)
2564  0B3C  DD 77 FF    	ld	(ix-1),a
2565  0B3F  67          	ld	h,a
2566  0B40  46          	ld	b, (hl)
2567  0B41  79          	ld	a, c
2568  0B42  B7          	or	a, a
2569  0B43  28 08       	jr	Z,l_spr_brick_anim_00102
2570  0B45  7B          	ld	a, e
2571  0B46  C6 F6       	add	a,0xf6
2572  0B48  32 00 00    	ld	(_tmp),a
2573  0B4B  18 06       	jr	l_spr_brick_anim_00103
2574  0B4D              l_spr_brick_anim_00102:
2575  0B4D  7B          	ld	a, e
2576  0B4E  C6 F8       	add	a,0xf8
2577  0B50  32 00 00    	ld	(_tmp),a
2578  0B53              l_spr_brick_anim_00103:
2579  0B53  F3          	di
2580  0B54  79          	ld	a, c
2581  0B55  B7          	or	a, a
2582  0B56  28 1A       	jr	Z,l_spr_brick_anim_00105
2583  0B58  3A 00 00    	ld	a,(_map_paper_clr)
2584  0B5B  C5          	push	bc
2585  0B5C  D5          	push	de
2586  0B5D  D5          	push	de
2587  0B5E  F5          	push	af
2588  0B5F  33          	inc	sp
2589  0B60  CD 00 00    	call	_NIRVANAP_fillT_raw_callee
2590  0B63  D1          	pop	de
2591  0B64  C1          	pop	bc
2592  0B65  D5          	push	de
2593  0B66  33          	inc	sp
2594  0B67  3A 00 00    	ld	a,(_tmp)
2595  0B6A  48          	ld	c,b
2596  0B6B  47          	ld	b,a
2597  0B6C  C5          	push	bc
2598  0B6D  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2599  0B70  18 1E       	jr	l_spr_brick_anim_00106
2600  0B72              l_spr_brick_anim_00105:
2601  0B72  3A 00 00    	ld	a,(_tmp)
2602  0B75  C6 F0       	add	a,0xf0
2603  0B77  C5          	push	bc
2604  0B78  D5          	push	de
2605  0B79  5F          	ld	e,a
2606  0B7A  D5          	push	de
2607  0B7B  DD 7E FD    	ld	a,(ix-3)
2608  0B7E  F5          	push	af
2609  0B7F  33          	inc	sp
2610  0B80  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2611  0B83  D1          	pop	de
2612  0B84  C1          	pop	bc
2613  0B85  D5          	push	de
2614  0B86  33          	inc	sp
2615  0B87  3A 00 00    	ld	a,(_tmp)
2616  0B8A  48          	ld	c,b
2617  0B8B  47          	ld	b,a
2618  0B8C  C5          	push	bc
2619  0B8D  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2620  0B90              l_spr_brick_anim_00106:
2621  0B90  FB          	ei
2622  0B91  DD F9       	ld	sp, ix
2623  0B93  DD E1       	pop	ix
2624  0B95  C9          	ret
2625  0B96              	SECTION code_compiler
2626  0B96              ;	---------------------------------
2627  0B96              ; Function spr_draw_index
2628  0B96              ; ---------------------------------
2629  0B96              _spr_draw_index:
2630  0B96  CD 00 00    	call	___sdcc_enter_ix
2631  0B99  DD 4E 04    	ld	c,(ix+4)
2632  0B9C  79          	ld	a, c
2633  0B9D  E6 0F       	and	a,0x0f
2634  0B9F  87          	add	a, a
2635  0BA0  32 00 00    	ld	(_s_col1),a
2636  0BA3  21 00 00    	ld	hl,_s_lin1
2637  0BA6  71          	ld	(hl),c
2638  0BA7  79          	ld	a,c
2639  0BA8  07          	rlca
2640  0BA9  07          	rlca
2641  0BAA  07          	rlca
2642  0BAB  07          	rlca
2643  0BAC  E6 0F       	and	a,0x0f
2644  0BAE  07          	rlca
2645  0BAF  07          	rlca
2646  0BB0  07          	rlca
2647  0BB1  07          	rlca
2648  0BB2  E6 F0       	and	a,0xf0
2649  0BB4  77          	ld	(hl), a
2650  0BB5  F3          	di
2651  0BB6  3E 00       	ld	a, +((_scr_map) & 0xFF)
2652  0BB8  DD 86 04    	add	a,(ix+4)
2653  0BBB  4F          	ld	c, a
2654  0BBC  3E 00       	ld	a, +((_scr_map) / 256)
2655  0BBE  DD 8E 05    	adc	a,(ix+5)
2656  0BC1  47          	ld	b, a
2657  0BC2  0A          	ld	a, (bc)
2658  0BC3  47          	ld	b, a
2659  0BC4  3A 00 00    	ld	a,(_s_col1)
2660  0BC7  F5          	push	af
2661  0BC8  33          	inc	sp
2662  0BC9  3A 00 00    	ld	a,(_s_lin1)
2663  0BCC  48          	ld	c,b
2664  0BCD  47          	ld	b,a
2665  0BCE  C5          	push	bc
2666  0BCF  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2667  0BD2  FB          	ei
2668  0BD3  DD E1       	pop	ix
2669  0BD5  C9          	ret
2670  0BD6              	SECTION code_compiler
2671  0BD6              ;	---------------------------------
2672  0BD6              ; Function spr_draw_row
2673  0BD6              ; ---------------------------------
2674  0BD6              _spr_draw_row:
2675  0BD6  CD 00 00    	call	___sdcc_enter_ix
2676  0BD9  3B          	dec	sp
2677  0BDA  F3          	di
2678  0BDB  21 00 00    	ld	hl,_tmp
2679  0BDE  36 00       	ld	(hl),0x00
2680  0BE0  DD 7E 04    	ld	a,(ix+4)
2681  0BE3  07          	rlca
2682  0BE4  07          	rlca
2683  0BE5  07          	rlca
2684  0BE6  E6 F8       	and	a,0xf8
2685  0BE8  DD 77 FF    	ld	(ix-1),a
2686  0BEB              l_spr_draw_row_00101:
2687  0BEB  21 00 00    	ld	hl,_tmp
2688  0BEE  7E          	ld	a, (hl)
2689  0BEF  D6 20       	sub	a,0x20
2690  0BF1  30 38       	jr	NC,l_spr_draw_row_00103
2691  0BF3  DD 4E 04    	ld	c,(ix+4)
2692  0BF6  3E 00       	ld	a,0x00
2693  0BF8  CB 21       	sla	c
2694  0BFA  17          	rla
2695  0BFB  CB 21       	sla	c
2696  0BFD  17          	rla
2697  0BFE  CB 21       	sla	c
2698  0C00  17          	rla
2699  0C01  CB 21       	sla	c
2700  0C03  17          	rla
2701  0C04  CB 21       	sla	c
2702  0C06  17          	rla
2703  0C07  47          	ld	b,a
2704  0C08  5E          	ld	e, (hl)
2705  0C09  16 00       	ld	d,0x00
2706  0C0B  79          	ld	a, c
2707  0C0C  83          	add	a, e
2708  0C0D  21 00 00    	ld	hl,_index1
2709  0C10  77          	ld	(hl), a
2710  0C11  78          	ld	a, b
2711  0C12  8A          	adc	a, d
2712  0C13  23          	inc	hl
2713  0C14  77          	ld	(hl), a
2714  0C15  2A FF FF    	ld	hl,(_tmp-1)
2715  0C18  DD 6E FF    	ld	l,(ix-1)
2716  0C1B  3A 00 00    	ld	a,(_game_brick_tile)
2717  0C1E  E5          	push	hl
2718  0C1F  F5          	push	af
2719  0C20  33          	inc	sp
2720  0C21  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2721  0C24  21 00 00    	ld	hl,_tmp
2722  0C27  34          	inc	(hl)
2723  0C28  34          	inc	(hl)
2724  0C29  18 C0       	jr	l_spr_draw_row_00101
2725  0C2B              l_spr_draw_row_00103:
2726  0C2B  FB          	ei
2727  0C2C  33          	inc	sp
2728  0C2D  DD E1       	pop	ix
2729  0C2F  C9          	ret
2730  0C30              	SECTION code_compiler
2731  0C30              ;	---------------------------------
2732  0C30              ; Function spr_calc_hor
2733  0C30              ; ---------------------------------
2734  0C30              _spr_calc_hor:
2735  0C30  CD 00 00    	call	___sdcc_enter_ix
2736  0C33  3E 00       	ld	a, +((_col) & 0xFF)
2737  0C35  DD 86 04    	add	a,(ix+4)
2738  0C38  4F          	ld	c, a
2739  0C39  3E 00       	ld	a, +((_col) / 256)
2740  0C3B  CE 00       	adc	a,0x00
2741  0C3D  47          	ld	b, a
2742  0C3E  0A          	ld	a, (bc)
2743  0C3F  5F          	ld	e, a
2744  0C40  3E 00       	ld	a, +((_sprite_frames) & 0xFF)
2745  0C42  DD 86 04    	add	a,(ix+4)
2746  0C45  4F          	ld	c, a
2747  0C46  3E 00       	ld	a, +((_sprite_frames) / 256)
2748  0C48  CE 00       	adc	a,0x00
2749  0C4A  47          	ld	b, a
2750  0C4B  0A          	ld	a, (bc)
2751  0C4C  67          	ld	h, a
2752  0C4D  2E 00       	ld	l,0x00
2753  0C4F  55          	ld	d, l
2754  0C50  06 08       	ld	b,0x08
2755  0C52              l_spr_calc_hor_00103:
2756  0C52  29          	add	hl, hl
2757  0C53  30 01       	jr	NC,l_spr_calc_hor_00104
2758  0C55  19          	add	hl, de
2759  0C56              l_spr_calc_hor_00104:
2760  0C56  10 FA       	djnz	l_spr_calc_hor_00103
2761  0C58  DD E1       	pop	ix
2762  0C5A  C9          	ret
2763  0C5B              	SECTION code_compiler
2764  0C5B              ;	---------------------------------
2765  0C5B              ; Function spr_back_repaint
2766  0C5B              ; ---------------------------------
2767  0C5B              _spr_back_repaint:
2768  0C5B  CD 00 00    	call	___sdcc_enter_ix
2769  0C5E  3B          	dec	sp
2770  0C5F  3A 00 00    	ld	a,(_spr_hack)
2771  0C62  B7          	or	a, a
2772  0C63  20 02       	jr	NZ,l_spr_back_repaint_00102
2773  0C65  76          	halt
2774  0C66  F3          	di
2775  0C67              l_spr_back_repaint_00102:
2776  0C67  2A FF FF    	ld	hl,(_s_col0 - 1)
2777  0C6A  3A 00 00    	ld	a,(_s_lin0)
2778  0C6D  6F          	ld	l,a
2779  0C6E  E5          	push	hl
2780  0C6F  CD 00 00    	call	_spr_calc_index
2781  0C72  F1          	pop	af
2782  0C73  7D          	ld	a,l
2783  0C74  32 00 00    	ld	(_sprite_curr_index),a
2784  0C77  21 00 00    	ld	hl,_s_lin0
2785  0C7A  7E          	ld	a, (hl)
2786  0C7B  E6 0F       	and	a,0x0f
2787  0C7D  4F          	ld	c, a
2788  0C7E  7E          	ld	a, (hl)
2789  0C7F  07          	rlca
2790  0C80  07          	rlca
2791  0C81  07          	rlca
2792  0C82  07          	rlca
2793  0C83  E6 0F       	and	a,0x0f
2794  0C85  5F          	ld	e, a
2795  0C86  21 00 00    	ld	hl,_s_col0
2796  0C89  CB 46       	bit	0, (hl)
2797  0C8B  20 68       	jr	NZ,l_spr_back_repaint_00110
2798  0C8D  79          	ld	a, c
2799  0C8E  B7          	or	a, a
2800  0C8F  20 1D       	jr	NZ,l_spr_back_repaint_00104
2801  0C91  2A 00 00    	ld	hl,(_sprite_curr_index)
2802  0C94  26 00       	ld	h,0x00
2803  0C96  01 00 00    	ld	bc,_scr_map
2804  0C99  09          	add	hl,bc
2805  0C9A  46          	ld	b,(hl)
2806  0C9B  3A 00 00    	ld	a,(_s_col0)
2807  0C9E  F5          	push	af
2808  0C9F  33          	inc	sp
2809  0CA0  3A 00 00    	ld	a,(_s_lin0)
2810  0CA3  48          	ld	c,b
2811  0CA4  47          	ld	b,a
2812  0CA5  C5          	push	bc
2813  0CA6  CD D2 0D    	call	_spr_tile_paint
2814  0CA9  F1          	pop	af
2815  0CAA  33          	inc	sp
2816  0CAB  C3 C7 0D    	jp	l_spr_back_repaint_00111
2817  0CAE              l_spr_back_repaint_00104:
2818  0CAE  7B          	ld	a, e
2819  0CAF  07          	rlca
2820  0CB0  07          	rlca
2821  0CB1  07          	rlca
2822  0CB2  07          	rlca
2823  0CB3  E6 F0       	and	a,0xf0
2824  0CB5  4F          	ld	c, a
2825  0CB6  2A 00 00    	ld	hl,(_sprite_curr_index)
2826  0CB9  26 00       	ld	h,0x00
2827  0CBB  11 00 00    	ld	de,_scr_map
2828  0CBE  19          	add	hl,de
2829  0CBF  46          	ld	b, (hl)
2830  0CC0  3A 00 00    	ld	a,(_s_col0)
2831  0CC3  C5          	push	bc
2832  0CC4  F5          	push	af
2833  0CC5  33          	inc	sp
2834  0CC6  79          	ld	a, c
2835  0CC7  48          	ld	c,b
2836  0CC8  47          	ld	b,a
2837  0CC9  C5          	push	bc
2838  0CCA  CD D2 0D    	call	_spr_tile_paint
2839  0CCD  F1          	pop	af
2840  0CCE  33          	inc	sp
2841  0CCF  C1          	pop	bc
2842  0CD0  79          	ld	a, c
2843  0CD1  C6 10       	add	a,0x10
2844  0CD3  57          	ld	d, a
2845  0CD4  21 00 00    	ld	hl,_sprite_curr_index
2846  0CD7  7E          	ld	a, (hl)
2847  0CD8  C6 10       	add	a,0x10
2848  0CDA  77          	ld	(hl), a
2849  0CDB  C6 00       	add	a,+((_scr_map) & 0xFF)
2850  0CDD  4F          	ld	c, a
2851  0CDE  3E 00       	ld	a, +((_scr_map) / 256)
2852  0CE0  CE 00       	adc	a,0x00
2853  0CE2  47          	ld	b, a
2854  0CE3  0A          	ld	a, (bc)
2855  0CE4  47          	ld	b, a
2856  0CE5  3A 00 00    	ld	a,(_s_col0)
2857  0CE8  5A          	ld	e,d
2858  0CE9  57          	ld	d,a
2859  0CEA  D5          	push	de
2860  0CEB  C5          	push	bc
2861  0CEC  33          	inc	sp
2862  0CED  CD D2 0D    	call	_spr_tile_paint
2863  0CF0  F1          	pop	af
2864  0CF1  33          	inc	sp
2865  0CF2  C3 C7 0D    	jp	l_spr_back_repaint_00111
2866  0CF5              l_spr_back_repaint_00110:
2867  0CF5  3A 00 00    	ld	a,(_s_col0)
2868  0CF8  C6 FF       	add	a,0xff
2869  0CFA  DD 77 FF    	ld	(ix-1),a
2870  0CFD  79          	ld	a, c
2871  0CFE  B7          	or	a, a
2872  0CFF  20 3E       	jr	NZ,l_spr_back_repaint_00107
2873  0D01  2A 00 00    	ld	hl,(_sprite_curr_index)
2874  0D04  26 00       	ld	h,0x00
2875  0D06  01 00 00    	ld	bc,_scr_map
2876  0D09  09          	add	hl,bc
2877  0D0A  46          	ld	b,(hl)
2878  0D0B  DD 7E FF    	ld	a,(ix-1)
2879  0D0E  F5          	push	af
2880  0D0F  33          	inc	sp
2881  0D10  3A 00 00    	ld	a,(_s_lin0)
2882  0D13  48          	ld	c,b
2883  0D14  47          	ld	b,a
2884  0D15  C5          	push	bc
2885  0D16  CD D2 0D    	call	_spr_tile_paint
2886  0D19  F1          	pop	af
2887  0D1A  33          	inc	sp
2888  0D1B  21 00 00    	ld	hl,_sprite_curr_index
2889  0D1E  34          	inc	(hl)
2890  0D1F  21 00 00    	ld	hl,_s_col0
2891  0D22  4E          	ld	c, (hl)
2892  0D23  0C          	inc	c
2893  0D24  2A 00 00    	ld	hl,(_sprite_curr_index)
2894  0D27  26 00       	ld	h,0x00
2895  0D29  11 00 00    	ld	de,_scr_map
2896  0D2C  19          	add	hl,de
2897  0D2D  46          	ld	b, (hl)
2898  0D2E  79          	ld	a, c
2899  0D2F  F5          	push	af
2900  0D30  33          	inc	sp
2901  0D31  3A 00 00    	ld	a,(_s_lin0)
2902  0D34  48          	ld	c,b
2903  0D35  47          	ld	b,a
2904  0D36  C5          	push	bc
2905  0D37  CD D2 0D    	call	_spr_tile_paint
2906  0D3A  F1          	pop	af
2907  0D3B  33          	inc	sp
2908  0D3C  C3 C7 0D    	jp	l_spr_back_repaint_00111
2909  0D3F              l_spr_back_repaint_00107:
2910  0D3F  7B          	ld	a, e
2911  0D40  07          	rlca
2912  0D41  07          	rlca
2913  0D42  07          	rlca
2914  0D43  07          	rlca
2915  0D44  E6 F0       	and	a,0xf0
2916  0D46  47          	ld	b, a
2917  0D47  2A 00 00    	ld	hl,(_sprite_curr_index)
2918  0D4A  26 00       	ld	h,0x00
2919  0D4C  11 00 00    	ld	de,_scr_map
2920  0D4F  19          	add	hl,de
2921  0D50  56          	ld	d, (hl)
2922  0D51  C5          	push	bc
2923  0D52  DD 7E FF    	ld	a,(ix-1)
2924  0D55  F5          	push	af
2925  0D56  33          	inc	sp
2926  0D57  4A          	ld	c, d
2927  0D58  C5          	push	bc
2928  0D59  CD D2 0D    	call	_spr_tile_paint
2929  0D5C  F1          	pop	af
2930  0D5D  33          	inc	sp
2931  0D5E  C1          	pop	bc
2932  0D5F  21 00 00    	ld	hl,_sprite_curr_index
2933  0D62  34          	inc	(hl)
2934  0D63  21 00 00    	ld	hl,_s_col0
2935  0D66  4E          	ld	c, (hl)
2936  0D67  0C          	inc	c
2937  0D68  2A 00 00    	ld	hl,(_sprite_curr_index)
2938  0D6B  26 00       	ld	h,0x00
2939  0D6D  11 00 00    	ld	de,_scr_map
2940  0D70  19          	add	hl,de
2941  0D71  5E          	ld	e, (hl)
2942  0D72  C5          	push	bc
2943  0D73  79          	ld	a, c
2944  0D74  48          	ld	c,b
2945  0D75  47          	ld	b,a
2946  0D76  C5          	push	bc
2947  0D77  7B          	ld	a, e
2948  0D78  F5          	push	af
2949  0D79  33          	inc	sp
2950  0D7A  CD D2 0D    	call	_spr_tile_paint
2951  0D7D  F1          	pop	af
2952  0D7E  33          	inc	sp
2953  0D7F  C1          	pop	bc
2954  0D80  78          	ld	a, b
2955  0D81  C6 10       	add	a,0x10
2956  0D83  DD 77 FF    	ld	(ix-1),a
2957  0D86  21 00 00    	ld	hl,_sprite_curr_index
2958  0D89  7E          	ld	a, (hl)
2959  0D8A  C6 0F       	add	a,0x0f
2960  0D8C  77          	ld	(hl), a
2961  0D8D  21 00 00    	ld	hl,_s_col0
2962  0D90  4E          	ld	c, (hl)
2963  0D91  0D          	dec	c
2964  0D92  2A 00 00    	ld	hl,(_sprite_curr_index)
2965  0D95  26 00       	ld	h,0x00
2966  0D97  11 00 00    	ld	de,_scr_map
2967  0D9A  19          	add	hl,de
2968  0D9B  5E          	ld	e, (hl)
2969  0D9C  79          	ld	a, c
2970  0D9D  F5          	push	af
2971  0D9E  33          	inc	sp
2972  0D9F  DD 56 FF    	ld	d,(ix-1)
2973  0DA2  D5          	push	de
2974  0DA3  CD D2 0D    	call	_spr_tile_paint
2975  0DA6  F1          	pop	af
2976  0DA7  33          	inc	sp
2977  0DA8  21 00 00    	ld	hl,_sprite_curr_index
2978  0DAB  34          	inc	(hl)
2979  0DAC  21 00 00    	ld	hl,_s_col0
2980  0DAF  4E          	ld	c, (hl)
2981  0DB0  0C          	inc	c
2982  0DB1  2A 00 00    	ld	hl,(_sprite_curr_index)
2983  0DB4  26 00       	ld	h,0x00
2984  0DB6  11 00 00    	ld	de,_scr_map
2985  0DB9  19          	add	hl,de
2986  0DBA  5E          	ld	e, (hl)
2987  0DBB  79          	ld	a, c
2988  0DBC  F5          	push	af
2989  0DBD  33          	inc	sp
2990  0DBE  DD 56 FF    	ld	d,(ix-1)
2991  0DC1  D5          	push	de
2992  0DC2  CD D2 0D    	call	_spr_tile_paint
2993  0DC5  F1          	pop	af
2994  0DC6  33          	inc	sp
2995  0DC7              l_spr_back_repaint_00111:
2996  0DC7  3A 00 00    	ld	a,(_spr_hack)
2997  0DCA  B7          	or	a, a
2998  0DCB  20 01       	jr	NZ,l_spr_back_repaint_00114
2999  0DCD  FB          	ei
3000  0DCE              l_spr_back_repaint_00114:
3001  0DCE  33          	inc	sp
3002  0DCF  DD E1       	pop	ix
3003  0DD1  C9          	ret
3004  0DD2              	SECTION code_compiler
3005  0DD2              ;	---------------------------------
3006  0DD2              ; Function spr_tile_paint
3007  0DD2              ; ---------------------------------
3008  0DD2              _spr_tile_paint:
3009  0DD2  CD 00 00    	call	___sdcc_enter_ix
3010  0DD5  DD 7E 04    	ld	a,(ix+4)
3011  0DD8  B7          	or	a, a
3012  0DD9  28 05       	jr	Z,l_spr_tile_paint_00101
3013  0DDB  3C          	inc	a
3014  0DDC  28 22       	jr	Z,l_spr_tile_paint_00105
3015  0DDE  18 11       	jr	l_spr_tile_paint_00103
3016  0DE0              l_spr_tile_paint_00101:
3017  0DE0  DD 66 06    	ld	h,(ix+6)
3018  0DE3  DD 6E 05    	ld	l,(ix+5)
3019  0DE6  3A 00 00    	ld	a,(_map_paper_clr)
3020  0DE9  E5          	push	hl
3021  0DEA  F5          	push	af
3022  0DEB  33          	inc	sp
3023  0DEC  CD 00 00    	call	_NIRVANAP_fillT_raw_callee
3024  0DEF  18 0F       	jr	l_spr_tile_paint_00105
3025  0DF1              l_spr_tile_paint_00103:
3026  0DF1  DD 66 06    	ld	h,(ix+6)
3027  0DF4  DD 6E 05    	ld	l,(ix+5)
3028  0DF7  E5          	push	hl
3029  0DF8  DD 7E 04    	ld	a,(ix+4)
3030  0DFB  F5          	push	af
3031  0DFC  33          	inc	sp
3032  0DFD  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
3033  0E00              l_spr_tile_paint_00105:
3034  0E00  DD E1       	pop	ix
3035  0E02  C9          	ret
3036  0E03              	SECTION code_compiler
3037  0E03              ;	---------------------------------
3038  0E03              ; Function spr_init_anim_bullets
3039  0E03              ; ---------------------------------
3040  0E03              _spr_init_anim_bullets:
3041  0E03  01 00 00    	ld	bc,_anim_lin+0
3042  0E06  1E 00       	ld	e,0x00
3043  0E08              l_spr_init_anim_bullets_00102:
3044  0E08  6B          	ld	l,e
3045  0E09  26 00       	ld	h,0x00
3046  0E0B  09          	add	hl, bc
3047  0E0C  36 FF       	ld	(hl),0xff
3048  0E0E  16 00       	ld	d,0x00
3049  0E10  21 00 00    	ld	hl,_bullet_col
3050  0E13  19          	add	hl, de
3051  0E14  36 FF       	ld	(hl),0xff
3052  0E16  1C          	inc	e
3053  0E17  7B          	ld	a, e
3054  0E18  D6 08       	sub	a,0x08
3055  0E1A  38 EC       	jr	C,l_spr_init_anim_bullets_00102
3056  0E1C  21 00 00    	ld	hl,_bullet_count
3057  0E1F  36 00       	ld	(hl),0x00
3058  0E21  21 00 00    	ld	hl,_anim_count
3059  0E24  36 00       	ld	(hl),0x00
3060  0E26  C9          	ret
3061  0E27              	SECTION code_compiler
3062  0E27              ;	---------------------------------
3063  0E27              ; Function spr_add_anim
3064  0E27              ; ---------------------------------
3065  0E27              _spr_add_anim:
3066  0E27  CD 00 00    	call	___sdcc_enter_ix
3067  0E2A  F5          	push	af
3068  0E2B  F5          	push	af
3069  0E2C  3B          	dec	sp
3070  0E2D  DD 7E 05    	ld	a,(ix+5)
3071  0E30  D6 1F       	sub	a,0x1f
3072  0E32  D2 F1 0E    	jp	NC, l_spr_add_anim_00111
3073  0E35  DD 7E 04    	ld	a,(ix+4)
3074  0E38  D6 B8       	sub	a,0xb8
3075  0E3A  D2 F1 0E    	jp	NC, l_spr_add_anim_00111
3076  0E3D  0E 00       	ld	c,0x00
3077  0E3F  DD 71 FF    	ld	(ix-1),c
3078  0E42              l_spr_add_anim_00109:
3079  0E42  3E 00       	ld	a, +((_anim_lin) & 0xFF)
3080  0E44  81          	add	a, c
3081  0E45  5F          	ld	e, a
3082  0E46  3E 00       	ld	a, +((_anim_lin) / 256)
3083  0E48  CE 00       	adc	a,0x00
3084  0E4A  57          	ld	d, a
3085  0E4B  1A          	ld	a, (de)
3086  0E4C  3C          	inc	a
3087  0E4D  C2 E7 0E    	jp	NZ,l_spr_add_anim_00110
3088  0E50  21 00 00    	ld	hl,_anim_count
3089  0E53  34          	inc	(hl)
3090  0E54  DD 7E 04    	ld	a,(ix+4)
3091  0E57  12          	ld	(de), a
3092  0E58  01 00 00    	ld	bc,_anim_col
3093  0E5B  DD 6E FF    	ld	l,(ix-1)
3094  0E5E  26 00       	ld	h,0x00
3095  0E60  09          	add	hl,bc
3096  0E61  DD 75 FD    	ld	(ix-3),l
3097  0E64  DD 74 FE    	ld	(ix-2),h
3098  0E67  DD 7E 05    	ld	a,(ix+5)
3099  0E6A  77          	ld	(hl), a
3100  0E6B  3E 00       	ld	a, +((_anim_tile) & 0xFF)
3101  0E6D  DD 86 FF    	add	a,(ix-1)
3102  0E70  DD 77 FB    	ld	(ix-5),a
3103  0E73  3E 00       	ld	a, +((_anim_tile) / 256)
3104  0E75  CE 00       	adc	a,0x00
3105  0E77  DD 77 FC    	ld	(ix-4),a
3106  0E7A  E1          	pop	hl
3107  0E7B  E5          	push	hl
3108  0E7C  DD 7E 06    	ld	a,(ix+6)
3109  0E7F  77          	ld	(hl), a
3110  0E80  3E 00       	ld	a, +((_anim_loop) & 0xFF)
3111  0E82  DD 86 FF    	add	a,(ix-1)
3112  0E85  4F          	ld	c, a
3113  0E86  3E 00       	ld	a, +((_anim_loop) / 256)
3114  0E88  CE 00       	adc	a,0x00
3115  0E8A  47          	ld	b, a
3116  0E8B  DD 7E 08    	ld	a,(ix+8)
3117  0E8E  02          	ld	(bc), a
3118  0E8F  01 00 00    	ld	bc,_anim_int+0
3119  0E92  DD 6E FF    	ld	l,(ix-1)
3120  0E95  26 00       	ld	h,0x00
3121  0E97  09          	add	hl, bc
3122  0E98  36 00       	ld	(hl),0x00
3123  0E9A  3E 00       	ld	a, +((_anim_end) & 0xFF)
3124  0E9C  DD 86 FF    	add	a,(ix-1)
3125  0E9F  4F          	ld	c, a
3126  0EA0  3E 00       	ld	a, +((_anim_end) / 256)
3127  0EA2  CE 00       	adc	a,0x00
3128  0EA4  47          	ld	b, a
3129  0EA5  DD 7E 07    	ld	a,(ix+7)
3130  0EA8  02          	ld	(bc), a
3131  0EA9  3E 00       	ld	a, +((_anim_respanwn) & 0xFF)
3132  0EAB  DD 86 FF    	add	a,(ix-1)
3133  0EAE  4F          	ld	c, a
3134  0EAF  3E 00       	ld	a, +((_anim_respanwn) / 256)
3135  0EB1  CE 00       	adc	a,0x00
3136  0EB3  47          	ld	b, a
3137  0EB4  DD 7E 09    	ld	a,(ix+9)
3138  0EB7  02          	ld	(bc), a
3139  0EB8  F3          	di
3140  0EB9  DD 6E FD    	ld	l,(ix-3)
3141  0EBC  DD 66 FE    	ld	h,(ix-2)
3142  0EBF  46          	ld	b, (hl)
3143  0EC0  E1          	pop	hl
3144  0EC1  1A          	ld	a,(de)
3145  0EC2  56          	ld	d,(hl)
3146  0EC3  E5          	push	hl
3147  0EC4  C5          	push	bc
3148  0EC5  33          	inc	sp
3149  0EC6  5A          	ld	e,d
3150  0EC7  57          	ld	d,a
3151  0EC8  D5          	push	de
3152  0EC9  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
3153  0ECC  FB          	ei
3154  0ECD  DD 66 05    	ld	h,(ix+5)
3155  0ED0  DD 6E 04    	ld	l,(ix+4)
3156  0ED3  E5          	push	hl
3157  0ED4  CD 00 00    	call	_spr_calc_index
3158  0ED7  F1          	pop	af
3159  0ED8  22 00 00    	ld	(_index0),hl
3160  0EDB  01 00 00    	ld	bc,_scr_map
3161  0EDE  09          	add	hl,bc
3162  0EDF  7E          	ld	a,(hl)
3163  0EE0  B7          	or	a,a
3164  0EE1  20 0E       	jr	NZ,l_spr_add_anim_00111
3165  0EE3  36 FF       	ld	(hl),0xff
3166  0EE5  18 0A       	jr	l_spr_add_anim_00111
3167  0EE7              l_spr_add_anim_00110:
3168  0EE7  0C          	inc	c
3169  0EE8  DD 71 FF    	ld	(ix-1),c
3170  0EEB  79          	ld	a, c
3171  0EEC  D6 08       	sub	a,0x08
3172  0EEE  DA 42 0E    	jp	C, l_spr_add_anim_00109
3173  0EF1              l_spr_add_anim_00111:
3174  0EF1  DD F9       	ld	sp, ix
3175  0EF3  DD E1       	pop	ix
3176  0EF5  C9          	ret
3177  0EF6              	SECTION code_compiler
3178  0EF6              ;	---------------------------------
3179  0EF6              ; Function spr_play_anim
3180  0EF6              ; ---------------------------------
3181  0EF6              _spr_play_anim:
3182  0EF6  CD 00 00    	call	___sdcc_enter_ix
3183  0EF9  F5          	push	af
3184  0EFA  F5          	push	af
3185  0EFB  F5          	push	af
3186  0EFC  F5          	push	af
3187  0EFD  DD 36 F8 00 	ld	(ix-8),0x00
3188  0F01              l_spr_play_anim_00114:
3189  0F01  01 00 00    	ld	bc,_anim_lin
3190  0F04  DD 6E F8    	ld	l,(ix-8)
3191  0F07  26 00       	ld	h,0x00
3192  0F09  09          	add	hl,bc
3193  0F0A  DD 75 FE    	ld	(ix-2),l
3194  0F0D  DD 74 FF    	ld	(ix-1),h
3195  0F10  4E          	ld	c, (hl)
3196  0F11  0C          	inc	c
3197  0F12  CA 15 10    	jp	Z,l_spr_play_anim_00115
3198  0F15  21 01 00    	ld	hl,0x0001
3199  0F18  CD 00 00    	call	_z80_delay_ms_fastcall
3200  0F1B  01 00 00    	ld	bc,_anim_int
3201  0F1E  DD 6E F8    	ld	l,(ix-8)
3202  0F21  26 00       	ld	h,0x00
3203  0F23  09          	add	hl,bc
3204  0F24  DD 75 FC    	ld	(ix-4),l
3205  0F27  DD 74 FD    	ld	(ix-3),h
3206  0F2A  4E          	ld	c, (hl)
3207  0F2B  3E 00       	ld	a, +((_anim_end) & 0xFF)
3208  0F2D  DD 86 F8    	add	a,(ix-8)
3209  0F30  6F          	ld	l, a
3210  0F31  3E 00       	ld	a, +((_anim_end) / 256)
3211  0F33  CE 00       	adc	a,0x00
3212  0F35  67          	ld	h, a
3213  0F36  46          	ld	b, (hl)
3214  0F37  79          	ld	a, c
3215  0F38  90          	sub	a, b
3216  0F39  30 40       	jr	NC,l_spr_play_anim_00109
3217  0F3B  F3          	di
3218  0F3C  3E 00       	ld	a, +((_anim_col) & 0xFF)
3219  0F3E  DD 86 F8    	add	a,(ix-8)
3220  0F41  6F          	ld	l, a
3221  0F42  3E 00       	ld	a, +((_anim_col) / 256)
3222  0F44  CE 00       	adc	a,0x00
3223  0F46  67          	ld	h, a
3224  0F47  56          	ld	d, (hl)
3225  0F48  DD 6E FE    	ld	l,(ix-2)
3226  0F4B  DD 66 FF    	ld	h,(ix-1)
3227  0F4E  4E          	ld	c, (hl)
3228  0F4F  3E 00       	ld	a, +((_anim_tile) & 0xFF)
3229  0F51  DD 86 F8    	add	a,(ix-8)
3230  0F54  6F          	ld	l, a
3231  0F55  3E 00       	ld	a, +((_anim_tile) / 256)
3232  0F57  CE 00       	adc	a,0x00
3233  0F59  67          	ld	h, a
3234  0F5A  5E          	ld	e, (hl)
3235  0F5B  DD 6E FC    	ld	l,(ix-4)
3236  0F5E  DD 66 FD    	ld	h,(ix-3)
3237  0F61  6E          	ld	l, (hl)
3238  0F62  7B          	ld	a, e
3239  0F63  85          	add	a, l
3240  0F64  47          	ld	b, a
3241  0F65  D5          	push	de
3242  0F66  33          	inc	sp
3243  0F67  79          	ld	a, c
3244  0F68  48          	ld	c,b
3245  0F69  47          	ld	b,a
3246  0F6A  C5          	push	bc
3247  0F6B  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
3248  0F6E  FB          	ei
3249  0F6F  DD 6E FC    	ld	l,(ix-4)
3250  0F72  DD 66 FD    	ld	h,(ix-3)
3251  0F75  4E          	ld	c,(hl)
3252  0F76  0C          	inc	c
3253  0F77  71          	ld	(hl), c
3254  0F78  C3 15 10    	jp	l_spr_play_anim_00115
3255  0F7B              l_spr_play_anim_00109:
3256  0F7B  01 00 00    	ld	bc,_anim_loop
3257  0F7E  DD 6E F8    	ld	l,(ix-8)
3258  0F81  26 00       	ld	h,0x00
3259  0F83  09          	add	hl,bc
3260  0F84  DD 75 FA    	ld	(ix-6),l
3261  0F87  DD 74 FB    	ld	(ix-5),h
3262  0F8A  7E          	ld	a, (hl)
3263  0F8B  DD 77 F9    	ld	(ix-7),a
3264  0F8E  B7          	or	a, a
3265  0F8F  20 71       	jr	NZ,l_spr_play_anim_00106
3266  0F91  21 00 00    	ld	hl,_anim_count
3267  0F94  35          	dec	(hl)
3268  0F95  3E 00       	ld	a, +((_anim_col) & 0xFF)
3269  0F97  DD 86 F8    	add	a,(ix-8)
3270  0F9A  6F          	ld	l, a
3271  0F9B  3E 00       	ld	a, +((_anim_col) / 256)
3272  0F9D  CE 00       	adc	a,0x00
3273  0F9F  67          	ld	h, a
3274  0FA0  7E          	ld	a, (hl)
3275  0FA1  32 00 00    	ld	(_s_col0),a
3276  0FA4  DD 6E FE    	ld	l,(ix-2)
3277  0FA7  DD 66 FF    	ld	h,(ix-1)
3278  0FAA  7E          	ld	a, (hl)
3279  0FAB  32 00 00    	ld	(_s_lin0),a
3280  0FAE  2A FF FF    	ld	hl,(_s_col0 - 1)
3281  0FB1  6F          	ld	l,a
3282  0FB2  E5          	push	hl
3283  0FB3  CD 00 00    	call	_spr_calc_index
3284  0FB6  F1          	pop	af
3285  0FB7  2A FF FF    	ld	hl,(_s_col0 - 1)
3286  0FBA  3A 00 00    	ld	a,(_s_lin0)
3287  0FBD  6F          	ld	l,a
3288  0FBE  E5          	push	hl
3289  0FBF  CD 00 00    	call	_spr_calc_index
3290  0FC2  F1          	pop	af
3291  0FC3  01 00 00    	ld	bc,_scr_map
3292  0FC6  09          	add	hl,bc
3293  0FC7  4E          	ld	c, (hl)
3294  0FC8  0C          	inc	c
3295  0FC9  20 12       	jr	NZ,l_spr_play_anim_00102
3296  0FCB  2A FF FF    	ld	hl,(_s_col0 - 1)
3297  0FCE  3A 00 00    	ld	a,(_s_lin0)
3298  0FD1  6F          	ld	l,a
3299  0FD2  E5          	push	hl
3300  0FD3  CD 00 00    	call	_spr_calc_index
3301  0FD6  F1          	pop	af
3302  0FD7  01 00 00    	ld	bc,_scr_map
3303  0FDA  09          	add	hl,bc
3304  0FDB  36 00       	ld	(hl),0x00
3305  0FDD              l_spr_play_anim_00102:
3306  0FDD  CD 5B 0C    	call	_spr_back_repaint
3307  0FE0  3E 00       	ld	a, +((_anim_respanwn) & 0xFF)
3308  0FE2  DD 86 F8    	add	a,(ix-8)
3309  0FE5  4F          	ld	c, a
3310  0FE6  3E 00       	ld	a, +((_anim_respanwn) / 256)
3311  0FE8  CE 00       	adc	a,0x00
3312  0FEA  47          	ld	b, a
3313  0FEB  0A          	ld	a, (bc)
3314  0FEC  B7          	or	a, a
3315  0FED  28 09       	jr	Z,l_spr_play_anim_00104
3316  0FEF  DD 7E F8    	ld	a,(ix-8)
3317  0FF2  F5          	push	af
3318  0FF3  33          	inc	sp
3319  0FF4  CD 00 00    	call	_enemy_respawn
3320  0FF7  33          	inc	sp
3321  0FF8              l_spr_play_anim_00104:
3322  0FF8  DD 6E FE    	ld	l,(ix-2)
3323  0FFB  DD 66 FF    	ld	h,(ix-1)
3324  0FFE  36 FF       	ld	(hl),0xff
3325  1000  18 13       	jr	l_spr_play_anim_00115
3326  1002              l_spr_play_anim_00106:
3327  1002  DD 4E F9    	ld	c,(ix-7)
3328  1005  0D          	dec	c
3329  1006  DD 6E FA    	ld	l,(ix-6)
3330  1009  DD 66 FB    	ld	h,(ix-5)
3331  100C  71          	ld	(hl), c
3332  100D  DD 6E FC    	ld	l,(ix-4)
3333  1010  DD 66 FD    	ld	h,(ix-3)
3334  1013  36 00       	ld	(hl),0x00
3335  1015              l_spr_play_anim_00115:
3336  1015  DD 34 F8    	inc	(ix-8)
3337  1018  DD 7E F8    	ld	a,(ix-8)
3338  101B  D6 08       	sub	a,0x08
3339  101D  DA 01 0F    	jp	C, l_spr_play_anim_00114
3340  1020  DD F9       	ld	sp, ix
3341  1022  DD E1       	pop	ix
3342  1024  C9          	ret
3343  1025              	SECTION code_compiler
3344  1025              ;	---------------------------------
3345  1025              ; Function spr_play_bullets
3346  1025              ; ---------------------------------
3347  1025              _spr_play_bullets:
3348  1025  CD 00 00    	call	___sdcc_enter_ix
3349  1028  21 F1 FF    	ld	hl, -15
3350  102B  39          	add	hl, sp
3351  102C  F9          	ld	sp, hl
3352  102D  3E 00       	ld	a,0x00
3353  102F  DD 77 FF    	ld	(ix-1),a
3354  1032  DD 77 F5    	ld	(ix-11),a
3355  1035              l_spr_play_bullets_00195:
3356  1035  01 00 00    	ld	bc,_bullet_col
3357  1038  DD 6E F5    	ld	l,(ix-11)
3358  103B  26 00       	ld	h,0x00
3359  103D  09          	add	hl,bc
3360  103E  DD 75 FD    	ld	(ix-3),l
3361  1041  DD 74 FE    	ld	(ix-2),h
3362  1044  7E          	ld	a, (hl)
3363  1045  DD 77 FC    	ld	(ix-4),a
3364  1048  3C          	inc	a
3365  1049  CA D3 15    	jp	Z,l_spr_play_bullets_00189
3366  104C  01 00 00    	ld	bc,_bullet_lin
3367  104F  DD 6E F5    	ld	l,(ix-11)
3368  1052  26 00       	ld	h,0x00
3369  1054  09          	add	hl,bc
3370  1055  DD 75 FA    	ld	(ix-6),l
3371  1058  DD 74 FB    	ld	(ix-5),h
3372  105B  7E          	ld	a, (hl)
3373  105C  32 00 00    	ld	(_s_lin0),a
3374  105F  DD 7E FC    	ld	a,(ix-4)
3375  1062  32 00 00    	ld	(_s_col0),a
3376  1065  DD 77 F2    	ld	(ix-14),a
3377  1068  CD 5B 0C    	call	_spr_back_repaint
3378  106B  01 00 00    	ld	bc,_bullet_class
3379  106E  DD 6E F5    	ld	l,(ix-11)
3380  1071  26 00       	ld	h,0x00
3381  1073  09          	add	hl,bc
3382  1074  DD 75 F8    	ld	(ix-8),l
3383  1077  DD 74 F9    	ld	(ix-7),h
3384  107A  7E          	ld	a, (hl)
3385  107B  D6 02       	sub	a,0x02
3386  107D  20 46       	jr	NZ,l_spr_play_bullets_00107
3387  107F  3A 00 00    	ld	a,(_s_lin0)
3388  1082  4F          	ld	c,a
3389  1083  06 00       	ld	b,0x00
3390  1085  3E 00       	ld	a, +((_bullet_lin0) & 0xFF)
3391  1087  DD 86 F5    	add	a,(ix-11)
3392  108A  6F          	ld	l, a
3393  108B  3E 00       	ld	a, +((_bullet_lin0) / 256)
3394  108D  CE 00       	adc	a,0x00
3395  108F  67          	ld	h, a
3396  1090  5E          	ld	e, (hl)
3397  1091  16 00       	ld	d,0x00
3398  1093  79          	ld	a, c
3399  1094  93          	sub	a, e
3400  1095  4F          	ld	c, a
3401  1096  78          	ld	a, b
3402  1097  9A          	sbc	a, d
3403  1098  47          	ld	b, a
3404  1099  3E 08       	ld	a,0x08
3405  109B  B9          	cp	a, c
3406  109C  3E 00       	ld	a,0x00
3407  109E  98          	sbc	a, b
3408  109F  E2 A4 10    	jp	PO, l_spr_play_bullets_00397
3409  10A2  EE 80       	xor	a,0x80
3410  10A4              l_spr_play_bullets_00397:
3411  10A4  FA BD 10    	jp	M, l_spr_play_bullets_00104
3412  10A7  DD 6E FA    	ld	l,(ix-6)
3413  10AA  DD 66 FB    	ld	h,(ix-5)
3414  10AD  4E          	ld	c, (hl)
3415  10AE  0C          	inc	c
3416  10AF  0C          	inc	c
3417  10B0  DD 6E FA    	ld	l,(ix-6)
3418  10B3  DD 66 FB    	ld	h,(ix-5)
3419  10B6  71          	ld	(hl), c
3420  10B7  21 00 00    	ld	hl,_s_lin0
3421  10BA  71          	ld	(hl), c
3422  10BB  18 08       	jr	l_spr_play_bullets_00107
3423  10BD              l_spr_play_bullets_00104:
3424  10BD  DD 6E F8    	ld	l,(ix-8)
3425  10C0  DD 66 F9    	ld	h,(ix-7)
3426  10C3  36 03       	ld	(hl),0x03
3427  10C5              l_spr_play_bullets_00107:
3428  10C5  DD 6E F8    	ld	l,(ix-8)
3429  10C8  DD 66 F9    	ld	h,(ix-7)
3430  10CB  7E          	ld	a, (hl)
3431  10CC  D6 03       	sub	a,0x03
3432  10CE  20 46       	jr	NZ,l_spr_play_bullets_00112
3433  10D0  3E 00       	ld	a, +((_bullet_lin0) & 0xFF)
3434  10D2  DD 86 F5    	add	a,(ix-11)
3435  10D5  6F          	ld	l, a
3436  10D6  3E 00       	ld	a, +((_bullet_lin0) / 256)
3437  10D8  CE 00       	adc	a,0x00
3438  10DA  67          	ld	h, a
3439  10DB  4E          	ld	c, (hl)
3440  10DC  06 00       	ld	b,0x00
3441  10DE  3A 00 00    	ld	a,(_s_lin0)
3442  10E1  5F          	ld	e,a
3443  10E2  16 00       	ld	d,0x00
3444  10E4  79          	ld	a, c
3445  10E5  93          	sub	a, e
3446  10E6  4F          	ld	c, a
3447  10E7  78          	ld	a, b
3448  10E8  9A          	sbc	a, d
3449  10E9  47          	ld	b, a
3450  10EA  3E 08       	ld	a,0x08
3451  10EC  B9          	cp	a, c
3452  10ED  3E 00       	ld	a,0x00
3453  10EF  98          	sbc	a, b
3454  10F0  E2 F5 10    	jp	PO, l_spr_play_bullets_00400
3455  10F3  EE 80       	xor	a,0x80
3456  10F5              l_spr_play_bullets_00400:
3457  10F5  FA 0E 11    	jp	M, l_spr_play_bullets_00109
3458  10F8  DD 6E FA    	ld	l,(ix-6)
3459  10FB  DD 66 FB    	ld	h,(ix-5)
3460  10FE  4E          	ld	c, (hl)
3461  10FF  0D          	dec	c
3462  1100  0D          	dec	c
3463  1101  DD 6E FA    	ld	l,(ix-6)
3464  1104  DD 66 FB    	ld	h,(ix-5)
3465  1107  71          	ld	(hl), c
3466  1108  21 00 00    	ld	hl,_s_lin0
3467  110B  71          	ld	(hl), c
3468  110C  18 08       	jr	l_spr_play_bullets_00112
3469  110E              l_spr_play_bullets_00109:
3470  110E  DD 6E F8    	ld	l,(ix-8)
3471  1111  DD 66 F9    	ld	h,(ix-7)
3472  1114  36 02       	ld	(hl),0x02
3473  1116              l_spr_play_bullets_00112:
3474  1116  DD 6E F8    	ld	l,(ix-8)
3475  1119  DD 66 F9    	ld	h,(ix-7)
3476  111C  7E          	ld	a, (hl)
3477  111D  D6 04       	sub	a,0x04
3478  111F  C2 A5 11    	jp	NZ,l_spr_play_bullets_00125
3479  1122  DD 6E FA    	ld	l,(ix-6)
3480  1125  DD 66 FB    	ld	h,(ix-5)
3481  1128  7E          	ld	a, (hl)
3482  1129  32 00 00    	ld	(_s_lin0),a
3483  112C  DD 6E FD    	ld	l,(ix-3)
3484  112F  DD 66 FE    	ld	h,(ix-2)
3485  1132  7E          	ld	a, (hl)
3486  1133  C6 FF       	add	a,0xff
3487  1135  32 00 00    	ld	(_s_col0),a
3488  1138  D6 20       	sub	a,0x20
3489  113A  30 03       	jr	NC,l_spr_play_bullets_00114
3490  113C  CD 5B 0C    	call	_spr_back_repaint
3491  113F              l_spr_play_bullets_00114:
3492  113F  3E 00       	ld	a, +((_bullet_vel) & 0xFF)
3493  1141  DD 86 F5    	add	a,(ix-11)
3494  1144  4F          	ld	c, a
3495  1145  3E 00       	ld	a, +((_bullet_vel) / 256)
3496  1147  CE 00       	adc	a,0x00
3497  1149  47          	ld	b, a
3498  114A  0A          	ld	a, (bc)
3499  114B  5F          	ld	e, a
3500  114C  21 00 00    	ld	hl,_game_gravity
3501  114F  56          	ld	d, (hl)
3502  1150  7B          	ld	a, e
3503  1151  82          	add	a, d
3504  1152  5F          	ld	e,a
3505  1153  02          	ld	(bc), a
3506  1154  3E 78       	ld	a,0x78
3507  1156  93          	sub	a, e
3508  1157  E2 5C 11    	jp	PO, l_spr_play_bullets_00403
3509  115A  EE 80       	xor	a,0x80
3510  115C              l_spr_play_bullets_00403:
3511  115C  F2 62 11    	jp	P, l_spr_play_bullets_00116
3512  115F  3E 78       	ld	a,0x78
3513  1161  02          	ld	(bc), a
3514  1162              l_spr_play_bullets_00116:
3515  1162  0A          	ld	a, (bc)
3516  1163  EE 80       	xor	a,0x80
3517  1165  D6 08       	sub	a,0x08
3518  1167  30 03       	jr	NC,l_spr_play_bullets_00118
3519  1169  3E 88       	ld	a,0x88
3520  116B  02          	ld	(bc), a
3521  116C              l_spr_play_bullets_00118:
3522  116C  0A          	ld	a, (bc)
3523  116D  CB 47       	bit	0,a
3524  116F  32 00 00    	ld	(_s_lin1),a
3525  1172  28 04       	jr	Z,l_spr_play_bullets_00120
3526  1174  21 00 00    	ld	hl,_s_lin1
3527  1177  35          	dec	(hl)
3528  1178              l_spr_play_bullets_00120:
3529  1178  DD 6E FA    	ld	l,(ix-6)
3530  117B  DD 66 FB    	ld	h,(ix-5)
3531  117E  7E          	ld	a, (hl)
3532  117F  21 00 00    	ld	hl,_s_lin1
3533  1182  86          	add	a, (hl)
3534  1183  21 00 00    	ld	hl,_s_lin0
3535  1186  77          	ld	(hl), a
3536  1187  3E 90       	ld	a,0x90
3537  1189  96          	sub	a, (hl)
3538  118A  30 0F       	jr	NC,l_spr_play_bullets_00122
3539  118C  21 00 00    	ld	hl,_bullet_count
3540  118F  35          	dec	(hl)
3541  1190  DD 6E FD    	ld	l,(ix-3)
3542  1193  DD 66 FE    	ld	h,(ix-2)
3543  1196  36 FF       	ld	(hl),0xff
3544  1198  C3 D3 15    	jp	l_spr_play_bullets_00189
3545  119B              l_spr_play_bullets_00122:
3546  119B  DD 6E FA    	ld	l,(ix-6)
3547  119E  DD 66 FB    	ld	h,(ix-5)
3548  11A1  3A 00 00    	ld	a,(_s_lin0)
3549  11A4  77          	ld	(hl),a
3550  11A5              l_spr_play_bullets_00125:
3551  11A5  3E 00       	ld	a, +((_bullet_dir) & 0xFF)
3552  11A7  DD 86 F5    	add	a,(ix-11)
3553  11AA  6F          	ld	l, a
3554  11AB  3E 00       	ld	a, +((_bullet_dir) / 256)
3555  11AD  CE 00       	adc	a,0x00
3556  11AF  67          	ld	h, a
3557  11B0  4E          	ld	c, (hl)
3558  11B1  0C          	inc	c
3559  11B2  20 3D       	jr	NZ,l_spr_play_bullets_00135
3560  11B4  3E 00       	ld	a, +((_bullet_colint) & 0xFF)
3561  11B6  DD 86 F5    	add	a,(ix-11)
3562  11B9  4F          	ld	c, a
3563  11BA  3E 00       	ld	a, +((_bullet_colint) / 256)
3564  11BC  CE 00       	adc	a,0x00
3565  11BE  47          	ld	b, a
3566  11BF  0A          	ld	a, (bc)
3567  11C0  3C          	inc	a
3568  11C1  5F          	ld	e,a
3569  11C2  02          	ld	(bc), a
3570  11C3  3E 00       	ld	a, +((_bullet_frames) & 0xFF)
3571  11C5  DD 86 F5    	add	a,(ix-11)
3572  11C8  6F          	ld	l, a
3573  11C9  3E 00       	ld	a, +((_bullet_frames) / 256)
3574  11CB  CE 00       	adc	a,0x00
3575  11CD  67          	ld	h, a
3576  11CE  56          	ld	d, (hl)
3577  11CF  7B          	ld	a, e
3578  11D0  92          	sub	a, d
3579  11D1  38 63       	jr	C,l_spr_play_bullets_00136
3580  11D3  DD 6E FD    	ld	l,(ix-3)
3581  11D6  DD 66 FE    	ld	h,(ix-2)
3582  11D9  7E          	ld	a, (hl)
3583  11DA  3C          	inc	a
3584  11DB  DD 77 F2    	ld	(ix-14),a
3585  11DE  AF          	xor	a, a
3586  11DF  02          	ld	(bc), a
3587  11E0  DD 7E F2    	ld	a,(ix-14)
3588  11E3  E6 01       	and	a,0x01
3589  11E5  3D          	dec	a
3590  11E6  20 4E       	jr	NZ,l_spr_play_bullets_00136
3591  11E8  DD 7E F2    	ld	a,(ix-14)
3592  11EB  3C          	inc	a
3593  11EC  32 00 00    	ld	(_s_col0),a
3594  11EF  18 45       	jr	l_spr_play_bullets_00136
3595  11F1              l_spr_play_bullets_00135:
3596  11F1  01 00 00    	ld	bc,_bullet_colint
3597  11F4  DD 6E F5    	ld	l,(ix-11)
3598  11F7  26 00       	ld	h,0x00
3599  11F9  09          	add	hl,bc
3600  11FA  DD 75 F6    	ld	(ix-10),l
3601  11FD  DD 74 F7    	ld	(ix-9),h
3602  1200  4E          	ld	c,(hl)
3603  1201  0D          	dec	c
3604  1202  71          	ld	(hl), c
3605  1203  0C          	inc	c
3606  1204  20 30       	jr	NZ,l_spr_play_bullets_00136
3607  1206  DD 6E FD    	ld	l,(ix-3)
3608  1209  DD 66 FE    	ld	h,(ix-2)
3609  120C  7E          	ld	a, (hl)
3610  120D  C6 FF       	add	a,0xff
3611  120F  DD 77 F2    	ld	(ix-14),a
3612  1212  3E 00       	ld	a, +((_bullet_frames) & 0xFF)
3613  1214  DD 86 F5    	add	a,(ix-11)
3614  1217  6F          	ld	l, a
3615  1218  3E 00       	ld	a, +((_bullet_frames) / 256)
3616  121A  CE 00       	adc	a,0x00
3617  121C  67          	ld	h, a
3618  121D  4E          	ld	c, (hl)
3619  121E  0D          	dec	c
3620  121F  DD 6E F6    	ld	l,(ix-10)
3621  1222  DD 66 F7    	ld	h,(ix-9)
3622  1225  71          	ld	(hl), c
3623  1226  DD 7E F2    	ld	a,(ix-14)
3624  1229  E6 01       	and	a,0x01
3625  122B  3D          	dec	a
3626  122C  20 08       	jr	NZ,l_spr_play_bullets_00136
3627  122E  DD 7E F2    	ld	a,(ix-14)
3628  1231  C6 FF       	add	a,0xff
3629  1233  32 00 00    	ld	(_s_col0),a
3630  1236              l_spr_play_bullets_00136:
3631  1236  21 00 00    	ld	hl,_tmp1
3632  1239  36 00       	ld	(hl),0x00
3633  123B  3E 00       	ld	a, +((_bullet_max) & 0xFF)
3634  123D  DD 86 F5    	add	a,(ix-11)
3635  1240  4F          	ld	c, a
3636  1241  3E 00       	ld	a, +((_bullet_max) / 256)
3637  1243  CE 00       	adc	a,0x00
3638  1245  47          	ld	b, a
3639  1246  0A          	ld	a, (bc)
3640  1247  B7          	or	a, a
3641  1248  28 27       	jr	Z,l_spr_play_bullets_00140
3642  124A  DD 5E F2    	ld	e,(ix-14)
3643  124D  16 00       	ld	d,0x00
3644  124F  3E 00       	ld	a, +((_bullet_col0) & 0xFF)
3645  1251  DD 86 F5    	add	a,(ix-11)
3646  1254  6F          	ld	l, a
3647  1255  3E 00       	ld	a, +((_bullet_col0) / 256)
3648  1257  CE 00       	adc	a,0x00
3649  1259  67          	ld	h, a
3650  125A  6E          	ld	l, (hl)
3651  125B  AF          	xor	a,a
3652  125C  67          	ld	h,a
3653  125D  EB          	ex	de,hl
3654  125E  ED 52       	sbc	hl,de
3655  1260  CD 00 00    	call	_abs_fastcall
3656  1263  5D          	ld	e, l
3657  1264  21 00 00    	ld	hl,_tmp0
3658  1267  73          	ld	(hl), e
3659  1268  0A          	ld	a, (bc)
3660  1269  96          	sub	a, (hl)
3661  126A  30 05       	jr	NC,l_spr_play_bullets_00140
3662  126C  21 00 00    	ld	hl,_tmp1
3663  126F  36 01       	ld	(hl),0x01
3664  1271              l_spr_play_bullets_00140:
3665  1271  DD 7E F2    	ld	a,(ix-14)
3666  1274  D6 1E       	sub	a,0x1e
3667  1276  38 05       	jr	C,l_spr_play_bullets_00142
3668  1278  21 00 00    	ld	hl,_tmp1
3669  127B  36 01       	ld	(hl),0x01
3670  127D              l_spr_play_bullets_00142:
3671  127D  3A 00 00    	ld	a,(_tmp1)
3672  1280  B7          	or	a, a
3673  1281  28 0F       	jr	Z,l_spr_play_bullets_00144
3674  1283  21 00 00    	ld	hl,_bullet_count
3675  1286  35          	dec	(hl)
3676  1287  DD 6E FD    	ld	l,(ix-3)
3677  128A  DD 66 FE    	ld	h,(ix-2)
3678  128D  36 FF       	ld	(hl),0xff
3679  128F  C3 D3 15    	jp	l_spr_play_bullets_00189
3680  1292              l_spr_play_bullets_00144:
3681  1292  DD 7E FD    	ld	a,(ix-3)
3682  1295  DD 77 F6    	ld	(ix-10),a
3683  1298  DD 7E FE    	ld	a,(ix-2)
3684  129B  DD 77 F7    	ld	(ix-9),a
3685  129E  DD 6E FD    	ld	l,(ix-3)
3686  12A1  DD 66 FE    	ld	h,(ix-2)
3687  12A4  DD 7E F2    	ld	a,(ix-14)
3688  12A7  96          	sub	a,(hl)
3689  12A8  CA 97 15    	jp	Z,l_spr_play_bullets_00184
3690  12AB  3A 00 00    	ld	a,(_s_lin0)
3691  12AE  C6 08       	add	a,0x08
3692  12B0  4F          	ld	c, a
3693  12B1  3A 00 00    	ld	a, (_s_col0)
3694  12B4  47          	ld	b,a
3695  12B5  C5          	push	bc
3696  12B6  CD 00 00    	call	_spr_calc_index
3697  12B9  F1          	pop	af
3698  12BA  22 00 00    	ld	(_index0),hl
3699  12BD  11 00 00    	ld	de,_scr_map
3700  12C0  19          	add	hl,de
3701  12C1  5E          	ld	e, (hl)
3702  12C2  EB          	ex	de,hl
3703  12C3  DD 7E F5    	ld	a,(ix-11)
3704  12C6  D6 07       	sub	a,0x07
3705  12C8  20 04       	jr	NZ,l_spr_play_bullets_00414
3706  12CA  3E 01       	ld	a,0x01
3707  12CC  18 01       	jr	l_spr_play_bullets_00415
3708  12CE              l_spr_play_bullets_00414:
3709  12CE  AF          	xor	a,a
3710  12CF              l_spr_play_bullets_00415:
3711  12CF  4F          	ld	c, a
3712  12D0  7D          	ld	a, l
3713  12D1  D6 4D       	sub	a,0x4d
3714  12D3  20 3D       	jr	NZ,l_spr_play_bullets_00146
3715  12D5  B1          	or	a,c
3716  12D6  28 3A       	jr	Z,l_spr_play_bullets_00146
3717  12D8  AF          	xor	a, a
3718  12D9  12          	ld	(de), a
3719  12DA  2A 00 00    	ld	hl,(_index0)
3720  12DD  E5          	push	hl
3721  12DE  CD 00 00    	call	_game_obj_set
3722  12E1  F1          	pop	af
3723  12E2  2A 00 00    	ld	hl,(_index0)
3724  12E5  4D          	ld	c,l
3725  12E6  5C          	ld	e,h
3726  12E7  06 04       	ld	b,0x04
3727  12E9  79          	ld	a,c
3728  12EA              l_spr_play_bullets_00418:
3729  12EA  CB 3B       	srl	e
3730  12EC  1F          	rra
3731  12ED  10 FB       	djnz	l_spr_play_bullets_00418
3732  12EF  07          	rlca
3733  12F0  07          	rlca
3734  12F1  07          	rlca
3735  12F2  07          	rlca
3736  12F3  E6 F0       	and	a,0xf0
3737  12F5  DD 6E FA    	ld	l,(ix-6)
3738  12F8  DD 66 FB    	ld	h,(ix-5)
3739  12FB  77          	ld	(hl), a
3740  12FC  3A 00 00    	ld	a,(_index0)
3741  12FF  E6 0F       	and	a,0x0f
3742  1301  87          	add	a, a
3743  1302  DD 6E FD    	ld	l,(ix-3)
3744  1305  DD 66 FE    	ld	h,(ix-2)
3745  1308  77          	ld	(hl), a
3746  1309  DD 6E F5    	ld	l,(ix-11)
3747  130C  CD E6 15    	call	_spr_explode_bullet
3748  130F  C3 D3 15    	jp	l_spr_play_bullets_00189
3749  1312              l_spr_play_bullets_00146:
3750  1312  7D          	ld	a, l
3751  1313  D6 48       	sub	a,0x48
3752  1315  38 0C       	jr	C,l_spr_play_bullets_00149
3753  1317  2C          	inc	l
3754  1318  28 09       	jr	Z,l_spr_play_bullets_00149
3755  131A  DD 6E F5    	ld	l,(ix-11)
3756  131D  CD E6 15    	call	_spr_explode_bullet
3757  1320  C3 D3 15    	jp	l_spr_play_bullets_00189
3758  1323              l_spr_play_bullets_00149:
3759  1323  DD 6E FD    	ld	l,(ix-3)
3760  1326  DD 66 FE    	ld	h,(ix-2)
3761  1329  DD 7E F2    	ld	a,(ix-14)
3762  132C  77          	ld	(hl), a
3763  132D  DD 6E F8    	ld	l,(ix-8)
3764  1330  DD 66 F9    	ld	h,(ix-7)
3765  1333  7E          	ld	a, (hl)
3766  1334  D6 04       	sub	a,0x04
3767  1336  20 1B       	jr	NZ,l_spr_play_bullets_00152
3768  1338  21 00 00    	ld	hl,_s_lin0
3769  133B  7E          	ld	a, (hl)
3770  133C  C6 F0       	add	a,0xf0
3771  133E  DD 77 F4    	ld	(ix-12),a
3772  1341  7E          	ld	a, (hl)
3773  1342  C6 10       	add	a,0x10
3774  1344  DD 77 F1    	ld	(ix-15),a
3775  1347  DD 35 F2    	dec	(ix-14)
3776  134A  DD 7E F2    	ld	a,(ix-14)
3777  134D  3C          	inc	a
3778  134E  DD 77 F3    	ld	(ix-13),a
3779  1351  18 16       	jr	l_spr_play_bullets_00153
3780  1353              l_spr_play_bullets_00152:
3781  1353  21 00 00    	ld	hl,_s_lin0
3782  1356  7E          	ld	a, (hl)
3783  1357  C6 F8       	add	a,0xf8
3784  1359  DD 77 F4    	ld	(ix-12),a
3785  135C  7E          	ld	a, (hl)
3786  135D  C6 08       	add	a,0x08
3787  135F  DD 77 F1    	ld	(ix-15),a
3788  1362  DD 7E F2    	ld	a,(ix-14)
3789  1365  3C          	inc	a
3790  1366  DD 77 F3    	ld	(ix-13),a
3791  1369              l_spr_play_bullets_00153:
3792  1369  79          	ld	a, c
3793  136A  B7          	or	a, a
3794  136B  CA 5D 15    	jp	Z, l_spr_play_bullets_00181
3795  136E  21 00 00    	ld	hl,_tmp0
3796  1371  36 00       	ld	(hl),0x00
3797  1373              l_spr_play_bullets_00191:
3798  1373  2A 00 00    	ld	hl,(_tmp0)
3799  1376  26 00       	ld	h,0x00
3800  1378  01 00 00    	ld	bc,_class
3801  137B  09          	add	hl,bc
3802  137C  7E          	ld	a,(hl)
3803  137D  B7          	or	a,a
3804  137E  CA 2A 14    	jp	Z,l_spr_play_bullets_00192
3805  1381  2A 00 00    	ld	hl,(_tmp0)
3806  1384  26 00       	ld	h,0x00
3807  1386  01 00 00    	ld	bc,_lin
3808  1389  09          	add	hl,bc
3809  138A  7E          	ld	a,(hl)
3810  138B  47          	ld	b,a
3811  138C  21 00 00    	ld	hl,_tmp0
3812  138F  DD 96 F4    	sub	a,(ix-12)
3813  1392  DA 2A 14    	jp	C, l_spr_play_bullets_00192
3814  1395  DD 7E F1    	ld	a,(ix-15)
3815  1398  90          	sub	a, b
3816  1399  DA 2A 14    	jp	C, l_spr_play_bullets_00192
3817  139C  5E          	ld	e,(hl)
3818  139D  16 00       	ld	d,0x00
3819  139F  21 00 00    	ld	hl,_col
3820  13A2  19          	add	hl,de
3821  13A3  7E          	ld	a,(hl)
3822  13A4  4F          	ld	c,a
3823  13A5  DD 96 F2    	sub	a,(ix-14)
3824  13A8  DA 2A 14    	jp	C, l_spr_play_bullets_00192
3825  13AB  DD 7E F3    	ld	a,(ix-13)
3826  13AE  91          	sub	a, c
3827  13AF  38 79       	jr	C,l_spr_play_bullets_00192
3828  13B1  21 00 00    	ld	hl,_s_lin0
3829  13B4  70          	ld	(hl), b
3830  13B5  21 00 00    	ld	hl,_s_col0
3831  13B8  71          	ld	(hl), c
3832  13B9  CD 00 00    	call	_rand
3833  13BC  01 06 00    	ld	bc,0x0006
3834  13BF  C5          	push	bc
3835  13C0  E5          	push	hl
3836  13C1  CD 00 00    	call	__modsint_callee
3837  13C4  CD 00 00    	call	_player_score_add
3838  13C7  2A 00 00    	ld	hl,(_tmp0)
3839  13CA  26 00       	ld	h,0x00
3840  13CC  29          	add	hl,hl
3841  13CD  01 00 00    	ld	bc,_game_respawn_time
3842  13D0  09          	add	hl,bc
3843  13D1  ED 5B 00 00 	ld	de,(_curr_time)
3844  13D5  73          	ld	(hl),e
3845  13D6  23          	inc	hl
3846  13D7  72          	ld	(hl),d
3847  13D8  2A 00 00    	ld	hl,(_tmp0)
3848  13DB  CD BC 08    	call	_spr_destroy
3849  13DE  2A 00 00    	ld	hl,(_tmp0)
3850  13E1  26 00       	ld	h,0x00
3851  13E3  01 00 00    	ld	bc,_bullet_col
3852  13E6  09          	add	hl,bc
3853  13E7  7E          	ld	a,(hl)
3854  13E8  21 00 00    	ld	hl,_tmp0
3855  13EB  DD 77 F8    	ld	(ix-8),a
3856  13EE  3C          	inc	a
3857  13EF  28 27       	jr	Z,l_spr_play_bullets_00155
3858  13F1  3E 00       	ld	a, +((_bullet_lin) & 0xFF)
3859  13F3  86          	add	a, (hl)
3860  13F4  DD 77 FA    	ld	(ix-6),a
3861  13F7  6F          	ld	l,a
3862  13F8  3E 00       	ld	a,+((_bullet_lin) / 256)
3863  13FA  CE 00       	adc	a,0x00
3864  13FC  DD 77 FB    	ld	(ix-5),a
3865  13FF  67          	ld	h,a
3866  1400  7E          	ld	a, (hl)
3867  1401  32 00 00    	ld	(_s_lin0),a
3868  1404  DD 7E F8    	ld	a,(ix-8)
3869  1407  32 00 00    	ld	(_s_col0),a
3870  140A  CD 5B 0C    	call	_spr_back_repaint
3871  140D  2A 00 00    	ld	hl,(_tmp0)
3872  1410  26 00       	ld	h,0x00
3873  1412  01 00 00    	ld	bc,_bullet_col
3874  1415  09          	add	hl,bc
3875  1416  36 FF       	ld	(hl),0xff
3876  1418              l_spr_play_bullets_00155:
3877  1418  DD 6E F6    	ld	l,(ix-10)
3878  141B  DD 66 F7    	ld	h,(ix-9)
3879  141E  3A 00 00    	ld	a,(_s_col0)
3880  1421  77          	ld	(hl),a
3881  1422  DD 6E F5    	ld	l,(ix-11)
3882  1425  CD E6 15    	call	_spr_explode_bullet
3883  1428  18 0B       	jr	l_spr_play_bullets_00162
3884  142A              l_spr_play_bullets_00192:
3885  142A  21 00 00    	ld	hl,_tmp0
3886  142D  7E          	ld	a,(hl)
3887  142E  3C          	inc	a
3888  142F  77          	ld	(hl),a
3889  1430  D6 07       	sub	a,0x07
3890  1432  DA 73 13    	jp	C, l_spr_play_bullets_00191
3891  1435              l_spr_play_bullets_00162:
3892  1435  3A 00 00    	ld	a,(_game_boss)
3893  1438  B7          	or	a, a
3894  1439  CA 97 15    	jp	Z, l_spr_play_bullets_00184
3895  143C  21 00 00    	ld	hl,_boss_lin
3896  143F  7E          	ld	a, (hl)
3897  1440  DD 96 F4    	sub	a,(ix-12)
3898  1443  38 06       	jr	C,l_spr_play_bullets_00170
3899  1445  DD 7E F1    	ld	a,(ix-15)
3900  1448  96          	sub	a, (hl)
3901  1449  30 2A       	jr	NC,l_spr_play_bullets_00171
3902  144B              l_spr_play_bullets_00170:
3903  144B  2A 00 00    	ld	hl,(_boss_lin)
3904  144E  26 00       	ld	h,0x00
3905  1450  01 10 00    	ld	bc,0x0010
3906  1453  09          	add	hl,bc
3907  1454  DD 4E F4    	ld	c,(ix-12)
3908  1457  06 00       	ld	b,0x00
3909  1459  7D          	ld	a, l
3910  145A  91          	sub	a, c
3911  145B  7C          	ld	a, h
3912  145C  98          	sbc	a, b
3913  145D  E2 62 14    	jp	PO, l_spr_play_bullets_00425
3914  1460  EE 80       	xor	a,0x80
3915  1462              l_spr_play_bullets_00425:
3916  1462  FA 97 15    	jp	M, l_spr_play_bullets_00184
3917  1465  DD 7E F1    	ld	a,(ix-15)
3918  1468  06 00       	ld	b,0x00
3919  146A  95          	sub	a, l
3920  146B  78          	ld	a, b
3921  146C  9C          	sbc	a, h
3922  146D  E2 72 14    	jp	PO, l_spr_play_bullets_00426
3923  1470  EE 80       	xor	a,0x80
3924  1472              l_spr_play_bullets_00426:
3925  1472  FA 97 15    	jp	M, l_spr_play_bullets_00184
3926  1475              l_spr_play_bullets_00171:
3927  1475  21 00 00    	ld	hl,_boss_col
3928  1478  7E          	ld	a, (hl)
3929  1479  DD 96 F2    	sub	a,(ix-14)
3930  147C  DA 97 15    	jp	C, l_spr_play_bullets_00184
3931  147F  DD 7E F3    	ld	a,(ix-13)
3932  1482  96          	sub	a, (hl)
3933  1483  DA 97 15    	jp	C, l_spr_play_bullets_00184
3934  1486  DD 6E F5    	ld	l,(ix-11)
3935  1489  CD E6 15    	call	_spr_explode_bullet
3936  148C  21 00 00    	ld	hl,_game_boss_hit
3937  148F  35          	dec	(hl)
3938  1490  CD 00 00    	call	_game_update_stats
3939  1493  3A 00 00    	ld	a,(_game_boss_hit)
3940  1496  B7          	or	a, a
3941  1497  C2 97 15    	jp	NZ, l_spr_play_bullets_00184
3942  149A  21 00 00    	ld	hl,_game_boss
3943  149D  36 00       	ld	(hl),0x00
3944  149F  21 00 00    	ld	hl,_game_boss_alive
3945  14A2  36 00       	ld	(hl),0x00
3946  14A4  3A 00 00    	ld	a,(_boss_col)
3947  14A7  21 00 00    	ld	hl,0x0000
3948  14AA  E5          	push	hl
3949  14AB  21 87 03    	ld	hl,0x0387
3950  14AE  E5          	push	hl
3951  14AF  F5          	push	af
3952  14B0  33          	inc	sp
3953  14B1  3A 00 00    	ld	a,(_boss_lin)
3954  14B4  F5          	push	af
3955  14B5  33          	inc	sp
3956  14B6  CD 27 0E    	call	_spr_add_anim
3957  14B9  F1          	pop	af
3958  14BA  F1          	pop	af
3959  14BB  F1          	pop	af
3960  14BC  21 00 00    	ld	hl,_boss_col
3961  14BF  46          	ld	b, (hl)
3962  14C0  04          	inc	b
3963  14C1  04          	inc	b
3964  14C2  21 00 00    	ld	hl,0x0000
3965  14C5  E5          	push	hl
3966  14C6  21 87 03    	ld	hl,0x0387
3967  14C9  E5          	push	hl
3968  14CA  C5          	push	bc
3969  14CB  33          	inc	sp
3970  14CC  3A 00 00    	ld	a,(_boss_lin)
3971  14CF  F5          	push	af
3972  14D0  33          	inc	sp
3973  14D1  CD 27 0E    	call	_spr_add_anim
3974  14D4  F1          	pop	af
3975  14D5  F1          	pop	af
3976  14D6  F1          	pop	af
3977  14D7  3A 00 00    	ld	a,(_boss_lin)
3978  14DA  C6 10       	add	a,0x10
3979  14DC  47          	ld	b, a
3980  14DD  3A 00 00    	ld	a,(_boss_col)
3981  14E0  21 00 00    	ld	hl,0x0000
3982  14E3  E5          	push	hl
3983  14E4  21 87 03    	ld	hl,0x0387
3984  14E7  E5          	push	hl
3985  14E8  48          	ld	c,b
3986  14E9  47          	ld	b,a
3987  14EA  C5          	push	bc
3988  14EB  CD 27 0E    	call	_spr_add_anim
3989  14EE  F1          	pop	af
3990  14EF  F1          	pop	af
3991  14F0  F1          	pop	af
3992  14F1  21 00 00    	ld	hl,_boss_col
3993  14F4  46          	ld	b, (hl)
3994  14F5  04          	inc	b
3995  14F6  04          	inc	b
3996  14F7  3A 00 00    	ld	a,(_boss_lin)
3997  14FA  C6 10       	add	a,0x10
3998  14FC  57          	ld	d, a
3999  14FD  21 00 00    	ld	hl,0x0000
4000  1500  E5          	push	hl
4001  1501  21 87 03    	ld	hl,0x0387
4002  1504  E5          	push	hl
4003  1505  4A          	ld	c, d
4004  1506  C5          	push	bc
4005  1507  CD 27 0E    	call	_spr_add_anim
4006  150A  F1          	pop	af
4007  150B  F1          	pop	af
4008  150C  F1          	pop	af
4009  150D  21 00 00    	ld	hl,_tmp0
4010  1510  36 00       	ld	(hl),0x00
4011  1512              l_spr_play_bullets_00193:
4012  1512  2A 00 00    	ld	hl,(_tmp0)
4013  1515  CD BC 08    	call	_spr_destroy
4014  1518  2A 00 00    	ld	hl,(_tmp0)
4015  151B  26 00       	ld	h,0x00
4016  151D  29          	add	hl, hl
4017  151E  11 00 00    	ld	de,_game_respawn_time
4018  1521  19          	add	hl, de
4019  1522  AF          	xor	a, a
4020  1523  77          	ld	(hl), a
4021  1524  23          	inc	hl
4022  1525  77          	ld	(hl), a
4023  1526  2A 00 00    	ld	hl,(_tmp0)
4024  1529  26 00       	ld	h,0x00
4025  152B  01 00 00    	ld	bc,_bullet_lin
4026  152E  09          	add	hl,bc
4027  152F  7E          	ld	a,(hl)
4028  1530  32 00 00    	ld	(_s_lin0),a
4029  1533  2A 00 00    	ld	hl,(_tmp0)
4030  1536  26 00       	ld	h,0x00
4031  1538  01 00 00    	ld	bc,_bullet_col
4032  153B  09          	add	hl,bc
4033  153C  7E          	ld	a,(hl)
4034  153D  32 00 00    	ld	(_s_col0),a
4035  1540  CD 5B 0C    	call	_spr_back_repaint
4036  1543  2A 00 00    	ld	hl,(_tmp0)
4037  1546  26 00       	ld	h,0x00
4038  1548  01 00 00    	ld	bc,_bullet_col
4039  154B  09          	add	hl,bc
4040  154C  36 FF       	ld	(hl),0xff
4041  154E  21 00 00    	ld	hl,_tmp0
4042  1551  7E          	ld	a,(hl)
4043  1552  3C          	inc	a
4044  1553  77          	ld	(hl),a
4045  1554  D6 07       	sub	a,0x07
4046  1556  38 BA       	jr	C,l_spr_play_bullets_00193
4047  1558  CD 00 00    	call	_game_boss_clear
4048  155B  18 3A       	jr	l_spr_play_bullets_00184
4049  155D              l_spr_play_bullets_00181:
4050  155D  3A 07 00    	ld	a,(_lin + 7)
4051  1560  4F          	ld	c,a
4052  1561  DD 96 F4    	sub	a,(ix-12)
4053  1564  38 31       	jr	C,l_spr_play_bullets_00184
4054  1566  DD 7E F1    	ld	a,(ix-15)
4055  1569  91          	sub	a, c
4056  156A  38 2B       	jr	C,l_spr_play_bullets_00184
4057  156C  3A 07 00    	ld	a,(_col + 7)
4058  156F  4F          	ld	c,a
4059  1570  DD 96 F2    	sub	a,(ix-14)
4060  1573  38 22       	jr	C,l_spr_play_bullets_00184
4061  1575  DD 7E F3    	ld	a,(ix-13)
4062  1578  91          	sub	a, c
4063  1579  38 1C       	jr	C,l_spr_play_bullets_00184
4064  157B  2E 03       	ld	l,0x03
4065  157D  CD 00 00    	call	_zx_border_fastcall
4066  1580  2E 0A       	ld	l,0x0a
4067  1582  CD 00 00    	call	_player_hit
4068  1585  DD 6E FD    	ld	l,(ix-3)
4069  1588  DD 66 FE    	ld	h,(ix-2)
4070  158B  3A 00 00    	ld	a,(_s_col0)
4071  158E  77          	ld	(hl),a
4072  158F  DD 6E FF    	ld	l,(ix-1)
4073  1592  CD E6 15    	call	_spr_explode_bullet
4074  1595  18 4A       	jr	l_spr_play_bullets_00196
4075  1597              l_spr_play_bullets_00184:
4076  1597  DD 6E F6    	ld	l,(ix-10)
4077  159A  DD 66 F7    	ld	h,(ix-9)
4078  159D  4E          	ld	c, (hl)
4079  159E  0C          	inc	c
4080  159F  28 32       	jr	Z,l_spr_play_bullets_00189
4081  15A1  DD 7E F2    	ld	a,(ix-14)
4082  15A4  D6 20       	sub	a,0x20
4083  15A6  30 2B       	jr	NC,l_spr_play_bullets_00189
4084  15A8  F3          	di
4085  15A9  3E 00       	ld	a, +((_bullet_tile) & 0xFF)
4086  15AB  DD 86 F5    	add	a,(ix-11)
4087  15AE  6F          	ld	l, a
4088  15AF  3E 00       	ld	a, +((_bullet_tile) / 256)
4089  15B1  CE 00       	adc	a,0x00
4090  15B3  67          	ld	h, a
4091  15B4  4E          	ld	c, (hl)
4092  15B5  3E 00       	ld	a, +((_bullet_colint) & 0xFF)
4093  15B7  DD 86 F5    	add	a,(ix-11)
4094  15BA  6F          	ld	l, a
4095  15BB  3E 00       	ld	a, +((_bullet_colint) / 256)
4096  15BD  CE 00       	adc	a,0x00
4097  15BF  67          	ld	h, a
4098  15C0  46          	ld	b, (hl)
4099  15C1  79          	ld	a, c
4100  15C2  80          	add	a, b
4101  15C3  47          	ld	b, a
4102  15C4  DD 7E F2    	ld	a,(ix-14)
4103  15C7  F5          	push	af
4104  15C8  33          	inc	sp
4105  15C9  3A 00 00    	ld	a,(_s_lin0)
4106  15CC  48          	ld	c,b
4107  15CD  47          	ld	b,a
4108  15CE  C5          	push	bc
4109  15CF  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
4110  15D2  FB          	ei
4111  15D3              l_spr_play_bullets_00189:
4112  15D3  DD 34 F5    	inc	(ix-11)
4113  15D6  DD 7E F5    	ld	a,(ix-11)
4114  15D9  DD 77 FF    	ld	(ix-1),a
4115  15DC  D6 08       	sub	a,0x08
4116  15DE  DA 35 10    	jp	C, l_spr_play_bullets_00195
4117  15E1              l_spr_play_bullets_00196:
4118  15E1  DD F9       	ld	sp, ix
4119  15E3  DD E1       	pop	ix
4120  15E5  C9          	ret
4121  15E6              	SECTION code_compiler
4122  15E6              ;	---------------------------------
4123  15E6              ; Function spr_explode_bullet
4124  15E6              ; ---------------------------------
4125  15E6              _spr_explode_bullet:
4126  15E6  5D          	ld	e, l
4127  15E7  3E 00       	ld	a, +((_bullet_col) & 0xFF)
4128  15E9  83          	add	a, e
4129  15EA  4F          	ld	c, a
4130  15EB  3E 00       	ld	a, +((_bullet_col) / 256)
4131  15ED  CE 00       	adc	a,0x00
4132  15EF  47          	ld	b, a
4133  15F0  0A          	ld	a, (bc)
4134  15F1  57          	ld	d, a
4135  15F2  3E 00       	ld	a, +((_bullet_lin) & 0xFF)
4136  15F4  83          	add	a, e
4137  15F5  6F          	ld	l, a
4138  15F6  3E 00       	ld	a, +((_bullet_lin) / 256)
4139  15F8  CE 00       	adc	a,0x00
4140  15FA  67          	ld	h, a
4141  15FB  5E          	ld	e, (hl)
4142  15FC  C5          	push	bc
4143  15FD  21 00 00    	ld	hl,0x0000
4144  1600  E5          	push	hl
4145  1601  21 87 03    	ld	hl,0x0387
4146  1604  E5          	push	hl
4147  1605  D5          	push	de
4148  1606  CD 27 0E    	call	_spr_add_anim
4149  1609  F1          	pop	af
4150  160A  F1          	pop	af
4151  160B  F1          	pop	af
4152  160C  C1          	pop	bc
4153  160D  21 00 00    	ld	hl,_bullet_count
4154  1610  35          	dec	(hl)
4155  1611  3E FF       	ld	a,0xff
4156  1613  02          	ld	(bc), a
4157  1614  C9          	ret
4158  1615              	SECTION code_compiler
4159  1615              ;	---------------------------------
4160  1615              ; Function spr_turn_horizontal
4161  1615              ; ---------------------------------
4162  1615              _spr_turn_horizontal:
4163  1615  21 00 00    	ld	hl,_s_state
4164  1618  CB 56       	bit	2, (hl)
4165  161A  28 0B       	jr	Z,l_spr_turn_horizontal_00102
4166  161C  21 00 00    	ld	hl,_s_state
4167  161F  7E          	ld	a,(hl)
4168  1620  F6 08       	or	a,0x08
4169  1622  E6 FB       	and	a,0xfb
4170  1624  77          	ld	(hl),a
4171  1625  18 09       	jr	l_spr_turn_horizontal_00103
4172  1627              l_spr_turn_horizontal_00102:
4173  1627  21 00 00    	ld	hl,_s_state
4174  162A  7E          	ld	a,(hl)
4175  162B  E6 F7       	and	a,0xf7
4176  162D  F6 04       	or	a,0x04
4177  162F  77          	ld	(hl),a
4178  1630              l_spr_turn_horizontal_00103:
4179  1630  2A 00 00    	ld	hl,(_sprite)
4180  1633  26 00       	ld	h,0x00
4181  1635  01 00 00    	ld	bc,_state
4182  1638  09          	add	hl,bc
4183  1639  3A 00 00    	ld	a,(_s_state)
4184  163C  77          	ld	(hl),a
4185  163D  2A 00 00    	ld	hl,(_sprite)
4186  1640  26 00       	ld	h,0x00
4187  1642  01 00 00    	ld	bc,_tile
4188  1645  09          	add	hl,bc
4189  1646  E5          	push	hl
4190  1647  2A 00 00    	ld	hl,(_sprite)
4191  164A  CD 25 09    	call	_spr_tile
4192  164D  C1          	pop	bc
4193  164E  7D          	ld	a,l
4194  164F  02          	ld	(bc), a
4195  1650  C9          	ret
4196  1651              	SECTION code_compiler
4197  1651              ;	---------------------------------
4198  1651              ; Function spr_btile_paint_back
4199  1651              ; ---------------------------------
4200  1651              _spr_btile_paint_back:
4201  1651  21 20 00    	ld	hl,0x0020
4202  1654  22 00 00    	ld	(_tmp_ui),hl
4203  1657  21 00 00    	ld	hl,_map_paper
4204  165A  7E          	ld	a, (hl)
4205  165B  0F          	rrca
4206  165C  0F          	rrca
4207  165D  0F          	rrca
4208  165E  E6 1F       	and	a,0x1f
4209  1660  B6          	or	a, (hl)
4210  1661  F6 40       	or	a,0x40
4211  1663  32 00 00    	ld	(_map_paper_clr),a
4212  1666              l_spr_btile_paint_back_00106:
4213  1666  21 00 00    	ld	hl,_tmp_ui
4214  1669  7E          	ld	a, (hl)
4215  166A  D6 A0       	sub	a,0xa0
4216  166C  23          	inc	hl
4217  166D  7E          	ld	a, (hl)
4218  166E  DE 28       	sbc	a,0x28
4219  1670  30 4C       	jr	NC,l_spr_btile_paint_back_00109
4220  1672  21 00 00    	ld	hl,_tmp0
4221  1675  36 00       	ld	(hl),0x00
4222  1677              l_spr_btile_paint_back_00103:
4223  1677  3A 00 00    	ld	a,(_tmp0)
4224  167A  D6 10       	sub	a,0x10
4225  167C  30 34       	jr	NC,l_spr_btile_paint_back_00105
4226  167E  01 00 00    	ld	bc,_btiles
4227  1681  2A 00 00    	ld	hl,(_tmp_ui)
4228  1684  09          	add	hl,bc
4229  1685  7D          	ld	a,l
4230  1686  44          	ld	b,h
4231  1687  21 00 00    	ld	hl,_tmp0
4232  168A  86          	add	a, (hl)
4233  168B  4F          	ld	c, a
4234  168C  78          	ld	a, b
4235  168D  CE 00       	adc	a,0x00
4236  168F  47          	ld	b, a
4237  1690  0A          	ld	a, (bc)
4238  1691  32 00 00    	ld	(_tmp),a
4239  1694  E6 38       	and	a,0x38
4240  1696  5F          	ld	e, a
4241  1697  3A 00 00    	ld	a,(_map_paper_last)
4242  169A  93          	sub	a, e
4243  169B  20 0F       	jr	NZ,l_spr_btile_paint_back_00102
4244  169D  21 00 00    	ld	hl,_tmp
4245  16A0  7E          	ld	a, (hl)
4246  16A1  E6 C7       	and	a,0xc7
4247  16A3  77          	ld	(hl),a
4248  16A4  21 00 00    	ld	hl,_map_paper
4249  16A7  B6          	or	a, (hl)
4250  16A8  32 00 00    	ld	(_tmp),a
4251  16AB  02          	ld	(bc), a
4252  16AC              l_spr_btile_paint_back_00102:
4253  16AC  21 00 00    	ld	hl,_tmp0
4254  16AF  34          	inc	(hl)
4255  16B0  18 C5       	jr	l_spr_btile_paint_back_00103
4256  16B2              l_spr_btile_paint_back_00105:
4257  16B2  2A 00 00    	ld	hl,(_tmp_ui)
4258  16B5  11 30 00    	ld	de,0x0030
4259  16B8  19          	add	hl,de
4260  16B9  22 00 00    	ld	(_tmp_ui),hl
4261  16BC  18 A8       	jr	l_spr_btile_paint_back_00106
4262  16BE              l_spr_btile_paint_back_00109:
4263  16BE  C9          	ret
4264  16BF              	SECTION IGNORE
4265  0000              
