1     0000              MODULE game_sprite_c
2     0000              LINE 0, "game_sprite.c"
0     0000              
1     0000              ;--------------------------------------------------------
2     0000              ; File Created by SDCC : free open source ANSI-C Compiler
3     0000              ; Version 3.6.9 #9958 (Mac OS X i386)
4     0000              ;--------------------------------------------------------
5     0000              ; Processed by Z88DK
6     0000              ;--------------------------------------------------------
7     0000              
8     0000              	EXTERN __divschar
9     0000              	EXTERN __divschar_callee
10    0000              	EXTERN __divsint
11    0000              	EXTERN __divsint_callee
12    0000              	EXTERN __divslong
13    0000              	EXTERN __divslong_callee
14    0000              	EXTERN __divslonglong
15    0000              	EXTERN __divslonglong_callee
16    0000              	EXTERN __divsuchar
17    0000              	EXTERN __divsuchar_callee
18    0000              	EXTERN __divuchar
19    0000              	EXTERN __divuchar_callee
20    0000              	EXTERN __divuint
21    0000              	EXTERN __divuint_callee
22    0000              	EXTERN __divulong
23    0000              	EXTERN __divulong_callee
24    0000              	EXTERN __divulonglong
25    0000              	EXTERN __divulonglong_callee
26    0000              	EXTERN __divuschar
27    0000              	EXTERN __divuschar_callee
28    0000              	EXTERN __modschar
29    0000              	EXTERN __modschar_callee
30    0000              	EXTERN __modsint
31    0000              	EXTERN __modsint_callee
32    0000              	EXTERN __modslong
33    0000              	EXTERN __modslong_callee
34    0000              	EXTERN __modslonglong
35    0000              	EXTERN __modslonglong_callee
36    0000              	EXTERN __modsuchar
37    0000              	EXTERN __modsuchar_callee
38    0000              	EXTERN __moduchar
39    0000              	EXTERN __moduchar_callee
40    0000              	EXTERN __moduint
41    0000              	EXTERN __moduint_callee
42    0000              	EXTERN __modulong
43    0000              	EXTERN __modulong_callee
44    0000              	EXTERN __modulonglong
45    0000              	EXTERN __modulonglong_callee
46    0000              	EXTERN __moduschar
47    0000              	EXTERN __moduschar_callee
48    0000              	EXTERN __mulint
49    0000              	EXTERN __mulint_callee
50    0000              	EXTERN __mullong
51    0000              	EXTERN __mullong_callee
52    0000              	EXTERN __mullonglong
53    0000              	EXTERN __mullonglong_callee
54    0000              	EXTERN __mulschar
55    0000              	EXTERN __mulschar_callee
56    0000              	EXTERN __mulsuchar
57    0000              	EXTERN __mulsuchar_callee
58    0000              	EXTERN __muluschar
59    0000              	EXTERN __muluschar_callee
60    0000              	EXTERN __rlslonglong
61    0000              	EXTERN __rlslonglong_callee
62    0000              	EXTERN __rlulonglong
63    0000              	EXTERN __rlulonglong_callee
64    0000              	EXTERN __rrslonglong
65    0000              	EXTERN __rrslonglong_callee
66    0000              	EXTERN __rrulonglong
67    0000              	EXTERN __rrulonglong_callee
68    0000              	EXTERN ___sdcc_call_hl
69    0000              	EXTERN ___sdcc_call_iy
70    0000              	EXTERN ___sdcc_enter_ix
71    0000              	EXTERN _banked_call
72    0000              	EXTERN _banked_ret
73    0000              	EXTERN ___fs2schar
74    0000              	EXTERN ___fs2schar_callee
75    0000              	EXTERN ___fs2sint
76    0000              	EXTERN ___fs2sint_callee
77    0000              	EXTERN ___fs2slong
78    0000              	EXTERN ___fs2slong_callee
79    0000              	EXTERN ___fs2slonglong
80    0000              	EXTERN ___fs2slonglong_callee
81    0000              	EXTERN ___fs2uchar
82    0000              	EXTERN ___fs2uchar_callee
83    0000              	EXTERN ___fs2uint
84    0000              	EXTERN ___fs2uint_callee
85    0000              	EXTERN ___fs2ulong
86    0000              	EXTERN ___fs2ulong_callee
87    0000              	EXTERN ___fs2ulonglong
88    0000              	EXTERN ___fs2ulonglong_callee
89    0000              	EXTERN ___fsadd
90    0000              	EXTERN ___fsadd_callee
91    0000              	EXTERN ___fsdiv
92    0000              	EXTERN ___fsdiv_callee
93    0000              	EXTERN ___fseq
94    0000              	EXTERN ___fseq_callee
95    0000              	EXTERN ___fsgt
96    0000              	EXTERN ___fsgt_callee
97    0000              	EXTERN ___fslt
98    0000              	EXTERN ___fslt_callee
99    0000              	EXTERN ___fsmul
100   0000              	EXTERN ___fsmul_callee
101   0000              	EXTERN ___fsneq
102   0000              	EXTERN ___fsneq_callee
103   0000              	EXTERN ___fssub
104   0000              	EXTERN ___fssub_callee
105   0000              	EXTERN ___schar2fs
106   0000              	EXTERN ___schar2fs_callee
107   0000              	EXTERN ___sint2fs
108   0000              	EXTERN ___sint2fs_callee
109   0000              	EXTERN ___slong2fs
110   0000              	EXTERN ___slong2fs_callee
111   0000              	EXTERN ___slonglong2fs
112   0000              	EXTERN ___slonglong2fs_callee
113   0000              	EXTERN ___uchar2fs
114   0000              	EXTERN ___uchar2fs_callee
115   0000              	EXTERN ___uint2fs
116   0000              	EXTERN ___uint2fs_callee
117   0000              	EXTERN ___ulong2fs
118   0000              	EXTERN ___ulong2fs_callee
119   0000              	EXTERN ___ulonglong2fs
120   0000              	EXTERN ___ulonglong2fs_callee
121   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
122   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
123   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
126   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
127   0000              	EXTERN ____sdcc_4_ldi_save_bc
128   0000              	EXTERN ____sdcc_4_push_hlix
129   0000              	EXTERN ____sdcc_4_push_mhl
130   0000              	EXTERN ____sdcc_lib_setmem_hl
131   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
132   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
133   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
134   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
135   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
136   0000              	EXTERN ____sdcc_ll_add_deix_hlix
137   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
138   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
139   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
140   0000              	EXTERN ____sdcc_ll_asr_hlix_a
141   0000              	EXTERN ____sdcc_ll_asr_mbc_a
142   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
143   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
144   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
145   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
146   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
147   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
148   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
149   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
150   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
151   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
152   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
153   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
155   0000              	EXTERN ____sdcc_ll_push_hlix
156   0000              	EXTERN ____sdcc_ll_push_mhl
157   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
158   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
159   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
160   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
161   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
162   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
163   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
164   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
165   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
166   0000              	EXTERN ____sdcc_load_debc_deix
167   0000              	EXTERN ____sdcc_load_dehl_deix
168   0000              	EXTERN ____sdcc_load_debc_mhl
169   0000              	EXTERN ____sdcc_load_hlde_mhl
170   0000              	EXTERN ____sdcc_store_dehl_bcix
171   0000              	EXTERN ____sdcc_store_debc_hlix
172   0000              	EXTERN ____sdcc_store_debc_mhl
173   0000              	EXTERN ____sdcc_cpu_pop_ei
174   0000              	EXTERN ____sdcc_cpu_pop_ei_jp
175   0000              	EXTERN ____sdcc_cpu_push_di
176   0000              	EXTERN ____sdcc_outi
177   0000              	EXTERN ____sdcc_outi_128
178   0000              	EXTERN ____sdcc_outi_256
179   0000              	EXTERN ____sdcc_ldi
180   0000              	EXTERN ____sdcc_ldi_128
181   0000              	EXTERN ____sdcc_ldi_256
182   0000              	EXTERN ____sdcc_4_copy_srcd_hlix_dst_deix
183   0000              	EXTERN ____sdcc_4_and_src_mbc_mhl_dst_deix
184   0000              	EXTERN ____sdcc_4_or_src_mbc_mhl_dst_deix
185   0000              	EXTERN ____sdcc_4_xor_src_mbc_mhl_dst_deix
186   0000              	EXTERN ____sdcc_4_or_src_dehl_dst_bcix
187   0000              	EXTERN ____sdcc_4_xor_src_dehl_dst_bcix
188   0000              	EXTERN ____sdcc_4_and_src_dehl_dst_bcix
189   0000              	EXTERN ____sdcc_4_xor_src_mbc_mhl_dst_debc
190   0000              	EXTERN ____sdcc_4_or_src_mbc_mhl_dst_debc
191   0000              	EXTERN ____sdcc_4_and_src_mbc_mhl_dst_debc
192   0000              	EXTERN ____sdcc_4_cpl_src_mhl_dst_debc
193   0000              	EXTERN ____sdcc_4_xor_src_debc_mhl_dst_debc
194   0000              	EXTERN ____sdcc_4_or_src_debc_mhl_dst_debc
195   0000              	EXTERN ____sdcc_4_and_src_debc_mhl_dst_debc
196   0000              	EXTERN ____sdcc_4_and_src_debc_hlix_dst_debc
197   0000              	EXTERN ____sdcc_4_or_src_debc_hlix_dst_debc
198   0000              	EXTERN ____sdcc_4_xor_src_debc_hlix_dst_debc
199   0000              
200   0000              ;--------------------------------------------------------
201   0000              ; Public variables in this module
202   0000              ;--------------------------------------------------------
203   0000              	GLOBAL _spr_bullet_player_colision
204   0000              	GLOBAL _spr_bullet_enemy_colision
205   0000              	GLOBAL _spr_bullet_axe
206   0000              	GLOBAL _spr_bullet_fireball
207   0000              	GLOBAL _spr_calc_index
208   0000              	GLOBAL _spr_chktime
209   0000              	GLOBAL _spr_set_up
210   0000              	GLOBAL _spr_set_down
211   0000              	GLOBAL _spr_set_left
212   0000              	GLOBAL _spr_set_right
213   0000              	GLOBAL _spr_move_up
214   0000              	GLOBAL _spr_move_down
215   0000              	GLOBAL _spr_move_horizontal
216   0000              	GLOBAL _spr_move_right
217   0000              	GLOBAL _spr_move_left
218   0000              	GLOBAL _spr_page_right
219   0000              	GLOBAL _spr_page_left
220   0000              	GLOBAL _spr_page_down
221   0000              	GLOBAL _spr_page_up
222   0000              	GLOBAL _spr_clear_scr
223   0000              	GLOBAL _spr_page_map
224   0000              	GLOBAL _spr_paint_player
225   0000              	GLOBAL _spr_paint
226   0000              	GLOBAL _spr_destroy
227   0000              	GLOBAL _spr_tile
228   0000              	GLOBAL _spr_tile_dir
229   0000              	GLOBAL _spr_brick_anim
230   0000              	GLOBAL _spr_draw_index
231   0000              	GLOBAL _spr_back_repaint
232   0000              	GLOBAL _spr_tile_paint
233   0000              	GLOBAL _spr_init_effects
234   0000              	GLOBAL _spr_add_anim
235   0000              	GLOBAL _spr_play_anim
236   0000              	GLOBAL _spr_colision_b
237   0000              	GLOBAL _spr_colision_boss
238   0000              	GLOBAL _spr_bullets_play
239   0000              	GLOBAL _spr_bullet_explode
240   0000              	GLOBAL _spr_turn_horizontal
241   0000              	GLOBAL _spr_btile_paint_back
242   0000              	GLOBAL _spr_flatten
243   0000              	GLOBAL _spr_unflattenP1
244   0000              ;--------------------------------------------------------
245   0000              ; Externals used
246   0000              ;--------------------------------------------------------
247   0000              	GLOBAL _ulltoa_callee
248   0000              	GLOBAL _ulltoa
249   0000              	GLOBAL _strtoull_callee
250   0000              	GLOBAL _strtoull
251   0000              	GLOBAL _strtoll_callee
252   0000              	GLOBAL _strtoll
253   0000              	GLOBAL _lltoa_callee
254   0000              	GLOBAL _lltoa
255   0000              	GLOBAL _llabs_callee
256   0000              	GLOBAL _llabs
257   0000              	GLOBAL __lldivu__callee
258   0000              	GLOBAL __lldivu_
259   0000              	GLOBAL __lldiv__callee
260   0000              	GLOBAL __lldiv_
261   0000              	GLOBAL _atoll_callee
262   0000              	GLOBAL _atoll
263   0000              	GLOBAL _realloc_unlocked_callee
264   0000              	GLOBAL _realloc_unlocked
265   0000              	GLOBAL _malloc_unlocked_fastcall
266   0000              	GLOBAL _malloc_unlocked
267   0000              	GLOBAL _free_unlocked_fastcall
268   0000              	GLOBAL _free_unlocked
269   0000              	GLOBAL _calloc_unlocked_callee
270   0000              	GLOBAL _calloc_unlocked
271   0000              	GLOBAL _aligned_alloc_unlocked_callee
272   0000              	GLOBAL _aligned_alloc_unlocked
273   0000              	GLOBAL _realloc_callee
274   0000              	GLOBAL _realloc
275   0000              	GLOBAL _malloc_fastcall
276   0000              	GLOBAL _malloc
277   0000              	GLOBAL _free_fastcall
278   0000              	GLOBAL _free
279   0000              	GLOBAL _calloc_callee
280   0000              	GLOBAL _calloc
281   0000              	GLOBAL _aligned_alloc_callee
282   0000              	GLOBAL _aligned_alloc
283   0000              	GLOBAL _utoa_callee
284   0000              	GLOBAL _utoa
285   0000              	GLOBAL _ultoa_callee
286   0000              	GLOBAL _ultoa
287   0000              	GLOBAL _system_fastcall
288   0000              	GLOBAL _system
289   0000              	GLOBAL _strtoul_callee
290   0000              	GLOBAL _strtoul
291   0000              	GLOBAL _strtol_callee
292   0000              	GLOBAL _strtol
293   0000              	GLOBAL _strtof_callee
294   0000              	GLOBAL _strtof
295   0000              	GLOBAL _strtod_callee
296   0000              	GLOBAL _strtod
297   0000              	GLOBAL _srand_fastcall
298   0000              	GLOBAL _srand
299   0000              	GLOBAL _rand
300   0000              	GLOBAL _quick_exit_fastcall
301   0000              	GLOBAL _quick_exit
302   0000              	GLOBAL _qsort_callee
303   0000              	GLOBAL _qsort
304   0000              	GLOBAL _ltoa_callee
305   0000              	GLOBAL _ltoa
306   0000              	GLOBAL _labs_fastcall
307   0000              	GLOBAL _labs
308   0000              	GLOBAL _itoa_callee
309   0000              	GLOBAL _itoa
310   0000              	GLOBAL _ftoh_callee
311   0000              	GLOBAL _ftoh
312   0000              	GLOBAL _ftog_callee
313   0000              	GLOBAL _ftog
314   0000              	GLOBAL _ftoe_callee
315   0000              	GLOBAL _ftoe
316   0000              	GLOBAL _ftoa_callee
317   0000              	GLOBAL _ftoa
318   0000              	GLOBAL _exit_fastcall
319   0000              	GLOBAL _exit
320   0000              	GLOBAL _dtoh_callee
321   0000              	GLOBAL _dtoh
322   0000              	GLOBAL _dtog_callee
323   0000              	GLOBAL _dtog
324   0000              	GLOBAL _dtoe_callee
325   0000              	GLOBAL _dtoe
326   0000              	GLOBAL _dtoa_callee
327   0000              	GLOBAL _dtoa
328   0000              	GLOBAL _bsearch_callee
329   0000              	GLOBAL _bsearch
330   0000              	GLOBAL _atol_fastcall
331   0000              	GLOBAL _atol
332   0000              	GLOBAL _atoi_fastcall
333   0000              	GLOBAL _atoi
334   0000              	GLOBAL _atof_fastcall
335   0000              	GLOBAL _atof
336   0000              	GLOBAL _atexit_fastcall
337   0000              	GLOBAL _atexit
338   0000              	GLOBAL _at_quick_exit_fastcall
339   0000              	GLOBAL _at_quick_exit
340   0000              	GLOBAL _abs_fastcall
341   0000              	GLOBAL _abs
342   0000              	GLOBAL _abort
343   0000              	GLOBAL __strtou__callee
344   0000              	GLOBAL __strtou_
345   0000              	GLOBAL __strtoi__callee
346   0000              	GLOBAL __strtoi_
347   0000              	GLOBAL __random_uniform_xor_8__fastcall
348   0000              	GLOBAL __random_uniform_xor_8_
349   0000              	GLOBAL __random_uniform_xor_32__fastcall
350   0000              	GLOBAL __random_uniform_xor_32_
351   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
352   0000              	GLOBAL __random_uniform_cmwc_8_
353   0000              	GLOBAL __shellsort__callee
354   0000              	GLOBAL __shellsort_
355   0000              	GLOBAL __quicksort__callee
356   0000              	GLOBAL __quicksort_
357   0000              	GLOBAL __insertion_sort__callee
358   0000              	GLOBAL __insertion_sort_
359   0000              	GLOBAL __ldivu__callee
360   0000              	GLOBAL __ldivu_
361   0000              	GLOBAL __ldiv__callee
362   0000              	GLOBAL __ldiv_
363   0000              	GLOBAL __divu__callee
364   0000              	GLOBAL __divu_
365   0000              	GLOBAL __div__callee
366   0000              	GLOBAL __div_
367   0000              	GLOBAL _NIRVANAP_drawTW_raw_callee
368   0000              	GLOBAL _NIRVANAP_drawTW_raw
369   0000              	GLOBAL _NIRVANAP_drawTW_callee
370   0000              	GLOBAL _NIRVANAP_drawTW
371   0000              	GLOBAL _NIRVANAP_drawW_raw_callee
372   0000              	GLOBAL _NIRVANAP_drawW_raw
373   0000              	GLOBAL _NIRVANAP_drawW_callee
374   0000              	GLOBAL _NIRVANAP_drawW
375   0000              	GLOBAL _NIRVANAP_spriteT_callee
376   0000              	GLOBAL _NIRVANAP_spriteT
377   0000              	GLOBAL _NIRVANAP_fillC_callee
378   0000              	GLOBAL _NIRVANAP_fillC
379   0000              	GLOBAL _NIRVANAP_readC_callee
380   0000              	GLOBAL _NIRVANAP_readC
381   0000              	GLOBAL _NIRVANAP_paintC_callee
382   0000              	GLOBAL _NIRVANAP_paintC
383   0000              	GLOBAL _NIRVANAP_printC_callee
384   0000              	GLOBAL _NIRVANAP_printC
385   0000              	GLOBAL _NIRVANAP_fillT_raw_callee
386   0000              	GLOBAL _NIRVANAP_fillT_raw
387   0000              	GLOBAL _NIRVANAP_fillT_callee
388   0000              	GLOBAL _NIRVANAP_fillT
389   0000              	GLOBAL _NIRVANAP_drawT_raw_callee
390   0000              	GLOBAL _NIRVANAP_drawT_raw
391   0000              	GLOBAL _NIRVANAP_drawT_callee
392   0000              	GLOBAL _NIRVANAP_drawT
393   0000              	GLOBAL _NIRVANAP_stop
394   0000              	GLOBAL _NIRVANAP_start
395   0000              	GLOBAL _debug3
396   0000              	GLOBAL _debug2
397   0000              	GLOBAL _debug
398   0000              	GLOBAL _zx_print_str
399   0000              	GLOBAL _zx_print_int
400   0000              	GLOBAL _zx_print_chr
401   0000              	GLOBAL _zx_print_bonus_time
402   0000              	GLOBAL _zx_isr
403   0000              	GLOBAL _z80_otdr_callee
404   0000              	GLOBAL _z80_otdr
405   0000              	GLOBAL _z80_otir_callee
406   0000              	GLOBAL _z80_otir
407   0000              	GLOBAL _z80_outp_callee
408   0000              	GLOBAL _z80_outp
409   0000              	GLOBAL _z80_indr_callee
410   0000              	GLOBAL _z80_indr
411   0000              	GLOBAL _z80_inir_callee
412   0000              	GLOBAL _z80_inir
413   0000              	GLOBAL _z80_inp_fastcall
414   0000              	GLOBAL _z80_inp
415   0000              	GLOBAL _z80_set_int_state_fastcall
416   0000              	GLOBAL _z80_set_int_state
417   0000              	GLOBAL _z80_get_int_state
418   0000              	GLOBAL _z80_delay_tstate_fastcall
419   0000              	GLOBAL _z80_delay_tstate
420   0000              	GLOBAL _z80_delay_ms_fastcall
421   0000              	GLOBAL _z80_delay_ms
422   0000              	GLOBAL _im2_remove_generic_callback_callee
423   0000              	GLOBAL _im2_remove_generic_callback
424   0000              	GLOBAL _im2_prepend_generic_callback_callee
425   0000              	GLOBAL _im2_prepend_generic_callback
426   0000              	GLOBAL _im2_append_generic_callback_callee
427   0000              	GLOBAL _im2_append_generic_callback
428   0000              	GLOBAL _im2_create_generic_isr_8080_callee
429   0000              	GLOBAL _im2_create_generic_isr_8080
430   0000              	GLOBAL _im2_create_generic_isr_callee
431   0000              	GLOBAL _im2_create_generic_isr
432   0000              	GLOBAL _im2_install_isr_callee
433   0000              	GLOBAL _im2_install_isr
434   0000              	GLOBAL _im2_init_fastcall
435   0000              	GLOBAL _im2_init
436   0000              	GLOBAL _intrinsic_swap_word_32_fastcall
437   0000              	GLOBAL _intrinsic_swap_word_32
438   0000              	GLOBAL _intrinsic_swap_endian_32_fastcall
439   0000              	GLOBAL _intrinsic_swap_endian_32
440   0000              	GLOBAL _intrinsic_swap_endian_16_fastcall
441   0000              	GLOBAL _intrinsic_swap_endian_16
442   0000              	GLOBAL _intrinsic_return_de
443   0000              	GLOBAL _intrinsic_return_bc
444   0000              	GLOBAL _intrinsic_exx
445   0000              	GLOBAL _intrinsic_ex_de_hl
446   0000              	GLOBAL _intrinsic_nop
447   0000              	GLOBAL _intrinsic_im_2
448   0000              	GLOBAL _intrinsic_im_1
449   0000              	GLOBAL _intrinsic_im_0
450   0000              	GLOBAL _intrinsic_retn
451   0000              	GLOBAL _intrinsic_reti
452   0000              	GLOBAL _intrinsic_halt
453   0000              	GLOBAL _intrinsic_ei
454   0000              	GLOBAL _intrinsic_di
455   0000              	GLOBAL _intrinsic_stub
456   0000              	GLOBAL _intrinsic_ini
457   0000              	GLOBAL _intrinsic_outi
458   0000              	GLOBAL _intrinsic_ldi
459   0000              	GLOBAL _zx_pattern_fill_callee
460   0000              	GLOBAL _zx_pattern_fill
461   0000              	GLOBAL _zx_saddrpup_fastcall
462   0000              	GLOBAL _zx_saddrpup
463   0000              	GLOBAL _zx_saddrpright_callee
464   0000              	GLOBAL _zx_saddrpright
465   0000              	GLOBAL _zx_saddrpleft_callee
466   0000              	GLOBAL _zx_saddrpleft
467   0000              	GLOBAL _zx_saddrpdown_fastcall
468   0000              	GLOBAL _zx_saddrpdown
469   0000              	GLOBAL _zx_saddrcup_fastcall
470   0000              	GLOBAL _zx_saddrcup
471   0000              	GLOBAL _zx_saddrcright_fastcall
472   0000              	GLOBAL _zx_saddrcright
473   0000              	GLOBAL _zx_saddrcleft_fastcall
474   0000              	GLOBAL _zx_saddrcleft
475   0000              	GLOBAL _zx_saddrcdown_fastcall
476   0000              	GLOBAL _zx_saddrcdown
477   0000              	GLOBAL _zx_saddr2py_fastcall
478   0000              	GLOBAL _zx_saddr2py
479   0000              	GLOBAL _zx_saddr2px_fastcall
480   0000              	GLOBAL _zx_saddr2px
481   0000              	GLOBAL _zx_saddr2cy_fastcall
482   0000              	GLOBAL _zx_saddr2cy
483   0000              	GLOBAL _zx_saddr2cx_fastcall
484   0000              	GLOBAL _zx_saddr2cx
485   0000              	GLOBAL _zx_saddr2aaddr_fastcall
486   0000              	GLOBAL _zx_saddr2aaddr
487   0000              	GLOBAL _zx_py2saddr_fastcall
488   0000              	GLOBAL _zx_py2saddr
489   0000              	GLOBAL _zx_py2aaddr_fastcall
490   0000              	GLOBAL _zx_py2aaddr
491   0000              	GLOBAL _zx_pxy2saddr_callee
492   0000              	GLOBAL _zx_pxy2saddr
493   0000              	GLOBAL _zx_pxy2aaddr_callee
494   0000              	GLOBAL _zx_pxy2aaddr
495   0000              	GLOBAL _zx_px2bitmask_fastcall
496   0000              	GLOBAL _zx_px2bitmask
497   0000              	GLOBAL _zx_cy2saddr_fastcall
498   0000              	GLOBAL _zx_cy2saddr
499   0000              	GLOBAL _zx_cy2aaddr_fastcall
500   0000              	GLOBAL _zx_cy2aaddr
501   0000              	GLOBAL _zx_cxy2saddr_callee
502   0000              	GLOBAL _zx_cxy2saddr
503   0000              	GLOBAL _zx_cxy2aaddr_callee
504   0000              	GLOBAL _zx_cxy2aaddr
505   0000              	GLOBAL _zx_bitmask2px_fastcall
506   0000              	GLOBAL _zx_bitmask2px
507   0000              	GLOBAL _zx_aaddrcup_fastcall
508   0000              	GLOBAL _zx_aaddrcup
509   0000              	GLOBAL _zx_aaddrcright_fastcall
510   0000              	GLOBAL _zx_aaddrcright
511   0000              	GLOBAL _zx_aaddrcleft_fastcall
512   0000              	GLOBAL _zx_aaddrcleft
513   0000              	GLOBAL _zx_aaddrcdown_fastcall
514   0000              	GLOBAL _zx_aaddrcdown
515   0000              	GLOBAL _zx_aaddr2saddr_fastcall
516   0000              	GLOBAL _zx_aaddr2saddr
517   0000              	GLOBAL _zx_aaddr2py_fastcall
518   0000              	GLOBAL _zx_aaddr2py
519   0000              	GLOBAL _zx_aaddr2px_fastcall
520   0000              	GLOBAL _zx_aaddr2px
521   0000              	GLOBAL _zx_aaddr2cy_fastcall
522   0000              	GLOBAL _zx_aaddr2cy
523   0000              	GLOBAL _zx_aaddr2cx_fastcall
524   0000              	GLOBAL _zx_aaddr2cx
525   0000              	GLOBAL _zx_visit_wc_pix_callee
526   0000              	GLOBAL _zx_visit_wc_pix
527   0000              	GLOBAL _zx_visit_wc_attr_callee
528   0000              	GLOBAL _zx_visit_wc_attr
529   0000              	GLOBAL _zx_scroll_wc_up_pix_callee
530   0000              	GLOBAL _zx_scroll_wc_up_pix
531   0000              	GLOBAL _zx_scroll_wc_up_attr_callee
532   0000              	GLOBAL _zx_scroll_wc_up_attr
533   0000              	GLOBAL _zx_scroll_wc_up_callee
534   0000              	GLOBAL _zx_scroll_wc_up
535   0000              	GLOBAL _zx_scroll_up_pix_callee
536   0000              	GLOBAL _zx_scroll_up_pix
537   0000              	GLOBAL _zx_scroll_up_attr_callee
538   0000              	GLOBAL _zx_scroll_up_attr
539   0000              	GLOBAL _zx_scroll_up_callee
540   0000              	GLOBAL _zx_scroll_up
541   0000              	GLOBAL _zx_cls_wc_pix_callee
542   0000              	GLOBAL _zx_cls_wc_pix
543   0000              	GLOBAL _zx_cls_wc_attr_callee
544   0000              	GLOBAL _zx_cls_wc_attr
545   0000              	GLOBAL _zx_cls_wc_callee
546   0000              	GLOBAL _zx_cls_wc
547   0000              	GLOBAL _zx_cls_pix_fastcall
548   0000              	GLOBAL _zx_cls_pix
549   0000              	GLOBAL _zx_cls_attr_fastcall
550   0000              	GLOBAL _zx_cls_attr
551   0000              	GLOBAL _zx_cls_fastcall
552   0000              	GLOBAL _zx_cls
553   0000              	GLOBAL _zx_border_fastcall
554   0000              	GLOBAL _zx_border
555   0000              	GLOBAL _zx_tape_verify_block_callee
556   0000              	GLOBAL _zx_tape_verify_block
557   0000              	GLOBAL _zx_tape_save_block_callee
558   0000              	GLOBAL _zx_tape_save_block
559   0000              	GLOBAL _zx_tape_load_block_callee
560   0000              	GLOBAL _zx_tape_load_block
561   0000              	GLOBAL _player_fix_walk_lin
562   0000              	GLOBAL _player_gasta_brick
563   0000              	GLOBAL _player_lost_life
564   0000              	GLOBAL _player_damage
565   0000              	GLOBAL _player_open_door
566   0000              	GLOBAL _player_move_jump
567   0000              	GLOBAL _player_fire
568   0000              	GLOBAL _player_check_stairs_vertical
569   0000              	GLOBAL _player_check_stairs
570   0000              	GLOBAL _player_tile
571   0000              	GLOBAL _player_anim_stairs
572   0000              	GLOBAL _player_pick_item
573   0000              	GLOBAL _player_check_floor
574   0000              	GLOBAL _player_hit_platform_clear
575   0000              	GLOBAL _player_score_add
576   0000              	GLOBAL _player_hit_platform
577   0000              	GLOBAL _player_move_input
578   0000              	GLOBAL _player_turn
579   0000              	GLOBAL _player_move
580   0000              	GLOBAL _player_action_jump
581   0000              	GLOBAL _player_action_fire
582   0000              	GLOBAL _player_check_input
583   0000              	GLOBAL _player_pick_mushroom
584   0000              	GLOBAL _player_collision
585   0000              	GLOBAL _player_init
586   0000              	GLOBAL _game_match_back_strict
587   0000              	GLOBAL _game_match_back
588   0000              	GLOBAL _game_attribs
589   0000              	GLOBAL _game_boss_clear
590   0000              	GLOBAL _game_boss_kill
591   0000              	GLOBAL _game_obj_clear
592   0000              	GLOBAL _game_obj_chk
593   0000              	GLOBAL _game_obj_set
594   0000              	GLOBAL _game_shoot_fire_boss
595   0000              	GLOBAL _game_shoot_fire
596   0000              	GLOBAL _game_add_enemy
597   0000              	GLOBAL _game_print_header
598   0000              	GLOBAL _game_check_time
599   0000              	GLOBAL _game_rotate_attrib_osd
600   0000              	GLOBAL _game_rotate_attrib
601   0000              	GLOBAL _game_colour_message
602   0000              	GLOBAL _game_paint_attrib
603   0000              	GLOBAL _game_print_score
604   0000              	GLOBAL _game_check_cell
605   0000              	GLOBAL _game_check_map
606   0000              	GLOBAL _game_loop
607   0000              	GLOBAL _game_round_init
608   0000              	GLOBAL _game_set_checkpoint
609   0000              	GLOBAL _game_start_timer
610   0000              	GLOBAL _game_update_stats
611   0000              	GLOBAL _game_print_footer
612   0000              	GLOBAL _game_fill_row
613   0000              	GLOBAL _game_cls
614   0000              	GLOBAL _game_fps
615   0000              	GLOBAL _game_respawn
616   0000              	GLOBAL _game_draw_screen
617   0000              	GLOBAL _boss_draw_frame
618   0000              	GLOBAL _boss_draw
619   0000              	GLOBAL _boss_turn
620   0000              	GLOBAL _enemy_avoid_dead
621   0000              	GLOBAL _enemy_avoid_fall
622   0000              	GLOBAL _enemy_kill
623   0000              	GLOBAL _enemy_respawn
624   0000              	GLOBAL _enemy_init
625   0000              	GLOBAL _enemy_move
626   0000              	GLOBAL _enemy_turn
627   0000              	GLOBAL _enemy_static
628   0000              	GLOBAL _enemy_walk
629   0000              	GLOBAL _enemy_horizontal
630   0000              	GLOBAL _enemy_vertical
631   0000              	GLOBAL _ay_reset
632   0000              	GLOBAL _ay_song_stop
633   0000              	GLOBAL _ay_song_play
634   0000              	GLOBAL _ay_fx_stop
635   0000              	GLOBAL _ay_fx_play
636   0000              	GLOBAL _ay_is_playing
637   0000              	GLOBAL _audio_levelup
638   0000              	GLOBAL _audio_checkpoint
639   0000              	GLOBAL _audio_menu
640   0000              	GLOBAL _audio_game_end
641   0000              	GLOBAL _audio_level_complete
642   0000              	GLOBAL _audio_level_start
643   0000              	GLOBAL _audio_lotr_lose_a_life
644   0000              	GLOBAL _audio_mushroom
645   0000              	GLOBAL _audio_puerta
646   0000              	GLOBAL _audio_sin_mana
647   0000              	GLOBAL _audio_magic1
648   0000              	GLOBAL _audio_coin
649   0000              	GLOBAL _audio_golpe
650   0000              	GLOBAL _audio_salto
651   0000              	GLOBAL _audio_efecto
652   0000              	GLOBAL _audio_boss_explode
653   0000              	GLOBAL _audio_disparo_fire
654   0000              	GLOBAL _audio_disparo_axe
655   0000              	GLOBAL _audio_disparo2
656   0000              	GLOBAL _audio_disparo1
657   0000              	GLOBAL _audio_respawn
658   0000              	GLOBAL _audio_explosion1
659   0000              	GLOBAL _audio_explosion
660   0000              	GLOBAL _audio_ingame
661   0000              	GLOBAL _test_func
662   0000              	GLOBAL _test_proc
663   0000              	GLOBAL _in_mouse_kempston_wheel_delta
664   0000              	GLOBAL _in_mouse_kempston_wheel
665   0000              	GLOBAL _in_mouse_kempston_callee
666   0000              	GLOBAL _in_mouse_kempston
667   0000              	GLOBAL _in_mouse_kempston_setpos_callee
668   0000              	GLOBAL _in_mouse_kempston_setpos
669   0000              	GLOBAL _in_mouse_kempston_reset
670   0000              	GLOBAL _in_mouse_kempston_init
671   0000              	GLOBAL _in_mouse_amx_wheel_delta
672   0000              	GLOBAL _in_mouse_amx_wheel
673   0000              	GLOBAL _in_mouse_amx_callee
674   0000              	GLOBAL _in_mouse_amx
675   0000              	GLOBAL _in_mouse_amx_setpos_callee
676   0000              	GLOBAL _in_mouse_amx_setpos
677   0000              	GLOBAL _in_mouse_amx_reset
678   0000              	GLOBAL _in_mouse_amx_init_callee
679   0000              	GLOBAL _in_mouse_amx_init
680   0000              	GLOBAL _in_stick_sinclair2
681   0000              	GLOBAL _in_stick_sinclair1
682   0000              	GLOBAL _in_stick_kempston
683   0000              	GLOBAL _in_stick_fuller
684   0000              	GLOBAL _in_stick_cursor
685   0000              	GLOBAL _in_stick_keyboard_fastcall
686   0000              	GLOBAL _in_stick_keyboard
687   0000              	GLOBAL _in_wait_nokey
688   0000              	GLOBAL _in_wait_key
689   0000              	GLOBAL _in_test_key
690   0000              	GLOBAL _in_pause_fastcall
691   0000              	GLOBAL _in_pause
692   0000              	GLOBAL _in_key_scancode_fastcall
693   0000              	GLOBAL _in_key_scancode
694   0000              	GLOBAL _in_key_pressed_fastcall
695   0000              	GLOBAL _in_key_pressed
696   0000              	GLOBAL _in_inkey
697   0000              	GLOBAL _NIRVANAP_CHAR_TABLE
698   0000              	GLOBAL _NIRVANAP_WIDE_IMAGES
699   0000              	GLOBAL _NIRVANAP_TILE_IMAGES
700   0000              	GLOBAL _NIRVANAP_HOLE
701   0000              	GLOBAL _NIRVANAP_ISR_HOOK
702   0000              	GLOBAL _scan_map
703   0000              	GLOBAL _key_map
704   0000              	GLOBAL _player_lvl_table
705   0000              	GLOBAL _stp_row
706   0000              	GLOBAL _stp_col
707   0000              	GLOBAL _stp_tile
708   0000              	GLOBAL _map_paper_last_a
709   0000              	GLOBAL _map_paper_last
710   0000              	GLOBAL _map_paper_clr
711   0000              	GLOBAL _map_paper
712   0000              	GLOBAL _draw_count
713   0000              	GLOBAL _g_player_hit_right
714   0000              	GLOBAL _g_player_hit_left
715   0000              	GLOBAL _bullet_count
716   0000              	GLOBAL _boss_stat
717   0000              	GLOBAL _boss_time_fire
718   0000              	GLOBAL _boss_time
719   0000              	GLOBAL _boss_tile
720   0000              	GLOBAL _boss_inc
721   0000              	GLOBAL _boss_col
722   0000              	GLOBAL _boss_lin
723   0000              	GLOBAL _bullet
724   0000              	GLOBAL _bullet_vel
725   0000              	GLOBAL _bullet_frames
726   0000              	GLOBAL _bullet_colint
727   0000              	GLOBAL _bullet_dir
728   0000              	GLOBAL _bullet_tile
729   0000              	GLOBAL _bullet_col
730   0000              	GLOBAL _bullet_lin
731   0000              	GLOBAL _bullet_col0
732   0000              	GLOBAL _bullet_lin0
733   0000              	GLOBAL _bullet_max
734   0000              	GLOBAL _bullet_class
735   0000              	GLOBAL _mush_class
736   0000              	GLOBAL _mush_index
737   0000              	GLOBAL _anim_count
738   0000              	GLOBAL _anim_respanwn
739   0000              	GLOBAL _anim_loop
740   0000              	GLOBAL _anim_end
741   0000              	GLOBAL _anim_int
742   0000              	GLOBAL _anim_tile
743   0000              	GLOBAL _anim_col
744   0000              	GLOBAL _anim_lin
745   0000              	GLOBAL _map_heigth
746   0000              	GLOBAL _map_width
747   0000              	GLOBAL _scr_curr
748   0000              	GLOBAL _sprite_kind
749   0000              	GLOBAL _scr_obj1
750   0000              	GLOBAL _scr_obj0
751   0000              	GLOBAL _scr_map
752   0000              	GLOBAL _spr_init
753   0000              	GLOBAL _spr_map_tile
754   0000              	GLOBAL _sprite_frames
755   0000              	GLOBAL _sprite_base_speed
756   0000              	GLOBAL _sprite_speed
757   0000              	GLOBAL _screen_ink
758   0000              	GLOBAL _screen_paper
759   0000              	GLOBAL _player_onstair
760   0000              	GLOBAL _game_start_scr
761   0000              	GLOBAL _game_respawn_tile
762   0000              	GLOBAL _game_respawn_index
763   0000              	GLOBAL _game_respawn_time
764   0000              	GLOBAL _game_score_top
765   0000              	GLOBAL _player_coins
766   0000              	GLOBAL _player_lives
767   0000              	GLOBAL _game_over
768   0000              	GLOBAL _game_sound
769   0000              	GLOBAL _game_inf_lives
770   0000              	GLOBAL _game_inmune
771   0000              	GLOBAL _sprite_curr_index
772   0000              	GLOBAL _spr_count
773   0000              	GLOBAL _bullet_time
774   0000              	GLOBAL _anim_time
775   0000              	GLOBAL _frame_time
776   0000              	GLOBAL _curr_time
777   0000              	GLOBAL _s_state
778   0000              	GLOBAL _attrib_osd
779   0000              	GLOBAL _attrib_hl
780   0000              	GLOBAL _attrib
781   0000              	GLOBAL _zx_val_asm
782   0000              	GLOBAL _enemies
783   0000              	GLOBAL _tmp_ui
784   0000              	GLOBAL _tmp_sc
785   0000              	GLOBAL _tmp_uc
786   0000              	GLOBAL _tmp1
787   0000              	GLOBAL _tmp0
788   0000              	GLOBAL _tmp
789   0000              	GLOBAL _index1
790   0000              	GLOBAL _index0
791   0000              	GLOBAL _loop_count
792   0000              	GLOBAL _s_class
793   0000              	GLOBAL _s_col1
794   0000              	GLOBAL _s_col0
795   0000              	GLOBAL _s_lin1
796   0000              	GLOBAL _s_lin0
797   0000              	GLOBAL _s_tile1
798   0000              	GLOBAL _s_tile0
799   0000              	GLOBAL _player_brick_time
800   0000              	GLOBAL _player_hit_count
801   0000              	GLOBAL _game_debug
802   0000              	GLOBAL _sprite_horizontal_check
803   0000              	GLOBAL _sprite_on_air
804   0000              	GLOBAL _sprite
805   0000              	GLOBAL _fps
806   0000              	GLOBAL _menu_curr_sel
807   0000              	GLOBAL _game_control_jump_lock
808   0000              	GLOBAL _game_control_fire_lock
809   0000              	GLOBAL _game_control_mode
810   0000              	GLOBAL _game_respawn_curr_time
811   0000              	GLOBAL _game_round_up
812   0000              	GLOBAL _game_mush_count
813   0000              	GLOBAL _game_song_play_start
814   0000              	GLOBAL _game_song_play
815   0000              	GLOBAL _game_boss_fix
816   0000              	GLOBAL _game_boss_hit
817   0000              	GLOBAL _game_boss_alive
818   0000              	GLOBAL _game_boss
819   0000              	GLOBAL _game_world
820   0000              	GLOBAL _game_gravity
821   0000              	GLOBAL _player_onfire
822   0000              	GLOBAL _player_anim_stair
823   0000              	GLOBAL _player_hit
824   0000              	GLOBAL _player_hit_time
825   0000              	GLOBAL _player_inm_time
826   0000              	GLOBAL _game_level_up
827   0000              	GLOBAL _game_checkpoint_scr
828   0000              	GLOBAL _game_checkpoint_lin
829   0000              	GLOBAL _game_checkpoint_col
830   0000              	GLOBAL _player_jump_check
831   0000              	GLOBAL _player_lin_scr
832   0000              	GLOBAL _player_col_scr
833   0000              	GLOBAL _player_lvl
834   0000              	GLOBAL _player_int
835   0000              	GLOBAL _player_str
836   0000              	GLOBAL _player_max_vita
837   0000              	GLOBAL _player_max_mana
838   0000              	GLOBAL _player_vita
839   0000              	GLOBAL _player_mana
840   0000              	GLOBAL _player_stand
841   0000              	GLOBAL _player_keys
842   0000              	GLOBAL _player_vel_inc
843   0000              	GLOBAL _player_vel_y1
844   0000              	GLOBAL _player_vel_y0
845   0000              	GLOBAL _player_vel_y
846   0000              	GLOBAL _player_vel_x
847   0000              	GLOBAL _player_score
848   0000              	GLOBAL _last_time
849   0000              	GLOBAL _spr_timer
850   0000              	GLOBAL _jump_lin
851   0000              	GLOBAL _player_hit_col
852   0000              	GLOBAL _player_hit_lin
853   0000              	GLOBAL _colint
854   0000              	GLOBAL _col
855   0000              	GLOBAL _tbuffer
856   0000              	GLOBAL _lin
857   0000              	GLOBAL _tile
858   0000              	GLOBAL _state_a
859   0000              	GLOBAL _state
860   0000              	GLOBAL _class
861   0000              	GLOBAL _dirs_alt
862   0000              	GLOBAL _dirs
863   0000              	GLOBAL _k2
864   0000              	GLOBAL _k1
865   0000              	GLOBAL _joyfunc2
866   0000              	GLOBAL _joyfunc1
867   0000              	GLOBAL _btiles
868   0000              	GLOBAL _spec128
869   0000              	GLOBAL _GLOBAL_ZX_PORT_7FFD
870   0000              	GLOBAL _GLOBAL_ZX_PORT_1FFD
871   0000              	GLOBAL _GLOBAL_ZX_PORT_FE
872   0000              	GLOBAL _ay_fx_06_boss_explode
873   0000              	GLOBAL _ay_fx_06_disparo_fire
874   0000              	GLOBAL _ay_fx_06_disparo_axe
875   0000              	GLOBAL _ay_fx_06_respawn
876   0000              	GLOBAL _ay_fx_06_explosion1
877   0000              	GLOBAL _ay_fx_06_efecto
878   0000              	GLOBAL _ay_fx_06_disparo2
879   0000              	GLOBAL _ay_fx_06_disparo1
880   0000              	GLOBAL _ay_fx_06_checkpoint
881   0000              	GLOBAL _ay_fx_06_levelup
882   0000              	GLOBAL _ay_fx_06_mushroom
883   0000              	GLOBAL _ay_fx_06_magic
884   0000              	GLOBAL _ay_fx_06_sin_mana
885   0000              	GLOBAL _ay_fx_06_salto
886   0000              	GLOBAL _ay_fx_06_puerta
887   0000              	GLOBAL _ay_fx_06_magic1
888   0000              	GLOBAL _ay_fx_06_golpe
889   0000              	GLOBAL _ay_fx_06_explosion
890   0000              	GLOBAL _ay_fx_06_dano_por_toque
891   0000              	GLOBAL _ay_fx_06_coin
892   0000              	GLOBAL _ay_song_06_lotr_level_start
893   0000              	GLOBAL _ay_song_06_lotr_level_complete
894   0000              	GLOBAL _ay_song_06_lotr_lose_a_life
895   0000              	GLOBAL _ay_song_04_doom
896   0000              	GLOBAL _ay_song_04_luna
897   0000              	GLOBAL _ay_song_04_ciel
898   0000              	GLOBAL _ay_song_04_hope
899   0000              	GLOBAL _ay_song_03_regis
900   0000              	GLOBAL _ay_song_03_sunflower
901   0000              	GLOBAL _ay_song_03_lotr
902   0000              	GLOBAL _world0_h
903   0000              	GLOBAL _world0_w
904   0000              	GLOBAL _world0
905   0000              	GLOBAL _paper0
906   0000              	GLOBAL _lenght0
907   0000              	GLOBAL _start_scr0
908   0000              ;--------------------------------------------------------
909   0000              ; special function registers
910   0000              ;--------------------------------------------------------
911   0000              defc _IO_FE	=	0x00fe
912   0000              defc _IO_1FFD	=	0x1ffd
913   0000              defc _IO_7FFD	=	0x7ffd
914   0000              ;--------------------------------------------------------
915   0000              ; ram data
916   0000              ;--------------------------------------------------------
917   0000              	SECTION bss_compiler
918   0000              ;--------------------------------------------------------
919   0000              ; ram data
920   0000              ;--------------------------------------------------------
921   0000              
922   0000              IF 0
923   0000              
924   0000              ; .area _INITIALIZED removed by z88dk
925   0000              
926   0000              
927   0000              ENDIF
928   0000              
929   0000              ;--------------------------------------------------------
930   0000              ; absolute external ram data
931   0000              ;--------------------------------------------------------
932   0000              	SECTION IGNORE
933   0000              ;--------------------------------------------------------
934   0000              ; global & static initialisations
935   0000              ;--------------------------------------------------------
936   0000              	SECTION code_crt_init
937   0000              ;--------------------------------------------------------
938   0000              ; Home
939   0000              ;--------------------------------------------------------
940   0000              	SECTION IGNORE
941   0000              ;--------------------------------------------------------
942   0000              ; code
943   0000              ;--------------------------------------------------------
944   0000              	SECTION code_compiler
945   0000              ;	---------------------------------
946   0000              ; Function spr_calc_index
947   0000              ; ---------------------------------
948   0000              _spr_calc_index:
949   0000  CD 00 00    	call	___sdcc_enter_ix
950   0003  DD 4E 05    	ld	c,(ix+5)
951   0006  CB 39       	srl	c
952   0008  06 00       	ld	b,0x00
953   000A  DD 7E 04    	ld	a,(ix+4)
954   000D  07          	rlca
955   000E  07          	rlca
956   000F  07          	rlca
957   0010  07          	rlca
958   0011  E6 0F       	and	a,0x0f
959   0013  6F          	ld	l, a
960   0014  26 00       	ld	h,0x00
961   0016  29          	add	hl, hl
962   0017  29          	add	hl, hl
963   0018  29          	add	hl, hl
964   0019  29          	add	hl, hl
965   001A  09          	add	hl, bc
966   001B  DD E1       	pop	ix
967   001D  C9          	ret
968   001E              	SECTION code_compiler
969   001E              ;	---------------------------------
970   001E              ; Function spr_chktime
971   001E              ; ---------------------------------
972   001E              _spr_chktime:
973   001E  CD 00 00    	call	___sdcc_enter_ix
974   0021  F5          	push	af
975   0022  EB          	ex	de,hl
976   0023  ED 4B 00 00 	ld	bc,(_curr_time)
977   0027  1A          	ld	a, (de)
978   0028  5F          	ld	e,a
979   0029  6F          	ld	l,a
980   002A  26 00       	ld	h,0x00
981   002C  29          	add	hl, hl
982   002D  3E 00       	ld	a, +((_last_time) & 0xFF)
983   002F  85          	add	a, l
984   0030  DD 77 FE    	ld	(ix-2),a
985   0033  3E 00       	ld	a, +((_last_time) / 256)
986   0035  8C          	adc	a, h
987   0036  DD 77 FF    	ld	(ix-1),a
988   0039  E1          	pop	hl
989   003A  56          	ld	d,(hl)
990   003B  E5          	push	hl
991   003C  23          	inc	hl
992   003D  6E          	ld	l, (hl)
993   003E  79          	ld	a, c
994   003F  92          	sub	a, d
995   0040  4F          	ld	c, a
996   0041  78          	ld	a, b
997   0042  9D          	sbc	a, l
998   0043  47          	ld	b, a
999   0044  16 00       	ld	d,0x00
1000  0046  21 00 00    	ld	hl,_sprite_speed
1001  0049  19          	add	hl, de
1002  004A  6E          	ld	l, (hl)
1003  004B  AF          	xor	a,a
1004  004C  67          	ld	h,a
1005  004D  ED 42       	sbc	hl,bc
1006  004F  30 0D       	jr	NC,l_spr_chktime_00102
1007  0051  E1          	pop	hl
1008  0052  ED 4B 00 00 	ld	bc,(_curr_time)
1009  0056  E5          	push	hl
1010  0057  71          	ld	(hl), c
1011  0058  23          	inc	hl
1012  0059  70          	ld	(hl), b
1013  005A  2E 01       	ld	l,0x01
1014  005C  18 02       	jr	l_spr_chktime_00103
1015  005E              l_spr_chktime_00102:
1016  005E  2E 00       	ld	l,0x00
1017  0060              l_spr_chktime_00103:
1018  0060  F1          	pop	af
1019  0061  DD E1       	pop	ix
1020  0063  C9          	ret
1021  0064              	SECTION code_compiler
1022  0064              ;	---------------------------------
1023  0064              ; Function spr_set_up
1024  0064              ; ---------------------------------
1025  0064              _spr_set_up:
1026  0064  CB C6       	set	0, (hl)
1027  0066  7E          	ld	a, (hl)
1028  0067  E6 FD       	and	a,0xfd
1029  0069  77          	ld	(hl), a
1030  006A  C9          	ret
1031  006B              	SECTION code_compiler
1032  006B              ;	---------------------------------
1033  006B              ; Function spr_set_down
1034  006B              ; ---------------------------------
1035  006B              _spr_set_down:
1036  006B  CB CE       	set	1, (hl)
1037  006D  7E          	ld	a, (hl)
1038  006E  E6 FE       	and	a,0xfe
1039  0070  77          	ld	(hl), a
1040  0071  C9          	ret
1041  0072              	SECTION code_compiler
1042  0072              ;	---------------------------------
1043  0072              ; Function spr_set_left
1044  0072              ; ---------------------------------
1045  0072              _spr_set_left:
1046  0072  CB DE       	set	3, (hl)
1047  0074  7E          	ld	a, (hl)
1048  0075  E6 FB       	and	a,0xfb
1049  0077  77          	ld	(hl), a
1050  0078  C9          	ret
1051  0079              	SECTION code_compiler
1052  0079              ;	---------------------------------
1053  0079              ; Function spr_set_right
1054  0079              ; ---------------------------------
1055  0079              _spr_set_right:
1056  0079  CB D6       	set	2, (hl)
1057  007B  7E          	ld	a, (hl)
1058  007C  E6 F7       	and	a,0xf7
1059  007E  77          	ld	(hl), a
1060  007F  C9          	ret
1061  0080              	SECTION code_compiler
1062  0080              ;	---------------------------------
1063  0080              ; Function spr_move_up
1064  0080              ; ---------------------------------
1065  0080              _spr_move_up:
1066  0080  2A 00 00    	ld	hl,(_sprite)
1067  0083  26 00       	ld	h,0x00
1068  0085  01 00 00    	ld	bc,_lin
1069  0088  09          	add	hl,bc
1070  0089  4E          	ld	c,(hl)
1071  008A  3E 10       	ld	a,0x10
1072  008C  91          	sub	a,c
1073  008D  38 16       	jr	C,l_spr_move_up_00109
1074  008F  3A 00 00    	ld	a,(_sprite)
1075  0092  D6 07       	sub	a,0x07
1076  0094  20 0B       	jr	NZ,l_spr_move_up_00104
1077  0096  CD 34 04    	call	_spr_page_up
1078  0099  7D          	ld	a, l
1079  009A  B7          	or	a, a
1080  009B  28 04       	jr	Z,l_spr_move_up_00104
1081  009D  2E 00       	ld	l,0x00
1082  009F  18 50       	jr	l_spr_move_up_00111
1083  00A1              l_spr_move_up_00104:
1084  00A1  2E 01       	ld	l,0x01
1085  00A3  18 4C       	jr	l_spr_move_up_00111
1086  00A5              l_spr_move_up_00109:
1087  00A5  79          	ld	a, c
1088  00A6  C6 FE       	add	a,0xfe
1089  00A8  32 00 00    	ld	(_s_lin1),a
1090  00AB  07          	rlca
1091  00AC  07          	rlca
1092  00AD  07          	rlca
1093  00AE  07          	rlca
1094  00AF  E6 0F       	and	a,0x0f
1095  00B1  4F          	ld	c, a
1096  00B2  3A 00 00    	ld	a,(_s_lin0)
1097  00B5  07          	rlca
1098  00B6  07          	rlca
1099  00B7  07          	rlca
1100  00B8  07          	rlca
1101  00B9  E6 0F       	and	a,0x0f
1102  00BB  47          	ld	b, a
1103  00BC  79          	ld	a, c
1104  00BD  90          	sub	a, b
1105  00BE  20 04       	jr	NZ,l_spr_move_up_00135
1106  00C0  3E 01       	ld	a,0x01
1107  00C2  18 01       	jr	l_spr_move_up_00136
1108  00C4              l_spr_move_up_00135:
1109  00C4  AF          	xor	a,a
1110  00C5              l_spr_move_up_00136:
1111  00C5  EE 01       	xor	a,0x01
1112  00C7  28 19       	jr	Z,l_spr_move_up_00106
1113  00C9  2A 00 00    	ld	hl,(_sprite)
1114  00CC  26 00       	ld	h,0x00
1115  00CE  01 00 00    	ld	bc,_col
1116  00D1  09          	add	hl,bc
1117  00D2  2A 00 00    	ld	hl, (_s_lin1)
1118  00D5  E5          	push	hl
1119  00D6  CD 00 00    	call	_game_check_map
1120  00D9  F1          	pop	af
1121  00DA  7C          	ld	a,h
1122  00DB  B5          	or	a,l
1123  00DC  28 04       	jr	Z,l_spr_move_up_00106
1124  00DE  2E 01       	ld	l,0x01
1125  00E0  18 0F       	jr	l_spr_move_up_00111
1126  00E2              l_spr_move_up_00106:
1127  00E2  2A 00 00    	ld	hl,(_sprite)
1128  00E5  26 00       	ld	h,0x00
1129  00E7  01 00 00    	ld	bc,_lin
1130  00EA  09          	add	hl,bc
1131  00EB  3A 00 00    	ld	a,(_s_lin1)
1132  00EE  77          	ld	(hl),a
1133  00EF  2E 00       	ld	l,0x00
1134  00F1              l_spr_move_up_00111:
1135  00F1  C9          	ret
1136  00F2              	SECTION code_compiler
1137  00F2              ;	---------------------------------
1138  00F2              ; Function spr_move_down
1139  00F2              ; ---------------------------------
1140  00F2              _spr_move_down:
1141  00F2  2A 00 00    	ld	hl,(_sprite)
1142  00F5  26 00       	ld	h,0x00
1143  00F7  01 00 00    	ld	bc,_lin
1144  00FA  09          	add	hl,bc
1145  00FB  7E          	ld	a,(hl)
1146  00FC  FE 90       	cp	a,0x90
1147  00FE  38 2C       	jr	C,l_spr_move_down_00112
1148  0100  3A 00 00    	ld	a,(_sprite)
1149  0103  D6 07       	sub	a,0x07
1150  0105  28 04       	jr	Z,l_spr_move_down_00137
1151  0107  4D          	ld	c,l
1152  0108  44          	ld	b,h
1153  0109  18 1A       	jr	l_spr_move_down_00105
1154  010B              l_spr_move_down_00137:
1155  010B  CD E5 03    	call	_spr_page_down
1156  010E  7D          	ld	a, l
1157  010F  B7          	or	a, a
1158  0110  28 04       	jr	Z,l_spr_move_down_00102
1159  0112  2E 01       	ld	l,0x01
1160  0114  18 63       	jr	l_spr_move_down_00114
1161  0116              l_spr_move_down_00102:
1162  0116  2A 00 00    	ld	hl,(_sprite)
1163  0119  26 00       	ld	h,0x00
1164  011B  01 00 00    	ld	bc,_lin
1165  011E  09          	add	hl,bc
1166  011F  36 90       	ld	(hl),0x90
1167  0121  2E 01       	ld	l,0x01
1168  0123  18 54       	jr	l_spr_move_down_00114
1169  0125              l_spr_move_down_00105:
1170  0125  3E 90       	ld	a,0x90
1171  0127  02          	ld	(bc), a
1172  0128  2E 01       	ld	l,0x01
1173  012A  18 4D       	jr	l_spr_move_down_00114
1174  012C              l_spr_move_down_00112:
1175  012C  C6 10       	add	a,0x10
1176  012E  32 00 00    	ld	(_s_lin1),a
1177  0131  07          	rlca
1178  0132  07          	rlca
1179  0133  07          	rlca
1180  0134  07          	rlca
1181  0135  E6 0F       	and	a,0x0f
1182  0137  4F          	ld	c, a
1183  0138  3A 00 00    	ld	a,(_s_lin0)
1184  013B  07          	rlca
1185  013C  07          	rlca
1186  013D  07          	rlca
1187  013E  07          	rlca
1188  013F  E6 0F       	and	a,0x0f
1189  0141  47          	ld	b, a
1190  0142  79          	ld	a, c
1191  0143  90          	sub	a, b
1192  0144  20 04       	jr	NZ,l_spr_move_down_00138
1193  0146  3E 01       	ld	a,0x01
1194  0148  18 01       	jr	l_spr_move_down_00139
1195  014A              l_spr_move_down_00138:
1196  014A  AF          	xor	a,a
1197  014B              l_spr_move_down_00139:
1198  014B  EE 01       	xor	a,0x01
1199  014D  28 19       	jr	Z,l_spr_move_down_00110
1200  014F  2A 00 00    	ld	hl,(_sprite)
1201  0152  26 00       	ld	h,0x00
1202  0154  01 00 00    	ld	bc,_col
1203  0157  09          	add	hl,bc
1204  0158  2A 00 00    	ld	hl, (_s_lin1)
1205  015B  E5          	push	hl
1206  015C  CD 00 00    	call	_game_check_map
1207  015F  F1          	pop	af
1208  0160  7C          	ld	a,h
1209  0161  B5          	or	a,l
1210  0162  28 04       	jr	Z,l_spr_move_down_00110
1211  0164  2E 01       	ld	l,0x01
1212  0166  18 11       	jr	l_spr_move_down_00114
1213  0168              l_spr_move_down_00110:
1214  0168  2A 00 00    	ld	hl,(_sprite)
1215  016B  26 00       	ld	h,0x00
1216  016D  01 00 00    	ld	bc,_lin
1217  0170  09          	add	hl,bc
1218  0171  3A 00 00    	ld	a,(_s_lin1)
1219  0174  C6 F2       	add	a,0xf2
1220  0176  77          	ld	(hl),a
1221  0177  2E 00       	ld	l,0x00
1222  0179              l_spr_move_down_00114:
1223  0179  C9          	ret
1224  017A              	SECTION code_compiler
1225  017A              ;	---------------------------------
1226  017A              ; Function spr_move_horizontal
1227  017A              ; ---------------------------------
1228  017A              _spr_move_horizontal:
1229  017A  2A 00 00    	ld	hl,(_sprite)
1230  017D  26 00       	ld	h,0x00
1231  017F  01 00 00    	ld	bc,_state
1232  0182  09          	add	hl,bc
1233  0183  7E          	ld	a,(hl)
1234  0184  CB 57       	bit	2, a
1235  0186  28 05       	jr	Z,l_spr_move_horizontal_00104
1236  0188  CD 99 01    	call	_spr_move_right
1237  018B  18 0B       	jr	l_spr_move_horizontal_00106
1238  018D              l_spr_move_horizontal_00104:
1239  018D  CB 5F       	bit	3, a
1240  018F  28 05       	jr	Z,l_spr_move_horizontal_00105
1241  0191  CD 8D 02    	call	_spr_move_left
1242  0194  18 02       	jr	l_spr_move_horizontal_00106
1243  0196              l_spr_move_horizontal_00105:
1244  0196  2E 00       	ld	l,0x00
1245  0198              l_spr_move_horizontal_00106:
1246  0198  C9          	ret
1247  0199              	SECTION code_compiler
1248  0199              ;	---------------------------------
1249  0199              ; Function spr_move_right
1250  0199              ; ---------------------------------
1251  0199              _spr_move_right:
1252  0199  2A 00 00    	ld	hl,(_sprite)
1253  019C  26 00       	ld	h,0x00
1254  019E  01 00 00    	ld	bc,_colint
1255  01A1  09          	add	hl,bc
1256  01A2  7E          	ld	a,(hl)
1257  01A3  3C          	inc	a
1258  01A4  77          	ld	(hl),a
1259  01A5  4F          	ld	c, a
1260  01A6  2A 00 00    	ld	hl,(_s_class)
1261  01A9  26 00       	ld	h,0x00
1262  01AB  11 00 00    	ld	de,_sprite_frames
1263  01AE  19          	add	hl,de
1264  01AF  7E          	ld	a,(hl)
1265  01B0  91          	sub	a, c
1266  01B1  C2 8A 02    	jp	NZ,l_spr_move_right_00118
1267  01B4  2A 00 00    	ld	hl,(_sprite)
1268  01B7  26 00       	ld	h,0x00
1269  01B9  01 00 00    	ld	bc,_lin
1270  01BC  09          	add	hl,bc
1271  01BD  7E          	ld	a,(hl)
1272  01BE  32 00 00    	ld	(_s_lin1),a
1273  01C1  2A 00 00    	ld	hl,(_sprite)
1274  01C4  26 00       	ld	h,0x00
1275  01C6  01 00 00    	ld	bc,_col
1276  01C9  09          	add	hl,bc
1277  01CA  7E          	ld	a,(hl)
1278  01CB  FE 1E       	cp	a,0x1e
1279  01CD  30 5E       	jr	NC,l_spr_move_right_00108
1280  01CF  3C          	inc	a
1281  01D0  32 00 00    	ld	(_s_col1),a
1282  01D3  21 00 00    	ld	hl,_sprite_horizontal_check
1283  01D6  36 01       	ld	(hl),0x01
1284  01D8  2A FF FF    	ld	hl,(_s_col1 - 1)
1285  01DB  3A 00 00    	ld	a,(_s_lin1)
1286  01DE  6F          	ld	l,a
1287  01DF  E5          	push	hl
1288  01E0  CD 00 00    	call	_game_check_map
1289  01E3  F1          	pop	af
1290  01E4  7D          	ld	a,l
1291  01E5  32 00 00    	ld	(_tmp0),a
1292  01E8  B7          	or	a, a
1293  01E9  20 13       	jr	NZ,l_spr_move_right_00102
1294  01EB  3A 00 00    	ld	a,(_s_lin1)
1295  01EE  C6 0F       	add	a,0x0f
1296  01F0  4F          	ld	c, a
1297  01F1  3A 00 00    	ld	a, (_s_col1)
1298  01F4  47          	ld	b,a
1299  01F5  C5          	push	bc
1300  01F6  CD 00 00    	call	_game_check_map
1301  01F9  F1          	pop	af
1302  01FA  7D          	ld	a,l
1303  01FB  32 00 00    	ld	(_tmp0),a
1304  01FE              l_spr_move_right_00102:
1305  01FE  21 00 00    	ld	hl,_sprite_horizontal_check
1306  0201  36 00       	ld	(hl),0x00
1307  0203  3A 00 00    	ld	a,(_tmp0)
1308  0206  B7          	or	a, a
1309  0207  28 24       	jr	Z,l_spr_move_right_00108
1310  0209  2A 00 00    	ld	hl,(_sprite)
1311  020C  26 00       	ld	h,0x00
1312  020E  01 00 00    	ld	bc,_colint
1313  0211  09          	add	hl,bc
1314  0212  7E          	ld	a,(hl)
1315  0213  C6 FF       	add	a,0xff
1316  0215  77          	ld	(hl),a
1317  0216  3A 00 00    	ld	a,(_sprite_on_air)
1318  0219  B7          	or	a,a
1319  021A  20 0D       	jr	NZ,l_spr_move_right_00104
1320  021C  2A 00 00    	ld	hl,(_sprite)
1321  021F  26 00       	ld	h,0x00
1322  0221  01 00 00    	ld	bc,_colint
1323  0224  09          	add	hl,bc
1324  0225  7E          	ld	a,(hl)
1325  0226  C6 FF       	add	a,0xff
1326  0228  77          	ld	(hl),a
1327  0229              l_spr_move_right_00104:
1328  0229  2E 01       	ld	l,0x01
1329  022B  18 5F       	jr	l_spr_move_right_00119
1330  022D              l_spr_move_right_00108:
1331  022D  2A 00 00    	ld	hl,(_sprite)
1332  0230  26 00       	ld	h,0x00
1333  0232  01 00 00    	ld	bc,_col
1334  0235  09          	add	hl,bc
1335  0236  34          	inc	(hl)
1336  0237  2A 00 00    	ld	hl,(_sprite)
1337  023A  26 00       	ld	h,0x00
1338  023C  01 00 00    	ld	bc,_colint
1339  023F  09          	add	hl,bc
1340  0240  AF          	xor	a,a
1341  0241  77          	ld	(hl),a
1342  0242  2A 00 00    	ld	hl,(_sprite)
1343  0245  26 00       	ld	h,0x00
1344  0247  01 00 00    	ld	bc,_col
1345  024A  09          	add	hl,bc
1346  024B  5E          	ld	e,(hl)
1347  024C  3E 1E       	ld	a,0x1e
1348  024E  93          	sub	a,e
1349  024F  30 39       	jr	NC,l_spr_move_right_00118
1350  0251  3A 00 00    	ld	a,(_sprite)
1351  0254  D6 07       	sub	a,0x07
1352  0256  28 04       	jr	Z,l_spr_move_right_00156
1353  0258  4D          	ld	c,l
1354  0259  44          	ld	b,h
1355  025A  18 27       	jr	l_spr_move_right_00113
1356  025C              l_spr_move_right_00156:
1357  025C  CD 83 03    	call	_spr_page_right
1358  025F  3A 00 00    	ld	a,(_sprite)
1359  0262  C6 00       	add	a,+((_col) & 0xFF)
1360  0264  4D          	ld	c,l
1361  0265  5F          	ld	e,a
1362  0266  3E 00       	ld	a,+((_col) / 256)
1363  0268  CE 00       	adc	a,0x00
1364  026A  57          	ld	d,a
1365  026B  79          	ld	a, c
1366  026C  B7          	or	a, a
1367  026D  28 0F       	jr	Z,l_spr_move_right_00110
1368  026F  AF          	xor	a, a
1369  0270  12          	ld	(de), a
1370  0271  3A 07 00    	ld	a,(_lin + 7)
1371  0274  32 00 00    	ld	(_player_lin_scr),a
1372  0277  21 00 00    	ld	hl,_player_col_scr
1373  027A  36 00       	ld	(hl),0x00
1374  027C  18 08       	jr	l_spr_move_right_00114
1375  027E              l_spr_move_right_00110:
1376  027E  3E 1E       	ld	a,0x1e
1377  0280  12          	ld	(de), a
1378  0281  18 03       	jr	l_spr_move_right_00114
1379  0283              l_spr_move_right_00113:
1380  0283  3E 1E       	ld	a,0x1e
1381  0285  02          	ld	(bc), a
1382  0286              l_spr_move_right_00114:
1383  0286  2E 01       	ld	l,0x01
1384  0288  18 02       	jr	l_spr_move_right_00119
1385  028A              l_spr_move_right_00118:
1386  028A  2E 00       	ld	l,0x00
1387  028C              l_spr_move_right_00119:
1388  028C  C9          	ret
1389  028D              	SECTION code_compiler
1390  028D              ;	---------------------------------
1391  028D              ; Function spr_move_left
1392  028D              ; ---------------------------------
1393  028D              _spr_move_left:
1394  028D  01 00 00    	ld	bc,_colint+0
1395  0290  79          	ld	a, c
1396  0291  21 00 00    	ld	hl,_sprite
1397  0294  86          	add	a, (hl)
1398  0295  5F          	ld	e, a
1399  0296  78          	ld	a, b
1400  0297  CE 00       	adc	a,0x00
1401  0299  57          	ld	d, a
1402  029A  1A          	ld	a, (de)
1403  029B  C6 FF       	add	a,0xff
1404  029D  12          	ld	(de), a
1405  029E  79          	ld	a, c
1406  029F  86          	add	a, (hl)
1407  02A0  5F          	ld	e, a
1408  02A1  78          	ld	a, b
1409  02A2  CE 00       	adc	a,0x00
1410  02A4  57          	ld	d, a
1411  02A5  1A          	ld	a, (de)
1412  02A6  3C          	inc	a
1413  02A7  C2 80 03    	jp	NZ,l_spr_move_left_00118
1414  02AA  5E          	ld	e,(hl)
1415  02AB  16 00       	ld	d,0x00
1416  02AD  21 00 00    	ld	hl,_lin
1417  02B0  19          	add	hl,de
1418  02B1  7E          	ld	a,(hl)
1419  02B2  32 00 00    	ld	(_s_lin1),a
1420  02B5  2A 00 00    	ld	hl,(_sprite)
1421  02B8  26 00       	ld	h,0x00
1422  02BA  11 00 00    	ld	de,_col
1423  02BD  19          	add	hl,de
1424  02BE  7E          	ld	a,(hl)
1425  02BF  B7          	or	a, a
1426  02C0  28 58       	jr	Z,l_spr_move_left_00108
1427  02C2  C6 FF       	add	a,0xff
1428  02C4  32 00 00    	ld	(_s_col1),a
1429  02C7  21 00 00    	ld	hl,_sprite_horizontal_check
1430  02CA  36 01       	ld	(hl),0x01
1431  02CC  3A 00 00    	ld	a,(_s_col1)
1432  02CF  2A 00 00    	ld	hl,(_s_lin1)
1433  02D2  C5          	push	bc
1434  02D3  67          	ld	h,a
1435  02D4  E5          	push	hl
1436  02D5  CD 00 00    	call	_game_check_map
1437  02D8  F1          	pop	af
1438  02D9  C1          	pop	bc
1439  02DA  7D          	ld	a,l
1440  02DB  32 00 00    	ld	(_tmp0),a
1441  02DE  B7          	or	a, a
1442  02DF  20 16       	jr	NZ,l_spr_move_left_00102
1443  02E1  3A 00 00    	ld	a,(_s_lin1)
1444  02E4  C6 0F       	add	a,0x0f
1445  02E6  57          	ld	d, a
1446  02E7  3A 00 00    	ld	a,(_s_col1)
1447  02EA  C5          	push	bc
1448  02EB  5A          	ld	e,d
1449  02EC  57          	ld	d,a
1450  02ED  D5          	push	de
1451  02EE  CD 00 00    	call	_game_check_map
1452  02F1  F1          	pop	af
1453  02F2  C1          	pop	bc
1454  02F3  7D          	ld	a,l
1455  02F4  32 00 00    	ld	(_tmp0),a
1456  02F7              l_spr_move_left_00102:
1457  02F7  21 00 00    	ld	hl,_sprite_horizontal_check
1458  02FA  36 00       	ld	(hl),0x00
1459  02FC  3A 00 00    	ld	a,(_tmp0)
1460  02FF  B7          	or	a, a
1461  0300  28 18       	jr	Z,l_spr_move_left_00108
1462  0302  2A 00 00    	ld	hl,(_sprite)
1463  0305  26 00       	ld	h,0x00
1464  0307  09          	add	hl,bc
1465  0308  34          	inc	(hl)
1466  0309  3A 00 00    	ld	a,(_sprite_on_air)
1467  030C  B7          	or	a, a
1468  030D  20 07       	jr	NZ,l_spr_move_left_00104
1469  030F  2A 00 00    	ld	hl,(_sprite)
1470  0312  26 00       	ld	h,0x00
1471  0314  09          	add	hl,bc
1472  0315  34          	inc	(hl)
1473  0316              l_spr_move_left_00104:
1474  0316  2E 01       	ld	l,0x01
1475  0318  18 68       	jr	l_spr_move_left_00119
1476  031A              l_spr_move_left_00108:
1477  031A  2A 00 00    	ld	hl,(_sprite)
1478  031D  26 00       	ld	h,0x00
1479  031F  11 00 00    	ld	de,_col
1480  0322  19          	add	hl,de
1481  0323  7E          	ld	a,(hl)
1482  0324  EB          	ex	de,hl
1483  0325  C6 FF       	add	a,0xff
1484  0327  12          	ld	(de),a
1485  0328  2A 00 00    	ld	hl,(_sprite)
1486  032B  26 00       	ld	h,0x00
1487  032D  09          	add	hl,bc
1488  032E  4D          	ld	c,l
1489  032F  44          	ld	b,h
1490  0330  2A 00 00    	ld	hl,(_s_class)
1491  0333  26 00       	ld	h,0x00
1492  0335  11 00 00    	ld	de,_sprite_frames
1493  0338  19          	add	hl,de
1494  0339  7E          	ld	a,(hl)
1495  033A  C6 FF       	add	a,0xff
1496  033C  02          	ld	(bc), a
1497  033D  2A 00 00    	ld	hl,(_sprite)
1498  0340  26 00       	ld	h,0x00
1499  0342  01 00 00    	ld	bc,_col
1500  0345  09          	add	hl,bc
1501  0346  7E          	ld	a,(hl)
1502  0347  3C          	inc	a
1503  0348  20 36       	jr	NZ,l_spr_move_left_00118
1504  034A  3A 00 00    	ld	a,(_sprite)
1505  034D  D6 07       	sub	a,0x07
1506  034F  4D          	ld	c,l
1507  0350  44          	ld	b,h
1508  0351  20 27       	jr	NZ,l_spr_move_left_00113
1509  0353  CD B6 03    	call	_spr_page_left
1510  0356  3A 00 00    	ld	a,(_sprite)
1511  0359  C6 00       	add	a,+((_col) & 0xFF)
1512  035B  4D          	ld	c,l
1513  035C  5F          	ld	e,a
1514  035D  3E 00       	ld	a,+((_col) / 256)
1515  035F  CE 00       	adc	a,0x00
1516  0361  57          	ld	d,a
1517  0362  79          	ld	a, c
1518  0363  B7          	or	a, a
1519  0364  28 10       	jr	Z,l_spr_move_left_00110
1520  0366  3E 1E       	ld	a,0x1e
1521  0368  12          	ld	(de), a
1522  0369  3A 07 00    	ld	a,(_lin + 7)
1523  036C  32 00 00    	ld	(_player_lin_scr),a
1524  036F  21 00 00    	ld	hl,_player_col_scr
1525  0372  36 1E       	ld	(hl),0x1e
1526  0374  18 06       	jr	l_spr_move_left_00114
1527  0376              l_spr_move_left_00110:
1528  0376  AF          	xor	a, a
1529  0377  12          	ld	(de), a
1530  0378  18 02       	jr	l_spr_move_left_00114
1531  037A              l_spr_move_left_00113:
1532  037A  AF          	xor	a, a
1533  037B  02          	ld	(bc), a
1534  037C              l_spr_move_left_00114:
1535  037C  2E 01       	ld	l,0x01
1536  037E  18 02       	jr	l_spr_move_left_00119
1537  0380              l_spr_move_left_00118:
1538  0380  2E 00       	ld	l,0x00
1539  0382              l_spr_move_left_00119:
1540  0382  C9          	ret
1541  0383              	SECTION code_compiler
1542  0383              ;	---------------------------------
1543  0383              ; Function spr_page_right
1544  0383              ; ---------------------------------
1545  0383              _spr_page_right:
1546  0383  2A FF FF    	ld	hl,(_map_width - 1)
1547  0386  3A 00 00    	ld	a,(_scr_curr)
1548  0389  6F          	ld	l,a
1549  038A  E5          	push	hl
1550  038B  CD 00 00    	call	__moduchar_callee
1551  038E  7D          	ld	a, l
1552  038F  3C          	inc	a
1553  0390  32 00 00    	ld	(_tmp1),a
1554  0393  21 00 00    	ld	hl,_map_width
1555  0396  96          	sub	a, (hl)
1556  0397  30 1A       	jr	NC,l_spr_page_right_00102
1557  0399  3A 00 00    	ld	a,(_game_boss)
1558  039C  B7          	or	a, a
1559  039D  28 06       	jr	Z,l_spr_page_right_00101
1560  039F  3A 00 00    	ld	a,(_game_inmune)
1561  03A2  B7          	or	a, a
1562  03A3  28 0E       	jr	Z,l_spr_page_right_00102
1563  03A5              l_spr_page_right_00101:
1564  03A5  21 00 00    	ld	hl,_scr_curr
1565  03A8  34          	inc	(hl)
1566  03A9  CD E2 04    	call	_spr_page_map
1567  03AC  CD 00 00    	call	_game_draw_screen
1568  03AF  2E 01       	ld	l,0x01
1569  03B1  18 02       	jr	l_spr_page_right_00105
1570  03B3              l_spr_page_right_00102:
1571  03B3  2E 00       	ld	l,0x00
1572  03B5              l_spr_page_right_00105:
1573  03B5  C9          	ret
1574  03B6              	SECTION code_compiler
1575  03B6              ;	---------------------------------
1576  03B6              ; Function spr_page_left
1577  03B6              ; ---------------------------------
1578  03B6              _spr_page_left:
1579  03B6  2A FF FF    	ld	hl,(_map_width - 1)
1580  03B9  3A 00 00    	ld	a,(_scr_curr)
1581  03BC  6F          	ld	l,a
1582  03BD  E5          	push	hl
1583  03BE  CD 00 00    	call	__moduchar_callee
1584  03C1  7D          	ld	a,l
1585  03C2  32 00 00    	ld	(_tmp1),a
1586  03C5  B7          	or	a, a
1587  03C6  28 1A       	jr	Z,l_spr_page_left_00102
1588  03C8  3A 00 00    	ld	a,(_game_boss)
1589  03CB  B7          	or	a, a
1590  03CC  28 06       	jr	Z,l_spr_page_left_00101
1591  03CE  3A 00 00    	ld	a,(_game_inmune)
1592  03D1  B7          	or	a, a
1593  03D2  28 0E       	jr	Z,l_spr_page_left_00102
1594  03D4              l_spr_page_left_00101:
1595  03D4  21 00 00    	ld	hl,_scr_curr
1596  03D7  35          	dec	(hl)
1597  03D8  CD E2 04    	call	_spr_page_map
1598  03DB  CD 00 00    	call	_game_draw_screen
1599  03DE  2E 01       	ld	l,0x01
1600  03E0  18 02       	jr	l_spr_page_left_00105
1601  03E2              l_spr_page_left_00102:
1602  03E2  2E 00       	ld	l,0x00
1603  03E4              l_spr_page_left_00105:
1604  03E4  C9          	ret
1605  03E5              	SECTION code_compiler
1606  03E5              ;	---------------------------------
1607  03E5              ; Function spr_page_down
1608  03E5              ; ---------------------------------
1609  03E5              _spr_page_down:
1610  03E5  2A FF FF    	ld	hl,(_map_width - 1)
1611  03E8  3A 00 00    	ld	a,(_scr_curr)
1612  03EB  6F          	ld	l,a
1613  03EC  E5          	push	hl
1614  03ED  CD 00 00    	call	__divuchar_callee
1615  03F0  7D          	ld	a, l
1616  03F1  3C          	inc	a
1617  03F2  32 00 00    	ld	(_tmp1),a
1618  03F5  21 00 00    	ld	hl,_map_heigth
1619  03F8  96          	sub	a, (hl)
1620  03F9  30 36       	jr	NC,l_spr_page_down_00102
1621  03FB  3A 00 00    	ld	a,(_game_boss)
1622  03FE  B7          	or	a, a
1623  03FF  28 06       	jr	Z,l_spr_page_down_00101
1624  0401  3A 00 00    	ld	a,(_game_inmune)
1625  0404  B7          	or	a, a
1626  0405  28 2A       	jr	Z,l_spr_page_down_00102
1627  0407              l_spr_page_down_00101:
1628  0407  3A 00 00    	ld	a,(_scr_curr)
1629  040A  21 00 00    	ld	hl,_map_width
1630  040D  86          	add	a, (hl)
1631  040E  32 00 00    	ld	(_scr_curr),a
1632  0411  CD E2 04    	call	_spr_page_map
1633  0414  CD 00 00    	call	_game_draw_screen
1634  0417  21 00 00    	ld	hl,_player_lin_scr
1635  041A  36 08       	ld	(hl),0x08
1636  041C  2A 00 00    	ld	hl,(_sprite)
1637  041F  26 00       	ld	h,0x00
1638  0421  01 00 00    	ld	bc,_lin
1639  0424  09          	add	hl,bc
1640  0425  36 08       	ld	(hl),0x08
1641  0427  3A 07 00    	ld	a,(_col + 0x0007)
1642  042A  32 00 00    	ld	(_player_col_scr),a
1643  042D  2E 01       	ld	l,0x01
1644  042F  18 02       	jr	l_spr_page_down_00105
1645  0431              l_spr_page_down_00102:
1646  0431  2E 00       	ld	l,0x00
1647  0433              l_spr_page_down_00105:
1648  0433  C9          	ret
1649  0434              	SECTION code_compiler
1650  0434              ;	---------------------------------
1651  0434              ; Function spr_page_up
1652  0434              ; ---------------------------------
1653  0434              _spr_page_up:
1654  0434  2A FF FF    	ld	hl,(_map_width - 1)
1655  0437  3A 00 00    	ld	a,(_scr_curr)
1656  043A  6F          	ld	l,a
1657  043B  E5          	push	hl
1658  043C  CD 00 00    	call	__divuchar_callee
1659  043F  7D          	ld	a,l
1660  0440  32 00 00    	ld	(_tmp1),a
1661  0443  B7          	or	a, a
1662  0444  28 36       	jr	Z,l_spr_page_up_00102
1663  0446  3A 00 00    	ld	a,(_game_boss)
1664  0449  B7          	or	a, a
1665  044A  28 06       	jr	Z,l_spr_page_up_00101
1666  044C  3A 00 00    	ld	a,(_game_inmune)
1667  044F  B7          	or	a, a
1668  0450  28 2A       	jr	Z,l_spr_page_up_00102
1669  0452              l_spr_page_up_00101:
1670  0452  3A 00 00    	ld	a,(_scr_curr)
1671  0455  21 00 00    	ld	hl,_map_width
1672  0458  96          	sub	a, (hl)
1673  0459  32 00 00    	ld	(_scr_curr),a
1674  045C  CD E2 04    	call	_spr_page_map
1675  045F  CD 00 00    	call	_game_draw_screen
1676  0462  2A 00 00    	ld	hl,(_sprite)
1677  0465  26 00       	ld	h,0x00
1678  0467  01 00 00    	ld	bc,_lin
1679  046A  09          	add	hl,bc
1680  046B  36 8C       	ld	(hl),0x8c
1681  046D  21 00 00    	ld	hl,_player_lin_scr
1682  0470  36 8C       	ld	(hl),0x8c
1683  0472  3A 07 00    	ld	a,(_col + 0x0007)
1684  0475  32 00 00    	ld	(_player_col_scr),a
1685  0478  2E 01       	ld	l,0x01
1686  047A  18 02       	jr	l_spr_page_up_00105
1687  047C              l_spr_page_up_00102:
1688  047C  2E 00       	ld	l,0x00
1689  047E              l_spr_page_up_00105:
1690  047E  C9          	ret
1691  047F              	SECTION code_compiler
1692  047F              ;	---------------------------------
1693  047F              ; Function spr_clear_scr
1694  047F              ; ---------------------------------
1695  047F              _spr_clear_scr:
1696  047F  06 00       	ld	b,0x00
1697  0481              l_spr_clear_scr_00105:
1698  0481  C5          	push	bc
1699  0482  21 00 00    	ld	hl,0x0000
1700  0485  E5          	push	hl
1701  0486  AF          	xor	a, a
1702  0487  48          	ld	c,b
1703  0488  47          	ld	b,a
1704  0489  C5          	push	bc
1705  048A  CD 00 00    	call	_NIRVANAP_spriteT_callee
1706  048D  C1          	pop	bc
1707  048E  04          	inc	b
1708  048F  78          	ld	a, b
1709  0490  D6 08       	sub	a,0x08
1710  0492  38 ED       	jr	C,l_spr_clear_scr_00105
1711  0494  76          	halt
1712  0495  F3          	di
1713  0496  0E 00       	ld	c,0x00
1714  0498              l_spr_clear_scr_00117:
1715  0498  79          	ld	a, c
1716  0499  87          	add	a, a
1717  049A  47          	ld	b, a
1718  049B  50          	ld	d, b
1719  049C  1E 01       	ld	e,0x01
1720  049E              l_spr_clear_scr_00107:
1721  049E  7B          	ld	a, e
1722  049F  07          	rlca
1723  04A0  07          	rlca
1724  04A1  07          	rlca
1725  04A2  07          	rlca
1726  04A3  E6 F0       	and	a,0xf0
1727  04A5  C5          	push	bc
1728  04A6  D5          	push	de
1729  04A7  5F          	ld	e,a
1730  04A8  D5          	push	de
1731  04A9  AF          	xor	a, a
1732  04AA  F5          	push	af
1733  04AB  33          	inc	sp
1734  04AC  CD 00 00    	call	_NIRVANAP_fillT_raw_callee
1735  04AF  D1          	pop	de
1736  04B0  C1          	pop	bc
1737  04B1  1C          	inc	e
1738  04B2  7B          	ld	a, e
1739  04B3  D6 0A       	sub	a,0x0a
1740  04B5  38 E7       	jr	C,l_spr_clear_scr_00107
1741  04B7  3E 1E       	ld	a,0x1e
1742  04B9  90          	sub	a, b
1743  04BA  47          	ld	b, a
1744  04BB  1E 01       	ld	e,0x01
1745  04BD              l_spr_clear_scr_00109:
1746  04BD  7B          	ld	a, e
1747  04BE  07          	rlca
1748  04BF  07          	rlca
1749  04C0  07          	rlca
1750  04C1  07          	rlca
1751  04C2  E6 F0       	and	a,0xf0
1752  04C4  57          	ld	d, a
1753  04C5  C5          	push	bc
1754  04C6  D5          	push	de
1755  04C7  4A          	ld	c, d
1756  04C8  C5          	push	bc
1757  04C9  AF          	xor	a, a
1758  04CA  F5          	push	af
1759  04CB  33          	inc	sp
1760  04CC  CD 00 00    	call	_NIRVANAP_fillT_raw_callee
1761  04CF  D1          	pop	de
1762  04D0  C1          	pop	bc
1763  04D1  1C          	inc	e
1764  04D2  7B          	ld	a, e
1765  04D3  D6 0A       	sub	a,0x0a
1766  04D5  38 E6       	jr	C,l_spr_clear_scr_00109
1767  04D7  FB          	ei
1768  04D8  76          	halt
1769  04D9  F3          	di
1770  04DA  0C          	inc	c
1771  04DB  79          	ld	a, c
1772  04DC  D6 08       	sub	a,0x08
1773  04DE  38 B8       	jr	C,l_spr_clear_scr_00117
1774  04E0  FB          	ei
1775  04E1  C9          	ret
1776  04E2              	SECTION code_compiler
1777  04E2              ;	---------------------------------
1778  04E2              ; Function spr_page_map
1779  04E2              ; ---------------------------------
1780  04E2              _spr_page_map:
1781  04E2  CD 00 00    	call	___sdcc_enter_ix
1782  04E5  21 F3 FF    	ld	hl, -13
1783  04E8  39          	add	hl, sp
1784  04E9  F9          	ld	sp, hl
1785  04EA  21 00 00    	ld	hl,_game_world
1786  04ED  5E          	ld	e, (hl)
1787  04EE  3A 00 00    	ld	a,(_scr_curr)
1788  04F1  DD 77 F3    	ld	(ix-13),a
1789  04F4  7B          	ld	a, e
1790  04F5  07          	rlca
1791  04F6  07          	rlca
1792  04F7  07          	rlca
1793  04F8  07          	rlca
1794  04F9  E6 F0       	and	a,0xf0
1795  04FB  47          	ld	b,a
1796  04FC  DD 86 F3    	add	a,(ix-13)
1797  04FF  4F          	ld	c, a
1798  0500  DD 36 F9 10 	ld	(ix-7),0x10
1799  0504  C5          	push	bc
1800  0505  D5          	push	de
1801  0506  CD 7F 04    	call	_spr_clear_scr
1802  0509  D1          	pop	de
1803  050A  C1          	pop	bc
1804  050B  F3          	di
1805  050C  21 00 00    	ld	hl,_GLOBAL_ZX_PORT_7FFD
1806  050F  36 16       	ld	(hl),0x16
1807  0511  C5          	push	bc
1808  0512  3E 16       	ld	a,0x16
1809  0514  01 FD 7F    	ld	bc,_IO_7FFD
1810  0517  ED 79       	out	(c),a
1811  0519  C1          	pop	bc
1812  051A  DD 7E F3    	ld	a,(ix-13)
1813  051D  3C          	inc	a
1814  051E  20 0E       	jr	NZ,l_spr_page_map_00102
1815  0520  57          	ld	d,a
1816  0521  21 00 00    	ld	hl,_start_scr0
1817  0524  19          	add	hl, de
1818  0525  7E          	ld	a, (hl)
1819  0526  DD 77 F3    	ld	(ix-13),a
1820  0529  78          	ld	a, b
1821  052A  DD 86 F3    	add	a,(ix-13)
1822  052D  4F          	ld	c, a
1823  052E              l_spr_page_map_00102:
1824  052E  06 00       	ld	b,0x00
1825  0530  21 00 00    	ld	hl,_paper0
1826  0533  09          	add	hl, bc
1827  0534  7E          	ld	a, (hl)
1828  0535  DD 77 F4    	ld	(ix-12),a
1829  0538  16 00       	ld	d,0x00
1830  053A  21 00 00    	ld	hl,_world0_w
1831  053D  19          	add	hl, de
1832  053E  7E          	ld	a, (hl)
1833  053F  DD 77 F6    	ld	(ix-10),a
1834  0542  16 00       	ld	d,0x00
1835  0544  21 00 00    	ld	hl,_world0_h
1836  0547  19          	add	hl, de
1837  0548  7E          	ld	a, (hl)
1838  0549  DD 77 F5    	ld	(ix-11),a
1839  054C  21 00 00    	ld	hl,_GLOBAL_ZX_PORT_7FFD
1840  054F  36 10       	ld	(hl),0x10
1841  0551  C5          	push	bc
1842  0552  3E 10       	ld	a,0x10
1843  0554  01 FD 7F    	ld	bc,_IO_7FFD
1844  0557  ED 79       	out	(c),a
1845  0559  C1          	pop	bc
1846  055A  1E 00       	ld	e,0x00
1847  055C  DD 73 F7    	ld	(ix-9),e
1848  055F  DD 73 F8    	ld	(ix-8),e
1849  0562              l_spr_page_map_00103:
1850  0562  7B          	ld	a, e
1851  0563  91          	sub	a, c
1852  0564  30 31       	jr	NC,l_spr_page_map_00105
1853  0566  C5          	push	bc
1854  0567  3E 16       	ld	a,0x16
1855  0569  01 FD 7F    	ld	bc,_IO_7FFD
1856  056C  ED 79       	out	(c),a
1857  056E  C1          	pop	bc
1858  056F  16 00       	ld	d,0x00
1859  0571  21 00 00    	ld	hl,_lenght0
1860  0574  19          	add	hl, de
1861  0575  46          	ld	b, (hl)
1862  0576  16 00       	ld	d,0x00
1863  0578  21 00 00    	ld	hl,_GLOBAL_ZX_PORT_7FFD
1864  057B  36 10       	ld	(hl),0x10
1865  057D  C5          	push	bc
1866  057E  3E 10       	ld	a,0x10
1867  0580  01 FD 7F    	ld	bc,_IO_7FFD
1868  0583  ED 79       	out	(c),a
1869  0585  C1          	pop	bc
1870  0586  DD 7E F7    	ld	a,(ix-9)
1871  0589  80          	add	a, b
1872  058A  DD 77 F7    	ld	(ix-9),a
1873  058D  DD 7E F8    	ld	a,(ix-8)
1874  0590  8A          	adc	a, d
1875  0591  DD 77 F8    	ld	(ix-8),a
1876  0594  1C          	inc	e
1877  0595  18 CB       	jr	l_spr_page_map_00103
1878  0597              l_spr_page_map_00105:
1879  0597  FB          	ei
1880  0598  F3          	di
1881  0599  0E 00       	ld	c,0x00
1882  059B              l_spr_page_map_00128:
1883  059B  C5          	push	bc
1884  059C  3E 16       	ld	a,0x16
1885  059E  01 FD 7F    	ld	bc,_IO_7FFD
1886  05A1  ED 79       	out	(c),a
1887  05A3  C1          	pop	bc
1888  05A4  59          	ld	e, c
1889  05A5  16 00       	ld	d,0x00
1890  05A7  DD 6E F7    	ld	l,(ix-9)
1891  05AA  DD 66 F8    	ld	h,(ix-8)
1892  05AD  19          	add	hl,de
1893  05AE  EB          	ex	de,hl
1894  05AF  21 00 00    	ld	hl,_world0
1895  05B2  19          	add	hl, de
1896  05B3  7E          	ld	a, (hl)
1897  05B4  DD 77 FD    	ld	(ix-3),a
1898  05B7  13          	inc	de
1899  05B8  21 00 00    	ld	hl,_world0
1900  05BB  19          	add	hl, de
1901  05BC  7E          	ld	a, (hl)
1902  05BD  DD 77 FC    	ld	(ix-4),a
1903  05C0  21 00 00    	ld	hl,_GLOBAL_ZX_PORT_7FFD
1904  05C3  36 10       	ld	(hl),0x10
1905  05C5  C5          	push	bc
1906  05C6  3E 10       	ld	a,0x10
1907  05C8  01 FD 7F    	ld	bc,_IO_7FFD
1908  05CB  ED 79       	out	(c),a
1909  05CD  C1          	pop	bc
1910  05CE  DD 7E FD    	ld	a,(ix-3)
1911  05D1  D6 80       	sub	a,0x80
1912  05D3  30 4F       	jr	NC,l_spr_page_map_00116
1913  05D5  DD 7E F9    	ld	a,(ix-7)
1914  05D8  DD 77 FE    	ld	(ix-2),a
1915  05DB  DD 36 FF 00 	ld	(ix-1),0x00
1916  05DF  C5          	push	bc
1917  05E0  DD 6E FE    	ld	l,(ix-2)
1918  05E3  DD 66 FF    	ld	h,(ix-1)
1919  05E6  CD 00 00    	call	_game_obj_chk
1920  05E9  C1          	pop	bc
1921  05EA  45          	ld	b, l
1922  05EB  3E 00       	ld	a, +((_scr_map) & 0xFF)
1923  05ED  DD 86 F9    	add	a,(ix-7)
1924  05F0  5F          	ld	e, a
1925  05F1  3E 00       	ld	a, +((_scr_map) / 256)
1926  05F3  CE 00       	adc	a,0x00
1927  05F5  57          	ld	d, a
1928  05F6  78          	ld	a, b
1929  05F7  B7          	or	a, a
1930  05F8  20 06       	jr	NZ,l_spr_page_map_00107
1931  05FA  DD 7E FD    	ld	a,(ix-3)
1932  05FD  12          	ld	(de), a
1933  05FE  18 1F       	jr	l_spr_page_map_00108
1934  0600              l_spr_page_map_00107:
1935  0600  DD 6E F9    	ld	l,(ix-7)
1936  0603  26 00       	ld	h,0x00
1937  0605  23          	inc	hl
1938  0606  3E 00       	ld	a, +((_scr_map) & 0xFF)
1939  0608  85          	add	a, l
1940  0609  6F          	ld	l, a
1941  060A  3E 00       	ld	a, +((_scr_map) / 256)
1942  060C  8C          	adc	a, h
1943  060D  67          	ld	h, a
1944  060E  36 00       	ld	(hl),0x00
1945  0610  C5          	push	bc
1946  0611  D5          	push	de
1947  0612  DD 6E FE    	ld	l,(ix-2)
1948  0615  DD 66 FF    	ld	h,(ix-1)
1949  0618  CD 00 00    	call	_game_match_back
1950  061B  D1          	pop	de
1951  061C  C1          	pop	bc
1952  061D  7D          	ld	a,l
1953  061E  12          	ld	(de), a
1954  061F              l_spr_page_map_00108:
1955  061F  DD 34 F9    	inc	(ix-7)
1956  0622  18 6D       	jr	l_spr_page_map_00117
1957  0624              l_spr_page_map_00116:
1958  0624  DD 7E FD    	ld	a,(ix-3)
1959  0627  C6 80       	add	a,0x80
1960  0629  DD 77 FB    	ld	(ix-5),a
1961  062C  DD 46 F9    	ld	b,(ix-7)
1962  062F  DD 36 FA 00 	ld	(ix-6),0x00
1963  0633              l_spr_page_map_00126:
1964  0633  DD 7E FA    	ld	a,(ix-6)
1965  0636  DD 96 FB    	sub	a,(ix-5)
1966  0639  30 52       	jr	NC,l_spr_page_map_00146
1967  063B  DD 70 FE    	ld	(ix-2),b
1968  063E  DD 36 FF 00 	ld	(ix-1),0x00
1969  0642  C5          	push	bc
1970  0643  DD 6E FE    	ld	l,(ix-2)
1971  0646  DD 66 FF    	ld	h,(ix-1)
1972  0649  CD 00 00    	call	_game_obj_chk
1973  064C  C1          	pop	bc
1974  064D  7D          	ld	a,l
1975  064E  B7          	or	a, a
1976  064F  20 0F       	jr	NZ,l_spr_page_map_00110
1977  0651  3E 00       	ld	a, +((_scr_map) & 0xFF)
1978  0653  80          	add	a, b
1979  0654  5F          	ld	e, a
1980  0655  3E 00       	ld	a, +((_scr_map) / 256)
1981  0657  CE 00       	adc	a,0x00
1982  0659  57          	ld	d, a
1983  065A  DD 7E FC    	ld	a,(ix-4)
1984  065D  12          	ld	(de), a
1985  065E  18 22       	jr	l_spr_page_map_00111
1986  0660              l_spr_page_map_00110:
1987  0660  58          	ld	e, b
1988  0661  16 00       	ld	d,0x00
1989  0663  13          	inc	de
1990  0664  21 00 00    	ld	hl,_scr_map
1991  0667  19          	add	hl, de
1992  0668  36 00       	ld	(hl),0x00
1993  066A  3E 00       	ld	a, +((_scr_map) & 0xFF)
1994  066C  80          	add	a, b
1995  066D  5F          	ld	e, a
1996  066E  3E 00       	ld	a, +((_scr_map) / 256)
1997  0670  CE 00       	adc	a,0x00
1998  0672  57          	ld	d, a
1999  0673  C5          	push	bc
2000  0674  D5          	push	de
2001  0675  DD 6E FE    	ld	l,(ix-2)
2002  0678  DD 66 FF    	ld	h,(ix-1)
2003  067B  CD 00 00    	call	_game_match_back
2004  067E  D1          	pop	de
2005  067F  C1          	pop	bc
2006  0680  7D          	ld	a,l
2007  0681  12          	ld	(de), a
2008  0682              l_spr_page_map_00111:
2009  0682  04          	inc	b
2010  0683  78          	ld	a, b
2011  0684  D6 A0       	sub	a,0xa0
2012  0686  30 05       	jr	NC,l_spr_page_map_00146
2013  0688  DD 34 FA    	inc	(ix-6)
2014  068B  18 A6       	jr	l_spr_page_map_00126
2015  068D              l_spr_page_map_00146:
2016  068D  DD 70 F9    	ld	(ix-7),b
2017  0690  0C          	inc	c
2018  0691              l_spr_page_map_00117:
2019  0691  DD 7E F9    	ld	a,(ix-7)
2020  0694  D6 A0       	sub	a,0xa0
2021  0696  30 07       	jr	NC,l_spr_page_map_00120
2022  0698  0C          	inc	c
2023  0699  79          	ld	a, c
2024  069A  D6 A0       	sub	a,0xa0
2025  069C  DA 9B 05    	jp	C, l_spr_page_map_00128
2026  069F              l_spr_page_map_00120:
2027  069F  DD 7E F3    	ld	a,(ix-13)
2028  06A2  32 00 00    	ld	(_scr_curr),a
2029  06A5  DD 7E F6    	ld	a,(ix-10)
2030  06A8  32 00 00    	ld	(_map_width),a
2031  06AB  DD 7E F5    	ld	a,(ix-11)
2032  06AE  32 00 00    	ld	(_map_heigth),a
2033  06B1  DD 7E F4    	ld	a,(ix-12)
2034  06B4  32 00 00    	ld	(_map_paper),a
2035  06B7  CD E4 0B    	call	_spr_init_effects
2036  06BA  3A 00 00    	ld	a,(_map_paper_last)
2037  06BD  21 00 00    	ld	hl,_map_paper
2038  06C0  96          	sub	a, (hl)
2039  06C1  28 03       	jr	Z,l_spr_page_map_00122
2040  06C3  CD 92 13    	call	_spr_btile_paint_back
2041  06C6              l_spr_page_map_00122:
2042  06C6  FB          	ei
2043  06C7  CD 00 00    	call	_NIRVANAP_start
2044  06CA  21 00 00    	ld	hl,_screen_ink
2045  06CD  36 06       	ld	(hl),0x06
2046  06CF  3A 00 00    	ld	a,(_game_debug)
2047  06D2  B7          	or	a, a
2048  06D3  28 17       	jr	Z,l_spr_page_map_00130
2049  06D5  21 00 00    	ld	hl,___str_0
2050  06D8  E5          	push	hl
2051  06D9  21 17 0C    	ld	hl,0x0c17
2052  06DC  E5          	push	hl
2053  06DD  CD 00 00    	call	_zx_print_str
2054  06E0  3A 00 00    	ld	a,(_scr_curr)
2055  06E3  F5          	push	af
2056  06E4  33          	inc	sp
2057  06E5  21 17 10    	ld	hl,0x1017
2058  06E8  E5          	push	hl
2059  06E9  CD 00 00    	call	_zx_print_chr
2060  06EC              l_spr_page_map_00130:
2061  06EC  DD F9       	ld	sp, ix
2062  06EE  DD E1       	pop	ix
2063  06F0  C9          	ret
2064  06F1              	SECTION rodata_compiler
2065  0000              ___str_0:
2066  0000  53 43 52 3A 	DEFM "SCR:"
2067  0004  00          	DEFB 0x00
2068  0005              	SECTION code_compiler
2069  06F1              ;	---------------------------------
2070  06F1              ; Function spr_paint_player
2071  06F1              ; ---------------------------------
2072  06F1              _spr_paint_player:
2073  06F1  3A 00 00    	ld	a,(_player_hit)
2074  06F4  B7          	or	a, a
2075  06F5  28 1C       	jr	Z,l_spr_paint_player_00104
2076  06F7  21 00 00    	ld	hl,_loop_count
2077  06FA  CB 46       	bit	0, (hl)
2078  06FC  20 15       	jr	NZ,l_spr_paint_player_00104
2079  06FE  CD 61 0A    	call	_spr_back_repaint
2080  0701  21 00 00    	ld	hl,0x0000
2081  0704  E5          	push	hl
2082  0705  AF          	xor	a, a
2083  0706  2A 00 00    	ld	hl,(_sprite)
2084  0709  67          	ld	h,a
2085  070A  E5          	push	hl
2086  070B  CD 00 00    	call	_NIRVANAP_spriteT_callee
2087  070E  2E 01       	ld	l,0x01
2088  0710  C3 9D 07    	jp	l_spr_paint_player_00113
2089  0713              l_spr_paint_player_00104:
2090  0713  3A 07 00    	ld	a,(_col + 0x0007)
2091  0716  32 00 00    	ld	(_s_col1),a
2092  0719  3A 07 00    	ld	a,(_lin + 0x0007)
2093  071C  32 00 00    	ld	(_s_lin1),a
2094  071F  21 00 00    	ld	hl,_s_lin0
2095  0722  96          	sub	a, (hl)
2096  0723  20 09       	jr	NZ,l_spr_paint_player_00109
2097  0725  3A 00 00    	ld	a,(_s_col1)
2098  0728  21 00 00    	ld	hl,_s_col0
2099  072B  96          	sub	a, (hl)
2100  072C  28 30       	jr	Z,l_spr_paint_player_00110
2101  072E              l_spr_paint_player_00109:
2102  072E  21 07 00    	ld	hl,+(_tile + 0x0007)
2103  0731  4E          	ld	c, (hl)
2104  0732  21 07 00    	ld	hl,+(_colint + 0x0007)
2105  0735  46          	ld	b, (hl)
2106  0736  79          	ld	a, c
2107  0737  80          	add	a, b
2108  0738  32 00 00    	ld	(_s_tile1),a
2109  073B  3A 00 00    	ld	a,(_player_onstair)
2110  073E  B7          	or	a, a
2111  073F  28 03       	jr	Z,l_spr_paint_player_00106
2112  0741  CD 00 00    	call	_player_anim_stairs
2113  0744              l_spr_paint_player_00106:
2114  0744  CD 61 0A    	call	_spr_back_repaint
2115  0747  2A FF FF    	ld	hl,(_s_col1 - 1)
2116  074A  3A 00 00    	ld	a,(_s_lin1)
2117  074D  6F          	ld	l,a
2118  074E  E5          	push	hl
2119  074F  2A FF FF    	ld	hl,(_s_tile1 - 1)
2120  0752  3A 00 00    	ld	a,(_sprite)
2121  0755  6F          	ld	l,a
2122  0756  E5          	push	hl
2123  0757  CD 00 00    	call	_NIRVANAP_spriteT_callee
2124  075A  2E 01       	ld	l,0x01
2125  075C  18 3F       	jr	l_spr_paint_player_00113
2126  075E              l_spr_paint_player_00110:
2127  075E  3A 00 00    	ld	a,(_sprite)
2128  0761  07          	rlca
2129  0762  07          	rlca
2130  0763  07          	rlca
2131  0764  E6 F8       	and	a,0xf8
2132  0766  4F          	ld	c, a
2133  0767  06 00       	ld	b,0x00
2134  0769  21 98 DC    	ld	hl,0xdc98
2135  076C  09          	add	hl, bc
2136  076D  7E          	ld	a, (hl)
2137  076E  32 00 00    	ld	(_s_tile0),a
2138  0771  21 07 00    	ld	hl,+(_tile + 0x0007)
2139  0774  4E          	ld	c, (hl)
2140  0775  21 07 00    	ld	hl,+(_colint + 0x0007)
2141  0778  46          	ld	b, (hl)
2142  0779  79          	ld	a, c
2143  077A  80          	add	a, b
2144  077B  32 00 00    	ld	(_s_tile1),a
2145  077E  21 00 00    	ld	hl,_s_tile0
2146  0781  96          	sub	a, (hl)
2147  0782  28 17       	jr	Z,l_spr_paint_player_00111
2148  0784  2A FF FF    	ld	hl,(_s_col1 - 1)
2149  0787  3A 00 00    	ld	a,(_s_lin1)
2150  078A  6F          	ld	l,a
2151  078B  E5          	push	hl
2152  078C  2A FF FF    	ld	hl,(_s_tile1 - 1)
2153  078F  3A 00 00    	ld	a,(_sprite)
2154  0792  6F          	ld	l,a
2155  0793  E5          	push	hl
2156  0794  CD 00 00    	call	_NIRVANAP_spriteT_callee
2157  0797  2E 00       	ld	l,0x00
2158  0799  18 02       	jr	l_spr_paint_player_00113
2159  079B              l_spr_paint_player_00111:
2160  079B  2E 00       	ld	l,0x00
2161  079D              l_spr_paint_player_00113:
2162  079D  C9          	ret
2163  079E              	SECTION code_compiler
2164  079E              ;	---------------------------------
2165  079E              ; Function spr_paint
2166  079E              ; ---------------------------------
2167  079E              _spr_paint:
2168  079E  2A 00 00    	ld	hl,(_sprite)
2169  07A1  26 00       	ld	h,0x00
2170  07A3  01 00 00    	ld	bc,_col
2171  07A6  09          	add	hl,bc
2172  07A7  7E          	ld	a,(hl)
2173  07A8  32 00 00    	ld	(_s_col1),a
2174  07AB  2A 00 00    	ld	hl,(_sprite)
2175  07AE  26 00       	ld	h,0x00
2176  07B0  01 00 00    	ld	bc,_lin
2177  07B3  09          	add	hl,bc
2178  07B4  7E          	ld	a,(hl)
2179  07B5  32 00 00    	ld	(_s_lin1),a
2180  07B8  21 00 00    	ld	hl,_s_lin0
2181  07BB  96          	sub	a, (hl)
2182  07BC  20 09       	jr	NZ,l_spr_paint_00106
2183  07BE  3A 00 00    	ld	a,(_s_col1)
2184  07C1  21 00 00    	ld	hl,_s_col0
2185  07C4  96          	sub	a, (hl)
2186  07C5  28 4C       	jr	Z,l_spr_paint_00107
2187  07C7              l_spr_paint_00106:
2188  07C7  2A 00 00    	ld	hl,(_sprite)
2189  07CA  26 00       	ld	h,0x00
2190  07CC  01 00 00    	ld	bc,_tile
2191  07CF  09          	add	hl,bc
2192  07D0  4E          	ld	c, (hl)
2193  07D1  3A 00 00    	ld	a,(_sprite)
2194  07D4  5F          	ld	e,a
2195  07D5  16 00       	ld	d,0x00
2196  07D7  21 00 00    	ld	hl,_colint
2197  07DA  19          	add	hl,de
2198  07DB  7E          	ld	a,(hl)
2199  07DC  81          	add	a,c
2200  07DD  32 00 00    	ld	(_s_tile1),a
2201  07E0  3A 00 00    	ld	a,(_s_lin1)
2202  07E3  E6 07       	and	a,0x07
2203  07E5  20 05       	jr	NZ,l_spr_paint_00102
2204  07E7  CD 61 0A    	call	_spr_back_repaint
2205  07EA  18 10       	jr	l_spr_paint_00103
2206  07EC              l_spr_paint_00102:
2207  07EC  2A FF FF    	ld	hl,(_s_col0 - 1)
2208  07EF  3A 00 00    	ld	a,(_s_lin0)
2209  07F2  6F          	ld	l,a
2210  07F3  3A 00 00    	ld	a,(_map_paper_clr)
2211  07F6  E5          	push	hl
2212  07F7  F5          	push	af
2213  07F8  33          	inc	sp
2214  07F9  CD 00 00    	call	_NIRVANAP_fillT_callee
2215  07FC              l_spr_paint_00103:
2216  07FC  2A FF FF    	ld	hl,(_s_col1 - 1)
2217  07FF  3A 00 00    	ld	a,(_s_lin1)
2218  0802  6F          	ld	l,a
2219  0803  E5          	push	hl
2220  0804  2A FF FF    	ld	hl,(_s_tile1 - 1)
2221  0807  3A 00 00    	ld	a,(_sprite)
2222  080A  6F          	ld	l,a
2223  080B  E5          	push	hl
2224  080C  CD 00 00    	call	_NIRVANAP_spriteT_callee
2225  080F  2E 01       	ld	l,0x01
2226  0811  18 4B       	jr	l_spr_paint_00110
2227  0813              l_spr_paint_00107:
2228  0813  3A 00 00    	ld	a,(_sprite)
2229  0816  07          	rlca
2230  0817  07          	rlca
2231  0818  07          	rlca
2232  0819  E6 F8       	and	a,0xf8
2233  081B  4F          	ld	c, a
2234  081C  06 00       	ld	b,0x00
2235  081E  21 98 DC    	ld	hl,0xdc98
2236  0821  09          	add	hl, bc
2237  0822  7E          	ld	a, (hl)
2238  0823  32 00 00    	ld	(_s_tile0),a
2239  0826  2A 00 00    	ld	hl,(_sprite)
2240  0829  26 00       	ld	h,0x00
2241  082B  01 00 00    	ld	bc,_tile
2242  082E  09          	add	hl,bc
2243  082F  4E          	ld	c, (hl)
2244  0830  3A 00 00    	ld	a,(_sprite)
2245  0833  5F          	ld	e,a
2246  0834  16 00       	ld	d,0x00
2247  0836  21 00 00    	ld	hl,_colint
2248  0839  19          	add	hl,de
2249  083A  7E          	ld	a,(hl)
2250  083B  81          	add	a,c
2251  083C  32 00 00    	ld	(_s_tile1),a
2252  083F  21 00 00    	ld	hl,_s_tile0
2253  0842  96          	sub	a, (hl)
2254  0843  28 17       	jr	Z,l_spr_paint_00108
2255  0845  2A FF FF    	ld	hl,(_s_col1 - 1)
2256  0848  3A 00 00    	ld	a,(_s_lin1)
2257  084B  6F          	ld	l,a
2258  084C  E5          	push	hl
2259  084D  2A FF FF    	ld	hl,(_s_tile1 - 1)
2260  0850  3A 00 00    	ld	a,(_sprite)
2261  0853  6F          	ld	l,a
2262  0854  E5          	push	hl
2263  0855  CD 00 00    	call	_NIRVANAP_spriteT_callee
2264  0858  2E 00       	ld	l,0x00
2265  085A  18 02       	jr	l_spr_paint_00110
2266  085C              l_spr_paint_00108:
2267  085C  2E 00       	ld	l,0x00
2268  085E              l_spr_paint_00110:
2269  085E  C9          	ret
2270  085F              	SECTION code_compiler
2271  085F              ;	---------------------------------
2272  085F              ; Function spr_destroy
2273  085F              ; ---------------------------------
2274  085F              _spr_destroy:
2275  085F  CD 00 00    	call	___sdcc_enter_ix
2276  0862  F5          	push	af
2277  0863  F5          	push	af
2278  0864  45          	ld	b, l
2279  0865  21 00 00    	ld	hl,_spr_count
2280  0868  35          	dec	(hl)
2281  0869  3E 00       	ld	a, +((_lin) & 0xFF)
2282  086B  80          	add	a, b
2283  086C  DD 77 FC    	ld	(ix-4),a
2284  086F  3E 00       	ld	a, +((_lin) / 256)
2285  0871  CE 00       	adc	a,0x00
2286  0873  DD 77 FD    	ld	(ix-3),a
2287  0876  E1          	pop	hl
2288  0877  7E          	ld	a,(hl)
2289  0878  E5          	push	hl
2290  0879  32 00 00    	ld	(_s_lin0),a
2291  087C  3E 00       	ld	a, +((_col) & 0xFF)
2292  087E  80          	add	a, b
2293  087F  DD 77 FE    	ld	(ix-2),a
2294  0882  6F          	ld	l,a
2295  0883  3E 00       	ld	a,+((_col) / 256)
2296  0885  CE 00       	adc	a,0x00
2297  0887  DD 77 FF    	ld	(ix-1),a
2298  088A  67          	ld	h,a
2299  088B  7E          	ld	a, (hl)
2300  088C  32 00 00    	ld	(_s_col0),a
2301  088F  2A 00 00    	ld	hl,(_s_lin0)
2302  0892  C5          	push	bc
2303  0893  67          	ld	h,a
2304  0894  E5          	push	hl
2305  0895  CD 00 00    	call	_spr_calc_index
2306  0898  F1          	pop	af
2307  0899  EB          	ex	de,hl
2308  089A  C1          	pop	bc
2309  089B  EB          	ex	de,hl
2310  089C  22 00 00    	ld	(_index0),hl
2311  089F  C5          	push	bc
2312  08A0  CD 00 00    	call	_game_match_back
2313  08A3  C1          	pop	bc
2314  08A4  7D          	ld	a,l
2315  08A5  32 00 00    	ld	(_s_tile0),a
2316  08A8  C5          	push	bc
2317  08A9  21 00 00    	ld	hl,0x0000
2318  08AC  E5          	push	hl
2319  08AD  48          	ld	c,b
2320  08AE  47          	ld	b,a
2321  08AF  C5          	push	bc
2322  08B0  CD 00 00    	call	_NIRVANAP_spriteT_callee
2323  08B3  CD 61 0A    	call	_spr_back_repaint
2324  08B6  C1          	pop	bc
2325  08B7  3E 00       	ld	a, +((_tile) & 0xFF)
2326  08B9  80          	add	a, b
2327  08BA  5F          	ld	e, a
2328  08BB  3E 00       	ld	a, +((_tile) / 256)
2329  08BD  CE 00       	adc	a,0x00
2330  08BF  57          	ld	d, a
2331  08C0  3A 00 00    	ld	a,(_s_tile0)
2332  08C3  12          	ld	(de), a
2333  08C4  DD 6E FE    	ld	l,(ix-2)
2334  08C7  DD 66 FF    	ld	h,(ix-1)
2335  08CA  36 00       	ld	(hl),0x00
2336  08CC  E1          	pop	hl
2337  08CD  E5          	push	hl
2338  08CE  36 00       	ld	(hl),0x00
2339  08D0  11 00 00    	ld	de,_class+0
2340  08D3  68          	ld	l,b
2341  08D4  26 00       	ld	h,0x00
2342  08D6  19          	add	hl, de
2343  08D7  36 00       	ld	(hl),0x00
2344  08D9  11 00 00    	ld	de,_state+0
2345  08DC  68          	ld	l,b
2346  08DD  26 00       	ld	h,0x00
2347  08DF  19          	add	hl, de
2348  08E0  36 00       	ld	(hl),0x00
2349  08E2  11 00 00    	ld	de,_state_a+0
2350  08E5  68          	ld	l,b
2351  08E6  26 00       	ld	h,0x00
2352  08E8  19          	add	hl, de
2353  08E9  36 00       	ld	(hl),0x00
2354  08EB  DD F9       	ld	sp, ix
2355  08ED  DD E1       	pop	ix
2356  08EF  C9          	ret
2357  08F0              	SECTION code_compiler
2358  08F0              ;	---------------------------------
2359  08F0              ; Function spr_tile
2360  08F0              ; ---------------------------------
2361  08F0              _spr_tile:
2362  08F0  CD 00 00    	call	___sdcc_enter_ix
2363  08F3  3B          	dec	sp
2364  08F4  4D          	ld	c, l
2365  08F5  44          	ld	b, h
2366  08F6  21 00 00    	ld	hl,_tmp0
2367  08F9  36 00       	ld	(hl),0x00
2368  08FB  11 00 00    	ld	de,_class+0
2369  08FE  0A          	ld	a, (bc)
2370  08FF  6F          	ld	l, a
2371  0900  26 00       	ld	h,0x00
2372  0902  19          	add	hl, de
2373  0903  7E          	ld	a, (hl)
2374  0904  DD 77 FF    	ld	(ix-1),a
2375  0907              l_spr_tile_00103:
2376  0907  21 00 00    	ld	hl,_tmp0
2377  090A  7E          	ld	a, (hl)
2378  090B  D6 14       	sub	a,0x14
2379  090D  30 41       	jr	NC,l_spr_tile_00105
2380  090F  7E          	ld	a, (hl)
2381  0910  5F          	ld	e, a
2382  0911  87          	add	a, a
2383  0912  83          	add	a, e
2384  0913  21 00 00    	ld	hl,_tmp1
2385  0916  77          	ld	(hl), a
2386  0917  C6 00       	add	a,+((_spr_map_tile) & 0xFF)
2387  0919  5F          	ld	e, a
2388  091A  3E 00       	ld	a, +((_spr_map_tile) / 256)
2389  091C  CE 00       	adc	a,0x00
2390  091E  57          	ld	d, a
2391  091F  1A          	ld	a, (de)
2392  0920  5F          	ld	e, a
2393  0921  DD 7E FF    	ld	a,(ix-1)
2394  0924  93          	sub	a, e
2395  0925  20 23       	jr	NZ,l_spr_tile_00102
2396  0927  6E          	ld	l,(hl)
2397  0928  26 00       	ld	h,0x00
2398  092A  5D          	ld	e,l
2399  092B  54          	ld	d,h
2400  092C  23          	inc	hl
2401  092D  23          	inc	hl
2402  092E  3E 00       	ld	a, +((_spr_map_tile) & 0xFF)
2403  0930  85          	add	a, l
2404  0931  6F          	ld	l, a
2405  0932  3E 00       	ld	a, +((_spr_map_tile) / 256)
2406  0934  8C          	adc	a, h
2407  0935  67          	ld	h, a
2408  0936  13          	inc	de
2409  0937  3E 00       	ld	a, +((_spr_map_tile) & 0xFF)
2410  0939  83          	add	a, e
2411  093A  5F          	ld	e, a
2412  093B  3E 00       	ld	a, +((_spr_map_tile) / 256)
2413  093D  8A          	adc	a, d
2414  093E  57          	ld	d, a
2415  093F  E5          	push	hl
2416  0940  C5          	push	bc
2417  0941  D5          	push	de
2418  0942  CD 56 09    	call	_spr_tile_dir
2419  0945  F1          	pop	af
2420  0946  F1          	pop	af
2421  0947  F1          	pop	af
2422  0948  18 08       	jr	l_spr_tile_00106
2423  094A              l_spr_tile_00102:
2424  094A  21 00 00    	ld	hl,_tmp0
2425  094D  34          	inc	(hl)
2426  094E  18 B7       	jr	l_spr_tile_00103
2427  0950              l_spr_tile_00105:
2428  0950  2E 00       	ld	l,0x00
2429  0952              l_spr_tile_00106:
2430  0952  33          	inc	sp
2431  0953  DD E1       	pop	ix
2432  0955  C9          	ret
2433  0956              	SECTION code_compiler
2434  0956              ;	---------------------------------
2435  0956              ; Function spr_tile_dir
2436  0956              ; ---------------------------------
2437  0956              _spr_tile_dir:
2438  0956  CD 00 00    	call	___sdcc_enter_ix
2439  0959  F5          	push	af
2440  095A  01 00 00    	ld	bc,_state+0
2441  095D  DD 5E 06    	ld	e,(ix+6)
2442  0960  DD 56 07    	ld	d,(ix+7)
2443  0963  1A          	ld	a, (de)
2444  0964  5F          	ld	e,a
2445  0965  6F          	ld	l,a
2446  0966  26 00       	ld	h,0x00
2447  0968  09          	add	hl, bc
2448  0969  46          	ld	b, (hl)
2449  096A  DD 6E 04    	ld	l,(ix+4)
2450  096D  DD 66 05    	ld	h,(ix+5)
2451  0970  4E          	ld	c, (hl)
2452  0971  CB 50       	bit	2, b
2453  0973  28 03       	jr	Z,l_spr_tile_dir_00102
2454  0975  69          	ld	l, c
2455  0976  18 2F       	jr	l_spr_tile_dir_00109
2456  0978              l_spr_tile_dir_00102:
2457  0978  DD 7E 08    	ld	a,(ix+8)
2458  097B  DD 77 FE    	ld	(ix-2),a
2459  097E  DD 7E 09    	ld	a,(ix+9)
2460  0981  DD 77 FF    	ld	(ix-1),a
2461  0984  CB 58       	bit	3, b
2462  0986  28 06       	jr	Z,l_spr_tile_dir_00104
2463  0988  E1          	pop	hl
2464  0989  E5          	push	hl
2465  098A  6E          	ld	l, (hl)
2466  098B  09          	add	hl, bc
2467  098C  18 19       	jr	l_spr_tile_dir_00109
2468  098E              l_spr_tile_dir_00104:
2469  098E  16 00       	ld	d,0x00
2470  0990  21 00 00    	ld	hl,_state_a
2471  0993  19          	add	hl, de
2472  0994  46          	ld	b, (hl)
2473  0995  CB 60       	bit	4, b
2474  0997  28 03       	jr	Z,l_spr_tile_dir_00106
2475  0999  69          	ld	l, c
2476  099A  18 0B       	jr	l_spr_tile_dir_00109
2477  099C              l_spr_tile_dir_00106:
2478  099C  CB 58       	bit	3, b
2479  099E  28 06       	jr	Z,l_spr_tile_dir_00108
2480  09A0  E1          	pop	hl
2481  09A1  E5          	push	hl
2482  09A2  6E          	ld	l, (hl)
2483  09A3  09          	add	hl, bc
2484  09A4  18 01       	jr	l_spr_tile_dir_00109
2485  09A6              l_spr_tile_dir_00108:
2486  09A6  69          	ld	l, c
2487  09A7              l_spr_tile_dir_00109:
2488  09A7  F1          	pop	af
2489  09A8  DD E1       	pop	ix
2490  09AA  C9          	ret
2491  09AB              	SECTION code_compiler
2492  09AB              ;	---------------------------------
2493  09AB              ; Function spr_brick_anim
2494  09AB              ; ---------------------------------
2495  09AB              _spr_brick_anim:
2496  09AB  CD 00 00    	call	___sdcc_enter_ix
2497  09AE  F5          	push	af
2498  09AF  DD 75 FF    	ld	(ix-1),l
2499  09B2  21 00 00    	ld	hl,_player_hit_col
2500  09B5  46          	ld	b, (hl)
2501  09B6  21 00 00    	ld	hl,_player_hit_lin
2502  09B9  4E          	ld	c, (hl)
2503  09BA  C5          	push	bc
2504  09BB  C5          	push	bc
2505  09BC  CD 00 00    	call	_spr_calc_index
2506  09BF  F1          	pop	af
2507  09C0  C1          	pop	bc
2508  09C1  22 00 00    	ld	(_index1),hl
2509  09C4  11 F0 FF    	ld	de,0xfff0
2510  09C7  19          	add	hl,de
2511  09C8  11 00 00    	ld	de,_scr_map
2512  09CB  19          	add	hl, de
2513  09CC  7E          	ld	a, (hl)
2514  09CD  DD 77 FE    	ld	(ix-2),a
2515  09D0  11 00 00    	ld	de,_scr_map
2516  09D3  2A 00 00    	ld	hl,(_index1)
2517  09D6  19          	add	hl,de
2518  09D7  6E          	ld	l, (hl)
2519  09D8  EB          	ex	de,hl
2520  09D9  DD 7E FF    	ld	a,(ix-1)
2521  09DC  B7          	or	a, a
2522  09DD  28 06       	jr	Z,l_spr_brick_anim_00102
2523  09DF  79          	ld	a, c
2524  09E0  C6 F6       	add	a,0xf6
2525  09E2  57          	ld	d, a
2526  09E3  18 04       	jr	l_spr_brick_anim_00103
2527  09E5              l_spr_brick_anim_00102:
2528  09E5  79          	ld	a, c
2529  09E6  C6 F8       	add	a,0xf8
2530  09E8  57          	ld	d, a
2531  09E9              l_spr_brick_anim_00103:
2532  09E9  76          	halt
2533  09EA  DD 7E FF    	ld	a,(ix-1)
2534  09ED  B7          	or	a, a
2535  09EE  28 17       	jr	Z,l_spr_brick_anim_00107
2536  09F0  3A 00 00    	ld	a,(_map_paper_clr)
2537  09F3  C5          	push	bc
2538  09F4  D5          	push	de
2539  09F5  C5          	push	bc
2540  09F6  F5          	push	af
2541  09F7  33          	inc	sp
2542  09F8  CD 00 00    	call	_NIRVANAP_fillT_raw_callee
2543  09FB  D1          	pop	de
2544  09FC  C1          	pop	bc
2545  09FD  4A          	ld	c, d
2546  09FE  C5          	push	bc
2547  09FF  7B          	ld	a, e
2548  0A00  F5          	push	af
2549  0A01  33          	inc	sp
2550  0A02  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2551  0A05  18 20       	jr	l_spr_brick_anim_00109
2552  0A07              l_spr_brick_anim_00107:
2553  0A07  DD 7E FE    	ld	a,(ix-2)
2554  0A0A  D6 80       	sub	a,0x80
2555  0A0C  30 11       	jr	NC,l_spr_brick_anim_00105
2556  0A0E  7A          	ld	a, d
2557  0A0F  C6 F0       	add	a,0xf0
2558  0A11  C5          	push	bc
2559  0A12  D5          	push	de
2560  0A13  4F          	ld	c,a
2561  0A14  C5          	push	bc
2562  0A15  DD 7E FE    	ld	a,(ix-2)
2563  0A18  F5          	push	af
2564  0A19  33          	inc	sp
2565  0A1A  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2566  0A1D  D1          	pop	de
2567  0A1E  C1          	pop	bc
2568  0A1F              l_spr_brick_anim_00105:
2569  0A1F  4A          	ld	c, d
2570  0A20  C5          	push	bc
2571  0A21  7B          	ld	a, e
2572  0A22  F5          	push	af
2573  0A23  33          	inc	sp
2574  0A24  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2575  0A27              l_spr_brick_anim_00109:
2576  0A27  F1          	pop	af
2577  0A28  DD E1       	pop	ix
2578  0A2A  C9          	ret
2579  0A2B              	SECTION code_compiler
2580  0A2B              ;	---------------------------------
2581  0A2B              ; Function spr_draw_index
2582  0A2B              ; ---------------------------------
2583  0A2B              _spr_draw_index:
2584  0A2B  4D          	ld	c, l
2585  0A2C  44          	ld	b, h
2586  0A2D  76          	halt
2587  0A2E  69          	ld	l, c
2588  0A2F  60          	ld	h, b
2589  0A30  4E          	ld	c, (hl)
2590  0A31  23          	inc	hl
2591  0A32  46          	ld	b, (hl)
2592  0A33  59          	ld	e, c
2593  0A34  7B          	ld	a, e
2594  0A35  E6 0F       	and	a,0x0f
2595  0A37  87          	add	a, a
2596  0A38  32 00 00    	ld	(_s_col1),a
2597  0A3B  21 00 00    	ld	hl,_s_lin1
2598  0A3E  73          	ld	(hl),e
2599  0A3F  7B          	ld	a,e
2600  0A40  07          	rlca
2601  0A41  07          	rlca
2602  0A42  07          	rlca
2603  0A43  07          	rlca
2604  0A44  E6 0F       	and	a,0x0f
2605  0A46  07          	rlca
2606  0A47  07          	rlca
2607  0A48  07          	rlca
2608  0A49  07          	rlca
2609  0A4A  E6 F0       	and	a,0xf0
2610  0A4C  77          	ld	(hl), a
2611  0A4D  21 00 00    	ld	hl,_scr_map
2612  0A50  09          	add	hl, bc
2613  0A51  46          	ld	b, (hl)
2614  0A52  3A 00 00    	ld	a,(_s_col1)
2615  0A55  F5          	push	af
2616  0A56  33          	inc	sp
2617  0A57  3A 00 00    	ld	a,(_s_lin1)
2618  0A5A  48          	ld	c,b
2619  0A5B  47          	ld	b,a
2620  0A5C  C5          	push	bc
2621  0A5D  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2622  0A60  C9          	ret
2623  0A61              	SECTION code_compiler
2624  0A61              ;	---------------------------------
2625  0A61              ; Function spr_back_repaint
2626  0A61              ; ---------------------------------
2627  0A61              _spr_back_repaint:
2628  0A61  2A FF FF    	ld	hl,(_s_col0 - 1)
2629  0A64  3A 00 00    	ld	a,(_s_lin0)
2630  0A67  6F          	ld	l,a
2631  0A68  E5          	push	hl
2632  0A69  CD 00 00    	call	_spr_calc_index
2633  0A6C  F1          	pop	af
2634  0A6D  4D          	ld	c, l
2635  0A6E  21 00 00    	ld	hl,_sprite_curr_index
2636  0A71  71          	ld	(hl), c
2637  0A72  3E 00       	ld	a, +((_scr_map) & 0xFF)
2638  0A74  86          	add	a, (hl)
2639  0A75  4F          	ld	c, a
2640  0A76  3E 00       	ld	a, +((_scr_map) / 256)
2641  0A78  CE 00       	adc	a,0x00
2642  0A7A  47          	ld	b, a
2643  0A7B  0A          	ld	a, (bc)
2644  0A7C  32 00 00    	ld	(_stp_tile),a
2645  0A7F  21 00 00    	ld	hl,_s_col0
2646  0A82  CB 46       	bit	0, (hl)
2647  0A84  20 46       	jr	NZ,l_spr_back_repaint_00108
2648  0A86  3A 00 00    	ld	a,(_s_col0)
2649  0A89  32 00 00    	ld	(_stp_col),a
2650  0A8C  76          	halt
2651  0A8D  3A 00 00    	ld	a,(_s_lin0)
2652  0A90  E6 0F       	and	a,0x0f
2653  0A92  20 0C       	jr	NZ,l_spr_back_repaint_00102
2654  0A94  3A 00 00    	ld	a,(_s_lin0)
2655  0A97  32 00 00    	ld	(_stp_row),a
2656  0A9A  CD 4B 0B    	call	_spr_tile_paint
2657  0A9D  C3 4A 0B    	jp	l_spr_back_repaint_00110
2658  0AA0              l_spr_back_repaint_00102:
2659  0AA0  3A 00 00    	ld	a,(_s_lin0)
2660  0AA3  07          	rlca
2661  0AA4  07          	rlca
2662  0AA5  07          	rlca
2663  0AA6  07          	rlca
2664  0AA7  E6 0F       	and	a,0x0f
2665  0AA9  07          	rlca
2666  0AAA  07          	rlca
2667  0AAB  07          	rlca
2668  0AAC  07          	rlca
2669  0AAD  E6 F0       	and	a,0xf0
2670  0AAF  32 00 00    	ld	(_stp_row),a
2671  0AB2  C5          	push	bc
2672  0AB3  CD 4B 0B    	call	_spr_tile_paint
2673  0AB6  C1          	pop	bc
2674  0AB7  21 00 00    	ld	hl,_stp_row
2675  0ABA  7E          	ld	a, (hl)
2676  0ABB  C6 10       	add	a,0x10
2677  0ABD  77          	ld	(hl), a
2678  0ABE  21 10 00    	ld	hl,0x0010
2679  0AC1  09          	add	hl, bc
2680  0AC2  7E          	ld	a, (hl)
2681  0AC3  32 00 00    	ld	(_stp_tile),a
2682  0AC6  CD 4B 0B    	call	_spr_tile_paint
2683  0AC9  C3 4A 0B    	jp	l_spr_back_repaint_00110
2684  0ACC              l_spr_back_repaint_00108:
2685  0ACC  3A 00 00    	ld	a,(_s_col0)
2686  0ACF  C6 FF       	add	a,0xff
2687  0AD1  32 00 00    	ld	(_stp_col),a
2688  0AD4  76          	halt
2689  0AD5  03          	inc	bc
2690  0AD6  3A 00 00    	ld	a,(_s_lin0)
2691  0AD9  E6 0F       	and	a,0x0f
2692  0ADB  20 1B       	jr	NZ,l_spr_back_repaint_00105
2693  0ADD  3A 00 00    	ld	a,(_s_lin0)
2694  0AE0  32 00 00    	ld	(_stp_row),a
2695  0AE3  C5          	push	bc
2696  0AE4  CD 4B 0B    	call	_spr_tile_paint
2697  0AE7  C1          	pop	bc
2698  0AE8  0A          	ld	a, (bc)
2699  0AE9  32 00 00    	ld	(_stp_tile),a
2700  0AEC  3A 00 00    	ld	a,(_s_col0)
2701  0AEF  3C          	inc	a
2702  0AF0  32 00 00    	ld	(_stp_col),a
2703  0AF3  CD 4B 0B    	call	_spr_tile_paint
2704  0AF6  18 52       	jr	l_spr_back_repaint_00110
2705  0AF8              l_spr_back_repaint_00105:
2706  0AF8  3A 00 00    	ld	a,(_s_lin0)
2707  0AFB  07          	rlca
2708  0AFC  07          	rlca
2709  0AFD  07          	rlca
2710  0AFE  07          	rlca
2711  0AFF  E6 0F       	and	a,0x0f
2712  0B01  07          	rlca
2713  0B02  07          	rlca
2714  0B03  07          	rlca
2715  0B04  07          	rlca
2716  0B05  E6 F0       	and	a,0xf0
2717  0B07  32 00 00    	ld	(_stp_row),a
2718  0B0A  C5          	push	bc
2719  0B0B  CD 4B 0B    	call	_spr_tile_paint
2720  0B0E  C1          	pop	bc
2721  0B0F  3A 00 00    	ld	a,(_s_col0)
2722  0B12  3C          	inc	a
2723  0B13  32 00 00    	ld	(_stp_col),a
2724  0B16  0A          	ld	a, (bc)
2725  0B17  32 00 00    	ld	(_stp_tile),a
2726  0B1A  C5          	push	bc
2727  0B1B  CD 4B 0B    	call	_spr_tile_paint
2728  0B1E  C1          	pop	bc
2729  0B1F  3A 00 00    	ld	a,(_s_col0)
2730  0B22  C6 FF       	add	a,0xff
2731  0B24  32 00 00    	ld	(_stp_col),a
2732  0B27  21 00 00    	ld	hl,_stp_row
2733  0B2A  7E          	ld	a, (hl)
2734  0B2B  C6 10       	add	a,0x10
2735  0B2D  77          	ld	(hl), a
2736  0B2E  21 0F 00    	ld	hl,0x000f
2737  0B31  09          	add	hl,bc
2738  0B32  7E          	ld	a,(hl)
2739  0B33  32 00 00    	ld	(_stp_tile),a
2740  0B36  E5          	push	hl
2741  0B37  CD 4B 0B    	call	_spr_tile_paint
2742  0B3A  C1          	pop	bc
2743  0B3B  03          	inc	bc
2744  0B3C  0A          	ld	a, (bc)
2745  0B3D  32 00 00    	ld	(_stp_tile),a
2746  0B40  3A 00 00    	ld	a,(_s_col0)
2747  0B43  3C          	inc	a
2748  0B44  32 00 00    	ld	(_stp_col),a
2749  0B47  CD 4B 0B    	call	_spr_tile_paint
2750  0B4A              l_spr_back_repaint_00110:
2751  0B4A  C9          	ret
2752  0B4B              	SECTION code_compiler
2753  0B4B              ;	---------------------------------
2754  0B4B              ; Function spr_tile_paint
2755  0B4B              ; ---------------------------------
2756  0B4B              _spr_tile_paint:
2757  0B4B  3A 00 00    	ld	a,(_stp_tile)
2758  0B4E  B7          	or	a, a
2759  0B4F  20 13       	jr	NZ,l_spr_tile_paint_00111
2760  0B51  2A FF FF    	ld	hl,(_stp_col - 1)
2761  0B54  3A 00 00    	ld	a,(_stp_row)
2762  0B57  6F          	ld	l,a
2763  0B58  3A 00 00    	ld	a,(_map_paper_clr)
2764  0B5B  E5          	push	hl
2765  0B5C  F5          	push	af
2766  0B5D  33          	inc	sp
2767  0B5E  CD 00 00    	call	_NIRVANAP_fillT_raw_callee
2768  0B61  C3 E3 0B    	jp	l_spr_tile_paint_00113
2769  0B64              l_spr_tile_paint_00111:
2770  0B64  21 00 00    	ld	hl,_stp_tile
2771  0B67  7E          	ld	a, (hl)
2772  0B68  D6 80       	sub	a,0x80
2773  0B6A  30 35       	jr	NC,l_spr_tile_paint_00108
2774  0B6C  7E          	ld	a, (hl)
2775  0B6D  D6 23       	sub	a,0x23
2776  0B6F  28 12       	jr	Z,l_spr_tile_paint_00102
2777  0B71  2A FF FF    	ld	hl,(_stp_col - 1)
2778  0B74  3A 00 00    	ld	a,(_stp_row)
2779  0B77  6F          	ld	l,a
2780  0B78  3A 00 00    	ld	a,(_stp_tile)
2781  0B7B  E5          	push	hl
2782  0B7C  F5          	push	af
2783  0B7D  33          	inc	sp
2784  0B7E  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2785  0B81  18 60       	jr	l_spr_tile_paint_00113
2786  0B83              l_spr_tile_paint_00102:
2787  0B83  2A 00 00    	ld	hl,(_sprite_curr_index)
2788  0B86  26 00       	ld	h,0x00
2789  0B88  CD 00 00    	call	_game_match_back
2790  0B8B  7D          	ld	a,l
2791  0B8C  32 00 00    	ld	(_stp_tile),a
2792  0B8F  2A FF FF    	ld	hl,(_stp_col - 1)
2793  0B92  3A 00 00    	ld	a,(_stp_row)
2794  0B95  6F          	ld	l,a
2795  0B96  3A 00 00    	ld	a,(_stp_tile)
2796  0B99  E5          	push	hl
2797  0B9A  F5          	push	af
2798  0B9B  33          	inc	sp
2799  0B9C  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2800  0B9F  18 42       	jr	l_spr_tile_paint_00113
2801  0BA1              l_spr_tile_paint_00108:
2802  0BA1  3A 00 00    	ld	a,(_stp_tile)
2803  0BA4  C6 80       	add	a,0x80
2804  0BA6  4F          	ld	c, a
2805  0BA7  06 00       	ld	b,0x00
2806  0BA9  21 00 00    	ld	hl,_anim_end
2807  0BAC  09          	add	hl, bc
2808  0BAD  46          	ld	b, (hl)
2809  0BAE  11 00 00    	ld	de,_anim_int+0
2810  0BB1  69          	ld	l,c
2811  0BB2  26 00       	ld	h,0x00
2812  0BB4  19          	add	hl, de
2813  0BB5  7E          	ld	a,(hl)
2814  0BB6  5F          	ld	e,a
2815  0BB7  90          	sub	a, b
2816  0BB8  30 19       	jr	NC,l_spr_tile_paint_00105
2817  0BBA  06 00       	ld	b,0x00
2818  0BBC  21 00 00    	ld	hl,_anim_tile
2819  0BBF  09          	add	hl, bc
2820  0BC0  7E          	ld	a,(hl)
2821  0BC1  83          	add	a, e
2822  0BC2  47          	ld	b, a
2823  0BC3  3A 00 00    	ld	a,(_stp_col)
2824  0BC6  F5          	push	af
2825  0BC7  33          	inc	sp
2826  0BC8  3A 00 00    	ld	a,(_stp_row)
2827  0BCB  48          	ld	c,b
2828  0BCC  47          	ld	b,a
2829  0BCD  C5          	push	bc
2830  0BCE  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2831  0BD1  18 10       	jr	l_spr_tile_paint_00113
2832  0BD3              l_spr_tile_paint_00105:
2833  0BD3  2A FF FF    	ld	hl,(_stp_col - 1)
2834  0BD6  3A 00 00    	ld	a,(_stp_row)
2835  0BD9  6F          	ld	l,a
2836  0BDA  3A 00 00    	ld	a,(_map_paper_clr)
2837  0BDD  E5          	push	hl
2838  0BDE  F5          	push	af
2839  0BDF  33          	inc	sp
2840  0BE0  CD 00 00    	call	_NIRVANAP_fillT_raw_callee
2841  0BE3              l_spr_tile_paint_00113:
2842  0BE3  C9          	ret
2843  0BE4              	SECTION code_compiler
2844  0BE4              ;	---------------------------------
2845  0BE4              ; Function spr_init_effects
2846  0BE4              ; ---------------------------------
2847  0BE4              _spr_init_effects:
2848  0BE4  01 00 00    	ld	bc,_anim_lin+0
2849  0BE7  1E 00       	ld	e,0x00
2850  0BE9              l_spr_init_effects_00102:
2851  0BE9  6B          	ld	l,e
2852  0BEA  26 00       	ld	h,0x00
2853  0BEC  09          	add	hl, bc
2854  0BED  36 FF       	ld	(hl),0xff
2855  0BEF  16 00       	ld	d,0x00
2856  0BF1  21 00 00    	ld	hl,_bullet_col
2857  0BF4  19          	add	hl, de
2858  0BF5  36 FF       	ld	(hl),0xff
2859  0BF7  1C          	inc	e
2860  0BF8  3E 07       	ld	a,0x07
2861  0BFA  93          	sub	a, e
2862  0BFB  30 EC       	jr	NC,l_spr_init_effects_00102
2863  0BFD  21 00 00    	ld	hl,_bullet_count
2864  0C00  36 00       	ld	(hl),0x00
2865  0C02  21 00 00    	ld	hl,_anim_count
2866  0C05  36 00       	ld	(hl),0x00
2867  0C07  C9          	ret
2868  0C08              	SECTION code_compiler
2869  0C08              ;	---------------------------------
2870  0C08              ; Function spr_add_anim
2871  0C08              ; ---------------------------------
2872  0C08              _spr_add_anim:
2873  0C08  CD 00 00    	call	___sdcc_enter_ix
2874  0C0B  DD 7E 05    	ld	a,(ix+5)
2875  0C0E  D6 1F       	sub	a,0x1f
2876  0C10  D2 BA 0C    	jp	NC, l_spr_add_anim_00111
2877  0C13  DD 7E 04    	ld	a,(ix+4)
2878  0C16  D6 B8       	sub	a,0xb8
2879  0C18  D2 BA 0C    	jp	NC, l_spr_add_anim_00111
2880  0C1B  01 00 00    	ld	bc,0x0000
2881  0C1E              l_spr_add_anim_00109:
2882  0C1E  3E 00       	ld	a, +((_anim_lin) & 0xFF)
2883  0C20  80          	add	a, b
2884  0C21  5F          	ld	e, a
2885  0C22  3E 00       	ld	a, +((_anim_lin) / 256)
2886  0C24  CE 00       	adc	a,0x00
2887  0C26  57          	ld	d, a
2888  0C27  1A          	ld	a, (de)
2889  0C28  3C          	inc	a
2890  0C29  C2 B2 0C    	jp	NZ,l_spr_add_anim_00110
2891  0C2C  76          	halt
2892  0C2D  21 00 00    	ld	hl,_anim_count
2893  0C30  34          	inc	(hl)
2894  0C31  DD 7E 04    	ld	a,(ix+4)
2895  0C34  12          	ld	(de), a
2896  0C35  3E 00       	ld	a, +((_anim_col) & 0xFF)
2897  0C37  81          	add	a, c
2898  0C38  5F          	ld	e, a
2899  0C39  3E 00       	ld	a, +((_anim_col) / 256)
2900  0C3B  CE 00       	adc	a,0x00
2901  0C3D  57          	ld	d, a
2902  0C3E  DD 7E 05    	ld	a,(ix+5)
2903  0C41  12          	ld	(de), a
2904  0C42  3E 00       	ld	a, +((_anim_tile) & 0xFF)
2905  0C44  81          	add	a, c
2906  0C45  5F          	ld	e, a
2907  0C46  3E 00       	ld	a, +((_anim_tile) / 256)
2908  0C48  CE 00       	adc	a,0x00
2909  0C4A  57          	ld	d, a
2910  0C4B  DD 7E 06    	ld	a,(ix+6)
2911  0C4E  12          	ld	(de), a
2912  0C4F  3E 00       	ld	a, +((_anim_loop) & 0xFF)
2913  0C51  81          	add	a, c
2914  0C52  5F          	ld	e, a
2915  0C53  3E 00       	ld	a, +((_anim_loop) / 256)
2916  0C55  CE 00       	adc	a,0x00
2917  0C57  57          	ld	d, a
2918  0C58  DD 7E 08    	ld	a,(ix+8)
2919  0C5B  12          	ld	(de), a
2920  0C5C  11 00 00    	ld	de,_anim_int+0
2921  0C5F  69          	ld	l,c
2922  0C60  26 00       	ld	h,0x00
2923  0C62  19          	add	hl, de
2924  0C63  36 00       	ld	(hl),0x00
2925  0C65  3E 00       	ld	a, +((_anim_end) & 0xFF)
2926  0C67  81          	add	a, c
2927  0C68  5F          	ld	e, a
2928  0C69  3E 00       	ld	a, +((_anim_end) / 256)
2929  0C6B  CE 00       	adc	a,0x00
2930  0C6D  57          	ld	d, a
2931  0C6E  DD 7E 07    	ld	a,(ix+7)
2932  0C71  12          	ld	(de), a
2933  0C72  3E 00       	ld	a, +((_anim_respanwn) & 0xFF)
2934  0C74  81          	add	a, c
2935  0C75  5F          	ld	e, a
2936  0C76  3E 00       	ld	a, +((_anim_respanwn) / 256)
2937  0C78  CE 00       	adc	a,0x00
2938  0C7A  57          	ld	d, a
2939  0C7B  DD 7E 09    	ld	a,(ix+9)
2940  0C7E  12          	ld	(de), a
2941  0C7F  C5          	push	bc
2942  0C80  DD 66 05    	ld	h,(ix+5)
2943  0C83  DD 6E 04    	ld	l,(ix+4)
2944  0C86  E5          	push	hl
2945  0C87  DD 7E 06    	ld	a,(ix+6)
2946  0C8A  F5          	push	af
2947  0C8B  33          	inc	sp
2948  0C8C  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2949  0C8F  DD 66 05    	ld	h,(ix+5)
2950  0C92  DD 6E 04    	ld	l,(ix+4)
2951  0C95  E5          	push	hl
2952  0C96  CD 00 00    	call	_spr_calc_index
2953  0C99  F1          	pop	af
2954  0C9A  EB          	ex	de,hl
2955  0C9B  C1          	pop	bc
2956  0C9C  ED 53 00 00 	ld	(_index0),de
2957  0CA0  11 00 00    	ld	de,_scr_map
2958  0CA3  2A 00 00    	ld	hl,(_index0)
2959  0CA6  19          	add	hl,de
2960  0CA7  7E          	ld	a,(hl)
2961  0CA8  EB          	ex	de,hl
2962  0CA9  B7          	or	a, a
2963  0CAA  20 0E       	jr	NZ,l_spr_add_anim_00111
2964  0CAC  79          	ld	a, c
2965  0CAD  C6 80       	add	a,0x80
2966  0CAF  12          	ld	(de), a
2967  0CB0  18 08       	jr	l_spr_add_anim_00111
2968  0CB2              l_spr_add_anim_00110:
2969  0CB2  04          	inc	b
2970  0CB3  78          	ld	a,b
2971  0CB4  48          	ld	c,b
2972  0CB5  D6 08       	sub	a,0x08
2973  0CB7  DA 1E 0C    	jp	C, l_spr_add_anim_00109
2974  0CBA              l_spr_add_anim_00111:
2975  0CBA  DD E1       	pop	ix
2976  0CBC  C9          	ret
2977  0CBD              	SECTION code_compiler
2978  0CBD              ;	---------------------------------
2979  0CBD              ; Function spr_play_anim
2980  0CBD              ; ---------------------------------
2981  0CBD              _spr_play_anim:
2982  0CBD  CD 00 00    	call	___sdcc_enter_ix
2983  0CC0  F5          	push	af
2984  0CC1  F5          	push	af
2985  0CC2  F5          	push	af
2986  0CC3  0E 00       	ld	c,0x00
2987  0CC5  DD 71 FA    	ld	(ix-6),c
2988  0CC8              l_spr_play_anim_00116:
2989  0CC8  3E 00       	ld	a, +((_anim_lin) & 0xFF)
2990  0CCA  81          	add	a, c
2991  0CCB  DD 77 FE    	ld	(ix-2),a
2992  0CCE  6F          	ld	l,a
2993  0CCF  3E 00       	ld	a,+((_anim_lin) / 256)
2994  0CD1  CE 00       	adc	a,0x00
2995  0CD3  DD 77 FF    	ld	(ix-1),a
2996  0CD6  67          	ld	h,a
2997  0CD7  7E          	ld	a,(hl)
2998  0CD8  5F          	ld	e,a
2999  0CD9  3C          	inc	a
3000  0CDA  CA B1 0D    	jp	Z,l_spr_play_anim_00117
3001  0CDD  3E 00       	ld	a, +((_anim_int) & 0xFF)
3002  0CDF  81          	add	a, c
3003  0CE0  DD 77 FC    	ld	(ix-4),a
3004  0CE3  6F          	ld	l,a
3005  0CE4  3E 00       	ld	a,+((_anim_int) / 256)
3006  0CE6  CE 00       	adc	a,0x00
3007  0CE8  DD 77 FD    	ld	(ix-3),a
3008  0CEB  67          	ld	h,a
3009  0CEC  56          	ld	d, (hl)
3010  0CED  06 00       	ld	b,0x00
3011  0CEF  21 00 00    	ld	hl,_anim_end
3012  0CF2  09          	add	hl, bc
3013  0CF3  46          	ld	b, (hl)
3014  0CF4  7A          	ld	a, d
3015  0CF5  90          	sub	a, b
3016  0CF6  30 40       	jr	NC,l_spr_play_anim_00111
3017  0CF8  DD CB FA 46 	bit	0,(ix-6)
3018  0CFC  20 01       	jr	NZ,l_spr_play_anim_00102
3019  0CFE  76          	halt
3020  0CFF              l_spr_play_anim_00102:
3021  0CFF  06 00       	ld	b,0x00
3022  0D01  21 00 00    	ld	hl,_anim_col
3023  0D04  09          	add	hl, bc
3024  0D05  5E          	ld	e, (hl)
3025  0D06  DD 6E FE    	ld	l,(ix-2)
3026  0D09  DD 66 FF    	ld	h,(ix-1)
3027  0D0C  56          	ld	d, (hl)
3028  0D0D  06 00       	ld	b,0x00
3029  0D0F  21 00 00    	ld	hl,_anim_tile
3030  0D12  09          	add	hl, bc
3031  0D13  46          	ld	b, (hl)
3032  0D14  DD 6E FC    	ld	l,(ix-4)
3033  0D17  DD 66 FD    	ld	h,(ix-3)
3034  0D1A  6E          	ld	l, (hl)
3035  0D1B  78          	ld	a, b
3036  0D1C  85          	add	a, l
3037  0D1D  47          	ld	b, a
3038  0D1E  C5          	push	bc
3039  0D1F  7B          	ld	a, e
3040  0D20  5A          	ld	e,d
3041  0D21  57          	ld	d,a
3042  0D22  D5          	push	de
3043  0D23  C5          	push	bc
3044  0D24  33          	inc	sp
3045  0D25  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
3046  0D28  C1          	pop	bc
3047  0D29  DD 34 FA    	inc	(ix-6)
3048  0D2C  DD 6E FC    	ld	l,(ix-4)
3049  0D2F  DD 66 FD    	ld	h,(ix-3)
3050  0D32  46          	ld	b,(hl)
3051  0D33  04          	inc	b
3052  0D34  70          	ld	(hl), b
3053  0D35  C3 B1 0D    	jp	l_spr_play_anim_00117
3054  0D38              l_spr_play_anim_00111:
3055  0D38  06 00       	ld	b,0x00
3056  0D3A  21 00 00    	ld	hl,_anim_loop
3057  0D3D  09          	add	hl, bc
3058  0D3E  7E          	ld	a, (hl)
3059  0D3F  DD 77 FB    	ld	(ix-5),a
3060  0D42  B7          	or	a, a
3061  0D43  20 5F       	jr	NZ,l_spr_play_anim_00108
3062  0D45  21 00 00    	ld	hl,_anim_count
3063  0D48  35          	dec	(hl)
3064  0D49  06 00       	ld	b,0x00
3065  0D4B  21 00 00    	ld	hl,_anim_col
3066  0D4E  09          	add	hl, bc
3067  0D4F  7E          	ld	a, (hl)
3068  0D50  32 00 00    	ld	(_s_col0),a
3069  0D53  21 00 00    	ld	hl,_s_lin0
3070  0D56  73          	ld	(hl), e
3071  0D57  3A 00 00    	ld	a,(_s_col0)
3072  0D5A  2A 00 00    	ld	hl,(_s_lin0)
3073  0D5D  C5          	push	bc
3074  0D5E  67          	ld	h,a
3075  0D5F  E5          	push	hl
3076  0D60  CD 00 00    	call	_spr_calc_index
3077  0D63  F1          	pop	af
3078  0D64  EB          	ex	de,hl
3079  0D65  C1          	pop	bc
3080  0D66  EB          	ex	de,hl
3081  0D67  22 00 00    	ld	(_index0),hl
3082  0D6A  11 00 00    	ld	de,_scr_map
3083  0D6D  19          	add	hl,de
3084  0D6E  7E          	ld	a,(hl)
3085  0D6F  EB          	ex	de,hl
3086  0D70  D6 80       	sub	a,0x80
3087  0D72  38 11       	jr	C,l_spr_play_anim_00104
3088  0D74  21 01 00    	ld	hl,_index0 + 1
3089  0D77  C5          	push	bc
3090  0D78  D5          	push	de
3091  0D79  2B          	dec	hl
3092  0D7A  7E          	ld	a, (hl)
3093  0D7B  23          	inc	hl
3094  0D7C  66          	ld	h, (hl)
3095  0D7D  6F          	ld	l, a
3096  0D7E  CD 00 00    	call	_game_match_back_strict
3097  0D81  D1          	pop	de
3098  0D82  C1          	pop	bc
3099  0D83  7D          	ld	a,l
3100  0D84  12          	ld	(de), a
3101  0D85              l_spr_play_anim_00104:
3102  0D85  C5          	push	bc
3103  0D86  CD 61 0A    	call	_spr_back_repaint
3104  0D89  C1          	pop	bc
3105  0D8A  06 00       	ld	b,0x00
3106  0D8C  21 00 00    	ld	hl,_anim_respanwn
3107  0D8F  09          	add	hl, bc
3108  0D90  7E          	ld	a, (hl)
3109  0D91  B7          	or	a, a
3110  0D92  28 06       	jr	Z,l_spr_play_anim_00106
3111  0D94  C5          	push	bc
3112  0D95  69          	ld	l, c
3113  0D96  CD 00 00    	call	_enemy_respawn
3114  0D99  C1          	pop	bc
3115  0D9A              l_spr_play_anim_00106:
3116  0D9A  DD 6E FE    	ld	l,(ix-2)
3117  0D9D  DD 66 FF    	ld	h,(ix-1)
3118  0DA0  36 FF       	ld	(hl),0xff
3119  0DA2  18 0D       	jr	l_spr_play_anim_00117
3120  0DA4              l_spr_play_anim_00108:
3121  0DA4  DD 46 FB    	ld	b,(ix-5)
3122  0DA7  05          	dec	b
3123  0DA8  70          	ld	(hl), b
3124  0DA9  DD 6E FC    	ld	l,(ix-4)
3125  0DAC  DD 66 FD    	ld	h,(ix-3)
3126  0DAF  36 FF       	ld	(hl),0xff
3127  0DB1              l_spr_play_anim_00117:
3128  0DB1  0C          	inc	c
3129  0DB2  79          	ld	a, c
3130  0DB3  D6 08       	sub	a,0x08
3131  0DB5  DA C8 0C    	jp	C, l_spr_play_anim_00116
3132  0DB8  DD F9       	ld	sp, ix
3133  0DBA  DD E1       	pop	ix
3134  0DBC  C9          	ret
3135  0DBD              	SECTION code_compiler
3136  0DBD              ;	---------------------------------
3137  0DBD              ; Function spr_bullet_fireball
3138  0DBD              ; ---------------------------------
3139  0DBD              _spr_bullet_fireball:
3140  0DBD  CD 00 00    	call	___sdcc_enter_ix
3141  0DC0  3A 00 00    	ld	a,(_s_lin0)
3142  0DC3  4F          	ld	c,a
3143  0DC4  06 00       	ld	b,0x00
3144  0DC6  2A 00 00    	ld	hl,(_bullet)
3145  0DC9  60          	ld	h,b
3146  0DCA  11 00 00    	ld	de,_bullet_lin0
3147  0DCD  19          	add	hl,de
3148  0DCE  5E          	ld	e, (hl)
3149  0DCF  16 00       	ld	d,0x00
3150  0DD1  79          	ld	a, c
3151  0DD2  93          	sub	a, e
3152  0DD3  6F          	ld	l, a
3153  0DD4  78          	ld	a, b
3154  0DD5  9A          	sbc	a, d
3155  0DD6  67          	ld	h, a
3156  0DD7  CD 00 00    	call	_abs_fastcall
3157  0DDA  4D          	ld	c, l
3158  0DDB  44          	ld	b, h
3159  0DDC  21 00 00    	ld	hl,_s_lin0
3160  0DDF  5E          	ld	e, (hl)
3161  0DE0  3E 08       	ld	a,0x08
3162  0DE2  B9          	cp	a, c
3163  0DE3  3E 00       	ld	a,0x00
3164  0DE5  98          	sbc	a, b
3165  0DE6  E2 EB 0D    	jp	PO, l_spr_bullet_fireball_00110
3166  0DE9  EE 80       	xor	a,0x80
3167  0DEB              l_spr_bullet_fireball_00110:
3168  0DEB  FA 04 0E    	jp	M, l_spr_bullet_fireball_00102
3169  0DEE  7B          	ld	a, e
3170  0DEF  DD 86 04    	add	a,(ix+4)
3171  0DF2  32 00 00    	ld	(_s_lin0),a
3172  0DF5  2A 00 00    	ld	hl,(_bullet)
3173  0DF8  26 00       	ld	h,0x00
3174  0DFA  01 00 00    	ld	bc,_bullet_lin
3175  0DFD  09          	add	hl,bc
3176  0DFE  3A 00 00    	ld	a,(_s_lin0)
3177  0E01  77          	ld	(hl),a
3178  0E02  18 21       	jr	l_spr_bullet_fireball_00104
3179  0E04              l_spr_bullet_fireball_00102:
3180  0E04  7B          	ld	a, e
3181  0E05  DD 96 04    	sub	a,(ix+4)
3182  0E08  32 00 00    	ld	(_s_lin0),a
3183  0E0B  2A 00 00    	ld	hl,(_bullet)
3184  0E0E  26 00       	ld	h,0x00
3185  0E10  01 00 00    	ld	bc,_bullet_lin
3186  0E13  09          	add	hl,bc
3187  0E14  3A 00 00    	ld	a,(_s_lin0)
3188  0E17  77          	ld	(hl),a
3189  0E18  2A 00 00    	ld	hl,(_bullet)
3190  0E1B  26 00       	ld	h,0x00
3191  0E1D  01 00 00    	ld	bc,_bullet_class
3192  0E20  09          	add	hl,bc
3193  0E21  DD 7E 05    	ld	a,(ix+5)
3194  0E24  77          	ld	(hl),a
3195  0E25              l_spr_bullet_fireball_00104:
3196  0E25  DD E1       	pop	ix
3197  0E27  C9          	ret
3198  0E28              	SECTION code_compiler
3199  0E28              ;	---------------------------------
3200  0E28              ; Function spr_bullet_axe
3201  0E28              ; ---------------------------------
3202  0E28              _spr_bullet_axe:
3203  0E28  2A 00 00    	ld	hl,(_bullet)
3204  0E2B  26 00       	ld	h,0x00
3205  0E2D  01 00 00    	ld	bc,_bullet_lin
3206  0E30  09          	add	hl,bc
3207  0E31  7E          	ld	a,(hl)
3208  0E32  32 00 00    	ld	(_s_lin0),a
3209  0E35  2A 00 00    	ld	hl,(_bullet)
3210  0E38  26 00       	ld	h,0x00
3211  0E3A  01 00 00    	ld	bc,_bullet_col
3212  0E3D  09          	add	hl,bc
3213  0E3E  7E          	ld	a,(hl)
3214  0E3F  C6 FF       	add	a,0xff
3215  0E41  32 00 00    	ld	(_s_col0),a
3216  0E44  2A 00 00    	ld	hl,(_bullet)
3217  0E47  26 00       	ld	h,0x00
3218  0E49  01 00 00    	ld	bc,_bullet_vel
3219  0E4C  09          	add	hl,bc
3220  0E4D  5E          	ld	e,(hl)
3221  0E4E  4D          	ld	c,l
3222  0E4F  44          	ld	b,h
3223  0E50  21 00 00    	ld	hl,_game_gravity
3224  0E53  56          	ld	d, (hl)
3225  0E54  7B          	ld	a, e
3226  0E55  82          	add	a, d
3227  0E56  02          	ld	(bc), a
3228  0E57  2A 00 00    	ld	hl,(_bullet)
3229  0E5A  26 00       	ld	h,0x00
3230  0E5C  01 00 00    	ld	bc,_bullet_vel
3231  0E5F  09          	add	hl,bc
3232  0E60  5E          	ld	e,(hl)
3233  0E61  3E 78       	ld	a,0x78
3234  0E63  93          	sub	a,e
3235  0E64  4D          	ld	c,l
3236  0E65  44          	ld	b,h
3237  0E66  E2 6B 0E    	jp	PO, l_spr_bullet_axe_00128
3238  0E69  EE 80       	xor	a,0x80
3239  0E6B              l_spr_bullet_axe_00128:
3240  0E6B  F2 71 0E    	jp	P, l_spr_bullet_axe_00102
3241  0E6E  3E 78       	ld	a,0x78
3242  0E70  02          	ld	(bc), a
3243  0E71              l_spr_bullet_axe_00102:
3244  0E71  2A 00 00    	ld	hl,(_bullet)
3245  0E74  26 00       	ld	h,0x00
3246  0E76  01 00 00    	ld	bc,_bullet_vel
3247  0E79  09          	add	hl,bc
3248  0E7A  7E          	ld	a,(hl)
3249  0E7B  EE 80       	xor	a,0x80
3250  0E7D  D6 08       	sub	a,0x08
3251  0E7F  30 02       	jr	NC,l_spr_bullet_axe_00104
3252  0E81  36 88       	ld	(hl),0x88
3253  0E83              l_spr_bullet_axe_00104:
3254  0E83  2A 00 00    	ld	hl,(_bullet)
3255  0E86  26 00       	ld	h,0x00
3256  0E88  01 00 00    	ld	bc,_bullet_vel
3257  0E8B  09          	add	hl,bc
3258  0E8C  7E          	ld	a,(hl)
3259  0E8D  CB 47       	bit	0,a
3260  0E8F  32 00 00    	ld	(_s_lin1),a
3261  0E92  28 04       	jr	Z,l_spr_bullet_axe_00106
3262  0E94  21 00 00    	ld	hl,_s_lin1
3263  0E97  35          	dec	(hl)
3264  0E98              l_spr_bullet_axe_00106:
3265  0E98  2A 00 00    	ld	hl,(_bullet)
3266  0E9B  26 00       	ld	h,0x00
3267  0E9D  01 00 00    	ld	bc,_bullet_lin
3268  0EA0  09          	add	hl,bc
3269  0EA1  7E          	ld	a,(hl)
3270  0EA2  4D          	ld	c,l
3271  0EA3  44          	ld	b,h
3272  0EA4  21 00 00    	ld	hl,_s_lin1
3273  0EA7  86          	add	a, (hl)
3274  0EA8  21 00 00    	ld	hl,_s_lin0
3275  0EAB  77          	ld	(hl), a
3276  0EAC  3E 90       	ld	a,0x90
3277  0EAE  96          	sub	a, (hl)
3278  0EAF  30 11       	jr	NC,l_spr_bullet_axe_00108
3279  0EB1  21 00 00    	ld	hl,_bullet_count
3280  0EB4  35          	dec	(hl)
3281  0EB5  2A 00 00    	ld	hl,(_bullet)
3282  0EB8  26 00       	ld	h,0x00
3283  0EBA  01 00 00    	ld	bc,_bullet_col
3284  0EBD  09          	add	hl,bc
3285  0EBE  36 FF       	ld	(hl),0xff
3286  0EC0  18 04       	jr	l_spr_bullet_axe_00110
3287  0EC2              l_spr_bullet_axe_00108:
3288  0EC2  3A 00 00    	ld	a,(_s_lin0)
3289  0EC5  02          	ld	(bc), a
3290  0EC6              l_spr_bullet_axe_00110:
3291  0EC6  C9          	ret
3292  0EC7              	SECTION code_compiler
3293  0EC7              ;	---------------------------------
3294  0EC7              ; Function spr_colision_b
3295  0EC7              ; ---------------------------------
3296  0EC7              _spr_colision_b:
3297  0EC7  CD 00 00    	call	___sdcc_enter_ix
3298  0ECA  3E 00       	ld	a, +((_bullet_class) & 0xFF)
3299  0ECC  DD 86 05    	add	a,(ix+5)
3300  0ECF  4F          	ld	c, a
3301  0ED0  3E 00       	ld	a, +((_bullet_class) / 256)
3302  0ED2  CE 00       	adc	a,0x00
3303  0ED4  47          	ld	b, a
3304  0ED5  0A          	ld	a, (bc)
3305  0ED6  D6 04       	sub	a,0x04
3306  0ED8  20 69       	jr	NZ,l_spr_colision_b_00110
3307  0EDA  3E 00       	ld	a, +((_lin) & 0xFF)
3308  0EDC  DD 86 04    	add	a,(ix+4)
3309  0EDF  4F          	ld	c, a
3310  0EE0  3E 00       	ld	a, +((_lin) / 256)
3311  0EE2  CE 00       	adc	a,0x00
3312  0EE4  47          	ld	b, a
3313  0EE5  0A          	ld	a, (bc)
3314  0EE6  4F          	ld	c, a
3315  0EE7  06 00       	ld	b,0x00
3316  0EE9  3E 00       	ld	a, +((_bullet_lin) & 0xFF)
3317  0EEB  DD 86 05    	add	a,(ix+5)
3318  0EEE  5F          	ld	e, a
3319  0EEF  3E 00       	ld	a, +((_bullet_lin) / 256)
3320  0EF1  CE 00       	adc	a,0x00
3321  0EF3  57          	ld	d, a
3322  0EF4  1A          	ld	a, (de)
3323  0EF5  5F          	ld	e, a
3324  0EF6  16 00       	ld	d,0x00
3325  0EF8  79          	ld	a, c
3326  0EF9  93          	sub	a, e
3327  0EFA  6F          	ld	l, a
3328  0EFB  78          	ld	a, b
3329  0EFC  9A          	sbc	a, d
3330  0EFD  67          	ld	h, a
3331  0EFE  CD 00 00    	call	_abs_fastcall
3332  0F01  7D          	ld	a,l
3333  0F02  D6 10       	sub	a,0x10
3334  0F04  7C          	ld	a,h
3335  0F05  17          	rla
3336  0F06  3F          	ccf
3337  0F07  1F          	rra
3338  0F08  DE 80       	sbc	a,0x80
3339  0F0A  D2 AE 0F    	jp	NC, l_spr_colision_b_00111
3340  0F0D  3E 00       	ld	a, +((_col) & 0xFF)
3341  0F0F  DD 86 04    	add	a,(ix+4)
3342  0F12  4F          	ld	c, a
3343  0F13  3E 00       	ld	a, +((_col) / 256)
3344  0F15  CE 00       	adc	a,0x00
3345  0F17  47          	ld	b, a
3346  0F18  0A          	ld	a, (bc)
3347  0F19  4F          	ld	c, a
3348  0F1A  06 00       	ld	b,0x00
3349  0F1C  3E 00       	ld	a, +((_bullet_col) & 0xFF)
3350  0F1E  DD 86 05    	add	a,(ix+5)
3351  0F21  5F          	ld	e, a
3352  0F22  3E 00       	ld	a, +((_bullet_col) / 256)
3353  0F24  CE 00       	adc	a,0x00
3354  0F26  57          	ld	d, a
3355  0F27  1A          	ld	a, (de)
3356  0F28  5F          	ld	e, a
3357  0F29  16 00       	ld	d,0x00
3358  0F2B  79          	ld	a, c
3359  0F2C  93          	sub	a, e
3360  0F2D  6F          	ld	l, a
3361  0F2E  78          	ld	a, b
3362  0F2F  9A          	sbc	a, d
3363  0F30  67          	ld	h, a
3364  0F31  CD 00 00    	call	_abs_fastcall
3365  0F34  7D          	ld	a,l
3366  0F35  D6 02       	sub	a,0x02
3367  0F37  7C          	ld	a,h
3368  0F38  17          	rla
3369  0F39  3F          	ccf
3370  0F3A  1F          	rra
3371  0F3B  DE 80       	sbc	a,0x80
3372  0F3D  30 6F       	jr	NC,l_spr_colision_b_00111
3373  0F3F  2E 01       	ld	l,0x01
3374  0F41  18 6D       	jr	l_spr_colision_b_00112
3375  0F43              l_spr_colision_b_00110:
3376  0F43  3E 00       	ld	a, +((_lin) & 0xFF)
3377  0F45  DD 86 04    	add	a,(ix+4)
3378  0F48  4F          	ld	c, a
3379  0F49  3E 00       	ld	a, +((_lin) / 256)
3380  0F4B  CE 00       	adc	a,0x00
3381  0F4D  47          	ld	b, a
3382  0F4E  0A          	ld	a, (bc)
3383  0F4F  4F          	ld	c, a
3384  0F50  06 00       	ld	b,0x00
3385  0F52  3E 00       	ld	a, +((_bullet_lin) & 0xFF)
3386  0F54  DD 86 05    	add	a,(ix+5)
3387  0F57  5F          	ld	e, a
3388  0F58  3E 00       	ld	a, +((_bullet_lin) / 256)
3389  0F5A  CE 00       	adc	a,0x00
3390  0F5C  57          	ld	d, a
3391  0F5D  1A          	ld	a, (de)
3392  0F5E  5F          	ld	e, a
3393  0F5F  16 00       	ld	d,0x00
3394  0F61  79          	ld	a, c
3395  0F62  93          	sub	a, e
3396  0F63  6F          	ld	l, a
3397  0F64  78          	ld	a, b
3398  0F65  9A          	sbc	a, d
3399  0F66  67          	ld	h, a
3400  0F67  CD 00 00    	call	_abs_fastcall
3401  0F6A  3E 08       	ld	a,0x08
3402  0F6C  BD          	cp	a,l
3403  0F6D  3E 00       	ld	a,0x00
3404  0F6F  9C          	sbc	a,h
3405  0F70  E2 75 0F    	jp	PO, l_spr_colision_b_00136
3406  0F73  EE 80       	xor	a,0x80
3407  0F75              l_spr_colision_b_00136:
3408  0F75  FA AE 0F    	jp	M, l_spr_colision_b_00111
3409  0F78  3E 00       	ld	a, +((_col) & 0xFF)
3410  0F7A  DD 86 04    	add	a,(ix+4)
3411  0F7D  4F          	ld	c, a
3412  0F7E  3E 00       	ld	a, +((_col) / 256)
3413  0F80  CE 00       	adc	a,0x00
3414  0F82  47          	ld	b, a
3415  0F83  0A          	ld	a, (bc)
3416  0F84  4F          	ld	c, a
3417  0F85  06 00       	ld	b,0x00
3418  0F87  3E 00       	ld	a, +((_bullet_col) & 0xFF)
3419  0F89  DD 86 05    	add	a,(ix+5)
3420  0F8C  5F          	ld	e, a
3421  0F8D  3E 00       	ld	a, +((_bullet_col) / 256)
3422  0F8F  CE 00       	adc	a,0x00
3423  0F91  57          	ld	d, a
3424  0F92  1A          	ld	a, (de)
3425  0F93  5F          	ld	e, a
3426  0F94  16 00       	ld	d,0x00
3427  0F96  79          	ld	a, c
3428  0F97  93          	sub	a, e
3429  0F98  6F          	ld	l, a
3430  0F99  78          	ld	a, b
3431  0F9A  9A          	sbc	a, d
3432  0F9B  67          	ld	h, a
3433  0F9C  CD 00 00    	call	_abs_fastcall
3434  0F9F  7D          	ld	a,l
3435  0FA0  D6 02       	sub	a,0x02
3436  0FA2  7C          	ld	a,h
3437  0FA3  17          	rla
3438  0FA4  3F          	ccf
3439  0FA5  1F          	rra
3440  0FA6  DE 80       	sbc	a,0x80
3441  0FA8  30 04       	jr	NC,l_spr_colision_b_00111
3442  0FAA  2E 01       	ld	l,0x01
3443  0FAC  18 02       	jr	l_spr_colision_b_00112
3444  0FAE              l_spr_colision_b_00111:
3445  0FAE  2E 00       	ld	l,0x00
3446  0FB0              l_spr_colision_b_00112:
3447  0FB0  DD E1       	pop	ix
3448  0FB2  C9          	ret
3449  0FB3              	SECTION code_compiler
3450  0FB3              ;	---------------------------------
3451  0FB3              ; Function spr_colision_boss
3452  0FB3              ; ---------------------------------
3453  0FB3              _spr_colision_boss:
3454  0FB3  CD 00 00    	call	___sdcc_enter_ix
3455  0FB6  DD 4E 05    	ld	c,(ix+5)
3456  0FB9  06 00       	ld	b,0x00
3457  0FBB  03          	inc	bc
3458  0FBC  3A 00 00    	ld	a,(_boss_col)
3459  0FBF  5F          	ld	e,a
3460  0FC0  16 00       	ld	d,0x00
3461  0FC2  13          	inc	de
3462  0FC3  13          	inc	de
3463  0FC4  62          	ld	h, d
3464  0FC5  79          	ld	a, c
3465  0FC6  93          	sub	a, e
3466  0FC7  6F          	ld	l, a
3467  0FC8  78          	ld	a, b
3468  0FC9  9C          	sbc	a, h
3469  0FCA  67          	ld	h, a
3470  0FCB  CD 00 00    	call	_abs_fastcall
3471  0FCE  7D          	ld	a,l
3472  0FCF  32 00 00    	ld	(_tmp0),a
3473  0FD2  D6 02       	sub	a,0x02
3474  0FD4  30 2A       	jr	NC,l_spr_colision_boss_00104
3475  0FD6  DD 4E 04    	ld	c,(ix+4)
3476  0FD9  06 00       	ld	b,0x00
3477  0FDB  21 08 00    	ld	hl,0x0008
3478  0FDE  09          	add	hl,bc
3479  0FDF  3A 00 00    	ld	a,(_boss_lin)
3480  0FE2  5F          	ld	e,a
3481  0FE3  16 00       	ld	d,0x00
3482  0FE5  4D          	ld	c,l
3483  0FE6  44          	ld	b,h
3484  0FE7  21 10 00    	ld	hl,0x0010
3485  0FEA  19          	add	hl, de
3486  0FEB  79          	ld	a, c
3487  0FEC  95          	sub	a, l
3488  0FED  6F          	ld	l, a
3489  0FEE  78          	ld	a, b
3490  0FEF  9C          	sbc	a, h
3491  0FF0  67          	ld	h, a
3492  0FF1  CD 00 00    	call	_abs_fastcall
3493  0FF4  7D          	ld	a,l
3494  0FF5  32 00 00    	ld	(_tmp1),a
3495  0FF8  D6 10       	sub	a,0x10
3496  0FFA  30 04       	jr	NC,l_spr_colision_boss_00104
3497  0FFC  2E 01       	ld	l,0x01
3498  0FFE  18 02       	jr	l_spr_colision_boss_00105
3499  1000              l_spr_colision_boss_00104:
3500  1000  2E 00       	ld	l,0x00
3501  1002              l_spr_colision_boss_00105:
3502  1002  DD E1       	pop	ix
3503  1004  C9          	ret
3504  1005              	SECTION code_compiler
3505  1005              ;	---------------------------------
3506  1005              ; Function spr_bullets_play
3507  1005              ; ---------------------------------
3508  1005              _spr_bullets_play:
3509  1005  CD 00 00    	call	___sdcc_enter_ix
3510  1008  F5          	push	af
3511  1009  21 00 00    	ld	hl,_bullet
3512  100C  36 00       	ld	(hl),0x00
3513  100E              l_spr_bullets_play_00143:
3514  100E  2A 00 00    	ld	hl,(_bullet)
3515  1011  26 00       	ld	h,0x00
3516  1013  01 00 00    	ld	bc,_bullet_col
3517  1016  09          	add	hl,bc
3518  1017  7E          	ld	a,(hl)
3519  1018  4F          	ld	c,a
3520  1019  3C          	inc	a
3521  101A  CA 79 12    	jp	Z,l_spr_bullets_play_00141
3522  101D  3A 00 00    	ld	a,(_bullet)
3523  1020  5F          	ld	e,a
3524  1021  16 00       	ld	d,0x00
3525  1023  21 00 00    	ld	hl,_bullet_lin
3526  1026  19          	add	hl,de
3527  1027  7E          	ld	a,(hl)
3528  1028  32 00 00    	ld	(_s_lin0),a
3529  102B  21 00 00    	ld	hl,_s_col0
3530  102E  71          	ld	(hl),c
3531  102F  DD 71 FE    	ld	(ix-2),c
3532  1032  CD 61 0A    	call	_spr_back_repaint
3533  1035  2A 00 00    	ld	hl,(_bullet)
3534  1038  26 00       	ld	h,0x00
3535  103A  01 00 00    	ld	bc,_bullet_class
3536  103D  09          	add	hl,bc
3537  103E  7E          	ld	a,(hl)
3538  103F  FE 02       	cp	a,0x02
3539  1041  28 0A       	jr	Z,l_spr_bullets_play_00103
3540  1043  FE 03       	cp	a,0x03
3541  1045  28 10       	jr	Z,l_spr_bullets_play_00104
3542  1047  D6 04       	sub	a,0x04
3543  1049  28 16       	jr	Z,l_spr_bullets_play_00105
3544  104B  18 25       	jr	l_spr_bullets_play_00108
3545  104D              l_spr_bullets_play_00103:
3546  104D  21 FE 03    	ld	hl,0x03fe
3547  1050  E5          	push	hl
3548  1051  CD BD 0D    	call	_spr_bullet_fireball
3549  1054  F1          	pop	af
3550  1055  18 1B       	jr	l_spr_bullets_play_00108
3551  1057              l_spr_bullets_play_00104:
3552  1057  21 02 02    	ld	hl,0x0202
3553  105A  E5          	push	hl
3554  105B  CD BD 0D    	call	_spr_bullet_fireball
3555  105E  F1          	pop	af
3556  105F  18 11       	jr	l_spr_bullets_play_00108
3557  1061              l_spr_bullets_play_00105:
3558  1061  CD 28 0E    	call	_spr_bullet_axe
3559  1064  2A 00 00    	ld	hl,(_bullet)
3560  1067  26 00       	ld	h,0x00
3561  1069  01 00 00    	ld	bc,_bullet_col
3562  106C  09          	add	hl,bc
3563  106D  7E          	ld	a,(hl)
3564  106E  3C          	inc	a
3565  106F  CA 79 12    	jp	Z,l_spr_bullets_play_00141
3566  1072              l_spr_bullets_play_00108:
3567  1072  2A 00 00    	ld	hl,(_bullet)
3568  1075  26 00       	ld	h,0x00
3569  1077  01 00 00    	ld	bc,_bullet_dir
3570  107A  09          	add	hl,bc
3571  107B  56          	ld	d, (hl)
3572  107C  2A 00 00    	ld	hl,(_bullet)
3573  107F  26 00       	ld	h,0x00
3574  1081  01 00 00    	ld	bc,_bullet_colint
3575  1084  09          	add	hl,bc
3576  1085  5E          	ld	e,(hl)
3577  1086  14          	inc	d
3578  1087  4D          	ld	c,l
3579  1088  44          	ld	b,h
3580  1089  20 45       	jr	NZ,l_spr_bullets_play_00118
3581  108B  1C          	inc	e
3582  108C  7B          	ld	a,e
3583  108D  02          	ld	(bc),a
3584  108E  2A 00 00    	ld	hl,(_bullet)
3585  1091  26 00       	ld	h,0x00
3586  1093  01 00 00    	ld	bc,_bullet_colint
3587  1096  09          	add	hl,bc
3588  1097  7E          	ld	a,(hl)
3589  1098  4D          	ld	c,l
3590  1099  44          	ld	b,h
3591  109A  21 00 00    	ld	hl,_bullet
3592  109D  DD 77 FF    	ld	(ix-1),a
3593  10A0  3E 00       	ld	a, +((_bullet_frames) & 0xFF)
3594  10A2  86          	add	a, (hl)
3595  10A3  5F          	ld	e, a
3596  10A4  3E 00       	ld	a, +((_bullet_frames) / 256)
3597  10A6  CE 00       	adc	a,0x00
3598  10A8  57          	ld	d, a
3599  10A9  1A          	ld	a, (de)
3600  10AA  5F          	ld	e, a
3601  10AB  DD 7E FF    	ld	a,(ix-1)
3602  10AE  93          	sub	a, e
3603  10AF  38 5E       	jr	C,l_spr_bullets_play_00119
3604  10B1  5E          	ld	e,(hl)
3605  10B2  16 00       	ld	d,0x00
3606  10B4  21 00 00    	ld	hl,_bullet_col
3607  10B7  19          	add	hl,de
3608  10B8  7E          	ld	a,(hl)
3609  10B9  3C          	inc	a
3610  10BA  DD 77 FE    	ld	(ix-2),a
3611  10BD  AF          	xor	a, a
3612  10BE  02          	ld	(bc), a
3613  10BF  DD 7E FE    	ld	a,(ix-2)
3614  10C2  E6 01       	and	a,0x01
3615  10C4  3D          	dec	a
3616  10C5  20 48       	jr	NZ,l_spr_bullets_play_00119
3617  10C7  DD 7E FE    	ld	a,(ix-2)
3618  10CA  3C          	inc	a
3619  10CB  32 00 00    	ld	(_s_col0),a
3620  10CE  18 3F       	jr	l_spr_bullets_play_00119
3621  10D0              l_spr_bullets_play_00118:
3622  10D0  1D          	dec	e
3623  10D1  7B          	ld	a, e
3624  10D2  02          	ld	(bc), a
3625  10D3  2A 00 00    	ld	hl,(_bullet)
3626  10D6  26 00       	ld	h,0x00
3627  10D8  01 00 00    	ld	bc,_bullet_colint
3628  10DB  09          	add	hl,bc
3629  10DC  7E          	ld	a,(hl)
3630  10DD  3C          	inc	a
3631  10DE  20 2F       	jr	NZ,l_spr_bullets_play_00119
3632  10E0  4D          	ld	c,l
3633  10E1  44          	ld	b,h
3634  10E2  2A 00 00    	ld	hl,(_bullet)
3635  10E5  26 00       	ld	h,0x00
3636  10E7  11 00 00    	ld	de,_bullet_col
3637  10EA  19          	add	hl,de
3638  10EB  7E          	ld	a,(hl)
3639  10EC  C6 FF       	add	a,0xff
3640  10EE  21 00 00    	ld	hl,_bullet
3641  10F1  DD 77 FE    	ld	(ix-2),a
3642  10F4  5E          	ld	e,(hl)
3643  10F5  16 00       	ld	d,0x00
3644  10F7  21 00 00    	ld	hl,_bullet_frames
3645  10FA  19          	add	hl,de
3646  10FB  7E          	ld	a,(hl)
3647  10FC  C6 FF       	add	a,0xff
3648  10FE  02          	ld	(bc), a
3649  10FF  DD 7E FE    	ld	a,(ix-2)
3650  1102  E6 01       	and	a,0x01
3651  1104  3D          	dec	a
3652  1105  20 08       	jr	NZ,l_spr_bullets_play_00119
3653  1107  DD 7E FE    	ld	a,(ix-2)
3654  110A  C6 FF       	add	a,0xff
3655  110C  32 00 00    	ld	(_s_col0),a
3656  110F              l_spr_bullets_play_00119:
3657  110F  2A 00 00    	ld	hl,(_bullet)
3658  1112  26 00       	ld	h,0x00
3659  1114  01 00 00    	ld	bc,_bullet_max
3660  1117  09          	add	hl,bc
3661  1118  7E          	ld	a,(hl)
3662  1119  B7          	or	a,a
3663  111A  28 62       	jr	Z,l_spr_bullets_play_00123
3664  111C  21 00 00    	ld	hl,_bullet
3665  111F  DD 4E FE    	ld	c,(ix-2)
3666  1122  06 00       	ld	b,0x00
3667  1124  5E          	ld	e,(hl)
3668  1125  50          	ld	d,b
3669  1126  21 00 00    	ld	hl,_bullet_col0
3670  1129  19          	add	hl,de
3671  112A  5E          	ld	e, (hl)
3672  112B  16 00       	ld	d,0x00
3673  112D  79          	ld	a, c
3674  112E  93          	sub	a, e
3675  112F  6F          	ld	l, a
3676  1130  78          	ld	a, b
3677  1131  9A          	sbc	a, d
3678  1132  67          	ld	h, a
3679  1133  CD 00 00    	call	_abs_fastcall
3680  1136  7D          	ld	a,l
3681  1137  32 00 00    	ld	(_tmp0),a
3682  113A  2A 00 00    	ld	hl,(_bullet)
3683  113D  26 00       	ld	h,0x00
3684  113F  01 00 00    	ld	bc,_bullet_max
3685  1142  09          	add	hl,bc
3686  1143  7E          	ld	a,(hl)
3687  1144  21 00 00    	ld	hl,_tmp0
3688  1147  96          	sub	a, (hl)
3689  1148  30 34       	jr	NC,l_spr_bullets_play_00123
3690  114A  21 00 00    	ld	hl,_bullet_count
3691  114D  35          	dec	(hl)
3692  114E  2A 00 00    	ld	hl,(_bullet)
3693  1151  26 00       	ld	h,0x00
3694  1153  5D          	ld	e,l
3695  1154  01 00 00    	ld	bc,_bullet_col
3696  1157  09          	add	hl,bc
3697  1158  46          	ld	b,(hl)
3698  1159  16 00       	ld	d,0x00
3699  115B  21 00 00    	ld	hl,_bullet_lin
3700  115E  19          	add	hl,de
3701  115F  56          	ld	d, (hl)
3702  1160  21 00 00    	ld	hl,0x0000
3703  1163  E5          	push	hl
3704  1164  21 59 02    	ld	hl,0x0259
3705  1167  E5          	push	hl
3706  1168  4A          	ld	c, d
3707  1169  C5          	push	bc
3708  116A  CD 08 0C    	call	_spr_add_anim
3709  116D  F1          	pop	af
3710  116E  F1          	pop	af
3711  116F  F1          	pop	af
3712  1170  2A 00 00    	ld	hl,(_bullet)
3713  1173  26 00       	ld	h,0x00
3714  1175  01 00 00    	ld	bc,_bullet_col
3715  1178  09          	add	hl,bc
3716  1179  36 FF       	ld	(hl),0xff
3717  117B  C3 79 12    	jp	l_spr_bullets_play_00141
3718  117E              l_spr_bullets_play_00123:
3719  117E  2A 00 00    	ld	hl,(_bullet)
3720  1181  26 00       	ld	h,0x00
3721  1183  01 00 00    	ld	bc,_bullet_col
3722  1186  09          	add	hl,bc
3723  1187  3E 1E       	ld	a,0x1e
3724  1189  DD 96 FE    	sub	a,(ix-2)
3725  118C  4D          	ld	c,l
3726  118D  44          	ld	b,h
3727  118E  30 0A       	jr	NC,l_spr_bullets_play_00125
3728  1190  21 00 00    	ld	hl,_bullet_count
3729  1193  35          	dec	(hl)
3730  1194  3E FF       	ld	a,0xff
3731  1196  02          	ld	(bc), a
3732  1197  C3 79 12    	jp	l_spr_bullets_play_00141
3733  119A              l_spr_bullets_play_00125:
3734  119A  0A          	ld	a, (bc)
3735  119B  4F          	ld	c, a
3736  119C  DD 7E FE    	ld	a,(ix-2)
3737  119F  91          	sub	a, c
3738  11A0  CA 3E 12    	jp	Z,l_spr_bullets_play_00137
3739  11A3  3A 00 00    	ld	a,(_s_lin0)
3740  11A6  C6 08       	add	a,0x08
3741  11A8  4F          	ld	c, a
3742  11A9  3A 00 00    	ld	a, (_s_col0)
3743  11AC  47          	ld	b,a
3744  11AD  C5          	push	bc
3745  11AE  CD 00 00    	call	_spr_calc_index
3746  11B1  F1          	pop	af
3747  11B2  22 00 00    	ld	(_index0),hl
3748  11B5  01 00 00    	ld	bc,_scr_map
3749  11B8  09          	add	hl,bc
3750  11B9  7E          	ld	a,(hl)
3751  11BA  5F          	ld	e,a
3752  11BB  D6 4D       	sub	a,0x4d
3753  11BD  20 4C       	jr	NZ,l_spr_bullets_play_00127
3754  11BF  3A 00 00    	ld	a,(_bullet)
3755  11C2  D6 07       	sub	a,0x07
3756  11C4  20 45       	jr	NZ,l_spr_bullets_play_00127
3757  11C6  E5          	push	hl
3758  11C7  2A 00 00    	ld	hl,(_index0)
3759  11CA  CD 00 00    	call	_game_match_back
3760  11CD  C1          	pop	bc
3761  11CE  7D          	ld	a,l
3762  11CF  02          	ld	(bc), a
3763  11D0  2A 00 00    	ld	hl,(_index0)
3764  11D3  CD 00 00    	call	_game_obj_set
3765  11D6  2A 00 00    	ld	hl,(_bullet)
3766  11D9  26 00       	ld	h,0x00
3767  11DB  01 00 00    	ld	bc,_bullet_lin
3768  11DE  09          	add	hl,bc
3769  11DF  ED 5B 00 00 	ld	de,(_index0)
3770  11E3  3E 04       	ld	a,0x04
3771  11E5  4D          	ld	c,l
3772  11E6  44          	ld	b,h
3773  11E7              l_spr_bullets_play_00252:
3774  11E7  CB 3A       	srl	d
3775  11E9  CB 1B       	rr	e
3776  11EB  3D          	dec	a
3777  11EC  20 F9       	jr	NZ,l_spr_bullets_play_00252
3778  11EE  7B          	ld	a, e
3779  11EF  07          	rlca
3780  11F0  07          	rlca
3781  11F1  07          	rlca
3782  11F2  07          	rlca
3783  11F3  E6 F0       	and	a,0xf0
3784  11F5  02          	ld	(bc), a
3785  11F6  2A 00 00    	ld	hl,(_bullet)
3786  11F9  26 00       	ld	h,0x00
3787  11FB  01 00 00    	ld	bc,_bullet_col
3788  11FE  09          	add	hl,bc
3789  11FF  3A 00 00    	ld	a,(_index0)
3790  1202  E6 0F       	and	a,0x0f
3791  1204  87          	add	a,a
3792  1205  77          	ld	(hl),a
3793  1206  CD 28 13    	call	_spr_bullet_explode
3794  1209  18 6E       	jr	l_spr_bullets_play_00141
3795  120B              l_spr_bullets_play_00127:
3796  120B  7B          	ld	a,e
3797  120C  FE 48       	cp	a,0x48
3798  120E  38 09       	jr	C,l_spr_bullets_play_00130
3799  1210  D6 80       	sub	a,0x80
3800  1212  30 05       	jr	NC,l_spr_bullets_play_00130
3801  1214  CD 28 13    	call	_spr_bullet_explode
3802  1217  18 60       	jr	l_spr_bullets_play_00141
3803  1219              l_spr_bullets_play_00130:
3804  1219  2A 00 00    	ld	hl,(_bullet)
3805  121C  26 00       	ld	h,0x00
3806  121E  01 00 00    	ld	bc,_bullet_col
3807  1221  09          	add	hl,bc
3808  1222  4D          	ld	c,l
3809  1223  44          	ld	b,h
3810  1224  21 00 00    	ld	hl,_bullet
3811  1227  DD 7E FE    	ld	a,(ix-2)
3812  122A  02          	ld	(bc), a
3813  122B  7E          	ld	a, (hl)
3814  122C  D6 07       	sub	a,0x07
3815  122E  20 0B       	jr	NZ,l_spr_bullets_play_00133
3816  1230  3A 07 00    	ld	a, (_bullet_col + 7)
3817  1233  3C          	inc	a
3818  1234  28 05       	jr	Z,l_spr_bullets_play_00133
3819  1236  CD BA 12    	call	_spr_bullet_player_colision
3820  1239  18 03       	jr	l_spr_bullets_play_00137
3821  123B              l_spr_bullets_play_00133:
3822  123B  CD 88 12    	call	_spr_bullet_enemy_colision
3823  123E              l_spr_bullets_play_00137:
3824  123E  2A 00 00    	ld	hl,(_bullet)
3825  1241  26 00       	ld	h,0x00
3826  1243  01 00 00    	ld	bc,_bullet_col
3827  1246  09          	add	hl,bc
3828  1247  7E          	ld	a,(hl)
3829  1248  3C          	inc	a
3830  1249  28 2E       	jr	Z,l_spr_bullets_play_00141
3831  124B  DD 7E FE    	ld	a,(ix-2)
3832  124E  D6 20       	sub	a,0x20
3833  1250  30 27       	jr	NC,l_spr_bullets_play_00141
3834  1252  F3          	di
3835  1253  2A 00 00    	ld	hl,(_bullet)
3836  1256  26 00       	ld	h,0x00
3837  1258  01 00 00    	ld	bc,_bullet_tile
3838  125B  09          	add	hl,bc
3839  125C  4E          	ld	c, (hl)
3840  125D  3A 00 00    	ld	a,(_bullet)
3841  1260  5F          	ld	e,a
3842  1261  16 00       	ld	d,0x00
3843  1263  21 00 00    	ld	hl,_bullet_colint
3844  1266  19          	add	hl,de
3845  1267  7E          	ld	a,(hl)
3846  1268  81          	add	a,c
3847  1269  47          	ld	b, a
3848  126A  DD 7E FE    	ld	a,(ix-2)
3849  126D  F5          	push	af
3850  126E  33          	inc	sp
3851  126F  3A 00 00    	ld	a,(_s_lin0)
3852  1272  48          	ld	c,b
3853  1273  47          	ld	b,a
3854  1274  C5          	push	bc
3855  1275  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
3856  1278  FB          	ei
3857  1279              l_spr_bullets_play_00141:
3858  1279  21 00 00    	ld	hl,_bullet
3859  127C  7E          	ld	a,(hl)
3860  127D  3C          	inc	a
3861  127E  77          	ld	(hl),a
3862  127F  D6 08       	sub	a,0x08
3863  1281  DA 0E 10    	jp	C, l_spr_bullets_play_00143
3864  1284  F1          	pop	af
3865  1285  DD E1       	pop	ix
3866  1287  C9          	ret
3867  1288              	SECTION code_compiler
3868  1288              ;	---------------------------------
3869  1288              ; Function spr_bullet_enemy_colision
3870  1288              ; ---------------------------------
3871  1288              _spr_bullet_enemy_colision:
3872  1288  3A 00 00    	ld	a,(_bullet)
3873  128B  57          	ld	d,a
3874  128C  1E 07       	ld	e,0x07
3875  128E  D5          	push	de
3876  128F  CD C7 0E    	call	_spr_colision_b
3877  1292  F1          	pop	af
3878  1293  7D          	ld	a, l
3879  1294  B7          	or	a, a
3880  1295  28 22       	jr	Z,l_spr_bullet_enemy_colision_00106
3881  1297  2A 00 00    	ld	hl,(_bullet)
3882  129A  26 00       	ld	h,0x00
3883  129C  01 00 00    	ld	bc,_bullet_col
3884  129F  09          	add	hl,bc
3885  12A0  3A 00 00    	ld	a,(_s_col0)
3886  12A3  77          	ld	(hl),a
3887  12A4  CD 28 13    	call	_spr_bullet_explode
3888  12A7  3A 00 00    	ld	a,(_game_boss)
3889  12AA  B7          	or	a, a
3890  12AB  28 07       	jr	Z,l_spr_bullet_enemy_colision_00102
3891  12AD  2E 14       	ld	l,0x14
3892  12AF  CD 00 00    	call	_player_damage
3893  12B2  18 05       	jr	l_spr_bullet_enemy_colision_00106
3894  12B4              l_spr_bullet_enemy_colision_00102:
3895  12B4  2E 0A       	ld	l,0x0a
3896  12B6  CD 00 00    	call	_player_damage
3897  12B9              l_spr_bullet_enemy_colision_00106:
3898  12B9  C9          	ret
3899  12BA              	SECTION code_compiler
3900  12BA              ;	---------------------------------
3901  12BA              ; Function spr_bullet_player_colision
3902  12BA              ; ---------------------------------
3903  12BA              _spr_bullet_player_colision:
3904  12BA  0E 00       	ld	c,0x00
3905  12BC  11 00 00    	ld	de,_class+0
3906  12BF  41          	ld	b,c
3907  12C0              l_spr_bullet_player_colision_00106:
3908  12C0  78          	ld	a, b
3909  12C1  D6 07       	sub	a,0x07
3910  12C3  30 3C       	jr	NC,l_spr_bullet_player_colision_00108
3911  12C5  68          	ld	l,b
3912  12C6  26 00       	ld	h,0x00
3913  12C8  19          	add	hl, de
3914  12C9  7E          	ld	a, (hl)
3915  12CA  B7          	or	a, a
3916  12CB  28 30       	jr	Z,l_spr_bullet_player_colision_00102
3917  12CD  FE 01       	cp	a,0x01
3918  12CF  28 2C       	jr	Z,l_spr_bullet_player_colision_00102
3919  12D1  D6 09       	sub	a,0x09
3920  12D3  28 28       	jr	Z,l_spr_bullet_player_colision_00102
3921  12D5  3A 00 00    	ld	a,(_bullet)
3922  12D8  C5          	push	bc
3923  12D9  D5          	push	de
3924  12DA  48          	ld	c,b
3925  12DB  47          	ld	b,a
3926  12DC  C5          	push	bc
3927  12DD  CD C7 0E    	call	_spr_colision_b
3928  12E0  F1          	pop	af
3929  12E1  D1          	pop	de
3930  12E2  C1          	pop	bc
3931  12E3  7D          	ld	a,l
3932  12E4  B7          	or	a, a
3933  12E5  28 16       	jr	Z,l_spr_bullet_player_colision_00102
3934  12E7  C5          	push	bc
3935  12E8  CD 00 00    	call	_rand
3936  12EB  11 06 00    	ld	de,0x0006
3937  12EE  D5          	push	de
3938  12EF  E5          	push	hl
3939  12F0  CD 00 00    	call	__modsint_callee
3940  12F3  CD 00 00    	call	_player_score_add
3941  12F6  C1          	pop	bc
3942  12F7  69          	ld	l, c
3943  12F8  CD 00 00    	call	_enemy_kill
3944  12FB  18 04       	jr	l_spr_bullet_player_colision_00108
3945  12FD              l_spr_bullet_player_colision_00102:
3946  12FD  04          	inc	b
3947  12FE  48          	ld	c, b
3948  12FF  18 BF       	jr	l_spr_bullet_player_colision_00106
3949  1301              l_spr_bullet_player_colision_00108:
3950  1301  3A 00 00    	ld	a,(_game_boss)
3951  1304  B7          	or	a, a
3952  1305  C8          	ret	Z
3953  1306  21 07 00    	ld	hl,+(_bullet_col + 0x0007)
3954  1309  46          	ld	b, (hl)
3955  130A  21 07 00    	ld	hl,+(_bullet_lin + 0x0007)
3956  130D  4E          	ld	c, (hl)
3957  130E  C5          	push	bc
3958  130F  CD B3 0F    	call	_spr_colision_boss
3959  1312  F1          	pop	af
3960  1313  7D          	ld	a, l
3961  1314  B7          	or	a, a
3962  1315  C8          	ret	Z
3963  1316  CD 28 13    	call	_spr_bullet_explode
3964  1319  21 00 00    	ld	hl,_game_boss_hit
3965  131C  35          	dec	(hl)
3966  131D  CD 00 00    	call	_game_update_stats
3967  1320  3A 00 00    	ld	a,(_game_boss_hit)
3968  1323  B7          	or	a, a
3969  1324  C0          	ret	NZ
3970  1325  C3 00 00    	jp  _game_boss_kill
3971  1328              	SECTION code_compiler
3972  1328              ;	---------------------------------
3973  1328              ; Function spr_bullet_explode
3974  1328              ; ---------------------------------
3975  1328              _spr_bullet_explode:
3976  1328  CD 00 00    	call	_audio_explosion
3977  132B  2A 00 00    	ld	hl,(_bullet)
3978  132E  26 00       	ld	h,0x00
3979  1330  01 00 00    	ld	bc,_bullet_col
3980  1333  09          	add	hl,bc
3981  1334  56          	ld	d, (hl)
3982  1335  2A 00 00    	ld	hl,(_bullet)
3983  1338  26 00       	ld	h,0x00
3984  133A  01 00 00    	ld	bc,_bullet_lin
3985  133D  09          	add	hl,bc
3986  133E  46          	ld	b, (hl)
3987  133F  21 00 00    	ld	hl,0x0000
3988  1342  E5          	push	hl
3989  1343  21 87 03    	ld	hl,0x0387
3990  1346  E5          	push	hl
3991  1347  58          	ld	e,b
3992  1348  D5          	push	de
3993  1349  CD 08 0C    	call	_spr_add_anim
3994  134C  F1          	pop	af
3995  134D  F1          	pop	af
3996  134E  F1          	pop	af
3997  134F  21 00 00    	ld	hl,_bullet_count
3998  1352  35          	dec	(hl)
3999  1353  2A 00 00    	ld	hl,(_bullet)
4000  1356  26 00       	ld	h,0x00
4001  1358  01 00 00    	ld	bc,_bullet_col
4002  135B  09          	add	hl,bc
4003  135C  36 FF       	ld	(hl),0xff
4004  135E  C9          	ret
4005  135F              	SECTION code_compiler
4006  135F              ;	---------------------------------
4007  135F              ; Function spr_turn_horizontal
4008  135F              ; ---------------------------------
4009  135F              _spr_turn_horizontal:
4010  135F  21 00 00    	ld	hl,_s_state
4011  1362  CB 56       	bit	2,(hl)
4012  1364  28 05       	jr	Z,l_spr_turn_horizontal_00102
4013  1366  CD 72 00    	call	_spr_set_left
4014  1369  18 06       	jr	l_spr_turn_horizontal_00103
4015  136B              l_spr_turn_horizontal_00102:
4016  136B  21 00 00    	ld	hl,_s_state
4017  136E  CD 79 00    	call	_spr_set_right
4018  1371              l_spr_turn_horizontal_00103:
4019  1371  2A 00 00    	ld	hl,(_sprite)
4020  1374  26 00       	ld	h,0x00
4021  1376  01 00 00    	ld	bc,_state
4022  1379  09          	add	hl,bc
4023  137A  3A 00 00    	ld	a,(_s_state)
4024  137D  77          	ld	(hl),a
4025  137E  2A 00 00    	ld	hl,(_sprite)
4026  1381  26 00       	ld	h,0x00
4027  1383  01 00 00    	ld	bc,_tile
4028  1386  09          	add	hl,bc
4029  1387  E5          	push	hl
4030  1388  21 00 00    	ld	hl,_sprite
4031  138B  CD F0 08    	call	_spr_tile
4032  138E  C1          	pop	bc
4033  138F  7D          	ld	a,l
4034  1390  02          	ld	(bc), a
4035  1391  C9          	ret
4036  1392              	SECTION code_compiler
4037  1392              ;	---------------------------------
4038  1392              ; Function spr_btile_paint_back
4039  1392              ; ---------------------------------
4040  1392              _spr_btile_paint_back:
4041  1392  21 20 00    	ld	hl,0x0020
4042  1395  22 00 00    	ld	(_tmp_ui),hl
4043  1398  21 00 00    	ld	hl,_map_paper
4044  139B  7E          	ld	a, (hl)
4045  139C  0F          	rrca
4046  139D  0F          	rrca
4047  139E  0F          	rrca
4048  139F  E6 1F       	and	a,0x1f
4049  13A1  B6          	or	a, (hl)
4050  13A2  F6 40       	or	a,0x40
4051  13A4  32 00 00    	ld	(_map_paper_clr),a
4052  13A7  0E 00       	ld	c,0x00
4053  13A9              l_spr_btile_paint_back_00120:
4054  13A9  21 00 00    	ld	hl,_tmp_ui
4055  13AC  7E          	ld	a, (hl)
4056  13AD  D6 20       	sub	a,0x20
4057  13AF  23          	inc	hl
4058  13B0  7E          	ld	a, (hl)
4059  13B1  DE 2D       	sbc	a,0x2d
4060  13B3  D2 42 14    	jp	NC, l_spr_btile_paint_back_00122
4061  13B6  79          	ld	a,c
4062  13B7  FE 49       	cp	a,0x49
4063  13B9  30 09       	jr	NC,l_spr_btile_paint_back_00119
4064  13BB  D6 0D       	sub	a,0x0d
4065  13BD  28 05       	jr	Z,l_spr_btile_paint_back_00119
4066  13BF  79          	ld	a, c
4067  13C0  D6 0E       	sub	a,0x0e
4068  13C2  20 05       	jr	NZ,l_spr_btile_paint_back_00115
4069  13C4              l_spr_btile_paint_back_00119:
4070  13C4  3E 58       	ld	a,0x58
4071  13C6  91          	sub	a, c
4072  13C7  30 6B       	jr	NC,l_spr_btile_paint_back_00116
4073  13C9              l_spr_btile_paint_back_00115:
4074  13C9  21 00 00    	ld	hl,_tmp0
4075  13CC  36 00       	ld	(hl),0x00
4076  13CE  21 00 00    	ld	hl,_map_paper_last
4077  13D1  5E          	ld	e, (hl)
4078  13D2  43          	ld	b, e
4079  13D3  3E 38       	ld	a,0x38
4080  13D5  91          	sub	a, c
4081  13D6  30 05       	jr	NC,l_spr_btile_paint_back_00109
4082  13D8  79          	ld	a, c
4083  13D9  D6 41       	sub	a,0x41
4084  13DB  38 0A       	jr	C,l_spr_btile_paint_back_00105
4085  13DD              l_spr_btile_paint_back_00109:
4086  13DD  3E 10       	ld	a,0x10
4087  13DF  91          	sub	a, c
4088  13E0  30 20       	jr	NC,l_spr_btile_paint_back_00112
4089  13E2  79          	ld	a, c
4090  13E3  D6 14       	sub	a,0x14
4091  13E5  30 1B       	jr	NC,l_spr_btile_paint_back_00112
4092  13E7              l_spr_btile_paint_back_00105:
4093  13E7  3A 00 00    	ld	a,(_map_paper)
4094  13EA  D6 10       	sub	a,0x10
4095  13EC  20 09       	jr	NZ,l_spr_btile_paint_back_00102
4096  13EE  21 00 00    	ld	hl,_tmp0
4097  13F1  36 10       	ld	(hl),0x10
4098  13F3  21 00 00    	ld	hl,_map_paper_last_a
4099  13F6  73          	ld	(hl), e
4100  13F7              l_spr_btile_paint_back_00102:
4101  13F7  3A 00 00    	ld	a,(_map_paper_last)
4102  13FA  D6 10       	sub	a,0x10
4103  13FC  20 04       	jr	NZ,l_spr_btile_paint_back_00112
4104  13FE  21 00 00    	ld	hl,_map_paper_last_a
4105  1401  46          	ld	b, (hl)
4106  1402              l_spr_btile_paint_back_00112:
4107  1402  3A 00 00    	ld	a,(_tmp0)
4108  1405  D6 10       	sub	a,0x10
4109  1407  30 2B       	jr	NC,l_spr_btile_paint_back_00116
4110  1409  11 00 00    	ld	de,_btiles
4111  140C  2A 00 00    	ld	hl,(_tmp_ui)
4112  140F  19          	add	hl,de
4113  1410  EB          	ex	de,hl
4114  1411  2A 00 00    	ld	hl,(_tmp0)
4115  1414  26 00       	ld	h,0x00
4116  1416  19          	add	hl,de
4117  1417  7E          	ld	a,(hl)
4118  1418  EB          	ex	de,hl
4119  1419  21 00 00    	ld	hl,_tmp
4120  141C  77          	ld	(hl),a
4121  141D  E6 38       	and	a,0x38
4122  141F  90          	sub	a, b
4123  1420  20 0C       	jr	NZ,l_spr_btile_paint_back_00111
4124  1422  7E          	ld	a, (hl)
4125  1423  E6 C7       	and	a,0xc7
4126  1425  77          	ld	(hl),a
4127  1426  21 00 00    	ld	hl,_map_paper
4128  1429  B6          	or	a, (hl)
4129  142A  32 00 00    	ld	(_tmp),a
4130  142D  12          	ld	(de), a
4131  142E              l_spr_btile_paint_back_00111:
4132  142E  21 00 00    	ld	hl,_tmp0
4133  1431  34          	inc	(hl)
4134  1432  18 CE       	jr	l_spr_btile_paint_back_00112
4135  1434              l_spr_btile_paint_back_00116:
4136  1434  2A 00 00    	ld	hl,(_tmp_ui)
4137  1437  11 30 00    	ld	de,0x0030
4138  143A  19          	add	hl,de
4139  143B  22 00 00    	ld	(_tmp_ui),hl
4140  143E  0C          	inc	c
4141  143F  C3 A9 13    	jp	l_spr_btile_paint_back_00120
4142  1442              l_spr_btile_paint_back_00122:
4143  1442  3A 00 00    	ld	a,(_map_paper)
4144  1445  32 00 00    	ld	(_map_paper_last),a
4145  1448  C3 00 00    	jp  _game_attribs
4146  144B              	SECTION code_compiler
4147  144B              ;	---------------------------------
4148  144B              ; Function spr_flatten
4149  144B              ; ---------------------------------
4150  144B              _spr_flatten:
4151  144B  06 00       	ld	b,0x00
4152  144D              l_spr_flatten_00102:
4153  144D  78          	ld	a, b
4154  144E  07          	rlca
4155  144F  07          	rlca
4156  1450  07          	rlca
4157  1451  E6 F8       	and	a,0xf8
4158  1453  5F          	ld	e, a
4159  1454  16 00       	ld	d,0x00
4160  1456  21 96 DC    	ld	hl,0xdc96
4161  1459  19          	add	hl, de
4162  145A  7E          	ld	a, (hl)
4163  145B  32 00 00    	ld	(_s_lin1),a
4164  145E  16 00       	ld	d,0x00
4165  1460  21 95 DC    	ld	hl,0xdc95
4166  1463  19          	add	hl, de
4167  1464  7E          	ld	a, (hl)
4168  1465  32 00 00    	ld	(_s_col1),a
4169  1468  16 00       	ld	d,0x00
4170  146A  21 98 DC    	ld	hl,0xdc98
4171  146D  19          	add	hl, de
4172  146E  7E          	ld	a, (hl)
4173  146F  32 00 00    	ld	(_s_tile1),a
4174  1472  C5          	push	bc
4175  1473  21 00 00    	ld	hl,0x0000
4176  1476  E5          	push	hl
4177  1477  AF          	xor	a, a
4178  1478  48          	ld	c,b
4179  1479  47          	ld	b,a
4180  147A  C5          	push	bc
4181  147B  CD 00 00    	call	_NIRVANAP_spriteT_callee
4182  147E  2A FF FF    	ld	hl,(_s_col1 - 1)
4183  1481  3A 00 00    	ld	a,(_s_lin1)
4184  1484  6F          	ld	l,a
4185  1485  3A 00 00    	ld	a,(_s_tile1)
4186  1488  E5          	push	hl
4187  1489  F5          	push	af
4188  148A  33          	inc	sp
4189  148B  CD 00 00    	call	_NIRVANAP_drawT_callee
4190  148E  C1          	pop	bc
4191  148F  04          	inc	b
4192  1490  3E 07       	ld	a,0x07
4193  1492  90          	sub	a, b
4194  1493  30 B8       	jr	NC,l_spr_flatten_00102
4195  1495  C9          	ret
4196  1496              	SECTION code_compiler
4197  1496              ;	---------------------------------
4198  1496              ; Function spr_unflattenP1
4199  1496              ; ---------------------------------
4200  1496              _spr_unflattenP1:
4201  1496  CD 00 00    	call	_player_anim_stairs
4202  1499  21 07 00    	ld	hl,+(_col + 0x0007)
4203  149C  46          	ld	b, (hl)
4204  149D  21 07 00    	ld	hl,+(_lin + 0x0007)
4205  14A0  4E          	ld	c, (hl)
4206  14A1  3A 00 00    	ld	a,(_s_tile1)
4207  14A4  C5          	push	bc
4208  14A5  F5          	push	af
4209  14A6  33          	inc	sp
4210  14A7  CD 00 00    	call	_NIRVANAP_drawT_callee
4211  14AA  C9          	ret
4212  14AB              	SECTION IGNORE
4213  0000              
