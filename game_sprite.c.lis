1     0000              MODULE game_sprite_c
2     0000              
3     0000              ;--------------------------------------------------------
4     0000              ; File Created by SDCC : free open source ANSI-C Compiler
5     0000              ; Version 3.6.5 #9958 (Mac OS X i386)
6     0000              ;--------------------------------------------------------
7     0000              ; Processed by Z88DK
8     0000              ;--------------------------------------------------------
9     0000              
10    0000              	EXTERN __divschar
11    0000              	EXTERN __divschar_callee
12    0000              	EXTERN __divsint
13    0000              	EXTERN __divsint_callee
14    0000              	EXTERN __divslong
15    0000              	EXTERN __divslong_callee
16    0000              	EXTERN __divslonglong
17    0000              	EXTERN __divslonglong_callee
18    0000              	EXTERN __divsuchar
19    0000              	EXTERN __divsuchar_callee
20    0000              	EXTERN __divuchar
21    0000              	EXTERN __divuchar_callee
22    0000              	EXTERN __divuint
23    0000              	EXTERN __divuint_callee
24    0000              	EXTERN __divulong
25    0000              	EXTERN __divulong_callee
26    0000              	EXTERN __divulonglong
27    0000              	EXTERN __divulonglong_callee
28    0000              	EXTERN __divuschar
29    0000              	EXTERN __divuschar_callee
30    0000              	EXTERN __modschar
31    0000              	EXTERN __modschar_callee
32    0000              	EXTERN __modsint
33    0000              	EXTERN __modsint_callee
34    0000              	EXTERN __modslong
35    0000              	EXTERN __modslong_callee
36    0000              	EXTERN __modslonglong
37    0000              	EXTERN __modslonglong_callee
38    0000              	EXTERN __modsuchar
39    0000              	EXTERN __modsuchar_callee
40    0000              	EXTERN __moduchar
41    0000              	EXTERN __moduchar_callee
42    0000              	EXTERN __moduint
43    0000              	EXTERN __moduint_callee
44    0000              	EXTERN __modulong
45    0000              	EXTERN __modulong_callee
46    0000              	EXTERN __modulonglong
47    0000              	EXTERN __modulonglong_callee
48    0000              	EXTERN __moduschar
49    0000              	EXTERN __moduschar_callee
50    0000              	EXTERN __mulint
51    0000              	EXTERN __mulint_callee
52    0000              	EXTERN __mullong
53    0000              	EXTERN __mullong_callee
54    0000              	EXTERN __mullonglong
55    0000              	EXTERN __mullonglong_callee
56    0000              	EXTERN __mulschar
57    0000              	EXTERN __mulschar_callee
58    0000              	EXTERN __mulsuchar
59    0000              	EXTERN __mulsuchar_callee
60    0000              	EXTERN __muluschar
61    0000              	EXTERN __muluschar_callee
62    0000              	EXTERN __rlslonglong
63    0000              	EXTERN __rlslonglong_callee
64    0000              	EXTERN __rlulonglong
65    0000              	EXTERN __rlulonglong_callee
66    0000              	EXTERN __rrslonglong
67    0000              	EXTERN __rrslonglong_callee
68    0000              	EXTERN __rrulonglong
69    0000              	EXTERN __rrulonglong_callee
70    0000              	EXTERN ___sdcc_call_hl
71    0000              	EXTERN ___sdcc_call_iy
72    0000              	EXTERN ___sdcc_enter_ix
73    0000              	EXTERN _banked_call
74    0000              	EXTERN _banked_ret
75    0000              	EXTERN ___fs2schar
76    0000              	EXTERN ___fs2schar_callee
77    0000              	EXTERN ___fs2sint
78    0000              	EXTERN ___fs2sint_callee
79    0000              	EXTERN ___fs2slong
80    0000              	EXTERN ___fs2slong_callee
81    0000              	EXTERN ___fs2slonglong
82    0000              	EXTERN ___fs2slonglong_callee
83    0000              	EXTERN ___fs2uchar
84    0000              	EXTERN ___fs2uchar_callee
85    0000              	EXTERN ___fs2uint
86    0000              	EXTERN ___fs2uint_callee
87    0000              	EXTERN ___fs2ulong
88    0000              	EXTERN ___fs2ulong_callee
89    0000              	EXTERN ___fs2ulonglong
90    0000              	EXTERN ___fs2ulonglong_callee
91    0000              	EXTERN ___fsadd
92    0000              	EXTERN ___fsadd_callee
93    0000              	EXTERN ___fsdiv
94    0000              	EXTERN ___fsdiv_callee
95    0000              	EXTERN ___fseq
96    0000              	EXTERN ___fseq_callee
97    0000              	EXTERN ___fsgt
98    0000              	EXTERN ___fsgt_callee
99    0000              	EXTERN ___fslt
100   0000              	EXTERN ___fslt_callee
101   0000              	EXTERN ___fsmul
102   0000              	EXTERN ___fsmul_callee
103   0000              	EXTERN ___fsneq
104   0000              	EXTERN ___fsneq_callee
105   0000              	EXTERN ___fssub
106   0000              	EXTERN ___fssub_callee
107   0000              	EXTERN ___schar2fs
108   0000              	EXTERN ___schar2fs_callee
109   0000              	EXTERN ___sint2fs
110   0000              	EXTERN ___sint2fs_callee
111   0000              	EXTERN ___slong2fs
112   0000              	EXTERN ___slong2fs_callee
113   0000              	EXTERN ___slonglong2fs
114   0000              	EXTERN ___slonglong2fs_callee
115   0000              	EXTERN ___uchar2fs
116   0000              	EXTERN ___uchar2fs_callee
117   0000              	EXTERN ___uint2fs
118   0000              	EXTERN ___uint2fs_callee
119   0000              	EXTERN ___ulong2fs
120   0000              	EXTERN ___ulong2fs_callee
121   0000              	EXTERN ___ulonglong2fs
122   0000              	EXTERN ___ulonglong2fs_callee
123   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
126   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
127   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
128   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
129   0000              	EXTERN ____sdcc_4_ldi_save_bc
130   0000              	EXTERN ____sdcc_4_push_hlix
131   0000              	EXTERN ____sdcc_4_push_mhl
132   0000              	EXTERN ____sdcc_lib_setmem_hl
133   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
134   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
135   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
136   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
137   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
138   0000              	EXTERN ____sdcc_ll_add_deix_hlix
139   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
140   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
141   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
142   0000              	EXTERN ____sdcc_ll_asr_hlix_a
143   0000              	EXTERN ____sdcc_ll_asr_mbc_a
144   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
145   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
146   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
147   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
148   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
149   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
150   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
151   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
152   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
153   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
155   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
156   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
157   0000              	EXTERN ____sdcc_ll_push_hlix
158   0000              	EXTERN ____sdcc_ll_push_mhl
159   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
160   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
161   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
162   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
163   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
164   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
165   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
166   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
167   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
168   0000              	EXTERN ____sdcc_load_debc_deix
169   0000              	EXTERN ____sdcc_load_dehl_deix
170   0000              	EXTERN ____sdcc_load_debc_mhl
171   0000              	EXTERN ____sdcc_load_hlde_mhl
172   0000              	EXTERN ____sdcc_store_dehl_bcix
173   0000              	EXTERN ____sdcc_store_debc_hlix
174   0000              	EXTERN ____sdcc_store_debc_mhl
175   0000              	EXTERN ____sdcc_cpu_pop_ei
176   0000              	EXTERN ____sdcc_cpu_pop_ei_jp
177   0000              	EXTERN ____sdcc_cpu_push_di
178   0000              	EXTERN ____sdcc_outi
179   0000              	EXTERN ____sdcc_outi_128
180   0000              	EXTERN ____sdcc_outi_256
181   0000              	EXTERN ____sdcc_ldi
182   0000              	EXTERN ____sdcc_ldi_128
183   0000              	EXTERN ____sdcc_ldi_256
184   0000              
185   0000              ;--------------------------------------------------------
186   0000              ; Public variables in this module
187   0000              ;--------------------------------------------------------
188   0000              	GLOBAL _spr_calc_index
189   0000              	GLOBAL _spr_chktime
190   0000              	GLOBAL _spr_move_up
191   0000              	GLOBAL _spr_move_down
192   0000              	GLOBAL _spr_move_horizontal
193   0000              	GLOBAL _spr_move_right
194   0000              	GLOBAL _spr_move_left
195   0000              	GLOBAL _spr_page_right
196   0000              	GLOBAL _spr_page_left
197   0000              	GLOBAL _spr_page_down
198   0000              	GLOBAL _spr_page_up
199   0000              	GLOBAL _spr_clear_scr
200   0000              	GLOBAL _spr_page_map
201   0000              	GLOBAL _spr_redraw
202   0000              	GLOBAL _spr_destroy
203   0000              	GLOBAL _spr_tile
204   0000              	GLOBAL _spr_tile_dir
205   0000              	GLOBAL _spr_brick_anim
206   0000              	GLOBAL _spr_draw_index
207   0000              	GLOBAL _spr_calc_hor
208   0000              	GLOBAL _spr_back_repaint
209   0000              	GLOBAL _spr_tile_paint
210   0000              	GLOBAL _spr_init_anim_bullets
211   0000              	GLOBAL _spr_add_anim
212   0000              	GLOBAL _spr_play_anim
213   0000              	GLOBAL _spr_play_bullets
214   0000              	GLOBAL _spr_explode_bullet
215   0000              	GLOBAL _spr_turn_horizontal
216   0000              	GLOBAL _spr_btile_paint_back
217   0000              ;--------------------------------------------------------
218   0000              ; Externals used
219   0000              ;--------------------------------------------------------
220   0000              	GLOBAL _ulltoa_callee
221   0000              	GLOBAL _ulltoa
222   0000              	GLOBAL _strtoull_callee
223   0000              	GLOBAL _strtoull
224   0000              	GLOBAL _strtoll_callee
225   0000              	GLOBAL _strtoll
226   0000              	GLOBAL _lltoa_callee
227   0000              	GLOBAL _lltoa
228   0000              	GLOBAL _llabs_callee
229   0000              	GLOBAL _llabs
230   0000              	GLOBAL __lldivu__callee
231   0000              	GLOBAL __lldivu_
232   0000              	GLOBAL __lldiv__callee
233   0000              	GLOBAL __lldiv_
234   0000              	GLOBAL _atoll_callee
235   0000              	GLOBAL _atoll
236   0000              	GLOBAL _realloc_unlocked_callee
237   0000              	GLOBAL _realloc_unlocked
238   0000              	GLOBAL _malloc_unlocked_fastcall
239   0000              	GLOBAL _malloc_unlocked
240   0000              	GLOBAL _free_unlocked_fastcall
241   0000              	GLOBAL _free_unlocked
242   0000              	GLOBAL _calloc_unlocked_callee
243   0000              	GLOBAL _calloc_unlocked
244   0000              	GLOBAL _aligned_alloc_unlocked_callee
245   0000              	GLOBAL _aligned_alloc_unlocked
246   0000              	GLOBAL _realloc_callee
247   0000              	GLOBAL _realloc
248   0000              	GLOBAL _malloc_fastcall
249   0000              	GLOBAL _malloc
250   0000              	GLOBAL _free_fastcall
251   0000              	GLOBAL _free
252   0000              	GLOBAL _calloc_callee
253   0000              	GLOBAL _calloc
254   0000              	GLOBAL _aligned_alloc_callee
255   0000              	GLOBAL _aligned_alloc
256   0000              	GLOBAL _utoa_callee
257   0000              	GLOBAL _utoa
258   0000              	GLOBAL _ultoa_callee
259   0000              	GLOBAL _ultoa
260   0000              	GLOBAL _system_fastcall
261   0000              	GLOBAL _system
262   0000              	GLOBAL _strtoul_callee
263   0000              	GLOBAL _strtoul
264   0000              	GLOBAL _strtol_callee
265   0000              	GLOBAL _strtol
266   0000              	GLOBAL _strtof_callee
267   0000              	GLOBAL _strtof
268   0000              	GLOBAL _strtod_callee
269   0000              	GLOBAL _strtod
270   0000              	GLOBAL _srand_fastcall
271   0000              	GLOBAL _srand
272   0000              	GLOBAL _rand
273   0000              	GLOBAL _quick_exit_fastcall
274   0000              	GLOBAL _quick_exit
275   0000              	GLOBAL _qsort_callee
276   0000              	GLOBAL _qsort
277   0000              	GLOBAL _ltoa_callee
278   0000              	GLOBAL _ltoa
279   0000              	GLOBAL _labs_fastcall
280   0000              	GLOBAL _labs
281   0000              	GLOBAL _itoa_callee
282   0000              	GLOBAL _itoa
283   0000              	GLOBAL _ftoh_callee
284   0000              	GLOBAL _ftoh
285   0000              	GLOBAL _ftog_callee
286   0000              	GLOBAL _ftog
287   0000              	GLOBAL _ftoe_callee
288   0000              	GLOBAL _ftoe
289   0000              	GLOBAL _ftoa_callee
290   0000              	GLOBAL _ftoa
291   0000              	GLOBAL _exit_fastcall
292   0000              	GLOBAL _exit
293   0000              	GLOBAL _dtoh_callee
294   0000              	GLOBAL _dtoh
295   0000              	GLOBAL _dtog_callee
296   0000              	GLOBAL _dtog
297   0000              	GLOBAL _dtoe_callee
298   0000              	GLOBAL _dtoe
299   0000              	GLOBAL _dtoa_callee
300   0000              	GLOBAL _dtoa
301   0000              	GLOBAL _bsearch_callee
302   0000              	GLOBAL _bsearch
303   0000              	GLOBAL _atol_fastcall
304   0000              	GLOBAL _atol
305   0000              	GLOBAL _atoi_fastcall
306   0000              	GLOBAL _atoi
307   0000              	GLOBAL _atof_fastcall
308   0000              	GLOBAL _atof
309   0000              	GLOBAL _atexit_fastcall
310   0000              	GLOBAL _atexit
311   0000              	GLOBAL _at_quick_exit_fastcall
312   0000              	GLOBAL _at_quick_exit
313   0000              	GLOBAL _abs_fastcall
314   0000              	GLOBAL _abs
315   0000              	GLOBAL _abort
316   0000              	GLOBAL __strtou__callee
317   0000              	GLOBAL __strtou_
318   0000              	GLOBAL __strtoi__callee
319   0000              	GLOBAL __strtoi_
320   0000              	GLOBAL __random_uniform_xor_8__fastcall
321   0000              	GLOBAL __random_uniform_xor_8_
322   0000              	GLOBAL __random_uniform_xor_32__fastcall
323   0000              	GLOBAL __random_uniform_xor_32_
324   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
325   0000              	GLOBAL __random_uniform_cmwc_8_
326   0000              	GLOBAL __shellsort__callee
327   0000              	GLOBAL __shellsort_
328   0000              	GLOBAL __quicksort__callee
329   0000              	GLOBAL __quicksort_
330   0000              	GLOBAL __insertion_sort__callee
331   0000              	GLOBAL __insertion_sort_
332   0000              	GLOBAL __ldivu__callee
333   0000              	GLOBAL __ldivu_
334   0000              	GLOBAL __ldiv__callee
335   0000              	GLOBAL __ldiv_
336   0000              	GLOBAL __divu__callee
337   0000              	GLOBAL __divu_
338   0000              	GLOBAL __div__callee
339   0000              	GLOBAL __div_
340   0000              	GLOBAL _NIRVANAP_drawTW_raw_callee
341   0000              	GLOBAL _NIRVANAP_drawTW_raw
342   0000              	GLOBAL _NIRVANAP_drawTW_callee
343   0000              	GLOBAL _NIRVANAP_drawTW
344   0000              	GLOBAL _NIRVANAP_drawW_raw_callee
345   0000              	GLOBAL _NIRVANAP_drawW_raw
346   0000              	GLOBAL _NIRVANAP_drawW_callee
347   0000              	GLOBAL _NIRVANAP_drawW
348   0000              	GLOBAL _NIRVANAP_spriteT_callee
349   0000              	GLOBAL _NIRVANAP_spriteT
350   0000              	GLOBAL _NIRVANAP_fillC_callee
351   0000              	GLOBAL _NIRVANAP_fillC
352   0000              	GLOBAL _NIRVANAP_readC_callee
353   0000              	GLOBAL _NIRVANAP_readC
354   0000              	GLOBAL _NIRVANAP_paintC_callee
355   0000              	GLOBAL _NIRVANAP_paintC
356   0000              	GLOBAL _NIRVANAP_printC_callee
357   0000              	GLOBAL _NIRVANAP_printC
358   0000              	GLOBAL _NIRVANAP_fillT_raw_callee
359   0000              	GLOBAL _NIRVANAP_fillT_raw
360   0000              	GLOBAL _NIRVANAP_fillT_callee
361   0000              	GLOBAL _NIRVANAP_fillT
362   0000              	GLOBAL _NIRVANAP_drawT_raw_callee
363   0000              	GLOBAL _NIRVANAP_drawT_raw
364   0000              	GLOBAL _NIRVANAP_drawT_callee
365   0000              	GLOBAL _NIRVANAP_drawT
366   0000              	GLOBAL _NIRVANAP_stop
367   0000              	GLOBAL _NIRVANAP_start
368   0000              	GLOBAL _debug3
369   0000              	GLOBAL _debug2
370   0000              	GLOBAL _debug
371   0000              	GLOBAL _zx_print_str
372   0000              	GLOBAL _zx_print_int
373   0000              	GLOBAL _zx_print_chr
374   0000              	GLOBAL _zx_print_bonus_time
375   0000              	GLOBAL _zx_isr
376   0000              	GLOBAL _z80_otdr_callee
377   0000              	GLOBAL _z80_otdr
378   0000              	GLOBAL _z80_otir_callee
379   0000              	GLOBAL _z80_otir
380   0000              	GLOBAL _z80_outp_callee
381   0000              	GLOBAL _z80_outp
382   0000              	GLOBAL _z80_indr_callee
383   0000              	GLOBAL _z80_indr
384   0000              	GLOBAL _z80_inir_callee
385   0000              	GLOBAL _z80_inir
386   0000              	GLOBAL _z80_inp_fastcall
387   0000              	GLOBAL _z80_inp
388   0000              	GLOBAL _z80_set_int_state_fastcall
389   0000              	GLOBAL _z80_set_int_state
390   0000              	GLOBAL _z80_get_int_state
391   0000              	GLOBAL _z80_delay_tstate_fastcall
392   0000              	GLOBAL _z80_delay_tstate
393   0000              	GLOBAL _z80_delay_ms_fastcall
394   0000              	GLOBAL _z80_delay_ms
395   0000              	GLOBAL _im2_remove_generic_callback_callee
396   0000              	GLOBAL _im2_remove_generic_callback
397   0000              	GLOBAL _im2_prepend_generic_callback_callee
398   0000              	GLOBAL _im2_prepend_generic_callback
399   0000              	GLOBAL _im2_append_generic_callback_callee
400   0000              	GLOBAL _im2_append_generic_callback
401   0000              	GLOBAL _im2_create_generic_isr_8080_callee
402   0000              	GLOBAL _im2_create_generic_isr_8080
403   0000              	GLOBAL _im2_create_generic_isr_callee
404   0000              	GLOBAL _im2_create_generic_isr
405   0000              	GLOBAL _im2_install_isr_callee
406   0000              	GLOBAL _im2_install_isr
407   0000              	GLOBAL _im2_init_fastcall
408   0000              	GLOBAL _im2_init
409   0000              	GLOBAL _intrinsic_swap_word_32_fastcall
410   0000              	GLOBAL _intrinsic_swap_word_32
411   0000              	GLOBAL _intrinsic_swap_endian_32_fastcall
412   0000              	GLOBAL _intrinsic_swap_endian_32
413   0000              	GLOBAL _intrinsic_swap_endian_16_fastcall
414   0000              	GLOBAL _intrinsic_swap_endian_16
415   0000              	GLOBAL _intrinsic_return_de
416   0000              	GLOBAL _intrinsic_return_bc
417   0000              	GLOBAL _intrinsic_exx
418   0000              	GLOBAL _intrinsic_ex_de_hl
419   0000              	GLOBAL _intrinsic_nop
420   0000              	GLOBAL _intrinsic_im_2
421   0000              	GLOBAL _intrinsic_im_1
422   0000              	GLOBAL _intrinsic_im_0
423   0000              	GLOBAL _intrinsic_retn
424   0000              	GLOBAL _intrinsic_reti
425   0000              	GLOBAL _intrinsic_halt
426   0000              	GLOBAL _intrinsic_ei
427   0000              	GLOBAL _intrinsic_di
428   0000              	GLOBAL _intrinsic_stub
429   0000              	GLOBAL _intrinsic_outi
430   0000              	GLOBAL _intrinsic_ldi
431   0000              	GLOBAL _zx_pattern_fill_callee
432   0000              	GLOBAL _zx_pattern_fill
433   0000              	GLOBAL _zx_saddrpup_fastcall
434   0000              	GLOBAL _zx_saddrpup
435   0000              	GLOBAL _zx_saddrpright_callee
436   0000              	GLOBAL _zx_saddrpright
437   0000              	GLOBAL _zx_saddrpleft_callee
438   0000              	GLOBAL _zx_saddrpleft
439   0000              	GLOBAL _zx_saddrpdown_fastcall
440   0000              	GLOBAL _zx_saddrpdown
441   0000              	GLOBAL _zx_saddrcup_fastcall
442   0000              	GLOBAL _zx_saddrcup
443   0000              	GLOBAL _zx_saddrcright_fastcall
444   0000              	GLOBAL _zx_saddrcright
445   0000              	GLOBAL _zx_saddrcleft_fastcall
446   0000              	GLOBAL _zx_saddrcleft
447   0000              	GLOBAL _zx_saddrcdown_fastcall
448   0000              	GLOBAL _zx_saddrcdown
449   0000              	GLOBAL _zx_saddr2py_fastcall
450   0000              	GLOBAL _zx_saddr2py
451   0000              	GLOBAL _zx_saddr2px_fastcall
452   0000              	GLOBAL _zx_saddr2px
453   0000              	GLOBAL _zx_saddr2cy_fastcall
454   0000              	GLOBAL _zx_saddr2cy
455   0000              	GLOBAL _zx_saddr2cx_fastcall
456   0000              	GLOBAL _zx_saddr2cx
457   0000              	GLOBAL _zx_saddr2aaddr_fastcall
458   0000              	GLOBAL _zx_saddr2aaddr
459   0000              	GLOBAL _zx_py2saddr_fastcall
460   0000              	GLOBAL _zx_py2saddr
461   0000              	GLOBAL _zx_py2aaddr_fastcall
462   0000              	GLOBAL _zx_py2aaddr
463   0000              	GLOBAL _zx_pxy2saddr_callee
464   0000              	GLOBAL _zx_pxy2saddr
465   0000              	GLOBAL _zx_pxy2aaddr_callee
466   0000              	GLOBAL _zx_pxy2aaddr
467   0000              	GLOBAL _zx_px2bitmask_fastcall
468   0000              	GLOBAL _zx_px2bitmask
469   0000              	GLOBAL _zx_cy2saddr_fastcall
470   0000              	GLOBAL _zx_cy2saddr
471   0000              	GLOBAL _zx_cy2aaddr_fastcall
472   0000              	GLOBAL _zx_cy2aaddr
473   0000              	GLOBAL _zx_cxy2saddr_callee
474   0000              	GLOBAL _zx_cxy2saddr
475   0000              	GLOBAL _zx_cxy2aaddr_callee
476   0000              	GLOBAL _zx_cxy2aaddr
477   0000              	GLOBAL _zx_bitmask2px_fastcall
478   0000              	GLOBAL _zx_bitmask2px
479   0000              	GLOBAL _zx_aaddrcup_fastcall
480   0000              	GLOBAL _zx_aaddrcup
481   0000              	GLOBAL _zx_aaddrcright_fastcall
482   0000              	GLOBAL _zx_aaddrcright
483   0000              	GLOBAL _zx_aaddrcleft_fastcall
484   0000              	GLOBAL _zx_aaddrcleft
485   0000              	GLOBAL _zx_aaddrcdown_fastcall
486   0000              	GLOBAL _zx_aaddrcdown
487   0000              	GLOBAL _zx_aaddr2saddr_fastcall
488   0000              	GLOBAL _zx_aaddr2saddr
489   0000              	GLOBAL _zx_aaddr2py_fastcall
490   0000              	GLOBAL _zx_aaddr2py
491   0000              	GLOBAL _zx_aaddr2px_fastcall
492   0000              	GLOBAL _zx_aaddr2px
493   0000              	GLOBAL _zx_aaddr2cy_fastcall
494   0000              	GLOBAL _zx_aaddr2cy
495   0000              	GLOBAL _zx_aaddr2cx_fastcall
496   0000              	GLOBAL _zx_aaddr2cx
497   0000              	GLOBAL _zx_visit_wc_pix_callee
498   0000              	GLOBAL _zx_visit_wc_pix
499   0000              	GLOBAL _zx_visit_wc_attr_callee
500   0000              	GLOBAL _zx_visit_wc_attr
501   0000              	GLOBAL _zx_scroll_wc_up_pix_callee
502   0000              	GLOBAL _zx_scroll_wc_up_pix
503   0000              	GLOBAL _zx_scroll_wc_up_attr_callee
504   0000              	GLOBAL _zx_scroll_wc_up_attr
505   0000              	GLOBAL _zx_scroll_wc_up_callee
506   0000              	GLOBAL _zx_scroll_wc_up
507   0000              	GLOBAL _zx_scroll_up_pix_callee
508   0000              	GLOBAL _zx_scroll_up_pix
509   0000              	GLOBAL _zx_scroll_up_attr_callee
510   0000              	GLOBAL _zx_scroll_up_attr
511   0000              	GLOBAL _zx_scroll_up_callee
512   0000              	GLOBAL _zx_scroll_up
513   0000              	GLOBAL _zx_cls_wc_pix_callee
514   0000              	GLOBAL _zx_cls_wc_pix
515   0000              	GLOBAL _zx_cls_wc_attr_callee
516   0000              	GLOBAL _zx_cls_wc_attr
517   0000              	GLOBAL _zx_cls_wc_callee
518   0000              	GLOBAL _zx_cls_wc
519   0000              	GLOBAL _zx_cls_pix_fastcall
520   0000              	GLOBAL _zx_cls_pix
521   0000              	GLOBAL _zx_cls_attr_fastcall
522   0000              	GLOBAL _zx_cls_attr
523   0000              	GLOBAL _zx_cls_fastcall
524   0000              	GLOBAL _zx_cls
525   0000              	GLOBAL _zx_border_fastcall
526   0000              	GLOBAL _zx_border
527   0000              	GLOBAL _player_fix_walk_lin
528   0000              	GLOBAL _player_gasta_brick
529   0000              	GLOBAL _player_lost_life
530   0000              	GLOBAL _player_hit
531   0000              	GLOBAL _player_open_door
532   0000              	GLOBAL _player_move_jump
533   0000              	GLOBAL _player_fire
534   0000              	GLOBAL _player_check_stairs_vertical
535   0000              	GLOBAL _player_check_stairs
536   0000              	GLOBAL _player_tile
537   0000              	GLOBAL _player_pick_item
538   0000              	GLOBAL _player_check_floor
539   0000              	GLOBAL _player_hit_platform_clear
540   0000              	GLOBAL _player_score_add
541   0000              	GLOBAL _player_hit_platform
542   0000              	GLOBAL _player_move_input
543   0000              	GLOBAL _player_turn
544   0000              	GLOBAL _player_move
545   0000              	GLOBAL _player_check_input
546   0000              	GLOBAL _player_pick_mushroom
547   0000              	GLOBAL _player_collision
548   0000              	GLOBAL _player_init
549   0000              	GLOBAL _menu_define_key
550   0000              	GLOBAL _menu_redefine
551   0000              	GLOBAL _menu_main_print
552   0000              	GLOBAL _menu_main
553   0000              	GLOBAL _game_match_back
554   0000              	GLOBAL _game_attribs
555   0000              	GLOBAL _game_boss_clear
556   0000              	GLOBAL _game_obj_clear
557   0000              	GLOBAL _game_obj_chk
558   0000              	GLOBAL _game_obj_set
559   0000              	GLOBAL _game_shoot_fire_boss
560   0000              	GLOBAL _game_shoot_fire
561   0000              	GLOBAL _game_add_enemy
562   0000              	GLOBAL _game_print_header
563   0000              	GLOBAL _game_check_time
564   0000              	GLOBAL _game_rotate_attrib_osd
565   0000              	GLOBAL _game_rotate_attrib
566   0000              	GLOBAL _game_colour_message
567   0000              	GLOBAL _game_paint_attrib_lin_osd
568   0000              	GLOBAL _game_paint_attrib_lin_h
569   0000              	GLOBAL _game_paint_attrib_lin
570   0000              	GLOBAL _game_print_score
571   0000              	GLOBAL _game_check_cell
572   0000              	GLOBAL _game_check_map
573   0000              	GLOBAL _game_loop
574   0000              	GLOBAL _game_round_init
575   0000              	GLOBAL _game_start_timer
576   0000              	GLOBAL _game_update_stats
577   0000              	GLOBAL _game_print_footer
578   0000              	GLOBAL _game_fill_row
579   0000              	GLOBAL _game_fps
580   0000              	GLOBAL _game_respawn
581   0000              	GLOBAL _game_draw_screen
582   0000              	GLOBAL _boss_turn
583   0000              	GLOBAL _enemy_avoid_dead
584   0000              	GLOBAL _enemy_avoid_fall
585   0000              	GLOBAL _enemy_respawn
586   0000              	GLOBAL _enemy_init
587   0000              	GLOBAL _enemy_move
588   0000              	GLOBAL _enemy_turn
589   0000              	GLOBAL _enemy_static
590   0000              	GLOBAL _enemy_walk
591   0000              	GLOBAL _enemy_horizontal
592   0000              	GLOBAL _enemy_vertical
593   0000              	GLOBAL _ay_fx_play
594   0000              	GLOBAL _ay_midi_play
595   0000              	GLOBAL _ay_is_playing
596   0000              	GLOBAL _ay_reset
597   0000              	GLOBAL _test_func
598   0000              	GLOBAL _test_proc
599   0000              	GLOBAL _in_mouse_kempston_wheel_delta
600   0000              	GLOBAL _in_mouse_kempston_wheel
601   0000              	GLOBAL _in_mouse_kempston_callee
602   0000              	GLOBAL _in_mouse_kempston
603   0000              	GLOBAL _in_mouse_kempston_setpos_callee
604   0000              	GLOBAL _in_mouse_kempston_setpos
605   0000              	GLOBAL _in_mouse_kempston_reset
606   0000              	GLOBAL _in_mouse_kempston_init
607   0000              	GLOBAL _in_mouse_amx_wheel_delta
608   0000              	GLOBAL _in_mouse_amx_wheel
609   0000              	GLOBAL _in_mouse_amx_callee
610   0000              	GLOBAL _in_mouse_amx
611   0000              	GLOBAL _in_mouse_amx_setpos_callee
612   0000              	GLOBAL _in_mouse_amx_setpos
613   0000              	GLOBAL _in_mouse_amx_reset
614   0000              	GLOBAL _in_mouse_amx_init_callee
615   0000              	GLOBAL _in_mouse_amx_init
616   0000              	GLOBAL _in_stick_sinclair2
617   0000              	GLOBAL _in_stick_sinclair1
618   0000              	GLOBAL _in_stick_kempston
619   0000              	GLOBAL _in_stick_fuller
620   0000              	GLOBAL _in_stick_cursor
621   0000              	GLOBAL _in_stick_keyboard_fastcall
622   0000              	GLOBAL _in_stick_keyboard
623   0000              	GLOBAL _in_wait_nokey
624   0000              	GLOBAL _in_wait_key
625   0000              	GLOBAL _in_test_key
626   0000              	GLOBAL _in_pause_fastcall
627   0000              	GLOBAL _in_pause
628   0000              	GLOBAL _in_key_scancode_fastcall
629   0000              	GLOBAL _in_key_scancode
630   0000              	GLOBAL _in_key_pressed_fastcall
631   0000              	GLOBAL _in_key_pressed
632   0000              	GLOBAL _in_inkey
633   0000              	GLOBAL _NIRVANAP_CHAR_TABLE
634   0000              	GLOBAL _NIRVANAP_WIDE_IMAGES
635   0000              	GLOBAL _NIRVANAP_TILE_IMAGES
636   0000              	GLOBAL _NIRVANAP_HOLE
637   0000              	GLOBAL _NIRVANAP_ISR_HOOK
638   0000              	GLOBAL _scan_map
639   0000              	GLOBAL _key_map
640   0000              	GLOBAL _player_lvl_table
641   0000              	GLOBAL _map_paper_last
642   0000              	GLOBAL _map_paper_clr
643   0000              	GLOBAL _map_paper
644   0000              	GLOBAL _draw_count
645   0000              	GLOBAL _g_player_hit_right
646   0000              	GLOBAL _g_player_hit_left
647   0000              	GLOBAL _bullet_count
648   0000              	GLOBAL _spr_hack
649   0000              	GLOBAL _boss_stat
650   0000              	GLOBAL _boss_time_fire
651   0000              	GLOBAL _boss_time
652   0000              	GLOBAL _boss_tile
653   0000              	GLOBAL _boss_inc
654   0000              	GLOBAL _boss_col
655   0000              	GLOBAL _boss_lin
656   0000              	GLOBAL _bullet_vel
657   0000              	GLOBAL _bullet_frames
658   0000              	GLOBAL _bullet_colint
659   0000              	GLOBAL _bullet_dir
660   0000              	GLOBAL _bullet_tile
661   0000              	GLOBAL _bullet_col
662   0000              	GLOBAL _bullet_lin
663   0000              	GLOBAL _bullet_col0
664   0000              	GLOBAL _bullet_lin0
665   0000              	GLOBAL _bullet_max
666   0000              	GLOBAL _bullet_class
667   0000              	GLOBAL _mush_class
668   0000              	GLOBAL _mush_index
669   0000              	GLOBAL _anim_count
670   0000              	GLOBAL _anim_respanwn
671   0000              	GLOBAL _anim_loop
672   0000              	GLOBAL _anim_end
673   0000              	GLOBAL _anim_int
674   0000              	GLOBAL _anim_tile
675   0000              	GLOBAL _anim_col
676   0000              	GLOBAL _anim_lin
677   0000              	GLOBAL _map_heigth
678   0000              	GLOBAL _map_width
679   0000              	GLOBAL _scr_curr
680   0000              	GLOBAL _scr_obj1
681   0000              	GLOBAL _scr_obj0
682   0000              	GLOBAL _scr_map
683   0000              	GLOBAL _sprite_speed_alt
684   0000              	GLOBAL _spr_map_tile
685   0000              	GLOBAL _sprite_frames
686   0000              	GLOBAL _sprite_speed
687   0000              	GLOBAL _screen_ink
688   0000              	GLOBAL _screen_paper
689   0000              	GLOBAL _player_onstair
690   0000              	GLOBAL _game_start_scr
691   0000              	GLOBAL _game_respawn_tile
692   0000              	GLOBAL _game_respawn_index
693   0000              	GLOBAL _game_respawn_time
694   0000              	GLOBAL _game_score_top
695   0000              	GLOBAL _player_coins
696   0000              	GLOBAL _player_lives
697   0000              	GLOBAL _game_over
698   0000              	GLOBAL _game_sound
699   0000              	GLOBAL _game_inmune
700   0000              	GLOBAL _game_god_mode
701   0000              	GLOBAL _sprite_curr_index
702   0000              	GLOBAL _spr_count
703   0000              	GLOBAL _bullet_time
704   0000              	GLOBAL _anim_time
705   0000              	GLOBAL _frame_time
706   0000              	GLOBAL _curr_time
707   0000              	GLOBAL _s_state
708   0000              	GLOBAL _attrib_osd
709   0000              	GLOBAL _attrib_hl
710   0000              	GLOBAL _attrib
711   0000              	GLOBAL _zx_val_asm
712   0000              	GLOBAL _enemies
713   0000              	GLOBAL _tmp_ui
714   0000              	GLOBAL _tmp_sc
715   0000              	GLOBAL _tmp_uc
716   0000              	GLOBAL _tmp1
717   0000              	GLOBAL _tmp0
718   0000              	GLOBAL _tmp
719   0000              	GLOBAL _index1
720   0000              	GLOBAL _index0
721   0000              	GLOBAL _loop_count
722   0000              	GLOBAL _s_col1
723   0000              	GLOBAL _s_col0
724   0000              	GLOBAL _s_lin1
725   0000              	GLOBAL _s_lin0
726   0000              	GLOBAL _s_tile1
727   0000              	GLOBAL _s_tile0
728   0000              	GLOBAL _player_brick_time
729   0000              	GLOBAL _player_hit_count
730   0000              	GLOBAL _sprite_horizontal_check
731   0000              	GLOBAL _sprite_on_air
732   0000              	GLOBAL _sprite
733   0000              	GLOBAL _fps
734   0000              	GLOBAL _game_2buttons
735   0000              	GLOBAL _game_respawn_curr_time
736   0000              	GLOBAL _game_worldup
737   0000              	GLOBAL _game_mush_count
738   0000              	GLOBAL _game_boss_fix
739   0000              	GLOBAL _game_boss_hit
740   0000              	GLOBAL _game_boss_alive
741   0000              	GLOBAL _game_boss
742   0000              	GLOBAL _game_world
743   0000              	GLOBAL _game_gravity
744   0000              	GLOBAL _player_anim_stair
745   0000              	GLOBAL _player_hit_time
746   0000              	GLOBAL _player_lin_scr
747   0000              	GLOBAL _player_col_scr
748   0000              	GLOBAL _player_lvl
749   0000              	GLOBAL _player_int
750   0000              	GLOBAL _player_str
751   0000              	GLOBAL _player_max_vita
752   0000              	GLOBAL _player_max_mana
753   0000              	GLOBAL _player_vita
754   0000              	GLOBAL _player_mana
755   0000              	GLOBAL _player_keys
756   0000              	GLOBAL _player_vel_inc
757   0000              	GLOBAL _player_vel_y1
758   0000              	GLOBAL _player_vel_y0
759   0000              	GLOBAL _player_vel_y
760   0000              	GLOBAL _player_vel_x
761   0000              	GLOBAL _player_joy
762   0000              	GLOBAL _player_score
763   0000              	GLOBAL _last_time
764   0000              	GLOBAL _player_slide
765   0000              	GLOBAL _spr_timer
766   0000              	GLOBAL _jump_lin
767   0000              	GLOBAL _player_hit_col
768   0000              	GLOBAL _player_hit_lin
769   0000              	GLOBAL _colint
770   0000              	GLOBAL _col
771   0000              	GLOBAL _lin
772   0000              	GLOBAL _tile
773   0000              	GLOBAL _state_a
774   0000              	GLOBAL _state
775   0000              	GLOBAL _class
776   0000              	GLOBAL _tbuffer
777   0000              	GLOBAL _dirs_alt
778   0000              	GLOBAL _dirs
779   0000              	GLOBAL _k2
780   0000              	GLOBAL _k1
781   0000              	GLOBAL _joyfunc2
782   0000              	GLOBAL _joyfunc1
783   0000              	GLOBAL _btiles
784   0000              	GLOBAL _spec128
785   0000              	GLOBAL _GLOBAL_ZX_PORT_7FFD
786   0000              	GLOBAL _GLOBAL_ZX_PORT_1FFD
787   0000              	GLOBAL _GLOBAL_ZX_PORT_FE
788   0000              	GLOBAL _ay_effect_20
789   0000              	GLOBAL _ay_effect_19
790   0000              	GLOBAL _ay_effect_18
791   0000              	GLOBAL _ay_effect_17
792   0000              	GLOBAL _ay_effect_16
793   0000              	GLOBAL _ay_effect_15
794   0000              	GLOBAL _ay_effect_14
795   0000              	GLOBAL _ay_effect_13
796   0000              	GLOBAL _ay_effect_12
797   0000              	GLOBAL _ay_effect_11
798   0000              	GLOBAL _ay_effect_10
799   0000              	GLOBAL _ay_effect_09
800   0000              	GLOBAL _ay_effect_08
801   0000              	GLOBAL _ay_effect_07
802   0000              	GLOBAL _ay_effect_06
803   0000              	GLOBAL _ay_effect_05
804   0000              	GLOBAL _ay_effect_04
805   0000              	GLOBAL _ay_effect_03
806   0000              	GLOBAL _ay_effect_02
807   0000              	GLOBAL _ay_effect_01
808   0000              	GLOBAL _pb_midi_phase_1
809   0000              	GLOBAL _pb_midi_title
810   0000              	GLOBAL _control_method
811   0000              	GLOBAL _world1_h
812   0000              	GLOBAL _world1_w
813   0000              	GLOBAL _world1
814   0000              	GLOBAL _paper1
815   0000              	GLOBAL _lenght1
816   0000              	GLOBAL _start_scr1
817   0000              	GLOBAL _world0_h
818   0000              	GLOBAL _world0_w
819   0000              	GLOBAL _world0
820   0000              	GLOBAL _paper0
821   0000              	GLOBAL _lenght0
822   0000              	GLOBAL _start_scr0
823   0000              ;--------------------------------------------------------
824   0000              ; special function registers
825   0000              ;--------------------------------------------------------
826   0000              defc _IO_FE	=	0x00fe
827   0000              defc _IO_1FFD	=	0x1ffd
828   0000              defc _IO_7FFD	=	0x7ffd
829   0000              ;--------------------------------------------------------
830   0000              ; ram data
831   0000              ;--------------------------------------------------------
832   0000              	SECTION bss_compiler
833   0000              ;--------------------------------------------------------
834   0000              ; ram data
835   0000              ;--------------------------------------------------------
836   0000              
837   0000              IF 0
838   0000              
839   0000              ; .area _INITIALIZED removed by z88dk
840   0000              
841   0000              
842   0000              ENDIF
843   0000              
844   0000              ;--------------------------------------------------------
845   0000              ; absolute external ram data
846   0000              ;--------------------------------------------------------
847   0000              	SECTION IGNORE
848   0000              ;--------------------------------------------------------
849   0000              ; global & static initialisations
850   0000              ;--------------------------------------------------------
851   0000              	SECTION code_crt_init
852   0000              ;--------------------------------------------------------
853   0000              ; Home
854   0000              ;--------------------------------------------------------
855   0000              	SECTION IGNORE
856   0000              ;--------------------------------------------------------
857   0000              ; code
858   0000              ;--------------------------------------------------------
859   0000              	SECTION code_compiler
860   0000              ;	---------------------------------
861   0000              ; Function spr_calc_index
862   0000              ; ---------------------------------
863   0000              _spr_calc_index:
864   0000  CD 00 00    	call	___sdcc_enter_ix
865   0003  DD 4E 05    	ld	c,(ix+5)
866   0006  CB 39       	srl	c
867   0008  06 00       	ld	b,0x00
868   000A  DD 7E 04    	ld	a,(ix+4)
869   000D  07          	rlca
870   000E  07          	rlca
871   000F  07          	rlca
872   0010  07          	rlca
873   0011  E6 0F       	and	a,0x0f
874   0013  6F          	ld	l, a
875   0014  26 00       	ld	h,0x00
876   0016  29          	add	hl, hl
877   0017  29          	add	hl, hl
878   0018  29          	add	hl, hl
879   0019  29          	add	hl, hl
880   001A  09          	add	hl, bc
881   001B  DD E1       	pop	ix
882   001D  C9          	ret
883   001E              	SECTION code_compiler
884   001E              ;	---------------------------------
885   001E              ; Function spr_chktime
886   001E              ; ---------------------------------
887   001E              _spr_chktime:
888   001E  CD 00 00    	call	___sdcc_enter_ix
889   0021  F5          	push	af
890   0022  DD 75 FE    	ld	(ix-2),l
891   0025  DD 74 FF    	ld	(ix-1),h
892   0028  E1          	pop	hl
893   0029  01 00 00    	ld	bc,_sprite_speed_alt+0
894   002C  5E          	ld	e,(hl)
895   002D  E5          	push	hl
896   002E  6B          	ld	l,e
897   002F  26 00       	ld	h,0x00
898   0031  09          	add	hl, bc
899   0032  7E          	ld	a,(hl)
900   0033  57          	ld	d,a
901   0034  B7          	or	a, a
902   0035  20 13       	jr	NZ,l_spr_chktime_00102
903   0037  01 00 00    	ld	bc,_sprite_speed+0
904   003A  16 00       	ld	d,0x00
905   003C  21 00 00    	ld	hl,_class
906   003F  19          	add	hl, de
907   0040  6E          	ld	l, (hl)
908   0041  26 00       	ld	h,0x00
909   0043  09          	add	hl, bc
910   0044  7E          	ld	a, (hl)
911   0045  32 00 00    	ld	(_tmp),a
912   0048  18 04       	jr	l_spr_chktime_00103
913   004A              l_spr_chktime_00102:
914   004A  21 00 00    	ld	hl,_tmp
915   004D  72          	ld	(hl), d
916   004E              l_spr_chktime_00103:
917   004E  3A 00 00    	ld	a,(_tmp)
918   0051  4F          	ld	c,a
919   0052  06 00       	ld	b,0x00
920   0054  60          	ld	h,b
921   0055  6B          	ld	l, e
922   0056  29          	add	hl, hl
923   0057  11 00 00    	ld	de,_last_time
924   005A  19          	add	hl, de
925   005B  5E          	ld	e, (hl)
926   005C  23          	inc	hl
927   005D  56          	ld	d, (hl)
928   005E  C5          	push	bc
929   005F  D5          	push	de
930   0060  CD 00 00    	call	_game_check_time
931   0063  F1          	pop	af
932   0064  F1          	pop	af
933   0065  7D          	ld	a, l
934   0066  B7          	or	a, a
935   0067  28 15       	jr	Z,l_spr_chktime_00105
936   0069  E1          	pop	hl
937   006A  E5          	push	hl
938   006B  6E          	ld	l, (hl)
939   006C  26 00       	ld	h,0x00
940   006E  29          	add	hl, hl
941   006F  01 00 00    	ld	bc,_last_time
942   0072  09          	add	hl,bc
943   0073  ED 5B 00 00 	ld	de,(_curr_time)
944   0077  73          	ld	(hl),e
945   0078  23          	inc	hl
946   0079  72          	ld	(hl),d
947   007A  2E 01       	ld	l,0x01
948   007C  18 02       	jr	l_spr_chktime_00106
949   007E              l_spr_chktime_00105:
950   007E  2E 00       	ld	l,0x00
951   0080              l_spr_chktime_00106:
952   0080  F1          	pop	af
953   0081  DD E1       	pop	ix
954   0083  C9          	ret
955   0084              	SECTION code_compiler
956   0084              ;	---------------------------------
957   0084              ; Function spr_move_up
958   0084              ; ---------------------------------
959   0084              _spr_move_up:
960   0084  2A 00 00    	ld	hl,(_sprite)
961   0087  26 00       	ld	h,0x00
962   0089  01 00 00    	ld	bc,_lin
963   008C  09          	add	hl,bc
964   008D  4E          	ld	c,(hl)
965   008E  3E 10       	ld	a,0x10
966   0090  91          	sub	a,c
967   0091  38 16       	jr	C,l_spr_move_up_00109
968   0093  3A 00 00    	ld	a,(_sprite)
969   0096  D6 07       	sub	a,0x07
970   0098  20 0B       	jr	NZ,l_spr_move_up_00104
971   009A  CD 51 04    	call	_spr_page_up
972   009D  7D          	ld	a, l
973   009E  B7          	or	a, a
974   009F  28 04       	jr	Z,l_spr_move_up_00104
975   00A1  2E 00       	ld	l,0x00
976   00A3  18 54       	jr	l_spr_move_up_00111
977   00A5              l_spr_move_up_00104:
978   00A5  2E 01       	ld	l,0x01
979   00A7  18 50       	jr	l_spr_move_up_00111
980   00A9              l_spr_move_up_00109:
981   00A9  79          	ld	a, c
982   00AA  C6 FE       	add	a,0xfe
983   00AC  32 00 00    	ld	(_s_lin1),a
984   00AF  07          	rlca
985   00B0  07          	rlca
986   00B1  07          	rlca
987   00B2  07          	rlca
988   00B3  E6 0F       	and	a,0x0f
989   00B5  4F          	ld	c, a
990   00B6  3A 00 00    	ld	a,(_s_lin0)
991   00B9  07          	rlca
992   00BA  07          	rlca
993   00BB  07          	rlca
994   00BC  07          	rlca
995   00BD  E6 0F       	and	a,0x0f
996   00BF  47          	ld	b, a
997   00C0  79          	ld	a, c
998   00C1  90          	sub	a, b
999   00C2  20 04       	jr	NZ,l_spr_move_up_00135
1000  00C4  3E 01       	ld	a,0x01
1001  00C6  18 01       	jr	l_spr_move_up_00136
1002  00C8              l_spr_move_up_00135:
1003  00C8  AF          	xor	a,a
1004  00C9              l_spr_move_up_00136:
1005  00C9  EE 01       	xor	a,0x01
1006  00CB  28 1D       	jr	Z,l_spr_move_up_00106
1007  00CD  2A 00 00    	ld	hl,(_sprite)
1008  00D0  26 00       	ld	h,0x00
1009  00D2  01 00 00    	ld	bc,_col
1010  00D5  09          	add	hl,bc
1011  00D6  7E          	ld	a,(hl)
1012  00D7  F5          	push	af
1013  00D8  33          	inc	sp
1014  00D9  3A 00 00    	ld	a,(_s_lin1)
1015  00DC  F5          	push	af
1016  00DD  33          	inc	sp
1017  00DE  CD 00 00    	call	_game_check_map
1018  00E1  F1          	pop	af
1019  00E2  7C          	ld	a,h
1020  00E3  B5          	or	a,l
1021  00E4  28 04       	jr	Z,l_spr_move_up_00106
1022  00E6  2E 01       	ld	l,0x01
1023  00E8  18 0F       	jr	l_spr_move_up_00111
1024  00EA              l_spr_move_up_00106:
1025  00EA  2A 00 00    	ld	hl,(_sprite)
1026  00ED  26 00       	ld	h,0x00
1027  00EF  01 00 00    	ld	bc,_lin
1028  00F2  09          	add	hl,bc
1029  00F3  3A 00 00    	ld	a,(_s_lin1)
1030  00F6  77          	ld	(hl),a
1031  00F7  2E 00       	ld	l,0x00
1032  00F9              l_spr_move_up_00111:
1033  00F9  C9          	ret
1034  00FA              	SECTION code_compiler
1035  00FA              ;	---------------------------------
1036  00FA              ; Function spr_move_down
1037  00FA              ; ---------------------------------
1038  00FA              _spr_move_down:
1039  00FA  2A 00 00    	ld	hl,(_sprite)
1040  00FD  26 00       	ld	h,0x00
1041  00FF  01 00 00    	ld	bc,_lin
1042  0102  09          	add	hl,bc
1043  0103  7E          	ld	a,(hl)
1044  0104  FE 90       	cp	a,0x90
1045  0106  38 2C       	jr	C,l_spr_move_down_00112
1046  0108  3A 00 00    	ld	a,(_sprite)
1047  010B  D6 07       	sub	a,0x07
1048  010D  28 04       	jr	Z,l_spr_move_down_00137
1049  010F  4D          	ld	c,l
1050  0110  44          	ld	b,h
1051  0111  18 1A       	jr	l_spr_move_down_00105
1052  0113              l_spr_move_down_00137:
1053  0113  CD 02 04    	call	_spr_page_down
1054  0116  7D          	ld	a, l
1055  0117  B7          	or	a, a
1056  0118  28 04       	jr	Z,l_spr_move_down_00102
1057  011A  2E 01       	ld	l,0x01
1058  011C  18 67       	jr	l_spr_move_down_00114
1059  011E              l_spr_move_down_00102:
1060  011E  2A 00 00    	ld	hl,(_sprite)
1061  0121  26 00       	ld	h,0x00
1062  0123  01 00 00    	ld	bc,_lin
1063  0126  09          	add	hl,bc
1064  0127  36 90       	ld	(hl),0x90
1065  0129  2E 01       	ld	l,0x01
1066  012B  18 58       	jr	l_spr_move_down_00114
1067  012D              l_spr_move_down_00105:
1068  012D  3E 90       	ld	a,0x90
1069  012F  02          	ld	(bc), a
1070  0130  2E 01       	ld	l,0x01
1071  0132  18 51       	jr	l_spr_move_down_00114
1072  0134              l_spr_move_down_00112:
1073  0134  C6 10       	add	a,0x10
1074  0136  32 00 00    	ld	(_s_lin1),a
1075  0139  07          	rlca
1076  013A  07          	rlca
1077  013B  07          	rlca
1078  013C  07          	rlca
1079  013D  E6 0F       	and	a,0x0f
1080  013F  4F          	ld	c, a
1081  0140  3A 00 00    	ld	a,(_s_lin0)
1082  0143  07          	rlca
1083  0144  07          	rlca
1084  0145  07          	rlca
1085  0146  07          	rlca
1086  0147  E6 0F       	and	a,0x0f
1087  0149  5F          	ld	e, a
1088  014A  79          	ld	a, c
1089  014B  93          	sub	a, e
1090  014C  20 04       	jr	NZ,l_spr_move_down_00138
1091  014E  3E 01       	ld	a,0x01
1092  0150  18 01       	jr	l_spr_move_down_00139
1093  0152              l_spr_move_down_00138:
1094  0152  AF          	xor	a,a
1095  0153              l_spr_move_down_00139:
1096  0153  EE 01       	xor	a,0x01
1097  0155  28 1D       	jr	Z,l_spr_move_down_00110
1098  0157  2A 00 00    	ld	hl,(_sprite)
1099  015A  26 00       	ld	h,0x00
1100  015C  01 00 00    	ld	bc,_col
1101  015F  09          	add	hl,bc
1102  0160  7E          	ld	a,(hl)
1103  0161  F5          	push	af
1104  0162  33          	inc	sp
1105  0163  3A 00 00    	ld	a,(_s_lin1)
1106  0166  F5          	push	af
1107  0167  33          	inc	sp
1108  0168  CD 00 00    	call	_game_check_map
1109  016B  F1          	pop	af
1110  016C  7C          	ld	a,h
1111  016D  B5          	or	a,l
1112  016E  28 04       	jr	Z,l_spr_move_down_00110
1113  0170  2E 01       	ld	l,0x01
1114  0172  18 11       	jr	l_spr_move_down_00114
1115  0174              l_spr_move_down_00110:
1116  0174  2A 00 00    	ld	hl,(_sprite)
1117  0177  26 00       	ld	h,0x00
1118  0179  01 00 00    	ld	bc,_lin
1119  017C  09          	add	hl,bc
1120  017D  3A 00 00    	ld	a,(_s_lin1)
1121  0180  C6 F2       	add	a,0xf2
1122  0182  77          	ld	(hl),a
1123  0183  2E 00       	ld	l,0x00
1124  0185              l_spr_move_down_00114:
1125  0185  C9          	ret
1126  0186              	SECTION code_compiler
1127  0186              ;	---------------------------------
1128  0186              ; Function spr_move_horizontal
1129  0186              ; ---------------------------------
1130  0186              _spr_move_horizontal:
1131  0186  2A 00 00    	ld	hl,(_sprite)
1132  0189  26 00       	ld	h,0x00
1133  018B  01 00 00    	ld	bc,_state
1134  018E  09          	add	hl,bc
1135  018F  7E          	ld	a,(hl)
1136  0190  CB 57       	bit	2, a
1137  0192  28 05       	jr	Z,l_spr_move_horizontal_00104
1138  0194  CD A5 01    	call	_spr_move_right
1139  0197  18 0B       	jr	l_spr_move_horizontal_00106
1140  0199              l_spr_move_horizontal_00104:
1141  0199  CB 5F       	bit	3, a
1142  019B  28 05       	jr	Z,l_spr_move_horizontal_00105
1143  019D  CD A1 02    	call	_spr_move_left
1144  01A0  18 02       	jr	l_spr_move_horizontal_00106
1145  01A2              l_spr_move_horizontal_00105:
1146  01A2  2E 00       	ld	l,0x00
1147  01A4              l_spr_move_horizontal_00106:
1148  01A4  C9          	ret
1149  01A5              	SECTION code_compiler
1150  01A5              ;	---------------------------------
1151  01A5              ; Function spr_move_right
1152  01A5              ; ---------------------------------
1153  01A5              _spr_move_right:
1154  01A5  2A 00 00    	ld	hl,(_sprite)
1155  01A8  26 00       	ld	h,0x00
1156  01AA  01 00 00    	ld	bc,_colint
1157  01AD  09          	add	hl,bc
1158  01AE  7E          	ld	a,(hl)
1159  01AF  3C          	inc	a
1160  01B0  77          	ld	(hl),a
1161  01B1  4F          	ld	c,a
1162  01B2  3A 00 00    	ld	a,(_sprite)
1163  01B5  5F          	ld	e,a
1164  01B6  16 00       	ld	d,0x00
1165  01B8  21 00 00    	ld	hl,_class
1166  01BB  19          	add	hl,de
1167  01BC  5E          	ld	e, (hl)
1168  01BD  16 00       	ld	d,0x00
1169  01BF  21 00 00    	ld	hl,_sprite_frames
1170  01C2  19          	add	hl, de
1171  01C3  7E          	ld	a, (hl)
1172  01C4  91          	sub	a, c
1173  01C5  C2 9E 02    	jp	NZ,l_spr_move_right_00118
1174  01C8  2A 00 00    	ld	hl,(_sprite)
1175  01CB  26 00       	ld	h,0x00
1176  01CD  01 00 00    	ld	bc,_lin
1177  01D0  09          	add	hl,bc
1178  01D1  7E          	ld	a,(hl)
1179  01D2  32 00 00    	ld	(_s_lin1),a
1180  01D5  2A 00 00    	ld	hl,(_sprite)
1181  01D8  26 00       	ld	h,0x00
1182  01DA  01 00 00    	ld	bc,_col
1183  01DD  09          	add	hl,bc
1184  01DE  7E          	ld	a,(hl)
1185  01DF  FE 1E       	cp	a,0x1e
1186  01E1  30 5E       	jr	NC,l_spr_move_right_00108
1187  01E3  3C          	inc	a
1188  01E4  32 00 00    	ld	(_s_col1),a
1189  01E7  21 00 00    	ld	hl,_sprite_horizontal_check
1190  01EA  36 01       	ld	(hl),0x01
1191  01EC  2A FF FF    	ld	hl,(_s_col1 - 1)
1192  01EF  3A 00 00    	ld	a,(_s_lin1)
1193  01F2  6F          	ld	l,a
1194  01F3  E5          	push	hl
1195  01F4  CD 00 00    	call	_game_check_map
1196  01F7  F1          	pop	af
1197  01F8  7D          	ld	a,l
1198  01F9  32 00 00    	ld	(_tmp0),a
1199  01FC  B7          	or	a, a
1200  01FD  20 13       	jr	NZ,l_spr_move_right_00102
1201  01FF  3A 00 00    	ld	a,(_s_lin1)
1202  0202  C6 0F       	add	a,0x0f
1203  0204  4F          	ld	c, a
1204  0205  3A 00 00    	ld	a, (_s_col1)
1205  0208  47          	ld	b,a
1206  0209  C5          	push	bc
1207  020A  CD 00 00    	call	_game_check_map
1208  020D  F1          	pop	af
1209  020E  7D          	ld	a,l
1210  020F  32 00 00    	ld	(_tmp0),a
1211  0212              l_spr_move_right_00102:
1212  0212  21 00 00    	ld	hl,_sprite_horizontal_check
1213  0215  36 00       	ld	(hl),0x00
1214  0217  3A 00 00    	ld	a,(_tmp0)
1215  021A  B7          	or	a, a
1216  021B  28 24       	jr	Z,l_spr_move_right_00108
1217  021D  2A 00 00    	ld	hl,(_sprite)
1218  0220  26 00       	ld	h,0x00
1219  0222  01 00 00    	ld	bc,_colint
1220  0225  09          	add	hl,bc
1221  0226  7E          	ld	a,(hl)
1222  0227  C6 FF       	add	a,0xff
1223  0229  77          	ld	(hl),a
1224  022A  3A 00 00    	ld	a,(_sprite_on_air)
1225  022D  B7          	or	a,a
1226  022E  20 0D       	jr	NZ,l_spr_move_right_00104
1227  0230  2A 00 00    	ld	hl,(_sprite)
1228  0233  26 00       	ld	h,0x00
1229  0235  01 00 00    	ld	bc,_colint
1230  0238  09          	add	hl,bc
1231  0239  7E          	ld	a,(hl)
1232  023A  C6 FF       	add	a,0xff
1233  023C  77          	ld	(hl),a
1234  023D              l_spr_move_right_00104:
1235  023D  2E 01       	ld	l,0x01
1236  023F  18 5F       	jr	l_spr_move_right_00119
1237  0241              l_spr_move_right_00108:
1238  0241  2A 00 00    	ld	hl,(_sprite)
1239  0244  26 00       	ld	h,0x00
1240  0246  01 00 00    	ld	bc,_col
1241  0249  09          	add	hl,bc
1242  024A  34          	inc	(hl)
1243  024B  2A 00 00    	ld	hl,(_sprite)
1244  024E  26 00       	ld	h,0x00
1245  0250  01 00 00    	ld	bc,_colint
1246  0253  09          	add	hl,bc
1247  0254  AF          	xor	a,a
1248  0255  77          	ld	(hl),a
1249  0256  2A 00 00    	ld	hl,(_sprite)
1250  0259  26 00       	ld	h,0x00
1251  025B  01 00 00    	ld	bc,_col
1252  025E  09          	add	hl,bc
1253  025F  5E          	ld	e,(hl)
1254  0260  3E 1E       	ld	a,0x1e
1255  0262  93          	sub	a,e
1256  0263  30 39       	jr	NC,l_spr_move_right_00118
1257  0265  3A 00 00    	ld	a,(_sprite)
1258  0268  D6 07       	sub	a,0x07
1259  026A  28 04       	jr	Z,l_spr_move_right_00156
1260  026C  4D          	ld	c,l
1261  026D  44          	ld	b,h
1262  026E  18 27       	jr	l_spr_move_right_00113
1263  0270              l_spr_move_right_00156:
1264  0270  CD A0 03    	call	_spr_page_right
1265  0273  3A 00 00    	ld	a,(_sprite)
1266  0276  C6 00       	add	a,+((_col) & 0xFF)
1267  0278  4D          	ld	c,l
1268  0279  5F          	ld	e,a
1269  027A  3E 00       	ld	a,+((_col) / 256)
1270  027C  CE 00       	adc	a,0x00
1271  027E  57          	ld	d,a
1272  027F  79          	ld	a, c
1273  0280  B7          	or	a, a
1274  0281  28 0F       	jr	Z,l_spr_move_right_00110
1275  0283  AF          	xor	a, a
1276  0284  12          	ld	(de), a
1277  0285  3A 07 00    	ld	a,(_lin + 7)
1278  0288  32 00 00    	ld	(_player_lin_scr),a
1279  028B  21 00 00    	ld	hl,_player_col_scr
1280  028E  36 00       	ld	(hl),0x00
1281  0290  18 08       	jr	l_spr_move_right_00114
1282  0292              l_spr_move_right_00110:
1283  0292  3E 1E       	ld	a,0x1e
1284  0294  12          	ld	(de), a
1285  0295  18 03       	jr	l_spr_move_right_00114
1286  0297              l_spr_move_right_00113:
1287  0297  3E 1E       	ld	a,0x1e
1288  0299  02          	ld	(bc), a
1289  029A              l_spr_move_right_00114:
1290  029A  2E 01       	ld	l,0x01
1291  029C  18 02       	jr	l_spr_move_right_00119
1292  029E              l_spr_move_right_00118:
1293  029E  2E 00       	ld	l,0x00
1294  02A0              l_spr_move_right_00119:
1295  02A0  C9          	ret
1296  02A1              	SECTION code_compiler
1297  02A1              ;	---------------------------------
1298  02A1              ; Function spr_move_left
1299  02A1              ; ---------------------------------
1300  02A1              _spr_move_left:
1301  02A1  01 00 00    	ld	bc,_colint+0
1302  02A4  79          	ld	a, c
1303  02A5  21 00 00    	ld	hl,_sprite
1304  02A8  86          	add	a, (hl)
1305  02A9  5F          	ld	e, a
1306  02AA  78          	ld	a, b
1307  02AB  CE 00       	adc	a,0x00
1308  02AD  57          	ld	d, a
1309  02AE  1A          	ld	a, (de)
1310  02AF  C6 FF       	add	a,0xff
1311  02B1  12          	ld	(de), a
1312  02B2  79          	ld	a, c
1313  02B3  86          	add	a, (hl)
1314  02B4  5F          	ld	e, a
1315  02B5  78          	ld	a, b
1316  02B6  CE 00       	adc	a,0x00
1317  02B8  57          	ld	d, a
1318  02B9  1A          	ld	a, (de)
1319  02BA  3C          	inc	a
1320  02BB  C2 9D 03    	jp	NZ,l_spr_move_left_00118
1321  02BE  5E          	ld	e,(hl)
1322  02BF  16 00       	ld	d,0x00
1323  02C1  21 00 00    	ld	hl,_lin
1324  02C4  19          	add	hl,de
1325  02C5  7E          	ld	a,(hl)
1326  02C6  32 00 00    	ld	(_s_lin1),a
1327  02C9  2A 00 00    	ld	hl,(_sprite)
1328  02CC  26 00       	ld	h,0x00
1329  02CE  11 00 00    	ld	de,_col
1330  02D1  19          	add	hl,de
1331  02D2  7E          	ld	a,(hl)
1332  02D3  B7          	or	a, a
1333  02D4  28 5A       	jr	Z,l_spr_move_left_00108
1334  02D6  C6 FF       	add	a,0xff
1335  02D8  32 00 00    	ld	(_s_col1),a
1336  02DB  21 00 00    	ld	hl,_sprite_horizontal_check
1337  02DE  36 01       	ld	(hl),0x01
1338  02E0  3A 00 00    	ld	a,(_s_col1)
1339  02E3  C5          	push	bc
1340  02E4  F5          	push	af
1341  02E5  33          	inc	sp
1342  02E6  3A 00 00    	ld	a,(_s_lin1)
1343  02E9  F5          	push	af
1344  02EA  33          	inc	sp
1345  02EB  CD 00 00    	call	_game_check_map
1346  02EE  F1          	pop	af
1347  02EF  C1          	pop	bc
1348  02F0  7D          	ld	a,l
1349  02F1  32 00 00    	ld	(_tmp0),a
1350  02F4  B7          	or	a, a
1351  02F5  20 16       	jr	NZ,l_spr_move_left_00102
1352  02F7  3A 00 00    	ld	a,(_s_lin1)
1353  02FA  C6 0F       	add	a,0x0f
1354  02FC  57          	ld	d, a
1355  02FD  3A 00 00    	ld	a,(_s_col1)
1356  0300  C5          	push	bc
1357  0301  5A          	ld	e,d
1358  0302  57          	ld	d,a
1359  0303  D5          	push	de
1360  0304  CD 00 00    	call	_game_check_map
1361  0307  F1          	pop	af
1362  0308  C1          	pop	bc
1363  0309  7D          	ld	a,l
1364  030A  32 00 00    	ld	(_tmp0),a
1365  030D              l_spr_move_left_00102:
1366  030D  21 00 00    	ld	hl,_sprite_horizontal_check
1367  0310  36 00       	ld	(hl),0x00
1368  0312  3A 00 00    	ld	a,(_tmp0)
1369  0315  B7          	or	a, a
1370  0316  28 18       	jr	Z,l_spr_move_left_00108
1371  0318  2A 00 00    	ld	hl,(_sprite)
1372  031B  26 00       	ld	h,0x00
1373  031D  09          	add	hl,bc
1374  031E  34          	inc	(hl)
1375  031F  3A 00 00    	ld	a,(_sprite_on_air)
1376  0322  B7          	or	a, a
1377  0323  20 07       	jr	NZ,l_spr_move_left_00104
1378  0325  2A 00 00    	ld	hl,(_sprite)
1379  0328  26 00       	ld	h,0x00
1380  032A  09          	add	hl,bc
1381  032B  34          	inc	(hl)
1382  032C              l_spr_move_left_00104:
1383  032C  2E 01       	ld	l,0x01
1384  032E  18 6F       	jr	l_spr_move_left_00119
1385  0330              l_spr_move_left_00108:
1386  0330  2A 00 00    	ld	hl,(_sprite)
1387  0333  26 00       	ld	h,0x00
1388  0335  11 00 00    	ld	de,_col
1389  0338  19          	add	hl,de
1390  0339  7E          	ld	a,(hl)
1391  033A  EB          	ex	de,hl
1392  033B  C6 FF       	add	a,0xff
1393  033D  12          	ld	(de),a
1394  033E  79          	ld	a,c
1395  033F  21 00 00    	ld	hl,_sprite
1396  0342  86          	add	a, (hl)
1397  0343  4F          	ld	c, a
1398  0344  78          	ld	a, b
1399  0345  CE 00       	adc	a,0x00
1400  0347  47          	ld	b, a
1401  0348  5E          	ld	e,(hl)
1402  0349  16 00       	ld	d,0x00
1403  034B  21 00 00    	ld	hl,_class
1404  034E  19          	add	hl,de
1405  034F  5E          	ld	e, (hl)
1406  0350  16 00       	ld	d,0x00
1407  0352  21 00 00    	ld	hl,_sprite_frames
1408  0355  19          	add	hl, de
1409  0356  5E          	ld	e, (hl)
1410  0357  1D          	dec	e
1411  0358  7B          	ld	a, e
1412  0359  02          	ld	(bc), a
1413  035A  2A 00 00    	ld	hl,(_sprite)
1414  035D  26 00       	ld	h,0x00
1415  035F  01 00 00    	ld	bc,_col
1416  0362  09          	add	hl,bc
1417  0363  7E          	ld	a,(hl)
1418  0364  3C          	inc	a
1419  0365  20 36       	jr	NZ,l_spr_move_left_00118
1420  0367  3A 00 00    	ld	a,(_sprite)
1421  036A  D6 07       	sub	a,0x07
1422  036C  4D          	ld	c,l
1423  036D  44          	ld	b,h
1424  036E  20 27       	jr	NZ,l_spr_move_left_00113
1425  0370  CD D3 03    	call	_spr_page_left
1426  0373  3A 00 00    	ld	a,(_sprite)
1427  0376  C6 00       	add	a,+((_col) & 0xFF)
1428  0378  4D          	ld	c,l
1429  0379  5F          	ld	e,a
1430  037A  3E 00       	ld	a,+((_col) / 256)
1431  037C  CE 00       	adc	a,0x00
1432  037E  57          	ld	d,a
1433  037F  79          	ld	a, c
1434  0380  B7          	or	a, a
1435  0381  28 10       	jr	Z,l_spr_move_left_00110
1436  0383  3E 1E       	ld	a,0x1e
1437  0385  12          	ld	(de), a
1438  0386  3A 07 00    	ld	a,(_lin + 7)
1439  0389  32 00 00    	ld	(_player_lin_scr),a
1440  038C  21 00 00    	ld	hl,_player_col_scr
1441  038F  36 1E       	ld	(hl),0x1e
1442  0391  18 06       	jr	l_spr_move_left_00114
1443  0393              l_spr_move_left_00110:
1444  0393  AF          	xor	a, a
1445  0394  12          	ld	(de), a
1446  0395  18 02       	jr	l_spr_move_left_00114
1447  0397              l_spr_move_left_00113:
1448  0397  AF          	xor	a, a
1449  0398  02          	ld	(bc), a
1450  0399              l_spr_move_left_00114:
1451  0399  2E 01       	ld	l,0x01
1452  039B  18 02       	jr	l_spr_move_left_00119
1453  039D              l_spr_move_left_00118:
1454  039D  2E 00       	ld	l,0x00
1455  039F              l_spr_move_left_00119:
1456  039F  C9          	ret
1457  03A0              	SECTION code_compiler
1458  03A0              ;	---------------------------------
1459  03A0              ; Function spr_page_right
1460  03A0              ; ---------------------------------
1461  03A0              _spr_page_right:
1462  03A0  2A FF FF    	ld	hl,(_map_width - 1)
1463  03A3  3A 00 00    	ld	a,(_scr_curr)
1464  03A6  6F          	ld	l,a
1465  03A7  E5          	push	hl
1466  03A8  CD 00 00    	call	__moduchar_callee
1467  03AB  7D          	ld	a, l
1468  03AC  3C          	inc	a
1469  03AD  32 00 00    	ld	(_tmp1),a
1470  03B0  21 00 00    	ld	hl,_map_width
1471  03B3  96          	sub	a, (hl)
1472  03B4  30 1A       	jr	NC,l_spr_page_right_00102
1473  03B6  3A 00 00    	ld	a,(_game_boss)
1474  03B9  B7          	or	a, a
1475  03BA  28 06       	jr	Z,l_spr_page_right_00101
1476  03BC  3A 00 00    	ld	a,(_game_god_mode)
1477  03BF  B7          	or	a, a
1478  03C0  28 0E       	jr	Z,l_spr_page_right_00102
1479  03C2              l_spr_page_right_00101:
1480  03C2  21 00 00    	ld	hl,_scr_curr
1481  03C5  34          	inc	(hl)
1482  03C6  CD FF 04    	call	_spr_page_map
1483  03C9  CD 00 00    	call	_game_draw_screen
1484  03CC  2E 01       	ld	l,0x01
1485  03CE  18 02       	jr	l_spr_page_right_00105
1486  03D0              l_spr_page_right_00102:
1487  03D0  2E 00       	ld	l,0x00
1488  03D2              l_spr_page_right_00105:
1489  03D2  C9          	ret
1490  03D3              	SECTION code_compiler
1491  03D3              ;	---------------------------------
1492  03D3              ; Function spr_page_left
1493  03D3              ; ---------------------------------
1494  03D3              _spr_page_left:
1495  03D3  2A FF FF    	ld	hl,(_map_width - 1)
1496  03D6  3A 00 00    	ld	a,(_scr_curr)
1497  03D9  6F          	ld	l,a
1498  03DA  E5          	push	hl
1499  03DB  CD 00 00    	call	__moduchar_callee
1500  03DE  7D          	ld	a,l
1501  03DF  32 00 00    	ld	(_tmp1),a
1502  03E2  B7          	or	a, a
1503  03E3  28 1A       	jr	Z,l_spr_page_left_00102
1504  03E5  3A 00 00    	ld	a,(_game_boss)
1505  03E8  B7          	or	a, a
1506  03E9  28 06       	jr	Z,l_spr_page_left_00101
1507  03EB  3A 00 00    	ld	a,(_game_god_mode)
1508  03EE  B7          	or	a, a
1509  03EF  28 0E       	jr	Z,l_spr_page_left_00102
1510  03F1              l_spr_page_left_00101:
1511  03F1  21 00 00    	ld	hl,_scr_curr
1512  03F4  35          	dec	(hl)
1513  03F5  CD FF 04    	call	_spr_page_map
1514  03F8  CD 00 00    	call	_game_draw_screen
1515  03FB  2E 01       	ld	l,0x01
1516  03FD  18 02       	jr	l_spr_page_left_00105
1517  03FF              l_spr_page_left_00102:
1518  03FF  2E 00       	ld	l,0x00
1519  0401              l_spr_page_left_00105:
1520  0401  C9          	ret
1521  0402              	SECTION code_compiler
1522  0402              ;	---------------------------------
1523  0402              ; Function spr_page_down
1524  0402              ; ---------------------------------
1525  0402              _spr_page_down:
1526  0402  2A FF FF    	ld	hl,(_map_heigth - 1)
1527  0405  3A 00 00    	ld	a,(_scr_curr)
1528  0408  6F          	ld	l,a
1529  0409  E5          	push	hl
1530  040A  CD 00 00    	call	__divuchar_callee
1531  040D  7D          	ld	a, l
1532  040E  3C          	inc	a
1533  040F  32 00 00    	ld	(_tmp1),a
1534  0412  21 00 00    	ld	hl,_map_heigth
1535  0415  96          	sub	a, (hl)
1536  0416  30 36       	jr	NC,l_spr_page_down_00102
1537  0418  3A 00 00    	ld	a,(_game_boss)
1538  041B  B7          	or	a, a
1539  041C  28 06       	jr	Z,l_spr_page_down_00101
1540  041E  3A 00 00    	ld	a,(_game_god_mode)
1541  0421  B7          	or	a, a
1542  0422  28 2A       	jr	Z,l_spr_page_down_00102
1543  0424              l_spr_page_down_00101:
1544  0424  3A 00 00    	ld	a,(_scr_curr)
1545  0427  21 00 00    	ld	hl,_map_width
1546  042A  86          	add	a, (hl)
1547  042B  32 00 00    	ld	(_scr_curr),a
1548  042E  CD FF 04    	call	_spr_page_map
1549  0431  CD 00 00    	call	_game_draw_screen
1550  0434  21 00 00    	ld	hl,_player_lin_scr
1551  0437  36 08       	ld	(hl),0x08
1552  0439  2A 00 00    	ld	hl,(_sprite)
1553  043C  26 00       	ld	h,0x00
1554  043E  01 00 00    	ld	bc,_lin
1555  0441  09          	add	hl,bc
1556  0442  36 08       	ld	(hl),0x08
1557  0444  3A 07 00    	ld	a,(_col + 0x0007)
1558  0447  32 00 00    	ld	(_player_col_scr),a
1559  044A  2E 01       	ld	l,0x01
1560  044C  18 02       	jr	l_spr_page_down_00105
1561  044E              l_spr_page_down_00102:
1562  044E  2E 00       	ld	l,0x00
1563  0450              l_spr_page_down_00105:
1564  0450  C9          	ret
1565  0451              	SECTION code_compiler
1566  0451              ;	---------------------------------
1567  0451              ; Function spr_page_up
1568  0451              ; ---------------------------------
1569  0451              _spr_page_up:
1570  0451  2A FF FF    	ld	hl,(_map_width - 1)
1571  0454  3A 00 00    	ld	a,(_scr_curr)
1572  0457  6F          	ld	l,a
1573  0458  E5          	push	hl
1574  0459  CD 00 00    	call	__divuchar_callee
1575  045C  7D          	ld	a,l
1576  045D  32 00 00    	ld	(_tmp1),a
1577  0460  B7          	or	a, a
1578  0461  28 36       	jr	Z,l_spr_page_up_00102
1579  0463  3A 00 00    	ld	a,(_game_boss)
1580  0466  B7          	or	a, a
1581  0467  28 06       	jr	Z,l_spr_page_up_00101
1582  0469  3A 00 00    	ld	a,(_game_god_mode)
1583  046C  B7          	or	a, a
1584  046D  28 2A       	jr	Z,l_spr_page_up_00102
1585  046F              l_spr_page_up_00101:
1586  046F  3A 00 00    	ld	a,(_scr_curr)
1587  0472  21 00 00    	ld	hl,_map_width
1588  0475  96          	sub	a, (hl)
1589  0476  32 00 00    	ld	(_scr_curr),a
1590  0479  CD FF 04    	call	_spr_page_map
1591  047C  CD 00 00    	call	_game_draw_screen
1592  047F  2A 00 00    	ld	hl,(_sprite)
1593  0482  26 00       	ld	h,0x00
1594  0484  01 00 00    	ld	bc,_lin
1595  0487  09          	add	hl,bc
1596  0488  36 8C       	ld	(hl),0x8c
1597  048A  21 00 00    	ld	hl,_player_lin_scr
1598  048D  36 8C       	ld	(hl),0x8c
1599  048F  3A 07 00    	ld	a,(_col + 0x0007)
1600  0492  32 00 00    	ld	(_player_col_scr),a
1601  0495  2E 01       	ld	l,0x01
1602  0497  18 02       	jr	l_spr_page_up_00105
1603  0499              l_spr_page_up_00102:
1604  0499  2E 00       	ld	l,0x00
1605  049B              l_spr_page_up_00105:
1606  049B  C9          	ret
1607  049C              	SECTION code_compiler
1608  049C              ;	---------------------------------
1609  049C              ; Function spr_clear_scr
1610  049C              ; ---------------------------------
1611  049C              _spr_clear_scr:
1612  049C  06 00       	ld	b,0x00
1613  049E              l_spr_clear_scr_00105:
1614  049E  C5          	push	bc
1615  049F  21 00 00    	ld	hl,0x0000
1616  04A2  E5          	push	hl
1617  04A3  AF          	xor	a, a
1618  04A4  48          	ld	c,b
1619  04A5  47          	ld	b,a
1620  04A6  C5          	push	bc
1621  04A7  CD 00 00    	call	_NIRVANAP_spriteT_callee
1622  04AA  C1          	pop	bc
1623  04AB  04          	inc	b
1624  04AC  78          	ld	a, b
1625  04AD  D6 08       	sub	a,0x08
1626  04AF  38 ED       	jr	C,l_spr_clear_scr_00105
1627  04B1  76          	halt
1628  04B2  F3          	di
1629  04B3  0E 00       	ld	c,0x00
1630  04B5              l_spr_clear_scr_00117:
1631  04B5  79          	ld	a, c
1632  04B6  87          	add	a, a
1633  04B7  47          	ld	b, a
1634  04B8  50          	ld	d, b
1635  04B9  1E 01       	ld	e,0x01
1636  04BB              l_spr_clear_scr_00107:
1637  04BB  7B          	ld	a, e
1638  04BC  07          	rlca
1639  04BD  07          	rlca
1640  04BE  07          	rlca
1641  04BF  07          	rlca
1642  04C0  E6 F0       	and	a,0xf0
1643  04C2  C5          	push	bc
1644  04C3  D5          	push	de
1645  04C4  5F          	ld	e,a
1646  04C5  D5          	push	de
1647  04C6  AF          	xor	a, a
1648  04C7  F5          	push	af
1649  04C8  33          	inc	sp
1650  04C9  CD 00 00    	call	_NIRVANAP_fillT_raw_callee
1651  04CC  D1          	pop	de
1652  04CD  C1          	pop	bc
1653  04CE  1C          	inc	e
1654  04CF  7B          	ld	a, e
1655  04D0  D6 0A       	sub	a,0x0a
1656  04D2  38 E7       	jr	C,l_spr_clear_scr_00107
1657  04D4  3E 1E       	ld	a,0x1e
1658  04D6  90          	sub	a, b
1659  04D7  47          	ld	b, a
1660  04D8  1E 01       	ld	e,0x01
1661  04DA              l_spr_clear_scr_00109:
1662  04DA  7B          	ld	a, e
1663  04DB  07          	rlca
1664  04DC  07          	rlca
1665  04DD  07          	rlca
1666  04DE  07          	rlca
1667  04DF  E6 F0       	and	a,0xf0
1668  04E1  57          	ld	d, a
1669  04E2  C5          	push	bc
1670  04E3  D5          	push	de
1671  04E4  4A          	ld	c, d
1672  04E5  C5          	push	bc
1673  04E6  AF          	xor	a, a
1674  04E7  F5          	push	af
1675  04E8  33          	inc	sp
1676  04E9  CD 00 00    	call	_NIRVANAP_fillT_raw_callee
1677  04EC  D1          	pop	de
1678  04ED  C1          	pop	bc
1679  04EE  1C          	inc	e
1680  04EF  7B          	ld	a, e
1681  04F0  D6 0A       	sub	a,0x0a
1682  04F2  38 E6       	jr	C,l_spr_clear_scr_00109
1683  04F4  FB          	ei
1684  04F5  76          	halt
1685  04F6  F3          	di
1686  04F7  0C          	inc	c
1687  04F8  79          	ld	a, c
1688  04F9  D6 08       	sub	a,0x08
1689  04FB  38 B8       	jr	C,l_spr_clear_scr_00117
1690  04FD  FB          	ei
1691  04FE  C9          	ret
1692  04FF              	SECTION code_compiler
1693  04FF              ;	---------------------------------
1694  04FF              ; Function spr_page_map
1695  04FF              ; ---------------------------------
1696  04FF              _spr_page_map:
1697  04FF  CD 00 00    	call	___sdcc_enter_ix
1698  0502  21 F1 FF    	ld	hl, -15
1699  0505  39          	add	hl, sp
1700  0506  F9          	ld	sp, hl
1701  0507  21 00 00    	ld	hl,_game_world
1702  050A  4E          	ld	c, (hl)
1703  050B  21 00 00    	ld	hl,_scr_curr
1704  050E  46          	ld	b, (hl)
1705  050F  DD 36 F5 10 	ld	(ix-11),0x10
1706  0513  C5          	push	bc
1707  0514  CD 9C 04    	call	_spr_clear_scr
1708  0517  C1          	pop	bc
1709  0518  F3          	di
1710  0519  21 00 00    	ld	hl,_GLOBAL_ZX_PORT_7FFD
1711  051C  36 16       	ld	(hl),0x16
1712  051E  C5          	push	bc
1713  051F  3E 16       	ld	a,0x16
1714  0521  01 FD 7F    	ld	bc,_IO_7FFD
1715  0524  ED 79       	out	(c),a
1716  0526  C1          	pop	bc
1717  0527  78          	ld	a, b
1718  0528  3C          	inc	a
1719  0529  20 04       	jr	NZ,l_spr_page_map_00207
1720  052B  3E 01       	ld	a,0x01
1721  052D  18 01       	jr	l_spr_page_map_00208
1722  052F              l_spr_page_map_00207:
1723  052F  AF          	xor	a,a
1724  0530              l_spr_page_map_00208:
1725  0530  5F          	ld	e, a
1726  0531  79          	ld	a, c
1727  0532  B7          	or	a,a
1728  0533  20 22       	jr	NZ,l_spr_page_map_00106
1729  0535  B3          	or	a,e
1730  0536  28 04       	jr	Z,l_spr_page_map_00102
1731  0538  21 00 00    	ld	hl,_start_scr0
1732  053B  46          	ld	b, (hl)
1733  053C              l_spr_page_map_00102:
1734  053C  11 00 00    	ld	de,_paper0+0
1735  053F  68          	ld	l,b
1736  0540  26 00       	ld	h,0x00
1737  0542  19          	add	hl, de
1738  0543  7E          	ld	a, (hl)
1739  0544  DD 77 FF    	ld	(ix-1),a
1740  0547  21 00 00    	ld	hl,_world0_w
1741  054A  5E          	ld	e, (hl)
1742  054B  DD 73 FE    	ld	(ix-2),e
1743  054E  21 00 00    	ld	hl,_world0_h
1744  0551  5E          	ld	e, (hl)
1745  0552  DD 73 FD    	ld	(ix-3),e
1746  0555  18 21       	jr	l_spr_page_map_00107
1747  0557              l_spr_page_map_00106:
1748  0557  7B          	ld	a, e
1749  0558  B7          	or	a, a
1750  0559  28 04       	jr	Z,l_spr_page_map_00104
1751  055B  21 00 00    	ld	hl,_start_scr1
1752  055E  46          	ld	b, (hl)
1753  055F              l_spr_page_map_00104:
1754  055F  11 00 00    	ld	de,_paper1+0
1755  0562  68          	ld	l,b
1756  0563  26 00       	ld	h,0x00
1757  0565  19          	add	hl, de
1758  0566  7E          	ld	a, (hl)
1759  0567  DD 77 FF    	ld	(ix-1),a
1760  056A  21 00 00    	ld	hl,_world1_w
1761  056D  5E          	ld	e, (hl)
1762  056E  DD 73 FE    	ld	(ix-2),e
1763  0571  21 00 00    	ld	hl,_world1_h
1764  0574  5E          	ld	e, (hl)
1765  0575  DD 73 FD    	ld	(ix-3),e
1766  0578              l_spr_page_map_00107:
1767  0578  21 00 00    	ld	hl,_GLOBAL_ZX_PORT_7FFD
1768  057B  36 10       	ld	(hl),0x10
1769  057D  C5          	push	bc
1770  057E  3E 10       	ld	a,0x10
1771  0580  01 FD 7F    	ld	bc,_IO_7FFD
1772  0583  ED 79       	out	(c),a
1773  0585  C1          	pop	bc
1774  0586  3E 00       	ld	a,0x00
1775  0588  DD 77 F3    	ld	(ix-13),a
1776  058B  DD 77 F4    	ld	(ix-12),a
1777  058E  DD 77 F6    	ld	(ix-10),a
1778  0591              l_spr_page_map_00111:
1779  0591  DD 7E F6    	ld	a,(ix-10)
1780  0594  90          	sub	a, b
1781  0595  30 51       	jr	NC,l_spr_page_map_00113
1782  0597  21 00 00    	ld	hl,_GLOBAL_ZX_PORT_7FFD
1783  059A  36 16       	ld	(hl),0x16
1784  059C  C5          	push	bc
1785  059D  3E 16       	ld	a,0x16
1786  059F  01 FD 7F    	ld	bc,_IO_7FFD
1787  05A2  ED 79       	out	(c),a
1788  05A4  C1          	pop	bc
1789  05A5  79          	ld	a, c
1790  05A6  B7          	or	a, a
1791  05A7  20 10       	jr	NZ,l_spr_page_map_00109
1792  05A9  3E 00       	ld	a, +((_lenght0) & 0xFF)
1793  05AB  DD 86 F6    	add	a,(ix-10)
1794  05AE  6F          	ld	l, a
1795  05AF  3E 00       	ld	a, +((_lenght0) / 256)
1796  05B1  CE 00       	adc	a,0x00
1797  05B3  67          	ld	h, a
1798  05B4  5E          	ld	e, (hl)
1799  05B5  16 00       	ld	d,0x00
1800  05B7  18 0E       	jr	l_spr_page_map_00110
1801  05B9              l_spr_page_map_00109:
1802  05B9  3E 00       	ld	a, +((_lenght1) & 0xFF)
1803  05BB  DD 86 F6    	add	a,(ix-10)
1804  05BE  6F          	ld	l, a
1805  05BF  3E 00       	ld	a, +((_lenght1) / 256)
1806  05C1  CE 00       	adc	a,0x00
1807  05C3  67          	ld	h, a
1808  05C4  5E          	ld	e, (hl)
1809  05C5  16 00       	ld	d,0x00
1810  05C7              l_spr_page_map_00110:
1811  05C7  21 00 00    	ld	hl,_GLOBAL_ZX_PORT_7FFD
1812  05CA  36 10       	ld	(hl),0x10
1813  05CC  C5          	push	bc
1814  05CD  3E 10       	ld	a,0x10
1815  05CF  01 FD 7F    	ld	bc,_IO_7FFD
1816  05D2  ED 79       	out	(c),a
1817  05D4  C1          	pop	bc
1818  05D5  DD 7E F3    	ld	a,(ix-13)
1819  05D8  83          	add	a, e
1820  05D9  DD 77 F3    	ld	(ix-13),a
1821  05DC  DD 7E F4    	ld	a,(ix-12)
1822  05DF  8A          	adc	a, d
1823  05E0  DD 77 F4    	ld	(ix-12),a
1824  05E3  DD 34 F6    	inc	(ix-10)
1825  05E6  18 A9       	jr	l_spr_page_map_00111
1826  05E8              l_spr_page_map_00113:
1827  05E8  FB          	ei
1828  05E9  F3          	di
1829  05EA  DD 36 F7 00 	ld	(ix-9),0x00
1830  05EE              l_spr_page_map_00137:
1831  05EE  21 00 00    	ld	hl,_GLOBAL_ZX_PORT_7FFD
1832  05F1  36 16       	ld	(hl),0x16
1833  05F3  C5          	push	bc
1834  05F4  3E 16       	ld	a,0x16
1835  05F6  01 FD 7F    	ld	bc,_IO_7FFD
1836  05F9  ED 79       	out	(c),a
1837  05FB  C1          	pop	bc
1838  05FC  DD 5E F7    	ld	e,(ix-9)
1839  05FF  16 00       	ld	d,0x00
1840  0601  DD 6E F3    	ld	l,(ix-13)
1841  0604  DD 66 F4    	ld	h,(ix-12)
1842  0607  19          	add	hl,de
1843  0608  EB          	ex	de,hl
1844  0609  21 01 00    	ld	hl,0x0001
1845  060C  19          	add	hl,de
1846  060D  DD 75 FB    	ld	(ix-5),l
1847  0610  DD 74 FC    	ld	(ix-4),h
1848  0613  79          	ld	a, c
1849  0614  B7          	or	a, a
1850  0615  20 18       	jr	NZ,l_spr_page_map_00115
1851  0617  21 00 00    	ld	hl,_world0
1852  061A  19          	add	hl, de
1853  061B  7E          	ld	a, (hl)
1854  061C  DD 77 F1    	ld	(ix-15),a
1855  061F  11 00 00    	ld	de,_world0
1856  0622  DD 6E FB    	ld	l,(ix-5)
1857  0625  DD 66 FC    	ld	h,(ix-4)
1858  0628  19          	add	hl,de
1859  0629  7E          	ld	a, (hl)
1860  062A  DD 77 F2    	ld	(ix-14),a
1861  062D  18 16       	jr	l_spr_page_map_00116
1862  062F              l_spr_page_map_00115:
1863  062F  21 00 00    	ld	hl,_world1
1864  0632  19          	add	hl, de
1865  0633  7E          	ld	a, (hl)
1866  0634  DD 77 F1    	ld	(ix-15),a
1867  0637  11 00 00    	ld	de,_world1
1868  063A  DD 6E FB    	ld	l,(ix-5)
1869  063D  DD 66 FC    	ld	h,(ix-4)
1870  0640  19          	add	hl,de
1871  0641  7E          	ld	a, (hl)
1872  0642  DD 77 F2    	ld	(ix-14),a
1873  0645              l_spr_page_map_00116:
1874  0645  21 00 00    	ld	hl,_GLOBAL_ZX_PORT_7FFD
1875  0648  36 10       	ld	(hl),0x10
1876  064A  C5          	push	bc
1877  064B  3E 10       	ld	a,0x10
1878  064D  01 FD 7F    	ld	bc,_IO_7FFD
1879  0650  ED 79       	out	(c),a
1880  0652  C1          	pop	bc
1881  0653  DD 7E F1    	ld	a,(ix-15)
1882  0656  D6 80       	sub	a,0x80
1883  0658  30 4F       	jr	NC,l_spr_page_map_00127
1884  065A  DD 7E F5    	ld	a,(ix-11)
1885  065D  DD 77 FB    	ld	(ix-5),a
1886  0660  DD 36 FC 00 	ld	(ix-4),0x00
1887  0664  C5          	push	bc
1888  0665  DD 6E FB    	ld	l,(ix-5)
1889  0668  DD 66 FC    	ld	h,(ix-4)
1890  066B  CD 00 00    	call	_game_obj_chk
1891  066E  C1          	pop	bc
1892  066F  5D          	ld	e,l
1893  0670  3E 00       	ld	a, +((_scr_map) & 0xFF)
1894  0672  DD 86 F5    	add	a,(ix-11)
1895  0675  DD 77 F9    	ld	(ix-7),a
1896  0678  3E 00       	ld	a, +((_scr_map) / 256)
1897  067A  CE 00       	adc	a,0x00
1898  067C  DD 77 FA    	ld	(ix-6),a
1899  067F  7B          	ld	a, e
1900  0680  B7          	or	a, a
1901  0681  20 0C       	jr	NZ,l_spr_page_map_00118
1902  0683  DD 6E F9    	ld	l,(ix-7)
1903  0686  DD 66 FA    	ld	h,(ix-6)
1904  0689  DD 7E F1    	ld	a,(ix-15)
1905  068C  77          	ld	(hl), a
1906  068D  18 15       	jr	l_spr_page_map_00119
1907  068F              l_spr_page_map_00118:
1908  068F  C5          	push	bc
1909  0690  DD 6E FB    	ld	l,(ix-5)
1910  0693  DD 66 FC    	ld	h,(ix-4)
1911  0696  E5          	push	hl
1912  0697  CD 00 00    	call	_game_match_back
1913  069A  F1          	pop	af
1914  069B  C1          	pop	bc
1915  069C  5D          	ld	e,l
1916  069D  DD 6E F9    	ld	l,(ix-7)
1917  06A0  DD 66 FA    	ld	h,(ix-6)
1918  06A3  73          	ld	(hl), e
1919  06A4              l_spr_page_map_00119:
1920  06A4  DD 34 F5    	inc	(ix-11)
1921  06A7  18 6D       	jr	l_spr_page_map_00128
1922  06A9              l_spr_page_map_00127:
1923  06A9  DD 7E F1    	ld	a,(ix-15)
1924  06AC  C6 80       	add	a,0x80
1925  06AE  DD 77 F8    	ld	(ix-8),a
1926  06B1  DD 5E F5    	ld	e,(ix-11)
1927  06B4  16 00       	ld	d,0x00
1928  06B6              l_spr_page_map_00135:
1929  06B6  7A          	ld	a, d
1930  06B7  DD 96 F8    	sub	a,(ix-8)
1931  06BA  30 54       	jr	NC,l_spr_page_map_00158
1932  06BC  DD 73 F9    	ld	(ix-7),e
1933  06BF  DD 36 FA 00 	ld	(ix-6),0x00
1934  06C3  C5          	push	bc
1935  06C4  D5          	push	de
1936  06C5  DD 6E F9    	ld	l,(ix-7)
1937  06C8  DD 66 FA    	ld	h,(ix-6)
1938  06CB  CD 00 00    	call	_game_obj_chk
1939  06CE  D1          	pop	de
1940  06CF  C1          	pop	bc
1941  06D0  7D          	ld	a,l
1942  06D1  B7          	or	a, a
1943  06D2  20 0F       	jr	NZ,l_spr_page_map_00121
1944  06D4  3E 00       	ld	a, +((_scr_map) & 0xFF)
1945  06D6  83          	add	a, e
1946  06D7  6F          	ld	l, a
1947  06D8  3E 00       	ld	a, +((_scr_map) / 256)
1948  06DA  CE 00       	adc	a,0x00
1949  06DC  67          	ld	h, a
1950  06DD  DD 7E F2    	ld	a,(ix-14)
1951  06E0  77          	ld	(hl), a
1952  06E1  18 24       	jr	l_spr_page_map_00122
1953  06E3              l_spr_page_map_00121:
1954  06E3  3E 00       	ld	a, +((_scr_map) & 0xFF)
1955  06E5  83          	add	a, e
1956  06E6  DD 77 FB    	ld	(ix-5),a
1957  06E9  3E 00       	ld	a, +((_scr_map) / 256)
1958  06EB  CE 00       	adc	a,0x00
1959  06ED  DD 77 FC    	ld	(ix-4),a
1960  06F0  C5          	push	bc
1961  06F1  D5          	push	de
1962  06F2  DD 6E F9    	ld	l,(ix-7)
1963  06F5  DD 66 FA    	ld	h,(ix-6)
1964  06F8  E5          	push	hl
1965  06F9  CD 00 00    	call	_game_match_back
1966  06FC  F1          	pop	af
1967  06FD  D1          	pop	de
1968  06FE  C1          	pop	bc
1969  06FF  7D          	ld	a,l
1970  0700  DD 6E FB    	ld	l,(ix-5)
1971  0703  DD 66 FC    	ld	h,(ix-4)
1972  0706  77          	ld	(hl), a
1973  0707              l_spr_page_map_00122:
1974  0707  1C          	inc	e
1975  0708  7B          	ld	a, e
1976  0709  D6 A0       	sub	a,0xa0
1977  070B  30 03       	jr	NC,l_spr_page_map_00158
1978  070D  14          	inc	d
1979  070E  18 A6       	jr	l_spr_page_map_00135
1980  0710              l_spr_page_map_00158:
1981  0710  DD 73 F5    	ld	(ix-11),e
1982  0713  DD 34 F7    	inc	(ix-9)
1983  0716              l_spr_page_map_00128:
1984  0716  DD 7E F5    	ld	a,(ix-11)
1985  0719  D6 A0       	sub	a,0xa0
1986  071B  30 0B       	jr	NC,l_spr_page_map_00131
1987  071D  DD 34 F7    	inc	(ix-9)
1988  0720  DD 7E F7    	ld	a,(ix-9)
1989  0723  D6 A0       	sub	a,0xa0
1990  0725  DA EE 05    	jp	C, l_spr_page_map_00137
1991  0728              l_spr_page_map_00131:
1992  0728  21 00 00    	ld	hl,_scr_curr
1993  072B  70          	ld	(hl), b
1994  072C  DD 7E FE    	ld	a,(ix-2)
1995  072F  32 00 00    	ld	(_map_width),a
1996  0732  DD 7E FD    	ld	a,(ix-3)
1997  0735  32 00 00    	ld	(_map_heigth),a
1998  0738  DD 7E FF    	ld	a,(ix-1)
1999  073B  32 00 00    	ld	(_map_paper),a
2000  073E  CD 3D 0C    	call	_spr_init_anim_bullets
2001  0741  3A 00 00    	ld	a,(_map_paper_last)
2002  0744  21 00 00    	ld	hl,_map_paper
2003  0747  96          	sub	a, (hl)
2004  0748  28 03       	jr	Z,l_spr_page_map_00133
2005  074A  CD 97 14    	call	_spr_btile_paint_back
2006  074D              l_spr_page_map_00133:
2007  074D  3A 00 00    	ld	a,(_map_paper)
2008  0750  32 00 00    	ld	(_map_paper_last),a
2009  0753  FB          	ei
2010  0754  CD 00 00    	call	_NIRVANAP_start
2011  0757  21 00 00    	ld	hl,_screen_ink
2012  075A  36 06       	ld	(hl),0x06
2013  075C  21 00 00    	ld	hl,___str_0
2014  075F  E5          	push	hl
2015  0760  21 17 0C    	ld	hl,0x0c17
2016  0763  E5          	push	hl
2017  0764  CD 00 00    	call	_zx_print_str
2018  0767  3A 00 00    	ld	a,(_scr_curr)
2019  076A  F5          	push	af
2020  076B  33          	inc	sp
2021  076C  21 17 10    	ld	hl,0x1017
2022  076F  E5          	push	hl
2023  0770  CD 00 00    	call	_zx_print_chr
2024  0773  DD F9       	ld	sp, ix
2025  0775  DD E1       	pop	ix
2026  0777  C9          	ret
2027  0778              	SECTION rodata_compiler
2028  0000              ___str_0:
2029  0000  53 43 52 3A 	DEFM "SCR:"
2030  0004  00          	DEFB 0x00
2031  0005              	SECTION code_compiler
2032  0778              ;	---------------------------------
2033  0778              ; Function spr_redraw
2034  0778              ; ---------------------------------
2035  0778              _spr_redraw:
2036  0778  2A 00 00    	ld	hl,(_sprite)
2037  077B  26 00       	ld	h,0x00
2038  077D  01 00 00    	ld	bc,_tile
2039  0780  09          	add	hl,bc
2040  0781  4E          	ld	c, (hl)
2041  0782  3A 00 00    	ld	a,(_sprite)
2042  0785  5F          	ld	e,a
2043  0786  16 00       	ld	d,0x00
2044  0788  21 00 00    	ld	hl,_colint
2045  078B  19          	add	hl,de
2046  078C  7E          	ld	a,(hl)
2047  078D  81          	add	a,c
2048  078E  32 00 00    	ld	(_s_tile1),a
2049  0791  2A 00 00    	ld	hl,(_sprite)
2050  0794  26 00       	ld	h,0x00
2051  0796  01 00 00    	ld	bc,_col
2052  0799  09          	add	hl,bc
2053  079A  7E          	ld	a,(hl)
2054  079B  32 00 00    	ld	(_s_col1),a
2055  079E  2A 00 00    	ld	hl,(_sprite)
2056  07A1  26 00       	ld	h,0x00
2057  07A3  01 00 00    	ld	bc,_lin
2058  07A6  09          	add	hl,bc
2059  07A7  7E          	ld	a,(hl)
2060  07A8  4D          	ld	c,l
2061  07A9  32 00 00    	ld	(_s_lin1),a
2062  07AC  21 00 00    	ld	hl,_s_lin0
2063  07AF  96          	sub	a, (hl)
2064  07B0  20 0A       	jr	NZ,l_spr_redraw_00117
2065  07B2  3A 00 00    	ld	a,(_s_col1)
2066  07B5  21 00 00    	ld	hl,_s_col0
2067  07B8  96          	sub	a, (hl)
2068  07B9  CA 6F 08    	jp	Z,l_spr_redraw_00118
2069  07BC              l_spr_redraw_00117:
2070  07BC  3A 00 00    	ld	a,(_sprite)
2071  07BF  D6 07       	sub	a,0x07
2072  07C1  20 3A       	jr	NZ,l_spr_redraw_00113
2073  07C3  3A 00 00    	ld	a,(_player_onstair)
2074  07C6  B7          	or	a, a
2075  07C7  28 2F       	jr	Z,l_spr_redraw_00104
2076  07C9  3A 07 00    	ld	a, (_lin + 7)
2077  07CC  E6 03       	and	a,0x03
2078  07CE  20 28       	jr	NZ,l_spr_redraw_00104
2079  07D0  21 00 00    	ld	hl,_player_anim_stair
2080  07D3  34          	inc	(hl)
2081  07D4  20 02       	jr	NZ,l_spr_redraw_00162
2082  07D6  23          	inc	hl
2083  07D7  34          	inc	(hl)
2084  07D8              l_spr_redraw_00162:
2085  07D8  3E 01       	ld	a,0x01
2086  07DA  21 00 00    	ld	hl,_player_anim_stair
2087  07DD  BE          	cp	a, (hl)
2088  07DE  3E 00       	ld	a,0x00
2089  07E0  23          	inc	hl
2090  07E1  9E          	sbc	a, (hl)
2091  07E2  30 05       	jr	NC,l_spr_redraw_00102
2092  07E4  2B          	dec	hl
2093  07E5  AF          	xor	a, a
2094  07E6  77          	ld	(hl), a
2095  07E7  23          	inc	hl
2096  07E8  77          	ld	(hl), a
2097  07E9              l_spr_redraw_00102:
2098  07E9  21 07 00    	ld	hl,_tile + 7
2099  07EC  4E          	ld	c, (hl)
2100  07ED  21 00 00    	ld	hl,_player_anim_stair
2101  07F0  46          	ld	b, (hl)
2102  07F1  79          	ld	a, c
2103  07F2  80          	add	a, b
2104  07F3  C6 04       	add	a,0x04
2105  07F5  32 00 00    	ld	(_s_tile1),a
2106  07F8              l_spr_redraw_00104:
2107  07F8  CD B4 0A    	call	_spr_back_repaint
2108  07FB  18 5B       	jr	l_spr_redraw_00114
2109  07FD              l_spr_redraw_00113:
2110  07FD  3A 00 00    	ld	a,(_s_lin1)
2111  0800  E6 07       	and	a,0x07
2112  0802  20 05       	jr	NZ,l_spr_redraw_00110
2113  0804  CD B4 0A    	call	_spr_back_repaint
2114  0807  18 4F       	jr	l_spr_redraw_00114
2115  0809              l_spr_redraw_00110:
2116  0809  21 00 00    	ld	hl,_s_state
2117  080C  CB 46       	bit	0, (hl)
2118  080E  28 26       	jr	Z,l_spr_redraw_00107
2119  0810  3A 00 00    	ld	a,(_s_lin0)
2120  0813  C6 08       	add	a,0x08
2121  0815  47          	ld	b, a
2122  0816  3A 00 00    	ld	a,(_s_col0)
2123  0819  F5          	push	af
2124  081A  33          	inc	sp
2125  081B  C5          	push	bc
2126  081C  33          	inc	sp
2127  081D  3A 00 00    	ld	a,(_map_paper_clr)
2128  0820  F5          	push	af
2129  0821  33          	inc	sp
2130  0822  CD 00 00    	call	_NIRVANAP_fillC_callee
2131  0825  21 00 00    	ld	hl,_s_col0
2132  0828  56          	ld	d, (hl)
2133  0829  14          	inc	d
2134  082A  58          	ld	e,b
2135  082B  3A 00 00    	ld	a,(_map_paper_clr)
2136  082E  D5          	push	de
2137  082F  F5          	push	af
2138  0830  33          	inc	sp
2139  0831  CD 00 00    	call	_NIRVANAP_fillC_callee
2140  0834  18 22       	jr	l_spr_redraw_00114
2141  0836              l_spr_redraw_00107:
2142  0836  2A FF FF    	ld	hl,(_s_col0 - 1)
2143  0839  3A 00 00    	ld	a,(_s_lin0)
2144  083C  6F          	ld	l,a
2145  083D  3A 00 00    	ld	a,(_map_paper_clr)
2146  0840  E5          	push	hl
2147  0841  F5          	push	af
2148  0842  33          	inc	sp
2149  0843  CD 00 00    	call	_NIRVANAP_fillC_callee
2150  0846  21 00 00    	ld	hl,_s_col0
2151  0849  46          	ld	b, (hl)
2152  084A  04          	inc	b
2153  084B  C5          	push	bc
2154  084C  33          	inc	sp
2155  084D  2A FF FF    	ld	hl,(_s_lin0 - 1)
2156  0850  3A 00 00    	ld	a,(_map_paper_clr)
2157  0853  6F          	ld	l,a
2158  0854  E5          	push	hl
2159  0855  CD 00 00    	call	_NIRVANAP_fillC_callee
2160  0858              l_spr_redraw_00114:
2161  0858  2A FF FF    	ld	hl,(_s_col1 - 1)
2162  085B  3A 00 00    	ld	a,(_s_lin1)
2163  085E  6F          	ld	l,a
2164  085F  E5          	push	hl
2165  0860  2A FF FF    	ld	hl,(_s_tile1 - 1)
2166  0863  3A 00 00    	ld	a,(_sprite)
2167  0866  6F          	ld	l,a
2168  0867  E5          	push	hl
2169  0868  CD 00 00    	call	_NIRVANAP_spriteT_callee
2170  086B  2E 01       	ld	l,0x01
2171  086D  18 22       	jr	l_spr_redraw_00121
2172  086F              l_spr_redraw_00118:
2173  086F  3A 00 00    	ld	a,(_s_tile1)
2174  0872  21 00 00    	ld	hl,_s_tile0
2175  0875  96          	sub	a, (hl)
2176  0876  28 17       	jr	Z,l_spr_redraw_00119
2177  0878  2A FF FF    	ld	hl,(_s_col1 - 1)
2178  087B  3A 00 00    	ld	a,(_s_lin1)
2179  087E  6F          	ld	l,a
2180  087F  E5          	push	hl
2181  0880  2A FF FF    	ld	hl,(_s_tile1 - 1)
2182  0883  3A 00 00    	ld	a,(_sprite)
2183  0886  6F          	ld	l,a
2184  0887  E5          	push	hl
2185  0888  CD 00 00    	call	_NIRVANAP_spriteT_callee
2186  088B  2E 00       	ld	l,0x00
2187  088D  18 02       	jr	l_spr_redraw_00121
2188  088F              l_spr_redraw_00119:
2189  088F  2E 00       	ld	l,0x00
2190  0891              l_spr_redraw_00121:
2191  0891  C9          	ret
2192  0892              	SECTION code_compiler
2193  0892              ;	---------------------------------
2194  0892              ; Function spr_destroy
2195  0892              ; ---------------------------------
2196  0892              _spr_destroy:
2197  0892  CD 00 00    	call	___sdcc_enter_ix
2198  0895  F5          	push	af
2199  0896  F5          	push	af
2200  0897  45          	ld	b, l
2201  0898  21 00 00    	ld	hl,_spr_count
2202  089B  35          	dec	(hl)
2203  089C  3E 00       	ld	a, +((_lin) & 0xFF)
2204  089E  80          	add	a, b
2205  089F  DD 77 FC    	ld	(ix-4),a
2206  08A2  3E 00       	ld	a, +((_lin) / 256)
2207  08A4  CE 00       	adc	a,0x00
2208  08A6  DD 77 FD    	ld	(ix-3),a
2209  08A9  E1          	pop	hl
2210  08AA  7E          	ld	a,(hl)
2211  08AB  E5          	push	hl
2212  08AC  32 00 00    	ld	(_s_lin0),a
2213  08AF  3E 00       	ld	a, +((_col) & 0xFF)
2214  08B1  80          	add	a, b
2215  08B2  DD 77 FE    	ld	(ix-2),a
2216  08B5  6F          	ld	l,a
2217  08B6  3E 00       	ld	a,+((_col) / 256)
2218  08B8  CE 00       	adc	a,0x00
2219  08BA  DD 77 FF    	ld	(ix-1),a
2220  08BD  67          	ld	h,a
2221  08BE  7E          	ld	a, (hl)
2222  08BF  32 00 00    	ld	(_s_col0),a
2223  08C2  C5          	push	bc
2224  08C3  F5          	push	af
2225  08C4  33          	inc	sp
2226  08C5  3A 00 00    	ld	a,(_s_lin0)
2227  08C8  F5          	push	af
2228  08C9  33          	inc	sp
2229  08CA  CD 00 00    	call	_spr_calc_index
2230  08CD  F1          	pop	af
2231  08CE  EB          	ex	de,hl
2232  08CF  C1          	pop	bc
2233  08D0  EB          	ex	de,hl
2234  08D1  22 00 00    	ld	(_index0),hl
2235  08D4  C5          	push	bc
2236  08D5  E5          	push	hl
2237  08D6  CD 00 00    	call	_game_match_back
2238  08D9  F1          	pop	af
2239  08DA  C1          	pop	bc
2240  08DB  7D          	ld	a,l
2241  08DC  32 00 00    	ld	(_s_tile0),a
2242  08DF  C5          	push	bc
2243  08E0  21 00 00    	ld	hl,0x0000
2244  08E3  E5          	push	hl
2245  08E4  48          	ld	c,b
2246  08E5  47          	ld	b,a
2247  08E6  C5          	push	bc
2248  08E7  CD 00 00    	call	_NIRVANAP_spriteT_callee
2249  08EA  CD B4 0A    	call	_spr_back_repaint
2250  08ED  C1          	pop	bc
2251  08EE  3E 00       	ld	a, +((_tile) & 0xFF)
2252  08F0  80          	add	a, b
2253  08F1  5F          	ld	e, a
2254  08F2  3E 00       	ld	a, +((_tile) / 256)
2255  08F4  CE 00       	adc	a,0x00
2256  08F6  57          	ld	d, a
2257  08F7  3A 00 00    	ld	a,(_s_tile0)
2258  08FA  12          	ld	(de), a
2259  08FB  DD 6E FE    	ld	l,(ix-2)
2260  08FE  DD 66 FF    	ld	h,(ix-1)
2261  0901  36 00       	ld	(hl),0x00
2262  0903  E1          	pop	hl
2263  0904  E5          	push	hl
2264  0905  36 00       	ld	(hl),0x00
2265  0907  11 00 00    	ld	de,_class+0
2266  090A  68          	ld	l,b
2267  090B  26 00       	ld	h,0x00
2268  090D  19          	add	hl, de
2269  090E  36 00       	ld	(hl),0x00
2270  0910  11 00 00    	ld	de,_state+0
2271  0913  68          	ld	l,b
2272  0914  26 00       	ld	h,0x00
2273  0916  19          	add	hl, de
2274  0917  36 00       	ld	(hl),0x00
2275  0919  11 00 00    	ld	de,_state_a+0
2276  091C  68          	ld	l,b
2277  091D  26 00       	ld	h,0x00
2278  091F  19          	add	hl, de
2279  0920  36 00       	ld	(hl),0x00
2280  0922  DD F9       	ld	sp, ix
2281  0924  DD E1       	pop	ix
2282  0926  C9          	ret
2283  0927              	SECTION code_compiler
2284  0927              ;	---------------------------------
2285  0927              ; Function spr_tile
2286  0927              ; ---------------------------------
2287  0927              _spr_tile:
2288  0927  45          	ld	b, l
2289  0928  21 00 00    	ld	hl,_tmp0
2290  092B  36 00       	ld	(hl),0x00
2291  092D  11 00 00    	ld	de,_class+0
2292  0930  68          	ld	l,b
2293  0931  26 00       	ld	h,0x00
2294  0933  19          	add	hl, de
2295  0934  4E          	ld	c, (hl)
2296  0935              l_spr_tile_00103:
2297  0935  21 00 00    	ld	hl,_tmp0
2298  0938  7E          	ld	a, (hl)
2299  0939  D6 10       	sub	a,0x10
2300  093B  30 3E       	jr	NC,l_spr_tile_00105
2301  093D  7E          	ld	a, (hl)
2302  093E  5F          	ld	e, a
2303  093F  87          	add	a, a
2304  0940  83          	add	a, e
2305  0941  21 00 00    	ld	hl,_tmp1
2306  0944  77          	ld	(hl), a
2307  0945  C6 00       	add	a,+((_spr_map_tile) & 0xFF)
2308  0947  5F          	ld	e, a
2309  0948  3E 00       	ld	a, +((_spr_map_tile) / 256)
2310  094A  CE 00       	adc	a,0x00
2311  094C  57          	ld	d, a
2312  094D  1A          	ld	a, (de)
2313  094E  5F          	ld	e, a
2314  094F  79          	ld	a, c
2315  0950  93          	sub	a, e
2316  0951  20 22       	jr	NZ,l_spr_tile_00102
2317  0953  6E          	ld	l,(hl)
2318  0954  26 00       	ld	h,0x00
2319  0956  5D          	ld	e,l
2320  0957  54          	ld	d,h
2321  0958  23          	inc	hl
2322  0959  23          	inc	hl
2323  095A  3E 00       	ld	a, +((_spr_map_tile) & 0xFF)
2324  095C  85          	add	a, l
2325  095D  6F          	ld	l, a
2326  095E  3E 00       	ld	a, +((_spr_map_tile) / 256)
2327  0960  8C          	adc	a, h
2328  0961  67          	ld	h, a
2329  0962  4E          	ld	c, (hl)
2330  0963  13          	inc	de
2331  0964  21 00 00    	ld	hl,_spr_map_tile
2332  0967  19          	add	hl, de
2333  0968  56          	ld	d, (hl)
2334  0969  79          	ld	a, c
2335  096A  F5          	push	af
2336  096B  33          	inc	sp
2337  096C  4A          	ld	c, d
2338  096D  C5          	push	bc
2339  096E  CD 7E 09    	call	_spr_tile_dir
2340  0971  F1          	pop	af
2341  0972  33          	inc	sp
2342  0973  18 08       	jr	l_spr_tile_00106
2343  0975              l_spr_tile_00102:
2344  0975  21 00 00    	ld	hl,_tmp0
2345  0978  34          	inc	(hl)
2346  0979  18 BA       	jr	l_spr_tile_00103
2347  097B              l_spr_tile_00105:
2348  097B  2E 00       	ld	l,0x00
2349  097D              l_spr_tile_00106:
2350  097D  C9          	ret
2351  097E              	SECTION code_compiler
2352  097E              ;	---------------------------------
2353  097E              ; Function spr_tile_dir
2354  097E              ; ---------------------------------
2355  097E              _spr_tile_dir:
2356  097E  CD 00 00    	call	___sdcc_enter_ix
2357  0981  3E 00       	ld	a, +((_state) & 0xFF)
2358  0983  DD 86 05    	add	a,(ix+5)
2359  0986  4F          	ld	c, a
2360  0987  3E 00       	ld	a, +((_state) / 256)
2361  0989  CE 00       	adc	a,0x00
2362  098B  47          	ld	b, a
2363  098C  0A          	ld	a, (bc)
2364  098D  4F          	ld	c,a
2365  098E  CB 57       	bit	2,a
2366  0990  28 05       	jr	Z,l_spr_tile_dir_00102
2367  0992  DD 6E 04    	ld	l,(ix+4)
2368  0995  18 2D       	jr	l_spr_tile_dir_00109
2369  0997              l_spr_tile_dir_00102:
2370  0997  DD 7E 04    	ld	a,(ix+4)
2371  099A  DD 86 06    	add	a,(ix+6)
2372  099D  47          	ld	b, a
2373  099E  CB 59       	bit	3, c
2374  09A0  28 03       	jr	Z,l_spr_tile_dir_00104
2375  09A2  68          	ld	l, b
2376  09A3  18 1F       	jr	l_spr_tile_dir_00109
2377  09A5              l_spr_tile_dir_00104:
2378  09A5  3E 00       	ld	a, +((_state_a) & 0xFF)
2379  09A7  DD 86 05    	add	a,(ix+5)
2380  09AA  5F          	ld	e, a
2381  09AB  3E 00       	ld	a, +((_state_a) / 256)
2382  09AD  CE 00       	adc	a,0x00
2383  09AF  57          	ld	d, a
2384  09B0  1A          	ld	a, (de)
2385  09B1  CB 67       	bit	4, a
2386  09B3  28 05       	jr	Z,l_spr_tile_dir_00106
2387  09B5  DD 6E 04    	ld	l,(ix+4)
2388  09B8  18 0A       	jr	l_spr_tile_dir_00109
2389  09BA              l_spr_tile_dir_00106:
2390  09BA  CB 5F       	bit	3, a
2391  09BC  28 03       	jr	Z,l_spr_tile_dir_00108
2392  09BE  68          	ld	l, b
2393  09BF  18 03       	jr	l_spr_tile_dir_00109
2394  09C1              l_spr_tile_dir_00108:
2395  09C1  DD 6E 04    	ld	l,(ix+4)
2396  09C4              l_spr_tile_dir_00109:
2397  09C4  DD E1       	pop	ix
2398  09C6  C9          	ret
2399  09C7              	SECTION code_compiler
2400  09C7              ;	---------------------------------
2401  09C7              ; Function spr_brick_anim
2402  09C7              ; ---------------------------------
2403  09C7              _spr_brick_anim:
2404  09C7  CD 00 00    	call	___sdcc_enter_ix
2405  09CA  F5          	push	af
2406  09CB  DD 75 FF    	ld	(ix-1),l
2407  09CE  21 00 00    	ld	hl,_player_hit_col
2408  09D1  46          	ld	b, (hl)
2409  09D2  21 00 00    	ld	hl,_player_hit_lin
2410  09D5  4E          	ld	c, (hl)
2411  09D6  C5          	push	bc
2412  09D7  C5          	push	bc
2413  09D8  CD 00 00    	call	_spr_calc_index
2414  09DB  F1          	pop	af
2415  09DC  C1          	pop	bc
2416  09DD  22 00 00    	ld	(_index1),hl
2417  09E0  11 F0 FF    	ld	de,0xfff0
2418  09E3  19          	add	hl,de
2419  09E4  11 00 00    	ld	de,_scr_map
2420  09E7  19          	add	hl, de
2421  09E8  7E          	ld	a, (hl)
2422  09E9  DD 77 FE    	ld	(ix-2),a
2423  09EC  11 00 00    	ld	de,_scr_map
2424  09EF  2A 00 00    	ld	hl,(_index1)
2425  09F2  19          	add	hl,de
2426  09F3  66          	ld	h, (hl)
2427  09F4  EB          	ex	de,hl
2428  09F5  DD 7E FF    	ld	a,(ix-1)
2429  09F8  B7          	or	a, a
2430  09F9  28 08       	jr	Z,l_spr_brick_anim_00102
2431  09FB  79          	ld	a, c
2432  09FC  C6 F6       	add	a,0xf6
2433  09FE  32 00 00    	ld	(_tmp),a
2434  0A01  18 06       	jr	l_spr_brick_anim_00103
2435  0A03              l_spr_brick_anim_00102:
2436  0A03  79          	ld	a, c
2437  0A04  C6 F8       	add	a,0xf8
2438  0A06  32 00 00    	ld	(_tmp),a
2439  0A09              l_spr_brick_anim_00103:
2440  0A09  F3          	di
2441  0A0A  DD 7E FF    	ld	a,(ix-1)
2442  0A0D  B7          	or	a, a
2443  0A0E  28 18       	jr	Z,l_spr_brick_anim_00105
2444  0A10  3A 00 00    	ld	a,(_map_paper_clr)
2445  0A13  C5          	push	bc
2446  0A14  D5          	push	de
2447  0A15  C5          	push	bc
2448  0A16  F5          	push	af
2449  0A17  33          	inc	sp
2450  0A18  CD 00 00    	call	_NIRVANAP_fillT_raw_callee
2451  0A1B  D1          	pop	de
2452  0A1C  33          	inc	sp
2453  0A1D  3A 00 00    	ld	a,(_tmp)
2454  0A20  5A          	ld	e,d
2455  0A21  57          	ld	d,a
2456  0A22  D5          	push	de
2457  0A23  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2458  0A26  18 1C       	jr	l_spr_brick_anim_00106
2459  0A28              l_spr_brick_anim_00105:
2460  0A28  3A 00 00    	ld	a,(_tmp)
2461  0A2B  C6 F0       	add	a,0xf0
2462  0A2D  C5          	push	bc
2463  0A2E  D5          	push	de
2464  0A2F  4F          	ld	c,a
2465  0A30  C5          	push	bc
2466  0A31  DD 7E FE    	ld	a,(ix-2)
2467  0A34  F5          	push	af
2468  0A35  33          	inc	sp
2469  0A36  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2470  0A39  D1          	pop	de
2471  0A3A  33          	inc	sp
2472  0A3B  3A 00 00    	ld	a,(_tmp)
2473  0A3E  5A          	ld	e,d
2474  0A3F  57          	ld	d,a
2475  0A40  D5          	push	de
2476  0A41  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2477  0A44              l_spr_brick_anim_00106:
2478  0A44  FB          	ei
2479  0A45  F1          	pop	af
2480  0A46  DD E1       	pop	ix
2481  0A48  C9          	ret
2482  0A49              	SECTION code_compiler
2483  0A49              ;	---------------------------------
2484  0A49              ; Function spr_draw_index
2485  0A49              ; ---------------------------------
2486  0A49              _spr_draw_index:
2487  0A49  CD 00 00    	call	___sdcc_enter_ix
2488  0A4C  DD 4E 04    	ld	c,(ix+4)
2489  0A4F  79          	ld	a, c
2490  0A50  E6 0F       	and	a,0x0f
2491  0A52  87          	add	a, a
2492  0A53  32 00 00    	ld	(_s_col1),a
2493  0A56  21 00 00    	ld	hl,_s_lin1
2494  0A59  71          	ld	(hl),c
2495  0A5A  79          	ld	a,c
2496  0A5B  07          	rlca
2497  0A5C  07          	rlca
2498  0A5D  07          	rlca
2499  0A5E  07          	rlca
2500  0A5F  E6 0F       	and	a,0x0f
2501  0A61  07          	rlca
2502  0A62  07          	rlca
2503  0A63  07          	rlca
2504  0A64  07          	rlca
2505  0A65  E6 F0       	and	a,0xf0
2506  0A67  77          	ld	(hl), a
2507  0A68  F3          	di
2508  0A69  3E 00       	ld	a, +((_scr_map) & 0xFF)
2509  0A6B  DD 86 04    	add	a,(ix+4)
2510  0A6E  4F          	ld	c, a
2511  0A6F  3E 00       	ld	a, +((_scr_map) / 256)
2512  0A71  DD 8E 05    	adc	a,(ix+5)
2513  0A74  47          	ld	b, a
2514  0A75  0A          	ld	a, (bc)
2515  0A76  47          	ld	b, a
2516  0A77  3A 00 00    	ld	a,(_s_col1)
2517  0A7A  F5          	push	af
2518  0A7B  33          	inc	sp
2519  0A7C  3A 00 00    	ld	a,(_s_lin1)
2520  0A7F  48          	ld	c,b
2521  0A80  47          	ld	b,a
2522  0A81  C5          	push	bc
2523  0A82  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2524  0A85  FB          	ei
2525  0A86  DD E1       	pop	ix
2526  0A88  C9          	ret
2527  0A89              	SECTION code_compiler
2528  0A89              ;	---------------------------------
2529  0A89              ; Function spr_calc_hor
2530  0A89              ; ---------------------------------
2531  0A89              _spr_calc_hor:
2532  0A89  CD 00 00    	call	___sdcc_enter_ix
2533  0A8C  3E 00       	ld	a, +((_col) & 0xFF)
2534  0A8E  DD 86 04    	add	a,(ix+4)
2535  0A91  4F          	ld	c, a
2536  0A92  3E 00       	ld	a, +((_col) / 256)
2537  0A94  CE 00       	adc	a,0x00
2538  0A96  47          	ld	b, a
2539  0A97  0A          	ld	a, (bc)
2540  0A98  5F          	ld	e, a
2541  0A99  3E 00       	ld	a, +((_sprite_frames) & 0xFF)
2542  0A9B  DD 86 04    	add	a,(ix+4)
2543  0A9E  4F          	ld	c, a
2544  0A9F  3E 00       	ld	a, +((_sprite_frames) / 256)
2545  0AA1  CE 00       	adc	a,0x00
2546  0AA3  47          	ld	b, a
2547  0AA4  0A          	ld	a, (bc)
2548  0AA5  67          	ld	h, a
2549  0AA6  2E 00       	ld	l,0x00
2550  0AA8  55          	ld	d, l
2551  0AA9  06 08       	ld	b,0x08
2552  0AAB              l_spr_calc_hor_00103:
2553  0AAB  29          	add	hl, hl
2554  0AAC  30 01       	jr	NC,l_spr_calc_hor_00104
2555  0AAE  19          	add	hl, de
2556  0AAF              l_spr_calc_hor_00104:
2557  0AAF  10 FA       	djnz	l_spr_calc_hor_00103
2558  0AB1  DD E1       	pop	ix
2559  0AB3  C9          	ret
2560  0AB4              	SECTION code_compiler
2561  0AB4              ;	---------------------------------
2562  0AB4              ; Function spr_back_repaint
2563  0AB4              ; ---------------------------------
2564  0AB4              _spr_back_repaint:
2565  0AB4  3A 00 00    	ld	a,(_spr_hack)
2566  0AB7  B7          	or	a, a
2567  0AB8  20 02       	jr	NZ,l_spr_back_repaint_00102
2568  0ABA  76          	halt
2569  0ABB  F3          	di
2570  0ABC              l_spr_back_repaint_00102:
2571  0ABC  2A FF FF    	ld	hl,(_s_col0 - 1)
2572  0ABF  3A 00 00    	ld	a,(_s_lin0)
2573  0AC2  6F          	ld	l,a
2574  0AC3  E5          	push	hl
2575  0AC4  CD 00 00    	call	_spr_calc_index
2576  0AC7  F1          	pop	af
2577  0AC8  7D          	ld	a,l
2578  0AC9  32 00 00    	ld	(_sprite_curr_index),a
2579  0ACC  21 00 00    	ld	hl,_s_lin0
2580  0ACF  7E          	ld	a, (hl)
2581  0AD0  E6 0F       	and	a,0x0f
2582  0AD2  4F          	ld	c, a
2583  0AD3  7E          	ld	a, (hl)
2584  0AD4  07          	rlca
2585  0AD5  07          	rlca
2586  0AD6  07          	rlca
2587  0AD7  07          	rlca
2588  0AD8  E6 0F       	and	a,0x0f
2589  0ADA  5F          	ld	e, a
2590  0ADB  21 00 00    	ld	hl,_s_col0
2591  0ADE  CB 46       	bit	0, (hl)
2592  0AE0  20 66       	jr	NZ,l_spr_back_repaint_00110
2593  0AE2  79          	ld	a, c
2594  0AE3  B7          	or	a, a
2595  0AE4  20 1D       	jr	NZ,l_spr_back_repaint_00104
2596  0AE6  2A 00 00    	ld	hl,(_sprite_curr_index)
2597  0AE9  26 00       	ld	h,0x00
2598  0AEB  01 00 00    	ld	bc,_scr_map
2599  0AEE  09          	add	hl,bc
2600  0AEF  46          	ld	b,(hl)
2601  0AF0  3A 00 00    	ld	a,(_s_col0)
2602  0AF3  F5          	push	af
2603  0AF4  33          	inc	sp
2604  0AF5  3A 00 00    	ld	a,(_s_lin0)
2605  0AF8  48          	ld	c,b
2606  0AF9  47          	ld	b,a
2607  0AFA  C5          	push	bc
2608  0AFB  CD 0C 0C    	call	_spr_tile_paint
2609  0AFE  F1          	pop	af
2610  0AFF  33          	inc	sp
2611  0B00  C3 05 0C    	jp	l_spr_back_repaint_00111
2612  0B03              l_spr_back_repaint_00104:
2613  0B03  7B          	ld	a, e
2614  0B04  07          	rlca
2615  0B05  07          	rlca
2616  0B06  07          	rlca
2617  0B07  07          	rlca
2618  0B08  E6 F0       	and	a,0xf0
2619  0B0A  47          	ld	b, a
2620  0B0B  2A 00 00    	ld	hl,(_sprite_curr_index)
2621  0B0E  26 00       	ld	h,0x00
2622  0B10  11 00 00    	ld	de,_scr_map
2623  0B13  19          	add	hl,de
2624  0B14  56          	ld	d, (hl)
2625  0B15  3A 00 00    	ld	a,(_s_col0)
2626  0B18  C5          	push	bc
2627  0B19  F5          	push	af
2628  0B1A  33          	inc	sp
2629  0B1B  4A          	ld	c, d
2630  0B1C  C5          	push	bc
2631  0B1D  CD 0C 0C    	call	_spr_tile_paint
2632  0B20  F1          	pop	af
2633  0B21  33          	inc	sp
2634  0B22  C1          	pop	bc
2635  0B23  78          	ld	a, b
2636  0B24  C6 10       	add	a,0x10
2637  0B26  57          	ld	d, a
2638  0B27  21 00 00    	ld	hl,_sprite_curr_index
2639  0B2A  7E          	ld	a, (hl)
2640  0B2B  C6 10       	add	a,0x10
2641  0B2D  77          	ld	(hl), a
2642  0B2E  C6 00       	add	a,+((_scr_map) & 0xFF)
2643  0B30  4F          	ld	c, a
2644  0B31  3E 00       	ld	a, +((_scr_map) / 256)
2645  0B33  CE 00       	adc	a,0x00
2646  0B35  47          	ld	b, a
2647  0B36  0A          	ld	a, (bc)
2648  0B37  47          	ld	b, a
2649  0B38  3A 00 00    	ld	a,(_s_col0)
2650  0B3B  5A          	ld	e,d
2651  0B3C  57          	ld	d,a
2652  0B3D  D5          	push	de
2653  0B3E  C5          	push	bc
2654  0B3F  33          	inc	sp
2655  0B40  CD 0C 0C    	call	_spr_tile_paint
2656  0B43  F1          	pop	af
2657  0B44  33          	inc	sp
2658  0B45  C3 05 0C    	jp	l_spr_back_repaint_00111
2659  0B48              l_spr_back_repaint_00110:
2660  0B48  21 00 00    	ld	hl,_s_col0
2661  0B4B  46          	ld	b, (hl)
2662  0B4C  05          	dec	b
2663  0B4D  79          	ld	a, c
2664  0B4E  B7          	or	a, a
2665  0B4F  20 39       	jr	NZ,l_spr_back_repaint_00107
2666  0B51  2A 00 00    	ld	hl,(_sprite_curr_index)
2667  0B54  26 00       	ld	h,0x00
2668  0B56  11 00 00    	ld	de,_scr_map
2669  0B59  19          	add	hl,de
2670  0B5A  56          	ld	d, (hl)
2671  0B5B  C5          	push	bc
2672  0B5C  33          	inc	sp
2673  0B5D  3A 00 00    	ld	a,(_s_lin0)
2674  0B60  5A          	ld	e,d
2675  0B61  57          	ld	d,a
2676  0B62  D5          	push	de
2677  0B63  CD 0C 0C    	call	_spr_tile_paint
2678  0B66  F1          	pop	af
2679  0B67  33          	inc	sp
2680  0B68  21 00 00    	ld	hl,_sprite_curr_index
2681  0B6B  34          	inc	(hl)
2682  0B6C  21 00 00    	ld	hl,_s_col0
2683  0B6F  46          	ld	b, (hl)
2684  0B70  04          	inc	b
2685  0B71  2A 00 00    	ld	hl,(_sprite_curr_index)
2686  0B74  26 00       	ld	h,0x00
2687  0B76  11 00 00    	ld	de,_scr_map
2688  0B79  19          	add	hl,de
2689  0B7A  56          	ld	d, (hl)
2690  0B7B  C5          	push	bc
2691  0B7C  33          	inc	sp
2692  0B7D  3A 00 00    	ld	a,(_s_lin0)
2693  0B80  5A          	ld	e,d
2694  0B81  57          	ld	d,a
2695  0B82  D5          	push	de
2696  0B83  CD 0C 0C    	call	_spr_tile_paint
2697  0B86  F1          	pop	af
2698  0B87  33          	inc	sp
2699  0B88  18 7B       	jr	l_spr_back_repaint_00111
2700  0B8A              l_spr_back_repaint_00107:
2701  0B8A  7B          	ld	a, e
2702  0B8B  07          	rlca
2703  0B8C  07          	rlca
2704  0B8D  07          	rlca
2705  0B8E  07          	rlca
2706  0B8F  E6 F0       	and	a,0xf0
2707  0B91  4F          	ld	c, a
2708  0B92  2A 00 00    	ld	hl,(_sprite_curr_index)
2709  0B95  26 00       	ld	h,0x00
2710  0B97  11 00 00    	ld	de,_scr_map
2711  0B9A  19          	add	hl,de
2712  0B9B  66          	ld	h, (hl)
2713  0B9C  EB          	ex	de,hl
2714  0B9D  C5          	push	bc
2715  0B9E  C5          	push	bc
2716  0B9F  D5          	push	de
2717  0BA0  33          	inc	sp
2718  0BA1  CD 0C 0C    	call	_spr_tile_paint
2719  0BA4  F1          	pop	af
2720  0BA5  33          	inc	sp
2721  0BA6  C1          	pop	bc
2722  0BA7  21 00 00    	ld	hl,_sprite_curr_index
2723  0BAA  34          	inc	(hl)
2724  0BAB  21 00 00    	ld	hl,_s_col0
2725  0BAE  46          	ld	b, (hl)
2726  0BAF  04          	inc	b
2727  0BB0  2A 00 00    	ld	hl,(_sprite_curr_index)
2728  0BB3  26 00       	ld	h,0x00
2729  0BB5  11 00 00    	ld	de,_scr_map
2730  0BB8  19          	add	hl,de
2731  0BB9  66          	ld	h, (hl)
2732  0BBA  EB          	ex	de,hl
2733  0BBB  C5          	push	bc
2734  0BBC  C5          	push	bc
2735  0BBD  D5          	push	de
2736  0BBE  33          	inc	sp
2737  0BBF  CD 0C 0C    	call	_spr_tile_paint
2738  0BC2  F1          	pop	af
2739  0BC3  33          	inc	sp
2740  0BC4  C1          	pop	bc
2741  0BC5  79          	ld	a, c
2742  0BC6  C6 10       	add	a,0x10
2743  0BC8  4F          	ld	c, a
2744  0BC9  21 00 00    	ld	hl,_sprite_curr_index
2745  0BCC  7E          	ld	a, (hl)
2746  0BCD  C6 0F       	add	a,0x0f
2747  0BCF  77          	ld	(hl), a
2748  0BD0  21 00 00    	ld	hl,_s_col0
2749  0BD3  46          	ld	b, (hl)
2750  0BD4  05          	dec	b
2751  0BD5  2A 00 00    	ld	hl,(_sprite_curr_index)
2752  0BD8  26 00       	ld	h,0x00
2753  0BDA  11 00 00    	ld	de,_scr_map
2754  0BDD  19          	add	hl,de
2755  0BDE  66          	ld	h, (hl)
2756  0BDF  EB          	ex	de,hl
2757  0BE0  C5          	push	bc
2758  0BE1  C5          	push	bc
2759  0BE2  D5          	push	de
2760  0BE3  33          	inc	sp
2761  0BE4  CD 0C 0C    	call	_spr_tile_paint
2762  0BE7  F1          	pop	af
2763  0BE8  33          	inc	sp
2764  0BE9  C1          	pop	bc
2765  0BEA  21 00 00    	ld	hl,_sprite_curr_index
2766  0BED  34          	inc	(hl)
2767  0BEE  21 00 00    	ld	hl,_s_col0
2768  0BF1  46          	ld	b, (hl)
2769  0BF2  04          	inc	b
2770  0BF3  2A 00 00    	ld	hl,(_sprite_curr_index)
2771  0BF6  26 00       	ld	h,0x00
2772  0BF8  11 00 00    	ld	de,_scr_map
2773  0BFB  19          	add	hl,de
2774  0BFC  66          	ld	h, (hl)
2775  0BFD  C5          	push	bc
2776  0BFE  E5          	push	hl
2777  0BFF  33          	inc	sp
2778  0C00  CD 0C 0C    	call	_spr_tile_paint
2779  0C03  F1          	pop	af
2780  0C04  33          	inc	sp
2781  0C05              l_spr_back_repaint_00111:
2782  0C05  3A 00 00    	ld	a,(_spr_hack)
2783  0C08  B7          	or	a, a
2784  0C09  C0          	ret	NZ
2785  0C0A  FB          	ei
2786  0C0B  C9          	ret
2787  0C0C              	SECTION code_compiler
2788  0C0C              ;	---------------------------------
2789  0C0C              ; Function spr_tile_paint
2790  0C0C              ; ---------------------------------
2791  0C0C              _spr_tile_paint:
2792  0C0C  CD 00 00    	call	___sdcc_enter_ix
2793  0C0F  DD 7E 04    	ld	a,(ix+4)
2794  0C12  B7          	or	a, a
2795  0C13  28 05       	jr	Z,l_spr_tile_paint_00101
2796  0C15  3C          	inc	a
2797  0C16  28 22       	jr	Z,l_spr_tile_paint_00105
2798  0C18  18 11       	jr	l_spr_tile_paint_00103
2799  0C1A              l_spr_tile_paint_00101:
2800  0C1A  DD 66 06    	ld	h,(ix+6)
2801  0C1D  DD 6E 05    	ld	l,(ix+5)
2802  0C20  3A 00 00    	ld	a,(_map_paper_clr)
2803  0C23  E5          	push	hl
2804  0C24  F5          	push	af
2805  0C25  33          	inc	sp
2806  0C26  CD 00 00    	call	_NIRVANAP_fillT_raw_callee
2807  0C29  18 0F       	jr	l_spr_tile_paint_00105
2808  0C2B              l_spr_tile_paint_00103:
2809  0C2B  DD 66 06    	ld	h,(ix+6)
2810  0C2E  DD 6E 05    	ld	l,(ix+5)
2811  0C31  E5          	push	hl
2812  0C32  DD 7E 04    	ld	a,(ix+4)
2813  0C35  F5          	push	af
2814  0C36  33          	inc	sp
2815  0C37  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2816  0C3A              l_spr_tile_paint_00105:
2817  0C3A  DD E1       	pop	ix
2818  0C3C  C9          	ret
2819  0C3D              	SECTION code_compiler
2820  0C3D              ;	---------------------------------
2821  0C3D              ; Function spr_init_anim_bullets
2822  0C3D              ; ---------------------------------
2823  0C3D              _spr_init_anim_bullets:
2824  0C3D  01 00 00    	ld	bc,_anim_lin+0
2825  0C40  1E 00       	ld	e,0x00
2826  0C42              l_spr_init_anim_bullets_00102:
2827  0C42  6B          	ld	l,e
2828  0C43  26 00       	ld	h,0x00
2829  0C45  09          	add	hl, bc
2830  0C46  36 FF       	ld	(hl),0xff
2831  0C48  16 00       	ld	d,0x00
2832  0C4A  21 00 00    	ld	hl,_bullet_col
2833  0C4D  19          	add	hl, de
2834  0C4E  36 FF       	ld	(hl),0xff
2835  0C50  1C          	inc	e
2836  0C51  7B          	ld	a, e
2837  0C52  D6 08       	sub	a,0x08
2838  0C54  38 EC       	jr	C,l_spr_init_anim_bullets_00102
2839  0C56  21 00 00    	ld	hl,_bullet_count
2840  0C59  36 00       	ld	(hl),0x00
2841  0C5B  21 00 00    	ld	hl,_anim_count
2842  0C5E  36 00       	ld	(hl),0x00
2843  0C60  C9          	ret
2844  0C61              	SECTION code_compiler
2845  0C61              ;	---------------------------------
2846  0C61              ; Function spr_add_anim
2847  0C61              ; ---------------------------------
2848  0C61              _spr_add_anim:
2849  0C61  CD 00 00    	call	___sdcc_enter_ix
2850  0C64  F5          	push	af
2851  0C65  F5          	push	af
2852  0C66  3B          	dec	sp
2853  0C67  DD 7E 05    	ld	a,(ix+5)
2854  0C6A  D6 1F       	sub	a,0x1f
2855  0C6C  D2 2B 0D    	jp	NC, l_spr_add_anim_00111
2856  0C6F  DD 7E 04    	ld	a,(ix+4)
2857  0C72  D6 B8       	sub	a,0xb8
2858  0C74  D2 2B 0D    	jp	NC, l_spr_add_anim_00111
2859  0C77  0E 00       	ld	c,0x00
2860  0C79  DD 71 FF    	ld	(ix-1),c
2861  0C7C              l_spr_add_anim_00109:
2862  0C7C  3E 00       	ld	a, +((_anim_lin) & 0xFF)
2863  0C7E  81          	add	a, c
2864  0C7F  5F          	ld	e, a
2865  0C80  3E 00       	ld	a, +((_anim_lin) / 256)
2866  0C82  CE 00       	adc	a,0x00
2867  0C84  57          	ld	d, a
2868  0C85  1A          	ld	a, (de)
2869  0C86  3C          	inc	a
2870  0C87  C2 21 0D    	jp	NZ,l_spr_add_anim_00110
2871  0C8A  21 00 00    	ld	hl,_anim_count
2872  0C8D  34          	inc	(hl)
2873  0C8E  DD 7E 04    	ld	a,(ix+4)
2874  0C91  12          	ld	(de), a
2875  0C92  01 00 00    	ld	bc,_anim_col
2876  0C95  DD 6E FF    	ld	l,(ix-1)
2877  0C98  26 00       	ld	h,0x00
2878  0C9A  09          	add	hl,bc
2879  0C9B  DD 75 FD    	ld	(ix-3),l
2880  0C9E  DD 74 FE    	ld	(ix-2),h
2881  0CA1  DD 7E 05    	ld	a,(ix+5)
2882  0CA4  77          	ld	(hl), a
2883  0CA5  3E 00       	ld	a, +((_anim_tile) & 0xFF)
2884  0CA7  DD 86 FF    	add	a,(ix-1)
2885  0CAA  DD 77 FB    	ld	(ix-5),a
2886  0CAD  3E 00       	ld	a, +((_anim_tile) / 256)
2887  0CAF  CE 00       	adc	a,0x00
2888  0CB1  DD 77 FC    	ld	(ix-4),a
2889  0CB4  E1          	pop	hl
2890  0CB5  E5          	push	hl
2891  0CB6  DD 7E 06    	ld	a,(ix+6)
2892  0CB9  77          	ld	(hl), a
2893  0CBA  3E 00       	ld	a, +((_anim_loop) & 0xFF)
2894  0CBC  DD 86 FF    	add	a,(ix-1)
2895  0CBF  4F          	ld	c, a
2896  0CC0  3E 00       	ld	a, +((_anim_loop) / 256)
2897  0CC2  CE 00       	adc	a,0x00
2898  0CC4  47          	ld	b, a
2899  0CC5  DD 7E 08    	ld	a,(ix+8)
2900  0CC8  02          	ld	(bc), a
2901  0CC9  01 00 00    	ld	bc,_anim_int+0
2902  0CCC  DD 6E FF    	ld	l,(ix-1)
2903  0CCF  26 00       	ld	h,0x00
2904  0CD1  09          	add	hl, bc
2905  0CD2  36 00       	ld	(hl),0x00
2906  0CD4  3E 00       	ld	a, +((_anim_end) & 0xFF)
2907  0CD6  DD 86 FF    	add	a,(ix-1)
2908  0CD9  4F          	ld	c, a
2909  0CDA  3E 00       	ld	a, +((_anim_end) / 256)
2910  0CDC  CE 00       	adc	a,0x00
2911  0CDE  47          	ld	b, a
2912  0CDF  DD 7E 07    	ld	a,(ix+7)
2913  0CE2  02          	ld	(bc), a
2914  0CE3  3E 00       	ld	a, +((_anim_respanwn) & 0xFF)
2915  0CE5  DD 86 FF    	add	a,(ix-1)
2916  0CE8  4F          	ld	c, a
2917  0CE9  3E 00       	ld	a, +((_anim_respanwn) / 256)
2918  0CEB  CE 00       	adc	a,0x00
2919  0CED  47          	ld	b, a
2920  0CEE  DD 7E 09    	ld	a,(ix+9)
2921  0CF1  02          	ld	(bc), a
2922  0CF2  F3          	di
2923  0CF3  DD 6E FD    	ld	l,(ix-3)
2924  0CF6  DD 66 FE    	ld	h,(ix-2)
2925  0CF9  46          	ld	b, (hl)
2926  0CFA  E1          	pop	hl
2927  0CFB  1A          	ld	a,(de)
2928  0CFC  56          	ld	d,(hl)
2929  0CFD  E5          	push	hl
2930  0CFE  C5          	push	bc
2931  0CFF  33          	inc	sp
2932  0D00  5A          	ld	e,d
2933  0D01  57          	ld	d,a
2934  0D02  D5          	push	de
2935  0D03  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2936  0D06  FB          	ei
2937  0D07  DD 66 05    	ld	h,(ix+5)
2938  0D0A  DD 6E 04    	ld	l,(ix+4)
2939  0D0D  E5          	push	hl
2940  0D0E  CD 00 00    	call	_spr_calc_index
2941  0D11  F1          	pop	af
2942  0D12  22 00 00    	ld	(_index0),hl
2943  0D15  01 00 00    	ld	bc,_scr_map
2944  0D18  09          	add	hl,bc
2945  0D19  7E          	ld	a,(hl)
2946  0D1A  B7          	or	a,a
2947  0D1B  20 0E       	jr	NZ,l_spr_add_anim_00111
2948  0D1D  36 FF       	ld	(hl),0xff
2949  0D1F  18 0A       	jr	l_spr_add_anim_00111
2950  0D21              l_spr_add_anim_00110:
2951  0D21  0C          	inc	c
2952  0D22  DD 71 FF    	ld	(ix-1),c
2953  0D25  79          	ld	a, c
2954  0D26  D6 08       	sub	a,0x08
2955  0D28  DA 7C 0C    	jp	C, l_spr_add_anim_00109
2956  0D2B              l_spr_add_anim_00111:
2957  0D2B  DD F9       	ld	sp, ix
2958  0D2D  DD E1       	pop	ix
2959  0D2F  C9          	ret
2960  0D30              	SECTION code_compiler
2961  0D30              ;	---------------------------------
2962  0D30              ; Function spr_play_anim
2963  0D30              ; ---------------------------------
2964  0D30              _spr_play_anim:
2965  0D30  CD 00 00    	call	___sdcc_enter_ix
2966  0D33  F5          	push	af
2967  0D34  F5          	push	af
2968  0D35  F5          	push	af
2969  0D36  3B          	dec	sp
2970  0D37  DD 36 F9 00 	ld	(ix-7),0x00
2971  0D3B              l_spr_play_anim_00114:
2972  0D3B  01 00 00    	ld	bc,_anim_lin
2973  0D3E  DD 6E F9    	ld	l,(ix-7)
2974  0D41  26 00       	ld	h,0x00
2975  0D43  09          	add	hl,bc
2976  0D44  DD 75 FE    	ld	(ix-2),l
2977  0D47  DD 74 FF    	ld	(ix-1),h
2978  0D4A  4E          	ld	c, (hl)
2979  0D4B  0C          	inc	c
2980  0D4C  CA 55 0E    	jp	Z,l_spr_play_anim_00115
2981  0D4F  21 01 00    	ld	hl,0x0001
2982  0D52  CD 00 00    	call	_z80_delay_ms_fastcall
2983  0D55  01 00 00    	ld	bc,_anim_int
2984  0D58  DD 6E F9    	ld	l,(ix-7)
2985  0D5B  26 00       	ld	h,0x00
2986  0D5D  09          	add	hl,bc
2987  0D5E  DD 75 FC    	ld	(ix-4),l
2988  0D61  DD 74 FD    	ld	(ix-3),h
2989  0D64  4E          	ld	c, (hl)
2990  0D65  3E 00       	ld	a, +((_anim_end) & 0xFF)
2991  0D67  DD 86 F9    	add	a,(ix-7)
2992  0D6A  6F          	ld	l, a
2993  0D6B  3E 00       	ld	a, +((_anim_end) / 256)
2994  0D6D  CE 00       	adc	a,0x00
2995  0D6F  67          	ld	h, a
2996  0D70  46          	ld	b, (hl)
2997  0D71  79          	ld	a, c
2998  0D72  90          	sub	a, b
2999  0D73  30 3D       	jr	NC,l_spr_play_anim_00109
3000  0D75  F3          	di
3001  0D76  3E 00       	ld	a, +((_anim_col) & 0xFF)
3002  0D78  DD 86 F9    	add	a,(ix-7)
3003  0D7B  6F          	ld	l, a
3004  0D7C  3E 00       	ld	a, +((_anim_col) / 256)
3005  0D7E  CE 00       	adc	a,0x00
3006  0D80  67          	ld	h, a
3007  0D81  56          	ld	d, (hl)
3008  0D82  DD 6E FE    	ld	l,(ix-2)
3009  0D85  DD 66 FF    	ld	h,(ix-1)
3010  0D88  46          	ld	b, (hl)
3011  0D89  3E 00       	ld	a, +((_anim_tile) & 0xFF)
3012  0D8B  DD 86 F9    	add	a,(ix-7)
3013  0D8E  6F          	ld	l, a
3014  0D8F  3E 00       	ld	a, +((_anim_tile) / 256)
3015  0D91  CE 00       	adc	a,0x00
3016  0D93  67          	ld	h, a
3017  0D94  4E          	ld	c, (hl)
3018  0D95  DD 6E FC    	ld	l,(ix-4)
3019  0D98  DD 66 FD    	ld	h,(ix-3)
3020  0D9B  5E          	ld	e, (hl)
3021  0D9C  79          	ld	a, c
3022  0D9D  83          	add	a, e
3023  0D9E  58          	ld	e,b
3024  0D9F  D5          	push	de
3025  0DA0  F5          	push	af
3026  0DA1  33          	inc	sp
3027  0DA2  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
3028  0DA5  FB          	ei
3029  0DA6  DD 6E FC    	ld	l,(ix-4)
3030  0DA9  DD 66 FD    	ld	h,(ix-3)
3031  0DAC  4E          	ld	c,(hl)
3032  0DAD  0C          	inc	c
3033  0DAE  71          	ld	(hl), c
3034  0DAF  C3 55 0E    	jp	l_spr_play_anim_00115
3035  0DB2              l_spr_play_anim_00109:
3036  0DB2  01 00 00    	ld	bc,_anim_loop
3037  0DB5  DD 6E F9    	ld	l,(ix-7)
3038  0DB8  26 00       	ld	h,0x00
3039  0DBA  09          	add	hl,bc
3040  0DBB  DD 75 FA    	ld	(ix-6),l
3041  0DBE  DD 74 FB    	ld	(ix-5),h
3042  0DC1  7E          	ld	a,(hl)
3043  0DC2  4F          	ld	c,a
3044  0DC3  B7          	or	a, a
3045  0DC4  C2 45 0E    	jp	NZ, l_spr_play_anim_00106
3046  0DC7  21 00 00    	ld	hl,_anim_count
3047  0DCA  35          	dec	(hl)
3048  0DCB  3E 00       	ld	a, +((_anim_col) & 0xFF)
3049  0DCD  DD 86 F9    	add	a,(ix-7)
3050  0DD0  6F          	ld	l, a
3051  0DD1  3E 00       	ld	a, +((_anim_col) / 256)
3052  0DD3  CE 00       	adc	a,0x00
3053  0DD5  67          	ld	h, a
3054  0DD6  7E          	ld	a, (hl)
3055  0DD7  32 00 00    	ld	(_s_col0),a
3056  0DDA  DD 6E FE    	ld	l,(ix-2)
3057  0DDD  DD 66 FF    	ld	h,(ix-1)
3058  0DE0  7E          	ld	a, (hl)
3059  0DE1  32 00 00    	ld	(_s_lin0),a
3060  0DE4  2A FF FF    	ld	hl,(_s_col0 - 1)
3061  0DE7  6F          	ld	l,a
3062  0DE8  E5          	push	hl
3063  0DE9  CD 00 00    	call	_spr_calc_index
3064  0DEC  F1          	pop	af
3065  0DED  2A FF FF    	ld	hl,(_s_col0 - 1)
3066  0DF0  3A 00 00    	ld	a,(_s_lin0)
3067  0DF3  6F          	ld	l,a
3068  0DF4  E5          	push	hl
3069  0DF5  CD 00 00    	call	_spr_calc_index
3070  0DF8  F1          	pop	af
3071  0DF9  01 00 00    	ld	bc,_scr_map
3072  0DFC  09          	add	hl,bc
3073  0DFD  4E          	ld	c, (hl)
3074  0DFE  0C          	inc	c
3075  0DFF  20 1F       	jr	NZ,l_spr_play_anim_00102
3076  0E01  2A FF FF    	ld	hl,(_s_col0 - 1)
3077  0E04  3A 00 00    	ld	a,(_s_lin0)
3078  0E07  6F          	ld	l,a
3079  0E08  E5          	push	hl
3080  0E09  CD 00 00    	call	_spr_calc_index
3081  0E0C  F1          	pop	af
3082  0E0D  22 00 00    	ld	(_index0),hl
3083  0E10  01 00 00    	ld	bc,_scr_map
3084  0E13  09          	add	hl,bc
3085  0E14  E5          	push	hl
3086  0E15  2A 00 00    	ld	hl,(_index0)
3087  0E18  E5          	push	hl
3088  0E19  CD 00 00    	call	_game_match_back
3089  0E1C  F1          	pop	af
3090  0E1D  C1          	pop	bc
3091  0E1E  7D          	ld	a,l
3092  0E1F  02          	ld	(bc), a
3093  0E20              l_spr_play_anim_00102:
3094  0E20  CD B4 0A    	call	_spr_back_repaint
3095  0E23  3E 00       	ld	a, +((_anim_respanwn) & 0xFF)
3096  0E25  DD 86 F9    	add	a,(ix-7)
3097  0E28  4F          	ld	c, a
3098  0E29  3E 00       	ld	a, +((_anim_respanwn) / 256)
3099  0E2B  CE 00       	adc	a,0x00
3100  0E2D  47          	ld	b, a
3101  0E2E  0A          	ld	a, (bc)
3102  0E2F  B7          	or	a, a
3103  0E30  28 09       	jr	Z,l_spr_play_anim_00104
3104  0E32  DD 7E F9    	ld	a,(ix-7)
3105  0E35  F5          	push	af
3106  0E36  33          	inc	sp
3107  0E37  CD 00 00    	call	_enemy_respawn
3108  0E3A  33          	inc	sp
3109  0E3B              l_spr_play_anim_00104:
3110  0E3B  DD 6E FE    	ld	l,(ix-2)
3111  0E3E  DD 66 FF    	ld	h,(ix-1)
3112  0E41  36 FF       	ld	(hl),0xff
3113  0E43  18 10       	jr	l_spr_play_anim_00115
3114  0E45              l_spr_play_anim_00106:
3115  0E45  0D          	dec	c
3116  0E46  DD 6E FA    	ld	l,(ix-6)
3117  0E49  DD 66 FB    	ld	h,(ix-5)
3118  0E4C  71          	ld	(hl), c
3119  0E4D  DD 6E FC    	ld	l,(ix-4)
3120  0E50  DD 66 FD    	ld	h,(ix-3)
3121  0E53  36 00       	ld	(hl),0x00
3122  0E55              l_spr_play_anim_00115:
3123  0E55  DD 34 F9    	inc	(ix-7)
3124  0E58  DD 7E F9    	ld	a,(ix-7)
3125  0E5B  D6 08       	sub	a,0x08
3126  0E5D  DA 3B 0D    	jp	C, l_spr_play_anim_00114
3127  0E60  DD F9       	ld	sp, ix
3128  0E62  DD E1       	pop	ix
3129  0E64  C9          	ret
3130  0E65              	SECTION code_compiler
3131  0E65              ;	---------------------------------
3132  0E65              ; Function spr_play_bullets
3133  0E65              ; ---------------------------------
3134  0E65              _spr_play_bullets:
3135  0E65  CD 00 00    	call	___sdcc_enter_ix
3136  0E68  21 F3 FF    	ld	hl, -13
3137  0E6B  39          	add	hl, sp
3138  0E6C  F9          	ld	sp, hl
3139  0E6D  3E 00       	ld	a,0x00
3140  0E6F  DD 77 F7    	ld	(ix-9),a
3141  0E72  DD 77 F5    	ld	(ix-11),a
3142  0E75              l_spr_play_bullets_00198:
3143  0E75  01 00 00    	ld	bc,_bullet_col
3144  0E78  DD 6E F5    	ld	l,(ix-11)
3145  0E7B  26 00       	ld	h,0x00
3146  0E7D  09          	add	hl,bc
3147  0E7E  DD 75 FC    	ld	(ix-4),l
3148  0E81  DD 74 FD    	ld	(ix-3),h
3149  0E84  7E          	ld	a,(hl)
3150  0E85  4F          	ld	c,a
3151  0E86  3C          	inc	a
3152  0E87  CA 14 14    	jp	Z,l_spr_play_bullets_00192
3153  0E8A  11 00 00    	ld	de,_bullet_lin
3154  0E8D  DD 6E F5    	ld	l,(ix-11)
3155  0E90  26 00       	ld	h,0x00
3156  0E92  19          	add	hl,de
3157  0E93  DD 75 FA    	ld	(ix-6),l
3158  0E96  DD 74 FB    	ld	(ix-5),h
3159  0E99  7E          	ld	a, (hl)
3160  0E9A  32 00 00    	ld	(_s_lin0),a
3161  0E9D  21 00 00    	ld	hl,_s_col0
3162  0EA0  71          	ld	(hl),c
3163  0EA1  DD 71 F4    	ld	(ix-12),c
3164  0EA4  CD B4 0A    	call	_spr_back_repaint
3165  0EA7  01 00 00    	ld	bc,_bullet_class
3166  0EAA  DD 6E F5    	ld	l,(ix-11)
3167  0EAD  26 00       	ld	h,0x00
3168  0EAF  09          	add	hl,bc
3169  0EB0  DD 75 F8    	ld	(ix-8),l
3170  0EB3  DD 74 F9    	ld	(ix-7),h
3171  0EB6  7E          	ld	a, (hl)
3172  0EB7  D6 02       	sub	a,0x02
3173  0EB9  20 46       	jr	NZ,l_spr_play_bullets_00107
3174  0EBB  3A 00 00    	ld	a,(_s_lin0)
3175  0EBE  4F          	ld	c,a
3176  0EBF  06 00       	ld	b,0x00
3177  0EC1  3E 00       	ld	a, +((_bullet_lin0) & 0xFF)
3178  0EC3  DD 86 F5    	add	a,(ix-11)
3179  0EC6  6F          	ld	l, a
3180  0EC7  3E 00       	ld	a, +((_bullet_lin0) / 256)
3181  0EC9  CE 00       	adc	a,0x00
3182  0ECB  67          	ld	h, a
3183  0ECC  5E          	ld	e, (hl)
3184  0ECD  16 00       	ld	d,0x00
3185  0ECF  79          	ld	a, c
3186  0ED0  93          	sub	a, e
3187  0ED1  4F          	ld	c, a
3188  0ED2  78          	ld	a, b
3189  0ED3  9A          	sbc	a, d
3190  0ED4  47          	ld	b, a
3191  0ED5  3E 08       	ld	a,0x08
3192  0ED7  B9          	cp	a, c
3193  0ED8  3E 00       	ld	a,0x00
3194  0EDA  98          	sbc	a, b
3195  0EDB  E2 E0 0E    	jp	PO, l_spr_play_bullets_00412
3196  0EDE  EE 80       	xor	a,0x80
3197  0EE0              l_spr_play_bullets_00412:
3198  0EE0  FA F9 0E    	jp	M, l_spr_play_bullets_00104
3199  0EE3  DD 6E FA    	ld	l,(ix-6)
3200  0EE6  DD 66 FB    	ld	h,(ix-5)
3201  0EE9  4E          	ld	c, (hl)
3202  0EEA  0C          	inc	c
3203  0EEB  0C          	inc	c
3204  0EEC  DD 6E FA    	ld	l,(ix-6)
3205  0EEF  DD 66 FB    	ld	h,(ix-5)
3206  0EF2  71          	ld	(hl), c
3207  0EF3  21 00 00    	ld	hl,_s_lin0
3208  0EF6  71          	ld	(hl), c
3209  0EF7  18 08       	jr	l_spr_play_bullets_00107
3210  0EF9              l_spr_play_bullets_00104:
3211  0EF9  DD 6E F8    	ld	l,(ix-8)
3212  0EFC  DD 66 F9    	ld	h,(ix-7)
3213  0EFF  36 03       	ld	(hl),0x03
3214  0F01              l_spr_play_bullets_00107:
3215  0F01  DD 6E F8    	ld	l,(ix-8)
3216  0F04  DD 66 F9    	ld	h,(ix-7)
3217  0F07  7E          	ld	a, (hl)
3218  0F08  D6 03       	sub	a,0x03
3219  0F0A  20 46       	jr	NZ,l_spr_play_bullets_00112
3220  0F0C  3E 00       	ld	a, +((_bullet_lin0) & 0xFF)
3221  0F0E  DD 86 F5    	add	a,(ix-11)
3222  0F11  6F          	ld	l, a
3223  0F12  3E 00       	ld	a, +((_bullet_lin0) / 256)
3224  0F14  CE 00       	adc	a,0x00
3225  0F16  67          	ld	h, a
3226  0F17  4E          	ld	c, (hl)
3227  0F18  06 00       	ld	b,0x00
3228  0F1A  3A 00 00    	ld	a,(_s_lin0)
3229  0F1D  5F          	ld	e,a
3230  0F1E  16 00       	ld	d,0x00
3231  0F20  79          	ld	a, c
3232  0F21  93          	sub	a, e
3233  0F22  4F          	ld	c, a
3234  0F23  78          	ld	a, b
3235  0F24  9A          	sbc	a, d
3236  0F25  47          	ld	b, a
3237  0F26  3E 08       	ld	a,0x08
3238  0F28  B9          	cp	a, c
3239  0F29  3E 00       	ld	a,0x00
3240  0F2B  98          	sbc	a, b
3241  0F2C  E2 31 0F    	jp	PO, l_spr_play_bullets_00415
3242  0F2F  EE 80       	xor	a,0x80
3243  0F31              l_spr_play_bullets_00415:
3244  0F31  FA 4A 0F    	jp	M, l_spr_play_bullets_00109
3245  0F34  DD 6E FA    	ld	l,(ix-6)
3246  0F37  DD 66 FB    	ld	h,(ix-5)
3247  0F3A  4E          	ld	c, (hl)
3248  0F3B  0D          	dec	c
3249  0F3C  0D          	dec	c
3250  0F3D  DD 6E FA    	ld	l,(ix-6)
3251  0F40  DD 66 FB    	ld	h,(ix-5)
3252  0F43  71          	ld	(hl), c
3253  0F44  21 00 00    	ld	hl,_s_lin0
3254  0F47  71          	ld	(hl), c
3255  0F48  18 08       	jr	l_spr_play_bullets_00112
3256  0F4A              l_spr_play_bullets_00109:
3257  0F4A  DD 6E F8    	ld	l,(ix-8)
3258  0F4D  DD 66 F9    	ld	h,(ix-7)
3259  0F50  36 02       	ld	(hl),0x02
3260  0F52              l_spr_play_bullets_00112:
3261  0F52  DD 6E F8    	ld	l,(ix-8)
3262  0F55  DD 66 F9    	ld	h,(ix-7)
3263  0F58  7E          	ld	a, (hl)
3264  0F59  D6 04       	sub	a,0x04
3265  0F5B  C2 E1 0F    	jp	NZ,l_spr_play_bullets_00125
3266  0F5E  DD 6E FA    	ld	l,(ix-6)
3267  0F61  DD 66 FB    	ld	h,(ix-5)
3268  0F64  7E          	ld	a, (hl)
3269  0F65  32 00 00    	ld	(_s_lin0),a
3270  0F68  DD 6E FC    	ld	l,(ix-4)
3271  0F6B  DD 66 FD    	ld	h,(ix-3)
3272  0F6E  7E          	ld	a, (hl)
3273  0F6F  C6 FF       	add	a,0xff
3274  0F71  32 00 00    	ld	(_s_col0),a
3275  0F74  D6 20       	sub	a,0x20
3276  0F76  30 03       	jr	NC,l_spr_play_bullets_00114
3277  0F78  CD B4 0A    	call	_spr_back_repaint
3278  0F7B              l_spr_play_bullets_00114:
3279  0F7B  3E 00       	ld	a, +((_bullet_vel) & 0xFF)
3280  0F7D  DD 86 F5    	add	a,(ix-11)
3281  0F80  4F          	ld	c, a
3282  0F81  3E 00       	ld	a, +((_bullet_vel) / 256)
3283  0F83  CE 00       	adc	a,0x00
3284  0F85  47          	ld	b, a
3285  0F86  0A          	ld	a, (bc)
3286  0F87  5F          	ld	e, a
3287  0F88  21 00 00    	ld	hl,_game_gravity
3288  0F8B  56          	ld	d, (hl)
3289  0F8C  7B          	ld	a, e
3290  0F8D  82          	add	a, d
3291  0F8E  5F          	ld	e,a
3292  0F8F  02          	ld	(bc), a
3293  0F90  3E 78       	ld	a,0x78
3294  0F92  93          	sub	a, e
3295  0F93  E2 98 0F    	jp	PO, l_spr_play_bullets_00418
3296  0F96  EE 80       	xor	a,0x80
3297  0F98              l_spr_play_bullets_00418:
3298  0F98  F2 9E 0F    	jp	P, l_spr_play_bullets_00116
3299  0F9B  3E 78       	ld	a,0x78
3300  0F9D  02          	ld	(bc), a
3301  0F9E              l_spr_play_bullets_00116:
3302  0F9E  0A          	ld	a, (bc)
3303  0F9F  EE 80       	xor	a,0x80
3304  0FA1  D6 08       	sub	a,0x08
3305  0FA3  30 03       	jr	NC,l_spr_play_bullets_00118
3306  0FA5  3E 88       	ld	a,0x88
3307  0FA7  02          	ld	(bc), a
3308  0FA8              l_spr_play_bullets_00118:
3309  0FA8  0A          	ld	a, (bc)
3310  0FA9  CB 47       	bit	0,a
3311  0FAB  32 00 00    	ld	(_s_lin1),a
3312  0FAE  28 04       	jr	Z,l_spr_play_bullets_00120
3313  0FB0  21 00 00    	ld	hl,_s_lin1
3314  0FB3  35          	dec	(hl)
3315  0FB4              l_spr_play_bullets_00120:
3316  0FB4  DD 6E FA    	ld	l,(ix-6)
3317  0FB7  DD 66 FB    	ld	h,(ix-5)
3318  0FBA  7E          	ld	a, (hl)
3319  0FBB  21 00 00    	ld	hl,_s_lin1
3320  0FBE  86          	add	a, (hl)
3321  0FBF  21 00 00    	ld	hl,_s_lin0
3322  0FC2  77          	ld	(hl), a
3323  0FC3  3E 90       	ld	a,0x90
3324  0FC5  96          	sub	a, (hl)
3325  0FC6  30 0F       	jr	NC,l_spr_play_bullets_00122
3326  0FC8  21 00 00    	ld	hl,_bullet_count
3327  0FCB  35          	dec	(hl)
3328  0FCC  DD 6E FC    	ld	l,(ix-4)
3329  0FCF  DD 66 FD    	ld	h,(ix-3)
3330  0FD2  36 FF       	ld	(hl),0xff
3331  0FD4  C3 14 14    	jp	l_spr_play_bullets_00192
3332  0FD7              l_spr_play_bullets_00122:
3333  0FD7  DD 6E FA    	ld	l,(ix-6)
3334  0FDA  DD 66 FB    	ld	h,(ix-5)
3335  0FDD  3A 00 00    	ld	a,(_s_lin0)
3336  0FE0  77          	ld	(hl),a
3337  0FE1              l_spr_play_bullets_00125:
3338  0FE1  3E 00       	ld	a, +((_bullet_dir) & 0xFF)
3339  0FE3  DD 86 F5    	add	a,(ix-11)
3340  0FE6  6F          	ld	l, a
3341  0FE7  3E 00       	ld	a, +((_bullet_dir) / 256)
3342  0FE9  CE 00       	adc	a,0x00
3343  0FEB  67          	ld	h, a
3344  0FEC  4E          	ld	c, (hl)
3345  0FED  0C          	inc	c
3346  0FEE  20 3D       	jr	NZ,l_spr_play_bullets_00135
3347  0FF0  3E 00       	ld	a, +((_bullet_colint) & 0xFF)
3348  0FF2  DD 86 F5    	add	a,(ix-11)
3349  0FF5  4F          	ld	c, a
3350  0FF6  3E 00       	ld	a, +((_bullet_colint) / 256)
3351  0FF8  CE 00       	adc	a,0x00
3352  0FFA  47          	ld	b, a
3353  0FFB  0A          	ld	a, (bc)
3354  0FFC  3C          	inc	a
3355  0FFD  5F          	ld	e,a
3356  0FFE  02          	ld	(bc), a
3357  0FFF  3E 00       	ld	a, +((_bullet_frames) & 0xFF)
3358  1001  DD 86 F5    	add	a,(ix-11)
3359  1004  6F          	ld	l, a
3360  1005  3E 00       	ld	a, +((_bullet_frames) / 256)
3361  1007  CE 00       	adc	a,0x00
3362  1009  67          	ld	h, a
3363  100A  56          	ld	d, (hl)
3364  100B  7B          	ld	a, e
3365  100C  92          	sub	a, d
3366  100D  38 63       	jr	C,l_spr_play_bullets_00136
3367  100F  DD 6E FC    	ld	l,(ix-4)
3368  1012  DD 66 FD    	ld	h,(ix-3)
3369  1015  7E          	ld	a, (hl)
3370  1016  3C          	inc	a
3371  1017  DD 77 F4    	ld	(ix-12),a
3372  101A  AF          	xor	a, a
3373  101B  02          	ld	(bc), a
3374  101C  DD 7E F4    	ld	a,(ix-12)
3375  101F  E6 01       	and	a,0x01
3376  1021  3D          	dec	a
3377  1022  20 4E       	jr	NZ,l_spr_play_bullets_00136
3378  1024  DD 7E F4    	ld	a,(ix-12)
3379  1027  3C          	inc	a
3380  1028  32 00 00    	ld	(_s_col0),a
3381  102B  18 45       	jr	l_spr_play_bullets_00136
3382  102D              l_spr_play_bullets_00135:
3383  102D  01 00 00    	ld	bc,_bullet_colint
3384  1030  DD 6E F5    	ld	l,(ix-11)
3385  1033  26 00       	ld	h,0x00
3386  1035  09          	add	hl,bc
3387  1036  DD 75 FE    	ld	(ix-2),l
3388  1039  DD 74 FF    	ld	(ix-1),h
3389  103C  4E          	ld	c,(hl)
3390  103D  0D          	dec	c
3391  103E  71          	ld	(hl), c
3392  103F  0C          	inc	c
3393  1040  20 30       	jr	NZ,l_spr_play_bullets_00136
3394  1042  DD 6E FC    	ld	l,(ix-4)
3395  1045  DD 66 FD    	ld	h,(ix-3)
3396  1048  7E          	ld	a, (hl)
3397  1049  C6 FF       	add	a,0xff
3398  104B  DD 77 F4    	ld	(ix-12),a
3399  104E  3E 00       	ld	a, +((_bullet_frames) & 0xFF)
3400  1050  DD 86 F5    	add	a,(ix-11)
3401  1053  6F          	ld	l, a
3402  1054  3E 00       	ld	a, +((_bullet_frames) / 256)
3403  1056  CE 00       	adc	a,0x00
3404  1058  67          	ld	h, a
3405  1059  4E          	ld	c, (hl)
3406  105A  0D          	dec	c
3407  105B  DD 6E FE    	ld	l,(ix-2)
3408  105E  DD 66 FF    	ld	h,(ix-1)
3409  1061  71          	ld	(hl), c
3410  1062  DD 7E F4    	ld	a,(ix-12)
3411  1065  E6 01       	and	a,0x01
3412  1067  3D          	dec	a
3413  1068  20 08       	jr	NZ,l_spr_play_bullets_00136
3414  106A  DD 7E F4    	ld	a,(ix-12)
3415  106D  C6 FF       	add	a,0xff
3416  106F  32 00 00    	ld	(_s_col0),a
3417  1072              l_spr_play_bullets_00136:
3418  1072  21 00 00    	ld	hl,_tmp1
3419  1075  36 00       	ld	(hl),0x00
3420  1077  3E 00       	ld	a, +((_bullet_max) & 0xFF)
3421  1079  DD 86 F5    	add	a,(ix-11)
3422  107C  4F          	ld	c, a
3423  107D  3E 00       	ld	a, +((_bullet_max) / 256)
3424  107F  CE 00       	adc	a,0x00
3425  1081  47          	ld	b, a
3426  1082  0A          	ld	a, (bc)
3427  1083  B7          	or	a, a
3428  1084  28 27       	jr	Z,l_spr_play_bullets_00140
3429  1086  DD 5E F4    	ld	e,(ix-12)
3430  1089  16 00       	ld	d,0x00
3431  108B  3E 00       	ld	a, +((_bullet_col0) & 0xFF)
3432  108D  DD 86 F5    	add	a,(ix-11)
3433  1090  6F          	ld	l, a
3434  1091  3E 00       	ld	a, +((_bullet_col0) / 256)
3435  1093  CE 00       	adc	a,0x00
3436  1095  67          	ld	h, a
3437  1096  6E          	ld	l, (hl)
3438  1097  AF          	xor	a,a
3439  1098  67          	ld	h,a
3440  1099  EB          	ex	de,hl
3441  109A  ED 52       	sbc	hl,de
3442  109C  CD 00 00    	call	_abs_fastcall
3443  109F  5D          	ld	e, l
3444  10A0  21 00 00    	ld	hl,_tmp0
3445  10A3  73          	ld	(hl), e
3446  10A4  0A          	ld	a, (bc)
3447  10A5  96          	sub	a, (hl)
3448  10A6  30 05       	jr	NC,l_spr_play_bullets_00140
3449  10A8  21 00 00    	ld	hl,_tmp1
3450  10AB  36 01       	ld	(hl),0x01
3451  10AD              l_spr_play_bullets_00140:
3452  10AD  DD 7E F4    	ld	a,(ix-12)
3453  10B0  D6 1E       	sub	a,0x1e
3454  10B2  38 05       	jr	C,l_spr_play_bullets_00142
3455  10B4  21 00 00    	ld	hl,_tmp1
3456  10B7  36 01       	ld	(hl),0x01
3457  10B9              l_spr_play_bullets_00142:
3458  10B9  3A 00 00    	ld	a,(_tmp1)
3459  10BC  B7          	or	a, a
3460  10BD  28 0F       	jr	Z,l_spr_play_bullets_00144
3461  10BF  21 00 00    	ld	hl,_bullet_count
3462  10C2  35          	dec	(hl)
3463  10C3  DD 6E FC    	ld	l,(ix-4)
3464  10C6  DD 66 FD    	ld	h,(ix-3)
3465  10C9  36 FF       	ld	(hl),0xff
3466  10CB  C3 14 14    	jp	l_spr_play_bullets_00192
3467  10CE              l_spr_play_bullets_00144:
3468  10CE  DD 7E FC    	ld	a,(ix-4)
3469  10D1  DD 77 FE    	ld	(ix-2),a
3470  10D4  DD 7E FD    	ld	a,(ix-3)
3471  10D7  DD 77 FF    	ld	(ix-1),a
3472  10DA  DD 6E FC    	ld	l,(ix-4)
3473  10DD  DD 66 FD    	ld	h,(ix-3)
3474  10E0  DD 7E F4    	ld	a,(ix-12)
3475  10E3  96          	sub	a,(hl)
3476  10E4  CA D8 13    	jp	Z,l_spr_play_bullets_00187
3477  10E7  3A 00 00    	ld	a,(_s_lin0)
3478  10EA  C6 08       	add	a,0x08
3479  10EC  4F          	ld	c, a
3480  10ED  3A 00 00    	ld	a, (_s_col0)
3481  10F0  47          	ld	b,a
3482  10F1  C5          	push	bc
3483  10F2  CD 00 00    	call	_spr_calc_index
3484  10F5  F1          	pop	af
3485  10F6  22 00 00    	ld	(_index0),hl
3486  10F9  01 00 00    	ld	bc,_scr_map
3487  10FC  09          	add	hl,bc
3488  10FD  5E          	ld	e,(hl)
3489  10FE  DD 7E F5    	ld	a,(ix-11)
3490  1101  D6 07       	sub	a,0x07
3491  1103  4D          	ld	c,l
3492  1104  44          	ld	b,h
3493  1105  20 04       	jr	NZ,l_spr_play_bullets_00429
3494  1107  3E 01       	ld	a,0x01
3495  1109  18 01       	jr	l_spr_play_bullets_00430
3496  110B              l_spr_play_bullets_00429:
3497  110B  AF          	xor	a,a
3498  110C              l_spr_play_bullets_00430:
3499  110C  57          	ld	d, a
3500  110D  7B          	ld	a, e
3501  110E  D6 4D       	sub	a,0x4d
3502  1110  20 45       	jr	NZ,l_spr_play_bullets_00146
3503  1112  B2          	or	a,d
3504  1113  28 42       	jr	Z,l_spr_play_bullets_00146
3505  1115  2A 00 00    	ld	hl,(_index0)
3506  1118  C5          	push	bc
3507  1119  E5          	push	hl
3508  111A  CD 00 00    	call	_game_match_back
3509  111D  F1          	pop	af
3510  111E  C1          	pop	bc
3511  111F  7D          	ld	a,l
3512  1120  02          	ld	(bc), a
3513  1121  2A 00 00    	ld	hl,(_index0)
3514  1124  CD 00 00    	call	_game_obj_set
3515  1127  2A 00 00    	ld	hl,(_index0)
3516  112A  4D          	ld	c,l
3517  112B  5C          	ld	e,h
3518  112C  06 04       	ld	b,0x04
3519  112E  79          	ld	a,c
3520  112F              l_spr_play_bullets_00433:
3521  112F  CB 3B       	srl	e
3522  1131  1F          	rra
3523  1132  10 FB       	djnz	l_spr_play_bullets_00433
3524  1134  07          	rlca
3525  1135  07          	rlca
3526  1136  07          	rlca
3527  1137  07          	rlca
3528  1138  E6 F0       	and	a,0xf0
3529  113A  DD 6E FA    	ld	l,(ix-6)
3530  113D  DD 66 FB    	ld	h,(ix-5)
3531  1140  77          	ld	(hl), a
3532  1141  3A 00 00    	ld	a,(_index0)
3533  1144  E6 0F       	and	a,0x0f
3534  1146  87          	add	a, a
3535  1147  DD 6E FC    	ld	l,(ix-4)
3536  114A  DD 66 FD    	ld	h,(ix-3)
3537  114D  77          	ld	(hl), a
3538  114E  DD 6E F5    	ld	l,(ix-11)
3539  1151  CD 27 14    	call	_spr_explode_bullet
3540  1154  C3 14 14    	jp	l_spr_play_bullets_00192
3541  1157              l_spr_play_bullets_00146:
3542  1157  7B          	ld	a, e
3543  1158  D6 48       	sub	a,0x48
3544  115A  38 0C       	jr	C,l_spr_play_bullets_00149
3545  115C  1C          	inc	e
3546  115D  28 09       	jr	Z,l_spr_play_bullets_00149
3547  115F  DD 6E F5    	ld	l,(ix-11)
3548  1162  CD 27 14    	call	_spr_explode_bullet
3549  1165  C3 14 14    	jp	l_spr_play_bullets_00192
3550  1168              l_spr_play_bullets_00149:
3551  1168  DD 6E FC    	ld	l,(ix-4)
3552  116B  DD 66 FD    	ld	h,(ix-3)
3553  116E  DD 7E F4    	ld	a,(ix-12)
3554  1171  77          	ld	(hl), a
3555  1172  DD 6E F8    	ld	l,(ix-8)
3556  1175  DD 66 F9    	ld	h,(ix-7)
3557  1178  7E          	ld	a, (hl)
3558  1179  D6 04       	sub	a,0x04
3559  117B  20 19       	jr	NZ,l_spr_play_bullets_00152
3560  117D  21 00 00    	ld	hl,_s_lin0
3561  1180  7E          	ld	a, (hl)
3562  1181  C6 F0       	add	a,0xf0
3563  1183  4F          	ld	c, a
3564  1184  7E          	ld	a, (hl)
3565  1185  C6 10       	add	a,0x10
3566  1187  DD 77 F3    	ld	(ix-13),a
3567  118A  DD 35 F4    	dec	(ix-12)
3568  118D  DD 7E F4    	ld	a,(ix-12)
3569  1190  3C          	inc	a
3570  1191  DD 77 F6    	ld	(ix-10),a
3571  1194  18 14       	jr	l_spr_play_bullets_00153
3572  1196              l_spr_play_bullets_00152:
3573  1196  21 00 00    	ld	hl,_s_lin0
3574  1199  7E          	ld	a, (hl)
3575  119A  C6 F8       	add	a,0xf8
3576  119C  4F          	ld	c, a
3577  119D  7E          	ld	a, (hl)
3578  119E  C6 08       	add	a,0x08
3579  11A0  DD 77 F3    	ld	(ix-13),a
3580  11A3  DD 7E F4    	ld	a,(ix-12)
3581  11A6  3C          	inc	a
3582  11A7  DD 77 F6    	ld	(ix-10),a
3583  11AA              l_spr_play_bullets_00153:
3584  11AA  7A          	ld	a, d
3585  11AB  B7          	or	a, a
3586  11AC  CA 9A 13    	jp	Z, l_spr_play_bullets_00184
3587  11AF  21 00 00    	ld	hl,_tmp0
3588  11B2  36 00       	ld	(hl),0x00
3589  11B4              l_spr_play_bullets_00194:
3590  11B4  2A 00 00    	ld	hl,(_tmp0)
3591  11B7  26 00       	ld	h,0x00
3592  11B9  11 00 00    	ld	de,_class
3593  11BC  19          	add	hl,de
3594  11BD  7E          	ld	a,(hl)
3595  11BE  B7          	or	a,a
3596  11BF  CA 65 12    	jp	Z,l_spr_play_bullets_00195
3597  11C2  3A 07 00    	ld	a,(_bullet_col + 0x0007)
3598  11C5  3C          	inc	a
3599  11C6  CA 65 12    	jp	Z,l_spr_play_bullets_00195
3600  11C9  2A 00 00    	ld	hl,(_tmp0)
3601  11CC  26 00       	ld	h,0x00
3602  11CE  11 00 00    	ld	de,_lin
3603  11D1  19          	add	hl,de
3604  11D2  7E          	ld	a,(hl)
3605  11D3  47          	ld	b,a
3606  11D4  91          	sub	a,c
3607  11D5  DA 65 12    	jp	C,l_spr_play_bullets_00195
3608  11D8  21 00 00    	ld	hl,_tmp0
3609  11DB  DD 7E F3    	ld	a,(ix-13)
3610  11DE  90          	sub	a, b
3611  11DF  DA 65 12    	jp	C, l_spr_play_bullets_00195
3612  11E2  5E          	ld	e,(hl)
3613  11E3  16 00       	ld	d,0x00
3614  11E5  21 00 00    	ld	hl,_col
3615  11E8  19          	add	hl,de
3616  11E9  7E          	ld	a,(hl)
3617  11EA  5F          	ld	e,a
3618  11EB  DD 96 F4    	sub	a,(ix-12)
3619  11EE  38 75       	jr	C,l_spr_play_bullets_00195
3620  11F0  DD 7E F6    	ld	a,(ix-10)
3621  11F3  93          	sub	a, e
3622  11F4  38 6F       	jr	C,l_spr_play_bullets_00195
3623  11F6  21 00 00    	ld	hl,_s_lin0
3624  11F9  70          	ld	(hl), b
3625  11FA  21 00 00    	ld	hl,_s_col0
3626  11FD  73          	ld	(hl), e
3627  11FE  C5          	push	bc
3628  11FF  CD 00 00    	call	_rand
3629  1202  11 06 00    	ld	de,0x0006
3630  1205  D5          	push	de
3631  1206  E5          	push	hl
3632  1207  CD 00 00    	call	__modsint_callee
3633  120A  CD 00 00    	call	_player_score_add
3634  120D  C1          	pop	bc
3635  120E  2A 00 00    	ld	hl,(_tmp0)
3636  1211  26 00       	ld	h,0x00
3637  1213  29          	add	hl,hl
3638  1214  11 00 00    	ld	de,_game_respawn_time
3639  1217  19          	add	hl, de
3640  1218  DD 75 F8    	ld	(ix-8),l
3641  121B  DD 74 F9    	ld	(ix-7),h
3642  121E  ED 5B 00 00 	ld	de,(_curr_time)
3643  1222  73          	ld	(hl), e
3644  1223  23          	inc	hl
3645  1224  72          	ld	(hl), d
3646  1225  2A 00 00    	ld	hl,(_tmp0)
3647  1228  C5          	push	bc
3648  1229  CD 92 08    	call	_spr_destroy
3649  122C  C1          	pop	bc
3650  122D  2A 00 00    	ld	hl,(_tmp0)
3651  1230  26 00       	ld	h,0x00
3652  1232  11 00 00    	ld	de,_bullet_col
3653  1235  19          	add	hl,de
3654  1236  7E          	ld	a,(hl)
3655  1237  47          	ld	b,a
3656  1238  3C          	inc	a
3657  1239  28 17       	jr	Z,l_spr_play_bullets_00155
3658  123B  3A 00 00    	ld	a,(_tmp0)
3659  123E  5F          	ld	e,a
3660  123F  16 00       	ld	d,0x00
3661  1241  21 00 00    	ld	hl,_bullet_lin
3662  1244  19          	add	hl,de
3663  1245  7E          	ld	a,(hl)
3664  1246  32 00 00    	ld	(_s_lin0),a
3665  1249  21 00 00    	ld	hl,_s_col0
3666  124C  70          	ld	(hl), b
3667  124D  C5          	push	bc
3668  124E  CD B4 0A    	call	_spr_back_repaint
3669  1251  C1          	pop	bc
3670  1252              l_spr_play_bullets_00155:
3671  1252  3A 00 00    	ld	a,(_s_col0)
3672  1255  32 07 00    	ld	((_bullet_col + 0x0007)),a
3673  1258  C5          	push	bc
3674  1259  2E 07       	ld	l,0x07
3675  125B  CD 27 14    	call	_spr_explode_bullet
3676  125E  C1          	pop	bc
3677  125F  21 00 00    	ld	hl,_ay_effect_02
3678  1262  CD 00 00    	call	_ay_fx_play
3679  1265              l_spr_play_bullets_00195:
3680  1265  21 00 00    	ld	hl,_tmp0
3681  1268  7E          	ld	a,(hl)
3682  1269  3C          	inc	a
3683  126A  77          	ld	(hl),a
3684  126B  D6 07       	sub	a,0x07
3685  126D  DA B4 11    	jp	C, l_spr_play_bullets_00194
3686  1270  3A 00 00    	ld	a,(_game_boss)
3687  1273  B7          	or	a, a
3688  1274  CA D8 13    	jp	Z, l_spr_play_bullets_00187
3689  1277  21 00 00    	ld	hl,_boss_lin
3690  127A  7E          	ld	a, (hl)
3691  127B  91          	sub	a, c
3692  127C  38 06       	jr	C,l_spr_play_bullets_00173
3693  127E  DD 7E F3    	ld	a,(ix-13)
3694  1281  96          	sub	a, (hl)
3695  1282  30 28       	jr	NC,l_spr_play_bullets_00174
3696  1284              l_spr_play_bullets_00173:
3697  1284  3A 00 00    	ld	a,(_boss_lin)
3698  1287  5F          	ld	e,a
3699  1288  16 00       	ld	d,0x00
3700  128A  21 10 00    	ld	hl,0x0010
3701  128D  19          	add	hl, de
3702  128E  06 00       	ld	b,0x00
3703  1290  7D          	ld	a, l
3704  1291  91          	sub	a, c
3705  1292  7C          	ld	a, h
3706  1293  98          	sbc	a, b
3707  1294  E2 99 12    	jp	PO, l_spr_play_bullets_00441
3708  1297  EE 80       	xor	a,0x80
3709  1299              l_spr_play_bullets_00441:
3710  1299  FA D8 13    	jp	M, l_spr_play_bullets_00187
3711  129C  DD 7E F3    	ld	a,(ix-13)
3712  129F  06 00       	ld	b,0x00
3713  12A1  95          	sub	a, l
3714  12A2  78          	ld	a, b
3715  12A3  9C          	sbc	a, h
3716  12A4  E2 A9 12    	jp	PO, l_spr_play_bullets_00442
3717  12A7  EE 80       	xor	a,0x80
3718  12A9              l_spr_play_bullets_00442:
3719  12A9  FA D8 13    	jp	M, l_spr_play_bullets_00187
3720  12AC              l_spr_play_bullets_00174:
3721  12AC  21 00 00    	ld	hl,_boss_col
3722  12AF  7E          	ld	a, (hl)
3723  12B0  DD 96 F4    	sub	a,(ix-12)
3724  12B3  DA D8 13    	jp	C, l_spr_play_bullets_00187
3725  12B6  DD 7E F6    	ld	a,(ix-10)
3726  12B9  96          	sub	a, (hl)
3727  12BA  DA D8 13    	jp	C, l_spr_play_bullets_00187
3728  12BD  DD 6E F5    	ld	l,(ix-11)
3729  12C0  CD 27 14    	call	_spr_explode_bullet
3730  12C3  21 00 00    	ld	hl,_game_boss_hit
3731  12C6  35          	dec	(hl)
3732  12C7  CD 00 00    	call	_game_update_stats
3733  12CA  3A 00 00    	ld	a,(_game_boss_hit)
3734  12CD  B7          	or	a, a
3735  12CE  C2 D8 13    	jp	NZ, l_spr_play_bullets_00187
3736  12D1  21 00 00    	ld	hl,_game_boss
3737  12D4  36 00       	ld	(hl),0x00
3738  12D6  21 00 00    	ld	hl,_game_boss_alive
3739  12D9  36 00       	ld	(hl),0x00
3740  12DB  3A 00 00    	ld	a,(_boss_col)
3741  12DE  21 00 00    	ld	hl,0x0000
3742  12E1  E5          	push	hl
3743  12E2  21 87 03    	ld	hl,0x0387
3744  12E5  E5          	push	hl
3745  12E6  F5          	push	af
3746  12E7  33          	inc	sp
3747  12E8  3A 00 00    	ld	a,(_boss_lin)
3748  12EB  F5          	push	af
3749  12EC  33          	inc	sp
3750  12ED  CD 61 0C    	call	_spr_add_anim
3751  12F0  F1          	pop	af
3752  12F1  F1          	pop	af
3753  12F2  F1          	pop	af
3754  12F3  21 00 00    	ld	hl,_boss_col
3755  12F6  46          	ld	b, (hl)
3756  12F7  04          	inc	b
3757  12F8  04          	inc	b
3758  12F9  21 00 00    	ld	hl,0x0000
3759  12FC  E5          	push	hl
3760  12FD  21 87 03    	ld	hl,0x0387
3761  1300  E5          	push	hl
3762  1301  C5          	push	bc
3763  1302  33          	inc	sp
3764  1303  3A 00 00    	ld	a,(_boss_lin)
3765  1306  F5          	push	af
3766  1307  33          	inc	sp
3767  1308  CD 61 0C    	call	_spr_add_anim
3768  130B  F1          	pop	af
3769  130C  F1          	pop	af
3770  130D  F1          	pop	af
3771  130E  3A 00 00    	ld	a,(_boss_lin)
3772  1311  C6 10       	add	a,0x10
3773  1313  47          	ld	b, a
3774  1314  3A 00 00    	ld	a,(_boss_col)
3775  1317  21 00 00    	ld	hl,0x0000
3776  131A  E5          	push	hl
3777  131B  21 87 03    	ld	hl,0x0387
3778  131E  E5          	push	hl
3779  131F  48          	ld	c,b
3780  1320  47          	ld	b,a
3781  1321  C5          	push	bc
3782  1322  CD 61 0C    	call	_spr_add_anim
3783  1325  F1          	pop	af
3784  1326  F1          	pop	af
3785  1327  F1          	pop	af
3786  1328  21 00 00    	ld	hl,_boss_col
3787  132B  46          	ld	b, (hl)
3788  132C  04          	inc	b
3789  132D  04          	inc	b
3790  132E  3A 00 00    	ld	a,(_boss_lin)
3791  1331  C6 10       	add	a,0x10
3792  1333  57          	ld	d, a
3793  1334  21 00 00    	ld	hl,0x0000
3794  1337  E5          	push	hl
3795  1338  21 87 03    	ld	hl,0x0387
3796  133B  E5          	push	hl
3797  133C  4A          	ld	c, d
3798  133D  C5          	push	bc
3799  133E  CD 61 0C    	call	_spr_add_anim
3800  1341  F1          	pop	af
3801  1342  F1          	pop	af
3802  1343  F1          	pop	af
3803  1344  21 00 00    	ld	hl,_tmp0
3804  1347  36 00       	ld	(hl),0x00
3805  1349              l_spr_play_bullets_00196:
3806  1349  2A 00 00    	ld	hl,(_tmp0)
3807  134C  26 00       	ld	h,0x00
3808  134E  01 00 00    	ld	bc,_bullet_col
3809  1351  09          	add	hl,bc
3810  1352  7E          	ld	a,(hl)
3811  1353  4F          	ld	c,a
3812  1354  3C          	inc	a
3813  1355  28 15       	jr	Z,l_spr_play_bullets_00165
3814  1357  3A 00 00    	ld	a,(_tmp0)
3815  135A  5F          	ld	e,a
3816  135B  16 00       	ld	d,0x00
3817  135D  21 00 00    	ld	hl,_bullet_lin
3818  1360  19          	add	hl,de
3819  1361  7E          	ld	a,(hl)
3820  1362  32 00 00    	ld	(_s_lin0),a
3821  1365  21 00 00    	ld	hl,_s_col0
3822  1368  71          	ld	(hl), c
3823  1369  CD B4 0A    	call	_spr_back_repaint
3824  136C              l_spr_play_bullets_00165:
3825  136C  2A 00 00    	ld	hl,(_tmp0)
3826  136F  26 00       	ld	h,0x00
3827  1371  01 00 00    	ld	bc,_bullet_col
3828  1374  09          	add	hl,bc
3829  1375  36 FF       	ld	(hl),0xff
3830  1377  2A 00 00    	ld	hl,(_tmp0)
3831  137A  CD 92 08    	call	_spr_destroy
3832  137D  2A 00 00    	ld	hl,(_tmp0)
3833  1380  26 00       	ld	h,0x00
3834  1382  29          	add	hl, hl
3835  1383  11 00 00    	ld	de,_game_respawn_time
3836  1386  19          	add	hl, de
3837  1387  AF          	xor	a, a
3838  1388  77          	ld	(hl), a
3839  1389  23          	inc	hl
3840  138A  77          	ld	(hl), a
3841  138B  21 00 00    	ld	hl,_tmp0
3842  138E  7E          	ld	a,(hl)
3843  138F  3C          	inc	a
3844  1390  77          	ld	(hl),a
3845  1391  D6 07       	sub	a,0x07
3846  1393  38 B4       	jr	C,l_spr_play_bullets_00196
3847  1395  CD 00 00    	call	_game_boss_clear
3848  1398  18 3E       	jr	l_spr_play_bullets_00187
3849  139A              l_spr_play_bullets_00184:
3850  139A  3A 07 00    	ld	a,(_lin + 7)
3851  139D  47          	ld	b,a
3852  139E  91          	sub	a, c
3853  139F  38 37       	jr	C,l_spr_play_bullets_00187
3854  13A1  DD 7E F3    	ld	a,(ix-13)
3855  13A4  90          	sub	a, b
3856  13A5  38 31       	jr	C,l_spr_play_bullets_00187
3857  13A7  3A 07 00    	ld	a,(_col + 7)
3858  13AA  4F          	ld	c,a
3859  13AB  DD 96 F4    	sub	a,(ix-12)
3860  13AE  38 28       	jr	C,l_spr_play_bullets_00187
3861  13B0  DD 7E F6    	ld	a,(ix-10)
3862  13B3  91          	sub	a, c
3863  13B4  38 22       	jr	C,l_spr_play_bullets_00187
3864  13B6  21 00 00    	ld	hl,_ay_effect_06
3865  13B9  CD 00 00    	call	_ay_fx_play
3866  13BC  2E 03       	ld	l,0x03
3867  13BE  CD 00 00    	call	_zx_border_fastcall
3868  13C1  2E 0A       	ld	l,0x0a
3869  13C3  CD 00 00    	call	_player_hit
3870  13C6  DD 6E FC    	ld	l,(ix-4)
3871  13C9  DD 66 FD    	ld	h,(ix-3)
3872  13CC  3A 00 00    	ld	a,(_s_col0)
3873  13CF  77          	ld	(hl),a
3874  13D0  DD 6E F7    	ld	l,(ix-9)
3875  13D3  CD 27 14    	call	_spr_explode_bullet
3876  13D6  18 4A       	jr	l_spr_play_bullets_00199
3877  13D8              l_spr_play_bullets_00187:
3878  13D8  DD 6E FE    	ld	l,(ix-2)
3879  13DB  DD 66 FF    	ld	h,(ix-1)
3880  13DE  4E          	ld	c, (hl)
3881  13DF  0C          	inc	c
3882  13E0  28 32       	jr	Z,l_spr_play_bullets_00192
3883  13E2  DD 7E F4    	ld	a,(ix-12)
3884  13E5  D6 20       	sub	a,0x20
3885  13E7  30 2B       	jr	NC,l_spr_play_bullets_00192
3886  13E9  F3          	di
3887  13EA  3E 00       	ld	a, +((_bullet_tile) & 0xFF)
3888  13EC  DD 86 F5    	add	a,(ix-11)
3889  13EF  6F          	ld	l, a
3890  13F0  3E 00       	ld	a, +((_bullet_tile) / 256)
3891  13F2  CE 00       	adc	a,0x00
3892  13F4  67          	ld	h, a
3893  13F5  4E          	ld	c, (hl)
3894  13F6  3E 00       	ld	a, +((_bullet_colint) & 0xFF)
3895  13F8  DD 86 F5    	add	a,(ix-11)
3896  13FB  6F          	ld	l, a
3897  13FC  3E 00       	ld	a, +((_bullet_colint) / 256)
3898  13FE  CE 00       	adc	a,0x00
3899  1400  67          	ld	h, a
3900  1401  46          	ld	b, (hl)
3901  1402  79          	ld	a, c
3902  1403  80          	add	a, b
3903  1404  47          	ld	b, a
3904  1405  DD 7E F4    	ld	a,(ix-12)
3905  1408  F5          	push	af
3906  1409  33          	inc	sp
3907  140A  3A 00 00    	ld	a,(_s_lin0)
3908  140D  48          	ld	c,b
3909  140E  47          	ld	b,a
3910  140F  C5          	push	bc
3911  1410  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
3912  1413  FB          	ei
3913  1414              l_spr_play_bullets_00192:
3914  1414  DD 34 F5    	inc	(ix-11)
3915  1417  DD 7E F5    	ld	a,(ix-11)
3916  141A  DD 77 F7    	ld	(ix-9),a
3917  141D  D6 08       	sub	a,0x08
3918  141F  DA 75 0E    	jp	C, l_spr_play_bullets_00198
3919  1422              l_spr_play_bullets_00199:
3920  1422  DD F9       	ld	sp, ix
3921  1424  DD E1       	pop	ix
3922  1426  C9          	ret
3923  1427              	SECTION code_compiler
3924  1427              ;	---------------------------------
3925  1427              ; Function spr_explode_bullet
3926  1427              ; ---------------------------------
3927  1427              _spr_explode_bullet:
3928  1427  5D          	ld	e, l
3929  1428  3E 00       	ld	a, +((_bullet_col) & 0xFF)
3930  142A  83          	add	a, e
3931  142B  4F          	ld	c, a
3932  142C  3E 00       	ld	a, +((_bullet_col) / 256)
3933  142E  CE 00       	adc	a,0x00
3934  1430  47          	ld	b, a
3935  1431  0A          	ld	a, (bc)
3936  1432  57          	ld	d, a
3937  1433  3E 00       	ld	a, +((_bullet_lin) & 0xFF)
3938  1435  83          	add	a, e
3939  1436  6F          	ld	l, a
3940  1437  3E 00       	ld	a, +((_bullet_lin) / 256)
3941  1439  CE 00       	adc	a,0x00
3942  143B  67          	ld	h, a
3943  143C  5E          	ld	e, (hl)
3944  143D  C5          	push	bc
3945  143E  21 00 00    	ld	hl,0x0000
3946  1441  E5          	push	hl
3947  1442  21 87 03    	ld	hl,0x0387
3948  1445  E5          	push	hl
3949  1446  D5          	push	de
3950  1447  CD 61 0C    	call	_spr_add_anim
3951  144A  F1          	pop	af
3952  144B  F1          	pop	af
3953  144C  F1          	pop	af
3954  144D  C1          	pop	bc
3955  144E  21 00 00    	ld	hl,_bullet_count
3956  1451  35          	dec	(hl)
3957  1452  3E FF       	ld	a,0xff
3958  1454  02          	ld	(bc), a
3959  1455  21 00 00    	ld	hl,_ay_effect_11
3960  1458  C3 00 00    	jp  _ay_fx_play
3961  145B              	SECTION code_compiler
3962  145B              ;	---------------------------------
3963  145B              ; Function spr_turn_horizontal
3964  145B              ; ---------------------------------
3965  145B              _spr_turn_horizontal:
3966  145B  21 00 00    	ld	hl,_s_state
3967  145E  CB 56       	bit	2, (hl)
3968  1460  28 0B       	jr	Z,l_spr_turn_horizontal_00102
3969  1462  21 00 00    	ld	hl,_s_state
3970  1465  7E          	ld	a,(hl)
3971  1466  F6 08       	or	a,0x08
3972  1468  E6 FB       	and	a,0xfb
3973  146A  77          	ld	(hl),a
3974  146B  18 09       	jr	l_spr_turn_horizontal_00103
3975  146D              l_spr_turn_horizontal_00102:
3976  146D  21 00 00    	ld	hl,_s_state
3977  1470  7E          	ld	a,(hl)
3978  1471  E6 F7       	and	a,0xf7
3979  1473  F6 04       	or	a,0x04
3980  1475  77          	ld	(hl),a
3981  1476              l_spr_turn_horizontal_00103:
3982  1476  2A 00 00    	ld	hl,(_sprite)
3983  1479  26 00       	ld	h,0x00
3984  147B  01 00 00    	ld	bc,_state
3985  147E  09          	add	hl,bc
3986  147F  3A 00 00    	ld	a,(_s_state)
3987  1482  77          	ld	(hl),a
3988  1483  2A 00 00    	ld	hl,(_sprite)
3989  1486  26 00       	ld	h,0x00
3990  1488  01 00 00    	ld	bc,_tile
3991  148B  09          	add	hl,bc
3992  148C  E5          	push	hl
3993  148D  2A 00 00    	ld	hl,(_sprite)
3994  1490  CD 27 09    	call	_spr_tile
3995  1493  C1          	pop	bc
3996  1494  7D          	ld	a,l
3997  1495  02          	ld	(bc), a
3998  1496  C9          	ret
3999  1497              	SECTION code_compiler
4000  1497              ;	---------------------------------
4001  1497              ; Function spr_btile_paint_back
4002  1497              ; ---------------------------------
4003  1497              _spr_btile_paint_back:
4004  1497  21 20 00    	ld	hl,0x0020
4005  149A  22 00 00    	ld	(_tmp_ui),hl
4006  149D  21 00 00    	ld	hl,_map_paper
4007  14A0  7E          	ld	a, (hl)
4008  14A1  0F          	rrca
4009  14A2  0F          	rrca
4010  14A3  0F          	rrca
4011  14A4  E6 1F       	and	a,0x1f
4012  14A6  B6          	or	a, (hl)
4013  14A7  F6 40       	or	a,0x40
4014  14A9  32 00 00    	ld	(_map_paper_clr),a
4015  14AC              l_spr_btile_paint_back_00106:
4016  14AC  21 00 00    	ld	hl,_tmp_ui
4017  14AF  7E          	ld	a, (hl)
4018  14B0  D6 20       	sub	a,0x20
4019  14B2  23          	inc	hl
4020  14B3  7E          	ld	a, (hl)
4021  14B4  DE 2D       	sbc	a,0x2d
4022  14B6  30 4C       	jr	NC,l_spr_btile_paint_back_00108
4023  14B8  21 00 00    	ld	hl,_tmp0
4024  14BB  36 00       	ld	(hl),0x00
4025  14BD              l_spr_btile_paint_back_00103:
4026  14BD  3A 00 00    	ld	a,(_tmp0)
4027  14C0  D6 10       	sub	a,0x10
4028  14C2  30 34       	jr	NC,l_spr_btile_paint_back_00105
4029  14C4  01 00 00    	ld	bc,_btiles
4030  14C7  2A 00 00    	ld	hl,(_tmp_ui)
4031  14CA  09          	add	hl,bc
4032  14CB  7D          	ld	a,l
4033  14CC  44          	ld	b,h
4034  14CD  21 00 00    	ld	hl,_tmp0
4035  14D0  86          	add	a, (hl)
4036  14D1  4F          	ld	c, a
4037  14D2  78          	ld	a, b
4038  14D3  CE 00       	adc	a,0x00
4039  14D5  47          	ld	b, a
4040  14D6  0A          	ld	a, (bc)
4041  14D7  32 00 00    	ld	(_tmp),a
4042  14DA  E6 38       	and	a,0x38
4043  14DC  5F          	ld	e, a
4044  14DD  3A 00 00    	ld	a,(_map_paper_last)
4045  14E0  93          	sub	a, e
4046  14E1  20 0F       	jr	NZ,l_spr_btile_paint_back_00102
4047  14E3  21 00 00    	ld	hl,_tmp
4048  14E6  7E          	ld	a, (hl)
4049  14E7  E6 C7       	and	a,0xc7
4050  14E9  77          	ld	(hl),a
4051  14EA  21 00 00    	ld	hl,_map_paper
4052  14ED  B6          	or	a, (hl)
4053  14EE  32 00 00    	ld	(_tmp),a
4054  14F1  02          	ld	(bc), a
4055  14F2              l_spr_btile_paint_back_00102:
4056  14F2  21 00 00    	ld	hl,_tmp0
4057  14F5  34          	inc	(hl)
4058  14F6  18 C5       	jr	l_spr_btile_paint_back_00103
4059  14F8              l_spr_btile_paint_back_00105:
4060  14F8  2A 00 00    	ld	hl,(_tmp_ui)
4061  14FB  11 30 00    	ld	de,0x0030
4062  14FE  19          	add	hl,de
4063  14FF  22 00 00    	ld	(_tmp_ui),hl
4064  1502  18 A8       	jr	l_spr_btile_paint_back_00106
4065  1504              l_spr_btile_paint_back_00108:
4066  1504  C3 00 00    	jp  _game_attribs
4067  1507              	SECTION IGNORE
4068  0000              
