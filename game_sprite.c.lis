1     0000              MODULE game_sprite_c
2     0000              
3     0000              ;--------------------------------------------------------
4     0000              ; File Created by SDCC : free open source ANSI-C Compiler
5     0000              ; Version 3.6.5 #9958 (Mac OS X i386)
6     0000              ;--------------------------------------------------------
7     0000              ; Processed by Z88DK
8     0000              ;--------------------------------------------------------
9     0000              
10    0000              	EXTERN __divschar
11    0000              	EXTERN __divschar_callee
12    0000              	EXTERN __divsint
13    0000              	EXTERN __divsint_callee
14    0000              	EXTERN __divslong
15    0000              	EXTERN __divslong_callee
16    0000              	EXTERN __divslonglong
17    0000              	EXTERN __divslonglong_callee
18    0000              	EXTERN __divsuchar
19    0000              	EXTERN __divsuchar_callee
20    0000              	EXTERN __divuchar
21    0000              	EXTERN __divuchar_callee
22    0000              	EXTERN __divuint
23    0000              	EXTERN __divuint_callee
24    0000              	EXTERN __divulong
25    0000              	EXTERN __divulong_callee
26    0000              	EXTERN __divulonglong
27    0000              	EXTERN __divulonglong_callee
28    0000              	EXTERN __divuschar
29    0000              	EXTERN __divuschar_callee
30    0000              	EXTERN __modschar
31    0000              	EXTERN __modschar_callee
32    0000              	EXTERN __modsint
33    0000              	EXTERN __modsint_callee
34    0000              	EXTERN __modslong
35    0000              	EXTERN __modslong_callee
36    0000              	EXTERN __modslonglong
37    0000              	EXTERN __modslonglong_callee
38    0000              	EXTERN __modsuchar
39    0000              	EXTERN __modsuchar_callee
40    0000              	EXTERN __moduchar
41    0000              	EXTERN __moduchar_callee
42    0000              	EXTERN __moduint
43    0000              	EXTERN __moduint_callee
44    0000              	EXTERN __modulong
45    0000              	EXTERN __modulong_callee
46    0000              	EXTERN __modulonglong
47    0000              	EXTERN __modulonglong_callee
48    0000              	EXTERN __moduschar
49    0000              	EXTERN __moduschar_callee
50    0000              	EXTERN __mulint
51    0000              	EXTERN __mulint_callee
52    0000              	EXTERN __mullong
53    0000              	EXTERN __mullong_callee
54    0000              	EXTERN __mullonglong
55    0000              	EXTERN __mullonglong_callee
56    0000              	EXTERN __mulschar
57    0000              	EXTERN __mulschar_callee
58    0000              	EXTERN __mulsuchar
59    0000              	EXTERN __mulsuchar_callee
60    0000              	EXTERN __muluschar
61    0000              	EXTERN __muluschar_callee
62    0000              	EXTERN __rlslonglong
63    0000              	EXTERN __rlslonglong_callee
64    0000              	EXTERN __rlulonglong
65    0000              	EXTERN __rlulonglong_callee
66    0000              	EXTERN __rrslonglong
67    0000              	EXTERN __rrslonglong_callee
68    0000              	EXTERN __rrulonglong
69    0000              	EXTERN __rrulonglong_callee
70    0000              	EXTERN ___sdcc_call_hl
71    0000              	EXTERN ___sdcc_call_iy
72    0000              	EXTERN ___sdcc_enter_ix
73    0000              	EXTERN _banked_call
74    0000              	EXTERN _banked_ret
75    0000              	EXTERN ___fs2schar
76    0000              	EXTERN ___fs2schar_callee
77    0000              	EXTERN ___fs2sint
78    0000              	EXTERN ___fs2sint_callee
79    0000              	EXTERN ___fs2slong
80    0000              	EXTERN ___fs2slong_callee
81    0000              	EXTERN ___fs2slonglong
82    0000              	EXTERN ___fs2slonglong_callee
83    0000              	EXTERN ___fs2uchar
84    0000              	EXTERN ___fs2uchar_callee
85    0000              	EXTERN ___fs2uint
86    0000              	EXTERN ___fs2uint_callee
87    0000              	EXTERN ___fs2ulong
88    0000              	EXTERN ___fs2ulong_callee
89    0000              	EXTERN ___fs2ulonglong
90    0000              	EXTERN ___fs2ulonglong_callee
91    0000              	EXTERN ___fsadd
92    0000              	EXTERN ___fsadd_callee
93    0000              	EXTERN ___fsdiv
94    0000              	EXTERN ___fsdiv_callee
95    0000              	EXTERN ___fseq
96    0000              	EXTERN ___fseq_callee
97    0000              	EXTERN ___fsgt
98    0000              	EXTERN ___fsgt_callee
99    0000              	EXTERN ___fslt
100   0000              	EXTERN ___fslt_callee
101   0000              	EXTERN ___fsmul
102   0000              	EXTERN ___fsmul_callee
103   0000              	EXTERN ___fsneq
104   0000              	EXTERN ___fsneq_callee
105   0000              	EXTERN ___fssub
106   0000              	EXTERN ___fssub_callee
107   0000              	EXTERN ___schar2fs
108   0000              	EXTERN ___schar2fs_callee
109   0000              	EXTERN ___sint2fs
110   0000              	EXTERN ___sint2fs_callee
111   0000              	EXTERN ___slong2fs
112   0000              	EXTERN ___slong2fs_callee
113   0000              	EXTERN ___slonglong2fs
114   0000              	EXTERN ___slonglong2fs_callee
115   0000              	EXTERN ___uchar2fs
116   0000              	EXTERN ___uchar2fs_callee
117   0000              	EXTERN ___uint2fs
118   0000              	EXTERN ___uint2fs_callee
119   0000              	EXTERN ___ulong2fs
120   0000              	EXTERN ___ulong2fs_callee
121   0000              	EXTERN ___ulonglong2fs
122   0000              	EXTERN ___ulonglong2fs_callee
123   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
126   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
127   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
128   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
129   0000              	EXTERN ____sdcc_4_ldi_save_bc
130   0000              	EXTERN ____sdcc_4_push_hlix
131   0000              	EXTERN ____sdcc_4_push_mhl
132   0000              	EXTERN ____sdcc_lib_setmem_hl
133   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
134   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
135   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
136   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
137   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
138   0000              	EXTERN ____sdcc_ll_add_deix_hlix
139   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
140   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
141   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
142   0000              	EXTERN ____sdcc_ll_asr_hlix_a
143   0000              	EXTERN ____sdcc_ll_asr_mbc_a
144   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
145   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
146   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
147   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
148   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
149   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
150   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
151   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
152   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
153   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
155   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
156   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
157   0000              	EXTERN ____sdcc_ll_push_hlix
158   0000              	EXTERN ____sdcc_ll_push_mhl
159   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
160   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
161   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
162   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
163   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
164   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
165   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
166   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
167   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
168   0000              	EXTERN ____sdcc_load_debc_deix
169   0000              	EXTERN ____sdcc_load_dehl_deix
170   0000              	EXTERN ____sdcc_load_debc_mhl
171   0000              	EXTERN ____sdcc_load_hlde_mhl
172   0000              	EXTERN ____sdcc_store_dehl_bcix
173   0000              	EXTERN ____sdcc_store_debc_hlix
174   0000              	EXTERN ____sdcc_store_debc_mhl
175   0000              	EXTERN ____sdcc_cpu_pop_ei
176   0000              	EXTERN ____sdcc_cpu_pop_ei_jp
177   0000              	EXTERN ____sdcc_cpu_push_di
178   0000              	EXTERN ____sdcc_outi
179   0000              	EXTERN ____sdcc_outi_128
180   0000              	EXTERN ____sdcc_outi_256
181   0000              	EXTERN ____sdcc_ldi
182   0000              	EXTERN ____sdcc_ldi_128
183   0000              	EXTERN ____sdcc_ldi_256
184   0000              
185   0000              ;--------------------------------------------------------
186   0000              ; Public variables in this module
187   0000              ;--------------------------------------------------------
188   0000              	GLOBAL _spr_calc_index
189   0000              	GLOBAL _spr_chktime
190   0000              	GLOBAL _spr_move_up
191   0000              	GLOBAL _spr_move_down
192   0000              	GLOBAL _spr_move_horizontal
193   0000              	GLOBAL _spr_move_right
194   0000              	GLOBAL _spr_move_left
195   0000              	GLOBAL _spr_page_right
196   0000              	GLOBAL _spr_page_left
197   0000              	GLOBAL _spr_page_down
198   0000              	GLOBAL _spr_page_up
199   0000              	GLOBAL _spr_clear_scr
200   0000              	GLOBAL _spr_page_map
201   0000              	GLOBAL _spr_redraw
202   0000              	GLOBAL _spr_destroy
203   0000              	GLOBAL _spr_tile
204   0000              	GLOBAL _spr_tile_dir
205   0000              	GLOBAL _spr_brick_anim
206   0000              	GLOBAL _spr_draw_index
207   0000              	GLOBAL _spr_calc_hor
208   0000              	GLOBAL _spr_back_repaint
209   0000              	GLOBAL _spr_tile_paint
210   0000              	GLOBAL _spr_init_anim_bullets
211   0000              	GLOBAL _spr_add_anim
212   0000              	GLOBAL _spr_play_anim
213   0000              	GLOBAL _spr_play_bullets
214   0000              	GLOBAL _spr_explode_bullet
215   0000              	GLOBAL _spr_turn_horizontal
216   0000              	GLOBAL _spr_btile_paint_back
217   0000              ;--------------------------------------------------------
218   0000              ; Externals used
219   0000              ;--------------------------------------------------------
220   0000              	GLOBAL _ulltoa_callee
221   0000              	GLOBAL _ulltoa
222   0000              	GLOBAL _strtoull_callee
223   0000              	GLOBAL _strtoull
224   0000              	GLOBAL _strtoll_callee
225   0000              	GLOBAL _strtoll
226   0000              	GLOBAL _lltoa_callee
227   0000              	GLOBAL _lltoa
228   0000              	GLOBAL _llabs_callee
229   0000              	GLOBAL _llabs
230   0000              	GLOBAL __lldivu__callee
231   0000              	GLOBAL __lldivu_
232   0000              	GLOBAL __lldiv__callee
233   0000              	GLOBAL __lldiv_
234   0000              	GLOBAL _atoll_callee
235   0000              	GLOBAL _atoll
236   0000              	GLOBAL _realloc_unlocked_callee
237   0000              	GLOBAL _realloc_unlocked
238   0000              	GLOBAL _malloc_unlocked_fastcall
239   0000              	GLOBAL _malloc_unlocked
240   0000              	GLOBAL _free_unlocked_fastcall
241   0000              	GLOBAL _free_unlocked
242   0000              	GLOBAL _calloc_unlocked_callee
243   0000              	GLOBAL _calloc_unlocked
244   0000              	GLOBAL _aligned_alloc_unlocked_callee
245   0000              	GLOBAL _aligned_alloc_unlocked
246   0000              	GLOBAL _realloc_callee
247   0000              	GLOBAL _realloc
248   0000              	GLOBAL _malloc_fastcall
249   0000              	GLOBAL _malloc
250   0000              	GLOBAL _free_fastcall
251   0000              	GLOBAL _free
252   0000              	GLOBAL _calloc_callee
253   0000              	GLOBAL _calloc
254   0000              	GLOBAL _aligned_alloc_callee
255   0000              	GLOBAL _aligned_alloc
256   0000              	GLOBAL _utoa_callee
257   0000              	GLOBAL _utoa
258   0000              	GLOBAL _ultoa_callee
259   0000              	GLOBAL _ultoa
260   0000              	GLOBAL _system_fastcall
261   0000              	GLOBAL _system
262   0000              	GLOBAL _strtoul_callee
263   0000              	GLOBAL _strtoul
264   0000              	GLOBAL _strtol_callee
265   0000              	GLOBAL _strtol
266   0000              	GLOBAL _strtof_callee
267   0000              	GLOBAL _strtof
268   0000              	GLOBAL _strtod_callee
269   0000              	GLOBAL _strtod
270   0000              	GLOBAL _srand_fastcall
271   0000              	GLOBAL _srand
272   0000              	GLOBAL _rand
273   0000              	GLOBAL _quick_exit_fastcall
274   0000              	GLOBAL _quick_exit
275   0000              	GLOBAL _qsort_callee
276   0000              	GLOBAL _qsort
277   0000              	GLOBAL _ltoa_callee
278   0000              	GLOBAL _ltoa
279   0000              	GLOBAL _labs_fastcall
280   0000              	GLOBAL _labs
281   0000              	GLOBAL _itoa_callee
282   0000              	GLOBAL _itoa
283   0000              	GLOBAL _ftoh_callee
284   0000              	GLOBAL _ftoh
285   0000              	GLOBAL _ftog_callee
286   0000              	GLOBAL _ftog
287   0000              	GLOBAL _ftoe_callee
288   0000              	GLOBAL _ftoe
289   0000              	GLOBAL _ftoa_callee
290   0000              	GLOBAL _ftoa
291   0000              	GLOBAL _exit_fastcall
292   0000              	GLOBAL _exit
293   0000              	GLOBAL _dtoh_callee
294   0000              	GLOBAL _dtoh
295   0000              	GLOBAL _dtog_callee
296   0000              	GLOBAL _dtog
297   0000              	GLOBAL _dtoe_callee
298   0000              	GLOBAL _dtoe
299   0000              	GLOBAL _dtoa_callee
300   0000              	GLOBAL _dtoa
301   0000              	GLOBAL _bsearch_callee
302   0000              	GLOBAL _bsearch
303   0000              	GLOBAL _atol_fastcall
304   0000              	GLOBAL _atol
305   0000              	GLOBAL _atoi_fastcall
306   0000              	GLOBAL _atoi
307   0000              	GLOBAL _atof_fastcall
308   0000              	GLOBAL _atof
309   0000              	GLOBAL _atexit_fastcall
310   0000              	GLOBAL _atexit
311   0000              	GLOBAL _at_quick_exit_fastcall
312   0000              	GLOBAL _at_quick_exit
313   0000              	GLOBAL _abs_fastcall
314   0000              	GLOBAL _abs
315   0000              	GLOBAL _abort
316   0000              	GLOBAL __strtou__callee
317   0000              	GLOBAL __strtou_
318   0000              	GLOBAL __strtoi__callee
319   0000              	GLOBAL __strtoi_
320   0000              	GLOBAL __random_uniform_xor_8__fastcall
321   0000              	GLOBAL __random_uniform_xor_8_
322   0000              	GLOBAL __random_uniform_xor_32__fastcall
323   0000              	GLOBAL __random_uniform_xor_32_
324   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
325   0000              	GLOBAL __random_uniform_cmwc_8_
326   0000              	GLOBAL __shellsort__callee
327   0000              	GLOBAL __shellsort_
328   0000              	GLOBAL __quicksort__callee
329   0000              	GLOBAL __quicksort_
330   0000              	GLOBAL __insertion_sort__callee
331   0000              	GLOBAL __insertion_sort_
332   0000              	GLOBAL __ldivu__callee
333   0000              	GLOBAL __ldivu_
334   0000              	GLOBAL __ldiv__callee
335   0000              	GLOBAL __ldiv_
336   0000              	GLOBAL __divu__callee
337   0000              	GLOBAL __divu_
338   0000              	GLOBAL __div__callee
339   0000              	GLOBAL __div_
340   0000              	GLOBAL _NIRVANAP_drawTW_raw_callee
341   0000              	GLOBAL _NIRVANAP_drawTW_raw
342   0000              	GLOBAL _NIRVANAP_drawTW_callee
343   0000              	GLOBAL _NIRVANAP_drawTW
344   0000              	GLOBAL _NIRVANAP_drawW_raw_callee
345   0000              	GLOBAL _NIRVANAP_drawW_raw
346   0000              	GLOBAL _NIRVANAP_drawW_callee
347   0000              	GLOBAL _NIRVANAP_drawW
348   0000              	GLOBAL _NIRVANAP_spriteT_callee
349   0000              	GLOBAL _NIRVANAP_spriteT
350   0000              	GLOBAL _NIRVANAP_fillC_callee
351   0000              	GLOBAL _NIRVANAP_fillC
352   0000              	GLOBAL _NIRVANAP_readC_callee
353   0000              	GLOBAL _NIRVANAP_readC
354   0000              	GLOBAL _NIRVANAP_paintC_callee
355   0000              	GLOBAL _NIRVANAP_paintC
356   0000              	GLOBAL _NIRVANAP_printC_callee
357   0000              	GLOBAL _NIRVANAP_printC
358   0000              	GLOBAL _NIRVANAP_fillT_raw_callee
359   0000              	GLOBAL _NIRVANAP_fillT_raw
360   0000              	GLOBAL _NIRVANAP_fillT_callee
361   0000              	GLOBAL _NIRVANAP_fillT
362   0000              	GLOBAL _NIRVANAP_drawT_raw_callee
363   0000              	GLOBAL _NIRVANAP_drawT_raw
364   0000              	GLOBAL _NIRVANAP_drawT_callee
365   0000              	GLOBAL _NIRVANAP_drawT
366   0000              	GLOBAL _NIRVANAP_stop
367   0000              	GLOBAL _NIRVANAP_start
368   0000              	GLOBAL _debug3
369   0000              	GLOBAL _debug2
370   0000              	GLOBAL _debug
371   0000              	GLOBAL _zx_print_str
372   0000              	GLOBAL _zx_print_int
373   0000              	GLOBAL _zx_print_chr
374   0000              	GLOBAL _zx_print_bonus_time
375   0000              	GLOBAL _zx_isr
376   0000              	GLOBAL _z80_otdr_callee
377   0000              	GLOBAL _z80_otdr
378   0000              	GLOBAL _z80_otir_callee
379   0000              	GLOBAL _z80_otir
380   0000              	GLOBAL _z80_outp_callee
381   0000              	GLOBAL _z80_outp
382   0000              	GLOBAL _z80_indr_callee
383   0000              	GLOBAL _z80_indr
384   0000              	GLOBAL _z80_inir_callee
385   0000              	GLOBAL _z80_inir
386   0000              	GLOBAL _z80_inp_fastcall
387   0000              	GLOBAL _z80_inp
388   0000              	GLOBAL _z80_set_int_state_fastcall
389   0000              	GLOBAL _z80_set_int_state
390   0000              	GLOBAL _z80_get_int_state
391   0000              	GLOBAL _z80_delay_tstate_fastcall
392   0000              	GLOBAL _z80_delay_tstate
393   0000              	GLOBAL _z80_delay_ms_fastcall
394   0000              	GLOBAL _z80_delay_ms
395   0000              	GLOBAL _im2_remove_generic_callback_callee
396   0000              	GLOBAL _im2_remove_generic_callback
397   0000              	GLOBAL _im2_prepend_generic_callback_callee
398   0000              	GLOBAL _im2_prepend_generic_callback
399   0000              	GLOBAL _im2_append_generic_callback_callee
400   0000              	GLOBAL _im2_append_generic_callback
401   0000              	GLOBAL _im2_create_generic_isr_8080_callee
402   0000              	GLOBAL _im2_create_generic_isr_8080
403   0000              	GLOBAL _im2_create_generic_isr_callee
404   0000              	GLOBAL _im2_create_generic_isr
405   0000              	GLOBAL _im2_install_isr_callee
406   0000              	GLOBAL _im2_install_isr
407   0000              	GLOBAL _im2_init_fastcall
408   0000              	GLOBAL _im2_init
409   0000              	GLOBAL _intrinsic_swap_word_32_fastcall
410   0000              	GLOBAL _intrinsic_swap_word_32
411   0000              	GLOBAL _intrinsic_swap_endian_32_fastcall
412   0000              	GLOBAL _intrinsic_swap_endian_32
413   0000              	GLOBAL _intrinsic_swap_endian_16_fastcall
414   0000              	GLOBAL _intrinsic_swap_endian_16
415   0000              	GLOBAL _intrinsic_return_de
416   0000              	GLOBAL _intrinsic_return_bc
417   0000              	GLOBAL _intrinsic_exx
418   0000              	GLOBAL _intrinsic_ex_de_hl
419   0000              	GLOBAL _intrinsic_nop
420   0000              	GLOBAL _intrinsic_im_2
421   0000              	GLOBAL _intrinsic_im_1
422   0000              	GLOBAL _intrinsic_im_0
423   0000              	GLOBAL _intrinsic_retn
424   0000              	GLOBAL _intrinsic_reti
425   0000              	GLOBAL _intrinsic_halt
426   0000              	GLOBAL _intrinsic_ei
427   0000              	GLOBAL _intrinsic_di
428   0000              	GLOBAL _intrinsic_stub
429   0000              	GLOBAL _intrinsic_outi
430   0000              	GLOBAL _intrinsic_ldi
431   0000              	GLOBAL _zx_pattern_fill_callee
432   0000              	GLOBAL _zx_pattern_fill
433   0000              	GLOBAL _zx_saddrpup_fastcall
434   0000              	GLOBAL _zx_saddrpup
435   0000              	GLOBAL _zx_saddrpright_callee
436   0000              	GLOBAL _zx_saddrpright
437   0000              	GLOBAL _zx_saddrpleft_callee
438   0000              	GLOBAL _zx_saddrpleft
439   0000              	GLOBAL _zx_saddrpdown_fastcall
440   0000              	GLOBAL _zx_saddrpdown
441   0000              	GLOBAL _zx_saddrcup_fastcall
442   0000              	GLOBAL _zx_saddrcup
443   0000              	GLOBAL _zx_saddrcright_fastcall
444   0000              	GLOBAL _zx_saddrcright
445   0000              	GLOBAL _zx_saddrcleft_fastcall
446   0000              	GLOBAL _zx_saddrcleft
447   0000              	GLOBAL _zx_saddrcdown_fastcall
448   0000              	GLOBAL _zx_saddrcdown
449   0000              	GLOBAL _zx_saddr2py_fastcall
450   0000              	GLOBAL _zx_saddr2py
451   0000              	GLOBAL _zx_saddr2px_fastcall
452   0000              	GLOBAL _zx_saddr2px
453   0000              	GLOBAL _zx_saddr2cy_fastcall
454   0000              	GLOBAL _zx_saddr2cy
455   0000              	GLOBAL _zx_saddr2cx_fastcall
456   0000              	GLOBAL _zx_saddr2cx
457   0000              	GLOBAL _zx_saddr2aaddr_fastcall
458   0000              	GLOBAL _zx_saddr2aaddr
459   0000              	GLOBAL _zx_py2saddr_fastcall
460   0000              	GLOBAL _zx_py2saddr
461   0000              	GLOBAL _zx_py2aaddr_fastcall
462   0000              	GLOBAL _zx_py2aaddr
463   0000              	GLOBAL _zx_pxy2saddr_callee
464   0000              	GLOBAL _zx_pxy2saddr
465   0000              	GLOBAL _zx_pxy2aaddr_callee
466   0000              	GLOBAL _zx_pxy2aaddr
467   0000              	GLOBAL _zx_px2bitmask_fastcall
468   0000              	GLOBAL _zx_px2bitmask
469   0000              	GLOBAL _zx_cy2saddr_fastcall
470   0000              	GLOBAL _zx_cy2saddr
471   0000              	GLOBAL _zx_cy2aaddr_fastcall
472   0000              	GLOBAL _zx_cy2aaddr
473   0000              	GLOBAL _zx_cxy2saddr_callee
474   0000              	GLOBAL _zx_cxy2saddr
475   0000              	GLOBAL _zx_cxy2aaddr_callee
476   0000              	GLOBAL _zx_cxy2aaddr
477   0000              	GLOBAL _zx_bitmask2px_fastcall
478   0000              	GLOBAL _zx_bitmask2px
479   0000              	GLOBAL _zx_aaddrcup_fastcall
480   0000              	GLOBAL _zx_aaddrcup
481   0000              	GLOBAL _zx_aaddrcright_fastcall
482   0000              	GLOBAL _zx_aaddrcright
483   0000              	GLOBAL _zx_aaddrcleft_fastcall
484   0000              	GLOBAL _zx_aaddrcleft
485   0000              	GLOBAL _zx_aaddrcdown_fastcall
486   0000              	GLOBAL _zx_aaddrcdown
487   0000              	GLOBAL _zx_aaddr2saddr_fastcall
488   0000              	GLOBAL _zx_aaddr2saddr
489   0000              	GLOBAL _zx_aaddr2py_fastcall
490   0000              	GLOBAL _zx_aaddr2py
491   0000              	GLOBAL _zx_aaddr2px_fastcall
492   0000              	GLOBAL _zx_aaddr2px
493   0000              	GLOBAL _zx_aaddr2cy_fastcall
494   0000              	GLOBAL _zx_aaddr2cy
495   0000              	GLOBAL _zx_aaddr2cx_fastcall
496   0000              	GLOBAL _zx_aaddr2cx
497   0000              	GLOBAL _zx_visit_wc_pix_callee
498   0000              	GLOBAL _zx_visit_wc_pix
499   0000              	GLOBAL _zx_visit_wc_attr_callee
500   0000              	GLOBAL _zx_visit_wc_attr
501   0000              	GLOBAL _zx_scroll_wc_up_pix_callee
502   0000              	GLOBAL _zx_scroll_wc_up_pix
503   0000              	GLOBAL _zx_scroll_wc_up_attr_callee
504   0000              	GLOBAL _zx_scroll_wc_up_attr
505   0000              	GLOBAL _zx_scroll_wc_up_callee
506   0000              	GLOBAL _zx_scroll_wc_up
507   0000              	GLOBAL _zx_scroll_up_pix_callee
508   0000              	GLOBAL _zx_scroll_up_pix
509   0000              	GLOBAL _zx_scroll_up_attr_callee
510   0000              	GLOBAL _zx_scroll_up_attr
511   0000              	GLOBAL _zx_scroll_up_callee
512   0000              	GLOBAL _zx_scroll_up
513   0000              	GLOBAL _zx_cls_wc_pix_callee
514   0000              	GLOBAL _zx_cls_wc_pix
515   0000              	GLOBAL _zx_cls_wc_attr_callee
516   0000              	GLOBAL _zx_cls_wc_attr
517   0000              	GLOBAL _zx_cls_wc_callee
518   0000              	GLOBAL _zx_cls_wc
519   0000              	GLOBAL _zx_cls_pix_fastcall
520   0000              	GLOBAL _zx_cls_pix
521   0000              	GLOBAL _zx_cls_attr_fastcall
522   0000              	GLOBAL _zx_cls_attr
523   0000              	GLOBAL _zx_cls_fastcall
524   0000              	GLOBAL _zx_cls
525   0000              	GLOBAL _zx_border_fastcall
526   0000              	GLOBAL _zx_border
527   0000              	GLOBAL _player_fix_walk_lin
528   0000              	GLOBAL _player_gasta_brick
529   0000              	GLOBAL _player_lost_life
530   0000              	GLOBAL _player_hit
531   0000              	GLOBAL _player_open_door
532   0000              	GLOBAL _player_move_jump
533   0000              	GLOBAL _player_fire
534   0000              	GLOBAL _player_check_stairs_vertical
535   0000              	GLOBAL _player_check_stairs
536   0000              	GLOBAL _player_tile
537   0000              	GLOBAL _player_pick_item
538   0000              	GLOBAL _player_check_floor
539   0000              	GLOBAL _player_hit_platform_clear
540   0000              	GLOBAL _player_score_add
541   0000              	GLOBAL _player_hit_platform
542   0000              	GLOBAL _player_move_input
543   0000              	GLOBAL _player_turn
544   0000              	GLOBAL _player_move
545   0000              	GLOBAL _player_check_input
546   0000              	GLOBAL _player_pick_mushroom
547   0000              	GLOBAL _player_collision
548   0000              	GLOBAL _player_init
549   0000              	GLOBAL _menu_define_key
550   0000              	GLOBAL _menu_redefine
551   0000              	GLOBAL _menu_main_print
552   0000              	GLOBAL _menu_main
553   0000              	GLOBAL _game_match_back
554   0000              	GLOBAL _game_attribs
555   0000              	GLOBAL _game_boss_clear
556   0000              	GLOBAL _game_obj_clear
557   0000              	GLOBAL _game_obj_chk
558   0000              	GLOBAL _game_obj_set
559   0000              	GLOBAL _game_shoot_fire_boss
560   0000              	GLOBAL _game_shoot_fire
561   0000              	GLOBAL _game_add_enemy
562   0000              	GLOBAL _game_print_header
563   0000              	GLOBAL _game_check_time
564   0000              	GLOBAL _game_rotate_attrib_osd
565   0000              	GLOBAL _game_rotate_attrib
566   0000              	GLOBAL _game_colour_message
567   0000              	GLOBAL _game_paint_attrib_lin_osd
568   0000              	GLOBAL _game_paint_attrib_lin_h
569   0000              	GLOBAL _game_paint_attrib_lin
570   0000              	GLOBAL _game_print_score
571   0000              	GLOBAL _game_check_cell
572   0000              	GLOBAL _game_check_map
573   0000              	GLOBAL _game_loop
574   0000              	GLOBAL _game_round_init
575   0000              	GLOBAL _game_start_timer
576   0000              	GLOBAL _game_update_stats
577   0000              	GLOBAL _game_print_footer
578   0000              	GLOBAL _game_fill_row
579   0000              	GLOBAL _game_fps
580   0000              	GLOBAL _game_respawn
581   0000              	GLOBAL _game_draw_screen
582   0000              	GLOBAL _boss_turn
583   0000              	GLOBAL _enemy_avoid_dead
584   0000              	GLOBAL _enemy_avoid_fall
585   0000              	GLOBAL _enemy_respawn
586   0000              	GLOBAL _enemy_init
587   0000              	GLOBAL _enemy_move
588   0000              	GLOBAL _enemy_turn
589   0000              	GLOBAL _enemy_static
590   0000              	GLOBAL _enemy_walk
591   0000              	GLOBAL _enemy_horizontal
592   0000              	GLOBAL _enemy_vertical
593   0000              	GLOBAL _ay_fx_play
594   0000              	GLOBAL _ay_midi_play
595   0000              	GLOBAL _ay_is_playing
596   0000              	GLOBAL _ay_reset
597   0000              	GLOBAL _test_func
598   0000              	GLOBAL _test_proc
599   0000              	GLOBAL _in_mouse_kempston_wheel_delta
600   0000              	GLOBAL _in_mouse_kempston_wheel
601   0000              	GLOBAL _in_mouse_kempston_callee
602   0000              	GLOBAL _in_mouse_kempston
603   0000              	GLOBAL _in_mouse_kempston_setpos_callee
604   0000              	GLOBAL _in_mouse_kempston_setpos
605   0000              	GLOBAL _in_mouse_kempston_reset
606   0000              	GLOBAL _in_mouse_kempston_init
607   0000              	GLOBAL _in_mouse_amx_wheel_delta
608   0000              	GLOBAL _in_mouse_amx_wheel
609   0000              	GLOBAL _in_mouse_amx_callee
610   0000              	GLOBAL _in_mouse_amx
611   0000              	GLOBAL _in_mouse_amx_setpos_callee
612   0000              	GLOBAL _in_mouse_amx_setpos
613   0000              	GLOBAL _in_mouse_amx_reset
614   0000              	GLOBAL _in_mouse_amx_init_callee
615   0000              	GLOBAL _in_mouse_amx_init
616   0000              	GLOBAL _in_stick_sinclair2
617   0000              	GLOBAL _in_stick_sinclair1
618   0000              	GLOBAL _in_stick_kempston
619   0000              	GLOBAL _in_stick_fuller
620   0000              	GLOBAL _in_stick_cursor
621   0000              	GLOBAL _in_stick_keyboard_fastcall
622   0000              	GLOBAL _in_stick_keyboard
623   0000              	GLOBAL _in_wait_nokey
624   0000              	GLOBAL _in_wait_key
625   0000              	GLOBAL _in_test_key
626   0000              	GLOBAL _in_pause_fastcall
627   0000              	GLOBAL _in_pause
628   0000              	GLOBAL _in_key_scancode_fastcall
629   0000              	GLOBAL _in_key_scancode
630   0000              	GLOBAL _in_key_pressed_fastcall
631   0000              	GLOBAL _in_key_pressed
632   0000              	GLOBAL _in_inkey
633   0000              	GLOBAL _NIRVANAP_CHAR_TABLE
634   0000              	GLOBAL _NIRVANAP_WIDE_IMAGES
635   0000              	GLOBAL _NIRVANAP_TILE_IMAGES
636   0000              	GLOBAL _NIRVANAP_HOLE
637   0000              	GLOBAL _NIRVANAP_ISR_HOOK
638   0000              	GLOBAL _scan_map
639   0000              	GLOBAL _key_map
640   0000              	GLOBAL _player_lvl_table
641   0000              	GLOBAL _map_paper_last
642   0000              	GLOBAL _map_paper_clr
643   0000              	GLOBAL _map_paper
644   0000              	GLOBAL _draw_count
645   0000              	GLOBAL _g_player_hit_right
646   0000              	GLOBAL _g_player_hit_left
647   0000              	GLOBAL _bullet_count
648   0000              	GLOBAL _spr_hack
649   0000              	GLOBAL _boss_stat
650   0000              	GLOBAL _boss_time_fire
651   0000              	GLOBAL _boss_time
652   0000              	GLOBAL _boss_tile
653   0000              	GLOBAL _boss_inc
654   0000              	GLOBAL _boss_col
655   0000              	GLOBAL _boss_lin
656   0000              	GLOBAL _bullet_vel
657   0000              	GLOBAL _bullet_frames
658   0000              	GLOBAL _bullet_colint
659   0000              	GLOBAL _bullet_dir
660   0000              	GLOBAL _bullet_tile
661   0000              	GLOBAL _bullet_col
662   0000              	GLOBAL _bullet_lin
663   0000              	GLOBAL _bullet_col0
664   0000              	GLOBAL _bullet_lin0
665   0000              	GLOBAL _bullet_max
666   0000              	GLOBAL _bullet_class
667   0000              	GLOBAL _mush_class
668   0000              	GLOBAL _mush_index
669   0000              	GLOBAL _anim_count
670   0000              	GLOBAL _anim_respanwn
671   0000              	GLOBAL _anim_loop
672   0000              	GLOBAL _anim_end
673   0000              	GLOBAL _anim_int
674   0000              	GLOBAL _anim_tile
675   0000              	GLOBAL _anim_col
676   0000              	GLOBAL _anim_lin
677   0000              	GLOBAL _map_heigth
678   0000              	GLOBAL _map_width
679   0000              	GLOBAL _scr_curr
680   0000              	GLOBAL _scr_obj1
681   0000              	GLOBAL _scr_obj0
682   0000              	GLOBAL _scr_map
683   0000              	GLOBAL _sprite_speed_alt
684   0000              	GLOBAL _sprite_frames
685   0000              	GLOBAL _sprite_speed
686   0000              	GLOBAL _screen_ink
687   0000              	GLOBAL _screen_paper
688   0000              	GLOBAL _player_onstair
689   0000              	GLOBAL _game_start_scr
690   0000              	GLOBAL _game_respawn_tile
691   0000              	GLOBAL _game_respawn_index
692   0000              	GLOBAL _game_respawn_time
693   0000              	GLOBAL _game_score_top
694   0000              	GLOBAL _player_coins
695   0000              	GLOBAL _player_lives
696   0000              	GLOBAL _game_over
697   0000              	GLOBAL _game_sound
698   0000              	GLOBAL _game_inmune
699   0000              	GLOBAL _game_god_mode
700   0000              	GLOBAL _sprite_curr_index
701   0000              	GLOBAL _spr_count
702   0000              	GLOBAL _bullet_time
703   0000              	GLOBAL _anim_time
704   0000              	GLOBAL _frame_time
705   0000              	GLOBAL _curr_time
706   0000              	GLOBAL _s_state
707   0000              	GLOBAL _attrib_osd
708   0000              	GLOBAL _attrib_hl
709   0000              	GLOBAL _attrib
710   0000              	GLOBAL _zx_val_asm
711   0000              	GLOBAL _enemies
712   0000              	GLOBAL _tmp_ui
713   0000              	GLOBAL _tmp_sc
714   0000              	GLOBAL _tmp_uc
715   0000              	GLOBAL _tmp1
716   0000              	GLOBAL _tmp0
717   0000              	GLOBAL _tmp
718   0000              	GLOBAL _index1
719   0000              	GLOBAL _index0
720   0000              	GLOBAL _loop_count
721   0000              	GLOBAL _s_col1
722   0000              	GLOBAL _s_col0
723   0000              	GLOBAL _s_lin1
724   0000              	GLOBAL _s_lin0
725   0000              	GLOBAL _s_tile1
726   0000              	GLOBAL _s_tile0
727   0000              	GLOBAL _player_brick_time
728   0000              	GLOBAL _player_hit_count
729   0000              	GLOBAL _sprite_horizontal_check
730   0000              	GLOBAL _sprite_on_air
731   0000              	GLOBAL _sprite
732   0000              	GLOBAL _fps
733   0000              	GLOBAL _game_2buttons
734   0000              	GLOBAL _game_respawn_curr_time
735   0000              	GLOBAL _game_worldup
736   0000              	GLOBAL _game_mush_count
737   0000              	GLOBAL _game_boss_fix
738   0000              	GLOBAL _game_boss_hit
739   0000              	GLOBAL _game_boss_alive
740   0000              	GLOBAL _game_boss
741   0000              	GLOBAL _game_world
742   0000              	GLOBAL _game_gravity
743   0000              	GLOBAL _player_anim_stair
744   0000              	GLOBAL _player_hit_time
745   0000              	GLOBAL _player_lin_scr
746   0000              	GLOBAL _player_col_scr
747   0000              	GLOBAL _player_lvl
748   0000              	GLOBAL _player_int
749   0000              	GLOBAL _player_str
750   0000              	GLOBAL _player_max_vita
751   0000              	GLOBAL _player_max_mana
752   0000              	GLOBAL _player_vita
753   0000              	GLOBAL _player_mana
754   0000              	GLOBAL _player_keys
755   0000              	GLOBAL _player_vel_inc
756   0000              	GLOBAL _player_vel_y1
757   0000              	GLOBAL _player_vel_y0
758   0000              	GLOBAL _player_vel_y
759   0000              	GLOBAL _player_vel_x
760   0000              	GLOBAL _player_joy
761   0000              	GLOBAL _player_score
762   0000              	GLOBAL _last_time
763   0000              	GLOBAL _player_slide
764   0000              	GLOBAL _spr_timer
765   0000              	GLOBAL _jump_lin
766   0000              	GLOBAL _player_hit_col
767   0000              	GLOBAL _player_hit_lin
768   0000              	GLOBAL _colint
769   0000              	GLOBAL _col
770   0000              	GLOBAL _lin
771   0000              	GLOBAL _tile
772   0000              	GLOBAL _state_a
773   0000              	GLOBAL _state
774   0000              	GLOBAL _class
775   0000              	GLOBAL _tbuffer
776   0000              	GLOBAL _dirs_alt
777   0000              	GLOBAL _dirs
778   0000              	GLOBAL _k2
779   0000              	GLOBAL _k1
780   0000              	GLOBAL _joyfunc2
781   0000              	GLOBAL _joyfunc1
782   0000              	GLOBAL _btiles
783   0000              	GLOBAL _spec128
784   0000              	GLOBAL _GLOBAL_ZX_PORT_7FFD
785   0000              	GLOBAL _GLOBAL_ZX_PORT_1FFD
786   0000              	GLOBAL _GLOBAL_ZX_PORT_FE
787   0000              	GLOBAL _ay_effect_20
788   0000              	GLOBAL _ay_effect_19
789   0000              	GLOBAL _ay_effect_18
790   0000              	GLOBAL _ay_effect_17
791   0000              	GLOBAL _ay_effect_16
792   0000              	GLOBAL _ay_effect_15
793   0000              	GLOBAL _ay_effect_14
794   0000              	GLOBAL _ay_effect_13
795   0000              	GLOBAL _ay_effect_12
796   0000              	GLOBAL _ay_effect_11
797   0000              	GLOBAL _ay_effect_10
798   0000              	GLOBAL _ay_effect_09
799   0000              	GLOBAL _ay_effect_08
800   0000              	GLOBAL _ay_effect_07
801   0000              	GLOBAL _ay_effect_06
802   0000              	GLOBAL _ay_effect_05
803   0000              	GLOBAL _ay_effect_04
804   0000              	GLOBAL _ay_effect_03
805   0000              	GLOBAL _ay_effect_02
806   0000              	GLOBAL _ay_effect_01
807   0000              	GLOBAL _pb_midi_phase_1
808   0000              	GLOBAL _pb_midi_title
809   0000              	GLOBAL _control_method
810   0000              	GLOBAL _world1_h
811   0000              	GLOBAL _world1_w
812   0000              	GLOBAL _world1
813   0000              	GLOBAL _paper1
814   0000              	GLOBAL _lenght1
815   0000              	GLOBAL _start_scr1
816   0000              	GLOBAL _world0_h
817   0000              	GLOBAL _world0_w
818   0000              	GLOBAL _world0
819   0000              	GLOBAL _paper0
820   0000              	GLOBAL _lenght0
821   0000              	GLOBAL _start_scr0
822   0000              ;--------------------------------------------------------
823   0000              ; special function registers
824   0000              ;--------------------------------------------------------
825   0000              defc _IO_FE	=	0x00fe
826   0000              defc _IO_1FFD	=	0x1ffd
827   0000              defc _IO_7FFD	=	0x7ffd
828   0000              ;--------------------------------------------------------
829   0000              ; ram data
830   0000              ;--------------------------------------------------------
831   0000              	SECTION bss_compiler
832   0000              ;--------------------------------------------------------
833   0000              ; ram data
834   0000              ;--------------------------------------------------------
835   0000              
836   0000              IF 0
837   0000              
838   0000              ; .area _INITIALIZED removed by z88dk
839   0000              
840   0000              
841   0000              ENDIF
842   0000              
843   0000              ;--------------------------------------------------------
844   0000              ; absolute external ram data
845   0000              ;--------------------------------------------------------
846   0000              	SECTION IGNORE
847   0000              ;--------------------------------------------------------
848   0000              ; global & static initialisations
849   0000              ;--------------------------------------------------------
850   0000              	SECTION code_crt_init
851   0000              ;--------------------------------------------------------
852   0000              ; Home
853   0000              ;--------------------------------------------------------
854   0000              	SECTION IGNORE
855   0000              ;--------------------------------------------------------
856   0000              ; code
857   0000              ;--------------------------------------------------------
858   0000              	SECTION code_compiler
859   0000              ;	---------------------------------
860   0000              ; Function spr_calc_index
861   0000              ; ---------------------------------
862   0000              _spr_calc_index:
863   0000  CD 00 00    	call	___sdcc_enter_ix
864   0003  DD 4E 05    	ld	c,(ix+5)
865   0006  CB 39       	srl	c
866   0008  06 00       	ld	b,0x00
867   000A  DD 7E 04    	ld	a,(ix+4)
868   000D  07          	rlca
869   000E  07          	rlca
870   000F  07          	rlca
871   0010  07          	rlca
872   0011  E6 0F       	and	a,0x0f
873   0013  6F          	ld	l, a
874   0014  26 00       	ld	h,0x00
875   0016  29          	add	hl, hl
876   0017  29          	add	hl, hl
877   0018  29          	add	hl, hl
878   0019  29          	add	hl, hl
879   001A  09          	add	hl, bc
880   001B  DD E1       	pop	ix
881   001D  C9          	ret
882   001E              	SECTION code_compiler
883   001E              ;	---------------------------------
884   001E              ; Function spr_chktime
885   001E              ; ---------------------------------
886   001E              _spr_chktime:
887   001E  CD 00 00    	call	___sdcc_enter_ix
888   0021  F5          	push	af
889   0022  DD 75 FE    	ld	(ix-2),l
890   0025  DD 74 FF    	ld	(ix-1),h
891   0028  E1          	pop	hl
892   0029  01 00 00    	ld	bc,_sprite_speed_alt+0
893   002C  5E          	ld	e,(hl)
894   002D  E5          	push	hl
895   002E  6B          	ld	l,e
896   002F  26 00       	ld	h,0x00
897   0031  09          	add	hl, bc
898   0032  7E          	ld	a,(hl)
899   0033  57          	ld	d,a
900   0034  B7          	or	a, a
901   0035  20 13       	jr	NZ,l_spr_chktime_00102
902   0037  01 00 00    	ld	bc,_sprite_speed+0
903   003A  16 00       	ld	d,0x00
904   003C  21 00 00    	ld	hl,_class
905   003F  19          	add	hl, de
906   0040  6E          	ld	l, (hl)
907   0041  26 00       	ld	h,0x00
908   0043  09          	add	hl, bc
909   0044  7E          	ld	a, (hl)
910   0045  32 00 00    	ld	(_tmp),a
911   0048  18 04       	jr	l_spr_chktime_00103
912   004A              l_spr_chktime_00102:
913   004A  21 00 00    	ld	hl,_tmp
914   004D  72          	ld	(hl), d
915   004E              l_spr_chktime_00103:
916   004E  3A 00 00    	ld	a,(_tmp)
917   0051  4F          	ld	c,a
918   0052  06 00       	ld	b,0x00
919   0054  60          	ld	h,b
920   0055  6B          	ld	l, e
921   0056  29          	add	hl, hl
922   0057  11 00 00    	ld	de,_last_time
923   005A  19          	add	hl, de
924   005B  5E          	ld	e, (hl)
925   005C  23          	inc	hl
926   005D  56          	ld	d, (hl)
927   005E  C5          	push	bc
928   005F  D5          	push	de
929   0060  CD 00 00    	call	_game_check_time
930   0063  F1          	pop	af
931   0064  F1          	pop	af
932   0065  7D          	ld	a, l
933   0066  B7          	or	a, a
934   0067  28 15       	jr	Z,l_spr_chktime_00105
935   0069  E1          	pop	hl
936   006A  E5          	push	hl
937   006B  6E          	ld	l, (hl)
938   006C  26 00       	ld	h,0x00
939   006E  29          	add	hl, hl
940   006F  01 00 00    	ld	bc,_last_time
941   0072  09          	add	hl,bc
942   0073  ED 5B 00 00 	ld	de,(_curr_time)
943   0077  73          	ld	(hl),e
944   0078  23          	inc	hl
945   0079  72          	ld	(hl),d
946   007A  2E 01       	ld	l,0x01
947   007C  18 02       	jr	l_spr_chktime_00106
948   007E              l_spr_chktime_00105:
949   007E  2E 00       	ld	l,0x00
950   0080              l_spr_chktime_00106:
951   0080  F1          	pop	af
952   0081  DD E1       	pop	ix
953   0083  C9          	ret
954   0084              	SECTION code_compiler
955   0084              ;	---------------------------------
956   0084              ; Function spr_move_up
957   0084              ; ---------------------------------
958   0084              _spr_move_up:
959   0084  2A 00 00    	ld	hl,(_sprite)
960   0087  26 00       	ld	h,0x00
961   0089  01 00 00    	ld	bc,_lin
962   008C  09          	add	hl,bc
963   008D  4E          	ld	c,(hl)
964   008E  3E 10       	ld	a,0x10
965   0090  91          	sub	a,c
966   0091  38 16       	jr	C,l_spr_move_up_00109
967   0093  3A 00 00    	ld	a,(_sprite)
968   0096  D6 07       	sub	a,0x07
969   0098  20 0B       	jr	NZ,l_spr_move_up_00104
970   009A  CD 51 04    	call	_spr_page_up
971   009D  7D          	ld	a, l
972   009E  B7          	or	a, a
973   009F  28 04       	jr	Z,l_spr_move_up_00104
974   00A1  2E 00       	ld	l,0x00
975   00A3  18 54       	jr	l_spr_move_up_00111
976   00A5              l_spr_move_up_00104:
977   00A5  2E 01       	ld	l,0x01
978   00A7  18 50       	jr	l_spr_move_up_00111
979   00A9              l_spr_move_up_00109:
980   00A9  79          	ld	a, c
981   00AA  C6 FE       	add	a,0xfe
982   00AC  32 00 00    	ld	(_s_lin1),a
983   00AF  07          	rlca
984   00B0  07          	rlca
985   00B1  07          	rlca
986   00B2  07          	rlca
987   00B3  E6 0F       	and	a,0x0f
988   00B5  4F          	ld	c, a
989   00B6  3A 00 00    	ld	a,(_s_lin0)
990   00B9  07          	rlca
991   00BA  07          	rlca
992   00BB  07          	rlca
993   00BC  07          	rlca
994   00BD  E6 0F       	and	a,0x0f
995   00BF  47          	ld	b, a
996   00C0  79          	ld	a, c
997   00C1  90          	sub	a, b
998   00C2  20 04       	jr	NZ,l_spr_move_up_00135
999   00C4  3E 01       	ld	a,0x01
1000  00C6  18 01       	jr	l_spr_move_up_00136
1001  00C8              l_spr_move_up_00135:
1002  00C8  AF          	xor	a,a
1003  00C9              l_spr_move_up_00136:
1004  00C9  EE 01       	xor	a,0x01
1005  00CB  28 1D       	jr	Z,l_spr_move_up_00106
1006  00CD  2A 00 00    	ld	hl,(_sprite)
1007  00D0  26 00       	ld	h,0x00
1008  00D2  01 00 00    	ld	bc,_col
1009  00D5  09          	add	hl,bc
1010  00D6  7E          	ld	a,(hl)
1011  00D7  F5          	push	af
1012  00D8  33          	inc	sp
1013  00D9  3A 00 00    	ld	a,(_s_lin1)
1014  00DC  F5          	push	af
1015  00DD  33          	inc	sp
1016  00DE  CD 00 00    	call	_game_check_map
1017  00E1  F1          	pop	af
1018  00E2  7C          	ld	a,h
1019  00E3  B5          	or	a,l
1020  00E4  28 04       	jr	Z,l_spr_move_up_00106
1021  00E6  2E 01       	ld	l,0x01
1022  00E8  18 0F       	jr	l_spr_move_up_00111
1023  00EA              l_spr_move_up_00106:
1024  00EA  2A 00 00    	ld	hl,(_sprite)
1025  00ED  26 00       	ld	h,0x00
1026  00EF  01 00 00    	ld	bc,_lin
1027  00F2  09          	add	hl,bc
1028  00F3  3A 00 00    	ld	a,(_s_lin1)
1029  00F6  77          	ld	(hl),a
1030  00F7  2E 00       	ld	l,0x00
1031  00F9              l_spr_move_up_00111:
1032  00F9  C9          	ret
1033  00FA              	SECTION code_compiler
1034  00FA              ;	---------------------------------
1035  00FA              ; Function spr_move_down
1036  00FA              ; ---------------------------------
1037  00FA              _spr_move_down:
1038  00FA  2A 00 00    	ld	hl,(_sprite)
1039  00FD  26 00       	ld	h,0x00
1040  00FF  01 00 00    	ld	bc,_lin
1041  0102  09          	add	hl,bc
1042  0103  7E          	ld	a,(hl)
1043  0104  FE 90       	cp	a,0x90
1044  0106  38 2C       	jr	C,l_spr_move_down_00112
1045  0108  3A 00 00    	ld	a,(_sprite)
1046  010B  D6 07       	sub	a,0x07
1047  010D  28 04       	jr	Z,l_spr_move_down_00137
1048  010F  4D          	ld	c,l
1049  0110  44          	ld	b,h
1050  0111  18 1A       	jr	l_spr_move_down_00105
1051  0113              l_spr_move_down_00137:
1052  0113  CD 02 04    	call	_spr_page_down
1053  0116  7D          	ld	a, l
1054  0117  B7          	or	a, a
1055  0118  28 04       	jr	Z,l_spr_move_down_00102
1056  011A  2E 01       	ld	l,0x01
1057  011C  18 67       	jr	l_spr_move_down_00114
1058  011E              l_spr_move_down_00102:
1059  011E  2A 00 00    	ld	hl,(_sprite)
1060  0121  26 00       	ld	h,0x00
1061  0123  01 00 00    	ld	bc,_lin
1062  0126  09          	add	hl,bc
1063  0127  36 90       	ld	(hl),0x90
1064  0129  2E 01       	ld	l,0x01
1065  012B  18 58       	jr	l_spr_move_down_00114
1066  012D              l_spr_move_down_00105:
1067  012D  3E 90       	ld	a,0x90
1068  012F  02          	ld	(bc), a
1069  0130  2E 01       	ld	l,0x01
1070  0132  18 51       	jr	l_spr_move_down_00114
1071  0134              l_spr_move_down_00112:
1072  0134  C6 10       	add	a,0x10
1073  0136  32 00 00    	ld	(_s_lin1),a
1074  0139  07          	rlca
1075  013A  07          	rlca
1076  013B  07          	rlca
1077  013C  07          	rlca
1078  013D  E6 0F       	and	a,0x0f
1079  013F  4F          	ld	c, a
1080  0140  3A 00 00    	ld	a,(_s_lin0)
1081  0143  07          	rlca
1082  0144  07          	rlca
1083  0145  07          	rlca
1084  0146  07          	rlca
1085  0147  E6 0F       	and	a,0x0f
1086  0149  5F          	ld	e, a
1087  014A  79          	ld	a, c
1088  014B  93          	sub	a, e
1089  014C  20 04       	jr	NZ,l_spr_move_down_00138
1090  014E  3E 01       	ld	a,0x01
1091  0150  18 01       	jr	l_spr_move_down_00139
1092  0152              l_spr_move_down_00138:
1093  0152  AF          	xor	a,a
1094  0153              l_spr_move_down_00139:
1095  0153  EE 01       	xor	a,0x01
1096  0155  28 1D       	jr	Z,l_spr_move_down_00110
1097  0157  2A 00 00    	ld	hl,(_sprite)
1098  015A  26 00       	ld	h,0x00
1099  015C  01 00 00    	ld	bc,_col
1100  015F  09          	add	hl,bc
1101  0160  7E          	ld	a,(hl)
1102  0161  F5          	push	af
1103  0162  33          	inc	sp
1104  0163  3A 00 00    	ld	a,(_s_lin1)
1105  0166  F5          	push	af
1106  0167  33          	inc	sp
1107  0168  CD 00 00    	call	_game_check_map
1108  016B  F1          	pop	af
1109  016C  7C          	ld	a,h
1110  016D  B5          	or	a,l
1111  016E  28 04       	jr	Z,l_spr_move_down_00110
1112  0170  2E 01       	ld	l,0x01
1113  0172  18 11       	jr	l_spr_move_down_00114
1114  0174              l_spr_move_down_00110:
1115  0174  2A 00 00    	ld	hl,(_sprite)
1116  0177  26 00       	ld	h,0x00
1117  0179  01 00 00    	ld	bc,_lin
1118  017C  09          	add	hl,bc
1119  017D  3A 00 00    	ld	a,(_s_lin1)
1120  0180  C6 F2       	add	a,0xf2
1121  0182  77          	ld	(hl),a
1122  0183  2E 00       	ld	l,0x00
1123  0185              l_spr_move_down_00114:
1124  0185  C9          	ret
1125  0186              	SECTION code_compiler
1126  0186              ;	---------------------------------
1127  0186              ; Function spr_move_horizontal
1128  0186              ; ---------------------------------
1129  0186              _spr_move_horizontal:
1130  0186  2A 00 00    	ld	hl,(_sprite)
1131  0189  26 00       	ld	h,0x00
1132  018B  01 00 00    	ld	bc,_state
1133  018E  09          	add	hl,bc
1134  018F  7E          	ld	a,(hl)
1135  0190  CB 57       	bit	2, a
1136  0192  28 05       	jr	Z,l_spr_move_horizontal_00104
1137  0194  CD A5 01    	call	_spr_move_right
1138  0197  18 0B       	jr	l_spr_move_horizontal_00106
1139  0199              l_spr_move_horizontal_00104:
1140  0199  CB 5F       	bit	3, a
1141  019B  28 05       	jr	Z,l_spr_move_horizontal_00105
1142  019D  CD A1 02    	call	_spr_move_left
1143  01A0  18 02       	jr	l_spr_move_horizontal_00106
1144  01A2              l_spr_move_horizontal_00105:
1145  01A2  2E 00       	ld	l,0x00
1146  01A4              l_spr_move_horizontal_00106:
1147  01A4  C9          	ret
1148  01A5              	SECTION code_compiler
1149  01A5              ;	---------------------------------
1150  01A5              ; Function spr_move_right
1151  01A5              ; ---------------------------------
1152  01A5              _spr_move_right:
1153  01A5  2A 00 00    	ld	hl,(_sprite)
1154  01A8  26 00       	ld	h,0x00
1155  01AA  01 00 00    	ld	bc,_colint
1156  01AD  09          	add	hl,bc
1157  01AE  7E          	ld	a,(hl)
1158  01AF  3C          	inc	a
1159  01B0  77          	ld	(hl),a
1160  01B1  4F          	ld	c,a
1161  01B2  3A 00 00    	ld	a,(_sprite)
1162  01B5  5F          	ld	e,a
1163  01B6  16 00       	ld	d,0x00
1164  01B8  21 00 00    	ld	hl,_class
1165  01BB  19          	add	hl,de
1166  01BC  5E          	ld	e, (hl)
1167  01BD  16 00       	ld	d,0x00
1168  01BF  21 00 00    	ld	hl,_sprite_frames
1169  01C2  19          	add	hl, de
1170  01C3  7E          	ld	a, (hl)
1171  01C4  91          	sub	a, c
1172  01C5  C2 9E 02    	jp	NZ,l_spr_move_right_00118
1173  01C8  2A 00 00    	ld	hl,(_sprite)
1174  01CB  26 00       	ld	h,0x00
1175  01CD  01 00 00    	ld	bc,_lin
1176  01D0  09          	add	hl,bc
1177  01D1  7E          	ld	a,(hl)
1178  01D2  32 00 00    	ld	(_s_lin1),a
1179  01D5  2A 00 00    	ld	hl,(_sprite)
1180  01D8  26 00       	ld	h,0x00
1181  01DA  01 00 00    	ld	bc,_col
1182  01DD  09          	add	hl,bc
1183  01DE  7E          	ld	a,(hl)
1184  01DF  FE 1E       	cp	a,0x1e
1185  01E1  30 5E       	jr	NC,l_spr_move_right_00108
1186  01E3  3C          	inc	a
1187  01E4  32 00 00    	ld	(_s_col1),a
1188  01E7  21 00 00    	ld	hl,_sprite_horizontal_check
1189  01EA  36 01       	ld	(hl),0x01
1190  01EC  2A FF FF    	ld	hl,(_s_col1 - 1)
1191  01EF  3A 00 00    	ld	a,(_s_lin1)
1192  01F2  6F          	ld	l,a
1193  01F3  E5          	push	hl
1194  01F4  CD 00 00    	call	_game_check_map
1195  01F7  F1          	pop	af
1196  01F8  7D          	ld	a,l
1197  01F9  32 00 00    	ld	(_tmp0),a
1198  01FC  B7          	or	a, a
1199  01FD  20 13       	jr	NZ,l_spr_move_right_00102
1200  01FF  3A 00 00    	ld	a,(_s_lin1)
1201  0202  C6 0F       	add	a,0x0f
1202  0204  4F          	ld	c, a
1203  0205  3A 00 00    	ld	a, (_s_col1)
1204  0208  47          	ld	b,a
1205  0209  C5          	push	bc
1206  020A  CD 00 00    	call	_game_check_map
1207  020D  F1          	pop	af
1208  020E  7D          	ld	a,l
1209  020F  32 00 00    	ld	(_tmp0),a
1210  0212              l_spr_move_right_00102:
1211  0212  21 00 00    	ld	hl,_sprite_horizontal_check
1212  0215  36 00       	ld	(hl),0x00
1213  0217  3A 00 00    	ld	a,(_tmp0)
1214  021A  B7          	or	a, a
1215  021B  28 24       	jr	Z,l_spr_move_right_00108
1216  021D  2A 00 00    	ld	hl,(_sprite)
1217  0220  26 00       	ld	h,0x00
1218  0222  01 00 00    	ld	bc,_colint
1219  0225  09          	add	hl,bc
1220  0226  7E          	ld	a,(hl)
1221  0227  C6 FF       	add	a,0xff
1222  0229  77          	ld	(hl),a
1223  022A  3A 00 00    	ld	a,(_sprite_on_air)
1224  022D  B7          	or	a,a
1225  022E  20 0D       	jr	NZ,l_spr_move_right_00104
1226  0230  2A 00 00    	ld	hl,(_sprite)
1227  0233  26 00       	ld	h,0x00
1228  0235  01 00 00    	ld	bc,_colint
1229  0238  09          	add	hl,bc
1230  0239  7E          	ld	a,(hl)
1231  023A  C6 FF       	add	a,0xff
1232  023C  77          	ld	(hl),a
1233  023D              l_spr_move_right_00104:
1234  023D  2E 01       	ld	l,0x01
1235  023F  18 5F       	jr	l_spr_move_right_00119
1236  0241              l_spr_move_right_00108:
1237  0241  2A 00 00    	ld	hl,(_sprite)
1238  0244  26 00       	ld	h,0x00
1239  0246  01 00 00    	ld	bc,_col
1240  0249  09          	add	hl,bc
1241  024A  34          	inc	(hl)
1242  024B  2A 00 00    	ld	hl,(_sprite)
1243  024E  26 00       	ld	h,0x00
1244  0250  01 00 00    	ld	bc,_colint
1245  0253  09          	add	hl,bc
1246  0254  AF          	xor	a,a
1247  0255  77          	ld	(hl),a
1248  0256  2A 00 00    	ld	hl,(_sprite)
1249  0259  26 00       	ld	h,0x00
1250  025B  01 00 00    	ld	bc,_col
1251  025E  09          	add	hl,bc
1252  025F  5E          	ld	e,(hl)
1253  0260  3E 1E       	ld	a,0x1e
1254  0262  93          	sub	a,e
1255  0263  30 39       	jr	NC,l_spr_move_right_00118
1256  0265  3A 00 00    	ld	a,(_sprite)
1257  0268  D6 07       	sub	a,0x07
1258  026A  28 04       	jr	Z,l_spr_move_right_00156
1259  026C  4D          	ld	c,l
1260  026D  44          	ld	b,h
1261  026E  18 27       	jr	l_spr_move_right_00113
1262  0270              l_spr_move_right_00156:
1263  0270  CD A0 03    	call	_spr_page_right
1264  0273  3A 00 00    	ld	a,(_sprite)
1265  0276  C6 00       	add	a,+((_col) & 0xFF)
1266  0278  4D          	ld	c,l
1267  0279  5F          	ld	e,a
1268  027A  3E 00       	ld	a,+((_col) / 256)
1269  027C  CE 00       	adc	a,0x00
1270  027E  57          	ld	d,a
1271  027F  79          	ld	a, c
1272  0280  B7          	or	a, a
1273  0281  28 0F       	jr	Z,l_spr_move_right_00110
1274  0283  AF          	xor	a, a
1275  0284  12          	ld	(de), a
1276  0285  3A 07 00    	ld	a,(_lin + 7)
1277  0288  32 00 00    	ld	(_player_lin_scr),a
1278  028B  21 00 00    	ld	hl,_player_col_scr
1279  028E  36 00       	ld	(hl),0x00
1280  0290  18 08       	jr	l_spr_move_right_00114
1281  0292              l_spr_move_right_00110:
1282  0292  3E 1E       	ld	a,0x1e
1283  0294  12          	ld	(de), a
1284  0295  18 03       	jr	l_spr_move_right_00114
1285  0297              l_spr_move_right_00113:
1286  0297  3E 1E       	ld	a,0x1e
1287  0299  02          	ld	(bc), a
1288  029A              l_spr_move_right_00114:
1289  029A  2E 01       	ld	l,0x01
1290  029C  18 02       	jr	l_spr_move_right_00119
1291  029E              l_spr_move_right_00118:
1292  029E  2E 00       	ld	l,0x00
1293  02A0              l_spr_move_right_00119:
1294  02A0  C9          	ret
1295  02A1              	SECTION code_compiler
1296  02A1              ;	---------------------------------
1297  02A1              ; Function spr_move_left
1298  02A1              ; ---------------------------------
1299  02A1              _spr_move_left:
1300  02A1  01 00 00    	ld	bc,_colint+0
1301  02A4  79          	ld	a, c
1302  02A5  21 00 00    	ld	hl,_sprite
1303  02A8  86          	add	a, (hl)
1304  02A9  5F          	ld	e, a
1305  02AA  78          	ld	a, b
1306  02AB  CE 00       	adc	a,0x00
1307  02AD  57          	ld	d, a
1308  02AE  1A          	ld	a, (de)
1309  02AF  C6 FF       	add	a,0xff
1310  02B1  12          	ld	(de), a
1311  02B2  79          	ld	a, c
1312  02B3  86          	add	a, (hl)
1313  02B4  5F          	ld	e, a
1314  02B5  78          	ld	a, b
1315  02B6  CE 00       	adc	a,0x00
1316  02B8  57          	ld	d, a
1317  02B9  1A          	ld	a, (de)
1318  02BA  3C          	inc	a
1319  02BB  C2 9D 03    	jp	NZ,l_spr_move_left_00118
1320  02BE  5E          	ld	e,(hl)
1321  02BF  16 00       	ld	d,0x00
1322  02C1  21 00 00    	ld	hl,_lin
1323  02C4  19          	add	hl,de
1324  02C5  7E          	ld	a,(hl)
1325  02C6  32 00 00    	ld	(_s_lin1),a
1326  02C9  2A 00 00    	ld	hl,(_sprite)
1327  02CC  26 00       	ld	h,0x00
1328  02CE  11 00 00    	ld	de,_col
1329  02D1  19          	add	hl,de
1330  02D2  7E          	ld	a,(hl)
1331  02D3  B7          	or	a, a
1332  02D4  28 5A       	jr	Z,l_spr_move_left_00108
1333  02D6  C6 FF       	add	a,0xff
1334  02D8  32 00 00    	ld	(_s_col1),a
1335  02DB  21 00 00    	ld	hl,_sprite_horizontal_check
1336  02DE  36 01       	ld	(hl),0x01
1337  02E0  3A 00 00    	ld	a,(_s_col1)
1338  02E3  C5          	push	bc
1339  02E4  F5          	push	af
1340  02E5  33          	inc	sp
1341  02E6  3A 00 00    	ld	a,(_s_lin1)
1342  02E9  F5          	push	af
1343  02EA  33          	inc	sp
1344  02EB  CD 00 00    	call	_game_check_map
1345  02EE  F1          	pop	af
1346  02EF  C1          	pop	bc
1347  02F0  7D          	ld	a,l
1348  02F1  32 00 00    	ld	(_tmp0),a
1349  02F4  B7          	or	a, a
1350  02F5  20 16       	jr	NZ,l_spr_move_left_00102
1351  02F7  3A 00 00    	ld	a,(_s_lin1)
1352  02FA  C6 0F       	add	a,0x0f
1353  02FC  57          	ld	d, a
1354  02FD  3A 00 00    	ld	a,(_s_col1)
1355  0300  C5          	push	bc
1356  0301  5A          	ld	e,d
1357  0302  57          	ld	d,a
1358  0303  D5          	push	de
1359  0304  CD 00 00    	call	_game_check_map
1360  0307  F1          	pop	af
1361  0308  C1          	pop	bc
1362  0309  7D          	ld	a,l
1363  030A  32 00 00    	ld	(_tmp0),a
1364  030D              l_spr_move_left_00102:
1365  030D  21 00 00    	ld	hl,_sprite_horizontal_check
1366  0310  36 00       	ld	(hl),0x00
1367  0312  3A 00 00    	ld	a,(_tmp0)
1368  0315  B7          	or	a, a
1369  0316  28 18       	jr	Z,l_spr_move_left_00108
1370  0318  2A 00 00    	ld	hl,(_sprite)
1371  031B  26 00       	ld	h,0x00
1372  031D  09          	add	hl,bc
1373  031E  34          	inc	(hl)
1374  031F  3A 00 00    	ld	a,(_sprite_on_air)
1375  0322  B7          	or	a, a
1376  0323  20 07       	jr	NZ,l_spr_move_left_00104
1377  0325  2A 00 00    	ld	hl,(_sprite)
1378  0328  26 00       	ld	h,0x00
1379  032A  09          	add	hl,bc
1380  032B  34          	inc	(hl)
1381  032C              l_spr_move_left_00104:
1382  032C  2E 01       	ld	l,0x01
1383  032E  18 6F       	jr	l_spr_move_left_00119
1384  0330              l_spr_move_left_00108:
1385  0330  2A 00 00    	ld	hl,(_sprite)
1386  0333  26 00       	ld	h,0x00
1387  0335  11 00 00    	ld	de,_col
1388  0338  19          	add	hl,de
1389  0339  7E          	ld	a,(hl)
1390  033A  EB          	ex	de,hl
1391  033B  C6 FF       	add	a,0xff
1392  033D  12          	ld	(de),a
1393  033E  79          	ld	a,c
1394  033F  21 00 00    	ld	hl,_sprite
1395  0342  86          	add	a, (hl)
1396  0343  4F          	ld	c, a
1397  0344  78          	ld	a, b
1398  0345  CE 00       	adc	a,0x00
1399  0347  47          	ld	b, a
1400  0348  5E          	ld	e,(hl)
1401  0349  16 00       	ld	d,0x00
1402  034B  21 00 00    	ld	hl,_class
1403  034E  19          	add	hl,de
1404  034F  5E          	ld	e, (hl)
1405  0350  16 00       	ld	d,0x00
1406  0352  21 00 00    	ld	hl,_sprite_frames
1407  0355  19          	add	hl, de
1408  0356  5E          	ld	e, (hl)
1409  0357  1D          	dec	e
1410  0358  7B          	ld	a, e
1411  0359  02          	ld	(bc), a
1412  035A  2A 00 00    	ld	hl,(_sprite)
1413  035D  26 00       	ld	h,0x00
1414  035F  01 00 00    	ld	bc,_col
1415  0362  09          	add	hl,bc
1416  0363  7E          	ld	a,(hl)
1417  0364  3C          	inc	a
1418  0365  20 36       	jr	NZ,l_spr_move_left_00118
1419  0367  3A 00 00    	ld	a,(_sprite)
1420  036A  D6 07       	sub	a,0x07
1421  036C  4D          	ld	c,l
1422  036D  44          	ld	b,h
1423  036E  20 27       	jr	NZ,l_spr_move_left_00113
1424  0370  CD D3 03    	call	_spr_page_left
1425  0373  3A 00 00    	ld	a,(_sprite)
1426  0376  C6 00       	add	a,+((_col) & 0xFF)
1427  0378  4D          	ld	c,l
1428  0379  5F          	ld	e,a
1429  037A  3E 00       	ld	a,+((_col) / 256)
1430  037C  CE 00       	adc	a,0x00
1431  037E  57          	ld	d,a
1432  037F  79          	ld	a, c
1433  0380  B7          	or	a, a
1434  0381  28 10       	jr	Z,l_spr_move_left_00110
1435  0383  3E 1E       	ld	a,0x1e
1436  0385  12          	ld	(de), a
1437  0386  3A 07 00    	ld	a,(_lin + 7)
1438  0389  32 00 00    	ld	(_player_lin_scr),a
1439  038C  21 00 00    	ld	hl,_player_col_scr
1440  038F  36 1E       	ld	(hl),0x1e
1441  0391  18 06       	jr	l_spr_move_left_00114
1442  0393              l_spr_move_left_00110:
1443  0393  AF          	xor	a, a
1444  0394  12          	ld	(de), a
1445  0395  18 02       	jr	l_spr_move_left_00114
1446  0397              l_spr_move_left_00113:
1447  0397  AF          	xor	a, a
1448  0398  02          	ld	(bc), a
1449  0399              l_spr_move_left_00114:
1450  0399  2E 01       	ld	l,0x01
1451  039B  18 02       	jr	l_spr_move_left_00119
1452  039D              l_spr_move_left_00118:
1453  039D  2E 00       	ld	l,0x00
1454  039F              l_spr_move_left_00119:
1455  039F  C9          	ret
1456  03A0              	SECTION code_compiler
1457  03A0              ;	---------------------------------
1458  03A0              ; Function spr_page_right
1459  03A0              ; ---------------------------------
1460  03A0              _spr_page_right:
1461  03A0  2A FF FF    	ld	hl,(_map_width - 1)
1462  03A3  3A 00 00    	ld	a,(_scr_curr)
1463  03A6  6F          	ld	l,a
1464  03A7  E5          	push	hl
1465  03A8  CD 00 00    	call	__moduchar_callee
1466  03AB  7D          	ld	a, l
1467  03AC  3C          	inc	a
1468  03AD  32 00 00    	ld	(_tmp1),a
1469  03B0  21 00 00    	ld	hl,_map_width
1470  03B3  96          	sub	a, (hl)
1471  03B4  30 1A       	jr	NC,l_spr_page_right_00102
1472  03B6  3A 00 00    	ld	a,(_game_boss)
1473  03B9  B7          	or	a, a
1474  03BA  28 06       	jr	Z,l_spr_page_right_00101
1475  03BC  3A 00 00    	ld	a,(_game_god_mode)
1476  03BF  B7          	or	a, a
1477  03C0  28 0E       	jr	Z,l_spr_page_right_00102
1478  03C2              l_spr_page_right_00101:
1479  03C2  21 00 00    	ld	hl,_scr_curr
1480  03C5  34          	inc	(hl)
1481  03C6  CD FF 04    	call	_spr_page_map
1482  03C9  CD 00 00    	call	_game_draw_screen
1483  03CC  2E 01       	ld	l,0x01
1484  03CE  18 02       	jr	l_spr_page_right_00105
1485  03D0              l_spr_page_right_00102:
1486  03D0  2E 00       	ld	l,0x00
1487  03D2              l_spr_page_right_00105:
1488  03D2  C9          	ret
1489  03D3              	SECTION code_compiler
1490  03D3              ;	---------------------------------
1491  03D3              ; Function spr_page_left
1492  03D3              ; ---------------------------------
1493  03D3              _spr_page_left:
1494  03D3  2A FF FF    	ld	hl,(_map_width - 1)
1495  03D6  3A 00 00    	ld	a,(_scr_curr)
1496  03D9  6F          	ld	l,a
1497  03DA  E5          	push	hl
1498  03DB  CD 00 00    	call	__moduchar_callee
1499  03DE  7D          	ld	a,l
1500  03DF  32 00 00    	ld	(_tmp1),a
1501  03E2  B7          	or	a, a
1502  03E3  28 1A       	jr	Z,l_spr_page_left_00102
1503  03E5  3A 00 00    	ld	a,(_game_boss)
1504  03E8  B7          	or	a, a
1505  03E9  28 06       	jr	Z,l_spr_page_left_00101
1506  03EB  3A 00 00    	ld	a,(_game_god_mode)
1507  03EE  B7          	or	a, a
1508  03EF  28 0E       	jr	Z,l_spr_page_left_00102
1509  03F1              l_spr_page_left_00101:
1510  03F1  21 00 00    	ld	hl,_scr_curr
1511  03F4  35          	dec	(hl)
1512  03F5  CD FF 04    	call	_spr_page_map
1513  03F8  CD 00 00    	call	_game_draw_screen
1514  03FB  2E 01       	ld	l,0x01
1515  03FD  18 02       	jr	l_spr_page_left_00105
1516  03FF              l_spr_page_left_00102:
1517  03FF  2E 00       	ld	l,0x00
1518  0401              l_spr_page_left_00105:
1519  0401  C9          	ret
1520  0402              	SECTION code_compiler
1521  0402              ;	---------------------------------
1522  0402              ; Function spr_page_down
1523  0402              ; ---------------------------------
1524  0402              _spr_page_down:
1525  0402  2A FF FF    	ld	hl,(_map_heigth - 1)
1526  0405  3A 00 00    	ld	a,(_scr_curr)
1527  0408  6F          	ld	l,a
1528  0409  E5          	push	hl
1529  040A  CD 00 00    	call	__divuchar_callee
1530  040D  7D          	ld	a, l
1531  040E  3C          	inc	a
1532  040F  32 00 00    	ld	(_tmp1),a
1533  0412  21 00 00    	ld	hl,_map_heigth
1534  0415  96          	sub	a, (hl)
1535  0416  30 36       	jr	NC,l_spr_page_down_00102
1536  0418  3A 00 00    	ld	a,(_game_boss)
1537  041B  B7          	or	a, a
1538  041C  28 06       	jr	Z,l_spr_page_down_00101
1539  041E  3A 00 00    	ld	a,(_game_god_mode)
1540  0421  B7          	or	a, a
1541  0422  28 2A       	jr	Z,l_spr_page_down_00102
1542  0424              l_spr_page_down_00101:
1543  0424  3A 00 00    	ld	a,(_scr_curr)
1544  0427  21 00 00    	ld	hl,_map_width
1545  042A  86          	add	a, (hl)
1546  042B  32 00 00    	ld	(_scr_curr),a
1547  042E  CD FF 04    	call	_spr_page_map
1548  0431  CD 00 00    	call	_game_draw_screen
1549  0434  21 00 00    	ld	hl,_player_lin_scr
1550  0437  36 08       	ld	(hl),0x08
1551  0439  2A 00 00    	ld	hl,(_sprite)
1552  043C  26 00       	ld	h,0x00
1553  043E  01 00 00    	ld	bc,_lin
1554  0441  09          	add	hl,bc
1555  0442  36 08       	ld	(hl),0x08
1556  0444  3A 07 00    	ld	a,(_col + 0x0007)
1557  0447  32 00 00    	ld	(_player_col_scr),a
1558  044A  2E 01       	ld	l,0x01
1559  044C  18 02       	jr	l_spr_page_down_00105
1560  044E              l_spr_page_down_00102:
1561  044E  2E 00       	ld	l,0x00
1562  0450              l_spr_page_down_00105:
1563  0450  C9          	ret
1564  0451              	SECTION code_compiler
1565  0451              ;	---------------------------------
1566  0451              ; Function spr_page_up
1567  0451              ; ---------------------------------
1568  0451              _spr_page_up:
1569  0451  2A FF FF    	ld	hl,(_map_width - 1)
1570  0454  3A 00 00    	ld	a,(_scr_curr)
1571  0457  6F          	ld	l,a
1572  0458  E5          	push	hl
1573  0459  CD 00 00    	call	__divuchar_callee
1574  045C  7D          	ld	a,l
1575  045D  32 00 00    	ld	(_tmp1),a
1576  0460  B7          	or	a, a
1577  0461  28 36       	jr	Z,l_spr_page_up_00102
1578  0463  3A 00 00    	ld	a,(_game_boss)
1579  0466  B7          	or	a, a
1580  0467  28 06       	jr	Z,l_spr_page_up_00101
1581  0469  3A 00 00    	ld	a,(_game_god_mode)
1582  046C  B7          	or	a, a
1583  046D  28 2A       	jr	Z,l_spr_page_up_00102
1584  046F              l_spr_page_up_00101:
1585  046F  3A 00 00    	ld	a,(_scr_curr)
1586  0472  21 00 00    	ld	hl,_map_width
1587  0475  96          	sub	a, (hl)
1588  0476  32 00 00    	ld	(_scr_curr),a
1589  0479  CD FF 04    	call	_spr_page_map
1590  047C  CD 00 00    	call	_game_draw_screen
1591  047F  2A 00 00    	ld	hl,(_sprite)
1592  0482  26 00       	ld	h,0x00
1593  0484  01 00 00    	ld	bc,_lin
1594  0487  09          	add	hl,bc
1595  0488  36 8C       	ld	(hl),0x8c
1596  048A  21 00 00    	ld	hl,_player_lin_scr
1597  048D  36 8C       	ld	(hl),0x8c
1598  048F  3A 07 00    	ld	a,(_col + 0x0007)
1599  0492  32 00 00    	ld	(_player_col_scr),a
1600  0495  2E 01       	ld	l,0x01
1601  0497  18 02       	jr	l_spr_page_up_00105
1602  0499              l_spr_page_up_00102:
1603  0499  2E 00       	ld	l,0x00
1604  049B              l_spr_page_up_00105:
1605  049B  C9          	ret
1606  049C              	SECTION code_compiler
1607  049C              ;	---------------------------------
1608  049C              ; Function spr_clear_scr
1609  049C              ; ---------------------------------
1610  049C              _spr_clear_scr:
1611  049C  06 00       	ld	b,0x00
1612  049E              l_spr_clear_scr_00105:
1613  049E  C5          	push	bc
1614  049F  21 00 00    	ld	hl,0x0000
1615  04A2  E5          	push	hl
1616  04A3  AF          	xor	a, a
1617  04A4  48          	ld	c,b
1618  04A5  47          	ld	b,a
1619  04A6  C5          	push	bc
1620  04A7  CD 00 00    	call	_NIRVANAP_spriteT_callee
1621  04AA  C1          	pop	bc
1622  04AB  04          	inc	b
1623  04AC  78          	ld	a, b
1624  04AD  D6 08       	sub	a,0x08
1625  04AF  38 ED       	jr	C,l_spr_clear_scr_00105
1626  04B1  76          	halt
1627  04B2  F3          	di
1628  04B3  0E 00       	ld	c,0x00
1629  04B5              l_spr_clear_scr_00117:
1630  04B5  79          	ld	a, c
1631  04B6  87          	add	a, a
1632  04B7  47          	ld	b, a
1633  04B8  50          	ld	d, b
1634  04B9  1E 01       	ld	e,0x01
1635  04BB              l_spr_clear_scr_00107:
1636  04BB  7B          	ld	a, e
1637  04BC  07          	rlca
1638  04BD  07          	rlca
1639  04BE  07          	rlca
1640  04BF  07          	rlca
1641  04C0  E6 F0       	and	a,0xf0
1642  04C2  C5          	push	bc
1643  04C3  D5          	push	de
1644  04C4  5F          	ld	e,a
1645  04C5  D5          	push	de
1646  04C6  AF          	xor	a, a
1647  04C7  F5          	push	af
1648  04C8  33          	inc	sp
1649  04C9  CD 00 00    	call	_NIRVANAP_fillT_raw_callee
1650  04CC  D1          	pop	de
1651  04CD  C1          	pop	bc
1652  04CE  1C          	inc	e
1653  04CF  7B          	ld	a, e
1654  04D0  D6 0A       	sub	a,0x0a
1655  04D2  38 E7       	jr	C,l_spr_clear_scr_00107
1656  04D4  3E 1E       	ld	a,0x1e
1657  04D6  90          	sub	a, b
1658  04D7  47          	ld	b, a
1659  04D8  1E 01       	ld	e,0x01
1660  04DA              l_spr_clear_scr_00109:
1661  04DA  7B          	ld	a, e
1662  04DB  07          	rlca
1663  04DC  07          	rlca
1664  04DD  07          	rlca
1665  04DE  07          	rlca
1666  04DF  E6 F0       	and	a,0xf0
1667  04E1  57          	ld	d, a
1668  04E2  C5          	push	bc
1669  04E3  D5          	push	de
1670  04E4  4A          	ld	c, d
1671  04E5  C5          	push	bc
1672  04E6  AF          	xor	a, a
1673  04E7  F5          	push	af
1674  04E8  33          	inc	sp
1675  04E9  CD 00 00    	call	_NIRVANAP_fillT_raw_callee
1676  04EC  D1          	pop	de
1677  04ED  C1          	pop	bc
1678  04EE  1C          	inc	e
1679  04EF  7B          	ld	a, e
1680  04F0  D6 0A       	sub	a,0x0a
1681  04F2  38 E6       	jr	C,l_spr_clear_scr_00109
1682  04F4  FB          	ei
1683  04F5  76          	halt
1684  04F6  F3          	di
1685  04F7  0C          	inc	c
1686  04F8  79          	ld	a, c
1687  04F9  D6 08       	sub	a,0x08
1688  04FB  38 B8       	jr	C,l_spr_clear_scr_00117
1689  04FD  FB          	ei
1690  04FE  C9          	ret
1691  04FF              	SECTION code_compiler
1692  04FF              ;	---------------------------------
1693  04FF              ; Function spr_page_map
1694  04FF              ; ---------------------------------
1695  04FF              _spr_page_map:
1696  04FF  CD 00 00    	call	___sdcc_enter_ix
1697  0502  21 F1 FF    	ld	hl, -15
1698  0505  39          	add	hl, sp
1699  0506  F9          	ld	sp, hl
1700  0507  21 00 00    	ld	hl,_game_world
1701  050A  4E          	ld	c, (hl)
1702  050B  21 00 00    	ld	hl,_scr_curr
1703  050E  46          	ld	b, (hl)
1704  050F  DD 36 F3 10 	ld	(ix-13),0x10
1705  0513  C5          	push	bc
1706  0514  CD 9C 04    	call	_spr_clear_scr
1707  0517  C1          	pop	bc
1708  0518  F3          	di
1709  0519  21 00 00    	ld	hl,_GLOBAL_ZX_PORT_7FFD
1710  051C  36 16       	ld	(hl),0x16
1711  051E  C5          	push	bc
1712  051F  3E 16       	ld	a,0x16
1713  0521  01 FD 7F    	ld	bc,_IO_7FFD
1714  0524  ED 79       	out	(c),a
1715  0526  C1          	pop	bc
1716  0527  78          	ld	a, b
1717  0528  3C          	inc	a
1718  0529  20 04       	jr	NZ,l_spr_page_map_00207
1719  052B  3E 01       	ld	a,0x01
1720  052D  18 01       	jr	l_spr_page_map_00208
1721  052F              l_spr_page_map_00207:
1722  052F  AF          	xor	a,a
1723  0530              l_spr_page_map_00208:
1724  0530  5F          	ld	e, a
1725  0531  79          	ld	a, c
1726  0532  B7          	or	a,a
1727  0533  20 22       	jr	NZ,l_spr_page_map_00106
1728  0535  B3          	or	a,e
1729  0536  28 04       	jr	Z,l_spr_page_map_00102
1730  0538  21 00 00    	ld	hl,_start_scr0
1731  053B  46          	ld	b, (hl)
1732  053C              l_spr_page_map_00102:
1733  053C  11 00 00    	ld	de,_paper0+0
1734  053F  68          	ld	l,b
1735  0540  26 00       	ld	h,0x00
1736  0542  19          	add	hl, de
1737  0543  7E          	ld	a, (hl)
1738  0544  DD 77 FF    	ld	(ix-1),a
1739  0547  21 00 00    	ld	hl,_world0_w
1740  054A  5E          	ld	e, (hl)
1741  054B  DD 73 FE    	ld	(ix-2),e
1742  054E  21 00 00    	ld	hl,_world0_h
1743  0551  5E          	ld	e, (hl)
1744  0552  DD 73 FD    	ld	(ix-3),e
1745  0555  18 21       	jr	l_spr_page_map_00107
1746  0557              l_spr_page_map_00106:
1747  0557  7B          	ld	a, e
1748  0558  B7          	or	a, a
1749  0559  28 04       	jr	Z,l_spr_page_map_00104
1750  055B  21 00 00    	ld	hl,_start_scr1
1751  055E  46          	ld	b, (hl)
1752  055F              l_spr_page_map_00104:
1753  055F  11 00 00    	ld	de,_paper1+0
1754  0562  68          	ld	l,b
1755  0563  26 00       	ld	h,0x00
1756  0565  19          	add	hl, de
1757  0566  7E          	ld	a, (hl)
1758  0567  DD 77 FF    	ld	(ix-1),a
1759  056A  21 00 00    	ld	hl,_world1_w
1760  056D  5E          	ld	e, (hl)
1761  056E  DD 73 FE    	ld	(ix-2),e
1762  0571  21 00 00    	ld	hl,_world1_h
1763  0574  5E          	ld	e, (hl)
1764  0575  DD 73 FD    	ld	(ix-3),e
1765  0578              l_spr_page_map_00107:
1766  0578  21 00 00    	ld	hl,_GLOBAL_ZX_PORT_7FFD
1767  057B  36 10       	ld	(hl),0x10
1768  057D  C5          	push	bc
1769  057E  3E 10       	ld	a,0x10
1770  0580  01 FD 7F    	ld	bc,_IO_7FFD
1771  0583  ED 79       	out	(c),a
1772  0585  C1          	pop	bc
1773  0586  21 00 00    	ld	hl,0x0000
1774  0589  E3          	ex	(sp), hl
1775  058A  DD 36 F4 00 	ld	(ix-12),0x00
1776  058E              l_spr_page_map_00111:
1777  058E  DD 7E F4    	ld	a,(ix-12)
1778  0591  90          	sub	a, b
1779  0592  30 51       	jr	NC,l_spr_page_map_00113
1780  0594  21 00 00    	ld	hl,_GLOBAL_ZX_PORT_7FFD
1781  0597  36 16       	ld	(hl),0x16
1782  0599  C5          	push	bc
1783  059A  3E 16       	ld	a,0x16
1784  059C  01 FD 7F    	ld	bc,_IO_7FFD
1785  059F  ED 79       	out	(c),a
1786  05A1  C1          	pop	bc
1787  05A2  79          	ld	a, c
1788  05A3  B7          	or	a, a
1789  05A4  20 10       	jr	NZ,l_spr_page_map_00109
1790  05A6  3E 00       	ld	a, +((_lenght0) & 0xFF)
1791  05A8  DD 86 F4    	add	a,(ix-12)
1792  05AB  6F          	ld	l, a
1793  05AC  3E 00       	ld	a, +((_lenght0) / 256)
1794  05AE  CE 00       	adc	a,0x00
1795  05B0  67          	ld	h, a
1796  05B1  5E          	ld	e, (hl)
1797  05B2  16 00       	ld	d,0x00
1798  05B4  18 0E       	jr	l_spr_page_map_00110
1799  05B6              l_spr_page_map_00109:
1800  05B6  3E 00       	ld	a, +((_lenght1) & 0xFF)
1801  05B8  DD 86 F4    	add	a,(ix-12)
1802  05BB  6F          	ld	l, a
1803  05BC  3E 00       	ld	a, +((_lenght1) / 256)
1804  05BE  CE 00       	adc	a,0x00
1805  05C0  67          	ld	h, a
1806  05C1  5E          	ld	e, (hl)
1807  05C2  16 00       	ld	d,0x00
1808  05C4              l_spr_page_map_00110:
1809  05C4  21 00 00    	ld	hl,_GLOBAL_ZX_PORT_7FFD
1810  05C7  36 10       	ld	(hl),0x10
1811  05C9  C5          	push	bc
1812  05CA  3E 10       	ld	a,0x10
1813  05CC  01 FD 7F    	ld	bc,_IO_7FFD
1814  05CF  ED 79       	out	(c),a
1815  05D1  C1          	pop	bc
1816  05D2  DD 7E F1    	ld	a,(ix-15)
1817  05D5  83          	add	a, e
1818  05D6  DD 77 F1    	ld	(ix-15),a
1819  05D9  DD 7E F2    	ld	a,(ix-14)
1820  05DC  8A          	adc	a, d
1821  05DD  DD 77 F2    	ld	(ix-14),a
1822  05E0  DD 34 F4    	inc	(ix-12)
1823  05E3  18 A9       	jr	l_spr_page_map_00111
1824  05E5              l_spr_page_map_00113:
1825  05E5  FB          	ei
1826  05E6  F3          	di
1827  05E7  DD 36 F5 00 	ld	(ix-11),0x00
1828  05EB              l_spr_page_map_00137:
1829  05EB  21 00 00    	ld	hl,_GLOBAL_ZX_PORT_7FFD
1830  05EE  36 16       	ld	(hl),0x16
1831  05F0  C5          	push	bc
1832  05F1  3E 16       	ld	a,0x16
1833  05F3  01 FD 7F    	ld	bc,_IO_7FFD
1834  05F6  ED 79       	out	(c),a
1835  05F8  C1          	pop	bc
1836  05F9  DD 5E F5    	ld	e,(ix-11)
1837  05FC  16 00       	ld	d,0x00
1838  05FE  DD 6E F1    	ld	l,(ix-15)
1839  0601  DD 66 F2    	ld	h,(ix-14)
1840  0604  19          	add	hl,de
1841  0605  EB          	ex	de,hl
1842  0606  21 01 00    	ld	hl,0x0001
1843  0609  19          	add	hl,de
1844  060A  DD 75 FB    	ld	(ix-5),l
1845  060D  DD 74 FC    	ld	(ix-4),h
1846  0610  79          	ld	a, c
1847  0611  B7          	or	a, a
1848  0612  20 18       	jr	NZ,l_spr_page_map_00115
1849  0614  21 00 00    	ld	hl,_world0
1850  0617  19          	add	hl, de
1851  0618  7E          	ld	a, (hl)
1852  0619  DD 77 F8    	ld	(ix-8),a
1853  061C  11 00 00    	ld	de,_world0
1854  061F  DD 6E FB    	ld	l,(ix-5)
1855  0622  DD 66 FC    	ld	h,(ix-4)
1856  0625  19          	add	hl,de
1857  0626  7E          	ld	a, (hl)
1858  0627  DD 77 F7    	ld	(ix-9),a
1859  062A  18 16       	jr	l_spr_page_map_00116
1860  062C              l_spr_page_map_00115:
1861  062C  21 00 00    	ld	hl,_world1
1862  062F  19          	add	hl, de
1863  0630  7E          	ld	a, (hl)
1864  0631  DD 77 F8    	ld	(ix-8),a
1865  0634  11 00 00    	ld	de,_world1
1866  0637  DD 6E FB    	ld	l,(ix-5)
1867  063A  DD 66 FC    	ld	h,(ix-4)
1868  063D  19          	add	hl,de
1869  063E  7E          	ld	a, (hl)
1870  063F  DD 77 F7    	ld	(ix-9),a
1871  0642              l_spr_page_map_00116:
1872  0642  21 00 00    	ld	hl,_GLOBAL_ZX_PORT_7FFD
1873  0645  36 10       	ld	(hl),0x10
1874  0647  C5          	push	bc
1875  0648  3E 10       	ld	a,0x10
1876  064A  01 FD 7F    	ld	bc,_IO_7FFD
1877  064D  ED 79       	out	(c),a
1878  064F  C1          	pop	bc
1879  0650  DD 7E F8    	ld	a,(ix-8)
1880  0653  D6 80       	sub	a,0x80
1881  0655  30 4F       	jr	NC,l_spr_page_map_00127
1882  0657  DD 7E F3    	ld	a,(ix-13)
1883  065A  DD 77 FB    	ld	(ix-5),a
1884  065D  DD 36 FC 00 	ld	(ix-4),0x00
1885  0661  C5          	push	bc
1886  0662  DD 6E FB    	ld	l,(ix-5)
1887  0665  DD 66 FC    	ld	h,(ix-4)
1888  0668  CD 00 00    	call	_game_obj_chk
1889  066B  C1          	pop	bc
1890  066C  5D          	ld	e,l
1891  066D  3E 00       	ld	a, +((_scr_map) & 0xFF)
1892  066F  DD 86 F3    	add	a,(ix-13)
1893  0672  DD 77 F9    	ld	(ix-7),a
1894  0675  3E 00       	ld	a, +((_scr_map) / 256)
1895  0677  CE 00       	adc	a,0x00
1896  0679  DD 77 FA    	ld	(ix-6),a
1897  067C  7B          	ld	a, e
1898  067D  B7          	or	a, a
1899  067E  20 0C       	jr	NZ,l_spr_page_map_00118
1900  0680  DD 6E F9    	ld	l,(ix-7)
1901  0683  DD 66 FA    	ld	h,(ix-6)
1902  0686  DD 7E F8    	ld	a,(ix-8)
1903  0689  77          	ld	(hl), a
1904  068A  18 15       	jr	l_spr_page_map_00119
1905  068C              l_spr_page_map_00118:
1906  068C  C5          	push	bc
1907  068D  DD 6E FB    	ld	l,(ix-5)
1908  0690  DD 66 FC    	ld	h,(ix-4)
1909  0693  E5          	push	hl
1910  0694  CD 00 00    	call	_game_match_back
1911  0697  F1          	pop	af
1912  0698  C1          	pop	bc
1913  0699  5D          	ld	e,l
1914  069A  DD 6E F9    	ld	l,(ix-7)
1915  069D  DD 66 FA    	ld	h,(ix-6)
1916  06A0  73          	ld	(hl), e
1917  06A1              l_spr_page_map_00119:
1918  06A1  DD 34 F3    	inc	(ix-13)
1919  06A4  18 6D       	jr	l_spr_page_map_00128
1920  06A6              l_spr_page_map_00127:
1921  06A6  DD 7E F8    	ld	a,(ix-8)
1922  06A9  C6 80       	add	a,0x80
1923  06AB  DD 77 F6    	ld	(ix-10),a
1924  06AE  DD 5E F3    	ld	e,(ix-13)
1925  06B1  16 00       	ld	d,0x00
1926  06B3              l_spr_page_map_00135:
1927  06B3  7A          	ld	a, d
1928  06B4  DD 96 F6    	sub	a,(ix-10)
1929  06B7  30 54       	jr	NC,l_spr_page_map_00158
1930  06B9  DD 73 F9    	ld	(ix-7),e
1931  06BC  DD 36 FA 00 	ld	(ix-6),0x00
1932  06C0  C5          	push	bc
1933  06C1  D5          	push	de
1934  06C2  DD 6E F9    	ld	l,(ix-7)
1935  06C5  DD 66 FA    	ld	h,(ix-6)
1936  06C8  CD 00 00    	call	_game_obj_chk
1937  06CB  D1          	pop	de
1938  06CC  C1          	pop	bc
1939  06CD  7D          	ld	a,l
1940  06CE  B7          	or	a, a
1941  06CF  20 0F       	jr	NZ,l_spr_page_map_00121
1942  06D1  3E 00       	ld	a, +((_scr_map) & 0xFF)
1943  06D3  83          	add	a, e
1944  06D4  6F          	ld	l, a
1945  06D5  3E 00       	ld	a, +((_scr_map) / 256)
1946  06D7  CE 00       	adc	a,0x00
1947  06D9  67          	ld	h, a
1948  06DA  DD 7E F7    	ld	a,(ix-9)
1949  06DD  77          	ld	(hl), a
1950  06DE  18 24       	jr	l_spr_page_map_00122
1951  06E0              l_spr_page_map_00121:
1952  06E0  3E 00       	ld	a, +((_scr_map) & 0xFF)
1953  06E2  83          	add	a, e
1954  06E3  DD 77 FB    	ld	(ix-5),a
1955  06E6  3E 00       	ld	a, +((_scr_map) / 256)
1956  06E8  CE 00       	adc	a,0x00
1957  06EA  DD 77 FC    	ld	(ix-4),a
1958  06ED  C5          	push	bc
1959  06EE  D5          	push	de
1960  06EF  DD 6E F9    	ld	l,(ix-7)
1961  06F2  DD 66 FA    	ld	h,(ix-6)
1962  06F5  E5          	push	hl
1963  06F6  CD 00 00    	call	_game_match_back
1964  06F9  F1          	pop	af
1965  06FA  D1          	pop	de
1966  06FB  C1          	pop	bc
1967  06FC  7D          	ld	a,l
1968  06FD  DD 6E FB    	ld	l,(ix-5)
1969  0700  DD 66 FC    	ld	h,(ix-4)
1970  0703  77          	ld	(hl), a
1971  0704              l_spr_page_map_00122:
1972  0704  1C          	inc	e
1973  0705  7B          	ld	a, e
1974  0706  D6 A0       	sub	a,0xa0
1975  0708  30 03       	jr	NC,l_spr_page_map_00158
1976  070A  14          	inc	d
1977  070B  18 A6       	jr	l_spr_page_map_00135
1978  070D              l_spr_page_map_00158:
1979  070D  DD 73 F3    	ld	(ix-13),e
1980  0710  DD 34 F5    	inc	(ix-11)
1981  0713              l_spr_page_map_00128:
1982  0713  DD 7E F3    	ld	a,(ix-13)
1983  0716  D6 A0       	sub	a,0xa0
1984  0718  30 0B       	jr	NC,l_spr_page_map_00131
1985  071A  DD 34 F5    	inc	(ix-11)
1986  071D  DD 7E F5    	ld	a,(ix-11)
1987  0720  D6 A0       	sub	a,0xa0
1988  0722  DA EB 05    	jp	C, l_spr_page_map_00137
1989  0725              l_spr_page_map_00131:
1990  0725  21 00 00    	ld	hl,_scr_curr
1991  0728  70          	ld	(hl), b
1992  0729  DD 7E FE    	ld	a,(ix-2)
1993  072C  32 00 00    	ld	(_map_width),a
1994  072F  DD 7E FD    	ld	a,(ix-3)
1995  0732  32 00 00    	ld	(_map_heigth),a
1996  0735  DD 7E FF    	ld	a,(ix-1)
1997  0738  32 00 00    	ld	(_map_paper),a
1998  073B  CD 24 0D    	call	_spr_init_anim_bullets
1999  073E  3A 00 00    	ld	a,(_map_paper_last)
2000  0741  21 00 00    	ld	hl,_map_paper
2001  0744  96          	sub	a, (hl)
2002  0745  28 03       	jr	Z,l_spr_page_map_00133
2003  0747  CD 7E 15    	call	_spr_btile_paint_back
2004  074A              l_spr_page_map_00133:
2005  074A  3A 00 00    	ld	a,(_map_paper)
2006  074D  32 00 00    	ld	(_map_paper_last),a
2007  0750  FB          	ei
2008  0751  CD 00 00    	call	_NIRVANAP_start
2009  0754  21 00 00    	ld	hl,_screen_ink
2010  0757  36 06       	ld	(hl),0x06
2011  0759  21 00 00    	ld	hl,___str_0
2012  075C  E5          	push	hl
2013  075D  21 17 0C    	ld	hl,0x0c17
2014  0760  E5          	push	hl
2015  0761  CD 00 00    	call	_zx_print_str
2016  0764  3A 00 00    	ld	a,(_scr_curr)
2017  0767  F5          	push	af
2018  0768  33          	inc	sp
2019  0769  21 17 10    	ld	hl,0x1017
2020  076C  E5          	push	hl
2021  076D  CD 00 00    	call	_zx_print_chr
2022  0770  DD F9       	ld	sp, ix
2023  0772  DD E1       	pop	ix
2024  0774  C9          	ret
2025  0775              	SECTION rodata_compiler
2026  0000              ___str_0:
2027  0000  53 43 52 3A 	DEFM "SCR:"
2028  0004  00          	DEFB 0x00
2029  0005              	SECTION code_compiler
2030  0775              ;	---------------------------------
2031  0775              ; Function spr_redraw
2032  0775              ; ---------------------------------
2033  0775              _spr_redraw:
2034  0775  2A 00 00    	ld	hl,(_sprite)
2035  0778  26 00       	ld	h,0x00
2036  077A  01 00 00    	ld	bc,_tile
2037  077D  09          	add	hl,bc
2038  077E  4E          	ld	c, (hl)
2039  077F  3A 00 00    	ld	a,(_sprite)
2040  0782  5F          	ld	e,a
2041  0783  16 00       	ld	d,0x00
2042  0785  21 00 00    	ld	hl,_colint
2043  0788  19          	add	hl,de
2044  0789  7E          	ld	a,(hl)
2045  078A  81          	add	a,c
2046  078B  32 00 00    	ld	(_s_tile1),a
2047  078E  2A 00 00    	ld	hl,(_sprite)
2048  0791  26 00       	ld	h,0x00
2049  0793  01 00 00    	ld	bc,_col
2050  0796  09          	add	hl,bc
2051  0797  7E          	ld	a,(hl)
2052  0798  32 00 00    	ld	(_s_col1),a
2053  079B  2A 00 00    	ld	hl,(_sprite)
2054  079E  26 00       	ld	h,0x00
2055  07A0  01 00 00    	ld	bc,_lin
2056  07A3  09          	add	hl,bc
2057  07A4  7E          	ld	a,(hl)
2058  07A5  4D          	ld	c,l
2059  07A6  32 00 00    	ld	(_s_lin1),a
2060  07A9  21 00 00    	ld	hl,_s_lin0
2061  07AC  96          	sub	a, (hl)
2062  07AD  20 0A       	jr	NZ,l_spr_redraw_00117
2063  07AF  3A 00 00    	ld	a,(_s_col1)
2064  07B2  21 00 00    	ld	hl,_s_col0
2065  07B5  96          	sub	a, (hl)
2066  07B6  CA 6C 08    	jp	Z,l_spr_redraw_00118
2067  07B9              l_spr_redraw_00117:
2068  07B9  3A 00 00    	ld	a,(_sprite)
2069  07BC  D6 07       	sub	a,0x07
2070  07BE  20 3A       	jr	NZ,l_spr_redraw_00113
2071  07C0  3A 00 00    	ld	a,(_player_onstair)
2072  07C3  B7          	or	a, a
2073  07C4  28 2F       	jr	Z,l_spr_redraw_00104
2074  07C6  3A 07 00    	ld	a, (_lin + 7)
2075  07C9  E6 03       	and	a,0x03
2076  07CB  20 28       	jr	NZ,l_spr_redraw_00104
2077  07CD  21 00 00    	ld	hl,_player_anim_stair
2078  07D0  34          	inc	(hl)
2079  07D1  20 02       	jr	NZ,l_spr_redraw_00162
2080  07D3  23          	inc	hl
2081  07D4  34          	inc	(hl)
2082  07D5              l_spr_redraw_00162:
2083  07D5  3E 01       	ld	a,0x01
2084  07D7  21 00 00    	ld	hl,_player_anim_stair
2085  07DA  BE          	cp	a, (hl)
2086  07DB  3E 00       	ld	a,0x00
2087  07DD  23          	inc	hl
2088  07DE  9E          	sbc	a, (hl)
2089  07DF  30 05       	jr	NC,l_spr_redraw_00102
2090  07E1  2B          	dec	hl
2091  07E2  AF          	xor	a, a
2092  07E3  77          	ld	(hl), a
2093  07E4  23          	inc	hl
2094  07E5  77          	ld	(hl), a
2095  07E6              l_spr_redraw_00102:
2096  07E6  21 07 00    	ld	hl,_tile + 7
2097  07E9  4E          	ld	c, (hl)
2098  07EA  21 00 00    	ld	hl,_player_anim_stair
2099  07ED  46          	ld	b, (hl)
2100  07EE  79          	ld	a, c
2101  07EF  80          	add	a, b
2102  07F0  C6 04       	add	a,0x04
2103  07F2  32 00 00    	ld	(_s_tile1),a
2104  07F5              l_spr_redraw_00104:
2105  07F5  CD 9B 0B    	call	_spr_back_repaint
2106  07F8  18 5B       	jr	l_spr_redraw_00114
2107  07FA              l_spr_redraw_00113:
2108  07FA  3A 00 00    	ld	a,(_s_lin1)
2109  07FD  E6 07       	and	a,0x07
2110  07FF  20 05       	jr	NZ,l_spr_redraw_00110
2111  0801  CD 9B 0B    	call	_spr_back_repaint
2112  0804  18 4F       	jr	l_spr_redraw_00114
2113  0806              l_spr_redraw_00110:
2114  0806  21 00 00    	ld	hl,_s_state
2115  0809  CB 46       	bit	0, (hl)
2116  080B  28 26       	jr	Z,l_spr_redraw_00107
2117  080D  3A 00 00    	ld	a,(_s_lin0)
2118  0810  C6 08       	add	a,0x08
2119  0812  47          	ld	b, a
2120  0813  3A 00 00    	ld	a,(_s_col0)
2121  0816  F5          	push	af
2122  0817  33          	inc	sp
2123  0818  C5          	push	bc
2124  0819  33          	inc	sp
2125  081A  3A 00 00    	ld	a,(_map_paper_clr)
2126  081D  F5          	push	af
2127  081E  33          	inc	sp
2128  081F  CD 00 00    	call	_NIRVANAP_fillC_callee
2129  0822  21 00 00    	ld	hl,_s_col0
2130  0825  56          	ld	d, (hl)
2131  0826  14          	inc	d
2132  0827  58          	ld	e,b
2133  0828  3A 00 00    	ld	a,(_map_paper_clr)
2134  082B  D5          	push	de
2135  082C  F5          	push	af
2136  082D  33          	inc	sp
2137  082E  CD 00 00    	call	_NIRVANAP_fillC_callee
2138  0831  18 22       	jr	l_spr_redraw_00114
2139  0833              l_spr_redraw_00107:
2140  0833  2A FF FF    	ld	hl,(_s_col0 - 1)
2141  0836  3A 00 00    	ld	a,(_s_lin0)
2142  0839  6F          	ld	l,a
2143  083A  3A 00 00    	ld	a,(_map_paper_clr)
2144  083D  E5          	push	hl
2145  083E  F5          	push	af
2146  083F  33          	inc	sp
2147  0840  CD 00 00    	call	_NIRVANAP_fillC_callee
2148  0843  21 00 00    	ld	hl,_s_col0
2149  0846  46          	ld	b, (hl)
2150  0847  04          	inc	b
2151  0848  C5          	push	bc
2152  0849  33          	inc	sp
2153  084A  2A FF FF    	ld	hl,(_s_lin0 - 1)
2154  084D  3A 00 00    	ld	a,(_map_paper_clr)
2155  0850  6F          	ld	l,a
2156  0851  E5          	push	hl
2157  0852  CD 00 00    	call	_NIRVANAP_fillC_callee
2158  0855              l_spr_redraw_00114:
2159  0855  2A FF FF    	ld	hl,(_s_col1 - 1)
2160  0858  3A 00 00    	ld	a,(_s_lin1)
2161  085B  6F          	ld	l,a
2162  085C  E5          	push	hl
2163  085D  2A FF FF    	ld	hl,(_s_tile1 - 1)
2164  0860  3A 00 00    	ld	a,(_sprite)
2165  0863  6F          	ld	l,a
2166  0864  E5          	push	hl
2167  0865  CD 00 00    	call	_NIRVANAP_spriteT_callee
2168  0868  2E 01       	ld	l,0x01
2169  086A  18 22       	jr	l_spr_redraw_00121
2170  086C              l_spr_redraw_00118:
2171  086C  3A 00 00    	ld	a,(_s_tile1)
2172  086F  21 00 00    	ld	hl,_s_tile0
2173  0872  96          	sub	a, (hl)
2174  0873  28 17       	jr	Z,l_spr_redraw_00119
2175  0875  2A FF FF    	ld	hl,(_s_col1 - 1)
2176  0878  3A 00 00    	ld	a,(_s_lin1)
2177  087B  6F          	ld	l,a
2178  087C  E5          	push	hl
2179  087D  2A FF FF    	ld	hl,(_s_tile1 - 1)
2180  0880  3A 00 00    	ld	a,(_sprite)
2181  0883  6F          	ld	l,a
2182  0884  E5          	push	hl
2183  0885  CD 00 00    	call	_NIRVANAP_spriteT_callee
2184  0888  2E 00       	ld	l,0x00
2185  088A  18 02       	jr	l_spr_redraw_00121
2186  088C              l_spr_redraw_00119:
2187  088C  2E 00       	ld	l,0x00
2188  088E              l_spr_redraw_00121:
2189  088E  C9          	ret
2190  088F              	SECTION code_compiler
2191  088F              ;	---------------------------------
2192  088F              ; Function spr_destroy
2193  088F              ; ---------------------------------
2194  088F              _spr_destroy:
2195  088F  CD 00 00    	call	___sdcc_enter_ix
2196  0892  F5          	push	af
2197  0893  F5          	push	af
2198  0894  45          	ld	b, l
2199  0895  21 00 00    	ld	hl,_spr_count
2200  0898  35          	dec	(hl)
2201  0899  3E 00       	ld	a, +((_lin) & 0xFF)
2202  089B  80          	add	a, b
2203  089C  DD 77 FC    	ld	(ix-4),a
2204  089F  3E 00       	ld	a, +((_lin) / 256)
2205  08A1  CE 00       	adc	a,0x00
2206  08A3  DD 77 FD    	ld	(ix-3),a
2207  08A6  E1          	pop	hl
2208  08A7  7E          	ld	a,(hl)
2209  08A8  E5          	push	hl
2210  08A9  32 00 00    	ld	(_s_lin0),a
2211  08AC  3E 00       	ld	a, +((_col) & 0xFF)
2212  08AE  80          	add	a, b
2213  08AF  DD 77 FE    	ld	(ix-2),a
2214  08B2  6F          	ld	l,a
2215  08B3  3E 00       	ld	a,+((_col) / 256)
2216  08B5  CE 00       	adc	a,0x00
2217  08B7  DD 77 FF    	ld	(ix-1),a
2218  08BA  67          	ld	h,a
2219  08BB  7E          	ld	a, (hl)
2220  08BC  32 00 00    	ld	(_s_col0),a
2221  08BF  C5          	push	bc
2222  08C0  F5          	push	af
2223  08C1  33          	inc	sp
2224  08C2  3A 00 00    	ld	a,(_s_lin0)
2225  08C5  F5          	push	af
2226  08C6  33          	inc	sp
2227  08C7  CD 00 00    	call	_spr_calc_index
2228  08CA  F1          	pop	af
2229  08CB  EB          	ex	de,hl
2230  08CC  C1          	pop	bc
2231  08CD  EB          	ex	de,hl
2232  08CE  22 00 00    	ld	(_index0),hl
2233  08D1  C5          	push	bc
2234  08D2  E5          	push	hl
2235  08D3  CD 00 00    	call	_game_match_back
2236  08D6  F1          	pop	af
2237  08D7  C1          	pop	bc
2238  08D8  7D          	ld	a,l
2239  08D9  32 00 00    	ld	(_s_tile0),a
2240  08DC  C5          	push	bc
2241  08DD  21 00 00    	ld	hl,0x0000
2242  08E0  E5          	push	hl
2243  08E1  48          	ld	c,b
2244  08E2  47          	ld	b,a
2245  08E3  C5          	push	bc
2246  08E4  CD 00 00    	call	_NIRVANAP_spriteT_callee
2247  08E7  CD 9B 0B    	call	_spr_back_repaint
2248  08EA  C1          	pop	bc
2249  08EB  3E 00       	ld	a, +((_tile) & 0xFF)
2250  08ED  80          	add	a, b
2251  08EE  5F          	ld	e, a
2252  08EF  3E 00       	ld	a, +((_tile) / 256)
2253  08F1  CE 00       	adc	a,0x00
2254  08F3  57          	ld	d, a
2255  08F4  3A 00 00    	ld	a,(_s_tile0)
2256  08F7  12          	ld	(de), a
2257  08F8  DD 6E FE    	ld	l,(ix-2)
2258  08FB  DD 66 FF    	ld	h,(ix-1)
2259  08FE  36 00       	ld	(hl),0x00
2260  0900  E1          	pop	hl
2261  0901  E5          	push	hl
2262  0902  36 00       	ld	(hl),0x00
2263  0904  11 00 00    	ld	de,_class+0
2264  0907  68          	ld	l,b
2265  0908  26 00       	ld	h,0x00
2266  090A  19          	add	hl, de
2267  090B  36 00       	ld	(hl),0x00
2268  090D  11 00 00    	ld	de,_state+0
2269  0910  68          	ld	l,b
2270  0911  26 00       	ld	h,0x00
2271  0913  19          	add	hl, de
2272  0914  36 00       	ld	(hl),0x00
2273  0916  11 00 00    	ld	de,_state_a+0
2274  0919  68          	ld	l,b
2275  091A  26 00       	ld	h,0x00
2276  091C  19          	add	hl, de
2277  091D  36 00       	ld	(hl),0x00
2278  091F  DD F9       	ld	sp, ix
2279  0921  DD E1       	pop	ix
2280  0923  C9          	ret
2281  0924              	SECTION code_compiler
2282  0924              ;	---------------------------------
2283  0924              ; Function spr_tile
2284  0924              ; ---------------------------------
2285  0924              _spr_tile:
2286  0924  45          	ld	b,l
2287  0925  11 00 00    	ld	de,_class+0
2288  0928  26 00       	ld	h,0x00
2289  092A  19          	add	hl, de
2290  092B  5E          	ld	e, (hl)
2291  092C  3E 13       	ld	a,0x13
2292  092E  93          	sub	a, e
2293  092F  DA 62 0A    	jp	C, l_spr_tile_00116
2294  0932  16 00       	ld	d,0x00
2295  0934  21 3B 09    	ld	hl,l_spr_tile_00123
2296  0937  19          	add	hl, de
2297  0938  19          	add	hl, de
2298  0939  19          	add	hl, de
2299  093A  E9          	jp	(hl)
2300  093B              l_spr_tile_00123:
2301  093B  C3 62 0A    	jp	l_spr_tile_00116
2302  093E  C3 62 0A    	jp	l_spr_tile_00116
2303  0941  C3 C9 09    	jp	l_spr_tile_00106
2304  0944  C3 DA 09    	jp	l_spr_tile_00107
2305  0947  C3 EA 09    	jp	l_spr_tile_00108
2306  094A  C3 F9 09    	jp	l_spr_tile_00109
2307  094D  C3 35 0A    	jp	l_spr_tile_00113
2308  0950  C3 44 0A    	jp	l_spr_tile_00114
2309  0953  C3 53 0A    	jp	l_spr_tile_00115
2310  0956  C3 62 0A    	jp	l_spr_tile_00116
2311  0959  C3 62 0A    	jp	l_spr_tile_00116
2312  095C  C3 77 09    	jp	l_spr_tile_00101
2313  095F  C3 87 09    	jp	l_spr_tile_00102
2314  0962  C3 97 09    	jp	l_spr_tile_00103
2315  0965  C3 A8 09    	jp	l_spr_tile_00104
2316  0968  C3 B8 09    	jp	l_spr_tile_00105
2317  096B  C3 08 0A    	jp	l_spr_tile_00110
2318  096E  C3 62 0A    	jp	l_spr_tile_00116
2319  0971  C3 17 0A    	jp	l_spr_tile_00111
2320  0974  C3 26 0A    	jp	l_spr_tile_00112
2321  0977              l_spr_tile_00101:
2322  0977  AF          	xor	a, a
2323  0978  48          	ld	c,b
2324  0979  47          	ld	b,a
2325  097A  C5          	push	bc
2326  097B  3E 90       	ld	a,0x90
2327  097D  F5          	push	af
2328  097E  33          	inc	sp
2329  097F  CD 65 0A    	call	_spr_tile_dir
2330  0982  F1          	pop	af
2331  0983  33          	inc	sp
2332  0984  C3 64 0A    	jp	l_spr_tile_00117
2333  0987              l_spr_tile_00102:
2334  0987  AF          	xor	a, a
2335  0988  48          	ld	c,b
2336  0989  47          	ld	b,a
2337  098A  C5          	push	bc
2338  098B  3E 94       	ld	a,0x94
2339  098D  F5          	push	af
2340  098E  33          	inc	sp
2341  098F  CD 65 0A    	call	_spr_tile_dir
2342  0992  F1          	pop	af
2343  0993  33          	inc	sp
2344  0994  C3 64 0A    	jp	l_spr_tile_00117
2345  0997              l_spr_tile_00103:
2346  0997  3E 02       	ld	a,0x02
2347  0999  48          	ld	c,b
2348  099A  47          	ld	b,a
2349  099B  C5          	push	bc
2350  099C  3E 98       	ld	a,0x98
2351  099E  F5          	push	af
2352  099F  33          	inc	sp
2353  09A0  CD 65 0A    	call	_spr_tile_dir
2354  09A3  F1          	pop	af
2355  09A4  33          	inc	sp
2356  09A5  C3 64 0A    	jp	l_spr_tile_00117
2357  09A8              l_spr_tile_00104:
2358  09A8  AF          	xor	a, a
2359  09A9  48          	ld	c,b
2360  09AA  47          	ld	b,a
2361  09AB  C5          	push	bc
2362  09AC  3E 9C       	ld	a,0x9c
2363  09AE  F5          	push	af
2364  09AF  33          	inc	sp
2365  09B0  CD 65 0A    	call	_spr_tile_dir
2366  09B3  F1          	pop	af
2367  09B4  33          	inc	sp
2368  09B5  C3 64 0A    	jp	l_spr_tile_00117
2369  09B8              l_spr_tile_00105:
2370  09B8  3E 04       	ld	a,0x04
2371  09BA  48          	ld	c,b
2372  09BB  47          	ld	b,a
2373  09BC  C5          	push	bc
2374  09BD  3E A0       	ld	a,0xa0
2375  09BF  F5          	push	af
2376  09C0  33          	inc	sp
2377  09C1  CD 65 0A    	call	_spr_tile_dir
2378  09C4  F1          	pop	af
2379  09C5  33          	inc	sp
2380  09C6  C3 64 0A    	jp	l_spr_tile_00117
2381  09C9              l_spr_tile_00106:
2382  09C9  3E 02       	ld	a,0x02
2383  09CB  48          	ld	c,b
2384  09CC  47          	ld	b,a
2385  09CD  C5          	push	bc
2386  09CE  3E A8       	ld	a,0xa8
2387  09D0  F5          	push	af
2388  09D1  33          	inc	sp
2389  09D2  CD 65 0A    	call	_spr_tile_dir
2390  09D5  F1          	pop	af
2391  09D6  33          	inc	sp
2392  09D7  C3 64 0A    	jp	l_spr_tile_00117
2393  09DA              l_spr_tile_00107:
2394  09DA  AF          	xor	a, a
2395  09DB  48          	ld	c,b
2396  09DC  47          	ld	b,a
2397  09DD  C5          	push	bc
2398  09DE  3E AC       	ld	a,0xac
2399  09E0  F5          	push	af
2400  09E1  33          	inc	sp
2401  09E2  CD 65 0A    	call	_spr_tile_dir
2402  09E5  F1          	pop	af
2403  09E6  33          	inc	sp
2404  09E7  C3 64 0A    	jp	l_spr_tile_00117
2405  09EA              l_spr_tile_00108:
2406  09EA  AF          	xor	a, a
2407  09EB  48          	ld	c,b
2408  09EC  47          	ld	b,a
2409  09ED  C5          	push	bc
2410  09EE  3E AE       	ld	a,0xae
2411  09F0  F5          	push	af
2412  09F1  33          	inc	sp
2413  09F2  CD 65 0A    	call	_spr_tile_dir
2414  09F5  F1          	pop	af
2415  09F6  33          	inc	sp
2416  09F7  18 6B       	jr	l_spr_tile_00117
2417  09F9              l_spr_tile_00109:
2418  09F9  AF          	xor	a, a
2419  09FA  48          	ld	c,b
2420  09FB  47          	ld	b,a
2421  09FC  C5          	push	bc
2422  09FD  3E B0       	ld	a,0xb0
2423  09FF  F5          	push	af
2424  0A00  33          	inc	sp
2425  0A01  CD 65 0A    	call	_spr_tile_dir
2426  0A04  F1          	pop	af
2427  0A05  33          	inc	sp
2428  0A06  18 5C       	jr	l_spr_tile_00117
2429  0A08              l_spr_tile_00110:
2430  0A08  AF          	xor	a, a
2431  0A09  48          	ld	c,b
2432  0A0A  47          	ld	b,a
2433  0A0B  C5          	push	bc
2434  0A0C  3E B2       	ld	a,0xb2
2435  0A0E  F5          	push	af
2436  0A0F  33          	inc	sp
2437  0A10  CD 65 0A    	call	_spr_tile_dir
2438  0A13  F1          	pop	af
2439  0A14  33          	inc	sp
2440  0A15  18 4D       	jr	l_spr_tile_00117
2441  0A17              l_spr_tile_00111:
2442  0A17  AF          	xor	a, a
2443  0A18  48          	ld	c,b
2444  0A19  47          	ld	b,a
2445  0A1A  C5          	push	bc
2446  0A1B  3E B4       	ld	a,0xb4
2447  0A1D  F5          	push	af
2448  0A1E  33          	inc	sp
2449  0A1F  CD 65 0A    	call	_spr_tile_dir
2450  0A22  F1          	pop	af
2451  0A23  33          	inc	sp
2452  0A24  18 3E       	jr	l_spr_tile_00117
2453  0A26              l_spr_tile_00112:
2454  0A26  AF          	xor	a, a
2455  0A27  48          	ld	c,b
2456  0A28  47          	ld	b,a
2457  0A29  C5          	push	bc
2458  0A2A  3E B6       	ld	a,0xb6
2459  0A2C  F5          	push	af
2460  0A2D  33          	inc	sp
2461  0A2E  CD 65 0A    	call	_spr_tile_dir
2462  0A31  F1          	pop	af
2463  0A32  33          	inc	sp
2464  0A33  18 2F       	jr	l_spr_tile_00117
2465  0A35              l_spr_tile_00113:
2466  0A35  AF          	xor	a, a
2467  0A36  48          	ld	c,b
2468  0A37  47          	ld	b,a
2469  0A38  C5          	push	bc
2470  0A39  3E C0       	ld	a,0xc0
2471  0A3B  F5          	push	af
2472  0A3C  33          	inc	sp
2473  0A3D  CD 65 0A    	call	_spr_tile_dir
2474  0A40  F1          	pop	af
2475  0A41  33          	inc	sp
2476  0A42  18 20       	jr	l_spr_tile_00117
2477  0A44              l_spr_tile_00114:
2478  0A44  AF          	xor	a, a
2479  0A45  48          	ld	c,b
2480  0A46  47          	ld	b,a
2481  0A47  C5          	push	bc
2482  0A48  3E C2       	ld	a,0xc2
2483  0A4A  F5          	push	af
2484  0A4B  33          	inc	sp
2485  0A4C  CD 65 0A    	call	_spr_tile_dir
2486  0A4F  F1          	pop	af
2487  0A50  33          	inc	sp
2488  0A51  18 11       	jr	l_spr_tile_00117
2489  0A53              l_spr_tile_00115:
2490  0A53  AF          	xor	a, a
2491  0A54  48          	ld	c,b
2492  0A55  47          	ld	b,a
2493  0A56  C5          	push	bc
2494  0A57  3E C4       	ld	a,0xc4
2495  0A59  F5          	push	af
2496  0A5A  33          	inc	sp
2497  0A5B  CD 65 0A    	call	_spr_tile_dir
2498  0A5E  F1          	pop	af
2499  0A5F  33          	inc	sp
2500  0A60  18 02       	jr	l_spr_tile_00117
2501  0A62              l_spr_tile_00116:
2502  0A62  2E 00       	ld	l,0x00
2503  0A64              l_spr_tile_00117:
2504  0A64  C9          	ret
2505  0A65              	SECTION code_compiler
2506  0A65              ;	---------------------------------
2507  0A65              ; Function spr_tile_dir
2508  0A65              ; ---------------------------------
2509  0A65              _spr_tile_dir:
2510  0A65  CD 00 00    	call	___sdcc_enter_ix
2511  0A68  3E 00       	ld	a, +((_state) & 0xFF)
2512  0A6A  DD 86 05    	add	a,(ix+5)
2513  0A6D  4F          	ld	c, a
2514  0A6E  3E 00       	ld	a, +((_state) / 256)
2515  0A70  CE 00       	adc	a,0x00
2516  0A72  47          	ld	b, a
2517  0A73  0A          	ld	a, (bc)
2518  0A74  4F          	ld	c,a
2519  0A75  CB 57       	bit	2,a
2520  0A77  28 05       	jr	Z,l_spr_tile_dir_00102
2521  0A79  DD 6E 04    	ld	l,(ix+4)
2522  0A7C  18 2D       	jr	l_spr_tile_dir_00109
2523  0A7E              l_spr_tile_dir_00102:
2524  0A7E  DD 7E 04    	ld	a,(ix+4)
2525  0A81  DD 86 06    	add	a,(ix+6)
2526  0A84  47          	ld	b, a
2527  0A85  CB 59       	bit	3, c
2528  0A87  28 03       	jr	Z,l_spr_tile_dir_00104
2529  0A89  68          	ld	l, b
2530  0A8A  18 1F       	jr	l_spr_tile_dir_00109
2531  0A8C              l_spr_tile_dir_00104:
2532  0A8C  3E 00       	ld	a, +((_state_a) & 0xFF)
2533  0A8E  DD 86 05    	add	a,(ix+5)
2534  0A91  5F          	ld	e, a
2535  0A92  3E 00       	ld	a, +((_state_a) / 256)
2536  0A94  CE 00       	adc	a,0x00
2537  0A96  57          	ld	d, a
2538  0A97  1A          	ld	a, (de)
2539  0A98  CB 67       	bit	4, a
2540  0A9A  28 05       	jr	Z,l_spr_tile_dir_00106
2541  0A9C  DD 6E 04    	ld	l,(ix+4)
2542  0A9F  18 0A       	jr	l_spr_tile_dir_00109
2543  0AA1              l_spr_tile_dir_00106:
2544  0AA1  CB 5F       	bit	3, a
2545  0AA3  28 03       	jr	Z,l_spr_tile_dir_00108
2546  0AA5  68          	ld	l, b
2547  0AA6  18 03       	jr	l_spr_tile_dir_00109
2548  0AA8              l_spr_tile_dir_00108:
2549  0AA8  DD 6E 04    	ld	l,(ix+4)
2550  0AAB              l_spr_tile_dir_00109:
2551  0AAB  DD E1       	pop	ix
2552  0AAD  C9          	ret
2553  0AAE              	SECTION code_compiler
2554  0AAE              ;	---------------------------------
2555  0AAE              ; Function spr_brick_anim
2556  0AAE              ; ---------------------------------
2557  0AAE              _spr_brick_anim:
2558  0AAE  CD 00 00    	call	___sdcc_enter_ix
2559  0AB1  F5          	push	af
2560  0AB2  DD 75 FF    	ld	(ix-1),l
2561  0AB5  21 00 00    	ld	hl,_player_hit_col
2562  0AB8  46          	ld	b, (hl)
2563  0AB9  21 00 00    	ld	hl,_player_hit_lin
2564  0ABC  4E          	ld	c, (hl)
2565  0ABD  C5          	push	bc
2566  0ABE  C5          	push	bc
2567  0ABF  CD 00 00    	call	_spr_calc_index
2568  0AC2  F1          	pop	af
2569  0AC3  C1          	pop	bc
2570  0AC4  22 00 00    	ld	(_index1),hl
2571  0AC7  11 F0 FF    	ld	de,0xfff0
2572  0ACA  19          	add	hl,de
2573  0ACB  11 00 00    	ld	de,_scr_map
2574  0ACE  19          	add	hl, de
2575  0ACF  7E          	ld	a, (hl)
2576  0AD0  DD 77 FE    	ld	(ix-2),a
2577  0AD3  11 00 00    	ld	de,_scr_map
2578  0AD6  2A 00 00    	ld	hl,(_index1)
2579  0AD9  19          	add	hl,de
2580  0ADA  66          	ld	h, (hl)
2581  0ADB  EB          	ex	de,hl
2582  0ADC  DD 7E FF    	ld	a,(ix-1)
2583  0ADF  B7          	or	a, a
2584  0AE0  28 08       	jr	Z,l_spr_brick_anim_00102
2585  0AE2  79          	ld	a, c
2586  0AE3  C6 F6       	add	a,0xf6
2587  0AE5  32 00 00    	ld	(_tmp),a
2588  0AE8  18 06       	jr	l_spr_brick_anim_00103
2589  0AEA              l_spr_brick_anim_00102:
2590  0AEA  79          	ld	a, c
2591  0AEB  C6 F8       	add	a,0xf8
2592  0AED  32 00 00    	ld	(_tmp),a
2593  0AF0              l_spr_brick_anim_00103:
2594  0AF0  F3          	di
2595  0AF1  DD 7E FF    	ld	a,(ix-1)
2596  0AF4  B7          	or	a, a
2597  0AF5  28 18       	jr	Z,l_spr_brick_anim_00105
2598  0AF7  3A 00 00    	ld	a,(_map_paper_clr)
2599  0AFA  C5          	push	bc
2600  0AFB  D5          	push	de
2601  0AFC  C5          	push	bc
2602  0AFD  F5          	push	af
2603  0AFE  33          	inc	sp
2604  0AFF  CD 00 00    	call	_NIRVANAP_fillT_raw_callee
2605  0B02  D1          	pop	de
2606  0B03  33          	inc	sp
2607  0B04  3A 00 00    	ld	a,(_tmp)
2608  0B07  5A          	ld	e,d
2609  0B08  57          	ld	d,a
2610  0B09  D5          	push	de
2611  0B0A  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2612  0B0D  18 1C       	jr	l_spr_brick_anim_00106
2613  0B0F              l_spr_brick_anim_00105:
2614  0B0F  3A 00 00    	ld	a,(_tmp)
2615  0B12  C6 F0       	add	a,0xf0
2616  0B14  C5          	push	bc
2617  0B15  D5          	push	de
2618  0B16  4F          	ld	c,a
2619  0B17  C5          	push	bc
2620  0B18  DD 7E FE    	ld	a,(ix-2)
2621  0B1B  F5          	push	af
2622  0B1C  33          	inc	sp
2623  0B1D  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2624  0B20  D1          	pop	de
2625  0B21  33          	inc	sp
2626  0B22  3A 00 00    	ld	a,(_tmp)
2627  0B25  5A          	ld	e,d
2628  0B26  57          	ld	d,a
2629  0B27  D5          	push	de
2630  0B28  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2631  0B2B              l_spr_brick_anim_00106:
2632  0B2B  FB          	ei
2633  0B2C  F1          	pop	af
2634  0B2D  DD E1       	pop	ix
2635  0B2F  C9          	ret
2636  0B30              	SECTION code_compiler
2637  0B30              ;	---------------------------------
2638  0B30              ; Function spr_draw_index
2639  0B30              ; ---------------------------------
2640  0B30              _spr_draw_index:
2641  0B30  CD 00 00    	call	___sdcc_enter_ix
2642  0B33  DD 4E 04    	ld	c,(ix+4)
2643  0B36  79          	ld	a, c
2644  0B37  E6 0F       	and	a,0x0f
2645  0B39  87          	add	a, a
2646  0B3A  32 00 00    	ld	(_s_col1),a
2647  0B3D  21 00 00    	ld	hl,_s_lin1
2648  0B40  71          	ld	(hl),c
2649  0B41  79          	ld	a,c
2650  0B42  07          	rlca
2651  0B43  07          	rlca
2652  0B44  07          	rlca
2653  0B45  07          	rlca
2654  0B46  E6 0F       	and	a,0x0f
2655  0B48  07          	rlca
2656  0B49  07          	rlca
2657  0B4A  07          	rlca
2658  0B4B  07          	rlca
2659  0B4C  E6 F0       	and	a,0xf0
2660  0B4E  77          	ld	(hl), a
2661  0B4F  F3          	di
2662  0B50  3E 00       	ld	a, +((_scr_map) & 0xFF)
2663  0B52  DD 86 04    	add	a,(ix+4)
2664  0B55  4F          	ld	c, a
2665  0B56  3E 00       	ld	a, +((_scr_map) / 256)
2666  0B58  DD 8E 05    	adc	a,(ix+5)
2667  0B5B  47          	ld	b, a
2668  0B5C  0A          	ld	a, (bc)
2669  0B5D  47          	ld	b, a
2670  0B5E  3A 00 00    	ld	a,(_s_col1)
2671  0B61  F5          	push	af
2672  0B62  33          	inc	sp
2673  0B63  3A 00 00    	ld	a,(_s_lin1)
2674  0B66  48          	ld	c,b
2675  0B67  47          	ld	b,a
2676  0B68  C5          	push	bc
2677  0B69  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2678  0B6C  FB          	ei
2679  0B6D  DD E1       	pop	ix
2680  0B6F  C9          	ret
2681  0B70              	SECTION code_compiler
2682  0B70              ;	---------------------------------
2683  0B70              ; Function spr_calc_hor
2684  0B70              ; ---------------------------------
2685  0B70              _spr_calc_hor:
2686  0B70  CD 00 00    	call	___sdcc_enter_ix
2687  0B73  3E 00       	ld	a, +((_col) & 0xFF)
2688  0B75  DD 86 04    	add	a,(ix+4)
2689  0B78  4F          	ld	c, a
2690  0B79  3E 00       	ld	a, +((_col) / 256)
2691  0B7B  CE 00       	adc	a,0x00
2692  0B7D  47          	ld	b, a
2693  0B7E  0A          	ld	a, (bc)
2694  0B7F  5F          	ld	e, a
2695  0B80  3E 00       	ld	a, +((_sprite_frames) & 0xFF)
2696  0B82  DD 86 04    	add	a,(ix+4)
2697  0B85  4F          	ld	c, a
2698  0B86  3E 00       	ld	a, +((_sprite_frames) / 256)
2699  0B88  CE 00       	adc	a,0x00
2700  0B8A  47          	ld	b, a
2701  0B8B  0A          	ld	a, (bc)
2702  0B8C  67          	ld	h, a
2703  0B8D  2E 00       	ld	l,0x00
2704  0B8F  55          	ld	d, l
2705  0B90  06 08       	ld	b,0x08
2706  0B92              l_spr_calc_hor_00103:
2707  0B92  29          	add	hl, hl
2708  0B93  30 01       	jr	NC,l_spr_calc_hor_00104
2709  0B95  19          	add	hl, de
2710  0B96              l_spr_calc_hor_00104:
2711  0B96  10 FA       	djnz	l_spr_calc_hor_00103
2712  0B98  DD E1       	pop	ix
2713  0B9A  C9          	ret
2714  0B9B              	SECTION code_compiler
2715  0B9B              ;	---------------------------------
2716  0B9B              ; Function spr_back_repaint
2717  0B9B              ; ---------------------------------
2718  0B9B              _spr_back_repaint:
2719  0B9B  3A 00 00    	ld	a,(_spr_hack)
2720  0B9E  B7          	or	a, a
2721  0B9F  20 02       	jr	NZ,l_spr_back_repaint_00102
2722  0BA1  76          	halt
2723  0BA2  F3          	di
2724  0BA3              l_spr_back_repaint_00102:
2725  0BA3  2A FF FF    	ld	hl,(_s_col0 - 1)
2726  0BA6  3A 00 00    	ld	a,(_s_lin0)
2727  0BA9  6F          	ld	l,a
2728  0BAA  E5          	push	hl
2729  0BAB  CD 00 00    	call	_spr_calc_index
2730  0BAE  F1          	pop	af
2731  0BAF  7D          	ld	a,l
2732  0BB0  32 00 00    	ld	(_sprite_curr_index),a
2733  0BB3  21 00 00    	ld	hl,_s_lin0
2734  0BB6  7E          	ld	a, (hl)
2735  0BB7  E6 0F       	and	a,0x0f
2736  0BB9  4F          	ld	c, a
2737  0BBA  7E          	ld	a, (hl)
2738  0BBB  07          	rlca
2739  0BBC  07          	rlca
2740  0BBD  07          	rlca
2741  0BBE  07          	rlca
2742  0BBF  E6 0F       	and	a,0x0f
2743  0BC1  5F          	ld	e, a
2744  0BC2  21 00 00    	ld	hl,_s_col0
2745  0BC5  CB 46       	bit	0, (hl)
2746  0BC7  20 66       	jr	NZ,l_spr_back_repaint_00110
2747  0BC9  79          	ld	a, c
2748  0BCA  B7          	or	a, a
2749  0BCB  20 1D       	jr	NZ,l_spr_back_repaint_00104
2750  0BCD  2A 00 00    	ld	hl,(_sprite_curr_index)
2751  0BD0  26 00       	ld	h,0x00
2752  0BD2  01 00 00    	ld	bc,_scr_map
2753  0BD5  09          	add	hl,bc
2754  0BD6  46          	ld	b,(hl)
2755  0BD7  3A 00 00    	ld	a,(_s_col0)
2756  0BDA  F5          	push	af
2757  0BDB  33          	inc	sp
2758  0BDC  3A 00 00    	ld	a,(_s_lin0)
2759  0BDF  48          	ld	c,b
2760  0BE0  47          	ld	b,a
2761  0BE1  C5          	push	bc
2762  0BE2  CD F3 0C    	call	_spr_tile_paint
2763  0BE5  F1          	pop	af
2764  0BE6  33          	inc	sp
2765  0BE7  C3 EC 0C    	jp	l_spr_back_repaint_00111
2766  0BEA              l_spr_back_repaint_00104:
2767  0BEA  7B          	ld	a, e
2768  0BEB  07          	rlca
2769  0BEC  07          	rlca
2770  0BED  07          	rlca
2771  0BEE  07          	rlca
2772  0BEF  E6 F0       	and	a,0xf0
2773  0BF1  47          	ld	b, a
2774  0BF2  2A 00 00    	ld	hl,(_sprite_curr_index)
2775  0BF5  26 00       	ld	h,0x00
2776  0BF7  11 00 00    	ld	de,_scr_map
2777  0BFA  19          	add	hl,de
2778  0BFB  56          	ld	d, (hl)
2779  0BFC  3A 00 00    	ld	a,(_s_col0)
2780  0BFF  C5          	push	bc
2781  0C00  F5          	push	af
2782  0C01  33          	inc	sp
2783  0C02  4A          	ld	c, d
2784  0C03  C5          	push	bc
2785  0C04  CD F3 0C    	call	_spr_tile_paint
2786  0C07  F1          	pop	af
2787  0C08  33          	inc	sp
2788  0C09  C1          	pop	bc
2789  0C0A  78          	ld	a, b
2790  0C0B  C6 10       	add	a,0x10
2791  0C0D  57          	ld	d, a
2792  0C0E  21 00 00    	ld	hl,_sprite_curr_index
2793  0C11  7E          	ld	a, (hl)
2794  0C12  C6 10       	add	a,0x10
2795  0C14  77          	ld	(hl), a
2796  0C15  C6 00       	add	a,+((_scr_map) & 0xFF)
2797  0C17  4F          	ld	c, a
2798  0C18  3E 00       	ld	a, +((_scr_map) / 256)
2799  0C1A  CE 00       	adc	a,0x00
2800  0C1C  47          	ld	b, a
2801  0C1D  0A          	ld	a, (bc)
2802  0C1E  47          	ld	b, a
2803  0C1F  3A 00 00    	ld	a,(_s_col0)
2804  0C22  5A          	ld	e,d
2805  0C23  57          	ld	d,a
2806  0C24  D5          	push	de
2807  0C25  C5          	push	bc
2808  0C26  33          	inc	sp
2809  0C27  CD F3 0C    	call	_spr_tile_paint
2810  0C2A  F1          	pop	af
2811  0C2B  33          	inc	sp
2812  0C2C  C3 EC 0C    	jp	l_spr_back_repaint_00111
2813  0C2F              l_spr_back_repaint_00110:
2814  0C2F  21 00 00    	ld	hl,_s_col0
2815  0C32  46          	ld	b, (hl)
2816  0C33  05          	dec	b
2817  0C34  79          	ld	a, c
2818  0C35  B7          	or	a, a
2819  0C36  20 39       	jr	NZ,l_spr_back_repaint_00107
2820  0C38  2A 00 00    	ld	hl,(_sprite_curr_index)
2821  0C3B  26 00       	ld	h,0x00
2822  0C3D  11 00 00    	ld	de,_scr_map
2823  0C40  19          	add	hl,de
2824  0C41  56          	ld	d, (hl)
2825  0C42  C5          	push	bc
2826  0C43  33          	inc	sp
2827  0C44  3A 00 00    	ld	a,(_s_lin0)
2828  0C47  5A          	ld	e,d
2829  0C48  57          	ld	d,a
2830  0C49  D5          	push	de
2831  0C4A  CD F3 0C    	call	_spr_tile_paint
2832  0C4D  F1          	pop	af
2833  0C4E  33          	inc	sp
2834  0C4F  21 00 00    	ld	hl,_sprite_curr_index
2835  0C52  34          	inc	(hl)
2836  0C53  21 00 00    	ld	hl,_s_col0
2837  0C56  46          	ld	b, (hl)
2838  0C57  04          	inc	b
2839  0C58  2A 00 00    	ld	hl,(_sprite_curr_index)
2840  0C5B  26 00       	ld	h,0x00
2841  0C5D  11 00 00    	ld	de,_scr_map
2842  0C60  19          	add	hl,de
2843  0C61  56          	ld	d, (hl)
2844  0C62  C5          	push	bc
2845  0C63  33          	inc	sp
2846  0C64  3A 00 00    	ld	a,(_s_lin0)
2847  0C67  5A          	ld	e,d
2848  0C68  57          	ld	d,a
2849  0C69  D5          	push	de
2850  0C6A  CD F3 0C    	call	_spr_tile_paint
2851  0C6D  F1          	pop	af
2852  0C6E  33          	inc	sp
2853  0C6F  18 7B       	jr	l_spr_back_repaint_00111
2854  0C71              l_spr_back_repaint_00107:
2855  0C71  7B          	ld	a, e
2856  0C72  07          	rlca
2857  0C73  07          	rlca
2858  0C74  07          	rlca
2859  0C75  07          	rlca
2860  0C76  E6 F0       	and	a,0xf0
2861  0C78  4F          	ld	c, a
2862  0C79  2A 00 00    	ld	hl,(_sprite_curr_index)
2863  0C7C  26 00       	ld	h,0x00
2864  0C7E  11 00 00    	ld	de,_scr_map
2865  0C81  19          	add	hl,de
2866  0C82  66          	ld	h, (hl)
2867  0C83  EB          	ex	de,hl
2868  0C84  C5          	push	bc
2869  0C85  C5          	push	bc
2870  0C86  D5          	push	de
2871  0C87  33          	inc	sp
2872  0C88  CD F3 0C    	call	_spr_tile_paint
2873  0C8B  F1          	pop	af
2874  0C8C  33          	inc	sp
2875  0C8D  C1          	pop	bc
2876  0C8E  21 00 00    	ld	hl,_sprite_curr_index
2877  0C91  34          	inc	(hl)
2878  0C92  21 00 00    	ld	hl,_s_col0
2879  0C95  46          	ld	b, (hl)
2880  0C96  04          	inc	b
2881  0C97  2A 00 00    	ld	hl,(_sprite_curr_index)
2882  0C9A  26 00       	ld	h,0x00
2883  0C9C  11 00 00    	ld	de,_scr_map
2884  0C9F  19          	add	hl,de
2885  0CA0  66          	ld	h, (hl)
2886  0CA1  EB          	ex	de,hl
2887  0CA2  C5          	push	bc
2888  0CA3  C5          	push	bc
2889  0CA4  D5          	push	de
2890  0CA5  33          	inc	sp
2891  0CA6  CD F3 0C    	call	_spr_tile_paint
2892  0CA9  F1          	pop	af
2893  0CAA  33          	inc	sp
2894  0CAB  C1          	pop	bc
2895  0CAC  79          	ld	a, c
2896  0CAD  C6 10       	add	a,0x10
2897  0CAF  4F          	ld	c, a
2898  0CB0  21 00 00    	ld	hl,_sprite_curr_index
2899  0CB3  7E          	ld	a, (hl)
2900  0CB4  C6 0F       	add	a,0x0f
2901  0CB6  77          	ld	(hl), a
2902  0CB7  21 00 00    	ld	hl,_s_col0
2903  0CBA  46          	ld	b, (hl)
2904  0CBB  05          	dec	b
2905  0CBC  2A 00 00    	ld	hl,(_sprite_curr_index)
2906  0CBF  26 00       	ld	h,0x00
2907  0CC1  11 00 00    	ld	de,_scr_map
2908  0CC4  19          	add	hl,de
2909  0CC5  66          	ld	h, (hl)
2910  0CC6  EB          	ex	de,hl
2911  0CC7  C5          	push	bc
2912  0CC8  C5          	push	bc
2913  0CC9  D5          	push	de
2914  0CCA  33          	inc	sp
2915  0CCB  CD F3 0C    	call	_spr_tile_paint
2916  0CCE  F1          	pop	af
2917  0CCF  33          	inc	sp
2918  0CD0  C1          	pop	bc
2919  0CD1  21 00 00    	ld	hl,_sprite_curr_index
2920  0CD4  34          	inc	(hl)
2921  0CD5  21 00 00    	ld	hl,_s_col0
2922  0CD8  46          	ld	b, (hl)
2923  0CD9  04          	inc	b
2924  0CDA  2A 00 00    	ld	hl,(_sprite_curr_index)
2925  0CDD  26 00       	ld	h,0x00
2926  0CDF  11 00 00    	ld	de,_scr_map
2927  0CE2  19          	add	hl,de
2928  0CE3  66          	ld	h, (hl)
2929  0CE4  C5          	push	bc
2930  0CE5  E5          	push	hl
2931  0CE6  33          	inc	sp
2932  0CE7  CD F3 0C    	call	_spr_tile_paint
2933  0CEA  F1          	pop	af
2934  0CEB  33          	inc	sp
2935  0CEC              l_spr_back_repaint_00111:
2936  0CEC  3A 00 00    	ld	a,(_spr_hack)
2937  0CEF  B7          	or	a, a
2938  0CF0  C0          	ret	NZ
2939  0CF1  FB          	ei
2940  0CF2  C9          	ret
2941  0CF3              	SECTION code_compiler
2942  0CF3              ;	---------------------------------
2943  0CF3              ; Function spr_tile_paint
2944  0CF3              ; ---------------------------------
2945  0CF3              _spr_tile_paint:
2946  0CF3  CD 00 00    	call	___sdcc_enter_ix
2947  0CF6  DD 7E 04    	ld	a,(ix+4)
2948  0CF9  B7          	or	a, a
2949  0CFA  28 05       	jr	Z,l_spr_tile_paint_00101
2950  0CFC  3C          	inc	a
2951  0CFD  28 22       	jr	Z,l_spr_tile_paint_00105
2952  0CFF  18 11       	jr	l_spr_tile_paint_00103
2953  0D01              l_spr_tile_paint_00101:
2954  0D01  DD 66 06    	ld	h,(ix+6)
2955  0D04  DD 6E 05    	ld	l,(ix+5)
2956  0D07  3A 00 00    	ld	a,(_map_paper_clr)
2957  0D0A  E5          	push	hl
2958  0D0B  F5          	push	af
2959  0D0C  33          	inc	sp
2960  0D0D  CD 00 00    	call	_NIRVANAP_fillT_raw_callee
2961  0D10  18 0F       	jr	l_spr_tile_paint_00105
2962  0D12              l_spr_tile_paint_00103:
2963  0D12  DD 66 06    	ld	h,(ix+6)
2964  0D15  DD 6E 05    	ld	l,(ix+5)
2965  0D18  E5          	push	hl
2966  0D19  DD 7E 04    	ld	a,(ix+4)
2967  0D1C  F5          	push	af
2968  0D1D  33          	inc	sp
2969  0D1E  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2970  0D21              l_spr_tile_paint_00105:
2971  0D21  DD E1       	pop	ix
2972  0D23  C9          	ret
2973  0D24              	SECTION code_compiler
2974  0D24              ;	---------------------------------
2975  0D24              ; Function spr_init_anim_bullets
2976  0D24              ; ---------------------------------
2977  0D24              _spr_init_anim_bullets:
2978  0D24  01 00 00    	ld	bc,_anim_lin+0
2979  0D27  1E 00       	ld	e,0x00
2980  0D29              l_spr_init_anim_bullets_00102:
2981  0D29  6B          	ld	l,e
2982  0D2A  26 00       	ld	h,0x00
2983  0D2C  09          	add	hl, bc
2984  0D2D  36 FF       	ld	(hl),0xff
2985  0D2F  16 00       	ld	d,0x00
2986  0D31  21 00 00    	ld	hl,_bullet_col
2987  0D34  19          	add	hl, de
2988  0D35  36 FF       	ld	(hl),0xff
2989  0D37  1C          	inc	e
2990  0D38  7B          	ld	a, e
2991  0D39  D6 08       	sub	a,0x08
2992  0D3B  38 EC       	jr	C,l_spr_init_anim_bullets_00102
2993  0D3D  21 00 00    	ld	hl,_bullet_count
2994  0D40  36 00       	ld	(hl),0x00
2995  0D42  21 00 00    	ld	hl,_anim_count
2996  0D45  36 00       	ld	(hl),0x00
2997  0D47  C9          	ret
2998  0D48              	SECTION code_compiler
2999  0D48              ;	---------------------------------
3000  0D48              ; Function spr_add_anim
3001  0D48              ; ---------------------------------
3002  0D48              _spr_add_anim:
3003  0D48  CD 00 00    	call	___sdcc_enter_ix
3004  0D4B  F5          	push	af
3005  0D4C  F5          	push	af
3006  0D4D  3B          	dec	sp
3007  0D4E  DD 7E 05    	ld	a,(ix+5)
3008  0D51  D6 1F       	sub	a,0x1f
3009  0D53  D2 12 0E    	jp	NC, l_spr_add_anim_00111
3010  0D56  DD 7E 04    	ld	a,(ix+4)
3011  0D59  D6 B8       	sub	a,0xb8
3012  0D5B  D2 12 0E    	jp	NC, l_spr_add_anim_00111
3013  0D5E  0E 00       	ld	c,0x00
3014  0D60  DD 71 FF    	ld	(ix-1),c
3015  0D63              l_spr_add_anim_00109:
3016  0D63  3E 00       	ld	a, +((_anim_lin) & 0xFF)
3017  0D65  81          	add	a, c
3018  0D66  5F          	ld	e, a
3019  0D67  3E 00       	ld	a, +((_anim_lin) / 256)
3020  0D69  CE 00       	adc	a,0x00
3021  0D6B  57          	ld	d, a
3022  0D6C  1A          	ld	a, (de)
3023  0D6D  3C          	inc	a
3024  0D6E  C2 08 0E    	jp	NZ,l_spr_add_anim_00110
3025  0D71  21 00 00    	ld	hl,_anim_count
3026  0D74  34          	inc	(hl)
3027  0D75  DD 7E 04    	ld	a,(ix+4)
3028  0D78  12          	ld	(de), a
3029  0D79  01 00 00    	ld	bc,_anim_col
3030  0D7C  DD 6E FF    	ld	l,(ix-1)
3031  0D7F  26 00       	ld	h,0x00
3032  0D81  09          	add	hl,bc
3033  0D82  DD 75 FD    	ld	(ix-3),l
3034  0D85  DD 74 FE    	ld	(ix-2),h
3035  0D88  DD 7E 05    	ld	a,(ix+5)
3036  0D8B  77          	ld	(hl), a
3037  0D8C  3E 00       	ld	a, +((_anim_tile) & 0xFF)
3038  0D8E  DD 86 FF    	add	a,(ix-1)
3039  0D91  DD 77 FB    	ld	(ix-5),a
3040  0D94  3E 00       	ld	a, +((_anim_tile) / 256)
3041  0D96  CE 00       	adc	a,0x00
3042  0D98  DD 77 FC    	ld	(ix-4),a
3043  0D9B  E1          	pop	hl
3044  0D9C  E5          	push	hl
3045  0D9D  DD 7E 06    	ld	a,(ix+6)
3046  0DA0  77          	ld	(hl), a
3047  0DA1  3E 00       	ld	a, +((_anim_loop) & 0xFF)
3048  0DA3  DD 86 FF    	add	a,(ix-1)
3049  0DA6  4F          	ld	c, a
3050  0DA7  3E 00       	ld	a, +((_anim_loop) / 256)
3051  0DA9  CE 00       	adc	a,0x00
3052  0DAB  47          	ld	b, a
3053  0DAC  DD 7E 08    	ld	a,(ix+8)
3054  0DAF  02          	ld	(bc), a
3055  0DB0  01 00 00    	ld	bc,_anim_int+0
3056  0DB3  DD 6E FF    	ld	l,(ix-1)
3057  0DB6  26 00       	ld	h,0x00
3058  0DB8  09          	add	hl, bc
3059  0DB9  36 00       	ld	(hl),0x00
3060  0DBB  3E 00       	ld	a, +((_anim_end) & 0xFF)
3061  0DBD  DD 86 FF    	add	a,(ix-1)
3062  0DC0  4F          	ld	c, a
3063  0DC1  3E 00       	ld	a, +((_anim_end) / 256)
3064  0DC3  CE 00       	adc	a,0x00
3065  0DC5  47          	ld	b, a
3066  0DC6  DD 7E 07    	ld	a,(ix+7)
3067  0DC9  02          	ld	(bc), a
3068  0DCA  3E 00       	ld	a, +((_anim_respanwn) & 0xFF)
3069  0DCC  DD 86 FF    	add	a,(ix-1)
3070  0DCF  4F          	ld	c, a
3071  0DD0  3E 00       	ld	a, +((_anim_respanwn) / 256)
3072  0DD2  CE 00       	adc	a,0x00
3073  0DD4  47          	ld	b, a
3074  0DD5  DD 7E 09    	ld	a,(ix+9)
3075  0DD8  02          	ld	(bc), a
3076  0DD9  F3          	di
3077  0DDA  DD 6E FD    	ld	l,(ix-3)
3078  0DDD  DD 66 FE    	ld	h,(ix-2)
3079  0DE0  46          	ld	b, (hl)
3080  0DE1  E1          	pop	hl
3081  0DE2  1A          	ld	a,(de)
3082  0DE3  56          	ld	d,(hl)
3083  0DE4  E5          	push	hl
3084  0DE5  C5          	push	bc
3085  0DE6  33          	inc	sp
3086  0DE7  5A          	ld	e,d
3087  0DE8  57          	ld	d,a
3088  0DE9  D5          	push	de
3089  0DEA  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
3090  0DED  FB          	ei
3091  0DEE  DD 66 05    	ld	h,(ix+5)
3092  0DF1  DD 6E 04    	ld	l,(ix+4)
3093  0DF4  E5          	push	hl
3094  0DF5  CD 00 00    	call	_spr_calc_index
3095  0DF8  F1          	pop	af
3096  0DF9  22 00 00    	ld	(_index0),hl
3097  0DFC  01 00 00    	ld	bc,_scr_map
3098  0DFF  09          	add	hl,bc
3099  0E00  7E          	ld	a,(hl)
3100  0E01  B7          	or	a,a
3101  0E02  20 0E       	jr	NZ,l_spr_add_anim_00111
3102  0E04  36 FF       	ld	(hl),0xff
3103  0E06  18 0A       	jr	l_spr_add_anim_00111
3104  0E08              l_spr_add_anim_00110:
3105  0E08  0C          	inc	c
3106  0E09  DD 71 FF    	ld	(ix-1),c
3107  0E0C  79          	ld	a, c
3108  0E0D  D6 08       	sub	a,0x08
3109  0E0F  DA 63 0D    	jp	C, l_spr_add_anim_00109
3110  0E12              l_spr_add_anim_00111:
3111  0E12  DD F9       	ld	sp, ix
3112  0E14  DD E1       	pop	ix
3113  0E16  C9          	ret
3114  0E17              	SECTION code_compiler
3115  0E17              ;	---------------------------------
3116  0E17              ; Function spr_play_anim
3117  0E17              ; ---------------------------------
3118  0E17              _spr_play_anim:
3119  0E17  CD 00 00    	call	___sdcc_enter_ix
3120  0E1A  F5          	push	af
3121  0E1B  F5          	push	af
3122  0E1C  F5          	push	af
3123  0E1D  3B          	dec	sp
3124  0E1E  DD 36 F9 00 	ld	(ix-7),0x00
3125  0E22              l_spr_play_anim_00114:
3126  0E22  01 00 00    	ld	bc,_anim_lin
3127  0E25  DD 6E F9    	ld	l,(ix-7)
3128  0E28  26 00       	ld	h,0x00
3129  0E2A  09          	add	hl,bc
3130  0E2B  DD 75 FE    	ld	(ix-2),l
3131  0E2E  DD 74 FF    	ld	(ix-1),h
3132  0E31  4E          	ld	c, (hl)
3133  0E32  0C          	inc	c
3134  0E33  CA 3C 0F    	jp	Z,l_spr_play_anim_00115
3135  0E36  21 01 00    	ld	hl,0x0001
3136  0E39  CD 00 00    	call	_z80_delay_ms_fastcall
3137  0E3C  01 00 00    	ld	bc,_anim_int
3138  0E3F  DD 6E F9    	ld	l,(ix-7)
3139  0E42  26 00       	ld	h,0x00
3140  0E44  09          	add	hl,bc
3141  0E45  DD 75 FC    	ld	(ix-4),l
3142  0E48  DD 74 FD    	ld	(ix-3),h
3143  0E4B  4E          	ld	c, (hl)
3144  0E4C  3E 00       	ld	a, +((_anim_end) & 0xFF)
3145  0E4E  DD 86 F9    	add	a,(ix-7)
3146  0E51  6F          	ld	l, a
3147  0E52  3E 00       	ld	a, +((_anim_end) / 256)
3148  0E54  CE 00       	adc	a,0x00
3149  0E56  67          	ld	h, a
3150  0E57  46          	ld	b, (hl)
3151  0E58  79          	ld	a, c
3152  0E59  90          	sub	a, b
3153  0E5A  30 3D       	jr	NC,l_spr_play_anim_00109
3154  0E5C  F3          	di
3155  0E5D  3E 00       	ld	a, +((_anim_col) & 0xFF)
3156  0E5F  DD 86 F9    	add	a,(ix-7)
3157  0E62  6F          	ld	l, a
3158  0E63  3E 00       	ld	a, +((_anim_col) / 256)
3159  0E65  CE 00       	adc	a,0x00
3160  0E67  67          	ld	h, a
3161  0E68  56          	ld	d, (hl)
3162  0E69  DD 6E FE    	ld	l,(ix-2)
3163  0E6C  DD 66 FF    	ld	h,(ix-1)
3164  0E6F  46          	ld	b, (hl)
3165  0E70  3E 00       	ld	a, +((_anim_tile) & 0xFF)
3166  0E72  DD 86 F9    	add	a,(ix-7)
3167  0E75  6F          	ld	l, a
3168  0E76  3E 00       	ld	a, +((_anim_tile) / 256)
3169  0E78  CE 00       	adc	a,0x00
3170  0E7A  67          	ld	h, a
3171  0E7B  4E          	ld	c, (hl)
3172  0E7C  DD 6E FC    	ld	l,(ix-4)
3173  0E7F  DD 66 FD    	ld	h,(ix-3)
3174  0E82  5E          	ld	e, (hl)
3175  0E83  79          	ld	a, c
3176  0E84  83          	add	a, e
3177  0E85  58          	ld	e,b
3178  0E86  D5          	push	de
3179  0E87  F5          	push	af
3180  0E88  33          	inc	sp
3181  0E89  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
3182  0E8C  FB          	ei
3183  0E8D  DD 6E FC    	ld	l,(ix-4)
3184  0E90  DD 66 FD    	ld	h,(ix-3)
3185  0E93  4E          	ld	c,(hl)
3186  0E94  0C          	inc	c
3187  0E95  71          	ld	(hl), c
3188  0E96  C3 3C 0F    	jp	l_spr_play_anim_00115
3189  0E99              l_spr_play_anim_00109:
3190  0E99  01 00 00    	ld	bc,_anim_loop
3191  0E9C  DD 6E F9    	ld	l,(ix-7)
3192  0E9F  26 00       	ld	h,0x00
3193  0EA1  09          	add	hl,bc
3194  0EA2  DD 75 FA    	ld	(ix-6),l
3195  0EA5  DD 74 FB    	ld	(ix-5),h
3196  0EA8  7E          	ld	a,(hl)
3197  0EA9  4F          	ld	c,a
3198  0EAA  B7          	or	a, a
3199  0EAB  C2 2C 0F    	jp	NZ, l_spr_play_anim_00106
3200  0EAE  21 00 00    	ld	hl,_anim_count
3201  0EB1  35          	dec	(hl)
3202  0EB2  3E 00       	ld	a, +((_anim_col) & 0xFF)
3203  0EB4  DD 86 F9    	add	a,(ix-7)
3204  0EB7  6F          	ld	l, a
3205  0EB8  3E 00       	ld	a, +((_anim_col) / 256)
3206  0EBA  CE 00       	adc	a,0x00
3207  0EBC  67          	ld	h, a
3208  0EBD  7E          	ld	a, (hl)
3209  0EBE  32 00 00    	ld	(_s_col0),a
3210  0EC1  DD 6E FE    	ld	l,(ix-2)
3211  0EC4  DD 66 FF    	ld	h,(ix-1)
3212  0EC7  7E          	ld	a, (hl)
3213  0EC8  32 00 00    	ld	(_s_lin0),a
3214  0ECB  2A FF FF    	ld	hl,(_s_col0 - 1)
3215  0ECE  6F          	ld	l,a
3216  0ECF  E5          	push	hl
3217  0ED0  CD 00 00    	call	_spr_calc_index
3218  0ED3  F1          	pop	af
3219  0ED4  2A FF FF    	ld	hl,(_s_col0 - 1)
3220  0ED7  3A 00 00    	ld	a,(_s_lin0)
3221  0EDA  6F          	ld	l,a
3222  0EDB  E5          	push	hl
3223  0EDC  CD 00 00    	call	_spr_calc_index
3224  0EDF  F1          	pop	af
3225  0EE0  01 00 00    	ld	bc,_scr_map
3226  0EE3  09          	add	hl,bc
3227  0EE4  4E          	ld	c, (hl)
3228  0EE5  0C          	inc	c
3229  0EE6  20 1F       	jr	NZ,l_spr_play_anim_00102
3230  0EE8  2A FF FF    	ld	hl,(_s_col0 - 1)
3231  0EEB  3A 00 00    	ld	a,(_s_lin0)
3232  0EEE  6F          	ld	l,a
3233  0EEF  E5          	push	hl
3234  0EF0  CD 00 00    	call	_spr_calc_index
3235  0EF3  F1          	pop	af
3236  0EF4  22 00 00    	ld	(_index0),hl
3237  0EF7  01 00 00    	ld	bc,_scr_map
3238  0EFA  09          	add	hl,bc
3239  0EFB  E5          	push	hl
3240  0EFC  2A 00 00    	ld	hl,(_index0)
3241  0EFF  E5          	push	hl
3242  0F00  CD 00 00    	call	_game_match_back
3243  0F03  F1          	pop	af
3244  0F04  C1          	pop	bc
3245  0F05  7D          	ld	a,l
3246  0F06  02          	ld	(bc), a
3247  0F07              l_spr_play_anim_00102:
3248  0F07  CD 9B 0B    	call	_spr_back_repaint
3249  0F0A  3E 00       	ld	a, +((_anim_respanwn) & 0xFF)
3250  0F0C  DD 86 F9    	add	a,(ix-7)
3251  0F0F  4F          	ld	c, a
3252  0F10  3E 00       	ld	a, +((_anim_respanwn) / 256)
3253  0F12  CE 00       	adc	a,0x00
3254  0F14  47          	ld	b, a
3255  0F15  0A          	ld	a, (bc)
3256  0F16  B7          	or	a, a
3257  0F17  28 09       	jr	Z,l_spr_play_anim_00104
3258  0F19  DD 7E F9    	ld	a,(ix-7)
3259  0F1C  F5          	push	af
3260  0F1D  33          	inc	sp
3261  0F1E  CD 00 00    	call	_enemy_respawn
3262  0F21  33          	inc	sp
3263  0F22              l_spr_play_anim_00104:
3264  0F22  DD 6E FE    	ld	l,(ix-2)
3265  0F25  DD 66 FF    	ld	h,(ix-1)
3266  0F28  36 FF       	ld	(hl),0xff
3267  0F2A  18 10       	jr	l_spr_play_anim_00115
3268  0F2C              l_spr_play_anim_00106:
3269  0F2C  0D          	dec	c
3270  0F2D  DD 6E FA    	ld	l,(ix-6)
3271  0F30  DD 66 FB    	ld	h,(ix-5)
3272  0F33  71          	ld	(hl), c
3273  0F34  DD 6E FC    	ld	l,(ix-4)
3274  0F37  DD 66 FD    	ld	h,(ix-3)
3275  0F3A  36 00       	ld	(hl),0x00
3276  0F3C              l_spr_play_anim_00115:
3277  0F3C  DD 34 F9    	inc	(ix-7)
3278  0F3F  DD 7E F9    	ld	a,(ix-7)
3279  0F42  D6 08       	sub	a,0x08
3280  0F44  DA 22 0E    	jp	C, l_spr_play_anim_00114
3281  0F47  DD F9       	ld	sp, ix
3282  0F49  DD E1       	pop	ix
3283  0F4B  C9          	ret
3284  0F4C              	SECTION code_compiler
3285  0F4C              ;	---------------------------------
3286  0F4C              ; Function spr_play_bullets
3287  0F4C              ; ---------------------------------
3288  0F4C              _spr_play_bullets:
3289  0F4C  CD 00 00    	call	___sdcc_enter_ix
3290  0F4F  21 F3 FF    	ld	hl, -13
3291  0F52  39          	add	hl, sp
3292  0F53  F9          	ld	sp, hl
3293  0F54  3E 00       	ld	a,0x00
3294  0F56  DD 77 FF    	ld	(ix-1),a
3295  0F59  DD 77 F3    	ld	(ix-13),a
3296  0F5C              l_spr_play_bullets_00198:
3297  0F5C  01 00 00    	ld	bc,_bullet_col
3298  0F5F  DD 6E F3    	ld	l,(ix-13)
3299  0F62  26 00       	ld	h,0x00
3300  0F64  09          	add	hl,bc
3301  0F65  DD 75 FD    	ld	(ix-3),l
3302  0F68  DD 74 FE    	ld	(ix-2),h
3303  0F6B  7E          	ld	a,(hl)
3304  0F6C  4F          	ld	c,a
3305  0F6D  3C          	inc	a
3306  0F6E  CA FB 14    	jp	Z,l_spr_play_bullets_00192
3307  0F71  11 00 00    	ld	de,_bullet_lin
3308  0F74  DD 6E F3    	ld	l,(ix-13)
3309  0F77  26 00       	ld	h,0x00
3310  0F79  19          	add	hl,de
3311  0F7A  DD 75 FB    	ld	(ix-5),l
3312  0F7D  DD 74 FC    	ld	(ix-4),h
3313  0F80  7E          	ld	a, (hl)
3314  0F81  32 00 00    	ld	(_s_lin0),a
3315  0F84  21 00 00    	ld	hl,_s_col0
3316  0F87  71          	ld	(hl),c
3317  0F88  DD 71 F6    	ld	(ix-10),c
3318  0F8B  CD 9B 0B    	call	_spr_back_repaint
3319  0F8E  01 00 00    	ld	bc,_bullet_class
3320  0F91  DD 6E F3    	ld	l,(ix-13)
3321  0F94  26 00       	ld	h,0x00
3322  0F96  09          	add	hl,bc
3323  0F97  DD 75 F9    	ld	(ix-7),l
3324  0F9A  DD 74 FA    	ld	(ix-6),h
3325  0F9D  7E          	ld	a, (hl)
3326  0F9E  D6 02       	sub	a,0x02
3327  0FA0  20 46       	jr	NZ,l_spr_play_bullets_00107
3328  0FA2  3A 00 00    	ld	a,(_s_lin0)
3329  0FA5  4F          	ld	c,a
3330  0FA6  06 00       	ld	b,0x00
3331  0FA8  3E 00       	ld	a, +((_bullet_lin0) & 0xFF)
3332  0FAA  DD 86 F3    	add	a,(ix-13)
3333  0FAD  6F          	ld	l, a
3334  0FAE  3E 00       	ld	a, +((_bullet_lin0) / 256)
3335  0FB0  CE 00       	adc	a,0x00
3336  0FB2  67          	ld	h, a
3337  0FB3  5E          	ld	e, (hl)
3338  0FB4  16 00       	ld	d,0x00
3339  0FB6  79          	ld	a, c
3340  0FB7  93          	sub	a, e
3341  0FB8  4F          	ld	c, a
3342  0FB9  78          	ld	a, b
3343  0FBA  9A          	sbc	a, d
3344  0FBB  47          	ld	b, a
3345  0FBC  3E 08       	ld	a,0x08
3346  0FBE  B9          	cp	a, c
3347  0FBF  3E 00       	ld	a,0x00
3348  0FC1  98          	sbc	a, b
3349  0FC2  E2 C7 0F    	jp	PO, l_spr_play_bullets_00412
3350  0FC5  EE 80       	xor	a,0x80
3351  0FC7              l_spr_play_bullets_00412:
3352  0FC7  FA E0 0F    	jp	M, l_spr_play_bullets_00104
3353  0FCA  DD 6E FB    	ld	l,(ix-5)
3354  0FCD  DD 66 FC    	ld	h,(ix-4)
3355  0FD0  4E          	ld	c, (hl)
3356  0FD1  0C          	inc	c
3357  0FD2  0C          	inc	c
3358  0FD3  DD 6E FB    	ld	l,(ix-5)
3359  0FD6  DD 66 FC    	ld	h,(ix-4)
3360  0FD9  71          	ld	(hl), c
3361  0FDA  21 00 00    	ld	hl,_s_lin0
3362  0FDD  71          	ld	(hl), c
3363  0FDE  18 08       	jr	l_spr_play_bullets_00107
3364  0FE0              l_spr_play_bullets_00104:
3365  0FE0  DD 6E F9    	ld	l,(ix-7)
3366  0FE3  DD 66 FA    	ld	h,(ix-6)
3367  0FE6  36 03       	ld	(hl),0x03
3368  0FE8              l_spr_play_bullets_00107:
3369  0FE8  DD 6E F9    	ld	l,(ix-7)
3370  0FEB  DD 66 FA    	ld	h,(ix-6)
3371  0FEE  7E          	ld	a, (hl)
3372  0FEF  D6 03       	sub	a,0x03
3373  0FF1  20 46       	jr	NZ,l_spr_play_bullets_00112
3374  0FF3  3E 00       	ld	a, +((_bullet_lin0) & 0xFF)
3375  0FF5  DD 86 F3    	add	a,(ix-13)
3376  0FF8  6F          	ld	l, a
3377  0FF9  3E 00       	ld	a, +((_bullet_lin0) / 256)
3378  0FFB  CE 00       	adc	a,0x00
3379  0FFD  67          	ld	h, a
3380  0FFE  4E          	ld	c, (hl)
3381  0FFF  06 00       	ld	b,0x00
3382  1001  3A 00 00    	ld	a,(_s_lin0)
3383  1004  5F          	ld	e,a
3384  1005  16 00       	ld	d,0x00
3385  1007  79          	ld	a, c
3386  1008  93          	sub	a, e
3387  1009  4F          	ld	c, a
3388  100A  78          	ld	a, b
3389  100B  9A          	sbc	a, d
3390  100C  47          	ld	b, a
3391  100D  3E 08       	ld	a,0x08
3392  100F  B9          	cp	a, c
3393  1010  3E 00       	ld	a,0x00
3394  1012  98          	sbc	a, b
3395  1013  E2 18 10    	jp	PO, l_spr_play_bullets_00415
3396  1016  EE 80       	xor	a,0x80
3397  1018              l_spr_play_bullets_00415:
3398  1018  FA 31 10    	jp	M, l_spr_play_bullets_00109
3399  101B  DD 6E FB    	ld	l,(ix-5)
3400  101E  DD 66 FC    	ld	h,(ix-4)
3401  1021  4E          	ld	c, (hl)
3402  1022  0D          	dec	c
3403  1023  0D          	dec	c
3404  1024  DD 6E FB    	ld	l,(ix-5)
3405  1027  DD 66 FC    	ld	h,(ix-4)
3406  102A  71          	ld	(hl), c
3407  102B  21 00 00    	ld	hl,_s_lin0
3408  102E  71          	ld	(hl), c
3409  102F  18 08       	jr	l_spr_play_bullets_00112
3410  1031              l_spr_play_bullets_00109:
3411  1031  DD 6E F9    	ld	l,(ix-7)
3412  1034  DD 66 FA    	ld	h,(ix-6)
3413  1037  36 02       	ld	(hl),0x02
3414  1039              l_spr_play_bullets_00112:
3415  1039  DD 6E F9    	ld	l,(ix-7)
3416  103C  DD 66 FA    	ld	h,(ix-6)
3417  103F  7E          	ld	a, (hl)
3418  1040  D6 04       	sub	a,0x04
3419  1042  C2 C8 10    	jp	NZ,l_spr_play_bullets_00125
3420  1045  DD 6E FB    	ld	l,(ix-5)
3421  1048  DD 66 FC    	ld	h,(ix-4)
3422  104B  7E          	ld	a, (hl)
3423  104C  32 00 00    	ld	(_s_lin0),a
3424  104F  DD 6E FD    	ld	l,(ix-3)
3425  1052  DD 66 FE    	ld	h,(ix-2)
3426  1055  7E          	ld	a, (hl)
3427  1056  C6 FF       	add	a,0xff
3428  1058  32 00 00    	ld	(_s_col0),a
3429  105B  D6 20       	sub	a,0x20
3430  105D  30 03       	jr	NC,l_spr_play_bullets_00114
3431  105F  CD 9B 0B    	call	_spr_back_repaint
3432  1062              l_spr_play_bullets_00114:
3433  1062  3E 00       	ld	a, +((_bullet_vel) & 0xFF)
3434  1064  DD 86 F3    	add	a,(ix-13)
3435  1067  4F          	ld	c, a
3436  1068  3E 00       	ld	a, +((_bullet_vel) / 256)
3437  106A  CE 00       	adc	a,0x00
3438  106C  47          	ld	b, a
3439  106D  0A          	ld	a, (bc)
3440  106E  5F          	ld	e, a
3441  106F  21 00 00    	ld	hl,_game_gravity
3442  1072  56          	ld	d, (hl)
3443  1073  7B          	ld	a, e
3444  1074  82          	add	a, d
3445  1075  5F          	ld	e,a
3446  1076  02          	ld	(bc), a
3447  1077  3E 78       	ld	a,0x78
3448  1079  93          	sub	a, e
3449  107A  E2 7F 10    	jp	PO, l_spr_play_bullets_00418
3450  107D  EE 80       	xor	a,0x80
3451  107F              l_spr_play_bullets_00418:
3452  107F  F2 85 10    	jp	P, l_spr_play_bullets_00116
3453  1082  3E 78       	ld	a,0x78
3454  1084  02          	ld	(bc), a
3455  1085              l_spr_play_bullets_00116:
3456  1085  0A          	ld	a, (bc)
3457  1086  EE 80       	xor	a,0x80
3458  1088  D6 08       	sub	a,0x08
3459  108A  30 03       	jr	NC,l_spr_play_bullets_00118
3460  108C  3E 88       	ld	a,0x88
3461  108E  02          	ld	(bc), a
3462  108F              l_spr_play_bullets_00118:
3463  108F  0A          	ld	a, (bc)
3464  1090  CB 47       	bit	0,a
3465  1092  32 00 00    	ld	(_s_lin1),a
3466  1095  28 04       	jr	Z,l_spr_play_bullets_00120
3467  1097  21 00 00    	ld	hl,_s_lin1
3468  109A  35          	dec	(hl)
3469  109B              l_spr_play_bullets_00120:
3470  109B  DD 6E FB    	ld	l,(ix-5)
3471  109E  DD 66 FC    	ld	h,(ix-4)
3472  10A1  7E          	ld	a, (hl)
3473  10A2  21 00 00    	ld	hl,_s_lin1
3474  10A5  86          	add	a, (hl)
3475  10A6  21 00 00    	ld	hl,_s_lin0
3476  10A9  77          	ld	(hl), a
3477  10AA  3E 90       	ld	a,0x90
3478  10AC  96          	sub	a, (hl)
3479  10AD  30 0F       	jr	NC,l_spr_play_bullets_00122
3480  10AF  21 00 00    	ld	hl,_bullet_count
3481  10B2  35          	dec	(hl)
3482  10B3  DD 6E FD    	ld	l,(ix-3)
3483  10B6  DD 66 FE    	ld	h,(ix-2)
3484  10B9  36 FF       	ld	(hl),0xff
3485  10BB  C3 FB 14    	jp	l_spr_play_bullets_00192
3486  10BE              l_spr_play_bullets_00122:
3487  10BE  DD 6E FB    	ld	l,(ix-5)
3488  10C1  DD 66 FC    	ld	h,(ix-4)
3489  10C4  3A 00 00    	ld	a,(_s_lin0)
3490  10C7  77          	ld	(hl),a
3491  10C8              l_spr_play_bullets_00125:
3492  10C8  3E 00       	ld	a, +((_bullet_dir) & 0xFF)
3493  10CA  DD 86 F3    	add	a,(ix-13)
3494  10CD  6F          	ld	l, a
3495  10CE  3E 00       	ld	a, +((_bullet_dir) / 256)
3496  10D0  CE 00       	adc	a,0x00
3497  10D2  67          	ld	h, a
3498  10D3  4E          	ld	c, (hl)
3499  10D4  0C          	inc	c
3500  10D5  20 3D       	jr	NZ,l_spr_play_bullets_00135
3501  10D7  3E 00       	ld	a, +((_bullet_colint) & 0xFF)
3502  10D9  DD 86 F3    	add	a,(ix-13)
3503  10DC  4F          	ld	c, a
3504  10DD  3E 00       	ld	a, +((_bullet_colint) / 256)
3505  10DF  CE 00       	adc	a,0x00
3506  10E1  47          	ld	b, a
3507  10E2  0A          	ld	a, (bc)
3508  10E3  3C          	inc	a
3509  10E4  5F          	ld	e,a
3510  10E5  02          	ld	(bc), a
3511  10E6  3E 00       	ld	a, +((_bullet_frames) & 0xFF)
3512  10E8  DD 86 F3    	add	a,(ix-13)
3513  10EB  6F          	ld	l, a
3514  10EC  3E 00       	ld	a, +((_bullet_frames) / 256)
3515  10EE  CE 00       	adc	a,0x00
3516  10F0  67          	ld	h, a
3517  10F1  56          	ld	d, (hl)
3518  10F2  7B          	ld	a, e
3519  10F3  92          	sub	a, d
3520  10F4  38 63       	jr	C,l_spr_play_bullets_00136
3521  10F6  DD 6E FD    	ld	l,(ix-3)
3522  10F9  DD 66 FE    	ld	h,(ix-2)
3523  10FC  7E          	ld	a, (hl)
3524  10FD  3C          	inc	a
3525  10FE  DD 77 F6    	ld	(ix-10),a
3526  1101  AF          	xor	a, a
3527  1102  02          	ld	(bc), a
3528  1103  DD 7E F6    	ld	a,(ix-10)
3529  1106  E6 01       	and	a,0x01
3530  1108  3D          	dec	a
3531  1109  20 4E       	jr	NZ,l_spr_play_bullets_00136
3532  110B  DD 7E F6    	ld	a,(ix-10)
3533  110E  3C          	inc	a
3534  110F  32 00 00    	ld	(_s_col0),a
3535  1112  18 45       	jr	l_spr_play_bullets_00136
3536  1114              l_spr_play_bullets_00135:
3537  1114  01 00 00    	ld	bc,_bullet_colint
3538  1117  DD 6E F3    	ld	l,(ix-13)
3539  111A  26 00       	ld	h,0x00
3540  111C  09          	add	hl,bc
3541  111D  DD 75 F7    	ld	(ix-9),l
3542  1120  DD 74 F8    	ld	(ix-8),h
3543  1123  4E          	ld	c,(hl)
3544  1124  0D          	dec	c
3545  1125  71          	ld	(hl), c
3546  1126  0C          	inc	c
3547  1127  20 30       	jr	NZ,l_spr_play_bullets_00136
3548  1129  DD 6E FD    	ld	l,(ix-3)
3549  112C  DD 66 FE    	ld	h,(ix-2)
3550  112F  7E          	ld	a, (hl)
3551  1130  C6 FF       	add	a,0xff
3552  1132  DD 77 F6    	ld	(ix-10),a
3553  1135  3E 00       	ld	a, +((_bullet_frames) & 0xFF)
3554  1137  DD 86 F3    	add	a,(ix-13)
3555  113A  6F          	ld	l, a
3556  113B  3E 00       	ld	a, +((_bullet_frames) / 256)
3557  113D  CE 00       	adc	a,0x00
3558  113F  67          	ld	h, a
3559  1140  4E          	ld	c, (hl)
3560  1141  0D          	dec	c
3561  1142  DD 6E F7    	ld	l,(ix-9)
3562  1145  DD 66 F8    	ld	h,(ix-8)
3563  1148  71          	ld	(hl), c
3564  1149  DD 7E F6    	ld	a,(ix-10)
3565  114C  E6 01       	and	a,0x01
3566  114E  3D          	dec	a
3567  114F  20 08       	jr	NZ,l_spr_play_bullets_00136
3568  1151  DD 7E F6    	ld	a,(ix-10)
3569  1154  C6 FF       	add	a,0xff
3570  1156  32 00 00    	ld	(_s_col0),a
3571  1159              l_spr_play_bullets_00136:
3572  1159  21 00 00    	ld	hl,_tmp1
3573  115C  36 00       	ld	(hl),0x00
3574  115E  3E 00       	ld	a, +((_bullet_max) & 0xFF)
3575  1160  DD 86 F3    	add	a,(ix-13)
3576  1163  4F          	ld	c, a
3577  1164  3E 00       	ld	a, +((_bullet_max) / 256)
3578  1166  CE 00       	adc	a,0x00
3579  1168  47          	ld	b, a
3580  1169  0A          	ld	a, (bc)
3581  116A  B7          	or	a, a
3582  116B  28 27       	jr	Z,l_spr_play_bullets_00140
3583  116D  DD 5E F6    	ld	e,(ix-10)
3584  1170  16 00       	ld	d,0x00
3585  1172  3E 00       	ld	a, +((_bullet_col0) & 0xFF)
3586  1174  DD 86 F3    	add	a,(ix-13)
3587  1177  6F          	ld	l, a
3588  1178  3E 00       	ld	a, +((_bullet_col0) / 256)
3589  117A  CE 00       	adc	a,0x00
3590  117C  67          	ld	h, a
3591  117D  6E          	ld	l, (hl)
3592  117E  AF          	xor	a,a
3593  117F  67          	ld	h,a
3594  1180  EB          	ex	de,hl
3595  1181  ED 52       	sbc	hl,de
3596  1183  CD 00 00    	call	_abs_fastcall
3597  1186  5D          	ld	e, l
3598  1187  21 00 00    	ld	hl,_tmp0
3599  118A  73          	ld	(hl), e
3600  118B  0A          	ld	a, (bc)
3601  118C  96          	sub	a, (hl)
3602  118D  30 05       	jr	NC,l_spr_play_bullets_00140
3603  118F  21 00 00    	ld	hl,_tmp1
3604  1192  36 01       	ld	(hl),0x01
3605  1194              l_spr_play_bullets_00140:
3606  1194  DD 7E F6    	ld	a,(ix-10)
3607  1197  D6 1E       	sub	a,0x1e
3608  1199  38 05       	jr	C,l_spr_play_bullets_00142
3609  119B  21 00 00    	ld	hl,_tmp1
3610  119E  36 01       	ld	(hl),0x01
3611  11A0              l_spr_play_bullets_00142:
3612  11A0  3A 00 00    	ld	a,(_tmp1)
3613  11A3  B7          	or	a, a
3614  11A4  28 0F       	jr	Z,l_spr_play_bullets_00144
3615  11A6  21 00 00    	ld	hl,_bullet_count
3616  11A9  35          	dec	(hl)
3617  11AA  DD 6E FD    	ld	l,(ix-3)
3618  11AD  DD 66 FE    	ld	h,(ix-2)
3619  11B0  36 FF       	ld	(hl),0xff
3620  11B2  C3 FB 14    	jp	l_spr_play_bullets_00192
3621  11B5              l_spr_play_bullets_00144:
3622  11B5  DD 7E FD    	ld	a,(ix-3)
3623  11B8  DD 77 F7    	ld	(ix-9),a
3624  11BB  DD 7E FE    	ld	a,(ix-2)
3625  11BE  DD 77 F8    	ld	(ix-8),a
3626  11C1  DD 6E FD    	ld	l,(ix-3)
3627  11C4  DD 66 FE    	ld	h,(ix-2)
3628  11C7  DD 7E F6    	ld	a,(ix-10)
3629  11CA  96          	sub	a,(hl)
3630  11CB  CA BF 14    	jp	Z,l_spr_play_bullets_00187
3631  11CE  3A 00 00    	ld	a,(_s_lin0)
3632  11D1  C6 08       	add	a,0x08
3633  11D3  4F          	ld	c, a
3634  11D4  3A 00 00    	ld	a, (_s_col0)
3635  11D7  47          	ld	b,a
3636  11D8  C5          	push	bc
3637  11D9  CD 00 00    	call	_spr_calc_index
3638  11DC  F1          	pop	af
3639  11DD  22 00 00    	ld	(_index0),hl
3640  11E0  01 00 00    	ld	bc,_scr_map
3641  11E3  09          	add	hl,bc
3642  11E4  5E          	ld	e,(hl)
3643  11E5  DD 7E F3    	ld	a,(ix-13)
3644  11E8  D6 07       	sub	a,0x07
3645  11EA  4D          	ld	c,l
3646  11EB  44          	ld	b,h
3647  11EC  20 04       	jr	NZ,l_spr_play_bullets_00429
3648  11EE  3E 01       	ld	a,0x01
3649  11F0  18 01       	jr	l_spr_play_bullets_00430
3650  11F2              l_spr_play_bullets_00429:
3651  11F2  AF          	xor	a,a
3652  11F3              l_spr_play_bullets_00430:
3653  11F3  57          	ld	d, a
3654  11F4  7B          	ld	a, e
3655  11F5  D6 4D       	sub	a,0x4d
3656  11F7  20 45       	jr	NZ,l_spr_play_bullets_00146
3657  11F9  B2          	or	a,d
3658  11FA  28 42       	jr	Z,l_spr_play_bullets_00146
3659  11FC  2A 00 00    	ld	hl,(_index0)
3660  11FF  C5          	push	bc
3661  1200  E5          	push	hl
3662  1201  CD 00 00    	call	_game_match_back
3663  1204  F1          	pop	af
3664  1205  C1          	pop	bc
3665  1206  7D          	ld	a,l
3666  1207  02          	ld	(bc), a
3667  1208  2A 00 00    	ld	hl,(_index0)
3668  120B  CD 00 00    	call	_game_obj_set
3669  120E  2A 00 00    	ld	hl,(_index0)
3670  1211  4D          	ld	c,l
3671  1212  5C          	ld	e,h
3672  1213  06 04       	ld	b,0x04
3673  1215  79          	ld	a,c
3674  1216              l_spr_play_bullets_00433:
3675  1216  CB 3B       	srl	e
3676  1218  1F          	rra
3677  1219  10 FB       	djnz	l_spr_play_bullets_00433
3678  121B  07          	rlca
3679  121C  07          	rlca
3680  121D  07          	rlca
3681  121E  07          	rlca
3682  121F  E6 F0       	and	a,0xf0
3683  1221  DD 6E FB    	ld	l,(ix-5)
3684  1224  DD 66 FC    	ld	h,(ix-4)
3685  1227  77          	ld	(hl), a
3686  1228  3A 00 00    	ld	a,(_index0)
3687  122B  E6 0F       	and	a,0x0f
3688  122D  87          	add	a, a
3689  122E  DD 6E FD    	ld	l,(ix-3)
3690  1231  DD 66 FE    	ld	h,(ix-2)
3691  1234  77          	ld	(hl), a
3692  1235  DD 6E F3    	ld	l,(ix-13)
3693  1238  CD 0E 15    	call	_spr_explode_bullet
3694  123B  C3 FB 14    	jp	l_spr_play_bullets_00192
3695  123E              l_spr_play_bullets_00146:
3696  123E  7B          	ld	a, e
3697  123F  D6 48       	sub	a,0x48
3698  1241  38 0C       	jr	C,l_spr_play_bullets_00149
3699  1243  1C          	inc	e
3700  1244  28 09       	jr	Z,l_spr_play_bullets_00149
3701  1246  DD 6E F3    	ld	l,(ix-13)
3702  1249  CD 0E 15    	call	_spr_explode_bullet
3703  124C  C3 FB 14    	jp	l_spr_play_bullets_00192
3704  124F              l_spr_play_bullets_00149:
3705  124F  DD 6E FD    	ld	l,(ix-3)
3706  1252  DD 66 FE    	ld	h,(ix-2)
3707  1255  DD 7E F6    	ld	a,(ix-10)
3708  1258  77          	ld	(hl), a
3709  1259  DD 6E F9    	ld	l,(ix-7)
3710  125C  DD 66 FA    	ld	h,(ix-6)
3711  125F  7E          	ld	a, (hl)
3712  1260  D6 04       	sub	a,0x04
3713  1262  20 19       	jr	NZ,l_spr_play_bullets_00152
3714  1264  21 00 00    	ld	hl,_s_lin0
3715  1267  7E          	ld	a, (hl)
3716  1268  C6 F0       	add	a,0xf0
3717  126A  4F          	ld	c, a
3718  126B  7E          	ld	a, (hl)
3719  126C  C6 10       	add	a,0x10
3720  126E  DD 77 F4    	ld	(ix-12),a
3721  1271  DD 35 F6    	dec	(ix-10)
3722  1274  DD 7E F6    	ld	a,(ix-10)
3723  1277  3C          	inc	a
3724  1278  DD 77 F5    	ld	(ix-11),a
3725  127B  18 14       	jr	l_spr_play_bullets_00153
3726  127D              l_spr_play_bullets_00152:
3727  127D  21 00 00    	ld	hl,_s_lin0
3728  1280  7E          	ld	a, (hl)
3729  1281  C6 F8       	add	a,0xf8
3730  1283  4F          	ld	c, a
3731  1284  7E          	ld	a, (hl)
3732  1285  C6 08       	add	a,0x08
3733  1287  DD 77 F4    	ld	(ix-12),a
3734  128A  DD 7E F6    	ld	a,(ix-10)
3735  128D  3C          	inc	a
3736  128E  DD 77 F5    	ld	(ix-11),a
3737  1291              l_spr_play_bullets_00153:
3738  1291  7A          	ld	a, d
3739  1292  B7          	or	a, a
3740  1293  CA 81 14    	jp	Z, l_spr_play_bullets_00184
3741  1296  21 00 00    	ld	hl,_tmp0
3742  1299  36 00       	ld	(hl),0x00
3743  129B              l_spr_play_bullets_00194:
3744  129B  2A 00 00    	ld	hl,(_tmp0)
3745  129E  26 00       	ld	h,0x00
3746  12A0  11 00 00    	ld	de,_class
3747  12A3  19          	add	hl,de
3748  12A4  7E          	ld	a,(hl)
3749  12A5  B7          	or	a,a
3750  12A6  CA 4C 13    	jp	Z,l_spr_play_bullets_00195
3751  12A9  3A 07 00    	ld	a,(_bullet_col + 0x0007)
3752  12AC  3C          	inc	a
3753  12AD  CA 4C 13    	jp	Z,l_spr_play_bullets_00195
3754  12B0  2A 00 00    	ld	hl,(_tmp0)
3755  12B3  26 00       	ld	h,0x00
3756  12B5  11 00 00    	ld	de,_lin
3757  12B8  19          	add	hl,de
3758  12B9  7E          	ld	a,(hl)
3759  12BA  47          	ld	b,a
3760  12BB  91          	sub	a,c
3761  12BC  DA 4C 13    	jp	C,l_spr_play_bullets_00195
3762  12BF  21 00 00    	ld	hl,_tmp0
3763  12C2  DD 7E F4    	ld	a,(ix-12)
3764  12C5  90          	sub	a, b
3765  12C6  DA 4C 13    	jp	C, l_spr_play_bullets_00195
3766  12C9  5E          	ld	e,(hl)
3767  12CA  16 00       	ld	d,0x00
3768  12CC  21 00 00    	ld	hl,_col
3769  12CF  19          	add	hl,de
3770  12D0  7E          	ld	a,(hl)
3771  12D1  5F          	ld	e,a
3772  12D2  DD 96 F6    	sub	a,(ix-10)
3773  12D5  38 75       	jr	C,l_spr_play_bullets_00195
3774  12D7  DD 7E F5    	ld	a,(ix-11)
3775  12DA  93          	sub	a, e
3776  12DB  38 6F       	jr	C,l_spr_play_bullets_00195
3777  12DD  21 00 00    	ld	hl,_s_lin0
3778  12E0  70          	ld	(hl), b
3779  12E1  21 00 00    	ld	hl,_s_col0
3780  12E4  73          	ld	(hl), e
3781  12E5  C5          	push	bc
3782  12E6  CD 00 00    	call	_rand
3783  12E9  11 06 00    	ld	de,0x0006
3784  12EC  D5          	push	de
3785  12ED  E5          	push	hl
3786  12EE  CD 00 00    	call	__modsint_callee
3787  12F1  CD 00 00    	call	_player_score_add
3788  12F4  C1          	pop	bc
3789  12F5  2A 00 00    	ld	hl,(_tmp0)
3790  12F8  26 00       	ld	h,0x00
3791  12FA  29          	add	hl,hl
3792  12FB  11 00 00    	ld	de,_game_respawn_time
3793  12FE  19          	add	hl, de
3794  12FF  DD 75 F9    	ld	(ix-7),l
3795  1302  DD 74 FA    	ld	(ix-6),h
3796  1305  ED 5B 00 00 	ld	de,(_curr_time)
3797  1309  73          	ld	(hl), e
3798  130A  23          	inc	hl
3799  130B  72          	ld	(hl), d
3800  130C  2A 00 00    	ld	hl,(_tmp0)
3801  130F  C5          	push	bc
3802  1310  CD 8F 08    	call	_spr_destroy
3803  1313  C1          	pop	bc
3804  1314  2A 00 00    	ld	hl,(_tmp0)
3805  1317  26 00       	ld	h,0x00
3806  1319  11 00 00    	ld	de,_bullet_col
3807  131C  19          	add	hl,de
3808  131D  7E          	ld	a,(hl)
3809  131E  47          	ld	b,a
3810  131F  3C          	inc	a
3811  1320  28 17       	jr	Z,l_spr_play_bullets_00155
3812  1322  3A 00 00    	ld	a,(_tmp0)
3813  1325  5F          	ld	e,a
3814  1326  16 00       	ld	d,0x00
3815  1328  21 00 00    	ld	hl,_bullet_lin
3816  132B  19          	add	hl,de
3817  132C  7E          	ld	a,(hl)
3818  132D  32 00 00    	ld	(_s_lin0),a
3819  1330  21 00 00    	ld	hl,_s_col0
3820  1333  70          	ld	(hl), b
3821  1334  C5          	push	bc
3822  1335  CD 9B 0B    	call	_spr_back_repaint
3823  1338  C1          	pop	bc
3824  1339              l_spr_play_bullets_00155:
3825  1339  3A 00 00    	ld	a,(_s_col0)
3826  133C  32 07 00    	ld	((_bullet_col + 0x0007)),a
3827  133F  C5          	push	bc
3828  1340  2E 07       	ld	l,0x07
3829  1342  CD 0E 15    	call	_spr_explode_bullet
3830  1345  C1          	pop	bc
3831  1346  21 00 00    	ld	hl,_ay_effect_02
3832  1349  CD 00 00    	call	_ay_fx_play
3833  134C              l_spr_play_bullets_00195:
3834  134C  21 00 00    	ld	hl,_tmp0
3835  134F  7E          	ld	a,(hl)
3836  1350  3C          	inc	a
3837  1351  77          	ld	(hl),a
3838  1352  D6 07       	sub	a,0x07
3839  1354  DA 9B 12    	jp	C, l_spr_play_bullets_00194
3840  1357  3A 00 00    	ld	a,(_game_boss)
3841  135A  B7          	or	a, a
3842  135B  CA BF 14    	jp	Z, l_spr_play_bullets_00187
3843  135E  21 00 00    	ld	hl,_boss_lin
3844  1361  7E          	ld	a, (hl)
3845  1362  91          	sub	a, c
3846  1363  38 06       	jr	C,l_spr_play_bullets_00173
3847  1365  DD 7E F4    	ld	a,(ix-12)
3848  1368  96          	sub	a, (hl)
3849  1369  30 28       	jr	NC,l_spr_play_bullets_00174
3850  136B              l_spr_play_bullets_00173:
3851  136B  3A 00 00    	ld	a,(_boss_lin)
3852  136E  5F          	ld	e,a
3853  136F  16 00       	ld	d,0x00
3854  1371  21 10 00    	ld	hl,0x0010
3855  1374  19          	add	hl, de
3856  1375  06 00       	ld	b,0x00
3857  1377  7D          	ld	a, l
3858  1378  91          	sub	a, c
3859  1379  7C          	ld	a, h
3860  137A  98          	sbc	a, b
3861  137B  E2 80 13    	jp	PO, l_spr_play_bullets_00441
3862  137E  EE 80       	xor	a,0x80
3863  1380              l_spr_play_bullets_00441:
3864  1380  FA BF 14    	jp	M, l_spr_play_bullets_00187
3865  1383  DD 7E F4    	ld	a,(ix-12)
3866  1386  06 00       	ld	b,0x00
3867  1388  95          	sub	a, l
3868  1389  78          	ld	a, b
3869  138A  9C          	sbc	a, h
3870  138B  E2 90 13    	jp	PO, l_spr_play_bullets_00442
3871  138E  EE 80       	xor	a,0x80
3872  1390              l_spr_play_bullets_00442:
3873  1390  FA BF 14    	jp	M, l_spr_play_bullets_00187
3874  1393              l_spr_play_bullets_00174:
3875  1393  21 00 00    	ld	hl,_boss_col
3876  1396  7E          	ld	a, (hl)
3877  1397  DD 96 F6    	sub	a,(ix-10)
3878  139A  DA BF 14    	jp	C, l_spr_play_bullets_00187
3879  139D  DD 7E F5    	ld	a,(ix-11)
3880  13A0  96          	sub	a, (hl)
3881  13A1  DA BF 14    	jp	C, l_spr_play_bullets_00187
3882  13A4  DD 6E F3    	ld	l,(ix-13)
3883  13A7  CD 0E 15    	call	_spr_explode_bullet
3884  13AA  21 00 00    	ld	hl,_game_boss_hit
3885  13AD  35          	dec	(hl)
3886  13AE  CD 00 00    	call	_game_update_stats
3887  13B1  3A 00 00    	ld	a,(_game_boss_hit)
3888  13B4  B7          	or	a, a
3889  13B5  C2 BF 14    	jp	NZ, l_spr_play_bullets_00187
3890  13B8  21 00 00    	ld	hl,_game_boss
3891  13BB  36 00       	ld	(hl),0x00
3892  13BD  21 00 00    	ld	hl,_game_boss_alive
3893  13C0  36 00       	ld	(hl),0x00
3894  13C2  3A 00 00    	ld	a,(_boss_col)
3895  13C5  21 00 00    	ld	hl,0x0000
3896  13C8  E5          	push	hl
3897  13C9  21 87 03    	ld	hl,0x0387
3898  13CC  E5          	push	hl
3899  13CD  F5          	push	af
3900  13CE  33          	inc	sp
3901  13CF  3A 00 00    	ld	a,(_boss_lin)
3902  13D2  F5          	push	af
3903  13D3  33          	inc	sp
3904  13D4  CD 48 0D    	call	_spr_add_anim
3905  13D7  F1          	pop	af
3906  13D8  F1          	pop	af
3907  13D9  F1          	pop	af
3908  13DA  21 00 00    	ld	hl,_boss_col
3909  13DD  46          	ld	b, (hl)
3910  13DE  04          	inc	b
3911  13DF  04          	inc	b
3912  13E0  21 00 00    	ld	hl,0x0000
3913  13E3  E5          	push	hl
3914  13E4  21 87 03    	ld	hl,0x0387
3915  13E7  E5          	push	hl
3916  13E8  C5          	push	bc
3917  13E9  33          	inc	sp
3918  13EA  3A 00 00    	ld	a,(_boss_lin)
3919  13ED  F5          	push	af
3920  13EE  33          	inc	sp
3921  13EF  CD 48 0D    	call	_spr_add_anim
3922  13F2  F1          	pop	af
3923  13F3  F1          	pop	af
3924  13F4  F1          	pop	af
3925  13F5  3A 00 00    	ld	a,(_boss_lin)
3926  13F8  C6 10       	add	a,0x10
3927  13FA  47          	ld	b, a
3928  13FB  3A 00 00    	ld	a,(_boss_col)
3929  13FE  21 00 00    	ld	hl,0x0000
3930  1401  E5          	push	hl
3931  1402  21 87 03    	ld	hl,0x0387
3932  1405  E5          	push	hl
3933  1406  48          	ld	c,b
3934  1407  47          	ld	b,a
3935  1408  C5          	push	bc
3936  1409  CD 48 0D    	call	_spr_add_anim
3937  140C  F1          	pop	af
3938  140D  F1          	pop	af
3939  140E  F1          	pop	af
3940  140F  21 00 00    	ld	hl,_boss_col
3941  1412  46          	ld	b, (hl)
3942  1413  04          	inc	b
3943  1414  04          	inc	b
3944  1415  3A 00 00    	ld	a,(_boss_lin)
3945  1418  C6 10       	add	a,0x10
3946  141A  57          	ld	d, a
3947  141B  21 00 00    	ld	hl,0x0000
3948  141E  E5          	push	hl
3949  141F  21 87 03    	ld	hl,0x0387
3950  1422  E5          	push	hl
3951  1423  4A          	ld	c, d
3952  1424  C5          	push	bc
3953  1425  CD 48 0D    	call	_spr_add_anim
3954  1428  F1          	pop	af
3955  1429  F1          	pop	af
3956  142A  F1          	pop	af
3957  142B  21 00 00    	ld	hl,_tmp0
3958  142E  36 00       	ld	(hl),0x00
3959  1430              l_spr_play_bullets_00196:
3960  1430  2A 00 00    	ld	hl,(_tmp0)
3961  1433  26 00       	ld	h,0x00
3962  1435  01 00 00    	ld	bc,_bullet_col
3963  1438  09          	add	hl,bc
3964  1439  7E          	ld	a,(hl)
3965  143A  4F          	ld	c,a
3966  143B  3C          	inc	a
3967  143C  28 15       	jr	Z,l_spr_play_bullets_00165
3968  143E  3A 00 00    	ld	a,(_tmp0)
3969  1441  5F          	ld	e,a
3970  1442  16 00       	ld	d,0x00
3971  1444  21 00 00    	ld	hl,_bullet_lin
3972  1447  19          	add	hl,de
3973  1448  7E          	ld	a,(hl)
3974  1449  32 00 00    	ld	(_s_lin0),a
3975  144C  21 00 00    	ld	hl,_s_col0
3976  144F  71          	ld	(hl), c
3977  1450  CD 9B 0B    	call	_spr_back_repaint
3978  1453              l_spr_play_bullets_00165:
3979  1453  2A 00 00    	ld	hl,(_tmp0)
3980  1456  26 00       	ld	h,0x00
3981  1458  01 00 00    	ld	bc,_bullet_col
3982  145B  09          	add	hl,bc
3983  145C  36 FF       	ld	(hl),0xff
3984  145E  2A 00 00    	ld	hl,(_tmp0)
3985  1461  CD 8F 08    	call	_spr_destroy
3986  1464  2A 00 00    	ld	hl,(_tmp0)
3987  1467  26 00       	ld	h,0x00
3988  1469  29          	add	hl, hl
3989  146A  11 00 00    	ld	de,_game_respawn_time
3990  146D  19          	add	hl, de
3991  146E  AF          	xor	a, a
3992  146F  77          	ld	(hl), a
3993  1470  23          	inc	hl
3994  1471  77          	ld	(hl), a
3995  1472  21 00 00    	ld	hl,_tmp0
3996  1475  7E          	ld	a,(hl)
3997  1476  3C          	inc	a
3998  1477  77          	ld	(hl),a
3999  1478  D6 07       	sub	a,0x07
4000  147A  38 B4       	jr	C,l_spr_play_bullets_00196
4001  147C  CD 00 00    	call	_game_boss_clear
4002  147F  18 3E       	jr	l_spr_play_bullets_00187
4003  1481              l_spr_play_bullets_00184:
4004  1481  3A 07 00    	ld	a,(_lin + 7)
4005  1484  47          	ld	b,a
4006  1485  91          	sub	a, c
4007  1486  38 37       	jr	C,l_spr_play_bullets_00187
4008  1488  DD 7E F4    	ld	a,(ix-12)
4009  148B  90          	sub	a, b
4010  148C  38 31       	jr	C,l_spr_play_bullets_00187
4011  148E  3A 07 00    	ld	a,(_col + 7)
4012  1491  4F          	ld	c,a
4013  1492  DD 96 F6    	sub	a,(ix-10)
4014  1495  38 28       	jr	C,l_spr_play_bullets_00187
4015  1497  DD 7E F5    	ld	a,(ix-11)
4016  149A  91          	sub	a, c
4017  149B  38 22       	jr	C,l_spr_play_bullets_00187
4018  149D  21 00 00    	ld	hl,_ay_effect_06
4019  14A0  CD 00 00    	call	_ay_fx_play
4020  14A3  2E 03       	ld	l,0x03
4021  14A5  CD 00 00    	call	_zx_border_fastcall
4022  14A8  2E 0A       	ld	l,0x0a
4023  14AA  CD 00 00    	call	_player_hit
4024  14AD  DD 6E FD    	ld	l,(ix-3)
4025  14B0  DD 66 FE    	ld	h,(ix-2)
4026  14B3  3A 00 00    	ld	a,(_s_col0)
4027  14B6  77          	ld	(hl),a
4028  14B7  DD 6E FF    	ld	l,(ix-1)
4029  14BA  CD 0E 15    	call	_spr_explode_bullet
4030  14BD  18 4A       	jr	l_spr_play_bullets_00199
4031  14BF              l_spr_play_bullets_00187:
4032  14BF  DD 6E F7    	ld	l,(ix-9)
4033  14C2  DD 66 F8    	ld	h,(ix-8)
4034  14C5  4E          	ld	c, (hl)
4035  14C6  0C          	inc	c
4036  14C7  28 32       	jr	Z,l_spr_play_bullets_00192
4037  14C9  DD 7E F6    	ld	a,(ix-10)
4038  14CC  D6 20       	sub	a,0x20
4039  14CE  30 2B       	jr	NC,l_spr_play_bullets_00192
4040  14D0  F3          	di
4041  14D1  3E 00       	ld	a, +((_bullet_tile) & 0xFF)
4042  14D3  DD 86 F3    	add	a,(ix-13)
4043  14D6  6F          	ld	l, a
4044  14D7  3E 00       	ld	a, +((_bullet_tile) / 256)
4045  14D9  CE 00       	adc	a,0x00
4046  14DB  67          	ld	h, a
4047  14DC  4E          	ld	c, (hl)
4048  14DD  3E 00       	ld	a, +((_bullet_colint) & 0xFF)
4049  14DF  DD 86 F3    	add	a,(ix-13)
4050  14E2  6F          	ld	l, a
4051  14E3  3E 00       	ld	a, +((_bullet_colint) / 256)
4052  14E5  CE 00       	adc	a,0x00
4053  14E7  67          	ld	h, a
4054  14E8  46          	ld	b, (hl)
4055  14E9  79          	ld	a, c
4056  14EA  80          	add	a, b
4057  14EB  47          	ld	b, a
4058  14EC  DD 7E F6    	ld	a,(ix-10)
4059  14EF  F5          	push	af
4060  14F0  33          	inc	sp
4061  14F1  3A 00 00    	ld	a,(_s_lin0)
4062  14F4  48          	ld	c,b
4063  14F5  47          	ld	b,a
4064  14F6  C5          	push	bc
4065  14F7  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
4066  14FA  FB          	ei
4067  14FB              l_spr_play_bullets_00192:
4068  14FB  DD 34 F3    	inc	(ix-13)
4069  14FE  DD 7E F3    	ld	a,(ix-13)
4070  1501  DD 77 FF    	ld	(ix-1),a
4071  1504  D6 08       	sub	a,0x08
4072  1506  DA 5C 0F    	jp	C, l_spr_play_bullets_00198
4073  1509              l_spr_play_bullets_00199:
4074  1509  DD F9       	ld	sp, ix
4075  150B  DD E1       	pop	ix
4076  150D  C9          	ret
4077  150E              	SECTION code_compiler
4078  150E              ;	---------------------------------
4079  150E              ; Function spr_explode_bullet
4080  150E              ; ---------------------------------
4081  150E              _spr_explode_bullet:
4082  150E  5D          	ld	e, l
4083  150F  3E 00       	ld	a, +((_bullet_col) & 0xFF)
4084  1511  83          	add	a, e
4085  1512  4F          	ld	c, a
4086  1513  3E 00       	ld	a, +((_bullet_col) / 256)
4087  1515  CE 00       	adc	a,0x00
4088  1517  47          	ld	b, a
4089  1518  0A          	ld	a, (bc)
4090  1519  57          	ld	d, a
4091  151A  3E 00       	ld	a, +((_bullet_lin) & 0xFF)
4092  151C  83          	add	a, e
4093  151D  6F          	ld	l, a
4094  151E  3E 00       	ld	a, +((_bullet_lin) / 256)
4095  1520  CE 00       	adc	a,0x00
4096  1522  67          	ld	h, a
4097  1523  5E          	ld	e, (hl)
4098  1524  C5          	push	bc
4099  1525  21 00 00    	ld	hl,0x0000
4100  1528  E5          	push	hl
4101  1529  21 87 03    	ld	hl,0x0387
4102  152C  E5          	push	hl
4103  152D  D5          	push	de
4104  152E  CD 48 0D    	call	_spr_add_anim
4105  1531  F1          	pop	af
4106  1532  F1          	pop	af
4107  1533  F1          	pop	af
4108  1534  C1          	pop	bc
4109  1535  21 00 00    	ld	hl,_bullet_count
4110  1538  35          	dec	(hl)
4111  1539  3E FF       	ld	a,0xff
4112  153B  02          	ld	(bc), a
4113  153C  21 00 00    	ld	hl,_ay_effect_11
4114  153F  C3 00 00    	jp  _ay_fx_play
4115  1542              	SECTION code_compiler
4116  1542              ;	---------------------------------
4117  1542              ; Function spr_turn_horizontal
4118  1542              ; ---------------------------------
4119  1542              _spr_turn_horizontal:
4120  1542  21 00 00    	ld	hl,_s_state
4121  1545  CB 56       	bit	2, (hl)
4122  1547  28 0B       	jr	Z,l_spr_turn_horizontal_00102
4123  1549  21 00 00    	ld	hl,_s_state
4124  154C  7E          	ld	a,(hl)
4125  154D  F6 08       	or	a,0x08
4126  154F  E6 FB       	and	a,0xfb
4127  1551  77          	ld	(hl),a
4128  1552  18 09       	jr	l_spr_turn_horizontal_00103
4129  1554              l_spr_turn_horizontal_00102:
4130  1554  21 00 00    	ld	hl,_s_state
4131  1557  7E          	ld	a,(hl)
4132  1558  E6 F7       	and	a,0xf7
4133  155A  F6 04       	or	a,0x04
4134  155C  77          	ld	(hl),a
4135  155D              l_spr_turn_horizontal_00103:
4136  155D  2A 00 00    	ld	hl,(_sprite)
4137  1560  26 00       	ld	h,0x00
4138  1562  01 00 00    	ld	bc,_state
4139  1565  09          	add	hl,bc
4140  1566  3A 00 00    	ld	a,(_s_state)
4141  1569  77          	ld	(hl),a
4142  156A  2A 00 00    	ld	hl,(_sprite)
4143  156D  26 00       	ld	h,0x00
4144  156F  01 00 00    	ld	bc,_tile
4145  1572  09          	add	hl,bc
4146  1573  E5          	push	hl
4147  1574  2A 00 00    	ld	hl,(_sprite)
4148  1577  CD 24 09    	call	_spr_tile
4149  157A  C1          	pop	bc
4150  157B  7D          	ld	a,l
4151  157C  02          	ld	(bc), a
4152  157D  C9          	ret
4153  157E              	SECTION code_compiler
4154  157E              ;	---------------------------------
4155  157E              ; Function spr_btile_paint_back
4156  157E              ; ---------------------------------
4157  157E              _spr_btile_paint_back:
4158  157E  21 20 00    	ld	hl,0x0020
4159  1581  22 00 00    	ld	(_tmp_ui),hl
4160  1584  21 00 00    	ld	hl,_map_paper
4161  1587  7E          	ld	a, (hl)
4162  1588  0F          	rrca
4163  1589  0F          	rrca
4164  158A  0F          	rrca
4165  158B  E6 1F       	and	a,0x1f
4166  158D  B6          	or	a, (hl)
4167  158E  F6 40       	or	a,0x40
4168  1590  32 00 00    	ld	(_map_paper_clr),a
4169  1593              l_spr_btile_paint_back_00106:
4170  1593  21 00 00    	ld	hl,_tmp_ui
4171  1596  7E          	ld	a, (hl)
4172  1597  D6 20       	sub	a,0x20
4173  1599  23          	inc	hl
4174  159A  7E          	ld	a, (hl)
4175  159B  DE 2D       	sbc	a,0x2d
4176  159D  30 4C       	jr	NC,l_spr_btile_paint_back_00108
4177  159F  21 00 00    	ld	hl,_tmp0
4178  15A2  36 00       	ld	(hl),0x00
4179  15A4              l_spr_btile_paint_back_00103:
4180  15A4  3A 00 00    	ld	a,(_tmp0)
4181  15A7  D6 10       	sub	a,0x10
4182  15A9  30 34       	jr	NC,l_spr_btile_paint_back_00105
4183  15AB  01 00 00    	ld	bc,_btiles
4184  15AE  2A 00 00    	ld	hl,(_tmp_ui)
4185  15B1  09          	add	hl,bc
4186  15B2  7D          	ld	a,l
4187  15B3  44          	ld	b,h
4188  15B4  21 00 00    	ld	hl,_tmp0
4189  15B7  86          	add	a, (hl)
4190  15B8  4F          	ld	c, a
4191  15B9  78          	ld	a, b
4192  15BA  CE 00       	adc	a,0x00
4193  15BC  47          	ld	b, a
4194  15BD  0A          	ld	a, (bc)
4195  15BE  32 00 00    	ld	(_tmp),a
4196  15C1  E6 38       	and	a,0x38
4197  15C3  5F          	ld	e, a
4198  15C4  3A 00 00    	ld	a,(_map_paper_last)
4199  15C7  93          	sub	a, e
4200  15C8  20 0F       	jr	NZ,l_spr_btile_paint_back_00102
4201  15CA  21 00 00    	ld	hl,_tmp
4202  15CD  7E          	ld	a, (hl)
4203  15CE  E6 C7       	and	a,0xc7
4204  15D0  77          	ld	(hl),a
4205  15D1  21 00 00    	ld	hl,_map_paper
4206  15D4  B6          	or	a, (hl)
4207  15D5  32 00 00    	ld	(_tmp),a
4208  15D8  02          	ld	(bc), a
4209  15D9              l_spr_btile_paint_back_00102:
4210  15D9  21 00 00    	ld	hl,_tmp0
4211  15DC  34          	inc	(hl)
4212  15DD  18 C5       	jr	l_spr_btile_paint_back_00103
4213  15DF              l_spr_btile_paint_back_00105:
4214  15DF  2A 00 00    	ld	hl,(_tmp_ui)
4215  15E2  11 30 00    	ld	de,0x0030
4216  15E5  19          	add	hl,de
4217  15E6  22 00 00    	ld	(_tmp_ui),hl
4218  15E9  18 A8       	jr	l_spr_btile_paint_back_00106
4219  15EB              l_spr_btile_paint_back_00108:
4220  15EB  C3 00 00    	jp  _game_attribs
4221  15EE              	SECTION IGNORE
4222  0000              
