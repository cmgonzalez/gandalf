1     0000              MODULE game_engine_c
2     0000              LINE -1, "game_engine.c"
-1    0000              
0     0000              
1     0000              ;--------------------------------------------------------
2     0000              ; File Created by SDCC : free open source ANSI-C Compiler
3     0000              ; Version 3.6.5 #9958 (Mac OS X i386)
4     0000              ;--------------------------------------------------------
5     0000              ; Processed by Z88DK
6     0000              ;--------------------------------------------------------
7     0000              
8     0000              	EXTERN __divschar
9     0000              	EXTERN __divschar_callee
10    0000              	EXTERN __divsint
11    0000              	EXTERN __divsint_callee
12    0000              	EXTERN __divslong
13    0000              	EXTERN __divslong_callee
14    0000              	EXTERN __divslonglong
15    0000              	EXTERN __divslonglong_callee
16    0000              	EXTERN __divsuchar
17    0000              	EXTERN __divsuchar_callee
18    0000              	EXTERN __divuchar
19    0000              	EXTERN __divuchar_callee
20    0000              	EXTERN __divuint
21    0000              	EXTERN __divuint_callee
22    0000              	EXTERN __divulong
23    0000              	EXTERN __divulong_callee
24    0000              	EXTERN __divulonglong
25    0000              	EXTERN __divulonglong_callee
26    0000              	EXTERN __divuschar
27    0000              	EXTERN __divuschar_callee
28    0000              	EXTERN __modschar
29    0000              	EXTERN __modschar_callee
30    0000              	EXTERN __modsint
31    0000              	EXTERN __modsint_callee
32    0000              	EXTERN __modslong
33    0000              	EXTERN __modslong_callee
34    0000              	EXTERN __modslonglong
35    0000              	EXTERN __modslonglong_callee
36    0000              	EXTERN __modsuchar
37    0000              	EXTERN __modsuchar_callee
38    0000              	EXTERN __moduchar
39    0000              	EXTERN __moduchar_callee
40    0000              	EXTERN __moduint
41    0000              	EXTERN __moduint_callee
42    0000              	EXTERN __modulong
43    0000              	EXTERN __modulong_callee
44    0000              	EXTERN __modulonglong
45    0000              	EXTERN __modulonglong_callee
46    0000              	EXTERN __moduschar
47    0000              	EXTERN __moduschar_callee
48    0000              	EXTERN __mulint
49    0000              	EXTERN __mulint_callee
50    0000              	EXTERN __mullong
51    0000              	EXTERN __mullong_callee
52    0000              	EXTERN __mullonglong
53    0000              	EXTERN __mullonglong_callee
54    0000              	EXTERN __mulschar
55    0000              	EXTERN __mulschar_callee
56    0000              	EXTERN __mulsuchar
57    0000              	EXTERN __mulsuchar_callee
58    0000              	EXTERN __muluschar
59    0000              	EXTERN __muluschar_callee
60    0000              	EXTERN __rlslonglong
61    0000              	EXTERN __rlslonglong_callee
62    0000              	EXTERN __rlulonglong
63    0000              	EXTERN __rlulonglong_callee
64    0000              	EXTERN __rrslonglong
65    0000              	EXTERN __rrslonglong_callee
66    0000              	EXTERN __rrulonglong
67    0000              	EXTERN __rrulonglong_callee
68    0000              	EXTERN ___sdcc_call_hl
69    0000              	EXTERN ___sdcc_call_iy
70    0000              	EXTERN ___sdcc_enter_ix
71    0000              	EXTERN _banked_call
72    0000              	EXTERN _banked_ret
73    0000              	EXTERN ___fs2schar
74    0000              	EXTERN ___fs2schar_callee
75    0000              	EXTERN ___fs2sint
76    0000              	EXTERN ___fs2sint_callee
77    0000              	EXTERN ___fs2slong
78    0000              	EXTERN ___fs2slong_callee
79    0000              	EXTERN ___fs2slonglong
80    0000              	EXTERN ___fs2slonglong_callee
81    0000              	EXTERN ___fs2uchar
82    0000              	EXTERN ___fs2uchar_callee
83    0000              	EXTERN ___fs2uint
84    0000              	EXTERN ___fs2uint_callee
85    0000              	EXTERN ___fs2ulong
86    0000              	EXTERN ___fs2ulong_callee
87    0000              	EXTERN ___fs2ulonglong
88    0000              	EXTERN ___fs2ulonglong_callee
89    0000              	EXTERN ___fsadd
90    0000              	EXTERN ___fsadd_callee
91    0000              	EXTERN ___fsdiv
92    0000              	EXTERN ___fsdiv_callee
93    0000              	EXTERN ___fseq
94    0000              	EXTERN ___fseq_callee
95    0000              	EXTERN ___fsgt
96    0000              	EXTERN ___fsgt_callee
97    0000              	EXTERN ___fslt
98    0000              	EXTERN ___fslt_callee
99    0000              	EXTERN ___fsmul
100   0000              	EXTERN ___fsmul_callee
101   0000              	EXTERN ___fsneq
102   0000              	EXTERN ___fsneq_callee
103   0000              	EXTERN ___fssub
104   0000              	EXTERN ___fssub_callee
105   0000              	EXTERN ___schar2fs
106   0000              	EXTERN ___schar2fs_callee
107   0000              	EXTERN ___sint2fs
108   0000              	EXTERN ___sint2fs_callee
109   0000              	EXTERN ___slong2fs
110   0000              	EXTERN ___slong2fs_callee
111   0000              	EXTERN ___slonglong2fs
112   0000              	EXTERN ___slonglong2fs_callee
113   0000              	EXTERN ___uchar2fs
114   0000              	EXTERN ___uchar2fs_callee
115   0000              	EXTERN ___uint2fs
116   0000              	EXTERN ___uint2fs_callee
117   0000              	EXTERN ___ulong2fs
118   0000              	EXTERN ___ulong2fs_callee
119   0000              	EXTERN ___ulonglong2fs
120   0000              	EXTERN ___ulonglong2fs_callee
121   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
122   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
123   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
126   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
127   0000              	EXTERN ____sdcc_4_ldi_save_bc
128   0000              	EXTERN ____sdcc_4_push_hlix
129   0000              	EXTERN ____sdcc_4_push_mhl
130   0000              	EXTERN ____sdcc_lib_setmem_hl
131   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
132   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
133   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
134   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
135   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
136   0000              	EXTERN ____sdcc_ll_add_deix_hlix
137   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
138   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
139   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
140   0000              	EXTERN ____sdcc_ll_asr_hlix_a
141   0000              	EXTERN ____sdcc_ll_asr_mbc_a
142   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
143   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
144   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
145   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
146   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
147   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
148   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
149   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
150   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
151   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
152   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
153   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
155   0000              	EXTERN ____sdcc_ll_push_hlix
156   0000              	EXTERN ____sdcc_ll_push_mhl
157   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
158   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
159   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
160   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
161   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
162   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
163   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
164   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
165   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
166   0000              	EXTERN ____sdcc_load_debc_deix
167   0000              	EXTERN ____sdcc_load_dehl_deix
168   0000              	EXTERN ____sdcc_load_debc_mhl
169   0000              	EXTERN ____sdcc_load_hlde_mhl
170   0000              	EXTERN ____sdcc_store_dehl_bcix
171   0000              	EXTERN ____sdcc_store_debc_hlix
172   0000              	EXTERN ____sdcc_store_debc_mhl
173   0000              	EXTERN ____sdcc_cpu_pop_ei
174   0000              	EXTERN ____sdcc_cpu_pop_ei_jp
175   0000              	EXTERN ____sdcc_cpu_push_di
176   0000              	EXTERN ____sdcc_outi
177   0000              	EXTERN ____sdcc_outi_128
178   0000              	EXTERN ____sdcc_outi_256
179   0000              	EXTERN ____sdcc_ldi
180   0000              	EXTERN ____sdcc_ldi_128
181   0000              	EXTERN ____sdcc_ldi_256
182   0000              	EXTERN ____sdcc_4_copy_srcd_hlix_dst_deix
183   0000              	EXTERN ____sdcc_4_and_src_mbc_mhl_dst_deix
184   0000              	EXTERN ____sdcc_4_or_src_mbc_mhl_dst_deix
185   0000              	EXTERN ____sdcc_4_xor_src_mbc_mhl_dst_deix
186   0000              	EXTERN ____sdcc_4_or_src_dehl_dst_bcix
187   0000              	EXTERN ____sdcc_4_xor_src_dehl_dst_bcix
188   0000              	EXTERN ____sdcc_4_and_src_dehl_dst_bcix
189   0000              	EXTERN ____sdcc_4_xor_src_mbc_mhl_dst_debc
190   0000              	EXTERN ____sdcc_4_or_src_mbc_mhl_dst_debc
191   0000              	EXTERN ____sdcc_4_and_src_mbc_mhl_dst_debc
192   0000              	EXTERN ____sdcc_4_cpl_src_mhl_dst_debc
193   0000              	EXTERN ____sdcc_4_xor_src_debc_mhl_dst_debc
194   0000              	EXTERN ____sdcc_4_or_src_debc_mhl_dst_debc
195   0000              	EXTERN ____sdcc_4_and_src_debc_mhl_dst_debc
196   0000              	EXTERN ____sdcc_4_and_src_debc_hlix_dst_debc
197   0000              	EXTERN ____sdcc_4_or_src_debc_hlix_dst_debc
198   0000              	EXTERN ____sdcc_4_xor_src_debc_hlix_dst_debc
199   0000              
200   0000              ;--------------------------------------------------------
201   0000              ; Public variables in this module
202   0000              ;--------------------------------------------------------
203   0000              	GLOBAL _game_tick
204   0000              	GLOBAL _game_end
205   0000              	GLOBAL _game_loop
206   0000              	GLOBAL _game_fps
207   0000              	GLOBAL _game_respawn
208   0000              	GLOBAL _game_draw_screen
209   0000              	GLOBAL _game_boss_kill
210   0000              	GLOBAL _game_add_enemy
211   0000              	GLOBAL _game_print_footer
212   0000              	GLOBAL _game_print_score
213   0000              	GLOBAL _game_update_stats
214   0000              	GLOBAL _game_start_timer
215   0000              	GLOBAL _game_set_checkpoint
216   0000              	GLOBAL _game_round_init
217   0000              	GLOBAL _game_print_header
218   0000              	GLOBAL _game_check_map
219   0000              	GLOBAL _game_check_cell
220   0000              	GLOBAL _game_paint_attrib
221   0000              	GLOBAL _game_colour_message
222   0000              	GLOBAL _game_check_time
223   0000              	GLOBAL _game_shoot_fire
224   0000              	GLOBAL _game_shoot_fire_boss
225   0000              	GLOBAL _game_obj_set
226   0000              	GLOBAL _game_obj_chk
227   0000              	GLOBAL _game_obj_clear
228   0000              	GLOBAL _game_boss_clear
229   0000              	GLOBAL _game_rotate_attrib
230   0000              	GLOBAL _game_rotate_attrib_osd
231   0000              	GLOBAL _game_attribs
232   0000              	GLOBAL _game_match_back
233   0000              	GLOBAL _menu_main
234   0000              	GLOBAL _menu_main_print
235   0000              	GLOBAL _menu_redefine
236   0000              	GLOBAL _menu_define_key
237   0000              ;--------------------------------------------------------
238   0000              ; Externals used
239   0000              ;--------------------------------------------------------
240   0000              	GLOBAL _ffsll_callee
241   0000              	GLOBAL _ffsll
242   0000              	GLOBAL _strxfrm_callee
243   0000              	GLOBAL _strxfrm
244   0000              	GLOBAL _strupr_fastcall
245   0000              	GLOBAL _strupr
246   0000              	GLOBAL _strtok_r_callee
247   0000              	GLOBAL _strtok_r
248   0000              	GLOBAL _strtok_callee
249   0000              	GLOBAL _strtok
250   0000              	GLOBAL _strstrip_fastcall
251   0000              	GLOBAL _strstrip
252   0000              	GLOBAL _strstr_callee
253   0000              	GLOBAL _strstr
254   0000              	GLOBAL _strspn_callee
255   0000              	GLOBAL _strspn
256   0000              	GLOBAL _strsep_callee
257   0000              	GLOBAL _strsep
258   0000              	GLOBAL _strrstrip_fastcall
259   0000              	GLOBAL _strrstrip
260   0000              	GLOBAL _strrstr_callee
261   0000              	GLOBAL _strrstr
262   0000              	GLOBAL _strrspn_callee
263   0000              	GLOBAL _strrspn
264   0000              	GLOBAL _strrev_fastcall
265   0000              	GLOBAL _strrev
266   0000              	GLOBAL _strrcspn_callee
267   0000              	GLOBAL _strrcspn
268   0000              	GLOBAL _strrchr_callee
269   0000              	GLOBAL _strrchr
270   0000              	GLOBAL _strpbrk_callee
271   0000              	GLOBAL _strpbrk
272   0000              	GLOBAL _strnlen_callee
273   0000              	GLOBAL _strnlen
274   0000              	GLOBAL _strnicmp_callee
275   0000              	GLOBAL _strnicmp
276   0000              	GLOBAL _strndup_callee
277   0000              	GLOBAL _strndup
278   0000              	GLOBAL _strncpy_callee
279   0000              	GLOBAL _strncpy
280   0000              	GLOBAL _strncmp_callee
281   0000              	GLOBAL _strncmp
282   0000              	GLOBAL _strnchr_callee
283   0000              	GLOBAL _strnchr
284   0000              	GLOBAL _strncat_callee
285   0000              	GLOBAL _strncat
286   0000              	GLOBAL _strncasecmp_callee
287   0000              	GLOBAL _strncasecmp
288   0000              	GLOBAL _strlwr_fastcall
289   0000              	GLOBAL _strlwr
290   0000              	GLOBAL _strlen_fastcall
291   0000              	GLOBAL _strlen
292   0000              	GLOBAL _strlcpy_callee
293   0000              	GLOBAL _strlcpy
294   0000              	GLOBAL _strlcat_callee
295   0000              	GLOBAL _strlcat
296   0000              	GLOBAL _stricmp_callee
297   0000              	GLOBAL _stricmp
298   0000              	GLOBAL _strerror_fastcall
299   0000              	GLOBAL _strerror
300   0000              	GLOBAL _strdup_fastcall
301   0000              	GLOBAL _strdup
302   0000              	GLOBAL _strcspn_callee
303   0000              	GLOBAL _strcspn
304   0000              	GLOBAL _strcpy_callee
305   0000              	GLOBAL _strcpy
306   0000              	GLOBAL _strcoll_callee
307   0000              	GLOBAL _strcoll
308   0000              	GLOBAL _strcmp_callee
309   0000              	GLOBAL _strcmp
310   0000              	GLOBAL _strchrnul_callee
311   0000              	GLOBAL _strchrnul
312   0000              	GLOBAL _strchr_callee
313   0000              	GLOBAL _strchr
314   0000              	GLOBAL _strcat_callee
315   0000              	GLOBAL _strcat
316   0000              	GLOBAL _strcasecmp_callee
317   0000              	GLOBAL _strcasecmp
318   0000              	GLOBAL _stpncpy_callee
319   0000              	GLOBAL _stpncpy
320   0000              	GLOBAL _stpcpy_callee
321   0000              	GLOBAL _stpcpy
322   0000              	GLOBAL _memswap_callee
323   0000              	GLOBAL _memswap
324   0000              	GLOBAL _memset_callee
325   0000              	GLOBAL _memset
326   0000              	GLOBAL _memrchr_callee
327   0000              	GLOBAL _memrchr
328   0000              	GLOBAL _memmove_callee
329   0000              	GLOBAL _memmove
330   0000              	GLOBAL _memmem_callee
331   0000              	GLOBAL _memmem
332   0000              	GLOBAL _memcpy_callee
333   0000              	GLOBAL _memcpy
334   0000              	GLOBAL _memcmp_callee
335   0000              	GLOBAL _memcmp
336   0000              	GLOBAL _memchr_callee
337   0000              	GLOBAL _memchr
338   0000              	GLOBAL _memccpy_callee
339   0000              	GLOBAL _memccpy
340   0000              	GLOBAL _ffsl_fastcall
341   0000              	GLOBAL _ffsl
342   0000              	GLOBAL _ffs_fastcall
343   0000              	GLOBAL _ffs
344   0000              	GLOBAL __strrstrip__fastcall
345   0000              	GLOBAL __strrstrip_
346   0000              	GLOBAL __memupr__callee
347   0000              	GLOBAL __memupr_
348   0000              	GLOBAL __memstrcpy__callee
349   0000              	GLOBAL __memstrcpy_
350   0000              	GLOBAL __memlwr__callee
351   0000              	GLOBAL __memlwr_
352   0000              	GLOBAL _rawmemchr_callee
353   0000              	GLOBAL _rawmemchr
354   0000              	GLOBAL _strnset_callee
355   0000              	GLOBAL _strnset
356   0000              	GLOBAL _strset_callee
357   0000              	GLOBAL _strset
358   0000              	GLOBAL _rindex_callee
359   0000              	GLOBAL _rindex
360   0000              	GLOBAL _index_callee
361   0000              	GLOBAL _index
362   0000              	GLOBAL _bzero_callee
363   0000              	GLOBAL _bzero
364   0000              	GLOBAL _bcopy_callee
365   0000              	GLOBAL _bcopy
366   0000              	GLOBAL _bcmp_callee
367   0000              	GLOBAL _bcmp
368   0000              	GLOBAL _ulltoa_callee
369   0000              	GLOBAL _ulltoa
370   0000              	GLOBAL _strtoull_callee
371   0000              	GLOBAL _strtoull
372   0000              	GLOBAL _strtoll_callee
373   0000              	GLOBAL _strtoll
374   0000              	GLOBAL _lltoa_callee
375   0000              	GLOBAL _lltoa
376   0000              	GLOBAL _llabs_callee
377   0000              	GLOBAL _llabs
378   0000              	GLOBAL __lldivu__callee
379   0000              	GLOBAL __lldivu_
380   0000              	GLOBAL __lldiv__callee
381   0000              	GLOBAL __lldiv_
382   0000              	GLOBAL _atoll_callee
383   0000              	GLOBAL _atoll
384   0000              	GLOBAL _realloc_unlocked_callee
385   0000              	GLOBAL _realloc_unlocked
386   0000              	GLOBAL _malloc_unlocked_fastcall
387   0000              	GLOBAL _malloc_unlocked
388   0000              	GLOBAL _free_unlocked_fastcall
389   0000              	GLOBAL _free_unlocked
390   0000              	GLOBAL _calloc_unlocked_callee
391   0000              	GLOBAL _calloc_unlocked
392   0000              	GLOBAL _aligned_alloc_unlocked_callee
393   0000              	GLOBAL _aligned_alloc_unlocked
394   0000              	GLOBAL _realloc_callee
395   0000              	GLOBAL _realloc
396   0000              	GLOBAL _malloc_fastcall
397   0000              	GLOBAL _malloc
398   0000              	GLOBAL _free_fastcall
399   0000              	GLOBAL _free
400   0000              	GLOBAL _calloc_callee
401   0000              	GLOBAL _calloc
402   0000              	GLOBAL _aligned_alloc_callee
403   0000              	GLOBAL _aligned_alloc
404   0000              	GLOBAL _utoa_callee
405   0000              	GLOBAL _utoa
406   0000              	GLOBAL _ultoa_callee
407   0000              	GLOBAL _ultoa
408   0000              	GLOBAL _system_fastcall
409   0000              	GLOBAL _system
410   0000              	GLOBAL _strtoul_callee
411   0000              	GLOBAL _strtoul
412   0000              	GLOBAL _strtol_callee
413   0000              	GLOBAL _strtol
414   0000              	GLOBAL _strtof_callee
415   0000              	GLOBAL _strtof
416   0000              	GLOBAL _strtod_callee
417   0000              	GLOBAL _strtod
418   0000              	GLOBAL _srand_fastcall
419   0000              	GLOBAL _srand
420   0000              	GLOBAL _rand
421   0000              	GLOBAL _quick_exit_fastcall
422   0000              	GLOBAL _quick_exit
423   0000              	GLOBAL _qsort_callee
424   0000              	GLOBAL _qsort
425   0000              	GLOBAL _ltoa_callee
426   0000              	GLOBAL _ltoa
427   0000              	GLOBAL _labs_fastcall
428   0000              	GLOBAL _labs
429   0000              	GLOBAL _itoa_callee
430   0000              	GLOBAL _itoa
431   0000              	GLOBAL _ftoh_callee
432   0000              	GLOBAL _ftoh
433   0000              	GLOBAL _ftog_callee
434   0000              	GLOBAL _ftog
435   0000              	GLOBAL _ftoe_callee
436   0000              	GLOBAL _ftoe
437   0000              	GLOBAL _ftoa_callee
438   0000              	GLOBAL _ftoa
439   0000              	GLOBAL _exit_fastcall
440   0000              	GLOBAL _exit
441   0000              	GLOBAL _dtoh_callee
442   0000              	GLOBAL _dtoh
443   0000              	GLOBAL _dtog_callee
444   0000              	GLOBAL _dtog
445   0000              	GLOBAL _dtoe_callee
446   0000              	GLOBAL _dtoe
447   0000              	GLOBAL _dtoa_callee
448   0000              	GLOBAL _dtoa
449   0000              	GLOBAL _bsearch_callee
450   0000              	GLOBAL _bsearch
451   0000              	GLOBAL _atol_fastcall
452   0000              	GLOBAL _atol
453   0000              	GLOBAL _atoi_fastcall
454   0000              	GLOBAL _atoi
455   0000              	GLOBAL _atof_fastcall
456   0000              	GLOBAL _atof
457   0000              	GLOBAL _atexit_fastcall
458   0000              	GLOBAL _atexit
459   0000              	GLOBAL _at_quick_exit_fastcall
460   0000              	GLOBAL _at_quick_exit
461   0000              	GLOBAL _abs_fastcall
462   0000              	GLOBAL _abs
463   0000              	GLOBAL _abort
464   0000              	GLOBAL __strtou__callee
465   0000              	GLOBAL __strtou_
466   0000              	GLOBAL __strtoi__callee
467   0000              	GLOBAL __strtoi_
468   0000              	GLOBAL __random_uniform_xor_8__fastcall
469   0000              	GLOBAL __random_uniform_xor_8_
470   0000              	GLOBAL __random_uniform_xor_32__fastcall
471   0000              	GLOBAL __random_uniform_xor_32_
472   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
473   0000              	GLOBAL __random_uniform_cmwc_8_
474   0000              	GLOBAL __shellsort__callee
475   0000              	GLOBAL __shellsort_
476   0000              	GLOBAL __quicksort__callee
477   0000              	GLOBAL __quicksort_
478   0000              	GLOBAL __insertion_sort__callee
479   0000              	GLOBAL __insertion_sort_
480   0000              	GLOBAL __ldivu__callee
481   0000              	GLOBAL __ldivu_
482   0000              	GLOBAL __ldiv__callee
483   0000              	GLOBAL __ldiv_
484   0000              	GLOBAL __divu__callee
485   0000              	GLOBAL __divu_
486   0000              	GLOBAL __div__callee
487   0000              	GLOBAL __div_
488   0000              	GLOBAL _NIRVANAP_drawTW_raw_callee
489   0000              	GLOBAL _NIRVANAP_drawTW_raw
490   0000              	GLOBAL _NIRVANAP_drawTW_callee
491   0000              	GLOBAL _NIRVANAP_drawTW
492   0000              	GLOBAL _NIRVANAP_drawW_raw_callee
493   0000              	GLOBAL _NIRVANAP_drawW_raw
494   0000              	GLOBAL _NIRVANAP_drawW_callee
495   0000              	GLOBAL _NIRVANAP_drawW
496   0000              	GLOBAL _NIRVANAP_spriteT_callee
497   0000              	GLOBAL _NIRVANAP_spriteT
498   0000              	GLOBAL _NIRVANAP_fillC_callee
499   0000              	GLOBAL _NIRVANAP_fillC
500   0000              	GLOBAL _NIRVANAP_readC_callee
501   0000              	GLOBAL _NIRVANAP_readC
502   0000              	GLOBAL _NIRVANAP_paintC_callee
503   0000              	GLOBAL _NIRVANAP_paintC
504   0000              	GLOBAL _NIRVANAP_printC_callee
505   0000              	GLOBAL _NIRVANAP_printC
506   0000              	GLOBAL _NIRVANAP_fillT_raw_callee
507   0000              	GLOBAL _NIRVANAP_fillT_raw
508   0000              	GLOBAL _NIRVANAP_fillT_callee
509   0000              	GLOBAL _NIRVANAP_fillT
510   0000              	GLOBAL _NIRVANAP_drawT_raw_callee
511   0000              	GLOBAL _NIRVANAP_drawT_raw
512   0000              	GLOBAL _NIRVANAP_drawT_callee
513   0000              	GLOBAL _NIRVANAP_drawT
514   0000              	GLOBAL _NIRVANAP_stop
515   0000              	GLOBAL _NIRVANAP_start
516   0000              	GLOBAL _debug3
517   0000              	GLOBAL _debug2
518   0000              	GLOBAL _debug
519   0000              	GLOBAL _zx_print_str
520   0000              	GLOBAL _zx_print_int
521   0000              	GLOBAL _zx_print_chr
522   0000              	GLOBAL _zx_print_bonus_time
523   0000              	GLOBAL _zx_isr
524   0000              	GLOBAL _z80_otdr_callee
525   0000              	GLOBAL _z80_otdr
526   0000              	GLOBAL _z80_otir_callee
527   0000              	GLOBAL _z80_otir
528   0000              	GLOBAL _z80_outp_callee
529   0000              	GLOBAL _z80_outp
530   0000              	GLOBAL _z80_indr_callee
531   0000              	GLOBAL _z80_indr
532   0000              	GLOBAL _z80_inir_callee
533   0000              	GLOBAL _z80_inir
534   0000              	GLOBAL _z80_inp_fastcall
535   0000              	GLOBAL _z80_inp
536   0000              	GLOBAL _z80_set_int_state_fastcall
537   0000              	GLOBAL _z80_set_int_state
538   0000              	GLOBAL _z80_get_int_state
539   0000              	GLOBAL _z80_delay_tstate_fastcall
540   0000              	GLOBAL _z80_delay_tstate
541   0000              	GLOBAL _z80_delay_ms_fastcall
542   0000              	GLOBAL _z80_delay_ms
543   0000              	GLOBAL _im2_remove_generic_callback_callee
544   0000              	GLOBAL _im2_remove_generic_callback
545   0000              	GLOBAL _im2_prepend_generic_callback_callee
546   0000              	GLOBAL _im2_prepend_generic_callback
547   0000              	GLOBAL _im2_append_generic_callback_callee
548   0000              	GLOBAL _im2_append_generic_callback
549   0000              	GLOBAL _im2_create_generic_isr_8080_callee
550   0000              	GLOBAL _im2_create_generic_isr_8080
551   0000              	GLOBAL _im2_create_generic_isr_callee
552   0000              	GLOBAL _im2_create_generic_isr
553   0000              	GLOBAL _im2_install_isr_callee
554   0000              	GLOBAL _im2_install_isr
555   0000              	GLOBAL _im2_init_fastcall
556   0000              	GLOBAL _im2_init
557   0000              	GLOBAL _intrinsic_swap_word_32_fastcall
558   0000              	GLOBAL _intrinsic_swap_word_32
559   0000              	GLOBAL _intrinsic_swap_endian_32_fastcall
560   0000              	GLOBAL _intrinsic_swap_endian_32
561   0000              	GLOBAL _intrinsic_swap_endian_16_fastcall
562   0000              	GLOBAL _intrinsic_swap_endian_16
563   0000              	GLOBAL _intrinsic_return_de
564   0000              	GLOBAL _intrinsic_return_bc
565   0000              	GLOBAL _intrinsic_exx
566   0000              	GLOBAL _intrinsic_ex_de_hl
567   0000              	GLOBAL _intrinsic_nop
568   0000              	GLOBAL _intrinsic_im_2
569   0000              	GLOBAL _intrinsic_im_1
570   0000              	GLOBAL _intrinsic_im_0
571   0000              	GLOBAL _intrinsic_retn
572   0000              	GLOBAL _intrinsic_reti
573   0000              	GLOBAL _intrinsic_halt
574   0000              	GLOBAL _intrinsic_ei
575   0000              	GLOBAL _intrinsic_di
576   0000              	GLOBAL _intrinsic_stub
577   0000              	GLOBAL _intrinsic_outi
578   0000              	GLOBAL _intrinsic_ldi
579   0000              	GLOBAL _zx_pattern_fill_callee
580   0000              	GLOBAL _zx_pattern_fill
581   0000              	GLOBAL _zx_saddrpup_fastcall
582   0000              	GLOBAL _zx_saddrpup
583   0000              	GLOBAL _zx_saddrpright_callee
584   0000              	GLOBAL _zx_saddrpright
585   0000              	GLOBAL _zx_saddrpleft_callee
586   0000              	GLOBAL _zx_saddrpleft
587   0000              	GLOBAL _zx_saddrpdown_fastcall
588   0000              	GLOBAL _zx_saddrpdown
589   0000              	GLOBAL _zx_saddrcup_fastcall
590   0000              	GLOBAL _zx_saddrcup
591   0000              	GLOBAL _zx_saddrcright_fastcall
592   0000              	GLOBAL _zx_saddrcright
593   0000              	GLOBAL _zx_saddrcleft_fastcall
594   0000              	GLOBAL _zx_saddrcleft
595   0000              	GLOBAL _zx_saddrcdown_fastcall
596   0000              	GLOBAL _zx_saddrcdown
597   0000              	GLOBAL _zx_saddr2py_fastcall
598   0000              	GLOBAL _zx_saddr2py
599   0000              	GLOBAL _zx_saddr2px_fastcall
600   0000              	GLOBAL _zx_saddr2px
601   0000              	GLOBAL _zx_saddr2cy_fastcall
602   0000              	GLOBAL _zx_saddr2cy
603   0000              	GLOBAL _zx_saddr2cx_fastcall
604   0000              	GLOBAL _zx_saddr2cx
605   0000              	GLOBAL _zx_saddr2aaddr_fastcall
606   0000              	GLOBAL _zx_saddr2aaddr
607   0000              	GLOBAL _zx_py2saddr_fastcall
608   0000              	GLOBAL _zx_py2saddr
609   0000              	GLOBAL _zx_py2aaddr_fastcall
610   0000              	GLOBAL _zx_py2aaddr
611   0000              	GLOBAL _zx_pxy2saddr_callee
612   0000              	GLOBAL _zx_pxy2saddr
613   0000              	GLOBAL _zx_pxy2aaddr_callee
614   0000              	GLOBAL _zx_pxy2aaddr
615   0000              	GLOBAL _zx_px2bitmask_fastcall
616   0000              	GLOBAL _zx_px2bitmask
617   0000              	GLOBAL _zx_cy2saddr_fastcall
618   0000              	GLOBAL _zx_cy2saddr
619   0000              	GLOBAL _zx_cy2aaddr_fastcall
620   0000              	GLOBAL _zx_cy2aaddr
621   0000              	GLOBAL _zx_cxy2saddr_callee
622   0000              	GLOBAL _zx_cxy2saddr
623   0000              	GLOBAL _zx_cxy2aaddr_callee
624   0000              	GLOBAL _zx_cxy2aaddr
625   0000              	GLOBAL _zx_bitmask2px_fastcall
626   0000              	GLOBAL _zx_bitmask2px
627   0000              	GLOBAL _zx_aaddrcup_fastcall
628   0000              	GLOBAL _zx_aaddrcup
629   0000              	GLOBAL _zx_aaddrcright_fastcall
630   0000              	GLOBAL _zx_aaddrcright
631   0000              	GLOBAL _zx_aaddrcleft_fastcall
632   0000              	GLOBAL _zx_aaddrcleft
633   0000              	GLOBAL _zx_aaddrcdown_fastcall
634   0000              	GLOBAL _zx_aaddrcdown
635   0000              	GLOBAL _zx_aaddr2saddr_fastcall
636   0000              	GLOBAL _zx_aaddr2saddr
637   0000              	GLOBAL _zx_aaddr2py_fastcall
638   0000              	GLOBAL _zx_aaddr2py
639   0000              	GLOBAL _zx_aaddr2px_fastcall
640   0000              	GLOBAL _zx_aaddr2px
641   0000              	GLOBAL _zx_aaddr2cy_fastcall
642   0000              	GLOBAL _zx_aaddr2cy
643   0000              	GLOBAL _zx_aaddr2cx_fastcall
644   0000              	GLOBAL _zx_aaddr2cx
645   0000              	GLOBAL _zx_visit_wc_pix_callee
646   0000              	GLOBAL _zx_visit_wc_pix
647   0000              	GLOBAL _zx_visit_wc_attr_callee
648   0000              	GLOBAL _zx_visit_wc_attr
649   0000              	GLOBAL _zx_scroll_wc_up_pix_callee
650   0000              	GLOBAL _zx_scroll_wc_up_pix
651   0000              	GLOBAL _zx_scroll_wc_up_attr_callee
652   0000              	GLOBAL _zx_scroll_wc_up_attr
653   0000              	GLOBAL _zx_scroll_wc_up_callee
654   0000              	GLOBAL _zx_scroll_wc_up
655   0000              	GLOBAL _zx_scroll_up_pix_callee
656   0000              	GLOBAL _zx_scroll_up_pix
657   0000              	GLOBAL _zx_scroll_up_attr_callee
658   0000              	GLOBAL _zx_scroll_up_attr
659   0000              	GLOBAL _zx_scroll_up_callee
660   0000              	GLOBAL _zx_scroll_up
661   0000              	GLOBAL _zx_cls_wc_pix_callee
662   0000              	GLOBAL _zx_cls_wc_pix
663   0000              	GLOBAL _zx_cls_wc_attr_callee
664   0000              	GLOBAL _zx_cls_wc_attr
665   0000              	GLOBAL _zx_cls_wc_callee
666   0000              	GLOBAL _zx_cls_wc
667   0000              	GLOBAL _zx_cls_pix_fastcall
668   0000              	GLOBAL _zx_cls_pix
669   0000              	GLOBAL _zx_cls_attr_fastcall
670   0000              	GLOBAL _zx_cls_attr
671   0000              	GLOBAL _zx_cls_fastcall
672   0000              	GLOBAL _zx_cls
673   0000              	GLOBAL _zx_border_fastcall
674   0000              	GLOBAL _zx_border
675   0000              	GLOBAL _zx_tape_verify_block_callee
676   0000              	GLOBAL _zx_tape_verify_block
677   0000              	GLOBAL _zx_tape_save_block_callee
678   0000              	GLOBAL _zx_tape_save_block
679   0000              	GLOBAL _zx_tape_load_block_callee
680   0000              	GLOBAL _zx_tape_load_block
681   0000              	GLOBAL _spr_colision_boss
682   0000              	GLOBAL _spr_colision_b
683   0000              	GLOBAL _spr_unflatten
684   0000              	GLOBAL _spr_flatten
685   0000              	GLOBAL _spr_btile_paint_back
686   0000              	GLOBAL _spr_bullet_explode
687   0000              	GLOBAL _spr_init_effects
688   0000              	GLOBAL _spr_turn_horizontal
689   0000              	GLOBAL _spr_bullets_play
690   0000              	GLOBAL _spr_play_anim
691   0000              	GLOBAL _spr_add_anim
692   0000              	GLOBAL _spr_clear_scr
693   0000              	GLOBAL _spr_page_map
694   0000              	GLOBAL _spr_page_down
695   0000              	GLOBAL _spr_page_up
696   0000              	GLOBAL _spr_page_right
697   0000              	GLOBAL _spr_page_left
698   0000              	GLOBAL _spr_tile_paint
699   0000              	GLOBAL _spr_draw_index
700   0000              	GLOBAL _spr_brick_anim
701   0000              	GLOBAL _spr_back_repaint
702   0000              	GLOBAL _spr_tile
703   0000              	GLOBAL _spr_destroy
704   0000              	GLOBAL _spr_tile_dir
705   0000              	GLOBAL _spr_redraw
706   0000              	GLOBAL _spr_move_left
707   0000              	GLOBAL _spr_move_right
708   0000              	GLOBAL _spr_move_horizontal
709   0000              	GLOBAL _spr_move_down
710   0000              	GLOBAL _spr_move_up
711   0000              	GLOBAL _spr_set_right
712   0000              	GLOBAL _spr_set_left
713   0000              	GLOBAL _spr_set_down
714   0000              	GLOBAL _spr_set_up
715   0000              	GLOBAL _spr_calc_index
716   0000              	GLOBAL _spr_chktime
717   0000              	GLOBAL _player_fix_walk_lin
718   0000              	GLOBAL _player_gasta_brick
719   0000              	GLOBAL _player_lost_life
720   0000              	GLOBAL _player_hit
721   0000              	GLOBAL _player_open_door
722   0000              	GLOBAL _player_move_jump
723   0000              	GLOBAL _player_fire
724   0000              	GLOBAL _player_check_stairs_vertical
725   0000              	GLOBAL _player_check_stairs
726   0000              	GLOBAL _player_tile
727   0000              	GLOBAL _player_anim_tile
728   0000              	GLOBAL _player_pick_item
729   0000              	GLOBAL _player_check_floor
730   0000              	GLOBAL _player_hit_platform_clear
731   0000              	GLOBAL _player_score_add
732   0000              	GLOBAL _player_hit_platform
733   0000              	GLOBAL _player_move_input
734   0000              	GLOBAL _player_turn
735   0000              	GLOBAL _player_move
736   0000              	GLOBAL _player_check_input
737   0000              	GLOBAL _player_pick_mushroom
738   0000              	GLOBAL _player_collision
739   0000              	GLOBAL _player_init
740   0000              	GLOBAL _game_fill_row
741   0000              	GLOBAL _boss_draw_frame
742   0000              	GLOBAL _boss_draw
743   0000              	GLOBAL _boss_turn
744   0000              	GLOBAL _enemy_avoid_dead
745   0000              	GLOBAL _enemy_avoid_fall
746   0000              	GLOBAL _enemy_kill
747   0000              	GLOBAL _enemy_respawn
748   0000              	GLOBAL _enemy_init
749   0000              	GLOBAL _enemy_move
750   0000              	GLOBAL _enemy_turn
751   0000              	GLOBAL _enemy_static
752   0000              	GLOBAL _enemy_walk
753   0000              	GLOBAL _enemy_horizontal
754   0000              	GLOBAL _enemy_vertical
755   0000              	GLOBAL _ay_reset
756   0000              	GLOBAL _ay_song_stop
757   0000              	GLOBAL _ay_song_play
758   0000              	GLOBAL _ay_fx_stop
759   0000              	GLOBAL _ay_fx_play
760   0000              	GLOBAL _ay_is_playing
761   0000              	GLOBAL _test_func
762   0000              	GLOBAL _test_proc
763   0000              	GLOBAL _in_mouse_kempston_wheel_delta
764   0000              	GLOBAL _in_mouse_kempston_wheel
765   0000              	GLOBAL _in_mouse_kempston_callee
766   0000              	GLOBAL _in_mouse_kempston
767   0000              	GLOBAL _in_mouse_kempston_setpos_callee
768   0000              	GLOBAL _in_mouse_kempston_setpos
769   0000              	GLOBAL _in_mouse_kempston_reset
770   0000              	GLOBAL _in_mouse_kempston_init
771   0000              	GLOBAL _in_mouse_amx_wheel_delta
772   0000              	GLOBAL _in_mouse_amx_wheel
773   0000              	GLOBAL _in_mouse_amx_callee
774   0000              	GLOBAL _in_mouse_amx
775   0000              	GLOBAL _in_mouse_amx_setpos_callee
776   0000              	GLOBAL _in_mouse_amx_setpos
777   0000              	GLOBAL _in_mouse_amx_reset
778   0000              	GLOBAL _in_mouse_amx_init_callee
779   0000              	GLOBAL _in_mouse_amx_init
780   0000              	GLOBAL _in_stick_sinclair2
781   0000              	GLOBAL _in_stick_sinclair1
782   0000              	GLOBAL _in_stick_kempston
783   0000              	GLOBAL _in_stick_fuller
784   0000              	GLOBAL _in_stick_cursor
785   0000              	GLOBAL _in_stick_keyboard_fastcall
786   0000              	GLOBAL _in_stick_keyboard
787   0000              	GLOBAL _in_wait_nokey
788   0000              	GLOBAL _in_wait_key
789   0000              	GLOBAL _in_test_key
790   0000              	GLOBAL _in_pause_fastcall
791   0000              	GLOBAL _in_pause
792   0000              	GLOBAL _in_key_scancode_fastcall
793   0000              	GLOBAL _in_key_scancode
794   0000              	GLOBAL _in_key_pressed_fastcall
795   0000              	GLOBAL _in_key_pressed
796   0000              	GLOBAL _in_inkey
797   0000              	GLOBAL _NIRVANAP_CHAR_TABLE
798   0000              	GLOBAL _NIRVANAP_WIDE_IMAGES
799   0000              	GLOBAL _NIRVANAP_TILE_IMAGES
800   0000              	GLOBAL _NIRVANAP_HOLE
801   0000              	GLOBAL _NIRVANAP_ISR_HOOK
802   0000              	GLOBAL _scan_map
803   0000              	GLOBAL _key_map
804   0000              	GLOBAL _player_lvl_table
805   0000              	GLOBAL _stp_row
806   0000              	GLOBAL _stp_col
807   0000              	GLOBAL _stp_tile
808   0000              	GLOBAL _map_paper_last_a
809   0000              	GLOBAL _map_paper_last
810   0000              	GLOBAL _map_paper_clr
811   0000              	GLOBAL _map_paper
812   0000              	GLOBAL _draw_count
813   0000              	GLOBAL _g_player_hit_right
814   0000              	GLOBAL _g_player_hit_left
815   0000              	GLOBAL _bullet_count
816   0000              	GLOBAL _spr_hack
817   0000              	GLOBAL _boss_stat
818   0000              	GLOBAL _boss_time_fire
819   0000              	GLOBAL _boss_time
820   0000              	GLOBAL _boss_tile
821   0000              	GLOBAL _boss_inc
822   0000              	GLOBAL _boss_col
823   0000              	GLOBAL _boss_lin
824   0000              	GLOBAL _bullet
825   0000              	GLOBAL _bullet_vel
826   0000              	GLOBAL _bullet_frames
827   0000              	GLOBAL _bullet_colint
828   0000              	GLOBAL _bullet_dir
829   0000              	GLOBAL _bullet_tile
830   0000              	GLOBAL _bullet_col
831   0000              	GLOBAL _bullet_lin
832   0000              	GLOBAL _bullet_col0
833   0000              	GLOBAL _bullet_lin0
834   0000              	GLOBAL _bullet_max
835   0000              	GLOBAL _bullet_class
836   0000              	GLOBAL _mush_class
837   0000              	GLOBAL _mush_index
838   0000              	GLOBAL _anim_count
839   0000              	GLOBAL _anim_respanwn
840   0000              	GLOBAL _anim_loop
841   0000              	GLOBAL _anim_end
842   0000              	GLOBAL _anim_int
843   0000              	GLOBAL _anim_tile
844   0000              	GLOBAL _anim_col
845   0000              	GLOBAL _anim_lin
846   0000              	GLOBAL _map_heigth
847   0000              	GLOBAL _map_width
848   0000              	GLOBAL _scr_curr
849   0000              	GLOBAL _sprite_kind
850   0000              	GLOBAL _scr_obj1
851   0000              	GLOBAL _scr_obj0
852   0000              	GLOBAL _scr_map
853   0000              	GLOBAL _sprite_speed_alt
854   0000              	GLOBAL _spr_init
855   0000              	GLOBAL _spr_map_tile
856   0000              	GLOBAL _sprite_frames
857   0000              	GLOBAL _sprite_speed
858   0000              	GLOBAL _screen_ink
859   0000              	GLOBAL _screen_paper
860   0000              	GLOBAL _player_onstair
861   0000              	GLOBAL _game_start_scr
862   0000              	GLOBAL _game_respawn_tile
863   0000              	GLOBAL _game_respawn_index
864   0000              	GLOBAL _game_respawn_time
865   0000              	GLOBAL _game_score_top
866   0000              	GLOBAL _player_coins
867   0000              	GLOBAL _player_lives
868   0000              	GLOBAL _game_over
869   0000              	GLOBAL _game_sound
870   0000              	GLOBAL _game_inf_lives
871   0000              	GLOBAL _game_inmune
872   0000              	GLOBAL _sprite_curr_index
873   0000              	GLOBAL _spr_count
874   0000              	GLOBAL _bullet_time
875   0000              	GLOBAL _anim_time
876   0000              	GLOBAL _frame_time
877   0000              	GLOBAL _curr_time
878   0000              	GLOBAL _s_state
879   0000              	GLOBAL _attrib_osd
880   0000              	GLOBAL _attrib_hl
881   0000              	GLOBAL _attrib
882   0000              	GLOBAL _zx_val_asm
883   0000              	GLOBAL _enemies
884   0000              	GLOBAL _tmp_ui
885   0000              	GLOBAL _tmp_sc
886   0000              	GLOBAL _tmp_uc
887   0000              	GLOBAL _tmp1
888   0000              	GLOBAL _tmp0
889   0000              	GLOBAL _tmp
890   0000              	GLOBAL _index1
891   0000              	GLOBAL _index0
892   0000              	GLOBAL _loop_count
893   0000              	GLOBAL _s_class
894   0000              	GLOBAL _s_col1
895   0000              	GLOBAL _s_col0
896   0000              	GLOBAL _s_lin1
897   0000              	GLOBAL _s_lin0
898   0000              	GLOBAL _s_tile1
899   0000              	GLOBAL _s_tile0
900   0000              	GLOBAL _player_brick_time
901   0000              	GLOBAL _player_hit_count
902   0000              	GLOBAL _game_show_fps
903   0000              	GLOBAL _sprite_horizontal_check
904   0000              	GLOBAL _sprite_on_air
905   0000              	GLOBAL _sprite
906   0000              	GLOBAL _fps
907   0000              	GLOBAL _game_2buttons
908   0000              	GLOBAL _game_respawn_curr_time
909   0000              	GLOBAL _game_worldup
910   0000              	GLOBAL _game_mush_count
911   0000              	GLOBAL _game_boss_fix
912   0000              	GLOBAL _game_boss_hit
913   0000              	GLOBAL _game_boss_alive
914   0000              	GLOBAL _game_boss
915   0000              	GLOBAL _game_world
916   0000              	GLOBAL _game_gravity
917   0000              	GLOBAL _player_onfire
918   0000              	GLOBAL _player_anim_stair
919   0000              	GLOBAL _player_hit_time
920   0000              	GLOBAL _game_checkpoint_scr
921   0000              	GLOBAL _game_checkpoint_lin
922   0000              	GLOBAL _game_checkpoint_col
923   0000              	GLOBAL _player_lin_scr
924   0000              	GLOBAL _player_col_scr
925   0000              	GLOBAL _player_lvl
926   0000              	GLOBAL _player_int
927   0000              	GLOBAL _player_str
928   0000              	GLOBAL _player_max_vita
929   0000              	GLOBAL _player_max_mana
930   0000              	GLOBAL _player_vita
931   0000              	GLOBAL _player_mana
932   0000              	GLOBAL _player_keys
933   0000              	GLOBAL _player_vel_inc
934   0000              	GLOBAL _player_vel_y1
935   0000              	GLOBAL _player_vel_y0
936   0000              	GLOBAL _player_vel_y
937   0000              	GLOBAL _player_vel_x
938   0000              	GLOBAL _player_score
939   0000              	GLOBAL _last_time
940   0000              	GLOBAL _spr_timer
941   0000              	GLOBAL _jump_lin
942   0000              	GLOBAL _player_hit_col
943   0000              	GLOBAL _player_hit_lin
944   0000              	GLOBAL _colint
945   0000              	GLOBAL _col
946   0000              	GLOBAL _tbuffer
947   0000              	GLOBAL _lin
948   0000              	GLOBAL _tile
949   0000              	GLOBAL _state_a
950   0000              	GLOBAL _state
951   0000              	GLOBAL _class
952   0000              	GLOBAL _dirs_alt
953   0000              	GLOBAL _dirs
954   0000              	GLOBAL _k2
955   0000              	GLOBAL _k1
956   0000              	GLOBAL _joyfunc2
957   0000              	GLOBAL _joyfunc1
958   0000              	GLOBAL _btiles
959   0000              	GLOBAL _spec128
960   0000              	GLOBAL _GLOBAL_ZX_PORT_7FFD
961   0000              	GLOBAL _GLOBAL_ZX_PORT_1FFD
962   0000              	GLOBAL _GLOBAL_ZX_PORT_FE
963   0000              	GLOBAL _ay_song_06_ciel
964   0000              	GLOBAL _ay_song_04_sunflower
965   0000              	GLOBAL _ay_song_04_lotr_level_start
966   0000              	GLOBAL _ay_song_04_lotr_level_complete
967   0000              	GLOBAL _ay_song_04_lotr_lose_a_life
968   0000              	GLOBAL _ay_song_04_lotr
969   0000              	GLOBAL _ay_fx_06_explosion1
970   0000              	GLOBAL _ay_fx_06_efecto
971   0000              	GLOBAL _ay_fx_06_disparo2
972   0000              	GLOBAL _ay_fx_06_disparo1
973   0000              	GLOBAL _ay_fx_04_sin_mana
974   0000              	GLOBAL _ay_fx_04_salto
975   0000              	GLOBAL _ay_fx_04_pierto_abierta
976   0000              	GLOBAL _ay_fx_04_magia1
977   0000              	GLOBAL _ay_fx_04_golpe
978   0000              	GLOBAL _ay_fx_04_explosion
979   0000              	GLOBAL _ay_fx_04_dano_por_toque
980   0000              	GLOBAL _ay_fx_04_coin
981   0000              	GLOBAL _world0_h
982   0000              	GLOBAL _world0_w
983   0000              	GLOBAL _world0
984   0000              	GLOBAL _paper0
985   0000              	GLOBAL _lenght0
986   0000              	GLOBAL _start_scr0
987   0000              ;--------------------------------------------------------
988   0000              ; special function registers
989   0000              ;--------------------------------------------------------
990   0000              defc _IO_FE	=	0x00fe
991   0000              defc _IO_1FFD	=	0x1ffd
992   0000              defc _IO_7FFD	=	0x7ffd
993   0000              ;--------------------------------------------------------
994   0000              ; ram data
995   0000              ;--------------------------------------------------------
996   0000              	SECTION bss_compiler
997   0000              ;--------------------------------------------------------
998   0000              ; ram data
999   0000              ;--------------------------------------------------------
1000  0000              
1001  0000              IF 0
1002  0000              
1003  0000              ; .area _INITIALIZED removed by z88dk
1004  0000              
1005  0000              
1006  0000              ENDIF
1007  0000              
1008  0000              ;--------------------------------------------------------
1009  0000              ; absolute external ram data
1010  0000              ;--------------------------------------------------------
1011  0000              	SECTION IGNORE
1012  0000              ;--------------------------------------------------------
1013  0000              ; global & static initialisations
1014  0000              ;--------------------------------------------------------
1015  0000              	SECTION code_crt_init
1016  0000              ;--------------------------------------------------------
1017  0000              ; Home
1018  0000              ;--------------------------------------------------------
1019  0000              	SECTION IGNORE
1020  0000              ;--------------------------------------------------------
1021  0000              ; code
1022  0000              ;--------------------------------------------------------
1023  0000              	SECTION code_compiler
1024  0000              ;	---------------------------------
1025  0000              ; Function game_loop
1026  0000              ; ---------------------------------
1027  0000              _game_loop:
1028  0000  CD 5D 08    	call	_game_round_init
1029  0003              l_game_loop_00121:
1030  0003  3A 00 00    	ld	a,(_game_over)
1031  0006  B7          	or	a, a
1032  0007  C2 E4 00    	jp	NZ, l_game_loop_00124
1033  000A              l_game_loop_00116:
1034  000A  3A 00 00    	ld	a,(_game_worldup)
1035  000D  B7          	or	a, a
1036  000E  C2 A3 00    	jp	NZ, l_game_loop_00118
1037  0011  3A 00 00    	ld	a,(_game_over)
1038  0014  B7          	or	a, a
1039  0015  C2 A3 00    	jp	NZ, l_game_loop_00118
1040  0018  CD 00 00    	call	_enemy_turn
1041  001B  CD 00 00    	call	_player_turn
1042  001E  3A 00 00    	ld	a,(_game_boss)
1043  0021  B7          	or	a, a
1044  0022  28 03       	jr	Z,l_game_loop_00102
1045  0024  CD 00 00    	call	_boss_turn
1046  0027              l_game_loop_00102:
1047  0027  3E 02       	ld	a,0x02
1048  0029  F5          	push	af
1049  002A  33          	inc	sp
1050  002B  21 00 00    	ld	hl,_bullet_time
1051  002E  E5          	push	hl
1052  002F  CD 53 0C    	call	_game_check_time
1053  0032  F1          	pop	af
1054  0033  33          	inc	sp
1055  0034  7D          	ld	a, l
1056  0035  B7          	or	a, a
1057  0036  28 0F       	jr	Z,l_game_loop_00106
1058  0038  2A 00 00    	ld	hl,(_curr_time)
1059  003B  22 00 00    	ld	(_bullet_time),hl
1060  003E  3A 00 00    	ld	a,(_bullet_count)
1061  0041  B7          	or	a,a
1062  0042  28 03       	jr	Z,l_game_loop_00106
1063  0044  CD 00 00    	call	_spr_bullets_play
1064  0047              l_game_loop_00106:
1065  0047  3E 08       	ld	a,0x08
1066  0049  F5          	push	af
1067  004A  33          	inc	sp
1068  004B  21 00 00    	ld	hl,_anim_time
1069  004E  E5          	push	hl
1070  004F  CD 53 0C    	call	_game_check_time
1071  0052  F1          	pop	af
1072  0053  33          	inc	sp
1073  0054  7D          	ld	a, l
1074  0055  B7          	or	a, a
1075  0056  28 14       	jr	Z,l_game_loop_00110
1076  0058  2E 00       	ld	l,0x00
1077  005A  CD 00 00    	call	_zx_border_fastcall
1078  005D  2A 00 00    	ld	hl,(_curr_time)
1079  0060  22 00 00    	ld	(_anim_time),hl
1080  0063  3A 00 00    	ld	a,(_anim_count)
1081  0066  B7          	or	a,a
1082  0067  28 03       	jr	Z,l_game_loop_00110
1083  0069  CD 00 00    	call	_spr_play_anim
1084  006C              l_game_loop_00110:
1085  006C  3E 64       	ld	a,0x64
1086  006E  F5          	push	af
1087  006F  33          	inc	sp
1088  0070  21 00 00    	ld	hl,_frame_time
1089  0073  E5          	push	hl
1090  0074  CD 53 0C    	call	_game_check_time
1091  0077  F1          	pop	af
1092  0078  33          	inc	sp
1093  0079  7D          	ld	a, l
1094  007A  B7          	or	a, a
1095  007B  28 12       	jr	Z,l_game_loop_00114
1096  007D  2A 00 00    	ld	hl,(_curr_time)
1097  0080  22 00 00    	ld	(_frame_time),hl
1098  0083  3A 00 00    	ld	a,(_game_show_fps)
1099  0086  B7          	or	a,a
1100  0087  28 03       	jr	Z,l_game_loop_00112
1101  0089  CD E5 00    	call	_game_fps
1102  008C              l_game_loop_00112:
1103  008C  CD FC 00    	call	_game_respawn
1104  008F              l_game_loop_00114:
1105  008F  21 00 00    	ld	hl,_loop_count
1106  0092  34          	inc	(hl)
1107  0093  20 02       	jr	NZ,l_game_loop_00174
1108  0095  23          	inc	hl
1109  0096  34          	inc	(hl)
1110  0097              l_game_loop_00174:
1111  0097  21 00 00    	ld	hl,_fps
1112  009A  34          	inc	(hl)
1113  009B  C2 0A 00    	jp	NZ,l_game_loop_00116
1114  009E  23          	inc	hl
1115  009F  34          	inc	(hl)
1116  00A0  C3 0A 00    	jp	l_game_loop_00116
1117  00A3              l_game_loop_00118:
1118  00A3  21 00 00    	ld	hl,_game_worldup
1119  00A6  7E          	ld	a, (hl)
1120  00A7  B7          	or	a, a
1121  00A8  CA 03 00    	jp	Z, l_game_loop_00121
1122  00AB  36 00       	ld	(hl),0x00
1123  00AD  21 00 00    	ld	hl,_game_respawn_curr_time
1124  00B0  7E          	ld	a, (hl)
1125  00B1  C6 E0       	add	a,0xe0
1126  00B3  77          	ld	(hl), a
1127  00B4  21 00 00    	ld	hl,_game_world
1128  00B7  34          	inc	(hl)
1129  00B8  21 00 00    	ld	hl,_game_boss_alive
1130  00BB  36 01       	ld	(hl),0x01
1131  00BD  21 00 00    	ld	hl,_game_boss
1132  00C0  36 00       	ld	(hl),0x00
1133  00C2  21 00 00    	ld	hl,_scr_curr
1134  00C5  36 FF       	ld	(hl),0xff
1135  00C7  21 00 00    	ld	hl,_player_lin_scr
1136  00CA  36 00       	ld	(hl),0x00
1137  00CC  21 00 00    	ld	hl,_player_col_scr
1138  00CF  36 00       	ld	(hl),0x00
1139  00D1  CD 85 10    	call	_game_obj_clear
1140  00D4  21 00 00    	ld	hl,_player_col_scr
1141  00D7  36 02       	ld	(hl),0x02
1142  00D9  21 00 00    	ld	hl,_player_lin_scr
1143  00DC  36 80       	ld	(hl),0x80
1144  00DE  CD 5D 08    	call	_game_round_init
1145  00E1  C3 03 00    	jp	l_game_loop_00121
1146  00E4              l_game_loop_00124:
1147  00E4  C9          	ret
1148  00E5              	SECTION code_compiler
1149  00E5              ;	---------------------------------
1150  00E5              ; Function game_fps
1151  00E5              ; ---------------------------------
1152  00E5              _game_fps:
1153  00E5  21 00 00    	ld	hl,_screen_ink
1154  00E8  36 07       	ld	(hl),0x07
1155  00EA  2A 00 00    	ld	hl,(_fps)
1156  00ED  E5          	push	hl
1157  00EE  21 17 18    	ld	hl,0x1817
1158  00F1  E5          	push	hl
1159  00F2  CD 00 00    	call	_zx_print_int
1160  00F5  21 00 00    	ld	hl,0x0000
1161  00F8  22 00 00    	ld	(_fps),hl
1162  00FB  C9          	ret
1163  00FC              	SECTION code_compiler
1164  00FC              ;	---------------------------------
1165  00FC              ; Function game_respawn
1166  00FC              ; ---------------------------------
1167  00FC              _game_respawn:
1168  00FC  21 00 00    	ld	hl,_sprite
1169  00FF  36 00       	ld	(hl),0x00
1170  0101              l_game_respawn_00105:
1171  0101  21 00 00    	ld	hl,_sprite
1172  0104  7E          	ld	a, (hl)
1173  0105  D6 07       	sub	a,0x07
1174  0107  D2 97 01    	jp	NC, l_game_respawn_00108
1175  010A  01 00 00    	ld	bc,_game_respawn_time+0
1176  010D  6E          	ld	l,(hl)
1177  010E  26 00       	ld	h,0x00
1178  0110  29          	add	hl, hl
1179  0111  09          	add	hl, bc
1180  0112  5E          	ld	e,(hl)
1181  0113  23          	inc	hl
1182  0114  56          	ld	d,(hl)
1183  0115  2B          	dec	hl
1184  0116  7A          	ld	a, d
1185  0117  B3          	or	a,e
1186  0118  28 76       	jr	Z,l_game_respawn_00104
1187  011A  3A 00 00    	ld	a,(_game_respawn_curr_time)
1188  011D  EB          	ex	de,hl
1189  011E  C5          	push	bc
1190  011F  F5          	push	af
1191  0120  33          	inc	sp
1192  0121  D5          	push	de
1193  0122  CD 53 0C    	call	_game_check_time
1194  0125  F1          	pop	af
1195  0126  33          	inc	sp
1196  0127  C1          	pop	bc
1197  0128  7D          	ld	a,l
1198  0129  B7          	or	a, a
1199  012A  28 64       	jr	Z,l_game_respawn_00104
1200  012C  2A 00 00    	ld	hl,(_sprite)
1201  012F  26 00       	ld	h,0x00
1202  0131  11 00 00    	ld	de,_game_respawn_index
1203  0134  19          	add	hl,de
1204  0135  7E          	ld	a,(hl)
1205  0136  6F          	ld	l,a
1206  0137  26 00       	ld	h,0x00
1207  0139  22 00 00    	ld	(_index1),hl
1208  013C  5F          	ld	e,a
1209  013D  E6 0F       	and	a,0x0f
1210  013F  87          	add	a, a
1211  0140  32 00 00    	ld	(_s_col1),a
1212  0143  21 00 00    	ld	hl,_s_lin1
1213  0146  73          	ld	(hl),e
1214  0147  7B          	ld	a,e
1215  0148  07          	rlca
1216  0149  07          	rlca
1217  014A  07          	rlca
1218  014B  07          	rlca
1219  014C  E6 0F       	and	a,0x0f
1220  014E  07          	rlca
1221  014F  07          	rlca
1222  0150  07          	rlca
1223  0151  07          	rlca
1224  0152  E6 F0       	and	a,0xf0
1225  0154  77          	ld	(hl), a
1226  0155  11 00 00    	ld	de,_scr_map
1227  0158  2A 00 00    	ld	hl,(_index1)
1228  015B  19          	add	hl,de
1229  015C  EB          	ex	de,hl
1230  015D  21 00 00    	ld	hl,_sprite
1231  0160  7E          	ld	a, (hl)
1232  0161  C6 80       	add	a,0x80
1233  0163  12          	ld	(de), a
1234  0164  6E          	ld	l,(hl)
1235  0165  26 00       	ld	h,0x00
1236  0167  29          	add	hl, hl
1237  0168  09          	add	hl, bc
1238  0169  AF          	xor	a, a
1239  016A  77          	ld	(hl), a
1240  016B  23          	inc	hl
1241  016C  77          	ld	(hl), a
1242  016D  2A 00 00    	ld	hl,(_sprite)
1243  0170  26 00       	ld	h,0x00
1244  0172  01 00 00    	ld	bc,_game_respawn_tile
1245  0175  09          	add	hl,bc
1246  0176  7E          	ld	a,(hl)
1247  0177  F5          	push	af
1248  0178  33          	inc	sp
1249  0179  21 03 04    	ld	hl,0x0403
1250  017C  E5          	push	hl
1251  017D  2A 00 00    	ld	hl,(_s_col1)
1252  0180  26 8A       	ld	h,0x8a
1253  0182  3A 00 00    	ld	a,(_s_lin1)
1254  0185  E5          	push	hl
1255  0186  F5          	push	af
1256  0187  33          	inc	sp
1257  0188  CD 00 00    	call	_spr_add_anim
1258  018B  F1          	pop	af
1259  018C  F1          	pop	af
1260  018D  F1          	pop	af
1261  018E  18 07       	jr	l_game_respawn_00108
1262  0190              l_game_respawn_00104:
1263  0190  21 00 00    	ld	hl,_sprite
1264  0193  34          	inc	(hl)
1265  0194  C3 01 01    	jp	l_game_respawn_00105
1266  0197              l_game_respawn_00108:
1267  0197  C9          	ret
1268  0198              	SECTION code_compiler
1269  0198              ;	---------------------------------
1270  0198              ; Function game_draw_screen
1271  0198              ; ---------------------------------
1272  0198              _game_draw_screen:
1273  0198  CD 00 00    	call	___sdcc_enter_ix
1274  019B  3B          	dec	sp
1275  019C  76          	halt
1276  019D  21 00 00    	ld	hl,_game_boss
1277  01A0  36 00       	ld	(hl),0x00
1278  01A2  21 00 00    	ld	hl,_game_boss_fix
1279  01A5  36 00       	ld	(hl),0x00
1280  01A7  2A 00 00    	ld	hl,(_curr_time)
1281  01AA  22 00 00    	ld	(_player_brick_time),hl
1282  01AD  21 00 00    	ld	hl,_spr_count
1283  01B0  36 00       	ld	(hl),0x00
1284  01B2  CD 00 00    	call	_spr_init_effects
1285  01B5  01 00 00    	ld	bc,_game_respawn_time+0
1286  01B8              l_game_draw_screen_00101:
1287  01B8  21 00 00    	ld	hl,_spr_count
1288  01BB  7E          	ld	a, (hl)
1289  01BC  D6 07       	sub	a,0x07
1290  01BE  30 46       	jr	NC,l_game_draw_screen_00103
1291  01C0  3E 00       	ld	a, +((_game_respawn_index) & 0xFF)
1292  01C2  86          	add	a, (hl)
1293  01C3  5F          	ld	e, a
1294  01C4  3E 00       	ld	a, +((_game_respawn_index) / 256)
1295  01C6  CE 00       	adc	a,0x00
1296  01C8  57          	ld	d, a
1297  01C9  AF          	xor	a, a
1298  01CA  12          	ld	(de), a
1299  01CB  3E 00       	ld	a, +((_game_respawn_tile) & 0xFF)
1300  01CD  86          	add	a, (hl)
1301  01CE  5F          	ld	e, a
1302  01CF  3E 00       	ld	a, +((_game_respawn_tile) / 256)
1303  01D1  CE 00       	adc	a,0x00
1304  01D3  57          	ld	d, a
1305  01D4  AF          	xor	a, a
1306  01D5  12          	ld	(de), a
1307  01D6  6E          	ld	l,(hl)
1308  01D7  26 00       	ld	h,0x00
1309  01D9  29          	add	hl, hl
1310  01DA  09          	add	hl, bc
1311  01DB  AF          	xor	a, a
1312  01DC  77          	ld	(hl), a
1313  01DD  23          	inc	hl
1314  01DE  77          	ld	(hl), a
1315  01DF  2A 00 00    	ld	hl,(_spr_count)
1316  01E2  26 00       	ld	h,0x00
1317  01E4  11 00 00    	ld	de,_mush_index
1318  01E7  19          	add	hl,de
1319  01E8  AF          	xor	a,a
1320  01E9  77          	ld	(hl),a
1321  01EA  2A 00 00    	ld	hl,(_spr_count)
1322  01ED  26 00       	ld	h,0x00
1323  01EF  11 00 00    	ld	de,_mush_class
1324  01F2  19          	add	hl,de
1325  01F3  AF          	xor	a,a
1326  01F4  77          	ld	(hl),a
1327  01F5  2A 00 00    	ld	hl,(_spr_count)
1328  01F8  26 00       	ld	h,0x00
1329  01FA  11 00 00    	ld	de,_class
1330  01FD  19          	add	hl,de
1331  01FE  AF          	xor	a,a
1332  01FF  77          	ld	(hl),a
1333  0200  21 00 00    	ld	hl,_spr_count
1334  0203  34          	inc	(hl)
1335  0204  18 B2       	jr	l_game_draw_screen_00101
1336  0206              l_game_draw_screen_00103:
1337  0206  21 10 00    	ld	hl,0x0010
1338  0209  22 00 00    	ld	(_index1),hl
1339  020C  21 00 00    	ld	hl,_s_lin1
1340  020F  36 00       	ld	(hl),0x00
1341  0211  21 00 00    	ld	hl,_s_col1
1342  0214  36 02       	ld	(hl),0x02
1343  0216  21 00 00    	ld	hl,_spr_count
1344  0219  36 00       	ld	(hl),0x00
1345  021B  F3          	di
1346  021C  DD 36 FF 00 	ld	(ix-1),0x00
1347  0220              l_game_draw_screen_00127:
1348  0220  21 00 00    	ld	hl,_index1
1349  0223  7E          	ld	a, (hl)
1350  0224  D6 A0       	sub	a,0xa0
1351  0226  23          	inc	hl
1352  0227  7E          	ld	a, (hl)
1353  0228  DE 00       	sbc	a,0x00
1354  022A  D2 3C 03    	jp	NC, l_game_draw_screen_00129
1355  022D  2B          	dec	hl
1356  022E  7E          	ld	a, (hl)
1357  022F  E6 0F       	and	a,0x0f
1358  0231  20 0C       	jr	NZ,l_game_draw_screen_00105
1359  0233  21 00 00    	ld	hl,_s_lin1
1360  0236  7E          	ld	a, (hl)
1361  0237  C6 10       	add	a,0x10
1362  0239  77          	ld	(hl), a
1363  023A  21 00 00    	ld	hl,_s_col1
1364  023D  36 00       	ld	(hl),0x00
1365  023F              l_game_draw_screen_00105:
1366  023F  01 00 00    	ld	bc,_scr_map
1367  0242  2A 00 00    	ld	hl,(_index1)
1368  0245  09          	add	hl,bc
1369  0246  7E          	ld	a,(hl)
1370  0247  4D          	ld	c,l
1371  0248  47          	ld	b,a
1372  0249  D6 60       	sub	a,0x60
1373  024B  30 57       	jr	NC,l_game_draw_screen_00125
1374  024D  78          	ld	a, b
1375  024E  D6 5D       	sub	a,0x5d
1376  0250  20 04       	jr	NZ,l_game_draw_screen_00197
1377  0252  3E 01       	ld	a,0x01
1378  0254  18 01       	jr	l_game_draw_screen_00198
1379  0256              l_game_draw_screen_00197:
1380  0256  AF          	xor	a,a
1381  0257              l_game_draw_screen_00198:
1382  0257  4F          	ld	c,a
1383  0258  B7          	or	a, a
1384  0259  20 05       	jr	NZ,l_game_draw_screen_00111
1385  025B  78          	ld	a, b
1386  025C  D6 5A       	sub	a,0x5a
1387  025E  20 27       	jr	NZ,l_game_draw_screen_00112
1388  0260              l_game_draw_screen_00111:
1389  0260  2A 00 00    	ld	hl,(_index1)
1390  0263  11 F0 FF    	ld	de,0xfff0
1391  0266  19          	add	hl,de
1392  0267  EB          	ex	de,hl
1393  0268  21 01 00    	ld	hl,_index1 + 1
1394  026B  C5          	push	bc
1395  026C  EB          	ex	de,hl
1396  026D  CD 4E 10    	call	_game_obj_chk
1397  0270  C1          	pop	bc
1398  0271  7D          	ld	a,l
1399  0272  B7          	or	a, a
1400  0273  28 0C       	jr	Z,l_game_draw_screen_00109
1401  0275  01 00 00    	ld	bc,_scr_map
1402  0278  2A 00 00    	ld	hl,(_index1)
1403  027B  09          	add	hl,bc
1404  027C  06 4F       	ld	b,0x4f
1405  027E  70          	ld	(hl),b
1406  027F  18 06       	jr	l_game_draw_screen_00112
1407  0281              l_game_draw_screen_00109:
1408  0281  79          	ld	a, c
1409  0282  B7          	or	a, a
1410  0283  28 02       	jr	Z,l_game_draw_screen_00112
1411  0285  06 00       	ld	b,0x00
1412  0287              l_game_draw_screen_00112:
1413  0287  78          	ld	a, b
1414  0288  D6 23       	sub	a,0x23
1415  028A  20 07       	jr	NZ,l_game_draw_screen_00115
1416  028C  2A 00 00    	ld	hl,(_index1)
1417  028F  CD 9D 11    	call	_game_match_back
1418  0292  45          	ld	b, l
1419  0293              l_game_draw_screen_00115:
1420  0293  3A 00 00    	ld	a,(_s_col1)
1421  0296  F5          	push	af
1422  0297  33          	inc	sp
1423  0298  3A 00 00    	ld	a,(_s_lin1)
1424  029B  48          	ld	c,b
1425  029C  47          	ld	b,a
1426  029D  C5          	push	bc
1427  029E  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
1428  02A1  C3 2B 03    	jp	l_game_draw_screen_00126
1429  02A4              l_game_draw_screen_00125:
1430  02A4  3E 78       	ld	a,0x78
1431  02A6  90          	sub	a, b
1432  02A7  38 2F       	jr	C,l_game_draw_screen_00122
1433  02A9  3A 00 00    	ld	a,(_spr_count)
1434  02AC  D6 08       	sub	a,0x08
1435  02AE  30 54       	jr	NC,l_game_draw_screen_00123
1436  02B0  3A 00 00    	ld	a,(_game_boss_alive)
1437  02B3  B7          	or	a, a
1438  02B4  28 4E       	jr	Z,l_game_draw_screen_00123
1439  02B6  3A 00 00    	ld	a,(_spr_count)
1440  02B9  C6 00       	add	a,+((_game_respawn_index) & 0xFF)
1441  02BB  5F          	ld	e,a
1442  02BC  3E 00       	ld	a,+((_game_respawn_index) / 256)
1443  02BE  CE 00       	adc	a,0x00
1444  02C0  57          	ld	d,a
1445  02C1  3A 00 00    	ld	a,(_index1)
1446  02C4  12          	ld	(de), a
1447  02C5  3A 00 00    	ld	a,(_spr_count)
1448  02C8  C6 00       	add	a,+((_game_respawn_tile) & 0xFF)
1449  02CA  5F          	ld	e,a
1450  02CB  3E 00       	ld	a,+((_game_respawn_tile) / 256)
1451  02CD  CE 00       	adc	a,0x00
1452  02CF  57          	ld	d,a
1453  02D0  78          	ld	a, b
1454  02D1  12          	ld	(de), a
1455  02D2  68          	ld	l, b
1456  02D3  CD F3 04    	call	_game_add_enemy
1457  02D6  18 2C       	jr	l_game_draw_screen_00123
1458  02D8              l_game_draw_screen_00122:
1459  02D8  2A 00 00    	ld	hl,(_index1)
1460  02DB  C5          	push	bc
1461  02DC  CD 4E 10    	call	_game_obj_chk
1462  02DF  C1          	pop	bc
1463  02E0  7D          	ld	a,l
1464  02E1  B7          	or	a, a
1465  02E2  20 20       	jr	NZ,l_game_draw_screen_00123
1466  02E4  3E 00       	ld	a, +((_mush_index) & 0xFF)
1467  02E6  DD 86 FF    	add	a,(ix-1)
1468  02E9  5F          	ld	e, a
1469  02EA  3E 00       	ld	a, +((_mush_index) / 256)
1470  02EC  CE 00       	adc	a,0x00
1471  02EE  57          	ld	d, a
1472  02EF  3A 00 00    	ld	a,(_index1)
1473  02F2  C6 10       	add	a,0x10
1474  02F4  12          	ld	(de), a
1475  02F5  3E 00       	ld	a, +((_mush_class) & 0xFF)
1476  02F7  DD 86 FF    	add	a,(ix-1)
1477  02FA  6F          	ld	l, a
1478  02FB  3E 00       	ld	a, +((_mush_class) / 256)
1479  02FD  CE 00       	adc	a,0x00
1480  02FF  67          	ld	h, a
1481  0300  70          	ld	(hl), b
1482  0301  DD 34 FF    	inc	(ix-1)
1483  0304              l_game_draw_screen_00123:
1484  0304  2A 00 00    	ld	hl,(_index1)
1485  0307  01 00 00    	ld	bc,_scr_map
1486  030A  09          	add	hl,bc
1487  030B  E5          	push	hl
1488  030C  2A 00 00    	ld	hl,(_index1)
1489  030F  CD 9D 11    	call	_game_match_back
1490  0312  C1          	pop	bc
1491  0313  7D          	ld	a,l
1492  0314  02          	ld	(bc), a
1493  0315  01 00 00    	ld	bc,_scr_map
1494  0318  2A 00 00    	ld	hl,(_index1)
1495  031B  09          	add	hl,bc
1496  031C  46          	ld	b, (hl)
1497  031D  3A 00 00    	ld	a,(_s_col1)
1498  0320  F5          	push	af
1499  0321  33          	inc	sp
1500  0322  3A 00 00    	ld	a,(_s_lin1)
1501  0325  48          	ld	c,b
1502  0326  47          	ld	b,a
1503  0327  C5          	push	bc
1504  0328  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
1505  032B              l_game_draw_screen_00126:
1506  032B  21 00 00    	ld	hl,_s_col1
1507  032E  34          	inc	(hl)
1508  032F  34          	inc	(hl)
1509  0330  21 00 00    	ld	hl,_index1
1510  0333  34          	inc	(hl)
1511  0334  C2 20 02    	jp	NZ,l_game_draw_screen_00127
1512  0337  23          	inc	hl
1513  0338  34          	inc	(hl)
1514  0339  C3 20 02    	jp	l_game_draw_screen_00127
1515  033C              l_game_draw_screen_00129:
1516  033C  FB          	ei
1517  033D  3A 00 00    	ld	a,(_game_boss_alive)
1518  0340  B7          	or	a, a
1519  0341  20 03       	jr	NZ,l_game_draw_screen_00131
1520  0343  CD CF 10    	call	_game_boss_clear
1521  0346              l_game_draw_screen_00131:
1522  0346  CD 23 07    	call	_game_update_stats
1523  0349  33          	inc	sp
1524  034A  DD E1       	pop	ix
1525  034C  C9          	ret
1526  034D              	SECTION code_compiler
1527  034D              ;	---------------------------------
1528  034D              ; Function game_boss_kill
1529  034D              ; ---------------------------------
1530  034D              _game_boss_kill:
1531  034D  21 00 00    	ld	hl,_game_boss
1532  0350  36 00       	ld	(hl),0x00
1533  0352  21 00 00    	ld	hl,_game_boss_alive
1534  0355  36 00       	ld	(hl),0x00
1535  0357  21 00 00    	ld	hl,_ay_fx_04_explosion
1536  035A  E5          	push	hl
1537  035B  21 01 04    	ld	hl,0x0401
1538  035E  E5          	push	hl
1539  035F  CD 00 00    	call	_ay_song_play
1540  0362  3A 00 00    	ld	a,(_boss_col)
1541  0365  21 00 00    	ld	hl,0x0000
1542  0368  E5          	push	hl
1543  0369  21 87 03    	ld	hl,0x0387
1544  036C  E5          	push	hl
1545  036D  F5          	push	af
1546  036E  33          	inc	sp
1547  036F  3A 00 00    	ld	a,(_boss_lin)
1548  0372  F5          	push	af
1549  0373  33          	inc	sp
1550  0374  CD 00 00    	call	_spr_add_anim
1551  0377  F1          	pop	af
1552  0378  F1          	pop	af
1553  0379  F1          	pop	af
1554  037A  21 00 00    	ld	hl,_boss_col
1555  037D  46          	ld	b, (hl)
1556  037E  04          	inc	b
1557  037F  04          	inc	b
1558  0380  21 00 00    	ld	hl,0x0000
1559  0383  E5          	push	hl
1560  0384  21 87 03    	ld	hl,0x0387
1561  0387  E5          	push	hl
1562  0388  C5          	push	bc
1563  0389  33          	inc	sp
1564  038A  3A 00 00    	ld	a,(_boss_lin)
1565  038D  F5          	push	af
1566  038E  33          	inc	sp
1567  038F  CD 00 00    	call	_spr_add_anim
1568  0392  F1          	pop	af
1569  0393  F1          	pop	af
1570  0394  F1          	pop	af
1571  0395  3A 00 00    	ld	a,(_boss_lin)
1572  0398  C6 10       	add	a,0x10
1573  039A  47          	ld	b, a
1574  039B  3A 00 00    	ld	a,(_boss_col)
1575  039E  21 00 00    	ld	hl,0x0000
1576  03A1  E5          	push	hl
1577  03A2  21 87 03    	ld	hl,0x0387
1578  03A5  E5          	push	hl
1579  03A6  48          	ld	c,b
1580  03A7  47          	ld	b,a
1581  03A8  C5          	push	bc
1582  03A9  CD 00 00    	call	_spr_add_anim
1583  03AC  F1          	pop	af
1584  03AD  F1          	pop	af
1585  03AE  F1          	pop	af
1586  03AF  21 00 00    	ld	hl,_boss_col
1587  03B2  56          	ld	d, (hl)
1588  03B3  14          	inc	d
1589  03B4  14          	inc	d
1590  03B5  3A 00 00    	ld	a,(_boss_lin)
1591  03B8  C6 10       	add	a,0x10
1592  03BA  47          	ld	b, a
1593  03BB  21 00 00    	ld	hl,0x0000
1594  03BE  E5          	push	hl
1595  03BF  21 87 03    	ld	hl,0x0387
1596  03C2  E5          	push	hl
1597  03C3  58          	ld	e,b
1598  03C4  D5          	push	de
1599  03C5  CD 00 00    	call	_spr_add_anim
1600  03C8  F1          	pop	af
1601  03C9  F1          	pop	af
1602  03CA  F1          	pop	af
1603  03CB  21 00 00    	ld	hl,_tmp0
1604  03CE  36 00       	ld	(hl),0x00
1605  03D0              l_game_boss_kill_00106:
1606  03D0  2A 00 00    	ld	hl,(_tmp0)
1607  03D3  26 00       	ld	h,0x00
1608  03D5  01 00 00    	ld	bc,_bullet_col
1609  03D8  09          	add	hl,bc
1610  03D9  7E          	ld	a,(hl)
1611  03DA  4F          	ld	c,a
1612  03DB  3C          	inc	a
1613  03DC  28 15       	jr	Z,l_game_boss_kill_00102
1614  03DE  3A 00 00    	ld	a,(_tmp0)
1615  03E1  5F          	ld	e,a
1616  03E2  16 00       	ld	d,0x00
1617  03E4  21 00 00    	ld	hl,_bullet_lin
1618  03E7  19          	add	hl,de
1619  03E8  7E          	ld	a,(hl)
1620  03E9  32 00 00    	ld	(_s_lin0),a
1621  03EC  21 00 00    	ld	hl,_s_col0
1622  03EF  71          	ld	(hl), c
1623  03F0  CD 00 00    	call	_spr_back_repaint
1624  03F3              l_game_boss_kill_00102:
1625  03F3  2A 00 00    	ld	hl,(_tmp0)
1626  03F6  26 00       	ld	h,0x00
1627  03F8  01 00 00    	ld	bc,_bullet_col
1628  03FB  09          	add	hl,bc
1629  03FC  36 FF       	ld	(hl),0xff
1630  03FE  2A 00 00    	ld	hl,(_tmp0)
1631  0401  CD 00 00    	call	_spr_destroy
1632  0404  2A 00 00    	ld	hl,(_tmp0)
1633  0407  26 00       	ld	h,0x00
1634  0409  29          	add	hl, hl
1635  040A  11 00 00    	ld	de,_game_respawn_time
1636  040D  19          	add	hl, de
1637  040E  AF          	xor	a, a
1638  040F  77          	ld	(hl), a
1639  0410  23          	inc	hl
1640  0411  77          	ld	(hl), a
1641  0412  21 00 00    	ld	hl,_tmp0
1642  0415  7E          	ld	a,(hl)
1643  0416  3C          	inc	a
1644  0417  77          	ld	(hl),a
1645  0418  D6 07       	sub	a,0x07
1646  041A  38 B4       	jr	C,l_game_boss_kill_00106
1647  041C  CD CF 10    	call	_game_boss_clear
1648  041F  CD BB 05    	call	_game_print_footer
1649  0422  21 00 00    	ld	hl,_game_world
1650  0425  7E          	ld	a, (hl)
1651  0426  D6 03       	sub	a,0x03
1652  0428  C0          	ret	NZ
1653  0429  CD 2D 04    	call	_game_end
1654  042C  C9          	ret
1655  042D              	SECTION code_compiler
1656  042D              ;	---------------------------------
1657  042D              ; Function game_end
1658  042D              ; ---------------------------------
1659  042D              _game_end:
1660  042D  21 F4 01    	ld	hl,0x01f4
1661  0430  CD 00 00    	call	_z80_delay_ms_fastcall
1662  0433  21 00 00    	ld	hl,_scr_curr
1663  0436  36 00       	ld	(hl),0x00
1664  0438  CD 00 00    	call	_spr_page_map
1665  043B  CD 98 01    	call	_game_draw_screen
1666  043E  21 00 00    	ld	hl,_ay_song_04_sunflower
1667  0441  E5          	push	hl
1668  0442  21 01 04    	ld	hl,0x0401
1669  0445  E5          	push	hl
1670  0446  CD 00 00    	call	_ay_song_play
1671  0449  21 80 02    	ld	hl,0x0280
1672  044C  E5          	push	hl
1673  044D  3E 70       	ld	a,0x70
1674  044F  F5          	push	af
1675  0450  33          	inc	sp
1676  0451  CD 00 00    	call	_NIRVANAP_drawT_callee
1677  0454  21 DC 05    	ld	hl,0x05dc
1678  0457  CD 00 00    	call	_z80_delay_ms_fastcall
1679  045A  21 00 00    	ld	hl,___str_0
1680  045D  E5          	push	hl
1681  045E  21 08 08    	ld	hl,0x0808
1682  0461  E5          	push	hl
1683  0462  CD 00 00    	call	_zx_print_str
1684  0465  AF          	xor	a, a
1685  0466  F5          	push	af
1686  0467  33          	inc	sp
1687  0468  21 D0 07    	ld	hl,0x07d0
1688  046B  E5          	push	hl
1689  046C  21 08 18    	ld	hl,0x1808
1690  046F  E5          	push	hl
1691  0470  3E 08       	ld	a,0x08
1692  0472  F5          	push	af
1693  0473  33          	inc	sp
1694  0474  CD 30 0B    	call	_game_colour_message
1695  0477  F1          	pop	af
1696  0478  F1          	pop	af
1697  0479  21 11 00    	ld	hl,___str_1
1698  047C  E3          	ex	(sp),hl
1699  047D  21 08 07    	ld	hl,0x0708
1700  0480  E5          	push	hl
1701  0481  CD 00 00    	call	_zx_print_str
1702  0484  AF          	xor	a, a
1703  0485  F5          	push	af
1704  0486  33          	inc	sp
1705  0487  21 D0 07    	ld	hl,0x07d0
1706  048A  E5          	push	hl
1707  048B  21 07 18    	ld	hl,0x1807
1708  048E  E5          	push	hl
1709  048F  3E 08       	ld	a,0x08
1710  0491  F5          	push	af
1711  0492  33          	inc	sp
1712  0493  CD 30 0B    	call	_game_colour_message
1713  0496  F1          	pop	af
1714  0497  F1          	pop	af
1715  0498  21 23 00    	ld	hl,___str_2
1716  049B  E3          	ex	(sp),hl
1717  049C  21 08 05    	ld	hl,0x0508
1718  049F  E5          	push	hl
1719  04A0  CD 00 00    	call	_zx_print_str
1720  04A3  AF          	xor	a, a
1721  04A4  F5          	push	af
1722  04A5  33          	inc	sp
1723  04A6  21 D0 07    	ld	hl,0x07d0
1724  04A9  E5          	push	hl
1725  04AA  21 05 1B    	ld	hl,0x1b05
1726  04AD  E5          	push	hl
1727  04AE  3E 08       	ld	a,0x08
1728  04B0  F5          	push	af
1729  04B1  33          	inc	sp
1730  04B2  CD 30 0B    	call	_game_colour_message
1731  04B5  F1          	pop	af
1732  04B6  F1          	pop	af
1733  04B7  21 3A 00    	ld	hl,___str_3
1734  04BA  E3          	ex	(sp),hl
1735  04BB  21 08 03    	ld	hl,0x0308
1736  04BE  E5          	push	hl
1737  04BF  CD 00 00    	call	_zx_print_str
1738  04C2  AF          	xor	a, a
1739  04C3  F5          	push	af
1740  04C4  33          	inc	sp
1741  04C5  21 D0 07    	ld	hl,0x07d0
1742  04C8  E5          	push	hl
1743  04C9  21 03 1C    	ld	hl,0x1c03
1744  04CC  E5          	push	hl
1745  04CD  3E 08       	ld	a,0x08
1746  04CF  F5          	push	af
1747  04D0  33          	inc	sp
1748  04D1  CD 30 0B    	call	_game_colour_message
1749  04D4  F1          	pop	af
1750  04D5  F1          	pop	af
1751  04D6  F1          	pop	af
1752  04D7  21 E8 03    	ld	hl,0x03e8
1753  04DA  CD 00 00    	call	_z80_delay_ms_fastcall
1754  04DD  CD 00 00    	call	_in_wait_key
1755  04E0  CD 00 00    	call	_ay_reset
1756  04E3  21 00 00    	ld	hl,_game_world
1757  04E6  36 FF       	ld	(hl),0xff
1758  04E8  21 00 00    	ld	hl,_scr_curr
1759  04EB  36 FF       	ld	(hl),0xff
1760  04ED  21 00 00    	ld	hl,_game_worldup
1761  04F0  36 01       	ld	(hl),0x01
1762  04F2  C9          	ret
1763  04F3              	SECTION rodata_compiler
1764  0000              ___str_0:
1765  0000  43 4F 4E 47 52 41 54 55 4C 41 54 49 4F 4E 53 21 
                        	DEFM "CONGRATULATIONS!"
1766  0010  00          	DEFB 0x00
1767  0011              	SECTION rodata_compiler
1768  0011              ___str_1:
1769  0011  59 4F 55 20 48 41 56 45 20 44 45 46 45 41 54 45 44 
                        	DEFM "YOU HAVE DEFEATED"
1770  0022  00          	DEFB 0x00
1771  0023              	SECTION rodata_compiler
1772  0023              ___str_2:
1773  0023  54 48 45 20 4C 45 46 54 20 45 59 45 20 4F 46 20 53 41 55 52 4F 4E 
                        	DEFM "THE LEFT EYE OF SAURON"
1774  0039  00          	DEFB 0x00
1775  003A              	SECTION rodata_compiler
1776  003A              ___str_3:
1777  003A  41 52 44 41 20 57 49 4C 4C 20 42 45 20 4F 4E 20 50 45 41 43 45 20 4E 4F 57 
                        	DEFM "ARDA WILL BE ON PEACE NOW"
1778  0053  00          	DEFB 0x00
1779  0054              	SECTION code_compiler
1780  04F3              ;	---------------------------------
1781  04F3              ; Function game_add_enemy
1782  04F3              ; ---------------------------------
1783  04F3              _game_add_enemy:
1784  04F3  7D          	ld	a,l
1785  04F4  D6 78       	sub	a,0x78
1786  04F6  28 59       	jr	Z,l_game_add_enemy_00119
1787  04F8  4D          	ld	c,l
1788  04F9  21 00 00    	ld	hl,_tmp0
1789  04FC  36 00       	ld	(hl),0x00
1790  04FE              l_game_add_enemy_00104:
1791  04FE  3E 17       	ld	a,0x17
1792  0500  21 00 00    	ld	hl,_tmp0
1793  0503  96          	sub	a, (hl)
1794  0504  DA BA 05    	jp	C, l_game_add_enemy_00121
1795  0507  7E          	ld	a, (hl)
1796  0508  5F          	ld	e, a
1797  0509  87          	add	a, a
1798  050A  83          	add	a, e
1799  050B  21 00 00    	ld	hl,_tmp1
1800  050E  77          	ld	(hl), a
1801  050F  C6 00       	add	a,+((_spr_init) & 0xFF)
1802  0511  5F          	ld	e, a
1803  0512  3E 00       	ld	a, +((_spr_init) / 256)
1804  0514  CE 00       	adc	a,0x00
1805  0516  57          	ld	d, a
1806  0517  1A          	ld	a, (de)
1807  0518  91          	sub	a, c
1808  0519  20 30       	jr	NZ,l_game_add_enemy_00102
1809  051B  6E          	ld	l,(hl)
1810  051C  26 00       	ld	h,0x00
1811  051E  5D          	ld	e,l
1812  051F  54          	ld	d,h
1813  0520  23          	inc	hl
1814  0521  23          	inc	hl
1815  0522  3E 00       	ld	a, +((_spr_init) & 0xFF)
1816  0524  85          	add	a, l
1817  0525  6F          	ld	l, a
1818  0526  3E 00       	ld	a, +((_spr_init) / 256)
1819  0528  8C          	adc	a, h
1820  0529  67          	ld	h, a
1821  052A  46          	ld	b, (hl)
1822  052B  13          	inc	de
1823  052C  21 00 00    	ld	hl,_spr_init
1824  052F  19          	add	hl, de
1825  0530  56          	ld	d, (hl)
1826  0531  C5          	push	bc
1827  0532  4A          	ld	c, d
1828  0533  3A 00 00    	ld	a,(_s_col1)
1829  0536  C5          	push	bc
1830  0537  F5          	push	af
1831  0538  33          	inc	sp
1832  0539  3A 00 00    	ld	a,(_s_lin1)
1833  053C  F5          	push	af
1834  053D  33          	inc	sp
1835  053E  CD 00 00    	call	_enemy_init
1836  0541  F1          	pop	af
1837  0542  F1          	pop	af
1838  0543  C1          	pop	bc
1839  0544  21 00 00    	ld	hl,_tmp0
1840  0547  36 FF       	ld	(hl),0xff
1841  0549  18 B3       	jr	l_game_add_enemy_00104
1842  054B              l_game_add_enemy_00102:
1843  054B  21 00 00    	ld	hl,_tmp0
1844  054E  34          	inc	(hl)
1845  054F  18 AD       	jr	l_game_add_enemy_00104
1846  0551              l_game_add_enemy_00119:
1847  0551  3A 00 00    	ld	a,(_game_boss)
1848  0554  B7          	or	a, a
1849  0555  20 59       	jr	NZ,l_game_add_enemy_00115
1850  0557  3A 00 00    	ld	a,(_game_boss_alive)
1851  055A  B7          	or	a, a
1852  055B  28 53       	jr	Z,l_game_add_enemy_00115
1853  055D  3A 00 00    	ld	a,(_s_lin1)
1854  0560  32 00 00    	ld	(_boss_lin),a
1855  0563  3A 00 00    	ld	a,(_s_col1)
1856  0566  32 00 00    	ld	(_boss_col),a
1857  0569  3A 00 00    	ld	a,(_game_world)
1858  056C  B7          	or	a, a
1859  056D  28 10       	jr	Z,l_game_add_enemy_00107
1860  056F  3D          	dec	a
1861  0570  28 14       	jr	Z,l_game_add_enemy_00108
1862  0572  3A 00 00    	ld	a,(_game_world)
1863  0575  FE 02       	cp	a,0x02
1864  0577  28 14       	jr	Z,l_game_add_enemy_00109
1865  0579  D6 03       	sub	a,0x03
1866  057B  28 17       	jr	Z,l_game_add_enemy_00110
1867  057D  18 1A       	jr	l_game_add_enemy_00111
1868  057F              l_game_add_enemy_00107:
1869  057F  21 00 00    	ld	hl,_boss_tile
1870  0582  36 C8       	ld	(hl),0xc8
1871  0584  18 13       	jr	l_game_add_enemy_00111
1872  0586              l_game_add_enemy_00108:
1873  0586  21 00 00    	ld	hl,_boss_tile
1874  0589  36 D8       	ld	(hl),0xd8
1875  058B  18 0C       	jr	l_game_add_enemy_00111
1876  058D              l_game_add_enemy_00109:
1877  058D  21 00 00    	ld	hl,_boss_tile
1878  0590  36 DC       	ld	(hl),0xdc
1879  0592  18 05       	jr	l_game_add_enemy_00111
1880  0594              l_game_add_enemy_00110:
1881  0594  21 00 00    	ld	hl,_boss_tile
1882  0597  36 E0       	ld	(hl),0xe0
1883  0599              l_game_add_enemy_00111:
1884  0599  21 00 00    	ld	hl,_boss_stat
1885  059C  36 00       	ld	(hl),0x00
1886  059E  21 00 00    	ld	hl,_boss_stat
1887  05A1  CD 00 00    	call	_spr_set_up
1888  05A4  21 00 00    	ld	hl,_game_boss
1889  05A7  36 01       	ld	(hl),0x01
1890  05A9  21 00 00    	ld	hl,_game_boss_hit
1891  05AC  36 06       	ld	(hl),0x06
1892  05AE  18 0A       	jr	l_game_add_enemy_00121
1893  05B0              l_game_add_enemy_00115:
1894  05B0  3A 00 00    	ld	a,(_game_boss)
1895  05B3  B7          	or	a, a
1896  05B4  C0          	ret	NZ
1897  05B5  21 00 00    	ld	hl,_game_boss_fix
1898  05B8  36 01       	ld	(hl),0x01
1899  05BA              l_game_add_enemy_00121:
1900  05BA  C9          	ret
1901  05BB              	SECTION code_compiler
1902  05BB              ;	---------------------------------
1903  05BB              ; Function game_print_footer
1904  05BB              ; ---------------------------------
1905  05BB              _game_print_footer:
1906  05BB  21 00 00    	ld	hl,_screen_ink
1907  05BE  36 05       	ld	(hl),0x05
1908  05C0  21 13 62    	ld	hl,0x6213
1909  05C3  E5          	push	hl
1910  05C4  CD 00 00    	call	_game_fill_row
1911  05C7  21 54 00    	ld	hl,___str_4
1912  05CA  E5          	push	hl
1913  05CB  21 13 00    	ld	hl,0x0013
1914  05CE  E5          	push	hl
1915  05CF  CD 00 00    	call	_zx_print_str
1916  05D2  21 56 00    	ld	hl,___str_5
1917  05D5  E5          	push	hl
1918  05D6  21 13 1F    	ld	hl,0x1f13
1919  05D9  E5          	push	hl
1920  05DA  CD 00 00    	call	_zx_print_str
1921  05DD  21 58 00    	ld	hl,___str_6
1922  05E0  E5          	push	hl
1923  05E1  21 14 00    	ld	hl,0x0014
1924  05E4  E5          	push	hl
1925  05E5  CD 00 00    	call	_zx_print_str
1926  05E8  21 5A 00    	ld	hl,___str_7
1927  05EB  E5          	push	hl
1928  05EC  21 14 1F    	ld	hl,0x1f14
1929  05EF  E5          	push	hl
1930  05F0  CD 00 00    	call	_zx_print_str
1931  05F3  21 58 00    	ld	hl,___str_6
1932  05F6  E5          	push	hl
1933  05F7  21 15 00    	ld	hl,0x0015
1934  05FA  E5          	push	hl
1935  05FB  CD 00 00    	call	_zx_print_str
1936  05FE  21 5A 00    	ld	hl,___str_7
1937  0601  E5          	push	hl
1938  0602  21 15 1F    	ld	hl,0x1f15
1939  0605  E5          	push	hl
1940  0606  CD 00 00    	call	_zx_print_str
1941  0609  21 58 00    	ld	hl,___str_6
1942  060C  E5          	push	hl
1943  060D  21 16 00    	ld	hl,0x0016
1944  0610  E5          	push	hl
1945  0611  CD 00 00    	call	_zx_print_str
1946  0614  21 5A 00    	ld	hl,___str_7
1947  0617  E5          	push	hl
1948  0618  21 16 1F    	ld	hl,0x1f16
1949  061B  E5          	push	hl
1950  061C  CD 00 00    	call	_zx_print_str
1951  061F  21 17 62    	ld	hl,0x6217
1952  0622  E5          	push	hl
1953  0623  CD 00 00    	call	_game_fill_row
1954  0626  21 5C 00    	ld	hl,___str_8
1955  0629  E5          	push	hl
1956  062A  21 17 00    	ld	hl,0x0017
1957  062D  E5          	push	hl
1958  062E  CD 00 00    	call	_zx_print_str
1959  0631  21 5E 00    	ld	hl,___str_9
1960  0634  E5          	push	hl
1961  0635  21 17 1F    	ld	hl,0x1f17
1962  0638  E5          	push	hl
1963  0639  CD 00 00    	call	_zx_print_str
1964  063C  21 00 00    	ld	hl,_screen_ink
1965  063F  36 05       	ld	(hl),0x05
1966  0641  21 60 00    	ld	hl,___str_10
1967  0644  E5          	push	hl
1968  0645  21 14 01    	ld	hl,0x0114
1969  0648  E5          	push	hl
1970  0649  CD 00 00    	call	_zx_print_str
1971  064C  21 00 00    	ld	hl,_screen_ink
1972  064F  36 06       	ld	(hl),0x06
1973  0651  21 62 00    	ld	hl,___str_11
1974  0654  E5          	push	hl
1975  0655  21 15 01    	ld	hl,0x0115
1976  0658  E5          	push	hl
1977  0659  CD 00 00    	call	_zx_print_str
1978  065C  21 00 00    	ld	hl,_screen_ink
1979  065F  36 42       	ld	(hl),0x42
1980  0661  21 64 00    	ld	hl,___str_12
1981  0664  E5          	push	hl
1982  0665  21 14 08    	ld	hl,0x0814
1983  0668  E5          	push	hl
1984  0669  CD 00 00    	call	_zx_print_str
1985  066C  21 00 00    	ld	hl,_screen_ink
1986  066F  36 03       	ld	(hl),0x03
1987  0671  21 66 00    	ld	hl,___str_13
1988  0674  E5          	push	hl
1989  0675  21 15 08    	ld	hl,0x0815
1990  0678  E5          	push	hl
1991  0679  CD 00 00    	call	_zx_print_str
1992  067C  21 00 00    	ld	hl,_screen_ink
1993  067F  36 47       	ld	(hl),0x47
1994  0681  21 68 00    	ld	hl,___str_14
1995  0684  E5          	push	hl
1996  0685  21 14 0F    	ld	hl,0x0f14
1997  0688  E5          	push	hl
1998  0689  CD 00 00    	call	_zx_print_str
1999  068C  21 00 00    	ld	hl,_screen_ink
2000  068F  36 05       	ld	(hl),0x05
2001  0691  21 6A 00    	ld	hl,___str_15
2002  0694  E5          	push	hl
2003  0695  21 15 0F    	ld	hl,0x0f15
2004  0698  E5          	push	hl
2005  0699  CD 00 00    	call	_zx_print_str
2006  069C  21 00 00    	ld	hl,_screen_ink
2007  069F  36 45       	ld	(hl),0x45
2008  06A1  21 6C 00    	ld	hl,___str_16
2009  06A4  E5          	push	hl
2010  06A5  21 14 15    	ld	hl,0x1514
2011  06A8  E5          	push	hl
2012  06A9  CD 00 00    	call	_zx_print_str
2013  06AC  21 00 00    	ld	hl,_screen_ink
2014  06AF  36 07       	ld	(hl),0x07
2015  06B1  21 6E 00    	ld	hl,___str_17
2016  06B4  E5          	push	hl
2017  06B5  21 15 15    	ld	hl,0x1515
2018  06B8  E5          	push	hl
2019  06B9  CD 00 00    	call	_zx_print_str
2020  06BC  3A 00 00    	ld	a,(_game_show_fps)
2021  06BF  B7          	or	a, a
2022  06C0  28 0B       	jr	Z,l_game_print_footer_00102
2023  06C2  21 70 00    	ld	hl,___str_18
2024  06C5  E5          	push	hl
2025  06C6  21 17 14    	ld	hl,0x1417
2026  06C9  E5          	push	hl
2027  06CA  CD 00 00    	call	_zx_print_str
2028  06CD              l_game_print_footer_00102:
2029  06CD  21 00 00    	ld	hl,_screen_ink
2030  06D0  36 06       	ld	(hl),0x06
2031  06D2  21 75 00    	ld	hl,___str_19
2032  06D5  E5          	push	hl
2033  06D6  21 16 07    	ld	hl,0x0716
2034  06D9  E5          	push	hl
2035  06DA  CD 00 00    	call	_zx_print_str
2036  06DD  21 77 00    	ld	hl,___str_20
2037  06E0  E5          	push	hl
2038  06E1  21 16 0D    	ld	hl,0x0d16
2039  06E4  E5          	push	hl
2040  06E5  CD 00 00    	call	_zx_print_str
2041  06E8  21 79 00    	ld	hl,___str_21
2042  06EB  E5          	push	hl
2043  06EC  21 16 13    	ld	hl,0x1316
2044  06EF  E5          	push	hl
2045  06F0  CD 00 00    	call	_zx_print_str
2046  06F3  21 7B 00    	ld	hl,___str_22
2047  06F6  E5          	push	hl
2048  06F7  21 16 19    	ld	hl,0x1916
2049  06FA  E5          	push	hl
2050  06FB  CD 00 00    	call	_zx_print_str
2051  06FE  CD 23 07    	call	_game_update_stats
2052  0701  C9          	ret
2053  0702              	SECTION rodata_compiler
2054  0054              ___str_4:
2055  0054  61          	DEFM "a"
2056  0055  00          	DEFB 0x00
2057  0056              	SECTION rodata_compiler
2058  0056              ___str_5:
2059  0056  63          	DEFM "c"
2060  0057  00          	DEFB 0x00
2061  0058              	SECTION rodata_compiler
2062  0058              ___str_6:
2063  0058  64          	DEFM "d"
2064  0059  00          	DEFB 0x00
2065  005A              	SECTION rodata_compiler
2066  005A              ___str_7:
2067  005A  65          	DEFM "e"
2068  005B  00          	DEFB 0x00
2069  005C              	SECTION rodata_compiler
2070  005C              ___str_8:
2071  005C  66          	DEFM "f"
2072  005D  00          	DEFB 0x00
2073  005E              	SECTION rodata_compiler
2074  005E              ___str_9:
2075  005E  67          	DEFM "g"
2076  005F  00          	DEFB 0x00
2077  0060              	SECTION rodata_compiler
2078  0060              ___str_10:
2079  0060  3C          	DEFM "<"
2080  0061  00          	DEFB 0x00
2081  0062              	SECTION rodata_compiler
2082  0062              ___str_11:
2083  0062  5C          	DEFB 0x5c
2084  0063  00          	DEFB 0x00
2085  0064              	SECTION rodata_compiler
2086  0064              ___str_12:
2087  0064  3E          	DEFM ">"
2088  0065  00          	DEFB 0x00
2089  0066              	SECTION rodata_compiler
2090  0066              ___str_13:
2091  0066  5E          	DEFM "^"
2092  0067  00          	DEFB 0x00
2093  0068              	SECTION rodata_compiler
2094  0068              ___str_14:
2095  0068  3F          	DEFM "?"
2096  0069  00          	DEFB 0x00
2097  006A              	SECTION rodata_compiler
2098  006A              ___str_15:
2099  006A  5F          	DEFM "_"
2100  006B  00          	DEFB 0x00
2101  006C              	SECTION rodata_compiler
2102  006C              ___str_16:
2103  006C  78          	DEFM "x"
2104  006D  00          	DEFB 0x00
2105  006E              	SECTION rodata_compiler
2106  006E              ___str_17:
2107  006E  79          	DEFM "y"
2108  006F  00          	DEFB 0x00
2109  0070              	SECTION rodata_compiler
2110  0070              ___str_18:
2111  0070  4C 50 53 3A 	DEFM "LPS:"
2112  0074  00          	DEFB 0x00
2113  0075              	SECTION rodata_compiler
2114  0075              ___str_19:
2115  0075  6C          	DEFM "l"
2116  0076  00          	DEFB 0x00
2117  0077              	SECTION rodata_compiler
2118  0077              ___str_20:
2119  0077  6D          	DEFM "m"
2120  0078  00          	DEFB 0x00
2121  0079              	SECTION rodata_compiler
2122  0079              ___str_21:
2123  0079  6E          	DEFM "n"
2124  007A  00          	DEFB 0x00
2125  007B              	SECTION rodata_compiler
2126  007B              ___str_22:
2127  007B  6F          	DEFM "o"
2128  007C  00          	DEFB 0x00
2129  007D              	SECTION code_compiler
2130  0702              ;	---------------------------------
2131  0702              ; Function game_print_score
2132  0702              ; ---------------------------------
2133  0702              _game_print_score:
2134  0702  21 00 00    	ld	hl,_screen_ink
2135  0705  36 07       	ld	(hl),0x07
2136  0707  21 00 00    	ld	hl,_screen_paper
2137  070A  36 00       	ld	(hl),0x00
2138  070C  2A 00 00    	ld	hl,(_player_score)
2139  070F  E5          	push	hl
2140  0710  21 14 17    	ld	hl,0x1714
2141  0713  E5          	push	hl
2142  0714  CD 00 00    	call	_zx_print_int
2143  0717  2A 00 00    	ld	hl,(_game_score_top)
2144  071A  E5          	push	hl
2145  071B  21 00 0E    	ld	hl,0x0e00
2146  071E  E5          	push	hl
2147  071F  CD 00 00    	call	_zx_print_int
2148  0722  C9          	ret
2149  0723              	SECTION code_compiler
2150  0723              ;	---------------------------------
2151  0723              ; Function game_update_stats
2152  0723              ; ---------------------------------
2153  0723              _game_update_stats:
2154  0723  21 00 00    	ld	hl,_screen_ink
2155  0726  36 07       	ld	(hl),0x07
2156  0728  3A 00 00    	ld	a,(_player_lives)
2157  072B  F5          	push	af
2158  072C  33          	inc	sp
2159  072D  21 14 03    	ld	hl,0x0314
2160  0730  E5          	push	hl
2161  0731  CD 00 00    	call	_zx_print_chr
2162  0734  3A 00 00    	ld	a,(_player_coins)
2163  0737  F5          	push	af
2164  0738  33          	inc	sp
2165  0739  21 16 09    	ld	hl,0x0916
2166  073C  E5          	push	hl
2167  073D  CD 00 00    	call	_zx_print_chr
2168  0740  3A 00 00    	ld	a,(_player_str)
2169  0743  F5          	push	af
2170  0744  33          	inc	sp
2171  0745  21 16 0F    	ld	hl,0x0f16
2172  0748  E5          	push	hl
2173  0749  CD 00 00    	call	_zx_print_chr
2174  074C  3A 00 00    	ld	a,(_player_int)
2175  074F  F5          	push	af
2176  0750  33          	inc	sp
2177  0751  21 16 15    	ld	hl,0x1516
2178  0754  E5          	push	hl
2179  0755  CD 00 00    	call	_zx_print_chr
2180  0758  3A 00 00    	ld	a,(_player_lvl)
2181  075B  F5          	push	af
2182  075C  33          	inc	sp
2183  075D  21 16 1B    	ld	hl,0x1b16
2184  0760  E5          	push	hl
2185  0761  CD 00 00    	call	_zx_print_chr
2186  0764  21 00 00    	ld	hl,_screen_ink
2187  0767  36 02       	ld	(hl),0x02
2188  0769  3A 00 00    	ld	a,(_player_vita)
2189  076C  F5          	push	af
2190  076D  33          	inc	sp
2191  076E  21 14 0A    	ld	hl,0x0a14
2192  0771  E5          	push	hl
2193  0772  CD 00 00    	call	_zx_print_chr
2194  0775  21 00 00    	ld	hl,_screen_ink
2195  0778  36 01       	ld	(hl),0x01
2196  077A  3A 00 00    	ld	a,(_player_mana)
2197  077D  F5          	push	af
2198  077E  33          	inc	sp
2199  077F  21 14 11    	ld	hl,0x1114
2200  0782  E5          	push	hl
2201  0783  CD 00 00    	call	_zx_print_chr
2202  0786  3A 00 00    	ld	a,(_game_boss)
2203  0789  B7          	or	a, a
2204  078A  28 3E       	jr	Z,l_game_update_stats_00106
2205  078C  21 00 00    	ld	hl,_screen_ink
2206  078F  36 03       	ld	(hl),0x03
2207  0791  21 00 00    	ld	hl,_tmp0
2208  0794  36 00       	ld	(hl),0x00
2209  0796              l_game_update_stats_00115:
2210  0796  21 00 00    	ld	hl,_tmp0
2211  0799  7E          	ld	a, (hl)
2212  079A  C6 0D       	add	a,0x0d
2213  079C  47          	ld	b, a
2214  079D  7E          	ld	a, (hl)
2215  079E  21 00 00    	ld	hl,_game_boss_hit
2216  07A1  96          	sub	a, (hl)
2217  07A2  30 0F       	jr	NC,l_game_update_stats_00102
2218  07A4  21 7D 00    	ld	hl,___str_23
2219  07A7  E5          	push	hl
2220  07A8  C5          	push	bc
2221  07A9  33          	inc	sp
2222  07AA  3E 13       	ld	a,0x13
2223  07AC  F5          	push	af
2224  07AD  33          	inc	sp
2225  07AE  CD 00 00    	call	_zx_print_str
2226  07B1  18 0D       	jr	l_game_update_stats_00116
2227  07B3              l_game_update_stats_00102:
2228  07B3  21 7F 00    	ld	hl,___str_24
2229  07B6  E5          	push	hl
2230  07B7  C5          	push	bc
2231  07B8  33          	inc	sp
2232  07B9  3E 13       	ld	a,0x13
2233  07BB  F5          	push	af
2234  07BC  33          	inc	sp
2235  07BD  CD 00 00    	call	_zx_print_str
2236  07C0              l_game_update_stats_00116:
2237  07C0  21 00 00    	ld	hl,_tmp0
2238  07C3  7E          	ld	a,(hl)
2239  07C4  3C          	inc	a
2240  07C5  77          	ld	(hl),a
2241  07C6  D6 06       	sub	a,0x06
2242  07C8  38 CC       	jr	C,l_game_update_stats_00115
2243  07CA              l_game_update_stats_00106:
2244  07CA  3A 00 00    	ld	a,(_player_keys)
2245  07CD  B7          	or	a, a
2246  07CE  28 10       	jr	Z,l_game_update_stats_00108
2247  07D0  21 00 00    	ld	hl,_screen_ink
2248  07D3  36 07       	ld	(hl),0x07
2249  07D5  21 81 00    	ld	hl,___str_25
2250  07D8  E5          	push	hl
2251  07D9  21 16 02    	ld	hl,0x0216
2252  07DC  E5          	push	hl
2253  07DD  CD 00 00    	call	_zx_print_str
2254  07E0              l_game_update_stats_00108:
2255  07E0  3A 01 00    	ld	a, (_player_keys + 1)
2256  07E3  B7          	or	a, a
2257  07E4  28 10       	jr	Z,l_game_update_stats_00110
2258  07E6  21 00 00    	ld	hl,_screen_ink
2259  07E9  36 02       	ld	(hl),0x02
2260  07EB  21 81 00    	ld	hl,___str_25
2261  07EE  E5          	push	hl
2262  07EF  21 16 03    	ld	hl,0x0316
2263  07F2  E5          	push	hl
2264  07F3  CD 00 00    	call	_zx_print_str
2265  07F6              l_game_update_stats_00110:
2266  07F6  3A 02 00    	ld	a, (_player_keys + 2)
2267  07F9  B7          	or	a, a
2268  07FA  28 10       	jr	Z,l_game_update_stats_00112
2269  07FC  21 00 00    	ld	hl,_screen_ink
2270  07FF  36 04       	ld	(hl),0x04
2271  0801  21 81 00    	ld	hl,___str_25
2272  0804  E5          	push	hl
2273  0805  21 16 04    	ld	hl,0x0416
2274  0808  E5          	push	hl
2275  0809  CD 00 00    	call	_zx_print_str
2276  080C              l_game_update_stats_00112:
2277  080C  3A 03 00    	ld	a, (_player_keys + 3)
2278  080F  B7          	or	a, a
2279  0810  C8          	ret	Z
2280  0811  21 00 00    	ld	hl,_screen_ink
2281  0814  36 05       	ld	(hl),0x05
2282  0816  21 81 00    	ld	hl,___str_25
2283  0819  E5          	push	hl
2284  081A  21 16 05    	ld	hl,0x0516
2285  081D  E5          	push	hl
2286  081E  CD 00 00    	call	_zx_print_str
2287  0821  C9          	ret
2288  0822              	SECTION rodata_compiler
2289  007D              ___str_23:
2290  007D  2A          	DEFM "*"
2291  007E  00          	DEFB 0x00
2292  007F              	SECTION rodata_compiler
2293  007F              ___str_24:
2294  007F  20          	DEFM " "
2295  0080  00          	DEFB 0x00
2296  0081              	SECTION rodata_compiler
2297  0081              ___str_25:
2298  0081  5D          	DEFM "]"
2299  0082  00          	DEFB 0x00
2300  0083              	SECTION code_compiler
2301  0822              ;	---------------------------------
2302  0822              ; Function game_tick
2303  0822              ; ---------------------------------
2304  0822              _game_tick:
2305  0822  21 00 00    	ld	hl,_curr_time
2306  0825  34          	inc	(hl)
2307  0826  C2 00 00    	jp	NZ,_zx_isr
2308  0829  23          	inc	hl
2309  082A  34          	inc	(hl)
2310  082B  C3 00 00    	jp  _zx_isr
2311  082E              	SECTION code_compiler
2312  082E              ;	---------------------------------
2313  082E              ; Function game_start_timer
2314  082E              ; ---------------------------------
2315  082E              _game_start_timer:
2316  082E  21 00 00    	ld	hl,_NIRVANAP_ISR_HOOK+0
2317  0831  36 CD       	ld	(hl),0xcd
2318  0833  23          	inc	hl
2319  0834  11 22 08    	ld	de,_game_tick
2320  0837  73          	ld	(hl), e
2321  0838  23          	inc	hl
2322  0839  72          	ld	(hl), d
2323  083A  C9          	ret
2324  083B              	SECTION code_compiler
2325  083B              ;	---------------------------------
2326  083B              ; Function game_set_checkpoint
2327  083B              ; ---------------------------------
2328  083B              _game_set_checkpoint:
2329  083B  3A 00 00    	ld	a,(_player_col_scr)
2330  083E  CB 3F       	srl	a
2331  0840  87          	add	a, a
2332  0841  32 00 00    	ld	(_game_checkpoint_col),a
2333  0844  3A 00 00    	ld	a,(_player_lin_scr)
2334  0847  07          	rlca
2335  0848  07          	rlca
2336  0849  07          	rlca
2337  084A  07          	rlca
2338  084B  E6 0F       	and	a,0x0f
2339  084D  07          	rlca
2340  084E  07          	rlca
2341  084F  07          	rlca
2342  0850  07          	rlca
2343  0851  E6 F0       	and	a,0xf0
2344  0853  32 00 00    	ld	(_game_checkpoint_lin),a
2345  0856  3A 00 00    	ld	a,(_scr_curr)
2346  0859  32 00 00    	ld	(_game_checkpoint_scr),a
2347  085C  C9          	ret
2348  085D              	SECTION code_compiler
2349  085D              ;	---------------------------------
2350  085D              ; Function game_round_init
2351  085D              ; ---------------------------------
2352  085D              _game_round_init:
2353  085D  21 00 00    	ld	hl,0x0000
2354  0860  22 00 00    	ld	(_loop_count),hl
2355  0863  21 00 00    	ld	hl,0
2356  0866  22 00 00    	ld	(_curr_time),hl
2357  0869  21 00 00    	ld	hl,0x0000
2358  086C  22 00 00    	ld	(_frame_time),hl
2359  086F  CD 00 00    	call	_spr_init_effects
2360  0872  CD 35 09    	call	_game_print_header
2361  0875  CD BB 05    	call	_game_print_footer
2362  0878  CD 00 00    	call	_spr_page_map
2363  087B  CD 98 01    	call	_game_draw_screen
2364  087E  CD 3B 08    	call	_game_set_checkpoint
2365  0881  3A 00 00    	ld	a,(_game_over)
2366  0884  B7          	or	a, a
2367  0885  20 10       	jr	NZ,l_game_round_init_00102
2368  0887  2A 00 00    	ld	hl,(_player_col_scr)
2369  088A  26 70       	ld	h,0x70
2370  088C  3A 00 00    	ld	a,(_player_lin_scr)
2371  088F  E5          	push	hl
2372  0890  F5          	push	af
2373  0891  33          	inc	sp
2374  0892  CD 00 00    	call	_player_init
2375  0895  F1          	pop	af
2376  0896  33          	inc	sp
2377  0897              l_game_round_init_00102:
2378  0897  CD 23 07    	call	_game_update_stats
2379  089A  CD 00 00    	call	_ay_reset
2380  089D  21 00 00    	ld	hl,_ay_song_04_lotr_level_start
2381  08A0  E5          	push	hl
2382  08A1  21 01 04    	ld	hl,0x0401
2383  08A4  E5          	push	hl
2384  08A5  CD 00 00    	call	_ay_song_play
2385  08A8  3A 00 00    	ld	a,(_game_world)
2386  08AB  B7          	or	a, a
2387  08AC  28 10       	jr	Z,l_game_round_init_00103
2388  08AE  3D          	dec	a
2389  08AF  28 1F       	jr	Z,l_game_round_init_00104
2390  08B1  3A 00 00    	ld	a,(_game_world)
2391  08B4  FE 02       	cp	a,0x02
2392  08B6  28 2A       	jr	Z,l_game_round_init_00105
2393  08B8  D6 03       	sub	a,0x03
2394  08BA  28 38       	jr	Z,l_game_round_init_00106
2395  08BC  18 46       	jr	l_game_round_init_00107
2396  08BE              l_game_round_init_00103:
2397  08BE  21 83 00    	ld	hl,___str_26
2398  08C1  E5          	push	hl
2399  08C2  21 0C 06    	ld	hl,0x060c
2400  08C5  E5          	push	hl
2401  08C6  CD 00 00    	call	_zx_print_str
2402  08C9  21 00 00    	ld	hl,_tmp0
2403  08CC  36 11       	ld	(hl),0x11
2404  08CE  18 34       	jr	l_game_round_init_00107
2405  08D0              l_game_round_init_00104:
2406  08D0  21 95 00    	ld	hl,___str_27
2407  08D3  E5          	push	hl
2408  08D4  21 0C 06    	ld	hl,0x060c
2409  08D7  E5          	push	hl
2410  08D8  CD 00 00    	call	_zx_print_str
2411  08DB  21 00 00    	ld	hl,_tmp0
2412  08DE  36 0D       	ld	(hl),0x0d
2413  08E0  18 22       	jr	l_game_round_init_00107
2414  08E2              l_game_round_init_00105:
2415  08E2  21 A3 00    	ld	hl,___str_28
2416  08E5  E5          	push	hl
2417  08E6  21 0C 06    	ld	hl,0x060c
2418  08E9  E5          	push	hl
2419  08EA  CD 00 00    	call	_zx_print_str
2420  08ED  21 00 00    	ld	hl,_tmp0
2421  08F0  36 0E       	ld	(hl),0x0e
2422  08F2  18 10       	jr	l_game_round_init_00107
2423  08F4              l_game_round_init_00106:
2424  08F4  21 B2 00    	ld	hl,___str_29
2425  08F7  E5          	push	hl
2426  08F8  21 0C 06    	ld	hl,0x060c
2427  08FB  E5          	push	hl
2428  08FC  CD 00 00    	call	_zx_print_str
2429  08FF  21 00 00    	ld	hl,_tmp0
2430  0902  36 11       	ld	(hl),0x11
2431  0904              l_game_round_init_00107:
2432  0904  3A 00 00    	ld	a,(_tmp0)
2433  0907  C6 06       	add	a,0x06
2434  0909  4F          	ld	c, a
2435  090A  06 68       	ld	b,0x68
2436  090C  C5          	push	bc
2437  090D  3E 06       	ld	a,0x06
2438  090F  F5          	push	af
2439  0910  33          	inc	sp
2440  0911  21 00 00    	ld	hl,_attrib_osd
2441  0914  E5          	push	hl
2442  0915  CD 06 0B    	call	_game_paint_attrib
2443  0918  F1          	pop	af
2444  0919  F1          	pop	af
2445  091A  33          	inc	sp
2446  091B  3A 00 00    	ld	a,(_tmp0)
2447  091E  C6 06       	add	a,0x06
2448  0920  47          	ld	b, a
2449  0921  AF          	xor	a, a
2450  0922  F5          	push	af
2451  0923  33          	inc	sp
2452  0924  21 C8 00    	ld	hl,0x00c8
2453  0927  E5          	push	hl
2454  0928  C5          	push	bc
2455  0929  33          	inc	sp
2456  092A  21 0C 06    	ld	hl,0x060c
2457  092D  E5          	push	hl
2458  092E  CD 30 0B    	call	_game_colour_message
2459  0931  F1          	pop	af
2460  0932  F1          	pop	af
2461  0933  F1          	pop	af
2462  0934  C9          	ret
2463  0935              	SECTION rodata_compiler
2464  0083              ___str_26:
2465  0083  52 4F 55 4E 44 20 31 20 54 48 45 20 53 48 49 52 45 
                        	DEFM "ROUND 1 THE SHIRE"
2466  0094  00          	DEFB 0x00
2467  0095              	SECTION rodata_compiler
2468  0095              ___str_27:
2469  0095  52 4F 55 4E 44 20 32 20 4D 4F 52 49 41 
                        	DEFM "ROUND 2 MORIA"
2470  00A2  00          	DEFB 0x00
2471  00A3              	SECTION rodata_compiler
2472  00A3              ___str_28:
2473  00A3  52 4F 55 4E 44 20 33 20 4D 4F 52 44 4F 52 
                        	DEFM "ROUND 3 MORDOR"
2474  00B1  00          	DEFB 0x00
2475  00B2              	SECTION rodata_compiler
2476  00B2              ___str_29:
2477  00B2  52 4F 55 4E 44 20 34 20 42 41 52 41 44 20 44 55 52 
                        	DEFM "ROUND 4 BARAD DUR"
2478  00C3  00          	DEFB 0x00
2479  00C4              	SECTION code_compiler
2480  0935              ;	---------------------------------
2481  0935              ; Function game_print_header
2482  0935              ; ---------------------------------
2483  0935              _game_print_header:
2484  0935  21 00 00    	ld	hl,_screen_ink
2485  0938  36 02       	ld	(hl),0x02
2486  093A  21 C4 00    	ld	hl,___str_30
2487  093D  E5          	push	hl
2488  093E  21 00 0B    	ld	hl,0x0b00
2489  0941  E5          	push	hl
2490  0942  CD 00 00    	call	_zx_print_str
2491  0945  21 00 00    	ld	hl,_screen_ink
2492  0948  36 07       	ld	(hl),0x07
2493  094A  CD 02 07    	call	_game_print_score
2494  094D  C9          	ret
2495  094E              	SECTION rodata_compiler
2496  00C4              ___str_30:
2497  00C4  24 25 7C    	DEFM "$%|"
2498  00C7  00          	DEFB 0x00
2499  00C8              	SECTION code_compiler
2500  094E              ;	---------------------------------
2501  094E              ; Function game_check_map
2502  094E              ; ---------------------------------
2503  094E              _game_check_map:
2504  094E  CD 00 00    	call	___sdcc_enter_ix
2505  0951  DD CB 05 46 	bit	0,(ix+5)
2506  0955  20 18       	jr	NZ,l_game_check_map_00108
2507  0957  DD 66 05    	ld	h,(ix+5)
2508  095A  DD 6E 04    	ld	l,(ix+4)
2509  095D  E5          	push	hl
2510  095E  CD 00 00    	call	_spr_calc_index
2511  0961  F1          	pop	af
2512  0962  22 00 00    	ld	(_index1),hl
2513  0965  21 00 00    	ld	hl,_index1
2514  0968  CD CA 09    	call	_game_check_cell
2515  096B  26 00       	ld	h,0x00
2516  096D  18 58       	jr	l_game_check_map_00110
2517  096F              l_game_check_map_00108:
2518  096F  21 00 00    	ld	hl,_g_player_hit_left
2519  0972  36 00       	ld	(hl),0x00
2520  0974  21 00 00    	ld	hl,_g_player_hit_right
2521  0977  36 00       	ld	(hl),0x00
2522  0979  DD 46 05    	ld	b,(ix+5)
2523  097C  05          	dec	b
2524  097D  DD 4E 04    	ld	c,(ix+4)
2525  0980  C5          	push	bc
2526  0981  CD 00 00    	call	_spr_calc_index
2527  0984  F1          	pop	af
2528  0985  22 00 00    	ld	(_index1),hl
2529  0988  21 00 00    	ld	hl,_index1
2530  098B  CD CA 09    	call	_game_check_cell
2531  098E  7D          	ld	a, l
2532  098F  B7          	or	a, a
2533  0990  28 05       	jr	Z,l_game_check_map_00102
2534  0992  21 00 00    	ld	hl,_g_player_hit_left
2535  0995  36 01       	ld	(hl),0x01
2536  0997              l_game_check_map_00102:
2537  0997  3A 00 00    	ld	a,(_g_player_hit_left)
2538  099A  B7          	or	a, a
2539  099B  20 17       	jr	NZ,l_game_check_map_00106
2540  099D  21 00 00    	ld	hl,_index1
2541  09A0  34          	inc	(hl)
2542  09A1  20 02       	jr	NZ,l_game_check_map_00141
2543  09A3  23          	inc	hl
2544  09A4  34          	inc	(hl)
2545  09A5              l_game_check_map_00141:
2546  09A5  21 00 00    	ld	hl,_index1
2547  09A8  CD CA 09    	call	_game_check_cell
2548  09AB  7D          	ld	a, l
2549  09AC  B7          	or	a, a
2550  09AD  28 05       	jr	Z,l_game_check_map_00106
2551  09AF  21 00 00    	ld	hl,_g_player_hit_right
2552  09B2  36 01       	ld	(hl),0x01
2553  09B4              l_game_check_map_00106:
2554  09B4  3A 00 00    	ld	a,(_g_player_hit_left)
2555  09B7  B7          	or	a, a
2556  09B8  20 09       	jr	NZ,l_game_check_map_00113
2557  09BA  3A 00 00    	ld	a,(_g_player_hit_right)
2558  09BD  B7          	or	a,a
2559  09BE  20 03       	jr	NZ,l_game_check_map_00113
2560  09C0  6F          	ld	l,a
2561  09C1  18 02       	jr	l_game_check_map_00114
2562  09C3              l_game_check_map_00113:
2563  09C3  2E 01       	ld	l,0x01
2564  09C5              l_game_check_map_00114:
2565  09C5  26 00       	ld	h,0x00
2566  09C7              l_game_check_map_00110:
2567  09C7  DD E1       	pop	ix
2568  09C9  C9          	ret
2569  09CA              	SECTION code_compiler
2570  09CA              ;	---------------------------------
2571  09CA              ; Function game_check_cell
2572  09CA              ; ---------------------------------
2573  09CA              _game_check_cell:
2574  09CA  CD 00 00    	call	___sdcc_enter_ix
2575  09CD  4E          	ld	c,(hl)
2576  09CE  F5          	push	af
2577  09CF  F5          	push	af
2578  09D0  23          	inc	hl
2579  09D1  46          	ld	b, (hl)
2580  09D2  3E A0       	ld	a,0xa0
2581  09D4  B9          	cp	a, c
2582  09D5  3E 00       	ld	a,0x00
2583  09D7  98          	sbc	a, b
2584  09D8  30 05       	jr	NC,l_game_check_cell_00102
2585  09DA  2E 01       	ld	l,0x01
2586  09DC  C3 01 0B    	jp	l_game_check_cell_00159
2587  09DF              l_game_check_cell_00102:
2588  09DF  21 00 00    	ld	hl,_scr_map
2589  09E2  09          	add	hl, bc
2590  09E3  56          	ld	d, (hl)
2591  09E4  3A 00 00    	ld	a,(_sprite)
2592  09E7  D6 07       	sub	a,0x07
2593  09E9  20 04       	jr	NZ,l_game_check_cell_00261
2594  09EB  3E 01       	ld	a,0x01
2595  09ED  18 01       	jr	l_game_check_cell_00262
2596  09EF              l_game_check_cell_00261:
2597  09EF  AF          	xor	a,a
2598  09F0              l_game_check_cell_00262:
2599  09F0  DD 77 FF    	ld	(ix-1),a
2600  09F3  7A          	ld	a, d
2601  09F4  D6 44       	sub	a,0x44
2602  09F6  3E 00       	ld	a,0x00
2603  09F8  17          	rla
2604  09F9  DD 77 FE    	ld	(ix-2),a
2605  09FC  DD CB FF 46 	bit	0,(ix-1)
2606  0A00  C2 A3 0A    	jp	NZ, l_game_check_cell_00137
2607  0A03  3E 00       	ld	a, +((_class) & 0xFF)
2608  0A05  21 00 00    	ld	hl,_sprite
2609  0A08  86          	add	a, (hl)
2610  0A09  DD 77 FC    	ld	(ix-4),a
2611  0A0C  3E 00       	ld	a, +((_class) / 256)
2612  0A0E  CE 00       	adc	a,0x00
2613  0A10  DD 77 FD    	ld	(ix-3),a
2614  0A13  E1          	pop	hl
2615  0A14  5E          	ld	e,(hl)
2616  0A15  E5          	push	hl
2617  0A16  3E 00       	ld	a, +((_sprite_kind) & 0xFF)
2618  0A18  83          	add	a, e
2619  0A19  6F          	ld	l, a
2620  0A1A  3E 00       	ld	a, +((_sprite_kind) / 256)
2621  0A1C  CE 00       	adc	a,0x00
2622  0A1E  67          	ld	h, a
2623  0A1F  7E          	ld	a,(hl)
2624  0A20  6F          	ld	l,a
2625  0A21  D6 05       	sub	a,0x05
2626  0A23  20 04       	jr	NZ,l_game_check_cell_00104
2627  0A25  6F          	ld	l,a
2628  0A26  C3 01 0B    	jp	l_game_check_cell_00159
2629  0A29              l_game_check_cell_00104:
2630  0A29  7A          	ld	a, d
2631  0A2A  D6 80       	sub	a,0x80
2632  0A2C  38 05       	jr	C,l_game_check_cell_00106
2633  0A2E  2E 00       	ld	l,0x00
2634  0A30  C3 01 0B    	jp	l_game_check_cell_00159
2635  0A33              l_game_check_cell_00106:
2636  0A33  7A          	ld	a, d
2637  0A34  D6 23       	sub	a,0x23
2638  0A36  20 12       	jr	NZ,l_game_check_cell_00108
2639  0A38  7B          	ld	a,e
2640  0A39  FE 06       	cp	a,0x06
2641  0A3B  28 0D       	jr	Z,l_game_check_cell_00108
2642  0A3D  FE 07       	cp	a,0x07
2643  0A3F  28 09       	jr	Z,l_game_check_cell_00108
2644  0A41  D6 08       	sub	a,0x08
2645  0A43  28 05       	jr	Z,l_game_check_cell_00108
2646  0A45  2E 01       	ld	l,0x01
2647  0A47  C3 01 0B    	jp	l_game_check_cell_00159
2648  0A4A              l_game_check_cell_00108:
2649  0A4A  7D          	ld	a,l
2650  0A4B  FE 02       	cp	a,0x02
2651  0A4D  28 04       	jr	Z,l_game_check_cell_00124
2652  0A4F  D6 06       	sub	a,0x06
2653  0A51  20 30       	jr	NZ,l_game_check_cell_00125
2654  0A53              l_game_check_cell_00124:
2655  0A53  7B          	ld	a,e
2656  0A54  FE 09       	cp	a,0x09
2657  0A56  28 04       	jr	Z,l_game_check_cell_00120
2658  0A58  D6 0A       	sub	a,0x0a
2659  0A5A  20 0E       	jr	NZ,l_game_check_cell_00121
2660  0A5C              l_game_check_cell_00120:
2661  0A5C  3E 3A       	ld	a,0x3a
2662  0A5E  92          	sub	a, d
2663  0A5F  38 05       	jr	C,l_game_check_cell_00113
2664  0A61  2E 00       	ld	l,0x00
2665  0A63  C3 01 0B    	jp	l_game_check_cell_00159
2666  0A66              l_game_check_cell_00113:
2667  0A66  6A          	ld	l, d
2668  0A67  C3 01 0B    	jp	l_game_check_cell_00159
2669  0A6A              l_game_check_cell_00121:
2670  0A6A  3E 2F       	ld	a,0x2f
2671  0A6C  92          	sub	a, d
2672  0A6D  30 0B       	jr	NC,l_game_check_cell_00115
2673  0A6F  DD CB FE 46 	bit	0,(ix-2)
2674  0A73  20 0A       	jr	NZ,l_game_check_cell_00116
2675  0A75  3E 47       	ld	a,0x47
2676  0A77  92          	sub	a, d
2677  0A78  38 05       	jr	C,l_game_check_cell_00116
2678  0A7A              l_game_check_cell_00115:
2679  0A7A  2E 00       	ld	l,0x00
2680  0A7C  C3 01 0B    	jp	l_game_check_cell_00159
2681  0A7F              l_game_check_cell_00116:
2682  0A7F  6A          	ld	l, d
2683  0A80  C3 01 0B    	jp	l_game_check_cell_00159
2684  0A83              l_game_check_cell_00125:
2685  0A83  7D          	ld	a, l
2686  0A84  3D          	dec	a
2687  0A85  28 05       	jr	Z,l_game_check_cell_00133
2688  0A87  7D          	ld	a, l
2689  0A88  D6 03       	sub	a,0x03
2690  0A8A  20 17       	jr	NZ,l_game_check_cell_00137
2691  0A8C              l_game_check_cell_00133:
2692  0A8C  3A 00 00    	ld	a,(_sprite_horizontal_check)
2693  0A8F  B7          	or	a, a
2694  0A90  28 04       	jr	Z,l_game_check_cell_00128
2695  0A92  0E 48       	ld	c,0x48
2696  0A94  18 02       	jr	l_game_check_cell_00129
2697  0A96              l_game_check_cell_00128:
2698  0A96  0E 3A       	ld	c,0x3a
2699  0A98              l_game_check_cell_00129:
2700  0A98  7A          	ld	a, d
2701  0A99  91          	sub	a, c
2702  0A9A  30 04       	jr	NC,l_game_check_cell_00131
2703  0A9C  2E 00       	ld	l,0x00
2704  0A9E  18 61       	jr	l_game_check_cell_00159
2705  0AA0              l_game_check_cell_00131:
2706  0AA0  6A          	ld	l, d
2707  0AA1  18 5E       	jr	l_game_check_cell_00159
2708  0AA3              l_game_check_cell_00137:
2709  0AA3  7A          	ld	a, d
2710  0AA4  D6 3A       	sub	a,0x3a
2711  0AA6  30 04       	jr	NC,l_game_check_cell_00139
2712  0AA8  2E 00       	ld	l,0x00
2713  0AAA  18 55       	jr	l_game_check_cell_00159
2714  0AAC              l_game_check_cell_00139:
2715  0AAC  3A 00 00    	ld	a,(_s_state)
2716  0AAF  E6 02       	and	a,0x02
2717  0AB1  5F          	ld	e, a
2718  0AB2  DD CB FE 46 	bit	0,(ix-2)
2719  0AB6  28 0C       	jr	Z,l_game_check_cell_00144
2720  0AB8  7B          	ld	a, e
2721  0AB9  B7          	or	a, a
2722  0ABA  28 04       	jr	Z,l_game_check_cell_00141
2723  0ABC  2E 01       	ld	l,0x01
2724  0ABE  18 41       	jr	l_game_check_cell_00159
2725  0AC0              l_game_check_cell_00141:
2726  0AC0  2E 00       	ld	l,0x00
2727  0AC2  18 3D       	jr	l_game_check_cell_00159
2728  0AC4              l_game_check_cell_00144:
2729  0AC4  7A          	ld	a, d
2730  0AC5  D6 48       	sub	a,0x48
2731  0AC7  30 16       	jr	NC,l_game_check_cell_00152
2732  0AC9  3A 00 00    	ld	a,(_sprite_horizontal_check)
2733  0ACC  B7          	or	a, a
2734  0ACD  28 04       	jr	Z,l_game_check_cell_00149
2735  0ACF  2E 00       	ld	l,0x00
2736  0AD1  18 2E       	jr	l_game_check_cell_00159
2737  0AD3              l_game_check_cell_00149:
2738  0AD3  7B          	ld	a, e
2739  0AD4  B7          	or	a, a
2740  0AD5  28 04       	jr	Z,l_game_check_cell_00146
2741  0AD7  2E 01       	ld	l,0x01
2742  0AD9  18 26       	jr	l_game_check_cell_00159
2743  0ADB              l_game_check_cell_00146:
2744  0ADB  2E 00       	ld	l,0x00
2745  0ADD  18 22       	jr	l_game_check_cell_00159
2746  0ADF              l_game_check_cell_00152:
2747  0ADF  7A          	ld	a, d
2748  0AE0  D6 4C       	sub	a,0x4c
2749  0AE2  30 12       	jr	NC,l_game_check_cell_00156
2750  0AE4  DD CB FF 46 	bit	0,(ix-1)
2751  0AE8  28 0C       	jr	Z,l_game_check_cell_00156
2752  0AEA  D5          	push	de
2753  0AEB  33          	inc	sp
2754  0AEC  C5          	push	bc
2755  0AED  CD 00 00    	call	_player_open_door
2756  0AF0  F1          	pop	af
2757  0AF1  33          	inc	sp
2758  0AF2  2E 01       	ld	l,0x01
2759  0AF4  18 0B       	jr	l_game_check_cell_00159
2760  0AF6              l_game_check_cell_00156:
2761  0AF6  7A          	ld	a, d
2762  0AF7  D6 60       	sub	a,0x60
2763  0AF9  30 04       	jr	NC,l_game_check_cell_00158
2764  0AFB  2E 01       	ld	l,0x01
2765  0AFD  18 02       	jr	l_game_check_cell_00159
2766  0AFF              l_game_check_cell_00158:
2767  0AFF  2E 00       	ld	l,0x00
2768  0B01              l_game_check_cell_00159:
2769  0B01  DD F9       	ld	sp, ix
2770  0B03  DD E1       	pop	ix
2771  0B05  C9          	ret
2772  0B06              	SECTION code_compiler
2773  0B06              ;	---------------------------------
2774  0B06              ; Function game_paint_attrib
2775  0B06              ; ---------------------------------
2776  0B06              _game_paint_attrib:
2777  0B06  CD 00 00    	call	___sdcc_enter_ix
2778  0B09  DD 7E 06    	ld	a,(ix+6)
2779  0B0C  32 00 00    	ld	(_tmp_uc),a
2780  0B0F              l_game_paint_attrib_00103:
2781  0B0F  21 00 00    	ld	hl,_tmp_uc
2782  0B12  7E          	ld	a, (hl)
2783  0B13  DD 96 07    	sub	a,(ix+7)
2784  0B16  30 15       	jr	NC,l_game_paint_attrib_00105
2785  0B18  DD 4E 04    	ld	c,(ix+4)
2786  0B1B  DD 46 05    	ld	b,(ix+5)
2787  0B1E  66          	ld	h,(hl)
2788  0B1F  DD 6E 08    	ld	l,(ix+8)
2789  0B22  E5          	push	hl
2790  0B23  C5          	push	bc
2791  0B24  CD 00 00    	call	_NIRVANAP_paintC_callee
2792  0B27  21 00 00    	ld	hl,_tmp_uc
2793  0B2A  34          	inc	(hl)
2794  0B2B  18 E2       	jr	l_game_paint_attrib_00103
2795  0B2D              l_game_paint_attrib_00105:
2796  0B2D  DD E1       	pop	ix
2797  0B2F  C9          	ret
2798  0B30              	SECTION code_compiler
2799  0B30              ;	---------------------------------
2800  0B30              ; Function game_colour_message
2801  0B30              ; ---------------------------------
2802  0B30              _game_colour_message:
2803  0B30  CD 00 00    	call	___sdcc_enter_ix
2804  0B33  F5          	push	af
2805  0B34  F5          	push	af
2806  0B35  3B          	dec	sp
2807  0B36  D1          	pop	de
2808  0B37  21 00 00    	ld	hl,_tmp
2809  0B3A  36 01       	ld	(hl),0x01
2810  0B3C  2A 00 00    	ld	hl,(_curr_time)
2811  0B3F  22 00 00    	ld	(_frame_time),hl
2812  0B42  E5          	push	hl
2813  0B43  DD 7E 04    	ld	a,(ix+4)
2814  0B46  4D          	ld	c,l
2815  0B47  07          	rlca
2816  0B48  07          	rlca
2817  0B49  07          	rlca
2818  0B4A  E6 F8       	and	a,0xf8
2819  0B4C  DD 77 FF    	ld	(ix-1),a
2820  0B4F  C6 08       	add	a,0x08
2821  0B51  DD 77 FE    	ld	(ix-2),a
2822  0B54  DD 77 FD    	ld	(ix-3),a
2823  0B57              l_game_colour_message_00112:
2824  0B57  3A 00 00    	ld	a,(_tmp)
2825  0B5A  B7          	or	a, a
2826  0B5B  CA E1 0B    	jp	Z, l_game_colour_message_00114
2827  0B5E  DD 46 07    	ld	b,(ix+7)
2828  0B61  21 00 00    	ld	hl,0x0000
2829  0B64  39          	add	hl, sp
2830  0B65  EB          	ex	de,hl
2831  0B66  C5          	push	bc
2832  0B67  33          	inc	sp
2833  0B68  D5          	push	de
2834  0B69  CD 53 0C    	call	_game_check_time
2835  0B6C  F1          	pop	af
2836  0B6D  33          	inc	sp
2837  0B6E  7D          	ld	a, l
2838  0B6F  B7          	or	a, a
2839  0B70  20 6F       	jr	NZ,l_game_colour_message_00114
2840  0B72  3E 05       	ld	a,0x05
2841  0B74  F5          	push	af
2842  0B75  33          	inc	sp
2843  0B76  21 00 00    	ld	hl,_frame_time
2844  0B79  E5          	push	hl
2845  0B7A  CD 53 0C    	call	_game_check_time
2846  0B7D  F1          	pop	af
2847  0B7E  33          	inc	sp
2848  0B7F  7D          	ld	a, l
2849  0B80  B7          	or	a, a
2850  0B81  28 40       	jr	Z,l_game_colour_message_00105
2851  0B83  2A 00 00    	ld	hl,(_curr_time)
2852  0B86  22 00 00    	ld	(_frame_time),hl
2853  0B89  3A 00 00    	ld	a,(_game_over)
2854  0B8C  B7          	or	a,a
2855  0B8D  28 1B       	jr	Z,l_game_colour_message_00102
2856  0B8F  DD 66 FD    	ld	h,(ix-3)
2857  0B92  DD 6E 06    	ld	l,(ix+6)
2858  0B95  E5          	push	hl
2859  0B96  DD 7E 05    	ld	a,(ix+5)
2860  0B99  F5          	push	af
2861  0B9A  33          	inc	sp
2862  0B9B  21 00 00    	ld	hl,_attrib_hl
2863  0B9E  E5          	push	hl
2864  0B9F  CD 06 0B    	call	_game_paint_attrib
2865  0BA2  F1          	pop	af
2866  0BA3  F1          	pop	af
2867  0BA4  33          	inc	sp
2868  0BA5  CD 08 11    	call	_game_rotate_attrib
2869  0BA8  18 19       	jr	l_game_colour_message_00105
2870  0BAA              l_game_colour_message_00102:
2871  0BAA  DD 66 FE    	ld	h,(ix-2)
2872  0BAD  DD 6E 06    	ld	l,(ix+6)
2873  0BB0  E5          	push	hl
2874  0BB1  DD 7E 05    	ld	a,(ix+5)
2875  0BB4  F5          	push	af
2876  0BB5  33          	inc	sp
2877  0BB6  21 00 00    	ld	hl,_attrib_osd
2878  0BB9  E5          	push	hl
2879  0BBA  CD 06 0B    	call	_game_paint_attrib
2880  0BBD  F1          	pop	af
2881  0BBE  F1          	pop	af
2882  0BBF  33          	inc	sp
2883  0BC0  CD 24 11    	call	_game_rotate_attrib_osd
2884  0BC3              l_game_colour_message_00105:
2885  0BC3  DD 7E 09    	ld	a,(ix+9)
2886  0BC6  B7          	or	a, a
2887  0BC7  28 8E       	jr	Z,l_game_colour_message_00112
2888  0BC9              l_game_colour_message_00106:
2889  0BC9  21 00 00    	ld	hl,_k1
2890  0BCC  E5          	push	hl
2891  0BCD  2A 00 00    	ld	hl,(_joyfunc1)
2892  0BD0  CD 00 00    	call	___sdcc_call_hl
2893  0BD3  F1          	pop	af
2894  0BD4  7C          	ld	a,h
2895  0BD5  B5          	or	a,l
2896  0BD6  4D          	ld	c,l
2897  0BD7  CA 57 0B    	jp	Z, l_game_colour_message_00112
2898  0BDA  21 00 00    	ld	hl,_tmp
2899  0BDD  36 00       	ld	(hl),0x00
2900  0BDF  18 E8       	jr	l_game_colour_message_00106
2901  0BE1              l_game_colour_message_00114:
2902  0BE1  DD 7E 06    	ld	a,(ix+6)
2903  0BE4  DD 96 05    	sub	a,(ix+5)
2904  0BE7  4F          	ld	c, a
2905  0BE8  3A 00 00    	ld	a,(_game_over)
2906  0BEB  B7          	or	a, a
2907  0BEC  28 2B       	jr	Z,l_game_colour_message_00118
2908  0BEE  21 00 00    	ld	hl,_tmp1
2909  0BF1  71          	ld	(hl), c
2910  0BF2  21 00 00    	ld	hl,_tmp0
2911  0BF5  36 00       	ld	(hl),0x00
2912  0BF7              l_game_colour_message_00121:
2913  0BF7  3A 00 00    	ld	a,(_tmp0)
2914  0BFA  21 00 00    	ld	hl,_tmp1
2915  0BFD  96          	sub	a, (hl)
2916  0BFE  30 4E       	jr	NC,l_game_colour_message_00126
2917  0C00  DD 7E 05    	ld	a,(ix+5)
2918  0C03  21 00 00    	ld	hl,_tmp0
2919  0C06  86          	add	a, (hl)
2920  0C07  47          	ld	b, a
2921  0C08  21 C8 00    	ld	hl,___str_31
2922  0C0B  E5          	push	hl
2923  0C0C  DD 4E 04    	ld	c,(ix+4)
2924  0C0F  C5          	push	bc
2925  0C10  CD 00 00    	call	_zx_print_str
2926  0C13  21 00 00    	ld	hl,_tmp0
2927  0C16  34          	inc	(hl)
2928  0C17  18 DE       	jr	l_game_colour_message_00121
2929  0C19              l_game_colour_message_00118:
2930  0C19  21 00 00    	ld	hl,_tmp1
2931  0C1C  71          	ld	(hl), c
2932  0C1D  DD 7E FF    	ld	a,(ix-1)
2933  0C20  32 00 00    	ld	(_s_lin0),a
2934  0C23  DD 7E 05    	ld	a,(ix+5)
2935  0C26  CB 3F       	srl	a
2936  0C28  87          	add	a, a
2937  0C29  32 00 00    	ld	(_s_col1),a
2938  0C2C  21 00 00    	ld	hl,_tmp0
2939  0C2F  36 00       	ld	(hl),0x00
2940  0C31              l_game_colour_message_00124:
2941  0C31  3A 00 00    	ld	a,(_tmp0)
2942  0C34  21 00 00    	ld	hl,_tmp1
2943  0C37  96          	sub	a, (hl)
2944  0C38  30 14       	jr	NC,l_game_colour_message_00126
2945  0C3A  3A 00 00    	ld	a,(_s_col1)
2946  0C3D  21 00 00    	ld	hl,_tmp0
2947  0C40  86          	add	a, (hl)
2948  0C41  32 00 00    	ld	(_s_col0),a
2949  0C44  CD 00 00    	call	_spr_back_repaint
2950  0C47  21 00 00    	ld	hl,_tmp0
2951  0C4A  34          	inc	(hl)
2952  0C4B  34          	inc	(hl)
2953  0C4C  18 E3       	jr	l_game_colour_message_00124
2954  0C4E              l_game_colour_message_00126:
2955  0C4E  DD F9       	ld	sp, ix
2956  0C50  DD E1       	pop	ix
2957  0C52  C9          	ret
2958  0C53              	SECTION rodata_compiler
2959  00C8              ___str_31:
2960  00C8  20          	DEFM " "
2961  00C9  00          	DEFB 0x00
2962  00CA              	SECTION code_compiler
2963  0C53              ;	---------------------------------
2964  0C53              ; Function game_check_time
2965  0C53              ; ---------------------------------
2966  0C53              _game_check_time:
2967  0C53  CD 00 00    	call	___sdcc_enter_ix
2968  0C56  2A 00 00    	ld	hl,(_curr_time)
2969  0C59  4D          	ld	c, l
2970  0C5A  DD 6E 04    	ld	l,(ix+4)
2971  0C5D  44          	ld	b,h
2972  0C5E  DD 66 05    	ld	h,(ix+5)
2973  0C61  5E          	ld	e, (hl)
2974  0C62  23          	inc	hl
2975  0C63  56          	ld	d, (hl)
2976  0C64  79          	ld	a, c
2977  0C65  93          	sub	a, e
2978  0C66  4F          	ld	c, a
2979  0C67  78          	ld	a, b
2980  0C68  9A          	sbc	a, d
2981  0C69  47          	ld	b, a
2982  0C6A  DD 7E 06    	ld	a,(ix+6)
2983  0C6D  16 00       	ld	d,0x00
2984  0C6F  91          	sub	a, c
2985  0C70  7A          	ld	a, d
2986  0C71  98          	sbc	a, b
2987  0C72  30 04       	jr	NC,l_game_check_time_00102
2988  0C74  2E 01       	ld	l,0x01
2989  0C76  18 02       	jr	l_game_check_time_00104
2990  0C78              l_game_check_time_00102:
2991  0C78  2E 00       	ld	l,0x00
2992  0C7A              l_game_check_time_00104:
2993  0C7A  DD E1       	pop	ix
2994  0C7C  C9          	ret
2995  0C7D              	SECTION code_compiler
2996  0C7D              ;	---------------------------------
2997  0C7D              ; Function game_shoot_fire
2998  0C7D              ; ---------------------------------
2999  0C7D              _game_shoot_fire:
3000  0C7D  CD 00 00    	call	___sdcc_enter_ix
3001  0C80  21 F4 FF    	ld	hl, -12
3002  0C83  39          	add	hl, sp
3003  0C84  F9          	ld	sp, hl
3004  0C85  01 00 00    	ld	bc,_bullet_col
3005  0C88  DD 6E 04    	ld	l,(ix+4)
3006  0C8B  26 00       	ld	h,0x00
3007  0C8D  09          	add	hl,bc
3008  0C8E  DD 75 FE    	ld	(ix-2),l
3009  0C91  DD 74 FF    	ld	(ix-1),h
3010  0C94  4E          	ld	c, (hl)
3011  0C95  0C          	inc	c
3012  0C96  C2 94 0E    	jp	NZ,l_game_shoot_fire_00126
3013  0C99  21 00 00    	ld	hl,_bullet_count
3014  0C9C  34          	inc	(hl)
3015  0C9D  01 00 00    	ld	bc,_bullet_dir
3016  0CA0  DD 6E 04    	ld	l,(ix+4)
3017  0CA3  26 00       	ld	h,0x00
3018  0CA5  09          	add	hl,bc
3019  0CA6  DD 75 FC    	ld	(ix-4),l
3020  0CA9  DD 74 FD    	ld	(ix-3),h
3021  0CAC  36 00       	ld	(hl),0x00
3022  0CAE  3E 00       	ld	a, +((_bullet_lin0) & 0xFF)
3023  0CB0  DD 86 04    	add	a,(ix+4)
3024  0CB3  4F          	ld	c, a
3025  0CB4  3E 00       	ld	a, +((_bullet_lin0) / 256)
3026  0CB6  CE 00       	adc	a,0x00
3027  0CB8  47          	ld	b, a
3028  0CB9  11 00 00    	ld	de,_lin
3029  0CBC  DD 6E 04    	ld	l,(ix+4)
3030  0CBF  26 00       	ld	h,0x00
3031  0CC1  19          	add	hl,de
3032  0CC2  DD 75 FA    	ld	(ix-6),l
3033  0CC5  DD 74 FB    	ld	(ix-5),h
3034  0CC8  7E          	ld	a, (hl)
3035  0CC9  02          	ld	(bc), a
3036  0CCA  3E 00       	ld	a, +((_bullet_col0) & 0xFF)
3037  0CCC  DD 86 04    	add	a,(ix+4)
3038  0CCF  4F          	ld	c, a
3039  0CD0  3E 00       	ld	a, +((_bullet_col0) / 256)
3040  0CD2  CE 00       	adc	a,0x00
3041  0CD4  47          	ld	b, a
3042  0CD5  11 00 00    	ld	de,_col
3043  0CD8  DD 6E 04    	ld	l,(ix+4)
3044  0CDB  26 00       	ld	h,0x00
3045  0CDD  19          	add	hl,de
3046  0CDE  DD 75 F8    	ld	(ix-8),l
3047  0CE1  DD 74 F9    	ld	(ix-7),h
3048  0CE4  7E          	ld	a, (hl)
3049  0CE5  02          	ld	(bc), a
3050  0CE6  3E 00       	ld	a, +((_bullet_lin) & 0xFF)
3051  0CE8  DD 86 04    	add	a,(ix+4)
3052  0CEB  DD 77 F6    	ld	(ix-10),a
3053  0CEE  3E 00       	ld	a, +((_bullet_lin) / 256)
3054  0CF0  CE 00       	adc	a,0x00
3055  0CF2  DD 77 F7    	ld	(ix-9),a
3056  0CF5  DD 6E FA    	ld	l,(ix-6)
3057  0CF8  DD 66 FB    	ld	h,(ix-5)
3058  0CFB  4E          	ld	c, (hl)
3059  0CFC  DD 6E F6    	ld	l,(ix-10)
3060  0CFF  DD 66 F7    	ld	h,(ix-9)
3061  0D02  71          	ld	(hl), c
3062  0D03  3E 00       	ld	a, +((_bullet_frames) & 0xFF)
3063  0D05  DD 86 04    	add	a,(ix+4)
3064  0D08  DD 77 F4    	ld	(ix-12),a
3065  0D0B  3E 00       	ld	a, +((_bullet_frames) / 256)
3066  0D0D  CE 00       	adc	a,0x00
3067  0D0F  DD 77 F5    	ld	(ix-11),a
3068  0D12  E1          	pop	hl
3069  0D13  E5          	push	hl
3070  0D14  36 02       	ld	(hl),0x02
3071  0D16  DD 7E 04    	ld	a,(ix+4)
3072  0D19  D6 07       	sub	a,0x07
3073  0D1B  20 04       	jr	NZ,l_game_shoot_fire_00175
3074  0D1D  3E 01       	ld	a,0x01
3075  0D1F  18 01       	jr	l_game_shoot_fire_00176
3076  0D21              l_game_shoot_fire_00175:
3077  0D21  AF          	xor	a,a
3078  0D22              l_game_shoot_fire_00176:
3079  0D22  4F          	ld	c,a
3080  0D23  B7          	or	a, a
3081  0D24  28 13       	jr	Z,l_game_shoot_fire_00102
3082  0D26  3E 00       	ld	a, +((_bullet_max) & 0xFF)
3083  0D28  DD 86 04    	add	a,(ix+4)
3084  0D2B  5F          	ld	e, a
3085  0D2C  3E 00       	ld	a, +((_bullet_max) / 256)
3086  0D2E  CE 00       	adc	a,0x00
3087  0D30  57          	ld	d, a
3088  0D31  3A 00 00    	ld	a,(_player_lvl)
3089  0D34  C6 04       	add	a,0x04
3090  0D36  12          	ld	(de), a
3091  0D37  18 0D       	jr	l_game_shoot_fire_00103
3092  0D39              l_game_shoot_fire_00102:
3093  0D39  3E 00       	ld	a, +((_bullet_max) & 0xFF)
3094  0D3B  DD 86 04    	add	a,(ix+4)
3095  0D3E  5F          	ld	e, a
3096  0D3F  3E 00       	ld	a, +((_bullet_max) / 256)
3097  0D41  CE 00       	adc	a,0x00
3098  0D43  57          	ld	d, a
3099  0D44  AF          	xor	a, a
3100  0D45  12          	ld	(de), a
3101  0D46              l_game_shoot_fire_00103:
3102  0D46  DD 7E 05    	ld	a,(ix+5)
3103  0D49  D6 7C       	sub	a,0x7c
3104  0D4B  20 21       	jr	NZ,l_game_shoot_fire_00105
3105  0D4D  3E 00       	ld	a, +((_bullet_class) & 0xFF)
3106  0D4F  DD 86 04    	add	a,(ix+4)
3107  0D52  5F          	ld	e, a
3108  0D53  3E 00       	ld	a, +((_bullet_class) / 256)
3109  0D55  CE 00       	adc	a,0x00
3110  0D57  57          	ld	d, a
3111  0D58  3E 01       	ld	a,0x01
3112  0D5A  12          	ld	(de), a
3113  0D5B  3E 00       	ld	a, +((_bullet_max) & 0xFF)
3114  0D5D  DD 86 04    	add	a,(ix+4)
3115  0D60  5F          	ld	e, a
3116  0D61  3E 00       	ld	a, +((_bullet_max) / 256)
3117  0D63  CE 00       	adc	a,0x00
3118  0D65  57          	ld	d, a
3119  0D66  3A 00 00    	ld	a,(_game_world)
3120  0D69  87          	add	a, a
3121  0D6A  87          	add	a, a
3122  0D6B  C6 08       	add	a,0x08
3123  0D6D  12          	ld	(de), a
3124  0D6E              l_game_shoot_fire_00105:
3125  0D6E  DD 7E 05    	ld	a,(ix+5)
3126  0D71  D6 78       	sub	a,0x78
3127  0D73  20 21       	jr	NZ,l_game_shoot_fire_00110
3128  0D75  B1          	or	a,c
3129  0D76  28 10       	jr	Z,l_game_shoot_fire_00107
3130  0D78  3E 00       	ld	a, +((_bullet_class) & 0xFF)
3131  0D7A  DD 86 04    	add	a,(ix+4)
3132  0D7D  4F          	ld	c, a
3133  0D7E  3E 00       	ld	a, +((_bullet_class) / 256)
3134  0D80  CE 00       	adc	a,0x00
3135  0D82  47          	ld	b, a
3136  0D83  3E 01       	ld	a,0x01
3137  0D85  02          	ld	(bc), a
3138  0D86  18 0E       	jr	l_game_shoot_fire_00110
3139  0D88              l_game_shoot_fire_00107:
3140  0D88  3E 00       	ld	a, +((_bullet_class) & 0xFF)
3141  0D8A  DD 86 04    	add	a,(ix+4)
3142  0D8D  4F          	ld	c, a
3143  0D8E  3E 00       	ld	a, +((_bullet_class) / 256)
3144  0D90  CE 00       	adc	a,0x00
3145  0D92  47          	ld	b, a
3146  0D93  3E 02       	ld	a,0x02
3147  0D95  02          	ld	(bc), a
3148  0D96              l_game_shoot_fire_00110:
3149  0D96  DD 7E 05    	ld	a,(ix+5)
3150  0D99  D6 80       	sub	a,0x80
3151  0D9B  20 04       	jr	NZ,l_game_shoot_fire_00181
3152  0D9D  3E 01       	ld	a,0x01
3153  0D9F  18 01       	jr	l_game_shoot_fire_00182
3154  0DA1              l_game_shoot_fire_00181:
3155  0DA1  AF          	xor	a,a
3156  0DA2              l_game_shoot_fire_00182:
3157  0DA2  4F          	ld	c,a
3158  0DA3  B7          	or	a, a
3159  0DA4  28 31       	jr	Z,l_game_shoot_fire_00112
3160  0DA6  3E 00       	ld	a, +((_bullet_class) & 0xFF)
3161  0DA8  DD 86 04    	add	a,(ix+4)
3162  0DAB  5F          	ld	e, a
3163  0DAC  3E 00       	ld	a, +((_bullet_class) / 256)
3164  0DAE  CE 00       	adc	a,0x00
3165  0DB0  57          	ld	d, a
3166  0DB1  3E 04       	ld	a,0x04
3167  0DB3  12          	ld	(de), a
3168  0DB4  DD 6E FA    	ld	l,(ix-6)
3169  0DB7  DD 66 FB    	ld	h,(ix-5)
3170  0DBA  7E          	ld	a, (hl)
3171  0DBB  C6 FC       	add	a,0xfc
3172  0DBD  DD 6E F6    	ld	l,(ix-10)
3173  0DC0  DD 66 F7    	ld	h,(ix-9)
3174  0DC3  77          	ld	(hl), a
3175  0DC4  E1          	pop	hl
3176  0DC5  E5          	push	hl
3177  0DC6  36 04       	ld	(hl),0x04
3178  0DC8  3E 00       	ld	a, +((_bullet_vel) & 0xFF)
3179  0DCA  DD 86 04    	add	a,(ix+4)
3180  0DCD  5F          	ld	e, a
3181  0DCE  3E 00       	ld	a, +((_bullet_vel) / 256)
3182  0DD0  CE 00       	adc	a,0x00
3183  0DD2  57          	ld	d, a
3184  0DD3  3A 00 00    	ld	a,(_player_vel_y0)
3185  0DD6  12          	ld	(de), a
3186  0DD7              l_game_shoot_fire_00112:
3187  0DD7  3A 00 00    	ld	a,(_s_state)
3188  0DDA  E6 08       	and	a,0x08
3189  0DDC  47          	ld	b, a
3190  0DDD  3A 00 00    	ld	a,(_sprite)
3191  0DE0  D6 07       	sub	a,0x07
3192  0DE2  20 06       	jr	NZ,l_game_shoot_fire_00114
3193  0DE4  3A 07 00    	ld	a,(_state_a + 0x0007)
3194  0DE7  E6 08       	and	a,0x08
3195  0DE9  47          	ld	b, a
3196  0DEA              l_game_shoot_fire_00114:
3197  0DEA  DD 6E F8    	ld	l,(ix-8)
3198  0DED  DD 66 F9    	ld	h,(ix-7)
3199  0DF0  56          	ld	d, (hl)
3200  0DF1  DD 6E FA    	ld	l,(ix-6)
3201  0DF4  DD 66 FB    	ld	h,(ix-5)
3202  0DF7  7E          	ld	a, (hl)
3203  0DF8  C5          	push	bc
3204  0DF9  5F          	ld	e,a
3205  0DFA  D5          	push	de
3206  0DFB  CD 00 00    	call	_spr_calc_index
3207  0DFE  F1          	pop	af
3208  0DFF  EB          	ex	de,hl
3209  0E00  C1          	pop	bc
3210  0E01  ED 53 00 00 	ld	(_index1),de
3211  0E05  DD 6E F8    	ld	l,(ix-8)
3212  0E08  DD 66 F9    	ld	h,(ix-7)
3213  0E0B  5E          	ld	e, (hl)
3214  0E0C  78          	ld	a, b
3215  0E0D  B7          	or	a, a
3216  0E0E  28 4F       	jr	Z,l_game_shoot_fire_00123
3217  0E10  7B          	ld	a, e
3218  0E11  D6 01       	sub	a,0x01
3219  0E13  30 05       	jr	NC,l_game_shoot_fire_00116
3220  0E15  2E 01       	ld	l,0x01
3221  0E17  C3 96 0E    	jp	l_game_shoot_fire_00127
3222  0E1A              l_game_shoot_fire_00116:
3223  0E1A  DD 6E FE    	ld	l,(ix-2)
3224  0E1D  DD 66 FF    	ld	h,(ix-1)
3225  0E20  73          	ld	(hl), e
3226  0E21  79          	ld	a, c
3227  0E22  B7          	or	a, a
3228  0E23  20 13       	jr	NZ,l_game_shoot_fire_00118
3229  0E25  3E 00       	ld	a, +((_bullet_tile) & 0xFF)
3230  0E27  DD 86 04    	add	a,(ix+4)
3231  0E2A  4F          	ld	c, a
3232  0E2B  3E 00       	ld	a, +((_bullet_tile) / 256)
3233  0E2D  CE 00       	adc	a,0x00
3234  0E2F  47          	ld	b, a
3235  0E30  DD 7E 05    	ld	a,(ix+5)
3236  0E33  C6 02       	add	a,0x02
3237  0E35  02          	ld	(bc), a
3238  0E36  18 0F       	jr	l_game_shoot_fire_00119
3239  0E38              l_game_shoot_fire_00118:
3240  0E38  3E 00       	ld	a, +((_bullet_tile) & 0xFF)
3241  0E3A  DD 86 04    	add	a,(ix+4)
3242  0E3D  4F          	ld	c, a
3243  0E3E  3E 00       	ld	a, +((_bullet_tile) / 256)
3244  0E40  CE 00       	adc	a,0x00
3245  0E42  47          	ld	b, a
3246  0E43  DD 7E 05    	ld	a,(ix+5)
3247  0E46  02          	ld	(bc), a
3248  0E47              l_game_shoot_fire_00119:
3249  0E47  DD 6E FC    	ld	l,(ix-4)
3250  0E4A  DD 66 FD    	ld	h,(ix-3)
3251  0E4D  36 01       	ld	(hl),0x01
3252  0E4F  3E 00       	ld	a, +((_bullet_colint) & 0xFF)
3253  0E51  DD 86 04    	add	a,(ix+4)
3254  0E54  4F          	ld	c, a
3255  0E55  3E 00       	ld	a, +((_bullet_colint) / 256)
3256  0E57  CE 00       	adc	a,0x00
3257  0E59  47          	ld	b, a
3258  0E5A  3E 02       	ld	a,0x02
3259  0E5C  02          	ld	(bc), a
3260  0E5D  18 35       	jr	l_game_shoot_fire_00126
3261  0E5F              l_game_shoot_fire_00123:
3262  0E5F  3E 1D       	ld	a,0x1d
3263  0E61  93          	sub	a, e
3264  0E62  30 04       	jr	NC,l_game_shoot_fire_00121
3265  0E64  2E 01       	ld	l,0x01
3266  0E66  18 2E       	jr	l_game_shoot_fire_00127
3267  0E68              l_game_shoot_fire_00121:
3268  0E68  DD 6E FE    	ld	l,(ix-2)
3269  0E6B  DD 66 FF    	ld	h,(ix-1)
3270  0E6E  73          	ld	(hl), e
3271  0E6F  3E 00       	ld	a, +((_bullet_tile) & 0xFF)
3272  0E71  DD 86 04    	add	a,(ix+4)
3273  0E74  4F          	ld	c, a
3274  0E75  3E 00       	ld	a, +((_bullet_tile) / 256)
3275  0E77  CE 00       	adc	a,0x00
3276  0E79  47          	ld	b, a
3277  0E7A  DD 7E 05    	ld	a,(ix+5)
3278  0E7D  02          	ld	(bc), a
3279  0E7E  DD 6E FC    	ld	l,(ix-4)
3280  0E81  DD 66 FD    	ld	h,(ix-3)
3281  0E84  36 FF       	ld	(hl),0xff
3282  0E86  3E 00       	ld	a, +((_bullet_colint) & 0xFF)
3283  0E88  DD 86 04    	add	a,(ix+4)
3284  0E8B  4F          	ld	c, a
3285  0E8C  3E 00       	ld	a, +((_bullet_colint) / 256)
3286  0E8E  CE 00       	adc	a,0x00
3287  0E90  47          	ld	b, a
3288  0E91  3E FF       	ld	a,0xff
3289  0E93  02          	ld	(bc), a
3290  0E94              l_game_shoot_fire_00126:
3291  0E94  2E 00       	ld	l,0x00
3292  0E96              l_game_shoot_fire_00127:
3293  0E96  DD F9       	ld	sp, ix
3294  0E98  DD E1       	pop	ix
3295  0E9A  C9          	ret
3296  0E9B              	SECTION code_compiler
3297  0E9B              ;	---------------------------------
3298  0E9B              ; Function game_shoot_fire_boss
3299  0E9B              ; ---------------------------------
3300  0E9B              _game_shoot_fire_boss:
3301  0E9B  CD 00 00    	call	___sdcc_enter_ix
3302  0E9E  F5          	push	af
3303  0E9F  F5          	push	af
3304  0EA0  F5          	push	af
3305  0EA1  3B          	dec	sp
3306  0EA2  3A 07 00    	ld	a,(_col + 0x0007)
3307  0EA5  4F          	ld	c,a
3308  0EA6  21 00 00    	ld	hl,_boss_col
3309  0EA9  96          	sub	a, (hl)
3310  0EAA  30 04       	jr	NC,l_game_shoot_fire_boss_00102
3311  0EAC  DD 36 F9 01 	ld	(ix-7),0x01
3312  0EB0              l_game_shoot_fire_boss_00102:
3313  0EB0  3A 00 00    	ld	a,(_boss_col)
3314  0EB3  91          	sub	a, c
3315  0EB4  30 04       	jr	NC,l_game_shoot_fire_boss_00131
3316  0EB6  DD 36 F9 00 	ld	(ix-7),0x00
3317  0EBA              l_game_shoot_fire_boss_00131:
3318  0EBA  0E 00       	ld	c,0x00
3319  0EBC              l_game_shoot_fire_boss_00107:
3320  0EBC  79          	ld	a, c
3321  0EBD  D6 07       	sub	a,0x07
3322  0EBF  30 0D       	jr	NC,l_game_shoot_fire_boss_00138
3323  0EC1  06 00       	ld	b,0x00
3324  0EC3  21 00 00    	ld	hl,_bullet_col
3325  0EC6  09          	add	hl, bc
3326  0EC7  46          	ld	b, (hl)
3327  0EC8  04          	inc	b
3328  0EC9  28 03       	jr	Z,l_game_shoot_fire_boss_00138
3329  0ECB  0C          	inc	c
3330  0ECC  18 EE       	jr	l_game_shoot_fire_boss_00107
3331  0ECE              l_game_shoot_fire_boss_00138:
3332  0ECE  79          	ld	a,c
3333  0ECF  5F          	ld	e,a
3334  0ED0  D6 07       	sub	a,0x07
3335  0ED2  20 04       	jr	NZ,l_game_shoot_fire_boss_00111
3336  0ED4  6F          	ld	l,a
3337  0ED5  C3 10 10    	jp	l_game_shoot_fire_boss_00125
3338  0ED8              l_game_shoot_fire_boss_00111:
3339  0ED8  21 00 00    	ld	hl,_bullet_count
3340  0EDB  34          	inc	(hl)
3341  0EDC  3E 00       	ld	a, +((_bullet_dir) & 0xFF)
3342  0EDE  81          	add	a, c
3343  0EDF  DD 77 FE    	ld	(ix-2),a
3344  0EE2  6F          	ld	l,a
3345  0EE3  3E 00       	ld	a,+((_bullet_dir) / 256)
3346  0EE5  CE 00       	adc	a,0x00
3347  0EE7  DD 77 FF    	ld	(ix-1),a
3348  0EEA  67          	ld	h,a
3349  0EEB  36 00       	ld	(hl),0x00
3350  0EED  3A 00 00    	ld	a,(_game_world)
3351  0EF0  3D          	dec	a
3352  0EF1  28 1B       	jr	Z,l_game_shoot_fire_boss_00116
3353  0EF3  3E 00       	ld	a, +((_bullet_lin0) & 0xFF)
3354  0EF5  81          	add	a, c
3355  0EF6  47          	ld	b, a
3356  0EF7  3E 00       	ld	a, +((_bullet_lin0) / 256)
3357  0EF9  CE 00       	adc	a,0x00
3358  0EFB  57          	ld	d, a
3359  0EFC  3A 00 00    	ld	a,(_boss_lin)
3360  0EFF  C6 10       	add	a,0x10
3361  0F01  68          	ld	l, b
3362  0F02  62          	ld	h, d
3363  0F03  77          	ld	(hl), a
3364  0F04  06 00       	ld	b,0x00
3365  0F06  21 00 00    	ld	hl,_bullet_class
3366  0F09  09          	add	hl, bc
3367  0F0A  36 02       	ld	(hl),0x02
3368  0F0C  18 27       	jr	l_game_shoot_fire_boss_00117
3369  0F0E              l_game_shoot_fire_boss_00116:
3370  0F0E  06 00       	ld	b,0x00
3371  0F10  21 00 00    	ld	hl,_bullet_class
3372  0F13  09          	add	hl, bc
3373  0F14  36 05       	ld	(hl),0x05
3374  0F16  3A 00 00    	ld	a,(_tmp0)
3375  0F19  B7          	or	a,a
3376  0F1A  20 0D       	jr	NZ,l_game_shoot_fire_boss_00113
3377  0F1C  47          	ld	b,a
3378  0F1D  21 00 00    	ld	hl,_bullet_lin0
3379  0F20  09          	add	hl,bc
3380  0F21  3A 00 00    	ld	a,(_boss_lin)
3381  0F24  C6 F8       	add	a,0xf8
3382  0F26  77          	ld	(hl),a
3383  0F27  18 0C       	jr	l_game_shoot_fire_boss_00117
3384  0F29              l_game_shoot_fire_boss_00113:
3385  0F29  06 00       	ld	b,0x00
3386  0F2B  21 00 00    	ld	hl,_bullet_lin0
3387  0F2E  09          	add	hl,bc
3388  0F2F  3A 00 00    	ld	a,(_boss_lin)
3389  0F32  C6 18       	add	a,0x18
3390  0F34  77          	ld	(hl),a
3391  0F35              l_game_shoot_fire_boss_00117:
3392  0F35  3E 00       	ld	a, +((_bullet_col0) & 0xFF)
3393  0F37  83          	add	a, e
3394  0F38  DD 77 FC    	ld	(ix-4),a
3395  0F3B  6F          	ld	l,a
3396  0F3C  3E 00       	ld	a,+((_bullet_col0) / 256)
3397  0F3E  CE 00       	adc	a,0x00
3398  0F40  DD 77 FD    	ld	(ix-3),a
3399  0F43  67          	ld	h,a
3400  0F44  3A 00 00    	ld	a,(_boss_col)
3401  0F47  77          	ld	(hl),a
3402  0F48  3E 00       	ld	a, +((_bullet_col) & 0xFF)
3403  0F4A  83          	add	a, e
3404  0F4B  DD 77 FA    	ld	(ix-6),a
3405  0F4E  6F          	ld	l,a
3406  0F4F  3E 00       	ld	a,+((_bullet_col) / 256)
3407  0F51  CE 00       	adc	a,0x00
3408  0F53  DD 77 FB    	ld	(ix-5),a
3409  0F56  67          	ld	h,a
3410  0F57  3A 00 00    	ld	a,(_boss_col)
3411  0F5A  77          	ld	(hl),a
3412  0F5B  3E 00       	ld	a, +((_bullet_lin) & 0xFF)
3413  0F5D  83          	add	a, e
3414  0F5E  4F          	ld	c, a
3415  0F5F  3E 00       	ld	a, +((_bullet_lin) / 256)
3416  0F61  CE 00       	adc	a,0x00
3417  0F63  47          	ld	b, a
3418  0F64  16 00       	ld	d,0x00
3419  0F66  21 00 00    	ld	hl,_bullet_lin0
3420  0F69  19          	add	hl, de
3421  0F6A  7E          	ld	a, (hl)
3422  0F6B  02          	ld	(bc), a
3423  0F6C  16 00       	ld	d,0x00
3424  0F6E  21 00 00    	ld	hl,_bullet_frames
3425  0F71  19          	add	hl, de
3426  0F72  36 02       	ld	(hl),0x02
3427  0F74  16 00       	ld	d,0x00
3428  0F76  21 00 00    	ld	hl,_bullet_max
3429  0F79  19          	add	hl, de
3430  0F7A  36 08       	ld	(hl),0x08
3431  0F7C  3A 00 00    	ld	a,(_boss_col)
3432  0F7F  D5          	push	de
3433  0F80  F5          	push	af
3434  0F81  33          	inc	sp
3435  0F82  3A 00 00    	ld	a,(_boss_lin)
3436  0F85  F5          	push	af
3437  0F86  33          	inc	sp
3438  0F87  CD 00 00    	call	_spr_calc_index
3439  0F8A  F1          	pop	af
3440  0F8B  D1          	pop	de
3441  0F8C  22 00 00    	ld	(_index1),hl
3442  0F8F  DD 7E F9    	ld	a,(ix-7)
3443  0F92  B7          	or	a, a
3444  0F93  28 36       	jr	Z,l_game_shoot_fire_boss_00123
3445  0F95  3A 00 00    	ld	a,(_boss_col)
3446  0F98  D6 01       	sub	a,0x01
3447  0F9A  30 04       	jr	NC,l_game_shoot_fire_boss_00119
3448  0F9C  2E 01       	ld	l,0x01
3449  0F9E  18 70       	jr	l_game_shoot_fire_boss_00125
3450  0FA0              l_game_shoot_fire_boss_00119:
3451  0FA0  3E 00       	ld	a, +((_bullet_tile) & 0xFF)
3452  0FA2  83          	add	a, e
3453  0FA3  4F          	ld	c, a
3454  0FA4  3E 00       	ld	a, +((_bullet_tile) / 256)
3455  0FA6  CE 00       	adc	a,0x00
3456  0FA8  47          	ld	b, a
3457  0FA9  DD 7E 04    	ld	a,(ix+4)
3458  0FAC  C6 02       	add	a,0x02
3459  0FAE  02          	ld	(bc), a
3460  0FAF  DD 6E FE    	ld	l,(ix-2)
3461  0FB2  DD 66 FF    	ld	h,(ix-1)
3462  0FB5  36 01       	ld	(hl),0x01
3463  0FB7  16 00       	ld	d,0x00
3464  0FB9  21 00 00    	ld	hl,_bullet_colint
3465  0FBC  19          	add	hl, de
3466  0FBD  36 02       	ld	(hl),0x02
3467  0FBF  DD 6E FA    	ld	l,(ix-6)
3468  0FC2  DD 66 FB    	ld	h,(ix-5)
3469  0FC5  3A 00 00    	ld	a,(_boss_col)
3470  0FC8  77          	ld	(hl),a
3471  0FC9  18 35       	jr	l_game_shoot_fire_boss_00124
3472  0FCB              l_game_shoot_fire_boss_00123:
3473  0FCB  3E 1D       	ld	a,0x1d
3474  0FCD  21 00 00    	ld	hl,_boss_col
3475  0FD0  96          	sub	a, (hl)
3476  0FD1  30 04       	jr	NC,l_game_shoot_fire_boss_00121
3477  0FD3  2E 01       	ld	l,0x01
3478  0FD5  18 39       	jr	l_game_shoot_fire_boss_00125
3479  0FD7              l_game_shoot_fire_boss_00121:
3480  0FD7  3E 00       	ld	a, +((_bullet_tile) & 0xFF)
3481  0FD9  83          	add	a, e
3482  0FDA  4F          	ld	c, a
3483  0FDB  3E 00       	ld	a, +((_bullet_tile) / 256)
3484  0FDD  CE 00       	adc	a,0x00
3485  0FDF  47          	ld	b, a
3486  0FE0  DD 7E 04    	ld	a,(ix+4)
3487  0FE3  02          	ld	(bc), a
3488  0FE4  DD 6E FE    	ld	l,(ix-2)
3489  0FE7  DD 66 FF    	ld	h,(ix-1)
3490  0FEA  36 FF       	ld	(hl),0xff
3491  0FEC  16 00       	ld	d,0x00
3492  0FEE  21 00 00    	ld	hl,_bullet_colint
3493  0FF1  19          	add	hl, de
3494  0FF2  36 FF       	ld	(hl),0xff
3495  0FF4  3A 00 00    	ld	a,(_boss_col)
3496  0FF7  C6 06       	add	a,0x06
3497  0FF9  DD 6E FA    	ld	l,(ix-6)
3498  0FFC  DD 66 FB    	ld	h,(ix-5)
3499  0FFF  77          	ld	(hl), a
3500  1000              l_game_shoot_fire_boss_00124:
3501  1000  DD 6E FA    	ld	l,(ix-6)
3502  1003  DD 66 FB    	ld	h,(ix-5)
3503  1006  4E          	ld	c, (hl)
3504  1007  DD 6E FC    	ld	l,(ix-4)
3505  100A  DD 66 FD    	ld	h,(ix-3)
3506  100D  71          	ld	(hl), c
3507  100E  2E 00       	ld	l,0x00
3508  1010              l_game_shoot_fire_boss_00125:
3509  1010  DD F9       	ld	sp, ix
3510  1012  DD E1       	pop	ix
3511  1014  C9          	ret
3512  1015              	SECTION code_compiler
3513  1015              ;	---------------------------------
3514  1015              ; Function game_obj_set
3515  1015              ; ---------------------------------
3516  1015              _game_obj_set:
3517  1015  3A 00 00    	ld	a,(_scr_curr)
3518  1018  EB          	ex	de,hl
3519  1019  D6 08       	sub	a,0x08
3520  101B  30 19       	jr	NC,l_game_obj_set_00102
3521  101D  21 00 00    	ld	hl,_scr_obj0
3522  1020  19          	add	hl,de
3523  1021  5E          	ld	e,(hl)
3524  1022  3A 00 00    	ld	a,(_scr_curr)
3525  1025  3C          	inc	a
3526  1026  16 01       	ld	d,0x01
3527  1028  4D          	ld	c,l
3528  1029  44          	ld	b,h
3529  102A  18 02       	jr	l_game_obj_set_00111
3530  102C              l_game_obj_set_00110:
3531  102C  CB 22       	sla	d
3532  102E              l_game_obj_set_00111:
3533  102E  3D          	dec	a
3534  102F  20 FB       	jr	NZ,l_game_obj_set_00110
3535  1031  7B          	ld	a, e
3536  1032  B2          	or	a, d
3537  1033  02          	ld	(bc), a
3538  1034  18 17       	jr	l_game_obj_set_00104
3539  1036              l_game_obj_set_00102:
3540  1036  3A 00 00    	ld	a,(_scr_curr)
3541  1039  C6 F8       	add	a,0xf8
3542  103B  47          	ld	b, a
3543  103C  21 00 00    	ld	hl,_scr_obj1
3544  103F  19          	add	hl, de
3545  1040  4E          	ld	c, (hl)
3546  1041  1E 01       	ld	e,0x01
3547  1043  04          	inc	b
3548  1044  18 02       	jr	l_game_obj_set_00113
3549  1046              l_game_obj_set_00112:
3550  1046  CB 23       	sla	e
3551  1048              l_game_obj_set_00113:
3552  1048  10 FC       	djnz	l_game_obj_set_00112
3553  104A  79          	ld	a, c
3554  104B  B3          	or	a, e
3555  104C  77          	ld	(hl), a
3556  104D              l_game_obj_set_00104:
3557  104D  C9          	ret
3558  104E              	SECTION code_compiler
3559  104E              ;	---------------------------------
3560  104E              ; Function game_obj_chk
3561  104E              ; ---------------------------------
3562  104E              _game_obj_chk:
3563  104E  3A 00 00    	ld	a,(_scr_curr)
3564  1051  EB          	ex	de,hl
3565  1052  D6 08       	sub	a,0x08
3566  1054  30 17       	jr	NC,l_game_obj_chk_00102
3567  1056  21 00 00    	ld	hl,_scr_obj0
3568  1059  19          	add	hl, de
3569  105A  4E          	ld	c, (hl)
3570  105B  21 00 00    	ld	hl,_scr_curr
3571  105E  46          	ld	b, (hl)
3572  105F  1E 01       	ld	e,0x01
3573  1061  04          	inc	b
3574  1062  18 02       	jr	l_game_obj_chk_00111
3575  1064              l_game_obj_chk_00110:
3576  1064  CB 23       	sla	e
3577  1066              l_game_obj_chk_00111:
3578  1066  10 FC       	djnz	l_game_obj_chk_00110
3579  1068  79          	ld	a, c
3580  1069  A3          	and	a, e
3581  106A  6F          	ld	l, a
3582  106B  18 17       	jr	l_game_obj_chk_00104
3583  106D              l_game_obj_chk_00102:
3584  106D  3A 00 00    	ld	a,(_scr_curr)
3585  1070  C6 F8       	add	a,0xf8
3586  1072  47          	ld	b, a
3587  1073  21 00 00    	ld	hl,_scr_obj1
3588  1076  19          	add	hl, de
3589  1077  4E          	ld	c, (hl)
3590  1078  1E 01       	ld	e,0x01
3591  107A  04          	inc	b
3592  107B  18 02       	jr	l_game_obj_chk_00113
3593  107D              l_game_obj_chk_00112:
3594  107D  CB 23       	sla	e
3595  107F              l_game_obj_chk_00113:
3596  107F  10 FC       	djnz	l_game_obj_chk_00112
3597  1081  79          	ld	a, c
3598  1082  A3          	and	a, e
3599  1083  6F          	ld	l, a
3600  1084              l_game_obj_chk_00104:
3601  1084  C9          	ret
3602  1085              	SECTION code_compiler
3603  1085              ;	---------------------------------
3604  1085              ; Function game_obj_clear
3605  1085              ; ---------------------------------
3606  1085              _game_obj_clear:
3607  1085  21 00 00    	ld	hl,_tmp
3608  1088  36 00       	ld	(hl),0x00
3609  108A              l_game_obj_clear_00105:
3610  108A  2A 00 00    	ld	hl,(_tmp)
3611  108D  26 00       	ld	h,0x00
3612  108F  01 00 00    	ld	bc,_scr_obj0
3613  1092  09          	add	hl,bc
3614  1093  AF          	xor	a,a
3615  1094  77          	ld	(hl),a
3616  1095  2A 00 00    	ld	hl,(_tmp)
3617  1098  26 00       	ld	h,0x00
3618  109A  01 00 00    	ld	bc,_scr_obj1
3619  109D  09          	add	hl,bc
3620  109E  AF          	xor	a,a
3621  109F  77          	ld	(hl),a
3622  10A0  21 00 00    	ld	hl,_tmp
3623  10A3  7E          	ld	a,(hl)
3624  10A4  3C          	inc	a
3625  10A5  77          	ld	(hl),a
3626  10A6  D6 A0       	sub	a,0xa0
3627  10A8  38 E0       	jr	C,l_game_obj_clear_00105
3628  10AA  3A 00 00    	ld	a,(_game_inmune)
3629  10AD  B7          	or	a, a
3630  10AE  28 07       	jr	Z,l_game_obj_clear_00103
3631  10B0  21 00 00    	ld	hl,_tmp
3632  10B3  36 01       	ld	(hl),0x01
3633  10B5  18 05       	jr	l_game_obj_clear_00104
3634  10B7              l_game_obj_clear_00103:
3635  10B7  21 00 00    	ld	hl,_tmp
3636  10BA  36 00       	ld	(hl),0x00
3637  10BC              l_game_obj_clear_00104:
3638  10BC  3A 00 00    	ld	a,(_tmp)
3639  10BF  32 00 00    	ld	(_player_keys),a
3640  10C2  32 01 00    	ld	((_player_keys + 0x0001)),a
3641  10C5  3A 00 00    	ld	a,(_tmp)
3642  10C8  32 02 00    	ld	((_player_keys + 0x0002)),a
3643  10CB  32 03 00    	ld	((_player_keys + 0x0003)),a
3644  10CE  C9          	ret
3645  10CF              	SECTION code_compiler
3646  10CF              ;	---------------------------------
3647  10CF              ; Function game_boss_clear
3648  10CF              ; ---------------------------------
3649  10CF              _game_boss_clear:
3650  10CF  CD 00 00    	call	___sdcc_enter_ix
3651  10D2  21 00 00    	ld	hl,0x0000
3652  10D5  E5          	push	hl
3653  10D6              l_game_boss_clear_00104:
3654  10D6  3E 00       	ld	a, +((_scr_map) & 0xFF)
3655  10D8  DD 86 FE    	add	a,(ix-2)
3656  10DB  4F          	ld	c, a
3657  10DC  3E 00       	ld	a, +((_scr_map) / 256)
3658  10DE  DD 8E FF    	adc	a,(ix-1)
3659  10E1  47          	ld	b, a
3660  10E2  0A          	ld	a, (bc)
3661  10E3  D6 37       	sub	a,0x37
3662  10E5  20 09       	jr	NZ,l_game_boss_clear_00105
3663  10E7  AF          	xor	a, a
3664  10E8  02          	ld	(bc), a
3665  10E9  21 00 00    	ld	hl,0x0000
3666  10EC  39          	add	hl, sp
3667  10ED  CD 00 00    	call	_spr_draw_index
3668  10F0              l_game_boss_clear_00105:
3669  10F0  DD 34 FE    	inc	(ix-2)
3670  10F3  20 03       	jr	NZ,l_game_boss_clear_00118
3671  10F5  DD 34 FF    	inc	(ix-1)
3672  10F8              l_game_boss_clear_00118:
3673  10F8  DD 7E FE    	ld	a,(ix-2)
3674  10FB  D6 A0       	sub	a,0xa0
3675  10FD  DD 7E FF    	ld	a,(ix-1)
3676  1100  DE 00       	sbc	a,0x00
3677  1102  38 D2       	jr	C,l_game_boss_clear_00104
3678  1104  F1          	pop	af
3679  1105  DD E1       	pop	ix
3680  1107  C9          	ret
3681  1108              	SECTION code_compiler
3682  1108              ;	---------------------------------
3683  1108              ; Function game_rotate_attrib
3684  1108              ; ---------------------------------
3685  1108              _game_rotate_attrib:
3686  1108  01 03 00    	ld	bc,_attrib_hl + 3
3687  110B  0A          	ld	a, (bc)
3688  110C  32 00 00    	ld	(_tmp_uc),a
3689  110F  11 02 00    	ld	de,_attrib_hl + 2
3690  1112  1A          	ld	a, (de)
3691  1113  02          	ld	(bc), a
3692  1114  01 01 00    	ld	bc,_attrib_hl + 1
3693  1117  0A          	ld	a, (bc)
3694  1118  12          	ld	(de), a
3695  1119  3A 00 00    	ld	a,(_attrib_hl)
3696  111C  02          	ld	(bc), a
3697  111D  3A 00 00    	ld	a,(_tmp_uc)
3698  1120  32 00 00    	ld	(_attrib_hl),a
3699  1123  C9          	ret
3700  1124              	SECTION code_compiler
3701  1124              ;	---------------------------------
3702  1124              ; Function game_rotate_attrib_osd
3703  1124              ; ---------------------------------
3704  1124              _game_rotate_attrib_osd:
3705  1124  01 03 00    	ld	bc,_attrib_osd + 3
3706  1127  0A          	ld	a, (bc)
3707  1128  32 00 00    	ld	(_tmp_uc),a
3708  112B  11 02 00    	ld	de,_attrib_osd + 2
3709  112E  1A          	ld	a, (de)
3710  112F  02          	ld	(bc), a
3711  1130  01 01 00    	ld	bc,_attrib_osd + 1
3712  1133  0A          	ld	a, (bc)
3713  1134  12          	ld	(de), a
3714  1135  3A 00 00    	ld	a,(_attrib_osd)
3715  1138  02          	ld	(bc), a
3716  1139  3A 00 00    	ld	a,(_tmp_uc)
3717  113C  32 00 00    	ld	(_attrib_osd),a
3718  113F  C9          	ret
3719  1140              	SECTION code_compiler
3720  1140              ;	---------------------------------
3721  1140              ; Function game_attribs
3722  1140              ; ---------------------------------
3723  1140              _game_attribs:
3724  1140  01 00 00    	ld	bc,_attrib+0
3725  1143  21 00 00    	ld	hl,_map_paper
3726  1146  7E          	ld	a, (hl)
3727  1147  F6 47       	or	a,0x47
3728  1149  02          	ld	(bc), a
3729  114A  59          	ld	e, c
3730  114B  50          	ld	d, b
3731  114C  13          	inc	de
3732  114D  7E          	ld	a, (hl)
3733  114E  F6 45       	or	a,0x45
3734  1150  12          	ld	(de), a
3735  1151  7E          	ld	a, (hl)
3736  1152  F6 45       	or	a,0x45
3737  1154  32 02 00    	ld	((_attrib + 0x0002)),a
3738  1157  03          	inc	bc
3739  1158  03          	inc	bc
3740  1159  03          	inc	bc
3741  115A  21 00 00    	ld	hl,_map_paper
3742  115D  7E          	ld	a, (hl)
3743  115E  F6 41       	or	a,0x41
3744  1160  02          	ld	(bc), a
3745  1161  01 00 00    	ld	bc,_attrib_hl+0
3746  1164  7E          	ld	a, (hl)
3747  1165  F6 41       	or	a,0x41
3748  1167  02          	ld	(bc), a
3749  1168  59          	ld	e, c
3750  1169  50          	ld	d, b
3751  116A  13          	inc	de
3752  116B  7E          	ld	a, (hl)
3753  116C  F6 41       	or	a,0x41
3754  116E  12          	ld	(de), a
3755  116F  7E          	ld	a, (hl)
3756  1170  F6 43       	or	a,0x43
3757  1172  32 02 00    	ld	((_attrib_hl + 0x0002)),a
3758  1175  03          	inc	bc
3759  1176  03          	inc	bc
3760  1177  03          	inc	bc
3761  1178  21 00 00    	ld	hl,_map_paper
3762  117B  7E          	ld	a, (hl)
3763  117C  F6 45       	or	a,0x45
3764  117E  02          	ld	(bc), a
3765  117F  01 00 00    	ld	bc,_attrib_osd+0
3766  1182  7E          	ld	a, (hl)
3767  1183  F6 45       	or	a,0x45
3768  1185  02          	ld	(bc), a
3769  1186  59          	ld	e, c
3770  1187  50          	ld	d, b
3771  1188  13          	inc	de
3772  1189  7E          	ld	a, (hl)
3773  118A  F6 47       	or	a,0x47
3774  118C  12          	ld	(de), a
3775  118D  7E          	ld	a, (hl)
3776  118E  F6 47       	or	a,0x47
3777  1190  32 02 00    	ld	((_attrib_osd + 0x0002)),a
3778  1193  03          	inc	bc
3779  1194  03          	inc	bc
3780  1195  03          	inc	bc
3781  1196  3A 00 00    	ld	a,(_map_paper)
3782  1199  F6 45       	or	a,0x45
3783  119B  02          	ld	(bc), a
3784  119C  C9          	ret
3785  119D              	SECTION code_compiler
3786  119D              ;	---------------------------------
3787  119D              ; Function game_match_back
3788  119D              ; ---------------------------------
3789  119D              _game_match_back:
3790  119D  3E 01       	ld	a,0x01
3791  119F  BD          	cp	a,l
3792  11A0  3E 00       	ld	a,0x00
3793  11A2  9C          	sbc	a,h
3794  11A3  30 3F       	jr	NC,l_game_match_back_00111
3795  11A5  7D          	ld	a,l
3796  11A6  E6 0F       	and	a,0x0f
3797  11A8  28 3A       	jr	Z,l_game_match_back_00111
3798  11AA  5D          	ld	e,l
3799  11AB  54          	ld	d,h
3800  11AC  4D          	ld	c,l
3801  11AD  44          	ld	b,h
3802  11AE  1B          	dec	de
3803  11AF  21 00 00    	ld	hl,_scr_map
3804  11B2  19          	add	hl, de
3805  11B3  5E          	ld	e, (hl)
3806  11B4  03          	inc	bc
3807  11B5  21 00 00    	ld	hl,_scr_map
3808  11B8  09          	add	hl, bc
3809  11B9  4E          	ld	c, (hl)
3810  11BA  7B          	ld	a, e
3811  11BB  D6 1D       	sub	a,0x1d
3812  11BD  28 05       	jr	Z,l_game_match_back_00101
3813  11BF  79          	ld	a, c
3814  11C0  D6 1D       	sub	a,0x1d
3815  11C2  20 04       	jr	NZ,l_game_match_back_00102
3816  11C4              l_game_match_back_00101:
3817  11C4  2E 1D       	ld	l,0x1d
3818  11C6  18 1E       	jr	l_game_match_back_00113
3819  11C8              l_game_match_back_00102:
3820  11C8  7B          	ld	a, e
3821  11C9  D6 18       	sub	a,0x18
3822  11CB  28 05       	jr	Z,l_game_match_back_00104
3823  11CD  79          	ld	a, c
3824  11CE  D6 18       	sub	a,0x18
3825  11D0  20 04       	jr	NZ,l_game_match_back_00105
3826  11D2              l_game_match_back_00104:
3827  11D2  2E 18       	ld	l,0x18
3828  11D4  18 10       	jr	l_game_match_back_00113
3829  11D6              l_game_match_back_00105:
3830  11D6  7B          	ld	a, e
3831  11D7  D6 0D       	sub	a,0x0d
3832  11D9  28 05       	jr	Z,l_game_match_back_00107
3833  11DB  79          	ld	a, c
3834  11DC  D6 0D       	sub	a,0x0d
3835  11DE  20 04       	jr	NZ,l_game_match_back_00111
3836  11E0              l_game_match_back_00107:
3837  11E0  2E 0D       	ld	l,0x0d
3838  11E2  18 02       	jr	l_game_match_back_00113
3839  11E4              l_game_match_back_00111:
3840  11E4  2E 00       	ld	l,0x00
3841  11E6              l_game_match_back_00113:
3842  11E6  C9          	ret
3843  11E7              	SECTION code_compiler
3844  11E7              ;	---------------------------------
3845  11E7              ; Function menu_main
3846  11E7              ; ---------------------------------
3847  11E7              _menu_main:
3848  11E7  CD 00 00    	call	___sdcc_enter_ix
3849  11EA  F5          	push	af
3850  11EB  DD 36 FE 01 	ld	(ix-2),0x01
3851  11EF  21 00 00    	ld	hl,_map_paper
3852  11F2  36 00       	ld	(hl),0x00
3853  11F4  DD 36 FF 01 	ld	(ix-1),0x01
3854  11F8  21 0A 16    	ld	hl,0x160a
3855  11FB  E5          	push	hl
3856  11FC  3E 07       	ld	a,0x07
3857  11FE  F5          	push	af
3858  11FF  33          	inc	sp
3859  1200  CD FD 12    	call	_menu_main_print
3860  1203  F1          	pop	af
3861  1204  33          	inc	sp
3862  1205              l_menu_main_00115:
3863  1205  DD 7E FE    	ld	a,(ix-2)
3864  1208  B7          	or	a, a
3865  1209  CA F9 12    	jp	Z, l_menu_main_00118
3866  120C  21 28 00    	ld	hl,0x0028
3867  120F  CD 00 00    	call	_z80_delay_ms_fastcall
3868  1212  CD 00 00    	call	_in_inkey
3869  1215  E5          	push	hl
3870  1216  CD 08 11    	call	_game_rotate_attrib
3871  1219  C1          	pop	bc
3872  121A  DD 7E FF    	ld	a,(ix-1)
3873  121D  C6 06       	add	a,0x06
3874  121F  57          	ld	d,a
3875  1220  07          	rlca
3876  1221  07          	rlca
3877  1222  07          	rlca
3878  1223  E6 F8       	and	a,0xf8
3879  1225  C6 08       	add	a,0x08
3880  1227  47          	ld	b, a
3881  1228  C5          	push	bc
3882  1229  D5          	push	de
3883  122A  C5          	push	bc
3884  122B  33          	inc	sp
3885  122C  21 0B 16    	ld	hl,0x160b
3886  122F  E5          	push	hl
3887  1230  21 00 00    	ld	hl,_attrib_hl
3888  1233  E5          	push	hl
3889  1234  CD 06 0B    	call	_game_paint_attrib
3890  1237  F1          	pop	af
3891  1238  F1          	pop	af
3892  1239  33          	inc	sp
3893  123A  D1          	pop	de
3894  123B  C1          	pop	bc
3895  123C  79          	ld	a, c
3896  123D  C6 D0       	add	a,0xd0
3897  123F  4F          	ld	c, a
3898  1240  3E 06       	ld	a,0x06
3899  1242  91          	sub	a, c
3900  1243  DA DC 12    	jp	C, l_menu_main_00111
3901  1246  D5          	push	de
3902  1247  59          	ld	e, c
3903  1248  16 00       	ld	d,0x00
3904  124A  21 51 12    	ld	hl,l_menu_main_00144
3905  124D  19          	add	hl, de
3906  124E  19          	add	hl, de
3907  124F  D1          	pop	de
3908  1250  E9          	jp	(hl)
3909  1251              l_menu_main_00144:
3910  1251  18 72       	jr	l_menu_main_00110
3911  1253  18 0A       	jr	l_menu_main_00101
3912  1255  18 14       	jr	l_menu_main_00102
3913  1257  18 1E       	jr	l_menu_main_00103
3914  1259  18 28       	jr	l_menu_main_00104
3915  125B  18 32       	jr	l_menu_main_00105
3916  125D  18 41       	jr	l_menu_main_00106
3917  125F              l_menu_main_00101:
3918  125F  21 00 00    	ld	hl,_in_stick_sinclair1
3919  1262  22 00 00    	ld	(_joyfunc1),hl
3920  1265  DD 36 FF 01 	ld	(ix-1),0x01
3921  1269  18 71       	jr	l_menu_main_00111
3922  126B              l_menu_main_00102:
3923  126B  21 00 00    	ld	hl,_in_stick_keyboard
3924  126E  22 00 00    	ld	(_joyfunc1),hl
3925  1271  DD 36 FF 02 	ld	(ix-1),0x02
3926  1275  18 65       	jr	l_menu_main_00111
3927  1277              l_menu_main_00103:
3928  1277  21 00 00    	ld	hl,_in_stick_kempston
3929  127A  22 00 00    	ld	(_joyfunc1),hl
3930  127D  DD 36 FF 03 	ld	(ix-1),0x03
3931  1281  18 59       	jr	l_menu_main_00111
3932  1283              l_menu_main_00104:
3933  1283  21 00 00    	ld	hl,_in_stick_cursor
3934  1286  22 00 00    	ld	(_joyfunc1),hl
3935  1289  DD 36 FF 04 	ld	(ix-1),0x04
3936  128D  18 4D       	jr	l_menu_main_00111
3937  128F              l_menu_main_00105:
3938  128F  C5          	push	bc
3939  1290  CD 23 15    	call	_menu_redefine
3940  1293  C1          	pop	bc
3941  1294  21 00 00    	ld	hl,_in_stick_keyboard
3942  1297  22 00 00    	ld	(_joyfunc1),hl
3943  129A  DD 36 FF 02 	ld	(ix-1),0x02
3944  129E  18 3C       	jr	l_menu_main_00111
3945  12A0              l_menu_main_00106:
3946  12A0  21 00 00    	ld	hl,_game_2buttons
3947  12A3  7E          	ld	a, (hl)
3948  12A4  B7          	or	a, a
3949  12A5  28 04       	jr	Z,l_menu_main_00108
3950  12A7  36 00       	ld	(hl),0x00
3951  12A9  18 05       	jr	l_menu_main_00109
3952  12AB              l_menu_main_00108:
3953  12AB  21 00 00    	ld	hl,_game_2buttons
3954  12AE  36 01       	ld	(hl),0x01
3955  12B0              l_menu_main_00109:
3956  12B0  C5          	push	bc
3957  12B1  21 0A 16    	ld	hl,0x160a
3958  12B4  E5          	push	hl
3959  12B5  D5          	push	de
3960  12B6  33          	inc	sp
3961  12B7  CD FD 12    	call	_menu_main_print
3962  12BA  F1          	pop	af
3963  12BB  33          	inc	sp
3964  12BC  21 28 00    	ld	hl,0x0028
3965  12BF  CD 00 00    	call	_z80_delay_ms_fastcall
3966  12C2  C1          	pop	bc
3967  12C3  18 17       	jr	l_menu_main_00111
3968  12C5              l_menu_main_00110:
3969  12C5  76          	halt
3970  12C6  C5          	push	bc
3971  12C7  2E 00       	ld	l,0x00
3972  12C9  CD 00 00    	call	_zx_cls_fastcall
3973  12CC  C1          	pop	bc
3974  12CD  21 00 00    	ld	hl,_ay_fx_06_explosion1
3975  12D0  E5          	push	hl
3976  12D1  21 01 06    	ld	hl,0x0601
3977  12D4  E5          	push	hl
3978  12D5  CD 00 00    	call	_ay_song_play
3979  12D8  DD 36 FE 00 	ld	(ix-2),0x00
3980  12DC              l_menu_main_00111:
3981  12DC  79          	ld	a,c
3982  12DD  B7          	or	a, a
3983  12DE  CA 05 12    	jp	Z,l_menu_main_00115
3984  12E1  D6 05       	sub	a,0x05
3985  12E3  D2 05 12    	jp	NC, l_menu_main_00115
3986  12E6  C5          	push	bc
3987  12E7  33          	inc	sp
3988  12E8  21 0A 16    	ld	hl,0x160a
3989  12EB  E5          	push	hl
3990  12EC  21 00 00    	ld	hl,_attrib
3991  12EF  E5          	push	hl
3992  12F0  CD 06 0B    	call	_game_paint_attrib
3993  12F3  F1          	pop	af
3994  12F4  F1          	pop	af
3995  12F5  33          	inc	sp
3996  12F6  C3 05 12    	jp	l_menu_main_00115
3997  12F9              l_menu_main_00118:
3998  12F9  F1          	pop	af
3999  12FA  DD E1       	pop	ix
4000  12FC  C9          	ret
4001  12FD              	SECTION code_compiler
4002  12FD              ;	---------------------------------
4003  12FD              ; Function menu_main_print
4004  12FD              ; ---------------------------------
4005  12FD              _menu_main_print:
4006  12FD  CD 00 00    	call	___sdcc_enter_ix
4007  1300  21 00 00    	ld	hl,_ay_song_04_lotr
4008  1303  E5          	push	hl
4009  1304  21 00 04    	ld	hl,0x0400
4010  1307  E5          	push	hl
4011  1308  CD 00 00    	call	_ay_song_play
4012  130B  76          	halt
4013  130C  2E 00       	ld	l,0x00
4014  130E  CD 00 00    	call	_zx_cls_fastcall
4015  1311  21 00 00    	ld	hl,_screen_ink
4016  1314  36 07       	ld	(hl),0x07
4017  1316  21 20 0B    	ld	hl,0x0b20
4018  1319  E5          	push	hl
4019  131A  21 00 CC    	ld	hl,0xcc00
4020  131D  E5          	push	hl
4021  131E  CD 00 00    	call	_NIRVANAP_spriteT_callee
4022  1321  21 20 0D    	ld	hl,0x0d20
4023  1324  E5          	push	hl
4024  1325  21 01 CD    	ld	hl,0xcd01
4025  1328  E5          	push	hl
4026  1329  CD 00 00    	call	_NIRVANAP_spriteT_callee
4027  132C  21 20 0F    	ld	hl,0x0f20
4028  132F  E5          	push	hl
4029  1330  21 02 CE    	ld	hl,0xce02
4030  1333  E5          	push	hl
4031  1334  CD 00 00    	call	_NIRVANAP_spriteT_callee
4032  1337  21 20 11    	ld	hl,0x1120
4033  133A  E5          	push	hl
4034  133B  21 03 CF    	ld	hl,0xcf03
4035  133E  E5          	push	hl
4036  133F  CD 00 00    	call	_NIRVANAP_spriteT_callee
4037  1342  CD 40 11    	call	_game_attribs
4038  1345  21 CA 00    	ld	hl,___str_32
4039  1348  E5          	push	hl
4040  1349  DD 66 05    	ld	h,(ix+5)
4041  134C  DD 6E 04    	ld	l,(ix+4)
4042  134F  E5          	push	hl
4043  1350  CD 00 00    	call	_zx_print_str
4044  1353  DD 7E 04    	ld	a,(ix+4)
4045  1356  07          	rlca
4046  1357  07          	rlca
4047  1358  07          	rlca
4048  1359  E6 F8       	and	a,0xf8
4049  135B  C6 08       	add	a,0x08
4050  135D  F5          	push	af
4051  135E  33          	inc	sp
4052  135F  DD 66 06    	ld	h,(ix+6)
4053  1362  DD 6E 05    	ld	l,(ix+5)
4054  1365  E5          	push	hl
4055  1366  21 00 00    	ld	hl,_attrib
4056  1369  E5          	push	hl
4057  136A  CD 06 0B    	call	_game_paint_attrib
4058  136D  F1          	pop	af
4059  136E  F1          	pop	af
4060  136F  33          	inc	sp
4061  1370  DD 34 04    	inc	(ix+4)
4062  1373  21 D5 00    	ld	hl,___str_33
4063  1376  E5          	push	hl
4064  1377  DD 66 05    	ld	h,(ix+5)
4065  137A  DD 6E 04    	ld	l,(ix+4)
4066  137D  E5          	push	hl
4067  137E  CD 00 00    	call	_zx_print_str
4068  1381  DD 7E 04    	ld	a,(ix+4)
4069  1384  07          	rlca
4070  1385  07          	rlca
4071  1386  07          	rlca
4072  1387  E6 F8       	and	a,0xf8
4073  1389  C6 08       	add	a,0x08
4074  138B  F5          	push	af
4075  138C  33          	inc	sp
4076  138D  DD 66 06    	ld	h,(ix+6)
4077  1390  DD 6E 05    	ld	l,(ix+5)
4078  1393  E5          	push	hl
4079  1394  21 00 00    	ld	hl,_attrib
4080  1397  E5          	push	hl
4081  1398  CD 06 0B    	call	_game_paint_attrib
4082  139B  F1          	pop	af
4083  139C  F1          	pop	af
4084  139D  33          	inc	sp
4085  139E  DD 34 04    	inc	(ix+4)
4086  13A1  21 E0 00    	ld	hl,___str_34
4087  13A4  E5          	push	hl
4088  13A5  DD 66 05    	ld	h,(ix+5)
4089  13A8  DD 6E 04    	ld	l,(ix+4)
4090  13AB  E5          	push	hl
4091  13AC  CD 00 00    	call	_zx_print_str
4092  13AF  DD 7E 04    	ld	a,(ix+4)
4093  13B2  07          	rlca
4094  13B3  07          	rlca
4095  13B4  07          	rlca
4096  13B5  E6 F8       	and	a,0xf8
4097  13B7  C6 08       	add	a,0x08
4098  13B9  F5          	push	af
4099  13BA  33          	inc	sp
4100  13BB  DD 66 06    	ld	h,(ix+6)
4101  13BE  DD 6E 05    	ld	l,(ix+5)
4102  13C1  E5          	push	hl
4103  13C2  21 00 00    	ld	hl,_attrib
4104  13C5  E5          	push	hl
4105  13C6  CD 06 0B    	call	_game_paint_attrib
4106  13C9  F1          	pop	af
4107  13CA  F1          	pop	af
4108  13CB  33          	inc	sp
4109  13CC  DD 34 04    	inc	(ix+4)
4110  13CF  21 EB 00    	ld	hl,___str_35
4111  13D2  E5          	push	hl
4112  13D3  DD 66 05    	ld	h,(ix+5)
4113  13D6  DD 6E 04    	ld	l,(ix+4)
4114  13D9  E5          	push	hl
4115  13DA  CD 00 00    	call	_zx_print_str
4116  13DD  DD 7E 04    	ld	a,(ix+4)
4117  13E0  07          	rlca
4118  13E1  07          	rlca
4119  13E2  07          	rlca
4120  13E3  E6 F8       	and	a,0xf8
4121  13E5  C6 08       	add	a,0x08
4122  13E7  F5          	push	af
4123  13E8  33          	inc	sp
4124  13E9  DD 66 06    	ld	h,(ix+6)
4125  13EC  DD 6E 05    	ld	l,(ix+5)
4126  13EF  E5          	push	hl
4127  13F0  21 00 00    	ld	hl,_attrib
4128  13F3  E5          	push	hl
4129  13F4  CD 06 0B    	call	_game_paint_attrib
4130  13F7  F1          	pop	af
4131  13F8  F1          	pop	af
4132  13F9  33          	inc	sp
4133  13FA  DD 34 04    	inc	(ix+4)
4134  13FD  21 F4 00    	ld	hl,___str_36
4135  1400  E5          	push	hl
4136  1401  DD 66 05    	ld	h,(ix+5)
4137  1404  DD 6E 04    	ld	l,(ix+4)
4138  1407  E5          	push	hl
4139  1408  CD 00 00    	call	_zx_print_str
4140  140B  DD 7E 04    	ld	a,(ix+4)
4141  140E  07          	rlca
4142  140F  07          	rlca
4143  1410  07          	rlca
4144  1411  E6 F8       	and	a,0xf8
4145  1413  C6 08       	add	a,0x08
4146  1415  F5          	push	af
4147  1416  33          	inc	sp
4148  1417  DD 66 06    	ld	h,(ix+6)
4149  141A  DD 6E 05    	ld	l,(ix+5)
4150  141D  E5          	push	hl
4151  141E  21 00 00    	ld	hl,_attrib
4152  1421  E5          	push	hl
4153  1422  CD 06 0B    	call	_game_paint_attrib
4154  1425  F1          	pop	af
4155  1426  F1          	pop	af
4156  1427  33          	inc	sp
4157  1428  DD 34 04    	inc	(ix+4)
4158  142B  21 FD 00    	ld	hl,___str_37
4159  142E  E5          	push	hl
4160  142F  DD 66 05    	ld	h,(ix+5)
4161  1432  DD 6E 04    	ld	l,(ix+4)
4162  1435  E5          	push	hl
4163  1436  CD 00 00    	call	_zx_print_str
4164  1439  DD 7E 05    	ld	a,(ix+5)
4165  143C  C6 0A       	add	a,0x0a
4166  143E  47          	ld	b, a
4167  143F  3A 00 00    	ld	a,(_game_2buttons)
4168  1442  B7          	or	a, a
4169  1443  28 0D       	jr	Z,l_menu_main_print_00102
4170  1445  21 07 01    	ld	hl,___str_38
4171  1448  E5          	push	hl
4172  1449  DD 4E 04    	ld	c,(ix+4)
4173  144C  C5          	push	bc
4174  144D  CD 00 00    	call	_zx_print_str
4175  1450  18 0B       	jr	l_menu_main_print_00103
4176  1452              l_menu_main_print_00102:
4177  1452  21 0A 01    	ld	hl,___str_39
4178  1455  E5          	push	hl
4179  1456  DD 4E 04    	ld	c,(ix+4)
4180  1459  C5          	push	bc
4181  145A  CD 00 00    	call	_zx_print_str
4182  145D              l_menu_main_print_00103:
4183  145D  DD 7E 04    	ld	a,(ix+4)
4184  1460  07          	rlca
4185  1461  07          	rlca
4186  1462  07          	rlca
4187  1463  E6 F8       	and	a,0xf8
4188  1465  C6 08       	add	a,0x08
4189  1467  F5          	push	af
4190  1468  33          	inc	sp
4191  1469  DD 66 06    	ld	h,(ix+6)
4192  146C  DD 6E 05    	ld	l,(ix+5)
4193  146F  E5          	push	hl
4194  1470  21 00 00    	ld	hl,_attrib
4195  1473  E5          	push	hl
4196  1474  CD 06 0B    	call	_game_paint_attrib
4197  1477  F1          	pop	af
4198  1478  F1          	pop	af
4199  1479  33          	inc	sp
4200  147A  DD 34 04    	inc	(ix+4)
4201  147D  DD 34 04    	inc	(ix+4)
4202  1480  21 0D 01    	ld	hl,___str_40
4203  1483  E5          	push	hl
4204  1484  DD 66 05    	ld	h,(ix+5)
4205  1487  DD 6E 04    	ld	l,(ix+4)
4206  148A  E5          	push	hl
4207  148B  CD 00 00    	call	_zx_print_str
4208  148E  DD 7E 04    	ld	a,(ix+4)
4209  1491  07          	rlca
4210  1492  07          	rlca
4211  1493  07          	rlca
4212  1494  E6 F8       	and	a,0xf8
4213  1496  C6 08       	add	a,0x08
4214  1498  F5          	push	af
4215  1499  33          	inc	sp
4216  149A  DD 66 06    	ld	h,(ix+6)
4217  149D  DD 6E 05    	ld	l,(ix+5)
4218  14A0  E5          	push	hl
4219  14A1  21 00 00    	ld	hl,_attrib
4220  14A4  E5          	push	hl
4221  14A5  CD 06 0B    	call	_game_paint_attrib
4222  14A8  F1          	pop	af
4223  14A9  F1          	pop	af
4224  14AA  33          	inc	sp
4225  14AB  DD 34 04    	inc	(ix+4)
4226  14AE  DD 34 04    	inc	(ix+4)
4227  14B1  DD 34 04    	inc	(ix+4)
4228  14B4  DD 34 04    	inc	(ix+4)
4229  14B7  DD 34 04    	inc	(ix+4)
4230  14BA  21 00 00    	ld	hl,_screen_ink
4231  14BD  36 01       	ld	(hl),0x01
4232  14BF  21 15 01    	ld	hl,___str_41
4233  14C2  E5          	push	hl
4234  14C3  26 02       	ld	h,0x02
4235  14C5  DD 6E 04    	ld	l,(ix+4)
4236  14C8  E5          	push	hl
4237  14C9  CD 00 00    	call	_zx_print_str
4238  14CC  DD 34 04    	inc	(ix+4)
4239  14CF  21 30 01    	ld	hl,___str_42
4240  14D2  E5          	push	hl
4241  14D3  26 04       	ld	h,0x04
4242  14D5  DD 6E 04    	ld	l,(ix+4)
4243  14D8  E5          	push	hl
4244  14D9  CD 00 00    	call	_zx_print_str
4245  14DC  DD 34 04    	inc	(ix+4)
4246  14DF  21 47 01    	ld	hl,___str_43
4247  14E2  E5          	push	hl
4248  14E3  AF          	xor	a, a
4249  14E4  F5          	push	af
4250  14E5  33          	inc	sp
4251  14E6  DD 7E 04    	ld	a,(ix+4)
4252  14E9  F5          	push	af
4253  14EA  33          	inc	sp
4254  14EB  CD 00 00    	call	_zx_print_str
4255  14EE  DD 34 04    	inc	(ix+4)
4256  14F1  DD 34 04    	inc	(ix+4)
4257  14F4  21 00 00    	ld	hl,_screen_ink
4258  14F7  36 05       	ld	(hl),0x05
4259  14F9  21 67 01    	ld	hl,___str_44
4260  14FC  E5          	push	hl
4261  14FD  26 08       	ld	h,0x08
4262  14FF  DD 6E 04    	ld	l,(ix+4)
4263  1502  E5          	push	hl
4264  1503  CD 00 00    	call	_zx_print_str
4265  1506  DD 7E 04    	ld	a,(ix+4)
4266  1509  07          	rlca
4267  150A  07          	rlca
4268  150B  07          	rlca
4269  150C  E6 F8       	and	a,0xf8
4270  150E  C6 08       	add	a,0x08
4271  1510  F5          	push	af
4272  1511  33          	inc	sp
4273  1512  21 00 1F    	ld	hl,0x1f00
4274  1515  E5          	push	hl
4275  1516  21 00 00    	ld	hl,_attrib
4276  1519  E5          	push	hl
4277  151A  CD 06 0B    	call	_game_paint_attrib
4278  151D  F1          	pop	af
4279  151E  F1          	pop	af
4280  151F  33          	inc	sp
4281  1520  DD E1       	pop	ix
4282  1522  C9          	ret
4283  1523              	SECTION rodata_compiler
4284  00CA              ___str_32:
4285  00CA  31 20 53 49 4E 43 4C 41 49 52 
                        	DEFM "1 SINCLAIR"
4286  00D4  00          	DEFB 0x00
4287  00D5              	SECTION rodata_compiler
4288  00D5              ___str_33:
4289  00D5  32 20 4B 45 59 42 4F 41 52 44 
                        	DEFM "2 KEYBOARD"
4290  00DF  00          	DEFB 0x00
4291  00E0              	SECTION rodata_compiler
4292  00E0              ___str_34:
4293  00E0  33 20 4B 45 4D 50 53 54 4F 4E 
                        	DEFM "3 KEMPSTON"
4294  00EA  00          	DEFB 0x00
4295  00EB              	SECTION rodata_compiler
4296  00EB              ___str_35:
4297  00EB  34 20 43 55 52 53 4F 52 
                        	DEFM "4 CURSOR"
4298  00F3  00          	DEFB 0x00
4299  00F4              	SECTION rodata_compiler
4300  00F4              ___str_36:
4301  00F4  35 20 44 45 46 49 4E 45 
                        	DEFM "5 DEFINE"
4302  00FC  00          	DEFB 0x00
4303  00FD              	SECTION rodata_compiler
4304  00FD              ___str_37:
4305  00FD  36 20 43 4F 4E 54 52 4F 4C 
                        	DEFM "6 CONTROL"
4306  0106  00          	DEFB 0x00
4307  0107              	SECTION rodata_compiler
4308  0107              ___str_38:
4309  0107  32 42       	DEFM "2B"
4310  0109  00          	DEFB 0x00
4311  010A              	SECTION rodata_compiler
4312  010A              ___str_39:
4313  010A  31 42       	DEFM "1B"
4314  010C  00          	DEFB 0x00
4315  010D              	SECTION rodata_compiler
4316  010D              ___str_40:
4317  010D  30 20 53 54 41 52 54 
                        	DEFM "0 START"
4318  0114  00          	DEFB 0x00
4319  0115              	SECTION rodata_compiler
4320  0115              ___str_41:
4321  0115  43 4F 44 45 20 43 2E 47 4F 4E 5A 41 4C 45 5A 20 41 2E 41 4C 42 52 45 43 48 54 
                        	DEFM "CODE C.GONZALEZ A.ALBRECHT"
4322  012F  00          	DEFB 0x00
4323  0130              	SECTION rodata_compiler
4324  0130              ___str_42:
4325  0130  4D 55 53 49 43 20 53 39 20 46 58 20 42 45 49 4B 45 52 53 4F 46 54 
                        	DEFM "MUSIC S9 FX BEIKERSOFT"
4326  0146  00          	DEFB 0x00
4327  0147              	SECTION rodata_compiler
4328  0147              ___str_43:
4329  0147  54 45 53 54 20 41 42 55 20 53 49 4D 42 45 4C 20 56 45 52 20 31 2E 30 30 20 42 55 47 46 49 58 
                        	DEFM "TEST ABU SIMBEL VER 1.00 BUGFIX"
4330  0166  00          	DEFB 0x00
4331  0167              	SECTION rodata_compiler
4332  0167              ___str_44:
4333  0167  32 30 31 38 20 4E 4F 45 4E 54 49 45 4E 44 4F 
                        	DEFM "2018 NOENTIENDO"
4334  0176  00          	DEFB 0x00
4335  0177              	SECTION code_compiler
4336  1523              ;	---------------------------------
4337  1523              ; Function menu_redefine
4338  1523              ; ---------------------------------
4339  1523              _menu_redefine:
4340  1523  76          	halt
4341  1524  2E 00       	ld	l,0x00
4342  1526  CD 00 00    	call	_zx_cls_fastcall
4343  1529  21 00 00    	ld	hl,_tmp0
4344  152C  36 08       	ld	(hl),0x08
4345  152E              l_menu_redefine_00105:
4346  152E  3A 00 00    	ld	a,(_tmp0)
4347  1531  07          	rlca
4348  1532  07          	rlca
4349  1533  07          	rlca
4350  1534  E6 F8       	and	a,0xf8
4351  1536  C6 08       	add	a,0x08
4352  1538  F5          	push	af
4353  1539  33          	inc	sp
4354  153A  21 0A 10    	ld	hl,0x100a
4355  153D  E5          	push	hl
4356  153E  21 00 00    	ld	hl,_attrib
4357  1541  E5          	push	hl
4358  1542  CD 06 0B    	call	_game_paint_attrib
4359  1545  F1          	pop	af
4360  1546  F1          	pop	af
4361  1547  33          	inc	sp
4362  1548  21 00 00    	ld	hl,_tmp0
4363  154B  7E          	ld	a,(hl)
4364  154C  3C          	inc	a
4365  154D  77          	ld	(hl),a
4366  154E  D6 0E       	sub	a,0x0e
4367  1550  38 DC       	jr	C,l_menu_redefine_00105
4368  1552  21 77 01    	ld	hl,___str_45
4369  1555  E5          	push	hl
4370  1556  21 08 0A    	ld	hl,0x0a08
4371  1559  E5          	push	hl
4372  155A  CD 00 00    	call	_zx_print_str
4373  155D  CD E6 15    	call	_menu_define_key
4374  1560  22 08 00    	ld	(_k1 + 0x0008),hl
4375  1563  21 7A 01    	ld	hl,___str_46
4376  1566  E5          	push	hl
4377  1567  21 09 0A    	ld	hl,0x0a09
4378  156A  E5          	push	hl
4379  156B  CD 00 00    	call	_zx_print_str
4380  156E  CD E6 15    	call	_menu_define_key
4381  1571  22 06 00    	ld	(_k1 + 0x0006),hl
4382  1574  21 7F 01    	ld	hl,___str_47
4383  1577  E5          	push	hl
4384  1578  21 0A 0A    	ld	hl,0x0a0a
4385  157B  E5          	push	hl
4386  157C  CD 00 00    	call	_zx_print_str
4387  157F  CD E6 15    	call	_menu_define_key
4388  1582  22 04 00    	ld	(_k1 + 0x0004),hl
4389  1585  21 84 01    	ld	hl,___str_48
4390  1588  E5          	push	hl
4391  1589  21 0B 0A    	ld	hl,0x0a0b
4392  158C  E5          	push	hl
4393  158D  CD 00 00    	call	_zx_print_str
4394  1590  CD E6 15    	call	_menu_define_key
4395  1593  22 02 00    	ld	(_k1 + 0x0002),hl
4396  1596  3A 00 00    	ld	a,(_game_2buttons)
4397  1599  B7          	or	a, a
4398  159A  28 24       	jr	Z,l_menu_redefine_00103
4399  159C  21 8A 01    	ld	hl,___str_49
4400  159F  E5          	push	hl
4401  15A0  21 0C 0A    	ld	hl,0x0a0c
4402  15A3  E5          	push	hl
4403  15A4  CD 00 00    	call	_zx_print_str
4404  15A7  CD E6 15    	call	_menu_define_key
4405  15AA  22 00 00    	ld	(_k2),hl
4406  15AD  21 8F 01    	ld	hl,___str_50
4407  15B0  E5          	push	hl
4408  15B1  21 0D 0A    	ld	hl,0x0a0d
4409  15B4  E5          	push	hl
4410  15B5  CD 00 00    	call	_zx_print_str
4411  15B8  CD E6 15    	call	_menu_define_key
4412  15BB  22 00 00    	ld	(_k1),hl
4413  15BE  18 11       	jr	l_menu_redefine_00104
4414  15C0              l_menu_redefine_00103:
4415  15C0  21 8A 01    	ld	hl,___str_49
4416  15C3  E5          	push	hl
4417  15C4  21 0C 0A    	ld	hl,0x0a0c
4418  15C7  E5          	push	hl
4419  15C8  CD 00 00    	call	_zx_print_str
4420  15CB  CD E6 15    	call	_menu_define_key
4421  15CE  22 00 00    	ld	(_k1),hl
4422  15D1              l_menu_redefine_00104:
4423  15D1  21 0C 20    	ld	hl,0x200c
4424  15D4  E5          	push	hl
4425  15D5  CD 00 00    	call	_game_fill_row
4426  15D8  21 0A 14    	ld	hl,0x140a
4427  15DB  E5          	push	hl
4428  15DC  3E 07       	ld	a,0x07
4429  15DE  F5          	push	af
4430  15DF  33          	inc	sp
4431  15E0  CD FD 12    	call	_menu_main_print
4432  15E3  F1          	pop	af
4433  15E4  33          	inc	sp
4434  15E5  C9          	ret
4435  15E6              	SECTION rodata_compiler
4436  0177              ___str_45:
4437  0177  55 50       	DEFM "UP"
4438  0179  00          	DEFB 0x00
4439  017A              	SECTION rodata_compiler
4440  017A              ___str_46:
4441  017A  44 4F 57 4E 	DEFM "DOWN"
4442  017E  00          	DEFB 0x00
4443  017F              	SECTION rodata_compiler
4444  017F              ___str_47:
4445  017F  4C 45 46 54 	DEFM "LEFT"
4446  0183  00          	DEFB 0x00
4447  0184              	SECTION rodata_compiler
4448  0184              ___str_48:
4449  0184  52 49 47 48 54 
                        	DEFM "RIGHT"
4450  0189  00          	DEFB 0x00
4451  018A              	SECTION rodata_compiler
4452  018A              ___str_49:
4453  018A  46 49 52 45 	DEFM "FIRE"
4454  018E  00          	DEFB 0x00
4455  018F              	SECTION rodata_compiler
4456  018F              ___str_50:
4457  018F  4A 55 4D 50 	DEFM "JUMP"
4458  0193  00          	DEFB 0x00
4459  0194              	SECTION code_compiler
4460  15E6              ;	---------------------------------
4461  15E6              ; Function menu_define_key
4462  15E6              ; ---------------------------------
4463  15E6              _menu_define_key:
4464  15E6              l_menu_define_key_00107:
4465  15E6  CD 00 00    	call	_in_wait_key
4466  15E9  CD 00 00    	call	_in_inkey
4467  15EC  7D          	ld	a,l
4468  15ED  32 00 00    	ld	(_tmp1),a
4469  15F0  CD 00 00    	call	_in_wait_nokey
4470  15F3  21 00 00    	ld	hl,_tmp0
4471  15F6  36 00       	ld	(hl),0x00
4472  15F8              l_menu_define_key_00103:
4473  15F8  21 00 00    	ld	hl,_tmp0
4474  15FB  7E          	ld	a, (hl)
4475  15FC  D6 26       	sub	a,0x26
4476  15FE  30 E6       	jr	NC,l_menu_define_key_00107
4477  1600  4E          	ld	c,(hl)
4478  1601  06 00       	ld	b,0x00
4479  1603  21 00 00    	ld	hl,_key_map
4480  1606  09          	add	hl,bc
4481  1607  4E          	ld	c, (hl)
4482  1608  3A 00 00    	ld	a,(_tmp1)
4483  160B  91          	sub	a, c
4484  160C  20 10       	jr	NZ,l_menu_define_key_00102
4485  160E  01 00 00    	ld	bc,_scan_map+0
4486  1611  2A 00 00    	ld	hl,(_tmp0)
4487  1614  26 00       	ld	h,0x00
4488  1616  29          	add	hl, hl
4489  1617  09          	add	hl, bc
4490  1618  4E          	ld	c, (hl)
4491  1619  23          	inc	hl
4492  161A  66          	ld	h, (hl)
4493  161B  69          	ld	l, c
4494  161C  18 06       	jr	l_menu_define_key_00109
4495  161E              l_menu_define_key_00102:
4496  161E  21 00 00    	ld	hl,_tmp0
4497  1621  34          	inc	(hl)
4498  1622  18 D4       	jr	l_menu_define_key_00103
4499  1624              l_menu_define_key_00109:
4500  1624  C9          	ret
4501  1625              	SECTION IGNORE
4502  0000              
